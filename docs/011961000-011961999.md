# StackOverflow 问答 11961000-11961999

# netty - Netty 4.0.0.Alpha2-SNAPSHOT maven 可用性

> ID：11961009
> 
> 赞同：1
> 
> 时间：2012-08-14T21:27:46.943
> 
> 标签：netty

是否有最新的 4.0.0.Alpha2-SNAPSHOT 的 maven 存储库

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T07:05:02.520

是的有..

[http://repository-netty.forge.cloudbees.com/snapshot/](http://repository-netty.forge.cloudbees.com/snapshot/)

# c# - 组合框未正确显示“显示成员”？

> ID：11961010
> 
> 赞同：1
> 
> 时间：2012-08-14T21:27:57.490
> 
> 标签：c#, wpf, xaml, data-binding, combobox

好的，我不明白为什么 WPF 不能显示组合框项的“显示成员”，但可以执行“选定值”。奇怪的是我可以显式创建显示成员但不能取回它。在下面的示例中，我简化了使用 ADO.NET 填充 itemsource 的真实示例，但概念是相同的。我正在生成一个在运行时从 sql 语句生成的组合框。我想获得一件事的价值，但要显示另一件事。我是否缺少一些额外的绑定或自定义，或者只是 .NET 的错误成员？我只想让'Display of ...'被选中。如果不可能，那似乎有点奇怪。当我选择时，我得到的只是“价值”，所以我知道转移中丢失了一些东西。

有任何想法吗？

XAML：

```
<Window x:Class="WPFComboBoxTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <StackPanel>
    <ComboBox x:Name="cmb" Width="100" Height="50"/>
    <TextBlock Height="100"/>
    <Button x:Name="btn" Content="Click" Click="btn_Click" Width="50"/>
    </StackPanel> 
```

C#代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using System.Data;

namespace WPFComboBoxTest
{

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        BindComboBox(cmb);
    }

    public void BindComboBox(ComboBox cbx)
    {
        DataTable dt = new DataTable();

        dt.Columns.Add("Value", typeof(string));
        dt.Columns.Add("Id", typeof(int));

        dt.Rows.Add("Display of One", 1);
        dt.Rows.Add("Display of Two", 2);
        dt.Rows.Add("Display of Three", 3);
        dt.Rows.Add("Display of Four", 4);

        cbx.ItemsSource = dt.DefaultView;
        cbx.DisplayMemberPath = dt.Columns["Value"].ToString();
        cbx.SelectedValuePath = dt.Columns["Id"].ToString();
    }

    private void btn_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Selected Value works: " + cmb.SelectedValue
            + "\n\nSelect Display does not though?: " + cmb.DisplayMemberPath
            );
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:30:46.087

开始调用`ToString`列听起来不是一个好主意，不确定如何`DataTables`映射，但我会尝试

```
cbx.DisplayMemberPath = "Value";
cbx.SelectedValuePath = "Id"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:53:38.333

（捂脸）这很简单。cmb.DisplayMemberPath 需要为 cmb.Text。“文本”是我需要向用户显示显示成员的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T07:04:24.300

更改您的`btn_Click`事件数据如下：

```
private void btn_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Selected Value works: " + cmb.SelectedValue
            + "\n\nSelect Display does not though?: " + cmb.Text
    );
} 
```

我认为工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T00:21:34.770

尝试使用：

```
cbx.DisplayMemberPath = "[Value]";
cbx.SelectedValuePath = "[Id]"; 
```

这个对我有用！

# c# - 我可以强制 .NET XmlDocument 实例更快地释放它持有的内存吗？

> ID：11961020
> 
> 赞同：3
> 
> 时间：2012-08-14T21:28:42.193
> 
> 标签：c#, garbage-collection, xamarin.android, xmldocument, xamarin

**我有一个 Mono for Android 应用程序，它使用 .NET XmlDocument**类读取 XML 文件。每个文档大约 180K。

在解析每个文档并创建自己的内部数据结构后，我没有留下对**XmlDocument**实例的引用，因此它可以进行垃圾回收。

但是，问题是，在该集合发生之前需要 5-6 秒，如果我在 5-6 秒内加载多个文档，我的应用程序会崩溃到操作系统，没有打印错误消息，也没有抛出异常等。它只是说线程 12 已退出（我没有创建任何额外的线程，所以我也不明白为什么它是线程 12——XmlDocument 的线程？）。

如果我加载文档 1，然后等待 5 秒，然后加载文档 2，等待 5 秒然后加载文档 3，等等，那么一切正常。

在这种情况下，在 5 秒的等待期间，我可以看到 GC 启动了几次，并在 4-5 个周期内总共释放了大约 1MB 的内存（一些标记为 EXPLICIT，一些标记为 CONCURRENT）。

一旦按照我找到的一篇文章的建议完成后，我还尝试添加对 xmlDocument.RemoveAll() 的调用。之后我还添加了对 GC.Collect() 的调用。它略有帮助，但它仍然崩溃，只是不太频繁。

知道如何增加可用内存或让**XmlDocument**表现得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:38:59.457

这与其说是一个答案，不如说是一个替代方案，但我使用 XmlTextReader 重写了我的 XML 解析代码，问题不再出现。

当然 XmlTextReader 不需要将整个 XML 文件加载到内存中，这对内存的使用有很大的帮助。

我可以一个接一个地快速加载多个文件，现在没有崩溃。

XmlTextReader API 需要做更多的工作才能做到正确，但现在看起来很可靠。

# nhibernate - NHibernate - LazyLoad - 找不到持久性

> ID：11961023
> 
> 赞同：1
> 
> 时间：2012-08-14T21:28:53.020
> 
> 标签：nhibernate, lazy-loading

当我在 NHibernate 中为我的实体使用 LazyLoad 时，我得到了以下异常：

NHibernate.MappingException：没有持久性：PrivilegeLevelProxy

PrivilegeLevel 是一个实体。它也正确映射（它在没有 LazyLoad() 的情况下工作）。我问我，为什么 NHibernate 需要一个持久化代理对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:43:00.780

NHibernate 不需要持久化代理。这个错误可能意味着 NHibernate 没有机会延迟加载代理，或者会话无法识别 PrivilegeLevel 是代理。

您是否使用任何自定义拦截器？如果这样做，则需要覆盖`GetEntityName`方法。

这里有一些类似的 SO 问题可能会有所帮助：
[No persister for: Castle.Proxies.<EntityName>Proxy and lazy="true" in NHibernate?](https://stackoverflow.com/questions/6434415/no-persister-for-castle-proxies-entitynameproxy-and-lazy-true-in-nhibernate)
[No Persister for：使用 INotifyPropertyChanged 拦截器保存时出错](https://stackoverflow.com/questions/1403176/no-persister-for-error-on-save-with-inotifypropertychanged-interceptor)

# asp.net - V9 之前的任何 IE 中均未显示 Div 背景

> ID：11961024
> 
> 赞同：0
> 
> 时间：2012-08-14T21:28:52.910
> 
> 标签：asp.net, css, internet-explorer, html

我有一个 div ：

```
<div class="ContainerBG">
    Special Ad
</div> 
```

和一个CSS：

```
 .ContainerBG
{
    background-repeat: repeat-x;
    text-align: center;
    vertical-align: middle;
    font-size: 16px;
    font-family: Arial;
    color: #000000;
    width: 100%;
    line-height: 28px;
    font-weight: bold;
    background-image: url('Resources/images/ContainerBG.gif');
} 
```

在所有浏览器和 IE9 中，背景都正确显示，但在 IE8 或更低版本中，背景根本不显示，但 'ContainerBG' 中的其他属性正在工作！并且ia可以在IE开发者工具中看到正确渲染的背景！

我也试过：

```
 background: url('Resources/images/ContainerBG.gif') repeat-x; 
```

我也尝试通过内联样式，但它没有用！

如果我们将 div 替换为相同 CSS 的跨度，它将起作用！[这里](http://www.fedne.com/Default_en.aspx)有一个测试页面，请注意左窗格是我正在谈论的 div，右窗格具有相同的代码但使用跨度，因为您可以看到跨度工作但 div 没有！

有人面临同样的问题吗？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:57:47.980

尝试在你的 head 标签中添加这个：

```
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:36:54.410

唉，如果我从 中删除`content: ' ';`，`.QAZ-layout-cell QAZ-sidebar1`我可以看到`div`. 如果指定了 !DOCTYPE，IE8 仅支持 content 属性。

# android - Android LinearLayout 多点触控

> ID：11961031
> 
> 赞同：0
> 
> 时间：2012-08-14T21:29:27.437
> 
> 标签：android, android-linearlayout, android-view, multi-touch

我使用`LinearLayout`'s 来表示我的 UI 的不同部分。这个想法是这些布局将采用网格排列。此外，用户将能够拖动窗口以重新排列它们。我从创建布局开始，一切都很好。然后我应用了`OnTouchListener`我的观点：

```
 touchListener = new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.e("VARS","MotionEvent!");
                if(event.getPointerCount() == 2) {
                Log.e("VARS","It's two!");

                }
                return false;
            }
        }; 
```

它完全忽略了`event.getPointerCount()`两个的情况！似乎只有当指针计数为 1 时才会调用此方法。我把它放在我的清单中：

`<uses-feature android:name="android.hardware.touchscreen.multitouch"/>`

它仍然不起作用。是否`LinearLayout`有一种特殊情况，只有`MotionEvent`'s 的指针计数为 1 才能被识别，还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:38:47.107

您需要更改`return false`为`return true`. 通过使用`MotionEvent`，它将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:34:38.450

[http://developer.android.com/reference/android/view/MotionEvent.html#getPointerCount%28%29](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerCount%28%29)

您不能将其设置为高于 1。它与线性布局无关。

# xcode4.4 - xcrun：错误：无法统计活动 Xcode 路径“/Volumes/Xcode/Xcode45-DP1.app/Contents/Developer”。（没有相应的文件和目录）

> ID：11961032
> 
> 赞同：77
> 
> 时间：2012-08-14T21:29:30.360
> 
> 标签：xcode4.4

我整天都在用头撞桌子，试图解决这个问题！！！

我已经按照这里的建议尝试了建议`xcode-select -switch /path/to/xcode/`，[但](https://stackoverflow.com/questions/11456918/change-xcrun-developer-path)它仍然给我这个错误！

我现在已经完全删除了 XCode 4.4 和命令行工具，运行`xcrun`仍然给我这个错误！

即使安装新的 Xcode 副本和命令行工具也会产生这个错误！！

命令的结果..

```
sh-3.2# xcode-select -print-path
/Applications/Xcode.app/Contents/Developer
sh-3.2# xcrun -find
xcrun: Error: could not stat active Xcode path '/Volumes/Xcode/Xcode45-DP1.app/Contents/Developer'.           (No such file or directory) 
```

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-08-15T18:40:59.150

# 解决方案 #1（影响所有用户）

`xcode-select`是答案。您要么指向错误的路径，要么没有以 root 用户身份执行此操作。在终端试试这个：

```
sudo xcode-select -switch /Applications/Xcode.app 
```

然后输入您的密码。

# 解决方案 #2（仅影响您）

如果

*   你不想`sudo`，或者
*   您没有超级用户权限，或者
*   解决方案＃1不起作用

改写 DEVELOPER_DIR 环境变量：

```
export DEVELOPER_DIR="/Applications/Xcode.app/Contents/Developer" 
```

**可选**：您可以通过编辑**[.bash_profile](http://redfinsolutions.com/blog/creating-bashprofile-your-mac)**文件来使其在登录会话之间持续存在。

如果这两种解决方案都不起作用，请发布您的错误消息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-22T08:57:25.463

问题是它`/usr/share/xcode-select/xcode_dir_link`指向一个旧文件夹，并且在命令时不更新

`sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/`被执行。

**解决方案**：删除此链接并手动创建。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T17:17:48.303

这对我有用：

1.  XCode 首选项/位置/命令行工具 - 设置为正确的版本和位置
2.  XCode 首选项/下载 - 安装命令行工具

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-25T19:01:00.133

上面的解决方案对我没有帮助。删除旧系统链接对我有帮助。它在这里描述： [错误：无法运行/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/bin/ibtool（没有这样的文件）](https://stackoverflow.com/questions/11423215/error-cant-run-applications-xcode-app-contents-developer-platforms-macosx-pla)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-26T12:16:00.420

我会在 10.9 上出现同样的错误。我的系统上没有安装 XCode，我手动更新了 XCode 命令行工具。之后，以下命令为我修复了错误：

```
sudo xcode-select -switch / 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-13T08:19:01.957

我只在 mac 系统上看到过这种情况，因为它考虑运行很少的命令，例如`gcc` `git`系统级命令和`command line developer tools`.

卸载后我遇到了这个问题`xcode`。所以解决方案是要么安装`xcode`预先打包好的工具，要么只通过运行安装工具`xcode-select --install`。

参考[http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/](http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/)

* * *

## 回答 #7

> 赞同：-11
> 
> 时间：2012-08-27T15:11:04.600

最终奏效的解决方案是重新安装 10.8，重新安装 Xcode，然后重新安装命令行工具。

# c - C 解析器递归

> ID：11961037
> 
> 赞同：4
> 
> 时间：2012-08-14T21:29:50.773
> 
> 标签：c, recursion, lisp

我正在用 C 语言编写一个简单的程序，一个仅涉及整数和`"+ - * /"`运算符的 Lisp 算术计算器，我这样做是为了学习目的，这不是我的作业或类似的东西。

所以我做了一个函数，它可以正确解析这样的东西，`(+ 2 3)`它会输出 5，所以我知道如何处理非嵌套语句，但是当我有这样的东西时，我`(+ (* 2 3) (- 4 2))`似乎可以使用递归来解决这个问题，但我不真的不知道该怎么做。

我的逻辑如下（在伪代码中）：`

```
 function parse_line(int n)
    get_input(string);
    if string[n] == '('
     if string[n+1] == operator
      if string[n+3] == number
       result = parseAllNumbers(); //between ( )
       return result; 
    if string[n+3] == '('
     parse_line(n+2); 
```

`

所以我的逻辑在这里是正确的，如果我有，`(+ (* 2 3) (- 4 2))`我会计算。`(* 2 3)`，我将如何计算`(- 4 2)`然后将这两个结果加在一起

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:38:14.860

你肯定在正确的轨道上。

假设我们`getToken()`编写了一个函数，它从当前位置读取字符串中的下一个逻辑标记。逻辑标记可以是数字、'('、')' 或四个运算符中的任何一个。然后我们可以递归地评估表达式。

```
function evaluateExpression(){
    var token = getToken();

    if( isNumber(token)){
        return token;
    }else if( isOpenParen(token)){
        return evaluateExpression();
    }

    var numOne = evaluateExpression();
    var nextToken = null;
    while( !isRightParen(nextToken)){
        nextToken = getToken();
        numOne = evaluate(token, numOne, nextToken);
    }

    return numOne;
} 
```

如果传递给它的标记分别是数字或左括号，则函数`isNumber()`并执行它们所暗示的操作，则返回 true。`isLeftParen()`该`evaluate()`函数采用运算符标记以及两个数字来评估它们。例如，`evaluate(+,2,4)`将返回`6`和`evaluate(-,2,4)`将返回`2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:37:18.417

这是一个使用递归的解决方案：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

#define OPERATOR 0
#define OPEN_PAREN 1
#define CLOSE_PAREN 2
#define NUMBER 3
#define END_OF_EXPR 4

#define BAD_LINE 1
#define GOOD_LINE 0

typedef struct 
{
   unsigned char type;
   char operator;
   int number;
} token;

token tokens[100];
int num_tokens = 0;
int token_counter = 0;

token get_token(void)
{

   token temp;
   if ( token_counter < num_tokens )
   {
      temp = tokens[token_counter];
      token_counter += 1;
   }
   else
   {
      temp.type = END_OF_EXPR;
   }
   return temp;
}

int tokenize(const char *line, token *tokens,int *num_tokens)
{
   token_counter = 0;
   int number_digit = 0;
   token aToken;
   int length = strlen(line);
   char number_array[20];
   *num_tokens = 0;
   int num_open_paren = 0;
   int num_close_paren = 0;
   for (int i = 0; i < length; i++)
   {
      /* ignore whitespace */
      if ( line[i] == ' ' || line[i] == '\t' || line[i] == '\n' || line[i] == '\r' )
      {
         if ( number_digit > 0 )
         {
            number_array[number_digit] = '\0';
            aToken.number = atoi(number_array);
            aToken.type = NUMBER;
            tokens[*num_tokens] = aToken;
            *num_tokens += 1;       
            number_digit = 0;   
         }
      }
      else if ( line[i] == '(')
      {
         aToken.type = OPEN_PAREN;
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;
         num_open_paren += 1;
      }
      else if (line[i] == ')' )
      {
         if ( number_digit > 0 )
         {
            number_array[number_digit] = '\0';
            aToken.number = atoi(number_array);
            aToken.type = NUMBER;
            tokens[*num_tokens] = aToken;
            *num_tokens += 1;           
            number_digit = 0;
         }
         aToken.type = CLOSE_PAREN;
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;
         num_close_paren += 1;
      }
      else if ( line[i] == '*' || line[i] == '+' ||  
           line[i] == '/' || line[i] == '-' )
      {
         aToken.type = OPERATOR;
         aToken.operator = line[i];
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;       
      }
      else if ( isdigit(line[i]) )
      {
         number_array[number_digit] = line[i];
         number_digit += 1;
      }
      else
      {
         printf("%c - the %d character - is illegal\n",line[i],i+1);
         return BAD_LINE;
      }

   }
   if ( num_open_paren == num_close_paren )
   {
      return GOOD_LINE;
   }
   else
   {
      printf("mismatched parentheses\n:%s\n",line);
      return BAD_LINE;
   }
}

int evaluate(char operator, int *operands, int num_operands)
{
   int result = 0;
   switch (operator)
   {    
      case '+':
         for (int i = 0; i < num_operands; i++)
         {
            result += operands[i];
         }
         break;
      case '-':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result -= operands[i];
         }
         break;
      case '*':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result *= operands[i];
         }    
         break;
      case '/':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result /= operands[i];
         }    
         break;   
      default:
         printf("ERROR invalid operator: %c\n",operator);
   }
   return result;
}

int process_expression(void)
{
   int result = 0;
   token current_token = get_token();
   if ( current_token.type != OPERATOR )
   {
      fprintf(stderr,"ERROR: %s expecting operator\n",__func__);
      exit(1);
   }
   char operator = current_token.operator;
   current_token = get_token();
   int operands[200];
   int operands_index = 0;
   while ( current_token.type != CLOSE_PAREN && current_token.type != END_OF_EXPR)
   {
      if ( current_token.type == NUMBER )
      {
         operands[operands_index] = current_token.number;
         operands_index += 1;
      }
      else if ( current_token.type == OPEN_PAREN )
      {
         operands[operands_index] = process_expression();
         operands_index += 1;
      }
      current_token = get_token();
   }
   result = evaluate(operator,operands,operands_index);
   return result;
}

void process_lisp_string(const char *line)
{

   int result = tokenize(line, tokens,&num_tokens);

   if ( result == GOOD_LINE )
   {
      token first = get_token();
      if ( first.type == OPEN_PAREN )
         printf("the answer for %s is: %d\n",line, process_expression());
      else
      {
         fprintf(stderr,"ERROR: no open parentheses at front of expression\n");
         fprintf(stderr,"token type:%d\n",first.type);
      }
   }
   else 
   {
      printf("the line contained errors\n");
   }
}

int main(const int argc, const char *const argv[])
{
   char *test = "(+ 2 2 )";
   char *line = "(+ (+ 30 20) 2 2)";
   char *line2 = "(- (+ 1000 10) 200)";
   char *line3 = "(- (+ 1000 10) (- 200 10) (* 2 4))";
   char *line4 = "(+ (+ 10 10) (* 2 4) (* 2 3) (* 2 (- 3 1)))";
   process_lisp_string(test);
   process_lisp_string(line);
   process_lisp_string(line2);
   process_lisp_string(line3);
   process_lisp_string(line4);
} 
```

输出：

```
the answer for (+ 2 2 ) is: 4
the answer for (+ (+ 30 20) 2 2) is: 54
the answer for (- (+ 1000 10) 200) is: 810
the answer for (- (+ 1000 10) (- 200 10) (* 2 4)) is: 812
the answer for (+ (+ 10 10) (* 2 4) (* 2 3) (* 2 (- 3 1))) is: 38 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:53:24.773

C是最难使用的语言。除非这是家庭作业，否则最好先用另一种高级语言尝试。C 缺少字符串和堆栈等数据结构。正如其他海报所建议的那样，这种处理可能更优雅地递归完成，但我发现非递归更容易。这是一个仅处理正整数并且缺少一些错误处理的部分解决方案：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

#define OPERATOR 0
#define OPEN_PAREN 1
#define CLOSE_PAREN 2
#define NUMBER 3

#define BAD_LINE 1
#define GOOD_LINE 0

typedef struct 
{
   unsigned char type;
   char operator;
   int number;
} token;

int get_tokens(const char *line, token *tokens,int *num_tokens)
{
   int number_digit = 0;
   token aToken;
   int length = strlen(line);
   char number_array[20];
   *num_tokens = 0;
   int num_open_paren = 0;
   int num_close_paren = 0;
   for (int i = 0; i < length; i++)
   {
      /* ignore whitespace */
      if ( line[i] == ' ' || line[i] == '\t' || line[i] == '\n' || line[i] == '\r' )
      {
         if ( number_digit > 0 )
         {
            number_array[number_digit] = '\0';
            aToken.number = atoi(number_array);
            aToken.type = NUMBER;
            tokens[*num_tokens] = aToken;
            *num_tokens += 1;       
            number_digit = 0;   
         }
      }
      else if ( line[i] == '(')
      {
         aToken.type = OPEN_PAREN;
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;
         num_open_paren += 1;
      }
      else if (line[i] == ')' )
      {
         if ( number_digit > 0 )
         {
            number_array[number_digit] = '\0';
            aToken.number = atoi(number_array);
            aToken.type = NUMBER;
            tokens[*num_tokens] = aToken;
            *num_tokens += 1;           
            number_digit = 0;
         }
         aToken.type = CLOSE_PAREN;
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;
         num_close_paren += 1;
      }
      else if ( line[i] == '*' || line[i] == '+' ||  
           line[i] == '/' || line[i] == '-' )
      {
         aToken.type = OPERATOR;
         aToken.operator = line[i];
         tokens[*num_tokens] = aToken;
         *num_tokens += 1;       
      }
      else if ( isdigit(line[i]) )
      {
         number_array[number_digit] = line[i];
         number_digit += 1;
      }
      else
      {
         printf("%c - the %d character - is illegal\n",line[i],i+1);
         return BAD_LINE;
      }

   }
   if ( num_open_paren == num_close_paren )
   {
      return GOOD_LINE;
   }
   else
   {
      printf("mismatched parentheses\n:%s\n",line);
      return BAD_LINE;
   }
}

int process_expression(char operator, int *operands, int num_operands)
{
   int result = 0;
   switch (operator)
   {    
      case '+':
         for (int i = 0; i < num_operands; i++)
         {
            result += operands[i];
         }
         break;
      case '-':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result -= operands[i];
         }
         break;
      case '*':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result *= operands[i];
         }    
         break;
      case '/':
         result = operands[0];
         for (int i = 1; i < num_operands; i++)
         {
            result /= operands[i];
         }    
         break;   
      default:
         printf("ERROR invalid operator: %c\n",operator);
   }
   return result;
}

int process_tokens(token *tokens, int num_tokens)
{
   int result = 0;
   /* operators "stack" */
   char operators[100];
   /* "pointer" for current operator */
   int operator_index = -1;
   /* operands "stack" 1 row for each operator (set of parentheses) */
   int operands[100][20];
   /* how many operands for current expression? (current operator) */
   int expression_operands[100];
   for (int i = 0; i < num_tokens; i++)
   {
      if ( tokens[i].type == OPEN_PAREN )
      {
         operator_index += 1;
         expression_operands[operator_index] = 0;
      }
      else if ( tokens[i].type == CLOSE_PAREN )
      {
         result = process_expression(operators[operator_index], 
                                          &operands[operator_index][0],
                                          expression_operands[operator_index]);
         operator_index -= 1;
         if ( operator_index > -1 )
         {
            operands[operator_index][ expression_operands[operator_index] ] = result;
            expression_operands[operator_index] += 1;
         }
      }
      else if ( tokens[i].type == OPERATOR )
      {
         operators[operator_index] = tokens[i].operator;
      }
      else if ( tokens[i].type == NUMBER )
      {
         operands[operator_index][ expression_operands[operator_index] ] = tokens[i].number;
         expression_operands[operator_index] += 1;
      }
   }
   return result;
}

void process_lisp_string(const char *string)
{
   token tokens[100];
   int num_tokens = 0;
   int result = get_tokens(string, tokens,&num_tokens);

   if ( result == GOOD_LINE )
   {
      printf("the answer is: %d\n",process_tokens(tokens,num_tokens));
   }
   else 
   {
      printf("the string contained errors\n");
   }
}

int main(const int argc, const char *const argv[])
{

   char *line = "(+ (+ 30 20) 2 2)";
   char *line2 = "(- (+ 1000 10) 200)";
   char *line3 = "(- (+ 1000 10) (- 200 10) (* 2 4))";
   char *line4 = "(+ (+ 10 10) (* 2 4) (* 2 3) (* 2 (- 3 1)))";
   process_lisp_string(line);
   process_lisp_string(line2);
   process_lisp_string(line3);
   process_lisp_string(line4);

} 
```

结果：

```
the answer is: 54
the answer is: 810
the answer is: 812
the answer is: 38 
```

# entity-framework - Code First 调用存储过程返回多个结果

> ID：11961048
> 
> 赞同：7
> 
> 时间：2012-08-14T21:30:46.317
> 
> 标签：entity-framework

我在项目中使用 Code First。项目已经完成了一半。我需要调用一个存储过程来返回多个结果（3 个选择）。我的研究告诉我，Code First 不支持它。我有什么选择？更改项目以首先使用模型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T04:51:53.930

MSFT 的 Roman 回答了我的问题。他在这里写了一篇博客： [http ://romiller.com/2012/08/15/code-first-stored-procedures-with-multiple-results/](http://romiller.com/2012/08/15/code-first-stored-procedures-with-multiple-results/)

我相信很多人都有同样的问题。希望这能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:34:39.050

你能把sproc分成3个吗？我认为您会遇到从一个查询返回多个实体的问题。否则，这对你有用吗？[https://stackoverflow.com/a/4845591/1572123](https://stackoverflow.com/a/4845591/1572123)

# vb.net - 使用 CompareTo 的 VB.NET 排序顺序 - 结果不正确？

> ID：11961053
> 
> 赞同：2
> 
> 时间：2012-08-14T21:31:05.133
> 
> 标签：vb.net, string, sorting, compare, compareto

我有一长串要在网格中排序的字符串值。最初，默认排序算法用于整个网格。但是，我最终不得不重写网格的排序，因为有几列需要特殊排序，而网格不允许对特定列进行自定义排序。这里有问题的列不需要特殊排序，所以我只使用了 CompareTo：

```
Public Function Compare(ByVal p1 as MyObj, ByVal p2 as MyObj) As Integer
    Return p1.Description.CompareTo(p2.Description)
End Function 
```

比较默认的网格排序方法和我现在用 CompareTo 使用的方法，我得到了完全相同的结果。但是，直接数据库查询的排序结果不同（根据我认为应该是正确的数据库结果）。

以下是我认为不正确的排序结果的三个示例：

**示例 1**

排序结果：

1.  测试 - A/A 我的测试
2.  TEST1000 测试
3.  TEST1000 测试
4.  测试一个测试
5.  测试-B/A 我的测试

预期结果：

1.  测试 - A/A 我的测试
2.  测试-B/A 我的测试
3.  TEST1000 测试
4.  TEST1000 测试
5.  测试一个测试

**示例 2**

排序结果：

1.  测试 - 一个测试
2.  考验我
3.  测试-#1 A
4.  测试-#1 B

预期结果：

1.  考验我
2.  测试 - 一个测试
3.  测试-#1 A
4.  测试-#1 B

**示例 3**

排序结果：

1.  路易丝测试 1
2.  路易丝测试 2
3.  路易- 测试 1

预期结果：

1.  路易- 测试 1
2.  路易丝测试 1
3.  路易丝测试 2

有没有人遇到过这个或者有任何想法可能发生在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:35:25.450

[CompareTo](http://msdn.microsoft.com/en-us/library/35f0x18w.aspx)进行区分大小写、区分区域性的排序，因此撇号、连字符等字符不会显示严格字符编码排序中的位置——这似乎是您所期望的。

考虑使用允许您将[StringComparison](http://msdn.microsoft.com/en-us/library/system.stringcomparison)指定为 Ordinal的[Compare重载](http://msdn.microsoft.com/en-us/library/e6883c06)

# javascript - 基于循环创建变量。

> ID：11961056
> 
> 赞同：0
> 
> 时间：2012-08-14T21:31:38.863
> 
> 标签：javascript, google-apps-script

我想要做的是基于 for 循环中的 i 在 Google 应用程序脚本中创建一个变量。另外，我如何将循环编码到所有变量。我想做我在下面的代码中写的，但它不起作用。

```
for (var i = 1; i < 5; i ++){
     var pieChart + i = Charts.newPieChart()
        .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([1,3]))
        .build(); 
  } 
```

然后我想调用它有点像这样

```
for (var i = 1; i < 5; i ++){
        pieChart + i . do stuff with the it 

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:34:19.810

你想要的是一个**数组**。

```
var pieChart = [];
for (var i = 0; i < 4; ++i)
  pieChart[i] = whatever; 
```

JavaScript 中的数组从元素 0 开始，而不是 1。（如果你愿意，你可以随意忽略元素 0，但这会让事情变得很尴尬，因为数组的长度被认为是最大的填充索引 + 1。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:36:37.267

你可能最好使用一个`array`，它看起来像这样：

```
int[] pieChart;
pieChart = new int[5] 
for (var i = 1; i < 5; i ++){
     pieChart[i]= Charts.newPieChart()
    .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([1,3]))
    .build(); 
 } 
```

# c# - 检查数据表中是否存在字符串/记录

> ID：11961059
> 
> 赞同：11
> 
> 时间：2012-08-14T21:31:52.367
> 
> 标签：c#, datatable

我有一个字符串，我需要检查 DataTable dtPs.Rows 中的任何列“item_manuf_id”是否等于某个值

我可以遍历所有行并进行比较

```
String id = dtPs.Rows[number]["item_manuf_id"].ToString()
if ("some value".equals(id)) etc. 
```

但我想知道是否有任何方法可以检查是否`DataTable`包含记录

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T21:37:21.887

像这样的东西

```
 string find = "item_manuf_id = 'some value'";
 DataRow[] foundRows = table.Select(find); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T21:37:56.590

如果是主键，则使用[Find](http://msdn.microsoft.com/en-us/library/ydd48eyk.aspx)方法：`item_manuf_id`

```
var result = dtPs.Rows.Find("some value"); 
```

如果您只想知道该值是否在其中，请使用[Contains](http://msdn.microsoft.com/en-us/library/0hc992ac.aspx)方法。

```
if (dtPs.Rows.Contains("some value"))
{
  ...
} 
```

主键限制也适用`Contains`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T21:54:27.400

您可以遍历每一行`DataTable`并检查值。

我非常喜欢在使用 s 时使用*foreach*循环`IEnumerable`。使查看或处理每一行变得非常简单和干净

```
DataTable dtPs = // ... initialize your DataTable
foreach (DataRow dr in dtPs.Rows)
{
    if (dr["item_manuf_id"].ToString() == "some value")
    {
        // do your deed
    }
} 
```

或者，您可以将 a`PrimaryKey`用于您的`DataTable`. 这有多种帮助，但您通常需要先定义一个，然后才能使用它。

[在http://msdn.microsoft.com/en-us/library/z24kefs8(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/z24kefs8(v=vs.80).aspx)上使用 if 的示例

```
DataTable workTable = new DataTable("Customers");

// set constraints on the primary key
DataColumn workCol = workTable.Columns.Add("CustID", typeof(Int32));
workCol.AllowDBNull = false;
workCol.Unique = true;

workTable.Columns.Add("CustLName", typeof(String));
workTable.Columns.Add("CustFName", typeof(String));
workTable.Columns.Add("Purchases", typeof(Double));

// set primary key
workTable.PrimaryKey = new DataColumn[] { workTable.Columns["CustID"] }; 
```

一旦定义了主键并填充了数据，就可以使用**Find(...)**方法获取与主键匹配的行。

看看[http://msdn.microsoft.com/en-us/library/y06xa2h1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y06xa2h1(v=vs.80).aspx)

```
DataRow drFound = dtPs.Rows.Find("some value");
if (drFound["item_manuf_id"].ToString() == "some value")
{
    // do your deed
} 
```

最后，您可以使用**Select()**方法`DataTable`在[http://msdn.microsoft.com/en-us/library/y06xa2h1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y06xa2h1(v=vs.80).aspx)中找到数据。

```
String sExpression = "item_manuf_id == 'some value'";
DataRow[] drFound;
drFound = dtPs.Select(sExpression);

foreach (DataRow dr in drFound)
{
    // do you deed. Each record here was already found to match your criteria
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T21:36:51.587

我认为如果您的“item_manuf_id”是 DataTable 的主键，您可以使用[Find](http://msdn.microsoft.com/en-us/library/ydd48eyk.aspx)方法...

```
string s = "stringValue";
DataRow foundRow = dtPs.Rows.Find(s);
if(foundRow != null) {
 //You have it ...
 } 
```

# javascript - Jquery 上传 - MVC 文件名不起作用

> ID：11961065
> 
> 赞同：1
> 
> 时间：2012-08-14T21:32:25.347
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

使用 Jquery Uploadify，我无法将文件传递给控制器​​。

看法 ：

```
 <input type="file" name="file_upload" id="file_upload" /> 
```

查询：

```
<script type="text/javascript">
    $(function () {

        var uploadUrl = $('#file_upload').data();

        $('#file_upload').uploadify({

            'auto': true,
            'script': uploadUrl,               
            'swf': 'Uploadify/uploadify.swf',
            'uploader': '/ControllerName/Upload',               
            'debug': true

        });
    }); 
</script> 
```

控制器

```
 [HttpPost]
    public string Upload(HttpPostedFileBase file)
    {          
       //"file" = null is being passed from the view to the controller.
       //code..
    } 
```

我错过了一些东西，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:49:17.137

Uploadify`fileData`默认使用，所以：

```
[HttpPost]
public string Upload(HttpPostedFileBase fileData) 
{
    ...
} 
```

但您也可以使用以下[`fileObjName`](http://www.uploadify.com/documentation/uploadify/fileobjname/)设置指定此名称：

```
fileObjName: 'foobar' 
```

接着：

```
[HttpPost]
public string Upload(HttpPostedFileBase fooBar) 
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:35:01.510

您可以使用：

```
[HttpPost]
public string Upload(HttpPostedFileBase FileData) {
} 
```

或者

```
[HttpPost]
public ActionResult Upload() {
    if (Request.Files.Count > 0 && Request.Files[0].ContentLength > 0) {
        HttpPostedFileBase postedFile = Request.Files[0];
        // Do something with it
    }
} 
```

如果这些都不起作用并且您的操作根本没有触发（即尝试调试并查看方法中的断点是否被命中），那么您的问题很可能是“脚本”值 - 您是否在虚拟目录下运行? 如果是这样，您需要将目录的名称放在前面。Uploadify 使用的是绝对路径。

您可能还想检查 swf 路径，`swf': 'Uploadify/uploadify.swf'`. 它的配置方式，它是相对于当前页面的。因此，如果您在 localhost/Somepage 上，它将寻找 /Somepage/Uploadify/uploadify.swf。您可以检查浏览器的网络选项卡以确保 uploadify.swf 不是`404`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:47:23.103

不熟悉 jquery Uploadify 但是输入的名称不应该与 HttpPostedFileBase 参数的名称匹配吗？如果不是那么无视。这是我唯一看到的。

```
 <input type="file" name="file_upload" id="file_upload" />

 [HttpPost]
public string Upload(HttpPostedFileBase file_upload)
{          
  ...
} 
```

更新：我看到了，Uploadify 使用 fileData 作为参数。

# margin - Chrome中奇怪的边距问题

> ID：11961068
> 
> 赞同：0
> 
> 时间：2012-08-14T21:32:36.710
> 
> 标签：margin

我的 Chrome (21.0.1180.79 m) 的边距有问题。但是，Firefox 14.0.1 中不存在该问题。

这是截图[http://i.imgur.com/ePcXO.jpg](http://i.imgur.com/ePcXO.jpg)（对不起，我不能附上图片，因为我是新手，不允许附上图片）

在 chrome 中，当我向菜单 2 添加上边距时，它将与菜单 1 重叠。换句话说，菜单 2 的边距从菜单 1 的底部开始。

我用

边距：50 自动 20 像素；

在 Firefix 中运行良好，但在 Chrome 中不行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:46:28.603

这就是所谓的[保证金崩溃](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

您可以修复它，例如，添加浮动：[http://jsfiddle.net/bRJgB/1/](http://jsfiddle.net/bRJgB/1/)和[http://jsfiddle.net/bRJgB/1/show/](http://jsfiddle.net/bRJgB/1/show/)。

您还可以修复它，在它们之间添加一个分隔符（一个与`overflow`不同的空元素`visible`，或与`border`or `padding`）。

# php - 带有 http 重定向的博客门户

> ID：11961069
> 
> 赞同：-5
> 
> 时间：2012-08-14T21:32:38.697
> 
> 标签：php, html, ajax

正在创建一个博客门户网站，其中用户“abc”在 user_table 中注册 user_id、用户名、电子邮件、密码等，然后将在 page_table 中的 page_id、user_id、page_name 中创建像 Facebook“xyz”这样的页面。用户 abc 是管理员。我的问题是当外部用户访问该网站或单击链接（例如 [https://www.example.com/xyz](https://www.example.com/xyz)，）“xyz”页面将像 Facebook 一样打开（例如[https://www.facebook.com /cocacola](https://www.facebook.com/cocacola) 我如何在 php 中使用 .htacces 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:45:28.653

我会大胆猜测并说您要使用的是 mod_rewrite。

```
RewriteEngine On
RewriteRule ^user/([a-zA-Z]+)/$ index.php?user=$1 
```

这会将地址 www.example.com/index.php?user=ABC 重写为 www.example.com/user/ABC

# hibernate - 休眠级联使用排序的 FK 保存父/子

> ID：11961071
> 
> 赞同：1
> 
> 时间：2012-08-14T21:32:48.313
> 
> 标签：hibernate, parent, sequence, cascade

我已经阅读了许多有关此主题的帖子，但未能解决它=（

我正在尝试保存具有一对多关系的父母及其子女。我相信我正在关注其他帖子的文档和其他建议。但是，我遇到的问题是，当 Hibernate 尝试保存子记录时，它会将 FK 的“0”插入父级，而不是真实的 id。

**父 hbm.xml 映射**

```
<hibernate-mapping>
<class name="ParentClass" table="PARENTTABLE">
    <id name="parentid" type="java.lang.Long">
        <column name="PARENTID" precision="15" scale="0" />
        <generator class="sequence">
            <param name="sequence">S_PARENTTABLE</param>
        </generator>
    </id>
...
    <set name="children" table="CHILDTABLE" inverse="true" lazy="true" fetch="select" cascade="all">
        <key>
            <column name="PARENTID" precision="15" scale="0" not-null="true" />
        </key>
        <one-to-many class="ParentClass" />
    </set>
...
</class>
</hibernate-mapping> 
```

**子 hbm.xml 映射**

```
<hibernate-mapping>
<class name="ChildClass" table="CHILDTABLE">
    <composite-id name="id" class="ChildClassId">
        ....
        <key-property name="parentid" type="long">
            <column name="PARENTID" precision="15" scale="0" />
        </key-property>
    </composite-id>
    <many-to-one name="parent" class="ParentClass" update="false" insert="false" fetch="select">
        <column name="PARENTID" precision="15" scale="0" not-null="true" />
    </many-to-one>
....
</class>
</hibernate-mapping> 
```

**保存对象的Java代码**

```
private myMethod(ParentClass p, HashSet<ChildClass> children){
    for(ChildClass child : children){
        child.setParent(p);
    }
    p.setChildren(children);  //The parameter type is Set<ChildClass>   
    sess.save(p);
    ...
} 
```

因此它将使用正确的 id 保存父对象（下一个 seq 值，例如 273），但是当它尝试保存子对象时，它不使用 273，而是使用 0。

我不知道如何让 Hibernate 使用正确的 ParentId (FK) 保存子对象。

您可以提供的任何帮助或任何想法将不胜感激！提前致谢！

****更新**** 我终于弄清楚为什么子表中的 FK 没有插入正确的值。这是由于映射定义。我在我的数据库上运行了一个逆向工程师，我选中了一个框，上面写着“生成基本类型的复合 ID”。这导致 Hibernate 将复合键列映射为原始类型，而不是对实体的引用。当我做插入时，这有点令人困惑。

正确的子表映射应该更像这样：

**更新了子 hbm.xml 映射**

```
<hibernate-mapping>
<class name="ChildClass" table="CHILDTABLE">
    <composite-id name="id" class="ChildClassId">
        ....
        <key-many-to-one name="parentid" class="ParentClass" >
            <column name="PARENTID" precision="15" scale="0" />
        </key-many-to-one>
    </composite-id>
</class>
</hibernate-mapping> 
```

注意标签而不是之前的标签。此外，外面的标签也不见了（或者更确切地说，作为标签移到了id中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:09:38.677

我认为在您的情况下，您应该在父类的一对多映射定义中将逆属性设置为 false。这意味着您的父实体将负责更新子表中的 FK。在这种情况下，hibernte 将在保存父实体后执行额外的更新语句来更新子表中的 FK。

```
<set name="children" inverse="false" lazy="true" fetch="select" cascade="all">
       <key>
           <column name="PARENTID" precision="15" scale="0" not-null="true" />
       </key>
       <one-to-many class="ParentClass" />
</set> 
```

# php - Jquery Ajax Post 无法在所有浏览器中随机返回

> ID：11961073
> 
> 赞同：2
> 
> 时间：2012-08-14T21:32:53.617
> 
> 标签：php, jquery, ajax, json, iis

我有一个高度 ajax 运行的网站，除了一个特定的 Ajax 调用之外，一切都像黄油一样顺利运行。在随机数次调用后，它似乎永远不会返回。这不是缓存问题，因为我已经使用 $ajax.Setup 关闭了缓存，而且它也是随机发生的，而不仅仅是在第一次调用之后。但是，一旦发生这种情况，在我刷新页面之前它将无法再次工作。我已经确认它与服务器上的脚本无关，因为出于测试目的，我只是让它立即返回。

这个调用唯一的独特之处是我传递了一个相当大的动态创建的 json 对象。我想知道 json 对象的构造是否存在错误，尽管我有点怀疑，因为我相信同一个 JSON 对象可以传递一次并工作，然后再次传递而不是。所以，此时我唯一的理论是这是我最长的 ajax 调用，多次调用它只是超载了一些服务器阈值。有人对这个有了解吗？我正在运行 PHP 和 IIS。

这是我使用的简单代码：

```
$.post("<?=$_SERVER['PHP_SELF']?>?ajax=editType", {id1: id1, id2: id2, json: jsonString}, function(data) {
    console.log(data);                  
}, "html").error(function(xhr, status, error) {
    alert("Error: " + status);
}); 
```

json字符串是：

```
{"0":{"part_type_column_id":"526","displayable_name":"Fourth","column_number":1,"default_visible":"on","datatype":"Radio Button","value_options":"First Radio,Second Radio,Third Radio,Fourth Radio,Fifth Radio"},"1":{"part_type_column_id":"525","displayable_name":"Fifthd","column_number":2,"default_visible":"on","datatype":"Checkbox"},"2":{"displayable_name":"asdf","column_number":3,"default_visible":"on","datatype":"Text"}} 
```

如果我在它没有立即返回之后继续发送这个 ajax 调用，它将停止站点上的所有 ajax，直到它超时。在似乎需要永远之后，它会超时，最后只是警告“错误”。

知道为什么会发生这种情况吗？我能想到的只是达到了某种最大传输限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:24:50.480

您没有回显 $_SERVER['PHP_SELF']。您的标签需要更改为调用 echo 或仅使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:56:50.613

您没有打印变量 $_SERVER['PHP_SELF']。用途

```
<?=$_SERVER['PHP_SELF']?> 
or
<? echo $_SERVER['PHP_SELF']?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T07:00:11.750

几天前我遇到了同样的问题。在我的情况下，返回码是 0。这种类型的问题有两种情况。1.如果你进行跨域调用，浏览器拒绝了你的ajax。2\. 如果您的服务器端出现问题，不允许您的 ajax 立即执行并断开连接。

我的情况是第2个。我在我的服务器上运行一个恶魔，它正在监视服务器上的每个调用。这个恶魔甚至在建立连接之前就放弃了我的特定 ajax 调用。我停止了它，然后那个特定的 ajax 又开始工作了。我想知道你的情况是否也是同样的原因。

谢谢。

# ios - 应用内购买测试用户不起作用

> ID：11961077
> 
> 赞同：2
> 
> 时间：2012-08-14T21:33:16.517
> 
> 标签：ios, xcode, in-app-purchase

我在让应用内购买生效时遇到问题。每次我创建一个新的测试用户并在我的 iPhone 上调试它时，我会自动得到“你已经购买了这个但它还没有被下载”。

我已将此添加到我的 viewDidLoad 中：

```
 [[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

我的购买功能如下所示：

```
- (IBAction)purchaseProduct:(id)sender { 
        SKProduct *product = [productArray objectAtIndex:0];  
        SKPayment *payment = [SKPayment paymentWithProduct:product];
       [[SKPaymentQueue defaultQueue] addPayment:payment];
 } 
```

我也有：

```
-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
for (SKPaymentTransaction *transaction in transactions) {

    if ([transaction transactionState] == SKPaymentTransactionStatePurchased) {
      [self transactionDidComplete:transaction];

    } else if ([transaction transactionState] == SKPaymentTransactionStateFailed) {
        [self transactionDidFail:transaction];

    } else if ([transaction transactionState] == SKPaymentTransactionStateRestored) {
        [self transactionDidRestore:transaction];

    } else {

        NSLog(@"Unhandled case: %@", transaction);

    }
} 
```

}

一旦我点击购买按钮，甚至没有输入我的测试用户帐户密码，我就会收到此错误：

```
Unhandled case: <SKPaymentTransaction: 0x25a9a0> 
```

这意味着，我假设在我输入密码并点击“确定”进行购买之前调用了支付队列！

我在函数“transactionDidComplete、transactiondidFail、transactionDidRestore”中有下面的代码

```
 [[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:09:10.780

您需要处理 SKPaymentTransactionStatePurchasing

就像是：

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{
  //NSLog(@"updatedTransactions %@",transactions);
  NSNumber *paymentOk = [NSNumber numberWithBool:NO];
  for(SKPaymentTransaction *t in transactions){
    //transaction failed
    if(t.transactionState == SKPaymentTransactionStateFailed){
      //[self doTransactionFailure:t.error.localizedDescription];
      [[SKPaymentQueue defaultQueue] finishTransaction:t];
      continue;
    }
    if(t.transactionState == SKPaymentTransactionStatePurchasing){
      continue;
    }
    //transaction type here is success or restored
    //extract the app object
    if([t.payment.productIdentifier caseInsensitiveCompare:self.inAppPurchaseIdentifier]== NSOrderedSame){
      NSLog(@"Got payment for %@",t.payment.productIdentifier);
      paymentOk = [NSNumber numberWithBool:YES];
    }
    [[SKPaymentQueue defaultQueue] finishTransaction:t];
  }
  if([paymentOk boolValue]==YES){
    [self.delegate didPurchaseWithIdentifier:self.inAppPurchaseIdentifier];
  }
  else{
    [self.delegate didFailPurchaseWithIdentifier:self.inAppPurchaseIdentifier andReason:@"Unknown"];
  }
} 
```

# iphone - 隐藏另一个方法的子视图

> ID：11961083
> 
> 赞同：0
> 
> 时间：2012-08-14T21:33:36.187
> 
> 标签：iphone, ios, methods, hidden, subview

目前我正在使用以下行将方法的视图作为子视图添加到方法内的另一个视图中。

`[self.landscape addSubview:[self makeSpin]];`

这很好用，一切都很花哨，但现在我需要知道如何隐藏它。

显然`[self.landscape setHidden:[self makeSpin]];`是不行的。
任何人都可以为我提供有关如何执行此操作的快速示例吗？或者即使是正确方向的一点也会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:37:26.283

我假设 makeSpin 返回的视图是一个实例变量（如果不是，您必须以某种方式使其成为实例变量或使用标签）。如果是，试试这个：

```
[self makeSpin].hidden = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:13:40.010

如果`[self makeSpin]`始终返回相同的对象（不创建和返回新视图而不是自动发布的视图），那么您可以删除视图，例如：

`[[self makeSpin] removeFromSuperView]`;

否则你需要给子视图添加一个标签（视图从

```
[self makeSpin]). 
```

喜欢：

```
UIView *tempView = [[self makeSpin] retain];
tempView.tag = 7;
[self.landscape addSubview:tempView];
[tempView release]; 
```

要删除视图，您需要编写如下：

```
[[self.landscape viewWithTag:7] removeFromSuperview]; 
```

你也可以使用这个循环，

```
for (UIView *subview in [self.landscape subviews])
{
    if (subview.tag == 7)
    {
        [subview removeFromSuperview];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:42:25.747

如果返回一个未分配给实例变量的自动释放视图，那么除了尝试在的子视图数组`makeSpin`中找到它之外，您将无法访问它。`self.landscape`到目前为止，最简单的做法是在您的类中创建一个属性并使用它来保存新子视图的值，以便您以后可以使用它。您只需要记住在您的 viewDidUnload 方法中将其设置为 nil。

# xaml - MouseMove 有效，MouseDown 无效。WPF XAML

> ID：11961084
> 
> 赞同：2
> 
> 时间：2012-08-14T21:33:37.313
> 
> 标签：xaml, wpf-controls

我在 Xaml 中制作了 Button。我想触发 MouseDown 事件：

```
 MouseDown="Button_MouseDown_1" 
```

我在codeBehind中实现了这个方法，但它不起作用。但是如果我实现这个方法：

```
 MouseMove="Button_MouseMove_1" 
```

实施工作。问题出在哪里 ？

塞巴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:39:34.577

Button 元素本身在您的事件处理程序被调用之前处理鼠标按下事件 - 这意味着您的事件处理程序不会被调用。

您实际上想要实现的很可能是 Click 事件（例如）：

```
Click="button1_Click" 
```

这将响应鼠标单击的按钮，或者如果它具有焦点并按下回车等...

但是，如果您确实需要专门为按钮上的 mousedown 事件实现处理程序，则可以使用 PreviewMouseDown 事件，您的处理程序将收到通知。

[MSDN：路由事件概述](http://msdn.microsoft.com/en-us/library/ms742806.aspx)可以更详细地说明路由事件的工作方式。

# python - 如何比较两个 OrderedDict 字典？

> ID：11961087
> 
> 赞同：8
> 
> 时间：2012-08-14T21:33:57.397
> 
> 标签：python

如何比较两个 OrderedDict 字典？

我的结构如下：

```
dict_a = OrderedDict([(1,4), (2,5), (3,3), (4,5), (5,4), (6,4), (7,4), (8,3), (9,4)])

dict_b = OrderedDict([(1,4), (2,2), (3,1), (4,4), (5,6), (6,7), (7,4), (8,2), (9,5)])

for values in score_dict.items():
if values == course_dict.values():
    print 'match!'
else:
    print 'No match!' 
```

它遍历并且两个列表都是有序的，所以它应该在 1 和 7 上匹配？提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T21:43:14.413

您可以使用`items()`和内置`zip()`功能：

```
for i, j in zip(dict_a.items(), dict_b.items()):
    if i == j:
        print(i) 
```

输出：

```
(1, 4)
(7, 4) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T21:38:15.267

如果您希望每个有序位置的相交元素相同：

```
>>> from collections import OrderedDict
>>> dict_a = OrderedDict([(1,4), (2,5), (3,3), (4,5), (5,4), (6,4), (7,4), (8,3), (9,4)])
>>> dict_b = OrderedDict([(1,4), (2,2), (3,1), (4,4), (5,6), (6,7), (7,4), (8,2), (9,5)])
>>> [i1 for i1, i2 in zip(dict_a.iteritems(), dict_b.iteritems()) if i1 == i2]
[(1, 4), (7, 4)] 
```

如果您不关心订购：

```
>>> set(dict_a.items()).intersection(set(dict_b.items()))
set([(7, 4), (1, 4)]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:38:37.750

```
>>> for x in dict_a.items():
    if x in dict_b.items():
        print(x)

(1, 4)
(7, 4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T21:51:55.517

如果您发现它们相等，您可以遍历这些项目并打印它。

```
In [10]: for a, b in zip(dict_a.items(), dict_b.items()):
   ....:     if a == b:
   ....:         print True
   ....:     else:
   ....:         print False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T21:44:49.523

如果您想在 OrderedDict 中包含索引作为比较的一部分：

```
>>> [a[0] for a, b in zip(dict_a.items(), dict_b.items()) if a == b]
[1, 7] 
```

如果要获取两个 OrderedDicts 中具有相同值的所有键，无论顺序如何：

```
>>> [k for k, v in dict_a.items() if k in dict_b and dict_b[k] == v]
[1, 7] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T21:43:15.767

假设您希望键和值都匹配，但不关心每个中的位置`OrderedDict`：

```
for k, v in dict_a.items():
  if v == dict_b[k]:
    print '(%s, %s)' % (k, v) 
```

# eclipse - Eclipse Juno：如何更改标签颜色？

> ID：11961098
> 
> 赞同：7
> 
> 时间：2012-08-14T21:34:46.330
> 
> 标签：eclipse, ubuntu, tabs, ubuntu-12.04

不幸的是，Eclipse 插件的最新更新放弃了 Inigo 并安装了 Juno。我花了很多时间让它看起来像以前的版本，但我无法设法改变蓝色标签的颜色。任何想法这是哪个设置或css？

![在此处输入图像描述](../Images/307afe85283f518d5537e8a0d7e19ab5.png)

[更新] 有更改颜色的设置，但这些设置不会产生任何影响，所以我可以假设这是一个错误吗？

![在此处输入图像描述](../Images/1fc99279ea53b8cfd911ef57db74f009.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T05:00:02.817

默认主题和 Eclipse 安装是不可能的，但有一些解决方法：

**简单但受限：**您可以安装[Eclipse 4 Chrome 主题](https://github.com/jeeeyul/eclipse-themes/)，您可以在其中配置每种颜色、部件之间的空间等等：![在此处输入图像描述](../Images/8444adfe270cac3b735685648c76905c.png)

**复杂，但“一切顺利”：从 E4**[更新站点](http://download.eclipse.org/e4/updates/0.12)安装 E4 CSS 编辑器。[按照切换选项卡样式](http://wiki.eclipse.org/Eclipse4/CSS#Switching_tab_styles)中的说明修改 CSS 。

# ios - iPhone 图像和 Photoshop 中“另存为”的相同图像之间的 OCR 结果不同

> ID：11961100
> 
> 赞同：0
> 
> 时间：2012-08-14T21:34:51.240
> 
> 标签：ios, uiimage, ocr, photoshop

我在使用 OCR 时遇到了一个奇怪的问题。基本上，我正在通过我的服务器将 jpg 从 iphone 应用程序发布到 OCR 端点（ocrapiservice.com，FWIW）。照片包含漂亮、清晰的文字，尺寸足够大（2500 奇数像素宽）。然而，结果是难以理解的：

```
n. E o U > CO CO a £ O a p a h o .8 U o... 
```

如果我将相同的图像上传到 ocrapiservice 的测试门户（一旦图像从 iphone 到达我的服务器，我会通过电子邮件向自己发送图像的副本），结果是相同的。

我在 Photoshop 中打开相同的图像，没有做任何其他事情，使用不同的文件名“另存为”。文件大小几乎翻了一番（[我猜是因为这个原因](https://graphicdesign.stackexchange.com/questions/4799/why-does-saving-low-quality-jpgs-as-high-quality-in-photoshop-increase-their-fil)）。现在，如果我上传*这张*图片，结果几乎是完美的，没有随机字符或难以理解的位。

总而言之，两张图像的尺寸、分辨率、色彩空间等都相同。唯一的区别是我在 Photoshop 中保存为一张，文件大小增加了一倍。

另一个奇怪的方面是，如果我在 Photoshop 中另存为，但选择了中等 jpeg 压缩级别，导致新文件大小与原始图像大致相同，则另存为图像在相同大小的情况下*仍能提供良好的效果*原文是胡言乱语。

我不知道 Photoshop 是如何让这些图像很好地读入 OCR 的，但是任何指导都将非常感激！特别是关于如何在我的 iPhone 应用程序中有效地对 UIImage 数据执行相同操作以使 OCR 在直接 POST 时工作的任何提示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:40:42.327

感谢您的快速回复，伙计们。原来这是图像方向的问题。Photoshop 读取 iPhone 设置的标志并相应地修复方向，而发布图像则直接丢弃它。早该知道！

# web-services - 从部署在 Web Sphere 上的 Web 应用程序调用 Web 服务时出现 SAXParseException

> ID：11961101
> 
> 赞同：0
> 
> 时间：2012-08-14T21:34:57.233
> 
> 标签：web-services, websphere, webservice-client

我正在从部署在 web sphere 8（服务和客户端）上的 web 应用程序调用 web 服务，当我试图从 web sphere 客户端调用 web 服务时，它抛出如下所示的异常，我可以从 SOAP UI 测试服务. WSDL 本身没有问题。无法理解可能出现的问题

```
 org.xml.sax.SAXParseException: Premature end of file.
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2255)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2330)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(WSDLReaderImpl.java:2296)
    at org.apache.axis2.jaxws.util.WSDL4JWrapper$13.run(WSDL4JWrapper.java:732)
    at org.apache.axis2.java.security.AccessController.doPrivileged(AccessController.java:132)
    at org.apache.axis2.jaxws.util.WSDL4JWrapper.loadDefinition(WSDL4JWrapper.java:729) 195 more
Caused by:     
org.xml.sax.SAXParseException: Premature end of file.
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(WSDLReaderImpl.java:2245)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:23:14.733

我找到了导致问题的原因，由于 Web 服务的一些更改，WSDL 无法访问，在提供 WSDL 问题的正确路径后得到解决，即 service_name?wsdl 无法访问我必须提供 WSDL 文件的完整 URL

谢谢，

# java - Java gridlayout 忽略了空白

> ID：11961103
> 
> 赞同：0
> 
> 时间：2012-08-14T21:34:59.970
> 
> 标签：java, swing, layout, grid-layout

我正在用java做一个跳棋板。但是我有一个奇怪的问题：即使我将 vgap 设置为 0，它仍然会创建一个 vgap。高度正方形之间有大约 5px 的空间。宽度还可以。这是我的 Diagram 对象的布局代码：

```
this.setLayout(new GridLayout(10, 10, 0, 0));
this.setPreferredSize(new Dimension(230, 230)); 
```

这就是我实现图表的地方：

```
// The jpanel that has to contain the diagram
jpanel.setLayout(new FlowLayout());
add(jpanel, BorderLayout.WEST);
// The placement of the diagram in that jpanel
jp.add(new diagram()); 
```

这是它的外观：

```
[][][][][][][][][]
<The spacing that I have to get removed>
[][][][][][][][][] 
```

但它应该是这样的：

```
[][][][][][][][][]
[][][][][][][][][]

^
|
no spacing between them 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:50:36.390

*   您必须将`LayoutManager`JPanel 从[FlowLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)更改为[BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)或...，

*   `FlowLayout`相当接受`PreferredSize`来自将 JCompoments 放入容器（`JPanel`）中，一切都取决于

    1.  `Diagram`返回`PreferredSize`

    2.  是否以及如何`Diagram`使用容器调整大小

    3.  如何以及在何处真正使用[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)

*   尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:32:08.930

我通过将图像加载到 JPanel 而不是 JLabel 来解决问题 我将图像制作成 BufferedImage 然后使用 drawImage 将其绘制到 JPanel

# javascript - 如何让 Eclipse 在 Javascript 文档中进行自动 javadoc 注释

> ID：11961104
> 
> 赞同：4
> 
> 时间：2012-08-14T21:34:59.687
> 
> 标签：javascript, eclipse, javadoc, preferences

在 Eclipse 中编写 javascript 函数时，我想使用自动注释功能。我已经看到它在其他人的计算机上工作，但它没有抓住我机器上的@params。

当我有

```
var foo = function(bar){
    // do stuff
    return bar;
} 
```

在我输入 /** 并按回车键的函数前一行，我得到：

```
/**
 * 
 */
var foo = function(bar){
    // do stuff
    return bar;
} 
```

我应该得到：

```
/**
 * 
 * @param bar
 */
var foo = function(bar){
    // do stuff
    return bar;
} 
```

有任何想法吗？这似乎是 Eclipse 中的某些设置未正确设置，而不是特定于 Javascript 的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:14:22.660

尝试像这样声明你的函数：

```
function foo(bar){
   return bar;
}; 
```

事情是 Eclipse 为声明生成文档！用于声明函数的赋值表达式与类似的表达式没有什么不同`x=1;`，Eclipse 不会为表达式生成文档。

我建议查看[这个问题](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)。它解释了函数声明的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:05:43.900

假设 Juno 和项目的包含路径上的文件，您想要生成“元素”注释（从大纲视图或源菜单或添加 JSDoc 注释命令）而不是通过键入它来生成，尽管当我尝试它时它并没有*像*我预期的那样整齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:46:30.730

我没有使用 JavaScript，只是使用纯 Java，但生成的 Java-Code 注释的设置在这里：

```
Window -> preferences -> Java -> Code Style -> Code Templates  ->
 Comments -> Methods 
```

默认值为：

```
/**
 * ${tags}
 */ 
```

所以我想你需要设置类似的东西 `Window -> preferences -> JavaScript -> ...`

# php - mysql UNION重复值

> ID：11961106
> 
> 赞同：0
> 
> 时间：2012-08-14T21:35:03.867
> 
> 标签：php, mysql, sql

我知道使用 UNION 会删除 sql 中的重复行，但我想知道如何删除与另一行共享重复主键的重复行。这是我的查询

```
"
SELECT 
    isbn, title, rank, 
    lowest_new_price                AS lowest_price,
    lowest_new_location             AS lowest_location,

    FROM ".TBL_BOOKS."          

UNION

SELECT 
    isbn, title, rank, 
    lowest_used_price               AS lowest_price,
    lowest_used_location            AS lowest_location,

    FROM ".TBL_BOOKS." 

ORDER BY rank ASC" 
```

**输入数据**

```
isbn,    title,    rank,    lowest_new_price,    lowest_new_location
00001    t1        1        100                  uk
00001    t1        1        200                  uk
00002    t3        5        50                   uk 
```

**所需的输出数据**

```
isbn,    title,    rank,    lowest_new_price,    lowest_new_location
00001    t1        1        100                  uk
00002    t3        5        50                   uk 
```

或者

```
isbn,    title,    rank,    lowest_new_price,    lowest_new_location
00001    t1        1        200                  uk
00002    t3        5        50                   uk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:55:28.557

下面怎么样

```
SELECT 
    isbn, title, rank, 
    lowest_new_price                AS lowest_price,
    lowest_new_location             AS lowest_location,

    FROM ".TBL_BOOKS."
    WHERE lowest_new_price <= lowest_used_price

UNION

SELECT 
    isbn, title, rank, 
    lowest_used_price               AS lowest_price,
    lowest_used_location            AS lowest_location,

    FROM ".TBL_BOOKS." 
    WHERE lowest_new_price > lowest_used_price 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:21:06.247

我认为您需要两个查询，一个将这些数据放入临时表中，第二个用于获取您想要的数据。如果需要，您可以在单个查询中完成，但这会有点混乱。

首先，根据您的查询，我们需要 ISBN 的模糊数据，但没有排序子句 - 然后，我们需要从中获取正确的不同数据。

像这样的东西：

```
select data.isbn, data.title, data.rank, min(data.lowest_price) as [Lowest Price], b.lowest_Location
from <your_query> data inner join <your_query> b on data.isbn = b.isbn and data.lowest_price = b.lowest_price
order by data.rank 
```

# php - 向 Zend_Db_Select 添加复杂的 WHERE 条件

> ID：11961108
> 
> 赞同：2
> 
> 时间：2012-08-14T21:35:07.250
> 
> 标签：php, sql, zend-framework

> **可能重复：**
> [Zend Framework Complex Where 语句](https://stackoverflow.com/questions/3899795/zend-framework-complex-where-statement)

如何在仍然使用引用的同时将这样的内容添加到 Zend_Db_Select 中？

```
SELECT x FROM y WHERE (a=1 OR b=2) AND (c=3 OR d=4) 
```

我见过 where() 和 orWhere()，但我看不到用括号将它们分组的方法。我意识到我可以这样写：

```
->where('(a=1 OR b=2) AND (c=3 OR d=4)') 
```

但理想情况下，我希望对 where() 进行 4 次单独调用，以便能够使用第二个参数进行引用（假设值 1、2、3 等是用户生成的输入）。

有没有办法以纯流利的风格做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:39:52.820

> 有没有办法以纯流利的风格做到这一点？

简短的回答：没有。

正如您所提到的，您可以使用`orWhere`编写条件，例如`(a = ?) OR (b = ?)`.

> Zend_Db_Select 自动为您使用 where() 或 orWhere() 方法指定的每个表达式加上括号。这有助于确保布尔运算符优先级不会导致意外结果。

但是，[不可能以您希望的方式嵌套`AND`和设置`OR`条件](http://framework.zend.com/issues/browse/ZF-182)。

如果你这样写：

```
->where('a=?', $a)
->orWhere('b=?', $b)
->where('c=?', $c)
->orWhere('d=?', $d) 
```

这将导致类似于此的 SQL：

```
(a=1) OR (b=2) AND (c=3) OR (d=4) 
```

这将被解释如下（不是你想要的）：

```
(a=1) OR ((b=2) AND (c=3)) OR (d=4) 
```

备择方案：

*   手写SQL。
*   [如此处](https://stackoverflow.com/questions/1179279/grouping-where-clauses-with-zend-db-table-abstract)`quoteInto`所示使用。

# python - 不匹配的正则表达式 OR 语句

> ID：11961110
> 
> 赞同：2
> 
> 时间：2012-08-14T21:35:12.587
> 
> 标签：python, regex

我有这个正则表达式来匹配这两种可能性之一：

```
(\b(Q|L[A-Z])\d{8}\b)

# Possibilities
LK10652174
Q10652174 
```

现在的结果是：

```
>>> regex.findall(string)
[(u'LK10652175', u'LK')] 
```

我不希望它选择额外的`LK`匹配项，有没有办法在`OR`不获得额外选择的情况下封装语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:38:04.163

是的，使用非捕获括号（并删除最外面的括号，你不需要它们）：

```
\b(?:Q|L[A-Z])\d{8}\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:38:15.223

与往常一样，`(?:...)`将匹配但不捕获。

```
(\b(?:Q|L[A-Z])\d{8}\b) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T22:03:15.710

来自 python 文档：

> 当一个模式完全匹配时，该分支被接受。这意味着一旦 A 匹配，B 将不会被进一步测试，即使它会产生更长的整体匹配。换句话说，'|' 运营商从不贪婪。

这意味着您需要像这样编写它以确保匹配是您想要的整个字符串：

```
import re
a = re.compile("(Q\\d{8}|L[A-Z]\\d{8})")
print a.findall("LK10652174 Q10652174")
['LK10652174', 'Q10652174'] 
```

# javascript - 通过 Profile-ID 添加这个 Ajax 和 Share-Tracking

> ID：11961111
> 
> 赞同：1
> 
> 时间：2012-08-14T21:35:14.927
> 
> 标签：javascript, ajax, addthis

我已经为这个问题苦苦挣扎了很长一段时间，但还没有弄清楚。我正在通过 javascript 加载 addThis ，就像[这里的小提琴一样](http://jsfiddle.net/dularion/WWngg/6/)

并且个人资料 ID 不起作用，我制作的共享不会被跟踪。测试它是否连接到配置文件（无需登录到 addthis）的最简单方法是通过电子邮件共享并查看电子邮件模板是否有效。[这是一个工作电子邮件模板的小提琴](http://jsfiddle.net/dularion/Fxnt8/3/)（比较）

我[在这里](http://support.addthis.com/customer/portal/questions/240144-email-template-when-using-ajax-bug-?t=89322)读到这个小部分 var addthis_config = { pubid: 'YOUR-ID'}; 使它起作用，正如您在第一个小提琴中看到的那样，我包含了该变量。但它仍然行不通。我需要做什么才能完成这项工作？

我很感激你们可以提供的每一个帮助！

# windows-8 - Win8 应用程序中的区域设置更改事件

> ID：11961112
> 
> 赞同：1
> 
> 时间：2012-08-14T21:35:25.690
> 
> 标签：windows-8, microsoft-metro, winjs

我们可以在 Win8 应用程序中使用任何区域设置更改事件吗？

我现在遇到的问题是，当您在应用程序运行时在控制面板中更改语言时，应用程序将立即选择新语言。这导致未刷新的应用程序页面仍保持旧语言，当您转到应用程序的另一个页面时，它将以新语言加载字符串。

有人对此有任何见解吗？我正在使用 HTML5 和 Javascript，但任何知识都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:30:13.000

> 事件和上下文变化。系统更改时，Metro 风格的应用程序可能仍在运行。这导致使用一组不同的限定符。一种这样的变化可能是当用户打开高对比度时。各种系统更改调用 ResourceContext 对象上的事件。在 JavaScript 中，侦听这些事件的最简单方法是通过 JavaScript
> 
> WinJS.Resources.addEventListener('contextchanged', refresh, false);

这是文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx)

# macos - 在 OSX (Macbook Air 2012) 上使用 SDL2 创建 OpenGL 3.x 上下文

> ID：11961116
> 
> 赞同：14
> 
> 时间：2012-08-14T21:35:45.330
> 
> 标签：macos, opengl, sdl

据我所知，Macbook Air 2012 支持 OpenGL 3.2。然而，当使用 SDL 2.0 创建 OpenGL 上下文时，上下文只有 opengl 2.1 版。

SDL 2.0 是否可以创建 GL 3.2 上下文？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-26T23:33:28.310

对于截至 10 月 10 日星期三仍有此问题的所有人，SDL2 允许您在运行 Mac OS X 10.7 (Lion) 及更高版本的 Mac 上创建 OpenGL 3.2 上下文。您只需要添加以下代码：

```
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE); 
```

如果您运行的是 OS X 10.10，或者上述解决方案仍然无法解决问题，请将上述示例的第二行从

```
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2); 
```

到

```
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1); 
```

可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T02:29:42.527

编辑：见[https://stackoverflow.com/a/13095742/123387——SDL2](https://stackoverflow.com/a/13095742/123387)现在应该原生支持这个。下面的注释适用于最新 SDL2 版本之前的版本。

> 当前版本（截至 2012 年 8 月 15 日星期三 21:00:33 2012 -0400；6398:c294faf5fce5）不支持 10.7 系列。但是，如果您愿意运行不稳定的 SDL 以进行踢球，则有一种方法可以添加支持。
> 
> 试一试：
> 
> **src/video/cocoa/SDL_cocoaopengl.m +90 (Cocoa_GL_CreateContext)**
> 
> ```
> if(_this->gl_config.major_version == 3 &&                                                           
>    _this->gl_config.minor_version == 2)                                                             
> {                                                                                                   
>     attr[i++] = NSOpenGLPFAOpenGLProfile;                                                           
>     attr[i++] = NSOpenGLProfileVersion3_2Core;                                                      
> } 
> ```
> 
> 然后在您的应用程序中，按照这些思路进行操作。
> 
> ```
> SDL_Init(SDL_INIT_EVERYTHING);                                                                                                                                    
> 
> SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);                                               
> SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);                                               
> 
> window = SDL_CreateWindow("3.2", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED,                
>                 640, 480, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);                                                                                               
> 
> context = SDL_GL_CreateContext(window); 
> ```
> 
> 我从 2011 年开始在我的 Mac Air 下运行 10.7.4，当我从启用 3.2 SDL 的应用程序运行一些 GL 诊断程序时，我得到：
> 
> ```
> Driver     : cocoa
> Renderer   : Intel HD Graphics 3000 OpenGL Engine
> Vendor     : Intel Inc.
> Version    : 3.2 INTEL-7.18.18
> GLSL       : 1.50 
> ```
> 
> 除此之外，我没有进行太多测试，但希望其他人可以尝试一下并取得更大的成功。
> 
> 编辑：如果您使用 GLEW，您将需要启用 glewExperimental。请注意，当您查询 GL_EXTENSIONS 时，3.2 核心配置文件中有一个错误。它将报告 1280（好像它不受支持）——但这不应该影响您使用 1.50 着色器等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:44:06.927

那[应该是可能的](http://www.opengl.org/wiki/Tutorial1%3a_Creating_a_Cross_Platform_OpenGL_3.2_Context_in_SDL_%28C_/_SDL%29)：

```
#include <stdio.h>
#include <stdlib.h>
/* If using gl3.h */
/* Ensure we are using opengl's core profile only */
#define GL3_PROTOTYPES 1
#include <GL3/gl3.h>

#include <SDL.h>
#define PROGRAM_NAME "Tutorial1"

/* A simple function that prints a message, the error code returned by SDL,
 * and quits the application */
void sdldie(const char *msg)
{
    printf("%s: %s\n", msg, SDL_GetError());
    SDL_Quit();
    exit(1);
}

void checkSDLError(int line = -1)
{
#ifndef NDEBUG
    const char *error = SDL_GetError();
    if (*error != '\0')
    {
        printf("SDL Error: %s\n", error);
        if (line != -1)
            printf(" + line: %i\n", line);
        SDL_ClearError();
    }
#endif
}

/* Our program's entry point */
int main(int argc, char *argv[])
{
    SDL_Window *mainwindow; /* Our window handle */
    SDL_GLContext maincontext; /* Our opengl context handle */

    if (SDL_Init(SDL_INIT_VIDEO) < 0) /* Initialize SDL's Video subsystem */
        sdldie("Unable to initialize SDL"); /* Or die on error */

    /* Request opengl 3.2 context.
     * SDL doesn't have the ability to choose which profile at this time of writing,
     * but it should default to the core profile */
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);

    /* Turn on double buffering with a 24bit Z buffer.
     * You may need to change this to 16 or 32 for your system */
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);

    /* Create our window centered at 512x512 resolution */
    mainwindow = SDL_CreateWindow(PROGRAM_NAME, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED,
        512, 512, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);
    if (!mainwindow) /* Die if creation failed */
        sdldie("Unable to create window");

    checkSDLError(__LINE__);

    /* Create our opengl context and attach it to our window */
    maincontext = SDL_GL_CreateContext(mainwindow);
    checkSDLError(__LINE__);

    /* This makes our buffer swap syncronized with the monitor's vertical refresh */
    SDL_GL_SetSwapInterval(1);

    /* Clear our buffer with a red background */
    glClearColor ( 1.0, 0.0, 0.0, 1.0 );
    glClear ( GL_COLOR_BUFFER_BIT );
    /* Swap our back buffer to the front */
    SDL_GL_SwapWindow(mainwindow);
    /* Wait 2 seconds */
    SDL_Delay(2000);

    /* Same as above, but green */
    glClearColor ( 0.0, 1.0, 0.0, 1.0 );
    glClear ( GL_COLOR_BUFFER_BIT );
    SDL_GL_SwapWindow(mainwindow);
    SDL_Delay(2000);

    /* Same as above, but blue */
    glClearColor ( 0.0, 0.0, 1.0, 1.0 );
    glClear ( GL_COLOR_BUFFER_BIT );
    SDL_GL_SwapWindow(mainwindow);
    SDL_Delay(2000);

    /* Delete our opengl context, destroy our window, and shutdown SDL */
    SDL_GL_DeleteContext(maincontext);
    SDL_DestroyWindow(mainwindow);
    SDL_Quit();

    return 0;
} 
```

# ruby - 为什么在Ruby对象上调用“p”调用to_s然后输出一个非字符串？

> ID：11961117
> 
> 赞同：1
> 
> 时间：2012-08-14T21:35:46.007
> 
> 标签：ruby

我很好奇为什么当你在一个对象上调用“p”时为什么它调用 .to_s 方法但实际上并没有返回一个字符串。当您明确调用 .to_s 时，它清楚地输出为字符串。

```
1.9.3p194 :078 >   class Test
1.9.3p194 :079?>     def to_s
1.9.3p194 :080?>       puts 'to string called' 
1.9.3p194 :081?>       "testing"
1.9.3p194 :082?>     end
1.9.3p194 :083?>   end
 => nil 
1.9.3p194 :084 > x = Test.new
to string called
 => testing 
1.9.3p194 :085 > x
to string called
 => testing 
1.9.3p194 :086 > p x
to string called
testing
to string called
 => testing 
1.9.3p194 :087 > p x.to_s
to string called
"testing"
 => "testing" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:47:24.910

p 将传入对象的 stingified 表示写入标准输出。然后它返回自己。如果你想要 p 打印的字符串值，你可以使用 inspect 方法：

```
> a = p 233
233
> a.class # Fixnum
> 233.inspect # "233" 
```

# wpf - 为 MDI 工具窗口重用或创建新的 View/ViewModel

> ID：11961118
> 
> 赞同：1
> 
> 时间：2012-08-14T21:35:46.590
> 
> 标签：wpf, mvvm, mdi

在带有单例工具窗口的 MVVM MDI 应用程序中（想想 Visual Studio），工具窗口内容会根据当前选定的文档而变化。现在有 5 个工具窗口，以后还会有更多。

我可以为每个文档的每个工具窗口重用或创建新的视图和/或视图模型。我的问题是是否有压倒性的理由选择或排除这些选项之一？还有另一个我完全错过的选择吗？

对于每个工具窗口：

1.  每个文档创建一个新的 View+ViewModel。当用户切换文档时，工具窗口切换 View+ViewModel。此选项的内存成本较高，但性能很好。

2.  为每个文档创建一个 ViewModel，但重用 View。使用 MVVM 模式这是可行的，但 UI 重新布局可能会很昂贵。

3.  重用 View 和 ViewModel 以最小化内存使用。重置 ViewModel 并加载另一组数据可能很难做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:27:08.403

总是选择 1，这提供了更好的性能，就像你说的那样，并在开发时为你创造了一个很好的关注点分离。由于视图模型保持打开状态，您可以使用它们做更多事情（例如显示打开文档的列表等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:37:47.577

我最终重用`View`但不是`ViewModel`即选项2。

要回答最初的问题，应将选项 3 排除在考虑之外。重用虚拟机是没有意义的——如果可以重用之前的虚拟机，它也可以被处理掉，并且为新数据创建一个新的虚拟机要容易得多，而且内存/性能成本非常可忽略。

选项 1 与 2 取决于渲染复杂性、性能目标和内存配额。在大多数情况下，在同一 UI 上切换数据的性能损失应该是可以接受的。如果渲染真的需要我需要保存视图的时间，那么可能有问题。

# vb.net - 填充列表的功能不起作用

> ID：11961119
> 
> 赞同：0
> 
> 时间：2012-08-14T21:36:23.270
> 
> 标签：vb.net, asp.net-mvc-3

我正在尝试使以下工作

```
Function AddService(id As Integer) As ViewResult
        Dim serv As RequestedService = New RequestedService
        serv.JobId = id

        Dim ServiceList = New List(Of RequestedService)()

        Dim ServiceQuery = From s In db.Services
                   Select s

        ServiceList.AddRange(ServiceQuery)

        ViewBag.ServiceId = New SelectList(ServiceList, s.IDServices, s.ServiceName)

        Return View(serv)
    End Function 
```

但

```
 ViewBag.ServiceId = New SelectList(ServiceList, s.IDServices, s.ServiceName) 
```

给我以下错误：未声明's'。由于其保护级别，它可能无法访问。

我无法弄清楚如何纠正这个问题。本质上，我需要使用 id 和字符串填充 SelectList 并将其传递给视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:39:01.370

假设`RequestedService`模型具有调用的属性`IDServices`，`ServiceName`您可以使用以下内容：

```
ViewBag.ServiceId = New SelectList(ServiceList, "IDServices", "ServiceName") 
```

但是你真的不需要这个中间列表：

```
Function AddService(id As Integer) As ViewResult
    Dim serv As RequestedService = New RequestedService
    serv.JobId = id

    ViewBag.ServiceId = New SelectList(db.Services, "IDServices", "ServiceName")

    Return View(serv)
End Function 
```

你真的，真的，真的不需要使用 ViewBag，而是使用视图模型。

```
Function AddService(id As Integer) As ViewResult
    Dim model = New RequestedServiceViewModel
    model.JobId = id
    model.Services = New SelectList(db.Services, "IDServices", "ServiceName")
    Return View(model)
End Function 
```

现在您的视图被强类型化到视图模型：

```
@ModelType RequestedServiceViewModel
@Html.DropDownListFor(Function(x) x.ServiceId, Model.Services) 
```

# javascript - 将 src 内容动态加载到 SVG 图像

> ID：11961120
> 
> 赞同：10
> 
> 时间：2012-08-14T21:36:27.720
> 
> 标签：javascript, jquery, svg

我在浏览器中呈现了一个 SVG <image>。我想在[http://jsfiddle.net/dt1510/pXA9P/1/](http://jsfiddle.net/dt1510/pXA9P/1/)上尝试动态更改其内容。在 console.debug 中内容发生了变化，但是在浏览器中是一样的。

```
<svg>  
  <image x="20" y="20" width="300" height="80"
     xlink:href="http://www.erh.noaa.gov/ilm/OpenLayers/img/marker.png" />    
</svg>​ 
```

```
var srcAirline = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA9CAYAAAAeYmHpAAADD0lEQVR42u2aq3LrMBCG+0oH9hUOPK9QWFhYemBhYWhhYWBpYGBgqGGgYduv039mq65l+SY7sjXjcS62pW/1e6Vd6eZ9heVGH46nS/FHdal/Qv+5OxZ/PO+rDTpr5bf3x/fDp9wed+f1QO8Pl686689XDAMUDw2kLU+vVfnQSNqW47kuH1rStqV46HNV/4L+9/9UNrRXcnnxWaDpUa/s9lW50HdPPnQuZzYL9O670g36e5JSLLQ3XOWsfxZoZLxBZx6rFweNZy8OmsAiVjDI1BFXNmjFzikFLz5lj2eBBqC6dE/cTTVDmxy6aUxOLVPIfTJoGhpzWF3K2HKfBJoG1vX4eeqXt2qZ0EPl3FaIw/8+npYBPaacU+T+8HyeF5oG1Hl4R5H7YGgqTi2M00xOYqElBiQgSTViH7n3hqYiL8/lgZIGssNOahIBA2DUtjG+q9x7QcfkzO/0VAiakjmJTUYIRNoMQL0pY3ov6NBhCTTV2qhkyAwMA3Ctp7QUqfeClsU59500eKXPKgeQ3CcDXF0KOEdYOSu0N6avEjrXyuVs0N74XvxaVphQwDEWu5aFhJsmNUPn1IuEpidTMihTL9BnhaaHcWBMLOhRK3E8N7BMcrju6nNkbQt5gK5qSxWSz7nJZttHNgZ0alzLdepdzlfb04Aw5LRlM7SrSI4Kp8VxtT0NcNsEQ1kTQWOERe8YRIYaVpT6sdIESDCc+a7Yl4NrPWjF0ahFz+B31eGth/Ef7QiHNt2nugdDhxvewhSPTQR4eTAPWoFHakbFC1Q0i/Pq9IzWWd40jMZbA8SgsbqGJk/eHjSzNuqQn+C70lThM/lfPkHP4jolFzwn2QmaSqiQh3NoShmDDuWXAu31rL0XWeuVsW3Q/3KoTaNJJ2glAzlbmeWGjm3b4BqbtPScZDJ0KD0bE+eC1oJ+SiSm18/bppUMbTOYknjunlYb6EmgMLpdyqVdvN8YR/cNgg7lRY/bBuWAVg9a+fJZTtJmRWPxeWfvjbVzJfBi8wXa0NQOtbFpersFHBv0Bl049JrKB2+Sq02r4bQjAAAAAElFTkSuQmCC";

$('document').ready(change_image);

function change_image(){    
    var images = $("image");
    var image = images[0];        
    $(image).removeAttr("xlink:href");
    $(image).attr("src", srcAirline);
    console.debug(image);
} 
```

我在某处读到可能使用 AJAX 请求，但是该页面需要可以脱机显示。我也有限制，图像内容需要存储在变量中，不能保存为外部资源。

有什么简单的方法可以动态更改 SVG 图像的内容吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T22:03:55.680

1.  如您所见，SVG`<image>`元素使用`href`属性来获取其内容。设置`src`属性（与 HTML 的`<img>`元素一样）将不起作用。

2.  该`href`属性位于[XLink 命名空间](http://www.w3.org/1999/xlink)中。即使您从未声明命名空间前缀，它就是这样，因此您需要将其设置为这样。

您可以通过 jQuery**演示执行此操作：http: [//jsfiddle.net/pXA9P/4/](http://jsfiddle.net/pXA9P/4/)**：

```
$("image").attr('xlink:href',srcAirline); 
```

或标准 DOM**演示： http: [//jsfiddle.net/pXA9P/5/](http://jsfiddle.net/pXA9P/5/)**：

```
document.querySelector('image')
  .setAttributeNS('http://www.w3.org/1999/xlink','href',srcAirline); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T12:47:47.617

如果您使用的是**D3 库**，那么您可以使用以下动态加载 svg 图像。

```
d3.select("body") //select body in html
.append("svg")  //add svg element in body tag
.append("image")  // add image tag in svg element
.attr('xlink:href',"image.svg") //set href property of image element..
.attr("width",50) //set width of image
.attr("height",50) //set height of image 
```

这对于使用 D3 库的人来说非常有用。

# javascript - Python POST 请求失败

> ID：11961123
> 
> 赞同：2
> 
> 时间：2012-08-14T21:36:31.297
> 
> 标签：javascript, python, post

我正在寻找在这个网站上做一个 POST 请求：

[http://web1.ncaa.org/stats/StatsSrv/careersearch](http://web1.ncaa.org/stats/StatsSrv/careersearch)

右边的表格有四个下拉菜单。当我运行下面的代码时，顽固地没有选择“学校”。有一个隐藏的输入可能会导致问题，但我无法修复它。页面上的 javascript 似乎没有效果，但我可能是错的。任何帮助表示赞赏：

```
#!/usr/bin/python

import urllib
import urllib2

url = 'http://web1.ncaa.org/stats/StatsSrv/careersearch'
values = {'searchOrg' : '30123','academicYear' : '2011','searchSport' : 'MBA','searchDiv' : '1'}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read()

print the_page 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:54:52.613

正如您所怀疑的，您缺少一个隐藏字段：（`doWhat = 'teamSearch'`用于提交右侧的表单）。

使用这些请求值对我有用：

```
values = {'doWhat':'teamSearch', 'searchOrg' : '30123','academicYear' : '2011','searchSport' : 'MBA','searchDiv' : '1'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:02:11.000

我用机械化：

```
import mechanize
from BeautifulSoup import BeautifulSoup

mech = mechanize.Browser() 
mech.set_handle_robots(False)
response = mech.open('http://web1.ncaa.org/stats/StatsSrv/careersearch')
mech.select_form(nr=2)
mech.form['searchOrg'] = ['30123']
mech.form['academicYear'] = ['2011']
mech.form['searchSport'] = ['MBA']
mech.form['searchDiv'] = ['1']
mech.submit()
soup = BeautifulSoup(mech.response().read()) 
```

我知道在机械化网站上要求**searchOrg**，**AcademicYear**，**searchSport**，**searchDiv**以序列/列表形式。您绝对应该注意 robots.txt。

# javascript - javascript重置间隔

> ID：11961124
> 
> 赞同：2
> 
> 时间：2012-08-14T21:36:34.630
> 
> 标签：javascript, setinterval, reset

我需要能够调用此函数来重置间隔。

我知道以前有人问过这个问题。[但是Javascript - Reset setInterval back to 0](https://stackoverflow.com/q/8126466/1462490)给出的答案 对我不起作用。

这是我尝试过的代码：

```
function startTimer(){
    clearInterval(interval);    
    var interval = setInterval(function(){
        advanceSlide();
    }, 5000);
}; 
```

我在页面的开头调用它来启动每 5 秒更改一次的幻灯片。我用这段代码再次调用它，我预计会重置那 5 秒。

```
onclick=startTimer();> 
```

onclick 也做了另一件事，但这是行不通的。另一个动作发生了，但间隔没有改变，它仍然基于我点击之前剩下的 5 秒的相同部分。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T21:37:29.700

您需要在函数外部声明变量...

```
var interval;

function startTimer() {
    clearInterval(interval);    
    interval = setInterval(advanceSlide, 5000);
} 
```

否则函数退出时会丢失。

# javascript - 将线捕捉到指定距离

> ID：11961127
> 
> 赞同：1
> 
> 时间：2012-08-14T21:36:46.783
> 
> 标签：javascript, geometry, html5-canvas, distance, snapping

我在 JavaScript 画布上绘制了大量的线条和点。当用户单击时，它会添加一个点，并添加一个与下一个点连接的预览。

示例图片：

![用画布绘图](../Images/c1a0dff84391bc7351584deee96230fa.png)

在这张图片中，用户点击了三次，创建了三个深绿色点。现在用户悬停在距离最后一个点击点 28 px 的地方，创建了浅绿色的连接、点和指示距离的黑框。

现在我想将浅绿色点捕捉到 28px。我该怎么做呢？我想给它一个阈值，比如 10 像素，如果它在那个阈值之内，让它捕捉。我知道有一个很好的方法可以在数学上做到这一点，但我没有知识来解决它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:49:32.083

Check the distance during mouse moving (X_Current is current mouse position, X_0 is last point position). Replace 28 and 10 constants by distance and threshold:

```
Squared_Distance = (X_Current-X_0)*(X_Current-X_0) + (Y_Current-Y_0)*(Y_Current-Y_0)
if ((Squared_Distance >= (28 - 10)*(28 - 10)) &&  (Squared_Distance <= (28 + 10)*(28 + 10)))
  then snap it 
```

Position of new point at 28px distance:

```
Curr_Distance = Sqrt(Squared_Distance) // assert <> 0
Dir_X = (X_Current-X_0) / Curr_Distance
Dir_Y = (Y_Current-Y_0) / Curr_Distance
P28_X = X0 + 28 * Dir_X
P28_Y = Y0 + 28 * Dir_Y 
```

# jquery - 仅从一个链接中删除颜色框（jQuery 插件）功能，然后重新应用它

> ID：11961128
> 
> 赞同：4
> 
> 时间：2012-08-14T21:36:46.500
> 
> 标签：jquery, image, jquery-plugins, timer, colorbox

我有两张图片，每张图片都包含在一个链接中。如果鼠标按下超过一定时间，我想防止彩盒触发。我注意到 colorbox 仅在 mouseup 时触发。

我一直在尝试将 setTimeout 函数与计时器一起使用，然后从该图像中删除颜色框，然后在 mouseup 上将颜色框“重新附加”到该图像，这样如果 setTimeout 没有发生，它可以再次触发。

HTML：

```
<a class="colorbox" href="..."><img src="..." /></a>

<a class="colorbox" href="..."><img src="..." /></a> 
```

JS：

```
$('a.colorbox').colorbox();

var timer;

$('a.colorbox').on('mousedown', function(e) {

    var this_colorbox = $(this);

    timer = setTimeout(function() {
        this_colorbox.colorbox.remove();//this doesn't work
    }, 1500);

}).on('mouseup', function(e) {

    clearTimeout(timer);

});​

//"Reattach colorbox"?? 
```

这是一个小提琴：http: [//jsfiddle.net/mydCn/](http://jsfiddle.net/mydCn/)

我遇到的问题是 $.colorbox.remove(); （或我的尝试 this_colorbox.colorbox.remove();) 从所有元素中删除颜色框。我怎么能“重新附加颜色框”到该图像而不是再次调用每个元素的函数（当有很多图像时这样做会影响性能，不是吗？）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:06:12.143

我知道了！我可以只添加和删除类。我会发布答案，所以它可能对某人有帮助。

[http://jsfiddle.net/mydCn/1/](http://jsfiddle.net/mydCn/1/)

```
$('a.colorbox').colorbox();

var timer;
var time_completed = 0;

$('a.colorbox').each(function() {
    $(this).on('click', function(e) {
        if (time_completed === 0) {
            e.preventDefault();
            $(this).removeClass('colorbox cboxElement');
        } else if (time_completed == 1) {
            $(this).addClass('colorbox cboxElement');
            time_completed = 0;
        }
    });

    $(this).on('mousedown', function(e) {
        timer = setTimeout(function() {
            time_completed = 1;
        }, 500);
    }).on('mouseup', function(e) {
        clearTimeout(timer);
        if (time_completed == 1) {
            $(this).click();
        }
    });
});​ 
```

# c# - 按名称获取正在运行的进程的路径

> ID：11961137
> 
> 赞同：8
> 
> 时间：2012-08-14T21:37:03.583
> 
> 标签：c#, .net-2.0

如何按名称获取正在运行的进程的路径？例如，我知道有一个名为“记事本”的进程正在运行，我想获取它的路径。如何在不循环所有其他进程的情况下获得路径？

不是这样！

```
using System.Diagnostics;

foreach (Process PPath in Process.GetProcesses())
{
    if (PPath.ProcessName.ToString() == "notepad")
    {
        string fullpath = PPath.MainModule.FileName;
        Console.WriteLine(fullpath);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T21:43:53.163

尝试类似这种方法，它使用以下[`GetProcessesByName`方法](http://msdn.microsoft.com/en-us/library/z3w4xdc9%28v=vs.80%29.aspx)：

```
public string GetProcessPath(string name)
{
    Process[] processes = Process.GetProcessesByName(name);

    if (processes.Length > 0)
    {
        return processes[0].MainModule.FileName;
    }
    else
    {
        return string.Empty;
    }
} 
```

但请记住，多个进程可以具有相同的名称，因此您仍然可能需要进行一些挖掘。我总是在这里返回第一个路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T21:44:42.903

.Net 2.0 中有一个[GetProcessesByName](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)方法：

```
foreach (Process PPath in Process.GetProcessesByName("notepad"))
{
    string fullpath = PPath.MainModule.FileName;
    Console.WriteLine(fullpath);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T21:54:11.610

您可以采取两种方法。

您可以按名称进行处理：

```
Process result = Process.GetProcessesByName( "Notepad.exe" ).FirstOrDefault( ); 
```

或者你可以做你所做的，但使用 linq

```
Process element = ( from p in Process.GetProcesses()
                    where p.ProcessName == "Notepad.exe"
                    select p ).FirstOrDefault( ); 
```

# java - JTextArea 中的文本搜索

> ID：11961139
> 
> 赞同：0
> 
> 时间：2012-08-14T21:37:06.787
> 
> 标签：java, swing, full-text-search, components, jtextarea

`JTextArea`在NetBeans中搜索关键字（或任何我们感兴趣的词）的命令是什么？

我一直在stackoverflow中搜索，但到目前为止没有结果，可能我错过了。我是这个环境的新手，详细的解释将是有益的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:45:32.430

1.  看看[如何使用文本区域](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

2.  在教程的底部描述了其中一种，但非常简单的方法

# servicestack - 不一致的ServiceStack异常处理

> ID：11961144
> 
> 赞同：1
> 
> 时间：2012-08-14T21:37:26.360
> 
> 标签：servicestack

我有一个使用 ServiceStack 构建的简单服务

```
public class GetContactMasterDataService : IService<GetContactMasterData>
{
    public object Execute(GetContactMasterData getContactMasterData)
    {            
        return ContactApi.FetchContactMasterData();
    }
} 
```

在不同的命名空间中：

```
public class GetContactMasterData
{

}

public class GetContactMasterDataResponse
{
    public ResponseStatus ResponseStatus { get; set; }
}

public static GetContactMasterDataResponse FetchContactMasterData()
{
    throw new ApplicationException("CRASH");
} 
```

当我发送 JSON 请求时，我正确地得到：

```
{
  "ResponseStatus":{
  "ErrorCode":"ApplicationException",
  "Message":"CRASH",
}
} 
```

当我使用soapUI 发送soap12 请求时，我得到了典型的黄屏死机

```
<html>
<head>
    <title>CRASH</title>
...
<h2> <i>CRASH</i> </h2></span>
<b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
...
<b> Exception Details: </b>System.ApplicationException: CRASH<br><br> 
```

这是预期的行为吗？如何获得类似于 JSON 响应的整齐序列化的 ResponseStatus。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:17:00.227

您得到的 HTML 错误页面看起来不像来自[ServiceStack](http://www.servicestack.net/)，请检查您的网站是否有可能使用自己的页面劫持错误的内容，例如：`<customErrors />`.

SOAP 端点的正确行为是抛出 SOAP 错误，如果您使用的是通用服务客户端`Soap11ServiceClient`或`Soap12ServiceClient` [通用服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)，则会将其转换为[集成测试](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/WebServicesTests.cs#L53)`WebServiceException`中所示的a ：

```
var client = new Soap12ServiceClient(ServiceClientBaseUri);
try
{
    var response = client.Send<AlwaysThrowsResponse>(
        new AlwaysThrows { Value = TestString });

    Assert.Fail("Should throw HTTP errors");
}
catch (WebServiceException webEx)
{
    var response = (AlwaysThrowsResponse) webEx.ResponseDto;
    var expectedError = AlwaysThrowsService.GetErrorMessage(TestString);
    Assert.That(response.ResponseStatus.ErrorCode,
        Is.EqualTo(typeof(NotImplementedException).Name));
    Assert.That(response.ResponseStatus.Message,
        Is.EqualTo(expectedError));
} 
```

# java - startActivityForResult() 可以发送数据吗？

> ID：11961149
> 
> 赞同：2
> 
> 时间：2012-08-14T21:37:50.523
> 
> 标签：java, android, eclipse, android-intent, start-activity

我正在学习 android 并且很想知道是否也`startActivityForResult()`包含 的属性，即除了从被调用的活动中接收数据之外，`startActivity()`它还可以用来发送数据吗？`startActivity()`

这是代码：
SendData 活动：

```
Intent data= new Intent(SendData.this, RecieveData.class);
Bundle check = new Bundle();

check.putString("UmerData", cheese);
medt.setText(cheese);
data.putExtras(check);
startActivityForResult(data, 5); 
```

应该在这个活动中接收数据（RecieveData Activity）

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recievedata);
    Initializek();
    Bundle got = getIntent().getExtras();
    String ss= got.getString("UmerData");
    if(getIntent()!=null && ss!=null ) {
        rt1.setText("Is not Null");
    }
} 
```

您的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:40:10.973

是的，startActivity 和 startActivityForResult，都将意图作为参数。您可以在 Intent 中捆绑启动数据并将其传递给目标活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:00:14.360

使用`startActivityForResult()`的时候，还得`onActivityResult()`在Activity里面创建一个调用的方法`startActivityForResult()`。 `onActivityResult()`是您可以访问由`Activity`您开始存储的 Intent 以获取结果的地方。

`Activity`然后开始，您必须调用`setResult()`来存储您存储数据的那个`Intent`。

阅读此内容：http: [//developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

**编辑：**误读你的问题。为了传递一个 Bundle 选项，我会使用这个重载：

[`startActivity(Intent, int, Bundle)`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int,%20android.os.Bundle%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-02T22:54:51.900

我在 Xamarin Android 中工作，所以代码是 C#，但我遇到了同样的问题，除了我在不同的应用程序之间发送。我最终让它工作了，所以这是我的例子。

```
var intent = new Intent();
intent.SetComponent(new ComponentName("com.company.packageName", "com.company.packageName.activityName"));
intent.PutExtra(Intent.ExtraText, message);
StartActivityForResult(intent, 1); 
```

```
// in app being started
protected override void OnResume()
{
    base.OnResume();

    Intent intent = Intent; // Equivalent to getIntent()
    if (intent != null)
    {
           string str = intent.GetStringExtra(Intent.ExtraText);
           if (str != null)
           {
              // Do stuff with str
           }
           else
           {
               //Show Error
           }  
         }
     else
     {
              //Show Error
     }
} 
```

# jquery - Ajax + Rails 不适用于 Heroku

> ID：11961161
> 
> 赞同：0
> 
> 时间：2012-08-14T21:38:27.840
> 
> 标签：jquery, ruby-on-rails, ajax, jquery-ui, heroku

我有一个弹出式登录表单，它通过 jQuery Ajax 在表单正文中显示错误消息。它在我的本地环境（PostGreSQL、WEBbrick）上运行良好，但在 Heroku 上运行良好。在 Heroku 上，用户被重定向到仅显示错误消息的新页面，即 {"error":"Invalid Email Address: testing@test.com"}

页面上其实有两种注册表单，一种是通过jQuery Dialog弹出的，另一种是嵌入到页面中的。谢谢你的帮助。

这是控制器： class MailingListController < ApplicationController

```
 respond_to :json

 def create
   gb = Gibbon.new(Settings.mailchimp.api_key)
   res = gb.list_subscribe({:id => Settings.mailchimp.list_id, :email_address => params[:email]})
   if res == true
     render(:json => {:body => "okay"})
   else
     render(:json => {:error => res["error"]})
   end
 rescue
   render(:json => {:error => "Fatal Error"})
  end
end 
```

这是js（我知道，重复的代码，我只是想让它工作）：

```
 // Mailing List Watcher
 var mailingList2 = $("#mailing-list2");
 if ( mailingList2.length ) {
   mailingList2
     .live("completed", function(e){
     })
     .live("success", function(e){
       var that = this;
       $.cookie("mailingListSubmitted", "true", {expires: 7});
       if(mailingList2.find("#mailing-list2 #status2").length == 0){
         mailingList2
           .find("form input[type='text']")
           .after($("<div></div>").attr({id : "status2"}))
       }
       mailingList2
         .find("form input[type='text']")
           .attr("disabled", true)
           .fadeOut(5000);
       $("#mailing-list2 #status2")
         .text("Email submitted successfully!")
         .effect("highlight", { }, 1000);
     })
     .live("failure", function(e, error){
      if(mailingList2.find("#mailing-list2 #status2").length == 0){
         mailingList2
           .find("form input[type='text']")
           .after($("<div></div>").attr({id : "status2"}))
       }
       $("#mailing-list2 #status2")
         .text(error)
         .effect("highlight", {}, 1000);
     })
     .live("submittal", function(e, emailAddress){
       if ( emailAddress == "" || emailAddress == null ) {
         $(this).trigger("failure", ["You need to specify an email address!"])
         return false;
       }
       var token = $.token();
       $.post("/mailing_list", {email: emailAddress, authenticity_token: token}, function(response, status, xhr){
         if(response.error){
           $(mailingList2).trigger("failure", ["An error occurred: " + response.error]);
         } else {
           $(mailingList2).trigger("success");
         }
       }, "json")
       .error(function(){
         $(mailingList2).trigger("failure", ["An error occurred. Please try again in a few minutes."]);
       });
     });

   mailingList2.find("form").submit(function(){
     emailAddress = mailingList2.find("input[name='email']").val();
     $(mailingList2).trigger("submittal", [emailAddress]);
     return false;
   });

   var mlSetting = $.cookie("mailingListSubmitted");
   if ( mlSetting == "true" ) {
     mailingList2.remove();
   }
 }

 // Mailing List Watcher
 var mailingList = $("#mailing-list");
 if ( mailingList.length ) {
   mailingList
     .live("completed", function(e){
     })
     .live("success", function(e){
       var that = this;
       $.cookie("mailingListSubmitted", "true", {expires: 7});
       if(mailingList.find("#status").length == 0){
         mailingList
           .find("form input[type='text']")
           .after($("<div></div>").attr({id : "status"}))
       }
       mailingList
         .find("form input[type='text']")
           .attr("disabled", true)
           .fadeOut(5000);
       $("#status")
         .text("Email submitted successfully!")
         .effect("highlight", { }, 1000);
     })
     .live("failure", function(e, error){
      if(mailingList.find("#status").length == 0){
         mailingList
           .find("form input[type='text']")
           .after($("<div></div>").attr({id : "status"}))
       }
       $("#status")
         .text(error)
         .effect("highlight", {}, 1000);
     })
     .live("submittal", function(e, emailAddress){
       if ( emailAddress == "" || emailAddress == null ) {
         $(this).trigger("failure", ["You need to specify an email address!"])
         return false;
       }
       var token = $.token();
       $.post("/mailing_list", {email: emailAddress, authenticity_token: token}, function(response, status, xhr){
         if(response.error){
           $(mailingList).trigger("failure", ["An error occurred: " + response.error]);
         } else {
           $(mailingList).trigger("success");
         }
       }, "json")
       .error(function(){
         $(mailingList).trigger("failure", ["An error occurred. Please try again in a few minutes."]);
       });
     });

   mailingList.find("form").submit(function(){
     emailAddress = mailingList.find("input[name='email']").val();
     $(mailingList).trigger("submittal", [emailAddress]);
     return false;
   });

   var mlSetting = $.cookie("mailingListSubmitted");
   if ( mlSetting == "true" ) {
     mailingList.remove();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:46:27.053

答案就在这里，虽然我之前读过这篇文章，但还是尝试了几次才能让它发挥作用：[https ://devcenter.heroku.com/articles/pgbackups#exporting-via-a-backup](https://devcenter.heroku.com/articles/pgbackups#exporting-via-a-backup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:23:19.917

您的 environment/production.rb 未正确配置为发送电子邮件。您需要确保将其设置为作为您实际拥有的域发送电子邮件。[Rails](http://guides.rubyonrails.org/action_mailer_basics.html)和[Heroku](https://devcenter.heroku.com/articles/smtp)都有关于这个主题的好文章。

# java - 我的第一个 LWJGL 应用程序性能不佳

> ID：11961168
> 
> 赞同：0
> 
> 时间：2012-08-14T21:38:50.943
> 
> 标签：java, performance, lwjgl, frame-rate

我目前正在试验 LWJGL。我创建了一个非常简单的 .obj 加载器，将其渲染到我的屏幕上，并创建了一个类似 fps 的相机。它再简单不过了，但我只有 40 FPS，而且它使用了大量的视频内存，而且我的 GPU 风扇吹得像地狱一样。我做错什么了？

这是我的代码：

FPSController.java（主类）： [http ://pastebin.com/kjWrJs0p](http://pastebin.com/kjWrJs0p)

OBJLoader.java：http://pastebin.com/cGmLU0Fz [_](http://pastebin.com/cGmLU0Fz)

[模型.java： http](http://pastebin.com/gMX8SXXc) ://pastebin.com/gMX8SXXc

Face.java：http://pastebin.com/5P813v9V [_](http://pastebin.com/5P813v9V)

第一个问题：我的 FPS 计数器实际上是一个合适的计数器吗？
第二个问题：为什么这个小程序对我的 GPU 要求这么高？
第三个问题：与纹理、照明、着色器等一起使用的最佳模型类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:52:05.223

**第一个问题：**

我真的不明白你的 FPS 代码在做什么，所以它可能是错误的。基本思想是这样的：

*   启动计时器，以纳秒为单位`(1)`
*   更新和渲染你的游戏
*   停止计时器，以纳秒为单位`(2)`
*   减去：`(2) - (1)`，这是您的机器更新和渲染所花费的纳米时间 (3)
*   分：`1e9 / (3)`. 这是你的帧率

在 Java 中：

```
long start = System.nanoTime();
updateAndRenderTheGame();
long stop = System.nanoTime();
long time = stop - start;
float framerate = 1e9f / time; // 1e9f is equivalent to 1000000000.0f 
```

**第二个问题：**

你的粉丝吹得*要死*的原因，可能是因为你的 FPS 代码没有工作，你认为你只有 40 FPS，但实际上你得到了更高的帧率。假设 200 FPS。为了防止这种情况发生，您应该限制帧速率，通过在两帧之间休眠，使用`Thread.sleep(milliseconds);`

您应该使用顶点缓冲区对象（VBO），它们要快得多。您现在使用的方法已被弃用，对 GPU 来说非常昂贵，但更易于使用。VBO 确实值得使用，它们需要更多的工作，但性能会好很多。一些简单的谷歌搜索会找到一些好的参考和例子。

**第三个问题：**

我不是 3D 图形的专业人士，但我玩过 OBJ 文件。我使用 Blender 创建了它们。只需确保在使用搅拌机导出时，在窗口左侧的面板中检查要导出的所有数据。（例如：位置、法线、面、UV 等...）

# flash - 录音 | 暂停和恢复

> ID：11961172
> 
> 赞同：0
> 
> 时间：2012-08-14T21:39:05.863
> 
> 标签：flash, audio, actionscript, recording

我目前正在开发一个允许用户录制音频消息的项目，但是最近提出了一个请求，允许他们暂停录制过程然后继续录制（将新音频附加到之前的录制之后）。

**例子：**

1.  用户按下记录并进行初始记录。
2.  用户按下暂停按钮来收集他们的想法，或者你有什么。
3.  用户再次单击录制按钮并从前一个停止的位置继续录制。
4.  （重复直到录制过程完成并单击上传。）

我目前正在使用**[recorder.js](https://github.com/jwagener/recorder.js/)**并且到目前为止对它非常满意，但是我觉得它缺乏我正在寻找的功能，而且我对 Flash / Actionscript 不够熟悉，无法深入研究和修补。

我很好奇是否有任何用户对功能齐全的解决方案有任何建议，或者对如何实现类似的东西有任何建议。一个相当跨浏览器/跨平台的解决方案将是首选，但不是硬性要求（主要涉及 Chrome 和 IE）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:31:09.327

参考以下代码。

```
import flash.events.SampleDataEvent;
import flash.media.Microphone;
import flash.media.Sound;
import flash.utils.ByteArray;
import flash.events.Event;

var microphone:Microphone;
var isPause:Boolean = false;
var soundRecording:ByteArray;

record_btn.addEventListener(MouseEvent.CLICK, onRecordStart);
recordPause_btn.addEventListener(MouseEvent.CLICK, onPauseResumeToggle);
recordStop_btn.addEventListener(MouseEvent.CLICK, onRecordStop);
audioPlay_btn.addEventListener(MouseEvent.CLICK, onPlay);

function onRecordStart(e:MouseEvent=null):void 
{
    soundRecording = new ByteArray();
    microphone=Microphone.getMicrophone();
    microphone.rate=44;
}

function onPauseResumeToggle(e:MouseEvent=null):void
{
    if(!isPause)
    {
        microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
    }
    else
    {
        microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
    }

    isPause != isPause;
}

function onRecordStop(e:MouseEvent=null):void 
{
    isPause = false;
    microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, gotMicData);
    soundRecording.position=0;
}

function gotMicData(micData:SampleDataEvent):void 
{
    soundRecording.writeBytes(micData.data);
}

function onPlay(e:MouseEvent=null):void 
{
    soundRecording.position=0;

    soundOutput = new Sound();
    soundOutput.addEventListener(SampleDataEvent.SAMPLE_DATA, playSound);

    soundOutput.play();
}

function playSound(soundOutput:SampleDataEvent):void 
{
    if (! soundRecording.bytesAvailable>0) 
    {
        return;
    }
    for (var i:int = 0; i < 8192; i++) 
    {
        var sample:Number=0;
        if (soundRecording.bytesAvailable>0) 
        {
            sample=soundRecording.readFloat();
        }
        soundOutput.data.writeFloat(sample);
        soundOutput.data.writeFloat(sample);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T13:00:43.337

试试这个。它具有以下特点：

*   暂停录音
*   暂停播放
*   记录时间回调
*   上传录制的音频
*   只有上传按钮在闪光灯里面

[https://github.com/ehsan6sha/FlashWavRecorder](https://github.com/ehsan6sha/FlashWavRecorder)

# c# - 在 C# 中使用 Selenium 通过部分 id 查找元素

> ID：11961178
> 
> 赞同：14
> 
> 时间：2012-08-14T21:39:53.097
> 
> 标签：c#, regex, selenium

我正在尝试使用动态生成的 id 定位元素。字符串的最后一部分是常量（“ReportViewer_fixedTable”），所以我可以使用它来定位元素。我尝试在 XPath 中使用正则表达式：

```
targetElement = driver.FindElement(
    By.XPath("//table[regx:match(@id, "ReportViewer_fixedTable")]")); 
```

并通过 CssSelector 定位：

```
targetElement = driver.FindElement(
    By.CssSelector("table[id$='ReportViewer_fixedTable']")); 
```

两者都不起作用。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-14T22:49:55.953

那是因为需要修改 css 选择器，你几乎就在那里......

```
driver.FindElement(By.CssSelector("table[id*='ReportViewer_fixedTable']"))` 
```

来自[https://saucelabs.com/blog/selenium-tips-css-selectors-in-selenium-demystified](https://saucelabs.com/blog/selenium-tips-css-selectors-in-selenium-demystified)：

```
css=a[id^='id_prefix_'] 
```

一个`id`以文本开头的链接`id_prefix_`。

```
css=a[id$='_id_sufix'] 
```

`id`以文本结尾的链接`_id_sufix`。

```
css=a[id*='id_pattern'] 
```

一个`id`包含文本的链接`id_pattern`。

您使用的后缀不是您应该使用的部分链接文本标识符（除非我看到了您的 html，这意味着下次尝试显示您的 html）。`*=`不过在任何情况下都是可靠的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:24:02.597

尝试使用

```
targetElement = driver.FindElement(By.XPath("//table[contains(@id, "ReportViewer_fixedTable")]")); 
```

请注意，这将检查所有具有包含 id 的元素（并且不仅以“ReportViewer_fixedTable”结尾）。我将尝试找到一个更准确地回答您的问题的正则表达式选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T10:42:40.787

无论 XPath 版本如何，此解决方案都将有效。首先，在您的 COMMON 助手类中的某处创建一个方法。

```
 public static string GetXpathStringForIdEndsWith(string endStringOfControlId)
    {
        return "//*[substring(@id, string-length(@id)- string-length(\"" + endStringOfControlId + "\") + 1 )=\"" + endStringOfControlId + "\"]";
    } 
```

就我而言，以下是我的产品不同版本中的控件 ID::

v1.0 :: ContentPlaceHolderDefault_MasterPlaceholder_HomeLoggedOut_7_hylHomeLoginCreateUser

v2.0 :: ContentPlaceHolderDefault_MasterPlaceholder_HomeLoggedOut_8_hylHomeLoginCreateUser

然后，您可以调用上述方法来查找具有静态结束字符串的控件。

```
By.XPath(Common.GetXpathStringForIdEndsWith("<End String of the Control Id>")) 
```

对于我提到的 v1 和 v2 的控制 ID，我使用如下：

```
By.XPath(Common.GetXpathStringForIdEndsWith("hylHomeLoginCreateUser")) 
```

总体逻辑是，您可以使用以下 XPath 表达式来查找以特定字符串结尾的控件：

```
//*[substring(@id, string-length(@id)- string-length("<EndString>") + 1 )="<EndString>"] 
```

# php - Zend：从字符串中删除特殊字符

> ID：11961187
> 
> 赞同：1
> 
> 时间：2012-08-14T21:40:29.870
> 
> 标签：php, zend-framework

如何从作为字符串的数组键中删除特殊字符？我从美国邮政服务处接收 XML，他们正试图在未转义的 XML 中对 TM 和商标进行编码。因此，当我显示他们的运费时；我创建的选择框中似乎有很多乱码。

当我尝试这个时 -

```
 foreach($responseUSPSsimple as $name => $amount) {
        strip_tags($name);
    echo $name . '<br />';
    } 
```

我明白了——

```
Express Mail<sup>&reg;</sup>
Express Mail<sup>&reg;</sup> Hold For Pickup
Express Mail<sup>&reg;</sup> Sunday/Holiday Delivery
Express Mail<sup>&reg;</sup> Flat Rate Boxes
Express Mail<sup>&reg;</sup> Flat Rate Boxes Hold For Pickup
Express Mail<sup>&reg;</sup> Sunday/Holiday Delivery Flat Rate Boxes 
```

谁能帮我删除^(该输出的部分？)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:09:08.623

我假设您发布的输出显示在浏览器中。根据您的评论`$name=strip_tags($name)`无效，您的原始字符串已经具有编码格式的 html 实体，因此`strip_tags`无法删除此类标签。下面试试。

```
foreach($responseUSPSsimple as $name => $amount) {
    $name = strip_tags(htmlspecialchars_decode($name));
    echo $name . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:32:48.613

如果您找不到更适合您的问题的东西，您总是可以使用大锤方法从输出中删除所有 xml 标记：

```
foreach($responseUSPSsimple as $name => $amount) {
    $newName = preg_replace('#<[^>]+>.*?<[^>]+>#', '', $name);
    echo $newName . '<br />';
} 
```

[**演示**](http://sandbox.onlinephpfunctions.com/code/1d2615f35cb5d07a689e0e2dea7a99d483816ce5)

# php - 使用 PHP 变量将日期添加到 MySQL

> ID：11961191
> 
> 赞同：0
> 
> 时间：2012-08-14T21:40:34.663
> 
> 标签：php, mysql, date

我正在建立一个电子商务后端。我正在尝试将“预计交货日期”添加到 HTML 表格中。

它所做的只是将订单日期增加了 14 天。如何将 14 天添加到一个时间的 php 变量中。这是我的代码：

```
$order_date = mysql_result($order_results, $a, "order_date"); 

$convert_orderDate = strtotime($order_date);

$order_date = date('m-d-y', $convert_orderDate); 
```

我想更改`$order_date`为`$etd`（预计交货时间），只需将 14 天添加到`$order_date`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:43:17.483

直接在 MySQL 中执行：

```
SELECT order_date + INTERVAL 14 DAY AS order_date 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T21:43:27.320

看一下[DateTime](http://www.php.net/manual/en/class.datetime.php)类和 modify() 方法

```
$etd = new DateTime($order_date);
$etd->modify('+14 Days');
echo $etd->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:58:07.727

要根据您的代码示例回答您的问题，您可以使用`strtotime`. 我已经测试了这段代码：

```
$order_date = '2012-08-14';

$convert_orderDate = strtotime($order_date);
$convert_etd       = strtotime($order_date . ' + 14 days');

$order_date = date('m-d-Y', $convert_orderDate);
$order_etd  = date('m-d-Y', $convert_etd);

echo $order_date; // 08-14-2012
echo $order_etd;  // 08-28-2012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T00:48:57.620

这是我如何让它工作的：

```
$a=0;
while ($a < $num_rows){ //while loop to go through all rows and print data

      $order_date = mysql_result($order_results, $a, "order_date");// pulls order date

      $convert_orderDate = strtotime($order_date); //converts order_date
      $convert_etd       = strtotime($order_date . ' + 14 days'); //converts etd by adding to order date

      $order_date = date('m-d-y', $convert_orderDate); // reformats order date
      $order_etd  = date('m-d-Y', $convert_etd); // reformats etd

echo"<td>$order_date</td>
     <td>$order_etd</td>"; 
```

谢谢你们，这很好用！谢谢@JDavis

# javascript - javascript表单错误

> ID：11961194
> 
> 赞同：0
> 
> 时间：2012-08-14T21:40:42.847
> 
> 标签：javascript

我的 HTML 结构采用以下格式

```
<div>
<form class="form-inline" style="padding-top:10px" action="javascript:function()">   <!-- a search bar-->
  <input id="id" type="text" " placeholder="Something">
   </form>

<button onClick="somefunction()"> b</button>
</div> 
```

问题是我希望搜索栏在我按 Enter 时工作，但不幸的是它正在提交按钮元素，我有点困惑，因为按钮不是表单元素，我已经专门定义了 onClick。我是 javascript 新手，所以我确信它很小，但我无法解决它。

即当我按下回车键时，“somefunction()”变得活跃，而不是“function()”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:47:45.297

您可以将您的按钮放在表单中并调用该函数以`onClick`返回 false，如此[处](https://stackoverflow.com/a/932657/634150)所述。

**编辑**

根据您的编辑和您对所需内容的评论，您可以执行以下操作：

```
<html>
<head>
    <script>
        function formfunction(){
            alert("form function is called.");
        }
        function somefunction(){
            alert("the button is clicked.");
        }
    </script>
</head>
<body>
<div>
<form name="myform" action="#" onsubmit="formfunction(); return false;">
    <input id="id" type="text" placeholder="Something">
</form>
<button type="button" onClick="somefunction()"> b</button>
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:50:35.330

尝试这个

**HTML**

```
<div>
    <form class="form-inline" style="padding-top:10px" action="someFile.php" onsubmit="return someFunc();"> 
        <input id="id" type="text" placeholder="Something">
        <input type="submit" name="btn_submit" value="Submit" /> 
    </form>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**JS**

```
function someFunc(){
    // code goes here
    return false;
} 
```

[**只是一个例子**](http://jsfiddle.net/c5ucy/)。

# css - 每个页面都有唯一的 css 文件（也使用全局文件）是一个好习惯吗？

> ID：11961201
> 
> 赞同：2
> 
> 时间：2012-08-14T21:41:17.947
> 
> 标签：css, file, sass, readability

此时，我使用 Ruby on Rails 构建了一个新网站。随着网站变得越来越大，我的 css 规则变得越来越乱。所以我想了一种方法来提高我的 css 代码的可读性并避免错误：

我有一个全局 css.scss（SASS，类似 LESS）文件，用于所有重置和处理全局元素（如页眉和页脚）的页面。对于其他每个页面，我都有一个专用的 css 文件。例如，对于 about 页面，我有一个 about.css.scss 文件。在 about_page.css.scss 文件中，代码如下所示：

```
.about_page {
  .othersubclass {
    .
    .
  }
} 
```

在“about.erb”页面中，我有以下内容：

```
<div class="about_page">
  <div class="othersubclass">
    .
    .
    .
  </div>
</div> 
```

这是好还是坏的技术？是否有任何已知的技术可以解决这个问题？

（顺便说一句，RoR 将所有 css 文件连接到 1 个文件中，因此额外的 http 请求没有问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:06:32.287

根据：[http ://betterfrontend.com/guides/stylesheets/](http://betterfrontend.com/guides/stylesheets/)

通常建议每个站点的主要部分都有一个样式表。

然后你可以在 application.css.scss 中编译它（所有的@import都在这里）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:31:35.190

在您网站上每个页面的根元素中添加一个唯一的 CSS 类/ID 是非常好的（实际上许多 CMS 都会这样做），但是为每个页面创建一个单独的 CSS 文件听起来有点矫枉过正，通常没有很多特定于页面的 CSS。

由于您提到您的构建过程将所有 CSS 连接到一个文件中，因此在生产环境中并不重要，只是代码组织的问题。如果它适合您的项目架构（您有其他资源的每页分离），那么我想这没关系，但就个人而言，它会采用更粗粒度的划分，例如 Daniel Fischer 建议的那样。

试想在您的情况下维护许多（数十个？数百个？）小css文件（每个0-50行？）是否方便。

# iphone - 如何通过 Web 服务 (php) sql 查询从 ios iphone sdk 中选择条件来捕获数据

> ID：11961202
> 
> 赞同：0
> 
> 时间：2012-08-14T21:41:30.187
> 
> 标签：iphone, mysql, objective-c, ios, web-services

我有以下 php 文件：

```
<?php 
$username="root";
$database="testdb";
mysql_connect(localhost,$username);
$user=$_GET["user"];
$password=$_GET["password"];
$query="SELECT documento FROM person WHERE user='".$user." and  password ='".$password."'";

$result=mysql_query($query) or die (mysql_error("error "));

$num=mysql_numrows($result);

mysql_close();

$rows=array();

while($r=mysql_fetch_assoc($result)){

$rows[]=$r;

 }
 echo json_encode($rows);

 ?> 
```

要检索通过以下函数实现的信息，但该示例没有 php 输入条件和参数，`select * from person` 这里是基于[http://www.youtube.com/watch?feature=endscreen&v=IQcLngIDf9k&NR=1的函数](http://www.youtube.com/watch?feature=endscreen&v=IQcLngIDf9k&NR=1)

```
-(void) getData:(NSData *) data{

   NSError *error;

   json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

}

-(void) start {
   NSURL *url = [NSURL URLWithString:kGETUrl];

   NSData *data = [NSData dataWithContentsOfURL:url];

   [self getData:data];

} 
```

现在因为 sql 语句的输入参数不是代码，所以尝试了类似[A Simple PHP/MySQL Web Service for iOS](https://stackoverflow.com/questions/6156411/a-simple-php-mysql-web-service-for-ios)但我无法满足我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:23:25.327

传递字符串中的参数。这是一个例子

```
-(void) start {
    NSString *user     = [[NSString alloc] initWithString:@"exampleuser"];
    NSString *password = [[NSString alloc] initWithString:@"examplepassword"];
    NSString *urlstr   = [[NSString alloc] initWithFormat:@"http://myserver.com/myphpfile.php?user=%@?password=%@", user, password];
    NSURL    *url      = [NSURL URLWithString:urlstr];
    NSData   *data     = [NSData dataWithContentsOfURL:url];
    [self getData:data];
} 
```

由于它是密码和用户，通常最好使用 POST 而不是 GET，因为它不是可见的 URL 的一部分。如果您有 https 行，则可以使用 POST 隐藏它。但我认为这不是你现在主要关心的问题。以上应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:53:06.853

我对 Hollfeder 的代码做了一些改动，效果很好：）

```
-(void) start {
NSString *user     = [[NSString alloc] initWithString:@"exampleuser"];
NSString *password = [[NSString alloc] initWithString:@"examplepassword"];
NSString *urlstr   = [[NSString alloc] initWithFormat:@"http://myserver.com/myphpfile.php?user=%@&password=%@", user, password];
NSString *urlstr_encoded = [urlstr stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

NSURL    *url      = [NSURL URLWithString:urlstr_encoded];
NSData   *data     = [NSData dataWithContentsOfURL:url];
[self getData:data]; 
```

}

# sql - SQL 查询性能/SELECT TOP X 行为

> ID：11961205
> 
> 赞同：0
> 
> 时间：2012-08-14T21:41:36.403
> 
> 标签：sql, performance, sql-server-2008

想知道为什么这个查询执行缓慢。如果有人能告诉我它是如何处理的，那就太好了。被查询的数据库有超过 5 亿行。这个查询真的写得那么糟糕，以至于 TOP 10 需要这么长时间才能完成它可能永远不会完成？假设我仍想按月+年查询数据，我该如何改进查询？

```
 SELECT TOP 10 *
 FROM ADB.dbo.Stuff tt
 WHERE MONTH(tt.SomeDate) = 5
 AND
 YEAR(tt.SomeDate) = 2011 
```

SELECT TOP 10 不只是在获得 10 个结果后停止吗？还是因为在通过 500m+ 行时还没有找到我的条件而需要这么长时间？

感谢和抱歉这么简单的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T21:51:08.690

它必须扫描整个表，因为它不是 sargable，`MONTH(column)`而且`YEAR(column)`你还没有告诉 SQL Server 你所说的`TOP`. 虽然 SQL Server 确实可以在找到您的 10 行后进行短路，但当发生这种情况时，它可能会在扫描中进行到很远，以至于对您的差异很小。如果您找到与 where 子句匹配的零行或 < 10 行，则尤其如此。

一个更好的`WHERE`条款是：

```
WHERE SomeDate >= '20110501' AND SomeDate < '20110601'; 
```

如果您不想构造字符串，可以将它们作为参数/变量传递并执行以下操作：

```
DECLARE @year INT;
DECLARE @month INT;

SET @year = 2011;
SET @month = 5;

...
WHERE SomeDate >= DATEADD(MONTH, @month-1, DATEADD(YEAR, @year-1900, '19000101'))
  AND SomeDate <  DATEADD(MONTH, @month,   DATEADD(YEAR, @year-1900, '19000101')); 
```

无论哪种情况，如果 上有索引`SomeDate`，则可以使用它并且可以避免表扫描。您希望避免对具有 5 亿行的表进行表扫描，即使您只查找 10 行，即使可能发生短路。

然而，即使没有表扫描，这个查询仍然是低效的。你真的需要所有的列吗？如果使用了索引，`SomeDate`则搜索仍必须查找聚集索引或覆盖索引以检索其余列。如果您不需要这些列，请不要包含它们。

正如 bluefeet 指出的那样，`TOP 10`如果您没有告诉 SQL Server您的意思是*哪个*10，并且您使用`ORDER BY`. 如果`ORDER BY`使用合适的索引，您可以避免额外昂贵的排序运算符，您可能认为您通过不使用任何方式来避免`ORDER BY`。

# ruby-on-rails-3 - 从heroku rails应用程序连接时获取Faraday :: Error :: ConnectionFailed

> ID：11961210
> 
> 赞同：2
> 
> 时间：2012-08-14T21:42:01.457
> 
> 标签：ruby-on-rails-3, ssl, heroku, faraday, faraday-oauth

我的公司在[https://auth.vitalvu.com有一个简单的 oauth 服务器](https://auth.vitalvu.com)

我正在开发一个需要向该服务器发出请求的 Rails 应用程序（通过omniauth-oauth2 gem）。当我尝试在 Heroku 上运行应用程序时，出现错误：

`Faraday::Error::ConnectionFailed: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed`

我已经按照[这里的描述](https://github.com/technoweenie/faraday/wiki/Setting-up-SSL-certificates "这里描述")对其进行了测试。

从`rails console`我本地机器上的应用程序

```
connection = Faraday::Connection.new 'https://auth.vitalvu.com'
connection.get '/ping.json' 
```

工作得很好。

但是，在将应用程序推送到 Heroku 后，`heroku run rails console`

```
connection = Faraday::Connection.new 'https://auth.vitalvu.com'
connection.get '/ping.json' 
```

导致法拉第误差和

```
connection = Faraday::Connection.new 'https://auth.vitalvu.com', :ssl => {:ca_file => '/usr/lib/ssl/certs/ca-certificates.crt'}
connection.get '/ping.json' 
```

导致法拉第误差和

```
connection = Faraday::Connection.new 'https://auth.vitalvu.com', :ssl => {:ca_path => "/etc/ssl/certs"}
connection.get '/ping.json' 
```

导致法拉第错误

我不确定还能尝试什么。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-11T23:42:40.123

我跑`heroku restart`了三遍——终于开始工作了。

# android - 更新eclipse android插件的其他方法

> ID：11961213
> 
> 赞同：0
> 
> 时间：2012-08-14T21:42:16.830
> 
> 标签：android, eclipse-plugin, adt

我遇到了无法从 Eclipse 下载插件的问题。

我已经尝试过使用`http`，`https`但它显示以下错误。有没有办法让我更新插件？

我正在使用 eclipse helios，它是 3.6 版。

我最近更新了我的 sdk，它说它需要更新 ADT，但我一遍又一遍地尝试它仍然会显示相同的错误。

请。

![在此处输入图像描述](../Images/71b4b78cbba3b2a632c9f28698bc3e1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:46:45.587

[尝试从此链接](http://developer.android.com/sdk/installing/installing-adt.html)下载 ADT 插件作为 zip 文件，然后从存档中安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:14:17.333

按照 ADT 安装的[故障排除](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)部分中的步骤进行操作。他们非常详细地解释了如何从下载的存档中离线安装 ADT。

# c# - 如何将事件挂钩到其他应用程序中的 Windows 控件

> ID：11961215
> 
> 赞同：1
> 
> 时间：2012-08-14T21:42:18.610
> 
> 标签：c#, winforms

我必须检测我没有源代码的应用程序的组合框何时发生变化。这个想法是把一个事件挂到这个控件上，当事件触发时，获取控件的选定值。我已经用谷歌搜索了，但是当标题文本更改时，我刚刚找到了如何与窗口挂钩（[如何挂钩窗口）。](https://stackoverflow.com/questions/9665579/setting-up-hook-on-windows-messages)我可以获得控件的句柄（FindWindowEx）但是，我不知道如何将事件挂钩到控件，如果有人可以帮助我，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:27:20.667

您可以查看 SendMessage API。DDE 是一种旧的 IPC 方法，但它仍然适用于 .net。

作为一种便宜的简单方法，只需使用 guid + '|' 创建一个表单 + 文本框的句柄作为 Text 属性。当您的应用程序运行时，只需加载表单但不显示它（也将其从任务托盘中隐藏）。

您的其他应用程序可以使用标题中的预定 guid 在第一个应用程序表单上 FindWindowEx，还可以获取表单上文本框的句柄（使用管道字符或其他东西将其与 guid 分开）。

现在只需 SendMessage(WM_SETTEXT) 到文本框 hwnd（给它用户在组合框中选择的值）。如果您在 text_changed 事件上放置一个事件处理程序，它将在您的第一个应用程序中触发。

# jquery - 用 hashchange 分开 fadeToggle div

> ID：11961218
> 
> 赞同：1
> 
> 时间：2012-08-14T21:42:28.767
> 
> 标签：jquery, hashchange

我有 hashchange 示例，需要在链接单击时淡化切换 div。如果链接 1 单击淡入 content1 div，如果链接 2 淡入 content2 等等。div的淡入淡出必须是独立的。现在只改变了链接背景，所有 4 个 div 都被隐藏了。如何使用我在这里的代码来完成此操作：http: [//jsfiddle.net/fXA4z/](http://jsfiddle.net/fXA4z/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:48:28.860

您可以使用该`click`方法而不是监听`hashchnage`事件：

```
$('#nav a').click(function(event){
    event.preventDefault();
    $(this).addClass('selected').siblings().removeClass('selected')
    var which = this.href.slice(-1);
    $('div[class^="content"]').hide();
    $('div.content'+which).show()
}) 
```

[小提琴](http://jsfiddle.net/fXA4z/1/)

# c# - 从调用函数c#中杀死一个线程

> ID：11961222
> 
> 赞同：0
> 
> 时间：2012-08-14T21:42:51.370
> 
> 标签：c#, multithreading, kill

我有按钮调用此代码

```
private void but_Click(object sender, EventArgs e)
{
    Thread My_Thread = new Thread(() => Send_File());
    My_Thread.IsBackground = true;
    My_Thread.Start();
} 
```

我想要一个杀人的方法

> 我的线程

从函数

> 发送文件（）

请帮助我如何解决它？？？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:46:42.507

只需像在不同函数中使用的任何其他变量（例如 int 或 string）一样全局声明您的线程：

```
Thread My_Thread; //goes before your functions/main method 
```

然后使用它：

```
private void but_Click(object sender, EventArgs e)
{
    My_Thread = new Thread(Send_File);
    My_Thread.IsBackground = true;
    My_Thread.Start();
} 
```

并杀死它：

```
private void Send_File()
{
    MyThread.Abort();
} 
```

如果您正在谈论 Send_File 在线程中运行，只需退出它，例如使用`break`，停止所有循环以完成它。

编辑：正如 Austin Salonen 在他的评论中所说，这将覆盖线程引用。我的建议是使用线程列表。

```
public List<Thread> ThreadList=new List<Thread>(); //goes before your functions/main method (public for use in other classes) 
```

并使用它：

```
private void but_Click(object sender, EventArgs e)
{
    Thread My_Thread = new Thread(Send_File);
    My_Thread.IsBackground = true;
    My_Thread.Start();
    int ThreadIndex = ThreadList.Count; //remember index
    ThreadList.Add(My_Thread);
} 
```

您只需要记住列表的索引即可再次创建对线程的引用。

要中止一个线程，只需使用它的索引：

```
ThreadList[ThreadIndex].Abort();
ThreadList[ThreadIndex] = null; 
```

或者只是让线程返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:47:29.587

在类级别定义线程：

```
public class Whatever
{
    Thread My_Thread;

    private void but_Click(object sender, EventArgs e)
    {
        My_Thread = new Thread(() => Send_File());
        //...
    }

    private void Send_File()
    {
        My_Thread.Abort()  //though I can never ever ever encourage doing this
        //...
    }
} 
```

或者干脆回来。当一个线程的工作方法返回时，它被杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:15:26.710

如果您需要中止正在执行的操作，我强烈建议您不要直接使用 Thread。我会推荐一个任务并使用`CancellationTokenSource`它来传达取消请求。如果您需要与 UI 进行通信，例如进度，我建议您使用`BackgroundWorker`. 如果必须使用`Thread`，则需要通知用户中止。您可以通过使用线程定期检查以查看它是否应该继续的共享布尔值来做到这一点。您应该以线程安全的方式读取/写入该值。也许`Interlocked.Exchange`会为您这样做，`Thread.VolatileRead`或者`Thread.VolatileWrite`...

当您使用 Thread.Abort 时，它只会停止线程，除非线程试图捕获`ThreadAbortException`. 当您开始对正常逻辑流程使用异常时，这有点不确定；但是，这是可行的。在块`Thread.Abort`的上下文中存在死锁的可能性。`try/catch/finally`（以及任何其他受限区域）但是，`Thread.Abort`并非全部推荐：[http ://haacked.com/archive/2004/11/12/how-to-stop-a-thread.aspx](http://haacked.com/archive/2004/11/12/how-to-stop-a-thread.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T17:26:08.123

Thread.Abort() 是您正在寻找的那个。

参考资料和有用的页面：

*   [“Thread.Abort 方法”[msdn.microsoft.com]](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort(v=vs.71).aspx)

# google-maps - 如果用户不允许使用该位置则触发的事件

> ID：11961226
> 
> 赞同：-1
> 
> 时间：2012-08-14T21:43:11.110
> 
> 标签：google-maps, google-maps-api-3

> **可能重复：**
> [谷歌地图 - 用户选择不允许位置](https://stackoverflow.com/questions/11960863/google-map-user-choses-not-to-allow-location)

如果用户不允许浏览器获取他们的位置，我需要捕获，并使用一组默认的坐标来使地图居中。

我该怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:15:44.953

```
gMap.setZoom(5); 
gMap.setCenter(new google.maps.LatLng(44.44, -88.88)); 
```

gMap 是你的地图。以上是您如何使地图居中。我猜你有一个流程来确定他们是否允许浏览器获取他们的位置。那时您将设置中心。不能从你目前拥有的东西中掌握很多你正在做的事情。

# jquery - jQuery ajax - 更新 div

> ID：11961230
> 
> 赞同：2
> 
> 时间：2012-08-14T21:43:15.740
> 
> 标签：jquery, ajax

我正在尝试在 jQuery ajax 成功请求后更新 div 块，这是可行的，但所有块都重复（图片 1），在图 2 中显示了它在使用浏览器刷新页面后的外观。

要更新块，我正在使用函数：

```
function async_get(addr,func) {
    $.ajax({
       url: addr,
       async: false,
       success: func
    });
} 
```

它是这样称呼的：

```
async_get(
  'http://localhost/getfreelance/welcome', 
  function (data) {
     $('#header').html(data);
  }
); 
```

有什么解决办法吗？:)

图一： http: [//postimage.org/image/uxghnpgfb/](http://postimage.org/image/uxghnpgfb/)

图二： http: [//postimage.org/image/wj0v02md7/](http://postimage.org/image/wj0v02md7/)

* * *

您不明白，当 ajax 请求成功时，我需要更新/刷新 div 块，而不是我正在使用的函数 fffsuccess()：`'function async_get(addr,func) { $.ajax({ url: addr, async: false, success: func }); }'`并且我的 #header div 更新但它会复制数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:23:14.650

html:

```
<div id="YourImgDivID"></div> 
```

功能：

```
function fffsuccess(){ 
    alert('success!');
    $("#YourImgDivID").html('<img src="image1.png">');
}

function ffferror(){ 
    alert('error!');
    $("#YourImgDivID").html('<img src="image2.png">');
} 
```

利用：

```
$.ajax({
    url: 'ajax.cos.php',
    type: 'post',
    async: false,
    success: fffsuccess,
    error: ffferror
}); 
```

* * *

* * *

* * *

PS你可以换

```
$("#YourImgDivID").html('<img src="image2.png">'); 
```

至：

```
$("#YourImgDivID img").attr('src', 'image2.png'); 
```

* * *

或者

html到：

```
<div id="YourImgDivID"><img id="YourImgID" src="image105.png"></div> 
```

jQuery 到：

```
$("#YourImgDivID img#YourImgID").attr('src', 'image2.png'); 
```

任何

# twitter-bootstrap - 将动态数据从 AngularJS 显示到 Twitter Bootstrap Popover

> ID：11961233
> 
> 赞同：8
> 
> 时间：2012-08-14T21:43:20.280
> 
> 标签：twitter-bootstrap, angularjs, popover

我试图让 Bootstrap Popover 通过 AngularUI 直通处理 AngularJS 中的动态绑定数据。在我的小提琴中，我无法动态显示办公室位置的标题和每个办公室的人员名单：http: [//jsfiddle.net/stevenng/wmJtr/3/](http://jsfiddle.net/stevenng/wmJtr/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:56:59.783

您可以做到这一点的一种方法是仅`office`在`ui-options`像[这样的小提琴](http://jsfiddle.net/wmJtr/12/)中引用：

```
<div ng-repeat="office in offices">
  <a href="" ui-jq="popover" ui-options="{title:office.location, content:office.people.join(',')}">Test Popover - {{office.location}}</a>    
</div> 
```

您可以执行此操作的另一种方法是生成`ui-options`通过将当前项目传递给它的函数，就像[这个小提琴](http://jsfiddle.net/wmJtr/4/)一样。

使用这个 html 片段：

```
<div ng-repeat="office in offices">
  <a href="" ui-jq="popover" ui-options="popoverOptions(office)">Test Popover - {{office.location}}</a>    
</div> 
```

这个控制器代码：

```
$scope.offices = [
    {location:'Europe', people:['andy','gloopy']},
    {location:'USA', people:['shaun','teri']},
    {location:'Asia', people:['ryu','bison']}];

$scope.popoverOptions = function(office){
    return { title: office.location,
             content: office.people.join(',') };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T00:33:21.433

我们在这里工作的引导组件很少：[https](https://github.com/angular/angular.js/blob/v1.0.x/src/bootstrap/bootstrap.js) ://github.com/angular/angular.js/blob/v1.0.x/src/bootstrap/bootstrap.js也许您可以将其用作弹出窗口的灵感？

# php - 类别层次结构 - 检查级别

> ID：11961235
> 
> 赞同：0
> 
> 时间：2012-08-14T21:43:23.400
> 
> 标签：php, mysql

我使用此脚本创建具有层次结构类别的数组：

```
$refs = array();
$list = array();

$sql = "SELECT item_id, parent_id, name FROM items ORDER BY name";
$result = mysql_query($sql);
while($data = @mysql_fetch_assoc($result)) {
$thisref = &$refs[ $data['item_id'] ];

$thisref['parent_id'] = $data['parent_id'];
$thisref['name'] = $data['name'];

    if ($data['parent_id'] == 0) {
    $list[ $data['item_id'] ] = &$thisref;
    } else {
    $refs[ $data['parent_id'] ]['children'][ $data['item_id'] ] = &$thisref;
    }
} 
```

如何获得元素数组的级别？这是示例：

1.  猫 A *（0 级）*
    *   子类别 1 *（1 级）*
        *   Sub_Sub_Cat 1 *（2 级）*
        *   Sub_Sub_Cat 2 *（2 级）*
    *   Sub_Cat 2 *（1 级）*
2.  猫 B *（0 级）*
3.  猫 C *（0 级）*

这是来源：

[类别层次结构 (PHP/MySQL)](https://stackoverflow.com/questions/4452472/category-hierarchy-php-mysql/11949897#11949897)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:50:01.270

您还需要在构建列表时添加它。这基本上是两方面的：

*   如果一个元素没有父元素，它的级别为0。设置它。
*   如果一个元素有一个父级，则到达父级，选择该级别，向其添加一个并设置它。

根据您的数据的排序方式，这可以在您已经拥有的迭代中即时完成，或者您需要首先只添加那些在第一轮中没有父母的人，然后重新迭代并添加级别这些孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T12:18:21.763

您可以使用此功能获取所有级别的类别

```
function getChildCategories($id=0){
  global $db;
  $res = $db->getAllArray("SELECT item_id, parent_id, name FROM items  parent_id = '$id' ORDER BY name");
  $raws = array();  
  foreach($res as $raw)
  {
   $raws[$raw['id']]['data'] = $raw;
    $subCount = getChildCategories($raw['id']);
   if(count($subCount)>0){
        $raws[$raw['id']]['sub'] =  $subCount;
   }
  }
 return $raws;
} 
```

Cat A（0 级）
    Sub-Cat 1（1 级）
        Sub_Sub_Cat 1（2 级）
        Sub_Sub_Cat 2（2 级）
    Sub_Cat 2（1 级）
Cat B（0 级）
Cat C（0 级）

# c# - 从webservice开发的c#中读取数据库visual foxpro

> ID：11961237
> 
> 赞同：0
> 
> 时间：2012-08-14T21:43:28.923
> 
> 标签：c#, oledb, foxpro, dbf

我正在尝试从用 C# 和 64 位服务器开发的 Web 服务中读取 foxpro 表，但是打开表时出现错误：

System.Data.OleDb.OleDbException：**外部表不是预期的格式。** 为此，请使用 microsoft.ace12 提供程序。}

不幸的是，我不能在 64 位服务器上使用 oledb 32 位。

任何想法..对不起我的英语不好；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:48:25.460

您可以在 64 位机器上安装 32 位 VFP OLE-DB 驱动程序。然后看看[这个 SO question接受的答案](https://stackoverflow.com/questions/717/why-doesnt-vfp-net-oledb-provider-work-in-64-bit-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:49:46.403

您可以将此 Web 服务正在使用的应用程序池设置为使用 32 位。但如果您使用的是 MS Access Connectivity Engine 驱动程序 - 它有 64 位版本。

# sql - 如何防止 SQL 同时运行事务

> ID：11961245
> 
> 赞同：0
> 
> 时间：2012-08-14T21:44:13.517
> 
> 标签：sql, sql-server, select, transactions, transaction-isolation

我注意到 MS SQL 可能在前一个事务完成（或提交）之前开始另一个事务。有没有一种方法可以确保交易必须在下一个交易开始之前首先完成？

我的问题是我想在 SQL INSERT 之后几乎立即执行 SQL SELECT。我现在看到的是；当 SELECT 语句运行时；它不会返回（非常）最近插入的数据。

当我使用 SQL 分析器跟踪此场景时，我注意到 SQL INSERT 和 SELECT 同时执行，因为 SELECT 发生在 INSERT 完成之前。

有没有办法解决我的这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:18:47.800

从它的声音来看，您正在寻找`OUTPUT`子句

从文档[http://msdn.microsoft.com/en-us/library/ms177564.aspx中的示例](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

```
DECLARE @MyTableVar table( NewScrapReasonID smallint,
                           Name varchar(50),
                           ModifiedDate datetime);
INSERT Production.ScrapReason
    OUTPUT INSERTED.ScrapReasonID, INSERTED.Name, INSERTED.ModifiedDate
        INTO @MyTableVar
VALUES (N'Operator error', GETDATE()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:13:19.110

您可以在`SERIALIZABLE`隔离级别运行事务。这样，您将确保在插入之后执行选择。在较低的隔离级别中，选择是并行执行的，并返回数据的快照——在发出选择的事务启动之前，所有事务都已完成，这是一种查看方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T23:19:34.613

我猜你想在插入后得到一个自动生成的标识符？我不确定执行此操作的 MSSQL 方式，但在 PostgreSQL 中，有 INSERT ... RETURNING 扩展来解决这个问题。

[http://www.postgresql.org/docs/9.1/static/sql-insert.html](http://www.postgresql.org/docs/9.1/static/sql-insert.html)

您是否被锁定在 MSSQL 中？

# ruby - Ruby Docs Mixin 示例 - 参数数量错误

> ID：11961247
> 
> 赞同：0
> 
> 时间：2012-08-14T21:44:20.667
> 
> 标签：ruby

ruby-docs.org 教程[的模块部分介绍了](http://ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)Mixins的概念。给出的示例将第一个参数作为字符串引用并打印出来。但是我在代码中看到参数没有接收器，并且执行确实失败了`ArgumentError`

```
# Ruby module Mixin example.

module Debug
  def whoAmI?
    "#{self.type.name} (\##{self.id}): #{self.to_s}"
  end
end
class Phonograph
  include Debug
  # ...
end
class EightTrack
  include Debug
  # ...
end
ph = Phonograph.new("West End Blues")
et = EightTrack.new("Surrealistic Pillow")
ph.whoAmI? #»   "Phonograph (#537766170): West End Blues"
et.whoAmI? #»   "EightTrack (#537765860): Surrealistic Pillow" 
```

我的问题是修复此代码的**正确方法是什么？**另外，如果有人可以启发，教程中的示例怎么是错误的。ruby 版本之间有什么变化吗？

[tw-mbp13-skumaran ruby​​]$ ruby​​ ruby​​23.rb ruby​​23.rb:16:in `initialize': wrong number of arguments (1 for 0) (ArgumentError) from ruby23.rb:16:in`new' from ruby​​23.rb:16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:13:45.937

表示代码中`# ...`缺少几个方法。试试这个：[https ://gist.github.com/3353490](https://gist.github.com/3353490)

# jquery - 在浏览器重新加载时设置 onchange 事件

> ID：11961248
> 
> 赞同：2
> 
> 时间：2012-08-14T21:44:30.407
> 
> 标签：jquery, jquery-selectors

我有以下代码可以正常工作，因为它在选择是时显示输入框。我的问题是，如果在提交期间任何其他框出现错误并且占位符下拉设置为是，则它不显示 placeholderValue 输入框。

我该如何调整这段代码，所以如果我的代码出错并且输入框设置为是，它将显示 placeholderValue 输入框。

**jQuery：**

```
$("#add_fields_placeholder").change(function()
        {
            if($(this).val() == "yes")
        {
            $('label[for="add_fields_placeholderValue"]').show();
            $("#add_fields_placeholderValue").show();
        }
        else
        {

            $('label[for="add_fields_placeholderValue"]').hide();
            $("#add_fields_placeholderValue").hide();
        }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:50:21.403

在验证代码进行更新后，您需要`<select>`手动触发您的更改事件：`$("#add_fields_placeholder").trigger("change");`

# iphone - iphone应用程序在后台时在特定时间播放循环声音

> ID：11961256
> 
> 赞同：0
> 
> 时间：2012-08-14T21:44:58.370
> 
> 标签：iphone, objective-c

我有一个时钟闹钟应用程序，可以在特定时间播放声音（发送本地通知）。当应用程序放置在后台时，是否可以在特定时间（当本地通知到来时）播放循环声音？

只想指定：我需要播放循环声音，而不仅仅是一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:48:25.030

不，原因是因为本地通知，您将无法执行任何代码。你可以做的一件事，如果这是你的应用程序真正需要做的事情，这完全取决于你，它将这个应用程序列为你的 .plist 文件的 UIBackgroundModes 键上的音频应用程序，并且只需更改正在播放的歌曲它必须的时间。您可以使用 dispatch_after 块在您想要的时间更改歌曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:47:22.840

使您的应用程序成为长时间运行的后台应用程序，如此链接中[所述](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

# javascript - 如何使用 JavaScript/Jquery 在 xml 中的标签内显示多个元素

> ID：11961262
> 
> 赞同：0
> 
> 时间：2012-08-14T21:45:27.957
> 
> 标签：javascript, jquery, xml, xml-parsing

我需要从 xml 标签中获取元素的文本。该元素可以在同一个标​​签内重复多次。我能够获取标签内元素的出现次数，但我无法显示文本。我正在做这样的事情

```
 getTo=$(this).find('TO');//.text();
            alert("the lenght is ::"+getTo.length);
            getToNode=$(this).children('TO').text(); 
```

TO 元素在标签内重复。getTo.length 给了我标签内出现的次数。现在我想用文本之间的分隔符显示他们的文本。上面的代码为我提供了每个元素的文本。

请让我知道如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:50:51.863

看起来每个功能都会对您有所帮助。

[http://api.jquery.com/each/](http://api.jquery.com/each/)

# java - 如何保持前景图像的纵横比？

> ID：11961265
> 
> 赞同：1
> 
> 时间：2012-08-14T21:45:34.963
> 
> 标签：java, android, foreground

我目前有一个带有背景和前景图像的 FrameLayout。前景图像使用 alpha 具有透明度，以便看穿并观看下面的背景。

前景图像需要保持与原始位图相同的纵横比，因为它由黑屏中的透明圆圈组成，很像望远镜效果。我正在寻找任何分辨率兼容性。

不幸的是，我无法做到这一点，并且前景总是显示它的圆圈被拉伸。

这是**XML**代码的一部分：

```
<FrameLayout
    android:id="@+id/layout_parent"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background"
    android:foreground="@drawable/foreground"
    android:foregroundGravity="center|fill_horizontal"
> 
```

我还试图解决我的问题，提供两个不同的图像，一个具有 4:3 的比例，另一个具有 16:9 的比例，每个图像都位于具有**long**和**notlong**限定符的不同可绘制文件夹中。

```
/drawable-long/foreground.png (16:9 aspect)

/drawable-notlong/foreground.png (4:3 aspect) 
```

仍然没有成功。

你知道如何获得这种效果吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:58:31.733

在 FrameLayout 中更改此属性：

```
android:foregroundGravity="center" 
```

这会将前景可绘制对象放置在 FrameLayout 的中心，而不是更改其大小。

`"center|fill_horizontal"`将它放在中心并*拉伸*其宽度以填充 FrameLayout 宽度，这显然不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:51:28.677

我不相信您可以更改前景或背景的比例类型。我建议的是：

1.  `ImageView`在您的背景中放置一个额外的`FrameLayout`作为您的背景，并使用`src`和`scaleType`属性来处理图像及其缩放方式。

2.  由于它是一个简单的黑色背景，只有一个透明的圆圈，您可以将其转换为 9-patch，确保围绕圆圈均匀拉伸。圆圈不会缩放，但黑色区域会延伸以填充视图。

如果圈子也需要扩展，第 1 项是我个人的建议。

# c - 从图像创建 AR 标记

> ID：11961266
> 
> 赞同：1
> 
> 时间：2012-08-14T21:45:44.633
> 
> 标签：c, augmented-reality, marker, artoolkit

这些天来，我正在使用 ARToolKit，我面临着从静态图像创建 AR Marker 的必要性。因此，正如旧的 ARToolKit 时事通讯中所建议的那样，我开始编写自己的视频函数，当我执行 mk_patt.exe 时应该替换标准的 Win32DirectShow 函数。我的视频功能具有以下结构：

```
int arVideoOpen( char *config ) {
    return 0;
}

int  arVideoClose( void ){
    return 0;
}

int arVideoDispOption( void ){
    return 0;
}    

int arVideoInqSize( int *x, int *y ){
    *x = xsize; 
    *y = ysize; 
}

ARUint8 *arVideoGetImage( void )
{
    FILE *pFile;
unsigned long Size;
unsigned char *buffer;
size_t result;

    pFile = fopen("hhgf.bmp","rb");
    if(pFile==0){
        printf("Error!\n");
    }
    else{
        fseek(pFile, 0, SEEK_END);
        Size = ftell( pFile );
        printf("Size: %d \n",Size);
        fseek(pFile, 0, SEEK_SET);
        buffer = (unsigned char*) malloc (Size);
        if (buffer == NULL) {fputs ("Memory error",stderr); exit (2);}
            result = fread (buffer, Size,1, pFile);
        if (result != Size) {fputs ("Reading error",stderr); }
        return (ARUint8 *) buffer;
    }
}

int arVideoCapStart( void ){
    return 0;
}

int arVideoCapStop( void ) {
    return 0;
}

int arVideoCapNext( void )
{
    return 0;
} 
```

焦点方法是**arVideoGetImage**，它应该返回我的图像数据。我对 C 语言不是很熟悉，所以我在该方法中添加了一些我在网上找到的简单代码，但是当我运行 mk_patt.exe 时，它​​崩溃了。我需要一些关于如何编写代码的帮助，或者这是否是达到我的目的的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:09:07.783

我已经这样解决了

```
ARUint8 *getBack(){
    int i;  
    unsigned char *buffer;
    int Size;
    FILE *streamIn;
    int byte;
    int count = 0;
    //printf("What wath %d \n",AR_DEFAULT_PIXEL_FORMAT);
    if(!isDef){
        image = (int *) malloc(400*400*sizeof(int));
         streamIn = fopen("hhgf.bmp", "rb");

            fseek( streamIn, 0, SEEK_END);
            Size = ftell(  streamIn );
            fseek( streamIn, 0, SEEK_SET);

         if (streamIn == (FILE *)0){
           printf("File opening error ocurred. Exiting program.\n");
           exit(0);
         }

        for(i=0;i<(Size-(400*400));i++) byte= getc(streamIn);
        i=0;
        while((count=getc(streamIn))!=-1){
            image[i]=count;
            i++;
        }

        fclose(streamIn);

        isDef=true;
    }

    return (ARUint8 *)image;
}

ARUint8   *arVideoGetImage( void ){
            return getBack();
 } 
```

# jquery - jQuery 选项卡——同一个 div 的多个链接

> ID：11961267
> 
> 赞同：0
> 
> 时间：2012-08-14T21:45:49.820
> 
> 标签：jquery, tabs, tabbed

我有一个 jQuery 选项卡部分，其中包含几个 div 部分。整个顶部的每个部分都有一个链接，但我希望在 div 中也有相同的链接，以便在页面首次加载时也显示内容。基本上，有两种不同的方法可以访问隐藏的 div。我试图只复制顶部的链接，但如果我添加多个相同的链接，它似乎不起作用。我需要为每个链接添加另一个名称吗？

这是选项卡部分的代码：

```
$(document).ready(function() {
$("#content div").hide(); // Initially hide all content
$("#tabs li:first").attr("id","current"); // Activate first tab
$("#content div:first").fadeIn(); // Show first tab content

$('#tabs a').click(function(e) {
    e.preventDefault();
    if ($(this).closest("li").attr("id") == "current"){ //detection for current tab
     return       
    }
    else{             
    $("#content div").hide(); //Hide all content
    $("#tabs li").attr("id",""); //Reset id's
    $(this).parent().attr("id","current"); // Activate this
    $('#' + $(this).attr('name')).fadeIn(); // Show content for current tab
    }
}); 
```

});

这是HTML：

```
<a href="#" name="section1">Link One</a>
<a href="#" name="section2">Link Two</a>

<br><br>

<div id="section1">
My text and information goes here. <<ALSO WANT A LINK HERE TO OPEN THE SECOND DIV BELOW>>
</div>

<div id="section2">
My text and information goes here.
</div> 
```

# ruby-on-rails-3 - rails 3 routes new :new action 单数形式

> ID：11961271
> 
> 赞同：0
> 
> 时间：2012-08-14T21:46:14.850
> 
> 标签：ruby-on-rails-3, routes

我不知道我是否对这个挑剔，但你如何创建一个 :new 动作成员？

当我有

```
resources :posts, :except => [:show] do
  get :another_new, :on => :collection
end 
```

这给了我一个复数（在 routes 中`another_new_posts GET /posts/another_new(.:format)`）。

但是当我使用成员时，我确实得到了单数，但它需要一个 :id （在 routes 中`another_new_post GET /posts/:id/another_new(.:format)`）。

我如何创建另一个新的，在路线中会说`another_new_post`with `/posts/new`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:19:03.690

将它作为一个独立的部分放置在您的资源块之外：

```
match 'posts/another_new' => "posts#new", as: :another_new_post 
```

# android - 回收时，旧项目在列表视图或网格视图中可见一段时间

> ID：11961278
> 
> 赞同：1
> 
> 时间：2012-08-14T21:46:33.400
> 
> 标签：android, listview, gridview, recycle

这不是什么大问题，但看起来很奇怪。在列表或网格视图中，我延迟加载图像（例如从远程位置加载）。我正在使用 convertView 回收这些物品。当我快速向下滚动时，我看到重复的旧图像，直到获取正确的图像并替换它们。

有没有办法改变这个？例如，我尝试在开始时`getView()`（在初始化 convertView 之后，如有必要）将 imageView 可见性设置为`GONE`. 并`VISIBLE`在获取图像后设置。但由于某种原因，这不起作用（看起来仍然一样）。

谢谢！

编辑：我什至不确定这是否是使用回收视图时的正常行为，或者我做错了什么。当互联网连接速度很快或从文件系统获取时，它看起来不像是一个错误。然后新图像加载速度非常快，用户不会看到重复的项目。但是在缓慢的互联网连接上，它看起来像一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:54:27.763

在设置图像之前，只需检查图像是否属于视图内容。

我曾经遇到过同样的问题，我不得不更改我的图像下载器，以便它获取图像 url 以及元数据，这样一旦下载完成，我就可以将元数据与视图的数据进行比较。

# svn - 可以在 TeamCity 中禁用构建前的清理吗？

> ID：11961284
> 
> 赞同：3
> 
> 时间：2012-08-14T21:46:50.053
> 
> 标签：svn, build, teamcity, svn-checkout

我们有一个 TeamCity 构建服务器和一个相当大的 SVN 存储库，托管在不同的地理区域。每隔几天，TeamCity 就会决定丢弃 SVN 工作副本并执行干净的检查，这会增加一个多小时的构建过程。

是否可以禁用定期清洁？什么时候不能只对现有工作副本执行 SVN 清理/更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:34:57.013

此处描述的现象是[Automatic Clean Checkout](http://confluence.jetbrains.net/display/TCD7/Clean+Checkout#CleanCheckout-AutomaticCleanCheckout)，它可能由多种原因引起。可能的原因之一是[自动结帐目录清理](http://confluence.jetbrains.net/display/TCD7/Build+Checkout+Directory#BuildCheckoutDirectory-AutomaticCheckoutDirectoryCleaning)，可以轻松禁用。您可以通过以下链接在文档中找到更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T12:35:42.977

是的，目前有这样的选择。它有点隐藏，但仍然：

[https://www.jetbrains.com/help/teamcity/perforce-workspace-handling-in-teamcity.html#Forced+protection+against+clean+checkout](https://www.jetbrains.com/help/teamcity/perforce-workspace-handling-in-teamcity.html#Forced+protection+against+clean+checkout)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T06:03:34.030

在我看来，您有一个由不同模块组成的大型应用程序，并且您正试图在一个配置中构建所有内容。如果是这样，我建议为每个模块进行 TC 配置并设置从主应用程序到模块的依赖关系，依赖关系最好使用 maven 存储库或 TC 本身进行管理（不太方便）。

# apache-flex - 确保 Spark DataGrid 项目可见

> ID：11961286
> 
> 赞同：0
> 
> 时间：2012-08-14T21:46:57.747
> 
> 标签：apache-flex, flex4, flex-spark

有没有办法确保所选项目在 Spark DataGrid 中可见？

.

**上下文**
我有一个绑定到数组集合的数据网格。我远程接收到一项服务，该服务为我提供了集合中对象的 ID（字符串）。仅使用我循环遍历集合的字符串来查找与字符串匹配的项目。我通过它的 ID 找到对象。现在我有了要在数据网格中选择的对象。我可以设置

```
dataGrid.selectedItem = object; 
```

现在我需要确保它是可见的。我没有行或列索引。

.

**更新**
使用下面的答案，我用这个功能称赞了它：

```
 /**
     * Ensures the item is visible (for spark data grid)
     **/
    public function ensureItemIsVisibleInSparkDataGrid(datagrid:spark.components.DataGrid, item:Object):void {
        var list:IList = datagrid.dataProvider;
        var length:int = list.length;
        var itemFound:Boolean;
        var object:Object;
        var index:int;

        for (var i:int;i<length;i++) {
            object = list.getItemAt(i);

            if (object==item) {
                itemFound = true;
                index = i;
                break;
            }
        }

        if (itemFound) {
            datagrid.ensureCellIsVisible(index);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:57:30.503

Yes, it's called [`ensureCellIsVisible()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html#ensureCellIsVisible%28%29). You need to know that row and column of the item in question. To get this to work you'd need to listen for the [`selectionChange`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html#event%3aselectionChange) event then calculate the row and column of the currently selected item.

# javascript - Three.js 立方体，每个面上都有不同的纹理。如何隐藏边/顶点

> ID：11961288
> 
> 赞同：3
> 
> 时间：2012-08-14T21:47:16.740
> 
> 标签：javascript, three.js

我正在尝试在 Three.js 中创建一个立方体，在立方体的每个面上使用不同的图像作为纹理。

如何隐藏网格的边缘/顶点？

代码：

```
var container, camera, scene, renderer, cube;

init();
animate();

function init(){
    container = document.getElementById('container');
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.y = 150;
    camera.position.z = 500;
    scene.add( camera );

    var materials = [];
    for ( var i = 0; i < 6; i ++ ) {
        materials.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'img/' + i + '.png') } ) );
    }

    cube = new THREE.Mesh( new THREE.CubeGeometry( 200, 200, 200, 5,5,5, materials ), new THREE.MeshFaceMaterial() );
    cube.position.y = 150;
    scene.add( cube );
    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight);
    container.appendChild( renderer.domElement );
    }

function animate() {
    requestAnimationFrame( animate );
    render();
}

function render(){
    cube.rotation.y += 0.005;
    renderer.render( scene, camera );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:18:28.917

改变：

```
for ( var i = 0; i < 6; i ++ ) {
    materials.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'img/' + i + '.jpg') } ) );
} 
```

至：

```
for ( var i = 0; i < 6; i ++ ) {
    materials.push( new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'img/' + i + '.jpg'), overdraw: true } ) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:06:46.100

换行：

```
cube = new THREE.Mesh( new THREE.CubeGeometry( 200, 200, 200, 5,5,5, materials ), new THREE.MeshFaceMaterial() ); 
```

至：

```
cube = new THREE.Mesh( new THREE.CubeGeometry( 200, 200, 200, 1,1,1, materials ), new THREE.MeshFaceMaterial() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T19:19:17.960

尝试使用另一个渲染器。更改此行：

```
 renderer = new THREE.CanvasRenderer(); 
```

对此：

```
 renderer = new THREE.WebGLRenderer(); 
```

# asp.net - ASMX Web 服务 (ASP.net 2.0) - 可序列化字典未序列化

> ID：11961294
> 
> 赞同：0
> 
> 时间：2012-08-14T21:47:35.923
> 
> 标签：asp.net, web-services, xml-serialization, asmx

全部，

我有一个从 Web 方法返回的 ProjectBudget 类的实例。

前任：

```
[WebMethod()]
    public ProjectBudget LoadBudget(int id)
    {
       ProjectBudget  budget = BudgetManager.LoadBudget(id);
        return budget;
    } 
```

ProjectBudget 类包含以下定义：

```
 public class ProjectBudget
{
    public int Id = -1;
    public long VersionNumber = -1;
    public string QuoteNumber = "";
    public string CurrencyCode = "";
    public ProjectInfo Project;
    public ClientInfo Client;

    public readonly List<InventoryItem> Inventory = new List<InventoryItem>();
    public readonly List<Staff> Staff = new List<Staff>();
    public readonly List<CodeType> Departments = new List<CodeType>();
    public readonly SerializableDictionary<string, string> Tasks = new SerializableDictionary<string, string>();

    public ProjectBudget()
    {
    } 
```

}

您看到的所有公共字段都可以很好地序列化，但 XML 序列化程序完全忽略了 Tasks 字段。由于我们现在都知道字典不能由 XML 序列化器处理，所以我在这里使用可序列化字典（它只是一个实现 IXmlSerializable 的字典），但 XML 序列化器决定完全忽略它，即 XML 输出不包含任何任务和生成的代理类没有这个字段。

我需要弄清楚如何告诉 XML 序列化程序不要省略这个字段。

顺便说一句，有趣的是返回 SerializableDictionary 的 web 方法可以正常工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:58:16.943

与您的问题非常相似的问题似乎已经被问过：[Link](https://stackoverflow.com/questions/802711/serializing-private-member-data)。

根据[此](http://softwareblog.alcedo.com/post/2010/01/21/Readonly-collection-properties-and-XmlSerializer.aspx)链接，使用 DataContractSerializer 或尝试显式实现您的 getter（和 setter）。

# java - 如何使用 JNA winreg 写入 Windows 注册表？

> ID：11961295
> 
> 赞同：2
> 
> 时间：2012-08-14T21:47:37.737
> 
> 标签：java, windows, registry, jna

我正在寻找一种使用 Java 写入 Windows 注册表的方法。

我去了[https://github.com/twall/jna/blob/master/www/GettingStarted.md](https://github.com/twall/jna/blob/master/www/GettingStarted.md)，我得到了 hello world 测试。这表明我正确引用了该库并且可以正常工作。我在 winreg 类的注册表下载中没有看到任何测试或示例。JNA javadoc 对我来说甚至创建一个示例都没有意义。

这是[JNA Javadoc](http://twall.github.com/jna/3.4.1/javadoc/)的链接。

```
public static void main(String[] args) {

        Advapi32Util.registrySetIntValue(WinReg.HKEY_CURRENT_USER, 
                "Software\\Adobe\\Acrobat Reader\\10.0\\Privileged", "bProtectedMode", 0);
            }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:50:27.240

`Advapi32Util`在 JNA 平台 JAR 中有一个帮助程序类。您可能想查看[registryCreateKey()](https://java-native-access.github.io/jna/4.2.1/com/sun/jna/platform/win32/Advapi32Util.html#registryCreateKey-com.sun.jna.platform.win32.WinReg.HKEY-java.lang.String-)方法，以及此类中的其他注册表操作方法。

[我还在这里](http://code.dblock.org/jna-accessing-windows-registry-from-java)找到了一个非常简单的示例用法。

# file - 复制文件的内容

> ID：11961296
> 
> 赞同：1
> 
> 时间：2012-08-14T21:47:41.887
> 
> 标签：file, copy

当你这样做时：

```
cp file1 file2 
```

（`file2`已经存在）

幕后究竟发生了什么？

1) 的内容是否`file1`实际被复制到`file2`？

2) 还是创建了一个名称相同的新文件`file2`（覆盖旧文件），其内容相同`file1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:50:09.730

通常是第一个。索引条目和文件数据都被写入。
然而，了解你是什么（文件）系统会有所帮助（猜测 linux 风格）。

如果您正在创建连接点或符号/硬链接，您可能会知道。

可以这样想：
硬链接是一个指针/名称，它指向一个数据；即它只是一个替代文件名；它与创建它的文件具有相同的 inode 编号。

明显地复制，数据的副本；指向复制它的文件的不同方向；具有不同的 inode 编号。

系统调用也有区别，但这有点深入探讨问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:54:41.780

1）由于您使用的是“cp”，我假设操作系统是Linux。

2) 在 Linux 上，“文件”由“inode”引用。下面是两个示例文件：

```
$ ls -li 1 2
 245728 -rw-r--r--    1 paulsm   users           8 Aug 14 14:52 1
 245729 -rw-r--r--    1 paulsm   users           8 Aug 14 14:52 2

$ cat 1
Hello 1

$ cat 2
Hello 2 
```

3）这是“cp”之后的结果

```
$ cp 1 2
$ ls -li 1 2
 245728 -rw-r--r--    1 paulsm   users           8 Aug 14 14:52 1
 245729 -rw-r--r--    1 paulsm   users           8 Aug 14 14:55 2
$ cat 2
Hello 1 
```

你看：

a) “1”的内容完全取代“2”

b) 没有“新文件”——“2”的 inode 在复制之前保持不变

c) 文件*日期*随文件*内容而改变*

'希望有帮助.. PSM

# sql-server - 尝试在 SQL Server 2008 中使用动态 SQL 连接列名

> ID：11961300
> 
> 赞同：3
> 
> 时间：2012-08-14T21:47:55.880
> 
> 标签：sql-server, sql-server-2008

使用 SQL Server 2008，我想使用动态 SQL 指定内部联接的列名。我要加入的两个表对于我要加入的列具有相同的名称。我知道 SQL Server 不支持自然连接；如果是这样，动态 SQL 将如下所示：

```
DECLARE @join_columns   AS NVARCHAR(100)
DECLARE @sql_1          AS NVARCHAR(4000)

SET @join_columns = 'Age, Gender' 

SET @sql_1 = '
    SELECT ' + @join_columns + ', table_1.Field_x , table_2.Field_y
    FROM table_1 , table_2
    NATURAL JOIN ON ' + @join_columns

EXECUTE sp_executesql @sql_1 
```

现在，我意识到这行不通，因为[SQL Server 中没有自然连接](https://stackoverflow.com/questions/4826613/natural-join-in-sql-server)。那么，下一个最好的方法是什么？

以下是我未能成功追求的几件事：

*   标记`@join_columns`并形成一种动态`WHERE table_1.<col_1> = table_2.<col_1> [AND...]`的子句。但是，看起来 T-SQL 没有字符串标记化功能。

*   使用动态 SQL 制作临时表，每个表都有一个名为的新键列`temp_key`，它是`@join_column`. 如果动态连接这些很容易，那么最终的连接可能总是`ON #temp_table_1.temp_key = #temp_table_2.temp_key`. 一种设置方法是使用该`REPLACE`函数将逗号替换为`@join_column`加号。我在这里遇到的问题是连接需要对非`VARCHAR`列进行强制转换。所以，我必须提前知道列类型——回到第一方。

理想情况下，我想保留`@join_columns`为逗号分隔的字符串，因为我在动态 SQL`GROUP BY`子句的其他地方使用它。

可能是上述失败的方法之一可以使用我错过的东西。或者，也许有更好的整体方法。

有什么建议么？

## 更新

解决方案是下面@usr 和@Karl 的帖子的组合。我使用@usr 的建议来追踪一个标记化的表值 UDF（最终选择了[这个](http://www.spatialdbadvisor.com/sql_server_blog/136/string-tokenizer-for-sql-server-2008-written-in-tsql/)）。然后我使用@Karl 的`COALESCE`示例将结果表转换为`WHERE`子句。我还使用了@Karl 的完整示例来解决我刚刚遇到的另一个连接问题。我希望我能给两张海报提供答案状态 - 谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:02:31.157

将标记化/拆分功能封装在表值 UDF 中。这允许您以干净且架构合理的方式构建动态 SQL 字符串。您可以在 Web 上轻松找到此类拆分功能。遗憾的是它们不是内置的，但我们可以自己构建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:54:45.043

我发现这很好用：

```
declare @whereClause varchar(8000)
declare @table2 varchar(255)
declare @table1 varchar(255)

set @table1='SomeTable'
set @table2 = 'SomeOtherTable'

SELECT  COLUMN_NAME as [joincolumn]
into    #join_columns
FROM    INFORMATION_SCHEMA.COLUMNS
WHERE   TABLE_NAME = @table1
AND COLUMN_NAME not in ('list names of columns that are not to be joined on here')

select @whereClause=coalesce(@whereClause+' and ','')+ 
'['+@table2+'].'+joincolumn+'=['+@table1+'].'+joincolumn +'
'
from #join_columns

print @whereClause 
```

You can then create a dynamic SQL script and tag the WHERE clause to the back of it

# c# - C# 模式匹配 HTML

> ID：11961301
> 
> 赞同：0
> 
> 时间：2012-08-14T21:47:58.560
> 
> 标签：c#, regex, pattern-matching

我有一个允许用户编辑表格的网络应用程序。我已经覆盖了 Render 方法，以便将此表（带有编辑）保存为 .html 文件，稍后我将其转换为图像。图像中有一些我不想要的东西——特别是两个按钮和一个 DropDownList。这是呈现的感兴趣的 HTML：

```
<div class="centered" id="selectReport">
    <select name="Archives" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;Archives\&#39;,\&#39;\&#39;)&#39;, 0)" id="Archives" style="width:200px;">
        <option selected="selected" value="Dashboard_Jun-2012">Dashboard_Jun-2012</option>
    </select>
</div> 
```

这是 Render 方法：

```
protected override void Render(HtmlTextWriter writer)
{
    using (HtmlTextWriter htmlwriter = new HtmlTextWriter(new StringWriter()))
    {

        base.Render(htmlwriter);
        string renderedContent = htmlwriter.InnerWriter.ToString();

        string output = renderedContent.Replace(@"<input type=""submit"" name=""viewReport"" value=""View Report"" id=""viewReport"" />", "");
        output = output.Replace(@"<input type=""submit"" name=""redoEdits"" value=""Redo Edits"" id=""redoEdits"" />", "");

        Regex regex = new Regex(@"<select name=""Archives""[.\\n]*(?<date>\\w{3}-\\d{4})[.\\n]*</select>");
        Match match = regex.Match(output);
        Response.Write(match.Success);
        string date = match.Groups["date"].Value;
        Regex.Replace(output, @"<select name=""Archives""[.\\n]*</select>", date);

        writer.Write(renderedContent);
    }
} 
```

对 Replace 的两个调用按预期工作并删除了两个按钮。我试图用 DropDownList 做的是用它显示的值替换它，但是模式匹配失败，因为 Response.Write(match.Success) 打印“False”。

据我了解，这个正则表达式应该可以工作。当然，我尝试了很多替代方案，但没有任何成功。

任何建议表示赞赏。

问候。

# find - cmake 将哪个包名传递给 find_package

> ID：11961303
> 
> 赞同：1
> 
> 时间：2012-08-14T21:48:11.103
> 
> 标签：find, cmake, package

我正在尝试使用 cmake 链接 libconfig++ 库。我使用 apt-get 安装了这个库，所以我假设它会有一个 .cmake 文件，所以我可以使用 find_package。问题是我不知道要使用什么包名。我尝试将 libconfig、config、config++ 作为包名，但无济于事。

作为一个普遍的问题，如何找出与库相关联的包。

我知道 find_package 会查看 CMAKE_MODULE_PATH 以查看是否有 .cmake 脚本。如何找出系统上 CMAKE_MODULE_PATH 的值是什么。它不是环境变量。我正在运行 ubuntu 12.04。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:42:31.577

要使用 find_package，您需要有相应的 Find 或 Config cmake 文件。但是图书馆可能不提供它，看来你的图书馆就是这样的情况。您可以使用 find_library 查找库和 find_path 查找包含目录。使用这些命令，您甚至可以自己编写 FindXXX.cmake。

CMAKE_MODULE_PATH 不是环境变量，它是 CMake 的。如果您有带有模块的其他目录，则此变量旨在供您设置，默认情况下它是空的。这用于“模块”模式。在这种模式下，CMake 在 CMAKE_MODULE_PATH（您的模块）或 CMake 附带的模块中搜索 FindXXX.cmake，如果找到，则用于查找库及其标头。

如果未找到该模块，则它会切换到“配置”模式。在 Unix 上，它在以下目录中搜索 ConfigXXX.cmake：

```
<prefix>/(lib/<arch>|lib|share)/cmake/<name>*/
<prefix>/(lib/<arch>|lib|share)/<name>*/
<prefix>/(lib/<arch>|lib|share)/<name>*/(cmake|CMake)/ 
```

该文件随库一起提供，因此无需查找任何内容，它们包含所有信息，库和包含所在的位置等。

关于命名方案，没有标准的。您可以查看[标准 CMake 模块](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#section_StandardCMakeModules)。在 Internet 上为您的名为 FindLibConfig.cmake 的库找到的模块

对于您的情况，库没有相应的 cmake 文件，因此您应该自己编写（或找到已经编写好的）并将包含该文件的目录添加到 CMAKE_MODULE_PATH。

我建议您阅读[find_package 命令的工作原理](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3afind_package)以及[如何编写 FindXXX.cmake 文件](http://www.cmake.org/Wiki/CMake_FAQ#Writing_FindXXX.cmake_files)。

# web-services - 将 IOS 核心数据与 Web 服务同步？

> ID：11961304
> 
> 赞同：8
> 
> 时间：2012-08-14T21:48:11.810
> 
> 标签：web-services, ios5, core-data

**这是我的问题：**

*   我想使用核心数据——速度和连接问题来构建我的 IOS 应用程序。存储在核心数据中的数据来自 SQLServer 数据库，我可以通过尚未定义的 Web 服务访问该数据库。
*   对存储在核心数据中的数据的任何更改都需要通过 Web 服务与 SQLServer 同步。此外，我需要缓冲由于连接问题而未同步的更改。
*   我还需要使用服务器上发生的任何更改来更新核心数据。这可能发生在用户首选项中设置的时间表上。

**我探索过的解决方案：**

*   使用`NSIncrementalStore`类（IOS 5 中的新功能）。我对这到底是做什么感到非常困惑，但听起来很有希望。据我所知，您的子类`NSIncrementalStore`允许您拦截常规的核心数据 API 调用。然后，我可以将信息传递给核心数据，并通过 Web 服务将其与外部数据库同步。我可能完全错了。但是假设我是对的，如果与互联网的连接中断，我将如何同步增量？
*   `AFIncrementalStore`- 这是用于执行 Web 服务部分的子`NSIncrementalStore`类`AFNetworking`。
*   `RestKit`- 我有点担心这个 API 的活跃程度，它似乎正在过渡到阻止功能。有没有人广泛使用这个？

我倾向于，`AFIncrementalStore`因为这是使用（似乎是）更标准的方法。问题是，我可能完全不了解`NSIncrementalStore`真实情况。

一些示例代码或教程的链接会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:01:18.113

我对此的解决方案是将数据集的两个副本存储在 CoreData 数据库中。一个代表最后一个已知的服务器状态并且是不可变的。另一个由用户编辑。

当需要同步更改时，应用程序会在数据的已编辑副本和不可变副本之间创建差异。应用程序将 diff 发送到 Web 服务，该服务将 diff 应用于它自己的数据副本。它以数据集的完整副本进行回复，应用程序将其覆盖到其数据的两个副本上。

优点是：

*   如果没有网络连接，则不会丢失任何更改：每次需要发送数据集时都会计算 diff，并且仅在成功同步时才会更改不可变副本。
*   仅传输需要发送的最少量信息。
*   多人可以同时编辑相同的数据，而无需使用锁定策略，并且通过覆盖将数据丢失的可能性降至最低。

缺点是：

*   编写差异代码很复杂。
*   编写合并服务很复杂。
*   除非您是元编程大师，否则您会发现您的 diff/merge 代码很脆弱，并且每当您更改对象模型时都必须更改。

以下是我在制定策略时的一些考虑：

*   如果您允许离线进行更改，签入/签出锁定将不起作用（如何在没有连接的情况下建立锁定？）。
*   如果两个人同时编辑相同的数据会发生什么？
*   如果一个人在没有连接的情况下在一台 iOS 设备上编辑数据，将其关闭，在另一台设备上编辑，然后重新打开原始设备，会发生什么情况？
*   CoreData 的多线程本身就是一个完整的问题类。

我听说过的最接近开箱即用支持的远程操作是 iOS6 中新的 iCloud/CoreData 同步系统，当实体发生变化时，它会自动将实体从 CoreData 数据库传输到 iCloud。但是，这意味着您必须使用 iCloud。

编辑：这已经很晚了，我知道，但这是一个能够在两个 NSManagedObject 实例之间产生差异的类。

```
// SZManagedObjectDiff.h
@interface SZManagedObjectDiff

- (NSDictionary *)diffNewObject:(NSManagedObject *)newObject withOldObject:(NSManagedObject *)oldObject

@end

// SZManagedObjectDiff.m
#import "SZManagedObjectDiff.h"

@implementation SZManagedObjectDiff

- (NSDictionary *)diffNewObject:(NSManagedObject *)newObject withOldObject:(NSManagedObject *)oldObject {

    NSDictionary *attributeDiff = [self diffAttributesOfNewObject:newObject withOldObject:oldObject];

    NSDictionary *relationshipsDiff = [self diffRelationshipsOfNewObject:newObject withOldObject:oldObject];

    NSMutableDictionary *diff = [NSMutableDictionary dictionary];

    if (attributeDiff.count > 0) {
        diff[@"attributes"] = attributeDiff;
    }

    if (relationshipsDiff.count > 0) {
        diff[@"relationships"] = relationshipsDiff;
    }

    if (diff.count > 0) {
        diff[@"entityName"] = newObject ? newObject.entity.name : oldObject.entity.name;

        NSString *idAttributeName = newObject ? newObject.entity.userInfo[@"id"] : oldObject.entity.userInfo[@"id"];

        if (idAttributeName) {
            id itemId = newObject ? [newObject valueForKey:idAttributeName] : [oldObject valueForKey:idAttributeName];

            if (itemId) {
                diff[idAttributeName] = itemId;
            }
        }
    }

    return diff;
}

- (NSDictionary *)diffRelationshipsOfNewObject:(NSManagedObject *)newObject withOldObject:(NSManagedObject *)oldObject {

    NSMutableDictionary *diff = [NSMutableDictionary dictionary];

    NSDictionary *relationships = newObject == nil ? [[oldObject entity] relationshipsByName] : [[newObject entity] relationshipsByName];

    for (NSString *name in relationships) {

        NSRelationshipDescription *relationship = relationships[name];

        if (relationship.deleteRule != NSCascadeDeleteRule) continue;

        SEL selector = NSSelectorFromString(name);

        id newValue = nil;
        id oldValue = nil;

        if (newObject != nil && [newObject respondsToSelector:selector]) newValue = [newObject performSelector:selector];
        if (oldObject != nil && [oldObject respondsToSelector:selector]) oldValue = [oldObject performSelector:selector];

        if (relationship.isToMany) {

            NSArray *changes = [self diffNewSet:newValue withOldSet:oldValue];

            if (changes.count > 0) {
                diff[name] = changes;
            }

        } else {

            NSDictionary *relationshipDiff = [self diffNewObject:newValue withOldObject:oldValue];

            if (relationshipDiff.count > 0) {
                diff[name] = relationshipDiff;
            }
        }
    }

    return diff;
}

- (NSDictionary *)diffAttributesOfNewObject:(NSManagedObject *)newObject withOldObject:(NSManagedObject *)oldObject {

    NSMutableDictionary *diff = [NSMutableDictionary dictionary];

    NSArray *attributeNames = newObject == nil ? [[[oldObject entity] attributesByName] allKeys] : [[[newObject entity] attributesByName] allKeys];

    for (NSString *name in attributeNames) {

        SEL selector = NSSelectorFromString(name);

        id newValue = nil;
        id oldValue = nil;

        if (newObject != nil && [newObject respondsToSelector:selector]) newValue = [newObject performSelector:selector];
        if (oldObject != nil && [oldObject respondsToSelector:selector]) oldValue = [oldObject performSelector:selector];

        newValue = newValue ? newValue : [NSNull null];
        oldValue = oldValue ? oldValue : [NSNull null];

        if (![newValue isEqual:oldValue]) {
            diff[name] = @{ @"new": newValue, @"old": oldValue };
        }
    }

    return diff;
}

- (NSArray *)diffNewSet:(NSSet *)newSet withOldSet:(NSSet *)oldSet {

    NSMutableArray *changes = [NSMutableArray array];

    // Find all items that have been newly created or updated.
    for (NSManagedObject *newItem in newSet) {

        NSString *idAttributeName = newItem.entity.userInfo[@"id"];

        NSAssert(idAttributeName, @"Entities must have an id property set in their user info.");

        id newItemId = [newItem valueForKey:idAttributeName];

        NSManagedObject *oldItem = nil;

        for (NSManagedObject *setItem in oldSet) {
            id setItemId = [setItem valueForKey:idAttributeName];

            if ([setItemId isEqual:newItemId]) {
                oldItem = setItem;
                break;
            }
        }

        NSDictionary *diff = [self diffNewObject:newItem withOldObject:oldItem];

        if (diff.count > 0) {
            [changes addObject:diff];
        }
    }

    // Find all items that have been deleted.
    for (NSManagedObject *oldItem in oldSet) {

        NSString *idAttributeName = oldItem.entity.userInfo[@"id"];

        NSAssert(idAttributeName, @"Entities must have an id property set in their user info.");

        id oldItemId = [oldItem valueForKey:idAttributeName];

        NSManagedObject *newItem = nil;

        for (NSManagedObject *setItem in newSet) {
            id setItemId = [setItem valueForKey:idAttributeName];

            if ([setItemId isEqual:oldItemId]) {
                newItem = setItem;
                break;
            }
        }

        if (!newItem) {
            NSDictionary *diff = [self diffNewObject:newItem withOldObject:oldItem];

            if (diff.count > 0) {
                [changes addObject:diff];
            }
        }
    }

    return changes;
}

@end 
```

这里有更多关于它的作用、它是如何做的以及它的限制/假设的信息：

[http://simianzombie.com/?p=2379](http://simianzombie.com/?p=2379)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T22:29:27.620

使用 Parse 平台及其 IOS SDK 来构建和存储信息。它可以在本地缓存数据，因此您可以在没有连接时快速检索它。

# css - 如何使输入标签占据css中剩余的td空间？

> ID：11961312
> 
> 赞同：-1
> 
> 时间：2012-08-14T21:48:37.763
> 
> 标签：css

我在 td 中有 2 个标签

```
<td>
<label>some text</label>
<input type="text"/>
</td> 
```

我的目标是不要让这 2 个`<td>`标签`input`在`<label>`. 我怎样才能使用 CSS 做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:00:36.497

怎么样 - 唯一的缺点是，它增加了另一个`<div>`：

### CSS

```
div.a {
    width:      500px;
    border:     1px solid red;
}

div.a > label {
    float:      left;
}

div.a > div {
    display:    block;
    overflow:   hidden;
    border:     1px solid green;
}

div.a > div > input {
    width:      100%;
} 
```

### HTML

```
<div class="a">
    <label>Some text</label>
    <div>
        <input type="text"/>
    </div> 
</div> 
```

### 演示

[jsFiddle](http://jsfiddle.net/Nc9s8/)

# file - 检查两个文件是否存在（在shell脚本中）

> ID：11961313
> 
> 赞同：2
> 
> 时间：2012-08-14T21:48:41.817
> 
> 标签：file, shell

我正在编写一个 shell 脚本并尝试检查是否存在两个文件。这是脚本示例：

```
#!/bin/bash

if [[ [ -e File1Name ] -a [ -e File2Name ] ]]
then
  echo Yes
el
  echo No
fi 
```

并得到

```
script: line 5: conditional binary operator expected
script: line 5: syntax error near `-e'
script: line 5: `if [[ [ -e CA ] -a [ -e CA-draw ] ]]' 
```

我的脚本有什么问题并且需要修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:53:14.160

```
if [ -e File1Name -a -e File2Name ]
then
    echo Yes
else
    echo No
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:50:01.347

`[[`和都是`[`命令；您需要选择*其中一个*，并且仅将其与`if`.

# iphone - 使用 Xcode 获取 git

> ID：11961315
> 
> 赞同：2
> 
> 时间：2012-08-14T21:48:46.863
> 
> 标签：iphone, xcode, git

我在使用 git pull origin SomeBranch 时遇到了问题，因为当发生冲突时，有时我无法在 Xcode 中打开文件来解决冲突。

从我的阅读来看，虽然我可能是错的，但我认为 git fetch 抓取了代码，但还没有像 git pull 那样合并它。这如何与 Xcode 一起工作？

例如，在 Branch1 上的一台机器上，我进行了一些更改。

然后在机器 2 上，在 Branch2 上，我想获取 Branch1 的更改。

所以我做了这个

```
git fetch origin Branch2 
```

我的命令行输出是：

```
*branch      Branch2     -> FETCH_HEAD 
```

这是什么意思？当我转到我更改的文件的源文件时，我看不到任何更改。

我认为在 Xcode 中会发生什么，然后它会在该源文件中显示该文件的更改，然后该文件将被修改。只有当我提交时，它才会被添加到暂存区域，以便我可以将它与其他所有内容合并。但也许我理解不正确。想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:51:14.687

> 我认为 git fetch 抓取了代码，但还没有像 git pull 那样合并它。

对，那是正确的。`git merge`是更新您的工作目录的内容，这就是为什么...

> 当我转到我更改的文件的源文件时，我看不到任何更改。

`git fetch`检索表示更改的对象，*但不更新您的工作目录。*就是`git merge`这样。请记住，这`git pull`基本上是 a`git fetch`后跟 a `git merge`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:52:57.763

fetch 只是更新你的远程跟踪分支。

这允许您在将这些更改与您在本地拥有的内容集成之前检查从服务器中提取的内容。

您现在可以将这些更改合并或变基到您的本地分支（如果存在）。如果没有，您可以简单地

```
git checkout branch2 
```

如果是这样，

```
git merge origin/branch2 
```

或者

```
git rebase origin/branch2 
```

跳过这 2 步过程，只需

```
git pull origin branch2 
```

默认情况下将合并。您可以覆盖

```
git pull --rebase origin branch2 
```

您可以更改您的配置，以便拉动将始终变基而不是合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T07:35:29.373

对于 Git 存储库，您需要先保存所做的更改并将其提交到本地存储库，然后再从共享存储库更新更改。

> [https://developer.apple.com/library/ios/recipes/xcode_help-source_control_management/UpdatingorPullingChanges/UpdatingorPullingChanges.html](https://developer.apple.com/library/ios/recipes/xcode_help-source_control_management/UpdatingorPullingChanges/UpdatingorPullingChanges.html)

# c++ - 插入 HTML 页面抓取的不寻常的、意外的值

> ID：11961316
> 
> 赞同：2
> 
> 时间：2012-08-14T21:48:47.423
> 
> 标签：c++, sockets

我有一些代码使用 BSD 套接字从服务器获取网页并将其写入文件。以下是处理所有文件 I/O 以及使用套接字写入和读取的代码。请注意，这`_sockfd`是说话者和听者之间的有效套接字：

```
 FILE* resultFile;
    resultFile = fopen(resultFilename.c_str(), "w+");

    if (resultFile != 0)
    {
        // Construct the request
        std::stringstream requestBuilder("");
        requestBuilder << "GET " << directory << " HTTP/1.1\r\nHOST:" << _hostname << "\r\n\r\n";

        std::string request = requestBuilder.str();

        // Prepare to read the file and write it out
        int bufferSize(1024);
        char buffer[bufferSize];
        int bytesRead(1);

        // Send request
        int bytesWritten = write(_sockfd, request.c_str(), request.length());
        if (bytesWritten < 0)
        {
            std::cout << "Error on initial request send" << std::endl;
            return false;
        }

        // Read response
        while (bytesRead > 0)
        {
            bzero(buffer, bufferSize);
            bytesRead = read(_sockfd, buffer, bufferSize);

            if (bytesRead < 0)
            {
                std::cout << "WebCrawler -> ERROR: Could not read properly from socket" << std::endl;
                return false;
            }

            fputs(buffer, resultFile);
        }

        fclose(resultFile);
        _socketUsed = true; 
```

我期望此代码产生的结果类似于以下代码段：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<title>Serebii.net Pok&eacute;dex - #089 Muk</title>

<meta name="GENERATOR" content="Arachnophilia 4.0">
<meta name="FORMATTER" content="Arachnophilia 4.0">
<meta name="keywords" content="Pokemon, Pokédex, Muk (Pokémon),Muk, Diamond, Pearl, Platinum,     HeartGold, SoulSilver" />
<link rel="stylesheet" type="text/css" HREF="/style/dex.css">

</head>

<meta http-equiv="imagetoolbar" CONTENT="no">
    <link rel="stylesheet" type="text/css" HREF="http://www.serebii.net/spp-temp.css">
   <LINK REL="SHORTCUT ICON" HREF="http://www.serebii.net/favicon.ico">

<BODY  ondragstart="return false"  text=#000000 bottomMargin=0 bgcolor="#383838" 
leftMargin=0 topMargin=0 rightMargin=0>
    <table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse"     bordercolor="#111111" width="100%" height="1" background="http://www.serebii.net/BannerBg.jpg">
      <tr> 
```

但相反，它看起来像这样：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<title>Serebii.net Pok&eacute;dex - #089 Muk</title>

<meta name="GENERATOR" content="Arachnophilia 4.0">
<meta name="FORMATTER" content="Arachnophilia 4.0">
<meta name="keywords" content="Pokemon, PokÈdex, Muk (PokÈmon),Muk, Diamond, Pearl, Platinum,     HeartGold, SoulSilver" />
<link rel="stylesheet" type="text/css" HREF="/style/dex.css">

</head>

8c1
<meta http-equiv="imagetoolbar" CONTENT="no">
    <link rel="stylesheet" type="text/css" HREF="http://www.serebii.net/spp-temp.css">
   <LINK REL="SHORTCUT ICON" HREF="http://www.serebii.net/favicon.ico">

<BODY  ondragstart="return false"  text=#000000 bottomMargin=0 bgcolor="#383838" 
leftMargin=0 topMargin=0 rightMargin=0>
    <table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" height="1" background="http://www.serebii.net/BannerBg.jpg">
      <tr> 
```

如您所见，我的代码以某种方式在结果中插入了奇怪的字符（在本例中为“8c1”）。我想强调的是，这在整个 HTML 文档中多次发生。为简洁起见，我只是将自己限制在一个例子中。我怀疑我可能会以某种方式滥用缓冲区，但到目前为止我一直无法找到解决方案。

我之前为解决我的问题所做的努力包括以下 SO 问题：

[C Winsock 编程：输入垃圾](https://stackoverflow.com/questions/2026227/c-winsock-programming-input-garbage)

[原始套接字：接收器打印垃圾值](https://stackoverflow.com/questions/10704657/raw-sockets-receiver-printing-garbage-values)

我还参考了以下页面以确保我正确地执行 C 文件 I/O（我习惯于在 C++ 中使用 fstream）：

[http://www.cprogramming.com/tutorial/cfileio.html](http://www.cprogramming.com/tutorial/cfileio.html)

我对使用套接字进行网络编程非常缺乏经验（您可能会说），而且我确信这是我在某个地方犯的一个愚蠢的错误。对于那些比我更有经验的人：即使你不能直接指出我的解决方案，也请分享你对我可能出错的地方的想法。有时，我们需要找到答案的只是一些放置得当的面包屑。为此，如果我显示了错误的代码和/或您认为代码的另一部分可能更有帮助，请告诉我。

此外，这是我的第一个 SO 问题。请在您认为合适的情况下对其进行批评，以确保我未来的问题更好，更适合该网站。

****更新 1****（在 Mark Ransom 建议将 fputs 更改为 fwrite 之后）：

我`fputs(buffer, resultFile);`改为`fwrite(buffer, 1, bytesRead, resultFile);`. 我现在明白了，在这种情况下使用它更合适。

但是，我的问题仍然存在。事实上，我发现在新代码（和我的旧代码）连续执行 5 次后，我在原始问题中错误地称为“垃圾”值的错误值每次都完全相同。它们根本不是随机的。我已更改问题的标题以更恰当地描述我的问题。

经过一番摸索，我想`buffer`在读取产生与文件写入相同的结果后将该打印添加到控制台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:55:57.693

你得到一个缓冲区溢出，`fputs(buffer, resultFile);`因为写入并没有在缓冲区的末尾停止 - 它在它找到的第一个零字符处停止，它位于缓冲区末尾之后的内存中的某个随机点。改为使用`fwrite`。

# css - CSS @import 仅用于 Retina 显示

> ID：11961317
> 
> 赞同：0
> 
> 时间：2012-08-14T21:48:49.097
> 
> 标签：css, media-queries, retina-display

`@import`我的 main.css 文件顶部有一个为我的特定于视网膜的样式拉入retina.css 的文件。

是否可以添加媒体查询以*仅*在视网膜设备上`@import`显示retina.css 文件？我不希望在每个页面/每个设备上加载retina.css，并且我想将视网膜样式保存在一个单独的文件中。

 *```
@import "retina-styles.css";

/*** other styles below ***/ 
```

我不能在 中使用`<link rel="stylesheet" href="retina.css" media="only screen and (-webkit-min-device-pixel-ratio: 2)" />`，`<head>`因为开发人员想使用`@import`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:38:38.957

根据[MDN “@import”](https://developer.mozilla.org/en-US/docs/CSS/%40import)，可以在`@import`-statements 中使用媒体查询：

```
@import url;
@import url list-of-media-queries; 
```

所以这个应该可以工作（未经测试）：

```
@import url(retina.css) screen and (-webkit-min-device-pixel-ratio: 2); 
```

您可以在 Apple 的 Safari 开发人员库中阅读有关`-webkit-min-device-pixel-ratio`-property 的更多信息：“[支持的 CSS 规则](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safaricssref/Articles/OtherStandardCSS3Features.html#//apple_ref/doc/uid/TP40007601-SW1)”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T22:10:40.900

您可以使用 min-device-pixel-ratio 将所有视网膜样式包装在媒体查询中，然后只需将文件@import 到底部的现有 css 中。或者只是将样式包含在主 css 中，并围绕它们进行相同的媒体查询。*

# nginx - 如何设置带有 php 支持的窗口 nginx 虚拟目录？

> ID：11961323
> 
> 赞同：2
> 
> 时间：2012-08-14T21:49:18.900
> 
> 标签：nginx

Ngigx + PHP-FPM 设置并在根目录中工作，但我无法让虚拟目录工作。

我希望 //localhost/pb/test.php 执行 c:\opt\php\public\test.php 但它因“未指定输入文件”而中断。事实上，甚至 .html 文件都不起作用，但一旦工作，我希望 php 指令也能在 /pb 下工作。

当前的 nginx.conf：

```
server {
    listen       80;
    server_name  localhost;

    location / {
        root   html;
        index  index.html index.htm index.php;
    }

location /pb/ {
    root   /opt/php/public;
        index  index.html index.htm index.php;
}

location ~ \.php$ {
        fastcgi_pass    127.0.0.1:9123;
        fastcgi_index   index.php;
        fastcgi_param   SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    include         fastcgi_params;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:36:40.073

[http://nginx.org/en/docs/http/ngx_http_core_module.html#location](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)解释了 nginx 如何匹配位置。在这种情况下，您的前缀位置 /pb/ 将匹配，并且 nginx 永远不会到达 *.php 匹配位置

我会尝试设置一个命名位置（@bit 使它成为一个命名位置）：

```
location @fastcgi {
  fastcgi_pass    127.0.0.1:9123;
  fastcgi_index   index.php;
  fastcgi_param   SCRIPT_FILENAME  $document_root$fastcgi_script_name;
  include fastcgi_params;
} 
```

然后在其他位置的 try_files 指令中引用它，如下所示：

```
location /pb/ {
  root   /opt/php/public;
  index  index.html index.html;
  try_files $uri @fastcgi;
} 

location ~ \.php$ {
  alias @fastcgi;
} 
```

上面的尝试文件将首先尝试一个完全匹配的文件名，如果它没有找到它会将请求传递给@fastcgi 位置

或者，您可以简单地在 /pb/ 位置内的嵌套位置块中重复 fastcgi 位

# ios - 触摸在 TableView 上结束

> ID：11961327
> 
> 赞同：0
> 
> 时间：2012-08-14T21:49:53.437
> 
> 标签：ios, uitableview

我看到很多人在这里问这个问题，但我还没有看到任何好的解决方案。基本上我想检测用户何时完成滚动表格并释放他们的手指。我不想做任何事情，直到他们的手指离开屏幕或者我认为 scrollViewDidScroll 会起作用。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:22:43.043

UITableViewDelegate 符合 UIScrollViewDelegate 协议，提供了 scrollViewDidEndDragging:willDecelerate: 方法。

# php - 如果为空，如何使表单忽略密码字段（symfony2 表单）

> ID：11961331
> 
> 赞同：20
> 
> 时间：2012-08-14T21:50:14.163
> 
> 标签：php, forms, symfony

我的后端有一个简单的用户管理器，我希望能够在不设置新密码/每次都重复旧密码的情况下编辑用户。

现在，如果我在编辑用户时将密码字段留空，symfony2 会抱怨必须输入密码，当然我在注册新用户时想要这个功能，但是当我编辑它们时，我想要表单如果未填写密码框，请忽略它们。

这是如何实现的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-17T21:08:01.507

为了其他人的参考，我以这种方式解决了这个问题。

我的表单类型：

```
public function buildForm(FormBuilder $builder, array $options)
{   

    $builder
        ->add('username', 'text', array('label' => 'Servernamn '))            
        ->add('plainPassword', 'repeated', array('type' => 'password', 'first_name' => 'Lösenord för server ', 'second_name' => 'Upprepa lösenord för server',));

    $builder-> addValidator(new CallbackValidator(function(FormInterface $form){
      $username = $form->get('username')->getData();
        if (empty($username)) {
          $form['username']->addError(new FormError("Du måste ange ett namn för servern"));
        }
    }));

} 
```

我的更新操作：

```
public function updateServerAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('BizTVUserBundle:User')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Container entity.');
    }

    $originalPassword = $entity->getPassword(); 

    $editForm   = $this->createForm(new editServerType(), $entity);

    $request = $this->getRequest();

    $editForm->bindRequest($request);

    if ($editForm->isValid()) {

        $plainPassword = $editForm->get('plainPassword')->getData();
        if (!empty($plainPassword))  {  
            //encode the password   
            $encoder = $this->container->get('security.encoder_factory')->getEncoder($entity); //get encoder for hashing pwd later
            $tempPassword = $encoder->encodePassword($entity->getPassword(), $entity->getSalt()); 
            $entity->setPassword($tempPassword);                
        }
        else {
            $entity->setPassword($originalPassword);
        }

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('Server'));
    } 
```

因此，如果设置了我的用户密码，则更新我的用户密码，否则保留原始密码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-29T14:59:36.950

在您的密码属性的实体设置器上，使其如下所示：

```
/**
 * Set password
 *
 * @param string $password
 * @return User
 */
public function setPassword($password)
{
    if (!is_null($password)) {
        $this->password = $password;
    }

    return $this;
} 
```

诀窍是检查传递的参数是否为空，如果不是则仅设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T14:45:04.880

如果您需要将**所需**选项添加到 $options 数组。例子：

```
public function buildForm(FormBuilder $builder, array $options)
{   

    $builder
        ->add('username', 'text', array('label' => 'Servernamn '))            
        ->add('plainPassword', 'repeated', array(
                  'type' => 'password', 
                  'first_name' => 'password', 
                  'second_name' => 'repeat_password', 
                  'required' => false,
            ));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-15T11:12:24.313

我所做的是保持`UserType`原样，只删除控制器中的密码字段：

```
/**
 * @Route("/users/edit/{username}", name="user_edit")
 */
public function editAction(Request $request, User $user)
{
    $form = $this->createForm(UserType::class, $user);

    // Remove the password field when editing the user
    // Otherwise it must be entered each time the user is edited
    // We can change the password via a special edit-user-password page
    $form->remove('password');

    $form->handleRequest($request);

    if ($form->isValid()) {
        // ...
    }
} 
```

这样你就可以有一个单一的 UserType，在 editAction 和 newAction 中可以重用。

请务必在 .`$form->remove('password');`之前添加该行`$form->handleRequest($request);`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-23T08:30:21.783

有一篇文章提供了许多选项来满足您的要求，来自 Symfony2 食谱，特别是以下部分对我有用：

[根据基础数据自定义表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#cookbook-form-events-underlying-data)

下面是实现：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // ...
    $builder->addEventListener(FormEvents::PRE_SET_DATA, function(FormEvent $event) {
        $product = $event->getData();
        $form = $event->getForm();

        // check if the Product object is "new"
        // If no data is passed to the form, the data is "null".
        // This should be considered a new "Product"
        if (!$product || null === $product->getId()) {
            $form->add('name', 'text');
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-08T22:06:46.963

**Symfony 5 方法：**

在控制器类中：

```
/**
 * @Route("/user/{id}/edit")
 */
public function updateUser(
    $id, // See 'Route' annot., needed to `find()` User, adjust to your needs
    User $user,
    Request $request,
    UserPasswordEncoderInterface $passwordEncoder,
    UserRepository $userRepository
): Response {
    $form = $this->createForm(UserFormType::class, $user);

    // if password field is required by default, we have to `add()` it again
    // with `required` set to `false`
    $form->add( 
        'plainPassword',
        PasswordType::class,
        [
            // do not use Constraint NotBlank()
            'required' => false,
            'mapped' => false
        ]
    );

    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        $entity = $userRepository->find($id); // as above, adjust to your needs

        if (!$entity) {
            throw $this->createNotFoundException('User does not exist!');
        }

        $originalPassword = $entity->getPassword();

        /** @var User $user */
        $user = $form->getData();

        // keep original password if new one isn't provided
        if (!empty($form['plainPassword']->getData())) {
            $user->setPassword(
                $passwordEncoder->encodePassword(
                    $user,
                    $form['plainPassword']->getData()
                )
            );
        } else {
            // set old password
            $user->setPassword($originalPassword);
        }

        $em = $this->getDoctrine()->getManager();
        $em->persist($user);
        $em->flush();

        return new Response('User updated!');
    }

    return $this->render(
        'admin/user_edit.html.twig',
        [
            'requestForm' => $form->createView(),
        ]
    );
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-09-05T09:23:27.717

对于验证，使用 2 个不同的验证组并通过可调用函数设置正确的一个。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add(
        'oldPassword',
        PasswordType::class,
        [
            'constraints' => new UserPassword([
                'groups' => 'profile_password',
            ]),
            'mapped' => false,
            'required' => false,
        ]
    );

    $builder->add(
        'plainPassword',
        PasswordType::class,
        [
            'constraints' => new NotBlank([
                'groups' => 'profile_password',
            ]),
            'mapped' => false,
            'required' => false,
        ]
    );
}

/**
 * {@inheritdoc}
 */
public function configureOptions(OptionsResolver $resolver)
{
    $resolver->setDefaults(
        [
            'validation_groups' => function (FormInterface $form) {
                $newPassword = $form->get('plainPassword')->getData();
                $oldPassword = $form->get('oldPassword')->getData();
                if ($oldPassword || $newPassword) {
                    return ['profile', 'profile_password'];
                } else {
                    return ['profile'];
                }
            },
        ]
    );
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-08-14T21:57:27.713

你可以用

```
if (empty($password)) {
     //edit the password
} 
```

尝试将其修复到表单的 PHP 中。

# c# - 将 Internet Explorer 安全区域重置为默认级别

> ID：11961332
> 
> 赞同：1
> 
> 时间：2012-08-14T21:50:16.500
> 
> 标签：c#, internet-explorer, security

是否有 API 或任何可以将`Internet`区域重置为其默认值的东西（如箭头）。

我没有在 IInternetZoneManager 界面中找到任何方法来做到这一点。

![Internet Explorer 安全区域](../Images/78d8d2d79a8095f34fd56c9d1e63f5f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:54:27.263

您可能必须从您的代码更改注册表设置。
这将是一个很好的起点：

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings\Zones[Zone Number] 
```

区域编号为：
0 = 我的电脑
1 = 本地
2 = 受信任的站点
3 = Internet
4 = 受限

对于 Internet 区域 3（即 Internet 区域），您可能必须将 DWORD RecommendedLevel 的值复制到 CurrentLevel 的值。

参考：[高级用户的 Internet Explorer 安全区域注册表项](http://support.microsoft.com/kb/182569)

* * *

您是否尝试过使用[IInternetZoneManager::CopyTemplatePoliciesToZone 方法](http://msdn.microsoft.com/en-us/library/aa359120%28v=vs.85%29.aspx)，使用 dwTemplate 等于 0x00011000，这是推荐级别？

# html - 如何在电脑上下载PDF html代码

> ID：11961335
> 
> 赞同：1
> 
> 时间：2012-08-14T21:50:21.473
> 
> 标签：html, pdf, download

我正在创建一个按钮，它将下载 PDF 格式的原始文件。如果他们想通过浏览器阅读 PDF，我已经有一个缩放按钮。但是我想为用户提供下载文件的可能性，如果他喜欢的话，显然可下载的文件会有更高的质量。

我尝试了一些基本的编码，但问题是 PDF 是在浏览器中打开的。我没有使用任何 CMS，以后也不会使用，因此只需通过 html 代码上传照片并将图片放入正确的文件中，因此不存在数据库。这是我此刻使用的代码：

```
<a href="./_img/prensa/Photo_Nexus_Guide.pdf" target="_blank"><img class="icons_infobox" src="./_img/prensa/icon_download.png" alt="Download original file" /></a> 
```

这个网站需要跨浏览器兼容，所以我也会要求答案是浏览器友好的。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:44:27.740

你好好奇的人！！！

在收集和调查可以做什么之后，我找到了一些答案。我将只给出两个选项作为答案：

*100% 确定它会下载，但对用户来说不是很好*

- 唯一确定的方法是将可下载文件转换为 .zip。是的，它不太方便/优雅，但这肯定是浏览器必须下载此文件的方式。始终下载 ZIP 格式的文件。

*取决于用户的浏览器偏好*

- 是的，你不能完全确定，但它是一种非常接近的方法。您需要在下载 PDF 的文件夹中创建一个 .htaccess 文件。您需要创建此文件并将其放入以下代码：

```
SetEnvIf Request_URI "\.pdf$" requested_pdf=pdf
Header add Content-Disposition "attachment" env=requested_pdf 
```

我希望这对某人有所帮助。在我的网络中，它确实工作得很好。它在浏览器之间潜水，但它可以工作......你只需要知道会有一个 porcentage 会看到它显示在浏览器中而不是下载。

问候，

丹妮

# scala - 可以用与java相同的方式实例化scala类吗

> ID：11961339
> 
> 赞同：1
> 
> 时间：2012-08-14T21:50:47.283
> 
> 标签：scala

下面的类不编译，如果我将 Functions 声明为对象而不是类，我可以使用 Functions.fac(3) 运行方法 fac 。在 scala 中尝试运行这样的课程是否有意义？如何修改下面的代码以使其在不更改为 object 而不是 class 的情况下运行？

```
class Functions {

  def fac(n : Int) = {
    var r = 1;
    for(i <- 1 to n) r = r * i;
    r
  }
     def main(args:Array[String]) = {
      Functions f = new Functions();

      print(f.fac(3));
  }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T21:53:43.860

您的代码中最明显的问题是您有`Functions f = ...`. 这是 Java 语法，所以在 Scala 中你需要这样说`val f: Functions = ...`

其次，Scala 对静态和非静态事物的区分比 Java 更大。在 Scala 中，静态的东西（例如`main`方法）在对象中声明。因此，您应该将`object`（静态）部分与`class`部分分开。

第三，您的`fac`函数可以更简单地写为`(1 to n).product`.

最后，您不需要分号。

```
class Functions {
  def fac(n: Int) =
    (1 to n).product
}

object Functions {
  def main(args: Array[String]) = {
    val f: Functions = new Functions()
    print(f.fac(3))
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:56:32.940

Java 和 Scala 实现静态函数的方式非常不同。在 Java 中，您添加静态标识符，而在 Scala 中，您将方法放在对象伴侣中。

# javascript - 如何在javascript函数中传入多个参数并打印结果？

> ID：11961344
> 
> 赞同：-1
> 
> 时间：2012-08-14T21:51:06.433
> 
> 标签：javascript

`嘿伙计们。我正在创建一个程序，允许用户将数据输入文本框，然后将数据传递到不同的函数并返回结果以用于测试目的。

它们中的大多数都可以工作，但是我在使用包含 2 个或更多变量的函数传递数据时遇到了麻烦。

多参数函数只会打印第一个函数，然后停止。其余的工作正常。

这是一个例子

代码 ：

```
function testOne(1)
{}

function testTwo(1,2)
{}

function testThree(1,2,3)
{}

function printTests()
{
document.writeln("testOne" + testOne(inputOne.value)) //Works fine
document.writeln("testTwo" + testTwo(inputOne.value, inputTwo.value)) //Stops here
document.writeLn("testThree" + testThree(inputOne.value, inputTwo.value, 
inputThree.value)) //doesnt work, it stops at whatever method has 2 variables, prints it and then stops.
} 
```

我的输入看起来像这样。

```
<input type="text" id="inputOne">
<input type="text" id="inputTwo>
<input type="text" id="inputThree"> 
```

所以基本上我只希望我的文本值通过每个方法传递，并在单击按钮时显示返回。但是，如果该函数接受 2 个或更多变量，则它不起作用，因为它会正确打印该函数，但不会打印它后面的函数。

任何想法为什么？提前谢谢你，如果我犯了一个粗心的错误，我很抱歉，这是我的第一个问题，我是 Script 新手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:54:48.027

重写你的函数，使参数不是数字。

```
function testOne(var_one)
{}

function testTwo(var_one,var_two)
{}

function testThree(var_one,var_two,var_three)
{} 
```

这意味着您在函数内部使用的任何地方现在都`1`应该阅读`var_one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:54:56.920

变量名称不能以数字开头。

你的意思可能是这样的：

```
function testOne(input){ return input; }

function testTwo(first,second){ return "" + first + " " + second; }

function testThree(first,second,third){return "" + first + " " + second + " " + third; } 
```

# javascript - 单击 asp:checkbox 时会触发什么事件？

> ID：11961349
> 
> 赞同：0
> 
> 时间：2012-08-14T21:51:22.383
> 
> 标签：javascript, jquery, asp.net, user-controls

我有一些东西，取决于它是否被点击或未点击会做一些事情。问题是，我试图做一个 onclick 并且它不会触发。选择/取消选择复选框是否还需要其他一些东西？

ASP：

```
<div id = "gridDiv">
    Turn on/off some code: 
    <asp:Checkbox runat="server" name = "gridlock" id = "gridLockAttribute" />
</div> 
```

客户端：

```
$("#gridLockAttribute").click(function(){
   try{
      alert("test");
   }catch(err){

   }
}); 
```

它似乎没有警觉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:56:57.993

如果控件位于另一个控件中，ASP.NET 可能会对您的 ID 进行名称修改，因此诸如此类的操作`$("#gridLockAttribute")`将不起作用。你必须使用：

```
$("#<%= gridLockAttribute.ClientID %>") 
```

或者：

```
$('[id$=gridLockAttribute]') 
```

我更喜欢第一种方法。

此外，如果您试图让复选框自动回发，您需要将`AutoPostBack`复选框上的属性设置为`True`.

# ruby-on-rails - 访问模型中的 current_user；必须是记录和身份验证的更好方法

> ID：11961351
> 
> 赞同：3
> 
> 时间：2012-08-14T21:51:31.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我知道教条说不要在模型中访问 c​​urrent_user，但我并不完全同意。例如，当通过 rails 回调发生操作时，我想编写一组日志记录函数。或者当一个对象可以有多个人写入它时，简单地写谁写了一个更改（不像消息只有一个所有者）。在许多方面，我将 current_user 更多地视为应用程序的配置 - 换句话说，让这个应用程序响应这个用户。我宁愿通过模型 DSL 进行日志记录，而不是在看起来真的不合适的操作中。我错过了什么？

这个想法似乎相当不雅[访问模型中的 current_user](https://stackoverflow.com/questions/2513383/access-current-user-in-model)

这样做：[http ://rails-bestpractices.com/posts/47-fetch-current-user-in-models](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)

谢谢

**编辑＃1** 所以我的问题不是是否有可以进行审计/日志记录的宝石。我目前使用的是 paper_trail （虽然不再使用它，因为我可以在大约 10 行 ruby​​ 代码中完成相同的功能）；它更多的是关于是否永远不应该在模型中访问 c​​urrent_user - 我本质上想减少我的控制器代码并将逻辑下推到应该在的模型中。部分原因可能是由于 ActiveRecord 的历史，它本质上是一个围绕数据库表的包装器，RoR 多年来为其添加了很多功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:47:09.753

您已经给出了几个您想要完成的示例，我将分别介绍每个示例的解决方案：

> 当通过 Rails 回调发生操作时，我想编写一组日志记录函数

取决于您想要记录的方式（数据库与写入记录器）。如果你想记录到数据库，你应该有一个单独的记录模型，它从控制器获得适当的信息，或者简单地使用`belongs_to :user`类型设置。如果您想写入记录器，您应该在应用程序控制器中创建一个方法，您可以从您的创建和更新方法（或您想要回调的任何其他操作）调用该方法。

> 或者当一个对象可以有多个人写入它时，简单地写谁写了一个更改

```
class Foo < ActiveRecord::Base
  belongs_to :user, as: :edited_by
end

class FooController < ApplicationController
  def update
    @foo = Foo.find(params[:id])
    @foo.attributes = params[:foo]
    @foo.edited_by = current_user
  end
end 
```

我认为您误解了 Rails 中的模型的作用。它的范围是数据库。它不能访问current_user的原因，是因为当前用户没有存储在数据库中，它是一个会话变量。这与模型完全无关，因为这是没有浏览器*就无法*存在的东西。

ActiveRecord::Base 不是一个设计用于浏览器的类，它是与数据库一起工作的东西，而且只与数据库一起工作。您将浏览器用作该模型的接口，但该层需要访问浏览器特定的内容，例如会话变量，因为您的模型正在扩展一个实际上无法这样做的类。

这不是教条或风格选择。这是您的模型所扩展的类的限制的一个事实。这意味着您的选择基本上归结为从其他东西扩展，在控制器层中处理它，或者从控制器层将其传递给模型。在这种情况下，ActiveRecord 不会做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:05:01.330

您显示的两个链接（每个链接都显示相同的方法）与我仍然使用的方法非常相似。我将 current_user 存储在某个地方（实际上线程上下文是最安全的），然后在观察者中，我可以创建一种对观察模型的所有更改的审计日志，并且仍然记录用户。

这是一种非常干净的方法。

另一种更明确、更简洁但更 MVC 的替代方法是让控制器创建审计日志，有效地记录用户的操作，并减少对不同模型的影响。这可能也很有用，在一个网站上我们两者都做了。在控制器中，您知道当前用户，并且您知道操作，但它更冗长。

我相信您担心的是，这个提议的解决方案在某种程度上不够好，或者 MVC 不够，或者......什么？

另一个相关问题：[如何在 Rails 中为每个表创建完整的审计日志？](https://stackoverflow.com/questions/2381033/how-to-create-a-full-audit-log-in-rails-for-every-table)

还可以查看[经过审核](https://github.com/collectiveidea/audited)的gem，它也非常干净地解决了这个问题。

希望这可以帮助。

# sockets - 如何检索boost asio套接字文件描述符

> ID：11961352
> 
> 赞同：7
> 
> 时间：2012-08-14T21:51:32.740
> 
> 标签：sockets, boost

我正在使用 boost asio 开发一个侦听客户端连接的 tcp 服务器进程。客户端应该发送部分数据包。服务器进程在从客户端接收到整个数据包（页眉、数据和页脚）之前无法处理数据包。

为了处理部分数据包，服务器进程需要将来自每个客户端连接的数据包（或部分数据包）推送到队列中。服务器将为每个客户端连接维护一个队列。

现在我的问题是如何在使用 boost asio 时获取套接字文件描述符。我打算使用套接字文件描述符中的整数值并创建一个 std::map 容器来处理每个客户端连接的队列。

> std::map< int, std::deque< std::string >

如果检索套接字文件描述符不可行，那么最佳性能的替代方案可能是什么。我需要使用

> std::map<tcp::socket *,std::deque<std::string> > ?

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T14:37:25.273

套接字类继承了[`basic_socket::native_handle()`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/basic_socket/native_handle.html)成员函数，但是您应该真正考虑@David的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:00:18.600

当您调用各种接收函数时，将指针（或共享指针）传递给与该连接关联的结构。不需要来自套接字描述符的映射，因为您永远不需要触摸套接字描述符。

像这样：

```
boost::asio::async_read(socket, boost::asio::buffer(buf),
    boost::bind(&MyConnection::doRead, this, boost::asio::placeholders::error));

void MyConnection::doRead(const boost::system::error_code& error)
{
 // Here, we are in the object associated with this connection 
```

# amazon-ec2 - 我应该使用亚马逊的 AWS 虚拟私有云 (VPC)

> ID：11961353
> 
> 赞同：60
> 
> 时间：2012-08-14T21:51:45.413
> 
> 标签：amazon-ec2, amazon-web-services, amazon-vpc

目前正在从另一个 VPS 提供商迁移到 Amazon EC2。我们有您典型的 Web 服务器/数据库服务器需求。我们的数据库服务器前面的 Web 服务器。不能从 Internet 直接访问数据库服务器。

我想知道是否有任何理由将这些服务器放入 AWS 虚拟私有云 (VPC) 中，而不仅仅是创建实例并使用安全组将它们隔离开来。

我们并没有做任何花哨的事情，只是一个典型的网络应用程序。

有什么理由使用 VPC 或不使用 VPC？

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-15T13:29:36.750

**注意：AWS 中的新账户会立即启动并启用“默认 VPC”，并使“EC2-Classic”不可用。因此，与 2012 年 8 月相比，这个问题和答案现在更没有意义了。我将按原样保留答案，因为它有助于界定“EC2-Classic”和 VPC 产品线之间的差异。有关更多详细信息，请参阅[亚马逊的常见问题解答](http://aws.amazon.com/vpc/faqs/)。**

是的。如果您有安全意识、重度 CloudFormation 用户，或者想要完全控制自动缩放（与 Beanstalk 不同，Beanstalk 抽象了它的某些方面但仍然让您可以完全访问缩放参数），请使用 VPC。这篇[博](http://blog.kiip.me/engineering/ec2-to-vpc-transition-worth-doing/)文很好地总结了利弊。博客文章中的一些亮点（由[kiip.me](http://kiip.me)撰写）：

## EC2 有什么问题？

> 所有节点均可通过 Internet 寻址。这对于没有理由存在于全球互联网上的节点来说没有多大意义。例如：数据库节点不应有任何公共互联网主机名/IP。
> 
> 所有节点都在共享网络上，并且可以相互寻址。这意味着用户“Bob”启动的 EC2 节点可以访问用户“Fred”启动的任何 EC2 节点。请注意，默认情况下，安全组不允许这样做，但很容易撤消此保护，尤其是在使用自定义安全组时。
> 
> 没有公共与私有接口。即使您想禁用公共主机名上的所有流量，也不能。在网络接口级别，每个 EC2 实例只有一个网络接口。公共主机名和弹性 IP 被路由到“私有”网络。

## VPC 的优点

> 首先，与 EC2 相比，VPC 提供了难以置信的安全性。在 VPC 中启动的节点无法通过全球互联网、EC2 或任何其他 VPC 寻址。这并不意味着您可以忘记安全性，但与 EC2 相比，它提供了一个更明智的起点。此外，它使防火墙规则变得更加容易，因为私有节点可以简单地说“允许来自我们私有网络的任何流量”。我们从启动一个节点到拥有一个完全运行的 Web 服务器的时间从 20 分钟缩短到了大约 5 分钟，这完全是因为避免传播防火墙更改所节省的时间。
> 
> DHCP 选项集允许您指定新节点在 VPC 中启动时将使用的域名、DNS 服务器、NTP 服务器等。这使得实施自定义 DNS 变得更加容易。在 EC2 中，您必须启动一个新节点，修改 DNS 配置，然后重新启动网络服务才能获得相同的效果。我们在 Kiip 运行我们自己的 DNS 服务器以进行内部节点解析，而 DHCP 选项集使这一切变得轻松（在浏览器中键入east-web-001 而不是 10.101.84.22 更有意义）。
> 
> 最后，VPC 只是提供了一个更加真实的服务器环境。虽然 VPC 是 AWS 的独特产品，并且似乎将您“锁定”到 AWS，但如果您决定开始运行自己的专用硬件，VPC 采用的模型更类似于。如果您需要迁移到自己的硬件，事先掌握这些知识并围绕它建立现实世界的经验将是非常宝贵的。

这篇文章还列出了 VPC 的一些困难，所有这些或多或少都与路由有关：从 VPC 中获取 Internet 网关或 NAT 实例、在 VPC 之间进行通信、为您的数据中心设置 VPN。这些有时会让人很沮丧，而且学习曲线也不是微不足道的。尽管如此，仅凭安全优势可能就值得一试，而亚马逊的支持（如果您愿意为此付费）在 VPC 配置方面非常有帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-07T13:49:12.897

目前，VPC 与 EC2 相比具有一些有用的优势，例如：

*   每个实例多个 NIC
*   每个 NIC 多个 IP
*   安全组中的“拒绝”规则
*   DHCP 选项
*   可预测的内部 IP 范围
*   在实例之间移动 NIC 和内部 IP
*   VPN

据推测，亚马逊也将使用其中一些功能升级 EC2，但目前它们仅限于 VPC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T21:09:26.763

目前，VPC 是拥有内部负载均衡器的唯一方法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T22:01:10.473

如果您的应用程序需要访问 EC2 之外的服务器，例如，如果您有一个托管在您自己的物理数据中心且无法通过 Internet 访问的通用服务，则 VPC 非常有用。如果您要将所有 Web 和数据库服务器放在 EC2 上，则没有理由使用 VPC。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T11:15:17.293

如果您选择 RDS 来提供数据库服务，您可以配置**DB Security Groups**以允许来自给定**EC2 Security Groups**的数据库连接，那么即使您的 EC2 集群中有动态 IP 地址，RDS 也会自动创建防火墙规则以允许**仅来自您的实例**的连接，在这种情况下会降低 VPS 的优势。

另一方面，当您的 EC2 实例必须访问您的本地网络时，VPS 非常棒，然后您可以**在您的 VPS 和本地网络之间建立 VPN 连接**，控制 IP 范围、子网络、路由和传出防火墙规则，我认为不是你要找的。

我还强烈建议尝试使用[Elastic Beanstalk](http://aws.amazon.com/pt/documentation/elasticbeanstalk)，它提供了一个控制台，可以轻松为 PHP、Java 和 .Net 应用程序设置 EC2 集群，启用[Auto Scaling](http://aws.amazon.com/documentation/autoscaling)、[Elastic Load Balancer](http://aws.amazon.com/documentation/cloudwatch)和自动应用程序版本控制，从而可以轻松地从错误的部署中回滚.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-13T06:25:52.390

你在这里提出了一个很好的问题。

我想关注成本方面的可行性......

成本因素呢？

我认为您将按小时支付该服务器的费用。即使您选择每月 20 至 50 美元的实例，这也是您将在服务器的剩余生命周期中支付的费用。VPN 服务器是您可以在旧硬件上轻松设置的东西，非常便宜，甚至免费用于开源解决方案。

将 VPN 添加到现有的 AWS 服务器停放是有意义的，而在 AWS 上设置单独的 VPN 服务器则没有意义。我不认为这是最好的成本效益选择，但这只是我的看法。

谢谢，

艾丽莎

# sql - SQL - 加入 3 个表，但根据第一个表限制结果

> ID：11961355
> 
> 赞同：0
> 
> 时间：2012-08-14T21:51:51.503
> 
> 标签：sql, sql-server, sql-server-2008

这是我的情况的工作流程：

我有一个网站，允许注册用户注册当地奖品赞助商（即：企业）的奖品例如，可能有一个页面将必胜客作为奖品赞助商，注册/认证用户只需点击“输入绘图”，一旦他们这样做，他们就不能再次点击它。

以下是3张表：

1.  BD_Listing（此表为奖品赞助商，包括ListingID、Title、ContactPerson、Email、奖品等基本列）

2.  用户（此表是网站上的注册用户，包括用户ID、名字、姓氏、电子邮件等）

3.  PrizeEntry（此表是注册人数据所在的位置：EntryID、ListingID、User_ID、Date_Created）

现在所有这些都可以正常工作，只要将数据存储在数据库中。我的问题是选择。我在网站的 ADMIN 端构建了一个自定义模块，我想执行以下操作：

这是我的有效查询：

```
SELECT ListingID, Title, ContactEmail, PrizeSponsor
FROM [BD_Listing]
WHERE PrizeSponsor = 'True' 
```

如果我在网站上的表格中显示这些数据，它工作正常。问题是，我需要更多数据，特别是 PrizeEntry 表中的 User_ID。这个 User_ID 需要与 Users 表中的 UserID 连接，因为我需要从中提取他们的其他信息。

```
SELECT a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor
       b.ListingID, b.User_ID
       FROM BD_Listing a INNER JOIN PrizeEntry b ON a.ListingID = b.ListingID
       WHERE a.PrizeSponsor = 'True' 
```

现在，第一个问题出现了。如果有 20 个人注册必胜客，那么我将获得 21 行数据，这不是我想要的。这最终是我加入所有信息的代码及其推理，然后你可以告诉我我做错了多么愚蠢:)

```
SELECT a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor
       b.ListingID, b.User_ID
       c.UserID, c.FirstName, c.LastName, c.Email
       ,(SELECT COUNT(ListingID) AS EntryCount FROM PrizeEntry WHERE (ListingID = a.ListingID)) AS EntryCount
       ,(SELECT TOP 1 User_ID AS RandomWinner FROM PrizeEntry WHERE (ListingID = a.ListingID)ORDER BY NEWID()) as RandomWinner

       FROM BD_Listing a INNER JOIN PrizeEntry B on a.ListingID = b.ListingID
                         INNER JOIN Users C on b.User_ID = c.UserID
       WHERE a.PrizeSponsor = 'True' 
```

好的，所以在显示此数据的表中，我只希望必胜客显示一次，但因为它与 PrizeEntry 表连接，所以它显示了多次。

我想看看：

```
Business: Pizza Hut // comes from the BD_Listing table
Contact: John Doe  // comes from the BD_Listing table
Total Registrations: 20 // count from the PrizeEntry table
Random Winner: John Smith (UserID:10) // result from the subquery 
```

但是，每次注册奖品时，我都会看到每个企业的多行。

我为篇幅道歉......我是新来的，这是我的第二篇文章。并通过 SQL 的开始学习曲线。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:05:40.827

首先，如果有 20 个用户，您应该期望 20 行，而不是 21 行。

我认为您可以简化查询，只需删除用户的外部连接，即可获得您想要的：

```
SELECT a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor,
       (SELECT COUNT(ListingID) AS EntryCount FROM PrizeEntry pe WHERE (pe.ListingID = a.ListingID)) AS EntryCount,
       (SELECT TOP 1 User_ID AS RandomWinner FROM PrizeEntry pe WHERE (pe.ListingID = a.ListingID) ORDER BY NEWID()) as RandomWinner
FROM BD_Listing a
WHERE a.PrizeSponsor = 'True' 
```

您需要奖品赞助商的信息。相关的子查询获得附加信息。要获取有关获胜者的更多信息，只需将其设为子查询并加入相应的表，如下所示：

```
with t as (
         SELECT a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor,
                (SELECT COUNT(ListingID) AS EntryCount FROM PrizeEntry pe WHERE (pe.ListingID = a.ListingID)) AS EntryCount,
                (SELECT TOP 1 User_ID AS RandomWinner FROM PrizeEntry pe WHERE (pe.ListingID = a.ListingID) ORDER BY NEWID()) as RandomWinner
         FROM BD_Listing a
         WHERE a.PrizeSponsor = 'True'
        )
select t.*, u.Firstname, u.LastName, u.Email
from t join
     users u
     on t.RandomWinner = u.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:58:28.083

最简单的方法是两个做两个查询。第一个获取赞助商信息，第二个查询获取条目。

从技术上讲，这是 N+1 的情况（请参阅：[什么是 SELECT N+1？](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)），但我不会在这里担心。

从理论上讲，您可以一次获得所有内容，然后在前端循环遍历它，看看您是否已经打印了赞助商。问题是工作量太大，做 N+1 实际上要好得多。

现在，如果您想要不同的赞助商的摘要信息 - 您可以通过`GROUP BY`声明来做到这一点。

像这样：

```
SELECT a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor, COUNT(*) AS EntryCount
   FROM BD_Listing a INNER JOIN PrizeEntry B on a.ListingID = b.ListingID
                     INNER JOIN Users C on b.User_ID = c.UserID
   WHERE a.PrizeSponsor = 'True'
   GROUP BY a.ListingID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:05:56.737

由于连接的结构，您将获得所有匹配的组合：就目前情况而言，您无法获得其他任何东西。

您需要做的是首先获得参赛者并计算出您的获胜者，然后将其与列表相关联：

```
select a.ListingID, a.Title, a.ContactEmail, a.PrizeSponsor, d.userid, d.firstname, d.lastname, d.email
from BD_Listing a inner join (
    select top 1 listingid, userid, firstname, lastname, email from (
        select b.ListingID, c.UserID, c.FirstName, c.LastName, c.Email, newid() as ordering
        from PrizeEntry B INNER JOIN Users C on b.User_ID = c.UserID                    
    ) x order by ordering
) d on a.listingid = d.listingid 
```

# xml - 基于 nodeName 的 xpath 选择

> ID：11961364
> 
> 赞同：2
> 
> 时间：2012-08-14T21:52:30.087
> 
> 标签：xml, xslt, xpath

我有一个如下所示的 XML，我只想在 xslt 中使用 xpath 过滤选择“a”的元素“b”和“c”子元素

```
<a>
  <b>data_1</b>
  <c>data_1</c>
  <d>data_1</d>
  <e>data_1</d>
</a>
<a>
  <b>data_2</b>
  <c>data_2</c>
  <d>data_2</d>
  <e>data_2</d>
</a>
<a>
  <b>data_3</b>
  <c>data_3</c>
  <d>data_3</d>
  <e>data_3</d>
</a> 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:49:44.717

**首先，请注意您没有提供格式良好的 XML 文档**。根据定义，格式良好的 XML 文档必须有一个顶部元素。

**我假设在这个答案中，所有`a`元素都是这个单一顶级元素的子元素，问题中没有显示。**

* * *

**使用**：

```
/*/a/*[self::b or self::c] 
```

这将选择任何元素，该元素是`b`或`c`并且是作为`a`XML 文档顶部元素的子元素的任何元素的子元素。

请注意，当前接受的答案不正确：

```
/a/*[self::a or self::b or self::c] 
```

它不仅假设只有一个`a`顶部元素（实际上不存在），而且给定一个特定的 XML 文档，除了想要的元素之外，它还会选择`a`作为顶部元素的子元素的任何元素`a`。

我在上面推荐的 XPath 表达式：

```
/*/a/*[self::b or self::c] 
```

比其他答案之一中提出的另一个正确的 XPath 表达式更有效：

```
/a/b | /a/c 
```

这需要分别评估`/a/b/`，`/a/c`然后对两次评估的结果进行集合并集。

我推荐的 XPath 表达式只需要对文档进行一次扫描，不需要联合，即使在流模式下也可以在无限大小的巨大 XML 文档上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:43:41.393

在 XPATH 2.0+ 中，选择 b & c 的最简单表达式是 ...

```
/a/(b|c) 
```

请注意，在 XPATH 2.0 中，如果您不需要按文档顺序对节点进行排序，您还可以使用 ...

```
/a/(b,c) 
```

在 XPATH 1.0 中，您需要...

```
/a/b | /a/c 
```

# maven - 在 Netbeans 在 Glassfish 上热部署

> ID：11961369
> 
> 赞同：1
> 
> 时间：2012-08-14T21:53:02.063
> 
> 标签：maven, netbeans, compilation, glassfish, hotdeploy

我有一个包含多个应用程序的项目。我有一个战争和一个 EAR 包。我正在使用 Glassfish、Netbeans 和 Maven。

问题是每次我在 jsf 页面中进行小改动时，我都必须构建项目并从一开始就在服务器上运行它（部署）。

此外，我已将 WAR 的构建 -> 编译“保存时编译”属性更改为“仅用于应用程序执行”。同样在项目属性运行-> 我已启用保存时部署。

我仍然必须从头开始重新部署它才能看到变化。请帮忙，这需要我的时间！

谢谢，萨拉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:31:35.160

确保 PROJECT_STAGE 设置为 Development。如果它在生产中，您的 JSF 实现可能会缓存已编译的版本，并且不会检查磁盘上的更改。

您的 web.xml 中应该有类似的内容

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param> 
```

顺便说一句，我只在 netbeans java-ee 项目中使用过一次 maven，使用 maven 比普通的 netbeans 项目慢。如果我没记错的话，maven 总是会建立新的战争并进行部署。netbeans 项目执行所谓的就地部署，这意味着它直接使用项目中的文件，因此即使不重新部署，也可以获取对例如 JSF 页面或 CSS 的任何更改。仅在更改 java 代码和部署描述符时才需要重新部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:08:22.473

NetBeans 提供了“保存时部署”功能。但是，它仍会重新部署完整的应用程序。尽管它声称能够保留会话，但它仍然需要时间。

您可能想查看[JRebel](http://zeroturnaround.com/software/jrebel) - 可以立即处理应用内更新的 JVM 插件。

NetBeans 7.1 的插件可在此处获得：[http](http://plugins.netbeans.org/plugin/22254/jrebel-netbeans-plugin) ://plugins.netbeans.org/plugin/22254/jrebel-netbeans-plugin 对于 NetBeans 7.2，该插件正在开发中。

# asp.net - 单击按钮时呈现局部视图

> ID：11961374
> 
> 赞同：10
> 
> 时间：2012-08-14T21:53:40.713
> 
> 标签：asp.net, asp.net-mvc, partial-views

我有索引视图：

```
@using System.Web.Mvc.Html
@model  MsmqTestApp.Models.MsmqData
<!DOCTYPE html>
<html>
<head>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width" />
    <title>MsmqTest</title>
</head>
<body>
    <div>
        <input type="submit" id="btnBuy" value="Buy" onclick="location.href='@Url.Action("BuyItem", "MsmqTest", new { area = "Msmq" })'" />
        <input type="submit" id="btnSell" value="Sell" onclick="location.href='@Url.Action("SellItem", "MsmqTest", new { area = "Msmq" })'" />
    </div>
    <div id="msmqpartial">
    @{Html.RenderPartial("Partial1", Model); }

    </div>
</body>
</html> 
```

和部分：

```
@using System.Web.Mvc.Html
@model  MsmqTestApp.Models.MsmqData

    <p>
        Items to buy
        @foreach (var item in Model.ItemsToBuy)
        { 
            <tr>
                <td>@Html.DisplayFor(model => item)
                </td>
            </tr>
        }
    </p>
    <p>
        <a>Items Selled</a>
        @foreach (var item in Model.ItemsSelled)
        { 
            <tr>
                <td>@Html.DisplayFor(model => item)
                </td>
            </tr>
        }
    </p> 
```

和控制器：

```
 public class MsmqTestController : Controller
    {
        public MsmqData data = new MsmqData();

        public ActionResult Index()
        {

            return View(data);
        }

        public ActionResult BuyItem()
        {
            PushIntoQueue();
            ViewBag.DataBuyCount = data.ItemsToBuy.Count;
            return PartialView("Partial1",data);
        }
} 
```

当我单击一个按钮只是部分视图渲染时，如何做到这一点，现在控制器想要将我移动到 BuyItem 视图；/

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T06:23:22.347

首先要做的是引用jQuery。现在你只引用了`jquery.unobtrusive-ajax.min.js`这个脚本，但是这个脚本依赖于 jQuery，所以不要忘记在它之前包含：

```
<script src="@Url.Content("~/Scripts/jquery.jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

现在回答您的问题：您应该使用带有 HTML 表单的提交按钮。在您的示例中，您没有表单，因此使用普通按钮在语义上会更正确：

```
<input type="button" value="Buy" data-url="@Url.Action("BuyItem", "MsmqTest", new { area = "Msmq" })" />
<input type="button" value="Sell" data-url="@Url.Action("SellItem", "MsmqTest", new { area = "Msmq" })" /> 
```

然后在一个单独的 javascript 文件中通过订阅`.click()`事件来 AJAXify 那些按钮：

```
$(function() {
    $(':button').click(function() {
        $.ajax({
            url: $(this).data('url'),
            type: 'GET',
            cache: false,
            success: function(result) {
                $('#msmqpartial').html(result);
            }
        });
        return false;
    });
}); 
```

或者，如果您想依赖 Microsoft 不显眼的框架，您可以使用 AJAX 操作链接：

```
@Ajax.ActionLink("Buy", "BuyItem", "MsmqTest", new { area = "Msmq" }, new AjaxOptions { UpdateTargetId = "msmqpartial" })
@Ajax.ActionLink("Sell", "SellItem", "MsmqTest", new { area = "Msmq" }, new AjaxOptions { UpdateTargetId = "msmqpartial" }) 
```

如果你想要按钮而不是锚点，你可以使用 AJAX 表单：

```
@using (Ajax.BeginForm("BuyItem", "MsmqTest", new { area = "Msmq" }, new AjaxOptions { UpdateTargetId = "msmqpartial" }))
{
    <button type="submit">Buy</button>
}
@using (Ajax.BeginForm("SellItem", "MsmqTest", new { area = "Msmq" }, new AjaxOptions { UpdateTargetId = "msmqpartial" }))
{
    <button type="submit">Sell</button>
} 
```

从我所见，您已经将`jquery.unobtrusive-ajax.min.js`脚本包含到您的页面中，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:36:43.423

也许不是您正在寻找的解决方案，但是，我会忘记部分并使用 Javascript 调用服务器以获取所需的数据，然后将数据作为 JSON 返回到客户端并使用它将结果异步呈现到页面。

**JavaScript 函数；**

```
var MyName = (function () {

//PRIVATE FUNCTIONS
var renderHtml = function(data){
   $.map(data, function (item) {
       $("<td>" + item.whateveritisyoureturn + "</td>").appendTo("#msmqpartial");
   });
};

//PUBLIC FUNCTIONS
var getData = function(val){
   // call the server method to get some results.
    $.ajax({ type: "POST",
        url: "/mycontroller/myjsonaction",
        dataType: "json",
        data: { prop: val },
        success: function (data) {
            renderHtml();
        },
        error: function () {
        },
        complete: function () {
        }
    });
};

//EXPOSED PROPERTIES AND FUNCTIONS
return {
    GetData : getData
};

})(); 
```

**在服务器上......**

```
public JsonResult myjsonaction(string prop)
        {
            var JsonResult;

            // do whatever you need to do

            return Json(JsonResult);
        } 
```

希望这可以帮助....

# android - 在 android 上查看寻呼机和播放视频

> ID：11961378
> 
> 赞同：0
> 
> 时间：2012-08-14T21:53:54.947
> 
> 标签：android, memory, android-viewpager, android-videoview

我有一个viewpager，其中有两个视图。在第一个视图中，我有一个视频列表，而在另一个视图中，我播放了视频。

问题是当我在第二个视图上播放视频时，如果我想回到第一个视图，视频中会剩下一个黑色矩形。它会在几秒钟后消失。

我正在使用运行 ICS 的 Galaxy Note。

可能是因为内存使用？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T23:08:16.003

我很久以前通过将videoview的背景颜色设置为某种颜色然后在VideoPrepared（）上将其设置为“0”来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:17:31.670

那么，当您开始拖动页面时，您是否“停止（）”视频？

如果没有，那么您需要向 viewpager 添加一个 OnPageChangeListener，因此当您开始滚动/拖动页面时，您会停止 videoview，这应该可以解决您的问题，更有可能是出于优化原因不想播放视频拖动页面，因此在移动时放置视频的“图片”。

# java - JSF + Hibernate 表单问题

> ID：11961392
> 
> 赞同：0
> 
> 时间：2012-08-14T21:54:43.270
> 
> 标签：java, hibernate, jsf

我有一个用作表单的一部分的 Hibernate 实体类。

```
@Entity
@Table(name= "Contests")
public class Contest implements Serializable, Cloneable {
private Long id;
private String name;

 ...
} 
```

然后我通过托管 bean 创建对象。然后我在表单中引用托管 bean。但是，每次对对象进行表单发布时，它都会进行休眠选择并丢失其值。有没有办法让hibernate分离对象并让我在我想要的时候坚持它？

谢谢，格雷姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:43:46.670

Actually, I'm dumb. All I needed to do was an ajax update on the form, and wha-la it fixed it. Thanks for the responses.

# java - 如何使用 Selenium 处理 Windows 身份验证

> ID：11961395
> 
> 赞同：1
> 
> 时间：2012-08-14T21:54:51.593
> 
> 标签：java, selenium-webdriver, testng

我正在尝试使用 selenium 和 Java 自动化一个过程。我正在尝试导航到测试确实执行的 URL。Firefox 顶部会弹出一个屏幕，要求输入用户名和密码。当此屏幕弹出时，萤火虫停止工作，我无法获得有关此屏幕的任何信息。

当我找不到任何关于它的信息时，如何处理与 Selenium 的模态对话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:38:31.173

我猜，您正试图访问受 HTTP 身份验证保护的页面。尝试像这样到达这里：

```
driver.get("http://username:password@your-site.com"); 
```

哪里`driver`被假定为健康和生活的实例`WebDriver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:35:47.250

这实际上不起作用，对话框仍然显示。我没有像我想要的那样在 Firefox 中运行测试，而是在使用 NTLM 的 IE 中运行它们，所以我不需要输入我的信息。

# java - 以跨平台方式启动 Java 应用程序

> ID：11961397
> 
> 赞同：1
> 
> 时间：2012-08-14T21:54:58.777
> 
> 标签：java, deployment, installation, desktop-application

我有一个 Java 程序，假设它叫做 MyApp.jar

要在 Linux 上运行它，我只需编写一个名为 myapp.sh 的 shell 脚本，它只需运行`java -jar MyApp.jar`并双击它即可。一切正常。

在 Windows 7 上，我不能假设该`java`命令将在每个人的路径中（如果这就是您在 Windows 上所说的），所以我必须有一个解决方法并执行一些操作，例如在其中创建一个批处理脚本：`"C:\Program Files (x86)\Java\jre6\bin\java.exe" -jar MyApp.jar`，这显然是一个糟糕的解决方案......它在 XP 或 Vista 上不起作用。但它适用于*大多数*Windows 7 机器。

我的应用程序以 .zip 文件的形式发布，用户将其解压缩到 MyApp 文件夹中，然后理想情况下双击*某些*内容来调用程序。到目前为止，它有一个供 Linux 用户双击的 .sh 脚本和一个供 Windows 7 用户使用的批处理脚本（它在*大多数*情况下都有效）。它在自己的目录 (MyApp) 中创建和使用文件。

以跨平台方式调用此程序的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:34:15.567

正如 biziclop 所提到的，[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)通常用于安装/启动/更新 Java 桌面应用程序。

就 JRE 而言，通常使用`deployJava.js`上面该页面的链接就足以确保安装最少必要的 JRE，并使用 JNLP 文件中的元素指定应用程序支持的任何 JRE 微版本。

### 应用程序启动

当操作系统支持时，JWS 可以安装桌面快捷方式和菜单项。这些可以在启动文件中指定，或者在运行时使用 JNLP API 的服务添加/删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:02:54.637

Java 应用程序需要在目标系统上安装具有特定版本的 Java 运行时环境。

在我看来，最方便的方法是将所有库和文档放在一个存档中，并为 windows 和 *nix 系统添加启动脚本。

您也可以将 JRE 与您的应用程序一起发布，但是您必须支持针对不同平台的构建...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:07:24.273

如果您的应用程序无法交付 Java，那么使用 JAVA_HOME 启动它可能是一个很好的解决方案。它设置在，嗯......不是所有系统，而是许多系统。绝对不应该使用 C:\Program Files (x86) ... 使用环境变量 %ProgramFiles% 会更好

# sql-server - 如何忽略 SQL Server 中的索引

> ID：11961398
> 
> 赞同：1
> 
> 时间：2012-08-14T21:55:01.837
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我发现其中一个索引正在减慢我的查询速度……但我不能删除它，因为它在其他地方使用，而且它似乎是该查询的一个很好的索引。

SQL Server 2005+ 中有没有一种方法可以忽略查询中的索引？

# python - 是数字、aplha 还是数学符号

> ID：11961399
> 
> 赞同：1
> 
> 时间：2012-08-14T21:55:03.653
> 
> 标签：python

我有一个记录器可以监听方程式等序列，但我需要删除所有按键，如“L_control”或“shift”，我所做的是获取 ascii 编号，然后使用 chr(event.Ascii) 但它又回来了将 ctrl 和 shift 按下作为空格。

我目前正在使用它来删除所有我不想要的字符，但它似乎不起作用。有什么改进的想法吗？

```
def removeChars(l):
    acceptedChars = ["[", "]", "+", "-", "/", "*", "^", "*", "(", ")"]
    newL = ""
    for x in range(0, len(l)):
        if l[x].isalpha() or l[x] in acceptedChars or l[x].isdigit():
            newL = newL + l[x]
    return newL 
```

* * *

编辑：

我`pyHook`用于获取关键事件并`event.Ascii`用于获取 Ascii 值，然后`chr(event.Ascii)`用于获取字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:00:25.060

这样的事情呢？

```
import string
acceptedChars = set(string.printable)
newL = ''.join([ x for x in l if x in acceptedChars]) 
```

* * *

编辑：

您可以使用任何内容`set()`进行匹配，例如仅获取数字、字母和选定的符号：

```
acceptedChars = set(string.digits + "[]()+-/*^=!<>" + string.letters)
newL = ''.join([ x for x in l if x in acceptedChars]) 
```

# git - 摆脱“git：/usr/local/lib/libz.so.1：没有可用的版本信息（git需要）”

> ID：11961400
> 
> 赞同：14
> 
> 时间：2012-08-14T21:55:08.633
> 
> 标签：git

对于我尝试运行的每个 git 命令，我都会收到此消息。例子：

```
stewie:~# git --version
git: /usr/local/lib/libz.so.1: no version information available (required by git)
git version 1.7.11.4 
```

我怎样才能摆脱这个？

* * *

**编辑1：**

尝试更新`zlib1g`：

```
stewie:/tmp# apt-get install zlib1g
Reading package lists... Done
Building dependency tree
Reading state information... Done
zlib1g is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

* * *

**编辑2：**

我在 Debian Lenny (5) 上，所以很遗憾，使用起来`apt-get`并不容易。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T23:23:33.257

/usr/local 用于安装机器管理员在本地编译的程序。简单的程序只需进入 /usr/local/bin 并通过将 /usr/local/bin 放入`PATH`环境变量从那里运行。这允许管理员向用户提供对操作系统中不包含的其他命令的访问权限。没有什么能阻止 root 将新东西安装到 /usr/bin 中，但惯例是 /usr/bin 由 OS 发行商的打包工具管理，并且将本地东西分开可以让事情变得不那么混乱。

有时，本地程序需要操作系统发行商未提供的库，并且该库进入 /usr/local/lib 并且一切正常。

当存在版本冲突时——操作系统提供了版本 X 的 libz.so，但本地程序需要 libz.so 版本 X+1 或需要使用特殊选项编译 libz.so——事情开始变得复杂。在 /usr/local/lib 中安装较新的库一开始可能没问题。

每个程序都会根据 /usr/lib 来查找库`/etc/ld.so.conf`，如果 /usr/lib 在那里被优先考虑，那么 /usr/local 程序将找不到他们需要的较新的库。所以 /usr/local/lib 通常被优先考虑。较旧的程序找到较新的库通常不是问题，因为这些库是向后兼容的。

多年后，经过几次操作系统升级，/usr/lib 中的库现在是 X+2 版本，/usr/local/lib 中的库仍然是 X+1 版本，现在 /usr/bin 中的程序正在加载旧的 /usr/local/lib 版本和行为不端。这可以通过删除旧库来解决。需要版本 X+1 的 /usr/local/bin 程序将在 /usr/lib 中找到版本 X+2 并正常工作。但前提是需要更新版本是首先在本地安装版本 X+1 的原因。

要在删除之前探查潜在问题，请在 /usr/local 下查找使用 libz 的任何内容。

```
ldd /usr/local/bin/* /usr/local/sbin/* | less +/libz 
```

如果您发现任何引用 libz 的内容，请尝试运行它`LD_LIBRARY_PATH=/usr/lib`以确保它仍然有效。假设没有中断，请删除本地 libz 文件（通过将它们移动到备份位置，以便在必要时撤消此操作）

```
mkdir /root/local-libz-backup
mv /usr/local/lib/libz* /root/local-libz-backup
ldconfig 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T23:30:36.313

我的服务器上有 DirectAdmin，[本指南](http://www.vr.org/kb/3182/orusrorlocalorliborlibzso1-no-version-information-available-required-by-python.html)解决了我的问题。

（从页面复制）

如果您看到错误

```
/usr/local/lib/libz.so.1: no version information available (required by python) 
```

它与安装的 libz 版本有关。当前版本的原因与libxml2所需的libz版本有关。两者的较新版本将解决该问题，但由于此更新报告的许多问题，我们恢复到旧版本的 libz 和 libxml2。请注意，警告不会伤害任何东西，因此可以忽略它。

如果您仍希望将 libz 和 libxml2 更新到其较新版本以避免该消息，请键入：

```
cd /usr/local/directadmin/custombuild
./build update
perl -pi -e 's/zlib:1.2.3:.*/zlib:1.2.5:/' versions.txt
perl -pi -e 's/libxml2:2.7.6:.*/libxml2:2.7.8:/' versions.txt
./build update_data
./build zlib
./build libxml2
./build php n 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-12T06:19:06.223

此方法适用于我的情况，在 .bash_profile 中添加以下行：

`LD_LIBRARY_PATH=/lib64:$LD_LIBRARY_PATH`

然后运行`. ~/.bash_profile`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-05T13:44:43.993

使用 git lib 路径导出`LD_LIBRARY_PATH`以解决错误：

```
libz.so.1: no version information available 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T21:59:29.273

看起来您需要更新构建先决条件。

# javascript - 有没有办法让浏览器（Chrome）插件可以看到加载了什么 .js？

> ID：11961401
> 
> 赞同：1
> 
> 时间：2012-08-14T21:55:09.243
> 
> 标签：javascript, google-chrome, google-chrome-extension

我只是想看看 .js 的其他实现，并想编写一个 Chrome 插件，它会告诉我网站何时使用 WRd.js。有没有办法我可以做到这一点？更好的是已经有一个插件可以做到这一点？

# javascript - mocha.globals 是“未定义的”

> ID：11961404
> 
> 赞同：2
> 
> 时间：2012-08-14T21:55:39.883
> 
> 标签：javascript, jquery, mocha.js

当尝试在浏览器中使用[Mocha](http://visionmedia.github.com/mocha/)（[版本 1.3.2](https://github.com/visionmedia/mocha/tags)）时，按照[给定示例的思路，当尝试以](http://visionmedia.github.com/mocha/example/tests.html)[预期的方式](https://stackoverflow.com/a/11166354/19212)（即使用类似的方式）指定可接受的全局变量时，我得到以下异常`mocha.globals(['amplify', '_'])`：

```
Uncaught TypeError: Object function Mocha(options) {
  options = options || {};
  this.files = [];
  this.options = options;
  this.grep(options.grep);
  this.suite = new exports.Suite('', new exports.Context);
  this.ui(options.ui);
  this.reporter(options.reporter);
  if (options.timeout) this.suite.timeout(options.timeout);
} has no method 'globals' 
```

这在 Chrome 21.0.1180 中有所体现。

可以通过转到给[定的示例链接](http://visionmedia.github.com/mocha/example/tests.html)来重现这一点，并在浏览器控制台中运行`mocha.globals(['123'])`。

我希望`mocha.globals`按照链接示例的建议工作，或者有一些关于替代方案的文档，但我没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:40:49.717

这是visionmedia/mocha GitHub 上的[第 42期。](https://github.com/visionmedia/mocha/issues/442)解决方案是，在 Coffeescript 中：

```
mocha.setup
  ui: 'bdd'
  globals: [ 'jade' ] 
```

# java - 在同一应用程序中支持 JPA 和 MongoDB

> ID：11961405
> 
> 赞同：2
> 
> 时间：2012-08-14T21:55:41.817
> 
> 标签：java, mongodb, jpa, dao

存在一个听起来很简单的要求：支持几个 RDBMS（我打算通过使用 JPA 来实现）和 MongoDB（首选 spring-data-mongodb）来实现持久性。更准确地说，必须配置和使用一个或另一个，我不是在谈论交叉商店。

该过程应如下：编写应用程序，将 .war 交付给客户，客户在配置文件中放置持久性信息，如 databaseurl（即 mongodb:localhost/test 或 jdbc:oracle:thin:1521@foo ）。此外，最好扩展其他数据存储（如 couchdb）的实现。

是否有最佳实践或至少任何不那么脏的非过多开销解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:45:08.373

Is Eclipselink an option? The latest supports JPA for both RDBMS and NOSQL (including Mongo)

[https://blogs.oracle.com/theaquarium/entry/jpa_and_nosql_using_eclipselink](https://blogs.oracle.com/theaquarium/entry/jpa_and_nosql_using_eclipselink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:26:29.617

[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1)允许您持久保存到 RDBMS、MongoDB 和许多其他数据存储（LDAP、HBase、AppEngine、Neo4j 等），只需对连接 URL 进行简单更改，并且已经这样做了一段时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:00:01.180

我目前正在开发一个具有类似需求的项目。我可以根据我的经验给你建议。

我相信这里的主要关注点不是关于技术，而是更多关于如何构建数据。为此，我建议您使用 AbstractFactory 和 FactoryMethod 设计模式。关于技术，我在 MongoDB 中使用 Morphia，在 MySQL 中使用 JPA（作为示例），它的工作原理非常棒。

所以最简单的方法是为你想要持久化的所有对象创建接口，然后用 Morphia 标签和另一个用 JPA 标签为 MongoDB 做一个实现。为 MongoDB 创建一个工厂，它将处理 MongoDB 对象中的所有 CRUD 操作，并对 JPA 工厂执行相同的操作。

当应用程序启动时，您只需验证用户选择的持久性，然后初始化相应的工厂。

# html - 在 html 中嵌入视频：使用对象标签

> ID：11961406
> 
> 赞同：0
> 
> 时间：2012-08-14T21:55:43.130
> 
> 标签：html, flash, video, media-player

我一直在尝试为网站制作自己的自定义视频播放器，但我真的不明白你应该怎么做。我在 youtube 上观看了有关如何制作自己的 Flash 播放器的视频，但他们将视频嵌入到 Flash 中，并且必须有另一种方式，比如创建播放器设计，然后有一个 html 标签告诉视频路径和内容。我看过其他视频网站，比如 movpod（我用它来观看像辛普森一家这样的东西：p）。他们的站点中有一个带有 .swf 播放器（设计）的对象标签，但如果我转到该文件，它只会显示播放器的设计，而不是实际的视频。然后他们使用参数标签来定义页面中视频的路径。我的问题是，你如何制作播放器设计，而不用像 flash cs5 之类的东西导入视频，在设计中使用所说的对象标签，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:12:06.423

传递的参数通常是 FlashVars。它基本上是对象或嵌入标签中的一个参数，定义了一些您可以在 Flash 中访问的变量，即要播放的视频的地址。请参阅 [http://www.permadi.com/tutorial/flashVars/index.html](http://www.permadi.com/tutorial/flashVars/index.html)示例 1

然后在 Flash 中读取视频的地址并加载它，即使用 FLVPlayback 对象。

# sql - 如何识别具有重复条目的列（使用 SQL）？

> ID：11961407
> 
> 赞同：2
> 
> 时间：2012-08-14T21:55:46.403
> 
> 标签：sql, multiple-columns

我们正在构建一个数据库，该数据库将用于检查公司各个系统上员工当前使用的用户名的任何重复项。以前，一些员工共享相同的用户名访问某些系统。由于方向是为每个系统上的每个员工都有一个唯一的用户名，因此我们需要确定哪些员工仍在使用共享访问权限。该数据库有一张表，其中包含员工的姓名及其各自的用户名。

例如：表1

```
Employee    System1 System2  System3
John Doe    dJohn   Pkls453  xfd801
Jane Doe    dJane   Pkls454  xfd801
James Lee   dJames  Pkls455  fd674
Mark Jones  dMark   Pkls453  xfd752 
```

我们需要生成一个报告，表明 John Doe 和 Jane Doe 在 System3 上共享相同的访问权限，而 John Doe 和 Mark Jones 在 System2 上共享访问权限。就像是：

```
Employee  System3  System2
John Doe  xfd801
Jane Doe  xfd801
John Doe           Pkls453
Mark Jones         Pkls453 
```

有没有办法解决这个问题？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:10:44.550

我确信有一个更清洁的解决方案，但这应该以您指定的格式返回您正在寻找的内容。

```
SELECT Employee, System1, NULL AS System2, NULL AS System3
FROM your_table T1
WHERE EXISTS(SELECT * FROM your_table T2
         WHERE T1.System1 = T2.System1
         AND T1.Employee <> T2.Employee)
UNION
SELECT Employee, NULL AS System1, System2, NULL AS System3
FROM your_table T1
WHERE EXISTS(SELECT * FROM your_table T2
         WHERE T1.System2 = T2.System2
         AND T1.Employee <> T2.Employee)
UNION
SELECT Employee, NULL AS System1, NULL AS System2, System3
FROM your_table T1
WHERE EXISTS(SELECT * FROM your_table T2
         WHERE T1.System3 = T2.System3
         AND T1.Employee <> T2.Employee)
ORDER BY System1, System2, System3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:14:31.023

如果您的系统支持窗口函数，这将起作用：

```
SELECT employee, system1, system2, system3
FROM  (
   SELECT employee
         ,system1
         ,cast(NULL AS text) AS system2
         ,cast(NULL AS text) AS system3
         ,count(*) OVER (PARTITION BY system1) AS ct
   FROM tbl1

   UNION  ALL
   SELECT employee
         ,NULL -- cast and column name only needed in first SELECT in Postgres
         ,system2
         ,NULL
         ,count(*) OVER (PARTITION BY system2) AS ct
   FROM   tbl1

   UNION  ALL
   SELECT employee
         ,NULL
         ,NULL
         ,system3
         ,count(*) OVER (PARTITION BY system3) AS ct
   FROM   tbl1
   ) x
WHERE  ct > 1
ORDER  BY system1, system2, system3; 
```

或者，可能更快：
请注意，共享多个系统的“John Doe”在其所有共享系统的以下查询中仅列出一次（而不是第一个）。非共享系统设置为`NULL`。

```
SELECT employee
      ,CASE WHEN ct1 > 1 THEN system1 ELSE NULL END AS system1
      ,CASE WHEN ct2 > 1 THEN system2 ELSE NULL END AS system2
      ,CASE WHEN ct3 > 1 THEN system3 ELSE NULL END AS system3
FROM   (
    SELECT employee, system1, system2, system3
          ,count(*) OVER (PARTITION BY system1) AS ct1
          ,count(*) OVER (PARTITION BY system2) AS ct2
          ,count(*) OVER (PARTITION BY system3) AS ct3
    FROM tbl1
    ) x
WHERE  ct1 > 1 OR ct2 > 1 OR ct3 > 1
ORDER  BY system1, system2, system3; -- depends on what you want 
```

或者，如果您的匿名系统支持公用表表达式：

```
WITH x AS (
    SELECT employee, system1, system2, system3
          ,count(*) OVER (PARTITION BY system1) AS ct1
          ,count(*) OVER (PARTITION BY system2) AS ct2
          ,count(*) OVER (PARTITION BY system3) AS ct3
    FROM tbl1
    )
SELECT employee
      ,CASE WHEN ct1 > 1 THEN system1 ELSE NULL END AS system1
      ,CASE WHEN ct2 > 1 THEN system2 ELSE NULL END AS system2
      ,CASE WHEN ct3 > 1 THEN system3 ELSE NULL END AS system3
FROM   x
WHERE  ct1 > 1 OR ct2 > 1 OR ct3 > 1
ORDER  BY system1, system2, system3; -- depends 
```

如果您既没有 CTE 也没有窗口函数：（
应该适用于所有主要的 RDBMS，包括 MySQL。）

```
SELECT t.employee, s1.system1, s2.system2, s3.system3
FROM   tbl1 t
LEFT   JOIN (SELECT system1 FROM tbl1 GROUP BY 1 HAVING count(*) > 1) s1
                                                 ON t.system1 = s1.system1
LEFT   JOIN (SELECT system2 FROM tbl1 GROUP BY 1 HAVING count(*) > 1) s2
                                                 ON t.system2 = s2.system2
LEFT   JOIN (SELECT system3 FROM tbl1 GROUP BY 1 HAVING count(*) > 1) s3
                                                 ON t.system3 = s3.system3
WHERE s1.system1 IS NOT NULL
   OR s2.system2 IS NOT NULL
   OR s3.system3 IS NOT NULL
ORDER BY s1.system1, s2.system2, s3.system3; -- depends 
```

用 PostgreSQL 9.1.4 测试。

# javascript - Javascript，获取数组中保存的字符串的长度

> ID：11961410
> 
> 赞同：0
> 
> 时间：2012-08-14T21:56:10.630
> 
> 标签：javascript, arrays

```
k = [['a'], ['ab'], ['abc']];
alert(k[2].length); 
```

上面的代码片段返回 1。

如何获得字符串的长度，在这种情况下为 3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T21:58:09.037

对象不是预期的。考虑：

```
k = [['a'], ['ab'], ['abc']];
a = k[2]    // -> ['abc']
a.length    // -> 1 (length of array)
b = k[2][0] // -> 'abc'
b.length    // -> 3 (length of string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:59:08.400

在您的示例中，`k`不是包含字符串的普通数组。它包含包含字符串的子数组。你应该`k`这样声明：

```
k = ['a', 'ab', 'abc']; 
```

如果您确实想使用自己的声明，可以这样做：

```
alert(k[2][0].length);​ 
```

# c# - 从费尔班克斯 SCB-9000 USB 秤读取重量

> ID：11961412
> 
> 赞同：5
> 
> 时间：2012-08-14T21:56:27.973
> 
> 标签：c#, usb, hid

我正在尝试创建一个可执行文件，该可执行文件可以被调用并从 Fairbanks SCB-9000 USB 秤传回重量。我找到了一些适用于不同模型比例的代码，但它对我来说不太适用。我对以下方法特别有疑问。它给了我一个错误：“无法将类型'System.Collections.Generic.IEnumerable'隐式转换为'HidLibrary.HidDevice []'。” 我已经尝试了几种铸造方法，但我无法让它发挥作用。这里有什么建议，或者有没有人为这个特定的规模写过任何代码？

谢谢，

抢

这是有问题的方法：

```
 public HidDevice[] GetDevices()
    {
        HidDevice[] hidDeviceList;

        // Fairbanks Scale
        hidDeviceList = HidDevices.Enumerate(0x0B67, 0x555E);

        if (hidDeviceList.Length > 0)

            return hidDeviceList;

    } 
```

抱歉应该补充一下，我从这里使用 Mike Obrien 的 HidLibrary：http: [//nuget.org/packages/hidlibrary](http://nuget.org/packages/hidlibrary)

使用完整代码更新...

这是我正在使用的代码...

**程序.cs**

```
using System;
using System.Threading;
using HidLibrary;
using Scale;

namespace ScaleReader
{
    class Program
    {
        public static void Main(string[] args)
        {
            decimal? weight;
            bool? isStable;

            USBScale s = new USBScale();
            s.Connect();

            if (s.IsConnected)
            {
                s.GetWeight(out weight, out isStable);
                s.DebugScaleData();
                Console.WriteLine("Weight: {0:0.00} LBS", weight);
            }
            else
            {
                Console.WriteLine("No Scale Connected.");
            }

            s.Disconnect();
            Thread.Sleep(500);
        }
    }
} 
```

**比例尺.cs**

```
using HidLibrary;
using System.Threading;
using System;
using System.Collections.Generic;
using System.Text;

namespace Scale
{
    class USBScale
    {
        public bool IsConnected
        {
            get
            {
                return scale == null ? false : scale.IsConnected;
            }
        }
        public decimal ScaleStatus
        {
            get
            {
                return inData.Data[1];
            }
        }
        public decimal ScaleWeightUnits
        {
            get
            {
                return inData.Data[2];
            }
        }
        private HidDevice scale;
        private HidDeviceData inData;

public HidDevice[] GetDevices() 
{ 
    return HidDevices.Enumerate(0x0B67, 0x555E).Cast<HidDevice>().ToArray(); 
} 

        public bool Connect()
        {
            // Find a Scale
            HidDevice[] deviceList = GetDevices();

            if (deviceList.Length > 0)

                return Connect(deviceList[0]);

            else

                return false;
        }
        public bool Connect(HidDevice device)
        {
            scale = device;
            int waitTries = 0;
            scale.OpenDevice();

            // sometimes the scale is not ready immedietly after
            // Open() so wait till its ready
            while (!scale.IsConnected && waitTries < 10)
            {
                Thread.Sleep(50);
                waitTries++;
            }
            return scale.IsConnected;
        }
        public void Disconnect()
        {
            if (scale.IsConnected)
            {
                scale.CloseDevice();
                scale.Dispose();
            }
        }
        public void DebugScaleData()
        {
            for (int i = 0; i < inData.Data.Length; ++i)
            {
                Console.WriteLine("Byte {0}: {1}", i, inData.Data[i]);
            }
        }
        public void GetWeight(out decimal? weight, out bool? isStable)
        {
            weight = null;
            isStable = false;

            if (scale.IsConnected)
            {
                inData = scale.Read(250);
                // Byte 0 == Report ID?
                // Byte 1 == Scale Status (1 == Fault, 2 == Stable @ 0, 3 == In Motion, 4 == Stable, 5 == Under 0, 6 == Over Weight, 7 == Requires Calibration, 8 == Requires Re-Zeroing)
                // Byte 2 == Weight Unit
                // Byte 3 == Data Scaling (decimal placement)
                // Byte 4 == Weight LSB
                // Byte 5 == Weight MSB

                // FIXME: dividing by 100 probably wont work with
                // every scale, need to figure out what to do with
                // Byte 3
                weight = (Convert.ToDecimal(inData.Data[4]) +
                    Convert.ToDecimal(inData.Data[5]) * 256) / 100;

                switch (Convert.ToInt16(inData.Data[2]))
                {
                    case 3:  // Kilos
                        weight = weight * (decimal?)2.2;
                        break;
                    case 11: // Ounces
                        weight = weight * (decimal?)0.625;
                        break;
                    case 12: // Pounds
                        // already in pounds, do nothing
                        break;
                }
                isStable = inData.Data[1] == 0x4;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:00:47.010

你不会编译什么，因为你并不总是返回一些东西。根据错误消息，这就是您真正需要的。我找不到任何参考，`HidDevice`所以`HidDevices`我不能说这*绝对*肯定会起作用。

```
public HidDevice[] GetDevices()
{
    return HidDevices.Enumerate(0x0B67, 0x555E).Cast<HidDevice>().ToArray();
} 
```

您必须添加此行才能编译：

```
using System.Linq; 
```

* * *

附带说明一下，获取 ReSharper。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T15:52:26.747

想为此添加一些注释以帮助其他人。我专门查看代码中提到除法问题的 FIXME 注释。

我一直在使用 Mettler Toledo PS 系列秤、PS-60、PS-15 和 PS-90。在 HID 数据返回中，PS-15 的第三个元素返回 255，PS-60 和 PS-90 都返回 254。

使用校准砝码，我发现 PS-15 需要除以 10 才能获得正确的重量，而 PS-60/90 需要除以 100。

# wpf - 从 MRU 绑定创建超链接

> ID：11961416
> 
> 赞同：1
> 
> 时间：2012-08-14T21:56:36.560
> 
> 标签：wpf, c#-4.0, binding, hyperlink

（我对 WPF 和 C# 非常陌生，所以请温柔一点！）

我正在尝试为我们的应用程序创建一个“起始页”，其中包含 5 个最近使用的超链接形式的项目（在 TextBlock 内？）。

项目中已有可用的绑定。如果我做一个这样的列表框......

```
<TextBlock Margin="51,189,0,223.5" HorizontalAlignment="Left" Width="177" Background="#FFEBEAEA">
<ListBox Width="200" ItemsSource="{Binding RecentProjects}" ItemTemplate="{Binding}">
</ListBox>
</TextBlock> 
```

...我得到了以前项目的完整路径。我想将它们剥离为超链接格式的文件名（甚至可能删除扩展名），然后将单击操作设置为我们的“打开文件”命令，并将文件名作为参数。

如果有人可以指导我找到用于制作非网络超链接、对集合中的项目进行操作的良好资源，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:52:15.070

好问题，您的 XAML 可能如下所示：

```
<ListBox ItemsSource="{Binding RecentProjects}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock>
                        <Hyperlink Command="{Binding OpenCommand}">
                            <TextBlock Text="{Binding DisplayFileName}"/>
                        </Hyperlink>      
                    </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

然后这个类看起来像这样：

```
class Class1
{
    public List<Project> RecentProjects { get; set; }

    public class Project
    {
        public ICommand OpenCommand { get; set; }

        public Project()
        {
            OpenCommand = new RelayCommand(OpenFile);
        }

        public string FileName { get; set; }

        public string DisplayFileName
        {
            get { return Path.GetFileNameWithoutExtension(FileName) ; }    
        }

        public void OpenFile(object sender)
        {
            // Open the file here e.g.
            Process.Start(FileName);
        }
    }  
} 
```

RelayCommand 是 MVVM 教程 (http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090051) 中详细介绍的自定义类，它允许您使用委托来处理命令。

祝你好运！

# windows-phone-7 - 反序列化来自 Web 的响应流失败

> ID：11961417
> 
> 赞同：0
> 
> 时间：2012-08-14T21:56:56.637
> 
> 标签：windows-phone-7, openrasta

我需要将我的网络应用程序转换为电话应用程序。我成功地将请求响应反序列化到我的网络应用程序上的通用列表中，但我还没有弄清楚如何在电话应用程序上做到这一点。在网上我可以使用 DataContractSerializer 和 XmlDictionaryRead.CreateTextReader 和 System.Xml.XmlDictionaryReaderQuotas()，但在 Windows 手机上没有这样的方法。我修改了代码并得到了这样的错误

> 第 1 行位置 2 出错。来自命名空间“http://schemas.datacontract.org/2004/07/CMSPhoneApp.DataObjects”的预期元素“ArrayOfQueueItem”.. //遇到名称为“QueueItem”的“元素”，命名空间“” .

有反序列化的代码

```
try{
            using (XmlReader r = XmlReader.Create(new StringReader(content)))
            {
                var ser = new DataContractSerializer(typeof(T));
                var reader = XmlDictionaryReader.CreateDictionaryReader(r);
                ser = new DataContractSerializer(typeof(T));
                var deserializedItem = (T)ser.ReadObject(reader, true);
                reader.Close();
                return deserializedItem;
            }
        } 
```

我将响应流读入字符串，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfQueueItem xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/DataObjects">
<QueueItem>
  <callNumber>349551</callNumber>
  <errorMsg
   i:nil="true" />
  <link>/Call/349551</link>
  <page>Call</page>
  <siteCity>Burnaby</siteCity>
  <status>Open</status>
  <summary>Mobile Application Research</summary>
 </QueueItem>
 <QueueItem>
   <callNumber>376209</callNumber>
    <errorMsg
    i:nil="true" />
   <link>/Call/376209</link>
   <page>Call</page>
   <siteCity>Burnaby</siteCity>
   <status>Open</status>
   <summary>July 2012 ASD Calls of the Month.</summary>
   </QueueItem>
</ArrayOfQueueItem> 
```

以下是“QueueItem”类：

```
namespace CMSPhoneApp.DataObjects
{
   //This is Model
  public class QueueItem
  {
    public string callNumber { get; set; }
    public string summary { get; set; }
    public string status { get; set; } //queInvoiceAdmin no status
    public string link { get; set; }
    public string errorMsg { get; set; }
    public string page { get; set; }
    public string siteCity { get; set; }
   }
} 
```

即使我尝试将响应流切割成如下所示，我仍然得到同样的错误：

```
<QueueItem>
 <callNumber>349551</callNumber>
 <errorMsg
  i:nil="true" />
 <link>/Call/349551</link>
 <page>Call</page>
 <siteCity>Burnaby</siteCity>
 <status>Open</status>
 <summary>Mobile Application Research</summary>
</QueueItem>
<QueueItem>
  <callNumber>376209</callNumber>
  <errorMsg
   i:nil="true" />
  <link>/Call/376209</link>
  <page>Call</page>
  <siteCity>Burnaby</siteCity>
  <status>Open</status>
 <summary>July 2012 ASD Calls of the Month.</summary>
</QueueItem> 
```

有人会指导我或向我展示解决此问题的示例或链接。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:52:52.670

这可能不是一个好的解决方案，但它解决了我的问题。我将“schemas.datacontract.org/2004/07/DataObjects”更改为“schemas.datacontract.org/2004/07/CMSPhoneApp.DataObjects”。因此它可以找到类位置。我还需要为反序列化创建 ArrayOfQueueItem 类。

# sql - Oracle SQL 选择拆分结果

> ID：11961418
> 
> 赞同：0
> 
> 时间：2012-08-14T21:56:57.400
> 
> 标签：sql, regex, oracle, select, substr

我正在尝试创建一个 SQL 语句以仅返回列结果的一部分。我研究了 SubString 和 InString，但是在返回我需要的值时遇到了很多麻烦。

示例表数据为：

```
RM123 - N60
RM123 - J44
RM123 - Q24
RM123 - U55-R07 - 1
RM123 - U54-R06 - 1
RM123 - R47-R11 - 1 
```

我只需要在第二个空格之后和第三个空格之前返回数据（可能包含破折号，在所需结果中不包含空格）：

```
N60
J44
Q24
U55-R07
U54-R06
R47-R11 
```

相当于我在awk中需要的...

```
$ awk '{print $3}' /tmp/sql.out
N60
J44
Q24
U55-R07
U54-R06
R47-R11 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:37:11.033

找到了我自己的问题的解决方案，所以我将其发布给其他人。您可以使用 regexp_substr 来解决这个问题。这里有一个例子：

```
select regexp_substr(columnname,'[^ ]+', 1, 3) 
```

这将使用空格作为分隔符返回第三列。所有道具都转到此页面，这给了我提示：

[http://andrewfraserdba.com/2011/07/13/split-space-delimited-string-with-regexp-sql/](http://andrewfraserdba.com/2011/07/13/split-space-delimited-string-with-regexp-sql/)

# c++ - ListView 中的系统链接

> ID：11961421
> 
> 赞同：0
> 
> 时间：2012-08-14T21:57:04.733
> 
> 标签：c++, windows, winapi

如果我在报告模式下有一个 listview 控件，我如何将 syslink 控件粘贴到其中一列中？
我想要一个用户可以在其中一列中单击的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:07:47.563

listview 控件本身不支持此功能。

您可以创建一个真正的 Syslink 控件，它是列表视图的子项。每当列表滚动（注意 WM_HSCROLL / WM_VSCROLL 消息）或添加或删除项目或排序时，您需要对列表视图进行子类化并重新定位 Syslink 控件。您可以使用 LVM_GETSUBITEMRECT 找出它的位置。

或者，您可以自己处理它，使用 NM_CUSTOMDRAW 以不同的颜色显示“链接”，并处理 NM_CLICK 以捕捉用户单击链接的时间。在我看来，这将是最简单的方法。请注意，如果您希望在链接上显示手形光标，您仍然需要对列表进行子类化并自己处理 WM_SETCURSOR。

# python - 为什么我的代码不能得到预期的回报？

> ID：11961422
> 
> 赞同：1
> 
> 时间：2012-08-14T21:57:15.420
> 
> 标签：python

```
grade=['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0]   

def convert_grades(lst):
    a = []
    b = []
    for i in lst:
        if isinstance(i,str):
            c = 0
            while lst[c] < 0 or lst[c] == []:
                a = a + lst[c]
                c = c + 1
            b = b + a   
    return b 
```

我希望它返回

```
[['Ben Anderson',95,90,100],['Mary Johnson',75,78,79],['Michael Walter',80,68,0]] 
```

但它返回为`[]`

我不知道发生了什么事。需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:19:59.137

输入输出形式相同的建议：

```
def convert_grades(lst):
    out = []
    for element in grade:
        if isinstance(element, str):
            buf = []         # re-initializes 'buf' everytime there is a string
            out.append(buf)
        buf.append(element)
    return out 
```

前代码的非 Python 性的三个主要症状：

1.  在已经熟悉 python 习语的人会使用类型方法的情况下使用算术运算符（`list.append`在这种情况下）；
2.  列表中的输入，其中明显的数据类型应该是字典（尽管并不总是可以控制获取数据的方式）；
3.  而且，最严重的症状是，当它实际上是在乞求字典时，输出是一个列表列表。

因此，一种更 Pythonic 的方式，返回字典而不是列表：

```
def convert_grades(lst):
    out = {}
    for element in grade:
        if isinstance(element, str):
            key = element
            out[key] = []
        else:
            out[key].append(element)   ## mind that this would raise an error if first element in lst is not string
    return out

print convert_grades(grade) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T22:11:20.667

我认为[`itertools.groupby()`](http://docs.python.org/library/itertools.html#itertools.groupby)这里可能非常适用：

```
from itertools import groupby

def convert_grades(lst):
    key = lambda x: isinstance(x, int) and x < 0
    return [list(g) for k, g in groupby(lst, key) if not k] 
```

结果：

```
>>> convert_grades(['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0])
[['Ben Anderson', 95, 90, 100], ['Mary Johnson', 75, 78, 79], ['Michael Walter', 80, 68, 0]] 
```

这是通过创建一个函数`key`来实现的，该函数返回`True`列表条目何时应作为分隔符，`False`何时不应。通过使用这个函数，`itertools.groupby()`我们可以创建所有的组，然后我们只需要从结果迭代中过滤掉所有的分隔符值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:41:02.797

为了完整起见，您可以将此结构`[str, int, int, str, int]`视为堆栈并从左侧弹出到您想要的结构中：

```
grades=['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0]
converted_list=[]
while grades:
    temp=[grades.pop(0)]
    while grades and isinstance(grades[0],int):
        temp.append(grades.pop(0))

    converted_list.append(temp)

print converted_list 
```

印刷：

```
[['Ben Anderson', 95, 90, 100, -1], ['Mary Johnson', 75, 78, 79, -5], ['Michael Walter', 80, 68, 0]] 
```

您可以使用相同的方法创建字典，这似乎是一种更好的数据结构：

```
d={}
while grades:
    name=grades.pop(0)
    d[name]=[]
    while grades and isinstance(grades[0],int):
        d[name].append(grades.pop(0))

print d 
```

印刷：

```
{'Mary Johnson': [75, 78, 79, -5], 'Michael Walter': [80, 68, 0], 'Ben Anderson': [95, 90, 100, -1]} 
```

虽然这可行，但恕我直言，[FJ](https://stackoverflow.com/a/11961569/298607)的答案是最“Pythonic”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T22:36:55.087

还有另一个答案（尽管我比我更喜欢[FJ 的答案](https://stackoverflow.com/a/11961569/289011)）和一些评论（只是建议）：

```
#!/usr/bin/env python

def convert_grades1(lst):
    a = []
    b = []

    index = 0
    while index < len(lst):
        if isinstance(lst[index], str):
            b.append(lst[index])
            index = index + 1
            try:
                while isinstance(lst[index], int):
                    if lst[index] > 0:
                        b.append(lst[index])
                    index += 1
            except IndexError:
                print "We're done"
            finally:
                a.append(b)
                b = []
    return a

if __name__ == "__main__":
    grade=['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0]
    print convert_grades1(grade) 
```

1)

如果您正在使用*while*循环“遍历”列表（或解析文件或其他...），请考虑您是否真的需要在嵌套循环中从头开始重新开始遍历。在您的代码中：

```
for i in lst:
    if isinstance(i,str):
        c = 0
        while lst[c] < 0 or lst[c] == []: 
```

您开始在一段时间内重新遍历整个列表（您`c=0`在进入列表之前就这样做了），即使您之前可能已经*为*“通过”处理了其中的一部分。我猜你正在考虑`i`成为索引（不是，`i`获取列表中项目的值）。对于索引，使用：`for i in range(0, len(lst))`或`for i, item in enumerate(lst)`

2)

```
 c = 0
 while lst[c] < 0 or lst[c] == []: 
```

在那里，`lst[c]`指向列表中的第一个项目（意思是 string `'Ben Anderson'`），它既不小于 0 也不是空列表，因此`while`永远不会执行循环。

3)

它通常被认为是“pythonic”让你的代码遵循“*更好的抱歉比安全*”的想法，所以`if isinstance(i,str)`你可以（在你的例子中）尝试解析一个 int 并且如果它失败......那么......那么你可以假设这是一个字符串。

```
if isinstance(element, str):
    #do stuff for string
else:
    #do other stuff (for int) 
```

可以等效（在您的情况下）：

```
try:
  int(element)
  #do other stuff (for int)
except ValueError: 
  #do stuff for string 
```

小心，因为`int("5")`不会抛出任何异常（即使`"5"`实际上是`str`）。它会给你`int`一个值为`5`.

4)

如果您是初学者，`print`是您的朋友**；）**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T22:01:45.713

尝试这样的事情：

```
grade=['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0]

def convert_grades(lst):
    a = []
    for i in lst:
        if isinstance(i,str):
            a.append([])           #if a string is found than append a [] to a 
            a[-1].append(i)         #append i to the last element of a   
        elif i>=0:
            a[-1].append(i)        #if not string then just append i to the last element of a       
    return a        

print(convert_grades(grade)) 
```

**输出**：

```
[['Ben Anderson', 95, 90, 100], ['Mary Johnson', 75, 78, 79], ['Michael Walter', 80, 68, 0]] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T01:06:09.247

如果你想要理解，这有效：

```
grades=['Ben Anderson',95,90,100,-1,'Mary Johnson',75,78,79,-5,'Michael Walter',80,68,0]
eyes=[i for i, x in enumerate(grades) 
    if isinstance(x,str)]+[len(grades)+1]         # index of the strings
LofSL=[(i,j) for i,j in zip(eyes[:-1],eyes[1:])]  # slices for each list
LoL=[grades[t[0]:t[1]] for t in LofSL]            # your list of lists 
```

或者，如果你想要一本字典：

```
DofL={grades[t[0]]:grades[t[0]+1:t[1]] for t in LofSL} 
```

# php - 如何计算所有 MySQL 结果

> ID：11961423
> 
> 赞同：1
> 
> 时间：2012-08-14T21:57:15.653
> 
> 标签：php, mysql, loops

```
+----------+-----------------------+
| id       | amount                |
+----------+-----------------------+
| 1        | 20                    |
| 2        | 40                    |
| 3        | 60                    | 
```

我想使用 php 合并所有金额并最终得到 120 ( 20 + 40 + 60 )

```
$query = mysql_query("SELECT * FROM table");

 while($row = mysql_fetch_array($query)){
   $result = $row + $row; // of course false, just an example
 } 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:59:09.767

您应该使用[`SUM`聚合](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)直接在 MySQL 中执行此操作：

```
SELECT SUM(amount) FROM TABLE; 
```

然后像这样工作：

```
$query = 'SELECT SUM(amount) FROM TABLE;';
list($sum) = mysql_fetch_row($query); 
```

好处是 MySQL 会为您计算它，您不需要将所有行从数据库传输到您的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:04:57.833

```
$query = mysql_query("SELECT * FROM table");
$sum = 0;

while($row = mysql_fetch_array($query)) {
    $sum += $row['amount'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:06:00.707

这为您提供了所有金额的总和：

```
 Select sum(amount) from table 
```

# arrays - php/mongoDB：将项目添加到内部数组

> ID：11961431
> 
> 赞同：0
> 
> 时间：2012-08-14T21:57:53.793
> 
> 标签：arrays, mongodb, push, add, mongodb-php

我的结构如下所示：

```
"_id" : { "$oid" : "502ac2858386b3f419000002"} ,
"eventName" : "eventA" ,
"eventStreamName" : "eventA-0001" ,
"encoders" : [ 
    { 
    "encoderName" : "enc-201" ,
    "streams" : [ 
        { "language" : "eng" , "format" : "flash" , "priority" : "primary"} ,
        { "language" : "spa" , "format" : "flash" , "priority" : "primary"} ,
        { "language" : "fra" , "format" : "flash" , "priority" : "primary"}
        ]
    } ,
    { 
    "encoderName" : "enc-202" ,
    "streams" : [ 
        { "language" : "eng" , "format" : "flash" , "priority" : "primary"} ,
        { "language" : "spa" , "format" : "flash" , "priority" : "primary"}   // i'd like to add stream here
        ]
    } 
] 
```

我想将一个项目推送到编码器名称 = 'enc-202' 和 eventName = 'eventA' 的流数组

这是我尝试过的

```
 $this->liveEvents = $db->selectCollection("liveEvents");
    $newStream = array("language" => "ger",
            "format" => "flash",
            "priority" => "primary");

    $filter = array("eventName" => "eventA",
                    "encoders.encoderName" => "enc-202");
    $update = array('$push'=>array('encoders.streams'=>$newStream));

    $this->liveEvents->update($filter,$update); 
```

但它不工作。我不确定是否可以将 2 个项目添加到我的 $filter 中，并且我的 $update 也可能关闭。

刚接触 mongodb。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T01:52:17.363

您缺少告诉 mongo 需要更新哪个子数组的部分。通过仅传递过滤器，它会返回整个对象，然后当您尝试进行更新时，它不知道要更新哪个“编码器”数组。这在 Mongo 中通过使用 $ 位置运算符来解决。[请参阅此处的说明。](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

所以你的更新声明应该是：

```
$update = array('$push' => array('encoders.$.streams' => $newStream)); 
```

通过添加位置运算符，Mongo 然后获取过滤器并将更新应用于导致过滤器匹配的编码器。

# javascript - 为 jQuery AJAX 调用实现加载指示器

> ID：11961438
> 
> 赞同：89
> 
> 时间：2012-08-14T21:58:39.270
> 
> 标签：javascript, jquery, html, ajax

我有一个从链接启动的引导模式。大约 3 秒钟，它只是空白，而 AJAX 查询从数据库中获取数据。如何实现某种加载指示器？twitter bootstrap 是否默认提供此功能？

编辑：模态的 JS 代码

```
<script type="text/javascript">
  $('#myModal').modal('hide');
  $('div.divBox a').click(function(){
    var vendor = $(this).text();
    $('#myModal').off('show');
    $('#myModal').on('show', function(){             
      $.ajax({
        type: "GET",
        url: "ip.php",
        data: "id=" + vendor,
        success: function(html){
          $("#modal-body").html(html);
          $(".modal-header h3").html(vendor);
          $('.countstable1').dataTable({
            "sDom": "T<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
            "sPaginationType": "bootstrap",
            "oLanguage": {
              "sLengthMenu": "_MENU_ records per page"
            },
            "aaSorting":[[0, "desc"]],
            "iDisplayLength": 10,
            "oTableTools": {
              "sSwfPath": "swf/copy_csv_xls_pdf.swf",
              "aButtons": ["csv", "pdf"]
            }
          });
        }
      });
    });
  });
  $('#myModal').on('hide', function () {
    $("#modal-body").empty();
  });
</script> 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-02-21T22:57:06.307

我按照这个例子解决了同样的问题：

此示例使用 jQuery JavaScript 库。

[首先，使用AjaxLoad 站点](http://www.ajaxload.info/)创建一个 Ajax 图标。
然后将以下内容添加到您的 HTML 中：

```
<img src="/images/loading.gif" id="loading-indicator" style="display:none" /> 
```

并将以下内容添加到您的 CSS 文件中：

```
#loading-indicator {
  position: absolute;
  left: 10px;
  top: 10px;
} 
```

最后，您需要挂钩 jQuery 提供的 Ajax 事件；一个事件处理程序用于 Ajax 请求何时开始，一个事件处理程序用于何时结束：

```
$(document).ajaxSend(function(event, request, settings) {
    $('#loading-indicator').show();
});

$(document).ajaxComplete(function(event, request, settings) {
    $('#loading-indicator').hide();
}); 
```

此解决方案来自以下链接。 [如何在 Ajax 请求处理期间显示动画图标](http://snippets.aktagon.com/snippets/204-How-to-display-an-animated-icon-during-Ajax-request-processing)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-14T22:05:13.837

我猜你正在使用 jQuery.get 或其他一些 jQuery ajax 函数来加载模式。您可以在 ajax 调用之前显示指示器，并在 ajax 完成时将其隐藏。就像是

```
$('#indicator').show();
$('#someModal').get(anUrl, someData, function() { $('#indicator').hide(); }); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-04-09T14:41:10.900

有一个使用 jQuery 的全局配置。此代码在每个全局 ajax 请求上运行。

```
<div id='ajax_loader' style="position: fixed; left: 50%; top: 50%; display: none;">
    <img src="themes/img/ajax-loader.gif"></img>
</div>

<script type="text/javascript">
    jQuery(function ($){
        $(document).ajaxStop(function(){
            $("#ajax_loader").hide();
         });
         $(document).ajaxStart(function(){
             $("#ajax_loader").show();
         });    
    });    
</script> 
```

这是一个演示：http: [//jsfiddle.net/sd01fdcm/](http://jsfiddle.net/sd01fdcm/)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-08-14T22:05:52.697

加载指示器只是一个动画图像 (.gif)，在 AJAX 请求上调用完成事件之前，它会一直显示。[http://ajaxload.info/](http://ajaxload.info/)提供了许多用于生成加载图像的选项，您可以覆盖在您的模态框上。据我所知，Bootstrap 不提供内置功能。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-06T00:10:15.530

这就是我如何加载需要刷新的远程内容的方法：

```
$(document).ready(function () {
    var loadingContent = '<div class="modal-header"><h1>Processing...</h1></div><div class="modal-body"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>';

    // This is need so the content gets replaced correctly.
    $("#myModal").on("show.bs.modal", function (e) {
        $(this).find(".modal-content").html(loadingContent);        
        var link = $(e.relatedTarget);
        $(this).find(".modal-content").load(link.attr("href"));
    });    

    $("#myModal2").on("hide.bs.modal", function (e) {
        $(this).removeData('bs.modal');
    });
}); 
```

基本上，只需在加载时用加载消息替换模态内容。内容将在完成加载后被替换。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-11T07:11:02.690

这就是我通过 Glyphicon 实现加载指示器的方式：

```
<!DOCTYPE html>
<html>

<head>
    <title>Demo</title>

    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.4.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/bootstrap.min.js"></script>

    <style>
        .gly-ani {
          animation: ani 2s infinite linear;
        }
        @keyframes ani {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(359deg);
          }
        }
    </style>  
</head>

<body>
<div class="container">

    <span class="glyphicon glyphicon-refresh gly-ani" style="font-size:40px;"></span>

</div>
</body>

</html> 
```

# css - Chrome 显示错误

> ID：11961439
> 
> 赞同：4
> 
> 时间：2012-08-14T21:58:46.433
> 
> 标签：css, google-chrome

我遇到了类似于旧的 IE peekaboo 错误的问题。有些文本在其他所有浏览器中都可见，但在 Chrome (v. 21.0.1180.77 m) 中它是隐藏的，直到在开发人员工具中突出显示或查看，此时它正常显示。

有没有其他人看过这个？有什么解决办法吗？

文字缺失：

[![缺少文字](../Images/e0c02a0ec09347dab2f5583b1eb3f576.png)](https://i.stack.imgur.com/mjwis.jpg)
[（来源：[116state.com](http://116state.com/img/missing_text.jpg)）]

突出显示或检查元素后的文本：

[![缺少文字](../Images/3390ffa465b43a5c9250bf5390bbba0e.png)](https://i.stack.imgur.com/QWilY.jpg)
[（来源：[116state.com](http://116state.com/img/missing_not_text.jpg)）]

网址：http: [//116state.com](http://116state.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T09:36:09.857

这可能与 Chrome 中的固定位置错误有关。

看这里：

[固定元素在 Chrome 中消失](https://stackoverflow.com/questions/11258877/fixed-element-disappears-in-chrome)

它建议将 -webkit-transform: translateZ(0) 添加到 position: fixed 元素。

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:05:12.033

在 chrome 23.0.1271.64 中存在相同类型的错误...尚不确定我是否已将其修复好，但以以下形式对元素应用良性仿射变换：

```
element {
    -webkit-transform: matrix(1.0, 0.0, 0.0, 1.0, 0.00, 0.01);
} 
```

似乎已经解决了这个问题......你的，ymmv，祝大家好运......

# c# - 关于 C# 中的内部访问修饰符

> ID：11961440
> 
> 赞同：-2
> 
> 时间：2012-08-14T21:58:52.793
> 
> 标签：c#, oop

我在使用*内部*访问修饰符时遇到问题。我还查看了[这个 URL](https://stackoverflow.com/questions/11280016/internal-access-modifier)，但面临这个问题，为什么下面的代码不能识别 BaseClass 的成员？

```
namespace Project1
{
    internal class BaseClass
    {
        public static int intM = 0;
    }
}

namespace Project1
{
    class TestAccess
    {
        static void Main()
        {
            BaseClass myBase = new BaseClass();
            Console.WriteLine(myBase.intM);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:01:20.677

这不是内部问​​题，但显然是静态问题。您的类成员是静态的，您正试图通过实例访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:02:11.407

编译器可能会抱怨“无法在非静态上下文中访问静态成员 intM”。问题是 intM 被定义为静态的，基本上意味着它属于类本身而不是它的任何一个实例，并且它不能像它确实属于一个实例一样被访问。您将改为访问此成员，如下所示：

```
Console.WriteLine(BaseClass.intM); 
```

您甚至不需要创建 BaseClass 实例来执行此操作。

# lua - 后挂钩函数，后处理并传递所有返回

> ID：11961442
> 
> 赞同：1
> 
> 时间：2012-08-14T21:59:05.917
> 
> 标签：lua, hook, return, post-processing

我有一个 post-hook 函数，它自己接收一些数据，引用另一个函数和`...`. 在引用的函数返回后，此函数会进行一些后处理。为简单起见，我们只记下时间：

```
function passthrough(tag, func, ...)
    metric1[tag] = os.time()
    func(...)
    metric2[tag] = os.time()
end 
```

由于我需要后处理，我不能立即`return func(...)`，我不知道会有多少退货。完成后处理后，如何通过这些退货？

到目前为止，我只能考虑打包调用，`local results = { func(...) }`然后使用`return unpack(results)`或制作一个后处理器工厂，该工厂将生成后处理闭包，并将所有必要的数据作为上值：

```
local function generate_postprocessor(tag)
    return function(...)
        metric2[tag] = os.time()
        return ...
    end
end

function passthrough2(tag, func, ...)
    metric1[tag] = os.time()
    return generate_postprocessor(tag)(func(...))
end 
```

然而，考虑到大量的迭代和应用程序的实时性，这两种方法都会引入一些不希望的开销。有没有更简单的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:05:15.700

你不需要关闭。`func`在调用闭包生成器之前调用。您只需要一个将其参数直接传递给其返回值的函数，即可为您的第二个标签提供一个挂钩点：

```
function passthrough_return(tag, ...)
    metric2[tag] = os.time()
    return ...
end

function passthrough(tag, func, ...)
    metric1[tag] = os.time()
    return passthrough_return(tag, func(...))
end 
```

您仍然会获得额外函数调用的开销，但这比创建闭包或表要好，而且远低于前/后处理的开销。

# mysql - 总订单

> ID：11961448
> 
> 赞同：2
> 
> 时间：2012-08-14T21:59:27.460
> 
> 标签：mysql, aggregate

我在 mysql 中的聚合公式遇到了一些问题。我怀疑该错误是因为计算机在排序/排序之前进行了聚合。有人可以建议一种更好的方法来汇总计数值，或者帮助我识别代码中的错误吗？这是结果表

```
date                hour         count     aggregate
August, 11 2012     20            1           170
August, 12 2012     19            1           58
August, 13 2012     14            1           44
August, 13 2012     15            1           75
August, 13 2012     21            1           72
August, 13 2012     23            1           80 
```

该表首先按日期排序，如果两次在同一天，则按小时排序。由于聚合函数是基于计数函数的，而计数列只是用 1 填充，所以聚合列**应该**显示 1、2、3、4...等 这是我的查询

```
SELECT   t1.original, t1.hour, t1.count,  SUM(t2.count) as aggregate 
FROM 
(SELECT  date(FROM_UNIXTIME( timecode)) as day,(hour(FROM_UNIXTIME( timecode)))  AS hour,(FROM_UNIXTIME( timecode)) AS original, COUNT(count)  as 'count'

 FROM sampleData
GROUP BY day, hour
order by original
) t1
INNER JOIN 
(SELECT date(FROM_UNIXTIME( timecode)) as day, (hour(FROM_UNIXTIME( timecode) )) AS hour,(FROM_UNIXTIME( timecode)) AS original, COUNT(count)  as 'count'
FROM sampleData
GROUP BY day, hour
order by original
) t2 
on t1.hour >= t2.hour
GROUP BY t1.hour
ORDER BY t1.original 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:20:27.530

您的查询中有两件事很突出。

首先，加入没有意义，因为它只是在小时。

我建议将其替换为：

t1.day > t2.day 或 (t1.day = t2.day and t1.hour >= t2.hour)

其次，您在外部 SELECT 中有 original 和 count ，但它们不在 group by 子句中。我认为最好将它们放在 group by 子句中或使用显式聚合函数（在本例中为 MIN() 或 MAX()）。这可以防止错误。

# ios - 使用自定义动画打开视图控制器

> ID：11961450
> 
> 赞同：0
> 
> 时间：2012-08-14T21:59:34.073
> 
> 标签：ios, animation, uiviewcontroller

我有一个包含许多图像的滚动视图。在一些图像被触摸后，我应该使用这个图像和被触摸的图像的相关图像打开新的视图控制器。现在我使用 pushViewController。

所以问题是。是否可以使用缩放动画打开新的 viewController？即用户触摸图像后，该图像正在放大到屏幕的中心（这已经是新的 viewController）

如果可能的话，请让我知道我能意识到什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:34:28.360

我有好消息和坏消息要告诉你。好消息是，可以做到！坏消息是它可能很复杂。

我最终这样做的方式如下

*   当用户点击图像时，您知道要缩放哪个图像，然后您获取参考和框架

*   在包含滚动视图的当前视图上覆盖一个新视图，然后添加一个新的 UIImageView，其中包含用户点击的另一个 UIImage（甚至可以是更高分辨率的版本）

*   为该视图设置动画以填充屏幕（此图像也可以在可缩放的滚动视图中，这是为了将来的工作！）

*   当您想关闭时，您将框架向下设置为滚动视图中的内容，然后删除覆盖视图

*   现在用户或多或少回到了点击之前的位置

# android - 按钮数组的 onclicklistener 给出空指针

> ID：11961456
> 
> 赞同：0
> 
> 时间：2012-08-14T22:00:17.947
> 
> 标签：android, arrays, button, nullpointerexception, onclicklistener

当我尝试为我创建的按钮实现 onclicklistener 时，我不断收到空指针异常。

```
 Button setHighBtn[] = null;
    Button setLowBtn[]=null;
    TextView tv[] = new TextView[oNumber];
    for (int i=0;i<oNumber;i++){
        tv[i] = new TextView(this);
        tv[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        tv[i].setText(oName[i]);
        tv[i].setTextSize(20);
        //tv[i].setLayoutParam)
        layout.addView(tv[i]);
        if (capability[i]==0){
            LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);               
            inflater.inflate(R.layout.full_capabilities, layout);   
            setHighBtn[i]=(Button)findViewById(R.id.setHigh);
            setHighBtn[i]=(Button)findViewById(R.id.setLow);
            setHighBtn[i].setOnClickListener(this);                             
            setLowBtn[i].setOnClickListener(this);
        }else{
            setHighBtn[i]=null;                         
            setLowBtn[i]=null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:02:42.673

写这篇文章的时候你期待什么？

```
Button setHighBtn[] = null;
Button setLowBtn[]=null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:13:36.327

我认为这是一个复制粘贴错误。你写了：

```
setHighBtn[i]=(Button)findViewById(R.id.setHigh);
setHighBtn[i]=(Button)findViewById(R.id.setLow); //This is supposed to be setLowBtn[i] 
```

然后设置一个`setLowBtn`尚未初始化的侦听器。将其编辑为：

```
setHighBtn[i]=(Button)findViewById(R.id.setHigh);
setLowBtn[i]=(Button)findViewById(R.id.setLow); 
```

# asp.net-mvc - 查找损坏的控制器操作

> ID：11961458
> 
> 赞同：2
> 
> 时间：2012-08-14T22:00:19.193
> 
> 标签：asp.net-mvc

如何找到损坏的 Html.ActionLinks？

例如，查找不再存在的`Html.ActionLink("View", "ViewCustomer", "Customer")`位置。`CustomerController.ViewCustomer()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:09:38.170

您可以使用[MVCContrib](http://mvccontrib.codeplex.com/wikipage?title=RedirectToAction&referringTitle=Documentation)中的强类型操作链接。

```
<%: Html.ActionLink<Home>(c => c.Index()) %> 
```

如果您使用已编译的视图，这些将在您删除引用的控制器方法时在编译时中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T00:08:23.327

如果您正在寻找系统方法安装（可以使用 NuGet）并应用[T4MVC](http://t4mvc.codeplex.com/)。

我在我自己的项目中做到了——你所有的魔法字符串（不仅是动作链接，而且所有需要字符串的东西）都在你的应用程序中消失了。您最终**只使用强类型**助手来消除文字字符串的使用。

特别是在您的情况下

```
@Html.ActionLink("View", "ViewCustomer", "Customer") 
```

会变成

```
@Html.ActionLink("Externalize me as well!", MVC.Customer.ViewCustomer()) 
```

如果您将建议的内容外部化，它将成为您要寻找的内容：

```
@Html.ActionLink(Config.ViewLabel, MVC.Customer.ViewCustomer()) 
```

*不是美女吗？* 我认为这应该是事实上的标准，而不是“字符串化”的方法。

查看它对您的项目的作用： 在视图中：

```
@Html.RenderPartial(MVC.Customer.Views.YourView) 
```

在控制器中：

```
return View(Views.YourView); 
```

或者

```
RedirectToAction(MVC.Home.MyAction().AddRouteValues(Request.QueryString)); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T01:57:45.267

接受的解决方案没有回答这个问题。这是我的解决方案（不确定是否需要 Resharper）。

1.  单击任何损坏的操作（如果必须，请创建一个）
2.  悬停红色灯泡
3.  悬停检查 MVC
4.  悬停在 > 中查找类似问题
5.  单击自定义范围
6.  限制您的范围（它可能会告诉您 10000 个质量问题）
7.  在结果中搜索“解决操作”

# clojure - Clojure defrecord - 如何使用它？跟进

> ID：11961463
> 
> 赞同：3
> 
> 时间：2012-08-14T22:00:38.257
> 
> 标签：clojure

再次免责声明：我是 Clojure 新手。谢谢您的帮助。

我之前的问题（[Clojure 的 defrecord - 如何使用它？](https://stackoverflow.com/questions/11958027/clojures-defrecord-how-to-use-it)）导致了一个有效的数据结构和方法：[https ://gist.github.com/3353281](https://gist.github.com/3353281)

问题：有没有办法避免将我的数据结构传递给对其进行操作的所有方法？或者这是你应该在惯用的 Clojure 中这样做的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:18:17.947

1.  数据应始终显式传递。
2.  如果您使用的是嵌套关联，您可能应该使用它`assoc-in`。

# ruby-on-rails - Ruby on Rails 项目中的未定义错误

> ID：11961465
> 
> 赞同：0
> 
> 时间：2012-08-14T22:00:51.907
> 
> 标签：ruby-on-rails, class

我对 Rails 很陌生，我偶然发现了这个问题。我猜这对你们专业人士来说会相对简单。我有一个名为 User 的模型，其中包含所有用户属性。我还创建了一个名为 list 的模型，现在我想要。我现在正在尝试从用户购买中调用 create 方法，执行以下操作（所有操作都发生在控制台中）

```
sample = User.create(#attributes here)
newlist = sample.List.create(#attributes here) 
```

然后我得到这个错误

```
irb(main):011:0> sample.Lists.new
NoMethodError: undefined method `Lists' for #<User:0x4146750> 
```

以下是我的用户和列表模型文件

```
# == Schema Information
#
# Table name: users
#
#  id                 :integer          not null, primary key
#  firstName          :string(255)
#  middleName         :string(255)
#  lastName           :string(255)
#  email              :string(255)
#  facebookexternalId :integer
#  userType           :integer
#  gender             :string(255)
#  description        :string(255)
#  location           :string(255)
#  image              :string(255)
#  password           :string(255)
#  notificationId     :string(255)
#  disabled           :boolean
#  disabledNotes      :string(255)
#  city               :string(255)
#  country            :string(255)
#  joinDate           :string(255)
#  created_at         :datetime         not null
#  updated_at         :datetime         not null

class User < ActiveRecord::Base

  attr_accessible :firstName, :middleName , :lastName ,:email , :facebookexternalId, :gender , :description, :location , :image , :city, :country, :disabled
   email_regex= /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
   validates :firstName , :presence =>true,
                          :length => {:maximum => 45}
   validates :lastName , :presence =>true,
                          :length => {:maximum => 45}
   validates :email , :presence =>true,
                     :format =>{:with => email_regex},
                     :uniqueness => {:case_sensitive => false}
  validates :description, :length => {:maximum => 140}

  has_many :lists
end 
```

列表

```
# == Schema Information
#
# Table name: lists
#
#  id          :integer          not null, primary key
#  name        :string(255)
#  user_Id     :integer
#  active      :boolean
#  type        :string(255)
#  description :string(255)
#  roughList   :boolean
#  created_at  :datetime         not null
#  updated_at  :datetime         not null
#

class List < ActiveRecord::Base
  belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:05:36.933

您应该使用 list 的复数形式，类似于，

`sample_user.lists.create`...

或者

`sample_user.lists.new`

就像您在 :has_many 中如何命名它一样

# html - IE 中的页面宽背景并不总是加载

> ID：11961471
> 
> 赞同：0
> 
> 时间：2012-08-14T22:01:41.957
> 
> 标签：html, css

我有一个正在开发的网站，它使用图像作为整个网站的背景。在 FF 和 Safari 中运行良好。但是 IE 有一些麻烦。有时它根本不加载图像，有时它被部分加载，有时它在一两秒后加载。

除此之外，据说我发现的 IE 证明黑客并不是那么 IE 证明。关于如何在纯 CSS 中使用图像作为网站的完整背景的任何想法？

我已经将 html/css 剥离到可能的相关部分；完整的例子在[http://www.topografieindeklas.nl/home](http://www.topografieindeklas.nl/home)

**的HTML**

```
<body>
<div id="header">
    <div id="headerWrap" class="alignCenter">
        <p>Topografie</p>
    </div><!-- end headerWrap -->
</div><!-- end header -->

<div id="menu">
    <div id="menuWrap" class="alignCenter">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li
        </ul>
    </div><!-- end menuWrap -->
</div><!--- end menu -->

 <div id="page">
    <div class="pageBrandingWrap">
        <div class="pageBranding alignCenter">
            <h1>Title</h1>
        </div>
    </div><!-- End pageBrandingWrap -->

    <div class="entrytextWrap">
        <div class="entrytext alignCenter">
            <h2><?php the_title(); ?></h2>
            <?php the_content(); ?>
        </div>
    </div><!-- End entrytextWrap -->
</div><!-- end page -->

<div class="clear"></div>
    <div id="footer">
        <div id="footerWrap" class="alignCenter">

        </div><!-- end footerWrap -->
    </div>
</body>

</html> 
```

CSS

```
/* Correct/normalize default browser styles */
@import url('style/normalize.css');
/* Import the open sans font */
@import url(http://fonts.googleapis.com/css?     family=Open+Sans:300italic,400italic,600italic,400,300,700,800,600);

*{
margin:0px;
padding:0px;
}
html{
min-height: 100%;
background-size: cover;
background-image: url(style/img/masterBG.jpg);
background-repeat: no-repeat;
background-position: right bottom;
background-attachment:fixed;
 }
body{
min-height:100%;/*Corrects the full image background*/
font-family:Arial, Helvetica, sans-serif;;
font-size:14px;
text-align: center;
}
#header, #branding, #menu, #page, #footer{
width:100%;
}
#header{
margin:20px 0 0 0;
background: rgb(255, 255, 255) transparent;/* Fallback for web browsers that doesn't support RGBa */
background: rgba(255, 255, 255, 0.75);/* RGBa with 0.6 opacity, for non-stupid browsers */
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#BFFFFFFF, endColorstr=#BFFFFFFF);/* For IE 5.5 - 7*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#BFFFFFFF, endColorstr=#BFFFFFFF)";/* For IE 8*/
}
#headerWrap, #brandingWrap, #menuWrap{
width:900px;
font-family: 'Open Sans', sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:27:46.357

您在 IE 中使用较大图片时遇到的问题是超时问题。然而，虽然您不是第一个报告小于 10 秒的超时，但[msdn](http://support.microsoft.com/kb/181050/en)官方指定*至少*30 秒：

```
Internet Explorer imposes a time-out limit for the server to return data. 
By default, the time-out limit is as follows:
Internet Explorer 4.0 and Internet Explorer 4.01     5 minutes  
Internet Explorer 5.x and Internet Explorer 6.x     60 minutes
Internet Explorer 7   and Internet Explorer 8       60 minutes

When the server is experiencing a problem, Internet Explorer does not 
wait endlessly for the server to return data.

Applications that use the WinINet API directly will experience the 
following ReceiveTimeout values:

WinINet.dll version  4.x              5 minutes
WinINet.dll versions 5.x and 6.x     60 minutes
WinINet.dll versions 7.x and 8.x     30 seconds 
```

正如在此 msdn 上指出的那样，您可能还想检查您的注册表：
`HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings`是否有一个名为 的键`ReceiveTimeout`，如果存在则删除。“在野外”它通常由“InstallAware”或“WebUI Studio”等软件设置，以防止“他们的安装程序被卡住”。但他们不会重置它。

然而，在现实生活中，它经常被证明是服务器端问题，HTTP/1.1 的 Keep-Alive 行为或连接的错误/古老设置：HTTPS 连接的关闭语义。

我有时在这里看到的其他解决方案之一是将图像切成 2 或 4 个较小的图像。我不想解释其他人的工作（“窃取”半个网站），所以显然我不允许将您指向答案链接。使用谷歌并在 SO 上搜索“延迟加载”脚本。

祝你好运！！

ps：在我个人的经验中，我看到 IE 经常扼杀（过度）使用像 DXImageTransform 这样的活动 css 玩具

# java - Android/Java - 如何从 Web 服务中检索图像并显示它

> ID：11961473
> 
> 赞同：0
> 
> 时间：2012-08-14T22:01:45.740
> 
> 标签：java, android

我正在使用通常返回 JSON 响应的 Web 服务的一些服务，但是当我发送用户 ID 时，一项服务返回静态 GIF 图像（非动画）。

我正在做的程序是：

1.使用 DefaultHttpClient 连接到 Web 服务
2.使用此实用方法将接收到的 InputStream 转换为字符串：

```
public static String inputStreamToStringScanner(InputStream in) {

  Scanner fileScanner = new Scanner(in);
  StringBuilder inputStreamString = new StringBuilder();
  while(fileScanner.hasNextLine())
    inputStreamString.append(fileScanner.nextLine()).append("\n");
  fileScanner.close();

  return inputStreamString.toString();
} 
```

3.存储转换后的接收到的String，用于处理服务器响应。

对于图像服务，当我看到转换后的字符串时，它的开头是这样的：“GIF89a?��?�� ...”

这是一个静态 GIF 文件。

我无法在 ImageView 中显示图像，我尝试了在网络上找到的不同方法：

```
public void onPhotoFinished (String responseData) {

  InputStream is = new ByteArrayInputStream(responseData.getBytes());
  Bitmap bm = BitmapFactory.decodeStream(is);
  userImage.setImageBitmap(bm);
} 
```

这是我也尝试过的其他东西：

```
public void onPhotoFinished (String responseData) {

  InputStream is = new ByteArrayInputStream(responseData.getBytes());
  final Bitmap bm = BitmapFactory.decodeStream(new BufferedInputStream(is));
  userImage.setImageBitmap(bm);
} 
```

这也不起作用：

```
public void onPhotoFinished (String responseData) {

  InputStream is = new ByteArrayInputStream(responseData.getBytes());
  Drawable d = Drawable.createFromStream(is, "src name");
  userImage.setImageDrawable(d);
} 
```

最后，这也不起作用：

```
public void onPhotoFinished (String responseData) {

  Bitmap bm = BitmapFactory.decodeByteArray(responseData.getBytes(), 0, responseData.getBytes().length);
  userImage.setImageBitmap(bm);
} 
```

在 Logcat 我收到“解码器->解码返回假”

似乎没有任何效果......关于什么是错的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:16:33.570

最后，我使用 FlushedInputStream 解决了它，并直接使用输入流，避免转换为字符串：

```
static class FlushedInputStream extends FilterInputStream { 

public FlushedInputStream(InputStream inputStream) {
    super(inputStream);
}

@Override
public long skip(long n) throws IOException { 

  long totalBytesSkipped = 0L;
  while (totalBytesSkipped < n) { 
    long bytesSkipped = in.skip(n - totalBytesSkipped);
    if (bytesSkipped == 0L) { 
      int byteReaded = read();
      if (byteReaded < 0) {
          break; 
      } else {
          bytesSkipped = 1;
      }
    }
    totalBytesSkipped += bytesSkipped;
  }
  return totalBytesSkipped;
}

} 
```

和：

```
Bitmap bitmapResponseData = BitmapFactory.decodeStream(new FlushedInputStream(is)); 
```

问候

# javascript - 如何将输入标签中的两个数字相加？

> ID：11961474
> 
> 赞同：1
> 
> 时间：2012-08-14T22:01:55.590
> 
> 标签：javascript, input, tags

> **可能重复：**
> [如何添加两个字符串，就好像它们是数字一样？](https://stackoverflow.com/questions/8976627/how-to-add-two-strings-as-if-they-were-numbers)

我写了一个简单的 JavaScript 代码，我想使用两个输入框并从两个值中添加数字。这是代码，我看到的结果是 1520 而不是 35。

我该如何解决？

```
n1 <input type = "number" id = "n1" value=15 />
n2 <input type = "number" id = "n2" value=20 />

<p>Sum?</p>
<button onclick="sum()">Try it</button>
<p id="demo2">Result?? </p>

<script type="text/javascript">
 function sum() 
{ 
    var fn, ln; 
    fn = document.getElementById("n1").value; 
    ln = document.getElementById("n2").value; 
    result =  (fn+ln); 
    document.getElementById("demo2").innerHTML = result; 
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:03:39.413

使用`parseInt()`, 或`parseFloat()`; 您遇到的问题是您连接两个字符串，而不是添加两个数字。`parseInt()`（假设它找到一个实数）通过将字符串转换为数字来解决该问题：

```
 function sum() 
{ 
    var fn, ln, result; 
    fn = parseInt(document.getElementById("n1").value, 10);
    ln = parseInt(document.getElementById("n2").value, 10);
    result =  (fn+ln); 
    document.getElementById("demo2").innerHTML = result; 
} 
```

`, 10`之后出现的是`value`基数，它确保返回的数字（如果有）将是哪个数字基数。

另请注意，`result`变量也应在函数内声明，以避免污染全局范围（并可能在其他地方与其他变量产生问题）。

参考：

*   [`parseFloat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat).
*   [`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T22:03:40.753

```
result =  (parseFloat(fn)+parseFloat(ln)); 
```

# java - 写入键盘缓冲区，在自己的应用程序之外使用

> ID：11961477
> 
> 赞同：0
> 
> 时间：2012-08-14T22:02:10.410
> 
> 标签：java, operating-system, awtrobot, keystroke

我正在编写一个获取 Apple Remote 信号的应用程序，并且我已经读完遥控器上的硬件输入。现在我必须在遥控器上复制这些输入，例如键盘缓冲区或任何存在的东西。我注意到 java.awt.Robot 中有一个 Java 类，但命令只是发送到 Java 应用程序本身而不是系统范围（！），如果我错了，请纠正我。

但是我需要一个解决方案，让我的程序在系统范围内虚拟地按下键盘，例如在同时启动的程序（如 MS Powerpoint）中支持使用箭头键的翻页。

有什么建议么？

我的机器人“罗伯特”（因为我来自德国）的不工作示例应该在系统范围内而不是在应用程序范围内传递按下的按钮。

```
switch(line) {
        case LEFT: System.out.println("left");
                   robert.keyPress(37);
                   robert.keyRelease(37);
                   break;
        case RIGHT: System.out.println("right");
                    robert.keyPress(39);
                    robert.keyRelease(39);
                    break;
        case UP: System.out.println("up");
                    robert.keyPress(38);
                    robert.keyRelease(38);
                    break;
        case DOWN: System.out.println("down");
                    robert.keyPress(38);
                    robert.keyRelease(38);
                    break;
        case PLAYPAUSE: System.out.println("play pause");
                    robert.keyPress(516); // dollar sign
                    robert.keyRelease(516);
                    break;
        case MENU: System.out.println("menu");
                    robert.keyPress(515); // euro sign
                    robert.keyRelease(515);
                    break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:48:58.907

实际上，Robot 类将能够在“系统范围内”控制您的鼠标和键盘，也就是说，您可以使用它来模拟另一个应用程序的键盘输入。然而，要让这个应用程序接收“击键”，它实际上必须具有焦点（“激活”）。

# model-view-controller - 从控制器写入数据以查看 javascript

> ID：11961478
> 
> 赞同：0
> 
> 时间：2012-08-14T22:02:10.077
> 
> 标签：model-view-controller, jquery, unobtrusive-javascript

我需要从控制器获取一些数据到视图中的 JavaScript 中。我有以下方法：

```
 private JsonResult GetSection()
         {
            string orderId = (orderService.GetOrder(UserSEssion)).Id.ToString();
            return this.Json(orderId);
          } 
```

我在视图中有以下内容：

```
 <script type="text/javascript">
         lpAddVars('page', 'Section', + GetId()+); 
         function GetId() {
         $.getJSON("/Checkout/GetSection", null, function (data) {
         someThing = data;
        });
      }
     </script> 
```

对于如何做到这一点，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:23:18.643

orderId 是否已经是您模型的一部分？您将能够通过模型在视图中访问它。如果你需要你正在使用的方法，我会先将方法公开，你可能还需要将 http 动词属性放在它上面 HttpGet

# ruby-on-rails - 在 ActionMailer 中禁用某些电子邮件

> ID：11961480
> 
> 赞同：1
> 
> 时间：2012-08-14T22:02:21.500
> 
> 标签：ruby-on-rails, actionmailer, environment

我想在开发和测试/登台服务器上关闭某些电子邮件，但继续在生产中发送它们。我目前所做的是将这些管理邮件的默认“收件人”地址设置为空白：

```
 default :to => Rails.env.production? ? "admin-list@sharethevisit.com" : "" 
```

但是，当我测试应该发送的用户邮件时，这会将堆栈跟踪放在我的开发日志中。

是否有更有效的方法可以根据当前环境禁用某些电子邮件？我尝试检查函数本身，但并不理想，因为我必须更改每个函数，而且它实际上不起作用......它只是在呈现电子邮件并创建不同的堆栈跟踪之前无法设置所需的 @account 变量.

```
 def user_registered_notify_email(account)
    if Rails.env.production?
      @account = account
      mail(:subject => "New user registered: #{@account.full_name}")
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:36:11.903

我通常使用此处描述的邮件拦截器：http: [//asciicasts.com/episodes/206-action-mailer-in-rails-3](http://asciicasts.com/episodes/206-action-mailer-in-rails-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:06:16.620

我不记得我在哪里找到这个归功于作者，但这就是我在开发模式下重定向电子邮件的方式。为此在 RAILS_ROOT/config/initializers 中创建一个新文件。DEFAULT_DEV_EMAIL_OVERRIDE 在我们的主站点配置中定义了其他静态值。

```
if Rails.env.development?
  if Rails.version =~ /^2\./
    class ActionMailer::Base
      def create_mail_with_overriding_recipients
        mail = create_mail_without_overriding_recipients
        mail.to = DEFAULT_DEV_EMAIL_OVERRIDE
        mail
      end
      alias_method_chain :create_mail, :overriding_recipients
    end
  elsif Rails.version =~ /^3\./
    if Rails.env.development?
      class OverrideMailRecipient
        def self.delivering_email(mail)
          mail.to = DEFAULT_DEV_EMAIL_OVERRIDE
        end
      end
      ActionMailer::Base.register_interceptor(OverrideMailRecipient)
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-26T19:35:27.777

考虑使用拦截器设置`Mail::Message#perform_deliveries`为`false`：

```
class NeverDeliverInterceptor
  def self.delivering_email(message)
    message.perform_deliveries = false
  end
end

if !Rails.env.production?
  ActionMailer::Base.register_interceptor(NeverDeliverInterceptor)
end 
```

[有关源代码和其他用法，请参阅 API 文档](http://www.rubydoc.info/github/mikel/mail/Mail%2FMessage%3Aperform_deliveries)。

# css - 更新了高分辨率设备的媒体查询

> ID：11961481
> 
> 赞同：2
> 
> 时间：2012-08-14T22:02:22.720
> 
> 标签：css, cross-browser, media-queries

牢记渐进增强、浏览器/设备支持、“移动优先”和多种 iOS“视网膜”显示比例......这个目标是否正确并且仍然提供旧版支持？

```
@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (   min--moz-device-pixel-ratio: 2),
only screen and (     -o-min-device-pixel-ratio: 2/1),
only screen and (        min-device-pixel-ratio: 2),
only screen and (                min-resolution: 192dpi),
only screen and (                min-resolution: 2dppx) { @import '2x'; } 
```

我已经看到它看起来几乎太容易了：

```
@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and ( min-resolution: 192dpi) { @import '2x'; } 
```

最小分辨率参考：[http ://www.w3.org/TR/css3-values/#resolution](http://www.w3.org/TR/css3-values/#resolution)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:15:57.310

由于 safari 和 android 都使用 webkit 引擎，因此第二个代码块针对整个 Apple 产品线以及任何带有 chrome 的桌面或移动设备或使用 Blink 引擎（Webkit 的一个分支）的 Opera 的较新版本. 第一个代码块针对所有 Web 浏览器以及前面提到的。

括号内的代码提示，您可以将 2x.css 文件中的代码直接放入括号中。浏览器不仅会更快地解析和渲染 css，因为它就在媒体查询之后，而且还会阻止使用 @import 语句，这会进一步降低浏览器的速度。

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) and ( min-resolution: 192dpi) {
    body {
        background: brown;
    }

    #wrapper {
        background: green;
    } 
} 
```

这是您在使用媒体查询时要做的事情，并避免`only screen`在每个规范之间使用和逗号；就`and`足够了。

# java - 在 JAVA 中为 MySQL PreparedStatment 绑定 NULL？

> ID：11961486
> 
> 赞同：1
> 
> 时间：2012-08-14T22:02:54.107
> 
> 标签：java, mysql, data-binding, prepared-statement

MySQL 使用“IS NULL”而不是“NULL”，那么我如何绑定变量来实现相同的效果？

现在我试着用这个

```
selectStmt.setNull( 2, java.sql.Types.VARCHAR ); 
```

当我打印“java.sql.Types.VARCHAR”时显示值 = 12？如果是这样，这如何在preparedstatment 中设置“IS NULL”？

**更多细节：**

即如果我在输入中有字符串=“”，我有兴趣查询（MySQL）是否为空。所以逻辑是这样的，

```
Connection c = SQLCon.connect();
PreparedStatement selectStmt = c.prepareStatement( "select * from "
                                    + TableName
                                    + " where P = ? AND M = ? AND PR = ? AND DR = ? " );

if ( P.trim().equals( "" ) ) 
{
   selectStmt.setNull( 1, java.sql.Types.VARCHAR );
} else 
{
   selectStmt.setString( 1, P );
}

if ( M.trim().equals( "" ) ) 
{
   selectStmt.setNull( 2, java.sql.Types.VARCHAR );
} else 
{
   selectStmt.setString( 2, M );
} 
```

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:22:59.387

如果您想将 where 子句中可能为 null 的列与可能为 null 的参数匹配，则实际上需要将其绑定两次，因为在 SQL 中，null 不等于其他任何内容，甚至是另一个 null。

```
PreparedStatement stmt = conn.prepareStatement("select * from foo where (? is null and bar is null) or (bar = ?)");
col = 1;
setVarchar(stmt, col++, var);
setVarchar(stmt, col++, var);

void setVarchar(PreparedStatement stmt, int col, String var)
{
  if (var == null)
    stmt.setNull(col, java.sql.Types.VARCHAR);
  else
    stmt.setString(col, var);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:07:52.733

这看起来很奇怪，但你这样做：

```
if (variable == null) {
  selectStmt.setNull(2, java.sql.Types.VARCHAR);
} else {
  ...
} 
```

这背后的原因是因为`NULL`是数据库中的值，而`null`在 Java 中没有值。有时，您需要区分从数据库中取回 a`NULL`与从数据库中取回任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T21:42:01.347

这是一个 xml 输入，在 UI 用户上看到 NULL 为空白，因此发送空白作为输入

```
if ( P.trim().equals( "" ) )
  {
    sql += "P IS NULL";
  }
   else
  {
    sql += "P = ?";
  }

PreparedStatement selectStmt = c.prepareStatement( sql );

int i = 1;
// used to prevent index out of range issues

// Binding values for non-null strings ONLY
 if ( !(P.trim().equals( "" )) )
  {
    selectStmt.setString( i, P );
  i++;
  } 
```

# linux - 理解从进程内核栈获取task_struct指针

> ID：11961490
> 
> 赞同：5
> 
> 时间：2012-08-14T22:03:27.697
> 
> 标签：linux, linux-kernel

现在我正在阅读 Robert Love 的《Linux Kernel Development 3d Edition》一书。在那里，他写了包含指向 task_struct 结构的指针的 thread_info 结构，据我所知，它位于进程内核堆栈的底部或顶部（取决于架构）。直到最近我才熟悉 Linux 内核 API，也不知道 current() 方法的存在。书中有一段摘录与 current() 方法的实际工作原理有关：

> 在 x86 上，通过屏蔽堆栈指针的 13 个最低有效位来计算 current 以获得 thread_info 结构。这是由 current_thread_info() 函数完成的。这里显示了程序集：movl $-8192, %eax andl % esp, %eax 这里假设栈大小为 8KB。当 4KB 栈被启用时，4096 被用来代替 8192。

我的问题是：

1.  据我所知，如果我们将十进制值表示为一组位，那么该组中只有一个最低有效位，不是吗？
2.  神奇的数字13是什么？

对于那些将阅读本主题的人来说，我提出的问题可能会导致作者没有正确理解内存分配和管理过程的结论。好的，这可能是正确的，因为在我看来，我可以将分配给堆栈的内存表示为充满位（或字节）的功能区。所有这些字节都可以由一个特定的内存地址访问，表示为一些十进制值。栈的起点是最低内存地址，栈尾是内存地址的最高值。但是如何，我们如何才能获得指向位于堆栈末尾的 thread_info 结构的指针，仅通过屏蔽位于任意位置的堆栈指针的 13 个最低有效位（如果我理解正确，我们屏蔽了堆栈的位指针 ADDRESS 表示为十进制值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:13:47.580

每个进程只获得 8192 字节的内核堆栈，与 8192 字节的边界对齐，因此每当堆栈指针被压入或弹出更改时，低 13 位是唯一更改的部分。2**13==8192。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T23:00:10.117

内核栈在顶部包含一个特殊的结构[——thread_info](http://lxr.free-electrons.com/source/arch/x86/include/asm/thread_info.h#L26)：

```
 26 struct thread_info {
 27         struct task_struct      *task;          /* main task structure */
 28         struct exec_domain      *exec_domain;   /* execution domain */
 29         __u32                   flags;          /* low level flags */
 30         __u32                   status;         /* thread synchronous flags */
 31         __u32                   cpu;            /* current CPU */
 32         int                     preempt_count;  /* 0 => preemptable,
 33                                                    <0 => BUG */
 34         mm_segment_t            addr_limit;
 35         struct restart_block    restart_block;
 36         void __user             *sysenter_return;
 37 #ifdef CONFIG_X86_32
 38         unsigned long           previous_esp;   /* ESP of the previous stack in
 39                                                    case of nested (IRQ) stacks
 40                                                 */
 41         __u8                    supervisor_stack[0];
 42 #endif
 43         unsigned int            sig_on_uaccess_error:1;
 44         unsigned int            uaccess_err:1;  /* uaccess failed */
 45 }; 
```

因此，要获得，`task_struct`您需要从 ASM 代码中获取带有[GET_THREAD_INFO](http://lxr.free-electrons.com/source/arch/x86/include/asm/thread_info.h#L183)`thread_info`的指针：

```
183 /* how to get the thread information struct from ASM */
184 #define GET_THREAD_INFO(reg)     \
185         movl $-THREAD_SIZE, reg; \
186         andl %esp, reg 
```

...或使用C 代码中的[current_thread_info](http://lxr.free-electrons.com/source/arch/x86/include/asm/thread_info.h#L174)：

```
174 /* how to get the thread information struct from C */
175 static inline struct thread_info *current_thread_info(void)
176 {
177         return (struct thread_info *)
178                 (current_stack_pointer & ~(THREAD_SIZE - 1));
179 } 
```

请注意，对于 x86_32 和 x86_64，定义为等于 1，因此结果`THREAD_SIZE`为8192（2^13 或 1<<13）。`(PAGE_SIZE << THREAD_SIZE_ORDER)``THREAD_SIZE_ORDER``THREAD_SIZE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-17T15:33:15.917

> 但是如何，我们如何才能获得指向位于堆栈末端的 thread_info 结构的指针，仅通过屏蔽掉任意位于堆栈指针的 13 个最低有效位

请注意，底部和限制（顶部）地址（假设自下而上的堆栈，较高的地址位于底部）必须是堆栈大小的倍数。例如，如果堆栈大小为 8192 (=2^13)，则 13 个最低有效位对于底部地址和极限地址都必须全部为 0。最低有效 13 位在某种意义上不是任意的，因为它给出了底部地址和限制地址之间的偏移量，两者都以 13 个 0 结尾。因此，屏蔽掉最不重要的 13 位可以得到限制地址的地址，也就是 thread_info 结构所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T07:35:36.403

我的 2 位：请注意，“当前”的实现是依赖于架构的。到目前为止的答案集中在 x86 上；Linux OS 上的其他拱门采用了各种获取 thread_info 和 task_struct 的方法。

例如，显然 PPC 使用一个寄存器（它是 RISC，记住，有很多 GPR）来存储 current 的值 - 实际上将其渲染为硬件上下文的一部分！这将非常快。

现代 x86 端口（我查找了 4.1.0 内核源代码）使用 per-cpu 数据以快速且无锁的方式实现 current。等等...

# .net - 我可以在 IronPython 中加载同一个 DLL 的两个版本吗

> ID：11961491
> 
> 赞同：2
> 
> 时间：2012-08-14T22:03:33.780
> 
> 标签：.net, dll, clr, ironpython

我有一个同时进行加密和解密的 DLL，但是在客户端站点上，当字符串被加密然后发送到另一台机器以通过 Web 服务解密时，解密失败。

目前我已经测试过目标机器上的 DLL 可以很好地加密和解密字符串。我想做的是从两台机器（不同版本）中获取 DLL，将它们加载到 IronPython 脚本中，让一个 DLL 加密，另一个 DLL 解密。我知道我可以将它们都加载到 clr.References 中，因为它们因版本而异，但是在那之后我如何区分它们呢？

这是我现在使用单个 DLL 的内容：

```
from Some.Dll import SecurityUtils
from System.Text.Encoding import UTF8

import clr

class Codec:
def __init__(self, publicKey):
    self.decryptedBytes = None
    self.encryptedString = None
    self.publicKey = publicKey

def encrypt(self, text):
    #dir = os.path.dirname(__file__);
    #dir = os.path.join(dir, '..');
    #dir = os.path.join(dir, 'oldsystem');

    #dir = sys.path.append(dir)
    #clr.AddReference(r'Some.Dll')

    textBytes = UTF8.GetBytes(text)
    self.encryptedString = SecurityUtils.Encrypt_RSA(textBytes, self.publicKey)

def decrypt(self):
    self.decryptedBytes = SecurityUtils.Decrypt_RSA(self.encryptedString)

def getDecryptedString(self):
    return UTF8.GetString(self.decryptedBytes) 
```

# html - 当所有锚点时，文本不会换行到元素

> ID：11961498
> 
> 赞同：0
> 
> 时间：2012-08-14T22:04:00.780
> 
> 标签：html, css

[http://jsfiddle.net/awWmY/](http://jsfiddle.net/awWmY/)

对于我的生活，我无法解决这个简单的问题。为什么文本不会换行`#bigEnough`？

```
html{background:black;}

#bigEnough {
  width: 500px;
  text-wrap: normal;
}
#bigEnough a {
  -moz-transition: none !important;
  -webkit-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  -moz-transition: none;
  -webkit-transition: none;
  -o-transition: none;
  -ms-transition: none;
  transition: none;
}
#tagCloud {
  height: 500px;
  width: 500px;
  float: right;
  margin: -45px 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:20:17.197

我能找到的最简单的解决方案（具有完整的跨浏览器实现）是`display: inline-block`在`a`元素上使用：[JS Fiddle demo](http://jsfiddle.net/davidThomas/awWmY/7/)。

请注意，我还增加了页面的宽度，以显示单词也将占据可用空间的相同行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:17:39.930

添加`word-break: break-word;`到您的`#bigEnough`CSS 将强制单词换行，但**不会**`anchor`在几个标签之间的断点处。我不知道这是否是您想要实现的行为，但这里有一个演示：[jsFiddle](http://jsfiddle.net/awWmY/5/)。

希望以任何方式有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:15:36.403

正如其他人所指出的，您确实应该在`a`元素之间留一些空白。但是，如果您无法更改标记，则可以在生成的内容中注入不间断空格 U+200B（这是换行的机会）：

```
#bigEnough a:after { content: "\200B"; } 
```

通常的 CSS 警告适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T22:22:11.337

不确定您要达到的目标，但如果这是您需要的，您可以尝试

```
#bigEnough a {
    display:inline-block;
    /* rest of your styles*/  
} 
```

[**演示**](http://jsfiddle.net/awWmY/8/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T22:12:00.503

因为自动换行取决于单词之间是否有空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T22:13:57.343

其他的都是对的，你需要用空格来换行。但是，如果您想避免这样做，我已经取得了成功：

*   [连字符](http://code.google.com/p/hyphenator/)

Hyphenator 是一种 JavaScript 解决方案，它可以自动换行长词，以便它们适合其父容器，并在换行的位置插入连字符。

# jquery - 可以在搜索时显示 jQuery 自动完成的下拉菜单吗？

> ID：11961499
> 
> 赞同：2
> 
> 时间：2012-08-14T22:04:04.210
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我希望能够在搜索发生时在自动完成下拉列表**中显示加载图标。**我该怎么做呢？

当前代码：

```
$("#searchbox").autocomplete({
  search: function(event, ui) {
    $('ul.ui-autocomplete').append("<li id='loading_icon'></li>");
    $('ul.ui-autocomplete').show();
  },
  open: function(event, ui) {
    $('#loading_icon').hide();
  }
 ... 
```

但是会发生的是图标显示在浏览器页面的最左上角。位置的计算还没有发生。我可以以某种方式调用来计算自动完成下拉框的位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:43:21.777

这是可行的，但您必须将`source`选项转换为函数并自己发出 AJAX 请求。例如：

```
$("#selector").autocomplete({
    source: function (request, response) {
        /* Show the loading indicator while a search is in progress */
        response([{ label: "Loading...", loading: true }]);
        $.ajax({
            url: "your_url_here",
            data: request,
            type: "GET",
            dataType: "json"
        }).success(response);
    },
}).data("autocomplete")._renderItem = function (ul, item) {
    var $li = $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a>" + item.label + "</a>")
        .appendTo(ul);

    /* Make sure nothing happens when you click "Loading" */
    if (item.loading) {
        $li.find("a").on("click", false);
    }
}; 
```

覆盖的最后一位`_renderItem`是这样做的，以便我们可以取消加载项的单击事件（并防止它被放置在 中`input`）。

**示例：http:** [//jsfiddle.net/m3MGH/](http://jsfiddle.net/m3MGH/)

* * *

*更新，每条评论如下：*

要在 a 中显示加载图像`div`，您可以执行以下操作（只需更改`_renderItem`函数）：

```
.data("autocomplete")._renderItem = function(ul, item) {
    var $li = $("<li></li>");

    if (item.loading) {
        $li.append("<div>Loading<img src='my_loading_img' /></div>").appendTo(ul);                
    } else {
        $li.data("item.autocomplete", item).append("<a>" + item.label + "</a>").appendTo(ul);
    }

    return $li;
}; 
```

您可能必须使用一点 CSS 才能使事物定位正确，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:32:29.073

这最初对我不起作用。为了让我的工作，我必须做的更改是覆盖 _renderItemData 类而不是 _renderItem 类，并返回 $li 对象。

```
element.autocomplete({
               ...
     }).data("autocomplete")._renderItemData = function (ul, item) {
          var $li = $("<li></li>")
          .data("item.autocomplete", item)
          .append("<a>" + item.label + "</a>")
          .appendTo(ul);

                        /* Make sure nothing happens when you click "Loading" */
          if (item.loading) {
              $li.find("a").on("click", false);
          }
          return $li;
      }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T13:32:59.820

我认为

```
if (item.loading) {
    $li.find("a").on("click", false);
} 
```

还不够，因为 jQuery 自动完成对按下 Tab 和 Enter 按钮的反应方式与鼠标单击相同。自动完成也会对向上和向下按钮做出反应。

任何人都可以提出解决此问题的解决方案吗？

# c# - 将 GhostDocs 与 C# 结合使用有什么特别的好处

> ID：11961501
> 
> 赞同：0
> 
> 时间：2012-08-14T22:04:33.797
> 
> 标签：c#, ghostdoc

GhostDocs 的重点显然是记录您的代码。它要求您很好地命名您的方法。然而，对于命名良好的方法，理论上它们不应该足够有用以被视为文档吗？

我只想听听当前用户的一些优点/缺点，因为我不想下载它并用不必要和重复的文档弄乱我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:08:50.317

虽然自记录代码会有所帮助，但如果您只需要它，那么没有人会参考 MSDN（顺便说一下，它是 .NET 库本身中 XML 文档的扩展的、语言合并的 HTML 形式）。

XML-doc 注释允许您描述类、方法、参数和其他成员，这比使用标识符更详细。您可以推荐最佳实践，阻止对代码的不正确或“hack-y”使用，详细说明可能出错的原因以及原因等。当您的源代码不正确时（如果您正确编译），此信息可用，并且当您的代码不像您想象的那样自我记录时，这是非常宝贵的（您可能认为很明显的许多事情是因为您以某种方式思考，而不是每个人都会以相同的方式思考）。

# css - 有条件的 CSS3 ......如果这就是它的名字

> ID：11961503
> 
> 赞同：2
> 
> 时间：2012-08-14T22:04:45.323
> 
> 标签：css, conditional, transition

我有一个搜索栏，旁边有一些社交媒体按钮。当我单击它时，我想使用 CSS3 Transition 属性来改变条的宽度，但我也需要按钮来移动。这是我到目前为止所拥有的

```
#s
{
transition: width 2s;
-moz-transition: width 2s; /* Firefox 4 */
-webkit-transition: width 2s; /* Safari and Chrome */
-o-transition: width 2s; /* Opera */
}

#s:focus {
width:110px;
}

.search input[type="text"], .widget_search input[type="text"] {
background-image: url(api/images/icons/search.png);
background-repeat: no-repeat;
background-position: 8px 50%;
padding-left: 25px;
width: 80%;
-moz-border-radius: 1em;
-webkit-border-radius: 1em;
border-radius: 1em;
}

#searchform #searchsubmit {
clear: both;
display: block;
margin: 10px 0;
} 
```

文本字段的宽度改变得很好，但重申一下，我想知道当我单击文本字段时是否可以更改文本字段旁边的按钮的位置。

```
<div id="header-widget-area" class="widget-area" role="complementary">
    <div id="pc_info_widget_designfolio-4" class="widget pc_info_widget">
        <a class="sm-icon" target="_blank" href="http://www.facebook.com/TheRedBalloonToyStore">
        <img width="32" height="32" alt="Facebook" src="http://redballoontoystore.com/w/wp-content/themes/designfolio/images/facebook.png">
        </a>
        <a class="sm-icon" target="_blank" href="http://twitter.com/RBToyStore">
        <img width="32" height="32" alt="Twitter" src="http://redballoontoystore.com/w/wp-content/themes/designfolio/images/twitter.png">
        </a>
        <div class="search">
            <form id="searchform" action="http://redballoontoystore.com/w/" method="get" role="search">
                <span>
                <input id="s" type="text" name="s" size="10" value="" placeholder="Search…">
                <input id="searchsubmit" type="submit" value="Search">
                </span>
            </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:40:09.877

因为您想要移动以响应关注的元素在 DOM 中`input`出现*的较早*，这与 CSS 选择元素的方式相反（它只能在 DOM 中选择*稍后*的元素），所以我可以实现的唯一方法是调整大小`a`元素（包含图像）的宽度为 parent 的 48 % `div`；并在其父`a`元素中居中图像。

这样，随着父元素的宽度随着焦点的变化而变化，尺寸`a`也会增加，并且随着图像在这些`a`元素中居中，它们的位置也会发生变化。不利的一面是父 div 必须调整其宽度以响应子元素的焦点，唯一可能的方法`div`是 display `inline`，`inline-block`（或浮动或绝对定位）。

我还稍微修改了您的转换方法，供应商前缀应该在非供应商前缀版本之前（这样“最终版本”转换会覆盖供应商前缀版本）。无论如何，调整口味，我*希望*这对你有用：

```
#header-widget-area {
    border: 1px solid #000; /* to help visualise the space/size of the element */
    display: inline-block; /* to 'collapse' the element to the size of its children */
}

#s {
    width: 80px;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;
}

#s:focus {
    width: 110px;
    -webkit-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;
}

a {
    display: inline-block;
    width: 48%;
    text-align: center;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GSgYA/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:08:13.233

尝试类似`#s:focus + button`and `#s:focus + button + button`。请记住，`+`选择器元素的意思是“下一个兄弟”。

# python - Tornado RESTful PUT 处理程序方法未获取请求参数

> ID：11961505
> 
> 赞同：5
> 
> 时间：2012-08-14T22:05:02.593
> 
> 标签：python, rest, tornado

我正在尝试对我的 RESTful API 进行单元测试。这是我的 API：

```
 class BaseHandler(tornado.web.RequestHandler):                    
    def __init__(self, *args, **kwargs):                          
        tornado.web.RequestHandler.__init__(self, *args, **kwargs)
        self.log = self.application.log                           
        self.db = self.application.db                             

class ProductHandler(BaseHandler):
    @tornado.web.removeslash
    def put(self, id = None, *args, **kwargs):
        try:
            self.log.info("Handling PUT request")                                                             
            if not id:                                                                                                      
                raise Exception('Object Id Required')                                                                        
            id = { '_id' : id }                                                                                                                            
            new_values = dict()                                                                                             
            name = self.get_argument('name', None)                                                                          
            description = self.get_argument('description', None)                                                            
            if name:                                                                                                        
                new_values['name'] = name                                                                                   
            if description:                                                                                                 
                new_values['description'] = description                                                                     
            self.db.products.update(id, new_values, safe = True)                                                                                                               
        except:
            self.log.error("".join(tb.format_exception(*sys.exc_info())))                                                   
            raise                                                                                                           

 class Application(tornado.web.Application):                         
     def __init__(self, config_path, test = False, *args, **kwargs): 
         handlers = [                                                
             (r"/product/?(.*)", ProductHandler),                    
         ]                                                           
         settings = dict(debug=True)                                 
         tornado.web.Application.__init__(self, handlers, **settings)
         self.log = logging.getLogger(__name__)                      
         self.config = ConfigParser()                                
         self.config.read(config_path)                               
         self.mongo_connection = Connection(                         
             host = self.config.get('mongo','host'),                 
             port = self.config.getint('mongo','port'),              
         )                                                           
         if test:                                                    
             db_name = self.config.get('test', 'mongo.db')           
         else:                                                       
             db_name = self.config.get('mongo', 'db')                
         self.log.debug("Using db:  %s" % db_name)                   
         self.db = self.mongo_connection[db_name] 
```

但是，这是我的问题：处理程序没有看到名称或描述参数。:(

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:21:27.563

作为一种解决方法，我在 request.body 中找到了它们并手动解析了编码参数。这有点烦人，但它确实有效。

```
 new_values = urlparse.parse_qs(self.request.body)

# values show as lists with only one item
for k in new_values:                             
    new_values[k] = new_values[k][0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T20:37:53.897

假设您使用 jQuery 发送此 PUT 请求：

```
$.ajax({
    type: "PUT",
    url: "/yourURL",
    data: JSON.stringify({'json':'your json here'),
    dataType: 'json'
}) 
```

`data`不应该是这样 的：`data: {'json': 'your json here'},`因为它会自动编码成查询字符串，需要通过parse_qs解析

然后在龙卷风

```
def put(self, pid):
    d = json.loads(self.request.body)
    print d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-12T09:02:36.450

如果请求具有正确的内容类型标头（application/x-www-form-urlencoded），则 put 处理程序将解析 request.body，例如，如果您使用的是 tornado http 客户端：

```
headers = HTTPHeaders({'content-type': 'application/x-www-form-urlencoded'})
http_client.fetch(
      HTTPRequest(url, 'PUT', body=urllib.urlencode(body), headers=headers)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T23:00:30.380

您是否尝试过使用`get`方法？因为根据您测试程序的方式，如果您通过 Firefox 或 Chrome 等浏览器进行测试，他们可能能够做到。[从浏览器执行 HTTP PUT](https://stackoverflow.com/questions/1856996/doing-a-http-put-from-a-browser)

如果我是你，我会写`get`而不是`put`。因为那么你绝对可以在你的浏览器中测试它。

例如，而不是：

```
def put ... 
```

尝试：

```
def get ... 
```

或者实际上在你的：

```
name = self.get_argument('name', None)                                                                          
description = self.get_argument('description', None) 
```

为什么在`None`那儿？根据[文档](http://www.tornadoweb.org/documentation/web.html)：

> RequestHandler.get_argument(name, default=[], strip=True)
> 
> ...
> 
> 如果未提供默认值，则认为该参数是必需的，如果缺少该参数，我们将抛出 HTTP 400 异常。

因此，在您的情况下，因为您没有提供正确的默认值，因此您的应用程序返回 HTTP 400。错过默认值！（IE）

```
name = self.get_argument('name')                                                                          
description = self.get_argument('description') 
```

# ios - UIlabels 在 .storyboard （插座参考）之外的其他地方初始化，或者在视图中分配 int 是否加载？

> ID：11961507
> 
> 赞同：0
> 
> 时间：2012-08-14T22:05:07.180
> 
> 标签：ios, objective-c, initialization, uilabel, xcode-storyboard

我有一个几乎只使用代码制作的 UI：所有内容（UIlabels 等）都在视图控制器的 viewdidload 中初始化。

。H

```
@interface homeViewController : UIViewController {

    //IBOutlet UILabel *lbl; // not using an outlet anyway...
    UILabel *lbl; 
}

@property(nonatomic,retain) UILabel *lbl;

@end 
```

.m

```
@interface homeViewController ()

@end

@implementation homeViewController

@synthesize lbl;

-(void)updateLabel {

    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    double temptemp2 = [ud doubleForKey:@"somekey"];

    lbl.text = [NSString stringWithFormat:@"%f", temptemp2]; 

    [ud synchronize];

} 
```

然后在 viewdidload 我只是调用 [self updateLabel]; 并且标签不会更新。但是，如果我将 updateLabel 方法中的相同代码放入视图并加载，则该代码有效。

UIlabel 在 [self updateLabel] 之前被初始化（alloc init）；内部视图确实加载了。

如果我不想使用界面生成器来正确初始化标签对象，我应该如何正确初始化它？以便可以从同一视图控制器内的其他方法访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:00:53.393

您已经在视图控制器上为标签创建了@property，但是当您创建标签时，您将其分配给局部变量而不是属性。因此，当您想要分配值时，您以后无法从其他方法中引用它。

在您的`viewDidLoad`中，将您创建的 UILabel 对象分配给属性，如下所示：

```
self.lbl = lbl; 
```

然后在你的`updateLabel`方法中：

```
self.lbl.text = [NSString stringWithFormat:@"%f", temptemp2]; 
```

# html - 如何使预加载的 swf 填充浏览器？

> ID：11961510
> 
> 赞同：0
> 
> 时间：2012-08-14T22:05:17.690
> 
> 标签：html, actionscript-3, flash, preloader, preload

让我稍微解释一下我的问题。

我正在创建一个 Flash 网站，我正在使用一个小的外部预加载器 swf 来加载主 swf。我已经能够让我的预加载器 swf 占据整个浏览器窗口，但是一旦它加载到主 swf 中，它只会以它内置的正常尺寸显示。

我在主 Flash 应用程序中确实有一个调整大小的侦听器，一旦我更改浏览器的大小，主 swf 就会占据整个浏览器。但是我怎样才能让它以这种方式开始呢？

-我尝试使用 ENTER_FRAME 处理程序，但这破坏了我的一些动画。- 我尝试在预加载器中设置加载器对象的宽度和高度，但这似乎也不起作用。- 我也尝试向加载器添加一个 ADDED_TO_STAGE 监听器，但这似乎并没有改变任何东西。-我还尝试让预加载器在一个场景中，而主应用程序在另一个场景中，这样我只加载了一个 swf，但这似乎不起作用，我不喜欢这种预加载方法。

我无法在任何地方找到解决方案。有什么容易我想念的吗？让我知道你们的想法。预加载器代码如下：

```
import flash.net.URLRequest;
import flash.display.Loader;
import flash.events.Event;
import flash.events.ProgressEvent;

var request:URLRequest = new URLRequest("flashNew.swf");
var loader:Loader = new Loader();

loader.load(request);
this.addChild(loader);

function loadProgress(event:ProgressEvent):void
{
    var percentLoaded:Number = event.bytesLoaded / event.bytesTotal;
    var percentLoadedBar:Number = Math.round((event.bytesLoaded / event.bytesTotal) * 100);
    percentLoaded = Math.round(percentLoaded * 100);

    this.percentLoaded.text = String(uint(percentLoaded)) + "%";

    progressBar.width = percentLoadedBar * 3.36;
}

function loadComplete(event:Event):void
{
    //loader.content.height = stage.stageHeight;
    //loader.content.width = stage.stageWidth;
}

function setDimensions(event:Event):void
{
    loader.width = stage.stageWidth;
    loader.height = stage.stageHeight;
}

loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loadProgress);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
loader.contentLoaderInfo.addEventListener(Event.ADDED_TO_STAGE, setDimensions); 
```

有没有办法可以通过 javascript 或其他方式进行更改？我在这里不知所措，我已经坚持了几个小时。任何帮助，将不胜感激。谢谢！

**更新** 这是我的调整大小功能的代码。

```
function resizeListener(e:Event):void
{
    background_mc.width = stage.stageWidth;
    background_mc.height = stage.stageHeight;
    //The rest of the function is omitted. It is if's and else-if's that just reposition various elements.
    //That's really all this function does is re-position elements with the exception of the above code which resizes the background.
} 
```

这是事件侦听器调用。

```
stage.addEventListener(Event.RESIZE, resizeListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:38:48.593

尝试这个：

删除了这行代码： `this.addChild(loader);`

然后将您的`loadComplete`功能调整为：

```
function loadComplete(event:Event):void
{
    addChild(loader.content);
    loader.content.height = stage.stageHeight;
    loader.content.width = stage.stageWidth;
} 
```

# javascript - 清除 Firebug 中所有断点的键盘快捷键

> ID：11961511
> 
> 赞同：1
> 
> 时间：2012-08-14T22:05:34.350
> 
> 标签：javascript, firefox, firebug, breakpoints

在 Firefox 中，我在寻找清除 Firebug 中所有断点的键盘快捷键。

有键盘快捷键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:08:29.067

```
Shift+Click on line number -  I found it here; 
```

[http://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts](http://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts)

- 在小节脚本面板中。希望这可以帮助

# facebook - Facebook 应用程序如何通知用户某事？

> ID：11961515
> 
> 赞同：0
> 
> 时间：2012-08-14T22:05:40.110
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

该示例是一个允许用户（与 Facebook 用户关联）创建博客文章的网站。评论系统是 fb:comments 社交插件。

当有人发表评论时，应该通知博客文章的作者有新的阅读内容。

作为一名作家，我所期望的是我会收到一条通知（即“x 对你的博客文章发表了评论。”）。不过，似乎没有办法生成这些通知。

Graph API 中有哪些方法可以让作者了解新评论？哪个是“最好的”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:16:40.320

执行以下一项或两项操作：

*   发送[应用程序到用户请求](https://developers.facebook.com/docs/requests/#app_to_user)。它们不会生成通知，但会增加一些应用程序计数器。在其他地方，用户会在她的墙的右上角看到柜台。

*   使用**电子邮件**权限获取用户的电子邮件地址。将地址存储在您的服务器上，并在需要通知时向用户发送电子邮件。

# java - Hadoop MapReduce 的新手，在 mapred.Reducer 上获得 NoSuchMethodException。 ()

> ID：11961517
> 
> 赞同：3
> 
> 时间：2012-08-14T22:05:54.667
> 
> 标签：java, apache, hadoop, mapreduce, nosuchmethoderror

解决方案：使用更好的教程 - [http://hadoop.apache.org/mapreduce/docs/r0.22.0/mapred_tutorial.html](http://hadoop.apache.org/mapreduce/docs/r0.22.0/mapred_tutorial.html)

我刚开始使用 MapReduce，遇到了一个奇怪的错误，我无法通过 Google 回答。我正在制作一个基本的 WordCount 程序，但是当我运行它时，在 Reduce 期间出现以下错误：

```
java.lang.RuntimeException: java.lang.NoSuchMethodException: org.apache.hadoop.mapred.Reducer.<init>()
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:485)
at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

WordCount 程序是 Apache MapReduce 教程中的一个。我在 Mountain Lion 上以伪分布式模式运行 Hadoop 1.0.3，我认为所有这些都运行良好，因为示例都正常执行。有任何想法吗？

编辑：这是我的参考代码：

```
package mrt;

import java.io.IOException;
import java.util.*;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class WordCount {
public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, OutputCollector<Text,IntWritable> output, Reporter reporter)
      throws IOException{

        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while(tokenizer.hasMoreTokens()){
            word.set(tokenizer.nextToken());
            output.collect(word,one);
        }
    }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {

    public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter)
      throws IOException{

        int sum = 0;

        while(values.hasNext()){
            sum += values.next().get();
        }

        output.collect(key, new IntWritable(sum));

    }
}

public static void main(String[] args) throws Exception{

    JobConf conf = new JobConf(WordCount.class);
    conf.setJobName("Wordcount");

    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(IntWritable.class);

    conf.setMapperClass(Map.class);
    conf.setCombinerClass(Reduce.class);
    conf.setReducerClass(Reducer.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    FileInputFormat.setInputPaths(conf, new Path(args[0]));
    FileOutputFormat.setOutputPath(conf, new Path(args[1]));

    JobClient.runJob(conf);

}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T11:34:09.720

问题不在于您选择的 API。完全支持稳定的 (mapred.*) 和不断发展的 (mapreduce.*) API，并且框架本身对这两种 API 进行了测试，以确保跨版本不会出现回归/破坏。

问题是这一行：

```
conf.setReducerClass(Reducer.class); 
```

当您应该设置 Reducer 接口的实现时，您将在那里设置 Reducer 接口作为 Reducer。将其更改为：

```
conf.setReducerClass(Reduce.class); 
```

会修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:20:47.187

检查以确保您使用的是 hadoop.mapreduce 包而不是 hadoop.mapred 包。与当前版本的 mapreduce 类相比，mapred 包较旧，并且在类上具有不同的方法。

# iphone - 在 iOS 上，如何用轮廓填充路径？（或填充和描边路径）

> ID：11961520
> 
> 赞同：0
> 
> 时间：2012-08-14T22:06:03.480
> 
> 标签：iphone, ios, ipad, core-graphics

在 iOS 上，如果我们这样做

```
CGContextMoveToPoint(contextFoo, 0, 0);
CGContextAddLineToPoint(contextFoo, x, y);
CGContextAddLineToPoint(contextFoo, x2, y2);
// ... and many more CGContextAddLineToPoint 
```

然后在此之后，如果我们执行 a `CGContextStrokePath`，我们将获得一个轮廓，或者如果我们执行 ，我们将获得`CGContextFillPath`“填充”，但我们不能同时执行这两种操作，因为在描边或填充之后，“当前路径”就消失了。我们如何才能填充和描边路径（例如想要黄色填充和橙色轮廓）？

我们可以将`MoveTo`and`AddLine`调用移动到一个函数中，然后调用该函数，进行填充，然后再次调用该函数，然后进行描边，但是有很多`x`，`y`这使得将它们全部传递给函数非常麻烦。有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:25:21.377

```
CGContextDrawPath(context, kCGPathFillStroke);
// to both Fill and Stroke your context
// or kCGPathFill/kCGPathStroke to only fill/stroke 
```

您可以使用以下方法保存您的路径（以将其重用于多个相同形状的东西）：

CGPathBeginPath/MoveToPoint/AddLine/... 非常类似于 CGContext/...

对于您的示例：

```
[[UIColor yellowColor] setFill];                      
[[UIColor orangeColor] setStroke];

CGContextDrawPath(context, kCGPathFillStroke); 
```

# javascript - jQuery 自适应表单验证

> ID：11961523
> 
> 赞同：0
> 
> 时间：2012-08-14T22:06:14.010
> 
> 标签：javascript, jquery, html, forms, validation

我有一个动态表单，我需要验证用户端。我不要求他们填写表格的每一部分，但如果他们填写一行的一列，那么他们必须填写剩余的列。例如，如果他们填写了CC#，他们还需要填写金额、批准和日期，但如果他们不填写任何内容，那么他​​们可以自由点击“下一步”。这是为了确保收集到所有必需的信息。关于如何做到这一点的任何建议？

为了节省空间，我将代码放在 JS Fiddle 上。这只是为了显示我的表单/表格的格式类型。

[http://jsfiddle.net/8z3Sy/](http://jsfiddle.net/8z3Sy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:08:30.250

一个想法是，在您的点击事件中，将每行的字段数与空字段数进行比较。

```
var fields = $(this).find('td input').length; 
var filled_fields =  $(this).find('td input:text').filter(function() { return this.value != ""; }).length; 

if (fields == filled_fields || filled_fields == 0) 
{
    //Continue on with the next table (all row data is filled out OR all row data is empty)
}
else 
{
    //There is a field missing on the pertaining row
    //Stop Propagation
} 
```

# ios - 将 Kal 添加为子视图时出现奇怪的空间问题

> ID：11961525
> 
> 赞同：1
> 
> 时间：2012-08-14T22:06:17.907
> 
> 标签：ios, xcode, storyboard, kal

日历和导航栏之间的空白太多。这是我正在谈论的图片：

![卡尔维尤](../Images/7458316c8e72d6c2ce714cda42c21d7f.png)

我从情节提要中的 ViewController 的 ViewDidLoad 调用代码：

```
- (void) viewDidLoad {
    KalViewController *calendar = [[KalViewController alloc] init];
    [self.view addSubview:calendar.view];
} 
```

我只是在学习使用 Kal。也许我打算以错误的方式合并它。我确实喜欢使用故事板来链接我的视图，因此我的视图控制器包含“Kal.h”，并且我如上面的代码所示进行实例化。我试图使 viewcontroller 成为 KalViewController 的子类，但这没有用。

也许有一种更优雅的方式将 Kal 合并到故事板视图控制器的层次结构中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:45:20.310

只需添加以下内容：

```
[[self navigationController] initWithRootViewController:calendar];
[[calendar navigationItem] setHidesBackButton:YES]; 
```

它应该可以解决问题。第二行用于隐藏“返回”按钮，否则会变得可见，但对我来说，它是一个单屏应用程序，你可能想要也可能不想使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:05:00.323

我使用了与您最初使用 ACB 完全相同的代码，遇到了完全相同的问题，但`[self addChildViewController:calendar];`在创建日历视图之后我也包含在内。

这段代码有什么作用？`[self addChildViewController:calendar`];

我理解它“添加了一个子视图控制器”，但真正发生了什么......我应该需要这个吗？显然不是因为你没有，我只是在没有它的情况下编译了我的代码，没有任何区别。

**整体代码：**

```
KalViewController *calendar = [[KalViewController alloc] init];

[self.view addSubview:calendar.view];

//[self addChildViewController:calendar]; 
```

# java - 数组中的泛型及其警告信息

> ID：11961531
> 
> 赞同：1
> 
> 时间：2012-08-14T22:07:14.437
> 
> 标签：java, arrays, generics

我仍在学习 Java 集合框架及其工作原理....

据说我们不能分配涉及类型参数的大小，所以当我编写以下代码时

```
Stacks<card> stack = new Stacks[5]; // it causes a compiler warning 
```

有什么办法可以隐藏这个警告吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:09:57.947

您确定要创建 Stack 数组吗？更好地使用：

```
Stack<Card> myStack = new Stack<Card>(); 
```

# mysql - DBIx::Class 临时列

> ID：11961532
> 
> 赞同：3
> 
> 时间：2012-08-14T22:07:17.417
> 
> 标签：mysql, perl, catalyst, temporary, dbix-class

我正在使用[DBIx::Class](https://metacpan.org/module/DBIx::Class)并且有这样的查询：

```
$groups = $c->model('DB::Project')->search(
{ "sessions.user_id"=>$c->user->id,done_yn=>'y' },
{
    select   => ["name", "id",\'SUM(UNIX_TIMESTAMP(end_time)-UNIX_TIMESTAMP(start_time)) as total_time'], #\''
    join         => 'sessions',
  }
); 
```

我希望能够获得 的值`SUM(UNIX_TIMESTAMP(end_time)-UNIX_TIMESTAMP(start_time))`，但是因为这不是表中的真实列，所以为[DBIx::Class::Row](https://metacpan.org/module/DBIx::Class::Row)对象引用 total_time 似乎不起作用。有谁知道我怎样才能得到这些临时列？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:00:40.513

[精选文档](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aResultSet#select)完美地描述了如何实现您想要完成的目标。还建议尽可能避免使用文字 SQL，您可以`{ sum => \'UNIX_TIMESTAMP(end_time)-UNIX_TIMESTAMP(start_time)' }`改用。文字 SQL 中的“as”不需要为列命名，您必须使用 as 搜索属性或更好的列快捷方式而不是 select+as。

# iphone - 将大型 NSData 上传到 Web

> ID：11961534
> 
> 赞同：4
> 
> 时间：2012-08-14T22:07:23.197
> 
> 标签：iphone, ios, nsurlconnection

我目前正在开发一个必须将大文件（主要是电影/视频）上传到网络的应用程序。在阅读了我所能阅读的内容之后，我采用了将电影转换为 NSData 的方法，然后将其包含为`NSURLConnection's` `HTTPBody`. 但是，在将电影（最初是`ALAsset`）转换为`NSData`时，我收到内存警告，然后是随后的崩溃。

我不知道如何上传这些类型的大文件，如果这些数据只会导致即时崩溃。我正在考虑的一种解决方案是写入文件系统，然后直接从那里上传文件，但我无法找到有关如何完成此操作的任何信息。

这是我使用的相关代码。如果我在这里做错了什么，我很想知道。

```
ALAssetRepresentation *representation = [asset defaultRepresentation];

Byte *buffer = (Byte *)malloc([representation size]);
NSUInteger buffered = [representation getBytes:buffer fromOffset:0.0 length:[representation size] error:nil];

uploadData = [NSData dataWithBytes:buffer length:buffered];

free(buffer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:22:46.330

假设以原始格式上传电影是有意义的，您可以使用 BSD（即 Unix）第 3 节界面使这更容易：

*   给定一个文件路径，打开文件并获取一个 int 文件描述符 (fd)

*   用fd，获取文件的长度

*   跟踪您加载了多少数据，以便您知道从哪里获取更多数据

*   使用 mmap(3) 随时映射你要上传的数据，并使用 mmap 返回的 void * 指针作为数据的位置

*   当数据已经发送，munmap 旧数据块并 mmap 一个新块

*   发送完所有数据后，munmap 最后一个块，close(fd)。

没有临时内存 - 没有 malloc。每当我必须处理大文件时，我都会使用 mmap。

编辑：您还可以将 NSData dataWithContentsOfFile:options 与设置为使用 mmap 的选项一起使用。然后，您将根据需要使用字节指针来读取小块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:49:14.223

万一有人到了这里并且无法解决您的问题，我想出了一种方法来做到这一点。您必须首先将您的磁盘写入`ALAssetRepresentation`磁盘（如此[处](https://stackoverflow.com/a/5876685/1341626)所述）：

```
NSUInteger chunkSize = 100 * 1024;
NSString *tempFile = [NSTemporaryDirectory() stringByAppendingPathComponent:@"temp.tmp"];

uint8_t *chunkBuffer = malloc(chunkSize * sizeof(uint8_t));
NSUInteger length = [rep size];

NSFileHandle *fileHandle = [[NSFileHandle fileHandleForWritingAtPath: tempFile] retain];
if(fileHandle == nil) {
    [[NSFileManager defaultManager] createFileAtPath:tempFile contents:nil attributes:nil];
    fileHandle = [[NSFileHandle fileHandleForWritingAtPath:tempFile] retain];
}

NSUInteger offset = 0;
do {
    NSUInteger bytesCopied = [rep getBytes:chunkBuffer fromOffset:offset length:chunkSize error:nil];
    offset += bytesCopied;
    NSData *data = [[NSData alloc] initWithBytes:chunkBuffer length:bytesCopied];
    [fileHandle writeData:data];
    [data release];
} while (offset < length);
[fileHandle closeFile];
[fileHandle release];
free(chunkBuffer);
chunkBuffer = NULL; 
```

[然后，您必须创建一个 NSData 对象，该对象可以在不使用内存资源的情况下映射磁盘（有点像大卫的回答，但受此回答](https://stackoverflow.com/a/8928941/1341626)的启发）：

```
NSError *error;
NSData *fileData = [NSData dataWithContentsOfFile:tempFile options:NSDataReadingMappedIfSafe error:&error];
if (!fileData) {
    NSLog(@"Error %@ %@", error, [error description]);
    NSLog(@"%@", tempFile);
    //do what you need with the error
} 
```

**编辑**虽然，如果你在某处上传文件，你应该打开一个连接并发送文件的小缓冲区，有点像我上面所做的。我必须编写一个 C++ 类来处理套接字和连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:34:28.627

您可能不应该尝试一口气阅读整个资产：

```
Byte *buffer = (Byte *)malloc([representation size]);
NSUInteger buffered = [representation getBytes:buffer fromOffset:0.0 length:[representation size] error:nil]; 
```

相反，设置一个循环并以块的形式从资产中读取。我已经概述了基本方法。您需要填补一些空白，但它应该可以解决内存问题。

您可能还想考虑在线程中运行它，这样您就不会锁定 UI。

```
 NSError error;
    int bufferSize = 1000;
    float offset=0.0;

//TODO: Open Connection

    while (1)
    {
      Byte *buffer = (Byte *)malloc(bufferSize);
       NSUInteger buffered = [representation getBytes:buffer fromOffset:offset length:bufferSize  error:&error];

    //TODO: Write data  
    //TODO: Increment offset, check errors

    free(buffer);

    //if (done){
    //break;
    //}

    }

    //TODO close eonnection 
```

# c# - WCF PInvoke 产生“访问被拒绝”

> ID：11961542
> 
> 赞同：0
> 
> 时间：2012-08-14T22:08:14.810
> 
> 标签：c#, wcf, iis, pinvoke

我有一个使用 webHttpEndpoint 端点实现 REST 接口的 WCF。

调用堆栈是这样的：WCF 服务 >> C# 库 >> PInvoke >> C++ 库

从 Visual Studio 运行时，一切都按预期工作。部署到 IIS 时会发生以下错误：

```
System.DllNotFoundException: Unable to load DLL 'native.dll': Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)) at ... 
```

所有 .dll 文件都在 \bin 文件夹中。

完全相同的 C# 库/PInvoke 链在同一台服务器上的 Web 窗体 ASP.NET 站点中工作。

这是 WCF 服务的 web.config：

```
 <system.web>
   <trust level="Full"/>
   <compilation debug="true" targetFramework="4.0" />
   <customErrors mode="Off"/>
 </system.web>

 <system.webServer>
   <modules runAllManagedModulesForAllRequests="true">
     <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
   </modules>
 </system.webServer>

 <system.serviceModel>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
   <standardEndpoints>
     <webHttpEndpoint>
       <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
     </webHttpEndpoint>
   </standardEndpoints>
</system.serviceModel> 
```

在 WCF 环境中是否有什么特别之处，或者是否需要特定权限才能找到/访问本机 dll？

**附加信息** 从 /bin 中删除 native.dll 会产生：

```
System.DllNotFoundException: Unable to load DLL 'util32.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E) 
```

所以它实际上是在寻找文件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T23:20:11.307

原来这是文件上的一个简单权限问题的结果。

# c# - DataSet.WriteXml(Stream) 与 DataSet.WriteXml(Path)

> ID：11961544
> 
> 赞同：0
> 
> 时间：2012-08-14T22:08:29.990
> 
> 标签：c#, .net, vb.net

所以我遇到了一个特殊的问题。我在使用时一直在编写和读取数据集而没有问题

```
DataSet.WriteXML(LocalPath) 
```

但是，当我开始使用内存流时，我注意到了一些事情

```
DataSet.WriteXML(MemoryStream) 
```

我最终丢失了 xml 文档“ `<?xml version="1.0" standalone="yes"?>`”的声明部分。[我在这里](https://stackoverflow.com/questions/392626/lost-xml-file-declaration-using-dataset-writexmlstream)提到了解决方案。但是，如果我不想使用 XMLWriter 类并将 WriteStartDocument 设置为 true，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:21:16.563

我认为，如果您使用[DataSet.WriteXml](http://msdn.microsoft.com/en-us/library/ws09ehyc.aspx)接受 XmlWriter 并将 XmlWriter 与[OmitXmlDeclaration](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.omitxmldeclaration)配置为 false 它应该输出该部分。

# datetime - SSIS日期时间截断错误

> ID：11961548
> 
> 赞同：0
> 
> 时间：2012-08-14T22:09:01.203
> 
> 标签：datetime, ssis, truncation

我在派生列组件中使用以下表达式从日期时间字段中获取小时和分钟。例如从“2012-08-14 12:13:03.650”获取“12:13”

> LKPStartTime:
> (DT_STR,5,1252)SUBSTRING((DT_STR,10,1252)(DT_DBTIME)StartTime,1,5)

但是，它会弹出错误消息

> “派生列”失败，因为发生了截断，并且输出列“LKPStartTime”上的截断行处置指定了截断失败。"

我的表达有问题吗？感谢您的任何回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:10:43.973

我认为应该是 12,5 而不是 1,5

# properties - 什么是 RNA（或 DNA）特性？

> ID：11961557
> 
> 赞同：14
> 
> 时间：2012-08-14T22:10:04.207
> 
> 标签：properties, blender

我之前在编程文档中遇到过术语“RNA”和“RNA 属性”。有人可以向我解释这些术语的含义吗？

这些通用编程术语是适用于多种语言，还是这些非通用术语？很难避免获得与生物学相关的搜索结果，而我去过的编程词汇网站没有它们。我在任何地方看到的都是首字母缩略词，没有地方确切地知道它们是什么，因为每个人显然已经知道......

这里有些例子：

[“RNA 架构”](http://wiki.blender.org/index.php/Dev:2.5/Source/Architecture/RNA)

[“RNA/DNA”](http://www.blender.org/forum/viewtopic.php?t=20782&sid=87d103642d2df4ddd506bfecd32d004f)

> 面板属性 属性在属性一节中讨论过，但我们没有解释如何在面板中显示自定义属性。这个脚本正是这样做的。RNA 属性显示为语法
> 
> layout.prop(ob, 'myRnaInt')

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T22:29:34.100

DNA 和 RNA 是 Blender 开发人员和社区用来指代他们的 Blender 状态数据序列化系统的术语，该系统与 Blender 本身一样古老。每个 .blend 文件都包含一个 DNA 结构，其中详细介绍了有关混合的几乎所有内容*以及*最后用于处理它的 Blender 的版本和精确副本。这使得 Blender 文件高度向后兼容，因为它们允许任何未来版本的 Blender 以与旧版本处理旧文件相同的方式配置自身，并以可以扩展版本的极其规范化的方式消化文件-to-version 不改变文件结构。

RNA是一个较新的概念。将其视为 DNA 的[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)。它允许 DNA 片段和子树在 Blender 内以及 Blender 及其插件（这些插件的主要语言是 Python）之间传递，并且是完成此操作的主要方式。

简短的入门： http: [//www.blendernation.com/2008/12/01/blender-dna-rna-and-backward-compatibility/](http://www.blendernation.com/2008/12/01/blender-dna-rna-and-backward-compatibility/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:29:13.537

这是具体的。例如 Blender 软件使用这些缩写词：

> Blender 使用一种称为 DNA 的独特内部格式来存储和引用 3D 资产。这个名字类似于生物学术语，..
> 
> [..]
> 
> RNA 是当前的发展，包括 2.5 变化的重要幕后组件。

来自 Mastering Blender - Tony Mullen

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:26:14.957

我自己没有这方面的经验，但从一个非常快速的搜索（感谢谷歌）来看，RNA 似乎是指 Python 编程语言的 API。DNA 似乎密切相关（如您所料）。我没有看到用任何其他语言提到它。（这可能是错误的，但它似乎适用于 Python，就像 jQuery 之于 javascript）。

# objective-c - 我的 NSArray 现在是 NSMutableArray，它使我的应用程序崩溃

> ID：11961559
> 
> 赞同：0
> 
> 时间：2012-08-14T22:10:21.697
> 
> 标签：objective-c, nsmutablearray, nsarray

我正在使用`NSArray`DetailViewController 中的数据显示。现在我已将其更改为 a ，当我推送到 DetailViewController`NSMutableArray`时它会崩溃。`viewWillAppear`什么会导致这种情况？

从 viewController 发送到 DetailViewController：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"DetailSegue"]) {

    NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
    WinesDetailViewController *winesdetailViewController = [segue destinationViewController];

    winesdetailViewController.detailsDataSource = [[NSMutableArray alloc] initWithObjects:sortedWines,nil];
    winesdetailViewController.detailIndex = selectedRowIndex.row;
} 
```

}

收到：

```
@property (strong, nonatomic) NSMutableArray *detailsDataSource;
@property int detailIndex; 
```

视图将出现：

```
if ([[[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Rate"] isEqual:[NSNumber numberWithInt:1]])  {

    ratingImageView.image = [UIImage imageNamed:@"ratingButtonOne@2x.png"];
}

flagImageView.image = [UIImage imageNamed:[[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"Flag"]]; 
```

这是日志中显示的部分内容：

`-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x6d2ee20 2012-08-15 00:00:16.860 Rødvinsguiden test[4240:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x6d2ee20'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:18:42.697

NSMutableArray 是 NSArray 的子类，这意味着 NSArray 中的任何方法都可以与 NSMutableArray 完全相同的方式使用。您能否发布崩溃日志或调试器的跟踪信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:23:19.460

`winesdetailViewController.detailsDataSource`是一个`NSMutableArray`包含一个`NSArray`。我猜以前您的数组包含许多字符串，并且您实际上想使用以下方法创建它：

```
winesdetailViewController.detailsDataSource = [[NSMutableArray alloc] initWithArray:sortedWines]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:25:12.570

您可能需要使用`[NSMutableArray arrayWithArray:otherArray]`

# objective-c - 如果我有一个点和一个中心，我如何计算相反的点？

> ID：11961561
> 
> 赞同：1
> 
> 时间：2012-08-14T22:10:27.797
> 
> 标签：objective-c, trigonometry, point

![图片](../Images/2b3973e42d2da2e759b7ce5e0daca088.png)

我有一个中心点，我知道点 1，现在我想计算相反方向的点 2，但有另一个长度。我也知道从中心点到点 2 的长度，但它与点 1 到中心不在同一个向量上。想象一下，如图所示，虚线有另一个角度。

点 2 应该与点 1 在同一个向量上。换句话说，点 1 到点 2 应该是通过中心的直线。

我希望有一个人可以帮助我。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:01:30.460

这将起作用：

*代码假定二维平面中的共线点定义为笛卡尔坐标*

在 Java 中：

```
class GoGo {

  public static void main (String[] args) {
    double[] center = new double[] { 4.0,3.0 };
    double[] point1 = new double[] { 8.0,4.0 };
    double[] point2 = getPoint2(center,point1,4.0);
    System.out.print("X: " + point2[0] + " Y: " +point2[1]);
  }
  public static double[] getPoint2(double[] center, double[] point1, double distance) {
    //assumes Points = double[2] { xValue, yValue }

    double[] point2   = new double[2];
    double changeInX  = point1[0] - center[0];   //  get delta x
    double changeInY  = point1[1] - center[1];   //  get delta y
    double distanceCto1 = Math.pow(              //   get distance Center to point1
                          (Math.pow(changeInX,2.0) + Math.pow(changeInY,2.0))
                          ,0.5);
    double distanceRatio = distance/distanceCto1;// ratio between distances
    double xValue = distanceRatio * changeInX;   // proportional change in x
    double yValue = distanceRatio * changeInY;   // proportional change in y
    point2[0] = center[0] - xValue;              // normalize from center
    point2[1] = center[0] - yValue;              // normalize from center
    return point2;                               // and return
  }
} 
```

我用 Java 写了这个，因为它是*我的*首选语言，并且您没有指定需要答案的语言。如果您有不同的语言偏好，我可以尝试将代码移植到*您的*首选语言（假设我知道）。

**代码由：Marcello Stanisci**

在目标 C 中：

```
- (CGPoint) getOppositePointAtCenter2:(CGPoint)center fromPoint:(CGPoint)point oppositeDistance:(double)oppositeDistance {

    CGPoint vector = CGPointMake(point.x - center.x, point.y - center.y);
    double distanceCenterToPoint1 = pow(pow(vector.x, 2) + pow(vector.y, 2), 0.5);
    double distanceRatio = oppositeDistance / distanceCenterToPoint1;

    double xValue = distanceRatio * vector.x;
    double yValue = distanceRatio * vector.y;

    return CGPointMake(center.x - xValue, center.y - yValue);
} 
```

# android - “打开”我的应用程序？

> ID：11961562
> 
> 赞同：0
> 
> 时间：2012-08-14T22:10:31.030
> 
> 标签：android, android-intent, wikipedia

> **可能重复：**
> [Android 响应意图中的 URL](https://stackoverflow.com/questions/525063/android-respond-to-url-in-intent)

我正在开发一个 Wikipedia 客户端，我希望用户能够使用我的应用程序（如官方 Wikipedia 应用程序）打开一个页面。这个怎么存档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:25:20.100

您将要使用[Intent Filter](http://developer.android.com/guide/components/intents-filters.html)看到这个 SO 问题 - [Android Respond To URL in Intent](https://stackoverflow.com/questions/525063/android-respond-to-url-in-intent)

# c# - LINQ 联盟没有返回想要的结果

> ID：11961565
> 
> 赞同：1
> 
> 时间：2012-08-14T22:10:49.553
> 
> 标签：c#, asp.net, linq, union

在过去的几个小时里，我一直在尝试解决问题，但一点运气都没有。

首先，让我向您展示我的数据库的外观（只是其中的一个重要部分）： ![在此处输入图像描述](../Images/6a1710dcd437b1a9f09ab8cea4f641f6.png)

[radno_mjesto] = JOB [grupa_radnih_mjesta] = JOB GROUPS（属于特定组的工作；例如，如果组名称是**法官**，则属于该组的工作将是：**最高法院法官**、**行政法法官**、**高级法官**等。 ) [osoba] = 人

我想要实现的是查询所有属于特定工作组的人，但几个小时后我无法成功。我正在尝试以下代码的各种组合，但我只得到了两个结果：所有人（无论他们的工作是什么）或只有特定工作的人（本例中工作组的最后一份工作） .

```
 var sveOsobe = from p in db.osobas
                       select p;

        if (chkGrupaRadnihMjesta.Checked)
        {
            int id = Convert.ToInt32(GrupaRadnihMjesta.SelectedValue);

            var radnaMjesta = from rm in db.grupe_radnih_mjesta_radna_mjesta
                              where rm.grm_id == id
                              select rm;

            var praznoOsobe = sveOsobe.Where(o => o.osoba_id == -1);

            foreach (var radnoMjesto in radnaMjesta)
            {
                var sveOsobeRadnaMjesta = from p in db.osobas
                                          where p.osoba_id == -1
                                          select p;

                sveOsobeRadnaMjesta = sveOsobe.Where(o => o.rm_id == radnoMjesto.rm_id).Union(sveOsobeRadnaMjesta);
                praznoOsobe = praznoOsobe.Union(sveOsobeRadnaMjesta);
            }
            sveOsobe = sveOsobe.Intersect(praznoOsobe);
        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:57:02.170

这应该工作....

```
if (chkGrupaRadnihMjesta.Checked) { 
  int id = Convert.ToInt32(GrupaRadnihMjesta.SelectedValue); 
  var sveOsobe = (
    from p in db.osobas 
    join l in db.grupe_radnih_mjesta_radna_mjesta on l.rm_id equals p.rm_id
    where l.grm_id == id
    select p
  ).Distinct();
} 
```

我在这里猜名字！！！

# c++ - C++ - 在运行时扩展堆栈

> ID：11961568
> 
> 赞同：1
> 
> 时间：2012-08-14T22:11:05.457
> 
> 标签：c++, memory, stack-overflow

如何在需要时自动扩展堆栈？（直到我决定最大）

我正在尝试创建一些获取函数指针的东西（随机一个，我不知道该函数真正需要什么）并用它创建光纤。但是我需要创建很多纤维，但是当它们比默认值更多时，我希望它自动扩展，直到我决定最大。

原因：我需要创建很多纤维，如果我用它们创建大堆栈，那么它也会在 RAM 中占用大量内存。但是，如果我要创建小堆栈，它会抛出异常。（堆栈溢出）

但是应该有大堆栈和小堆栈，然后我需要在运行时自动扩展它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:18:08.100

如果您使用[`CreateFiberEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682406%28v=vs.85%29.aspx)创建纤程，则可以使用较小的提交堆栈大小和较大的保留堆栈大小。但是请注意，您为保留指定的任何内容都将从系统可用的总内存中删除。但是，除非您需要，否则它不会提交给 RAM。详细信息在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774%28v=vs.85%29.aspx)进行了描述。

# css - CSS/JS 渐变样式的不透明度以淡出内容

> ID：11961570
> 
> 赞同：1
> 
> 时间：2012-08-14T22:11:44.920
> 
> 标签：css, iframe, scroll, opacity, gradient

我想知道是否有办法淡出（如渐变）iframe 的不透明度和其中的内容。很难解释，所以一个常见的例子是在山狮或 iOs 通知中心的底部。

整个想法是，当用户向下滚动（在 iframe 中）时，内容会在底部“淡出”，并且不会被直线切断。

不确定这是否可以通过 CSS 或 Javascript 实现。

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:34:02.390

如果我对您的理解正确，您想要这样的东西： [https ://dl.dropbox.com/u/73603348/fadeout.html](https://dl.dropbox.com/u/73603348/fadeout.html)

我过去所做的是在滚动内容的底部创建一个覆盖元素。很简单。

标记：

```
<div class="content">
    <div class="container">
        [ content here ]
    </div>
    <div class="fader"></div>
</div> 
```

样式：

```
.content {
    width: 600px;
    background: #fff;
    margin: 50px auto 0;
    overflow: auto;
    position: relative;
}

.container {
    height: 500px;
    overflow: auto;
    padding: 10px;
    background: #ccc;
}

.fader {
    position: absolute;
    content: '';
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: -webkit-linear-gradient(top, rgba(255,255,255,0), #fff);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:50:27.420

万一您不想加载整个 jQuery 库，您可以编写自己的函数来执行淡出。这是我自己编写这样一个函数的尝试：

```
var ifrm = document.getElementById("your_frame"); //find your frame
function fadeOut(var duration) { //duration: how many millseconds you want the effect to take
    var step = 10 / duration; //step is how much the opacity will change each 10 milliseconds
    var curOpacity = 1; //at first the iframe is fully opaque.
    function animate() {
        if(curOpacity < step) {
             ifrm.style.opacity = 0; //we're done
             return;
        }
        ifrm.style.opacity = curOpacity;
        curOpacity -= step;
        setTimeout(animate, 10); //wait 10 millseconds and move to next step of animation
    }
    animate();
} 
```

所以假设你想淡出 1 秒，那么初始的 fadeOut 函数调用将是：`fadeOut(1000);`。

再次，我希望这对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:28:00.527

您可以使用[jQuery](http://jquery.com)。关于如何淡出元素的示例：

```
$("#your_iframe_id").fadeOut(); 
```

有关如何使用的更多详细信息`fadeOut`：[关于 fadeOut 的 jQuery API 参考](http://api.jquery.com/fadeOut/)。

# jmockit - jmockit：此 JRE 错误中不提供 Attach API 的本机库

> ID：11961571
> 
> 赞同：23
> 
> 时间：2012-08-14T22:11:46.650
> 
> 标签：jmockit

我试图使用 jmockit 对我的项目进行单元测试并收到以下错误：

```
java.lang.UnsatisfiedLinkError: no attach in java.library.path
java.lang.IllegalStateException: Native library for Attach API not available in this JRE
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:95)
    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)
    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)
    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:98)
    at mockit.internal.startup.Startup.initializeIfPossible(Startup.java:112)
    at org.junit.runner.Runner.<clinit>(Runner.java:22)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.UnsatisfiedLinkError: no attach in java.library.path 
```

我在类路径中分别包含了 jdk6/lib/tools.jar、jmockit.jar 和 junit.jar。任何线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-08-09T13:51:09.470

转到项目的**Java 构建路径**并更改**JRE 系统库**并使其指向**jdk**而不是 jre。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T13:05:33.683

这不是`tools.jar`您需要的，而是“附加 API”的本机库文件：（`attach.dll`或 Linux/Mac 等效文件`attach.so`或类似文件）。普通的 JRE 不包含此库。相反，将 Eclipse 指向应包含该`jre/bin/attach.dll`文件的 JDK 安装。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-08T20:26:54.117

将 attach.dll 的路径添加到 PATH 环境变量中

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-21T11:59:35.447

您必须设置代理。如果您使用的是 eclipse，则可以设置 VM 参数，并且 Args 将如下所示：

-javaagent:jmockit jar\jmockit.jar 的本地路径

例如：-javaagent:D:\jmockit.jar

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-13T19:26:41.070

道林，这里有一些其他的尝试：

*   确保您的项目正在使用：
    *   工作区默认值（假设默认值是您刚刚添加的 jdk 安装。从添加它的窗口中，确保选中它。），
    *   jdk 版本，或
    *   使用 jdk 版本的执行环境。
*   拉起系统的环境变量，并将此路径添加到其中：(jdk_dir)/jre/bin。（请记住，保存后必须重新启动 Eclipse 才能使用它）。
*   关闭 eclipse，并修改您正在使用的快捷方式来启动它以使用 (jdk_dir)/jre/bin。

我发现这些措施中的任何一种都可以让 Eclipse 找到 attach.dll。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-20T03:35:19.743

看起来您需要将 Eclipse 指向 JDK，而不是 JRE。

步骤：Windows->Preferences>Java>“Installed JRE's”并从“Installed JRE's”窗口中删除 JRE，并将 JDK 浏览添加到您的 JDK 位置并选择为默认值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-24T22:58:08.910

我在 64 位 Windows 上发现 JDK 1.8.45 和 1.8.80 存在这个问题。我的解决方案是将attach.dll 从JDK 的./jre/bin 目录复制到./bin。这消除了使用非标准 JAVA_HOME 更新 Eclipse 和 Cygwin 命令行的需要。

也许Windows版本可能忽略了JRE目录的内容？

# vba - 在 Visual Basic 中格式化日期

> ID：11961572
> 
> 赞同：1
> 
> 时间：2012-08-14T22:11:48.747
> 
> 标签：vba, date

我想以以下格式获取今天的日期：`mmddyyyy`. 即使是 8 月 1 日，我仍然希望前面有零，就像这样：`08012012`.

我想我可以使用 DatePart 函数，但我不确定如何。有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:41:55.850

您不说是哪个应用程序，但在 VBA 中，您可以说：

```
 Format(date(),"mmddyyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:33:24.033

```
 Application.Text(Date(),"mmddyyyy") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:02:17.727

```
Format(NOW,"mmddyyyy") 
```

NOW 也提供时间：

```
Format(NOW,"hh:mm:ss") 
```

# c# - 将编辑器模板链接到文本框

> ID：11961573
> 
> 赞同：1
> 
> 时间：2012-08-14T22:11:50.010
> 
> 标签：c#, jquery, asp.net-mvc-3

我有以下情况。

我正在开发一个 MVC 3 asp.net 应用程序。我想用日期时间范围过滤器制作一个搜索表单。我想使用日期选择器，以便用户可以选择日期范围。我已经按照这个 mvc 教程

[http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery- ui-datepicker-popup-calendar-with-aspnet-mvc-part-4](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4)

我的问题是我无法将编辑器模板链接到非模型@editotfor 或输入或@textbox，我会放一些代码让你明白我的意思。

我的共享文件夹中有以下 EditorTemplate（文件 Date.cshtml）

@model DateTime 使用日期模板 @Html.TextBox("", String.Format("{0:d}", Model.ToShortDateString()), new { @class = "datefield", type = "date" })

如果我在我看来使用这条线一切正常

@Html.EditorFor(m => m.fecha_Modificacion,"日期")

但我想在 NON 模型值中使用 datepicker 只是一个我一直在尝试的简单文本框文本框：

@Html.TextBox("fechaInicio", "", new { @class = "datefield" })

但不工作我会感谢任何帮助

**更新**

我必须更详细地解释我的问题我有一个

```
class Foo{

   private stirng name;
   private DateTime dateOfBirthday;
} 
```

在 Foo 视图中，我正在编辑 list.cshtml，因此我可以按 dateOfBirthday 和 from to 搜索。所以我想制作两个文本框，以便用户可以使用日期时间选择器选择从 anf 到日期范围。我想使用一个模板，以便我可以重复使用它。 **但是 list.cshtml 视图已经输入到 @Model Foo** 但两个文本框不是模型字段

EditTemplate 我在模型类型为@EditorFor filds 上完美工作，所以我试图在我的从到日期范围文本框上使用

对于我所阅读的内容，我可以创建一个 EditorTemplate 但这并不意味着我可以在任何地方使用我可以在我想要的地方使用

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:44:46.570

You can use a ViewModel to help you

Sometimes they can save your day and its considered a best practice to use them when you are using models from EF (Entity Framework) or other persistance aware classes that have important properties that can't be changed by the user on post for example.

Something like this may help you:

```
public class FooSearchViewModel
{
    public Foo Foo { get; set; }
    public DateTime From { get; set; }
    public DateTime To { get; set }
} 
```

Then, you have to bind the view to this ViewModel instead of the model and use it like:

```
Name: @Model.Foo.name
From: @Html.EditorFor(model => model.From, "DateWithCalendar")
To: @Html.EditorFor(model => model.To, "DateWithCalendar") 
```

The template can be archieved with a EditorTemplate, like the one @Display Name explained in his answer:

**/Views/Shared/EditorTemplates/DateWithCalendar.cshtml**

```
@model System.DateTime
@Html.TextBoxFor(model => model.Date, new { class = "date datepicker" }) 
```

Then you can use CSS to customize the input and apply the jQuery UI datepicker to it or wethever you like.

You can also define the template to use with `DataAnnotations` attributes in the ViewModel:

```
[UIHint("DateWithCalendar")]
public DateTime From { get; set; } 
```

**References:**

[http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx](http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx)
[http://kazimanzurrashid.com/posts/asp-dot-net-mvc-viewmodel-usage-and-pick-your-best-pattern](http://kazimanzurrashid.com/posts/asp-dot-net-mvc-viewmodel-usage-and-pick-your-best-pattern)
[ViewModel Best Practices](https://stackoverflow.com/questions/664205/viewmodel-best-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:24:29.070

从设计的角度来看，不要做非模型的事情。创建包含视图需要显示并回发到控制器的所有内容的视图模型，因此您在一个类中拥有所需的一切。这种方式强类型的类更容易使用。

关于您的具体问题，为了让您使用编辑器模板，您需要做的就是`EditorTemplates`在以下层次结构中创建文件夹：`Views/<ControllerName>/EditorTemplates` 并将`<TypeYouWantToUseThisEditorTemplate>.cshtml`内部编辑器模板文件夹放在该编辑器模板`@model <<TypeYouWantToUseThisEditorTemplate>`的第一行中。

**编辑器模板的链接**是属性的类型。例如，如果模型中有 type 属性，则`MyType`需要调用编辑器模板`MyType.cshtml`。这就是你所要做的。

这也适用于原始类型，因此如果您`string.cshtml`在编辑器模板文件夹下创建文件，您的视图使用的任何字符串都将转到该编辑器模板。

*请注意*，如果您的编辑器模板将用于多个视图和控制器，您可以在其下创建编辑器模板，`/Views/Shared/EditorTemplates`以便在应用程序之间共享。

更多关于编辑器模板的信息：[ASP.NET MVC 3 – 如何使用 EditorTemplates](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

希望这可以帮助。

**更新**

根据您的要求，这是与视图模型一起使用的编辑器模板的简单示例（让您了解整个构造的工作原理）

查看型号：

```
public class Book
{
  public int BookId { get; set; }
  public string BookName { get; set; }
  public string Description { get; set; }
} 
```

EditorTemplate 名为 Book.cshtml，位于`/Views/<ControllerName or Shared/EditorTemplates`：

```
@model <MyAppName>.Models.Book

@Html.DisplayFor(p => p.BookId)
@Html.EditorFor(p => p.BookId)

@Html.DisplayFor(p => p.BookName)
@Html.EditorFor(p => p.BookName)

@Html.DisplayFor(p => p.Description)
@Html.EditorFor(p => p.Description) 
```

为简洁起见，在此编辑器模板中没有任何错误处理，没有验证，没有任何操作。

使用 Book 类型的编辑器模板的视图页面根本不需要做任何工作（所有工作都将由编辑器模板完成）：

```
@Html.EditorFor(model => model.Book) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:42:05.253

rcdmk 提出的解决方案完成了这项工作。我认为 polutae 类搜索海豚是正确的方法。我认为使用 ASP.net MVC 我们必须使用字符串类型的视图作为显示名称所指出的。谢谢您的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T23:45:41.323

尝试使用部分视图：

```
@* Views\Shared\_HandlingMyString.cshtml *@
@model string
This is my partial view to handle the string: '@Model' 
```

比你从你的主视图中这样称呼它（我认为这是你正在寻找的链接）：

```
@model MyType // that has public string MyProperty that holds your date (start and end)
@Html.Partial("_HandlingMyString", Model.MyProperty) 
```

沿着这些思路。你可能需要做一些微调，我没有编译这段代码，但它是你似乎需要的。

请让我知道这可不可以帮你。

# xml - 为什么 XML 端点将标签括在 < 而不是 <

> ID：11961574
> 
> 赞同：0
> 
> 时间：2012-08-14T22:11:54.660
> 
> 标签：xml, soap

我目前正在处理第 3 方网络服务。

返回的 XML 具有在 htmlentities 中编码的数据，我必须`.replace('&lt;', '<').replace('&gt;', '>')`在将数据传递给 XML 解析器之前。

虽然这不是一个大问题，但感觉不对，这是正常的做法吗？

**编辑：添加了一个例子： -**

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="https://www.somedomain.com/blah/service/">
&lt;xmlresponse&gt;
&lt;header&gt;
&lt;report&gt;
&lt;time&gt;14/08/2012 23:27:13&lt;/time&gt;
&lt;/report&gt;
&lt;/header&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/xmlresponse&gt;</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:36:14.280

看起来它使用了 HTML 编码来删除`<`and`>`字符，这样它就不会被“意外”解释为 XML。这似乎是因为数据是一个`string`而不是 XML 元素。

# jquery - jquery中的多个选择器为AND

> ID：11961581
> 
> 赞同：0
> 
> 时间：2012-08-14T22:12:28.057
> 
> 标签：jquery, jquery-selectors

我有一个很简单的问题。

在 jquery 上，多选，假设 $(".class1, #id2") 选择元素作为“或”运算符，因为它将选择所有带有 .class1 的元素和所有带有 #id2 的元素。

但是，有没有办法使选择成为“和”运算符？在示例中，将选择同时具有 class1 和 id2 的所有元素，但如果它只有 class1 或只有 id2，则不得选择它们。

我知道只有一个元素可以有 id2，但这是一个普遍的问题，您可以根据需要更改 id2，例如 data-id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:15:05.547

只需链接选择器：

```
$('#id2.class1') 
```

与 CSS 中的相同。来自[CSS 选择器规范](http://www.w3.org/TR/CSS21/selector.html)：

> *简单选择器*是类型[选择器](http://www.w3.org/TR/CSS21/selector.html#type-selectors)或[通用选择器](http://www.w3.org/TR/CSS21/selector.html#universal-selector)，后跟零个或多个[属性选择器](http://www.w3.org/TR/CSS21/selector.html#attribute-selectors)、[ID 选择器](http://www.w3.org/TR/CSS21/selector.html#id-selectors)或[伪类](http://www.w3.org/TR/CSS21/selector.html#pseudo-classes)，顺序不限。如果所有组件都匹配，则简单选择器匹配。

您可能想知道您既没有使用类型选择器也没有使用通用选择器，但通用选择器在这里是隐含的。因此，`#id2`与 相同`*#id2`。

另外你可能会注意到这里没有提到类选择器，但我认为这只是因为它是一个特定于语言的选择器（HTML）并且相当于`[class~="class1"]`.

因此，您可以简单地以任何您想要的顺序组合 ID 选择器、类选择器、属性选择器和伪类选择器，并且可以选择在它们前面加上类型选择器。

一些例子：

```
p.foo
a[rel=follow]
#foo.bar.baz[data-id=42]:hover 
```

最后一个相当于

```
.baz.bar:hover[data-id=42]#foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:15:15.233

尝试以下操作：

```
 $("#id2.class1") // selects an element with id of 'id2' and class of 'class1' 
```

或使用`Attribute Equals`选择器：

```
 $(".class1[id='id2']") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T22:20:57.647

> 我知道只有一个元素可以有 id2，但这是一个普遍的问题，您可以根据需要更改 id2，例如 data-id

id 和 data-id 存在巨大差异，您问题答案的语法将完全不同。

使用 id 和 class 最多可以得到 none 或 1 个元素（因为你应该有唯一的 id）使得“and”有点多余。

```
$("#myDiv.myClass") // Should in theory only return a single element 
```

但是，如果您查询具有相同 data-id 和类的元素，则可以返回多个元素。

寻找公共属性和类值可能如下所示：

```
$(".myClass[data-id='myDiv']")​; // Can return multiple elements 
```

见[**演示**](http://jsfiddle.net/FranWahl/6DtZ6/)

# sql - TSQL：在 BEGIN...END 块内执行存储过程

> ID：11961583
> 
> 赞同：2
> 
> 时间：2012-08-14T22:12:48.587
> 
> 标签：sql, tsql

在 BEGIN...END 块之外调用存储过程时，我不需要使用 EXEC 或 EXECUTE 命令；以下作品：

```
SP_RENAME '[dbo].[TableName].[old_column]', 'new_column', 'COLUMN' 
```

但是，当我在 BEGIN...END 块内移动这一行时，除非我使用 EXEC 或 EXECUTE 命令，否则它将引发 synatx 错误：

```
IF EXISTS(SELECT * FROM sys.columns WHERE Name = N'old_column' AND Object_ID = Object_ID(N'TableName'))
BEGIN
    EXEC SP_RENAME '[dbo].[TableName].[old_column]', 'new_column', 'COLUMN'
END 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T22:51:26.390

来自[MSDN 的`EXECUTE`文章](http://msdn.microsoft.com/en-us/library/aa258848%28v=sql.80%29.aspx)：

> 如果语句是批处理中的第一个语句，则在执行存储过程时不必指定 EXECUTE 关键字。

因此，您的第二个示例引发错误，因为存储过程调用不是批处理中的第一条语句。

# python - 基于数组项重建/构建新数组

> ID：11961585
> 
> 赞同：0
> 
> 时间：2012-08-14T22:12:55.007
> 
> 标签：python, arrays, serialization, multidimensional-array

我有一个由各种子数组组成的数组，例如：

```
[{'x':'xvalue', 'y':'yvalue', 'group':'groupname'}...{'x':'xnvalue', 'y':'ynvalue', 'group':groupnname'}] 
```

我想以以下形式创建一个新数组或序列化相同的数组：

```
[{'groupa':['x':'xvalue', 'y':'yvalue'}}...{'groupn':{'x':'xnvalue', 'y':'ynvalue'}] 
```

很抱歉以一种非常奇怪的方式提出这个问题，但对这个问题没有更好的解释。

我这里首选的脚本语言是 python。

样本数据：

```
{"id":"jMGTsJXWiI","key":"s1","value":{'group' : "x", 't':'45', 'xs':'x5e8'}}
{"id":"545sJXWiI","key":"s3","value":{'group' : "x", 't':'415', 'xs':'xr58'}}
{"id":"xjMdT45","key":"s2","value":{'group' : "y", 't':'405', 'xs':'xs58'}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:21:05.160

假设您的数据实际上是一个字典列表，这将起作用：

```
>>> groups
[{'y': 'yvalue', 'x': 'xvalue', 'group': 'groupname'}, {'y': 'ynvalue', 'x': 'xnvalue', 'group': 'groupnname'}]
>>> final_groups = {grp.pop('group'):grp for grp in groups}
>>> final_groups
{'groupname': {'y': 'yvalue', 'x': 'xvalue'}, 'groupnname': {'y': 'ynvalue', 'x': 'xnvalue'}} 
```

由于字典理解，这假设为 2.7+。如果 2.6-，那么

```
>>> final_groups = dict((grp.pop('group'),grp) for grp in groups) 
```

**编辑**

回答您评论中的问题。

不，没有`import group`。这是完整的脚本：

```
>>> groups = [{'x':'xvalue', 'y':'yvalue', 'group':'groupname'},{'x':'xnvalue', 'y':'ynvalue', 'group':'groupnname'}]
>>> final_groups = dict((grp.pop('group'),grp) for grp in groups)
>>> final_groups
{'groupname': {'y': 'yvalue', 'x': 'xvalue'}, 'groupnname': {'y': 'ynvalue', 'x': 'xnvalue'}} 
```

这`{...}`是 2.7+ 特定的。它被称为字典理解，如果你的 python 版本低于 2.7，那么你不能这样做，而是可以像我上面列出的那样做。

**编辑 2**

怎么样：

```
final_groups = dict(
    [
        ('%s.%s' % (item['value'].pop('group'), item['key']), item['value']) for item in groups
    ]
) 
```

**输出**

```
{'y.s2': {'xs': 'xs58', 't': '405'}, 'x.s3': {'xs': 'xr58', 't': '415'}, 'x.s1': {'xs': 'x5e8', 't': '45'}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:20:23.537

单线：

```
>>> lis=[{'x':'xvalue', 'y':'yvalue', 'group':'groupname'},{'x':'xnvalue', 'y':'ynvalue', 'group':'groupnname'}]

>>> [{x['group']:{y:x[y] for y in x if y !='group'} for x in lis}]

[{'groupname': {'y': 'yvalue', 'x': 'xvalue'}, 'groupnname': {'y': 'ynvalue', 'x': 'xnvalue'}}] 
```

使用 for 循环：

```
lis=[{'x':'xvalue', 'y':'yvalue', 'group':'groupname'},{'x':'xnvalue', 'y':'ynvalue', 'group':'groupnname'}]
lis1=[{} for _ in range(len(lis))] # lis1= [{},{}]

for i,x in enumerate(lis):
    lis1[i][x['group']]={}      #creates lis1[{'groupname':{}}]
    for y in x:
        if y!='group':
            lis1[i][x['group']][y]=x[y] #add values to lis1[{'groupname':{}}]

print(lis1) 
```

# java - 需要帮助制作 DB Schema

> ID：11961586
> 
> 赞同：0
> 
> 时间：2012-08-14T22:12:58.773
> 
> 标签：java, mysql, sql, database, schema

简而言之，我需要帮助来制作一个不错的 DB Schema，而且我并不精通数据库的方式。

我可以给你一个我想要存储的数据样本，以 json 格式。

```
"items": [
{
"defindex": 45,
"level": 10,
"quality": 6,
"quantity": 1,
},
{
"defindex": 348,
"level": 10,
"quality": 6,
"quantity": 1,
}, 
```

不过，还会有更多，最多 1000 个，都附加到一个识别号，所以我可以说“5162562 有这些项目”。但是，我还希望能够在数据库中搜索“defindex”= 45，然后获取“5162562”，或者所有存储有“defindex”= 45 的标识号。

将存储大量数据，所以我也想知道要使用什么数据库，MySQL？

非常感谢，我是 SQL 数据库的新手，但对编程不熟悉，所以我希望能够理解。

-比利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:20:48.540

如果您打算加入，MySQL 非常棒。但是，如果您只是有一个树状关系，并且只需要遍历树（父到子）或兄弟姐妹（子到另一个子），那么 MongoDB 或其他 NoSQL 数据库解决方案（如 Riak）将更快、更灵活部署。另外，NoSQL 数据库将接受稍作修改的 JSON。

在您的情况下，这看起来非常适合 NoSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:20:56.727

顺便说一句，我希望您已将其正确标记为`java`- 您的代码是`javascript`（尽管 Java 中经常使用的格式）。

如果您学习了如何使用[Java Persistence API](http://en.wikipedia.org/wiki/Java_Persistence_API)（使用[Hibernate EntityManager](https://hibernate.org)之类的实现），则无需手动创建模式，因为它将根据您的 Javabeans 上的注释和您选择的 DB 自动创建。

[来自 Oracle](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)的教程。

如果您也在使用 Lombok，那么您的课程可能很简单

```
@Getter @Setter
@Entity
public class MyEntity {
    @Id private int id;
    @Column private int original_id;
    @Column private defindex;
    @Column private int level;
    @Column private int quality;
    @Column private int inventory;
    @Column private int quantity;
    @Column private int origin;
} 
```

或者您可以`enum`为该字段定义 s 并使用它们。

注意[JPA hashCode() / equals() 的困境](https://stackoverflow.com/questions/5031614)

# ios - 如何将配置文件添加到 IPA 文件

> ID：11961587
> 
> 赞同：5
> 
> 时间：2012-08-14T22:13:01.303
> 
> 标签：ios, ipa

我从网上下载了一个 IPA，我想将它上传到[Diawi](http://www.diawi.com/)或[TestFlight](https://testflightapp.com/)进行演示测试，但我不断收到类似`No provisioning profile found in the application bundle`或`Invalid IPA: missing embedded provisioning profile. Are you sure this is an ad hoc?`

如何编辑 IPA 以便成功将它们上传到演示站点？

PS：我没有 XCode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:21:13.963

你不能。

构建时`.ipa`，必须使用配置文件构建它才能分发。此外，您的测试设备的 UDID 必须在该配置文件的有效设备列表中。一旦`.ipa`创建，您将无法返回并对其进行编辑。如果您希望能够在您的设备上运行它，您需要创建一个新的 - 或者让创建新的原始人创建`.ipa`一个新的，因为您没有 XCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:05:50.603

您不能以任何其他方式签署 .IPA 文件，您需要准备使用更新的配置文件签名的新版本，其中包含设备 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T11:25:50.933

确保在创建**.ipa**文件时，您必须选择**Generic iOS Device**作为**[![目标](../Images/3fdee9eecafa210a7bca49ca3bb8ca23.png)](https://i.stack.imgur.com/ZTvY2.png)**

# javascript - Titanium Studio 保持函数执行，直到另一个函数完成

> ID：11961588
> 
> 赞同：0
> 
> 时间：2012-08-14T22:13:14.007
> 
> 标签：javascript, appcelerator

嘿，我试图让一个窗口填充一个表格视图，该视图是从 Titanium Studio 中的网络功能填充的，构建：2.1.1.201207271312。我已正确获取数据，但问题是程序继续运行而无需等待正确填充表视图。这是代码：

ui.js：

```
bs.ui.createTransitRoutesListWindow = function() {

    var winbsRoutesList = Titanium.UI.createWindow({
    });
    var tv2 = Ti.UI.createTableView();
    tv2 = bs.ui.createbsRouteListTableView();

    winbsRoutesList.add(tv2);       
};

bs.ui.createbsRouteListTableView = function() {

    var tv = Ti.UI.createTableView();       

    Ti.API.info('populating data');
        var busStopList = bs.db.routeStopList(); 

        tv.setData(busStopList);

        return tv;

}; 
```

db.js：

```
 bs.db.routeStopList = function() {
var stoplist = [];

bs.net.getRoutes(function(data) {
    Ti.API.info('data length: '+data.length);
    for (var i = 0;i<data.length;i++) {
        stoplist.push({
            title:data[i].stopName,
            id: i
        });
    }

});
return stoplist;
 } 
```

网络.js

```
bs.net.getRoutes = function(_cb) { 

    var xhr = Titanium.Network.createHTTPClient();
    xhr.onload = function() {  
        _cb(JSON.parse(this.responseText));

    Ti.API.info(this.responseText)
    };
    xhr.onerror = function(event) {
    }
    xhr.open("GET","<URL to valid JSON>", true);  
    //+ Ti.App.Properties.getString('currentBus','This is a string default')
    xhr.send();

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:30:54.870

`bussearch.net.getRoutes()`是一个 AJAX 操作，因此它是*异步*的。这意味着代码不会等待它完成。响应进行时，代码将继续进行。它会响应的时间也不知道。

如果你想在数据返回后做一些事情，你应该在回调中做所有事情，或者创建像 jQuery 这样的延迟对象（基本上是回调容器）。

```
//db.js
bussearch.db.routeStopList = function(callback) {
    var stoplist = [];
    bussearch.net.getRoutes(function(data) {
        ....
        callback.call(this,stoplist);
    });
}

//ui.js
bussearch.ui.createBussearchRouteListTableView = function(callback) {
    var tv = Ti.UI.createTableView();       
    Ti.API.info('populating data');
    bussearch.db.routeStopList(function(busStopList){
        tv.setData(busStopList);
        callback.call(this,tv);
    }); 
};

//calling createBussearchRouteListTableView()
createBussearchRouteListTableView(function(tv){
    //tv in here is the data
    //do inside here what you want to do to tv after it's retrieved
}); 
```

# tsql - 临时表与光标

> ID：11961589
> 
> 赞同：-1
> 
> 时间：2012-08-14T22:13:28.917
> 
> 标签：tsql

是否可以通过利用存储过程中的临时表来完全避免游标？

SQL Server 2008 及更高版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:39:07.897

您还可以使用内存表，使用 '''WITH''' 语句。尝试进行声明性调用，而不是以这种方式使用 Cursors 循环。

IE：

```
With A as(
Select t.col1
From Table1 t
)
, B as(
Select t.col2
From Table2 t
)

Select A.col1
UNION
Select B.col2 
```

您也可以将 A、B 加入其他表

# .net - 移除 IIS express 的 30MB 上传限制

> ID：11961590
> 
> 赞同：12
> 
> 时间：2012-08-14T22:13:35.073
> 
> 标签：.net, iis, iis-express

有谁知道如何取消 30MB 上传限制，特别是针对 IIS Express？

我试过编辑 applicationhost.config 和

```
 <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="1050000"></requestLimits>
      </requestFiltering>
    </security>

<location path="api/media/AsyncUpload">
    <system.web>
      <httpRuntime maxRequestLength="1050000" /> 
<!-- The size specified is in kilobytes. The default is 4096 KB (4 MB). 1gb = 1048576 -->
        </system.web>
      </location> 
```

似乎设置正确？

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-14T22:15:51.650

您应该更改服务器配置文件。您正在寻找的领域是

```
<system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="524288000"/>
            </requestFiltering>
        </security>
</system.webServer> 
```

如果它不存在，添加它应该覆盖默认值。

# android - 用我的应用打包另一个 apk

> ID：11961598
> 
> 赞同：0
> 
> 时间：2012-08-14T22:14:11.740
> 
> 标签：android, apk

我没有第二个应用程序的源代码，但我有 apk。当有人安装我的 apk 时，有没有办法自动安装这个 apk？理想情况下，它会默默地完成。此应用程序不在市场上，也永远不会，仅作为 .apk 文件交换。

我使用另一个应用程序来显示我的应用程序中的数据。目前我必须手动安装我的应用程序和另一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:21:46.920

> 当有人安装我的 apk 时，有没有办法自动安装这个 apk？

不。

> 理想情况下，它会默默地完成。

双重没有。您自己的 APK 和您正在分发的 APK（希望获得该应用程序作者的许可或其他许可）都不能静默安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:19:02.840

您不能在安装 APK 时自动安装 APK，但您可以让应用程序在启动时检查依赖的应用程序，如果未安装，请安装它。

```
Intent install = new Intent(Intent.ACTION_VIEW)
    .setData(Uri.parse("file:///path/to/your.apk"))
    .setType("application/vnd.android.package-archive";
startActivity(promptInstall); 
```

当然，首先您必须将 APK 获取到用户的外部存储，但我相信您可以找到答案。

但是不，它不能默默地完成。

# android - 获取另一个android应用程序图标的资源ID

> ID：11961599
> 
> 赞同：1
> 
> 时间：2012-08-14T22:14:21.600
> 
> 标签：android, resources, icons

有没有办法获取另一个android应用程序图标的**资源ID ？**（例如`com.android.systemui.R.drawable.ic_xxx`）

我试过`context.getApplicationInfo().icon`了，但它返回了一个长整数。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:19:04.607

您可以使用以下方法获取`Drawable`应用程序的图标：

```
Drawable icon = getPackageManager().getApplicationIcon( PACKAGE_NAME ); 
```

如果您对自己应用的 Drawable 的资源 ID 感兴趣，请尝试以下操作：

```
int resourceID = getResources().getIdentifier( DRAWABLE_NAME , "drawable", PACKAGE_NAME ); 
```

或者，如果您关心性能，则此版本更快，但使用反射：

```
try {
      Class resource = R.drawable.class;
      Field field = resource.getField( DRAWABLE_NAME );
      int drawableId = field.getInt(null);
    } catch (Exception e) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T21:08:04.020

此方法应该适用于获取应用程序的应用程序图标，包括您的应用程序图标：

```
String appPackageName=...; //use getPackageName() in case you wish to use yours
final PackageManager pm=getPackageManager();
final ApplicationInfo applicationInfo=pm.getApplicationInfo(packageName,PackageManager.GET_META_DATA);
final Resources resources=packageManager.getResourcesForApplication(applicationInfo);
final Bitmap appIconBitmap=BitmapFactory.decodeResource(resources,applicationInfo.icon); 
```

# git - “致命：不是 git 存储库（或任何父目录）”来自 git status

> ID：11961600
> 
> 赞同：117
> 
> 时间：2012-08-14T22:14:22.037
> 
> 标签：git, repository, clone, git-clone, git-status

此命令用于获取文件并编译它们：

```
git clone a-valid-git-url 
```

例如：

```
git clone git://cfdem.git.sourceforge.net/gitroot/cfdem/liggghts 
```

但是，`git status`（或任何其他 git 命令）然后给出上述`fatal: Not a git repository (or any of the parent directories)`错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-08-14T22:19:01.643

您必须首先实际 cd 进入目录：

```
$ git clone git://cfdem.git.sourceforge.net/gitroot/cfdem/liggghts
Cloning into 'liggghts'...
remote: Counting objects: 3005, done.
remote: Compressing objects: 100% (2141/2141), done.
remote: Total 3005 (delta 1052), reused 2714 (delta 827)
Receiving objects: 100% (3005/3005), 23.80 MiB | 2.22 MiB/s, done.
Resolving deltas: 100% (1052/1052), done.

$ git status
fatal: Not a git repository (or any of the parent directories): .git
$ cd liggghts/
$ git status
# On branch master
nothing to commit (working directory clean) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-01-10T21:40:16.460

我刚收到这条消息，在尝试其他消息之前有一个非常简单的答案。在父目录中，键入`git init`

这将初始化 git 的目录。然后应该工作`git add`。`git commit`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-02T09:15:08.700

就我而言，是一个环境变量`GIT_DIR`，我添加了它以更快地访问。

这也破坏了我在 SourceTree 中的所有本地存储库:(

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-12-19T03:44:17.143

有时是因为 ssh。所以你可以使用这个：

```
git clone https://cfdem.git.sourceforge.net/gitroot/cfdem/liggghts 
```

代替：

```
git clone git://cfdem.git.sourceforge.net/gitroot/cfdem/liggghts 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-08-11T17:41:31.300

就我而言，当我使用 windows cmd 尝试任何 git -- 命令（例如 git status）时，我遇到了同样的问题。所以我要做的是在环境变量中安装 git for window [https://windows.github.com/](https://windows.github.com/) 后，在“PATH”变量中添加 git 的类路径。通常 git 将安装在`C:/user/"username"/appdata/local/git/bin`环境变量中的 PATH 上添加它

cmd 上的另一件事是转到您的 git 存储库或 cd 到您的克隆在您的窗口上的位置，通常它们将存储在 github 下的文档中

```
cd Document/Github/yourproject 
```

之后，您可以使用任何 git 命令

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-14T16:56:45.507

我还有另一个问题。我在一个 git 目录中，但通过符号链接到达那里。我必须直接进入目录（即不通过符号链接）然后它工作正常。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-30T06:31:55.813

```
git clone https://github.com/klevamane/projone.git
Cloning into 'projone'...
remote: Counting objects: 81, done.
remote: Compressing objects: 100% (66/66), done.
remote: Total 81 (delta 13), reused 78 (delta 13), pack-reused 0
Unpacking objects: 100% (81/81), done. 
```

你必须“cd projone”

然后你可以检查状态。

* * *

一开始很难注意到这一点的一个原因是，因为您已经在计算机中创建了一个同名的文件夹，并且您将项目克隆到该文件夹​​中，因此您必须再次更改目录

* * *

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-01-26T21:51:41.797

当我尝试使用**git init**初始化 git 时，这个错误得到了解决。有效

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-06-17T08:46:50.360

如果现有项目解决方案计划在 VS Code 中迁移到 TSF：

打开终端并运行以下命令：

1.  **在该文件夹（根目录）中**初始化git****

     **`git init`** 
***   **添加**Git

    `git add .`

    *   **将您的 TSf/Git链接**到该项目 - {url} 替换为您的 git 地址

    `git remote add origin {url}`

    *   **提交**这些更改：

    `git commit -m "initial commit"`

    *   **推送**- 我将代码推送为版本 1，您可以为您的分支使用任何名称

    `git push origin HEAD:Version1`** 

 *** * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-09T10:34:43.240

就我而言，原始存储库是一个空的存储库。

所以，我必须输入（在 Windows 中）：

```
mkdir   dest
cd dest
git init
git remote add origin a\valid\yet\bare\repository
git pull origin master 
```

要检查存储库是否是裸存储库：

```
git rev-parse --is-bare-repository 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-10T13:16:26.550

简单地说，在克隆存储库后，您需要 cd ***（更改当前目录）***到新的克隆文件夹

```
git clone https://User_Name@bitbucket.org/Repo_Name.git

cd Repo_Name 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-04T19:39:39.403

我突然遇到一个错误，就像在我尝试从以下位置运行任何 git 命令的任何目录中一样：

`fatal: Not a git repository: /Users/me/Desktop/../../.git/modules/some-submodule`

对我来说，原来`.git`我的桌面上有一个隐藏文件，内容如下：

`gitdir: ../../.git/modules/some-module`

删除该文件并修复。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-19T05:49:54.933

我的办公室网络也有同样的问题。我**使用**这个命令，但它对我的 **url 不起作用，所以像这样：之前** `$ git clone https://gitlab.com/omsharma/Resume.git`

**在**我使用此 URL 后：`$ git clone https://my_gitlab_user@gitlab.com/omsharma/Resume.git` 尝试一下。**

# android - 添加 Gson 库外部 Jar 时出错

> ID：11961605
> 
> 赞同：0
> 
> 时间：2012-08-14T22:15:02.100
> 
> 标签：android, gson

我想使用 GSON 库，这是一个 Java 库，可用于将 Java 对象转换为其 JSON 表示，但它不起作用。

Properties -> Java Build Path -> Libraries -> Add External JARs (添加下载的gson jar)

我收到此错误：

```
caused by: java.lang.NoClassDefFoundError: com.google.gson.GsonBuilder 
```

帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:26:53.377

尝试在您的项目下创建一个名为“lib”的文件夹，并将 gson jar 复制到“lib”目录并重复上述步骤。

# android - Android sdk：网络检查对话框永远不会出现

> ID：11961609
> 
> 赞同：1
> 
> 时间：2012-08-14T22:15:23.753
> 
> 标签：android, android-dialog

我对android开发的经验很少，我用webview制作了一个简单的应用程序，我希望能够在没有网络连接时提醒用户。但是我无法显示警报对话框。代码编译良好，没有任何错误或警告。

MainActivity.java

```
package dk.zerone.vuc;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    public final boolean networkCheck() {
        ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    // ARE WE CONNECTED TO THE NET
    if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED ||
    connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED ) {
        return true;
    } else if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED  ) {
        return false;
    }
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if(networkCheck()) {

        // INTERNET IS AVAILABLE, DO STUFF..

        } else {
            AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
            alertDialog.setTitle("Reset...");
            alertDialog.setMessage("R u sure?");

            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            } });
            alertDialog.show();
        }

    /* Splash screen */
    // ...

    /* WebView */
    WebView webview = new WebView(this);
    webview.setWebViewClient(new WebViewClient()); 

    setContentView(webview);

    Uri uri = Uri.parse("http://mobil.vucfyn.dk/mobil");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

我正在模拟器中测试代码，使用 F8 或飞行模式禁用网络不会触发对话或网络检查。

我究竟做错了什么？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:50:31.297

一方面，您没有在每种情况下都向用户显示您的活动。您是在 oncreate 中启动浏览器。您没有使用 WebView 来加载 url，而是使用预加载的浏览器来显示您的 URL。采用

```
webview.loadUrl("http://mobil.vucfyn.dk/mobil"); 
```

而不是 oncreate 函数中的最后 3 行

# c# - 代码优先 - 按键获取子实体

> ID：11961610
> 
> 赞同：0
> 
> 时间：2012-08-14T22:15:27.107
> 
> 标签：c#, entity-framework-4, .net-4.0, ef-code-first

我使用的是 Entity Framework 4.3.1 Code First，我有类似以下的内容：

```
class Program
{
    static void Main(string[] args)
    {
        // get LogEntry with id x..
    }
}

public class MyContext : DbContext
{
    public DbSet<Log> Logs { get; set; }
}

public class Log
{
    public int LogId { get; set; }
    public ICollection<LogEntry> LogEntries { get; set; }
}

public class LogEntry
{
    public int LogEntryId { get; set; }
} 
```

给定整数 LogEntryId 获取 LogEntry 对象的最佳方法是什么？是否可以直接获取实体而不通过`Log.LogEntries`属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:34:40.890

如果您对上下文有参考，那么

```
var entry = context.Set<LogEntry>().Find(entryId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:34:39.880

您的上下文中没有 DbSet< LogEntry > 的任何原因？

如果你这样做了，你将能够直接从上下文中加载它。

```
public class MyContext : DbContext
{
    public DbSet<Log> Logs { get; set; }
    public DbSet<LogEntry> LogEntries { get; set; }
}

var logEntry = context.LogEntries.SingleOrDefault(le => le.LogEntryId == someLogEntryId); 
```

# java - 在球衣中暂停 http servlet 请求是否安全？

> ID：11961616
> 
> 赞同：0
> 
> 时间：2012-08-14T22:15:58.450
> 
> 标签：java, asynchronous, jersey, servlet-3.0

假设一个 Jersey`ContainerResponseFilter`实现是这样的：

```
public class MyFilter implements ContainerResponseFilter {
    @Context
    HttpServletRequest request;

    public ContainerRersponse(ContainerRequest req, ContainerResponse resp) {
       if (shouldBeAsync(resp) {
           AsyncContext ac = request.startAsync();
           ....
       }
       return resp;
    }
} 
```

这完全安全吗？Jersey 是否假设处理请求和生成响应内容发生在同一个线程上？如果另一个线程试图修改响应对象会发生什么？

我想在沉浸于球衣代码之前我会问一下。

# java - 如何否定 java 正则表达式中的星号？

> ID：11961617
> 
> 赞同：2
> 
> 时间：2012-08-14T22:16:00.803
> 
> 标签：java, regex, regex-negation

我正在尝试创建一个正则表达式，以帮助 Eclipse 的搜索找到包含`start(`注释行之外的所有行。

也就是说，找到如下行：

```
 is not sufficient because it doesn't guarantee that start(b) is 
```

但**不是**这样的行：

```
 * is not sufficient because it doesn't guarantee that start(b) is 
```

我已经能够想出正则表达式`(\s*?)(?!\*)(.*)(start\()(.*$)`，但它找到*了两条*线。

如何排除以`*`（可能在一些空格之后）开头的行并包含没有该行的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:23:53.303

对于以空格开头的行，有可能`\s*?`匹配零个空格，然后`(?!\*)`匹配一个空格，而`.*`预告片匹配包括星号在内的行的其余部分。

一种解决方案是将前导空白序言放在否定子句中：

```
^(?!\s*\*).*start\(.*$ 
```

或者，您可以使用所有格量词来吃掉所有的空格并且从不回溯：

```
^\s*+(?!\*).*start\(.*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:55:22.187

```
^\s*+(?=[^\*]).*?start\( 
```

`^`是行的开始

`\s*+`贪婪地消耗空白

`(?=`是一个前瞻 - 它匹配一个位置，但不匹配任何文本。这使您要搜索的内容成为在线上的第一件事。

`[^\*]`是不是 * 的任何字符

`)`结束前瞻

`.*?`懒惰匹配任何旧垃圾

`start\(`或者你想找到的任何其他东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:29:28.163

我会试试这个`^\s*[^\*]+.*start\(.*$`

# excel - 将数据从一个 Excel 模板转换为另一个 Excel 模板？

> ID：11961618
> 
> 赞同：1
> 
> 时间：2012-08-14T22:16:09.353
> 
> 标签：excel, xslt, transformation

我想从一个 Excel 模板（由客户提供）中获取数据，然后将其转换为我自己的内部 Excel 模板。

我基本上希望能够编写一个转换 (XSLT)，从客户端的 Excel 模板中调用字段名称，然后通过某种映射过程将值导入我自己的模板中的相应字段。

有没有办法做到这一点？例如，客户端可能有以下列： 名字 姓氏 地址 电话号码

但是，我的模板可能只有名字姓氏电话号码

我希望转换只是自动从客户端 Excel 模板中的三个相应字段中提取值。

这可能吗？如果是这样，我在看什么样的流程？

注意：Excel 模板是指带有字段和单元格值的格式良好的 Excel 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:24:15.190

是的，这是我看到的过程：

1) 从您的 Excel 电子表格创建一个 XML 数据和架构文件。请参阅[此参考。](http://office.microsoft.com/en-gb/excel-help/create-an-xml-data-file-and-xml-schema-file-from-worksheet-data-HA010263509.aspx)

2) 将 XML 模式导入客户端 Excel 电子表格。请参阅[此参考。](http://msdn.microsoft.com/en-us/library/office/gg469857.aspx)

3) 也将客户端 Excel 电子表格导出到 XML 数据文件。

4）一举对两个文档进行转换，基本上：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common">

  <xsl:variable name="mine"   select="document(/path/to/your.xml)"/>
  <xsl:variable name="client" select="document(/path/to/client.xml)"/>

  <xsl:variable name="both">
    <both>
      <xsl:copy-of select="exsl:node-set($mine)/>
      <xsl:copy-of select="exsl:node-set($client)/>
    </both>
  </xsl:variable>

  <xsl:template match="exsl:node-set($both)/whatever>
    <xsl:apply-templates/>
  </xsl:template>

  <!-- More templates here to do what you will with all the data,
       whether it be copying, sorting first, or etc. -->
</xsl:stylesheet> 
```

5) 将结果导入 Excel 文档。

这是相当简单的，我有一段时间没有这样做了，所以从那时起，一些特定的步骤可能在 Excel 中的版本颠簸中发生了变化。最后一步需要在转换之外完成，因为 XSLT 是非破坏性的（不修改输入源文档，而只输出新的结果文档。

此外，它使用 XSLT 扩展函数 exsl:node-set()。根据您使用的工具，即 IE，您可能需要将其切换到 MSXSL 扩展版本。

```
xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
```

和

```
msxsl:node-set() 
```

分别。

# emacs - 将 Emacs 的输入事件转换为键码

> ID：11961623
> 
> 赞同：2
> 
> 时间：2012-08-14T22:17:04.733
> 
> 标签：emacs, elisp

在处理一些 Vim 仿真功能时，我想出了以下代码：

如果按`;`后跟`Return`然后光标将跳到行尾并插入分号。

```
(global-set-key (kbd ";") 'insert-or-append)

(defun insert-or-append ()
  "If the user enters <return>, then jump to end of line and append a semicolon,
   otherwise insert user input at the position of the cursor"
  (interactive)
  (let ((char-read (read-char-exclusive))
        (trigger ";"))
    (if (eql ?\r char-read)
        (progn
          (end-of-line)
          (insert trigger))
      (insert (this-command-keys))))) 
```

这个函数工作正常，但一切都是硬编码的。我宁愿让它更通用。理想情况下，我想指定一个 kbd 宏（例如`(kbd "<return>")`）作为参数并将其与`(read-char)`. 但是，kbd 返回一个符号并`(read-char)`返回一个字符代码。我一直在查看 Emacs 文档，但找不到转换。

有没有办法比较两者？还是有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:43:18.780

那这个呢：

```
(global-set-key (kbd "RET") 'electric-inline-comment)

(defun electric-inline-comment ()
  (interactive "*")
  (if (and (eq last-command 'self-insert-command)
           (looking-back ";"))
      (progn
        (delete-region (match-beginning 0) (match-end 0))
        (end-of-line)
        (insert ";"))
    (newline))) 
```

# android - 将电话号码从 EditText 解析为 Button

> ID：11961630
> 
> 赞同：0
> 
> 时间：2012-08-14T22:18:04.347
> 
> 标签：android, eclipse, button

我已经知道使用按钮和edittext拨打电话号码的代码，但我不知道如何继续。

```
public void onClick(View arg0) {

    EditText num=(EditText)findViewById(R.id.editText1);
    String number = "tel:" +num.getText().toString().trim();
    Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
    startActivity(callIntent);
} 
```

我需要允许标记为 Button1 的按钮解析此 Intent 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:20:57.653

```
Button Button1 = (Button) findViewById(R.id.button1_id);
Button1.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // Perform action on click
             EditText num=(EditText)findViewById(R.id.editText1);
             String number = "tel:" +num.getText().toString().trim();
             Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number));
             startActivity(callIntent);
         }
     }); 
```

# windows - 谁调用了我的 RPC？

> ID：11961634
> 
> 赞同：1
> 
> 时间：2012-08-14T22:18:21.843
> 
> 标签：windows, rpc, midl

我正在构建一个 Microsoft RPC 服务器，我想知道是否有办法确定哪个用户调用了 RPC 函数？（意思是，哪个用户正在运行调用 RPC 方法的进程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:27:59.887

我不知道是否有更有效的方法，但一种解决方案是调用[RpcImpersonateClient](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375720%28v=vs.85%29.aspx)、 OpenThreadToken ，然后酌情调用[RpcRevertToSelf](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378431%28v=vs.85%29.aspx)或 RpcRevertToSelfEx 。

您可以使用 GetTokenInformation 从令牌中获取用户 SID，并在需要时使用 LookupAccountSid 将其转换为用户名。

# css - Internet Explorer 中的 iFrame 缩放问题

> ID：11961635
> 
> 赞同：1
> 
> 时间：2012-08-14T22:18:23.403
> 
> 标签：css, internet-explorer, iframe, internet-explorer-8, scale

我已使用[此处](https://stackoverflow.com/questions/166160/how-can-i-scale-the-content-of-an-iframe/11959481#11959481)描述的方法在我的一个页面上设置 iframe。我只是想要一个我试图 iframe 的页面，所以我使用了各种浏览器的缩放/缩放功能。

为了加载某个部分，我将 iframe 包装在一个 div 中，调整大小并缩放它。然后我将 iframe 放入该 div 并使用`top: -300px;`

这在 Firefox 和 Chrome 中看起来很棒，但在 IE8 中根本无法正常工作（大吃一惊）。基本上，看起来其他东西正在干扰 IE8，并且浏览器不会`top: -300px`从与其他浏览器相同的起点计算 。因此，您最终在 IE8 中看到的结果与在其他浏览器中看到的结果不同。

好的，这是我正在使用的代码。我最终修改了上面前面提到的主题中的代码，为了让 IE8 正确缩放 iframe 内容（而不是整个 iframe 本身），我必须缩放/缩放包装 div 而不是 iframe id 他们建议.

```
#themeframe {
    overflow: hidden;
    position: relative;
    width:800px;
    height:850px;
    -ms-zoom: 0.75;
}

#frame {
    position: absolute;
    overflow-x: hidden;
    top: -300px;
    -moz-transform: scale(0.75);
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.75);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(0.75);
    -webkit-transform-origin: 0 0; 
```

我究竟做错了什么？或者，更确切地说，IE8 看到我不是什么奇怪的 CSS 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:14:00.580

`-ms-zoom`可能是IE8不理解的东西。固定规则：`zoom: 75%;`. 注意单位。

# csv - awk 跳过第二个字段为空白的 CSV 行

> ID：11961637
> 
> 赞同：1
> 
> 时间：2012-08-14T22:18:40.923
> 
> 标签：csv, awk

我有一个 16GB 的 CSV 文件，它是 ;-分隔的，并且字段总是被引用。我需要快速过滤掉第二个字段为空白的行。

```
"12345";"987";"..." # keep it
"67890";"";"..."    # omit it 
```

如果这对性能很重要，前两个字段只是数字。

我想，那个 awk 可能是最高效的工具，但我似乎无法做到这一点。我试过这个，但它错误地省略了大多数行：

```
cat huge.csv | awk '/^"\d+";"\d/' > filtered.csv 
```

当然不一定非要 awk；linux 和 OS X 上常见的任何命令行工具都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:27:43.857

另一种解决方案只是使用

```
awk -F\" '$4' 
```

即，您的命令将是：

```
awk -F\" '$4' huge.csv > filtered.csv 
```

这会将输入字段分隔符设置为`"`并检查第 4 个字段。如果它不为零，它会隐式打印该行。给出：

```
"12345";"987";"..." # keep it 
```

用 GNU awk 3.1.6 测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:21:11.413

尝试这个：`awk -v 'FS=;' '$2 != "\"\""' huge.csv > filtered.csv`

**解释**：awk 将文件拆分为记录（默认：由换行符分隔），记录被拆分为记录（默认：由空格）。

`-v`选项允许在运行脚本之前设置任何 awk 变量，并且`FS`变量是特殊的内置变量，它指定字段分隔符的正则表达式。然后脚本只查看第二个字段（这是第二个 csv 字段），如果它非空，它（隐式）打印整个记录。

PS：即使你的脚本是非惯用的，它几乎是正确的：正则表达式应该是：`/^"[^"]*";"\d/`，所以当第一个字段是非数字时它匹配一行。

PPS：如果您需要通过给定的正则表达式过滤行，请使用 unix 实用程序`grep`：`grep '^"[^"]*";"[0-9]' huge.csv > filtered.csv`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:21:36.267

除非您知道它`;`永远不会出现在任何引用的字段中，否则您不能为此使用 awk。但是，如果满足该标准，您可以执行以下操作：

```
awk '$2 != "\"\""' FS=\; huge.csv > filtered.csv 
```

把它写成这样可能会更干净一些：

```
awk -F\; '$2 !~ /^""$/' huge.csv > filtered.csv 
```

# text - 在 LWJGL 中渲染文本

> ID：11961639
> 
> 赞同：1
> 
> 时间：2012-08-14T22:18:42.830
> 
> 标签：text, rendering, lwjgl

在没有任何额外 jar 的情况下在 LWJGL 中呈现文本的最简单方法是什么？我搜索了一下，看到了这么多复杂的解决方案，我想知道最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T15:00:27.337

我最终使用了精灵表！**它既好又简单，您可以使用位图字体生成器**为文本生成精灵表！

# python - python cPickle unpickling错误无效的加载键

> ID：11961641
> 
> 赞同：2
> 
> 时间：2012-08-14T22:19:00.933
> 
> 标签：python, pickle

python 对象是字符串和数字的嵌套列表。

该文件被打开以写入'w'（不是'wb'），但cPickle被告知使用protocol = 1（所以二进制）。

序列化和反序列化代码在 Linux 上运行良好。我无法恢复保存在 Windows 机器（Python 2.6）上的对象。

我知道（现在）该文件应该在 Windows 中显式打开为“wb”，因为行尾。也就是说，写入的对象是一个嵌套列表并且不包含 \n 所以我不确定这是否重要。

我的问题是可以做些什么来恢复数据？

这是结果`print repr(open(fqfn, 'rb').read(15))`：

```
 ']q\x01(]q\x02]q\x03(U\x0fst' 
```

任何想法表示赞赏。

* * *

我按照[mhawke](https://stackoverflow.com/a/11963449)`l = cPickle.load(open(fqfn, 'r'))`的建议进行了尝试，但 Windows 向我发送了 EOF 错误。

如果我直接在十六进制编辑器中打开文件，我可以简单地替换实例，`'\r\n'`然后`10`使用`13`二进制模式恢复吗？

序列化的输入类似于：

```
[['start', 3454654], [1234567645, -1 , 99], [1234567900, 1 , 56], ...] 
```

我知道输入的顺序、每个列表的长度以及一些值（例如开头的字符串和一些数字）。

所以我想我的问题是我是否可以通过编写处理二进制编码的脚本来反序列化。我不需要将它放入 python 对象——ascii 就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:42:21.480

我想您可能已经尝试通过在 Windows 机器上以文本模式`'r'`（即不是）打开文件来解开文件。`'rb'`如果你很幸运，以下应该可以工作：

```
import cPickle
l = cPickle.load(open(fqfn, 'r')) 
```

您的数据可能不包含新行，但可能包含诸如 10 或 13 之类的值。请考虑以下情况：

```
>>> cPickle.dumps(10, protocol=1)
'K\n.'
>>> cPickle.dumps(256, protocol=1)
'M\x00\x01.'
>>> cPickle.dumps(266, protocol=1)
'M\n\x01.' 
```

第一个中的 '\n' 在那里，因为 ascii 10 是换行符，并且二进制泡菜模式以这种方式存储它。同样，如果您腌制 266 (256+10)，您也会在输出中看到 '\n'。

在 Windows 上，当写入以“文本”模式打开的文件时，Python 会自动将 '\n' 转换为 '\r\n'。在文本模式下阅读时，它还会将 '\r\n' 转换为 '\n'。因此，在 Windows 机器上以“文本”模式打开文件应该可以解决您的问题。

# asp.net - 在 ASP.NET 表单上显示必填数据

> ID：11961646
> 
> 赞同：0
> 
> 时间：2012-08-14T22:19:06.513
> 
> 标签：asp.net, webforms

我有一个关于应用程序用户的强制性数据列表，这是所有用户都必须拥有的。我需要一个按钮，并且在单击事件时，我想显示数据库中所有为空的强制性数据。注意：必填数据列表大约有 30 个字段，这些字段位于 5 个以上的 sql 表中……它是带有 MS SQL Server 数据库的 ASP.NET 应用程序……知道如何实现此功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:56:49.583

让您到达那里的最快技术是 ASP.NET 动态数据，但您需要做一些工作。顺便说一句 - 你不需要 MVC 来使用动态数据。

[http://msdn.microsoft.com/en-us/library/ee845452.aspx](http://msdn.microsoft.com/en-us/library/ee845452.aspx)和 [http://msdn.microsoft.com/en-us/library/cc488545.aspx](http://msdn.microsoft.com/en-us/library/cc488545.aspx)

在您的情况下，您说您希望为*数据库*中为空的字段输入条目。这有点不寻常。通常，我们需要为表示不可为空的列的字段输入条目，这样我们就永远不会尝试将空值放入数据库中。在您的情况下，您将手动应用指示该字段是必需的 UIHint。

[http://msdn.microsoft.com/en-us/library/cc488532.aspx](http://msdn.microsoft.com/en-us/library/cc488532.aspx)

如果这是您的第一次，动态数据将需要一些实验。此外，它以默认方式显示您的表格和字段，因此如果您想修改演示文稿，您将需要进行一些自定义工作。MSDN 文档应该包含您需要的大部分内容。

# php - PHP 字符串和数字总和

> ID：11961649
> 
> 赞同：0
> 
> 时间：2012-08-14T22:19:30.783
> 
> 标签：php, for-loop, echo

我有一个类似的字符串：`00030000`并且需要使用循环来增加它。

```
$start = "00030000";

for ($i = 1; $i < 10; $i++) {
    echo $i + $start;
} 
```

它打印这个

```
30001 
30002 
30003 
30004 
//... 
```

这是可以理解的，但我怎样才能得到以下结果？

```
00030001 
00030002 
00030003 
00030004 
//... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:20:35.937

使用零将其填充到您需要的长度[`str_pad`](http://php.net/manual/en/function.str-pad.php)

```
$start = "00030000";

for ($i = 1; $i < 10; $i++) {
    $sum = $i + $start;
    echo str_pad($sum, 8, "0", STR_PAD_LEFT);
} 
```

输出：

```
00030001
00030002
00030003
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:22:54.910

您可以使用 strpad 或[sprintf](http://au.php.net/manual/en/function.sprintf.php)来获得它。

```
$input = "30";
echo str_pad($input, 4, "0", STR_PAD_LEFT);  // produces "0030" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:23:54.047

```
$start = "00030000";
$startLen = strlen($start);
for ($i = 1; $i < 10; $i++) {
    echo str_pad($i + $start, $startLen, '0', STR_PAD_LEFT );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T22:31:28.810

为了娱乐：

```
$start = "00030000";
$start = '_' . $start;

for ($i = 1; $i < 100; $i++) {
    echo ltrim($start++, '_');
    echo "\n";
} 
```

请不要实际使用该代码。虽然它完美地工作并利用了 php 的[文档功能](http://php.net/manual/en/language.operators.increment.php)，但它让大多数阅读它的人感到困惑（这使它成为糟糕的代码）。使用使用 str_pad() 的答案之一

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T22:35:22.920

```
$start = "00030000";
for ($i = 1; $i < 10; $i++) {
    echo sprintf( "%08u\n", $i + $start );
 } 
```

# c# - 为什么这个接口实现不起作用？

> ID：11961651
> 
> 赞同：2
> 
> 时间：2012-08-14T22:19:42.733
> 
> 标签：c#, inheritance, interface

我似乎对接口实现有一个基本的语法问题。基本上我有这个：

```
 public interface IMarkerInterface
    {       
    }

    public class ConcreteObject : IMarkerInterface
    {
    }

    public interface IDoStuffInterface
    {
        void DoStuff(IMarkerInterface obj);

        // also doesn't work
        // void DoStuff<T>(T obj) where T : IMarkerInterface;
    }

    public class ConcreteDoStuff : IDoStuffInterface
    {
        public void DoStuff(ConcreteObject c)
        {

        }
    } 
```

在我看来，`ConcreteObject`实施`IMarkerInterface`，因此`ConcreteDoStuff.DoStuff()`应该实施`IDoStuffInterface`。

但我得到一个编译错误`"Error ConcreteDoStuff does not implement interface IDoStuffInterface.DoStuff()"`

怎么会？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:23:15.433

您实现的方法需要具有与接口完全相同的签名。虽然所有“ConcreteObject”对象都是“IMarkerInterface”类型，但并非所有“IMarkerInterfaces”都是“ConcreteObject”。因此这两个签名是不等价的。接口必须能够向 CLR 保证该类型的任何对象都实现了有效的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T22:27:48.017

如果我给你任何实现的对象`IDoStuffInterface`，那么你希望能够以*任何*实现的对象`DoStuff`作为参数调用它的方法，对吗？但是，如果您想要什么是可能的，那么您可以*以某种方式*（作为界面用户不可见）仅使用 a调用，但*不能*使用任何其他实现. 因此，您想要的实际上是不可能的（也不是所希望的，因为它违反了[Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）。*`IMarkerInterface`*`DoStuff``ConcreteObject`*`IMarkerInterface`***

 ***但是，您可以编写一个[*显式的接口成员实现*](http://blogs.msdn.com/b/mhop/archive/2006/12/12/implicit-and-explicit-interface-implementations.aspx)来实现接口的`DoStuff(IMarkerInterface)`方法，同时`DoStuff(ConcreteObject)`在它旁边提供一个普通的方法实现。接口的任何用户都只能看到并能够调用该`DoStuff(IMarkerInterface)`方法，但任何用户`ConcreteDoStuff`只能直接调用该`DoStuff(ConcreteObject)`方法。如果用户无论如何都想调用接口方法，则*必须*先将对象强制转换为`IDoStuffInterface`。

```
public class ConcreteDoStuff : IDoStuffInterface
{
    // Explicit interface member implementation:
    // This method is not directly visible as a member of the class.
    void IDoStuffInterface.DoStuff(IMarkerInterface obj)
    {
        // Do something with 'obj', or throw an exception when
        // it has the wrong type. Delegate the call to the
        // other DoStuff method if you wish.
    }

    // Normal method, technically not related to the interface method:
    public void DoStuff(ConcreteObject c)
    {
        // Do your thing.
    }
} 
```

* * *

*编辑：*

### 有趣的解决方法！你认为这是一种普遍的做法吗？或者解决方法更像是要避免的“黑客”？

显式实现接口的技术是众所周知的、很好理解的并且非常普遍。它不被认为是*hack*，也不必避免。在极少数情况下，甚至需要一个类实现两个接口，这两个接口都定义了一个同名的成员，但您想赋予它们不同的行为。

但是，在您限制允许的输入值或操作的所有情况下，您都违反了 Liskov 替换原则 (LSP)。在我的示例中，您会将`IMarkerInterface obj`参数限制为`ConcreteObject`对象。其他示例包括： a在添加对象[`Collection<T>`](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)时引发异常`null`；[`IComparable.CompareTo`](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)当参数类型错误时抛出错误的实现；或在调用其方法[`ReadOnlyCollection`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)时引发异常的a。`Add`

虽然不应该违反 LSP（因此代码变得更加（重）可用和可测试），但它经常*被违反，即使在 .NET Framework 本身中也是如此。*在某些情况下不违反它可能会很麻烦，导致代码难以阅读，甚至可能是不可能的（例如，由于.NET Framework 的类和接口的限制）。

正如我所说，相同的“解决方法”适用于`IComparable`. 例如，要实现一个只能与相同类型的其他对象进行比较的类：

```
public class BeanBag : IComparable, IComparable<BeanBag>
{
    private int beanCount;

    // Explicit interface member implementation:
    int IComparable.CompareTo(object other)
    {
        if (!(other is BeanBag))
            throw new ArgumentException("Wrong type!");
        // Calls the normal CompareTo() method.
        return CompareTo((BeanBag)other);
    }

    // Normal CompareTo method:
    public int CompareTo(BeanBag other)
    {
        if (other == null) return 1;
        return this.beanCount.CompareTo(other.beanCount);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T22:22:07.463

您的实现类`ConcreteDoStuff`正在尝试更改合同。单方面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T22:23:10.790

您需要实现具有匹配签名的方法：

```
public class ConcreteDoStuff : IDoStuffInterface
{
    public void DoStuff(IMarkerInterface c) // not ConcreteObject c
    {

    }
} 
```

请注意，您仍然可以使用 ConcreteObject 实例调用 ConcreteDoStuff.DoStuff ：

```
 var concrete = new ConcreteObject()
 new ConcreteDoStuff().DoStuff(concrete); 
```

如果它对您更有效，您也可以这样做（接口的显式实现）：

```
public class ConcreteDoStuff : IDoStuffInterface
{
    public void DoStuff(ConcreteObject c)
    {

    }

    void IDoStuffInterface.DoStuff(IMarkerInterface c)
    {
       // some implementation preferably related to
       // DoStuff(ConcreteObject) i.e.: 
       DoStuff(c as ConcreteObject); 
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T22:24:52.953

通过只接受`ConcreteObject`你的实现，`ConcreteDoStuff.DoStuff()`你限制了可以传入的参数类型。

如果您要创建另一个也实现了的类`IMarkerInterface`：

```
public class ConcreteObject2 : IMarkerInterface
{
} 
```

它应该能够传递给任何`DoStuff()`实现，但`ConcreteObject2`不是`ConcreteObject`根据定义，因此合同将被违反，正如其他答案所表明的那样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T22:24:05.703

你最好使用通用接口：

```
public interface IMarkerInterface
{       
}

public class ConcreteObject : IMarkerInterface
{
}

public interface IDoStuffInterface<T>
{
    void DoStuff(T obj);
}

public class ConcreteDoStuff : IDoStuffInterface<ConcreteObject>
{
    public void DoStuff(ConcreteObject c)
    {

    }
} 
```***

# joomla - 在 phoca 下载中为特定用户下载

> ID：11961652
> 
> 赞同：0
> 
> 时间：2012-08-14T22:19:44.287
> 
> 标签：joomla, download

我正在尝试制作一个下载部分，我想在其中授予某些用户下载某些文件的权限，例如：

我有两个类别： - 照片和文件

我想要richard 下载照片而不是文件，和想要下载照片和文件的eric 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:36:56.993

这可以通过 Phoca 下载实现：

[http://www.phoca.cz/documents/17-phoca-download-component/366-access-rights](http://www.phoca.cz/documents/17-phoca-download-component/366-access-rights)

> 您可以设置类别和文件的访问权限。
> 
> 类别访问权限
> 
> 在类别中，您可以设置该类别中的文件只能由注册用户下载。但是您也可以设置这些文件只能由一个选定的用户下载。可以在类别编辑模式中选择特定用户。然后该类别中的所有文件只能由选定的用户下载。
> 
> 文件访问权限
> 
> 您可以只允许注册用户下载文件。这些文件可以显示给所有用户或只显示给注册用户。如果它们将为所有用户显示，则公共用户可以看到它们但不能下载它们。只有注册用户才能下载它们。
> 
> 转到组件 » Phoca 下载 » 文件。创建新项目或编辑一些现有项目。将访问级别设置为已注册，并将显示无法访问的文件设置为是。现在所有用户都可以看到该文件，但只有注册才能下载它。
> 
> 与类别权限的区别在于，在类别中您可以选择特定用户，而不仅仅是整个组（注册的、特殊的）。

您可以为每个类别的不同用户分配访问权限。

# algorithm - 使用R语言根据位置信息制作距离矩阵

> ID：11961653
> 
> 赞同：1
> 
> 时间：2012-08-14T22:19:52.740
> 
> 标签：algorithm, r, distance, apply

假设我有一个如下形式的矩阵：

```
Residue Can.Count SideChain XCoord  YCoord ZCoord
1       MET         1         A 62.935  97.579 30.223
2       THR         2         A 63.155  95.525 27.079
3       GLU         3         A 65.289  96.895 24.308
4       TYR         4         A 64.899  96.220 20.615
8       LYS         8         A 67.593  96.715 18.023
9       LEU         9         A 65.898  97.863 14.816
10       VAL        10         A 67.664  98.557 11.533 
```

请注意，数字 5-6-7 被跳过。我想要做的是在每个残基之间建立一个“距离矩阵”。在这种情况下，我想制作一个 7x7 矩阵，其中元素 (1,3) 是这些位置之间的距离。

现在，我意识到我不需要填写下半部分，对角线以上的所有内容就足够了。我还看到了如何使用 2 个 for 循环来做到这一点，如下所示：

```
 for(i in 1:7) {
  for(j in i:7){
    mymatrix[i,j] <- calcdistance(xyz1,xyz2) #I have the distance function already coded.

 }
} 
```

我意识到它总是 O(n^2) 但我想知道我是否可以利用 R 的力量使用 apply 语句（或更聪明的东西）来制作这个矩阵？我试过这样做，但不知何故没有成功。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:03:37.917

您正在寻找的是`dist`功能。详情请参阅`?dist`。

我不清楚您期望 7 x 7 矩阵是什么意思，然后元素 [1,3] 指的是它们之间的距离（在注意到没有 5,6,7 之后）。我认为它的意思是您希望参考`Can.Count`. 您可以通过命名行和列并引用这些名称来做到这一点。

假设您的数据是一个名为的 data.frame `residues`，以下将起作用

*   请注意，这使用 xy 坐标计算二维距离， `c('XCoord','YCoord')`。您可以使用 `c('XCoord','YCoord', 'ZCoord')`.

* * *

```
dist_matrix <-  as.matrix(dist(residues[, c('XCoord','YCoord')], diag = T))
# this gives a 7 by 7 matrix
dist_matrix
##         1        2         3         4        5        6        7
## 1 0.000000 2.065748 2.4513613 2.3883419 4.737453 2.976579 4.829071
## 2 2.065748 0.000000 2.5359132 1.8773814 4.594774 3.604205 5.433609
## 3 2.451361 2.535913 0.0000000 0.7795672 2.311021 1.143637 2.898770
## 4 2.388342 1.877381 0.7795672 0.0000000 2.739099 1.922875 3.620331
## 5 4.737453 4.594774 2.3110206 2.7390986 0.000000 2.047176 1.843368
## 6 2.976579 3.604205 1.1436367 1.9228755 2.047176 0.000000 1.897470
## 7 4.829071 5.433609 2.8987703 3.6203306 1.843368 1.897470 0.000000

# set the dimension names to the Can.Count so we can refer to them
dimnames(dist_matrix) <- list(residues[['Can.Count']],residues[['Can.Count']] )

# now you can refer to the distance between Can.Count 1 and Can.Count 8
dist_matrix['1','8']

## [1] 4.737453

# note that you need to refer to the dimension names as characters, 
# as this is  7 by 7 matrix, so the following will give 
# an (obvious) error message
dist_matrix[1,8]

## Error: subscript out of bounds 
```

# css - CSS - 背景前景对比文本颜色

> ID：11961662
> 
> 赞同：5
> 
> 时间：2012-08-14T22:20:23.187
> 
> 标签：css, text, colors, background, foreground

我有一个按百分比值着色的条形列。

![在此处输入图像描述](../Images/780a47eb6c7adccc725cee9b1afc9940.png)

部分文本对用户不可见，因为它是白色的并且属于白色部分。如果我选择它，我可以看到它，但不是 -

![在此处输入图像描述](../Images/7eb950aacaa273793197db59bc71669c.png)

css中有没有办法显示与背景颜色形成对比的文本？也许一半的文本是白色的，一半的文本是黑色的，所以它对用户是可见的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:59:32.863

我会做这样的事情：

```
.progressbarContainer
{
    position: relative;
    width: 100px;
    height: 15px;
    background: #ff00ff;
}
.backText
{
    position: absolute;
    left: 0;
    color: black;
}
.frontText
{
    position: absolute;
    left: 0;
    color: red;
}
.progressbar
{
    position: absolute;
    width: 14.34%;
    height: 100%;
    background: blue;
    overflow: hidden;
}
```

```
<div class="progressbarContainer">
    <div class="backText">
        14.34%
    </div>
    <div class="progressbar">
    <div class="frontText">
        14.34%
    </div>
    </div>

</div>
```

[JSFiddle](http://jsfiddle.net/k8VNT/)

# asp.net-mvc-3 - 带有过滤器和 MVC3 的 if-modified-since 标头

> ID：11961676
> 
> 赞同：0
> 
> 时间：2012-08-14T22:21:13.750
> 
> 标签：asp.net-mvc-3, filter, http-headers, httpresponse, if-modified-since

我刚刚看到了一些关于实现 if-modified-since 标头的示例。我真的不明白它是如何运作的很好。我已经看过[这个例子](https://stackoverflow.com/questions/10498135/last-modified-header-in-mvc)，似乎如果我为标题“Last-Modified”设置一个日期值，那么如果我稍后检查它，我会得到一个标题“If-Modified-Since”的值，对吗？

还有，好像他虽然提供了一个帮手，但我每一个动作都要用到它？

我也查看了这篇[文章](http://www.58bits.com/blog/2009/07/26/asp-net-mvc-304-not-modified-filter-for-syndication-content/)。他创建了一个过滤器来处理“If-Modified-Since”标题。但是，我不太了解他在那里试图做什么，但正如我所看到的，如果“Last-Modified”和“If-Modified-Since”标题为空，那么它将读取为 dateModified = true然后它不会在过滤器内做任何事情。因此，我认为这取决于在每个操作中设置这些标头值？

最后，我不太确定应该如何使用它，我认为每当我对视图进行更新时，我都应该发送一个新的“Last-Modified”日期值，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T12:27:23.683

我遇到了你的问题，你实际上帮助我解决了你遇到的同样的问题。

我将向您解释标题会发生什么以及我在 C# 中为解决它所做的工作：

*   您将 Last-Modified 指定为服务器响应。

    在 C# 中，这是通过覆盖所需控制器上的 OnActionExecuting 函数来完成的。例如，这就是我的做法：

    ```
     protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.RequestContext.HttpContext.Response.AppendHeader("Last-Modified", "Wed, 01 Sep 2004 13:24:52 GMT");
        base.OnActionExecuting(filterContext);
    } 
    ```

*   就像您看到的那样，我已将其指定到控制器中，因此它将对控制器中的每个操作都有效

*   现在，当您第一次访问该页面时，您将获得一个响应标头，例如`Last-Modified:Wed, 01 Sep 2004 13:24:52 GMT`. 下次访问该页面时，您应该会在请求标头中看到`If-Modified-Since:Wed, 01 Sep 2004 13:24:52 GMT`

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:10:13.997

根据[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html) “Last-Modified 实体标头字段指示源服务器认为最后修改变体的日期和时间。” 例如：如果您的视图是关于博客的，您可以发送最后编辑或修改的日期。通常它用于缓存。

关于 If-Modified-Since，此标头允许网络服务器发送 304 状态而不是带有正文的 200。意思是：“此网页没有改变，无需重新下载。”。

[更多信息](http://www.feedthebot.com/ifmodified.html)

# ajax - CakePHP 2.1、Ajax 和 Miles Johnsons 上传插件

> ID：11961678
> 
> 赞同：1
> 
> 时间：2012-08-14T22:21:28.867
> 
> 标签：ajax, cakephp, plugins, uploader

我想通过 $actAs = 'Uploader.Attachment' 使用带有 CakePHP 2.1 的插件作为行为。虽然这适用于静态上传，但我不知道如何将它用于 ajaxUpload。

一个简单的问题：无论如何通过actAs-Behaviour 进行ajax-Upload 吗？

解释（如果需要）：附件 Behavior 似乎没有任何默认值，也没有任何其他关于 ajax 的代码（尤其是下面代码中的 ajaxField）。虽然如果我通过包含插件它可以工作

```
public function beforeFilter() {
    $this->Uploader = new Uploader(array(
        'ajaxField' => 'qqfile'
    ));
} 
```

所以我可以使用类似的东西：

```
$data = $this->Uploader->upload($this->Uploader->ajaxField, array('overwrite' => true)); 
```

但不是：

```
$this->request->data; 
```

这不是我一直在寻找的，因为我 1\. 仍然需要 actAs-Behaviour 来执行其他操作。2\. 有两个不同的插件包含，我必须检查它们是否相同。3.不能自动创建拇指并将它们附加到模型的同一条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:13:53.197

我已经回答了你的几个相关问题 - 我真的不想通过插件的配置设置（具体问题请联系开发人员本人）所以我只是假设它们是正确的，因为你说它有效用于静态文件提交。

1.  $actAs 表示**行为参数**；它们是在 Model 类上定义的，根据定义，无论如何都不应该与视图直接通信。您仍然可以让您的模型充当角色，如果您愿意，您只是不能使用模型来操纵视图的行为。

2.  这是一个**AJAX 驱动的文件上传**，对吧？因此，您可能需要编写一个简单的客户端脚本来处理**控制器操作的关联视图**中的表单，以将表单数据异步提交给蛋糕控制器方法。-- 见：[http ://www.phpletter.com/Demo/AjaxFileUpload-Demo/](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)

3.  添加插件只是允许插件为您处理模型，对吗？你确定你需要插件的 2 次调用吗？或 2 个控制器动作或 2 个控制器或 2 个模型或两者都使用插件的东西？

4.  视图会将数据返回给控制器操作，这可能是您希望将数据发送到模型进行处理的地方。`beforeFilter()`是控制器回调方法之一；具体来说，在控制器中的任何/每个方法之前触发的那个（参见[http://book.cakephp.org/2.0/en/controllers.html](http://book.cakephp.org/2.0/en/controllers.html)和[http://book.cakephp.org/2.0/en/ views/json-and-xml-views.html](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)用于设置控制器以处理异步请求...）

5.  缩略图生成应该对前端或后端征税吗？>_> 如果是后者，是否需要在模型中添加从数据生成缩略图的代码？Cake 的魔术模型回调也应该使这非常简单：http: [//book.cakephp.org/2.0/en/models/callback-methods.html](http://book.cakephp.org/2.0/en/models/callback-methods.html)

以这种方式尝试至少应该为您简化事情。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:32:44.970

这就是我现在为我的具体情况所做的。也许它可以帮助某人。不漂亮但有效：

```
public function beforeFilter() {
    $this->Uploader = new Uploader(array(
        'ajaxField' => 'qqfile'
    ));
}

public function ajax() {        
    $this->set('title_for_layout', 'Upload: AJAX File Upload');
    $this->render('ajax');
}

public function ajax_upload($album_id = null, $album_title = null) {
    $this->set('album_id', $album_id);
    $this->set('album_title', $album_title);
    $album_id = 2;
    $upload_dir = "uploads/$album_id/";

    $this->autoLayout = $this->autoRender = false;
    $this->Uploader->setup(array('uploadDir' => "$upload_dir"));
    $data = $this->Uploader->upload($this->Uploader->ajaxField, array(
        'overwrite' => true,
        'name' => 'uploaderFilename'
    ));
    //Creating a thumb
    $thumb_name = $data['custom_name']."_thumb.".$data['ext'];
    $this->Uploader->resize(array('width' => 250, 'expand' => true, 'aspect' => true, 'append' => '_thumb'));
    if (!empty($data)) {
        $this->Picture->set($data);   
        if ($this->Picture->validates()) {
            // Upload successful
            $data["album_id"]= $album_id;
            $data['path_thumb'] = $upload_dir.$thumb_name;
            $this->Picture->save($data);
            header('Content-Type: application/json');
            echo json_encode(array('success' => true, 'data' => $data));                                
        }
    }
} 
```

# c# - C# MySQL 在 DataReader while 循环中的第二个 DataReader

> ID：11961682
> 
> 赞同：3
> 
> 时间：2012-08-14T22:21:55.353
> 
> 标签：c#, mysql, database, connection, datareader

正如您可能已经从标题中猜到的那样，我正在尝试这样做：

```
 #region check new nations
    private void checknewnations()
    {
        addtolog("server","Checking for new nations");
        string sql = "SELECT * FROM " + variables.tbl_nations + " WHERE nations_new=0";
        MySqlCommand cmd = new MySqlCommand(sql, connection);
        MySqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            addtolog("mysql",reader["nations_name"].ToString());

            int nation_ID = int.Parse(reader["nations_ID"].ToString());
            string nation_name = reader["nations_name"].ToString();
            string user_ID = reader["nations_user"].ToString();

            addnation(nation_ID, nation_name, user_ID);
        }
        addtolog("server","Finished checking for new nations.");
        //connection.Close();
        reader.Dispose();
    }
    #endregion 
```

在 while 循环中调用它：

```
 #region addnation
    private void addnation(int nationIDnot, string nationName, string userID)
    {
        string nationID = makesixdigits(nationIDnot);
        string userName = "";

        string sql = "SELECT * FROM " + variables.tbl_users + " WHERE users_ID=" + userID;
        MySqlCommand cmd = new MySqlCommand(sql, connection);
        MySqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            userName = reader["users_name"].ToString();
        }
        reader.Dispose();
        addtolog("add", "[" + nationID.ToString() + "] " + nationName + " [" + userID + "] " + userName);
    }
    #endregion 
```

这在第二个代码块（在 while 循环中调用的代码块）中给我一个错误，说已经有一个与连接关联的数据读取器。我该如何让它发挥作用，因为我确信有办法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T22:36:03.807

DataReader 保持连接，直到它遍历其所有记录。尝试这个

```
using(reader)
{
   System.Data.DataTable dt = new System.Data.DataTable();
   dt.Load(reader);

   foreach(DataRow row in dt.Rows)
   {
        addtolog("mysql",row["nations_name"].ToString());

        int nation_ID = int.Parse(row["nations_ID"].ToString());
        string nation_name = row["nations_name"].ToString();
        string user_ID = row["nations_user"].ToString();

        addnation(nation_ID, nation_name, user_ID);
   }
} 
```

这样两个阅读器不共享相同的连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:31:46.507

在 2008 年的连接字符串中，您可以通过`MultipleActiveResultSets=true;`我没有使用过 mySQL 来获得多个活动结果集，所以我不确定，但如果您使用的是 ADO 提供程序，也许可以。

否则，只需建立另一个连接——不要重复使用同一个连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:38:01.953

在循环中打开另一个连接，并使用它来获取第二个阅读器。由于循环很紧凑，您可能更愿意在第一个方法中打开两个连接，将第二个传递给被调用的方法，然后在第一个（“外部”）方法结束时关闭它们。通话之间的时间应该足够短，尽快关闭连接的正常规则无关紧要。

# sitecore - 从另一个分支机构获取 Sitecore 兄弟姐妹

> ID：11961684
> 
> 赞同：3
> 
> 时间：2012-08-14T22:22:01.660
> 
> 标签：sitecore, sitecore6

我们在 sitecore 中有一个数据结构，它具有相同“深度”的相同模板。我们正在制作具有以下结构的单元、课程和活动的课堂内容：

```
Unit 1
-- Lesson 1
---- Activity 1
---- Activity 2
-- Lesson 2
---- Activity 3
---- Activity 4
Unit 2
-- Lesson 3
---- Activity 5
---- Activity 6
-- Lesson 4
---- Activity 7
---- Activity 8 
```

等等。当我在一个`activity`项目上时，我想返回该`activity`特定项目中的下一个项目`unit`，如果该单元中没有更多活动，则返回 null。

到目前为止，我能做的最好的事情是定位当前活动的`unit`祖先（很容易找到）并获取`activities`它下面的所有内容，然后遍历所有这些活动以获取上一个/下一个活动。似乎必须有更好的方法来实现这一点，所以我想我会把它扔在这里寻求想法。

**当前代码**

```
Item unit = Sitecore.Context.Item.Axes.SelectSingleItem("ancestor-or-self::*[@@templatename='Unit']");
Item[] allActivities = unit.Database.SelectItems("ancestor-or-self::*[@@templatename='Activity']");

foreach(Item thisitem in allActivities){
    //Process here
} 
```

Siblings ("Following" & "Preceeding") 不起作用，因为它只返回相同的直接兄弟姐妹`lesson`，而不是`unit`根据需要返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:19:58.047

我认为你的想法是正确的。需要注意的几点：

1.  `unit.Database.SelectItems()`从单元数据库的根开始，不使用单元作为起始上下文。如果您打算向下遍历以获取该单元的所有活动，则需要使用`unit.Axes.SelectItems()`

2.  根据每个单元的活动项目数，您可能需要考虑使用 sitecore 快速查询或可能的 Lucene 来处理选择。

这是如何处理上一个/下一个逻辑的示例。`.FirstOrDefault()`如果/当前一个或下一个兄弟不可用时，使用将返回 null。

```
Item unit = Sitecore.Context.Item.Axes.SelectSingleItem("ancestor-or-self::*[@@templatename='Unit']");
Item[] unitActivities = unit.Axes.SelectItems("descendant::*[@@templatename='Activity']");
// The order of 'unitActivities' defaults to the order that items appear in Sitecore tree.
// Perform additional sorting here if needed

var nextActivity = unitActivities.SkipWhile(i => i.ID != Sitecore.Context.Item.ID).Skip(1).FirstOrDefault();
var prevActivity = unitActivities.Reverse().SkipWhile(i => i.ID != Sitecore.Context.Item.ID).Skip(1).FirstOrDefault(); 
```

# ruby - 根据另一个数组的元素对数组进行排序

> ID：11961685
> 
> 赞同：44
> 
> 时间：2012-08-14T22:22:05.550
> 
> 标签：ruby, arrays, algorithm, sorting

我有一个 id 数组

```
a1 = [1, 2, 3, 4, 5] 
```

我有另一个对象数组，其 id 以随机顺序排列

```
a2 = [(obj_with_id_5), (obj_with_id_2), (obj_with_id_1), (obj_with_id_3), (obj_with_id_4)] 
```

现在我需要根据 a1 中 id 的顺序对 a2 进行排序。所以 a2 现在应该变成：

```
[(obj_with_id_1), (id_2), (id_3), (id_4), (id_5)] 
```

a1 可能是 [3, 2, 5, 4, 1] 或任何顺序，但 a2 应对应于 a1 中 id 的顺序。

我喜欢这样：

```
a1.each_with_index do |id, idx|
  found_idx = a1.find_index { |c| c.id == id }
  replace_elem = a2[found_idx]
  a2[found_idx] = a2[idx]
  a2[idx] = replace_elem
end 
```

但是，如果 a2 的元素顺序与 a1 完全相反，这仍然可能会遇到 O(n^2) 时间。有人可以告诉我排序a2的最有效方法吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-15T05:04:43.360

如果有什么比明显的方式快得多，我会感到惊讶：

```
a2.sort_by{|x| a1.index x.id} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-14T22:34:32.190

```
hash_object = objects.each_with_object({}) do |obj, hash| 
  hash[obj.object_id] = obj
end

[1, 2, 3, 4, 5].map { |index| hash_object[index] }
#=> array of objects in id's order 
```

我相信运行时间将是 O(n)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-08-13T22:51:08.793

我喜欢接受的答案，但在 ActiveSupport 中有 index_by，它使创建初始哈希变得更加容易。请参阅[从数组创建哈希的最简洁方法](https://stackoverflow.com/questions/412771/cleanest-way-to-create-a-hash-from-an-array)

事实上，你可以在一行中做到这一点，因为 Enumerable 也支持 index_by ：

```
a2.index_by(&:id).values_at(*a1) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-07T21:06:55.537

受[Eric Woodruff's Answer 的](https://stackoverflow.com/a/25297497/1157054)启发，我提出了以下香草 Ruby 解决方案：

```
a2.group_by(&:object_id).values_at(*a1).flatten(1) 
```

方法文档：

*   [可枚举#group_by](http://www.ruby-doc.org/core-2.1.5/Enumerable.html#method-i-group_by)
*   [数组#values_at](http://www.ruby-doc.org/core-2.1.5/Array.html#method-i-values_at)
*   [数组#flatten](http://www.ruby-doc.org/core-2.1.5/Array.html#method-i-flatten)

# linux - Linux：如何将每个文件移动到相应命名的文件夹中

> ID：11961689
> 
> 赞同：9
> 
> 时间：2012-08-14T22:22:13.717
> 
> 标签：linux, shell

我在这里有一个小而有趣的任务。我有一个具有相同扩展名的文件列表，例如。

```
a.abc
b.abc
c.abc 
```

我在这里想要的是首先为每个文件创建名为`a`, `b`, `c`... 的`.abc`文件夹，然后将每个文件移动到其文件夹中。

我能够使用 cmd line 非常简单地完成第一步`find ... | sed ... | xargs mkdir...`，但是当我尝试使用类似的 cmd 将每个文件移动到自己的文件夹中时，我找不到答案。

我对这里的 cmd 不熟悉，而且我的记忆很模糊，在`find`cmd 中我可以使用某种反向引用来重用文件/目录名称，是我记错了吗？搜索了它，但找不到很好的参考。

谁能帮我在这里完成cmd？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T23:16:15.430

这是你的一个班轮

```
find . -name "*.abc" -exec sh -c 'NEWDIR=`basename "$1" .abc` ; mkdir "$NEWDIR" ; mv "$1" "$NEWDIR" ' _ {} \; 
```

或者

```
find . -name "*.abc" -exec sh -c 'mkdir "${1%.*}" ; mv "$1" "${1%.*}" ' _ {} \; 
```

这是一个比手册页更好的使用[指南](http://mywiki.wooledge.org/UsingFind)`find`。

[此](http://mywiki.wooledge.org/BashFAQ/073)页面解释了正在进行的参数扩展（以了解`${1%.*}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T23:41:00.890

这是一个处理带空格的文件名的解决方案`find`：`xargs`

```
find . -type f -print0 | xargs -0 -l sh -c 'mkdir "${1%.*}" && mv "$1" "${1%.*}"' sh 
```

请注意，它不支持带有换行符和/或 shell 可扩展字符的文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T22:26:48.810

```
for F in /tmp/folder/*.abc # replace by $1 for first arg
do
   BASE="${F%.abc}"
   mv "$F" "$BASE"
done 
```

# java - 如何在最后一个标签附近添加用于添加新标签的按钮？

> ID：11961692
> 
> 赞同：5
> 
> 时间：2012-08-14T22:22:31.820
> 
> 标签：java, jsf, jsf-2, primefaces

有谁知道如何添加一个按钮来添加位于最后创建的选项卡附近的新选项卡？如果不清楚我的意思，只需查看浏览器中的选项卡和添加新选项卡的按钮；-) 这正是我想要管理的。

我正在使用 MyFaces+PrimeFaces。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T00:31:47.817

您可以使用`<p:tabView>`显示基于某些 bean 集合的动态选项卡集。您可以将“添加”选项卡显示为选项卡集的最后一个选项卡。如有必要，您甚至可以采用不同的样式。您可以使用`<p:ajax event="tabChange">`挂钩选项卡更改侦听器，您可以在其中检查“添加”选项卡是否已打开，然后添加新选项卡。

例如

```
<h:form id="form">
    <p:tabView id="tabs" value="#{bean.tabs}" var="tab" widgetVar="w_tabs">
        <p:ajax event="tabChange" listener="#{bean.changeTab}" oncomplete="if (args.newTabIndex) w_tabs.select(args.newTabIndex)" />
        <p:tab title="#{tab.title}">
            <p>#{tab.content}</p>
        </p:tab>
    </p:tabView>
</h:form> 
```

和

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {

    private List<Tab> tabs;

    @PostConstruct
    public void init() {
        // Just a stub. Do your thing to populate tabs.
        // Make sure that the last tab is the "Add" tab.
        tabs = new ArrayList<Tab>();
        tabs.add(new Tab("tab1", "content1"));
        tabs.add(new Tab("tab2", "content2"));
        tabs.add(new Tab("Add...", null));
    }

    public void changeTab(TabChangeEvent event) {
        int currentTabIndex = ((TabView) event.getComponent()).getActiveIndex();
        int lastTabIndex = tabs.size() - 1; // The "Add" tab.

        if (currentTabIndex == lastTabIndex) {
            tabs.add(lastTabIndex, new Tab("tab" + tabs.size(), "content" + tabs.size())); // Just a stub. Do your thing to add a new tab.
            RequestContext requestContext = RequestContext.getCurrentInstance();
            requestContext.update("form:tabs"); // Update the p:tabView to show new tab.
            requestContext.addCallbackParam("newTabIndex", lastTabIndex); // Triggers the oncomplete.
        }
    }

    public List<Tab> getTabs() {
        return tabs;
    }

} 
```

在这个例子中，这个`Tab`类只是一个普通的 javabean，具有属性`title`和`content`. `oncomplete`in是必要的`<p:ajax>`，因为添加新选项卡后选项卡内容会消失（毕竟这看起来很像 PF 错误；顺便说一下，我使用的是 3.3）。

# jquery - 在 jQuery 中，要选择节点的第 n 个兄弟节点，.next() 链接 n 次还是 .nextAll(':eq(n-1)') 更快？

> ID：11961695
> 
> 赞同：4
> 
> 时间：2012-08-14T22:22:47.513
> 
> 标签：jquery, siblings

假设一个节点有任意数量的兄弟节点，并且我想选择`nth sibling`那个节点的，我应该使用`.next()`链接 n 次，还是应该只使用一次调用`.nextAll(':eq(n-1)')`？

似乎对于较大的 n，前者会有很多额外的开销，而对于大量的兄弟姐妹，后者可能会有更大的开销。我关心一个涉及 n=2 和大量兄弟姐妹的案例，所以我不确定是否要使用`.next().next()`or `.nextAll(':eq(1)')`。有关系吗？

`.next().next()`编辑：对于 n=2 和许多兄弟姐妹的情况，根据[http://jsperf.com/next-next-vs-nextall-eq-](http://jsperf.com/next-next-vs-nextall-eq-1-vs-nextall-eq-1) ​​1-vs-nextall-eq- ​​1 看起来是最快的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:25:14.817

你应该做的是访问[http://jsperf.com](http://jsperf.com)。无需担心或猜测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T22:29:26.593

以下是一些测试用例，供您大致了解：

*   [**http://jsperf.com/next-vs-nextall-frist/2**](http://jsperf.com/next-vs-nextall-frist/2)
*   [**http://jsperf.com/nextall-first-vs-nextuntil-last-next**](http://jsperf.com/nextall-first-vs-nextuntil-last-next)

同样非常有趣的是 next() 与 getelementbyid 的比较：

*   [**http://jsperf.com/next-vs-document-getelementbyid/2**](http://jsperf.com/next-vs-document-getelementbyid/2)

您可以采用任何这些测试用例并添加您自己的附加测试。

# c# - 错误 4 'DateRange' 是一个“变量”，但用作“方法”

> ID：11961701
> 
> 赞同：0
> 
> 时间：2012-08-14T22:23:06.357
> 
> 标签：c#, asp.net, vb.net

这段代码是从 vb.net 转换过来的，我不太了解 vb.net，所以我使用 Telik 在线 vb.net 到 c# 转换器。

我不明白为什么这给了我一个错误......

```
string[] DateRange = this.cboPayPeriods.SelectedItem.Text.ToString().Replace(" ", "").Split('-');

while (Convert.ToDateTime(DateRange(0)) <= Convert.ToDateTime(DateRange(1))) 
```

它不会建立并说

'DateRange' 是一个“变量”，但用作“方法”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:25:02.827

在 C# 中，数组是用`[`and 而`]`不是`(`and来引用的`)`。像这样改变它：

```
while (Convert.ToDateTime(DateRange[0]) <= Convert.ToDateTime(DateRange[1])) 
```

顺便说一句，这是每个人从 VB 到 C# 时都会犯的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:26:45.090

尝试这个

更改`DateRange(0)`为`DateRange[0]`

看起来您使用的是 VB 语法而不是 C#

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:25:23.373

`DateRange`是一个数组，您可以通过索引器通过`[]`C# 中的括号而不是`()`VB.NET 中的圆括号访问数组。

所以这应该工作：

```
while (Convert.ToDateTime(DateRange[0]) <= Convert.ToDateTime(DateRange[1])) 
```

# fullcalendar - 如何将图像添加到特定事件，jquery完整日历

> ID：11961709
> 
> 赞同：0
> 
> 时间：2012-08-14T22:23:24.793
> 
> 标签：fullcalendar

我有 wp 自定义帖子类型，并且有自定义分类法，其中有一个额外的字段，它是代表分类法的图标。

所以我可以从 wpdb 查询并使用 json 将所有必要的东西传递给 jquery full calendar。

但是由于目前它没有图像字段，因此无法通过提要显示图像 src。当前它有标题、url、start_date、end_date 和其他一些，但它缺少图像。

**我的要求是：每个事件都属于特定类别，每个类别都有自己的图像/图标，所以我不想在日历上显示事件标题，我只想显示其类别的图像**

我想知道它是否如下所示：

```
$jsonevents[] = array(
            'title' => $new_term,
            'image'=> $img_var,
            'start'  => $stime,
            'textColor' => '#757770',
            'backgroundColor' =>'#e8e8e8'
           ); 
```

我知道 jquery 完整日历中没有图像键，但我认为我们可能需要修改 fullcalendar.js 文件。

所以问题是有没有人已经修改了这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:31:11.440

不久前我回答了类似的问题-我认为它也适用于这里：

[完整的日历 - 将可点击的图标与事件相关联？](https://stackoverflow.com/questions/11537525/full-calendar-associate-clickable-icons-with-events/11543224#11543224)

看看，让我知道它是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:37:18.857

不久前我也回答了类似的问题：

[jquery-fullcalendar-plugin-with-check-box](https://stackoverflow.com/questions/11850811/jquery-fullcalendar-plugin-with-check-box/11868455#11868455)

在那个答案中，我给出了两种可能的选择。结帐选项 1，我在其中展示了如何仅使用 css 和 fullcalendar 事件对象上已经可用的“className”字段将背景图像添加到 fullcalendar 事件中。我在生产网站中成功使用该方法为某些类型的事件添加小图标。

我的选项 2 与 ganeshk 提出的基本相同——使用 eventRender 回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T12:33:53.160

json 文件可以包含一个`imageurl`条目。

在`fullcalendar.js`（第 6268 和 5054 行）中，我添加了以下代码：

```
var imageurl = "";
if (event.imageurl) {
    imageurl = '<img src="'+event.imageurl+'" width="20"/>';
} 
```

第 6295 行：

```
htmlEscape(event.title) + imageurl + 
```

第 5059 行：

```
titleHtml =
            '<span class="fc-title">' +
                (htmlEscape(event.title || '') || '&nbsp;') + // we always want one line of height
                imageurl +
            '</span>'; 
```

# android - 任何人都知道有多少百分比的 Android 设备支持 NEON？

> ID：11961715
> 
> 赞同：4
> 
> 时间：2012-08-14T22:24:04.933
> 
> 标签：android, neon

够简单吧？似乎找不到一些规范的研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:00:48.763

自 2011 年以来在美国推出的大多数 Android 手机似乎都可以使用 NEON。然而，市场的碎片化意味着您几乎肯定需要在尝试使用它之前进行功能测试。幸运的是，Android NDK 附带了一个简单的示例代码。

对不起，我没有确切的百分比，然后你没有指定特定的市场，或者你在谈论什么年份。

# javascript - Google Maps API v3 标记掉落和弹跳动画

> ID：11961718
> 
> 赞同：5
> 
> 时间：2012-08-14T22:24:30.290
> 
> 标签：javascript, google-maps

我从谷歌得到这个修改后的示例代码

```
var stockholm = new google.maps.LatLng(59.32522, 18.07002);
var parliament = new google.maps.LatLng(59.327383, 18.06747);
var marker;
var map;

function initialize() {
    var mapOptions = {
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: stockholm
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: parliament,
        icon: '/img/marker.png'
    });
    google.maps.event.addListener(marker, 'click', toggleBounce);

    setTimeout(function() {  marker.setAnimation(google.maps.Animation.BOUNCE); }, 2000);

}

function toggleBounce() {

  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
} 
```

我想知道在 DROP 动画停止后是否可以将标记动画从 DROP 更改为 BOUNCE？

我设法使用 setTimeout() 函数对其进行了更改，但它做得并不顺利。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-23T06:28:39.897

尝试更改标记动画`google.maps.event.addListener(map, 'idle', function ()...)`- 这将在添加标记后调用。

```
document.write('<script src="https://maps.googleapis.com/maps/api/js">\x3C/script>');

window.onload = function () {
    // Create map
    var map = new google.maps.Map(document.getElementById('map_canvas'), {
        zoom: 12,
        center: new google.maps.LatLng(-33.87, 151.24),
        mapTypeControlOptions: {
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
        }
    });

    // Create marker
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(-33.890542, 151.274856),
        map: map,
        animation: google.maps.Animation.DROP,
        title: 'Bondi Beach'
    });

    // On idle, change marker animation to bounce
    google.maps.event.addListener(map, 'idle', function () {
        marker.setAnimation(google.maps.Animation.BOUNCE);
    });
}
```

```
#map_canvas {
    width: 300px;
    height: 300px;
}
```

```
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:32:03.160

你可以试试这个。：

```
google.maps.event.addListener(marker, "dragend", function(event) { 
          marker.setAnimation(google.maps.Animation.BOUNCE);
        }); 
```

# sql - 进度 ODBC 端口号 10.2a

> ID：11961729
> 
> 赞同：0
> 
> 时间：2012-08-14T22:25:19.793
> 
> 标签：sql, odbc, port, openedge, progress-db

通过 ODBC 数据源管理器为 64 位 Windows 7 上的进度/openedge 10.2a 设置 ODBC 驱动程序，（但我实际上使用的是 32 位 ODBC 数据源管理器）我不断得到

警告：[DataDirect][ODBC Progress OpenEdge Wire Protocol driver]连接被拒绝。验证主机名和端口号。[DataDirect][ODBC 进度 OpenEdge 有线协议驱动程序] 意外的网络错误。ErrNum = 10038

我检查了我的主机，它是正确的，但我不知道端口号，我检查了[连接](http://www.connectionstrings.com/progress)字符串，它说 2055，其他几个在线论坛给出 20931，因为我猜是要使用的默认端口号，但两者那些对我不起作用。我已经阅读[了这个问题](https://stackoverflow.com/questions/748159/how-to-set-up-odbc-10-1b-for-progress-db)，但它并没有真正进入细节，除了“输入你的端口号”之外的任何文档也没有。

那么，我如何找出我的端口号，或者只是一刀切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:56:26.137

没有默认端口号。端口名称或端口号在服务器上的数据库启动中指定。您应该联系数据库的管理员并找出它是什么。如果没有 DBA，则在日志文件 (dbname.lg) 中搜索“-S”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:53:56.147

对于 unix，端口号存储在 /etc/services 中，对于 Windows，端口号存储在 C:\Windows\System32\drivers\etc\services 中。

每行看起来像：

服务名称 12345/tcp

所以您需要做的就是找到有问题的服务名称，获取它对应的端口号，然后将其插入到您的 ODBC 驱动程序规范中。

# database - 数据库设计：关于约束的判别器与分离表

> ID：11961733
> 
> 赞同：0
> 
> 时间：2012-08-14T22:25:36.243
> 
> 标签：database, entity-framework, schema

我一直在反复讨论两种做事的方式，但无法解决我认为更好的方式（或者看看为什么我可能会以错误的方式去做）。

我为 3 种不同类型的用户提供了 3 个不同的网站，但它们共同构成了整个系统。例如，员工的管理门户、客户的客户门户和供应商的供应商门户。在这里，我将这些不同的实体表示为“域”。

每个域都有自己的一组用户和一组角色 - 因为每个门户的业务性质是不同的，所以用户和每个门户中的关联角色也是不同的（例如，一个门户有报告，另一个没有't，因此一个门户具有“报告”角色）。

我没有包括将 User 子类型化为“StaffUser”的事实，因为它具有字段和对普通用户不需要的其他表的引用（例如 Team、Department 等）。

```
-----------------             -----------------
| Domain        |             | Role          |
-----------------  <--------- -----------------
| DomainId (PK) |             | RoleId (PK)   |
|               |             | DomainId (FK) |
-----------------             -----------------
        >                              >
        |                              |
        |                              |
        |                              |
-----------------             -----------------
| User          |             | User_Role     |
-----------------  <-------   -----------------
| UserId (PK)   |             | UserId (PK)   |
| DomainId (FK) |             | RoleId (PK)   |
-----------------             ----------------- 
```

在上面的示例中，我可以有*n 个*域，每个域有*n 个*用户和*n 个*角色，并且用户可以与角色相关联。4张表，非常简单，每样东西都有一个判别器值。

在我的 Web 应用程序中（为了论证，我使用 .NET MVC 和 Entity Framework），当我希望为用户分配角色时，我选择与用户具有相同域类型的所有角色，并保存我想要的配对。

但是，如果在选择域的代码的生成过程中出现某种错误（有人在域类型上使用了错误的枚举），那么现在我们突然将一种域类型的用户与另一种域类型的角色进行匹配。 . 混乱随之而来。

这种情况如何预防？可以在 SQL 中强制执行吗？我在担心不太可能发生的事情吗？我见过比我那个时代更荒谬的 SNAFU。

那么，如果我将一个 table-per 结构带入其中会怎样：

```
-----------------
| Domain        |
-----------------
| DomainId (PK) |
-----------------
        >
        |
        |
        |
-----------------             ------------ ----            ---------------
| DomainA       |             | DomainARole   |            | Role        |
------------ ----  <--------  -----------------  --------> ---------------
| DomainId (PK) |             | RoleId (PK)   |            | RoleId (PK) |
|               |             | DomainId (FK) |            |             |
-----------------             -----------------            ---------------
        >                              >
        |                              |
        |                              |
        |                              |
----------------              ---------------------------
| DomainAUser  |              | DomainAUser_DomainARole |
----------------   <-------   --------------------------|           
| UserId (PK)  |              | UserId (PK)             |
| DomainId (FK)|              | RoleId (PK)             |
----------------              ---------------------------
        |
        |
        |
        >
----------------
| User         |
----------------
| UserId (PK)  |
---------------- 
```

在本例中，DomainARole 继承自 Role，DomainAUser 继承自 User。如果我们想添加更多域，我们需要为每种类型创建一个新表，并且可能有很多表（在我的情况下，无论如何“域”不会超过 3 个）。这是不必要的过度复杂化吗？

第一个好处是 DomainAUser 只能有一个 DomainARole ......它是在引用那里强制执行的。我再也不用担心将两对与鉴别器匹配了，因为所有东西都整齐地分开成表格。

第二个好处是，如果将来需求发生变化（DomainAUser 需要 DomainBUser 不需要的额外字段），我已经准备好表格并且它很灵活。

我是否错过了一种更简单的方法来解决这个问题？目前我一直支持第二个，更重表的版本。

有没有办法使用鉴别器强制执行我需要的约束？我把事情复杂化了吗？我真的无法决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:49:58.017

不要为此使用继承。当您想将“普通”用户转变为管理员时会发生什么？（或者客户变成供应商，等等？）你不能，因为对象不能改变它们的类型。你留下了丑陋的选择，比如删除和重新创建用户。如果一个用户在两个域中工作怎么办？继承根本无法支持这一点。

有时人们试图声称在他们的系统中这永远不会发生，但在现实世界中它确实发生了，而继承在这里实际上并没有给你带来太多好处。为什么要付出使用它的代价？

相反，您应该使“DomainAUser”信息成为一个单独的表，并具有从 User 到 DomainAUser 的关联/导航，因此会有一个`User.DomainA`属性，对于非 DomainA 用户，该属性将为 null。

# ios - 如何设置文本光标在 TWTweetComposeViewController 中的位置？

> ID：11961734
> 
> 赞同：3
> 
> 时间：2012-08-14T22:25:36.763
> 
> 标签：ios, xcode, twitter, cursor

我正在使用 TWTweetComposeViewController，当我将初始文本设置为屏幕标题时，文本光标出现在主题标签之后，我希望它出现在主题标签之前。有没有办法做类似 cursor=(0,0) 或类似的事情？我查看了文档，那里什么都没有。

作为参考，这就是我正在使用的。

```
TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc]init];
[tweetSheet setInitialText:[NSString stringWithFormat:@"#%@", self.title]];
tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result){
    [self dismissModalViewControllerAnimated:YES];
};
[self presentModalViewController:tweetSheet animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:55:35.403

我寻找完全相同的东西。它可以通过一个小技巧来完成。这是来源[http://www.sunetos.com/items/2012/06/04/cleanly-accessing-the-uitextview-field-in-twtweetcomposeviewcontroller-2/](http://www.sunetos.com/items/2012/06/04/cleanly-accessing-the-uitextview-field-in-twtweetcomposeviewcontroller-2/)

据作者称，该应用程序已获准进入应用程序商店。

```
// at an appropriate place in your code, 
// add and remove the observer for UIKeyboardWillShowNotification

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(handleKeyboardWillShow:) 
                                             name:UIKeyboardWillShowNotification 
                                           object:nil];

- (UIView *) findFirstResponderInView:(UIView*) view
{
    if (view.isFirstResponder) {
        return view;
    }
    for (UIView *subview in view.subviews) {
        UIView *result = [self findFirstResponderInView:subview];
        if (result) {
            return result;
        }
    }
    return nil;
}

- (void) handleKeyboardWillShow:(NSNotification *) notification;
{
    UIView *fr = [self findFirstResponder:self.tweetSheetViewController.view];
    if ([fr isKindOfClass:[UITextView class]]) {
        UITextView *tv = (UITextView *) fr;
        [tv setSelectedRange:NSMakeRange(0,0)];
    }
} 
```

确实在我的应用程序中实现了它，所以如果您需要进一步的帮助，请告诉我。

# javascript - Jshint | 通过默认设置 | 函数声明和“this”

> ID：11961735
> 
> 赞同：1
> 
> 时间：2012-08-14T22:25:42.070
> 
> 标签：javascript, jshint

```
for ( element = 0; element < this.tag_array.length; element++ ) {
    document.getElementById( this.tag_array[element] ).addEventListener(
    "click", function(){ /* constructor function here */ } );  // jshint.com error #1
} 
```

此代码将在 jshint.com 中导致错误，因为它不想看到在循环中声明的函数。

但是，如果我传入一个简单的函数引用，那么我无法在不再次破坏 jshint 的情况下提取“this”。

```
for ( element = 0; element < this.tag_array.length; element++ ) {
    document.getElementById( this.tag_array[element] ).addEventListener(
    "click", vFlipBP );
} 
```

现在，当我在 vFlipBP 中使用“this”时，我收到一个错误，因为它期望“this”与构造函数一起使用。

```
function vFlipBP(){ var foo = this ; } // jshint error #2 
```

正因为如此，我发现 jsthint.com 不可能对这个特定的功能感到满意。

没关系关闭 jshint.com 选项。

是否可以编写通过 jshint.com 默认设置的代码。

我只是想了解为什么会发出这些警告/错误的原因。

我不担心错误（这是可选的，我可以将其关闭）...我只想知道是否可以通过默认值...是否有我错过的角度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:28:54.370

看起来您想`this`在回调中用作上下文，但 jshint 抱怨在不是构造函数的函数中使用 this。

所以假设这是你的代码

```
function showId() {
   alert(this.id); // jshint warning here
}
for ( element = 0; element < this.tag_array.length; element++ ) {
    document.getElementById( this.tag_array[element] ).addEventListener(
    "click", showId ); 
} 
```

你必须重写你的函数所以它不使用`this`，这是一种可能的方法

```
function createHandler(obj) {
    return function(e) {
        alert(obj.id);
    }
}

for ( element = 0; element < this.tag_array.length; element++ ) {
    var nodeId = this.tag_array[element];
    var node =  document.getElementById(nodeId);
    node.addEventListener("click", createHandler(node)); 
} 
```

你不能告诉 jshint 这个特定的功能可以安全使用`this`吗？用`validthis`这个选项？在 Google Closure Compiler 中，您可以使用 `@this`指定您知道`this`该函数中的内容（并避免警告）[https://developers.google.com/closure/compiler/docs/js-for-compiler](https://developers.google.com/closure/compiler/docs/js-for-compiler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:33:59.703

由于您似乎并不关心制作几个相同的功能，因此 JSHint 似乎并不介意这一点......

```
var element;
for ( element = 0; element < 10; element++ ) {
    document.getElementById( this.tag_array[element] ).addEventListener(
    "click", make_func() );
}

function make_func() {
  "use strict";
  return function(){ var foo = this; alert(foo); };
} 
```

* * *

如果您不使用函数声明语法，它似乎也可以接受......

```
var element;
var the_func = function(){ 
  "use strict";
  var foo = this; 
  alert(foo); 
};

for ( element = 0; element < 10; element++ ) {
    document.getElementById( this.tag_array[element] ).addEventListener(
    "click", the_func );
} 
```

# .net - 创建一个应用程序（不是用 .NET 编写的）来检查 .NET Framework

> ID：11961737
> 
> 赞同：0
> 
> 时间：2012-08-14T22:25:48.833
> 
> 标签：.net, windows

> **可能重复：**
> [检查是否从命令行安装了 .NET](https://stackoverflow.com/questions/520631/checking-if-net-is-installed-from-the-command-line)

我有一个 C# Windows 窗体应用程序，当它在没有 .NET Framework 4 的计算机上打开时，它显示错误，但没有帮助。所以我想用我自己的方式来确定机器是否有 .NET Framework（并显示一个关于如何安装它的有用信息），但经过一些研究，我明白你必须使用非 .Net 语言来做到这一点封装您的应用程序。所以我不知道任何非 .NET 语言，所以我需要你的帮助。

如果您能帮我找到适合我需要的代码（最好附上如何使用它的说明），那将对我有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:29:31.970

如果您使用 Windows 部署系统并生成 MSI 文件，它将自动检查正在安装它的计算机上的 .NET Framework。

另一个解决方案是使用 .NET Framework 1.1，因为它包含在每个版本的 Windows XP 及更高版本中。在 Program Files/Microsoft .NET/ 中检查以 4_0 开头的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:40:05.510

您可以使用 NSIS 创建安装程序，如果未安装指定版本，则使用[此脚本](http://nsis.sourceforge.net/How_to_insure_a_required_version_of_.NETFramework_is_installed)自动检查和下载 .NET Framework。我已经将这样的 NSIS 用于几个非常流行的 .NET 应用程序。

# plot - 是否有现成的绘图/图表/图形服务器？

> ID：11961741
> 
> 赞同：1
> 
> 时间：2012-08-14T22:26:27.140
> 
> 标签：plot, flot

我很快就要开始为一个网站开发一个分析门户，并且想要一个小的网络应用程序，我可以发送数据点和图形细节（或者让它从一些数据库中提取这些）并让它使用一些图表技术，比如 flot ，或谷歌图表工具，以根据该信息生成图表。我打算建立自己的，但在开始之前，我想确保我不会重新发明轮子。对于像 flot 这样的图形框架来说，这似乎是一个明显的用途，所以，有谁知道这样的东西是否已经存在？

# python-2.7 - Tornado 查找错误：未知编码：latin1

> ID：11961742
> 
> 赞同：1
> 
> 时间：2012-08-14T22:26:29.820
> 
> 标签：python-2.7, tornado, latin1

我正在尝试对使用 tornado.httpserver 制作的简单 Tornado 服务器进行基准测试，但在 Solaris 机器上使用具有 1000 个或更多并发连接的 apache bench 时出现以下错误。

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/tornado-2.3-py2.7.egg/tornado/iostream.py", line 304, in wrapper
  File "/usr/local/lib/python2.7/site-packages/tornado-2.3-py2.7.egg/tornado/httpserver.py", line 227, in _on_headers
LookupError: unknown encoding: latin1 
```

我相信这是由于竞争条件导致 python 编解码器表处于无效状态。我的理解是 latin1 包含在 python 标准库中，所以只要没有修改 python 编解码器表，它就应该存在。

我查看了 tornado src，它似乎没有修改编解码器表，所以我想知道是否有人知道其他方法或问题可能会在多进程 python 应用程序中导致此问题或类似问题。

谢谢！！

服务器代码链接：[https ://www.dropbox.com/s/xrgj59sv0y5y31n/server_ioloop.py](https://www.dropbox.com/s/xrgj59sv0y5y31n/server_ioloop.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-24T19:18:30.167

```
import pandas as pd
import numpy as np
d = pd.read_csv('/content/zomato.csv',encoding='latin-1')
d.head(1) 
```

# dependencies - 是否可以在 cmake 中包含生成的 make-style（不是 cmake-style）依赖文件？

> ID：11961746
> 
> 赞同：4
> 
> 时间：2012-08-14T22:26:59.150
> 
> 标签：dependencies, makefile, cmake, vala

我正在使用[Vala](https://live.gnome.org/Vala/)，它首先编译为 C ，然后正常从 C 编译。

（Vala 编译器）的一个功能`valac`是为`.vala`文件生成“fast-vapi”。fast-vapi 本质上是为文件生成的头`.vala`文件。fast-vapis 的重点是它们允许增量构建。

因此，构建项目的简化命令序列如下所示：

```
valac --fast-vapi=source1.vapi source1.vala # generate source1.vapi
valac --fast-vapi=source2.vapi source2.vala # generate source2.vapi
valac -C --use-fast-vapi=source2.vapi source1.vapi # generate source1.c
valac -C --use-fast-vapi=source1.vapi source2.vapi # generate source2.c 
```

在编写 的 cmake 依赖项时`source1.c`，一种方法是让它依赖每个 fast-vapi 而不是它自己的。这对于大型项目来说很快就会变得很麻烦，因为对其他 .vapis 的更改通常不会影响`source1.vala`. 所以`valac`支持`--deps`标志：

```
valac -C --deps=source1.dep --use-fast-vapi=source2.vapi source1.vapi 
```

`source1.dep`这会为in生成 make 样式的依赖项`source1.dep`。例如：

```
source1.dep: source2.vapi source5.vapi ... 
```

如果我写的是普通的`Makefile`，我可以简单地做`include source1.dep`。但是，我找不到任何类似的构造`cmake`。

如何在 中包含生成的 make-style 依赖文件`cmake`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:29:58.477

Vala 编译器不会编写新的 C 文件，如果它们没有改变的话。如果您的程序由多个源文件组成并且您重新编译，Vala 编译器将只更新已更改的 C 和头文件，然后您的 C 编译器的依赖过程可以拾取其余部分。

Vala 编译器本身使用 make 和 autotools，不提供有关 Vala 编译器和构建系统之间依赖关系的任何信息。Vala 编译器被调用并生成 C 文件，然后自动工具确定 C 文件依赖关系的方法接管。没有理由不能在 CMake 中使用逻辑。

# jersey - Jira Rest Java 客户端：缺少 Jersey 的 ApacheHttpClientConfig

> ID：11961749
> 
> 赞同：1
> 
> 时间：2012-08-14T22:27:26.737
> 
> 标签：jersey, jira

我正在关注[JRJC](https://studio.atlassian.com/wiki/display/JRJC/Tutorial)教程，以及这里的第二行：

```
final JerseyJiraRestClientFactory factory = new JerseyJiraRestClientFactory();
final JiraRestClient restClient = factory.createWithBasicHttpAuthentication(jiraServerUri, username, password); 
```

抛出这个：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/sun/jersey/client/apache/config/ApacheHttpClientConfig at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClientFactory.create(JerseyJiraRestClientFactory.java:34)
... 
Caused by: java.lang.ClassNotFoundException: com.sun.jersey.client.apache.config.ApacheHttpClientConfig
at java.net.URLClassLoader$1.run(URLClassLoader.java:366) 
```

我在我的 pom 中需要这样的 Jersey：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.9</version>
</dependency> 
```

它构建没有任何问题（mvn assembly:single，因为我需要一个独立的 jar）。任何想法这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:24:20.903

好吧，这已经够傻了。jersey-client 没有给你 ApacheHttpClientConfig。这是 jersey-apache-client 附带的。这是 pom 片段。

```
<dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-apache-client</artifactId>
    <version>1.9</version>
</dependency> 
```

# python - Python将所有其他内容压缩到同一个文件中

> ID：11961755
> 
> 赞同：1
> 
> 时间：2012-08-14T22:28:05.353
> 
> 标签：python, shell, zip

我正在尝试编写一个 python 脚本，它将在“备份”目录中创建一个 ZIP，该目录包含该目录的所有内容。

我的文件结构：

```
C:/
    Users/
        myuser/
            backups/
                blah.gif
                config.xml
                etc. 
```

所以我希望脚本创建一个`C:/Users/myuser/backups/mybackup.zip`包含`backups/`目录的所有内容（`blah.gif`,`config.xml`等）。

这是我正在使用的代码：

```
backupDir = "C:/Users/myuser/backups/"
backupFile = "mybackup.zip"
file = zipfile.ZipFile(backupDir + backupFile, "w")
for name in glob.glob(backupDir):
    print "Found " + name
    file.write(name, os.path.basename(name), zipfile.ZIP_DEFLATED)
file.close() 
```

当我运行它时，它会生成一个`C:/Users/myuser/backups/mybackup.zip`文件，但是当我解压缩它时，它是空的。我会误入歧途吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:52:04.233

glob 期望模式匹配。我更喜欢使用 os.listdir() 因为它更容易使用。

```
backupDir = "C:/Users/myuser/backups/"
backupFile = "mybackup.zip"
file = zipfile.ZipFile(backupDir + backupFile, "w")
for name in os.listdir(backupDir):
    if name == backupFile:
        continue
    fullname = backupDir + name
    print "Found " + name
    file.write(fullname, os.path.basename(name), zipfile.ZIP_DEFLATED)
file.close() 
```

# mongodb - MongoDB 守护进程错误 errno:10050 无法运行 mongod

> ID：11961757
> 
> 赞同：0
> 
> 时间：2012-08-14T22:28:20.543
> 
> 标签：mongodb

当我尝试在 Windows 64 位上运行 MongoDB 时，我收到此错误：

```
C:\>mongod
mongod --help for help and startup options
Tue Aug 14 19:26:12 [initandlisten] MongoDB starting : pid=2772 port=27017 dbpat
h=/data/db 64-bit host=wirelan-HM
Tue Aug 14 19:26:12 [initandlisten] db version v2.0.7, pdfile version 4.5
Tue Aug 14 19:26:12 [initandlisten] git version: 875033920e8869d284f32119413543f
a475227bf
Tue Aug 14 19:26:12 [initandlisten] build info: windows sys.getwindowsversion(ma
jor=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB
_VERSION=1_42
Tue Aug 14 19:26:12 [initandlisten] options: {}
Tue Aug 14 19:26:12 [initandlisten] journal dir=/data/db/journal
Tue Aug 14 19:26:12 [initandlisten] recover : no journal files present, no recov
ery needed
Tue Aug 14 19:26:13 [initandlisten] ERROR: listen(): bind() failed errno:10050 U
na operaci├│n socket encontr├│ una red inactiva. for socket: 0.0.0.0:27017
Tue Aug 14 19:26:13 [initandlisten] now exiting
Tue Aug 14 19:26:13 dbexit:
Tue Aug 14 19:26:13 [initandlisten] shutdown: going to close listening sockets..
.
Tue Aug 14 19:26:13 [initandlisten] shutdown: going to flush diaglog...
Tue Aug 14 19:26:13 [initandlisten] shutdown: going to close sockets...
Tue Aug 14 19:26:13 [initandlisten] shutdown: waiting for fs preallocator...
Tue Aug 14 19:26:13 [initandlisten] shutdown: lock for final commit...
Tue Aug 14 19:26:13 [initandlisten] shutdown: final commit...
Tue Aug 14 19:26:13 [initandlisten] shutdown: closing all files...
Tue Aug 14 19:26:13 [initandlisten] closeAllFiles() finished
Tue Aug 14 19:26:13 [initandlisten] journalCleanup...
Tue Aug 14 19:26:13 [initandlisten] removeJournalFiles
Tue Aug 14 19:26:13 [initandlisten] shutdown: removing fs lock...
Tue Aug 14 19:26:13 dbexit: really exiting now 
```

第一个错误是文件夹`/data/db`。我解决了那个。但是从 errno:10050 没有关于谷歌的信息......有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:56:28.560

看起来像 Windows 套接字错误：

WSAENETDOWN 10050 - 网络已关闭。套接字操作遇到死网络。这可能表示网络系统（即运行 Windows Sockets DLL 的协议栈）、网络接口或本地网络本身存在严重故障。

因此，检查~~防火墙和防病毒软件~~，然后检查互联网连接，**然后尝试将 mongo 配置为仅使用 127.0.0.1**与 127.0.0.1 配置相同的错误 10050？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:40:08.673

问题是 mongod 必须在 Windows 7 中以管理员权限打开...右键单击 mongod.exe 并以管理员身份打开

可能最好在管理员模式下使用 Windows 提示符...在 Start cmd 中搜索右键单击以管理员身份打开

不要忘记创建 C:\data\db 目录

全部

# php - 获取php变量的javascript不起作用

> ID：11961759
> 
> 赞同：0
> 
> 时间：2012-08-14T22:28:58.093
> 
> 标签：php, javascript, jquery

```
<div id="div01">01</div>
<div id="div02">02</div>
<img src="../img/logo.png" onclick="blueSky()"/> 
```

js

```
function blueSky() {
$.ajax({
type:'GET',
url: 'test.php',
success: function(respond) { 
  document.getElementById("div02").innerHTML=respond;  // works
}
});
$("#div01").html("<?php echo $target;?>"); }   // should be "abc" - doesn't work 
```

测试.php

```
...    
$target = "abc"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:35:32.437

```
$("#div01").html("<?php echo $target;?>"); }   // should be "abc" - doesn't work 
```

它不应该工作。因为`$target`在 test.php 中定义，并且不在您`.html()`调用 javascript 的范围内。

你可以做：

```
$("#div01").html(respond); 
```

在`success:`您的 ajax 调用的属性中。

另外，在 test.php 中，我希望你这样做是`echo $target`为了将“abc”推回到函数`respond`对象中`blueSky()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:38:06.380

您正在使用 AJAX 来获取`test.php`，因此您要么必须这样做：

**测试.php**

```
$target = 'abc';
echo $target; 
```

或这个：

```
function blueSky() {
<?php include 'test.php'; ?>
$("#div01").html("<?php echo $target; ?>"); } 
```

# ruby - 获取被拒绝的数组计数

> ID：11961762
> 
> 赞同：2
> 
> 时间：2012-08-14T22:29:24.797
> 
> 标签：ruby

被reject!、delete_if、select、keep_if 等吓到了。

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject)

修改数组删除与 {} 块中的条件不匹配的元素，同时打印这些*丢失*元素的计数的最短方法是什么？

例如。

```
 puts "Filtered out #{(siglist.reject!{|r| r[:ret] < $retmin }).size} whose :ret < retmin(#{$retmin})" 
```

似乎只在拒绝后打印数组中**幸存**元素的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:34:11.737

诚然，技术含量很低，但您可以通过前后数组长度的差异来找到被拒绝值的数量：

```
previous_length = siglist.size
puts "Filtered out #{previous_length - (siglist.reject!{|r| r[:ret] < $retmin }).size} whose :ret < retmin(#{$retmin})" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:48:06.300

### 使用非 Bang 方法创建一个新数组进行比较

我能想到的最好的处理方法是保留原始数组以进行比较。例如：

```
array = *(1..9)
new_array = array.reject { |i| i.odd? }
puts "Threw away #{ array.count - new_array.count } elements"
# => Threw away 5 elements 
```

或者，您可以对数组使用集合操作。键入更短，但最终结果是相同的：

```
array - new_array
# => [1, 3, 5, 7, 9]

puts "Threw away %d elements" % (array - new_array).count
# => Threw away 5 elements 
```

换句话说，*如何*计算被拒绝的元素取决于您，但比较两个数组是我知道的跟踪被拒绝元素的最简单方法。

# python - 如何知道使用 python 3.0 脚本为网络表单填写哪些参数

> ID：11961767
> 
> 赞同：0
> 
> 时间：2012-08-14T22:29:41.760
> 
> 标签：python

我将在 gmail 上对此进行测试，因为它是一个很多人拥有并且知​​道如何使用的简单平台。如果 a) 我的代码错误并且 b) 网络表单所需的参数输入是什么，请赐教。

我的代码目前是：

```
data = {'Email':"Emailtypedhere",'Passwd':"Passwordtypedhere"} 

#note that I use 'Email' and 'Passwd' based on the name= of the username/password form fields. 
#if I should be using it based on the id= please advise. Thanks!

url = "https://accounts.google.com/ServiceLoginAuth"
data_in_string = urllib.parse.urlencode(data)
data_in_bytes = data_in_string.encode('utf-8')
urllib.request.urlopen(url,data_in_bytes) 
```

从那我会假设我现在已经登录到 gmail。那是对的吗？我从表单中的`action`类型、`Passwd`标签表单密码和`Email`电子邮件标签表单中获取了 URL。

这是来自 Gmail 的代码，专门用于表单。如果我缺少任何参数或者我的代码是否有效，请告诉我。谢谢！

```
<form novalidate="" id="gaia_loginform" action="https://accounts.google.com/ServiceLoginAuth" method="post">
<input type="hidden" name="continue" id="continue" value="https://mail.google.com/mail/">
<input type="hidden" name="service" id="service" value="mail">
<input type="hidden" name="rm" id="rm" value="false">
<input type="hidden" name="dsh" id="dsh" value="-6956126811101026847">
<input type="hidden" name="ltmpl" id="ltmpl" value="default">
<input type="hidden" name="hl" id="hl" value="en">
<input type="hidden" name="scc" id="scc" value="1">
<input type="hidden" name="ss" id="ss" value="1">
<input type="hidden" name="GALX" value="q83s3oZvHfE">
<input type="hidden" id="pstMsg" name="pstMsg" value="1">
<input type="hidden" id="dnConn" name="dnConn" value="">
<input type="hidden" id="checkConnection" name="checkConnection" value="youtube:377:1">
<input type="hidden" id="checkedDomains" name="checkedDomains" value="youtube">
<input type="hidden" name="timeStmp" id="timeStmp" value="">
<input type="hidden" name="secTok" id="secTok" value="">
<div class="email-div">
<label for="Email"><strong class="email-label">Username</strong></label>
<input type="email" spellcheck="false" name="Email" id="Email" value="">
</div>
<div class="passwd-div">
<label for="Passwd"><strong class="passwd-label">Password</strong></label>
<input type="password" name="Passwd" id="Passwd">
</div>
<input type="submit" class="g-button g-button-submit" name="signIn" id="signIn" value="Sign in">
<label class="remember" onclick="">
<input type="checkbox" name="PersistentCookie" id="PersistentCookie" value="yes">
<strong class="remember-label">
Stay signed in
</strong>
</label>
<input type="hidden" name="rmShown" value="1">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:40:20.437

您选择了一个有趣的选择开始:) 听起来您的目的仅仅是弄清楚您需要为给定表单提交哪些元素（而不是“我如何登录到 Gmail？”，这将使用完全不同的过程）。简短（并且公认没有受过教育）的答案是“真正的”检查是在服务器端完成的，因此不需要在客户端有指示（尽管[HTML5 似乎提供了一种方法](http://www.w3schools.com/html5/att_input_required.asp)）。因此，您不能仅通过查看表格就确定需要哪些内容。

至于您的示例，不久前我以这种方式登录 Gmail，我记得需要使用表单中提供的`GALX`and`dsh`值（两个内部 Gmail 变量）。所以你的论点需要是：

```
data = {
    'Email': 'email', 
    'Passwd': 'passwrd', 
    'GALX': 'GALX_value_above', 
    'dsh': 'dsh_value_above' } 
```

然后，您将对参数进行编码并打开 URL。确定所需值可能有更好的方法，但我记得测试组合，直到我能够访问所需的那些。同样，如果您尝试登录 Gmail，那么这**不是**方法，但您明确表示这只是一个示例，所以我想没有必要发出警告 :)

# c# - 从 sqlite 条目中检索主键

> ID：11961769
> 
> 赞同：0
> 
> 时间：2012-08-14T22:30:07.577
> 
> 标签：c#, sqlite, windows-8, microsoft-metro

如何检索填充列表视图的 SQLite 条目的主键？我想检索突出显示的列表视图项的主键。`entryList` 是我的列表视图。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "data.db");
    using (var db = new SQLiteConnection(dbPath))
    {
        db.CreateTable<Person>();

        db.RunInTransaction(() =>
        {
            db.Insert(new Person() { FirstName = "John", LastName = "Doe" });
        });
        entryList.ItemsSource = db.Table<Person>();
    }
}

public class Person
{
    [AutoIncrement,PrimaryKey]
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public override string ToString()
    {
        return string.Format("{0}, {1}, {2}", LastName, FirstName, ID);
    }
} 
```

# c++ - 识别 WinRT 的宏？

> ID：11961771
> 
> 赞同：6
> 
> 时间：2012-08-14T22:30:26.990
> 
> 标签：c++, windows-8, windows-runtime

是否有新的宏可以在代码中确定应用程序是否在 WinRT 上运行？正如我正在使用的`LoadLibrary`那样，如果有一个宏可以将所有调用替换为`LoadLibrary`一个 to `LoadPackagedLibrary`...

我理解文档是正确的，因为我可以通过加载任何 DLL（只要它在我的包中）`LoadPackagedLibrary`，对吧？！（只要该 DLL 不使用列入黑名单的 API……）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T23:08:09.457

我最近更新到 Visual Studio 2012，并认为我找到了我的问题的答案：

在 Microsoft 标头中，宏`WINAPI_FAMILY_PARTITION`用于确定 WinAPI 的“级别”。目前有`WINAPI_PARTITION_DESKTOP`和`WINAPI_PARTITION_APP`，因此我“猜想”通过这个宏可以区分桌面和地铁......

这两个宏导致另一组宏：`#define WINAPI_FAMILY_APP WINAPI_PARTITION_APP`和`#define WINAPI_FAMILY_DESKTOP_APP (WINAPI_PARTITION_DESKTOP | WINAPI_PARTITION_APP)`. 因此，如果`WINAPI_FAMILY_APP`定义了一个应该能够假设它是一个 Metro 应用程序......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T03:42:18.470

要添加您的答案，请参阅这篇文章[游戏的双重用途编码技术](http://blogs.msdn.com/b/chuckw/archive/2012/09/17/dual-use-coding-techniques-for-games.aspx)

在介绍部分

> 为 Windows 应用商店编写的应用程序使用 Windows 运行时 (WinRT) 和位于核心 API 系列中的 Win32 API 的受限子集（由设置为 WINAPI_PARTITION_APP 的 WINAPI_FAMILY 指示）。传统的 Win32 桌面应用程序可以访问更大的桌面 API 系列（由设置为 WINAPI_PARTITION_DESKTOP 的 WINAPI_FAMILY 表示），但这取决于每个功能所需的不同级别的操作系统支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:39:44.507

试试`__WRL_WINRT_STRICT__`。不完全确定这是正确的，但如果你去查看那个文件，它可能会有你想要的。

从[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/0d8c9bb2-ee3c-4f7f-92c4-61644d15e268)和[这里](http://msdn.microsoft.com/en-us/library/hh700142%28v=vs.110%29.aspx)。

# java - 处理/Java 中的“封闭类型”错误

> ID：11961772
> 
> 赞同：1
> 
> 时间：2012-08-14T22:30:37.273
> 
> 标签：java, class, processing

以下处理/Java代码有什么问题吗？

```
class SensorData{
  private float temperature;
  private float distance;

  SensorData(float temperature, float distance) {
    this.temperature  =  temperature;
    this.distance  =  distance;
  }

  float getTemperature() {
    return this.temperature;
  }

  float getDistance() {
    return this.distance;
  }
} 
```

我不断收到以下消息：

```
The nested type SensorData cannot hide an enclosing type 
```

上下文是一个处理项目，并且 SensorData 类被用作同一项目文件夹中的草图对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:32:14.507

多件事，因为您不是在编写 C++，而是 C# 或 Java：

```
class SensorData{
  private:
    float temperature;
    float distance;

  public:
  SensorData(float temperature, float distance) {
    this->temperature  =  temperature;
    this->distance  =  distance;
  }

  float getTemperature() {
    return this->temperature;
  }

  float getDistance() {
    return this->distance;
  }
} 
```

在 C++`this`中是指针，因此您需要`->`访问元素。

另外，为什么你对参数和成员使用相同的名称？它之所以有效，是因为您`this->`在成员之前使用，但我建议您更改参数名称。

另外，习惯使用初始化列表。我会把这个类写成：

```
class SensorData{
  private:
    float temperature;
    float distance;

  public:
  SensorData(float t, float d) : temperature(t), distance(d) {
  }

  float getTemperature() const {
    return temperature;
  }

  float getDistance() const {
    return distance;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:32:19.533

基本语法错误：

```
class SensorData{
  private: // following lines are private access
   float temperature;
   float distance;

public: // following lines are public access
  SensorData(float temperature, float distance) {
    this->temperature  =  temperature; // this is a pointer
    this->distance  =  distance;
  }

  float getTemperature() {
    return this->temperature;
  }

  float getDistance() {
    return this->distance;
  }
};  // class declaration ends with semi-colon 
```

尽管您不需要`this`在这种特殊情况下使用。此外，您的构造函数可以从使用构造函数初始化列表中受益：

```
SensorData(float temperature, float distance) 
: temperature(temperature), distance(distance){
} 
```

并且您的访问方法应该是`const`.

```
float getTemperature() const {
  return this->temperature;
} 
```

总之，得到一本好的 C++ 书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:31:55.133

第一个问题是它不是 C++。

在 C++ 中，*访问说明符*（`public`、、`protected`和`private`）不是*成员声明*的一部分，而是*成员规范*的一部分。因此，它们通过冒号 ( ) 与*成员声明*`:`分开，并适用于所有后续*成员声明*，​​直到下一个*访问说明符*。

隐式`this`是指针类型，因此要访问它的字段，您可以使用`operator->`.

C++ 类定义（或*类说明符*）语句不是由 a 终止`}`，而是由以下`;`. 您可以选择在终端之前定义一个或多个类类型的变量`;`。

# java - eclipse中有没有办法一次改变所有方法、循环、if语句等的括号对齐方式？

> ID：11961785
> 
> 赞同：1
> 
> 时间：2012-08-14T22:31:58.500
> 
> 标签：java, eclipse

我正在开发一个 Java 项目，其中代码由不同的程序员编写。大约有 50 个包，每个包有 1-10 个类。

例如，在某些代码中，方法和 if 语句声明如下：

```
public void setValue(int value) {
    this.value = value;
}

if(value==0) { 
   System.out.println("value is 0");
} 
```

在其他代码中，例如，方法和 if 语句声明如下 -

```
public void setValue(int value)
{
   this.value = value;
}

if(value==0) 
{ 
   System.out.println("value is 0");
} 
```

不同之处在于**括号的对齐方式**。是否有可能在 Eclipse 中立即将所有前一种对齐类型更改为后者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:34:43.557

首先配置格式化程序：

```
Window / Preferences / Java / Code Style / Formatter 
```

然后将格式应用于选择代码并执行的类：

```
Ctrl + Shift + F 
```

您可以对包或源文件夹中的所有类执行此操作，右键单击元素并选择：

```
Source / Format 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:29:26.667

配置格式设置后，您可以格式化一个类、整个包或整个项目。只需右键单击类/包/项目并选择 Source > Format。

但是请注意，这样做会将*所有*格式规则应用于代码，而不仅仅是括号设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:36:06.900

我知道这在 IntelliJ 中是可能的。一个快速的谷歌搜索产生这个[文档](http://www.wikihow.com/Change-the-Default-Format-Settings-in-Eclipse)。我相信这是您正在寻找的。

# wcf - WCF 使用 Windows 凭据绑定传输安全性

> ID：11961790
> 
> 赞同：0
> 
> 时间：2012-08-14T22:32:29.447
> 
> 标签：wcf, encryption

我有 WCF 服务，需要与客户交换机密信息。客户端将通过 Internet 连接到服务。如果我的绑定配置如下，客户端和服务器之间的通信是否容易被窃听或 MITM 攻击？

```
<bindings>
    <netTcpBinding>
        <binding name="myBinding">
            <security mode="Transport">
                <transport clientCredentialType="Windows" />
            </security>
        </binding>
    </netTcpBinding>
</bindings> 
```

我在[MSDN 文章中阅读了以下内容](http://msdn.microsoft.com/en-us/library/ff648863.aspx)

> 在以下场景中使用传输安全性：
> 
> 您将消息直接从应用程序发送到 WCF 服务，并且消息不会通过中间系统进行路由。服务和客户端都位于 Intranet 中。

和

> 使用传输安全有以下缺点：
> 
> 安全性是在点对点的基础上应用的，没有提供多跳或通过中间应用程序节点的路由

如果我直接连接到 WCF 服务并且服务器没有将消息转发到其他任何地方，那么传输安全性是否足够安全？

我尝试过使用数字证书的消息安全性，但性能一点也不好。对服务器的最快调用需要 3 秒，而在传输安全中，相同的调用需要 1.5 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:03:35.247

我强烈反对在互联网上使用 netTcpBinding（你发布的文章也是如此），传输安全当然是性能最高的选项，但它的缺点是它只能保证点对点连接和你不知道的互联网您如何以及可能在客户和服务之间拥有中介。在 Intranet 应用程序中，您通常有一个受控环境，您可以确定这一点。

在互联网上，您应该使用 http 传输和消息安全性，这意味着您必须为开销和性能付出一些代价。

如前所述，您无法比较两种不同绑定的延迟，您应该使用 WsHttpBinding 并且就像您已经尝试使用证书加密消息一样，这是迄今为止在互联网场景中使用 WCF 发送数据的最安全方式，我想想如果它真的很重要，你应该接受性能下降作为交换。

这可能是一个有用的链接 [http://wcfsecurityguide.codeplex.com/](http://wcfsecurityguide.codeplex.com/)

# matlab - 读取没有标题的 MATLAB 数据集

> ID：11961808
> 
> 赞同：0
> 
> 时间：2012-08-14T22:34:45.437
> 
> 标签：matlab, dataset

我有一个 MATLAB 数据集，我只想提取数字而不读取标题。有没有直接的方法可以做到这一点？

我有这个：

```
 MeanOfTrainingMSE    MeanOfTestMSE
Naive Regression                          26.291            26.327      
Linear Regression (attribute 400)         1.2466            1.2592      
Linear Regression (attribute 357)          1.214            1.2356      
Linear Regression (attribute 440)         1.1494            1.1562      
Linear Regression (attribute 404)         1.0072            1.0111      
Linear Regression (attribute 238)        0.92402           0.93002      
Linear Regression (attribute 473)        0.89838           0.90397      
Linear Regression (all attributes)    4.1155e-07            877.58      
Ridge Regression                      2.9044e-10            0.2533      
Kernel Ridge Regression                   1054.8            1023.2 
```

我想得到这个：

```
26.291            26.327
1.2466            1.2592
1.214             1.2356
1.1494            1.1562
1.0072            1.0111
0.92402           0.93002
0.89838           0.90397
4.1155e-07        877.58
2.9044e-10        0.2533
1054.8            1023.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:53:56.163

例如，如果您的数据集名为`aFile`，您可以通过以下方式检索那些感兴趣的列的值

```
>> X=[aFile.MeanOfTrainingMSE aFile.MeanOfTestMSE] 
```

编辑以回答您的评论：

可能有更好的方法，但您可以执行以下操作：

```
>> m=length(aFile.Properties.ObsNames);
>> n=length(aFile.Properties.VarNames);
>> data=ones(m,n);
>> names=aFile.Properties.VarNames; 
>> for a =1:n
     data(:,a)=aFile.(names{a});
   end 
```

当然，这假设数据中的每一列都是数字的。

# jquery - 更改 Jquery 代码以使效果恒定而不是仅悬停

> ID：11961809
> 
> 赞同：0
> 
> 时间：2012-08-14T22:34:52.530
> 
> 标签：jquery, pulse

我在网上发现了这种脉冲效果，它工作正常，但它设置为只在悬停时工作。我希望它是一个恒定的效果，不知道如何调整它以消除悬停要求。jquery 中的回调总是让我在阅读代码时有点不知所措。我正在学习..一次一点点。任何帮助都会很棒。

```
$(function(){
$.extend($.fn.pulse = function(){
var minOpacity = .33;
var fadeOutDuration = 400;
var fadeInDuration = 400;
$(this).attr( 'pulsing', 'y' );

$(this).animate({
opacity: minOpacity
}, fadeOutDuration, function() {
$(this).animate({
opacity: 1
}, fadeInDuration, function() {
if( $(this).attr('pulsing') == 'y' ) $(this).pulse();
})
});
return $(this);
});
$.extend($.fn.stopPulse = function(){
$(this).attr( 'pulsing', '' ).stop(true,true).animate({opacity:1});
});

$('.pulse_image').(function(){ $(this).pulse() },function(){ $(this).stopPulse() }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:36:07.340

当然你可以这样做：

```
$('.pulse_image').pulse(); 
```

演示：http: [//jsfiddle.net/bC7pS/](http://jsfiddle.net/bC7pS/)

# c# - 参数 1：无法从 'Infragistics.WebUI.UltraWebGrid.UltraGridRow' 转换为 'Infragistics.Web.UI.GridControls.ControlDataRecord'

> ID：11961823
> 
> 赞同：0
> 
> 时间：2012-08-14T22:36:25.070
> 
> 标签：c#, asp.net, infragistics, webdatagrid

我正在将一堆代码从 vb.net 转换为 c#，但我不太了解 vb.net，所以我遇到了很多问题。

有人可以帮我看看这里有什么问题吗？

```
protected void GenerateSalaryPunchesTable()
        {
            this.dgvPunchs.Rows.Clear();

            string[] DateRange = this.cboPayPeriods.SelectedItem.Text.ToString().Replace(" ", "").Split('-');

            while (Convert.ToDateTime(DateRange[0]) <= Convert.ToDateTime(DateRange[1]))
            {
                if (Convert.ToDateTime(DateRange[0]).DayOfWeek != DayOfWeek.Saturday & Convert.ToDateTime(DateRange[0]).DayOfWeek != DayOfWeek.Sunday)
                {
                    Infragistics.WebUI.UltraWebGrid.UltraGridRow nRow = new Infragistics.WebUI.UltraWebGrid.UltraGridRow();

                    nRow.Cells.Add();
                    // Date Cell
                    nRow.Cells.Add();
                    // Worked CB
                    nRow.Cells.Add();
                    // Vacation CB
                    nRow.Cells.Add();
                    // Sick CB
                    nRow.Cells.Add();
                    // Holiday CB
                    nRow.Cells.Add();
                    // Error

                    nRow.Key = Convert.ToDateTime(DateRange[0].ToString()).ToShortDateString();
                    nRow.Cells[0].Value = Convert.ToDateTime(DateRange[0].ToString()).ToShortDateString();
                    nRow.Cells[1].Value = 0;
                    nRow.Cells[2].Value = 0;
                    nRow.Cells[3].Value = 0;
                    nRow.Cells[4].Value = 0;
                    nRow.Cells[5].Value = "";

                    this.dgvPunchs.Rows.Add(nRow);
                }

                DateRange[0] = Convert.ToDateTime(DateRange[0]).AddDays(1);
            }

        } 
```

这是它给我的错误：

错误 4 'Infragistics.Web.UI.GridControls.ControlDataRecordCollection.Add(Infragistics.Web.UI.GridControls.ControlDataRecord)' 的最佳重载方法匹配有一些无效参数
错误 5 参数 1：无法从 'Infragistics.WebUI.UltraWebGrid 转换.UltraGridRow' 到 'Infragistics.Web.UI.GridControls.ControlDataRecord'

这是控制：

```
<ig:WebDataGrid ID="dgvPunchs" runat="server" Height="350px" Width="400px">
                        </ig:WebDataGrid> 
```

它是从 VB.net 和旧版本的 Infragistics 转换而来的。到目前为止，我无法弄清楚这一点。

编辑：

我试过这个，它也没有工作......

```
Infragistics.Web.UI.GridControls.ControlDataRecord nRow =
  Infragistics.Web.UI.GridControls.ControlDataRecord();
//Infragistics.WebUI.UltraWebGrid.UltraGridRow nRow = new Infragistics.WebUI.UltraWebGrid.UltraGridRow(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:42:55.043

发生异常是因为您将 UltraGridRow 添加到 WebDataGrid 或 WebHierarchicalDataGrid 的行集合，并且 UltraGridRow 与 UltraWebGrid 一起使用。

由于您更改了正在使用的网格，因此代码不会出现 1:1 映射，因此这会增加转换的复杂性。你最好看看你想要完成什么，然后编写新的网格控件所需的代码。

通常对于数据行，WebDataGrid 使用 GridRecord 对象，您可以测试创建其中一个对象以向网格添加新行。

请注意，从您调用的方法看来，您正在为网格动态创建所有数据，如果是这种情况，那么您最好创建一个 DataTable 并将网格绑定到 DataTable 而不是使用网格直接因为网格被设计为绑定到数据。

# mybatis - mybatis 自动生成key的java数据类型

> ID：11961824
> 
> 赞同：1
> 
> 时间：2012-08-14T22:36:36.160
> 
> 标签：mybatis, auto-generate

我想将 Post 域插入 MySQL 数据库。

后域是这样的：

```
public class Post {
    private long postId;
    private String title;
    String content;
    private String pictureId;
    private Picture picture;
    private int authorId;   
    private User author;
    private Date postTime;
    private int status;
    private int commentCount; 
```

}

db 表是这样创建的：

```
CREATE TABLE `tb_posts` (
`post_id` bigint(20) NOT NULL AUTO_INCREMENT,
`title` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
`content` varchar(2000) COLLATE utf8_unicode_ci DEFAULT NULL,
`picture_id` varchar(250) COLLATE utf8_unicode_ci DEFAULT NULL,
`author_id` int(11) DEFAULT NULL,
`post_time` datetime DEFAULT NULL,
`status` int(11) DEFAULT NULL,
`comment_count` int(11) DEFAULT NULL,
PRIMARY KEY (`post_id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

mybatis的mapper是这样的：

```
<insert id="insert" parameterType="post">

    INSERT INTO tb_posts
    (
        title, content, picture_id, author_id, post_time, status, comment_count
    ) VALUES
    (
        #{title}, #{content}, #{pictureId}, #{authorId}, #{postTime}, #{status}, #{commentCount}
    )
    <selectKey keyProperty="postId" resultType="long" order="BEFORE">
    SELECT LAST_INSERT_ID() AS postId;
    </selectKey>
</insert> 
```

我想知道为什么生成的名为“postId”的密钥总是有异常“java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long”

整个异常是这样的：

```
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long
at $Proxy14.insert(Unknown Source)
at me.joyo.mate.core.service.impl.PostServiceImpl.insert(PostServiceImpl.java:44)
at me.joyo.mate.core.test.PostTester.insert(PostTester.java:50)
at me.joyo.mate.core.test.PostTester.test(PostTester.java:33)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

请帮忙 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:34:28.067

制造`postId`类型`Long`。我最近遇到了同样的错误，请参见这里[http://code.google.com/p/mybatis/issues/detail?id=378](http://code.google.com/p/mybatis/issues/detail?id=378)

# php - 如何使用 MATCH AGAINST 方法搜索 MySQL 数据库，该方法仅返回具有特定字段值的行？

> ID：11961826
> 
> 赞同：2
> 
> 时间：2012-08-14T22:36:47.397
> 
> 标签：php, mysql, search, match

我有一个 MySQL 表，其中一个字段是“类别”，其值包括文章、研究、引用等。对于搜索表单，我有与这些类别相对应的复选框，供用户选择，如果不是全部的话, 从中搜索。

现在，以下代码段可用于不加选择地搜索整个表格（即，从具有“类别”的行中，包括文章、研究、引用等。但是，我将如何更改以下内容，以便如果一个人只选择“文章”，则查询将仅返回具有相应值的“类别”字段的行？

```
$category = $_GET["category"];
$query = "User-submitted query";
$search = mysql_query("SELECT title,body,
MATCH(title, body) 
AGAINST('$query' IN BOOLEAN MODE)
AS score FROM resources
WHERE MATCH(title, body) AGAINST ('$query' IN BOOLEAN MODE)"); 
```

我尝试在`WHERE category = '$category'`上面添加（在这种情况下，$category 将是“Articles”），但它不起作用。

顺便说一句：我知道 mysql/mysqli 和安全用户输入问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:10:24.917

我解决了这个问题。以下作品：

```
$category = $_GET["category"];
$query = "User-submitted query";
$search = mysql_query("SELECT title,body,
MATCH(title, body) 
AGAINST('$query' IN BOOLEAN MODE)
AS score FROM resources
WHERE MATCH(title, body) AGAINST ('$query' IN BOOLEAN MODE)
AND category = '$category'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:08:22.287

你会反对使用子查询吗？

```
SELECT title,body
FROM(

SELECT title,body,category
MATCH(title, body) 
AGAINST('$query' IN BOOLEAN MODE)
AS score FROM resources
WHERE MATCH(title, body) AGAINST ('$query' IN BOOLEAN MODE)

) x 
WHERE category = '$category' 
```

# matlab - 如何从 matlab 中调用 opencv 中的人脸检测？/loadlibrary 失败

> ID：11961828
> 
> 赞同：0
> 
> 时间：2012-08-14T22:36:52.703
> 
> 标签：matlab, opencv, mex, face-detection, loadlibrary

我正在使用 matlab 2011b（32 位）、VS 2008、OpenCV 242。

我想加载这些库，然后在 matlab 中通过“calllib”调用它们。我的问题是当我加载库时：

```
opencvPath = 'C:\opencv';
includePath = 'C:\opencv\build\include';
[notfound,warnings]=loadlibrary(...
fullfile('C:\opencv\build\x86\vc9\bin', 'opencv_core242.dll'),...
fullfile(opencvPath, 'build\include\opencv\cxcore.h'), ...
'alias', 'cxcore', 'includepath', includePath)

[notfound,warnings]=loadlibrary(...
fullfile('C:\opencv\build\x86\vc9\bin', 'opencv_core242.dll'), ...
fullfile(opencvPath, 'build\include\opencv\cv.h'), ...
'alias', 'cv', 'includepath', includePath)

[notfound,warnings]=loadlibrary(...
'C:\opencv\build\x86\vc9\bin\opencv_highgui242.dll',...
'C:\opencv\build\include\opencv\highgui.h', ...
    'alias', 'highgui', 'includepath', includePath) 
```

例如，我为 highgui 得到了这个：

```
Warning: The library class 'highgui' already exists.  Use a classname alias. 
> In loadlibrary at 180
In facedetector at 45 

notfound =

  [] 
```

似乎它们已被加载。但是现在如果我尝试使用 calllib，我会得到一个错误，找不到函数！！！

为了了解我是否真的加载了库，我使用了“libfunctions('highgui')”，这似乎我并没有真正加载库！！！我收到以下错误：

```
"No methods for class lib.highgui or no class lib.highgui." 
```

# asp.net-mvc - 实体框架更新实体？

> ID：11961830
> 
> 赞同：2
> 
> 时间：2012-08-14T22:36:58.180
> 
> 标签：asp.net-mvc, entity-framework

控制器

```
[HttpPost]
public ActionResult EditUserProfile(UserProfiles _postedUserProfile)
{
    UserProfiles orjinalUserProfile = entity.UserProfiles.Where(x => x.UserId == _postedUserProfile.UserId).Single();
    orjinalUserProfile.AboutMe = _postedUserProfile.AboutMe;
    orjinalUserProfile.Birthday = _postedUserProfile.Birthday;
    orjinalUserProfile.Comments = _postedUserProfile.Comments;
    ...... // there are lines more 
    entity.SaveChanges();
    return View();
} 
```

我像上面一样更新了实体。但我认为这种方式并不好。是否有任何解决方案来更新一行中的实体，例如像`entity.AddToUserProfiles`.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:41:34.537

You can use the ApplyCurrentValues method.

Here is an example: [ApplyCurrentValues in EF 4](https://stackoverflow.com/questions/2272325/applycurrentvalues-in-ef-4)

Basically:

```
[HttpPost]
public ActionResult EditUserProfile(UserProfiles _postedUserProfile)
{
    UserProfiles orjinalUserProfile = entity.UserProfiles.Where(x => x.UserId == _postedUserProfile.UserId).Single();
    entity.UserProfiles.ApplyCurrentValues(_postedUserProfile);
    entity.SaveChanges();
    return View();
} 
```

# sharepoint-2010 - SharePoint 2010 中的 IIS 帐户

> ID：11961834
> 
> 赞同：2
> 
> 时间：2012-08-14T22:37:41.330
> 
> 标签：sharepoint-2010, iis-7.5, application-pool

我最近负责清理在我们的 SharePoint 2010 网站上发现的运行状况分析器问题。我们收到的错误之一是**应用程序池或服务标识使用的帐户位于本地计算机管理员组中** 。这影响了我们的中央管理站点、一个内容站点和 SPTimerV4 服务。我环顾四周，果然，这些帐户位于本地管理员帐户中。所以我删除了它们。

我重新运行分析仪，错误仍然出现。因此，在域中创建了一个新帐户，将其添加到 WSS_WPG 帐户、IIS_IUSRS 帐户和必要的数据库中。但是，在第一次尝试访问该站点时，我们收到以下错误：*HTTP 错误 503。服务不可用*。事件日志指出以下内容： *应用程序池 XXXXXX 已被禁用。Windows Process Activation Service (WAS) 在启动工作进程为应用程序池提供服务时遇到故障。*

如果我将帐户添加到本地管理员组，一切正常，但如果我删除它们，并且出于任何原因必须重新启动服务器，则必须将它们重新添加到本地管理员组才能工作。即使我将它们从本地管理员组中删除，SharePoint 运行状况分析器错误也会不断出现。

有人有想法吗。是否需要将域帐户添加到本地管理员组是 IIS 问题，这是 SharePoint 2010 问题。有没有人见过这个或者知道我的配置中缺少什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:06:41.663

想通了这个问题。

原来这些帐户没有添加到“作为批处理作业登录”本地策略中。完成后，一切都开始了，没有任何问题。

# regex - 为什么两次运行相同的正则表达式会产生不同的结果？

> ID：11961839
> 
> 赞同：2
> 
> 时间：2012-08-14T22:38:05.820
> 
> 标签：regex, perl

在尝试回答[这个](https://stackoverflow.com/questions/11960622/regular-expression-statement-inside-a-while-loop-only-matching-and-printing-one)问题时，我遇到了 Perl 的正则表达式引擎的一些奇怪行为。我有一个字符串，其中包含我试图与正则表达式匹配的 2 个数量。正则表达式只匹配字符串“units/ml”之前的任意 8 个字符。我想抓住两个单位。

此脚本仅打印匹配的第二个：

```
use warnings;
use strict;
my $line = 'some data 100,000 units/ml data 20,000 units/ml data';
my @array;
if ($line =~ m/.{8}units\/ml/g) {
    @array = $line =~ m/.{8}units\/ml/g;
    print join(' ', @array) . "\n";
} 
```

它的输出：

```
 20,000 units/ml 
```

如果我运行第 6 行两次，则分配给 @array 的行：

```
use warnings;
use strict;
my $line = 'some data 100,000 units/ml data 20,000 units/ml data';
my @array;
if ($line =~ m/.{8}units\/ml/g) {
    @array = $line =~ m/.{8}units\/ml/g;
    # Let's run that again, for good measure...
    @array = $line =~ m/.{8}units\/ml/g;
    print join(' ', @array) . "\n";
} 
```

它的输出：

```
100,000 units/ml  20,000 units/ml 
```

为什么这两个脚本会产生不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:11:01.107

这是因为 if 中的 /g 修饰符。由于 if 是在标量上下文中评估 =~ ，因此它只会获得匹配的第一个项目。然后，在您的 if 块内，@array 赋值从它停止的地方继续搜索。（这对解析很有用。）

当您运行额外匹配时，您已经完成匹配字符串中的所有内容，因此您在列表上下文中重新从头开始，然后您将获得所有内容。

如果你删除了 if 中的 g 标志，那么事情就会如你所愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:56:34.400

在这种情况下，一个选项是评估`if`语句中的数组赋值：

```
use Modern::Perl;

my $line = 'some data 100,000 units/ml data 20,000 units/ml data';
my @array;
if ( @array = $line =~ m/.{8}units\/ml/g ) {
    print join( ' ', @array ) . "\n";
} 
```

输出：

```
100,000 units/ml  20,000 units/ml 
```

如果没有匹配发生，如果需要，可以采取适当的行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:27:45.337

问题就在这里

```
if ($line =~ m/.{8}units\/ml/g) { ... } 
```

标量上下文中的全局匹配将匹配*下一次*出现的模式并设置一个标记来说明下一次全局匹配应该从哪里开始

之后只有`20,000 units/ml`剩余的会匹配模式，所以它只匹配一次

要收集字符串中的所有数字或逗号，`units/ml`您应该编写如下内容

```
use strict;
use warnings;

my $line = 'some data 100,000 units/ml data 20,000 units/ml data';

my @array = $line =~ m|([0-9,]+)\s*units/ml|g;

print "$_\n" for @array; 
```

**输出**

```
100,000
20,000 
```

# asp.net - ASP.NET：如何为 GridView 创建自定义分页器？

> ID：11961844
> 
> 赞同：0
> 
> 时间：2012-08-14T22:38:56.163
> 
> 标签：asp.net, pager

是否可以为看起来像这样的 ASP.NET 的 GridView 控件创建自定义寻呼机？ ![寻呼机](../Images/ac7dac2259e60551daa10f81f303f431.png)

如果是这样，任何人都可以给我一些想法或一些关于如何创建它的起始代码吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:48:51.133

您只需要为上一个和下一个固定的 LinkBut​​tons 以及单个页面的 Repeater 控件内的一个 LinkBut​​ton。

查看此页面了解详细信息：[使用 ASP.NET 中继器控件的自定义分页](http://www.dotnetcurry.com/ShowArticle.aspx?ID=345)

# java - 移动数组中的元素

> ID：11961853
> 
> 赞同：0
> 
> 时间：2012-08-14T22:39:23.873
> 
> 标签：java, arrays, user-interface, inventory

我在网上搜索过，但似乎找不到我的问题的答案。目前，我正在将库存项目组织到一个数组中，每当玩家打开该屏幕时，使用数组的索引为 GUI 生成位置。然而，当玩家移动项目时，我将数组中旧索引处的项目设置为 null，我很快了解到将插槽项目也设置为 null。

本质上，我只需要弄清楚如何从旧位置移除对象并将其替换为新位置。这可能吗？

我考虑过将库存切换到 ArrayList，但如果我不必这样做会很好，因为它是围绕使用数组构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:42:29.313

这不就是上帝发明链表的原因吗？

# typo3 - 将模板应用于当前页面而不是子页面

> ID：11961854
> 
> 赞同：0
> 
> 时间：2012-08-14T22:39:50.250
> 
> 标签：typo3, typoscript

我知道 ext 模板以及可以在下一级选择模板的选项：

但是我只想在一个页面上添加一些东西（不是孩子们），我认为必须先制作一个 ext 模板然后再为孩子们制作另一个模板会有点浪费，所以我试图使用一些条件。有关详细信息，请参阅[此链接](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.5.0/view/1/4/)。

如果我执行以下操作

```
[PIDinRootline = 10]
...
[end] 
```

它有效，但也包括儿童。

我已经尝试了以下方法，但它似乎不起作用？

```
[PIDinRootline = 10 && treeLevel = 1]
...
[end] 
```

关于解决此问题的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:03:59.803

使用条件：

```
[globalVar = TSFE:id = 10]
    ...
[end] 
```

精确定位页面的 uid

此外，您可以使用`operators`( `||`OR) 或`&&`(AND) 进行更复杂的组合，即：

```
[globalVar = TSFE:id = 10] || [globalVar = TSFE:id = 978] 
```

它适用于以下页面`uid`：10 `OR`978

# android - 实现 AsyncQueryHandler

> ID：11961857
> 
> 赞同：14
> 
> 时间：2012-08-14T22:40:12.577
> 
> 标签：android, android-handler

我正在尝试实施，因为我在此[链接](https://stackoverflow.com/questions/11604914/contentprovider-insert-always-runs-on-ui-thread)`AsyncQueryHandler`中遇到了同样的问题，但我没有看到任何示例或任何关于实施它的内容。

我试着做

```
AsyncQueryHandler handler = new AsyncQueryHandler(getContentResolver()); 
```

因为这是构造函数在[文档](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)中显示的内容，但我收到一条错误消息，`cannot instantiate the type AsyncQueryHandler`那么我该如何使用它呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T02:40:15.080

太方便了：

```
AsyncQueryHandler handler = 
    new AsyncQueryHandler(mActivity.getContentResolver()) {};
handler.startUpdate(-1, null, sessionUri, values, null, null); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-14T22:42:31.043

[AsyncQueryHandler](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)是一个抽象类，因此您不能直接实例化它。您需要对其进行子类化。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-24T00:20:54.103

当您需要在不使用 Loader 的情况下异步执行 CRUD 操作时，它非常方便，因此通过从 asyncquery 扩展您可以获得诸如[startQuery](http://developer.android.com/reference/android/content/AsyncQueryHandler.html#startQuery%28int,%20java.lang.Object,%20android.net.Uri,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%29)、[startInsert](http://developer.android.com/reference/android/content/AsyncQueryHandler.html#startInsert%28int,%20java.lang.Object,%20android.net.Uri,%20android.content.ContentValues%29)、[startUpdate](http://developer.android.com/reference/android/content/AsyncQueryHandler.html#startUpdate%28int,%20java.lang.Object,%20android.net.Uri,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)和[startDelete](http://developer.android.com/reference/android/content/AsyncQueryHandler.html#startDelete%28int,%20java.lang.Object,%20android.net.Uri,%20java.lang.String,%20java.lang.String%5B%5D%29)之类的方法，一个简单的实现可能是：

```
public class CustomAsyncHandler extends AsyncQueryHandler {

        private WeakReference<AsyncQueryListener> mListener;

        public interface AsyncQueryListener {
            void onQueryComplete(int token, Object cookie, Cursor cursor);
        }

        public CustomAsyncHandler(ContentResolver cr, AsyncQueryListener listener) {
            super(cr);
            mListener = new WeakReference<AsyncQueryListener>(listener);
        }

        public CustomAsyncHandler(ContentResolver cr) {
            super(cr);
        }

        /**
         * Assign the given {@link AsyncQueryListener} to receive query events from
         * asynchronous calls. Will replace any existing listener.
         */
        public void setQueryListener(AsyncQueryListener listener) {
            mListener = new WeakReference<AsyncQueryListener>(listener);
        }

        /** {@inheritDoc} */
        @Override
        protected void onQueryComplete(int token, Object cookie, Cursor cursor) {
            final AsyncQueryListener listener = mListener.get();
            if (listener != null) {
                listener.onQueryComplete(token, cookie, cursor);
            } else if (cursor != null) {
                cursor.close();
            }
        }

    } 
```

如您所见，创建了一个额外的接口 AsyncQueryListener 作为查询完成时的回调，因此您可以创建 AsyncUpdateListener、AsyncDeleteListener、AsyncInsertListener 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-18T15:07:10.503

```
 AsyncQueryHandler asyncQueryHandler = new AsyncQueryHandler(activity.getContentResolver()){

        @Override
        protected void onInsertComplete(int token, Object cookie, Uri uri) {
            super.onInsertComplete(token, cookie, uri);
            Log.d(TAG, "onInsertComplete  return uri: " + uri);
        }

 };

 asyncQueryHandler.startInsert(-1, null, mUri, values); 
```

# c# - 将单例用于 Web 服务是否更好

> ID：11961858
> 
> 赞同：1
> 
> 时间：2012-08-14T22:40:12.620
> 
> 标签：c#, wcf, web-services, silverlight-5.0

在我们的应用程序中，我们将单例用于 Web 服务，并且该单例用于所有类。

我认为这真的很酷，但后来我看到了一个开发人员代码，他们必须在事件处理程序本身中取消注册事件。

这让我回想起创建 wcf 服务而不必担心取消注册事件处理程序。另外我认为可能有一种方法可以让两个类相互干扰，因为它们都监听同一个方法的事件处理程序。

使用 wcf 单例的优缺点是什么？一种方式是否比另一种方式具有更好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:55:44.920

我建议阅读以下内容：http: [//msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)

这是一篇很好的文章，它解释了可用的不同类型的 WCF 服务，包括单例。

# c++ - C++ 中的 FFT 和 IFFT

> ID：11961860
> 
> 赞同：14
> 
> 时间：2012-08-14T22:40:30.153
> 
> 标签：c++, transform, fft, ifft

我正在使用 C++/C 对一些应该是激光脉冲输出的数据执行正向和反向 FFT。

这个想法是获取输出，使用前向 FFT 转换到频域，对相位应用线性最佳拟合（首先展开它），然后从相位信息中减去这个最佳拟合。

然后将得到的相位和幅度转换回时域，最终目标是通过相位补偿压缩脉冲。

我试图在 MATLAB 中这样做没有成功，结果转向了 C++。前向 FFT 工作正常，我从 C++ 中的 Numerical recipes 中获取了基本配方，并使用了一个函数来修改它以适应复杂的输入，如下所示：

```
void fft(Complex* DataIn, Complex* DataOut, int fftSize, int InverseTransform, int fftShift)
{

        double* Data  = new double[2*fftSize+3];
        Data[0] == 0.0;

        for(int i=0; i<fftSize; i++)
        {
                Data[i*2+1]  = real(DataIn[i]);
                Data[i*2+2]  = imag(DataIn[i]);
        }

        fft_basic(Data, fftSize, InverseTransform);

        for(int i=0; i<fftSize; i++)
        {
                DataOut[i] = Complex(Data[2*i+1], Data[2*i+2]);
        }

        //Swap the fft halfes
        if(fftShift==1)
        {
                Complex* temp = new Complex[fftSize];
                for(int i=0; i<fftSize/2; i++)
                {
                        temp[i+fftSize/2] = DataOut[i];
                }
                for(int i=fftSize/2; i<fftSize; i++)
                {
                        temp[i-fftSize/2] = DataOut[i];
                }
                for(int i=0; i<fftSize; i++)
                {
                        DataOut[i] = temp[i];
                }
                delete[] temp;
        }
        delete[] Data;
} 
```

使用`ftt_basic()`取自“数值食谱 C++”的函数。

我的问题是输入的形式似乎会影响反向 FFT 的输出。这可能是一个精度问题，但我环顾四周，它似乎并没有影响到其他任何人。

将正向 FFT 的输出直接反馈回反向 FFT 会产生与输入相同的脉冲：

![在此处输入图像描述](../Images/3efce8e44f2cce1fea119ccd1a7f7e4f.png)

然而，将前向 FFT 的功率输出`real^2+imag^2`复制到一个数组中，这样：

```
Reverse_fft_input[i]=complex(real(forwardsoutput[i]),imag(forwardsoutput[i])); 
```

然后将其用作反向 FFT 的输入，得到以下结果： ![在此处输入图像描述](../Images/93ffbb230cdab6e23e88dd2281bc8c47.png)

最后，获取正向 FFT 的输出并复制如下：

```
Reverse_fft_input[i]=complex( Amplitude[i]*cos(phase[i]), Amplitude[i]*sin(phase[i])); 
```

其中 Amplitude[i]=(real^2+imag^2)^0.5 和 phase[i]=atan(imag/real)。转换回时域时产生以下功率输出：

![在此处输入图像描述](../Images/f4e2bb2e8f167d501039b74e09cb5d58.png)

仔细看看脉冲结构：

![在此处输入图像描述](../Images/3ce697cc8036022b2ed17d20dba987fa.png)

当第一张照片产生良好、规律的脉冲时。

我的问题是，是 cos 和 sin 函数的精度导致反向 fft 的输出变成这样吗？为什么复杂数据的不同输入方式存在如此巨大的差异，为什么只有直接反馈到反向FFT时，时域数据才与原始数据相同？输入到前锋FFT？

谢谢你。

*这里编辑是功能的实现：

```
void TTWLM::SpectralAnalysis() 
```

{

```
 Complex FieldSpectrum[MAX_FFT];
    double  PowerFFT[MAX_FFT];
    double  dlambda;
    double  phaseinfo[MAX_FFT]; // Added 07/08/2012 for Inverse FFT
    double  fftamplitude[MAX_FFT]; // Added 07/08/2012 for Inverse FFT after correction
    double  phasecorrect[MAX_FFT]; // Added 07/08/2012 for Inverse FFT after correction
    double  lambdaarray[MAX_FFT]; // Added 07/08/2012 for Inverse FFT after correction
    Complex CompressedFFT[MAX_FFT];
    Complex correctedoutput[MAX_FFT];

    //Calc the wavelength step size
    dlambda = lambda*lambda/CONST_C/DT/fftSize;
    //Calculate the spectrum
    fft(fftFieldData, FieldSpectrum, fftSize, FORWARD, SHIFT); // Forward fft of the output data 'fftFieldData' into frequency domain

    //Get power spectrum
    for(int i=0; i<fftSize; i++)
    {

        PowerFFT[i]                  = norm(FieldSpectrum[i]);
        phaseinfo[i]                 = atan2(imag(FieldSpectrum[i]),real(FieldSpectrum[i]));
        fftamplitude[i] = sqrt(PowerFFT[i]);      // Added 07/08/2012 for Inverse FFT after correction

    }

    // Added 07/08/2012 for Inverse FFT after correction, this loop subtracts line of best fit from the phase

        for(int i=0; i<fftSize; i++)
    {
        lambdaarray[i]=dlambda*(i-fftSize/2)*1e-2;
        phasecorrect[i]=phaseinfo[i]-((1.902e+10*lambdaarray[i])+29619); // Correction from best fit in MATLAB (DONE MANUALLY) with phase unwrapping
        CompressedFFT[i]=(fftamplitude[i]*cos(phaseinfo[i]),fftamplitude[i]*sin(phaseinfo[i]));
            }

       fft(CompressedFFT, correctedoutput, fftSize, REVERSE, SHIFT); // Reverse fft of corrected phase back to time domain, final output is correctedoutput 
```

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:36:30.093

几个可能的错误：

> ```
>  Data[0] == 0.0; 
> ```

大概应该是`=`吧`==`？

> fft_basic(数据, fftSize, InverseTransform);

我无法访问此函数的源代码；它真的期望您在奇数位置提供实部而在偶数位置提供虚部的布局吗？

> ```
>  //Swap the fft halfes 
> ```

正如我在另一个问题中告诉您的那样，如果您确实交换了它们，则需要在逆变换之前将它们交换回来。你执行这个交换吗？

您的数据是否符合 fft_basic 函数的预期？可能它期望 fftSize 是 2 的幂。

您是否标准化 FFT 结果？离散 FFT 变换需要归一化。

# ios - 可以通过 USB 使用 iOS 设备在设备上进行 Flash Pro 调试吗？

> ID：11961861
> 
> 赞同：0
> 
> 时间：2012-08-14T22:40:36.003
> 
> 标签：ios, flash, air, remote-debugging

我使用 Flash Pro CS6 和 AIR。是否可以使用 iOS 设备通过 USB 进行设备调试？或者是用命令行完成的唯一方法？我了解 Flash Pro CS6 在 Android 上通过 USB 提供调试功能。为什么不在 iOS 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:29:15.080

也许这会有所帮助：在 iOS 上通过 USB 调试 AIR 应用程序 [http://blogs.adobe.com/airodynamics/2012/06/13/debugging-air-applications-over-usb-on-ios/](http://blogs.adobe.com/airodynamics/2012/06/13/debugging-air-applications-over-usb-on-ios/)

# java - 慢跑采摘深度奇怪的行为

> ID：11961865
> 
> 赞同：1
> 
> 时间：2012-08-14T22:41:44.460
> 
> 标签：java, opengl, jogl

我`GL_SELECT`用来执行采摘。一切正常，对象被正确拾取。但是，拾取对象的 z 坐标存在问题。出于某种原因，它们都等于`-2147483648`。因此，当拾取几个对象时，我无法确定哪个更接近。

我有以下代码：

```
private int[] pickBuffer = new int[PICK_BUFFER_SIZE];

private IntBuffer pickGlBuffer = java.nio.IntBuffer.wrap(pickBuffer);

public void init(GLAutoDrawable drawable) {
    glu = new GLU();
    GL2 g2 = drawable.getGL().getGL2();

    { // options
        g2.glEnable(GL.GL_DEPTH_TEST);
        g2.glDepthFunc(GL.GL_LEQUAL);
        g2.glShadeModel(GLLightingFunc.GL_SMOOTH);
        g2.glHint(GL2ES1.GL_PERSPECTIVE_CORRECTION_HINT, GL.GL_NICEST);
        g2.glClearColor(0f, 0f, 0f, 1f);
    }

}

public void display(final GLAutoDrawable drwabale) {
    GL2 g2 = drwabale.getGL().getGL2();
    g2.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
    Arrays.fill(pickBuffer, 0); // just for debug
    g2.glSelectBuffer(PICK_BUFFER_SIZE, pickGlBuffer);

    { // selection
        g2.glRenderMode(GL2.GL_SELECT);
        g2.glInitNames();
        g2.glPushName(-1);

        setProjections(g2, GL2.GL_SELECT);

        doDraw(g2);
    }

    int hits = g2.glRenderMode(GL2.GL_RENDER);
    processPicking(hits, pickBuffer);

    { // actual drawing
        setProjections(g2, GL2.GL_RENDER);

        doDraw(g2);
    }
}

private void setProjections(final GL2 g2, final int renderMode) {
    g2.glMatrixMode(GLMatrixFunc.GL_PROJECTION);
    g2.glLoadIdentity();
    if (renderMode == GL2.GL_SELECT) {
        glu.gluPickMatrix((double) currentMouseX, (double) (viewPort[3] - currentMouseY), 3, 3, viewPort, 0);
    }
    double width = glCanvas.getWidth(), height = glCanvas.getHeight();
    glu.gluPerspective(45, width / height, 1, 1000);

    {
        double yawRad = getYawAngle() / 180 * Math.PI;
        double pitchRad = getPitchAngle() / 180 * Math.PI;
        double vd = getViewerDistance();
        double vx = Math.sin(pitchRad) * Math.sin(yawRad) * vd;
        double vy = Math.cos(pitchRad) * vd;
        double vz = Math.sin(pitchRad) * Math.cos(yawRad) * vd;
        glu.gluLookAt(
                vx, vy, vz,
                0, 0, 0,
                0, 1, 0);
    }

    g2.glMatrixMode(GLMatrixFunc.GL_MODELVIEW);
    g2.glLoadIdentity();
}

private void doDraw(final GL2 g2) {
    if (isAxesPainted()) {
        drawAxes(g2);
    }

    drawPlanes(g2);
}

private void drawPlanes(final GL2 g2) {
    g2.glColor3d(1, 1, 1);
    g2.glPolygonMode(GL.GL_FRONT_AND_BACK, GL2GL3.GL_LINE);
    { // xy plane
        g2.glLoadName(XY_PLANE_NAME);
        g2.glBegin(GL2.GL_QUADS);
            g2.glTexCoord2d(0, 0);
            g2.glVertex3d(-xBound / 2, -yBound / 2, xyPosition);
            g2.glTexCoord2d(1, 0);
            g2.glVertex3d(xBound / 2, -yBound / 2, xyPosition);
            g2.glTexCoord2d(1, 1);
            g2.glVertex3d(xBound / 2, yBound / 2, xyPosition);
            g2.glTexCoord2d(0, 1);
            g2.glVertex3d(-xBound / 2, yBound / 2, xyPosition);
        g2.glEnd();
    }
    { // xz plane
        g2.glLoadName(XZ_PLANE_NAME);
        g2.glBegin(GL2.GL_QUADS);
            g2.glTexCoord2d(0, 0);
            g2.glVertex3d(-xBound / 2, xzPosition, -zBound / 2);
            g2.glTexCoord2d(1, 0);
            g2.glVertex3d(xBound / 2, xzPosition, -zBound / 2);
            g2.glTexCoord2d(1, 1);
            g2.glVertex3d(xBound / 2, xzPosition, zBound / 2);
            g2.glTexCoord2d(0, 1);
            g2.glVertex3d(-xBound / 2, xzPosition, yBound / 2);
        g2.glEnd();
    }
    { // yz plane
        g2.glLoadName(YZ_PLANE_NAME);
        g2.glBegin(GL2.GL_QUADS);
            g2.glTexCoord2d(0, 0);
            g2.glVertex3d(yzPosition, yBound / 2, zBound / 2);
            g2.glTexCoord2d(1, 0);
            g2.glVertex3d(yzPosition, yBound / 2, -zBound / 2);
            g2.glTexCoord2d(1, 1);
            g2.glVertex3d(yzPosition, -yBound / 2, -zBound / 2);
            g2.glTexCoord2d(0, 1);
            g2.glVertex3d(yzPosition, -yBound / 2, zBound / 2);
        g2.glEnd();
    }
} 
```

**UPD**

问题似乎不在于应用程序逻辑，而在于 jogl 或 opengl 驱动程序，因为我试图在另一台计算机（win 7 x64）上运行此代码并且一切正常。有属性 z 坐标存储在选择缓冲区中，我可以按它们排序以获得最近的对象。

当前问题在 win xp x86 上可重现。

# php - PHP，包括主目录的绝对路径

> ID：11961866
> 
> 赞同：1
> 
> 时间：2012-08-14T22:41:51.590
> 
> 标签：php

在 html 中，开头的反斜杠 (/) 告诉系统从主目录开始查找。例如，

```
<a href="/folder1/example.css">Link</a>
<img scr="/images/example.jpg">Image /> 
```

重复一遍，/ 告诉系统从主目录查找。

有没有办法在 PHP 中做同样的事情？

```
<?php include '/header.php'; ?> 
```

下面的php代码只会查找header.php当前目录下一个目录。如果我的问题不够清楚，请发表评论。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:44:23.273

`$_SERVER['DOCUMENT_ROOT']`很可能是指您尝试访问的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:47:58.333

~~如果您的意思是 Web 根目录中的“家”，那么 $_SERVER["DOCUMENT_ROOT"] 应该可以解决问题。~~

正如在其他地方指出的那样，这可能不会返回您期望的结果。下面的代码应该仍然有效。

很多人定义了一个 ABSPATH 常量。如果您的应用程序始终通过 index.php 进行路由，那么在 index.php 的顶部执行以下操作可能会更容易

```
define( 'ABSPATH', dirname(__FILE__) . '/' );

// this can then be called from any where
require_once(ABSPATH . "includes/header.php");

// or in your example
<img src="<?php echo ABSPATH; ?>images/example.jpg" /> 
```

# logging - Mountain Lion 中的“/var/log/secure.log”在哪里

> ID：11961867
> 
> 赞同：9
> 
> 时间：2012-08-14T22:41:53.273
> 
> 标签：logging, osx-mountain-lion

我曾经检查`/var/log/secure.log`过 ssh 连接尝试。但是自从升级到 Mountain Lion 之后，它就消失了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T08:18:01.307

感谢 Twitter 上的用户 @ben_fry，我们有了答案。简而言之，secure.log 身份验证事件已被纳入 asl (syslog)。Stack 不允许我发布多个链接，所以我想在这里发布的答案在我的博客上：

[http://leoofborg.tumblr.com/post/29470691922/hey-apple-wth-happened-to-secure-log-in-mountain](http://leoofborg.tumblr.com/post/29470691922/hey-apple-wth-happened-to-secure-log-in-mountain)

请注意，我没有将拒绝主机更改为使用 asl，所以我不知道这是否有效，但根据 twitter 上的人的说法，它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:11:39.430

这指向了解决方案：[https ://twitter.com/ben_fry/statuses/233594227802648577](https://twitter.com/ben_fry/statuses/233594227802648577)

或直接：[https ://discussions.apple.com/thread/4149679?start=0&tstart=0](https://discussions.apple.com/thread/4149679?start=0&tstart=0)

SSH 登录现在已登录`syslog`

# objective-c - NSTableView 列标题中的复选框

> ID：11961869
> 
> 赞同：4
> 
> 时间：2012-08-14T22:42:12.560
> 
> 标签：objective-c, cocoa, nstableview

我需要在 NSTableView 列标题中添加一个复选框。我可以在上列的所有行中添加复选框。但我需要在列标题级别。我需要执行全选功能，但无法在表头级别添加一个复选框。任何示例代码或想法都会有所帮助。

谢谢， 苏拉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T06:09:36.293

创建子类`NSButtonCell`

```
@interface CheckboxHeaderCell : NSButtonCell {
    NSButtonCell *cellCheckBox;
    NSColor *bkColor;
}

-(void)setTitle:(NSString *)title;
-(void)setBkColor:(NSColor *)color;
-(BOOL)getState;
-(void)onClick;

@end  

@implementation CheckboxHeaderCell

- (id)init
{
    if (self = [super init])
    {
        bkColor = nil;

        cellCheckBox = [[ NSButtonCell alloc] init];
        [cellCheckBox setTitle:@""];
        [cellCheckBox setButtonType:NSSwitchButton];
        [cellCheckBox setBordered:NO];
        [cellCheckBox setImagePosition:NSImageRight];
        [cellCheckBox setAlignment:NSLeftTextAlignment];
        [cellCheckBox setObjectValue:[NSNumber numberWithInt:0]];

        [cellCheckBox setControlSize:NSSmallControlSize];
        [cellCheckBox setFont:[NSFont systemFontOfSize:[NSFont
                                                        smallSystemFontSize]]];
    }
    return self;
}

- (void)dealloc
{
    [cellCheckBox release];
    [bkColor release];
    [super dealloc];
}

-(void)setTitle:(NSString *)title
{
    [cellCheckBox setTitle:title];
}

-(void)setBkColor:(NSColor *)color
{
    [color retain];
    [bkColor release];
    bkColor = color;
}

-(BOOL)getState
{
    return [[cellCheckBox objectValue] boolValue];
}

-(void)onClick
{
    BOOL state = ![[cellCheckBox objectValue] boolValue];
    [cellCheckBox setObjectValue:[NSNumber numberWithBool:state]];
}

- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    if (bkColor != nil)
        [cellCheckBox setBackgroundColor:bkColor];

    [cellCheckBox drawWithFrame:cellFrame inView:controlView] ;
}

@end 
```

如何使用：

```
CheckboxHeaderCell *mHeaderCell = [[CheckboxHeaderCell alloc] init];
    NSTableColumn *checkBoxColumn = [mOutlineView tableColumnWithIdentifier:@"state"];
    [checkBoxColumn setHeaderCell:mHeaderCell];  

- (void)tableView: (NSTableView *)tableView didClickTableColumn:(NSTableColumn *)tableColumn
{
    NSLog(@"didClickTableColumn");
    CheckboxHeaderCell *headerCell = [tableColumn headerCell];
    [headerCell onClick];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-30T14:38:44.097

使用自定义`NSCell`实例不起作用，原因很简单，`NSTableHeaderView`即协调`NSHeaderCell`实例处理所有鼠标事件处理。因此，表格标题中的单元格按钮永远不会响应鼠标事件。

解决方案是将所需的`NSControl`实例添加到自定义`NSTableHeaderView`. 自定义子类可以在 IB 的表视图上设置。控件被添加到已识别的表列中，如下所示：

```
[(BPTableHeaderView *)self.tableView.headerView addSubview:self.passwordTableHeaderButton
                                          columnIdentifier:@"password"
                                                 alignment:NSLayoutAttributeRight]; 
```

任何`NSView`实例都可以添加到列标题中，但添加`NSControl`实例可能是最常见的。

`NSTableHeaderView`子类。

```
@interface BPTableHeaderView : NSTableHeaderView

- (void)addSubview:(NSView *)view columnIdentifier:(NSString *)identifier alignment:(NSLayoutAttribute)alignment;

@end

@interface BPTableHeaderView()

// collections
@property (strong) NSMutableDictionary<NSString *, NSDictionary *> *store;

// primitives
@property (assign, nonatomic) BOOL subviewsVisible;

@end

@implementation BPTableHeaderView

- (id)initWithFrame:(NSRect)frameRect
{
    self = [super initWithFrame:frameRect];
    if (self) {
        [self commonInit];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
         [self commonInit];
    }
    return self;
}

- (void)commonInit
{
    _subviewsVisible = YES;
    _store = [NSMutableDictionary new];
}

#pragma mark -
#pragma mark Accessors

- (void)setSubviewsVisible:(BOOL)subviewsVisible
{
    if (_subviewsVisible == subviewsVisible) return;

    _subviewsVisible = subviewsVisible;

    for (NSString *identifier in self.store.allKeys) {
        NSDictionary *info = self.store[identifier];
        NSView *view = info[@"view"];
        view.hidden = !_subviewsVisible;
    }
}

#pragma mark -
#pragma mark Drawing

- (void)drawRect:(NSRect)dirtyRect {

    [super drawRect:dirtyRect];

    if (self.draggedColumn != -1 || self.resizedColumn != -1) {
        [self layoutSubviews];
    }
}

#pragma mark -
#pragma mark View management

- (void)addSubview:(NSView *)view columnIdentifier:(NSString *)identifier alignment:(NSLayoutAttribute)alignment
{
    self.store[identifier] = @{@"view" : view, @"alignment" : @(alignment)};
    [self addSubview:view];
    self.needsLayout = YES;
}

#pragma mark -
#pragma mark Layout

- (void)layout
{
    [super layout];
    [self layoutSubviews];
}

- (void)layoutSubviews
{
    for (NSString *identifier in self.store.allKeys)
    {
        // info
        NSDictionary *info = self.store[identifier];
        NSView *view = info[@"view"];
        NSLayoutAttribute alignment = [info[@"alignment"] integerValue];

        // views and cells
        NSTableColumn *column = [self.tableView tableColumnWithIdentifier:identifier];
        NSTableHeaderCell *headerCell = column.headerCell;
        NSInteger idx = [self.tableView.tableColumns indexOfObject:column];
        if (idx == NSNotFound) continue;

        // rects
        NSRect headerRect = [self headerRectOfColumn:idx];
        NSRect sortIndicatorRect = NSZeroRect;
        if (column.sortDescriptorPrototype) {
            sortIndicatorRect = [headerCell sortIndicatorRectForBounds:headerRect];
        }

        // position view
        NSPoint viewOrigin = NSMakePoint(0, 0);
        CGFloat y = (headerRect.size.height - view.frame.size.height)/2;
        CGFloat xDelta = 3;
        if (alignment == NSLayoutAttributeLeft) {
            viewOrigin = NSMakePoint(headerRect.origin.x + xDelta, y);
        }
        else {
            viewOrigin = NSMakePoint(headerRect.origin.x + headerRect.size.width - view.frame.size.width - sortIndicatorRect.size.width - 5, y);
        }
        [view setFrameOrigin:viewOrigin];
    }

}
@end 
```

# java - GWT：将 JSONValue 转换为 Java POJO 树

> ID：11961870
> 
> 赞同：0
> 
> 时间：2012-08-14T22:42:16.613
> 
> 标签：java, json, gwt

GWT 提供了许多覆盖类型作为包装器来访问 JavaScript 环境中的复杂 JSON 结构，例如[JSONValue](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/json/client/JSONValue.html)、[JSONArray](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/json/client/JSONArray.html)、[JSONNumber](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/json/client/JSONNumber.html)等。

但是，这些包装对象不能通过 GWT 的 RPC 机制发送回服务器，也不能使用 Java 序列化或其他序列化框架进行序列化，因为它们仅在客户端工作（作为覆盖类型）。

是否有可用的库/框架，可以将通用 JSONValues 树（其结构/类型未知）转换为 serializalbe Java POJO 对象树，例如：

```
class JJsonNumber implements Serializable, JJsonItem {
    double numberValue;
    ....
}

class JJsonObject implements Serializable, JJsonItem {
    Map<String, JJsonItem> properties;
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:04:56.943

Java 中 JSON 的参考实现应该可以解决问题！（链接自 JSON.org 网站）

[https://github.com/douglascrockford/JSON-java](https://github.com/douglascrockford/JSON-java)

例如：

```
JSONObject obj = new JSONObject(jsonString); 
```

见[JSONObject.java](https://github.com/douglascrockford/JSON-java/blob/master/JSONObject.java)

然而，为了让这个 JSON 参考实现在 GWT 环境中运行，需要在库中进行一些手动清理工作（删除对 InputStream 等的引用）。

# wordpress - 在不同的div中获取wordpress帖子，但要一个接一个

> ID：11961871
> 
> 赞同：0
> 
> 时间：2012-08-14T22:42:20.547
> 
> 标签：wordpress

我的 wordpress 博客中有 10 篇文章，我想要类似的内容： div class="something1" post1 post5 post9 /div

div class="something2" post2 post6 post10 /div div class="something3" post3 post7 post4 post8 /div

我不知道，但我必须它，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:27:15.987

在您的循环中，您需要使用 php.ini 增加您的 div。我没有对此进行测试，但这应该可以工作：

```
<div class="yourClass">
<?php
    $myCustomClass = 0;
    $args = array
    (
        'posts_per_page' => 4,
        'orderby'     => 'name',
        'order'       => 'DEC',
        'post_type'   => 'post',
        'post_status' => 'publish'
    );
    $loop = new WP_Query( $args );

    while ( $loop->have_posts() ) : $loop->the_post(); ?>
        <?php $myCustomClass++ ?>

            <div class="myCustomClass-<?php echo $myCustomClass;?>">

                <h2>
                    <a href="<?php the_permalink();?>">
                        <?php the_title(); ?>
                    </a>
                </h2>

                <div class="my-post-content">

                    <?php the_content(); ?>

                </div>

            </div>
<? endwhile; ?>
</div> 
```

# php - 如何加速 Symfony 2 功能测试套件？

> ID：11961873
> 
> 赞同：-1
> 
> 时间：2012-08-14T22:42:29.500
> 
> 标签：php, symfony, phpunit

我的包中的每个控制器都有一个非常简单的 CRUD 功能测试套件。我有两种方法，setUpBeforeClass，我创建一个新数据库，创建一个新模式，然后用固定装置填充模式，以及 setUpAfterClass，我删除数据库。

每个控制器测试大约需要 1:30 分钟。关于如何加快速度的任何想法？我不能使用 SQLite，因为我正在使用它不支持的复杂关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:27:39.550

从我所见，您的捆绑包的 Tests 文件夹中只有一堆 YourEntityControllerTest.php，每个测试文件都有一对 setUpBeforeClass/setUpAfterClass 方法，设置然后销毁数据库。对？

您可以通过创建一个实际的测试套件来显着加快这一速度，请参阅：[http ://www.phpunit.de/manual/3.2/en/organizing-test-suites.html#organizing-test-suites.suite-level-setup](http://www.phpunit.de/manual/3.2/en/organizing-test-suites.html#organizing-test-suites.suite-level-setup)

# javascript - 有什么方法可以单独在 html 和 javascript 中实现持久的、可共享的存储？

> ID：11961874
> 
> 赞同：9
> 
> 时间：2012-08-14T22:42:30.233
> 
> 标签：javascript, json, html, local-storage, data-storage

**编辑：** 让我尝试用一​​个用例来澄清。我希望能够在不运行我自己的服务器的情况下在 html/javascript 页面上运行一个简单的聊天框。我可以很好地编写聊天应用程序的 javascript，但没有解决方案允许我存储数据以使所有浏览用户都可以看到聊天消息。所以我的应用程序会接受数据，将其发布到第三方数据存储（理想情况下只是 json 格式），并定期从数据存储中轮询更新。这不是我会使用这种 json 存储服务/json 存储引擎的唯一用途，但它是最清楚的示例。

* * *

随着 html5 走到最前沿，我正在稍微远离服务器端编程，并探索我可以用 html 和 javascript 做多少，就我以前必须用 html/php/sql 实现的功能而言服务器堆栈。例如，在这个新生的 html5 网站上： http: [//tersh.royronalds.com/](http://tersh.royronalds.com/)我正在重用 flickr 来托管图片，而 tumblr 来托管博客文章。然而，作为一个例子，我现在发现自己想要编写一个动态的待办事项列表，其中可以添加项目并将其标记为已完成，并在此期间公开显示。另一个例子可能是一个简单的、持久的聊天框。

例如，我不想使用 ajax 推送布尔数据和有关聊天消息的文本以及对 php 脚本的更改，然后将数据存储在 mysql 数据库中，我更愿意将数据推送到第三方或从第三方拉取数据store 提供与 localstorage API 相同类型的功能，但用于 json。

所以我想解决这个问题，使用一些带有公共 js API 的存储方法，例如一些存储 json 的方法，或者任何真正支持字符串和数字的最终格式，并且可以存储和检索，类似于 localStorage，除了持久和可共享。

这样的事情有哪些公共技术/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:09:49.183

即使它们不是很好或发展良好，也很少有选择。

首先，与服务器端数据库最密切相关的是 Web SQL 数据库。这不是 W3C 推荐的功能（它不使用 SQLite 作为后端），但是，Chrome、Opera、Safari 和 Firefox（带有附加组件）目前支持它。

[规格](http://www.w3.org/TR/webdatabase/)

其次，我们有索引数据库 API。这些仅受 Chrome 和 Firefox 支持。（还有 IE 10，但谁在乎呢？）它与普通数据库有更大的不同，但它是 W3C 推荐的方法。

[规格](http://www.w3.org/TR/IndexedDB/)

第三，我们有本地存储。这不是一个类似数据库的系统，它更类似于 cookie。但是，这些本地存储项比 cookie 更好，因为它们每个都是键值对（并且使用起来非常直观，我可能会补充）。例如：

```
// Store value on the browser permanently
localStorage.setItem('key', 'value');
// Retrieve value
localStorage.getItem('key');
//Remove value
localStorage.removeItem('key');
//This is just a small selection of actions you can perform 
```

[规范](http://www.w3.org/TR/webstorage/)
[有用的资源](http://davidwalsh.name/html5-storage)

第四，您或许应该快速浏览一下离线 HTML。这是一个系统，您站点中的选择文件由浏览器下载，并且可以离线使用。我认为这对您没有用，但请检查一下。

[规范](http://www.w3.org/TR/html5/offline.html)
[帮助指南](http://diveintohtml5.info/offline.html)

正如你可能会说的，我在最后两个方面的经验比第一个要多。无论如何，我希望我有所帮助。

# javascript - .delay() 不适用于 slideUp()

> ID：11961876
> 
> 赞同：0
> 
> 时间：2012-08-14T22:43:08.170
> 
> 标签：javascript, jquery, hover, delay, slideup

正如标题所说，由于某种原因，一个盒子在滑回之前并没有延迟。现在，如果您将鼠标悬停在名为“#box”且类为“.boxset”的 div 上，则会出现 div“#slidebox”。#slidebox 也有“.boxset”类。如果您将鼠标从这两个 div 上移开，#slidebox 将向上滑动。在这方面，它工作得很好。

我希望在它滑回之前有一个延迟，但由于某种原因 delay() 不起作用。

关键代码行在 hover() 下的两个函数中的第二个

IE：

```
$('#slidebox').stop().delay(600).slideUp({ 
```

有人能看出有什么不对吗？

非常感谢您的帮助！

jQuery

```
$('#slidebox').hide();
$('.boxset').hover(
            function() {  
    $('#slidebox').stop().slideDown(
        {
        duration:600, 
        easing: "swing",
        queue: false,
        complete: function() {
        $('#slidebox').removeAttr('style');}  //End complete   
        } //End object literals
        ); // End slideDown
                    } // End first function
    ,
    function() {
        $('#slidebox').stop().delay(600).slideUp({   
        duration:600, 
        easing: "swing",
        queue: false,
        } // End object literals
                    ); //End slideUp
                    } // End second function   

); // End Hover 
```

的HTML

```
<div id="box" class="boxset"></div>
<div id="slidebox" class="boxset"></div> 
```

CSS

```
#box {
    width: 100%;
    height: 35px;
    background-color: orange;
    drop-shadow: 2px 2px 1px rgba(0,0,0,.25);
    border-radius: 10px 0px 10px 0px;
    color: white;
    diplay:block;
    text-align: right;

}

#slidebox { 
    width:100%;
    height: 100px;
    background-color: rgba(23,34,1, .1);
    border-radius: 10px 10px 0px 10px;
    display: block;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:52:42.727

从 JQuery 文档：

> queue：一个布尔值，指示是否将动画放入效果队列。如果为 false，动画将立即开始。从 jQuery 1.7 开始， queue 选项也可以接受一个字符串，在这种情况下，动画被添加到由该字符串表示的队列中。

尝试在悬停时为您的 handlerOut 函数设置 queue:true

更改 Div 元素的嵌套并从内部 div 中删除“boxset”类，这样您的事件处理程序就不会多次触发。这应该可以解决不一致的行为。

```
<div id="box" class="boxset">
<div id="slidebox"></div>
​&lt;/div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:52:17.273

我认为在这种情况下，您想使用 setTimeout。

```
var timeOut;
$('.boxset').hover(
    function() {
        clearTimeout(timeOut);
        $('#slidebox').stop().slideDown({
            duration:600, 
            easing: "swing",
            queue: false,
            complete: function() {
                $('#slidebox').removeAttr('style');}  //End complete   
        });
    },
    function() {
        $('#slidebox').stop();
        timeOut=setTimeout(function(){
            $('#slidebox').slideUp({  
                duration:600, 
                easing: "swing",
                queue: false,
            });
        }, 600);
    } 
```

[http://jsfiddle.net/HDLCE/1/](http://jsfiddle.net/HDLCE/1/)

# html - Web SQL SECURITY_ERR：仅 Android 上的 DOM 异常 18

> ID：11961879
> 
> 赞同：0
> 
> 时间：2012-08-14T22:43:14.260
> 
> 标签：html, web-sql, offlineapps, offline-browsing

此错误不会在其他任何地方发生。我什至可以毫无问题地打开一个版本数据库（然后是另一个虚构的测试数据库）。但是当我打开主数据库时，我得到了错误。

我一直在使用的过程是从版本数据库中获取版本，如果失败，请尝试高于和低于该版本的一系列版本。我这样做是因为如果在我的打开过程中某处发生崩溃，版本号可能会变得混乱，或者数据库可能会在特定版本上进入错误状态（我认为这就是正在发生的事情）。

```
var myDB =openDatabase("Todo", "1.0", "Todo manager", dbSize); // gives SECURITY_ERR: DOM exception 18 on Android only 
```

我认为问题是由于以下原因之一： 1\. 我第一次使用错误的版本，如果你第一次错过它，android 总是失败。2\. 即使我在设置中清除历史记录和缓存（只有我能找到清除任何内容的地方）它实际上并没有删除数据库。3.也许真的有某种类型的安全错误？！

而已。我没有给你的代码。我的代码是一个 3000 行的 js 文件，它将不受支持的异构离线数据库的大杂烩变成了一个单一的东西。我只是在寻找一些关于可能出现问题的一般想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:33:53.670

我在我们的 android 表上使用了一个名为 lionchair 的 webSql 包装器，当我们将平板电脑从 android 3 升级到 android 4 时，我们的应用程序停止在 android 4 上运行，出现您描述的相同错误并且在同一行（打开数据库）。然而，在我们的 android 3 平板电脑上，它仍然按预期工作。

我发现的解决方案真的很愚蠢，但是在关闭我们最近升级的平板电脑并重新启动后，websql 再次工作。

# achartengine - 如何将achartEngine 连接到数据库？

> ID：11961882
> 
> 赞同：1
> 
> 时间：2012-08-14T22:43:30.670
> 
> 标签：achartengine

我正在使用 achartEngine 在我的 android 应用程序中绘制图形。我在代码中设置数据。现在我需要从 mySQL 数据库中获取数据并将其显示在我的图形中。我正在使用 PHP Web 服务和 JSOn 解析器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:15:13.110

您可以编写一些桥接代码，这些代码将从您的数据库中获取数据并填充 AChartEngine 数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:05:49.870

好吧，我所做的是；

```
// to display the values for a single category (ie. sales per month)
//put the data into an array
int[] y = new int[12];
for (int i = 0; i < 12; i++){
    y[i] = Integer.valueOf(sales);
}
//Create the Category series (ie. one value (sales) per month)          
CategorySeries series = new CategorySeries("");
for (int i = 0; i < y.length; i++) {
  series.add( y[i]);
} 
```

现在实例化数据集

```
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
dataset.addSeries(series.toXYSeries()); 
```

使用渲染创建所需的图形类型

```
// This is how the "Graph" itself will look like
        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
        mRenderer.setChartTitleTextSize(15);
        mRenderer.setLabelsColor(Color.BLUE);
        mRenderer.setChartTitle("Sales per month");
        mRenderer.setMargins(new int[]{30, 30, 20, 20});
        mRenderer.setOrientation(Orientation.HORIZONTAL);
etc.... 
```

最后制作并显示图表

```
//make
mChartView1 = ChartFactory.getBarChartView(this, dataset,mRenderer, null);

//show
RelativeLayout layout = (RelativeLayout)step.findViewById(R.id.barChart);
layout.addView(mChartView1); 
```

如果您想制作多个类别（即某些年份的每月销售额，请执行此操作；

```
// to display the values for a several categories (ie. sales per month per year)
//put the data into an array

int[] y = new int[12];

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
for (int year = 0; year < numberofYears; year++){
    CategorySeries series = new CategorySeries("");
   //get the data for the specific year then 
   //iterate through it values and add the data to the series
   double[] v = values.get(year);
   for (int i = 0; i < v.length; i++){
      series.add(v[i]);
   }
   dataset.addSeries(series.toXYSeries());
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:58:47.323

我可以使用以下代码获取数据并将其显示在列表视图中：{ `

公共类 Linedbconn 扩展 Activity {

```
String id,abscisses,ordonnees; 
```

// 进度对话框 private ProgressDialog pDialog;

```
// JSON parser class
JSONParser jsonParser = new JSONParser();

// single product url
private static final String url_line_graph = "http://api.androidhive.info/application_connect/line_graph.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_LINE = "line";
private static final String TAG_ID = "id";
private static final String TAG_ABSCISSES = "abscisses";
private static final String TAG_ORDONNEES = "ordonnees";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_linedbconn);

    // getting product details from intent
    Intent intent = getIntent();

    // getting product id (id) from intent
    id = intent.getStringExtra(TAG_ID);
    abscisses=intent.getStringExtra(TAG_ABSCISSES);
    ordonnees=intent.getStringExtra(TAG_ORDONNEES);

    // Getting complete product details in background thread
    new GetLineDetails().execute();

}

/**
 * Background Async Task to Get complete line details
 * */
class GetLineDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Linedbconn.this);
        pDialog.setMessage("Loading information. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting information in background thread
     * */
    protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("id", id));

                    // getting line details by making HTTP request
                    // Note that line details url will use GET request
                    JSONObject json = jsonParser.makeHttpRequest(
                            url_line_graph, "GET", params);

                    // check your log for json response
                    Log.d("Single Line Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received line details
                        JSONArray productObj = json
                                .getJSONArray(TAG_LINE); // JSON Array

                        // get first product object from JSON Array
                        JSONObject product = productObj.getJSONObject(0);

                        // line with this id found
                        // Edit Text
                        //txtName = (EditText) findViewById(R.id.inputName);
                        //txtPrice = (EditText) findViewById(R.id.inputPrice);
                        //txtDesc = (EditText) findViewById(R.id.inputDesc);

                        // display product data in EditText
                        //txtName.setText(product.getString(TAG_NAME));
                        //txtPrice.setText(product.getString(TAG_PRICE));
                        //txtDesc.setText(product.getString(TAG_DESCRIPTION));

                        abscisses=(String)product.getString(TAG_ABSCISSES);
                        ordonnees=(String)product.getString(TAG_ORDONNEES);

                    }else{
                        // product with id not found
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();
    }
} 
```

}

但是当我想将这些值放在一个字符串表中以在我的图表中使用它们时，它不起作用`

# python - 在 Python 中求解平面方程（如在 Matlab 中）

> ID：11961887
> 
> 赞同：0
> 
> 时间：2012-08-14T22:44:45.383
> 
> 标签：python, matlab, equation, solver, plane

我有一个数据集，我试图从中得到一个平面的方程。即：a*x + b*y + c = z 在我的例子中，dT = x，dTa = y，Constant = c，dV = z。

我可以在 Matlab 中很容易地做到这一点，代码：

```
dT = [8.5; 3.5; .4; 12.9]

dT =

    8.5000
    3.5000
    0.4000
   12.9000

dTa = [8.5; 18; 22; 34.9]

dTa =

    8.5000
   18.0000
   22.0000
   34.9000

dV = [3; 1; .5; 3]

dV =

    3.0000
    1.0000
    0.5000
    3.0000

Constant = ones(size(dT))

Constant =

     1
     1
     1
     1

coefficients = [dT dTa Constant]\dV

coefficients =

    0.2535
   -0.0392
    1.0895 
```

所以，这里，系数 = (a, b, c)。

在 Python 中有没有等效的方法来做到这一点？我一直在尝试使用 numpy 模块（numpy.linalg），但效果不佳。一方面，矩阵必须是正方形的，即便如此，它也不能给出很好的答案。例如：

错误：

```
>>> dT
[8.5, 3.5, 0.4, 12.9]
>>> dTa
[8.5, 18, 22, 34.9]
>>> dV
[3, 1, 0.5, 3]
>>> Constant
array([ 1.,  1.,  1.,  1.])
>>> numpy.linalg.solve([dT, dTa, Constant], dV)

Traceback (most recent call last):
  File "<pyshell#45>", line 1, in <module>
    numpy.linalg.solve([dT, dTa, Constant], dV)
  File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 312, in solve
    _assertSquareness(a)
  File "C:\Python27\lib\site-packages\numpy\linalg\linalg.py", line 160, in _assertSquareness
    raise LinAlgError, 'Array must be square'
LinAlgError: Array must be square 
```

使用方阵：

```
>>> dT
array([  8.5,   3.5,  12.9])
>>> dTa
array([  8.5,  18\. ,  34.9])
>>> dV
array([3, 1, 3])
>>> Constant
array([ 1.,  1.,  1.])
>>> numpy.linalg.solve([dT, dTa, Constant], dV)
array([ 2.1372267 ,  2.79746835, -1.93469505]) 
```

这些甚至不接近我以前得到的值！

有什么想法吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:33:59.830

在第一个示例中，您需要使用`numpy.linalg.lstsq`. 无论哪种方式，您似乎都混淆了矩阵的行和列。使用类似的东西修复它`numpy.linalg.solve(zip(dT, dTa, Constant), dV)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:47:56.117

所以，我找到了这张照片

![](../Images/ee0207f8408cbfef16060388e2ce95b3.png)

并对其进行调整以包含一个常数。这是我解决的代码：

```
 X = 0
    XX = 0
    XY = 0
    XZ = 0

    Y = 0
    YY = 0
    YZ = 0

    Z = 0

    for j in range(0, len(dTemp)):
        X = X + dTemp[j]
        XX = XX + (dTemp[j] * dTemp[j])
        XY = XY + (dTemp[j] * dTempA[j])
        XZ = XZ + (dTemp[j] * Applied[j])

        Y = Y + dTempA[j]
        YY = YY + (dTempA[j] * dTempA[j])
        YZ = YZ + (dTempA[j] * Applied[j])

        Z = Z + Applied[j]

    lhs = numpy.array([[XX, XY, X], [XY, YY, Y], [X, Y, 1]]) 
    rhs = numpy.array([XZ,  YZ, Z])

    coefficients = numpy.linalg (lhs, rhs)

    a = coefficients[0]
    b = coefficients[1]
    c = coefficients[2] 
```

我认为那成功了！仍然，值有点偏，但也许那是因为 Matlab 使用了不同的算法？

# c# - 错误 7 运算符“==”不能应用于“对象”和“布尔”类型的操作数

> ID：11961888
> 
> 赞同：7
> 
> 时间：2012-08-14T22:44:52.210
> 
> 标签：c#, asp.net

我正在将大量代码从 VB.net 转换为 c#，这是我认为在转换过程中出现的另一个问题。

```
if (sRow.Cells[1].Value == true)
    Worked = "X";
else if (sRow.Cells[2].Value == true)
    Vacation = "X";
else if (sRow.Cells[3].Value == true)
    Sick = "X";
else if (sRow.Cells[4].Value == true)
    Holiday = "X"; 
```

在每个 if / else / else if 行上，它都会给我这个错误。我敢肯定我错过了一些会迫使我做傻事的东西......

> 错误 7 运算符“==”不能应用于“对象”和“布尔”类型的操作数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T22:47:07.530

你确定这些值是 type`bool`吗？

如果是这样，只需显式转换：

```
if ((bool)sRow.Cells[1].Value)
{
    Worked = "X";
}
else if ((bool)sRow.Cells[2].Value)
{
    Vacation = "X";
}
else if (sRow.Cells[3].Value)
{
    Sick = "X";
}
else if ((bool)sRow.Cells[4].Value)
{
    Holiday = "X";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T22:50:58.847

我假设这是一个 DataRow 的单元格，其值为 type `object`。您不能使用`==`运算符将​​对象与布尔值进行比较。

所以你应该使用强类型[`Field`](http://msdn.microsoft.com/en-us/library/bb301394)扩展`DataRow`：

```
if(sRow.Field<bool>(1))
    // ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-29T15:15:43.060

我不是`if (x == true)`一般的粉丝，但在认知负荷方面使用`if ((bool)sRow.Cells[1].Value)`or`if (Convert.ToBoolean(sRow.Cells[1].Value))`似乎相当不透明。

这是一个功能性的替代方案：

```
if (true.Equals(sRow.Cells[1].Value))
    Worked = "X";
else if (true.Equals(sRow.Cells[2].Value))
    Vacation = "X";
else if (true.Equals(sRow.Cells[3].Value))
    Sick = "X";
else if (true.Equals(sRow.Cells[4].Value))
    Holiday = "X"; 
```

*编辑*：反转比较以支持空值。

显然存在装箱成本，但如果代码不是特别迭代，它就不会引人注目。

有些人也被尤达的条件推迟了。

但是，DBNull 的转换/转换失败，而这种方法有效：

```
object x = DBNull.Value;
if (true.Equals(x)); // False
if (Convert.ToBoolean(x)); // InvalidCastException: Object cannot be cast from DBNull to other types.
if ((bool)x); // InvalidCastException: Specified cast is not valid. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T22:46:25.120

> 错误 7 运算符“==”不能应用于“对象”和“布尔”类型的操作数

该错误告诉您：

> 运算符“==”不能应用于“object”和“bool”类型的操作数

`Value`是 type `object`，所以如果你想以这种方式比较它们，你将需要转换它。

因此，请确保`Value`' 的基础类型实际上是布尔值，然后...将显式比较转储为真或假。这是有争议的和风格的，但严重多余和不必要的。你会说*“如果真等于真那么……”吗？* 不，可能（希望）不是。

# c++ - Qt 将代码从 Linux 迁移到 Windows

> ID：11961891
> 
> 赞同：2
> 
> 时间：2012-08-14T22:45:09.580
> 
> 标签：c++, windows, linux, qt, porting

我为我的项目使用[id3Tag](http://id3lib.sourceforge.net)库。我在 Linux 上成功设置了头文件和库，并且编译没有问题，但是将代码移动到 Windows 时遇到了一些麻烦。（我才开始学习Windows，对于我可能的无知，请提前道歉）。我的环境是 Qt Creator

问题出在 id3 标记库的标头上（Linux 上没有此类问题！）我的 .pro 文件是： ![在此处输入图像描述](../Images/b30b18dad963b9520e3cda3646058f64.png)

我的错误是： ![在此处输入图像描述](../Images/79eb97f55380b29f5b242ba043e5f6bf.png)

如果我不包含该标头“id3/tag.h”，它会完美编译。可能是什么原因？实际上我还没有为 Windows 编程过。
我的步骤是：
1\. 我为 Linux
编译了部分代码 2\. 将在 Linux 下成功编译到 Windows 的源代码复制文件夹（标题位于当前文件夹中）。
3\. 编译后的代码没有那个头文件（“id3/tag.h”）。
4\. 添加了那个头文件 ("id3/tag.h")
5\. 从编译器那里得到了大量的抱怨

提前感谢，任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:12:31.163

您应该更仔细地阅读编译器的消息。它说要阅读 win32.readme.first.txt，所以我建议您[阅读它](http://id3lib.cvs.sourceforge.net/viewvc/id3lib/id3lib-stable/libprj/win32.readme.first.txt?revision=1.4&view=markup)并将构建环境设置为您想要链接库的方式。

由于没有设置 ID3LIB_LINKOPTION 导致编译失败，导致头部没有定义 ID3_CPP_EXPORT。但是，这是初始化 ID3_Frame 所必需的。有关详细信息，请参阅 id3\globals.h。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:09:12.630

您的 .pro 文件上的分隔符（ `\`Windows 上的“ ”和 Linux 上的“ ”）可能存在问题。`/`所以在你的项目文件中试试这个：

```
#TEMPLATE, CONFIG, HEADERS, ...

win32 { # For Windows
    # Leave an empty line because of the backslash at the end of the variable
    SEPARATOR = \\

}

linux-g++ { # For Linux
    SEPARATOR = /
}

ID3_FOLDER = .$${SEPARATOR}idlib$${SEPARATOR}id3lib-3.8.3$${SEPARATOR}

LIBS += -id3 -L$${ID3_FOLDER}src$${SEPARATOR}.libs

INCLUDEPATH += $${ID3_FOLDER}include $${ID3_FOLDER}src$${SEPARATOR}.libs 
```

**编辑：**这是关于你图书馆的旗帜。如果包含它的文件在 Windows 上称为 myLib.dll（或在 Linux 上称为 myLib.so），则应编写`-lmyLib`. 在您的项目文件中，我没有看到类似`-lsthg`but的内容`-id3`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:44:24.357

感谢您的回复！我根据需要标记了其中一个答案，并添加了这个答案以澄清我到底遇到了什么样的问题。

我为解决问题所做的一切：

我在 main.cpp 中定义（包含所有程序的源代码的主文件）

```
 #define ID3LIB_LINKOPTION 3
    #define ID3_CPP_EXPORT 1 
```

在那之后，我遇到了近 42 个错误，但幸运的是，它们是新的。 ![在此处输入图像描述](../Images/6522d31ee939422647a5cac26b70ce93.png)

我仅凭直觉（也许）才发现出了什么问题，因为互联网上充斥着此类类型错误，但它们并没有说明问题的原因。

我在 main.cpp 中定义了头文件 windows.h（但它必须在任何其他头文件之前，否则会出现无数错误，谁能想到！）

因此，您的 main.cpp 文件的第一行应如下所示：

```
 #define ID3LIB_LINKOPTION 3
    #define ID3_CPP_EXPORT 1
    #include <windows.h>
    #include "id3/tag.h" 
```

它工作正常。希望这会在某一天对某人有所帮助。

**不要尝试使用 QtCREATOR 的那个库！！！！只有 VS studio c++，我花了很多时间尝试用 Mingw 编译器编译它，但是用 Mingw 编译的源代码无法与 microsoft visual 生成的库链接工作室因为不同的 ABI**

# javascript - 为什么我的 JavaScript / JSON 脚本无法在 Internet Explorer 中运行？

> ID：11961892
> 
> 赞同：-1
> 
> 时间：2012-08-14T22:45:22.730
> 
> 标签：javascript, html, json, internet-explorer

我有这个代码，它根据输入到我的联系表格中的邮政编码，用用户的城市和州预先填写我的网站。

它在 Google Chrome 和 Firefox 中完美运行，但在 IE 中无法运行。

有谁知道为什么，如果是的话，你能为我修复代码吗？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<!--Realtime City/State Update From Zip Code Post-in-->
<script>
    $(document).ready(function () {
        var zip = $("#zip").val();
        $.getJSON('http://zip.elevenbasetwo.com/v2/US/' + zip, function (json) {
            $('#city').val(json.city);
        });
        $.getJSON('http://zip.elevenbasetwo.com?zip=' + zip, function (json) {
            $('#state').val(json.state);
        });
    });
</script>
<!--On Edit/Keyup City/State Update-->
<script>
    $(document).on("keyup", "#zip", function () {
        var zip = this.value;
        $.getJSON('http://zip.elevenbasetwo.com/v2/US/' + zip, function (json) {
            $('#city').val(json.city);
        });
        $.getJSON('http://zip.elevenbasetwo.com?zip=' + zip, function (json) {
            $('#state').val(json.state);
        });
    });
</script> 
```

**编辑**
我的意思`not working`是，在 Google Chrome 和 Firefox 上，我的联系表单中的城市和州字段将根据输入的邮政编码自动预先填写。

但是在 IE（我的版本 9）中，City & State 字段并没有像应有的那样预先填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:44:46.530

### Update

There's nothing wrong with the json. This is a cross-domain request issue with IE.

The general solution with jQuery would be to add `jQuery.support.cors = true;` at the top of your code. But this may not work.

IE8+ has [window.XDomainRequest](http://msdn.microsoft.com/en-us/library/dd573303(v=vs.85).aspx), which allows you to make cross-domain request.

Here's a jQuery plugin for it but I'm not sure how to make it work.

[ajaxHooks xdr](https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js)

Alternatively, you could get the information from a proxy on your server or using flash.

More information

*   [Cross-Site XmlHttp (XDomainRequest)](https://stackoverflow.com/questions/7143847/cross-site-xmlhttp-xdomainrequest)
*   [jQuery Call to WebService returns "No Transport" error](https://stackoverflow.com/questions/5241088/jquery-call-to-webservice-returns-no-transport-error)

# f# - 如何尝试在无限有序序列中查找元素？

> ID：11961896
> 
> 赞同：3
> 
> 时间：2012-08-14T22:46:08.050
> 
> 标签：f#, sequence

如果我有一个无限序列，我不能使用正常的`Seq.tryFind`.

但是，如果序列是有序的，这意味着当我检测到序列中没有其他元素可以满足我的条件时，可以取消搜索。

有没有一种优雅的方式来表达这种搜索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T23:04:26.270

如果您只想使用标准功能-这样的东西会起作用

```
let evens =  Seq.initInfinite ((*)2)
let has v = 
    Seq.tryPick (fun x ->
        if x = v then Some (Some v)
        elif x > v then Some None
        else None)
    >> Option.bind id
has 40 evens // Some 40
has 41 evens // None 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T23:19:41.680

这是另一种可能的解决方案。它与@desco 发布的内容非常相似，但它使用的是序列表达式而不是`Seq.tryPick`并且它也不需要嵌套选项类型：

```
let has element input = 
  seq { for v in input do
          if v = element then yield Some v
          if v > element then yield None }
  |> Seq.head 
```

甚至使用内置函数的更好更简单的解决方案。只需使用`Seq.takeWhile`仅包含小于或等于您要查找的元素的序列的开头，然后`Seq.tryFind`在序列的这一部分使用：

```
let has element input = 
  input |> Seq.takeWhile (fun x -> x <= element)
        |> Seq.tryFind (fun x -> x = element) 
```

或者，如果您喜欢无点风格（我不喜欢，因为它更难阅读恕我直言）：

```
let has element = Seq.takeWhile ((>=) element) >> Seq.tryFind ((=) element) 
```

# ruby-on-rails - paginate_alphabetically gem：命名空间中的分页链接不起作用

> ID：11961897
> 
> 赞同：1
> 
> 时间：2012-08-14T22:46:14.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, namespaces, pagination, routes

我在 rails 3.2 应用程序中有一个管理员命名空间。[我想使用https://github.com/edendevelopment/paginate_alphabetically](https://github.com/edendevelopment/paginate_alphabetically)上的 paginate_alphabetically gem 对作者的 postgres 数据库进行分页。

app/controllers/admin 中的控制器（Admin::AuthorsController < AdminController 类）具有：

```
def index
    @authors = Author.includes(:stories).alphabetical_group(params[:letter])
    respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @authors }
    end
end 
```

app/models 中的 author.rb 模型有： paginate_alphabetically :by => :last_name

app/views/admin/index.html.erb 中的作者视图具有：

```
<ul class='pagination'>
<%- Author.pagination_letters.each do |letter| -%>
<li><%= link_to(letter, admin_authors_path(:letter => letter)) %></li>
<%- end -%>
</ul> 
```

这似乎正在生成正确的 html，其中：

```
<ul class='pagination'>
<li><a href="/admin/authors?letter=A">A</a></li> 
...etc.
</ul> 
```

但是点击时链接不会去任何地方。红宝石输出说明如下：

```
Started GET "/admin/authors?letter=A" for 127.0.0.1 at 2012-08-14 18:18:15 -0400
Processing by Admin::AuthorsController#index as JS
Parameters: {"letter"=>"A", "collection"=>{"list"=>:get}}
Author Load (1.8ms)  SELECT "authors".* FROM "authors" 
Author Load (0.7ms)  SELECT "authors".* FROM "authors" WHERE (LOWER(last_name) LIKE     
'a%') ORDER BY last_name
Story Load (0.6ms)  SELECT "stories".* FROM "stories" INNER JOIN "authors_stories" ON   
"stories"."id" = "authors_stories"."story_id" WHERE "authors_stories"."author_id" = 1
Story Load (0.8ms)  SELECT "stories".* FROM "stories" INNER JOIN "authors_stories" ON "stories"."id" = "authors_stories"."story_id" WHERE "authors_stories"."author_id" = 2
 Story Load (67.1ms)  SELECT "stories".* FROM "stories" INNER JOIN "authors_stories" ON "stories"."id" = "authors_stories"."story_id" WHERE "authors_stories"."author_id" = 3
 Story Load (1.1ms)  SELECT "stories".* FROM "stories" INNER JOIN "authors_stories" ON "stories"."id" = "authors_stories"."story_id" WHERE "authors_stories"."author_id" = 4
 Story Load (1.2ms)  SELECT "stories".* FROM "stories" INNER JOIN "authors_stories" ON "stories"."id" = "authors_stories"."story_id" WHERE "authors_stories"."author_id" = 5
 Rendered admin/authors/_authors.html.erb (131.6ms)
 Rendered admin/authors/index.html.erb within layouts/admin (149.5ms) 
```

在 171 毫秒内完成 200 次 OK（查看次数：96.4 毫秒 | ActiveRecord：73.3 毫秒）

当我实际输入 url localhost:3000/admin/authors?letter=A （或任何其他字母）时，我会得到一个页面，其中包含我想要的内容，一个按字母顺序排列的作者列表，具体取决于字母。它只是不适用于上述链接。

在我的 routes.rb 文件中，我有：

```
namespace :admin do
  resources :authors
  resources :issues
  resources :stories  
  root :to => 'authors#index
end 
```

想法？

# node.js - nodejs - http.createServer 似乎调用了两次

> ID：11961902
> 
> 赞同：86
> 
> 时间：2012-08-14T22:46:47.193
> 
> 标签：node.js

如果我在节点中编写以下程序：

```
 http.createServer(function (req, res) {

    if( req.method == 'GET' ) {
      var body = ''; req.on('data', function(data) { body += data });
      req.on('end',  function() {
        console.log('request ended')
      });
    }

    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('142\n');
  }).listen(3500); 
```

然后用`http://xxx.xx.xxx.xx:35010`我在控制台上看到`request ended`两次来访问服务器——我不确定为什么单个 HTTP 请求会导致它执行两次。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-08-14T22:48:57.310

这很正常 - 您的浏览器会拨打多个电话。

例如，大多数浏览器都会调用grab `/favicon.ico`。

尝试记录网址：

```
console.log(req.url); 
```

你会看到叫什么。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-07-24T07:36:16.090

通常，`favicon.ico`由浏览器获取。所以，这两个电话。

此问题的解决方案可以是检查请求 URL 是否正在获取`favicon.ico`。

```
http.createServer(function (req, res) {
    if (req.url != '/favicon.ico') {
        // do your stuffs
    }
}).listen(3500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-13T02:37:38.447

需要注意的另一件事是现代浏览器可能会预取或预加载页面。Chrome 有时甚至会在您在地址栏中输入之前执行此操作！

可以在**Privacy and security**下禁用它，但这会影响所有浏览。

[![在此处输入图像描述](../Images/e09f0405fdac059e229b33e21d0eaa4c.png)](https://i.stack.imgur.com/Wd90y.png)

您还可以检查[标题`Purpose: prefetch`](https://www.chromestatus.com/feature/6247959677108224)并返回错误。（我不确定官方的回应应该是什么。）

这种情况不太可能经常发生，但如果您正在测试一个 API，那么突然发出的意外请求充其量是令人讨厌的，更糟的是危险的。

# c++ - 将函数模板传递给另一个函数时的重载解决方案

> ID：11961905
> 
> 赞同：0
> 
> 时间：2012-08-14T22:47:45.143
> 
> 标签：c++, templates, overloading, template-function

我有以下代码：

```
template<typename T>
void bar(int x, T y)
{
}

void baz(int x, int y)
{
}

template<typename T0, typename T1>
void foo(void k(T0, T1), T1 t)
{
}

int main()
{
  foo(baz, 10); // OK
  foo(bar, 10); // ERROR
  return 0;
} 
```

`foo`传入时的重载分辨率正常工作`baz`。但是，当传入函数 template`bar`时，编译器无法推断 的模板参数`T0`，`foo`即使`bar`范围内只有一个，并且它的第一个参数完全解析为`int`。如何编写函数模板以便编译器可以解析`foo`调用？`foo(bar, 10)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:57:37.040

14.8.2.1/6（*从函数调用中推导出模板参数*）回答了这个问题：

> When`P`是函数类型、指向函数类型的指针或指向成员函数类型的指针：
> 
> *   如果参数是包含一个或多个函数模板的重载集，则该参数被视为非推导上下文。

在您的情况下，`bar`是一个函数模板，因此参数`k`是函数类型，其重载集包含函数模板。因此，模板参数 for`bar<T>`是不可推导出的。

作为这样做的实际原因，请考虑`foo(bar<int>, 10)`和`foo(bar<long>, 10)`都是完全可行的电话，并且不会隐含地为您做出选择。请记住，整数文字的类型取决于*value* ，如果生成不同的模板特化`foo(bar, 10)`，那就很奇怪了。`foo(bar, 100000000)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:04:38.023

你可以做：

```
 void (&b)(int,int) = bar;
  foo(b, 10); 
```

# javascript - javascript代码隐藏

> ID：11961911
> 
> 赞同：0
> 
> 时间：2012-08-14T22:48:13.583
> 
> 标签：javascript, jquery, asp.net

我正在尝试编写javascript代码，其中有一个名为“costCenter”的对象，其可见性应该是错误的。但是当我点击下拉列表中的“计算机”项目时，它会将“成本中心”的可见性设置为真。

到目前为止，这就是我所拥有的。这是对javascript语法的正确使用吗？

```
function hideMe()
{
var g = document.getElementById('costcenterid');
var e = document.getElementById('dg_form_ctl02_DropDownList1');
if(e == 'computer')
{
g.style.display = 'block';
else
g.style.display = 'none';
}
} 
```

后面的 C# 代码

```
ClientScript.RegisterStartupScript(GetType(),"hwa","hideMe();",true); 
```

我从某个地方找到了这段代码，但我不确定“hwa”中的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:50:40.423

```
document.getElementById("id").style.display="none|block" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:54:57.103

而不是`.value`，试试这个：

```
var selectedVar = document.getElementById("dg_form_ctl02_DropDownList1").options[e.selectedIndex].text; 
```

至于从 c# 代码中调用它，这取决于这是什么类型的项目。如果是 winforms，请从代码隐藏中执行。如果它是 mvc，我通常建议不要这样做。

# java - 从证书中读取替代名称

> ID：11961913
> 
> 赞同：3
> 
> 时间：2012-08-14T22:48:23.307
> 
> 标签：java, certificate, ssl-certificate, x509certificate, x509

我想编写一个代码，从证书的*主题备用*名称下的*其他名称中读取**用户主体名称。*

 **我有一个 X509Certificate。

我做了（证书是 X509Certificate 对象）：

```
Collection san = certificate.getSubjectAlternativeNames() 
```

如何获取用户主体名称？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T08:40:20.257

找到它 [http://svn.eparapher.com/trunk/org.eparapher.core/src/main/java/org/eparapher/core/crypto/cert/CertificateInfo.java](http://svn.eparapher.com/trunk/org.eparapher.core/src/main/java/org/eparapher/core/crypto/cert/CertificateInfo.java)**

# javascript - 使用 div:title 标签属性而不是 a:href 属性来切换 div

> ID：11961914
> 
> 赞同：1
> 
> 时间：2012-08-14T22:48:32.180
> 
> 标签：javascript, jquery

我有这个脚本，它使用 a:href 属性标签来交换 div。我想改用带有 title 属性的 div 标签。

工作代码

```
$(document).ready(function () {
    $('#tabs div').hide();
    $('#tabs div:first').show();
    $('#tabs2 ul li:first').addClass('active');

    $('#tabs2 ul li a').click(function () {
        $('#tabs2 ul li').removeClass('active');
        $(this).parent().addClass('active');
        var currentTab = $(this).attr('href');
        $('#tabs div').hide();
        $(currentTab).fadeIn(1000);
        return false;
    });
}); 
```

我尝试将其与 div 标签一起使用但不起作用

```
<div id="tabs2">
  <ul class="nav">
    <li class="pc"><div class="tab-1" title="tab-1">text</div></li>
  </ul>
</div> 
```

```
$(document).ready(function () {
    $('#tabs div').hide();
    $('#tabs div:first').show();
    $('#tabs2 ul li:first').addClass('active');

    $('#tabs2 ul li div').click(function () {
        $('#tabs2 ul li').removeClass('active');
        $(this).parent().addClass('active');
        var currentTab = $(this).attr('title');
        $('#tabs div').hide();
        $(currentTab).fadeIn(1000);
        return false;
    });
}); 
```

没有收到任何错误，但由于某种原因无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:04:54.697

您在这里的选择器开头缺少一个“#”：

```
$(currentTab).fadeIn(1000); 
```

这导致`$('tab-1')`何时应该是 $`('#tab-1')`

我想它在您使用该`a[href]`属性时有效，因为您可能正在使用类似`href="#tab-1"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:05:22.023

在您提供的 HTML 中，`title`属性是`tab-1`.
因此，当您获得该值时，`currrentTab`将只包含 text `tab-1`。

添加`#`以选择 id 为 的元素`tab-1`：

```
$('#' + currentTab).fadeIn(1000); 
```

或添加`.`以选择具有 类的元素`tab-1`：

```
$('.' + currentTab).fadeIn(1000); 
```

# php - Joomla 2.5 JFactory::getSession(); 似乎在 Firefox 中缓存

> ID：11961920
> 
> 赞同：2
> 
> 时间：2012-08-14T22:49:00.703
> 
> 标签：php, ajax, joomla, joomla2.5

我在包含目录中有一个 php 文件。它的可用性是显示验证码图像。在该文件中，我设置了一个会话变量，如下所示：

```
$code = codegenerator();
$session =& JFactory::getSession();
$session->set('security_code', $code); 
```

此 Session 变量是从`src`从控制器调用该方法的图像中设置的。

然后我调用一个控制器来检查已设置的会话（此方法是使用 iframe 中的 ajax 触发的），并在该方法中执行此操作

```
$session = JFactory::getSession();
$seccode=$session->get('security_code');
echo $seccode.':'.rand(); 
```

结果与第一次的预期一样，设置的代码和一个随机数。如果我刷新该页面，验证码图像将使用新代码重置并显示。但是当我再次触发检查事件时，我得到了带有新随机数的先前代码。有一个被缓存`rand()`的证明，`JFactory::getSession();`因为我得到了新的随机数，但以前的代码相同，而不是应该的新代码。所以不是 ajax 在这里缓存了一些东西。

如何避免`JFactory::getSession();`从 Firefox 缓存？这只发生在 Firefox 中。Internet Explorer 和 chrome 似乎可以正确显示会话代码。如果我清除 Firefox 现金并刷新页面，它仍然无法正常工作。就像它永远被缓存一样。如果我关闭 Firefox 并再次打开它，那么一切似乎都像第一次那样工作，但我又遇到了同样的问题。

这是生成验证码的代码

```
<?php

defined('_JEXEC') or die('Restricted access');
class CaptchaSecurityImages {

    var $font='monofont.ttf';

    function generateCode($characters) {
        /* list all possible characters, similar looking characters and vowels have been removed */
        $possible = '23456789bcdfghjkmnpqrstvwxyz';
        $code = '';
        $i = 0;
        while ($i < $characters) { 
            $code .= substr($possible, mt_rand(0, strlen($possible)-1), 1);
            $i++;
        }
        return $code;
    }

    function CaptchaSecurityImages($width='220',$height='40',$characters='6') {
        $code = $this->generateCode($characters);

        //$font='includes'.DS.'monofont.ttf';
        $font='monofont.ttf';
        $this->font=$font;

        $session =& JFactory::getSession();
        $session->set('security_code', $code);

        /* font size will be 75% of the image height */
        $font_size = $height * 0.75;
        $image = @imagecreate($width, $height) or die('Cannot initialize new GD image stream');

        /* set the colours */
        $background_color = imagecolorallocate($image, 255, 255, 255);
        $text_color = imagecolorallocate($image, 20, 40, 100);
        $noise_color = imagecolorallocate($image, 100, 120, 180);
        /* generate random dots in background */
        for( $i=0; $i<($width*$height)/3; $i++ ) {
            imagefilledellipse($image, mt_rand(0,$width), mt_rand(0,$height), 1, 1, $noise_color);
        }
        /* generate random lines in background */
        for( $i=0; $i<($width*$height)/150; $i++ ) {
            imageline($image, mt_rand(0,$width), mt_rand(0,$height), mt_rand(0,$width), mt_rand(0,$height), $noise_color);
        }
        /* create textbox and add text */

        $textbox = imagettfbbox($font_size, 0, $this->font, $code) or die('Error in imagettfbbox function');
        $x = ($width - $textbox[4])/2;
        $y = ($height - $textbox[5])/2;
        imagettftext($image, $font_size, 0, $x, $y, $text_color, $this->font , $code) or die('Error in imagettftext function');
        /* output captcha image to browser */

        header('Content-Type: image/jpeg');
        imagejpeg($image);
        imagedestroy($image);

    }

}
?> 
```

这是ajax调用的代码

```
public function checkCaptchaSecurityCode(){
        $securitycode = JRequest::getVar('securitycode');           
        $session = JFactory::getSession();
        $seccode=$session->get('security_code');        

        echo $seccode.':'.rand();

        die();
    } 
```

这是ajax调用

```
<?php $checkCaptchaSecurityCode = JRoute::_('index.php?option=com_virtuemart&view=participate&task=checkCaptchaSecurityCode&tmpl=component&format=raw'); ?>
    jQuery.ajaxSetup({cache: false});
            jQuery.ajax({
                  type: "POST",
                  url: "<?php echo $checkCaptchaSecurityCode ?>",
                  cache: false,
                  data: { securitycode: jQuery("#security_code").val() }
                }).done(function( msg ) {
                  alert( msg );
            }); 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T18:19:20.987

我遇到了同样的问题，但是在设置新的会话变量之前调用 clear 方法解决了这个问题。

```
 $session = & JFactory::getSession();
    /* this way unset data from the session store */
    $session->clear('security_code');
    /* and now set the new value */
    $session->set('security_code', $code); 
```

即使您是第一次声明会话变量，它也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:40:00.697

您是否从 www.mydomain.com**发布/**访问**mydomain.com ？**我相信这会导致 joomla 创建一个新会话。

# r - 旋转分类树终端条形图轴 - R

> ID：11961923
> 
> 赞同：2
> 
> 时间：2012-08-14T22:49:19.050
> 
> 标签：r, statistics, decision-tree, party

我分析了一个分类树`ctree()`，想知道如何旋转终端节点以使轴垂直？

```
library(party)
data(iris)
attach(iris)
plot(ctree(Species ~ Sepal.Length + Sepel.Width 
     + Petal.Length + Petal.Width, data = iris)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:00:48.807

这就是我将如何去做。不是最短的答案，但我想尽可能彻底。

由于我们正在绘制您的树，因此最好查看文档以了解适当的绘图功能：

```
library(party)
data(iris)
attach(iris)

ctree <- ctree(Species ~ Sepal.Length + Sepal.Width 
               + Petal.Length + Petal.Width, data = iris)

# getting ctree's class

> class(ctree)
[1] "BinaryTree"
attr(,"package")
[1] "party" 
```

看一下，`?'plot.BinaryTree'`我们看到以下对`terminal_panel`参数的描述：

> 一个可选的面板函数，形式为 function(node)，绘制终端节点。或者，使用参数 x 和 tp_args 调用类“grapcon_generator”的面板生成函数以设置面板函数。默认情况下，根据因变量的规模选择适当的面板函数。

文档的更下方是指向`?node_barplot`. 这就是我猜想被用作默认值的东西，调用以下代码证明了猜测是正确的：

```
plot(ctree, terminal_panel = node_barplot(ctree)) 
```

（输出与您的原始图表相同）。

不幸的是，没有`horizontal`or`horiz`参数`node_barplot`。查看此函数的代码，只需`node_barplot`在提示符处键入即可发现图形是使用视口“手动”绘制的。不幸的是，我能找到的唯一方法是编辑这个函数。我试图使我的更改尽可能明显：

```
# Note inclusion of horiz = FALSE
alt_node_barplot <- function (ctreeobj, col = "black", fill = NULL, beside = NULL, 
    ymax = NULL, ylines = NULL, widths = 1, gap = NULL, reverse = NULL, 
    id = TRUE, horiz = FALSE)
{
    getMaxPred <- function(x) {
        mp <- max(x$prediction)
        mpl <- ifelse(x$terminal, 0, getMaxPred(x$left))
        mpr <- ifelse(x$terminal, 0, getMaxPred(x$right))
        return(max(c(mp, mpl, mpr)))
    }
    y <- response(ctreeobj)[[1]]
    if (is.factor(y) || class(y) == "was_ordered") {
        ylevels <- levels(y)
        if (is.null(beside)) 
            beside <- if (length(ylevels) < 3) 
                FALSE
            else TRUE
        if (is.null(ymax)) 
            ymax <- if (beside) 
                1.1
            else 1
        if (is.null(gap)) 
            gap <- if (beside) 
                0.1
            else 0
    }
    else {
        if (is.null(beside)) 
            beside <- FALSE
        if (is.null(ymax)) 
            ymax <- getMaxPred(ctreeobj@tree) * 1.1
        ylevels <- seq(along = ctreeobj@tree$prediction)
        if (length(ylevels) < 2) 
            ylevels <- ""
        if (is.null(gap)) 
            gap <- 1
    }
    if (is.null(reverse)) 
        reverse <- !beside
    if (is.null(fill)) 
        fill <- gray.colors(length(ylevels))
    if (is.null(ylines)) 
        ylines <- if (beside) 
            c(3, 2)
        else c(1.5, 2.5)
    # My edit do not work if beside is not true
    #################################################
    if(!beside) horiz = FALSE
    #################################################

    rval <- function(node) {
        pred <- node$prediction
        if (reverse) {
            pred <- rev(pred)
            ylevels <- rev(ylevels)
        }
        np <- length(pred)
        nc <- if (beside) 
            np
        else 1
        fill <- rep(fill, length.out = np)
        widths <- rep(widths, length.out = nc)
        col <- rep(col, length.out = nc)
        ylines <- rep(ylines, length.out = 2)
        gap <- gap * sum(widths)
        #######################################################
        if (!horiz){
            yscale <- c(0, ymax)
            xscale <- c(0, sum(widths) + (nc + 1) * gap)
        } else {
            xscale <- c(0, ymax)
            yscale <- c(0, sum(widths) + (nc + 1) * gap)
        }                    
        #######################################################
        top_vp <- viewport(layout = grid.layout(nrow = 2, ncol = 3, 
            widths = unit(c(ylines[1], 1, ylines[2]), c("lines", 
                "null", "lines")), heights = unit(c(1, 1), c("lines", 
                "null"))), width = unit(1, "npc"), height = unit(1, 
            "npc") - unit(2, "lines"), name = paste("node_barplot", 
            node$nodeID, sep = ""))
        pushViewport(top_vp)
        grid.rect(gp = gpar(fill = "white", col = 0))
        top <- viewport(layout.pos.col = 2, layout.pos.row = 1)
        pushViewport(top)
        mainlab <- paste(ifelse(id, paste("Node", node$nodeID, 
            "(n = "), "n = "), sum(node$weights), ifelse(id, 
            ")", ""), sep = "")
        grid.text(mainlab)
        popViewport()
        plot <- viewport(layout.pos.col = 2, layout.pos.row = 2, 
            xscale = xscale, yscale = yscale, name = paste("node_barplot", 
                node$nodeID, "plot", sep = ""))
        pushViewport(plot)
        if (beside) {
            #############################################################
            if(!horiz){
                xcenter <- cumsum(widths + gap) - widths/2
                for (i in 1:np) {
                    grid.rect(x = xcenter[i], y = 0, height = pred[i], 
                      width = widths[i], just = c("center", "bottom"), 
                      default.units = "native", gp = gpar(col = col[i], 
                        fill = fill[i]))
                }
                if (length(xcenter) > 1) 
                    grid.xaxis(at = xcenter, label = FALSE)
                grid.text(ylevels, x = xcenter, y = unit(-1, "lines"), 
                    just = c("center", "top"), default.units = "native", 
                    check.overlap = TRUE)
                grid.yaxis()
            } else {
                ycenter <- cumsum(widths + gap) - widths/2
                for (i in 1:np) {
                    grid.rect(y = ycenter[i], x = 0, width = pred[i], 
                    height = widths[i], just = c("left", "center"), 
                    default.units = "native", gp = gpar(col = col[i], 
                     fill = fill[i]))
                }
                if (length(ycenter) > 1) 
                    grid.yaxis(at = ycenter, label = FALSE)
                        grid.text(ylevels, y = ycenter, x = unit(-1, "lines"), 
                        just = c("right", "center"), default.units = "native", 
                         check.overlap = TRUE)
                grid.xaxis()
            }
        #############################################################
        }
        else {
            ycenter <- cumsum(pred) - pred
            for (i in 1:np) {
                grid.rect(x = xscale[2]/2, y = ycenter[i], height = min(pred[i], 
                  ymax - ycenter[i]), width = widths[1], just = c("center", 
                  "bottom"), default.units = "native", gp = gpar(col = col[i], 
                  fill = fill[i]))
            }
            if (np > 1) {
                grid.text(ylevels[1], x = unit(-1, "lines"), 
                  y = 0, just = c("left", "center"), rot = 90, 
                  default.units = "native", check.overlap = TRUE)
                grid.text(ylevels[np], x = unit(-1, "lines"), 
                  y = ymax, just = c("right", "center"), rot = 90, 
                  default.units = "native", check.overlap = TRUE)
            }
            if (np > 2) {
                grid.text(ylevels[-c(1, np)], x = unit(-1, "lines"), 
                  y = ycenter[-c(1, np)], just = "center", rot = 90, 
                  default.units = "native", check.overlap = TRUE)
            }
            grid.yaxis(main = FALSE)
        }
        grid.rect(gp = gpar(fill = "transparent"))
        upViewport(2)
    }
    return(rval)
} 
```

现在我们可以测试它了！

```
plot(ctree, terminal_panel = alt_node_barplot(ctree, horiz = TRUE)) 
```

这是输出：

![在此处输入图像描述](../Images/bbab0d476bc69b84929396a5e9aaf8f2.png)

只是几点：

*   我承认这可能不是您问题的解决方案。当不存在更简单的选择时，这只是解决此类问题的一种方法。

*   不要完全相信我上面给出的功能。如您所见，该`beside`参数会自动禁用该`horiz`参数（我的第一次编辑），因为我没有更改处理`beside`为真的代码部分。如果您希望它在这种情况下工作，您必须自己进行这些编辑 - 看看`?viewport`并`?grid.rect`开始。我很确定这个`reverse`功能也坏了，但没有测试任何东西。如果我稍微扼杀了它，请向该函数的原始作者道歉，这只是一个演示。

我希望这会有所帮助。祝您好运，您需要进行任何进一步的编辑！

# java - Thread.currentThread().contextClassLoader.getResource(path) 似乎缓存了结果。可预防？

> ID：11961926
> 
> 赞同：2
> 
> 时间：2012-08-14T22:49:39.877
> 
> 标签：java, grails, groovy

我有一个正在开发的 Grails 2.1 应用程序，并且我有一个正在调用`Thread.currentThread().contextClassLoader.getResource(fileName)`以加载配置文件的服务`grails-app/conf`（不过，我希望位置无关紧要）。

它工作得很好，**除了我必须重新启动 grails 应用程序来加载**对配置文件的更改。我真的很希望*每次*请求资源时都能读取文件内容，至少在开发过程中是这样。

另外，如果可以避免的话，我想避免编写自己的缓存系统。解决方案越简单越好。

我的问题似乎[与速度](https://stackoverflow.com/questions/3121449/getclass-getclassloader-getresourceasstream-is-caching-the-resource)类似，但使用`getClass().getClassLoader().getResource(path).openStream()`似乎不起作用。

编辑：我想我可能遗漏了一个重要的细节。我正在检索的资源是非静态的。我正在使用 grails 模板引擎将值注入到资源中，如下所示：

```
Map bindings = [keys: 'values']
new SimpleTemplateEngine().createTemplate(resource).make(bindings).toString() 
```

使用我的调试器，我发现资源文本没有改变，但知道上述内容可能会改变潜在的答案。

编辑#2：我尝试使用 URLConnection.setUseCaches(false) ，但没有运气：

```
URLConnection connection = Thread.currentThread().contextClassLoader.getResource(path).openConnection()
connection.setUseCaches(false)
connection.connect()
BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))
String content = reader.readLines().join('\n')
reader.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:43:12.413

If you're using a resource in this manner, you might consider moving it out of grails-app/conf and into /web-app.

When running `grails run-app`, a cached version of an exploded war is actually running in a container with some outside magic monitoring various paths for changes and re-compiling and re-copying updated files similar to how one might manually hot-swap .class files and other resources.

This monitoring happens out of the box for all files in /web-app. Once the files are there, you can use the ServletContext to get a handle to the file in question. For example, you might do something like:

```
def templateFile = new File(ServletContextHolder.servletContext.getRealPath('/templates/fileName.gsp')).text 
```

and pass that to your templating engine. For environments that lock down the file system (e.g. Heroku), the `getRealPath` method will likely not work. You can, alternatively, use something like:

```
import org.apache.commons.io.IOUtils
def template =  IOUtils.toString(ServletContextHolder.servletContext.getResourceAsStream('/templates/fileName.gsp'), "UTF-8") 
```

The downsides to this approach:

*   You'll need access to the ServletContext which will require you to have a container loaded. Therefore, no unit testing on this piece of coding; you'll want an integration test instead.
*   Putting resources like this in /web-app will make them public. Alternatively, you could place them in /web-app/WEB-INF if privacy is a concern.

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:03:57.527

Just a thought, but Grails services are normally singletons. If you want the file re-read on every request, you might try changing the scope to prototype.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:03:15.163

您可以使用 Spring 的 ResourceUtils 来执行此操作吗？ [http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/util/ResourceUtils.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/util/ResourceUtils.html)

它看起来像 ResourceUtils.getFile("classpath:path/to/file.xyz")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T00:28:04.290

`getClass().getClassLoader().getResource(path)`返回一个 URL 对象，因此缓存可能由`URL`/执行`URLConnection`。

在您的应用程序启动时尝试使用[URLConnection.setDefaultUseCaches （出于性能原因，可能仅在开发环境中）。](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setDefaultUseCaches%28boolean%29)`(false)`这也可以使用该`setUseCaches()`方法在每个 URLConnection 的基础上进行设置。

# javascript - 更新浮点时间序列图

> ID：11961928
> 
> 赞同：0
> 
> 时间：2012-08-14T22:49:57.537
> 
> 标签：javascript, jquery, flot

我正在尝试构建一个时间序列图，其中 x 轴代表时间，y 轴代表 [0,100] 中的数字。我有一个实时数据流，它为下一个时间序列点提供 [x,y] 坐标。尝试使用 flot 时，我意识到每次情节发生时，前一个情节都会被删除，只剩下新情节，我怎样才能将新点“附加/渲染”到旧情节。

例如在以下代码中：

```
 $(function () {
        var d1 = [];
        for (var i = 0; i < 14; i += 0.5)
            d1.push([i, Math.sin(i)]);

        var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];

        // a null signifies separate line segments
        var d3 = [[0, 12], [7, 12], null, [7, 2.5], [12, 2.5]];

        $.plot($("#placeholder"), [ d2 ]);
        $.plot($("#placeholder"), [ d1 ]);

    }); 
```

d2 将被绘制，但随后 d1 将覆盖 d2 绘图。如何在绘图中附加新点以及如何更新 x 秒数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:43:03.413

are you wanting to graph them side by side. If so this is what you want:

```
$.plot($("#placeholder"), [ d2, d1 ]); 
```

this will create two series and plot them on top of one another. as for scrolling through the data by one seconds I suggest looking at [this example](http://people.iola.dk/olau/flot/examples/realtime.html)

# wordpress - 我如何 301 将旧的永久链接重定向到新的永久链接

> ID：11961930
> 
> 赞同：0
> 
> 时间：2012-08-14T22:50:16.907
> 
> 标签：wordpress, permalinks

我正在更改我的永久链接结构，并且需要使用此结构重定向旧链接的帮助......................

```
www.sitename.com/stores/storename 
```

到新：

```
www.sitename.com/coupon-codes/storename 
```

我正在使用 wordpress，尝试使用此重写规则但不起作用....

```
Redirect permanent stores/storename  http://www.sitename.com/coupon-codes/storename 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:20:23.960

在您的 htaccess 文件中，您执行此操作。

```
redirect 301 /stores/storename http://www.sitename.com/coupon-codes/storename
redirect 301 /stores/storename1 http://www.sitename.com/coupon-codes/storename1
redirect 301 /stores/storename2 http://www.sitename.com/coupon-codes/storename2
redirect 301 /stores/storename3 http://www.sitename.com/coupon-codes/storename3 
```

# javascript - Javascript：push 不是数组的函数？

> ID：11961931
> 
> 赞同：0
> 
> 时间：2012-08-14T22:50:20.057
> 
> 标签：javascript, jquery

```
$(function(){
    $('body').on('click', '.queue', function(event) {
        var video = $(this).closest('.video');
        console.log(video);
        var queue = localStorage.getItem('queue');
        if (! queue ) {
            queue = [];
        }
        queue.push(video);
        localStorage.setItem('queue', queue);
        console.log(localStorage.getItem('queue'));
        bootstrap_alert.success('queued!');
    });
}); 
```

当我尝试对此进行测试时，我在控制台上收到错误消息

```
TypeError: queue.push is not a function 

queue.push(video); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T22:51:30.850

```
var queue = localStorage.getItem('queue'); 
```

`localStorage`不存储（或返回）数组。因此，`queue`不是数组。

# javascript - 无法让 getjson 在 highstock 上工作

> ID：11961938
> 
> 赞同：0
> 
> 时间：2012-08-14T22:50:42.843
> 
> 标签：javascript, csv, getjson, highstock

我在导入 csv 以获取 highstock 图表时遇到了一些问题。我使用与 ohlc 示例相同的代码（在本地运行良好），但使用了另一个 CSV，它是由 php 在我的本地主机上创建的。

PHP 获取 CSV

```
<?PHP

// Declare the new variable as an array
$arrCSV = array();

// Open the CSV file
if (($handle = fopen("http://ichart.finance.yahoo.com/table.csv?s=AAPL&d=7&e=7&f=2012&g=d&a=8&b=7&c=1984&ignore=.csv", "r")) !==FALSE)
{

// Set the parent array key to 0
$key = 0;
// While there is data available loop through unlimited times (0) using separator (,)
while (($data = fgetcsv($handle, 0, ",")) !==FALSE) {

    // Count the total keys in each row
    $c = count($data);
    //print  $c . "<BR>"; // <------ 7 o numero de colunas

    //Populate the array
    If ($key != 0) {
        $arrCSV[$key-1][0] = strtotime($data[0])*1000; //Time
        $arrCSV[$key-1][1] = $data[1];            //Open
        $arrCSV[$key-1][2] = $data[2];            //High
        $arrCSV[$key-1][3] = $data[3];            //Low
        $arrCSV[$key-1][4] = $data[6];            //Adj Close
        $arrCSV[$key-1][5] = $data[5];            //Volume
    }

    $key++;
} // end while

$keymax = $key;

// Close the CSV file
fclose($handle);
} // end if

print "?(/* AAPL historical OHLC data from the Google Finance API */<BR>";
echo json_encode($arrCSV,JSON_NUMERIC_CHECK);
print ");";

?> 
```

导入和创建图表的代码：

```
<!DOCTYPE HTML>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Highstock Example</title>

          <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script type="text/javascript">
$(function() {
   $.getJSON('http://localhost/teste03.php', function(data) {
      console.log("1");
      // create the chart
      chart = new Highcharts.StockChart({
         chart : {
            renderTo : 'container'
         },

         rangeSelector : {
            selected : 2
         },

         title : {
            text : 'AAPL Stock Price'
         },

         series : [{
            type : 'ohlc',
            name : 'AAPL Stock Price',
            data : data,
            dataGrouping : {
               units : [[
                  'week', // unit name
                  [1] // allowed multiples
               ], [
                  'month', 
                  [1, 2, 3, 4, 6]
               ]]
            }
         }]
      });
   });
});

      </script>
   </head>
   <body>
<script src="js/highstock.js"></script>
<script src="js/modules/exporting.js"></script>

<div id="container" style="height: 500px; min-width: 500px"></div>
   </body>
</html> 
```

最后它只是给我一个空白页......在chrome控制台上，我无法获得getjson内的控制台日志，它报告好像一切正​​常：

```
[23:39:29.980] GET http://localhost/TraderMananger/Highstock/ohlc4.htm [HTTP/1.1 304 Not Modified 1ms]
[23:39:30.036] GET http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js [HTTP/1.1 304 Not Modified 87ms]
[23:39:30.055] GET http://localhost/TraderMananger/Highstock/js/highstock.js [HTTP/1.1 304 Not Modified 1ms]
[23:39:30.073] GET http://localhost/TraderMananger/Highstock/js/modules/exporting.js [HTTP/1.1 304 Not Modified 1ms]
[23:39:30.219] GET http://localhost/TraderMananger/Highstock/teste04.php [HTTP/1.1 200 OK 2056ms] 
```

帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:26:53.660

现在解决了，问题是在json_encode前后添加的chos，不需要添加

```
print "?(/* AAPL historical OHLC data from the Google Finance API */<BR>";
echo json_encode($arrCSV,JSON_NUMERIC_CHECK);
print ");"; 
```

因此，删除它们就解决了问题。

# ruby-on-rails - 在heroku上配置请求超时

> ID：11961941
> 
> 赞同：0
> 
> 时间：2012-08-14T22:51:03.783
> 
> 标签：ruby-on-rails, heroku

是否可以在heroku上配置请求超时？

我有一些报告查询花费的时间超过了 heroku 提供的默认 30 秒。理想情况下，我想为特定请求（仅报告）设置它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:06:16.577

Heroku 似乎[鼓励 500 毫秒或更短的响应](https://devcenter.heroku.com/articles/request-timeout)。由于他们没有提到更改该页面上的请求超时，我的猜测是他们不支持更改它（尽管您可以询问 Heroku 支持）。

你为你的报告做了什么样的工作？

1.  您可以在后台作业中运行计算工作并存储结果吗？（例如，在内存缓存中，在数据库中的另一个表中，等等） 信息需要保持多长时间？

2.  你能加快查询速度吗？您的查询计划是什么样的？通过改变查询数据的方式或添加索引是否有改进的空间？

3.  像 HTTP 流这样的方法会有帮助吗？

我建议先尝试方法 1 或 2，看看它们是否有帮助。如果您向我们提供有关您正在做什么的更多详细信息，我们可能会提供更多帮助。

# javascript - 正则表达式匹配空白或空格 javascript

> ID：11961943
> 
> 赞同：0
> 
> 时间：2012-08-14T22:51:19.927
> 
> 标签：javascript, regex

我正在寻找与以下值匹配的正则表达式模式：

*   一个空字符串，或
*   一个只包含空格的字符串。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:53:32.893

你可以使用这个正则表达式：

```
/^\s*$/

Start of string 
Followed by zero or more whitespace 
End of string 
```

# android - Android：定期 UI 更新和通信服务 <-> 活动

> ID：11961946
> 
> 赞同：1
> 
> 时间：2012-08-14T22:51:26.873
> 
> 标签：android, service, android-activity, updates

所以我想做的只是每隔一段时间更新一个活动的视图，比如每秒一次。在这种特定情况下，只有几个按钮，而我只想更改它们的文本。我在这里阅读了很多针对相同问题的问题，但我似乎比其他人更受困，我将把这归咎于我对 Android 的有限体验（这实际上意味着，我不明白提出的解决方案，或者无法识别示例代码中的核心思想，而这实际上是我第一次尝试为 Android 编程）。

由于我想要一个服务来拥有数据（及其创建），我想到了对活动的回调，这就是我在过去几个小时里一直在尝试的。我所拥有的是一项服务`onCreate()`，`onStartCommand()`而且`onDestroy()`基本上，这很好。我在 android 清单文件中注册了它，并成功地将它变为现实（我正在记录生命周期方法）。

但我怎么去

*   使用服务中的数据经常更新视图

*   为服务提供它所依赖的某些信息（比如通知它按钮事件）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:56:49.930

从官方 Android 文档中阅读有关[绑定到服务的信息。](http://developer.android.com/guide/components/bound-services.html)

它应该回答你所有的问题。

基本上，这个想法是你“绑定”到一个服务，这样做会给你服务对象。从那里，您可以直接调用服务的方法。在您的情况下，您可能需要在服务中声明一个名为 notifyButton1Pressed() 或类似的方法。

要在间隔内刷新 Activity 的视图，请使用 TimerTask 和 Timer。如果您通过 Google 进行研究，这些都是不言自明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T22:07:55.663

实际上有一种非常简单的方法可以使用 a`Timer`和 a从自身内部更新活动`android.os.Handler`。这个想法是为活动提供一个`IUpdateable`公开更新方法的接口（例如）。然后扩展`TimerTask`以`(Handler, IUpdateable)`作为参数并保留对它的引用。在`TimerTask`'`run()`方法中，调用 eg `updateableActivity.update()`。在活动中，实例化 a`Timer`和 schedule `new UpdateTask(new Handler(), this);`。
这样你就有了一个实际可重用的方法（使用接口可以在任何活动中轻松实现）。如果不清楚，请查看此[要点](https://gist.github.com/j-fliegenschmidt/6479668)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T01:47:11.910

为了更新您的`activity`from `service`，您必须在您`register`的. 在你做你的更新，在服务中，你必须对你的活动。和之间的信息你可以通过它发送。`BroadcastReceiver``activity``receiver``sendBroadcast``activity``service``Intent``sendBroadcast`

# c# - 如何在方法中动态设置表达式类型

> ID：11961949
> 
> 赞同：0
> 
> 时间：2012-08-14T22:51:32.180
> 
> 标签：c#, linq, expression

我有这个视图模型：

```
 public class BankAccountViewModel : IValidator<BankAccountViewModel>
    {
      public BankAccount BankAccount { get; set; }

public void ConfigureValidation(ValidationConfiguration<StockOnHandViewModel> config)
        {
            config.For(m => m.BankAccount.AccountHolder);

        }
    } 
```

所以课程是：

```
public class BankAccount
{
  public string AccountHolder { get; set; }
  public List<Transfer> Transfers { get; set; }
}

public class Transfer
{
  public int Amount { get; set; }
} 
```

然后我有一些验证扩展

```
public static class ValidationExtensions
    {
  public static PropertyRuleSet<TModel, TProperty> For<TModel, TProperty>(
            this ValidationConfiguration<TModel> validationConfiguration,
            Expression<Func<TModel, TProperty>> accessor)
        {
            return validationConfiguration.Add(accessor);
        }
} 
```

所以我能够为 AccountHolder 调用 For 方法`config.For(m => m.BankAccount.AccountHolder);`

所以这很酷。它按预期发送表达式。

列表项 Transfers 变得有点困难。

在转帐中，我可能想通过表达式发送每次转帐的金额。因此，如果我有两次转账，我想发送：

```
m => m.BankAccount.Transfers[0].Amount
m => m.BankAccount.Transfers[1].Amount 
```

我知道我可以这样做：

```
for(int i=0; i < BankAccount.Transfers.Count; i++)
            {
                config.For(m => m.BankAccount.Transfers[i].Amount);
            } 
```

但是我不想一直为列表项这样做。

我真的很想`For`对列表项有一种不同的方法，我可以用一些方法来调用它，它会为我做到这一点。

我在想可能是这样的：

```
public static PropertyRuleSet<TModel, TProperty> For<TModel, TProperty>(
            this ValidationConfiguration<TModel> validationConfiguration,
            Expression<Func<TModel, TProperty>> accessor, int count)
        {
...
} 
```

你可能会这样称呼它：

```
config.For(m => m.BankAccount.Transfers[i].Amount, BankAccount.Transfers.Count); 
```

但是，这不起作用，因为我不确定如何在没有 i 的情况下发送表达式部分，然后稍后为每个列表项填充它。也不知道在方法中做什么

有人知道在这里做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:02:27.677

让它返回一个列表似乎很灵巧：

```
public static PropertyRuleSet<TModel, TProperty> For<TModel, TProperty>(
            this ValidationConfiguration<TModel> validationConfiguration,
            Expression<Func<TModel,IEnumerator<TProperty>>> accessor)
        {
...
} 
```

然后这个：

```
config.For(m => m.BankAccount.Transfers.Select(t => t.Amount)); 
```

我没有测试它，所以它可能有一个错字。

# python - Python 3：在可迭代对象上应用运算符

> ID：11961950
> 
> 赞同：4
> 
> 时间：2012-08-14T22:51:49.617
> 
> 标签：python, python-3.x, operators, iterable

`sum(iterable)`有效地：

```
def sum(iterable):
    s = 0
    for x in iterable:
        s = s.__add__(x)
    return s 
```

Python 是否有一个内置函数可以在不设置初始值的情况下完成此操作？

```
# add is interchangeable with sub, mul, etc.
def chain_add(iterable):
    iterator = iter(iterable)
    s = next(iterator)
    while True:
        try:
            s = s.__add__(next(iterator))
        except StopIteration:
            return s 
```

我遇到的问题`sum`是它不适用于支持`+`运算符的其他类型，例如`Counter`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T22:56:49.083

尝试查看 python[`reduce()`函数](https://docs.python.org/3/library/functools.html#functools.reduce)：您传入一个函数、一个可迭代对象和一个可选的初始化程序，它将将该函数累积应用于所有值。

例如：

```
import functools
def f(x,y):
    return x+y

print functools.reduce(f, [1, 2, 3, 4]) # prints 10
print functools.reduce(f, [1, 2, 3, 4], 10) # prints 20, because it initializes at 10, not 0. 
```

您可以根据您的可迭代更改功能，因此它非常可定制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:56:50.567

在添加的情况下：

```
import operator
reduce(operator.add, iterable) 
```

这将适用于无法使用`sum`. 同样，您可以使用

```
reduce(operator.mul, iterable) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T22:59:35.497

这是 for 的一个很好的用途，它在 Python 3`reduce()`中被移到了。[`functools.reduce()`](http://docs.python.org/py3k/library/functools.html#functools.reduce)

下面是一个链接乘法的例子：

```
import functools
import operator

def chain_mul(iterable):
    return functools.reduce(operator.mul, iterable) 
```

您可以将其替换为[operator](http://docs.python.org/py3k/library/operator.html)`operator.mul`模块中的其他函数之一，或者仅定义您自己的对其参数进行操作的双参数函数。

# android - 将android整数资源ID转换为十六进制/名称

> ID：11961951
> 
> 赞同：2
> 
> 时间：2012-08-14T22:51:54.470
> 
> 标签：android, resources, icons, integer

我曾经`context.getApplicationInfo().icon`在我的应用程序中获取图标的整数资源 ID。（例如 2130837504）有没有办法将其转换为名称？（例如`R.drawable.icon`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:05:50.267

您可以在[get a resource (a string) from its unique integer 中找到答案。](https://stackoverflow.com/questions/3694306/android-get-a-resource-a-string-from-its-unique-integer)

如果您正在寻找其他东西，请告诉我！

# python - “ObjectId”对象没有属性“getTimeStamp”

> ID：11961952
> 
> 赞同：26
> 
> 时间：2012-08-14T22:52:03.517
> 
> 标签：python, mongodb, pymongo

我正在尝试从 ObjectID 获取时间戳，但 Mongo 一直给我这个错误。我错过了进口吗？将时间戳转换为标准日期格式的最佳方法是什么？

```
video['date'] = video['_id'].getTimeStamp() 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-14T22:56:45.917

你在哪里看到`getTimeStamp()`的方法？

根据[文档](https://pymongo.readthedocs.io/en/stable/api/bson/objectid.html#bson.objectid.ObjectId.generation_time)，它应该只是：

```
video['date'] = video['_id'].generation_time 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-30T14:00:23.060

***这个答案是基于 python 和 Django 的。***

在使用之前请`generation_time`注意，`generation_time`它将**转换为 UTC**（世界时间），这可能会提前或落后于您**当前的时区**，因此如果您在项目设置中使用**本地时间**来保存时间戳，您可能会看到时间差异对象。对我来说，相差5.5小时。所以根据你的时区调整时间。

**示例：**`ObjectId('5c51aca67c76124020edbbaf')`这个对象的实际创建时间是， 但是`datetime.datetime(2019, 1, 30, 19, 24, 28, 73000)` 当我使用`generation_time`它生成它的时间时，它落后了 5.5 小时。

```
In [10]: from bson import ObjectId

In [11]: ObjectId('5c51aca67c76124020edbbaf').generation_time
Out[11]: datetime.datetime(2019, 1, 30, 13, 54, 46, tzinfo=<bson.tz_util.FixedOffset object at 0x102461128>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-26T14:15:05.153

由于我们从文档的 object_id 中获取 UTC 时间，因此要转换为您的当地时间，您可以做的是......

```
document['_id'].generation_time  #(gives the generation/creation time of the object id in UTC.)
utc=document['_id'].generation_time
hours_added = datetime.timedelta(hours = 4)`  #(Suppose utc+4 is my local time.)
local_time=utc+hours_added 
```

# simulation - 比较模拟生成的随机过程的速度？

> ID：11961956
> 
> 赞同：0
> 
> 时间：2012-08-14T22:52:28.467
> 
> 标签：simulation, time-series, stochastic-process

我有一个基于代理的模拟（使用基于 Java 的 Repast），它在其输出中为我的不同治疗生成时间序列。我正在通过时间测量性能，并且在每次滴答声中，性能都是 30 次运行（30 个样本）的平均值。在所有处理中，性能从接近 0 开始，以 100% 结束，但速度不同。我想知道是否有任何随机模型或概率方法来比较这些时间序列的速度或增长。我想找出哪个“显着”增长得更快。

谢谢。

# api - 如何根据 haproxy 标头中的 api 版本进行重定向？

> ID：11961962
> 
> 赞同：1
> 
> 时间：2012-08-14T22:52:50.100
> 
> 标签：api, haproxy

```
frontend http
  bind *:8000
  acl v1 hdr(ContentType) ??
  acl users_create path_reg ^/users/create/?

  use_backend users_create if users_create v1 
```

请求将具有“Content-Type：application/vnd.hello.v1+json”。不知道如何只匹配 v1 部分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:27:25.580

如果标头包含指定的子字符串， hdr_sub 将匹配。 `acl v1 hdr_sub(Content-Type) v1`

您也可以使用 hdr_reg 匹配正则表达式。

存在其他 hdr 选项，用于仅匹配标头中字符串的开头或结尾以及其他属性。有关详细信息，请参阅文档：[https ://code.google.com/p/haproxy-docs/wiki/MatchingLayer7](https://code.google.com/p/haproxy-docs/wiki/MatchingLayer7)

# javascript - 无法评估 break 语句

> ID：11961963
> 
> 赞同：2
> 
> 时间：2012-08-14T22:53:02.720
> 
> 标签：javascript, eval

为什么是这段代码：

```
 var myBreak = 'break;';
    for(var i=0; i < 5; i++) {
        console.log('i is : ' + i);
        eval(myBreak);
    }
    console.log('done !'); 
```

触发：

```
unlabelled break must be inside loop or switch 
```

Firebug 中的错误消息代替`done !`控制台中的返回？

不能`eval()`打破陈述吗？

先感谢您 ！

编辑 ：

我现在很困惑。^^

*   为什么会失败？
*   Jack Wanders 是否对 eval 拥有自己的“执行上下文”？
*   如果是，为什么他的例子不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:00:47.683

`eval`代码在自己的执行上下文中执行；基本上，这意味着当`break;`执行时，它不知道它是在`for`循环中执行的。

如果您标记`break`，它应该可以工作：

```
var myBreak = 'break myLoop;';

myLoop:
  for(var i=0; i < 5; i++) {
    console.log('i is : ' + i);
    eval(myBreak);
  }

console.log('done !'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:36:27.207

eval 解析/评估 JavaScript 解释器的新实例中的代码。代码最终在原始解释器代码的上下文中执行，但代码必须能够在没有外部上下文的情况下执行，因为新实例对它是盲目的。

所以`alert(eval(this.constructor.name))`会给你正确的对象上下文名称（全局窗口）。

但是这些将失败，因为实例在由单独的解释器评估之前不会“看到”彼此的代码，并且在这个阶段，一个片段在没有另一个的情况下失败：

*   `try{}eval('catch(){}');`

*   `for(;;){ eval('break;'); }`

*   `myLoop: eval('for(;;){ break myLoop; }');`

简短版本：代码将按预期工作，但 eval 中的任何内容都必须是您可以在任何其他上下文中自行触发的内容。

所以基本上，初步解析/错误检查是在考虑值和范围和对象上下文之前完成的。一旦这一切完成，代码就可以协同工作，并检查您是否正在调用尚未定义的 var。在此之前，新的解释器在检查错误时只看到 eval 中的内容。在那个中断的情况下，它看不到的是一个循环或一个围绕它的开关。

在这个早期的解析/评估阶段会考虑循环标签，而像 var 存在和函数标签这样的东西似乎稍后会被检查。

# .net - 重 CPU 负载下的跨线程 BeginInvoke 阻塞

> ID：11961965
> 
> 赞同：2
> 
> 时间：2012-08-14T22:53:23.620
> 
> 标签：.net, winforms, multithreading

我有一个 Windows 窗体用户控件，其中包含一个使用 BeginInvoke 委托调用从单独线程更新的第 3 方图像显示控件。

在繁重的 CPU 负载下，UI 会锁定。当我附加调试器时，它始终位于更新第 3 方图像控件的同一行代码中。

```
 public ICogImage DisplayImage
    {
        get { return this.ResultImageCogDisplay.Image; }
        set 
        {
           this.BeginInvoke((ThreadStart)delegate
            {
                this.ResultImageCogDisplay.Image = value;
            });

        }
    } 
```

如果我注释掉 setter 的实现，那么问题就消失了。

**谁能解释为什么会这样？**

更多信息：

*   图像更新事件由图像采集卡定期（约 200 毫秒）生成。这些事件在不同的线程上引发。
*   我相信第 3 方图像控件使用 ActiveX，它是康耐视视觉处理框架的一部分。
*   图像约为。900x800 8 位灰度
*   表单上有 4 个这样的控件，每个控件都来自具有不同图像的不同线程。
*   我已经尝试过使用和不使用 IsInvokeRequired() 检查，它似乎没有任何区别。

**PostMessage 队列上的消息数量是否有任何限制，我在高 CPU 负载下遇到这些消息？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:07:53.630

`BeginInvoke`将要在 UI 线程上执行的操作排队。如果您排队执行的操作太多，UI 无法跟上它们，您将压倒 UI 线程并且它会显示为挂起。尝试将事件限制到每秒一次，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:45:59.820

Windows 消息队列条目确实存在 10,000 个条目的限制（至少在 32 位系统上）。在那之前很久，通过发布消息比 GUI 处理它们的速度更快来调整 GUI 是很容易的——我经常这样做:((

通常，我的设计使用对象池进行线程间通信，所以我解决了这个问题，因为如果 GUI 没有足够快地返回“已使用”对象，则生产者线程在池队列中被阻塞，因此提供了整体流控制. 当然，在停止 GUI 锁定时，如果您有无法满足的帧速率要求，这将无济于事:(

# php - 通过 PHP 邮件附加文件

> ID：11961969
> 
> 赞同：0
> 
> 时间：2012-08-14T22:53:44.003
> 
> 标签：php, html, email-attachments

我正在尝试使用 PHP 邮件获取自定义联系表单，让用户附上照片，然后将其发送给 PHP 邮件代码中列出的收件人

```
<input type="file" id="file" name="file"> 
```

表格代码如下；

```
<form action="register-mail.php" method="POST" enctype="multipart/form-data">
 <input type="file" id="file" name="file">
 <input type="submit" value="Submit">
</form> 
```

PHP邮件代码如下；

```
<?php $file = $_FILES['file'];
 $formcontent="Email Text Content";
 $recipient = "fake@email.com";
 $subject = "Here is a Photo";
 $mailheader = 'From: Basic Sign-up <fake@email.com>' . "\r\n";
 mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
die();
?> 
```

我似乎无法将文件附加到正在发送的电子邮件中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:03:33.523

依恋不是这样运作的。使用`mail()`for 附件比这要复杂一些。您必须`mail()`通过设置[**MIME Boundary**](http://en.wikipedia.org/wiki/MIME)来判断哪个部分应该处理文件附件以及哪个部分负责显示电子邮件正文。换句话说，代码应该分为两部分：

*   处理正文中发送的消息的部分
*   处理文件上传的部分

详细教程在这里

[**带附件的 PHP 电子邮件**](http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/)

但是，我建议您使用一个非常方便的工具 PHPMailer 来完成相同的任务。它简化了流程，让班级处理所有的跑腿工作。

[**PHPMailer**](http://phpmailer.worxware.com/)

# php - 使 magento 自定义属性可过滤

> ID：11961972
> 
> 赞同：0
> 
> 时间：2012-08-14T22:54:13.800
> 
> 标签：php, magento

有没有办法通过设置文件和资源文件使自定义 magento 产品属性可过滤？

我可以创建属性，我什至可以设置它进入的组，但无需手动进入管理员并调整属性上的可过滤选项，我无法将其设置为可过滤（尤其是可过滤 - 我我试过 w/true/false 和 0,1,2)。我已经尝试调整每个有意义的选项。

IE：

```
app/code/local/Company/Module/Model/Resource/Eav/Mysql4/Setup.php
public function getDefaultEntities()
{
    return array(
            'catalog_product' => array(
                'entity_model'      => 'catalog/product',
                'attribute_model'   => 'catalog/resource_eav_attribute',
                'table'             => 'catalog/product',
                'additional_attribute_table' => 'catalog/eav_attribute',
                'entity_attribute_collection' => 'catalog/product_attribute
                'attributes' => array(
                    'attribute_name' => array(
                        'group'                      => 'Attribute Set Group',
                        'type'                       => 'int',
                        'backend'                    => '',
                        'frontend'                   => '',
                        'label'                      => 'Attribute Label',
                        'input'                      => 'select',
                        'class'                      => '',
                        'source'                     => 'eav/entity_attribu
                        'global'                     => Mage_Catalog_Model_
                        'visible'                    => true,
                        'required'                   => false,
                        'user_defined'               => true,
                        'default'                    => false,
                        'searchable'                 => true,
                        'filterable'                 => 1,
                        'comparable'                 => false,
                        'visible_on_front'           => true,
                        'visible_in_advanced_search' => true,
                        'used_in_product_listing'    => true,
                        'used_for_sort_by'           => true,
                        'unique'                     => false,
                    ),
                ),
            ),
        );
}

app/code/local/Company/Module/Model/sql/module_setup/mysql4-install-0.1.0.php
$this->installEntities(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:39:51.460

您可以通过以下方式添加属性：

```
module_name\sql\machinesearch_setup 
```

在您的模块中创建一个这样的 SQL 设置文件。

```
<?php
    $installer = $this;
    $data= array (
        'attribute_set' =>  'Default',
        'global'    =>  Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
        'label'     => 'Year',
        'input'     => 'multiselect',
        'type'      => 'text',
        'default_value_text' => 'varchar',
        'unique'    => false,
        'required'  => false,
        'visible'   => true,
        'searchable'=> true,
        'visible_in_advanced_search'    => true,
        'html_allowed_on_front'         => true,
        'comparable'   => false,  
        'backend_type'  => 'varchar',
        'backend'   => 'eav/entity_attribute_backend_array',
        'group'     => 'General',
        'user_defined'  => true,
       );

       $installer->addAttribute('catalog_product','mmy_year',$data);

       $data= array 
        (  
        'attribute_set' =>  'Default',
        'global'  => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
        'label' => 'Make',
        'input' => 'multiselect',
        'type'  => 'text',
        'default_value_text'  => 'varchar',
        'unique'=> false,
        'required'=> false,
        'visible' => true,
        'searchable'=> true,
        'visible_in_advanced_search'=> true,
        'html_allowed_on_front'  => true,
        'comparable'=> false,
        'backend_type'  => 'varchar',
        'backend'=> 'eav/entity_attribute_backend_array',
        'group'  => 'General',
        'user_defined'=> true,
        );    
        $installer->addAttribute('catalog_product','mmy_make',$data);
    $data= array (
          'attribute_set'               =>  'Default',
          'global'                          =>  Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
          'label'                           => 'Model',
          'input'                           => 'multiselect',
          'type'                            => 'text',
          'default_value_text'            => 'varchar',
          'unique'                          => false,
          'required'                    => false,
          'visible'                     => true,
          'searchable'                  => true,
          'visible_in_advanced_search'  => true,
          'html_allowed_on_front'       => true,
          'comparable'                  => false,
          'backend_type'                  => 'varchar',
          'backend'                     => 'eav/entity_attribute_backend_array',
          'group'                           => 'General',
          'user_defined'                    => true,
          );

  $installer->addAttribute('catalog_product','mmy_model',$data);
  $installer->endSetup();
?> 
```

# sql - 正确使用 SELECT WHERE NOT IN

> ID：11961973
> 
> 赞同：1
> 
> 时间：2012-08-14T22:54:19.243
> 
> 标签：sql, select, where, notin

我正在为一个带有 PHP Web 界面的小书店建立一个数据库。对于这个问题，我想显示“产品”表 (prod_core) 中的所有记录，而不显示产品字段“条形码”中的值等于“销售”表 (inc_core) 中的“描述”字段的记录。

实际上，我设法使第一个“销售”突变起作用，但是每当我向“销售”表添加第二条记录时，查询就不再起作用了。（添加的第一条记录除外）。这是我的 SQL 代码：

```
选择 prod_core.prodID、prod_core.title、prod_core.location、prod_core.genre、
       prod_core.price, prod_core.barcode
来自 prod_core
在哪里 prod_core.barcode 不在（
         选择“描述”
         FROM inc_core
         按 prod_core.prodID 分组）
```

我想这与 SQL 不循环有关（它停止在表中搜索符合要求的记录），但我不确定。我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T22:57:02.360

我建议 a`LEFT JOIN`而不是 a `NOT IN`：

```
SELECT
    prod_core.prodID, 
    prod_core.title, 
    prod_core.location, 
    prod_core.genre, 
    prod_core.price, 
    prod_core.barcode
FROM 
    prod_core 
    LEFT JOIN inc_core ON inc_core.`description` = prod_core.barcode
WHERE
    inc_core.`description` IS NULL 
```

此外，由于您的语句中的所有列都不`SELECT`是聚合函数的一部分，因此我删除了`GROUP BY` ~~并将其替换为`DISTINCT`... 但是，我不明白为什么该表应该包含重复项。~~

编辑：我误读了您的查询，尽管这`group by`是在外部查询上，而不是在子查询上... +1 到其他答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T23:06:29.097

您的查询的问题是分组依据是一个字段，但您正在选择另一个。这意味着您的子查询正在为每个产品选择任意描述。无法保证您获得所需的完整列表。

解决此问题的最简单方法是通过以下方式删除组：

```
SELECT prod_core.prodID, prod_core.title, prod_core.location, prod_core.genre,
       prod_core.price, prod_core.barcode
FROM prod_core
WHERE prod_core.barcode NOT IN (SELECT `description` FROM inc_core) 
```

然而，这很可能是低效的。对于带有子查询的“in”，最好的优化是使用 exists。此外，请确保描述中存在索引。这是一个替代版本，专门用于 mysql：

```
SELECT prod_core.prodID, prod_core.title, prod_core.location, prod_core.genre,
       prod_core.price, prod_core.barcode
FROM prod_core
WHERE not exists (select 1 from inc_core where inc_core.description = prod_core.barcode) 
```

就个人而言，我不太喜欢将相关子查询作为“in”的替代品。但是，这是 mysql 最优化的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T23:00:52.877

我认为您不需要 group by 子句，因此您应该能够使用：

```
SELECT prod_core.prodID, prod_core.title, prod_core.location, prod_core.genre, prod_core.price, prod_core.barcode
FROM prod_core
WHERE prod_core.barcode NOT IN (SELECT `description` FROM inc_core) 
```

# android - file:///android_asset/www/index.html 是什么意思？

> ID：11961975
> 
> 赞同：21
> 
> 时间：2012-08-14T22:54:28.820
> 
> 标签：android

`file:///`我想知道从android中的assets文件夹加载html文件是什么意思

它是指向根目录的绝对路径名吗？

顺便说一句，我在 phonegap 的教程中看到了这一点。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-14T23:08:11.573

`file:///`是一个 URI（统一资源标识符），它简单地区别于我们都非常熟悉的标准 URI - `http://`.

它确实意味着在任何环境中都指向根目录的绝对路径名，但在 Android 的上下文中，约定告诉 Android 运行时说“*这里，该目录`www`有一个名为的文件`index.html`位于项目的**根**`assets`***”。**

 **这就是在运行时加载资产的方式，例如，一个小部件将通过指定URI`WebView`来确切地知道在哪里加载嵌入的资源文件。`file:///`

考虑代码示例：

```
WebView webViewer = (WebView) findViewById(R.id.webViewer);
webView.loadUrl("file:///android_asset/www/index.html"); 
```

一个很容易犯的错误是，有些人会推断为 as `file:///android_assets`，注意 URI 中资产的复数形式，并想知道为什么嵌入的资源不起作用！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-02T21:08:18.233

如果有人使用 AndroidStudio，请确保将 assets 文件夹放置在

1.  **应用程序/src/main/assets**

    目录。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-12T19:21:04.363

URI`"file:///android_asset/"`指向`YourProject/app/src/main/assets/`.

*注意：`android_asset/`使用单数（assets）和`src/main/assets`使用复数（assets）。*

假设您有一个`YourProject/app/src/main/assets/web_thing.html`想要在 WebView 中显示的文件。你可以这样引用它：

```
WebView webViewer = (WebView) findViewById(R.id.webViewer);
webView.loadUrl("file:///android_asset/web_thing.html"); 
```

上面的代码片段可能位于您的[Activity](http://developer.android.com/reference/android/app/Activity.html)类中，也可能位于`onCreate`方法中。

这是一个android项目整体目录结构的[指南](http://developer.android.com/tools/projects/index.html)，它帮助我找出了这个答案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-20T19:13:00.247

它实际上被称为`file:///android_asset/index.html`

`file:///android_assets/index.html`会给你一个构建错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-09T08:47:55.847

我花了4个多小时来解决这个问题。我遵循了[http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android的指南](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

我正在使用 Android Studio（由于构建问题，带有 ADT 的 Eclipse 无法正常工作）。

对我有用的解决方案：

1.  我把 /assets/www/index.html 放在 app/src/main/assets 目录下。（注意 AndroidStudio 有不同的视角，如 Project 或 Android）

2.  使用 super.loadUrl("file:/// **android_asset** /www/index.html"); 而不是 super.loadUrl("file:/// **android_assets** /www/index.html"); （没有**）**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-08T19:33:11.730

是 file:/// **android_asset** /... 不是 file:/// **android_assets** /... 注意 assets 的复数是错误的，即使你的文件名是 assets**

# objective-c - AC3 音频不适用于带有 Perian 的 Mountain Lion

> ID：11961977
> 
> 赞同：0
> 
> 时间：2012-08-14T22:54:44.917
> 
> 标签：objective-c, cocoa, audio, video, codec

我正在开发一个视频应用程序，它需要打开用不同编解码器编码的视频文件。

Lion 上一切正常，但最近我升级到 Mountain Lion，AC3 (A52) 音轨停止工作。

有什么解决方法吗，我应该等待 Perian 承诺的最后一个版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:29:24.840

是的，问题与 Perian 包中的 A52Codec.component 有关。[您可以从我的网站http://www.bitfield.se/support/index.html#1](http://www.bitfield.se/support/index.html#1)下载更新的工作版本。好点？

# c# - 在用户控件中调用复选框 onpostback C#

> ID：11961979
> 
> 赞同：0
> 
> 时间：2012-08-14T22:54:47.790
> 
> 标签：c#, asp.net, webforms

我有一个用户控件，其中有一些复选框。在回发时，我想读取复选框的状态。我遇到麻烦的地方是我不知道如何调用用户控件内的控件。

我在每个用户控件中都有很多功能，这就是我这样做的原因。我的控件工作正常我只是不知道如何在回发时在我的 c# 中识别它们，所以我可以在某处打印结果。我也在使用母版页和更新面板。复选框设置为自动回发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:56:38.613

使用`FindControl()`方法找出用户控件中的控件。

```
CheckBox cb = (CheckBox )userControlID.FindControl("childControlId") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:59:05.123

您可以通过以下两种方式之一进行此操作；首先，您可以将控件公开，允许从外部将它们视为 UserControl 的成员。其次，UserControl 的 Controls 属性始终是公共的，并且将包含 CheckBoxes。您必须按类型和名称搜索它们；Linq 可以帮助：

```
var checkbox = myControl.Controls.OfType<CheckBox>().FirstOrDefault(chk=>chk.Name == "checkBoxName"); 
```

# php - 一个mysql语句的两个结果

> ID：11961980
> 
> 赞同：1
> 
> 时间：2012-08-14T22:54:53.930
> 
> 标签：php, mysql, sql

我已经成功地输出了用户朋友的帖子......

```
$query = mysql_query("SELECT * FROM `users_posts` WHERE user_id IN ($friend) ORDER BY `time` DESC"); 
```

这将输出用户的所有朋友帖子。但是，我想获得用户本身的帖子以及朋友们的帖子......这就是我尝试过的......

```
$query = mysql_query("SELECT * FROM `users_posts` WHERE user_id IN ($friend) AND `user_id`=$session_user_id ORDER BY `time` DESC"); 
```

我什至尝试制作另一个mysql语句来加载用户帖子但是当我这样做时，用户帖子首先按照输出时间的顺序输出，然后在用户帖子之后显示朋友帖子......谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:57:09.067

你实际上想要一个`OR`条件：

```
$query = mysql_query("SELECT * FROM `users_posts` WHERE user_id IN ($friend) OR `user_id`=$session_user_id ORDER BY `time` DESC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:57:28.917

尝试：

```
$query = mysql_query("SELECT * FROM `users_posts` WHERE user_id IN ($friend) OR `user_id`=$session_user_id ORDER BY `time` DESC"); 
```

这将返回 user_id 在您的数组中的任何内容；以及用户自己的ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:01:53.760

如果我理解正确你正在尝试做的所有你需要做的就是改变 And 'user_id = $session_iser_id To Or 'user_id = $session_iser_id

# vb.net - 从文本框中读取未知字符串

> ID：11961981
> 
> 赞同：0
> 
> 时间：2012-08-14T22:54:55.027
> 
> 标签：vb.net, string, textbox, console, word

我有一个用作控制台的文本框（在表单应用程序中）。

我想在用户输入时运行某个子：

```
broadcast blabla 
```

潜艇会广播字符串blabla。程序如何只识别第一个单词？

像这样的东西会起作用吗？

```
If ConsoleInput.Text = "broadcast " & command Then
BroadcastMessage(command)
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:59:00.890

您可以使用[`String.Split`](http://msdn.microsoft.com/en-us/library/ms131448%28v=vs.80%29.aspx#Y0)：

```
Dim words As String() = ConsoleInput.Text.Split({" "c}, StringSplitOptions.RemoveEmptyEntries)
If words.Length > 1 AndAlso words(0).ToLower() = "broadcast" Then
    BroadcastMessage(words(1))
End If 
```

**编辑**：如果您想*广播*所有单词，最好使用`String.Substring`：

```
Dim spaceIndex = ConsoleInput.Text.IndexOf(" "c)
If spaceIndex > -1 Then
    Dim firstWord = ConsoleInput.Text.Substring(0, spaceIndex)
    If firstWord.ToLower = "broadcast" Then
        broadcast(ConsoleInput.Text.Substring(spaceIndex + 1))
    End If
End If 
```

# html - 1 行像素缺失 在铬

> ID：11961987
> 
> 赞同：0
> 
> 时间：2012-08-14T22:55:40.077
> 
> 标签：html, css, html-lists

我在我的网站上使用了一个基本列表，它适用于 FF 和 IE。但是，Chrome 缺少一行像素。

[JsFiddle](http://jsfiddle.net/3K8DB/19/)感谢 Jared 的评论。

如果您没有看到缺失的行，请更改缩放值，它将显示为某些值（例如在我的 PC 上为 90%）。

知道问题的根源吗？

截屏：

![在此处输入图像描述](../Images/0f2c558705867ec28ee1aed185b77a8e.png)

灰线跳跃一个像素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T23:36:17.847

*发现的主要问题：*

*   `dt`在某些屏幕尺寸上，和的宽度`dd`，加上水平边距和内边距，每行加起来可能超过 100%。最安全的方法是对宽度以及水平边距和填充使用 % 值，而不是`em`.
*   使用边距将标签与`dd`标签放在同一行`dt`是有问题的。实现布局的一种更安全的方法是浮动每个标签`dt`并为每个标签`dd`指定。使用边距可以正确执行此操作，但浮动元素要简单得多。`clear:both``dt`

[更新了演示](http://jsfiddle.net/Matt_Coughlin/pXrMH/)。*（注意：这个演示没有添加任何边距或填充。无论向水平边距或填充添加多少，和的宽度都`dt`应该`dd`减小。）*

* * *

*发现小字体问题：*

**什么是一致的**

*   没有`font-family`指定，所以使用默认的衬线字体。
*   没有`font-size`指定，所以使用默认值 16px。
*   `line-height:2em`是 font-size 的两倍，也就是 16px 的两倍，也就是 32px（由灰色第一行的高度表示。
*   在 Chrome 和 Firefox 中，灰色第一行的高度都是 32px。

**什么不一致**

*   在 Chrome 中，a 为 16 像素的默认衬线字体以`font-size`12 像素的基线高度（大写字母 H 的高度）呈现。
*   在 Firefox 中，默认 serif 字体的 a`font-size`为 16px，其基线高度为 11px。

**什么可以避免**

默认衬线字体在不同浏览器中呈现不一致。没有办法阻止该字体这样做。但是您可以通过选择默认衬线字体以外的字体来避免一些不一致。一些字体，如 Arial，在浏览器之间呈现更加一致。

**什么是无法避免的**

然而，即便如此，文本呈现方式仍会存在一些不一致。在文本使用的行高空间内，文本的位置通常会因浏览器而异，至少相差 1px。这不是可以预防的。这是操作系统碰巧在那个特定的浏览器中呈现那个特定`font-family`的那个特定`font-size`的结果的结果。`line-height`但是可以通过始终指定显式来最小化不一致`line-height`，这在这种情况下已经完成。

**概括**

选择 a `font-family`、 a`font-size`和 a`line-height`有助于最大程度地减少不一致。但除此之外，文本中总会有一些无法避免的不一致之处。互联网上的每个网站都有一些这样的内容。它通常不是很明显。

# asp.net - ASP.NET MVC3 数据库创建

> ID：11961997
> 
> 赞同：0
> 
> 时间：2012-08-14T22:56:34.830
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework

所以，我在课堂上，我们通过主机登录数据库并运行 sql 命令来创建表等等，以一种很好的老式方式创建数据库。这是我习惯于使用简单网站的 php 方面的方式。

然后我遇到了使用 DBContext 生成数据库结构的教程（[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-model](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-model)）我相信脚手架。这是我们期望将其用作该框架的一部分的新功能吗？或者使用此功能不是最佳实践。安全性与功能性各自的优缺点是什么。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:59:40.897

好吧，如果你有一个数据库，你觉得不必真正关心这个想法如何？您喜欢编写数据访问层还是更愿意创建您的类并让 MVC 框架担心如何持久化它？

我认为每种方法都有优点和缺点。一些自动生成的数据库内容可能有点笨拙，无论如何我个人喜欢创建数据库。

这是一篇可能有帮助的文章：

[http://msdn.microsoft.com/en-us/data/gg685489.aspx](http://msdn.microsoft.com/en-us/data/gg685489.aspx)

# silverlight - 在 Silverlight 中将日期时间绑定到文本框

> ID：11961999
> 
> 赞同：0
> 
> 时间：2012-08-14T22:56:44.730
> 
> 标签：silverlight, binding

我在数据库中有几个表，数据类型为 DateTime，默认值 getdate() 在 sql server 中。当我将它绑定到文本框时，它默认显示 1/1/0001。我正在使用 Silverlight Ria 服务。

```
<TextBox Text="{Binding Mode=TwoWay, Path=LST_UPDT_TS, StringFormat=\{0:D\}}"/> 
```

感谢您的帮助和您的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:04:46.110

文本框显示 DateTime 的默认值，这意味着两件事：

1.  绑定有效（否则 TextBox 将为空）。
2.  属性`DateTime LST_UPDT_TS`...尚未设置

您应该检查属性设置是否正确，并且您绑定到正确的实例。