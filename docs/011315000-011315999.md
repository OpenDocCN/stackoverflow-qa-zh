# StackOverflow 问答 11315000-11315999

# websphere - 如何从公共 Internet 访问部署在 IBM SMART Cloud 的 Websphere server 7.0 中的应用程序？

> ID：11315000
> 
> 赞同：3
> 
> 时间：2012-07-03T16:12:36.393
> 
> 标签：websphere, cloud, maximo

我已经安装了一个中间件组件，并且 websphere 7.0 作为中间件安装的一部分进行了安装。我已经在这个 websphere 7.0 中部署了 Maximo 7.5 应用程序 ear (maximo.ear)。

我在 SMART 云实例中非常成功地访问了这个应用程序。

我也禁用了 Windows 防火墙设置。但它仍然无法正常工作。

我不知道在哪里配置以及配置什么来从部署在 websphere 服务器中的公共 Internet 访问此 Maximo 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-23T02:19:17.933

通常您需要打开一个端口以便从网络外部访问。由于我对您的设置知之甚少，因此这里有一些步骤可以帮助您。

1.  检查需要打开哪个端口，maximo 默认为 80 端口（大多数 http 服务器默认为 80 端口。
2.  检查您是否有公共 IP 地址（这是一项要求）。如果您没有公共地址，您可以使用 dns 工具将流量转发给您。
3.  打开路由器上的端口，这在路由器上可能有所不同，但关键是打开您在步骤 1 中找到的端口（可能是端口 80）

**

## 检查您需要打开的端口很简单：

**

如果您的地址看起来像，`http://ipaddressornameofyourserver/maximo`那么它是端口 80。

如果它是你`http://ipaddressornameofyourserver:****/maximo`的`****`端口。

## 检查您是否有公共 ip

1.  问你ISP
2.  [使用whatsmyip](http://whatsmyip.org)检查你的IP （看看它是否不时改变，如果改变你没有公共IP，但这可能需要一些时间）
3.  询问您的 IT 人员，如果您自己不是来自 IT 部门，以及您是否有 IT 部门。

## 打开路由器中的端口

1.  请与 IT 部门核对（如果您自己不是该部门的成员，或者您是该部门的一员）
2.  查阅您的路由器指南

通常您会在以下位置找到它：

*   转发端口
*   应用程序端口
*   防火墙规则

## 不要忘记

有时它们都是可以阻止进出您服务器的流量的防火墙（硬件或软件），请也允许或禁用该防火墙。请记住，这与您服务器上的防火墙不同（您已经禁用的防火墙）

# linux - X KeyPress/Release 事件捕获与焦点窗口无关

> ID：11315001
> 
> 赞同：10
> 
> 时间：2012-07-03T09:19:05.137
> 
> 标签：linux, c

无论哪个窗口处于焦点或指针在哪里，我都想记录所有传入的按键事件。

我编写了一个示例代码，它应该捕获当前窗口的按键事件。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <locale.h>
#include <stdint.h>
#include <stdarg.h>
#include <errno.h>
#include <pthread.h>
#include <X11/Xlib.h>
#include <X11/Xos.h>
#include <X11/Xfuncs.h>
#include <X11/Xutil.h>

#include <X11/Xatom.h>
int _invalid_window_handler(Display *dsp, XErrorEvent *err) {
    return 0;
}

int main() 
{
    Display *display = XOpenDisplay(NULL); 
    int iError;
    KeySym k;
    int revert_to;
    Window window;
    XEvent event;
    Time time;
    XSetErrorHandler(_invalid_window_handler);
    XGetInputFocus(display, &window, &revert_to);
    XSelectInput(display, window, KeyPressMask | KeyReleaseMask );
    iError = XGrabKeyboard(display, window,
                          KeyPressMask | KeyReleaseMask,
                          GrabModeAsync,
                          GrabModeAsync,
                          CurrentTime); 
    if (iError != GrabSuccess && iError == AlreadyGrabbed) {
        XUngrabPointer(display, CurrentTime);
        XFlush(display);
        printf("Already Grabbed\n");    
    } else if (iError == GrabSuccess) {
        printf("Grabbed\n");
    }
    while(1) {
          XNextEvent(display,&event);
          switch (event.type) {
              case KeyPress : printf("Key Pressed\n"); break;
              case KeyRelease : printf("Key Released\n"); break;
              case EnterNotify : printf("Enter\n"); break;
          }
    }
    XCloseDisplay(display);
    return 0;
} 
```

我正在调用 XGrabKeyboard 来捕获键盘，因为创建窗口的应用程序可能已经抓取了键盘事件。使用上述代码，我能够抓住键盘，但无法在 while 循环内接收键盘上任何键的 KeyPress 或 KeyRelease 事件。由于我无法接收事件，我在代码中是否缺少任何内容？非常感谢任何帮助。

我的最终目标是捕捉屏幕上的按键事件，而不管窗口是否处于焦点。我已经给出了仅聚焦窗口的示例代码，以便代码可读。我会做 XQueryTree 来获取所有 Windows 并应用上面给出的相同逻辑来获得预期的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T04:15:37.530

您需要有一个映射窗口才能抓住键盘。这是一个概念证明：

```
#include <X11/Xlib.h>
#include <X11/keysym.h>
#include <stdio.h>

int main()
{
    Display *display;
    Window   window, rootwindow;
    XEvent   event;
    KeySym   escape;

    display = XOpenDisplay(NULL);
    rootwindow = DefaultRootWindow(display);
    window = XCreateWindow(display, rootwindow,
                           -99, -99, 1, 1, /* x, y, width, height */
                           0, 0, InputOnly, /* border, depth, class */
                           CopyFromParent, /* visual */
                           0, NULL); /* valuemask and attributes */

    XSelectInput(display, window, StructureNotifyMask | SubstructureRedirectMask | ResizeRedirectMask | KeyPressMask | KeyReleaseMask);
    XLowerWindow(display, window);
    XMapWindow(display, window);

    do {
        XNextEvent(display, &event);
    } while (event.type != MapNotify);

    XGrabKeyboard(display, window, False, GrabModeAsync, GrabModeAsync, CurrentTime);
    XLowerWindow(display, window);

    escape = XKeysymToKeycode(display, XK_Escape);
    printf("\nPress ESC to exit.\n\n");
    fflush(stdout);

    while (1) {

        XNextEvent(display, &event);

        if (event.type == KeyPress) {
            printf("KeyPress: keycode %u state %u\n", event.xkey.keycode, event.xkey.state);
            fflush(stdout);

        } else
        if (event.type == KeyRelease) {

            printf("KeyRelease: keycode %u state %u\n", event.xkey.keycode, event.xkey.state);
            fflush(stdout);

            if (event.xkey.keycode == escape)
                break;
        } else
        if (event.type == UnmapNotify) {

            XUngrabKeyboard(display, CurrentTime);
            XDestroyWindow(display, window);
            XCloseDisplay(display);

            display = XOpenDisplay(NULL);
            rootwindow = DefaultRootWindow(display);
            window = XCreateWindow(display, rootwindow,
                                   -99, -99, 1, 1, /* x, y, width, height */
                                   0, 0, InputOnly, /* border, depth, class */
                                   CopyFromParent, /* visual */
                                   0, NULL); /* valuemask and attributes */

            XSelectInput(display, window, StructureNotifyMask | SubstructureRedirectMask | ResizeRedirectMask | KeyPressMask | KeyReleaseMask);
            XLowerWindow(display, window);
            XMapWindow(display, window);

            do {
                XNextEvent(display, &event);
            } while (event.type != MapNotify);

            XGrabKeyboard(display, window, False, GrabModeAsync, GrabModeAsync, CurrentTime);
            XLowerWindow(display, window);

            escape = XKeysymToKeycode(display, XK_Escape);

        } else {

            printf("Event type %d\n", event.type);
            fflush(stdout);
        }
    }

    XUngrabKeyboard(display, CurrentTime);

    XDestroyWindow(display, window);
    XCloseDisplay(display);
    return 0;
} 
```

它使用一个小窗口（我什至没有费心为其设置标题）它降低到窗口堆栈的底部，因此它位于任何现有窗口的后面。您可以与窗口管理器（WM）通信，使窗口无装饰透明，或图标化，使屏幕上没有可见窗口；上面的代码不打扰。

我使用的技巧是，每当用户设法取消映射窗口（例如，通过移动到另一个工作区）时，代码都会破坏旧窗口，创建一个新窗口，然后重新抓取键盘。它应该足够快，不会丢失任何按键。可能还有其他方法可以做到这一点，但我怀疑它们需要与窗口管理器进行更密切的交互。

请注意，我从来不需要如此执着地真正抓住键盘，所以上述方法可能不是最简单的。这只是我认为可行的一种方法。可能有更好的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-05T16:26:44.203

以下命令会将整个 X 会话的所有事件的列表打印到控制台：

```
$ xinput test-xi2 --root 
```

示例输出：

```
⎡ Virtual core pointer                      id=2    [master pointer  (3)]
⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
⎜   ↳ USB Mouse                                 id=10   [slave  pointer  (2)]
⎜   ↳ MCE IR Keyboard/Mouse (ite-cir)           id=11   [slave  pointer  (2)]
⎣ Virtual core keyboard                     id=3    [master keyboard (2)]
    ↳ Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]
    ↳ Power Button                              id=6    [slave  keyboard (3)]
    ↳ Video Bus                                 id=7    [slave  keyboard (3)]
    ↳ Power Button                              id=8    [slave  keyboard (3)]
    ↳ Oracle USB Keyboard                       id=9    [slave  keyboard (3)]
    ↳ ITE8713 CIR transceiver                   id=12   [slave  keyboard (3)]
EVENT type 14 (RawKeyRelease)
    device: 3 (9)
    detail: 36
    valuators:

EVENT type 3 (KeyRelease)
    device: 9 (9)
    detail: 36
    flags: 
    root: 1324.55/821.81
    event: 1324.55/821.81
    buttons:
    modifiers: locked 0x10 latched 0 base 0 effective: 0x10
    group: locked 0 latched 0 base 0 effective: 0
    valuators:
    windows: root 0x9c event 0x9c child 0x7291d5
EVENT type 15 (RawButtonPress)
    device: 2 (10)
    detail: 1
    valuators:
    flags: 

EVENT type 4 (ButtonPress)
    device: 10 (10)
    detail: 1
    flags: 
    root: 1324.55/821.81
    event: 1324.55/821.81
    buttons:
    modifiers: locked 0x10 latched 0 base 0 effective: 0x10
    group: locked 0 latched 0 base 0 effective: 0
    valuators:
    windows: root 0x9c event 0x9c child 0x7291d5
EVENT type 16 (RawButtonRelease)
    device: 2 (10)
    detail: 1
    valuators:
    flags: 
```

# vbscript - 使用 vbscript 向多个收件人发送电子邮件

> ID：11315002
> 
> 赞同：8
> 
> 时间：2012-07-03T16:12:40.667
> 
> 标签：vbscript, outlook, mapi

我的 vbscript 会自动向收件人发送电子邮件，但有人知道如何向其中添加多个收件人吗？

```
...
Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
MyTime = Now

ToAddress = "email@address.com"
MessageSubject = "It works!."
MessageBody = "Good job on that script." 
MessageAttachment = some attachment
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf & MyTime
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send 
```

这就是我现在所拥有的。它工作正常。但是，我希望有多个收件人。提前致谢。

```
newMail.CC = "person1@domain1.org;person2@domain2.org;person3@domain3.org" 
```

上面这条线有效！

它与 .BCC 的工作方式相同，以防有人不想显示联系人列表。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T16:46:01.877

呼叫`MailItem.Recipients.Add`每个收件人或将//`To`属性设置为单独的地址列表。`CC``BCC``";"`

# python - 函数签名中变量名前的 * 和 ** 是什么意思？

> ID：11315010
> 
> 赞同：112
> 
> 时间：2012-07-03T16:13:05.123
> 
> 标签：python

> **可能重复：**
> [了解 Python 中的 kwargs](https://stackoverflow.com/questions/1769403/understanding-kwargs-in-python)

我读过一段python代码，不知道这段代码中*和**是什么意思：

```
def functionA(self, *a, **kw):
   // code here 
```

我只知道*的一种用途：提取它对方法或构造函数参数的所有属性。

如果上述功能是这样，那么其余的：** 呢？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-07-03T16:16:36.097

在**函数头**内部：

`*`将所有位置参数收集在一个元组中。

`**`收集字典中的所有关键字参数。

```
>>> def functionA(*a, **kw):
       print(a)
       print(kw)

>>> functionA(1, 2, 3, 4, 5, 6, a=2, b=3, c=5)
(1, 2, 3, 4, 5, 6)
{'a': 2, 'c': 5, 'b': 3} 
```

在**函数调用**中：

`*`将列表或元组解包到位置参数中。

`**`将字典解压缩为关键字参数。

```
>>> lis=[1, 2, 3, 4]
>>> dic={'a': 10, 'b':20}
>>> functionA(*lis, **dic)  #it is similar to functionA(1, 2, 3, 4, a=10, b=20)
(1, 2, 3, 4)
{'a': 10, 'b': 20} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-03T16:15:22.343

`**`接受指定的参数名称并将它们放入字典中。所以：

```
def func(**stuff):
    print(stuff)

func(one = 1, two = 2) 
```

将打印：

```
{'one': 1, 'two': 2} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-03T16:15:50.863

`**`表示函数的命名参数。

```
$ cat 2.py
def k(**argv):
    print argv

k(a=10, b = 20)

$ python 2.py
{'a': 10, 'b': 20} 
```

`argv`是一个包含函数的所有命名参数的字典。

你也可以扭转它。您可以将字典用作函数的一组参数：

```
def k(a=10, b=20):
  print a
  print b

d={'a':30,'b':40}
k(**d) 
```

会打印

```
30
40 
```

# asp.net-mvc - 在 MVC 的 Idp 发起的 SSO 环境中使用 WIF

> ID：11315016
> 
> 赞同：1
> 
> 时间：2012-07-03T16:13:37.627
> 
> 标签：asp.net-mvc, wif, saml-2.0

我有一个 MVC 4 应用程序从发起 IdP 接收 SAML2 令牌。我可以在令牌到达时看到它，并且可以对其进行解密。但是，我想使用 WIF 3.5 执行此操作，并且当我尝试使用 WSSecurityTokenSerializer 时似乎遇到了 SAML 命名空间问题，如下所示：

> System.Xml.XmlException 未被用户代码处理 HResult=-2146232000 Message=Cannot read the token from the 'Response' element with the 'urn:oasis:names:tc:SAML:2.0:protocol' namespace for BinarySecretSecurityToken, with a ' ' 值类型。如果预计此元素有效，请确保将安全性配置为使用指定名称、命名空间和值类型的令牌。Source=System.ServiceModel LineNumber=0 LinePosition=0 StackTrace：在 System.ServiceModel.Security.WSSecurityTokenSerializer.ReadTokenCore(XmlReader reader, SecurityTokenResolver tokenResolver) at System.IdentityModel.Selectors.SecurityTokenSerializer.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver) 在 SamlHandlingTests。在 g 中的 SamlTests.TestMethod1()：

我在这里看到了[StackOverflow 问题](https://stackoverflow.com/questions/6108564/problems-reading-authenticating-a-saml-assertion-in-net-using-wssecuritytokense)的帖子，但直接使用 XML 做事的最终解决方案不适合我，因为我需要能够将其作为标准 IdP 发起的解决方案运行。

因此我有两个问题：

1.  有没有人设法用 WIF 克服这个错误？（我不需要 WIF 扩展，因为我只关心处理 SAML2 令牌，而不是协议。

2.  要在 IdP 发起的环境中使用 WIF，我知道不需要配置，我只需关闭身份验证并检查传入的令牌。但是，我更愿意在完整的 WIF 管道中检查令牌，但这需要配置。如何配置 WIF 以在此 IdP 启动的环境中运行？

非常感谢

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:52:40.713

如果您需要反序列化令牌，您可以考虑使用[Saml2SecurityTokenHandler](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.tokens.saml2.saml2securitytokenhandler.aspx)。

我还要问，您的场景是否需要您自己反序列化令牌？WIF 与 ASP.NET MVC 应用程序很好地集成，因此您可以转而依赖 WIF 为您执行此操作。在此处查看 Eugenio 的[答案](https://stackoverflow.com/questions/2621496/asp-net-mvc-2-and-authentication-using-wif-windows-identity-foundation)。

# asp.net - ASP.Net WebForms 中的 Twitter Bootstrap `container` div

> ID：11315018
> 
> 赞同：2
> 
> 时间：2012-07-03T16:13:48.420
> 
> 标签：asp.net, webforms, twitter-bootstrap

[我在一页上的几个容器](https://stackoverflow.com/questions/11169455/several-containers-at-one-page)和[Twitter Bootstrap Containers](https://stackoverflow.com/questions/11203614/twitter-bootstrap-containers)中找到了一些关于`container`使用的信息，但是我想要更多的输入。

`container`从 Twitter Bootstrap 自己的示例中，我们可以在同一页面上看到多个div。但是 ASP.Net MasterPages 和 UserControls 呢？

是否应该在 Master 上使用单个`container`，因此将所有内容区域包含在单个顶级中`container`（然后内容页面将由`row`div 组成）？还是应该将`container`div 下推到内容页面？

更进一步，由几个`row`div组成的相当复杂的 UserControl (.ascx) 呢？ascx 标记应该有自己的`container`，还是以`row`div 开头，假设包含页面有一个封闭`container`？

`container`最后，更一般地说，是否有人有关于何时使用新div的经验法则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T21:33:18.750

我将容器 div 放在我的母版页中，因为我的所有页面都将使用子页面中的行/跨度。万一我希望我的子页面不使用容器，我只需关闭 div 标签...

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
  </div> <!-- ending the container -->

  <!-- whatever -->

  <div> <!-- the master page ends the container div, so we'll add this instead -->
</asp:Content> 
```

bootstrap 和 asp.net 的一些有用提示...

**单选按钮和复选框。** 文本出现在单选框/复选框下方。通过将您的 asp.net 单选按钮列表控件或类似控件嵌套在具有`radio`css 类或`checkbox`css 类的 div 中，并将 RepeatLayout 设置为 flow 来解决此问题。

```
<div class="radio">
    <asp:RadioButtonList ID="rblFleettype" runat="server" RepeatLayout="Flow">
        <asp:ListItem Selected="True">Item 1</asp:ListItem>
        <asp:ListItem>Item 2</asp:ListItem>
    </asp:RadioButtonList>
</div> 
```

**错误消息的警报。** 许多 asp.net 控件可以转换为模板以暴露错误文字/标签，然后您可以应用`CssClass="alert alert-error"`到错误标签。但是如果你这样做，即使还没有错误，它也会显示红色的错误边界。要解决此问题，您可以对文字/标签使用 PreRender 事件来检查`Text`属性并查看它是否为空，然后`Visibility`相应地设置属性。

# jquery - 如何使用带有 AJAX 内容的 ColorBox jQuery 插件

> ID：11315024
> 
> 赞同：0
> 
> 时间：2012-07-03T16:14:23.947
> 
> 标签：jquery, colorbox

我正在使用 jQuery ColorBox 插件，但它不适用于我的 AJAX 内容，我不知道如何解决这个问题。

我展示了一篇文章，图片库位于文章的底部。用户可以滚动浏览这些帖子，并使用 AJAX 来刷新它们。

在最初的帖子中，该插件运行良好，但在任何带有画廊的 AJAX 生成帖子上，该插件都不会触发。

我用来调用插件的代码 -

```
jQuery(document).ready(function(){

    jQuery(".lightbox").colorbox({
        rel: 'lightbox',
        height: '90%',
        slideshow: true,
        slideshowStart: 'Start Slideshow - ',
        slideshowStop: 'Pause Slideshow - '
    });

}); 
```

链接到 ColorBox 插件页面 - [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:38:32.000

> 但是在任何带有画廊的 AJAX 生成的帖子上，该插件都不会触发。

进行 ajax 调用后，您需要再次分配颜色框，以便将其应用于新元素。您的 ajax 调用将为执行此类操作提供回调。

# jquery - Jquery 幻灯片切换和 Cookie

> ID：11315027
> 
> 赞同：0
> 
> 时间：2012-07-03T16:14:37.503
> 
> 标签：jquery, cookies, slidetoggle

我对 jquery 还是很陌生，我得到了这个 slideToggle 容器，但现在我想保存一个 cookie，如果容器是否隐藏，那么如果刷新页面，它会保持当前状态。

我听说过 jquery cookie 插件，但说实话并没有真正理解它。:(

谁能帮我吗？

到目前为止，我的代码非常简单：

```
$(function(){
 $("#hideslide").click(function(){
  $(this).next().slideToggle();
 });
}); 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:24:06.093

jQuery Cookie 插件（[在此处找到](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)）是在 jQuery 中使用 cookie 的最简单方法。

要设置 cookie，将执行以下操作：

```
$.cookie("name", "content"); 
```

获取 cookie 也很简单：

```
$.cookie("name"); 
```

因此，如果设置了 cookie，您应该检查页面加载：

```
if($.cookie("name") != null) {
    // Cookie set, action here
} 
```

在单击要切换的项目时，检查是否设置了 cookie。如果已设置，请将其删除，否则，请设置：

```
if($.cookie("name") != null) {
    $.cookie("name", null); (null as value will remove the cookie)
}
else {
    $.cookie("name", "content");
} 
```

我自己使用这个插件，这就是你所需要的。简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:18:57.617

如果您的客户端浏览器目标是 IE8+，那么您可以并且我认为应该使用`localStorage`它。

```
localStorage.setItem('mySlideState', "open"); 
```

然后测试：

```
if(localStorage.getItem('mySlideState') == 'open') {
    //do stuff
} 
```

您可以通过 slideToggle 上的回调来实现这一点

```
$('#highSlide').slideToggle(function () {
    //set localStorage to value here
}); 
```

Mozilla 文档： [https ://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

# android - 如何获取 Android Touch 事件（运动事件）的开始坐标和结束坐标？

> ID：11315030
> 
> 赞同：3
> 
> 时间：2012-07-03T16:14:44.570
> 
> 标签：android, coordinates, touch-event

作为在线课程的一部分，我被要求修改现有代码。目前，应用程序注册并显示屏幕被触摸位置的 x 和 y 坐标以及以毫秒为单位的时间量。

我想添加获取开始和结束坐标的功能，即手指在哪里开始和在拖动时结束。目前注册的坐标似乎只是结束的坐标。如何添加两组坐标（例如，如果我想计算运动事件的距离）？这是代码的一部分。谢谢你的帮助！

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    Calendar tiempoInicio = null;
    Calendar tiempoFinal = null;

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        int x = (int)event.getX();
        int y = (int)event.getY();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
                tiempoInicio = Calendar.getInstance();
                break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_UP:
                tiempoFinal = Calendar.getInstance();

                Intent intent = new Intent (
                                   AplicacionSencillaActivity.this,
                                AplicacionSencillaResults.class);
                Bundle bundle = new Bundle();
                bundle.putLong(
                                "TIEMPOPRESIONADO",
                                tiempoFinal.getTimeInMillis() -
                                 tiempoInicio.getTimeInMillis());
                bundle.putInt("X", x);
                bundle.putInt("Y", y);

                intent.putExtras(bundle);
                startActivity(intent);
                break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:28:23.703

要获取起始坐标，您还需要在事件期间获取并保存`getX()`，因为这表示移动的开始。`getY()``ACTION_DOWN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:33:19.317

实际上，您的代码大部分是正确的，`ACTION_DOWN`将为您提供开始，`ACTION_UP`结束。你的错误是压倒一切[`onTouchEvent()`](http://developer.android.com/reference/android/app/Activity.html#onTouchEvent%28android.view.MotionEvent%29)的 - 阅读描述，它说只有在没有视图处理触摸时才会调用它，所以你的触摸可能会被你的一些子视图拦截。

[`dispatchTouchEvent()`](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)而是覆盖，你会得到所有的接触。不要忘记打电话`super.dispatchTouchEvent()`，否则您将停止将触摸传递到您的活动中的视图。

# sql - 如果我将 360 个月添加到 begin_date，如何使用查找维表准确获取 end_date？

> ID：11315034
> 
> 赞同：1
> 
> 时间：2012-07-03T16:14:56.893
> 
> 标签：sql, database, date, informix, date-arithmetic

编辑： begin_date 和 end_date 是任何表中的类型 DATE 列。

我有以下维度表，它提供了从 1980 年到 2500 年每个月的总天数：

```
CREATE TABLE total_days
    (
from_date     DATE,
to_date       DATE,
days_in_month SMALLINT
    );

from_date   to_date     days_in_month
1980-01-01  1980-01-31  31
1980-02-01  1980-02-29  29
...
2500-11-01  2500-11-30  30
2500-12-01  2500-12-31  31 
```

如果要向 begin_date 添加 360 个月，我应该如何构造 SQL 查询以获得准确的 end_date？.. 我是否需要以任何方式更改维度表以实现我的目标？

编辑：必须在不使用任何本机 SQL 日期算术函数的情况下执行日期算术。必须通过在维度表中查找 begin_date 来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:35:08.643

我想你有你的理由 - 这是一个非常简单的技巧 - **假设事实表每个月都有一行 -** 添加一个代表月份编号的新列，从 1 开始并按时间顺序自动递增，**而不是**重新开始每年。

```
SELECT B.* 
FROM SO_total_days2 A
INNER JOIN SO_total_days2 B ON B.monthnumber = A.monthnumber + 360
WHERE A.from_date =  '2010-01-01'

from_date   to_date     days_in_month monthnumber
1980-01-01  1980-01-31  31    1
1980-02-01  1980-02-29  29    2
1980-03-03  1980-03-31  31    3
...
1981-01-01  1981-01-31  31    13
1981-12-01  1981-12-31  31    24
...
1985-01-01  1985-01-31  31    49
1985-12-01  1985-12-31  31    60 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:49:40.110

这就是我想象你的“事实表”的样子：

```
declare @dt datetime
    set @dt = '7-1-2012'

;
with date_table as  (
        select  @dt as [Start Date],
                dateadd(d,-1,dateadd(mm,1,@dt)) as [End Date],
                datepart(d,dateadd(d,-1,dateadd(mm,1,@dt))) as [Days]

        union ALL

        select  dateadd(mm, 1, [Start Date]) as  [Start Date],
                dateadd(d,-1,dateadd(mm,1,dateadd(mm, 1, [Start Date]))) as [End Date], 
                datepart(d,dateadd(d,-1,dateadd(mm,1,dateadd(mm, 1, [Start Date])))) as [Days]

        from    date_table
        where   dateadd(mm, 1, [Start Date]) <= dateadd(m,500,@dt))

select  [Start Date], [End Date], [Days]
into    #temp
from    date_table

option (MAXRECURSION 0) 
```

这是选择日期。（注意这些语句中没有包含 DATEADD 或 DATEPART）

```
select  finish.[Start Date], finish.[End Date], finish.[Days]
from    (select rownum
         from   (select [Start Date], [End Date], [Days], row_number() over (order by [Start Date]) as rownum
                    from    #temp) as x
         where  x.[Start Date] = '2012-07-01 00:00:00.000' ) as start 

        join    (select [Start Date], [End Date], [Days], 
                        row_number() over (order by [Start Date]) as rownum
                 from   #temp) as finish
            on finish.rownum = start.rownum + 360 
```

我在下面阅读了您的评论...如果您想总结日子或其他事情，这就是您可以做到的：（因此从 2012 年 7 月 1 日开始，持续 360 个月... date_diff_days 结果将是360 个月的总天数...使用我制作的#temp 表...我假设它与您的事实表相似...我有 10957 天）

```
select  sum(dayscount.[Days]) as date_diff_days
from    (select rownum
         from   (select [Start Date], [End Date], [Days], row_number() over (order by [Start Date]) as rownum
                    from    #temp) as x
         where  x.[Start Date] = '2012-07-01 00:00:00.000' ) as start 

        join    (select [Start Date], [End Date], [Days], 
                        row_number() over (order by [Start Date]) as rownum
                 from   #temp) as finish
            on finish.rownum = start.rownum + 360

        join (select    [Start Date], [End Date], [Days], 
                        row_number() over (order by [Start Date]) as rownum
                 from   #temp) as dayscount
            on dayscount.rownum >= start.rownum and 
                dayscount.rownum < finish.rownum 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T17:26:40.760

如果我要与数据库无关，我会稍微更改一下事实表：

```
CREATE TABLE total_days
(
  year          INT,
  month         TINYINT,
  from_date     DATE,
  to_date       DATE,
  days_in_month SMALLINT
);

year  month  from_date   to_date     days_in_month
------------------------------------------------
1980    1    1980-01-01  1980-01-31   31
1980    2    1980-02-01  1980-02-29   29
...
2500   11    2500-11-01  2500-11-30   30
2500   12    2500-12-01  2500-12-31   31 
```

然后你可以使用类似的东西：

```
SELECT td.* 
FROM 
      total_days AS td 
   CROSS JOIN
      ( SELECT year, month
        FROM total_days 
        WHERE from_date <= @StartingDate 
          AND @StartingDate <= to_date
      ) AS st
   CROSS JOIN
      ( SELECT 360 AS add_months ) AS param
WHERE td.year = st.year + ( st.month -1 + add_months ) / 12
  AND td.month = 1 + ( st.month - 1 + add_months ) % 12 )
; 
```

或更简单的（但更难优化效率：

```
WHERE 12 * td.year + td.month = 
      12 * st.year + st.month + add_months 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T16:25:02.053

为什么是事实表？大多数数据库对日期/时间操作都有本机支持。在 MS SQL Server 中，您可以使用[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)执行此操作。

我看到您用“informix”标记了您的问题，但没有在您的问题中指定任何版本详细信息。 [这是来自 IBM Informix 11.50 的 ADD_MONTHS 函数。](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=/com.ibm.sqls.doc/ids_sqs_1531.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T16:28:22.630

你可以使用[间隔](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

```
mysql> SELECT '2008-12-31 23:59:59' + INTERVAL 1 month;
+------------------------------------------+
| '2008-12-31 23:59:59' + INTERVAL 1 month |
+------------------------------------------+
| 2009-01-31 23:59:59                      |
+------------------------------------------+
1 row in set (0.00 sec)

mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2012-07-03 12:27:46 |
+---------------------+
1 row in set (0.00 sec)

mysql> SELECT now() + INTERVAL 30 month;
+---------------------------+
| now() + INTERVAL 30 month |
+---------------------------+
| 2015-01-03 12:27:49       |
+---------------------------+
1 row in set (0.00 sec) 
```

编辑：

```
mysql> SELECT STR_TO_DATE('01,5,2013','%d,%m,%Y') + interval 30 month;
+---------------------------------------------------------+
| STR_TO_DATE('01,5,2013','%d,%m,%Y') + interval 30 month |
+---------------------------------------------------------+
| 2015-11-01                                              |
+---------------------------------------------------------+
1 row in set (0.00 sec) 
```

编辑2：

```
mysql> show create table tiempo;
+--------+------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                   |
+--------+------------------------------------------------------------------------------------------------+
| tiempo | CREATE TABLE `tiempo` (
  `fecha` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+--------+------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select fecha + interval 20 month from tiempo;
+---------------------------+
| fecha + interval 20 month |
+---------------------------+
| NULL                      |
| 2001-10-02 02:02:02       |
+---------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T21:23:51.447

如果您的起始日期与列出的完全相同，并且您总是添加月份，您可以使用这个：

```
SELECT max (to_date)
  FROM (SELECT ROW_NUMBER () OVER (ORDER BY from_date) AS Row,
                from_date,
                to_date,
                days_in_month
         FROM total_days
        WHERE from_date > '1/1/1982'
      GROUP BY from_date, to_date, days_in_month) MyDates
 WHERE Row <= 360 
```

# lisp - 定义语法方案使用

> ID：11315040
> 
> 赞同：4
> 
> 时间：2012-07-03T16:15:22.233
> 
> 标签：lisp, scheme

从昨天开始，我一直在尝试为方案编写一个特殊情况语句，该语句将执行以下操作：

```
(define (sort x)
  (cond ((and (list? x) x) => (lambda (l)
                                (sort-list l)))
        ((and (pair? x) x) => (lambda (p)
                        (if (> (car p) (cdr p))
                            (cons (cdr p) (car p))
                            p)))
        (else "here"))) 
```

而不是使用所有的and's和cond's语句，我会：

```
(define (sort x)
  (scase ((list? x) => (lambda (l)
                                (sort-list l)))
         ((pair? x) => (lambda (p)
                        (if (> (car p) (cdr p))
                            (cons (cdr p) (car p))
                            p)))
        (else "here"))) 
```

到目前为止，我能做的是：

```
(define (sort x)
  (scase (list? x) (lambda (l)
                      (sort-list l)))
  (scase (pair? x) (lambda (p)
                        (if (> (car p) (cdr p))
                            (cons (cdr p) (car p))
                            p)))) 
```

使用此代码：

```
(define-syntax scase
  (syntax-rules ()
    ((if condition body ...)
     (if condition
         (begin
           body ...))))) 
```

我现在想做的就是允许 scase 语句有多个参数，如下所示：

```
(scase ((list? (cons 2 1)) 'here)
       ((list? '(2 1)) 'working)) 
```

但我似乎无法弄清楚我该怎么做。也许你们可以给我一点帮助？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:30:02.940

我找到了我的问题的解决方案，这里是：

```
(define-syntax cases
  (syntax-rules ()
    ((_ (e0 e1 e2 ...)) (if e0 (begin e1 e2 ...)))
    ((_  (e0 e1 e2 ...) c1 c2 ...)
     (if e0 (begin e1 e2 ...) (cases c1 c2 ...))))) 
```

无论如何谢谢大家:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:57:12.913

如果这是学习如何使用语法规则的练习，请忽略此答案。

我看到了一种简化您开始使用的代码的方法。

```
(define (sort x)
  (cond ((list? x)
            (sort-list x))
        ((pair? x)
            (if (> (car x) (cdr x))
                (cons (cdr x) (car x))
                x)))
        (else "here"))) 
```

由于所有`(and (list? x) x) => (lambda l ...`要做的就是看看是否`x`是一个列表，然后绑定`l`到`x`, （因为`#f`不是一个列表，并且`'()`不是假的，至少在 Racket 中），你可以跳过所有这些并使用`x`. 你不需要使用`=>`in case，在这种情况下它没有帮助。 `=>`如果您想进行测试以在成功或其他情况下返回有用的东西，这很有用`#f`。

现在，如果您想使用宏，那么您将需要澄清您希望它做得更好的事情。我认为那个案例已经做了你想要的。您现有的宏只是`if`，所以我不确定如何扩展它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:24:08.150

这是一个解决方案：

```
#lang racket

(require mzlib/defmacro)

(define-syntax scase
  (syntax-rules (else)
    ((_ (else body1)) body1)
    ((_ (condition1 body1) (condition2 body2) ...)
     (if condition1
         body1
         (scase (condition2 body2) ...)))))

(define (sort1 x)
  ((scase ((list? x) (lambda (l)
                      (sort l <)))
         ((pair? x) (lambda (p)
                      (if (> (car p) (cdr p))
                          (cons (cdr p) (car p))
                          p)))
         (else (lambda (e) "here")))
   x)) 
```

它适用于 DrRacket。我对您的解决方案进行了三处更改。首先，我将您的`sort`程序重命名为，`sort1`因为 sort 是内置在方案中（我在里面使用过`sort1`）。其次，我已经改变了`sort1`它本身，以便将给定的输入传递给返回的过程`scase`，您将直接得到排序结果。第三，我修改了`scase`语法扩展，使其接受`else`条件。

```
>(sort1 (list 3 1 2))
'(1 2 3)

> (sort1 (cons 2 1))
'(1 . 2)

> (sort1 'here)
"here" 
```

我建议你阅读 Kent Dybvig 的“The Scheme Programming Language”。有一整章是关于语法扩展的。

# sql - SQL 引用另一列的值

> ID：11315042
> 
> 赞同：0
> 
> 时间：2012-07-03T16:15:24.523
> 
> 标签：sql

我想知道如何在查询中引用列中的值，以便在具有不同列名的相邻列中使用。如您所见，我只是看不到有必要在我的代码中放置两次如下所示的 case 语句。

```
select acct, name, address,
case when pterm||' '||ptermc = '0' then date(digits(matdt7)) 
    when pterm||' '||ptermc = '1 D' then curdate() 
    when pterm||' '||ptermc = '1 M' then date(digits(prevd7))+30 day
    when pterm||' '||ptermc = '3 M' then date(digits(prevd7))+90 day
    when pterm||' '||ptermc = '6 M' then date(digits(prevd7))+180 day
    when pterm||' '||ptermc = '12 M' then date(digits(prevd7))+365 day
    else null end as "Next Repricing Date", 
```

我希望下面的部分只插入上面案例部分的值。

```
phone, value from Next Repricing Date AS "balloon date"
from my.table 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:19:55.097

不能在同一个 select 语句中引用别名列。您可以这样使用子查询

```
SELECT q.ColA as "Next Repricing", q.ColA as "Balloon Date" FROM
(select acct, name, address,
case when pterm||' '||ptermc = '0' then date(digits(matdt7)) 
when pterm||' '||ptermc = '1 D' then curdate() 
when pterm||' '||ptermc = '1 M' then date(digits(prevd7))+30 day
when pterm||' '||ptermc = '3 M' then date(digits(prevd7))+90 day
when pterm||' '||ptermc = '6 M' then date(digits(prevd7))+180 day
when pterm||' '||ptermc = '12 M' then date(digits(prevd7))+365 day
else null end as ColA, ...) As q 
```

如果 case 语句是常见的转换，另一种选择是编写您自己的用户定义函数。

# python - 从 Web 请求调用时，OpenCV imread 挂起

> ID：11315043
> 
> 赞同：15
> 
> 时间：2012-07-03T16:15:34.573
> 
> 标签：python, django, apache, opencv

这可能是我在使用 OpenCV 时遇到的最奇怪的错误之一。发生了很多事情，所以让我尽我所能解释这一点。

1.  我正在一起使用 Django Web 框架和 OpenCV (cv2)。我正在尝试从 Django 中的视图中读取磁盘上的文件。

    ```
    imagePath = os.path.dirname(__file__) + "/1.jpg" 
    ```

    基本上，在与views.py 文件相同的路径中，有一个名为“1.jpg”的文件。这就是这段代码所做的一切。很容易。但下一步是事情变得疯狂的地方。

2.  现在，我想读取位于“imagePath”的图像文件。这需要调用 cv2.imread

    ```
    image = cv2.imread(imagePath) 
    ```

    但这就是我的问题开始的地方。不知何故，Apache（或者甚至可能是 OpenCV，我不知道）开始挂起并且文件永远不会加载。没有错误信息，什么也没有。

做一些侦探工作，我决定尝试旧版本的 OpenCV（导入 cv）。奇怪的是，当我调用 cv.LoadImage(imagePath) 时，Apache 没有挂起并且我的图像加载得很好。我完全不知道为什么。

我的问题的一个潜在解决方法是使用 PIL。

```
from PIL import Image
import numpy as np
image = Image.open(imagePath)
image = np.asarray(image) 
```

再次，使用 PIL Apache 不会挂起，我可以正常进行，将我的图像表示为 numpy 数组并将任何 cv2 函数应用于它。

但是，我不是一个满足于解决方法的人，而且 cv2.imread 挂起的事实真的让我很困扰。

有没有人遇到过这个？

编辑：使用 Python shell 中的 cv.imread 可以正常工作，只是来自 Apache 请求才会发生挂起。

```
>>> import cv2
>>> image = cv2.imread("1.jpg")
>>> image.shape
(400, 344, 3)
>>> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-21T13:56:49.543

我有一个类似的问题并找到了一个修复 -> 只需添加到您的 apache 配置中：

```
WSGIScriptAlias application-group=%{GLOBAL} 
```

显然，当您有一个扩展模块不是设计为在子解释器中工作时会发生这种情况。以上强制它在主解释器中运行。

资料来源： [django apache mod-wsgi 挂起从 .so 文件导入 python 模块](https://stackoverflow.com/questions/4236045/django-apache-mod-wsgi-hangs-on-importing-a-python-module-from-so-file) [http://blog.rtwilson.com/how-to-fix-flask-wsgi-webapp-hanging-when-importing-a-module-such -as-numpy 或 matplotlib/](http://blog.rtwilson.com/how-to-fix-flask-wsgi-webapp-hanging-when-importing-a-module-such-as-numpy-or-matplotlib/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T05:19:48.407

错误的

```
imagePath = os.path.dirname(__file__) + "/1.jpg" 
```

正确的

```
from os.path import abspath, join, dirname

imagePath = abspath( join(dirname(__file__), "1.jpg") ) 
```

# android - 如何在 Android TableLayout 中制作可扩展的 TextView？

> ID：11315044
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:15:34.787
> 
> 标签：android, android-layout, android-ndk

我想创建具有 2 行和 3 列的表格布局，第一行我想添加 3 个 TextView ，在第二行我想添加一个跨越三列的按钮。

每个文本视图都填充了来自其他点击操作的文本，因此，它可能包含 100 个字符，也可能不包含字符所以，如果第一个有字符而其他没有，第一个应该扩展以覆盖所有空间，但是如果两个包含文本，则两个应扩展以填充空白空间

谁能帮我？这是我的代码，但此代码不正确，它将表分为三个等于列

```
<TableLayout
        android:id="@+id/temps_holder"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/google_adView"
        android:background="@drawable/round"
        android:gravity="right"        
        android:stretchColumns="0" >

        <TableRow>

            <TextView
                android:id="@+id/time_temp"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_marginLeft="3dp"
                android:layout_marginRight="3dp"
                android:layout_weight=".33"
                android:gravity="center"
                android:singleLine="false"
                android:text=""
                android:textColor="@color/White"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tempText2_TextView"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight=".33"
                android:gravity="center"
                android:singleLine="false"
                android:text=""
                android:textColor="@color/White"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tempText1_TextView"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight=".33"
                android:gravity="center"
                android:singleLine="false"
                android:text=""
                android:textColor="@color/White"
                android:textSize="16sp" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/viewMatched_btn"
                android:layout_width="fill_parent"
                android:layout_height="40dp"                
                android:layout_span="3"
                android:background="@drawable/wood_btn"
                android:onClick="viewResults"
                android:text="@string/viewMatched"
                android:textColor="@color/White"
                android:visibility="invisible" />
        </TableRow>
    </TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:23:07.317

这就是你所追求的吗？

```
 <TableRow>

        <Button
            android:id="@+id/viewMatched_btn"
            android:layout_width="fill_parent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button"            
            android:onClick="viewResults"               
            android:visibility="visible" />
    </TableRow>
</TableLayout> 
```

将按钮属性：更改`android:visibility`为`visible`并添加：

`android:layout_width="wrap_content" android:layout_height="wrap_content"`

![在此处输入图像描述](../Images/a45648c0c8a772cb9e666ae9fd3a2612.png)

![在此处输入图像描述](../Images/21194a2db1b3523715a5bb469ce8c8ab.png)

![在此处输入图像描述](../Images/2e24fef74b43640a3d96abc46edafc76.png)

# java - 如何创建示例 java.lang.SecurityException：密封违规：包 .. 已密封

> ID：11315046
> 
> 赞同：0
> 
> 时间：2012-07-03T16:15:38.517
> 
> 标签：java, securityexception, sealed

我们遇到了一个长期运行的 Java 进程突然吐出 java.lang.SecurityException: seal violation: package .. 在 JVM 运行时覆盖密封 jar 后被密封的问题。

我有点理解这个异常，但是为了重现这个（以及接下来的内容），我试图人为地创建一个密封的异常并且它不起作用。

有一个名为 'seal.jar' 的 jar 文件，其中有一个 META-INF/MANIFEST.MF 文件，如下所示：

```
Manifest-Version: 1.0
Sealed: true 
```

该包包含 A1、A2、A3 类，如下所示：

```
package sealed;

public class A1
{
  public A1()
  {
    System.err.println("Created version 1.0 of " + this.getClass());
  }
} 
```

第二个 jar seal-2.0.jar 具有相同的三个类，但打印“版本 2.0” 现在第三个 jar 文件 (run.jar) 具有以下内容：

```
import sealed.A1;
import sealed.A2;
import sealed.A3;

public class SealingTest
{
  public static void main(String[] args) {

    int cnt=0;

    try {

      while(true) {

        if( cnt%3==0 ) {
          new A1();
        }
        else if( cnt%3==1 ) {
          new A2();
        }
        else if( cnt%3==2 ) {
          new A3();
        }

        Thread.sleep(5000);
        cnt++;
      }
    }
    catch (Throwable t) {
      t.printStackTrace();
    }
  }
} 
```

我认为当我执行以下操作时，这段代码会创建一个密封的异常：

```
C:\CodeStreet\FTP>java -cp run.jar;seal-1.0.jar SealingTest
Created 1.0 of class sealed.A1     # now executing:  copy seal-2.0.jar seal-1.0.jar
Created 2.0 of class sealed.A2
Created 2.0 of class sealed.A3
Created 1.0 of class sealed.A1 
```

所以看起来 A1 是从 seal-1.0.jar 加载的，但 A2 是从覆盖的 seal-1.0.jar 加载的。

因为第一类（A1）是从 seal-1.0.jar 加载的，第二类（A2）是从被覆盖的文件加载的，所以不应该违反密封吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:24:35.103

请尝试以下方法：

*   从 seal-1.0.jar 中删除 A3.java，但将其保留在 seal-2.0.jar 中；
*   在类路径中有两个密封的罐子并运行测试程序。

那应该会给您所需的“SecurityException：密封违规”。

# git-svn - git svn dcommit 是原子的吗？

> ID：11315049
> 
> 赞同：5
> 
> 时间：2012-07-03T16:15:48.033
> 
> 标签：git-svn

在我的公司，我们有一个颠覆服务器，每个人都在他们的机器上使用颠覆。但是我想使用 git，在本地提交更改，然后在我准备好时“推送”它们。

但是，我无法理解在以下情况下会发生什么。假设我在本地进行了 3 次 git 提交，现在我准备好“推送”颠​​覆服务器上的所有内容。如果我理解正确的话，`git svn dcommit`基本上应该在服务器上按顺序进行 3 次提交，对吧？但是，如果与此同时（假设在第二次和第三次提交之间）我的另一个同事发布了一个提交，会发生什么？我能想到的场景是：

1）git 类型的“锁定”（这甚至可能吗？）提交期间的颠覆服务器，以便我的提交是原子的，而我的同事的提交是在我的之后完成的

2）服务器上的提交历史变成 mine1-mine2-other-mine3 （即使“其他”应该失败，因为我的同事当时没有更新的工作副本）。

我认为它是＃2，但也许提交速度如此之高以至于这很少成为问题。那么哪个是#1 还是#2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:06:10.523

Git 不支持无锁，这不是 Git 方式（Git 方式是分支和合并）。使用 git-svn 您将获得 mine1-mine2-other-mine3 历史记录。如果您需要原子性，请查看[SubGit](http://subgit.com)项目（它安装在 SVN 服务器中并为 SVN 存储库创建一个纯 Git 接口）。

最近有一个类似的[问题](https://stackoverflow.com/questions/11061472/how-to-keep-local-branch-history-with-an-atomic-git-svn-dcommit-operation)，你可能会感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:59:03.883

如果你很幸运，那么排名第二，但大多数时候你并不那么幸运。根据我的经验，当我提交大量提交而其他人提交时，通常会发生两件事：

1.  它随着 dcommitting 您的其他更改而停止。
2.  您会丢失尚未提交的提交。

2号真的很烦人。主要问题是您需要完全更新才能使用 git svn dcommit。这是因为 git-svn 不允许服务器即时合并修订。（因为它需要两个提交者都有一个包含两个更改的工作树）。

解决此问题的唯一方法是我在[此处找到的以下步骤](http://blogs.gnome.org/diegoe/2009/03/18/saving-your-neck-when-git-svn-dcommit-fails/)

1.  打开 .git/logs/HEAD
2.  查找您最近的提交（请注意，这些提交按“unix 时间”排序，尽管您也可以通过阅读那里的短日志找到最新的提交
3.  确认您找到的提交是正确的： git show
4.  git reset -- 来自日志的硬哈希
5.  git svn 变基
6.  git svn dcommit

遵循此程序可让您从失败的地方起飞。我希望他们能尽快解决这个问题，但他们说这还不是他们的优先事项。

当然，如果您提交小组并与服务器建立快速连接，则不应该经常发生。（在每天积极工作和承诺的情况下，我只得到了 2-3 次，持续了 6 个月）。

# jquery - jquery 复杂 json 对象名

> ID：11315052
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:16:05.480
> 
> 标签：jquery

我参考了很多关于 json 递归的网站，如下所示

[JavaScript 递归不能正常工作](https://stackoverflow.com/questions/2626773/javascript-recursion-does-not-work-properly)
[jQuery 对对象的递归迭代](https://stackoverflow.com/questions/2203958/jquery-recursive-iteration-over-objects)

但他们中的大多数要么知道密钥，要么使用已知密钥进行迭代。如果 key & value 都是字符串，例如 {"firstname" : "lastname"} & then function (k,v) 可以分别将 key & value 作为 k & v，则 $.each 也很有效。

但是，如果 json 对象很复杂并且我们不知道什么是关键，例如在 JSON1 和 JSON2 中的键不同，JSON1 中的键 1、3、2 被 JSON2 响应中的 5、6 和 10 替换。

JSON1

```
{
    "one": true,
    "three": [
        "red",
        "yellow",
        [
            "blue",
            "azure",
            "cobalt",
            "teal"
        ],
        "orange"
    ],
    "two": 19.5
} 
```

JSON2

```
{
    "five": true,
    "six": [
        "red",
        "yellow",
        [
            "blue",
            "azure",
            "cobalt",
            "teal"
        ],
        "orange"
    ],
    "ten": 19.5
} 
```

如果我们可以知道密钥名称然后进行比较就可以了。更容易比较密钥，因为这个 tagName 应该按照下面 URL 中的建议工作

[jQuery 可以提供标签名称吗？](https://stackoverflow.com/questions/1532331/can-jquery-provide-the-tag-name)

但是对于普通的 json 对象属性标记名似乎不起作用。检查诸如 text()、attr() 之类的 firefox 属性并没有得到我的 tagName。我想要的是循环遍历 json 对象（实际上我使用 xml2json 插件将 xml 转换为上述 json 格式）并比较键（如果存在）并执行操作。我知道在 XML 中你可以使用 nodeName 来做同样的事情。我应该如何使用 JSON 对象做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:55:06.530

我不完全确定你在找什么，但我会把它扔在这里。

如果您使用诸如`for (key in jsonObj) { ... }`then 之类的东西，您可以在不知道键名的情况下遍历对象。在循环内部，`key`将为您提供当前键名并`jsonObj[key]`为您提供相应的值。

例如，如果我们使用您的“JSON1”对象：

```
for(key in JSON1) 
{
   alert(key + ": " + JSON1[key]);
} 
```

第一个警报将显示：`one: true`。

我怀疑你也可以通过递归来访问嵌套对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:04:56.887

一个快速的解决方案是使用 jQuery.parseJSON [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

或者你可以这样做：

var obj = JSON.parse(JSON1);

但是，并非所有浏览器都支持 JSON 对象，您可能需要查看： [https ://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

包含该库不必更改您的代码，因为它使 JSON 对象成为全局对象（以防浏览器不支持它）。

它获取您的 JSON 字符串，对其进行解析，然后将其转换为 obj 所以对于 JSON1，您将得到如下内容：

obj.one 给你 value = true

obj.two 给你值 = ["red","yellow",["blue","azure","cobalt","teal"],"orange"]

obj.three 给你的值 = 19.5

然后就可以遍历obj属性了：

```
for (var prop in obj) {
    if (obj.hasOwnProperty(prop)) {        
        switch(prop){
        {
            case "one":
                //Do stuff here
                break;
            case "two":
                //Do stuff here
                break;
            case "three":
                //Do stuff here
                break;
        }
    }
} 
```

此外，使用 obj[prop] 将为您提供值而不是名称。例如，在循环期间如果遇到：prop = "three"

然后：

对象[道具] = 19.5

# c++ - 如何阅读 Windows 特定的扩展

> ID：11315053
> 
> 赞同：2
> 
> 时间：2012-07-03T16:16:09.333
> 
> 标签：c++, opengl

在 OpenGL superbible 中，示例说我可以通过以下方式读取 Windows 特定的扩展：

```
//Type defined in the book as char, but that is not what glGetString returns...
const GLubyte *extensions = glGetString(GL_EXTENSIONS);
if(strstr(extensions, "WGL_EXT_swap_control") != NULL)
{
    wglSwapIntervalEXT = (PFNWGLSWAPINTERVALEXTPROC)wglGetProcAddress("wglSwapIntervalEXT");
    if(wglSwapIntervalEXT != NULL)
        wglSwapIntervalEXT(1);
} 
```

`strstr`不采取`GLubyte`。如何使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:43:37.540

您可以将返回值`glGetString`转换为 const char 指针并使用您最喜欢的字符串处理函数。

但实际上我建议使用库，例如[​​ GLEW](http://glew.sourceforge.net/)来管理扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T13:54:00.940

`glGetString(GL_EXTENSIONS)`将返回视频卡支持的大多数扩展名（*以空格分隔）。*但此调用不包含特定于 Windows 的**WGL_扩展（用于 OpenGL 3.0+ 版）。**您还需要调用`wglGetExtensionsString(HDC)`以获取该卡支持的其余 WGL 扩展。

这是一个代码片段（您可以删除**ARB**后缀）：

```
#include <windows.h>
#include <iostream>
#include <GL/gl.h>

// function ptr: WGL specific extensions for v3.0+
typedef const char* (WINAPI * PFNWGLGETEXTENSIONSSTRINGARBPROC)(HDC hdc);
PFNWGLGETEXTENSIONSSTRINGARBPROC  pwglGetExtensionsStringARB = 0;
#define wglGetExtensionsStringARB pwglGetExtensionsStringARB
...

// get WGL specific extensions for v3.0+
wglGetExtensionsStringARB = (PFNWGLGETEXTENSIONSSTRINGARBPROC)wglGetProcAddress("wglGetExtensionsStringARB");
if(wglGetExtensionsStringARB)
{
    const char* str = wglGetExtensionsStringARB(hdc);
    if(str)
    {
        std::cout << str << std::endl;
    }
} 
```

注意`wglGetExtensionsString()`需要当前窗口显示的HDC（Handle to Device Context）作为参数。您可以从窗口句柄 (HWND) 中获取 HDC；

```
HDC hdc = ::GetDC(hwnd); 
```

# path - 无法使用路径和密码映射网络驱动器

> ID：11315060
> 
> 赞同：0
> 
> 时间：2012-07-03T16:16:36.353
> 
> 标签：path, remote-desktop, network-drive

我使用机架空间作为我的云托管，我刚刚创建了一个新服务器。我正在尝试使用以下路径从本地计算机访问远程 C: 驱动器：\xx.xxx.xx.xxx\c$。这在我的原始服务器上运行良好，但在新服务器上我无法让它工作。删除服务器上是否有一些特定设置可以访问我忘记配置的？

谢谢。

编辑：我收到一个诊断错误，说驱动器在线但没有响应连接尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:11:25.893

我想出了这个问题的答案。

在 windows 防火墙设置中，必须启用以下规则：

端口 445 上的 DFS 管理（SMB-In）

# c# - 在页面加载时不可见的用户控件的客户端验证

> ID：11315062
> 
> 赞同：1
> 
> 时间：2012-07-03T16:16:43.727
> 
> 标签：c#, asp.net, validation

我创建了一个具有一些自定义客户端验证的用户控件。我通过 RegisterStartupScript 嵌入 Javascript，并通过 RegisterExpandoAttribute 将信息传递给验证。但是，用户控件在 PageLoad 上不可见，当我使用 document.getElementById 时，我得到空值。

这是我当前的代码：

```
 public void Page_Load(object sender, EventArgs e) 
    { 
            ClientScriptManager cs = Page.ClientScript; 
            Type cstype = this.GetType(); 
            if (!cs.IsStartupScriptRegistered(cstype, "ValidatorType")) 
            { 
                String DateValidator; 
                DateValidator = "<script type=\"text/javascript\">\n"; 
                DateValidator += "function ValidateDate(source, args) {\n"; 
                DateValidator += "   var ddDay = document.getElementById(source.day);\n"; 
                DateValidator += "   var day = ddDay.selectedIndex;\n"; 
                DateValidator += "   var ddMonth = document.getElementById(source.month);\n"; 
                DateValidator += "   var month = ddMonth.selectedIndex;\n"; 
                DateValidator += "   var ddYear = document.getElementById(source.year);\n"; 
                DateValidator += "   var year = ddYear.selectedIndex;\n"; 
                DateValidator += "   if (day == 0 || month == 0 || year == 0)\n"; 
                DateValidator += "      args.IsValid = false;\n"; 
                DateValidator += "   else\n"; 
                DateValidator += "      args.IsValid = true;\n"; 
                DateValidator += "   }\n"; 
                DateValidator += "</script>"; 
                cs.RegisterStartupScript(cstype, "ValidatorType", DateValidator); 
            } 

            cs.RegisterExpandoAttribute(reqDueDate.ClientID, "month", ddMonth.ClientID); 
            cs.RegisterExpandoAttribute(reqDueDate.ClientID, "day", ddDay.ClientID, false); 
            cs.RegisterExpandoAttribute(reqDueDate.ClientID, "year", ddYear.ClientID, false); 
    } 
```

我收到的错误是：

```
Uncaught TypeError: Cannot set property 'month' of null 
Uncaught TypeError: Cannot read property 'selectedIndex' of null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:19:58.510

在服务器端不可见的控件不会出现在服务器生成的客户端上的 html 中。所以它应该是空的。使用 javascript 使其不可见隐藏，并在需要时使用 javascript 使其再次可见。

该脚本应在控件上呈现后执行。

**在客户端隐藏服务器控件**

```
document.getElementById('<%= pnlMail.ClientID %>').style.display = 'none'; 
```

**在客户端隐藏 HTML 控件**

```
document.getElementById('htmlControlID').style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:24:11.417

一个更“服务器端”的方法是在服务器上设置值，然后你不依赖于 javascript。澳交所：

```
 <asp:TextBox runat="server" ID="uxToHide" /> 
```

代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        uxToHide.Style.Add("display", "none");
    } 
```

使用 PlaceHolders 会增加一点复杂性，但还不错。澳交所：

```
 <asp:PlaceHolder ID="uxToHide" runat="server" /> 
```

代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TextBox tb = new TextBox();
        tb.Style["display"] = "none";
        uxToHide.Controls.Add(tb);

        ShowChildren(uxToHide);
    }

    public static void HideChildren(Control container)
    {
        if (container == null || container.Controls == null || container.Controls.Count == 0)
        {
            return;
        }
        foreach (Control c in container.Controls)
        {
            if (c is WebControl)
            {
                ((WebControl)c).Style["display"] = "none";
            }
            HideChildren(c);
        }
    }

    public static void ShowChildren(Control container)
    {
        if (container == null || container.Controls == null || container.Controls.Count == 0)
        {
            return;
        }
        foreach (Control c in container.Controls)
        {
            if (c is WebControl)
            {
                WebControl wc = (WebControl)c;
                if (wc.Style["display"] == "none")
                {
                    wc.Style.Remove("display");
                }
            }
            ShowChildren(c);
        }
    } 
```

# wcf - 带有字典参数的 WCF HTTP POST 休息服务

> ID：11315065
> 
> 赞同：5
> 
> 时间：2012-07-03T16:16:50.790
> 
> 标签：wcf, rest, post

我正在开发一个 WCF 休息服务，该服务需要接收一个名称值对的列表。这些值尚不清楚，因此我们需要使用名称值对的通用列表。

我尝试了多种方法，但我不确定最好的方法是什么。我想我可以访问 HttpContext 并从请求正文中提取值，但我无法做到这一点。

让 WCF 操作接收带有名称值对列表的 HTTP Post 的最佳方法是什么，以便可以在操作中读取它们，类似于您将其从 Request["Key"] 中拉出的方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T20:31:34.357

一个选项是创建一个 JSON 对象以发布到服务，其格式类似于：

```
{"kvPairs":[{"Key":"key1","Value":"value1"}, {"Key":"key2","Value":"value2"}]} 
```

在服务端，设置类似如下的方法：

```
[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "")]
string DoSomething(Dictionary<string, string> kvPairs); 
```

# input - 根据到目标的距离缩放 3D 相机平移/缩放

> ID：11315069
> 
> 赞同：2
> 
> 时间：2012-07-03T16:17:03.833
> 
> 标签：input, 3d, perspectivecamera

我正在开发一个类似 DCC 的工具，它具有 3D 视口，您可以使用鼠标四处移动，类似于 Maya、Blender 等。

我需要一些数学方面的帮助。

我试图确定两点。第一个是基于目标距离的小车速度。在小尺度上（例如，dist=10^-3），它​​移动得太快，而在大尺度上（例如，dist=10^6），它移动得太慢。我想要一个平坦的“相机速度”输入，可以整体缩放效果，但在所有比例下，相机都应该感觉相同。如果我在 0.1 或 1000 个单位之外，这无关紧要，对于给定的鼠标增量，我应该感觉我正在以相同的速度接近目标。

另一个是相机平移，同样基于相机距离。实际上，我希望相机目标沿着与相机对齐并`distance_to_target`远离单位的平面完美地跟踪鼠标光标。我不确定透视失真是否会影响这一点？

输入是：

```
// Distance in world units to camera's centre of interest
real distance_to_target

// Number of pixels mouse has moved horizontally since last frame
int mouse_delta_x

// Number of pixels mouse has moved vertically since last frame
int mouse_delta_y

// The vector of the mouse delta, normalized into -1 to 1 space based on
// viewport dimensions where a value of (-1,-1) or (1,1) means the cursor
// moved from one corner of the viewport to the other, or further, since
// the last frame.
vec2 mouse_delta_vector

// Scale the dolly speed
real dolly_speed 
```

通常我会凭经验做这样的事情，尝试不同的值，直到找到我喜欢的东西，但为此我认为是时候尝试理论了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:57:23.380

对于问题 1，只需使用比例速度缩放。

```
 currSpeed = currDistToTarget * refSpeed / refDistToTarget 
```

其中 refSpeed 和 refDistToTarget 是您认为通过实验可以接受的值。

至于问题2，这个想法是一样的——也就是说，你计算一个距离加权的角度。如果您的 FOV 从未改变，您可以尝试上述相同的线性速度缩放。这里主要是为 refDistanceToTarget 和 refSpeed 找到正确的值。

# css - HTML5中的表格行边框没有间隙

> ID：11315070
> 
> 赞同：12
> 
> 时间：2012-07-03T16:17:19.480
> 
> 标签：css, html

这似乎微不足道，但我似乎无法偶然发现答案。

我想在 HTML 表格中用线条分隔我的行，仅此而已。很简单，对吧？

一些谷歌搜索给我带来了 table 属性`rules`，但显然[HTML5 不支持](http://www.w3schools.com/html5/tag_table.asp)。

所以我更深入地研究了 CSS 并意识到我可以在`tr`'s 周围设置边框，对吧？好吧，不，这不仅不起作用，而且[还有很多 SO 线程](https://stackoverflow.com/a/1384825/1222420)| [向我保证这是个坏主意](https://stackoverflow.com/a/2834645/1222420)。

从逻辑上讲，我使用了*他们的*解决方案，其中涉及 的不同组合`tr { border-bottom ...`，但我总是以这个微小的、令人讨厌的差距告终。什么差距？两个 's 之间大约有一个像素或两个间隙`td`（分隔列的线将是）。这似乎没什么大不了的，但似乎没有必要，我无法停止注意到它。但是无论出于何种原因，它都没有出现在 jsfiddle 中，所以我建议在记事本中尝试这个并在浏览器中打开它。

我犯了一个愚蠢的错误吗？是错字吗？只是我的电脑？任何帮助将不胜感激......我已经盯着这个太久了。

这是我在 Chrome 和 Android 中主要测试的测试文件。它确实需要在两者中工作，因为这也将在 Phonegap 应用程序中运行，该应用程序在手机浏览器中呈现 HTML5。

```
<html>
<head>
    <style>
        td, th {
            border-bottom: 1px solid black !important;
        }
    </style>
</head>

<body>
    <table>
        <tr>
            <th>Item</th>
            <th>Aisle</th>
        </tr>

        <tr>
            <td>Cookies</td>
            <td>2</td>
        </tr>
        <tr>
            <td>Crackers</td>
            <td>6</td>
        </tr>
        <tr>
            <td>Milk</td>
            <td>8</td>
        </tr>
        <tr>
            <td>Cereal</td>
            <td>2</td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-03T16:20:53.080

```
 table {
       border-spacing: 0;
       border-collapse: collapse;
    } 
```

看看那些能不能帮到你。大多数浏览器默认在单元格之间有一点填充（还记得 ol' HTML 属性`cellspacing`吗？）。这将删除它。

# sql - 按季度和年度计算字段

> ID：11315071
> 
> 赞同：0
> 
> 时间：2012-07-03T16:17:24.320
> 
> 标签：sql, oracle, oracle11g, oracle-apex

我在 Oracle Apex 11.1 上有这段代码：

```
select r.s_manager_id,r.s_manager_nam,count(distinct(emp_id))Total_Employees,
    round((SUM(decode(bcoe,'y',1,0))/count(bcoe))*100,2)||'%'bcoe,
    round((SUM(decode(ecp,'y',1,0))/count(ecp))*100,2)||'%'ecp,
    round((SUM(decode(leave,'y',1,0))/count(leave))*100,2)||'%'leave,
    round((SUM(decode(eud,'y',1,0))/count(eud))*100,2)||'%'eud,
    round((SUM(decode(parking,'y',1,0))/count(parking))*100,2)||'%'parking,
    round((SUM(decode(building,'y',1,0))/count(building))*100,2)||'%'building
    from s_manager r,cmanager c,compliancetype t
    where r.s_manager_id = c.s_manager_id
        AND c.s_manager_id = t.s_manager_id
        AND month = 'Feb'
     GROUP BY r.s_manager_id,r.s_manager_nam 
```

它计算不同类型的合规性，但`ecp`应该`bcoe`每年计算一次。如何在 Oracle Apex 中做到这一点？然后`leave`应该按季度计算；怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:51:41.983

这些中的每一个

```
round((SUM(decode(FIELD,'y',1,0))/count(FIELD))*100,2)||'%'FIELD 
```

可以简化为

```
round(AVG(decode(FIELD,'y',1,0))*100,2)||'%'FIELD 
```

对于 Quarterly/Yearly，如果您要显示的年份数据`month = 'Dec'`在 3 月、6 月等月份，那么您不需要转到 Analytics。

只需以这种方式包装计算字段以获得季度数据。

```
case when month in ('Mar', 'Jun', 'Sep', 'Dec') then 
     round(AVG(decode(leave,'y',1,0))*100,2)||'%'leave
else 0
end 
```

# windows - 如何在 RHS 上使用带有 cygwin sed 的 windows set 命令

> ID：11315073
> 
> 赞同：1
> 
> 时间：2012-07-03T16:17:31.097
> 
> 标签：windows, command-line, batch-file, cygwin, cmd

从命令提示符键入此内容有效：

```
pwd | sed "s/\/cygdrive\/c/c:/" 
```

我想在 set 的 RHS 上使用它

这不起作用：

```
set ztmp =(pwd | (sed "s/\/cygdrive\/c/c:/") 
```

具体来说，不返回任何错误或警告，并且未定义 var ztemp。对于这个小曲子，我只输入命令。

安装了 Cygvwin 的 Windows 7 cmd 提示符。

关于控制扩展的一般情况，我可能有些不明白。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:21:28.613

如果你使用 bash，你可以这样做，但不能在 cmd 中。

```
ztmp=$(pwd | sed "s/\/cygdrive\/c/c:/") 
```

# java - 如果我仅从单个表的一列中汇集两种不同类型的值，如何使用 JPA 映射/注释。

> ID：11315074
> 
> 赞同：0
> 
> 时间：2012-07-03T16:17:43.583
> 
> 标签：java, jpa

我有 3 张桌子。LOV、SYS 和规则。Sys 表通过使用@Model 映射到我的应用程序中的编辑器之一的视图控制器。现在在编辑器中我必须显示 3 列

1.  应用编号
2.  错误信息
3.  更正信息

在 sys 表中有一列 Char_value 包含 AppID，以及错误消息。在 Lov 表中有一个名为 option value 的列，其中包含更正消息。所以我写了以下查询来提取数据

```
Query qAppId = em.createQuery("select osc from OscaSysControl osc "+
                    " where osc.oscaControlRule.categoryName ='PROBLEM LOG' and osc.oscaControlRule.controlName = 'APPLICATION ID'");

Query ErrCorr= em.createQuery("select osc from OscaSysControl osc join osc.oscaControlRule oscr " +
                    "left outer join osc.oscaControlLov lov " + 
                    "where oscr.controlName = 'ERROR MESSAGE' and oscr.categoryName = 'PROBLEM LOG' " +
                    "and oscr.processName = :processName"); 
```

我正在将 sys 表的对象作为 OSC，因为它与 VC 映射，所以必须在 OSC 中拥有所有内容。同样在第二个查询中，我试图在同一结果集中获取错误和更正消息。传递进程名称作为参数。

res 和 res2 是 SYS 的类型

```
res = qAppId.getResultList(); 
```

下面的 for 循环是将参数传递给第二个查询。但它的错误“SYS 和 String 不兼容”

```
List<String> appID = new ArrayList<String>(); 
for (OscaSysControl o : res) { 
    appID.add((String)o.getAppId()); // explain ?
}

int appIDLength = appID.size();
for (int i=0; i<appIDLength; i++){
    q2.setParameter("processName",appID.get(i));
    q2.setParameter("processName", res.get(i).getOscaControlRule().getProcessName());
    res2 = q2.getResultList();
    resultErrCorr.add((OscaSysControl) res2); 
} 
```

您能否建议我如何进行映射、注释以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:57:58.953

如果您正在使用 EclipseLink JPA 实现 - 有一个`@Convert`-Annotation，也许这会有所帮助。有一个类似的复杂问题，其中列由列名和位值连接，转换器工作得很好。

如何使用转换器，请参阅： [http ://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_(ELUG)#Using_EclipseLink_JPA_Converters](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_(ELUG)#Using_EclipseLink_JPA_Converters)

# phing - 使用 phing 转储 sql 数据库

> ID：11315076
> 
> 赞同：2
> 
> 时间：2012-07-03T16:18:09.433
> 
> 标签：phing

开始学习和理解phing。

我想使用 Phing 导出 sql 数据库。是否可以？

还是编写 bash 脚本来运行它的最佳方法？您如何在 build.xml 文件中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:34:04.973

我从一本书中发现，最好的方法是使用[exec 任务](http://www.phing.info/docs/guide/current/chapters/appendixes/AppendixB-CoreTasks.html#ExecTask)：

```
<?xml version="1.0" encoding="UTF-8"?>
  <project description="MyFooProject">
  <tstamp/>
  ...
 <target name="backup-db" description="Backup the database before upgrade.">
    <!-- execute external command mysqldump to backup database -->
        <exec command="${ext.mysqldump} --quick --password=${db.password} --user=${db.user} ${db.name} > ${site.name}.${environment}.sql"
            dir="${db.backup.dir}"
            escape="false" />
            <echo message="Database dumped ${db.backup.dir}/${site.name}.${environment}.sql" />
</target>
</project>
</xml> 
```

# google-custom-search - Google Site Search：在搜索结果中使用元数据自定义丰富网页摘要

> ID：11315081
> 
> 赞同：2
> 
> 时间：2012-07-03T16:18:30.573
> 
> 标签：google-custom-search

我正在创建一个 Google Site Search 自定义搜索引擎，并尝试在搜索结果中显示某些元数据，使用条件标记来防止显示某些内容。元数据使用 PageMaps 存储在我的页面上，如下所示：

```
<!--
    Google Search PageMap
    <PageMap>
        <DataObject type="document">
            <Attribute name="type">project</Attribute>
            <Attribute name="title">Page title</Attribute>
            <Attribute name="topic">Page topic</Attribute>

            <Attribute name="topic_url">http://url.com/knowledge-hubs/resilient-catchments/river-restoration-partnerships/</Attribute>
            <Attribute name="knowledge_hub">Page knowledge hub</Attribute>
            <Attribute name="knowledge_hub_url">http://url.com/knowledge-hubs/resilient-catchments/</Attribute>
            <Attribute name="sniffer_code">ABC123</Attribute>
            <Attribute name="project_status">Active</Attribute>
            <Attribute name="project_start">1 August 2010</Attribute>
            <Attribute name="project_end">1 July 2012</Attribute>
        </DataObject>

        <DataObject type="thumbnail">
            <Attribute name="src">http://url.com/img.jpg</Attribute>
            <Attribute name="width">100</Attribute>
            <Attribute name="height">60</Attribute>
        </DataObject>
    </PageMap>
--> 
```

有些页面会生成所有这些信息，而其他页面只包含一些内容（例如标题和类型）。

我希望能够显示此处包含的任何信息，具体取决于页面。这依赖于模板`data-if`中的条件属性。`webResult`

这是我到目前为止所得到的：

```
<article id="sniffer_webResult">
            <div class="gs-title">
                <a data-attr="{href:unescapedUrl,target:target}" class="gs-title">
                    <!--<span data-if="typeof richSnippet != 'undefined'" data-body="richSnippet.document.title"></span>-->
                    <span data-body="html(title)"></span>
                </a>
            </div>

            <div data-if="Vars.richSnippet" data-attr="0" data-body="render('thumbnail',richSnippet,{url:unescapedUrl,target:target})"></div>
            <div class="gs-snippet" data-body="html(content)"></div>
            <div data-if="typeof richSnippet != 'undefined'" class="meta">
                <!--<article data-if="richSnippet.document.type == 'project'">-->
                    <!--<div data-if="richSnippet.document.snifferCode != 'undefined'"><strong>Sniffer code: </strong><span data-body="richSnippet.document.snifferCode" data-attr="0"></span></div>-->
                    <div data-if="richSnippet && richSnippet.document.snifferCode"><strong>Sniffer code: </strong><span data-body="richSnippet.document.snifferCode" data-attr="0"></span></div>
                    <div data-if="richSnippet.document.projectStatus != null"><strong>Status: </strong><span data-body="richSnippet.document.projectStatus" data-attr="0"></span></div>
                    <div data-if="richSnippet.document.topic != null" class="topic"><strong>Topic: </strong><a data-attr="{href:richSnippet.document.topicUrl}" data-body="richSnippet.document.topic" data-attr="0"></a></div>
                    <div data-if="richSnippet.document.knowledgeHub != null" class="hub"><strong>Knowledge hub: </strong><a data-attr="{href:richSnippet.document.knowledgeHubUrl}" data-body="richSnippet.document.knowledgeHub" data-attr="0"></a></div>
                <!--</article>-->
            </div>
        </article> 
```

（你可以看到我一直在谈论评论等等。）

我似乎无法使条件起作用。不过，有些属性效果很好，所以我快到了。像 Homepage 这样的页面不包含大多数属性，在结果中会出现以下错误：

> TypeError：无法读取未定义的属性“snifferCode”：richSnippet && richSnippet.document.snifferCode

[我在这里](https://developers.google.com/custom-search/docs/js/rendering)浏览了谷歌的文档，但我没有发现它特别全面。

任何想法都非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:31:17.400

已决定在显示结果之前先走 XML 路线并在服务器端解析结果。这可以更好地控制页面元数据的显示方式和时间，总体而言它更加强大。而且它并不像最初出现的那么可怕！

richSnippets 对于基本显示很有用，但我觉得我不能自信地控制它们的显示，所以这是使用 XML 代替的另一个原因。

# java - 从数据库中填充下拉值

> ID：11315083
> 
> 赞同：0
> 
> 时间：2012-07-03T16:18:32.353
> 
> 标签：java, jsp, yui

这个问题可能已经被问了数千次，但我无法解决这个问题。

加载页面时，我需要从数据库中填充下拉值。我有一个域类表定义为***“CountryList”***

我得到了所有国家的名单，比如

```
@RenderMapping(params = "action=studentPage")

    public String studentSetUpPage(RenderRequest request,
                RenderResponse response, ModelMap model) {

// some code

ArrayList<CountryList> getAllCountries = serviceClass.getAllCountries(id);

for(CountryList country : getAllCountries){

    System.out.println(" Country " + listCountry.getCountry());

}

} 
```

**JSP 代码**

```
<form action="<%=save%>" method="POST" name="createpage"                                            id="createPage">

<table>
    <c:forEach var="mainform1" items="${mainform2}">

<aui:select name="countrySelect" id="countrySelect"
          label="Country :" inlineLabel="Country:"
          showRequiredLabel="false">

          <c:forEach var="countryList"
            items="${mainform2.countryList}">
         <aui:option label="....."
         value="..........">
         </aui:option>
         </c:forEach>

</aui:select>

</c:forEach>
</table>
</form> 
```

它正在控制台上打印所有国家/地区。

我想在 jsp 的下拉列表中打印这些值。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:37:58.487

您在哪里设置了`mainform2`属性中的数据，并且您尝试通过以下方式访问它

```
items="${mainform2}" 
```

# r - 如何在没有部分重复的情况下聚合和恢复 R 中的原始列？

> ID：11315087
> 
> 赞同：2
> 
> 时间：2012-07-03T16:18:36.040
> 
> 标签：r, merge, dataframe, aggregate

我想找到按基因聚合的最小值：

```
a <- data.frame(probe=c("probe1","probe2","probe3","probe4"), gene=c("gene1","gene1","gene2","gene1"), value=c(.001,.1,.05,.001))
#   probe  gene  value
# 1 probe1 gene1 0.001
# 2 probe2 gene1 0.100
# 3 probe3 gene2 0.050
# 4 probe4 gene1 0.001 
```

所以我这样做了：

```
 aggregated <- aggregate(value~gene, data=a, FUN=min)
#    gene value
# 1 gene1 0.001
# 2 gene2 0.050
b <- merge(aggregated, a) 
#    gene value  probe
# 1 gene1 0.001 probe1 
# 2 gene1 0.001 probe4 
# 3 gene2 0.050 probe3 
```

但是因为probe1和probe4的值相同，所以gene1是重复的，然后我需要在两列中选择一个（不管哪一列）。所以我可以这样做：

```
# THIS IS THE OUTPUT THAT I WANT
c <- aggregate(b, by=list(b$gene), function(x) x[1])[,-1]
#    gene value  probe
# 1 gene1 0.001 probe1
# 2 gene2 0.050 probe3 
```

问题是我在循环中使用它，所以如果我将它应用到没有重复的数据帧上会出错：

```
aggregate(c, by=list(b$gene), function(x) x[1])[,-1]
# Error in aggregate.data.frame(c, by = list(b$gene), function(x) x[1]) : arguments must have same length 
```

我可以在应用第二个聚合之前检查是否存在重复的探针基因对，但我确信有更好的方法。

**编辑**：我的代码中有一个错误。这实际上完美无缺

```
b <- merge(aggregate(value~gene, data=a, FUN=min), a); 
aggregate(b, by=list(b$gene), function(x) x[1])[,-1] 
```

但问题仍然存在，是否有一种不那么迂回的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:35:25.103

一个选项是使用包：data.table。这应该非常快：

```
library(data.table)
a <- data.table(a)
setkeyv(a, c("gene"))

a[, list(min(value), probe[which.min(value)]), by = gene] 
```

# java - TableLayout 中的 ImageView

> ID：11315088
> 
> 赞同：2
> 
> 时间：2012-07-03T16:18:46.313
> 
> 标签：java, android

我想在 TableLayout 中添加一个 ImageView。我做了所有的事情，但它没有显示任何东西。我该如何解决？

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.buddy_list);

   TableLayout buddy_list_layout = (TableLayout)findViewById(R.id.buddy_list_layout);

    TableRow tableRow = new TableRow(this);
    TableLayout.LayoutParams layoutParams1 = new TableLayout.LayoutParams(
    TableLayout.LayoutParams.FILL_PARENT,
        50);

    ImageView imageView = new ImageView(this);
    imageView.setImageResource(R.drawable.troll_logo);
    TableLayout.LayoutParams layoutParams2 = new TableLayout.LayoutParams(50, 50);
    tableRow.addView(imageView, layoutParams2);
    buddy_list_layout.addView(tableRow, layoutParams1);
} // end -> method -> onCreate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:41:44.390

您应该将 layoutParams2 从 a 切换`TableLayout.LayoutParams()`到 a `TableRow.LayoutParams()`，因为您正在使用它来添加 TableRow。类型需要与布局相匹配，否则将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:45:59.573

尝试对行使用预定义的 xml 布局，就像有人在这里建议的那样：[https](https://stackoverflow.com/a/8679835/375929) ://stackoverflow.com/a/8679835/375929 （您可能不希望它完全动态，您的行很可能相似，您只需要动态添加它们）它将节省您以`LayoutParams`编程方式进行的工作。

但是，是的，正如 matt5784 所说，您的问题可能是使用了错误的 LayoutParams 类。

# silverlight - 在 wp7 中显示特殊字符（utf-8）

> ID：11315091
> 
> 赞同：0
> 
> 时间：2012-07-03T16:18:59.543
> 
> 标签：silverlight, windows-phone-7, encoding, utf-8

所以我使用了一个 api，我得到了 json - 问题是它是德语的，当我尝试在 TextBox 中显示该字符串时（当然，在将它分配给一个变量之后）。它显示不正确。这是我返回的结果字符串示例：

```
"{\"response_status\":\"success\",\"data\":{\"threads\":[{\"title\":\"30\\u00e2\\u0082\\u00ac Facebook Werbeanzeigen Guthaben Gratis\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/freebies\\/30-facebook-werbeanzeigen-guthaben-gratis\\/99359\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/freebies\\/30-facebook-werbeanzeigen-guthaben-gratis\\/99359\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99359_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99359_1.jpg\",\"description\":\"Ich habe letzens versucht bei Facebook eine Werbeanzeige zu schalten, habe aber dann im letzten Schritt bei Zahlungsform abgebrochen. Nun habe ich ein paar Tage sp\\u00c3\\u00a4ter eine E-Mail von Facebook mit einem 30\\u00e2\\u0082\\u00ac Gutschein bekommen:\\r\\n\\r\\n\\\"Wir haben festgestellt, dass Du in der Vergangenheit versucht hast, eine Facebook-Werbeanzeige zu erstellen. Wir bieten Dir jetzt einen Gutschein im Wert von 30 \\u00e2\\u0082\\u00ac an, damit Du Deine erste Werbeanzeige kostenlos erstellen kannst! (Dieses Angebot ist zeitlich begrenzt.)\\r\\n\\r\\nMit Facebook-Werbeanzeigen kannst Du:\\r\\n\\r\\nDein Zielpublikum mithilfe von geografischen Angaben, Alter und Interessen erreichen.\\r\\nKundenbeziehungen durch das Verlinken Deiner Facebook-Seite vertiefen.\\r\\nDein Tagesbudget festlegen und das Auftauchen \\u00c3\\u00bcberraschender Rechnungen vermeiden.\\r\\nKlicke hier um Deine kostenlose Werbeanzeige zu erstellen und den Gutscheincode einzul\\u00c3\\u00b6sen: xxxxxxx. Dein Gutschein verf\\u00c3\\u00a4llt am 02\\/08\\/2012\. L\\u00c3\\u00b6se ihn also schon jetzt ein!\\r\\n\\r\\n\\r\\nIch sch\\u00c3\\u00a4tze mal das diese Gutscheine automatisch verschickt werden, wenn man eine Anzeigenerstellung abgebrochen hat.\",\"submit_time\":\"2 hours, 24 minutes ago\",\"hot_date\":false,\"poster_name\":\"Urlaubspiraten\",\"temperature\":50.1899986267,\"price\":0,\"timestamp\":1341323522,\"expired\":\"false\",\"forum\":{\"name\":\"Freebies\",\"url_name\":\"freebies\"},\"category\":{\"name\":\"Reise\",\"url_name\":\"reise\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99359,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99359&API=true\",\"hot_time\":\"13 minutes ago\",\"comment_count\":5,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"Blu-Ray - Predators: Trilogy Set (6 Discs) f\\u00c3\\u00bcr \\u00e2\\u0082\\u00ac15,52 [@Zavvi.com]\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/blu-ray-predators-trilogy-set-6-discs-15-52-zavvi-com\\/99360\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/blu-ray-predators-trilogy-set-6-discs-15-52-zavvi-com\\/99360\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99360_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99360_1.jpg\",\"description\":\"Bei Zavvi.com bekommt Ihr momentan die 6-Disc Blu-Ray Box von \\\"Predators\\\" f\\u00c3\\u00bcr (umgerechnet) \\u00e2\\u0082\\u00ac15,52 (inkl. Versandkosten).\\r\\n\\r\\n(Umrechnung \\u00c2\\u00a312.44 \\/ 0.8015 = \\u00e2\\u0082\\u00ac15,520) \\r\\n\\r\\nBITTE BEACHTEN: \\r\\n- Bezahlung kann mit Kreditkarte oder Paypal erfolgen. \\r\\n- W\\u00c3\\u00a4hrung sollte auf Pfund stehen (L\\u00c3\\u00a4nderflagge oben rechts). \\r\\n- Zollgeb\\u00c3\\u00bchren fallen NICHT an, der Betrag liegt innerhalb des Freibetrages (\\u00e2\\u0082\\u00ac26,30).\\r\\n\\r\\nDeutsche Tonspur ist nur bei Teil 2 vorhanden!\\r\\n\\r\\nIMDB: 7,8\\/10 (1)\\r\\nIMDB: 6,1\\/10 (2)\\r\\nIMDB: 6,5\\/10 (3)\\r\\n\\r\\nGesamtlaufzeit: 316 Minuten\",\"submit_time\":\"2 hours, 23 minutes ago\",\"hot_date\":false,\"poster_name\":\"michael8\",\"temperature\":45.3400001526,\"price\":15.52,\"timestamp\":1341323529,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Entertainment\",\"url_name\":\"entertainment\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99360,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99360&API=true\",\"hot_time\":\"37 minutes ago\",\"comment_count\":4,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"Bahn: Von Deutschland nach Luxemburg f\\u00c3\\u00bcr 35\\u00e2\\u0082\\u00ac (Berlin \\u00e2\\u0080\\u0093 K\\u00c3\\u00b6ln f\\u00c3\\u00bcr 35\\u00e2\\u0082\\u00ac auch m\\u00c3\\u00b6glich)\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/bahn-von-deutschland-nach-luxemburg-35-berlin-k\\u00c3\\u00b6ln-35-auch-m\\u00c3\\u00b6glich\\/99371\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/bahn-von-deutschland-nach-luxemburg-35-berlin-k\\u00c3\\u00b6ln-35-auch-m\\u00c3\\u00b6glich\\/99371\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99371_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99371_1.jpg\",\"description\":\"Nachdem es das letzte Mal mit dem Ltur Bahn Spezial f\\u00c3\\u00bcr 35\\u00e2\\u0082\\u00ac nach Paris ging, geht es nun nach Luxemburg. Da der Zug aber zumeist durch K\\u00c3\\u00b6ln f\\u00c3\\u00a4hrt, kann man so auch einfach in K\\u00c3\\u00b6ln aussteigen bzw. zusteigen und Berlin-K\\u00c3\\u00b6ln f\\u00c3\\u00bcr 35\\u00e2\\u0082\\u00ac fahren. Das Ganze funktioniert von vielen deutschen Bahnh\\u00c3\\u00b6fen, wie zum Beispiel M\\u00c3\\u00bcnchen und Hamburg. Buchbar sind diese g\\u00c3\\u00bcnstigen Zugfahrten ab jetzt bis zum 15\. Juli. Hier geht es zu der offiziellen Luxemburg Webseite mit vielen Informationen zur Stadt: http:\\/\\/www.lcto.lu\\/de\\/index\",\"submit_time\":\"1 hour, 8 minutes ago\",\"hot_date\":false,\"poster_name\":\"Urlaubspiraten\",\"temperature\":62.9399986267,\"price\":35,\"timestamp\":1341328048,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Reise\",\"url_name\":\"reise\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99371,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99371&API=true\",\"hot_time\":\"40 minutes ago\",\"comment_count\":2,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"Ab dem 05.07\. H\\u00c3\\u00a4agen Dazs Eiscreme, 500ml f\\u00c3\\u00bcr 3,69 in der Metro\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/dem-05-07-h\\u00c3\\u00a4agen-dazs-eiscreme-500ml-3-69-in-metro\\/99032\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/dem-05-07-h\\u00c3\\u00a4agen-dazs-eiscreme-500ml-3-69-in-metro\\/99032\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99032_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99032_1.jpg\",\"description\":\"Es gibt zwar kein best\\u00c3\\u00a4ndiges Sommerwetter momentan, aber lecker Eis geht immer. :)\",\"submit_time\":\"1 day, 8 hours ago\",\"hot_date\":false,\"poster_name\":\"learned\",\"temperature\":50.4300003052,\"price\":3.69,\"timestamp\":1341213712,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Food\",\"url_name\":\"food\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99032,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99032&API=true\",\"hot_time\":\"41 minutes ago\",\"comment_count\":7,\"availability\":\"Offline\",\"can_vote\":\"yes\"},{\"title\":\"Zumba-Tanzkurs (5 x 60 Min.) f\\u00c3\\u00bcr 20 \\u00e2\\u0082\\u00ac statt 50 \\u00e2\\u0082\\u00ac \",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/zumba-tanzkurs-5-x-60-min-20-statt-50\\/99342\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/zumba-tanzkurs-5-x-60-min-20-statt-50\\/99342\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99342_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99342_1.jpg\",\"description\":\"Zumba Deal bei www.cupoco.com, gilt f\\u00c3\\u00bcr Tanzschule Son Latino in Karlsruhe.\\r\\n\\r\\nKonditionen\\r\\n\\r\\nAngebot gilt nur f\\u00c3\\u00bcr Neukunden\\r\\nTerminvereinbarung unter 0721 \\u00e2\\u0080\\u0093 663 8886 oder per E-Mail an info@sonlatino.de erforderlich\\r\\nPro Person ist 1 Gutschein einl\\u00c3\\u00b6sbar\\r\\nTermine unter www.sonlatino.de\\r\\n\\r\\n---\\r\\nG\\u00c3\\u00bcltigkeitszeitraum\\r\\n\\r\\nDer Gutschein ist ab Kaufdatum f\\u00c3\\u00bcr 1 Jahr g\\u00c3\\u00bcltig.\",\"submit_time\":\"3 hours, 59 minutes ago\",\"hot_date\":false,\"poster_name\":\"good_n8\",\"temperature\":33.9900016785,\"price\":20,\"timestamp\":1341317769,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Entertainment\",\"url_name\":\"entertainment\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99342,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99342&API=true\",\"hot_time\":\"59 minutes ago\",\"comment_count\":7,\"availability\":\"Offline\",\"can_vote\":\"yes\"},{\"title\":\"offline @ metro H\\u00c3\\u00a4agen Dazs Eis ab 05.07.2012\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/offline-metro-h\\u00c3\\u00a4agen-dazs-eis-05-07-2012\\/99369\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/offline-metro-h\\u00c3\\u00a4agen-dazs-eis-05-07-2012\\/99369\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99369_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99369_1.jpg\",\"description\":\"Ab 05.07.2012 Bei Metro....\",\"submit_time\":\"1 hour, 42 minutes ago\",\"hot_date\":false,\"poster_name\":\"viktorw\",\"temperature\":78.2600021362,\"price\":3.69,\"timestamp\":1341326008,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Food\",\"url_name\":\"food\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99369,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99369&API=true\",\"hot_time\":\"1 hour, 22 minutes ago\",\"comment_count\":5,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"Ringspun\\u00e2\\u0084\\u00a2 - Herren Canvas Plimsolls Schuhe (Black,Grey,Navy,White) f\\u00c3\\u00bcr \\u00e2\\u0082\\u00ac13,69 [@Sendit.com]\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/ringspun-herren-canvas-plimsolls-schuhe-black-grey-navy-white-13-69-sendit-com\\/99365\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/ringspun-herren-canvas-plimsolls-schuhe-black-grey-navy-white-13-69-sendit-com\\/99365\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99365_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99365_1.jpg\",\"description\":\"Perfekte Treter f\\u00c3\\u00bcr Freizeit, Strand, Urlaub...\\r\\nBei Sendit.com bekommt Ihr momentan sehr g\\u00c3\\u00bcnstige Herren Canvas Schuhe (in 4 verschiedenen Farben) von Ringspun\\u00e2\\u0084\\u00a2 f\\u00c3\\u00bcr (umgerechnet) \\u00e2\\u0082\\u00ac13,69 (inkl.Versandkosten nach Deutschland). \\r\\n\\r\\n(Umrechnung \\u00c2\\u00a310.97 \\/ 0.8015 = \\u00e2\\u0082\\u00ac13,686) \\r\\n\\r\\nBITTE BEACHTEN: \\r\\n- Bezahlung kann mit Kreditkarte oder Paypal erfolgen. \\r\\n- W\\u00c3\\u00a4hrung sollte auf Pfund stehen (L\\u00c3\\u00a4nderflagge oben rechts). \\r\\n- Zollgeb\\u00c3\\u00bchren fallen NICHT an, der Betrag liegt innerhalb des Freibetrages (\\u00e2\\u0082\\u00ac26,30). \\r\\n- Bei Massenbestellungen kann es zu Stornos kommen! \\r\\n\\r\\nMomentan (16:00 Uhr) sind noch folgende Gr\\u00c3\\u00b6\\u00c3\\u009fen (UK\\/EU) vorhanden:\\r\\nBlack - 7 (40.5), 8 (42), 9 (43), 10 (44.5)\\r\\nGrey - 7 (40.5), 8 (42), 9 (43), 10 (44.5), 11 (46)\\r\\nNavy - 7 (40.5), 8 (42), 9 (43), 10 (44.5)\\r\\nWhite - 7 (40.5), 8 (42), 9 (43), 10 (44.5), 11 (46)\\r\\n\\r\\nBeschreibung \\\"Ringspun Men's Plimsolls\\\":\\r\\nThe perfect shoes for just throwing on before your fun filled outing, these men's plimsolls from Ringspun are designed for both style and comfort.\\r\\n- Lace up\\r\\n- Rubber sole\\r\\n- Contrast bordering\\r\\n- Ringspun logo\\r\\n\\r\\nWeitere Infos zu Ringspun\\u00e2\\u0084\\u00a2 findet Ihr unter:\\r\\nhttp:\\/\\/ringspun.co.uk\\/\",\"submit_time\":\"1 hour, 55 minutes ago\",\"hot_date\":false,\"poster_name\":\"michael8\",\"temperature\":69.4599990845,\"price\":13.69,\"timestamp\":1341325236,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Fashion\",\"url_name\":\"fashion\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99365,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99365&API=true\",\"hot_time\":\"1 hour, 22 minutes ago\",\"comment_count\":12,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"Adidas Franz Beckenbauer  (allround) (Gr\\u00c3\\u00b6\\u00c3\\u009fe UK 6 \\/ 8) \",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/adidas-franz-beckenbauer-allround-gr\\u00c3\\u00b6\\u00c3\\u009fe-uk-6-8\\/99348\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/adidas-franz-beckenbauer-allround-gr\\u00c3\\u00b6\\u00c3\\u009fe-uk-6-8\\/99348\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99348_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99348_1.jpg\",\"description\":\"Habe gerade beim st\\u00c3\\u00b6bern ein paar Schuhe gefunden welche recht g\\u00c3\\u00bcnstig zu sein scheinen. \\r\\n\\r\\nEs handelt sich um das Model \\\"adidas Frank Beckenbauer Allround\\\". Es kommen zu den 22 Pfund leider noch 7,99 Pfund Versand dazu so das der Endpreis ein wenig leidet. Es gibt noch eine Menge Flip Flops, Airwalk und Nike Schuhe im Ausverkauf so das mit 2 Paaren definitiv gut gesparrt werden kann. Wichtig die gr\\u00c3\\u00b6\\u00c3\\u009fen sind nat\\u00c3\\u00bcrlich stark Limitiert. \\r\\n\",\"submit_time\":\"3 hours, 25 minutes ago\",\"hot_date\":false,\"poster_name\":\"Skroggo\",\"temperature\":71.5500030518,\"price\":37.42,\"timestamp\":1341319811,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Fashion\",\"url_name\":\"fashion\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99348,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99348&API=true\",\"hot_time\":\"1 hour, 27 minutes ago\",\"comment_count\":13,\"availability\":\"Online\",\"can_vote\":\"yes\"},{\"title\":\"[lokal] toom Neubiberg (Landkreis M\\u00c3\\u00bcnchen) 50% auf alles wegen Schlie\\u00c3\\u009fung\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/deals\\/lokal-toom-neubiberg-landkreis-m\\u00c3\\u00bcnchen-50-auf-alles-wegen-schlie\\u00c3\\u009fung\\/99358\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/deals\\/lokal-toom-neubiberg-landkreis-m\\u00c3\\u00bcnchen-50-auf-alles-wegen-schlie\\u00c3\\u009fung\\/99358\",\"deal_image\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/99358_1.jpg\",\"deal_image_highres\":\"http:\\/\\/hukd.mydealz.de\\/images\\/threads\\/high-res\\/99358_1.jpg\",\"description\":\"Der toom-Baumarkt Neubiberg (\\u00c3\\u0084u\\u00c3\\u009fere Hauptstra\\u00c3\\u009fe 3, 85579 Neubiberg) schlie\\u00c3\\u009ft und hat noch bis 13.07\. R\\u00c3\\u00a4umungsverkauf. Ich war eben da und es ist schon sehr leer, aber das ein oder andere Schn\\u00c3\\u00a4ppchen ist zu holen.\\r\\n\\r\\nWas gibt es noch?\\r\\n- Fiskars Schneeschaufeln + Schneer\\u00c3\\u00a4umer\\r\\n- Streusalz\\r\\n- Spax-Schrauben\\r\\n- Laminat\\r\\n- Farben und Lacke (auch H\\u00c3\\u00a4mmerite)\\r\\n- Lampen + Zubeh\\u00c3\\u00b6r\\r\\n- Gartenwerkzeuge\\r\\n- Blument\\u00c3\\u00b6pfe\\r\\n- einige Gartenm\\u00c3\\u00b6bel\\r\\n- einige Klimager\\u00c3\\u00a4te\\r\\n- einige Grills (keine Weber, aber Landmann Gasgrill)\\r\\n\\r\\nWas gibt es NICHT mehr?\\r\\n- jegliche Elektrowerkzeuge au\\u00c3\\u009fer Einzelst\\u00c3\\u00bccke\\r\\n- Vorh\\u00c3\\u00a4ngeschl\\u00c3\\u00b6sser\\r\\n- Blumend\\u00c3\\u00bcnger\\r\\n\\r\\nAusgenommen sind:\\r\\naktuelle Werbeartikel, Zigaretten, Getr\\u00c3\\u00a4nke, S\\u00c3\\u00bc\\u00c3\\u009fwaren, Pfand, Dienst- \\/ Serviceleistungen, Gutscheine usw.\",\"submit_time\":\"2 hours, 38 minutes ago\",\"hot_date\":false,\"poster_name\":\"DanBurg\",\"temperature\":72.1500015259,\"price\":0,\"timestamp\":1341322660,\"expired\":\"false\",\"forum\":{\"name\":\"Deals\",\"url_name\":\"deals\"},\"category\":{\"name\":\"Anderes\",\"url_name\":\"anderes\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99358,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99358&API=true\",\"hot_time\":\"1 hour, 39 minutes ago\",\"comment_count\":1,\"availability\":\"Offline\",\"can_vote\":\"yes\"},{\"title\":\"50% Gutschein f\\u00c3\\u00bcr hundeland.de und katzenland.de bei limango\",\"deal_link\":\"http:\\/\\/hukd.mydealz.de\\/gutscheine\\/50-gutschein-hundeland-de-und-katzenland-de-bei-limango\\/99289\",\"mobile_deal_link\":\"http:\\/\\/hukdm.mydealz.de\\/gutscheine\\/50-gutschein-hundeland-de-und-katzenland-de-bei-limango\\/99289\",\"deal_image\":\"\",\"deal_image_highres\":\"\",\"description\":\"W\\u00c3\\u00a4hle zwischen zwei Varianten: \\r\\nWertgutschein f\\u00c3\\u00bcr Katzenland.de: Warengutschein f\\u00c3\\u00bcr Katzenland.de, anwendbar auf das gesamte Sortiment (au\\u00c3\\u009fer Katzenstreu).\\r\\nWertgutschein f\\u00c3\\u00bcr Hundeland.de: Warengutschein f\\u00c3\\u00bcr Hundeland.de, anwendbar auf das gesamte Sortiment.\\r\\n\\r\\nKonditionen\\r\\nDer Gutschein im Wert von 30\\u00e2\\u0082\\u00ac ist auf das Vollsortiment von katzenland.de (au\\u00c3\\u009fer Katzenstreu) oder auf das Vollsortiment von hundeland.de einl\\u00c3\\u00b6sbar.\\r\\n\\r\\nDer Gutschein ist bis zum 06.09.2012 g\\u00c3\\u00bcltig und nicht mit anderen Rabattaktionen des Anbieters kombinierbar.<br \\/><b>Rabatt:<\\/b> 50%\",\"submit_time\":\"7 hours, 12 minutes ago\",\"hot_date\":false,\"poster_name\":\"Adrenalina\",\"temperature\":55.4700012207,\"price\":0,\"timestamp\":1341306193,\"expired\":\"false\",\"forum\":{\"name\":\"Gutscheine\",\"url_name\":\"gutscheine\"},\"category\":{\"name\":\"Haushalt\",\"url_name\":\"haushalt\"},\"merchant\":{\"name\":\"HUKD.MyDealz.de\",\"url_name\":\"hukd-mydealz-de\",\"merchant_id\":1,\"image\":\"\"},\"tags\":null,\"thread_id\":99289,\"visit_link\":\"http:\\/\\/hukd.mydealz.de\\/visit?m=1&q=99289&API=true\",\"hot_time\":\"1 hour, 46 minutes ago\",\"comment_count\":9,\"availability\":\"Online\",\"can_vote\":\"yes\"}],\"thread_count\":1000}}" 
```

有人可以告诉我如何在应用程序上正确显示吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:04:42.107

使用来自http://Json.Codeplex.Com 的[JSON.NET](http://Json.Codeplex.Com) - 它与 Unicode 一起工作就像一个魅力。

对于从您的响应生成类，您可以使用[http://json2csharp.com/](http://json2csharp.com/)

然后只需使用以下代码：

```
 var responseObject = JsonConvert.DeserializeObject<YourResponseType>(responseAsString); 
```

# security - 在查询字符串或流中发送用户名/密码有区别吗？

> ID：11315092
> 
> 赞同：1
> 
> 时间：2012-07-03T16:19:02.217
> 
> 标签：security, https, uri

在安全方面，在查询字符串中发送用户名和密码与在正文中将其作为复杂对象发送是否有区别`POST`？

我正在使用`HTTPS`.

前任：

`myservices.com/auth?username=myname&password=mypass`

与从请求中获取 Stream 并将其反序列化为对象？

既然方法 is`POST`和 uses `HTTPS`，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:22:55.440

这是个很大的差异。查询字符串是 URL 的一部分。它位于浏览器历史记录和纯文本地址栏中。有一些已知的攻击可以检查浏览器的历史记录。不要将敏感数据放在 URL 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:28:13.270

我将在之前的答案中添加一件事。URL 也很可能最终出现在服务器访问日志中。因此，URL 中的敏感信息将以明文形式存储在服务器日志中（而不是仅在某处的数据库中加密/散列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:23:05.100

通过 HTTPS 发送信息的方式为

```
"adaadnajdkbjkbdbk27y27672323gyu2gugsgjuguq2e2eh2t67878et27tshjdgjg32766t17te76tgeuyg1et617e67t281te8t128et71te56t1267e71dvdhj12d672d7f12fd712dgugvduv217df76127dr6217712d6721dr716rd671r672d" 
```

无论 GET 或 POST 方法如何，唯一的区别是您的敏感数据将暴露在 URL 中。我不建议使用它，因为您的浏览器历史记录会存储您的敏感数据，这些数据可能会被黑客提取。

# django - 在构建中， include-site-packages=false 不排除 dist-packages

> ID：11315093
> 
> 赞同：2
> 
> 时间：2012-07-03T16:19:05.323
> 
> 标签：django, buildout

我正在 ubuntu 服务器上安装 python 应用程序。我在 buildout.cfg 中添加了 include-site-packages=false 但它仍然没有忽略 dist-packages。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:14:40.450

Buildout doesn't know about anything `dist-packages`, as that's a Debian and Ubuntu specific addition to Python. If buildout doesn't exclude it when you exclude `site-packages`, then is not the only package to have this 'problem'; virtualenv doesn't know about it either, see [Ubuntu + virtualenv = a mess? virtualenv hates dist-packages, wants site-packages](https://stackoverflow.com/questions/1215610/ubuntu-virtualenv-a-mess-virtualenv-hates-dist-packages-wants-site-package).

Feel free to file an issue in the [buildout issue tracker](https://bugs.launchpad.net/zc.buildout) to request that dist-packages is included when ignoring site-packages.

Note that on my Debian system however, the `dist-packages` directory *is* being excluded.

Buildout normally determines what the `site-packages` directories are by determining the difference between the following two commands:

```
PYTHONNOUSERSITE="x" python -c "import sys, os;print repr([os.path.normpath(p) for p in sys.path if p])" 
```

and

```
python -S -c "import sys, os;print repr([os.path.normpath(p) for p in sys.path if p])" 
```

If the latter still includes the `dist-packages` directory for you, then I'd classify this as a Ubuntu or Debian bug. On Debian 6.0.5, with zc.buildout 1.5.2 that path is *not* included.

The `dist-packages` directory is normally added via the [`site.py` module](http://docs.python.org/library/site.html) (which the `-S` switch above disables). Debian and Ubuntu have patched that module.

# android - 如何使 Android 应用程序与平板电脑不兼容？

> ID：11315095
> 
> 赞同：5
> 
> 时间：2012-07-03T16:19:10.850
> 
> 标签：android

我要为我的应用程序制作一个特定于平板电脑的版本，并且我想停止我的手机应用程序与平板电脑兼容。

我尝试使用 maxSdkVersion 10 制作我的应用程序，并且我还尝试过支持屏幕 xlarge false 等...

有人能告诉我如何使我的应用程序与平板电脑不兼容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:39:48.853

一种解决方案（可能不会涵盖所有设备，我不知道）是根据屏幕尺寸和密度过滤设备。[此处](http://developer.android.com/guide/practices/screens_support.html)的表 1向您展示了所有可能性。

在您的清单文件中，您可以尝试以下操作：

```
<compatible-screens>
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
</compatible-screens> 
```

我认为两者的结合（Android 市场信息 + 清单）将为您提供相当数量的平板设备，这些设备将被排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:44:24.990

这将工作......

**使用兼容屏幕**

***看到这个链接：***

[http://developer.android.com/guide/practices/screens-distribution.html#FilteringHandsetApps](http://developer.android.com/guide/practices/screens-distribution.html#FilteringHandsetApps)

***专门阅读本节：***

**注意：**如果您将元素用于反向场景（当您的应用程序不兼容大屏幕时）并将大屏幕尺寸属性设置为“false”，则外部服务（例如 Google Play）不会应用过滤。您的应用程序仍可用于较大的屏幕，但在运行时，它不会调整大小以适应屏幕。相反，系统将模拟手机屏幕尺寸（大约 320dp x 480dp；有关更多信息，请参阅屏幕兼容模式）。如果您想阻止您的应用程序在更大的屏幕上下载，请使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:33:49.517

这可以从 Android 市场完成。您可以在其中设置一些设置，以防止您的应用被特定设备（包括平板电脑）查看。您可以使用您设置的限制`maxSdkVersion 10`和其他限制来设置应用程序的边界，一旦您将应用程序发送到市场，就可以查看该应用程序。如果设备不符合您设定的标准，则搜索它的设备将看不到该应用程序。

此链接可能会给您一些附加值：http: [//developer.android.com/guide/google/play/filters.html](http://developer.android.com/guide/google/play/filters.html)

希望这对你有帮助！

# django - django nonrel 应用程序引擎无法连接到远程外壳

> ID：11315098
> 
> 赞同：0
> 
> 时间：2012-07-03T16:19:19.917
> 
> 标签：django, google-app-engine, django-nonrel, djangoappengine

我有 django nonrel 的 appengine 项目。应用引擎 SDK 1.6.6。蟒蛇2.7。我想用 `manage.py remote loaddata myfixture` 或简单地 将我的开发数据上传到生产服务器`manage.py remote shell`，但是我收到了 url 错误（违反协议）。

顺便说一句，我需要在我的 app.yaml 中设置 django 版本还是将其留空并使用 nonrel django？

信息是这样的：

```
INFO     2012-07-03 23:34:40,720 stubs.py:79] Setting up remote_api for "xxx" at https://xxx.appspot.com/_ah/remote_api
Connecting to remote_api handler.

IMPORTANT: Check your login method settings in the App Engine Dashboard if you h
ave problems logging in. Login is only supported for Google Accounts.

INFO     2012-07-03 23:34:40,884 appengine_rpc.py:466] Loaded authentication coo
kies from C:\Users\xxx/.appcfg_cookies
INFO     2012-07-03 23:34:40,885 appengine_rpc.py:160] Server: xxx.app
spot.com
Traceback (most recent call last):
  File "C:\Users\xxx\git\django-project\manage.py", line 11, in <module>
    execute_manager(settings)
  File "C:\Users\xxx\git\django-project\django\core\management\__init__.py",
line 438, in execute_manager
    utility.execute()
  File "C:\Users\xxx\git\django-project\django\core\management\__init__.py",
line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Users\xxx\git\django-project\djangoappengine\management\commands\r
emote.py", line 15, in run_from_argv
    stub_manager.setup_remote_stubs(connection)
  File "C:\Users\xxx\git\django-project\djangoappengine\db\stubs.py", line 89
, in setup_remote_stubs
    rpc_server_factory=rpc_server_factory)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api
\remote_api_stub.py", line 682, in ConfigureRemoteApi
    app_id = GetRemoteAppIdFromServer(server, path, rtok)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api
\remote_api_stub.py", line 525, in GetRemoteAppIdFromServer
    response = server.Send(path, payload=None, **urlargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\appengin
e_rpc.py", line 366, in Send
    f = self.opener.open(req)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Program Files\Google\google_appengine\lib\fancy_urllib\fancy_urllib\_
_init__.py", line 367, in do_open
    raise url_error
urllib2.URLError: <urlopen error [Errno 8] _ssl.c:504: EOF occurred in violation
 of protocol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:07:02.800

我认为这是一个暂时的问题。这可能是由于互联网连接速度慢而导致的超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T09:57:27.407

请在此处发布整个 app.yaml 文件。

这个错误似乎是文件路径中的 app.yaml 文件的问题。检查处理程序中的所有文件目录。删除目录名称后的“/”。

# c# - 如何将示例项目导入 Microsoft Visual Studio 2010

> ID：11315099
> 
> 赞同：4
> 
> 时间：2012-07-03T16:19:23.957
> 
> 标签：c#, visual-studio-2010

如何**将** [下载的样本](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29)导入`Microsoft Visual Studio Express 2010 for Windows Phone`，就像我们在`Eclipse`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:35:38.950

您无需导入它们，在 Visual Studio 中只需转到*File->Open->Project/Solution*并`*.sln`从下载的示例文件中打开它们。

如果要将其导入现有解决方案，请在 Visual Studio 的解决方案资源管理器中右键单击您的解决方案，转到“添加”并选择*“现有项目”* ，然后从下载的示例文件中导航到该`*.csproj`文件。

# ios - 如何使用restkit在http标头中发送一些数据

> ID：11315102
> 
> 赞同：11
> 
> 时间：2012-07-03T16:19:50.777
> 
> 标签：ios, restkit

每次向服务器发出请求时（使用 get 和 post 方法），我都需要在 http 标头中发送一些数据。我正在使用来自 restkit 的 RKObjectManager。我还需要检查服务器返回的状态（401、200、404 等）。有人知道解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T04:27:47.740

在 0.20.0rc1 版本中，您可以使用以下代码：

```
[[[RKObjectManager sharedManager] HTTPClient] setDefaultHeader:myHeaderName value:myValue]; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-03T20:10:42.333

如果您需要在请求中发送自定义标头，我建议使用该`RKClient`属性`HTTPHeaders`，例如：

```
[[[[RKObjectManager sharedManager] client] HTTPHeaders] setValue:myValue
                                                          forKey:myHeaderName]; 
```

有关状态码，请参阅我的[另一个答案](https://stackoverflow.com/questions/8218743/restkit-getting-http-status-code-when-a-request-fails)。

# android - 如何获取布局xml文件路径？

> ID：11315111
> 
> 赞同：0
> 
> 时间：2012-07-03T16:20:13.200
> 
> 标签：android, android-layout

我需要显示`setContentView(R.layout.main);`. 所以如果手机是`normal-mdpi`，我需要显示“路径是：/res/layout-normal-mdpi”或者如果手机是`normal-hdpi`，我需要一个文本“路径是：/res/layout-normal-hdpi”。

我基本上需要知道加载了哪个布局文件及其路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:25:31.770

您可以在 xml 中添加一个具有相应文件夹名称的隐藏文本视图 通过以下
方式获取文本视图中的字符串

```
TextView path = (TextView)findViewbyid(R.id.hiddentextview); 
 String s =  path.gettext().tostring(); 
```

确保文本视图的所有 id 都相同 Example

> ```
> if your xml is in `normal-mdpi` in hidden textview hard code `normal-mdpi`
> if your xml is in `large-mdpi` in hidden textview hard code `large-mdpi` 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:05:04.650

您可以调用`Activity.getResources().getConfiguration()`which 将获取您当前的[配置](http://developer.android.com/reference/android/content/res/Configuration.html)- 请参阅文档，您可以从那里获得您需要的大部分信息（即，您需要[方向](http://developer.android.com/reference/android/content/res/Configuration.html#orientation)和[screenLayout](http://developer.android.com/reference/android/content/res/Configuration.html#screenLayout)），您需要的屏幕密度`Activity.getResources().getDisplayMetrics()`和[密度](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)字段。没有办法检索我知道的实际布局路径。

**UPD** 嗯，看看这个：[LayoutInflater.inflate()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/LayoutInflater.java#316) - 这就是它在内部的工作方式，如果你深入挖掘的话 - 它会调用一个执行实际通货膨胀的本机方法，所以那里没有运气，但也许如果你戳使用 xml 解析器，你会找到一种方法来做到这一点。从我的脑海中，您可以为每个布局添加注释并将文件名放入其中。然后使用 Activity.getResources().getLayout(your_layout_id) 获取 xml 解析器，然后使用解析器获取您的注释 - 这样您就可以确切地知道您刚刚访问的文件。

# ruby-on-rails - 撬输出中的奇怪字符

> ID：11315113
> 
> 赞同：1
> 
> 时间：2012-07-03T16:20:19.323
> 
> 标签：ruby-on-rails, ruby, pry

当我进行正常的撬动会话时，一切都很好：

```
$撬
[1] 撬（主）> 4
=> 4
[2] 撬（主）> 5
=> 5
[3] 撬（主）>

```

但是当我在 rails 环境中启动时，它会打印一些奇怪的字符：

```
$ pry -r ./config/环境
[1] 撬（主）> 4
=> 4pry（主）> 4/23B
[2] 撬（主）>

```

看起来 ascii 颜色代码是错误的，但我不明白为什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T23:40:24.543

原来这是一个在包含 mathn 时出现的错误：[https ://github.com/pry/pry/issues/872](https://github.com/pry/pry/issues/872)

# python - Flask 总是返回重定向页面

> ID：11315114
> 
> 赞同：3
> 
> 时间：2012-07-03T16:20:31.163
> 
> 标签：python, flask

我刚刚安装了[Flask](http://flask.pocoo.org/)，并试图用[他们的示例](http://flask.pocoo.org/docs/quickstart/#a-minimal-application)快速测试它，但它不起作用。

到目前为止我有这个：

你好.py

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

然后我运行：

```
@ubuntu:~/repo/test/flask$ python hello.py 
* Running on http://127.0.0.1:5000/ 
```

当我连接到 localhost:5000/ 甚至是 url 的任何变体时，它都会返回

```
<HTML>
<HEAD><TITLE>Redirection</TITLE></HEAD>
<BODY><H1>Redirect</H1></BODY> 
```

我 99% 确定我已经安装了所有东西，python 2.6.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:45:53.070

我很确定问题出在您的代理上。尝试检查`$http_proxy`，如果设置了此值，请`unset http_proxy`在运行开发服务器之前尝试执行：

有人在运行 rails 时遇到了同样的问题：
[http ://railsforum.com/viewtopic.php?id=36621](http://railsforum.com/viewtopic.php?id=36621)

# sql - 如果在join t-sql

> ID：11315116
> 
> 赞同：2
> 
> 时间：2012-07-03T16:20:33.190
> 
> 标签：sql, tsql

我有一个大的 t-sql 存储过程，这部分我担心：

```
insert into @list
(
params
...
) 
select params
,..
,oip.someAttr
from @list2 as O
join dbo.abc oip
on oip.id = O.id
AND oip.prgId <> 4
join .. someother tables
...
where oipr.attrA = 1232 
```

现在我想编写一个逻辑，如果设置了存储过程“@value 位”中的附加参数，则只应检查“上面的 AND 条件”，否则不检查。

所以如果我喜欢

```
join dbo.abc oip
on oip.id = O.id
[AND]??? (i donot know). 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:25:22.113

这应该这样做： `AND (oip.prgId <> 4 OR @value = 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:57:22.397

假设`oip.prgId`不可能持有`0`s，这里有另一种考虑/尝试的选择：

```
AND oip.prgId <> 4 * @value 
```

如果`@value`为 1，则不等式右侧的计算结果为`4`，因此相应的行将被过滤掉。然而，如果`@value`是`0`，那么表达式就等同于`oip.prgId <> 0`，这基本上意味着*的任何值`oip.prgId`*（因为我们假设列中不能有`0`值）。

# ios - Skype、Gtalk 等... iOS 上的应用检测

> ID：11315119
> 
> 赞同：2
> 
> 时间：2012-07-03T16:20:44.010
> 
> 标签：ios, voip, skype

我需要在我的 iOS 应用程序中添加呼叫某些号码/帐户的功能。但我需要检测哪些用户在手机上有 Skype 或其他语音/视频应用程序以向他们展示变体。
我可以做吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:24:05.280

Skype 定义了`skype`URL 方案。只需检查设备是否可以打开`skype`URL，例如：`skype://+447123456789`拨打 +44712​​3456789。

您可以检查任何应用程序以查看它们是否具有通过下载应用程序定义的 URL 方案，将`.ipa`文件重命名为以 结尾`.zip`，解压缩并打开`Info.plist`包含在结果包中的文件。如果应用程序有 URL 方案，那么您至少可以检查应用程序是否存在，如果存在则打开它。您可以发送给它的数据是特定于应用程序的。

例子：

```
if ([[UIApplication sharedApplication] canOpenURL:@"skype://123..."])
{
    [[UIApplication sharedApplication] openURL:@"skype://123..."];
} 
```

# java - 我可以使 Java Number 子类自动装箱和拆箱吗？

> ID：11315120
> 
> 赞同：4
> 
> 时间：2012-07-03T16:20:46.373
> 
> 标签：java

我正在创建一些类来表示 Java 的无符号数字，并从 Number 派生它们。我的目标之一是让它们装箱和拆箱原始值，但我无法让它工作，也无法找到任何关于如何在其他地方实现这一目标的讨论。

这可以做到吗？如果可以，怎么做？

这是我不工作的代码！

```
public class Unsigned8 extends Number implements Comparable<Unsigned8>{

public static final long MAX_VALUE = 256L;
public static final long MIN_VALUE = 0;
private long _Value;

public Unsigned8(long value)
{
    this._Value = value;
}

@Override
public byte byteValue() {
    return (byte) _Value;
}

@Override
public short shortValue() {
    return (short) _Value;
}

@Override
public int intValue() {
    return (int) _Value;
}

@Override
public long longValue() {
    return (long) _Value;
}

@Override
public double doubleValue() {
    return _Value;
}

@Override
public float floatValue() {
    return _Value;
}

@Override
public int compareTo(Unsigned8 target) {
    return (int) (_Value - target._Value);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:24:36.417

你不能。我所做的是使用[Unsigned](http://code.google.com/p/java-unsigned/source/browse/trunk/unsigned/src/main/java/com/google/code/unsigned/Unsigned.java)帮助器类`short` `int`，`long`这样您就不会产生包装器支持`unsigned`类型的开销。有关示例，请参见链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:31:47.967

不，您会得到原语及其包装器之间的关系，如下所示：

```
原始类型包装类
boolean 布尔值
字节字节
char 字符
浮动 浮动
整数
长长
短 短

```

它们仅限于这些类型。文档[在这里](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

# sql - 在有序查询中使用 union all

> ID：11315126
> 
> 赞同：1
> 
> 时间：2012-07-03T16:20:55.503
> 
> 标签：sql, sql-server

我正在处理需要排序行（排序依据）和联合语句的查询。我想做的是根据时间为每个客户获取最新的读数。我知道我不能在 union 语句中使用 order by，但是有什么方法可以实现我想要的吗？我也有几个表加入了 select 语句。以下是我的示例查询：

```
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0001' 
(order by Time desc)
union all
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0002' 
(order by Time desc)
union all
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0003' 
(order by Time desc) 
```

所以我正在寻找能够产生这些结果的东西。有人知道这种方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:32:19.810

您所要做的就是将 order by 子句放在整个查询的末尾。

```
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0001' 

union all
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0002' 

union all
select  top 1 name, ID, Date, Time, Cust_ID
from Table1
join Table2
on ID = Cust_ID
join Table3
on c = d
where ID = 'ID0003' 
order by ID, Time desc 
```

**编辑说明**

请注意我在上述 Order by 子句中所做的更改。它将首先按 ID 升序排列，然后按客户时间降序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:24:29.430

```
select * from (
select  top 1 name, ID, Date, Time, Cust_ID from Table1
join Table2 on ID = Cust_ID
join Table3 on c = d
where ID = 'ID0001' 
union all
select  top 1 name, ID, Date, Time, Cust_ID from Table1
join Table2 on ID = Cust_ID
join Table3 on c = d
where ID = 'ID0002' 
union all
select  top 1 name, ID, Date, Time, Cust_ID from Table1
join Table2 on ID = Cust_ID
join Table3 on c = d
where ID = 'ID0003')
order by ID, Time desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:08:03.973

这似乎是一个经典[的每组最大 n](/questions/tagged/greatest-n-per-group "显示标记为“每组最大数”的问题")问题。在 SQL Server 2005 或更高版本中，借助以下[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx "ROW_NUMBER (Transact-SQL)")函数可以轻松解决：

```
WITH ranked AS (
  SELECT
    name, ID, Date, Time, Cust_ID,
    rnk = ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Time DESC)
  FROM Table1
  JOIN Table2 ON ID = Cust_ID
  JOIN Table3 ON c = d
  WHERE ID = 'ID0001'
)
SELECT name, ID, Date, Time, Cust_ID
FROM ranked
WHERE ID IN ('ID0001', 'ID0002', 'ID0003')
  AND rnk = 1 
```

也就是说，使用，按 的降序排列`ROW_NUMBER()`每组行中相同的行，然后选择排名靠前且属于特定组（即具有特定值）的行。`ID``Time``ID`

# sql - WHERE 子句抑制重复行

> ID：11315129
> 
> 赞同：0
> 
> 时间：2012-07-03T16:21:14.533
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

当主键在新表上时，由于主键约束，我遇到了表复制错误的问题。在通过不设置主键进行一些调查时，我能够在我的源表中找到一个重复的行，仍然不确定它是如何进入那里的，但我更好奇的是我发现的其余部分。

开始：

我有一个 SQL 查询，它选择整个表并返回以下内容：

```
SELECT *
 FROM search_term_suggest
 order by search_term 
```

你可以看到这个值是重复的，我不得不滚动表格来找到它。

![SQL 结果](../Images/7c421ddf7256169f54c14fd3b848f13f.png)

但是当我将查询限制为：

```
SELECT *
 FROM search_term_suggest
 where search_term = 'b' 
```

你可以看到它过滤掉了第一个值。数据库上没有触发器或任何我能看到的会限制选择查询的东西。

![SQL 结果与](../Images/260f3009ffe52a52bff63f37d6cf0b1c.png)

我正在运行 SQL 2008 r2。任何帮助是极大的赞赏。我将表复制到的数据库是 SQL 2000 数据库，当使用与上面相同的查询进行选择时，我得到了我期望的结果。

**编辑：** search_term 是 varchar(100)，search_term_suggest 是表而不是视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:26:02.973

我的猜测：`search_term`是 a`CHAR/NCHAR`并且有尾随空格（或出于其他原因正在考虑尾随空格）。尝试：

```
WHERE RTRIM(search_term) = 'b'; 
```

您可能还需要消除不受修剪操作影响的制表符/回车符。

```
WHERE LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(search_term,
  CHAR(9), ''), CHAR(10), ''), CHAR(13), ''))) = 'b'; 
```

请注意，上述两个查询都禁止使用索引，因此如果有索引，`search_term`您可能应该在将列更改为`varchar`or`nvarchar`并确保填充设置和空格不会导致问题后重建它。

其他猜测：正如@Dems 指出的那样，检查第一个查询中两列的长度。还尝试将您的 where 子句更改为以下内容，仅用于调查目的：

```
WHERE search_term LIKE 'b%'
  AND LEN(search_term) > 1; 
```

如果你在那里得到任何结果，那么你可以说：

```
DECLARE @val VARCHAR(100), @i INT;

DECLARE c CURSOR LOCAL STATIC READ_ONLY FAST_FORWARD 
  FOR SELECT search_term FROM dbo.search_term_suggest
  WHERE search_term LIKE 'b%'
    AND LEN(search_term) > 1;

OPEN c;

FETCH NEXT FROM c INTO @val;

WHILE @@FETCH_STATUS = 0
BEGIN
  SET @i = 1;
  PRINT '-----' + @val + ' (' + RTRIM(LEN(@val)) + ')';
  WHILE @i <= LEN(@val)
  BEGIN
    PRINT SUBSTRING(@val, @i, 1) + ' = ' + ASCII(SUBSTRING(@val, @i, 1));
    SET @i = @i + 1;
  END

  FETCH NEXT FROM c INTO @val;
END
CLOSE c;
DEALLOCATE c; 
```

这将帮助您解决该列中的内容，除了`b`- 它可能是您尚未检查的空格（例如制表符或回车）或其他非打印字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:25:54.923

会不会是在 29645 行中 search_term 值不是“b”，而是“b”（即 b 后跟空格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:42:41.863

它不能是 ab，只是在屏幕上看起来像 ab 的东西，特别是如果该列有约束。如果将查询结果复制到文本中，是否可以在文本编辑器中搜索“b”并找到它？

# jquery - 用 jQuery 替换 iframe 的全部内容（包括 doctype 和 html 标签）

> ID：11315136
> 
> 赞同：0
> 
> 时间：2012-07-03T16:21:42.193
> 
> 标签：jquery, ajax, iframe

stackoverflow 上还有很多其他帖子提出了几乎相同的问题，但在我到目前为止阅读的所有答案中，它们并没有解决如何从本质上替换 iframe 的整个文档，包括 DOCTYPE 和 html 标签.

我正在通过 jQuery.ajax 请求检索整个页面的 HTML，并尝试使用返回的 HTML 作为 iframe 的新 HTML。下面是从 ajax 请求返回的 HTML 示例：

```
<!DOCTYPE html>
<html lang="en-US">
    <head>
        <link rel="stylesheet" type="text/css" media="all" href="main.css">
        <title>Test Page</title>
    </head>
    <body>
        <h1>Heading</h1>
    </body>
</html> 
```

然后我通过以下方式将此 HTML 注入 iframe：

```
$('#my-iframe').contents().find('html').html(returnedHtml); 
```

正如关于这个主题的大多数其他帖子所建议的那样。但是，当我检查 iframe 的内容时，文档的结构如下：

```
<html>
    <link rel="stylesheet" type="text/css" media="all" href="main.css">
    <title>Test Page</title>
    <h1>Heading</h1>
</html> 
```

请注意缺少 DOCTYPE、html 标记上缺少 lang 属性、缺少 head 和 body 标记。

有什么建议么？（请注意，由于各种因素，无法在此应用中仅将 iframe 的 src 属性更改为必要的 url）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:32:07.203

尝试一些普通的javascript：

```
iframe = document.getElementById('my-iframe');
iframe.contentWindow.document.open()
iframe.contentWindow.document.write(returnedHtml);​ 
```

[小提琴](http://jsfiddle.net/khEsn/2/)

# javascript - 这是使用 Jquery append() 的 IE8 的错误吗

> ID：11315138
> 
> 赞同：1
> 
> 时间：2012-07-03T16:21:52.997
> 
> 标签：javascript, jquery

几天来我一直在尝试解决这个问题，但在 Firefox 和 Chrome 上运行良好，但在 IE8 JS 上运行良好：

```
<script type="text/javascript">
$(function() {
    $.get('./data.xml', function(data) {
        $($(data).children().find('attributes')[0]).append($('<item key="is">true</item>'));
        xml = data.xml ? data.xml : new XMLSerializer().serializeToString(data);
        alert(xml);
    });
});
</script> 
```

数据.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
<user id="123" name="xxx">
    <attributes>
        <item key="test">123qwe</item>
    </attributes>
</user>
</result> 
```

结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
<user id="123" name="xxx">
    <attributes>
        <item key="test">123qwe</item>
        <item key="is">true</item>
    </attributes>
</user>
</result> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:08:38.200

```
var item = $($.parseXML("<item key="is">true</item>")
              .getElementsByTagName('*')[0]);
$($(data).children().find('attributes')[0]).append(item); 
```

# cron - 特定日期的每周 Cron 作业

> ID：11315140
> 
> 赞同：0
> 
> 时间：2012-07-03T16:22:00.053
> 
> 标签：cron

我昨天创建了以下 cron 作业，每周二凌晨 12:01 运行（我认为），但它昨晚没有运行。按照我在 cron 文件中的命令运行命令有效。我在这里做错了什么？

```
1 0 * * 2 python2.7 /path/to/django/manage.py my_command > /path/to/file.log 
```

编辑：我没有包括日志重定向，我猜这可能很重要。应该是>>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:45:57.063

正如@Zhenya 指出的那样，可能不在为其生成的作业提供默认`python2.7`值`PATH`。`cron`通常`cron`在某处记录，但它似乎因分布而异 - 在我的 Debian 机器上，`syslog`将这些条目重定向到`/var/log/syslog`，但它可能是你机器上的不同日志文件。检查以查看`cron`可能抱怨的错误...

# c# - 在 Visual Studio 中提取 c# 类以分离 dll

> ID：11315142
> 
> 赞同：2
> 
> 时间：2012-07-03T16:22:13.550
> 
> 标签：c#, visual-studio-2010

我想知道是否有人知道 Visual Studio 2010 中的一种快速方法，或者现有的加载项，它可以让我快速从一个项目（WPF 或 WinForms）中提取一个类并将其移动到类库项目，同时更新所有引用原始项目中的课程？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:30:22.733

Resharper 可以做到这一点。不知道我头顶上的免费一个。

[http://www.jetbrains.com/resharper/features/code_refactoring.html#Move_to_Folder](http://www.jetbrains.com/resharper/features/code_refactoring.html#Move_to_Folder)

[http://www.jetbrains.com/resharper/features/code_refactoring.html#Move_Type_to_Another_File_or_Namespace](http://www.jetbrains.com/resharper/features/code_refactoring.html#Move_Type_to_Another_File_or_Namespace)

# android - 位图图像避免大量图像视图内存不足

> ID：11315143
> 
> 赞同：0
> 
> 时间：2012-07-03T16:22:15.913
> 
> 标签：android, image, memory

我想，标题太具体了。所以，我想先解释一下，我想创建一个图章应用程序（如 photobox），我们可以在照片上放置很多图章图像，保存图像和设计。

我现在在我的代码中使用 option.inSampleSize。更有可能是这个链接：[将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

当图像数量较小时，这解决了我的问题。但是当图像数量（图像计数）变得更大时，内存再次存在。

这里的专家有什么想法吗？目前我仍在使用 ImageView 来显示邮票图像。

或者..也许还没有解决方案？我唯一想到的就是限制图像的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:33:00.423

您是否按照 Google 教程进行图像缓存？它概述了陷阱，并向您展示了如何正确缓存图像，以免超出内存预算。

[Android 开发者：显示位图 - 缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#memory-cache)

关键线将是

```
// Get memory class of this device, exceeding this amount will throw an
// OutOfMemory exception.
final int memClass = ((ActivityManager) context.getSystemService(
        Context.ACTIVITY_SERVICE)).getMemoryClass();

// Use 1/8th of the available memory for this memory cache.
final int cacheSize = 1024 * 1024 * memClass / 8;

mMemoryCache = new LruCache(cacheSize) {
    @Override
    protected int sizeOf(String key, Bitmap bitmap) {
        // The cache size will be measured in bytes rather than number of items.
        return bitmap.getByteCount();
    }
}; 
```

# c# - ASP.NET 页面指令导致错误

> ID：11315145
> 
> 赞同：5
> 
> 时间：2012-07-03T16:22:26.733
> 
> 标签：c#, visual-studio-2010, visual-studio-2008

我有一个页面表现出最奇怪的行为。在构建/调试我的项目时，我有时会收到指向我的页面指令的构建错误。

如果我在指令中的任意两个属性之间插入一个额外的空格，错误就会消失并且构建成功。

**页面指​​令：**

```
<%@ Page Language="C#" AutoEventWireup="true" EnableSessionState="true" CodeBehind="myPage.aspx.cs" Inherits="com.mycompany.UserControls.myPage" %> 
```

**产生的错误：**

```
Keyword, identifier, or string expected after verbatim specifier: @ C:\mypath\myPage.aspx   1   1   myProjectName

A namespace cannot directly contain members such as fields or methods   C:\mypath\myPage.aspx   1   1   myProjectName 
```

重申一下，例如，在错误之间添加一个额外的空格`Page`并`Language="C#"`暂时清除错误。我会在下一次构建中看到 100% 的成功率，但错误最终会再次出现。我通常可以通过关闭显示`myPage.aspx`和构建/重建我的项目的编辑器来强制错误。

*注意：*此行为存在于 Visual Studio 2008 中，并且在切换到 Visual Studio 2010 后仍然存在。

**编辑：**更正了相关`@`页面指令中省略的错字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:31:43.720

您是否缺少开头 <% 和 Page 关键字之间的 @ 符号？你有

```
<% Page Language="C#" AutoEventWireup="true" EnableSessionState="true" CodeBehind="myPage.aspx.cs" Inherits="com.mycompany.UserControls.myPage" %> 
```

它应该是

```
<%@ Page Language="C#" AutoEventWireup="true" EnableSessionState="true" CodeBehind="myPage.aspx.cs" Inherits="com.mycompany.UserControls.myPage" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:32:54.183

<%@ 页面中缺少的 @ 符号......

# c# - Razor @{ ... } vs @ 调用 RenderPartial

> ID：11315154
> 
> 赞同：6
> 
> 时间：2012-07-03T16:23:01.227
> 
> 标签：c#, asp.net-mvc-3, razor

我试图理解为什么当我在我看来这样做时会出现错误

```
@Html.RenderPartial("MyPartial", Model); 
```

**编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。**

**编译器错误消息：CS1502：“System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult)”的最佳重载方法匹配有一些无效参数**

但是当我这样做时，部分渲染得很好

```
@{
   Html.RenderPartial("MyPartial", Model);
} 
```

有谁知道为什么第一个例子失败了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:37:10.517

基本上事实是这种格式...

```
@Html.RenderPartial("MyPartial", Model) 
```

... 用于不返回的函数`void`，因为 RenderPartial 确实返回`void`，所以您会收到该错误。

相反，在这个块中，它只是代码执行（这将在内部进行 write 调用）：

```
 @{    
Html.RenderPartial("MyPartial", Model); 
} 
```

您也可以致电

```
@Html.Partial("MyPartial") 
```

...它确实返回了字符串。

# java - OpenCV/JavaCV 人脸识别 - 非常相似的置信度值

> ID：11315157
> 
> 赞同：12
> 
> 时间：2012-07-03T16:23:05.847
> 
> 标签：java, opencv, javacv, eigenvector

我将解释我正在尝试做的事情，因为它似乎与理解我的问题有关。

我目前正在尝试根据数据库中的已知图片对站​​在相机前的人进行面部识别。

这些已知图片是从识别智能卡（仅包含一张正面图片）或来自社交网络的正面个人资料图片中收集的。从我目前阅读的内容来看，似乎要获得良好的人脸识别，需要大量的训练图像（50+）。因此，由于我收集的图像很少，无法创建可靠的训练集，因此我尝试使用我的实时相机帧捕获（当前使用 150 个）作为训练集，并将之前收集的识别图片作为测试集。我不确定我的尝试是否正确，所以如果我搞砸了，请告诉我。

所以，问题是，假设我从智能卡中获得了 5 张已识别的图片，我尝试使用相机捕获的 150 帧作为训练集来进行人脸识别。在尝试识别时，5 个测试面中的每一个的置信度值都非常相似，这使得整个程序毫无用处，因为我无法准确识别任何人。通常，使用不同的相机捕捉作为训练，我从随机人的照片中获得比我自己的照片更高的置信度值。

我会很感激你能给我的任何帮助，因为我在这里不知所措。

谢谢你。

注意：我使用 OpenCV 的 JavaCV 包装器来制作我的程序，以及包中包含的 haarcascades。特征脸是使用的算法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-07T10:27:46.083

# 人脸识别

## 介绍

我想添加这个。[libfacerec](https://github.com/bytefish/libfacerec)已包含在官方[OpenCV 2.4.2](http://opencv.org/opencv-v2-4-2-released.html)中，请参阅：

*   [http://opencv.org/opencv-v2-4-2-released.html](http://opencv.org/opencv-v2-4-2-released.html)

这意味着如果您使用的是 OpenCV 2.4.2，那么您在**contrib**模块中有新的[cv::FaceRecognizer 。](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)我知道最近添加了一个 Python 包装器（谢谢！），可能在编写本文时 Java 也被包装了。

 **[cv::FaceRecognizer附带一个详尽的文档，它将通过](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)*大量*完整的源代码示例向您展示如何进行人脸识别：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)

如果您想了解可用的人脸识别算法（特征脸、Fisherfaces、局部二进制模式直方图）如何工作，请特别阅读[OpenCV 人脸识别指南](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html)。在那里，我解释了算法的工作原理并提到了它们的缺点：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html)

## 少量图像的人脸识别

现在，当您的训练数据集很小时，您的原始人脸识别问题。我会给你写一个详尽的答案，所以它可能会帮助从谷歌来到这里的人。

实际上，当您的数据集中每人只有很少的样本时，不应使用 Eigenfaces 和 Fisherfaces。**您需要数据才能使这些模型正常工作**，对此我再怎么强调也不为过。越多越好。这些方法是基于估计数据的方差，所以给他们一些数据来估计你的模型！不久前，我在 AT&T Facedatabase（使用[facerec 框架](https://github.com/bytefish/facerec)）上进行了一个小测试，它显示了这些方法在每个人的图像数量不同的情况下的性能：

![在此处输入图像描述](../Images/2d69053da3bdd82cd2ce0e41a77339ba.png)

我不是在这里写出版物，也不会用详细的数学分析来支持这些数字。之前已经做过了，所以我建议大家对这些数字有疑问，看看（2），以便看到对小型训练数据集的 PCA（Eigenfaces）和 LDA（Fisherfaces）的非常详细的分析。

所以我建议在小样本场景中使用局部二进制模式直方图（3）进行人脸识别。这些也包含在 OpenCV [FaceRecognizer](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)中，并且已被证明在小型训练数据集上表现良好。如果将此与 TanTriggs 预处理 (4) 结合使用，您应该拥有一个非常强大的人脸识别模型。TanTriggs 预处理是 Python 中的 8 行（左右），有关实现，请参见[https://github.com/bytefish/facerec/blob/master/py/facerec/preprocessing.py#L41](https://github.com/bytefish/facerec/blob/master/py/facerec/preprocessing.py#L41)。这应该很容易适应 Java（或者我可以用 OpenCV 来实现它，如果人们要求的话）。

## 文学

*   (1) Belhumeur, PN, Hespanha, J. 和 Kriegman, D. *Eigenfaces vs. Fisherfaces：使用特定类别线性投影的识别。*IEEE Transactions on Pattern Analysis and Machine Intelligence 19, 7 (1997), 711–720。
*   (2) Martinez, A 和 Kak, A. *PCA 与 LDA* IEEE Transactions on Pattern Analysis and Machine Intelligence, Vol。23，第 2 期，第 228-233 页，2001 年。
*   (3) Ahonen, T.、Hadid, A. 和 Pietikainen, M.*具有局部二进制模式的人脸识别。*计算机视觉 - ECCV 2004 (2004), 469–481。
*   (4) Tan, X. 和 Triggs, B.*增强的局部纹理特征集，用于在困难的光照条件下进行人脸识别。*IEEE 图像处理汇刊 19 (2010), 1635–650。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T08:15:50.317

您想知道的是如何仅使用一张训练图像执行人脸识别。这是可能的，但也取决于您要分类的不同人员的数量。

当然不需要 50 多张训练图像。对于基本的人脸识别，您需要大约 50 张人脸来计算您的人脸空间（特征脸）。也许你把它和那个混在一起了。看到你的这些面孔有很多变化（肤色，眼镜，形式......）你可以从你喜欢的任何面孔数据库中获取这些面孔。[http://www.face-rec.org/](http://www.face-rec.org/)列出了几个数据库并解释了不同的算法。

计算出面部空间后，您可以使用尽可能多的面部进行训练。在你的情况下，你只有一个。根据您想要分类的不同主题的数量，这可能已经奏效。

如果你得到太多错误的分类，我会看看混合方法。混合方法将模板匹配算法（特征脸、渔人脸）与基于特征的算法相结合。在这种情况下，您获取第一个算法的输出并将眼睛、鼻子、眉毛、下巴形状等与您的测试脸相匹配。

**简而言之：**

1.  使用 haarcascades 从每个图像中提取人脸
2.  计算你的面部空间
3.  训练每张脸
4.  求人脸分类
5.  采取最可能的分类并检查面部特征

如果你还没有找到，OpenCV 还有一个人脸识别库： [https ://github.com/bytefish/libfacerec](https://github.com/bytefish/libfacerec)

编辑：我不会使用超过 10-15 个组件（特征脸）。**

# android - 复选框调整大小

> ID：11315167
> 
> 赞同：0
> 
> 时间：2012-07-03T16:24:11.247
> 
> 标签：android, xamarin.android

> **可能重复：**
> [更改 android Checkbox 的大小](https://stackoverflow.com/questions/7242163/change-the-size-of-android-checkbox)

Android 的另一件事比它需要的更难。我找到[了本教程](http://www.anddev.org/tutorial_change_look_of_checkbox-t4553.html)，但我不仅无法跟踪现有 android 代码的确切结束位置以及我应该开始编码/编辑/添加的位置，而且我似乎没有他包含的文件路径。

```
android-sdk-windows-1.0_r2\tools\lib\res\default\values\themes.xml 
```

我有

```
android-sdk\tools\lib 
```

但这就是相似之处的结束。我那里没有 res 文件夹。有人可以提供一个示例或资源来提供一种明确的方法来使 CheckBox 更大吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:51:23.893

您只需要设置相关的 Drawable 并在复选框中设置它们：

```
<CheckBox 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="new checkbox" 
    android:background="@drawable/my_checkbox_background"
    android:button="@drawable/my_checkbox" /> 
```

# hadoop - hadoop java.io.IOException：运行namenode-format时

> ID：11315177
> 
> 赞同：12
> 
> 时间：2012-07-03T16:24:42.597
> 
> 标签：hadoop, directory, ioexception, java-io

我运行了 namenode -format。这是我的输出。我尝试更改文件权限 chmod 777 hadoop。

我相信这一行是错误 ERROR namenode.NameNode: java.io.IOException: Cannot create directory /your/path/to/hadoop/tmp/dir/hadoop-hadoop/dfs/name/current

```
adoop@alexander-desktop:/usr/local/hadoop/bin$ ./hadoop namenode -format
12/07/03 17:03:56 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = alexander-desktop/127.0.1.1
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 0.20.2
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20 -r 911707; compiled by 'chrisdo' on Fri Feb 19 08:07:34 UTC 2010
************************************************************/
12/07/03 17:03:56 INFO namenode.FSNamesystem: fsOwner=hadoop,hadoop
12/07/03 17:03:56 INFO namenode.FSNamesystem: supergroup=supergroup
12/07/03 17:03:56 INFO namenode.FSNamesystem: isPermissionEnabled=true
12/07/03 17:03:56 ERROR namenode.NameNode: java.io.IOException: Cannot create directory /your/path/to/hadoop/tmp/dir/hadoop-hadoop/dfs/name/current
    at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.clearDirectory(Storage.java:295)
    at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1086)
    at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1110)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:856)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:948)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:965)

12/07/03 17:03:56 INFO namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at alexander-desktop/127.0.1.1

hadoop@alexander-desktop:/usr/local$ sudo hadoop/bin/hadoop namenode -format
sudo: /etc/sudoers is mode 0777, should be 0440
sudo: no valid sudoers sources found, quitting 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T16:47:14.630

尝试使用 sudo （我意识到您更改了权限），但我仍然会尝试 sudo 并检查是否可以解决问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-01T05:23:38.447

以下步骤解决了我的问题 -

1-须藤苏

输入您的密码。

2-/usr/local/hadoop/bin/hdfs 名称节点格式。

这已针对 hadoop2.5 完成，其中“hadoop namenode -format”已被弃用，因此使用“hdfs namenode -format”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-12T14:43:30.000

检查 hdfs-site.xml 配置，它可能具有属性 dfs.namenode.name.dir 和 dfs.datanode.data.dir 的错误路径在我的情况下，这是问题的原因（目录位于当前用户的其他目录中主文件夹）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-26T11:48:30.947

这是一个权限问题。您可以使用 1\. sudo 2\. 以 root 身份登录

但最好的解决方案是

sudo chown $HADOOP_HOME

hadoop 名称节点格式

HADOOP_HOME 是你的 hadoop 安装目录

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-09T17:57:37.297

sudo 在这种情况下被破坏，但`pkexec`（PolicyKit 的命令行前端）仍然有效，因此您可以使用单个命令修复它。无需重新启动。

```
pkexec chmod 0440 /etc/sudoers 
```

这假设`PolicyKit`已安装。如果这是一个桌面系统（而不是没有 GUI 的服务器），它就是。

# ruby-on-rails - 在 RoR 中构建翻译的有效方法？

> ID：11315179
> 
> 赞同：2
> 
> 时间：2012-07-03T16:24:52.727
> 
> 标签：ruby-on-rails, internationalization

我希望有人可以看看这个，因为我以前从来没有翻译过英语以外的任何东西，所以我不确定是否会有语法冲突。

我有：

```
en:
  articles:
    name: "Articles"

  comments:
    name: "Comments"

  # things
  no_results: "There are no %{things}"
  my: "My %{things}" 
```

然后在一个视图文件中，例如：

```
#title= t('articles.name')

%ul
  %li= link_to t('my', things: t('articles.name')), articles_path(user)

.no_results= t('no_results', things: t('comments.name').downcase) 
```

我想要做的是干掉我的翻译，但也不要把使用方法弄得一团糟：

*   复数
*   单数化
*   低档
*   大写

在文本中使用的模型最常见的形式似乎是大写和复数形式，这就是我选择“Articles”与“Article”或“article”的原因。您是否喜欢在视图文件中使用上述方法而不是类似的方法：

```
articles:
  one: "Article"
  other: "Articles" 
```

..这可能会发展成这个烂摊子：

```
articles:
  one:     "Article"
  other:   "Articles"
  one_l:   "article"
  other_l: "articles" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:24:41.547

不同的语言对于如何构建句子有不同的规则。干掉你的翻译可能会导致在外语中出现语法错误的句子。我建议一次坚持一个逻辑文本块。例如段落、句子、表达或单词。

例如，您假设在您希望将您的应用程序翻译成的每种语言中，“my”这个词总是出现在“articles”这个词之前，并且“my”只有一个词。

在某些语言中，“我的”的版本可能取决于伴随它的单词。我会用保加利亚语，因为我很熟悉——“我的车”翻译成“Moiata kola”，“我的卡车”翻译成“Moiat kamion”。不是“我的”的直接翻译。

另外，在某些语言中，您可能不得不说“我的文章”之类的内容，其中“文章”位于“我的”之前。对于不同的语言，您可以将“articles”配置在“my”之前，但如果您的翻译包含多个变量，则可能会出现问题。

我会为每一个单独的一行：“我的文章”、“没有文章”、“我的车”、“没有车”等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:32:32.357

您在帖子中描述的做法，即：

```
articles:
 one: "Article"
 other: "Articles" 
```

恕我直言是有效和适当的。至少我在我从事的项目中经常遇到它。至于你提到的“混乱”：

```
 one_l:   "article"
  other_l: "articles" 
```

恕我直言，您不必担心，因为您基本上可以`downcase`在任何字符串上调用 a 。只要您在给定语言中具有单数和复数形式，就可以了。

至于位置的不同`%{things}`，那是很自然的事情。你把它放在合适的地方。例如，在 5 种不同的语言中：

```
 not_saved:
    one: ! '1 fejl medførte at denne %{resource} ikke kunne gemmes:'
    other: ! '%{count} fejl medførte at denne %{resource} ikke kunne gemmes:'

 not_saved:
    one: ! '1 error prohibited this %{resource} from being saved:'
    other: ! '%{count} errors prohibited this %{resource} from being saved:'

  not_saved:
    one: ! '1 virhe esti %{resource} tallentamisen:'
    other: ! '%{count} virhettä esti %{resource} tallentamisen:'

  not_saved:
    one: ! 'Én feil gjorde at %{resource} ikke kunne lagres:'
    other: ! '%{count} feil gjorde at %{resource} ikke kunne lagres:'

  not_saved:
    one: ! '1 fel hindrade denna %{resource} från att sparas:'
    other: ! '%{count} fel hindrade denna %{resource} från att sparas:' 
```

希望有帮助

# c# - 泛型类中的数组和索引器

> ID：11315180
> 
> 赞同：2
> 
> 时间：2012-07-03T16:24:58.170
> 
> 标签：c#, generics, indexer

到目前为止，我一直能够从该网站上的现有帖子中获得答案，但今天我有一个问题似乎之前没有人问过。

它关于以下代码：

```
class Board<T>
{
    private T[,] board;

    public T[,] BoardArray
    {
        get { return (T[,])board.Clone(); }
    }

    public T this[int y, int x]
    {
        get { return board[y, x]; }
        set { board[y, x] = value; }
    }

    public Board()
    {
        board = new T[8, 8];
    }

    public void AssignToBoard()
    {
        board[1, 2] = 3;
        this[1, 2] = 3;
    }
} 
```

问题是方法中的两行代码都会产生相同的编译时错误。我知道为什么会抛出错误，但我不知道一个干净的解决方法。这是错误：

```
Error   1   Cannot implicitly convert type 'int' to 'T' C:\Users\Peter\Desktop\Dropbox\ReversieAI\ReversieAI\ReversieAI\Map.cs  31  18  ReversieAI 
```

我能够编译我的代码的唯一方法是将这些行更改为：

```
board[1, 2] = (T)(object)3;
this[1, 2] = (T)(object)3; 
```

尽管它有效，但它仍然是一个肮脏的解决方案。你们中的任何人都认识到这个问题并且可以帮助我/分享任何想法吗？

在此先感谢，彼得

编辑：我通过更改架构中删除类的通用部分的某些内容找到了解决方案。感谢您的所有反馈。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:28:15.593

问题似乎是在 AssignToBoard 方法中，您假设这`T`是`int`通过将整数放入包含`T`s 的数组中。

我通常会期待类似的东西：

```
public void AssignToBoard(T value)
{
    board[1, 2] = value;
    this[1, 2] = value;
} 
```

在这种情况下，您将传递一个`T`正在分配的正确类型 ( ) 的值。

然后你可以在其他地方做一些事情，比如：

```
var myboard = new Board<int>();
myboard.AssignToBoard(3); 
```

作为附加说明`(T)(object)3`，如果 T 类似于字符串并且无法在运行时转换，则使用的解决方案可能会在运行时失败。你真的只是将任何问题从编译时推到运行时......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:27:53.447

AssignToBoard 不是通用的，但 board 是通用的。

你的意思是把它作为一个测试功能移出董事会。如果是这样，您将创建一个 Board 并使用它，一切都会正常工作。

要进行测试，您可以使用 AssignToBoard 之类的

```
public void AssignToBoard()
{
    Board<int> testBoard = new Board<int>();
    testBoard[1, 2] = 3;
} 
```

# triggers - 删除了具有触发器的 Google Apps 电子表格。收到错误电子邮件，无法触发经理

> ID：11315181
> 
> 赞同：0
> 
> 时间：2012-07-03T16:25:00.523
> 
> 标签：triggers, google-apps-script

我有一个带有触发器的电子表格，我已将其删除。它是我在其中使用过任何脚本的唯一电子表格，所以我确信它是导致它的原因。

现在我每天都会收到一封电子邮件，标题是：

Google Apps 脚本失败摘要：未找到

它的巨大，充满了一行又一行：

很抱歉，发生服务器错误。请稍等，然后重试。

电子邮件中有一个链接到触发器管理器：[https ://docs.google.com/macros/triggers?lib=MAT_7pjOEI5hz78DwYxi4-p52yylnQMZB](https://docs.google.com/macros/triggers?lib=MAT_7pjOEI5hz78DwYxi4-p52yylnQMZB)

但是那个页面给了我：

很抱歉，发生服务器错误。请稍等，然后重试。

如何删除此触发器，从而停止收到这些电子邮件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:28:25.440

我有完全相同的事情，很惊讶在这里没有看到答案。

即使您没有原始电子表格，也很容易修复。刚刚进入脚本编辑器 -> 资源 -> 所有触发器。

然后，您可以删除有问题的触发器。任务完成！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:14:28.617

您可能在垃圾箱中仍有可用的文档，因此您*可以*恢复它并正常访问它以删除触发器。

# html - 如何设置 div 之间的空间？

> ID：11315183
> 
> 赞同：0
> 
> 时间：2012-07-03T16:25:11.403
> 
> 标签：html, css

这是我的 html/css 代码： [JsFiddle 代码](http://jsfiddle.net/8nW7V/)

我如何设置之间的空间

```
nav id="section-navi"
section class="section" 
div id="footer-main" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:05:43.100

您可以将“margin-bottom”属性添加到 CSS #section-navi，并将“margin-top”添加到 #footer-main。请看下文。

```
#section-navi
{
background: none repeat scroll 0 0 padding-box #FFFFFF;
border: 1px solid #B8B8B8;
border-radius: 0 0 10px 10px;
box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.2);
margin: 10px auto 0px;
min-height: 40px;
padding: 45px 24px 0;
position: relative;
width: 938px;
z-index: 4;
}
#footer-main
{
background: none repeat scroll 0 0 padding-box #21242C;
border-radius: 10px 10px 0 0;
height: 75px;
margin-top: -10px;
padding: 0 24px;
position: relative;
width: 938px;
margin: 10px auto 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:31:46.510

这就是你所追求的吗？

HTML：

```
 <div class="cleaner h20"></div> 
```

CSS：

```
.cleaner { clear:both; }
.h20 { height: 20px; } 
```

这是您的 JSFiddle 的另一个版本，其中包含更改：

[http://jsfiddle.net/T6md9/1/](http://jsfiddle.net/T6md9/1/)

# visual-studio-2010 - 从 VS2010 运行测试列表时，是否可以向 MSTest 添加传递命令行参数？

> ID：11315185
> 
> 赞同：1
> 
> 时间：2012-07-03T16:25:14.570
> 
> 标签：visual-studio-2010, mstest

我在 VS2010 中有一个正在运行的测试列表，我想在运行这些测试时传递额外的命令行参数，就好像我自己从命令行调用 MSTest.exe 一样。我用谷歌搜索并搜索了这个论坛，但没有找到任何答案。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:33:22.787

**您可以在testname.testrunco​​nfig**文件中配置一些设置。

您还可以创建列表并选择要在**testname.vsdmi**文件中运行的测试。

在这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms182480%28v=vs.80%29.aspx)中，您可以看到一些信息作为起点。

# php - 为什么 Open Graph Built-In Like 不再工作了？

> ID：11315195
> 
> 赞同：0
> 
> 时间：2012-07-03T16:25:41.783
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

我已经为对象创建了一个 Facebook 应用程序和开放图形操作“赞”（这可能是任何类型信息的全局赞操作）。

我只想在最近的活动中获得这种格式，使用一个简单的 Like 按钮：**“USERNAME”喜欢 APPNAME 上的“OG:TITLE”**

我使用这段代码：

> > `<meta property="fb:app_id" content="**" />` `<meta property="og:type" content="article" />` `<meta property="og:url" content="**" />` `<meta property="og:title" content="**" />` `<meta property="og:image" content="**" />`

并像这样加载 SDK：

> > `<script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=*******"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));
> > </script>`

它工作了一天，然后停止并死亡！

我想知道是否有任何解决方法？我应该怎么做，或者什么可能是错的？

感谢大家的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:37:25.113

您可以使用 javascript sdk 来喜欢网页或对象。这是示例代码。请注意，您应该通过授权从用户那里获取访​​问令牌。

```
FB.api(
        '/me/og.like',
        'post',
        { 'object': 'http://www.yourwebpage.com/',
        'access_token': 'aaaa'  },
        function(response) {
           if (!response || response.error) {
              alert('you couldnt like.');
           } else {
              alert('you liked it.');
           }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:58:06.787

您是否使用 FB 调试器来测试您的链接是否一切正确？ [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# combobox - 为 ComboBoxes 指定默认选定值 (dojo 1.7)

> ID：11315197
> 
> 赞同：0
> 
> 时间：2012-07-03T16:25:50.633
> 
> 标签：combobox, dojo

我正在使用 dojo1.7 和 ComboBoxes，但在设置默认值时遇到问题。我注意到设置值正常工作（当然应该:-)....

```
<div data-dojo-type="dojo.store.Memory" data-dojo-id="stateStore" data-dojo-props="data: [{id: 'y', name: 'yes'}, {id: 'n', name: 'no'}]"></div>

<input data-dojo-type="dijit.form.ComboBox" data-dojo-props="store:stateStore, searchAttr:'name'" value="yes" name="state" id="stateInput"> 
```

我注意到，当您取出 value="yes" 属性时，ComboBox 不再具有来自商店的默认选定值。

有什么方法可以将默认值设置为商店中的第一个值？我问这个的原因是因为我计划使用大量动态生成的 JSON 数据并且能够“默认为第一个值”将是非常有益的。

珍妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:10:14.160

我不确定如何以声明方式执行此操作，但是：

*   编写html的代码，你能不能让它写出第一个元素的值？
*   以编程方式，您将从商店中获取所有商品，然后选择第一个（在 onComplete(items) 中，并将值设置为您的 items[0].name 或类似的东西......

如果您可以使用编程技巧，它可能会允许更细粒度的操作。

# ruby-on-rails - 如何从 Rails 时间类中获取 2 位数的小时和分钟

> ID：11315204
> 
> 赞同：22
> 
> 时间：2012-07-03T16:26:24.723
> 
> 标签：ruby-on-rails, datetime

我在看

[http://corelib.rubyonrails.org/classes/Time.html#M000245](http://corelib.rubyonrails.org/classes/Time.html#M000245)

如何从时间对象中获取两位数的小时和分钟

可以说我愿意

```
t = Time.now

t.hour // this returns 7 I want to get 07 instead of just 7 
```

同样的

```
t.min //  // this returns 3 I want to get 03 instead of just 3 
```

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-03T16:35:30.310

如果你想把你的时间放在一个可读的字符串或类似的东西中，可能值得研究一下[Time#strftime 。](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

例如，

```
t = Time.now
t.strftime('%H')
  #=> returns a 0-padded string of the hour, like "07"
t.strftime('%M')
  #=> returns a 0-padded string of the minute, like "03"
t.strftime('%H:%M')
  #=> "07:03" 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-03T16:28:59.527

使用[String.format](http://ruby-doc.org/core-1.9.3/String.html#method-i-25) (%) 运算符怎么样？像这样：

```
x = '%02d' % t.hour
puts x               # prints 07 if t.hour equals 7 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-31T06:06:23.657

你可以试试这个！

```
Time.now.to_formatted_s(:time) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-03T18:23:55.920

对于它的价值，`to_formatted_s`实际上有一个更短的 alias `to_s`。

```
 Time.now.to_s(:time) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-22T00:01:52.917

值得一提的是，您可能需要特定时区的小时数。

如果已设置时区（全局或您在一个块内）：

```
Time.current.to_formatted_s(:time) 
```

要内联设置时区：

```
Time.current.in_time_zone(Location.first.time_zone).to_formatted_s(:time) 
```

# tomcat - 如何使用 Tomcat 在 maven 构建阶段运行 selenium 测试

> ID：11315207
> 
> 赞同：0
> 
> 时间：2012-07-03T16:26:43.093
> 
> 标签：tomcat, maven, selenium, selenium-rc

我想实现这个步骤： 1-启动 tomcat 服务器 2-部署战争 3-启动 selenium 服务器

所以我在我的 pom.xml 文件中使用了这段代码：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org   
/2001/XMLSchema-instance"

xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven- 
 v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.tests.functional.selenium</groupId>
<artifactId>functionalTestsSelenium</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>functionalTestsSelenium Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium.client-drivers</groupId>
        <artifactId>selenium-java-client-driver</artifactId>
        <version>1.0.2</version>
        <scope>test</scope>
    </dependency>

</dependencies>
<build>
    <finalName>functionalTestsSelenium</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.0.2</version>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.0-beta-1</version>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
        </plugin>

        <!-- Start the tomcat server and Deploy the war -->
        <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <configuration>
                <wait>false</wait>
                <container>
                    <containerId>tomcat6x</containerId>
                    <type>installed</type>
                    <home>${env.CATALINA_HOME}</home>
                </container>
            </configuration>
            <executions>
                <execution>
                    <id>start-container</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start</goal>
                        <goal>deploy</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop-container</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <!-- Start the selenium server -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>start</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start-server</goal>
                    </goals>
                    <configuration>
                        <background>true</background>
                        <logOutput>true</logOutput>
                    </configuration>
                </execution>
                <execution>
                    <id>stop</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop-server</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
 </plugins>
</build> 
```

所以现在当我运行以下命令时：mvn integration-test。

我看不到启动 tomcat 和 selenium 服务器，所以我尝试通过以下命令分别测试每一个：

```
mvn tomcat:run
mvn selenium:start-server 
```

所以服务器启动良好

任何想法请如何使用 Tomcat 作为 maven 构建阶段的一部分运行 selenium 测试。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:40:49.397

从此处的原型生成示例项目：http: [//tomcat.apache.org/maven-plugin-2.1/archetype.html](http://tomcat.apache.org/maven-plugin-2.1/archetype.html)

然后运行： **mvn clean install** :-) 查看名为 basic-webapp-it HTH 的模块中的 pom

# c# - 在 jQuery AJAX 调用中处理 WebFaultException

> ID：11315208
> 
> 赞同：1
> 
> 时间：2012-07-03T16:26:50.350
> 
> 标签：c#, jquery, wcf, exception-handling, http-status-codes

我有一些 jQuery 可以调用 WCF 服务。当服务遇到错误时，它会抛出一个`WebFaultException`带有描述和`500 Internal Server Error`状态代码的。

客户端，我正在做一些事情：

```
$.ajax({
    url: BaseUrl + 'ThisShouldThrowAnException',
    type: 'GET',
    dataType: 'jsonp',
    crossDomain: true,
    success: function (data) {
        // this should never be called
        alert("Got data: " + data);
    },
    error: function (jqXHR, status, message) { // never called
            // would like this to handle my status code
        alert(status + " " + message);
    }
}); 
```

在本地 IIS 服务器上，正在调用的相应代码如下所示：

```
[OperationContract]
[WebGet(RequestFormat=WebMessageFormat.Json)]
bool ThisShouldThrowAnException();

public bool ThisShouldThrowAnException()
{
    throw new WebFaultException<String>("Something really bad happened.", HttpStatusCode.InternalServerError);
} 
```

问题是，当我进行此调用时，将调用成功函数。**jQuery 似乎吞噬了我`500 Internal Server Error`，而是给了我一个`200 OK`**. 使用[Fiddler](http://www.fiddler2.com/fiddler2/)进行检查还显示我的响应状态代码是`200 OK`. 当我通过浏览器调用或手工制作请求时，我会收到相应的`500 Internal Server Error`.

我的问题是：我怎样才能处理呼叫的`WebExceptionFault`内部`$.ajax(...)`？就目前`$.ajax`而言，它完全忽略了传递给它的任何状态代码。

我尝试使用`ajaxError`and `statusCode`，但都没有奏效：

```
$('#error').ajaxError(function() {
    alert("An error occurred");
});

$.ajax({
    url: BaseUrl + 'ThisShouldThrowAnException',
    type: 'GET',
    dataType: 'jsonp',
    crossDomain: true,
    success: function (data) {
        alert("Got data: " + data);
    },
    statusCode: {
        500: function() {
            alert("Got 500 Internal Server Error");
        }
    },
    error: function (jqXHR, status, message) {
        alert(status + " " + message);
    }
}); 
```

* * *

# 新发现

在进一步分析中，当我检查 jQuery 生成的查询字符串时，我发现以下返回一个`200 OK`：

```
http://localhost/RestService/RestService.svc/ThisShouldThrowAnException?callback=jQuery172003801283869839445_1341495740773&_=1341495740777

// on page:
jQuery172003801283869839445_1341495740773("Something really bad happened.",500); 
```

同时，以下请求返回一个`500 Internal Server Error`：

```
http://localhost/RestService/RestService.svc/ThisShouldThrowAnException

// on page:
"Something really bad happened" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:15:47.903

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

在数据类型部分下，他们提到

> jsonp 类型附加一个查询字符串参数 callback=? 到网址。服务器应在 JSON 数据前面加上回调名称，以形成有效的 JSONP 响应。我们可以使用 $.ajax() 的 jsonp 选项指定回调以外的参数名称。
> 
> **当从远程服务器检索数据时（只能使用脚本或 jsonp 数据类型），永远不会触发错误回调和全局事件。**

这就是为什么您的错误回调没有触发并且它直接转到成功回调的原因。

编辑：成功函数中的数据是什么样的？因为据我了解，从服务器返回的任何内容都作为数据传入。

这是使用 JSONP 使用 WCF Web 服务的示例。

[http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)

关键是，WCF 看到您正在请求 JSONP 数据，并且您提供了一个名为“回调”的查询字符串参数。因此，WCF 会自动返回 200 OK（无论实际状态如何）以及远程函数返回的任何数据。

进一步阅读 JSONP 的实际工作原理： [http ://devlog.info/2010/03/10/cross-domain-ajax/](http://devlog.info/2010/03/10/cross-domain-ajax/)

如果您阅读了 JSONP 的工作原理，您会意识到 jQuery 不太可能返回实际的错误状态，因为服务器本身不会返回它。

关于您当前的问题，请切换到 JSON 请求。如果这不可能，您可以随时检查 ajax 成功函数中的数据对象。当您返回它时，它将具有错误代码 500。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:46:05.760

错误处理程序不会为**jsonp**请求触发。[jQuery ajax](http://api.jquery.com/jQuery.ajax/)文档对**error(jqXHR, textStatus, errorThrown)**有以下免责声明：

> **注意：**跨域脚本和 JSONP 请求不调用此处理程序。

如果您可以选择切换到**json**和**crossDomain=false**，则应该触发错误处理程序。

[这里](https://stackoverflow.com/a/5121811/993133)有一个关于这个主题的类似问题

[这个](https://stackoverflow.com/q/5334413/993133)SO question 建议在服务器上捕获任何错误，始终返回 200 并在有效负载中返回响应代码。

# jquery - JQuery 自动完成和图像速度问题

> ID：11315209
> 
> 赞同：0
> 
> 时间：2012-07-03T16:26:53.687
> 
> 标签：jquery, image, autocomplete

我正在使用 jquery 自动完成来加载带有缩略图的产品。

问题是每个图像加载都会占用一个 http 请求，并且大多数浏览器对可以并行向一个主机名发出多少请求是有限制的。

这意味着在搜索中输入第一个字母后，脚本将立即获取 20 张图像（例如），但这超出了并行 http 请求限制，这意味着立即后续的字母按压不会立即执行 ajax。相反，它会在队列中等待，直到加载了先前的图像。只有这样，搜索才会更新。

这对用户来说非常令人沮丧，特别是考虑到我使用的图像文件大小非常大。

我发现克服这个问题的唯一方法是将 javascript 放在图像的单独子域中，然后 JS 立即加载而不等待图像加载。然而，这不是我可以在这个项目中使用的解决方案。

还有其他解决方案吗？

# google-apps-script - 大型域上的 UserManager.getAllUsers()

> ID：11315210
> 
> 赞同：0
> 
> 时间：2012-07-03T16:27:13.157
> 
> 标签：google-apps-script

我想在拥有超过 40 000 个用户的域上执行 UserManager.getAllUsers()。该脚本运行超过 5 分钟并且从未完成。有没有办法像 fomr SitesApp.getalldescendants 那样拆分这个请求？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:45:11.253

请看一下[这个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1269&q=getallusers&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)。请给它加星标并尝试那里提到的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:58:54.333

您可以使用 Google Apps Reporting API 进行帐户报告。您可以同时使用 UrlFetchApp 和 Oauth 来获取帐户报告。在一次调用中，这最多可以返回 100, 000 个 CSV 格式的帐户。大约 3 个月前，我在 Apps 脚本中实现了这一点，以获取我域中每个帐户的磁盘使用情况报告。 [https://developers.google.com/google-apps/reporting/#Accounts_Report](https://developers.google.com/google-apps/reporting/#Accounts_Report)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:09:09.017

这是一个以 CSV 字符串格式返回帐户数据的小代码。要运行代码，您必须是 Google Apps 域的管理员。您可以解析 CSV 字符串并获取必填字段

```
 //Refernce API URL
    // https://developers.google.com/google-apps/reporting/#accounts_report
    function startHere(){
      var domain = UserManager.getDomain();
      var fDate = Utilities.formatDate(new Date(), Session.getTimeZone(), 'yyyy-MM-dd');
      var url = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData';
      var fetchArgs = googleOAuth_('Reporting', url);
      fetchArgs.method = 'POST';
      var rawXML = '<?xml version="1.0" encoding="UTF-8"?>'
          +'<rest xmlns="google:accounts:rest:protocol" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance ">'
          +'<type>Report</type>'
          +'<domain>'+domain+'</domain>'
          +'<date>'+fDate+'</date>'
          +'<page>1</page>'
          +'<reportType>daily</reportType>'
          +'<reportName>accounts</reportName>'
          +'</rest>';
      fetchArgs.payload = rawXML;
  //fetchArgs.contentType = "application/xml";
  fetchArgs.headers = {"Content-type": "application/atom+xml charset=UTF-8"};  
  var csvData = UrlFetchApp.fetch(url, fetchArgs).getContentText();
}

    //Google oAuth, helper function
    function googleOAuth_(name,scope) {
      var oAuthConfig = UrlFetchApp.addOAuthService(name);
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey("anonymous");
      oAuthConfig.setConsumerSecret("anonymous");
      return {oAuthServiceName:name, oAuthUseToken:"always"};
    } 
```

# javascript - node.js 按字母递归遍历目录

> ID：11315217
> 
> 赞同：0
> 
> 时间：2012-07-03T16:27:31.223
> 
> 标签：javascript, file, node.js, unix, alphabetical

有没有办法按字母顺序但递归地遍历目录？

我一直在使用：[https](https://github.com/substack/node-findit) ://github.com/substack/node-findit走路，但它不是按字母顺序排列的。

它基于 readdir 工作，而我需要类似于 php 的 scandir 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:30:06.857

从 readdir 对结果进行排序。您可以修补 node-findit 并使用它。

# jquery - 单击嵌套在 a 标签中的 span 标签时，jQuery .click 不会触发

> ID：11315219
> 
> 赞同：0
> 
> 时间：2012-07-03T16:27:36.640
> 
> 标签：jquery

我正在使用这个 jQuery 将点击事件绑定到`<a>`标签

```
jQuery(document).ready(function() {

    jQuery(".post-like a").click(function(){

        heart = jQuery(this);

        // Retrieve post ID from data attribute
        post_id = heart.data("post_id");

        // Ajax call
        jQuery.ajax({
            type: "post",
            url: ajax_var.url,
            data: "action=post-like&nonce="+ajax_var.nonce+"&post_like=&post_id="+post_id,
            success: function(count){
                // If vote successful
                if(count != "already")
                {
                    heart.addClass("voted");
                    heart.siblings(".count").text(count);
                }
            }
        });

        return false;
    })
}) 
```

呈现的 HTML 看起来像这样

```
<p class="button button_purple ico-like post-like"><a href="#" data-post_id="208" class="likelink"><span class="icon">
<span title="I like this article" class="qtip like"></span></span></a><span class="count">Vote</span></p> 
```

与`<span class="count">Vote</span>`a 标签重叠，我需要像这样保留 HTML。单击 a 标签或 span 时，如何让上面的 jQuery 触发？

这是生成 HTML 的 php

```
$output = '<p class="button button_purple ico-like post-like">';
if(hasAlreadyVoted($post_id))
$output .= '<span class="icon"><span title="'.__('I like this article', $themename).'" class="like alreadyvoted"></span></span><span class="count">'.$vote_count.'</span>';
else
$output .= '<a href="#" data-post_id="'.$post_id.'" class="likelink"><span  class="icon">
<span  title="'.__('I like this article', $themename).'" class="qtip like"></span></span></a><span class="count">'."Vote".'</span></p>';
return $output; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:31:04.533

```
$('.post-like a, .count').click(function(ev){
    var heart;
    if($(ev).is('a')){
        heart = $(this);
    } else {
        heart = $(this).siblings('a');
    }
}); 
```

[http://jsfiddle.net/3LF2y/](http://jsfiddle.net/3LF2y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:30:23.973

如果单击跨度，您可以手动触发 a-click：

```
jQuery(".post-like .count").click(function(){
    jQuery(this).prev('a').trigger('click');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:30:49.177

两种方式：

把`span.count`里面的`<a>`元素

或者

将点击分配给`<p>`元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:31:43.950

由于您有一个跨度的 .count 类，您可以使用它来绑定单击事件。

```
$(".post-like a,.count").click(function(){ 
```

# iis-7.5 - 友好网址中的＆符号因重写模块而失败

> ID：11315224
> 
> 赞同：0
> 
> 时间：2012-07-03T16:28:00.940
> 
> 标签：iis-7.5, windows-server-2008-r2, url-rewrite-module

我可以说： `?a=1&b=r%26d`到aspx页面就好了。第二个参数中的`&`in 被编码为`%26`因为`&`被保留为分隔符。

我在 2008 R2 上下载并安装了IIS7.5 的*URL 重写模块 2.0*。

我写了一个简单的规则：`^([^/]+)/([^/]+)/?$`匹配和重写 url: `Default.aspx?a={R:1}&b={R:2}`。

因此，像 %26 或 & 在运行时这样的事情似乎`1/a b`可以正常工作`?a=1&b=a b`，但类似`1/a%26b`或`1/a&b`只能解决的`?a=1&b=a`事情似乎一切都被切断了。但是，在服务器管理器中，我可以测试重写，并且在他们的 GUI 中的测试工具中没有任何内容被切断。

不知道该怎么做，我所做的一切似乎都很简单。所以要清楚，我怎样才能有一个友好的 URL，其中有一个＆符号（或 %26，如果我必须），并让 URL Rewrite 2.0 模块传递完整参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:00:38.643

花了一段时间，但我找到了答案。URL 在传递之前会被解码，因此会创建一个额外的变量。

无论如何，解决方案实际上非常简单。原来我需要做的就是将重写 URL 规则调整为：

`Default.aspx?a={UrlEncode{R:1}}&b={R:2}`

UrlEncode 函数将正确编码 {R:1}。

# android - (android开发)如何在代码中实现带状态栏的屏幕抓取

> ID：11315226
> 
> 赞同：0
> 
> 时间：2012-07-03T16:28:11.040
> 
> 标签：android

我想通过单击按钮在我的设备上进行屏幕截图

我使用以下代码：

```
View view = getWindow().getDecorView();
view.setDrawingCacheEnabled(true);
view.buildDrawingCache();
Bitmap bitmap = view.getDrawingCache(); 
```

但是我发现我抓到的图片没有状态栏。我只想要设备的整个屏幕。你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:34:19.970

**从上面的代码是不可能的，因为状态栏不是您活动视图的一部分。**

实际上，当您使用上面的代码捕获图像时，它只是转换应用程序活动屏幕的当前绘制视图，而不是完整的设备屏幕和状态栏出现在屏幕顶部是您无法访问的android设备视图查看（带状态栏）。

如果您想获得完整的屏幕图像，您必须获得设备的 root 访问权限，并通过读取 android 设备的**帧缓冲区**，然后将其转换为图像文件。然后您可以获得完整的设备屏幕图像（带有状态栏或任何其他视图）。

# jquery - jQuery - 停止鼠标悬停循环

> ID：11315234
> 
> 赞同：0
> 
> 时间：2012-07-03T16:28:37.183
> 
> 标签：jquery, mouseover, alert

如果条件为真，我需要停止 mouseover 事件，而我现在真的不知道如何。我做了这个：

```
$('body').mouseover(function() {
    if ($('span.done').length > 0) {
        alert('done!');
    }
}); 
```

调用 alert() 后，鼠标悬停应该停止，并停止调用警报。任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:29:20.747

```
$('body').on("mouseover.done",function() {
    if ($('span.done').length > 0) {
        $("body").off("mouseover.done");
        alert('done!');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:32:00.510

查看 jquery .one() 事件处理程序。医生在[这里。](http://api.jquery.com/one/)

# python - 替换嵌套列表python中的项目

> ID：11315236
> 
> 赞同：1
> 
> 时间：2012-07-03T16:29:11.330
> 
> 标签：python, nested-lists, deep-copy

我正在尝试制作一个重复的列表列表并将一个元素更改为重复列表的嵌套列表中的另一个元素，但遇到了一些麻烦。我如何制作重复列表：

```
order = [['yhjK', 'F'], 'gap', ['bcsA', 'F'], ['bcsB', 'F'], ['bcsZ', 'F'], 'gap', ['yhjK', 'R']]
#order_1 = list(order) #this makes the duplicate list as well
order_1 = []
for x in order:
    order_1.append(x) 
```

我如何更改元素：

```
for item in order_1:
    for n,i in enumerate(item):
            if i=='R':
                    item[n]='F'
            if i=='F':
                    item[n]='R' 
```

我想用“R”替换所有“F”，反之亦然。这实现了这一点，但原始列表“顺序”也发生了变化。我只希望更改第二个列表，并且无法弄清楚我的代码有什么问题。

我得到什么：

```
order = [['yhjK', 'R'], 'gap', ['bcsA', 'R'], ['bcsB', 'R'], ['bcsZ', 'R'], 'gap', ['yhjK', 'F']]
order_1 = [['yhjK', 'R'], 'gap', ['bcsA', 'R'], ['bcsB', 'R'], ['bcsZ', 'R'], 'gap', ['yhjK', 'F']] 
```

我想要的是：

```
order = [['yhjK', 'F'], 'gap', ['bcsA', 'F'], ['bcsB', 'F'], ['bcsZ', 'F'], 'gap', ['yhjK', 'R']]
order_1 = [['yhjK', 'R'], 'gap', ['bcsA', 'R'], ['bcsB', 'R'], ['bcsZ', 'R'], 'gap', ['yhjK', 'F']] 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:31:59.947

您在这里所做的是列表的浅表副本，因此当您更改副本时，原始副本也会更改。你需要的是[深拷贝](http://docs.python.org/library/copy.html)

```
import copy
order = [['yhjK', 'F'], 'gap', ['bcsA', 'F'], ['bcsB', 'F'], ['bcsZ', 'F'], 
'gap', ['yhjK', 'R']]
order_1 = copy.deepcopy(order)

# Now changing order_1 will not change order
order_1[1] = ['TEST LIST']
print order[1] # Prints 'gap'
print order_1[1] # Prints '['TEST LIST'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:40:29.627

```
L = [['F' if x == 'R' else 'R' if x == 'F' else x for x in row] for row in order] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:32:35.907

```
import copy
order_1 = copy.deepcopy(order) 
```

默认情况下，Python 只复制对可变值的引用，因此在一处更改它们会导致它们在任何地方都被更改。创建[深拷贝](http://docs.python.org/library/copy.html#copy.deepcopy)意味着这两个实例是完全独立的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:33:42.243

```
order_1 = []
for item in order:
    temp = []
    for i in item:
        if i=="F":
            temp.append("R")
        elif i=="R"
            temp.append("F")
        else:
            temp.append(i)
    order_1.append(temp) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T16:47:50.647

似乎与许多其他语言一样，数组只不过是常量（甚至不是实际的指针，尽管在 python 中可能有所不同）。相反，数组的第一个元素的地址是恒定的。这意味着如果你直接复制数组，你只会复制第一个元素的地址。

根据您的问题，我了解到您想要一个深层副本。这意味着，您还需要复制嵌套数组的内容。您可以`copy.deepcopy(x)`用来制作数组的深拷贝。

查看[复制模块](http://docs.python.org/library/copy.html)以获取更深入的信息。

# geolocation - 从纬度和经度获取国家名称 - 没有谷歌

> ID：11315237
> 
> 赞同：2
> 
> 时间：2012-07-03T16:29:12.007
> 
> 标签：geolocation, gis

我可以从用户那里获取国家信息`Latitude`吗`Longitude`？`Geocoder`我知道从 Google 的 API中获取它应该很容易。但是是否有可能在不使用任何像谷歌这样的服务的情况下获得这些信息？

你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:30:27.527

这样做的唯一方法是使用第三方 API 或创建自己的数据库，这是值得的更多工作。您是否查看过是否有可以为您选择的编程语言下载的 GeoIP 数据库（或通用的？）

编辑：[这看起来可能有你需要的数据](http://earth-info.nga.mil/gns/html/namefiles.htm)

# c# - 创建 Linq XML 文档时“不能将非空白字符添加到内容中”

> ID：11315240
> 
> 赞同：2
> 
> 时间：2012-07-03T16:29:21.270
> 
> 标签：c#, xml, linq

好的，所以我正在通过执行将文件缓存在内存中

```
byte[] file = System.IO.File.ReadAllBytes("test.xml"); 
```

然后稍后我尝试从该缓冲区创建一个 xml 文档，如下所示：

```
System.IO.MemoryStream stream = new System.IO.MemoryStream(file);
System.Xml.XmlTextReader reader = new System.Xml.XmlTextReader(stream);
System.Xml.Linq.XDocument xPartDocument = new System.Xml.Linq.XDocument(reader); 
```

但这无法创建文档，但有以下例外：

> ```
> A first chance exception of type 'System.ArgumentException' occurred in System.Xml.Linq.dll
> 
> Additional information: Non white space characters cannot be added to content. 
> ```

然而，'reader' 看起来是错误的，即在本地人中它的值是 'None'：

*   阅读器 {无} System.Xml.XmlTextReader

此外，“文件”字节数组变量具有 11 个字节的标题（我认为这只是 txt 文件标题？）：

```
0x0393B148  58 35 59 71  X5Yq 
0x0393B14C  dc 67 01 00  Üg.. 
0x0393B150  ef bb bf 3c  ï»¿< 
0x0393B154  3f 78 6d 6c  ?xml 
0x0393B158  20 76 65 72   ver 
```

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:39:47.403

如注释中所述，前 8 个字节看起来不属于 XML 文件的开头。接下来的三个字节是 UTF-8 BOM，这很好。您应该弄清楚这 8 个字节的来源，以及您是否应该始终期望它们在那里。

如果它们总是在那里并且您*希望*它们在那里，解决此问题的最简单方法是在阅读之前移动流：

```
MemoryStream stream = new MemoryStream(file);
stream.Position = 8;
XDocument doc = XDocument.Load(stream); 
```

或者，不先加载所有数据：

```
XDocument doc;
using (Stream input = File.OpenRead("test.xml"))
{
    input.Position = 8;
    doc = XDocument.Load(input);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:15:30.843

大家好，谢谢大家的输入，我的问题中的二进制转储只是来自 VS 的“文件”变量的内存转储窗口的转储。

@Jon Skeet 您实际上回答了这个问题，但顺便说一下，二进制 8 字节标头（或 11 字节带有 3 字节 UTF 标头）非常好。

对我的问题的简单回答是，我是从文本阅读器构建 XDocument，而不是在其上调用静态 Load 函数。嗬！

# java - 创建名为 'org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter' 的 bean 时出错

> ID：11315245
> 
> 赞同：1
> 
> 时间：2012-07-03T16:29:46.610
> 
> 标签：java, web-services, spring, jaxb, marshalling

我正在尝试一个简单的 Spring Web 服务应用程序。我已经正确配置了应用程序，但是当我尝试访问 wsdl 文件时，我收到以下错误：

```
 at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]

17:24:35,409 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/springWsTest]] (http--127.0.0.1-8080-1) Initializing Spring FrameworkServlet 'webservice'
17:24:35,419 INFO  [org.springframework.ws.transport.http.MessageDispatcherServlet] (http--127.0.0.1-8080-1) FrameworkServlet 'webservice': initialization started
17:24:35,428 INFO  [org.springframework.web.context.support.XmlWebApplicationContext] (http--127.0.0.1-8080-1) Refreshing WebApplicationContext for namespace 'webservice-servlet': startup date [Tue Jul 03 17:24:35 BST 2012]; parent: Root WebApplicationContext
17:24:35,443 INFO  [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] (http--127.0.0.1-8080-1) Loading XML bean definitions from ServletContext resource [/WEB-INF/ws-config.xml]
17:24:35,541 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (http--127.0.0.1-8080-1) JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
17:24:35,595 INFO  [org.springframework.context.annotation.ClassPathBeanDefinitionScanner] (http--127.0.0.1-8080-1) JSR-330 'javax.inject.Named' annotation found and supported for component scanning
17:24:35,655 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--127.0.0.1-8080-1) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
17:24:35,691 INFO  [org.springframework.ws.soap.addressing.server.AnnotationActionEndpointMapping] (http--127.0.0.1-8080-1) Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
17:24:35,699 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (http--127.0.0.1-8080-1) Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1445d3c: defining beans [testEndPoint,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping#0,org.springframework.ws.soap.server.endpoint.mapping.SoapActionAnnotationMethodEndpointMapping#0,org.springframework.ws.soap.addressing.server.AnnotationActionEndpointMapping#0,org.springframework.ws.server.endpoint.adapter.method.dom.DomPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.SourcePayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.jaxb.XmlRootElementPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.jaxb.JaxbElementPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter#0,org.springframework.xml.xsd.SimpleXsdSchema#0,serviceDefinition,marshaller,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@a32ba9
17:24:35,764 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (http--127.0.0.1-8080-1) Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1445d3c: defining beans [testEndPoint,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping#0,org.springframework.ws.soap.server.endpoint.mapping.SoapActionAnnotationMethodEndpointMapping#0,org.springframework.ws.soap.addressing.server.AnnotationActionEndpointMapping#0,org.springframework.ws.server.endpoint.adapter.method.dom.DomPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.SourcePayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.jaxb.XmlRootElementPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.method.jaxb.JaxbElementPayloadMethodProcessor#0,org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter#0,org.springframework.xml.xsd.SimpleXsdSchema#0,serviceDefinition,marshaller,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@a32ba9
17:24:35,837 ERROR [org.springframework.ws.transport.http.MessageDispatcherServlet] (http--127.0.0.1-8080-1) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter#0': Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.expression.TypedValue
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467) [spring-webmvc-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483) [spring-webmvc-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358) [spring-webmvc-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325) [spring-webmvc-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127) [spring-webmvc-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:952) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:188) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.springframework.expression.TypedValue
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85) [spring-expression-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74) [spring-expression-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    ... 27 more 
```

这是我的配置文件：

ws-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/web-services 
    http://www.springframework.org/schema/web-services/web-services-2.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.mypackage"/>

    <ws:annotation-driven/>

    <ws:dynamic-wsdl id="serviceDefinition" portTypeName="myService"
                     locationUri="http://localhost:8080/springWsTest/webservice">
        <ws:xsd location="/WEB-INF/schemas/downloadMessageRequest.xsd"/>
    </ws:dynamic-wsdl>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="com.mypackage"/>
        <property name="mtomEnabled" value="true"/>
    </bean> 
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
         version="2.4">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/app-config.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>webservice</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/ws-config.xml</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>webservice</servlet-name>
        <url-pattern>/webservice/*</url-pattern>
    </servlet-mapping>

    <mime-mapping>
        <extension>wsdl</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

    <mime-mapping>
        <extension>xsd</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

</web-app> 
```

应用程序配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:ws="http://www.springframework.org/schema/web-services"   
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd         
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd         
    http://www.springframework.org/schema/jee 
    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd         
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/web-services 
    http://www.springframework.org/schema/web-services/web-services-2.0.xsd">

    <context:annotation-config/>    
    <context:component-scan base-package="com.mypackage"/>  

</beans> 
```

下载MessageRequest.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:m="http://ws.mypackage.com" 
xmlns:xmime="http://www.w3.org/2005/05/xmlmime" elementFormDefault="qualified"
targetNamespace="http://ws.mypackage.com" 
attributeFormDefault="unqualified">

    <xs:element name="downloadMessageRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="downloadMessageResponse" type="m:downloadResponseType" />

    <xs:complexType name="downloadResponseType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

     <xs:element name="localDTMRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="localDTMResponse">
        <xs:complexType>        
            <xs:sequence>
                <xs:element name="localDTM" type="xs:dateTime"/>
            </xs:sequence>          
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

## 编辑

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>springWs</groupId>
  <artifactId>springWsTest</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>springWs</name>
  <description> </description>

    <properties>        
        <spring.version>3.1.0.RELEASE</spring.version>
        <spring.ws.version>2.0.3.RELEASE</spring.ws.version>
        <javax.servlet.version>2.5</javax.servlet.version>
        <jstl.version>1.2</jstl.version>
        <dom4j.version>1.6.1</dom4j.version>
        <xml.bind.version>2.2</xml.bind.version>
    </properties>

    <dependencies>      
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>${spring.ws.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-web</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-asm</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>${xml.bind.version}</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>${xml.bind.version}</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>springWsTest</finalName>

        <plugins>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.6</version>
                <configuration>
                    <includes>
                        <include>**/*Test.java</include>
                    </includes>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb2-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <schemaDirectory>src/main/webapp/WEB-INF/schemas</schemaDirectory>
                    <packageName>com.mypackage.ws</packageName>
                </configuration>
            </plugin>   
        </plugins>

    </build>

    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>findbugs-maven-plugin</artifactId>
                <version>${findbugs.plugin.version}</version>
                <configuration>
                    <includeFilterFile>findbugs.xml</includeFilterFile>
                    <effort>Max</effort>
                    <threshold>Low</threshold>
                    <includeTests>true</includeTests>
                    <findbugsXmlOutput>true</findbugsXmlOutput>
                    <findbugsXmlWithMessages>true</findbugsXmlWithMessages>
                    <xmlOutput>true</xmlOutput>
                    <excludeFilterFile>findbugs-exclude.xml</excludeFilterFile>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>${checkstyle.version}</version>
                <configuration>
                    <configLocation>checkstyle.xml</configLocation>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jdepend-maven-plugin</artifactId>
            </plugin>

            <!-- JUnit reports -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-report-plugin</artifactId>
                <version>${surefire.report.version}</version>
                <reportSets>
                    <reportSet>
                        <id>test</id>
                        <reports>
                            <report>report-only</report>
                        </reports>
                    </reportSet>
                </reportSets>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-report-plugin</artifactId>
                <version>${surefire.report.version}</version>
                <reportSets>
                    <reportSet>
                        <id>integration-tests</id>
                        <reports>
                            <report>report-only</report>
                        </reports>
                        <configuration>
                            <outputName>failsafe-report</outputName>
                            <reportsDirectories>
                                <reportsDirectory>target/failsafe-reports</reportsDirectory>
                            </reportsDirectories>
                        </configuration>
                    </reportSet>
                </reportSets>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-deploy-plugin</artifactId>
                <version>2.5</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <formats>
                        <format>html</format>
                        <format>xml</format>
                    </formats>
                    <instrumentation>
                        <ignores>
                            <ignore>com/bt/bl/**/*Test.*</ignore>
                            <ignore>**/*Steps.*</ignore>
                            <ignore>**/*Story.*</ignore>
                        </ignores>
                        <excludes>
                            <exclude>com/bt/bl/**/*Test.class</exclude>
                            <exclude>**/*Steps.class</exclude>
                            <ignore>**/*Story.*</ignore>
                            <ignore>**/*jbehave*.*</ignore>
                        </excludes>
                    </instrumentation>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <configuration>
                    <targetJdk>1.5</targetJdk>
                    <rulesets>
                        <!-- PMD rule sets -->
                        <ruleset>/rulesets/basic.xml</ruleset>
                        <ruleset>rulesets/codesize.xml</ruleset>
                        <ruleset>/rulesets/coupling.xml</ruleset>
                        <ruleset>/rulesets/design.xml</ruleset>
                        <ruleset>/rulesets/imports.xml</ruleset>
                        <ruleset>/rulesets/unusedcode.xml</ruleset>
                    </rulesets>
                </configuration>
            </plugin>
        </plugins>
    </reporting>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:32:49.200

你的 Maven 依赖项中有**spring-expression吗？**

如果您没有使用 Maven，请检查您的 WEB-INF/lib 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T15:01:52.563

我遇到了这个问题，我在 Maven 依赖项中错过了 spring-ws ，spring-ws-core ，并且在添加后得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-16T11:10:05.783

清理构建您的项目并确保所有 jar 都可用

# php - 使用 php 脚本和 ajax 请求控制 cron 作业执行

> ID：11315248
> 
> 赞同：1
> 
> 时间：2012-07-03T16:30:02.470
> 
> 标签：php, cron, crontab

我想要一个可以启动、停止、启用和禁用 cron 作业的 php 脚本。我想创建一个交互式jquery页面，它将异步向php文件发送一个请求，该文件将停止、启动、启用和禁用作业

我已经搜索了很多线程，但仍然没有找到正确的方法，我查看了以下解决方案和线程。

[开始停止 cron 作业](https://stackoverflow.com/questions/6548746/how-to-start-stop-a-cronjob-using-php)

我尝试实施 J. Bruni 提供的解决方案，但是当我尝试执行 `./cron.php`激活时，出现以下错误

```
./cron.php: line 1: ?php: No such file or directory
./cron.php: line 3: =: command not found
./cron.php: line 4: =: command not found
./cron.php: line 6: syntax error near unexpected token `('
./cron.php: line 6: `$param    = isset( $argv[1] ) ? $argv[1] : '';' 
```

我解决了上述错误`#!/usr/bin/env php`

**我认为当以下行出现时我的 php 文件卡住了**

```
 shell_exec( 'export EDITOR="/home//www/cron.php on"; crontab -e' ); 
```

我收到以下错误

```
 Window size is too small for nano...crontab: "pico" exited with status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:41:41.350

首先，如果你想执行一个 php 文件，在第一行 write 总是写

```
` #!/usr/bin/env php` 
```

然后 ：

1.  赋予文件执行权限

    `chmod +x file.php`

    然后执行，如下

    `./file.php`

或者 ：

1.  使用 php 命令执行它

    `php file.php`

# php - 提供奇怪 URL 的工具提示子菜单链接

> ID：11315249
> 
> 赞同：0
> 
> 时间：2012-07-03T16:30:03.827
> 
> 标签：php, jquery, html, css, ajax

我有一个使用 jquery ajax 加载所有页面的站点。基本上是它的样子`<a href="photos">photos</a>`。然后 jquery 选择它并转到正确的文件夹并在末尾添加 .php 并将该文件加载到内容窗口中。然后它把那个 href 属性（在这种情况下是照片）和#current_pg_attr 放在 url 的末尾，所以如果内容窗口显示照片页面，它就像 www.mysite.com/#photos。同样在我的一个主菜单中，我有一个仅在悬停时显示的子菜单，如下所示：

```
<ul id="main_nav"><br />
    <li><a href="home">home</a></li><br />
    <li><a href="photos">photos</a><br />
        <div id="menu2_submenu_tooltip"><a href="?com=viewall">view all stuff</a></div><br />
    </li><br />
</ul> 
```

现在单击子菜单时会出现问题。就像我点击查看所有内容一样，它会将我带到**www.mysite.com/#?com=viewall**而不是**www.mysite.com/?com=viewall#photos**。我究竟做错了什么？我认为这与在 url 中添加 jquery #somthing 的行有关？这个错误 url 不是问题，因为我可以通过获取 GET 变量并加载该页面来解决它，但我仍然想尝试解决这个问题。顺便说一句，这是我的 ajax jquery 代码的一部分：

```
var curr_page_hash = window.location.hash;
    $('#main_center').load('content/' + curr_page_hash.substr(1) + '.php');
    window.location.hash = curr_page_hash;
    $('#left_nav ul li a').click(function() {
    var page = $(this).attr('href');
    $('#main_center').html('<div id="load_img"><img src="template/img/loading.gif" alt="Loading..." /></div>');
    $('#main_center').load('content/' + page + '.php');
    window.location.hash = '#' + page; 
            return false;     
    }); 
```

对问题有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:31:16.890

要获得原始哈希，您可以执行类似的操作

```
// note I am not sure what window.location.hash returns if there is no hash but you should test that first to make this more efficient
var t = window.location;
var originalHash = "";
if(t.indexOf("#") > -1) {
   // grab the hash
   originalHash = window.location.hash;
} 
```

这样就可以处理原始哈希，现在要设置新页面，您可以将代码保持原样并在最后执行此操作

```
// don't need to add # because it is in originalHash already, it is safe to add originalHash because if there is no # in URL then it will be empty string
window.location.hash = page + originalHash; 
```

如果您尝试了此操作但它不起作用，请确保您编辑问题并发布您的最新代码

# c++ - OpenCV copyTo() 掩码错误

> ID：11315258
> 
> 赞同：1
> 
> 时间：2012-07-03T16:30:38.640
> 
> 标签：c++, opencv, mask

我正在尝试通过 C++ 使用 OpenCV 2.4 中的掩码将较小的图像粘贴到较大的图像中。
没有蒙版，我使用以下代码将小图像复制到大图像：

```
smallImage.copyTo(largeImage(cv::Rect(pt, smallImage.size())); 
```

where`pt`的类型为`cv::Point2f`. 它完美地工作。但是，如果我使用面膜：

```
smallImage.copyTo(largeImage(cv::Rect(pt, smallImage.size()), mask); 
```

我收到一个错误`Mat::create`（请参阅[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=copyto#void%20Mat%3a%3acopyTo%28OutputArray%20m,%20InputArray%20mask%29%20const)）：

```
CV_Assert(!fixedType() || (CV_MAT_CN(type) ==
    m.channels() && ((1 << CV_MAT_TYPE(flags)) & fixedDepthMask) != 0)); 
```

如果我`cv::Rect`从我的代码中删除，将其简化为：

```
smallImage.copyTo(largeImage, mask); 
```

它可以工作，尽管它没有复制到正确的位置。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:28:08.130

以下代码可以正常工作，没有任何错误。

```
 Mat large_img = imread("C:\\Koala.jpg");
    Mat small_img;
    resize(large_img,small_img,Size(100,100),1);
    small_img.copyTo(large_img (Rect(100,100,100,100)));
    imshow("Rsult",large_img);
    waitKey(0); 
```

小图像是大图像的重新调整大小的版本，它在大图像中的黑白 (100,100) 位置复制到 (200,200)。您可以根据自己的要求采用这些线路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T07:23:13.970

将图像 scaledImage 粘贴到 resultMat：

```
 scaledImage.copyTo(resultMat); 
```

但我认为您不能在 Java 中选择一个 roi 来复制到特定区域。

# python - 如何将一个数组的 0,2,3,4 个元素与另一个数组的 0,2,3,4 个元素匹配，并在 python 中打印两个数组的第 5 个元素？

> ID：11315259
> 
> 赞同：0
> 
> 时间：2012-07-03T16:30:40.540
> 
> 标签：python

我正在尝试将存储一个制表符分隔文件的列的数组的 0,2,3,4 元素与存储另一个制表符分隔文件的列的另一个数组的 0,2,3,4 元素匹配并打印出该元素来自python中的两个输入文件的5（第6列）。

这是我处理的代码，但我猜代码在两个文件之间逐行匹配。但是，我想将 file1 的行与文件 2 中的任何行匹配

```
#!/usr/bin/python
import sys
import itertools
import csv, pprint
from array import *
#print len(sys.argv)
if len(sys.argv) != 4:
print 'Usage: python scores.py <infile1> <infile2> <outfile>'
sys.exit(1)

f1=open("/home/user/ab/ab/ab/file1.txt", "r")
f2 = open ("/home/user/ab/ab/ab/file2.txt", "r")
f3 = open ("out.txt", "w")

lines1 = f1.readlines()
lines2 = f2.readlines()

for f1line, f2line in zip(lines1, lines2): ## for loop to read lines line by line simultaneously from two files
    #for f1line, f2line in itertools.izip(lines1,lines2):
    row1 = f1line.split('\t') #split on tab
    row2 = f2line.split('\t') # split on tab

    if ((row1[0:1] + row1[2:5]) == (row2[0:1] + row2[2:5])): # columns 0,2,3,4 matching between two infiles 
        writer = csv.writer(f3, delimiter = '\t')
        writer.writerow((row1[0:1] + row1[2:5]) + row1[5:6] + (row2[0:1] + row2[2:5]) + row2[5:6]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:35:44.950

对于文件 1 上要匹配的每一行

```
op = operator.itemgetter(0,2,3,4)
f2 = file2.readlines() # otherwise it won't work every loop

for line1 in file1:
    ... #split 1
    for line2 in f2:
        ... #split 2
        if op(row1) == op(row2):
            ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:34:59.987

所以，就照你说的做：对于file1的每一行，匹配file2的每一行

```
for f1line in lines1:
    row1 = f1line.split('\t') #split on tab
    for f2line in lines2:
        row2 = f2line.split('\t') # split on tab
        if ((row1[0:1] + row1[2:5]) == (row2[0:1] + row2[2:5])):
            ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:01:47.610

这假设每个键值（行 [0,3,4,5]）对于每个文件都是唯一的：

```
import sys
import csv

datalen = 12
keyfn  = lambda row: tuple(row[0:1] + row[3:6])
datafn = lambda row: row[8:datalen]

def load_dict(fname, keyfn, datafn):
    with open(fname, 'rb') as inf:
        data = (row.split() for row in inf if not row.startswith('##'))
        return {keyfn(row):datafn(row) for row in data if len(row) >= datalen}

def main(fname1, fname2, outfname):
    data1 = load_dict(fname1, keyfn, datafn)
    data2 = load_dict(fname2, keyfn, datafn)

    common_keys = sorted(set(data1).intersection(data2))
    with open(outfname, 'wb') as outf:
        outcsv = csv.writer(outf, delimiter='\t')
        outcsv.writerows(list(key) + data1[key] + data2[key] for key in common_keys)

if __name__=="__main__":
    if len(sys.argv) != 4:
        print 'Usage: python scores.py <infile1> <infile2> <outfile>'
        sys.exit(1)
    else:
        main(*sys.argv[1:4]) 
```

**编辑：**发现问题：

我犯了一个错误：key 函数的返回值是一个列表；列表不可散列，因此不能是字典键。我已将返回值设为元组。

另一方面，你没有提到

*   您的文件以几行注释开头（我已修改脚本以忽略注释行，这意味着任何以 开头的内容`##`）

*   您的文件不是制表符分隔的（或者至少您提供的文件示例不是）。它实际上似乎是柱状的，用多个空格分隔 - 这不能由 csv 模块处理。幸运的是，数据看起来很简单，可以使用 .split() 代替。

*   您在错误的列上匹配；数据文件中的第 2 列似乎在文件之间根本不匹配。我认为您需要改为键入第 0、3、4、5 列。我已经更新了 keyfn 以反映这一点。

第 3 列和第 4 列似乎相同，但我不确定这一点。如果第 3 列和第 4 列始终相同，则只需键入第 0、4、5 列即可节省一些内存并加快速度：`keyfn = lambda row: tuple(row[0:1] + row[4:6])`

我猜第 8、9、10、11 列是所需的数据；我已更改 datafn 以反映这一点。该脚本现在应该可以按要求工作了。

# c - 在 C 结构数组中，结构初始化为什么？

> ID：11315260
> 
> 赞同：0
> 
> 时间：2012-07-03T16:30:43.163
> 
> 标签：c, struct, initialization, malloc

在动态创建的结构数组中，结构的每个条目都被初始化为什么？

**详细信息：**
如果我们像这样创建一个动态浮点数组：

```
float* arr = ( float* ) malloc ( 100 * sizeof ( float ) ); 
```

那么数组可以被任何东西填充（[见这里](https://stackoverflow.com/a/8029624/654789)）。但是我很难理解当我们用结构替换像这样的浮点数时会发生什么

```
typedef struct
{
   float x = 123.456;
} foo;

foo* arr = ( foo* ) malloc ( 100 * sizeof ( foo ) ); 
```

数组的所有条目都是`arr`使用完全初始化的`foo`结构创建的，还是我必须四处走动并手动更新`x`值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:32:08.870

```
typedef struct
{
   float x = 123.456;
} foo; 
```

结构类型中不能有默认值。这不是有效的 C 代码。

分配的对象`malloc`具有不确定的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:33:58.590

浮点数和结构体之间没有区别。您需要手动初始化每个动态分配的内存区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:39:54.230

`float`案例可以“初始化”到任何东西的事实应该提供您需要的答案 - 它实际上没有初始化，但它可能包含任何东西，因为没有进行初始化。a 也是如此`struct`- 分配时没有进行初始化，因此（很可能）返回的内存段的垃圾内容就是您将得到的。如果您关心新分配的内存的内容（并且您可能应该关心），您需要自己显式地初始化它。

# sql - 从两个相关表中的键更改一个字段

> ID：11315262
> 
> 赞同：1
> 
> 时间：2012-07-03T16:30:50.923
> 
> 标签：sql, sql-server-2008, tsql

我有两个由复合主键关联的表，其中一个字段需要更改。这可以在不删除关系并在值更改后重新建立关系的情况下完成吗？

```
myTable
    myTableID   CPK
    firstField  CPK  this needs to be changed
    secondField CPK

myOtherTable
    myOtherTableID
    myTableID CFK   this needs to be changed here
    firstField CFK
    secondField CFK 
```

如何`firstField`同时从两个表更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:35:42.240

您应该阅读[这篇文章](http://sqlandme.com/2011/08/08/sql-server-how-to-cascade-updates-and-deletes-to-related-tables/)，它解释了如何使更新和事务反映在相关表上。

使用`ON UPDATE CASCADE`您的具体情况。

希望这可以帮助

# android - Android中动态下拉通知区域

> ID：11315264
> 
> 赞同：1
> 
> 时间：2012-07-03T16:30:53.513
> 
> 标签：android, animation, notifications

我有这个隐藏状态栏（全屏）的活动，但我想让用户能够在任何时候显示通知区域。有没有办法告诉 Android 从代码中显示通知区域，你知道，带有精美的下拉动画和所有内容，即使状态栏没有显示？我查看了[NotificationManager](http://developer.android.com/reference/android/app/NotificationManager.html)和所有 Notification api，但没有找到任何东西。开始怀疑有没有办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:43:41.743

是的，您可以将此代码添加到您希望它执行的任何位置

```
 Object sbservice = getSystemService( "statusbar" );
    Class<?> statusbarManager = Class.forName( "android.app.StatusBarManager" );
    Method showsb = statusbarManager.getMethod( "expand" );
    showsb.invoke( sbservice ); 
```

并添加此权限

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

# xml - 在 XML Schema 中以不同的方式对待具有不同属性的元素

> ID：11315266
> 
> 赞同：0
> 
> 时间：2012-07-03T16:31:07.017
> 
> 标签：xml, xsd, xml-validation

我正在为预定义的 XML 格式编写专业化。我想允许这样做：

```
<InterfaceClass Name="Program">
    <InterfaceClass Name="ProgramPart" />
</InterfaceClass> 
```

虽然不允许：

```
<InterfaceClass Name="ProgramPart" /> 
```

这意味着 ProgramParts 只能出现在 Program 元素下。

我还想忽略 XML 文件中的所有其他内容，因为我有一个通用格式的架构。

是否可以？或者是否有任何其他适合于此的形式主义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:04:47.907

XSD 1.1 允许您使用称为“条件类型分配”的工具来执行此操作 - 您可以编写一个元素声明，其中给出了许多替代类型，根据元素属性的值进行选择。XSD 1.0 中没有等价物。XSD 1.1 目前在 Saxon 和 Xerces 中实现。

# javascript - Three.js + Physi.js-- 无法获得重力启动

> ID：11315267
> 
> 赞同：2
> 
> 时间：2012-07-03T16:31:13.853
> 
> 标签：javascript, physics, three.js

我一直在尝试以我自己的风格重写 Physi.js 示例之一，但我似乎无法让它真正使用重力。渲染循环不断触发，就像它应该的那样，但似乎没有任何改变。

我已经上传了我在这里的内容：http: [//kemp59f.info/up/down/index.htm](http://kemp59f.info/up/down/index.htm)

这是 Physi.js 示例：[http ://chandlerprall.github.com/Physijs/examples/body.html](http://chandlerprall.github.com/Physijs/examples/body.html)

这是我的代码：

```
var ground = {},
    box = {},
    boxes = [],
    ground = {},
    projector,
    renderer,
    scene,
    light,
    camera,
    render,
    gravity;

// Set things up for Physijs
Physijs.scripts.worker = 'physi.js_worker.js';
Physijs.scripts.ammo = 'ammo.js';

// Projector
projector = new THREE.Projector;

// Renderer
renderer = new THREE.WebGLRenderer({
    antialias: true
});
renderer.setSize( 1000, 600 );
renderer.shadowMapEnabled = true;
renderer.shadowMapSoft = true;

// Scene
scene = new Physijs.Scene;

// Camera
camera = new THREE.PerspectiveCamera( 35, ( 1000 / 600 ), 1, 1000 );
camera.position.set( 60, 50, 60 );
camera.lookAt( scene.position );

scene.add( camera );

// Light
light = new THREE.DirectionalLight( 0xFFFFFF );
light.position.set( 20, 40, -15 );
light.target.position.copy( scene.position );
light.castShadow = true;
light.shadowCameraLeft = -60;
light.shadowCameraTop = -60;
light.shadowCameraRight = 60;
light.shadowCameraBottom = 60;
light.shadowCameraNear = 20;
light.shadowCameraFar = 200;
light.shadowBias = -0.0001;
light.shadowMapWidth = light.shadowMapHeight = 2048;
light.shadowDarkness = 0.7;

scene.add( light );

// Ground
ground.material = new THREE.MeshLambertMaterial({
    color: 0xDDDDDD
});
ground.material = Physijs.createMaterial( ground.material, 0.8, 0.4 );
ground.geometry = new THREE.CubeGeometry( 100, 1, 100 );
ground.mesh = new Physijs.BoxMesh( ground.geometry, ground.material, 0 );
ground.mesh.receiveShadow = true;

scene.add( ground.mesh );

// Box
box.material = new THREE.MeshLambertMaterial({
    color: 0x00FF00
});
box.material = Physijs.createMaterial( box.material, 0.4, 0.6 );
box.geometry = new THREE.CubeGeometry( 4, 4, 4 );

// Draw 10 boxes
for( var i = 0; i < 10; i++ ){

    var pos = {},
        rot = {};

    pos.x = Math.random() * 50 - 25;
    pos.y = 10 + Math.random() * 5;
    pos.z = Math.random() * 50 - 25;
    rot.x = Math.random() * Math.PI * 2;
    rot.y = Math.random() * Math.PI * 2;
    rot.z = Math.random() * Math.PI * 2;
    box.mesh = new Physijs.BoxMesh( box.geometry, box.material );
    box.mesh.position.set( pos.x, pos.y, pos.z );
    box.mesh.rotation.set( rot.x, rot.y, rot.z );
    box.mesh.castShadow = true;

    scene.add( box.mesh );
    boxes.push( box.mesh );

};

// Render method
render = function(){

    scene.simulate( null, 50 );
    renderer.render( scene, camera );
    requestAnimationFrame( render );

};

// Render this shit
$( function(){

    $('#viewport').append( renderer.domElement );

    render();

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:24:43.393

看来您的“physi.js_worker.js”版本是空的。这意味着网络工作者正在启动，但永远不会响应脚本。

# .net - Windows 服务无法启动。事件日志状态“注册表文件仍在使用中”

> ID：11315272
> 
> 赞同：0
> 
> 时间：2012-07-03T16:31:40.547
> 
> 标签：.net, windows-services, nlog

在对 Windows 服务进行细微更改并将这些更改部署到生产暂存 (Windows Server 2008) 后，Windows 服务无法启动。

事件日志仅说明

> Windows 检测到您的注册表文件仍在被其他应用程序或服务使用。现在将卸载该文件。保存您的注册表文件的应用程序或服务之后可能无法正常运行。

其中一项更改是 NLog 配置文件条目，由于[Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5/)的魔力，该条目仅适用于生产构建设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:31:41.733

事实证明，Production NLog 配置中有一个非法的 NLog 配置设置。

NLog 没有将任何诊断信息写入事件日志。在控制台模式下运行服务（我使用一种模式来检查 /console 标志以作为控制台应用程序而不是作为服务运行），抛出了一个有用的异常：

```
Unhandled Exception: System.TypeInitializationException: The type initializer for 'My.Service' threw an exception.
NLog.NLogConfigurationException: Exception occurred when loading configuration from C:\MyService\NLog.config 
---> System.NotSupportedException: Parameter levels not supported on FileTarget 
```

**经验教训**：如果使用 NLog 的 Windows 服务在没有有意义的 EventLog 条目的情况下无法启动，请仔细检查 NLog 配置。

*共享[问答风格，](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)希望这可以节省我整理的 15 分钟。*

# c++-cli - c++/cli 函数参数中的字典

> ID：11315283
> 
> 赞同：1
> 
> 时间：2012-07-03T16:32:00.703
> 
> 标签：c++-cli

我越来越熟悉 c++/cli。我正在编写一个名为 Locate 的函数和一个名为 Locator 的类。接受输入字符串字典的函数。

```
Dictionary<String^, array< Byte >^>^ Locate(Dictionary<String^, String^>^ imgParms) 
```

我试图通过这样做在主函数中调用它：

```
Locator r;

Dictionary<String^,String^> myDictionary = 
               gcnew Dictionary<String^,String^>();

r.Locate(myDictionary); 
```

但我收到了这个错误

```
error C3073: 'System::Collections::Generic::Dictionary<TKey,TValue>' : ref class does        
not have a user-defined copy constructor with
          [
              TKey=System::String ^,
              TValue=System::String ^
          ] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:44:23.017

```
Dictionary<String^,String^> myDictionary = 
               gcnew Dictionary<String^,String^>(); 
```

应该

```
Dictionary<String^,String^>^ myDictionary = 
               gcnew Dictionary<String^,String^>(); 
```

该`^`符号可以被认为是类型修饰符，例如`*`do gcnew 将 a 返回`x^`给类型 x

# lotus-notes - 你能有一个图像的仅打印版本吗？

> ID：11315289
> 
> 赞同：1
> 
> 时间：2012-07-03T16:32:16.173
> 
> 标签：lotus-notes, lotus-domino

当用户在 Lotus Notes 中查看表单时，我需要显示彩色图像。我需要在打印表单时显示相同图像的黑白版本。

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:40:20.167

这是（您可能已经发现）使用标准的 hide/when 选项是不可能的，因为您不仅可以在打印时隐藏。

相反，您应该创建表单的打印友好版本，并创建一个按钮，在必须打印文档时使用打印友好表单打开文档。查看`@Command( [SwitchForm] ; formName )`用于简单表单切换的公式命令。

# java - 小程序读写权限

> ID：11315292
> 
> 赞同：1
> 
> 时间：2012-07-03T16:32:28.663
> 
> 标签：java, security, applet, accesscontrolexception

我正在尝试创建一个将文件保存在确定文件夹中的小程序。因为我想要根据操作系统的特定文件夹，所以我使用 System.getenv 和 System.getProperty 行。

我的小程序在调试和测试模式下完美运行；但是，我需要向 Applet 发送某些值，我试图通过 JavaScript 发送这些值，这是它失败的时候，给我以下错误：java.security.AccessControlException: access denied ("java.io.FilePermission" )

到目前为止，我的 Applet 是自签名和验证的，我使用 AccessController.doPrivileged 来获取系统属性。

这是我的代码：

```
import java.io.*;
import java.security.AccessController;
import java.security.PrivilegedAction;
import javax.swing.JApplet;

public class SaveSymmetricKey extends JApplet 
{       
    @SuppressWarnings("unchecked")
    public String returnOSUniversalPath()
    {       
        String osName = System.getProperty("os.name").toLowerCase();    
        String universalOSPath = null;
        String osPath = null;
        if (osName.indexOf("windows") > -1) {
            {   
                    osPath = (String)AccessController.doPrivileged(new PrivilegedAction()
                {
                    public Object run()
                    {   
                        try
                        {
                            return System.getenv("APPDATA");
                        }
                        catch(Exception e)
                        {
                            return "No se pudo llevar a cabo el acceso al SO.";
                        }
                    }
                });
                universalOSPath = osPath;
            }
        }
        else if (osName.indexOf("mac") > -1 ) {
            osPath = (String)AccessController.doPrivileged(new PrivilegedAction()
            {
                public Object run()
                {   
                    try
                    {
                        return System.getenv("?");
                    }
                    catch(Exception e)
                {
                    return "No se pudo llevar a cabo el acceso al SO.";
                }
            }
        });
        universalOSPath = osPath;
    }
    else {
        osPath = (String)AccessController.doPrivileged(new PrivilegedAction()
        {
            public Object run()
            {   
                try
                {
                    return System.getProperty("user.home");
                }
                catch(Exception e)
                {
                    return "No se pudo llevar a cabo el acceso al SO.";
                }
            }
        });
    }
    return universalOSPath;
}

//This is the method I call via JavaScript.
public String getKeyFromDotNET(String keyText, String userName) {
    FileOutputStream fos;
    BufferedWriter out;
    String keyPath = returnOSUniversalPath();
    String successReturn = null;

    try
    {   
        File keyFile = new File(keyPath + "\\" + userName + ".pem");
        if (!keyFile.exists()) {
            FileWriter fstream = new FileWriter(keyFile);
            out = new BufferedWriter(fstream);
            out.write(keyText);
            out.close();
            successReturn = "Llave guardada exitosamente.";
        }
        else {
            successReturn = "Llave ya existe.";

        }

        return successReturn;

    }
    catch (IOException e)
    {
        e.printStackTrace();
        successReturn = "No se pudo guardar llave.";

        return successReturn;
    }
} 
```

我究竟做错了什么？提前致谢。:)

# ruby - Ruby - 使用 REXML 查找元素

> ID：11315295
> 
> 赞同：1
> 
> 时间：2012-07-03T16:32:39.787
> 
> 标签：ruby, xml, rexml

我有一个 XML 文件，其中包含有关特定城市的零售店及其位置的信息，但我在从中检索数据时遇到了一些麻烦。问题是我可以通过遍历名称元素来按名称查找商店，但是一旦找到我要查找的商店，我不知道如何获取相应的地址。有谁知道如何做到这一点？我使用 REXML 作为我的主要 XML 模块。这是我的 XML 文件和代码的样子

**XML:**

```
<stores>
  <store>
    <name>Supermarket</name>
    <address>2136 56th Avenue</address>
  </store>
  <store>
    <name>Convenience Store</name>
    <address>503 East Avenue</address>
  </store>
  <store>
    <name>Pharmacy</name>
    <address>212 Main Street</address>
  </store>
</stores> 
```

**红宝石：**

```
xml_file.elements.each('stores/store/name') do |name|
  if input == name
    print name + "\n"
    #code to retrieve the address
    print address + "\n\n"
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:06:06.017

```
xml_file = Document.new File.new("myxml.xml")

xml_file.elements.each("stores/store") do |element| 
  if element.attributes["name"] == input
    puts element.attributes["address"]
  end
end 
```

属性是为了

```
<store store_name="mystore" 
```

要得到

```
element.attributes["store_name"] 
```

*编辑，抱歉试试这个*

```
xml_file.elements.each("stores/store") do |element| 
  if element.name.text == input
    puts element.address.text
  end
end 
```

根据评论，正确的语法是`dialog.elements['name'].text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:39:09.210

这是我的看法。'//name/..' 选择所有 'name' 节点的父节点。if 语句根据您的输入检查名称节点的文本（本例中为 matched_names）。像在块的其余部分中一样显示或存储名称和地址数据：

```
matched_names = ['Convenience Store', 'Pharmacy']

doc.elements.each('//name/..') do |parent|
  if (matched_names.include? parent.elements['name/text()'].to_s)
    puts parent.elements['name']
    puts parent.elements['address']
  end
end 
```

# ruby - 导入本地范围

> ID：11315303
> 
> 赞同：0
> 
> 时间：2012-07-03T16:32:55.367
> 
> 标签：ruby

考虑

```
# sun.rb
class Sunshine
  def bright?
    return true
  end
end

def greeting(greeter)
  puts "hello, Sun from #{greeter}"
end

# main.rb
def abc
  my_load "sun.rb"
  greeting("abc")
  return Sunshine.new
end

s = abc
puts s.bright?
greeting("Adrian")
... 
```

我可以在`my_load`这里有这样一个`greeting("abc")`调用成功，但后者`greeting("Adrian")`导致 NoMethodError；但`puts s.bright?`通话成功。

所以，综合来说：sun.rb 中的类和方法都在调用者的范围内，`my_load`这样它们在不再被引用时也会被垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:26:34.753

首先，如果独立（在对象上调用）方法调用不存在，`main`将导致异常。只有在对象上调用该方法时，`NameError`您才会得到一个。`NoMethodError`

```
nothing #=> NameError
class A; end
A.nothing #=> NoMethodError 
```

这是因为当你调用`nothing`on时`main`，它不知道它是一个方法还是一个变量。然而：

```
nothing() #=> NoMethodError 
```

因为`()`它现在知道它是您尝试调用的方法。只是需要注意的事情。

其次，如果您希望一种方法有效然后无效，请使用`undef`.

```
def greeting(name)
   puts "Hello, #{name}"
end

greeting("Chell") #=> "Hello, Chell"
undef greeting
greeting("Chell") #=> NoMethodError 
```

# entity-framework-4 - 首先在实体框架代码中使用导航属性

> ID：11315311
> 
> 赞同：6
> 
> 时间：2012-07-03T16:33:48.907
> 
> 标签：entity-framework-4, ef-code-first, asp.net-web-api, navigation-properties

语境：

*   代码优先，实体框架 4.3.1；
*   用户----主题，**1对多**关系；
*   `User`带有`public virtual ICollection<Topic> CreatedTopics`导航属性（延迟加载）；
*   `Topic`带有`public virtual User Creator`导航属性；
*   `DataServiceController : DbDataController<DefaultDbContext>`, Web API beta, ASP.NET MVC 4 Beta , 单页应用程序；
*   System.Json 用于 Json 序列化；
*   Web API 操作：

    ```
    public IQueryable<Topic> GetTopics()
    {
        // return DbContext.Topics;                   // OK
        return DbContext.Topics.Include("Creator");   //With Exception
    } 
    ```

*   结果：**“w3wp.exe 中出现未处理的 microsoft .net 框架异常”**

这里的问题似乎是：我不应该**在两个实体中添加导航属性**（导致循环引用？），如果我删除类中的`CreatedTopics`导航属性`User`，它会再次正常。

因此，*在上面列出的类似上下文*中，这是我的问题：

1.  **1对多**关系的情况下如何处理Navigation Properties ；
2.  此外，**多对多**关系怎么样，我必须将它分成两个**1 对**多关系吗？
3.  使用导航属性的最佳实践和注意事项是什么？

我已经阅读了许多相关的帖子，但仍然不够清楚:(,

谢谢你的帮助！

院长

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T18:39:16.223

这不是代码优先或 EF 的问题 - 这是序列化的问题。默认情况下，用于将对象图转换为 Web API 消息中传递的某种表示的序列化程序无法使用循环引用。根据您要使用的消息格式，Web API 默认使用不同的序列化程序 -[这里](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)有更多关于 Web API 使用的默认序列化程序以及如何更改它的方式。以下文本假设您正在使用`DataContractJsonSerializer`or `DataContractSerializer`（对于 XML 序列化应该是默认的），但对于 JSON.NET 也是可能的（对于 JSON 序列化应该是默认的 - 可以切换到 JSON 序列化，`DataContractJsonSerializer`但默认序列化器更好）。

那你能做什么？`DataContract(IsReference = true)`您可以告诉序列化程序它应该通过使用属性标记您的类和每个传递的属性来跟踪这些循环引用`DataMember`（查看链接文章以了解如何使用 JSON.NET 实现它）。这将允许序列化程序正确识别周期，并且序列化理论上会成功。理论上因为这也要求不使用延迟加载。否则，您可以序列化比预期更多的数据（在某些灾难性场景中，它可能导致序列化数据库的全部内容）。

当您序列化启用延迟加载的实体图时，您将序列化 a`Topic`及其`Creator`但序列化也将访问`CreatedTopics`属性 => 所有相关主题都被延迟加载并由序列化处理，并且序列化继续访问`Creator`所有新加载的主题！这个过程一直持续到没有其他对象可以延迟加载。因此，您在序列化实体时永远不应该使用延迟加载。

其他选项是从序列化中排除反向引用。你只需要序列化`Creator`​​. 您不需要序列化`CreatedTopics`，因此您可以使用属性标记`IgnoreDataMember`属性（`JsonIgnore`对于 JSON.NET）。问题是，如果您还具有用于返回`User`所有他的Web API 操作，`CreateTopics`则由于该属性，这将不起作用。

最后一个选项是不使用实体。此选项通常用于 Web 服务，您可以在其中创建满足特定操作要求的特殊 DTO 对象，并在操作内处理实体和 DTO 之间的转换（可能借助 AutoMapper 等工具）。

处理一对一、一对多或多对多关系没有区别。如果两侧都有导航属性，则必须始终处理此问题。

# ruby - 将 postgres VARCHAR 查询转换为 ruby activerecord

> ID：11315314
> 
> 赞同：0
> 
> 时间：2012-07-03T16:34:00.247
> 
> 标签：ruby, postgresql, activerecord

我需要将以下 postgreSQL 查询转换为 activerecord ruby​​ 查询。

```
select * 
from my_table 
where (my_time between '2010-12-27 00:00:00' and '2011-01-28 00:00:00') 
  and (my_time::TIME)::VARCHAR like '12:00:00.%'; 
```

这将提取每天 12:00:00.% 的数据。我可以做时间范围部分，但不知道如何翻译查询的后半部分。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:32:02.573

您可以使用[`to_char`](http://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)将时间戳转换为适当的字符串形式并同时去除小数秒：

```
where to_char(my_time, 'HH24:MM:SS') = '12:00:00'
... 
```

ActiveRecord 版本非常简单：

```
MyTable.where("to_char(my_time, 'HH24:MM:SS') = '12:00:00'") 
```

然后链入您现有的 BETWEEN 检查。

您还可以使用[`extract`](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)分别检查每个时间组件：

```
where extract(hour   from my_time) = 12
  and extract(minute from my_time) =  0
  and extract(second from my_time) =  0
  ... 
```

ActiveRecord 版本将是：

```
MyTable.where('extract(hour   from my_time) = ?', 12)
       .where('extract(minute from my_time) = ?',  0)
       .where('extract(second from my_time) = ?',  0) 
```

您必须询问 EXPLAIN 以查看哪个版本效果最好。

# iphone - 在 iPhone 上下载 XML 文件，存储它然后使用它

> ID：11315315
> 
> 赞同：3
> 
> 时间：2012-07-03T16:34:19.503
> 
> 标签：iphone, objective-c, ios, libxml2

我目前正在编写一个使用 XML 文档检索数据的应用程序（我使用的是 libxml2.2.7.3）。我将其设置为加载本地 XML 文件（在 xCode 的项目中，以及所有其他项目文件中）。我发现我希望能够编辑这个 XML 文件，然后对应用程序进行即时更新。我从 XML 文档中获取数据，如下所示：

```
NSArray *dagensRetList = [self getAllItems:@"//dagensret" fileName:@"dagensret.xml"]; 
```

我认为解决此问题的最简单方法是在我提供的网络服务器上提供该文档的新版本时下载 xml 文件（在每次应用程序启动/单击刷新按钮时，它将下载新文件来自服务器 - 也许让它检查它们是否具有相同的标签（weekNumber，它是丹麦编码的应用程序））

所以我正在考虑下载文件最方便的方法是什么，我应该保持这种获取数据的方式，还是将文档保存在服务器上更明智，然后他们每次都直接从服务器读取？（但它最终可能会使用大量流量，但它是我学校的产品，因此用户群约为 1200，但由于并非每个人都在使用智能手机，所以会更少）

您将如何从网络服务器下载文件然后将其缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:23:24.047

您绝对应该将文件缓存在设备上，以防用户无法连接到服务器。

这样的事情应该让你开始：

```
// Create a URL Request and set the URL
NSURL *url = [NSURL URLWithString:@"http://google.com"]
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

// Display the network activity indicator
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

// Perform the request on a new thread so we don't block the UI
dispatch_queue_t downloadQueue = dispatch_queue_create("Download queue", NULL);
dispatch_async(downloadQueue, ^{

    NSError* err = nil;
    NSHTTPURLResponse* rsp = nil;

    // Perform the request synchronously on this thread
    NSData *rspData = [NSURLConnection sendSynchronousRequest:request returningResponse:&rsp error:&err];

    // Once a response is received, handle it on the main thread in case we do any UI updates
    dispatch_async(dispatch_get_main_queue(), ^{
        // Hide the network activity indicator
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        if (rspData == nil || (err != nil && [err code] != noErr)) {
            // If there was a no data received, or an error...
        } else {
            // Cache the file in the cache directory
            NSArray* paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
            NSString* path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"init.xml"];

            [[NSFileManager defaultManager] removeItemAtPath:path error:nil];
            [data writeToFile:path atomically:YES];

            // Do whatever else you want with the data...
        }
    });
}); 
```

# mercurial - 如何使用 Tortoise HG 在我的计算机上设置存储库？

> ID：11315323
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:35:02.960
> 
> 标签：mercurial, repository, tortoisehg

我在一个新项目中获得了我们存储库的公司网站，但我不知道如何使用 Tortoise HG 在我的计算机上设置存储库。当我开始工作时，我们之前的项目已经在我的机器上设置好了，所以我不需要知道如何。问这个社区而不是我的老板，我会觉得更自在。

该存储库是“Mercurial 存储库”。网站本身就是以这种方式设置的。 ![在此处输入图像描述](../Images/97d83db85b817051bbc08348b46bb715.png) 我已经从“zip”按钮下载了文件，但不知道如何使用 Tortoise 将该文件连接到网站，所以我所做的事情实际上会影响真正的存储库。

**如何设置 Tortoise 工作台以便我可以将更改拉入和推送到存储库？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:43:30.557

zip 仅包含没有任何特定于 mercurial 部分的文件。您可以删除它，我们不会使用它来设置您的个人存储库。

首先，您需要拥有访问存储库的 URL。根据服务器的配置，它可以通过 HTTP、SSH 甚至网络共享。然后，您最终将需要凭据。

您可以在网站上的某处寻找“克隆”URL，或向同事/您的老板询问。

获得 URL 后，您只需使用 TortoiseHG 克隆存储库：http: [//tortoisehg.bitbucket.io/manual/2.9/clone.html](http://tortoisehg.bitbucket.io/manual/2.9/clone.html)

您现在可以像以前一样使用您的存储库。

# nfc - 对 NXP SmartMX 非接触式 MCU 进行编程需要什么？

> ID：11315326
> 
> 赞同：3
> 
> 时间：2012-07-03T16:35:18.640
> 
> 标签：nfc, microcontroller, mifare

我正在开发一个具有强大加密功能的 NFC 技术的身份验证系统。

NXP 有两种解决方案：Mifare DESFire EV1，它是一种具有存储区和 3DES 和 AES128 加密功能的芯片，以及 SmartMX2，它是一个需要操作系统和软件才能运行的完整 MCU。

要在两者之间进行选择，我必须知道如何对这些标签进行编程。据我了解，DESFire 需要一个 USB 读/写器和接口软件，像这样 --> [http://www.mpsys.de/chipmanrfid_en.html](http://www.mpsys.de/chipmanrfid_en.html)

在 SmartMX 卡上安装操作系统，然后调试需要什么设备？是否可以仅通过 NFC 接口进行操作？

感谢您的关注，gfunky

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:48:03.180

SmartMX 卡总是随卡操作系统一起安装。Card OS 实际上是固定在芯片的 ROM 掩码中的。这种卡操作系统的一个例子是 NXP JCOP；JavaCard 的一个实现。

为 JCOP 开发 JavaCard 小程序通常在 Eclipse 中完成。恩智浦为客户提供包含 Eclipse 插件的 JCOP 开发工具。卡本身无法进行调试（也是出于安全原因），但可以在 PC 上运行的模拟器中进行。

DESFire 是具有固定功能的芯片。它有自己的命令集来执行创建文件、读取和写入数据以及执行身份验证等操作。原则上，这可以使用任何允许通过非接触式读卡器发送命令的软件来完成。但是内置对 DESFire 支持的专用软件将非常方便，并且可能会大大加快您的开发速度。

# c - 切换条件中的默认情况

> ID：11315330
> 
> 赞同：27
> 
> 时间：2012-07-03T16:35:28.733
> 
> 标签：c

我有这个代码：

```
 #include<stdio.h>                                   
  int main()
  {   
      int a=10;
      switch(a)
      {   
      case '1':
          printf("ONE\n");
          break;
      case '2':
          printf("TWO\n");
          break;
      defalut:
          printf("NONE\n");
      }   
      return 0;
  } 
```

该程序不打印任何内容，甚至不打印`NONE`. 我发现`default`有一个错字`defalut`！
我想知道为什么编译器没有检测到这个语法错误。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-03T16:36:27.827

`defalut`只是程序中的一个标签，您可以使用`goto`. 拥有一个突出显示关键字的编辑器可能会使这个错误更容易被发现。

我还应该注意你的程序可能有一些逻辑错误。字符`'1'`与 不同`1`，与 and`'2'`相同`2`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T16:37:58.713

这不是语法错误。`defalut`是一个有效的标签，它可能是 a 的目标`goto`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T19:05:34.820

提示：如果您正在使用`gcc`，请添加选项`-pedantic`. 它会警告您未使用的标签：

```
$ gcc -ansi -Wall -pedantic test.c -o test
test.c: In function ‘main’:
test.c:14:10: warning: label ‘defalut’ defined but not used 
```

# git - 我可以生成私人提交的补丁并将其发送给维护者吗？

> ID：11315336
> 
> 赞同：0
> 
> 时间：2012-07-03T16:35:43.613
> 
> 标签：git

在[Progit](http://git-scm.com/book/en/Distributed-Git-Maintaining-a-Project#Applying-Patches-from-E-mail)它说：

> 如果你想让 Git 更智能地尝试解决冲突，你可以传递一个 -3 选项给它，这使得 Git 尝试三向合并。默认情况下，此选项不启用，因为如果补丁所基于的提交不在您的存储库中，则该选项不起作用。如果你确实有那个提交——如果补丁是基于公共提交的——那么 -3 选项通常更聪明地应用一个冲突的补丁：

和

> 这种方法的另一个优点是您还可以获得提交的历史记录。尽管您可能有合法的合并问题，但您知道他们的工作在您的历史中的哪个位置；正确的三向合并是默认设置，而不是必须提供 -3 并希望补丁是从您有权访问的公共提交中生成的。

那么这是否意味着我可以将我的补丁基于我的*私人*提交？我想知道它有什么意义，因为它会在合并时导致明显的冲突，因为提交补丁中的文件是基于贡献者方的，与我现在的文件看起来不同，那么我该如何合并它们呢？这些东西是从项目维护者的角度在 Progit 中描述的，因此贡献者不会将他的补丁基于某个开发秘密分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:57:26.000

更改可以很容易地基于私有提交，并且只要更改不冲突，它就会应用。

考虑：

```
A                   master
\--------B-----C    HEAD 
```

A 是上游（公共）master；B 和 C 是对私有分支的提交。您可以生成从 B 到 C 的补丁，如果不冲突`A..B`，`B..C`它将应用于上游公共提交 A。

更有礼貌的做法是重新排序您的提交：

```
A                   master
\--------C-----B    HEAD 
```

并提交补丁`A..C`。如果这是不可能的（比如说，因为中间阶段的提交已经在本地发布），你应该能够将提交挑选到一个专门为上游提交准备补丁的分支中：

```
A                   master
\--------B-----C    HEAD
\--------C'         upstream-request 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:49:00.057

我不确定您所说的“私人提交”是什么意思；在您的本地存储库中提交？这几乎总是您将提交补丁的内容。

您希望基于公共分支在您的存储库中创建一个分支，该分支仅包含您要向上游提交的提交。使用该分支创建补丁`format-patch`。然后上游可以最容易地应用补丁。

# jsf - JSF富树+AJAX

> ID：11315338
> 
> 赞同：0
> 
> 时间：2012-07-03T16:35:49.300
> 
> 标签：jsf, richfaces, jsf-1.2

我有一棵丰富的树，它包含很少的节点。我在每个节点旁边都有一个复选框。当我选中一个复选框时，需要选中与所有孩子相关的复选框，当我取消选中所有孩子时，必须取消选中。我的 xhtml 中有以下代码。在 backing bean 中，我根据事件将所有子项设置为选中/未选中。树最初处于“折叠”模式。当我单击复选框并展开节点时，我可以看到所有子项都被选中。但是当我在扩展模式中取消选中/检查时，这些值不会反映在子元素中。你能帮我知道我错过了什么吗？谢谢。

```
 <rich:tree id="producttree" switchType="server"
        value="#updateProductBean.deviceServiceTreeRoot}" var="item">
        <rich:treeNode id="productnode">
            <h:selectBooleanCheckbox value="#{item.selected}"
                rendered="#{item.value == null &amp;&amp; item.checkbox == true}"
                valueChangeListener="#{updateProductBean.submitUpdateProduct}">
                <f:attribute name="selectedProductId" id="selectedProductId"
                    value="#{item.paramID}" />
                <f:attribute name="selectedProductName" id="selectedProductName"
                    value="#{item.name}" />
                <a4j:support event="onclick" reRender="producttree,productnode">
                </a4j:support>
            </h:selectBooleanCheckbox>
            <h:outputText value="#{item.name}" rendered="#{item.value == null}" />
        </rich:treeNode>
    </rich:tree> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:18:22.000

尝试将您`h:selectBooleanCheckBox`的标签包装在`a4j:outputPanel`标签中，然后定义一个 id 名称，然后`a4j:outputPanel`在您的`a4j:support`标签上重新渲染它。如果它仍然没有重新渲染，试着穿上`ajaxRendered="true"`你的`a4j:outputPanel`this 将使它总是为每个 ajax 请求更新。

试试这个。

```
<rich:tree id="producttree" switchType="server"
                value="#updateProductBean.deviceServiceTreeRoot}" var="item">
                <rich:treeNode id="productnode">
                    <a4j:outputPanel id="panel" ajaxRendered="true">
                        <h:selectBooleanCheckbox value="#{item.selected}"
                            rendered="#{item.value == null &amp;&amp; item.checkbox == true}"
                            valueChangeListener="#{updateProductBean.submitUpdateProduct}">
                            <f:attribute name="selectedProductId" id="selectedProductId"
                                value="#{item.paramID}" />
                            <f:attribute name="selectedProductName" id="selectedProductName"
                                value="#{item.name}" />
                            <a4j:support event="onclick"
                                reRender="producttree,productnode, panel">
                            </a4j:support>
                        </h:selectBooleanCheckbox>
                    </a4j:outputPanel>
                    <h:outputText value="#{item.name}"
                        rendered="#{item.value == null}" />
                </rich:treeNode>
            </rich:tree> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-22T04:11:33.560

它呈现您单击树的整个一个级别，因此如果您有任何 ajax 调用，那么它将调用第一个节点并跳过休息。整个故事正在映射整个级别。

# oracle - PL/SQL，如何在字符串中转义单引号？

> ID：11315340
> 
> 赞同：144
> 
> 时间：2012-07-03T16:36:02.890
> 
> 标签：oracle, plsql

在 Oracle PL/SQL 中，如何转义字符串中的单引号？我试过这种方法，它不起作用。

```
declare
  stmt varchar2(2000);
begin
  for i in 1021 .. 6020
  loop
    stmt := 'insert into MY_TBL (Col) values(\'ER0002\')';

    dbms_output.put_line(stmt);
    execute immediate stmt;
    commit;
  end loop;
exception
  when others then
    rollback;
    dbms_output.put_line(sqlerrm);
end;
/ 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-07-03T16:38:44.143

您可以使用文字引用：

```
stmt := q'[insert into MY_TBL (Col) values('ER0002')]'; 
```

[可以在此处找到](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#sthref344)文字的文档。

或者，您可以使用两个引号来表示单引号：

```
stmt := 'insert into MY_TBL (Col) values(''ER0002'')'; 
```

IMO，使用 Q 语法的文字引用机制更加灵活和易读。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-03T18:37:19.490

这是[一篇博客文章](http://www.orafaq.com/node/2195)，应该有助于转义字符串中的刻度。

这是上述帖子中最简单的方法：

> 最简单也最常用的方法是用一个单引号，两边加两个单引号。
> 
> `SELECT 'test single quote''' from dual;`
> 
> 上述语句的输出将是：
> test single quote'
> 
> 简单地说您需要一个额外的单引号字符来打印单引号字符。也就是说，如果您输入两个单引号字符，Oracle 将打印一个。第一个行为就像一个转义字符。
> 
> 这是在 Oracle 中打印单引号的最简单方法。但是当您必须打印一组引号而不是一个引号时，它会变得复杂。在这种情况下，以下方法可以正常工作。但这需要更多的打字工作。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-02-09T05:39:13.423

除了上面 DCookie 的答案之外，您还可以使用 chr(39) 作为单引号。

当我必须基于大量现有数据创建大量插入/更新语句时，我发现这特别有用。

这是一个非常简单的示例：

假设我们有一个非常简单的表，Customers，它有 2 列，FirstName 和 LastName。我们需要将数据移动到Customers2中，所以我们需要生成一堆INSERT语句。

```
Select 'INSERT INTO Customers2 (FirstName, LastName) ' ||
       'VALUES (' || chr(39) || FirstName || chr(39) ',' || 
       chr(39) || LastName || chr(39) || ');' From Customers; 
```

我发现这在将数据从一个环境移动到另一个环境或快速重建环境时非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T20:01:28.860

`EXECUTE IMMEDIATE 'insert into MY_TBL (Col) values(''ER0002'')'`; 为我工作。用两对单引号关闭`varchar`/就可以了。`string`其他选项可能是使用`using`关键字, `EXECUTE IMMEDIATE 'insert into MY_TBL (Col) values(:text_string)' using 'ER0002'`; 请记住，如果您使用带参数执行 DDL `using`，则关键字将不起作用，但是，使用引号将适用于 DDL。`EXECUTE IMMEDIATE`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-22T06:48:37.787

就我而言，我这样使用：

```
stmt := q'!insert into MY_TBL (Col) values('ER0002')!'; 
```

添加：**q'！**之前和**！**在字符串之后。

这是另一个参考：[Alternative Quoting Mechanism (''Q'') for String Literals](https://livesql.oracle.com/apex/livesql/file/content_CIREYU9EA54EOKQ7LAMZKRF6P.html)

# mongodb - Map Reduce算法设计（首选mongodb）

> ID：11315341
> 
> 赞同：1
> 
> 时间：2012-07-03T16:36:05.270
> 
> 标签：mongodb, mapreduce

我对地图减少设计很陌生。我使用 mongodb 作为后端和 map reduce 引擎。

在一个简单的数据集上，例如：

```
day, value 
```

其中值为 -1、0 或 1，我想为每一行添加持续时间，其中持续时间是值等于 1 或 -1的**连续天数。**

示例输入数据集：

```
 day| value
2012-01-01|  1
2012-01-02|  1
2012-01-03|  1
2012-01-04| -1
2012-01-05| -1
2012-01-06|  0
2012-01-07|  1
2012-01-08|  1 
```

输出应该是：

```
 day| value | Duration
2012-01-01|  1    | 0
2012-01-02|  1    | 1
2012-01-03|  1    | 2
2012-01-04| -1    | 0
2012-01-05| -1    |-1
2012-01-06|  0    | 0
2012-01-07|  1    | 0
2012-01-08|  1    | 1 
```

这在地图减少工作中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:08:18.450

如果我错了，有人纠正我，但这对于 MapReduce 来说似乎不可行。我不确定 MongoDB 如何处理其映射器的输入分区，但如果我没记错的话，对于 MapReduce 来说，依赖于先前了解一个映射器块之外的数据的任务是不可能的。

MR 可以在某个块内完成这项工作。假设天 01/01 到 01/02 被发送到一个映射器（来自您的示例）。当然，您可以让它意识到这两天连续具有相同的值。

但是，如果另一个映射器获得 01/03 到 01/04 的天数怎么办？此映射器不会知道第 1 天和第 2 天之前的值与第 3 天相同，因此它只会输出其持续时间为 0。就我而言，无法从不同的映射器获取数据可以看到。

仅使用直接的 java 编码来执行此操作可能会更好。

# asp.net - 网络表单不显示

> ID：11315343
> 
> 赞同：0
> 
> 时间：2012-07-03T16:36:25.937
> 
> 标签：asp.net, webforms

我必须将应用程序移植到 .NET，所以我决定使用 ASP Webforms。我设置了示例数据库（为空），并且有一些网络表单（GridView、DetailsView）。对于“新”记录页面，我有一个 DetailView，但是当我运行它时，服务器不提供任何形式。我怀疑这是因为表是空的，所以我该如何设置它以呈现表单以便我可以添加新记录。谢谢，另外，如果有人可以向我指出一个涵盖基础知识的优秀 Webforms 教程，那就太好了。谷歌有数以百万计的这些，但其中大多数，包括 msdn 都很麻烦，并且涉及到很多让我困惑的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:14:44.490

在这种情况下，我必须做的是使用`<EmptyDataTemplate>`Field。发生这种情况是因为当 DataSet 为空时，除非在`EmptyDataTemplate`.

# node.js - Node.js + Express 上的多个视图路径

> ID：11315351
> 
> 赞同：48
> 
> 时间：2012-07-03T16:36:55.940
> 
> 标签：node.js, express

我正在**使用 Express Framework 在 Node.js**上编写 CMS 。在我的 CMS 上，我有几个用于用户、页面等的模块。

我希望每个模块都将他的文件放在**单独的文件夹**中，**包括视图文件**。任何人都知道我怎样才能做到这一点？

我使用**swig**作为我的模板引擎，但如果有帮助，我可以将其替换为其他东西。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-04T09:17:31.710

**最后更新**

*自 Express 4.10 起，框架支持多视图文件夹功能*

只需将一组位置传递给`views`属性，就像这样。

```
app.set('views', [__dirname + '/viewsFolder1', __dirname + '/viewsFolder2']); 
```

**快递2.0**

据我所知，express 目前不支持多个视图路径或命名空间（就像静态中间件一样）

但是您可以自己修改查找逻辑，使其按您想要的方式工作，例如：

```
function enableMultipleViewFolders(express) {
    // proxy function to the default view lookup
    var lookupProxy = express.view.lookup;

    express.view.lookup = function (view, options) {
        if (options.root instanceof Array) {
            // clones the options object
            var opts = {};
            for (var key in options) opts[key] = options[key];

            // loops through the paths and tries to match the view
            var matchedView = null,
                roots = opts.root;
            for (var i=0; i<roots.length; i++) {
                opts.root = roots[i];
                matchedView = lookupProxy.call(this, view, opts);
                if (matchedView.exists) break;
            }
            return matchedView;
        }

        return lookupProxy.call(express.view, view, options)
    };
} 
```

您将通过调用上面的函数并将*express*作为参数传递来启用新逻辑，然后您将能够为配置指定一组视图：

```
var express = require('express');
enableMultipleViewFolders(express);
app.set('views', [__dirname + '/viewsFolder1', __dirname + '/viewsFolder2']); 
```

或者，如果您愿意，可以直接修补框架（更新其中的*view.js*文件）

这应该**适用于 Express 2.x**，不确定是否适用于新版本（3.x）

**更新**

不幸的是，上述解决方案在 Express 3.x 中不起作用，因为*express.view*是*未定义的*

另一种可能的解决方案是代理*response.render*函数并设置视图文件夹配置，直到匹配：

```
var renderProxy = express.response.render;
express.render = function(){
    app.set('views', 'path/to/custom/views');
    try {
        return renderProxy.apply(this, arguments);
    }
    catch (e) {}
    app.set('views', 'path/to/default/views');       
    return renderProxy.apply(this, arguments);
}; 
```

我没测试过，反正我觉得很hacky，可惜这个功能又被推回了： [https ://github.com/visionmedia/express/pull/1186](https://github.com/visionmedia/express/pull/1186)

**更新 2**

此功能已在 Express 4.10 中添加，因为以下拉取请求已合并： [https ://github.com/strongloop/express/pull/2320](https://github.com/strongloop/express/pull/2320)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-22T15:17:59.930

除了@user85461 答案之外，require view 部分对我不起作用。我做了什么：删除路径内容并将其全部移至我可能需要的模块 patch.ViewEnableMultiFolders.js （适用于当前快递）：

```
function ViewEnableMultiFolders(app) {
    // Monkey-patch express to accept multiple paths for looking up views.
    // this path may change depending on your setup.
    var lookup_proxy = app.get('view').prototype.lookup;

    app.get('view').prototype.lookup = function(viewName) {
        var context, match;
        if (this.root instanceof Array) {
            for (var i = 0; i < this.root.length; i++) {
                context = {root: this.root[i]};
                match = lookup_proxy.call(context, viewName);
                if (match) {
                    return match;
                }
            }
            return null;
        }
        return lookup_proxy.call(this, viewName);
    };
}

module.exports.ViewEnableMultiFolders = ViewEnableMultiFolders; 
```

并使用：

```
var Patch = require('patch.ViewEnableMultiFolders.js');
Patch.ViewEnableMultiFolders(app);
app.set('views', ['./htdocs/views', '/htdocs/tpls']); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T22:05:02.497

这是 Express 3.x 的解决方案。它猴子补丁表达了 3.x 的“视图”对象，以执行与上述@ShadowCloud 解决方案相同的查找技巧。不幸的是，对象的路径查找`View`不太干净，因为 3.x 没有将它暴露给`express`——所以你必须深入研究 node_modules 的内部。

```
function enable_multiple_view_folders() {
    // Monkey-patch express to accept multiple paths for looking up views.
    // this path may change depending on your setup.
    var View = require("./node_modules/express/lib/view"),
        lookup_proxy = View.prototype.lookup;

    View.prototype.lookup = function(viewName) {
        var context, match;
        if (this.root instanceof Array) {
            for (var i = 0; i < this.root.length; i++) {
                context = {root: this.root[i]};
                match = lookup_proxy.call(context, viewName);
                if (match) {
                    return match;
                }
            }
            return null;
        }
        return lookup_proxy.call(this, viewName);
    };
}

enable_multiple_view_folders(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-20T22:31:24.357

但是，您可以将所有视图文件放在“视图”文件夹中，但将每个模块的视图分隔到“视图”文件夹中自己的文件夹中。所以，结构是这样的：

```
views  
--moduleA    
--moduleB  
----submoduleB1  
----submoduleB2  
--moduleC 
```

像往常一样设置视图文件：

```
app.set('views', './views'); 
```

并且在为每个模块渲染时，包括模块的名称：

```
res.render('moduleA/index', ...); 
```

甚至子模块的名称：

```
res.render('moduleB/submoduleB1/index', ...); 
```

此解决方案也适用于版本 4.x 之前的 express，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-13T11:40:19.053

安装 glob`npm install glob`

如果您有一个`views`类似于以下内容的目录：

```
views
├── 404.ejs
├── home.ejs
├── includes
│   ├── header.ejs
│   └── footer.ejs
├── post
│   ├── create.ejs
│   └── edit.ejs
└── profile.ejs 
```

您可以使用此 glob 函数返回目录中的子目录数组`views`（添加`path.substring`以删除尾随`/`）

```
let viewPaths = glob.sync('views/**/').map(path => {
    return path.substring(0, path.length - 1)
})

console.log(viewPaths)
>> ['views', 'views/post', 'views/includes'] 
```

所以现在你可以设置

```
app.set('views', viewPaths) 
```

现在你可以使用

```
res.render('404')
res.render('home')
res.render('post/edit')
res.render('post/create') 
```

# objective-c - setAnimationDidStopSelector：没有被调用

> ID：11315359
> 
> 赞同：3
> 
> 时间：2012-07-03T16:37:50.047
> 
> 标签：objective-c, ios, xcode, cocoa, uiview

我知道这个问题被问了很多，但我已经尝试了所有其他答案，但我无法弄清楚为什么动画停止选择器没有被调用。这是代码：

```
-(void) moveImage:(UIImageView *)image duration:(NSTimeInterval)duration curve:(int)curve  x:(CGFloat)x y:(CGFloat)y annKey:(NSString *) annKey{  

[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDidStopSelector:@selector(animationFinished:finished:context:)];
CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
image.transform = transform;
[UIView beginAnimations:annKey context:NULL];
[UIView commitAnimations]; 
```

}

这是发送所有正确参数的主要动画函数。

```
- (void)animationFinished:(NSString *)animationID finished:(BOOL)finished context:(void *)context
{
if ([animationID isEqualToString:@"Burn"])
{
    NSLog(@"Animation: %@ has finished.",animationID);
}

NSLog(@"This does not get called, why not?");
} 
```

我的 NSLog 都没有显示文本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T16:51:42.243

你需要这样做——

```
[UIView beginAnimations:annKey context:NULL];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationFinished:finished:context:)];

// Now define rest.
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];
CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
image.transform = transform;

[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:53:45.313

不知道问题是什么，但你真的不应该使用 beginAnimations/commitAnimations。相反，使用块动画。您直接在调用的完成部分定义完成代码。

```
[UIView animateWithDuration:2.0
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     // animation code
                 } 
                 completion:^(BOOL finished){
                     // completion code
                 }]; 
```

# objective-c - Objective-c：将自定义对象添加到 NSMutableArray

> ID：11315360
> 
> 赞同：0
> 
> 时间：2012-07-03T16:37:51.720
> 
> 标签：objective-c, struct, nsmutablearray

我通常用 java 或 c++ 编程，最近我开始使用 Objective-c。在 Objective-c 中寻找向量时，我发现 NSMutableArray 似乎是最好的选择。我正在开发一个 opengl 游戏，我正在尝试为我的精灵创建一个纹理四边形的 NSMutableArray。以下是相关代码：

我定义了带纹理的四边形：

```
typedef struct {
    CGPoint geometryVertex;
    CGPoint textureVertex;
} TexturedVertex;

typedef struct {
    TexturedVertex bl;
    TexturedVertex br;    
    TexturedVertex tl;
    TexturedVertex tr;    
} TexturedQuad; 
```

我在界面中创建了一个数组：

```
@interface Sprite() {
    NSMutableArray *quads;
} 
```

我启动数组并基于“宽度”和“高度”创建纹理四边形，它们是单个精灵的尺寸，以及“self.textureInfo.width”和“self.textureInfo.height”，它们是尺寸整个精灵表：

```
 quads = [NSMutableArray arrayWithCapacity:1];
    for(int x = 0; x < self.textureInfo.width/width; x++) {
    for(int y = 0; y < self.textureInfo.height/height; y++) {
        TexturedQuad q;
        q.bl.geometryVertex = CGPointMake(0, 0);
        q.br.geometryVertex = CGPointMake(width, 0);
        q.tl.geometryVertex = CGPointMake(0, height);
        q.tr.geometryVertex = CGPointMake(width, height);

        int x0 = (x*width)/self.textureInfo.width;
        int x1 = (x*width + width)/self.textureInfo.width;
        int y0 = (y*height)/self.textureInfo.height;
        int y1 = (y*height + height)/self.textureInfo.height;

        q.bl.textureVertex = CGPointMake(x0, y0);
        q.br.textureVertex = CGPointMake(x1, y0);
        q.tl.textureVertex = CGPointMake(x0, y1);
        q.tr.textureVertex = CGPointMake(x1, y1);

        //add q to quads
    }
    } 
```

问题是我不知道如何将四边形“q”添加到数组“quads”中。简单的写 [quads addObject:q] 不起作用，因为参数应该是 id 而不是 TexturedQuad。我已经看到了如何从 int 等创建 id 的示例，但我不知道如何使用我的 TexturedQuad 之类的对象来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:45:04.507

它的本质是将 C 结构包装在 Obj-C 类中。要使用的 Obj-C 类是`NSValue`.

```
// assume ImaginaryNumber defined:
typedef struct {
    float real;
    float imaginary;
} ImaginaryNumber;

ImaginaryNumber miNumber;
miNumber.real = 1.1;
miNumber.imaginary = 1.41;

// encode using the type name
NSValue *miValue = [NSValue value: &miNumber withObjCType:@encode(ImaginaryNumber)]; 

ImaginaryNumber miNumber2;
[miValue getValue:&miNumber2]; 
```

请参阅[此处](http://jongampark.wordpress.com/2008/08/07/nsvalue-and-non-object-types/)了解更多信息。

正如@Bersaelor 指出的那样，如果您需要更好的性能，请使用纯 C 或切换到 Obj-C++ 并使用向量而不是 Obj-C 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:44:47.383

NSMutableArray 接受任何 NSObject* 但不仅仅是结构。

如果您对 Objective-C 编程很认真，请查看一些[教程](http://cocoadevcentral.com/d/learn_objectivec/)。

此外，NSMutableArrays 是为了方便起见，如果您向该数组添加/删除大量对象，请使用普通 C 堆栈。特别是对于您的用例，更底层的方法将获得更好的性能。请记住，Objective-C(++) 只是 C(++) 的超集，因此您可以使用您已经熟悉的任何 C(++) 代码。

当我为 iOS 编写游戏策略时，每当我不得不做繁重的工作时（即每秒调用数百次的递归 AI 函数），我都会切换到 C 代码。

# asp.net-mvc - MVC 中的 ValidateRequest 没有真正中止请求

> ID：11315361
> 
> 赞同：1
> 
> 时间：2012-07-03T16:37:54.527
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, xss

我正在测试我的 MVC3 Web 应用程序的 XSS 攻击，我注意到`ValidateRequest`.Net中的默认行为有一种奇怪的行为

我有一个带有几个文本字段的表单，当我输入“危险”字符串时，例如：

```
<img src=x onerror=alert(/XSS/.source)> 
```

我看到“检测到潜在危险的 Request.Form...”消息按预期弹出。

我的理解是，此验证将自动取消请求，并且不会发生任何更改。但是，当我刷新页面时，我看到有问题的文本字段现在显示值“ED7F9”

如果我尝试保存`<script>alert("hi")</script>`. 在这种情况下，验证消息之后，该字段中的剩余文本为：“alert(”

有没有人见过这个，有任何线索来解释为什么会发生这种情况？

# ruby - 使用 Nokogiri 调整 IE 条件注释而不转换实体

> ID：11315362
> 
> 赞同：2
> 
> 时间：2012-07-03T16:37:56.663
> 
> 标签：ruby, xml, xhtml, nokogiri, conditional-comments

我有一个带有[HTML5 Shiv](http://code.google.com/p/html5shiv/)的 XHTML 文件：

```
<!--[if lt IE 9]>
  <script src='../common/html5.js' type='text/javascript'></script>
<![endif]--> 
```

使用[Nokogiri](http://nokogiri.org)我需要调整该评论中的路径，剥离`../`. `.content`但是，对注释节点的任何更改都会导致将`>`和转换`<`为实体的 XML 输出：

```
XML = <<ENDXML
<r><!--[if lt IE 9]>
  <script src='../common/html5.js' type='text/javascript'></script>
<![endif]--></r>
ENDXML

require 'nokogiri'
doc = Nokogiri.XML(XML)
comment = doc.at_xpath('//comment()')
comment.content = comment.content.sub('../','')
puts comment.to_xml
#=> <!--[if lt IE 9]&gt;
#=>   &lt;script src='common/html5.js' type='text/javascript'&gt;&lt;/script&gt;
#=> &lt;![endif]--> 
```

原始来源是有效的 XML/XHTML。如何让 Nokogiri 在调整期间不转换此评论中的实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:53:58.767

Nokogiri[文档`content=`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-content-3D)说：

> 字符串被 XML 转义，而不是被解释为标记。

[`replace`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-replace)因此，您可以使用和显式创建的[注释节点](http://nokogiri.org/Nokogiri/XML/Comment.html)将节点替换为新节点，而不是使用它：

```
XML = <<ENDXML
<r><!--[if lt IE 9]>
  <script src='../common/html5.js' type='text/javascript'></script>
<![endif]--></r>
ENDXML

require 'nokogiri'
doc = Nokogiri.XML(XML)
comment = doc.at_xpath('//comment()')

# this line is the new one, replacing comment.content= ...
comment.replace Nokogiri::XML::Comment.new(doc, comment.content.sub('../',''))

# note `comment` is the old comment, so to see the changes
# look at the whole document
puts doc.to_xml 
```

输出是：

```
<?xml version="1.0"?>
<r>
  <!--[if lt IE 9]>
  <script src='common/html5.js' type='text/javascript'></script>
<![endif]-->
</r> 
```

# ruby - 数组方法的Rspec测试用例

> ID：11315370
> 
> 赞同：0
> 
> 时间：2012-07-03T16:39:01.303
> 
> 标签：ruby, rspec, tdd

我是编程新手（3 个月），并且正在尝试通过 TDD 学习。

显然，TDD 的重点是首先编写测试用例，这个特别的部分我不知道该怎么做。

代码片段是：

```
class PhraseFactory
  def initialize
    @sentence = ''
  end
  def make_sentences_from
    for i in 0 ... self.length
      @sentence += self[i] + ' '
    end
  end 
```

我想如何测试它正在使用：

```
describe "When sent a message(<< is that proper terminology?) from an array of strings"
  it "Builds a sentence"
    my_word_array.should_have (here is where I am unclear)sent_a_message_to(make_sentences_from) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:51:41.787

我喜欢 TDD，但我不建议任何人使用 TDD 来学习新东西！使用 REPL (irb) 来试验代码总是一个好主意。

您的示例充满了任何 ruby​​ 开发人员的 WTF：

*   你错过了所有的END（看起来有点像python？！）
*   你正在命名一些东西工厂（你是一个java人吗？）
*   你用 for 而不是 each
*   你在一个应该是oneliner的班级里做事
*   您通过重建核心功能来重新发明轮子

除此之外，我真的不明白你的问题和代码......

你的代码的结果应该是什么？你的“工厂”的输入是什么

```
$ irb
> %(you can just use join to build a sentence from an array of words).join
"you can just use join to build a sentence from an array of words" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:15:45.727

同时学习一门新语言（Ruby）和技术（TDD）可能有点太多了。另一方面，我发现单元测试是澄清代码行为的好方法，也是一个很好的学习工具。这里的一个建议是研究 Ruby Koans 之类的东西：[http: //rubykoans.com/](http://rubykoans.com/)

我不是 Rubyist，所以我无法评论它们的质量，但我使用了 F# Koans，它改编自 Ruby，非常好。这既应该为您提供进入该语言的良好入口点，也应该熟悉单元测试，一旦您开始从事自己​​的项目并进入 TDD，这应该会为您提供很好的帮助。

# objective-c - 视图控制器第二次启动后，Superview 为 Nil

> ID：11315375
> 
> 赞同：0
> 
> 时间：2012-07-03T16:39:25.097
> 
> 标签：objective-c, ios, pushviewcontroller, superview

我已经花了几个小时，我无法弄清楚这一点。我有一个在此处启动的详细视图控制器（UITableView）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    EventLocationDetailController *newDetailViewController = [[EventLocationDetailController alloc] initWithNibName:@"EventLocationDetailController" bundle:nil];
    self.eventDetailController = newDetailViewController;
    [self.navigationController pushViewController:self.eventDetailController animated:YES];

    [newDetailViewController release];

} 
```

在详细视图控制器中有一个按钮方法，它调用下面的方法来显示一个滑入滑出动画来确认用户的选择：

```
-(void)confirmLastActionWithMessage:(NSString *)message {

ConfirmActionViewController  *newConfirmActionViewController = [[ConfirmActionViewController alloc] initWithNibName:@"ConfirmActionViewController" bundle:nil];
self.confirmActionViewController = newConfirmActionViewController; 
[newConfirmActionViewController release];

[[self.view superview] addSubview:self.confirmActionViewController.view]; 
```

}

ConfirmActionViewController 调用的协议方法，表示动画完成。

```
-(void)didFinishConfirmDisplay:(UIView *)viewToRemoveFromSuperview {

     [viewToRemoveFromSuperview removeFromSuperview];
} 
```

这在我第一次按下按钮时效果很好。如果我弹出细节控制器并将其推回堆栈并再次按下按钮，则不会发生任何事情，并且此后每次调用该方法时，细节控制器的超级视图都为零。细节视图的方法中的superview不是nil `viewWillAppear`，只有当它到达confirmLastActionWithMessage方法时。两者之间不会发生其他用户交互。如何找回超级视图？我有一个没有动画的类似代码。

我还注意到，从堆栈中弹出时，详细视图控制器没有调用 dealloc。不确定问题出在哪里。

谢谢。

编辑 1

好的。我用这个替换了 addSubview 行：

[self.view insertSubview:self.confirmActionViewController.view atIndex:0];

并且动画视图出现在其中一个表格单元格的下方。表格单元之一可以窃取超级视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:03:43.810

好吧，我真的不明白为什么要将子视图添加到父视图。为什么不将它添加到 self.view

我可能无法解释为什么没有超级视图，但尝试将控制器视图添加到 self.view 或

```
[[[[UIApplication sharedApplication] delegate] window] addSubview:yourview]; 
```

这会将视图呈现在所有内容之上。

# javascript - 我的标记适用于 jsfiddle，但不适用于任何浏览器

> ID：11315377
> 
> 赞同：0
> 
> 时间：2012-07-03T16:39:31.187
> 
> 标签：javascript, jquery, html

我之前问过类似的问题，但无法得到答案。现在已验证 html 在 jsfiddle 中有效。但是当我运行 .html 文件时它不起作用。我很困惑，我以前从未遇到过这个问题。如果有人看到任何东西，请告诉我。谢谢

```
<!DOCTYPE html>
    <html>
        <head>
            <title></title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

        <style type="text/css">
        #container{width:978px;}
        .content {
            display: none;
            padding-left: 5px;
            left: 0px;
            width: 100%;
            top: 30px;
            background: yellow;
        }
        ul{width: 100%;}
        li{
            float: left;
            padding: 5px;
            background: #e5e5e5;}

        #div{
            background: #9e9e9e;
            height: 20px;
            width: 978px;
        }
        br{
            clear: left;
        }​
        </style>

        <script type="text/javascript">
            $(function() {
            $('.action').click(function() {          
                var name = $(this).attr("name");
                var content = $('.content[name=' + name + ']');
                $('.content').not(content).hide('fast');
                content.slideToggle('fast');
            });
        });​

        </script>
         </head>
        <body>

        <div id="container"><ul>
            <li>
                <a href="#" class="action" name="summer">summer</a>
            </li>
            <li>
                <a href="#" class="action" name="winter">winter</a>
            </li>
            <li>
                <a href="#" class="action" name="weather">weather</a>
            </li>
            </ul></div><br>
            <div class="content" name="summer">
                <a href="link">june</a>
                <a href="link">july</a>
            </div>
            <div class="content" name="winter">
                    <a href="link">november</a>
                    <a href="link">december</a>
                </div>
            <div class="content" name="weather">
                    <a href="link">rain</a>
                    <a href="link">sun</a>
            </div>

            <div id="div"></div>​

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:42:32.137

您在 . 之前有一个不可见的无效字符`</script>`。删除它就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:58:09.097

jsfiddle 添加了*normalize.css*。删除 invisible chars 后，我在头部添加了以下行。

```
<link rel="stylesheet" type="text/css" href="http://fiddle.jshell.net/css/normalize.css"> 
```

我已经测试了你的代码。使用以下行它可以工作。

=== 更新 ===

这里测试的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="http://fiddle.jshell.net/css/normalize.css">
<!-- link rel="stylesheet" type="text/css" href="http://fiddle.jshell.net/css/result-light.css" -->

    <style type="text/css">
    #container{width:978px;}
    .content {
        display: none;
        padding-left: 5px;
        left: 0px;
        width: 100%;
        top: 30px;
        background: yellow;
    }
    ul{width: 100%;}
    li{
        float: left;
        padding: 5px;
        background: #e5e5e5;}

    #div{
        background: #9e9e9e;
        height: 20px;
        width: 978px;
    }
    br{
        clear: left;
    }
    </style>

    <script type="text/javascript">
        $(function() {
        $('.action').click(function() {          
            var name = $(this).attr("name");
            var content = $('.content[name=' + name + ']');
                            $('.content').not(content).hide('fast');
            content.slideToggle('fast');
        });
    });

    </script>
     </head>
    <body>

    <div id="container"><ul>
        <li>
            <a href="#" class="action" name="summer">summer</a>
        </li>
        <li>
            <a href="#" class="action" name="winter">winter</a>
        </li>
        <li>
            <a href="#" class="action" name="weather">weather</a>
        </li>
        </ul></div><br>
        <div class="content" name="summer">
            <a href="link">june</a>
            <a href="link">july</a>
        </div>
        <div class="content" name="winter">
                <a href="link">november</a>
                <a href="link">december</a>
            </div>
        <div class="content" name="weather">
                <a href="link">rain</a>
                <a href="link">sun</a>
        </div>

        <div id="div"></div>

    </body>
    </html> 
```

适用于 Firefox 和 IE8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:44:51.610

您在页面中的 JS 代码需要是

```
$(document).ready(function() {
    $('.action').click(function() {          
        var name = $(this).attr("name");
        var content = $('.content[name=' + name + ']');
        $('.content').not(content).hide('fast');
        content.slideToggle('fast');
    });
}); 
```

并添加`http:`到`jQuery`网址：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# ruby-on-rails - Rails中同一类的对象之间关联的命名约定

> ID：11315385
> 
> 赞同：0
> 
> 时间：2012-07-03T16:40:02.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个具有典型社交功能的应用程序：本质上，两个用户可以成为朋友。这是通过一个名为“Friendship”的关联类完成的，该类包含两个用户的 id。显然这两个键都不能称为“user_id”。正常的方法是为两个键赋予不同的名称并使其与 :class_name 一起使用。

问题是这种关系是完全互惠的，因为友谊不能只是一方面：它像 Facebook 一样运作，而不像 Twitter。我不想添加命名键“创建者”和“接受者”的信息，并且使用数字“user_1_id”或“user_2_id”听起来很糟糕。

问题：Rails 中有没有针对这个命名问题的约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:46:32.383

有一个关于这个主题的[railscasts 教程](http://railscasts.com/episodes/163-self-referential-association)`user`使用并且`friend`看起来很明智。它还支持互惠关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:52:41.553

在这种情况下，我通常会标准化数据。

```
class User
  has_many :friendships
  has_many :friends
end

class Friendship
  belongs_to :user
  belongs_to :friend, :class_name => "User"

  after_create :reciprocate_friendship

  def reciprocate_friendship    
    return if friend.friends.exists?(user) # do nothing if reciprocal friendship exists
    friend.friends << user
  end
end 
```

这样您就可以优化朋友查询。

**编辑**

如果您必须将朋友关系存储在一行中，则向`User`模型添加一个附加关联：

```
has_many :network_friends, :class_name => "User", :finder_sql => Proc.new {
  %Q{
    SELECT * FROM users
    JOIN friendships 
      ON (users.id = friendships.user_id OR users.id = friendships.friend_id)
    WHERE users.id = #{id}
  }
} 
```

现在您可以按如下方式使用新关联：

```
user1.friends  << user2
user3.friends << user1
user1.network_friends # [ user2, user3] 
```

# java - 在没有适当字段的情况下使用 Jackson 反序列化 JSON

> ID：11315389
> 
> 赞同：6
> 
> 时间：2012-07-03T16:40:26.873
> 
> 标签：java, json, jackson

我有这个 JSON：{"success":false}

我想把它反序列化成这个 POJO ：

```
class Message {
    private Map<String, String> dataset = new HashMap<String, String>();

    @JsonProperty("success")
    public boolean isSuccess() {
        return Boolean.valueOf(dataset.get("success"));
    }

    @JsonProperty("success")
    public void setSuccess(boolean success) {
        dataset.put("success", String.valueOf(success));
    }
} 
```

是否可以将此 JSON 反序列化为没有字段*成功*的类？到目前为止，我总是得到“UnrecognizedPropertyException：无法识别的字段“成功””

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:48:45.797

您可以实现一个方法并使用以下方式对其进行注释`@JsonAnySetter`：

```
@JsonAnySetter
public void handleUnknownProperties(String key, Object value) {
    // this will be invoked when property isn't known
} 
```

另一种可能性是像这样关闭这个失败：

```
objectMapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

这将使您在未找到属性时反序列化您的 JSON 而不会失败。

## 测试

* * *

```
public static class Message {
    private final Map<String, String> dataset = new HashMap<String, String>();

    @Override
    public String toString() {
        return "Message [dataset=" + dataset + "]";
    }

}

@Test
public void testJackson() throws JsonParseException, JsonMappingException, IOException {
    String json = "{\"success\":false}";
    ObjectMapper om = new ObjectMapper().configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    System.out.println(om.readValue(json, Message.class));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:39:51.837

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果你不能让它与 Jackson 一起工作，下面是你如何使用 MOXy 支持这个用例。

**信息**

类上不需要注释`Message`。默认情况下使用属性访问。您可以使用 指定字段访问权限`@XmlAccessorType(XmlAccessType.FIELD)`，请参阅： [http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html 。

```
package forum11315389;

import java.util.*;

class Message {
    private Map<String, String> dataset = new HashMap<String, String>();

    public boolean isSuccess() {
        return Boolean.valueOf(dataset.get("success"));
    }

    public void setSuccess(boolean success) {
        dataset.put("success", String.valueOf(success));
    }
} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11315389;

import java.io.StringReader;
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String,Object> properties = new HashMap<String,Object>(1);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Message.class}, properties);

        StreamSource json = new StreamSource(new StringReader("{\"success\":false}"));
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Message message = unmarshaller.unmarshal(json, Message.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(message, System.out);
    }

} 
```

**输入输出**

```
{"success":false} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:06:36.780

我不明白这个问题。Jackson 将从/到您在原始问题中定义的 Message POJO 的当前版本（反）序列化，没有错误，也没有任何特殊配置（@JsonProperty 注释除外）。当前的 Message POJO 没有名为 success 的*字段*，但它确实定义了一个名为 success 的*属性*，这就是 Jackson 乐于将示例 JSON 映射到它而无需任何额外配置的原因。是否要删除 @JsonProperty 注释？

如果是这种情况，那么您可以这样做，并且 Jackson 仍将使用相同的示例 JSON 从/向 Message POJO（反）序列化，而无需任何其他配置，因为 isSuccess 和 setSuccess 方法签名已经充分定义 Message 具有名为 success 的属性，与 JSON 中的元素名称匹配。

以下示例说明了这些要点。

带有消息 POJO 的示例 1 与原始问题中的定义完全一致：

```
import java.util.HashMap;
import java.util.Map;

import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    // input: {"success":false}
    String inputJson = "{\"success\":false}";

    ObjectMapper mapper = new ObjectMapper();
    Message message = mapper.readValue(inputJson, Message.class);
    System.out.println(mapper.writeValueAsString(message));
    // output: {"success":false}
  }
}

class Message
{
  private Map<String, String> dataset = new HashMap<String, String>();

  @JsonProperty("success")
  public boolean isSuccess()
  {
    return Boolean.valueOf(dataset.get("success"));
  }

  @JsonProperty("success")
  public void setSuccess(boolean success)
  {
    dataset.put("success", String.valueOf(success));
  }
} 
```

示例 2 修改了 Message POJO 以删除 @JsonProperty 注释。

```
import java.util.HashMap;
import java.util.Map;

import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    // input: {"success":false}
    String inputJson = "{\"success\":false}";

    ObjectMapper mapper = new ObjectMapper();
    Message message = mapper.readValue(inputJson, Message.class);
    System.out.println(mapper.writeValueAsString(message));
    // output: {"success":false}
  }
}

class Message
{
  private Map<String, String> dataset = new HashMap<String, String>();

  public boolean isSuccess()
  {
    return Boolean.valueOf(dataset.get("success"));
  }

  public void setSuccess(boolean success)
  {
    dataset.put("success", String.valueOf(success));
  }
} 
```

* * *

MessageWrapper 示例：

```
public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    // input: {"success":false}
    String inputJson = "{\"success\":true}";

    ObjectMapper mapper = new ObjectMapper();
    MessageWrapper wrappedMessage = mapper.readValue(inputJson, MessageWrapper.class);
    System.out.println(mapper.writeValueAsString(wrappedMessage));
    // output: {"success":true}
  }
}

class MessageWrapper
{
  @JsonUnwrapped
  @JsonProperty // exposes non-public field for Jackson use
  Message message;
} 
```

# xml - JSP中XML标签的实时读取

> ID：11315391
> 
> 赞同：1
> 
> 时间：2012-07-03T16:40:31.640
> 
> 标签：xml, jsp, debugging, xml-parsing, runtime-error

设置：iMac 10.6.8、Apache Tomcat 6.0.16、eXist 数据库、JSP、Java、XML

我有一个 JSP 页面，用于接收用户的关键字请求并返回 XML 内容。

根据返回给用户的标题 XML 标记的内容，我还希望显示从外部 Java 项目中提取的其他内容。

我的 JSP 提取 XML 内容

```
<div class='result-container'>
<%          
            (more code here to call content from XML database and transform)

            content = AE.getPrettyModelContent("ae", username + "transformedFeatureModel");
            out.println(content);
%>
</div> 
```

此内容与一系列标签一起输出，然后用于样式设置，例如

```
<title>France</title> 
```

输出为

```
<div id="title">France</div> 
```

我希望根据上述输出标签的内容在我的 JSP 页面上执行另一个操作。

到目前为止我的尝试

```
<div class='concept-container'>
<%

Injector injector = Guice.createInjector(new GuiceInjector());
ConceptConnector myConceptFrance = injector.getInstance(ConceptConnector.class);

if (div id="title" == France)
{
out.println(myConceptFrance.search(myConceptFrance));
} 

%>
</div> 
```

错误

```
An error occurred at line: 150 in the jsp file: /SimpleResponse2.jsp
div cannot be resolved
149: 
150:    if (div id="title" == France)
151:    {
152:    out.println(myConceptFrance.search(myConceptFrance));
153:    } 
```

我不是 100% 确定我尝试做的事情是可能的，而且似乎没有很多关于它的信息。如果有人可以提供任何提示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:18:25.670

我可能不完全理解这个问题，但基于：`if (div id="title" == France)`听起来您正在尝试解析和编辑您输出的 HTML，您在此处输出一些 HTML `out.println(content);`：. *这是不可能*的（**您无法将输出 HTML 读回 Java**中）以下是一些需要考虑的可能解决方法：

1.  将“内容”保存为变量 java 变量，以便稍后在比较中进一步使用（我会简化它，只保存您想要的数据部分） - 我认为这可能会在缩放时出现问题。
2.  在将任何内容输出到页面之前，将所有比较和检查都放在同一个代码块中
3.  使用一些 AJAX 来处理后面的逻辑——（使用 Javascript 来检查页面上的某些功能，并可能调用一个控制器 servlet 来处理它）
4.  当您想要将某些内容添加到页面时，不要直接使用 out.println() ，而是使用 a`StringBuffer`或其他内容来保留您正在打印的内容的副本，以便您以后可以搜索它。- 也许（如果您在打印后不需要操作某些内容，则将其`out.println`写入`StringBuffer`，然后您可以搜索，见下文：

    ```
    public static void main(String[] args){
        StringBuffer sb = new StringBuffer();
        sb.append("<div id=\"additionalData\">Italy</div> <div id=\"title\">France</div> ");
        System.out.println(sb.indexOf("id=\"title\">France</div>") > -1); // output true
        System.out.println(sb.indexOf("id=\"title\">Italy</div>") > -1); // outputs false

    } 
    ```

我敢肯定还有其他解决方案，但这就是我能马上想到的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:37:26.607

使用转换读取 XML，然后使用条件语句和[jsp:scriptlet](http://docs.oracle.com/javaee/5/tutorial/doc/bnaou.html)附加指令，如下所示：

```
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml" xmlns:jsp="http://java.sun.com/JSP/Page">
<!--...-->

 <xsl:template match="title">
  <!-- Output div with ID and value-->
  <div id="local-name(.)"><xsl:value-of select="."/></div>
  <!-- Check for France -->
  <xsl:if test="current() = 'France' ">
    <!-- Call instruction using scriptlet -->
    <jsp:scriptlet>out.println(myConceptFrance.search(myConceptFrance));</jsp:scriptlet>
  </xsl:if>
 </xsl:template> 
```

使用[mode 属性](https://stackoverflow.com/questions/7635593/how-to-do-a-second-transform-on-the-output-of-an-xslt-template)代替更复杂的逻辑。

# c++ - 开源变异测试 C++

> ID：11315393
> 
> 赞同：5
> 
> 时间：2012-07-03T16:40:45.943
> 
> 标签：c++, open-source, mutation-testing

我需要一个对 C++ 代码执行突变测试的*开源工具（即使是相对原始的工具也可以）。*我要求它是开源的，因为我需要在概念验证实验中对其进行修改。

我尝试用谷歌搜索它，但没有提出开源工具，我提出了[这个问题](https://stackoverflow.com/questions/4715890/what-mutation-testing-frameworks-exist-for-c-c)，但答案中建议的工具要么不是开源的，要么不改变 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T22:02:08.157

您是否研究过 Clang 重写器引擎或他们的 AST 匹配器？您可以从语义上搜索源代码中的某些位置，然后应用转换并重新编译。它是为通用源到源工具和分析而设计的。

这有点像你自己的，但我认为它绝对是可行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:49:08.447

我认为“C ++代码”是指改变源代码本身而不是编译版本的东西？源代码突变比中间代码突变（例如 Java 字节码或 .NET IL）更难实现。因此，我强烈怀疑您找不到开源的。

挑战是将源代码解析为某种形式的语法树，这是 C++ 中的一个难题，然后您可以识别突变点并根据需要对源代码进行更改。您可能想看看[GCCXML](http://www.gccxml.org/HTML/Index.html)作为解析的开源起点 - 添加突变实际上是问题中更直接的部分。

开源[NinjaTurtles](http://www.mutation-testing.net)（**免责声明：**我是这方面的首席开发人员）将改变从*.NET 托管*C++ 代码编译的程序集，但我怀疑这对您没有任何好处？

# c# - NServiceBus 问题，消息仍在队列中，处理程序未选择消息

> ID：11315402
> 
> 赞同：0
> 
> 时间：2012-07-03T16:41:41.683
> 
> 标签：c#, msmq, nservicebus

当到达端点时，主方法被调用，但后续处理程序不会从队列中选择消息。队列不断增加。

有没有人遇到过这个问题？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:53:24.970

到目前为止，我们对您的架构和代码都不太了解，我们必须在这里猜测。因此，如果我说的内容可能不适用于您的情况，请多多包涵。

我想到了几件事：

**1.)**你看到这个踏板了吗？[NServiceBus Bus.Send().Register(callback) 在 IIS/Windows Server 2008 上不起作用](https://stackoverflow.com/questions/9015090/nservicebus-bus-send-registercallback-not-working-on-iis-windows-server-2008)

**2.）**有一些未处理的异常，或者有一个被静默捕获并导致您的处理程序方法由于某种原因停止。

**3.)**您是否将 WCF 与 NServiceBus 一起使用？上周，我的同事实现了一个由 NServiceBus 托管的 WCF 服务，并且遇到了一个与您的问题相似的问题。它命中了第一条消息的消息处理程序，但从未处理任何后续消息。

原因是处理程序从未返回枚举值作为返回码（`YourEnum`在代码片段中表示），就像它在服务继承定义（[NServiceBus 文档](http://docs.particular.net/nservicebus/hosting/expose-an-endpoint-as-a-web-wcf-service)）中定义的那样：

```
public class YourWcfService : WcfService<YourMessage, YourEnum> { } 
```

调用服务不需要任何返回值，所以我的同事没有返回它（我无法准确说出为什么没有编译错误，这不是我的代码......）。因此，处理程序方法从未正确完成，并且无法处理其他消息。

# jquery - 使用 jQuery 在 DIV 中显示 JSON 对象

> ID：11315407
> 
> 赞同：1
> 
> 时间：2012-07-03T16:41:58.713
> 
> 标签：jquery, json

谁能告诉我我在这里做错了什么？我正在使用 ESPN API 检索 JSON 对象，但是我无法让它显示在我的 HTML 页面上的 DIV 中。

**我的 jQuery**

```
$.ajax({
    type: "GET",
    dataType: "json",
    data: " ",
    url: 'http://api.espn.com/v1/sports/basketball/nba/teams/16?enable=stats,leaders&seasontype=2&_accept=text/json&apikey=XXXXX2457896',
    success: function(data) {
      $('#result').html(data);
      console.log('Load was performed.');
    }
}); 
```

**我返回的 JSON**

```
{
  “运动的”： [
    {
      “名称”：“篮球”，
      “身份证”：40，
      “联盟”：[
        {
          “身份证”：46，
          "groupId": 7,
          "name": "美国国家篮球协会",
          "缩写": "NBA",
          “团队”：[
            {
              “身份证”：16，
              “位置”：“明尼苏达”，
              "name": "森林狼",
              "缩写": "MIN",
              “颜色”：“0E3764”，
              “链接”：{
                “API”：{
                  “团队”：{
                    “href”：“http://api.espn.com/v1/sports/basketball/nba/teams/16”
                  },
                  “消息”： {
                    “href”：“http://api.espn.com/v1/sports/basketball/nba/teams/16/news”
                  },
                  “笔记”：{
                    “href”：“http://api.espn.com/v1/sports/basketball/nba/teams/16/news/notes”
                  }
                },
                “网络”：{
                  “团队”：{
                    “href”：“http://espn.go.com/nba/team/_/name/min/minnesota-timberwolves?ex_cid=espnapi_public”
                  }
                },
                “移动的”： {
                  “团队”：{
                    “href”：“http://m.espn.go.com/nba/clubhouse?teamId=16&ex_cid=espnapi_public”
                  }
                }
              }
            }
          ]
        }
      ]
    }
  ],
  “结果偏移”：0，
  “结果限制”：50，
  “结果计数”：1，
  "时间戳": "2012-07-03T16:33:07Z",
  “状态”：“成功”
}
```

该请求工作正常，一切正常。我只是不知道如何让数据出现在我的 HTML 页面上。我以为我可以只使用该`.html()`属性，但我一定遗漏了一些东西。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:44:03.000

将json包装在一个`<pre></pre>`块中，然后将其输出到页面上

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T17:55:44.763

这是一个[jsfiddle](http://jsfiddle.net/9PGhg/3/)。

查看我获取 JSON 的 JavaScript 底部。然后我使用点符号遍历对象，得到我需要的信息并输出：

`data.sports[0].leagues[0].teams[0].links.api`这是你需要做的事情

```
$.getJSON('/sports', function(data) {

    var links = data.sports[0].leagues[0].teams[0].links.api

    for(var key in links) {

        $('body').append('<a href="'+ links[key].href +'">'+ links[key].href +'</a><br />');          

    }                 

}); 
```

之所以使用，`[0]`是因为您在 JSON 中使用了数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T07:32:35.410

`data.sports[0].leagues[0].teams[0].links.api`

这是你需要做的事情

```
$.getJSON('/sports', function(data) {

    var links = data.sports[0].leagues[0].teams[0].links.api

    for(var key in links) {

        $('body').append('<a href="'+ links[key].href +'">'+ links[key].href +'</a><br />');          

    }
} 
```

# iphone - .ics url iphone 自动订阅日历

> ID：11315411
> 
> 赞同：0
> 
> 时间：2012-07-03T16:42:07.327
> 
> 标签：iphone, icalendar

我正在尝试创建一个 url，允许我自动订阅 Radicale 提供的日历。它在没有日历时工作（它只是创建它），但是当有一个预先存在的日历时它不起作用。我正在尝试获取“您想订阅此日历”对话框，将其加载到日历应用程序中，然后在服务器上发生更改时同步事件。我可以将其手动添加为 CalDav 日历，但不能添加为订阅日历。

没有身份验证，这是一个公共日历。

以下是我的问题：

1.  这是iOS支持的东西吗？我正在运行 iOS 5。我读过它在 iOS 4.1 之前工作，但在那之后就停止工作了。
2.  如果支持，我可能会忽略什么？

这是我尝试过的网址：

```
http://public@192.168.0.123:5232/test.ics/
webcal://public@192.168.0.123:5232/test.ics/
http://192.168.0.123:5232/test.ics/
http://192.168.0.123:5232/public/test.ics/ <- after moving files into /public_user
http://192.168.0.123:5232/public_user/test.ics/ <- after moving files into /public_user 
```

我也试过删除尾随的“/”。

我已经使用[http://icalvalid.cloudapp.net/Default.aspx验证了日历](http://icalvalid.cloudapp.net/Default.aspx)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:33:46.060

事实证明这是一个编码问题。我正在使用 C# 生成 .ics 文件，并在 StreamWriter 构造函数中使用 Encoding.UTF8 枚举，默认情况下会添加 BOM。Radicale对此并不满意。一旦我用下面的代码更正它，一切正常。

```
UTF8Encoding myUtf8EncodingWithoutBom  = new UTF8Encoding(false);
StreamWriter    sw = new StreamWriter(fs, myUtf8EncodingWithoutBom); 
```

这个网址有效：

```
http://192.168.0.123:5232/test.ics/ 
```

我的 ics 文件位于 .config\radicale\collections

# php - 什么是 SQL 存储过程，我为什么要使用它们？

> ID：11315414
> 
> 赞同：-2
> 
> 时间：2012-07-03T16:42:26.847
> 
> 标签：php, mysql, sql

我看过有关“SQL 存储过程”的文章。这个术语是什么意思，他们在使用 SQL 开发时的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:43:43.220

你用 MySQL 标记了你的问题，所以

[http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)

> MySQL 5.0 支持存储例程（过程和函数）。存储例程是一组可以存储在服务器中的 SQL 语句。完成此操作后，客户端无需继续重新发出单个语句，而是可以参考存储的例程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:46:20.200

用最简单的术语来说，存储过程只是存储在数据库中的 SQL 语句。

由于您的问题没有询问好处，或者您为什么要使用存储过程，我只想提一下使用它们有几个好处，并且值得更多地了解它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:47:59.183

[该链接](http://booleandreams.wordpress.com/2008/03/24/why-to-use-stored-procedure-or-prepared-statement/)讨论了准备好的语句和存储过程之间的区别。我之所以提出这一点，是因为两者之间可能存在一些混淆，这将有助于描述存储过程是什么。

# c# - 如何使用 YouTube API 获取随机的 YouTube 视频？

> ID：11315416
> 
> 赞同：17
> 
> 时间：2012-07-03T16:42:27.053
> 
> 标签：c#, .net, youtube-api, youtube.net-api

我需要一种获取**完全**随机的 YouTube 视频的方法。没有限制。

如何使用 YouTube API？

** 编辑 * 按要求确定，这是我到目前为止所尝试的：

1 - 浏览了 youtube 开发网站上的 api 和示例。[http://www.youtube.com/dev/](http://www.youtube.com/dev/)没有找到正确的 api 或在那里做的方法。

2 - 当然是谷歌搜索；）得到了[http://randomyoutubevideo.net/](http://randomyoutubevideo.net/)但他们只提供来自 THEM 的 api 供我和 youtube 之间使用。< 这让我希望实际上可以做到这一点。

3 - 甚至检查了 youtube 应用程序库[http://youtube-gallery.appspot.com/](http://youtube-gallery.appspot.com/)看看是否有人这样做。如何。

我还将做的是在 youtube 讨论页面上提问。也许那里的人可以提供帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-03-09T16:58:14.017

# 第 1 步：创建 API 密钥

1.  创建一个谷歌帐户
2.  访问：[https ://console.developers.google.com/](https://console.developers.google.com/)
3.  创建一个新项目：在 head-menu 中单击 Create new Project 并为其命名
4.  现在激活 YoutTubeData API：单击它并启用它。
5.  插入您的应用程序信息
6.  点击“创建凭证”
7.  点击我需要什么？
8.  记下您的 API 密钥

现在您可以访问 YouTube-API。

# 第 2 步：使用 YouTube-API 抓取视频

在这一步中，我们使用 YouTube-API 来获取随机 VideoId。使用以下代码示例，您将从 YouTube 搜索中获得 50 个随机 API。那是最大值。您可以将它们存储在数据库中或直接返回随机 ID。

注意：限制为 30,000 个单位/秒/用户和每天 1,000,000 个。

> 代码示例

* * *

> [C#-示例]

```
using System;
using System.Linq;
using System.Net;
using Newtonsoft.Json;

namespace YouTube
{
   class Program
   {
    private static Random random = new Random();

    public static string RandomString(int length)
    {
        const string chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        return new string(Enumerable.Repeat(chars, length)
          .Select(s => s[random.Next(s.Length)]).ToArray());
    }

    static void Main(string[] args)
    {
        var count = 50;
        var API_KEY = "YOUR KEY";
        var q = RandomString(3);
        var url = "https://www.googleapis.com/youtube/v3/search?key=" + API_KEY + "&maxResults="+count+"&part=snippet&type=video&q=" +q;

        using (WebClient wc = new WebClient())
        {
            var json = wc.DownloadString(url);
            dynamic jsonObject = JsonConvert.DeserializeObject(json);
            foreach (var line in jsonObject["items"])
            {
                Console.WriteLine(line["id"]["videoId"]);
                /*store your id*/
            }
            Console.Read();
        }
    }
}
} 
```

> [PHP-示例]

```
function crawlVideos($count = 50)
{
    $q = $this->generateRandomString(3);
    $url = "https://www.googleapis.com/youtube/v3/search?key=" . self::API_KEY . "&maxResults=$count&part=snippet&type=video&q=" . $q;
    $JSON = file_get_contents($url);
    $JSON_Data_search = json_decode($JSON);
    foreach ($JSON_Data_search->{"items"} as $result) {
        $videoId = ($result->{"id"}->{"videoId"});
        /*Insert video to your database*/
    }
}

function generateRandomString($length = 10)
{
    return substr(str_shuffle(str_repeat($x = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ', ceil($length / strlen($x)))), 1, $length);
} 
```

> [Python-示例]

```
import json
import urllib.request
import string
import random

count = 50
API_KEY = 'your_key'
random = ''.join(random.choice(string.ascii_uppercase + string.digits) for _ in range(3))

urlData = "https://www.googleapis.com/youtube/v3/search?key={}&maxResults={}&part=snippet&type=video&q={}".format(API_KEY,count,random)
webURL = urllib.request.urlopen(urlData)
data = webURL.read()
encoding = webURL.info().get_content_charset('utf-8')
results = json.loads(data.decode(encoding))

for data in results['items']:
    videoId = (data['id']['videoId'])
    print(videoId)
    #store your ids 
```

# 第 3 步：生成/返回您的视频 URL

现在从数据库中读取一个随机 ID，例如：

```
SELECT 'id' 
FROM yttable
WHERE 1 ORDER BY RAND() LIMIT 1 
```

您的随机视频是：

```
https://www.youtube.com/embed/[random ID] 
```

玩得开心！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-18T23:16:32.157

我知道这有点离题，但我可以提供以下 bash 脚本。我在我的 Raspberry Pi 上使用它，效果很好。

```
 #!/bin/sh
    while [ true ];
    do
    searchresult=""
    while [ -z "$searchresult" ]; do
    rand=$(< /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c${1:-5};echo)
    echo "$rand"
    searchresult=$(googler -C -n 100 --np -x -w https://www.youtube.com "$rand")
    done
    urls=$(echo "$searchresult" | grep -o "https://www.youtube.com/watch?v=...........")
    url=$(shuf -e -n 1 $urls)
    echo "$url"
    omxplayer -o hdmi $(youtube-dl -f mp4 -g "$url")
    done 
```

先决条件是您已安装[googler](https://github.com/jarun/google)和[youtube-dl](https://rg3.github.io/youtube-dl/). 我最初的想法是生成随机的 11 个字符串并将它们附加到 YouTube 视频的基本 URL。然而，可能的排列数量是巨大的（26 个大写字母 + 26 个小写字母 + 10 个数字 + 连字符 + 下划线 = 64 个字符；64^11=7.38x10^19 个排列），如果地球上每个人都上传，就会用完100 亿个视频。这就是为什么随机生成完整的 11 个字符的标识符不是一种可行的方法。我的脚本改为生成随机的 5 个字符的字符串（变量“rand”）并将它们作为搜索查询传递给 googler。Googler 在 YouTube 网站上搜索这些随机字符串，在大多数情况下它会返回结果（变量“searchresult”）。如果没有结果，则使用另一个随机字符串重复搜索，依此类推，直到成功。通常需要一到三次尝试。我尝试了不同长度的搜索字符串 - 4 可能不够唯一，6 太长，可能需要多次尝试才能获得结果，我观察到如果脚本在短时间内发送超过 10 个搜索请求，谷歌暂时阻止我进一步搜索。

在下一步中，脚本从搜索结果中提取指向 YouTube 视频的超链接，并将它们放入变量“urls”中。然后随机选择其中一个播放（变量“url”）并传递给播放器 - 在我的例子中是 omxplayer，但你可以用你想要的任何播放器替换它。Omxplayer 在 Raspberry Pi 上很不错，因为它使用硬件加速并通过 hdmi 直接输出到我的电视机。如果我将“-o hdmi”更改为“-o local”，音频将通过 3.5 毫米立体声插孔发送到外部放大器。在播放过程中按“q”会停止播放当前视频，并自动开始下一个随机视频。它将永远持续下去，直到您按 Ctrl-C 停止脚本。

其他提示

通过一些修改，您可以获得**关于给定主题的随机视频**。例如，如果我们将“Deep Purple”作为附加搜索词，我们将获得 Deep Purple 的随机音乐视频：

```
 #!/bin/sh
    while [ true ];
    do
    searchresult=""
    while [ -z "$searchresult" ]; do
    rand=$(< /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c${1:-2};echo)
    echo "$rand"
    searchresult=$(googler -C -n 10 --np -x -w https://www.youtube.com "$rand" "Deep Purple")
    done
    urls=$(echo "$searchresult" | grep -o "https://www.youtube.com/watch?v=...........")
    url=$(shuf -e -n 1 $urls)
    echo "$url"
    omxplayer -o hdmi $(youtube-dl -f mp4 -g "$url")
    done 
```

请注意，在最后一个示例中，我已将随机因子减少为 2 个字符的字符串，因为在包含搜索词“深紫色”的所有 YouTube 视频的相对较小的子集中很难找到 5 个字符的字符串的匹配项”。同样在这里，我将 googler 返回的搜索结果的数量限制为 10，以保持它们的相关性。使用 100 时，我也会得到不太相关的结果，例如业余爱好者尝试播放 Deep Purple 歌曲的视频。

下一个脚本将仅随机播放**过去 12 小时内上传的新视频**：

```
 #!/bin/sh
    while [ true ];
    do
    searchresult=$(googler -C -n 100 --np -t h12 -x -w https://www.youtube.com "")
    urls=$(echo "$searchresult" | grep -o "https://www.youtube.com/watch?v=...........")
    url=$(shuf -e -n 1 $urls)
    echo "$url"
    omxplayer -o hdmi $(youtube-dl -f mp4 -g "$url")
    done 
```

您可以设置不同的时间限制。有关详细信息，请参阅 googler 的文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T17:39:26.307

似乎没有办法做到这一点，但是有一些方法可以近似您正在寻找的内容。见[这里](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/M3UYFxf5SD0)的想法。

这些页面的基本想法是使用最新的上传提要（如果您不关心上传内容的时间），或者只是获取所有 youtube 视频的转储并从中随机选择一个 URL。

在第一个链接中引用 youtube API 的人：

> 正如其他人所提到的，我们提供任何数据转储等。您与 YouTube 的所有交互都需要通过标准 API 完成。
> 
> 我不能说我有足够的统计背景来建议您如何检索真正随机的视频样本。我确实认为通过尝试生成 11 个字符的 YouTube 视频 ID 来解决这个问题可能是错误的方法，但你会遇到太多不存在的视频 ID，而且我认为这不是最好的API 的用途是发出将在 X% 的时间内返回 HTTP 404 响应的请求。
> 
> 仅使用 API 搜索“随机”挑选的单词或短语并对结果进行抽样，您可能会更幸运。如果你这样做，你应该考虑为 orderby= URL 参数使用什么值。默认排序为“相关性”，这将导致最重要的结果是我们的算法认为与您的搜索词最相关的结果。如果您总是抓住第一个条目等，这可能会扭曲您的结果。您还可以按“已发布”排序，这将为您提供按时间倒序排列的视频供稿。
> 
> 干杯，-Jeff Posnick，YouTube API 团队关于 randomyoutubevideo.net，这就是该网站的“关于”页面必须说的：
> 
> 那么我们如何才能提供真正随机的 YouTube 视频链接呢？事实证明，YouTube 编程接口 (API) 提供了额外的功能，允许发现更加随机的视频。使用许多技巧，再加上对时空结构的一点点操纵，我们成功地创建了一个过程，可以产生真正随机的 YouTube 视频链接。
> 
> 此页面上的随机 YouTube 功能当前使用数据库的一个子集。随着时间的推移，我们将扩展此数据库，并根据需要通过 API 免费提供它。

我理解这意味着他们一直在从 API 中提取大量视频列表，并从中随机选择它们的数据库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-21T14:36:43.720

肮脏的爬虫是一种选择吗？因为我使用了一个简单的随机 youtube vid 链接生成器。它只是为了积累大量的视频，而不是为了生产。
正如他所描述的，它似乎（非常）类似于“youtuberandomvideo.com”方法。

```
import re, urllib
from random import randint

def random_str(str_size):
    res = ""
    for i in xrange(str_size):
        x = randint(0,25)
        c = chr(ord('a')+x)
        res += c
    return res

def find_watch(text,pos):
    start = text.find("watch?v=",pos)
    if (start<0):
        return None,None
    end = text.find(" ",start)
    if (end<0):
        return None,None

    if (end-start > 200): #silly heuristics, probably not a must
        return None,None

    return text[start:end-1], start

def find_instance_links():
    base_url = 'https://www.youtube.com/results?search_query='
    url = base_url+random_str(3)
    #print url

    r = urllib.urlopen(url).read()

    links = {}

    pos = 0
    while True:
        link,pos =  find_watch(r,pos)
        if link == None or pos == None:
            break
        pos += 1
        #print link
        if (";" in link):
            continue
        links[link] = 1

    items_list = links.items()

    list_size = len(items_list)
    selected = randint(list_size/2,list_size-1)
    return items_list[selected][0]

for i in xrange(1000):
    link = find_instance_links()
    print link 
```

如您所见，它相当简单，可能很容易损坏，但是 IIRC 我设法快速获得了数千个随机视频链接，这正是我所需要的，而且只有几行代码......

代码的一些解释：（random->pseudo random ...）
1\. 随机生成搜索查询（这里长 3 个字母）
2\. 从视频链接的下半部分随机选择一些链接（动机是避免广告)

注意：代码很乱——它应该只作为技术的基本示例，而不是正确的代码设计和/或优雅的 python 代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-25T22:14:19.793

获取随机视频 ID 的最佳方法是生成您自己的数据库。使用 Google 的 Youtube-API 的 VideoSearch-Request。只需生成一个类似“v=SEARCH_STRING”的搜索查询，然后将您获得的视频 ID 插入到您的数据库中。搜索字符串应该是随机生成的字符串。我发现，字符串的长度应该是 4 个字符，以便从请求中获取大多数视频，而无需许多重复的结果。

如果您的数据库已准备好，您可以从中获取随机行。

我在自己的[网站 (random-video.net)](http://random-video.net)上完成了这项工作，并在几个小时内获得了超过 200 万个条目。没有真正的限制——只有数据库的大小。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-15T16:47:10.067

AFAIK：搜索`v=`没有任何意义。iI 你搜索`v=LadyGaga`，你会找到 Lady Gaga 的视频。YouTube 的搜索算法会查看描述、标题等 - 如果视频在其描述中链接了另一个视频（又名 a `?v=..`），则更有可能提出此搜索请求。另请参阅[https://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list)。

Google 的 Youtube Data API 中还没有实现随机选择。我所做的是查询

```
https://www.googleapis.com/youtube/v3/search?part=id&maxResults=50&type=video&q=QUERYSTRING&key=KEY 
```

，`QUERYSTRING`在视频 ID 语法中是一个随机的 5 个字符的字符串。如果结果集包含 1 到 50 个视频，其中至少一个 id 包含字符串，则找到一个随机视频。这种方法通常需要 1-5 次尝试。

需要最后一次检查。示例：一个随机字符串是`ydoat`. 使用上面的 url 进行查询会导致只有一个 id 的视频`VEBt0Hxp5Q8`不适合。该视频可能在某处的描述中包含该字符串。如果我搜索`ydoat`via `https://www.youtube.com/results?q=ydoat`，则找不到任何结果。搜索`v%3Dydoat`( `v=ydoat`) 会导致相同的结果。

编辑。php 中的源代码：[https ://github.com/phil294/-Php-Randomtube-random-YouTube-video-generator-](https://github.com/phil294/-Php-Randomtube-random-YouTube-video-generator-)

和 Anton 一样，我发现 4 个随机字符最合适。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-13T02:13:32.210

获取包含数百或数千个单词的单词列表。然后从中随机选择2个词作为查询。如果您想对它的随机性进行一定的控制，这也很有用。例如，您可以有一个英语单词列表或一个德语单词列表。或者有一个较小的精选列表，其中包含仅与您感兴趣的主题相关的单词。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-19T20:27:28.757

此时您可以通过此 URL 获取随机 YouTube 视频：

[https://www.googleapis.com/youtube/v3/search?part=snippet](https://www.googleapis.com/youtube/v3/search?part=snippet)

并使用多个参数。你可以在[这里](https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.search.list?part=snippet&maxResults=25&q=surfing)找到它。但是有一个限制：每天 10 000 个请求。

[您可以在这个Random YouTube Video](https://www.vtomb.com/)网站中查看它的工作原理。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-08T01:31:18.850

这就是我解决需要随机视频的问题的方法，但它每 30 分钟一次

```
x = 30
queries = ['to catch a predator', 'tcap', 'hansen vs predators']
@tasks.loop(minutes=x)
async def ytsend():
  query = random.choice(queries)
  channel = bot.get_channel(902955554819956807)
  query_string = urllib.parse.urlencode(
            {'search_query': ' '.join(query)})
  htm_content = urllib.request.urlopen(
            'http://www.youtube.com/results?' + query_string)
  search_results = re.findall(r'/watch\?v=(.{11})',
                                    htm_content.read().decode())
  messageyt = await channel.send(
            f'Suggested Video:\nhttp://www.youtube.com/watch?v={search_results[random.randint(0,len(search_results)-1)]}'
        )
  await asyncio.sleep(1750) # wait 5 sekundes 
  await messageyt.delete() # deletes the message

@ytsend.before_loop
async def ytbefore():
    await bot.wait_until_ready()

ytsend.start() 
```

不确定它是否会帮助你，但它可能会帮助某人，你可以做一个“for/while”循环而不是我放置它的任务来获取基于查询的随机链接

# tomcat - 调试“无法使用 tomcat 5 序列化 sessionid 的增量请求

> ID：11315420
> 
> 赞同：1
> 
> 时间：2012-07-03T16:42:34.717
> 
> 标签：tomcat

我在 catalina.out 中使用 tomcat 5.5 运行集群我一直看到错误 *[错误] 无法序列化 sessionid 的增量请求 [DBBAF413162AE8B1AA1DB011CFA689C5.worker1]*

我试图返回并确保放入会话中的所有对象都是可序列化的，但这是一个非常大的应用程序，所以我一定遗漏了一些东西。

无论如何我可以获得更多关于可能有问题的对象是什么的信息？谢谢兰迪

2012-07-03 11:35:26 DeltaManager [错误] 无法序列化 sessionid [DBBAF413162AE8B1AA1DB011CFA689C5.worker1] java.io.NotSerializableException 的增量请求：org.apache.catalina.core.ApplicationContextFacade at java.io.ObjectOutputStream.writeObject0( ObjectOutputStream.java:1081) 在 java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375) 在 java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347) 在 java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290) ) 在 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079) 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302) 在 org.apache.catalina.cluster.session.DeltaRequest$AttributeInfo.writeExternal(DeltaRequest. java:346) 在 org.apache.catalina。cluster.session.DeltaRequest.writeExternal(DeltaRequest.java:263) at org.apache.catalina.cluster.session.DeltaManager.unloadDeltaRequest(DeltaManager.java:695) at org.apache.catalina.cluster.session.DeltaManager.requestCompleted( DeltaManager.java:1249) at org.apache.catalina.cluster.tcp.ReplicationValve.sendSessionReplicationMessage(ReplicationValve.java:328) at org.apache.catalina.cluster.tcp.ReplicationValve.invoke(ReplicationValve.java:271) at org .apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve .java:107) 在 org.apache.jk 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)。server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:199) at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282) at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:754)在 org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:684) 在 org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:876) 在 org.apache.tomcat.util.threads .ThreadPool$ControlRunnable.run(ThreadPool.java:684) 在 java.lang.Thread.run(Thread.java:595)common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:876) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) at java.lang.Thread.run(Thread.java: 595)common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:876) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) at java.lang.Thread.run(Thread.java: 595)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:14:53.323

堆栈跟踪告诉您有问题的对象是 ApplicationContextFacade。查看将对象放入会话中的代码（通常通过调用 HttpServletSession.put()）并查看这些对象是否包含 ApplicationContextFacade 或 ServletContext 类型的实例变量。还要查看任何嵌套对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-04T20:30:02.267

我遇到了几乎相同的错误，除了我从错误日志中收到一封随机电子邮件。它在一个一般区域中随机弹出，但在我跟踪任何特定的代码行时却没有。

记录器 = org.apache.catalina.ha.session.DeltaManager

消息 = 无法序列化 sessionid 的增量请求

堆栈跟踪开始于

```
java.io.NotSerializableException: org.mycompany.SomeRandomPojo
    at java.io.ObjectOutputStream.writeObject
    ...
    ...
    no other objects from MyCompany anywhere in the stack trace 
```

无论出于何种原因，我对项目所做的最新更改导致应用程序突然对 SomeRandomPojo 不可序列化感到不满。我让它实现了可序列化，然后第二个密切相关的对象弹出了同样的错误。我使该对象实现可序列化，并且该项目位于绿条上。去搞清楚。嗯，我这周刚刚将 Intellij 升级到了 2020.2.3，这可能是我从那以后第一次像这样运行这个测试。

# linux - 移动名称未知的文件

> ID：11315422
> 
> 赞同：2
> 
> 时间：2012-07-03T16:42:46.497
> 
> 标签：linux, bash, cron, mv

我的手上有点进退两难。一家公司正在将 CSV 电话数据发送到我的服务器（通过 SSH 传输），然后我需要通过 cron 作业将其移动到不同的目录。

目录示例如下：

```
erd_0010415_10120627_D.csv.Z
erd_0010416_20120616_W.csv.Z
erd_0010416_20120623_W.csv.Z 
```

如您所见，文件名由“erd”后跟其他公司生成的数字（与我们无关，但可以是任何数字）、日期和另一个看似随机的字母组成。

这些文件每天都会发送，但只有在拨打电话时才会发送（因此在某些日子里，前一天的文件可能会丢失）。

我需要设置一个 cron 作业，它将昨天的文件（如果存在）并将其移动到不同的目录。

类似于...的东西

```
mv erd_*_$(/bin/date +%Y%m%d)_*.csv.Z /home/other-user/calls/$(/bin/date +%Y%m%d).csv.Z 
```

显然，星号实际上并不适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:52:34.983

怎么样：

```
mv erd_*_$(date -v -1d +%Y%m%d)_*.csv.Z destination_dir/ 
```

如果文件不存在，它就不会做任何事情，否则它会工作。例子：

```
jan@MacBook-Pro ~/tmp $ touch erd_0010416_20120702_W.csv.Z 
jan@MacBook-Pro ~/tmp $ mkdir 2
jan@MacBook-Pro ~/tmp $ mv erd_*_$(date -v -1d +%Y%m%d)_*.csv.Z 2/
jan@MacBook-Pro ~/tmp $ ls 2
erd_0010416_20120702_W.csv.Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:19:17.143

使用 GNU `date`？没有更简单的：

```
yesterday=$(/bin/date -d yesterday +%Y%m%d)
base=/home/other-user/calls/
source=. # whatever dir the files start in
/bin/mkdir -p "$base/$yesterday"

/bin/mv "$source"/erd_*_"${yesterday}"_[DW].csv.Z "$base/$yesterday" 
```

如果那里什么都没有，它什么也不会移动，你只会得到那个日期的空目录。

如果有必要在移动文件时重命名文件，剥离非日期部分，然后使用

```
for file in "$source"/erd_*_"${yesterday}"_[DW].csv.Z ; do
    file="${file#erd_*_*}"
    /bin/mv "$file" "$base/$yesterday/${file%_[DW].csv.Z}.csv.Z"
done 
```

In place of the `mv` command. This part presumes your shell for the cron job is `bash` and not just `sh`, in which it would be a little different.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:51:14.847

凭借我非常基本的知识，我知道有时移动文件的方式是通过访问目录本身来获取文件列表。例如：vim 文件/

然后您知道确切的名称，您可以过滤它们并像那样移动它们。

如果这不起作用，那么我会更详细地说明文件是如何发送的，因为听起来它们在一个文件中，你所要做的就是

```
cp <directory they are in>/* <directory you want> 
```

# java - Java 观察者模式没有通知

> ID：11315425
> 
> 赞同：5
> 
> 时间：2012-07-03T16:43:09.377
> 
> 标签：java, architecture, observer-pattern, software-design

由于某种原因，当我使用 java.util.Observable 对象调用 notifyObserver 方法时，没有通知我的观察者：

这是我的可观察对象：

```
public class ProjectManager extends Observable
{
...
 public void updateProjects(String project, String pack, String source, String ARN)
{
   ...
if(newSource)
    {
    tempPack.add(tempSource);
    System.out.println("Notify observers: " + this.countObservers());
    this.notifyObservers();
    }
      ...
      } 
```

我可以从我的输出中看到观察者正在被添加但没有被通知。

我的观察者对象看起来像这样：

```
public class IDE implements Observer
{

@Override
public void update(Observable o, Object arg) {

    System.out.println("Notified");

} 
```

由于某种奇怪的原因，可观察对象根本没有被通知。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T16:44:32.300

你需要`setChanged`在你之前`notifyObservers`

# symfony - 我应该如何实现自定义表单字段类型仅用于显示接受多种格式

> ID：11315428
> 
> 赞同：0
> 
> 时间：2012-07-03T16:43:33.657
> 
> 标签：symfony, symfony-forms

在我的表单中，我需要一个仅显示数据的字段。不会对此数据进行任何编辑，因此我觉得在文本字段上设置 read_only 是不够的。这个想法是创建自定义表单字段类型，该类型将接受不同的格式作为值（例如 DateTime、String）。

输出会有点像

```
<div>
    <label>My Label</label>
    My value
</div> 
```

我一直在研究文档以及预定义字段类型的代码，但不知道如何继续:-(

我不是在寻找完整的代码，只需要方向......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:52:42.867

在我看来：如果这只是为了显示，那么它不是表单数据，因此没有业务被实现为`Symfony\Component\Form\AbstractType`

也许您可以详细说明您要完成的工作是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:58:24.543

也许你应该使用[表单事件](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)。在官方文档中阅读此示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:38:40.327

最后，感谢 Stackoverflow 上的另一个线程，我使用了 DataTransformer（请参阅[Docs](http://symfony.com/doc/master/cookbook/form/data_transformers.html)）。

这样，我将字段添加为文本类型，并将自定义 DataTransformer 添加到 FormBuilder 中，它将数据转换为我需要的类型。

如果有人对此感兴趣，我会发布代码。

# php - URL 图片上传/数据库设置

> ID：11315434
> 
> 赞同：1
> 
> 时间：2012-07-03T16:43:55.707
> 
> 标签：php, mysql

我正在尝试通过 URL（图像位置）将图像存储在我的数据库中。我只想存储文件名，php 将完成 url。我的问题：我需要在我的表中添加一个 id 字段吗？文件也可能不同 ext(jpg, gif, png) php如何确定？

如果您好奇，我正在使用从本[网站上传的这张图片](http://dondedeportes.es/uploader-previewer/)

代码生成的 URL：

```
http://www.example.com/imageupload/uploads/medium/uniqueimagename.jpg 
```

我的数据库结构：

```
size: medium
name: uniqueimagename
ext: jpg/png/gif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:58:21.303

您可以像这样传递图像名称，`www.example.com/imageupload/uploads/medium?img=uniqueimagename.jpg`并且可以通过使用获取名称`$_GET['img']`，是的，您必须将 id 存储到数据库中。也不要担心扩展名，因为 img 将存储在您的文件夹中，只需从您的数据库中获取图像名称并显示在您的 img 标签中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:54:41.270

我认为你不需要。

当您存储图像名称时，IE：

```
uniqueimagename.jpg 
```

您还将存储扩展名，并且通常所有图像都位于同一个文件夹中，因此路径是通用的。

[在 PHP 中，你有 $_FILES["file"]["type"] 变量来知道文件](http://php.net/manual/en/reserved.variables.files.php)的扩展名。[（或者你可以像这里](http://cowburn.info/2008/01/13/get-file-extension-comparison/)一样使用爆炸）

如果您愿意，可以将扩展名与图片名称分开保存，但这取决于您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:51:46.347

将保存图像的数据库字段应该是二进制文件。图像名称应该或可以包含全名；那是文件扩展名。您的代码可以在显示名称之前从全名中去除 .gif。

您可以这样做的另一种方法是将命名信息保存在数据库中，并将实际图像保存在您网站上的文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:04:11.330

为什么需要 ID 字段？只要“uniqueimagename”列包含唯一值，即是您的标识符。

您也不需要为图像类型设置单独的列。图像名称将包含扩展名。

# c - 在 Delphi 中调用 C++ DLL 的问题

> ID：11315435
> 
> 赞同：2
> 
> 时间：2012-07-03T16:44:00.763
> 
> 标签：c, delphi, labview

我在 delphi 中调用 C++ DLL 时遇到一些问题，DLL 是用 Labview 编写的，但 DLL 语法都是 C++，我认为主要问题是尝试将数据作为双动态数组传递给函数（其中本质上是一个指针对吗？）

.h头文件中的函数定义为：

```
int16_t __cdecl NRELIVparExtract(
  double voltageV[], 
  double currentA[], 
  int32_t nDataPoints, 
  uint16_t fitAlgorithim, 
  int16_t *twoOrLessPoints, 
  double *Voc, 
  double *Isc, 
  double *Vmp, 
  double *Imp
); 
```

我试图用来调用它的德尔福代码是：

```
public   { Public declarations }
end;

 var
    Function NRELIVparExtract (voltageV, currentA: Array of Double; nDataPoints :Integer;
            fitAlgorithim :Word; Var twoOrLessPoints : SmallInt;
       Voc, Isc, Vmp, Imp : Double): smallint ; CDecl;External IVparExtract_NREL.dll' 
```

废话

```
procedure TFormMainIVanalysis.ExtractNREL(InputFileName : ShortString);
var
  VoltArray, CurrArray : Array Of double;
  blah
Begin

  NRELresult := NRELIVparExtract(VoltArray,CurrArray,NpointsForFitting, fitAlgorithm,     twoOrLessPoints, LVoc, LISc, LVmpp, LImpp); 
```

当编译器到达我的 delphi .dpr 中的开始行时，我得到不同的访问冲突错误，或者我得到 IVparExtract_NREL.dll 未找到

非常欢迎任何建议，干杯，布赖恩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T17:41:59.690

C 类型`double[]`不会*转换*为 Delphi 类型`array of Double`。Delphi 类型是一个*开放数组*，它实际上在内部转换为*两个*参数，一个指向第一个元素的指针，以及一个比数组中元素数少一个的整数。相反，您应该像 C 那样做，并将数组“衰减”为一个简单的指针。

C 类型`double*`不会转换为 Delphi 类型`Double`。它是一个指针，因此将您的参数类型声明为指针。

那应该给你以下声明：

```
function NRELIVparExtract(voltageV, currentA: PDouble; nDataPoints: Integer;
    fitAlgorithim: Word; var twoOrLessPoints: SmallInt;
    Voc, Isc, Vmp, Imp: PDouble): SmallInt; cdecl;
    external 'IVparExtract_NREL.dll'; 
```

如果您的程序找不到 DLL，那么您应该确保您的 DLL 位于操作系统会查找它的位置，例如您的程序目录或系统路径上的某个位置。[MSDN 有关于图书馆搜索顺序的详细信息。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx)

# xml - 忽略scala中的DTD规范

> ID：11315439
> 
> 赞同：17
> 
> 时间：2012-07-03T16:44:20.493
> 
> 标签：xml, scala, dtd

在使用 Scala 解析 xml 文件时，我偶尔会忽略 dtd 规范。我知道这可以很容易地通过 java 接口完成

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

dbf.setValidating(false);
dbf.setFeature("http://xml.org/sax/features/namespaces", false);
dbf.setFeature("http://xml.org/sax/features/validation", false);
dbf.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
dbf.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false); 
```

但是，我不确定如何使用 Scala 的 xml 库轻松做到这一点。如果可能的话，我想继续使用 scala xml 库，因为它要好得多。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T17:39:47.123

这对我有用，但它取决于 XML 解析器的实现。

```
import scala.xml.Elem
import scala.xml.factory.XMLLoader
import javax.xml.parsers.SAXParser
object MyXML extends XMLLoader[Elem] {
  override def parser: SAXParser = {
    val f = javax.xml.parsers.SAXParserFactory.newInstance()
    f.setNamespaceAware(false)
    f.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true);
    f.newSAXParser()
  }
} 
```

另请参阅[this question](https://stackoverflow.com/q/1096285/53013)，这确实是您的问题，但措辞敌对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-24T22:07:18.740

当我们在 xml 文件中有不正确的 DOCTYPE 时，第一个答案不起作用。我的解决方案是：

```
import scala.xml.Elem
import scala.xml.factory.XMLLoader
import javax.xml.parsers.SAXParser
object XML extends XMLLoader[Elem] {
  override def parser: SAXParser = {
    val f = javax.xml.parsers.SAXParserFactory.newInstance()
    f.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
    f.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
    f.newSAXParser()
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:19:36.480

首先，我不是 XML 专家。所以这只是一些猜测......

```
val f = javax.xml.parsers.SAXParserFactory.newInstance()
f.setValidating(false)
val p = f.newSAXParser()
val doc = xml.XML.withSAXParser(p).load(url) 
```

# javascript - Javascript中的语法错误？（尝试动态加载 facebook javascript sdk）

> ID：11315442
> 
> 赞同：0
> 
> 时间：2012-07-03T16:44:28.430
> 
> 标签：javascript, jquery, facebook-graph-api

下面的代码对我来说似乎有效；我真的有语法错误吗？在控制台中运行此代码：

```
$("body").append($("<script />", {
  html: "  window.fbAsyncInit = function() { "+
"    FB.init({"+
"      appId      : '[valid_id]', // App ID"+
"      status     : true, // check login status"+
"      cookie     : true, // enable cookies to allow the server to access the session"+
"      xfbml      : true  // parse XFBML"+
"    });"+
"  };"+
"  (function(d){"+
"     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];"+
"     if (d.getElementById(id)) {return;}"+
"     js = d.createElement('script'); js.id = id; js.async = true;"+
"     js.src = 'https://connect.facebook.net/en_US/all.js';"+
"     ref.parentNode.insertBefore(js, ref);"+
"   }(document));"
})); 
```

回报：

> SyntaxError：输入意外结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:58:58.930

看了一会儿，还是很明显的 ;-)

您所有连接的字符串部分最终都会在**一行**JavaScript 代码中完成 - 所以您不能`// comments`在那里使用，因为上升到哪里？没错，到头了！

要么完全去掉注释，要么使用`/* comment */`语法。

# sql-server - 格式化日期时间值

> ID：11315447
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:44:57.703
> 
> 标签：sql-server, sql-server-2008, tsql

我正在使用以下方法检索日期和时间：

```
SELECT convert(varchar, getdate()) 
```

它显示我的输出为：

```
Jul  3 2012  9:34PM 
```

但客户希望时间和上午/下午之间应该有空间，意味着输出应该是这样的：

```
Jul  3 2012  9:34 PM 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:47:57.940

一方面，[不要在`varchar`没有长度](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)的情况下使用。你可以`STUFF`在这里使用，例如

```
SELECT STUFF(CONVERT(VARCHAR(19), GETDATE()), 18, 0, ' '); 
```

结果：

```
Jul  3 2012 12:48 PM 
```

请注意，这可能会因语言和区域设置而异。

在 SQL Server 2012 中，这更直观一些，但是当日期 < 10 时，月份和日期之间的额外空间很难解决（或者我对 .NET 的理解`format`不足）：

```
SELECT FORMAT(GETDATE(), 'MMM d yyyy hh:mm tt'); 
```

# ruby-on-rails - Rails 应用程序测试入门

> ID：11315448
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:44:59.367
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing

我希望你们告诉他们在测试 Rails 代码时最好的选择。在特殊测试 Mongoid 模型和标准控制器，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:52:06.837

认识你最好的新朋友：

[规范](http://rspec.info/)

[工厂女工](https://github.com/thoughtbot/factory_girl/)

[水豚](https://github.com/jnicklas/capybara/)

[警卫](https://github.com/guard/guard/)和[Spork](https://github.com/sporkrb/spork)

请参阅此 RailsCast：[http: //railscasts.com/episodes/275-how-i-test](http://railscasts.com/episodes/275-how-i-test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:55:31.880

对于蒙古族

[https://github.com/evansagge/mongoid-rspec](https://github.com/evansagge/mongoid-rspec)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:28:16.910

我真的很喜欢这个博客文章系列。它一步一步地展示了您可以在不同的上下文（模型、控制器、集成）中测试的内容，并提供了一个很好的概述。

[http://everydayrails.com/2012/03/12/testing-series-intro.html](http://everydayrails.com/2012/03/12/testing-series-intro.html)

# cocoa - 我可以使用 NSViewController 来提供一个可重用的 NSTableView 并定义列和数据吗？

> ID：11315449
> 
> 赞同：1
> 
> 时间：2012-07-03T16:45:01.143
> 
> 标签：cocoa, interface-builder, nsviewcontroller

我对 Xcode 和 Cocoa 开发还很陌生，所以如果我使用了错误的术语，请见谅。

我有一个窗口，它有一个绑定到 NSArrayController 的 NSTableView。NSTableView 有一些预定义的列，并且 NSArrayController 在我的窗口加载时填充了数据。

这一切都很好，但我现在需要在许多其他窗口中重新使用该功能。经过大量阅读，我认为 NSViewController 是我需要的，它提供了一个我可以在多个 .xib 中的不同窗口中重复使用的对象。

所以我所做的是在 Xcode 中创建了一个新的 NSViewController 子类，它还为该控制器创建了一个新的 xib。

xib 包含一个自定义视图，我在其中放置了我的 NSTableView。

```
@interface KeyViewController : NSViewController

@property (weak) IBOutlet NSTableView *keyTable;

@end 
```

文件所有者类设置为 KeyViewController，视图出口设置为文件所有者。

然后，我将 ViewController 对象放入原始窗口中，并将视图连接到窗口中的新自定义视图

然后我在其属性中设置 ViewController 的笔尖名称。

新视图永远不会显示，视图控制器 initWithNibName 永远不会被调用。

我是错过了重要的事情还是完全错过了情节。您是否可以仅使用界面生成器来执行此操作，还是我需要在代码中分配和初始化视图？

如果我必须在代码中执行此操作，IB 中的 ViewController 对象和它的 Nib Name 属性的目的是什么？

谢谢..

# javascript - HtmlUnit 和 jasmine-maven-plugin 是否支持 HTML5 sessionStorage？

> ID：11315455
> 
> 赞同：0
> 
> 时间：2012-07-03T16:45:21.033
> 
> 标签：javascript, html, unit-testing, htmlunit, jasmine-maven-plugin

我正在尝试在 jasmine-maven-plugin 上测试使用 HTML5 sessionStorage 的 JavaScript 函数。Jasmine 使用 HtmlUnit 来模拟 Web 浏览器。

问题是，当自动化测试在 Maven 构建期间运行时，它说：

> *   错误：预期是间谍，但得到了功能。

我已经尝试过[如何在 FF 中本地处理 sessionStorage（用于测试）](https://stackoverflow.com/questions/9428210/how-to-deal-with-sessionstorage-locally-in-ff-for-testing)，然后出现此错误：

> *   TypeError：类型对象的预期参数，但文件中有类型对象：...

但是，如果我尝试在导入 jasmine.js 的网页上运行 Jasmine，则测试效果很好。我也试过这个[我可以使用 HTMLUnit 访问 HTML5 存储](https://stackoverflow.com/questions/9217182/can-i-access-html5-storages-using-htmlunit)，但没有成功。

一个适用于[http://tryjasmine.com/](http://tryjasmine.com/)而不是 jasmine-maven-plugin 的代码示例：

```
function alertItem(id) {
console.log("start");
var x = sessionStorage.getItem(id);
alert(x);
}

describe("sessionStorage test", function () {    
console = {
    log : function() {},
    error : function() {},
    warn : function() {}
};

var mockup = function() {
    var table = {};
    return {
        getItem: function(key) {
            return table[key];
        },
        setItem: function(key, value) {
            table[key] = value.toString();
        },
        removeItem: function(key) {
            table.pop();
        },      
        clear: function() {
            table = {};
        }
    };
}();

Object.defineProperty(window, 'sessionStorage', {
    value: mockup
});

it("must work", function () {
    console.log("testing...");
    spyOn(sessionStorage, 'getItem').andReturn("my value");
    alertItem("id");
    expect(sessionStorage.getItem).toHaveBeenCalled();
});
}); 
```

有人有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:45:21.573

HTMLUnit 不支持许多 HTML5 功能 - 虽然您的浏览器支持，这就是为什么它可以在浏览器中工作但不作为 HTMLUnit 构建的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T19:12:15.120

正如@Kyle 建议的那样，在 jasmine-maven-plugin 上使用 sessionStorage 和 PhantomJS 而不是 HtmlUnit 有效！

更多信息请访问：[http ://searls.github.io/jasmine-maven-plugin/phantomjs.html](http://searls.github.io/jasmine-maven-plugin/phantomjs.html)

谢谢！

# path-finding - 如何在 cryengine 中为大型实体进行正确的寻路？

> ID：11315456
> 
> 赞同：1
> 
> 时间：2012-07-03T16:45:25.387
> 
> 标签：path-finding, game-ai, cryengine

这几天一直被寻路问题弄糊涂了，好像生成的路径和禁区之间的空间是恒定的。我真的很干，在官方文档中没有找到与我的问题有关的任何内容。

我试过修改“pathfindProperties.xml”，切换不同的“Type”没有区别 放大对撞机的半径

有人可以帮我吗？对此，我真的非常感激！

{我的问题截图：[http](http://www.crydev.net/download/file.php?id=86461) ://www.crydev.net/download/file.php?id=86461 }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:39:50.743

在调查了问题后，我找到了解决方案：

使用多层导航网格，而不是默认导航系统。并通过“NavigationType”属性为actor定义适当的音量。

# jquery - 从悬停功能中排除一个以上的类

> ID：11315458
> 
> 赞同：0
> 
> 时间：2012-07-03T16:45:37.353
> 
> 标签：jquery, function, class, hover

我有以下脚本在我的导航项上为背景图像精灵设置动画：

```
$j(function() {
   $j(".menu-item:not(.current-menu-item) .bottom_nav").hover( function () {
      $j(this).animate( {
         backgroundPosition : '0px 35px'}
      , 300); }
   , function () {
      $j(this).animate( {
         backgroundPosition : '0px 0px'}
      , 600); }
   ); 
}); 
```

我现在想从悬停脚本中排除第二个类。我尝试以以下形式添加它：

```
$j(".menu-item:not(.current-menu-item, .current-menu-parent) .bottom_nav").hover( function () { 
```

和

```
$j(".menu-item:not('.current-menu-item, .current-menu-parent') .bottom_nav").hover( function () { 
```

但两者都打破了悬停脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:47:31.090

jQuery .not()/:not 选择器[文档](http://api.jquery.com/not-selector/)-

> .not() 方法最终将为您提供比将复杂选择器或变量推入 :not() 选择器过滤器更易读的选择。在大多数情况下，这是一个更好的选择。

```
$j(".menu-item").not(".current-menu-item,.current-menu-parent").find(".bottom_nav").hover() 
```

# javascript - 使用 HTML5 和 JavaScript 播放/暂停音频按钮

> ID：11315460
> 
> 赞同：0
> 
> 时间：2012-07-03T16:45:42.703
> 
> 标签：javascript, ipad, html

我正在尝试将音效合并到基于 HTML5 的数字漫画书中，该漫画书将仅针对 iPad 发布。我想使用一个简单的播放/暂停按钮。我整天都在玩，但我仍然在为我有限的 JavaScript 知识而苦苦挣扎。这是漫画和功能规范的链接：

[http://spiritdigital.co.uk/outpost/issue-interactive/05.html](http://spiritdigital.co.uk/outpost/issue-interactive/05.html)

我想要：

*   在特定场景（在本例中为汽车场景）上有一个可点击区域
*   单击时，会播放声音，“播放”图标变为暂停图标
*   在第二次单击时（播放声音时），声音暂停并且图标切换回播放
*   如果声音结束，图标变回播放

到目前为止，我有可点击区域，并且在点击该区域时会播放声音，但我需要您的帮助才能完成其余的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:04:10.683

```
<audio id="myaudio">
    <source src="song.ogg" type="audio/ogg" />
    <source src="song.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
</audio> 
```

现在播放歌曲：

```
var audio = document.getElementById('myaudio');
audio.play(); 
```

暂停：

```
audio.pause(); 
```

要更改 div 的背景图像：

```
var control = document.getElementById('yourdiv');
control.style.backgroundImage = 'pathtoanotherimage'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:43:31.527

这就是你想要的：[DEMO](http://jsfiddle.net/jeschafe/4rWca/)

基本上，当您执行相应的操作时，会触发、播放和暂停两个事件。我只是绑定到这些来切换按钮图像（在这种情况下，我只是更改背景位置，因为它是图像表）。

任何问题让我知道。

# inheritance - 关于在 C++ 中使用带有结构的抽象类的多重继承

> ID：11315461
> 
> 赞同：1
> 
> 时间：2012-07-03T16:45:45.557
> 
> 标签：inheritance, struct, c++-cli

最近我研究了《Inside COM》这本书，我找到了一个代码示例，如下所示：接口定义为结构。IX 和 IY 继承了 IUnknown。CA 类继承 IX 和 IY。据我所知，在这种情况下CA应该有两个虚点指向虚函数，一个属于IX，另一个属于IY？

```
Interface IUnknown  
{
    virtual void QueryInterface() = 0;         
    virtual void AddRef() = 0  
    virtual void Release() = 0;  
};

Interface IX : IUnknown
{
     void X()
     {
        printf("X()\n");
     }
};

Interface IY : IUnknown
{
     void Y()
     {
        printf("Y()\n");
     }
};

class CA : public IX, public IY
{
    public:
    void QueryInterface()
    {
        printf("QueryInterface()\n");
    }

    void AddRef()   
    {
        printf("AddRef()\n");
    }

    void Release()
    {
        printf("Release()\n");
    }
}; 
```

我的问题是为什么 CA 只实现了 QueryInterface()、AddRef()、Release() 并且代码可以工作。为什么不存在QueryInterface()、AddRef()、Release()的实现是属于IX还是属于IY的模棱两可的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:57:35.703

在派生类中声明的函数将覆盖在任何基类中声明的任何匹配的虚函数。因此，例如，`CA::QueryInterface()`将覆盖`IUnknown::QueryInterface()`可通过两个基类子对象访问的。

如果两者都覆盖它并且没有覆盖它，`IX`并且您尝试通过对. 在这种情况下，有两个潜在的重载，没有理由更喜欢任何一个。详细地：`IY``CA``CA`

```
Interface IX : IUnknown
{
     void QueryInterface() { /* do something */ }
};

Interface IY : IUnknown
{
     void QueryInterface() { /* do something else */ }
};

class CA : public IX, public IY 
{
    // inherits both IX::QueryInterface and IY::QueryInterface
};

CA c;
c.QueryInterface();     // ERROR: which QueryInterface is that?
c.IX::QueryInterface(); // OK: specified unambiguously 
```

# ruby-on-rails - Outlook 中的 iCalendar 回复

> ID：11315462
> 
> 赞同：0
> 
> 时间：2012-07-03T16:45:47.767
> 
> 标签：ruby-on-rails, outlook, icalendar

我正在使用将会议请求发送到 Outlook 地址的 Ruby/Rails 应用程序。会议请求还发送到需要为这些会议保留的一些办公资源。

如果资源拒绝会议请求，我希望能够通知某人，但我无法得到他们的回复。当会议显示在 Outlook 中时，它表示组织者不需要响应。

目前，我的 iCalendar 文件生成中有以下行：

```
ATTENDEE;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE:MAILTO:#{attendee.email} 
```

浏览了许多谷歌结果后，我觉得这应该可行。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:24:02.830

由于我的设置方式，Outlook 无法识别 RSVP 值。我将我的电子邮件地址用于组织者和单独的与会者进行测试。一旦我为组织者使用了另一个地址，它就会正确显示。

[这里](http://msdn.microsoft.com/en-us/library/aa487228(v=exchg.65).aspx)和[这里](http://msdn.microsoft.com/en-us/library/aa487358(v=exchg.65).aspx)都是有用的 Microsoft 文档。

# ios - 无法在 Xcode 4.3.3 中设置编译器标志

> ID：11315463
> 
> 赞同：5
> 
> 时间：2012-07-03T16:45:49.333
> 
> 标签：ios, xcode

我正在尝试设置编译器标志以禁用某些文件的弧，当我双击或在其中一个文件上按 Enter 时我没有得到对话框。它发生在一个新项目和旧项目中，我之前已经设置了编译器标志。在我按下回车键并失去焦点后，它所做的一切都会变成灰色。有没有其他人有同样的问题，或者我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T17:52:22.177

我想到了。我认为这是因为我正在使用带有视网膜的 Macbook Pro，分辨率设置为更多文本。当我在 Xcode 中启用助手编辑器并按 Enter 键更改编译器标志时，对话框出现在另一侧右上角几乎看不到。希望下一个版本的 Xcode 将支持视网膜显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:01:18.317

我仍然看不到对话框，但完全是盲目的。

复制“-fno-objc-arc”，然后在 Xcode 中，Enter -> CMD+V -> Enter... 魔术就完成了。:)

谢谢大家！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T07:39:32.277

我发布这个以防有人在 XCode 5 上遇到同样的问题时偶然发现这个答案，并且上述解决方案都不起作用，就像我一样。

就我而言，问题是工作空间数据的某种损坏。通过删除项目目录中的 xcshareddata/ xcuserdata/ 和 project.xcworkspace/ 目录解决了该问题。

从终端：

```
cd <project_name>.xcodeproj
rm -rf xcshareddata/ xcuserdata/ project.xcworkspace/ 
```

然后重新启动 XCode，问题应该会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:52:28.707

此外，如果您使用的是没有输入键的 macbook pro（返回键不会调出编译器标志框）并且拼命地尝试一次标记多个文件......您只需要点击**shift + fn + return**。只是 fn + return 不会工作 - 至少对我来说。

# jquery - 与jquery中的文本成比例地计算div的宽度？

> ID：11315464
> 
> 赞同：0
> 
> 时间：2012-07-03T16:45:51.767
> 
> 标签：jquery

我已经构建了这段不那么棒的 javascript 来根据增量的字符数计算 div 的宽度。

```
 $(".tweet-text").each(function() {
  var tweetText = $(this);
    if(tweetText.text().length > 30) {
      tweetText.css("width", "200px");
    }
    if(tweetText.text().length > 60) {
      tweetText.css("width", "240px");
    }
     if(tweetText.text().length > 80) {
      tweetText.css("width", "280px");
    }
    if(tweetText.text().length > 100) {
      tweetText.css("width", "310px");
    }
    if(tweetText.text().length > 120) {
      tweetText.css("width", "360px");
    }
    if(tweetText.text().length > 130) {
      tweetText.css("width", "400px");
    }
  }); 
```

有没有办法精确计算 tweetText 的宽度并与字符数成比例？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:03:40.303

尝试这个：

```
$( '.tweet-text' ).each(function () {
    var $span = $( this ).wrapInner( '<span>' ).children( 'span' );
    $( this ).css( 'width', $span.width() );
    $span.replaceWith( $span.contents() );
}); 
```

**现场演示：http:** [//jsfiddle.net/N8xNM/2/](http://jsfiddle.net/N8xNM/2/)

（在我的演示中，每个段落只要它需要的长度，或者换句话说，只要它的文本内容。）

此外，在元素上设置`white-space: nowrap`CSS 。`.tweet-text`

```
.tweet-text {
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:03:29.123

您在代码中面临的问题之一是每个`if`块都将被评估；而且您只是在评估文本的长度是否大于给定数字，而不是评估长度是否介于给定的下限*和*上限之间。

为了确保`if`在给定条件匹配后停止评估 s 使用`if`/ `else if`，并评估长度是否在下限和上限范围内，我测试了第二个条件。

```
$('.tweet-text').each(
    function() {
        var tweetText = $(this),
            strLength = tweetText.text().length;
        if (strLength > 30 && strLength < 60) {
            tweetText.css("width", "200px");
        }
        else if (strLength >= 60 && strLength < 80) {
            tweetText.css("width", "240px");
        }
        else if (strLength >= 80 && strLength < 100) {
            tweetText.css("width", "280px");
        }
        else if (strLength >= 100 && strLength < 120) {
            tweetText.css("width", "310px");
        }
        else if (strLength >= 120 && strLength < 130) {
            tweetText.css("width", "360px");
        }
        else if (strLength >= 130) {
            tweetText.css("width", "400px");
        }
    });​ 
```

[更新了 JS Fiddle 演示](http://jsfiddle.net/davidThomas/P7W3v/1/)。

# android - 向上指示器不显示

> ID：11315474
> 
> 赞同：3
> 
> 时间：2012-07-03T16:46:41.690
> 
> 标签：android

我目前正在尝试在我的 Android 应用中启用[导航。](http://developer.android.com/guide/topics/ui/actionbar.html#Up)为此，我按照教程并在我的活动中实现了必要的代码：

## SettingsActivity.java

```
package de.ntraum.arcon;

import android.content.Intent;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.view.MenuItem;

public class SettingsActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setHomeButtonEnabled(true);
        addPreferencesFromResource(R.xml.settings);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            startActivity(new Intent(SettingsActivity.this, MainActivity.class)
                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

} 
```

如果相关，这里是`AndroidManifest.xml`and `styles.xml`：

## AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.ntraum.arcon"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Light" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SettingsActivity"
            android:exported="false"
            android:label="@string/title_activity_settings" >
            <intent-filter>
                <category android:name="android.intent.category.PREFERENCE" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

## 样式.xml

```
<resources>

    <style name="Light" parent="android:Theme.Holo.Light.DarkActionBar" />

    <style name="Dark" parent="android:Theme.Holo" />

</resources> 
```

## 问题

问题是，当访问活动时，操作栏中的向上指示器丢失了。尽管如此，导航实际上是有效的（它让我回到了`MainActivity.class`），它只是一个没有正确显示的小指示器。

![缺少指示的活动的屏幕截图](../Images/f1722459b64074d08370bc5352634f20.png)

到目前为止，我已经在自己的设备和模拟器中对其进行了测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T16:54:06.720

文档说要在您的操作栏上调用[setDisplayHomeAsUpEnabled(true) 。](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayHomeAsUpEnabled%28boolean%29)您实际上是在调用不同的方法，`setHomeButtonEnabled`因此请尝试从文档中添加调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T06:52:14.677

您还可以在 AndroidManifest.xml 中使用 XML 设置导航“向上”功能，而不是通过编程方式对其进行编码。如果您有多个活动都具有向上导航功能，那么在一个地方执行此操作非常有帮助。

```
<activity
            android:name=".SettingsActivity"
            android:exported="false"
            android:label="@string/title_activity_settings" 
            android:parentActivityName=".MainActivity" >
            <!-- Parent activity meta-data to support 4.0 and lower -->
            <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".MainActivity" />
            <intent-filter>
                <category android:name="android.intent.category.PREFERENCE" />
            </intent-filter>
</activity> 
```

# ruby-on-rails - 如何管理时间/日期计划？

> ID：11315476
> 
> 赞同：1
> 
> 时间：2012-07-03T16:46:51.007
> 
> 标签：ruby-on-rails, ruby

我正在组合一个工具，允许用户为一类学生生成报告。我想合并报告“期间”或“时间表”，但我不确定如何这样做。

本质上，我希望用户为每个班级分配一个评估“时间表”，即从一个月的 5 号到下个月的 4 号。因此，报告将（并且必须）连续运行。但是，我确实希望用户能够临时调整学生日程的结束时间。

我想创建一个“时间表”表，但我不确定如何存储开始日期和结束日期，以便可以重复循环。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:51:43.130

I've used [ice_cube](http://seejohnrun.github.com/ice_cube/) ([GitHub project](https://github.com/seejohnrun/ice_cube/)) with some success. The module handles recurrences well, it's got its own serializer/deserializer, and it's well-documented.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:52:47.780

You could create a report model/table with a start day and end day (such as 4 and 5) and use that to set the date with. This would persist to the database normally, but for a one off report that doesn't need to be stored, you could just create a new report with a different end date.

I.E., you have a reports table for persistent reports (A report for an entire class of students), but don't save your individual reports.

# java - 在 Eclipse 树中的树项旁边添加图标按钮

> ID：11315477
> 
> 赞同：1
> 
> 时间：2012-07-03T16:46:59.093
> 
> 标签：java, eclipse, tree, rcp, jface

我想知道如何在树项的右侧添加一个充当按钮的图标

选择此图标应该与选择树项本身具有不同的操作。

我怎样才能做到这一点？

例子：

考虑这是主树

[http://www.eclipse.org/articles/Article-TreeViewer/images/main.gif](http://www.eclipse.org/articles/Article-TreeViewer/images/main.gif)

我想在一些树项标签的右侧添加图标，例如

[http://store2.up-00.com/June12/8QI59630.gif](http://store2.up-00.com/June12/8QI59630.gif)

就像我单击黑色星形图标时一样，我做出的动作与选择树项不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:15:53.907

树小部件中不存在此类工具，但您可以使用一种称为 owner-draw 的技术自己实现此功能，您可以在其中接管树项目的绘制。请参阅 OwnerDrawLabelProvider。要响应点击，您甚至需要聆听鼠标按下的声音，并在调用您的操作之前检查坐标是否与按钮的边界匹配。

# iphone - 调用 gainPermanentIDsForObjects 时出现线程错误

> ID：11315479
> 
> 赞同：1
> 
> 时间：2012-07-03T16:47:01.297
> 
> 标签：iphone, objective-c, ios, core-data

我正在创建一个新的 NSManagedObject 并将其插入到具有并发类型私有队列的上下文中（因此它在后台线程上运行）。

在我保存之前，我称之为：

```
[appDelegate.backgroundMOC obtainPermanentIDsForObjects:
       [NSArray arrayWithObject:newObject] error:&error]; 
```

然后我保存：

```
[appDelegate.backgroundMOC save:&err]; 
```

但是，我遇到了 EXC_BAD_ACCESS 崩溃。查看堆栈跟踪，我看到：

```
0 semaphore_wait_trap
7-[NSManagedObjectContentSave:] 
```

我猜有问题的线是`semaphore_wait_trap`，但我不确定这是怎么引起的。

**如果我注释掉该行`obtainPermanentIDsForObjects`，问题就会消失。**

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:34:42.370

由于获取对象 ID 的错误 ( [http://openradar.appspot.com/11478919](http://openradar.appspot.com/11478919) )，您需要将所有新创建的对象传递到`-[NSManagedObjectContext obtainPermanentIDsForObjects:error:]`.

# regex - JavaScript RegEx，与 OR 的零长度匹配（向前和向后看，也许）

> ID：11315480
> 
> 赞同：2
> 
> 时间：2012-07-03T16:47:03.087
> 
> 标签：regex, lookaround

我有这个正则表达式`/\b\d\b/`，可以简单地匹配一个数字单词。

现在我想添加下划线字符作为单词边界的替代，所以我也想匹配数字`"_1_"`，同时保持下划线为零长度匹配（如 \b，所以我不想要比赛中的_）。

我的情况是使用捕获组并不理想。

我尝试了一些积极的向前/向后的技巧，向前看似乎有效，而向后看却没有。尝试做可选的向前/向后看，并做类似的事情`_|\b`，但我找不到一个理想的解决方案。

由于对高级正则表达式技巧不是很了解，我想在使用 2 个正则表达式之前先问一下 :)

这将在 JavaScript 中执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:50:43.917

`(?<=\b|_)\d(?=\b|_)`

```
(?<=    # Positive look-behind
\b      # Word boundary
|       # Or
_       # Underscore
)       # End group
\d      # Digit
(?=     # Positive look-ahead
\b|_)   # Word boundary or underscore 
```

它将匹配您的单个数字，并将使用单词边界 ( `\b`) 或下划线 ( `_`) 进行匹配。

这是零长度，因此它不会将匹配的数字分组。

[在这里玩正则表达式](http://regexr.com?31e8d)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-28T19:36:54.603

由于后视在 JS 中不起作用，您可以只匹配您的主要正则表达式，在您的情况下`\d`，然后手动检查边界。

```
const manualBoundaries = /\d/g
const matches = [];
while ((match = manualBoundaries.exec(str)) !== null) {
  const m = match[0]
  const i = match.index
  if ((i == 0 || str[i - 1].match(/(\W|_)/)) &&
      (i + m.length == str.length || str[i + m.length].match(/(\W|_)/)))
    matches.push(m)
} 
```

或者更简洁地说，用假替换

```
const matches = [];
str.replace(manualBoundaries, (m, i) => {
    if ((i == 0 || str[i - 1].match(/(\W|_)/)) &&
        (i + m.length == str.length || str[i + m.length].match(/(\W|_)/)))
      matches.push(m);
}); 
```

在这里试试：[https ://jsfiddle.net/djjeck/mg2gzpf1/](https://jsfiddle.net/djjeck/mg2gzpf1/)

# facebook - 使用 Flash builder 获取 Facebook Mobile 应用程序的好友列表

> ID：11315481
> 
> 赞同：0
> 
> 时间：2012-07-03T16:47:07.903
> 
> 标签：facebook, apache-flex, facebook-graph-api, adobe, flash-builder

好吧，所以我的最后一个问题真的很模糊，我没有尽可能多地描述它。基本上，这就是我想要发生的事情：1）获取用户朋友列表 2）在任何类型的容器中显示它们。我去查看图形 API 文档，但考虑到我是一个视觉学习者，这并没有真正帮助我。为了获得移动应用程序的基本功能，我遵循了一些教程，这些教程让我在应用程序中实现其他更复杂的功能时陷入了困境。我将在此处列出移动应用程序的链接：[第 1](http://blogs.adobe.com/flexdoc/2011/10/create-a-mobile-facebook-flex-application-in-flash-builder-4-5-part-1.html)部分，[第 2 部分](http://blogs.adobe.com/flexdoc/2011/10/create-a-mobile-facebook-flex-application-in-flash-builder-4-5-part-2.html). 这些教程对我帮助很大。但是当它们结束并且我不得不开始自己实现功能时，我有点停滞不前。我一直在寻找和寻找如何做到这一点，但实际上找不到任何有用的东西，因为它们都是用于桌面应用程序的。我还查看了 Facebook API 提供的示例代码以供参考。但是没有一个适用于 flex Mobile，而且您似乎还必须编写与他们完全相同的代码才能使这些功能正常工作。好吧。所以再一次，我只想能够有一个朋友列表来显示。我会担心以后得到朋友的详细信息。我想我可能能够做到这一点。另外，我将发布我所有的代码，因为我现在绝不会保护它。我会说一件事。我绝不会要求有人为我编写代码。我只是一个非常依赖视觉的学习者。但我认为，如果我能以更简单的方式解释实现特性的过程，我将能够照顾好我自己的。这也带来了另一个问题。因为我是一个视觉人。使用 flash 代替 Flash Builder 会更适合我吗？无论如何。你不必回答这个问题。在我写这个问题的时候突然出现了。如果你对我的代码有任何建设性的批评，我很乐意。最后一件事（我很抱歉漫无边际）如果你想给我发邮件，你可以给我发邮件到 Shandan_Spencer@live.com。我在这里先向您的帮助表示感谢！但我认为，如果我能以更简单的方式解释实现特性的过程，我将能够照顾好我自己的。这也带来了另一个问题。因为我是一个视觉人。使用 flash 代替 Flash Builder 会更适合我吗？无论如何。你不必回答这个问题。在我写这个问题的时候突然出现了。如果你对我的代码有任何建设性的批评，我很乐意。最后一件事（我很抱歉漫无边际）如果你想给我发邮件，你可以给我发邮件到 Shandan_Spencer@live.com。我在这里先向您的帮助表示感谢！但我认为，如果我能以更简单的方式解释实现特性的过程，我将能够照顾好我自己的。这也带来了另一个问题。因为我是一个视觉人。使用 flash 代替 Flash Builder 会更适合我吗？无论如何。你不必回答这个问题。在我写这个问题的时候突然出现了。如果你对我的代码有任何建设性的批评，我很乐意。最后一件事（我很抱歉漫无边际）如果你想给我发邮件，你可以给我发邮件到 Shandan_Spencer@live.com。我在这里先向您的帮助表示感谢！在我写这个问题的时候突然出现了。如果你对我的代码有任何建设性的批评，我很乐意。最后一件事（我很抱歉漫无边际）如果你想给我发邮件，你可以给我发邮件到 Shandan_Spencer@live.com。我在这里先向您的帮助表示感谢！在我写这个问题的时候突然出现了。如果你对我的代码有任何建设性的批评，我很乐意。最后一件事（我很抱歉漫无边际）如果你想给我发邮件，你可以给我发邮件到 Shandan_Spencer@live.com。我在这里先向您的帮助表示感谢！

这是代码：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           applicationDPI="160" creationComplete="application1_creationCompleteHandler(event)"
           currentState="loggedout"
           width.loggedin="392" height.loggedin="442">
<fx:Style source="beta.css"/>
<fx:Script>
    <![CDATA[
        import com.facebook.graph.FacebookMobile;
        import com.facebook.graph.controls.Distractor;
        import com.facebook.graph.core.FacebookURLDefaults;
        import com.facebook.graph.data.Batch;
        import com.facebook.graph.net.FacebookRequest;
        import com.facebook.graph.utils.FacebookDataUtils;

        import mx.collections.ArrayList;
        import mx.core.UIComponent;
        import mx.events.FlexEvent;

        public var permissions:Array = ["user_photos","user_birthday","read_stream","publish_stream","read_friendslists","manage_friendslist"]; 
        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            FacebookMobile.init("APP_ID", onLogin)
        }

        protected function submitPost():void
        {
            FacebookMobile.api("/me/feed",submitPostHandler,{message:statusInput.text}, "POST");
        }

        protected function submitPostHandler(result:Object,fail:Object):void
        {
            statusInput.text="";
            FacebookMobile.api("/me/statuses",getStatusHandler);
        }

        protected function getStatusHandler(postsuccess:Object, fail:Object):void
        {
            lblStatus.text=postsuccess[0].message;
        }

        protected function login():void{
            var facebookWebView:StageWebView = new StageWebView();
            facebookWebView.viewPort = new Rectangle(0,0,stage.width, stage.height-100);
            FacebookMobile.login(onLogin, this.stage,permissions, facebookWebView);
        }

        protected function onLogin(success:Object, fail:Object):void{
            if(success){
                currentState="loggedin";
                nameLbl.text=success.user.name;
                imgUser.source=FacebookMobile.getImageUrl(success.uid,"small");
                birthdayLbl.text=success.user.birthday;
                FacebookMobile.api("me/statuses",getStatusHandler);
            }
        }

    ]]>
</fx:Script>

<s:states>
    <s:State name="loggedin"/>
    <s:State name="loggedout"/>
</s:states>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Button id="loginoutBtn" x="244" y="13" label="Log In"
          x.loggedin="228" y.loggedin="10" label.loggedin="Log out"
          click.loggedout="login()"/>
<s:Label id="nameLbl" includeIn="loggedin" x="67" y="11" width="97" height="43"/>
<s:Image id="imgUser" includeIn="loggedin" x="8" y="9" width="50"/>
<s:Label id="birthdayLbl" includeIn="loggedin" x="66" y="86" width="96"/>
<s:Label id="lblStatus" includeIn="loggedin" x="10" y="135" width="154" height="58" />
<s:TextInput id="statusInput" includeIn="loggedin" x="10" y="230" height="40"/>
<s:Button includeIn="loggedin" x="172" y="278" width="115" height="32" label="Submit"
          click="submitPost()"/>

<s:Button x="10" y="147" width="157" label="Post photo" includeIn="loggedin"
          x.loggedin="10" y.loggedin="278" width.loggedin="113" height.loggedin="32"/>
<s:List includeIn="loggedin" x="170" y="61" width="212" height="161" itemRenderer="friendsRender"></s:List> 
```

![设计视图][3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:48:44.547

@山丹斯宾塞

请下载 Graph API 1.8.1 示例：

[http://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Examples_1_8_1.zip](http://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Examples_1_8_1.zip)

它有：

FriendsList_flash

FriendsList_flex

FriendsListMobile_Flash

[http://code.google.com/p/facebook-actionscript-api/source/browse/trunk/examples/?r=342](http://code.google.com/p/facebook-actionscript-api/source/browse/trunk/examples/?r=342)

我想这对你会有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:14:50.057

假设您有 as3 的 facebook mobile，您可以使用以下功能：

```
FacebookMobile.api("/me/friends",onApiCallFriends);

protected function onApiCallFriends(response:Object, fail:Object):void
{
if (response)
{   
      var friends:Array = response as Array;
    }
} 
```

应该是这样的。

# c# - 多线程集合锁类型

> ID：11315487
> 
> 赞同：2
> 
> 时间：2012-07-03T16:47:33.940
> 
> 标签：c#, .net

下面的代码段在我们锁定的方式上有区别吗？

```
public Hashtable mySet= new Hashtable() //mySet is visible to other threads.
lock (mySet) 
   { 
       mySet.Add("Hello World"); 
   } 
```

和

```
public Hashtable mySet= new Hashtable();
lock(mySet.SyncRoot)
    { 
       mySet.Add("Hello World"); 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:49:45.537

由于传递给的对象`lock`将仅用作“标志持有人”，这不会有任何区别。

请看[这个](https://stackoverflow.com/questions/59590/lock-keyword-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:54:12.413

`lock`实际上并没有锁定有问题的对象，因此使用哪个对象没有区别。相反，它使用该对象来建立一个协议，只要所有线程都使用同一个对象，该协议就保证只有一个线程将执行由该锁保护的代码。

您可以将对象想象为脱口秀节目中的麦克风。谁拿着麦克风是唯一被允许说话的人（我知道在某些节目中并不总是这样，但无论如何这就是想法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:58:47.090

根据[此处](http://msdn.microsoft.com/en-au/library/system.collections.icollection.syncroot.aspx)的 MSDN 文档，只有在集合的 SyncRoot 上的锁才能保证线程安全。

> 通过集合进行枚举本质上不是线程安全的过程。即使一个集合被同步，其他线程仍然可以修改该集合，这会导致枚举器抛出异常。为了保证枚举过程中的线程安全，您可以在整个枚举过程中锁定集合，也可以捕获其他线程更改导致的异常。

# ubuntu - 告诉 LAN DNS 服务器计算机名称是什么

> ID：11315489
> 
> 赞同：0
> 
> 时间：2012-07-03T16:47:36.173
> 
> 标签：ubuntu, configuration, dns

假设您在公司 LAN 中有一台新安装的 Ubuntu 12.04 计算机，名称为`new-box`，您可以在安装 Ubuntu 时设置该名称。您希望允许其他用户从您的计算机名称中解析您的 IP 地址，例如

```
#coworker can do:
$ ssh coworker@new-box
#instead of:
$ ssh coworker@192.168.2.123 
```

如何配置您的系统以告诉 DNS 服务器您的计算机名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:51:12.247

您需要在`/etc/hosts`机器上输入一个条目，该条目将按您的预期名称引用该机器。此文件包含覆盖的 DNS 查找列表

您需要添加的条目如下

```
192.168.2.123 new-box 
```

现在，每当要求 DNS 解析`new-box`您想要的 IP 地址时，都会指定。

编辑：

对于更具可扩展性的 DNS 方法，您应该使用类似[Dnsmasq](https://wiki.archlinux.org/index.php/Dnsmasq)

这将允许您将 dns 请求从您的计算机发送到此 LAN DNS 服务器，该服务器将返回本地网络上的主机名。

1.  您将需要设置服务器。最好阅读在线文档，因为您的实施将非常定制。

2.  在为所有这些计算机提供服务的路由器上，您需要修改 DCHP，将主名称服务器设置为将运行 Dnsmasq 的计算机的 IP 地址。

3.  开始使用本地主机名

# php - 来自同一用户表的复杂 Zend 查询

> ID：11315491
> 
> 赞同：0
> 
> 时间：2012-07-03T16:47:44.310
> 
> 标签：php, mysql, sql, zend-framework, zend-db

我有一组相当独特的条件和订单，我需要从“卖家”表中为我在 Zend 框架中构建的应用程序检索数据。

客户基本上是在请求一个应用程序，其中目录页面以非常特殊的顺序列出卖家，即：

1.  在过去 7 天内获得批准的卖家（然后通过下面的 #4 订购）
2.  然后，在网站上为升级功能付费并且超过 7 天的卖家（然后通过下面的 #4 订购）
3.  然后，超过 7 天和超过 7 天的卖家（然后通过下面的#4 订购）
4.  对于上述所有内容，二级订单将是他们的发布日期，然后是企业名称的 alpha

我试图找出最有效的方法来编写一个动作助手，它将按照上面正确的顺序返回数据，我知道我的一些视图只需要 1,2（和 4），而应用程序中的其他视图将需要全部 4。

现在，我一直在编写两个或三个单独的查询，并将它们传递给`partialloop`视图内的 2 或 3 ，但我努力编写正确的代码，并且想将我的 3 个查询组合成一个我可以传递的对象到一个部分循环，或者....写一个查询。如何才能做到这一点？

这是我现在的帮手：

```
class Plugin_Controller_Action_Helper_ListSellers extends Zend_Controller_Action_Helper_Abstract
{

//put your code here
public function direct($regulars = false, $filter = false)
{
    $dateMod = $this->dateMod = new DateTime();
    $dateMod->modify('-7 days');
    $formattedDate = $dateMod->format('Y-m-d H:i:s');
    // get sellers initialized in last 7 days
    $sellerTable = new Application_Model_DbTable_Seller();

        // get sellers initialized in last 7 days
        $select = $sellerTable->select()->setIntegrityCheck(false);
        $select->from(array('b' => 'seller'),array('sellerID', 'businessName','sellerPicture'));
        // select firstName, lastName, picture from user table, and businessName and sellerID from seller table.  All records from seller table
        $select->join(array('u' => 'user'), 's.userID = u.userID', array('firstName', 'lastName'));
        $select->order('s.launchDate DESC','s.businessName ASC');
        $select->where('s.active = 1 AND s.contentApproval = 1 AND s.paymentApproval = 1');
        $select->where('s.launchDate > ?', $formattedDate);
        if($filter){ $select->where('s.categoryID = ?', $filter);}
        $newSellers = $sellerTable->fetchAll($select);

        $query = $sellerTable->select()->setIntegrityCheck(false);
        $query->from(array('b' => 'seller'),array('sellerID', 'businessName','sellerPicture'));
        // select firstName, lastName, picture from user table, and businessName and sellerID from seller table.  All records from seller table
        $query->join(array('u' => 'user'), 's.userID = u.userID', array('firstName', 'lastName'));
        $query->order('s.launchDate DESC','s.businessName ASC');

        $query->where('s.active = 1 AND s.contentApproval = 1 AND s.paymentApproval = 1 AND s.featured = 1');
        $query->where('s.launchDate < ?', $formattedDate);
        if($filter){ $select->where('s.categoryID = ?', $filter);}
        $featuredSellers = $sellerTable->fetchAll($query);

    if($regulars){
        $where = $sellerTable->select()->setIntegrityCheck(false);
        $where->from(array('b' => 'seller'),array('sellerID', 'businessName','sellerPicture'));
        // select firstName, lastName, picture from user table, and businessName and sellerID from seller table.  All records from seller table
        $where->join(array('u' => 'user'), 's.userID = u.userID', array('firstName', 'lastName'));
        $where->order('s.launchDate DESC','s.businessName ASC');

        $where->where('s.active = 1 AND s.contentApproval = 1 AND s.paymentApproval = 1 AND s.featured IS NULL');
        $where->where('s.launchDate < ?', $formattedDate);
        $regularSellers = $sellerTable->fetchAll($where);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:21:30.790

我看不到您的查询有任何限制。那么这是否意味着您真的想要选择*所有*匹配的记录？出于可扩展性的原因，我猜答案应该是否定的，会有一些限制。在这种情况下，您可能只需要执行 3 个不同的查询。

但是，如果没有要应用的限制，那么您可以执行一个简单的查询来选择所有未过滤和未排序的卖家，并在视图助手或仅在您的视图中进行排序和过滤。

无论如何，我建议不要将数据库查询放在控制器层中，假设您想使用Zend 构建的[模型-视图-控制器模式。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)控制器应该很薄。您的模型应该处理所有数据库查询，并将结果吐出到您的控制器中。我广泛使用[数据映射器模式](http://martinfowler.com/eaaCatalog/dataMapper.html)。就像是：

```
$mapper = new Application_Model_SellerMapper();

$newSellers = $mapper->fetchNewSellers();
$featuredSellers = $mapper->fetchFeaturedSellers();
$regularSellers = $mapper->fetchRegularSellers(); 
```

您的每个`fetchX()`方法都将返回一个实例数组`Application_Model_Seller`，而不是`Zend_Db_Table_Row`实例。

通过这种方式，您可以更好地维护[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)和[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，从而获得更易于维护的代码。即使您是该项目长期的唯一开发人员，从现在起 6 个月后，您也不会记得您写了什么以及为什么写了。如果其他人参与该项目，清晰度就变得*非常*重要。

# c# - 什么会阻止一个类被序列化？

> ID：11315493
> 
> 赞同：2
> 
> 时间：2012-07-03T16:47:47.640
> 
> 标签：c#, serialization, xml-serialization

什么会阻止一个类被序列化？

我知道默认情况下一个类是不可序列化的，因为启用序列化会引入开销。但是某些类的特性会阻止它们被序列化吗？

如果它是相关的，我正在专门考虑 XML 序列化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T16:49:57.000

有些对象无法序列化。如果对象包含外部资源的句柄，那么这些通常无法以有意义的方式序列化。

例子：

*   打开 TCP 连接。
*   交易对象。
*   打开文件句柄。

# javascript - 用于日期格式化的 JavaScript 实用程序

> ID：11315497
> 
> 赞同：1
> 
> 时间：2012-07-03T16:47:58.570
> 
> 标签：javascript, date

我想使用一个实用功能，我可以使用如下：

```
var d = 新日期（）；
formatDate(d, "YYYY-mm-dd HH:MM:ss");

```

我知道我可以自己实现这个功能，但我想使用一些“标准”的东西。此外，我希望这个函数在客户端和服务器端（即在浏览器和`node.js`）中运行，而不是带来不必要的依赖。（例如，我不想使用`jQuery`函数）

有很多关于日期格式的问答，但我仍然不确定是否有实用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:03:35.160

这个轻量级库正是您所需要的。只需删除它不需要的部分。

[http://momentjs.com/](http://momentjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:52:47.030

Use [date.js](http://www.datejs.com/) with the folowing code:

```
var d = Date.today().set({ day: 15, hour: 8, minute: 30 });
d.toString("YYYY-mm-dd HH:MM:ss"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:49:31.157

查看

## [日期.js](http://www.datejs.com/)

它应该做你正在寻找的

# documentation-generation - Sphinx：支持突出显示的语言列表？

> ID：11315504
> 
> 赞同：19
> 
> 时间：2012-07-03T16:48:45.713
> 
> 标签：documentation-generation, python-sphinx, pygments

我将 Sphinx 用于代码文档并在代码中使用多种语言，我想为所有代码设置突出显示。Sphinx 简要提到了它支持的一些语言（[在此页面上](http://sphinx.pocoo.org/markup/code.html)），然后提到它使用[Pygments](http://pygments.org/)进行词法分析和突出显示。筛选 Sphinx 和 Pygments 的文档让我不知道如何做诸如高亮 Objective-c 代码之类的事情。

Pygments 确实提到了它支持的语言列表，但是[这](http://pygments.org/languages/)并没有告诉我必须在 Sphinx（.rst 文件）中使用的确切语法来告诉代码块突出显示特定语言。例如，要突出显示 c++ 代码，您只需在代码块之前使用它：

`.. highlight:: c++`

然而，在尝试了这些之后，我似乎无法突出显示 Objective-C 代码：

```
.. highlight:: Objective-C
.. highlight:: objective-c
.. highlight:: Obj-C
.. highlight:: obj-c 
```

任何人都可以向我提供语言列表（您会在文档中引用它们）吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2019-02-16T09:47:30.823

`pygmentize -L lexers`列出所有支持的词法分析器。

*   [http://pygments.org/languages/](http://pygments.org/languages/)
*   [http://pygments.org/docs/lexers/](http://pygments.org/docs/lexers/)
*   [http://pygments.org/docs/cmdline/#getting-help](http://pygments.org/docs/cmdline/#getting-help)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T18:08:23.090

据我所知，列表在文件`pygments/lexers/_mapping.py`中，在（自动生成的）字典`LEXERS`中。在我的副本中，我看到一条线

```
'ObjectiveCLexer': ('pygments.lexers.compiled', 'Objective-C', ('objective-c', 'objectivec', 'obj-c', 'objc'), ('*.m',), ('text/x-objective-c',)), 
```

我认为这应该意味着任何标签`objective-c`、`objectivec`、`obj-c`或`objc`应该可以工作，只要您的 Pygments 版本是最新的。他们为我工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-01T09:38:19.500

如果你安装 pygments 模块。您可以使用此脚本获取支持的荧光笔列表：

```
from pygments.lexers import get_all_lexers

lexers = get_all_lexers()
for lexer in lexers:
        print "-\t" + lexer[0] + "\n"
        print "\t-\t" + "\n\t-\t".join(lexer[1]) + "\n" 
```

输出的第一级缩进将是通用名称，第二级将是您可以使用的荧光笔的短名称。

**示例输出**

*   Debian 资源列表

    *   来源清单
    *   来源.list
*   德尔福

    *   德尔福
    *   帕斯
    *   帕斯卡
    *   对象帕斯卡

[资源](http://haisum.github.io/2014/11/07/jekyll-pygments-supported-highlighters/)

# eclipse-juno - 在 Eclipse 中，是否有适用于各种内容的通用 Provider？

> ID：11315509
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:48:53.807
> 
> 标签：eclipse-juno

在 Eclipse 中，我想枚举每个注册提供者的所有内容。有这样的接口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:35:59.763

至少在我的安装中根本不搜索文件。取而代之的是相同的旧[“Ctrl-3”快速访问](http://archive.eclipse.org/eclipse/downloads/drops/R-3.3-200706251500/whatsnew/eclipse-news-part1.html)，它允许您通过键入其名称来访问 UI 元素。尝试“pack”以查看它列出了包资源管理器和类似的东西。

为了快速定位文件，您应该使用 Ctrl-R（打开资源）或使用普通的文件搜索。

# facebook - Facebook FQL 针对相同的权限返回不同的数据

> ID：11315513
> 
> 赞同：2
> 
> 时间：2012-07-03T16:49:41.257
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试使用 FQL 获取用户的提要。我使用以下语句（带上视频帖子）：

```
SELECT created_time, post_id, actor_id, message, attachment, likes.count, likes.friends,
comments.count FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE
uid=me() AND type='newsfeed') AND is_hidden = 0 AND 'video' in attachment 
```

我请求了“read_stream”权限并获得了用户的令牌

我的问题：当使用“Graph API Explorer”（facebook 的页面）时，我收到了我的一个朋友“点赞”的帖子——该帖子的作者不是我的朋友。

但是，当使用我自己的应用程序的 access_token（不是 Graph API Explorer 的令牌）时，我看不到那个帖子！

我使用“https://graph.facebook.com/me/permissions?access_token=”来检查两个令牌是否具有相同的权限....顺便说一句，我能够使用“WHERE post_id=”获取帖子- 所以它似乎也不是用户权限问题。

任何想法？？？？我被困在这里了！！！

麻烦………………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T00:05:55.007

在 Graph API Explorer 页面上，如果您想准确查看您将在应用程序中获得的结果，您必须指定您获得的访问令牌是针对应用程序的。您可以通过单击页面右上角的下拉菜单并选择您的应用程序来执行此操作。

默认情况下，它可能会在下拉菜单中显示“Graph API Explorer”，因此即使权限相同，您也会得到与应用程序不同的结果。

# excel - 为什么我的 PivotFilters 不能工作，为什么我的宏只能在我的计算机上工作？

> ID：11315514
> 
> 赞同：0
> 
> 时间：2012-07-03T16:49:42.223
> 
> 标签：excel, templates, filter, pivot-table, vba

我正在使用 Excel 2010 并在 VBA 中编写宏。我有 2 个问题：1-我的大多数 PivotFilters 实际上并没有过滤，并且 2-我已经为启用 Excel 宏的模板制作了这个宏，该模板在我的机器上运行良好，但是如果通过电子邮件发送模板并尝试运行另一台机器上的宏我得到错误：对象pivotcache的方法createpivottable失败。

```
Sub RunResourceReport()

' Create the Resource Requests Pivot Table
ActiveWorkbook.Sheets("CP Monthly Data").Select
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R486C15", Version:=xlPivotTableVersion14).CreatePivotTable _
    TableDestination:="", TableName:="Resource Requests", DefaultVersion _
    :=xlPivotTableVersion14
ActiveWorkbook.ActiveSheet.Name = "Resource Requests"
With ActiveSheet.PivotTables("Resource Requests")
    .InGridDropZones = True
    .AllowMultipleFilters = True
    .RowAxisLayout xlTabularRow
    .TableStyle2 = "PivotStyleMedium4"
End With

' Turn off subtotals.
ActiveSheet.PivotTables("Resource Requests").PivotFields("Probability Status"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Requests").PivotFields("Project"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Requests").PivotFields("Project manager"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Requests").PivotFields("Company name"). _
    Subtotals(1) = False

ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Workgroup Name").ClearAllFilters
ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Workgroup Name").PivotFilters.Add Type:=xlCaptionBeginsWith, Value1:="Custom"
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Workgroup Name")
    .Orientation = xlPageField
    .Position = 1
End With

With ActiveSheet.PivotTables("Resource Requests").PivotFields("Company name")
    .Orientation = xlRowField
    .Position = 1
End With
ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Probability Status").PivotFilters.Add Type:=xlCaptionDoesNotContain, Value1:="X"
With ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Probability Status")
    .Orientation = xlRowField
    .Position = 2
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Project")
    .Orientation = xlRowField
    .Position = 3
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Project manager" _
    )
    .Orientation = xlRowField
    .Position = 4
End With
ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name"). _
    PivotFilters.Add Type:=xlCaptionBeginsWith, Value1:="*TBD"
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name")
    .Orientation = xlRowField
    .Position = 5
End With

ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 0, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 0, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 1, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 1, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 2, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 2, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 3, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 3, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 4, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 4, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 5, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 5, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields(Format(DateAdd("m", 6, _
    Now()), "mmmm, yyyy")), Format(DateAdd("m", 6, Now()), "mmm"), xlSum

ActiveSheet.PivotTables("Resource Requests").PivotFields("Probability Status"). _
    AutoSort xlDescending, "Probability Status"
ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name"). _
    AutoSort xlAscending, "Resource name"
ActiveWorkbook.ShowPivotTableFieldList = False

' Create the Resource Monthly Detail Pivot Table
ActiveWorkbook.Sheets("CP Monthly Data").Select
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R486C15", Version:=xlPivotTableVersion14). _
    CreatePivotTable TableDestination:="", TableName:="Resource Monthly Detail" _
    , DefaultVersion:=xlPivotTableVersion14
ActiveWorkbook.ActiveSheet.Name = "Resource Monthly Detail"
With ActiveSheet.PivotTables("Resource Monthly Detail")
    .InGridDropZones = True
    .AllowMultipleFilters = True
    .RowAxisLayout xlTabularRow
    .TableStyle2 = "PivotStyleMedium2"
End With

' Turn off subtotals.
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Workgroup Name"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Project"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Project manager"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Resource name"). _
    Subtotals(1) = False

ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Resource name").ShowDetail = _
    False

With ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Probability Status")
    .Orientation = xlPageField
    .Position = 1
    .EnableMultiplePageItems = True
    .PivotItems("X - Lost - 0%").Visible = False
    .PivotItems("X - On Hold - 0%").Visible = False
End With
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields( _
    "Workgroup Name").PivotFilters.Add Type:=xlCaptionBeginsWith, Value1:="Custom"
With ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Workgroup Name")
    .Orientation = xlRowField
    .Position = 1
End With
With ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Resource name")
    .Orientation = xlRowField
    .Position = 2
End With
With ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Project")
    .Orientation = xlRowField
    .Position = 3
End With

ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 0, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 0, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 1, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 1, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 2, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 2, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 3, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 3, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 4, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 4, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 5, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 5, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("Resource Monthly Detail").AddDataField ActiveSheet.PivotTables( _
    "Resource Monthly Detail").PivotFields(Format(DateAdd("m", 6, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 6, Now()), "mmm"), xlSum

ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Workgroup Name").AutoSort _
    xlAscending, "Workgroup Name"
ActiveSheet.PivotTables("Resource Monthly Detail").PivotFields("Resource name").AutoSort _
    xlAscending, "Resource name"
ActiveWorkbook.ShowPivotTableFieldList = False

' Create the Resource Monthly Detail By Project Pivot Table
ActiveWorkbook.Sheets("CP Monthly Data").Select
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R486C15", Version:=xlPivotTableVersion14). _
    CreatePivotTable TableDestination:="", TableName:="RMD By Project" _
    , DefaultVersion:=xlPivotTableVersion14
ActiveWorkbook.ActiveSheet.Name = "Resource Detail By Project"
With ActiveSheet.PivotTables("RMD By Project")
    .InGridDropZones = True
    .AllowMultipleFilters = True
    .RowAxisLayout xlTabularRow
    .TableStyle2 = "PivotStyleMedium6"
End With

' Turn off subtotals.
ActiveSheet.PivotTables("RMD By Project").PivotFields("Workgroup Name"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("RMD By Project").PivotFields("Project"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("RMD By Project").PivotFields("Probability Status"). _
    Subtotals(1) = False
ActiveSheet.PivotTables("RMD By Project").PivotFields("Resource name"). _
    Subtotals(1) = False

ActiveSheet.PivotTables("RMD By Project").PivotFields("Project").ShowDetail = _
    False

ActiveSheet.PivotTables("RMD By Project").PivotFields( _
    "Workgroup Name").PivotFilters.Add Type:=xlCaptionBeginsWith, Value1:="Custom"
With ActiveSheet.PivotTables("RMD By Project").PivotFields("Workgroup Name")
    .Orientation = xlPageField
    .Position = 1
End With
ActiveSheet.PivotTables("RMD By Project").PivotFields( _
    "Probability Status").PivotFilters.Add Type:=xlCaptionDoesNotContain, Value1:="X"
With ActiveSheet.PivotTables("RMD By Project").PivotFields("Probability Status" _
    )
    .Orientation = xlRowField
    .Position = 1
End With
ActiveSheet.PivotTables("RMD By Project").PivotFields("Probability Status"). _
    AutoSort xlDescending, "Probability Status"
With ActiveSheet.PivotTables("RMD By Project").PivotFields("Project")
    .Orientation = xlRowField
    .Position = 2
End With
With ActiveSheet.PivotTables("RMD By Project").PivotFields("Resource name")
    .Orientation = xlRowField
    .Position = 3
End With
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 0, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 0, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 1, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 1, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 2, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 2, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 3, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 3, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 4, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 4, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 5, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 5, Now()), "mmm"), xlSum
ActiveSheet.PivotTables("RMD By Project").AddDataField ActiveSheet.PivotTables( _
    "RMD By Project").PivotFields(Format(DateAdd("m", 6, Now()), "mmmm, yyyy")), _
    Format(DateAdd("m", 6, Now()), "mmm"), xlSum
ActiveWorkbook.ShowPivotTableFieldList = False

ActiveWorkbook.Sheets("Executive Summary").Select
Range("A1:M66").Value = Range("A1:M66").Value

End Sub 
```

概率状态字段上使用的 PivotFilter 工作得很好，但我只需要显示以“自定义”开头的项目作为工作组名称。

我尝试使用以下方法将 Visible 更改为 false：

```
For Each PivItem In ActiveSheet.PivotTables("Resource Requests").PivotFields("Workgroup Name").PivotItems
    Select Case PivItem.Name
    Case "Custom*"
        PivItem.Visible = True
    Case Else
        PivItem.Visible = False
    End Select
Next PivItem 
```

但是当它到达将 Visible 更改为 False 的行时，会出现错误“无法设置 pivotitem 类的可见属性”。

请帮助解决我的一个或两个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:38:31.287

答案可能在于您的客户正在使用的 excel 版本。尝试改变这个：

```
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R486C15", Version:=xlPivotTableVersion14).CreatePivotTable _
    TableDestination:="", TableName:="Resource Requests", DefaultVersion _
    :=xlPivotTableVersion14 
```

为此，在他们的程序副本中：

```
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R486C15", Version:=xlPivotTableVersion12).CreatePivotTable _
    TableDestination:="", TableName:="Resource Requests", DefaultVersion _
    :=xlPivotTableVersion12 
```

# silverlight - 为什么 WindowsForms 不接受 DeepZoomTools.dll 引用？

> ID：11315518
> 
> 赞同：0
> 
> 时间：2012-07-03T16:49:51.137
> 
> 标签：silverlight, windowsformshost

我找不到将 DeepZoomTools.dll 添加到 WindowsForms 应用程序的方法。我遵循的步骤是：

1) 创建一个新的 WindowsForm 应用程序

2) 添加对 C:\Program Files\Microsoft Expression\Deep Zoom Composer 中的 DeepZoomTools.dll 的引用

3) 使用 Microsoft.DeepZoomTools 添加；在 Form1.cs 中

4) 点击构建 WindowsFormsApplication

5) 我收到错误消息：“类型或名称空间名称 'DeepZoomTools' 不存在于名称空间 'Microsoft' 中（您是否缺少程序集引用？）

在此先感谢您的帮助，

路易斯·南比亚尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:40:23.813

如果有人有同样的问题，解决方案如下所示。

转到项目属性并将“目标框架”值从“.NET Framework 4 Client Profile”更改为“.NET Framework 4”。

此致，

路易斯·南比亚尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:54:54.607

DeepZoomTools.dll 是用于 Silverlight 应用程序的 Silverlight DLL。即使您可以正确链接到它，它所需的支持基础设施（例如渲染）也不存在。

理论上，您可以在 WinForms 应用程序内的浏览器控件中嵌入 Silverlight DeepZoom 应用程序，但听起来您不了解 Silverlight，因此可能需要一些努力来学习所有新知识。

# google-apps-script - 自动重定向到页面

> ID：11315521
> 
> 赞同：13
> 
> 时间：2012-07-03T16:50:02.223
> 
> 标签：google-apps-script, google-sites

在按钮单击处理程序中，我正在创建一个新网页，如下所示：

```
var page = SitesApp.getPageByUrl(url).createPageFromTemplate(title, name, template); 
```

我想将用户自动重定向到该页面。

我找不到太多信息，可以这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-12-30T02:05:19.527

Corey G 的回答对我有用，但问题是我重定向的网页在 GAS 的响应中嵌入到 iframe 中，因此 Web 浏览器中的真实 URL 是脚本的 URL。

这实际上对我有用：

```
function doGet() {
  return HtmlService.createHtmlOutput(
    "<script>window.top.location.href='https://example.com';</script>"
  );
} 
```

[这个类似的问答](https://stackoverflow.com/questions/35454058/google-apps-script-redirect-in-google-sites-gadget?rq=1)帮助我解决了这个问题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-03T17:11:50.060

这不能在 UiApp 中完成，但在 HtmlService 中是可行的：

```
function doGet() {
  return HtmlService.createHtmlOutput(
    "<form action='http://www.google.com' method='get' id='foo'></form>" + 
    "<script>document.getElementById('foo').submit();</script>");
} 
```

这应该更容易；请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中提交功能请求，我们将看看如何让这更令人愉快。

（编辑：要清楚，没有办法从 UiApp 回调中执行此操作；您的整个应用程序必须使用 HtmlService 才能工作。）

# android - 由于某些防病毒应用程序会确定它是病毒，如何正确使用“sendTextMessage”？

> ID：11315522
> 
> 赞同：1
> 
> 时间：2012-07-03T16:50:03.363
> 
> 标签：android, antivirus, virus-scanning

我们的应用程序将使用“SmsManager sendTextMessage”发送用户编辑的短信。但是一些防病毒应用程序会确定我们的应用程序是病毒。

除了要求防病毒应用程序将我们的应用程序添加到白名单之外，我该如何避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:47:43.057

您是向 Android 内置 SMS 应用程序传递参数还是允许用户在应用程序内发送 SMS？

许多诈骗应用程序等经常依靠在应用程序消息中使用，使用户手机在用户不知情的情况下将秘密短信发送到收费号码。唯一一次让用户意识到这一点是当他们在他们的设备上安装应用程序时，当然，如果欺诈应用程序巧妙地伪装成正版应用程序并且用户允许应用程序发送消息，这可能不足以保护。

为了防止用户落入这个陷阱（并希望让您避免使用防病毒应用程序），您可以像这样发送您想要发送到 SMS 应用程序的消息（这是我几个月前写的一些代码）

```
Intent textdoc = new Intent (android.content.Intent.ACTION_VIEW);
                    textdoc.putExtra("address", Userprefs.getString("DOCTOR_MOBILE", "null"));
                    textdoc.putExtra("sms_body", "Hello " + Userprefs.getString("DOCTOR_NAME", "Dr") +
                                     " This is " + Userprefs.getString("FIRST_NAME", "null") 
                                     + " " + Userprefs.getString("SURNAME", "null") + " reporting "
                                     + "my latest health check. My temperature is "  
                                     + Float.parseFloat(Tempcheck.getText().toString()) 
                                     + ". My Blood Pressure is "
                                     + Integer.parseInt(Pressurecheck.getText().toString())
                                     + ". My Pulse Rate is "
                                     + Integer.parseInt(Heartratecheck.getText().toString()));
                    textdoc.setType("vnd.android-dir/mms-sms");
                    dialog.dismiss();
                    startActivity(textdoc); 
```

通过将 textdoc.setType 方法参数定义为“vnd.android-dir/mms-sms”，这允许您的应用程序将您的消息内容粘贴到用户可以选择发送它的应用程序。这避免了设备在未经用户同意的情况下发送欺诈性和意外短信的威胁，并且希望足以不触发防病毒应用程序。

希望这可以帮助。

# zend-framework - 如何在 Zend 框架中单选按钮的输入标题上应用装饰器

> ID：11315524
> 
> 赞同：0
> 
> 时间：2012-07-03T16:50:17.060
> 
> 标签：zend-framework, zend-form, zend-decorators

我有一个 zend 表单，我需要 Radio Group 的最终输出 HTML 是这样的：

```
<div>
     <span class='radio_title'>Gender</span> <!-- The issue is in this line -->
     <span class='felement'>
          <label ....> <input type="radio" ...... value="male" /></label>
          <label ....> <input type="radio" ...... value="female" /></label>
     </span>
</div> 
```

(ie) 用自定义的 div 或 span 标签替换默认的 dt 和 dd

我创建了一个装饰器，如下所示：

```
$decorator = array(
'ViewHelper',
'Errors',
   array(array('data' => 'HtmlTag'), array('tag' => 'span', 'class'=> 'felement')),
   // the next line is never applied
   array('Label', array('tag' => 'span', 'class'=> 'fradio' , 'placement'=>'prepend') ),
   array(array('row' => 'HtmlTag'), array('tag' => "div"))
);

$gender = new Zend_Form_Element_Radio("gender",
        array(
              "label"=>"Gender",
              'multiOptions'=>array(
              'male'=>'Male',
              'female'=>'Female'
            ),
            "decorators"=>$decorator
)); 
```

我得到了这个输出：

```
<dt id="gender-label">
      <label class="optional">Gender</label>
</dt>
<!-- i don't know why the Main Label of the radio group didn't 
have the Label decorator applied to it -->
<div>    
   <span class="felement">
     <label for="gender-male"><input type="radio" disablefor="1" checked="checked" value="male" id="gender-male" name="gender">Male</label>
      <label for="gender-female"><input type="radio" disablefor="1" value="female" id="gender-female" name="gender">Female</label>    
   </span> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:09:50.833

我应用了这个装饰器：

```
array(
            'ViewHelper',
            'Errors',               
                array(array('data' => 'HtmlTag'), array('tag' => 'div', 'class'=> 'fradioelement')),
                array('Label', array('tag' => 'span', 'class'=> 'fradiotitle') ),
                array('description', array('tag' => 'span')),
                array(array('row' => 'HtmlTag'), array('tag' => "div","class"=>"radioelement"))

            ); 
```

它给了我这个输出：

```
<div class="radioelement">
    <span id="gender-label"><label class="fradiotitle optional" for="gender">Gender</label></span>
    <div class="fradioelement">
            <label for="gender-male"><input type="radio" checked="checked" value="male" id="gender-male" name="gender">Male</label>
            <label for="gender-female"><input type="radio" value="female" id="gender-female" name="gender">Female</label>
    </div>
 </div> 
```

这几乎是我所需要的。

** 我必须补充：

```
'disableLoadDefaultDecorators' => true 
```

在元素的选项中

# php - 解析 SOAP 响应

> ID：11315526
> 
> 赞同：8
> 
> 时间：2012-07-03T16:50:24.110
> 
> 标签：php, web-services, soap

从我的控制器调用 Web 服务：

```
$client = new \SoapClient("http://.../webservice/NAME_OF_PAGE.asmx?WSDL");
$result = $client->EstadoHabitacionesFechas(); 
```

我明白了：

```
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="TablaEstadoHabitacion" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice minOccurs="0" maxOccurs="unbounded">
                <xs:element name="TablaEstadoHabitacion">
                    <xs:complexType><xs:sequence>
                        <xs:element name="IdHabitacion" type="xs:int" minOccurs="0"/>
                        <xs:element name="FechaEntrada" type="xs:string" minOccurs="0"/>
                        <xs:element name="FechaSalida" type="xs:string" minOccurs="0"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:choice>
    </xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
    <DocumentElement xmlns="">
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion1" msdata:rowOrder="0" diffgr:hasChanges="inserted">
            <IdHabitacion>1</IdHabitacion>
            <FechaEntrada>23/05/2012</FechaEntrada>
            <FechaSalida>31/12/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion2" msdata:rowOrder="1" diffgr:hasChanges="inserted">
            <IdHabitacion>2</IdHabitacion>
            <FechaEntrada>23/05/2012</FechaEntrada>
            <FechaSalida>29/06/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion3" msdata:rowOrder="2" diffgr:hasChanges="inserted">
            <IdHabitacion>2</IdHabitacion>
            <FechaEntrada>29/06/2012</FechaEntrada>
            <FechaSalida>01/07/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion4" msdata:rowOrder="3" diffgr:hasChanges="inserted">
            <IdHabitacion>3</IdHabitacion>
            <FechaEntrada>02/06/2012</FechaEntrada>
            <FechaSalida>03/06/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion5" msdata:rowOrder="4" diffgr:hasChanges="inserted">
            <IdHabitacion>3</IdHabitacion>
            <FechaEntrada>29/06/2012</FechaEntrada>
            <FechaSalida>01/07/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion6" msdata:rowOrder="5" diffgr:hasChanges="inserted">
            <IdHabitacion>4</IdHabitacion>
            <FechaEntrada>29/06/2012</FechaEntrada>
            <FechaSalida>01/07/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion7" msdata:rowOrder="6" diffgr:hasChanges="inserted">
            <IdHabitacion>5</IdHabitacion>
            <FechaEntrada>02/06/2012</FechaEntrada>
            <FechaSalida>03/06/2012</FechaSalida>
        </TablaEstadoHabitacion>
        <TablaEstadoHabitacion diffgr:id="TablaEstadoHabitacion20" msdata:rowOrder="19" diffgr:hasChanges="inserted">
            <IdHabitacion>10</IdHabitacion>
            <FechaEntrada>02/06/2012</FechaEntrada>
            <FechaSalida>03/06/2012</FechaSalida>
        </TablaEstadoHabitacion>
    </DocumentElement>
</diffgr:diffgram> 
```

如何解析并使用这些数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T20:36:20.873

您并不清楚“使用”是什么，但您显然需要某种形式的 XML 解析/搜索。

例如，尝试 xml 加载该字符串和`var_dump`结果。简单地列举各种属性应该向您展示机会。

稍后，您可能会尝试[XPath 搜索](http://php.net/manual/en/simplexmlelement.xpath.php)和更高级的“技巧”来加快工作速度。

```
 // Remove namespaces
    $xml    = str_replace(array("diffgr:","msdata:"),'', $xml);
    // Wrap into root element to make it standard XML
    $xml    = "<package>".$xml."</package>";
    // Parse with SimpleXML - probably there're much better ways
    $data   = simplexml_load_string($xml);
    $rooms  = $data->package->diffgram->DocumentElement->TablaEstadoHabitacion;
    print "We have " . count($rooms) . " rooms: \n";
    foreach($rooms as $i => $room)
    {
            print "Room {$i}: id={$room['id']} (official id: {$room->IdHabitacion}\n";
            print "Entrada {$room->FechaEntrada}, salida {$room->FechaSalida}\n...\n";
    } 
```

您可以使用几种解析器，这是一个快速而肮脏的解析器。

[在这里](http://www.php.net/manual/en/simplexml.examples-basic.php)查看更多。

# 大型数据集

**注意**：对于非常大的 XML 数据集，[我发现这`foreach`是最好的](https://stackoverflow.com/a/29758423/1428679)。

对于只需要少量信息并且整个文件*可能*无法放入可用内存的大型数据集，您可能需要使用 XMLParser 或[XMLReader](http://php.net/manual/en/book.xmlreader.php)，并在保持/操作的同时通过解析器筛选整个文件（例如发送在数据库中，或显示为 HTML）仅您需要的信息。

虽然这通常不是很好的做法，但您可以在进入一个长的 XML 解析循环之前关闭输出缓冲，一旦拥有它就输出 HTML 并偶尔刷新（）。这会将 HTML 外包给 HTTP 服务器，在 PHP 进程中占用更少的内存，但代价是压缩率稍差（如果输出的 HTML 块超过 40K，差异可以忽略不计）和相应地更好的响应性（用户“看到”某些事情发生得更快，即使整体操作完成需要更长的时间。体验是*更快*的加载）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-08T07:08:57.847

**Soap 响应 XML 文件的完整参考代码在这里如何解析我们将在下面的示例代码中看到**

```
<?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <soap:Body>
            <xyzResponse xmlns="http://tempuri.org/">
                <xyzResult>
                    <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
                        <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
                            <xs:complexType>
                                <xs:choice minOccurs="0" maxOccurs="unbounded">
                                    <xs:element name="Table">
                                        <xs:complexType>
                                            <xs:sequence>
                                                <xs:element name="myCityID" type="xs:int" minOccurs="0" />
                                                <xs:element name="myCityName" type="xs:string" minOccurs="0" />

                                                <xs:element name="myLat" type="xs:double" minOccurs="0" />
                                                <xs:element name="myLon" type="xs:double" minOccurs="0" />
                                            </xs:sequence>
                                        </xs:complexType>
                                    </xs:element>
                                </xs:choice>
                            </xs:complexType>
                        </xs:element>
                    </xs:schema>
                    <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
                        <NewDataSet xmlns="">
                            <Table diffgr:id="Table1" msdata:rowOrder="0">
                                <CityID>1</CityID>
                                <CityName>Ahmedabad</CityName>
                                <Lat>23.045839</Lat>
                                <Lon>72.550578</Lon>
                            </Table>
                            <Table diffgr:id="Table2" msdata:rowOrder="1">
                                <CityID>21</CityID>
                                <CityName>Amritsar</CityName>
                                <Lat>31.705603</Lat>
                                <Lon>74.807337</Lon>
                            </Table>
                        </NewDataSet>
                    </diffgr:diffgram>
                </xyzResult>
            </xyzResponse>
        </soap:Body>
    </soap:Envelope> 
```

**使用此代码，您可以轻松获取 $title 变量中的所有表格数据，并使用它可以轻松获取任何特定值...**

```
 <?php
        ini_set('soap.wsdl_cache_enabled', 0);
        ini_set('soap.wsdl_cache_ttl', 900);
        ini_set('default_socket_timeout', 15);

        $apiauth =array('UserName'=>'USENAME','Password'=>'PASSWORD','UserCode'=>'1991');
        $wsdl = 'http://SITENAME.com/service.asmx?WSDL';
        try {

            $soap = new SoapClient($wsdl);
            $header = new SoapHeader('http://tempuri.org/', 'AuthHeader', $apiauth);
            $soap->__setSoapHeaders($header);   
            $data = $soap->methodname($header);
        }
        catch(Exception $e) {
            die($e->getMessage());
        }
        // echo "<pre>";
        // print_r($data->xyzResult->any);
        $response = $data->xyzResult->any;
        $sxe = new SimpleXMLElement($response);
        $sxe->registerXPathNamespace('d', 'urn:schemas-microsoft-com:xml-diffgram-v1');
        $result = $sxe->xpath("//NewDataSet");
        echo "<pre>";
        foreach ($result[0] as $title) {
            print_r($title);
        }
        die;
    ?> 
```

# java - 在 Lucene 索引中使用 RegexQuery（不是任何其他）搜索“$”

> ID：11315527
> 
> 赞同：2
> 
> 时间：2012-07-03T16:50:26.327
> 
> 标签：java, lucene

我有以下程序：

```
public class RegexQueryExample {

    public static String[] terms = {
        "US $65M dollars",
        "USA",
        "$35",
        "355",
        "US $33",
        "U.S.A",
        "John Keates",
        "Tom Dick Harry",
        "Southeast' Asia"
    };
    private static Directory directory;

    public static void main(String[] args) throws CorruptIndexException, IOException {
        String searchString = ".*\\$.*";
        createIndex();
        searchRegexIndex(searchString);
    }

    /**
     * Creates an index for the files in the data directory.
     */
    private static void createIndex() throws CorruptIndexException, LockObtainFailedException, IOException {

        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
        directory = new RAMDirectory();
        IndexWriter indexWriter = new IndexWriter(directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED);

        for (String term : terms) {
            Document document = new Document();
            if (term.indexOf('$') >= 0) {
                document.add(new Field("type", "currency", Field.Store.YES, Field.Index.NOT_ANALYZED));
            } else {
                document.add(new Field("type", "simple_field", Field.Store.YES, Field.Index.NOT_ANALYZED));
            }
            document.add(new Field("term", term, Field.Store.YES, Field.Index.NOT_ANALYZED));
            indexWriter.addDocument(document);
        }

        indexWriter.close();
    }

    /**
     * searches for a regular expression satisfied by a file path.
     *
     * @param searchString the string to be searched.
     */
    private static void searchRegexIndex(String regexString) throws CorruptIndexException, IOException {
        regexString = regexString;
        IndexSearcher searcher = new IndexSearcher(directory);

        RegexQuery rquery = new RegexQuery(new Term("term", regexString));
        BooleanQuery queryin = new BooleanQuery();
        BooleanQuery query = new BooleanQuery();
        query.add(new TermQuery(new Term("type", "simple_field")), BooleanClause.Occur.MUST);
        query.add(rquery, BooleanClause.Occur.MUST);

        TopDocs hits = searcher.search(query, terms.length);
        ScoreDoc[] alldocs = hits.scoreDocs;
        for (int i = 0; i < alldocs.length; i++) {
            Document d = searcher.doc(alldocs[i].doc);
            System.out.println((i + 1) + ". " + d.get("term"));
        }
    }
} 
```

该函数在执行正则表达式查询`createIndex()`时创建 Lucene 索引。`searchRegexIndex()`在`main()`函数中，我搜索`.*\\$.*`期望它返回包含`$`符号的术语。但是，它没有用。我如何使它工作？这是分析仪的问题吗？

**编辑：**

我来自 Luke 的 Lucene 索引快照：

![Lucene 索引](../Images/3311c53cef4270c8afcc12ed135bc29b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:30:27.400

您正在使用 StandardAnalyzer，它会从令牌中删除美元符号。例如，“6500 万美元”变成三个代币：“我们”、“6500 万美元”、“美元”。您需要使用另一个不会删除美元符号的分析器。[Luke](http://code.google.com/p/luke/)提供了一个出色的分析器工具，您可以在其中尝试不同的分析器并检查它们的输出。

# jquery - 如何将带有 JSON 的数据发送到 Sqlite

> ID：11315531
> 
> 赞同：0
> 
> 时间：2012-07-03T16:51:00.793
> 
> 标签：jquery, sqlite, cordova

我正在使用 Jquery Mobile & Phonegap 开发一个移动应用程序。我曾经将数据发送到服务器，但现在我想使用 sqlite 将其本地存储。我之前做的是：

```
 function CallUpdate(varx) {
            var postData = { 'Function': '...', 'Varx': JSON.stringify(varx) };
            $.ajax({
                type: "GET",
                url: serviceUrl + "/datagathering.aspx",
                data: postData,
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                jsonp: 'jsoncallback',
                success: function (result) {
                    alert('Your changes have been saved!');
                },
                error: function (msg) {
                    alert(msg);
                }
            });
        } 
```

现在我不会向服务器发送任何数据，我只有一个 javascript 文件，我在其中放置了我的数据库和函数。那么如何将数据发送到 sqlite 数据库呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:07:00.543

大多数移动浏览器（基于 webkit）仍然支持[webSQL](http://en.wikipedia.org/wiki/Web_SQL_Database)实现；由于 W3C 停止将其开发为规范，因此我通常不建议您使用它。但是，关于 PhoneGap - 这是当前文档实际*建议*您使用的方法。

在 PhoneGap 中，您可以使用与 Web 规范相同的方法访问它 -[引用 PhoneGap 文档](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)：

> 此 API 基于 W3C Web SQL 数据库规范和 W3C Web 存储 API 规范。一些设备已经提供了这个规范的实现。对于这些设备，使用内置支持而不是用 PhoneGap 的实现替换它。对于不支持存储的设备，PhoneGap 的实现应该与 W3C 规范兼容。

这节省了外部插件的使用，是跨平台的，并且适合将所有代码保留在 Javascript/HTML 中的 PhoneGap 方法，同时坚持简单性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:22:34.077

查看可用的[SQLite 插件](https://groups.google.com/forum/?fromgroups#!topic/phonegap/YIVTvW6j2k4)

# excel - VB新手。我的代码生成错误：“期望以结尾”。with-end with 语句如何工作？

> ID：11315532
> 
> 赞同：1
> 
> 时间：2012-07-03T16:51:01.163
> 
> 标签：excel, vba

```
Sub RowRangeMove()
    Sheets.Add().Name = "CopySheet"
    With Sheets("BigDataSet - Copy")
        .Range("A65000", .Range("A13000").End(xlUp)).Copy Destination:=Range("A1")
    With Sheets("BigDataSet - Copy")
        .Range("B65000", .Range("B13000").End(xlUp)).Copy Destination:=Range("B1")
    With Sheets("BigDataSet - Copy")
        .Range("C65000", .Range("C13000").End(xlUp)).Copy Destination:=Range("C1")
    With Sheets("BigDataSet - Copy")
        .Range("D65000", .Range("D13000").End(xlUp)).Copy Destination:=Range("D1")
    With Sheets("BigDataSet - Copy")
        .Range("E65000", .Range("E13000").End(xlUp)).Copy Destination:=Range("E1")
    With Sheets("BigDataSet - Copy")
        .Range("F65000", .Range("F13000").End(xlUp)).Copy Destination:=Range("F1")
    With Sheets("BigDataSet - Copy")
        .Range("G65000", .Range("G13000").End(xlUp)).Copy Destination:=Range("G1")
    With Sheets("BigDataSet - Copy")
        .Range("H65000", .Range("H13000").End(xlUp)).Copy Destination:=Range("H1")
    With Sheets("BigDataSet - Copy")
        .Range("I65000", .Range("I13000").End(xlUp)).Copy Destination:=Range("I1")
    With Sheets("BigDataSet - Copy")
        .Range("J65000", .Range("J13000").End(xlUp)).Copy Destination:=Range("J1")
    End With
    .
    .
    [iterate several times]
    .
    .
    Sheets.Add().Name = "CopySheet7"
    With Sheets("BigDataSet - Copy")
        .Range("A455006", .Range("A502750").End(xlUp)).Copy Destination:=Range("A1")
    With Sheets("BigDataSet - Copy")
        .Range("B455006", .Range("B502750").End(xlUp)).Copy Destination:=Range("B1")
    With Sheets("BigDataSet - Copy")
        .Range("C455006", .Range("C502750").End(xlUp)).Copy Destination:=Range("C1")
    With Sheets("BigDataSet - Copy")
        .Range("D455006", .Range("D502750").End(xlUp)).Copy Destination:=Range("D1")
    With Sheets("BigDataSet - Copy")
        .Range("E455006", .Range("E502750").End(xlUp)).Copy Destination:=Range("E1")
    With Sheets("BigDataSet - Copy")
        .Range("F455006", .Range("F502750").End(xlUp)).Copy Destination:=Range("F1")
    With Sheets("BigDataSet - Copy")
        .Range("G455006", .Range("G502750").End(xlUp)).Copy Destination:=Range("G1")
    With Sheets("BigDataSet - Copy")
        .Range("H455006", .Range("H502750").End(xlUp)).Copy Destination:=Range("H1")
    With Sheets("BigDataSet - Copy")
        .Range("I455006", .Range("I502750").End(xlUp)).Copy Destination:=Range("I1")
    With Sheets("BigDataSet - Copy")
        .Range("J455006", .Range("J502750").End(xlUp)).Copy Destination:=Range("J1")
    End With

End Sub 
```

当我尝试运行它时，我收到一条错误消息，提示“期望结束于”。该脚本的目标是复制行范围并将它们放入新的单独工作表中（然后我可以将其放入单独的文件中，这些文件将在 Excel 2003 中读取而不会超过最大行数）。是否应该在其中的某处添加一个或多个 End With 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:53:51.267

You don't need to repeat the With part so many times.

```
With Sheets("BigDataSet - Copy")
  .Range("A65000", .Range("A13000").End(xlUp)).Copy Destination:=Range("A1")
  .Range("B65000", .Range("B13000").End(xlUp)).Copy Destination:=Range("B1")
  .Range("C65000", .Range("C13000").End(xlUp)).Copy Destination:=Range("C1")
  ' Etc
End With 
```

See the MSDN documentation for the "With" keyword:

[http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:54:11.770

```
With Sheets("BigDataSet - Copy") 
    .Range("A455006", .Range("A502750").End(xlUp)).Copy Destination:=Range("A1") 
    .Range("B455006", .Range("B502750").End(xlUp)).Copy Destination:=Range("B1") 

    .Range("C455006", .Range("C502750").End(xlUp)).Copy Destination:=Range("C1") 
    .Range("D455006", .Range("D502750").End(xlUp)).Copy Destination:=Range("D1") 
    .Range("E455006", .Range("E502750").End(xlUp)).Copy Destination:=Range("E1") 

    .Range("F455006", .Range("F502750").End(xlUp)).Copy Destination:=Range("F1") 
    .Range("G455006", .Range("G502750").End(xlUp)).Copy Destination:=Range("G1") 
    .Range("H455006", .Range("H502750").End(xlUp)).Copy Destination:=Range("H1") 
    .Range("I455006", .Range("I502750").End(xlUp)).Copy Destination:=Range("I1") 
    .Range("J455006", .Range("J502750").End(xlUp)).Copy Destination:=Range("J1") 
End With 
```

You only need one (Begin) `With` ([msdn reference](http://msdn.microsoft.com/en-us/library/wc500chb%28v=vs.80%29.aspx)) . That's the whole point of that block, to let you not include the parent object each time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:54:27.157

Not only should there be at least one End With, there shouldn't be so many With statements.

```
Sub RowRangeMove()
    Sheets.Add().Name = "CopySheet"
    With Sheets("BigDataSet - Copy")
        .Range("A65000", .Range("A13000").End(xlUp)).Copy Destination:=Range("A1")
        .Range("B65000", .Range("B13000").End(xlUp)).Copy Destination:=Range("B1")
        .Range("C65000", .Range("C13000").End(xlUp)).Copy Destination:=Range("C1")
        .Range("D65000", .Range("D13000").End(xlUp)).Copy Destination:=Range("D1")
        .Range("E65000", .Range("E13000").End(xlUp)).Copy Destination:=Range("E1")
        .Range("F65000", .Range("F13000").End(xlUp)).Copy Destination:=Range("F1")
        .Range("G65000", .Range("G13000").End(xlUp)).Copy Destination:=Range("G1")
        .Range("H65000", .Range("H13000").End(xlUp)).Copy Destination:=Range("H1")
        .Range("I65000", .Range("I13000").End(xlUp)).Copy Destination:=Range("I1")
        .Range("J65000", .Range("J13000").End(xlUp)).Copy Destination:=Range("J1")
    End With

End Sub 
```

would be the correct syntax.

The With statement is simply a way to shorten up your lines of code. The With statement is a way of saying "I'm going to perform a bunch of actions on a specific object" and shorten up the individual lines of code.

Example:

Without the With statement, the code above would look like this:

```
Sub RowRangeMove()
    Sheets.Add().Name = "CopySheet"
        Sheets("BigDataSet - Copy").Range("A65000", .Range("A13000").End(xlUp)).Copy Destination:=Range("A1")
        Sheets("BigDataSet - Copy").Range("B65000", .Range("B13000").End(xlUp)).Copy Destination:=Range("B1")
        Sheets("BigDataSet - Copy").Range("C65000", .Range("C13000").End(xlUp)).Copy Destination:=Range("C1")
        Sheets("BigDataSet - Copy").Range("D65000", .Range("D13000").End(xlUp)).Copy Destination:=Range("D1")
        Sheets("BigDataSet - Copy").Range("E65000", .Range("E13000").End(xlUp)).Copy Destination:=Range("E1")
        Sheets("BigDataSet - Copy").Range("F65000", .Range("F13000").End(xlUp)).Copy Destination:=Range("F1")
        Sheets("BigDataSet - Copy").Range("G65000", .Range("G13000").End(xlUp)).Copy Destination:=Range("G1")
        Sheets("BigDataSet - Copy").Range("H65000", .Range("H13000").End(xlUp)).Copy Destination:=Range("H1")
        Sheets("BigDataSet - Copy").Range("I65000", .Range("I13000").End(xlUp)).Copy Destination:=Range("I1")
        Sheets("BigDataSet - Copy").Range("J65000", .Range("J13000").End(xlUp)).Copy Destination:=Range("J1")
End Sub 
```

In shorter terms, the With statement allows you to start out individual lines of code with a dot, and inside that with statement, the compiler will assume you mean the thing declared in your with statement.

So

```
With Answerer
  ' Inside this with block, any line beginning with "." , 
  ' the compiler will assume you mean "Answerer.".   
  ' Therefore ".FirstName" is the same as "Answerer.FirstName"
  .FirstName = "David"
  .LastName = "Stratton"
End With 
```

is equivalient to

```
Answerer.FirstName = "David"
Amswerer.LastName = "Stratton" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:13:02.300

你根本不需要`With-End With`积木。看起来您的第一个`With`块正在获取 A13000:J65000 的一部分并将其复制到新工作表，然后获取 A455006:J502750 的一部分并将其粘贴到第二个新工作表上。您的代码可以重构如下：

```
Sub RowRangeMove()

  Dim wkshts As Excel.Sheets
  Dim targetSheet As Excel.Worksheet
  Dim sourceSheet As Excel.Worksheet

  Set wkshts = Excel.Worksheets

  Application.ScreenUpdating = False

  ' create new sheet
  Set targetSheet = Excel.Worksheets.Add
  targetSheet.name = "CopySheet"

  ' copy from source to first target
  Set sourceSheet = Excel.Worksheets("BigDataSet - Copy")
  sourceSheet.Range(sourceSheet.Cells(13000, 1).End(xlUp), _
                    sourceSheet.Cells(65000, 10)).Copy targetSheet.Range("A1")

  ' create second new sheet
  Set targetSheet = Excel.Worksheets.Add
  targetSheet.name = "CopySheet7"

  ' copy from source to second target
  sourceSheet.Range(sourceSheet.Cells(455006, 1), _
                    sourceSheet.Cells(502750, 10).End(xlUp)).Copy targetSheet.Range("A1")

  Application.ScreenUpdating = True
End Sub 
```

# c++ - 将深度渲染缓冲区复制到深度缓冲区

> ID：11315534
> 
> 赞同：2
> 
> 时间：2012-07-03T16:51:11.620
> 
> 标签：c++, opengl, glsl

目前，我正在将一些东西渲染到带有附加深度渲染缓冲区的 FBO。

但是，在我完成渲染缓冲区之后，深度信息几乎丢失了。

如何将数据从渲染缓冲区复制到固定函数深度缓冲区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:57:27.277

您可以使用[glBlitFramebuffer](http://www.opengl.org/wiki/GLAPI/glBlitFramebuffer)，启用该`GL_DEPTH_BUFFER_BIT`标志。

示例代码：

```
glBindFramebuffer(GL_READ_FRAMEBUFFER, fbo_id);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);

glBlitFramebuffer(offset_x, offset_y, offset_x + size_x, offset_y + size_y,
                  offset_x, offset_y, offset_x + size_x, offset_y + size_y,
                  GL_DEPTH_BUFFER_BIT,
                  GL_NEAREST); 
```

*这将仅*复制深度缓冲区。

# mysql - MySQL在字符串的开头/结尾搜索和替换

> ID：11315537
> 
> 赞同：2
> 
> 时间：2012-07-03T16:51:20.953
> 
> 标签：mysql, search, replace

我目前正在为我的应用程序开发一个搜索和替换功能，我希望它能够在字符串的开头/结尾替换指定的字符串。例如：

```
string = "DadaLalaDada" 
```

得到

```
string = "DuduLalaDada" 
```

当在字符串的**开头搜索并替换为**

```
search  = "Dada"
replace = "Dudu" 
```

被执行。

我怎样才能在 MySQL 中做到这一点？我使用*REPLACE*来命中字符串中的每一个匹配项，但如何仅在开头/结尾执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:41:01.027

如果您愿意在查询中多次出现相关值，这似乎可行：

```
select tab.val, 
concat(replace(substring(tab.val, 1, char_length('Dada')), 'Dada', 'Dudu'),
    substring(tab.val, char_length('Dada') + 1)) as replace_beginning,
concat(substring(tab.val, 1, char_length(tab.val) - char_length('Dada')),
    replace(substring(tab.val, -char_length('Dada')), 'Dada', 'Dudu')) as replace_end
from ( select "DadaLalaDada" as val union select "BlahDadaBlah" ) as tab 
```

结果：

```
+--------------+-------------------+--------------+
| val          | replace_beginning | replace_end  |
+--------------+-------------------+--------------+
| DadaLalaDada | DuduLalaDada      | DadaLalaDudu |
| BlahDadaBlah | BlahDadaBlah      | BlahDadaBlah |
+--------------+-------------------+--------------+ 
```

# c# - 滚动条不在 Winforms 选项卡控件中的客户区域内

> ID：11315539
> 
> 赞同：0
> 
> 时间：2012-07-03T16:51:26.110
> 
> 标签：c#, winforms, gridview, scrollbar, tabcontrol

我有一个`TabControl`，我以编程方式将`Form`带有`GridView`控件的 a 添加到 Tab Controls`Controls`集合中。结果如下所示：

![在此处输入图像描述](../Images/9bb404413e54f42a93877265876db5e6.png)

插图中的 GridView 实际上有大约 150 列......当我使用水平滚动条向右滚动时，我得到了这个：

![在此处输入图像描述](../Images/f9c82f0b13ab3ebce13b6573240bcd1c.png)

请注意，滚动条不会停留在选项卡的可见客户区域中。相反，滚动条假定嵌入表单的宽度。

*如何让滚动条假定选项卡中可见客户区的宽度？*

这是我的代码。 `PcmEditorForm`只是一个空白表单，`FormBorderStyle`设置为无，并且有一些代码可以设置网格中的行数和列数，此处未显示：

```
 private void LoadEditorTab()
    {
        var editor = new PcmEditorForm();
        var grid = new GridView();
        editor.Width = grid.Width;
        editor.Height = grid.Height;
        editor.Controls.Add(grid);
        editor.AutoScroll = true;
        editor.Anchor = AnchorStyles.Left | AnchorStyles.Top;
        tabEdit.Controls.Clear();
        editor.TopLevel = false;
        editor.Visible = true;
        tabEdit.Controls.Add(editor);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:06:24.870

为什么不将编辑器停靠在 tabEdit 中。

```
private void LoadEditorTab()
    {
        var editor = new PcmEditorForm();
        var grid = new GridView();
        grid.width=editor.width
        grid.Anchor= AnchorStyles.Left | AnchorStyles.Top | AnchorStyles.Right;
        editor.Controls.Add(grid);
        tabEdit.Controls.Clear();
        editor.TopLevel = false;
        editor.Visible = true;
        editor.dock=DockStyle.Fill;  // Dock the editor
        tabEdit.Controls.Add(editor);
    } 
```

# amazon-ec2 - Haproxy 负载均衡器，EC2，编写我自己的可用性脚本

> ID：11315542
> 
> 赞同：4
> 
> 时间：2012-07-03T16:51:41.240
> 
> 标签：amazon-ec2, ping, haproxy

我一直在研究高可用性解决方案，例如 heartbeat，以及当 haproxy 负载均衡器出现故障时进行故障转移的 keepalived。我意识到，虽然我们想要高可用性，但在任何时候运行 2 个负载均衡器实例的支出范围内，这并不是真正的要求，以便我们获得即时故障转移（尤其是一磅在我们的设置中将是多余的）。

如果当前负载均衡器已停止工作，我的替代解决方案是从 AMI 启动一个新的负载均衡器 EC2 实例，并将其与我们的域名指向的弹性 IP 相关联。这应该确保停机时间限制在启动新实例和关联弹性 ip 所需的时间，鉴于我们目前的情况，这似乎是高可用性的合理成本有效的解决方案，特别是因为我们可以轻松地进行多 av区。我希望使用以下步骤来做到这一点：

1.  准备负载均衡器的 AMI
2.  启动一个充当负载均衡器的 ec2 实例并为其分配弹性 IP
3.  让微型服务器定期 ping 当前的负载均衡器（无论如何，我们总是有一个额外的微型服务器在运行）
4.  如果 ping 超时，请使用负载均衡器 AMI 启动新的 EC2 实例
5.  将弹性 ip 关联到新实例
6.  关闭旧的负载均衡器实例
7.  对新实例重复步骤 3

我知道如何在我的脚本中运行命令来启动和关闭 EC2 实例、将弹性 IP 地址关联到实例以及 ping 服务器。

我的问题是这里合适的 ping 是什么？定期进行标准 ping 就足够了，什么是好的间隔？或者这是一种相当简单的方法，并且我应该进行更智能的健康检查？

*另外，如果有人预见到这种方法有任何问题，请随时发表评论*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:26:27.677

我完全了解您来自哪里，我的公司处于相同的位置。我们关心拥有一个高度可用的容错系统，但是开销成本对于我们获得的流量来说根本不可行。

1.  我对您的解决方案的一个问题是您假设微实例和负载均衡器不会同时死亡。以我在亚马逊的经验，我可以告诉你，这完全有可能发生，无论多么不可能，有可能导致你的负载均衡器死机的任何原因也可能导致微实例失效。
2.  另一个潜在问题是您还假设您将始终能够在停机期间启动另一个替换实例。事实并非如此，例如几天前亚马逊在他们的 us-east-1 地区发生的中断。停电导致其中一个区域断电。当他们恢复供电并开始恢复实例时，他们的 API 由于负载过大而无法正常工作。在此期间，它们花了将近 1 个小时才可用。如果像这样的中断破坏了您的负载均衡器并且您无法启动另一个，那么您将失败。

话虽如此。我发现亚马逊提供的 ELB 对我来说是一个更好的解决方案。我不确定使用 HAProxy 背后的原因是什么，但我建议调查 ELB，因为它们将允许您执行诸如自动缩放等操作。

对于您创建的每个 ELB，亚马逊会在每个已注册实例的区域中创建一个负载均衡器。在亚马逊严重停电期间，这些仍然容易受到某些问题的影响，例如上述问题。例如，在此停机期间，我无法向负载均衡器添加新实例，但我当前的实例（不受停电影响的实例）仍在处理请求。

更新 2013-09-30

最近，我们更改了我们的基础架构以使用 ELB 和 HAProxy 的组合。我发现 ELB 提供了最好的可用性，但它使用 DNS 负载平衡这一事实对我的应用程序并不适用。所以我们的设置是在一个 2 节点 HAProxy 集群前面的 ELB。使用我为 AWS 创建的这个工具[HAProxyCloud](https://github.com/SBRDevelopment/HAProxyCloud "HAProxyCloud")，我可以轻松地将 Auto Scaling 组添加到 HAProxy 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-14T05:50:23.067

我知道这有点老了，但是您建议的解决方案过于复杂，有一种更简单的方法可以完全满足您的要求...

只需将您的 HAProxy 机器和您的自定义 AMI 放在一个最小和最大 1 个实例的自动扩展组中。这样，当您的实例出现故障时，ASG 将使其恢复正常，EIP 等等。无需外部监控，即使不是更快地响应停机实例也是如此。

# ruby-on-rails - 在 Heroku 上使用 Rails 和 Mongoid 索引 MongoDB

> ID：11315550
> 
> 赞同：1
> 
> 时间：2012-07-03T16:51:59.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, indexing, mongoid

我有一个在 Heroku 上运行 Mongoid 的 Rails 应用程序，我需要设置一些索引以使数据库更快。我已经尝试在几个地方阅读它，并且我知道 Mongoid 有一些用于索引的内置函数，但我不确定应用它们的内容以及索引的频率。

我想索引的主要是我的设计模型：

```
scope :full_member_and_show, where(full_member: true).and(show: true).desc(:created_at)
scope :not_full_member_and_show, where(full_member: false).and(show: true).desc(:created_at)

embeds_many :comments
belongs_to :designer

search_in :tags_array

attr_accessible :image,  :tags, :description, :title, :featured, :project_number, :show

field :width
field :height
field :description
field :title
field :tags, type: Array
field :featured, :type => Boolean, :default => false
field :project_number, :type => Integer, :default => 0
field :show, :type => Boolean, :default => true
field :full_member, :type => Boolean, :default => false
field :first_design, :type => Boolean, :default => false 
```

我需要索引什么，我究竟如何使用 Mongoid 进行索引，我应该多久做一次？

错误更新

如果尝试索引以下内容：

```
index({ full_member: 1, show: 1 }, { unique: true }) 
```

它向我抛出了这个错误：

```
Invalid index specification {:full_member=>1, :show=>1}; should be either a string, symbol, or an array of arrays. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:25:27.810

你不需要定期索引：一旦你添加了一个索引，mongo 会随着集合的变化保持该索引是最新的。这与 MySQL 或 Postgres 中的索引相同（您可能一直在考虑类似 solr 的东西）

要索引的内容取决于您将对数据集进行的查询。当您进行更新并消耗磁盘空间时，索引确实会带来一些开销，因此您不想在不需要它们时添加它们。

你通过索引告诉 mongoid 你想要什么索引，例如

```
class Person
  include Mongoid::Document
  index :city
end 
```

对于 mongo 支持的各种索引，mongoid 文档中有大量示例。

然后你跑

```
rake db:mongoid:create_indexes 
```

这确定了您想要的索引（基于`index`模型中的调用），然后确保它们存在于数据库中，并在必要时创建它们。在开发中，您将在向模型添加索引后运行它。在生产中，将其作为部署的一部分运行是有意义的（仅当您自上次部署以来添加了索引时才需要这样做，但系统地执行它会更容易）

文档中有很多关于 mongo 如何使用索引的[信息](http://www.mongodb.org/display/DOCS/Indexes)

# vba - 查找A列中的值是否包含B列中的值？

> ID：11315551
> 
> 赞同：42
> 
> 时间：2012-07-03T16:52:04.167
> 
> 标签：vba, excel, excel-2007

我有两列 - 列 E 延伸到 99504（值）和列 I 延伸到 2691（值）。这两列都包含带扩展名的文件名。

像这样的东西

```
E               I
TSL_groups.mrk  pcbx_report.mrk
abcd.mrk        jhuo.mrk 
```

等等...

我想查找 I 列（标题 Filename_B）中的文件是否存在于 E 列（标题 Filename_A）中。如果为真，则在新列中说 TRUE，让我们说 K 列。

我怎么做？TIA。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-03T17:07:03.293

你可以试试这个

```
=IF(ISNA(VLOOKUP(<single column I value>,<entire column E range>,1,FALSE)),FALSE, TRUE) 
```

-或者-

```
=IF(ISNA(VLOOKUP(<single column I value>,<entire column E range>,1,FALSE)),"FALSE", "File found in row "   & MATCH(<single column I value>,<entire column E range>,0)) 
```

你可以用命名的范围替换`<single column I value>`和。`<entire column E range>`那可能是最简单的。

只需将该公式一直拖到您想要的任何列中的 I 列的长度。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-03T17:47:14.587

您可以使用 VLOOKUP，但这需要一个包装函数来返回`True`或`False`。更不用说它（相对）缓慢。请改用 COUNTIF 或 MATCH。

在 I 列中现有值旁边的 K 列中填写此公式（从`I1`到`I2691`）：

```
=COUNTIF(<entire column E range>,<single column I value>)>0
=COUNTIF($E$1:$E$99504,$I1)>0 
```

您还可以使用 MATCH：

```
=NOT(ISNA(MATCH(<single column I value>,<entire column E range>)))
=NOT(ISNA(MATCH($I1,$E$1:$E$99504,0))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-12T08:41:53.480

你可以试试这个。:) 简单的解决方案！

```
=IF(ISNUMBER(MATCH(I1,E:E,0)),"TRUE","") 
```

# android - Multiple markers at this line - Syntax error on token ",", ; expected

> ID：11315552
> 
> 赞同：-1
> 
> 时间：2012-07-03T16:52:06.133
> 
> 标签：android

```
@Override
public void onActivityResult((int requestCode,int resultCode,Intent data))
{
    super.onActivityResult(requestCode, resultCode, data);
    fb.authorizeCallback(requestCode, resultCode, data);
} 
```

I actually took the above code from net and placed but am getting error like this:

Multiple markers at this line:

*   Syntax error on token ",", ; expected
*   Syntax error on token ",", ; expected
*   Syntax error on token(s), misplaced construct(s)
*   void is an invalid type for the variable onActivityResult
*   Syntax error, insert ";" to complete LocalVariableDeclarationStatement
*   Syntax error, insert ";" to complete LocalVariableDeclarationStatement

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:55:26.203

去掉多余的括号：

```
public void onActivityResult((int requestCode,int resultCode,Intent data)) 
```

试试这个：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:55:41.693

您的方法签名中有一组额外的括号。尝试使用：

```
@Override
protected void onActivityResult(int requestCode,int resultCode,Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    fb.authorizeCallback(requestCode, resultCode, data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T16:56:12.490

这一行：

```
public void onActivityResult((int requestCode,int resultCode,Intent data)) 
```

应该：

```
public void onActivityResult(int requestCode,int resultCode,Intent data) 
```

请注意删除了方法参数周围的第二组括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T16:56:42.560

参数说明的括号是多余的。尝试：

```
@Override
public void onActivityResult(int requestCode,int resultCode,Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    fb.authorizeCallback(requestCode, resultCode, data);
} 
```

## 编辑

如果仍然遇到语法错误，粘贴整个 Activity 类的源代码会很有帮助。

# javascript - OpenLayers SelectFeature control with hover delay?

> ID：11315554
> 
> 赞同：1
> 
> 时间：2012-07-03T16:52:07.573
> 
> 标签：javascript, openlayers

Using OpenLayers, I have a OpenLayers.Control.SelectFeature installed on a layer, with the hover option set to true. When creating the layer I call

```
<layer>.events.register("featureselected",...) 
```

and

```
<layer>.events.register("featureunselected",...) 
```

to register functions that create and destroy a popup. This all works fine. Now I want to add a small delay before the popup is created in order to avoid the popup flickering that currently occurs when moving the mouse across multiple features. However, I can't seem to figure out how to do this. I did find the OpenLayers.Handler.Hover handler, which has a delay option, but I don't know how to combine that with the SelectFeature control (if I even can).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:26:44.530

我认为[这篇文章](https://stackoverflow.com/questions/10448328/openlayers-steals-click-events-with-popups)有一些有价值的信息，我将对其进行验证。有人回答下来，有人议论忽悠。

**编辑：**如果您制作自己的标签，我注意到当您提高*labelOutlineWidth*时效果会变小。似乎只有标签的字母算作“悬停”，而不是整个 PointRadius 半径。当您使标签轮廓过大时，标签看起来就像一只撞到挡风玻璃上的苍蝇（不是正方形，但它遵循标签轮廓，更具体地说是字母）。

**更新：**显然这就是为什么当您悬停文本标签时，请查看：[指针事件属性](http://www.w3.org/TR/SVG11/interact.html#PointerEventsProperty)。在您的 OpenLayers.Style 中设置此属性 (pointerEvents: ) 并尝试值 'all' 和其他值。这对我来说肯定会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:02:30.377

我绑定我的功能选择有点不同，这是一个快速（未经测试）的示例，应该可以满足您的需求。

```
var timer,
delay = 500, //delay in ms
hover = new OpenLayers.Control.SelectFeature( <layer> , {

    hover: true,

    onSelect: function (feature) {

        // setup a timer to run select function
        timer = window.setTimeout(function () {

            // your select code

        }, delay);
    },

    onUnselect: function () {

        // first cancel the pending timer (no side effects)
        window.clearTimeout(timer);

        // your unselect code
    }

});

<map>.addControl(hover);

hover.activate(); 
```

# iphone - 什么是密钥以及如何使用它们？

> ID：11315555
> 
> 赞同：0
> 
> 时间：2012-07-03T16:52:09.430
> 
> 标签：iphone, objective-c, ios, ipad, nsurl

我正在开发兼容 iCloud 的应用程序，并且正在研究如何检测文件是否正在上传/下载或已完成。**我发现这可以通过 NSURL “键”来检测，**例如`NSURLUbiquitousItemIsDownloadingKey`或`NSURLUbiquitousItemIsUploadingKey`。我还在努力学习编程，那么这些键是什么？我如何使用它们来检测文件的状态（我希望应用程序知道文件何时完成上传到 iCloud 或完成下载（无论设备在哪一侧））。

我读到我可以用它`resourceValuesForKeys:error:`来查询这些键的状态，所以我会把它放到一个 IF 语句中，看看结果是否符合预期，例如“是”或“否”？谢谢你的帮助。

```
if ([destination resourceValuesForKeys:[NSArray arrayWithObject:NSURLUbiquitousItemIsUploadingKey] error:NULL]) {

    //is uploading??

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:55:12.560

您提出的代码看起来几乎可行，但有一件事：`resourceValuesForKeys:error:`返回一个字典，其键与您传入的常量相同，其值与[这些键的文档中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/uid/20000301-SW154)指定的值相同。在 的情况下`NSURLUbiquitousItemIsUploadingKey`，值是`NSNumber`包装`BOOL`值的实例。

所以......假设`destination`是`NSURL`指向您的无处不在容器中的一个项目：

```
NSError *error;
NSArray *keys = [NSArray arrayWithObject:NSURLUbiquitousItemIsUploadingKey];
NSDictionary *values = [destination resourceValuesForKeys:keys error:&error];
if (values == nil)
    NSLog(@"error: %@", error);
else if ([[values objectForKey:NSURLUbiquitousItemIsUploadingKey] boolValue])
    NSLog(@"uploading");
else
    NSLog(@"not uploading"); 
```

如果你只查询一个键，你可以使用[`getResourceValue:forKey:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/getResourceValue%3aforKey%3aerror%3a)更简洁一点。

# jquery - 来自已经 json 化的字符串的 JsonResult

> ID：11315558
> 
> 赞同：0
> 
> 时间：2012-07-03T16:52:14.860
> 
> 标签：jquery, json, model-view-controller

很抱歉这个虚拟问题，但我找不到一种简单而干净的方法来做这么简单的事情。我有一个 MVC 控制器，它应该返回一个 JSON 对象以供某些 JavaScript 使用；如果我将其返回类型设置为 JsonResult 并返回 Json(objecttoserialize) 我可以通过 Firebug 看到 JSON 代码被正确返回和解释。无论如何，我必须使用手动编码的 JSON 字符串，因为：

*   序列化我要返回的对象的组件托管在外部库中，我不应该触摸它。
*   该组件自行序列化，因为它有一个 Dictionary 成员，表示相应 JS 对象的属性 NAME 和 VALUE。

例如，字典中的条目（如键的“宽度”和值的“20”）必须序列化为 { width: "20" }，即好像 .NET 对象具有值为 20 的属性 Width，而它只是有一个字典，其中包含可变数量的此类属性/值对，由 JS 对象中的对象属性表示。这就是组件有自己的 JSON 序列化方法的原因。因此，我应该只返回它生成的 JSON。

由于 Json 方法序列化了一个 .NET 输入对象，我四处搜索发现我宁愿使用 ContentResult。因此，我尝试通过返回 ContentResult 与 Content=the 序列化字符串和 ContentType = "application/json"; 无论如何，JS 客户端似乎无法理解这是一个 JSON 对象并且失败了。相反，如果我返回一个 JsonResult 它会按预期工作，但它的 Dictionary 成员表示的属性当然会丢失。我期待 JsonResult 等同于上面的 ContentResult，但事实并非如此。JS代码如下：

```
request: function (nodeId, level, onComplete) {
$.ajax({
    url: "/Node/Get", type: "POST", dataType: "json",
    data: { id: nodeId, level: level, depth: 3 },
    success: function (data) {
        var ans = data;
        onComplete.onComplete(nodeId, ans);
    }
}); 
```

如果我在 Firebug 的脚本中放置一个断点，当我返回 JsonResult 时，成功函数被命中；当我返回 ContentResult 时，它永远不会被击中，并且页面仍然卡在加载请求的对象。（这个 JS 指的是 www.thejit.org 的 SpaceTree）。谁能给个提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:52:28.580

我设法用一种技巧让它工作，但我想知道是否有更好的解决方案，无论如何我真的需要使用 JsonResult （或派生类，比如在这个技巧中）让 JS 正常工作。我从 JsonResult 派生了一个类并更改了 ExecuteResult 方法，以便它只通过接收到的 JSON 字符串：

```
public sealed class PassthroughJsonResult : JsonResult
{
  public string Json { get; set; }

  public override void ExecuteResult(ControllerContext context)
  {
    if (context == null)
      throw new ArgumentNullException("context");

    HttpResponseBase response = context.HttpContext.Response;

    if (!String.IsNullOrEmpty(ContentType))
      response.ContentType = ContentType;
    else
      response.ContentType = "application/json";

    if (ContentEncoding != null)
      response.ContentEncoding = ContentEncoding;

    if (Json != null) response.Write(Json);
  }
} 
```

# macros - 球拍“匹配”结构 - 它是一个宏吗？

> ID：11315559
> 
> 赞同：3
> 
> 时间：2012-07-03T16:52:26.200
> 
> 标签：macros, pattern-matching, racket

简单的问题 - `match`Racket 中的表格是宏吗？看起来它当然可以定义为一个宏，但我认为它可能会进一步融入实现以使其更快或其他什么......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:07:55.123

是的。如果您对它的实现方式感到好奇，请参阅[这篇论文。](http://arxiv.org/abs/1106.2578)[通常，文档中此页面](http://docs.racket-lang.org/reference/syntax-model.html#(part._fully-expanded))上未列出的所有语法形式都构建为宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:53:55.370

`match`不是宏。这是一个常规的球拍功能。

编辑：我完全错了。匹配是一个宏。这是文档。[http://docs.racket-lang.org/reference/match.html](http://docs.racket-lang.org/reference/match.html)

# regex - 正则表达式修剪到（但不包括）最后一场比赛

> ID：11315560
> 
> 赞同：0
> 
> 时间：2012-07-03T16:52:26.573
> 
> 标签：regex

我正在使用正则表达式来修改 Twitter 帖子。我目前正在尝试将每条推文修剪到（但不包括）最后一次出现的转推字符串（例如：）`RT @Sam:`。我已经在过滤我的提要，以便只保留包含至少一个转推字符串的推文。我用来执行此操作的正则表达式是`RT @[A-Za-z0-9_]+:`.

所以，我的问题是，简单地说，我怎样才能修剪（切断）每个字符串，但不包括最后一次出现的`RT @[A-Za-z0-9_]+:`?

因此，例如：

> RT @Sam：看看苏珊怎么说。转发@苏珊：你好！

最终应该是：

> 转发@苏珊：你好！

（如果有帮助，我正在使用 Yahoo! Pipes 进行此实验。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:03:25.857

使用正则表达式`(RT @(?!.*@).+:.+)`查找匹配...

负前瞻`(?!.*@)`是一个条件，表示没有`@`超出这一点。

[在这里](http://regexr.com?31e8j)测试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:01:01.427

```
(.+)RT @.+:.+ 
```

第一个捕获组将包含除最后一个 RT 之外的所有内容 @[Anything]:[Anything]

# python - 找到由输入数字的数字组成的最大数字

> ID：11315562
> 
> 赞同：5
> 
> 时间：2012-07-03T16:52:32.557
> 
> 标签：python

我正在尝试编写一个函数，该函数返回由输入整数中的数字组成的最大数字。所以如果输入 = 123584 输出应该是 = 854321

我的代码是 -

```
def maxNumber(inputNumber):
    x = len(str(inputNumber))
    max_number = []
    result= []
    while(x>0):
        max_number.append(inputNumber%10)
        inputNumber = inputNumber/10
        x -= 1
    while(x<(len(str(max_number)))):
        result.append(max(max_number))
        x += 1
    return result

print maxNumber(1238675) 
```

并且偏离路线的输出不是我想要的。请帮忙。我渴望学习所有可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T16:54:57.917

```
def maxNumber(inputNumber):
    return int(''.join(sorted(str(inputNumber), reverse=True))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T16:54:25.840

最大的数字是通过按降序排列数字形成的。这可以使用`rverse=True`参数来实现`sorted()`：

```
def max_digit_permutation(n):
    return int("".join(sorted(str(n), reverse=True))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T17:00:44.187

这比迄今为止给出的大多数答案更可靠;-)

```
def max_number(n):
    s = str(n)
    digits = sorted(s, reverse=n>0)
    return int(''.join(digits))

print max_number(231)    
print max_number(-231)    
print max_number(+231) 
```

好点 - 我错过了单独使用数字的选项 - 这是为了完整性。:)

```
from math import *

def max_number(n):
    digit_count = int(log(abs(n+1),10)) + 1 
    digits = sorted([(n / 10 ** (x - 1) % 10)  for x in range(digit_count,0,-1) ], reverse=True)
    return reduce(lambda x, y:10*x + y, digits)

print max_number(1000)
print max_number(999)
print max_number(2345128)
print max_number(231) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T16:55:26.093

**对数字字符串进行 **排序**`reverse`，它，`join`它并转换为`int`**

 **```
>>> x=123584
>>> int(''.join(sorted(str(x))[::-1]))
854321 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T16:54:10.930

您可以将数字视为单个数字的列表，然后按降序对列表进行排序。

像这样的东西怎么样：

```
num = str(123584)
int(''.join(sorted(num, reverse=True))) 
```**

# html - 在另一个下方对齐单选按钮

> ID：11315570
> 
> 赞同：0
> 
> 时间：2012-07-03T16:52:56.620
> 
> 标签：html, css, css-float

我如何让单选按钮像这样在另一个下方显示一个？

```
 Sex                 (button)Male
                                     (button) Female 
```

不管我做什么，我都会这样

```
 Sex                 (button)Male
                   (button) Female 
```

我如何处理第二个单选按钮的左侧边距，使其位于第一个单选按钮的正下方？

```
 <label for="Sex">Sex:</label>
            <asp:RadioButton ID="male" runat="server" GroupName="gender" 
                    Text="Male"/>
            <br/>

            <asp:RadioButton ID="female" runat="server" GroupName="gender" Text="Female"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:58:29.593

您需要将项目分组并排`div`，或者添加额外的间距以对齐第二个项目。

浮动div：

```
<div style="float: left;">
       <span>Sex:</label>
</div>
<div style="float: left;">
    <asp:RadioButton ID="male" runat="server" GroupName="gender" Text="Male"/>
    <br/>
    <asp:RadioButton ID="female" runat="server" GroupName="gender" Text="Female"/>        
</div>
<div style="clear: both"></div> 
```

或填充：

```
<style>
    .radioButtonPadding {
        display: inline-block;
        width: 45px;
    }
</style>

<span class="radioButtonPadding">Sex:</label>
<asp:RadioButton ID="male" runat="server" GroupName="gender" Text="Male"/>
<br/>
<span class="radioButtonPadding">&nbsp;</label>
<asp:RadioButton ID="female" runat="server" GroupName="gender" Text="Female"/> 
```

您也可以将其作为[`RadioButtonList`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.aspx)

```
<style>
    .genderLabel {
        float: left;
        display: block;
    }
    .genderList {
        float: left;
    }
    .clear {
        clear: both;
    }
</style>

<asp:Label id="genderLabel" runat="server" CssClass="genderLabel"       
    Text="Sex:" AssociatedControlID="genderList"/>
<asp:RadioButtonList id="genderList" runat="server" CssClass="genderList">
   <asp:ListItem>Male</asp:ListItem>
   <asp:ListItem>Female</asp:ListItem>
</asp:RadioButtonList>
<div class="clear"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:59:14.703

[http://jsfiddle.net/charlescarver/fUvZR/1/](http://jsfiddle.net/charlescarver/fUvZR/1/)

您需要一个`div`具有设定宽度的容器，然后其中的两个`div`'s 浮动到两侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:59:20.210

使用 RadioButtonList

```
<asp:RadioButtonList ID="RadioButtonList1"
    runat="server" AutoPostBack="True" CausesValidation="True" 
    onselectedindexchanged="RadioButtonList1_SelectedIndexChanged">
    <asp:ListItem Selected="True">male</asp:ListItem>
    <asp:ListItem>female</asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T16:59:40.247

使用 RadioButtonList 控件，只需将 RepeatDirection 属性设置为 Horizo​​ntal：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.repeatdirection.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.repeatdirection.aspx)

# jquery - 如果它= x，jquery输入删除第一个字母

> ID：11315573
> 
> 赞同：2
> 
> 时间：2012-07-03T16:53:08.877
> 
> 标签：jquery, regex

我正在尝试创建一个函数来删除输入框的第一个字符，如果它=P。我们使用条形码扫描仪，它使用前缀 P，在扫描零件编号时，我想即时将其剥离。

```
<input id="part" onKeyUp="fixP(this.value);"  size="20" type="text" name="part" style="text-transform: uppercase;"/>
<script>
function fixP() {
    $('#part').val($('#part').val().substr(1).replace(/P/,""));
}
</script> 
```

这只会导致不断删除我在输入中键入的任何内容。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T16:56:21.647

为什么不加入 on change 事件呢？[http://jsfiddle.net/SKEwJ/2/](http://jsfiddle.net/SKEwJ/2/)

```
$("#part").change(function(){
    this.value = this.value.replace(/^[Pp]/,'');
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T16:54:51.110

那是因为您正在选择 substr 索引 1。

试试这个：

```
<input id="part" onKeyUp="fixP(this.value);"  size="20" type="text" name="part" style="text-transform: uppercase;"/>
<script>
function fixP() {
    $('#part').val($('#part').val().replace(/^P/,""));
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:02:38.210

```
$("#part").change(function(){
    $(this).val($(this).val().substring(1));
}); 
```

如果子字符串中省略了第二个参数，它将采用字符串的其余部分，如下所述：http: [//www.w3schools.com/jsref/jsref_substring.asp](http://www.w3schools.com/jsref/jsref_substring.asp)

如果您想稍后避免不必要的子字符串，您可以添加长度检查。

例如，结果总是 13 个字符长（开头没有“P”）：

```
$("#part").change(function(){
    if($(this).val().length==14) $(this).val($(this).val().substring(1));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:06:04.207

[http://jsfiddle.net/DrWz6/1/](http://jsfiddle.net/DrWz6/1/)

```
function fixP() {
    var value = $("#part").val();
    if(value.indexOf("p") == 0)
    {
        //alert("p");
        value = value.substring(1);
    }
    $("#part").val(value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:19:36.980

```
function fixP() {
    var elm = document.getElementById('part');
    elm.value = elm.value.toUpperCase().indexOf('P') === 0 ? elm.value.substring(1) : elm.value;
} 
```

[小提琴](http://jsfiddle.net/ecBhf/1/)

# c++ - GTK 应用程序：如何使用 Qt/C++ 创建工作指标？

> ID：11315574
> 
> 赞同：2
> 
> 时间：2012-07-03T16:53:09.287
> 
> 标签：c++, c, qt, gtk, indicator

我已经在 2 个论坛中尝试过，但到目前为止我没有运气。

所以，我使用 Qt IDE 来构建我的应用程序，以便参加 Ubuntu Showdown 比赛。在我的应用程序中，我做了以下事情：

```
 void show_app(MainWindow *data)
{
    //this works fine:
    app_indicator_set_status(appindicator, APP_INDICATOR_STATUS_PASSIVE);
    //this crashes the application:
    data->show();
}

void MainWindow::make_indicator()
{
    if(appindicator){
        //appindicator has already been created
        return;
    }
    appindicator = app_indicator_new("Format Junkie Indicator", "formatjunkie", APP_INDICATOR_CATEGORY_APPLICATION_STATUS);
    GtkWidget* showapp_option;
    GtkWidget* indicatormenu = gtk_menu_new();
    GtkWidget* item = gtk_menu_item_new_with_label("Format Junkie main menu");
    gtk_menu_item_set_submenu(GTK_MENU_ITEM(item), indicatormenu);

    showapp_option = gtk_menu_item_new_with_label("Show App!");
    g_signal_connect(showapp_option, "activate", G_CALLBACK(show_app), this);
    gtk_menu_shell_append(GTK_MENU_SHELL(indicatormenu), showapp_option);

    gtk_widget_show_all(indicatormenu);
    app_indicator_set_status(appindicator, APP_INDICATOR_STATUS_ACTIVE);
    app_indicator_set_attention_icon(appindicator, "dialog-warning");

    app_indicator_set_menu(appindicator, GTK_MENU (indicatormenu));
} 
```

所以，基本上我正在尝试制作一个简单的指示器条目，单击它会隐藏指示器并显示应用程序。可以使用那边的 PASSIVE 东西成功隐藏指示器，但是，在调用 data->show(); 期间，应用程序崩溃。

对我做错的任何帮助将不胜感激！另外，请帮助我纠正我面临的这个问题（或者，我将迁移到旧的和好的托盘图标（它在 Ubuntu 12.04 中运行良好，无论如何），我可以非常轻松有效地处理）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:53:44.080

信号的回调`activate`需要具有以下类型：

```
void callback(GtkMenuItem *, gpointer) 
```

所以`show_app`应该这样定义

```
void show_app(GtkMenuItem *showapp_option, MainWindow *data) 
```

那应该可以解决您的问题。

# java - video-steganography in java

> ID：11315577
> 
> 赞同：4
> 
> 时间：2012-07-03T16:53:40.650
> 
> 标签：java, video, steganography, xuggler

I need to create **steganographic videos** (videos with data hidden in them) for my project. I need to carry this out by extracting all the frames from a video and then hiding data in the selected frames by replacing bits in the LSB of the pixel color value and then encoding all the frames to create a new video(note here that lossless formats are required otherwise I might end up losing hidden data).

My research motivated me to use **xuggler** for manipulating videos, '**png**' format to save the extracted images as it is a lossless format(handling them as BufferedImage objects), and using '**avi**' video files. As of now I am able to extract all frames from a video and encode my hidden data in the lsb's.

But I am having **problems in creating the new avi video file using xuggler**. When ***I extract the frames from the new video they lose the hidden data***. I don't understand how to get this right and keep the data intact. This could be due to some lossy compression technique being used to create the new video.The size of the new video does not matter to me. I also can't find the correct codec_id to create the new video. I am extensively using xuggler tutorial available on wiki. **decode and capture frames** [http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/ws/workingcopy/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/ws/workingcopy/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java)

I can post my code as required...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:55:56.433

问题在于您使用的算法，因为 mpeg 或其他著名的视频压缩技术是有损压缩技术，当您将帧转换回视频流时，您将丢失数据。因此，在有损视频编解码器中，您不能将 LSB 技术用于隐写术。相反，您可以做的是以某种方式更改视频的运动矢量以隐藏隐写数据。问题在于，作为更高级别的 api 的 xuggler 可能无法为您提供查找/更改 p/b 帧的运动矢量的方法。xuggler 使用的 ffmpeg 确实有一个选项可以让您可视化运动矢量，因此对于运动矢量算法，您最好的选择是将 ffmpeg 的源代码更改为开源项目。如果您找到找到运动矢量的更好方法，请回复。

嗯，有一个更简单的视频隐写方法

可以参考[Real steganography with truecrypt](http://keyj.emphy.de/real-steganography-with-truecrypt/)

但是，如果您真的想使用 mpeg 视频压缩，您可以参考精彩的论文：[压缩视频流中的隐写术，](http://www.nlpr.labs.gov.cn/2006papers/gjhy/gh81.pdf)但问题仍然存在**于提取和操作运动矢量**

# linq - 如果 linq 到 DataTable，如何获取查询结果？

> ID：11315585
> 
> 赞同：0
> 
> 时间：2012-07-03T16:54:10.323
> 
> 标签：linq, c#-4.0

谁能告诉，如何获得 LINQ 查询的结果包含 group by to DataTable 。

```
var query= from d in dtable.AsEnumerable()
           group d by d["Id"];

WId FirstName LastName Age
1   Jass      we       23 
1   Mady      wer      54
3   Servy     gr       22
4   Jan       fr       11

Expected
    WId FirstName LastName Age
    1   Jass      we       23 
    3   Servy     gr       22
    4   Jan       fr       11 
```

谢谢普拉迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:20:59.317

如果您只想按 ID-Group 取第一人：

```
var distinctIdPersons = from p in dtable.AsEnumerable()
                        group p by p.Field<int>("WId") into IdGroups
                        select IdGroups.First(); 
```

或在方法语法中：

```
distinctIdPersons = dtable.AsEnumerable().GroupBy(r => r.Field<int>("WId"))
                                         .Select( g => g.First()); 
```

如果您想查看结果（用于测试目的），您可以使用`string.Join`：

```
var output = string.Join(", ", distinctIdPersons.Select(r => 
    r.Field<string>("FirstName") + " " + r.Field<string>("LastName")));
Console.WriteLine(output); // Jass we, Servy gr, Jan fr 
```

# iphone - UIWebView Still load the URL even though returning NO

> ID：11315590
> 
> 赞同：0
> 
> 时间：2012-07-03T16:54:25.703
> 
> 标签：iphone, objective-c, ios, uiwebview

I am handling a `UIWebView` so that i can control which URLs should be loaded within or not, but some how even though it is retuning the NO , it still load the page. Although documentation clearly says that if you return NO, the `UIWebView` wont load the page.

When i debug,i can see it is returning `NO` but still `UIWebView` does load the URL.

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSLog(@"%@", [[request URL] absoluteString]);
    NSString *fullURL = [[request URL] absoluteString];

    NSRange range = [fullURL rangeOfString:@"#"];
    if (range.length != 0) {
        NSLog(@"We need to show the other view");

        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:49:46.647

我解决了这个问题，在此处记录，以便对其他人有所帮助。实际上，我们使用一些 javascript 加载的 HTML 导致了这个问题。我发现只是使用了一些普通的 html 并用它们进行了测试。曾经，我们知道 HTML 有问题，我们修复了 html 并且它现在可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:04:29.597

在返回 YES 部分之前设置断点或 NSLog。也许您的方法由于某种原因被调用了两次，并且它在一个上返回 NO，在另一个上返回 YES。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:39:46.027

首先，确保您在 viewDidLoad 中设置委托

```
webView.delegate = self; 
```

（注意不要设置 2 次，在 xib 文件和 viewDidLoad 中，它之前给我带来了问题）

确保在你的类中实现 UIWebViewDelegate，如下所示：

```
@interface RootViewController : UIViewController<UIwebViewDelegate> 
```

假设您已经处理了所有这些问题，但您仍然面临问题。此外，由于您已调试并且确定委托方法返回 NO。我能想到为什么会发生这种情况的一个原因是您没有加载新页面，而是使用了 AJAX 之类的东西。

我在 2 种页面上测试了以下代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
{
    NSLog(@"THE loadCount is %d", self.loadCount);
    if (self.loadCount > 1){
        return NO;
    }
    self.loadCount++;
    return YES;
} 
```

**案例 1：**每个 URL 都加载一个新页面的网页。上面的代码在这种情况下有效，在第一次加载后我无法根据需要加载任何页面。

**案例2：**第一次加载的网页是一个全新的网页。但是其他所有内容都使用 AJAX 加载，在这种情况下，我的 loadCount 不会增加并且页面加载正常。

这就是我能想到的所有提供的数据。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-25T12:15:48.473

同样的问题，只是为了扩展上面的答案，在使用 rails 4 作为后端时要小心，因为 turbolinks 将 javascript 添加到每个链接，然后你可能会在你的委托上得到错误的行为，碰巧我在 shouldStartLoadWithRequest 上返回 NO 并且仍然看到我的请求服务器。

# c++ - 在移动构造函数之前调用析构函数？

> ID：11315593
> 
> 赞同：4
> 
> 时间：2012-07-03T16:54:29.557
> 
> 标签：c++, visual-studio-2010, c++11, move-semantics

我有一个看起来像这样的函数，它通过movesemantics返回一个不可复制的类：

```
MyClass&& MyFunction() {
  MyClass myClass;
  do some stuff;
  return std::move(myClass);
} 
```

然后它被访问

```
main() {
  MyClass myClass = MyFunction();
} 
```

该类`boost::noncopyable`用于防复制。它有构造函数、移动构造函数和移动赋值。我的问题是，析构函数在移动构造函数之前被调用。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:04:49.323

您正在返回对局部变量的引用。它是左值引用还是右值引用都没有关系。

你可能应该这样做

```
MyClass MyFunction() {
  MyClass myClass;
  do some stuff;
  return myClass;
} 
```

并让编译器弄清楚如何复制或移动结果。

# javascript - 如果尚未加载，则在 Bookmarklet 中加载 jQuery 和 jQuery UI

> ID：11315595
> 
> 赞同：2
> 
> 时间：2012-07-03T16:54:37.387
> 
> 标签：javascript, jquery, jquery-ui

我正在开发一个需要访问 jquery-ui 和 jquery min 的书签。当然，需要注意的是页面可能已经加载了 jQuery，应该避免冲突。

使用位于[http://benalman.com/code/javascript/jquery/jquery.ba-run-code-bookmarklet.js](http://benalman.com/code/javascript/jquery/jquery.ba-run-code-bookmarklet.js)的 Ben Alman 的代码，我已经能够优雅地引入 jQuery 并在 UI 中进行黑客攻击以加载，**但是延迟似乎存在问题，**并且 jQuery UI 还没有准备好立即运行......

在执行实际代码之前，是否有更好的方法来处理按顺序加载两个脚本？

```
(function( window, document, jQuery, req_version, callback, callback_orig, parent, script ){

  if ( !window[jQuery] || req_version > window[jQuery].fn.jquery ) {
    parent = document.documentElement.childNodes[0];
    script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js';
    parent.appendChild(script);

    callback_orig = callback;
    callback = function($, L) {
      '$:nomunge, L:nomunge';
      $(script).remove();
      callback_orig( $, L );
    };
  }

  if (typeof jQuery.ui == 'undefined'){
   parent = document.documentElement.childNodes[0];
   scriptui = document.createElement('script');
   scriptui.type = 'text/javascript';
   scriptui.src = 'https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.js';
   parent.appendChild(scriptui);
   alert('Loading your matches...');
  } 

  (function loopy($){
    '$:nomunge'; // Used by YUI compressor.

    ( $ = window[jQuery] ) && req_version <= $.fn.jquery
      ? callback( parent ? $.noConflict(1) : $, !!parent ) : setTimeout( loopy, 50 );
  })();

})( window, document, 'jQuery', '1.3.2',

 function($,L) {
    '$:nomunge, L:nomunge';   

<all the jquery stuff goes here> 
```

[Using jQuery UI in a Bookmarklet](https://stackoverflow.com/questions/6535641/using-jquery-ui-in-a-bookmarklet)有一个类似的问题，并提供了深入的答案，但我无法将其从 CoffeeMarklet 翻译为“标准”js。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:51:37.870

在这里查看我的要点 - 这是一个用于加载 jQuery 的书签模板，但您可以在执行之前指定要加载的其他脚本和 css。

[https://gist.github.com/2897748](https://gist.github.com/2897748)

你像这样初始化它。

编辑：如果您需要加载依赖项，您可以创建一个数组并根据不同的条件将内容推送到其中。

```
var jsDependencies = [];

// This will only load jQuery UI if it does not exist already.
// Of course if you rely on the page's copy, you have to do some 
// more advanced things to check for versions and whatnot.
if(!window.jQuery || !window.jQuery.ui){
  jsDependencies.push('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js');
}

var MyBookmarklet = MyBookmarklet || new Bookmarklet({
  // debug: true, // use debug to bust the cache on your resources
  css: ['/my/style.css'],
  js: jsDependencies,
  // jqpath: '/my/jquery.js', // defaults to google cdn-hosted jquery
  ready: function(base) { // use base to expose a public method
    base.init = function(){
      // doStuff();
    }    
    base.init();
  }
}); 
```

# delphi - 如何使用 Delphi XE2 在 Firebrid 客户端上设置服务器的主机名

> ID：11315605
> 
> 赞同：2
> 
> 时间：2012-07-03T16:55:08.903
> 
> 标签：delphi, delphi-xe2, firebird, hostname

我使用 firebird db 和 Delphi XE2 开发了一个客户端/服务器应用程序。问题是客户端上的 TSQLConnection 组件自动将 HostName 属性设置为 localhost。我想知道，我如何编写代码，让用户在客户端第一次启动时可以选择设置主机名。

我将 TSQLConnection 组件放在客户端的数据模块上。

在主窗体上，我为用户放置了一个选项来设置 HostName 属性，并使用以下代码分配用户在 TextBox 中输入的值：

```
Database.SQLServer.Params.Add('HostName='+edtHostName.Text); 
```

但似乎一旦程序启动 TSQLConnection 组件将主机名设置为 localhost，我无法将其设置为用户主机名。谁能帮帮我吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:41:06.483

主机名不是 dbexpress firebird 连接的有效属性，您必须使用该`DataBase`属性来指定使用这些格式之一的主机。

1) 指定端口、主机和数据库

```
 server_host/port:/path/to/database.fdb 
```

2）指定主机和数据库

```
 server_host:/path/to/database.fdb 
```

3) 仅指定数据库

```
/path/to/database.fdb 
```

所以使用 DbExpress 这看起来像

```
 SQLConnection1.Params.Values['Database']:='192.168.1.125/3050:C:\Program Files (x86)\Firebird\Firebird_2_0\examples\empbuild\EMPLOYEE.FDB'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:37:36.050

检查[embarcadero Wiki](http://docwiki.embarcadero.com/RADStudio/en/Setting_Up_TSQLConnection#Specifying_connection_parameters)有时很有用

> 指定连接参数
> 
> Params 属性是列出名称-值对的字符串列表。每对具有 Name=Value 的形式，其中 Name 是参数的名称，Value 是您要分配的值。您需要的特定参数取决于您使用的数据库服务器。但是，所有服务器都需要一个特定参数 Database。它的值取决于您使用的服务器。例如，对于 InterBase，Database 是 .gdb 文件的名称，对于 ORACLE，它是 TNSNames.ora 中的条目，而对于 DB2，它是客户端节点名称。其他典型参数包括 User_Name（登录时使用的名称）、Password（User_Name 的密码）、HostName（服务器所在的机器名或 IP 地址）、和 TransIsolation（您引入的事务了解其他事务所做更改的程度）。当您指定驱动程序名称时，Params 属性会预加载该驱动程序类型所需的所有参数，并初始化为默认值。您还可以根据应用程序的需要将其他连接参数添加到 Params 字符串列表中。例如，要使用 MSSQL 驱动程序为 SQL 连接提供多活动结果集 (MARS) 支持，您必须添加一个名为 Mars_Connection 的键并将其值设置为 True。因为 Params 是一个字符串列表，所以在设计时，您可以在 Object Inspector 中双击 Params 属性，使用字符串列表编辑器编辑参数。在运行时，使用 Params.Values 属性将值分配给各个参数。

# singleton - AdWhirl update viewControllerForPresentingModalView

> ID：11315607
> 
> 赞同：0
> 
> 时间：2012-07-03T16:55:17.660
> 
> 标签：singleton, admob, iad, viewcontroller, adwhirl

I've implemented a singleton to display adWhirl ads. However, when I change scenes in my storyboard app, the viewController for the ad is not updated until a new ad is requested. I have viewControllerForPresentingModalView implemented in the singleton and I set it with displayVC on every viewdDidLoad. But since the VC is not changed until a new ad is requested, any previous ads (specifically admob) cannot display fullscreen because their VC is set to the previous scene. Any help is greatly appreciated!

```
adWhirlSingleton *adWhirlSingle = [adWhirlSingleton sharedAdSingleton];
adWhirlSingle.displayVC = self;
[adWhirlSingle adjustAdSize:0 :self.view.frame.size.height -50];
[self.view addSubview:adWhirlSingle.awView];
[self.view bringSubviewToFront:adWhirlSingle.awView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:12:52.713

您的 ViewControllers 是否是某些包含 View Controller 的一部分（例如，它们是在 Navigation Controller 还是 Tabbed Controller 中？）。如果是，我建议将 displayVC 设置为包含视图控制器，这样您就不必更改它。

如果没有，也许[这里](http://googleadsdeveloper.blogspot.com/2012/04/creating-gadbannerview-singleton-in.html)概述的内容会有所帮助。基本上创建一个代理类型的类，然后将正确的消息转发到当前选择的 ViewController？

# ruby-on-rails-3 - 生产中未初始化的常量 ApplicationController::CanCan (NameError)

> ID：11315608
> 
> 赞同：0
> 
> 时间：2012-07-03T16:55:22.223
> 
> 标签：ruby-on-rails-3, cancan

我在生产中使用 nginx + unicorn

我在 log/unicorn.log 有以下错误，但它在 localhost 上工作正常（在开发和生产环境中）

```
I, [2012-07-01T19:20:39.905978 #15422]  INFO -- : Refreshing Gem list
E, [2012-07-01T19:20:40.526582 #15418] ERROR -- : uninitialized constant ApplicationController::CanCan (NameError) 
```

用于线

```
rescue_from CanCan::AccessDenied do |exception| 
```

[我在Gemfile](https://github.com/ck3g/link_manager/blob/master/Gemfile#L20)中有 gem 'cancan' （在 gem 'rails' 下方）。Cancan gem 已安装。我已经尝试了 1.6.7 和 1.6.8 两个版本

```
current$ bundle exec gem list cancan

*** LOCAL GEMS ***

cancan (1.6.7)

current$ bundle exec rails -v
Rails 3.2.3

current$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-linux]

current$ bundle exec rails c production
Loading production environment (Rails 3.2.3)
1.9.3p125 :001 > CanCan
 => CanCan 
1.9.3p125 :002 > 
```

我的配置有什么问题？

**更新：** `require 'cancan'`导致`application_controller`错误`No such file to load -- cancan (LoadError)`

[我的宝石文件](https://github.com/ck3g/link_manager/blob/master/Gemfile#L20)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:01:51.387

我认为`unicorn`重新启动时不会加载新的宝石。

```
/etc/init.d/unicorn_<project_name> stop
/etc/init.d/unicorn_<project_name> start 
```

解决问题

# facebook - Facebook user authentication on app server

> ID：11315609
> 
> 赞同：0
> 
> 时间：2012-07-03T16:55:23.877
> 
> 标签：facebook, facebook-graph-api

All I want is to find at least one working solution for this simple thing.
I want to determine what facebook user making request to my FB canvas application. I also want the mechanism to take into account cases when user logs off or re-logs on.
I've really broken my head on that :(

Ways i've already tried:
1) Getting and parsing signed_request param while user's initial request to the application. Cons: the canvas main page is the only place to get it. I never know what user is doing next actions.
2) Using fbsr cookie. Cons: sometimes i get error when trying to exchange cookie's code to user's access token. I still cant reproduce it, it just occurs. Btw, does it work at your?
3) Handling every get/post request at client side and adding user's access token being retrieved by JS SDK to the request. Doesnt seem to be a good way.

Well, that's it. What im doing wrong? Will be thankfull a lot for any working solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:03:34.623

> 1) 在用户对应用程序的初始请求时获取和解析signed_request 参数。缺点：画布主页是获得它的唯一地方。我永远不知道用户接下来会做什么。

那么只需将解析后的签名请求放入会话中......</p>

这就是我通常做的事情——每次`Facebook::getSignedRequest`产生其他结果时`null`，我都会将其写入我的会话中（所以我不会错过它是否被更新，用户喜欢该页面）。

# python - 强制范围通过零的通用算法

> ID：11315617
> 
> 赞同：0
> 
> 时间：2012-07-03T16:55:47.997
> 
> 标签：python

我正在寻找一种通用算法，它给定范围值`start`并将`end`生成一个数字列表，但**数字必须经过零。**. 这是我当前的代码：

```
end = 78
start = -1 * end
step_size = 16
numbers = range(start, end+step_size, step_size)

$ numbers
Out[90]: [-78, -62, -46, -30, -14, 2, 18, 34, 50, 66, 82] 
```

所以在这种特殊情况下，我会从每个数字中减去 2，这样数字就有一个零值。但我怎么能更普遍地做到这一点？我这样做是为了计算图形的 y-tic 位置，因此我希望它们通过零一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:00:42.047

`start % step_size`应该是所需的偏移量：

```
>>> end = 78
>>> start = -1 * end
>>> step_size = 16
>>> range(start-(start%step_size), end+step_size, step_size)
[-80, -64, -48, -32, -16, 0, 16, 32, 48, 64, 80] 
```

例子：

```
def get_range(end, step_size):
    start = -1 * end
    return range(start-(start%step_size), end+step_size, step_size)

>>> get_range(23, 4)
[-24, -20, -16, -12, -8, -4, 0, 4, 8, 12, 16, 20, 24]
>>> get_range(19, 11)
[-22, -11, 0, 11, 22]
>>> get_range(103, 32)
[-128, -96, -64, -32, 0, 32, 64, 96, 128] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:59:58.073

找到列表绝对值的最小值，从列表的每个元素中减去它。这不是最佳的解决方案，但它又快又脏，而且有效：

（我使用 numpy 是因为它比列表更有效，如果你使用 matplotlib，你可能有 numpy）

```
>>> from numpy import *
>>> a = arange(-10, 20, 3)
>>> b = argmin([abs(_) for _ in a])
>>> a-=a[b]
>>> a
array([-9, -6, -3,  0,  3,  6,  9, 12, 15, 18]) 
```

# java - 如何在 for 循环中自动增加变量名？

> ID：11315630
> 
> 赞同：1
> 
> 时间：2012-07-03T16:57:04.460
> 
> 标签：java, android, xml

**API 级别：** 12 (Android 3.1)

**应用背景：**通过我的 Android 应用，我向我们的 Web 服务器 MySQL 数据库发送请求以检索公司。所有这些工作正常。最初我有返回的数据填充 a `ListView`，但为了获得老板更喜欢的视觉效果，我有 6`TextView`的均匀分布。（此应用程序仅适用于一台设备，即三星 Galaxy Tab 10.1）

**问题：**所以，在解析返回的数据时，我有一个`for`循环。我想做的是自动增加一个变量，即`company_ + i`then `i++`。这在Java中是可能的还是有更好的方法？

这是一个我认为它会如何工作的例子：

```
int length = 5;

//parse JSON data
try{
    JSONArray jArray = new JSONArray(result);
    for(int i=0; i < length; i++){

        TextView company = (TextView)findViewById(R.id.company_ + i);

        JSONObject jObject = jArray.getJSONObject(i);
            String businessName = jObject.getString("businessName");
            double distance = jObject.getDouble("distance");

            double distRound = 1e5;
            double roDistance = Math.round(distance * distRound) / distRound;

            company.setText(businessName);
            company.append(Html.fromHtml("<br>"));
            company.append("Approximate distance:   " + roDistance + " feet."); 
```

* * *

**抛出的错误：** `The operator + is undefined for the argument type(s) TextView, int`。这是有道理的，但是我习惯于在 PHP 中工作，我经常这样做。

* * *

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/location_select"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/row_2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="2" >

        <TextView
            android:id="@+id/company_1"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="top|left"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />

        <TextView
            android:id="@+id/company_2"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="top|right"
            android:layout_marginTop="0dp"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row_3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="2"
        android:layout_below="@id/row_2" >

        <TextView
            android:id="@+id/company_3"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="bottom|left"
            android:layout_marginLeft="0dp"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />

        <TextView
            android:id="@+id/company_4"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="bottom|right"
            android:layout_marginRight="0dp"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row_4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="2"
        android:layout_below="@id/row_3" >

        <TextView
            android:id="@+id/company_5"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="bottom|left"
            android:layout_marginLeft="0dp"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />

        <TextView
            android:id="@+id/next_5"
            android:layout_width="0dp"
            android:layout_height="200dp"
            android:layout_gravity="bottom|right"
            android:layout_marginRight="0dp"
            android:layout_weight="1"
            android:textIsSelectable="true"
            android:textSize="25sp" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:03:56.253

如果 Textview 保持不变，那么你可以这样做..

```
int[] companyIds = { R.id.company_id_1,
        R.id.company_id_2, R.id.company_id_3,...}; 
```

并在代码中执行此操作

```
TextView company_select = (TextView)findViewById(companyIds[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:03:09.497

你真的确定这条线，

```
TextView company_select = company_ + i; 
```

?? 该行引发错误（异常）。

那条线是什么意思，你想达到什么目的？

只需将您的 textview 的 id 存储在 int 数组中即可。

```
int[] textviewIds = { R.id.company_id_1,
        R.id.company_id_2, R.id.company_id_3,R.id.company_id_4,R.id.company_id_5...}; 
```

并在你的 for 循环中使用这个数组，

```
TextView company_select = (TextView)findViewById(textviewIds[i]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:04:17.407

你正在做的方式是不可能的。

您可以使用反射，但这将是矫枉过正。尝试以下

```
List<Integer> companies= Arrays.asList(R.id.company_1,R.id.company_2,R.id.company_3,R.id.company_4,R.id.company_5); 
```

并得到它：

```
companies.get(i%5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:03:39.457

您可以使用[Integer.toString()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#toString%28int%29)
然后调用将是`TextView company_select = company_ + Integer.toString(i);`

# java - 同步对象

> ID：11315638
> 
> 赞同：1
> 
> 时间：2012-07-03T16:57:34.393
> 
> 标签：java, synchronized

我有简单的代码：

```
public class testing {
    private static Object objToSync = new Object();

    public static void main(String[] args) {
        String obj1 = null;
        synchronized(objToSync){
            System.out.println("something one");                    
            doSomething();
            System.out.println("something three ");         
        }

        doSomething();      
    }

    private static void doSomething() {
        synchronized(objToSync){
            System.out.println("something two");
        }       
    } 
```

我已经阅读了几件事，但仍然对此感到困惑。为什么调用 main 中的 doSomething ？难道不应该等到同步对象解锁吗？对不起，如果我听起来很愚蠢，我只是很困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T16:59:55.873

> 难道不应该等到同步对象解锁吗？

锁由*thread*持有，因此您在其上同步两次（在第一次调用 in 的情况下`doSomething`）这一`main`事实并不重要，它在同一个线程上。如果*另一个*线程随后尝试进入`synchronized`上的块`objToSync`，则该*其他*线程将等待直到该线程释放其所有锁。

您的代码将执行此操作：

1.  进入`main`
2.  `objToSync`获取对象上当前线程的锁
3.  输出“某物”
4.  称呼`doSomething`
5.  为当前线程获取第二个锁`objToSync`
6.  输出“东西二”
7.  释放当前线程的第二个锁`objToSync`
8.  从返回`doSomething`
9.  输出“三点”
10.  释放当前线程的第一个锁`objToSync`
11.  称呼`doSomething`
12.  获取一个新的锁（对于同一个线程）`objToSync`
13.  输出“东西二”
14.  释放那个锁
15.  从返回`doSomething`
16.  从返回`main`

这是一个使用两个线程的示例：

```
public class SyncExample {

    private static Object objToSync = new Object();

    public static final void main(String[] args) {
        Thread second;

        System.out.println("Main thread acquiring lock");
        synchronized (objToSync) {
            System.out.println("Main thread has lock, spawning second thread");
            second = new Thread(new MyRunnable());
            second.start();
            System.out.println("Main thread has started second thread, sleeping a moment");
            try {
                Thread.currentThread().sleep(250);
            }
            catch (Exception e) {
            }
            System.out.println("Main thread releasing lock");
        }
        System.out.println("Main thread sleeping again");
        try {
            Thread.currentThread().sleep(250);
        }
        catch (Exception e) {
        }
        System.out.println("Main thread waiting for second thread to complete");
        try {
            second.join();
        }
        catch (Exception e) {
        }
        System.out.println("Main thread exiting");
    }

    static class MyRunnable implements Runnable {

        public void run() {
            System.out.println("Second thread running, acquiring lock");
            synchronized (objToSync) {
                System.out.println("Second thread has lock, sleeping a moment");
                try {
                    Thread.currentThread().sleep(250);
                }
                catch (Exception e) {
                }
                System.out.println("Second thread releasing lock");
            }
            System.out.println("Second thread is done");
        }
    }
} 
```

输出：

```
主线程获取锁
主线程有锁，产生第二个线程
主线程已经启动了第二个线程，睡了一会儿
第二个线程运行，获取锁
主线程释放锁
主线程再次休眠
第二个线程有锁，睡一会儿
主线程等待第二个线程完成
第二个线程释放锁
第二个线程完成
主线程退出
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T17:05:57.100

锁是`reentrant`如此，如果某些线程拥有锁，它可以基于该锁进入其他同步块。在您的情况下，您只有一个线程（主线程），而他正在做这样的事情

```
synchronized(objToSync){
    System.out.println("something one");                    
    synchronized(objToSync){
        System.out.println("something two");
    }
    System.out.println("something three");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T17:10:45.280

锁是同一线程的可重入。这意味着已获得对象锁定的线程可以访问对象的 this 和任何其他同步方法（或原子语句，如您的示例中的此处）。一旦获得锁，该线程将不需要再次获得锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:00:22.393

那是因为你的程序只有 1 个线程——主线程。

# python - python：绘制顶部带有函数线的直方图

> ID：11315641
> 
> 赞同：19
> 
> 时间：2012-07-03T16:57:40.717
> 
> 标签：python, matplotlib, scipy

我正在尝试在 Python 中使用 SciPy 进行一些分布绘图和拟合，使用 SciPy 进行统计，使用 matplotlib 进行绘图。我在创建直方图之类的事情上运气不错：

```
seed(2)
alpha=5
loc=100
beta=22
data=ss.gamma.rvs(alpha,loc=loc,scale=beta,size=5000)
myHist = hist(data, 100, normed=True) 
```

![在此处输入图像描述](../Images/d2408d6dba8db97dd82c687581dc4790.png)

杰出的！

我什至可以采用相同的伽马参数并绘制概率分布函数的线函数（经过一些谷歌搜索）：

```
rv = ss.gamma(5,100,22)
x = np.linspace(0,600)
h = plt.plot(x, rv.pdf(x)) 
```

![在此处输入图像描述](../Images/3d7bbd3426b5826cc175264a0358923a.png)

我将如何使用叠加在直方图顶部的`myHist`PDF 线绘制直方图？`h`我希望这是微不足道的，但我一直无法弄清楚。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T17:43:08.007

只需将两部分放在一起。

```
import scipy.stats as ss
import numpy as np
import matplotlib.pyplot as plt
alpha, loc, beta=5, 100, 22
data=ss.gamma.rvs(alpha,loc=loc,scale=beta,size=5000)
myHist = plt.hist(data, 100, normed=True)
rv = ss.gamma(alpha,loc,beta)
x = np.linspace(0,600) 
h = plt.plot(x, rv.pdf(x), lw=2)
plt.show() 
```

![在此处输入图像描述](../Images/ebbfa85850a2f325d1354bb5518332bb.png)

为确保您在任何特定的绘图实例中获得所需的内容，请先尝试创建一个`figure`对象

```
import scipy.stats as ss
import numpy as np
import matplotlib.pyplot as plt
# setting up the axes
fig = plt.figure(figsize=(8,8))
ax  = fig.add_subplot(111)
# now plot
alpha, loc, beta=5, 100, 22
data=ss.gamma.rvs(alpha,loc=loc,scale=beta,size=5000)
myHist = ax.hist(data, 100, normed=True)
rv = ss.gamma(alpha,loc,beta)
x = np.linspace(0,600)
h = ax.plot(x, rv.pdf(x), lw=2)
# show
plt.show() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-07T21:56:48.450

人们可能对绘制任何直方图的分布函数感兴趣。这可以使用`seaborn kde`函数来完成

```
import numpy as np # for random data
import pandas as pd  # for convinience
import matplotlib.pyplot as plt  # for graphics
import seaborn as sns  # for nicer graphics

v1 = pd.Series(np.random.normal(0,10,1000), name='v1')
v2 = pd.Series(2*v1 + np.random.normal(60,15,1000), name='v2')

# plot a kernel density estimation over a stacked barchart
plt.figure()
plt.hist([v1, v2], histtype='barstacked', normed=True);
v3 = np.concatenate((v1,v2))
sns.kdeplot(v3);
plt.show() 
```

[![在此处输入图像描述](../Images/b2cf54bc0928f2527740594c532ee0d4.png)](https://i.stack.imgur.com/X87JB.png) 来自关于使用 python 进行数据可视化的 coursera 课程

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-04T19:49:07.320

扩展 Malik 的答案，并尝试坚持使用 vanilla NumPy、SciPy 和 Matplotlib。我加入了 Seaborn，但它仅用于提供更好的默认设置和小的视觉调整：

```
import numpy as np
import scipy.stats as sps
import matplotlib.pyplot as plt

import seaborn as sns
sns.set(style='ticks')

# parameterise our distributions
d1 = sps.norm(0, 10)
d2 = sps.norm(60, 15)

# sample values from above distributions
y1 = d1.rvs(300)
y2 = d2.rvs(200)
# combine mixture
ys = np.concatenate([y1, y2])

# create new figure with size given explicitly
plt.figure(figsize=(10, 6))

# add histogram showing individual components
plt.hist([y1, y2], 31, histtype='barstacked', density=True, alpha=0.4, edgecolor='none')

# get X limits and fix them
mn, mx = plt.xlim()
plt.xlim(mn, mx)

# add our distributions to figure
x = np.linspace(mn, mx, 301)
plt.plot(x, d1.pdf(x) * (len(y1) / len(ys)), color='C0', ls='--', label='d1')
plt.plot(x, d2.pdf(x) * (len(y2) / len(ys)), color='C1', ls='--', label='d2')

# estimate Kernel Density and plot
kde = sps.gaussian_kde(ys)
plt.plot(x, kde.pdf(x), label='KDE')

# finish up
plt.legend()
plt.ylabel('Probability density')
sns.despine() 
```

给我们以下情节：

[![金钱射击](../Images/e9749b807a0e50d1055f240a49ee4786.png)](https://i.stack.imgur.com/2FX7e.png)

我试图坚持使用最少的功能集，同时产生相对较好的输出，特别是使用 SciPy 来估计 KDE 非常容易。

# java - JTextArea 不调整大小

> ID：11315644
> 
> 赞同：0
> 
> 时间：2012-07-03T16:57:54.070
> 
> 标签：java, swing, jpanel, resize, jtextarea

我试图设置`JTextArea`为`JPanel`

```
JPanel panel=new JPanel(new BorderLayout());
JTextArea ta=new JTextArea();
ta.setColumns(20);
ta.setEditable(false);
ta.setLineWrap(true);
ta.setRows(5);
ta.setWrapStyleWord(true);

panel.add(ta,BorderLayout.CENTER);

JPanel panel1=new JPanel();
panel1.setLayout(new VerticalLayout(5,VerticalLayout.BOTH));
panel1.add(panel);

JFrame frame=new JFrame();
frame.getContentPane().add(panel1);
    ... 
```

问题是......当`panel1`重新调整尺寸更宽然后变窄时，`JTextArea`就会**被切断**。我的意思是它的行不会恢复到 5，而是保持为 1，所以它的所有文本都在一行中，当然，它`WrapStyleWord`是非活动的：S

所以我的问题是如何`JTextArea`在调整帧大小时恢复到原来的比例？

这是[垂直布局](http://www.java2s.com/Code/Java/Swing-JFC/AverticallayoutmanagersimilartojavaawtFlowLayout.htm)代码。

...

好吧，基于 Guillaume Polet 片段，我尝试编写某种垂直面板*列表*，但出现了前面提到的问题 :( 这是代码

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.LayoutManager;
import java.util.Hashtable;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TestTextArea {

    private void initUI() {
        JFrame frame = new JFrame("test");

        JPanel listPanel = new JPanel();
        listPanel.setLayout(new VerticalLayout(5, VerticalLayout.BOTH));

        JPanel mainPanel=new JPanel(new GridLayout());
        JScrollPane sp=new JScrollPane();
        sp.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        sp.setViewportView(listPanel);

        mainPanel.add(sp);

        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTextArea().initUI();
            }
        });
    }

    class MyPanel extends JPanel
    {
        public MyPanel(){

        this.setLayout(new BorderLayout());

        JTextArea ta = new JTextArea();
        ta.setText("Hello world Hello world Hello world Hello world " + "Hello world Hello world Hello world Hello world "
                + "Hello world Hello world Hello world Hello world " + "Hello world Hello world Hello world Hello world ");
        ta.setColumns(20);
        ta.setEditable(false);
        ta.setLineWrap(true);
        ta.setRows(5);
        ta.setWrapStyleWord(true);

        this.add(ta, BorderLayout.CENTER);

        }

    }

    public static class VerticalLayout implements LayoutManager {

        /**
         * The horizontal alignment constant that designates centering. Also used to designate center anchoring.
         */
        public final static int CENTER = 0;
        /**
         * The horizontal alignment constant that designates right justification.
         */
        public final static int RIGHT = 1;
        /**
         * The horizontal alignment constant that designates left justification.
         */
        public final static int LEFT = 2;
        /**
         * The horizontal alignment constant that designates stretching the component horizontally.
         */
        public final static int BOTH = 3;

        /**
         * The anchoring constant that designates anchoring to the top of the display area
         */
        public final static int TOP = 1;
        /**
         * The anchoring constant that designates anchoring to the bottom of the display area
         */
        public final static int BOTTOM = 2;
        private int vgap; // the vertical vgap between components...defaults to 5
        private int alignment; // LEFT, RIGHT, CENTER or BOTH...how the components are justified
        private int anchor; // TOP, BOTTOM or CENTER ...where are the components positioned in an overlarge space
        private Hashtable comps;

        // Constructors
        /**
         * Constructs an instance of VerticalLayout with a vertical vgap of 5 pixels, horizontal centering and anchored to the top of the
         * display area.
         */
        public VerticalLayout() {
            this(5, CENTER, TOP);
        }

        /**
         * Constructs a VerticalLayout instance with horizontal centering, anchored to the top with the specified vgap
         *
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         */
        public VerticalLayout(int vgap) {
            this(vgap, CENTER, TOP);
        }

        /**
         * Constructs a VerticalLayout instance anchored to the top with the specified vgap and horizontal alignment
         *
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         * @param alignment
         *            An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code> for the horizontal alignment.
         */
        public VerticalLayout(int vgap, int alignment) {
            this(vgap, alignment, TOP);
        }

        /**
         * Constructs a VerticalLayout instance with the specified vgap, horizontal alignment and anchoring
         *
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         * @param alignment
         *            An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code> for the horizontal alignment.
         * @param anchor
         *            An int value which is one of <code>TOP, BOTTOM, CENTER</code> indicating where the components are to appear if the
         *            display area exceeds the minimum necessary.
         */
        public VerticalLayout(int vgap, int alignment, int anchor) {
            this.vgap = vgap;
            this.alignment = alignment;
            this.anchor = anchor;
        }

        // ----------------------------------------------------------------------------
        private Dimension layoutSize(Container parent, boolean minimum) {
            Dimension dim = new Dimension(0, 0);
            Dimension d;
            synchronized (parent.getTreeLock()) {
                int n = parent.getComponentCount();
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    if (c.isVisible()) {
                        d = minimum ? c.getMinimumSize() : c.getPreferredSize();
                        dim.width = Math.max(dim.width, d.width);
                        dim.height += d.height;
                        if (i > 0) {
                            dim.height += vgap;
                        }
                    }
                }
            }
            Insets insets = parent.getInsets();
            dim.width += insets.left + insets.right;
            dim.height += insets.top + insets.bottom + vgap + vgap;
            return dim;
        }

        // -----------------------------------------------------------------------------
        /**
         * Lays out the container.
         */
        @Override
        public void layoutContainer(Container parent) {
            Insets insets = parent.getInsets();
            synchronized (parent.getTreeLock()) {
                int n = parent.getComponentCount();
                Dimension pd = parent.getSize();
                int y = 0;
                // work out the total size
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    Dimension d = c.getPreferredSize();
                    y += d.height + vgap;
                }
                y -= vgap; // otherwise there's a vgap too many
                // Work out the anchor paint
                if (anchor == TOP) {
                    y = insets.top;
                } else if (anchor == CENTER) {
                    y = (pd.height - y) / 2;
                } else {
                    y = pd.height - y - insets.bottom;
                }
                // do layout
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    Dimension d = c.getPreferredSize();
                    int x = insets.left;
                    int wid = d.width;
                    if (alignment == CENTER) {
                        x = (pd.width - d.width) / 2;
                    } else if (alignment == RIGHT) {
                        x = pd.width - d.width - insets.right;
                    } else if (alignment == BOTH) {
                        wid = pd.width - insets.left - insets.right;
                    }
                    c.setBounds(x, y, wid, d.height);
                    y += d.height + vgap;
                }
            }
        }

        // -----------------------------------------------------------------------------
        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return layoutSize(parent, false);
        }

        // -----------------------------------------------------------------------------
        @Override
        public Dimension preferredLayoutSize(Container parent) {
            return layoutSize(parent, false);
        }

        // ----------------------------------------------------------------------------
        /**
         * Not used by this class
         */
        @Override
        public void addLayoutComponent(String name, Component comp) {
        }

        // -----------------------------------------------------------------------------
        /**
         * Not used by this class
         */
        @Override
        public void removeLayoutComponent(Component comp) {
        }

        // -----------------------------------------------------------------------------
        @Override
        public String toString() {
            return getClass().getName() + "[vgap=" + vgap + " align=" + alignment + " anchor=" + anchor + "]";
        }
    }

} 
```

我不太确定如何使 JTextArea 达到其原始宽度？或者也许有一些更优化的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:18:45.403

您似乎在发布[SSCCE](http://sscce.org)时遇到了问题，所以也许您可以从这个开始，可能会更改它，然后编辑您的问题，向我们展示您遇到的问题。

编辑：（根据更新的问题更改了 SSCCE）

问题是滚动窗格的ViewPortView没有实现Scrollable。使用作为 ViewPortView 添加的专用类 ScrollablePanel 尝试下面的代码。

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.LayoutManager;
import java.awt.Rectangle;
import java.util.Hashtable;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.Scrollable;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;

public class TestTextArea {

    private void initUI() {
        JFrame frame = new JFrame("test");

        class ScrollablePanel extends JPanel implements Scrollable {

            /**
             * Returns the preferred size of the viewport for a view component. This is implemented to do the default behavior of returning
             * the preferred size of the component.
             * 
             * @return the <code>preferredSize</code> of a <code>JViewport</code> whose view is this <code>Scrollable</code>
             */
            @Override
            public Dimension getPreferredScrollableViewportSize() {
                return getPreferredSize();
            }

            /**
             * Components that display logical rows or columns should compute the scroll increment that will completely expose one new row
             * or column, depending on the value of orientation. Ideally, components should handle a partially exposed row or column by
             * returning the distance required to completely expose the item.
             * <p>
             * The default implementation of this is to simply return 10% of the visible area. Subclasses are likely to be able to provide a
             * much more reasonable value.
             * 
             * @param visibleRect
             *            the view area visible within the viewport
             * @param orientation
             *            either <code>SwingConstants.VERTICAL</code> or <code>SwingConstants.HORIZONTAL</code>
             * @param direction
             *            less than zero to scroll up/left, greater than zero for down/right
             * @return the "unit" increment for scrolling in the specified direction
             * @exception IllegalArgumentException
             *                for an invalid orientation
             * @see JScrollBar#setUnitIncrement
             */
            @Override
            public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
                switch (orientation) {
                case SwingConstants.VERTICAL:
                    return visibleRect.height / 10;
                case SwingConstants.HORIZONTAL:
                    return visibleRect.width / 10;
                default:
                    throw new IllegalArgumentException("Invalid orientation: " + orientation);
                }
            }

            /**
             * Components that display logical rows or columns should compute the scroll increment that will completely expose one block of
             * rows or columns, depending on the value of orientation.
             * <p>
             * The default implementation of this is to simply return the visible area. Subclasses will likely be able to provide a much
             * more reasonable value.
             * 
             * @param visibleRect
             *            the view area visible within the viewport
             * @param orientation
             *            either <code>SwingConstants.VERTICAL</code> or <code>SwingConstants.HORIZONTAL</code>
             * @param direction
             *            less than zero to scroll up/left, greater than zero for down/right
             * @return the "block" increment for scrolling in the specified direction
             * @exception IllegalArgumentException
             *                for an invalid orientation
             * @see JScrollBar#setBlockIncrement
             */
            @Override
            public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
                switch (orientation) {
                case SwingConstants.VERTICAL:
                    return visibleRect.height;
                case SwingConstants.HORIZONTAL:
                    return visibleRect.width;
                default:
                    throw new IllegalArgumentException("Invalid orientation: " + orientation);
                }
            }

            /**
             * Returns true if a viewport should always force the width of this <code>Scrollable</code> to match the width of the viewport.
             * For example a normal text view that supported line wrapping would return true here, since it would be undesirable for wrapped
             * lines to disappear beyond the right edge of the viewport. Note that returning true for a <code>Scrollable</code> whose
             * ancestor is a <code>JScrollPane</code> effectively disables horizontal scrolling.
             * <p>
             * Scrolling containers, like <code>JViewport</code>, will use this method each time they are validated.
             * 
             * @return true if a viewport should force the <code>Scrollable</code>s width to match its own
             */
            @Override
            public boolean getScrollableTracksViewportWidth() {
                return true;
            }

            /**
             * Returns true if a viewport should always force the height of this <code>Scrollable</code> to match the height of the
             * viewport. For example a columnar text view that flowed text in left to right columns could effectively disable vertical
             * scrolling by returning true here.
             * <p>
             * Scrolling containers, like <code>JViewport</code>, will use this method each time they are validated.
             * 
             * @return true if a viewport should force the Scrollables height to match its own
             */
            @Override
            public boolean getScrollableTracksViewportHeight() {
                return false;
            }

        }

        JPanel listPanel = new ScrollablePanel();
        listPanel.setLayout(new VerticalLayout(5, VerticalLayout.BOTH));

        JPanel mainPanel = new JPanel(new GridLayout());
        JScrollPane sp = new JScrollPane();
        sp.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        sp.setViewportView(listPanel);

        mainPanel.add(sp);

        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());
        listPanel.add(new MyPanel());

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTextArea().initUI();
            }
        });
    }

    class MyPanel extends JPanel {
        public MyPanel() {

            this.setLayout(new BorderLayout());

            JTextArea ta = new JTextArea();
            ta.setText("Hello world Hello world Hello world Hello world " + "Hello world Hello world Hello world Hello world "
                    + "Hello world Hello world Hello world Hello world " + "Hello world Hello world Hello world Hello world ");
            ta.setColumns(20);
            ta.setEditable(false);
            ta.setLineWrap(true);
            ta.setRows(5);
            ta.setWrapStyleWord(true);

            this.add(ta, BorderLayout.CENTER);

        }

    }

    public static class VerticalLayout implements LayoutManager {

        /**
         * The horizontal alignment constant that designates centering. Also used to designate center anchoring.
         */
        public final static int CENTER = 0;
        /**
         * The horizontal alignment constant that designates right justification.
         */
        public final static int RIGHT = 1;
        /**
         * The horizontal alignment constant that designates left justification.
         */
        public final static int LEFT = 2;
        /**
         * The horizontal alignment constant that designates stretching the component horizontally.
         */
        public final static int BOTH = 3;

        /**
         * The anchoring constant that designates anchoring to the top of the display area
         */
        public final static int TOP = 1;
        /**
         * The anchoring constant that designates anchoring to the bottom of the display area
         */
        public final static int BOTTOM = 2;
        private int vgap; // the vertical vgap between components...defaults to 5
        private int alignment; // LEFT, RIGHT, CENTER or BOTH...how the components are justified
        private int anchor; // TOP, BOTTOM or CENTER ...where are the components positioned in an overlarge space
        private Hashtable comps;

        // Constructors
        /**
         * Constructs an instance of VerticalLayout with a vertical vgap of 5 pixels, horizontal centering and anchored to the top of the
         * display area.
         */
        public VerticalLayout() {
            this(5, CENTER, TOP);
        }

        /**
         * Constructs a VerticalLayout instance with horizontal centering, anchored to the top with the specified vgap
         * 
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         */
        public VerticalLayout(int vgap) {
            this(vgap, CENTER, TOP);
        }

        /**
         * Constructs a VerticalLayout instance anchored to the top with the specified vgap and horizontal alignment
         * 
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         * @param alignment
         *            An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code> for the horizontal alignment.
         */
        public VerticalLayout(int vgap, int alignment) {
            this(vgap, alignment, TOP);
        }

        /**
         * Constructs a VerticalLayout instance with the specified vgap, horizontal alignment and anchoring
         * 
         * @param vgap
         *            An int value indicating the vertical seperation of the components
         * @param alignment
         *            An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code> for the horizontal alignment.
         * @param anchor
         *            An int value which is one of <code>TOP, BOTTOM, CENTER</code> indicating where the components are to appear if the
         *            display area exceeds the minimum necessary.
         */
        public VerticalLayout(int vgap, int alignment, int anchor) {
            this.vgap = vgap;
            this.alignment = alignment;
            this.anchor = anchor;
        }

        // ----------------------------------------------------------------------------
        private Dimension layoutSize(Container parent, boolean minimum) {
            Dimension dim = new Dimension(0, 0);
            Dimension d;
            synchronized (parent.getTreeLock()) {
                int n = parent.getComponentCount();
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    if (c.isVisible()) {
                        d = minimum ? c.getMinimumSize() : c.getPreferredSize();
                        dim.width = Math.max(dim.width, d.width);
                        dim.height += d.height;
                        if (i > 0) {
                            dim.height += vgap;
                        }
                    }
                }
            }
            Insets insets = parent.getInsets();
            dim.width += insets.left + insets.right;
            dim.height += insets.top + insets.bottom + vgap + vgap;
            return dim;
        }

        // -----------------------------------------------------------------------------
        /**
         * Lays out the container.
         */
        @Override
        public void layoutContainer(Container parent) {
            Insets insets = parent.getInsets();
            synchronized (parent.getTreeLock()) {
                int n = parent.getComponentCount();
                Dimension pd = parent.getSize();
                int y = 0;
                // work out the total size
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    Dimension d = c.getPreferredSize();
                    y += d.height + vgap;
                }
                y -= vgap; // otherwise there's a vgap too many
                // Work out the anchor paint
                if (anchor == TOP) {
                    y = insets.top;
                } else if (anchor == CENTER) {
                    y = (pd.height - y) / 2;
                } else {
                    y = pd.height - y - insets.bottom;
                }
                // do layout
                for (int i = 0; i < n; i++) {
                    Component c = parent.getComponent(i);
                    Dimension d = c.getPreferredSize();
                    int x = insets.left;
                    int wid = d.width;
                    if (alignment == CENTER) {
                        x = (pd.width - d.width) / 2;
                    } else if (alignment == RIGHT) {
                        x = pd.width - d.width - insets.right;
                    } else if (alignment == BOTH) {
                        wid = pd.width - insets.left - insets.right;
                    }
                    c.setBounds(x, y, wid, d.height);
                    y += d.height + vgap;
                }
            }
        }

        // -----------------------------------------------------------------------------
        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return layoutSize(parent, false);
        }

        // -----------------------------------------------------------------------------
        @Override
        public Dimension preferredLayoutSize(Container parent) {
            return layoutSize(parent, false);
        }

        // ----------------------------------------------------------------------------
        /**
         * Not used by this class
         */
        @Override
        public void addLayoutComponent(String name, Component comp) {
        }

        // -----------------------------------------------------------------------------
        /**
         * Not used by this class
         */
        @Override
        public void removeLayoutComponent(Component comp) {
        }

        // -----------------------------------------------------------------------------
        @Override
        public String toString() {
            return getClass().getName() + "[vgap=" + vgap + " align=" + alignment + " anchor=" + anchor + "]";
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:21:06.400

我不知道为什么不使用`JScrollPane`，`LineWrap`并且`WordWrap`在中正常工作`JScrollPane`，那么`JPanel`使用另一个会更好`LayoutManager`

*   放到`JTextArea`_`JScrollPane`

*   `JPanel`需要（我完全忽略 used `VerticalLayout`）将默认`LayoutManager`( `FlowLayout`) 更改为`BorderLayout`

*   放到`JScrollPane(myTextArea)`_`BorderLayout.CENTER`

# actionscript-3 - Flash SecureSocket 和 RSA 私钥

> ID：11315650
> 
> 赞同：8
> 
> 时间：2012-07-03T16:58:15.320
> 
> 标签：actionscript-3, flash, ssl, private-key

我正在尝试通过 SSL 与服务器通信。PEM 客户端文件由证书和 rsa 私钥组成。

我设法将证书和密钥都转换为二进制 DER。我成功地将 DER 证书加载到 SecureSocket（使用函数 ***addBinaryChainBuildingCertificate***），但是当我尝试连接到服务器时，出现“主要不匹配”错误。如果我尝试使用上述函数加载 DER 密钥，则会收到“错误参数”错误。

我想“主要不匹配”是因为我没有加载私钥。但我看不到将 RSA 密钥加载到 SecureSocket 的功能。有什么解决办法吗？我是否需要仅使用证书与服务器通信，但从等式中删除密钥？

**编辑 ：**

代码 ：

```
package {

    import flash.display.Sprite;
    import flash.net.SecureSocket;
    import flash.net.URLLoader;
    import flash.events.ProgressEvent;
    import flash.events.Event;
    import flash.events.IOErrorEvent;
    import flash.net.URLLoaderDataFormat;
    import flash.net.URLRequest;
    import flash.utils.ByteArray;

    public class TestSSL2 extends Sprite {

        private var mSocket:SecureSocket = new SecureSocket();

        private var certFile:String = "ca.der";
        private var keyFile:String = "key.der";

        private var cert:ByteArray;
        private var key:ByteArray;

        public function TestSSL2() {
            trace("SecureSocket.isSupported",SecureSocket.isSupported);

            var urlLoader:URLLoader = new URLLoader();
            urlLoader.addEventListener(Event.COMPLETE, certLoaded, false, 0, true);
            urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
            urlLoader.load(new URLRequest(certFile));
        }
        private function certLoaded(e:Event):void {
            cert = (e.target as URLLoader).data;
            trace("certificate",cert.length);
            mSocket.addBinaryChainBuildingCertificate(cert, true);

            var urlLoader:URLLoader = new URLLoader();
            urlLoader.addEventListener(Event.COMPLETE, keyLoaded, false, 0, true);
            urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
            urlLoader.load(new URLRequest(keyFile));
        }
        private function keyLoaded(e:Event):void {
            key = (e.target as URLLoader).data;
            trace("key",key.length);
            mSocket.addBinaryChainBuildingCertificate(key, true);

            mSocket.connect("127.0.0.1", 3000);
            mSocket.addEventListener(Event.CONNECT, socketConnected);
            mSocket.addEventListener(IOErrorEvent.IO_ERROR, onError);
            mSocket.addEventListener(ProgressEvent.SOCKET_DATA, socketData );
        }

        private function onError(error:IOErrorEvent):void {
            trace("ERROR!",error.text,":",mSocket.serverCertificateStatus);
        }

        private function socketConnected(e:Event):void {
            trace("Connected", e);
        }

        private function socketData(e:*):void {
            var data:String;
            data = mSocket.readUTFBytes(mSocket.bytesAvailable);
            trace(data);
        }
    }

} 
```

结果 ：

```
SecureSocket.isSupported true
certificate 497
key 607
ArgumentError: Error #2004: One of the parameters is invalid.
    at flash.net::SecureSocket/addBinaryChainBuildingCertificate()
    at TestSSL2/keyLoaded()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

如果我评论该行：

`//mSocket.addBinaryChainBuildingCertificate(key, true);`

我得到：

```
SecureSocket.isSupported true
certificate 497
key 607
ERROR! Error #2031: Socket Error. URL: 127.0.0.1 : principalMismatch 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:56:08.537

首先：

“主体不匹配”表示受保护服务器上证书的公用名称与您要连接的 DNS 名称不匹配。

考虑到您正在连接到 localhost (127.0.0.1)，肯定会有不匹配的情况。Flash 套接字在建立安全连接时特别严格，并且与其他运行时（例如 .NET 和 Java）不同，没有覆盖安全功能的机制。以下内容必须为真：

1.  证书公用名必须与 DNS 名称匹配（这里对“星”证书有一个放宽，即`*.bob.com`认为对 的证书有效`mr.bob.com`）
2.  证书必须在到期和信任链方面有效

第二：

您似乎对证书的工作方式有一些误解。`addBinaryChainBuildingCertificate()`如果服务器证书是由受信任的根颁发机构颁发的，即签署服务器证书的证书在目标设备的本地信任库中，则不需要使用该方法添加任何证书。

为了显示：

*   我有一个`this.is.awesome.com`安装在我的服务器上的证书和一个解析`this.is.awesome.com`为我的服务器 IP 地址的 DNS 条目
*   此证书由 Entrust L1C 证书颁发机构颁发。
*   L1C 证书又由 Entrust 2048 根机构颁发。

在我的 PC 上，我的可信根证书存储中安装了 Entrust 2048 根权限。但是我没有安装 L1C 证书。当我尝试连接时`this.is.awesome.com`，连接将失败，因为无法针对 L1C 授权验证服务器证书。

如果我使用添加 DER 编码的 L1C 证书，`addBinaryChainBuildingCertificate()`则连接将成功。服务器证书将根据 L1C 证书进行验证，而 L1C 证书将根据 2048 根证书进行验证，该证书是受信任的根。

总结一下：

您的连接问题似乎源于您尝试连接到 localhost。尝试在 HOSTS 文件中添加一个条目，将证书上的名称映射到 127.0.0.1，然后连接到该名称。如果失败，请检查证书上的颁发者链，并通过为链中的`addBinaryChainBuildingCertificate()`每个颁发证书调用一次来添加颁发者链。最终证书或根证书应通过`true`作为第二个参数传递给`addBinaryChainBuildingCertificate()`

# windows - 使用 Platform Builder 5.0 构建特定的运行时映像

> ID：11315656
> 
> 赞同：0
> 
> 时间：2012-07-03T16:58:50.740
> 
> 标签：windows, windows-ce, builder, platform, platform-builder

我需要一些帮助才能使用 Platform Builder 5.0 创建运行时映像，我知道如何制作运行时映像，但我需要将特定模块和文件放在运行时映像中，我基本上是在尝试克隆原始运行-time 图像，我想添加一些额外的东西，例如配置不正确的以太网卡的驱动程序，通过使用 viewbin，我能够获得以下模块和文件，如果可能的话，有人可以准确地告诉我我有哪些目录项应该添加，因为目前我正在使用试错法并且它不起作用，模块和文件如下

模块 nk.exe,GIISR.dll,isr16550.dll,coredll.dll,filesys.exe,gwes.exe,device.exe,devmgr.dll,regenum.dll,pm.dll,fatfsd.dll,diskcache.dll,fatutil .dll、shell.exe、shellcelog.dll、toolhelp.dll、cmd.exe、atapi.dll、udfs.dll、fsdmgr.dll、mspart.dll、ceddk.dll、ppp.dll、pppoe.dll、export.dll ,iphlpapi.dll,mbridge.dll,winsock.dll,ws2.dll,wsinstl.dll,wspm.dll,nspm.dll,secur32.dll,ntlmssp.dll,credsvc.dll,credprov.dll,afd.dll,ndis .dll,dhcp.dll,tcpstk.dll,tapi.dll,unimodem.dll,netbios.dll,ping.exe,ipconfig.exe,ndisconfig.exe,route.exe,netstat.exe,tracert.exe,serial.dll ,mmtimer.dll,ole32.dll,oleaut32.dll,services.exe,httpd.dll,telnetd.dll,PCIbus.dll,pcc_tipccard.dll,pcc_serv.dll,pcmcia.dll,kbdmouse.dll,com16550.dll,ssce20 .dll,ssceca20.dll,e100ce.dll-这是我要替换的驱动程序,micro.dll

文件 ceconfig.h、wince.nls、initobj.dat、boot.hv、default.hv、user.hv、cemgrc.exe、cetlkitl.dll、cetlstub.dll、tcpipc.dll、tlcesrv.dll、httpd_default.htm、NTLMInit .exe、version.exe*、HECImageInfo.exe-version.exe 和 HECImageInfo.exe 从驱动器本身的应用程序运行。

我尝试通过在参数视图中使用 project.bib 文件添加上述文件和模块，但这仍然没有帮助。我在 MSM586SEN 板上使用此系统，但以太网无法连接到计算机时出现问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:33:04.077

您不能只是将这些模块和文件添加到您自己的 BIB 文件中。它不太可能工作，而且这是一个坏主意，因为没有任何东西告诉系统生成这些文件。从目录中选择您需要的内容，这将设置正确的 SYSGEN 变量。反过来，这将构建适当的部分并将它们包含到操作系统中。

如果您想“克隆”图像中的内容，但没有项目文件，请查看`\windows\ceconfig.h`正在运行的操作系统的文件。它将列出构建过程中的每个 SYSGEN 集。然后，您可以在新项目中手动设置它们，或选择正确的目录项来设置它们（将鼠标悬停在目录项上，它会告诉您它设置的 SYSGEN - 或者您可能只是使用文本编辑器手动编辑您的项目文件，然后添加它们）。

一旦你有了它，你就可以添加驱动程序、调试连接问题等。

# mysql - 如何构造这种类型的 SQL 语句

> ID：11315657
> 
> 赞同：1
> 
> 时间：2012-07-03T16:58:57.073
> 
> 标签：mysql, select

我有一个带有 unix 格式的 lastaccess 日期的表。我想查询表中lastaccess日期大于180天的所有记录。

这是我当前的查询

```
SELECT  id, auth, username, IF(DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess))>=180,'Y','N') As NotAccessedIn6Months
FROM  mdl_user 
WHERE auth = 'manual' 
```

我需要能够使用 NotAccessedIn6Months 结果来过滤结果集，例如

```
SELECT  id, auth, username, IF(DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess))>=180,'Y','N') As NotAccessedIn6Months
FROM  mdl_user 
WHERE auth = 'manual' AND NotAccessedIn6Months = 'Y' 
```

但后一种格式是非法的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:02:38.920

您有两个选择：要么使用 HAVING 而不是 WHERE，如下所示：

```
SELECT id, auth, username, 
       IF(DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess))>=180,'Y','N') As NotAccessedIn6Months
  FROM mdl_user 
 WHERE auth = 'manual' 
HAVING NotAccessedIn6Months = 'Y' 
```

...或者只是将此条件移动到 WHERE 中（因为在此特定查询中根本不会显示 'N' 值），如下所示：

```
SELECT id, auth, username 
  FROM mdl_user 
 WHERE auth = 'manual' 
   AND DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess)) >= 180 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:03:50.067

你不能在 WHERE 子句中结合它：

```
SELECT  id, auth, username
FROM  mdl_user 
WHERE auth = 'manual' AND DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess))>=180 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:01:54.373

[HAVING 为 SELECT 语句中使用的组或聚合函数指定搜索条件。](http://blog.sqlauthority.com/2007/07/04/sql-server-definition-comparison-and-difference-between-having-and-where-clause/)

```
SELECT  id,
        auth,
        username,
        IF(DATEDIFF(NOW(), FROM_UNIXTIME(lastaccess))>=180,'Y','N')
            As NotAccessedIn6Months
FROM  mdl_user 
WHERE auth = 'manual'
HAVING NotAccessedIn6Months = 'Y' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:03:12.633

您不能在 WHERE 中使用计算值别名，但可以在 HAVING 子句中使用。但是，这会对性能产生影响，因为 HAVING 不会在查询时过滤，而是在整个结果集上过滤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:27:55.143

```
SELECT  id, auth, username
FROM  mdl_user 
WHERE auth = 'manual' AND lastaccess < UNIX_TIMESTAMP(CURRENT_DATE - interval 180 DAY) 
```

您也可以使用`CURRENT_TIMESTAMP`而不是`CURRENT_DATE`

# java - 在Struts1.2中我们可以改变地址栏中的URI吗

> ID：11315662
> 
> 赞同：0
> 
> 时间：2012-07-03T16:59:08.073
> 
> 标签：java, struts

在Struts 1.2中，我们可以在将控件从action class转发到jsp时更改地址栏中的URI吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:48:16.943

任何框架都无法做到这一点，因为转发是完全在服务器端发生的操作，浏览器不知道也不关心它。你在给定的 URL 请求一个页面，服务器给你这个页面。生成此页面的方式对浏览器无关紧要。

# magento - iframe 标签在 magento 中不起作用

> ID：11315673
> 
> 赞同：1
> 
> 时间：2012-07-03T17:00:00.443
> 
> 标签：magento, iframe, wysiwyg

如果有人可以提供帮助，我将不胜感激。我花了 2 天时间在互联网上搜索答案，并尝试了我能想到的所有选项。这是问题所在。

在我的网站 (www.naturevite.net/nature-vite/) 上，所有产品页面都有一个“补充事实”部分。在该部分中，它显示了营养成分。我将所有营养标签都保存为 .html 文件。所以我在我的supplement_facts 描述区域添加了以下iframe：

```
<iframe src="http://www.naturevite.net/nature-vite/media/catalog/product/facts/WWSNPPBR0012YOGBBR.html" frameborder="0" width="500" height="900">/iframe> 
```

现在奇怪的是，什么都没有出现，但是如果我只是点击所见即所得的编辑器，打开弹出窗口，除了点击提交之外不要更改任何内容，html 文件会完美打开。

这不是问题，除非有 2000 种产品，我必须进去为每一种产品都这样做。

任何想法的家伙。

哦，我尝试添加扩展 iframe 代码 ('iframe[src|style|width|height|scrolling|marginwidth|marginheight|frameborder],style,script'") 但它对 setup.js 文件不起作用，但它没有'不起作用。我还尝试从配置和属性中禁用所见即所得，但没有用。我使用的是 magento 1.7.0.1

# php - 在 cURL 下载页面之前等待 Javascript？

> ID：11315676
> 
> 赞同：1
> 
> 时间：2012-07-03T17:00:07.963
> 
> 标签：php, javascript, curl

在卷曲网站之前如何等到所有 Javascript 加载完毕？我正在尝试从我的一个页面下载 HTML，但它异步获取信息，因此 cURL 获取半加载页面。有没有办法让 cURL 获取一个完全加载的页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:06:09.210

您需要使用无头浏览器引擎来执行此操作。cURL 和 wget 是 HTTP 库；他们说 HTTP 并以文本形式下载文档。他们没有 DOM 或 JavaScript 引擎的概念来帮助他们理解页面正在执行 AJAX。所以要下载 HTML，你需要一个更像浏览器的东西，通过解析 DOM 和执行 JS。我推荐使用 Mozilla 引擎的[Crowbar 。](http://simile.mit.edu/wiki/Crowbar)

# c++ - 类成员和继承

> ID：11315681
> 
> 赞同：0
> 
> 时间：2012-07-03T17:00:44.960
> 
> 标签：c++, inheritance, member

我搞不清楚了。我有一堂课`Editor`和一堂课`Controller`。类`WorkflowEditor`和`WorkflowController`派生自`Editor`和`Controller`分别。类`Controller`有一个受保护的成员`Editor editor`，而类`WorkflowController`有一个私有成员`WorkflowEditor editor`（同名）。

* * *

**从 EitanT 编辑**：
这是一个简化的代码，用于说明 OP 所描述的内容：

```
class Controller
{
    Editor editor;
    // ...
}

class WorkflowEditor : public Editor {
    // ...
};

class WorkflowController : public Controller {
    WorkflowEditor editor;
    // ...
}; 
```

* * *

我的应用程序是一个带有图形界面的模块。在工作流模式下，Launch 上会出现一个功能区，并显示一个向导。单击一个按钮时，将`Controller`调用类中的一个方法。执行崩溃是因为此时，`Editor editor`具有类型的对象的类成员`Controller`已死。我希望班级成员`Editor editor`与班级成员`WorkflowEditor editor`相同（同名）。

换句话说，如果一个类`A`有一个类的成员`B`并且类`childA`（派生自`A`）有一个类的成员`childB`（派生自`B`），并且类型的成员`childB`具有`B`相同的名称，那么该成员不是“继承”的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:19:42.953

该对象是继承的，但*与*派生类中声明的对象不同。派生类成员是基类成员的单独对象，即使它们具有相同的名称。从技术上讲，它*隐藏*了基类成员，使其只能通过其限定名称`Controller::editor`.

您可以使用虚函数来实现您想要的，您可以在派生类中覆盖它以访问其中包含的对象：

```
class Controller {
public:
    // No data members, just an abstract interface

    // Access a data member of the derived class
    virtual Editor & editor() = 0;
    virtual ~Controller() {}
};

class WorkflowController : public Controller {
public:
    WorkflowEditor & editor() {return editor_;}

private:
    // The object itself - accessible as its true type here, or
    // as its abstract type via the abstract interface.
    WorkflowEditor editor_;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:02:12.863

派生类中的成员隐藏了基类中的成员。

# symfony - 在 FOSUserBundle 中添加角色

> ID：11315682
> 
> 赞同：0
> 
> 时间：2012-07-03T17:00:47.720
> 
> 标签：symfony, fosuserbundle

我安装了 FOSUsrBundle。如何将角色从控制器添加到用户？

我尝试了这个解决方案但不起作用：

```
$user = $this->container->get('security.context')->getToken()->getUser();
$user->addRole('ROLE_USER'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T11:28:05.883

只需在您的 userType 表单上添加一个带有角色列表的角色选择字段。

```
$builder->add('roleList', 'choice', array(
'choices'   => array(
    'ROLE_ADMIN'   => 'ROLE_ADMIN',
    'ROLE_USER' => 'ROLE_USER',
),
'property_path' => false,
'multiple'  => true,
)) 
```

在控制器中只需添加此代码即可将角色添加到用户中

```
$formData = $this->getRequest()->request->get($form->getName());           
$roles = $formData['roleList'];

foreach($roles as $key => $value)
{
 $user->addRole($value);
} 
```

我认为这足以将角色分配给用户界面。

# python - 为什么会出现内存错误？

> ID：11315683
> 
> 赞同：1
> 
> 时间：2012-07-03T17:00:51.597
> 
> 标签：python

这是我的代码：

```
i=int(input("enter your number"))
j=int(input("enter your number"))
if i>j: #making x always greater than y
    x=i
    y=j
elif i<j:
    x=j
    y=i
else:
    print("invalid")
k=y
cyclelength=[]
while k<=x:
    list=[k]
    while k!=1:
        if(k%2==0):
            k=i//2
        else:
            k=3*k+1
        list.append(k)
    cyclelength.append(len(list))
    k+=1
print(y," ",x," ",max(cyclelength)) 
```

我得到以下异常：

```
Traceback (most recent call last):
  File "C:/Python32/uva100.py", line 21, in <module>
    list.append(k)
MemoryError 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:08:26.243

你可能的意思是`k //= 2`，而不是`k=i//2`

```
def cyclelength(k):
    assert k > 0
    count = 1
    while k != 1:
       k = k // 2 if k % 2 == 0 else 3 * k + 1
       count += 1
    return count

k_with_max_cyclelength = max(range(y, x+1), key=cyclelength) 
```

或者两者兼得：

```
k, max_cyclelength = max(((k, cyclelength(k)) for k in range(y, x+1)),
                         key=lambda pair: pair[1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:08:37.070

此块中的另一个问题：

```
while k!=1:
    if(k%2==0):
        k //= 2
    else:
        k=3*k+1 
```

退出时 k 的值为 1。

所以你将 k 增加到 2，重新输入 while，因为 k < x 并将 k 重置为 1

--> 无限循环

你必须在你的内部定义一个新变量，或者在另一个函数中提取这个块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:11:17.860

我想你会去

```
n=y
cyclelength=[]
while n<=x:
    k=n
    list=[k]
    while k!=1:
        if(k%2==0):
            k//=2
        else:
            k=3*k+1
        list.append(k)
    cyclelength.append(len(list))
    n+=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:25:59.050

这看起来像是在玩[Collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)。尝试

```
def get_int(prompt):
    while True:
        try:
            return int(raw_input(prompt))
        except ValueError:
            pass

def sequence_length(k):
    length = 0
    while k > 1:
        k = 3*k+1 if k&1 else k//2
        length += 1
    return length

def max_sequence_length(lo, hi):
    best_k, best_length = None, 0
    for k in xrange(lo, hi+1):
        length = sequence_length(k)
        if length > best_length:
            best_k, best_length = k, length
    return best_k, best_length

def main():
    lo = get_int("Enter the start number: ")
    hi = get_int("Enter the finish number: ")
    lo, hi = min(lo, hi), max(lo, hi)
    best_k, best_length = max_sequence_length(lo, hi)
    print("In {}..{}, max cycle length is {} at k = {}".format(lo, hi, best_length, best_k))

if __name__=="__main__":
    main() 
```

# drupal - Drupal Shibboleth 注销

> ID：11315685
> 
> 赞同：1
> 
> 时间：2012-07-03T17:00:53.170
> 
> 标签：drupal, shibboleth, commerce

我们使用 Shibboleth 对用户进行身份验证。它工作得很好。

问题是，在进入用户/注销（并且，我认为实际上是注销）之后，用户会立即自动重新验证！

有什么解决方案浮现在脑海中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:58:06.133

这是一个中等复杂的问题，取决于您想要实现的目标。坏消息是，[据应该知道的人说，SingleLogOff 基本上不起作用](https://wiki.shibboleth.net/confluence/display/SHIB2/SLOIssues)，因为至少本地应用程序可能会缓存登录信息，并且没有可靠的方法告诉所有人注销您。

但是，注销服务提供者的特定会话可能就像发送您的用户一样简单， `https://yourhost/Shibboleth.sso/Logout?return=http://www.google.com`这将破坏该会话并将用户重定向到给定的 URL。

要销毁与 IdP 的会话，您可能需要一种方法来清除`_idp_session`IdP 设置的 cookie，如果您控制 IdP 而不是如果您不控制，这很容易。（shibd SP 也支持告诉 IdP 注销 IdP 会话，但 IdP 不支持。）

**SHIB 3 发布后编辑**

Shibboleth 3 现在支持**[SLO](https://wiki.shibboleth.net/confluence/display/IDP30/LogoutConfiguration)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:58:57.430

单点注销不起作用 - 不要费心寻找它；您可以从 SP 中注销 - 但没有真正的方法可以从 IdP 的 SSO 链中注销。

Shibboleth IdP 是一个 SSO，它缓存了一个覆盖 SP 上任何注销的 cookie（解决此问题的唯一方法是在 SP 注销后强制用户在 SP 上进行身份验证 - SAML 配置 - 这实际上意味着 SP不再接受 SSO）。

杀死 IdP cookie 只会阻止未来的 SSO - 它不会从任何预先存在的会话中注销用户。

在 SSO 世界中真正注销的唯一方法是终止浏览器会话（每种浏览器类型都有不同的方式）。

有所谓的 SLO 代理 - 在 SSO 会话中尝试访问每个访问过的 SP，以单独注销，然后终止 IdP 会话：这在有多个 SP 的 SSO 环境中根本不切实际（只需对一个 SP 进行 1 次调用即可失败，并且您的注销过程未完成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:16:50.303

> @user353829 在 SSO 世界中真正注销的唯一方法是终止浏览器会话

好吧……那是部分正确的。一般而言，SAML2（Shibboleth 实现）提供了单次注销规范（[第 32 页](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)）。问题是，实现起来非常棘手（阅读[@Ulrich](https://wiki.shibboleth.net/confluence/display/SHIB2/SLOIssues) Schwarz 提供的 SLOIssues），更糟糕的是，如果培训您的用户正确理解 Global Logout（再次仔细阅读[SLOIssues](https://wiki.shibboleth.net/confluence/display/SHIB2/SLOIssues)）。

但是，如果您完全确定您了解 SLO 的真正工作原理，那么匈牙利团队创建了有效的[实现。](https://wiki.aai.niif.hu/index.php?title=Single_Logout_in_Shibboleth_IdP)

我目前正在测试它，我已经成功地将它与我的[Facebook 登录模块](http://apps.man.poznan.pl/trac/idp-facebook-integration/)集成。而且效果很好。

请记住，这个匈牙利语模块没有出现在最新的官方 Shibboleth 版本中是有原因的。

希望有帮助

# php - Yii orm - is-a 关系（泛化）

> ID：11315688
> 
> 赞同：1
> 
> 时间：2012-07-03T17:01:15.793
> 
> 标签：php, orm, yii

yii ORM 是否可以建立 is-a 关系？

我的关系模式是：

```
User (username (pk), email)
Employee (username (fk))
Boss (username (fk), field1) 
```

对于这种使用带有任何 ORM 的 php 的场景，一般情况下是否有任何最佳实践？

我可以简单地从用户和员工派生，但我认为这行不通，因为系统必须知道实际值存在于哪个表中。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:28:55.247

您可以选择如何实现事物。您还可以使用`single table`and`scenarios`来分隔所需的输入和单独的验证。`Yii`是非常灵活和强大的 ORM，因此您需要开始阅读文档并进一步发展。

# c# - 任务完成后C#不释放内存

> ID：11315690
> 
> 赞同：10
> 
> 时间：2012-07-03T17:01:21.683
> 
> 标签：c#, .net, memory-management, garbage-collection

以下代码是我看到的问题的简化示例。由于字典太大，此应用程序在引发异常之前消耗了大约 4GB 的内存。

```
 class Program
 {
    static void Main(string[] args)
    {
        Program program = new Program();

        while(true)
        {
            program.Method();
            Console.ReadLine();
        }
    }

    public void Method()
    {
        WasteOfMemory memory = new WasteOfMemory();
        Task tast = new Task(memory.WasteMemory);
        tast.Start();
    }

}

public class WasteOfMemory
{
     public void WasteMemory()
     {
         Dictionary<string, string> aMassiveList = new Dictionary<string, string>();

         try
         {
             long i = 0;
             while (true)
             {
                 aMassiveList.Add(i.ToString(), "I am a line of text designed to waste space.... I am exceptionally useful........");
                 i++;
             }

         }
         catch(Exception e)
         {
             Console.WriteLine("I have broken myself");
         }
     }
} 
```

这一切都符合预期，尽管我们目前无法确定何时应该从 CLR 中释放此内存。

我们已经让任务完成，然后模拟了内存过载的情况，但是字典消耗的内存没有释放。由于操作系统内存不足，是不是对CLR施加压力以释放内存？

然而，更令人困惑的是，如果我们等到任务完成，然后按回车键再次运行任务，内存就会被释放，那么显然之前的字典已经被垃圾回收了（不是吗？）。

那么，为什么内存没有被释放呢？我们怎样才能让 CLR 释放内存呢？

任何解释或解决方案将不胜感激。

编辑：在回复之后，特别是贝斯卡的回复，很明显我对这个问题的描述不是最清楚的，所以我会尽量澄清。

代码可能不是最好的例子，对不起！尝试复制该问题是一段快速粗略的代码。

这里使用字典来复制我们有一个大型自定义数据对象的事实，它填充了我们的一大块内存，并且在任务完成后它不会被释放。

在示例中，字典填充到字典的限制，然后引发异常，它不会永远填充！这远远早于我们的内存已满，并且不会导致 OutOfMemoryException。因此结果是内存中有一个大对象，然后任务完成。

此时，我们希望字典超出范围，因为任务和方法“方法”都已完成。因此，我们希望字典被垃圾收集并回收内存。实际上，在再次调用“方法”之前不会释放内存，创建一个新的 WasteOfMemory 实例并开始一个新任务。

希望这能稍微澄清一下这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:15:33.590

*垃圾收集器*仅释放内存中不再使用的位置，这些位置是没有指向它们的指针的对象。

**（1）**您的程序无限运行而不会终止，并且

**(2)**你永远不会改变指向你的字典的指针，所以 GC 肯定没有理由去碰字典。

所以对我来说，你的程序正在做*它*应该做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:15:10.570

内存没有被释放，因为范围`aMassiveList`永远不会完成。当一个函数返回时，它会释放它内部创建的所有非引用资源。

在你的情况下，`aMassiveList`永远不要离开上下文。如果你希望你的函数永远不会返回，你必须找到一种方法来“处理”你的信息并发布它，而不是永远存储它们。

如果您创建的函数越来越多地分配资源并且从不释放它，您最终将消耗所有内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T17:18:15.957

GC 只会释放未引用的对象，因此由于您的程序正在引用该字典，因此 GC 无法释放它

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T18:38:21.770

好的，我一直在关注这个......我认为有几个问题，其中一些人已经触及，但我认为没有回答真正的问题（诚然，我花了一段时间才认识到，而且我我不确定我现在是否在回答你想要的。）

> 这一切都符合预期，尽管我们目前无法确定何时应该从 CLR 中释放此内存。

正如其他人所说，在任务运行时，字典不会被释放。它正在被使用。它会变大，直到内存不足。我很确定你明白这一点。

> 我们已经让任务完成，然后模拟了内存过载的情况，但是字典消耗的内存没有释放。由于操作系统内存不足，是不是对CLR施加压力以释放内存？

我认为，这才是真正的问题。

如果我理解正确，你是说你设置这个来填满内存。然后，在它崩溃之后（但在你点击返回开始一个新任务之前）你正在尝试*这个程序之外的其他事情，比如在 Windows 中运行其他程序*来尝试让 GC 收集内存，对吗？希望操作系统会与 GC 对话，并开始向它施压以完成它。

> 然而，更令人困惑的是，如果我们等到任务完成，然后按回车键再次运行任务，内存就会被释放，那么显然之前的字典已经被垃圾回收了（不是吗？）。

我想你回答了你自己的问题……在你点击返回开始新任务之前，它不一定被发布。新任务需要内存，所以它进入 GC，GC 愉快地从上一个任务中收集内存，现在已经结束（在从满内存中抛出之后）。

> 那么，为什么内存没有被释放呢？我们怎样才能让 CLR 释放内存呢？

不知道能不能强制GC释放内存。一般来说，它会在需要的时候执行（尽管某些黑客类型可能知道一些巧妙的方法来强迫它的手。）当然，.NET 决定何时运行 GC，因为当程序只是坐在那里时没有发生任何事情，它很可能决定它不需要。至于操作系统是否可以迫使 GC 运行，从您的测试来看，答案似乎是“否”。可能有点反直觉。

那是你想要达到的目的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:49:39.880

**您编写WasteMemory**方法的方式，它永远不会退出（除非变量“i”溢出，今年不会发生）并且**因为它永远不会退出**，它将保留对内部字典的引用。

 **Daniel White 是对的，您应该了解 GC 的工作原理。

如果引用正在使用中，GC 将不会收集引用的内存。**否则，任何程序将如何工作？**

我看不出您希望 CLR/GC 在这里做什么。在您的WasteMemory 方法的一次运行中没有什么可以收集垃圾的。

> 然而，更令人困惑的是，如果我们等到任务完成，然后按回车键再次运行任务，内存就会被释放，那么显然之前的字典已经被垃圾回收了（不是吗？）。

当您按 Enter 时，将创建并启动一个新任务。这不是*同一个任务*，它是*一个新任务*- 一个新对象持有对新的 WasteOfMemory 实例的引用。

旧任务将继续运行，并且**不会**收集它使用的内存，因为旧任务一直在后台运行并且它一直在**使用**该内存。

我不确定为什么 - 最重要的是如何 - 你观察到旧任务的内存被释放。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2012-07-03T17:16:49.313

将您的方法更改为 using 语句

例子：

```
Using (WateOfMemory memory = new WateOfMemory())
{
    Task tast = new Task(memory.WasteMemory); 
    tast.Start();
 } 
```

并添加一次性 WateOfMemoryClass（顺便说一下你的构造函数是 WasteOfMemory）

```
#region Dispose
    private IntPtr handle;
    private Component component = new Component();
    private bool disposed = false;

    public WateOfMemory()
    {

    }

    public WateOfMemory(IntPtr handle)
    {
        this.handle = handle;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        if(!this.disposed)
        {
            if(disposing)
            {
            component.Dispose();
            }

            CloseHandle(handle);
            handle = IntPtr.Zero;            
        }
        disposed = true;         
    }

    [System.Runtime.InteropServices.DllImport("Kernel32")]
    private extern static Boolean CloseHandle(IntPtr handle);

    ~WateOfMemory()      
    {
        Dispose(false);
    }
    #endregion 
```**

# spring - @OneToMany 显示集合变量的重复值

> ID：11315691
> 
> 赞同：1
> 
> 时间：2012-07-03T17:01:26.543
> 
> 标签：spring, hibernate, jpa

我得到过滤的“培训师”实体，但集合（trainedMonkeys）没有被过滤。'trainedMonkeys' 变量保存所有 'Monkey' 对象，而不是仅保存具有 'isThumb = true' 的对象。

有人可以检查我使用的以下标准是否正确？

```
@SuppressWarnings("unchecked")
    public List&lt;Trainer&gt; listTrainers() {         
        Criteria crit = sessionFactory.getCurrentSession().createCriteria(Trainer.class)
        .createAlias("trainedMonkeys", "tm")
        .add(Restrictions.eq("tm.isThumb", true))
        .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

培训师.java

```
public class Trainer {  
    private Long trainerId;

    private String trainerName;

    public List&lt;Monkey&gt; trainedMonkeys; 
```

猴子.java

```
public class Monkey {

    private Long id;

    private String monkeyName;  

    private boolean isThumb; 
```

我在控制器中执行下面的代码，

```
for (Trainer trainer : trainerList){  
            System.err.println("<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>");  
            System.err.println("Trainer ID*****"+trainer.getTrainerId());  
            System.err.println("Trainer Name******"+trainer.getTrainerName());  
            monkeyList = trainer.getTrainedMonkeys();  
            for (Monkey monkey : monkeyList){  
                System.err.println("Monkey ID*****"+monkey.getId());  
                System.err.println("Monkey Name*****"+monkey.getMonkeyName());  
            }  
            System.err.println("<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>");  
        } 
```

并且输出如下（Monkey_2 和 Monkey_6 是唯一应该存在的对象，因为只有它们满足条件）请帮助，

```
<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>> 
Trainer ID*****88 
Trainer Name******TrainerSachin 
Monkey ID*****87 
Monkey Name*****Monkey_1 
Monkey ID*****88 
Monkey Name*****Monkey_2 
Monkey ID*****89 
Monkey Name*****Monkey_3 
<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>> 
<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>> 
Trainer ID*****89 
Trainer Name******TrainerVinod 
Monkey ID*****90 
Monkey Name*****Monkey_5 
Monkey ID*****91 
Monkey Name*****Monkey_6 
Monkey ID*****92 
Monkey Name*****Monkey_7 
<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:17:23.637

它应该容纳所有。您误解了 Criteria 限制。限制过滤返回的实体应满足哪些条件。它们不会从返回的实体的集合中过滤掉元素。

查询返回具有与相关实体的关系子集的实体会使事情变得复杂。想想当这样一个实体合并回数据库时会发生什么。

有关主题的更多详细信息可以从[Hibernate 文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria)中找到。

# javascript - 使 getelementbyid 复数

> ID：11315693
> 
> 赞同：-2
> 
> 时间：2012-07-03T17:01:29.790
> 
> 标签：javascript, jquery, html, css, getelementbyid

在下面（或任何地方）代码的上下文中，getelementbyid 函数是否可以复数工作？还是我需要不同的功能，或者可能是 Jquery？

```
<script type="text/javascript">
    window.onload = function() 
    {
    var test = document.getElementById('test');
    if (test) 
        {
        test.className = 'unactive';
        test.firstChild.onclick = function() 
            {
            if(this.parentNode.className == 'unactive') {
            this.parentNode.className = 'active';
            } 
            else 
                {
                this.parentNode.className = 'unactive';
                }
            }
        }
    };
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:15:40.220

我假设您想使用 ID 列表对多个元素进行操作。（如果我错了，并且您实际上想要选择具有相同 ID 的多个元素，那么您做了一件坏事，因为 ID 应该是唯一的。在这种情况下，您应该改用类。）

**在 jQuery 中，**您可以使用逗号分隔的 id 选择器列表（如`$("#foo, #bar, #baz")`）来完成此操作，并实现您的功能，如：

```
$("#foo, #bar, #baz").addClass("unactive")
.children(":first-child").click(function() {
    var $this = $(this);
    var $parent = $this.parent();
    $parent.toggleClass("active unactive");
}); 
```

**如果没有 jQuery，**这个小函数会获取一个 ID 列表并生成一个节点数组：

```
document.getElementsByIdList() {
    var results = [];
    for(var i=0; i<arguments.length; ++i) {
        results.push(document.getElementById(arguments[i]));
    }
    return results;
} 
```

将它与您当前的代码一起使用：

```
var myNodeArray = document.getElementsByIdList("foo", "bar", "baz");
for(var i=0; i<myNodeArray.length; ++i) {
    var test = myNodeArray[i];
    if(test) {
        // your code goes in here...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:36:13.373

你可以用这个；

```
document.getAllById = function(id){
    if(document.all)
        return document.all[id];
    var elements = [],
    all = document.getElementsByTagName('*');
    for(var i=0;i<all.length;i++)
        if(all[i].getAttribute('id')===id)
            elements.push(all);
    return elements;
} 
```

无论如何，正如@Pointy所说，该`id`属性应该是唯一的，而`class`用于定义一个或多个具有某些共同属性的元素

# css - 下拉菜单中 LI 的约束宽度子 UL

> ID：11315697
> 
> 赞同：0
> 
> 时间：2012-07-03T17:01:53.600
> 
> 标签：css, drop-down-menu

我想以最简单的形式`<ul>`将 CSS 下拉菜单中标签的宽度限制为父标签的宽度`<li>`，`<ul>`并且不设置任何固定值。

我做了很多搜索和测试，但没有实现或理解它。确切地说，我想了解它是如何工作的。

可以使它发生的财产是什么？

我已经解决了最简单的 jsfiddle [http://jsfiddle.net/zAXRK/2/](http://jsfiddle.net/zAXRK/2/)我可以想出看看是否有人可以解释为什么如果可能的话，以及如何？

我试试这个例子，当你使用光标在第一项 = 出现子菜单时`<li>`，包含它的人会变大，推动其他元素。

我想要做的是在其父元素的宽度内制作子菜单，无论宽度如何，并且不修复它。（如果没有解决方案，我会用 JS 来做，但我更喜欢用 CSS 干净，我认为这是一个很好的练习）。

感谢任何愿意帮助我理解 CSS 规则的人。如果答案在外面的某个地方，或者我没找到，或者我没看懂，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:31:52.400

您需要在 and 上设置一些属性，`position`以便您可以设置 a （它不是固定宽度，我希望这不是问题）：`li``.submenu``width: 100%`

以下是更改：

```
.menu > li {
    position: relative;
} 

.sub-menu {
    position: absolute;
    width: 100%;
} 
```

和工作[jsFiddle](http://jsfiddle.net/Calou/zAXRK/3/)。

# c++ - 将 std::string 拆分为两个 const char* 导致第二个 const char* 覆盖第一个

> ID：11315699
> 
> 赞同：1
> 
> 时间：2012-07-03T17:02:00.170
> 
> 标签：c++, string, type-conversion, cstring

我正在输入一行由空格分隔的输入，并尝试将数据读入两个整数变量。

例如：“0 1”应该给出`child1 == 0`, `child2 == 1`.

我正在使用的代码如下：

```
int separator = input.find(' ');
const char* child1_str = input.substr(0, separator).c_str(); // Everything is as expected here.
const char* child2_str = input.substr(
    separator+1,  //Start with the next char after the separator
    input.length()-(separator+1) // And work to the end of the input string.
    ).c_str();     // But now child1_str is showing the same location in memory as child2_str!
int child1 = atoi(child1_str);
int child2 = atoi(child2_str);      // and thus are both of these getting assigned the integer '1'.
// do work 
```

正在发生的事情让我困惑不已。我正在使用 Eclipse 调试器 (gdb) 监视序列。当函数启动时，`child1_str`显示`child2_str`有不同的内存位置（应该如此）。在分割字符串`separator`并获得第一个值后，`child1_str`按预期保持'0'。

但是，下一行给 赋值，`child2_str`不仅给 赋正确的值`child2_str`，而且覆盖`child1_str`。我什至不是说字符值被覆盖，我的意思是调试器显示`child1_str`并`child2_str`共享内存中的相同位置。

什么什么？

1) 是的，我很乐意听取其他将字符串转换为 int 的建议——这是我很久以前学会的方法，而且我从来没有遇到过问题，所以从来不需要但是要改变：

2）即使有更好的方法来执行转换，我仍然想知道这里发生了什么！*这是我的终极问题*。所以即使你想出了一个更好的算法，选择的答案也将是帮助我理解为什么我的算法失败的答案。

3) 是的，我知道 std::string 是 C++ 而 const char* 是标准 C。 atoi 需要 ac 字符串。我将其标记为 C++，因为输入绝对来自我正在使用的框架中的 std::string。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:06:09.027

一是卓越的解决方案。

在 C++11 中，您可以使用新奇的[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stoi)函数：

```
int child1 = std::stoi(input.substr(0, separator)); 
```

否则，您可以使用[`boost::lexical_cast`](http://www.boost.org/doc/html/boost_lexical_cast.html)：

```
int child1 = boost::lexical_cast<int>(input.substr(0, separator)); 
```

现在，一个解释。

`input.substr(0, separator)`创建一个*在分号处终止的**临时* `std::string`对象。调用该临时对象会为您提供一个指针，该指针仅*在*临时对象存在时才有效。这意味着，在下一行，指针已经无效。取消引用该指针具有未定义的行为。然后会发生奇怪的事情，就像未定义行为的情况一样。*`c_str()`*

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:06:54.247

`c_str()`字符串被破坏后返回的值无效。因此，当您运行此行时：

```
const char* child1_str = input.substr(0, separator).c_str(); 
```

该`substr`函数返回一个临时字符串。行运行后，这个临时字符串被破坏，`child1_str`指针变为无效。访问该指针会导致未定义的行为。

您应该做的是将结果分配给`substr`局部`std::string`变量。然后您可以调用`c_str()`该变量，结果将一直有效，直到变量被破坏（在块的末尾）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T17:09:19.330

其他人已经指出了您当前代码的问题。以下是我将如何进行转换：

```
std::istringstream buffer(input);

buffer >> child1 >> child2; 
```

更简单、更直接，更不用说更灵活（例如，即使输入有一个制表符或数字之间有两个空格，它也会继续工作）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:07:05.067

`input.substr`返回一个临时的`std::string`. 由于您没有将其保存在任何地方，因此它会被销毁。之后发生的任何事情都完全取决于您的运气。

我建议使用[`istringstream`](https://stackoverflow.com/questions/5168670/splitting-a-string-into-integers-using-istringstream-in-c).**

# tsql - 在 SQL Management Studio 中，显示 SELECT 语句的结果的开销是多少？

> ID：11315701
> 
> 赞同：0
> 
> 时间：2012-07-03T17:02:02.767
> 
> 标签：tsql, ssms, sqlperformance

默认情况下，在 SQL Management Studio 中对大型表执行 SELECT 时，结果将显示在 Grid 表中。正如我们可以想象的那样，当结果集长达数百万行时，数据将被馈送到 SQL Management Studio 中显示的那个表小部件。

*   这会对查询的执行持续时间产生影响吗？
*   如果是这样，是否可以禁用查询结果的显示，以获得更实际的查询执行时间？

更新 ：

当我说显示时，我的意思不是“显示……执行计划”，而是屏幕上数据的显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:05:21.540

在 Management Studio 中有 3 种方式显示结果集

*   结果转文本
*   结果到网格
*   结果归档

您可以选择选项 1 和 chk 执行时间并将其与选项 2 执行时间进行比较。

# git - Heroku 本地和远程仓库的不同名称

> ID：11315702
> 
> 赞同：2
> 
> 时间：2012-07-03T17:02:03.827
> 
> 标签：git, heroku

我在我的项目文件夹中初始化了一个本地 heroku 存储库，它给出了一些随机名称。我不想要这个名称，所以我将远程 heroku 网站中的应用程序名称重命名为我的项目文件夹名称。但是现在，如果我想从命令行添加一些插件，它（heroku）总是寻找旧名称并出现错误，提示“未找到旧名称应用程序”。

我复制了旧名称，尽管它实际上并不存在（仅在 heroku 配置中，我不知道它在哪里，所以我可以手动修改）并尝试了`heroku apps:rename newname --app oldname`

所以我想在我的项目文件夹中删除我的本地heroku初始化并从头开始再做一次。请指导我。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:17:43.227

如果没有明确指定，Heroku 将`--app`尝试[通过查看 git remotes 来确定应用程序名称](https://github.com/heroku/heroku/blob/master/lib/heroku/command/base.rb#L181)。

[`heroku apps:rename`将为您处理更新存储库的遥控器](https://github.com/heroku/heroku/blob/master/lib/heroku/command/apps.rb#L231)，但正如您所观察到的，通过该站点进行操作将意味着您需要手动更新您的[git 遥控器](http://gitref.org/remotes/)（如果您有其他克隆，则无论如何都需要这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:09:20.457

好的，我找到了解决方案。

我将我的 remore heroku repo 重命名为旧名称，并使用命令行进行了重命名

`heroku apps:rename "new-name" --app "old-name"`

它完成了！

但是我想知道heroku在本地查看的位置，因为它能够看到旧名称并且仍然认为它是名称，换句话说，我想知道heroku在哪里/哪个文件存储了项目的本地名称。

# javascript - 子菜单动态宽度

> ID：11315711
> 
> 赞同：0
> 
> 时间：2012-07-03T17:02:46.477
> 
> 标签：javascript, css, wordpress

我正在尝试创建一个动态子菜单以在 Wordpress 中使用它，如下所示： http: [//picbox.im/image/2b5fb80c74-preview.jpg](http://picbox.im/image/2b5fb80c74-preview.jpg)但存在宽度问题，宽度为“自动”但它不是浮动子菜单，它是一个列表，我希望它们带有 float:left ，但它没有发生，应该怎么办？

这是：http: [//jsfiddle.net/hD7Ay/1/](http://jsfiddle.net/hD7Ay/1/)

还有另一个问题：List 样式不能正常工作。

非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:59:04.507

好吧，让我知道这是否是您想要实现的目标，您的问题有点缺乏设计意义。

[http://jsfiddle.net/3tsnN/](http://jsfiddle.net/3tsnN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:47:27.350

要将它们全部放在一行中，请在 SubMenu Ul 中使用该规则：`white-space: nowrap;`

此处示例：http: [//jsfiddle.net/hD7Ay/3/](http://jsfiddle.net/hD7Ay/3/)

谢谢您的帮助！

# javascript - CSS Minification 脚本遗漏了一些 CSS3 属性

> ID：11315716
> 
> 赞同：3
> 
> 时间：2012-07-03T17:03:04.797
> 
> 标签：javascript, html, css, minify

我的 CSS 文件中有很多较新的 CSS3 属性，我担心我使用的缩小工具缺少很多这些属性：

```
.big-blue-button:hover {
    text-decoration: none;
    background: #0994d2;
    background: -moz-linear-gradient(#0994d2,#0db5e0);
    background: -webkit-linear-gradient(#0994d2,#0db5e0);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#0994d2',endColorstr='#0db5e0')";
} 
```

--> 缩小

```
.big-blue-button:hover {
text-decoration: none;
background: 0;
-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0994d2',endColorstr='#0db5e0');
} 
```

有谁知道一个适用于所有较新 CSS 属性的好的缩小脚本？请注意，我需要**从脚本**中进行此缩小，因此它必须是可执行的（而不是复制/粘贴选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:04:49.893

看看[缩小](http://code.google.com/p/minify/ "缩小")

“按需组合、缩小和缓存 JavaScript 和 CSS 文件，以加快页面加载速度。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:56:02.933

您是否尝试过[Pretty Diff](http://prettydiff.com/?m=minify)并看到它失败了？我刚刚更新以支持这种边缘情况。再试一次，看看它是否满足您的需求。如果您还没有尝试过，那么就假装它一直都很出色，并且绝对可以满足您的心愿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T05:07:44.800

你可以试试下面的在线工具来缩小你的 CSS。

[缩小CSS](http://www.minifycss.com/css-compressor)

问候米

# css - 为什么绝对定位元素嵌套在第一个“行”相对 div 而不是其父 div 中？

> ID：11315724
> 
> 赞同：0
> 
> 时间：2012-07-03T17:03:34.973
> 
> 标签：css, html, containers, css-position

我想要达到的目标：

两个加行，每行包含三列。对于行，我指定了相对定位，每行包含三个图像，两行。这工作正常。

我想要在这些图像下方分层 div，使用绝对位置和负 z-index，这也适用于第一行。第二行，图像排列良好，但绝对定位的 div 出现在第一行。

jsFiddle在这里：http: [//jsfiddle.net/Ajdin/tNGCM/](http://jsfiddle.net/Ajdin/tNGCM/)

我已经在板上阅读了一些问题，并在谷歌上搜索了 css 绝对定位，因为我认为我可能会误解某些东西。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:14:48.167

由于 div ".hireBioImg" 设置了 "float" 属性，它不会将高度扩展到其父级。所以在hireBioRow中，你需要添加“clearfix”来包裹浮动元素。

请在此处查看更新：http: [//jsfiddle.net/tNGCM/1/](http://jsfiddle.net/tNGCM/1/)

更多关于 clearfix 的信息：

> 当浮动元素位于容器框内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

# io - Fortran 中的逗号分隔符

> ID：11315733
> 
> 赞同：1
> 
> 时间：2012-07-03T17:04:04.497
> 
> 标签：io, fortran

我在 Fortran 中遇到了以下问题：例如，在从具有 fmt=* 的数据文件中读取字符数组或任何实际列表时，非引号间的空格和逗号本身都被视为元素的分隔符在数组/列表中。逗号充当分隔符这一事实对我来说是一个大问题。

所以问题是：您是否知道 Fortran 中的任何语义选项或编译指令允许将输入文件中的逗号视为字符而不是分隔符，唯一的分隔符是空格？作为一个具体示例，我希望在阅读以下记录时这样做：

```
x,y,z 
```

和：

```
read (7,*) adummy 
```

将导致`adummy`（标量字符变量）获得值`x,y,z`not `x`。

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:51:53.357

解决方案是指定格式以匹配您的数据记录，即在指定格式时使用字符数据描述符：

```
read(7,fmt='(A)')adummy 
```

将导致`adummy`具有 value `x,y,z`，假设它是一个足够长的变量。

但是这种方法也不会将空格视为分隔符，因此如果您想将逗号读取为字符串但将空格作为分隔符，实现此目的的常用方法是将整个记录读入字符变量并拆分为单独的变量然后。

# .net - 将列分成多个部分 - Gridview

> ID：11315738
> 
> 赞同：1
> 
> 时间：2012-07-03T17:04:15.680
> 
> 标签：.net, winforms, c#-4.0, .net-4.0, componentone

我有包含合并单元格和列的gridview。我试图将一个单元格分成不同的部分，但没有运气。基本上下图显示了我想要实现的目标。

![在此处输入图像描述](../Images/7acf0580384038a40cc7065d0a912ecd.png)

目前我有第一张图片结构，我希望它像第二张图片。（在图像中，我只将前 2 行中的列分开，但我希望它在整个网格中。）

基本上来自第 2 列和其他将包含一个日期作为标题。所以我希望将两天的差异分成不同的部分。

例如

```
Col2(1/1/2012)         | Col3(7/1/2012)
This col will split    |
in to 6 sections (7-1) | 
```

任何帮助表示感谢！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:18:25.850

**选项 1"** 您可以构建一个表格格式的 html 字符串并将其绑定到网格。在后面的代码中执行此操作。

```
 sb.Append("<table style=\"width: 100%;\"> ");

for (int i = 0; i < cnt;i++)
        {
            col1="";
            col2="";
            col3="";

            String fmt= @"<tr>
                            <td style='width: 33%;' >
                                <b>{0}</b>
                            </td>
                            <td style='width: 33%;'>
                                {1}
                            </td>
                            <td style='width: 33%;' >
                                {2}
                            </td>
                        </tr>";

            col1 = row[i].col1 ;
            col2 = row[i].col2 ;
            col3 = row[i].col3 ;

            sb.AppendFormat(fmt, col1,col2,col3);
        }
        sb.Append("</table>"); 
```

**选项2：（** 或者您可以在aspx页面的gridview中使用表格格式）

```
<ItemTemplate>

<div class="innerTable">
 <table>
    <tr >
       <td ></td>
       <td ></td>
    </tr>
    <tr>
       <td></td>
       <td></td>
   </tr>
</table>
</div>
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:28:26.293

我通过合并第一行的行数据来实现它。

我根据日期差异添加了新列，对于一组日期差异，我添加了相同的列标题，它将它们合并在一起。

# iphone - 在移动 Safari 中固定位置

> ID：11315743
> 
> 赞同：0
> 
> 时间：2012-07-03T17:04:31.673
> 
> 标签：iphone, responsive-design, css-position

我有一个关于在桌面上工作的固定定位问题（如预期的那样），但在我测试的任何响应式测试工具中都不起作用。

有问题的网站是这个：[http ://www.claytoncheung.com/](http://www.claytoncheung.com/)

问题出在菜单 div 上，它设置为 position:fixed。请不要问为什么不设置为absolute，我只会说只能设置为position:fixed。原因是我使用的 CMS 的局限性，我在各种 jQuery 解决方案上浪费了两天时间来动态插入菜单，但不幸的是，由于 CMS 的限制，这些解决方案都不起作用。

问题是它是一个多语言站点，菜单不是普通的，因为它是一个单页站点，所以我的位置是固定的。

我在这些工具中测试了该网站： [http ://www.responsinator.com/](http://www.responsinator.com/)

[http://mattkersley.com/responsive/](http://mattkersley.com/responsive/)

[http://iphonetester.com/](http://iphonetester.com/)等等，但在所有这些中，菜单都没有相对于视口，而是相对于父元素的固定位置。

请如果有人会查看该站点以了解它应该如何，然后尝试其中一些工具来查看问题，或者更好地在 iPhone 上进行实时检查，不幸的是我不能这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:29:37.903

如果有人可以关闭这个问题，那么问题出在我的媒体查询上，而不是固定位置。两天后，这一刻才浮现在脑海中。

# c - 从c中的控制台窗口读取变量

> ID：11315745
> 
> 赞同：0
> 
> 时间：2012-07-03T17:04:36.803
> 
> 标签：c, variables

```
void readStateTransitions(state *s){

    char kok[20];
    char y;

    int j=0;

    do{
        char alpha=' ';
        printf("Enter the alphabet\t ");
        scanf("%c", &alpha );

        //s->TrasitionsArray[j]->label=alpha;

    s->TrasitionsArray[j] = (struct trans*)malloc(sizeof(struct trans));   
    s->TrasitionsArray[j]->from = (struct state *)malloc(sizeof(struct state));
    s->TrasitionsArray[j]->to = (struct state *)malloc(sizeof(struct state));
    printf("For %s",s->label);
    //printf("Enter the next state for %s under %c",StatesArray[i].label,alphabet[j]);

    printf("Enter the next state under %c",alpha);
    scanf("%s",kok);
    for(int k=0;k<StatesNumber;k++){
        if(strcmp(StatesArray[k].label,kok)==0){
            s->TrasitionsArray[j]->to=&StatesArray[k];
        }
    }
    s->TrasitionsArray[j]->from=s;
    s->TrasitionsArray[j]->label=alpha;
    j++;
        printf("\n\n more transitions..??(y/n)");
    }while(getch()=='y');

} 
```

我有这段代码，这里要求用户输入两个变量，一个用于 alpha(char)，第二个用于 kok(string)，但问题是程序忽略了变量 alpha 并直接移动到变量 kok

图片链接[http://imageshack.us/photo/my-images/194/capturejey.jpg/](http://imageshack.us/photo/my-images/194/capturejey.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:18:33.960

你需要消耗最后的\n。由于您只想读取 alpha 变量的单个字符，请尝试使用以下内容：

```
alpha = getchar();
while (getchar() != '\n');
//scanf("%c", &alpha); //Instead of this 
```

刚刚在您的代码中对其进行了测试，对我有用。

# mercurial - 这个可笑的glog是什么意思？

> ID：11315753
> 
> 赞同：1
> 
> 时间：2012-07-03T17:04:57.240
> 
> 标签：mercurial

谁能帮我理解这个疯狂的 glog 吗？在我看来，有人在本地更改上坐了几个星期，但是为什么在没有合并的情况下图表会像那样崩溃？

```
o    changeset:   9584:ee55eaad973f
|\   user:        abcd
| |  date:        Tue Jul 03 15:16:36 2012 +0100
| |  summary:     blablabla
| |
| \
| |\
| | \
| | |\
| | | \
| | | |\
| | | | \
| | | | |\
| | | | | \
| | | | | |\
| | | | | | \
| | | | | | |\
| | | | | | | \
| | | | | | | |\
| | | | | | | | \
| | | | | | | | |\
| | | | | | | | | \
| | | | | | | | | |\
| | | | | | | | | | \
| | | | | | | | | | |\
| | | | | | | | | | | \
| | | | | | | | | | | |\
| | | | | | | | | | | | \
| | | | | | | | | | | | |\
| | | | | | | | | | | | | \
| | | | | | | | | | | | | |\
| | | | | | | | | | | | | | \
| | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | \
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+---o  changeset:   9581:1425f32ed0fd
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |/   parent:      9467:3a818f1ddee5
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    user:        abcd
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    date:        Tue Jul 03 14:49:22 2012 +0100
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    summary:     blablablabla
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+---o  changeset:   9466:06e3a96051d2
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |/   parent:      9404:59af59ad22e2
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    user:        abcd
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    date:        Wed Jun 27 16:29:56 2012 +0100
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    summary:     blablabla
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+---o  changeset:   9012:c7eecec9dfb5
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    branch:      some branch
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    parent:      8988:292fcb6476ff
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    user:        efgh
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    date:        Mon May 28 16:40:50 2012 +0100
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    summary:     blablabla
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+---o  changeset:   8941:98fae217d622
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |/   parent:      8873:987a6e5ee24f
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    user:        ijklm
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    date:        Wed May 23 10:16:54 2012 +0100
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |    summary:     blablablabla
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:21:50.757

> 但是为什么没有合并时图表会像那样折叠？

为什么“没有合并”？许多分支没有活动，除了最近的两三个，这个最新鲜的（最右边的）分支被合并到最旧的（默认？）

# svn - SVN 钩子 mailer.py 配置

> ID：11315754
> 
> 赞同：4
> 
> 时间：2012-07-03T17:05:01.860
> 
> 标签：svn, post-commit-hook

我尝试在 subversion 1.6.12 服务器上设置提交后挂钩，以便在提交时发送通知邮件。

我已经在使用带有基本配置的脚本 mailer.py（由 subversion 团队在 utils 文件夹中提供）（只需在每次提交后发送一封电子邮件），它运行良好。

但是现在，我只想在 /tags/ 文件夹中有提交时发送邮件。

这是我的标准 mailer.conf（效果很好）：

```
[general]
smtp_hostname = xxx.xxx.xxx.xxx

[defaults]
from_addr = myemail@domain.tld
to_addr = myemail@domain.tld 
```

这就是我试图为 /tags/ 上的邮件配置的内容：

```
[general]
smtp_hostname = xxx.xxx.xxx.xxx

[defaults]
from_addr = myemail@domain.tld
to_addr = myemail@domain.tld
for_paths = .*/tags/.* 
```

但看起来我误解了配置，因为它不起作用：我收到所有提交的邮件（标签与否）

任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:18:48.240

确实没有什么好的方法可以做到这一点。mailer.py 的设计使得任何与另一个组不匹配的提交都转到默认组。

[mailer.conf.example](http://svn.apache.org/repos/asf/subversion/trunk/tools/hook-scripts/mailer/mailer.conf.example)中的文档暗示了这一点，但并没有很好地解释它：

> 始终选择 [defaults] 部分中指定的选项。不匹配的 for_repos 的存在没有相关性。请注意，您仍然可以使用 for_repos 值来提取有用的信息（稍后会详细介绍）。任何没有 for_repos 或包含匹配 for_repos 的用户定义组都将被选择用于潜在用途。
> 
> 存储库标识的用户定义组的子集基于 for_paths 选项进一步细化。如果提交中的至少一个路径（*）与 for_paths 正则表达式匹配，则选择一个组。请注意，路径相对于存储库的根目录，并且没有前导斜杠。

对于 for_repos 所说的也适用于 for_paths 相对于 defaults 组。即 for_paths 仅对变量提取有用。

不进行任何代码更改的一种选择是将 [defaults] 中的 to_addr 设置为您刚刚丢弃的 devnull@example.com 之类的地址。然后使用不同的 to_addr 设置一个不同的组，该组实际上将被传递到某个地方。

如果您愿意稍微修改您的 mailer.py，您可以通过在 Config 类的 which_groups 函数中注释掉以下两行来避免这种情况：

```
if not groups:
  groups.append((None, self._default_params)) 
```

作为一个长期的 Subversion 开发人员，我认为我们应该在 mailer.py 中添加一个选项，以请求默认部分不生成任何邮件。此外，我们应该修复文档以更清楚地了解此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T14:30:53.173

代替：

```
for_paths = .*/tags/.* 
```

尝试这个：

```
for_paths = ^tags($|.*) 
```

这是假设标签目录位于存储库的根目录。

如果您在项目下有标签，那就是

```
for_paths = ^<project name>/tags($|.*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:29:51.727

最后，我使用 utils 文件夹中的另一个通知脚本解决了我的问题（即使它已被弃用）：commit-email.pl

在我的提交后挂钩中像这样使用它，按预期工作：

```
REPOS="$1"
REV="$2"

LC_ALL=C /usr/share/subversion/hook-scripts/commit-email.pl "$REPOS" $REV -m "tags/.*" -s "[TAGS]" --from noreply@domain.tld myemail@domain.tld 
```

但是，如果有人有正确的配置来用 mailer.py 做同样的事情，我仍然很感兴趣！

# java - JNDI 解决了 Spring 中 ApplicationContext 没有解决的哪个问题？

> ID：11315755
> 
> 赞同：1
> 
> 时间：2012-07-03T17:05:03.420
> 
> 标签：java, spring, jndi, applicationcontext

JNDI 是一种从字符串名称中检索/存储数据或对象的方法。此功能由运行应用程序的容器提供。

`ApplicationContext`允许从它们的字符串名称创建和检索 bean。

两者都满足相似的需求。然而，Spring 提供了从 JNDI 检索对象的方法。也可以通过`JndiTemplate`.

在 Spring 中是否真的需要使用 JNDI？它解决了哪些问题没有解决`ApplicationContext`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:17:01.213

Application Context 不会帮助您查找 REMOTE 对象。它只会在当前应用程序中查找不是远程的对象。

请参阅以下“Context.PROVIDER_URL”。您可以访问远程对象，例如 EJB 或 RMI 或 JMS 等。此外，您可以访问由 Java EE 容器管理的任何资源，例如数据源。

```
ht.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
ht.put(Context.PROVIDER_URL,"t3://HOSTNAME:PORT"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T17:15:51.940

这是范围的问题。Spring 的范围仅限于您在其容器内的应用程序。JNDI 是一个全局命名 API，可以插入到许多不同的命名/目录架构中。

# ms-access - MS Access 2012 专注于 citrix 时对点击无响应

> ID：11315756
> 
> 赞同：0
> 
> 时间：2012-07-03T17:05:03.517
> 
> 标签：ms-access, citrix

最近，我们发现各种 MS Access 2012 应用程序对鼠标单击无响应。

这在表单、报告、查询等的运行或设计模式中都会发生。

通常，当我通过调出并单击另一个程序将注意力集中在另一个程序上时，然后返回 Access 应用程序 - 然后它就会响应。

现在它发生在我们的 Citrix 用户身上，但这个技巧并不总是有效。

任何人有任何想法，修复，解决方案？

# windows - 如何在 Cygwin 上安装袖扣

> ID：11315761
> 
> 赞同：4
> 
> 时间：2012-07-03T17:05:22.363
> 
> 标签：windows, boost, makefile, cygwin, bioinformatics

我正在尝试使用 Cygwin 在我的 Windows 7 系统上安装袖扣 2.0.1。我已经完成了 Make 命令的所有安装步骤，但是由于某种原因，该 make 命令一直失败。我想知道是否有人可以告诉我为什么。我正在使用 Boost 1.50 版

首先，当我运行配置文件时会发生以下情况：

```
Benjamin S@BenjaminS-HP /cygdrive/c/analysistools/cufflinks-2.0.1
$ ./configure --prefix=/cygdrive/c/analysistools/cufflinks --with-boost=/cygdrive/c/AnalysisTools/boost --with-bam=/cygdrive/c/analysistools/samtools/samtools
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for gawk... (cached) gawk
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking whether make sets $(MAKE)... (cached) yes
checking for ranlib... ranlib
checking for a Python interpreter with version >= 2.4... python
checking for python... /usr/bin/python
checking for python version... 2.6
checking for python platform... cygwin
checking for python script directory... ${prefix}/lib/python2.6/site-packages
checking for python extension module directory... ${exec_prefix}/lib/python2.6/site-packages
checking for boostlib >= 1.47.0... yes
checking for bamlib... yes
checking build system type... i686-pc-cygwin
checking whether the Boost::Thread library is available... yes
checking for exit in -lboost_thread... yes
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking if zlib is wanted... yes
checking for inflateEnd in -lz... yes
checking zlib.h usability... yes
checking zlib.h presence... yes
checking for zlib.h... yes
checking for inflateEnd in -lz... (cached) yes
checking zlib in /usr... ok
checking for eigenlib... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking for unistd.h... (cached) yes
checking for stdbool.h that conforms to C99... yes
checking for _Bool... yes
checking for inline... inline
checking for pid_t... yes
checking for size_t... yes
checking for ptrdiff_t... yes
checking host system type... i686-pc-cygwin
checking if gcc accepts -m64... no
checking for struct sysinfo.totalram... yes
checking whether sysctl is declared... no
checking whether CTL_HW is declared... no
checking whether HW_PHYSMEM is declared... no
checking how to create a pax tar archive... gnutar
checking dependency style of gcc... (cached) gcc3
checking dependency style of g++... (cached) gcc3
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating config.h
config.status: executing depfiles commands

-- cufflinks 2.0.1 Configuration Results --
  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include
  GCC version:         gcc (GCC) 4.5.3
  Host System type:    i686-pc-cygwin
  Install prefix:      /cygdrive/c/analysistools/cufflinks
  Install eprefix:     ${prefix}

  See config.h for further configuration information. 
```

然后，当我尝试实现它时会发生以下情况：

```
Benjamin S@BenjaminS-HP /cygdrive/c/analysistools/cufflinks-2.0.1
$ make
make  all-recursive
make[1]: Entering directory `/cygdrive/c/analysistools/cufflinks-2.0.1'
Making all in src
make[2]: Entering directory `/cygdrive/c/analysistools/cufflinks-2.0.1/src'
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT clustering.o -MD -MP -MF .deps/clustering.Tpo -c -o clustering.o clustering.cpp
g++: unrecognized option '-pthread'
mv -f .deps/clustering.Tpo .deps/clustering.Po
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT differential.o -MD -MP -MF .deps/differential.Tpo -c -o differential.o differential.cpp
g++: unrecognized option '-pthread'
In file included from differential.h:29:0,
                 from differential.cpp:18:
replicates.h: In member function ‘bool ReplicatedBundleFactory::next_bundle(HitBundle&)’:
replicates.h:152:50: warning: unused variable ‘s2’
In file included from differential.cpp:18:0:
differential.h: In constructor ‘FPKMContext::FPKMContext(double, double, double, double, const CountPerReplicateTable&, double, const FPKMPerReplicateTable&, double, AbundanceStatus, const StatusPerReplicateTable&)’:
differential.h:142:21: warning: ‘FPKMContext::status’ will be initialized after
differential.h:139:29: warning:   ‘StatusPerReplicateTable FPKMContext::status_per_rep’
differential.h:131:2: warning:   when initialized here
differential.cpp: In member function ‘void TestLauncher::perform_testing(std::vector<boost::shared_ptr<SampleAbundances> >&)’:
differential.cpp:212:31: warning: unused variable ‘s2’
differential.cpp: In member function ‘void TestLauncher::record_tracking_data(std::vector<boost::shared_ptr<SampleAbundances> >&)’:
differential.cpp:240:31: warning: unused variable ‘s2’
differential.cpp: In function ‘SampleDifference get_ds_tests(const AbundanceGroup&, const AbundanceGroup&, bool)’:
differential.cpp:790:16: warning: unused variable ‘name’
differential.cpp: In function ‘void test_differential(const std::string&, const std::vector<boost::shared_ptr<SampleAbundances> >&, Tests&, Tracking&, bool)’:
differential.cpp:1771:83: warning: comparison between signed and unsigned integer expressions
differential.cpp:1772:83: warning: comparison between signed and unsigned integer expressions
differential.cpp:1814:83: warning: comparison between signed and unsigned integer expressions
differential.cpp:1815:83: warning: comparison between signed and unsigned integer expressions
differential.cpp:1856:83: warning: comparison between signed and unsigned integer expressions
differential.cpp:1857:83: warning: comparison between signed and unsigned integer expressions
mv -f .deps/differential.Tpo .deps/differential.Po
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT common.o -MD -MP -MF .deps/common.Tpo -c -o common.o common.cpp
g++: unrecognized option '-pthread'
In file included from common.cpp:28:0:
replicates.h: In member function ‘bool ReplicatedBundleFactory::next_bundle(HitBundle&)’:
replicates.h:152:50: warning: unused variable ‘s2’
mv -f .deps/common.Tpo .deps/common.Po
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT assemble.o -MD -MP -MF .deps/assemble.Tpo -c -o assemble.o assemble.cpp
g++: unrecognized option '-pthread'
mv -f .deps/assemble.Tpo .deps/assemble.Po
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT tokenize.o -MD -MP -MF .deps/tokenize.Tpo -c -o tokenize.o tokenize.cpp
g++: unrecognized option '-pthread'
mv -f .deps/tokenize.Tpo .deps/tokenize.Po
g++ -DHAVE_CONFIG_H -I. -I..   -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wunused -Wuninitialized -D_FILE_OFFSET_BITS=64 -O3  -DNDEBUG  -pthread -I/cygdrive/c/AnalysisTools/boost/include -I/cygdrive/c/analysistools/samtools/samtools/include -I/usr/local/include -MT abundances.o -MD -MP -MF .deps/abundances.Tpo -c -o abundances.o abundances.cpp
g++: unrecognized option '-pthread'
In file included from abundances.cpp:35:0:
replicates.h: In member function ‘bool ReplicatedBundleFactory::next_bundle(HitBundle&)’:
replicates.h:152:50: warning: unused variable ‘s2’
abundances.cpp: In function ‘void collapse_equivalent_hits(const std::vector<MateHit>&, std::vector<boost::shared_ptr<Abundance> >&, std::vector<boost::shared_ptr<Abundance> >&, std::vector<MateHit>&, std::vector<double>&, bool)’:
abundances.cpp:769:28: warning: comparison between signed and unsigned integer expressions
abundances.cpp: In function ‘long double solve_beta(long double, long double, long double)’:
abundances.cpp:1227:145: error: ‘sqrtl’ was not declared in this scope
abundances.cpp: In member function ‘void AbundanceGroup::calculate_FPKM_covariance()’:
abundances.cpp:1780:24: warning: unused variable ‘fpkm’
abundances.cpp: In function ‘void calculate_assignment_probs(const Eigen::VectorXd&, const Eigen::MatrixXd&, const Eigen::VectorXd&, Eigen::MatrixXd&)’:
abundances.cpp:2205:58: warning: comparison between signed and unsigned integer expressions
abundances.cpp: In function ‘AbundanceStatus gamma_mle(const std::vector<boost::shared_ptr<Abundance> >&, const std::vector<MateHit>&, const std::vector<double>&, std::vector<double>&, bool)’:
abundances.cpp:3300:48: warning: comparison between signed and unsigned integer expressions
abundances.cpp:3302:52: warning: comparison between signed and unsigned integer expressions
In file included from abundances.cpp:36:0:
sampling.h: In function ‘double boost::numeric::ublas::cholesky_factorize(M&) [with M = boost::numeric::ublas::matrix<double>]’:
abundances.cpp:117:45:   instantiated from here
sampling.h:83:7: error: ‘sqrtl’ was not declared in this scope
 /cygdrive/c/AnalysisTools/boost/include/boost/system/error_code.hpp: At global scope:
 /cygdrive/c/AnalysisTools/boost/include/boost/system/error_code.hpp:214:36: warning: ‘boost::system::posix_category’ defined but not used
 /cygdrive/c/AnalysisTools/boost/include/boost/system/error_code.hpp:215:36: warning: ‘boost::system::errno_ecat’ defined but not used
 /cygdrive/c/AnalysisTools/boost/include/boost/system/error_code.hpp:216:36: warning: ‘boost::system::native_ecat’ defined but not used

Makefile:1444: recipe for target `abundances.o' failed
make[2]: *** [abundances.o] Error 1
make[2]: Leaving directory `/cygdrive/c/analysistools/cufflinks-2.0.1/src'
Makefile:290: recipe for target `all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/cygdrive/c/analysistools/cufflinks-2.0.1'
Makefile:228: recipe for target `all' failed
make: *** [all] Error 2 
```

当谈到 cygwin 和几个需要我的生物信息学程序时，我仍然有点业余，所以我很感激你能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:09:29.853

看起来您缺少 sqrtl 函数：

```
abundances.cpp:1227:145: error: ‘sqrtl’ was not declared in this scope 
```

我确实看到这在 Cygwin 1.7.16 中定义`math.h`为：

```
extern long double sqrtl _PARAMS((long double)); 
```

你在运行 1.7.16 的 Cygwin 吗？检查您的`/usr/include/math.h`并查看是否`sqrtl`已定义。

但是，我会小心在 Cygwin 中运行它。cygwin官方[说](http://www.cygwin.com/cygwin-api/std-notimpl.html)sqrtl 没有实现，但我可以构建一个测试程序来使用它。虽然我的 C 有点生锈，但我没有看到我期望的结果。

# android - 将 EditText 添加到自定义 LinearLayout

> ID：11315763
> 
> 赞同：0
> 
> 时间：2012-07-03T17:05:34.560
> 
> 标签：android, android-linearlayout

我最近更新了一个自定义视图，因此我可能会`EditText`在画布的中心添加一个（可以这么说）。

以与我之前的自定义视图相同的方式将我的`onDraw`代码添加到`dispatchDraw`我的自定义作品后。`LinearLayout`

现在，如何`EditText`在布局中间添加一个 smack？

到目前为止，我正在尝试这个：

```
EditText edit = new EditText(getContext());
edit.setText("My EditText");
edit.setTextSize((int)Math.ceil(thickness/2));
edit.setWidth((int)(diameter*0.07f));
edit.setX(centerX);
edit.setY(centerY);

addView(edit); 
```

原谅一些变量，它们不太重要，但我正在尝试`EditText`使用 X 和 Y 坐标添加。

谢谢你的帮助。

更新：

我已经更新了我的`LinearLayout`构造函数来扩充`comment_edit.xml`文件，看看我是否可以让它以这种方式工作。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_comment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/edittext_comment"
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content" 
        android:inputType="text"
        android:imeOptions="actionDone" />

</LinearLayout> 
```

构造`LinearLayout`函数摘录如下：

```
LayoutInflater inflater = LayoutInflater.from(context);
LinearLayout view = (LinearLayout) inflater.inflate(R.layout.comment_edit, this, false);
EditText edit = (EditText) view.findViewById(R.id.edittext_comment);
edit.setText("Add Comment");
edit.setX(112);
edit.setY(117);
addView(view); 
```

我也试过：

```
LayoutInflater inflater = LayoutInflater.from(context);
LinearLayout view = (LinearLayout) inflater.inflate(R.layout.comment_edit, this, false);
EditText edit = (EditText) view.findViewById(R.id.edittext_comment);
edit.setText("Add Comment");
view.setX(112);
view.setY(117);
addView(view); 
```

`EditText`依旧没有出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:43:02.653

如果还没有找到答案。每个动态创建的视图都应具有布局参数（WRAP_CONTENT、FILL_PARENT 等），这就是未显示的原因。有关更多信息，请相应地编辑您的问题。一个例子可能是：

```
editText.setLayoutParams(new LayoutParams(WRAP_CONTENT,WRAP_CONTENT)); 
```

编辑：

现在你的问题是编辑文本没有居中。好的，我可以给你一个概述，但我相信你必须从现在开始研究，因为有很多事情要做。首先，LinearLayout 就是它所说的，是一种垂直或水平堆叠视图的布局。文本的位置不应该用屏幕的实际像素给出，而是用一些其他特定的布局参数给出。以 Gravity 为例，它将布局的内部视图对齐到中心、左侧等。添加 LinearLayout 的重力属性。

我希望它有帮助

# c# - 沿 XAML Shapes.Path 获取点

> ID：11315765
> 
> 赞同：3
> 
> 时间：2012-07-03T17:05:50.883
> 
> 标签：c#, wpf, silverlight, xaml, vector-graphics

我正在尝试从 Silverlight MainWindow.xaml 文件中沿 Shapes.Path 对象获取点。我使用 Expression Blend 创建路径。

除非我尝试在表达式混合中移动路径，否则以下代码可以正常工作，这只会移动边距。显然这没有计算在内，我从最初创建路径的地方得到点。

```
 var pathGeometry = path.Data.GetFlattenedPathGeometry();
        var currentPoint = new System.Windows.Point();
        var tangentPoint = new System.Windows.Point();
        var rList = new List<Point>();
        var pointsCount = 10;
        for (int i = 0; i < pointsCount; i++)
        {                
            double fraction = (double)i / (double)(pointsCount - 1);

            pathGeometry.GetPointAtFractionLength(fraction, out currentPoint, out tangentPoint);

            rList.Add(currentPoint);
        }
        return rList; 
```

关于如何让保证金变化也计算在内的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:40:06.783

啊...我想我看到了问题所在。[PathGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry)不继承自 UIElement，这意味着它没有任何 Margins 意义。几何图形托管在一个控件中，并且正是该控件实际将几何图形绘制到屏幕上。如果要将几何图形上的一个点转换为屏幕坐标，则需要找到主机控件的位置并计算偏移量。

我的猜测是您的 PathGeometry 托管在[Path](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path)控件中。（令人困惑，不是吗？）在屏幕坐标中获取位置相对容易。您可以在 Path 上调用[PointToScreen](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.pointtoscreen)方法并将计算的点提供给它（也许添加您可能应用的任何填充）。获得相对于窗口的点更复杂。您可以在窗口上调用 PointToScreen（用于点 0,0），然后从窗口中减去路径的点。或者，您可以将路径放在画布内（画布直接位于窗口内），然后简单地获取 Canvas.Top 和 Canvas.Left。

你没有说你的最终目标是什么，所以很难为你推荐一个特定的解决方案。

# android - 快速拍摄多张照片并在android中上传

> ID：11315767
> 
> 赞同：1
> 
> 时间：2012-07-03T17:05:59.907
> 
> 标签：android, image, video, camera, uploading

我正在开发一个安全应用程序，它记录一系列图像，然后将它们上传到服务器。我有几个问题。

1 我的图片捕获代码正在工作，但速度很慢，我在 onPictureCallback 中有 takePicture() 方法来拍摄另一张照片，但是我每分钟只能拍几张照片，但是如果在系统相机应用程序上单击快门按钮非常快你可以以更高的速度拍照，我认为我的方式会是最快的，你知道我怎样才能提高速度吗？

2 我的上传代码也在工作，但我不知道如何从拍摄的照片中创建上传队列。我尝试过使用数据库，但是文件返回为静态文件，我无法将当时的静态 URI 放入数据库，因为该方法不接受静态变量。我不能使用标准数组，因为我希望在手机重新启动时能够继续上传。

3 最后，我只使用拍照，因为它们似乎不是在录制视频时访问帧的一种方式。他们是否有某种方式，将视频录制为低帧率，暂停它以获得一个帧，将其放入上传队列，然后继续录制？

我只是猜测，如果您暂停视频，则将其暂时保存在某个地方，然后再继续。

如果我能就这 3 个问题中的任何一个获得帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:05:42.190

For problem number 2, try using a scheme that can handle concurrent connections like non-blocking sockets or something similar so that multiple images can be uploaded at once. This method would make the queueing scheme unnecessary.

If possible, I would recommend using a networking library like [eventlet](http://eventlet.net/) since it handles all of that ugly concurrent networking code for you.

# ios - 应用内购买：动态添加非消耗品

> ID：11315769
> 
> 赞同：15
> 
> 时间：2012-07-03T17:06:02.693
> 
> 标签：ios, in-app-purchase

我正在开发一个应用程序，用户可以在其中购买数字地图、图表等。我想将这些包装在应用内购买中。问题是我事先不知道会有多少图表，因为我是从网上的另一个来源获得的。可能有数百个。

我有一台服务器，它定期从该来源获取图表并将其存储在本地；将来可能会出现新图表或消失现有图表。这一切都无需人工干预。

共有三种不同类型的图表。

我的第一个解决方案是创建三个消耗品并让用户购买它们；这工作正常，但不幸的是苹果拒绝了它，因为他们要求图表是“非消耗品”。

但是我很茫然如何用非消耗型实现我想要的。如果我将这三种类型创建为非消耗品，并且用户购买了一种，他将免费获得该组中的所有其他图表，因为非消耗品只能购买一次。

我能想到的唯一解决方案是为每个图表创建一个非消耗品。但这是我想不惜一切代价避免的事情：就像现在一样，图表是定期从远程源获取的，而我这边没有任何手动工作。我想保持这种状态。我不想在每次出现新图表时手动创建新的非消耗品购买。

任何想法如何使其可扩展？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T01:53:08.943

我无法用代码为您完全拼写出来，但您可以通过两种方式处理此问题：

货币。您不出售非消耗品，例如地图。你卖货币。使用该货币您可以购买地图。每当用户访问您的店面时，您动态提供的地图。这样，您只需要跟踪一些购买选项。

另一种选择：我工作的公司最初设置非常简单。我们的应用程序将启动，我们将获取一个 php 脚本，该脚本将我们在其中的应用程序商店 ID 交还给我们。那时我们会验证它们并使用有效的回报。此选项允许我们通过 iTunes Connect 更改应用内购买，然后在脚本中进行更改，一切都很棒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-22T17:17:29.667

这是一篇较旧的帖子，但我刚刚有同样的问题，发现现在有一种方法可以通过在您自己的服务器上托管产品标识符列表来动态提供非消耗品：

> 您在应用中销售的每件产品都有一个唯一的产品标识符。您的应用使用这些产品标识符从 App Store 获取有关产品的信息，例如定价，并在用户购买这些产品时提交付款请求。您的应用可以从其应用程序包中的文件中读取其产品标识符列表，也可以从您的服务器获取它们。
> 
> 如果您的应用具有固定的产品列表，例如用于移除广告或启用功能的应用内购买，请将列表嵌入到应用程序包中。如果产品标识符列表可以更改而无需更新您的应用，例如支持其他关卡或角色的游戏，请让您的应用从您的服务器获取列表。
> 
> 没有运行时机制来获取在 iTunes Connect 中为特定应用程序配置的所有产品的列表。您负责管理您应用的产品列表并将该信息提供给您的应用。如果您需要管理大量产品，请考虑使用 iTunes Connect 中的批量 XML 上传/下载功能。

[苹果开发者应用内购买指南](https://developer.apple.com/library/IOS/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/ShowUI.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T19:25:46.983

我认为您对物品的限制是 10,000 左右。

预先创建大量项目，添加一些代码来检查您的网站以查看您的最高图表编号是多少，并确保用户只能购买您拥有的图表。

该应用程序从您的服务器下载图表名称和相应的产品 ID，然后您只是购买产品。

Apple 不在乎实际产品是否已经在应用程序中并通过购买解锁、从他们的服务器下载或从您的网站提供。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-13T21:15:47.543

无论您是直接通过 IAP 还是通过某种应用内“货币”购买这些物品，您都可以通过使用保证每个物品唯一的地图名称的命名系统来简化您未来需要做的工作量你想卖。例如：

```
 NSString *myMapName = [NSString stringWithFormat:@"%@%@%@%@", app_identifier, map_type, top_left_corner_location, scale]; 
```

这样，如果您的服务器为新地图传递该信息，则可以通过编程方式知道 IAP 标识符应该是什么——只需将其设为 string 的值即可`myMapName`。

在您使用货币的情况下（这听起来比替代选项更容易，并且是许多大型应用程序似乎正在做的事情），您只需要在地图中使用一些数据进行哈希处理，这样人们就无法猜测您存储在他们的钥匙串/plist 中的代码并神奇地获得所有地图而无需付费:)

如果您实际上对每个地图都有单独的 IAP，遗憾的是您必须为每个可能的地图创建一次 IAP。（但是你可以雇佣一些孩子来做这部分的最低工资，对吧？这只是数据输入）不过，它们可以是基本的 shell，通过你的服务器提供的实际信息，如上所述，一旦验证地图实际上已经被购买。

希望这可以帮助！

# oracle - 让 Oracle 物化视图刷新

> ID：11315781
> 
> 赞同：1
> 
> 时间：2012-07-03T17:06:25.347
> 
> 标签：oracle, plsql, materialized-views

我在我的 Java EE 应用程序中跟踪到 Oracle 数据库中的一个错误：有一个没有正确刷新的物化视图。如果我对 MV 进行查询，它会为我提供坏的外键，并且看起来很旧。

那么如何修复或替换这个物化视图呢？欢迎任何想法。

我尝试手动刷新，如下所示：

```
DBMS_MVIEW.REFRESH('PRODUCTDESCRIPTIONS', 'C'); 
```

我收到错误“ORA-00942：表或视图不存在”。我不明白这一点，因为当我手动运行 MV 的子查询时，它看起来很好。

Apex Web界面显示MV已经一年多没有刷新了，所以这不是新问题。

我从刷新过程中查找任何日志记录，但找不到文件 refresh.log。

我试过用一个简单的查询替换物化视图，但它太慢了。我很乐意以某种方式重写/重新配置/重新安装 MV。

数据库和操作系统版本：

```
Oracle Database 10g Express Edition Release 10.2.0.1.0 - Product
PL/SQL Release 10.2.0.1.0 - Production

uname -a:
Linux <server name> 2.6.9-78.0.22.ELsmp #1 SMP Thu Apr 30 19:14:39 EDT 2009 i686 i686 i386 GNU/Linux 
```

物化视图的源代码：

```
CREATE MATERIALIZED VIEW  "PRODUCTDESCRIPTIONS"
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" 
  BUILD IMMEDIATE
  USING INDEX 
  REFRESH COMPLETE ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  DISABLE QUERY REWRITE
  AS SELECT prdcts.primarykey AS product, 
prdcts.upcid AS productupcid, 
prdcts.description AS productdescription, 
prdctctgrs.primarykey AS productcategory, 
prdctctgrs.id AS productcategoryid, 
prdctctgrs.name AS productcategoryname, 
prdctpkgs.primarykey AS productpackage, 
prdctpkgs.name AS productpackagename FROM prdctctgrs, 
prdcts, 
prdctpkgs, 
prdctctgrstoprdcts, 
prdctstoprdctpkgs 
WHERE 
prdctctgrstoprdcts.productcategory = prdctctgrs.primarykey 
AND prdctctgrstoprdcts.product = prdcts.primarykey 
AND prdctstoprdctpkgs.product = prdcts.primarykey 
AND prdctstoprdctpkgs.productpackage = prdctpkgs.primarykey 
AND bitand(prdctctgrs.metaflags, 1)+0 = 0 
AND bitand(prdcts.metaflags, 1)+0 = 0 
AND bitand(prdctpkgs.metaflags, 1)+0 = 0 
AND bitand(prdctctgrstoprdcts.metaflags, 1)+0 = 0 
AND bitand(prdctstoprdctpkgs.metaflags, 1)+0 = 0
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:49:43.170

当您运行刷新过程时，您是否以您要从中选择的表的所有者身份执行它？您正在访问的所有表是否都直接授予您？如果这些表是通过角色授予您的，那么刷新过程将无法看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T17:18:10.827

只是为了确认我对原始问题的评论：删除并重新创建 MV 解决了问题。

# r - 使用 ggplot 进行颜色渐变

> ID：11315783
> 
> 赞同：10
> 
> 时间：2012-07-03T17:06:56.277
> 
> 标签：r, colors, ggplot2

我有一些地理 x、y、z 数据，绘制如下

```
p<-ggplot(aes(x=x,y=y,fill=z),data=my_data) 
```

然后我应用渐变

```
p<-p + scale_fill_gradient(low = "pink", high = "green") 
```

然后平铺并显示数据

```
p<-p + geom_tile()
p 
```

这有效并提供以下内容：

![在此处输入图像描述](../Images/58d9b736dce6d06ddeec7f9bc01df3d8.png)

那时有人会想，我可以`scale_fill_gradient()`用任意数量的其他选项来替换呼叫，例如

```
p<-p + scale_color_hue()
p<-p + scale_colour_gradientn(colours=c("#E5F5F9","#99D8C9","#2CA25F"))
p<-p + scale_colour_gradientn(colours = rainbow(7))
p<-p + scale_colour_brewer() 
```

会工作。

但他们没有，我得到的只是一个渐变的蓝色。

关于为什么会这样，以及如何产生许多快乐的颜色有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:56:02.543

这些比例函数有两个版本，一个是 for `colour`，一个是 for `fill`。您只需要使用`fill`版本，即`scale_fill_hue`等。

# vb.net - 如何在树中找到项目？

> ID：11315788
> 
> 赞同：0
> 
> 时间：2012-07-03T17:07:16.720
> 
> 标签：vb.net, visual-studio-2010, macros

我对 VBasic 非常陌生，但我们开始了。我想在 VStudio 2010 环境中使用宏在我的解决方案中找到项目引用。该项目将用于添加新项目，将其路径用于新文件。

在我的解决方案中，使用了几个虚拟文件夹，当我尝试遍历所有树时，我未能深入到叶子。有人做过吗？

后来我尝试使用其名称收集项目参考：

```
StartupProj = DTE.Solution.Item("MySpecialProj.uniquext") 
```

但我得到的只是这个错误

```
The parameter is incorrect. (Exception from HRESULT:0x80070057 (E:INVALIDARG)) 
```

谷歌搜索，发现它是正确的方法，但没有找到为什么我得到这个错误的运气。有人在这里帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:09:34.910

Hope this helps:

**Solution:** Clear out the temporary framework files for your project in:

For Windows 7, the path is: C:\Users[username]\AppData\Local\Temp\Temporary ASP.NET Files\

For 64 bit systems with 'Framework' in the path the full path is: C:\WINDOWS\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\

*Reference:* [http://www.solutioncottage.com/ShowSolution.aspx?solID=59](http://www.solutioncottage.com/ShowSolution.aspx?solID=59)

Note: doing a search on the error code on google normally yields some great results ;-)

**Edit:** Regarding googling the hexidecimal Error Code. I recommend its better to use the [Microsoft Error Utility](http://www.microsoft.com/en-us/download/details.aspx?id=985). You download the tool, put the exe in your system32 folder. Then open CMD and run the command `err 0x80070057`. It will tell you the error in the Operating System header files. Its much easiler to google these text messages along with the hex code. *ps putting the exe in the system32 folder means you can run CMD from any directory in the command window.*

Here is the result with the output ported to a text file: `err 0x80070057 > C:\NotNullGothjik.txt`

```
# for hex 0x80070057 / decimal -2147024809 :
  COR_E_ARGUMENT                                                corerror.h     
# MessageText: 
# An argument does not meet the contract of the method.
  DDERR_INVALIDPARAMS                                           ddraw.h        
  DIERR_INVALIDPARAM                                            dinput.h       
  DPERR_INVALIDPARAM                                            dplay.h        
  DPERR_INVALIDPARAMS                                           dplay.h        
  DPNERR_INVALIDPARAM                                           dplay8.h       
  DSERR_INVALIDPARAM                                            dsound.h       
  DVERR_INVALIDPARAM                                            dvoice.h       
  ecInvalidParam                                                ec.h           
  ecInvalidSession                                              ec.h           
  ecBadBuffer                                                   ec.h           
  MAPI_E_INVALID_PARAMETER                                      mapicode.h     
  STIERR_INVALID_PARAM                                          stierr.h       
  E_INVALIDARG                                                  winerror.h     
# One or more arguments are invalid
# 14 matches found for "0x80070057" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:39:10.243

如果您想找出所有选定项目的 & DLL 引用，您可以使用：

```
Private _applicationObject As DTE2

Public Sub OnConnection(application As Object, connectMode As ext_ConnectMode, addInInst As Object, ByRef [custom] As Array)
    _applicationObject = DirectCast(application, DTE2)
End Sub 
```

...

```
For Each project As Project In DirectCast(_applicationObject.ActiveSolutionProjects, Object())
    Dim vsProject As VSProject = TryCast(project.[Object], VSProject)
    If vsProject <> Nothing Then            
        For Each reference As Reference In vsProject.References
            ' Do cool stuff here
        Next
    End If
Next 
```

您需要找到并包含对 VSLangProj.dll 的引用（例如在 Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies 中）

# ruby-on-rails - Rails 3 加载静态文件，以及开发和生产的区别

> ID：11315789
> 
> 赞同：0
> 
> 时间：2012-07-03T17:07:19.100
> 
> 标签：ruby-on-rails, asset-pipeline

使用 Rails 3.2.2 和 ruby​​ 1.9.2，并在从开发到生产时发现问题。如果我在 public/ 中只有一个简单的测试页面，它似乎在开发模式下加载，但在生产模式下，我得到这个：

您要查找的页面不存在。

您可能输入了错误的地址或页面可能已移动。

然后我回到开发模式，它（！？！？）也停止在那里工作。如何打印它试图从哪里获取静态文件？如果您知道的话，还要寻找关于 Rails 3 中开发和生产之间所有差异的一个很好的解释。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:43:19.070

尝试将其放入公共/资产中。对于生产模式，在 config/environments/production.rb 中将 config.serve_static_assets 设置为 true

查看[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)以了解 Rails 3 中的资产管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:54:46.457

我建议您应该观看 Ryan 在资产管道上创建的两个网络广播。最初在使用资产管道时，我也感到非常沮丧，在观看了两次网络广播之后，我想我现在对资产管道有了正确的理解，现在我喜欢整个资产管道的概念。

你的：

[http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)

[http://railscasts.com/episodes/341-asset-pipeline-in-production](http://railscasts.com/episodes/341-asset-pipeline-in-production)

# ruby-on-rails - 为什么我的 submit_tag 提交自己的值？

> ID：11315792
> 
> 赞同：0
> 
> 时间：2012-07-03T17:07:26.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 jquery-tokeninput 搜索框，但是当我单击 rails 提交按钮时，它会在 URL 中提交“让我们执行此操作”。仅当您实际使用鼠标单击按钮时。如果您在文本输入具有焦点时按 Enter 键，它似乎可以正常工作

```
<%= form_tag(tags_path, :method => :get, :class => "with-bg") do %>
  <%= text_field_tag(:q, nil, :id => "no-custom-tokens") %> 
  <%= submit_tag "let's do this", :class => "button" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:54:11.447

正确的行为是在点击时提交它的值（在你的情况下“不要这样做”），因为这样你就可以在同一个表单上拥有多个提交按钮：

想象一个电子邮件客户端，您有一张包含大量电子邮件的表格，每封电子邮件有一个复选框和多个操作（删除所选内容、移动所选内容、存档所选内容等）

如果你点击你必须知道你点击了哪个按钮，我想当你按下回车时它不会发送值，因为它使用第一个提交按钮，你可以假设如果你没有任何提交按钮的参数

我认为你的表格工作正常

# objective-c - 隐藏带有淡入淡出效果的 Mac 桌面图标？

> ID：11315796
> 
> 赞同：1
> 
> 时间：2012-07-03T17:07:48.033
> 
> 标签：objective-c, xcode, macos, cocoa, osx-lion

是否可以使用淡入淡出效果隐藏或取消隐藏 Mac 上的桌面图标？这可以通过将壁纸图像放置在实际桌面上来实现，这样当单击桌面时，图标就会出现。

这样的方法可以`sandboxed`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:46:41.937

基本方法是`NSWindow`使用适当的`level`. `kCGDesktopIconWindowLevelKey`是桌面图标的级别，所以应该可以。

沙盒对此不是问题，因为您实际上并没有删除桌面图标，您只是在它们顶部显示一个窗口。

您可能还希望将`collectionBehavior`窗口的 设置为`NSWindowCollectionBehaviorStationary`，这样它就不会受到 Exposé 的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:17:04.533

我不确定这是否可能，因为：

1.  覆盖必须在桌面上，但在新窗口下
2.  这很可能无法被沙盒化

但是，如果你可以让它工作，工作流程将遵循以下原则：

1.  用户点击按钮（最好是菜单栏，因为这个应用程序并没有真正的窗口）
2.  全屏窗口（禁用 UI 元素，例如菜单栏）淡入，背景图像设置为 Mac 的背景图像
3.  再次单击按钮将隐藏窗口

# jquery - jquery datepicker 不适用于没有 html 标签的 jsp 页面

> ID：11315797
> 
> 赞同：0
> 
> 时间：2012-07-03T17:07:48.240
> 
> 标签：jquery

我正在尝试在没有 html 的 jsp 页面中使用 jquery datepicker。

// 所有使用 jquery 的链接和脚本的导入

```
<h:form id="formid">
<t:div id="datepicker" forceid="true" class="demo">
<f:view>
<h:outputText value="Select date" />
<h:inputText id="datepicker"/>
</t:div>
</f:view>
</h:form>

<script>
$(function() {
$( "#datepicker" ).datepicker({showon: 'button', 
buttonImageonly: true});
});
</script> 
```

问题在于 id 和脚本。请分享类似的完整源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:11:09.280

假设您的 jsp 页面生成正确的 HTML，则您的 jQuery 语法是错误的。尝试：

```
$('#datepicker').datepicker({ 
    showOn: 'button', 
    buttonImageOnly: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:12:35.037

您没有正确选择日期选择器文本框。它应该是这样的：

```
$('#datepicker').datepicker({ showOn: button, buttonImageOnly: true }); 
```

另请注意，*showOn*和*buttonImageOnly*必须正确驼峰式。Javascript 区分大小写。

# java - 如何在创建 java.util.logging.Logger 之前检查它是否已经存在？

> ID：11315798
> 
> 赞同：1
> 
> 时间：2012-07-03T17:07:48.410
> 
> 标签：java, concurrency, java.util.logging

我遇到了一个`java.util.logging`死锁，我怀疑这与我检查是否存在`Logger`之前（可能）创建它的方式有关。

我的问题是：**以线程安全的方式检查 a`Logger`在创建它之前是否存在并同时阻止其他线程无意创建它的最佳方法是什么`Logger`？**

背景：`java.util.logging.Logger#getLogger(String, String)`将（原子地，以线程安全的方式）查找一个已命名的对象（`Logger`如果存在），如果不存在则创建它。但就我而言，我想在开始进行一些复杂的定位/重新定位`Logger`之前检查是否已经存在。`ResourceBundle`然后，在 my`ResourceBundle`设置好之后，我知道它是有效的，我想将其名称提供给`Logger#getLogger(String, String)`调用。

`ResourceBundle`只有当 a`Logger`确实不存在时，我才需要进行这种定位/重新设置。`Logger#getLogger(String, String)`我需要让这整个事情自动发生，这样当我在设置我的中间时，其他线程不会调用`ResourceBundle`——我不希望其他线程潜入那里并使用*不同* `ResourceBundle`的名称，例如，从而使我所有的努力都付诸东流。

我的成语是这样的：

```
Logger logger = null;
final LogManager logManager = LogManager.getLogManager();
assert logManager != null;
synchronized (logManager) {
  // This method call finds the logger, but doesn't create one.
  logger = logManager.getLogger(myLoggerName);
  if (logger == null) {
    // no logger found; time to do expensive ResourceBundle lookup/parenting/etc.
    // ...time passes...
    logger = Logger.getLogger(myLoggerName, myResourceBundleNameIJustCalculated);
  }
}
assert logger != null; 
```

这导致了僵局。

当我的代码被锁定在全局上时`LogManager`，另一个线程无辜地执行了一个完全不相关`Logger.getLogger(name)`的调用，从而获得了`Logger.class`对象上的锁（`Logger#getLogger(String, String)`是一个`static`和`synchronized`方法。）所以这个线程有锁`Logger.class`......我的线程（如你在上面看到的） ) 需要才能运行*他的* `Logger.getLogger(name, resourceBundleName)`电话。在内部，`Logger.getLogger(name)`抓住全局的锁`LogManager`。瞧。僵局。

我*认为*防止这种情况的方法是遵循历史悠久的以相同顺序获取所有锁的传统。据我所知，简单地用*另一个街区包围**我* 的街区——但这一次——应该可以解决问题。这看起来对吗？那是：`synchronized` *`synchronized``Logger.class`*

 *```
synchronized (Logger.class) {
  synchronized (globalLogManager) {
    // Hypothesis: this grabs locks in the same order
    // that java.util.logging classes use.  Should prevent
    // deadlocks?
  }
} 
```

感谢您的时间和关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:33:33.703

不要锁定您无法控制的对象；这可能会导致问题。或者，您可以使用*您*控制的其他对象，例如`Map<String, Logger>`. 您可以像使用日志管理器一样使用法线`java.util.HashMap<String, Logger>`和`synchronized`块。

```
// import java.util.*;
// import java.util.logging.*;
final static Map<String, Logger> loggers = new HashMap<String, Logger>();

Logger logger;
synchronized(loggers) {
    logger = loggers.get(myLoggerName);
    if (logger == null) {
        // ... your expensive computation ...
        logger = Logger.getLogger(myLoggerName, myResourceBundleName);
        loggers.put(myLoggerName, logger);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:16:53.773

由于`getLogger`and`addLogger`调用已经为您同步，我认为同步该块不会给您带来任何好处。我只想删除同步。*

# sql - Grails 2.0.4 和 sql profiling 使用 p6spy 插件配置

> ID：11315800
> 
> 赞同：2
> 
> 时间：2012-07-03T17:07:58.053
> 
> 标签：sql, grails, profiling, p6spy

我正在使用 grails 2.0.4。即使 sql profiler 客户端正在连接；p6spy 没有记录任何内容。

我怀疑问题出在属性文件上，或者与我的 Config.groovy log4j 设置有冲突。

**• spy.properties**

```
module.log=com.p6spy.engine.logging.P6LogFactory

realdriver=oracle.jdbc.driver.OracleDriver

dateformat=HH:mm:ss

deregisterdrivers=false

executionthreshold=

outagedetection=false

outagedetectioninterval=

filter=false

include  =

exclude  =

sqlexpression =

autoflush= true

includecategories=

excludecategories=

stringmatcher=

stacktrace=false

stacktraceclass=

reloadproperties=false

reloadpropertiesinterval=60

useprefix=false

appender=com.p6spy.engine.logging.appender.Log4jLogger

append=true

log4j.appender.SQLPROFILER_CLIENT=org.apache.log4j.net.SocketAppender

log4j.appender.SQLPROFILER_CLIENT.RemoteHost=localhost

log4j.appender.SQLPROFILER_CLIENT.Port=4445

log4j.appender.SQLPROFILER_CLIENT.LocationInfo=true

log4j.logger.p6spy=DEBUG,SQLPROFILER_CLIENT 
```

**• 数据源.groovy**

```
dataSource {

    pooled = true

    logSql = true

    //driverClassName = "oracle.jdbc.driver.OracleDriver"

    driverClassName = "com.p6spy.engine.spy.P6SpyDriver" // use this driver to enable p6spy logging

    dialect = 'org.hibernate.dialect.Oracle10gDialect'

} 
```

**• Config.Groovy**

```
// log4j configuration

log4j = {

    appenders {

        console name:'stdout', layout:pattern(conversionPattern: '%d{ISO8601} [%c{1}] %p: %m%n')

    }

    info    'grails.app' // Logging warnings and higher for all of the app

    error   'org.codehaus.groovy.grails.web.servlet',  //  controllers
            'org.codehaus.groovy.grails.web.pages', //  GSP
            'org.codehaus.groovy.grails.web.sitemesh', //  layouts
            'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
            'org.codehaus.groovy.grails.web.mapping', // URL mapping
            'org.codehaus.groovy.grails.commons', // core / classloading
            'org.codehaus.groovy.grails.plugins', // plugins
            'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
            'org.springframework',
            'org.hibernate',
            'net.sf.ehcache.hibernate'

    trace    'org.hibernate.type'

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T17:08:27.503

The most likely cause of this problem is that the Oracle JDBC driver is being registered by DriverManager before P6SpyDriver. P6Spy 1.3 requires that P6SpyDriver gets registered before the real driver. This is what allowed it to work without any modifications to the JDBC URL.

There are two potential solutions to this issue.

1) Set 'deregisterdrivers=false' in spy.properties. This will cause the driver configured as the 'realdriver' in spy.properties to be deregistered and reregistered when P6SpyDriver is loaded. This enforces the correct ordering within DriverManager.

2) Set 'useprefix=true' in spy.properties and add the prefix 'p6spy:' to your JDBC URL. Since the JDBC URL is different, the order of registration no longer matters.

Further troubleshooting tips: [http://p6spy.github.io/p6spy/1.3/troubleshooting.html](http://p6spy.github.io/p6spy/1.3/troubleshooting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:18:04.127

我遇到了一些问题，P6Spy 没有检测到 H2 的正确驱动程序。最后我选择了[log4jdbc](http://code.google.com/p/log4jdbc/)。它对其代码进行了更新。P6Spy 已经有一段时间没有更新了，但也许没有必要。我在博客中写了几行关于[log4jdbc、grails 和 tomcat7](http://www.34m0.com/2012/11/log4jdbcgrailstomcat7.html)的经验。可能对你有点用！

# android - 如何在 onResume 中找到 contentView

> ID：11315804
> 
> 赞同：0
> 
> 时间：2012-07-03T17:08:27.047
> 
> 标签：android, views, onresume

在我的应用程序中，我有两个视图，一个主要视图和一个辅助视图。但是，如果我的应用程序在第二个视图中暂停，它会在恢复代码运行时崩溃。我发现这是因为在我的简历中有一行将值设置为文本视图。我想将它包含在 if 语句中，但我不知道应该使用什么短语来查找内容视图。抱歉，如果我有点不清楚 - 当我的用户处于辅助视图并且他们关闭然后重新打开应用程序，运行 on resume 代码时，它会崩溃，因为无法访问 onResume 方法试图修改的文本视图。（因为它是我的主要观点），所以它崩溃了。

我知道我可以使用 try-catch 语句，但我还需要在我的应用程序中无法使用 try-catch 的地方找到视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:23:23.870

请发布相关代码和 logcat 错误以澄清您的问题。

不过我会猜测一下。如果要查找显示在 Activity 中的视图，只需使用：

```
TextView text = (TextView) findViewById(R.id.text);
if(text != null) {
    text.setText("Something");
} 
```

但是，如果在第二个 Activity 启动之前它是可见的，通常它会在第一个 Activity 恢复时可见，所以我不明白发生了什么使 TextView 为空......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:56:42.883

我通过在一个视图中将值保持为零来解决我的问题`int`，并且每当切换视图时，我将该 int 的值更改为 1。然后在我的`onResume`，如果ints == 1，那么我不设置我的edittext的值，但是如果那个int == 0，那么我知道调用该`setText()`方法是安全的

# c++ - dynamic_cast 是什么意思 （事件）？

> ID：11315805
> 
> 赞同：1
> 
> 时间：2012-07-03T17:08:36.087
> 
> 标签：c++, events, dynamic-cast

`event`是 MSVC++ Express 2008 中突出显示的关键字，框架中使用了以下代码：

```
else if (dynamic_cast<simulation::AnimateEndEvent*>(event))
{ ... } 
```

`dynamic_cast`对关键字而不是变量/对象意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:11:33.920

在这种情况下，事件是一个变量而不是关键字，即使语法高亮器无法分辨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:15:00.833

在这种情况下，事件是一个变量。我假设您正在编译本机 C++，但 event 也是[托管 C++ 中的关键字](http://msdn.microsoft.com/en-us/library/4b612y2s%28v=vs.90%29.aspx)。我想 Visual Studio IDE 无法区分这两者，但编译器会为您提供正确的 - 即使智能感知/语法突出显示没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:12:50.893

事件不是关键字，它是一个对象/变量。

Visual Studio 对各种对象进行各种语法突出显示，但请记住，这不是 100% 可靠的，并且经常会错误识别代码片段。

# ruby-on-rails - 工厂女孩协会 has_many 通过现有对象

> ID：11315808
> 
> 赞同：0
> 
> 时间：2012-07-03T17:08:55.447
> 
> 标签：ruby-on-rails, ruby, associations, factory-bot

也许我没有正确地表达这个问题。

我有一个看起来像这样的数据结构

设施通过设施角色拥有许多用户

现在在工厂 gril 我知道我可以创建一个这样的协会

```
factory :facility_role do
  facility {|f| f.association(:facility)}
  user {|u| u.association(:user)}
  role "ABC"
end 
```

但是我想要的是将它与第一个设施相关联，如果在上面的代码中有一个调用创建，就像它剂量一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:06:06.070

您可以访问块中当前创建的对象。所以你可以在你的工厂做你想做的事。为了使事情更清楚，您应该将 f 和 u 重命名为 fr for facility_role。

还有一些你可以挂钩的回调：[https ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#callbacks](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#callbacks)

# iphone - iOS 开发团队和证书

> ID：11315809
> 
> 赞同：3
> 
> 时间：2012-07-03T17:08:56.413
> 
> 标签：iphone, ios, xcode, certificate

我是否需要为团队中的每个开发人员生成一个证书，或者他们可以共享一个证书？如果这是真的，我如何在每台机器上安装它？

谢谢。

编辑：如何在其他计算机上安装现有证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:15:45.030

每个开发人员都必须与公司帐户相关联才能签署软件。在此之后，他们可以转到会员中心供应门户并下载为他们计划签署软件的每台计算机提供给他们的供应配置文件。

如果他们与公司帐户相关联，他们还可以通过使用他们的开发人员帐户登录从他们的计算机请求另一个配置文件，但根据我的经验，它只是提供相同的歌唱键，而不是为每个人创建一个新的。

所以简而言之，不会为团队生成多个证书，只有一个唯一的一个可供所有人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:15:53.907

您只需要一张证书。在获取开发人员配置文件之前，请确保为您的开发设备添加所有 UUID。然后你也可以分享。

# iphone - TabBar 中的手指手势

> ID：11315811
> 
> 赞同：1
> 
> 时间：2012-07-03T17:09:14.837
> 
> 标签：iphone

我必须创建一个标签栏。如果我在标签栏上单击一下，标签应该会读到一些引号。

同样，它应该识别这些触摸手势并在标签中显示文本：

1) 双击

2) 1 根手指：从上到下滑动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:05:32.560

对于水龙头，您可以使用`[UITapGestureRecognzer][1]`

对于滑动，您可以使用`[UISwipeGestureRecognizer][2]`

对于所有可用的手势，请查看`[UIGestureRecognizer][3]`文档

`UIView`您可以使用该`addGestureRecognizer`方法将这些手势识别器添加到

# java - 使用 java 在 MongoDB 集合中插入文档时出错

> ID：11315820
> 
> 赞同：0
> 
> 时间：2012-07-03T17:10:02.877
> 
> 标签：java, mongodb, document

将文档插入 mongodb 集合时出现以下错误

```
Jul 3, 2012 10:27:31 PM com.mongodb.DBTCPConnector fetchMaxBsonObjectSize
WARNING: Exception determining maxBSONObjectSize 
java.io.EOFException
    at org.bson.io.Bits.readFully(Bits.java:48)
    at org.bson.io.Bits.readFully(Bits.java:33)
    at org.bson.io.Bits.readFully(Bits.java:28)
    at com.mongodb.Response.<init>(Response.java:40)
    at com.mongodb.DBPort.go(DBPort.java:127)
    at com.mongodb.DBPort.go(DBPort.java:92)
    at com.mongodb.DBPort.findOne(DBPort.java:145)
    at com.mongodb.DBPort.runCommand(DBPort.java:156)
    at com.mongodb.DBTCPConnector.fetchMaxBsonObjectSize(DBTCPConnector.java:467)
    at com.mongodb.Mongo.getMaxBsonObjectSize(Mongo.java:574)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:241)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:211)
    at com.mongodb.DBCollection.insert(DBCollection.java:57)
    at com.mongodb.DBCollection.insert(DBCollection.java:102)
    at DBOperations.addDocument(DBOperations.java:54)
    at MongoBook.main(MongoBook.java:28)
Jul 3, 2012 10:27:39 PM com.mongodb.DBTCPConnector fetchMaxBsonObjectSize
WARNING: Exception determining maxBSONObjectSize 
java.io.EOFException
    at org.bson.io.Bits.readFully(Bits.java:48)
    at org.bson.io.Bits.readFully(Bits.java:33)
    at org.bson.io.Bits.readFully(Bits.java:28)
    at com.mongodb.Response.<init>(Response.java:40)
    at com.mongodb.DBPort.go(DBPort.java:127)
    at com.mongodb.DBPort.go(DBPort.java:92)
    at com.mongodb.DBPort.findOne(DBPort.java:145)
    at com.mongodb.DBPort.runCommand(DBPort.java:156)
    at com.mongodb.DBTCPConnector.fetchMaxBsonObjectSize(DBTCPConnector.java:467)
    at com.mongodb.DBTCPConnector.checkMaster(DBTCPConnector.java:446)
    at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:145)
    at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:137)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:261)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:211)
    at com.mongodb.DBCollection.insert(DBCollection.java:57)
    at com.mongodb.DBCollection.insert(DBCollection.java:102)
    at DBOperations.addDocument(DBOperations.java:54)
    at MongoBook.main(MongoBook.java:28) 
```

我的程序如下：

MongoBook类

```
import com.mongodb.BasicDBObject;
public class MongoBook
{
    public static void main(String []str)
    {
        DBOperations dbops = null;

        try
        {
            dbops = new DBOperations("localhost", 28017);
            BasicDBObject d1 = new BasicDBObject();
            d1.put("Name", "Malhar Vora");
            d1.put("Address", "224, Bhatiya Colony");
            d1.put("Phone", "9429007086");

            dbops.addDocument(d1);
        }
        catch(Exception e)
        {
            System.out.println("Error occured");
        }

    }
} 
```

DBOperations 类

```
import java.net.UnknownHostException;
import java.util.ArrayList;

import com.mongodb.Mongo;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.BasicDBObject;
import com.mongodb.DBObject;
import com.mongodb.DBCursor;

class DBOperations
{
    private String hostUrl; // To store host url of Database Server
    private int port; // To store port no of Database Server
    private Mongo mongo = null; 
    private DB db = null;
    private DBCollection collContacts = null;

    public DBOperations(String host,int port) throws UnknownHostException
    {
        this.hostUrl = host;
        this.port = port;   
        mongo = new Mongo(host, port);
        db = mongo.getDB("ContactDB");
        collContacts = db.getCollection("Contacts");
    }

    // Method to get host url no for database server
    public String getHostUrl() {
        return hostUrl;
    }

    // Method to set host url no for database server 
    public void setHostUrl(String hosturl) {
        this.hostUrl = hosturl;
    }

    // Method to get port no for database server 
    public int getPort() {
        return port;
    }

    //Method to set port no for database server 
    public void setPort(int port) {
        this.port = port;
    }    

    // Method to add document to collection
    public void addDocument(BasicDBObject doc)
    {
        if (doc!=null)
        {
            this.collContacts.insert(doc);  

        }
    }

    //Method to retrieve all documents with specific criteria
    public ArrayList<BasicDBObject> getDocuments(BasicDBObject dbfind)
    {
       ArrayList<BasicDBObject> docList = new ArrayList<BasicDBObject>();
       DBCursor cur = this.collContacts.find(dbfind);

       while(cur.hasNext())
       {
           docList.add((BasicDBObject) cur.next());
       }
       return docList;
    }

} 
```

我是 MongoDB 的新手。有人可以告诉我为什么会发生此错误以及解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:48:32.987

将您要连接的端口号从 28017 更改为 27017。即更改为：

```
new DBOperations("localhost", 27017); 
```

27017 是 mongod 监听的默认端口。另一方面，28017 是管理 Web 控制台侦听的默认端口。

# javascript - 无法与使用 jquery append 添加的 dom 对象交互

> ID：11315821
> 
> 赞同：2
> 
> 时间：2012-07-03T17:10:06.953
> 
> 标签：javascript, jquery

我已经使用 append 将 tr 和 td 标签添加到表中，但我的 jQuery 似乎不知道 dom 对象在那里（我认为这就是 append/prepend 所做的？）。当我运行脚本时，表格行被添加并且用户可以看到它，但是 jQuery 没有捕获超链接或其他任何内容上的点击处理程序。我在不同的页面上做了同样的事情，效果很好。我也包括在内。如果有人能告诉我我的思路在哪里出轨，我将非常感激。另外，如果我以错误的方式解决此问题，请告诉我，以便我改进。

损坏的代码：

```
 $("#addAdmin").click(function(){
                $("#chosenAdmins").append('<tr id = "admin' + $("#admins").val() + '"><td align="left">' + $("#admins option:selected").text() + ' </td><td align="right"><a href="#" class = "removeAdmin" id = "ra" style = "font-size: 10px;">Remove</a></td><tr>');
    });
    $(".removeAdmin").click(function(e){
        e.preventDefault();
        alert('clicked');
        alert(this.attr(id));
    });
    <select id = "admins">
        <option value = "1">bob smith</option>
    </select> 
    <input type = "button" id = "addAdmin"/>
    <table id = "chosenAdmins" align="center" width="0%"> </table> 
```

在不同页面上工作的类似代码是：

```
 $(document).ready(function() {
        var leftData = '<div id = "l1">left Stuff</div>';
        var leftData = leftData + '<div id = "l2">left Stuff</div>';
        var rightData = '<div id = "r1">right Stuff</div>';
        var rightData = rightData + '<div id = "r2">right Stuff</div>';
        $("#selector").prepend("<div id = 'leftSelect' style = 'float:left'>"+leftData+"</div><div id = 'rightSelect' style = 'float:left'>"+rightData+"</div>");
        $("#l1").click(function(){
            $(this).hide("fast", function(){
                $(this).prependTo('#rightSelect');
                $(this).show("fast");
            });
        });
     });

<div id = "selector"> </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:14:32.353

`$('.removeAdmin').click()`在页面上有任何`.removeAdmin`元素之前，您正在定义您的事件处理程序 ( )。

您需要做的是委托您的活动。假设您使用的是最新的 jQuery：

```
$("#chosenAdmins").on('click','.removeAdmin',function(e){
    e.preventDefault();
    alert('clicked');
    alert(this.attr(id));
}); 
```

这样，事件处理程序被附加到一个存在的元素，即`chosenAdmins`表。

**注意**不建议使用`.live`，因为这会将事件附加到文档中，并且其他代码可能会无意中删除这些事件。如果您使用的是 jQuery < 1.7，请使用`delegate`：

```
$("#chosenAdmins").delegate('.removeAdmin','click',function(e){
    e.preventDefault();
    alert('clicked');
    alert(this.attr(id));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:15:52.060

`.removeAdmin`添加点击处理程序时还不存在。试试这个：

```
$("#addAdmin").click(function(){
        var tr = $("#chosenAdmins").append('<tr id = "admin' + $("#admins").val() + '"><td align="left">' + $("#admins option:selected").text() + ' </td><td align="right"><a href="#" class = "removeAdmin" id = "ra" style = "font-size: 10px;">Remove</a></td><tr>');
        $(".removeAdmin", tr).click(function(e){
            e.preventDefault();
            alert('clicked');
            alert(this.attr(id));
        });

    });
    <select id = "admins">
        <option value = "1">bob smith</option>
    </select> 
    <input type = "button" id = "addAdmin"/>
    <table id = "chosenAdmins" align="center" width="0%"> </table> 
```

另外，小心`id="ra"`在你的行中使用。由于`#addAdmin`可能会被多次点击，因此您最终可能会得到多个具有相同 ID 的元素，这将使您的垃圾疯狂！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:12:29.347

对于动态创建的元素，您需要以下`live`功能：

```
$("#elem").live("click", function() {
    // Code here
}); 
```

适用于、单击、悬停和所有类型的功能。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:13:31.043

您在`.append`（忘记添加正斜杠）中有错字，修复损坏的`HTML`，它应该可以工作：

从：

```
...Remove</a></td><tr>') 
```

到：

```
...Remove</a></td></tr>') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T11:39:45.330

`$(document)`附加 dom 时使用选择器`live`，`delegate`不推荐。例如 ：

```
$(document).on('click','.removeAdmin',function(e){
    e.preventDefault();
     alert('clicked');
    alert(this.attr(id));
}); 
```

# javascript - 正则表达式模式以匹配字符串中的维度

> ID：11315822
> 
> 赞同：0
> 
> 时间：2012-07-03T17:10:36.240
> 
> 标签：javascript, regex

如果这是重复的，我深表歉意，但我已经搜索了 3 个小时，但找不到任何不只处理单一模式的东西。

我在 URL 中使用了尺寸参数（即 ...media.php?sid=200x100&mid=... 其中 200 是宽度，100 是高度）。还有其他参数可能/可能不包括其他数字（即 UUID），但对于此任务并不重要，但不应影响模式匹配。

我需要做的是匹配 'sid=###x###' 部分只是为了替换它。### 应该支持从 1 到 99999 范围内的可变长度数字。

到目前为止，我已经尝试了很多模式，并且怀疑有人可能会知道这一点，所以我不会列出我所有的尝试，但这是我正在使用的基本代码：

```
var oldSid = new RegExp('sid=[0..99999]x[0..99999]');
var newSid = 'sid=500x500';
var newUrl = oldUrl.replace(oldSid, newSid); 
```

您可以提供任何帮助以填补空白，我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:14:06.320

使用正则表达式`sid=[0-9]{1,5}x[0-9]{1,5}`找到这样的匹配...

*[在这里](http://ideone.com/aIv3N)测试一下。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:14:53.743

*使用这个：*

```
var oldSid = new RegExp("sid=\\d{1,5}x\\d{1,5}"); 
```

*...或者（因为它不是动态正则表达式）这个：*

```
var newUrl = oldUrl.replace(/sid=\d{1,5}x\d{1,5}/, newSid); 
```

# java - windows 7上swt文件对话框的导航栏

> ID：11315824
> 
> 赞同：0
> 
> 时间：2012-07-03T17:10:47.350
> 
> 标签：java, eclipse, swt, openfiledialog

打开文件对话框的导航栏仅在 Windows 7 中不存在。

文件对话框是从向导打开的，所以我从向导那里得到它的外壳。我明白了。 [http://store2.up-00.com/June12/a1V57465.png](http://store2.up-00.com/June12/a1V57465.png)

但它应该与导航栏一样

[http://i.stack.imgur.com/lNOWC.png](http://i.stack.imgur.com/lNOWC.png)

我错过了从文件对话框中丢失导航栏的内容？

# sql - 计算比率只给出 0 或 1？

> ID：11315826
> 
> 赞同：4
> 
> 时间：2012-07-03T17:11:03.870
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一段 T-SQL 代码看起来像这样：

```
select @automation_rate = 
  case 
    when @total_count = 0 then 0
    else @automated_count / @total_count
  end 
```

@automation_rate 是十进制 (3,2)。@total_count 和 @automated_count 是整数。

不幸的是，@automation_rate 返回的唯一值是 0 或 1。显然这里有问题，它可能非常简单，但对于我的生活，我看不到它。

基础结果集中的所有数据（我正在遍历一个表）是 0 或正整数。除自动化率外，所有值都是整数。

这是示例值和预期（使用计算器）与实际结果：

```
automated count     total count     expected ratio     actual ratio
---------------     -----------     --------------     ------------
              0              35                0.0             0.00
             98             258              37.98             0.00
             74             557              13.29             0.00
            140             140               1.00             1.00 
```

正如你所看到的，我得到的所有值的比率都是 0.00，除了自动 = 总计。我还有一个 Excel 电子表格，它执行相同的基本计算，并且每次都完美（即就像“预期”列一样）。

那么我哪里做错了？

*（这是在 MS SQL Server 2005 上，如果有任何影响的话）*

**编辑**感谢大家的回答。我假设整数舍入部分是因为它正在移动到它会自动转换的十进制数据类型，而不是意识到它会进行计算，舍入*然后*转换。每个人都有相似的答案，所以到处都赞成。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T17:13:10.673

这似乎是由于整数数学，因为@automated_count 和@total_count 显然是整数。你需要说：

```
1.0*@automated_count / @total_count 
```

或更明确地说：

```
CONVERT(DECIMAL(5,2), @automated_count) / @total_count 
```

这些也会产生 0.3798 等，所以你可能想要：

```
CONVERT(DECIMAL(5,2), 100.0*@automated_count / @total_count) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:14:49.063

由于除法上使用的两个值都是整数，因此它返回一个整数。您需要将其中一个转换为十进制才能使其起作用：

```
CONVERT(DECIMAL(6,2),@automated_count) / @total_count 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T17:14:47.330

当您使用整数进行数学运算时，SQL Server 会进行四舍五入。

尝试：

```
 select @automation_rate =
    case
      when @total_count = 0 then 0.00
     else (@automated_count * 1.00) / @total_count
   end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:15:45.000

你在截断。任何处理所有整数且没有双精度的东西都会被截断为整数。0.x 最终将是 0。

# php - Shopify PHP 与 SSL 证书：我在哪里设置 USE_SSL_PEM？

> ID：11315827
> 
> 赞同：1
> 
> 时间：2012-07-03T17:11:06.213
> 
> 标签：php, ssl-certificate, shopify

在此处使用 Shopify 的第一步...

我在带有 cURL 7.24 的 Windows 7 机器上运行 PHP 5.4 和 apache 2.2。我正在尝试使用使用 ohShopify PHP 适配器的示例应用程序（https://github.com/cmcdonaldca/ohShopify-Sample-App），但是...

[在我允许应用程序访问商店（位于https://xxxxxx.myshopify.com](https://xxxxxx.myshopify.com)上）后，我收到“SSL 证书问题，验证 CA 证书是否正常”错误。[PHP API FAQ - Q2 ( http://wiki.shopify.com/PHP_API_FAQ](http://wiki.shopify.com/PHP_API_FAQ) )中提到了这个问题，并提供了一个可能的解决方案。但我不明白在哪里“在您的配置中将 USE_SSL_PEM 设置为 true”。这是什么配置？PHP.ini ？卷曲_？只是在php代码中定义它？我已经在 config_lib.php 文件中的 php 代码中进行了尝试，该文件是示例应用程序的一部分，如下所示：

```
define('USE_SSL_PEM',true); 
```

但这不起作用..搜索示例应用程序文件显示没有使用它...所以我必须在错误的地方。

FAQ 的第二部分是在 .php 代码中定义“CA_FILE”。我认为我可以接受，因为我已经导出了 myshopify.com 证书并且它似乎是有效的。我使用以下方法将其从 .cer 转换为 .pem：

```
openssl x509 -inform DES -in ie_shopify.cer -out shopify.pem -text 
```

然后在 config_lib.php 文件中：

```
define('CA_FILE', getcwd() . '\\shopify.pem'); 
```

我已经确认 CA_FILE 确实正确指向具有绝对路径的文件。

我还通过设置 CURLOPT_CAINFO 尝试了这里的建议（http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/）在被调用但结果相同的 ohShopify curlSetopts() 函数中。

并且（如前所述）我发现了如何从这里（http://curl.haxx.se/docs/sslcerts.html）将 .cer 转换为 .pem

谢谢，

尼尔

更新：解决了！我没有信任我首先使用 Internet Explorer 作为 .cer 文件提取然后使用 openssl 转换为 .pem 文件的 .pem 文件，而是转到：

```
curl.haxx.se/docs/caextract.html 
```

...并获取了 Mozilla CA 证书包 - 这已经是 .pem 格式。我将 cacert.pem 文件放在与另一个文件相同的目录中，并更新了 curlSetopts() 函数中的 CURLOPT_CAINFO 行（我之前在 shopify.php 中添加了这一行）。和以前一样，我直接指向文件：

```
curl_setopt($ch, CURLOPT_CAINFO, 'D:/apache/htdocs/cacert.pem'); 
```

它有效。继续。

更新 2：只是为了澄清，因为我最初在 Shopify 的 PHP API 常见问题解答中寻找解决方案（如上所述）......我不需要设置 USE_SSL_PEM 值（无论它属于哪里）或添加定义 CA_FILE 代码。unitstep.net 博客中关于 CURLOPT_CAINFO 的建议是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:27:48.107

我找到了解决问题的方法：不出所料，.pem 文件*不*正确 - 正如错误消息所示。我用 Mozilla CA 证书包完全替换了它

```
http://curl.haxx.se/docs/caextract.html 
```

然后在 shopify.php 文件中，我在 curlSetopts() 函数中添加了以下行，使用绝对路径直接指向下载的 .pem 文件：

```
curl_setopt($ch, CURLOPT_CAINFO, 'D:/apache/htdocs/cacert.pem'); 
```

# joomla - 超级管理员无法编辑前端joomla 2.5

> ID：11315828
> 
> 赞同：0
> 
> 时间：2012-07-03T17:11:05.960
> 
> 标签：joomla, joomla2.5

您好，我确实在 joomla 2.5 的前端以超级管理员身份登录我没有看到任何用于编辑内容的小图标...有什么技巧吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:37:53.797

去：

Joomla Bakcned >> 文章管理器 >> 选项 >> 编辑布局选项卡

然后确保前 2 个参数设置为“是”。

如果是这样，请转到权限选项卡，然后单击“超级用户”并确保该组具有正确的权限。

顺便说一句，这如果用于默认的 Joomla 文章。如果您使用的是 K2，那么您需要在组件中创建一个新用户组，将您的用户添加到该组，然后授予组编辑权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:35:13.397

最后更新：我更改了模板。我可以看到打印和邮件图标，但仍然看不到编辑图标。由于我在数据库中做了一些操作，问题可能来自数据库，有什么建议可以解决这个问题吗？

* * *

非常感谢洛德！

我不知道第二个选项，但仍然没有图标编辑，但是由于它在我更改模板时显示，因此表明这是一个模板问题。我有一个使用 j 的 1.7 模板！2.5可能是问题...

# php - 在 Windows 7 Professional 中设置 Aptana Studio 3

> ID：11315829
> 
> 赞同：-2
> 
> 时间：2012-07-03T17:11:06.020
> 
> 标签：php

Aptana 最初为带有白色字母的黑色背景的 PHP（可能还有其他语言）加载。我试图扭转这些并得到混合结果，例如代码行仅在突出显示时才显示。你能指出我正确的方向吗，因为搜索常见问题没有帮助。谢谢约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:17:44.537

最简单的方法是进入 Preferences->Aptana->Themes （或进入首选项并在搜索栏中输入主题）然后你应该看到一个下拉菜单，上面写着 Aptana studio，在这里你可以选择不同的主题模板而不是自己定制。

希望这可以帮助

# javascript - Google Analytics 事件跟踪无法正常工作

> ID：11315830
> 
> 赞同：1
> 
> 时间：2012-07-03T17:11:07.313
> 
> 标签：javascript, google-analytics

我正在尝试为某人解决网站上的跟踪事件，但我似乎无法弄清楚问题所在。让我先说一下，我意识到在 stackoverflow 上有很多类似的问题，它们帮助我排除了很多问题，但问题仍然存在。

**在 Analytics 中，它显示“您的访问发送事件的 x”，但随后在“总事件”下显示为零。它还 - 正如人们所期望的那样 - 没有可用于类别和行动的数据。**

我试过的：

*   检查以确保我传递的参数是正确的。我将类别、动作和标签都作为字符串传递，将值作为整数传递。
*   时间问题。我意识到，大多数情况下，当人们发生这种情况时，页面在事件完全触发之前就被重定向是一个问题。但是，在我的测试页面上，一旦文档准备好，我就会触发一个事件，并且它仍然
    只以与按钮相同的方式记录。
*   只是等待数据收集。我希望这是解决方案，但如果 5 天后没有收集数据，我应该等待多长时间？

这是测试页面的链接：[http ://www.easybreezypreschool.com/order-now_test.htm](http://www.easybreezypreschool.com/order-now_test.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:51:27.537

我查看了您的测试页面...使用[Fiddler](http://www.fiddler2.com/fiddler2/)我可以看到 _trackPageview 和 _trackEvent 请求正在发送。

是否有可能在 Google Analytics（分析）帐户上设置了某种过滤器来排除您的事件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T11:58:20.700

请点击以下链接：[https](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide) ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide 适用于旧版本的 Google Analytics：跟踪基础（异步语法）

例子：

```
 <!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
$(document).ready(function(){   
   $('.recorddownload').on('click', function() {
      var txt = $(this).attr('title');
      $("span").text(txt);
    });
});
</script>
</head>
<body>

<p>If you click on me, I will disappear.</p>
<p>Click me away!</p>
<a class="recorddownload" href="#" title="swishing party">Click me too!</a>
<br/>
<a class="recorddownload" href="#" title="eating party dis">Click me too!</a>
<br/>
<a class="recorddownload" href="#">Click me too!</a>
<br/>
<span></span>

</body>
</html> 
```

在 Google 分析中，您可以看到不同的分类

# canvas - 不使用 Canvas 导出 OpenLayers/GeoServer 图像

> ID：11315834
> 
> 赞同：1
> 
> 时间：2012-07-03T17:11:28.147
> 
> 标签：canvas, openlayers, geoserver

我的应用程序正在使用 OpenLayers 和 GeoServer 动态创建覆盖在地图上的 KML 文件。我想将此组合地图/叠加层导出为单个图像。

使用 Canvas 作为我的渲染器，我可以使用“toDataURL()”函数成功完成此任务。

不幸的是，我需要支持 Canvas 不可用的 IE7/8。“Excanvas”javascript 库也不模拟此功能。

我还有什么其他选择？我现在求助于将背景地图读入图像缓冲区并尝试在其上手动绘制我的 KML 矢量数据，然后将其作为单个图像提供。这不仅听起来像是在重新发明轮子，而且我相当确定我不会正确地将地图坐标（以纬度/经度为单位）转换为屏幕坐标（考虑到投影），我的图像将是偏斜且与 OpenLayers/GeoServer 显示的内容不匹配。

是否有任何 Java 库可以为我进行经纬度到屏幕坐标转换？我知道我的输出投影需要是什么。

# ruby - oily_png ruby gem 安装错误

> ID：11315836
> 
> 赞同：2
> 
> 时间：2012-07-03T17:11:36.247
> 
> 标签：ruby, rubygems, sass, compass-sass

安装[oily_png](https://github.com/wvanbergen/oily_png/) gem 时出现错误。Ruby 已经安装在我的系统中。我在 Windows 7 - 64 位。

```
C:\Users\jitendra>gem install oily_png
Fetching: oily_png-1.0.2.gem (100%)
ERROR:  Error installing oily_png:
        The 'oily_png' native gem requires installed build tools.

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' 
```

![在此处输入图像描述](../Images/528cb2da580d440485a7c3449b535618.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:35:28.353

OilyPNG 是用 C 编写的，因此必须进行编译。您需要安装并正确设置编译器，以便 Ruby/Rubygems 可以找到它以安装 gem。

可以使用 Windows 二进制文件发布 gem，这样就不需要在 Windows 机器上进行编译。不幸的是，因为我没有 Windows 机器，也没有 Windows 开发经验，所以我无法做到这一点。（尽管接受拉取请求：）

我的建议是遵循 Rubygems 给你的建议：

`Please update your PATH to include build tools or download the DevKit from 'http://rubyinstaller.org/downloads' and follow the instructions at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'`

# jquery - 如何在不丢失样式的情况下使用 jQM 动态更改 DOM 元素文本

> ID：11315837
> 
> 赞同：1
> 
> 时间：2012-07-03T17:11:44.737
> 
> 标签：jquery, jquery-mobile, jquery-selectors

如何在不丢失 jQM 样式的情况下更改 dom 元素的文本？- 我可以调用 .text('sometext') 的大多数项目，但我遇到了某些元素的问题，例如带有按钮数据角色的链接和用于单选按钮的标签 - jQM 样式搞砸了。

我在下面提出了一个函数，但我对如何识别这些边缘情况并不满意——有没有更好的方法来更改各种元素的文本而不丢失它们的 jQM css？

这并没有让我觉得它不应该如此复杂——也许是因为我是 web 开发的新手，但我经常遇到这样的问题。有谁知道一个很好的使用参考？- 尝试“猜测”非常痛苦，当您搜索“jqm 在标签上为单选按钮动态设置文本”时，很难在 Google 上找到答案

```
var domElement = $j('#' + request.id);

//check if it exists
if (domElement) {
    if (domElement.length === 1) {

        switch(domElement.get(0).tagName.toLowerCase()) {
            case 'label':
                //it could be part of a radio button
                if (domElement.get(0).className.toLowerCase().indexOf("ui-radio") > 0){
                    domElement.find('.ui-btn-text').text(request.val);
                }
                else{
                    domElement.text(request.val);
                }
                break;
            case 'p':
            case 'span':
            case 'textarea':
            case 'li':
            case 'h3':
                domElement.text(request.val);
                break;
            case 'input':
                domElement.val(request.val);
                break;
            case 'a':
                var datarole = domElement.data('role');
                switch(datarole) {
                    case 'button':
                        domElement.find('.ui-btn-text').text(request.val);
                        break;
                }

                break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:51:42.657

您需要使用[pagebeforecreate](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)事件在 JQM 页面初始化之前应用您的文本更改。

此时 DOM 未修改，因此您可以像使用 jQuery 一样选择元素。这是首选方法，因为它不依赖于了解/硬编码 JQM 创建的底层标记（在未来版本中可能会发生变化）。

请务必在页面上包含 JQM 脚本之前放置您的代码......这确保您的代码将首先执行。

```
$(function() {

    $(document).bind("pagebeforecreate", beforePageCreate);

    function beforePageCreate(event, ui) {
        $('a').text('Text modified before page creation.');
        $('input').val('Value modified before page creation.');
        $('label').text('Text modified before page creation.');        
    };

}); 
```

这是该`pagebeforecreate`事件的完整示例：http: [//jsfiddle.net/VCYLs/2/](http://jsfiddle.net/VCYLs/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:01:06.850

这样的事情对你有用吗？

*   [http://jsfiddle.net/HZBfY/](http://jsfiddle.net/HZBfY/)

JS

```
$('#changeLabels').on('click', function() {
    $('.radioGroup').each(function() {
        var radio  = $(this);
        $("label[for='"+radio.attr('id')+"']").find('span.ui-btn-text').text('New Label for '+radio.attr('id'));
        console.log('New Label for '+radio.attr('id'));
    });
}); 
```

HTML

```
<div data-role="page" class="type-home">
    <div data-role="content">

        <fieldset data-role="controlgroup">
        <legend>Choose a pet:</legend>
             <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" class="radioGroup"/>
             <label for="radio-choice-1">Cat</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2" class="radioGroup"/>
             <label for="radio-choice-2">Dog</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-3" value="choice-3" class="radioGroup"/>
             <label for="radio-choice-3">Hamster</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-4" value="choice-4" class="radioGroup"/>
             <label for="radio-choice-4">Lizard</label>
        </fieldset>
        <br />
        <a href="#" data-role="button" id="changeLabels">Change Radio Labels</a>
    </div>
</div>​ 
```

# .net - Log4Net StringMatchFilter 没有过滤任何东西

> ID：11315839
> 
> 赞同：11
> 
> 时间：2012-07-03T17:11:52.853
> 
> 标签：.net, nhibernate, log4net, filtering, string-matching

我正在记录 nHibernate 生成的所有 SQL，因为我们有一个奇怪的问题。仅此一项就会生成大量日志，因此我试图通过仅记录包含特定 ID 的行来缩短它们。似乎一切都在发生。这里有什么奇怪的地方吗？

```
 <appender name="RollingFile" type="log4net.Appender.RollingFileAppender,log4net" >

        <param name="File" value="nHibernate.txt" />
        <param name="AppendToFile" value="true" />
        <param name="DatePattern" value="yyyy.MM.dd" />

        <layout type="log4net.Layout.PatternLayout,log4net">
            <conversionPattern value="%d %p %m%n" />
        </layout>

        <filter type="log4net.Filter.StringMatchFilter">
            <stringToMatch value="5764" />
            <acceptOnMatch value="true" />
        </filter>

    </appender>

    <logger name="NHibernate.SQL" additivity="false">
        <level value="DEBUG" />
        <appender-ref ref="RollingFile" />
    </logger> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-03T17:22:35.113

事实证明，您需要添加以下代码：

```
<filter type="log4net.Filter.DenyAllFilter" /> 
```

完整的块如下所示：

```
<appender name="RollingFile" type="log4net.Appender.RollingFileAppender,log4net">

    <param name="File" value="nHibernate.txt" />
    <param name="AppendToFile" value="true" />
    <param name="DatePattern" value="yyyy.MM.dd" />

    <layout type="log4net.Layout.PatternLayout,log4net">
        <conversionPattern value="%d %p %m%n" />
    </layout>

    <filter type="log4net.Filter.StringMatchFilter">
        <stringToMatch value="5764" />
        <acceptOnMatch value="true" />
    </filter>

    <!-- need this here! -->
    <filter type="log4net.Filter.DenyAllFilter" />

</appender>

<logger name="NHibernate.SQL" additivity="false">
    <level value="DEBUG" />
    <appender-ref ref="RollingFile" />
</logger> 
```

# image - VB6可以将图像保存为JPEG吗？

> ID：11315840
> 
> 赞同：2
> 
> 时间：2012-07-03T17:11:58.207
> 
> 标签：image, vb6, bitmap, jpeg

注意：我不是 VB6 程序员 - 我是负责制造中使用的应用程序的 Android 程序员，我有一位同事负责与我的 Android 设备对话的 VB6 程序。

过去我们的 VB6 程序将 Microsoft .bmps 发送到 Android 设备，但现在我们正在将平板电脑添加到我们的产品列表中，并且想要发送更大的图像以利用平板电脑的额外空间，我们发现 .bmp 是太大会阻塞网络。

最终我们将用 .Net 替换旧的 VB6 产品，但在我们这样做之前，VB6 有没有办法以编程方式将位图转换为 JPEG？我的同事不知道，但我一直发现 SO 在我的领域（Android、.Net）中非常有用，所以我想我会在这里尝试一个 VB6 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:00:01.967

2002 年，Microsoft 发布了[Windows® Image Acquisition Automation Library v2.0 Tool：用于 VB 和脚本的图像采集和操作组件](http://www.microsoft.com/en-us/download/details.aspx?id=18287)。

这可以接受来自文件或字节数组的 .BMP 甚至是原始 Windows 24 位像素位图（加上宽度和高度），并将它们转换为 JPEG，生成文件或字节数组结果。

该库是现代 Windows 版本的一部分，但可以安装到 WinXP（SP1 或更高版本）中。

简单的文件到文件示例：

```
Dim ImgF As WIA.ImageFile
Dim ImgP As WIA.ImageProcess

Set ImgF = New WIA.ImageFile
ImgF.LoadFile "Zapotec.bmp"
Set ImgP = New WIA.ImageProcess
With ImgP
    .Filters.Add .FilterInfos!Convert.FilterID
    .Filters.Item(1).Properties!FormatID.Value = wiaFormatJPEG
    .Filters.Item(1).Properties!Quality.Value = 70
    Set ImgF = .Apply(ImgF)
End With
ImgF.SaveFile "Zapotec.jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:05:58.143

MarkJ 上面的链接值得一看，但这里还有其他三个需要考虑的想法：

*   [http://freeimage.sourceforge.net/](http://freeimage.sourceforge.net/)

*   [http://www.vb-helper.com/howto_vb6_net_save_image.html](http://www.vb-helper.com/howto_vb6_net_save_image.html)

*   [http://www.mvps.org/emorcillo/en/code/vb6/savejpggdip.shtml](http://www.mvps.org/emorcillo/en/code/vb6/savejpggdip.shtml)

FreeImage 是一个开源库；有一个下载，其中包括一个可供 VB6 使用的 DLL。

VB Helper 链接指向一篇文章，通过 VB.NET DLL 从 VB6 使用 .NET。

最后，MVPS 链接是使用 GDI+ 将图像保存为 JPG 的 VB6 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T21:50:47.657

是的，它可以！在 Planet 源代码上查看此出色的贡献

[http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=50065&lngWId=1](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=50065&lngWId=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T15:12:47.253

Bob77 的出色回答让我走上了正轨，但下载链接不再可用。自 Vista 以来，Microsoft 已在 Windows 中包含 WIA 支持。

有关完整详细信息，请参阅[Microsoft 的 Windows 图像采集自动化层页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630827%28v=vs.85%29.aspx)。

我发现代码片段的初始部分需要调整以引用捆绑的 WIA 类，现在称为 WIACtl。

```
Dim ImgF As WIACtl.ImageFile
Dim ImgP As WIACtl.ImageProcess

Set ImgF = New WIACtl.ImageFile
ImgF.LoadFile "Zapotec.bmp"
Set ImgP = New WIACtl.ImageProcess 
```

# iframe - 无法获取 Vimeo embed code working in IE7/8/9

> ID：11315843
> 
> 赞同：3
> 
> 时间：2012-07-03T17:12:11.053
> 
> 标签：iframe, internet-explorer-8, internet-explorer-9, embed, vimeo

I am using this code from Vimeo to embed a player on a website:

```
<iframe src="http://player.vimeo.com/video/44327600" width="500" height="375" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

The player appears with image preview, and functions correctly in Firefox, Chrome and Safari.

It does not work on IE9 standalone, or IE8 or IE7 using [IETester](http://my-debugbar.com/wiki/IETester/HomePage). I am on 64-bit Windows 7 Ultimate

I had the code embedded within a lightbox firing when the "Watch Presentation" button is clicked, which you can also test on the URL below. To test, I've isolated the code separately beneath the three buttons -- where it still is not working.

Has anyone had any problems with this new-ish embed method from Vimeo? Any ideas or suggestions greatly welcomed, I'm about at my wits end here :}

Here is a link to the page: [http://cme.stage.setsailmedia.com/cme/cme/?y=1](http://cme.stage.setsailmedia.com/cme/cme/?y=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:29:45.937

In my case, the problem was updating the Flash!

See the print with Vimeo above and Youtube below. Before and after upload.

# Before:

![Before Upload](../Images/d13d76b7d7bdef6ffa8ca47156056903.png)

# After:

![After Upload](../Images/cbff3e168a9719c72b95e9ec6bab06ee.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T17:12:20.553

I have found a thread that discusses this problem, they have provided a solution

> In order to fix this, please wrap the following code fragment in player.core.opt.js starting at line 17 character ~316 (in the minified file): d=!!b.canPlayType;if(d){d=new Boolean(d);d.vp6=b.canPlayType('video/x-flv; codecs="vp6"')||false;d.vp8=b.canPlayType('video/webm; codecs="vp8,vorbis"')||false

However, if you're loading this inside a iFrame which I am doing then you'll find that js script is loaded from vimeo's cdn, and so you can't alter it.

[http://vimeo.com/forums/help/topic:100056](http://vimeo.com/forums/help/topic:100056)

# javascript - Backbone.js 中监听和修改模型属性的正确方法是什么

> ID：11315844
> 
> 赞同：0
> 
> 时间：2012-07-03T17:12:27.920
> 
> 标签：javascript, backbone.js

我有一个附加到具有“标题”属性的模型的视图。我希望能够在每次设置时修剪该值（出于某种模糊的原因，我不想在服务器端执行此操作）。在我的模型中，我尝试了这个：

```
this.on('change:title', this.trimName);
//... later on
trimName: function(){
    console.log('triggered');
    this.set({'title':$.trim(this.get('title'))}, {silent:true});
} 
```

但这会触发无限递归。（另外，递归不会发生在 jsfiddle 上，为什么？）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:50:17.457

让模型进行修剪：在修剪后覆盖`set`方法和运行方法`Backbone.Model`。`set`

> 请注意，这并没有完全清除以处理对象文字，您需要自己实现。这将适用于`key, value, option`参数。查看`set` Backbone源代码中的方法示例：[http ://backbonejs.org/backbone.js](http://backbonejs.org/backbone.js)

```
set: function(key, value, options) {
      var attrs;

      // Handle both `"key", value` and `{key: value}` -style arguments.
      if (_.isObject(key) || key == null) {
        attrs = key;
        options = value;
      } else {
        attrs = {};
        attrs[key] = value;
      }

      options = options || {};
      if ( options.trim ) {
          attrs[key] = $.trim( attrs[key] );
      }
      // do any other custom property changes here

      Backbone.Model.prototype.set.call( this, attrs, options ); 
} 
```

# android - ICS 库中的 Horizo ntalListView。来源？

> ID：11315846
> 
> 赞同：1
> 
> 时间：2012-07-03T17:12:34.210
> 
> 标签：android, scrollview, horizontalscrollview

像很多人一样，我对 android 中没有 Horizo​​ntalListView 感到沮丧。我正在使用 Paul 在此处找到的实现，这很棒！但并不完美，在 ScrollView 内部也不能很好地工作。在 ICS（谷歌 rom 的 AOSP）附带的新图库中，有一种 Horizo​​ntalListView，当您选择要显示的照片时，底部有所有照片，您可以滚动它们。

我试图找到来源，但没有任何帮助！

有谁知道在哪里可以找到源代码/这个实现？

这是我使用的当前实现：http: [//www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:53:18.900

`Gallery`好的，我在查看 Android 的源代码后解决了我的问题。我刚刚添加了这一行：

```
getParent().requestDisallowInterceptTouchEvent(true); 
```

在`onScroll`方法的开始。这只是说父母停止“接受”这个视图的触摸事件，你可以在`ScrollView`.

希望它对某人有所帮助。

# php - 将多列数组传递给服务器

> ID：11315853
> 
> 赞同：0
> 
> 时间：2012-07-03T17:12:55.260
> 
> 标签：php, mysql, arrays

我有一个页面，其中包含客户端生成的数据，格式为十五列数组。行数将根据用户输入而有所不同，总行数在 1 到 200 之间。我想以一种有效的方式将这个数组传递给我的服务器，它将使用 php 插入到 MySQL 数据库中，但我不知道应该如何打包数据以进行传输。页面中的数据是使用 JavaScript 生成的，并以这种方式布局：

```
<div id="row1" class="row">
  <span id="entry1">User generated data.</span>
  <span id="entry2">User generated data.</span>
  <span id="entry3">User generated data.</span>
  ...
  <span id="entry15">User generated data.</span>
</div>
<div id="row2" class="row">
  <span id="entry1">User generated data.</span>
  <span id="entry2">User generated data.</span>
  <span id="entry3">User generated data.</span>
  ...
  <span id="entry15">User generated data.</span>
</div> 
```

有人推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:12:55.647

我不认为多次重复相同的ID是佳能。

```
<div id="row1" class="row">
  <span id="entry1">User generated data.</span>
  <span id="entry2">User generated data.</span>
  ...
<div id="row2" class="row">
  <span id="entry1">User generated data.</span> 
```

我会使用复合 ID：

```
<div id="row1" class="row">
  <span id="entry1_1">User generated data.</span>
  <span id="entry1_2">User generated data.</span>
  ...
<div id="row2" class="row">
  <span id="entry2_1">User generated data.</span>
  ... 
```

此时您可以：

*   构建一个将所有项目作为键/值的 POST 查询：entry1_1=用户生成的数据。...

    这将很容易被 PHP 解析，或者：

*   在 Javascript 中构建一个 JSON 字符串作为 dicts { row1: { entry1: "User generate data" }, row2: {...}

*   您可以尝试通过提交如下字段来为 PHP 预解析数组：

    entry[1][1]=用户生成的数据。

    （“entry[1][1]”是键的名称。PHP*应该*正确解析它）。

您还可以根据您创建新项目的方式，直接创建一个 POST FORM，将这样的字段附加到 DOM：

```
<input type="text" name="entry[7][14]" value="" class="input" /> 
```

抱歉，如果对您的交互设计没有更好的了解，提出建议很尴尬。

# c++ - 从命令行输入

> ID：11315854
> 
> 赞同：8
> 
> 时间：2012-07-03T17:12:58.400
> 
> 标签：c++, command-line-arguments

我有一个 C++ 程序，我为一个参数的许多值运行它。我想要做的是以下内容：假设我有两个参数：

```
int main(){
    double a;
    double b;
//some more lines of codes
} 
```

现在在我编译之后我想运行它

```
./output.out 2.2 5.4 
```

所以它`a`取值为 2.2 并`b`取值为 5.4。

当然，一种方法是使用`cin>>`，但我不能这样做，因为我在集群上运行程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T17:15:24.393

您需要在您[*的*](http://www.site.uottawa.ca/~lucia/courses/2131-05/labs/Lab3/CommandLineArguments.html)`main`：

```
int main(int argc, char* argv[]) {
    if (argc != 3) return -1;
    double a = atof(argv[1]);
    double b = atof(argv[2]);
    ...
    return 0;
} 
```

[`atof`](http://www.cplusplus.com/reference/clibrary/cstdlib/atof/)此代码使用;解析参数 你可以[`stringstream`](http://www.cplusplus.com/reference/iostream/stringstream/)改用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T17:15:32.573

如果您想使用命令行参数，那么不，您*不要*使用`cin`，因为为时已晚。您需要将`main`签名更改为：

```
int main(int argc, char *argv[]) {
    // argc is the argument count
    // argv contains the arguments "2.2" and "5.4"
} 
```

所以你现在有`argv`一个指向 的指针数组`char`，每个指针都指向一个传递的参数。第一个参数通常是可执行文件的路径，后续参数是启动应用程序时传入的任何内容，以指向`char`.

在这种情况下，您需要将`char*`'s 转换为s。`double`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T17:16:57.940

这就是命令行参数的用途：

```
#include <sstream>

int main(int argc, char *argv[])
{
    if (argv < 3)
       // show error
    double a, b;

    std::string input = argv[1];
    std::stringstream ss = std::stringstream(input);

    ss >> a;

    input = argv[2];
    ss = std::stringstream(input);

    ss >> b;

    // a and b are now both successfully parsed in the application
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T17:21:33.900

你看过[提升计划选项](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)吗？

它将像许多其他建议的那样采用命令行参数，并让您提供一个非常一致、干净和可扩展的命令行界面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:16:08.373

您可以使用这种形式的`main()`函数来获取命令行参数

```
 int main(int argc, char* argv[]) { 

    } 
```

其中`argv[]`数组的值包含您的命令行变量，`char*`因为您需要转换为`floats`或`doubles`在您的情况下

# javascript - PLUpload 获取剩余文件？

> ID：11315855
> 
> 赞同：0
> 
> 时间：2012-07-03T17:13:05.220
> 
> 标签：javascript, jquery, queue, bind, plupload

所以我使用 PLUpload 来上传文件。但是，我遇到了一个问题。我试图在队列完成时触发一个事件。我很近，但不完全在那里。看这里：

```
$(function() {
    var files_remaining = 0;

    // Setup flash version
    $("#flash_uploader").pluploadQueue({
        // General settings
        runtimes : 'flash',
        url : 'blah.php',
        max_file_size : '200mb',
        chunk_size : '1mb',

        // Flash settings
        flash_swf_url : 'plupload.flash.swf'
    });

    var uploader = $("#flash_uploader").pluploadQueue();

    uploader.bind('FilesAdded', function(up, file, res)
    {
        files_remaining++;
    });

    uploader.bind('FileUploaded', function(up, file, res)
    {
        files_remaining--;
        if (files_remaining == 0)
        {
            alert('Complete!');
        }
    });
}); 
```

注意最后两个`.bind()`用途。基本上，我正在尝试更新一个变量来确定已经上传了多少文件，然后确定（基于此）队列何时完成。但是，您可能知道，FilesAdded 不是基于每个文件运行，而是在将任意数量的文件添加到队列时运行。如果添加三个文件，则仅调用一次 FilesAdded。这意味着此尝试仅在一次上传一个文件时才有效。

所以，我的问题是：获取队列中剩余文件数量的最佳方法是什么，或者最终（甚至更好）每次队列完成时调用一个事件？我知道很多人都有这个问题，但我还没有找到一个我能够找到工作的解决方案！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:31:13.310

```
$(function() {
    var files_remaining = 0;

    // Setup flash version
    $("#flash_uploader").pluploadQueue({
        // General settings
        runtimes : 'flash',
        url : 'blah.php',
        max_file_size : '200mb',
        chunk_size : '1mb',

        // Flash settings
        flash_swf_url : 'plupload.flash.swf'
    });

    var uploader = $("#flash_uploader").pluploadQueue();

    uploader.bind('QueueChanged', function(up, files)
    {
        files_remaining = uploader.files.length;
    });

    uploader.bind('FileUploaded', function(up, file, res)
    {
        files_remaining--;
        if (files_remaining == 0)
        {
            alert('Complete!');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T14:58:23.897

在 FileUploaded 事件中检查**up.total.queued**

```
uploader.bind('FileUploaded', function(up, file, res)
{
     if (up.total.queued == 0)
     {
         alert('Complete!');
     }
}); 
```

# ruby-on-rails - Rails 3.通过关联查找带有has_many的某个类别的文档

> ID：11315857
> 
> 赞同：0
> 
> 时间：2012-07-03T17:13:11.173
> 
> 标签：ruby-on-rails, ruby, associations, kaminari

我有以下型号

```
Document
has_many :document_categorizations
has_many :document_categories, through: :document_categorizations

DocumentCategory
has_many :document_categorizations
has_many :documents, through: :document_categorizations

DocumentCategorization
belongs_to :document_category
belongs_to :document 
```

在我的索引操作中，我可以按类别过滤文档...

```
def index
  if params[:category_id].nil?
    @documents = Document.page(params[:page]).per(15)
  else
    @documents = DocumentCategory.find(params[:category_id]).documents
    @category = DocumentCategory.find(params[:category_id])
  end    
  ....
end 
```

我不能再使用`DocumentCategory.find(params[:category_id]).documents`了，因为我刚刚为分页添加了 kaminari，并且我需要在 Document 模型而不是 DocumentCategory 上进行查询。

**如何查询某个类别的文档？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:19:59.223

啊! 太简单。当你连续几个小时编写代码时，就会发生这种情况。我想我只需要休息一下并获得一点观点，突然间它就击中了我。

```
@category = DocumentCategory.find(params[:category_id])
@documents = @category.documents.page(params[:page]).per(15) 
```

# c# - c#中的条件清除列表

> ID：11315864
> 
> 赞同：-4
> 
> 时间：2012-07-03T17:14:00.840
> 
> 标签：c#, visual-studio-2010

我的 C# 代码有问题... VS2010 不会让我编译 :(

这是我正在尝试做的事情：

```
bool listNotNeeded;

if(listNotNeeded && !myList.Any()) //I've tried other ways of verbalizing
    {
    myList.Clear();
    } 
```

它拒绝编译...给出错误：InvalidOperationException 未处理。序列不包含任何元素。如果列表已经为空，并且代码的其他部分填充它，则它永远不会到达这里。列表人口代码工作正常，已经编译和测试......只是这篇文章出于某种原因打破了它。

编辑：如果可能的话，我希望能够在不使用不必要的 try-catch 或使用起始值初始化列表的情况下进行编译。

```
 private void UpdateRocket()
    {
        if (rocketFlying)
        {
            Vector2 gravity = new Vector2(0, 1);
            rocketDirection += gravity / 9.8f;
            rocketAngle = (float)Math.Atan2(rocketDirection.X, -rocketDirection.Y);
            rocketPosition += rocketDirection;
            Vector2 smokePos = rocketPosition;
            smokePos.X += randomizer.Next(10) - 5;
            smokePos.Y += randomizer.Next(10) - 5;
            smokeList.Add(smokePos);
            if (smokeList.Count > 20)
                smokeList.Remove(smokeList.First<Vector2>());
        }
        if (!rocketFlying)
            if (smokeList.Count > 0)
                smokeList.Remove(smokeList.First<Vector2>());
        if (rocketPosition.X < 0 || rocketPosition.X > screenWidth || rocketPosition.Y > screenHeight)
            rocketFlying = false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:24:32.147

问题出在代码中的其他地方，您没有与我们分享。

这里有几个例子：

```
var myList = new List<int>();
myList.Any();             // Does not throw that exception
myList.Clear();           // Does not throw that exception

myList.First();           // Throws: 
                          // InvalidOperationException unhandled. 
                          // Sequence contains no elements.

myList.FirstOrDefault();  // Does not throw that exception 
```

这个例子运行良好：

```
bool listNotNeeded = false;
var myList = new List<int>() { 1, 2, 3, 4 };

if (listNotNeeded && !myList.Any())
{
    myList.Clear();
} 
```

> 代码的另一部分使用 First 顺序删除项目。这完全搞砸了吗？

**是**的，这把事情搞砸了。如果列表为空，调用`First`将抛出该异常。

**编辑**

我认为这是你的问题：

```
if (smokeList.Count < 1)
    smokeList.Remove(smokeList.First<Vector2>()); 
```

您是说：“如果剩下的物品少于 1 件`smokeList`，请获取第一项并将其删除”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:19:06.817

```
bool listNotNeeded = false; // set a value

if(listNotNeeded && !myList.Any()) //I've tried other ways of verbalizing
{
    myList.Clear();
} 
```

# delphi - 如何知道应用程序是否空闲

> ID：11315866
> 
> 赞同：5
> 
> 时间：2012-07-03T17:14:07.100
> 
> 标签：delphi

我正在创建一个模拟用户输入（鼠标和键）的框架。

该框架将为 DUnit 测试的简单实现提供一个 API。

我目前的一个大问题是等待应用程序空闲。

我有一个服务器 (TCP)，它接收诸如“键入文本”、“按键”、“单击 XY”之类的命令……我需要等待这些命令被处理，然后返回客户端 API 以继续运行测试的下一步。

由于我的服务器通过线程接收并执行操作，因此它不会冒捕获执行的风险，就像单击将显示模式消息的按钮一样。

我目前正在使用 ApplicationEvents.OnIdle 来帮助我，但在某些情况下它不能很好地工作。

我也尝试使用 WaitForInputIdle 但它不能解决我的问题，因为在处理用户输入后应用程序可能仍在处理操作......

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:25:51.483

由于您可以控制*目标*应用程序（我假设这是因为您提到了 ApplicationEvents 的 OnIdle 事件），我会查看 RegisterWindowMessage，并有一条消息响应（例如，将测试系统的 HWND 作为 LParam 或 WParam 传递）当应用程序不再运行任何东西时。

因为自定义消息在中央消息队列中排队，所以您应该在应用程序完成您通过模拟输入事件启动的操作后立即获得响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:51:46.077

你是如何模拟用户输入的？您是否通过 PostMessage 提供程序消息？如果是这样，您可以切换到 SendMessage，它会一直阻塞，直到程序处理完发送的消息。

# makefile - 在 Windows 上编译 GMP 库

> ID：11315867
> 
> 赞同：0
> 
> 时间：2012-07-03T17:14:11.290
> 
> 标签：makefile, codeblocks, gmp

我已经下载并提取了 GMP 库的文件。我的目标是使用这个库与我的 c++ 代码一起使用 code::blocks 作为我的 IDE。我已经验证我提取的文件中有一个makefile。实际上，有两个make文件，makefile.am和makefile.in。

假设这些文件是我需要的，我打开命令提示符并导航到存储这些 makefile 的文件夹 (c:\cpplibs\gmp)。从那里，我输入“make”并按回车键，期望这将编译库，然后我可以从 code::blocks 链接到它。

但是，我立即从命令提示符处收到一条错误消息：

> 'make' 不是内部或外部命令、可运行程序或批处理文件。

我检查了 Path 变量，我的 make.exe 文件存储的路径就在这个字符串中，所以我认为这不是问题。我之前没有在 Windows 环境中使用过 Make，所以我被卡住了。我在这里正确使用 Make 吗？有谁看到我做错了什么？

谢谢！

（编辑：我发布了几个屏幕截图来展示我如何设置 Make 以及 Path 变量指向它）

![在此处输入图像描述](../Images/784294216fbd99c9b85231e465c30576.png)

![在此处输入图像描述](../Images/08a4ca1abbf4d79728272765d2d264e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:22:58.873

这些是 autoconf/automake 文件，而不是常规的 make 文件，因此如果没有 GNU 工具，它们将无法工作。

考虑让[MinGW](http://www.mingw.org)来构建它，或者你可以试试 Cygwin，如果你不介意 cygwin 依赖，这会更简单。

此外，错误消息表明 make 不在您的路径中，尽管您的想法如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-05T17:25:52.017

[我使用此站点](https://machinecognitis.github.io/Math.Gmp.Native/html/846f5c8a-6cba-433e-9f18-cde2ff5695cd.htm)的说明在 Windows 中进行编译：

您可以从该站点找到要下载的所有文件： [https ://github.com/MachineCognitis/Math.Gmp.Native/tree/master/Math.Gmp.Native/Dependencies](https://github.com/MachineCognitis/Math.Gmp.Native/tree/master/Math.Gmp.Native/Dependencies)

> 在 Windows 上构建 GNU MP 库 安装 MSYS2。
> 
> 在 64 位计算机上，安装 msys2-x86_64-20161025.exe，在 32 位计算机上，安装 msys2-i686-20161025.exe。您还可以在此处检查 MSYS2 的更新版本。将 MSYS2 安装到其默认位置。
> 
> 安装后，您需要更新 MSYS2 软件包。从 Windows 开始菜单，启动 MSYS2 MSYS。在 shell 命令窗口中，输入命令：
> 
> 吃豆人-Syuu
> 
> 并按照说明进行操作。您将不得不关闭命令窗口，重新打开一个新窗口，然后重新输入命令 pacman -Syuu。
> 
> 最后，为了构建软件，您需要使用以下命令安装多个软件包：
> 
> pacman -S --needed base-devel mingw-w64-i686-toolchain mingw-w64-x86_64-toolchain git subversion mercurial mingw-w64-i686-cmake mingw-w64-x86_64-cmake
> 
> 从与上一步相同的命令窗口运行。
> 
> 要构建 32 位软件，请使用 Windows 开始菜单中的 MSYS2 MinGW 32 位命令，对于 64 位软件，请使用 MSYS2 MinGW 64 位。
> 
> 安装yasm。
> 
> 在 64 位计算机上，将 yasm-1.3.0-win64.exe 复制到 C:\msys64\usr\bin，并将其重命名为 yasm.exe。
> 
> 同样在 32 位计算机上，将 yasm-1.3.0-win32.exe 复制到 C:\msys32\usr\bin，并将其重命名为 yasm.exe。
> 
> 构建 GNU MP。
> 
> 创建文件夹 C:\Temp\x86 和 C:\Temp\x64。这些是将安装已编译的 32 位和 64 位版本的 GNU MP 的文件夹。在文件夹 C:\Temp 中解压缩 gmp-6.1.2.tar.bz2。这会将 GNU MP 放在子文件夹 gmp-6.1.2 中。
> 
> 在使用 Windows 开始菜单中的命令 MSYS2 MinGW 32 位和 MSYS2 MinGW 64 位打开的每个命令窗口中，运行以下命令：
> 
> cd /c/Temp/gmp-6.1.2 ./configure --enable-fat --disable-static --enable-shared --prefix=/c/Temp/x86 or x64 make make check make install
> 
> --prefix 指定安装文件夹。请注意，Windows C:
> 驱动器被指定为 MinGW 窗口中的根 /C/ 文件夹。另请注意，configure 和 make 命令将针对新解压缩的 GNU MP 源运行。make install 命令在 C:\Temp\x86 和 C:\Temp\x64 文件夹中创建 libgmp-10.dll。GNU MP 库的这两个编译版本将被复制到 Math.Gmp.Native Visual Studio 项目的 x86 和 x64 文件夹中。它们也可以直接复制到 bin/Debug 或 bin/Release 文件夹的 x86 和 x64 文件夹中。
> 
> 32 位和 64 位 make check 命令会生成一些警告，但所有测试都成功通过。

# sql - 在 Select 语句计算 Oracle SQL 中使用列别名

> ID：11315870
> 
> 赞同：3
> 
> 时间：2012-07-03T17:14:21.887
> 
> 标签：sql, oracle, oracle11g, alias

是否可以做类似的事情`select 1 as foo, foo+1 from dual`

这返回`ERROR at line 1: ORA-00904: "FOO": invalid identifier`

我有一个组成列的冗长计算，我希望能够轻松地使用该值在差异列中进行计算

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:16:21.560

您不能直接使用别名。一种方法是使用派生表：

```
SELECT foo, foo+1
FROM (SELECT 1 AS foo FROM dual) AS T 
```

# javascript - 允许来自 Amazon S3 的 AJAX GET？（访问控制允许来源）

> ID：11315872
> 
> 赞同：38
> 
> 时间：2012-07-03T17:14:31.090
> 
> 标签：javascript, jquery, amazon-s3

我将 JSON 对象存储在 Amazon S3 中，我想直接从 Javascript 中的 S3 加载该数据。我的 GET 看起来很一般：

```
$.ajax({
    'type':'GET',
    'url':'http://s3.amazonaws.com/mybucketname/'+id,
    'dataType':'text',
    'success':function(msg) {
        alert(msg);
    }
}); 
```

我收到以下错误：

```
XMLHttpRequest cannot load http://s3.amazonaws.com/whatever/whatever. Origin http://mylocalhostname:9000 is not allowed by Access-Control-Allow-Origin. 
```

我可以使用 curl 从 S3 获取该 URL，或者直接从我的浏览器中导航。我真的必须通过我自己的服务器代理所有这些请求吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-09-04T18:52:21.260

如果您使用通配符 *，S3 不会发送“Access-Control-Allow-Origin”标头，例如：

```
<AllowedOrigin>*</AllowedOrigin> 
```

要强制 s3 发送 AllowedOrigin 标头但仍让您的内容从任何站点加载，请使用以下命令：

```
<AllowedOrigin>http://*</AllowedOrigin>
<AllowedOrigin>https://*</AllowedOrigin> 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-08T13:14:21.933

S3 现在支持使用 CORS 文件的跨域请求。

您可以在这里找到更多信息：

[http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html#how-do-i-enable-cors](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html#how-do-i-enable-cors)

和：

[http://aws.typepad.com/aws/2012/08/amazon-s3-cross-origin-resource-sharing.html](http://aws.typepad.com/aws/2012/08/amazon-s3-cross-origin-resource-sharing.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-25T15:08:48.827

搜索了很多 - 这是示例解决方案：

[http://blog.bignerdranch.com/1670-upload-directly-to-amazon-s3-with-support-for-cors/](http://blog.bignerdranch.com/1670-upload-directly-to-amazon-s3-with-support-for-cors/)

（在存储桶权限选项卡上添加 cors）

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-26T15:25:29.477

我们遇到了类似的问题，但不是使用 GET，而是使用预签名的 S3 POST。我认为这可能对搜索此问题的人有所帮助。

在某些浏览器中，Dropzone.js lib 无法将图像直接上传到 S3 存储桶（预签名的 S3 POST）。奇怪的是，这一直在某些计算机上发生，并且在二十次尝试中发生。

在一台计算机上，我们设法在 Firefox 调试器（网络选项卡）中捕获错误

```
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://s3-eu-west-1.amazonaws.com/pobble.com-browser-uploads-production. (Reason: CORS header 'Access-Control-Allow-Origin' missing).

Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://s3-eu-west-1.amazonaws.com/pobble.com-browser-uploads-production. (Reason: CORS request failed). 
```

将 S3 存储桶 CORS 更新为此对我们有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>http://www.myapp.com</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
        <ExposeHeader>Accept-Ranges</ExposeHeader>
        <ExposeHeader>Content-Range</ExposeHeader>
        <ExposeHeader>Content-Encoding</ExposeHeader>
        <ExposeHeader>Content-Length</ExposeHeader>
        <ExposeHeader>Access-Control-Allow-Origin</ExposeHeader>
    </CORSRule>
    <CORSRule>
        <AllowedOrigin>https://www.app.com</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
        <ExposeHeader>Accept-Ranges</ExposeHeader>
        <ExposeHeader>Content-Range</ExposeHeader>
        <ExposeHeader>Content-Encoding</ExposeHeader>
        <ExposeHeader>Content-Length</ExposeHeader>
        <ExposeHeader>Access-Control-Allow-Origin</ExposeHeader>
    </CORSRule>
</CORSConfiguration> 
```

重要的部分是`<ExposeHeader>Access-Control-Allow-Origin</ExposeHeader>`感谢这个 S3 暴露了响应头`OPTIONS`和`POST`

[![在此处输入图像描述](../Images/ada5905bf3a80adb281770b83a7f1325.png)](https://i.stack.imgur.com/eeqoz.png)

[@anas-aloui](https://stackoverflow.com/users/5302096/anas-alaoui)、[@joserose](https://meta.stackoverflow.com/users/3296547/joserose)和 @equivalent的合作工作

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-03T17:32:11.923

您可以使用 jsonp 请求而不是 json。这是详细信息。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-11T14:26:41.207

我正在为同样的问题而苦苦挣扎。唯一的区别是我想从我的 S3 中提取一个带有 Ajax 的文件并将其加载到一个站点中。

经过大量搜索后，我最终将此选项添加到我的 Ajax 请求中。

## xhrFields: { withCredentials: true },

只要您拥有 CORSConfiguration 允许所有功能，就可以像魅力一样工作。

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-04T10:38:09.767

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>http://*</AllowedOrigin>
        <AllowedOrigin>https://*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

这种 CORS 配置就像一个魅力

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-20T09:18:10.297

这是我的提示：[https ://github.com/mozilla/pdf.js/issues/3150](https://github.com/mozilla/pdf.js/issues/3150)

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
        <ExposeHeader>Accept-Ranges</ExposeHeader>
        <ExposeHeader>Content-Range</ExposeHeader>
        <ExposeHeader>Content-Encoding</ExposeHeader>
        <ExposeHeader>Content-Length</ExposeHeader>
    </CORSRule>
</CORSConfiguration> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-12T02:44:02.670

就我而言，我想从存储桶“myBucket”中获取一些资源。

在 S3 客户端，AWS S3 现在支持 JSON 来配置 CORS 策略[[ref]](https://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html#how-do-i-enable-cors)

**桶策略：**

```
[
    {
        "AllowedHeaders": [
            "*",
            "x-amz-*"
        ],
        "AllowedMethods": [
            "GET",
            "HEAD"
        ],
        "AllowedOrigins": [
            "*"
        ],
        "ExposeHeaders": []
    }
] 
```

在服务器端/客户端（**JQUERY Ajax**）

```
$.ajax({
    type: "GET", 
    url: "https://myBucket/myObject",
});​​​​​​​​​​​​​​​ 
```

试试吧！，希望它有帮助！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-10T02:57:30.957

对于任何在这个问题上苦苦挣扎的人，正如其他人所说，您必须通过将这些行添加到您的 CORS 配置中来强制 S3 响应 CORS 标头：

```
<AllowedOrigin>http://*</AllowedOrigin>
<AllowedOrigin>https://*</AllowedOrigin> 
```

但是，您必须清除浏览器文件缓存，因为存储了所请求资源上的旧标头。在 Chrome 中，找到**清除浏览数据**选项，然后选择清除**文件**缓存。硬重新加载不会清除某些文件。如果您希望只清除当前站点的文件缓存，[这个答案](https://superuser.com/a/512833)解释了如何做到这一点。

这对我来说是个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-29T03:12:01.030

如果您有较大的文件需要更长的下载时间，您可能需要增加 MAX AGE 配置，或者它们可能会提前中断。媒体托管等将需要这个。我的通配符访问配置（任何域）最长为 10000 秒，这应该比任何人下载我的文件所需的安全时间长，即使在连接不良的情况下：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
<CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>HEAD</AllowedMethod>
    <MaxAgeSeconds>10000</MaxAgeSeconds>
    <AllowedHeader>*</AllowedHeader>
</CORSRule>
</CORSConfiguration> 
```

# devexpress - ASPxScheduler：如何禁用特定约会的弹出菜单？

> ID：11315874
> 
> 赞同：0
> 
> 时间：2012-07-03T17:14:41.167
> 
> 标签：devexpress

我正在使用 DevExpress v 10.2。我有一个带有 ASPxScheduler 控件实例的 ASP.NET 应用程序。我已经自定义了弹出菜单（右键单击约会后出现的菜单）-它在[http://documentation.devexpress.com/#AspNet/CustomDocument4655](http://documentation.devexpress.com/#AspNet/CustomDocument4655)中显示的方式。

问题是：我只需要为特定约会显示弹出菜单；并且根本不为其他约会显示它（变体：显示它并为其他约会禁用所有菜单项）。

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:16:43.817

尝试这个：

```
xxx_MouseUp(object sender, MouseEventArgs e)
{
    popupMenu1.ShowPopup(Control.MousePosition);
} 
```

# php - PHP preg_match_all 100 MB 文件

> ID：11315879
> 
> 赞同：0
> 
> 时间：2012-07-03T17:14:55.170
> 
> 标签：php, regex, file

我读过“preg_match_all”不是为解析大文件而设计的，但我需要这样做。我增加了：

```
pcre.backtrack_limit=1000000000
pcre.recursion_limit=1000000000 
```

我的 PHP memory_limit 设置为 5000M，脚本仍然在 0.2 秒内结束，没有任何错误或异常...

唯一的解决方案是将100M文件分成100个1M小文件吗？

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:48:06.287

考虑使用更适合处理大量数据的命令行工具。

grep、sed、awk 或它们的某种组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T17:45:18.223

根据您的[代码](https://gist.github.com/3041137)，我建议您这样做：

1.  将变量设置`$data`为空字符串

2.  将变量设置`$work`为空字符串；读取数据块并将此字符串附加到`$data`

3.  使用正则表达式`#^(.*?)(<tr>\n(?!.*<tr>\n).*)$#`拆分`$data`为`$work`和`$data`

4.  查找所有匹配项`$work`

5.  在数据可用时返回第 2 点

6.  查找所有匹配项`$data`

# c# - 无法使用类库中的 Ektron Framework API

> ID：11315880
> 
> 赞同：0
> 
> 时间：2012-07-03T17:14:57.273
> 
> 标签：c#, visual-studio-2010, ektron

使用`Ektron v8.02`，我创建了一个使用命名空间的简单类库`Ektron.Cms.Framework.Core.Content`。

我在解决方案中添加了一个控制台应用程序来帮助测试；在控制台应用程序中，我添加了对原始类库的项目引用和一个带有指向我们的 dev Ektron 数据库`App.Config`的适当连接字符串的文件。`Ektron.DbConnection`

简而言之，这是有问题的代码：

**用于测试的控制台应用程序**

```
static void Main(string[] args) {
    MyClass instance = new MyClass();
} 
```

**类库**

```
public class MyClass {
    private Ektron.Cms.Framework.Core.Content.Content cAPI;

    public MyClass() {
        //** exception here **
        cAPI = new Ektron.Cms.Framework.Core.Content.Content();
    }
} 
```

`MyClass`当我尝试创建 Content API 的新实例时，构造函数中会引发异常。例外是一个`IncompatibleTypesException`说：

> 在解析 Ektron.Cms.IRequestInfoProvider 的依赖关系时，提供的类型与 Ektron.Cms.IRequestInfoProvider 不兼容。

Ektron 开发论坛有几个线程[在这里](http://dev.ektron.com/forum.aspx?g=posts&t=34932)和[这里](http://dev.ektron.com/forum.aspx?g=posts&t=35933)提到这个确切的问题，但没有发布任何解决方案。希望有使用类库中框架 API 经验的人能够认识到这种情况并在我不得不致电 Ektron 支持之前提供一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:01:27.500

我认为你会给自己很多长时间的编码时间和参考/gac 的噩梦，试图从控制台应用程序引用 Web 库。我确信这是可以做到的，而且我自己也取得了有限的成功。但是，当尝试从控制台应用程序调用 Ektron API 时，我强烈建议创建一些托管在您的 ektron 应用程序中的 Web 服务，这些服务将使用 API 完成繁重的工作，然后让您的控制台应用程序调用 Web 服务。通过这样做，您可以开始处理请求并执行各种自动化过程。

此外，当您升级（8.6 有一个很酷的新编辑器）时，这不会导致任何依赖问题并且需要重新编译。他们的网络服务是向后兼容的。

没有代码..但希望这会有所帮助，如果我能澄清一下，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:52:45.107

这并不难。我创建了一个类似于您正在谈论的课程。我的目标实际上是使用这个类库来导入我从内部 CMS 中获得的内容。

但`Ektron.Cms.Framework.Core.Content.Content()`我没有使用，而是使用`Ektron.Cms.API.Content.Content()`.

也许你可以试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T02:50:50.103

这在 8.02 版中不可用，但较新的版本（我认为是 v8.6+）有一个备用的“3 层”dll 集。这些“3 层”dll 使用 WCF 与工作区/数据库进行通信，因此它们不依赖于 HttpContext 等 Web 内容。您可以在安装目录中找到文件；路径将类似于： `C:\Program Files (x86)\Ektron\CMS400v86\startersites\3TierMin\Content`

在编写控制台应用程序以执行诸如导入或修改内容之类的操作时，我使用这些 dll 取得了巨大成功。您需要携带一些额外的配置文件，我认为您需要一个指向“中间层”的 URL 的 AppSetting - 具有您的工作区的 Ektron 站点。

# html - 如何使用 CSS 和 HTML 并排对齐图像和广告

> ID：11315887
> 
> 赞同：0
> 
> 时间：2012-07-03T17:15:12.997
> 
> 标签：html, css

HTML 代码：

```
<div class="goleft"> AD 300x250 size </div>

        <div class="itemImageBlock goleft">
              <span class="itemImage">
              <img src="/media/k2/items/cache/c3997142576e6f4d163ead570965368d_S.jpg" alt="Pranab Mukherjee" style="width:300px; height:250px;" />
          </span>

        </div> 
```

CSS：

```
.itemImageBlock { margin:0 0 16px; padding:0; text-align: center; clear: both; }
span.itemImage { display:block; text-align:center; margin:0 0 8px 0; }
.goleft{
    float:left
} 
```

这两个街区一个接一个。我希望这些并排对齐。

请帮助我实现这一目标。

如果我更改 div 块的顺序（第一个图像下一个广告）它的工作。但我想要第一个广告和下一张图片。

图片网址：[http ://tinypic.com/r/2ih5hco/6](http://tinypic.com/r/2ih5hco/6)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:18:20.867

```
.itemImageBlock {padding:0;
    text-align:center;
}
span.itemImage {
    display:block;
    text-align:center;
    margin:0 0 8px 0;
}
.goleft{
    float:left;
} 
```

和

```
<div class="goleft"> AD 300x250 size </div>
<div class="itemImageBlock">
    <span class="itemImage">
        <img src="/media/k2/items/cache/c3997142576e6f4d163ead570965368d_S.jpg" alt="Pranab Mukherjee" style="width:300px; height:250px;" />
    </span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:22:54.520

问题似乎在`.itemImageBlock`CSS 声明中。删除`clear:both`CSS，DIV 将对齐。见：http: [//jsfiddle.net/pe6s5/](http://jsfiddle.net/pe6s5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:26:06.970

只需在你的 css 代码中添加一个额外的类，让它变得整洁......

CSS

```
.goleft{
    float:left
} 
```

并将此类添加到您的 DOM -

```
 <div class="itemImageBlock goleft">
              <span class="itemImage">

              </span>
         </div>
         <!-- Advertisement(300x250) -->
          <div class = "goleft">
          </div> 
```

# linux - 如何在bash中使用多行排序？

> ID：11315889
> 
> 赞同：9
> 
> 时间：2012-07-03T17:15:18.993
> 
> 标签：linux, bash, sorting

我正在尝试对名称列表进行排序，然后是另一个字符串，例如：

```
John Doe
AVAIL

Sara Doe
CALL

Jim Doe
AVAIL 
```

我正在尝试按名称对它们进行排序，但似乎无法通过排序来解决。有人可以提供一些指导吗？

我的最终输出如下所示：

```
Jim Doe
AVAIL

John Doe
AVAIL

Sara Doe
CALL 
```

非常感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T17:31:22.530

可能远非最佳，但

```
sed -r ':r;/(^|\n)$/!{$!{N;br}};s/\n/\v/g' names | sort | sed 's/\v/\n/g' 
```

似乎完成了这项工作（`names`是带有记录的文件）。这允许任意长度的记录，而不仅仅是 2 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:33:34.027

不确定它是否适合您，但有一些限制，这里有一条线可以满足您的需要。

```
awk '{if ((NR%2-1)==0) {line=sprintf("%-30s",$0)} else {print line ":" $0}}' | \
  sort --key=1,30 | tr ':' '\n' 
```

假设：记录之间没有空行，名称总是少于30个字符，`:`文本中没有使用。

如果假设不同，我相信您可以弄清楚如何更改它。

简而言之，它使用“：”作为分隔符合并两行，将第一行填充到 30 个字符并使用前 30 个字符进行排序。然后它断线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:39:41.533

不是直接的，但你可以使用一些像这样的中间形式。我假设您的价值（CALL、AVAIL 等）是有限的。否则您需要使用更复杂的模式，但可以做到。实际上任何事情都可以在 bash 中完成 :-)

```
cat sorting | sed -n '1h; 1!H; ${ g; s/\nCALL\n/::CALL::/g; s/\nAVAIL\n/::AVAIL::/g ; s/\nAVAIL/::AVAIL::/g p }' | sort | sed "s/::/\n/g"
Jim Doe
AVAIL

John Doe
AVAIL

Sara Doe
CALL 
```

# c - 在 shell 中调用 C 程序

> ID：11315890
> 
> 赞同：2
> 
> 时间：2012-07-03T17:15:20.243
> 
> 标签：c

在[K&R书中](http://en.wikipedia.org/wiki/The_C_Programming_Language)有一个问题如下：

> 编写一个程序，将大写转换为小写，反之亦然，具体取决于调用它的名称？

在给出的解决方案中，它说当使用 name 调用程序时`lower`，程序转换`lower`为`upper`. 在解决方案`argv[0]`中是比较的，`"lower"`但在 Linux 上`argv[0]`会是`"./lower"`而不是`"lower"`。

有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:23:14.700

考虑这个测试代码：

```
#include <stdio.h>
int main(int argc, char** argv) {
  printf("ARGV[0] = %s\n", argv[0]);
} 
```

如果我将它编译为“test_argv”并运行它，我会得到我输入的任何内容来运行程序：

```
% ./test_argv
ARGV[0] = ./test_argv
% test_argv
ARGV[0] = test_argv
% /tmp/test_argv
ARGV[0] = /tmp/test_argv 
```

因此，您想要测试字符串，例如，针对正则表达式或子字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:27:34.977

Shell 如何执行你的程序？（下面很简单的解释）

```
shell()
{
  loader("Path name/Filename of your program", argv[0], argv[1]...for your program);
} 
```

这意味着加载器的所有这些参数都是由 shell 生成的，然后加载器被调用，默认情况下 argv[0] 与程序的路径名/文件名相同。

现在什么时候说./a.out ..它意味着你的程序的绝对路径名是./a.out。（当前目录中的文件a.out）

我们可以省略./吗？答案是肯定的，如果环境变量 PATH 具有 . 作为它的一个组成部分说第一个组成部分。

您可以通过在 shell 提示符中键入 echo $PATH 来查看 PATH 变量的内容。（将看到分隔的路径列表）。

如果 。不在那里，您可以通过在 shell 提示符下键入 export PATH=.:$PATH 来添加它。

在此之后，您可以通过键入 a.out 从当前目录运行您的代码，而不必键入 ./a.out。

现在我认为这很清楚为什么 argv[0] 成为您正在执行的文件的名称？

**现在我们可以为 argv[0] 设置一个不同的名称而不是文件名**吗？

答案是肯定的，然后您需要自己调用加载程序，即编写一小段行为类似于 shell 的代码。

您可以浏览互联网/手册页以获取**execve**系列函数，这实际上是这里提到的加载程序。

# knockout.js - 通过敲除显示视图模型中的日期

> ID：11315892
> 
> 赞同：0
> 
> 时间：2012-07-03T17:15:30.180
> 
> 标签：knockout.js

我希望能够根据下拉列表的选择显示日期。下拉列表从 MVC3 中的 ViewModel 填充，并在页面加载时序列化为 Json。

我尝试使用订阅，更改等无济于事。当您在下面的 jsfiddle 链接中选择一个单位时，事件日期应该作为默认值填充到右侧的文本框中——用户仍然可以更改它。我们在 unitDropDown 可观察数组中有这些信息。正如我在其他示例中看到的那样，我可能很密集，对我来说，它只是不会点击可以这么说。

我猜我必须在 addEvent observable 中添加一些事件？然后还以某种方式设置订阅下拉列表？

```
addEvent: function() {
    this.phaseUnits.push(new PhaseUnitModel('0', '1', '0', 'N', '')); // defaults
} 
```

这是 jsFiddle 中的工作示例：http: [//jsfiddle.net/robcube/eFAmu/](http://jsfiddle.net/robcube/eFAmu/)

**更新（修复）：**

```
function PhaseUnitModel(Id, PhaseDetailId, UnitId, eventType, eventDate, deleteFlag) {
        var self = this;
        self.Id = ko.observable(Id);
        self.PhaseDetailId = ko.observable(PhaseDetailId);
        self.UnitId = ko.observable(UnitId);
        self.eventType = ko.observable(eventType);
        self.eventDate = ko.observable(eventDate);
        self.deleteFlag = ko.observable(deleteFlag);
        self.markForDeleteText = ko.observable();

        self.UnitId.subscribe(function(newValue) {
            for (i in unitDropDown) {
                if (unitDropDown[i].Id == newValue)
                    self.eventDate(unitDropDown[i].OnlineDate);
            }
        }.bind(this));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:48:12.840

这是你想要的？

```
function PhaseUnitModel(Id, PhaseDetailId, UnitId, eventType, eventDate, deleteFlag) {
    this.Id = ko.observable(Id);
    this.PhaseDetailId = ko.observable(PhaseDetailId);
    this.UnitId = ko.observable(UnitId);
    this.eventType = ko.observable(eventType);
    this.eventDate = ko.observable(eventDate);
    this.deleteFlag = ko.observable(deleteFlag);
    this.markForDeleteText = ko.observable();

    this.UnitId.subscribe(function(newValue) {
        for (i in unitDropDown) {
            if (unitDropDown[i].Id == newValue)
                this.eventDate(unitDropDown[i].OnlineDate);
        }
    }.bind(this));
} 
```

# java - Spring：包含 bean 时发生 NullPointerException

> ID：11315901
> 
> 赞同：3
> 
> 时间：2012-07-03T17:15:48.373
> 
> 标签：java, spring

我有一个 bean mongoService 看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <context:property-placeholder location="file:///storage//local.properties"/>
    <bean id="mongoService" class="com.business.persist.MongoService">
    <constructor-arg value="${host}"/>
    <constructor-arg value="${port}"/>
    <constructor-arg value="${database}"/>
    </bean>
</beans> 
```

*   我需要将这个 bean 包含在一个单独的项目中，所以我为这个项目创建了一个 jar 并添加为 maven 依赖项，看起来像

    ```
     <dependency>
            <groupId>com.project</groupId>
            <artifactId>business</artifactId>
            <version>master-SNAPSHOT</version>
        </dependency> 
    ```

*   现在在我需要注入此字段的文件中，我执行以下操作

> ```
> public class DocumentSaver implements IDocumentSaver {
>     @Resource
>     private MongoService mongoService;
> 
>     public boolean addDocument(Document doc) {
>        // do other things
> 
>        // add document to mongo   
>        mongoService.putDocument(document);
> 
>        return true;
>     }
> } 
> ```

然后我按如下方式运行测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/com/wireup.xml")
public class DocumentSaverTest extends DocumentCase {

    @Test
    public void loadAndSave() {
             DocumentSaver saver = new DocumentSaver();
             Document doc = new Document();
             // fill the doc
             saver.addDocument(doc);
        }
} 
```

我看到`NullPointerException`当我像这样运行它时`saver.addDocument(doc);`

请告诉我我做错了什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:24:57.397

您不应该使用 NEW 运算符创建“DocumentSaver”，如下所示，从 Spring Application Context 中获取。

DocumentSaver 保护程序 = new DocumentSaver();

如果你使用 NEW 操作，Spring 不会注入依赖对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:59:41.763

`DocumentSaver`应该由 Spring 管理（目前不是，因为您是通过创建它的`new`），或者编织，以便`MongoService`注入依赖项，例如。有关将依赖项注入使用创建的对象的更多详细信息，请参阅[此](https://stackoverflow.com/questions/10997092/autowiring-in-spring-bean-component-created-with-new-keyword/10998044#10998044)`new`答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:25:15.853

我的直觉是您的 DocumentSaver 不是由 spring 管理的，因此 MongoService 不是自动装配的。您可以在 spring xml 文件中将 DocumentSaver 定义为 spring bean + 将 MongoService 引用连接到其中，或者对其进行注释（例如作为@Repository 或@Component），然后在 xml 文件中使用组件扫描。

其次，您似乎正在通过 new 运算符创建 DocumentSaver 对象。bean 应该是从 spring 上下文中获取的，以便自动装配 MongoService。或者，如果您不希望 DocumentSaver 成为 Spring bean，则另一种选择是在 DocumentSaver 中使用 @Configurable ，它利用了方面编织。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:26:10.263

1.  用 注释您的 Saver `@Component`。此处的替代方法会将其声明为`Bean`XML 文件中的另一个常规。
2.  `@Autowired`你的`MongoService`；
3.  `@Autowired`你`DocumentSaver`在`saver`你的测试课上。

编辑类如下。

您的组件将是这样的：

```
@Component
public class DocumentSaver implements IDocumentSaver {

    @Autowired
    private MongoService mongoService;

    public boolean addDocument(Document doc) {
        // do other things

        // add document to mongo   
        mongoService.putDocument(document);

        return true;
    }
} 
```

你的测试是这样的：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/com/wireup.xml")
public class DocumentSaverTest extends DocumentCase {

    @Autowired
    DocumentSaver saver;

    @Test
    public void loadAndSave() {
        Document doc = new Document();
        // fill the doc
        saver.addDocument(doc);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T17:27:14.523

如果你用一个新的实例化你的 DocumentSaver，你不要把它放到 Spring 上下文中。所以 Spring 不知道，注入也没有完成。

如果你想在其中加入 MongoService，你应该让它通过 Spring 实例化。

添加您的*wireup.xml*文件：

```
<bean id="documentSaver" class="com....DocumentSaver" /> 
```

然后将此 documentSaver 注入您的测试：

```
@Autowired
private DocumentSaver documentSaver; 
```

您的命名约定不好。

您的 DocumentSaver 类似乎是一个 DAO（因为它的目的是保留一个 Document）。因此，使用@Repository 对其进行注释并将其命名为 DocumentSaverDAO。

将我的答案和 Spaeth 的答案结合起来，它将起作用并且包装得很好。

# java - android 在新窗口上播放 youtube 视频

> ID：11315907
> 
> 赞同：1
> 
> 时间：2012-07-03T17:16:09.603
> 
> 标签：java, android

如果我在 webview 上加载 www.youtube.com url 并选择任何视频，则不会触发带有播放器的新窗口。我应该在清单上为它设置一些东西吗？如果我使用标准浏览器工作！不会触发事件 shouldOverrideUrlLoading 或任何其他事件。谢谢

```
webviewA.getSettings().setJavaScriptEnabled(true);
        webviewA.getSettings().setUseWideViewPort(true);
        webviewA.getSettings().setLoadWithOverviewMode(true);
        webviewA.getSettings().setDomStorageEnabled(true);
        webviewA.getSettings().setAllowFileAccess(true);
        webviewA.getSettings().setGeolocationEnabled(true);
        webviewA.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        webviewA.getSettings().setBuiltInZoomControls(true);
        webviewA.getSettings().setSupportZoom(true);

        webviewA.getSettings().setPluginState(PluginState.ON);
        webviewA.getSettings().setAllowContentAccess(true);

        webviewA.setVerticalScrollBarEnabled(false);
        webviewA.setHorizontalScrollBarEnabled(false);
        webviewA.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

if (savedInstanceState == null){
            String Url = "www.youtube.com/my-desired_channel";
            webviewA.loadUrl(Url);
        } 
```

事件未触发，

```
 @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url){
    not fired!!
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:18:12.163

你可以使用类似的东西 -

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=abcde"))); 
```

编辑：试试这个

```
webView.setWebViewClient(new WebViewClient()
{
 public boolean shouldOverrideUrlLoading(WebView view, String url)
 {
  // YouTube video link
  if (url.startsWith("vnd.youtube:"))
  {
   int n = url.indexOf("?");
   if (n > 0)
   {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(String.format("http://www.youtube.com/v/%s", url.substring("vnd.youtube:".length(),n)));
   }
   return (true);
  }

  return (false);
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:23:05.190

很抱歉说明这一点，但您是否在清单文件中包含“INTERNET”权限？

编辑：添加代码只是为了确定

在你的清单中应该是这样的

```
<manifest ... >
<uses-permission android:name="android.permission.INTERNET" />
...
</manifest> 
```

# java - 替换一个？使用“ nothing”并再次获取原始字符串

> ID：11315908
> 
> 赞同：-4
> 
> 时间：2012-07-03T17:16:17.250
> 
> 标签：java, regex, string

这是代码，我正在尝试使用正则表达式来获取原始字符串

```
 String str = "Hai ? hello : abc ^ ";

   str = str.replaceAll("[?]+","");

   System.out.println("1"+str);

   String str2 = str.replaceAll("['']+","?");

   System.out.println("2"+str2); 
```

取回原始字符串的正则表达式应该是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:21:38.843

```
String str = "Hai ? hello : abc ^ ";
String str1 = str.replaceAll("[?]+",""); 
System.out.println("1"+str1); 
String str2 = str1.replaceAll("['']+","?"); 
System.out.println("2"+str2);
System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:09:30.633

您必须替换替换模式，因为您在第一次替换时丢失了信息

```
String str = "Hai ? hello : abc ^ ";
String str1 = str.replaceAll("?","|"); 
System.out.println("1"+str1); 
String str2 = str1.replaceAll("|","?"); 
System.out.println("2"+str2); 
```

# android - Android 中的预写日志记录有什么影响吗？

> ID：11315910
> 
> 赞同：0
> 
> 时间：2012-07-03T17:16:28.450
> 
> 标签：android, database, sqlite

在我的数据库密集型 Android 应用程序中，我们在有能力的设备 (honeycomb+) 上启用了预写日志记录，希望看到并行读取并提高我们的性能。通过 traceview 进行调试表明我们没有得到我们希望的并行读取。我通过在 SQLiteDatabase 上启用详细日志记录进行了一些调试：

```
adb shell setprop log.tag.SQLiteDatabase VERBOSE 
```

实际上，我们看到最大连接池大小固定为 1：

```
I/SQLiteDatabase(11051): db: /data/data/mobisocial.musubi/databases/MUSUBI.db, totalsize = 1, #free = 1, maxpoolsize = 1
I/SQLiteDatabase(11051): , conn # 1, mCountHolders = 0, freeBusyFlag = true 
```

有没有人幸运地在 Android 数据库中获得并行读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:36:08.803

将此添加到您的连接字符串以控制该`maxpoolsize`值。

```
Pooling=True;Max Pool Size=10; 
```

# html - tbody 宽度不会自动扩展到表格的宽度

> ID：11315913
> 
> 赞同：55
> 
> 时间：2012-07-03T17:16:39.120
> 
> 标签：html, css, html-table, reset

看看这个例子：

[http://denise.brixwork.com/showlisting/1/8297-Valley-Drive-Alpine-Meadows-Whistler-denise-brown-real-estate](http://denise.brixwork.com/showlisting/1/8297-Valley-Drive-Alpine-Meadows-Whistler-denise-brown-real-estate)

并且“规格”下的红色表格并没有成为包含它的完整宽度 - 在 Firebug 上检查时，div 不是 220 像素，而是基于内容宽度的 100 像素以上。

```
<div class="grid_4 alpha">
    <table width="100%" class="grid_4 alpha omega">
            <tr class="specrow">
            <td class="specname">type:</td>
            <td class="specvalue">House</td>
        </tr>
        <tr class="specrow">
            <td class="specname">year:</td>
            <td class="specvalue">1986</td>
        </tr>
    </table>
</div> 
```

CSS 代码如下所示：

```
#listing_specs table {
    width: 100%;
}

#listing_specs table tbody {
    display: table-row-group;
    width: 100%;
}

.specrow {
    margin:2px 0px;
    border-bottom:1px dotted #dadada;
    color: #fff;
    width: 100%;
    background-color: #A92229;
}

.specrow:hover {
    background-color:#fff;
    color:#333;
}

.specname{
    font-weight: 600;
    padding:2px 2px 2px 5px;
    width: 50%;
    white-space: nowrap;
}

.specvalue {
    font-weight:normal;
    padding:2px 5px 2px 5px;
    text-align:left;
    width: 50%;
} 
```

我知道有一个通用的 CSS 重置器，我认为这就是导致问题的原因。不幸的是，我不能直接删除对它的引用，因为此时有多个站点从同一个位置引用它，而且我不能在不仔细审查的情况下进行更改。所以我需要一种在样式表本身上覆盖它的方法。被调用的重置 CSS 是：

```
<link rel="stylesheet" type="text/css" media="all" href="http://demo.brixwork.com/master/css/reset.css" /> 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-03T17:26:24.097

你应该添加

```
display: table; 
```

在此选择器下：

```
#listing_specs table { } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-05-30T13:49:26.310

您可以使用此代码

```
tbody{
    width: 100%;
    display: table;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-03T17:22:03.663

该表继承了 display:inline;

它应该是：显示：表；

导致 display:inline 的部分是：

```
.grid_1, .grid_2, .grid_3, .grid_4, 
.grid_5, .grid_6, .grid_7, .grid_8, 
.grid_9, .grid_10, .grid_11, .grid_12, 
.grid_13, .grid_14, .grid_15, .grid_16 {
    display: inline;
    float: left;
    position: relative;
    margin-left: 10px;
    margin-right: 10px;
} 
```

# r - 处理汇总结果（模型）

> ID：11315918
> 
> 赞同：6
> 
> 时间：2012-07-03T17:16:55.907
> 
> 标签：r

我有大约 100 个模型，来自 MCMCglmm，它们的输出类似于：

```
> MC1 <- MCMCglmm(...)
> summary(MC1)

 Iterations = 20001:99991
 Thinning interval  = 10
 Sample size  = 8000 

 DIC: 10924.52 

 G-structure:  ~school

         post.mean l-95% CI u-95% CI eff.samp
school    0.1753   0.1059   0.2554     1529

 R-structure:  ~units

  post.mean l-95% CI u-95% CI eff.samp
units         1        1        1        0

 Location effects: bl ~ +bm1 + bm2 + bm3 + bm4 + bm5 + bm6 + bm7 + bm8

                   post.mean  l-95% CI  u-95% CI eff.samp  pMCMC    
(Intercept)        -7.381791 -8.105984 -6.657302     1212 <1e-04 ***
bm1                 0.062922  0.063024  0.078611     1028 <1e-04 ***
bm2                -0.015807 -0.016998 -0.019064     1732 <1e-04 ***
bm3                 0.005978  0.003845  0.000207     2124 <1e-04 ***
bm4                 0.223856  0.105453  0.342821     1999 <1e-04 ***
bm5                 0.044622 -0.394179  0.523072     1758   0.88    
bm6                 3.899881  3.672857  3.997223     2976 <1e-04 ***
bm7                 0.547813  0.341128  0.749568     2916 <1e-04 ***
bm8                 0.658511  0.541424  0.783192     2196 <1e-04 ***
--- 
```

现在我需要将截距和 bm1-bm8 的固定效果表放入数据框中（pvalue 除外——我对这些不感兴趣）。谁能帮我做到这一点，以便可以轻松地复制更多相同类型的模型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T17:24:49.340

通过检查`str(summary(MC1))`，我们看到此信息包含在`summary(MC1)$solutions`第五列中的 p 值中。因此，您可以使用

```
summary(MC1)$solutions[,-5] 
```

# php - Symfony2 表单选择复选框不起作用

> ID：11315920
> 
> 赞同：1
> 
> 时间：2012-07-03T17:17:00.967
> 
> 标签：php, forms, symfony, checkbox

我正在尝试为我的配置模块制作一些输入复选框，但选择小部件不起作用。

所以它只适用于单选按钮和菜单，而对于多个菜单和复选框我有一个错误：

> 给定“数组”、“字符串”类型的预期参数

编码：

```
$builder->add('value', 'choice', array
                    (
                        'label' => $this->item->getTitle() . ':',
                        'choices' => array('1' => 'one', '2' => 'two'),
                        'multiple' => true,
                        'expanded' => true,
                                           )
        ); 
```

这是一个例子。

**编辑：**

因此，在我的配置包中，我有很多不同类型的输入来更好地描述配置值，对于每一个，我都会呈现正确的小部件。我对所有小部件都没有任何问题，除了用于选择小部件的复选框和菜单多个，收音机和菜单工作正常。

这是表单类：

```
class ItemType extends AbstractType {

/**
 * The configuration item (one row's data)
 * @var Item
 */
private $item;

/**
 * Widget type
 * @var string
 */
private $widget;

/**
 * widget's options
 * @var array
 */
private $options = array();

/**
 * Class constructor
 * 
 * @param Item $item The configuration item (one row's data)
 * @return void
 */
public function __construct(Item $item, $widget, $options = array()) 
{
    $this->item = $item;
    $this->widget = $widget;
    $this->options = $options;
}

/**
 * Builds the form
 * 
 * @param FormBuilder $builder The form builder
 * @param array $options The options
 * @return void
 * 
 * @see Symfony\Component\Form\AbstractType::buildForm()
 */
public function buildForm(FormBuilder $builder, array $options) 
{
    $fieldOptions = array('attr' => array('class' => 'text'));

    switch($this->widget)
    {
        case 'menu':
        case 'MultipleMenu':
        case 'radio':
        case 'checkbox':
                        $choices = $this->getWidgetOptions($this->options['values'], ':');

                        if($this->widget == 'radio')
                        {
                            $fieldOptions = array('attr' => array('class' => 'configurationFormRadioButton'));
                        }

                        $builder->add('value', 'choice', array_merge(
                                                                        $fieldOptions, 
                                                                        $this->getChoiceOption($this->widget), 
                                                                        array
                                                                        (
                                                                            'label' => $this->item->getTitle() . ':',
                                                                            'choices' => $choices
                                                                        )
                                                                    )
                                    );
                        break;

        case 'text':
        case 'password':
        case 'email':
        case 'url':
        case 'number':
        case 'integer':
        case 'textarea':
                        $builder->add('value', $this->widget, array_merge($fieldOptions, array('label' => $this->item->getTitle() . ':')));
                        break;

        case 'date':
                        $builder->add('value', $this->widget, array_merge(
                                                                            array(
                                                                                    'attr' => array('class' => 'date'),
                                                                                    'label' => $this->item->getTitle() . ':',
                                                                                    'input' => 'string',
                                                                                    'widget' => 'single_text'
                                                                                ),
                                                                            $this->getWidgetOptions($this->options['options'], '=')
                                                                         )
                                    );
                        break;

        case 'datetime':
                            $builder->add('value', $this->widget, array_merge( 
                                                                                array(
                                                                                        'attr' => array('class' => 'date'),
                                                                                        'label' => $this->item->getTitle() . ':',
                                                                                        'input' => 'string',
                                                                                        'date_widget' => 'choice',
                                                                                        'time_widget' => 'choice'
                                                                                    ),
                                                                                $this->getWidgetOptions($this->options['options'], '=')
                                                                            )
                                        );
                            break;

        case 'time':
                            $builder->add('value', $this->widget, array_merge(
                                                                                array(
                                                                                        'attr' => array('class' => 'date'),
                                                                                        'label' => $this->item->getTitle() . ':',
                                                                                        'input' => 'string',
                                                                                        'widget' => 'choice'
                                                                                    ),
                                                                                $this->getWidgetOptions($this->options['options'], '=')
                                                                            )
                                        );
                            break;

        case 'datepicker':
                            $builder->add('value', 'text', array_merge(
                                                                        array(
                                                                                'attr' => array('class' => 'datepicker text'),
                                                                                'label' => $this->item->getTitle() . ':'
                                                                            ),
                                                                        $this->getWidgetOptions($this->options['options'], '=')
                                                                     )
                                        );
                            break;
    }

    $builder->setData($this->item);
}

/**
 * Returns the name of this type
 * @return string
 */
public function getName() 
{
    return 'configurationItemForm';
}

/**
 * Set widget type for field
 * @return array
 */
private function getChoiceOption($inputType)
{
    switch($inputType)
    {
        case 'menu':
                    return array('multiple' => false, 'expanded' => false);
                    break;

        case 'MultipleMenu':
                    return array('multiple' => true, 'expanded' => false);
                    break;

        case 'radio':
                    return array('multiple' => false, 'expanded' => true);
                    break;

        case 'checkbox':
                    return array('multiple' => true, 'expanded' => true);
                    break;
    }
}

/**
 * Get widget options from database
 * @return array
 */
private function getWidgetOptions($from, $explodeChar)
{
    $options = array();

    if($from != '')
    {
        $pairs = explode('|', $from);

        foreach($pairs as $pair)
        {
            $values[] = explode($explodeChar, $pair);
            foreach($values as $value)
            {   
                $options[$value[0]] = $value[1];
            }
        }
    }
    return $options;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:20:45.227

您在这里的代码看起来不错。问题似乎是您的对象没有返回映射到选择字段的属性的数组值。

例如，如果您的对象是一个用户并且有一个角色`$user->getRoles()`数组，则应该返回一个数组，但如果它返回一个字符串，那么如果您尝试将其映射到选择字段，它将引发错误。

您应该考虑使用表单事件来使您的表单生成更清晰，并且在这种情况下更易于调试。您可以在此处查看动态生成表单的示例[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

# c# - 表标准化

> ID：11315924
> 
> 赞同：0
> 
> 时间：2012-07-03T17:17:18.213
> 
> 标签：c#, asp.net, vb.net, oracle, normalization

我正在处理时间表应用程序并且对规范化有疑问。

我在选项 I 中链接了三个表，而在选项 II 中没有 Group 和 SubGroup 表，只有一个 Activity 表。

我想知道根据以下布局哪个选项更好。

![在此处输入图像描述](../Images/6381a1b1cb2f4f436de32da89cbefed1.png)

![在此处输入图像描述](../Images/362284e88a870a40e5ec664caafcfac6.png)

**添加 - 新选项**

![在此处输入图像描述](../Images/64ceed8ee5c1ddab640e1a1f45a9402c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:50:25.147

我会选择一张`GROUP`桌子和一张`ACTIVITY`桌子的解决方案：

```
GROUP_ID (PK)   PARENT_GROUP_ID (FK)   CODE          NAME
--------------- ---------------------- ------------- ------------
1               (null)                 4             IT ACTIVITIES
2               (null)                 5             ADMINISTRATION
3               (null)                 6             FINANCE
4               (null)                 7             HR
5               1                      4.1           IT ADMIN
6               1                      4.2           IT NETWORK
7               2                      5.1           MEETING

ACTIVITY_ID (PK)   GROUP_ID (FK)  CODE     NAME
------------------ -------------- -------- -----------
1                  5              4.1.1    IT PROC
2                  5              4.1.2    HELPDESK
3                  6              4.2.1    TECHNICAL SUPPORT
(etc) 
```

每个表都将使用一个整数代理键（运行号）作为主键，因此如果您必须更改组或活动的代码，则不会破坏参照完整性。列上的外键`PARENT_GROUP_ID`指回相同的表和列`GROUP_ID`。

如果有必要，使用这样的设置可以*相对*容易地在组层次结构中添加更多级别（并且经理总是想要更详细的报告:-)）。我说相对容易，因为您可能需要更新很多组和活动代码。但是您不必更改（例如）所有引用特定活动的时间表，因为它们将引用整数代理键。

引入兄弟节点也是如此。如果您（例如）需要在 4.2 和 4.3 之间插入一个子组，这不会太困难。只需将*当前*4.3 组的代码更新为 4.4，然后使用代码 4.3 插入新组。

此外，如果需要的话，这使得可以在组树中的任何位置进行活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:20:39.997

当然，让子组引用该组会更好吗？那么活动只是指子组？

# jsp - 如何测试字符串是否包含EL中的给定值？

> ID：11315926
> 
> 赞同：24
> 
> 时间：2012-07-03T17:17:32.633
> 
> 标签：jsp, jstl, el

我有一个字符串列表，并将其设置为会话：

```
 session.setAttribute("datas", result.getBody().getDatas()); 
```

然后我想检查一个 JSP，例如，如果 datas 属性中不包含单词“apple”。如果这不包含，则打印一条不包含的消息。最初我试图做这样的事情：

```
 <c:forEach items="${datas}" var="data">
      <c:if test="${data!='apple'}">
          <p> Doesn't contained</p>
      </c:if>
   <c:for> 
```

但是上述代码，如果会话包含以下值：

苹果香蕉柠檬

打印两次“不包含”消息。我知道这是正常的，但我该如何对待它才能做出我想要的？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-03T17:20:52.323

**精确**不等式的`!=`检验。您需要改用or函数。**[`fn:contains()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/contains.fn.html)[`fn:containsIgnoreCase()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/containsIgnoreCase.fn.html)**

 **```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%> 
```

...

```
<c:forEach items="${datas}" var="data">
    <c:if test="${not fn:containsIgnoreCase(data, 'apple')}">
        <p>Doesn't contain 'apple'</p>
    </c:if>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T22:36:20.617

您需要我们**fn:toLowerCase()**：

```
<c:forEach items="${datas}" var="data">
    <c:if test="${fn:toLowerCase(data) ne 'apple'}">
        <p>Doesn't contain</p>
    </c:if>
</c:forEach> 
```

使用**fn:containsIgnoreCase()**将检查部分匹配（给定字符串中是否存在子字符串）。所以如果你的数据是 ["Pineapple", "Banana", "Lemon"] 例如你也会得到一个匹配。我假设你只想匹配 'apple' 作为一个完整的字符串。**

# ruby-on-rails-3 - Rails 排序大小写

> ID：11315929
> 
> 赞同：0
> 
> 时间：2012-07-03T17:17:48.690
> 
> 标签：ruby-on-rails-3, search, sorting

我对rails所做的排序有问题，似乎大写字母组合在一起，然后小写字母组合在一起。而且我同意数据库中的数据应该是相同的，但是你不能帮助用户输入。

我的搜索控制器

```
def accounts
    @accounts ||= Account.search(params[:search]).order(sort_column + " " + sort_direction).paginate(:per_page => 100, :page => params[:page])
  end
  helper_method :accounts

  def account
    @account ||= params[:id] ? Account.find(params[:id]) : Account.new(params[:account])
  end
  helper_method :account

  def sort_column
    Account.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end 
```

在我的模型中，我有

```
def self.search(search)
    if search
      where('name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end 
```

现在这完美无缺，但它显示 A B C a b c

它应该是 A a B b C c

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:42:23.577

对订单的调用只是创建对您的数据库的“ORDER BY”调用。查看您的日志以验证这一点。如果您想要不同的顺序，则需要调整数据库对结果排序的方式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:02:11.013

如果你使用

> where('name ILIKE ?', "%#{search}%")

而是在

> 像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T11:26:01.627

我喜欢做的方式就像

```
result = Users.find(:all, :order => "LOWER(#{params[:sort]} #{params[:direction]})") 
```

# php - 如何将eregi转换为preg_match

> ID：11315932
> 
> 赞同：0
> 
> 时间：2012-07-03T17:18:08.260
> 
> 标签：php, preg-match, eregi

如何将其转换为 preg_match？

```
$urlregex = "(https?|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&;%$-]+)*@)*((?:(25[0-5]|2[0-4]\d|[01]\d{2}|[1-9]\d|[1-9])\.){3}(25[0-5]|2[0-4]\d|[01]\d{2}|[1-9]\d|[1-9]|0)|localhost|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:\d+)*(($|[a-zA-Z0-9.,?'+\\&;%\$#=~_-]+))*";

if (!eregi($urlregex, $_POST['url'])) {
    $error = true;
    $res = array(
            'response' => 'error',
            'message' => 'The URL you have entered is invalid.'
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:26:04.083

更好地使用[内置 URL 验证](http://php.net/manual/filter.filters.validate.php)。

```
if (filter_var(urldecode($_POST['url']), FILTER_VALIDATE_URL) == FALSE) {
    $error = true;
    $res   = array(
        'response' => 'error',
        'message'  => 'The URL you have entered is invalid.'
    );
} 
```

# ruby-on-rails - 尝试部署我的第一个 rails 应用程序

> ID：11315938
> 
> 赞同：0
> 
> 时间：2012-07-03T17:18:37.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, vps, mediatemple

我正在尝试将我的第一个 rails 应用程序部署到我的 mediatemple (dv) VPS 服务器。我正在使用乘客，我已经安装了它，在我的服务器上创建了一个项目，将文件从我的本地项目复制到我的服务器，创建了数据库并运行 rake db:migrate 和 rake db:seed。

当我 ping 我的 url 时，我得到一个内部服务器错误。

这是我的日志文件中的一个片段。在部署我的第一个 Rails 应用程序时，我们将不胜感激。

```
*** Exception PhusionPassenger::InvalidPath in spawn manager (No such file or directory - /var/www/vhost) (process 13560, thread #<Thread:0x000000103890e0>):
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/utils.rb:60:in `rescue in canonicalize_path'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/utils.rb:57:in `canonicalize_path'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/classic_rails/application_spawner.rb:120:in `initialize'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:201:in `new'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:201:in `block in spawn_rails_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:215:in `call'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:215:in `block (2 levels) in spawn_rails_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:214:in `block in spawn_rails_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
    from <internal:prelude>:10:in `synchronize'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/helper-scripts/passenger-spawn-server:99:in `<main>'
[ pid=13495 thr=47652788213792 file=ext/apache2/Hooks.cpp:860 time=2012-07-03 10:11:46.536 ]: Unexpected error in mod_passenger: Cannot spawn application '/var/www/vhost/tomstestsite.us/PersonalTrainingKT': The spawn server has exited unexpectedly.
  Backtrace:
     in 'virtual Passenger::SessionPtr Passenger::ApplicationPool::Client::get(const Passenger::PoolOptions&)' (Client.h:742)
     in 'Passenger::SessionPtr Hooks::getSession(const Passenger::PoolOptions&)' (Hooks.cpp:292)
     in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:561) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:55:20.687

```
(No such file or directory - /var/www/vhost) (process 13560, thread #<Thread:0x000000103890e0>): 
```

表示您配置错误。

# c++ - 基类构造函数不会调用派生类版本的虚方法

> ID：11315939
> 
> 赞同：0
> 
> 时间：2012-07-03T17:18:38.960
> 
> 标签：c++, constructor, polymorphism

> **可能重复：**
> [从基类构造函数调用派生类的虚函数？](https://stackoverflow.com/questions/6561429/calling-virtual-function-of-derived-class-from-base-class-constructor)

我有以下文件（请原谅拼写错误，我从内存中快速重写代码）

```
BaseReader(){
    openFile();
}

void BaseReader::openFile(){
    //logic to open file
} 
```

打开的文件在 .h 中被声明为虚拟公共方法（它受到保护，但我在试图找出问题所在时将其切换为公共方法）。SortReader 定义为：

```
class SortReader: public BaseReader{
    public:
            SortReader();
            void openFile();
    }; 
```

使用以下代码：

```
SortReader::SortReader(): BaseReader(){}

SortReader::openFile(){
    sortFile();
    BaseReader::openFile();
} 
```

当我尝试构造一个 SortReader 对象时，永远不会调用 sortFile 方法。我可以在调试器中遍历它并观察 SortReader 调用 BaseReader 构造函数 BaseReader 构造函数调用 openFile，后者调用 openFile 的 BaseReader 版本。我希望它调用 SortReader 的打开文件的实现。我需要做什么才能发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:22:40.043

你不能。在构造函数完成之前，对象还没有完全构造。一般来说，`virtual`从构造函数调用方法是个坏主意。

您可以将逻辑委托给单独的非`virtual`方法：

```
SortReader::openFile(){
    sortFileInternal();     //not virtual
                            //defined in SortReader
    BaseReader::openFile();
}

SortReader::sortFile()      //the virtual method
{
    sortFileInternal();
} 
```

# oauth - Shopify oAuth 实施安全性

> ID：11315944
> 
> 赞同：0
> 
> 时间：2012-07-03T17:18:56.270
> 
> 标签：oauth, shopify

因此，Egor 公开了任何人如何使用 oAuth 轻松破解 oAuth 实施不佳的服务。

[http://homakov.blogspot.ca/2012/07/saferweb-most-common-oauth2.html](http://homakov.blogspot.ca/2012/07/saferweb-most-common-oauth2.html)

Shopify 是否意识到这一点，并且 Shopify 是否可以声明他们对 oAuth 的使用不受此问题的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:18:01.073

您可以在 Provider Authentication 页面上登录后检查您被重定向到的 URL。如果它有一个`state`带有一些随机值的参数，它们可能不会受到影响。如果他们错过了它，他们可能会受到影响。你可以虽然不确定...

# api - “性别”值中的“U”是什么意思？

> ID：11315946
> 
> 赞同：1
> 
> 时间：2012-07-03T17:18:58.050
> 
> 标签：api, facebook-graph-api, facebook-insights

我在 page_fans_gender_age (/insights/page_fans_gender_age/lifetime) 状态中发现“性别”值为 M、F 和 U。U 代表什么？

这可能是未定义的或未知的。刚在注册页面上看到只有男性和女性，这是必填项。如果这个未知，FB如何定义这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-08T15:23:09.687

它是“服装”。

*Facebook 改变了它的选项，让用户可以在两个 m/f 框之外自定义他们的性别*，并添加了服装性别。

我从这个[链接中得到了答案](http://www.goodasyou.org/good_as_you/2014/02/mf-___-facebook-allows-users-to-customize-gender.html)

# php - 使用浏览器提示下载文件

> ID：11315951
> 
> 赞同：11
> 
> 时间：2012-07-03T17:19:12.220
> 
> 标签：php, mysql, browser, download, prompt

我有一个 php/mysql 站点，我试图在其中下载逗号分隔文件 (CSV)。我创建的 csv 文件包含逗号分隔的数据（姓名、地址、城市、州）。我创建了 csv 文件，并将其放在站点的 /downloads 目录中。到目前为止，一切都很好。我一直在网上找，我最常看到的触发浏览器下载提示的代码是：

```
$path = $_SERVER['DOCUMENT_ROOT'];
$exportfile = "emailclientaddresses.csv";
$fullpath = "downloads/" . $exportfile;
header("Content-type: text/plain");
header("Content-Length: ".filesize($exportfile));
header("Content-Disposition: attachment; filename=" . $fullpath); 
```

$exportfile 是我的代码创建的 csv 文件。没关系。这是做什么的：

1.  $fullpath 以一种非常奇怪的格式显示在浏览器下载提示中：download_emailclientaddresses.csv
2.  下载时，会下载当前网页或 csv 文件和当前网页的组合。

好的，我已经尝试了很多东西，但没有任何效果。因此，如果有人可以帮助我，我将不胜感激。谢谢你。

埃德科恩

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-03T17:23:05.900

[PHP 文档](http://php.net/manual/en/function.readfile.php)提供了一个很好的示例：

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

**编辑** *（回应评论，解释）*

```
header('Content-Description: File Transfer'); 
```

不在浏览器中显示，而是传输文件。

```
header('Content-Type: application/octet-stream');
header('Content-Transfer-Encoding: binary'); 
```

文件是二进制文件。
浏览器通常会下载二进制文件，除非它们可以显示它们。

```
header('Content-Disposition: attachment; filename='.basename($file)); 
```

使下载对话框显示正确的文件名。
注意：您可以使用任何文件名。

```
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public'); 
```

文件不应被浏览器缓存。
在动态内容的情况下，缓存可能会导致问题。

```
header('Content-Length: ' . filesize($file)); 
```

将正确的文件大小发送给浏览器，
否则浏览器无法估计传输时间。

```
ob_clean();
flush(); 
```

确保在下载开始之前将标头发送到浏览器。

```
readfile($file); 
```

将文件发送到浏览器。

```
exit; 
```

完毕 ：）

# c# - 更易读的空引用检查方式

> ID：11315954
> 
> 赞同：3
> 
> 时间：2012-07-03T17:19:17.487
> 
> 标签：c#, asp.net-mvc, code-readability, human-readable

在我编写的许多应用程序中，我发现自己为 DBML 对象的子类分配了一个默认值。这是我必须这样做的当前方式的示例：

```
var viewModel = new RandomViewModel
{
    ContactName = (Order.Customer != null ? Order.Customer.ContactName : "Unknown"),
    Date = Order.OrderDate,
    Shipper = (Order.Shipper != null ? Order.Shipper.CompanyName : "Fedex"),
    ShipCity = Order.ShipCity,
    ShipRegion = Order.ShipRegion,
    FirstCategory = (Order.OrderDetails.First().Product.Category != null
        ? Order.OrderDetails.First().Product.Category.CategoryName
        : "DefaultCategory",
    ItemCount = Order.OrderDetails.Count
}; 
```

理想情况下，它是最易读的：

```
var viewModel = new RandomViewModel
{
    ContactName = Order.Customer.ContactName ?? "Unknown",
    Date = Order.OrderDate,
    Shipper = Order.Shipper.CompanyName ?? "Fedex",
    ShipCity = Order.ShipCity,
    ShipRegion = Order.ShipRegion,
    FirstCategory =
        Order.OrderDetails.First().Product.Category.CategoryName
        ?? "DefaultCategory",
    ItemCount = Order.OrderDetails.Count
}; 
```

但是对于任何为空的外键对象，都会出现 NullReferenceException。我不认为 null 合并在这里可用，但是有没有其他简洁的方法来完成这个非常频繁的任务？也许带有类/方法扩展，甚至是 VS 宏？

我在这个例子中使用了 Northwind 数据库：

![北风数据库](../Images/bb86254c73a9e785dd1778788856b1a2.png)

接受任何和所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:40:39.057

这是一种可能的方法。声明`partial class Order`，具有如下属性：

```
string CustomerNameOrDefault { get { return Customer != null ? Customer.ContactName : "Unknown"; } } 
```

然后你的代码变成：

```
var viewModel = new RandomViewModel
{
    ContactName = Order.CustomerNameOrDefault,
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:22:04.143

> 接受任何和所有建议。

我个人使用[AutoMapper](http://automapper.org/)在我的域模型和视图模型之间进行映射。您的代码现在可以变成：

```
RandomViewModel viewModel = Mapper.Map<Order, RandomViewModel>(Order); 
```

# javascript - 未捕获的类型错误：无法读取未定义的属性“值”（JavaScript）

> ID：11315955
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:19:24.670
> 
> 标签：javascript, html, math, calculator, typeerror

所以我正在做一个项目，我们需要在 JavaScript 中使用四种不同的计算器：贷款期限、贷款限定符、贷款还款和贷款金额。我在这些方面遇到了很多麻烦。截至目前，我的前两个工作正常（贷款期限和贷款资格）。其他两个根本不做任何事情，即使我没有触及原始网站上的代码（这个项目是一个网站重新设计）。我唯一能用 Chrome Dev Console 和 Notepad++ 捕捉到的是：

> 未捕获的类型错误：无法读取未定义的属性“值”

有人可以向我解释这是什么意思吗？我在 JavaScript 方面不是很有经验，所以如果有人能为我纠正它，我也会非常非常感激！（我花了几个小时试图解决这个问题，但似乎无法让它工作。如果我了解页面的工作原理，它需要 JavaScript 文件，其中包含计算器的内容，以运行所有计算器.

任何帮助是极大的赞赏。谢谢你。

[HTML 中的整个页面](http://pastebin.com/gBfn7yMa)

[计算器.js 文件](http://pastebin.com/5h4fpuxW)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T07:21:06.220

就我而言

```
document.frms.service_id1.options.add(opt1); 
```

表单名称是 frms 但我当前的表单名称是 enquiryfrm
我输入了这个表单名称并且每个人都认为没问题
检查所有更多的变量名称或表单名称

```
document.enquiryfrm.service_id1.options.add(opt1); 
```

我解决了我的问题，感谢上帝！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:25:57.203

这意味着该变量`value`尚未定义并且您正在使用它。

确保您已定义`value`.

如果您告诉我们它在哪个行号上，那将非常有帮助。

控制台将`calculator.js:xx`在错误旁边显示类似`xx`行号的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:29:14.450

这实际上意味着您要读取`value`从不是对象或*null*的对象调用的属性！

您可以使用[`console.log`](https://developer.mozilla.org/en/DOM/console.log)它来调试您的变量状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:29:29.767

谷歌浏览器，开发者工具是你的朋友。我相信在 Windows 上，控制台是 Ctrl+Shift+J。

控制台将向您显示错误所在的行，如果您单击它，则会将您带到代码中（大多数情况下）存在错误的位置。

“无法读取未定义的属性‘值’”表示您正在尝试访问值属性（可能是 DOM 元素），但变量不正确。换句话说，您应该找到您尝试访问的变量`.value`并找出该元素未显示的原因。

# android - 使用库存相机捕获图像并在 webview 中显示

> ID：11315956
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:19:31.777
> 
> 标签：android, webview, camera, android-camera-intent

我正在尝试使用 onClickListener 启动 android 相机并拍摄一张照片，该照片保存到 sdcard 上的特定文件夹中，然后在 webview 中显示捕获的图像。继承人我的代码到目前为止。

```
private static final int CAMERA_REQUEST = 1888;
WebView WV;
Button capture;
Uri mCapturedImageURI;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    this.WV =(WebView) this.findViewById(R.id.webView1);

    this.capture =(Button) findViewById(R.id.button1);

    capture.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

             String fileName = "temp.jpg";  
                ContentValues values = new ContentValues();  
                values.put(MediaStore.Images.Media.TITLE, fileName);

                mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);  

            Intent cameraIntent = new Intent (MediaStore.ACTION_IMAGE_CAPTURE);
             cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, 
                     Uri.fromFile(new File( "sdcard/image")));  

             startActivityForResult(cameraIntent, CAMERA_REQUEST);

        }
    });

}
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

     super.onActivityResult( requestCode, resultCode,  data);

     if (requestCode == CAMERA_REQUEST) {

         setContentView(R.id.webView1);
         WV.getSettings().setAllowFileAccess(true);
         WV.getSettings().setJavaScriptEnabled(true);
         WV.getSettings().setBuiltInZoomControls(true);
         String html = ("<html>" +
                "<head>" +
                "</head>" +
                "<body>" +
                "<img src=\"sdcard/temp.jpg\" alt=\"alternativo\" />" +
                "</body>" +
                "</html>"
                );
         WV.loadDataWithBaseURL("", html, "text/html", "utf-8", "");

     }

    }     

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:53:14.793

您只能使用 putExtra() 传递原始数据类型（String、int、float 等）。

这是可以帮助您的文档：

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

如果要传递其他数据，使用[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口

# google-analytics - Google Analytics（分析）浏览器大小分析是否适用于像 Bootstrap 这样的响应式布局？

> ID：11315959
> 
> 赞同：1
> 
> 时间：2012-07-03T17:19:37.930
> 
> 标签：google-analytics, twitter-bootstrap

想知道是否有人知道**Google 的[浏览器大小分析](http://analytics.blogspot.com/2012/06/new-feature-conduct-browser-size.html)**与响应式设计布局（如**Twitter 的[Bootstrap](http://twitter.github.com/bootstrap/)** ）配合得如何？

浏览器大小 ![在此处输入图像描述](../Images/69aab4b0c3b561511c4ace5d5160a53d.png)

转化洞察 ![在此处输入图像描述](../Images/298262fd7aa1e9ab1f898bfade239e84.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T00:38:34.157

不是很好。我尝试调整 Google Analytics 窗口以使其强制平板电脑/移动设备在引导程序上流动，但发生的情况是您的网站加载到的 iframe 的宽度有些固定。

如果您编辑页面 html（通过 Chrome 开发人员工具或 Firebug）并重新调整 div 元素的尺寸，`id="ID-inPageTab-inpageiframe"`您可以降低宽度并查看具有移动设计的页面。这很好用。

这有点hackish，但它有效。谷歌可能会在未来添加该选项，

# javascript - 谷歌驱动 API javascript

> ID：11315962
> 
> 赞同：15
> 
> 时间：2012-07-03T17:19:54.100
> 
> 标签：javascript, google-drive-api

我正在尝试使用 Google 驱动器列出文件。

使用[https://stackoverflow.com/a/11280257](https://stackoverflow.com/a/11280257)中的答案，我发现了一个我无法找到原因的问题。

```
var clientId = '*********.apps.googleusercontent.com';
var apiKey = '##########';
var scopes = 'https://www.googleapis.com/auth/drive';

function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
}

function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true},handleAuthResult);
}

function handleAuthResult(authResult) {
    var authorizeButton = document.getElementById('authorize-button');

    if (authResult && !authResult.error) {
        authorizeButton.style.visibility = 'hidden';
        makeApiCall();
    }  
    else {
        authorizeButton.style.visibility = '';
        authorizeButton.onclick = handleAuthClick;
    }
}

function handleAuthClick(event) {
    gapi.auth.authorize({client_id: clientId, scope: [scopes], immediate: false}, handleAuthResult);
    return false;
}

function makeApiCall() {  
    gapi.client.load('drive', 'v2', makeRequest);   
}

function makeRequest()
{
    var request = gapi.client.drive.files.list({'maxResults': 5 });

    request.execute(function(resp) {          
        for (i=0; i<resp.items.length; i++) {
            var titulo = resp.items[i].title;
            var fechaUpd = resp.items[i].modifiedDate;
            var userUpd = resp.items[i].lastModifyingUserName;
            var userEmbed = resp.items[i].embedLink;
            var userAltLink = resp.items[i].alternateLink;

            var fileInfo = document.createElement('li');
            fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd ));                
            document.getElementById('content').appendChild(fileInfo);
        }
    });    
} 
```

我有这个错误：

```
Uncaught TypeError: Cannot read property 'files' of undefined 
```

在行中

```
var request = gapi.client.drive.files.list({'maxResults': 5 }); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-04T10:50:15.177

使用

```
var request = gapi.client.request({
        'path': '/drive/v2/files',
        'method': 'GET',
        'params': {'maxResults': '1'}
        }); 
```

代替

```
var request = gapi.client.drive.files.list({'maxResults': 5 }); 
```

解决了问题！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T19:17:20.123

代码看起来不错，您正在等待 gapi.client.load 完成。可能只是加载 Drive JS 文件时出错或其他问题（可能缓存了错误的 JS 文件？）。我稍微修改了您的示例以在 jsfiddle 上运行，请查看[http://jsfiddle.net/Rbg44/4/](http://jsfiddle.net/Rbg44/4/)以获取完整示例：

HTML：

```
<button id="authorize-button">Authorize</button>
<div id="content">Files:</div> 
```

JS：

```
var CLIENT_ID = '...';
var API_KEY = '...';
var SCOPES = '...';

function handleClientLoad() {
    gapi.client.setApiKey(API_KEY);
    window.setTimeout(checkAuth,1);
}

function checkAuth() {
    var options = {
        client_id: CLIENT_ID,
        scope: SCOPES,
        immediate: true
    };
    gapi.auth.authorize(options, handleAuthResult);
}

function handleAuthResult(authResult) {
    var authorizeButton = document.getElementById('authorize-button');

    if (authResult && !authResult.error) {
        authorizeButton.style.visibility = 'hidden';
        makeApiCall();
    } else {
        authorizeButton.style.visibility = '';
        authorizeButton.onclick = handleAuthClick;
    }
}

function handleAuthClick(event) {
    var options = {
        client_id: CLIENT_ID,
        scope: SCOPES,
        immediate: false
    };
    gapi.auth.authorize(options, handleAuthResult);
    return false;
}

function makeApiCall() {  
    gapi.client.load('drive', 'v2', makeRequest);   
}

function makeRequest() {
    var request = gapi.client.drive.files.list({'maxResults': 5 });
    request.execute(function(resp) {          
        for (i=0; i<resp.items.length; i++) {
            var titulo = resp.items[i].title;
            var fechaUpd = resp.items[i].modifiedDate;
            var userUpd = resp.items[i].lastModifyingUserName;
            var userEmbed = resp.items[i].embedLink;
            var userAltLink = resp.items[i].alternateLink;

            var fileInfo = document.createElement('li');
            fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + 
                ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd ));                
            document.getElementById('content').appendChild(fileInfo);
        }
    });    
}

$(document).ready(function() {
  $('#authorize-button').on('click', handleAuthClick);
  $.getScript('//apis.google.com/js/api.js', function() {
    gapi.load('auth:client', handleClientLoad);
  });
}); 
```

如果您调用 gapi.client.load() 时发出的请求有任何问题，您能否检查您的浏览器开发工具？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-03T09:15:25.680

你需要这样写：

```
gapi.client.load('drive', 'v2', null); 
```

# android - Eclipse 入门和遇到问题

> ID：11315966
> 
> 赞同：0
> 
> 时间：2012-07-03T17:20:21.097
> 
> 标签：android, eclipse, api

我决定尝试一下，并度过了令人沮丧的一天。我一直在下载和安装所有的开发软件，但是 Eclipse 给我带来了很多麻烦。我已经解决了大部分问题，但还有另一个问题。由于某种原因，Google API 未安装：

![在此处输入图像描述](../Images/f300f4819916f5fe278b23ae73c48992.png)

[更大的图像](https://i.stack.imgur.com/79bEa.png)

为什么是这样？他们很重要吧？我目前正在为初学者使用一本书，到目前为止我几乎不知道自己在做什么。非常感谢您的帮助和您查看此内容的时间。

（我正在运行 Eclipse Indigo）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:26:26.787

正如您在状态栏中看到的，它们安装良好。只是*Google TV*与您的环境不兼容。如果您想进行智能手机应用程序开发，那么“纯”Android API 或 Google API（包括 Google Maps）在开始时都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:26:08.997

Google API 对开发 Android 应用程序并不是 100% 的关键任务，但确实包含使用大多数 Google 功能（Gmail、Google 地图等）的类和方法。

在您了解该平台的更高级功能之前，您应该可以只使用 Android API。

# c# - 如何使用 HtmlAgilitiPack 附加属性？

> ID：11315967
> 
> 赞同：3
> 
> 时间：2012-07-03T17:20:28.147
> 
> 标签：c#, html-agility-pack, html

我正在尝试使用 HAP 库在 HTML 标记中创建一个新属性：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(PATH);
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//input");
nodes[0].Attributes["foo"].Value = "baa"; /* try add 'foo' attribute with 'baa' value in input HTML element. */
doc.Save(@"C:\foo.html"); 
```

但它会得到一个例外：

```
Object reference not set to an instance of an object. 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:41:08.130

> 是的。并且 .Count 非零

这意味着首先需要创建属性，然后将其添加到集合中（据我记得自从我上次使用这个库以来）：

```
HtmlAttribute attr = doc.CreateAttribute("foo", "baa");
nodes[0].Attributes.Add(attr); 
```

# opencv - emgu GPU Blob 检测

> ID：11315970
> 
> 赞同：3
> 
> 时间：2012-07-03T17:20:47.383
> 
> 标签：opencv, emgucv

我对 Emgu GPU 功能的当前状态（使用 Emgu 2.4 x64）感到困惑。GPUImage 可用的方法非常有限 - 我正在尝试将其用于 blob 检测。具体来说，像这样的代码结构可以使用 GPU 来加速 blob 提取。

关于如何利用 Emgu 的 GPU 功能有什么想法吗？或者，有哪些选择可以利用 GPU（除了 CUDA 中的重写）？

```
 using (Image<Gray, Byte> currentGrayFrame = imgCurrentFrame.Convert<Gray, Byte>())
        {
            using (MemStorage storage = new MemStorage())
            {
                currentGrayFrame._SmoothGaussian(3);
                currentGrayFrame._GammaCorrect(1.8d);
                currentGrayFrame._EqualizeHist();
                CvInvoke.cvCanny(currentGrayFrame, currentGrayFrame, 120, 60, 3);
                int blobID = 0;
                for (Contour<System.Drawing.Point> contours = currentGrayFrame.FindContours(CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE, RETR_TYPE.CV_RETR_EXTERNAL, storage);
                     contours != null; contours = contours.HNext)
                {
                    Contour<Point> contour = contours.ApproxPoly(contours.Perimeter * 0.001);
                    if (contour.Area > 100)
                        if (contour.Total > 5)
                        {
                            Rectangle rect = contour.BoundingRectangle;
                            Image<Bgr, Byte> imgBlob = imgCurrentFrame.Copy(rect);
                            {
                                //Bitmap bmpBlob = imgBlob.Bitmap;
                                blobsList.Add(new Blob
                                {
                                    BlobID = ++blobID,
                                    BlobImage = imgBlob,
                                    Location = rect,
                                });
                                //imgBlob.Dispose();
                            }
                        }
                }
            }
        } 
```

# java - 在java中创建父线程

> ID：11315973
> 
> 赞同：-3
> 
> 时间：2012-07-03T17:21:00.567
> 
> 标签：java

我经常在 main() 中创建子线程

```
Thread thread = new Thread(new Runnable(){public void run(){}}); 
```

同样，是否也可以创建父线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:26:59.753

`Runtime.exec()`?

请参阅：[如何在 Java 中创建进程](https://stackoverflow.com/questions/2006035/how-to-create-a-process-in-java)

我想我们真的不确定你所说的“父线程”是什么意思......

[来自](http://www.coderanch.com/t/475322/threads/java/Parent-thread-id)coderanch.com：http://www.coderanch.com/t/475322/threads/java/Parent-thread-id

> 除了由 JVM 创建来启动应用程序的线程外，每个线程都是由其他线程创建的。您已决定将此称为“父线程”；不过，这不是 Java 语言的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:24:10.853

**main() 是父线程......**

试试这个....

```
public static void main(String[] args)
    {

        System.out.println(Thead.currentThead().getName());

    } 
```

# ios - 在哪里保存用户文章的“读取”标志 - CoreData 或用户默认值？

> ID：11315977
> 
> 赞同：0
> 
> 时间：2012-07-03T17:21:13.663
> 
> 标签：ios, core-data, nsuserdefaults

我有一个应用程序，用户首先查看列表`Articles`，其中显示未读号码，然后可以阅读文章。一旦用户读取一个`Article`，它的对象的`read`标志被设置为`TRUE`。

在这些文章上保存“读取”标志（用于 UI）的最佳做法是什么？我看到的用户默认设置的直接好处是数据将被备份到 iCloud，因此所有文章将随着时间的推移保持其正确状态、恢复等。

不过，使用 CoreData 可能会有一些更大更好的好处，但我不是很熟悉。

对于这种情况，您有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:41:15.800

我会把它存储在 Core Data 中，为什么？过滤（查询）未读文章的好处，如果您的应用有登录（或将来可能登录），您可以为每个用户配置文件关联此信息。您还将在一个地方获得所有这些信息，让您受益于更简单的代码。

# iphone - Phonegap：获取捕获的音频文件的文件大小

> ID：11315979
> 
> 赞同：1
> 
> 时间：2012-07-03T17:21:25.040
> 
> 标签：iphone, ios, cordova

我正在使用 phonegap 构建一个 iPhone 应用程序。我使用以下代码记录了文件。

navigator.device.capture.captureAudio( captureSuccess, captureError );

如何获取此捕获的音频文件的文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:45:30.520

navigator.device.capture.captureAudio( captureSuccess, captureError ) 的 captureSuccess 方法将使用具有 size 参数的[MediaFile](http://docs.phonegap.com/en/1.9.0/cordova_media_capture_capture.md.html#MediaFile)对象数组调用。

```
function captureSuccess(audioFiles) {
    var i, len;
    for (i = 0, len = audioFiles.length; i < len; i += 1) {
        console.log("Name = " + audioFiles[i].name);
        console.log("Path = " + audioFiles[i].fullPath);
        console.log("Type = " + audioFiles[i].type);
        console.log("Size = " + audioFiles[i].size);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:38:40.183

请使用此方法捕获音频，

```
navigator.device.capture.captureAudio( 
    CaptureCB captureSuccess, CaptureErrorCB captureError,  [CaptureAudioOptions options]
); 
```

例子：

```
// capture callback
var captureSuccess = function(mediaFiles) {
    var i, path, len;
    for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        path = mediaFiles[i].fullPath;
        // do something interesting with the file
    }
};

// capture error callback
var captureError = function(error) {
    navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
};

// start audio capture
navigator.device.capture.captureAudio(captureSuccess, captureError, {limit:2}); 
```

捕获操作完成后，它将调用**CaptureCB**回调，其中包含描述每个捕获的音频剪辑文件的**MediaFile**对象数组。您将使用 size 属性获取音频的大小。

请检查链接以获取更多参考[音频捕获使用电话间隙示例](http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html#MediaFile)

# c++ - 是否有用于将 FLAC 转码为 MP3 的简单 C 或 C++ 库？

> ID：11315988
> 
> 赞同：1
> 
> 时间：2012-07-03T17:22:09.030
> 
> 标签：c++, c, libraries, lame, flac

现在，我在命令行程序中通过调用`flac`,`metaflac`和`lame`二进制文件来采取简单的方法，当然，还需要安装它们。

我宁愿使用库来避免这种依赖。我发现 libFLAC、LAME 和 FFmpeg 的文档不足，并且对它们进行编程并不直观。StackOverflow 上的相关问题会收到有关这些库的简洁答案。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:13:46.437

看看[GStreamer](http://gstreamer.freedesktop.org/)库。它可能有你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:27:47.037

您的选择是要求安装`flac`和`lame`程序，或者要求安装库。为什么需要库比需要命令行工具更容易？

所以，我强烈建议你继续做你正在做的事情。如果您正在编写媒体播放器，那么使用库并自己解码 FLAC 文件会很有意义；但如果您只是转码为 MP3，命令行工具与任何其他解决方案一样好，而且更简单。我认为最简单的就是最好的。

“就没有选择吗？” 我不知道你的意思是什么；总是有选择。但毫无疑问，弄清楚如何直接调用库比仅仅调用命令行工具要多。如果您已经有一个涉及命令行工具的有效解决方案，我建议您继续使用它。

# php - Facebook 分享未显示描述和图像

> ID：11315991
> 
> 赞同：0
> 
> 时间：2012-07-03T17:22:23.357
> 
> 标签：php, facebook, facebook-graph-api, facebook-sharer

我正在处理一个项目，我在产品页面上添加了一个分享按钮，当我点击分享时，它只在 fb 分享框中显示该网站的链接，没有其他信息显示我的主页可以成功分享

**还行吧**

[http://smartbetty.com](http://smartbetty.com)

我添加了一些 og 标签但没有运气

**这是我的问题网址**

```
http://smartbetty.com/index.php/frontend/campaigns/single/882/Fantastic-Deal-24-for-a-Stunning-Pair-of-Pearls-Meet-Silver-Drop-Earrings-Valued-at-150 
```

**当我在 facebook 调试器上调试它时，它会给出以下结果**

```
https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fsmartbetty.com%2Findex.php%2Ffrontend%2Fcampaigns%2Fsingle%2F882%2FFantastic-Deal-24-for-a-Stunning-Pair-of-Pearls-Meet-Silver-Drop-Earrings-Valued-at-150 
```

我玩了几个小时，但运气不好，有人知道这是怎么回事谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:30:39.967

调试器的反应很清楚，不是吗？

> URL 请求了 HTTP 重定向，但无法遵循。

您的页面发送 302 重定向 - 到同一个地址！如果遵循这一点，它会再次出现相同的重定向……一次又一次……一次又一次。

您如何期望任何工具从具有类似行为的页面中提取数据……？

由于在“真实”浏览器中请求页面时并没有这样做，因此您显然以某种方式在服务器端搞砸了——可能试图设置一个 cookie，然后重定向到同一个地址，期望获得 cookie 值使用（你没有像 FB 的刮板这样不接受或发送 cookie 的工具），或类似的东西......</p>

# java - 将字符串从 Java 中的 JTextField 转换为 Int

> ID：11315992
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:22:29.690
> 
> 标签：java, swing, parsing, int, textfield

所以我试图使用在 a 中输入的文本`TextField`作为`Int`...继承我的代码

```
int command1 = (int) (command.getText()); 
```

但我得到了错误`"Cannot cast from string to int"`，我无法弄清楚......有人可以帮忙吗？

ps 中的文字`TextField`不是数字所以

```
int command1 = (int) (Double.parseDouble(command.getText())); 
```

不管用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:23:43.623

您需要解析包含整数的字符串，而不是简单地转换它。

```
int aInt = Integer.parseInt(aString); 
```

编辑：“PS TextField 中的文本不是数字”你不能用非数字的东西创建一个 int。“ABC”不能是整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:25:33.987

**使用整数包装对象...**

```
int iVal = Integer.parseInt(String); 
```

# c++ - std::map 排序谓词按字符串大小排序但保留不同的字符串？

> ID：11315998
> 
> 赞同：3
> 
> 时间：2012-07-03T17:22:50.190
> 
> 标签：c++, stl, map, predicate

我需要在地图中存储各种字符串，但我想让它们按大小排序。

使用这样的谓词：

```
struct strsize_less {
    bool operator()(const string& l, const string& r) {
        return l.size() < r.size();
    };
}; 
```

将完成排序，但它会丢弃具有相同大小的字符串

```
int main() {
    typedef map<string, int, strsize_less> mymap_t;
    mymap_t mymap;

    mymap["j"    ] = 0;
    mymap["i"    ] = 1;
    mymap["hh"   ] = 2;
    mymap["gg"   ] = 3;
    mymap["fff"  ] = 4;
    mymap["eee"  ] = 5;
    mymap["dddd" ] = 6;
    mymap["cccc" ] = 7;
    mymap["bbbbb"] = 8;
    mymap["aaaaa"] = 9;

    for( mymap_t::iterator i = mymap.begin(); i!=mymap.end(); ++i )
        cout << "k = " << i->first << " - > v= " << i->second << endl;

    return 0;
} 
```

输出是：

```
k = j - > v= 1
k = hh - > v= 3
k = fff - > v= 5
k = dddd - > v= 7
k = bbbbb - > v= 9 
```

**我的问题**：是否有任何谓词可以用来实现以下输出：

```
k = j - > v= 0
k = i - > v= 1
k = hh - > v= 2
k = gg - > v= 3 
k = fff - > v= 4
k = eee - > v= 5
k = dddd - > v= 6
k = cccc - > v= 7
k = bbbbb - > v= 8
k = aaaaa - > v= 9 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T17:24:19.673

在比较器中比较大小和字符串：

```
struct strsize_less
{
    bool operator()(std::string const& l, std::string const& r) const
    {
        if (l.size() < r.size())
            return true;

        if (l.size() > r.size())
            return false;

        return l < r;
    };
}; 
```

或者，使用 C++11 的`std::tie`：

```
struct strsize_less
{
    bool operator()(std::string const& l, std::string const& r) const
    {
        return std::tie(l.size(), l) < std::tie(r.size(), r);
    };
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:27:42.800

```
return l.size() < r.size() 
   || (l.size() == r.size() && l < r); 
```

# c# - 升级后单击按钮时 Monotouch 崩溃

> ID：11315999
> 
> 赞同：0
> 
> 时间：2012-07-03T17:22:50.060
> 
> 标签：c#, iphone, ios, xamarin.ios, monodevelop

我已经升级到 MonoTouch 5。自从升级后，我新创建的按钮在我现有的项目中都不起作用。在升级之前创建并绑定到事件的所有按钮仍然可以正常工作，但是一旦我创建一个新按钮并将其绑定到一个事件，应用程序就会在模拟器中崩溃。

有趣的是，当我在升级后创建一个新项目，并像往常一样在界面生成器中创建一个按钮并像往常一样将其绑定到一个事件时，它工作正常。仅当我在升级到升级前创建的现有项目后添加新按钮时才会发生崩溃。升级后创建和绑定的按钮与升级前完全相同。

我还在升级后创建了新的测试项目，并比较了 AppDelegate 和 Main cs 文件中的代码。一切都一模一样！

有什么我可能会丢失的吗？我已经搜索了互联网并尝试了包括 Stack Overflow 在内的任何地方的解决方案，但无济于事。我真的不想将现有代码移动到新项目，因为这需要大量工作。

堆栈跟踪错误：

```
012-07-03 19:18:30.189 Calculator[605:1207] -[__NSCFType btnSave:]: unrecognized selector sent to instance 0x7106fd0

Unhandled Exception: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[__NSCFType btnSave:]: unrecognized selector sent to instance 0x7106fd0
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at ScamCalculator.Application.Main (System.String[] args) [0x00000] in /Users/joachimpr/Projects/ScamCalculator/ScamCalculator/Main.cs:17 
[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[__NSCFType btnSave:]: unrecognized selector sent to instance 0x7106fd0
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at ScamCalculator.Application.Main (System.String[] args) [0x00000] in /Users/joachimpr/Projects/ScamCalculator/ScamCalculator/Main.cs:17 
```

该按钮在 Interface Builder 中被链接为一个插座。按钮事件代码：

```
public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            // Perform any additional setup after loading the view, typically from a nib.

            btnSave.TouchUpInside += (sender, e) => {
                Console.WriteLine("click");
            };
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:00:39.963

原来有一个视图正在失去它的实例。我将此视图移动到一个类实例，现在它工作正常。