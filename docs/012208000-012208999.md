# StackOverflow 问答 12208000-12208999

# java - Java 安全管理器 checkExec

> ID：12208002
> 
> 赞同：1
> 
> 时间：2012-08-31T02:02:04.403
> 
> 标签：java, security, java-security, java-security-manager, rapid-prototyping

我在尝试在 Java 安全管理器中实施安全检查时遇到问题。

我似乎误解了安全管理器中 checkExec() 方法的用途。我认为当我的应用程序尝试通过命令行调用另一个 Java 应用程序时它会被调用，但这似乎并没有发生。

这就是我想要发生的事情：使用我的自定义安全管理器的调用应用程序在命令行上执行“java SomeApp”。安全管理器检查这是否正常并执行适当的操作。

为了做到这一点，我做了以下事情：

1.  创建了一个覆盖该`checkExec`方法的自定义安全管理器。方法签名是`public void checkExec(String cmd)`.

2.  创建了一个测试类，SecurityTest。

3.  SecurityTest 将我的自定义安全管理器指定为其安全管理器。

4.  SecurityTest 然后`java InvokeMe`在命令行上运行。

5.  自定义安全管理器拦截了这一点并做一些事情。

1 到 4 很好，但 5 永远不会发生。我已验证我的自定义安全管理器有效，它已成功分配给 SecurityTest，并且 SecurityTest 成功运行了 InvokeMe。但是，据我所知，我的自定义安全管理器中的 checkExec() 方法永远不会被调用。

我哪里错了？我正在尝试做的事情（让安全管理器在应用程序调用时做某事`java SomeApp`）甚至可能吗？

感谢您的时间。

**编辑：**

这是运行测试产生的一些代码和输出。这是快速原型风格，“先把它搞定，以后再清理”风格的代码，所以它不会很漂亮：

自定义安全管理器：

```
import java.util.*;
import java.io.*;
class DTESecurityManager extends SecurityManager {
    // instance variables

    DTESecurityManager() {
        super();
        //assign a bunch of variables
        System.out.println("TEST 1");
    }

    public void checkExec(String cmd) {
        if (cmd.toLowerCase().startsWith("java ")) {
            if (cmd.matches("(?i).*-djava.security.manager.*")) {
                throw new SecurityException("Cannot assign a security manager to invoked Java applications.");
            }
            StringBuffer intermediateCommand = new StringBuffer(cmd).insert(5, "-Djava.security.manager=DTESecurityManager ");
            String modifiedCommand = new String(intermediateCommand);
            try {
                Runtime rt = Runtime.getRuntime();
                Process pr = rt.exec(modifiedCommand);
            } catch (Exception e) {
                System.err.println("Error: " + e.getMessage());
            }
            try {
                FileWriter fstream = new FileWriter("Verification.txt");
                BufferedWriter out= new BufferedWriter(fstream);
                out.write("I worked.");
                out.close();
            } catch (Exception e) {
                System.err.println("Error: " + e.getMessage());
            }
            throw new SecurityException("Command was executed, but was modified to force invoked application to use this security manager.");
        }
    }
} 
```

安全测试：

```
import java.io.*;

class SecurityTest {

    public static void main(String[] args) {
        try {
            System.setSecurityManager(new DTESecurityManager());
        } catch (Exception e) {
            System.out.println("Error: " + e.getMessage());
        }
        try {
            System.out.println("If we got this far, we had no problems setting our security manager.");
            System.out.println("Now let's try to invoke another Java application.");
            Runtime rt = Runtime.getRuntime();
            Process pr = rt.exec("java InvokeMe");
            System.out.println("I reached the end of my test without crashing. Now terminating.");
        } catch (Exception e) {
            System.out.println("Exception message: " + e.getMessage());
        }
    }

} 
```

调用我：

```
import java.io.*;

class InvokeMe {

    public static void main(String[] args) {
        System.out.println("I, InvokeMe, have been invoked successfully.");
        try {
        FileWriter fstream = new FileWriter("InvokeMeWasCalled.txt");
            BufferedWriter out= new BufferedWriter(fstream);
            out.write("It worked.");
            out.close();
        } catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
        }
    }

} 
```

测试输出：

```
TEST 1
If we got this far, we had no problems setting our security manager.
Now let's try to invoke another Java application.
I reached the end of my test without crashing. Now terminating. 
```

没有迹象表明 checkExec() 被调用——没有控制台输出，并且 Verification.txt 在我的文件系统上的任何地方都不存在。（当然，我不确定在执行此类操作时安全管理器子类的行为应该是什么——所以这可能是正常的。如果是这种情况，我需要另一种快速而简单的方法来测试我是否'我打了某些代码行。） InvokeMeWasCalled.txt 确实存在，所以这部分肯定是有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:33:38.997

问题出在您的安全管理器的 overriden`checkExec`中。`cmd`传递给的参数`checkExec`仅包含正在执行的命令中的第一个“单词”，因此在您的程序中，“java”是`cmd`参数。结果，字符串不以“java”开头，并且`checkExec`不执行 if 块，从而导致安全管理器进行“干净”检查。

```
public void checkExec(String cmd) {
    System.out.println(cmd); // prints "java"
    if (cmd.toLowerCase().startsWith("java ") { ... } // is false
    // no security exception is thrown, allowing your command
} 
```

此外，作为旁注，修改后的命令执行将导致 a`StackOverflowError`因为只有第一个“单词”被传递给该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T01:36:16.260

我知道代码并不意味着漂亮，但它似乎使用了黑名单方法，即“如果我们认识到这是一个不需要的模式，那么我们就会抛出一个异常。” 这对于现实世界来说不够健壮，它与实际问题有关（'cmd' 不是你认为的那样）。

对于初学者，如果我们不想做一些特别的事情，在你的“if”块之后，应该有“else super.checkExec()”来运行常规处理。那会在那里解决你的问题。

# objective-c - 对于 Objective-C，实现值对数组的最有效方法是什么？

> ID：12208006
> 
> 赞同：1
> 
> 时间：2012-08-31T02:03:16.150
> 
> 标签：objective-c, ios, nsuserdefaults

假设我有一个项目，每个项目都附有购买日期。

存储该对的最佳方法是什么，以便我可以将其放入 NSUserdefaults 并稍后检索它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:11:08.200

（当持久化到 NSUserDefaults 时，您可以使用项目的 NSString 形式作为键，并将购买日期作为 NSDate 值。

但是 NSUserDefaults 更多的是用于配置而不是作为通用数据库。使用 Richard J. Ross III 提到的 Core Data 或 SQLite。您永远不会知道，您的数据模式可能会发生变化并变得更加复杂，在这种情况下，数据库（或至少是一个文件）是有序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:34:20.927

如果`Item`是一个相当简单的类，没有太多需要建模的关系，您可以`NSCoding`在其上实现，将每个字典及其购买日期存储在字典中，将所有字典放入数组中，然后使用`NSKeyedArchiver`将数组转换为`NSData`和将其写入磁盘上的文件。你甚至可以跳过实现 NSCoding 并在字典中存储一个唯一的字符串或数字来标识项目而不是项目，假设你没有那么多项目需要数据库。

如果您的数据集的大小或对象的复杂性中等到高，我会同意 Richard J. Ross III 和 Jason Fuerstenberg 的观点，并推荐核心数据或 SQLite。

# imageview - 无法在活动中显示从内置图库中选择的图像到图像视图

> ID：12208007
> 
> 赞同：0
> 
> 时间：2012-08-31T02:03:25.743
> 
> 标签：imageview, gallery

我有一个 imageview 和一个带有 4 个 edittext 字段的按钮上传头像（当我将条目插入数据库时​​，这一切正常。然后，当我点击上传头像时，它会转到内置画廊，我可以在其中选择要显示的图像imageview。但是，当我单击内置图库中的图像时，它不会在 imageview 上显示图像。相反，它给了我一个错误。

这是我的 Main.java：

```
 public class Main extends Activity {
   DBAdapter db = new DBAdapter (this);
   private ImageView img;
  private String selectedImagePath;
   private static final int SELECT_IMAGE=0;

   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ImageView img = (ImageView) findViewById(R.id.imageViewavatar);
    Button upload = (Button) findViewById(R.id.buttonuimage);
    upload.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Intent imageintent = new Intent();
            imageintent.setType("image/*");
            imageintent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(imageintent, "Select Picture"), SELECT_IMAGE);

        }
    });

Button save = (Button) findViewById(R.id.savebutton);
save.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        boolean success = true;
        try
        {
        db.open();
            EditText editTextfirstname = (EditText) findViewById(R.id.editText1);
            EditText editTextlastname = (EditText) findViewById(R.id.editText2);
            EditText editTextcity = (EditText) findViewById(R.id.editText3);
            EditText editTextstate = (EditText) findViewById(R.id.editText4);

            String firstnameValue = editTextfirstname.getText().toString();
            String lastnameValue = editTextlastname.getText().toString();
            String cityValue = editTextcity.getText().toString();
            String stateValue = editTextstate.getText().toString();
            String imageValue = selectedImagePath.toString();

            db.insertContact(firstnameValue, lastnameValue, cityValue, stateValue, imageValue);
            }
        catch (Exception e){
            success = false;    
        }finally{
            if(success){
            Toast toast = Toast.makeText(Main.this, "Successfully added contact", 5000);
            toast.show();
            MediaPlayer mp = MediaPlayer.create(Main.this, R.raw.beep);
            mp.start();
            Intent intnt = new Intent(Main.this, Main.class);
            startActivity(intnt);

                }

            }
        }
    private void show_mesg(String msg) {
        Toast.makeText(getApplicationContext(),msg,Toast.LENGTH_SHORT).show();
    }
    });
    }
 public void added (View v){
Intent i = new Intent(Main.this, Second.class);
startActivity(i);

 }

 public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_IMAGE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            Bitmap bm = BitmapFactory.decodeFile(selectedImagePath);
            img.setImageBitmap(bm);

        }
    }
 }

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
 } 
```

这是 LogCat 上显示的内容：

```
08-31 09:52:21.674: E/AndroidRuntime(459): FATAL EXCEPTION: main
08-31 09:52:21.674: E/AndroidRuntime(459): java.lang.RuntimeException: Failure delivering      result ResultInfo{who=null, request=0, result=-1, data=Intent { dat=content://media/external/images  /media/2 }} to activity {com.dtan.testcontacts/com.dtan.testcontacts.Main}:  java.lang.NullPointerException
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
 08-31 09:52:21.674: E/AndroidRuntime(459):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.os.Looper.loop(Looper.java:123)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-31 09:52:21.674: E/AndroidRuntime(459):  at java.lang.reflect.Method.invokeNative(Native Method)
08-31 09:52:21.674: E/AndroidRuntime(459):  at java.lang.reflect.Method.invoke(Method.java:507)
08-31 09:52:21.674: E/AndroidRuntime(459):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-31 09:52:21.674: E/AndroidRuntime(459):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-31 09:52:21.674: E/AndroidRuntime(459):  at dalvik.system.NativeStart.main(Native Method)
08-31 09:52:21.674: E/AndroidRuntime(459): Caused by: java.lang.NullPointerException
08-31 09:52:21.674: E/AndroidRuntime(459):  at com.dtan.testcontacts.Main.onActivityResult(Main.java:113)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
08-31 09:52:21.674: E/AndroidRuntime(459):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
08-31 09:52:21.674: E/AndroidRuntime(459):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:27:30.153

我得到了它！！。请参阅下面的编辑代码：

我更换了：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (resultCode == RESULT_OK) {
    if (requestCode == SELECT_IMAGE) {
        Uri selectedImageUri = data.getData();
        selectedImagePath = getPath(selectedImageUri);
        Bitmap bm = BitmapFactory.decodeFile(selectedImagePath);
        img.setImageBitmap(bm); 
```

和：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (resultCode == RESULT_OK) {
    if (requestCode == SELECT_IMAGE) {
        Uri selectedImageUri = data.getData();
        selectedImagePath = getPath(selectedImageUri);
        File f = new File (selectedImagePath);
            Bitmap bm = BitmapFactory.decodeFile(f.getAbsolutePath());
            img.setImageBitmap(bm); 
```

# android - 如何创建提醒通知

> ID：12208008
> 
> 赞同：20
> 
> 时间：2012-08-31T02:03:58.507
> 
> 标签：android, notifications, android-notifications

我已经推荐了很多网站，但我仍然无法创建通知（提醒或警报）我不知道如何创建和使用它。它通知/提醒用户有关任务，并为用户提供每日提示。我很高兴得到您的帮助以及如何对其进行编码......

问候:) 提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-31T02:50:26.163

你需要两件事：

*   AlarmManager：定期安排您的通知（每天，每周，..）。
*   服务：在 AlarmManager 关闭时启动您的通知。

这是一个基本示例：

在您的活动中：

```
Intent myIntent = new Intent(this , NotifyService.class);     
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
PendingIntent pendingIntent = PendingIntent.getService(this, 0, myIntent, 0);

Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.SECOND, 0);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.HOUR, 0);
calendar.set(Calendar.AM_PM, Calendar.AM);
calendar.add(Calendar.DAY_OF_MONTH, 1);

alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 1000*60*60*24 , pendingIntent); 
```

*这将在每天午夜（12 点）*触发警报。如果你愿意，你可以改变它。

现在，创建一个服务`NotifyService`并将此代码放入其`onCreate()`：

```
@Override
public void onCreate() {
    NotificationManager mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.notification_icon, "Notify Alarm strart", System.currentTimeMillis());
    Intent myIntent = new Intent(this , MyActivity.class);     
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, intent, 0);
    notification.setLatestEventInfo(this, "Notify label", "Notify text", contentIntent);
    mNM.notify(NOTIFICATION, notification);
} 
```

此代码将在收到警报时显示通知。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-18T19:43:27.227

这是一个关于每日通知的小[YouTube 视频教程。](https://www.youtube.com/watch?v=tyVaPHv-RGo)您可以在说明中找到源代码。

这个视频不是我自己做的。但我认为这是一个快速的帮助。虽然我建议进行一些更改，因为 Notification.Builder 已弃用：

1.

```
import android.support.v4.app.NotificationCompat; 
```

2.

```
// Change: Notification mNotify = new Notification.Builder(this) to
Notification mNotify = new NotificationCompat.Builder(this) 
```

玩得开心！

# php - 按降序对一组软件版本进行排序

> ID：12208010
> 
> 赞同：4
> 
> 时间：2012-08-31T02:04:32.080
> 
> 标签：php, sorting, version, string-comparison

如何对这个版本值数组进行排序？

```
$available_databases = array(
    "4.0.1",
    "trunk",
    "branch",
    "4.1.0",
    "4.0.3"
); 
```

所以结果是

```
4.1.0
4.0.3
4.0.1
branch
trunk 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:27:42.910

您应该使用[usort](http://php.net/usort)功能。

```
$isVersion = function($a) { return is_numeric( str_replace('.', '', $a) ); };
$sortFunction = function($a, $b) use($isVersion) { 
    if( $isVersion($a) && $isVersion($b) ) { 
        return version_compare($b, $a); // reversed for your proper ordering
    } elseif( $isVersion($a) ) { 
        return -1;
    } elseif( $isVersion($b) ) { 
        return 1;
    } else { 
        return strcasecmp($a, $b);
    }
};

usort($yourArray, $sortFunction); 
```

usort 函数允许您使用自己的自定义比较回调。我用你想要的逻辑在这里为你写了一个：如果两个可比较的项目都是版本，它用于`version_compare`将它们与反转的参数进行比较，因为你想要降序。如果第二个可比较项是字符串而第一个是版本，则该版本被称为“低于”字符串，反之亦然。如果两个项目都是字符串，它使用`strcasecmp`比较函数来确定正确的顺序。

使用示例：[键盘](http://codepad.viper-7.com/PRVaxr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T04:19:15.327

您可以使用 PHP 的内置数组操作等来为您完成很多繁重的工作，从而减少了很多明显的复杂性：

```
$names = preg_grep('/^\D/', $arr);
$versions = preg_grep('/^\d/', $arr);

usort($versions, 'version_compare');
usort($names, 'strcasecmp');

$sorted = array_merge(array_reverse($versions), $names); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T02:42:05.227

它可以通过一些[数组函数](http://php.net/manual/en/ref.array.php)和几个循环来完成。

**例子：**

```
<?php
$arr = array("4.0.1", "trunk", "branch", "4.1.0", "4.0.3", "1.2", "1.31", "1.10", "1.4.5");
natsort($arr);
$count = count($arr);
$alpha = array();
$new_arr = array();
for($i = 0; $i < $count; $i++) {
    if(!is_numeric(str_replace('.', '', $arr[$i]))) {
        $alpha[] = $arr[$i];
    } else {
        $new_arr[] = $arr[$i];
    }
    $arr[$i] = null;
}
rsort($new_arr);
sort($alpha);
$new_arr = array_merge($new_arr, $alpha);
var_dump($new_arr);
?> 
```

**[演示在这里。](http://ideone.com/XdXNx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-23T04:18:33.973

您只需要反转`version_compare()`评估。

代码：（[演示](https://3v4l.org/IWKp6)）

```
$array = ["4.0.1", "trunk", "branch", "4.1.0", "4.0.3"];

usort($array, function($a, $b) {
    return version_compare($b, $a);
});

var_export($array); 
```

输出：

```
array (
  0 => '4.1.0',
  1 => '4.0.3',
  2 => '4.0.1',
  3 => 'branch',
  4 => 'trunk',
) 
```

从 PHP7.4 开始，可以使用箭头函数语法。（[演示](https://3v4l.org/Qsksd)）

```
usort($array, fn($a, $b) => version_compare($b, $a)); 
```

# node.js - 如何在 mongodb 查询中访问搜索到的子片段（使用 Mongoose）

> ID：12208012
> 
> 赞同：0
> 
> 时间：2012-08-31T02:04:56.367
> 
> 标签：node.js, mongodb, mongoose

我有一个相当简单的集合：

```
var Access = new Schema({
  userId         : { type: ObjectId, index: true },
  token          : { type: String, index: true },
  isOwner        : { type: Boolean, index: true },
});
mongoose.model('Access', Access);

var Workspace = new Schema({
  name           : { type: String, lowercase: true, unique: true},
  description    : String,
  isActive       : Boolean,
  settings       : {
    longName        : String,
    welcomeMessage  : String,
    countryId       : { type: ObjectId, index: true },
  },
  access          : [ Access ],
});
mongoose.model('Workspace', Workspace); 
```

当用户连接时，我有一个中间件检查令牌并查看是否一切正常。所以我有：

```
exports.tokenCall = function( req, res, next, token ){

  var Workspace = mongoose.model('Workspace'),
      User = mongoose.model('User'),
      accessEntry;

  req.application = {};

  // Find the token
  Workspace.findOne({ 'access.token': token } , function(err, doc){
    if(err){
      next( new g.errors.RuntimeError503( err ) );
    } else {
      if(! doc ){
        next( new g.errors.BadtokenError403() );
      } else {
        accessEntry = doc.access.filter(function(entry){ return entry.token == token;  } )[0];

        req.application.workspaceId = doc._id;
        req.application.workspaceName = doc.name;
        req.application.userId = accessEntry.userId;
        req.application.login =  accessEntry.login;
        req.application.token = token;
        req.application.workspace = doc; // Contains all of the settings!
        next();
      }
    }
  });
} 
```

我相信您可以在这里看到我的问题：我运行`Workspace.findOne({ 'access.token': token } , function(err, doc){`以找到具有正确标记的文档。但是，然后，我实际上...搜索一个数组（！）以找到我寻找的*实际*令牌！`accessEntry = doc.access.filter(function(entry){ return entry.token == token; } )[0];`我确信这不是这样做的方法——当然。如果我向下查询 4 ​​级怎么办...？！？

那么，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:10:54.347

如果您使用的是 Mongo 2.2，您可以利用新的[`$elemMatch`](http://docs.mongodb.org/manual/reference/projection/elemMatch/)投影运算符仅`access`在返回的文档中包含匹配的数组元素：

```
Workspace.findOne(
    { 'access.token': token }, 
    { _id: 1, name: 1, access: { $elemMatch: { token: token } } },
    function(err, doc) {
        // doc contains _id, name, and only the access array elements that match on token 
```

# c# - NHibernate LINQ 查询中的关键回退

> ID：12208016
> 
> 赞同：2
> 
> 时间：2012-08-31T02:05:23.060
> 
> 标签：c#, linq, nhibernate

H！

我正在为在 SQL 数据库上使用 NHibernate 的 Web 应用程序编写带有区域设置回退的消息存储。例如， 的结果`store.Get("Greet", "fr-ca-on")`将是此数据中的最佳匹配值 ( `fr-ca`)：

```
Key    Locale    Message
-----  ------    --------
Greet            Hello
Greet  fr        Bonjour!
Greet  fr-ca     Âllo!
Greet  fr-ca-qc  Âllo toi! 
```

我已经尝试过各种这样的查询来实现回退：

```
string[] locales = new[] { "fr-ca-on", "fr-ca", "fr", "" }; 
return (
   from Translation translation in reader.Get<Translation>()
   where locales.Contains(translation.Locale)
   group translation by translation.Key into translationGroup
   select translationGroup.OrderByDescending(p => p.Locale.Length).First()
   //or: select translationGroup.MaxBy(p => p.Locale.Length)
); 
```

这些在内存中工作得很好，但是 NHibernate 不能将组选择转换为 SQL。（它似乎只支持简单的聚合方法，例如`.Count()`，而不是选择。）

如何重写此查询以便 NHibernate 可以将其转换为 SQL？我想不出一种不涉及提前将查询延迟到内存中的方法，这确实会损害应用程序的性能。

（我宁愿不使用资源文件，因为我还有其他与翻译相关的实体。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:12:01.907

我能够将其重写为 LINQ 子查询：

```
string[] locales = new[] { "fr-ca-on", "fr-ca", "fr", "" }; 
return (
    from Translation translation in reader.Get<Translation>()
    where
        locales.Contains(translation.Locale)
        && (translation.Locale.Length == reader
            .Get<Translation>()
            .Where(p => locales.Contains(p.Locale) && p.Key == translation.Key)
            .Max(p => p.Locale.Length)
        )
    select translation
); 
```

NHibernate 很好地处理了子查询并将其变成了这个（美化的）SQL：

```
SELECT *
FROM [translation] translation
WHERE
    [locale] IN ('fr-ca-on', 'fr-ca', 'fr', '')
    AND LEN([locale]) = (
        SELECT CAST(MAX(LEN(sub.[locale])) AS INT)
        FROM [translation] sub
        WHERE
           sub.[locale] IN ('fr-ca-on', 'fr-ca', 'fr', '')
           AND sub.[key] = translation.[key]
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:33:09.247

如果你真的只想实现mentionend Get 方法

那个怎么样？

```
private string Get(string key, string locale)
{
    return (from Translation t in reader
       where t.Key == key && (t.Locale == null || t.Locale == "" || locale.StartsWith(t.Locale))
       orderby t.Locale descending
       select t.Value).First();
} 
```

PS：对“StartsWith”的更改是有意义的，具体取决于您拥有的语言环境键和您要求的异国情调，但我现在能想到的唯一例子 :) 请求“ch”时，“fr-ch”可能会给您法语（suisse德语）

# jquery - jquery：在（for）函数中使用keyup检查每个表单

> ID：12208020
> 
> 赞同：0
> 
> 时间：2012-08-31T02:05:55.137
> 
> 标签：jquery

我正在使用 (for) 添加多个输入表单我想用 keyup 检查这个表单，但它总是只检查第一个表单

这是代码

```
for (i = 0; i < 5; i++) {
    $('input[name*="morein"]').keyup(function () {
        var value = $(this).val();
        var moreincheck = $("#moreincheck");
        if (value > 60) {
            moreincheck.css('display', 'block');
            moreincheck.text("error cant add more than 60");
        } else {
            moreincheck.css('display', 'none');
        }
    }).keyup();

    $("#divTxt").append('<inputname="morein[]"  type="text" />' + '<span id="moreincheck" class="checkerror"></span>');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:15:14.187

**使 id 唯一**，或者您可以使用类，并将事件绑定部分从循环中分离出来。

```
for (var i = 0; i < 5; i++) {
  $("#divTxt")
    .append('<input name="morein[]" type="text" class="morein" />')
    .append('<span class="checkerror"></span>');
}

// bind the event handler
$('input.morein').keyup(function () {
    var $this = $(this);
    var moreincheck = $this.next('.checkerror');
    // use .length to check the length
    if ($this.val().length > 60) {
        moreincheck.text("error cant add more than 60").show();
    } else {
        moreincheck.hide();
    }
}); 
```

***[工作演示。](http://jsfiddle.net/T6hGp/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:14:10.283

ID 必须是**唯一的**！（你注意到了原因）。`input[name*="morein"]`此外，您将在每次迭代中重新添加相同的事件处理程序。

最好先创建元素，绑定事件处理器，然后使用DOM遍历找到对应的元素。例如：

```
for (i = 0; i < 5; i++) {
   $('<input name="morein[]"  type="text" /><span class="checkerror"></span>').appendTo('#divTxt');
}

$('input[name*="morein"]').keyup(function () {
    var value = $(this).val();
    var moreincheck = $(this).next('span.checkerror');
    if (value > 60) {
        moreincheck.css('display', 'block');
        moreincheck.text("error cant add more than 60");
    } else {
        moreincheck.css('display', 'none');
    }
}); 
```

# sql - 根据一列的最大值和另一列的条件获取行

> ID：12208025
> 
> 赞同：2
> 
> 时间：2012-08-31T02:06:21.810
> 
> 标签：sql, database, sql-server-2008, tsql, self-join

我正在寻找一个 SQL 查询，它从最高 Seq 为每个用户提供一个 Scr，其中 Scr 不等于 0。保证每个用户的 Seq 值都是唯一的。

**样本数据：**

```
ID Cde 用户 Scr Seq
1 1詹姆斯110 19
2 1詹姆斯85 20
3 1詹姆斯99 21
4 1詹姆斯99 22
5 1詹姆斯0 23
6 2 安德鲁 88 19
7 2安德鲁88 20
8 2 安德鲁 88 21
9 2 安德鲁 0 22
10 2 安德鲁 0 23
11 3大卫0 19
12 3 大卫 95 20
13 3 大卫 95 21
14 3 大卫 0 22
15 3 大卫 0 23

```

**查询结果：**

```
ID Cde 用户 Scr Seq
4 1詹姆斯99 22
8 2 安德鲁 88 21
13 3 大卫 95 21

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:12:42.087

```
Declare @t table([ID] int, [Cde] int, [User] varchar(6), [Scr] int, [Seq] int);

INSERT INTO @t([ID], [Cde], [User], [Scr], [Seq])
VALUES
    (1, 1, 'James', 110, 19),
    (2, 1, 'James', 85, 20),
    (3, 1, 'James', 99, 21),
    (4, 1, 'James', 99, 22),
    (5, 1, 'James', 0, 23),
    (6, 2, 'Andrew', 88, 19),
    (7, 2, 'Andrew', 88, 20),
    (8, 2, 'Andrew', 88, 21),
    (9, 2, 'Andrew', 0, 22),
    (10, 2, 'Andrew', 0, 23),
    (11, 3, 'David', 0, 19),
    (12, 3, 'David', 95, 20),
    (13, 3, 'David', 95, 21),
    (14, 3, 'David', 0, 22),
    (15, 3, 'David', 0, 23);

Select [ID], [Cde], [User], [Scr], [Seq] From 
(Select Rn = Row_Number()Over(Partition By [User] Order By Seq Desc,[User]) , *
From @t 
Where Scr <> 0) x Where x.Rn = 1 Order By 5 Desc,3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:11:23.380

`seq`您可以在子查询中找到最大的。

```
SELECT  a.*
FROM    tableName a INNER JOIN
        (
            SELECT [user], max(seq) MaxSeq
            FROM tablename
            WHERE Scr <> 0
            Group By [user]
        ) b 
            ON a.[user] = b.[user] AND
               a.seq = b.maxSeq
ORDER BY ID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/34198/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T02:15:38.767

使用 row_number() 函数，您可以识别具有此条件的行，其中 score 不为 0 并按 seq 降序排列：

```
select ID, Cde, User, Scr, Seq
from (select t.*,
             row_number() over (partition by user order by seq desc) as seqnum
      from t
      where scr <> 0
     ) t
where seqnum = 1 
```

（我假设“scr”是分数。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T02:13:01.583

您不需要自加入。您可以使用该功能为每个用户`row_number`选择最高的：`seq`

```
select ID, Cde, User, Scr, Seq from  (
   select *, row_number() over (partition by Cde order by Seq desc) rownum
   from tableName where scr <> 0
) a
where a.rownum=1 
```

这必须通过内部查询来完成，因为`row_number()`仅在 中有效，在 中`select`无效`where`。

# php - 从数据库添加超链接到查询结果

> ID：12208026
> 
> 赞同：-1
> 
> 时间：2012-08-31T02:06:22.593
> 
> 标签：php, javascript, mysql, url, href

对这种事情很陌生。

本质上，我只是希望返回的 url 值（见下文）将自身显示为超链接。“url”是数据库中包含（显然）网站 url 的列的名称。

以前我会使用这样的东西：

```
echo "<a href=".$row['url'].">".$row['url']."</a>"; 
```

但我不确定这种情况下的语法。这是代码片段：

```
 function createMarker(latlng, venuename, url, address, phone) {
      var html = "<b>" + venuename + 
      "</b> <br/>" + url +
      "</b> <br/>" + address + 
      "</b> <br/>" + phone;
      var marker = new google.maps.Marker({
        map: map,
        position: latlng
      });
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
      markers.push(marker);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:06:07.207

你的意思是你如何在php中传递一个数组，以便它为每个结果调用这个javascript函数并使url成为一个链接？如果是这样尝试这样的事情：

在您的页脚、window.load 函数或您选择在页面加载后提供 js 的任何方式中：

```
<script type="text/javascript">
<?php foreach($db_array AS $row): ?>
    createMarker('<?php echo $row['latlng']; ?>', '<?php echo $row['venuename']; ?>', '<?php echo $row['url']; ?>', '<?php echo $row['address']; ?>', '<?php echo $row['phone']; ?>');
<?php endforeach; ?>

function createMarker(latlng, venuename, url, address, phone) {
          var html = "<b>" + venuename + 
          "</b> <br/><a href=\"" + url + "\">" + url + "</a>" +
          "</b> <br/>" + address + 
          "</b> <br/>" + phone;
          var marker = new google.maps.Marker({
            map: map,
            position: latlng
          });
          google.maps.event.addListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
          });
          markers.push(marker);
        }
</script> 
```

这假设您有一个名为 $db_array 的数据库结果数组，并且字段与 js 函数的名称匹配。显然，您将这些值替换为实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:22:45.360

其中第一个是一个简单的 php 回显链接，后一个是用于创建谷歌标记的 javascript。你会想要决定你想做什么。它只是一个链接吗？或创建一个标记？

而且你有一些 html 元素在 javascript 中不匹配。

对于这个特定的输出，您可以在函数之前添加：

```
var url = <?php echo $row['url']; ?> 
```

但当然我不知道你想如何循环它。

# c# - 实体未使用 DataContractSerializer 进行序列化

> ID：12208027
> 
> 赞同：0
> 
> 时间：2012-08-31T02:06:27.413
> 
> 标签：c#, entity-framework, xml-serialization, datacontractserializer

我正在尝试序列化项目中的实体。我有很多，所以我现在只从一个开始。我的项目的目标是使用实体框架创建审计跟踪。当我在 audit.newvalue = doc.root.tostring() 中断时，根为空。我一直在尝试遵循与执行此操作相关的每个教程或 q/ai 发现，但每次我得到空值。不知道我在这里缺少什么。

```
[DataContract(IsReference=true)]
public class Client
{
    [DataMember]
    [Key]
    [DatabaseGenerated(System.ComponentModel.DataAnnotations.DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [DataMember]
    public bool Active { get; set; }

    [DataMember]
    [Required]
    public string LastName { get; set; }
    [DataMember]
    public string MiddleName { get; set; }
    [DataMember]
    [Required]
    public string FirstName { get; set; }

    [DataMember]
    [Required]
    public DateTime BirthDate { get; set; }
}

private Audit.DBAudit AuditTrailFactory(ObjectStateEntry entry, string userName)
    {
        var oc = this as IObjectContextAdapter; ;
        oc.ObjectContext.DetectChanges();

        Audit.DBAudit audit = new Audit.DBAudit();
        audit.TimeStamp = DateTime.Now;
        audit.Entity = entry.EntitySet.Name;
        audit.User = userName;

        // set action type
        switch (entry.State)
        {
            case System.Data.EntityState.Added:
                audit.ActionType = ActionTypes.I.ToString();
                break;
            case System.Data.EntityState.Modified:
                audit.ActionType = ActionTypes.U.ToString();
                break;
            case System.Data.EntityState.Deleted:
                audit.ActionType = ActionTypes.D.ToString();
                break;
            default:
                audit.ActionType = "F"; // fubar
                break;
        }

        DataContractSerializer serializer = new DataContractSerializer(entry.Entity.GetType());

        XDocument doc = new XDocument();
        XmlWriter writer = doc.CreateWriter();

        serializer.WriteObject(writer, entry.Entity);
        audit.NewValue = doc.Root.ToString();

        return audit;
    }

    [TestMethod]
    public void CanCreateAudit()
    {
        FircrestModel.Client.Client client = new FircrestModel.Client.Client
        {
            FirstName = "billy",
            LastName = "jones",
            BirthDate = new DateTime(1970, 1, 1),
        };

        context.Clients.Add(client);
        context.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:29:35.440

在使用 DataContractSerializer 的这个实现之后，我得到了预期的输出。正如我在上面的评论中提到的，客户端类是一个精简版。我将慢慢检查我的客户端类取消注释属性，直到找到似乎破坏了序列化程序的属性。

[如何使用 DataContractSerializer 创建标记名称与我已知类型匹配的 xml](https://stackoverflow.com/questions/2912687/how-to-use-datacontractserializer-to-create-xml-with-tag-names-that-match-my-kno?rq=1)

# c - 哈希表搜索和命令提示奇怪的错误

> ID：12208030
> 
> 赞同：0
> 
> 时间：2012-08-31T02:06:37.147
> 
> 标签：c, hashtable

我正在尝试搜索哈希表，但遇到了一些问题。我的代码可以编译，但它有问题。我不太确定是什么。当我在命令提示符下运行它并将文件传递给程序时。我在搜索时遇到了一些问题

0 不真诚

```
struct htablerec {
   char **key;
   int *frequencies;
   int num_keys;
   int capacity;
};

static unsigned int htable_word_to_int(char *word) {
   unsigned int result = 0;
   while (*word != '\0') {
      result = (*word++ + 31 * result);
   }
   return result;
}

int htable_insert(htable h, char *str) {
   int i;
   /*convert string to integer*/
   unsigned int index = htable_word_to_int(str);
   /*calculate index to insert into hash table*/
   int remainder = index%h->capacity;
   /*once calculated position in the hash table, 3 possibilities occur*/
   /*no string in this positon, copy string to that position,
     increment number of keys, return 1*/
   if (h->key[remainder] == NULL) {
      char *key = emalloc(strlen(str) + 1);
      strcpy(key, str);
      h->key[remainder] = key;
      h->frequencies[remainder] = 1;
      h->num_keys++;
      return 1;
}

   /*the exact same string is at the position,
     increment frequency at that position,
     return frequency*/
   if (strcmp(str, h->key[remainder]) == 0) {
      h->frequencies[remainder]++;
      return h->frequencies[remainder];
   }/*a string is at that position, but it isnt the rightone,
      keep moving along the array until you find either an open
      space or the string you are looking for*/
   if (h->key[remainder] != NULL && strcmp(str, h->key[remainder]) != 0) {

      /*you may need to wrap back around to the beginning of the table,
        so each time you add,to the position you should also mod
        by the table capacity.*/
      for (i = 0; i < h->capacity; i++) {
         /*no string in this positon, copy string to that position,
           increment number of keys*/
         if (h->key[remainder] == NULL) {
            char *key = emalloc(strlen(str) + 1);
            strcpy(key, str);
            h->key[remainder] = key;
            h->frequencies[remainder] = 1;
            h->num_keys++;
         }
         /*if you find the string you were looking for,
           increment the frequency at the position
           and return the frequency*/
         if (strcmp(str, h->key[remainder]) == 0) {
            h->frequencies[remainder]++;
            return h->frequencies[remainder];
         }
         if (h->key[remainder] != NULL && h->capacity ==  i) {
            i = 0;
         }
      }   
   }
   /*if you have kept looking for an open space but there isnt one,
     the hash table must fu*/
   return 0;
   }

int htable_search(htable h, char *str) {
/*create an initialise, a value to hold the number of collisions we have when looking for our key*/
   int collisions = 0;
   unsigned int index = htable_word_to_int(str);
   /*calculate the position at which we should start looking for our key*/
   int remainder = index%h->capacity;

   /*while there is an item at that position, but it isn't the key, and we haven't yet checked the entire hash table*/
   while (h->key[remainder] != NULL && strcmp(str, h->key[remainder]) != 0 && h->key[remainder] != h->key[h->capacity]) {
   /*increment our position to look for the next cell*/
      h->key[remainder]++;
      /*increment the number of collisions we've had so far*/
      collisions++;
   }
   /*if our number of collisions == the hashtable capacity*/
   if(collisions == h->capacity) {
   /*then out hashtable was full, did not contain our key, so we should return 0*/
      return 0;
   }
   else {
   /*else return the frequency at our final position*/
      return h->frequencies[h->capacity];
   } 
}

#include <stdio.h>
#include <stdlib.h>
#include "mylib.h"
#include "htable.h"

int main(void) {
   htable h = htable_new(113);
   char word[256];
   char op;

   /*We must have a space before the %c*/
   while(2 == scanf(" %c %255s", &op, word)) {
   if ('+' ==  op) {
   htable_insert(h, word);
   }
   else if ('?' == op) {
   printf("%d %s\n", htable_search(h, word), word);
   }
   }

   htable_free(h);

   return EXIT_SUCCESS;
   } 
```

我已经包含了上面的 mylib.c。

```
+ sociable
+ galleries
+ Russia
+ screamer
+ thickness
+ combed
+ escorted
+ revocable
+ digressed
+ Malawi
+ infringing
+ onslaught
+ files
+ kidded
+ unsound
+ tied
+ Ottawa
+ puzzles
+ build
+ necrosis
+ admire
+ cupful
+ brokers
+ segregation
+ Capet
+ Georges
+ bran
+ binders
+ zebras
+ contented
+ keypad
+ snowily
+ replaced
+ dominating
+ outright
+ Latinizers
+ invalidity
+ wakes
+ diversification
+ Riemannian
+ leadings
+ rhythmically
+ gentler
+ swarthy
+ disconnects
+ factoring
+ sequences
+ tiring
+ attendances
+ unloaded
? insincere
? constants
? unordered
? Toland
? butterfly
? suburban
? overtone
? Hauser
? numbers
? disadvantageous
? saintly
? Dutton
? homomorphic
? corporation
? climaxes
? dietitian
? manifestly
? greyest
? challenge
? tentacle
? Bernice
? bottle
? involve
? resisted
? wholesale
? trustworthiness
? Poole
? fourfold
? relentlessly
? fittingly
? doctorates
? cowlick
? Missoula
? curtsy
? calmness
? reallocate
? bossed
? scarce
? catheters
? regained
? autographing
? unobservable
? apprise
? lancer
? chicken
? crunches
? scrambled
? reared
? pealing
? violate
? sociable
? galleries
? Russia
? screamer
? thickness
? combed
? escorted
? revocable
? digressed
? Malawi
? infringing
? onslaught
? files
? kidded
? unsound
? tied
? Ottawa
? puzzles
? build
? necrosis
? admire
? cupful
? brokers
? segregation
? Capet
? Georges
? bran
? binders
? zebras
? contented
? keypad
? snowily
? replaced
? dominating
? outright
? Latinizers
? invalidity
? wakes
? diversification
? Riemannian
? leadings
? rhythmically
? gentler
? swarthy
? disconnects
? factoring
? sequences
? tiring
? attendances
? unloaded 
```

这是我要传入的文件的内容。我的插入方法有效，但如果需要，我也可以包含它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:45:07.270

您的一些问题在`for`循环内部`htable_insert()`：

1.  `return 1;`在以前的 NULL 条目中插入新条目后，您不包括在内。
2.  您的环绕代码正在修改错误的变量 ( `i`)。我认为应该是：

    ```
    if (remainder >= h->capacity - 1)
        remainder = 0;
    else
        remainder++; 
    ```

3.  您在搜索代码中也遇到了大致相同的问题。

* * *

建议：

如果你有一个相对复杂的数据结构，比如哈希表，那么值得创建（和调试）一个表单的函数`void dump_htable(FILE *fp, const char *tag, const htable h)`。该函数会将结构内容的诊断转储打印到给定文件（通常`stdout`，但有时`stderr`或日志文件），在信息前面加上`tag`这样您就可以知道输出来自哪个特定的转储函数调用。该函数还可以进行基本的验证——例如，它应该确保给它的指针不为空（尽管无论如何它都会打印出来），并且显然应该只在指针不为空时检查结构的内容。您可以在创建哈希表后立即调用此函数，并在每次插入操作后再次调用此函数。这将允许您检查代码是否按预期工作。

将函数保留在代码中；确保它是定期编译的（因此它不会过时），并在遇到哈希表问题时使用它。

* * *

## SSCCE - 工作代码

### htable.h

```
#ifndef HTABLE_H_INCLUDED
#define HTABLE_H_INCLUDED

struct htablerec {
   char **key;
   int *frequencies;
   int num_keys;
   int capacity;
};

typedef struct htablerec *htable;

extern int htable_insert(htable h, char *str);
extern htable htable_new(unsigned size);
extern int htable_search(htable h, char *str);
extern void htable_free(htable h);

#endif /* HTABLE_H_INCLUDED */ 
```

### htable.c

```
#include "htable.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

static void *emalloc(size_t size)
{
    void *space = malloc(size);
    if (space == 0)
    {
        fprintf(stderr, "Failed to allocate %zu bytes of memory\n", size);
        exit(EXIT_FAILURE);
    }
    return space;
}

static unsigned int htable_word_to_int(const char *word)
{
    unsigned int result = 0;
    while (*word != '\0')
    {
        result = (*word++ + 31 * result);
    }
    return result;
}

htable htable_new(unsigned size)
{
    htable h = emalloc(sizeof(*h));
    size_t nbytes = size * sizeof(*h->key);
    h->key = emalloc(nbytes);
    memset(h->key, '\0', nbytes);
    h->frequencies = emalloc(size * sizeof(*h->frequencies));
    h->capacity = size;
    h->num_keys = 0;
    return h;
}

void htable_free(htable h)
{
    if (h != 0)
    {
        free(h->frequencies);
        free(h->key);
        free(h);
    }
}

int htable_insert(htable h, char *str)
{
    int i;
    unsigned int index = htable_word_to_int(str);
    int remainder = index % h->capacity;

    for (i = 0; i < h->capacity; i++)
    {
        /* 1\. No string at this position */
        if (h->key[remainder] == NULL)
        {
            char *key = emalloc(strlen(str) + 1);
            strcpy(key, str);
            h->key[remainder] = key;
            h->frequencies[remainder] = 1;
            h->num_keys++;
            return 1;
        }
        /* 2\. the same string is already there */
        if (strcmp(str, h->key[remainder]) == 0)
        {
            h->frequencies[remainder]++;
            return h->frequencies[remainder];
        }
        /* 3\. Keep searching */
        if (remainder >= h->capacity - 1)
            remainder = 0;
        else
            remainder++;
    }
    /* No match and no empty spaces left - hash table is full */
    return 0;
}

int htable_search(htable h, char *str)
{
    unsigned int index = htable_word_to_int(str);
    int remainder = index % h->capacity;

    for (int i = 0; i < h->capacity; i++)
    {
        if (h->key[remainder] == NULL)
            return -1;  /* Definitively not present */
        if (strcmp(str, h->key[remainder]) == 0)
            return remainder;   /* Definitively present */
        if (remainder >= h->capacity - 1)
            remainder = 0;
        else
            remainder++;
    }
    /* Table's full and key not found */
    return -1;
} 
```

### 测试.htable.c

```
#include "htable.h"
#include <assert.h>
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>

static void dump_htable(FILE *fp, const char *tag, const htable h)
{
    fprintf(fp, "HASHTABLE: %s (0x%" PRIXPTR "\n", tag, (uintptr_t)h);
    if (h != 0)
    {
        fprintf(fp, "Capacity: %d; Number of keys: %d\n", h->capacity, h->num_keys);
        fprintf(fp, "Keys: 0x%" PRIXPTR "; Freq: 0x%" PRIXPTR "\n",
                (uintptr_t)h->key, (uintptr_t)h->frequencies);
        assert(h->key != 0 && h->frequencies != 0);
        if (h->num_keys > 0)
        {
            for (int i = 0; i < h->capacity; i++)
            {
                if (h->frequencies[i] != 0)
                {
                    assert(h->key[i] != 0);
                    fprintf(fp, "%3d: %2d  %s\n", i, h->frequencies[i], h->key[i]);
                }
            }
        }
    }
    fflush(fp);
}

int main(void)
{
    htable h = htable_new(113);
    char word[256];
    char op;

    /*We must have a space before the %c*/
    while(2 == scanf(" %c %255s", &op, word))
    {
        if ('+' ==  op)
        {
            if (htable_insert(h, word) <= 0)
                printf("Error: failed to insert %s\n", word);
            else
                dump_htable(stdout, word, h);
        }
        else if ('?' == op)
            printf("%d %s\n", htable_search(h, word), word);
        else
            printf("Bogus: %c %s\n", op, word);
    }

    htable_free(h);

    return EXIT_SUCCESS;
} 
```

### 样本输出

哈希表的最后转储 - 用于检查 - 和结果。

```
HASHTABLE: unloaded (0x10F100910
Capacity: 113; Number of keys: 50
Keys: 0x10F100930; Freq: 0x10F100CC0
  2:  1  wakes
  7:  1  necrosis
  8:  1  galleries
  9:  1  Russia
 10:  1  Georges
 11:  1  outright
 13:  1  brokers
 16:  1  factoring
 17:  1  keypad
 18:  1  Latinizers
 19:  1  rhythmically
 20:  1  binders
 27:  1  sociable
 30:  1  Riemannian
 33:  1  gentler
 38:  1  segregation
 39:  1  invalidity
 43:  1  snowily
 47:  1  cupful
 48:  1  zebras
 49:  1  Capet
 50:  1  dominating
 51:  1  unloaded
 52:  1  unsound
 53:  1  revocable
 54:  1  tied
 58:  1  combed
 59:  1  leadings
 60:  1  bran
 61:  1  contented
 62:  1  sequences
 64:  1  replaced
 69:  1  escorted
 70:  1  infringing
 71:  1  onslaught
 72:  1  tiring
 75:  1  screamer
 80:  1  admire
 84:  1  build
 87:  1  Ottawa
 92:  1  Malawi
 93:  1  kidded
 94:  1  files
 95:  1  disconnects
 96:  1  puzzles
 97:  1  attendances
103:  1  diversification
104:  1  digressed
111:  1  swarthy
112:  1  thickness
-1 insincere
-1 constants
-1 unordered
-1 Toland
-1 butterfly
-1 suburban
-1 overtone
-1 Hauser
-1 numbers
-1 disadvantageous
-1 saintly
-1 Dutton
-1 homomorphic
-1 corporation
-1 climaxes
-1 dietitian
-1 manifestly
-1 greyest
-1 challenge
-1 tentacle
-1 Bernice
-1 bottle
-1 involve
-1 resisted
-1 wholesale
-1 trustworthiness
-1 Poole
-1 fourfold
-1 relentlessly
-1 fittingly
-1 doctorates
-1 cowlick
-1 Missoula
-1 curtsy
-1 calmness
-1 reallocate
-1 bossed
-1 scarce
-1 catheters
-1 regained
-1 autographing
-1 unobservable
-1 apprise
-1 lancer
-1 chicken
-1 crunches
-1 scrambled
-1 reared
-1 pealing
-1 violate
27 sociable
8 galleries
9 Russia
75 screamer
112 thickness
58 combed
69 escorted
53 revocable
104 digressed
92 Malawi
70 infringing
71 onslaught
94 files
93 kidded
52 unsound
54 tied
87 Ottawa
96 puzzles
84 build
7 necrosis
80 admire
47 cupful
13 brokers
38 segregation
49 Capet
10 Georges
60 bran
20 binders
48 zebras
61 contented
17 keypad
43 snowily
64 replaced
50 dominating
11 outright
18 Latinizers
39 invalidity
2 wakes
103 diversification
30 Riemannian
59 leadings
19 rhythmically
33 gentler
111 swarthy
95 disconnects
16 factoring
62 sequences
72 tiring
97 attendances
51 unloaded 
```

# zend-framework - 如何使用带有 Zend 框架的 headScript 添加脚本文件？

> ID：12208033
> 
> 赞同：2
> 
> 时间：2012-08-31T02:07:00.067
> 
> 标签：zend-framework, layout, head

我正在开发一个新的 zend 框架应用程序，当我刚刚为我的 layout.phtml 文件和 Bootstrap _initScript 方法硬编码 headScript 部分时，在没有加载脚本后查看源代码时......真的很奇怪结果。

我懂了：

```
<script type="text/javascript">
    //<!--
    /js/jquery-1.8.1.min.js    //--> 
```

这是我的 layout.phtml 代码：

```
<?php echo $this->doctype(); ?> 
<html>
    <head>
        <?php echo $this->headTitle(); ?>
        <?php echo $this->headLink(); ?>
        <?php echo $this->headScript(); ?>
    </head>
    <body>
        <?php echo $this->layout()->content; ?>
    </body> 
</html> 
```

这是我的 Bootstrap.php 代码：

```
protected function _initScript()
{
    $this->view->headScript()
       ->prependScript( "/js/jquery-1.8.1.min.js" );
} 
```

如您所见，这是非常普通的代码！

任何人都可以帮助我找出这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T05:29:03.233

您正在尝试添加“文件”而不是“脚本”。

将 Bootstrap.php 更改为：

```
protected function _initScript()
{
    $this->view->headScript()
       ->prependFile( "/js/jquery-1.8.1.min.js", $type = 'text/javascript' );
} 
```

还要检查这个以获取[headScript 参考](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)。

任何问题？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T06:51:55.000

我发现在设置视图时，通常最好获取视图对象，设置占位符值，然后返回视图，例如：

```
protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();  

        //set doctype for default layout
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);

        //set css includes
        $view->headLink()->setStylesheet('/css/normalize.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/liquid.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/typography.css');

        //add javascript files
        $view->headScript()->setFile('/javascript/modernizr.js');
        $view->headScript()->appendFile('/javascript/jquery.js');

        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);

        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

我不确定`$this->view->`引导程序的语法效果如何，但我怀疑它有一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:24:43.897

我使用 Zendx_jQuery 组件 (http://framework.zend.com/manual/1.11/en/zendx.jquery.html)，我觉得它很方便，尤其是当您在表单中使用 jQuery UI 时。

在 Bootstrap.php 中：

```
protected function _initjQuery()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper_');
    return $view;
} 
```

在我的布局 html 标题中：

```
$this->jQuery()->setLocalPath($this->baseUrl('js/libs/jquery-1.7.2.min.js'))
        ->setUiLocalPath($this->baseUrl('js/libs/jquery-ui-1.8.20.custom.min.js'))
        ->addStylesheet($this->baseUrl('css/ui-lightness/jquery-ui-1.8.20.custom.css'))
        ->enable()
        ->uiEnable();

/* I only print jquery css in the header */
<?= $this->jQuery()->setRenderMode(ZendX_JQuery::RENDER_STYLESHEETS); ?> 
```

在我的布局正文底部：

```
<?= $this->jQuery()->setRenderMode(ZendX_JQuery::RENDER_LIBRARY | ZendX_JQuery::RENDER_SOURCES | ZendX_JQuery::RENDER_JAVASCRIPT | ZendX_JQuery::RENDER_JQUERY_ON_LOAD); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T15:29:16.763

试试这个：

```
<?php

$this->headTitle('Your title');
$this->headScript()->headScript()->prependFile('/js/jquery.js');
$this->headLink()->appendStylesheet('/css/yourcss.css');

echo $this->doctype();
?>

<html>
<head>
    <?php echo $this->headTitle(); ?>
    <?php echo $this->headLink(); ?>
    <?php echo $this->headScript(); ?>
</head>
<body>
    <?php echo $this->layout()->content; ?>
</body> 
```

# ruby-on-rails - 为什么我的删除链接在 Google Chrome 中不起作用？

> ID：12208034
> 
> 赞同：0
> 
> 时间：2012-08-31T02:07:09.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我刚刚升级到 rails`3.2.8`和 devise `2.1.2`，完全擦除了我的 User 模型以使用新的迁移和设置。不过，我保留了我的旧观点并开始测试我的用户链接以销毁/删除他们自己的帐户。现在我在 Firefox 中对此进行了测试，它没有错误，打开确认框并在确认后删除帐户。在谷歌浏览器中，虽然我没有得到确认框，但它直接进入：

```
Routing Error
No route matches [GET] "/users" 
```

这是我的链接，应该是：

```
 Unhappy? <%= link_to "Delete my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>. 
```

还有人有这种疯狂吗？为什么它不适用于此浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:48:50.297

你应该看到：

```
edit_user_registration   GET    /users/edit(.:format)            devise/registrations#edit
                         PUT    /users(.:format)                 devise/registrations#update
                         DELETE /users(.:format)                 devise/registrations#destroy 
```

当您在项目目录中运行“rake routes”时。

尝试更改`"user_registration_path"`为`"edit_user_registration_path"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:59:56.130

必须更改我的路线才能正确。

```
devise_for :users, :controllers => { :registrations => 'registrations' }
  devise_scope :user do
    get 'join' => 'devise/registrations#new', :as => :new_user_registration
    put 'join' => 'devise/registrations#create', :as => :user_registration
    get 'login' => 'devise/sessions#new', :as => :new_user_session
    post 'login' => 'devise/sessions#create', :as => :user_session
    delete 'logout' => 'devise/sessions#destroy', :as => :destroy_user_session
    get 'account_settings' => 'devise/registrations#edit', :as => :edit_user_registration
    put 'account_settings' => 'devise/registrations#update', :as => :update_user_registration
    get 'forgot_password' => 'devise/passwords#new', :as => :new_user_password
    get 'user', :to => 'user_pages#home', :as => :user_root
  end

  match '/user' => 'user_pages#home', :as => :user_root 
```

并添加到列表中：

```
delete 'join' => 'devise/registrations#destroy', :as => :user_registration 
```

也可能是我从头开始重新编写了整个应用程序。

# sms - 如何在 SMS 消息中包含特殊字符？

> ID：12208036
> 
> 赞同：4
> 
> 时间：2012-08-31T02:07:42.883
> 
> 标签：sms, special-characters, gsm

我正在运行 minicom 来测试通过 GSM 调制解调器发送 SMS 消息。

调制解调器设置是这样的

```
AT+CSCS?
+CSCS: "IRA"

OK
AT+CMGF?
+CMGF: 1

OK 
```

TE 字符集是 IRA，调制解调器处于文本模式。

我只需要发送从 dec 值 32 到 126 的 ASCII 字符。但是，我发现发送像“\”或“^”这样的简单字符会导致 +CMS 错误：305（文本模式参数值无效。）

```
AT+CMGS="+1xxxxxxxxxx"
> \

+CMS ERROR: 305 
```

任何人都知道如何在 SMS 消息中转义这些特殊字符？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T08:43:30.257

```
at^hcmgs="da" CR
message
ctrl+z 
```

我测试一下

# android - Android子视图高度与ListView项目中的父级不匹配

> ID：12208037
> 
> 赞同：11
> 
> 时间：2012-08-31T02:07:47.443
> 
> 标签：android, android-listview, android-framelayout

如前所述，我的 List 项是 a `FrameLayout`，里面有两个视图。

`ColorView`是我为在整个视图中显示颜色而制作的自定义视图。

（`FrameLayout`的高度是“wrap_content”）

它似乎在我的 ICS 设备上运行良好，但不适用于我的 Android 2.2 模拟器和 Android 1.6 G1。

![集成电路](../Images/2cea5ca008b31be7c93c2038341c4185.png)

![甜甜圈](../Images/df54a7ac7685c686d506f42867caa2e5.png)

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <org.mariotaku.twidere.view.ColorView
        android:id="@+id/status_background"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:background="@drawable/ic_label_user"/>

    <RelativeLayout
        android:id="@+id/status_content"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="6dp"
        android:paddingRight="6dp"
        android:paddingTop="6dp">

        <org.mariotaku.twidere.view.RoundCorneredImageView
            android:id="@+id/profile_image"
            android:layout_width="@dimen/profile_image_size"
            android:layout_height="@dimen/profile_image_size"
            android:layout_marginLeft="6dp"
            android:scaleType="fitCenter"/>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_marginLeft="6dp"
            android:layout_toLeftOf="@+id/time"
            android:layout_toRightOf="@+id/profile_image"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorPrimary"
            android:textStyle="bold"/>

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/name"
            android:layout_alignParentRight="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_below="@+id/name"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary"/>

        <TextView
            android:id="@+id/time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/name"
            android:layout_alignParentRight="true"
            android:layout_alignWithParentIfMissing="true"
            android:drawablePadding="3dp"
            android:gravity="center_vertical|right"
            android:textColor="?android:attr/textColorSecondary"/>

        <ImageView
            android:id="@+id/image_preview"
            android:layout_width="@dimen/preview_image_size"
            android:layout_height="@dimen/preview_image_size"
            android:layout_alignWithParentIfMissing="true"
            android:layout_below="@+id/text"
            android:layout_marginLeft="16dp"
            android:layout_marginTop="3dp"
            android:layout_toRightOf="@+id/profile_image"
            android:background="@drawable/image_preview_background"
            android:drawablePadding="3dp"
            android:scaleType="fitCenter"
            android:visibility="gone"/>

        <TextView
            android:id="@+id/reply_retweet_status"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignWithParentIfMissing="true"
            android:layout_below="@+id/image_preview"
            android:layout_toRightOf="@+id/profile_image"
            android:drawablePadding="3dp"
            android:paddingLeft="6dp"
            android:paddingTop="3dp"
            android:textColor="?android:attr/textColorSecondary"/>
    </RelativeLayout>

    <TextView
        android:id="@+id/list_gap_text"
        android:layout_width="wrap_content"
        android:layout_height="48dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/tap_to_load_more"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:visibility="gone"/>

</FrameLayout> 
```

它有任何解决方法或其他方法来解决这个问题吗？

编辑

代码`ColorView`

```
package org.mariotaku.twidere.view;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.View;

public class ColorView extends View {

    private int mColor = Color.TRANSPARENT;

    public ColorView(Context context) {
        this(context, null);
    }

    public ColorView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ColorView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setColor(int color) {
        mColor = color;
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(mColor);
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-15T03:17:12.957

我们只需要处理类似的问题。我们注意到，在属于 ListView 项的一部分的视图上使用 match_height 不会按预期工作。以下代码应该可以工作：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/color_bar" >

        <!-- Put the content views of your item here. You do not have to use frame layout, it can be any kind of view. -->

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="8dp"
            android:text="@string/app_name" />
    </FrameLayout>

    <View
        android:id="@id/color_bar"
        android:layout_width="10dp"
        android:layout_height="match_parent"
        android:layout_alignBottom="@id/content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/content"
        android:background="@android:color/darker_gray" />

</RelativeLayout> 
```

诀窍基本上是将彩色视图与内容视图的顶部和底部对齐。无论内容的高度是多少，都会被彩色视图采用。

附带说明一下，如[Android 文档](http://developer.android.com/reference/android/widget/FrameLayout.html)中所述，您不应使用 FrameLayout 来包含多个孩子。

**编辑**

我的同事让我注意到，如果我们使用 LinearLayout 作为列表视图项的根元素，match_parent 会按预期工作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/content"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="8dp"
        android:text="@string/app_name" />

    <View
        android:id="@+id/color_bar"
        android:layout_width="10dp"
        android:layout_height="match_parent"
        android:background="@android:color/darker_gray" />

</LinearLayout> 
```

我在装有 Android 2.2 的设备上对此进行了测试，它工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T11:36:06.043

太伤心了，没人知道怎么处理。

但最后我使用了一种解决方法来解决这个问题。

新布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<org.mariotaku.twidere.view.ColorLabelRelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="6dp">

    <org.mariotaku.twidere.view.RoundCorneredImageView
        android:id="@+id/profile_image"
        android:layout_width="@dimen/profile_image_size"
        android:layout_height="@dimen/profile_image_size"
        android:scaleType="fitCenter"/>

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignWithParentIfMissing="true"
        android:layout_marginLeft="3dp"
        android:layout_toLeftOf="@+id/time"
        android:layout_toRightOf="@+id/profile_image"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="?android:attr/textColorPrimary"
        android:textStyle="bold"/>

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/name"
        android:layout_alignParentRight="true"
        android:layout_alignWithParentIfMissing="true"
        android:layout_below="@+id/name"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="?android:attr/textColorSecondary"/>

    <TextView
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/name"
        android:layout_alignParentRight="true"
        android:layout_alignWithParentIfMissing="true"
        android:drawablePadding="3dp"
        android:gravity="center_vertical|right"
        android:textColor="?android:attr/textColorSecondary"/>

    <ImageView
        android:id="@+id/image_preview"
        android:layout_width="@dimen/preview_image_size"
        android:layout_height="@dimen/preview_image_size"
        android:layout_alignWithParentIfMissing="true"
        android:layout_below="@+id/text"
        android:layout_marginLeft="16dp"
        android:layout_marginTop="3dp"
        android:layout_toRightOf="@+id/profile_image"
        android:background="@drawable/image_preview_background"
        android:drawablePadding="3dp"
        android:scaleType="fitCenter"
        android:visibility="gone"/>

    <TextView
        android:id="@+id/reply_retweet_status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignWithParentIfMissing="true"
        android:layout_below="@+id/image_preview"
        android:layout_toRightOf="@+id/profile_image"
        android:drawablePadding="3dp"
        android:paddingLeft="6dp"
        android:paddingTop="3dp"
        android:textColor="?android:attr/textColorSecondary"/>

    <TextView
        android:id="@+id/list_gap_text"
        android:layout_width="wrap_content"
        android:layout_height="42dp"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:text="@string/tap_to_load_more"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:visibility="gone"/>

</org.mariotaku.twidere.view.ColorLabelRelativeLayout> 
```

代码`ColorLabelRelativeLayout`：

```
/*
 *              Twidere - Twitter client for Android
 * 
 * Copyright (C) 2012 Mariotaku Lee <mariotaku.lee@gmail.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

package org.mariotaku.twidere.view;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.RelativeLayout;

public class ColorLabelRelativeLayout extends RelativeLayout {

    private final Paint mPaintLeft = new Paint(), mPaintRight = new Paint(), mPaintBackground = new Paint();
    private final Rect mRectLeft = new Rect(), mRectRight = new Rect(), mRectBackground = new Rect();
    private final float mDensity;       

    public ColorLabelRelativeLayout(Context context) {
        this(context, null);
    }

    public ColorLabelRelativeLayout(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ColorLabelRelativeLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setWillNotDraw(false);
        mDensity = context.getResources().getDisplayMetrics().density;
        mPaintLeft.setColor(Color.TRANSPARENT);
        mPaintRight.setColor(Color.TRANSPARENT);
        mPaintBackground.setColor(Color.TRANSPARENT);
    }

    public void drawLabel(int left, int right, int background) {
        mPaintBackground.setColor(background);
        mPaintLeft.setColor(left);
        mPaintRight.setColor(right);
        invalidate();
    }

    public void drawLeft(int color) {
        drawLabel(color, mPaintRight.getColor(), mPaintBackground.getColor());
    }

    public void drawRight(int color) {
        drawLabel(mPaintLeft.getColor(), color, mPaintBackground.getColor());
    }

    public void drawBackground(int color) {
        drawLabel(mPaintLeft.getColor(), mPaintRight.getColor(), color);
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawRect(mRectBackground, mPaintBackground);
        canvas.drawRect(mRectLeft, mPaintLeft);
        canvas.drawRect(mRectRight, mPaintRight);
        super.onDraw(canvas);
    }

    @Override
    public void onSizeChanged(int w, int h, int oldw, int oldh) {
        mRectBackground.set(0, 0, w, h);
        mRectLeft.set(0, 0, (int)(4 * mDensity), h);
        mRectRight.set(w - (int)(4 * mDensity), 0, w, h);
        super.onSizeChanged(w, h, oldw, oldh);
    }
} 
```

它对我来说真的很好用。

![G1截图](../Images/a46720aceea21bf346ea87af7cc62cf4.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:15:10.787

是否需要使用`ColorView`? 我问这个是因为如果你不将它用于其他任何事情，那么使用它只是一种浪费。您有父`FrameLayout`级，您应该将在 上使用的可绘制对象设置`ColorView`为父级的背景`FrameLayout`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T05:38:32.583

@softlete 答案的更新：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent">

    <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dp">

    <RelativeLayout
        android:id="@+id/messageContent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_marginRight="20dp"
        android:layout_marginLeft="20dp"
        android:padding="5dp"
        android:background="@drawable/message_bg">

        <TextView
            android:id="@+id/message"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginRight="20dp"
            android:text="un mensaje supremamente largo debe ir aqui para probar el layout"
            android:textColor="@android:color/black"
            android:textSize="16dp"/>

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/imageContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:paddingTop="10dp"
        android:paddingBottom="10dp">

        <de.hdodenhof.circleimageview.CircleImageView
            android:id="@+id/image"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:src="@drawable/com_facebook_profile_default_icon" />

    </RelativeLayout>

    </RelativeLayout>

</LinearLayout> 
```

“最小高度”由边距（顶部+底部）`@+id/imageContainer`加上+高度给出`@+id/image`（可以使用您想要的任何视图/布局）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T06:59:26.843

创建自定义布局扩展 FrameLayout 或其他布局，然后覆盖 onLayout 方法。

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);

    Log.d("onLayout", getWidth() + "x" + getHeight());

    final View statusView = findViewById(R.id.status_background);
    if (statusView.getVisibility() == VISIBLE) {
        final LayoutParams p = (LayoutParams) statusView.getLayoutParams();
        if (p.width != getWidth() || p.height != getHeight()) {
            p.width = getWidth();
            p.height = getHeight();
            statusView.post(new Runnable() {
                @Override
                public void run() {
                    statusView.setLayoutParams(p);
                }
            });
        }
    }
} 
```

# javascript - 如何使用原型进行自定义方法和对象操作

> ID：12208040
> 
> 赞同：0
> 
> 时间：2012-08-31T02:08:10.870
> 
> 标签：javascript, prototype

老实说，我正在尝试理解 JavaScript 原型，但并没有取得太大进展。我不完全确定如何解释我正在尝试做什么，除了说我的最终目标部分是学习如何遍历类似于 jQuery 的 DOM 并添加自定义方法来操作正在访问的特定元素。

**编辑：**下面的代码已经更新，以反映我从迄今为止收到的答案中学到的概念，并显示那些没有达到我想要完成的目标。

```
function A(id) {
    "use strict";
    this.elem = document.getElementById(id);
}
A.prototype.insert = function (text) {
    "use strict";
    this.elem.innerHTML = text;
};

var $A = function (id) {
    "use strict";
    return new A(id);
};

var $B = function (id) {
    "use strict";
    return document.getElementById(id);
};

function init() {
    "use strict";
    $A('para1').insert('text goes here'); //this works
    $A('para1').innerHTML = 'text goes here';  //this does not work
    console.log($A('para1')); //returns the object A from which $A was constructed
    console.log($B('para1')); //returns the dom element... this is what I want

    /*I want to have $A('para1').insert(''); work and $A('para1').innerHTML = '';
      work the same way that $B('para1').innerHTML = ''; works and still be able
      to add additional properties and methods down the road that will be able
      act directly on the DOM element that is contained as $A(id) while also
      being able to use the properties and methods already available within
      JavaScript*/
}
window.onload = init; 
```

在可能的情况下，请解释为什么您的代码有效，以及为什么您认为这是实现此目的的最佳方法。

**注意：**我查询的全部目的是自学……请不要建议使用 jQuery，它违背了目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:27:07.743

尝试这个。

```
var getDOM= function(id) {
  this.element= document.getElementById(id);
}

getDOM.prototype.insert= function(content) {
  this.element.innerHTML= content;
}

var $= function(id) {
  return new getDOM(id);
};

$('id').insert('Hello World!'); // can now insert 'Hello World!' into document.getElementById('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:59:23.050

```
var $ = function(id) {  
    return new My_jquery(id);  
}  

function My_jquery(id) { 
    this.elem = document.getElementById(id);
}

My_jquery.prototype = {
   insert : function(text) { this.elem.innerHtml = text; return this;}
}

$('para1').insert('hello world').insert('chaining works too'); 
```

在 My_jquery.prototype 中添加您想要对 elem 进行操作的任何方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:04:13.167

您可以使用如下方案：

```
function $(id) {
  return new DOMNode(id);
}

function DOMNode(id) {
  this.element = document.getElementById(id);
}

DOMNode.prototype.insert = function(value) {

  if (value) {

    // If value is a string, assume its markup
    if (typeof value == 'string') {
      this.element.innerHTML = value;

    // Otherwise assume it's an object
    } else {

      // If it's a DOM object
      if (typeof value.nodeName == 'string') {
        this.element.appendChild(value);

      // If it's a DOMNode object
      } else if (this.constructor == DOMNode) {
        this.element.appendChild(value.element);
      }
    }
  } // If all fails, do nothing
}

$('id').insert('foo bar'); 
```

一些玩的东西：

```
<div id="d0">d0</div>
<div id="d1">d1</div>
<div id="d2">d2</div>

<script>
// insert (replace content with) string, may or may not be HTML
$('d0').insert('<b>foo bar</b>');

// insert DOMNode object
$('d0').insert($('d1'));

// Insert DOM element
$('d0').insert(document.getElementById('d2'));

</script> 
```

您可能会发现研究[MyLibrary](http://www.cinsoft.net/mylib.html)的工作原理很有用，它有一些非常好的实践和模式。

# r - R readHTMLTable() 函数错误

> ID：12208043
> 
> 赞同：0
> 
> 时间：2012-08-31T02:08:36.370
> 
> 标签：r, html-parsing, web-scraping

尝试使用`readHTMLTable`R 包 XML 中的函数时遇到问题。跑步时

```
library(XML)
baseurl <- "http://www.pro-football-reference.com/teams/"
team <- "nwe"
year <- 2011
theurl <- paste(baseurl,team,"/",year,".htm",sep="")

readurl <- getURL(theurl)
readtable <- readHTMLTable(readurl) 
```

我收到错误消息：

```
Error in names(ans) = header : 
'names' attribute [27] must be the same length as the vector [21] 
```

我正在通过 R Studio 0.96.330 运行 64 位 R 2.15.1。似乎还有其他几个关于 readHTMLTable() 函数的问题，但没有一个解决这个特定问题。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:03:49.240

当`readHTMLTable()`抱怨 'names' 属性时，可以肯定的是，它在将数据与为标题值解析的内容匹配时遇到了问题。解决此问题的最简单方法是完全关闭标头解析：

```
table.list <- readHTMLTable(theurl, header=F) 
```

请注意，我将返回值的名称从“readtable”更改为“table.list”。（我也跳过了这个`getURL()`电话，因为 1\. 它对我不起作用， 2\. readHTMLTable() 知道如何处理 URL）。更改的原因是，如果没有进一步的指示，`readHTMLTable()`它将搜索并解析它可以在给定页面上找到的每个 HTML 表，返回一个包含每个数据帧的列表。

您发送后的页面相当丰富，有8个单独的表格：

```
> length(table.list)
[1] 8 
```

如果您只对页面上的单个表格感兴趣，您可以使用该`which`属性来指定它并直接将其内容作为 data.frame 接收。

如果它卡在您不感兴趣的表格上，这也可以解决您最初的问题。许多页面仍然使用表格进行导航、搜索框等，因此值得先看一下该页面。

但在您的示例中不太可能出现这种情况，因为它实际上扼杀了除其中一个之外的所有内容。万一星星对齐并且您只对页面上成功启动的第三个表感兴趣（传递统计信息），您可以像这样抓住它，保持标题解析：

```
> passing.df = readHTMLTable(theurl, which=3)
> print(passing.df)
  No.             Age Pos  G GS  QBrec Cmp Att  Cmp%  Yds TD TD% Int Int% Lng  Y/A AY/A  Y/C   Y/G  Rate Sk Yds NY/A  ANY/A Sk% 4QC GWD
1  12  Tom Brady*  34  QB 16 16 13-3-0 401 611  65.6 5235 39 6.4  12  2.0  99  8.6  9.0 13.1 327.2 105.6 32 173  7.9   8.2 5.0   2   3
2   8 Brian Hoyer  26      3  0          1   1 100.0   22  0 0.0   0  0.0  22 22.0 22.0 22.0   7.3 118.7  0   0 22.0  22.0 0.0 
```

# python - 正则表达式可选匹配运算符：如何应用于字符串？

> ID：12208049
> 
> 赞同：1
> 
> 时间：2012-08-31T02:10:16.100
> 
> 标签：python, ruby, regex, perl

尝试应用以下正则表达式时遇到问题：

`(1234).*?(abcd)?`

到下面的字符串：

`1234567abcd`

我的期望是上面应该产生两个匹配：

1.  1234
2.  A B C D

但是，这不起作用。您可能会建议“好吧，只需删除尾随`?`字符？” - 但我希望这第二种模式是可选的。

这是怎么做到的？

重申：

`(1234).*?(abcd)`

... 给出了想要的结果，但我搜索的字符串并不总是包含`abcd`.

如果有人想知道，这是一个大图问题的简化示例。如果需要，我会解释。

====

我认为这个问题需要进一步澄清。这是我在 ruby​​ 中尝试做的更完整的示例。

鉴于我的日志文件中的以下两个“篡改”行：

```
Aug 28 00:00:05 app-system-1 app-prod[7660]: Completed 200 OK in 150ms (Views: 24.6ms | ActiveRecord: 66.1ms)
Aug 28 00:05:06 app-system-1 app-prod[10639]: Completed 302 Found in 81ms (ActiveRecord: 74.6ms) 
```

我试图在 ruby​​ 中编译一个正则表达式，如下所示：

```
d=Regexp.new('(?<timestamp>\w{1,3}\s\d{1,2}\s\d\d:\d\d:\d\d).*(?<in>in [0-9]*).*(?<views>Views: [0-9]*).*(?<activerecord>ActiveRecord: [0-9]*)') 
```

显然，在某些情况下，“视图”文本将包含在内，而在其他行中，则不存在。

我希望能够做类似的事情：

```
v=d.match(line)
if !v.nil?
    puts v[:timestamp]+ " " + v[:in] + " " + v[:views] + " " + v[:activerecord] 
```

这显然是一个不完整的例子，但希望这可以澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:20:04.543

您没有具体说明您想要什么，至少没有明确说明，但我认为您需要以下内容：

*   当`...1234567abcd...`作为输入给出时，`1234567abcd`应该匹配，`1234`并且`abcd`应该被捕获。
*   当`...1234567abce...`作为输入给出时，`1234`应该匹配，`1234`应该被捕获。

如果是这样，您可以使用：

```
/(1234)(?:.*?(abcd))?/s 
```

我讨厌使用贪婪修饰符。它用于避免匹配某些序列，但不能保证它不会。我会改用以下内容：

```
/
   (1234)
   (?:
      (?:(?!abcd).)*    # Safer than .*?
      (abcd)
   )?
/sx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:30:37.367

类似于 ikegami 但我认为更简单：

```
/(1234)(?:(?!abcd).)*(abcd)?/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T02:18:15.447

锚定正则表达式有效：

```
/(1234).*?(abcd)?$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T02:14:12.497

因为`(a|)`大致相当于`(a)?`我们可以使用：

```
(1234).*?(abcd|) 
```

强制正则表达式引擎检查第`abcd`一个。可选规则的默认设置`?`是假设它不存在（相当于`(|abcd)`）。此默认行为对于确保正则表达式终止（更快）很重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T04:22:29.227

你真的应该分步进行。

```
if (my ($ts, $dur, $breakdown) = /
   ^
   (\w{3}[ ]\d{1,2}[ ]\d\d:\d\d:\d\d)
   .*?
   in[ ]([0-9]*)ms
   .*?
   \( ([^()]*) \)
/xs) {
   my %breakdown = map /^([^:]+): (.*)ms/, split /\s*\|\s*/, $breakdown;
   say join ', ',
      $ts,
      $dur,
      $breakdown{Views} // '--',
      $breakdown{ActiveRecord} // '--';
} 
```

# graph - gnuplot 图例重叠图

> ID：12208054
> 
> 赞同：47
> 
> 时间：2012-08-31T02:10:37.897
> 
> 标签：graph, gnuplot

本质上，我遇到的问题是图例与我试图绘制的 gnuplot 图重叠，如下图所示。

![计时](../Images/29f5c6c44294854ab4a9d63f2da39ff2.png)

以下是我用来绘制数据的命令。

```
> set log y
> plot "datafile1.txt" using 2:4 with lines,
  "datafile1.txt" using 2:6 with lines,
  "datafile2.txt" using 2:4 with lines,
  "datafile2.txt" using 2:6 with lines 
```

以下是我用来绘制数据的数据文件 1 的一部分。

```
Dimension:  259 Timing: 36111 seconds,  9 seconds
Dimension:  260 Timing: 37860 seconds,  9 seconds
Dimension:  261 Timing: 39477 seconds,  6 seconds
Dimension:  262 Timing: 41215 seconds,  5 seconds
Dimension:  263 Timing: 41827 seconds,  5 seconds
Dimension:  264 Timing: 42738 seconds,  11 seconds
Dimension:  265 Timing: 42972 seconds,  14 seconds
Dimension:  266 Timing: 44138 seconds,  10 seconds
Dimension:  267 Timing: 45210 seconds,  11 seconds
Dimension:  268 Timing: 46508 seconds,  9 seconds
Dimension:  269 Timing: 51120 seconds,  15 seconds
Dimension:  270 Timing: 49352 seconds,  6 seconds
Dimension:  271 Timing: 50456 seconds,  9 seconds
Dimension:  272 Timing: 52379 seconds,  16 seconds
Dimension:  273 Timing: 52354 seconds,  16 seconds 
```

以下是我用来绘制数据的数据文件 2 的一部分。

```
Dimension:  269 Timing: 32507 seconds,  2 seconds
Dimension:  270 Timing: 33064 seconds,  4 seconds
Dimension:  271 Timing: 33590 seconds,  6 seconds
Dimension:  272 Timing: 33703 seconds,  3 seconds
Dimension:  273 Timing: 34616 seconds,  3 seconds
Dimension:  274 Timing: 36113 seconds,  4 seconds
Dimension:  275 Timing: 36477 seconds,  4 seconds
Dimension:  276 Timing: 37000 seconds,  2 seconds
Dimension:  277 Timing: 37872 seconds,  3 seconds
Dimension:  278 Timing: 42290 seconds,  6 seconds
Dimension:  279 Timing: 39862 seconds,  7 seconds
Dimension:  280 Timing: 40184 seconds,  7 seconds
Dimension:  281 Timing: 41229 seconds,  4 seconds
Dimension:  282 Timing: 43221 seconds,  3 seconds
Dimension:  283 Timing: 42706 seconds,  7 seconds 
```

任何有关如何克服此问题的帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-31T02:13:05.283

如果你想完全关闭它：

```
gnuplot> set nokey 
```

如果要移动图例，可以使用

```
gnuplot> set key left top 
```

将其移动到左上角。如果要在图例中为线条赋予更有意义的名称，请`title`在生成绘图时使用关键字：

```
gnuplot> plot "datafile1.txt" using 2:4 with lines title "data",
.... 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-12T01:03:13.697

您可以将图例移到绘图区域之外，那么它们肯定不会重叠：

```
gnuplot> set key outside 
```

有关图例或键位置的更多选项，请参见此处：http: [//gnuplot.sourceforge.net/docs_4.2/node192.html](http://gnuplot.sourceforge.net/docs_4.2/node192.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-11-21T22:21:46.937

您可以通过提供一组坐标来控制键的位置：

```
set key at 25., 5000. 
```

这些值对应于数据坐标系。或者，您可以指定*图形*坐标：

```
set key at graph 0.1, 0.9 
```

（靠近左上角位置）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-04T18:12:30.750

使用 gnuplot 5.2 版或更高版本，您可以使用

```
set key at x, y 
```

其中`x`和`y`分别是 x 轴和 y 轴的值

# c# - 如何显示动态生成的图像

> ID：12208059
> 
> 赞同：2
> 
> 时间：2012-08-31T02:11:07.987
> 
> 标签：c#, .net, asp.net-mvc-3

我使用以下方法创建一些图像。

我的问题是如何在**.cshtml**页面（MVC3）中显示它？我必须使用哪种**Razor 语法？**

```
public FileContentResult DisplayFont()
        {
            int fontSize = 12;

            string fontName = "Arial";

            System.Drawing.Font rectangleFont = new System.Drawing.Font(fontName, fontSize, FontStyle.Bold);

            int height = 150;

            int width = 250;

            Bitmap bitmap = new Bitmap(width, height, PixelFormat.Format24bppRgb);

            Graphics g = Graphics.FromImage(bitmap);

            g.SmoothingMode = SmoothingMode.AntiAlias;

            Color backgroundColor = Color.White;

            g.Clear(backgroundColor);

            g.DrawString(fontName, rectangleFont,SystemBrushes.WindowText, new PointF(10, 40));

            MemoryStream outputStream = new MemoryStream();

            bitmap.Save(outputStream,  ImageFormat.Jpeg);

            byte[] byteArray = outputStream.ToArray();  

            g.Dispose();

            bitmap.Dispose(); 

            return new FileContentResult(byteArray, "image/jpeg");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:22:58.510

您可以使用普通的 HTML`img`标记，使用您的`DisplayFont`操作的 URL 来呈现它：

```
<img src='@Url.Action("DisplayFont")' /> 
```

# ios - 在选择 UIPickerview - iOS 上禁用第 0 行

> ID：12208060
> 
> 赞同：0
> 
> 时间：2012-08-31T02:11:11.640
> 
> 标签：ios, xcode, uipickerview

我正在尝试禁用 UIPickerView 上的第 1 行，但它会引发以下错误

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 2147483647 beyond bounds [0 .. 15]' 
```

任何人都可以建议我这里出了什么问题？这是代码

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{   
   AppDelegate *appdelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
   if ((row > 0)){
        NSLog(@"%@",[locationArray objectAtIndex:row]);

        if(flag){

        appdelegate.selectedLocation = [locationArray objectAtIndex:row];
        NSLog(@"%@",appdelegate.selectedLocation);

       }  else{

        appdelegate.selectedLocation = [locationArray objectAtIndex:row];
        NSLog(@"%@",appdelegate.selectedLocation);

    }
        [promptLocation addSubview:tapButton];
        [tapButton addTarget:self action:@selector(goToDesireLoc:) forControlEvents:UIControlEventTouchUpInside];
   }else{
    //Don't do anything if row 0 is chosen.
    NSLog(@"do nothing");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:40:32.527

我建议您添加异常断点，以便您可以查看导致崩溃的代码行。请参阅此处了解如何操作：stackoverflow.com/q/4961770/472344。

这应该会导致您的代码在导致崩溃的行中断。您可以检查“row”的值和“locationArray”的大小。

看起来你的行是 2147483647 并且你的数组的长度是 16。所以我猜你的 UIPickerView 数据源可能有问题。也许发布您的代码：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component 
```

您还可以在该方法中设置一个断点，以确保它被正确调用，并检查它返回的值。

# c++ - 8 个布尔值与 1 个整数

> ID：12208067
> 
> 赞同：1
> 
> 时间：2012-08-31T02:12:31.390
> 
> 标签：c++, sizeof

A`bool`在 C++ 中占用 1 个字节。但是，为什么 a`bool[8]`需要 8 个字节而不是 1 个字节？一个字节有足够的空间容纳 8 位。

`-Os`我使用标志用 GCC 编译了这个：

```
#include <iostream>

using namespace std;

class Foo
{
    public:
        bool m_bool[8];
};

int main ()
{
    cout << "Size: " << sizeof(Foo) << " byte(s) " << endl;

   return 0;
} 
```

它返回“大小：8 字节”。

有没有办法优化它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:32:28.810

编译器必须允许您获取各个布尔值的地址，例如

```
Foo foo;
bool* p = &foo.m_bool[0];
bool* q = &foo.m_bool[1]; 
```

如果布尔值被打包，p 和 q 会是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T02:25:32.367

首先 bool 的大小不能保证为 1。其次，当您将 8 个组合在一起时，为什么您仍然希望结果为 1？

8 x 1 = 8

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T02:29:30.390

由于我在上面的评论中没有看到它，所以我会提到一个概念来回应“有没有办法优化它？” 如果你还没有使用它。它被称为*bitmasking*，您基本上将*int*用作一系列位，并使用*按位运算*符来评估整数中的各个位。

为了方便地适当地设置字符串中的位，通常定义一些在语义上命名的常量并设置为 2 的幂的值（这样它们只会“翻转”一位。您可以轻松地使用位移*运算*符来明确哪个位被翻转：

```
#define IS_ADMIN = 1<<0;
#defing CLEAR_CACHE = 1<<1; 
```

然后你像这样测试管理员：

```
if(userSettings & IS_ADMIN) { ... 
```

这是一个起点[wiki 文章](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T02:29:39.307

“有办法优化吗？”

您确定优化会有益吗？您可以使用枚举作为标志而不是布尔值来将它们全部存储在一个字节中。

[如何在 C++ 中使用枚举作为标志？](https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-24T13:26:51.510

> 有没有办法优化它？

您可以使用所谓的[bit-field](https://en.cppreference.com/w/cpp/language/bit_field)来做到这一点。位域值不能获取其地址。

# java - 动态创建对象并使用数据填充

> ID：12208072
> 
> 赞同：0
> 
> 时间：2012-08-31T02:13:41.240
> 
> 标签：java, design-patterns

我动态地创建对象。这些对象必须填充数据。我对此的解决方案是在文件中存储一些示例数据，在运行时将其加载到数组中，然后根据将传递给工厂的数组数据随机创建对象，然后再传递给适当的构造函数。我忘了提到文件中的记录存储了有关该记录将创建的对象类型的信息。

请问这样是不是太麻烦了？如果是的话，动态创建对象并用数据填充它们的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:28:47.370

根据您的说法，您正在从工厂外部的文件中读取和加载数据，但我认为一个好的设计策略是您的工厂将负责从文件中读取输入，加载它并根据记录创建对象。通过这种方式，您可以解耦来自文件或来自数据库的逻辑。此外，您可以定义所有相关方法来仅在工厂内创建对象。

# java - 想将一个库导入我的 Java 项目

> ID：12208081
> 
> 赞同：0
> 
> 时间：2012-08-31T02:15:07.550
> 
> 标签：java, libraries, import

我想将此添加到我的导入中并使用它来验证 URI 地址但是，我无法弄清楚如何正确导入此[http://www.jdom.org/docs/apidocs/org/jdom2/Verifier.html](http://www.jdom.org/docs/apidocs/org/jdom2/Verifier.html) . 我必须更新我的 Maven 存储库吗？我知道它包含在 java.lang.Object 中，但是当我包含它时找不到验证器。

有人可以帮我理解这里的问题吗？

伊杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:37:49.950

您可以从 Maven Central Repository 获取 JDOM 2.0.2：

```
<dependency>    
    <groupId>org.jdom</groupId>
    <artifactId>jdom</artifactId>    
    <version>2.0.2</version>
</dependency> 
```

这是指向[JDOM 2.0.2 的 Maven 中央搜索的链接](http://search.maven.org/#artifactdetails%7Corg.jdom%7Cjdom%7C2.0.2%7Cjar)

我刚刚`jdom-2.0.2.jar`从这里拉下来并验证它确实包含`org.jdom2.Verifier.class`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:23:59.923

jdom2 项目（还）不能通过 Maven 获得。（您不能只在 POM 中添加一些 XML。）

您可以在此处下载 JAR 文件：

[http://www.jdom.org/downloads/index.html](http://www.jdom.org/downloads/index.html)

这个 SO question 讨论了如何在 Maven 项目中使用纯 JAR 文件：

[我可以在不安装它们的情况下将 jars 添加到 maven 2 build classpath 吗？](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them)

# r - 根据向量中的 *not* 选择 R 数据框中的列

> ID：12208090
> 
> 赞同：53
> 
> 时间：2012-08-31T02:16:05.100
> 
> 标签：r, dataframe, subset

我熟悉能够从 R 数据框（或矩阵）中提取列，如下所示：

```
df.2 <- df[, c("name1", "name2", "name3")] 
```

但是可以使用一种`!`或其他工具来选择*除列出的列之外的所有列*吗？

作为背景，我有一个包含很多列向量的数据框，我想避免：

*   当我可以删除少数人时，输入大多数人的名字
*   使用更短的`df.2 <- df[, c(1,3,5)]`，因为当我的 .csv 文件更改时，我的代码会因为编号不再相同而变得糟糕。我是 R 新手，我认为我已经学会了不使用数字向量来处理可能会改变的较大 df 的艰难方法。

我试过了：

```
df.2 <- df[, !c("name1", "name2", "name3")]
df.2 <- df[, !=c("name1", "name2", "name3")] 
```

就在我输入这个的时候，发现这行得通：

```
df.2 <- df[, !names(df) %in% c("name1", "name2", "name3")] 
```

有没有比这最后一个更好的方法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-31T18:12:26.240

一种替代方法`grep`是`which`：

```
df.2 <- df[, -which(names(df) %in% c("name1", "name2", "name3"))] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T04:58:00.960

您可以使用negative-grep 进行更短的调用：

```
df.2 <- df[, -grep("^name[1:3]$", names(df) )] 
```

由于 grep 返回数字，您可以使用负向量索引来删除列。您可以添加更多数量或更复杂的模式。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-03-09T15:22:17.850

`dplyr::select()`有几个用于删除特定列的选项：

```
library(dplyr)

drop_columns <- c('cyl','disp','hp')
mtcars %>% 
  select(-one_of(drop_columns)) %>% 
  head(2)

              mpg drat    wt  qsec vs am gear carb
Mazda RX4      21  3.9 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21  3.9 2.875 17.02  0  1    4    4 
```

否定特定的列名，以下删除列“hp”和从“qsec”到“gear”的列：

```
mtcars %>% 
  select(-hp, -(qsec:gear)) %>% 
  head(2)

              mpg cyl disp drat    wt carb
Mazda RX4      21   6  160  3.9 2.620    4
Mazda RX4 Wag  21   6  160  3.9 2.875    4 
```

你也可以否定 `contains()`, `starts_with()`, `ends_with()`, 或`matches()`:

```
mtcars %>% 
  select(-contains('t')) %>%
  select(-starts_with('a')) %>% 
  select(-ends_with('b')) %>% 
  select(-matches('^m.+g$')) %>% 
  head(2)

              cyl disp  hp  qsec vs gear
Mazda RX4       6  160 110 16.46  0    4
Mazda RX4 Wag   6  160 110 17.02  0    4 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-25T00:32:16.860

旧线程，但这是另一个解决方案：

```
df.2 <- subset(df, select=-c(name1, name2, name3)) 
```

这是在另一个类似的帖子中发布的（尽管我现在找不到它）。在您描述的情况下应该是可持续的代码，并且可能比其他一些选项更容易阅读和编辑。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T02:42:56.753

如果您自己使用它来操作数据，您可以创建一个自定义函数来执行此操作。我可能会做这样的事情：

```
rm.col <- function(df, ...) {
    x <- substitute(...())
    z <- Trim(unlist(lapply(x, function(y) as.character(y))))
    df[, !names(df) %in% z]
}

rm.col(mtcars, hp, mpg) 
```

第一个参数是数据框名称。以下`...`是您要删除的任何列的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-08T01:18:41.517

我想到的最简单的方法：

> 过滤_df<-df[, setdiff(names(df),c("name1","name2") ]

本质上，您正在计算列名的完整列表和要过滤掉的子集（上面的 name1 和 name2）之间的差异。

# .net - 哪一层需要写单元测试？

> ID：12208091
> 
> 赞同：2
> 
> 时间：2012-08-31T02:16:07.597
> 
> 标签：.net, asp.net-mvc-3, wcf, unit-testing, mstest

我是单元测试/ TDD 的新手。我们正在开发一个具有以下架构的 Web 应用程序：

1.  MVC
2.  WCF 服务层
3.  业务逻辑层
4.  DAL 与 EF

我以前没有做过单元测试，但在一些项目中看到过，所以我对此并不清楚。

我们应该为每一层的每个方法编写单元测试还是这些特定于某一层？

其次，我们是否应该放置一个项目并将所有层单元测试放入其中？我想知道如何管理测试项目中所有层的单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:49:42.763

我在一家全敏捷商店工作，我们做了以下工作：

1\. 我们从编写 UAT（用户验收测试）开始。对你来说，这将通过 Cucumber + WatiN 或类似的东西来完成。它们在编写时考虑了业务功能。
2\. 接下来我们为要添加的类编写单元测试。这意味着测试每个公共方法及其所有逻辑分支。这几乎适用于除视图之外的所有内容。
3\. 对于毛茸茸的代码，我们添加了绑定多个类的集成级测试，以确保它们正确集成。

有些层没有经过测试，因为假设它们“正常工作”就在那里（即 DBMS）

通常你的 CI 应该首先运行单元测试，然后是集成测试（如果单元测试通过），最后是最慢的 UAT，只有在集成测试通过时

# javascript - 从 dojo 组合框中删除选项

> ID：12208093
> 
> 赞同：1
> 
> 时间：2012-08-31T02:16:35.573
> 
> 标签：javascript, dojo

有谁知道如何从 dijit.form.ComboBox 中删除选项，我知道如何从 select 中删除，但同样的原则在这里不起作用。我在 doc api 中找不到任何内容。我尝试了 dojo.empty，同样的运气。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:40:59.307

调用 flauerpower 给出的代码后，调用：

组合框上的 reset() 方法。这也将清除选择。

1) Dojo 控件是存储感知
的 2) 重置将清除控件中的文本/选择。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:40:22.063

您是否在 dijit.form.ComboBox 中使用商店？如果是这样（并且存储是可写的），您应该能够从存储中删除一个项目，因此 ComboBox 应该反映这些更改。

```
store.fetch({ 
    query: {id: "123145"},
    onComplete: function(item_array) {
        store.deleteItem(item_array[0])
    }
}); 
```

我知道这在使用 dojo.data.ItemFileWriteStore 和 FilteringSelect （与 ComboBox 非常相似）时有效。如果您使用声明性标记，ComboBox 可能会将 html 转换为数据存储，您可能能够找到该存储并执行相同操作。

另外，我最熟悉 v1.6 的 dojo 工具包。较新的版本可能使用更好的数据存储类型，并且与旧的 ItemFileWriteStore 相比，它们可能有更直接的方式从存储中删除项目。

# asp.net-mvc - 在 asp.net MVC PartialView 中绑定 DropDownList

> ID：12208096
> 
> 赞同：1
> 
> 时间：2012-08-31T02:17:09.477
> 
> 标签：asp.net-mvc, binding, asp.net-mvc-4, partial-views

我有一个 partialView，`<select>`其中包含一个用于注册用户的可用角色列表。我是 MVC 的新手，我正在努力弄清楚如何绑定`<select>`.

通常我会在`Page_Load`ascx 上执行此操作，例如：

```
rolesSelect.DataSource = Roles.GetAllRoles().OrderBy(r => r);
rolesSelect.DataBind(); 
```

但是使用 MVC 就完全不同了。我的 view 和 partialView 看起来像这样：

**用户.cshtml**

```
@model IEnumerable<RobotDog.Models.UserModel>

<table>...</table>
<div id="addUser">
    @Html.RenderPartial("_AddUser")
</div> 
```

**_AddUser.cshtml**

```
@model RobotDog.Models.RegisterModel

@using(Html.BeginForm("AddUser","Admin", FormMethod.Post)) {
    @Html.EditorFor(x => x.Email, new { @class = "input-xlarge", @placeholder = "Email"})
    @Html.EditorFor(x => x.UserName, new { @class = "input-xlarge", @placeholder = "User Name"})
    @Html.EditorFor(x => x.Password, new { @class = "input-xlarge", @placeholder = "Password"})
    @Html.DropDownListFor(????) //not sure how to bind this?
} 
```

我的问题是：

1.  我需要将适当的集合从控制器传递到视图到 partialView 还是有更实用的可扩展方法？
2.  是否可以为 partialView 提供一个控制器，这样我只需要担心将 partialView 添加到视图而不是视图的控制器吗？
3.  这真的归结为将数据集合绑定到 PartialView 中的 DropDownList 的标准做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:33:37.670

将`Roles`集合添加到模型中，并根据需要构建选择列表。

```
@Html.DropDownListFor(x => x.Role, 
    Model.Roles.Select(role => 
        new SelectListItem() { Text = role.Name, Value = role.Value }
    )
) 
```

添加`Roles`到模型的另一种方法是创建一个 HTML Helper 方法。这是一个扩展方法，所以像这样添加它：

```
namespace ExtensionMethods
{
    public static class HtmlHelperExtensions
    {
        public static IEnumerable<SelectListItem> GetRoles(this HtmlHelper helper)
        {
            return new[] {
                new SelectListItem() { Text="Role1" },
                new SelectListItem() { Text="Role2" },
            };
        }
    }
} 
```

然后在文件夹`Web.Config`下注册命名空间`Views`：

```
<system.web.webPages.razor>
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="ExtensionMethods"/>
      </namespaces>
    </pages>
</system.web.webPages.razor> 
```

现在您可以创建下拉列表：

```
@Html.DropDownListFor(x => x.Role, Html.GetRoles()) 
```

# c++ - 线程读取与写入锁定

> ID：12208101
> 
> 赞同：2
> 
> 时间：2012-08-31T02:18:27.583
> 
> 标签：c++, multithreading, locking

我正在用 C++ 编写一个 CPU 密集型程序，它有多个线程需要访问共享数据结构，因此需要锁定。为了最大限度地提高吞吐量，我想将瓶颈保持在最低限度。看起来十有八九只需要读取数据结构，十有八九需要修改它。

有没有办法让线程获取读或写锁，这样写锁会阻塞一切，但读锁不会互相阻塞？

一个可移植的解决方案将是理想的，但如果有一个适用于 Windows 的解决方案和另一个适用于 Linux 的解决方案，那就没问题了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:20:31.983

是的，这是可以通过[读写锁](https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)解决的常见情况。

请注意，根据程序的动态属性，您可能需要小心*writer starvation*。如果有足够多的读者，他们的阅读尝试总是重叠（或重叠很长时间），那么一个简单的读写器锁实现将通过让写者等待直到*没有*读者阅读而“饿死”写者。在更高级的实现中，从概念上讲，写入器请求将在后续读取器之前插入队列中，从而允许写入器在所有先前活动的读取器完成后有机会访问。

大多数实现都要求您提前知道您想要读锁*还是*写锁。一些实现允许您将读锁“升级”为写锁，而不必先释放读锁（这将使另一个写入者有机会进入锁）。

# xcode - UIPageViewController - 如何在横向模式下自定义左右页面？

> ID：12208102
> 
> 赞同：0
> 
> 时间：2012-08-31T02:18:41.873
> 
> 标签：xcode, ipad, uipageviewcontroller

我在 Xcode 中有一个基于页面的应用程序，我正在尝试对其进行设置，以便左页和右页在横向模式下具有不同的布局。

具体来说，如果页面在左侧，我想设置不同的页面 bg 图像，使其看起来更像一本真正的书。

有没有办法以编程方式检测 UIPageViewController 在横向模式下是在左侧还是右侧？你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:57:42.763

如果您有背景图像的属性，则可以在 viewControllerAtIndex 上更改它

```
 - (YourPageContentViewController *)viewControllerAtIndex:(NSUInteger)index {   
   // Return the data view controller for the given index.
   if (([self.modelArray count] == 0) || (index >= [self.modelArray count])) {
       return nil;
   }
   YourPageContentViewController *dataViewController [[YourPageContentViewController alloc]initWithNibName:@"YourPageContentViewController" bundle:nil];
   if (index%2 ==0) {
      //set a background
      dataViewController.backgroundImage = imageForLeftSide;
   } else {
      //set the other background
      dataViewController.backgroundImage = imageForRightSide;
   }
   dataViewController.dataObject = [self.modelArray objectAtIndex:index];
   return dataViewController; 
} 
```

# google-apps-script - 在 Time Book Application 教程中打开电子表格失败

> ID：12208105
> 
> 赞同：1
> 
> 时间：2012-08-31T02:19:16.007
> 
> 标签：google-apps-script, google-sheets, google-sites

这是基于“时间预订应用程序”教程。我已经在站点中创建了站点、电子表格和脚本。我创建的网站页面无法打开电子表格。

从站点的脚本编辑器中，我可以运行测试方法 testGetSheet()、testUpdateSheet() 和 testInsertTimeSheet()。我相信这表明 SPREADSHEET_ID 是正确的。但是，我为此错误创建的网站页面显示“抱歉，您请求的页面（或文档）不存在。”

我已尝试共享电子表格，以供具有链接和编辑能力的任何人使用。我试图将电子表格分享给公众和编辑能力。我已经从一个单独的未经身份验证的浏览器和一个经过身份验证的浏览器中尝试过这个。我仍然得到错误。我的想法已经用完了，还有其他人有想法吗？

我可以提供网站页面的网址，但我怀疑它是否有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:07:05.480

是的，回答我自己的问题。经过大量的研究和实验。问题在于对脚本的访问，本教程没有说明权限或任何内容。

无论如何解决方案是。将脚本发布为 Web 应用程序使用应用程序脚本小工具中的 Web 应用程序 URL。我已经在教程文档上发布了这个反馈。

# c# - SL5 + MEF + PRISM + DataGrid + 在模态对话框中编辑行：InteractionRequest 是答案吗？

> ID：12208107
> 
> 赞同：0
> 
> 时间：2012-08-31T02:20:19.237
> 
> 标签：c#, silverlight, datagrid, prism

我正在重写我们的一个大型 Silverlight 应用程序以使用 PRISM 和 MVVM 设计模式。

一个非常常见的场景是视图中的 DataGrid。双击一行允许用户使用 ChildWindow 编辑由该行表示的实体。

我很想在后面的代码中捕获 DoubleClick 事件，创建一个适当类型的新 ChildWindow，并将 DataContext 设置为 DataGrid.SelectedItem。

但是，我知道这不是使用 PRISM 和 MVVM 处理这种情况的正确方法。

我很想知道什么是建议！（回复：我的标题......看起来 InteractionRequest 可能是最好的方法？）

谢谢...

**编辑：我们最终决定使用 InteractionRequest 作为我们的解决方案。我们几乎总是使用“通知”作为类型，并传递一个新的 ViewModel（每个 ChildWindow 都有自己的）作为内容。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:33:37.030

在我们的例子中，ChildWindow 视图足够复杂，足以保证它自己的视图模型。此视图与数据网格视图的耦合不太紧密。

因此，我们在 XAML 中将 EventTrigger 附加到数据网格（我们实际上使用 Telerik 的数据网格）。事件触发器使用 InvokeCommandAction 在视图模型中执行命令。

该命令发布一个聚合事件，该事件将所选项目作为有效负载。该事件由负责创建 ChildWindow 视图和相应视图模型的中央应用程序控制器获取（使用事件有效负载作为上下文）。

我认为在您的情况下可能会使用交互请求，但根据我的理解，交互请求背后的想法是非常简单的 Ok 或 Yes/No 交互。您可能会使用一堆文本框、验证等来突破界限。

# javascript - JS表格添加新行，如何在这个新行中添加模式？比如改成

> ID：12208108
> 
> 赞同：0
> 
> 时间：2012-08-31T02:20:30.640
> 
> 标签：javascript, dom

JS：

```
var tab = document.getElementById("tab"); 
var newTr = tab.insertRow(-1);   
newTr.id = "tr_" + trId; 
var newTdContent = newTr.insertCell(1); //  first line
var newTdCaoZuo  = newTr.insertCell(2); //   second line      
// set the data of two line  
newTdContent.innerHTML  = "<textarea rows='5' cols='40'name='getContent' id='getContent'>" + content.value + "</textarea>";  
newTdCaoZuo.innerHTML  = "<input type='button' onclick='moveTr("+trId+")' value='remove'>"; 
```

表中的新行与另一行不同。新增线型有限。

```
table 

<tr class="trd0"> 
<td>..</td> 
<tr> 
```

我不想添加像 class="trd0" 这样的 newTr 模式。如何实现？</p>

# ruby-on-rails - OpenSSL::SSL::SSLError .....证书验证失败？

> ID：12208110
> 
> 赞同：5
> 
> 时间：2012-08-31T02:20:37.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我刚刚升级到 Rails`3.2.8`并更新了我所有的 gem。我想测试我的网站，所以我从注册开始，但是当我点击加入按钮时，它给了我错误：

```
OpenSSL::SSL::SSLError in RegistrationsController#create

SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed

app/models/user.rb:28:in `send_welcome_email' 
```

我正在使用设计`2.1.2`，这是我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :remember_me
  attr_accessor :accessible # something for devise i think
  devise :database_authenticatable, :registerable, 
  :recoverable, :rememberable, :trackable, 
  :validatable, :email_regexp =>  /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

  after_create :send_welcome_email

  private

  def send_welcome_email
    UserMailer.welcome_email(self).deliver
  end
end 
```

我猜这与我在**development.rb**中的电子邮件设置有关。

```
require 'tlsmail'
  Net::SMTP.enable_tls(OpenSSL::SSL::VERIFY_NONE)
  ActionMailer::Base.delivery_method = :smtp
  ActionMailer::Base.perform_deliveries = true
  ActionMailer::Base.raise_delivery_errors = true
  ActionMailer::Base.smtp_settings = {
    :enable_starttls_auto => true,
    :address            => 'smtp.gmail.com',
    :port               => 587,
    :tls                => true,
    :domain             => 'app.com',
    :authentication     => :plain,
    :user_name          => 'support@app.com',
    :password           => '******'
  }
  config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

我该如何纠正这个问题？我去的时候才开始明白这个`3.2.8`。如果有帮助，我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T11:18:23.483

[RailsApps 项目](http://railsapps.github.com/)的以下帖子详细解释了问题所在，并为 RVM、OSX 和 Windows 提供了多种解决方案。

[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

由于您使用的是 Windows，因此您需要[下载并安装证书文件](https://gist.github.com/867550)才能解决您的问题。（有关更好的解释，请参阅上面的链接帖子）

还有一个关于这个问题的[github](https://github.com/rubygems/rubygems/issues/319)问题。

# vb.net - 是否有一个内置函数可以提取字符串中的所有字符，直到第一次出现空格？

> ID：12208115
> 
> 赞同：0
> 
> 时间：2012-08-31T02:21:41.817
> 
> 标签：vb.net, string

是否有一个内置函数可以提取字符串中的所有字符，直到第一次出现空格？

说字符串是：

> 耐甲氧西林金黄色葡萄球菌

我希望能够得到子字符串：

> 耐甲氧西林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:38:00.887

您可以使用的第一个解决方案是一个简单的 IndexOf

```
string GetFirstWord(string source)
{
    int index = source.IndexOf(" ");

    if (index == -1) return source;
    else return source.Substring(0, index);
} 
```

如果要将所有单词保存到字符串数组中，可以使用第二种解决方案。

```
string[] GetWords(string source)
{
    return source.Split(' ');
} 
```

如果你只想要第一个单词，你可以这样使用它：

```
string word = GetWords("Methicillin-resistant staphylococcus aureus")[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:28:27.167

您可以通过*两个*功能来做到这一点：

```
newstring = mystring.Substring(0, mystring.IndexOf(" ")) 
```

尽管如果`mystring`.

因此，您可以`mystring.IndexOf(" ")`在`-1`尝试将其用于`Substring`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:49:56.913

还有一个 VB.NET 解决方案。不，它不能用一种内置方法来完成；你需要两个：

```
Left(myString, InStr(myString, " ") - 1) 
```

与您需要检查的其他解决方案一样，如果可能不包含空格，`InStr`则不会返回。`0``myString`

# http - 嵌套模型的类 CRUD 操作 url 模式

> ID：12208117
> 
> 赞同：2
> 
> 时间：2012-08-31T02:21:52.163
> 
> 标签：http, rest, webserver, associations, restful-url

一般来说，model 的 CRUD 操作 url 模式可以是这样的（假设 Model 是 Post）：

```
new: /posts/new(get)
create:/posts/(post)
edit:/posts/edit(get)
update:/posts/1(put)
get:/posts/1(get) 
```

但是，如果有嵌套模型“评论”。

并且“帖子”和“评论”的关联是一对多的。

那么对于评论来说，CURD 操作 url 模式应该是什么样的呢？

```
new: /posts/1/comments/new   or /comments/new
create:?
edit:?
update:?
....... 
```

最佳做法是什么？

* * *

更新：

看来评论的url应该是这样的：

```
Get one comment for one post: /posts/1/comments/1

create: /posts/1/comments

update: /posts/1/comments/1

delete: /posts/1/comments/1 
```

现在我对更新和删除操作感到困惑。

对于更新和删除：`/posts/1/comments/1`

由于指定了评论ID，所以我想知道`/posts/1`url里面是否有必要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:34:50.340

我认为关键是帖子资源是否“包含”了评论。请记住，RESTful url 应该是永久链接，因此在所有场景下，特定评论的终点不得更改。听起来它已包含在内，因此 url 模式可以将评论嵌套在帖子中。如果不是这种情况（例如，评论可能会移动到另一个帖子，如果嵌套会更改网址），那么您需要一个更扁平的结构，其中包含帖子资源引用的 /comment/{id} 网址）。

关键是，如果它是一个 RESTful “超媒体 API”，那么它就像 Web 一样，它会不断链接到嵌套或引用的资源。它并不依赖于客户端必须理解 REST 模式或关于哪个端点拥有引用或包含的资源的特殊知识。

[http://blog.steveklabnik.com/posts/2012-02-23-rest-is-over](http://blog.steveklabnik.com/posts/2012-02-23-rest-is-over)

如果“评论”是“帖子”资源下的资源：

([httpVerb] /url)

得到一个帖子：

```
[get] /posts/{id}
body has a couple options - either it contains the full deep comments array
(depends on how much data, chat pattern)
{
    id:xxx,
    title:my post,
    comments: [...]
}

... or it just contains the post resource with a url reference to the comments e.g.
{
   id: xxx,
   title: my post,
   commentsUrl: /posts/xxx/comments
}

could also have an option like this (or other options to control depth):
[get] /posts/{id}?deep=true 
```

获取帖子中的评论集合：

```
[get] /posts/{id}/comments
returns 200 and an array of comments in the response body 
```

为帖子创建评论：

```
[post] /posts/{id}/comments
body contains json object to create
returns a 201 created 
```

编辑帖子下的评论：

```
[patch|post] /posts/{id}/comments/{id}
body contains json object with subset of fields/data to update
returns a 200 
```

替换帖子：

```
[put] /posts/{id}/comment/{id}
body contains json object to *replace*
returns a 200 
```

如果每个帖子有大量评论，您还可以考虑分页模式：

```
{
    id: xxx,
    title: myPost,
    pages:6,
    commentsUrl:/posts/xxx/comments/page/1
} 
```

然后：

```
/posts/{id}/comments/pages/{pageNo}

{
    nextPage: /posts/xxx/comments/2,
    pages:7,
    comments:
    [ { ...,...,}]
} 
```

每个页面都会引用下一页、页数和该页面的评论数组。如果您使用分页模式，那么数组中的每个评论都会有一个指向单个评论的引用 url。

如果您发现自己在 url 中放置了一个操作，那么您可能做错了什么。好读：http: [//blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http](http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:24:14.307

您想使用规范的 URL 进行删除/更新，这将是完整的。更重要的是，您不应该将来自数据库的主键值公开为公共 api 中的 id，这是您的宁静 URL 空间。这些值将来可能会根据数据库更新、从备份恢复或其他任何事情发生变化，具体取决于供应商。如果您能提供帮助，您不希望基础架构更改使您的所有 URL 都无效。

如果您使用`/posts/{postnum}/comments/{commentnum}`，您可以为每个帖子从 1 开始为*公共评论 ID 编号，从而获得更短、更好的 URL。*

# r - 如何将 R“网络”对象转换为“igraph”对象？

> ID：12208121
> 
> 赞同：4
> 
> 时间：2012-08-31T02:22:43.467
> 
> 标签：r, import, igraph, sna

如何将 R“网络”对象转换为“igraph”对象？

[教程](http://igraph.sourceforge.net/igraphbook/igraphbook-foreign.html)和[包文档](http://igraph.sourceforge.net/doc/R/read.graph.html)中讨论了许多格式，但我找不到如何导入“网络”对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T03:18:00.857

请参阅[鹰图包](http://cran.r-project.org/web/packages/intergraph/index.html)。

请注意，此包声称与 igraph 的过时版本兼容，但由于 igraph 对象在和包`igraph0`中完全相同，因此使用创建的对象也应该可以正常工作。（我从未亲自尝试过。）`igraph0``igraph``intergraph``igraph`

您可以同时加载`igraph0`和`igraph`包，只需确保您调用的是`igraph`函数而不是`igraph0`代码中的函数。一个简单的方法是先加载`igraph0`，再加载`igraph`，然后`igraph0`函数将被屏蔽。或者，您可以在不再需要时通过卸载`igraph0`包。`unloadNamespace()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T09:02:34.897

```
Net <- network.initialize(10, directed = FALSE) #initialize a graph with 10 nodes 
```

然后运行

```
asIgraph(Net) 
```

# php - 在 PHP 中删除 MongoDB GridFS 中的多个文件

> ID：12208130
> 
> 赞同：5
> 
> 时间：2012-08-31T02:25:10.913
> 
> 标签：php, mongodb, delete-file, gridfs

我正在使用`MongoDB`and `GridFS`in `PHP`，并试图弄清楚如何通过 `_id`.

这是我的代码：

```
 $ids = array("50401f40ff558cec38000061", "62401f40ff558cec38000072", "73401f40ff558cec38000083");
 $mongo_ids = array();
 foreach($ids as $id) {
    $mongo_ids[] = new MongoId($id);
 }

 $mongo_grid_fs->remove(array("_id" => $mongo_ids)); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:42:18.693

由于 GridFS 的实际工作方式，这对于单个请求是不可能的。

你有两个集合：

*   文件
*   块

为了删除 GridFs 文件，您必须同时查询这两个表。因此 remove() 函数实际上调用块集合，然后从文件集合中删除文件。

由于 MongoDB 从根本上说不能在一个请求中查询两个集合（基本上已加入删除），因此您必须为每个文件发送一个删除请求以删除，否则您将剩余的块占用您的块集合中的空间。

因此，考虑到这一点，@ToddMoses 的答案是正确的。

您当然可以使用：[http](http://www.php.net/manual/en/mongogridfs.remove.php) ://www.php.net/manual/en/mongogridfs.remove.php但我相信它做的完全一样，只是抽象了，所以您的查询应该是：

```
$mongo_grid_fs->remove(array("_id" => array('$in' => $mongo_ids))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T03:32:12.493

首先，使用 MongoDB::lastError() 找出问题所在。MongoGridFS::remove 如果失败，不会向您显示消息。做这样的事情：

```
$errorArray = $db->lastError();
var_dump($errorArray); 
```

看来问题是您没有正确设置标准。最简单的做法是使用 Delete 而不是 Remove，因为 Delete 将 ID 作为其唯一参数：

```
public bool MongoGridFS::delete ( mixed $id ) 
```

这会从数据库中删除文件，而 remove 会从集合中删除文件。由于无论如何您都在循环，您可以执行以下操作：

```
foreach($ids as $id) {
    $mongo_grid_fs->delete($id);
 } 
```

# security - 仅用于代理（ssh-D）访问的登录外壳？

> ID：12208131
> 
> 赞同：1
> 
> 时间：2012-08-31T02:25:11.873
> 
> 标签：security, shell, ssh

我想在远程主机（例如proxy.example.com）中创建一个用户，是否有像git-shell 这样的受限登录shell 用于仅代理ssh 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:28:12.190

自己写！`restricted-shell.c`：

```
#include <stdio.h>

int main() {
  printf("You are now connected to the proxy. Press enter to exit.\n");
  scanf("*c");
  exit(0);
} 
```

# iphone - 在 iOS 5 中启用隐藏的格鲁吉亚键盘

> ID：12208135
> 
> 赞同：1
> 
> 时间：2012-08-31T02:25:39.990
> 
> 标签：iphone, ios, unicode, keyboard, georgian

在 iOS 5 beta 模拟器中，我看到 Apple 为 iOS 制作了一个原生格鲁吉亚键盘。但是在 iOS 5 的最终版本中，Apple 隐藏了这个键盘。我找到了通过更改位于以下位置的 GlobalPreferences.plist 文件来打开此键盘的解决方案`private/var/mobile/Library/Preferences/.GlobalPreferences.plist`：只需添加一个`ka@hw=Georgian;sw=Georgian`并重新启动系统。现在我想制作一个无需手动更改此文件即可自动启用此键盘的应用程序。我怎样才能做到这一点？

这是键盘本身的图像：

![键盘](../Images/38f1f6f9fa98b9d5c7b8759e955e7d81.png)

而“GlobalPreferences.plist”文件代码，改为显示键盘：

![http://f.cl.ly/items/2r3d3v3L35241Q3a1G02/plist.png](../Images/e350dd5d3fab5c1d769e219618550a7f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T17:33:26.530

如果找不到指定的文件，我使用“iBackupBot for iTunes”v 4.1.5 以下是要遵循的步骤：

1- 通过 iTunes 将您的 iphone 备份到您的电脑 2- 为 iTunes 运行 iBackupBot 3- 找到文件*GlobalPreferences.plist*（系统文件 --> 主域 --> 库 --> 首选项）
4- 只需添加 ka@hw=Georgian ;sw=Georgian 如上图所示并保存文件 5- 恢复*备份*（不是 IPHONE）

你完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:52:53.267

我可以找到这个特定的文件。我有最新版本 511，找不到这个

```
private/var/mobile/Library/Preferences/.GlobalPreferences.plist 
```

# asp.net-mvc - 如何获取用户对象并将其与模型一起保存？

> ID：12208136
> 
> 赞同：0
> 
> 时间：2012-08-31T02:26:01.107
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我创建了非常简单的模型：

```
public class ImageModel
{
    public int Id { get; set; }
    public string FileName { get; set; }
} 
```

现在我想将登录用户与记录一起存储。据推测，我会通过添加另一个属性来做到这一点：

```
public User User { get; set; } 
```

哪个 Visual Studio 告诉我正在告诉我在

```
using System.Web.Providers.Entities; 
```

假设这是`User`与当前经过身份验证的用户相对应的正确类，我如何将其保存在我的模型中？

我的`Create`动作是这样的：

```
 [HttpPost]
    public ActionResult Create(ImageModel imagemodel)
    {
        if (ModelState.IsValid)
        {
            db.ImageModels.Add(imagemodel);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(imagemodel);
    } 
```

我想我想添加类似的东西

```
 imagemodel.User = User; 
```

就在上面`db.ImageModels.Add`，但那些似乎是两种不同的类型。中的`User`对象`Controller`似乎是一个`IPrincipal`实际上似乎根本没有太多信息的对象。

如何获取经过身份验证的用户的其余用户数据？我需要分配`imagemodel.User`什么？这甚至是这样做的方式，还是我需要明确告诉它我只想保存用户 ID（我假设它可以计算出这么多） - 如果是这样，我如何保持一个`User`对象我的模型指向真实的用户对象（不仅仅是一个 ID），我如何获取当前登录用户的用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:59:24.220

这取决于您用于管理登录或会话的技术。

在控制器方法中，您可能只想将模型属性设置为“User.Identity.Name”中的值，这是一个字符串值。

这假设用户已登录并且您已配置表单身份验证。您之前可能已经对用户进行了身份验证，并通过 FormsAuthentication.SetAuthCookie 方法为他们提供了一个包含“.Name”值的令牌（基本上只是一个加密的 cookie）。

所以，为了简单起见，你的 Image 模型应该只有一个 Username 字符串属性。如果您有权访问用户身份表，则可能希望存储对相关用户的引用。

```
public class ImageModel
{
    public int Id { get; set; }
    public string FileName { get; set; }
    public string Username { get; set; }
} 
```

控制器...

```
[HttpPost]
public ActionResult Create(ImageModel imagemodel)
{
    if (ModelState.IsValid && User.Identity.IsAuthenticated)
    {
        imagemodel.Username = User.Identity.Name;
        db.ImageModels.Add(imagemodel);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

在不知道您使用的提供程序的情况下公开的接口非常少。

```
IPrinicipal User
    bool IsInRole(string role)
    IIdentity Identity
        string AuthenticationType
        bool IsAuthenticated
        string Name 
```

而已。

一旦您选择了提供商或决定实施[自定义](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)提供商，就会有一系列 SO 文章供您参考。

在研究这个主题时，寻找 ASP.NET 参考可能比 MVC 参考更好。

# python - 如何扰动 pyephem 中的轨道元素？

> ID：12208141
> 
> 赞同：2
> 
> 时间：2012-08-31T02:27:16.433
> 
> 标签：python, pyephem

有谁知道 pyephem 是否提供了一个函数来计算给定日期/时间的“扰动”轨道元素值，给定一组输入轨道元素值和相关的纪元？我目前正在使用 pyslalib 包中的 sla_pertel 函数来扰动轨道元素并且效果很好，但是如果 pyephem 中已经有可以用来做同样事情的东西，我宁愿不必使用该包。我查看了 pyephem 文档，但没有看到任何明显的做法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:31:55.197

抱歉不行; PyEphem 既不包括一个扰动模块，也不包括更普遍的引力模拟，也不包括任何类型的动力学模型——目前内置在包中的所有数学都是解析的，并使用轨道元素或多项式预测位置，这些轨道元素或多项式内置了任何扰动其他人。

# hibernate - 在 Hibernate 3.xx 中通过 Ant 任务从 Annotation Beans 生成 SQL DDL

> ID：12208143
> 
> 赞同：1
> 
> 时间：2012-08-31T02:27:34.263
> 
> 标签：hibernate, spring-mvc, ant, hibernate-tools

我的项目设置是 Hibernate 3.2.5、MySQL、Spring MVC、NetBeans Apache 7.xx

* * *

在构建和运行期间我没有收到任何错误。

尝试通过 Ant 任务从注释 bean 生成 SQL DDL 脚本，但是我收到以下错误：

```
Reference C:/cmgr/build/web/WEB-INF/lib/hibernate-tools.jar not found. 
```

但是，当我检查 hibernate-tools.jar 的路径时。

* * *

导致错误的 Ant taskdef 部分：

```
<taskdef
    name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask"
    classpathref="C:/cmgr/build/web/WEB-INF/lib/hibernate-tools.jar"> 
```

* * *

hibernate_ddl.xml（整个 Ant 文件）

```
 <?xml version="1.0" encoding="UTF-8"?>
<project name="yourmarketnet" default="all" basedir=".">
    <property name="build.dir" value="C:/cmgr/build" />
    <property name="src.dir" value="C:/cmgr/src/java" />
    <target name ="ddl_generation">
<!-- paths to required jars  -->
        <path id="toolslib">
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-annotations.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-commons-annotations.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/dom4j-1.6.1.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/org-apache-commons-logging.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-entitymanager.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-tools.jar"/>
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-entitymanager.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/javaassist.jar" />
            <path location="${build.dir}/web/WEB-INF/lib/hibernate-tools.jar"/>
            <path location="${build.dir}/web/WEB-INF/lib/hibernate3.jar"/>
            <path location="${build.dir}/web/WEB-INF/lib/freemarker-2.3.4.jar"/>
            <path location="${build.dir}/web/WEB-INF/lib/ejb3-persistence.jar" />
        <!-- JDBC DRIVER PATH mysql-connector-java-5.1.20-bin.jar--> 
            <path location="${build.dir}/web/WEB-INF/lib/mysql-connector-java-5.1.20-bin.jar"/>
        </path>
         <!-- taskdef -->
        <taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" classpathref="C:/cmgr/build/web/WEB-INF/lib/hibernate-tools.jar">
             <!--  path to annotation beans --> 
            <classpath>
                <pathelement path="${build.dir}/web/WEB-INF/classes/com/cmgr/beans" />
            </classpath> 
        </taskdef>
<!-- output DDL script destination -->
        <hibernatetool destdir="${src.dir}">
            <!-- path to hibernate.cfg.xml -->
            <AnnotationConfiguration configurationfile="${src.dir}/resources/hibernate.cfg.xml"/>
<!-- list exporters here -->
            <hbm2ddl
                export="false"
                update="false"
                drop="true"
                create="true"
                outputfilename="${src.dir}/resources/myApps.ddl"
                delimiter=";"
                format="false"
                haltonerror="true"/>
        </hibernatetool>
    </target>
</project> 
```

鉴于我的项目设置，有人可以建议一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:48:52.533

您需要 Ant`taskdef`任务`classpath`参数而不是`classpathref`. 该`ref`参数用于传递在别处定义的 Ant 引用 ID，而不是文件系统路径。

那是：

```
<taskdef
    name="hibernatetool"
    classname="org.hibernate.tool.ant.HibernateToolTask"
    classpath="C:/cmgr/build/web/WEB-INF/lib/hibernate-tools.jar"> 
```

# java - requestDispatcher.forward 和 response.redirect 不起作用

> ID：12208156
> 
> 赞同：0
> 
> 时间：2012-08-31T02:29:09.900
> 
> 标签：java, jsp, session, servlets, servlet-filters

我的网络应用程序目录结构是

```
myApp
 -src
     - filtersPackage(all my filters lie in this package)
     - servletsPackage(all my controllers and models lie in this package)
 - web-content           
   - web
     - views(all my jsp files lie in this dir)
     - js(all my javascript files lie in this dir) 
```

在 login.jsp 中，用户单击 FB 登录按钮，在 js/FBAUth.js 中我收集登录详细信息并使用 jquery ajax POST 方法将其发送到我的 auth.do servlet。

SessionFilter 允许请求转到 AuthServlet 的 doPost 方法。在 AuthServlet 如果凭据正确，则执行以下操作

```
url = "dashboard.jsp" 
request.getSession().setAttribute("uid", id);               
view = request.getRequestDispatcher(url);
view.forward(request, response);
return; 
```

我在调试模式下看到这些行执行但我的浏览器仍然停留在登录页面上。view.requestURI -> /myApp/web/views/dashboard.jsp 和 view.servletPath -> /web/views/dashboardTmp.jsp 的值。我也尝试了 response.sendRedirect(url)，但浏览器仍然卡在登录页面上。在这些行之后没有任何执行。

在 web.xml 中，我的 auth servlet 映射如下

```
<servlet>
    <servlet-name>Auth</servlet-name>
    <servlet-class>servletsPackage.AuthServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Auth</servlet-name>
    <url-pattern>/web/views/auth.do</url-pattern>
</servlet-mapping> 
```

我也尝试在doPost中调用doGet，并在doGet中执行了这段代码，但都是徒劳的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:38:19.437

这种方法似乎有点缺陷。您的转发不起作用，因为您正在使用 AJAX 发布数据。您需要使用 javascript 或更确切地说 jquery 来处理重定向。

检查您的 jquery AJAX 函数的回调方法是否有效。使用打印出 responseText`alert(responseText);`

检查[此](https://stackoverflow.com/questions/8720961/jsp-requestdispatcher-forward-not-forwarding-when-servlet-called-via-ajax-pos)链接以获取有关您的问题的更多信息。并检查第一个答案。它为这个问题提供了一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:46:54.627

尝试从您的 servlet 中返回某些内容（写入响应编写器），将其检索为 ajax 响应，取决于此，执行`window.location.href ="YOUR URL";`

# c# - 无法使用c#连接到sql server 2008

> ID：12208163
> 
> 赞同：0
> 
> 时间：2012-08-31T02:29:43.687
> 
> 标签：c#, sql-server-2008-r2

我在一台 PC 上安装了 SQL Server，并在另一台计算机上创建了 ac# 程序以连接到服务器。但是，当我运行我的程序时，我收到一个异常，提示用户“测试”登录失败。

这是用于连接的代码：

```
SqlConnection con = new SqlConnection("Data Source=IP,PORT;Network Library=DBMSSOCN;Initial Catalog=Stockinfo;uid=testing;pwd=testing"); 
```

我在服务器中创建了一个登录名，用户名和密码作为测试。至于服务器认证，已经设置为SQL Server和Windows认证。我还为防火墙创建了一个例外。我做错了什么？

在此先感谢您的帮助！

编辑 1：我可以在运行服务器的计算机上使用相同的用户 ID 和密码通过 SQL Server 身份验证访问服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:37:00.230

> 用户“testing”登录失败。

这通常意味着用户无权访问该数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:34:31.277

你有 Sql Server Management Studio。如果是，那么您可以打开它并右键单击有问题的实例，转到属性 -> 连接 -> 选中“允许远程连接到此服务器”。

您可能还必须通过配置管理器启用 TCP/IP 协议。

它是否返回此错误？

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

**[您可以查看此链接：在 SQL Server 2008 中启用远程连接](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)**

另一个原因是检查另一台计算机的防火墙是否在其防火墙上添加了端口`sqlbrowser`（*或端口 1433 已打开）。*

**更新 1**

用户`testing`根本不存在或您提供了`incorrect password`

# html - HTML5 和其他语言的自定义解析器

> ID：12208173
> 
> 赞同：1
> 
> 时间：2012-08-31T02:32:22.997
> 
> 标签：html, parsing, token, lexical-analysis

我正在尝试为 (X)HTML5 和可能嵌入的任何内容（EcmaScript、CSS）编写我自己的自定义解析器（在 C# 中） - 只是为了学习和享受乐趣。虽然我是一名中级程序员，但我对解析器和所有技术知识了解不多。我能够相当容易地为 HTML5 创建一个词法分析器（tokeniser），但句法分析（解析）有点棘手。我不确定我是否应该首先对所有源输入进行词法分析，然后再做另一个，或者同时尝试两者；获取 char 直到我有一个令牌，意识到这个令牌在语法上的含义，然后期待一个与前一个令牌相关的某个令牌。我面临的问题是 HTML 可能嵌入了其他语言，例如 CSS 和 JavaScript，据我所知，它们会有不同类别的标记，所以我 我不确定如何“知道”我在代码中的位置，因为我对它进行标记以便对标记“是”有不同的定义。有什么想法吗？此外，先进行词法分析，然后再进行句法分析与同时进行两者的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:11:49.467

如果这纯粹是为了您自己的解析方面的教育，我建议使用比 HTML、CSS 和 JS 解析更小/更容易的领域，因为 HTML 和 JS 都代表了一些非常令人讨厌的解析问题，即使是最有经验的解析器编写者也会感到紧张应对。

基于 Scheme 或 Basic 的语言可能是我的首选。（个人最喜欢的是在我浏览[http://mitpress.mit.edu/sicp/full-text/book/book-ZH-10.html](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html)时构建解析器/解释器）

（也拿起像现代编译器设计的副本可能不会受到伤害：[http](https://rads.stackoverflow.com/amzn/click/com/0471976970) ://www.amazon.com/Modern-Compiler-Design-D-Grune/dp/0471976970 ）

如果它必须与网络相关才能保持您的兴趣，我会尝试为您的解析器做一些较小的网络相关语言，例如 sass ( [http://sass-lang.com](http://sass-lang.com) )

另一方面，如果这与您确实需要解析这些特定事物的工作相关，我建议您完全跳过编写自己的解析器的工作，并挂钩到 Razor 或 Chromium 库之类的东西。

并至少直接回答您问题的后半部分：我建议始终将解析/解释的各个阶段尽可能地分开。

每个问题本身就足够困难，无需尝试“太聪明”并尝试将功能组合到一个单一的扫描中。

在可能的情况下，我建议尽可能保持高层次、抽象和“干净”……因此构建一个专门用于词法解析的节点树和另一个用于句法解析的节点树……在组合语言的情况下，如 HTML 、CSS 和 JS，每个都有不同的 AST 和解析代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:39:52.957

`Udacity`在[1]上有一个很棒的课程，`Programming Languages`它涵盖了 HTML 和 Javacript 处理的完整概念。

它深入涵盖了词法分析、解析和解释。它仅涵盖 Javascript 的一个子集，因此您在完成课程后还有进一步的开发，但您将获得一般结构和概念。

[1] [http://www.udacity.com/overview/Course/cs262/CourseRev/apr2012](http://www.udacity.com/overview/Course/cs262/CourseRev/apr2012)

# matlab - 零相位实时数字滤波器

> ID：12208174
> 
> 赞同：5
> 
> 时间：2012-08-31T02:32:29.080
> 
> 标签：matlab, filter, filtering, signal-processing

在 matlab 中，我们可以使用 filtfilt 函数过滤掉数据，该函数实现了前向和后向过滤技术，从而导致零相位。但是这个过滤器很难实时实现，因为它涉及反向过滤。

我想实时实现零相位的一阶高通或低通滤波器。我怎样才能做到这一点？

我已经在网上搜索了好几天，但无法从它开始获得任何线索！

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T05:10:09.167

不可能实时执行零相位滤波器，因为零相位滤波器需要围绕零对称的滤波器系数。这意味着过滤器是非因果的，或者当前输出取决于未来的输入。这在实时情况下当然是不可能的，并且可以像在`filtfilt`后处理期间一样被伪造。

您可能正在寻找的是[线性相位](http://en.wikipedia.org/wiki/Linear_phase)滤波器。不要让名字迷惑你；这并不意味着滤波器会产生任何相位失真。这仅意味着对输出应用了时移。相对于频率的线性相移导致相对于时间的恒定偏移。所以基本上你的输出会从输入延迟一些恒定数量的样本（[群延迟](http://en.wikipedia.org/wiki/Group_delay_and_phase_delay)）。

因此，零相位滤波器和线性相位滤波器之间的唯一区别是线性相位滤波器输出是零相位输出的延迟版本。如果您需要保持输出与输入在时间上对齐，则可以通过跟踪群延迟来解决此延迟。

**回复评论：**

如果 FIR 滤波器的系数关于中心对称，则保证 FIR 滤波器是线性相位。[MATLAB 可以使用fir1](http://www.mathworks.com/help/toolbox/signal/ref/fir1.html)或[firpm](http://www.mathworks.com/help/toolbox/signal/ref/firpm.html)等函数轻松创建这些类型的滤波器。这些函数的文档中的示例应该向您展示如何使用它们。

`(L-1)/2`线性相位 FIR 滤波器的群延迟是滤波器`L`的长度。由于这一点和其他一些原因，我通常会选择一个奇数的滤波器长度，以便延迟与样本对齐，而不是在样本之间。这基本上意味着输出信号将从输入延迟`(L-1)/2`采样。

实现实际的滤波过程基本上是输入与滤波器的[离散卷积](http://en.wikipedia.org/wiki/Convolution#Discrete_convolution)。这涉及反转滤波器系数，将它们乘以最近的`L`输入样本，然后将这些结果相加以产生单个输出样本。然后引入一个新的输入样本并再次完成整个过程以产生另一个样本（在滑动窗口上相乘和求和）。你应该可以在网上找到一些卷积的示例代码。

这是执行 FIR 滤波的直接方法，但对于较长的滤波器，使用 FFT执行[快速卷积](http://cnx.org/content/m10963/latest/)可能更有效。这将更加难以正确处理，因此除非您谈论的是高采样率和长滤波器，否则我会采用直接方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:34:37.537

“非因果”零相位滤波器加上足够量的附加延迟可以通过因果线性相位 FIR 滤波器来近似。这假设添加一些延迟符合您的系统要求。

在您的情况下，您可以采用前向+后向不对称（或非线性相位）滤波过程的脉冲响应，将该脉冲响应窗口化以使响应的长度有限，延迟有限长度内核，使其不需要“未来”样本，并将其用作 FIR 滤波器内核。您必须检查结果以查看您选择的窗口的长度和形状是否合适。由于该延迟所需的有限长度窗口，在选择延迟与滤波器质量时可能存在折衷。

# css - 跳跃的菜单项

> ID：12208178
> 
> 赞同：0
> 
> 时间：2012-08-31T02:33:02.577
> 
> 标签：css

我是 CSS 新手，我的一个菜单项有问题。当您滚动菜单项时，它会上下跳跃，这意味着在某处必须有一个填充或边距导致它。我删除了不同的垫和边距，但它仍然跳动。有人可以告诉我我做错了什么吗？

这是代码，如果您将鼠标移到练习区并慢慢移动到“就业法”和“公民权利”上，您将看到菜单/文本跳转。

这里：http: [//jsfiddle.net/v4qnU/1/](http://jsfiddle.net/v4qnU/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:38:51.017

选择器之一，`#menu li:hover`太贪心了。它正在改变导致 jumoing 的 li 元素的高度。我将其更改为`#menu > li:hover`，现在该菜单中没有跳转。我把小提琴分叉到[http://jsfiddle.net/ypJwz/](http://jsfiddle.net/ypJwz/)

# php - 如果存在，如何获取xml文件的子节点，否则使用php跳转到下一个节点

> ID：12208180
> 
> 赞同：0
> 
> 时间：2012-08-31T02:33:40.273
> 
> 标签：php, xml

我有一个类似于以下的 XML 文件

```
<Navigation Name="Klengeräte">
<Market Type="Navigation"></Market>
<Navigation Name="Bodenpflege">

<Market Type="Navigation"></Market>

<Navigation Name="Wöchentches">
<Market Type="Navigation">
</Market>
<Navigation Name="Ultra One">
<personalinfo>
 <Name> testing</Name>
 <grade> A </grade>
<info> test information </info>
</personalinfo>
</Navigation>
</Navigation>
<personalinfo>
<Name> testing</Name>
<grade> A </grade>
<info> test information </info>
</personalinfo>
<personalinfo>
<Name> testing</Name>
<grade> A </grade>
<info> test information </info>
</personalinfo>
</Navigation>
</Navigation> 
```

我想读取 XML 中的个人信息标签

如果有任何案例问题请忽略，我尝试了很多方法，但我没有找到正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:47:51.753

您可以通过使用[DOMDocument](http://www.php.net/manual/en/domdocument.getelementsbytagname.php)来获取“个人信息”标签并使用 foreach 和[DOMNode](https://stackoverflow.com/questions/191923/how-do-i-iterate-through-dom-elements-in-php)进行迭代来做到这一点。

```
$parser = new DOMDocument();
$parser->loadXML($xml);
$infos = $parser->getElementsByTagName('personalinfo');
foreach($infos as $info) { 
  foreach($info->childNodes as $infoChild) {
    echo $infoChild->nodeName . '====' . $infoChild->nodeValue . '<br>';
  }
} 
```

这不是一个完美的解决方案，但它应该让您朝着正确的方向开始。有关您的 xml 的实现，请参阅[http://codepad.viper-7.com/f4u9FC](http://codepad.viper-7.com/f4u9FC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:50:02.257

感谢您的帮助，我得到了解决方案。

我们可以使用获取所有个人标签的信息

```
foreach($temp_xml->xpath('//PersonalInformation') as $product_xml){

  $name = $product_xml{'Name'};

  $grade = $product_xml{'grade'};

} 
```

通过这种方式，我们可以读取任何值。它对我有用。

# php - mysql_query 更新不更新

> ID：12208182
> 
> 赞同：-1
> 
> 时间：2012-08-31T02:34:05.097
> 
> 标签：php, mysql

运行 UPDATE 查询的 mysql_query 对我不起作用，我做错了什么？

```
if($get_ip['user_ip']== ''){
    $insert_ip = mysql_query("UPDATE user SET user_ip='$user_ip' WHERE username='$username' AND password='$password'");
     if(!$insert_ip){
         $message = 'invalid query'.mysql_error();
         die($message);
     }else{
         echo ('success!');
     };
}; 
```

基本上我试图用值 ip_user 更新 user_ip 行的表用户，如果 user_ip 字段当然是空的。

因此，没有任何更新，并且 user_ip 文件仍然为空，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:47:30.213

我可以在您的脚本中看到两件事。

1.  您正在使用`if($get_ip['user_ip']== '')`语句，该语句`$get_ip['user_ip']`仅在为空时插入数据，或者在`$get_ip['user_ip']`有数据时将忽略插入数据。

2.  您正在使用`SET user_ip='$user_ip'`更新查询，我可能不正确，但是我假设您正在尝试从 存储数据`$get_ip['user_ip']`，如果这是这种情况，请使用`SET user_ip='$get_ip['user_ip']'`而不是`SET user_ip='$user_ip'`您的插入查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:39:04.097

```
if($get_ip['user_ip']== '') 
```

除非 $get_ip['user_ip'] 为空，否则将不起作用。

利用

```
if(!empty($get_ip['user_ip'])) 
```

反而

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:06:44.333

这里有很多错误，但为了提供帮助：

将查询字符串分配给变量，而不是直接将其注入`mysql_query`函数中。然后，`echo`这个字符串出来了。这将显示您希望发送到数据库。将该输出复制到某处，然后登录到用于管理数据库的任何内容（我假设它将是 phpMyAdmin）。打开您的数据库，然后打开您要定位的表，然后使用查询编辑器运行您的查询（粘贴您之前复制的输出）。

*   如果您的查询字符串不是您所期望的，那么您有一个代码错误。
*   如果您的查询符合您的预期，并且在数据库工具中运行，则您在连接字符串中使用的用户帐户可能存在权限问题。
*   如果您的查询符合预期，但未在您的数据库工具中正确运行，则您的问题很可能是架构错误。

# android - scrollview 包含一些拖动视图，如何向下拖动带有滚动视图的视图将向下移动

> ID：12208186
> 
> 赞同：0
> 
> 时间：2012-08-31T02:34:37.930
> 
> 标签：android, drag-and-drop, scrollview

在我的应用 Scrollview 中包含一些视图，我想向下拖动视图，同时 Scrollview 会向下移动，但现在为了实现视图向下移动，我必须重写 Scrollview 的 onInterceptTouchEvent 方法以返回 false，因此当向下拖动 Scrollview 的视图不会向下移动。请给我一些帮助。

![在此处输入图像描述](../Images/088930c5e688ddd48d38b65f205642b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:12:19.937

问题已经解决了。

```
if(v.getParent().equals(mLayout)){

            if(event.getRawY()>mDisplayMetrics.heightPixels*2/3+100){
                nonLockingScrollView.scrollBy(0, 5);
            }else if(event.getRawY()<50){
                nonLockingScrollView.scrollBy(0, -5);
            }
        } 
```

# sql-server - 查找跨越多列的数字范围中的空白

> ID：12208188
> 
> 赞同：0
> 
> 时间：2012-08-31T02:35:04.073
> 
> 标签：sql-server, tsql, query-optimization

我正在尝试确定一系列数字（SQL Server）中的差距。我的场景如下...

```
ID   Start   End
1      1      4
2      1      6
3      2      4
4      8     10
5     13     14

Visual
-------------------------------
1-2-3-4
1-2-3-4-5-6
  2-3-4
           - -8-9-10
                    - - -13-14 
```

其结果可能类似于：

```
Table
-------------------------------
ID   Start   End   Gap
4      8     10    -1
5     13     14    -2 
```

最终，我想要有差距范围，但我应该能够从上面弄清楚......

```
Missing
7
11-12 
```

我提出的解决方案要么太慢，要么没有考虑范围重叠（例如 ID 2）

```
CREATE TABLE #Docs (
  [Rank] INT, --DENSE_RANK () OVER(ORDER BY BegProd)
  ControlNumber BIGINT,
  BegProd INT,
  EndProd  INT
)

SELECT
  T1.ControlNumber,
  T1.BegProd,
  T1.EndProd,
  MAX(T2.EndProd) AS [PreviousEndProd],
  [Gap] = T1.BegProd - MAX(T2.EndProd) - 1
FROM #Docs T1
INNER JOIN #Docs T2
  ON T1.[Rank] = T2.[Rank] + 1
  AND T1.EndProd > T2.EndProd
GROUP BY T1.ControlNumber, T1.BegProd, T1.EndProd
HAVING T1.BegProd - MAX(T2.EndProd) > 1 
```

此表中有超过 200 万行，范围跨度为 1 到 10 亿

*编辑* 修复了“缺失”表。间隙列表示在该起始编号之前有多少间隙。（例如缺少 #7 是 1 个数字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:19:30.413

试试这个：

```
create table #docs(id int, start int, [end] int)
insert #docs values(1,1,4),(2,1,6),(3,2,4),(4,8,10),(5,13,14)

;with a as
(
select start, dense_rank() over (order by start) rn
from #docs t where not exists (select 1 from #docs where t.start > start and t.start < [end])
group by start
), b as
(
select [end], dense_rank() over (order by [end]) rn
from #docs t where not exists (select 1 from #docs where t.[end] > start and t.[end] < [end])
group by [end]
)
select 
case when a.[start]= b.[end]+2 then cast(a.start-1 as varchar(21)) 
else cast(b.[end]+1 as varchar(10)) +'-' +  cast(a.start - 1 as varchar(10)) end missing
from a join b on a.rn - 1 = b.rn
and a.[start] <> b.[end] + 1 
```

结果：

```
Missing
7
11-12 
```

# javascript - 奇怪的 html 渲染异常。

> ID：12208194
> 
> 赞同：0
> 
> 时间：2012-08-31T02:37:03.537
> 
> 标签：javascript, html, css, django, web

我不确定这个问题是在 Django 中还是在 HTML 中，所以我将两者都包括在内。这是我右键单击并选择“查看源代码”时看到的 html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/static//CSS/postingformstyle.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div style="width:100%;">

    <span class="posting_title">Original Work</span>

    <form action="" method="post" class="base_form">
        <p><label for="id_title">Title:</label> <input type="text" name="title" id="id_title" /></p>
        <input type="hidden" name="id">8</input>
        <input type="submit" class="posting_button">Post</input>
    </form>
</div>
</body>
</html> 
```

当我单击谷歌浏览器中的检查元素时，这就是我得到的，以及似乎呈现的内容。您注意到表单中缺少所有结束标签。

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>

    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link type="text/css" rel="stylesheet" href="/static//CSS/postingformstyle.css">
</head><body>
<div style="width: 100%;">

    <span class="posting_title">Original Work</span>

    <form class="base_form" method="post" action="">
        <p><label for="id_title">Title:</label> <input type="text" id="id_title" name="title"></p>
        <input type="hidden" name="id">8
        <input type="submit" class="posting_button">Post
    </form>
</div>
</body></html> 
```

这是CSS：

```
.posting_button {
    display:block;
    font-size:20px;
    width:100%;
}
.posting_title {
    text-align:center;
    display:block;
    color:black;
    font-size:30px;
    font-family:Arial, Helvetica, sans-serif;
    margin: 2px 0 15px 0;
}
.base_form label {
    font-size: 17px;
    font-family: arial;
    font-weight: bold;
    display: block;
}
.base_form > p {
    margin: 2px 0 5px 0;
} 
```

这是 Django（如果问题存在）：

模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="{{ STATIC_URL }}/CSS/postingformstyle.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div style="width:100%;">

    <span class="posting_title">Original Work</span>

    <form action="" method="post" class="base_form">
        {{ form.as_p }}
        <input type="hidden" name="id">{{ id }}</input>
        <input type="submit" class="posting_button">Post</input>
    </form>
</div>
</body>
</html> 
```

视图.py

```
def posting_story_ow(request):
    if request.method == 'POST':
        d = 12
    return render_to_response('Posting/Forms/posting_post_ow.html', {'STATIC_URL':STATIC_URL, 'id' : request.GET['id'], 'alertnum': 0, 'form': post_ow}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:39:22.510

问题是您的 HTML。输入标签不应该有一个打开和关闭。

为了实现您想要实现的目标：

```
<input type="hidden" name="id">{{ id }}</input> 
```

你应该这样做：

```
<input type="hidden" name="id" value="{{ id }}"> 
```

* * *

编辑：如果您有兴趣，请说明：http: [//www.w3.org/TR/html401/interact/forms.html#h-17.4](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)

# javascript - 评估与执行脚本

> ID：12208195
> 
> 赞同：6
> 
> 时间：2012-08-31T02:37:47.727
> 
> 标签：javascript, eval

实际上，网络上的每个 javascript 指南都向我喊道 eval 不好，不要使用它，这是一个安全漏洞等等。最近我发现了window.execScript，它似乎和eval 做同样的事情。就安全性或速度而言，一个比另一个更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T02:41:40.547

`window.execScript`不跨浏览器，只有IE支持。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T03:07:26.093

`eval``new Function`很糟糕，但它可以在大多数情况下被替换，它更安全并且它是跨浏览器：

```
var foo = new Function('return 1 + 2');
var baz = eval('function(){ return 1 + 2 }'); 
```

主要区别在于范围访问。可以影响创建另一个范围的`eval`局部变量。`new Function`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-15T08:24:48.967

**2019 年更新。**

eval 还不错，eval 被误解了，真的很强大。几乎是我们开发人员工具的动力。Function 构造函数与 eval 的目的相同，甚至具有相同的安全漏洞

> Function 构造函数创建一个新的 Function 对象。直接调用构造函数可以动态创建函数，但会遇到安全性和与 eval 类似（但不太重要）的性能问题。但是，与 eval 不同的是，Function 构造函数创建的函数仅在全局范围内执行。块引用 [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)

eval 和 Function 存在合法案例，唯一真正的区别是范围的处理方式。

我建议阅读这两篇文章以增加对这个主题的理解[https://blogs.msdn.microsoft.com/ericlippert/2003/11/01/eval-is-evil-part-one/](https://blogs.msdn.microsoft.com/ericlippert/2003/11/01/eval-is-evil-part-one/) [https://javascriptweblog.wordpress。 com/2010/04/19/邪恶如何评价/](https://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)

奖励：如果您想拥有`new Function`或表现相同，您可以通过键入[http://perfectionkills.com/global-eval-what-are-the-options/](http://perfectionkills.com/global-eval-what-are-the-options/)`Function`来简单地使用间接评估`(0, eval)`

所以你去吧， eval 和 Function 几乎是一样的。

附言。`execScript`已被弃用。

**2021 年更新**

如果您正在研究 eval 并且打算做一个沙箱，请帮自己一个忙并使用[https://codesandbox.io/post/sandpack-announcement](https://codesandbox.io/post/sandpack-announcement) `sandpack`之类的东西，它已经解决了为 javascript 实现沙箱时的大部分问题。

# java - 字体，回到默认大小

> ID：12208198
> 
> 赞同：0
> 
> 时间：2012-08-31T02:38:03.350
> 
> 标签：java, swing, fonts, actionlistener

每次我更改字体时，它都会恢复到默认大小，即 12，即使我之前使用“Tamano”菜单更改它，它每次也只会恢复到 12，我猜是我更改的方式大小与派生字体（），但我现在没有任何其他方式来改变它。

```
public static class cambiar extends JFrame {

    public cambiar() {
        final Font aryal = new Font("Comic Sans MS", Font.PLAIN, 12);
        JFrame ventana = new JFrame("Cambios en el Texto!");
        JPanel adentro = new JPanel();
        final JLabel texto = new JLabel("Texto a Cambiar!");
        texto.setFont(aryal);
        JMenuBar menu = new JMenuBar();

        JMenu fuentes = new JMenu("Fuentes");
        /* Elementos de Fuentes */
        JMenuItem arial = new JMenuItem("Arial");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Font arrrial = new Font("Arial", Font.PLAIN, 12);
                float tam = (float) texto.getFont().getSize();
                String hola = String.valueOf(tam);
                texto.setFont(arrrial);
                texto.setFont(texto.getFont().deriveFont(tam));
            }
        });

        fuentes.add(arial);
        /* FIN Fuentes */

        JMenu tamano = new JMenu("Tamano");

        /* Elementos de Tamano */
        JMenuItem font13 = new JMenuItem("13");
        font13.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(texto.getFont().deriveFont(23.0f));
            }
        });

        JMenuItem font14 = new JMenuItem("14");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font15 = new JMenuItem("15");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font16 = new JMenuItem("16");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font17 = new JMenuItem("17");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font18 = new JMenuItem("18");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font19 = new JMenuItem("19");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        JMenuItem font20 = new JMenuItem("20");
        arial.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                texto.setFont(aryal);
            }
        });

        tamano.add(font13);
        /* FIN tanano */

        JMenu tipo = new JMenu("Tipo");

        /* Elementos de tipo */

        /* FIN tipo */

        /* Elementos del JMENU */
        menu.add(fuentes);
        menu.add(tamano);
        menu.add(tipo);
        /* FIN JMENU */

        /* Elementos del JPanel */
        adentro.add(menu);
        adentro.add(texto);
        /* FIN JPanel */

        /* Elementos del JFRAME */
        ventana.add(adentro);
        ventana.setVisible(true);
        ventana.setSize(250, 250);
        /* FIN JFRAME */        
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:49:21.170

原因在于`addActionListener()`您最终添加相同的方法 aryal `font`。

我会建议这样的修改：

```
.addActionListener(new ActionListener(){ 
            public void actionPerformed(ActionEvent e){
                texto.setFont(aryal.deriveFont(size)); //where size is the size that you want to set
            }
        }); 
```

例如，如果您想将`font`大小更改为 20，您可能需要执行以下操作：

```
JMenuItem font20 = new JMenuItem("20");
font20.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        texto.setFont(aryal.deriveFont(20));
    }
}); 
```

注意：这里我假设您正在尝试更改`JLabel` *texto*的字体大小。但是无论你想在哪里使用它，这个想法都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T02:53:48.867

首先，你真的只需要一个动作监听器：

```
private class MenuListener implements ActionListener {
    @Override public void actionPerformed(ActionEvent e) {
        Object caller = e.getSource();
        if (caller != null && caller.instanceOf JMenuItem) {
            JMenuItem src = (JMenuItem)caller;
            String size = src.getText();

            if (size != null) {
                float fontSize = Float.parseFloat(size);
                texto.setFont(aryal.deriveFont(fontSize));
            }
        }
    }
} 
```

然后，当您创建 JMenuItems 时：

```
MenuListener listener = new MenuListener();
JMenuItem font18 = new JMenuItem("18");
font18.setActionListener(listener); 
```

该`deriveFont`方法返回设置为指定大小的字体，但实际上并没有*更改*字体本身。因此，您需要`setFont`使用新大小的字体进行调用。

一般要更改字体大小：

```
Font font; // some font you already have instantiated
float size = 20f; // the target font size
Font newFont = font.deriveFont(size); // the newly sized font 
```

**编辑**

为了回答这个问题，上面的`MenuListener`代码要么需要放在它自己的名为 MenuListener.java 的类中（但你必须这样做`public`）*，要么*你将它放在类中`cambiar`：

```
public class cambiar extends JFrame { 
    ... your existing code here ...

    private class MenuListener implements ActionListener {
        ...
    }
} 
```

# php - 如何在 PHP 中编写分页器效果

> ID：12208199
> 
> 赞同：1
> 
> 时间：2012-08-31T02:38:10.393
> 
> 标签：php

对不起，我是PHP的新手。现在想学习如何用PHP写一个分页效果。我知道网上有很多这方面的教程。我搜索了它并参考了它们。但是，当我自己尝试并且没有参考其他资源时，我仍然不知道如何用PHP编写分页效果。

现在，我想知道用 PHP 编写分页的基本和重要的事情是什么。如果有人可以给我更多的细节，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:50:51.060

在这个例子中，我将使用 MySQL，因为它是一个与 PHP 一起使用的流行数据库。一般原则适用于其他数据库，但使用 SQL 实现结果的精确方式不同。

分页的本质是你有一个数字记录，比如 105，你只想一次显示一个更小、更易于管理的记录，比如 10 个。为此，您需要知道如何找出记录的总数，并且需要知道如何仅选择记录的子集。

首先，找出你有多少条记录。为此，您使用 COUNT(*) 来计算表中的记录。如果您的表称为用户：

```
SELECT COUNT(*) FROM Users; 
```

由于我们说表中有 105 条记录，所以这将返回结果`105`。我们说每页有 10 条记录，所以计算一下总共有多少页：105 / 10 = 10.5；向上取整到 11，因为第 10 页之后的额外记录需要自己的页面。因此，总共有 11 页。您的网页将显示控件，使用户能够选择从 1 到 11 的页面。

您一次只获取一页，而不是获取所有记录。在 MySQL 中，您通常使用`LIMIT`关键字来执行此操作；这允许您选择一系列记录。`LIMIT`语法如下：`LIMIT $SKIP, $COUNT`，其中`$SKIP`是要跳过的结果集中的记录数，`$COUNT`是要返回的数。（实际上，你会得到*记录* `$COUNT`，以防可用的更少。）

用户已请求第 6 页。这意味着我需要跳过 5 页才能显示结果。每页有 10 条记录，这意味着我将跳过 5 * 10 条记录，即 50 条记录。换句话说，`$SKIP = ($PAGE_NUMBER - 1) * $PAGE_SIZE`. 您的查询将如下所示：

```
SELECT User_ID, UserName, City, State from Users LIMIT 50, 10; 
```

这为您提供了表的 51-60 条记录。

请参阅文档以了解有关 LIMIT 工作原理的更多信息：

[http://dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

现在您有了单页记录。但是，记录的编号取决于它们的顺序。上面的查询会给你不可预知的结果，因为排序是未定义的。（数据库可以按照它选择的任何顺序返回记录，除非您命令它使用某种顺序。）因此，要进行分页，您需要定义记录的顺序。使用 ORDER BY 定义排序：

```
SELECT User_ID, UserName, City, State from Users ORDER BY UserName LIMIT 50, 10; 
```

这使您可以显示不同的结果页面，并且始终知道当您显示第 6 页时，它包含第 5 页上的记录之后和第 7 页上的记录之前的记录。

（如果您的记录没有任何自然顺序，则必须定义一个任意顺序以使其正常工作。）

我在这个答案中完全避免提到 PHP，因为我认为没有必要这样做来解释分页。分页完全是处理数据的问题。如果您理解这一点，我认为您可以阅读这些教程，它们对您来说很有意义，然后您就可以了解如何编写 PHP 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:50:31.210

1.  获取页码
2.  知道每页要显示多少项目。
3.  使用 mysql 命令“LIMIT”，获取偏移量并选择所需的行数。

想使用类？[http://net.tutsplus.com/tutorials/php/how-to-paginate-data-with-php/](http://net.tutsplus.com/tutorials/php/how-to-paginate-data-with-php/)

或者只是一个简单的脚本来修改？[http://pastebin.com/J8nTk1q5](http://pastebin.com/J8nTk1q5)

如果您是 PHP 新手，那么您需要了解更多 PHP 或冒着将来混淆的风险。

# facebook - 我可以依靠“共享主机上的 SSL”吗？

> ID：12208200
> 
> 赞同：-1
> 
> 时间：2012-08-31T02:38:24.917
> 
> 标签：facebook, api, ssl, https, shared-hosting

我的网站将使用 Paypal 等 API 并制作 Facebook 应用程序。因此，对于 Facebook，他们只允许应用程序使用**https**。我的仅托管在**http**站点上。

*   那么我可以通过购买包含**SSL的****共享主机**来解决这个问题吗？

 **这是一个解决方案吗？还是我需要自己购买证书？

我对 SSL 没有足够的了解。请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:08:59.260

有很多提供商在共享主机上为您的域提供 SSL 证书。通常他们会为您处理安装，不确定您是否可以安装自己的证书。一些提供商甚至提供免费使用他们自己的证书，但您将不得不使用类似的 URL `https://www.providerdomain.com/yourdomain/...`。

除了不严肃的产品之外，您还可以区分更便宜的域验证 SSL 证书和更昂贵的扩展验证 SSL 证书 (EV)。两种证书在技术上是相同的（连接是加密的），但经过域验证的证书更便宜，因为卖家只需要检查域。EV 证书还需要有关域所有者的信息，卖方应检查此信息是否正确（更多管理工作）。

在大多数情况下，经过域验证的证书很好，用户不会有任何缺点，而且 EV 证书确实（太）贵了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:28:55.887

> 那么我可以通过购买包含 SSL 的共享主机来解决这个问题吗？

共享主机上的 SSL 通常意味着您不能通过 SSL 访问*自己的*域，但必须使用类似`https://youraccount.yourhostersserver.tld`

这意味着，如果您服务器上的其他用户也只依赖共享 SSL 证书，他们可能会在他们的应用程序中使用相同的域。让其中一个在 Facebook 上发送垃圾邮件，在最坏的情况下，整个域`yourhostersserver.tld`可能会被 Facebook 屏蔽。

此外，如果用户与您的应用程序网站“直接联系”，他们也可能会看到此 URL（只要您留在 Facebook、画布/页面选项卡应用程序中，大多数用户可能不会注意到它）。

所以我不会真的推荐这个选项；至少不是因为你认为重要的事情。**

# git - 许多相互依赖的子模块的工作流程

> ID：12208206
> 
> 赞同：1
> 
> 时间：2012-08-31T02:39:48.520
> 
> 标签：git, git-submodules

在我的公司，我们有几个伪独立的团队，每个团队拥有多个存储库（但有时会编辑另一个团队的代码）。大多数模块是相互依赖的，尽管最接近我们“基础设施”级别的模块基本上是独立于其他的。

目前我们有一堆脚本来处理诸如克隆和更新所有模块之类的事情，还需要（在这种情况下主要是自动化的）维护模块的文本列表。显然，这是我相信/希望`git submodule`可以填补的角色。

我希望至少能够：

使用类似于 的单个命令克隆整个源代码树`git clone main_repository`。

使用类似于 的命令更新整个源代码树`git pull`。看起来这很简单`git submodule foreach git pull`，尽管我可能会为`git submodule foreach git`. 我们当前的设置并行执行此步骤（一次四个），我希望子模块设置执行相同的操作。看起来更新子模块会使它们显示为已更改（用于提交）。我可以理解这背后的逻辑，但是我们当前的系统在 .gitignore 中有伪子模块，因为您通常只关心自己模块的更改。

我想要一个`git grep`适用于整个树的类比。乍一看，它似乎`git submodule foreach git grep hello`可以工作，但如果*没有*找到搜索字符串（我们有几个很小的子模块，所以这通常是正确的）然后 grep 返回`1`并且整个命令停止。

我想要 diff 和 status 的类似有用的类似物。

我可以想到一些解决方法，但是我们已经有一组 hacky 脚本来完成我想要的大部分工作，我希望/想知道是否有一个很好的标准简单方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:35:35.057

> 我可以想到一些解决方法，但是我们已经有一组 hacky 脚本来完成我想要的大部分工作，我希望/想知道是否有一个很好的标准简单方法来做到这一点。

不带子模块；不适用于您描述的用例。子模块对于高度相互依赖、经常更新的代码表现不佳，正如各种[SO 答案](https://stackoverflow.com/a/1979194/877115)和[网络上所记录的那样。](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)第二个链接（标题为“为什么您的公司不应该使用 git 子模块”）列出了一些可能对您有用的替代方案，根据您的描述，其中最好的可能是[repo，](http://code.google.com/p/git-repo/)一个由谷歌。

# asp.net - IIS 8.0 ASP.NET 和错误 500.19

> ID：12208209
> 
> 赞同：40
> 
> 时间：2012-08-31T02:40:04.930
> 
> 标签：asp.net, iis-8

我似乎无法让任何 ASP.NET 站点在 Windows 8 上的 IIS8 下运行。在 IIS Express 下它们很好，但我已经：

1.  安装 IIS8
2.  在 IIS 中安装 ASP.NET 3.5 和 4.5 功能
3.  创建了一个有效的应用程序池
4.  在 IIS 管理器中添加了一个指向我的站点的新应用程序

但我得到： HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

配置源：-1：0：

有任何想法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-31T08:13:40.140

ASP.Net 应用程序预装了 web.config 中的处理程序部分。

默认情况下，这在 IIS 的功能委派中设置为只读。

查看 IIS 管理器，在*Server name* → *Feature delegate*下。如果 Handler Mappings 设置为 readonly 并且您的站点 web.configs 有一个 handlers 部分，则将值翻转为读/写，看看会发生什么。

迁移到 Windows 8 / IIS 8 / ASP.Net MVC 4 时为我工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-06T01:00:11.873

1.  点击“开始按钮”
2.  在搜索框中，输入“打开或关闭 Windows 功能”
3.  在功能窗口中，单击：“Internet 信息服务”
4.  点击：“万维网服务”
5.  点击：“应用程序开发功能”
6.  检查（启用）这些功能。我检查了所有但没有 CGI。

我正在使用 w10 技术预览版

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-20T09:07:50.467

我有同样的问题，这是因为应用程序池没有网站目录或 web.config 的权限。尝试通过读取、执行、列表授予“IIS_IUSRS”的权限。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-24T17:15:08.647

在将 Web 应用程序从 IIS 7 移动到 8 时，我遇到了同样的问题，我通过安装我完全忘记的[URL 重写模块解决了这个问题。](http://www.iis.net/downloads/microsoft/url-rewrite)因此，请检查您的新服务器/IIS 上是否安装了正确的模块等。

您也可以使用 WPI（Web 平台安装程序）安装此模块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-07T08:57:30.240

如果你有一台新机器/格式化你的机器，在安装 IIS 时，确保你勾选了安装 ASP.Net（适当的版本）。

提示：打开/关闭 Windows 功能 --> IIS --> 应用程序开发功能 --> ASP.Net 3.5 / 4.6

最近我已经升级到 Windows 10 (IIS 10)，因为我忘记安装 ASP.Net，所以我遇到了这个问题。

其他故障排除提示是：

2) 确保您已授予 IIS_IUSRS 组对应用程序文件夹的读取权限。

3) 您可以检查您的应用程序池是否选择了正确的目标 .Net 框架。

4) 确保您的 Web.config 正确（定义明确的 XML）并且没有错误。谢谢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-04T11:28:09.247

在 web.config 中查找无效的配置部分。

在 IIS 管理器中，我无法打开任何功能，例如模块等。

在我的 web.config 中，我之前使用的图表对象中有一个无效的配置部分：

```
<system.webServer>
    <httpHandlers>
        <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
    </httpHandlers>
</system.webServer> 
```

在我删除它之后，一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-10T22:15:16.650

在尝试了以上所有方法之后，我仍然卡住了，所以我决定去看看我的错误消息中引用的文件，“c:\some\path\web.config”

它是 3KB，我将其重命名为“_web.config”，脚本立即开始正常工作。

我假设原始创建的内容是在我无数次更改之前设置的。通过我所做的所有更改，它现在可以创建一个正确的 web.config。

伙计们，如果上述方法无法让您到达您需要的地方，请尝试一下。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-16T07:15:06.757

终于整理好我的了！耶稣。我在我的项目中使用 git hub 并将其下载到每台 PC 上略有不同的位置。

当我尝试 unc 到配置文件时，提到的错误我注意到它实际上是其他电脑使用的路径。根本无法在项目中列出这个，所以只需右键单击 VS 中的项目文件并卸载它，再次加载它，它现在可以工作了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-22T15:36:44.453

您可能首先尝试过，但您是否尝试过关闭并重新打开电脑？我首先尝试了上述所有方法都无济于事，而只是这样做对我有用。可能我之前的一项操作锁定了我项目中的一个重要文件。

# c++ - 在 C++ 中从文本文件加载变量

> ID：12208220
> 
> 赞同：0
> 
> 时间：2012-08-31T02:42:53.637
> 
> 标签：c++

我知道这个问题之前已经被问过一百万次了，但是大多数问题都比我需要的复杂。我已经知道哪些行会有哪些数据，所以我只想将每一行加载为自己的变量。

例如，在“settings.txt”中：

```
800
600
32 
```

然后，在代码中，第 1 行设置为 int winwidth，第 2 行设置为 int winheight，第 3 行设置为 int wincolor。

抱歉，我对 I/O 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:51:45.857

您可以做的最简单的事情可能是：

```
std::ifstream settings("settings.txt");
int winwidth;
int winheight;
int wincolor;

settings >> winwidth;
settings >> winheight;
settings >> wincolor; 
```

但是，这并不能确保每个变量都在新行上，并且不包含任何错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:54:51.897

```
#include <iostream>
#include <fstream>
#include <string>

using std::cout;
using std::ifstream;
using std::string;

int main()
{
    int winwidth,winheight,wincolor;       // Declare your variables
    winwidth = winheight = wincolor = 0;   // Set them all to 0

    string path = "filename.txt";          // Storing your filename in a string
    ifstream fin;                          // Declaring an input stream object

    fin.open(path);                        // Open the file
    if(fin.is_open())                      // If it opened successfully
    {
        fin >> winwidth >> winheight >> wincolor;  // Read the values and
                           // store them in these variables
        fin.close();                   // Close the file
    }

    cout << winwidth << '\n';
    cout << winheight << '\n';
    cout << wincolor << '\n';

    return 0;
} 
```

ifstream 可以与提取运算符 >> 一起使用，与使用 cin 的方式非常相似。显然，文件 I/O 比这要多得多，但根据要求，这使它保持简单。

# c++ - c++编码标准#define头文件

> ID：12208222
> 
> 赞同：3
> 
> 时间：2012-08-31T02:42:57.177
> 
> 标签：c++, standards, header-files

我正在阅读《C++ 编码标准：101 条规则、指南和最佳实践》一书，它说使用`#define`不好。当我查看一些头文件时，它们有很多`#define`s. 如果用`#define`s不好，为什么会有这么多？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:22:36.190

`#define`是一种不好的做法，因为：

> ***他们没有任何范围：***

`#define`s 不尊重范围，因此无法创建类范围命名空间。虽然变量可以在类中作用域。

> ***编译错误期间奇怪的神奇数字：***

如果您使用`#define`的是那些在预编译时被预处理器替换所以如果您在编译过程中收到错误，那将是令人困惑的，因为错误消息不会引用宏名称而是值并且它会出现一个突然的值，并且在代码中跟踪它会浪费大量时间。

> ***调试问题：***

同样出于#2 中提到的相同原因，调试`#define`实际上并不会提供太多帮助。

因此，使用`const`变量而不是`#define`.
它们优于`#define`上述所有方面。`#define`只有在您需要在代码中进行实际文本替换或定义包含标头保护时才能真正有用的领域。

> **为什么`#define`在C标准头文件中被广泛使用？**

我想到的一个原因是，在 C（与 C++ 不同）中，`const`声明不会产生常量表达式。这意味着在 C 标准中引入***可变长度数组***之前，不能编写如下内容：

```
const int max_val = 100;  
int foos[max_val]; 
```

因为在 C`max_val`中不是编译时间常数，在引入 VLA 的数组下标之前需要编译时间常数。
所以不得不把它写成：

```
#define MAX_VAL 100  
int foos[MAX_VAL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T02:51:54.697

这可能指的是定义常量的旧 C 方法：

```
#define MAX_SOMETHING 100

int x = MAX_SOMETHING; 
```

这些常量没有类型化，它们使用字符串替换就地扩展，并且使得调试变得更加困难，因为一旦源代码被编译，就不清楚该定义的来源。

一种更 C++ 的做法是：

```
const int max_something = 100;

int x = max_something; 
```

由于这是一个强类型值，因此需要进行所有必需的检查和适当的转换。

另一个好处是`const`可以将值放入名称空间和类中以用于组织目的。A`#define`在范围内是全局的，因此冲突是一个问题，这会导致笨拙的长名称以避免冲突。

之间`const`和`template`，它允许一种形式的元编程 C 本身不做，需要的场合的数量`#define`是相当减少的。但它并没有完全消除，因为没有`#import`指令，您仍然需要添加旧的`#ifndef __HEADER_FILE_NAME__`守卫以确保不包含两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T02:51:08.940

这本书的广泛陈述并不是那么正确 -`#define`宏等有它的位置，但对于定义常量，现在使用它不是一个好主意

例如

```
 #define FOO 257 
```

最好在

```
const int FOO=257; 
```

这允许类型检查，因为使用#define 这变得有点奇怪

```
char c=FOO; 
```

# php - Magento 购物车规则条件 - 自定义条件报价 ID

> ID：12208223
> 
> 赞同：1
> 
> 时间：2012-08-31T02:43:00.470
> 
> 标签：php, magento, magento-rules

我想动态地创建一个购物车规则以应用于特定的报价 ID。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:10:49.017

好问题金策。

但问题是：报价ID是随机给出的。您必须为客户一一检查。客户结账订单少 1 分钟怎么样？我们不知道报价 ID 是什么，并且已经转换为订单 ID。

但是，答案是**可以**的。看一下这个。

[具有自定义条件的购物车规则？](https://stackoverflow.com/questions/11864012/shopping-cart-rules-with-custom-condition)

# java - java添加函数，添加时都成为最后一组数据

> ID：12208224
> 
> 赞同：0
> 
> 时间：2012-08-31T02:43:21.810
> 
> 标签：java

turn1.length只有3组数据，添加temp时，应该有3组不同的数据。但是，我添加后，即使有3组对象，其中的日期预计是最后一组日期，全部。我在调试模式下看到三个不同的数据，当前属性将在每个周期覆盖 temp 中的上一个数据。

我该如何解决？

```
 String[] turn1 = idList.split(","); 
  String[] turn2 = labelList.split(","); 
  Attribute attribute = new Attribute(); 
  List<Attribute> Temp = new ArrayList<Attribute>(); 

for(int i=0;i<turn1.length;i++){ 
    long getId; 
    getId = Integer.parseInt(turn1[i]); 
    attribute.setId(getId); 
    attribute.setLabel(turn2[i]); 
    Temp.add(attribute); 
   } 
for(int i=0;i<3;i++) 
System.out.println(Temp.get(i)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T02:49:34.750

您正在循环中更改相同的对象，当您将对象添加到列表时，这不会复制对象，只是引用该对象，因此列表中的每个元素都将指向相同的原始对象。

你应该做的是新`Attribute`的循环内部。

```
String[] turn1 = idList.split(","); 
String[] turn2 = labelList.split(","); 
List<Attribute> Temp = new ArrayList<Attribute>(); 

for(int i=0;i<turn1.length;i++){ 
    long getId;
    Attribute attribute = new Attribute(); 
    getId = Integer.parseInt(turn1[i]); 
    attribute.setId(getId); 
    attribute.setLabel(turn2[i]); 
    Temp.add(attribute); 
} 

for(int i=0;i<3;i++) 
System.out.println(Temp.get(i)); 
```

# ios - Core Data fetch 一开始不是“故障”，而是变成了“故障”

> ID：12208227
> 
> 赞同：4
> 
> 时间：2012-08-31T02:44:05.477
> 
> 标签：ios, core-data, fault

我有一个具有此方法的单例数据管理器：

```
-(NSArray*)fetchItems
{
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Item" inManagedObjectContext:self.managedObjectContext];

NSError *error2;
NSFetchRequest *itemFetchRequest = [[NSFetchRequest alloc] init];
[itemFetchRequest setEntity:entity];
[itemFetchRequest setReturnsObjectsAsFaults:NO];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"order"
                                                               ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[itemFetchRequest setSortDescriptors:sortDescriptors];

NSArray *fetchedItems = [self.managedObjectContext executeFetchRequest:itemFetchRequest error:&error2];

return fetchedItems;

} 
```

然后我基于核心数据对象创建一些视图，如下所示：

```
self.items = [dataManager fetchItems];
for (Item *item in self.items) { //Item is the NSManagedObject subclass
    ItemView *itemView = [[ItemView alloc] initWithFrame:aFrame ];

    [itemView layoutWithData:item];
    [self.someView addSubview:itemView];

} 
```

ItemView 的数据设置如下：

```
- (void)layoutWithData:(Item*)_data {
self.data = _data;

NSLog(@"ItemView data: %@", self.data); //not "fault" at this point
...

UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setImage:data.image forState:UIControlStateNormal];
[btn addTarget:self action:@selector(tapDetected:) forControlEvents:UIControlEventTouchUpInside];
btn.frame = aFrame;
[self addSubview:btn];

} 
```

至此，ItemView 的数据已定义，并非“故障”。但是，当像这样检测到点击时：

```
- (void)tapDetected:(id)sender
{
NSLog(@"TAP: %@", self.data); //fault - see below
[self.delegate itemTapped:self.data];
} 
```

我得到这样的东西：

```
TAP: <Item: 0x879ce40> (entity: Item; id: 0x8798310 <x-coredata://8BE9ABFE-7C63-4ADD-9AD1-62B81C5AFF66/Item/p66> ; data: <fault>) 
```

为什么当我点击 ItemView 时数据首先是“非故障”，然后是“故障”，我该如何解决？这已经害死我一整天了...

编辑：使用此代码，我可以确认数据不是 layoutWithData 方法中的错误，而是 tapDetected 方法中的错误：

```
NSLog(@"is fault? %i", self.data.isFault); 
```

为什么会变成故障？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T11:28:01.063

这可能不是真正的问题，而是意味着尚未读取数据的故障。在获取之前尝试执行以下操作：

```
[fetchRequest setReturnsObjectsAsFaults:NO]; 
```

这样数据将被完全读取。

查看 [类似问题](https://stackoverflow.com/questions/13046291/core-data-fault)

# ios - 除非调用 reloadData，否则编辑模式下的 UITableView 不会显示插入，这会杀死动画

> ID：12208228
> 
> 赞同：0
> 
> 时间：2012-08-31T02:44:12.247
> 
> 标签：ios, uitableview, setediting

我有一个包含三个部分的 UITableView，第二部分的表格在编辑模式下显示插入和删除指示器。我正在为 cellForRowAtIndexPath 中的插入行添加一个单元格：当编辑为 YES 时。此外，当表格进入编辑模式时，我会减少部分的数量，因此第三部分不会显示（它有一个按钮，我想在编辑模式下隐藏它）。除非我在 setEditing 中调用 [self.tableView reloadData] 我看不到插入行，但是当我调用它时没有动画。我究竟做错了什么？

```
- (void)setEditing:(BOOL)flag animated:(BOOL)animated

{
  [super setEditing:flag animated:YES];
  [self.tableView setEditing:flag animated:YES];
  //unless i add [self.tableView reloadData] i don't see the + row, but then there is no animation
  [self.tableView reloadData]; 
```

为了确定我正在做的部分的数量

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return self.editing ? 2 : 3;
} 
```

要添加插入行，我在 cellForRowAtIndexPath 中执行此操作

```
 if (indexPath.row == [[[self recipe] tasks] count])
 {
    cell.textLabel.text = @"Add task...";
    cell.detailTextLabel.text = @""; 
```

非常感谢任何帮助。我很尴尬地说我在这上面浪费了多少时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:53:07.453

您需要使用`UITableView`' 更新方法。查看 Apple 关于该主题的[综合指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW1)以获取更多详细信息，但此代码片段应该会给您一个想法。请注意，当您的表格视图离开编辑模式时，您应该执行相反的操作。

```
NSIndexPath *pathToAdd = [NSIndexPath indexPathForRow:self.recipe.tasks.count section:SECTION_NEEDING_ONE_MORE_ROW];
NSIndexSet *sectionsToDelete = [NSIndexSet indexSetWithIndex:SECTION_TO_DELETE];
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:@[ pathToAdd ] withRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView deleteSections:sectionsToDelete withRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView endUpdates]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:35:23.277

非常感谢，卡尔。完美的。我曾多次阅读 Apple 文档，但没有得到它。一个谷歌示例让我走错了路。问题解决了，看起来真的很好。:)

```
NSIndexPath *pathToAdd = [NSIndexPath indexPathForRow:self.recipe.tasks.count section:1];
NSIndexSet *sectionsToDelete = [NSIndexSet indexSetWithIndex:2];
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:@[ pathToAdd ] withRowAnimation:UITableViewRowAnimationAutomatic];
// update the datasource to reflect insertion and number of sections
// I added a 'row' to my datasource for "Add task..."
// which is removed during setEditing:NO
[self.tableView deleteSections:sectionsToDelete withRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView endUpdates]; 
```

托德

# java - 当我的机器进行 DNS 查询时，如何动态设置源 IP 地址？

> ID：12208231
> 
> 赞同：0
> 
> 时间：2012-08-31T02:44:57.823
> 
> 标签：java, linux, dns, centos, spoofing

PushToTest 对社交/移动 Web 应用程序进行性能测试。例如，我们使用 20 个 AWS EC2 c1.medium 实例在 10 分钟内生成 50,000 个用户事务。

我们的 TestMaker 软件是 Java 并且在 EC2/Centos、Windows、Linux、Unix 上运行以操作虚拟用户。每个虚拟用户操作一个无头浏览器。浏览器运行一个测试用例来运行应用程序。

我们客户的站点通常由 Akamai Edge Cache 提供服务。用户的浏览器对 IP 地址进行 DNS 查询，然后 Akamai 动态查找离用户最近的边缘缓存（称为区域）。边缘缓存提供站点的 HTML 和该区域的媒体（jpg、png、Flash 等）。

我们的测试解决方案需要将 DNS 查询作为一组源 IP 地址。每个 EC2 实例都需要来自测试环境设置的唯一 IP 地址。它是来自北美各地的一系列 IP 地址。PushToTest 提供 IP 地址。

我们需要一种方法在 Centos 实例进行 DNS 查询时告诉它源 IP 地址。

我们如何在 EC2 中做到这一点？

-坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:55:41.743

你不能这样做。您可以通过降低 TCP/IP 堆栈来设置源 IP，但结果不会被路由回您。它将被路由到切换到的 IP，因此建议可能使用代理来帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:03:14.440

感谢您的回复。

我们通过从多个 AWS 机器实例运行测试解决了这个问题。我们在谷歌上搜索了美国的 DNS 服务，屏幕抓取了结果，构建了一个美国 100 个 DNS 服务的列表。我们将列表保存到逗号分隔值 (cdv) 文件中。

我们在 100 个 AWS 机器实例中使用 PushToTest TestMaker 运行了测试 - TestMaker 自动启动了这些实例。该测试使用 TestMaker 的唯一数据生产库 (UniqueDPL) 服务来唯一地设置每个机器实例的 DNS 客户端以使用来自 csv 文件的 DNS 服务器。

Akamai 使用 DNS 定位魔法来找出最接近 DNS 服务的区域。我希望 Akamai 提供一个 REST API 来识别他们托管的许多区域的标头。

-坦率

# r - distr package-如何在一个窗口中绘制两个图？

> ID：12208233
> 
> 赞同：2
> 
> 时间：2012-08-31T02:45:09.827
> 
> 标签：r, plot, ggplot2

我`distr`用来形成以下分布：

```
library(distr)

G1 <- Gammad(shape=1.64, scale=0.766)
G2<- Gammad(shape=0.243, scale=4.414) 
```

现在为了比较这两个分布，我需要在一个窗口中绘制它们，但我不知道如何。我试过`ggplot`了，但显然它不适用于伽马函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:55:13.463

# 使用 ggplot

您可以使用`stat_function`

例如

```
# data that defines the range of x values you are interested in
DF <-data.frame(x = c(1,8))
ggplot(DF, aes(x=x)) + 
  stat_function(fun = d(G1), aes(colour = 'G1')) + 
  stat_function(fun = d(G2), aes(colour = 'G2')) + 
  scale_colour_manual('Distribution', 
           values = setNames(c('red', 'blue'), c('G1', 'G2'))) 
```

![在此处输入图像描述](../Images/b82000e1cc1dd6eb95752259177efafe.png)

# 使用基地

帮助文件`distr::plot`显示了如何组合绘图。

您需要自己设置`mfrow`（或`mfcol`），然后`mfColRow =FALSE`在情节调用中设置。

例如：

```
par(mfrow=c(2,3))
plot(G1, mfColRow=F)
plot(G2, mfColRow=F) 
```

![在此处输入图像描述](../Images/4bdeb354975a819cfc2dc8ecf5935e0b.png)

# objective-c - Objective-C numberOfSectionsInTableView - 查询以按字母顺序返回部分

> ID：12208235
> 
> 赞同：1
> 
> 时间：2012-08-31T02:45:17.240
> 
> 标签：objective-c, ios, uitableview

我目前有一个可用的 TableView 应用程序，它带有一个后端 sqlite 数据库来提供数据。第一个视图返回静态标题为“States”的所有状态。我想将其更改为按字母顺序返回各州（例如，阿拉巴马州、阿拉斯加州、亚利桑那州、阿肯色州将属于“A”部分——加利福尼亚、科罗拉多州、康涅狄格州将属于“C”部分等） .

我的 appdelegate 调用一个查询来“从状态中选择 id，状态”。我有我认为可以工作的代码来创建下面的部分（我已经通过创建一个只有状态作为对象的 NSMutableArray 对此进行了测试，它工作正常）。

```
stateIndex = [[NSMutableArray alloc] init];

for (int i=0; i<[listOfStates count]-1; i++){
    //---get the first char of each state---
    char alphabet = [[listOfStates objectAtIndex:i] characterAtIndex:0];
    NSString *uniChar = [NSString stringWithFormat:@"%C", alphabet];

    //---add each letter to the index array---
    if (![stateIndex containsObject:uniChar])
    {            
        [stateIndex addObject:uniChar];
    }        
} 
```

没有警告/错误，我运行模拟器但它崩溃了。过了一会儿，我才明白为什么它会崩溃。我试图在搜索过程中查找字母字符，但由于原始查询同时调用 id 和状态名称，它正在查看 id 并失败。搜索中需要 id，因为它链接到另一个表，该表根据所选州加载城市。id 是主键。

所以，我的问题是......有没有办法在这个搜索过程中剥离或跳过 id 字段以创建字母部分？

先感谢您！

更新 SchoolHouse.h ========

```
#import <UIKit/UIKit.h>
#import <sqlite3.h>

@interface SchoolHouse : NSObject {

}

@property (assign, nonatomic, readonly) NSInteger schoolHouseID;
@property (copy, nonatomic) NSString *schoolHouseName;

-(id) initWithSchoolHouseData:(NSInteger)pk schoolHouseName:(NSString *)name;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:38:31.660

请参阅下面的新代码。

我猜它崩溃的原因是因为可变数组中的某些字符串长度为零（`@""`），并且您无法从空字符串中获取第一个字母。我已经添加了一张支票来停止迎合这个。您的`for`循环条件也将跳过最后一个元素，所以我已经解决了这个问题。另外，我强制第一个字母为大写，所以`@"New York"`两者`@"nevada"`都下降`@"N"`（只是为了使代码更健壮。如果这仍然不适合你，请告诉我：

编辑为使用一组`SchoolHouse`对象。

在文件的顶部，确保您有：

```
#include "SchoolHouse.h" 
```

然后将您拥有的代码替换为：

```
NSMutableArray *stateIndex = [[NSMutableArray alloc] init];

for (int i=0; i < [listOfStates count]; i++) {
    SchoolHouse *schoolHouse = [listOfStates objectAtIndex:i];

    //---skip the object if it's the wrong class---
    if (![schoolHouse isKindOfClass:[SchoolHouse class]]) continue;

    //---skip the object if it's name is empty---
    if (schoolHouse.schoolHouseName.length == 0) continue;

    //---get the first char of the name---
    unichar firstChar = [schoolHouse.schoolHouseName characterAtIndex:0];
    NSString *charString = [[NSString stringWithCharacters:&firstChar length:1] uppercaseString];

    //---add each letter to the index array---
    if (![stateIndex containsObject:charString]) {
        [stateIndex addObject:charString];
    }
} 
```

# c# - C# 数组有问题

> ID：12208237
> 
> 赞同：1
> 
> 时间：2012-08-31T02:45:23.307
> 
> 标签：c#

请记住，我没有太多的编码经验...

我在访问数组时遇到问题。我正在使用返回数组的函数创建数组，这是一个示例：

```
int[] ArrayName = ReturnArray(string); 
```

因此，既然 ArrayName 已经创建，它应该与 ReturnArray 返回的内容相同吗？

好吧，我在以下位置设置了一个断点：

```
int[] ArrayName = ReturnArray(string); 
```

我可以看到 ArrayName 已正确创建。

好吧，当我尝试像这样访问 Array 的 1 个值时：

```
print(ArrayName[0]); 
```

它应该只返回数组中的第一个值吗？好吧，不是！它返回一个多于一个值，并且该值甚至与 ReturnArray(string) 返回的值不匹配

这是“ReturnArray”函数：

```
 public static int[] ReturnArray(string t)
    {
        int i,ii,;
        string ba;
        string base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        List<int> list = new List<int>();
        for (i = 0; i < t.Length;i++)
        {
            ba = t.Substring(i, 1);
            ii = base64.IndexOf(ba) * 64;
            list.Add(ii);
        }
        return list.ToArray();
    } 
```

添加了更多代码来响应评论

```
 private void outputLoop()
    {
        int i = 0;
            for (i = 0; i < 63; i++)
            {
                int te = lines[i].Length - 128;
                string tes = lines[i].Substring(te, 64);
                int[] ArrayName = ReturnArray(tes);
                _textlayer.DrawString(_font, ArrayName[i].ToString(), new Vector2(1100, i * 15), Color.White);
          }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:52:37.587

这是一个工作示例。让我们解构。

```
static void Main( string[] args ) {
    // declare a variable and assign it to the return value of ReturnArray()
    var arr = ReturnArray( "foo" ); 

    // get the first value in the array
    var first = arr[0];
}

public static int[] ReturnArray( string t ) {
    int i, ii;
    string ba;
    string base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    List<int> list = new List<int>();
    for( i = 0; i < t.Length; i++ ) {
        ba = t.Substring( i, 1 );
        ii = base64.IndexOf( ba ) * 64;
        list.Add( ii );
    }
    return list.ToArray();
} 
```

首先，如果您正在尝试制作 base 64 算法，它已经完成并且[在 framework 中](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)。如果您正在尝试学习，那很好，但是有一些例子可以继续。

```
ii = base64.IndexOf( ba ) * 64; 
```

其次，您的代码确实返回了我所期望的，即来自`IndexOf() * 64`.

这个小例子产生`1984, 2560, 2560`了“foo”，索引 0 处的值是 1984。

“AAA”产生`0, 0, 0`，因为 IndexOf() 是 0 * 64。

如您所料，“BBB”产生`64, 64, 64`，因为 IndexOf() 返回 1，然后乘以 64。

更多调试代码（基于注释）：

```
int[] arr = ReturnArray( "DADBALAMANAOAAABAYAZAaAbAcAdAeAff/BIBJBKBLBMBNBOBJBKBLBMBNBOBPf/AAABAoApAqArAsAt‌​AuAvf/f/+4+5f/f/f/AAABf/B4B5B6DQAZAaAbAcAdAeAZAa" );

// should print "192"
System.Diagnostics.Debug.WriteLine( arr[0] ); 
```

# facebook-graph-api - 首选货币 API 仅返回 ID

> ID：12208238
> 
> 赞同：1
> 
> 时间：2012-08-31T02:45:27.470
> 
> 标签：facebook-graph-api, currency

我目前正在尝试实现首选货币 API，但返回给我的所有图形 API 都是用户 ID。

我转到以下链接：

[https://graph.facebook.com/100001342672661?fields=currency&access_token=XXXX](https://graph.facebook.com/100001342672661?fields=currency&access_token=XXXX)

我得到了这个：

{“id”：“100001342672661”}

我查看了图形 API 资源管理器并得到了相同的结果。没有错误，并且“货币”似乎是一个有效字段，它只是没有返回任何内容。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:42:01.423

FacebookId 和用户 access_token 不匹配，这就是为什么您只得到 FacebookId 作为答案。

1.  在您的开发者帐户上允许该应用
2.  为您的应用获取用户令牌：[https ://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)
3.  转到[https://graph.facebook.com/me?fields=currency&access_token=XXX](https://graph.facebook.com/me?fields=currency&access_token=XXX)（XXX 是您刚刚检索到的用户令牌）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:58:35.720

货币确实是一个有效的字段。你确定设置好了？对我来说，它似乎不是（这就是为什么它只返回你的 id），但如果有任何相关的错误，我会寻找它。

# java - 从 log4j 隐藏异常堆栈跟踪

> ID：12208240
> 
> 赞同：0
> 
> 时间：2012-08-31T02:45:55.800
> 
> 标签：java, log4j

我想隐藏一个异常以在 log4j 中记录它的堆栈跟踪。

我的应用程序抛出了一个运行时异常，我只想要异常的消息而不是堆栈跟踪来记录它。

我想知道 log4j 属性应该是什么。

谢谢史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:08:07.777

如果它是一个独立的 Java 应用程序，那么您可以使用[Thread.UncaughtExceptionHandler](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)

如果它是一个 Web 应用程序，那么使用默认错误页面将解决您的问题（未验证）。您可能还想检查是否可以在 Web 应用程序中使用 Thread.UncaughtExceptionHandler。[但是如果 Web Container 已经](http://blog.yohanliyanage.com/2010/09/know-the-jvm-1-uncaught-exception-handler/)出于某种目的使用它，那么自己设置（替换它）可能会影响 Web Container 的功能。为了安全起见，最好在这种情况下从您的处理程序委托给现有处理程序（如果有）（使用相关的 getter 方法）。

此外，如果强制执行 SecurityManager，您需要具有调用此方法的权限。否则可能会导致 SecurityException 被抛出。

# amazon-s3 - 为自定义 URL 设置 Amazon S3

> ID：12208242
> 
> 赞同：0
> 
> 时间：2012-08-31T02:46:24.180
> 
> 标签：amazon-s3

我最近才开始使用 Amazon Web Services 的 S3 服务。我设置存储桶没有问题，这样我就可以在其中存储文件并从我的网站链接到它们，但我想做的事情是让它看起来像我在自己的网站上托管文件。

我所做的是创建了 3 个存储桶：

*   css.mydomain.com
*   images.mydomain.com
*   js.mydomain.com

然后我转到我的虚拟主机帐户并登录到 cpanel。我点击高级 DNS 区域编辑器并输入以下信息： http: [//gyazo.com/71fe0d3996df69021bd7f097436cca63](http://gyazo.com/71fe0d3996df69021bd7f097436cca63)

现在已经 4 个多小时了，当我转到[http://css.mydomain.com/](http://css.mydomain.com/)时，我收到一条消息，指出浏览器找不到该页面。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:00:59.373

如果您拥有所有用户对文件的读取权限，那么我建议您一一进行以下操作... - 仅用于确认 - 您是否启用了 s3 网站？1\. 检查 s3 文件 - 您是否可以访问直接链接 - [http://css.mydomain.com.s3.amazonaws.com/defaulultpage.html](http://css.mydomain.com.s3.amazonaws.com/defaulultpage.html) 2\. 检查 s3 网站 - 您是否可以访问直接链接 - [http:// /css.mydomain.com.s3-website-us-east-1.amazonaws.com](http://css.mydomain.com.s3-website-us-east-1.amazonaws.com)

让我们知道结果...

# c# - 使用 XPerf 查看事件数据？

> ID：12208243
> 
> 赞同：3
> 
> 时间：2012-08-31T02:46:56.910
> 
> 标签：c#, etw, xperf

我正在尝试使用 XPerf 来检测应用程序以进行性能分析。我的目标是在我的 C# 应用程序中记录启动/停止事件并分析这些事件之间的某些内核指标。

我正在我的应用程序中创建一个`TraceListener`and`TraceSource`并将事件记录到源中。然后我使用 logman 启动两个会话：一个从我的提供程序捕获事件，另一个捕获内核事件 ( `xperf -on DiagEasy`)。在我的会话结束时，我使用 XPerf 将这些文件合并在一起并查看/覆盖图形。所有这些都运作良好。

我的应用程序的事件显示在“通用事件”图表中，但是这些事件没有识别信息（没有名称，没有事件数据），因此很难分辨哪个事件是哪个事件。我知道我的事件数据被捕获，因为当我`tracerpt`在跟踪输出上运行时它出现在“dumpfile.xml”中。有没有办法将事件名称或事件数据附加到 XPerf 中的“通用事件”？我使用 XPerf 的方法有误吗？

这是一些示例代码，演示了我如何使用 ETW：

```
static Guid providerId = new Guid("{4A9FD4F3-032B-4733-8455-03BC71ECEFB0}");
static void Main(string[] args)
{
    EventProviderTraceListener listener =
        new EventProviderTraceListener(providerId.ToString());
    TraceSource source = new TraceSource("ProductRepository", SourceLevels.All);
    source.Listeners.Add(listener);

    int id = 12;
    source.TraceData(TraceEventType.Warning, 12, "Some sample data");
    source.TraceEvent(TraceEventType.Start, 1, "TraceEvent.Start({0})", id);
    source.TraceEvent(TraceEventType.Stop, 1, "TraceEvent.Stop({0})", id);
    source.TraceInformation("TraceInformation");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:36:15.897

使用 .net 4.5 中的新 System.Diagnostics.Tracing.EventSource 类。Vance 创建了一个演示如何使用它：

**简介教程：在 C# 中记录 ETW 事件：System.Diagnostics.Tracing.EventSource** [http://blogs.msdn.com/b/vancem/archive/2012/07/09/logging-your-own-etw-events-in- c-system-diagnostics-tracing-eventsource.aspx](http://blogs.msdn.com/b/vancem/archive/2012/07/09/logging-your-own-etw-events-in-c-system-diagnostics-tracing-eventsource.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:04:49.237

正如 user31273 提到的，XPerf 了解事件有效负载的关键是注册提供者的清单。我没有看到由 magicandre1981 链接的视频，但我敢打赌 Vance 提到了如何注册您的 C# 提供程序。请记住指定正确的操作码（开始/停止）以获得您想要的。

# java - 在通用 java 中使用 cast 的更好解决方案

> ID：12208244
> 
> 赞同：0
> 
> 时间：2012-08-31T02:47:01.513
> 
> 标签：java, generics

假设我有以下代码：

```
Object li = new Object(); 

// this causes a compiler warning   

ArrayList<String> lo = (ArrayList<String>)(li); 
```

好的，我已经编辑了问题，对不起，我犯了一个错误，重点是，因为当我们投射到目标时会导致编译时警告，其目标是参数化类型，有没有更好的解决方案以便我可以防止代码引起编译时警告？

在处理数组时，我们有 Arrays.newInstance 来代替强制转换的使用。

* * *

原始问题的代码：

```
// List<String> is a superclass of ArrayList

List<String>      listOne =  new List<String>();

ArrayList<String> listTwo = (List<String>) listOne; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:18:48.060

如果您处于这种情况，您有两种选择。首先是进行未经检查的演员表：

```
Object o = getObjectFromSomewhereMysterious();
List<String> lst = (List<String>)o; //compiler warning 
```

这将导致您提到的警告-这意味着，由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，在运行时强制转换只能检查以确保`o`是 a `List`，而不是 a `List<String>`。因此，例如 if `o`is a强制转换`HashMap`将立即失败，但如果它是 a`List<Integer>`它不会失败......直到稍后您尝试处理`lst`类似 a的元素`String`。这被称为[“污染堆”](http://en.wikipedia.org/wiki/Heap_pollution)：

```
//some later place in the code path - who knows, it could be miles away
String str = lst.get(0); //ClassCastException if lst isn't really a List<String> 
```

只要您可以确定强制转换是安全的，您就可以抑制编译器警告：

```
@SuppressWarnings("unchecked") //this is safe because blah blah blah
List<String> lst = (List<String>)o; 
```

*始终*记录为什么可以抑制警告 - 这有助于保持代码的可维护性。

第二种选择是安全的：

```
List<?> lst = (List<?>)o; 
```

这意味着`lst`是`List`某种*未知类型*。它允许您避免未经检查的演员表，但限制了您可以做什么`lst`：

```
lst.add("some string"); //compiler error 
```

该声明是非法的，因为我们不知道是否`lst`允许持有`String`s。我们能做的最好的就是从中读取，但即便如此，元素也只能输入为`Object`：

```
Object element = lst.get(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:01:23.893

您不能实例化 List，因为[List 是一个 interface](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)是一个实现*List***接口**的**类**。

 ***你可以这样做：

```
List<String> listOne  =  new ArrayList<String>();
List<String> listTwo  =  listOne; 
```

当使用*listOne*的代码不关心它是哪种 List 时，这是正确的方法。

这是一个示例，说明了为什么这是一个好方法：

`List<String> someList = createList();`

这里*someList*设置为名为 createList 的方法的返回*值*。在这种情况下，我们不知道*someList*是什么类型的列表。可以是ArrayList、Vector、Stack等……只要*createList*返回一个实现List接口的对象，上面的代码就可以工作。使用这种方法，可以在不影响调用它的代码的情况下修改*createList中的代码。*

你也可以这样做：

```
ArrayList<String> listOne  =  new ArrayList<String>();
ArrayList<String> listTwo  =  listOne; 
```

这不是那么灵活，但它允许您将列表专门视为 ArrayLists。

从技术上讲，您可以这样做，但这不是一个好主意：

```
List<String>      listOne  =  new ArrayList<String>();
ArrayList<String> listTwo  =  (ArrayList<String>) listOne; 
```

最好通过声明一个 List 并实例化一个 ArrayList[来对接口进行编程。](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

这是一个示例，显示了对接口进行编程的一些好处：

```
public static void testIt() {

    List someList;
    ArrayList anArrayList;

    /*
     *  all of these will work 
     */

    someList = createVectorAsList();
    printList(someList);

    someList = createStackAsList();
    printList(someList);

    someList = createArrayListAsList();
    printList(someList);

    // you CAN assign an ArrayList to a List

    someList = createArrayList();
    printList(someList);

    // you CAN treat an ArrayList as a List

    anArrayList = createArrayList();
    printList(anArrayList);

    /* 
     *  none of these work 
     */

    // you can NOT assign List to an ArrayList

    anArrayList = createStackAsList();
    anArrayList = createVectorAsList();

    // you can NOT pass anything but an ArrayList to printArrayList

    printArrayList(createStackAsList());
    printArrayList(createVectorAsList());
    printArrayList(createArrayListAsList());

}

/** Prints any List */

public void printList(List someList) {
    for (Object o : someList) {
        System.out.println(o.toString());
    }
}

/** Prints ArrayLists only */

public void printArrayList(ArrayList someList) {
    for (Object o : someList) {
        System.out.println(o.toString());
    }
}

public List createVectorAsList() {
    Vector v = new Vector();
    v.add("I am a vector element");
    return v;
}

public List createStackAsList() {
    Stack s = new Stack();
    s.add("I am a stack element");
    return s;
}

public List createArrayListAsList() {
    ArrayList ar = new ArrayList();
    ar.add("I am an array list element");
    return ar;
}

public ArrayList createArrayList() {
    ArrayList ar = new ArrayList();
    ar.add("My array is not returned as a list...");
    return ar;
} 
```***

# google-maps - 使用 Javascript Google Maps Api 更改 DPI

> ID：12208249
> 
> 赞同：1
> 
> 时间：2012-08-31T02:48:14.227
> 
> 标签：google-maps, google-maps-api-3, printing, dpi

我需要用谷歌地图创建一个 80x80cm（或 33inchx33inch）的地图。此地图将被打印和展示，因此 DPI 越高越好。实际上，在打印中，300DPI 是最低要求。

现在，我正在使用 Javascript API 来创建我想要的地图： - 使用具有各种颜色的样式数组更改 mapOptions - 添加 Transit Overlay 以便在地图上添加城市火车的地图（看到这个 aautar.digital-radiation.com/blog/?p=3761) - 添加多边形作为我的一张地图的 KML URL 的链接

如果您想查看结果：[http](http://www.tellnet.fr/blog/test.html) ://www.tellnet.fr/blog/test.html （下载时间很长，因为它是 5000x5000 图片）。

问题是，在我想要的比例级别（没有太多细节），我得到的大图是 5000x5000，它提供了一个 150DPI 的仅可打印文件。

要获得 10000x10000 的图片，就像我以 300 DPI 打印 80x80cm 地图一样，我需要： - 要么我的地图缩放一次，但我有太多细节，这些细节将被打印得非常小 - 或者改变 DPI地图，要求谷歌地图将其翻倍。

*它基本上会给我相同比例的相同地图，但线条和文字更细（制作 10000x10000 图片）。*

我知道静态地图 Api 可以做到这一点，将 Scale 值更改为 2（请参阅[https://developers.google.com/maps/documentation/staticmaps/?hl=fr#scale_values](https://developers.google.com/maps/documentation/staticmaps/?hl=fr#scale_values)）。

问题是，这是**静态**地图 API，所以请有人告诉我是否： - 可以使用静态 API 完成上述所有操作 - 或者使用Javascript API。

我还尝试更改元视口值，但这仅适用于移动设备......（我搜索了所有解决方案，现在我被阻止了！）

# regex - 如何在正则表达式中包含对象

> ID：12208250
> 
> 赞同：8
> 
> 时间：2012-08-31T02:48:35.787
> 
> 标签：regex, r, object

```
namez <- c("foo2003", "bar2340", "naught45")
patternz <- "03"
grepl("[patternz]$",namez) 
```

这没用。我应该用什么替换 [patternz]，所以正则表达式将匹配 patternz 变量的内容？

*[编辑]*请注意，我要匹配字符串“03”，而不是分别匹配数字“0”和“3”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T12:09:45.157

必须承认努力想看看这里有什么问题。对于示例仅说明

```
R> namez <- c("foo2003", "bar2340", "naught45")
R> patternz <- "03"
R> grepl(patternz, namez)
[1]  TRUE FALSE FALSE 
```

`patternz` *和字符向量一样是*必需的，目的不是匹配`0` **&** `3`而是匹配文字`"03"`

如果您需要它仅在字符串的末尾匹配，那么我们确实需要`"$"`手动添加：

```
R> patternz2 <- "03$"
R> grepl(patternz2, namez)
[1]  TRUE FALSE FALSE 
```

或通过`paste0()`操作

```
R> grepl(paste0(patternz, "$"), namez)
[1]  TRUE FALSE FALSE 
```

问题是使用`patternz`实际的正则表达式和基本 R 函数完美地处理这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T02:53:18.997

看起来你需要创建一个字符向量`grepl()`，使用`paste0()`似乎工作，虽然不是那么优雅：

```
> grepl(paste0("[", patternz, "]$"), namez)
[1]  TRUE  TRUE FALSE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T03:24:05.173

包`gsubfn`是你的朋友

```
library(gsubfn)
namez <- c("foo2003", "bar2340", "naught45")
patternz <- "03"
fn$grepl("[$patternz]$",namez)

#> fn$grepl("[$patternz]$",namez)
#[1]  TRUE  TRUE FALSE 
```

最初您表示要在字符串末尾匹配 0 或 3。在您的评论中，您提到在这种情况下可能想要匹配“03”

```
fn$grepl("$patternz$",namez) 
```

会更合适。

还

```
fn$grepl("`patternz`$",namez) 
```

在这种情况下可能更合适，因为`$`具有双重含义。

# jquery - Jquery自动完成：组合框+重音折叠

> ID：12208251
> 
> 赞同：1
> 
> 时间：2012-08-31T02:48:55.583
> 
> 标签：jquery, autocomplete, combobox, diacritics, folding

我正在尝试混合使用 Jquery Ui Autocomplete 组合框和重音折叠示例，但这似乎超出了我的技能范围。我试图在组合框示例中用“normalize(text)”替换对“text”的提及，但没有雪茄。

组合框示例：http: [//jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

重音折叠示例：http: [//jqueryui.com/demos/autocomplete/#folding](http://jqueryui.com/demos/autocomplete/#folding)

**更新：**

我发现了问题： REGEX 对象不区分大小写，但我的 normalize 函数不区分大小写。

现在我有一个较小的问题：代码提供了众所周知的文本突出显示功能，如下所示：

```
if (this.value && (!request.term || matcher.test(normal) || matcher.test(text))) {
  return {
    label: text.replace(
    new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"),
    value: text,
    option: this
  };
} 
```

当用户键入重音文本时这很好，但如果输入没有重音则无法突出显示。有没有办法解决这个问题，这样即使用户没有重音输入，文本也会被高亮显示？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-26T14:05:24.023

我找到了一些解决方案：

```
if(this.value && ( !request.term || matcher.test(normalize(text)) || matcher.test(text))) 
```

# javascript - 在 Dojo 类中执行递归 setTimeout 调用时是否存在内存泄漏？

> ID：12208253
> 
> 赞同：6
> 
> 时间：2012-08-31T02:49:15.407
> 
> 标签：javascript, memory, dojo, settimeout, memory-leaks

我们已经使用 Dojo 创建了一个应用程序，在 UI 上有一个时钟。但有时应用程序 UI 只是挂在那里，时钟就停止了。猜测JS引擎刚刚停止是因为时钟是由javascript代码驱动的。

不确定以下代码会导致内存泄漏，然后导致挂起问题。我们使用递归 setTimeout 调用来实现时钟。

```
dojo.declare("xxx.xxx.HomepageHeader", [dijit._Widget, dijit._Templated],
{
widgetsInTemplate: true,
_time :'',
dateUtil: null,

// ....
// ....

prefix :function (value, p)
{
    return (value < 10) ? p + value : value;
},

updateTime :function ()
{
    var d = new Date();
    var _this = this;
    var t = [_this.prefix(d.getHours(), '0'), _this.prefix(d.getMinutes(), '0'), _this.prefix(d.getSeconds(), '0')].join(':');
    _this._time.innerHTML = t;
    _this.dateInfo.innerHTML = this.dateUtil.format(d, "yyyy/MM/dd") + " &nbsp;|&nbsp " + this.dateUtil.format(d, "EEE");
    window.setTimeout( function(){_this.updateTime();}, 100);
}

// ....
// ....
} 
```

注意到在类中，方法 updateTime 使用 window.setTimeout 递归调用自身来更新 UI 上的时间文本。

这里有内存泄漏问题吗？如果答案是否定的，是否有任何可能导致挂断问题的问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:21:21.727

这并不是真正的递归，因为`setTimeout()`将下一次调用安排在未来`updateTime()`一段时间，然后当前`updateTime()`实际完成。因此，没有堆栈帧的建立，因此它不是真正的递归。另外，我看不出这里有任何内存泄漏的原因。

您拥有的方案应该没问题并且经常使用，但您可能希望少于每 100 毫秒执行一次，以便为浏览器上的其他事情留出更多的 CPU 周期。

如果您看到时钟停止，那是因为 JS 引擎卡住或循环，但它可能卡在其他地方的代码中，而不是实际的时钟代码。

# r - 带有 R Markdown 的 CSV 的 Base64 编码

> ID：12208258
> 
> 赞同：3
> 
> 时间：2012-08-31T02:49:55.867
> 
> 标签：r

图像的 Base64 编码是 R Studio Markdown 中一个非常酷的小功能，它可以创建易于分发或共享的所有 HTML 页面。无需担心将图像作为单独的文件。浏览器知道如何处理它。

我也想将此功能扩展到编码 CSV 文件。看看他们现在是如何做的，看起来他们正在将信息传递给 .Call 并使用 C/C++ 对文件信息进行编码。

来自（第 177 和 192 行）：[https ://github.com/rstudio/markdown/blob/master/R/renderMarkdown.R](https://github.com/rstudio/markdown/blob/master/R/renderMarkdown.R)

```
.b64EncodeFile <- function(inFile)
{
   fileSize <- file.info(inFile)$size

   if (fileSize > 0){
      paste( "data:", .mimeType(inFile),";base64,",
         .Call(rmd_b64encode_data,readBin(inFile,'raw',n=fileSize)),
         sep='')
   } else {
      warning(inFile,'is empty!')
      inFile
   }
}

.b64EncodeImages <- function(html)
{
   reg <- "<\\s*[Ii][Mm][Gg]\\s+[Ss][Rr][Cc]\\s*=\\s*[\"']([^\"']+)[\"']"
   m <- gregexpr(reg,html,perl=TRUE)
   if (m[[1]][1] != -1)
   {
      .b64EncodeImgSrc <- function(imgSrc)
      {
         inFile <- sub(reg,"\\1",imgSrc)
         if (length(inFile) && file.exists(inFile))
            imgSrc <- sub(inFile,.b64EncodeFile(inFile),imgSrc,fixed=TRUE)

         imgSrc
      }
      regmatches(html,m) <- list(unlist(lapply(regmatches(html,m)[[1]],.b64EncodeImgSrc)))
   }

   html
} 
```

现在，我如何使用 CSV 文件完成同样的事情？重要的是，我如何让浏览器理解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:54:47.867

如果我没看错你的意图，如果你用 HREF 属性中的编码数据制作了一个 A 元素，那么单击链接将获取文件。刚刚用我躺在身边的编码图像块测试了这个：

```
<a href="data:image/jpeg;base64,[blah blah blah]">Click Me</a> 
```

因此，只要您设置了 mime 类型（文本/某些东西？），您需要做的就是构建该元素并将其粘贴到您的 HTML 文件中。用户单击链接，文件下载开始，来自其嵌入的 base64 编码。排序。缺少 mime 类型的完整示例，它只让浏览器读取它：

```
<html>
<head>
</head>
<body>
<h1>Test</h1>
<a href="data:;base64,aWQsbmFtZSxhZ2UKMSwiRnJlZCBGb28iLDk5CjIsIkpvZSBCbG9nZ3MiLDIyCg==">click me</a>
</body>
</html> 
```

该数据字符串的来源：

```
> markdown:::.b64EncodeFile("test.csv")
[1] "data:;base64,aWQsbmFtZSxhZ2UKMSwiRnJlZCBGb28iLDk5CjIsIkpvZSBCbG9nZ3MiLDIyCg==" 
```

# jython - 如何在 MonkeyRunner 中捕获 SocketExceptions？

> ID：12208269
> 
> 赞同：6
> 
> 时间：2012-08-31T02:51:24.537
> 
> 标签：jython, monkeyrunner

使用 MonkeyRunner 时，我经常会收到如下错误：

```
120830 18:39:32.755:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice] Unable to get variable: display.density
120830 18:39:32.755:S [MainThread] [com.android.chimpchat.adb.AdbChimpDevice]java.net.SocketException: Connection reset 
```

根据我的阅读，有时 adb 连接会变坏，您需要重新连接。唯一的问题是，我无法捕捉到`SocketException`. 我将像这样包装我的代码：

```
try:
    density = self.device.getProperty('display.density')
except:
    print 'This will never print.' 
```

但显然异常并没有一直引发到调用者。我已经验证 MonkeyRunner/jython 可以按照我期望的方式捕获 Java 异常：

```
>>> from java.io import FileInputStream
>>> def test_java_exceptions():
...     try:
...         FileInputStream('bad mojo')
...     except:
...         print 'Caught it!'
...
>>> test_java_exceptions()
Caught it! 
```

我该如何处理这些套接字异常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-21T09:29:23.160

每次启动 MonkeyRunner 时都会出现该错误，因为`monkey --port 12345`脚本停止时设备上的命令并未停止。这是猴子的虫子。

解决这个问题的一个更好的方法是在`SIGINT`发送到你的脚本时杀死猴子（当你`ctrl+c`）。换句话说：`$ killall com.android.commands.monkey`.

快速的方法：

```
from sys, signal
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

device = None

def execute():
    device = MonkeyRunner.waitForConnection()
    # your code

def exitGracefully(self, signum, frame=None):
    signal.signal(signal.SIGINT, signal.getsignal(signal.SIGINT))
    device.shell('killall com.android.commands.monkey')
    sys.exit(1)

if __name__ == '__main__':
    signal.signal(signal.SIGINT, exitGracefully)
    execute() 
```

编辑：作为附录，我还找到了一种注意到 Java 错误的方法：[Monkey Runner throwing socket exception broken pipe on touch](https://stackoverflow.com/questions/23416663/monkey-runner-throwing-socket-exception-broken-pipe-on-touuch/28070375#28070375)

编辑：信号似乎需要 2 个参数，不确定是否总是如此，将第三个参数设为可选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:23:22.513

以下是我最终使用的解决方法。任何可能遭受 adb 失败的函数只需要使用以下装饰器：

```
from subprocess import call, PIPE, Popen
from time import sleep

def check_connection(f):
    """
    adb is unstable and cannot be trusted.  When there's a problem, a
    SocketException will be thrown, but caught internally by MonkeyRunner
    and simply logged.  As a hacky solution, this checks if the stderr log 
    grows after f is called (a false positive isn't going to cause any harm).
    If so, the connection will be repaired and the decorated function/method
    will be called again.

    Make sure that stderr is redirected at the command line to the file
    specified by config.STDERR. Also, this decorator will only work for 
    functions/methods that take a Device object as the first argument.
    """
    def wrapper(*args, **kwargs):
        while True:
            cmd = "wc -l %s | awk '{print $1}'" % config.STDERR
            p = Popen(cmd, shell=True, stdout=PIPE)
            (line_count_pre, stderr) = p.communicate()
            line_count_pre = line_count_pre.strip()

            f(*args, **kwargs)

            p = Popen(cmd, shell=True, stdout=PIPE)
            (line_count_post, stderr) = p.communicate()
            line_count_post = line_count_post.strip()

            if line_count_pre == line_count_post:
                # the connection was fine
                break
            print 'Connection error. Restarting adb...'
            sleep(1)
            call('adb kill-server', shell=True)
            call('adb start-server', shell=True)
            args[0].connection = MonkeyRunner.waitForConnection()

    return wrapper 
```

因为这可能会创建一个新连接，所以您需要将当前连接包装在一个 Device 对象中，以便可以更改它。这是我的设备类（大部分类是为了方便，唯一需要的是`connection`成员：

```
class Device:
    def __init__(self):
        self.connection = MonkeyRunner.waitForConnection()
        self.width = int(self.connection.getProperty('display.width'))
        self.height = int(self.connection.getProperty('display.height'))
        self.model = self.connection.getProperty('build.model')

    def touch(self, x, y, press=MonkeyDevice.DOWN_AND_UP):
        self.connection.touch(x, y, press) 
```

关于如何使用装饰器的示例：

```
@check_connection
def screenshot(device, filename):
    screen = device.connection.takeSnapshot()
    screen.writeToFile(filename + '.png', 'png') 
```

# c++ - Netbeans 未突出显示未解析的标识符

> ID：12208272
> 
> 赞同：0
> 
> 时间：2012-08-31T02:52:19.377
> 
> 标签：c++, netbeans, highlighting

过去几个月我一直在 Mac OS 上使用 Netbeans（使用 C++），但现在已经迁移到 Ubuntu 12.04。我正在通过命令行进行编译，并且只使用 Netbeans 作为编辑器，因为我喜欢代码辅助和它所具有的类似功能。通常人们似乎想要禁用代码帮助和突出显示，但在我的情况下，它们不起作用，我不知道为什么。在编辑器>突出显示选项卡下选中所有框。当我故意拼错变量时，它不会抱怨。语法突出显示效果很好。我还需要安装其他东西吗？

我很抱歉这是一件非常简单的事情，但谷歌搜索和搜索文档并没有帮助，因为似乎每个人都关心相反的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:47:42.397

NetBeans 是否使用 clang 进行静态代码分析？也许你需要安装它。

# java - 输出一个数字的幂作为字符串

> ID：12208275
> 
> 赞同：3
> 
> 时间：2012-08-31T02:52:52.307
> 
> 标签：java, android, numbers

我是 Java 新手，我不太确定如何输出一个整数幂作为字符串输出。我知道

```
Math.pow(double, double) 
```

实际上将计算将 double 提高到幂的值。但是如果我想输出“2^6”作为输出（除了 6 作为上标而不是克拉），我该怎么做？

编辑：这是一个 Android 应用程序。我将整数作为字符串传递给幂，我想知道如何在手机的 UI 中将其转换为上标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T03:02:03.423

Unicode 确实有数字 0 到 9 的上标版本：[http ://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)

这应该打印 2⁶：

```
 System.out.println("2⁶");

 System.out.println("2\u2076"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T03:02:11.703

如果要将文本输出到 GUI，则可以使用[HTML 格式](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)和[`<sup>`标签](http://www.w3schools.com/tags/tag_sup.asp)来获取上标。否则，您将不得不使用 Unicode 字符来获取其他上标。维基百科有一篇关于 Unicode 中上标和下标的好文章：

[http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T17:54:59.963

仅当使用 Eclipse（Java 编辑器）时才应使用此答案，Eclipse 所做的是它仅支持某些 Unicode 符号。1 2 和 3 都可以完成并得到 eclipse 的支持，其他任何你必须玩的 eclipse 的设置都不是太难。有一个叫做 Windows-1252 的东西，它似乎是很多东西的默认值，包括 Eclipse 中文件的默认编码。因此，每当您打印到控制台时，它都会尝试将其解释为，并且它不支持完整的 unicode 字符集，因为它是 1 字节编码。这实际上不是 Java 的问题，而是 Eclipse 的问题，这意味着您需要编辑 Eclipse 以改用 UTF-8。您可以在多个地方执行此操作；如果您只想在运行这个文件时显示 unicode 字符，您可以右键单击文件，属性 -> 资源 -> 文本文件编码并将默认值更改为其他：utf-8。如果要对整个工作区执行此操作，可以转到 Window -> Preferences -> General -> Workspace -> Text file encoding。您也可以在整个项目范围内甚至只是在整个包范围内按照非常相似的步骤执行此操作，具体取决于您的目标。

# ruby-on-rails-3 - Rails 3 邮件不工作，但设计邮件工作

> ID：12208281
> 
> 赞同：0
> 
> 时间：2012-08-31T02:53:22.570
> 
> 标签：ruby-on-rails-3, centos, actionmailer

我有一个运行良好的 rails 3.2.3 应用程序，并提供设计创建的邮件消息，注册确认和密码忘记邮件消息以设置新密码。

但是，我有不同的地方要发送邮件通知。

这是我的`Notifier`模型。

```
# encoding: utf-8
class Notifier < ActionMailer::Base
  default from: "no-reply@domain.com"
  default to: "admin@domain.com"

  def new_post_submitted(post)
    @post = post
    mail(subject: "Anúncio enviado: #{@post.title}")
  end

  def new_message(message)
    @message = message
    mail(subject: "Mensagem de contato: #{@message.subject}")
  end

end 
```

控制器调用：

```
def create
  @message = Message.new(params[:message])

  if @message.valid?
    Notifier.new_message(@message).deliver
    redirect_to(root_path, :notice => "Obrigado. Sua Mensagem enviada com sucesso")
  else
    flash.now.alert = "Por favor preencha todos os campos."
    render :new
  end
end 
```

日志输出说它已交付：

```
Started POST "/contato" for 187.57.102.168 at 2012-08-31 11:28:51 +0900
Processing by ContactController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TVdmDYCA4x3JVi+9pMcpY7OSU/P1lE9enLiFJlK9W1M=", "message"=>{"name"=>"kleber", "email"=>"test@gmail.com", "subject"=>"teste", "body"=>"hello there"}, "commit"=>"Enviar"}
  Rendered notifier/new_message.html.erb (0.1ms)

Sent mail to admin@domain.com (152ms)
Redirected to http://www.domain.com/
Completed 302 Found in 158ms (ActiveRecord: 0.0ms) 
```

以及我的`config/production.rb`文件中的以下配置。

```
ActionMailer::Base.delivery_method = :smtp
ActionMailer::Base.smtp_settings = {
  :address => "localhost",
  :port => 25,
  :domain => "domain.com",
  :authentication => :login,
  :user_name  => "admin@domain.com",
  :password  => "mypassword",
  :enable_starttls_auto => false
} 
```

关于这里发生了什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:20:55.570

以下是我的 production.rb 文件中的设置。

```
ActionMailer::Base.smtp_settings = {
   :address => 'mail.domain.com',
   :port => 587,
   :domain => 'domain.com',
   :authentication => :login,
   :user_name => 'postmaster@domain.com',
   :password => 'password'
  } 
```

不确定是否必须指定 delivery_method？

```
ActionMailer::Base.delivery_method = :smtp 
```

我的配置中没有它，一切正常。

在 rails API [http://api.rubyonrails.org/](http://api.rubyonrails.org/) ActionMailer 部分有一个选项可以设置传递错误。

```
raise_delivery_errors - Whether or not errors should be raised if the email fails to be delivered. 
```

您可以尝试进一步解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:53:52.260

首先，确保您没有在环境文件的其他地方关闭交付：

```
# the default is true anyway, so if you don't see it anywhere in
# the file, you should be okay
config.action_mailer.perform_deliveries = true 
```

接下来我会尝试将交付方式更改为`:sendmail`或`:file`。如果您的系统（至少是开发系统）上安装并配置了 sendmail，那么您应该会收到您发送的电子邮件。有一次我惊讶地发现 sendmail 在 OS X 上开箱即用。我不确定你是否会在 CentOS 上找到相同的东西。

如果您没有 sendmail 或不想配置它，请使用`:file`传递方法将电子邮件转储到文件系统上的文件中。

此时，如果电子邮件没有通过 sendmail 或文件传递，您就知道堆栈中存在问题。如果他们确实交付了，那么问题出在您的 SMTP 配置上。尝试使用已知有效的 SMTP 服务器（例如您的 Gmail 帐户）。如果可行，那么您知道这是在 localhost 上运行的 SMTP 服务器的问题，而不是 ActionMailer 的问题。

# ruby-on-rails - 带有heroku的东西分类器宝石

> ID：12208285
> 
> 赞同：0
> 
> 时间：2012-08-31T02:54:19.580
> 
> 标签：ruby-on-rails, heroku

我试图将我的 ruby​​ 代码部署到 heroku 这是我的 Gemfile ，

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'googlecharts'
gem 'stuff-classifier'
gem 'devise'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production do
  gem "pg"
end

group :development, :test do
  gem "sqlite3"
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我正在推动这个

```
HengHongs-MacBook-Pro:collab Kinnovate$ git push heroku master
Counting objects: 19, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (16/16), done.
Writing objects: 100% (16/16), 1.44 KiB, done.
Total 16 (delta 11), reused 0 (delta 0)

-----> Heroku receiving push
-----> Removing .DS_Store files
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.0
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Using rake (0.9.2.2)
       Using i18n (0.6.0)
       Using multi_json (1.3.6)
       Using activesupport (3.2.6)
       Using builder (3.0.0)
       Using activemodel (3.2.6)
       Using erubis (2.7.0)
       Using journey (1.0.4)
       Using rack (1.4.1)
       Using rack-cache (1.2)
       Using rack-test (0.6.1)
       Using hike (1.2.1)
       Using tilt (1.3.3)
       Using sprockets (2.1.3)
       Using actionpack (3.2.6)
       Using mime-types (1.19)
       Using polyglot (0.3.3)
       Using treetop (1.4.10)
       Using mail (2.4.4)
       Using actionmailer (3.2.6)
       Using arel (3.0.2)
       Using tzinfo (0.3.33)
       Using activerecord (3.2.6)
       Using activeresource (3.2.6)
       Using bcrypt-ruby (3.0.1)
       Using coffee-script-source (1.3.3)
       Using execjs (1.4.0)
       Using coffee-script (2.2.0)
       Using rack-ssl (1.3.2)
       Using json (1.7.5)
       Using rdoc (3.12)
       Using thor (0.16.0)
       Using railties (3.2.6)
       Using coffee-rails (3.2.2)
       Using orm_adapter (0.4.0)
       Using warden (1.2.1)
       Using devise (2.1.2)
       Using fast-stemmer (1.0.1)
       Using googlecharts (1.6.8)
       Using jquery-rails (2.1.1)
       Installing msgpack (0.4.7) with native extensions
       Using pg (0.14.0)
       Using bundler (1.2.0)
       Using rails (3.2.6)
       Using sass (3.2.1)
       Using sass-rails (3.2.5)
       Installing sequel (3.20.0)
       Installing sqlite3 (1.3.6) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_2wrfyq245cb6w/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_2wrfyq245cb6w/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

当我从 Gemfile 中删除 stuff-classifier gem 时它工作正常

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:14:44.850

分叉了 repo 并从 gemspec 文件中删除了 sqlite 依赖项

将此添加到 gemfile

```
gem 'stuff-classifier' , :git =>'https://github.com/henghonglee/stuff-classifier' 
```

# android - Android“cl无法解析为变量”错误

> ID：12208286
> 
> 赞同：0
> 
> 时间：2012-08-31T02:54:24.073
> 
> 标签：android

我对 android 的 AIDL 文件有疑问。我从互联网上下载了一个示例项目，我在代码中看到，他们有一个 AIDL 文件。我不知道这个文件是什么，我做了一些研究并编写了一些代码。

创建 AIDL 文件后，我声明了一个这样的方法

```
interface IRemoteService{
  Map onClick(in int id, in Map state);
} 
```

然后 Eclipse 将自动生成一个文件`IRemoteService.java`并返回错误：

```
cl cannot be resolved to a variable 
```

我做错什么了吗？

**编辑** 这是自动生成的 IRemoteService.java。

```
/*
 * This file is auto-generated.  DO NOT MODIFY.
 * Original file: /home/nampham/Data/works/workspace/MapAidl/src/nampham/mapaidl/IRemoteService.aidl
 */
package nampham.mapaidl;
public interface IRemoteService extends android.os.IInterface
{
/** Local-side IPC implementation stub class. */
public static abstract class Stub extends android.os.Binder implements nampham.mapaidl.IRemoteService
{
private static final java.lang.String DESCRIPTOR = "nampham.mapaidl.IRemoteService";
/** Construct the stub at attach it to the interface. */
public Stub()
{
this.attachInterface(this, DESCRIPTOR);
}
/**
 * Cast an IBinder object into an nampham.mapaidl.IRemoteService interface,
 * generating a proxy if needed.
 */
public static nampham.mapaidl.IRemoteService asInterface(android.os.IBinder obj)
{
if ((obj==null)) {
return null;
}
android.os.IInterface iin = (android.os.IInterface)obj.queryLocalInterface(DESCRIPTOR);
if (((iin!=null)&&(iin instanceof nampham.mapaidl.IRemoteService))) {
return ((nampham.mapaidl.IRemoteService)iin);
}
return new nampham.mapaidl.IRemoteService.Stub.Proxy(obj);
}
public android.os.IBinder asBinder()
{
return this;
}
@Override public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException
{
switch (code)
{
case INTERFACE_TRANSACTION:
{
reply.writeString(DESCRIPTOR);
return true;
}
case TRANSACTION_click:
{
data.enforceInterface(DESCRIPTOR);
int _arg0;
_arg0 = data.readInt();
java.util.Map _arg1;
java.lang.ClassLoader cl = (java.lang.ClassLoader)this.getClass().getClassLoader();
_arg1 = data.readHashMap(cl);
java.util.Map _result = this.click(_arg0, _arg1);
reply.writeNoException();
reply.writeMap(_result);
return true;
}
}
return super.onTransact(code, data, reply, flags);
}
private static class Proxy implements nampham.mapaidl.IRemoteService
{
private android.os.IBinder mRemote;
Proxy(android.os.IBinder remote)
{
mRemote = remote;
}
public android.os.IBinder asBinder()
{
return mRemote;
}
public java.lang.String getInterfaceDescriptor()
{
return DESCRIPTOR;
}
public java.util.Map click(int id, java.util.Map state) throws android.os.RemoteException
{
android.os.Parcel _data = android.os.Parcel.obtain();
android.os.Parcel _reply = android.os.Parcel.obtain();
java.util.Map _result;
try {
_data.writeInterfaceToken(DESCRIPTOR);
_data.writeInt(id);
_data.writeMap(state);
mRemote.transact(Stub.TRANSACTION_click, _data, _reply, 0);
_reply.readException();
_result = _reply.readHashMap(cl);  `<<< This line return error`
}
finally {
_reply.recycle();
_data.recycle();
}
return _result;
}
}
static final int TRANSACTION_click = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
}
public java.util.Map click(int id, java.util.Map state) throws android.os.RemoteException;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:13:46.540

问题出在：

```
_result = _reply.readHashMap(cl); 
```

其中`cl can't be resolved to a variable`因为`cl`在**本地**定义`onTransact()`：

```
java.lang.ClassLoader cl = (java.lang.ClassLoader)this.getClass().getClassLoader(); 
```

我不知道是否`auto-generated code`意味着*它不应该被修改*或*它不能被修改*。但是，我可以告诉您的是，除非您编辑了代码并且：

*   `cl`在错误行之前添加另一个定义：

    ```
    java.lang.ClassLoader cl = (java.lang.ClassLoader)this.getClass().getClassLoader();
    _result = _reply.readHashMap(cl); 
    ```

# android - 从android活动到资产文件夹内html中的字符串的字符串

> ID：12208288
> 
> 赞同：1
> 
> 时间：2012-08-31T02:54:32.603
> 
> 标签：android, html, android-assets

我在资产文件夹中有一个带有 html 文件的应用程序。我想要这样当用户单击一个按钮时，在 Android 应用程序活动中，按钮的内容被放入一个字符串并将该字符串传递给 html 文件内的一个字符串。获取按钮的内容并将它们传递给我可以执行的活动内部的字符串。我想知道如何获取从按钮获得的字符串，并将信息传递给资产文件夹内的 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:31:54.313

您是否只是尝试根据按钮推送显示具有不同数据的 HTML 文件？您可以在 HTML 文件中使用 %s 或 %d 以及 $1..$n 进行多次替换：

你有 $1%d 新的 $2%s。

伪代码

getHtmlFromAssets(myfile.html, unReadThings, things) 其中 unReadThings 是一个数字，而 things 是一个字符串。

说得通？

从概念上讲（尽管您将使用 HTML）：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-format-strings/](http://mobile.tutsplus.com/tutorials/android/android-sdk-format-strings/)

或更少的 Android 特定：http: [//javarevisited.blogspot.com/2011/12/java-string-replace-example-tutorial.html](http://javarevisited.blogspot.com/2011/12/java-string-replace-example-tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T07:53:35.537

addJavaScriptInterface 方法帮助我们将值从网页传递到您的 android XML 视图，反之亦然。您可以从您的网页中调用您的活动类方法在创建时：

```
 WebView Wv = (WebView) findViewById(R.id.webView);
    Wv.getSettings().setJavaScriptEnabled(true);
    JavaScriptInterface myJavaScriptInterface
    = new JavaScriptInterface(this);         
    Wv.getSettings().setJavaScriptEnabled(true);
    Wv.addJavascriptInterface(myJavaScriptInterface, "AndroidFunction");
    Wv.loadUrl("file:///android_asset/index.html"); 
```

然后创建一个类 myJavaScriptInterface

```
 class JavaScriptInterface {
Context mContext;
int tpressure;
JavaScriptInterface(Context c) {
    mContext = c;
   tpressure=0;
}

public int Pressure(){  
    return tpressure++;
} 
```

}

示例 html 文件将是：

```
 <head>
            <title>jQuery Mobile page</title>
    <script src="jquery-1.9.1.min.js"></script>
    <script src="jquery.mobile-1.3.2.min.js"></script>
<link rel="stylesheet" type="text/css" href="jquery.mobile-1.3.2.css" />

    <script type="text/javascript">
            $(document).ready(function () {
         setInterval(function() {
         $("#tire1").html(AndroidFunction.Pressure())  
          }, 2000);
            });
    </script>
</head>
<body>        
    <div id="some">
     Tire Pressure:
</div>
    <div id="tire1">
     0
</div>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:20:33.550

资源（包括资产）是用来阅读的。您可以打开`raw`文件、调用文件、从xml 文件`anim`中获取字符串。`String`但是，您不能*写入*资源。

正如[AssetsManager](http://developer.android.com/reference/android/content/res/AssetManager.html)文档所述：

> 此类提供了一个较低级别的 API，允许您以简单的字节流形式**打开和读取**与应用程序捆绑在一起的原始文件。

现在，该怎么办？我建议您查看[其他类型的 Storage Options](http://developer.android.com/guide/topics/data/data-storage.html)。对于您的情况，我*强烈*建议[使用 Internal Storage](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

# python-2.7 - 如何为这种情况编写正则表达式？

> ID：12208291
> 
> 赞同：1
> 
> 时间：2012-08-31T02:55:05.753
> 
> 标签：python-2.7

我有这个模式

```
PlayerName<UID><STEAM_ID><TEAM>

^(.+?)<(.+?)><(.+?)><(.+?)>$ 
```

这看起来很容易解析（我需要分别拥有 PlayerName、UID、STEAM_ID 和 TEAM）。但是 playerName 可能包含“<”和“>”。例如

```
SkOrPiOn <38> rus<1020><STEAM_0:0:985442350><Unassigned> 
```

我们得到这个

```
[('SkOrPiOn ', '38> rus<1020', 'STEAM_0:0:985442350', 'Unassigned')] 
```

如您所见，结果是错误的。

我所能做的，这是反向字符串和正则表达式模式，得到这个

```
[('dengissanU', '053244589:0:0_MAETS', '0201', 'sur >83< nOiPrOkS')] 
```

现在我可以反转这个变量。但是有没有更正确的方法来获得我需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:57:33.667

摆脱第一个`?`。它是一个修饰符，意思是“匹配尽可能少的字符”。您想要尽可能匹配的默认行为。

```
^(.+)<(.+?)><(.+?)><(.+?)>$ 
```

# testing - 将 QTP 结果导出到 html 报告

> ID：12208298
> 
> 赞同：1
> 
> 时间：2012-08-31T02:55:50.173
> 
> 标签：testing, automation, qtp

我是QTP的新手。如何将 QTP 结果导出到 html 报告？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:59:16.870

在**运行结果查看器**中，您可以选择`File -> Export To File...`在哪里可以控制将结果中的多少数据导出到 HTML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T09:28:15.610

在 UFT/QTP 11.5 中，可以按照以下步骤将测试结果导出为 html/doc/pdf 格式：

在 UFT 测试结果窗口中；

1.  导航到文件->导出到文件...

2.  在导出运行结果弹出窗口中，选择所需的选项并单击导出按钮

3.  在另存为对话框中，在“保存类型为字段”中选择“HTML/DOC/PDF 文件”

4.  点击保存按钮

现在测试结果将以 HTML/DOC/PDF 格式保存在指定位置..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T07:51:30.210

请在每次运行脚本时按照 UFT 中的以下步骤生成 HTML 报告：

1.  导航到工具 -> 选项 -> 常规 -> 运行会话
2.  **检查**运行会话结束时自动导出运行结果：
3.  点击配置。
4.  然后为您要生成的报告选择所需的路径和选项。

# java - Java 无效的命令行参数异常

> ID：12208299
> 
> 赞同：10
> 
> 时间：2012-08-31T02:56:26.127
> 
> 标签：java, exception, command-line-arguments

Java API 中的无效命令行参数是否有适当的异常类，还是我必须创建自己的？我试过搜索一个，但在 API 中找不到任何内容。

这是一个作业，所以我不能使用第三方库进行命令行解析。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T02:59:58.157

大多数情况下，当接收到的参数无效时，抛出一个[`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html).

> 公共类**IllegalArgumentException**扩展 RuntimeException
> 
> 抛出以指示方法已传递了非法或不适当的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T03:01:31.923

处理对程序没有意义的未知命令行参数或组合的最佳方法是显示错误消息并提供用法输出。

就个人而言，根据命令行的复杂程度，我将创建一个名为“usage”（通常是静态）的方法，该方法可以将可选的错误消息传递给它。

在解析传递给程序的命令行参数时，我将调用此方法并通过标志或直接退出，或者让`usage`我的方法调用退出。

但这只是我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T02:58:43.603

命令行参数以`String[]`. 如果您希望输入采用某种形式或某种顺序，您可以抛出一个您自己创建的异常来处理它（尽管抛出异常会终止程序；如果出现以下情况，您需要优雅地处理它这是必需的）。

# javascript - 使用 XML 显示的静态数据

> ID：12208300
> 
> 赞同：1
> 
> 时间：2012-08-31T02:56:49.090
> 
> 标签：javascript, jquery, xml, xml-parsing

我现在修改我的 XML，我的 XML 中有一个父元素`<imgRes>`，因为我有两个不同的子节点`<images>`和 < `rightContent>`。

在早些时候我不会有`<imgRes>`and `<rightContent>`，因为我添加了我的代码然后它没有添加到 div 中。我不知道我的 XML 结构是错误的还是缺少某些东西。

所以 <`rightContent>`有一个静态的 div 应该在图像滑动功能之外。我持有一个链接和一个数据。

在我出错的地方我需要一些帮助。

这是我尝试过的。

[http://jsfiddle.net/QNZDX/13/](http://jsfiddle.net/QNZDX/13/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:15:19.400

看起来您从未从 xml 中检索数据以将其设置到新的 DOM 元素中。我更新了 jsfiddle 以稍微更改 css 和 dom，以便 rightContent div 不会包含链接本身，但您需要的主要部分是：

```
$("#rightContent").text( $xmldata.find('rightData').find('data').text());
$("#rightLink").prop('href',$xmldata.find('rightData').find('link').text());
prevIndex++; 
```

更新的[小提琴](http://jsfiddle.net/QNZDX/14/)将显示细微的变化。

如果您不仅要更新链接的 URL，还要更新链接文本，那么您可以添加类似这样的内容来设置该值。

```
$("#rightLink").text($xmldata.find('rightData').find('link').text()); 
```

请注意，jsfiddle 中的硬编码值仅用于演示。您可以在 xml 中定义您喜欢的任何元素，然后通过 jquery 解析为 dom 元素值。

# c# - 如何在 C# 中选择具有给定属性值的节点？

> ID：12208302
> 
> 赞同：1
> 
> 时间：2012-08-31T02:56:56.563
> 
> 标签：c#, xml, xpath

我只想选择具有“名称”属性值 = 'syslog' 的目标元素。无论如何，我总是得到一个 NullReferenceException。谁能帮我找出问题所在？

---------------- 我的代码 -------------------------------- ------------

```
XmlNode root = _configFile.DocumentElement; // root is not none, and is correct.
XmlNode syslogNode = root.SelectSingleNode("descendant::targets/target[@name='syslog']"); // the syslogNode is null 
```

------我的 XML 文件 ------------------ --------

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <extensions>
    <add assembly="NLog.Targets.Syslog" />
  </extensions>

  <targets>
    <target name="syslog" xsi:type="Syslog" syslogserver="127.0.0.1" port="514" facility="Local7" />
    <target name="file" xsi:type="File" layout="${level} | ${longdate} | ${callsite:className=true:fileName=false:includeSourcePath=false:methodName=true} | ${message} ${exception:format=tostring}"
            fileName="${specialfolder:folder=LocalApplicationData}/Televic Conference/CoCon/Log/server_log_${shortdate}.txt"
            archiveFileName="${specialfolder:folder=LocalApplicationData}/Televic Conference/CoCon/Log/Archives/server_log.{#}.txt"
            archiveEvery="Day" archiveNumbering="Rolling" maxArchiveFiles="20" concurrentWrites="true" keepFileOpen="false"/>
    <target name="console" xsi:type="ColoredConsole" layout="${longdate}: ${message}"/>
    <target name="debug" xsi:type="OutputDebugString" layout="${longdate}: ${message}"/>
  </targets>

  <rules>
    <logger name="*" minLevel="Trace" appendTo="syslog"/>
    <logger name="*" minlevel="Trace" writeTo="file" />
  </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:16:37.843

使用 LINQ2XML ..它**很酷**

```
XElement doc = XElement.Load("yourStream.xml");
XNamespace g = "http://www.nlog-project.org/schemas/NLog.xsd";//global namespace g

foreach (var itm in doc.Descendants(g + "targets").Where(x=>x.Atrribute("name").Value=="syslog"))
{
itm;//your required node
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:12:15.440

您的文档有一个默认命名空间——您需要在 XPath 表达式中考虑或忽略它。看这里：

[XPath 选择具有命名空间的节点](https://stackoverflow.com/questions/536441/xpath-namespace-driving-me-crazy)

# java - Grails将日期时间保存为UTC时间，但将其读取为本地服务器时间？

> ID：12208305
> 
> 赞同：16
> 
> 时间：2012-08-31T02:57:11.480
> 
> 标签：java, datetime, grails, timezone, grails-2.0

我的 Grails 应用程序中有以下行将默认时区设置为 UTC：

```
TimeZone.setDefault(TimeZone.getTimeZone("UTC")) 
```

我有一个`Audit`带有`dateCreated`字段的实体：

```
class Audit {
    Date dateCreated
    String message
} 
```

然后我创建并保存它的一个实例：

```
def audit = new Audit(message: "Testing audit message") 
```

这会将其作为 UTC 时间正确保存到我的数据库中。但是，当我尝试回读时：

```
audit = Audit.get(1) 
```

时间戳被读回为本地时间。因此，如果我的时区是 +1 UTC 并且当前本地时间是**12:34:56 BST**，那么将保存到数据库中的是**11:34:56**，但是当我读回它时，它变成**了 11:34:56 BST** . 有谁知道如何解决这个问题，以便 Grails 将时间戳读回为 UTC 并相应地转换它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T07:29:07.167

在`Bootstrap.groovy`

```
 TimeZone.setDefault(TimeZone.getTimeZone("UTC")) 
```

上`JAVA_OPTS`。

```
-Duser.timezone=UTC 
```

来源：[这个线程](http://grails.1312388.n4.nabble.com/Default-timezone-td2221437.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-20T21:22:16.327

在 BootStrap.groovy 中，您还可以指定城市

```
TimeZone.setDefault(TimeZone.getTimeZone("America/Mexico_City")) 
```

这是 TimeZone 类中可用时区 ID 的列表，由 TimeZone.getAvailableIDs() 返回。

```
Etc/GMT+12
Etc/GMT+11
MIT
Pacific/Apia
Pacific/Midway
Pacific/Niue
Pacific/Pago_Pago
Pacific/Samoa
US/Samoa
America/Adak
America/Atka
Etc/GMT+10
HST
Pacific/Fakaofo
Pacific/Honolulu
Pacific/Johnston
Pacific/Rarotonga
Pacific/Tahiti
SystemV/HST10
US/Aleutian
US/Hawaii
Pacific/Marquesas
AST
America/Anchorage
America/Juneau
America/Nome
America/Yakutat
Etc/GMT+9
Pacific/Gambier
SystemV/YST9
SystemV/YST9YDT
US/Alaska
America/Dawson
America/Ensenada
America/Los_Angeles
America/Tijuana
America/Vancouver
America/Whitehorse
Canada/Pacific
Canada/Yukon
Etc/GMT+8
Mexico/BajaNorte
PST
PST8PDT
Pacific/Pitcairn
SystemV/PST8
SystemV/PST8PDT
US/Pacific
US/Pacific-New
America/Boise
America/Cambridge_Bay
America/Chihuahua
America/Dawson_Creek
America/Denver
America/Edmonton
America/Hermosillo
America/Inuvik
America/Mazatlan
America/Phoenix
America/Shiprock
America/Yellowknife
Canada/Mountain
Etc/GMT+7
MST
MST7MDT
Mexico/BajaSur
Navajo
PNT
SystemV/MST7
SystemV/MST7MDT
US/Arizona
US/Mountain
America/Belize
America/Cancun
America/Chicago
America/Costa_Rica
America/El_Salvador
America/Guatemala
America/Managua
America/Menominee
America/Merida
America/Mexico_City
America/Monterrey
America/North_Dakota/Center
America/Rainy_River
America/Rankin_Inlet
America/Regina
America/Swift_Current
America/Tegucigalpa
America/Winnipeg
CST
CST6CDT
Canada/Central
Canada/East-Saskatchewan
Canada/Saskatchewan
Chile/EasterIsland
Etc/GMT+6
Mexico/General
Pacific/Easter
Pacific/Galapagos
SystemV/CST6
SystemV/CST6CDT
US/Central
America/Bogota
America/Cayman
America/Detroit
America/Eirunepe
America/Fort_Wayne
America/Grand_Turk
America/Guayaquil
America/Havana
America/Indiana/Indianapolis
America/Indiana/Knox
America/Indiana/Marengo
America/Indiana/Vevay
America/Indianapolis
America/Iqaluit
America/Jamaica
America/Kentucky/Louisville
America/Kentucky/Monticello
America/Knox_IN
America/Lima
America/Louisville
America/Montreal
America/Nassau
America/New_York
America/Nipigon
America/Panama
America/Pangnirtung
America/Port-au-Prince
America/Porto_Acre
America/Rio_Branco
America/Thunder_Bay
America/Toronto
Brazil/Acre
Canada/Eastern
Cuba
EST
EST5EDT
Etc/GMT+5
IET
Jamaica
SystemV/EST5
SystemV/EST5EDT
US/East-Indiana
US/Eastern
US/Indiana-Starke
US/Michigan
America/Anguilla
America/Antigua
America/Aruba
America/Asuncion
America/Barbados
America/Boa_Vista
America/Campo_Grande
America/Caracas
America/Cuiaba
America/Curacao
America/Dominica
America/Glace_Bay
America/Goose_Bay
America/Grenada
America/Guadeloupe
America/Guyana
America/Halifax
America/La_Paz
America/Manaus
America/Martinique
America/Montserrat
America/Port_of_Spain
America/Porto_Velho
America/Puerto_Rico
America/Santiago
America/Santo_Domingo
America/St_Kitts
America/St_Lucia
America/St_Thomas
America/St_Vincent
America/Thule
America/Tortola
America/Virgin
Antarctica/Palmer
Atlantic/Bermuda
Atlantic/Stanley
Brazil/West
Canada/Atlantic
Chile/Continental
Etc/GMT+4
PRT
SystemV/AST4
SystemV/AST4ADT
America/St_Johns
CNT
Canada/Newfoundland
AGT
America/Araguaina
America/Bahia
America/Belem
America/Buenos_Aires
America/Catamarca
America/Cayenne
America/Cordoba
America/Fortaleza
America/Godthab
America/Jujuy
America/Maceio
America/Mendoza
America/Miquelon
America/Montevideo
America/Paramaribo
America/Recife
America/Rosario
America/Sao_Paulo
Antarctica/Rothera
BET
Brazil/East
Etc/GMT+3
America/Noronha
Atlantic/South_Georgia
Brazil/DeNoronha
Etc/GMT+2
America/Scoresbysund
Atlantic/Azores
Atlantic/Cape_Verde
Etc/GMT+1
Africa/Abidjan
Africa/Accra
Africa/Bamako
Africa/Banjul
Africa/Bissau
Africa/Casablanca
Africa/Conakry
Africa/Dakar
Africa/El_Aaiun
Africa/Freetown
Africa/Lome
Africa/Monrovia
Africa/Nouakchott
Africa/Ouagadougou
Africa/Sao_Tome
Africa/Timbuktu
America/Danmarkshavn
Atlantic/Canary
Atlantic/Faeroe
Atlantic/Madeira
Atlantic/Reykjavik
Atlantic/St_Helena
Eire
Etc/GMT
Etc/GMT+0
Etc/GMT-0
Etc/GMT0
Etc/Greenwich
Etc/UCT
Etc/UTC
Etc/Universal
Etc/Zulu
Europe/Belfast
Europe/Dublin
Europe/Lisbon
Europe/London
GB
GB-Eire
GMT
GMT0
Greenwich
Iceland
Portugal
UCT
UTC
Universal
WET
Zulu
Africa/Algiers
Africa/Bangui
Africa/Brazzaville
Africa/Ceuta
Africa/Douala
Africa/Kinshasa
Africa/Lagos
Africa/Libreville
Africa/Luanda
Africa/Malabo
Africa/Ndjamena
Africa/Niamey
Africa/Porto-Novo
Africa/Tunis
Africa/Windhoek
Arctic/Longyearbyen
Atlantic/Jan_Mayen
CET
ECT
Etc/GMT-1
Europe/Amsterdam
Europe/Andorra
Europe/Belgrade
Europe/Berlin
Europe/Bratislava
Europe/Brussels
Europe/Budapest
Europe/Copenhagen
Europe/Gibraltar
Europe/Ljubljana
Europe/Luxembourg
Europe/Madrid
Europe/Malta
Europe/Monaco
Europe/Oslo
Europe/Paris
Europe/Prague
Europe/Rome
Europe/San_Marino
Europe/Sarajevo
Europe/Skopje
Europe/Stockholm
Europe/Tirane
Europe/Vaduz
Europe/Vatican
Europe/Vienna
Europe/Warsaw
Europe/Zagreb
Europe/Zurich
MET
Poland
ART
Africa/Blantyre
Africa/Bujumbura
Africa/Cairo
Africa/Gaborone
Africa/Harare
Africa/Johannesburg
Africa/Kigali
Africa/Lubumbashi
Africa/Lusaka
Africa/Maputo
Africa/Maseru
Africa/Mbabane
Africa/Tripoli
Asia/Amman
Asia/Beirut
Asia/Damascus
Asia/Gaza
Asia/Istanbul
Asia/Jerusalem
Asia/Nicosia
Asia/Tel_Aviv
CAT
EET
Egypt
Etc/GMT-2
Europe/Athens
Europe/Bucharest
Europe/Chisinau
Europe/Helsinki
Europe/Istanbul
Europe/Kaliningrad
Europe/Kiev
Europe/Minsk
Europe/Nicosia
Europe/Riga
Europe/Simferopol
Europe/Sofia
Europe/Tallinn
Europe/Tiraspol
Europe/Uzhgorod
Europe/Vilnius
Europe/Zaporozhye
Israel
Libya
Turkey
Africa/Addis_Ababa
Africa/Asmera
Africa/Dar_es_Salaam
Africa/Djibouti
Africa/Kampala
Africa/Khartoum
Africa/Mogadishu
Africa/Nairobi
Antarctica/Syowa
Asia/Aden
Asia/Baghdad
Asia/Bahrain
Asia/Kuwait
Asia/Qatar
Asia/Riyadh
EAT
Etc/GMT-3
Europe/Moscow
Indian/Antananarivo
Indian/Comoro
Indian/Mayotte
W-SU
Asia/Riyadh87
Asia/Riyadh88
Asia/Riyadh89
Mideast/Riyadh87
Mideast/Riyadh88
Mideast/Riyadh89
Asia/Tehran
Iran
Asia/Aqtau
Asia/Baku
Asia/Dubai
Asia/Muscat
Asia/Oral
Asia/Tbilisi
Asia/Yerevan
Etc/GMT-4
Europe/Samara
Indian/Mahe
Indian/Mauritius
Indian/Reunion
NET
Asia/Kabul
Asia/Aqtobe
Asia/Ashgabat
Asia/Ashkhabad
Asia/Bishkek
Asia/Dushanbe
Asia/Karachi
Asia/Samarkand
Asia/Tashkent
Asia/Yekaterinburg
Etc/GMT-5
Indian/Kerguelen
Indian/Maldives
PLT
Asia/Calcutta
IST
Asia/Katmandu
Antarctica/Mawson
Antarctica/Vostok
Asia/Almaty
Asia/Colombo
Asia/Dacca
Asia/Dhaka
Asia/Novosibirsk
Asia/Omsk
Asia/Qyzylorda
Asia/Thimbu
Asia/Thimphu
BST
Etc/GMT-6
Indian/Chagos
Asia/Rangoon
Indian/Cocos
Antarctica/Davis
Asia/Bangkok
Asia/Hovd
Asia/Jakarta
Asia/Krasnoyarsk
Asia/Phnom_Penh
Asia/Pontianak
Asia/Saigon
Asia/Vientiane
Etc/GMT-7
Indian/Christmas
VST
Antarctica/Casey
Asia/Brunei
Asia/Chongqing
Asia/Chungking
Asia/Harbin
Asia/Hong_Kong
Asia/Irkutsk
Asia/Kashgar
Asia/Kuala_Lumpur
Asia/Kuching
Asia/Macao
Asia/Macau
Asia/Makassar
Asia/Manila
Asia/Shanghai
Asia/Singapore
Asia/Taipei
Asia/Ujung_Pandang
Asia/Ulaanbaatar
Asia/Ulan_Bator
Asia/Urumqi
Australia/Perth
Australia/West
CTT
Etc/GMT-8
Hongkong
PRC
Singapore
Asia/Choibalsan
Asia/Dili
Asia/Jayapura
Asia/Pyongyang
Asia/Seoul
Asia/Tokyo
Asia/Yakutsk
Etc/GMT-9
JST
Japan
Pacific/Palau
ROK
ACT
Australia/Adelaide
Australia/Broken_Hill
Australia/Darwin
Australia/North
Australia/South
Australia/Yancowinna
AET
Antarctica/DumontDUrville
Asia/Sakhalin
Asia/Vladivostok
Australia/ACT
Australia/Brisbane
Australia/Canberra
Australia/Hobart
Australia/Lindeman
Australia/Melbourne
Australia/NSW
Australia/Queensland
Australia/Sydney
Australia/Tasmania
Australia/Victoria
Etc/GMT-10
Pacific/Guam
Pacific/Port_Moresby
Pacific/Saipan
Pacific/Truk
Pacific/Yap
Australia/LHI
Australia/Lord_Howe
Asia/Magadan
Etc/GMT-11
Pacific/Efate
Pacific/Guadalcanal
Pacific/Kosrae
Pacific/Noumea
Pacific/Ponape
SST
Pacific/Norfolk
Antarctica/McMurdo
Antarctica/South_Pole
Asia/Anadyr
Asia/Kamchatka
Etc/GMT-12
Kwajalein
NST
NZ
Pacific/Auckland
Pacific/Fiji
Pacific/Funafuti
Pacific/Kwajalein
Pacific/Majuro
Pacific/Nauru
Pacific/Tarawa
Pacific/Wake
Pacific/Wallis
NZ-CHAT
Pacific/Chatham
Etc/GMT-13
Pacific/Enderbury
Pacific/Tongatapu
Etc/GMT-14
Pacific/Kiritimati 
```

# jquery - 是否可以使用 meiomask jQuery 插件根据某些掩码格式化字符串？

> ID：12208306
> 
> 赞同：0
> 
> 时间：2012-08-31T02:57:25.650
> 
> 标签：jquery

我正在使用[meiomask](http://www.meiocodigo.com/projects/meiomask/)来屏蔽输入。有一个标签，我在其中显示某个计算的结果。我希望将此结果格式化为十进制，但这不是输入字段。事实上，这甚至不是一个标签——它只是表格单元格中的文本。

我想知道我是否可以使用 meiomask 根据掩码在一种离线模式下格式化字符串，不附加输入字段。

可能吗？

**编辑**

我知道我可以使用只读输入字段。不过，这个问题本身就很有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:17:57.107

meiomask 有一个[字符串](https://github.com/fabiomcosta/jquery-meiomask/blob/master/jquery.meio.mask.js#L282)函数，您可以使用它来用任何掩码屏蔽任何字符串。

# quartz-scheduler - 需要动态设置quartz cron表达式

> ID：12208309
> 
> 赞同：6
> 
> 时间：2012-08-31T02:57:41.687
> 
> 标签：quartz-scheduler

我在我的 Web 应用程序（Servlet Web 应用程序）中使用了quartz，下面是quartz.property 文件和quartz.job.xml 的快照

石英属性

```
#===================================================
# Configure the Job Initialization Plugin
#===================================================

org.quartz.plugin.jobInitializer.class = org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin
org.quartz.plugin.jobInitializer.fileNames = jobs.xml
org.quartz.plugin.jobInitializer.failOnFileNotFound = true
org.quartz.plugin.jobInitializer.scanInterval = 10
org.quartz.plugin.jobInitializer.wrapInUserTransaction = false

<?xml version='1.0' encoding='utf-8'?>
<job-scheduling-data xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
  version="1.8">

    <schedule>
        <job>
            <name>my-very-clever-job</name>
            <group>MYJOB_GROUP</group>

            <description>The job description</description>
            <job-class>com.acme.scheduler.job.ReportJob</job-class>
        </job>

        <trigger>
            <cron>
                <name>my-trigger</name>
                <group>MYTRIGGER_GROUP</group>
                <job-name>my-very-clever-job</job-name>

                <job-group>MYJOB_GROUP</job-group>
                <!-- trigger every night at 4:30 am -->
                <cron-expression>0 30 4 * * ?</cron-expression>

            </cron>
        </trigger>
    </schedule>
</job-scheduling-data> 
```

一切正常，按这个顺序。我需要允许用户按照他们想要的方式更改时间（cron 表达式）。我的问题是如何动态设置 cron 表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:49:00.993

```
CronTrigger cronTrigger = (CronTrigger) stdScheduler
                .getTrigger(triggerName,triggerGroupName);
CronTrigger newTriggerIns = new CronTrigger();
 newTriggerIns.setJobName(cronTrigger.getJobName());
 newTriggerIns.setName(triggerName);
 newTriggerIns.setCronExpression(newCronExpression);
 stdScheduler.rescheduleJob(triggerName,triggerGroupName,newTriggerIns); 
```

在上面，取现有的触发器实例。创建一个新的触发器实例并设置 cron 表达式。

然后用新实例重新安排现有实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T14:58:47.023

像这样创建一个新的触发器是行不通的。

```
CronTrigger cronTrigger = (CronTrigger) stdScheduler.getTrigger(triggerName,triggerGroupName);
CronTrigger newTriggerIns = new CronTrigger();
newTriggerIns.setJobName(cronTrigger.getJobName());
newTriggerIns.setName(triggerName);
newTriggerIns.setCronExpression(newCronExpression);
stdScheduler.rescheduleJob(triggerName,triggerGroupName,newTriggerIns); //doesn't work 
```

您只需像这样编辑原始触发器：

```
CronTrigger cronTrigger = (CronTrigger) stdScheduler.getTrigger(triggerName,triggerGroupName);
cronTrigger.setCronExpression(newCronExpression);
stdScheduler.rescheduleJob(triggerName,triggerGroupName,cronTrigger); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:38:11.763

使用石英 api。以编程方式获取此触发器实例，将其转换为 CronTrigger 实例并使用它的 setCronExpression 动态放置表达式。

# android - Activity被杀死并恢复后恢复对象引用

> ID：12208311
> 
> 赞同：2
> 
> 时间：2012-08-31T02:57:49.593
> 
> 标签：android, android-fragments, android-viewpager

我有一个 FragmentPagerAdapter，它通过自定义 SurveyPage 类生成的视图进行分页。寻呼机中的最后一页由 SurveyFinishPage 生成，它尝试访问与 FragmentPagerAdapter 关联的调查并将所有调查答案拉在一起以显示它们。SurveyFinishPage 通过主 Activity 中的 getSurvey() 方法获取 Survey 对象。

通常这可以正常工作，并且 SurveyFinishPage 能够访问 FragmentPagerAdapter 正在使用的同一个调查对象。但是，如果 Activity 已被杀死并恢复，SurveyFinishPage 似乎仍在访问旧的调查（或者可能是它的副本） - 它显示在 Activity 被丢弃之前的答案，无论对新的、重建的答案的更改如何民意调查。

似乎在我的 MainActivity 中的 onRestoreInstanceState() 中恢复 aSurvey 的值应该为其他所有内容建立调查对象，因为 MainActivity 将其调查对象传递给 FragmentPagerAdapter，后者使用该对象制作片段......但似乎FragmentPagerAdapter 和 SurveyFinishPage 正在寻找两个不同的东西。

如何正确恢复 FragmentPagerAdapter 中片段的状态，以便它们都引用同一个 Survey 对象？

## MainActivity.java

```
public class MainActivity extends FragmentActivity {
    SurveyPagerAdapter mSurveyPagerAdapter;
    ViewPager mViewPager;
    Survey aSurvey;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_poll);

        if(savedInstanceState != null) {
            testSurvey = savedInstanceState.getParcelable("survey");
        }
        else {
            testSurvey = new Survey();
        }
        mSurveyPagerAdapter = new SurveyPagerAdapter(getSupportFragmentManager(), aSurvey);
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSurveyPagerAdapter);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putParcelable("survey", aSurvey);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        aSurvey = (Survey)savedInstanceState.getParcelable("survey");
    }
    [...]
} 
```

## SurveyPagerAdapter.java

```
public class SurveyPagerAdapter extends FragmentPagerAdapter {
    private Survey survey;
    [...]

    @Override
    public Fragment getItem(int i) {
        Fragment fragment;
        Bundle args = new Bundle();

        // index 0 is the title page
        if(i == 0) {
            fragment = new SurveyTitlePage();
        }
        // final index is the finish page
        else if(i == getCount()-1) {
            fragment = new SurveyFinishPage();
        }
        // all other indices are regular poll pages
        else {
            args.putParcelable("question", survey.getQuestion(i-1));
            fragment = new SurveyPage();
            fragment.setArguments(args);
        }

        return fragment;
    }
    [...]
} 
```

## 调查完成页面.java

```
public class SurveyFinishPage extends Fragment {
    private Survey survey;
    [...]

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    setSurvey(((MainPoll)getActivity()).getSurvey());
    LinearLayout view = new LinearLayout(getActivity());
    view.setOrientation(LinearLayout.VERTICAL);

    Button finishButton = new Button(getActivity());
    finishButton.setText("FINISH");

        final TextView textView = new TextView(getActivity());
        finishButton.setOnClickListener(new Button.OnClickListener() {
            @Override
            public void onClick(View v) {
                String output = "";

                for(int i=0; i<survey.getSize(); i++) {
                    try {
                        output += survey.getQuestion(i).getPrompt() + " - " + survey.getQuestion(i).getAnswer() + "\n";
                    } catch (Exception e) {
                        output += survey.getQuestion(i).getPrompt() + " - " + "no answer\n";
                    }
                }
                textView.setText(output);
            }
        });

        view.addView(finishButton);
        view.addView(textView);

        return view;
    }
} 
```

## 调查页面.java

```
public class SurveyPage extends Fragment {
        [...]

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            Bundle args = getArguments();
            Question question = args.getParcelable("question");
            View pageView = question.getQuestionView(getActivity(), container);
        return pageView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:20:08.313

您可以将 Survey 对象提升到 Android 应用程序类并将其作为单例引用。该答案可能会引起一些争论，但它是您问题的合理解决方案。Android 保证您的应用程序只会有 1 个实例，因此您可以确定（在合理范围内）您将只有 1 个 Survey 实例。

[http://developer.android.com/guide/faq/framework.html](http://developer.android.com/guide/faq/framework.html)

单例类

您可以通过使用单例来利用您的应用程序组件在同一进程中运行这一事实。这是一个设计为只有一个实例的类。它有一个名为 getInstance() 的静态方法，它返回实例；第一次调用此方法时，它会创建全局实例。因为所有调用者都获得相同的实例，所以他们可以将其用作交互点。例如，活动 A 可以检索实例并调用 setValue(3)；稍后的活动 B 可能会检索实例并调用 getValue() 以检索最后设置的值。

# c++ - 我应该如何保留指向 std::unique_ptr 的指针？

> ID：12208312
> 
> 赞同：2
> 
> 时间：2012-08-31T02:57:53.783
> 
> 标签：c++, unique-ptr

我有一个向量：

```
std::vector<std::unique_ptr<myClass>> vec;
//filling the vector
vec.push_back(std::unique_ptr<myClass>(new myClass()));
vec.push_back(std::unique_ptr<myClass>(new myClass()));
vec.push_back(std::unique_ptr<myClass>(new myClass())); 
```

`myClass`我需要一个不需要担心所有权的特定实例的句柄，例如：

```
std::unique_ptr<myClass>& myInstance; 
```

问题是在运行时`myInstance`需要指向不同的实例。`myClass`

我知道我可以使用`std::shared_ptr`，但我想保留它们`std::unique_ptr`，因此如果添加了已初始化的内容，则所有权将转移到`vec`.

**我应该如何保留指向 a 的指针`std::unique_ptr`？**

此外，在这里使用原始指针会被认为是不好的做法吗？指针不需要管理任何资源，但我不希望我的代码变得混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:13:36.857

对您帖子的评论表明，在“非拥有”容量中使用原始指针应该没问题。我倾向于同意这种普遍看法，但您的情况需要进一步检查。

对于您的情况，您不应使用“指向 std::unique_ptr 的指针”。问题是当您（或维护程序员）添加到向量时，向量可能会重新分配。如果是这样，则您的指针无效，不得使用。

一种选择是使用向量中的索引而不是指针。如果您曾经删除或重新排列向量中的条目，则会出现中断问题。

另一个更强大的选项是使用直接指向实际 myClass 对象的指针，而不是拥有它的 unique_ptr。通过使用对象的 unique_ptrs 向量而不是更常见的对象向量来启用此选项。

# c# - 如果对象具有相同的名称（C#），如何将值添加到字典中的键（对象）

> ID：12208314
> 
> 赞同：0
> 
> 时间：2012-08-31T02:58:32.327
> 
> 标签：c#, dictionary, parameters, key

所以，我有一本名为 Potions 的字典。我需要检查药水中的键是否与作为参数传递的对象同名。现在我能够做到这一点，但如果项目对象和键具有相同的名称，我无法弄清楚如何向该特定键添加值。此代码适用于对象的第一个实例。但是当我添加另一个与键同名的实例对象时，我得到了一个未找到键的异常。我知道这两个对象不会相同。如何在字典中提取对象引用？还是有其他方法？

```
public static void addItem(Potion item)
 {
    if (Potions.Count >0)
    {
        foreach(KeyValuePair<Potion,int> pair in Potions)
        {
            if (pair.Key.itemName == item.itemName)
            {
            containsItem = true;
            }   
        }
        if (containsItem)
        {
        Potions[item] += 1;
        Debug.Log (Potions[item]);
        containsItem = false;
        }
        else
            {       
            Potions.Add(item,1);
            }
    }
    else
    {
    Potions.Add (item,1);
    }

    foreach(KeyValuePair<Potion,int> pair in Potions)
    {
        Debug.Log (pair.Key.itemName + " : " + pair.Value);
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:08:36.107

我实际上会提供一个替代实现。

```
enum Potion
{
    Health,
    Mana
}

class PotionBag
{
    readonly int[] _potions = new int[Enum.GetValues(typeof(Potion)).Length];

    public void Add(Potion potion)
    {
        _potions[(int)potion]++;
    }

    public void Use(Potion potion)
    {
        if (GetCount(potion) == 0)
            throw new InvalidOperationException();
        _potions[(int)potion]--;
    }

    public int GetCount(Potion potion)
    {
        return _potions[(int)potion];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:04:28.933

这是行不通的，因为您将添加的项目用作键，并且它不是同一个对象。

为什么不将密钥保存在占位符中，然后在循环之后查找它？

```
Potion key = null;
foreach(KeyValuePair<Potion,int> pair in Potions)
    {
        if (pair.Key.itemName == item.itemName)
        {
         key = pair.Key
        }   
    }

if(key != null):
    Potions[key] += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:09:17.870

您正在`Potion`用作密钥，但根据您的代码，对您来说重要的是`itemName`. 因此，我建议您将字典更改为`<string, int>`. 此外，正如评论的那样，在使用自定义类时，建议覆盖`Equals`和`GetHashCode`.

您的代码可能是这样的：

```
 public static void addItem(Potion item)
 {
    if(Potions.ContainsKey(item.itemName))
        Potions[item.itemName] += 1;
    else
        Potions.Add (item.itemName,1);

    foreach(KeyValuePair<string,int> pair in Potions)
    {
        Console.WriteLine(pair.Key + " : " + pair.Value);
    }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T03:24:41.853

您可以覆盖`Equals`and `GetHashCode`，但这可能有其他含义。相反，您可以`IEqualityComparer`在创建字典时使用 an，如下所示：

```
class Potion {
    public string Name;
    public int Color;
}

class PotionNameEqualityComparer : IEqualityComparer<Potion> {
    public bool Equals(Potion p1, Potion p2) {
        return p1.Name.Equals(p2.Name);
    }
    public int GetHashCode(Potion p1) {
        return p1.Name.GetHashCode();
    }
}

void Main() {
    var d = new Dictionary<Potion, int>(new PotionNameEqualityComparer());
    var p1 = new Potion() { Name = "Health", Color = 1 };
    var p2 = new Potion() { Name = "Health", Color = 2 };
    d.Add(p1, 1);
    d[p2]++; // works, and now you have two health potions. 
             // Of course, the actual instance in the dictionary is p1; 
             // p2 is not stored in the dictionary.    
} 
```

# java - 客户端 NIO 真的很重要吗？

> ID：12208320
> 
> 赞同：0
> 
> 时间：2012-08-31T02:59:40.653
> 
> 标签：java, client, nio

据我所知，蔚来可以帮助服务器，处理很多请求。因为 NIO 不使用每个请求模型一个线程。

但是客户端是与服务器建立连接的，通常没有那么多连接，客户端完全可以处理。

我看到一些客户端库使用 NIO，我不太确定。那么为什么客户端的蔚来兄弟，有没有性能提升呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:09:40.373

没有很好的理由在客户端使用 NIO，除非您可能正在编写具有数百或数千个出站连接的网络爬虫之类的东西。

可以说，在服务器上用户也没有太多理由。select() 模型是为替代方案分叉进程的时代设计的。现在我们有了线程，整个模型没有实际意义，恕我直言。

# rest - RESTful GET/POST 表单语义

> ID：12208327
> 
> 赞同：2
> 
> 时间：2012-08-31T03:00:07.180
> 
> 标签：rest

当我从[http://example.com/organization/](http://example.com/organization/)获取时，我得到一个组织列表。

当我从[http://example.com/organization/xyz/](http://example.com/organization/xyz/)获取时，我得到了组织 xyz 的记录。

当我将表单数据发布到[http://example.com/organization/](http://example.com/organization/)时，我创建了一个新组织。

我应该使用什么 URL 来获取表单以通过 POST 到[http://example.com/organization/](http://example.com/organization/)来创建新组织？

查看[如何对编辑表单执行 RESTful 请求？](https://stackoverflow.com/questions/1657454/how-to-do-a-restful-request-for-an-edit-form)和其他来源，看来我真的在为组织寻找表单资源——所以我应该在[http://example.com/organization/form/](http://example.com/organization/form/)之类的地方获取该表单，然后将其发布到[http://example。 com/organization/](http://example.com/organization/)如上所述。这似乎......虽然不整洁。

**更新**

tuespetre 的评论让我认为最好的方法是拥有一个表单资源。组织表格通过 GET 提供给 /form/organization/，填写并发布到 /organization/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:47:28.547

您所说的表单不是资源，而是收集用户输入以发布新资源的模板。

一种真正的“RESTful 方式”是利用一些 Javascript 将表单“包含”在集合页面`/organizations`中，或者作为隐藏的“向下滑动”表单，或者可能是在某个号召性用语按钮时出现的模态对话框被按下。出于两个原因，这将具有语义意义：

1.  您不必为表单使用一些任意 URI（从您的域对象的意义上说，这并不是真正的资源），并且
2.  “创建”表单用于发布到集合，因此它与该集合密切相关，因此与集合完全不合适。

当然，您会发现对此有很多意见，但我不希望有任意的 URI 破坏既定模式（即，您没有得到一个 id 为“新”的组织，那么为什么会有这种不一致呢？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:11:43.617

如果您尝试实现它，我已经看到它以不同的方式完成，我认为没有规则（但是您可以遵循或不遵循不同的模式/方法）。我会让它[http://example.com/organization/new/](http://example.com/organization/new/)

# javascript - jQuery UI 模态对话框覆盖淡出

> ID：12208336
> 
> 赞同：4
> 
> 时间：2012-08-31T03:00:55.703
> 
> 标签：javascript, jquery, animation, overlay, modal-dialog

是否可以在 jQuery UI 模式对话框叠加层上应用淡出效果？问题是当模式对话框关闭时覆盖 div 被破坏，从而阻止了任何类型的动画。如果覆盖 div 在关闭时没有被破坏，这是我的代码。

```
$("#edit-dialog-box").dialog(
{
    autoOpen: false,
    modal: true,
    width: "30em",
    show: "fade",
    hide: "fade",
    open: function()
    {
        $(".ui-widget-overlay").hide().fadeIn();
    },
    close: function()
    {
        $(".ui-widget-overlay").fadeOut();
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:04:47.180

演示：http: [//jsfiddle.net/276Ft/2/](http://jsfiddle.net/276Ft/2/)

```
$('#dialog').dialog({
    autoOpen: true,
    modal: true,

    width: '100px',
    height: '100px',

    show: 'fade',
    hide: 'fade',

    open: function () {
        $('.ui-widget-overlay', this).hide().fadeIn();

        $('.ui-icon-closethick').bind('click.close', function () {
            $('.ui-widget-overlay').fadeOut(function () {
              $('.ui-icon-closethick').unbind('click.close');
              $('.ui-icon-closethick').trigger('click');
            });

            return false;
        });
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-20T13:28:01.923

我建议不要将叠加层的淡出绑定到“closethick”关闭事件。
此解决方案适用于所有情况，例如，如果您使用“取消”按钮，或者如果对话框在执行其他任何操作后由于其他按钮而自行关闭：

```
$('#dialog').dialog({
    autoOpen: true,
    modal: true,

    width: '100px',
    height: '100px',

    show: 'fade',
    hide: 'fade',

    open: function () {
        $('.ui-widget-overlay', this).hide().fadeIn();
    },

    beforeClose: function(event, ui){
        // Wait for the overlay to be faded out to try to close it again
        if($('.ui-widget-overlay').is(":visible")){
            $('.ui-widget-overlay').fadeOut(function(){
                $('.ui-widget-overlay').hide();
                $('.ui-icon-closethick').trigger('click');
            });
            return false; // Avoid closing
        }
    }
}); 
```

# java - 在什么情况下，Java 性能会随着内存的增加而下降？

> ID：12208337
> 
> 赞同：4
> 
> 时间：2012-08-31T03:01:11.153
> 
> 标签：java, jakarta-ee, performance-testing

我们正在 DEV 环境中对 Java 1.6 应用程序进行负载测试。JVM 堆分配为 2Gb，-Xms2048m -Xmx2048m。在负载测试下，应用运行流畅，从不使用超过 1.25Gb 的堆，垃圾回收完全正常。

在我们的 UAT 环境中，我们使用相同的参数运行负载测试，唯一的区别是 JVM，它分配了 4Gb，-Xms4096m -Xmx4096m，否则，硬件与 DEV 完全相同。但是在负载测试期间，性能非常糟糕，应用程序几乎耗尽了整个堆，并且垃圾收集猖獗。

我们一遍又一遍地运行这些测试，消除了所有可能影响性能的症状，但结果是一样的。在什么情况下会出现这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:01:17.840

您的应用程序在生产环境和 UAT 环境中有所不同。

从症状来看，（IMO）不太可能是硬件、操作系统性能调优或JVM版本的差异。不用说，这不太可能是由于应用程序具有更多内存。

（您的应用程序可能会做一些奇怪的事情并不是不可想象的......比如根据最大堆大小调整某些数据结构的大小并计算错误。但我认为您会意识到这种可能性，所以让我们暂时忽略它.)

这可能*与*操作系统环境的差异有关；例如，不同版本的操作系统或某些应用程序、网络差异、语言环境差异等等。但最重要的是，当你的应用程序在 UAT 上运行时，有 99% 的把握肯定存在内存泄漏，而内存泄漏正是占用堆内存并使 GC 过载的原因。

我的建议是将其视为存储泄漏问题，并使用标准工具/技术来追踪问题的原因。在此过程中，您很可能能够弄清楚为什么这只发生在您的 UAT 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:23:31.090

罪魁祸首可能是垃圾收集，正常的“stop-the-world”类型的收集给我们带来了一些性能问题；服务器软件运行速度很慢，但服务器的负载也很低。最终我们发现有一个“stop-the-world”——垃圾收集器线程在某些情况下（操作产生大量垃圾）一直在运行整个软件。

转向并发垃圾收集缓解了启动参数的问题`-XX:+UseParallelOldGC -XX:ParallelGCThreads=8`。我们在测试和生产中“仅”使用 2gb 堆，但值得注意的是，GC 占用的时间会随着堆的增大而增加（即使您的软件从未真正使用过所有这些）。

您可能想从此处阅读有关不同垃圾收集器选项和调整的更多信息：[Java SE 6 HotSpot[tm] Virtual Machine Garbage Collection Tuning](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)。

此外，这个问题的答案可以提供一些帮助：[Java very large heap sizes](https://stackoverflow.com/q/214362/594183)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T06:45:01.563

分析这两台机器上的堆转储并了解在这两个环境中以不同方式消耗堆的原因是值得的。直方图会有所帮助。

# mysql - 有没有办法将这三个sql语句合并为单个sql语句

> ID：12208338
> 
> 赞同：1
> 
> 时间：2012-08-31T03:01:22.010
> 
> 标签：mysql, sql

```
select b.b_id from btable b inner join atable a on b.b_id = a_id
go
delete from btable where b_id in (...)
go
insert into btable select * from atable where a_id in (...)
go 
```

第二条和第三条sql语句的条件是第一个sql查询结果，

现在我想将这三个 sql 语句合并为单个 sql 语句，

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:03:51.520

不，这是不可能的。

PS：在一个语句中包含所有 3 个子句几乎不会被称为“查询优化”。优化是在您提高查询性能时，而不是在您只接受 N 个查询并将它们放在一个查询中时。

实际上这是新手之间的一个常见误解 - 更少的查询自动意味着它们会执行得更快。这是错误的。您应该有尽可能多的查询来检索所有必要的数据 - 不多也不少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T03:06:52.393

问题是为什么-如果它们都必须按顺序执行，那么如果它们相关，您可以将它们分组为事务-但这取决于您的表引擎

如果它们是事务，这将要求所有三个都工作。

同样在事务中，您可以测试 sql 命令的结果并决定是否要/需要继续它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:45:16.490

我相信，合并是不可能的，但您可以做的是将初始结果集放入临时表并重用它。

喜欢

```
CREATE TEMPORARY TABLE tbl (b_id int)

select b.b_id into tbl from btable b inner join atable a on b.b_id = a_id

delete from btable where b_id in (select b_id from tbl)

insert into btable select * from atable where a_id in (select b_id from tbl)

drop table tbl 
```

我希望这会给你一些开始的想法。

# android - android-位图可绘制为背景图像以填充屏幕但保持纵横比

> ID：12208341
> 
> 赞同：4
> 
> 时间：2012-08-31T03:01:32.190
> 
> 标签：android, background, drawable, scaling

我无法弄清楚如何将位图用作背景图像，使其缩放以填充屏幕但保持纵横比。到目前为止，我只找到了使用附加 ImageView 而不是背景图像并使用 android:scaleType="centerCrop" 的解决方案

```
...
<ImageView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:contentDescription="@string/desc_background"
    android:scaleType="centerCrop"
    android:src="@drawable/background"
/>
... 
```

不过我更愿意通过在窗口上设置活动背景来解决这个问题

```
 <style ...>
 <item name="android:windowBackground">@drawable/background</item> 
```

正如我被告知（并看到）这要快得多。（@drawable/background 是一个 XML 可绘制对象）

似乎是一项常见的任务，但到目前为止我找不到解决方案。任何建议将不胜感激。

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T09:54:36.077

我在我的项目中多次偶然发现同样的问题，每次由于缺乏时间（和懒惰），我都会对一个不太理想的解决方案感到满意。但最近我找到了一些时间来解决这个特殊问题。这是我的解决方案，希望对您也有帮助。

```
Bitmap scaleDownLargeImageWithAspectRatio(Bitmap image)
        {
            int imaheVerticalAspectRatio,imageHorizontalAspectRatio;
            float bestFitScalingFactor=0;
            float percesionValue=(float) 0.2;

            //getAspect Ratio of Image
            int imageHeight=(int) (Math.ceil((double) image.getHeight()/100)*100);
            int imageWidth=(int) (Math.ceil((double) image.getWidth()/100)*100);
            int GCD=BigInteger.valueOf(imageHeight).gcd(BigInteger.valueOf(imageWidth)).intValue();
            imaheVerticalAspectRatio=imageHeight/GCD;
            imageHorizontalAspectRatio=imageWidth/GCD;
            Log.i("scaleDownLargeImageWIthAspectRatio","Image Dimensions(W:H): "+imageWidth+":"+imageHeight);
            Log.i("scaleDownLargeImageWIthAspectRatio","Image AspectRatio(W:H): "+imageHorizontalAspectRatio+":"+imaheVerticalAspectRatio);

            //getContainer Dimensions
            int displayWidth = getWindowManager().getDefaultDisplay().getWidth();
            int displayHeight = getWindowManager().getDefaultDisplay().getHeight();
           //I wanted to show the image to fit the entire device, as a best case. So my ccontainer dimensions were displayWidth & displayHeight. For your case, you will need to fetch container dimensions at run time or you can pass static values to these two parameters 

            int leftMargin = 0;
            int rightMargin = 0;
            int topMargin = 0;
            int bottomMargin = 0;
            int containerWidth = displayWidth - (leftMargin + rightMargin);
            int containerHeight = displayHeight - (topMargin + bottomMargin);
            Log.i("scaleDownLargeImageWIthAspectRatio","Container dimensions(W:H): "+containerWidth+":"+containerHeight);

            //iterate to get bestFitScaleFactor per constraints
            while((imageHorizontalAspectRatio*bestFitScalingFactor <= containerWidth) && 
                    (imaheVerticalAspectRatio*bestFitScalingFactor<= containerHeight))
            {
                bestFitScalingFactor+=percesionValue;
            }

            //return bestFit bitmap
            int bestFitHeight=(int) (imaheVerticalAspectRatio*bestFitScalingFactor);
            int bestFitWidth=(int) (imageHorizontalAspectRatio*bestFitScalingFactor);
            Log.i("scaleDownLargeImageWIthAspectRatio","bestFitScalingFactor: "+bestFitScalingFactor);
            Log.i("scaleDownLargeImageWIthAspectRatio","bestFitOutPutDimesions(W:H): "+bestFitWidth+":"+bestFitHeight);
            image=Bitmap.createScaledBitmap(image, bestFitWidth,bestFitHeight, true);

            //Position the bitmap centre of the container
            int leftPadding=(containerWidth-image.getWidth())/2;
            int topPadding=(containerHeight-image.getHeight())/2;
            Bitmap backDrop=Bitmap.createBitmap(containerWidth, containerHeight, Bitmap.Config.RGB_565);
            Canvas can = new Canvas(backDrop);
            can.drawBitmap(image, leftPadding, topPadding, null);

            return backDrop;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:07:41.173

您是否尝试将 adjustViewBounds 属性设置为 true ？

[http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds)

# r - 在 R 中，当调查长度不同时，如何计算卡方检验中的预期值？

> ID：12208346
> 
> 赞同：1
> 
> 时间：2012-08-31T03:02:37.403
> 
> 标签：r, chi-squared

我正在做一项行为研究，我想看看一个物种在三个时期之间是否表现出与预期显着不同的反应。该物种有 47 次独立观察，每次有 3 个时段，总观察时间为 8.6 分钟。第一节为 3 分钟，第二节为 0.6 分钟，第三节为 5 分钟。在每个时期，动物可以做出积极或消极的反应。在第一阶段，有两个积极的回应（在 47 个观察中；45 个消极），在第二阶段，47 个回应中有 13 个是积极的，在第三阶段，47 个回应中有 14 个是积极的。

因此，我正在尝试运行卡方检验，在其中调整零假设中的概率以纠正时段之间的时间差异，但我认为我做的不正确。

```
data<-c(2,13,14)
null.probs<-c(3/8.6, 0.6/8.6, 5/8.6)
chi<-chisq.test(data, p=null.probs) 
```

我相当肯定，在这种情况下，我对这些预期值的零假设是不正确的，但我不确定如何正确调整它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T04:51:24.280

如果您运行`glm`带有“泊松”错误的拟合，您会得到一个分布为卡方的偏差统计量。您可以将计数用作结果并添加一个偏移项，`log(time)`该项将针对不同的观察长度进行调整。

```
> counts<-c(2, 13, 14)
> times<-c(3, 0.6, 5)
> glm(counts ~ letters[1:3] +offset( log(times)), family="poisson")

Call:  glm(formula = counts ~ letters[1:3] + offset(log(times)), family = "poisson")

Coefficients:
  (Intercept)  letters[1:3]b  letters[1:3]c  
      -0.4055         3.4812         1.4351  

Degrees of Freedom: 2 Total (i.e. Null);  0 Residual
Null Deviance:      36.68 
Residual Deviance: 1.776e-15    AIC: 17.52 

Degrees of Freedom: 2 Total (i.e. Null);  0 Residual
Null Deviance:      36.68 
Residual Deviance: 1.776e-15    AIC: 17.52 
```

您已经完全拟合了一个可能只有两个自由度的模型。因此，精确拟合显然可以解释所有数据。您用于推理的是日志（计数）与泊松均值的偏差总和。（如果任何计数为零，则会出现可预测的问题。）

# android - /dev/mem 和 /dev/kmem 不存在？

> ID：12208350
> 
> 赞同：4
> 
> 时间：2012-08-31T03:03:21.403
> 
> 标签：android, linux, linux-kernel

如果有人可以解释为什么这两个文件不存在，我将不胜感激？没有这两个文件的Android内核的虚拟内存空间和物理空间如何？

编辑：我有 Android 2.3.7 (Cyanogen mod)，这 2 个文件不存在： ![在此处输入图像描述](../Images/007a67345700c0c334a8afc5a2ac512e.png)

Edit2：我检查了运行 ICS 的三星 Galaxy S3，存在 2 个文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T05:33:04.510

( `/dev/mem`c:1:1) 和`/dev/kmem`(c:1:2) 设备节点只是`drivers/char/mem.c`Linux 内核中暴露给用户空间的 API。内核本身直接管理内存而不使用这些设备节点，一般用户空间也不需要它们。

`/dev`只是一个（按照传统）包含设备节点的目录，这些设备节点是特殊的“文件”；`/dev`可用的内容与内核提供的内容之间没有严格的关系。（有类似`udev`or之类的工具`mdev`可以创建和销毁设备节点以`/dev`响应内核事件，但这些工具并不总是用于硬件相对固定和已知的嵌入式世界。）如果您愿意，可以尝试创建这些节点以进行交互与 using `mknod`（这可以在任何地方，不一定在`/dev`）。但是，内核可能已经配置了`CONFIG_DEVKMEM=n`，在这种情况下，这些设备无论如何都无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:41:49.127

它们存在于我的手机上。

![在此处输入图像描述](../Images/d430297a0d675e8aeeb4b58c92299b2e.png)

由于权限问题，android 上的大多数文件浏览器都无法查看这些文件

# mysql - 同时使用 MongoDB 和 MySQL 的 Hadoop 配置

> ID：12208353
> 
> 赞同：1
> 
> 时间：2012-08-31T03:03:46.050
> 
> 标签：mysql, mongodb, hadoop-plugins

任何人都可以将示例代码从 mongodb 提供给 rdbs ...我已经尝试过，从 mongodb 获取数据并将输出存储在 mongodb 中。为此，我知道如何在 java 作业中进行 hadoop 配置。

我想知道三件事...

1.  哪个hadoop版本同时支持mongodb和rdbs？
2.  是否可以使用多个集合作为输入...？如果可能的话，我们怎么能做到这一点？
3.  我在hadoop中尝试了mongodb查询，它工作正常。但是当我定义排序或限制时......它不能正常工作..即使它没有从mongodb获取数据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:58:27.350

```
1\. which hadoop version support both mongodb and rdbs? 
```

我相信所有支持 MongoDB 的 Hadoop 版本也支持 RDBMS（RDBMS 实现早于 MongoDB）。

有关与 MongoDB 一起使用的受支持的 Hadoop 版本，请参阅：[构建适配器](http://api.mongodb.org/hadoop/Building+the+Adapter.html)。检查版本信息，因为某些 Hadoop 版本不支持 Streaming Connector（即，如果您想用 Python 等非 JVM 语言编写作业）。

```
2\. Is it possible to use multiple collections as input...?
If possible, how we can do that? 
```

MongoDB Hadoop 连接器 v1.0.0 不支持多个集合作为输入，但社区中有一些人正在研究这个（请参阅：[功能/多个输入](https://github.com/mongodb/mongo-hadoop/pull/39)）。

```
3\. I tried mongodb query in hadoop,It's working fine. But when i defined
sort or limit... It is not working properly..even it's not fetching data
from mongodb... 
```

您能否举例说明您如何/在何处提供这些选项？你指的是`mongo.input.sort`和`mongo.input.limit`属性吗？

您可能想尝试在 MongoDB 中启用[Database Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)以确认正在发送查询：

```
 db.setProfilingLevel(2) 
```

# iphone - 如何在 iOS 中使用文件 xib 自定义键盘

> ID：12208354
> 
> 赞同：1
> 
> 时间：2012-08-31T03:03:47.243
> 
> 标签：iphone, ios, xib, uikeyboard

我想通过在 nib 文件中设计来自定义 iphone 中的键盘。我怎样才能调用它来使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:06:54.937

根据[Apple 的提交指南](http://developer.apple.com/appstore/resources/approval/guidelines.html)

*   2.5 使用非公开 API 的应用将被拒绝
*   2.6 应用程序在其指定容器区域之外读取或写入数据将被拒绝

没有公共 API 可以添加额外的键盘

有关示例，请参阅[自定义键盘](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)链接。

* * *

设计视图后，您可以启动自定义键盘

如果你使用 **UITextField**那么它的代表是：

通过退出 textField firstResponder 在以下方法中显示自定义键盘：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField; 
```

在以下方法中隐藏自定义键盘：

```
- (void)textFieldDidEndEditing:(UITextField *)textField; 
```

* * *

如果你有**UITextView**那么它的代表如下：

通过退出 textView firstResponder 在以下方法中显示自定义键盘：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView; 
```

在以下方法中隐藏自定义键盘：

```
- (void)textViewDidEndEditing:(UITextView *)textView; 
```

# android - 适用于 Android 的 D2XX 示例

> ID：12208357
> 
> 赞同：0
> 
> 时间：2012-08-31T03:04:17.400
> 
> 标签：android, android-ndk

谁能给我一个关于如何在这个上尝试**D2XX 示例**的分步说明： http: [//www.ftdichip.com/Support/Documents/TechnicalNotes/TN_134_FTDI_Android_D2XX_Driver.pdf](http://www.ftdichip.com/Support/Documents/TechnicalNotes/TN_134_FTDI_Android_D2XX_Driver.pdf) 我在我的设备上尝试它时遇到了麻烦。根据要求。我的设备已经植根，我也有 ndk-build 文件，但是当我运行项目时它显示强制关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:35:41.000

以下是运行示例演示所需的步骤。

1.  在您的 android 设备上安装示例应用程序。

2.  通过 adb 连接您的设备。

3.  使用 adb shell 访问您的设备。

4.  键入 cd /dev/bus/usb

5.  然后输入 ls

6.  您应该会看到诸如 001 和 002 之类的目录。

7.  转到每个目录，例如 cd 001 。

8.  然后使用以下命令让您的应用程序访问 USB：

    chmod 666 *

9.  启动您的应用程序，它现在应该检测到您的 ftdi 设备，您将能够传输和接收数据。

在你的安卓盒子上安装应用程序。

# objective-c - 更改锚点后设置框架时，为什么我的视图会移动？

> ID：12208361
> 
> 赞同：10
> 
> 时间：2012-08-31T03:04:52.663
> 
> 标签：objective-c, ios, uikit

我做了两个实例`UILabel`并将它们添加到我`ViewController`的视图中。然后我将`anchorPoint`每个从 0.5 更改为 1.0（x 和 y）。

接下来，我将框架重置为`uiLabel2`我创建它的框架：(100,100,100,20)。

当我运行应用程序`uiLabel1`并`uiLabel2`显示在不同位置时。为什么？

```
UILabel *uiLabel1 = [[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 20)] autorelease];
uiLabel1.text = @"UILabel1";
uiLabel1.layer.anchorPoint = CGPointMake(1, 1);

UILabel *uiLabel2 = [[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 20)] autorelease];
uiLabel2.text = @"UILabel2";
uiLabel2.layer.anchorPoint = CGPointMake(1, 1);
uiLabel2.frame = CGRectMake(100, 100, 100, 20);

[self.view addSubview:uiLabel1];
[self.view addSubview:uiLabel2]; 
```

![在此处输入图像描述](../Images/1aa065cc6bb75e2a3152897d2060e376.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-31T03:39:09.377

A`CALayer`有四个属性来确定它在其超层中的出现位置：

*   `position`（与视图的`center`属性相同）
*   `bounds`（实际上只是 的`size`一部分`bounds`）
*   `anchorPoint`
*   `transform`

您会注意到这**不是**`frame`这些属性之一。该属性实际上是从这些属性派生的。设置属性时，图层实际上会根据您提供的框架和图层的现有.**`frame``frame``center``bounds.size``anchorPoint`**

 **您创建第一层（通过创建第一个`UILabel`，它是 的子类`UIView`，并且每个`UIView`都有一个层），给它一个 100,100,100,20 的框架。该图层的默认锚点为 0.5,0.5。因此，它将其边界计算为 0,0,100,20，将其位置计算为 150,110。它看起来像这样：

![锚在中心](../Images/a705baf69a6f14e5bcaa54f6eb900244.png)

然后将其锚点更改为 1,1。由于您不直接更改图层的位置或边界，并且您不会通过设置其框架来间接更改它们，因此图层会移动，以便其新锚点位于其超级图层中的（未更改的）位置：

![锚在角落](../Images/8e15d0b02b48d45a4c9f45e28af01df7.png)

如果您现在要求图层（或视图）的框架，您将获得 50,90,100,20。

当您创建第二层（第二层`UILabel`）时，在更改其锚点后，设置其框架。因此，图层会根据您提供的帧及其现有锚点计算新的位置和边界：

![用重置框架锚定角落](../Images/facaa2cb05952eeadba39950632d7d8a.png)

如果您现在向图层（或视图）询问其框架，您将获得您设置的框架，100,100,100,20。但是如果你问它的位置（或视图的中心），你会得到 200,120。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T03:25:22.880

这正是锚点的作用。在更改锚点之前，您根据标签的中心设置框架。之后，您将根据右下角设置框架。

由于您只为一个标签重置框架，一个基于新锚点调整其框架，另一个保持在旧位置。

如果您希望它们位于同一点，则需要在编辑锚点后重置它们的框架，或者根本不设置锚点。

[本指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html)解释了有关锚点的更多信息。**

# php - 使用用户定义的函数了解数组排序或比较函数回调

> ID：12208364
> 
> 赞同：2
> 
> 时间：2012-08-31T03:05:34.123
> 
> 标签：php, arrays

假装我不知道我在做什么，我不知道。你能解释一下需要回调的数组排序和比较函数是如何工作的吗？

以`uasort()`函数为例。我应该如何设计一个回调函数来处理这个？当我尝试对数据进行排序时，“-1”、“+1”和“0”是什么意思？它会扫描所有数组元素吗？还是比这更有效？如果我希望“w”在“b”之前，而“a”在“x”之前怎么办？您可以在这个看似简单的领域提供的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:14:43.293

我会试一试！

例如，让我们看一个名称列表。你和我都知道如何按字母顺序对姓名列表进行排序，并且做了一百亿次。同样的事情也适用于数字。计算机需要能够对排序可能不那么直观的数据进行排序。

用于排序数组的回调函数涉及允许数组包含任意类型的数据的想法，回调提供“规则”来说明该数组中的任何两个项目如何相互关联。这样，排序算法可以获取该数据数组，重复调用“回调”函数以确定哪些元素属于哪个顺序，并返回排序后的列表。这就是回调的本质。

如果你想要一个字面上的类比，假设你把一个数据列表交给一个朋友，他们只知道一种排序*方法*，但不知道你列表中的项目是如何关联的。他们“回电”给你，问“这两个元素中的哪一个先出现？” 而你，知道数据和规则，拿起物品，应用你的规则，然后告诉朋友答案。最终，在多次重复此过程后，您的数据将返回给您排序。

这样，返回 -1、0 或 1 的“回调”返回的值表示，当用两条数据调用时，-1 表示“项目一在项目二之前”，0 表示“项目一等于项目2”，+1 表示“第 1 项在第 2 项之后”。您只需提供根据数据规则确定返回哪个值的比较。您可以定义任意数据集，并在您的问题“空间”中定义您希望的任何优先规则。顺便说一句，这是面向对象编程的重要组成部分——我可以利用这种“回调”思想来实现复杂排序算法的*通用版本，而**永远不知道或关心*那种*类型*正在排序的数据——所有这些都是因为使用这种“固定”排序机制的程序员将提供排序例程所需的“逻辑管道”。

我认为这是一个很好的解释，而且也是一种与语言无关的方式！:) 希望有帮助。

**编辑。**让我举个例子：

```
List:

Item #  Value
1        12
2        15
3         9
4        26
5         4 
```

如果我开始寻找列表中最小的项目，我将从项目 1 开始，并将其与列表中的每个剩余项目进行比较。所以，首先，我将第 1 项与第 2 项进行比较：

```
compare(item(1),item(2)) 
```

这将返回 -1，因为 12 的值在 15*之前*。现在，我转到列表中的*下*一项：

```
compare(item(1),item(3)) 
```

这次返回 1，因为 12*跟在*9 后面，这意味着 item(3) 现在是迄今为止找到的最小的项目。现在，我们这样比较：

```
compare(item(3),item(4)) 
```

在这种情况下，比较返回 -1，因为 9 在 26 之前，导致我们进入最终比较：

```
compare(item(3),item(5)) 
```

这个调用将返回 +1，因为 9 在 4 之后。当我们用尽列表中的所有项目时，我们知道 item(3) 是最小的项目。然后我们将该项目交换为“先前”的顶部项目，并从项目（2）开始重复整个过程。这是一个臭名昭著的低效“冒泡排序”的示例，但用于本说明的目的。这就是“第一项”和“第二项”引用的来源。排序，无论语言如何，就像计算机科学中的任何其他问题一样，归结为将大问题分解成小块，排序归结为重复比较较大列表中的两个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:20:15.193

首先，阅读手册。摘要[页面](http://www.php.net/manual/en/array.sorting.php)是查看指定种类的好地方。要回答您的一些问题：

当然，排序会扫描所有数组元素。它怎么知道最后一个元素可能放在哪里？但这并不重要。您无需了解使用了哪种排序算法。您只需要提供一个知道如何比较数组中任意两项的函数，*而不考虑其他任何项*。

排序算法发挥了它的魔力，只要它想知道哪个元素“在”另一个之前就调用你的函数。它使用两个项目调用您的函数，每个项目作为参数。

您的函数返回：

*   如果第一项小于第二项，则为 -1（或任何小于零的数字）。
*   0 如果它们相等
*   如果第一项大于第二项，则为 1（或任何大于零的数字）。

您可以编写一个方法来进行任何类型的排序。如果你想让'w'出现在'b'之前，那么如果第一个参数以'w'开头并且第二个参数以'b'开头，你会想要返回-1。一个例子太人为了，我懒得写一个示例函数。

但是在你学习如何编写回调之前，你首先需要有一个排序的理由，这样你就有一个要完成的目标。

运行此示例以查看排序函数调用您的回调的次数：

```
<?php

function mysort($a, $b)
{
  echo "$a vs $b\n";

  return $a - $b;
}

// randomly create an array with 1 to 20 as elements
$data = range(1,20);
shuffle($data);    

// before
print_r($data);

// sort
usort($data, 'mysort');

// after   
print_r($data); 
```

它使用排序算法系统地对数组进行排序，方法是使用您的函数告诉它有关如何订购两个单独项目的信息。

# java - 迭代器不能再次迭代

> ID：12208365
> 
> 赞同：0
> 
> 时间：2012-08-31T03:05:35.810
> 
> 标签：java, iterator

这是我的Java代码：

```
public static void main(String[] args) {  
    Map<String, String> map = new HashMap<String, String>();  
    map.put("_name", "name");  
    map.put("_age", "age");  
    Set<String> set = map.keySet();  
    Iterator iterator = set.iterator();  
    // the first iteration  
    StringBuffer str1 = new StringBuffer();  
    while (iterator.hasNext()) {  
        str1.append(iterator.next() + ",");  
    }  
    String str1To = str1.substring(0, str1.lastIndexOf(",")).toString();  
    System.out.println(str1To);  
    // the second iteration  
    StringBuffer str2 = new StringBuffer();  
    while (iterator.hasNext()) {  
        str2.append(iterator.next() + ",");  
    }  
    String str2To = str2.substring(0, str2.lastIndexOf(",")).toString();// ?????  
    System.out.println(str2To);  
} 
```

我的问题是，为什么第二个循环不迭代？第一次迭代是否已经`iterator`结束了？这会影响第二次迭代吗？

我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:11:28.780

您的第一个`while`循环将移动迭代直到`iterator`到达列表的末尾。在那一刻，`iterator`in 本身指向 的结尾`list`，在你的情况下是`map.keySet()`。这就是下一个`while`循环失败的原因，因为调用`iterator.hasNext()`返回`false`。

更好的方法是使用[`Enhanced For Loop`](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with), 像这样的东西而不是你的`while`循环：

```
for(String key: map.keySet()){
    //your logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:11:39.383

迭代器仅供一次性使用。所以再次要求迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:11:50.990

You need to call `set.iterator()` each time you want to iterate through a collection. I suggest that you use a different variable for each iteration as well.

# ruby - 在 Ruby 中，给定一个字符代码，我如何创建一个字符串/字符？

> ID：12208367
> 
> 赞同：0
> 
> 时间：2012-08-31T03:06:12.987
> 
> 标签：ruby

> **可能重复：**
> [如何将字符代码转换为我想要的？](https://stackoverflow.com/questions/4542705/how-to-convert-character-code-to-what-i-want)

我很肯定这必须是重复的，但所有搜索结果都是其他语言或相反的（字符到代码点）。

例如

```
charCode = 96

string = # ... ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:08:03.753

你可以这样做：

```
string = charCode.chr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:07:25.513

上的`.chr`方法`Fixnum`。

`96.chr #=> "c"`

# c# - 事件越来越多，反复触发

> ID：12208372
> 
> 赞同：0
> 
> 时间：2012-08-31T03:07:00.823
> 
> 标签：c#, event-handling, storyboard

我正在尝试制作的 RSS 演示者发生了一件不寻常的事情。这意味着在播放“Out”动画后转到下一个项目，然后播放“In”动画。[http://oeis.org/A000217](http://oeis.org/A000217)

```
 void _timer_Tick(object sender, EventArgs e)
    {
        Storyboard sbOut = this.FindResource("sbAnimateOut") as Storyboard;
        sbOut.Completed += new EventHandler(sbOut_Completed);
        sbOut.Begin();

    }

    void sbOut_Completed(object sender, EventArgs e)
    {
        if (_selected < _total)
        {
            _selected++;

        }
        else
        {
            GetFeed(_feed);
            _selected = 0;

        }
        lstbxItems.SelectedIndex = _selected;
        counter.Text = _selected.ToString();

        Storyboard sbIn = this.FindResource("sbAnimateIn") as Storyboard;
        sbIn.Begin();
    } 
```

我注意到它似乎跳过了项目。当我逐行执行时，它似乎第一次执行`void sbOut_Completed(object sender, EventArgs e)`一次，第二次执行三次，第三次执行六次 - 依此[类推](http://oeis.org/A000217)。

也许我正在以错误的方式解决这个问题，这导致了这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:08:38.550

您将在每个计时器滴答声中添加另一个事件处理程序！

移动这段代码：

```
sbOut.Completed += new EventHandler(sbOut_Completed); 
```

进入你的初始化 - 只做一次。

# php - 从多个选定的下拉列表中传递给 ajax 数组

> ID：12208385
> 
> 赞同：1
> 
> 时间：2012-08-31T03:09:08.753
> 
> 标签：php, jquery, ajax

这是我的jQuery：

```
$('#Save').click(function () {
  var realvalues = new Array(); //storing the selected values inside an array

  $('#Privilege :selected').each(function (i, selected) {
    realvalues[i] = $(selected).val();
  });

  $.ajax({
    type: "POST",
    traditional: true,
    url: "http://localhost:8081/crownregency/UpdateOrCreateOrDeleteUser.php",
    data: {
      Privilege: realvalues,
      ID: '1'
    },
    success: function (data) {
      alert(data, 'Status');
      location.reload();
    }
  });
}); 
```

这是我的PHP。

我已经阅读了很多关于序列化的文章，但似乎不起作用，我想要实现的是将下拉列表中的选定项目发送到数组中并通过 ajax 将其发送到 php。但是将数组发送到 php 似乎不起作用。帮助任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:41:49.390

您的代码没问题，只需删除**传统的：true**并且您的代码似乎可以工作

```
$('#Save').click(function(){

    var realvalues = new Array();//storing the selected values inside an array
    $('#Privilege :selected').each(function(i, selected) {
        realvalues[i] = $(selected).val();
    });

    $.ajax({
        type: "POST",
        url: "http://localhost:8081/crownregency/UpdateOrCreateOrDeleteUser.php",
        data: {Privilege: realvalues, ID: '1'},
        success:function(data){
                $("#subscrres").html(data)
            }
    });
}); 
```

*HTML*

```
<form method="post">
<select id="Privilege" multiple="multiple">
<option value="yahoo">yahoo</option>
<option value="chrome">chrome</option>
<option value="mozilla">mozilla</option>
</select>
<input type="button" id="Save"/>

</form> 
```

*更新或创建或删除用户.php*

```
<?php
if(isset($_POST['Privilege'])){
$myvar  =$_POST['Privilege'];
foreach($_POST['Privilege'] as $one)
echo $one."<br/>";

}
?> 
```

# java - 本机方法可以调用私有方法吗？

> ID：12208387
> 
> 赞同：12
> 
> 时间：2012-08-31T03:09:24.087
> 
> 标签：java

我知道在 JAVA 中“native”是一件特别的事情。它可以做很多事情。但我现在无法阅读。我不知道如何...我知道它可以在 JAVA 中调用其他方法。我的问题是：它可以调用私有方法吗？如果是，那么只能在同一个班级或任何其他班级？如果它可以调用其他的，那么它可能是一个危险的问题吗？也就是说，它违反了规则。我在哪里可以获得更多关于 NATIVE 的信息？谁能给我一个链接？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-31T03:47:18.637

[JNI Programmer's Guide and Specification](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/jniTOC.html)在“10.9 Violating Access Control Rules”中这样说：

> *“JNI 不强制执行类、字段和方法访问控制限制，这些限制可以通过使用 private 和 final 等修饰符在 Java 编程语言级别表示。可以编写本机代码来访问或修改对象，即使在 Java 编程语言级别这样做会导致`IllegalAccessException`.JNI 的许可是一个有意识的设计决定，因为本机代码无论如何都可以访问和修改堆中的任何内存位置。*

所以你的问题的答案是：

> 它可以调用私有方法吗？

是的。

> 如果是，那么只能在同一个班级或任何其他班级？

任何班级。

> 如果它可以调用其他的，那么它可能是一个危险的问题吗？也就是说，它违反了规则。

设计者不尝试强制执行正常的 Java 访问规则的理由在上面引用的文本中清楚地说明了。是的，它有潜在的危险，但是*任何*使用 JNI 的行为都有潜在的危险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T03:26:43.397

您可以在通过 JNI 接口传递给本机方法的 Java 对象上调用私有方法。这与在 Java 中调用其他 Java 对象的方法不同。您必须*非常*小心，因为 JNI 不强制执行通过使用 和 等修饰符表达的类、字段和方法访问控制`private`限制`final`。所以它可能很危险。例如，本地代码可以`final`在 JIT 编译器内联后修改类的常量字段。

这是 JNI 文档中有关函数和指针的相关部分：http: [//docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp16696](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp16696)

# jquery - Jquery UI手风琴在带有Shape5模板的Joomla中不起作用

> ID：12208389
> 
> 赞同：0
> 
> 时间：2012-08-31T03:09:44.333
> 
> 标签：jquery, joomla

我遇到了 jquery 手风琴无法在 joomla 中使用 shape5 模板的问题。

我正在为 Joomla 使用弹性代码模块，因此我可以将任何代码放入其中并进行渲染。我制作了几个 div 以手风琴风格用 Jquery 呈现，但由于某种原因它们不起作用。

你可以看看 rbbs2012.regattalive.com ...问题是“领导”模块。如果我从该模块中获取代码并将其放入 html 文件并将其加载到服务器上，则手风琴工作正常，但在 Joomla 中却不行。

有人有想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:15:30.700

该页面上存在 jquery 冲突。为手风琴编写的代码使用 $。

所以替换代码

```
 $(document).ready(function(){
    $( "#lb_effect" ).accordion({
      collapsible: true,
      autoHeight: false
    });
   }); 
```

有了这个

```
 var lb = jQuery.noConflict();
    lb(document).ready(function(){
    lb( "#lb_effect" ).accordion({
      collapsible: true,
      autoHeight: false
    });
   }); 
```

# jquery - jquery 选择器包含等号

> ID：12208390
> 
> 赞同：6
> 
> 时间：2012-08-31T03:09:49.030
> 
> 标签：jquery, selector, equals, sign

我正在使用 jQuery 选择器来检查 href 中的字符：

```
var param = "something";
$("a[href*="+param+"]").css("color", "red"); 
```

这工作正常，直到“某物”包含 = 符号。例如：

```
var param = "xkey=123";
$("a[href*="+param+"]").css("color", "red"); 
```

然后我没有结果。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:14:27.013

您需要对字符进行转义，因为它在 jQuery[选择器](http://api.jquery.com/category/selectors/)`=`中使用时具有特殊含义。以下是需要转义的所有字符的完整列表：

```
#;&,.+*~':"!^$[]()=>|/ 
```

因此，您可以使用以下内容来转义`param`：

```
param.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1') 
```

从 jQuery[文档](http://api.jquery.com/category/selectors/)：

> 如果您希望使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为 a 的文字部分名称，您必须使用两个反斜杠转义字符：\。

这是一个**[演示](http://jsfiddle.net/vGyys/)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T03:14:38.410

引用参数：

```
$("a[href*='"+param+"']") 
```

如果这还不够（`param`可能包含撇号）然后转义它们：

```
$("a[href*='"+param.replace(/'/g,"\\'")+"']") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T03:18:06.630

你需要逃避`=`with `\\=`。

```
param = param.replace(/=/g, '\\\\='); 
```

但是在 jQuery 选择器中还需要转义其他特殊字符。

```
function escape(param) {
  return param.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,'\\\\$1');
} 
```

您也可以使用该`.filter`方法。

```
$('a').filter(function() {
  return $(this).attr('href').indexOf(param) !== -1;
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:15:05.613

它的行为是这样的，因为最后它会转化为模棱两可的选择器，即`$("a[href*=xkey=123]")`确实是无效的。

用 infront 转义等号`\\`并用引号包裹参数部分

```
var param = "xkey\\=123";
$("a[href*='"+param+"']").css("color", "red"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T03:17:00.943

您可以像这样验证它：

希望它适合原因`:)`

foo - 是字符串；

```
if (! /^[a-zA-Z0-9]+$/.test(foo)) {
    // Validation failed
} 
```

**或者**

像这样检查逃脱它：

```
if(your_string.indexOf('=') != -1){
  alert("equal found.");
} 
```

然后替换`=`为`\\=`

# java - 填充 JPanel 底部的空白区域

> ID：12208392
> 
> 赞同：1
> 
> 时间：2012-08-31T03:10:23.783
> 
> 标签：java, swing, user-interface, layout, layout-manager

我正在编写一个自定义 JPanel，称为 MyPanel，手动包含两个 JLabel 和两个 JTextBox。这个 JPanel 将在一个 JFrame 中使用，该 JFrame 包含使用 CardLayout 的其他 JPanel。JFrame 不可调整大小；它的大小是基于组件最多的 JPanel 固定的。

由于 MyPanel 的控件很少，我试图找出最好的布局管理器来使用。我希望标签和文本字段显示在靠近顶部的位置，底部有所有额外的空间。我相信 GridBagLayout 提供了让这个面板看起来像我想要的方式的功能。MyPanel 具有以下从构造函数调用的 initComponents() 方法：

```
public class MyPanel extends JPanel {

    public static void main(String[] args) {
        JFrame frame = new JFrame("MyPanel Test");
        frame.add(new MyPanel(null));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 425);
        frame.setVisible(true);
    }

    public MyPanel() {
        initComponents();
    }

    private void initComponents() {
        this.setLayout(new GridBagLayout());

        JLabel cardYearLabel = new JLabel("Card Year:");
        cardYearLabel.setFont(new Font("Tahoma", 0, 14)); // NOI18N

        GridBagConstraints yearLabelConstraints = new GridBagConstraints();
        yearLabelConstraints.gridx = 0;
        yearLabelConstraints.gridy = 0;
        yearLabelConstraints.weightx = 1;
        yearLabelConstraints.weighty = 1;
        yearLabelConstraints.anchor = GridBagConstraints.WEST;
        yearLabelConstraints.insets = new Insets(20, 50, 10, 10);
        this.add(cardYearLabel, yearLabelConstraints);

        this.yearTextField = new JFormattedTextField();
        this.yearTextField.setFormatterFactory(new DefaultFormatterFactory(new NumberFormatter(new DecimalFormat("#0"))));
        this.yearTextField.setFont(new Font("Tahoma", 0, 14)); // NOI18N
        this.yearTextField.setColumns(10);
        this.yearTextField.addFocusListener(new UpdateInstructionsFocusListener("Enter card year."));

        GridBagConstraints yearTextFieldConstraints = new GridBagConstraints();
        yearTextFieldConstraints.gridx = 1;
        yearTextFieldConstraints.gridy = 0;
        yearTextFieldConstraints.weightx = 2;
        yearTextFieldConstraints.weighty = 1;
        yearTextFieldConstraints.fill = GridBagConstraints.HORIZONTAL;
        yearTextFieldConstraints.insets = new Insets(20, 10, 10, 50);
        this.add(this.yearTextField, yearTextFieldConstraints);

        JLabel cardNumberLabel = new JLabel("Card Number:");
        cardNumberLabel.setFont(new Font("Tahoma", 0, 14)); // NOI18N

        GridBagConstraints numberLabelConstraints = new GridBagConstraints();
        numberLabelConstraints.gridx = 0;
        numberLabelConstraints.gridy = 1;
        numberLabelConstraints.weightx = 1;
        numberLabelConstraints.weighty = 1;
        numberLabelConstraints.anchor = GridBagConstraints.WEST;
        numberLabelConstraints.insets = new Insets(10, 50, 0, 10);
        this.add(cardNumberLabel, numberLabelConstraints);

        this.numberTextField = new JFormattedTextField();
        this.numberTextField.setFormatterFactory(new DefaultFormatterFactory(new NumberFormatter(new DecimalFormat("#0"))));
        this.numberTextField.setFont(new Font("Tahoma", 0, 14)); // NOI18N
        this.numberTextField.setColumns(10);
        this.numberTextField.addFocusListener(new UpdateInstructionsFocusListener("Enter card number."));

        GridBagConstraints numberTextFieldConstraints = new GridBagConstraints();
        numberTextFieldConstraints.gridx = 1;
        numberTextFieldConstraints.gridy = 1;
        numberTextFieldConstraints.weightx = 2;
        numberTextFieldConstraints.weighty = 1;
        numberTextFieldConstraints.fill = GridBagConstraints.HORIZONTAL;
        numberTextFieldConstraints.insets = new Insets(10, 10, 0, 50);
        this.add(this.numberTextField, numberTextFieldConstraints);

        JPanel filler = new JPanel();
        GridBagConstraints fillerConstraints = new GridBagConstraints();
        fillerConstraints.gridx = 0;
        fillerConstraints.gridy = 2;
        fillerConstraints.gridwidth = 2;
        fillerConstraints.weightx = 1;
        fillerConstraints.weighty = 100;
        this.add(filler, fillerConstraints);
    }
} 
```

我对使用空白的 JPanel 来填充 MyPanel 底部的空白空间感到畏缩。有没有更好、更优雅的方法来做到这一点？（我没有坚持使用 GridBagLayout。如果另一个标准 LayoutManager 可以做到这一点，我完全赞成。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:26:56.700

实现此目的的一种方法是将控件放在面板中，然后将该面板添加到`PAGE_START`带有`BorderLayout`.

# java - 在 Java 7 中实现并发性和并行性

> ID：12208393
> 
> 赞同：3
> 
> 时间：2012-08-31T03:10:34.553
> 
> 标签：java, concurrency, parallel-processing

作为我正在进行的一项研究的一部分，我正在探索使用 Scala 和 Clojure 等语言在 JVM 上实现并发的所谓简单性。简单来说，我希望证明这些语言提供的并发构造比 Java 7 提供的更简单。

因此，我希望找到一些很好的参考资料来解释 Java 并发模型的复杂性。

除了将我指向谷歌的方向（我已经搜索过，但成功有限）之外，如果那些知情人士能给我提供一些很好的参考资料，让我在这个领域起步，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:01:10.723

虽然高级语言更容易使用多核，但经常被遗忘的是为什么要使用多核以使程序更快，例如增加其吞吐量。

当您考虑增加并发性的选项时，您需要测试这些选项是否真的以某种方式提高了性能。（因为很多时候他们不这样做）

例如，STM（软件事务内存）可以更轻松地编写多线程应用程序，而不必担心并发问题。问题在于，对于简单的例子，不使用 STM 而只使用一个线程会更快。

使用多线程会增加复杂性并使您的应用程序更加脆弱，因此必须有充分的理由这样做，否则您应该坚持尽可能简单的解决方案。

更多讨论 [http://vanillajava.blogspot.co.uk/2011/11/why-concurency-examples-are-confusing.html](http://vanillajava.blogspot.co.uk/2011/11/why-concurency-examples-are-confusing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:13:15.763

Java 不支持 lambda 表达式。创建内联回调（例如，用于完成异步调用）需要 5 行匿名类型的样板代码。

这强烈阻止人们使用回调。这可能就是为什么 Java 7 仍然没有接受一个值的回调接口（与`Runnable`and相对），而 C#[自 2005 年以来](http://msdn.microsoft.com/en-us/library/018hxwa8%28v=vs.80%29.aspx)`Callbable`就有一个。

因此，JDK 对异步操作没有任何真正的支持。
异步操作的关键是能够启动长时间运行的请求，并在完成时运行回调，而在请求期间不消耗线程。在 Java 中，您只能通过`get()`对`Future<V>`. 这将使用标准 API 的应用程序的并发性限制为您可以正常支持的线程数。

为了解决这个问题，Google 的用于更好 Java 代码的 Guava 框架引入了一个具有完成回调的[`ListenableFuture<V>`接口。](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)

像 Scala 这样的语言通过支持 lambda 表达式（[编译为匿名类](http://blog.slaks.net/2011/06/delegates-vs-function-pointers-part-4-c.html)）并添加自己的[Promise](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.concurrent.Promise) / [Future](http://clojuredocs.org/clojure_core/clojure.core/future)类型来解决这个问题。

# sql-server-2008 - 本地负载测试：无法打开负载测试结果数据库

> ID：12208394
> 
> 赞同：4
> 
> 时间：2012-08-31T03:10:35.967
> 
> 标签：sql-server-2008, visual-studio-2012, load-testing

我正在使用 VS2012 创建一些负载测试。我可以使用“无”的 StorageType 运行测试，但是当我将其更改为“数据库”的 StorageType 时，我得到了可怕的错误

> 无法打开负载测试结果数据库。检查由测试控制器（或本地机器）的连接字符串指定的负载测试结果数据库是否指定了包含负载测试模式且当前可用的数据库。有关详细信息，请参阅 Visual Studio 帮助主题“关于负载测试结果存储”。连接错误是：尝试创建负载测试结果存储库架构时发生错误：要创建数据库“LoadTest2010”，您的用户帐户必须具有 SQL Server“sysadmin”角色或同时具有“serveradmin”和“dbcreator”角色

我在一个名为 LoadTest 的非本地 SQL 副本上创建了一个数据库。当我从 SQL Tracing Connect String 对话框测试连接时，我得到了成功。

我创建了一个 SQL 用户，该用户具有 dbcreator、public、serveradmin 和 sysadmin 的服务器角色。用户有一个到 LoadTest2010 数据库的用户映射，该数据库是从 VS2012 IDE 目录中的 loadtestresultsrepository.sql 创建的。在数据库上，用户具有数据库角色成员身份 db_accessadmin、db_datareader、db_datawriter、db_owner。在 Owned Schemas 中，我在 db_datareader、db_datawriter、db_owner 和 db_securityadmin 上打勾，但是现在它们在显示时变成了蓝色方块而不是打勾。

发生什么了？Visual Studio 是在尝试创建数据库还是其他问题？

我没有使用 TestControllers 或 TestAgents 我只是使用本地运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:17:21.640

答案很简单。我在“SQL 跟踪连接字符串”中设置连接字符串，而不是单击负载测试窗口顶部的小“管理测试控制器”图标并从那里设置连接字符串。

现在我要删除我在那个 SQL 用户上创建的一些多余权限:)

**编辑：**

[![在此处输入图像描述](../Images/d0711538da8ebde1b01cad24bea27b51.png)](https://i.stack.imgur.com/YrrbO.png)

SQL 连接字符串*不*存储在负载测试文件中。该设置似乎是 PC 特定的，所以我不得不在构建服务器上更改它 - 如图所示，在一个负载测试文件 (address.loadtest) 中，然后所有其他负载测试采用相同的连接字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-23T16:29:53.810

我正在使用 Visual Studio 2013 并且也出现此错误，但原因不同。第一次设置负载测试时，默认情况下它会尝试将结果保存到数据库中，这并不完全清楚。直到我在第一次运行尝试时遇到错误，我才意识到它正在尝试将结果保存到数据库中。此外，在负载测试向导中，没有用于配置数据库设置或为此创建数据库模式的屏幕。

我在 MSDN 上找到了这篇文章，它帮助我解决了这个问题。

**如何：使用 SQL 创建负载测试结果存储库** [https://msdn.microsoft.com/en-us/library/ms182600%28v=vs.120%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/ms182600%28v=vs.120%29.aspx?f=255&MSPPError=-2147217396)

基本上，它解释了您首先需要运行一个脚本来创建负载测试存储库模式。一旦这在你的 SQL 实例上就位（它可以在你喜欢的任何地方），那么你可以将你的负载测试指向这个数据库并将你的结果保存在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-23T21:31:41.307

对我来说，在我设置了数据库连接并且所有测试结果仍然没有写入数据库之后。

我忘记在运行设置的属性部分更改我的存储类型。该属性称为“存储类型”

存储类型：将其从无更改为数据库

# javascript - 如何通过将具有相同名称的键中的数值相加来 $.extend 2 个对象？

> ID：12208405
> 
> 赞同：6
> 
> 时间：2012-08-31T03:11:44.997
> 
> 标签：javascript, jquery

我目前有 2 个 obj 并使用 jquery 扩展函数，但是它覆盖了具有相同名称的键的值。我怎样才能将这些值相加呢？

```
var obj1 = {
  "orange": 2,
  "apple": 1,
  "grape": 1
};

var obj2 = {
  "orange": 5,
  "apple": 1,
  "banana": 1
};

mergedObj = $.extend({}, obj1, obj2);

var printObj = typeof JSON != "undefined" ? JSON.stringify : function (obj) {
  var arr = [];

  $.each(obj, function (key, val) {
    var next = key + ": ";
    next += $.isPlainObject(val) ? printObj(val) : val;
    arr.push(next);
  });

  return "{ " + arr.join(", ") + " }";
};

console.log('all together: ' + printObj(mergedObj)); 
```

我得到`obj1 = {"orange":5,"apple":1, "grape":1, "banana":1}`

我需要的是 `obj1 = {"orange":7,"apple":2, "grape":1, "banana":1}`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T03:22:05.863

所做的只是连接这`$.extend`两个对象，但它不添加值，而是**覆盖**它们。您将不得不手动执行此操作。`$.extend`将水果添加或修改到您的对象将很有用，但如果您需要总和，则必须循环：

```
var obj1 = { orange: 2, apple: 1, grape: 1 };
var obj2 = { orange: 5, apple: 1, banana: 1 };
var result = $.extend({}, obj1, obj2);
for (var o in result) {
  result[o] = (obj1[o] || 0) + (obj2[o] || 0);
}
console.log(result); //=> { orange: 7, apple: 2, grape: 1, banana: 1 } 
```

**演示：http:** [//jsfiddle.net/elclanrs/emGyb/](http://jsfiddle.net/elclanrs/emGyb/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T03:26:17.770

[**工作演示**](http://jsfiddle.net/69fja/)

不是这样的`.extend()`。你必须实现自己的：

```
function mergeObjects() {
    var mergedObj = arguments[0] || {};
    for (var i = 1; i < arguments.length; i++) {
        var obj = arguments[i];
        for (var key in obj) {
            if( obj.hasOwnProperty(key) ) {
                if( mergedObj[key] ) {
                    mergedObj[key] += obj[key];
                }
                else {
                    mergedObj[key] = obj[key];
                }
            }                
        }
    }
    return mergedObj;
} 
```

用法：

```
var obj1 = { "orange": 2, "apple": 1, "grape": 1 };
var obj2 = { "orange": 5, "apple": 1, "banana": 1 };
var mergedObj = mergeObjects( obj1, obj2);
// mergedObj {"orange":7,"apple":2,"grape":1,"banana":1} 
```

当然，就像`.extend()`，这​​将适用于任意数量的对象——而不仅仅是 2 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:26:28.747

这是您可以使用的一些代码：

```
obj1 = {"orange":2,"apple":1, "grape":1};
obj2 = {"orange":5,"apple":1, "banana":1};
var joined = {};

// add numbers in arr to joined
function addItems(arr) {

    // cycle through the keys in the array
    for (var x in arr) {

        // get the existing value or create it as zero, then add the new value
        joined[x] = (joined[x] || 0) + arr[x];
    }
}

addItems(obj1);
addItems(obj2);
console.log(JSON.stringify(joined)); 
```

*输出：*

> {“橙子”：7，“苹果”：2，“葡萄”：1，“香蕉”：1}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:29:40.807

没有花哨的东西，只有简单的 Javascript：

在没有价值`c[k] || 0`的情况下`c[k]`存在，它会为零。

```
var a = {orange:2, apple:1, grape:1};
var b = {orange:5, apple:1, banana:1};
var c = {};
var k;

for (k in a)  {c[k] = 0 + a[k] + (c[k] || 0)}
for (k in b)  {c[k] = 0 + b[k] + (c[k] || 0)}

window.alert(JSON.stringify(c)); 
```

# json - 解析 JSON - 缺少预期元素时脚本失败

> ID：12208409
> 
> 赞同：0
> 
> 时间：2012-08-31T03:12:10.293
> 
> 标签：json, parsing

我的脚本中有以下行，基于从 JSON 检索到的新闻提要数据构建一个字符串：

```
 var buildstring = "<table><tr><img src=" + obj.value.items[x]["media:content"].url + "> <b>" + obj.value.items[x].title + "</b><br /><td>" + obj.value.items[x].description.content + "</td></tr></table><br />"; 
```

一般来说，它工作正常 - 除了一件事。有时正在解析的提要没有与特定标题和描述相关联的图像文件，在这种情况下，整个脚本都会失败。

有没有办法让脚本跳过提要中任何缺失的项目并从那里的项目构建字符串？例如，如果一个故事没有图像文件，字符串只包含标题和描述？在典型情况下，我会拍摄 5 到 10 个故事——如果它们都具有 3 个元素（图像、标题和 description.content），那就没问题了。如果一个故事缺少图像文件，我将一无所获。

感谢您的任何建议或帮助。

编辑：

更完整的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js"> </script><script type="text/javascript">

function pipeCallback(obj) {
document.write("<div id=testdiv><b>LATEST NEWS</b><hr>");
var x;
for (x = 0; x < obj.count ; x++)
{
var imageurl = obj.value.items[x]["media:content"].url ? obj.value.items[x]["media:content"].url : "http://static.jquery.com/org/images/project/jquery-project-sm.png";
var buildstring = "<table><tr><img src=" + imageurl + "> <b>" + obj.value.items[x].title + "</b><br /><td>" + obj.value.items[x].description.content + "</td></tr></table><br />";
document.write(buildstring);
buildstring = null;
}
document.write("</div>");

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:06:47.637

您可以使用三元表达式来构建字符串：

```
var textOnly = "<b>" + obj.value.items[x].title + "</b><br /><td>" + obj.value.items[x].description.content + "</td></tr></table><br />";
var buildstring = (typeof obj.value.items[x]["media:content"] == 'undefined') ? 
    "<table><tr><td><img src=" + obj.value.items[x]["media:content"].url + "></td>" + textOnly 
    : "<table<tr><td></td>" + textOnly; 
```

显然，这变得非常丑陋、快速，这就是他们发明客户端模板的原因（[JQuery 模板](http://api.jquery.com/category/plugins/templates/)、[Underscore.js](http://underscorejs.org/#template)、[Mustache.js](https://github.com/janl/mustache.js/)、[Handlebars.js](http://handlebarsjs.com/)等，任你选择）。

这些允许您将数据与标记分开，因此您可以编写如下内容：

```
var template = "<table><tr><td><img src='{{ image }}' /></td><td>{{ title }}</td><td>{{ description }}</td></tr></table>"; 
```

您可以从数据 + 模板中获取 HTML：

```
var html = Mustache.render(template, obj.value.items[x]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:10:05.593

最好的选择就是简单地包含占位符，对吗？因此，如果没有图像，则会出现占位符...

这将是这样实现的：

```
var imageurl = obj.value.items[x]["media:content"].url ? obj.value.items[x]["media:content"].url : "http://link.to.default/image.png";
var buildstring = "<table><tr><img src=" + imageurl  + "> <b>" + obj.value.items[x].title + "</b><br /><td>" + obj.value.items[x].description.content + "</td></tr></table><br />"; 
```

# entity-framework - 确定 DbMigration 中的提供程序类型

> ID：12208411
> 
> 赞同：1
> 
> 时间：2012-08-31T03:12:47.547
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我使用的是 EF 5 Code First，因此我可以轻松定位 SQL Compact（客户使用）和 SQL Server（内部用户使用）。我正在使用 DbMigrations，因为它们*只是*有点不同，所以我必须`Sql`在迁移中编写一些稍微不同的命令。

但是，我看不到任何方法可以确定迁移运行的目标提供商。我知道 EF 有这个信息，因为它是我的配置文件中连接字符串的一部分，如果我在 NuGet 命令行上覆盖连接字符串，它甚至是必需的。

有任何想法吗？

# c# - c#xml文档的问题

> ID：12208414
> 
> 赞同：0
> 
> 时间：2012-08-31T03:13:17.273
> 
> 标签：c#, .net, visual-studio-2010

我有以下评论。

```
 /// <summary>
    /// MSDN Time Format compatible with <see cref="DateTime.ParseExact(string, string, IFormatProvider)"/> 
    /// </summary>
    /// <returns>MSDN Time Format compatible with <see cref="DateTime.ParseExact(string, string, IFormatProvider)"/></returns> 
```

但我不确定为什么会收到以下警告

> “MSLab.DateTime.SystemTimeProvider.GetTimeFormat()”上的警告 7 **XML 注释具有无法解析的 cref 属性“DateTime.ParseExact(string, string, IFormatProvider)”** F:\My Documents\Visual Studio 2010\Projects\MSLab\主干\MSLab\MSLab\DateTime\SystemTimeProvider.cs 110 57 MSLab

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:36:47.033

根据警告消息，您的类似乎`SystemTimeProvider`位于名为 的命名空间内，该命名空间与 .NET类型`DateTime`同名。`DateTime`要解决此冲突，请将您的更改`cref`为`"System.DateTime.ParseExact(string, string, IFormatProvider)"`：

```
/// <summary>
/// MSDN Time Format compatible with <see cref="System.DateTime.ParseExact(string, string, IFormatProvider)"/>
/// </summary>
/// <returns>MSDN Time Format compatible with <see cref="System.DateTime.ParseExact(string, string, IFormatProvider)"/></returns> 
```

# android - Android - 具有多个 ListActivity 的应用程序导致 onListItemClick 中的 Id 正确

> ID：12208415
> 
> 赞同：1
> 
> 时间：2012-08-31T03:13:19.253
> 
> 标签：android, listactivity

我正在编写一个具有 2 个 ListActivity 的 android 应用程序。

ListActivity 1 -> OnItemClick -> 正确打开详情页 ListActivity 1 -> 菜单选项 -> 打开 ListActivity 2 ListActivity 2 -> OnItemClick ->**应该打开**ListActivity 2 的列表项的详情

**但是，我在第二个列表活动的 onListItemClick 中获得的“id”不正确。**

ListActivity 1 onListItemClick 处理程序：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
super.onListItemClick(l, v, position, id);

Intent c = new Intent(this, ADisplay.class);
c.putExtra(ABDbAdapter.A_FIELD_ID, id);
startActivityForResult(c, ACTIVITY_DISPLAY);
} 
```

ListActivity 2 onListItemClick 处理程序：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
super.onListItemClick(l, v, position, id);

Intent c = new Intent(this, TDisplay.class);
c.putExtra(ABDbAdapter.T_FIELD_ID, id);
startActivityForResult(c, ACTIVITY_DISPLAY);
} 
```

ListActivity 1 具有来自表 1 的数据，主键为“_id” ListActivity 2 具有来自表 2 的数据，主键为“_id”。这可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:27:57.410

问题已解决。第二个列表活动是通过从带有连接的表中获取数据而创建的。两个表都有 _id 字段，并且使用的选择是“Select *”而不是“Select”。这导致返回第一个表的 id，尽管我期待第二个表的 id。

更正了join语句，问题得到解决。

感谢[BBdev](https://stackoverflow.com/users/626122/bbdev)和[Barak](https://stackoverflow.com/users/1105376/barak)的回复

# mongodb - 为什么 VCAP_SERVICES 为空？

> ID：12208418
> 
> 赞同：1
> 
> 时间：2012-08-31T03:14:30.310
> 
> 标签：mongodb, cloud-foundry

我想在我的应用程序启动期间读取 VCAP_SERVICES 以连接到我的 mongodb 服务，但它为空？

```
barry-alexanders-MacBook-Pro:~ barryalexander$ vmc create-service mongodb mongodb-relcal RelCal
Creating Service: OK
Binding Service [mongodb-relcal]: OK
Stopping Application 'RelCal': OK
Staging Application 'RelCal': OK                                                
Starting Application 'RelCal': OK                                               

barry-alexanders-MacBook-Pro:~ barryalexander$ vmc apps

+-------------+----+---------+-------------------------+----------------+
| Application | #  | Health  | URLS                    | Services       |
+-------------+----+---------+-------------------------+----------------+
| RelCal      | 1  | RUNNING | relcal.cloudfoundry.com | mongodb-relcal |
| barry       | 1  | STOPPED | barry.cloudfoundry.com  |                |
+-------------+----+---------+-------------------------+----------------+

barry-alexanders-MacBook-Pro:~ barryalexander$ vmc env RelCal
No Environment Variables 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T08:12:05.473

使用 vmc 'env' 命令时不会显示 VCAP_SERVICES。但是我们可以通过推送这个简单的节点应用程序看到

```
var http = require('http');
var util = require('util');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.write(util.inspect(process.env.VCAP_SERVICES));
  res.write("\n\n************\n\n");
  res.end(util.inspect(req.headers));

}).listen(3000); 
```

输出显示 VCAP_SERVICES 环境变量，然后是请求的标头，输出如下所示；

```
'{"mongodb-2.0":[{"name":"mongo-test","label":"mongodb-2.0","plan":"free","tags":["mongodb","mongodb-1.8","nosql","document"],"credentials":{"hostname":"172.30.48.70","host":"172.30.48.70","port":25137,"username":"7ad80054-bb70-49fa-9aae-6ff5c1b458fc","password":"491bcfe9-e441-4caf-8422-00a81dbf727b","name":"4b354e7e-c39d-4053-89e1-7195b1360fd9","db":"db","url":"mongodb://7ad80054-bb70-49fa-9aae-6ff5c1b458fc:491bcfe9-e441-4caf-8422-00a81dbf727b@172.30.48.70:25137/db"}}]}'

************

{ host: 'node-headers.cloudfoundry.com',
  'x-forwarded-for': '80.175.199.28, 172.30.8.253',
  connection: 'close',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.82 Safari/537.1',
  accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'accept-language': 'en-US,en;q=0.8',
  'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
  'x-cluster-client-ip': '80.175.199.28',
  cookie: '__qca=P0-351832036-1339515989739; s_nr=1344955391423; __utma=207604417.1698837494.1342027762.1345020276.1345215879.7; __utmc=207604417; __utmz=207604417.1342027762.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); s_cc=true; s_sq=%5B%5BB%5D%5D',
  'accept-encoding': 'gzip,deflate,sdch' } 
```

如果您希望将其用作参考，您可以在[http://node-headers.cloudfoundry.com](http://node-headers.cloudfoundry.com)上看到该应用程序正在运行。

# performance - 为什么 i=i+1 比 i++ 快？

> ID：12208421
> 
> 赞同：5
> 
> 时间：2012-08-31T03:14:47.080
> 
> 标签：performance, actionscript-3, post-increment, pre-increment

在 Flash 中测试此代码：

```
var i:int = 0;
for (var j:int = 0; j < 5000000; j++)
{
    i=i+1;
}// use about 300ms.

i = 0;
for (var j:int = 0; j < 5000000; j++)
{
    i++;
}// use about 400ms

i = 0;
for (var j:int = 0; j < 5000000; j++)
{
    ++i;
}// use about 400ms too 
```

为什么`i=i+1`ActionScript 3 的速度更快，而其他的却慢？

对不起，我犯了一些错误。上面的代码使用相同的时间。但是如果把它放到函数中，结果会有所不同。

```
var i:int;
var j:int;
var startTime:Number;

function func1():void
{
    i = i + 1;
}

function func2():void
{
    i++;
}

startTime = getTimer();
i = 0;
for (j = 0; j < 10000000; j++)
{
    func1();
}
trace(getTimer() - startTime);//5 times:631,628,641,628,632

startTime = getTimer();
i = 0;
for (j = 0; j < 10000000; j++)
{
    func2();
}
trace(getTimer() - startTime);//5 times:800,814,791,832,777 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:41:27.383

循环所在的位置会对性能产生很大影响。如果您的循环在函数内部，Flash 将使用本地寄存器执行计算。包含的循环`i++`因此产生以下操作码：

```
000013 inclocal_i (REG_2)  ; increment i 
000015 inclocal_i (REG_3)  ; increment j
000017 getlocal (REG_3)    ; push j onto stack
000018 pushint 5000000     ; push 5000000 onto stack
000020 iflt -12            ; jump backward if less than 
```

包含的循环`i = i + 1`产生以下内容：

```
000013 getlocal (REG_2)    ; push i onto stack
000014 pushbyte 1          ; push 1 onto stack
000016 add                 ; add the two
000017 convert_i           ; coerce to integer
000018 setlocal (REG_2)    ; save i back to register 2
000019 inclocal_i (REG_3)  
000021 getlocal (REG_3)
000022 pushint 5000000
000024 iflt -16 
```

`i++`比`i = i + 1`这里更快，因为 inclocal_i 直接修改寄存器，而无需将寄存器加载到堆栈中并将其保存回来。

当您将循环放在框架脚本中时，循环的效率会大大降低。Flash 会将声明的变量存储为类变量。访问这些需要更多的工作。`i++`循环结果如下：

```
000017 getlocal (REG_0, this)   ; push this onto stack
000018 dup                      ; duplicate it
000019 setlocal (REG_2)         ; save this to register 2
000020 getproperty i            ; get property "i"
000022 increment_i              ; add one to it
000023 setlocal (REG_3)         ; save result to register 3
000024 getlocal (REG_2)         ; get this from register 2
000025 getlocal (REG_3)         ; get value from register 3
000026 setproperty i            ; set property "i"
000028 kill (REG_3)             ; kill register 2
000030 kill (REG_2)             ; kill register 3
000032 getlocal (REG_0, this)   ; do the same thing with j...
000033 dup
000034 setlocal (REG_2)
000035 getproperty j
000037 increment_i
000038 setlocal (REG_3)
000039 getlocal (REG_2)
000040 getlocal (REG_3)
000041 setproperty j
000043 kill (REG_3)
000045 kill (REG_2)
000047 getlocal (REG_0, this)
000048 getproperty j
000050 pushint 5000000
000052 iflt -40 
```

`i = i + 1`版本有点短：

```
000017 getlocal (REG_0, this)   ; push this onto stack
000018 getlocal (REG_0, this)   ; push this onto stack
000019 getproperty i            ; get property "i"
000021 pushbyte 1               ; push 1 onto stack
000023 add                      ; add the two
000024 initproperty i           ; save result to property "i"
000026 getlocal (REG_0, this)   ; increment j...
000027 dup
000028 setlocal (REG_2)
000029 getproperty j
000031 increment_i
000032 setlocal (REG_3)
000033 getlocal (REG_2)
000034 getlocal (REG_3)
000035 setproperty j
000037 kill (REG_3)
000039 kill (REG_2)
000041 getlocal (REG_0, this)
000042 getproperty j
000044 pushint 5000000
000046 iflt -34 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T03:22:53.910

我无法复制这种行为，这三个行为对我来说似乎几乎是同一时间

```
Attempt 1
loop 1: 378
loop 2: 396
loop 3: 382

Attempt 2
loop 1: 380
loop 2: 361
loop 3: 361

Attempt 3
loop 1: 375
loop 2: 373
loop 3: 355 
```

将循环增加 10 倍我得到了这些时间：

```
Attempt 1
loop 1: 3707
loop 2: 3663
loop 3: 3653

Attempt 2
loop 1: 3722
loop 2: 3632
loop 3: 3711 
```

[TestLoopSpeed.as]

```
package
{
    import flash.display.Sprite;
    import flash.utils.getTimer;

    public class TestLoopSpeed extends Sprite
    {
        public function TestLoopSpeed()
        {
            var timeNow:Number = getTimer();
            var i:int = 0;

            var startOne:Number = getTimer();
            for (var j:int = 0; j < 5000000; j++)
            {
                i=i+1;
            }
            var endOne:Number = getTimer();

            var startTwo:Number = getTimer();
            i = 0;
            for (var j:int = 0; j < 5000000; j++)
            {
                i++;
            }
            var endTwo:Number = getTimer();

            var startThree:Number = getTimer();
            i = 0;
            for (var j:int = 0; j < 5000000; j++)
            {
                ++i;
            }
            var endThree:Number = getTimer();

            trace("loop 1: " + (endOne - startOne));
            trace("loop 2: " + (endTwo - startTwo));
            trace("loop 3: " + (endThree - startThree));
        }
    }
} 
```

据我了解， i++ 最终等同于 i = i+1; 例外的是，如果在该行上发生赋值，则将使用 i 的当前值，并且稍后的指令会将 i 加一。++i 只是意味着在对这一行进行任何其他操作之前将 i 加 1。最终，我认为这些选项中的任何一个都不会真正影响性能，从我所做的每一次测试中可以看出，闪存进程在任何给定时刻的 CPU 调度比任何给定的操作员都具有更大的影响。

如果我用来测试的代码有问题，请指出。

**编辑**

更新了代码以包含 while 循环选项，但仍然没有看到任何看起来像积极显着差异的东西：

```
loop 1: 3695
loop 2: 3698
loop 3: 3690
loop 4: 3711

loop 1: 3758
loop 2: 3651
loop 3: 3707
loop 4: 3676 
```

[TestLoopSpeed.as]**更新了精美的 while 循环预增量动作**

```
package
{
    import flash.display.Sprite;
    import flash.utils.getTimer;

    public class TestLoopSpeed extends Sprite
    {
        public function TestLoopSpeed()
        {
            var timeNow:Number = getTimer();
            var i:int = 0;

            var startOne:Number = getTimer();
            for (var j:int = 0; j < 50000000; j++)
            {
                i=i+1;
            }
            var endOne:Number = getTimer();

            var startTwo:Number = getTimer();
            i = 0;
            for (var j:int = 0; j < 50000000; j++)
            {
                i++;
            }
            var endTwo:Number = getTimer();

            var startThree:Number = getTimer();
            i = 0;
            for (var j:int = 0; j < 50000000; j++)
            {
                ++i;
            }
            var endThree:Number = getTimer();

            var startFour:Number = getTimer();
            i = 0;
            var j:int = -1;
            while (++j < 50000000)
            {
                ++i;
            }
            var endFour:Number = getTimer();

            trace("loop 1: " + (endOne - startOne));
            trace("loop 2: " + (endTwo - startTwo));
            trace("loop 3: " + (endThree - startThree));
            trace("loop 4: " + (endFour - startFour));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T03:34:57.113

++ 和 -- 运算符被设计为类似于汇编代码的增量和减量，但现在它不应该对编译器的进步产生太大影响。[见增减部分](http://www.cplusplus.com/doc/tutorial/operators/)

这可能是实现的更改或 actionscript 虚拟机的临时[回归](http://en.wikipedia.org/wiki/Software_regression)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:31:33.320

我没有回答您的问题，但以下是我尝试过的所有循环中最快的。

```
import flash.utils.getTimer;

var t:int = getTimer();
var i:int = 0, j:int = -1;
while (++j < 5000000) {
    i += 1;
}
trace(getTimer()-t) 
```

这给了我 83 毫秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T03:35:43.740

我建议不要`i++;`使用，`++i;`因为它比你提到的都快。

看看这个很好的解释：[什么是更有效的 i++ 或 ++i？](https://stackoverflow.com/questions/561588/what-is-more-efficient-i-or-i/561609#561609)

# gcc - 标头 stddef.h 中可能出现的错误

> ID：12208426
> 
> 赞同：0
> 
> 时间：2012-08-31T03:16:13.803
> 
> 标签：gcc, defined

当我阅读 gcc 提供的头文件 stddef.h 时，我发现了一个可能的错误。起初，我确定这是一个错误。但是在我阅读了三个不同版本的 gcc（3.4.5、4、4、3 和 4、6、3）的头文件 stddef.h 之后，我发现它们在这一点上是相同的，所以我不确定。也许我错了。

```
#if (!defined(_STDDEF_H) && !defined(_STDDEF_H_) && !defined(_ANSI_STDDEF_H) \
     && !defined(__STDDEF_H__)) \
    || defined(__need_wchar_t) || defined(__need_size_t) \
    || defined(__need_ptrdiff_t) || defined(__need_NULL) \
    || defined(__need_wint_t) 
```

上面的代码是stddef.h的开头。以下是 stddef.h 的结尾。有一对。

```
#endif /* !_STDDEF_H && !_STDDEF_H_ && !_ANSI_STDDEF_H && !__STDDEF_H__
      || __need_XXX was not defined before */ 
```

我认为这行有一个错误：

```
 || __need_XXX was not defined before */ 
```

“不”字要不要删掉？

这很容易，但如果是错误，为什么没有发现并改变错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:34:50.863

我认为这不是一个真正的错误，甚至几乎不是一个化妆品疣。

1.  它在注释中，对编译器看到的内容没有影响（预处理器消除了注释）。

2.  评论是说“这些不同的定义之前都没有定义过”。

    即：（`_STDDEF_H`未定义`_STDDEF_H_`且未定义`_ANSI_STDDEF_H`且未定义`__STDDEF_H__`且未定义）*或者*如果我们仍然需要各种`__need_XXX`功能之一，则处理标题的主体。在`||`添加条款之前，它更加清晰；它们可能是在标识头文件的主要定义符号集之后添加的。

当然，评论中的语言可以更精确，但缩写是相当典型的完成方式。很清楚指`#if`的`#endif`是哪个。您可以提交建议的补丁，但如果没有发生任何事情，请不要感到惊讶。如果它是我的标题并且我需要这么复杂，我可能会使用类似的东西：

```
#endif /* (!_STDDEF_H && !_STDDEF_H_ && !_ANSI_STDDEF_H && !__STDDEF_H__) || __need_XXX */ 
```

我可能很想使用：

```
#endif /* (!_STDDEF_H && !_STDDEF_H_ && ...) || __need_XXX || ... */ 
```

毫无疑问，这些评论和定义中有很多历史。系统标头不是学习的好地方。它们往往是高深莫测的，因为它们同时受到一组不同标准的驱动，并且随着标准的发展，它们会随着时间的推移而增加复杂性。

# python - 异或 bin 值时缺少 0

> ID：12208427
> 
> 赞同：1
> 
> 时间：2012-08-31T03:16:21.120
> 
> 标签：python, xor, bin

我正在尝试对二进制值进行异或运算，但由于某种未知原因，我在转换中丢失了第一个 0。知道我做错了什么吗？

```
m1 = int('01010100011001010111001101110100',2)
c1 = int('00111001000001000001000000000001',2)
c2 = int('00111101000100110000110000010001',2)

kk = bin(m1 ^ c1)[2:]
xx = int(kk,2)

m2 = bin(xx ^ c2)[2:]
print m2 
```

由于某种原因，这返回`1010000011100100110111101100100`而不是`01010000011100100110111101100100`，所以我失去了领先地位`0`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:23:39.733

Python 不知道答案中您想要多少位。告诉它：

```
m2 = format(bin(xx ^ c2)[2:],'0>32') 
```

格式字符串表示右对齐的 32 个字符的字段，用零填充。

请参阅[格式规范迷你语言](http://docs.python.org/library/string.html#formatspec)。

实际上，您可以使用`b`格式说明符执行以下操作：

```
m1 = int('01010100011001010111001101110100',2)
c1 = int('00111001000001000001000000000001',2)
c2 = int('00111101000100110000110000010001',2)

print format(m1 ^ c1 ^ c2,'0>32b') 
```

或者：

```
print '{:0>32b}'.format(m1 ^ c1 ^ c2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:32:04.230

您可以使用字符串方法[zfill](http://docs.python.org/library/stdtypes.html#str.zfill)将输出填充到您需要的位数。

```
m2 = bin(xx ^ c2)[2:].zfill(32) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:32:48.153

通常从所有数字中去除前导零。例如，如果您打印以 10 为底的数字 123，则不会打印 0123 或 0000123。与以 2 为底的数字相同。如果您要打印 m1、c1 或 c2，您会看到前导零也没有为它们打印。

# c# - Image.FromStream(MemoryStream) 中的参数无效

> ID：12208432
> 
> 赞同：0
> 
> 时间：2012-08-31T03:17:06.070
> 
> 标签：c#, image, memorystream, networkstream

我试图通过网络流发送图像，我有一个 sendData 和 Getdata 函数，并且在使用 Image.FromStream 函数时我总是得到一个无效的参数

这是我的代码：我正在从屏幕上获取图片，然后将其转换为字节 [] 将其插入到我通过 networkStream 发送的内存流中。

```
 private void SendData()
    {
        StreamWriter swWriter = new StreamWriter(this._nsClient);
        // BinaryFormatter bfFormater = new BinaryFormatter();

        // this method
        lock (this._secLocker)
        {
            while (this._bShareScreen)
            {
                // Check if you need to send the screen
                if (this._bShareScreen)
                {
                    MemoryStream msStream = new MemoryStream();
                    this._imgScreenSend = new Bitmap(this._imgScreenSend.Width,   this._imgScreenSend.Height);
                    // Send an image code
                    swWriter.WriteLine(General.IMAGE);
                    swWriter.Flush();

                    // Copy image from screen
                    this._grGraphics.CopyFromScreen(0, 0, 0, 0, this._sizScreenSize);
                    this._imgScreenSend.Save(msStream, System.Drawing.Imaging.ImageFormat.Jpeg);
                    msStream.Seek(0, SeekOrigin.Begin);

                    // Create the pakage
                    byte[] btPackage = msStream.ToArray();

                    // Send its langth
                    swWriter.WriteLine(btPackage.Length.ToString());
                    swWriter.Flush();

                    // Send the package
                    _nsClient.Write(btPackage, 0, btPackage.Length);
                    _nsClient.Flush();
                }
            }
        }
    }

    private void ReciveData()
    {
        StreamReader srReader = new StreamReader(this._nsClient);
        string strMsgCode = String.Empty;
        bool    bContinue = true;
        //BinaryFormatter bfFormater = new BinaryFormatter();
        DataContractSerializer x = new DataContractSerializer(typeof(Image));
        // Lock this method
        lock (this._objLocker)
        {
            while (bContinue)
            {
                // Get the next msg
                strMsgCode = srReader.ReadLine();

                // Check code
                switch (strMsgCode)
                {
                    case (General.IMAGE):
                        {
                            // Read bytearray
                            int nSize = int.Parse(srReader.ReadLine().ToString());
                            byte[] btImageStream = new byte[nSize];
                            this._nsClient.Read(btImageStream, 0, nSize);

                            // Get the Stream
                            MemoryStream msImageStream = new MemoryStream(btImageStream, 0, btImageStream.Length);

                            // Set seek, so we read the image from the begining of the stream
                            msImageStream.Position = 0;

                            // Build the image from the stream
                            this._imgScreenImg = Image.FromStream(msImageStream); // Error Here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:33:49.900

部分问题是您正在使用 WriteLine() 在写入结束时添加 Environment.NewLine 。当您只是在另一端调用 Read() 时，您并没有正确处理该换行符。

您要做的只是将 Write() 写入流，然后在另一端读回。

转换为字符串很奇怪。

传输图像时，您正在做的是发送字节数组。您需要做的就是发送预期流的长度，然后是图像本身，然后读取另一端的长度和字节数组。

通过网络传输字节数组的最基本和最简单的方法是首先发送一个表示数组长度的整数，然后在接收端读取该长度。

一旦您现在知道要发送/接收多少数据，您就可以将数组作为原始字节数组发送到线路上，并读取您之前在另一端确定的长度。

现在您有了原始字节和大小，您可以将缓冲区中的数组重建为有效的图像对象（或您刚刚发送的任何其他二进制格式）。

另外，我不确定为什么 DataContractSerializer 在那里。它是原始二进制数据，无论如何您已经手动将其序列化为字节，所以这没什么用。

使用套接字和流进行网络编程的基本问题之一是定义您的协议，因为接收端无法知道预期的内容或流何时结束。这就是为什么那里的每个通用协议要么具有非常严格定义的数据包大小和布局，要么执行诸如发送长度/数据对之类的操作，以便接收端知道该做什么。

如果您实现一个非常简单的协议，例如发送一个表示数组长度的整数并在接收端读取一个整数，那么您已经完成了一半的目标。然后，发送者和接收者都同意接下来会发生什么。然后，发送方在线路上准确发送该数量的字节，接收方在线路上准确读取该数量的字节并认为读取已完成。您现在拥有的是接收端原始字节数组的精确副本，然后您可以随意使用它，因为您首先知道该数据是什么。

如果您需要代码示例，我可以提供一个简单的示例，否则网上有很多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:11:39.717

尽量保持简短：Stream.Read 函数（您使用的）返回一个 int 说明读取了多少字节，这是返回给您的，因此您可以验证是否收到了您需要的所有字节。就像是：

```
int byteCount=0;
while(byteCount < nSize)
{
      int read = this._nsClient.Read(btImageStream, byteCount, nSize-byteCount);
      byteCount += read;
} 
```

这不是工作的最佳代码

# python - 在 Python 中设置后备值的最佳方法是什么？

> ID：12208435
> 
> 赞同：3
> 
> 时间：2012-08-31T03:17:50.983
> 
> 标签：python

我最近发现自己经常使用以下模式：

```
x = 3
if this:
   this.process()
   if this.something:
       x = this.a_value 
```

我不想这样做：

```
if this and (this.process() or True) and this.someting:
    x = this.a_value
else:
    x = 3 
```

或这个：

```
if this:
   this.process()
   if this.something:
       x = this.a_value
   else:
       x = 3
else:
    x = 3 
```

但是我不禁觉得设置值然后更改它有点混乱，特别是考虑到在某些用例中很少使用后备值。

有没有更好/更整洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:23:57.267

我认为您提出的三个选项，第一个，即您正在使用的选项是最好的。代码很清晰，每个人都会知道发生了什么。我想不出更整洁/更整洁的方式，这也是我编码的方式，基于*“简单胜于复杂”。*原则

回复“*我不禁觉得设置值然后更改它有点乱，* ”如果你想要一个默认值，没有办法设置一个。

它肯定比使用其他两种`else`方法更整洁。可读性很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:56:39.113

不必更改值的最直接方法是：

```
processed = False
if this:
   this.process()
   if this.something:
       x = this.a_value
       processed = True
if not processed:
    x = 3 
```

但是随后您将引入另一个变量。如果您的默认值易于计算，我将设置`x`为`3`顶部。可以理解，这是默认值。如果默认值计算起来很耗时，那么我会做额外的布尔选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:24:57.237

从代码维护的角度来看，我会接受第一种或第二种情况，但由于重复，我不会接受第三种情况。

PS：在 Python 中，我通常希望看到`self`引用类实例对象，而不是`this`. 最好不要`this`用于该目的或任何其他目的，以避免混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:44:45.123

我会`this.proccess()`回来`this`做

```
 try: x = this.avalue if this.process() and this.something else 3
 except AttributeError: x = 3; 
```

即使一个赤裸的除了不是真棒（取决于过程的复杂性）

[编辑]第二个例子不起作用所以我把它拿出来

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T04:09:24.100

这将避免先设置默认值，而无需重复：

```
def noncefunc(default):
    if this:
       this.process()
       if this.something: return this.a_value 
    return default

x = noncefunc(3) 
```

不过，这并不是特别清楚，当然也不是对你所拥有的东西的提升。如果您想做这种事情，最好使用一种更自然地通过设计支持功能样式的语言。如果 python 是那种语言会很好，但遗憾的是它不是。

或者：

```
class breakexception(exception):pass
try:
   if this:
       this.process()
       if this.something: 
          x = this.a_value
          raise breakexception()
except breakexception: pass
else: x = 3 
```

同样，这仅在未首先设置非默认值时才设置默认值，但这并不容易遵循。

最后：

```
if this:
    this.process()
    if this.something: 
       x = this.a_value
try: x = x
except UnboundLocalError: x = 3 
```

这可能是您所拥有的替代方案中最清晰的，但它并不能真正代表您对原始形式的很大进步。

坚持你所拥有的。

# git - Git 和硬重置

> ID：12208440
> 
> 赞同：0
> 
> 时间：2012-08-31T03:18:21.413
> 
> 标签：git, github

我已经在我的开发分支上工作了很长时间，以至于我的主人中没有任何东西是相关的。我想将 master 彻底擦干净，这样我就可以将 master 中的 dev 分支与干净的石板合并。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:22:18.840

假设这不是共享的，为什么不直接删除 master 并将您的分支重命名为 master

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:31:00.200

您可以通过执行以下操作使 master 成为 dev 的精确副本：

```
git checkout dev
git push origin dev:master 
```

# c# - 如何将一个数据列的值复制到同一个数据表C#中的另一个数据列？

> ID：12208442
> 
> 赞同：4
> 
> 时间：2012-08-31T03:18:30.280
> 
> 标签：c#, datatable

我想将数据表复制`itemarray[4]`到`itemarray[6]`该数据表中。我使用了这段代码，但没有看到任何变化：

```
foreach (DataRow dr_row in dt_table.Rows)
{
    foreach (var field_value in dr_row.ItemArray)
    {
        object cell_data = field_value;
        if (dr_row.ItemArray[6].ToString() == "")
        {
            dr_row.ItemArray[6] = dr_row.ItemArray[4];
        }
        original_data += cell_data.ToString();
    }
    original_data += Environment.NewLine;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:28:55.530

首先永远不要这样做：

```
dr_row.ItemArray[6].ToString() == "" 
```

将其更改为：

```
dr_row.ItemArray[6].ToString() == String.Empty 
```

或者：

```
 String.IsNullOrEmpty(dr_row.ItemArray[6].ToString()) 
```

但是，这只是一个好习惯。现在，对于您面临的问题。

所做的`Itemarray`是，它从行创建一个新数组，因此如果更改数组，则不会更改行。

做这个：

```
dr_row[6] = dr_row[4]; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:23:41.807

尝试这个，

```
 foreach (DataRow dr_row in dt_table.Rows)
  {
     dr_row[6] = dr_row[4];
  } 
```

并用于 `System.Text.StringBuilder`附加数据。

```
 System.Text.StringBuilder sb = new StringBuilder();
 sb.Append(value1); 
```

# android - 如何打开功能拨打电话但不设置电话号码默认值

> ID：12208445
> 
> 赞同：1
> 
> 时间：2012-08-31T03:18:59.067
> 
> 标签：android, android-intent

我想要打开 android 的功能呼叫电话，但不要将电话号码默认设置为

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:09340125465"));
            startActivity(callIntent); 
```

我想打开通话电话并在输入电话号码后。

希望你我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:41:24.883

使用此代码：

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);
callIntent.setData(Uri.parse("tel:"));
startActivity(callIntent); 
```

# ruby-on-rails - 如何使用 Devise/CanCan 保护已安装的 Engine 资源？

> ID：12208448
> 
> 赞同：8
> 
> 时间：2012-08-31T03:19:41.693
> 
> 标签：ruby-on-rails, devise, cancan, rails-engines

我的主应用程序安装了一个引擎，我想保护该引擎中的某些控制器和操作。

发动机安装有：

```
mount SomeEngine::Engine => '/some_engine' 
```

Devise/CanCan 正在与主应用程序的其余控制器和操作一起工作，但让事情在没有其他任何东西的情况下运行会产生此错误：

```
This action failed the check_authorization because it does not authorize_resource. Add skip_authorization_check to bypass this check. 
```

所以我使用装饰器方法从主应用程序打开引擎控制器并添加：

```
load_and_authorize_resource 
```

然后我得到这个错误：

```
No route matches {:action=>"new", :controller=>"devise/sessions"} 
```

我可以使用以下方法使事情正常进行，但是当我尝试实现角色时它很笨拙：

```
authenticate :administrator do
  mount SomeEngine::Engine => '/some_engine'
end 
```

笨拙的意思是我必须在 routes.rb 文件中为每个有权访问引擎的角色重现上面的代码块......除非有另一种方法来使用我不知道的角色进行身份验证？ ??

如果可能，我想在控制器中使用正常的 Devise/CanCan 授权/身份验证方法。但我认为出现“无路由匹配”错误是因为引擎不知道如何访问主应用程序的设计控制器。但是我如何从主应用程序中解决这个问题？

再添加一个问题......引擎中有一个特定的控制器/动作，我确实想向所有用户公开。到目前为止，我刚刚在 routes.rb 文件中的验证代码块之前添加了这个。

```
match '/some_engine' => 'some_engine/some_controller#public_action' 
```

它可以工作......但是这条线与 routes.rb 中的块似乎我做错了什么。而且它不允许我很好地实现角色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T09:29:33.860

您可以从主应用程序继承应用程序控制器以供使用设计和 cancan。

```
module SomeEngine
  class ApplicationController < ::ApplicationController    
    before_filter :merge_abilities

    private

    def merge_abilities
      current_ability.merge(SomeEngine::Ability.new(current_user))                                                     
    end
  end
end 
```

在此之后，您可以通过创建自己的方式为引擎创建能力。

```
module SomeEngine
  class Ability
    include ::CanCan::Ability

    def initialize(user)
      return if user.nil?

      can :manage, SomeModel
    end
  end
end 
```

`SomeModel`( `SomeEngine::SomeModel`) 是`SomeEngine`发动机的模型。

在资源控制器中，您必须指定资源的类名。

`load_and_authorize_resource class: SomeEngine::SomeModel`

`main_app.MAIN_APP_PATHS`如果您想在引擎中使用它，请不要忘记将路由助手更改为主应用程序布局。

# php - 对 Youtube API 的 PHP POST 请求：获取服务器错误

> ID：12208449
> 
> 赞同：1
> 
> 时间：2012-08-31T03:19:43.813
> 
> 标签：php, post, youtube

我正在尝试使用 Youtube API 来自动允许用户通过基于浏览器的上传来上传视频到 Youtube。目前，我正在通过 PHP 进行 POST 请求，但没有`curl`. 我无法访问`curl`我正在使用的 Web 服务器。我到目前为止的代码是：

```
<?php

$theCode = $_GET['code'];

$urltopost = "https://accounts.google.com/o/oauth2/token";
$datatopost = http_build_query( array(
"code" => $theCode,
"client_id" => "312231647220287.apps.googleusercontent.com",
"client_secret" => "ULGrcIJOBfjka;dsfasdfyCd7Z5M",
"redirect_uri" => ".../youtubeTestCode/hello.php",
"grant_type" => "authorization_code"
));
$opts = array('http' =>
      array(
    'method => 'POST',
    'header' => 'Content-type: application/x-www-form-urlencoded',
    'header' => 'Host: accounts.google.com',
    'content' => $datatopost
    )
);

$context = stream_context_create($opts);
$result = file_get_contents($urltopost, false, $context);

?> 
```

但是，当我尝试它时，我不断收到服务器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:14:56.797

如果您要添加：

```
var_dump($http_response_header); 
```

紧接着`get_file_content`，你会看到这个：

```
array(10) {
  [0]=>
  string(24) "HTTP/1.0 400 Bad Request"
  [1]=>
  string(61) "Cache-Control: no-cache, no-store, max-age=0, must-revalidate"
  [2]=>
  string(16) "Pragma: no-cache"
  [3]=>
  string(38) "Expires: Fri, 01 Jan 1990 00:00:00 GMT"
  [4]=>
  string(35) "Date: Fri, 31 Aug 2012 04:12:12 GMT"
  [5]=>
  string(30) "Content-Type: application/json"
  [6]=>
  string(31) "X-Content-Type-Options: nosniff"
  [7]=>
  string(27) "X-Frame-Options: SAMEORIGIN"
  [8]=>
  string(31) "X-XSS-Protection: 1; mode=block"
  [9]=>
  string(11) "Server: GSE"
} 
```

这意味着您的请求结构不正确：400 - 错误请求意味着身份验证失败！

# github - 我如何知道谁在 GitHub 上分叉了我的存储库？

> ID：12208450
> 
> 赞同：167
> 
> 时间：2012-08-31T03:19:48.123
> 
> 标签：github, git-fork

有没有办法知道谁在 GitHub 上分叉了我的存储库？我可以看到分叉的数量，但我想知道谁对我的存储库进行了分叉以及他们对其进行了哪些更改。

我知道如果他们有兴趣回馈我的存储库，他们可以向我发送拉取请求，但是我是否有其他方法可以找出谁分叉了我的存储库？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-08-31T03:25:42.133

单击分叉的数量会显示完整的网络。从那里您可以单击“成员”以查看谁分叉了 repo。ExpressJS 的示例：[https](https://github.com/expressjs/express/network/members) ://github.com/expressjs/express/network/members 。

[![在此处输入图像描述](../Images/1eeb86165c5e3e18060f68a2dabf470e.png)](https://i.stack.imgur.com/wHiY5.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-20T19:35:18.007

我从浏览器中发现的一种方法是尝试创建拉取请求，然后跨叉进行比较。所有现有的分叉都会出现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2022-01-10T06:29:03.623

now you can check the forks in `Insights` -> `Forks`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-02-08T02:52:37.327

上面接受的答案有助于查看分叉存储库的帐户。为了满足其他要求，即*查看已经进行了哪些更改，*您需要转到每个单独的分叉存储库，然后查看比较选项卡（请参阅附图）。[![在此处输入图像描述](../Images/108a3a8d780570ae6d3ef927d5c28acf.png)](https://i.stack.imgur.com/w4440.gif)要查看实际更改了哪些文件的确切详细信息，您应该单击图像中显示的**比较**按钮。

上述过程是正确的方法，并且可能很乏味。如果您想查看每个分叉存储库的领先或落后的汇总信息，您可以使用链接[https://forkinfo.herokuapp.com/ ，我已](https://forkinfo.herokuapp.com/)[在此处](https://github.com/abhishek9sharma/ForkInfo)开源，以防您想按任何方式对其进行编辑具体要求。它通过从每个分叉存储库的主页（来自图像中突出显示的部分）获取有关分叉在父分叉之前或之后多少的信息。[此信息是根据存储库](https://help.github.com/articles/comparing-commits-across-time/)的比较生成的

# linux-kernel - 在 Linux 内核中处理 SIGKILL 的最佳方法

> ID：12208454
> 
> 赞同：1
> 
> 时间：2012-08-31T03:20:15.707
> 
> 标签：linux-kernel

我正在 Linux 3.0 中编写一个系统调用，当我等待某个事件发生时（使用等待队列），我想检查一个挂起的 SIGKILL，如果发生，我希望`current`任务尽快结束可能的。据我所知，一旦我从系统调用返回（嗯，真的：只要进程进入用户模式）返回，内核就会检查挂起的信号，并在看到 SIGKILL 时，内核将杀死`current`在它返回用户模式之前。

问题：关于 SIGKILL 的工作原理，我的上述假设是否正确？我的另一个选择是查看致命的 SIGKILL 未决，而不是从系统调用返回，我只是执行一个`do_exit()`. 我想尽可能地与其他 Linux 用例保持一致……而且似乎从系统调用中简单地返回就是其他代码所做的。我只是想确保上述关于 SIGKILL 如何杀死任务的假设是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:10:58.887

信号检查发生在系统调用退出后，是的。

参见例如`ret_from_sys_call`。`arch/x86/kernel/entry_64.S`

# javascript - 如何仅将 CSS 应用于 jQuery 中的数字？

> ID：12208456
> 
> 赞同：0
> 
> 时间：2012-08-31T03:20:33.450
> 
> 标签：javascript, jquery, css

我有这个 html

```
<tr>
   <td>Test</td> 
   <td>324</td>
</tr> 
```

我的默认 CSS 是`text-align:left`

但我想适用`text-align:center`于任何`<td>`包含数字的内容。

我有大约 50 个 HTML 文件，所以我无法手动添加类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:28:40.177

你可以使用`filter`一些正则表达式魔法：

```
$('td').filter(function() {
  return /^\d/.test($(this).text());
}).css('text-align', 'center'); 
```

上面的正则表达式有点简单，如果你需要更精确的使用这个：

```
/((?!\w+[^\s]))\d+\1/ 
```

以上内容将匹配`(space)123`，`123(space)`但基本上只允许数字和空格，如果这是您正在寻找的。要添加更多有效字符，只需将它们像，这将使逗号也有效。`123a``asd 123``[^\s,]``,`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:03:28.160

老派解决方案（效果很好）：

```
function Trim(str){
    return str.replace(/^\s+|\s+$/g,"");
}

function applyCssCustomToSomeTds(){
    for(i=0;i<document.getElementsByTagName('td').length;i++){
        var elementTd = document.getElementsByTagName('td')[i];
        if(!isNaN(Trim(elementTd.innerHTML))){
            elementTd.style.textAlign = "center";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:36:01.700

```
​$(function(){
    $("td").filter(function(){
        return (/^\s*\d*\.?\d+\s*$/).test(this.innerHTML);
    }).css("text-align","center");        
});​​ 
```

* * *

编辑：这是一个 jsfiddle：http: [//jsfiddle.net/Avf7P/](http://jsfiddle.net/Avf7P/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:37:31.387

作为通过 jquery 添加类的另一个示例，您可以查看这个[fiddle](http://jsfiddle.net/VZWAP/1/)。'centerMe' 类只包含您需要的文本对齐值。

```
 $('td').each(function(){
            if($.isNumeric($(this).html()))
            {
                $(this).addClass('centerMe');
            }
    }); 
```

请注意，这使用 isNumeric 可能不是您的意图。如果是这种情况，那么您需要修改它以使用其他一些解决方案中提到的正则表达式方法之一。

# javascript - HTML +根据另一列的值从表中隐藏元素

> ID：12208459
> 
> 赞同：0
> 
> 时间：2012-08-31T03:21:23.960
> 
> 标签：javascript, html

我正在尝试根据另一列值隐藏表格列中的按钮，有一个表格列字段调用“存档”，如果该值为 true，我想隐藏另一列中的按钮。但是，我下面的代码仅隐藏了第一行中的按钮并忽略了后续行。请协助。谢谢。

```
<table class="table table-striped table-bordered">
    <tr>
        <td width="8%" class="table_pink" style="background-color:#ED4085">Name</td>
        <td width="8%" class="table_pink" style="background-color:#ED4085">Email</td>
        <td width="8%" class="table_pink" style="background-color:#ED4085">Country</td>
        <td width="8%" class="table_pink" style="background-color:#ED4085">Time</td>
        <td width="5%" class="table_pink" style="background-color:#ED4085">WrongAtQuestion</td>
        <td width="5%" class="table_pink" style="background-color:#ED4085">Winner?</td>
        <td width="5%" class="table_pink" style="background-color:#ED4085">CreatedDateTime</td>
        <td width="5%" class="table_pink" style="background-color:#ED4085">Hidden</td>
        <td width="20%" class="table_pink" style="background-color:#ED4085">Action</td>
    </tr>

    @foreach (var item in Model)
    {
        if (item.Archive)
        {
            <script type="text/javascript">
                $('#hideButton').hide();
            </script>
        }

           <tr>
               <td>@item.Name</td>
               <td>@item.Email</td>
               <td>@item.Country</td>
               <td>@item.Time</td>
               <td>@item.WrongAtQuestion</td>
               <td>@item.IsWinner</td>
               <td>@item.CreatedDateTime</td>
               <td>@item.Archive</td>
               <td><a class="btn btn-primary" href="#" id="hideButton" onclick="deleteEntry('@item.Id', '@item.Name'); return false;"><i class="icon-white icon-trash"></i> Hide from Leaderboard</a></td>
           </tr>         
    }
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:23:49.093

那么第一个问题是您正在创建无效的 html。该`id`属性应该是唯一的，但是在每一行中，您都输出一个带有`id="hideButton"`.

然后，当您使用`$('#hideButton')`它时，它将（在大多数浏览器中）找到具有该 id 的*第一个*元素，而不是所有元素。但是即使允许重复的 id，也没有什么可以将脚本与`$('#hideButton').hide()`任何特定的行联系起来——只是因为脚本块恰好在行之前并没有在它们之间建立联系。

相反，我建议您完全摆脱该脚本块，然后在带有链接的元素`if` *内部*使用服务器端，以便仅在为 false`td`时才包含链接。`item.Archive`那么你就不需要任何 JS/jQuery/CSS。我不熟悉您使用的服务器端语言，但在伪代码中它可能看起来像这样：

```
<td>
    @if(!item.Archive){
    <a class="btn btn-primary" href="#" onclick="deleteEntry('@item.Id', '@item.Name'); return false;"><i class="icon-white icon-trash"></i> Hide from Leaderboard</a>
    }
</td> 
```

另一种选择是使用服务器端代码添加`class="archive"`到相关的锚元素，然后使用这个 jQuery：

```
$(document).ready(function() {
     $("a.archive").hide();
}); 
```

（或者，如果您需要根据存档状态执行其他操作，您可能希望将类放在 tr 元素上并使用`$("tr.archive a.btn").hide();`.）

# silverlight - 与 DependencyProperty 绑定

> ID：12208460
> 
> 赞同：0
> 
> 时间：2012-08-31T03:21:31.587
> 
> 标签：silverlight, binding, windows-8, microsoft-metro, dependency-properties

我定义了一个类名 TextColumns.cs，它有一个 DependencyProperty RichTextBlockContentProperty：

```
public static readonly DependencyProperty RichTextBlockContentProperty =
    DependencyProperty.Register("RichTextBlockContent", typeof(string),
typeof(RichTextColumns), new PropertyMetadata(""));

public string RichTextBlockContent
{
    get { return (string)GetValue(RichTextBlockContentProperty); }
    set  //Debug, but the SetValue won't fire
    {
        SetValue(RichTextBlockContentProperty, value);
    }
} 
```

在 XAML 中，我将其用作

```
<FlipView x:Name="flipView"
            ItemsSource="{Binding Source={StaticResource itemsViewSource}}">
            <FlipView.ItemTemplate>
                <DataTemplate  x:Name="myDataTemplate">
                    <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                        <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">
                            <!-- Content is allowed to flow across as many columns as needed -->
                            <common:RichTextColumns x:Name="richTextColumns" Margin="117,0,117,47"
                                                    RichTextBlockContent="{Binding title}">

                                <RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}">
                                    <Paragraph>
                                        <Run x:Name="RunText" FontSize="26" FontWeight="SemiBold" Text="{Binding title}"/>
                                    </Paragraph>
                                </RichTextBlock>
                </common:RichTextColumns>
            </UserControl>
        </DataTemplate> 
    </FlipView.ItemTemplate>
</FlipView> 
```

当页面加载时，假设 RichTextBlockContent 将获取 Binding“标题”的值，而 RichTextBlock 中的 Binding 工作。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:21:47.503

setter 不会被调用。如果您需要在设置值时执行逻辑，则需要在 PropertyMetadata 构造函数中提供 PropertyChanged 回调

[http://msdn.microsoft.com/en-us/library/ms557330.aspx](http://msdn.microsoft.com/en-us/library/ms557330.aspx)

# git - 设置Ruhoh。错误：未找到存储库

> ID：12208464
> 
> 赞同：0
> 
> 时间：2012-08-31T03:22:16.677
> 
> 标签：git, github, repository

来自[ruhoh.com](http://ruhoh.com/)状态的说明设置存储库`USERNAME.ruhoh.com`，已完成。[https://github.com/NredYssuts/nredyssuts.ruhoh.com](https://github.com/NredYssuts/nredyssuts.ruhoh.com)还要求添加一个网络挂钩，这也已完成。

然后它给出以下指令来执行：

```
 $ git clone git://github.com/ruhoh/blog.git USERNAME.ruhoh.com
    $ cd USERNAME.ruhoh.com
    $ git remote set-url origin git@github.com:USERNAME/USERNAME.ruhoh.com.git
    $ git push origin master 
```

我能够执行前三行，然后在第四行我被要求输入我的密码`/home/nredyssuts/.ssh/id_rsa`

我正确地做到了，然后砰！

```
 ERROR: Repository not found.
    fatal: the remote end hung up unexpectedly 
```

我不确定为什么会发生这种情况。这是一个公共存储库。

# function - 在 wordpress 中获取当前分类法的术语 id

> ID：12208467
> 
> 赞同：0
> 
> 时间：2012-08-31T03:22:37.393
> 
> 标签：function, wordpress, metadata, custom-taxonomy

我正在尝试创建一个向我的分类页面添加其他自定义数据字段的函数，我发现[这个](http://wordpress.org/extend/plugins/taxonomy-metadata/)插件可以添加此功能。现在我可以正常保存自定义数据了..但是尝试在编辑表单页面上获取元数据是另一回事..

我已按照说明使用以下行的文档进行操作。

```
get_term_meta($term_id, $key, $single) 
```

但是我无法让它工作..我必须像这样手动输入term_id..

```
$term_meta = get_term_meta('36', '', true); 
```

..为了让它工作。有人能告诉我我需要什么代码来获取 term_id 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:40:41.357

您可以使用此功能进行调试

```
$term = get_term_by('slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );

print_r ($term); 
```

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:25:44.913

是的，没错。

```
$idObj = get_category_by_slug(post_type);  
$id1 = $idObj->term_id; 
```

如果您使用任何 WordPress 内置功能，则需要编写`objname->subkey`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:50:37.987

好的，所以我发现了问题

我不得不使用`$term_id->term_id`而不仅仅是`$term_id`

# php - PHP 发送原始数据包

> ID：12208471
> 
> 赞同：3
> 
> 时间：2012-08-31T03:22:48.373
> 
> 标签：php, arp

我想知道如何通过网络发送带有原始数据的数据包。我需要能够获取 LAN 上设备的物理地址，因此我计划广播或多播 ARP 数据包。

下面是一个正确构造的请求设备 IP 的 ARP 数据包。

```
0000  00 1e e5 fb a5 21 00 1a  70 dd e1 f2 08 06 00 01   .....!.. p.......
0010  08 00 06 04 00 01 00 1a  70 dd e1 f2 c0 a8 01 01   ........ p.......
0020  00 00 00 00 00 00 c0 a8  01 90                     ........ .. 
```

这是十六进制的原始数据。

如果我要以 ASCII 格式获取数据，是否像打开套接字并使用正确的端口号发送信息一样简单？实际上，由于这是 2 级而不是 3 级，这意味着没有 TCP 和 UDP（我认为？）那么我将如何发送呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:22:10.700

ARP 运行在链路层，TCP 套接字和 UDP 运行在 IP 上。PHP 可以打开一个原始的 IPv4 套接字。使用[`socket_create()`](http://php.net/manual/en/function.socket-create.php). 文档页面上有示例。

也有可以构建的 shell 工具执行此操作，并且在 PHP 中，您可以使用[`exec()`](http://php.net/exec)或相关函数运行它们。

确切的工具和用法将取决于您在问题中没有提到的操作系统。

# .net - Series.Points.Add 方法如何触发图表控件的重绘？

> ID：12208475
> 
> 赞同：0
> 
> 时间：2012-08-31T03:23:37.577
> 
> 标签：.net, charts, series, redraw

使用图表控件时，调用`Add`方法添加新的数据点，如`Series.Points.AddXY()`，会触发图表控件的重绘。现在，我正在尝试自己构建一个图表控件。我想知道; 它是如何工作的。是使用事件和委托还是其他方式来触发重绘？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:25:24.207

您可以通过创建自己的类来继承`Collection<T>`和覆盖`InsertItem()`以及在集合更改时重绘图表的其他方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:13:35.793

为什么不把 Refresh 函数放在 Series.Points.AddXY() 函数中呢？

您可能希望能够关闭“自动刷新”，以防有人想逐个添加 1,000 点……重绘会降低性能。

# clojure - 使用依赖项的正确方法是什么？

> ID：12208485
> 
> 赞同：2
> 
> 时间：2012-08-31T03:24:27.833
> 
> 标签：clojure

也许我错过了一些东西或者只是阅读过时的信息。基本上，我在[这里](https://github.com/clojure/data.csv/)尝试使用 CSV 库。

我已将其包含在我的 project.clj 中...

```
:dependencies [[org.clojure/clojure "1.3.0"]
               [org.clojure/data.csv "0.1.2"]] 
```

...并使用 Leiningen 成功检索了库。现在，将这个库包含在我的程序中使用的正确方法是什么？我尝试了发布在 lib 的 Github 页面上的示例，但得到一个错误说明：

```
FileNotFoundException Could not locate clojure/data/csv__init.class or clojure/data/csv.clj on classpath:   clojure.lang.RT.load (RT.java:430) 
```

编辑：进一步澄清我的尝试：我将代码粘贴在我的命名空间声明下，如下所示：

```
(ns testprogram.core(:gen-class))
(require '[clojure.data.csv :as csv]
         '[clojure.java.io :as io]) 
```

在 REPL 中尝试会产生相同的结果。我很确定我试图“包含”它们是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:25:39.497

您可以尝试以下操作：注意 :require 嵌套在 ns 声明中。这是这样做的首选方式。

```
(ns testprogram.core(:gen-class)
(:require [clojure.data.csv :as csv]
          [clojure.java.io :as io])) 
```

我认为在您的情况下，您可以使其与以下内容一起使用（未经测试）

```
(ns testprogram.core(:gen-class))
(require '(clojure.data [csv :as csv])
         '(clojure.java [io :as io])) 
```

请参阅以下说明

[http://clojure.github.com/clojure/clojure.coreapi.html#clojure.core/require](http://clojure.github.com/clojure/clojure.coreapi.html#clojure.core/require)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:40:35.687

这个测试对我有用：

```
(ns test.csv-test
  (:gen-class)
  (:require [clojure.data.csv :as csv]
            [clojure.java.io :as io]))

(defn main- [args]
(csv/read-csv "test")) 
```

我在测试时也遇到了“FileNotFound：找不到”问题。这是我`project.clj`文件中的一个简单错字。我建议仔细检查。

注意：这也有效：

```
(require '[clojure.data.csv :as csv]
         '[clojure.java.io :as io])
(defn main- [args]
(csv/read-csv "test")) 
```

虽然`:require`在宏中使用指令`ns`当然是最佳实践，但这并不是问题的根源。

在这两个版本中，REPL 输出：

```
user=> (in-ns 'test.csv-test)
#<Namespace test.csv-test>
test.csv-test=> (main- [])
(["test"]) 
```

还测试了`lein run`和`java -cp <uberjar> test.csv_test`

# php - 一旦控制器内部的函数被调用会发生什么？

> ID：12208490
> 
> 赞同：1
> 
> 时间：2012-08-31T03:25:00.247
> 
> 标签：php, model-view-controller, controller

我有一个函数，可以说它做了一些微不足道的计算。`Controller`具有此功能的大约行长`5000`（不是我写的）。

现在，当我调用一个计算简单的函数时。服务器是否必须创建一个`Object`非常大的文件然后运行我的函数？

是否每个请求都创建新`Object`的 my`Controller`或一旦创建它就留在那里为 given `session`。

**PS**：我正在考虑分解这段代码，但只是想知道它是否会给我带来性能优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:39:56.557

`Refactoring`是不断尝试使您的代码更好的一个重要方面。你不应该只`performance enhancement`把它看成一种激励，`code maintainability`也是一个重要的因素。具有 5k 行的控制器函数绝对是重构的候选者。

要回答您最初的问题 - 是否在每个请求上重新实例化控制器对象取决于框架的设计方式，核心框架对象通常会被实例化一次并在需要时被引用。

# mysql - 根据活动日期显示mysql表上的特定字段

> ID：12208491
> 
> 赞同：0
> 
> 时间：2012-08-31T03:25:06.430
> 
> 标签：mysql, sql

假设我有 3 个表：

```
A) Table UsrHeader
   -----------------
   UsrID  |  UsrName
   -----------------
   1      |  Abc
   2      |  Bcd

B) Table UsrDetail
   -------------------------------
   UsrID  |  UsrLoc  | Date
   -------------------------------
   1      |  LocA    | 10 Aug 2012
   1      |  LocB    | 15 Aug 2012
   2      |  LocA    | 10 Aug 2012

C) Table Trx
   -----------------------------
   TrxID  |  TrxDate     | UsrID
   -----------------------------
   1      |  10 Aug 2012 | 1
   2      |  16 Aug 2012 | 1
   3      |  11 Aug 2012 | 2 
```

我想要做的是将表格显示为：

```
 ---------------------------------------
  TrxID   |  TrxDate     | UsrID | UsrLoc
  ---------------------------------------
  1       |  10 Aug 2012 | 1     | LocA
  2       |  16 Aug 2012 | 1     | LocB
  3       |  11 Aug 2012 | 2     | LocA 
```

请注意，只有一个用户，但位置不同。这是基于用户在指定日期移动到另一个位置的**UsrDetail表。**因此，应该在每笔交易的该日期向用户显示特定位置。

我试过这段代码，但没有运气：

```
SELECT trx.TrxID, trx.TrxDate, trx.UsrID, User.UsrName, User.UsrLoc
FROM trx
INNER JOIN
( SELECT UsrHeader.UsrID, UsrHeader.UsrName, UserDetail.UsrLoc
  FROM UsrHeader
  INNER JOIN
  ( SELECT UsrDetail.UsrID, UsrDetail.UsrLoc, UsrDetail.Date
    FROM UsrDetail
  ) AS UserDetail ON UserDetail.UsrID = UsrHeader.UsrID
) AS User ON User.UsrID = trx.UsrID
             AND trx.TrxDate >= User.Date 
```

怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:35:01.123

使用以下内容：

```
SELECT trx.TrxID, trx.TrxDate, uh.UsrName, ud.UsrLoc
FROM trx 
     INNER JOIN UsrDetail ud ON (trx.UsrId = ud.UsrId)
     INNER JOIN UsrHeader uh ON (trx.UsrId = uh.UsrId)
WHERE ud.Date = (SELECT MAX(t.Date)
                 FROM UsrDetail t
                 WHERE t.UsrId = trx.UsrId
                   AND t.Date <= trx.TrxDate) 
```

这是一个**[演示](http://sqlfiddle.com/#!2/baa6b/1)**（SQL Fiddle）。

# java - Jetty 已嵌入 maven

> ID：12208494
> 
> 赞同：-4
> 
> 时间：2012-08-31T03:25:23.007
> 
> 标签：java, maven, jetty

当我在我的项目中使用 maven 时，我不安装 Jetty，所以 Jetty 是否嵌入在 maven 中？Tomcat 或 glassfish 等其他人怎么样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:24:47.803

Maven 基本上是一个构建工具，用于管理项目中的库和依赖项。Jetty、Tomcat 和 Glassfish 是 Servlet 容器，即与 Servlet 交互的 Web 服务器（Glassfish 更是如此，它是一个功能齐全的应用程序服务器）。

也就是说，Maven 也会为您下载所需的库。我想 Jetty 在这些库中属于您的情况，因此 Maven 会为您“安装”它，甚至在您运行项目时启动服务器。更多信息例如： [http ://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)

据我所知，Tomcat 和 Glassfish 必须手动安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:43:18.590

Maven 本身并没有嵌入 Jetty。

有一个名为：的 Maven 插件`jetty-maven-plugin`，它嵌入了码头以实现快速的开发生命周期。

还有一个 Tomcat Maven 插件……你猜对了……它嵌入了 tomcat……如果你使用 tomcat:run 目标……它也有目标可以部署到你自己安装的 tomcat 中它并不局限于嵌入。

我认为有一个 Glassfish Maven 插件不嵌入 glassfish，但确实提供了使用现有安装的目标。

还有一个 cargo maven 插件，它可以提供一些容器并在这些容器上运行应用程序

# android - 当从外部应用请求图像时，我的应用必须覆盖哪些意图过滤器才能出现在选择器中？

> ID：12208498
> 
> 赞同：9
> 
> 时间：2012-08-31T03:25:45.000
> 
> 标签：android, android-intent

我需要覆盖哪些可能的意图过滤器，以确保任何请求图像的外部应用程序都能在列表中看到我的应用程序？

为了澄清，我希望我的应用程序在执行以下操作时出现：

![在此处输入图像描述](../Images/9b70b359a6b52b0be9a43719a4f83ee0.png) ![在此处输入图像描述](../Images/692321449edd3fddb7e22e349a8e8736.png)

到目前为止，我已经介绍了：

```
<intent-filter>
    <action android:name="android.intent.action.PICK" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.GET_CONTENT" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

但是，如果使用 Tumblr 应用并按下“添加照片”，我的应用不会出现在选择器对话框中。我错过了哪个过滤器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T05:22:56.973

我已经介绍了正确的意图过滤器，但是 Tumblr 应用程序需要 OPENABLE 类别，所以我现在使用的不是我拥有的过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.PICK" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.GET_CONTENT" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.OPENABLE" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

仅添加以下行：

```
<category android:name="android.intent.category.OPENABLE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T05:45:04.897

有些应用程序可能会指定要打开的应用程序，有些应用程序已经将默认应用程序设置为打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:42:15.453

共享功能使用以下意图过滤器

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

请记住，这并不意味着应用程序正在请求照片，而是它想将照片发送到某个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T04:25:11.323

使用这个`<intent-filter>`：

```
<intent-filter
    android:icon="@drawable/icon"
    android:label="Share to my app">
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

# moq - 当物品可以是任何类型但必须具有特定属性集时，最小起订量如何进行设置

> ID：12208505
> 
> 赞同：1
> 
> 时间：2012-08-31T03:27:02.800
> 
> 标签：moq

我正在尝试设置一个将运行的方法：

```
dataAccess.Setup(x => x.GetCars(It.IsAny<CarFilter>())); 
```

好的，所以我是说在`GetCars`传递任何类型的对象时设置方法`CarFilter`。

我想让这个更具体一点。

我想做它，以便`CarFilter`在属性 on 传递任何类型的对象时进行设置`CarFilter` `Color = "Red"`。

有人知道怎么写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:30:10.703

您可以使用 It.Is(...) 对匹配设置条件

```
public class Car {
    public string Color { get; set; }
}

public interface IFoo {
   void DoIt(Car car);
}

[TestMethod]
public void PassesWhenRed() {

    var mockFoo = new Mock<IFoo>();

    var redCar = new Car { Color = "Red" };

    mockFoo.Object.DoIt(redCar);
    mockFoo.Verify(mk=>mk.DoIt(It.Is<Car>(car => car.Color == "Red")));   // Passes

}

[TestMethod]
public void FailsWhenNotRed() {

    var mockFoo = new Mock<IFoo>();

    var blueCar = new Car { Color = "Blue" };

    mockFoo.Object.DoIt(blueCar);
    mockFoo.Verify(mk=>mk.DoIt(It.Is<Car>(car => car.Color == "Red")));  // Fails

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:24:08.187

最终需要：

```
dataAccess.Setup(x => x.GetCars(It.Is<CarFilter>(z => z.Color == "Red"))); 
```

# crystal-reports-2010 - 为什么我在 Crystal Reports 中看不到“抑制嵌入字段空白行”选项？

> ID：12208507
> 
> 赞同：0
> 
> 时间：2012-08-31T03:27:33.287
> 
> 标签：crystal-reports-2010

用于 Visual Studio 2010 V 13.0.4 SP4 VS 2010 Professional SP1 的 Crystal Reports

这是我第一次与 CR 合作。我有一份报告，其中一个部分可能有两个可选行。为了抑制我在帮助和整个 Internet 中看到的空白行，请按照以下步骤操作。

1.  右键单击感兴趣的字段并选择格式化对象。
2.  在通用选项卡上，选中 旁边的框`Suppress Embedded Field Blank Lines`。

看起来很简单，但我没有这个选项。我看到`Supress`和`Suppress If Duplicated`。第二个下方似乎有足够的空间来容纳我想要的选项。我已经尝试过其他领域和其他报告仍然是 MIA。

奇怪的是，我在任何地方都找不到与此问题有关的其他帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:33:16.290

我也遇到了这个问题并发现了这个解决方法（使用 CR XI R2）

1) 右键单击​​要抑制空白字段的部分，然后单击“部分专家”

2) 勾选“Suppress (No Drill-Down)”并点击旁边的小图标打开公式编辑器。

3) 输入以下代码 **if { *Condition 结果导致空白记录*} then true else false**

4) 单击“保存并关闭”，然后单击“确定”。

# mongodb - [MongoDB]：我可以在生产环境的服务器中部署多个mongod实例吗？

> ID：12208510
> 
> 赞同：0
> 
> 时间：2012-08-31T03:28:07.000
> 
> 标签：mongodb

如果我在服务器中部署多个 mongod 实例？有什么好处和风险？如果我的 cpu 有 8 个核心，这样的部署可以利用多核吗？

# jmeter - 用于测试 Asp.net 应用程序的开源负载测试

> ID：12208513
> 
> 赞同：-5
> 
> 时间：2012-08-31T03:28:36.183
> 
> 标签：jmeter

> **可能重复：**
> [Jmeter 替代品](https://stackoverflow.com/questions/1754427/jmeter-alternative)

除了JMeter，有没有开源的负载测试工具来测试Asp.net应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:00:28.603

是的，ab 几乎是标准的[http://en.wikipedia.org/wiki/ApacheBench](http://en.wikipedia.org/wiki/ApacheBench)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:08:22.287

这里有更多工具[http://en.wikipedia.org/wiki/Web_server_benchmarking](http://en.wikipedia.org/wiki/Web_server_benchmarking)

# zend-framework - 关于 Google Plus API 和 Zend GData

> ID：12208523
> 
> 赞同：0
> 
> 时间：2012-08-31T03:30:24.280
> 
> 标签：zend-framework, google-plus, gdata

好吧，最近我正在写一些东西作为 facebook 活动。我想支持google plus平台，所以我在PHP中搜索google plus API库，发现有两个来源可以选择：Google Plus API和Zend GData。

然后，有一个有趣的情况。PHP 库中的 Google Plus API 和 Zend GData 是两个不同的库。Google Plus API 可以让我将评论作为活动发布，Zend GData 可以让我发布图片。facebook活动事物可以只允许用户发表评论，或者用户可以发表评论和图像。

我在想如果用户发表评论，我会调用 Google Plus API。如果用户发表评论和图片，我调用 Zend GData？这会使代码非常混乱。我可以在 google plus API 中将图像和评论作为活动发布吗？还是只能使用 Zend GData 发表评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:42:22.583

我认为您误会了[Google+ api](https://developers.google.com/+/api/)确实还不存在（目前仅支持 Developer Preview 中的有限 GET 活动）并且 Zend Gdata 组件比 Google+ 早了很多年。

我确信您可以将图像发布到 Picasa 并将评论发布到可能反映在 Google+ 上的其他 Google 服务，但任何实际发布到 Google+ 的库都可能是黑客攻击。

所以回答这个问题：

> 我可以在 google plus API 中将图像和评论作为活动发布吗？

答案是，不。

# iphone - html5 和热传感器

> ID：12208528
> 
> 赞同：1
> 
> 时间：2012-08-31T03:30:54.943
> 
> 标签：iphone, html, sensors, heat

我是 html5 编程的新手，正在考虑为 iphone 构建一个 html5 应用程序。我想知道 API 中是否有任何关于在 api 中感应触摸温度的信息？我的应用程序取决于手指触摸屏幕时的温度。有没有办法测量这个？如果没有，有没有办法测量施加在屏幕上的压力量？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:37:56.113

室温：是的。

iPhone屏幕上拇指的温度：没有。

拇指在屏幕上的压力：也没有。

请记住——iPhone“触摸”作用于*电容*，而不是“机械压力”。

# php - 在 PHP 和 MySQL 上处理时区的最佳方法是什么？

> ID：12208533
> 
> 赞同：11
> 
> 时间：2012-08-31T03:31:15.370
> 
> 标签：php, mysql, timezone

我目前正在研究在我的网站上处理时区的最佳方法。来自许多不同国家的人会同时访问它，我必须向他们展示基于时间的信息，所以我想：

根据我的服务器（相同的时区，由 PHP 定义）将每次存储在数据库中然后，用户可以选择他的时区，我使用 mysql 函数 DATEADD 进行所需的转换。

这似乎工作正常，但我的问题是：

*   这是最好的方法吗？
*   DATEADD 是处理小时差的最有效函数吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:51:20.870

如[MySQL 服务器时区支持](http://dev.mysql.com/doc/en/time-zone-support.html)中所述：

> 当前会话时区设置会影响对区域敏感的时间值的显示和存储。这包括由函数（例如`NOW()`or ）显示的值`CURTIME()`，以及存储在列中和从`TIMESTAMP`列中检索的值。列的值`TIMESTAMP`从当前时区转换为 UTC 以进行存储，并从 UTC 转换为当前时区以进行检索。

因此，如果您使用`TIMESTAMP`类型列，MySQL 将自动为您处理时区转换：只需在其[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)变量中为会话设置适当的时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T03:51:50.957

您正在朝着正确的方向思考。

我不会使用服务器的时区。而是使用协调世界时 (UTC) 时间。它是世界时间标准。这与格林威治标准时间 (GMT) 几乎相同。请注意，UTC 不会随着夏令时而改变。

要在 PHP 中使用，请参阅： http: [//php.net/manual/en/function.gmdate.php](http://php.net/manual/en/function.gmdate.php)

从这里，您可以通过以下方式添加时间：[http ://www.php.net/manual/en/datetime.add.php](http://www.php.net/manual/en/datetime.add.php)

或根据用户偏好设置时区：[http ://www.php.net/manual/en/datetime.settimezone.php](http://www.php.net/manual/en/datetime.settimezone.php)

您使用的是基于您如何获得用户的时区。如果您要求他们（最准确），您可以在 PHP 中设置时区，用户从组合框中进行选择。如果您使用 JavaScript 从标头中获取它，`getTimezoneOffset();`那么最好根据时区偏移量添加小时数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:52:55.203

我个人根据 GMT +0.00 时区在我的数据库中设置所有时间。因此，例如，当我想添加当前时间时，我使用[`UTC_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_utc-timestamp)（或[`UTC_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_utc-date), - 以适用者为准）。[`UTC_TIME()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_utc-time)这是独立于服务器的，所以我相信即使我改变了我的服务器，我将来也不需要担心这个问题。

然后选项是，如果您的访问者有机会选择他们自己的时区，您可以在提供结果之前使用[`DATE_ADD()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)和[`DATE_SUB()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-sub)函数来格式化结果。

否则，如果您有机会（这是我最喜欢的解决方案），您可以使用 Javascript 来格式化该日期/时间，您可以通过类似的方式轻松处理它

```
function getLocalDate(dt) {
    var d = new Date(0);
    d.setUTCSeconds(dt);
    return d.toLocaleDateString();
    // or in some format that you choose
} 
```

它使用 .php 获取 PHP 回显的日期`strtotime($row['some_date']);`。

# mysql - RoR：条件总是错误的——为什么？

> ID：12208537
> 
> 赞同：0
> 
> 时间：2012-08-31T03:31:34.973
> 
> 标签：mysql, ruby-on-rails, ruby, haml

我正在使用 Rails 2.3.x 开发学习管理系统。这是我的代码：

```
-@users.each do |user|
    %tr
        %td
            =link_to h(user.name), :action => :show_user, :id => user.id
        %td="#{h user.grade_level}"
        -if QuizResult.find_by_user_id(@user_id).present?
            ="#{(QuizResult.average('score', :conditions => 'user_id = #{@user.id}') * 100).round}%"
        -else
            %em No quizzes taken 
```

我的`quiz_results`表有`user_id`和`score`等列。我有一个`user_id`（3907）和`result`（0.1）的记录，我正在查看的两个用户在`quiz_results`表中没有记录。

显示器显示`"No quizzes taken"`了所有三个，这让我相信这条线无论如何都是错误的：

```
-if QuizResult.find_by_user_id(@user_id).present? 
```

任何想法如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:35:49.360

我想您需要更改`@user.id`为`user.id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:38:44.483

将语句中的 和更改`@user_id`为。还将单引号更改为双引号或使用字符串插值将不起作用。`user.id``if``@user.id``user.id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:43:47.730

作为问题第二部分的答案，我认为您不能拥有嵌套的评估字符串（嵌套`#{}`）。您需要先计算结果，然后在 HAML 中评估并输出：

```
-averge = QuizResult.average('score', :conditions => 'user_id = #{@user.id}') * 100).round
="#{average}%" 
```

# c# - Rhino 模拟 为什么我不能模拟一个属性？

> ID：12208538
> 
> 赞同：1
> 
> 时间：2012-08-31T03:31:45.097
> 
> 标签：c#, unit-testing, rhino-mocks

我花了几天时间编写测试，然后不得不在最后一刻添加一个属性来解决我在编写测试时发现的一个问题。自从添加该属性以来，我一直试图让模拟框架发挥作用。

这是我的代码。

```
using (_mockRepository.Record())
        {
            _mockBattleDao.Expect(b => b.GetUnprocessedActions(gameId, round)).Return(roundResolvingItems);
            _mockDao.Expect(b => b.GetMidGameCharacterStats(gameId, round)).Return(midGameCharacterStats);
            _mockBattleDao.Expect(b => b.GetAmbientCharacterBuffs(_mockTiersHelper, gameId, round)).Return(new List<Buff>());
            _mockBattleDao.Expect(b => b.GetActiveTriggerBuffs(_mockTiersHelper, gameId, round)).Return(triggerBuffs);
            _mockBattleDao.Expect(b => b.GetActiveAmbientBuffs(_mockTiersHelper, gameId, round)).Return(new List<Buff>());
            _mockDao.Expect(b => b.GetGame(gameId)).Return(new Common.Entities.Game { CompletionType = "single party down" });
            _mockDao.Expect(b => b.GetAbilityById(1337)).Return(ability).Repeat.Times(3);
            _mockDao.Expect(b => b.GetAbilityById(1727)).Return(attackAbility).Repeat.Times(4);
            _mockTiersHelper.Expect(b => b.AddStatistic(Arg<StatAndCount>.Is.Anything)).Repeat.Times(3);
            SetupResult.For(_mockTiersHelper.Round).Return(round);
        }

        TiersCalculationContainer container;

        using (_mockRepository.Playback())
        {
            container = engine.ProcessTiers();
        } 
```

我知道 AAA 语法是新的热点，但我有一个完整的大型测试，但为此我不想回去重写。

当代码执行到达“播放”的结束“}”时，我得到了这个异常：

期望违规异常

TiersCalculationContainer.get_Round(); 预期 #1，实际 #0。

在调试测试时，属性“Round”被正确读取并返回我为它模拟的值，所以我知道它被调用了。

我在网上找不到任何关于此的信息。在 Rhino 模拟中似乎有大约 100 种模拟属性的方法。他们都没有工作，这真的令人沮丧。

我也尝试过嘲笑所有这些方式（以及更多）

```
_mockTiersHelper.Expect(b => b.Round).Return(round);
Expect.Call(_mockTiersHelper.Round).PropertyBehavior();
_mockTiersHelper.Round = round; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:37:44.753

这是对一个测试的很多期望，我建议分别测试每个对象的行为，然后只测试它们在集成点被正确调用。

除此之外，我认为您的问题是逻辑问题而不是语法问题，如果您根据文档设置模拟并获得意外行为，则它是您的代码或测试中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:43:04.333

我认为这个问题的答案可能是这是一个错误。我甩掉了犀牛，回到了起订量。10分钟，我就开始跑步了。现在我的测试通过了。谢谢你起订量！

# c# - 为什么我不能将我的表单高度设置为 30px？

> ID：12208539
> 
> 赞同：0
> 
> 时间：2012-08-31T03:31:47.447
> 
> 标签：c#, forms, height

我试过设置，但是当这个设置时，我的表单仍然有更大的高度。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:45:03.590

[来自 MSDN 的注释：-](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)

> 使用 Sizable 样式，即使您已将 ControlBox 设置为 false 并将零长度字符串分配给 Text，也无法将窗口大小调整到某个最小值以下。考虑通过使用[`SizableToolWindow style`](http://msdn.microsoft.com/en-us/library/hw8kes41.aspx)来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:34:15.550

可能是您设置`true`了`Form.AutoSize`属性。关闭`AutoSize=false`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:35:42.637

我只能假设问题是边框样式所有表单都有边框，如果您不介意没有边框，则无法更改，只需将边框样式设置为无，然后表单高度甚至可以为 0px

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T04:41:29.277

使控制框=假；你会得到你想要的。因为它是 ControlBox，尺寸超过 30x30，没有它你可以做所有尺寸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T14:30:36.713

这是一个适合我的解决方案。

在从 Form 派生的类中，重写两个方法以绕过应用的尺寸校正，并禁止您将尺寸设置为低于限制。

```
 // the *real* width and height of your form, Width and Height are now lying...
    internal int CoreWidth { get; private set; }
    internal int CoreHeight { get; private set; }

    // just for fun :
    public new int Width { get { return CoreWidth; } }
    public new int Height { get { return CoreHeight; } }

    protected override void SetClientSizeCore ( int x, int y )
    {
        // get wished width and height earlier enough in the chain of calls
        CoreWidth = x;
        CoreHeight = y;
        base.SetClientSizeCore ( x, y );
    }

    protected override void SetBoundsCore ( int x, int y, int width, int height, BoundsSpecified specified )
    {
        // don't trust width and height that are provided, use the ones you kept
        base.SetBoundsCore ( x, y, CoreWidth, CoreHeight, specified );
    } 
```

像魅力一样工作......我用它来创建某种在屏幕上任何地方弹出的通知窗口，它可以包含任何类型的控件并具有任何大小，没有限制。

# android - PC 上的 Bluecove 无法检测到已连接的 android（galaxy tab 7.0）

> ID：12208543
> 
> 赞同：0
> 
> 时间：2012-08-31T03:32:20.830
> 
> 标签：android, bluetooth, bluecove

我使用此代码 luugiathuy.com/2011/02/android-java-bluetooth/
服务器端是 PC
客户端是设备，应用程序基于蓝牙聊天示例

设备（galaxy tab 7.0）可以与PC建立连接。然而，PC 服务器（用 java 和 bluecove 编写）什么也没做，因为什么都没有连接。

尝试查找连接设备的循环是

```
while(true) {
        try {
            System.out.println("waiting for connection...");
            connection = notifier.acceptAndOpen();

            Thread processThread = new Thread(new ProcessConnectionThread(connection));

            processThread.start();

        } catch (Exception e) {
            e.printStackTrace();
            return;
        } 
```

`Output on PC: uuid: 0000110100001000800000805f9b34fb waiting for connection...` 编辑：源下载[https://github.com/luugiathuy/Remote-Bluetooth-Android](https://github.com/luugiathuy/Remote-Bluetooth-Android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T12:01:53.857

我在linux中尝试时遇到了同样的问题。但是原因（仍然不确定）当您运行蓝牙android应用程序而不使用bluecove打开Java服务器时，它会尝试连接已经安装的蓝牙软件。您可能会看到蓝牙图标，要求授予对移动设备的访问权限。

为了解决这个问题，我只是更改了服务器和应用程序中的 uuid（比如从 1103 到 1101，反之亦然），然后先启动服务器，然后再启动 android 应用程序。Java 服务器部分开始监听。

我认为的原因可能是 uuid 没有找到 bluecove stack 服务服务器，它连接到侦听相同 uuid 的设备服务器。因此，在更改 uuid 并确保在启动 android 应用程序之前服务器正在运行之后，应该可以解决问题。

如果您连接到蓝牙系统应用程序而不是 Java bluecove 服务器，

```
1) First change the uuid both server and android application.
2) Second make sure your server is running and listening on same uuid.
3) Launch the android application which try to communicate on same rfcomm connection uuid. 
```

我取自的服务器部分代码：http: [//www.jsr82.com/jsr-82-sample-spp-server-and-client/](http://www.jsr82.com/jsr-82-sample-spp-server-and-client/) 库：[http ://code.google.com/p/bluecove/downloads/list](http://code.google.com/p/bluecove/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:40:47.073

您的程序的输出显示它在 UUID 0x1101 上侦听。真的吗？您引用的示例显示它侦听不同的 UUID。其服务类 ID 为 0x04c6093b，设置如下：

```
34  UUID uuid = new UUID(80087355); // "04c6093b-0000-1000-8000-00805f9b34fb"
35  String url = "btspp://localhost:" + uuid.toString() + ";name=RemoteBluetooth";
36  notifier = (StreamConnectionNotifier)Connector.open(url); 
```

两者需要在客户端和服务器上匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:59:39.667

是的，这也发生在我身上，我建议你在 shell 显示**waiting for connection**时触发以下命令。

```
hcitool cc 58:C3:8B:D7:FA:F4 
```

这`58:C3:8B:D7:FA:F4`是我设备的蓝牙地址，应替换为您设备的蓝牙地址。

要获取设备的蓝牙地址，只需在设备中以可发现模式启动蓝牙并执行`hcitool scan`命令，它将显示所有活动设备及其名称和蓝牙地址。

好吧，您可以通过 Java 代码运行上述`hcitool cc 58:C3:8B:D7:FA:F4`命令，如下所示，

```
try
{
     Process p=Runtime.getRuntime().exec("hcitool cc 58:C3:8B:D7:FA:F4"); 
}
catch ( Exception e )
{

} 
```

# python - 在 Tornado 应用程序中设置类变量

> ID：12208547
> 
> 赞同：0
> 
> 时间：2012-08-31T03:32:34.533
> 
> 标签：python, tornado

我有一个结构如下的 Tornado 应用程序：

```
...

class Application(tornado.web.Application):
    def __init__(self):
        ...

class MyHandler(tornado.web.RequestHandler):
    def get():
        ...

class MyOtherHandler(tornado.web.RequestHandler):
    def post():
        ...

class MyClass(object):
    my_class_variable = {}
    ...

    def my_method_one():
        # access my_class_variable
        ...

    def my_method_two():
        # access my_class_variable
        ... 
```

在其中，我的自定义类中有一个类变量`my_class_variable`。我想从外部设置这个类变量`MyClass`，例如在一个处理程序内部。因此我的问题是，在 Tornado 应用程序中直接在处理程序的方法中修改类变量是否是一种好习惯？例如

```
MyClass.my_class_variable[key] = value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:47:17.617

是的，没关系。处理程序通常需要以各种方式与其他类进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:23:15.030

对我来说它看起来很“脏”......如果不知道具体问题很难说清楚，但我会发现只需传递给`my_method_one`和`my_method_two`方法所需的任何参数，而不是设置一些类级别的属性，它会更简单、更清晰。

# c# - 将 VB.NET Lambda 表达式重写为 C# 语句

> ID：12208555
> 
> 赞同：1
> 
> 时间：2012-08-31T03:34:33.550
> 
> 标签：c#, vb.net, vb.net-to-c#

我将我的应用程序从框架的第 4 版降级到第 4 版，现在我想实现这个 VB.NET lambda 函数语句（适用于 3.5）

```
Dim colLambda As ColumnItemValueAccessor = Function(rowItem As Object) General_ItemValueAccessor(rowItem, colName) 
```

并用 C# 重写它。这是我的尝试：

```
ColumnItemValueAccessor colLambda = (object rowItem) => General_ItemValueAccessor(rowItem, colName); 
```

当我这样做时，我收到以下错误：

```
Error   14  One or more types required to compile a dynamic expression cannot be found. Are you missing references to Microsoft.CSharp.dll and System.Core.dll? C:\Source\DotNet\SqlSmoke\SqlSmoke\UserControls\ScriptUserControl.cs    84  73  SqlSmoke 
```

但是，当我将应用程序从框架的 4.0 版本降级到 3.5 时（因为我们的用户只有 3.5 并且无权安装 4.0）。当我这样做时，对“Microsoft.CSharp”的引用被破坏了。

我可以像在 VB.NET 中那样使用在 C# 3.5 中有效的语法在 C# 中重写 VB.NET 命令吗？语法是什么？

我在想，如果我想继续使用 3.5，这是必须的，那么我必须在 VB.NET 中编写这段代码，因为看起来 C# 在 VB 之后有了这个功能。

```
namespace BinaryComponents.SuperList
{
    public delegate object ColumnItemValueAccessor(object rowItem);
}

private object General_ItemValueAccessor(DataRow rowItem, object colName)
{
    DataRow rowPerson = (DataRow)rowItem;
    return rowPerson[colName.ToString()].ToString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:37:44.343

C# 中的动态类型是 .Net 4.0 的新功能。

不要使用动态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:42:24.387

只要确保正确使用

```
using System.Linq; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:18:02.833

问题似乎是其中一种类型不匹配。将委托参数类型从更改`object`为`DataRow`：

```
public delegate object ColumnItemValueAccessor(DataRow rowItem); 
```

正如 AVD 所指出的，您还需要修复 lambda 表达式的语法（隐含`object`for的类型`rowItem`，不应在此处指定）：

```
ColumnItemValueAccessor colLambda = (rowItem) => General_ItemValueAccessor(rowItem, colName); 
```

关键是当你为委托类型编写 lambda 表达式时，lambda`ColumnItemValueAccessor`的参数和返回类型必须与委托匹配。

# css - *-tag，*_tag 在部署在 heroku 中的 scss 中不起作用

> ID：12208564
> 
> 赞同：0
> 
> 时间：2012-08-31T03:35:47.873
> 
> 标签：css, ruby-on-rails, heroku, sass

我在我的一个应用程序 scss 文件中有这个：`background: image_url('loading.gif') 0 0 no-repeat;`它可以在我的本地机器上运行，`url(...)`但是当我在 heroku 中部署它时，它呈现为`image_url(...)`.

我正在使用雪松堆栈`heroku info`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:04:24.823

在部署中，文件名和扩展名区分大小写。所以检查你的文件名。

# curl - cURL 在本地主机上工作，但不在实时网站上

> ID：12208565
> 
> 赞同：1
> 
> 时间：2012-08-31T03:35:48.877
> 
> 标签：curl

我有一小段脚本可以从不同的网站抓取图像，在本地主机上完美运行，但在实时网站上无法运行。

根据网站上的 phpinfo() 启用了 CURL。

我无法将脚本发布为敏感内容 - 但是在您的脑海中，我应该检查什么来解决这个问题？为什么 CURL 可以在 localhost 和其他主机上工作，但不能在其他也启用了 CURL 的主机上工作？

# android - 如何通过 Android NFC API 在 MifareClassic 上构造值块

> ID：12208568
> 
> 赞同：0
> 
> 时间：2012-08-31T03:36:00.967
> 
> 标签：android, nfc, mifare

我的问题是 Android NFC API 已经提供了“增量”和“减量”一个值块，但是如果我有一个新的 MifareClassic 标签（里面没有任何值块），我该如何使用 Android NFC API 来构造这个新标签上的值块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:28:05.013

您应该只将格式正确的数据写入标签。有关示例，请参见[MIFARE Classic 数据表](http://www.nxp.com/documents/data_sheet/MF1S50YYX.pdf)的第 8.6.2 节。

`value`将整数作为值块存储在块中的示例 Android 代码`blockIndex`：

```
// connect to the tag using a Tag object from an NFC intent
MifareClassic mifare = MifareClassic.get(tag);
mifare.connect();

// need to authenticate first to get access
int sector = blockToSector(blockIndex);
mifare.authenticateSectorWithKeyA(sector, keyA); // you need to know key A
// mifare.authenticateSectorWithKeyB(sector, keyB); // in case you know key B

// construct value block of value zero; "address" byte is set to 0 in this example
byte[] zeroValue = {0, 0, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 0, 255, 0, 255 };
mifare.writeBlock(blockIndex, zeroValue);

// increase the value block by some amount
mifare.increment(blockIndex, value);
// result is stored in scratch register inside tag; now write result to block
mifare.transfer(blockIndex); 
```

请记住，需要正确设置块的访问控制位，以允许对用于身份验证的密钥进行增量操作。

# javabeans - 为什么 javabeans 框架为 NON 索引方法创建 IndexedPropertyDescriptor

> ID：12208569
> 
> 赞同：1
> 
> 时间：2012-08-31T03:36:08.063
> 
> 标签：javabeans

我不熟悉 java bean 框架，在下面的场景中，我得到了方法 getFooWithX 的 IndexedPropertyDescriptor，有人可以解释为什么吗？

```
public class IntrospectorTest {
public static void main(String[] args) throws IntrospectionException {
    BeanInfo info = Introspector.getBeanInfo(SubClass.class);
    PropertyDescriptor[] descriptors = info.getPropertyDescriptors();
    for (int i = 0; i < descriptors.length; i++) {
        System.out.println(descriptors[i].getClass().getName() + ":" + descriptors[i].getName());
    }
} 
```

}

```
abstract class BaseClass {
public abstract Object getFoo(); 
```

}

```
abstract class SubClass extends BaseClass {
public Object getFooWithX(int x) {
    return null;
} 
```

}

结果将是：

```
java.beans.PropertyDescriptor:class
java.beans.PropertyDescriptor:foo
java.beans.IndexedPropertyDescriptor:fooWithX 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T11:57:46.317

If a method is named getX with no arguments, it is taken to be a getter for a non-indexed property X. If a method is named getX with a single int argument, it is taken to be a getter for an indexed property X. That is why you get the IndexedPropertyDescriptor returned.

An indexed property is a property which is an array, indexed by an integer. For example, if a user can have multiple nicknames, and `public String getNickNames(int n)` returns their *n*th nickname, then "nickNames" is an indexed property. There should also be a `public String[] getNickNames()` to return all nickNames at once, but the Introspector will still identify an indexed property even if no such method exists.

Whether this is appropriate depends on semantically what "getFooWithX" means. If "fooWithX" is meant to be an array and the parameter is an index used to select an element, then this semantically makes sense. If the parameter is something other than an index into an array, then it would be advisable to rename the method to not start with "get" if that is possible.

# ruby-on-rails - 通过关联分配模型的属性

> ID：12208573
> 
> 赞同：1
> 
> 时间：2012-08-31T03:36:57.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 新手，正在开发 Rails 应用程序，我一直在思考这个问题。

我有三个模型

```
class Product < ActiveRecord::Base

    attr_accessible :name, :issn, :category, :user_products_attributes

    validates_presence_of :name, :issn, :category
    validates_numericality_of :issn, :message => "has to be a number"

    has_many :user_products
    has_many :users, :through => :user_products

    accepts_nested_attributes_for :user_products

end

class UserProduct < ActiveRecord::Base

  attr_accessible :price, :category

  validates_presence_of :price, :category
  validates_numericality_of :price, :message => "has to be a number"

  belongs_to :user
  belongs_to :product

end

class user < ActiveRecord::Base

  # devise authentication here

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :user_products, :dependent => :destroy
  has_many :products, :through => :user_products

end 
```

产品控制器

定义新

```
@product = product.new

@product.user_products.build 

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @product }
end 
```

结尾

所以问题是这样的：我希望用户在表单中输入产品的信息，但它还涉及输入与产品相关联的不同模型/表（user_product）中存在的产品价格。我怎样才能做到这一点？你可以看到我的 form_for 使用了@product。

任何帮助将不胜感激。

```
 <div class="span8">

       <div id="listBoxWrapper">          
        <fieldset>

         <%= form_for(@product, :html => { :class => "form-inline" }, :style => "margin-bottom: 60px" ) do |f| %>

            <div class="control-group">
              <label class="control-label" for="Category">Category</label>
              <div class="controls">

                <%= f.text_field :category, :class => 'input-xlarge', :id => "Category" %>       

              </div>
            </div>

           <div class="control-group" style="display: inline-table;">
           <label class="control-label" for="First Name">Price($/Month)</label>
             <div class="controls">
              <%= product.fields_for :user_products do |p| %>
                <%= p.text_field :price, :class => 'input-xlarge input-name' %>    
                <% end %>
              </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:58:11.577

它应该是一种以下

```
<%= form_for(@product) do |product| %>
  <%= product.text_field :name, :class => 'input-xlarge input-name' %>
  <%= product.fields_for :user_products do |user_product| %>
      <%= user_product.text_field :price, :class => 'input-xlarge input-name' %> 
```

你需要在你的控制器中构建你`user_products`的。`@product`像

```
@product.user_products.build 
```

你的`Product`模型应该有以下

```
accepts_nested_attributes_for :user_products 
```

这将使它意识到`user_products`价值可能会在保存产品实体时出现。

**编辑：**

只是解释嵌套形式的骨架

```
form_for(@object) do |object_form_builder|
       # call any field generator helper function by object_form_builder like
       object_form_builder.text_field
       object_form_builder.check_box
       # so on...

       #Now for nested forms get the nested objects from the builder like
       object_form_builder.fields_for :nested_objects do |nested_object_builder|
             #generate the fields for this with nested_object_builder. Like
             nested_object_builder.text_field
             # so on...
       end
 end 
```

是的，为对象构建器使用短名称总是很方便，就像您通常使用`f`的`form_builder`.

# java - 使用 JPanel 的 addMouseListener() 和 paintComponent()

> ID：12208574
> 
> 赞同：4
> 
> 时间：2012-08-31T03:37:07.207
> 
> 标签：java, swing, awt, jpanel, actionlistener

[这是我之前](https://stackoverflow.com/questions/12175174/paintcomponent-vs-paint-and-jpanel-vs-canvas-in-a-paintbrush-type-gui)的问题的后续。我已经尽可能地简化了事情，但它仍然不起作用！虽然我使用`getGraphics()`.

非常感谢对这里出了什么问题的详细解释。我怀疑我`addMouseListener()`在这里使用方法的方式有问题。

EDIT 完全重写了代码。虽然仍然无法正常工作。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class RunClass{

    static MainClass1 inst1 = new MainClass1();

    public static void main(String args[]){

        JFrame frame1 = new JFrame();
        frame1.add(inst1);
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame1.setTitle("NewPaintToolbox");
        frame1.setSize(200, 200);
        frame1.setLocationRelativeTo(null);     
        frame1.setVisible(true);                
    }
}

class MainClass1 extends JPanel implements MouseListener, MouseMotionListener{

    int xvar=30;
    int yvar=30;
    //static PaintClass22 inst1 = new PaintClass22();

    @Override
    public void mouseClicked(MouseEvent arg0) {
        // TODO Auto-generated method stub
        xvar = arg0.getX();
        yvar = arg0.getY();
        repaint(xvar,yvar,10,10);

    }   

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseDragged(MouseEvent arg0) {
        // TODO Auto-generated method stub
        xvar = arg0.getX();
        yvar = arg0.getY();
        repaint(xvar,yvar,10,10);

    }

    @Override
    public void mouseMoved(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void paintComponent(Graphics g){

        super.paintComponent(g);
        g.setColor(Color.RED);
        g.fillRect(xvar, yvar, 10, 10);     

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T13:16:03.740

这不是您问题的直接答案，但知道（或至少怀疑）您希望提供什么（一个简单的绘画程序），我建议从这种基于 a`BufferedImage`作为绘画表面的方法开始。

![基本的绘画应用程序。](../Images/ee831addd93f8947cf552471a7e134cb.png)

```
import java.awt.*;
import java.awt.RenderingHints.Key;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.filechooser.FileFilter;
import javax.swing.filechooser.FileNameExtensionFilter;

public class BasicPaint {

    /** Reference to the original image. */
    private BufferedImage originalImage;
    /** Image used to make changes. */
    private BufferedImage canvasImage;
    /** The main GUI that might be added to a frame or applet. */
    private JPanel gui;
    /** The color to use when calling clear, text or other 
     * drawing functionality. */
    private Color color = Color.WHITE;
    /** General user messages. */
    private JLabel output = new JLabel("You DooDoodle!");

    private BufferedImage colorSample = new BufferedImage(
            16,16,BufferedImage.TYPE_INT_RGB);
    private JLabel imageLabel;
    private int activeTool;
    public static final int SELECTION_TOOL = 0;
    public static final int DRAW_TOOL = 1;
    public static final int TEXT_TOOL = 2;

    private Point selectionStart; 
    private Rectangle selection;
    private boolean dirty = false;
    private Stroke stroke = new BasicStroke(
            3,BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND,1.7f);
    private RenderingHints renderingHints;

    public JComponent getGui() {
        if (gui==null) {
            Map<Key, Object> hintsMap = new HashMap<RenderingHints.Key,Object>();
            hintsMap.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            hintsMap.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            hintsMap.put(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
            renderingHints = new RenderingHints(hintsMap); 

            setImage(new BufferedImage(320,240,BufferedImage.TYPE_INT_RGB));
            gui = new JPanel(new BorderLayout(4,4));
            gui.setBorder(new EmptyBorder(5,3,5,3));

            JPanel imageView = new JPanel(new GridBagLayout());
            imageView.setPreferredSize(new Dimension(480,320));
            imageLabel = new JLabel(new ImageIcon(canvasImage));
            JScrollPane imageScroll = new JScrollPane(imageView);
            imageView.add(imageLabel);
            imageLabel.addMouseMotionListener(new ImageMouseMotionListener());
            imageLabel.addMouseListener(new ImageMouseListener());
            gui.add(imageScroll,BorderLayout.CENTER);

            JToolBar tb = new JToolBar();
            tb.setFloatable(false);
            JButton colorButton = new JButton("Color");
            colorButton.setMnemonic('o');
            colorButton.setToolTipText("Choose a Color");
            ActionListener colorListener = new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    Color c = JColorChooser.showDialog(
                            gui, "Choose a color", color);
                    if (c!=null) {
                        setColor(c);
                    }
                }
            };
            colorButton.addActionListener(colorListener);
            colorButton.setIcon(new ImageIcon(colorSample));
            tb.add(colorButton);

            setColor(color);

            final SpinnerNumberModel strokeModel = 
                    new SpinnerNumberModel(3,1,16,1);
            JSpinner strokeSize = new JSpinner(strokeModel);
            ChangeListener strokeListener = new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent arg0) {
                    Object o = strokeModel.getValue();
                    Integer i = (Integer)o; 
                    stroke = new BasicStroke(
                            i.intValue(),
                            BasicStroke.CAP_ROUND,
                            BasicStroke.JOIN_ROUND,
                            1.7f);
                }
            };
            strokeSize.addChangeListener(strokeListener);
            strokeSize.setMaximumSize(strokeSize.getPreferredSize());
            JLabel strokeLabel = new JLabel("Stroke");
            strokeLabel.setLabelFor(strokeSize);
            strokeLabel.setDisplayedMnemonic('t');
            tb.add(strokeLabel);
            tb.add(strokeSize);

            tb.addSeparator();

            ActionListener clearListener = new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    int result = JOptionPane.OK_OPTION;
                    if (dirty) {
                        result = JOptionPane.showConfirmDialog(
                                gui, "Erase the current painting?");
                    }
                    if (result==JOptionPane.OK_OPTION) {
                        clear(canvasImage);
                    }
                }
            };
            JButton clearButton = new JButton("Clear");
            tb.add(clearButton);
            clearButton.addActionListener(clearListener);

            gui.add(tb, BorderLayout.PAGE_START);

            JToolBar tools = new JToolBar(JToolBar.VERTICAL);
            tools.setFloatable(false);
            JButton crop = new JButton("Crop");
            final JRadioButton select = new JRadioButton("Select", true);
            final JRadioButton draw = new JRadioButton("Draw");
            final JRadioButton text = new JRadioButton("Text");

            tools.add(crop);            
            tools.add(select);          
            tools.add(draw);            
            tools.add(text);

            ButtonGroup bg = new ButtonGroup();
            bg.add(select);
            bg.add(text);
            bg.add(draw);
            ActionListener toolGroupListener = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (ae.getSource()==select) {
                        activeTool = SELECTION_TOOL;
                    } else if (ae.getSource()==draw) {
                        activeTool = DRAW_TOOL;
                    } else if (ae.getSource()==text) {
                        activeTool = TEXT_TOOL;
                    }
                }
            };
            select.addActionListener(toolGroupListener);
            draw.addActionListener(toolGroupListener);
            text.addActionListener(toolGroupListener);

            gui.add(tools, BorderLayout.LINE_END);

            gui.add(output,BorderLayout.PAGE_END);
            clear(colorSample);
            clear(canvasImage);
        }

        return gui;
    }

    /** Clears the entire image area by painting it with the current color. */
    public void clear(BufferedImage bi) {
        Graphics2D g = bi.createGraphics();
        g.setRenderingHints(renderingHints);
        g.setColor(color);
        g.fillRect(0, 0, bi.getWidth(), bi.getHeight());

        g.dispose();
        imageLabel.repaint();
    }

    public void setImage(BufferedImage image) {
        this.originalImage = image;
        int w = image.getWidth();
        int h = image.getHeight();
        canvasImage = new BufferedImage(w,h,BufferedImage.TYPE_INT_ARGB);

        Graphics2D g = this.canvasImage.createGraphics();
        g.setRenderingHints(renderingHints);
        g.drawImage(image, 0, 0, gui);
        g.dispose();

        selection = new Rectangle(0,0,w,h); 
        if (this.imageLabel!=null) {
            imageLabel.setIcon(new ImageIcon(canvasImage));
            this.imageLabel.repaint();
        }
        if (gui!=null) {
            gui.invalidate();
        }
    }

    /** Set the current painting color and refresh any elements needed. */
    public void setColor(Color color) {
        this.color = color;
        clear(colorSample);
    }

    private JMenu getFileMenu(boolean webstart){
        JMenu file = new JMenu("File");
        file.setMnemonic('f');

        JMenuItem newImageItem = new JMenuItem("New");
        newImageItem.setMnemonic('n');
        ActionListener newImage = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                BufferedImage bi = new BufferedImage(
                        360, 300, BufferedImage.TYPE_INT_ARGB);
                clear(bi);
                setImage(bi);
            }
        };
        newImageItem.addActionListener(newImage);
        file.add(newImageItem);

        if (webstart) {
            //TODO Add open/save functionality using JNLP API
        } else {
            //TODO Add save functionality using J2SE API
            file.addSeparator();
            ActionListener openListener = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    if (!dirty) {
                        JFileChooser ch = getFileChooser();
                        int result = ch.showOpenDialog(gui);
                        if (result==JFileChooser.APPROVE_OPTION ) {
                            try {
                                BufferedImage bi = ImageIO.read(
                                        ch.getSelectedFile());
                                setImage(bi);
                            } catch (IOException e) {
                                showError(e);
                                e.printStackTrace();
                            }
                        }
                    } else {
                        // TODO
                        JOptionPane.showMessageDialog(
                                gui, "TODO - prompt save image..");
                    }
                }
            };
            JMenuItem openItem = new JMenuItem("Open");
            openItem.setMnemonic('o');
            openItem.addActionListener(openListener);
            file.add(openItem);

            ActionListener saveListener = new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JFileChooser ch = getFileChooser();
                    int result = ch.showSaveDialog(gui);
                    if (result==JFileChooser.APPROVE_OPTION ) {
                        try {
                            File f = ch.getSelectedFile();
                            ImageIO.write(BasicPaint.this.canvasImage, "png", f);
                            BasicPaint.this.originalImage = BasicPaint.this.canvasImage;
                            dirty = false;
                        } catch (IOException ioe) {
                            showError(ioe);
                            ioe.printStackTrace();
                        }
                    }
                }
            };
            JMenuItem saveItem = new JMenuItem("Save");
            saveItem.addActionListener(saveListener);
            saveItem.setMnemonic('s');
            file.add(saveItem);
        }

        if (canExit()) {
            ActionListener exit = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    // TODO Auto-generated method stub
                    System.exit(0);
                }
            };
            JMenuItem exitItem = new JMenuItem("Exit");
            exitItem.setMnemonic('x');
            file.addSeparator();
            exitItem.addActionListener(exit);
            file.add(exitItem);
        }

        return file;
    }

    private void showError(Throwable t) {
        JOptionPane.showMessageDialog(
                gui, 
                t.getMessage(), 
                t.toString(), 
                JOptionPane.ERROR_MESSAGE);
    }

    JFileChooser chooser = null;

    public JFileChooser getFileChooser() {
        if (chooser==null) {
            chooser = new JFileChooser();
            FileFilter ff = new FileNameExtensionFilter("Image files", ImageIO.getReaderFileSuffixes());
            chooser.setFileFilter(ff);
        }
        return chooser;

    }

    public boolean canExit() {
        boolean canExit = false;
        SecurityManager sm = System.getSecurityManager();
        if (sm==null) {
            canExit = true;
        } else {
            try {
                sm.checkExit(0);
                canExit = true; 
            } catch(Exception stayFalse) {
            }
        }

        return canExit;
    }

    public JMenuBar getMenuBar(boolean webstart){
        JMenuBar mb = new JMenuBar();
        mb.add(this.getFileMenu(webstart));
        return mb;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    // use default
                }
                BasicPaint bp = new BasicPaint();

                JFrame f = new JFrame("DooDoodle!");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.setLocationByPlatform(true);

                f.setContentPane(bp.getGui());
                f.setJMenuBar(bp.getMenuBar(false));

                f.pack();
                f.setMinimumSize(f.getSize());
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }

    public void text(Point point) {
        String text = JOptionPane.showInputDialog(gui, "Text to add", "Text");
        if (text!=null) {
            Graphics2D g = this.canvasImage.createGraphics();
            g.setRenderingHints(renderingHints);
            g.setColor(this.color);
            g.setStroke(stroke);
            int n = 0;
            g.drawString(text,point.x,point.y);
            g.dispose();
            this.imageLabel.repaint();
        }
    }

    public void draw(Point point) {
        Graphics2D g = this.canvasImage.createGraphics();
        g.setRenderingHints(renderingHints);
        g.setColor(this.color);
        g.setStroke(stroke);
        int n = 0;
        g.drawLine(point.x, point.y, point.x+n, point.y+n);
        g.dispose();
        this.imageLabel.repaint();
    }

    class ImageMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent arg0) {
            // TODO Auto-generated method stub
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selectionStart = arg0.getPoint();
            } else if (activeTool==BasicPaint.DRAW_TOOL) {
                // TODO
                draw(arg0.getPoint());
            } else if (activeTool==BasicPaint.TEXT_TOOL) {
                // TODO
                text(arg0.getPoint());
            } else {
                JOptionPane.showMessageDialog(
                        gui, 
                        "Application error.  :(", 
                        "Error!", 
                        JOptionPane.ERROR_MESSAGE);
            }
        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selection = new Rectangle(
                        selectionStart.x,
                        selectionStart.y,
                        arg0.getPoint().x,
                        arg0.getPoint().y);
            }
        }
    }

    class ImageMouseMotionListener implements MouseMotionListener {

        @Override
        public void mouseDragged(MouseEvent arg0) {
            reportPositionAndColor(arg0);
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selection = new Rectangle(
                        selectionStart.x,
                        selectionStart.y,
                        arg0.getPoint().x-selectionStart.x,
                        arg0.getPoint().y-selectionStart.y);
            } else if (activeTool==BasicPaint.DRAW_TOOL) {
                draw(arg0.getPoint());
            }
        }

        @Override
        public void mouseMoved(MouseEvent arg0) {
            reportPositionAndColor(arg0);
        }

    }

    private void reportPositionAndColor(MouseEvent me) {
        String text = "";
        if (activeTool==BasicPaint.SELECTION_TOOL) {
            text += "Selection (X,Y:WxH): " + 
                    (int)selection.getX() +
                    "," +
                    (int)selection.getY() +
                    ":" +
                    (int)selection.getWidth() +
                    "x" +
                    (int)selection.getHeight();
        } else {
            text += "X,Y: " + (me.getPoint().x+1) + "," + (me.getPoint().y+1);
        }
        output.setText(text);
    }
} 
```

这个来源非常不完整。

*   它有很多部分`// TODO`
*   声明了一个`dirty`属性，但从未以任何有意义的方式使用。..

这只是我今天一起破解的东西，并认为应该在它达到发布限制之前显示出来。

哦，不要去寻找任何'OO设计'，因为我没有放入任何东西。如果有的话，那只是偶然的。此代码旨在演示什么是可能的以及如何开始这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T11:06:40.000

您必须将 mouseListener 添加到面板中。这不会像您预期的那样默认发生；-)

```
MainClass1() {
    addMouseListener(this);
} 
```

顺便说一句：不建议公开仅供内部使用的公共 api。因此，不要让面板实现 MouseListener（强制公开曝光），而是让面板创建并使用 MouseListener：

```
private MouseListener mouseListener;
MainClass1() {
   mouseListener = createMouseListener();
   addMouseListener(mouseListener);
}

protected MouseListener createMouseListener() {
    MouseListener l = new MouseListener() {

    }
   return l;
} 
```

BTW 2：在有限区域调用重绘并不是你想要的（？） - 它*暂时*将正方形添加到绘画中，每当重绘整个面板时它们都会丢失（与 getGraphics 的效果相同）。看你真正想要什么，

*   在最近点击的位置绘制一个正方形：调用 repaint()
*   在曾经点击过的所有位置绘制方块：将位置存储在列表中并实施重绘以循环该列表。在这里，您可以使用参数调用重绘，但何必呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T06:12:27.697

请注意您的方法中的错字：

```
public void paintComponent(Graphics g){

    super.paintComponents(g);
    g.setColor(Color.RED);
    g.fillRect(varx, vary, 10, 10);     

} 
```

`paintComponent`您的方法在您调用时命名`super.paintComponents`（复数）。如果你重写一个方法（我强烈建议添加一个`@Override`标签以避免由于拼写错误而实际上你没有重写任何东西）`paintComponent`，请确保调用该`super`方法（相同的方法，而不是另一个方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T03:55:46.977

首先，`PaintClass11`从未使用过...

其次，即使是这样，您也可以创建两个单独的 实例`PaintClass22`，一个放置在框架上，一个尝试更新……因此屏幕上永远不会发生更新。

您不需要两个单独的课程。合并`PaintClass11`到`PaintClass22`一个类中并将其添加到您的框架中

# tridion - 取消本地化组件会破坏历史吗？

> ID：12208576
> 
> 赞同：6
> 
> 时间：2012-08-31T03:37:28.813
> 
> 标签：tridion, tridion-2011

在我们的`030- content Spanish`出版物中，我们对大量组件进行了本地化，并使用了它们的西班牙语内容。后来，这些相同的组件未本地化。

有没有办法从历史中检索西班牙语内容？历史现在显示根组件的历史`020-content`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T06:25:34.800

当您取消本地化组件时，本地版本将被删除。这是一个无法回滚的永久性操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T06:34:46.647

正如弗兰克建议的那样，这是无法回滚的永久性操作。如果您在某处有备份，唯一的选择是使用旧数据库。

您可以在开发/测试 Tridion 上使用旧的数据库备份（如果可用），并且可以使用内容移植器或从一个 Tridion 实例手动复制到另一个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:48:24.387

正如其他人所解释的那样，除了在其他环境或数据库副本中之外，本地化历史已经消失（这就是*模板*本地化变得棘手的原因）。

在交付端，如果您没有重新发布或取消发布，您呈现的组件演示文稿（不完全是您的内容）可能仍位于文件系统上的内容交付服务器上或存储配置（代理数据库）中的配置。

在商业方面，您的作者可能（希望）拥有正确的翻译副本。

考虑培训作者或将本地化和阅读文件夹权限调整给仅负责翻译这些出版物的作者。

# javascript - 使用 jQuery 在单击时向父级添加类

> ID：12208577
> 
> 赞同：4
> 
> 时间：2012-08-31T03:37:29.537
> 
> 标签：javascript, jquery, html, css

我目前有这个，它在 jsFiddle 中工作，虽然它给了我错误，并且当我在小提琴之外使用它时不起作用。

```
$('.down-photo').click(function() {
      $(this).parent('.img-mask').toggleClass('hide');
});​ 
```

Firebug 说：Uncaught SyntaxError: Unexpected Token ILLEGAL

我是 javascript 和 jQuery 的新手，所以我不确定出了什么问题或该错误意味着什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:00:22.110

在您问题的代码中，最后一个分号后有一个非打印字符。它似乎是字符 8203，一个 Unicode 零宽度空格。这就是 Firebug 告诉您的非法令牌。

您会注意到，如果您编辑问题中的文本，如果您将光标放在最后一个分号的左侧，然后按几次向右箭头，则需要多按一次按键才能到达下一行 - 这就是我的意思。

删除该字符，或手动重新键入该行（而不是复制/粘贴），应该没问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T03:48:24.177

我修正了你的错误。`$.appendTo()`接受一个选择器，而不是一个 jquery 对象。试试这个： http: [//jsfiddle.net/dvCmR/133/](http://jsfiddle.net/dvCmR/133/) （第4行）

# c++ - 删除与之相关的类时将字符串值设置为无

> ID：12208582
> 
> 赞同：-1
> 
> 时间：2012-08-31T03:37:54.957
> 
> 标签：c++, oop, class, vector, iterator

我需要一些我认为很简单的帮助。我可以将学生分配给一个项目。但是当我删除项目时，学生仍然保留项目名称。我正在考虑将其重命名为“无”，但我不知道该怎么做。帮助？

**编辑** `map<int, Student> mstore`并`vector<int> storeid`添加。

```
#include <iostream>
#include <string>
#include <vector>
#include <cstdlib>
#include <map>
using namespace std;
class Human {
public:
    virtual void print() const = 0;
};

class Student : public Human {
protected:
    string studname;
    int studId;
    string project;
public:

    Student();
    Student (string studname, int studId) : studname("Unknown"), studId(0), project("None") 
    {
        cout << "A student is created: Name = " << studname
         << ". Id = " << studId << endl;
    }

    virtual void print() const {
    cout << "Name = " << studname << ". Id = " << studId << ". Project = " << project <<endl; }

    void setSName (string sname) { studname = sname; }
    void setSID (int sID) { studId = sID; }
    void printStudentInfo() const;
    void printStudentInfoline() const;
};

void Student::printStudentInfo() const
{
    cout << "\nStudent name: " << studname << endl;
    cout << "Student ID: " << studId << endl;
    cout << "Project: " << project << endl;
}

void Student::printStudentInfoline() const
{
    cout << studId << ", " << studname << ", " << project << endl;
}

class Project {
protected:
    string projname;

public:
    vector <Student> students;
    vector <int> storeid;

    Project (string projname) : projname(projname) { cout << "Project " << projname << " created" << endl;}

    void setPName (string projname) { this->projname = projname; }

    void add (int& sid) 
    {
        //student.setProject (projname);
        storeid.push_back(sid);
    }

    int returnid(int& a)
    {   
        return storeid[a]; 
    }

    int returnsize()
    {   return storeid.size(); }

    void printproj() const {
        cout << endl << projname << " list: \n";
        cout << "Student(s) : " << endl;
        for (int i = 0; i < storeid.size(); i++){
            cout << storeid[i] << endl;
        }
    }

    void printprojname() const {
    cout << projname << endl;
    }

};

int main() {
string StudentName;
string ProjectName;

int Studentid;

Student *s1;
Project *p1;

vector<Student> store;
vector<Project> projstore;
map<int, Student> mstore;

map<int, Student>::const_iterator itr;
    for (int n=0; n<3; n++) //loop to create 3 students
   { 
    cout <<"Enter name : ";
    getline(cin, StudentName);
    cout <<"Enter  ID : ";
    cin >> Studentid;

    s1 = new Student(StudentName, Studentid);
    s1->setSName(StudentName);
    s1->setSID(Studentid);
    store.push_back(*s1);
    mstore.insert(make_pair(Studentid, *s1));
    cin.get();
    }
    //print map
    for(itr=mstore.begin(); itr!=mstore.end() ;++itr)
    itr->second.printStudentInfo();

    //itr=mstore.begin()+2;
    //itr.print();

cout << "Enter project name: ";
getline(cin, ProjectName);

p1 = new Project(ProjectName);
p1->setPName(ProjectName);

 //Assigning student to project
    cout << endl;
    cout << "How many students? :" ;

    int y;
    cin >> y;
    for ( int i = 0; i < y; i++){
    cout << "Who would you like to add to this project?" << endl;
    int x = 1;

    for(itr=mstore.begin(); itr!=mstore.end() ;++itr)
    itr->second.printStudentInfoline();

    int insID;
    cout << "Enter ID number: ";
    cin >> insID;
    p1->add(insID);

    /*
    for ( it = store.begin(); it != store.end(); ++it ) {
        // For each friend, print out their info

    cout << x << ". ";
          it->printStudentInfoline();
    x++;

    }
    x = 1;  
    int insS;
    cout << "Enter number: ";
    cin >> insS;
    p1->add(store[(insS-1)]);   //stores selected student into the object
    */

    cout << "\nAdding Student done\n" << endl;
    }
    projstore.push_back(*p1);

    //Mstore finds for related ids and displays them accordingly
cout << "print project"<< endl;
    vector<Project>::iterator pt;
    for ( pt = projstore.begin(); pt != projstore.end(); ++pt ) {
        pt->returnsize();
        for (int i=0; i <pt->returnsize(); i++){
        cout << pt->returnid(i) << endl;

        itr=mstore.find(pt->returnid(i));

        itr->second.printStudentInfo();
        }            
    }

    cout << endl;
    cout << "Deleting project" << endl;
    cout << "What would you like to remove?" << endl;
    int x = 1;

    //storeid will display ids. How do I link them to `store` map?
    for ( pt = projstore.begin(); pt != projstore.end(); ++pt ) {
      cout << x << ". ";
      pt->printprojname();
      x++;
    }

    //Now to delete the selected project
    int delP;
    cout << "Enter number: ";
    cin >> delP;
    cin.ignore();
    system("pause");
    projstore.erase(projstore.begin()+delP-1);

// Students

cout << "\n Current students" << endl;
for(itr=mstore.begin(); itr!=mstore.end() ;++itr)
    itr->second.printStudentInfo();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:57:44.550

查看如何将学生添加到项目中：

```
void add (Student& student)
{
  student.setProject (projname);
  students.push_back (student);    // <-- AHA!
} 
```

首先将项目名称分配给学生，然后项目存储学生**的副本**。此后，Project 与原来的 Student 没有联系，也无法在时机成熟时通知他/她自己的消亡。

您将不得不重新考虑这种设计；有三个主要选项：1）学生可以在商店中查找他们各自的项目，2）项目可以在向量中查找其学生`students`，或 3）项目拥有学生（在这种情况下，他们可能应该是研究生）。

**编辑：**
如果这是您想要的方式，请`map<int, Student> store`使用 ID 号作为索引来存储学生。然后一个项目可以有一个`vector<int>`（或`set<int>`）个学生证号码。它可以轻松地在商店中查找学生。

**编辑：**
要打印出整个学生集合：

```
for(map<int, Student>::const_iterator itr=store.begin(); itr!=store.end() ;++itr)
  itr->second.print(); 
```

**编辑：**
如果项目有一个`vector<int>`学生证号码，那么你认为`Project::add(?)`应该采取什么论据？

**编辑：**
该项目可以通过学生 ID 号和访问权限对学生进行操作`mstore`：

```
// in Project:
mstore[id].whatever() 
```

**编辑：**
有时提出正确的问题——或者在这种情况下，正确地表达问题——是成功的一半。*'现在如何将“无”更改为插入的项目名称？*一个更好的说法是*“该项目如何将其学生的一个`project`从“无”更改为`projname`？*一旦你这样说，答案几乎是显而易见的：

```
// in Project:
mstore[id].setSProject(projname); 
```

请注意，`Student`还没有`setSProject(string)`，您必须添加它。另外，请注意，此解决方案并不理想，因为 1) 任何人都可以更改 Student's `project`，以及 2) Student's`project`实际上不必是真实项目的名称。处理这些问题的方法不止一种。

# objective-c - Objective-C：实践中的通用指针

> ID：12208584
> 
> 赞同：0
> 
> 时间：2012-08-31T03:38:30.623
> 
> 标签：objective-c, ios, cocoa-touch

合十！有经验的人在日常生活中多久使用一次通用指针？在可可触控开发中通用指针的共同目的是什么？

编辑

> 声明为指向 void 的指针的变量是通用指针。

有这种事。它可以设置为任何变量类型的地址。我只是想知道人们在现实生活中是如何使用这种指针的。

PS感谢您的投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:11:41.793

`void*`在 ObjC 中合适的情况越来越少。它们仍然用于某些东西，例如 KVO 的上下文指针，但是随着 ARC 的添加，即使这样使用它们也很痛苦。基本上，如果您需要询问何时使用 a `void*`，您可能不应该使用 a `void*`。它们在 Core 框架的回调中更为常见，同样通常用于上下文指针。

但是对于“你`void*`在日常生活中……[使用]……的频率”这个问题，答案是“很少，并且尽可能少”。

# cocos2d-iphone - Cocos2d CCSPrite 维度问题

> ID：12208588
> 
> 赞同：0
> 
> 时间：2012-08-31T03:39:21.300
> 
> 标签：cocos2d-iphone

```
self.background = [CCSprite spriteWithFile:@"LetterBrick.png"];
    CCLOG(@"background contentSize: (w: %d, h: %d)", self.background.contentSize.width, self.background.contentSize.height);
    CCLOG(@"background boundingBox: (x: %d, y: %d, w: %d, h: %d)", self.background.boundingBox.origin.x, self.background.boundingBox.origin.y, self.background.boundingBox.size.width, self.background.boundingBox.size.height);

    /**
     OUTPUT:
        background contentSize: (w: 0, h: 1078984704)
        background boundingBox: (x: 0, y: -1069547520, w: 0, h: -1069547520)
     */ 
```

所以基本上我只是从一个文件中创建一个 CCSprite，然后打印出 contentsize 和边界框。但这些值似乎有点奇怪。

你能帮我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:09:40.543

打印出来时使用浮点数而不是整数

# linker - CC 未链接 libCrun.so.1

> ID：12208591
> 
> 赞同：0
> 
> 时间：2012-08-31T03:39:58.007
> 
> 标签：linker, solaris, acc

当我在我的机器上编译和链接一个 .so 文件时，它可以工作。当我尝试将文件分发给某人时，他们遇到了错误。

更具体地说，我正在建立：

```
-bash-3.00# uname -a
SunOS bob 5.10 Generic_127127-11 sun4u sparc SUNW,Sun-Blade-1000
-bash-3.00# CC -V
CC: Sun C++ 5.9 SunOS_sparc Patch 124863-01 2007/07/25 
```

在 makefile 中，我使用了这些标志：

```
CFLAGS=-m64 -library=stlport4 -KPIC
LDFLAGS=-m64 -L/usr/lib/sparcv9 -lCrun -library=stlport4 -G 
```

我的机器上没有看到任何错误，但正在报告此错误

```
ld.so.1: batch: fatal: relocation error: file lqtbatch: symbol __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___2G6Mpkc_r1_: referenced symbol not found 
```

追查原因有点困难，但我看到了一些不同之处。在我的机器上， ldd -r 批处理：

```
ldd -r batch 
    libstlport.so.1 =>       /opt/SUNWspro/lib/stlport4/v9/libstlport.so.1
    librt.so.1 =>    /lib/sparcv9/librt.so.1
    libCrun.so.1 =>  /opt/SUNWspro/prod/lib/stlport4/v9/../../../usr/lib/v9/libCrun.so.1
    libm.so.1 =>     /lib/64/libm.so.1
    libc.so.1 =>     /lib/64/libc.so.1
    libaio.so.1 =>   /lib/64/libaio.so.1
    libmd.so.1 =>    /lib/64/libmd.so.1
    /platform/SUNW,Sun-Blade-1000/lib/sparcv9/libc_psr.so.1
    libm.so.2 =>     /lib/64/libm.so.2
    /platform/SUNW,Sun-Blade-1000/lib/sparcv9/libmd_psr.so.1 
```

其他人在 ldd -r 命令上看到了这个

```
libstlport.so.1 =>   /opt/SUNWspro/lib/stlport4/v9/libstlport.so.1
librt.so.1 =>    /lib/sparcv9/librt.so.1
libm.so.1 =>     /lib/64/libm.so.1
libc.so.1 =>     /lib/64/libc.so.1
libaio.so.1 =>   /lib/64/libaio.so.1
libmd.so.1 =>    /lib/64/libmd.so.1
symbol not found: __1cG__CrunKpure_error6F_v_       (./liblqtcr.so)
symbol not found: __1cG__CrunKpure_error6F_v_       (./liblqtcr.so)
...many of these...
symbol not found: __1cG__CrunKpure_error6F_v_       (./liblqtcr.so)
/platform/SUNW,SPARC-Enterprise-T2000/lib/sparcv9/libc_psr.so.1
symbol not found: __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___2G6Mpkc_r1_        (./liblqtcr.so)
symbol not found: __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___Gsubstr6kMLL_1_        (./liblqtcr.so)
libm.so.2 =>     /lib/64/libm.so.2
symbol not found: __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___2G6Mrk1_r1_        (./liblqtcr.so)
symbol not found: __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___Hreplace6MLLrk1_r1_        (./liblqtcr.so)
symbol not found: __1cDstdK_M_put_num4Ccn0ALchar_traits4Cc__Cb_6Frn0ANbasic_ostream3CTACTB__TC_4_       (./liblqtcr.so)
symbol not found: __1cDstdMbasic_string4Ccn0ALchar_traits4Cc__n0AJallocator4Cc___Gassign6MpkcL_r1_      (./liblqtcr.so)
/platform/SUNW,SPARC-Enterprise-T2000/lib/sparcv9/libmd_psr.so.1 
```

我的假设是我错误地链接了导致这些错误并导致其他机器上的错误的 libCrun.so.1。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:39:46.817

> `LDFLAGS=-m64 -L/usr/lib/sparcv9 -lCrun ...`

您应该从您的-- SunStudio 中删除`-L/usr/lib/sparcv9`和，它会自行正确添加它们。`-lCrun``LDFLAGS`

> 我的假设是我错误地链接了 libCrun.so.1

不：您正在正确链接它。问题是问题机器`libCrun.so.1`上（显然）根本没有安装。该库应该默认安装——没有`C++`它，任何应用程序都不会正常运行。您应该找出软件包`libCrun.so.1`属于什么，并要求您的客户/客户安装它。

# iphone - 目标日期后 2 天前的 NSNotification

> ID：12208595
> 
> 赞同：0
> 
> 时间：2012-08-31T03:40:47.240
> 
> 标签：iphone, objective-c, ios, xcode

我想在目标日期后 2 天之前触发通知。目前我正在使用下面的代码来触发通知，但是如何在目标日期后 2 天之前触发通知。

```
 NSString *frstdate = [[calenderarray objectAtIndex:k] objectForKey:@"date"];
    NSLog(@"frstdate..%@",frstdate);
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd"];
    NSDate *date = [dateFormat dateFromString:frstdate]; 
    NSLog(@"date..%@",date);
    NSDate *dateToFire = [[[NSDate alloc] initWithTimeInterval:-24*60*60 sinceDate:date]autorelease];
     NSLog(@"dateToFire..%@",dateToFire);
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil)
         return;
    localNotif.fireDate = itemDate;
    localNotif.alertAction = @"View";
    localNotif.soundName = UILocalNotificationDefaultSoundName;
     localNotif.applicationIconBadgeNumber = 1;
     localNotif.userInfo = [NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"Get Food"], @"foodItem", nil] ;
   [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    [localNotif release];

    Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:46:53.483

你应该使用 NSCalendar 和 NSDateComponents 来做数学 - 比如：

```
NSCalendar* calendar = [NSCalendar currentCalendar];
NSDateComponents* twoDaysAgo = [[NSDateComponents alloc] init];
twoDaysAgo.day = -2;
NSDate* dateToFire = [calendar dateByAddingComponents:twoDaysAgo toDate:date options:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:06:03.903

您可以通过 NSCalendar 类对日历日期（给定时区中的年/月/日/小时...表示）进行算术运算。尽管在大多数情况下，“24*60*60”秒是一天——用户可能不会注意到差异。

# css - Webkit浏览器中列表编号和项目符号的CSS ::选择自定义颜色？

> ID：12208598
> 
> 赞同：11
> 
> 时间：2012-08-31T03:41:02.787
> 
> 标签：css, webkit, selection, highlight

我使用 CSS ::selection 规则在我的网站上使用自定义突出显示颜色，但注意到在 Webkit 浏览器中，选择颜色并不完全适用于所有内容。

这是一个显示我的意思的小提琴，以编号列表为例：http: [//jsfiddle.net/ufGmP/](http://jsfiddle.net/ufGmP/)

如果您在 Chrome 或 Safari 中突出显示文本，则会在项目符号周围看到默认的蓝色突出显示颜色。我在使用 ::selection 覆盖默认颜色时发现的每个站点上都注意到了这个问题；例如，在[http://www.smashingmagazine.com/](http://www.smashingmagazine.com/)上，如果突出显示故事的整个标题，则可以看到默认选择颜色。

有人知道解决这个问题的方法吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T04:26:09.063

这是一个自 2010 年以来一直存在的错误，[https://bugs.webkit.org/show_bug.cgi?id=38943](https://bugs.webkit.org/show_bug.cgi?id=38943)。

许多元素未能突出显示，这是一个小提琴，[http://jsfiddle.net/AULsp](http://jsfiddle.net/AULsp)。

**HTML**

```
<input type="text" value="This doesn't get highlighed." />
<textarea>This doesn't get highlighed either.</textarea>
<p>This does get highlighted.</p>
<ul>
    <li>The bullets however, don't.</li>
    <li>This bullet concurs.</li>
</ul>

<ol>
    <li>And so does this one.</li>
    <li>And finally, this one.</li>
</ol>
    ​ 
```

**CSS**

```
body {
    padding:40px;            
}

::-moz-selection{
    background: #900;
    color: #fff;
}

::selection {
    background: #900;
    color: #fff;
    text-shadow: none;
}
input, textarea, ul, ol, p {
    display:block;            
    width:200px;
    margin: 0 0 15px;
}

ul {
    list-style:disc;       
}

ol {
    list-style:decimal;
} 
```

WebKit 似乎还突出了允许 ::selection 的元素上的元素填充和边距，这取决于您的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:10:01.733

为什么不使用图像作为项目符号，而不是默认项目符号？就像是...

```
list-style:none;
padding-left:20px;
background:url(something.gif) 0 50% no-repeat 
```

# c# - 页面重定向期间出错 (asp.net)

> ID：12208599
> 
> 赞同：0
> 
> 时间：2012-08-31T03:41:08.990
> 
> 标签：c#, asp.net

当我尝试使用下面的代码根据角色进行页面重定向时，不知何故它给了我一个错误，说“当前上下文中不存在名称'角色'”。我不知道我的编码有什么问题。请帮忙。谢谢。

```
protected void Login1_LoggedIn(object sender, EventArgs e)
{
    {
        if (Roles.IsUserInRole(Login1.UserName, "Aemy"))
            Response.Redirect("~/Admin/Home.aspx");
        else if (Roles.IsUserInRole(Login1.UserName, "User"))
            Response.Redirect("~/Welcome/User1.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:45:14.947

您是否缺少该文件中 System.Web.Security 的 using 语句？我在这里假设您在编译时收到错误。

为清楚起见进行了编辑：这里的问题是，您何时收到此错误？如果您在尝试编译项目时遇到此错误，则意味着它无法将“角色”解析为 System.Web.Security 命名空间的成员，这可能意味着您缺少“使用 System.Web文件顶部附近的“.Security”声明。如果您在运行时有人尝试登录时收到此错误，那么您遇到了一个更奇怪的异常。

# c# - 按包含的实体过滤

> ID：12208602
> 
> 赞同：1
> 
> 时间：2012-08-31T03:41:27.603
> 
> 标签：c#, .net, linq

我面临的错误是

> 委托 'System.Func< MyWebSiteApp.Models.FontCategory,int,bool >' 不接受 1 个参数

```
var s = db.FontCategories.Include("Fonts").
                Where(s=>s.Fonts.Where(s=>s.Inactive == false).ToList(); 
```

任何clu如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:43:17.550

我想你在 Linq *Any*之后。这将返回至少包含一种活动字体的字体类别：

```
var s = db.FontCategories.Include("Fonts").
    .Where(s => s.Fonts.Any(s => s.Inactive == false)).ToList(); 
```

您现有代码的问题是*Where*需要一个`Predicate<FontCategory>`类型（即，返回 true/false 的 lambda），但您的 lambda`IEnumerable<Font>`反而返回。因此错误。

从[Any 的文档中](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any%28v=vs.100%29.aspx)：

> 确定序列的任何元素是否存在或是否满足条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:47:17.910

你错过了 parentesis 一个 where 子句接受一个接受一个 T 并返回一个布尔值的函数。表达式应该是 s=>s.somethingBool

```
var fontCandidates = db.FontCategories.Include("Fonts").SelectMany(s => s.Fonts);
var activeFonts = fontCandidates.Where(f => !f.Inactive).ToList(); 
```

# php - 选择自动递增的表的列名

> ID：12208605
> 
> 赞同：-1
> 
> 时间：2012-08-31T03:41:50.977
> 
> 标签：php, mysql, sql

如何获取自动递增的表的列名？

我有一个代码可以拿到我所有的桌子

我想选择他们的每个自动增量列。

```
 $tables = $this->sql("SHOW TABLES");

   foreach($tables as $tb)
   {

       //here i waant to select the  auto increment of the table
   } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:48:03.650

使用`mysqli_fetch_fields()`它给出了关于表字段的属性数组。调用此数组中的一个字段，`FLAGS`它表示已为该字段设置的各种标志，例如 PRIMARY_KEY、UNIQUE_KEY、AUTO_INCREMENT_FLAG 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:45:39.987

试试这样的，

```
SELECT * 
FROM   COLUMNS 
WHERE  TABLE_SCHEMA = 'yourschema'  AND 
       EXTRA = 'auto_increment' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:51:06.017

要获取表中的列名列表，请运行以下 Mysql 查询：`SHOW COLUMNS $tablename`. 一定要自己尝试这个无害且内容丰富的声明，看看它会返回什么。有关此查询实际执行的更多信息，请参阅：[http ://dev.mysql.com/doc/refman/5.0/en/show-columns.htm](http://dev.mysql.com/doc/refman/5.0/en/show-columns.htm)

*如果*是主键，返回的查询结果中的“Key”列将包含“PRI”值。

确保`$tablename`是一个真实的表 -*绝对不要接受用户输入*这个值，因为这将是一个*严重*的安全风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T03:46:56.573

你可以使用这样的东西

```
$tables = $this->sql("SHOW TABLES");

foreach($tables as $tb)
{

  $result = mysqli_query("SHOW COLUMNS FROM ".$tb);
  if (!$result) {
     echo 'Could not run query: ' . mysql_error();
     exit;
   }
   if (mysqli_num_rows($result) > 0) {
     $autoincrement_field = array();
     while ($row = mysql_fetch_assoc($result)) {
     if($row['Extra'] === "auto_increment"){
        $autoincrement_field[] = aray($tb => $row['field']);
     }
   }
  }
} 
```

哪个给出你想要的输出..

有关更多信息，请查看[链接](http://php.net/manual/en/function.mysql-list-fields.php)

# content-management-system - 使内容作者能够在 Expression Engine 中添加带标题的图像的最佳方法是什么

> ID：12208606
> 
> 赞同：1
> 
> 时间：2012-08-31T03:41:51.570
> 
> 标签：content-management-system, ckeditor, expressionengine

在 Drupal 领域有一个模块可以做到这一点，但我对 Wygwam 中必要的 hack 感到沮丧。以不需要完全覆盖 ChannelImages/Wygwam 中的默认图像处理的方式来实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:30:36.063

资产是一个很好的建议，但我相信 Devdemon 的频道图像可能更适合您建议的工作流程。 [http://www.devdemon.com/channel_images/](http://www.devdemon.com/channel_images/)

客户可以添加（和查看）标题等等，它与 Wygwam 和其他编辑器完全集成。Devdemon 的支持也很出色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:44:35.503

我通常使用矩阵，其中一列用于图像，一列用于标题，如果需要链接，则使用另一列作为链接​​。如果图像位于模板中的固定位置，这当然效果最好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T21:08:40.217

实现这一点的可能方法是运行一些 jQuery 来查找特定区域内的图像，如果它们具有 alt 属性，则在带有标签的标签内重写图像标签。

所以：

```
jQuery(document).ready(function() {
$('#page-content > .wrapper img').each(function(){
    if($(this).attr('alt') !== undefined && $(this).attr('alt').length > 0){
        if(!$(this).parent().hasClass('content-image')){
            $(this).replaceWith("<figure class='content-image "+$(this).attr('class')+"'>"+$($('<div></div>').html($(this).clone().attr('class',''))).html()+"<figcaption>"+$(this).attr('alt')+"</figcaption></figure>");
        }
    }
});
}); 
```

会这样做。它在 #page-content div 中查找具有 alt 属性的 img 标签。然后将其重写为

```
<figure><img src='....' .... /><figcaption>This is the text that was in the alt attribute</figcaption></figure> 
```

Soooo，这有点工作。唯一需要注意的是，您最好不要在 alt 文本中使用任何双引号，否则会破坏 thangs。尽管如此，这不是最干净的解决方案，而是一个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T00:28:14.467

Pixel & Tonic 的资产模块允许您双击图像（或任何其他文件）并添加元数据。然后，您可以访问模板中的元数据。

检查截图： http: [//pixelandtonic.com/assets](http://pixelandtonic.com/assets)

您还可以使用本机文件管理器添加元数据。单击文件管理器中的编辑图标，您将看到一些字段。您可以使用文件条目标签来访问它。

[http://expressionengine.com/user_guide/modules/file/file_tag.html](http://expressionengine.com/user_guide/modules/file/file_tag.html)

# f# - 如何从 F# 调用此本机函数？(LLVMCreateJITCompilerForModule)

> ID：12208609
> 
> 赞同：1
> 
> 时间：2012-08-31T03:42:15.060
> 
> 标签：f#, llvm, dllimport, llvm-c++-api, llvm-fs

我正在使用[llvm-fs](https://github.com/keithshep/llvm-fs/)绑定，我想调用的一种方法是 LLVM C api 中[`createJITCompilerForModule`](https://github.com/keithshep/llvm-fs/blob/master/src/LLVM/Generated.fs#L5037)本机方法的外部方法。[`LLVMCreateJITCompilerForModule`](http://llvm.org/docs/doxygen/html/ExecutionEngineBindings_8cpp_source.html#l00118)llvm-fs 的作者表示他不能在 F# 中制作这个函数调用的“好”版本：

[`createJITCompilerForModule in llvm-fs:Generated.fs`](https://github.com/keithshep/llvm-fs/blob/master/src/LLVM/Generated.fs#L5037)：

```
[<DllImport(
    "LLVM-3.1.dll",
    EntryPoint="LLVMCreateJITCompilerForModule",
    CallingConvention=CallingConvention.Cdecl,
    CharSet=CharSet.Ansi)>]
extern bool createJITCompilerForModuleNative(
    void* (* LLVMExecutionEngineRef* *) OutJIT,
    void* (* LLVMModuleRef *) M,
    uint32 OptLevel,
    void* OutError)
// I don't know how to generate an "F# friendly" version of LLVMCreateJITCompilerForModule 
```

**你知道我会如何从 F# 调用这个函数，甚至是原生函数的作用吗？**看起来它有一个“输出参数” `OutJIT`（因为本机代码重新分配了`void*`指向的东西）。这是本机功能：

[`LLVMCreateJITCompilerForModule in llvm-c:ExecutionEngineBindings.cpp`](http://llvm.org/docs/doxygen/html/ExecutionEngineBindings_8cpp_source.html#l00118)：

```
LLVMBool LLVMCreateJITCompilerForModule(LLVMExecutionEngineRef *OutJIT,
                                        LLVMModuleRef M,
                                        unsigned OptLevel,
                                        char **OutError) {
    std::string Error;
    EngineBuilder builder(unwrap(M));
    builder.setEngineKind(EngineKind::JIT)
           .setErrorStr(&Error)
           .setOptLevel((CodeGenOpt::Level)OptLevel);
    if (ExecutionEngine *JIT = builder.create()) {
        *OutJIT = wrap(JIT);
        return 0;
    }
    *OutError = strdup(Error.c_str());
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:43:40.543

我想使用的实际功能是一种特殊的手工制作，因为它无法生成。我把它放在这里作为如何调用它的示例：

[`llvm-fs:ExecutionEngine.fs`](https://github.com/keithshep/llvm-fs/blob/master/src/LLVM/ExecutionEngine.fs#L17)

```
let private createEngineForModuleFromNativeFunc
        (nativeFunc : (nativeint * nativeint * nativeint) -> bool)
        (moduleRef : ModuleRef) =

    use outEnginePtr = new NativePtrs([|0n|])
    use outErrPtr = new NativePtrs([|0n|])
    let createFailed =
            nativeFunc (
                outEnginePtr.Ptrs,
                moduleRef.Ptr,
                outErrPtr.Ptrs)
    if createFailed then
        let errStr = Marshal.PtrToStringAuto (Marshal.ReadIntPtr outErrPtr.Ptrs)
        Marshal.FreeHGlobal (Marshal.ReadIntPtr outErrPtr.Ptrs)
        failwith errStr
    else
        ExecutionEngineRef (Marshal.ReadIntPtr outEnginePtr.Ptrs)

let createJITCompilerForModule (modRef : ModuleRef) (optLvl : uint32) =
    let f (engPtr, modPtr, outErrPtr) =
        createJITCompilerForModuleNative (engPtr, modPtr, optLvl, outErrPtr)

    createEngineForModuleFromNativeFunc f modRef 
```

# c++ - boost::split 返回 sep 字符

> ID：12208616
> 
> 赞同：0
> 
> 时间：2012-08-31T03:43:20.703
> 
> 标签：c++, string, algorithm, boost, split

我正在使用`boost::split(lines, str, boost::is_any_of(delims));`现在我想知道在每个拆分中找到了哪个 delim 字符。我会把那个字符放在分割线的末尾。这样我就可以重新创建原始字符串。我已经搜索但在`boost::split`我需要使用任何其他功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:16:30.250

mb`boost::tokenizer`与`boost::char_separator`？

[http://www.boost.org/doc/libs/1_51_0/libs/tokenizer/char_separator.htm](http://www.boost.org/doc/libs/1_51_0/libs/tokenizer/char_separator.htm)

例子。

```
#include <iostream>
#include <string>
#include <boost/tokenizer.hpp>

int main()
{
   std::string str = "hello, and what do. you? want";
   typedef boost::tokenizer<boost::char_separator<char> > tokenizer;
   boost::char_separator<char> sep("", " ,.?");
   tokenizer tokens(str, sep);
   for (tokenizer::iterator pos = tokens.begin(); pos != tokens.end(); ++pos)
   {
      std::cout << *pos << std::endl;
   }
} 
```

[http://liveworkspace.org/code/8dca20ecaa017000dd67096fc5d20aeb](http://liveworkspace.org/code/8dca20ecaa017000dd67096fc5d20aeb)

# c++ - 为 STL 容器传递模板化迭代器

> ID：12208618
> 
> 赞同：5
> 
> 时间：2012-08-31T03:44:33.200
> 
> 标签：c++, templates, stl, iterator

对于我的 C++ 类（尚未涵盖 Boost）的练习，我无法编写模板化方法来接受两个迭代器来对 STL 容器中的数值求和。
考虑以下示例：

```
#include <iostream>
#include <iterator>
#include <vector>

template<typename T>
double Sum(const T & c) {
    return 42.0;    // implementation stubbed
}

// need help writing this method signature to accept two iterators
template<typename T>
double Sum(const typename T::const_iterator & begin,
           const typename T::const_iterator & end) {
    return 43.0;    // another implementation stub
}

int main() {
    std::vector<double> v;
    v.push_back(3.14);
    v.push_back(2.71);
    v.push_back(1.61);    // sums to 7.46

    std::cout << Sum(v) << ' '              // line 23
              << Sum(v.begin(), v.end())    // line 24
              << '\n';
} 
```

我希望此代码能够输出`42 43`，但无法编译。
g++ 给我的错误是：

```
test_exercise2.cpp: In function ‘int main()’:
test_exercise2.cpp:24: error: no matching function for call to ‘Sum(__gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >, __gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >)’ 
```

如果我注释掉第 24 行，我会得到`42`预期的输出。
无论是否存在第二个模板化方法，我都会收到相同的错误消息，因此由于某种原因，它无法将第 24 行的调用解析为我编写的第二种方法。

**对于接受两个迭代器的方法，我必须有什么签名？**

* * *

我之所以坚持这一点是因为我需要支持对`std::map<K, V>`. 这将需要另外两个重载来调用`->second`而不是取消引用迭代器：
1\. `template<typename K, typename V> double Sum(const std::map<K, V> & m);`（我可以接受这个）
2.另一个涉及地图上的迭代器。

`std::map`如果我能弄清楚如何为`std::list`and指定迭代器的传递，我觉得我将能够编写方法`std::map`。我可以接受使用模板模板的解决方案。

* * *

编辑：问题的准确措辞（省略非贡献的句子）。
“上一个练习”中的容器是`std::vector<double>`, `std::list<double>`, `std::map<std::string, double>`.

> 创建一个名为 Sum() 的模板函数，它接受模板参数 T 作为输入并返回一个双精度值。模板参数将是一个容器。
> 
> *   在实现中，最后得到一个迭代器（T::const_iterator）。然后创建一个循环来迭代容器 T 并添加所有值。最后返回总和。
> *   在主程序中，为与上一个练习不同的容器调用 Sum() 函数。
> 
> 创建的 Sum() 函数计算整个容器的总和。还要创建一个 Sum() 函数来计算两个迭代器之间的总和。然后该函数使用迭代器类型的模板参数并接受两个迭代器，即开始迭代器和结束迭代器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:47:02.473

你把这件事复杂化了。你想要一对任何类型的迭代器吗？好吧，这就像......任何类型的两个参数一样简单。

```
template<typename Iterator>
double Sum(const Iterator& begin,
           const Iterator& end) {
    return 43.0;    // another implementation stub
} 
```

问题解决了。

顺便说一句，从 C++ 标准库中得到一个提示：如果您无法取消引用迭代器，请让用户提供一个函数来从迭代器中获取值。不要特殊情况`std::map`，因为明天还有后天，还有`std::unordered_map`各种各样`boost::multimap`的乐趣。如果我想让你对 中的*键*而`std::map`不是值求和怎么办？

您的硬编码案例有点复杂。一对必须来自的迭代器`std::map`？如果没有明确的模板参数，甚至不确定是否可能。

```
template<typename K, typename V, typename Comp, typename Alloc>
double Sum(
    const std::map<K, V, Comp, Alloc>& map
) { ... } 
```

请注意，我特别说过它必须是`std::map`实例化。这允许编译器推断参数。从这里，您可以访问迭代器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T03:58:46.463

正如 DeadMG 所说，简单的方法是在迭代器的类型上进行模板化。另一方面，常见的约定是按值传递迭代器：

```
template <typename Iterator>
double Sum( Iterator begin, Iterator end ); 
```

至于为什么原始代码不起作用，问题是容器的类型不可推断：

```
template <typename T>
double Sum( T::const_iterator begin, T::const_iterator end );
Sum( v.begin(), v.end() );        // [*] Assume v == const std::vector<double>& 
```

当编译器试图推断参数的类型时，`Sum`它只会看到 and 返回的类型`v.begin()`，`v.end()`它们是*迭代器*。从该类型中，它无法*猜测*容器的类型。为了能够确定类型`T`是什么，它必须测试所有非模板类型，并生成模板类型的所有无限可能实例，以查看它们是否具有与and`const_iterator`的类型匹配的嵌套类型。因为那是不可能的，所以语言一开始就禁止它。`v.begin()``v.end()`

除此之外，与注释^([*])相关，即使类型是可推导的，重载决议也会在函数的参数上执行，而不是表达式稍后如何使用。在您的程序中， to 的参数`.begin()`是一个`std::vector<double>`非常量*左值*。因为它不是 const，所以选择的重载会产生一个非常量迭代器（即使在你要调用的函数中，也不需要读取它）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T04:30:40.163

`std::list`将迭代器 from eg与 iterators from进行对比时的显着特征`std::map`是后者有一个 pair 类型作为它们的`value_type`. 也就是说，给定`std::map<K, V>`then`std::map<K, V>::value_type`和`std::iterator_traits<std::map<K, V>::iterator>::value_type`are `std::pair<const K, V>`。

因此，我建议您的`Sum`模板接受任何迭代器，但它不在迭代器（即`*it`）给出的元素上运行，而是在 'view': 上运行`element(*it)`。现在，您可以注意确保`element`在面对一对时“做正确的事”。

作为提示，您可以声明`Sum`如下（使用一些元编程来正确获取返回类型）：

```
namespace result_of {

// Second template parameter is an implementation detail
template<
    typename Iterator
    , typename ValueType = typename std::iterator_traits<Iterator>::value_type
>
struct Sum {
    // general case: sum over the value type directly
    typedef ValueType type;
};

// If an iterator admits an std::pair as its value_type then we end up here
template<typename Iterator, typename Key, typename Value>
struct Sum<Iterator, std::pair<Key, Value> > {
    // special case: sum over the second type of the value
    typedef Value type;
};

} // result_of

template<typename Iterator>
typename result_of::Sum<Iterator>::type Sum(Iterator begin, Iterator end); 
```

# android - 缓冲区对于像素来说不够大

> ID：12208619
> 
> 赞同：4
> 
> 时间：2012-08-31T03:44:42.690
> 
> 标签：android, canvas, bitmap

我得到的错误是我的缓冲区对于像素来说不够大。有什么建议吗？Bitmap b 应该与我试图将其像素放入的 gSaveBitmap 大小相同。

```
if(gBuffer == null)
        {
            Bitmap b = Bitmap.createScaledBitmap(gBitmap, mWidth, mHeight, false);
            //gBuffer = ByteBuffer.allocateDirect(b.getRowBytes()*b.getHeight()*4);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            b.compress(Bitmap.CompressFormat.PNG,  100,  stream);
            gBuffer = ByteBuffer.wrap(stream.toByteArray());
            b.recycle();
        }
        gSaveBitmap.copyPixelsFromBuffer(gBuffer); 
```

更新：下面的代码给出了完全相同的错误，但不涉及任何压缩。

```
if(gBuffer == null)
        {
            Bitmap b = Bitmap.createScaledBitmap(gBitmap, mWidth, mHeight, false);

            int bytes = b.getWidth()*b.getHeight()*4;
            gBuffer = ByteBuffer.allocate(bytes);
            b.copyPixelsToBuffer(gBuffer);              
            b.recycle();
        }
        gSaveBitmap.copyPixelsFromBuffer(gBuffer); 
```

更新：通过将 gBuffer 的大小加倍解决了这个问题。也许有人可以告诉我为什么这是正确的尺寸。另外...图片旋转错误，需要旋转90度。任何想法如何在 gBuffer 中重新排列数据？

```
gBuffer = ByteBuffer.allocate(b.getRowBytes()*b.getHeight()*2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T20:44:49.093

我想我可能已经解决了这个问题——看看[Bitmap::copyPixelsFromBuffer() 的源代码（版本 2.3.4_r1，上次 Bitmap 在 4.4 之前的 Grepcode 上更新）](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.4_r1/android/graphics/Bitmap.java#Bitmap.copyPixelsFromBuffer%28java.nio.Buffer%29)

```
public void copyPixelsFromBuffer(Buffer src) {

     checkRecycled("copyPixelsFromBuffer called on recycled bitmap");

     int elements = src.remaining();
     int shift;
     if (src instanceof ByteBuffer) {

         shift = 0;

     } else if (src instanceof ShortBuffer) {
         shift = 1;

     } else if (src instanceof IntBuffer) {
         shift = 2;

     } else {

         throw new RuntimeException("unsupported Buffer subclass");

     }

     long bufferBytes = (long)elements << shift;
     long bitmapBytes = (long)getRowBytes() * getHeight();

     if (bufferBytes < bitmapBytes) {

         throw new RuntimeException("Buffer not large enough for pixels");

     }

     nativeCopyPixelsFromBuffer(mNativeBitmap, src);

 } 
```

错误的措辞有点不清楚，但代码澄清了 - 这意味着您的缓冲区被计算为没有足够的数据来填充位图的像素。这是因为他们使用缓冲区的 remaining() 方法来计算缓冲区的容量，其中考虑了其位置属性的当前值。如果在调用 copyPixelsFromBuffer() 之前在缓冲区上调用 rewind()，您应该会看到运行时异常消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T09:54:11.680

我找到了这个问题的答案：

您应该始终设置，`buffer size > bit map size`因为不同 Android 版本上的位图总是更改。

您可以在下面记录代码以查看`buffer size & bitmap size`（Android API 应 >= 12 以使用以下日志）

```
Log.i("", "Bitmap size = " + mBitmap.getByteCount());
        Log.i("", "Buffer size = " + mBuffer.capacity()); 
```

它应该工作。

谢谢，

# java - 在数组列表中选择向量遗留类

> ID：12208623
> 
> 赞同：3
> 
> 时间：2012-08-31T03:44:54.243
> 
> 标签：java, collections

在一次采访中，我被问到两个问题，那就是..

实际上我们什么时候需要使用向量..？根据我的分析，同步是主要原因，但他们很想知道除了同步之外，我们可能更喜欢使用向量的其他实际原因是什么。

请告知，除了同步之外，我们将选择矢量遗留集合的其他各种原因是什么......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:30:41.507

向量在java中的可变长度参数中使用。因为向量可以根据传递给它的参数自动扩展。

例如

```
public int sum(int i...)
{ 
    int sum=0;
    for(int s:i)
    {
    sum=sum+s;
    }
    return sum;
} 
```

在此方法中，无论用户将多少整数传递给此方法，我都将 i 作为可变长度参数传递，此方法将根据用户参数返回总和。

所以vector为用户提供了这个功能。

这是实现向量的地方。在内部，可变长度参数使用向量来存储数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:07:43.000

我能想到的一个区别是`Vector`支持`Enumeration`。您可以`Enumeration`通过调用轻松创建

```
Enumeration enums  = v.elements(); 
```

但在这种情况下`ArrayList`，你需要这样做：

```
Enumeration enums = Collections.enumeration(arrayList); 
```

# visual-studio-2010 - 带有身份验证错误的 HTTPS WebAPI 自托管

> ID：12208626
> 
> 赞同：1
> 
> 时间：2012-08-31T03:45:08.673
> 
> 标签：visual-studio-2010, https, asp.net-mvc-4, ssl-certificate

我有以下错误“该站点的安全证书不受信任！” 当我使用 Selt-host 配置实现项目 WebAPI mvc4 时。

-错误详情：[http ://tinyurl.com/8tj8nek](http://tinyurl.com/8tj8nek)

-所有代码基于本文：[http ://tinyurl.com/3mdypd9](http://tinyurl.com/3mdypd9)

-我已经做了实现https协议的流程步骤：（都有管理员权限）

STEP01:-------------注册服务端口.------------ netsh http add urlacl url=https://+:9900/ user=EVERYONE

STEP02:-------------创建根证书---------- makecert -sk RootCA -sky signature -pe -n CN=MySVR -r -sr LocalMachine - ss 根 MyWebAPI.cer

STEP03:-------------创建服务器证书--------- makecert -sk server -sky exchange -pe -n CN=MySVR -ir LocalMachine -is Root -ic MyWebAPI.cer -sr LocalMachine -ss MyWebAPI_SVR.cer

STEP04:------------注册服务器证书--------

http 添加 sslcert ipport=0.0.0.0:9900 certash=99A8C41444622D6DC2FFB31F867601A75AAA444F appid={76cd6e8c-304a-4614-8aa7-939894c499dd} clientcertnegotiation=enable

我怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:06:37.603

您必须手动将自签名证书添加到浏览器的受信任站点列表中，否则将被拒绝。使用 Firefox 浏览器进行某些测试情况的​​另一种可能性是安装插件： [https ://addons.mozilla.org/en-US/firefox/addon/skip-cert-error/](https://addons.mozilla.org/en-US/firefox/addon/skip-cert-error/)

以下是将您的证书添加到 Firefox 中的受信任列表的说明： [http ://www.poweradmin.com/help/sslhints/FireFox.aspx](http://www.poweradmin.com/help/sslhints/FireFox.aspx)

# iphone - iphone App中上一个视图的滚动不会在下一个视图中被禁用

> ID：12208631
> 
> 赞同：0
> 
> 时间：2012-08-31T03:45:49.107
> 
> 标签：iphone, xcode, uiscrollview, addsubview

我有两个视图，说 A 和 B。两者都是 UIViewController 类的子类。视图 A 不是表视图，但它是一个启用滚动的视图，因为它超过了 iphone 尺寸 320*460。视图 B 不是滚动视图。我在单击视图 A 中的某个按钮时调用视图 B，例如，

```
-(IBAction)bt:id(Sender)
    {
        B *mB=[[B alloc]initWithNib:@"B" bundle:nil];
        [self.view addSubView:mB.view];
    } 
```

问题是，由于视图 A 较大，因此当视图 A 上加载 B 时，即使视图 A 在视图 B 中部分可见。请帮助我克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:49:19.130

在将视图 B 添加到主视图之前，请从其父视图中删除视图 A。

在 .h 中取两个对象

ViewA *aObject; 视图B *bObject;

在 View DidLoad 中像这样创建 View A 和 View B 的两个对象

aObject=[[ViewA alloc]initWithNibName:@"ViewA" bundle:nil];

bObject=[[ViewB alloc]initWithNibName:@"ViewB" bundle:nil];

[self.view addSubView:aObject.view];

当您要添加视图 B 时添加此代码

[aObject.view removeFromSuperView];

[self.view addSubView:bObject.view];

同样在后退按钮操作中，您可以添加类似的代码

[bObject.view removeFromSuperView];

[self.view addSubView:aObject.view];

在您的应用程序中尝试这段代码片段，我希望它会对您有所帮助。它不会丢失你以前的 cals 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:09:24.183

问题是您将视图 B 添加到视图 A 子视图中，而视图 A 位于滚动视图中，因此您需要在界面生成器 smallViewB 中创建单独的 UIView 插座和 UIView 视图 A，无论您需要显示视图 B 的大小。

然后将子视图添加到您在上面创建的 View Outlet 。如果问题仍然存在，请告诉我。

```
@interface ViewController A:UIViewController
@property(nonautomic,retain)IBOutlet UIView *smallViewB;

@implementation ViewController A
@synthesize smallViewB; //Make connection smallViewB in Interface Builder.

-(IBAction)bt:id(Sender) 
{ 
   B *mB=[[B alloc]initWithNib:@"B" bundle:nil];
   [self.smallViewB addSubView:mB.view];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:45:00.023

尝试在你身上添加这个**-(IBAction)bt:(id)Sender**

```
ViewA.your_scroll_view.scrollEnabled=NO; 
```

如果我理解正确，这可能是您想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T15:41:10.217

感谢您的建议，但我找到了不同的解决方案来解决我的问题。

在滚动视图 A 上添加另一个视图（即视图 B）时，我相应地重置了 A 的滚动视图尺寸，使其不可见。此外，当我在视图 B 中按下返回按钮时，我再次将视图 A 的滚动视图尺寸设置为其先前的值。另外，我将视图 A 设置为视图 B 的代表，因为在 B 中按下后退按钮时，我需要调用视图 A 中定义的函数，该函数是视图 B 协议的一部分。

# php - 多个 PHP 错误

> ID：12208633
> 
> 赞同：0
> 
> 时间：2012-08-31T03:46:21.103
> 
> 标签：php

我正在一个具有用户个人资料的网站上工作，并且我设法完成了注册页面，一旦用户在那里激活了帐户，他们将有权登录。

基本上我写出了我的登录脚本，当我查看网站时，我有两个错误，它们真的很混乱 [错误 1]：注意：未定义的索引：C:\xampp\htdocs\mountain-bikers\index.php 中的 loginEmail第 160 行 [错误 2]：注意：未定义索引：请记住第 166 行的 C:\xampp\htdocs\mountain-bikers\index.php return_msg=no_good

这是登录php代码：

```
<?php

if ($_POST['loginEmail'] != "") {

include_once "includes/mysql_connection.php";

$loginEmail = $_POST['loginEmail'];
$loginPassword = $_POST['loginPassword'];
$loginRemember = $_POST['remember']; 

$loginEmail = strip_tags($loginEmail);
$loginPassword = strip_tags($loginPassword);
$loginEmail = mysql_real_escape_string($loginEmail);
$loginPassword = mysql_real_escape_string($loginPassword);

$pass = md5($loginPassword);

//make query
$sql = mysql_query("SELECT * FROM users WHERE email='$loginEmail' AND password='$loginPassword' AND activated='1'"); 
$login_check = mysql_num_rows($sql);

if($login_check > 0){ 

    while($row = mysql_fetch_array($sql)){ 

        $id = $row["id"];   
        session_register('id'); 
        $_SESSION['id'] = $id;

        $firstname = $row["firstname"];   
        session_register('firstname'); 
        $_SESSION['firstname'] = $firstname;

        $email = $row["email"];   
        session_register('email'); 
        $_SESSION['loginEmail'] = $email;

    } // close while

    // Remember Me Section Addition... if member has chosen to be remembered in the system
    if($remember == "yes"){
      setcookie("idCookie", $id, time()+60*24*60*60, "/"); // 60 days; 24 hours; 60 mins; 60secs
      setcookie("firstnameCookie", $firstname, time()+60*24*60*60, "/"); // 60 days; 24 hours; 60 mins; 60secs
      setcookie("emailCookie", $email, time()+60*24*60*60, "/"); // 60 days; 24 hours; 60 mins; 60secs
      setcookie("passwordCookie", $password, time()+60*24*60*60, "/"); // 60 days; 24 hours; 60 mins; 60secs
    }   
    $my_msg = "all_good";
    print "return_msg=$my_msg&id=$id&firstname=$firstname";

} else {
$my_msg = "no_good";
    print "return_msg=$my_msg"; 
  exit();
}

}// close if post
?> 
```

我也收到电子邮件和密码字段的未定义变量错误。`value="<?php print "$loginEmail"; ?>"`此外，每个字段中都有一个登录名。如果您需要 HTML，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:51:06.937

首先，您应该验证 isset：

```
if (isset($_POST['loginEmail']) && $_POST['loginEmail'] != "") 
```

接下来，我假设 remember 是一个复选框，如果不选中它就不会传递值。确保也设置了...

```
$loginRemember = isset($_POST['remember']) ? $_POST['remember'] : false; 
```

此外，你会得到人们对 mysql_ 函数的咆哮，因为全世界，包括我在内，都在努力确保没有人活着再次使用它们。您应该查看 PDO 或 mysqli ...

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# python - 在python中只用多个参数拟合函数的一个参数

> ID：12208634
> 
> 赞同：40
> 
> 时间：2012-08-31T03:46:28.643
> 
> 标签：python, scipy, curve-fitting

在 python 中，我有一个有很多参数的函数。我想将此函数拟合到数据集，但只使用一个参数，其余参数我想自己提供。这是一个例子：

```
def func(x,a,b):
   return a*x*x + b

for b in xrange(10):
   popt,pcov = curve_fit(func,x1,x2) 
```

在此，我希望仅进行拟合，`a`并且参数`b`采用循环变量的值。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-31T04:30:57.283

您可以包装`func`在 lambda 中，如下所示：

```
def func(x,a,b):
   return a*x*x + b

for b in xrange(10):
   popt,pcov = curve_fit(lambda x, a: func(x, a, b), x1, x2) 
```

lambda 是一个匿名函数，在 Python 中只能用于简单的单行函数。基本上，它通常用于在不需要为函数分配名称时减少代码量。官方文档中给出了更详细的描述：http: [//docs.python.org/tutorial/controlflow.html#lambda-forms](http://docs.python.org/tutorial/controlflow.html#lambda-forms)

在这种情况下，lambda 用于修复 的参数之一`func`。新创建的函数只接受两个参数：`x`和`a`，而 , 而`b`固定为取自局部`b`变量的值。`curve_fit`然后将这个新函数作为参数传入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-23T23:58:35.713

更好的方法是使用`lmfit`，它为曲线拟合提供了更高级别的接口。在其他功能中，Lmfit 使拟合参数成为可以具有边界或明确固定（在其他功能中）的一流对象。

使用 lmfit，这个问题可能会被解决为：

```
from lmfit import Model
def func(x,a,b):
   return a*x*x + b

# create model
fmodel = Model(func)
# create parameters -- these are named from the function arguments --
# giving initial values
params = fmodel.make_params(a=1, b=0)

# fix b:
params['b'].vary = False

# fit parameters to data with various *static* values of b:
for b in range(10):
   params['b'].value = b
   result = fmodel.fit(ydata, params, x=x)
   print(": b=%f, a=%f+/-%f, chi-square=%f" % (b, result.params['a'].value, 
                                             result.params['a'].stderr,
                                             result.chisqr)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-21T15:18:13.687

我建议不要使用可能不太直观的 lambda 函数来指定 scikit [curve_fit](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)参数`bounds`，该参数将强制在自定义边界内搜索您的参数。

您所要做的就是让您的变量***a***在 -inf 和 +inf 之间移动，并且让您的变量***b***在 ( ***b*** - epsilon) 和 ( ***b*** + epsilon)之间移动

在您的示例中：

```
epsilon = 0.00001

def func(x,a,b):
    return a*x*x + b

for b in xrange(10):
    popt,pcov = curve_fit(func,x1,x2, bounds=((-np.inf,b-epsilon), (np.inf,b+epsilon)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-02T20:18:27.750

我有效地使用了 Anton Beloglazov 的解决方案，虽然我喜欢避免使用 lambda 函数来提高可读性，所以我执行以下操作：

```
def func(x,a,b):
   return a*x*x + b

def helper(x,a):
   return func(x,a,b)

for b in xrange(10):
   popt,pcov = curve_fit(helper, x1, x2) 
```

这最终让人想起 Rick Berg 的回答，但我喜欢有一个专用于问题的“物理”的函数和一个帮助函数来让代码工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-25T07:30:58.273

另一种方法是使用相同的上限和下限 (+ eps) 作为初始值。使用具有初始条件和边界的相同示例：

```
def func(x,a,b):
   return a*x*x + b
# free for a and b
popt,pcov = curve_fit(func, x1, x2, 
                      p0=[1,1], 
                      bounds=[(-inf,-inf),(inf,inf)])

# free for a; fixed for b  ; 
eps=1/100
popt,pcov = curve_fit(func, x1, x2, 
                      p0=[1,1], 
                      bounds=[(-inf,(1-eps)),(inf,(1+eps))]) 
```

记得插入一个epsilon，否则a和b必须相同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-05T22:09:21.280

如果您愿意/能够编辑原始函数，则有一个更简单的选项。

将您的功能重新定义为：

```
def func(x,a):
    return a*x*x + b 
```

然后，您可以简单地将其放入参数 b 的循环中：

```
for b in xrange(10):
   popt,pcov = curve_fit(func, x1, x2) 
```

警告：该函数需要在调用它的同一脚本中定义才能使其工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-04T12:30:22.627

Scipy 的 curve_fit 采用三个位置参数，func、xdata 和 ydata。因此，另一种方法（使用函数包装器）是通过构建一个包含原始 xdata (x1) 和固定参数 b 的第二列的矩阵，将“b”视为 xdata（即自变量）。

假设 x1 和 x2 是数组：

```
def func(xdata,a):
   x, b = xdata[:,0], xdata[:,1]  # Extract your x and b
   return a*x*x + b

for b in xrange(10): 
   xdata = np.zeros((len(x1),2))  # initialize a matrix
   xdata[:,0] = x1  # your original x-data
   xdata[:,1] = b  # your fixed parameter
   popt,pcov = curve_fit(func,xdata,x2)  # x2 is your y-data 
```

# java - 在android中增加颜色的亮度

> ID：12208635
> 
> 赞同：0
> 
> 时间：2012-08-31T03:46:48.880
> 
> 标签：java, android, eclipse

我正在使用此代码随机更改我的 textView 的颜色。我有黑色背景，所以有时这些颜色很难阅读。

```
 int r = (rand.nextInt(176) * 80 ) / 256;
        int g = (rand.nextInt(176) * 80 ) / 256;
        int b = (rand.nextInt(176) * 80 ) / 256;

        TextView pos = (TextView) view.findViewById(R.id.position);
        pos.setText(((Integer)(position + 1)).toString());
        pos.setTextSize(30);
        pos.setTextColor(Color.argb(255,r,g,b));

        TextView data = (TextView) view.findViewById(R.id.textOfTip);
        data.setText(tipsList[position].toString());
        data.setTextSize(24);
        data.setTextColor(Color.argb(255,r,g,b)); 
```

我的问题是，我怎样才能增加文本颜色的亮度或发光效果，以便他们可以轻松阅读。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:49:02.463

首先，以格式获取颜色`0xAARRGGBB`（例如，纯红色为 0xFFFF0000）。然后，将其推送到方法[`colorToHSV`](http://developer.android.com/reference/android/graphics/Color.html#colorToHSV%28int,%20float%5b%5d%29)。接下来，更改[L/V/B](http://en.wikipedia.org/wiki/Brightness)值（[略有不同](http://en.wikipedia.org/wiki/HSL_and_HSV)，但我认为对于您正在做的事情来说已经足够接近了）。最后，再次调用[`HSVToColor`](http://developer.android.com/reference/android/graphics/Color.html#HSVToColor%28float%5b%5d%29)以获取新颜色的`0xAARRGGBB`格式。然后有[几种方法](https://www.google.com/search?hl=en&q=android+hex+to+argb)可以将其转换为 R、G、B 值，这通常涉及字节移位。

像这样的东西：

```
int color = 0xFFFF0000;
float[] hsv = new float[3];
Color.colorToHSV(color, hsv);
hsv[2] = 0.2f;
color = Color.HSVToColor(hsv);
int[] rgb = new int[3];
MyColor.colorToRGB(color, rgb); // Your custom method
// The rgb array now contains your RGB colors. 
```

*注意*：还有[`RGBToHSV`](http://developer.android.com/reference/android/graphics/Color.html#RGBToHSV%28int,%20int,%20int,%20float%5b%5d%29)，可能会派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:00:14.237

我认为有一些公式可以实现亮度和发光效果。这篇文章让你很好地理解它。

[确定RGB颜色亮度的公式](https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color)

# python - 无法在 Python 中打印到屏幕 - 没有产生错误

> ID：12208636
> 
> 赞同：0
> 
> 时间：2012-08-31T03:46:51.170
> 
> 标签：python, python-3.x

我是初学者python学习者。我创建了这个简单的程序，但不会显示任何错误消息，它也不起作用。输入后它停止工作。我究竟做错了什么？[Python 3.2]

```
import math

print('''

   |.
   |  .
  a|    . c
   |      .
   |________.
       b

''')

def robot():
    a = float(input('Enter side a, 0 for unknown \n: '))
    b = float(input('Enter side b, 0 for unknown \n: '))
    c = float(input('Enter hypotenuse c, 0 for unknown \n: '))

    if a == 0:
        print = ('a = ', (math.sqrt((c**2)-(b**2))))
    if b == 0:
        print = ('b = ', (math.sqrt((c**2)-(a**2))))
    if c == 0:
        print = ('a = ', (math.sqrt((a**2)+(b**2))))

    input()
    robot()

robot() 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:47:52.543

```
print = ('b = ', (math.sqrt((c**2)-(a**2))))
      ^ 
```

删除之后的赋值运算符`print`。`print`是一个函数，因此要调用它，您只需在括号中提供参数，如下所示：

```
print('b = ', (math.sqrt((c**2)-(a**2)))) 
```

# video - ffmpeg从指定时间段缓慢转换视频

> ID：12208639
> 
> 赞同：5
> 
> 时间：2012-08-31T03:46:59.100
> 
> 标签：video, ffmpeg

例如：如果我像这样转换视频：

```
ffmpeg -i demo.avi -ss 00:00:05 -t 00:00:15 test.flv 
```

它很快

```
ffmpeg -i demo.avi -ss 00:45:05 -t 00:00:15 test.flv 
```

我必须等待很长时间才能真正起作用。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T04:35:05.533

的行为`-ss`取决于它在命令中的位置：作为输入或输出选项。正如 ffmpeg 文档所述：

```
-ss position (input/output)
When used as an input option (before "-i"), seeks in this input file to position.
When used as an output option (before an outputfilename), decodes but discards
input until the timestamps reach position. This is slower, but more accurate.
position may be either in seconds or in "hh:mm:ss[.xxx]" form. 
```

您还可以`-ss`用作输入选项和输出选项，这可以提供速度和（可能增加的）准确性。有关更多示例和详细信息，请参阅[[FFmpeg-user] 当开始时间偏移量 (-ss) 较大时减少查找时间](http://ffmpeg.org/pipermail/ffmpeg-user/2012-August/008767.html)以及对[增强 -ss 选项的评论。](https://ffmpeg.org/trac/ffmpeg/ticket/1573)

# html - 到达页面末尾时修剪制表符

> ID：12208641
> 
> 赞同：2
> 
> 时间：2012-08-31T03:47:13.443
> 
> 标签：html, css, indentation

我有这样的情况[http://jsfiddle.net/9cRpe/](http://jsfiddle.net/9cRpe/)。您可以看到 字符（html 中的制表符）在到达页面末尾时被修剪/删除。是否可以通过 css 修改以使选项卡不被修剪？有关我想要达到的结果，请参见附图。谢谢 ![在此处输入图像描述](../Images/38e7872e97a527cc7d3b7ce2e7c9075e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:55:31.230

尝试 5`&nbsp;`安装`&#09`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:10:20.377

~~空白：预包装；~~

~~[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/white-space)~~

**编辑**：好的，我做了一个愚蠢的回答。

我认为 [Tab] 字符并非旨在充当“在此处插入*n 个*空格”。相反，请考虑以下场景：

> --->代码
> 
> //->代码

只要不将 [Tab] 转换为 [Space]，您可以在许多 IDE 中看到这一点。所以我认为 [Tab] 字符的意思是“将下一个字符推到下一个制表符位置”。

这就是您看不到所需空格的原因，因为“下一个字符已被放置在下一个制表符位置”。

比较这两个小提琴： http: [//jsfiddle.net/9cRpe/1/，http](http://jsfiddle.net/9cRpe/1/) : [//jsfiddle.net/9cRpe/2/](http://jsfiddle.net/9cRpe/2/)，

注意我在第一个“===>”之前添加的空格，你可以看到第一个“<===”没有移动——它总是与第一行的“tab”字对齐。

我现在想不出解决办法，但我想掩盖我以前的愚蠢，所以我写了这些东西，希望能启发你......

# ruby-on-rails - 让 bootstrap-sass gem 和 rails 与现有项目一起工作

> ID：12208648
> 
> 赞同：0
> 
> 时间：2012-08-31T03:48:04.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我正在尝试将引导程序集成到当前的 rails 项目中，并且安装起来很困难。具体来说，我似乎对 javascript 有问题。我已添加到 application.js：

//= 需要引导

但我收到以下错误：

![在此处输入图像描述](../Images/7892105f3b651fbadab64cbf29d0b887.png)

这些在 bootstrap.js.coffee 中引用，我可以通过清除此文件来消除错误。以下是内容：

```
jQuery ->
  $("a[rel=popover]").popover()
  $(".tooltip").tooltip()
  $("a[rel=tooltip]").tooltip() 
```

有关于加载单个模块的讨论，但我不清楚我是否应该这样做或是否需要这样做。[https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)

我真的很希望能够将引导程序添加到这个当前存在的项目中。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:15:46.830

你应该确保你有来自[Twitter Bootstrap Docs](http://twitter.github.com/bootstrap/javascript.html)的 bootstrap.js 或 bootstrap.min.js ，然后像你一样需要它。我认为您的问题是您还有另一个名为 bootstrap.js.coffee 的文件。尝试更改它的名称并要求它与 //=require bootstrap 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:57:54.170

首先，引导程序[需要](http://twitter.github.com/bootstrap/customize.html#plugins)jQuery。对于 Rails，您可以使用`jquery-rails`提供最新版本 jQuery 的 gem。

然后在您的内部`application.js`您可以加载所需的Javascripts

```
//= require jquery
//= require jquery_ujs
//= require bootstrap

//= require_tree .
//= require_self 
```

霓虹灯提到脚本的加载顺序很重要[。](https://stackoverflow.com/users/648672/neon)您应该`jquery`先加载，然后加载`bootstrap`. 此时，您可以加载当前目录中的所有其他脚本`require_tree .`（可能包含您的`bootstrap.js.coffee`）。

# php - 不使用传递变量

> ID：12208651
> 
> 赞同：1
> 
> 时间：2012-08-31T03:48:25.890
> 
> 标签：php, javascript, jquery

```
<a href='new.php?logi_jo=$_POST[jo]'>submit</a>

<input type='text' style='width:50px' name='logi_jo'> 
```

有没有办法获取价值`logi_jo`并将其传递给另一个网页？不使用`<form>`

第一行代码是链接。第二行代码是文本框..然后该文本框的值将使用表单操作传递到另一个页面。我决定不使用表单`action="??"`，因为该链接在表单内.. 感谢您阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:54:57.590

你可以通过 javascript 完成这个简单的任务，不需要 ajax。

**你的 HTML**

```
<a href='javascript:void(0)' onclick='submitMe()'>submit</a>
<input type='text' style='width:50px' name='logi_jo' id='logi_jo'> 
```

**你的 javascript**

```
<script type="text/javascript">
function submitMe(){
      var val=document.getElementById("logi_jo").value;
      document.location.href="new.php?logi_jo="+val;
}
</script> 
```

在 news.php 页面获取变量由`$_GET["logi_jo"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:55:46.537

AJAX 来救援！

```
var logi_jo = $('input[name=logi_jo]');
$.post(
  'test.php', 
  { logi_jo: logi_jo }, 
  function(data) { // do something to the DOM }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:28:13.537

我建议从这个开始：

[http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

# performance - Lion 上的 OpenCL 性能

> ID：12208652
> 
> 赞同：3
> 
> 时间：2012-08-31T03:48:30.293
> 
> 标签：performance, macos, osx-lion, opencl

也许（或者不是也许）我以错误的方式做某事，但似乎我无法从 OpenCl 内核中获得良好的性能，即使它在 GPU 上的运行速度比在 CPU 上快得多。

让我解释。

CPU 内核运行时间约为 100 毫秒。
GPU 内核运行时间约为 8 毫秒。

以上是使用`clCreateCommandQueue`with`CL_QUEUE_PROFILING_ENABLE`标志测量的。

但是，问题是重复调用（入队）内核所需的时间。

CPU 上 200 次内核调用：~19
秒 GPU 上 200 次内核调用：~18 秒

`gettimeofday`以上是通过在 200 循环之前和之后调用来测量的。就在循环之后，调用`clFinish`等待直到 200 个排队的内核完成。
此外，时间仅针对入队和执行内核进行测量，不涉及从/到内核的数据传输。

这是循环：

```
size_t global_item_size = LIST_SIZE;
Start_Clock(&startTime);
for(int k=0; k<200; k++)
{
    // Execute the OpenCL kernel on the list
    ret = clEnqueueNDRangeKernel (command_queue, kernel, 1, NULL, &global_item_size, NULL, 0, NULL, &event);        
}   
clFinish(command_queue);    
printf("] (in %0.4fs)\n", Stop_Clock(&startTime)); 
```

如果对内核的 200 次调用需要大约 18 秒，那么 GPU 上的内核比 CPU 上的内核快几倍是完全无关的......

我究竟做错了什么？

* * *

编辑

我做了一些额外的测试，似乎实际上将计算结果分配给输出缓冲区会产生开销。

这个内核

```
__kernel void test_kernel(__global const float *A, __global const float *B, __global float *C) 
{
    // Get the index of the current element to be processed
    int i = get_global_id(0);

    // Do the work
    C[i] = sqrt(sin(A[i]) + tan(B[i]));
} 
```

执行 200 次的时间如上。但是，如果我将`C[i]`行更改为，
`float z = sqrt(sin(A[i]) + tan(B[i]));`
那么这个内核在 CPU 上需要 0.3 秒，在 GPU 上需要 2.6 秒。

有趣的。我想知道是否可以通过在表中收集结果然后仅在执行最后一次内核调用时将它们分配给输出缓冲区
来加快执行速度？（具有最后一个全局 id 的内核，而不是第 200 个入队的内核）`__local``C`

# maven - Netty 编译在 windows 上抛出 checkstyle 错误

> ID：12208654
> 
> 赞同：0
> 
> 时间：2012-08-31T03:49:02.370
> 
> 标签：maven, netty, checkstyle

我从 github 做了一个 git clone，`git://github.com/netty/netty.git`然后是`mvn clean install`. 但是我得到了以下错误`maven checkstyle plugin`

```
C:\git\netty\common\src\main\java\io\netty\util\UniqueName.java:106: Line matches the illegal pattern '\r'.
C:\git\netty\common\src\main\java\io\netty\util\UniqueName.java:107: Line matches the illegal pattern '\r'.
C:\git\netty\common\src\main\java\io\netty\util\UniqueName.java:108: Line matches the illegal pattern '\r'.
C:\git\netty\common\src\main\java\io\netty\util\UniqueName.java:109: Line matches the illegal pattern '\r'.
....
Audit done. 
```

我使用带有`java version "1.7.0_06"`. 如何防止这些错误并获得良好的编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:44:50.913

您需要将 git 配置为仅使用 lf：[https ://help.github.com/articles/dealing-with-line-endings#platform-windows](https://help.github.com/articles/dealing-with-line-endings#platform-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:16:03.367

您可以只编辑这些文件并替换`\r`为`\n`.

或者，如果您只想编译项目并忽略来自 checkstyle 的所有消息，我建议设置属性`failsOnError`并设置`failOnViolation`为`false`（在代码中：[https](https://github.com/netty/netty/blob/master/pom.xml#L311) ://github.com/netty/netty/blob/master/pom.xml#L311 ）在这种情况下checkstyle 仍然会检查来源，但在找到某些东西时不会失败。

# php - 移动皮肤搜索与普通皮肤搜索不同

> ID：12208658
> 
> 赞同：0
> 
> 时间：2012-08-31T03:50:56.907
> 
> 标签：php, magento, search, mobile, skin

我有一个带有移动皮肤和单独定制皮肤的 Magento 设置。当我使用移动皮肤和搜索时，返回相同的 5 个结果。如果我在普通前端搜索，搜索结果可以正常工作。我查看了移动皮肤目录中的 result.phtml 文件，并将其替换为来自 base 的文件，但行为没有变化。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:06:09.927

我发现了这个问题。layout/ 中的 catalogsearch.xml 已损坏并导致移动皮肤中的错误搜索结果。这是移动皮肤的自定义，所以一旦我删除它并清除缓存，它就会使用默认的 xml，它现在可以工作了。

# android - 如何知道蓝牙正在使用

> ID：12208662
> 
> 赞同：0
> 
> 时间：2012-08-31T03:51:43.747
> 
> 标签：android

有时蓝牙已启用，但没有连接任何设备。我想知道如何确定没有设备连接到蓝牙。以下是示例。1\. 耳机断开。2.没有文件传输。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:02:58.510

可能，您可以调用[getBondedDevices()](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getBondedDevices%28%29)它将为您提供所有连接的设备。但是，我认为您实际上可能不仅需要知道已连接（配对）的设备，还需要知道其中一个设备是否有任何*活动连接*。不幸的是（[这个问题](https://stackoverflow.com/questions/3621267/android-identifying-active-bluetooth-connections)似乎证实了这一点）没有办法找到它。

# django - Django orm 和路径导入

> ID：12208669
> 
> 赞同：0
> 
> 时间：2012-08-31T03:52:51.710
> 
> 标签：django, orm, import, path

这是我的文件树：

- 脚本

..........脚本.py

-- 电子邮件

......... **__*初始化*__** .py

.........模型.py

设置.py

_***初始化*_** .py

管理.py

和我在 script.py 中的代码

```
import email, getpass, imaplib, os
import datetime
import unicodedata
import time
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "../settings")
import sys
cmd_folder = os.path.realpath("../")
sys.path.append(cmd_folder)
from emails.models import Email 
```

但我有这个错误：

```
TypeError: relative imports require the 'package' argument 
```

请问如何解决？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:05:55.983

解决方案感谢#django

../ 对于模块路径不正确，因此：

```
import sys
cmd_folder = os.path.realpath(os.path.dirname(os.path.realpath(__file__)) + '/../..')
sys.path.append(cmd_folder)
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "Sumomo.settings")
from Sumomo.emails.models import Email 
```

（sumomo 是我项目的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:13:27.187

尝试类似：

```
os.path.realpath(os.path.dirname(os.path.realpath(__file__)) + '/..') 
```

# delphi - 从组合框中删除重复项

> ID：12208671
> 
> 赞同：2
> 
> 时间：2012-08-31T03:53:26.920
> 
> 标签：delphi

说我有一个组合框

```
apples
apples
pears
oranges
oranges 
```

我想让它显示

```
apples
pears
oranges 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:06:44.100

```
for iter := combobox.Items.Count - 1 downto 0 do
begin
  index := combobox.Items.IndexOf(combobox.Items[iter]);
  if index < iter then
    combobox.Items.Delete(iter);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:13:17.880

我建议您每次只需重新填充组合框。这使得逻辑更简单：

```
ComboBox.Items.BeginUpdate;
try
  ComboBox.Clear;
  for Str in Values do
    begin
    if ComboBox.Items.IndexOf (Str) = -1 then
      ComboBox.Items.Add (Str);
    end;
finally
  ComboBox.Items.EndUpdate;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T17:31:37.493

只是为了让方法相互矛盾：一个人保持秩序，但随着项目数量的增加而变得越来越慢。另一个保持相对较快但不保持秩序：

```
procedure SortStringlist;
var
  i,index,itimer: integer;
  sl : TStringlist;
const
  numberofitems = 10000;
begin
  sl := TStringlist.Create;
  for i := 0 to numberofitems-1 do begin
    sl.Add(IntToStr(random(2000)));
  end;
  Showmessage(IntToStr(sl.Count));

  itimer := GetTickCount;
  sl.Sort;
  for I := sl.Count-1 downto 1 do begin
    if sl[i]=sl[i-1] then sl.Delete(i);
  end;
  Showmessage(IntToStr(sl.Count)+' Time taken in ms: '+IntToStr(GetTickCount-itimer));
  sl.free;
  sl := TStringlist.Create;
  for i := 0 to numberofitems-1 do begin
    sl.Add(IntToStr(random(2000)));
  end;
  Showmessage(IntToStr(sl.Count));

  itimer := GetTickCount;
  for i := sl.Count - 1 downto 0 do
  begin
  index := sl.IndexOf(sl[i]);
  if index < i then
    sl.Delete(i);
  end;
  Showmessage(IntToStr(sl.Count)+' Time taken in ms: '+IntToStr(GetTickCount-itimer));
end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T23:20:22.517

如果您不关心项目是否重新排序（或它们已经排序），`TStrings`可以为您完成工作 - 它消除了所有循环、删除和其他工作。（当然，它需要创建/销毁一个临时的`TStringList`，所以如果这对你来说是个问题，它就行不通了。）

```
var
  SL: TStringList;
begin
  ComboBox1.Items.BeginUpdate;
  try
    SL := TStringList.Create;
    try
      SL.Sorted := True; // Required for Duplicates to work
      SL.Duplicates := dupIgnore;
      SL.AddStrings(ComboBox1.Items);
      ComboBox1.Items.Assign(SL);
    finally
      SL.Free;
    end;
  finally
    ComboBox1.Items.EndUpdate;
  end;
end; 
```

要与 Igor 的答案（包括 no `BeginUpdate/EndUpdate`）正确比较，请删除这些内容：

```
var
  SL: TStringList;
begin
  SL := TStringList.Create;
  try
    SL.Sorted := True; // Required for Duplicates to work
    SL.Duplicates := dupIgnore;
    SL.AddStrings(ComboBox1.Items);
    ComboBox1.Items.Assign(SL);
  finally
    SL.Free;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:52:18.133

您必须从源数据中删除重复项。

在大多数情况下，ComboBox 会在运行时填充数据，这意味着数据来自某个来源。这里基本上有两种情况：来自数据库的数据集和来自任何其他来源的字符串集合。在这两种情况下，您都可以在将任何内容插入 ComboBox 之前过滤掉重复项。

如果源是数据库中的数据集，只需使用 SQL`DISTINCT`关键字。

如果源是任何字符串集合，请使用@Smasher 在答案中提供的代码和平。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T12:16:26.677

我之前曾多次遇到过这个问题，我使用了所有以前的方法，但我仍在使用它们，但你知道吗：我认为最好的方法，虽然这里没有提到，是子类 TComboBox，创建一个新方法（比如AddUnique ) 仅在先前不存在的情况下将字符串添加到组合中，否则它将删除它。这个解决方案一开始可能会花费一些额外的时间，但它会一劳永逸地解决问题。

# php - 前 3 名客户的 Mysql 查询

> ID：12208674
> 
> 赞同：3
> 
> 时间：2012-08-31T03:53:52.410
> 
> 标签：php, mysql

我正在尝试查询前 3 名客户。我有 3 张桌子：

*   客户表（CustomerID、Company）
*   产品表（ProductID、ProductName、Price）
*   订单表（OrderID、Date、Amount、CustomerID）

```
OrderID 日期 金额 CustomerID
19 2012-08-24 20 10043
20 2012-08-24 40 10044
21 2012-08-24 60 10044
22 2012-08-24 80 10042
23 2012-08-24 90 10043
24 2012-08-24 100 10042
25 2012-08-24 50 10041

```

如果您看到此表：

*   10042 订购了价值 180 美元的产品
*   10043 订购了价值 110 美元的产品
*   10044 订购了价值 100 美元的产品

如何像这样查询这些信息：

前 3 名客户

```
CustomerID 公司订购产品的成本
10042 马力 180 美元
10043 宏基 $110
10044 索尼 100 美元

```

目前我有这个mysql，但它没有按我想要的方式显示。有人可以帮助指出我的错误吗？

```
$query = "SELECT 
    CustomerOrder.CustomerID, CustomerOrder.Amount, 
    Customer.Company, 
    count(CustomerOrder.Amount) as total_amount
FROM 
    `CustomerOrder` 
     INNER JOIN Customer ON Customer.CustomerID = CustomerOrder.CustomerID
GROUP BY CustomerID 
ORDER BY total_amount DESC LIMIT 3"; 
```

目前，我得到这个：

```
 Top 3 Customers

CustomerID  Company         Cost of Product Ordered
10042       HP          80.00
10043       Acer            20.00
10044       Sony            40.00 
```

我正在使用此代码来显示：

```
$result = mysql_query($query);
$num=mysql_numrows($result);
echo "<table border='1'>
<tr>
<th>CustomerID</th>
<th>Company</th>
<th>Cost of Product Ordered</th>

</tr>";

while($row = mysql_fetch_array($result)) 
  {
  echo "<tr>";
  echo "<td>" . $row['CustomerID'] . "</td>";
  echo "<td>" . $row['Company'] . "</td>";
  echo "<td>" . $row['total_amount'] . "</td>";

  echo "</tr>";
  }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:58:47.950

使用`SUM`代替`COUNT`：

```
SELECT 
    Customer.CustomerID,
    Customer.Company, 
    SUM(CustomerOrder.Amount) AS total_amount
FROM CustomerOrder
INNER JOIN Customer
ON Customer.CustomerID = CustomerOrder.CustomerID
GROUP BY Customer.CustomerID 
ORDER BY total_amount DESC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:48:10.877

使用以下查询...我检查了它...它的工作

```
select ordr.CustomerID,cust.Company,(Sum(ordr.Amount)) as  'Cost of Products Ordered' from `order` ordr , customer cust where cust.CustomerID=ordr.CustomerID group by ordr.CustomerID order by Sum(ordr.Amount) desc limit 3 
```

# java - 从 Java 中的 get PHPSESSID 获取 cookie 数据

> ID：12208676
> 
> 赞同：1
> 
> 时间：2012-08-31T03:54:10.153
> 
> 标签：java, php

开发一个将 POST 数据发送到论坛以发布数据的 Java 应用程序。工作几乎很棒。似乎如果我没有设置 PHPSESSID cookie，我会得到 403，但是当我得到 cookie 时，它​​不是返回给我的那些。

知道如何获取此 cookie 还是禁用的唯一解决方案？

# jquery - 如果 jQuery ajax() 仅在 Safari 中取回数据，则会出错

> ID：12208677
> 
> 赞同：1
> 
> 时间：2012-08-31T03:54:13.697
> 
> 标签：jquery, ajax, safari, timeout

我在 Safari 中遇到了 jQuery ajax() 的一些问题，所以我创建了一些简单的代码来测试。

向 PHP 文件发送一个请求，10 秒后，在所有其他浏览器中，它会收到“返回数据”并提示“成功”然后“完成”；但在 Safari 中，它会提示“错误”和“已完成”，并且无法获取任何数据。

如果只是将 10 秒更改为 9 (sleep(9);)，它也可以在 Safari 中使用。那么为什么 10 秒对于 Safari 来说是一个临界点呢？如何使 Safari 的功能与其他浏览器的 ajax() 一样好？

这是 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript">
      $(function () {
        $("#submit").click(function () {
          $.ajax({
            async: false,
            cache: false,
            type: "POST",
            timeout: 10000,
            url: "processor.php",
            dataType: "json",

            success: function (data) {
              $("#status").html(data);
              alert('succeeded');
            },

            error: function (request, status, error) {
              alert('error');
            },

            complete: function () {
              alert('completed')
            }
          });

          return false;
        });
      });
    </script>
  </head>

  <body>
    <div>
      <input id="submit" type="button" value="send request" />
    </div>

    <div id="status"></div>
  </body>
</html> 
```

这是PHP代码：

```
<?php
    sleep(10);
    echo json_encode("Returned Data");
?> 
```

您的帮助将不胜感激，肖恩·刘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:05:35.777

尝试`async: true`在 ajax 属性中进行设置。10 秒可被视为超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T09:39:29.510

谢谢，我认为这是 safari 中的一个错误，因为相同的代码在其他浏览器中运行良好，只有在存在 async:false 时才会在 safari 中中断

# objective-c - 不存在的“无法识别的选择器”

> ID：12208678
> 
> 赞同：0
> 
> 时间：2012-08-31T03:54:14.943
> 
> 标签：objective-c, ios, xcode, ios4, selector

我在一个崩溃的 iPhone 应用程序中遇到了一个问题，在调试器控制台中显示以下消息：

> 2012-08-31 12:31:24.628 test_app[1672:207]-[My_ViewController tapDetected:]：无法识别的选择器发送到实例 0x7621ef0

奇怪的是，“tapDetected”甚至不再存在于我的此类代码中。它曾经是一种方法，但已被删除并替换为不同的方法。

我注意到，当我查看 .xib 文件时，在第一响应者中，“tapDetected”仍然出现在列表中。但是我不知道这是否与我的问题有关，而且我看不到任何方法可以删除它。

任何关于这个问题的想法或建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:07:55.713

从调用的 .xib 中删除 tapDetected: 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:29:24.610

我想补充一点，当您处理界面构建器的内容和 xib 文件时，有时您的应用程序也会崩溃，无论您是否确保从 xib 文件中删除了某些内容。

我了解到这是因为模拟器上应用程序的先前副本以某种方式“缓存”了 xib 内容。

修复方法是从模拟器或设备中删除应用程序的实例，然后再次重新运行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T05:10:15.013

打开您的 .xib 文件。选择生成错误的 .xib 文件中的按钮。选择**Show Utilities** =>单击**Connection Inspector** =>检查**Sent Events**列表。移除与 tapDetected: if exits 的连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T07:03:26.013

这可能是因为 xib 中的按钮（我猜按下时会出现错误）仍然连接到方法..在您的 xib 文件中..只需从该按钮的连接检查器列表中删除该连接..

# python - 如何在 Debian 中使用 Python 3.2.3 安装 Django 1.4？

> ID：12208680
> 
> 赞同：2
> 
> 时间：2012-08-31T03:54:42.753
> 
> 标签：python, django, debian

我在 Debian /usr/local/bin/python3 中安装了 Python 3.2.3，并在同一目录中安装了 Django 1.4。但是当我尝试从 python 3 shell 解释器导入 django 时，我得到语法错误！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:55:33.517

Django 不支持 Python 3。您需要安装 Python 2.x 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T04:14:58.703

没有 Django 的官方版本可以做到这一点，但是 bitbucket 上的[人](https://bitbucket.org/loewis/django-3k/)一直在研究 python 3 的端口。Django 将在 1.5 版本中正式支持 python3 实验

# php - PHP/MySQL：选择所有产品/行的替代方案？

> ID：12208685
> 
> 赞同：0
> 
> 时间：2012-08-31T03:55:10.290
> 
> 标签：php, mysql

我的 PHP 应用程序具有`product_fetch([parameters])`返回“产品”对象的功能，这些对象的信息存储在数据库中。

在我的管理区域中，有一个名为“特色产品”的页面，它允许我选择 10 种产品在主页中显示。

现在问题来了：我做了 10 个选择/组合框，每个都允许我从 400 个产品中选择一个产品。因此，为了做出所有选项，必须进行查询：`SELECT * FROM products`

问题：即使有数百行，进行这样的查询是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:38:53.737

您提出的解决方案当然是可行的，与 MySQL 能够处理的上限相比，400 行确实很温和。更令人担忧的是这里的用户体验。当然这只会影响你，但我会为自己设计一些比一堆`<select>`s 更好的东西。我的想法是从一个自动完成产品名称的文本框开始。[如果产品标题具有全文索引](https://stackoverflow.com/questions/6695746/mysql-like-query-is-slow-with-full-text-index)，则可以做到这一点。然后你的自动完成脚本可以使用这个查询：

```
SELECT * FROM Products WHERE MATCH(title) AGAINST ('contents of textbox' IN BOOLEAN MODE); 
```

有很多 jQuery 插件，[比如 Autocomplete](http://jqueryui.com/demos/autocomplete/#remote)可以处理 JS 端（查询服务器以获取自动完成结果）。我刚刚提到的那个添加了一个`term`GET 参数，您可以轻松地抓取并放入查询中：

```
// You might want to only select the relevant columns
$stmt = $pdo->prepare('SELECT * FROM Products WHERE MATCH(title) AGAINST (:search IN BOOLEAN MODE)');
$stmt->execute(array(':search' => $_GET['term']);

// Output JSON results
echo json_encode($stmt->fetchall()); 
```

在一个文本框中输入（或单击自动完成结果）后，另一个文本框应出现在其下方，并且焦点应移至该文本框。从那里您可以键入另一个产品，然后继续直到达到 10 个。每个文本框（除非只有一个）旁边应该有一个删除链接，该链接可以从特色列表中删除该产品。

我会寻找一个实现这种功能的网站，这样你就可以更好地理解我在说什么。基本上在这里，您正在搜索的内容已经实现。您不必有 10 个带有 400 个选项的选择框，也不需要 `SELECT * FROM Products`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:59:29.030

您最好在查询中指定*您*想要的产品，并且仅在您根本不打算使用任何其他产品时才返回这些产品。

您可以使用多种方法来做到这一点。一个简单的方法是在这样的`in`语句中使用 ID 字段：

```
 select col1, col2 from products where id in(1,4,12,5) 
```

这似乎没什么区别，但是如果你的 procuts 表中有十万行呢？

您还可以在表中放置一个标志，表示这些项目是*精选*的，这可以让您使用如下内容：

```
select col1, col2 from products where featured='Y' 
```

或者你甚至可以有一个只有特色项目（甚至只是他们的 ID）的表，并将它加入到你的主列表中，如下所示：

```
select
    a.col1,
    a.col2
from
    products a
        join featured b
            on a.id=b.id 
```

如果你想从整个表中挑选，你甚至可以使用一个简单的`limit`子句从表中挑选出一定数量的行，并且可以重复使用来获取下一组：

```
select col1, col2 from products limit 10;
// Will pick the first 10 rows of data.

select col1, col2 from procuts limit 30,10;
// Will pick rows 31-40 (skipping first 30, then returning next 10) 
```

不过，简短的版本是，无论您如何操作，拉回整个数据表以在 PHP 中对其进行挑选是一件*坏事*，并且要不惜一切代价避免。它使数据库工作更加努力，在数据库和 PHP 之间使用更多的网络（即使它们在同一台机器上，它在它们两者之间传输更多的数据）并且默认情况下会使 PHP 使用更多处理信息的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T04:00:08.803

```
SELECT * FROM tbl LIMIT $page,10; 
```

上面的查询将从偏移量中选择 10 个条目`$page` 获取所有行是一个坏主意，因为无论如何您只使用 10 个。当您的表扩展到数百万行时，您会看到明显的差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T04:03:24.727

如果这是您的意思，那么选择所有行从根本上没有错。就性能而言，数百行也不应该成为查询的问题。但是，如果您的数据库增长到那么大，可能会有数千或数百万。

想想用户——他们可以滚动浏览数百种产品吗？大概。如果不是，那么可能*是 UI 设计有*问题，而不是查询。

# java - 将 XML 与 Activity 的 setContentView() 一起使用

> ID：12208686
> 
> 赞同：0
> 
> 时间：2012-08-31T03:55:22.600
> 
> 标签：java, android, numbers

我是一名业余开发人员，正在创建一个简短的应用程序，我无法同时使用特定活动的 XML 文件以及 Activity 的 Java 方法“setContentView”。我需要该方法，因为我正在从计算中生成数字，并且生成的数字会根据不同的参数而变化。因此，每次我调用计算时，我都必须调用：

```
textView.setText(message + " is " + output);
setContentView(textView); 
```

但我还在 Activity 的 XML 页面上创建了几个按钮，我也想在 Activity 的页面上显示它们。例如，这是我创建的按钮之一：

```
<Button 
    android:layout_marginTop="100dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_quit"
    android:onClick=".quit" /> 
```

但是，如果我打电话：

```
setContentView(R.layout.activity_compute_number); 
```

在我前面提到的可变文本消息的设置内容视图之后，XML 文件会覆盖文本消息，并且如果我反过来调用两个 setContentView 方法，则文本消息永远不会显示，反之亦然。如何让它们同时在活动屏幕上呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:13:44.530

在您的**activity_compute_number.xml**中，您应该为您的按钮和文本视图分配一个**ID 。**这样您就可以引用您的按钮和 textView。

```
 <Button
    android:id="@+id/button_compute"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="100dp"
    android:onClick=".quit"
    android:text="@string/button_quit" />

<TextView
    android:id="@+id/textView_answer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="100dp" /> 
```

注意 android:id=" **@+id** /button_compute" 和**android:id="@+id/textView_answer"**。这给这个按钮和 textview id 分别称为 button_compute 和 textView_answer。

然后将您的 onCreate 更改为以下内容：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btnCompute = (Button)findViewById(R.id.button_compute);
    TextView tvAnswer = (TextView)findViewById(R.id.textView_answer);

    btnCompute.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            /*
             * DO COMPUTATION here
            */

            tvAnswer.setText(answer);
        }
    });
} 
```

在**onCreate()**方法中，您只需调用一次 setContentView() 即可将视图设置为在**activity_compute_number.xml**中显示布局。**您通过findViewById**指定您在 xml 中设置的 id 来引用您的按钮和 textview 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:25:08.643

[请阅读setContentView()](http://developer.android.com/reference/android/app/Activity.html#setContentView%28int%29)方法的文档。
在`onCreate()`方法中，您只能使用`setContentView()`一次。因此，您应该`TestView`在您的 XML 文件中添加一个或者可以
`TextView txt = new TextView(this)`
在您的活动中使用它。

# c# - 如何在没有组合框的情况下显示 DataGridViewComboBoxColumn？

> ID：12208693
> 
> 赞同：0
> 
> 时间：2012-08-31T03:56:34.140
> 
> 标签：c#, winforms, datagridview

这可能是一个愚蠢的问题，但我想知道是否有办法在我的 DGV 中有一个 DataGridViewComboBoxColumn，但不是显示丑陋的组合框，它只是一个白色单元格 - 当单击单元格时，下拉菜单显示。

我的问题基本上是这真的很难看：![这](../Images/494bc04f159acfcc0938a57bfbc08a9e.png)

你如何解决这个问题？我习惯于在 WPF 中工作，而不是 Winforms。是否可以只隐藏组合框，但单元格的功能完全相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:03:07.310

你会想要处理单元格格式化事件。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T05:01:54.627

组合框有三种不同的外观可供您选择。在这种情况下，您正在寻找`flat appearance`. 但是，如果您想要一个漂亮的数据网格视图，您可能需要查看[PF Grid Toolkit](http://www.pfgrid.com/)。它的价格相当实惠。

注意：[这个页面](http://www.codeproject.com/Articles/18172/Appearance-Customizable-ComboBox)也可以证明是有用的。

# android - 媒体播放器isPlaying抛出非法状态android

> ID：12208696
> 
> 赞同：1
> 
> 时间：2012-08-31T03:56:46.820
> 
> 标签：android, try-catch, state, android-mediaplayer, illegalstateexception

我正在使用 MediaPlayer 在我的应用程序中播放音乐。当我需要暂停和恢复时，我使用 mPlayer.isPlaying() 检查状态，但这有时会引发非法状态异常。

为什么会这样？在这些时候你应该怎么做？你将如何确定玩家的状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:10:33.737

根据 Android 文档：

“如果内部播放器引擎尚未初始化或已释放，则出现 IllegalStateException。”

我想说首先确保你已经初始化和/或没有释放播放器。

MediaPlayer 可能很奇怪；即使逻辑已经有意义，也值得尝试使用不同的语句；如果您发布代码，我可以在这方面为您提供更多帮助。

现在，您可以只使用 try-catch 语句并在 catch 中添加一些内容以确保 MediaPlayer 正常工作。

Edit1：只是在黑暗中猜测，如果您为 MediaPLayer 使用静态全局变量，那可能就是问题所在。我会仔细检查它是如何被初始化和释放的，尤其是在类之间切换时。

# java - 如何在 Hibernate hbm 文件中映射 2 个相同的表？

> ID：12208697
> 
> 赞同：1
> 
> 时间：2012-08-31T03:56:58.537
> 
> 标签：java, hibernate

我有像`Trade_PAC_UNADJUSTED`和这样的表`Trade_PAC_ADJUSTED`。其他地区类似。表结构相同，都属于相同的`schema`。我如何映射这些表。我不想复制`.hbm`文件中类条目的属性。我的`POJO`班级对所有人来说都是一样的。

请帮忙。

是否有可能有这样的东西：

```
<class name="com.Bean" table="TRADE" entity-name="TRADE">
<discriminator type="string">
<column name="PROCESSING_LOCATION" />
</discriminator>
<property name="..........></property>
<subclass name ="com.Bean"  discriminator-value="PAC">
<discriminator type="integer">
<column name="RUN_ID" />
</discriminator>
<subclass name ="com.Bean"  discriminator-value="1" entity-name="TRADE_PAC_UADJUSTED"/>
<subclass name ="com.Bean"  discriminator-value="2,3,4,5,6,7,8,9" entity-name="TRADE_PAC_ADJUSTED"/>
</subclass>
</class> 
```

但是我无法在子类中传递表名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:36:36.937

如果您创建一个新的 POJO 对象并要求 Hibernate 保存它，它如何知道它应该插入到您的哪个表中？你需要在你的 POJO 中提供一些东西来告诉它走哪条路。

您可能可以使用 Hibernate“鉴别器”将其视为继承方案来执行此操作。

# batch-file - 批处理文件编程通过检查其他关键字将指定的行转换为变量

> ID：12208702
> 
> 赞同：0
> 
> 时间：2012-08-31T03:57:53.543
> 
> 标签：batch-file

我正在尝试编写批处理文件代码来检查文本文件中是否存在给定的行。如果它存在，我想将该行之后的特定行（取决于行号）放入变量中。任何人都可以帮助我吗？

例如我有文本文件...
EX1
EX2
Ex3
EX4
Ex5

现在我想搜索天气 Ex3 是否存在于批处理文件中。如果它存在，我希望 Ex5（之后的第 2 行）变为变量。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:14:34.707

这适用于我的盒子：

```
@echo off
SET searchterm=Ex3
SET /a lineafter=2
SET filename=lst.txt
:: --------------
SETLOCAL ENABLEDELAYEDEXPANSION
SET /a c=0
FOR /F "delims=" %%i IN (%filename%) DO (
  if !c! GTR 0 (
    IF %lineafter% EQU !c! (
      SET result=%%i
      GOTO :linefound
    )
    SET /a c=!c! + 1
  ) ELSE (
    IF "%%i"=="%searchterm%" (
      SET /a c=1
    )
  )
)
echo No result
GOTO :EOF
:linefound
echo Result: %result% 
```

只需在第 2-4 行输入您的值。

# c++ - 在语义动作中加入灵气符号表

> ID：12208705
> 
> 赞同：3
> 
> 时间：2012-08-31T03:58:05.660
> 
> 标签：c++, boost-spirit, boost-spirit-qi

[通过boost::spirit::qi::symbols 文档](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/qi/reference/string/symbols.html)的开头段落，我认为从语义操作向 qi::symbols 添加符号不会太难。不幸的是，它似乎并不像我想象的那么简单。

以下测试代码显示了该问题：

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <string>

namespace qi = boost::spirit::qi;

typedef qi::symbols<char, unsigned int> constants_dictionary;

template <typename Iter> struct parser : public qi::grammar<Iter, qi::space_type> {

    parser(constants_dictionary &dict) : parser::base_type(start) {

        start = qi::lit("@") >> ((+qi::char_) >> qi::uint_)[dict.add(qi::_1, qi::_2)];
    }

    qi::rule<Iter> start;
};

int main() {
    constants_dictionary dict;
    parser<std::string::const_iterator> prsr(dict);
    std::string test = "@foo 3";
    parse(test.begin(), test.end(), prsr, qi::space);
} 
```

从 VS2010 给出与 qi::_2 相关的类型错误：

```
C:\Users\k\Coding\dashCompiler\spirit_test.cpp(12) : error C2664: 'const boost::
spirit::qi::symbols<Char,T>::adder &boost::spirit::qi::symbols<Char,T>::adder::o
perator ()<boost::spirit::_1_type>(const Str &,const T &) const' : cannot conver
t parameter 2 from 'const boost::spirit::_2_type' to 'const unsigned int &'
        with
        [
            Char=char,
            T=unsigned int,
            Str=boost::spirit::_1_type
        ]
        Reason: cannot convert from 'const boost::spirit::_2_type' to 'const uns
igned int'
        No user-defined-conversion operator available that can perform this conv
ersion, or the operator cannot be called
        C:\Users\k\Coding\dashCompiler\spirit_test.cpp(10) : while compiling cla
ss template member function 'parser<Iter>::parser(constants_dictionary &)'
        with
        [
            Iter=std::_String_const_iterator<char,std::char_traits<char>,std::al
locator<char>>
        ]
        C:\Users\k\Coding\dashCompiler\spirit_test.cpp(21) : see reference to cl
ass template instantiation 'parser<Iter>' being compiled
        with
        [
            Iter=std::_String_const_iterator<char,std::char_traits<char>,std::al
locator<char>>
        ] 
```

（为讨厌的 VS2010 错误风格道歉）

我应该使用什么语法从该表中添加（以及稍后删除）符号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T10:16:26.627

这个问题[之前已经回答过了](https://stackoverflow.com/questions/8780604/how-to-add-qisymbols-in-grammariterator-double)。但是，您发布的代码存在相当多的问题，因此我将一一修复它们，以免您不必要地盯着错误消息页面。

工作代码（加上输出验证）**[在 liveworkspace.org 上](http://liveworkspace.org/code/c31791ff93d0fa3d899e499599126f40)**。

笔记：

1.  语义动作必须是凤凰*演员*，即你需要

    *   `boost::bind`, `phoenix::bind`,`std::bind`
    *   `phoenix::lambda<>`或者`phoenix::function<>`
    *   函数指针或多态可调用对象（根据文档）

        我建议`phoenix::bind`（在这种特殊情况下），我在下面展示

2.  解析器的船长和开始规则不匹配
3.  `qi::char_`吃掉*所有角色*。结合船长，这导致解析失败，因为（显然）值中的数字也被`+qi::char_`. 我向您展示了许多解决方案之一，基于`qi::lexeme[+qi::graph]`
4.  用于`qi::lexeme`“绕过”船长（即防止 +qi::graph 跨越空白，因为船长跳过了它）
5.  `qi::parse`不带船长；用于`qi::phrase_parse`此（它*似乎*起作用的原因是任何尾随的“可变参数”参数都绑定到解析器的公开属性，在这种情况下未指定，因此`qi::unused_type`）。
6.  如果您想直接 传递`test.begin()`和，则需要明确表示您需要 const 迭代器。更典型的解决方案是引入明确类型的变量（和，例如）`test.end()``qi::phrase_parse``first``last`

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <string>

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

typedef qi::symbols<char, unsigned int> constants_dictionary;

template <typename Iter> struct parser : qi::grammar<Iter, qi::space_type> 
{
    parser(constants_dictionary &dict) : parser::base_type(start) 
    {
        start = qi::lit("@") >> (qi::lexeme [+qi::graph] >> qi::uint_)
            [ phx::bind(dict.add, qi::_1, qi::_2) ]
            ;
    }

    qi::rule<Iter, qi::space_type> start;
};

int main() {
    constants_dictionary dict;
    parser<std::string::const_iterator> prsr(dict);
    const std::string test = "@foo 3";

    if (qi::phrase_parse(test.begin(), test.end(), prsr, qi::space))
    {
        std::cout << "check: " << dict.at("foo") << "\n";
    }
} 
```

# liquibase - Liquibase 更新失败

> ID：12208706
> 
> 赞同：4
> 
> 时间：2012-08-31T03:58:06.300
> 
> 标签：liquibase

我正在使用以下关于[liquibase的快速入门](http://www.liquibase.org/quickstart)

我的xml代码：

```
<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="1" author="bob">
        <createTable tableName="department">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="true"/>
        </createTable>
    </changeSet>

</databaseChangeLog> 
```

当我使用“更新”命令通过命令行运行 Liquibase 时，Liquibase 告诉我这一点

```
INFO 8/31/12 9:17 AM:liquibase: Successfully released change log lock
Liquibase Update Failed: Content is not allowed in prolog.
SEVERE 8/31/12 9:17 AM:liquibase: Content is not allowed in prolog.
liquibase.exception.ChangeLogParseException: Error parsing line 1 column 1 of dat
abase.xml: Content is not allowed in prolog.
        at liquibase.parser.core.xml.XMLChangeLogSAXParser.parse(XMLChangeLogSAXP
arser.java:106)
        at liquibase.Liquibase.update(Liquibase.java:107) 
```

我的更新命令是

```
liquibase --driver=com.mysql.jdbc.Driver  --classpath=mysql-connector-java-5.1.6.jar   --changeLogFile=database.xml --url="jdbc:mysql://localhost:3306/sample" --username=root --password=password  update 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:20:21.303

这可能是因为您的 XML 文件的开头有几个隐藏字符（如 BOM、google XML BOM 以获取更多信息）。

[此链接](https://stackoverflow.com/questions/295472/how-do-i-remove-the-bom-character-from-my-xml-file)显示如何删除 BOM。

如果您使用的是 Windows，[XVI32](http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm)（一个免费的十六进制编辑器）会为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T12:10:41.167

请参阅[Liquibase JIRA 问题](https://liquibase.jira.com/browse/CORE-2722)

此问题与架构定义有关...尝试使用给定链接的附件示例中的架构定义

# asp.net-mvc - 它是 ASP.NET MVC 中异常处理的正确方法吗

> ID：12208715
> 
> 赞同：2
> 
> 时间：2012-08-31T03:59:52.673
> 
> 标签：asp.net-mvc, exception-handling

我已阅读有关 ASP.NET MVC 中的异常处理的文章。我想通过简要介绍它来确保我做对了。任何人都可以发表评论。

1.  如有必要，在控制器操作中捕获异常。

    ```
    [HttpPost]
    public ActionResult Insert()
    {
        try
        {

        }
        catch
        {
            //ModelState.Error -> display error msg to the user.
        }
    } 
    ```

2.  覆盖 basecontroller 中控制器的“OnException”方法并“记录”步骤 1 中引发的异常和其他 MVC 异常

3.  在 application_onerror 中记录全局异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:20:05.390

如果你想在你的动作中处理异常，你可以在你的控制器中覆盖“OnException”，如下所示：

```
protected override void OnException(ExceptionContext filterContext)
{
  logging or user notification code here
} 
```

你可以把它放在你的 BaseController 类中以防止重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T04:32:06.327

我肯定会推荐 ELMaH，而不是自己编写此代码，也可以通过 Log4Net 为您的 MVC 应用程序编写代码。我个人避免任何异常处理，除非我对它有特定的功能响应。通过这种方式，我不会“吃掉”任何应用程序范围的工具（如 ELMaH）将为我优雅地处理的错误。

ELMaH 也有很好的内置网络报告，并且有专门用于 ELMaH 的第三方工具可以为您提供统计信息，例如最常见的错误。

您可以从自定义错误重定向开始...

```
<customErrors defaultRedirect="~/site/error" mode="RemoteOnly">
  <error statusCode="404" redirect="~/site/notfound" />
</customErrors> 
```

...对于知道您正在使用 ELMaH 的控制器...

```
public virtual ActionResult Error() {
    System.Collections.IList errorList = new System.Collections.ArrayList();
    ErrorLog.GetDefault(System.Web.HttpContext.Current).GetErrors(0, 1, errorList);
    ErrorLogEntry entry = null;
    if (errorList.Count > 0) {
        entry = errorList[0] as Elmah.ErrorLogEntry;
    }
    return View(entry);
} 
```

...由帮助访问者向您获取特定错误 ID 的视图提供支持：

```
@model Elmah.ErrorLogEntry

@if (Context.User.Identity.IsAuthenticated) {
    <p>Since you are signed in, we've noted your contact information,
    and may follow up regarding this to help improve our product.</p>
} else {
    <p>Since you aren't signed in, we won't contact you regarding this.</p> 
}
<p>Error ID: @Model.Id</p> 
```

我还注意到在这个例子中这是一个 HttpPost。如果您正在使用 AJAX，那么您将希望以独特的方式处理错误。选择一个标准响应，您可以将其发送到所有 AJAX 代码都能正常处理的浏览器。也许通过在 javascript 警报中显示 ELMaH 错误 ID（作为一个简单的示例）。

我还通过 Global.asax 处理了一些特殊类型的 AJAX 错误：

```
protected void Application_EndRequest()
{
    if (Context.Response.StatusCode == 302 &&
        Context.Request.Headers["X-Requested-With"] == "XMLHttpRequest") 
```

HandleErrorAttribute 是一个不错的功能，但众所周知，将它与 ELMaH 结合使用需要额外的工作。[如何让 ELMAH 与 ASP.NET MVC [HandleError] 属性一起使用？](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:08:00.010

`try`并且`catch`是针对预期的异常，即您的用户输入了一个文件名，但它可能不存在，因此您想要捕获`FileNotFoundException`.

对于意外异常，请使用 MvcApplication 对象中的错误事件，例如

```
public class MvcApplication : HttpApplication
{
    protected void Application_Start()
    {
        this.Error += MvcApplication_Error;
        // Other code
    }

    private void MvcApplication_Error(object sender, EventArgs e)
    {
        Exception exception = this.Server.GetLastError();
        // Do logging here.
    }
} 
```

或者正如 Dima 建议的那样，您可以使用控制器级别的执行处理

```
protected override void OnException(ExceptionContext filterContext)
{
   // Do logging here.
} 
```

将尝试和捕获保留在您想要捕获预期并可以处理的代码上。“通用”错误处理只是混淆了潜在的问题，稍后您将不得不对其进行挖掘。

# ios - 将android代码移植到objective C

> ID：12208719
> 
> 赞同：0
> 
> 时间：2012-08-31T04:00:14.263
> 
> 标签：ios, xcode, mobile, porting

我有一个基本完成的android游戏，我想开始将它移植到iOS。

我对目标 c 完全陌生，我不知道从哪里开始。在 android 中，我有一个表面视图、画布和一个绘制和发布画布的游戏循环。什么是 iOS 等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:19:04.660

首先，要非常小心地尝试在语言之间进行音译。在许多情况下，您不能只学习 Java 习语并在 iOS 上“做同样的事情”。许多事情是用完全不同的方法完成的（线程是一个主要的例子；绘图也经常以不同的方式完成）。您应该先花一些时间学习该平台，否则您将获得“几乎”有效的东西并永远追逐错误和性能问题。

也就是说，你可能想学习的工具是[Cocos2D](http://www.cocos2d-iphone.org)，它是一个非常好的 3rdparty 工具包，用于在 iPhone 上构建 2D 游戏。这通常比尝试从头开始构建要好得多，并且应该具有较低的游戏开发学习曲线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:49:09.033

在不了解游戏性质的情况下很难知道应该如何移植，但大多数 iOS 游戏都是用可扩展的 OpenGL 编写的。它有一些优化技巧，可以在您构建渲染管道的方式中发挥重要作用。

如果您决定使用 OpenGL，您应该查看 NGMoco 提出的关于如何做到这一点的斯坦福演讲... [http://www.youtube.com/watch?v=VNr5I3ZRecE](http://www.youtube.com/watch?v=VNr5I3ZRecE)

# oracle - 可空字段上的左外连接，连接条件介于两者之间（Oracle）

> ID：12208726
> 
> 赞同：1
> 
> 时间：2012-08-31T04:01:31.107
> 
> 标签：oracle, left-join, between

我有两个表：`table1`带字段`c1`和`dt`（可为空）；`table2`与字段`start_dt`,`end_dt`和`wk_id`。现在我需要在 and 之间执行左外连接，`table1`以`table2`使`wk_id`介于`dt`and`start_dt`之间`end_dt`。我应用了以下条件，但有些`wk_id`不应该`NULL`被拉出`NULL`，有些行被重复。

```
where nvl(t1.dt,'x') between nvl(t2.start_dt(+), 'x') and nvl(t2.end_dt(+), 'x'); 
```

条件有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:53:10.233

```
select *
from table1 t1
left join table2 t2
    on t1.dt between t2.start_dt and t2.end_dt 
```

我建议您尝试新的 ANSI 连接语法。

另外，您只是`'x'`用作示例吗？还是这些`dt`列真的存储为字符串？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:22:30.003

您似乎缺少“ **table1 left outer join table2 on table1.some_field = table2.some_field** ”部分

像这样的东西：

```
select t1.c1, t1.dt, t2.start_dt, t2.end_dt, t2.wk_id
from table1 t1 left outer join table2 t2
on t1.some_field1 = t2.some_field1
where nvl(t1.dt,'x') 
between nvl(t2.start_dt, 'x') and 
nvl(t2.end_dt, 'x') 
```

# android - 检查 GPS Lat/Lng 点是否位于 Google 地图中的道路上

> ID：12208728
> 
> 赞同：4
> 
> 时间：2012-08-31T04:01:57.950
> 
> 标签：android, google-maps, android-maps

我正在开发一个在 android 中的导航应用程序。我想在用户越野时提示他。那么，如果我有一个 GPS Lat/Lng 点，是否可以确定该点是否位于道路上？是否有任何 API 支持此类检查？这通常在所有道路上完成，而不是在具有指定路径/​​多段线的情况下完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-28T13:10:53.747

您可以使用该`isLocationOnPath()`功能。您必须添加依赖项

```
dependencies {
    compile 'com.google.maps.android:android-maps-utils:0.4+'
} 
```

在您的应用程序 gradle 文件中。欲了解更多信息[http://googlemaps.github.io/android-maps-utils/#start](http://googlemaps.github.io/android-maps-utils/#start)

# java - 我可以在 MDB 中获取源 JMS 会话吗？

> ID：12208733
> 
> 赞同：4
> 
> 时间：2012-08-31T04:02:47.450
> 
> 标签：java, jakarta-ee, jms, websphere, distributed-transactions

这个问题主要集中在使用 Websphere MQ (WMQ) 时的 Websphere Application Server (WAS)，因为这是我最熟悉的。但是，我认为我所说的一切更普遍地适用于所有 Java EE 应用程序服务器，因为我坚持使用 Java 标准接口。我更喜欢与标准相关的解释，但我仍然会对特定于 WAS/WMQ 的答案感到非常兴奋。

JMS 1.1 为 JMS 定义了一种与应用服务器交互的机制。粗略的过程是在某个时候创建​​ ConnectionConsumer 来监视队列或主题。当消息出现时，JMS 实现从 ServerSessionPool 中获取一个 ServerSession 对象，将消息加载到与 ServerSession 关联的 Session 中，然后在 ServerSession 对象上调用 start()。然后，ServerSession 负责调度消息以供 MDB 在应用程序服务器线程上处理。MDB 将消息作为其 onMessage() 方法的一部分来获取，并且可以执行它需要的任何处理。

这一切都很好，直到 MDB 决定它想要发送另一条消息来响应它收到的消息。为此，MDB 必须查找或注入 ConnectionFactory 对象，获取 Connection，然后是 Session，然后是 MessageProducer，最后发送消息。这一切似乎都很浪费。作为向 MDB 传递消息的一部分，已经创建了 Connection 和 Session 对象。如果 MDB 能够以某种方式访问​​该会话，它就可以避免必须做所有这些额外的工作并避免必须创建所有这些额外的连接。作为成本的额外工作 - 为了只向请求消息发送回复消息，MDB 必须使用两个连接和两个会话（每个会话用于获取消息并发送响应）。使用全局事务时，我相信这迫使应用程序服务器将事务处理为两阶段提交事务（至少一些，如果不是全部，应用程序服务器可以通过将其处理为一阶段提交来优化仅涉及单个资源的全局事务） . 使事务成为两阶段事务显着增加了处理消息的开销，并且还引入了各种新的复杂性（不确定事务是最大的事务之一）。

JMS 1.1 规范指出：“由于许多侦听器将需要使用其会话的服务，因此侦听器可能要求将其会话作为构造函数参数传递给它”，这似乎表明它完全可以接受MDB 使用传递初始消息的会话也发送响应。但是，我不知道以标准方式从 MDB 检索此 Session 对象的任何机制。我也不知道以非标准方式检索它的任何机制。我什至在任何地方都找不到关于此的问题或博客文章。

所以，问题是：为什么会这样？JMS API 相当复杂，但是，我看不出其中有任何东西会使 MDB 难以使用为它提供原始消息的 Session 来发送响应（如果它可以访问它）。MDB 不能使用这个 Session 对象有什么原因吗？是否有符合标准的方法来访问会话？有不符合标准的方法吗？应用程序服务器/JMS 实现是否可以智能地将涉及单个 JMS 队列管理器上的两个连接上的操作的全局事务优化为单阶段提交事务（我对标准的研究和理解似乎表明这是不可能的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:28:25.480

> 应用程序服务器/JMS 实现是否可以智能地将涉及单个 JMS 队列管理器上的两个连接上的操作的全局事务优化为单阶段提交事务（我对标准的研究和理解似乎表明这是不可能的）？

我的理解如下： JMS 是一种特殊的 JCA 连接器。通常，连接器内部有一个与物理连接匹配的托管连接池。一个托管连接一次只能参与一个事务（但事务可以暂停和恢复，所以有点复杂）。bean 获得的是连接*句柄*。如果 bean 从给定事务中获取多个连接句柄，则句柄由同一个托管连接支持，这意味着它不应该涉及分布式事务。

当然，这取决于连接器和应用服务器的实现。实际上，您可以通过将 JMS 资源配置为非 XA 来尝试这一点（[应该有一个可以启用/禁用 XA 支持的选项](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/umj_ptcfw.html)）并查看是否可以在 MDB 中接收消息并将另一条消息发送到队列。它有效，这意味着不涉及分布式事务。

*注意：一种常见的优化是“[最后资源优化](https://stackoverflow.com/questions/132295/last-resource-optimization)”，它允许分布式事务中的一个参与者实际上是本地参与者，将其用作最后一个资源。最后一个参与者永远不会知道它属于分布式事务。*

# c# - 创建xml文件时如何包含编码

> ID：12208735
> 
> 赞同：0
> 
> 时间：2012-08-31T04:03:04.377
> 
> 标签：c#, xml

我想创建一个 XML 文件来存储信息。我正在使用以下代码。我想知道如何在代码中指定这个文件的编码。

当我尝试以另一种形式读取此文件时，日语中的字符会失真。

```
XmlDocument writer = new XmlDocument();
XmlElement root = writer.CreateElement("PatientFile");
writer.AppendChild(root);

XmlElement ID = writer.CreateElement("ID");
if (!string.IsNullOrEmpty(_a2Data.CurrentRecordId))
{
    ID.InnerText = _a2Data.CurrentRecordId;
}
root.AppendChild(ID);

XmlElement patientID = writer.CreateElement("PatientID");
if (!string.IsNullOrEmpty(_a2Data.PatId))
{
    patientID.InnerText = _a2Data.PatId;
}
root.AppendChild(patientID);

XmlElement patientName = writer.CreateElement("PatientName");
if (!string.IsNullOrEmpty(_a2Data.PatName))
{
    patientName.InnerText = _a2Data.PatName;
}
root.AppendChild(patientName);

XmlElement room = writer.CreateElement("Room");
if (!string.IsNullOrEmpty(_a2Data.RoomName))
{
    room.InnerText = _a2Data.RoomName;
}
root.AppendChild(room);
string folderName = ConfigurationManager.AppSettings["PatientXMLFiles"];
if (!Directory.Exists(folderName))
    Directory.CreateDirectory(folderName);

string fileName = ConfigurationManager.AppSettings["PatientXMLFiles"] + @"\" + _a2Data.CurrentRecordId + ".xml";
writer.Save(fileName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:27:02.917

`Save`您正在使用将文件名作为参数的方法的重载。此方法使用 UTF-8 编码。在创建根之前创建一个 xml 声明：

```
// ...

XmlDeclaration documentType = writer.CreateXmlDeclaration("1.0", "utf-8", null);
writer.AppendChild(documentType);

XmlElement root = writer.CreateElement("PatientFile");
writer.AppendChild(root);

// ... 
```

附带说明一下，如果您想控制创建文件的编码，则需要使用该[`Save`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save.aspx)方法的其他重载之一。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T04:38:19.883

我更改了我的代码以使用以下代码并且它可以工作。

```
XmlDocument writer = new XmlDocument();
XmlDeclaration xmldecl;
xmldecl = writer.CreateXmlDeclaration("1.0", null, null);
xmldecl.Encoding = "UTF-8";
writer.AppendChild(xmldecl); 
```

# javascript - 暂停-恢复执行用户提供的 javascript

> ID：12208736
> 
> 赞同：0
> 
> 时间：2012-08-31T04:03:06.030
> 
> 标签：javascript, ajax, interpreter, resume

我在网上到处搜索，但也许我只是问错了，谷歌给我回了错误的答案:)

我有一个基于 AJAX 的工具，用于测试 API 套件（它不是诸如soapUI 之类的众多可用工具之一，尽管目的有些相似）。它有许多“预打包”的 API 模板，开发人员可以在编写后端代码时使用这些模板。

到目前为止一切顺利，当用户选择要测试的 API 时，我可以在此交互模式下使用阻塞或非阻塞 AJAX 调用，如有必要，修改请求的文本并启动 API - 一旦完成结果显示。同样，这部分可以很容易地同步或异步完成。

一旦我完成了这个基本功能，我就想到`eval()`用户提供的代码非常简单，它可以做的不仅仅是一个 API 请求，有效地构建了一个可以进行流测试的工具（所以一个人可以写几行的“代码”登录，获取用户详细信息，然后执行一些其他 API）。

我的工具定义了一个简单的 API 调用函数，它基本上接受一个参数——要调用的 API 的名称（其余数据来自各种表单数据）。很明显，用户的 JS 代码可以做什么几乎没有限制——例如，它可以循环调用 API。

这是我遇到障碍的地方。我目前被迫通过阻塞 AJAX 调用运行我的 API 请求，因为我必须停止用户的脚本执行，直到该 API 完成。API 的性质是，在运行下一个 API 之前，通常需要前一个 API 返回结果（例如，“获取用户详细信息”必须等待“登录”API 调用去完成）。

使用非阻塞 AJAX，我尝试在调用回调函数后“剪切”代码并执行“其余部分”，但很容易看出这在一般情况下效果不佳 - 当“cut”恰好位于代码块内，例如`if-else`循环或循环。

试图快速手动解析和执行 JS 成为创建我自己的虚拟机的一个普遍问题，这绝对超出了我愿意为此付出的努力（除非我认为值得一年两年的全神贯注，但为此我可能需要中彩票）。

我的问题是 - 是否有一种（最好是优雅的？）方法来停止脚本的执行，同时允许用户提供一个“简单”的线性代码，就像它是单线程执行一样运行？

# sharepoint-2010 - 如何使用 vb 或 c# 类将文件上传到 Office365 SharePoint？

> ID：12208747
> 
> 赞同：1
> 
> 时间：2012-08-31T04:04:52.923
> 
> 标签：sharepoint-2010, office365

Office 365 的新手。我已经在 c# 和 powershell 中上传了代码。我想知道是否已经有现成的代码可以将本地文件上传到 Office 365 共享点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T23:52:28.633

SharePoint Online 提供各种 API 来处理 SharePoint 和存储在 SharePoint Online (SPO) 中的数据。

您可以使用任何编程语言的 RESTful API (ListData.svc) 轻松地将新数据添加到 SharePoint。请参阅[http://msdn.microsoft.com/en-us/library/ff521587.aspx](http://msdn.microsoft.com/en-us/library/ff521587.aspx)

# c# - 如何在文本框中只接受数字和单个句点

> ID：12208750
> 
> 赞同：2
> 
> 时间：2012-08-31T04:05:22.363
> 
> 标签：c#, .net, wpf, string, textbox

我有一个数据绑定的 WPF 文本框。我需要限制文本框上的用户输入，以便它只接受数字和一个句点（用于显示小数）。

我知道我可以以“Winforms”的方式处理这个问题并验证 KeyPress 事件上的每个输入，但我想知道在 WPF 中是否有更清洁甚至是正确的方法来执行此操作（特别是因为我正在对文本框进行数据绑定）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T04:16:53.740

使用 WPF 提供的 ValidationRules。

xaml 将是：

```
<TextBox>
    <TextBox.Text>
        <Binding Path="Name">
            <Binding.ValidationRules>
                <ExceptionValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

文本框属性的代码将是（使用正则表达式进行验证）：

```
public string Name
{
    get { return _name; }
    set
    {
        _name = value;
        if (!Regex.IsMatch(value, @"^((?:[1-9]\d*)|(?:(?=[\d.]+)(?:[1-9]\d*|0)\.\d+))$"))
        {
            throw new ApplicationException("Please enter only numbers/decimals.");
        }
    }
} 
```

来源：[WPF 中的验证](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation#exceptionValidationRule)

* * *

上面给出的正则表达式：`^((?:[1-9]\d*)|(?:(?=[\d.]+)(?:[1-9]\d*|0)\.\d+))$`可以在这个[Rubular 链接上进行测试](http://rubular.com/r/0lKGNVGXCi)

正则表达式将匹配这些：

```
1.2
22522
0.33
3.90000 
```

但不是这些：（您可以调整正则表达式以允许其中一些）

```
.999
23.35.1343
03423.23423 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T05:44:42.957

数据绑定将影响传递给/从您数据绑定到的对象的值。要阻止用户按键，您要么需要使用屏蔽文本框（在 winforms 中，不确定 WPF），要么您需要处理文本框中的 KeyPressedEvent 并停止您不想按下的键。

我使用下面的代码只允许数字和一位小数

```
private void textBoxPrice_KeyPress( object sender, KeyPressEventArgs e )
        {
            if( !char.IsControl( e.KeyChar )
                && !char.IsDigit( e.KeyChar )
                && e.KeyChar != '.' )
            {
                e.Handled = true;
            }

            // only allow one decimal point
            if( e.KeyChar == '.'
                && ( sender as TextBox ).Text.IndexOf( '.' ) > -1 )
            {
                e.Handled = true;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:32:08.523

只需使用按键事件，并使用 ascii 字符验证按键事件。

e.KeyCode >47 && e.KeyCode <58 将限制用户不要按数字以外的任何字母。

如果您需要确切的代码示例，请稍等 :)

# git - 我无法在 git 上删除远程 master 分支

> ID：12208751
> 
> 赞同：101
> 
> 时间：2012-08-31T04:05:25.210
> 
> 标签：git, github

我需要删除一个主分支，但事实证明这很难。我只想清理那个分支并开始新的。我正在从 dev 分支中删除。我希望 GitHub 上的 master 干净。

```
 # git push origin --delete master

> To https://github.com/mymasterb.git  ! [remote rejected] master
> (deletion of the current branch prohibited) error: failed to push some
> refs to 'https://github.com/mymaster.git' 
```

我如何简单地从一个新的石板开始我的主人？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-08-31T04:19:24.657

正如Matthew Brett在“[删除您的主分支”中所解释的，](http://matthew-brett.github.com/pydagogue/gh_delete_master.html)**您需要更改您的 GitHub 存储库默认分支**。

> 您需要转到您的分叉存储库的 GitHub 页面，然后单击“设置”按钮。
> 
> 单击左侧的“分支”选项卡。屏幕顶部附近有一个“默认分支”下拉列表。
> 
> 从那里，选择占位符（其中占位符是您的新默认分支的虚拟名称）。
> 
> 确认您要更改默认分支。
> 
> 现在你可以（从命令行）：

```
git push origin :master 
```

或者，自 2012 年以来，您可以[直接在 GitHub 上删除相同的分支](https://help.github.com/articles/creating-and-deleting-branches-within-your-repository/)：

[![GitHub删除](../Images/f1d2894a6aa5613daf24fdb2c1a73bfc.png)](https://i.stack.imgur.com/pA1fH.png)

这是[在 2013 年 9 月宣布的](https://github.blog/2013-01-09-create-and-delete-branches/)，也就是我最初写下这个答案的一年后。

> 对于文档修复、拼写错误等小的更改，或者如果您只是一个行走的软件编译器，**您可以在浏览器中完成很多工作，而无需将整个存储库克隆到您的计算机上**。

* * *

注意：对于 BitBucket，[Tum](https://stackoverflow.com/users/2424735/tum)[在评论中](https://stackoverflow.com/questions/12208751/i-cant-delete-a-remote-master-branch-on-git/12208843?noredirect=1#comment95949525_12208843)报告：

> Bitbucket 也差不多
> 
> ```
> Repo -> Settings -> Repository details -> Main branch 
> ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2020-03-07T18:43:38.093

要从字面上回答这个问题（因为 GitHub 不在问题标题中），还要注意超级用户上的[这篇文章。](https://superuser.com/questions/748058/how-do-i-delete-origin-master-in-git)**编辑：**在相关部分复制了此处的答案，为了清楚起见，在方括号中稍作修改：

> 您被拒绝是因为您试图删除您的来源当前已“签出”的分支。
> 
> 如果你可以直接访问 repo，你可以打开一个 shell [in the bare repo] 目录并使用 good old`git branch`查看当前分支的来源。要将其更改为另一个分支，您必须使用`git symbolic-ref HEAD refs/heads/another-branch`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-12-02T16:33:40.350

最快的方法是**将默认分支从 master 切换到另一个** *，您可以从 web 界面中删除 master 分支*。

# ajax - google docs/drive 的即时编辑是如何工作的？

> ID：12208752
> 
> 赞同：2
> 
> 时间：2012-08-31T04:05:34.377
> 
> 标签：ajax

如果您曾经使用过 google docs/google drive，他们有一个功能，即两个用户可以同时编辑一个文档，并且该文档会实时更新它，就像您打开了 MS Word 但有两个鼠标和两个键盘一样。

我对这实际上是如何工作的很感兴趣。我很确定他们不会每秒写入数据库并检查它，那么它背后的机制是什么？你能解释一下他们如何做到这一点的基本概念吗？

PS：我不知道用什么标记这个，任何建议都会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:13:56.870

在 .NET 中，您可以通过在服务器端创建 WCF REST 服务并在客户端创建 JSON 来实现此目的。

[这](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)是设置 WCF REST 服务的一个很好的示例：

连接客户端是最简单的部分。这是一个如何使用 JQuery 处理它的示例：

```
 function GetData()
    {            

        var URL = 'http://localhost:50164/RestServiceImpl.svc/json4'; //REPLACE this with the URL to your WCF service
        $.getJSON(URL, function (data) { ShowResult(data); });           

    }            

    function ShowResult(data)
    {
        $('#tblMyTable').dataTable(data); //USING the dataTable plugin for jquery download at: http://datatables.net/
    } 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:10:24.377

每当用户对打开的文档进行更改或在其周围导航时，都会向 Google Docs 发出异步请求，通知他们这一点。GDoc 服务器然后使用其他客户端打开的 HTTP Comet 请求来通知他们该用户的操作。

参考：[在维基百科上阅读彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)

# visual-studio-2010 - 无法在 Visual Studio 2010 中编辑任何配置文件

> ID：12208755
> 
> 赞同：0
> 
> 时间：2012-08-31T04:05:53.237
> 
> 标签：visual-studio-2010

我尝试在 Visual Studio 中打开任何类型的 .config 文件，但看不到 XML 内容，我只看到一个没有内容的空白蓝色窗口。我只安装了 Resharper 6（与 Agent Johnson）和 Nuget。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:58:45.303

我经历了同样的行为。我使用了 Resharper 6 的试用版并将其禁用。从那一刻起，我再也无法在 Visual Studio 编辑器中打开 XML 文件了。VS 需要很长时间和 50% 的 CPU 才能决定它不会显示 xml 和基于 xml 的文件（例如 web.config）的内容。

没有找到合适的解决方案。

我终于决定试试 VS 安装程序的修复选项。修复 VS 后，我重新启用了 SP1，现在我可以在 VS 中编辑 xml 文件。一切似乎都很顺利。其他插件仍然有效，我找不到任何损坏的东西。

这是我第一次修复VS。我不完全相信 SP1 的修复功能和重新启用足以完全恢复 VS。但到目前为止一切都很好。实际上，我的手指交叉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:24:01.223

您是否有可能在没有意识到的情况下删除了配置文件的内容？检查您的存储库以查看是否进行了任何修改。

还可以尝试使用另一个文本编辑器打开文件，以检查文件是否包含任何内容。

# mysql - 数据库导入错误

> ID：12208756
> 
> 赞同：0
> 
> 时间：2012-08-31T04:05:53.800
> 
> 标签：mysql, database, import

我是 MySQL 新手，我可以在本地 phpmyadmin 中导出和导入数据库，但是当我尝试将数据库导入我的服务器时，显示以下错误“#1142 - CREATE command denied to user 'C163071_user'@'127.0 .0.1' for table 'test'“我不知道是什么原因，谁能帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:20:32.987

您收到的错误消息非常简短。不幸的是，我之前也使用过 phpmyadmin，所以我知道你正在经历的痛苦。

我建议检查您的用户权限并检查是否没有并发用户访问数据库（我不确定 phpmyadmin 是否不允许并发访问，但我不会感到惊讶）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:21:11.630

如果您是网络托管公司的客户，那么这可能是权限问题。客户将无法随意创建或删除 MySQL 数据库。相反，您将被限制在一个 MySQL 数据库中，该数据库要么已经为您创建，要么可以通过您的虚拟主机控制面板代表您创建。如果这些都不适用，请联系您的房东寻求支持。

编辑：啊，我看到问题在于创建表，而不是数据库。这听起来仍然像是权限问题。我建议您联系您的主机寻求支持。

# php - 如何获取 simple_html_dom 函数的实例以在类中使用

> ID：12208768
> 
> 赞同：1
> 
> 时间：2012-08-31T04:07:58.697
> 
> 标签：php, simple-html-dom

我有课`ClassA`，想在这个课上使用 simple_html_dom 的函数。我怎样才能做到这一点？这是 simple_html_dom 类的链接[http://www.megafileupload.com/en/file/366382/simple-html-dom-rar.html](http://www.megafileupload.com/en/file/366382/simple-html-dom-rar.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:11:24.800

```
<?php
    Class A
    {
        private $simpleHTML;

        function __construct()
        {
            $this->simpleHTML = new simple_html_dom(); 
            //now you can call all simple html functions using $this->simpleHTML->..
        }

        //define file_get_html as a class method. You can call this as 
        // $x = new A();
        //$x->file_get_html..(externally) or $this->file_get_html(.. (internally)
        function file_get_html($url, 
                        $use_include_path = false, 
                        $context=null, $offset = -1, 
                        $maxLen=-1, $lowercase = true, 
                        $forceTagsClosed=true, 
                        $target_charset = DEFAULT_TARGET_CHARSET, 
                        $stripRN=true, 
                        $defaultBRText=DEFAULT_BR_TEXT)
        {
            // We DO force the tags to be terminated.
            $dom = new simple_html_dom(null, $lowercase, $forceTagsClosed, $target_charset, $defaultBRText);
            // For sourceforge users: uncomment the next line and comment the retreive_url_contents line 2 lines down if it is not already done.
            $contents = file_get_contents($url, $use_include_path, $context, $offset);
            // Paperg - use our own mechanism for getting the contents as we want to control the timeout.
            //$contents = retrieve_url_contents($url);
            if (empty($contents))
            {
                return false;
            }
            // The second parameter can force the selectors to all be lowercase.
            $dom->load($contents, $lowercase, $stripRN);
            return $dom;
        }
    }
?> 
```

# solr - 在 solr 搜索中，多值字段相对于单个 CSV 字段的优势是什么？

> ID：12208769
> 
> 赞同：0
> 
> 时间：2012-08-31T04:08:15.030
> 
> 标签：solr

我是 Solr 的新手，并且正在为我的下一个项目设计一个 solr shema。

我的问题是当与以 CSV 格式保存多值的单个字段相比时，多值字段的优势（效率/执行时间等）是什么。

例如：让我们考虑一个名为 car 的字段。如果我正在设计一个 solr 搜索引擎，那么哪个更好。请忽略模式/文档语法。

```
<Car>A</Car>
<Car>B</Car>
<Car>C</Car> 
```

或者

```
<Car> A,B,C</Car> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:33:43.843

如果该字段有多个值，您可能应该选择多值字段。

多值的东西可以防止错误的匹配。
例如，如果您有一个包含多个作者的文档。AB & CD
如果您将其作为单个字段进行索引，则当您搜索短语匹配“B C”（或带有小斜率）时，它可能会匹配此文档，因为单词会出现在行中。

多值字段将通过适当的位置增量值阻止此类匹配。

此外，多值字段将允许您正确过滤结果。
`q=authores:"B C"`或者更好，或者使用标签过滤掉结果，这样`q=query&fq=authors:"B C"`可以利用过滤器缓存并增加查询性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:49:04.380

通过使用多值字段，您将拥有更大的灵活性。如果您使用多值字段，您可以按如下方式搜索和过滤具有特定值的结果。

```
q=car:A or fq=car:A 
```

作为性能，在索引/搜索多值字段和单值字段时应该没有任何区别。

在[这篇邮件](http://web.archiveorange.com/archive/v/AAfXf5z712YsEs7WCq7z)中，他们说多值字段会影响构面性能。

> MultiValued 字段始终使用 TermEnum 算法而不是 FieldCache 算法。
> 
> TermEnum 适用于字段中有限数量的不同索引术语，并且允许每个文档每个字段有多个术语，而 FieldCache 适用于相对于文档数量的大量索引值，并且每个字段只允许单个术语每个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T00:50:22.740

基本上，使用 CSV 内容字段，您必须自己标记所有内容才能获得良好的搜索结果。使用多值字段，您将通过 Solr 完成此操作。看一下例子

CSV 字段

```
<str name="Pet">Dog,Cat</name> 
```

如果您想搜索包含“狗”类型宠物的所有文档，您必须配置您的 CSV 字段类型，以便为您标记文本。因此，您可以分别搜索“狗”或“猫”。

现在有一个多值字段

```
<arr name="Pet">
<str>Dog</str>
<str>Cat</str>
</arr> 
```

您不需要任何额外的代码来搜索“狗”。

另一点是您不能使用 CSV 字段进行分面。看看[http://wiki.apache.org/solr/SimpleFacetParameters](http://wiki.apache.org/solr/SimpleFacetParameters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T06:57:28.053

我认为主要优势是索引的设计。如果将这 3 个值放在一个字段中，则此字段表示在搜索 1 个值之后。如果您使用多值字段，将为每个值创建并显示一个新字段。这有什么意义：

想象一下，你想扩展你的索引。新字段之一的值可能类似于

```
<LengthOfCar>5,0</LengthOfCar> 
```

如果您现在想要使用给定的结果，您将无法分辨哪些值是多值的，哪些不是，因为您将它们全部用“，”分隔。也许对您来说这很清楚，但所有其他用户都不会有所作为。结果将是单个字段：

```
<doc>
<str name="Car">A,B,C</str>
</doc> 
```

您的多值字段的结果将是：

```
<doc>
<arr name="Car">
<str>A</str>
<str>B</str>
<str>C</str>
</arr>
</doc> 
```

如您所见，多值字段的结果更有意义。而且它在某种程度上更容易使用它（也许你想使用 xslt 或其他东西）。

根据您的效率问题：我认为性能和执行时间不会有任何差异。Solr 非常快，如果有任何差异，您甚至都不会注意到差异。

所以我建议你使用多值字段，因为 1 个字段有 3 个不同的值。

# mongodb - 在 mongo 聚合中选择 * group by

> ID：12208771
> 
> 赞同：11
> 
> 时间：2012-08-31T04:08:33.810
> 
> 标签：mongodb

我正在尝试做一些我认为很简单的事情。假设我在 mongo 中有一系列记录，它们有一个公共键和可变数量的属性。我想在记录中选择所有属性和按名称分组。例如

```
{ Name: George, x: 5, y: 3 }
{ Name: George, z: 9 }
{ Name: Rob, x: 12, y: 2 } 
```

我想生成一个如下所示的 CSV：

```
Name     X   Y   Z
George   5   3   9
Rob      12  2 
```

试过了

```
DB.data.aggregate({ $group : { _id : "$Name" } }) 
```

不幸的是，我将所有名称作为记录取回，而不是所有可能属性的联合。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T05:01:00.090

如果要组合属性，则需要将它们添加到`group`. 例如，[`$addToSet`](http://docs.mongodb.org/manual/reference/aggregation/#_S_addToSet)用于查找按每个名称分组的 x,y,z 属性的唯一值：

```
db.data.aggregate(
    { $group : {
            _id : "$Name",
            x: { $addToSet: "$x" },
            y: { $addToSet: "$y" },
            z: { $addToSet: "$z" },
    }}
) 
```

回报：

```
{
    "result" : [
        {
            "_id" : "Rob",
            "x" : [
                12
            ],
            "y" : [
                2
            ],
            "z" : [ ]
        },
        {
            "_id" : "George",
            "x" : [
                5
            ],
            "y" : [
                3
            ],
            "z" : [
                9
            ]
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:32:39.467

这是另一种方法：

```
$connection = 'mongodb://localhost:27017';
$con        = new Mongo($connection); // mongo connection

$db         = $con->test; /// database
$collection = $db->prb; // table

$keys       = array("Name" => 1,"x"=>1,"y"=>1,"z"=>1);

// set intial values
$initial    = array("count" => 0);

// JavaScript function to perform
$reduce     = "function (obj, prev) { prev.count++; }";

$g          = $collection->group($keys, $initial, $reduce);

echo "<pre>";
print_r($g); 
```

你会得到这样的答案（**不是确切的输出**）：

```
Array
(
    [retval] => Array
        (
            [0] => Array
                (
                    [Name] => George
                    [x] => 
                    [y] =>
                    [z] =>
                    [count] => 2
                )

            [1] => Array
                (
                    [Name] => Rob
                    [x] => 
                    [y] =>
                    [z] =>
                    [count] => 1
                )

        )

    [count] => 5
    [keys] => 3
    [ok] => 1
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T15:06:55.087

Stennie 的解决方案要求您确切知道要从您正在查询的集合中的每个匹配项中返回哪些属性。情况并非总是如此。

我们必须在我们正在编写的 Groovy on Grails 应用程序中解决这个问题。

我们编写了一个这样的方法来处理“按 X 查找”请求：

```
private List<DBObject> findDistinctPages(Map by) {
    def command =
        new GroupCommand(
                (DBCollection) db.pages,
                new BasicDBObject(['url': 1]),
                new BasicDBObject(by),
                new BasicDBObject([:]),
                'function ( current, result ) { for(i in current) { result[i] = current[i] } }',
                ''
        )
    db.pages.group(command).sort { it.title }
} 
```

然后在我们的代码中调用它，如下所示：

```
def pages = findDistinctPages([$or: [[type: 'channel'], [type: 'main']]]) 
```

这通过将初始查询的结果传递给 GroupCommand 末尾的 javascript 函数来实现。Mongo 仅返回您在初始查询中指定的属性，没有其他任何内容，因此您必须第二次迭代结果，并使用来自 mongo 的其余数据填充它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-19T05:53:44.547

用于`$addToSet`组，它会工作

```
db.data.aggregate(
    { $group : {
            _id : "$Name",
            x: { $addToSet: "$x" },
            y: { $addToSet: "$y" },
            z: { $addToSet: "$z" },
    }}
) 
```

# c - 程序执行语句失败

> ID：12208772
> 
> 赞同：0
> 
> 时间：2012-08-31T04:08:39.770
> 
> 标签：c, unix, system-calls

我非常了解 C 编程，但我对 Unix 系统调用没有太多经验。很长一段时间后，我正在重新探索我的 Unix 知识。所以我从 fork 和 execlp 系统调用开始。我在 ubuntu_linux 上练习示例。

这是一个教科书示例程序，它接受来自 STD_IN 的命令并在子进程中执行它。

```
int main (int argc, char *argv[]) {
   char command[MAX_LINE];
   pid_t pid;
   int   status;

   printf ("%% ");
   while (fgets (command,MAX_LINE,stdin ) != NULL){
        if (command[strlen(command)-1] == '\n')
          command[strlen(command)-1] = '\0';

        if ((pid=fork ()) < 0) {
           perror ("fork failed :  \n");
        }

        if (pid == 0) {
           printf (" I am child and my PID is %d",getpid ());
           execlp (command, command, (char *)0);
           perror ("couldn't execute:"); 
           exit(127);
        }

        printf (" I am parent and my PID is %d\n ",getpid ());
        if ((pid = waitpid (pid, &status, 0)) < 0){
            perror("waitpid error\n");
        }

        printf ("%% ");
    }
    exit (0);
} 
```

我放了一些语句，但只要命令成功执行`printf`，程序就不会打印**“我是孩子，我的 PID 是”这一行。**但是，如果输入命令不正确并且失败，它会打印上面的行。

我希望在这两种情况下都会打印该行，因为 print 语句是之前的`execlp`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:44:57.820

这应该在执行之前刷新标准输出。

```
printf (" I am child and my PID is %d",getpid ());
fflush(stdout);
execlp (command, command, (char *)0); 
```

# jquery - jquery mobile - 导航到另一个页面并返回时调用两次

> ID：12208773
> 
> 赞同：1
> 
> 时间：2012-08-31T04:08:54.500
> 
> 标签：jquery

我对 jqm 很陌生，我尝试了大约 20 种不同的东西，并且已经在这几个小时了，我能开始工作的最好的就是下面的代码。

```
$(function() {
$('.load_more').live("click",function() {
//my ajax call here

success: function(htmldat){
    $("#more").remove();
       $("#updates").append(htmldat).listview('refresh');
       $("#more").trigger('create');

}
});
}
return false;
});
}); 
```

我的页面所做的是将数据库中的 10 条记录加载到列表视图中，我有一个按钮（.load_more）将接下来的 10 条记录附加到列表视图中。一旦我离开页面并返回并单击按钮，它就会触发两次。我已经提出了很多建议，但无法让一个工作，任何帮助将不胜感激。

还有我在使用它的页面上的结束正文标记之前加载的代码。

编辑

以下代码似乎有效，尽管当我用我的函数替换警报时它不起作用，没有触发任何事件。

```
$(document).delegate("#clickers", "pageinit", function () {
  $(".load_more").off('click').on('click', function () {
    alert("hello");
  });
}); 
```

单击按钮时，它会获取数据并将其附加到列表视图中，当我重新创建按钮时可能会杀死事件吗？

```
$("#more").remove();
$("#updates").append(htmldat).listview('refresh');
$("#more").trigger('create'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:16:19.527

阅读您的编辑后，很明显问题肯定在于重新创建按钮。事件处理程序绑定到创建处理程序时存在的 DOM 元素；它们并不适用于具有相同 ID 的所有后续元素。一个简单的解决方案是在每次创建时绑定处理程序：

```
var recreateButton = function() { 
    $("#more").remove();
    $("#updates").append(htmldat).listview('refresh');
    $("#more").trigger('create');
    $("#more").off('click').on('click', function(){});
} 
```

或者，您可以只使用按钮元素上的 onClick 事件在每次单击它时调用一个函数。

# asp.net-mvc-3 - 无法从多个模型创建单个控制器 - MVC3

> ID：12208774
> 
> 赞同：-1
> 
> 时间：2012-08-31T04:08:59.077
> 
> 标签：asp.net-mvc-3, crud

我有两个班级，名为*Company*和*Address*。

我为两者创建了一个 ViewModel。

但是当我转到控制器并右键单击添加控制器时，输入控制器名称，模型类为 newViewModel，数据上下文类为 dbModel。

它给了我错误，并且没有为 CRUD 创建控制器和视图。

我究竟做错了什么？

```
public class nameViewModel
{
    public Company Company { get; set; }
    public Address Address { get; set; }
}

Company Table:
CompanyId
Name
Address
Value

Address Table:
AddressId
Address

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:37:25.650

根据您提出的问题，很明显您应该从头开始并完成教程。自 MVC2 的 NerdDinner 教程以来，我还没有完成过教程，但本教程似乎是一个很好的起点：[ASPNet MVC3 入门](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)。在回答您关于在一个视图中返回两个控制器的问题时，控制器（或控制器上的操作）只是响应 Web 请求而运行的代码。在该操作中，您将创建 ViewModel (nameViewModel) 的实例并将其返回到需要该 viewmodel 的视图。

# python - 输入要按数组或节计数的整数

> ID：12208788
> 
> 赞同：0
> 
> 时间：2012-08-31T04:11:08.440
> 
> 标签：python

我正在寻找在 python 中创建一个程序，要求用户以 [] 格式输入数字列表。

然后它必须计算并显示列表中有多少在 1 和 10、10 和 20、20 和 30 之间的数字。

10 的每个部分都将被计算，无论该部分中是否有一个数字，这意味着它可以返回 0。

这是我到目前为止所拥有的。

```
the_input = raw_input("Enter numbers... ") 

the_list = [int(x) for x in the_input.strip("[]").split(",")] 

group_counter = {} 

for number in the_list:
    group_start = (number // 10) * 10 
    group_end = group_start + 9 
    group_name = "%s-%s" % (group_start, group_end) 

    group_counter.setdefault(group_name, 0) 
    group_counter[group_name] += 1 

for name, count in group_counter.items():
    print "There were %s in %s" % (count, name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:15:43.377

`collections.Counter`是你的朋友吗？

```
import collections

the_input = raw_input("Enter numbers... ") 
the_list = [int(x) for x in the_input.strip("[]").split(",")] 
group_counter = collections.Counter(x//10 for x in the_list)
bin_range = xrange(min(group_counter.keys()), max(group_counter.keys()) + 1)
for bin_tens in bin_range:
    print "There were {} in {} to {}".format(group_counter[bin_tens], bin_tens*10, bin_tens*10+9) 
```

编辑：如果您希望打印的计数仅显示 0-9 到 90-99，则只需将 bin_range 行更改为`bin_range = range(10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:23:14.957

使用您的原始格式：

```
the_input = raw_input("Enter numbers... ") 

the_list = [int(x) for x in the_input.strip("[]").split(",")] 

group_counter = {'0-9': 0, '10-19': 0, '20-29': 0}

for number in the_list:
    if number < 0 || number >= 30:
        continue;
    if number < 10:
        group_counter['0-9']++;
        continue;
    if number < 20:
        group_counter['10-19']++;
        continue;
    if number < 30:
        group_counter['20-29']++;
        continue;

for name, count in group_counter.items():
    print "There were %s in %s" % (count, name) 
```

# php - 在 PHP 中更新第三方 Cookie

> ID：12208791
> 
> 赞同：1
> 
> 时间：2012-08-31T04:11:27.067
> 
> 标签：php, cookies

我正在尝试查看是否可以使用 PHP 编辑第三方 cookie 的 cookie（最终我想覆盖邮政编码 cookie）。虽然我可以使用 setcookie 在默认目录中添加 cookie，但我无法使用它来添加或编辑现有 cookie。以下是 Firefox 中的 cookie 记录示例：

```
Name: nyt-recmod
Content: 1
Domain: .nytimes.com
Path: /
Send For: Any type of connection
Expires: Saturday, September 29, 2012 10:31:07 PM 
```

以及我用来尝试更改它的两行测试代码：

```
$rv = setcookie('nyt-recmod', '0', time()+3600,'/','.nytimes.com',0);  
$rv = setcookie('nyt-recmod', '0', time()+3600,'/','./nytimes.com',0); 
```

为了在 PHP 中修改这个 cookie，我应该改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:43:59.947

您不能读取或设置其他域的 cookie。这是 HTTP 规范的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:12:56.697

你不能那样做。

浏览器也以不同的方式存储 cookie。bowser 为每个站点创建目录并将该站点的 cookie 存储在其各自的文件夹中。因此，由于所有的 cookie 并不相同，您的代码可能找不到 cookie。

至少在 Firefox 中是这样的。您可以在**工具**->**选项**->**隐私**-> 单击“删除单个 cookie”中进行检查。

# c - C 字符串文字所需的转义字符

> ID：12208795
> 
> 赞同：4
> 
> 时间：2012-08-31T04:12:12.660
> 
> 标签：c, string, escaping

我有一个以零结尾的字符串：

```
char* s = ...; 
```

我正在生成 C 源代码（在运行时），我想输出一个表示 s 的字符串文字，它将在生成的 C 程序中生成与 s 相同的字符串。

我使用的算法是：

```
Output "

Foreach char c in s
    if c == " output \"
    else if c == \ output \\
    else output c

Output " 
```

`"`除了and之外，我还需要对其他字符进行特殊处理`\`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T04:14:36.980

*   您*必须*`"`对、`\`和`\r`and`\n`进行编码`\0`（`\?`正如 Michael Burr 所[提到的](https://stackoverflow.com/a/12209218/61974)）。不这样做会破坏你的代码。
*   您*应该*使用十六进制转义码对非 ASCII 字符进行编码，例如`\x80`. 如果您的源代码中有非 ASCII 字符，则它是实现定义的。未能对这些字符进行编码将适用于某些编译器，但它可能会破坏其他编译器。
*   您*可以*对 ASCII 不可打印字符进行编码。`\t`如果您对, `\b`,等字符使用转义码，它将提高生成的源代码的可读性`\x05`。如果您不这样做，您的代码仍然可以工作，但可能难以阅读。
*   您*不需要*`'`在双引号字符串中转义。这是合法的，但它是不必要的，它不会使源代码更具可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T05:09:19.633

标准 C 中的转义序列集包括以下内容：

```
\' 
\" 
\? 
\\ 
\a  (alert - usually Ctrl-G)
\b  (backspace)
\f  (form feed)
\n  
\r
\t
\v  (vertical tab) 
```

请注意，`\?`那里的问号可以转义，因此`"??!"`可以将类似的序列编码为`"\?\?!" 以防止它被解释为可怕的三合字母。

为了完整起见，我会考虑处理其中的每一个（尽管其中一些喜欢`\a`并且`\v`我可能会使用`\x`转义序列进行转义 - 这可能取决于您的需要）。`\x`此外，对于任何其他不可打印的字符，我会使用转义序列转换为其十六进制等效项。

# android - 如何根据 GPS 时间切换活动

> ID：12208799
> 
> 赞同：0
> 
> 时间：2012-08-31T04:13:23.630
> 
> 标签：android, gps

我有一个活动，它使用位置侦听器中 onLocationChanged 中的代码结果更新显示。一切正常，但我想在一段时间后退出另一个活动。

我尝试插入我在菜单中使用的相同代码来切换位置侦听器中的活动，但它不起作用。我得到一个错误。

```
 if (dTime < -30){
      Intent target1 = new Intent(this, Waypoint2.class);
      startActivity(target1);
    } 
```

有谁知道如何做到这一点。谷歌和 stackoverflow 的搜索都是空的。

更新：

这个问题似乎是 Jeet 解决的问题和我离开位置经理中途任务的事实的结合。终点（）; 语句将执行停止代码并将代码更改为此也有效，并且对于遇到此问题的任何人来说都更清楚。

```
 if (dTime < -30){
                //finish();
                if(lm != null) {
                    lm.removeUpdates(ll);
                }
                ll = null;
                lm = null;
                Intent target = new Intent(Start2.this, Waypoint2.class);
                startActivity(target);
            } 
```

//finish(); 之间的代码 Intent 是 onStop 部分中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:25:07.960

错误可能是，方法 Intent(LocationListener, Class) 未定义，因此您需要将其替换为：

```
Intent target1 = new Intent(context, Waypoint2.class); 
```

其中 context 是 Activity 的上下文，您可以通过显式传入 Constructor 或 YourActivityName.this 来获取 Activity 的 Context，如果 LocationListener 与您的活动在同一个文件中实现。

# php - 访问 $GLOBALS 数组用户添加的变量作为预定义变量

> ID：12208803
> 
> 赞同：0
> 
> 时间：2012-08-31T04:13:51.490
> 
> 标签：php, globals

我想知道我们是否可以在`$GLOBALS`数组中添加一个变量，该变量可以作为预定义的 $GLOBALS vars 访问，例如 super globals `$_POST`, `$_REQUEST`.

我添加的示例

```
$GLOBALS[‘_PARAMS’] = 'lorel ipsam'; 
```

现在是否可以访问它

`$_PARAMS`代替`$GLOBALS[‘_PARAMS’]`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:33:51.880

您无法创建自己的超级全局变量，但可以使用静态类创建可在全局命名空间中访问的内容。

```
class PARAMS {
static $variable1 = 'xyz';
static $variable2 = 'abcdef';
static $variable3 = array('x','y','z');
} 
```

然后在代码中的任何位置（在其他类、函数等）中，您都可以这样做来引用变量：

```
function useless_function() {
    if ( PARAMS::$variable1=='xyz' ) {
      PARAMS::$variable1 = 'zyx';
    } else {
      PARAMS::$variable1 = 'xyz';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:33:17.707

是的，除非您尝试使用功能。

# jsp - 如何在 JSP 页面中提供像 MS Word 这样的文档编辑器？

> ID：12208804
> 
> 赞同：3
> 
> 时间：2012-08-31T04:13:51.507
> 
> 标签：jsp, ms-word, saas

我想在我的项目中提供**SaaS 。**

我很担心如何在我的网站上提供一个文档编辑器，因为我的项目必须有一个简单的文档编辑器。

我可以在页面的**iframe中使用****javascript**创建一个简单的，但我仍然无法将其保存为 pdf 或 doc ！！！

 **那么如何使**textarea**中的格式化文本保存为**pdf/doc**文档呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:53:36.643

如果我理解正确，这里有两个问题：

1.  如何在 html 页面上显示文本编辑器（所见即所得编辑器）？
2.  如何将格式化文本保存为`.pdf`or `.doc`？

回答第一个问题：
您可以使用任何可用的文本编辑器并将其嵌入到您的 JSP 中：

1.  开源免费：[CK-editor](http://ckeditor.com/demo "官方网站上的演示")
2.  [Kendo-UI 编辑器](http://demos.kendoui.com/web/editor/index.html "官方网站上的编辑器演示")，Kendo UI Web 是免费和开源的，而不是其他组件。
3.  开源免费：[TinyMCE](http://www.tinymce.com/tryit/full.php "官方网站上的完整演示")

上述所有编辑器都可以根据您的需要轻松嵌入和配置。

回答第二个问题：

1.  通常的做法是将格式化的内容（即 html 源代码）保存在数据库中，然后提供一个选项以下载为 PDF 或 Word 文档。
2.  或者，如果您想直接将文本转换为任何其他格式，则将内容存储在内存（字符串）中。
3.  无论您选择哪个选项，您都需要 API 写入不同格式的文件，然后将其提供给用户下载或保存在您的服务器文件系统上。

以下是一些可能有帮助的链接：

*   关于从 HTML 转换为 PDF的精彩[讨论。](https://stackoverflow.com/q/633780/468763 "关于 Stack-overflow 的讨论，有一些非常酷的答案 :-)")
*   [iText](http://itextpdf.com/itext.php) pdf 库
*   [飞碟](http://code.google.com/p/flying-saucer/)
*   [PD4ML](http://www.java.net/external?url=http://pd4ml.com/jnindex.htm)
*   [使用 iText 将 HTML 转换为 PDF](https://stackoverflow.com/questions/235851/using-itext-to-convert-html-to-pdf "Stackoverflow 问答")
*   [使用 servlet iText 将 html 转换为 pdf](http://thinktibits.blogspot.in/2011/05/convert-html-to-pdf-with-servlet-itext.html "使用 iText 进行转换的工作示例")

希望这有助于让你决定你想要什么。如果我不理解您的问题，请留下评论。谢谢。**

# iphone - NSURL 坏的多余

> ID：12208805
> 
> 赞同：4
> 
> 时间：2012-08-31T04:14:08.453
> 
> 标签：iphone, objective-c, ios, url, nsurl

我得到了`error 1000 (URL bad excess)`，我不确定发生了什么。示例 URL 大致如下所示（当我[使用 NSURL 请求时，它已经具有从 Bad URL](https://stackoverflow.com/questions/6287230/bad-url-when-requesting-with-nsurl)读取的百分比编码）：

```
http://test1.test.com/X?op=find&base=tpl01&request=%28%28WCL=DVD%20or%20WCL=VCD%20or%20WCL=SDVD%29%20AND%20%28WFM=VM%29%20AND%20%28WIS=19%20or%20WIS=01%29%29 
```

但是，我仍然不确定为什么它不起作用。

如果需要（在百分比编码之前）：

```
http://test1.test.com/X?op=find&bas=tp01&request=((WCL=DVD or WCL=VCD or WCL=SDVD) AND (WFM=VM) AND (WIS=19 or WIS=01)) 
```

在我的互联网连接中，我已经记录了它，`request.URL`但它似乎被取消了。我确实插入了我的网址。将以任何方式感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:24:39.063

**编辑：**编码类型**stringByAddingPercentEscapesUsingEncoding**可能会解决您的问题

```
NSString* urlText = @"http://test1.test.com/X?op=find&bas=tp01&request=((WCL=DVD or WCL=VCD or WCL=SDVD) AND (WFM=VM) AND (WIS=19 or WIS=01))";
urlText = [urlText stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString: urlText];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url 
                                                       cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                   timeoutInterval:10];

[request setHTTPMethod: @"GET"];

    NSError *requestError;
NSURLResponse *urlResponse = nil;

NSData *response1 = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&requestError]; 
```

希望这可以帮助

# selenium - Selenium 验证复选框由文本选中

> ID：12208806
> 
> 赞同：1
> 
> 时间：2012-08-31T04:14:08.673
> 
> 标签：selenium, selenium-webdriver

我得到了这个复选框列表，我想验证是否选中了特定的复选框，我不能使用复选框 ID，只能使用文本，但它是这样的。

```
<ul id="chkList">
    <li>
        <span>
            <input id="CheckBox_1" type="checkbox" value="1" checked="checked" />
            <label for="CheckBox_1">Cat</label>
        </span>
    </li>
    <li>
        <span>
            <input id="CheckBox_2" type="checkbox" value="20" />
            <label for="CheckBox_2">Dog</label>
        </span>
    </li>
    <li>
        <span>
            <input id="CheckBox_2" type="checkbox" value="22" />
            <label for="CheckBox_2">Alley</label>
        </span>
    </li>
</ul> 
```

我想做类似的事情

```
driver.FindElement(By.XPath("//ul[@id='chkList']/li/span/label[./text()='Cat'])).Selected; 
```

但我肯定不能这样做，因为 xpath 选择标签而不是输入。我正在考虑使用`for`for 标签来查找输入的 id。但我该怎么做呢？

我不能使用`id`for 输入和它的值，因为它是动态的，我唯一可以使用的是文本。

### 编辑

测试用例：

1.  在 chkList 中创建一个新项目
2.  通过与另一个项目检查来分配新项目。（为简洁起见未显示）
3.  节省
4.  验证是否将新项目分配给另一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:42:23.920

您是否尝试过这样的 XPath：

```
driver.FindElement(By.XPath("//ul[@id='chkList']/li[1]/span/input)).Selected; 
```

您可以为清单的数量维护一个计数，并将该值与 li[count] 元素一起使用。

# java - Java：向列标题添加复选框的干净方式？

> ID：12208809
> 
> 赞同：1
> 
> 时间：2012-08-31T04:14:46.233
> 
> 标签：java, swing, jtable, jcheckbox, jtableheader

> **可能重复：**
> [如何在 JTable 的 JTableHeader 中放置控件？](https://stackoverflow.com/questions/7137786/how-can-i-put-a-control-in-the-jtableheader-of-a-jtable)

我正在尝试创建一个包含列的表，该表具有可以切换的复选框。[我从这里开始](http://www.coderanch.com/t/343795/GUI/java/Check-Box-JTable-header)遵循代码示例，但如果在应用程序期间动态添加和删除列，它会逐渐无响应。

在删除列之前，我添加了额外的代码以从 JTableHeader 中删除侦听器，但这并没有什么不同。我正在尝试将代码示例调整为只有一个鼠标侦听器用于整个标题，而不是每一列，但没有太大成功。

是否有可能做到这一点？有没有更好的方法将复选框添加到标题列标题？

谢谢

# iphone - 使用滚动视图进行分页，无法在 imageview 中调整图像

> ID：12208813
> 
> 赞同：1
> 
> 时间：2012-08-31T04:15:23.910
> 
> 标签：iphone, ios5

我正在滚动视图中实现分页。具有大小 (259,263) 和大小 (741, 723) 的图像的滚动视图。到目前为止，我能够取得一点成功。图像是如此之大，以至于它相互重叠。我无法在图像视图上调整图像大小。这是我的代码：

```
- (void)setupPage
{
 NSMutableArray *imageArray= [[NSMutableArray
alloc]initWithObjects:@"female.png",@"male.png",nil];

int nimages;

CGFloat cx = 0;
for (nimages = 0; nimages<[imageArray count]; nimages++)
{ 
    NSString *imageName = [NSString stringWithFormat:@"%@",[imageArray objectAtIndex:nimages]];
    UIImage *image = [UIImage imageNamed:imageName];
    if (image == nil)
            {
        break;
    }

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    CGRect rect = imageView.frame;
    rect.size.height = image.size.height;
    rect.size.width = image.size.width;
    rect.origin.x = ((scrollView.frame.size.width - image.size.width) / 2) + cx;
    rect.origin.y = ((scrollView.frame.size.height - image.size.height) / 2);

    imageView.frame = rect;

    [scrollView addSubview:imageView];
    [imageView release];

    cx += scrollView.frame.size.width;
}

self.pageControl.numberOfPages = nimages;
[scrollView setContentSize:CGSizeMake(cx, [scrollView bounds].size.height)];
 }

- (void)scrollViewDidScroll:(UIScrollView *)_scrollView
{
if (pageControlIsChangingPage)
{
    return;
}
CGFloat pageWidth = _scrollView.frame.size.width/2;
int page = floor((_scrollView.contentOffset.x - pageWidth/2 ) / pageWidth) + 1;
pageControl.currentPage = page;
} 
```

我通过为我的图像视图提供静态大小来获得我的解决方案

这是我的代码 NSUInteger nimages；

```
for (nimages = 1; nimages <= [imageArray count]; nimages++)
{

    NSString *imageName = [NSString stringWithFormat:@"%@",[imageArray 
   objectAtIndex:nimages-1]];
    UIImage *image = [UIImage imageNamed:imageName];
    if (image == nil)
    {
        break;
    }

    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    CGRect rect = imageView.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    imageView.frame = rect;

       imageView.tag = nimages;   
    [scrollView addSubview:imageView];
    [imageView release];

}

UIImageView *view = nil;
NSArray *subviews = [scrollView subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

// set the content size so it can be scrollable
[scrollView setContentSize:CGSizeMake(([imageArray count] * kScrollObjWidth), [scrollView 
  bounds].size.height)]; 
```

# html - 尝试排列 div 时的问题

> ID：12208816
> 
> 赞同：0
> 
> 时间：2012-08-31T04:15:32.570
> 
> 标签：html, css

我正在尝试在表格式布局中堆叠一些长而短的 div，以便 div 边框对齐并创建一个网格。

这是我在 jsfiddle 上所做的基础知识：http: [//jsfiddle.net/wFjXD/](http://jsfiddle.net/wFjXD/)

我有几个问题：

1）为什么我的较长 div 之间有差距？

2）如果间隙消失，div 将对齐，但如果我用 ctrl + 或 ctrl - 放大或缩小页面，对齐就会消失。无论缩放级别如何，如何将长 div 硬编码为始终具有 5 个较小 div 的相同宽度。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:24:50.717

`font size 0`嗨，现在给**父母，给****你的孩子**另一个字体大小

 **像这样

```
.cellcontainer {
font-size:0;
}
.longcell {
font-size:15px;
} 
```

***[演示](http://jsfiddle.net/wFjXD/3/)*****

# objective-c - 如何按顺序获取对象中的成员类型？

> ID：12208818
> 
> 赞同：0
> 
> 时间：2012-08-31T04:15:41.380
> 
> 标签：objective-c, xcode, reflection

> **可能的重复：**
> [Objective C Introspection/Reflection](https://stackoverflow.com/questions/2299841/objective-c-introspection-reflection)

我正在寻找按顺序在对象头中声明的对象成员类型名称的方法。

例如，如果我得到这样的对象

```
@interface Person : NSObject {
  int age;
  NSString *name;
  PersonDetail *detail;
} 
```

当我得到`{28,@"Jack",{@"basketball",@"Male",@"Master Degree"}}`数组中的数据时。我需要成员的类型来填写数据。

就像在 java 中，有一个像 getField() 这样的函数来按顺序获取成员。

那么有什么我可以使用的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:20:53.807

查看[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)。它包括诸如获取类的 ivar 列表 ( `class_copyIvarList()`) 或获取对象的实际 ivar ( `object_getIndexedIvars()`) 之类的功能。它应该能够做你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:23:46.973

您可以检查上述对象的类型，如下所示：

```
 if( [person isKindOfClass:[Person class]])
    {
       //add your logic here
    } 
```

# oracle - 日期维度的代理键？

> ID：12208831
> 
> 赞同：4
> 
> 时间：2012-08-31T04:17:17.467
> 
> 标签：oracle, database-design, oracle11g, data-modeling

有两种思想流派：

1.  使用代理键，最好采用以下格式：YYYYMMDD，因为这将始终是连续的。

2.  消除 Date 维度代理键并改用实际日期。

我对维度建模专家的问题是：

```
1> Which design would you prefer and why?

2> How should we handle unknown values in each of the cases, Can we simply place 
   NULL in Fact table for unknown dates as Foreign Key can be NULL (if not why)?

3> If we need to partition fact table on date column, how would we achieve that 
   in case 1. 
```

我倾向于使用实际日期并使用 NULL 来表示事实表中的 UNKNOWN 日期，因为无需查看维度表即可对事实进行与日期相关的验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:30:22.453

为了你问：

1.  Kimball 大谈特谈日期的代理键，但我还没有看到一个令人信服的技术论据支持这样做。转换为 YYYYMMDD 格式意味着您必须转换日期或加入日期维度以进行日期算术。这两种方法都有多种方式可以通过 .
    SQL Server 上的日期时间为 8 个字节，Oracle 上的 (IIRC) 为 7 个字节，因此它比整数代理宽一点，但除非您有非常大的数据量，否则我不再认为这个论点有任何优点。优化器只是将日期视为幕后的数值。

2.  我对一种或另一种类型的“特殊”值有要求。根据您希望它们如何排序，您可以使用各种值。在过去，我曾多次使用此方案：

    *   1800-01-01 表示“以前的”。除非您需要比这更早的日期，否则这将在开头进行排序。
    *   9000-01-01 表示“正在进行”。这将在最后进行排序。
    *   9100-01-01 表示“未知”。这将在最后进行排序。
    *   9200-01-01 表示“错误”。这将在最后进行排序。

3.  任何支持它的 DBMS 平台（包括几乎所有主流 RDBMS 平台）上的范围分区在日期或整数分区键上都可以正常工作。

我不建议对数据仓库中的未知值使用 NULL，因为它需要外部连接才能使用数据。这将影响查询计划的效率，并为没有经验的玩家设置数据陷阱。数据仓库中的 NULL 键在很多方面都是不好的魔力。

NULL 键值的另一个问题是大多数临时报告工具不能很好地使用连接中的空键。通常它们会使用内部连接，因此键列中带有 NULL 的行会中断。

对于大多数其他维度，您将使用代理项。这将维度与源数据分离，并允许您将新数据源引入系统而不会破坏现有数据。

在某些情况下，将自然键用作维度键可能很有用。这方面的一个例子可能是 ISO 货币代码或帐号。在前一种情况下，3 个字母的代码足够小，使用它作为密钥的开销很小，并且编码方案（通常）在所有数据源中都是通用的。在后一种情况下，代码通常是数字且足够短，无论如何都可以放入整数，并且通常在整个组织中通用。

这样做的主要好处是您可以让报告专家使用他们自己的查询来操作数据。对于直接使用数据的人来说，它使表格更易读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T12:14:45.493

Oracle 的不寻常之处在于它的[Date 数据类型](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i1847)包括时间，并且需要 7 个字节。其他平台通常对裸日期有独立的数据类型。SQL Server 的日期占用 3 个字节，PostgreSQL 占用 4 个字节，而 DB2 占用 4 个字节（我认为）。

当您使用格式为 YYYYMMDD 的整数时，您必须在*某处*编写附加代码以确保这些值是有效日期。20121332 是一个有效的整数，但它不代表一个有效的日期。您不必为日期数据类型编写类似的验证代码。

在单列中记录缺失信息时，这两种选择没有*太大*区别。您要么使用不代表其他日期含义的日期，要么使用不代表其他整数含义的整数。用很少的数字编码原因（例如，其中“1”可能表示“尚未提供”）意味着您必须将*不是有效日期整数的值**与*有效日期整数的值存储在同一列中。

但我认为将某些数据丢失的*事实与数据丢失的**原因*区分开来更有意义。这意味着存储更多数据，而有些人不愿意存储更多数据。

* * *

我发现这两本 IBM 红皮书在设计数据仓库时很有用。

*   [数据仓库的数据建模技术](http://www.redbooks.ibm.com/abstracts/sg242238.html)
*   [维度建模：在商业智能环境中](http://www.redbooks.ibm.com/abstracts/sg247138.html)

[锚定建模](http://en.wikipedia.org/wiki/Anchor_Modeling)是最近的发展。以这种方式设计的模式中的大多数表都将位于[6NF](http://en.wikipedia.org/wiki/Sixth_normal_form)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:37:21.000

1\. 最好使用 YYYYMMDD 格式的代理键，因为这将始终是连续的。

2.去掉日期维度代理键，改用实际日期。

使用第一个选项。您使用实际日期，它将占用更多磁盘，索引效率较低，连接效率较低。此外，如果您使用日期类型，您将如何表示“未知日期”、“日期尚不可用”、“日期早于日历日期范围”、“日期晚于日历日期范围”？

您不能对日历维度的所有这些不同的“未知”类型成员使用“01-01-1900”。理想情况下，所有代理键都应该是无意义的，否则报表用户太容易忽略维度。维度增加了维度的丰富性，例如日历维度、日期所属的星期、月份、年份、日期名称等。应通过匿名代理键强制记者使用维度。

在数据仓库的表示层中永远不应该有空值，因为它们会迫使您在事实和维度之间进行左外连接。星型模式的全部意义在于提高查询性能——进行外连接直接违背了这一原则。总是用未知的成员键替换空值，如 -1、-2 等（假设你的“真实”成员键从 1 开始并从那里依次上升）。

## 为 Catcall 编辑

我建议使用代理键，其中日历中最早的日期获取密钥 1，下一个日期获取 2，依此类推。在星型模式中，事实由代理键组成 - 所有小整数或度量。您必须加入维度才能查看日期 1 代表什么。所有的代理人都没有任何意义。这就是您构建数据集市的方式。用户应该如何记住“01-01-1900”表示“日期不可用”和“01-01-1901”表示“未知”和“01-01-1902”早期日期等？将这些标题存储在维度中并实际上具有代理项-3、-2、-1 不是更好吗？然后用户将在报告中看到标题“未知”或“早期日期”。将日期类型用作代理键只是一个错误，并且会限制有用性，解决方案的效率和灵活性。我通过经验知道这一点。

# curl - 为什么 curl/OpenSSL 无法获取 chrome+firefox 可以获取的网站？

> ID：12208832
> 
> 赞同：1
> 
> 时间：2012-08-31T04:17:27.070
> 
> 标签：curl, https, openssl

在我的程序（使用 OpenSSL）和 curl 中，我都无法获取网站：

```
$ curl -v https://registration.experient-inc.com/HTMLProduction/ShowCES131/ConfirmationImages/CES131_Header.JPG
* 即将 connect() 到 registration.experient-inc.com 端口 443 (#0)
* 尝试 12.153.51.94...
* 连接的
* 连接到 registration.experient-inc.com (12.153.51.94) 端口 443 (#0)
* 成功设置证书验证位置：
* CAfile：/usr/ssl/certs/ca-bundle.crt
  CApath：无
* SSLv3，TLS握手，客户端问候（1）：
* 与registration.experient-inc.com:443 相关的未知SSL 协议错误
* 关闭连接 #0
curl：（35）连接到registration.experient-inc.com：443的未知SSL协议错误

```

根据另一个问题，我将发布直接调用 openssl 会发生什么：

```
$ openssl s_client -host 12.153.51.94 -port 443
已连接（00000003）
写：errno=104
---
没有可用的对等证书
---
未发送客户端证书 CA 名称
---
SSL 握手已读取 0 字节并写入 320 字节
---
新，（无），密码是（无）
不支持安全重新协商
压缩：无
扩展：无
---

```

知道为什么会发生这种情况/如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:13:54.703

显然，Web 服务器根本不支持 SSLv2。即它甚至不支持 SSLv2 hello。强制 curl 或 OpenSSL 使用 SSLv3+ 会导致有效的查询。

# java - 如何在java中转义$？

> ID：12208834
> 
> 赞同：4
> 
> 时间：2012-08-31T04:17:36.173
> 
> 标签：java, regex, special-characters

我正在尝试下面的代码，但出现错误

```
String x = "aaa XXX bbb";
    String replace = "XXX";
    String y = "xy$z";
    String z=y.replaceAll("$", "\\$");
    x = x.replaceFirst(replace, z);
    System.out.println(x); 
```

错误

```
Exception in thread "main" java.lang.IllegalArgumentException: Illegal group reference
    at java.util.regex.Matcher.appendReplacement(Unknown Source)
    at java.util.regex.Matcher.replaceFirst(Unknown Source)
    at java.lang.String.replaceFirst(Unknown Source)
    at Test.main(Test.java:10) 
```

我想要结果为

```
aaa xy$z bbb 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T04:26:24.693

使用[`replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)而不使用正则表达式，因为您根本不需要它们：

```
String x = "aaa XXX bbb";
String replace = "XXX";
String y = "xy$z";
x = x.replace(replace, y);
System.out.println(x); 
```

`aaa xy$z bbb`正如预期的那样，这将打印出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T04:24:09.757

如果替换字符串包含美元符号或反斜杠字符，则应使用

```
Matcher.quoteReplacement() 
```

所以改变

```
String z=y.replaceAll("$", "\\$");` 
```

到

```
String z = Matcher.quoteReplacement(y); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T04:21:30.947

错误的原因是在该行之后：

```
String z=y.replaceAll("$", "\\$"); 
```

的价值`z`是：`xy$z$` 你真正想做的是：

```
String x = "aaa XXX bbb";
String replace = "XXX";
String y = "xy\\$z";            
x = x.replaceFirst(replace, y);
System.out.println(x); 
```

这将输出：

```
aaa xy$z bbb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T04:27:11.783

问题 id 由于[replaceFirst](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29) 的值`String z=y.replaceAll("$", "\\$");`是`xy$z$`

用给定的替换替换此字符串中与给定正则表达式匹配的第一个子字符串。调用这种形式的方法会`str.replaceFirst(regex, repl)`产生与表达式完全相同的结果

```
Pattern.compile(regex).matcher(str).replaceFirst(repl) 
```

**请注意**，替换字符串中的反斜杠 ( `\`) 和美元符号 ( `$`) 可能会导致结果与将其视为文字替换字符串时的结果不同；

# python - python subprocess.popen 使用带有参数的 preexec_fn

> ID：12208839
> 
> 赞同：0
> 
> 时间：2012-08-31T04:18:07.437
> 
> 标签：python, python-2.7

我已经阅读了关于子进程的 python 文档，但是`preexec_fn`for的参数`subprocess.Popen`只能指向一个没有参数的函数。

现在我想用两个参数调用一个函数，就像`preexec_fn`我尝试使用全局变量一样，但它不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:51:55.930

`functools.partial`您可以使用或 a传递参数`lambda`：

```
>>> import functools
>>> def need_two_arguments(a,b):
...     print a + b
... 
>>> no_arguments_needed = functools.partial(need_two_arguments, "Hello, ", "World!")
>>> no_arguments_needed()
Hello, World!
>>> no_arguments_needed = (lambda: need_two_arguments("Hello, ", "World!"))
>>> no_arguments_needed()
Hello, World! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T01:45:52.550

如果您的目标函数足够简单，您可能想尝试匿名函数（“lambda 函数”）。而且，您可以按原样放置此 lambda 函数，或者作为函数对象放置`(ex)f=lambda x,y: x+y`，无需使用部分或导入“functools”包。（顺便说一句，如果你只想使用 partial，你也可以清理 as`'from functools import partial'`并直接使用 partial 作为你的本地函数。

`<example with anonymous function> import subprocess subprocess.Popen(<cmd>, preexec_fn=(lambda x,y:x+y))`

# google-maps-api-3 - 如何设置 Google Maps v3 API 方向服务返回的结果的精度？

> ID：12208840
> 
> 赞同：1
> 
> 时间：2012-08-31T04:18:12.413
> 
> 标签：google-maps-api-3

谷歌地图 v3 方向服务返回的纬度/经度点有时比我想要的要长。这是我可能会打的电话：

```
var request = {
    origin: start_position, 
    destination: end_position,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
        // do something with response, e.g. set the overview_path to a polyline;
    }
}); 
```

生成的响应可能会为一个点返回以下值：

```
response.routes[0].legs[0].start_location.Xa = 35.077000000000005    
response.routes[0].legs[0].start_location.Ya = -85.08854000000001 
```

我真的想降低精度。例如，我更喜欢精确到小数点后五位的值，如下所示：

```
Xa = 35.07700    
Ya = -85.08854 
```

有没有简单的方法来实现这一点？我查看了文档，但没有看到任何设置方法的提及。

感谢您提供的任何见解或帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:36:54.790

首先，您不应该使用 .Xa 和 .Ya，因为它们是缩小的名称，可能会随着 API 的下一个版本而改变。相反，您应该使用记录在案的方法 lat() 和 lng()。所以：

```
response.routes[0].legs[0].start_location.lat()= 35.077000000000005    
response.routes[0].legs[0].start_location.lng() = -85.08854000000001 
```

如果你想对小数进行四舍五入，那么你可以使用标准的 javascript 方法 .toFixed()，即：

```
var lat = response.routes[0].legs[0].start_location.lat().toFixed(5);// 35.07700    
var lon = response.routes[0].legs[0].start_location.lng().toFixed(5);// -85.08854 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:08:43.750

[Javascript 使用双精度浮点数](http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference)来表示数据。如果您将该数据保存为字符串，则使用 .toFixed(); 输出它可能是有意义的。但这将是您的代码，而不是 Google 的代码。

# eclipse - eclipse 调试器无法在 Junit 中使用 power Rule

> ID：12208845
> 
> 赞同：10
> 
> 时间：2012-08-31T04:19:35.563
> 
> 标签：eclipse, junit, powermock

我正在使用 Mockito + PowerMock + PowerRule 开发 Junits

参考我的上一个问题：[Getting javassist not found with PowerMock and PowerRule in Junit with Mockito](https://stackoverflow.com/questions/12190377/getting-javassist-not-found-with-powermock-and-powerrule-in-junit-with-mockito)

现在我的 Junits 已经成功运行，我遇到了一个奇怪的问题，即 Eclipse 调试器无法正常工作，即我没有在断点处停止，尽管我的测试正在执行（使用 SOP 语句检查）

现在，当我从 Junits 中删除 PowerRule 时，调试器再次开始工作

我不知道为什么会这样。如果您对此有任何想法，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-23T08:29:10.263

如果您在类级别使用了注释`@PrepareForTest({ClassName.class})`，那么就会出现问题。一种解决方法是在方法中声明该注释。即使在测试用例中使用了电源模拟，它也允许您对其进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-11T05:30:11.827

在这种情况下不要使用`mockStatic`，您将模拟整个静态类，这就是您无法调试它的原因。

而是使用其中之一来避免模拟整个静态类：

*   `spy`

    PowerMockito.spy(CasSessionUtil.class) PowerMockito.when(CasSessionUtil.getCarrierId()).thenReturn(1L);

*   或者`stub`

    PowerMockito.stub(PowerMockito.method(CasSessionUtil.class, "getCarrierId")).toReturn(1L);

*   并且`stub`，如果方法有参数（例如字符串和布尔值），请执行以下操作：

    PowerMockito.stub(PowerMockito.method(CasSessionUtil.class, "methodName", String.class, Boolean.class)).toReturn(1L);

这是 finla 代码，我选择使用`stub`：

```
@RunWith(PowerMockRunner.class) // replaces the PowerMockRule rule
@PrepareForTest({ CasSessionUtil.class })
public class TestClass extends AbstractShiroTest {

    @Autowired
    SomeService someService;

    @Before
    public void setUp() {
        Map<String, Object> newMap = new HashMap<String, Object>();
        newMap.put("userTimeZone", "Asia/Calcutta");
        Subject subjectUnderTest = mock(Subject.class);
        when(subjectUnderTest.getPrincipal())
            .thenReturn(LMPTestConstants.USER_NAME);
        Session session = mock(Session.class);
        when(session.getAttribute(LMPCoreConstants.USER_DETAILS_MAP))
            .thenReturn(newMap);
        when(subjectUnderTest.getSession(false))
            .thenReturn(session);
        setSubject(subjectUnderTest);
        // instead, add the getCarrierId() as a method that should be intercepted and return another value (i.e. the value you want)
        PowerMockito.stub(PowerMockito.method(CasSessionUtil.class, "getCarrierId"))
            .toReturn(1L);
    }

    @Test
    public void myTestMethod() {
        someService.doSomething();
    }
} 
```

# crystal-reports - 水晶报表 - 显示 RTF 数据

> ID：12208846
> 
> 赞同：0
> 
> 时间：2012-08-31T04:19:55.690
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-2010

我目前在水晶报表中工作。

请任何人告诉我如何转换**RTF 文件数据**（由数据集检索）以显示在水晶报表文本对象中。

我尝试了以下事情，

1.  `@Text`field对象右击选择**Format Object->Paragraph tag，选择Text Interpretation as RTF Text。**

2.  在我输入的公式字段中`{DT.Text_Description}`

但我没有得到报告中的文本。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:45:25.673

水晶报表方面是正确的，但是您如何将数据传输到数据集，而不是文本，您应该采用 RTF：

```
Me.Dset.Tables("Table").Rows(row).Item("ItemName") = RTBox.Rtf - correct

Me.Dset.Tables("Table").Rows(row).Item("ItemName") = RTBox.Text- Not correct 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:21:00.813

你做得很好，这是显示 RTF 数据的正确方法。
可能是拼写错误；代替 o 键入字段，您可以单击可用字段吗？

# php - 仅使用 PHP 和 mysql 上传多个文件

> ID：12208847
> 
> 赞同：0
> 
> 时间：2012-08-31T04:19:58.820
> 
> 标签：php, arrays, upload

我正在尝试创建一个动态多文件上传系统，其中用户指定要上传的文件数。选择完成后，会创建相应数量的文件上传字段，然后用户就可以进行上传了。

下面是我的脚本。从我的调试来看，数组创建成功，但上传失败。如果有人告诉我我做错了什么，我将非常感谢一些帮助。

```
<form action="" method="post" enctype="application/x-www-form-urlencoded" name="max">
  <table width="100%" border="0" cellspacing="2" cellpadding="2">
    <tr>
      <td >no of products</td>
       <td><input name="max2" type="text" id="max2" size="3" maxlength="2" />
        </td>
      <td><input type="submit" name="go" id="go" value="go&gt;&gt;" /></td>
    </tr>
  </table>
</form>
<form action="" method="post" enctype="multipart/form-data" name="uploader" id="uploader"><table>
  <tr>
<td>

   <?php
global $max;
if(isset($_POST['max2']))
    $max = $_POST['max2'];
else
    $max = 3;

for ($i = 1; $i <= $max; $i++) {
$forms = '<table>
          <tr>
            <td>File</td>
            <td><label for="uploader"></label>
              <input name="uploader'.$i.'" type="file" id="uploader'.$i.'" /></td>
          </tr>
        </table>';
echo $forms.'<br>';//// creates a new form field depending on number of files specified by user
}
?>
 <input name="max3" type="hidden" id="max" value="<?php echo $_POST['max2'] ?>" />
 <?php
  if(isset($_POST['upload'])){

$uploadArray= array();
for ($i = 1;$i <= $_POST['max3']; $i++) {
$uploadArray[] = $_FILES['uploader'.$i]['name'];
        }
print_r ($uploadArray); // display array to check it was properly created

 foreach($uploadArray as $file) {

    $target_path = "../Users/storename/upload/";

        if(file_exists($target_path) && is_dir($target_path)){

                if(move_uploaded_file($_FILES[$file]["tmp_name"], $target_path.'new'.$file)) {
                     echo "<br> The file ".  basename( $_FILES['$file']['name'])." has been uploaded";
                } 
                else{
                    echo "<br>The file ".$file." has NOT been uploaded";
                }

    }
    else{
    echo 'invalid path<br>';
    echo $target_path;
    }
}
}

?></td>
     </tr>
  <tr>
   <td><input type="submit" name="upload" id="upload" value="Submit" /></td>
  </tr>
  </table>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:30:00.187

如果您准备好使用 jquery，请尝试[多次上传](http://blueimp.github.com/jQuery-File-Upload/)。

# jquery - 使用 jQuery 的 .css() 会覆盖 CSS 中的伪类吗？

> ID：12208859
> 
> 赞同：0
> 
> 时间：2012-08-31T04:21:39.450
> 
> 标签：jquery, css, pseudo-class

我想知道为什么在使用`.css()`函数时，它会覆盖 CSS 中的伪类，`:hover`例如。它不应该只影响元素的正常状态，而不是那个`:hover`吗？还是我做错了什么？

这是一个例子

```
<!DOCTYPE html>

<html>  
  <head>
    <style>
      #test {
        background : red;
        width: 50px;
        height: 50px;
        opacity : 0.2;
      }

      #test:hover {
        opacity:1.0;
      }
    </style>

    <script type="text/javascript" src="../jquery-1.8.0.min.js"></script>
    <script type="text/javascript">
      $(function () {
        $('#test').css('opacity', '0.5');
      });
    </script>
  </head>

  <body>
    <div id="test"></div>
  </body>
</html> 
```

当页面加载时，我只得到 div `opacity = 0.5`，对于普通和`:hover`. 不应该是`0.5`for normal 和`1.0`for`:hover`吗？

我的问题是如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:27:47.763

`.css()`将*内联*样式应用于所选元素，并且根据*级联*样式的规则，内联样式的优先级高于样式表中的样式。

您可以使样式表中的类比内联样式更重要，如下所示：

```
 #test:hover {
     opacity:1.0 !important;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:28:30.200

做你想做的事情的最好方法不是设置 opacity 的值，而是使用 addClass()、removeClass() 或 toggleClass() 进行任何更改。

# mysql - 如何根据MySQL中的列将数据库表分为两个表

> ID：12208861
> 
> 赞同：1
> 
> 时间：2012-08-31T04:21:43.180
> 
> 标签：mysql, database, database-design

我有一个十列的表：

```
name, id, colg, schol, add, no, subject, marks, surname, lectures 
```

我可以将此表拆分为两个单独的表而不会丢失任何数据吗？

表一：

```
name, id, colg, schol, add, no 
```

表二：

```
subject, marks, surname, lectures 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:25:18.937

是的，您只需要在表之间创建一对一的关系。您可以通过在每个表上创建一个唯一的主键来做到这一点，其中第二个表的主键也是第一个表的主键的外键。

**表格1**

```
PK_ID      (primary key)
name
id
colg
schol
add
no 
```

**表#2**

```
PK_ID      (primary key, foreign key to Table #1)
subject
marks
surname
lectures 
```

所以步骤很简单：

1.  创建两个具有上述结构的新表）
2.  将现有表中的所有记录插入表#1
3.  将现有表中的所有记录插入表 #2，并在表 #1 上连接以获取外键

（请注意，您也可以使用现有表中的一列作为主键，例如*id*，只要它是唯一的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T05:00:05.280

```
CREATE TABLE old_table (name VARCHAR(255), id BIGINT, colg VARCHAR(255), schol VARCHAR(255), addit VARCHAR(255), no VARCHAR(255), subject VARCHAR(255), marks VARCHAR(255), surname VARCHAR(255), lectures VARCHAR(255));

INSERT INTO old_table VALUES("shaun", 1234, "DePaul University", "Computing and Digital Media", "something", "something", "some subject", "A", "Husain","no thank you");

mysql> SELECT * FROM old_table;
+-------+------+-------------------+-----------------------------+-----------+-----------+--------------+-------+---------+--------------+
| name  | id   | colg              | schol                       | addit     | no        | subject      | marks | surname | lectures     |
+-------+------+-------------------+-----------------------------+-----------+-----------+--------------+-------+---------+--------------+
| shaun | 1234 | DePaul University | Computing and Digital Media | something | something | some subject | A     | Husain  | no thank you |
+-------+------+-------------------+-----------------------------+-----------+-----------+--------------+-------+---------+--------------+
1 row in set (0.00 sec)

CREATE TABLE table1 (name VARCHAR(255), id BIGINT PRIMARY KEY, colg VARCHAR(255), schol VARCHAR(255), addit VARCHAR(255), no VARCHAR(255));
CREATE TABLE table2 (id BIGINT PRIMARY KEY, subject VARCHAR(255), marks VARCHAR(255), surname VARCHAR(255), lectures VARCHAR(255));

INSERT INTO table1 (name,id,colg,schol,addit,no) SELECT name,id,colg,schol,addit,no from old_table;
INSERT INTO table2 (id,subject,marks,surname,lectures) SELECT id,subject,marks,surname,lectures from old_table;

mysql> select * from table1;
+-------+------+-------------------+-----------------------------+-----------+-----------+
| name  | id   | colg              | schol                       | addit     | no        |
+-------+------+-------------------+-----------------------------+-----------+-----------+
| shaun | 1234 | DePaul University | Computing and Digital Media | something | something |
+-------+------+-------------------+-----------------------------+-----------+-----------+
1 row in set (0.00 sec)

mysql> select * from table2;
+------+--------------+-------+---------+--------------+
| id   | subject      | marks | surname | lectures     |
+------+--------------+-------+---------+--------------+
| 1234 | some subject | A     | Husain  | no thank you |
+------+--------------+-------+---------+--------------+
1 row in set (0.00 sec)

mysql> select * from table1 LEFT JOIN table2 on (table1.id=table2.id);
+-------+------+-------------------+-----------------------------+-----------+-----------+------+--------------+-------+---------+--------------+
| name  | id   | colg              | schol                       | addit     | no        | id   | subject      | marks | surname | lectures     |
+-------+------+-------------------+-----------------------------+-----------+-----------+------+--------------+-------+---------+--------------+
| shaun | 1234 | DePaul University | Computing and Digital Media | something | something | 1234 | some subject | A     | Husain  | no thank you |
+-------+------+-------------------+-----------------------------+-----------+-----------+------+--------------+-------+---------+--------------+
1 row in set (0.00 sec) 
```

# android - 将布尔值放入类型包中的方法不适用于单选按钮

> ID：12208862
> 
> 赞同：2
> 
> 时间：2012-08-31T04:21:44.560
> 
> 标签：android, radio-button, save, instance, preferences

当用户旋转屏幕时，我需要保存我的应用程序实例。我使用了切换按钮**“inst”**、图像按钮**“播放”**和单选按钮**“sp”**。这是我的代码：

```
public void onSaveInstanceState(Bundle outState)
        {
         outState.putBoolean("play",play);
         outState.putBoolean("inst", inst);
         outState.putBoolean("sp",sp);         /* shows the error "the method put boolean in 
                                                 type bundle is not applicable for radio buttons"*/          
         super.onSaveInstanceState(outState);

        } 
```

那么我们应该为单选按钮使用什么？当我用谷歌搜索时，我得到的结果说我们必须使用偏好活动。然后在我的情况下，我必须更改我当前布局中的所有元素。任何其他解决方案都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T04:29:33.230

您只需将布尔值放入 Bundle.putBoolean 方法中，而您将 RadioButton、ToggleButton 放入其中。因此，通过获取 isChecked 属性将您的代码更改为以下方法，而不是在此方法中传递视图对象传递状态：

```
public void onSaveInstanceState(Bundle outState)
        {
         //outState.putBoolean("play",play);//are you sure its ImageButton if It is, you cant get State  of it in boolean 
         outState.putBoolean("inst", inst.isChecked());
         outState.putBoolean("sp",sp.isChecked());                  
         super.onSaveInstanceState(outState);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:26:01.220

我认为您需要使用`isChecked()`如下代码中的单选按钮方法，

```
public void onSaveInstanceState(Bundle outState)
{
            outState.putBoolean("play",play.isChecked());
            outState.putBoolean("inst", inst.isChecked());
            outState.putBoolean("sp",sp.isChecked());      
           super.onSaveInstanceState(outState);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:37:07.293

您应该`sp`使用`isChecked()`方法检查您的单选按钮。

# iphone - iPhone - 如何在 iPhone 相册中保存自定义名称的图像？

> ID：12208864
> 
> 赞同：1
> 
> 时间：2012-08-31T04:21:52.097
> 
> 标签：iphone, camera, nsfilemanager

我正在做一个与 iPhone 相册和照片相关的应用程序。我的要求是将我的 UIImageView 图像保存到具有自定义名称的相册中，例如“myImage.png”。我知道如何将照片保存在相册中，但我需要知道如何指定自定义名称。

使用自定义名称保存照片后，当我在应用程序中从相机中选择同一张照片时，我需要获取具有相同名称的照片。是的，当我选择照片时，我能够获取照片名称，但是对于所有照片，它都将照片显示为资产 2。这个问题的解决方案是什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:32:16.310

请参阅[iphone-camera-roll-picture-naming-reset-after-firmware-update](http://www.celifornia.com/blog/2008/03/26/iphone-camera-roll-picture-naming-reset-after-firmware-update/)链接。它显示了如何更新图像名称。

# java - CSS：将文本附加到输入文本的值中

> ID：12208865
> 
> 赞同：1
> 
> 时间：2012-08-31T04:21:52.860
> 
> 标签：java, css, jsf

嗨，我有一个小问题。

如果满足某些条件，用户希望将一些愚蠢的文本附加到输入文本中。

例子

正常情况：输入文本值="#{model.user}"

异常情况：输入文本应仅显示“#{model.user} SILLY IDIOT” 在异常情况下，输入文本仅准备好

目前我为不同的显示渲染了 2 个不同的输入文本，我想知道是否可以使用 CSS 在值中附加“SILLY IDIOT”。

我已经尝试过 value ="#{model.user} SILLY IDIOT"，当 JSF 使用该值设置支持 bean 时会引发错误。我需要设置 ReadOnly=true，因此需要设置 2 个输入文本。

我不希望更改代码，因为它会增加复杂性，所以我更喜欢简单的 css 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:25:16.050

这不是 CSS 解决方案，但您可以使用问号运算符：

```
value="#{model.user} #{model.user.silly ? 'SILLY IDIOT' : ''}" 
```

# cocos2d-iphone - 将 CCLabel 准确地居中在 CCSprite 的中心

> ID：12208866
> 
> 赞同：0
> 
> 时间：2012-08-31T04:22:01.733
> 
> 标签：cocos2d-iphone

我想在 CCSprite 顶部添加一个标签，无论标签上的文本大小如何，它都应该正好位于精灵的中间/中心。

现在是我的代码：

```
self.background = [CCSprite spriteWithFile:@"LetterBrick.png"];
    self.background.position = CGPointZero;
    [self addChild:self.background];
    _letterLabel = [CCLabelTTF labelWithString:self.letter fontName:@"ChunkFive" fontSize:35];    
    [self addChild:_letterLabel]; 
```

和输出：

![在此处输入图像描述](../Images/28f2336898d0e969e55c74733b34f0c9.png) 我只是想让它低一点嘿嘿。

如您所见，x 位置很好，但 y 位置太高。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:18:14.937

CCLabel 的 anchorPoint 默认为 (0.5f, 0.5f)。如果您希望它位于其父级的中心（在这种情况下，您的精灵有背景），只需将标签的位置设置为精灵的中心

```
CGPoint backSize = background.contentSize;
[label setPosition:ccp(backSize.width / 2, backSize.height / 2)]; 
```

或等于它

```
[label setPosition:ccpMult( ccpFromSize(background.contentSize), 0.5f )]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:47:49.240

试试这个

```
_letterLabel.anchorPoint = ccp(0.5f,0.5f);
_letterLabel.position = ccp(sprite.position.x, sprite.position.y); 
```

# objective-c - 在 iPhone 中显示 Tumblr 帖子

> ID：12208867
> 
> 赞同：1
> 
> 时间：2012-08-31T04:22:08.417
> 
> 标签：objective-c, post, fetch, tumblr

如何在应用程序上显示 tumblr 博客文章，就像移动版本显示它一样，而不是在 UIWebView 上加载 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:38:52.520

是的，使用[http://www.tumblr.com/docs/en/api](http://www.tumblr.com/docs/en/api)

该 api 允许您阅读 tumblr 页面并表达您希望显示的信息。这将要求您编写自己的 xml 移相器类，但是那里有很多教程。

> 阅读 Tumblr 数据很容易：只需在 [http://YOU.tumblr.com/api/read](http://YOU.tumblr.com/api/read)获取页面，您将获得这种格式的结构化 XML 版本的内容......

该api甚至有一个使用objective-c和tumblr登录的例子

```
NSString *email           = @"example@email.com";
NSString *password        = @"password";
NSString *destination_url = @"/iphone";

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
    initWithURL:[NSURL URLWithString:@"https://www.tumblr.com/login"]
];
[request setHTTPMethod:@"POST"];
NSString *request_body = [NSString 
    stringWithFormat:@"email=%@&password=%@&redirect_to=%@",
    [email           stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
    [password        stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
    [destination_url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
];
[request setHTTPBody:[request_body dataUsingEncoding:NSUTF8StringEncoding]];
/* Load the request here with an NDA-covered iPhone component
   that can view the web.
*/
[request release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:43:27.167

有关示例代码，请参阅[ios-tumblr-sdk](https://github.com/felipesabino/ios-tumblr-sdk)。

使用 api v2 提取您需要的帖子

```
http://api.tumblr.com/v2/blog/clintonbeattie.tumblr.com/posts?api_key=PyezS3Q4Smivb24d9SzZGYSuhMNPQUhMsVetMC9ksuGPkK1BTt 
```

从[文档](http://www.tumblr.com/docs/en/api/v2#posts)

# ios - 使用 glDrawElements 渲染的 OpenGL ES 2.0 仅显示单个 VBO

> ID：12208869
> 
> 赞同：1
> 
> 时间：2012-08-31T04:22:15.540
> 
> 标签：ios, opengl-es, opengl-es-2.0

请参阅下面的编辑，它显着改变了问题。

**原来的：**

我在使用**Xcode 4.1**在**iOS 4上使用****OpenGL ES 2.0**渲染元素时遇到问题。

 ******使用glDrawElements**可以正常显示，没有任何问题：

```
glDrawElements(GL_TRIANGLES, indicesSizeAll/sizeof(IndicesAll[0]), GL_UNSIGNED_SHORT, 0); 
```

但是如果我使用等效的**glDrawRangeElements**我会遇到各种问题：

```
glDrawRangeElements(GL_TRIANGLES, 0, (indicesSizeAll/sizeof(IndicesAll[0]))-1, indicesSizeAll/sizeof(IndicesAll[0]), GL_UNSIGNED_SHORT, 0); 
```

我收到以下构建警告：

```
Semantic Issue: Implicit declaration of function 'glDrawRangeElements' is invalid in C99 
```

并在执行过程中出现以下错误：

```
Program received signal: "EXC_BAD_ACCESS" 
```

我包含了这个函数原型：

```
extern void glDrawRangeElements(GLenum mode, GLuint start, GLuint end, GLsizei count, GLenum type, const GLvoid * indices); 
```

它摆脱了构建警告，但我仍然有执行错误。

不太确定如何解决这个问题。我一步一步地做一些事情来展示，但向前看，我相信我将需要使用**glDrawRangeElements**，所以我正在努力让它发挥作用。有人对我有一些指导吗？

**编辑：**

引起我注意的是：

> DrawRangeElements 在 OpenGL ES 1.1 或 2.0 中不存在，这就是它不在系统头文件中的原因。您应该改为调用 glDrawElements。

这让我回到了我之前认为**glDrawRangeElements**可以解决我的问题的情况。

这意味着我需要使用多个缓冲区来渲染所有内容，因为我想对每个缓冲区应用不同的旋转。

```
[modelView rotateBy:CC3VectorMake(x, y, z)];
glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix); 
```

我设置了两个不同的缓冲区：

```
glGenBuffers(1, &vertexBufferA);
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferA);
glBufferData(GL_ARRAY_BUFFER, verticesSizeA, VerticesA, GL_STATIC_DRAW);

glGenBuffers(1, &indexBufferA);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBufferA);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indicesSizeA, IndicesA, GL_STATIC_DRAW);
--------------------
glGenBuffers(1, &vertexBufferZ);
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferZ);
glBufferData(GL_ARRAY_BUFFER, verticesSizeZ, VerticesZ, GL_STATIC_DRAW);

glGenBuffers(1, &indexBufferZ);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBufferZ);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indicesSizeZ, IndicesZ, GL_STATIC_DRAW); 
```

然后当我想渲染这些元素时：

```
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferA);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBufferA);

glDrawElements(GL_TRIANGLES, indicesSizeA/sizeof(IndicesA[0]), GL_UNSIGNED_SHORT, 0);
--------------------
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferZ);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBufferZ);

glDrawElements(GL_TRIANGLES, indicesSizeZ/sizeof(IndicesZ[0]), GL_UNSIGNED_SHORT, 0); 
```

**对glDrawElements**的一次调用就可以很好地渲染，但是如果我为每个缓冲区调用它，则只有第二次调用会进行任何渲染。

不完全确定我在这里缺少什么。我是整个 OpenGL 的新手，边走边学。

感谢任何指示或澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:56:07.023

我已经找到了我自己问题的答案。事实证明，我可以将所有数据保存在一个缓冲区中，并为每个渲染指定所需的范围。

* * *

**设置顶点和索引缓冲区**：一组缓冲区包含两个图形（A 和 Z）的数据

```
glGenBuffers(1, &vertexBufferAll);
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferAll);
glBufferData(GL_ARRAY_BUFFER, verticesSizeAll, VerticesAll, GL_STATIC_DRAW);

glGenBuffers(1, &indexBufferAll);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBufferAll);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indicesSizeAll, IndicesAll, GL_STATIC_DRAW); 
```

**为顶点数组中的数据定义偏移量**：

```
glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 0));
glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3)); 
```

**绘制位于索引数组中指定偏移量的元素**：

```
glDrawElements(GL_TRIANGLES, indicesCountA, GL_UNSIGNED_SHORT, (GLvoid*) (sizeof(GLushort) * 0));
glDrawElements(GL_TRIANGLES, indicesCountZ, GL_UNSIGNED_SHORT, (GLvoid*) (sizeof(GLushort) * indicesCountA)); 
```

**在每个 glDrawElements 之前应用适当的矩阵以实现所需的旋转**：

```
glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix); 
```

* * *

现在我已经开始工作了，它确实看起来很简单而且很明显，但是我必须经历很多变化，直到我偶然发现了正确的设置。感觉就像使用 OpenGL，如果事情不是 100% 正确，那么它们就是不正确的。****

# mapreduce - MapReduce FIFO 调度程序

> ID：12208874
> 
> 赞同：1
> 
> 时间：2012-08-31T04:22:37.613
> 
> 标签：mapreduce

我有一个关于 MapReduce FIFO 调度程序的问题。我了解作业在到达队列时执行（只要它们具有相同的优先级）。我的理解是下一项工作将等到当前工作完成。但是，如果当前作业没有完全消耗容量并且下一个作业可以使用剩余容量运行怎么办？在这种情况下，下一个作业将立即执行还是仍然等待当前作业完成？

如果第二个任务必须等到第一个任务完成，一个相关的问题是，当第一个任务的地图任务完成时，第二个任务的地图任务是否可以运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:54:18.137

首先，集群中的每个节点都有固定数量的槽，平均分配给映射任务和减少任务。在 FIFO 调度程序中，当发生偏移时效率不是很高。例如，如果之前的作业有一个 map 任务或 reduce 任务需要“永远”完成，那么整个系统可能会停止。幸运的是，这不会发生，因为 MapReduce 采用了推测执行。一旦检测到落后者，他们的克隆将在其他节点启动。

你的第一个问题：我认为答案是肯定的。剩余的容量当然会被下一个作业使用。

第二个问题：当没有剩余容量可用时，下一个作业必须等待。当前一个作业完成其地图任务时，这意味着地图任务的插槽被释放。所以下一个工作可以开始它的映射阶段。

# android - 如何在 Android 中创建登录页面。（使用 ksoap2 Web 服务共享点）

> ID：12208875
> 
> 赞同：0
> 
> 时间：2012-08-31T04:22:38.733
> 
> 标签：android, web-services, ksoap2

**我是 Android 新手。我尝试创建登录页面，但总是出错。**

**我添加了 ksoap2.java 和权限 INTERNET。**

**这是我的代码。**

```
 import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;
    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class Main extends Activity {

    private final String NAMESPACE = "http://schemas.microsoft.com/sharepoint/soap/";
    private final String URL = "http://ipaddress/_vti_bin/authentication.asmx?WSDL";

    String username;
    String password;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button signin = (Button) findViewById(R.id.regsubmitbtn);
        signin.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                EditText etxt_user = (EditText) findViewById(R.id.usereditlog);
                username = etxt_user.getText().toString();
                EditText etxt_password = (EditText)  findViewById(R.id.pwdeditlog);
                password = etxt_password.getText().toString();
                Login(username,password);
            }
        });   
    }
    private void Login(String user, String pass) {   

        final String SOAP_ACTION = "http://schemas.microsoft.com/sharepoint/soap/Login";
        final String METHOD_NAME = "Login";     
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("username",user);
        request.addProperty("password",pass);
        SoapSerializationEnvelope envelope = new   SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true; 
        envelope.setOutputSoapObject(request);
        System.out.println(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Intent i = new Intent(Main.this,List.class);
            startActivity(i);
        }
        catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

**单击登录按钮时必须更改为其他页面，但这是错误的。**

**感谢您的帮助。**

* * *

这是我的错误日志。请帮助。

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
at com.app.jobrequest.Main.Login(Main.java:45)
at com.app.jobrequest.Main.access$0(Main.java:40)
at com.app.jobrequest.Main$1.onClick(Main.java:36)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.langreflect.Method.invokeNative(Native Method)
at java.land.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStrat.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:25:38.013

从您的 URL 中删除“?WSDL”。如果您仍有问题，请更新您的帖子，并提供有关您收到的错误消息的更多详细信息。

```
private final String URL = "http://ipaddress/_vti_bin/authentication.asmx"; 
```

# android - 如何通过动态应用主题来改变textview、button、edit text的角的形状？

> ID：12208878
> 
> 赞同：1
> 
> 时间：2012-08-31T04:23:07.410
> 
> 标签：android, android-widget, styles, themes

这是我的代码。我从未在我的应用程序中看到任何变化。我已经在`resources/drawable`. 我应该如何通过更改 text 等为所有组件动态应用样式中`color`的`fonts`主题`shapes`？

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
 android:shape="oval" android:padding="20dp">
     <solid android:color="#FFA500"/>
     <corners android:bottomRightRadius="50dp" android:bottomLeftRadius="50dp"
     android:topLeftRadius="50dp" android:topRightRadius="50dp"/>
     <stroke android:color="#FFA500" android:dashWidth="50dp" />
 </shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:58:25.700

在drawable中创建一个shape.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
     android:shape="rectangle">
 <gradient
    android:startColor="#99CCFF"
    android:endColor="#99CCFF"
    android:angle="45"/>
 <padding android:left="6dp"
    android:top="6dp"
    android:right="6dp"
    android:bottom="6dp" />
 <corners android:radius="30dp" />
 </shape> 
```

现在为您的 Button 代码添加 android:background ，如下所示。

```
 <Button
    android:id="@+id/bt"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/shape"/>  // shape is name of xml file created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:05:20.430

您上面的代码绝对可以正常工作。可能问题出在您声明背景的方式上：您是在 XML 文件中执行，还是通过 Java 代码动态执行？

# core-location - 迁移到 xcode 4.4 会清除 Schemes 中的 GPX 文件

> ID：12208879
> 
> 赞同：1
> 
> 时间：2012-08-31T04:23:08.707
> 
> 标签：core-location, xcode4.4, gpx

我不仅丢失了对我的方案中特定 gpx 文件的引用......我无法添加回这些文件。

编辑方案时（通过添加 gpx 文件）。finder 不会突出显示任何符合条件的 gpx 文件。

认为这可能是 iOS 文件关联问题，所以我将狮子转移到山狮，这是一个绝望的举动。没有帮助

还有人遇到这个吗？？谢谢

# ssrs-2008 - 如何在 SSRS 2008 中对齐参数文本框

> ID：12208882
> 
> 赞同：0
> 
> 时间：2012-08-31T04:23:26.820
> 
> 标签：ssrs-2008

我在 MSDN 中读过它说...

1.参数窗格：报表查看器工具栏显示每个参数的提示和默认值。工具栏上的参数布局会自动格式化。顺序由参数出现在“报告数据”窗格中的顺序决定。

不能改变参数文本框的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:42:00.490

不，如果您使用开箱即用的 SSRS，则无法更改参数文本框的设计。如果要自定义布局，则需要设计 Web/Windows 窗体并为参数创建自己的布局，并使用 ReportViewer 控件通过代码将参数传递给该控件，然后显示报表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T21:46:46.473

下面的“肮脏”方式对我有用。如果您已经构建了参数，则删除它们并重新构建它们 第 1 步：按照您希望它们从左到右显示的顺序在报表数据窗口中创建参数（并且它们溢出到下面的行中） 第 2 步：分配参数在数据集中以相同的顺序。

# iphone - iOS中的Uipagecontrol自定义

> ID：12208885
> 
> 赞同：-1
> 
> 时间：2012-08-31T04:23:36.533
> 
> 标签：iphone, ios, xcode4.2, customization, uipagecontrol

我正在尝试在 uipagecontroller 的页面上添加不同的视图。总共有三个页面。也就是说，在第一页中我必须实现一个地图，在第二个视图中，一个带有一些标签的简单视图和第三个视图，一张表。我按照此处提供的教程进行操作：http: [//developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)用于实现页面控制器。如何设置此控制器的视图根据选定的页面。有人可以给出一些想法吗？我尝试了这种方法。但它没有给出任何方法

```
 - (void)loadScrollViewWithPage:(int)page {
        NSLog(@"%d",page);

        if (page < 0)
            return;
        if (page >= kNumberOfPages)
            return;

        // replace the placeholder if necessary
        MyViewController *controller = [viewControllers objectAtIndex:page];
        if ((NSNull *)controller == [NSNull null])
        {
            controller = [[MyViewController alloc] initWithPageNumber:page];
            [viewControllers replaceObjectAtIndex:page withObject:controller];
            [controller release];
      }

        // add the controller's view to the scroll view
        if (controller.view.superview == nil)
        {
            CGRect frame = scroll.frame;
            frame.origin.x = frame.size.width * page;
            frame.origin.y = 0;
            controller.view.frame = frame;
            [scroll addSubview:controller.view];
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:31:27.883

将您需要的视图添加到 scrollView 对象，然后您可以使用以下代码管理所有视图： [https ://github.com/SIMHAM/DDPageControl](https://github.com/SIMHAM/DDPageControl)

# sql-server - 将 SELECT 结果用于另一个查询

> ID：12208892
> 
> 赞同：1
> 
> 时间：2012-08-31T04:24:13.087
> 
> 标签：sql-server, tsql

除了使用游标之外，还有什么方法可以将`SELECT`结果用于后续`INSERT/UPDATE`查询？

就像是：

```
DECLARE @SELECTRESULT;

SELECT Something into @SELECTRESULT
FROM Somewhere

INSERT INTO SomewhereElse (X, XX, XXX)
SELECT Something, GETDATE(), 'XXX'
FROM @SELECTRESULT

UPDATE Somewhere
Set SomethingElse = 'ABC'
WHERE
Something in
(SELECT Something FROM @SELECTRESULT) 
```

原因是我有一个来自多个表的相对复杂的查询，我不想重复这段代码，一次用于插入，第二次用于更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:26:38.407

您可以使用表变量。

就像是

```
DECLARE @Table TABLE(
Col1 INT
)

INSERT INTO @Table
SELECT Col1
FROM Table 
```

看一下

[T-SQL 中的表变量](http://odetocode.com/Articles/365.aspx)

[声明 @local_variable (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188927.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:20:36.103

只需使用一个临时表就可以了：

> 从某处 WHERE 选择一些东西到#temporary_table blabla

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:33:19.290

使用临时表。

```
CREATE TABLE #tempTable
(
Something int NOT NULL,
CurrentDate DateTime NULL,
    XXX Varchar(50)
) 
```

然后在多个表上使用您的复杂查询并将结果集插入到 tempTable 中。

```
Insert into #tempTable
-- Complex Select Query 
```

只需确保所选查询返回的列按照 #tempTable 结构的顺序匹配即可。列数也应该匹配。一旦你有复杂数据的#tempTable，你可以多次使用它来进行插入和更新查询。

```
INSERT INTO SomewhereElse (X, XX, XXX)
SELECT * from #tempTable

UPDATE Somewhere
Set SomethingElse = 'ABC'
WHERE
Something in (SELECT Something FROM #tempTable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:48:38.853

```
DECLARE @SELECTRESULT table(Something nvarchar(50)) --the data that you could reuse.
insert into @SELECTRESULT(Something)
SELECT Something
FROM Somewhere

INSERT INTO SomewhereElse (X, XX, XXX)
SELECT Something, GETDATE(), 'XXX'
FROM @SELECTRESULT

UPDATE Somewhere
Set SomethingElse = 'ABC'
WHERE Something in
(SELECT Something FROM @SELECTRESULT) 
```

# android - 如何在 android 中编写我自己的自定义 TTS 引擎应用程序？

> ID：12208895
> 
> 赞同：2
> 
> 时间：2012-08-31T04:24:32.440
> 
> 标签：android, text-to-speech, freetts

我必须编写自己的自定义 TTS 引擎，以便我可以在我的应用程序中使用它。为什么我要创建自己的 TTS 引擎，因为某些 TTS 引擎要么不支持所需的语言，要么支持的不是免费的 TTS 引擎，所以我将创建自己的引擎，支持所有这些语言，我只想将其创建为库（.jar），以便轻松添加到多个应用程序中。

任何人都可以建议我如何实现它或者是否有可能实现它，如果是，那么如何实现？请协助我实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:47:46.870

不太可能是周末项目；-)

Pico 显然是[开源](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/Lpab5nVEI-c)的，或者您可以查看这些其他[开源项目](http://www.babelfish.org/tts-free.htm)，看看它们中的任何一个是否可以为您提供一个良好的开端。

您还必须创建自己的声音文件，这一点也不简单，而且完全超出了 SO 的范围。

不过祝你好运！

# ms-access - 使用 MS Access 创建向导界面

> ID：12208903
> 
> 赞同：1
> 
> 时间：2012-08-31T04:25:10.950
> 
> 标签：ms-access

有人对如何使用 Access 2010 创建“向导界面”有任何指示吗？我需要一组顺序的表单，这些表单能够根据用户的回答和数据库中的数据来分支流程。我以前曾将 Access 用于某些 CRUD/Reports 类型的应用程序，但在这种情况下，我似乎无法理解如何开始使用如此复杂的机器。

在任何人建议之前，由于客户要求，我只能使用 Access。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:54:52.813

我感到你的痛苦……在有复杂要求的情况下，使用 Access 变得如此困难。

1.  **收集并记录需求**

    确保你已经从客户那里找出了所有可能的皱纹和意外情况，并将其放入流程图或其他东西中。

2.  **提取模型**

    找出正在使用的模型——客户、地址、供应商、产品等。这些必须创建为表格或适应现有表格。

3.  **提取其他变量**

    随着时间的推移可能会发生什么变化和/或客户希望能够通过管理屏幕更改什么？您必须决定将这些变量中的哪些放入表中，哪些在代码中是可以的（表单逻辑和/或 VBA）。

4.  **为向导视图设计表**

    我想你会想要一个*向导屏幕*表，其中每一行对应一个步骤；每个都应该有（除了一个*id*列）*前一个屏幕*列，以及一个*表单名称*或*表单模板名称*列。您需要第二个表*选择*，其中包含一个多对一外键链接回*屏幕*；此处的每一行将对应于视图的可能结果，以及向导中的下一步目标。

5.  **设计表格**

    最后，设计与每个向导步骤或模板对应的表单，根据需要从 1-4 中的结构中提取数据。

# resharper - Resharper 7 - 无法创建自定义模式

> ID：12208915
> 
> 赞同：2
> 
> 时间：2012-08-31T04:26:36.213
> 
> 标签：resharper, resharper-7.0

当我尝试在 Resharper 中创建新的“突出显示模式”时，主文本框中的输入根本不起作用。所以我坚持使用默认输入（=“3”），根本无法更改。我做错了什么，还是这是一个错误？

![在此处输入图像描述](../Images/bf59f8fbd6948757cf5dac4d2545a0bd.png)

我的 Resharper 版本：JetBrains ReSharper 7.0.1 Full Edition Build 7.0.1098.2760

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:29:48.410

显然，在我重新启动计算机后，这个问题就消失了。单独重新启动 Visual Studio 并没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T12:34:38.933

对我来说，重新启动 Visual Studio 而**不是**打开解决方案就可以了。一旦打开任何解决方案，主文本框就会变得无法操作。在关闭解决方案后也是如此。

当然，您不能以这种方式将更改保存到解决方案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T08:10:52.507

我暂停 R# (tools=>options=>resharper=>suspend)，重新启动 vs，打开解决方案，重新启用 R#

JetBrains ReSharper 7.1 C# Edition Build 7.1.25.234 于 2012-11-13T18:34:00

# c++ - 如何修改程序以使其编译？

> ID：12208924
> 
> 赞同：0
> 
> 时间：2012-08-31T04:28:17.860
> 
> 标签：c++, stl, compiler-errors

```
#include <iostream>
#include <vector>
#include <algorithm> 

using namespace std;

void push_back(int v, vector<int>& coll) 
{
    coll.push_back(v); 
}

int main() 
{
    int a[] = {1, 2, 3, 4, 5};
    std::vector<int> b;
    for_each(a, a + 5, bind2nd(ptr_fun(push_back), b)); 
} 
```

编译器说：

```
/usr/include/c++/4.1.2/bits/stl_function.h: In instantiation of ‘std::binder2nd<std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void> >’:
tt5.cpp:15:   instantiated from here
/usr/include/c++/4.1.2/bits/stl_function.h:435: error: forming reference to reference type ‘std::vector<int, std::allocator<int> >&’
/usr/include/c++/4.1.2/bits/stl_function.h: In function ‘std::binder2nd<_Operation> std::bind2nd(const _Operation&, const _Tp&) [with _Operation = std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void>, _Tp = std::vector<int, std::allocator<int> >]’:
tt5.cpp:15:   instantiated from here
/usr/include/c++/4.1.2/bits/stl_function.h:455: error: no matching function for call to ‘std::binder2nd<std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void> >::binder2nd(const std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void>&, std::vector<int, std::allocator<int> >&)’
/usr/include/c++/4.1.2/bits/stl_function.h:429: note: candidates are: std::binder2nd<std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void> >::binder2nd(const std::binder2nd<std::pointer_to_binary_function<int, std::vector<int, std::allocator<int> >&, void> >&) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T04:56:21.250

您的程序非常好，只是您正在使用`using namespace std;`应该避免的程序。在这种情况下，这*可能是*导致问题的原因。

所以我建议你删除`using namespace std;`行，并尝试使用完全限定的名称，例如`std::vector`等`std::for_each`。

另一个解决方法可能是这样：只是不要使用`std::for_each`，因为你不需要它。

写这个：

```
int a[] = {1, 2, 3, 4, 5};
std::vector<int> b(a, a+5); 
```

完毕！

现在，如果您想稍后插入更多项目，请执行以下操作：

```
int *c = get_n_items(n); //get n items 
b.insert(b.end(), c, c+n); //insert all items at end 
```

希望有帮助。

* * *

## 你的真实场景：

正如你在评论中所说：

> 在我的实际工作中，源集合元素是一个对象。我只想从每个元素中提取一个成员数据并将它们插入到一个向量中。

如果是这种情况，那么您应该[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform).

假设源是`std::vector<person>`并且您想从该源集合的每个元素中*挑选* `age`成员数据，并将它们插入`b`其中`vector<int>`：

```
std::vector<person> persons = get_persons();
std::transform(persons.begin(),        //input begin iterator
               persons.end(),          //input end iterator
               std::back_inserter(b),  //output iterator
               select_age);            //selector 
```

其中`select_age`定义为：

```
int select_age(person const & p) { return p.age; } 
```

如果可以使用 C++11 的 lambda，那就简单多了：

```
std::transform(persons.begin(),        //input begin iterator
               persons.end(),          //input end iterator
               std::back_inserter(b),  //output iterator
               [](person const & p) {return p.age;});  //selector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:25:09.767

方法1

```
void push_back(int v, vector<int>& coll)
{
    coll.push_back(v);
}

for_each(a, a + 5, bind2nd(ptr_fun(push_back), b)); 
```

方法2

```
#include <boost/bind.hpp>
#include <boost/ref.hpp>

for_each(a, a + 5, boost::bind(&vector<int>::push_back, boost::ref(b), _1)); 
```

方法3

```
copy (a, a+5, back_inserter(b)); 
```

# emacs - 如何更改 emacs lua-mode.el 中的注释颜色？

> ID：12208926
> 
> 赞同：1
> 
> 时间：2012-08-31T04:28:49.583
> 
> 标签：emacs, lua

标题非常不言自明。

我想在 lua 模式下将评论颜色从黑色更改为绿色。

我试过把它放到 .emacs (set-face-foreground 'font-lock-string-face "red")

但它没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:58:47.897

如果您将光标放在评论中，然后键入`M-x customize-face RET`，它将提供自动自定义正确的面孔（在这种情况下`font-lock-comment-face`，如 Rupert 所述）。这为您提供了一种很好的方式来处理面部的不同变化（以获得完全正确的颜色等），然后将其保存到您的`.emacs`. 这是找出您想要改变的任何面孔的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:28:10.600

至少在我的 Emacs 版本中，如果我`describe-face`在 Lua 文件中调用一些注释，我会得到`font-lock-comment-face`，而不是`font-lock-string-face`. 您是否更改了错误的变量？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T23:38:55.057

我已经解决了。

卸载 emacs 23 apt-get remove emacs

按照以下说明操作：[https](https://launchpad.net/~cassou/+archive/emacs) ://launchpad.net/~cassou/+archive/emacs 安装的 emacs-starter-kit：[https ://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)

使用 Mx package-install RET lua-mode 安装 lua-mode

重新启动，并加载了一个lua文件。现在单行和多行评论都具有相同的评论颜色，我可以通过将默认情况下为砖红色的 font-lock-comment-face 颜色设置为深绿色来更改它，根据上面 Ivan 的回答。

# maven - Maven编译失败但存在依赖

> ID：12208928
> 
> 赞同：13
> 
> 时间：2012-08-31T04:28:54.963
> 
> 标签：maven

我正在构建一个 Maven 项目，但我遇到编译失败，表明依赖项不存在。但是，我在依赖项列表中看到了它们。我正在使用干净的软件包安装。

```
[ERROR] \workspace\smartpharm\SmartPharm\src\main\java\com\bla\medication\service\impl\MedicationServiceImpl.java:[7,23] package org.apache.log4j does not exist
[ERROR] \workspace\smartpharm\SmartPharm\src\main\java\com\bla\medication\service\impl\MedicationServiceImpl.java:[8,51] package org.springframework.beans.factory.annotation does not exist
[ERROR] \workspace\smartpharm\SmartPharm\src\main\java\com\bla\medication\service\impl\MedicationServiceImpl.java:[9,37] package org.springframework.stereotype does not exist 
```

这是我的依赖列表

```
<properties>
    <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
</properties>
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.3</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.19</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.6</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.3</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.lexi.lexidata</groupId>
        <artifactId>LexiData</artifactId>
        <version>1.0</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.6</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-lgpl</artifactId>
        <version>1.9.7</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.7</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.4.Final</version>
        <type>jar</type>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.5.4</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-hibernate2</artifactId>
        <version>2.0.8</version>
        <type>jar</type>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>  
        <version>1.0</version>
        <scope>compile</scope>
      </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-31T04:55:10.007

来自[Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)：

> **运行时**这个范围表示编译不需要依赖，但执行。它在运行时和测试类路径中，但不在编译类路径中。

从 pom.xml 中删除您的范围标签或设置为“编译”（如 juancancela 所说）。

希望对你有帮助

# javascript - 使用javascript单击按钮关闭窗口

> ID：12208930
> 
> 赞同：0
> 
> 时间：2012-08-31T04:29:02.210
> 
> 标签：javascript, asp.net, button, click, vb.net-2010

我正在使用 JavaScript 警报语句创建消息对话框。该对话框包含一个按钮。在该按钮中单击我想关闭当前窗口。

**JavaScript**

```
<script language="javascript" >
     function Confirmation() {
         var win = window.open('', '_self');
         if (confirm("Are you sure you want to close the form?") == true)
             win.close();
         else
             return false
     }

  </script> 
```

**HTML**

```
 <td class="style5">
<asp:ImageButton ID="close" runat ="server" ImageUrl ="image/button_blue_close.png" OnClientClick="return Confirmation()"
        Height="16px" Width="21px" ImageAlign="Right"/>
 </td> 
```

我的代码仅在我单击图像按钮时关闭窗口。但我想在对话框的按钮单击中关闭窗口

```
 my code in vb.net
 -----------------
 ClientScript.RegisterStartupScript(Me.GetType(), "message", "alert('Please Raise the  ticket for particular event');", True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:24:25.013

如果你想关闭你的父窗口，你应该改变你的代码

```
`<script language="javascript" >function Confirmation(){if (confirm("Are you sure you want to close the form?") == true) window.opener.close();else return false;}</script>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:09:07.000

如果我正确理解你的问题，你想从对话框中关闭你的父窗口。尽管您编写的代码将关闭您的对话框而不是您的父窗口。要关闭父窗口，您可以使用以下代码：

`window.opener.close();`

# javascript - 使用hammer.js 创建一个触摸滑块

> ID：12208939
> 
> 赞同：0
> 
> 时间：2012-08-31T04:30:50.390
> 
> 标签：javascript, jquery, jquery-mobile, hammer.js

为了给你一点背景知识，我一直在使用 phonegap 和 jquery mobile 来创建一个原生移动应用程序。使用 JQUI 时，android 设备上的响应似乎很慢。在以前的应用程序中，我创建了自己的点击事件等。

我最近发现了hammer.js ......这是一个超级轻量级​​的触摸库。使用这个触摸库极大地提高了 android 设备上的响应。

有了这个背景故事，我创建了一个触摸滑块，可以在您拖动旋钮时计算时间。

我想逐步增加滑块（我似乎无法弄清楚如何做到这一点）。在这种情况下，我需要滑块以 15 分钟的增量步进。现在滑块每分钟步进一次。我已经考虑了一段时间了，我迷路了。（这里是 JQ 移动[http://jquerymobile.com/demos/1.1.1/docs/forms/slider/](http://jquerymobile.com/demos/1.1.1/docs/forms/slider/)的增量步进滑块示例...我正在寻找这样的东西）

这是我当前的代码：http: [//jsfiddle.net/cj8Hr/1/](http://jsfiddle.net/cj8Hr/1/)

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:31:59.993

改变了

```
 var calcMins = Math.round(left * pixelPerMin); 
```

到

```
 var calcMins1 = Math.round(left * pixelPerMin);
        var calcMins = calcMins1 - (calcMins1 % 15); 
```

请检查更新的[小提琴](http://jsfiddle.net/cj8Hr/2/)。

# java - 成对获取最大值

> ID：12208941
> 
> 赞同：-5
> 
> 时间：2012-08-31T04:31:02.587
> 
> 标签：java

我有很多对形式：

*   itemid核心
*   1 2
*   1 4
*   1 3
*   2 2
*   2 5

我想获得其他 itemid 结果的最高分

*   itemid核心
*   1 4
*   2 5

解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:42:16.467

使用 a[`Map<Integer, Integer>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)作为`itemid`键，并`max(core)`作为其值，并在每次迭代中，将当前[最大值](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#max%28int,%20int%29)与新的进行比较`core`：

```
Map<Integer, Integer> maxMap = new HashMap<Integer, Integer>();
int[][] pairs = {
        { 1, 2 },
        { 1, 4 },
        { 1, 3 },
        { 2, 2 },
        { 2, 5 }
};
// Calculate max value for each itemid
for (int i = 0; i < pairs.length; i++) {
    int[] pair = pairs[i];
    Integer currentMax = maxMap.get(pair[0]);
    if (currentMax == null) {
        currentMax = Integer.MIN_VALUE;
    }
    maxMap.put(pair[0], Math.max(pair[1], currentMax));
}
// Print them
for (Integer itemId : maxMap.keySet()) {
    System.out.printf("%d %d\n", itemId, maxMap.get(itemId)); 
} 
```

这将打印：

```
1 4
2 5 
```

**[演示](http://ideone.com/rM5uA)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T04:56:34.267

这会给你一个排序的对列表，这里按核心升序排序：

```
package com.pair.sort;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class MainClass {

/**
 * @param args
 */
public static void main(String[] args) {
    List<Pair> list = new ArrayList<Pair>();
    list.add(new Pair(1, 2));
    list.add(new Pair(1, 4));
    list.add(new Pair(1, 3));
    list.add(new Pair(2, 2));
    list.add(new Pair(2, 5));
    Collections.sort(list);
    System.out.println(list);
}

}

class Pair implements Comparable<Pair>{

public Pair(int i, int j) {
    itemId = i;
    core = j;
}

Integer itemId;

Integer core;

@Override
public String toString(){
    return itemId + " " + core;
}

public int compareTo(Pair compare) {
    return core.compareTo(compare.core);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:39:38.520

您可以先按 itemid 对项目列表进行排序，如果 itemid 相等则按核心排序。一旦你对列表进行了排序，它将需要 O(n) 来遍历所有元素并为相等的 itemid 拾取最大值。如果您需要实际代码，请告诉我。

如果是 SQL。按 itemid 从表组中选择 itemid, max(core)。

# windows - Windows 8 RTM 是否支持 VB6 (SP6) 运行时文件？如果有，有哪些？

> ID：12208942
> 
> 赞同：3
> 
> 时间：2012-08-31T04:31:09.570
> 
> 标签：windows, visual-studio, vb6, windows-8, compatibility

基本上，我试图找出以下哪些文件与 Windows 8 RTM（即最终版本）一起打包。为了清楚起见，我们不想知道任何运行时文件（如下所列）是否包含在任何先前版本（Beta、CTP、RS 等）或 Windows 8 版本中 - 我们只是感兴趣就 Windows 8 RTM（最终版）而言，在这个兼容性问题中。

此外，如果可能的话，我们还想知道以下哪些文件（如果有）是随 Windows 8 RT（ARM 上）版本一起发布和注册的。就 ARM 版本而言，欢迎您将答案基于发布答案的日期和时间可用的最新版本的 Windows 8 RT（ARM 上）。（随着 Windows 8 和 Windows 8 RT on ARM 的其他版本或版本的出现，这也将有助于解决这个问题的未来）。

以下是文件列表（基本上是 VB6 SP6 运行时文件）：

> ```
> File name         Version         Size
> 
> Asycfilt.dll      2.40.4275.1     144 KB (147,728 bytes)
> 
> Comcat.dll        4.71.1460.1     21.7 KB (22,288 bytes)
> 
> Msvbvm60.dll      6.0.97.82       1.32 MB (1,386,496 bytes)
> 
> Oleaut32.dll      2.40.4275.1     584 KB (598,288 bytes)
> 
> Olepro32.dll      5.0.4275.1      160 KB (164,112 bytes)
> 
> Stdole2.tlb       2.40.4275.1     17.5 KB (17,920 bytes) 
> ```

当然，其中最重要的文件是`MSVBVM60.DLL`，因此，如果您无法提供与这两个 Windows 版本相关的所有文件的详细信息，那么根据尽可能多的文件来回答也是有用的。

感谢您阅读并在记录此问题/答案方面提供预期的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T04:34:39.640

以下是官方支持声明：

**[http://msdn.microsoft.com/en-us/vstudio/ms788708](http://msdn.microsoft.com/en-us/vstudio/ms788708)**

> Visual Basic 团队致力于为 Windows Vista、Windows Server 2008（包括 R2、Windows 7 和 Windows 8）上的 Visual Basic 6.0 应用程序提供“It Just Works”兼容性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T04:36:40.707

[本文件](http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx)为官方用语。

# r - 使用 data.table 的简单频率表

> ID：12208946
> 
> 赞同：34
> 
> 时间：2012-08-31T04:31:40.990
> 
> 标签：r, data.table

我正在寻找一种通过 data.table 进行简单聚合/计数的方法。

考虑 iris 数据，每个物种有 50 个观测值。要计算每个物种的观察结果，我必须总结除物种以外的列，例如“Sepal.Length”。

```
library(data.table)
dt = as.data.table(iris)
dt[,length(Sepal.Length), Species] 
```

我觉得这很令人困惑，因为乍一看我好像在 Sepal.Length 上做某事，而实际上只有 Species 才重要。

这就是我想说的，但我没有得到有效的输出：

```
dt[,length(Species), Species] 
```

## 正确的输入和输出，但代码笨拙：

```
> dt[,length(Sepal.Length), Species]
Species V1
1:     setosa 50
2: versicolor 50
3:  virginica 50 
```

## 输入和输出不正确，但代码更好：

```
> dt[,length(Species), Species]
Species V1
1:     setosa  1
2: versicolor  1
3:  virginica  1 
```

### 有没有一种优雅的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-31T04:36:52.453

`data.table`有几个可以在`j`表达式中使用的符号。尤其

*   `.N`将为您提供每组中的行数。

详情见`?data.table`下`by`

> 高级：当`by`按 i 或按 i 分组时，符号 .SD、.BY 和 .N 可用于 j 表达式，定义如下。
> 
> ……
> 
> .N 是一个整数，长度为 1，包含组中的行数。

例如：

```
dt[, .N ,by = Species]

     Species  N
1:     setosa 50
2: versicolor 50
3:  virginica 50 
```

# c - 我怎样才能为这个算法写一个基本案例？

> ID：12208947
> 
> 赞同：0
> 
> 时间：2012-08-31T04:31:57.977
> 
> 标签：c, arrays, recursion

我的算法有问题：我需要做的是通过递归将数组的元素相乘。这是我到目前为止所得到的：

```
 #include <stdio.h>
    void vector(int vec[],int tam) {
    // gets a simple array
        int i;
        for (i=0; i<tam; i++) {
            printf("Ingrese un numero: ");
            scanf("%d",&vec[i]);
        }
    }
    int mv(int vec[], int tam, int pos) {
     // need help with the base and general case!
        if (tam==0) {
            return 1;
        } else {
            return vec[pos]*mv(vec,tam,pos+1);
        }   
    }

    int main() {
        int vec[3];
        vector(vec,3);
        printf("%d",mv(vec,3,0));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:37:34.563

基本情况是`if (pos == tam) return 1;`

您还必须确保数组不为空

# excel - 如何从 Excel 中打开突出显示特定行的 csv 文件？

> ID：12208951
> 
> 赞同：1
> 
> 时间：2012-08-31T04:32:11.457
> 
> 标签：excel, excel, vba, csv, vbscript

我有一个大`CSV`文件，我想以编程方式在[excel](/questions/tagged/excel "显示标记为“excel”的问题")中打开它，突出显示特定的行（我知道行号）。最简单的方法是什么？

我认为我的选择是：

1.  自动将 csv 文件转换为 xlsx 文件。我怎样才能从脚本中做到这一点？
2.  打开时给 Excel 一些参数。不知道 Microsoft 产品采用什么命令行参数。
3.  在打开 CSV 文件并告诉它突出显示特定内容后，它以某种方式与 Excel 交互。再次不确定如何。

如果系统安装了 Excel，我更喜欢 Java/Python/Shell 或任何可以在 Mac/Windows 上运行的东西。所以，我最好的选择可能`#1`是让我回到如何将`CSV`文件转换为文件的问题`xlsx`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T05:05:56.193

您可以运行一个基本的[vbs](/questions/tagged/vbs "显示标记为“vbs”的问题")，避免需要已经打开 Excel，并且不需要转换。

1.  将下面的代码粘贴到文本编辑器中`NotePad`
2.  更改 CSV 文件的路径以适合（即*"c:\temp\test2.csv"*）
3.  将文件另存为`MyCSV.vbs`对桌面说的内容

点击最后的[vbs](/questions/tagged/vbs "显示标记为“vbs”的问题")将 CSV 文件打开到第 X 行（下面示例中的 8 个）

```
Dim objExcel
Dim WB
Set objExcel = CreateObject("excel.application")
Set WB = objExcel.Workbooks.Open("c:\temp\test2.csv")
With objExcel
.Goto WB.Sheets(1).Rows(8)
.Visible = True
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:22:27.127

这很简单，将其保存在一个空的工作簿中。

```
Private Sub Workbook_Open()
    Workbooks.Open ("test.csv")
    Range("8:8").Select
End Sub 
```

此外，如果您将其保存在 normal.dot（打开 excel 时的默认模板文档）中，它将在打开的任何文档上运行。所以你可以做的是：

将此保存到您的 normal.dot

```
Private Sub Workbook_Open()
    Range("8:8").Select
End Sub 
```

然后将打开 .csv 文件的默认应用程序更改为 excel。然后，每当您双击 .csv 文件时，它将用 excel 打开，并且 excel 将运行 Workbook_Open() 子和中提琴！

# sqlite - 使用 SQLite 数据库中的数据填充 ListView

> ID：12208954
> 
> 赞同：0
> 
> 时间：2012-08-31T04:32:33.023
> 
> 标签：sqlite, listview, simplecursoradapter

我一直在努力尝试用 SQLite 数据库中的数据填充 ListView，但似乎无法弄清楚。我在这里阅读了无数的教程和同样无数的帖子，但我显然没有得到关键的东西。希望有人能给我一个提示，说明为什么以下两段代码不能一起工作，或者我是否应该完全看其他东西。任何帮助，将不胜感激。我得到的结果是强制关闭。

启动填充 ListView 对象的方法

```
public void displayNurseRoster(){

    listView = (ListView) findViewById(R.id.list);

    // create instance of DbCommunicator
    DbCommunicator rosterView = new DbCommunicator(this);

    // open instance
    rosterView.open();

    // instantiate SimpleCursorAdapter instance and set value
    SimpleCursorAdapter cursorAdapter;
    cursorAdapter = rosterView.getRosterListViewAdapter(this);

    // close database instance
    rosterView.close();

    // set adapter to listView
    listView.setAdapter(cursorAdapter);
} 
```

返回 SimpleCursorAdapter 的方法：

```
public SimpleCursorAdapter getRosterListViewAdapter (Context context) {

    // method variables 
    int[] to = new int[] {R.id.rosterListLname};
    // used ArrayList because of unpredictability of array length
    List<String> dataArray = new ArrayList<String>(); 
    String[] columns = new String[] {KEY_NURSE_ROWID, KEY_LNAME}; 

    // create cursor
    Cursor cursor = sqldb.query(NURSE_TABLE, columns, null, null, null,
            null, KEY_LNAME);

    int iLname = cursor.getColumnIndex(KEY_LNAME);

    cursor.moveToFirst();

    String result = "";

    while(!cursor.isAfterLast()){
        result = result 
                + cursor.getString(iLname) + "\n";
        dataArray.add(result);

    }
    // convert ArrayList to String array for use with SimpleCursorAdapter
    String [] from = (String[]) dataArray.toArray();

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(context,
            R.layout.edit_roster, cursor, from, to);

    return adapter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:03:39.897

好的，我开始工作了，并想分享以帮助其他为此苦苦挣扎的人，以及 2) 获得有关我的修复的反馈，以防有更多经验的人有更好的建议。

我实际上想在列表视图中显示三个项目，所以这是有效的代码。我遇到的一个问题是我正在扩展 ListActivity，但在另一篇 StackOverflow 帖子中发现，当只有一个列表视图需要担心时，这不是一个好主意。

```
package com.deadEddie.staffingmanagement;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class EditRoster extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_roster);
    displayNurseRoster();   
}

public void displayNurseRoster(){

    ListView listView = (ListView) findViewById(R.id.list);

    int[] to = new int[] {
            R.id.rosterListLname, 
            R.id.rosterListFname, 
            R.id.rosterListMI };

    String[] from = new String [] {
            DbCommunicator.KEY_LNAME, 
            DbCommunicator.KEY_FNAME, 
            DbCommunicator.KEY_MI};

    // create instance of DbCommunicator
    DbCommunicator rosterView = new DbCommunicator(this);

    // open instance
    rosterView.open();

    // get & manage cursor
    Cursor cursor = rosterView.getRosterCursor(this);
    startManagingCursor(cursor);

    // instantiate cursor adaptor
    ListAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.nurse_list, cursor, from, to);
    cursor.moveToNext();

    // set adapter to listView
    listView.setAdapter(adapter);
}// displayNurseRoster()
} 
```

这是我的 DbCommunicator 类中的方法。最终不同的是，我没有创建 SQLiteQueryBuilder 的实例并使用它，而是使用了 sqldb.query(...)，如上所示。我不确定有什么区别，但它终于成功了。如果有人想分享，请做。

```
public Cursor getRosterCursor (Context context) {

    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(NURSE_TABLE);

    Cursor cursor = queryBuilder.query(sqldb, new String[] {
            KEY_NURSE_ROWID, 
            KEY_LNAME,
            KEY_FNAME,
            KEY_MI},
            null, null, null, null, null);

    return cursor;
} 
```

为其他人准备的其他一些新手课程： 1\. 始终使用光标中的“_id”字段。没有它，光标就无法工作。
2\. 简单的列表视图不需要 while 或 for 循环。游标适配器处理这个问题。3\. 无需在光标上调用 moveToFirst() 方法。

希望这对某人有帮助。

# ethernet - AoE 标准似乎没有 CRC 字段。这是否违反了以太网标准？

> ID：12208955
> 
> 赞同：1
> 
> 时间：2012-08-31T04:32:46.667
> 
> 标签：ethernet, ata

我一直在我的一个设置中调试 AoE。

在其中我注意到 AoE 数据包似乎没有帧​​上的校验和字段。我查看了 AoE 规范，它似乎没有在定义的数据包的末端有 CRC 校验和。

校验和字段是可选的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:21:47.533

发现这个[AoE pdf](http://www.nas.uk.com/coraid-whitepapers/doc_download/269-aoe-overview)带有显示 crc 的框架图。
它看起来像起源于 Coraid。

# java - 当 JDialog 处于未装饰状态时如何调整其大小？

> ID：12208958
> 
> 赞同：1
> 
> 时间：2012-08-31T04:33:22.377
> 
> 标签：java, swing, jdialog

我想知道如何在设置 JDialog 时使其可调整大小`setUndecorated(true);`。调整大小可以通过外框来完成。当它不装饰时，没有框架，然后JDialog无法调整大小。当 JDialog 的外框不可用时，如何调整其大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:43:09.747

尚未对此进行测试，但据我所知，您似乎只需要以下方法：

```
// window reszie event
private void _setUpWindowResizeEvent() {
this.addMouseMotionListener(
new MouseMotionListener() {

public void mouseDragged(MouseEvent mouseEvent) {
if( mHozResizeEnabled || mVerResizeEnabled ) {
int x = mouseEvent.getX();
int y = mouseEvent.getY();
_resizeWindow(
MouseInfo.getPointerInfo().getLocation() );
sticky.setSize( getSize() );
_fireStickyUpdated();
}
} 
```

参考： [http ://tech.groups.yahoo.com/group/JPGroup/message/1877](http://tech.groups.yahoo.com/group/JPGroup/message/1877)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T04:38:47.740

我假设您的意思是用户如何调整未装饰对话框的大小（作为开发人员，您可以随时调用`setSize`）

可以做到这一点的唯一方法是自己实现逻辑。

这将需要实现`MouseListener`和监控`mousePressed`,`mouseReleased`和`mouseDragged`事件

您需要考虑到您可能只希望对话框周围的排水沟会触发调整大小（例如 5 像素）。重要的是，此排水沟中没有其他组件，因为它们会覆盖您的鼠标侦听器。

# html - 嵌入的 youtube 视频无法在 IE 上播放

> ID：12208964
> 
> 赞同：0
> 
> 时间：2012-08-31T04:34:38.567
> 
> 标签：html, internet-explorer, youtube, embed

我有一个嵌入的 youtube 视频，它不会在 Windows 8 的 IE 上播放。它可以在我能想到的 Windows 8 中的所有其他浏览器中播放，而不是 IE。它也适用于 ipad 上的 safari，以及 android 手机和平板电脑中包含的浏览器。在这个 html 中是否有任何不兼容 IE 的内容？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<style type="text/css"> 
*{margin:0;padding:0} html,
 body {height:100%;width:100%;overflow:hidden} 
table {height:100%;width:100%;table-layout:static;border-collapse:collapse} iframe {height:112%;width:100%} 
.header {border-bottom:0px solid #000000} 
.content {height:100%} 
</style> 
</head> 
<body> 
<table> 
<tr><td class="header"><div><h1></h1></div></td></tr> <tr>
<td class="content"> <iframe src="https://www.youtube.com/embed/VideoAddress?modestbranding=1&autoplay=1&controls=0&iv_load_policy=3&rel=0&showinfo=0&theme=light&color=white&autohide=0&disablekb=1&vq=hd1080" frameborder="0">
</td></tr> 
</table> 
</body> 
</html> 
```

（显然VideoAddress替换为视频的地址）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:45:35.903

这可能是 IE8 64 位问题。

[http://kb2.adobe.com/cps/000/6b3af6c9.html](http://kb2.adobe.com/cps/000/6b3af6c9.html)

# ajax - Jquery Ajax 自动完成：控制器的操作不可用

> ID：12208970
> 
> 赞同：0
> 
> 时间：2012-08-31T04:35:26.573
> 
> 标签：ajax, jquery-ui, jquery, grails

我试图使用 jquery 和 ajax 创建一个自动完成字段。我尝试了下面的代码，但它给了我一个错误，即控制器的操作不可用。这是我的外部 .js 文件中的代码：

```
$(function () {
  $("#inputfield").autocomplete({
    source: '<g:createLink controller="fruit" action="findFruit">'
  });
}); 
```

这是我的 Fruit 控制器的代码：

```
def findFruit = {
  def fruitsearch= Fruit.withCriteria {
    ilike 'fruit', params.term + '%'
  }

  render (fruitsearch?.'fruit' as JSON)
} 
```

我使用 firebug 来查看发生了什么，当我尝试在 texfield 上输入时，它说动作 findFruit 不可用。

我错过了什么吗？还是他们的代码有问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:56:36.550

由于您的`js`代码是从外部`js`文件评估的，因此您应该尝试使用纯`js`代码而不是 grails 标签（因为它们不起作用）

尝试使用相对路径，例如：

```
$( "#inputfield" ).autocomplete({
    source: '/app-name/controller/action'
}); 
```

看看这是否有效。

# c++ - cpp 图形菜单

> ID：12208971
> 
> 赞同：0
> 
> 时间：2012-08-31T04:35:54.633
> 
> 标签：c++, class, object

我正在为我正在制作的项目制作一个新的图形菜单界面。我不想使用 Windows API 提供的菜单系统，想从头开始制作。

我的问题是，建立结构的最佳方法是什么？

我想我需要一个菜单​​项对象，每个对象都必须有自己的项目数组列表，等等......

有这样的递归编码是否被认为是草率的？（即包含自身对象的对象，包含自身对象的对象，等等...）

我在想我可以给项目对象一个绘图接口，它检查自己是否有一个不为空的项目数组。如果是这样，它会一直执行绘图命令，从而给我一个菜单（出于我的目的）无限的子菜单级别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:56:37.497

在我看来，你的方法很好。毕竟在几乎所有的 UI 框架中，视图都包含视图作为子视图。

但问题是，我认为对于小型项目来说，编写绘图代码的工作量太大了。我会考虑使用 QT 之类的 UI 框架，并使用它的视图机制作为起点。您可以编写自己的 Menu 类，该类将是框架中通用 View 类的子类。

# javascript - 使用 Javascript 向 SQLite 数据库插入多条记录时出错

> ID：12208972
> 
> 赞同：1
> 
> 时间：2012-08-31T04:35:58.177
> 
> 标签：javascript, android, cordova

我正在使用 PhoneGap 为 Android 开发一个应用程序。我正在尝试使用 Javascript 在单个查询中向表中插入多条记录。我 *在 "," 附近收到类似语法错误*的错误。

我的代码：

```
tx.executeSql('CREATE TABLE IF NOT EXISTS MAX_POINTS (Days INTEGER UNIQUE, Max_Point FLOAT)');      
sqlQuery = 'INSERT INTO MAX_POINTS(Days,Max_Point) VALUES(1,32),(2,35)';
tx.executeSql(sqlQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:44:06.633

是不是你缺少分号？或者插入到浮点字段中的值是整数？

```
sqlQuery = 'INSERT INTO MAX_POINTS(Days,Max_Point) VALUES(1,32),(2,35)'; 
```

应该：

```
sqlQuery = 'INSERT INTO MAX_POINTS(Days,Max_Point) VALUES(1,32.0),(2,35.0);'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:42:27.080

我相信用户**无畏**_傻瓜已经在这里回复了：[是否可以在 SQLite 数据库中一次插入多行？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)

# python - 编写面向对象的莫尔斯电码翻译器

> ID：12208973
> 
> 赞同：2
> 
> 时间：2012-08-31T04:36:10.813
> 
> 标签：python, class, reddit

以下是我对 reddit.com/r/dailyprogrammer #93 的解决方案（简单）。这是一个在英语和摩尔斯电码之间转换的python脚本。

是`String_To_Translate`一个类的好例子吗？我违反约定了吗？如何改进此代码并使其更具可读性和 Python 风格？

非常感谢任何建议！

```
import re

morse_code_dict = { 'a':'.-',
                    'b':'-...',
                    'c':'-.-.',
                    'd':'-...',
                    'e':'..-.',
                    'f':'..-.',
                    'g':'--.',
                    'h':'....',
                    'i':'..',
                    'j':'.---',
                    'k':'-.-',
                    'l':'.-..',
                    'm':'--',
                    'n':'-.',
                    'o':'---',
                    'p':'.--.',
                    'q':'--.-',
                    'r':'.-.',
                    's':'...',
                    't':'-',
                    'u':'..-',
                    'v':'...-',
                    'w':'.--',
                    'x':'-..-',
                    'y':'-.--',
                    'z':'--..',
                    '1':'.----',
                    '2':'..---',
                    '3':'...--',
                    '4':'....-',
                    '5':'.....',
                    '6':'-....',
                    '7':'--...',
                    '8':'---..',
                    '9':'----.',
                    '0':'-----',
                    ',':'--..--',
                    '.':'.-.-.-',
                    '?':'..--..',
                    '/':'-..-.',
                    '-':'-....-',
                    '(':'-.--.',
                    ')':'-.--.-',
                    ' ':' ',
                    }

class String_To_Translate:
    def __init__(self, string):
        self.string = string
        self.Translated = ''
        self.lang = ''

    def determine_lang(self):
        exp = r'[a-zA-Z\,\?\/\(\)]'#regexp for non morse code char
        if re.search(exp, self.string) == None:
            self.lang = 'm'
        else:
            self.lang = 'eng'

    def prep(self):
        if self.lang == 'eng':
            #get rid of whitespace & warn user
            (self.string, numWhitespaceReplacements) = re.subn(r'\s', ' ', self.string)
            if numWhitespaceReplacements > 0:
                print 'Some whitespace characters have been replaced with spaces.'
            #get rid of characters not in dict & warn user
            (self.string, numReplacements) = re.subn(r'[^a-zA-Z\,\?\/\(\)\.\-\s]', ' ', self.string)
            if numReplacements > 0:
                print 'Some ({0}) characters were unrecognized and could not be translated, they have been replaced by spaces.'.format(numReplacements)
            #convert to lowercase
            self.string = self.string.lower()

    def translate_from_morse(self):
        eng_dict = dict([(v, k) for (k, v) in morse_code_dict.iteritems()])

        def split_morse(string):
            d = '  '
            charList = [[char for char in word.split() + [' ']] for word in string.split(d) if word != '']
            charList = [item for sublist in charList for item in sublist]
            print charList
            return charList

        charList = split_morse(self.string)
        for char in charList:
            self.Translated += eng_dict[char]

    def translate_from_eng(self):
        charList=list(self.string)
        for char in charList:
            self.Translated += morse_code_dict[char] + ' '

    def translate(self):
        self.determine_lang()
        if self.lang == 'm':
            self.translate_from_morse()
        elif self.lang == 'eng':
            self.prep()
            self.translate_from_eng()
        else:
            print 'shit'

if __name__=="__main__":
    translateme = String_To_Translate(raw_input('enter a string: '))
    translateme.translate()
    print translateme.Translated
    print 'translating back'
    test = String_To_Translate(translateme.Translated)
    test.translate()
    print test.Translated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:34:39.377

这很好地表示为[二叉树](http://en.wikipedia.org/wiki/Binary_tree)：

![在此处输入图像描述](../Images/37792dc9c9e7b588795ce190719e0377.png)

# shopify - 让客户在 Shopify 中添加额外个人信息（例如：默认尺寸）的方法？

> ID：12208975
> 
> 赞同：0
> 
> 时间：2012-08-31T04:36:27.857
> 
> 标签：shopify

我是初次使用 Shopify 的开发人员，正在寻找一种方法让客户在 Shopify 中输入有关他们自己的其他数据。具体来说，我想添加一个页面或修改帐户信息页面，以便客户可以输入测量值。然后，我想获取该测量信息，对其进行处理，并返回商店中产品的推荐尺寸。

这在 Shopify 中可行吗？我试图弄清楚如何为客户添加元字段来记录他们的测量结果，但我有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:47:24.493

这应该可行，但需要商家进行一些定制，并且有点小技巧：

当客户登录时，[他们的信息可通过 Liquid 获得](http://wiki.shopify.com/Customer_variable)。

这允许您在呈现商店页面（例如产品页面）时引用该客户的数据。

您可以使用 API 将元字段分配给客户[。](http://api.shopify.com/metafield.html)这些也可以通过 Liquid 获得。

将所有这些放在一起，您可以在店面有一个表单，在客户登录后询问他们的信息。表单提交到您的服务器，您可以使用 API 将信息作为元字段添加到 Customer 对象。然后你在产品页面上有一些聪明的 Liquid，它要么自己进行必要的计算，要么将相关信息嵌入到 javascript 中以在客户端进行处理。

# html - 如何使页脚与最底部对齐？

> ID：12208977
> 
> 赞同：6
> 
> 时间：2012-08-31T04:36:39.007
> 
> 标签：html, css, alignment, footer

我是 CSS 新手，已经查找了很多方法，但无法让页脚与底部对齐。有什么帮助吗？谢谢你。

```
.footer {
    position: bottom;
    bottom: -10px;
    height: 30px;
    width: 100%;
    background-color: #171717;
    color: white;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T04:38:57.370

将位置更改为固定。

```
.footer {
    position:fixed;
    bottom:0px;
    height:30px;
    width:100%;
    background-color:#171717;
    color:white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:41:01.863

如果有其他 div 并且可以推动页脚，我还会添加 left 属性

```
.footer {
    position:absolute;
    bottom:0px;
    left: 0px;
    height:30px;
    width:100%;
    background-color:#171717;
    color:white;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T05:39:21.627

尝试类似的东西；

```
#footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 30px;
    background-color: #171717;
    color: white;
} 
```

***[这](http://jsfiddle.net/blasteralfred/jghUs/)***是一个有效的现场演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T11:39:58.183

## [Codepen](http://codepen.io/shahjehan/pen/pbEuB)上的演示

### HTML：

```
<div class="header">
  <h2>header</h2>
</div>
<div class="container">
  <h2>container</h2>
</div>
<div class="footer">
  <h2>footer</h2>
</div> 
```

### CSS：

```
body {
  height: 100%;
  width: 100%;
  display: table;
}
html {
  height: 100%;
}
.header {
  background: #f00;
  color:#fff;
  text-align: center;
}
.container {
  text-align: center;
}
.footer {
  background: #ff0;
  text-align: center;
  width: 100%;
  display: table-footer-group;
} 
```

# android-layout - 显示两个布局

> ID：12208984
> 
> 赞同：0
> 
> 时间：2012-08-31T04:37:15.657
> 
> 标签：android-layout, android-activity

我正在尝试构建一个程序，其中用户数据显示在表格视图中，而主页、关于和设置将显示在表格布局下方的 TabLayout 中，但在程序运行时，TabLayout 未显示在屏幕上。这里我有两个类文件，一个用于显示表格布局，另一个用于显示 TabLayout。下面是我的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<TableLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="7dp">
<TextView  
android:id="@+id/item_title"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:textAppearance="?android:attr/textAppearanceMedium"
android:padding="2dp"
android:textSize="10dp" />
<TableRow 
    android:id="@+id/tableRow1"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" >
            <TextView android:text="" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:minWidth="40dp" android:background="@drawable/top_left" android:textColor="#ffffffff"/>
           <TextView android:text="Civil Bank " android:paddingLeft="5dp" android:textStyle="bold" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1"   android:minWidth="40dp" android:background="@drawable/top_middle" android:textColor="#ffffffff"/>
           <TextView android:text="Sunrise Bank" android:paddingLeft="5dp" android:textStyle="bold" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1" android:minWidth="40dp" android:background="@drawable/top_right"  android:textColor="#ffffffff"/>
</TableRow>
<TableRow
           android:id="@+id/tableRow2"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" >
           <TextView android:text="Web user" android:paddingLeft="5dp" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle"  android:textColor="#ffffffff"/>
           <TextView android:text="0.00" android:paddingLeft="5dp" android:id="@+id/webuserTxtView" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff"/> 
           <TextView  android:text="0.00" android:paddingLeft="5dp" android:id="@+id/S_webuserTxtView" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff" />
       </TableRow>

       <TableRow
           android:id="@+id/tableRow3"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" >
           <TextView android:text="Transfer" android:paddingLeft="5dp" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff"/>
           <TextView android:text="0.00" android:paddingLeft="5dp" android:id="@+id/transferTxtView" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff"/>
           <TextView android:text="0.00" android:paddingLeft="5dp" android:id="@+id/S_transferTxtView"  android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff"/>
       </TableRow>

       <TableRow
           android:id="@+id/tableRow4"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" >
           <TextView android:text="Cash" android:paddingLeft="5dp" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_right" android:textColor="#ffffffff"/>
           <TextView android:text="0.00" android:paddingLeft="5dp" android:id="@+id/cashTxtView" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_middle" android:textColor="#ffffffff"/>
           <TextView android:text="0.00" android:paddingLeft="5dp" android:id="@+id/S_cashTxtView" android:layout_width="fill_parent" android:layout_weight="1"  android:layout_height="wrap_content" android:background="@drawable/bottom_left" android:textColor="#ffffffff"/>
       </TableRow>

<TabHost
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout>
</TabHost>
</TableLayout>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:00:32.703

你已经给出了`tablelayout`as的宽度和高度`fill-parent`。所以它可能会占据你的整个空间`linearlayout`。而不是`fill-parent`你必须使用`wrap-content`. 在 tabhost 中，您使用该属性`android:layout_below="@+id/yourTableLayout"`。

# c# - ANTLR 可用于 C#

> ID：12208987
> 
> 赞同：2
> 
> 时间：2012-08-31T04:37:42.190
> 
> 标签：c#, antlr, grammar, yacc, lex

20 多年前，我使用 yacc/lex 和 C/C++ 为 MS-DOS 平台创建了一个用于 PLC 的自定义编译器。现在同一家公司想要一个新版本。目标平台是 Windows，所以我更喜欢使用 C#。我刚刚花了一天时间用 C# 研究 ANTLR，但到目前为止还不能创建一个简单的解析器。我正在使用 VS2012，但我没有从最新的 ANTLR 下载中找到 .Net 4.0 兼容库。我正在使用 Language=CSharp3 并且没有找到预构建的 .NET 库。尝试使用 VS2012 构建时，尝试从源代码重建库会出错。我需要在第二天左右决定 ANTLR 和 C# 是否是一个可行的选择。有没有人使用 ANTLR 和 C# 来生成大型编译器项目？

尝试构建 antlr3.Runtime 的 CSharp 版本的错误之一：

错误 1 ​​签署程序集 'c:\ANTLR\runtime\CSharp3\Sources\Antlr3.Runtime\obj\Debug\Antlr3.Runtime.dll' 时加密失败 - '读取密钥文件时出错'c:\ANTLR\runtime\CSharp3\ Sources\Antlr3.Runtime\Key.snk' -- 系统找不到指定的文件。' C:\ANTLR\runtime\CSharp3\Sources\Antlr3.Runtime\CSC Antlr3.Runtime

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:20:57.640

我相信您必须创建自己的密钥文件。

请参阅[如何：创建公钥/私钥对](http://msdn.microsoft.com/en-us/library/6f05ezxy%28v=vs.80%29.aspx)

从 Visual Studio 命令提示符使用 SN 应用

```
sn –k c:\ANTLR\runtime\CSharp3\Sources\Antlr3.Runtime\Key.snk 
```

# python - 如何在tornado中实现协程锁

> ID：12208989
> 
> 赞同：0
> 
> 时间：2012-08-31T04:38:01.317
> 
> 标签：python, asynchronous, synchronization, coroutine

我了解 Tornado 中 corountine 的机制，但这是我无法弄清楚的问题，请帮帮我

考虑这个业务例程：这里有 5 个数据库操作

```
#operation 1
#use asynchronous method ,doesn't matter
#switch to other coroutine

#operation 2
#use asynchronous method ,doesn't matter
#switch to other coroutine

#operation 3
#use asynchronous method , but i'll use the result do 
#some process then update in operation 4
#switch to other coroutine

#operation 4
#use asynchronous method ,doesn't matter
#switch to other coroutine

#operation 5
#use asynchronous method ,doesn't matter
#switch to other coroutine 
```

如您所见，我不希望任何其他相关的协程在每个操作 3 和操作 4 之间更新到同一张表或同一条记录，这会造成脏读和写。换句话说

```
#coroutine 1 operation 3
#coroutine 2 operation 3
#coroutine 1 operation 4
#coroutine 2 operation 4 
```

不会被接受，正确的顺序应该是

```
#coroutine 1 operation 3
#coroutine 1 operation 4
#coroutine 2 operation 3
#coroutine 2 operation 4 
```

我可以在操作 3 中使用阻塞方法，但这会阻塞整个服务器，我希望主循环不会执行某些协程，直到我告诉它们释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:48:01.713

在我仔细考虑之后，这很愚蠢。

这在单线程程序实践中真的非常简单和基本

```
global flag
while flag:
    do some asynchronous empty callback
flag = True

#operation 3
#use asynchronous method , but i'll use the result do 
#some process then update in operation 4
#switch to other coroutine

#operation 4
#use asynchronous method ,doesn't matter
#switch to other coroutine

flag = False 
```

完毕。

# jquery - jQuery Mobile 中的多个堆叠页脚（将 div 放在导航栏上方的底部）

> ID：12208990
> 
> 赞同：0
> 
> 时间：2012-08-31T04:38:12.183
> 
> 标签：jquery, css, mobile

我目前在我的页面底部有一个静态导航栏，我想在该导航栏的正上方放置另一个内容 div。问题是，如果我将其设置为页脚，它与导航栏位于同一位置。我考虑将其绝对定位在导航栏上方，问题是考虑到我的应用程序更改语言时，这似乎不是正确的答案，字体大小变得古怪（汉字）并稍微改变导航栏的大小，它看起来像废话。更不用说并非所有设备分辨率都相同，等等。

基本上，我一直在尝试找到一种“堆叠”页脚 div 的方法。我想让这个 div “堆叠”在导航栏的顶部。有没有办法做到这一点而不会撕裂jqm？

似乎应该有一种方法来设置类似“footer y-index 1”或类似的东西来以计算布局的方式设置优先级列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:39:53.197

这是一个建议：

在页面外创建所有页脚变体，并在每个页面中有一个空的页脚标记。

在页面初始化中：

*   选择要插入的正确版本的页脚 div
*   通过获取它的 html 来复制该 div。
*   在页面的空页脚 div 中插入 html。

# eclipse - 在“初始化 Java 工具”期间发生内部错误

> ID：12208991
> 
> 赞同：5
> 
> 时间：2012-08-31T04:38:14.237
> 
> 标签：eclipse

如何解决上面报告的 Eclipse 错误消息？下面给出了其他详细信息。

**异常堆栈跟踪**

```
java.lang.NullPointerException
    at org.eclipse.m2e.jdt.internal.MavenClasspathContainerInitializer.initialize(MavenClasspathContainerInitializer.java:48)
    at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2843)
    at org.eclipse.jdt.internal.core.JavaModelManager$11.run(JavaModelManager.java:2749)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2789)
    at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1873)
    at org.eclipse.jdt.core.JavaCore.initializeAfterLoad(JavaCore.java:3886)
    at org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run(InitializeAfterLoadJob.java:36)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

**会话数据**

```
eclipse.buildId=I20120608-1400
java.version=1.7.0_08-ea
java.vendor=Oracle Corporation
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -keyring /Users/ravisankars/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.jee.product -keyring /Users/ravisankars/.eclipse_keyring -showlocation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-27T15:51:30.000

**我做了以下事情：**

1）关闭日食

*2）从我的工作区中的子文件夹\.metadata\.plugins\org.eclipse.core.resources\.projects*中删除所有内容 。在我的情况下，这是文件夹*C:\workspace\.metadata\.plugins\org.eclipse.core.resources\.projects*。

3）重启日食

**我还在 eclipse 中设置了我的 M2_REPO 类路径变量（这是一个基于 maven 的项目）：**

4）在eclipse中，选择Window-preferences-java-build path-classpath variable-new

5) 设置名称=M2_REPO

6）设置 path= *.m2 文件夹的路径*（您需要找到 .m2 文件夹并为您的环境使用正确的路径，在我的情况下是*C:\Users\pondolal\.m2\repository*）。

7) 重启日食

8) 清理和构建项目

# ios - 权利是无效的 sencha touch 2 原生包装

> ID：12208993
> 
> 赞同：0
> 
> 时间：2012-08-31T04:38:20.653
> 
> 标签：ios, ios4, sencha-touch, sencha-touch-2

我是 sencha touch 的新手，使用 sencha touch 2 开发了一个小型测试应用程序并生成了一个

i-os 的本机软件包，它在模拟器上运行良好，但是当我尝试安装它时

在它正在安装的设备上，消息权利无效。我有

从苹果官方网站生成证书，并具有配置文件

同样，为什么安装失败？

有没有办法在我必须开发应用程序的包装中指定 i-os 版本

我为 android 设备提供了相同的测试应用程序包，它工作正常。

请帮助我任何一个。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:26:57.627

尝试这个：

```
 codesign -f -dvvv -s "iPhone Developer" /path/to/YourApp.app 
```

其中“iPhone Developer”是要使用的钥匙串中证书的子字符串。然后尝试将 .app 文件加载到您的 iPhone。

此外，请确保您的钥匙串的“我的证书”部分中没有过期的证书。我有一个，它导致我的构建失败。

让我知道这是否有帮助。

# c# - 确定时间范围之间的时间戳

> ID：12208996
> 
> 赞同：3
> 
> 时间：2012-08-31T04:38:48.760
> 
> 标签：c#, datetime

我需要运行一个作业/调度程序，它应该只更新它在指定时间范围内的数据库中的记录。就我而言，时间范围是从凌晨 3.30 到第二天凌晨 1.30。因此，在这个时间范围内，作业需要更新记录。为了获得这个时间间隔，我使用了 TimeOfDay() 函数，但是我的逻辑失败了，如果当前时间是早上 6 点，那么“currentTime <= todaysJob.ENDTIME.Value.TimeOfDay”将返回 false。我正在使用下面的代码来检查

```
 var currentTime = DateTime.Now.TimeOfDay;
     if (currentTime > todaysJob.STARTTIME.Value.TimeOfDay && 
          currentTime <= todaysJob.ENDTIME.Value.TimeOfDay)
            {
                // Do logic
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:56:59.973

```
 bool endTomorrow = true;

        DateTime taskDate = new DateTime(2012, 08, 31);

        TimeSpan Start = new TimeSpan(03, 30, 00);
        TimeSpan End = new TimeSpan(01, 30, 00);

        DateTime currentTime = DateTime.Now;

        bool flag = false;

        if (currentTime.TimeOfDay >= Start)
        {
            if (endTomorrow)
            {
                flag = currentTime.Date <= taskDate || (currentTime.Date == taskDate.AddDays(1) && currentTime.TimeOfDay < End);
            }
            else
            {
                flag = currentTime.TimeOfDay < End;
            }
        }

        if (flag)
        {
            //do the task
        } 
```

**编辑**

所以我补充说：

1.  一个布尔标志，确定任务是否应该在第二天结束
2.  表示任务日期的日期时间变量 (taskDate)

Start 和 End 等于 todaysJob.STARTTIME 和 todaysJob.ENDTIME，因此您可以照原样从 DB 中获取它们。

**编辑**

如果你能有这样的工作：

```
public class Job
{
    public TimeSpan STARTTIME;
    public TimeSpan ENDTIME;
    public DayOfWeek taskDayOfWeek;
    public bool IsEndingTommorow;

    public bool IsTomorrow(DayOfWeek d)
    {
        if (d == DayOfWeek.Sunday)
            return taskDayOfWeek == DayOfWeek.Saturday;
        else
            return d <= taskDayOfWeek;
    }
} 
```

那么你可以

```
 DateTime currentTime = DateTime.Now;

        bool flag = false;

        if (currentTime.TimeOfDay >= todaysJob.STARTTIME)
        {
            if (todaysJob.IsEndingTommorow)
            {
                flag = currentTime.DayOfWeek == todaysJob.taskDayOfWeek || (todaysJob.IsTomorrow(currentTime.DayOfWeek) && currentTime.TimeOfDay < todaysJob.ENDTIME);
            }
            else
            {
                flag = currentTime.TimeOfDay < todaysJob.ENDTIME;
            }
        }

        if (flag)
        {
            //do the task
        } 
```

**编辑**

我再次编辑了我的代码：添加了一种方法来避免 DayOfWeek 枚举出现问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:31:10.447

您可以使用[.NET 的时间段库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)来确定某个时刻是否属于多个时间段：

```
// ----------------------------------------------------------------------
public bool CheckDateBetweenDatesSample()
{
  DateTime now = DateTime.Now;
  TimePeriodCollection periods = new TimePeriodCollection();
  // read periods (Start/end) from database
  // ...
  periods.Add( new TimeRange( start, end ) );
  return periods.HasIntersectionPeriods( now );
} // CheckDateBetweenDatesSample 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:50:19.303

试试这个，它对我有用。如我错了请纠正我。

```
TimeSpan timeOfDay = DateTime.Now.TimeOfDay;
TimeSpan startTimeToD = startTime.TimeOfDay;
TimeSpan endTimeToD = endTime.TimeOfDay;

if (timeOfDay > startTimeToD || timeOfDay < endTimeToD )
{
      Console.WriteLine("Hello World");
}

timeOfDay = new TimeSpan(2, 30, 00); //testcase
if (timeOfDay > startTimeToD || timeOfDay < endTimeToD )
{
     //will never execute.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T05:28:23.650

您不能使用 TimeOfDay 属性，因为它是距中点（午夜）的绝对距离（经过的时间）。仅使用 DateTime 进行比较有什么问题？比较运算符（< > <= >=）与 DateTime 数据类型完美配合。

例如：

```
DateTime currentTime = DateTime.Now;
DateTime startTime = DateTime.AddMinutes(-50D); //in your case this would be a DT todaysJob.STARTTIME.Value
DateTime endTime = DateTime.AddMinutes(50);// in your case this would be a DT todaysJob.ENDTIME.Value

if(currentTime > startTime && currentTime <= endTime)
{
  Console.Write("Works Fine"); //your logic
} 
```