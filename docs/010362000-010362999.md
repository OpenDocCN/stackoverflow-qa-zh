# StackOverflow 问答 10362000-10362999

# android - 将基于标签活动的应用程序发布到 Android 4.0+ 设备是否明智？

> ID：10362000
> 
> 赞同：0
> 
> 时间：2012-04-28T08:46:43.763
> 
> 标签：android, android-fragments, tabactivity, android-4.0-ice-cream-sandwich, android-tabactivity

我有一个`TabActivity-based`项目，我也想发布到 Android 4.0+ 设备。当我使用 SDK 4.0+ 库加载它时，我收到一个警告`"android.app.TabActivity" is deprecated`。

我们都知道这是因为任何 3.0+ 应用程序都建议使用 Fragment，因此`TabActivity`不推荐使用。

现在，简单地包含 Android 4.0+ 设备来使用这个应用程序是否明智？隐藏的炸弹/错误是什么？

我问这个是因为迁移到碎片需要一个完整的应用程序重新设计和 2 个月的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:35:32.150

是的，我个人也使用过 TabActivity，它非常适合其中一种情况的要求…… Fragments 增加了这个概念并提供了更高级和不同的功能，但是它的工作方式与 TabActivity 非常不同。

Android 建议 Fragments 更多地支持屏幕尺寸的高度变化，但从 TabActivity 切换到 Fragments 只是为了复制相同的功能并不是一个好主意......

# android - 如何绘制从我的位置到目的地位置的路线？

> ID：10362002
> 
> 赞同：1
> 
> 时间：2012-04-28T08:47:29.893
> 
> 标签：android, google-maps, routes

最近我必须完成一个包含一小部分谷歌地图的项目。我在两个地理点之间绘制了路线。但我必须绘制从我的地理点到目标地理点的路线。这里有一个重要的注意事项是我的位置不是静态的。它会随着我的位置而改变。我必须绘制从当前位置到目的地的路线。能不能画出这样的动态路线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:31:30.200

用这个

```
Intent i = new Intent(android.content.Intent.ACTION_VIEW,
           Uri.parse("google.navigation:q=" +destLat+ ","+destLon+""));
 this.startActivity(i); 
```

我想它会工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:50:11.327

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)以在您的应用程序中绘制行驶路径。您只需在项目中添加链接中存在的四个类，并在需要显示路线时调用以下行。

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");//set your map key here
data.setSrc_lat(17);//set your src lat
data.setSrc_lng(78);//set your src lng
data.setDest_lat(18);//set your dest lat
data.setDest_lng(77);//set your dest lng
startActivity(new Intent(YourActivity.this,RoutePath.class));//add RoutePath in your manifeast file 
```

//同时将权限添加到您的清单文件

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# objective-c - iOS 代码中的多 URL 检索缓慢

> ID：10362004
> 
> 赞同：0
> 
> 时间：2012-04-28T08:47:44.413
> 
> 标签：objective-c, ios, augmented-reality, nsurl

我想访问一个 URL 并从这个 URL 检索数据，基于检索到的数据我想从另一个 URL 检索数据

我尝试通过以下方式访问多个 URL：

```
- (void) showClassRoom:(NSString *)theMessage{

   NSString *queryURL =[NSString stringWithFormat:@"http://nobert.cloudfoundry.com/CalOfEvents/tos"];
    NSURL *url = [NSURL URLWithString: queryURL];
    NSURLRequest *req = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];    

    NSError *error;
   NSURLResponse *response;

    NSData *returnData = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error];
    if(returnData){
        NSString *strResult = [[NSString alloc] initWithBytes:[returnData bytes] length:[returnData length] encoding:NSUTF8StringEncoding];
        NSDictionary *result = [strResult JSONValue]; 
           for(id theKey in result){
                    for(id hello in theKey){
                        NSLog(@"The key:%@, The value:%@",hello,[theKey objectForKey:hello]);

            }
        } 
        if(TRUE){//based on some condition secondShowClassRoom is called
           [self secondShowClassRoom];
        }     
    }
} 

- (void) secondShowClassRoom{

NSString *queryURL =[NSString stringWithFormat:@"http://nobert.cloudfoundry.com/CalOfEvents/to"];
    NSURL *url = [NSURL URLWithString: queryURL];
    NSURLRequest *req = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0]; 
    NSError *error;
    NSURLResponse *response;
    NSData *returnData = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error];

    if(returnData){ 
        NSString *strResult = [[NSString alloc] initWithBytes:[returnData bytes] length:[returnData length] encoding:NSUTF8StringEncoding];
        NSDictionary *result = [strResult JSONValue]; 
            for(id theKey in result){  
            for(id hello in theKey){
                 NSLog(@"The key:%@, The value:%@",hello,[theKey objectForKey:hello]);
            }  
        }  
    }
} 
```

这会非常缓慢地检索数据，并且当我在增强现实上开发应用程序时，我的应用程序需要非常快速的访问

还有另一种更快的方法，但是我无法访问多个 URL：

```
- (void) showClassRoom:(NSString *)theMessage{
    NSString *queryURL =[NSString stringWithFormat:@"http://nobert.cloudfoundry.com/CalOfEvents/to"];
    NSURL *url = [NSURL URLWithString: queryURL];
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url]; 
    conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];

    if (conn) { 
        webData = [[NSMutableData data] retain];
    }
    classRoomControl.hidden = NO;
    labControl.hidden = YES;
    placementControl.hidden = YES;

}

-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *) response{

    [webData setLength: 0]; }

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *) data {

    [webData appendData:data];

}
-(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *) error {

    [conn release];
    [webData release]; 
}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection {
    [conn release];
    NSLog(@"DONE. Received Bytes: %d", [webData length]);

    NSString *strResult = [[NSString alloc] initWithBytes:[webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSDictionary *result = [strResult JSONValue]; 

for(id theKey in result){       
        for(id hello in theKey){
            NSLog(@"The key:%@, The value:%@",h,hello);
        }
    }
    [strResult release];
    [webData release]; 
} 
```

请帮助我。任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:30:04.353

您更喜欢网络通信的异步模型是正确的（因为同步通信会阻塞您的 UI，除非您在单独的线程中处理它）。

链接多个异步网络请求的正确方法是在回调中一个接一个地执行请求（即，在`connectionDidFinishLoading`; 当一个请求完成时，您发送下一个请求）。

还有一个建议是不要为此使用 NSURlRequest/NSURLConnection，因为它们会使思考变得不必要地复杂，并尝试使用像[AFNetworking](http://github.com/AFNetworking/AFNetworking)这样的框架。

# iphone - 在 iPhone 的 Google Auth 2.0 中成功认证后如何继续下一个 API 请求？

> ID：10362006
> 
> 赞同：2
> 
> 时间：2012-04-28T08:48:04.837
> 
> 标签：iphone, objective-c, ios, ipad, google-authentication

在 iPhone 的 google auth2.0 中成功认证后如何进行下一个 api 请求？我得到了带键的返回数据。我需要使用日历 api 和任务 api。

```
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)auth
             error:(NSError *)error {

NSString *nextURLString = [NSString stringWithFormat:@"https://www.google.com/calendar/feeds/default/allcalendars/mymail@gmail.com"];
 //i just gave this url for testing. dont know which url is required here.
NSURL *nextURL = [NSURL URLWithString:nextURLString];
NSURLRequest *request = [NSURLRequest requestWithURL:nextURL];
GTMHTTPFetcher *fetcher = [GTMHTTPFetcher fetcherWithRequest:request];
if (error != nil) {
    // Authentication failed
} else {
    // Authentication succeeded

    [fetcher setAuthorizer:auth];
} 
```

}

# session - 为什么要使用内存中的会话存储而不是加密的 cookie 会话存储

> ID：10362007
> 
> 赞同：2
> 
> 时间：2012-04-28T08:48:09.097
> 
> 标签：session, cookies, clojure, ring

我正在阅读：

[https://github.com/mmcgrana/ring/wiki/Sessions](https://github.com/mmcgrana/ring/wiki/Sessions)

所以现在我想知道：为什么我要使用内存中的会话存储而不是加密的 cookie 会话存储？

似乎后者（1）不会浪费服务器内存，并且（2）可以比内存存储更长时间。

因此，我的问题是：为什么/何时我想使用内存存储？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:52:07.943

*   Cookie 不能存储太多数据。

*   即使他们可以（本地存储可以），服务器也无法获得数据（除非您在每个请求中都发送它，如果数据很大，这可能会很昂贵）。

# haskell - 按需调用：什么时候在 Haskell 中使用它？

> ID：10362008
> 
> 赞同：4
> 
> 时间：2012-04-28T08:48:20.853
> 
> 标签：haskell, lazy-evaluation

[http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_need](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_need)说：
“Call-by-need 是 call-by-name 的记忆版本，如果函数参数被评估，该值将被存储以供后续使用。 [...] Haskell 是最知名的使用按需调用评估的语言。”

然而，计算的值并不总是为了更快的访问而存储（例如考虑斐波那契数的递归定义）。我在#haskell 上问过某人，答案是“仅在一种情况下，例如，如果你有 `let foo = bar baz'，foo 将被评估一次”，这种记忆是自动完成的。

我的问题是： instance 到底是什么意思，除了 let 之外还有其他情况可以自动完成记忆吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T11:45:26.303

将这种行为描述为“记忆”是一种误导。“按需调用**”**仅意味着函数的给定输入将被评估 0 到 1 次，不会超过一次。（它也可以被*部分*计算，这意味着该函数只*需要*该输入的一部分。）相反，“按**名称**调用”只是表达式替换，这意味着如果您将表达式`2 + 3`作为函数的输入，它可能如果输入被多次使用，则被多次评估。按需调用和按名称调用都是*非严格*的：如果不使用输入，则永远不会对其进行评估。大多数编程语言都很*严格*，并且使用“**" 方法，这意味着在开始评估函数*之前*评估所有输入，无论是否使用输入。这一切都与 let 表达式无关。**

 ****Haskell 不执行任何自动记忆**。Let 表达式不是记忆的例子。但是，大多数编译器将以按需调用的方式评估 let 绑定。如果将 let 表达式建模为函数，则“按需调用”的心态*确实*适用：

```
let foo = expression one in expression two that uses foo
==>
(\foo -> expression two that uses foo) (expression one) 
```

这不能正确地模拟递归绑定，但你明白了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T09:13:53.810

haskell 语言定义没有定义代码被调用的时间或频率。无限循环是根据“底部”（写成⊥）定义的，它是一个代表错误条件的值（存在于所有类型中）。只要程序（以及是否存在/不存在错误条件，包括无限循环！）按照规范运行，编译器就可以自由地决定何时以及多久评估一次。

也就是说，通常的做法是大多数表达式生成“thunk”——基本上是指向一些代码和一些上下文数据的指针。第一次尝试检查表达式的结果（即模式匹配它）时，thunk 是“强制的”；指向的代码被执行，thunk 被真实数据覆盖。这反过来可以递归地评估其他 thunk。

当然，一直这样做很慢，因此编译器通常会尝试分析您何时最终会立即强制执行 thunk（即，当某些值对所讨论的值“严格”时），以及它是否发现这样，它会跳过整个 thunk 的事情并立即调用代码。如果它不能证明这一点，它仍然可以进行这种优化，只要它确保立即执行 thunk 不会崩溃或导致无限循环（或者它以某种方式处理这些情况）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:56:16.850

如果你不想在这方面变得非常技术，关键是当你有一个类似的表达式时`some_expensive_computation of all these arguments`，你可以用它做任何你想做的事情；将其存储在数据结构中，创建一个包含 53 个副本的列表，将其传递给 6 个其他函数等，然后甚至将其返回给调用者，让调用者对其进行任何操作。

Haskell 将（主要）做的是最多评估一次；如果程序需要知道该表达式返回的内容才能做出决定，那么它将被评估（至少足以知道该决定应该走哪条路）。该评估将影响对同一表达式的所有其他引用，即使它们现在分散在整个程序中的数据结构和其他尚未评估的表达式中。**

# hibernate - Hibernate 不会在数据库中保存任何记录

> ID：10362009
> 
> 赞同：1
> 
> 时间：2012-04-28T08:48:36.870
> 
> 标签：hibernate, hsqldb

您好，我已经使用 hibernate 和 hsqldb 创建了一个示例应用程序。

当我运行我的应用程序时，它工作正常并且没有给出任何错误，它为我的表提供了以下确认。

```
Inserting Record
Hibernate: insert into SC_EMPLOYEE.tbl_test (name, id) values (?, ?)
Hibernate: insert into SC_EMPLOYEE.TBL_EMPLOYEE (EMP_NAME, EMP_ADDRESS, EMP_EMAIL,    EMP_PHONE, EMP_SALARY, EMP_ID) values (?, ?, ?, ?, ?, ?)
Record inserted successfully.. 
```

但是当我检查表格时，它没有任何新输入的记录。

以下是我的应用程序的代码。

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

<session-factory>
<!--Database Connection Settings -->
<property name="connection.driver_class">org.hsqldb.jdbcDriver</property>
<property name="connection.url">jdbc:hsqldb:file:i:/DATABASE/Employee/db_emp</property>
<property name="hibernate.default_schema">SC_EMPLOYEE</property>
<property name="connection.username">SA</property>
<property name="connection.password"></property>
<property name = "current_session_context_class">thread</property> 
<!-- JDBC connection pool (use the built-in) -->
<property name="connection.pool_size">1</property>

<!-- SQL dialect -->
<property name="dialect">org.hibernate.dialect.HSQLDialect</property>

<!-- Enable Hibernate's automatic session context management -->
<property name="current_session_context_class">thread</property>

<!-- Disable the second-level cache  -->
<property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

<!-- Echo all executed SQL to stdout -->
<property name="show_sql">true</property>

<mapping resource="cls_employee.hbm.xml"/>   
</session-factory>

</hibernate-configuration> 
```

**cls.employee.hbm.xml 文件**

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
<class name="sample_hibernate.cls_employee" table="TBL_EMPLOYEE">
<id name="emp_id" type="string" column="EMP_ID">
    <generator class="assigned"/>
</id>
<property name="emp_name" type="string" column="EMP_NAME"/>
<property name="emp_address" type="string" column="EMP_ADDRESS"/>
<property name="emp_email" type="string" column="EMP_EMAIL"/>
<property name="emp_phone" type="string" column="EMP_PHONE"/>
<property name="emp_salary" type="string" column="EMP_SALARY"/>

</class>

</hibernate-mapping> 
```

cls_employee.java

```
 public class cls_employee 
 {

private String emp_id;
private String emp_name;
private String emp_address;
private String emp_phone;
private String emp_email;
private String emp_salary;

public String getEmp_id() {
    return emp_id;
}
public void setEmp_id(String emp_id) {
    this.emp_id = emp_id;
}
public String getEmp_name() {
    return emp_name;
}
public void setEmp_name(String emp_name) {
    this.emp_name = emp_name;
}
public String getEmp_address() {
    return emp_address;
}
public void setEmp_address(String emp_address) {
    this.emp_address = emp_address;
}
public String getEmp_phone() {
    return emp_phone;
}
public void setEmp_phone(String emp_phone) {
    this.emp_phone = emp_phone;
}
public String getEmp_email() {
    return emp_email;
}
public void setEmp_email(String emp_email) {
    this.emp_email = emp_email;
}
public String getEmp_salary() {
    return emp_salary;
}
public void setEmp_salary(String emp_salary) {
    this.emp_salary = emp_salary;
} 
```

}

主类 cls_main.java

```
 package sample_hibernate;

import org.hibernate.HibernateException;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.Session;

public class cls_main {

/**
 * @param args
 */
public static void main(String[] args) 
{
    Transaction transaction = null;
    Session session =null;
    try
    {
        SessionFactory session_factory = new  Configuration().configure().buildSessionFactory();
     session = session_factory.openSession();

         transaction = session.beginTransaction();  

        System.out.println("Inserting Record");
        cls_employee obj_employee = new cls_employee();
        obj_employee.setEmp_id("2");
        obj_employee.setEmp_name("raj");
        obj_employee.setEmp_address("surat");
        obj_employee.setEmp_email("raj@gmail.com");
        obj_employee.setEmp_phone("9979378641");

        cls_tbl_test test_obj = new cls_tbl_test();
        test_obj.setId("1");
        test_obj.setName("test");

        session.save(test_obj);
         session.save(obj_employee);

         session.flush();
         session.clear();

         transaction.commit();

        System.out.println("Record inserted successfully..");

    }catch(HibernateException e)
    {
        System.out.println(e.getMessage());
    }
    finally
    {
         if (!transaction.wasCommitted()) {
             transaction.rollback();
            }

        session.close();
    }

}

 } 
```

如果有人知道这个问题，那么请帮我解决这个问题......谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:39:49.860

您的配置大部分是正确的。我只发现你在 hibernate.cfg.xml 中有两次 current_session_context_class 线程

我用 MySQL 尝试了你的源代码，它可以工作，所以问题与 HSQLDB 有关，而不是与你的代码有关。

看到这个答案：

[HSQLDB 和 Hibernate/JPA - 不持久化到磁盘？](https://stackoverflow.com/questions/3551988/hsqldb-and-hibernate-jpa-not-persisting-to-disk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:05:33.827

您是否在应用程序退出之前关闭数据库？检查这个答案：[数据没有保存在 HSQL 的 MEMORY 表中](https://stackoverflow.com/a/7422109/843804)。

# android - 带暂停和恢复的倒数计时器

> ID：10362014
> 
> 赞同：8
> 
> 时间：2012-04-28T08:49:19.363
> 
> 标签：android

我想用暂停和重启来做倒数计时器。现在我通过实现 ontick() 和 onfinish() 来显示倒数计时器。请帮帮我。这是倒数计时器的代码

```
final CountDownTimer Counter1 = new CountDownTimer(timervalue1 , 1000)

     {
 public void onTick(long millisUntilFinished)

  {
            System.out.println("onTick method!"(String.valueOf(millisUntilFinished/1000)));long s1=millisUntilFinished;
  }

public void onFinish() 

{
            System.out.println("Finished!");
}

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T08:55:26.650

在 onTick 方法中..保存剩下的毫秒数

```
 long s1=millisUntilFinished; 
```

当你想暂停定时器使用..

```
 Counter.cancel(); 
```

当你想恢复创建一个新的倒数计时器时，剩下的毫秒数..

```
 timervalue=s1
  counter= new Counter1();
   counter.start(); 
```

[看到这个链接](https://stackoverflow.com/questions/9630398/how-can-i-pause-the-timer-in-android/9663508#9663508)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T08:55:46.613

我会在`onTick`处理程序中添加一些内容以保存您班级中计时器的进度（剩余毫秒数）。

在计时器上`onPause()`的活动调用方法中。`cancel()`

在`onResume()`活动的方法中创建一个新的计时器，并保存剩余的毫秒数。

请参阅以下链接

[关联](https://stackoverflow.com/questions/8306374/android-how-to-pause-and-resume-a-count-down-timer)

[关联](https://stackoverflow.com/questions/5738362/pause-countdowntimer-in-android-when-activity-is-not-in-front)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T09:16:23.043

在这种情况下，我使用了两个私有变量：

```
private long startPauseTime;
private long pauseTime = 0L;

public void pause() { 
    startPauseTime = System.currentTimeMillis(); 
}

public void resumen(){ 
    pauseTime +=  System.currentTimeMillis() - startPauseTime; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T17:31:55.297

我在stackOverFlow上的第一个答案，希望对您有所帮助:) ...这就是我解决问题的方法，根据您的要求从Fragment，Bottomsheet，Service，Dialog控制计时器，保留一个`static boolean`变量来控制。

在您的活动中声明：

```
long presetTime, runningTime;    
Handler mHandler =new Handler();    
Runnable countDownRunnable;
Toast toastObj;
public static boolean shouldTimerRun = true;
TextView counterTv; 
```

在 onCreate 中：

```
presetTime =60000L;
runningTime= presetTime;
//setting up Timer
countDownRunnable=new Runnable() {
       @Override
         public void run() {
          if (shouldTimerRun) //if false, it runs but skips counting
          {
                counterTv.setText(simplifyTimeInMillis(runningTime));
             if (runningTime==0) {
                 deployToast("Task Completed"); //show toast on task completion 
                }
             runningTime -= 1000;
             presetTime = runningTime; //to resume the timer from last position
          }
          mHandler.postDelayed(countDownRunnable,1000); //simulating on-tick
         }
    };
mHandler.post(countDownRunnable); // Start our CountdownTimer 
```

现在，每当您想暂停计时器时，请更改`shouldTimerRun` `false`并恢复 make it 的值`true`。

```
@Override
    public void onResume() {
        super.onResume();
        shouldTimerRun=true;
    }

    @Override
    public void onPause() {
        super.onPause();
        shouldTimerRun=false;
        deployToast("Timer is paused !!");
    } 
```

帮助方法：（**可略过**）

```
public static String simplifyTimeInMillis(long time) {

        String result="";
        long difference = time;
        long secondsInMilli = 1000;
        long minutesInMilli = secondsInMilli * 60;
        long hoursInMilli = minutesInMilli * 60;

        if (difference<1000){
            return "0";
        }

        if (difference>=3600000) {
            result = result + String.valueOf(difference / hoursInMilli) + "hr ";
            difference = difference % hoursInMilli;
        }
        if (difference>=60000) {
            result = result + String.valueOf(difference / minutesInMilli) + "m ";
            difference = difference % minutesInMilli;
        }
        if (difference>=1000){
            result = result + String.valueOf(difference / secondsInMilli) + "s";
        }

        return result;
    }

public void deployToast(String msg){
        if (toastObj!=null)
            toastObj.cancel();
        toastObj = Toast.makeText(mContext,msg,Toast.LENGTH_SHORT);
        toastObj.show();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T09:08:20.730

恐怕不可能暂停或停止`CountDownTimer`，而在 onTick 中暂停或停止对任何用户都没有影响`TimerTask`。

设置`TimerTask`

```
class UpdateTimeTask extends TimerTask {
   public void run() {
       long millis = System.currentTimeMillis() - startTime;
       int seconds = (int) (millis / 1000);
       int minutes = seconds / 60;
       seconds     = seconds % 60;

       timeLabel.setText(String.format("%d:%02d", minutes, seconds));
   }

}
if(startTime == 0L) {
   startTime = evt.getWhen();
   timer = new Timer();
   timer.schedule(new UpdateTimeTask(), 100, 200);
} 
```

您可以像这样添加事件侦听器..

```
private Handler mHandler = new Handler();

...

OnClickListener mStartListener = new OnClickListener() {
   public void onClick(View v) {
       if (mStartTime == 0L) {
            mStartTime = System.currentTimeMillis();
            mHandler.removeCallbacks(mUpdateTimeTask);
            mHandler.postDelayed(mUpdateTimeTask, 100);
       }
   }
};

OnClickListener mStopListener = new OnClickListener() {
   public void onClick(View v) {
       mHandler.removeCallbacks(mUpdateTimeTask);
   }
}; 
```

有关更多信息，请参阅[Android 文档](http://developer.android.com/resources/articles/timed-ui-updates.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-02T07:36:18.597

```
//This timer will show min:sec format and can be paused and resumed

public class YourClass extends Activity{
TextView timer;
CountDownTimer ct;
long c = 150000; // 2min:30sec Timer
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    setContentView(R.layout.YourXmlLayout);
    timer = (TextView)findViewById(R.id.Yourtimer)
    startTimer(); // it will start the timer

}

public void startTimer(){
ct = new CountDownTimer(c,1000) {
    @Override
    public void onTick(long millisUntilFinished) {
    // Code to show the timer in min:sec form
    // Here timer is a TextView so
    timer.setText(""+String.format("%02d:%02d",millisUntilFinished/60000,(millisUntilFinished/1000)%60));
    c = millisUntilFinished; // it will store millisLeft
    }

    @Override
    public void onFinish() {
        //your code here

    }
};
ct.start();

}
/*===========================================================
*after creating this you can pause this by typing ct.cancel()
*and resume by typing startTimer()*/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-23T15:47:50.917

```
public class MainActivity extends AppCompatActivity {

TextView textView;

CountDownTimer ctimer;
boolean runCountDown;
private long leftTime;
private static final long MILL_IN_FUTURE = 6000;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textView = findViewById(R.id.text_view);
    textView.setText("Click to start");
    textView.setOnClickListener(this::clickStartAndPauseAndResume);
    leftTime = MILL_IN_FUTURE;

}

public void clickStartAndPauseAndResume(View view) {

    if (!runCountDown) {

        long time = (leftTime == 0 || leftTime == MILL_IN_FUTURE) ? MILL_IN_FUTURE : leftTime;
        ctimer = new CountDownTimer(time, 1) {

            @Override
            public void onTick(long l) {

                leftTime = l;
                textView.setText(l + "ms");
            }

            @Override
            public void onFinish() {

                textView.setText("Done");
                leftTime = 0;
                runCountDown = false;
                textView.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        textView.setText("Click to start");
                    }
                }, 1000);
            }
        }.start();
        runCountDown = true;
    } else {
        ctimer.cancel();
        textView.setText(textView.getText() + "\n Click to resume");
        runCountDown = false;
    }
 }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-31T09:25:06.987

为 CountDownTimer 创建 Pause/Resume 的一种简单而简单的方法是为您的计时器启动、暂停和恢复创建一个单独的方法，如下所示：

```
public void timerStart(long timeLengthMilli) {
        timer = new CountDownTimer(timeLengthMilli, 1000) {

            @Override
            public void onTick(long milliTillFinish) {
                milliLeft=milliTillFinish;
                min = (milliTillFinish/(1000*60));
                sec = ((milliTillFinish/1000)-min*60);
                clock.setText(Long.toString(min)+":"+Long.toString(sec));
                Log.i("Tick", "Tock");
            } 
```

timerStart 有一个 long 参数，因为它将被下面的 resume() 方法重用。请记住存储您的 milliTillFinished（以上为 milliLeft），以便您可以在 resume() 方法中发送它。暂停和恢复方法分别如下：

```
public void timerPause() {
        timer.cancel();
    }

    private void timerResume() {
        Log.i("min", Long.toString(min));
        Log.i("Sec", Long.toString(sec));
        timerStart(milliLeft);
    } 
```

这是按钮仅供参考的代码：

```
startPause.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(startPause.getText().equals("Start")){
                    Log.i("Started", startPause.getText().toString());
                    startPause.setText("Pause");
                    timerStart(15*1000);
                } else if (startPause.getText().equals("Pause")){
                    Log.i("Paused", startPause.getText().toString());
                    startPause.setText("Resume");
                    timerPause();
                } else if (startPause.getText().equals("Resume")){
                    startPause.setText("Pause");
                    timerResume();
                } 
```

# powershell - 每次系统从睡眠中唤醒时都需要运行一个 powershell 脚本

> ID：10362017
> 
> 赞同：3
> 
> 时间：2012-04-28T08:49:51.393
> 
> 标签：powershell, sleep, wakeup

我刚刚用 PowerShell 编写了一个脚本，每次我的系统从睡眠或休眠状态唤醒时我都需要它运行。我尝试了 gpedit.msc -> 用户配置 -> Windows 设置 -> 脚本 -> 登录，但是当我的系统从“睡眠”唤醒时这不起作用...可能是因为“睡眠”->“唤醒”是技术上不是新登录（作为用户我已经登录）。

睡眠唤醒事件或登录（用户登录）事件都应该触发我的脚本。

关于如何做到这一点的任何想法？

有关我的脚本功能的更多信息：它检查互联网/网络是否已连接。如果是，它将尝试使用所需参数运行 Cisco VPN 连接命令行实用程序并将我登录到 VPN。每次我从睡眠中唤醒系统并登录时，我都需要该死的 VPN 来自动连接我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T23:16:49.263

我想到了。我使用了上面 Richard 指出的任务计划程序。

我将触发器设置为.. On an Event -> System -> Kernel-Power -> 42

如果有人有兴趣...这里是脚本（我是 PowerShell 脚本的初学者，所以欢迎您的输入）

```
$strComputerName = gc env:computername
$strVPN = 'c:\Program Files (x86)\Cisco Systems\VPN Client\vpnclient.exe'
$vpnArgs = 'connect', 'ProfileName', 'user', 'XXXXXXXX', 'pwd', 'XXXXXXXXXX'
[int]$count = 6
Write-Host "Checking for Internet Connectivity"
While (!([Activator]::CreateInstance([Type]::GetTypeFromCLSID([Guid]'{DCB00C01-570F-4A9B-8D69-199FDBA5723B}')).IsConnectedToInternet))
{
    Write-Host "Sleeping for 10 seconds before checking for internet again"
    Start-Sleep -s 10
    $count--
    if ( $count -eq 0) 
    {
        Write-Host "Breaking from loop"
        break
    }
}
if ( $count -ne 0) { Invoke-Command -ScriptBlock { & $strVPN $vpnArgs } }
else { Write-Host "No Internet Connectivity, so not attempting VPN connection" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-22T08:07:17.027

您可以通过安排任务来运行脚本，触发事件 ID 为*1*的事件“Power-Troubleshooter”来完成此操作。这是系统从睡眠状态**恢复时记录的事件。**当系统**进入**睡眠状态时，将使用事件 ID *42*调用“内核电源”事件（与此处的另一个答案所暗示的不同）。

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:39:10.537

任务计划程序似乎更合适。

如果在这种情况下“启动时”的任务触发器不起作用（我怀疑它不会），那么识别从睡眠唤醒时发布的事件日志条目并触发它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-17T11:32:35.243

在 Windows 11 上，我们可以使用的事件 ID 是 566

我将触发器设置为> On an Event -> System -> Kernel-Power -> 566

这是我的配置 [计划任务触发器](https://i.stack.imgur.com/A5dcO.png)

在我的例子中，我运行了一个 powershell 脚本来打开我笔记本电脑上的键盘背光。现在，在 Windows 从睡眠状态恢复（打开笔记本电脑的盖子）但在我登录之前，背光灯会打开。

您可能还想取消选中：条件>电源>“仅当计算机使用交流电源时才启动任务”

# oracle - ORA-03113 文件通信结束

> ID：10362019
> 
> 赞同：-1
> 
> 时间：2012-04-28T08:49:59.093
> 
> 标签：oracle, subquery, rownum, ora-03113

我正在使用来自 VB6 的 rownum 运行一个长查询（有很多子查询），它在大约 1 分钟后给出 ORA-03113 文件结束通信。Toad 的查询运行良好。当从没有 ROWNUM 的 VB6 运行相同的查询时，查询工作正常。这也是参数化查询，如果我删除参数并直接在查询中输入值，那么还会从 vb6 查询运行罚款。

几天前，此查询运行良好。现在不是。

我尝试增加连接超时，但 1 分钟后仍然出现错误。谁能建议可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T21:53:26.963

这通常表明在服务器上引发了 ORA-00600 内部错误。检查警报日志和跟踪文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:50:30.110

客户端的 ORA-03113 是引发的 oracle 包罗万象的错误之一。您需要查看是否有任何其他错误伴随该错误，以便您了解问题。如果 ORA-03113 附带的 ORA-00600 具有相同的会话 sid/序列，则问题可能出在服务器端。检查服务器日志中的 ORA-03113 和任何添加错误。如果没有服务器端错误，则错误是客户端。检查任何与网络/连接相关的问题，但由于查询在没有 rownum 网络的情况下工作可能不是原因。这意味着它可能是客户端错误，

# c# - 目标数组不够长？

> ID：10362023
> 
> 赞同：63
> 
> 时间：2012-04-28T08:50:34.883
> 
> 标签：c#, list, locking

我有一个具有以下方法的类：

```
public List<Bike> bikesCopy 
{
     get 
     { 
       List<Bike> bs;
       lock (_bikes) bs = new List<Bike>(_bikes);
       return bs;
     }
} 
```

这会复制另一个列表，`private List<Bike> _bikes;`

现在奇怪的是，我收到以下错误：

> 目标数组不够长。检查 destIndex 和长度，以及数组的下限。

这里有什么问题？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-02T08:23:36.370

我会说错误在于对象**_bikes**不是线程安全的。正如所评论的，某处存在未锁定的**_bikes**对象的修改。

**当测量_bikes**的大小时，变量**bs**设置为大小 X，这是一个瞬间错误。在即将填满列表的下一瞬间，**_bikes**对象的大小增加了，出现了错误。

 ****所以检查你的代码。查找您的**_bikes**对象的所有引用，并确保它们是线程安全处理的（带锁）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T08:59:57.920

那么你可以尝试：

```
using System.Linq; //ToList() is an extension function defined here
...
lock(_bikes)
    return _bikes.ToList(); 
```

此处讨论了异常的详细信息：[为什么 foreach 循环在某些情况下不起作用？](https://stackoverflow.com/questions/1167333/why-doesnt-a-foreach-loop-work-in-certain-cases)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-06T05:01:02.570

发生此错误是因为多个线程在单个列表中添加项目。默认情况下，列表不是线程安全的解决方案。在多线程代码中，建议只从列表中读取，而不是写入。

[如此处](https://docs.microsoft.com/en-us/dotnet/standard/collections/thread-safe/)所述：

> 如果您只是从共享集合中读取，那么您可以使用 System.Collections.Generic 命名空间中的类。

更好地使用像[System.Collections.Concurrent](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent?view=netcore-3.1)命名空间这样的线程安全解决方案，它提供了[ConcurrentBag](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentbag-1?view=netcore-3.1)、[ConcurrentDictionary](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2?view=netcore-3.1)、[ConcurrentQueue](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentqueue-1?view=netcore-3.1)、[ConcurrentStack](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentstack-1?view=netcore-3.1)等实现。

例如：

```
public ConcurrentBag<Bike> bikesCopy 
{
     get => new ConcurrentBag<Bike>()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-12T15:42:29.707

不是真正的答案，更多的是研究评论。

我遇到了同样的问题并进行了快速测试。我尝试使用下面的代码，但无法让此代码抛出`ArgumentException: Destination array was not long enough`. 但是当我`.ToList()`从行中删除

```
return allLines.ToList().ToArray(); 
```

它立即崩溃。

这是演示代码，甚至 IDE 都告诉我，我应该删除该`ToList()`调用，因为它看起来是多余的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;

namespace ConsoleApp1
{
    class Program
    {
        static void Main() {

            List<string> thelist = new List<string>();

            Thread producer = new Thread(() => {
                while (true) {
                    thelist.Add("a" + DateTime.Now);
                }
            });

            Thread transformer = new Thread(() => {
                while (true) {
                    string[] thearray = thelist.ToList().ToArray();
                    Console.WriteLine(thearray.Length);
                }
            });
            producer.Start();
            transformer.Start();
            Console.ReadKey(true);
        }
    }
} 
```

我真的很想知道，为什么它不会崩溃，因为 List 也由数组支持。****

# flash - 在您的 Flash swf 中播放 youtube 视频

> ID：10362024
> 
> 赞同：0
> 
> 时间：2012-04-28T08:50:42.687
> 
> 标签：flash, audio, video, stream, youtube

我正在尝试创建一个在我试图创建的 SWF 中播放 youtube 视频（或至少视频的音频）的网络应用程序。Flash 是否具有读取 youtube 流并播放它所需的类，并让我可以显示视频加载的百分比以及播放位置在哪里？

谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:19:42.857

您可以使用[YouTube ActionScript 3.0 Player API](https://developers.google.com/youtube/flash_api_reference)。

# entity-framework - 实体框架 - TOP 使用动态查询

> ID：10362025
> 
> 赞同：0
> 
> 时间：2012-04-28T08:51:05.643
> 
> 标签：entity-framework, linq-to-entities

在构建新对象查询时，我在实现 TOP 或 SKIP 功能时遇到问题。

我不能使用 eSQL，因为我需要使用“IN”命令——如果我遍历 IN 并将它们全部添加为“OR”参数，这可能会变得非常复杂。

代码如下：

```
Using dbcontext As New DB

       Dim r As New ObjectQuery(Of recipient)("recipients", dbcontext)
        r.Include("jobs")
        r.Include("applications")

        r = r.Where(Function(w) searchAppIds.Contains(w.job.application_id))

        If Not statuses.Count = 0 Then
            r = r.Where(Function(w) statuses.Contains(w.status))
        End If

           If Not dtFrom.DbSelectedDate Is Nothing Then
                r = r.Where(Function(w) w.job.create_time >= dtDocFrom.DbSelectedDate)

            End If

            If Not dtTo.DbSelectedDate Is Nothing Then
                r = r.Where(Function(w) w.job.create_time <= dtDocTo.DbSelectedDate)

            End If

            'a lot more IF conditions to add in additional predicates

            grdResults.DataSource = r

        grdResults.DataBind() 
```

如果我使用任何形式的 .Top 或 .Skip 它会引发错误：LINQ to Entities 查询不支持查询生成器方法

有没有办法使用这种方法指定 TOP 或 Limit？如果可能，我想避免查询返回 1000 条记录。（用于用户搜索屏幕）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:05:54.003

而不是

`r = new ObjectQuery<recipient>("recipients", dbContext)`

尝试

`r = dbContext.recipients`.

`.Skip()`并在`.Take()`返回`IOrderedQueriable<T>`时`.Where`返回`IQueriable<T>`。因此把`.Skip()`and放在`.Take()`最后。

也改为`grdResults.DataSource = r`现在`grdResults.DataSource = r.ToList()`执行查询。这也将允许您将这一行暂时包装在 try/catch 中，这可能会更好地显示关于它为什么出错的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:34:28.177

将此标记为混乱。我应该一直使用 .Take 而不是 .Top 或 .Limit 或任何东西。

我的最后一部分如下，它有效：

```
grdResults = r.Take(100) 
```

# actionscript-3 - AS3，未定义属性的访问

> ID：10362026
> 
> 赞同：0
> 
> 时间：2012-04-28T08:51:11.440
> 
> 标签：actionscript-3, properties, undefined

我想使用 AS3 中 Subhero 编写的 Base64 类，所以我创建了一个 ActionScript 项目，其中包含两个文件：StringCompress.as 和 Base64.as。代码如下。（Base64.as 的代码有点长，但我只是想向您展示它包含的函数。）但是，在 StringCompress.as 中，这两行

```
return Base64.Encode(textBytes); 
```

和

```
var textBytes:ByteArray = Base64.Decode(value); 
```

有相同的错误“未定义属性 Base64 的访问”。

我不知道为什么，有人可以帮助我吗？非常感谢！！！

//代码

StringCompress.as 代码

```
package
{
import flash.display.Sprite;
import flash.utils.ByteArray;
import flash.errors.IOError;
import flash.events.Event;

public class StringCompress extends Sprite
{
    public function StringCompress()
    {

    }

    public static function Compress(value:String):String
    {
        var textBytes:ByteArray = new ByteArray();
        textBytes.writeUTFBytes(value);
        textBytes.compress();
        return Base64.Encode(textBytes);
    }

    public static function UnCompress(value:String):String
    {
        var textBytes:ByteArray = Base64.Decode(value);
        try
        {
            textBytes.uncompress();
        }
        catch(e:IOError){
            trace("The code to uncompress is not valid.");
        }
        return textBytes.toString();
    }
}
} 
```

Base64.as 代码

```
/*
 *  A Base64 encoder/decoder implementation in Actionscript 3
 *  This work is made available under http://creativecommons.org/licenses/by-nc-sa/2.0/de/deed.en
 *
 *  @author subhero@gmail.com
 *  @version 0.5
 */
package formatter {
// import ->
import flash.utils.ByteArray;
import flash.errors.EOFError;
// <- import

// Base64 ->
/*
*   A class used for transforming a ByteArray to a Base64-encoded string and vice versa.
*   Since the "built-in" class (mx.utils.Base64Encoder) is not documented yet, this class can be  
*   used for Base64 encoding/decoding in the meantime. 
*   The class will be deprecated as soon as Macromedia/Adobe decides to fully release the 
*   "native" AS3 Base64 class (Flex2 full release respectively). 
*   Its implementation is based upon a HowTo {@link http://www.kbcafe.com/articles/HowTo.Base64.pdf}, 
*   a Java implementation {@link http://ostermiller.org/utils/Base64.java.html} and an 
*   AS2-implementation by Jason Nussbaum {@link http://blog.jasonnussbaum.com/?p=108}
*
*/
public class Base64 {
    // mx.utils.StringUtil
    public static function isWhitespace(char:String):Boolean{
        switch (char){
            case " ":
            case "\t":
            case "\r":
            case "\n":
            case "\f":
                return true;    
            default:
                return false;
        }
    }

    // the Base64 "alphabet"
    private static var _b64Chars:Array=new Array(
        'A','B','C','D','E','F','G','H',
        'I','J','K','L','M','N','O','P',
        'Q','R','S','T','U','V','W','X',
        'Y','Z','a','b','c','d','e','f',
        'g','h','i','j','k','l','m','n',
        'o','p','q','r','s','t','u','v',
        'w','x','y','z','0','1','2','3',
        '4','5','6','7','8','9','+','/'
    )
    // the reverse-lookup object used for decoding
    private static var _b64Lookup:Object=_buildB64Lookup();
    // the boolean to insert linebreaks after 76 chars into the Base64 encoded string
    private static var _linebreaks:Boolean;

    /*
    *   The class method for encoding an array of bytes to a Base64 encoded string. 
    *
    *   @param bArr A ByteArray containing values to encode
    *   @param linebreaks A boolean to insert a linebreak after 76 Base64-chars
    *   @return The Base64 encoded string
    *   
    */
    public static function Encode(bArr:ByteArray, linebreaks:Boolean=false):String
    {
        _linebreaks= linebreaks;
        return _encodeBytes(bArr);
    }

    /*
    *   The class method for decoding a Base64 encoded string to an array of bytes. 
    *
    *   @param str A Base64 encoded string
    *   @return An array of bytes
    *   
    */
    public static function Decode(str:String):ByteArray
    {
        return _decodeSring(str);
    }

    /*
    *   The private helper class method to build an object used for reverse B64 char lookup. 
    *
    *   @return An object with each B64 char as a property containing the corresponding value
    *   
    */
    private static function _buildB64Lookup():Object
    {
        var obj:Object=new Object();
        for (var i:Number=0; i < _b64Chars.length; i++)
        {
            obj[_b64Chars[i]]=i;
        } 
        return obj;
    }

    /*
    *   The private helper class method to determine whether a given char is B64 compliant. 
    *
    *   @param char A character as string (length=1)
    *   @return A boolean indicating the given char *is* in the B64 alphabet
    *   
    */
    private static function _isBase64(char:String):Boolean
    {
        return _b64Lookup[char] != undefined;
    }

    /*
    *   The private class method for encoding an array of bytes into a B64 encoded string. 
    *
    *   @param bs An array of bytes
    *   @return The B64 encoded string
    *
    *   @see formatter.Base64.Encode()
    *   
    */
    private static function _encodeBytes(bs:ByteArray):String
    {
        var b64EncStr:String = "";
        var bufferSize:uint;
        var col:uint=0;
        bs.position=0;
        while (bs.position < bs.length)
        {
            bufferSize= bs.bytesAvailable >= 3 ? 3 : bs.bytesAvailable;
            var byteBuffer:ByteArray=new ByteArray();
            bs.readBytes(byteBuffer, 0, bufferSize);
            b64EncStr += _b64EncodeBuffer(byteBuffer);
            col+=4;
            if (_linebreaks && col%76 == 0) {
                b64EncStr += "\n";
                col=0;
            }
        }
        return b64EncStr.toString();
    }

    /*
    *   The private class method for encoding a buffer of 3 bytes (24bit) to 4 B64-chars 
    *   (representing 6bit each => 24bit). 
    *
    *   @param buffer An array of bytes (1 <= length <= 3)
    *   @return The byte buffer encoded to 4 B64 chars as string
    *
    *   @see formatter.Base64._encodeBytes()
    *   
    */
    private static function _b64EncodeBuffer(buffer:ByteArray):String
    {
        var bufferEncStr:String = "";
        bufferEncStr += _b64Chars[buffer[0] >> 2];
        switch (buffer.length)
        {
            case 1 :
                bufferEncStr += _b64Chars[((buffer[0] << 4) & 0x30)];
                bufferEncStr += "=="; 
                break;
            case 2 : 
                bufferEncStr += _b64Chars[(buffer[0] << 4) & 0x30 | buffer[1] >> 4];
                bufferEncStr += _b64Chars[(buffer[1] << 2) & 0x3c];
                bufferEncStr += "=";
                break;
            case 3 : 
                bufferEncStr += _b64Chars[(buffer[0] << 4) & 0x30 | buffer[1] >> 4];
                bufferEncStr += _b64Chars[(buffer[1] << 2) & 0x3c | buffer[2] >> 6];
                bufferEncStr += _b64Chars[buffer[2] & 0x3F];
                break;
            default :   trace("Base64 byteBuffer outOfRange");  
        }           
        return bufferEncStr.toString();
    } 

    /*
    *   The private class method for decoding a string containing B64 chars to an array of bytes 
    *
    *   @param s The B64 encoded string
    *   @return A decoded array of bytes
    *
    *   @see formatter.Base64.Decode()
    *   
    */
    private static function _decodeSring(s:String):ByteArray
    {
        var b64EncString:String="" + s;
        var b64DecBytes:ByteArray=new ByteArray();
        var stringBuffer:String="";
        var lgth:uint=b64EncString.length;      
        for (var i:uint=0; i < lgth; i++)
        {
            var char:String=b64EncString.charAt(i);
            if (!isWhitespace(char) && (_isBase64(char) || char == "=")) {
                stringBuffer += char;
                if (stringBuffer.length == 4) {
                    b64DecBytes.writeBytes( _b64DecodeBuffer(stringBuffer) ); 
                    stringBuffer="";
                }
            }
        }
        b64DecBytes.position=0;
        return b64DecBytes;
    }

    /*
    *   The private class method for decoding a string buffer of 4 B64 chars 
    *   (each representing 6bit) to an array of 3 bytes. 
    *
    *   @param buffer A string containing B64 chars (length = 4)
    *   @return An array of bytes containing the decoded values
    *
    *   @see formatter.Base64._decodeBytes()
    *   
    */
    private static function _b64DecodeBuffer(buffer:String):ByteArray
    {
        var bufferEncBytes:ByteArray=new ByteArray();
        var charValue1:uint=_b64Lookup[buffer.charAt(0)];
        var charValue2:uint=_b64Lookup[buffer.charAt(1)];
        var charValue3:uint=_b64Lookup[buffer.charAt(2)];
        var charValue4:uint=_b64Lookup[buffer.charAt(3)];
        bufferEncBytes.writeByte(charValue1 << 2 | charValue2 >> 4);
        if (buffer.charAt(2) != "=") bufferEncBytes.writeByte(charValue2 << 4 | charValue3 >> 2);
        if (buffer.charAt(3) != "=") bufferEncBytes.writeByte(charValue3 << 6 | charValue4);
        return bufferEncBytes;
    }   
}
// <- Base64
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:11:03.367

您只是没有将 base64 导入使用它的类。添加正确的导入行。

编辑：将 Base64.as 放入文件夹 formatter，然后“import formatter.Base64;” 或者，它也可以工作 - 在 Base64.as 中，在第一行“package formatter {”中删除单词“formatter”，然后添加“import Base64;” 在 StringCompress.as 中。

# java - Eclipse Marketplace - Maven Integration

> ID：10362029
> 
> 赞同：3
> 
> 时间：2012-04-28T08:52:10.687
> 
> 标签：java, eclipse, maven

I am in Eclipse Indigo and trying to install Maven Support for eclipse. I search Eclipse Marketplace with "maven" and found there are two entries:

*   Maven Integration for Eclipse WTP.
*   Maven Integration for Eclipse.

Now I am confused to choose them.

I am developing web application. So what is the entry I should go for?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:02:06.673

Install them both. The first is specifically designed to integrate with WTP, the second one is general Maven integration in Eclipse.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:13:28.760

Have you tried to just use Maven? With Indigo, m2e is already integrated. If you look at eclipse.org, you will find there the following features integrated:

![enter image description here](../Images/434140d76f9dafef2dd930948644d266.png)

If you open the preferences in Eclipse (`Windows > Preferences`), you will find there the Maven configuration for Eclipse:

![enter image description here](../Images/dab6c99fcb1e07e04e59ea0e9c77d4da.png)

You have to configure there, where your Maven installation lives, and can start to use Maven inside Eclipse.

# php - 替换不更新数据库

> ID：10362031
> 
> 赞同：0
> 
> 时间：2012-04-28T08:52:25.367
> 
> 标签：php, mysql

我有一个表，`id`它是主键，`user_id`它是外键，但会话基于我的代码中的这个。我已经尝试了一切，所以我将发布我的完整代码。如果表中没有`user_id`具有相同 session_id 的表单，则应插入该表单。如果有，它应该更新。此刻，当用户之前没有访问过表单（表中没有user_id）并且插入了数据时，页面返回到位置页面：但数据没有插入到表中。如果用户在更新数据后更改数据，它也不会更改。这是表结构：

```
`thesis` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `thesis_Name` varchar(200) NOT NULL,
  `abstract` varchar(200) NOT NULL,
  `complete` int(2) NOT NULL DEFAULT '1',
   PRIMARY KEY (`id`),
    KEY `user_id` (`user_id`)
   ) 
```

我一直在使用的代码（并且失败了）：

```
$err = array();

$user_id = intval($_SESSION['user_id']);
// otherwise
if (isset($_POST['doThesis'])) {
$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection."); 
// check if current user is banned
$the_query = sprintf("SELECT COUNT(*) FROM users WHERE `banned` = '0' AND `id` = '%d'",
$user_id);

$result = mysql_query($the_query, $link);
$user_check = mysql_num_rows($result);
// user is ok
if ($user_check > 0) {

    // required field name goes here...
    $required_fields = array('thesis_Name','abstract');
    // check for empty fields
    foreach ($required_fields as $field_name) {
        $value = trim($_POST[$field_name]);
        if (empty($value)) {
            $err[] = "ERROR - The $field_name is a required field" ;
        }
    }   // no errors
    if (empty($err)) {
        $id = mysql_real_escape_string($_POST['id']);
        $thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
        $abstract = mysql_real_escape_string($_POST['abstract']);
  //replace query
        $query = "REPLACE INTO thesis ( thesis_Name, abstract) VALUES ('$thesis_Name',
       '$abstract') where id='$_SESSION[user_id]'";
        if (!mysql_query($the_query))
            echo "the query failed";
        else header ("location:myaccount.php?id=' . $user_id");
   }}}

        $rs_settings = mysql_query("SELECT * from thesis WHERE user_id = $user_id;");

        ?>

        <br>
        <form action="thesis.php" method="post" name="regForm" id="regForm" >
            class="forms">
<?php
$num_rows = mysql_num_rows($rs_settings);
    if($num_rows > 0) { ?>

<?php while ($row_settings = mysql_fetch_array($rs_settings)) {?>
 Title of Proposed Thesis<span class="required">*</span>
 <textarea name="thesis_Name" type="text" style="width:500px; height:150px" 
id="thesis_Name" size="600"><?php echo $row_settings['thesis_Name']; ?> </textarea>
                </tr>

                <tr>
                    <td>Abstract<span class="required">*</span>
                    </td>
                    <td><textarea name="abstract" style="width:500px; height:150px"  
 type="text" id="abstract"  size="600"><?php echo $row_settings['abstract']; ?>  
  </textarea></td>
                </tr>

                <?php }
                } else { ?>

//shows fields again without echo 
```

我试过 var_dum($query) 但没有出现

PS我知道代码并不完美，但我现在不问这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:04:58.107

我看不到您的替换语句将如何插入初始行，因为 where 子句总是错误的（不会有具有该用户 ID 的行）。我想你想使用替换，你需要在没有 where 子句的情况下替换论文（id、userid 等）。如果 id 和 userid 有唯一约束并且存在 userid 的行，那么它将被更新；如果它不存在，它将被插入。但是-如果您不知道 id- 如果您使用自动增量，您将不会知道，那么我不确定您是否可以通过替换来做到这一点。见[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

为什么不检查是否存在行然后使用更新或插入？

顺便说一句，用户可以在一个表单中输入多个论文，还是只输入一个？你的表表明他们可以有多个。如果这是您要实现的目标，那么我认为您应该将每篇论文的 id 作为表单数据的一部分存储在隐藏字段中。然后，您将能够使用 REPLACE INTO thesis (id, user_id, thesis_name, abstract) VALUES ($id, $user_id, $thesis_name, $abstract) 其中 id 是从每个隐藏字段中获得的论文的 id。如果这不存在，即用户输入了新论文，则在插入中使用 NULL 作为 id。这将使用 REPLACE INTO 工作，因为 id 列是自动递增的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:57:17.753

也许你的意思`user_id`不是`id`：

```
$query = "REPLACE INTO thesis ( thesis_Name, abstract) 
          VALUES ('$thesis_Name','$abstract') 
          WHERE user_id='{$_SESSION['user_id']}'"; 
```

或者，如果您确实是指来自的 id`$_POST['id']`

```
$query = "REPLACE INTO thesis ( thesis_Name, abstract) 
          VALUES ('$thesis_Name','$abstract') 
          WHERE id='$id'"; 
```

另外，`REPLACE`您应该使用`UPDATE`. 我很确定它更快，因为 REPLACE 基本上删除了该行然后再次插入它，我很确定你需要所有的字段和值，否则你的插入默认值。从[手册](http://dev.mysql.com/doc/refman/5.0/en/replace.html)：

> 所有列的值均取自 REPLACE 语句中指定的值。任何缺失的列都设置为其默认值，就像 INSERT 一样

所以你应该使用：

```
$query = "UPDATE thesis 
          SET thesis_Name='$thesis_Name', abstract='$abstract' 
          WHERE id='$id'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:18:12.960

您所做的一切都是正确的，只是您做错了一件事您的替换查询变量是 $query 并且您正在执行 $the_query。你错了：

```
$query = "REPLACE INTO thesis ( thesis_Name, abstract) VALUES ('$thesis_Name',
   '$abstract') where id='$_SESSION[user_id]'";
    if (!mysql_query($the_query)) // this is wrong 
        echo "the query failed"; 
```

将其替换为：

```
$query = "REPLACE INTO thesis ( thesis_Name, abstract) VALUES ('$thesis_Name',
   '$abstract') where id='$_SESSION[user_id]'";
    if (!mysql_query($query)) // use $query
        echo "the query failed"; 
```

# postgresql - 一个好的 PgPool II 配置

> ID：10362032
> 
> 赞同：6
> 
> 时间：2012-04-28T08:52:31.783
> 
> 标签：postgresql, pgpool

我一直在尝试将 PgPool 配置为接受大约 150 个请求。 Postgres 服务器配置为仅接受 100 个连接。超过 100 的任何内容都需要由 PgPool 进行池化。我似乎不明白这一点。我只需要 PgPool 对请求进行排队，我当前的配置不这样做。从我的 JMeter 测试中，当我尝试连接超过 100 个时，postgres 给我一个错误，说 PSQL error: `sorry, too many clients`。

我只用以下参数配置了 PGPool：

```
listen_address = 'localhost'
port = 9999
backend_hostname0 = 'localhost'
backend_port0 = 5432
num_init_children = 100
max_pool = 4
child_life_time =120
child_max_connections = 0
connections_life_tome = 120
client_idle_limit = 0 
```

由于我只需要 PgPool 来排队额外的连接请求，上面的配置是否正确？请告知正确的配置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T12:07:36.860

pgpool 中的 'child_max_connections' 不是数据库允许的最大连接数。它是池连接在终止和重新启动之前可以使用的次数。它可以回收连接线程并阻止内存泄漏。

max_pool x num_init_children 的公式描述了 pgpool 将与 Postgresql 建立的最大连接数。显然，这需要小于 postgresql 中设置的 'max_connections'，否则 pgpool 会将数据库标记为不可用的后端。如果您保留了一些数据库连接供管理员使用，则需要进一步减少 pgpool 连接的数量。

所以，我要说的是公式中的'max_connections'是postgresql.conf中设置的参数。在上面的注释中将 'child_max_connections' 设置为 100 只是意味着 pgpool 连接每使用 100 次就会关闭并重新打开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T19:05:31.143

首先是弄清楚你想要的最大池大小。当最大活动连接数大约为（（2 * 核心数）+ 有效主轴计数）时，PostgreSQL 性能（在吞吐量和延迟方面）通常是最好的。计算有效的主轴数可能很棘手——例如，如果您的活动数据集已完全缓存，则将其计为零。不要将来自超线程的任何额外线程算作此计算的核心。另请注意，由于网络延迟问题，您可能需要一个比计算出的数量略大的池来保持该数量的*活动*连接。您可能需要做一些基准测试来找到适合您的硬件和工作负载的最佳位置。

您需要调整的设置是`child_max_connections`，`num_init_children`保持小于或等于。

# javascript - 正确的写法是什么

> ID：10362043
> 
> 赞同：0
> 
> 时间：2012-04-28T08:54:18.223
> 
> 标签：javascript

```
for (var i = 0; i < colors.length; i++) {
    str += "<span class='ecolor' style='background-color:'" + colors[i] + "' title='" + colors[i] + "'></span>";
} 
```

正确的书写顺序是什么`style='background-color:'" + colors[i] + "'`

所以它用背景颜色正确渲染。目前它不工作`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T08:57:30.847

```
 str += "<span class='ecolor' style='background-color:'" + colors[i] + "' title='" + colors[i] + "'></span>"; 
```

这将是这样的：

```
<span class='ecolor' style='background-color:'red' title='red'></span> 
```

`:`注意和之间的额外引号`r`。

```
 str += "<span class='ecolor' style='background-color: " + colors[i] + "' title='" + colors[i] + "'></span>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:56:22.713

您的跨度中没有任何内容，它是一个内联元素，因此将减少为无。没有内容或适当的样式。

你有它的造型吗？数组
中有什么？`colors`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:56:45.123

原因是跨度内没有输入给它一个宽度：

你可以只插入一个空格：

```
for (var i = 0; i < colors.length; i++) {
    str += "<span class='ecolor' style='background-color:'" + colors[i] + "' title='" + colors[i] + "'> &nbsp;</span>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T08:58:13.287

海

代码应该看起来像

```
for (var i = 0; i < colors.length; i++) {
    str += "<span class=\"ecolor\" style=\"background-color:" + colors[i] + "\" title=\"" + colors[i] + "\"></span>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T08:58:17.437

您在冒号后关闭背景颜色：

不是

```
str += "<span class='ecolor' style='background-color:'" + colors[i] + 
```

但

```
str += "<span class='ecolor' style='background-color:" + colors[i] + 
```

# php - sql 在单选按钮中显示数据

> ID：10362051
> 
> 赞同：0
> 
> 时间：2012-04-28T08:55:58.227
> 
> 标签：php, mysql, forms, post

我对存储在数据库中的测验几乎没有答案。我在这样的表单上将它们显示为单选按钮

```
$row = mysql_fetch_array(mysql_query('select * FROM quiz order by rand() limit 1'),MYSQL_ASSOC);

<?php
        foreach ($row as $key => $value) {
            echo "<input type='radio' name='answer'>".$value."</input><br />";
        }
    ?> 
```

但是当我发布这个表格时，另一端的回声没有得到我选择的单选按钮答案。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:59:37.327

```
echo "<input type='radio' name='answer' value='".$value."'>".$value."</input><br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:00:28.353

我唯一能看到的是

a) 收音机外没有表单标签

b）您没有给收音机一个值，例如：

```
 <input type='radio' name='answer' value="1"> Male
 <input type='radio' name='answer' value="2"> Female 
```

# matlab - 在 Matlab 中使用 Excel 的用户定义函数时出错

> ID：10362055
> 
> 赞同：2
> 
> 时间：2012-04-28T08:56:37.377
> 
> 标签：matlab, excel, excel-formula, vba

> **可能重复：**
> [Excel 插件错误 #NAME？](http://stackoverflow.com/questions/10352577/excel-addin-error-name)

我认为这是对我之前报告的有关 Excel 中用户定义函数的问题的后续查询。

手动使用时，我可以在 Excel 中使用该函数，但是当我使用 Matlab 使用 xlswrite 写入 excel 文件时，会出现错误`#NAME?`

![手动使用该功能](../Images/48a898a1374d4324370cc71dda4d9343.png)

我附上了手动输入和通过 Matlab 使用该功能时的屏幕截图。

![在 Matlab 中使用 xlswrite](../Images/bfa58439eda54ad31268732f8594de96.png)

谢谢

编辑 ：

非常感谢。我在这里将 VBA 函数存储为 Excel 插件：

C:\Users\Administrator\AppData\Roaming\Microsoft\Addins

这是我看到的关于在自动化中使用时未加载 Excel 加载项的内容：

[http://www.excelforum.com/excel-programming/472145-calling-excel-macro-from-vb-6-app-problem.html](http://www.excelforum.com/excel-programming/472145-calling-excel-macro-from-vb-6-app-problem.html)

我在这里附上了来自 chi_squared() 的一小段代码：

```
Function Chi_Squared(act, exp, Optional df) 
```

这就是我在 Matlab 中写入 excel 文件的方式：

Formula_chisqr={[ '=chi_squared(' 'O2:O22' ',' 'M2:22' ')']};

[状态，消息] = xlswrite1(ExcelFilename,Formula_chisqr,sheetname, Location_Agg);

我还尝试按照建议给出完整的路径。但它没有用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:23:10.917

您必须指定 UDF 定义的工作簿。即使您的功能是您的 PERSONAL.XLSB 文件。仅当 UDF 在您使用它的同一文件中定义时，您不必这样做。

例如，

```
='myFunctions.xlsb'!chi_squired(O2:O21,P2:P21) 
```

如果`myFunctions.xlsb`未打开，您可能需要指定文件的完整路径。

如果您希望能够在任何文件中调用 UDF 而无需指定文件名，则需要将该文件另存为 Add-in，然后在`Options - Add-ins - Manage Add-ins`.

* * *

另一个想法：当您使用 XLSWRITE 时，请提供扩展名为 XLSX 的文件名，例如`test.xlsx`，而不仅仅是`test`. 默认情况下，MATLAB`XLS`以旧格式保存带有扩展名的文件。看起来当您在较新版本的 Excel (2007/2010) 中打开此类文件时，兼容模式不允许运行宏或 UDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T04:58:51.143

当您将 Excel 作为 COM 服务器打开时，默认情况下不加载 UDF 和加载项。因此，如果您想在 Excel 文件中使用加载项，则需要先加载加载项。

这是 Matlab 中的小代码片段，它在打开 Excel 文件之前加载加载项。

```
Excel = actxserver ('Excel.Application'); 
Excel.Workbooks.Open('C:\YourAddInFolder\AddInNameWithExtension'); 
Excel.Workbooks.Item('AddInNameWithExtension').RunAutoMacros(1); 

File='C:\YourFileFolder\FileName'; 
if ~exist(File,'file') 
    ExcelWorkbook = Excel.Workbooks.Add; 
    ExcelWorkbook.SaveAs(File,1); 
    ExcelWorkbook.Close(false); 

end 
Excel.Workbooks.Open(File); 
```

资料来源： [数学作品](http://www.mathworks.co.uk/matlabcentral/fileexchange/22365-function-for-faster-data-transfer-matlab-%3C-%3E-excel)

# servlets - 如何在Spring MVC的拦截器中实现客户端请求的控制器方法

> ID：10362057
> 
> 赞同：0
> 
> 时间：2012-04-28T08:56:50.033
> 
> 标签：servlets, spring-mvc, request, interceptor

我有实现拦截器中控制器的方法和拦截器中方法返回的对象的需求。

为什么？

因为我想声明将使用方法上注释的注释返回给客户端的数据类型。例如 ：

```
@Controller
@Scope("prototype")
@RequestMapping("/hello/")
public class HelloWorld {
    @ResponseType(DataType.JSON)
    @RequestMapping(value="/{username}")
    public UserInfo hellowUser(@PathVariable("username") String username) {
         UserInfo userInfo = new UserInfo();
         userInfo.setUsername(username);
         return userInfo.
    }
} 
```

然后拦截器：

```
public void postHandle(HttpServletRequest request,
            HttpServletResponse response, Object handler,
            ModelAndView modelAndView) throw Exception {
    Method method = getRequestedMethod();
    Object result = getResultReturnedByTheMethod();
    ResponseType responseType = method.getAnnotation(ResponseType.class);
    DataType type = responseType.value();
    swich(type) {
    case DataType.JSON : writeJson(result);
    case .......
    ...
    }
} 
```

那么，换句话说，如何正确实现“getRequestedMethod”和“getResultReturnedByTheMethod”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:32:38.437

你试过杰克逊处理器吗？[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

它会自动将 JSON 与控制器进行转换。并且受 Spring MVC 支持。

# c# - Metro-Style App 中的简单径向渐变背景

> ID：10362063
> 
> 赞同：2
> 
> 时间：2012-04-28T08:57:44.093
> 
> 标签：c#, xaml, directx, windows-runtime, winrt-xaml

在 XAML/C# Metro-Style App 中绘制径向渐变背景（也可以更改其颜色）的简单方法是什么？使用 DirectX 是一种选择吗？我尝试查看一些适用于 Windows 8 Consumer Preview 的 SharpDX 示例，但未能编译它们。还没有找到在 Windows 8 上的 C# 中使用 DX 的任何其他示例。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:41:46.320

我使用 SharpDx 克服了这个障碍并为我创建了一个 RadialGradient 填充背景

[http://advertboy.wordpress.com/2012/05/20/radial-gradients-mini-path-geometry-sprites-infinite-scrolling-inertial-canvas/](http://advertboy.wordpress.com/2012/05/20/radial-gradients-mini-path-geometry-sprites-infinite-scrolling-inertial-canvas/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T14:56:21.390

RadialGradientBrush 尚未添加到 XAML 堆栈中。您可以使用 WriteableBitmapEx 自己将渐变绘制到 WriteableBitmap，然后使用 Image 或 ImageBrush 来显示它 - 尽管如果您有许多要使用不同形状渐变的元素，这可能会非常慢。

您可以只使用在 Photoshop 或 Paint.NET 中创建的常规图像。

使用 DirectX 可能太复杂且没有必要，但您可以将 DirectX 与 XAML 混合使用。如果你真的想去那里 - 你可能需要使用 SurfaceImageSource。这里有 MSDN 上的基本介绍，或者[在](http://advertboy.wordpress.com/2012/04/04/directx-in-your-winrt-xamlc-apps-sharpdx/)[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh825871.aspx)查看 SharpDX 示例。您可能还想使用 Direct2D 来渲染到该表面，因此您需要混合多种技术。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-05-01T07:34:57.657

径向渐变画笔已经存在了很长一段时间 - 我想我第一次使用是在 2008 年。无论如何，xaml 中的标记非常简单：

```
<Rectangle Width="200" Height="100">
      <Rectangle.Fill>
        <RadialGradientBrush 
          GradientOrigin="0.5,0.5" 
          Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
          <RadialGradientBrush.GradientStops>
            <GradientStop Color="Yellow" Offset="0" />
            <GradientStop Color="Red" Offset="0.25" />
            <GradientStop Color="Blue" Offset="0.75" />
            <GradientStop Color="LimeGreen" Offset="1" />
          </RadialGradientBrush.GradientStops>
        </RadialGradientBrush>
      </Rectangle.Fill>
    </Rectangle> 
```

此处的详细信息：http: [//msdn.microsoft.com/en-us/library/ms752281 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms752281(v=vs.100).aspx)

# java - java.net.SocketException：MSSQL DB 的管道损坏

> ID：10362065
> 
> 赞同：0
> 
> 时间：2012-04-28T08:57:49.507
> 
> 标签：java, sql-server

我正在受苦

```
java.net.SocketException: Broken pipe Exception 
```

在我断开网络（通过移除网络电缆）并重新插入网络电缆后。MSSQL DB 发生此错误并使用 JTurbo 驱动程序连接。我想在建立连接后自动重新连接。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T01:25:12.603

不，你没有。您有网络故障，即分布式系统中的故障，因此可能是部分故障。您不知道交易是否已完成。您无法将其隐藏在自动重试的掩护下。应用程序需要知道它。

# vb.net - 使用 Bindingsource / DataAdapter / Dataset (Vb.NET) 插入到数据库表

> ID：10362068
> 
> 赞同：0
> 
> 时间：2012-04-28T08:58:06.767
> 
> 标签：vb.net, bindingsource

**健康）状况 ：**

我有 2 个表 HISTORY1 和 HISTORY2，这些表具有相同的列但不同的数据。

我正在使用下面的这些代码将数据从数据库检索到绑定源

```
dim da =new sqldataadapter
dim ds =new dataset
dim bs =new bindingsource
dim bs2 = new bindingsource

da.SelectCommand = "select * from HISTORY1"
da.fill(ds,"HISTORY1")
bs.datasource=ds.tables("HISTORY1") 
```

然后我将另一个表添加到 bs2

```
da.selectcommand="select*from HISTORY2"
da.fill(ds,"HISTORY2")
bs2.datasource=ds.tables("HISTORY2") 
```

* * *

**问题 ：**

现在，我想将每个数据从 HISTORY2 复制到 HISTORY1 表。

* * *

**问题 ：**

1.  我可以从 bs2 更新 HISTORY1 吗？
2.  有没有更简单的方法可以将数据从数据库检索到绑定源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:18:05.947

你应该通过搜索“DataTable Merge”找到你想要的

这是有关如何操作的链接：http: [//vb.net-informations.com/dataset/dataset-merge-tables-sqlserver.htm](http://vb.net-informations.com/dataset/dataset-merge-tables-sqlserver.htm)

## 这个怎么运作 ：

像往常一样用 History1 填充您的数据表。

更改您的选择命令以从第二个表（History2）中获取相同的表结构，

再次填充，相同的数据集但另一个表。

```
myDataSet.Tables(0).merge(myDataSet.Tables(1)) 
```

多田！

# database-design - db 表中的用户属性值 - int 还是 varchar？

> ID：10362074
> 
> 赞同：0
> 
> 时间：2012-04-28T08:59:13.097
> 
> 标签：database-design, database-schema

我有一个约会网站，每个用户都有自己的个人资料，其中包含 20 多个属性，如年龄、性别、爱好等。为此，我有一个表 user_profile，其中所有属性都在 1 行中。

对于搜索和匹配计算器，将属性值放在 int 中可能比在 varchar 中更好。但是现在我不确定如果 name 不是一个值，如何打印所有属性名称。

所以我想创建两个表：

```
用户资料
用户 ID | 性别 | 喜欢宠物 | 饮料| 身体类型 | 眼睛| 高分辨率照片| CLIPARTO 头发颜色 | ...
1 | 1 | 3 | 2 | 4 | 5 | 5 | ...
2 | 2 | 4 | 2 | 3 | 3 | 5 | ...

```

```
user_attributes
id | attr_group | value_name | attr_value
1  | 1          | male      | 1
2  | 1          | famale    | 2
3  | 2          | Like pets | 1
4  | 2          | Have pets | 2
5  | 2          | Don't like pets | 3
6  | 3          | Blue      | 1
7  | 3          | Gray      | 2
8  | 3          | Green     | 3
9  | 3          | Brown     | 4
... 
```

但这意味着我需要创建 20 个查询来打印所有属性的所有值名称。例如要打印我需要的眼睛颜色

```
SELECT * FROM user_attributes WHERE attr_group=3 
```

然后对于性别和彼此的属性再次相同。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:01:35.330

如果您确实需要所有属性的所有名称，只需询问数据库即可：

```
SELECT * FROM user_attributes ORDER BY attr_group 
```

从数据库中获取结果后，现在在代码中进行分组。它们将被方便地排序，因此很容易将具有相同`attr_group`.

要将其与 user 表连接起来，我建议您考虑使用另一个表来存储属性，并使用 columns `(user_id, attr_group, attr_value)`。然后，您可以跨此表加入并`user_attributes`获得所有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:10:10.273

Yes, it is good to have a lookup table that has all the acceptable values. (Yes, even if there are 20 of them.) You can create a foreign key relation from the other table to the lookup table that'll tell you at time of row insert / update if the code is trying to link to a value that doesn't exist. When you're ready to display the data, just join the tables, and harvest the name.

# javascript - 15 拼图背景图片 JavaScript/CSS

> ID：10362075
> 
> 赞同：-1
> 
> 时间：2012-04-28T08:59:26.853
> 
> 标签：javascript, css

我在 15 个拼图中的图块（div）放置正确，但都具有相同的图像，即背景图像的左上角。如何设置 div 以获取应用到它的背景图像的特定位置？很可能是一个 CSS 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:11:13.720

是的，这是一个 CSS 问题，答案是 background-position。见[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:34:27.600

使用背景位置 - 这是一个 CSS 属性：[http ://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

# javascript - 如何在 node.js 中运行此脚本？

> ID：10362082
> 
> 赞同：4
> 
> 时间：2012-04-28T09:00:33.733
> 
> 标签：javascript, node.js, error-handling

我已经安装了所有需要使用 CMD 运行此脚本的模块。当我通过 webmatrix 在 node.js 中运行此脚本时：

```
var http = require('http');
var everyauth = require('everyauth');
var app = require('express').createServer();

app.get('/', function(request, response) {
    response.send('Hello Express!!');
});

app.listen(2455); 
```

它不工作。错误是：

```
iisnode encountered an error when processing the request.

HRESULT: 0x2
HTTP status: 500
HTTP reason: Internal Server Error
You are receiving this HTTP 200 response because system.webServer/iisnode/@devErrorsEnabled configuration setting is 'true'.

In addition to the log of stdout and stderr of the node.exe process, consider using debugging and ETW traces to further diagnose the problem.

The node.exe process has not written any information to the stdout or stderr. 
```

我尝试过使用不同的博客脚本，但它们不起作用。我在 webmatrix 中尝试了 Steven Sanderson 的模板，并且确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:01:12.060

要将您的应用程序与 iisnode 一起使用，您必须使用 iisnode 提供的端口/套接字（因为在这种情况下，您使用 IIS 作为 Web 服务器，而不是捆绑在节点中的那个）。

用 替换最后一行`app.listen(process.env.port || 2455);`，这样它既可以与 iisnode 一起工作，又可以在使用 2455 端口运行时使用`node.exe app.js`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T11:05:31.177

利用

> app.listen(process.env.port || 2455);

而不是`

> app.listen（端口号）；

因为它是 iisnode web 服务器。

# java - 带有 SpinnerNumberModel 的 JSpinner 总是返回值 0

> ID：10362084
> 
> 赞同：3
> 
> 时间：2012-04-28T09:01:00.837
> 
> 标签：java, swing, jspinner, changelistener

我用这样的 as 模型制作了一个`JSpinner`组件：`SpinnerNumberModel`

```
JSpinner spinbox = new JSpinner(new SpinnerNumberModel(2, 1, 7, 1)); 
```

我添加了一个监听器来检测变化。

```
spinbox.addChangeListener(new ChangeListener() {
    @Override
    public void stateChanged(ChangeEvent arg0) {
        synchronized (this) {
            System.out.println("New value: " +
              ((Integer)_spiNumOfAIs.getValue()).intValue());
        }
    }
}); 
```

然而，我所看到的只是：

> 新值：0
> 
> 新值：0

我是否错误地读出了旋转框的值？

如果你想知道这个`synchronized`块：我是 Swing 的新手，我不知道动作监听器是否在我创建的同一个线程上执行`JDialog`，所以我为所有动作监听器采取了线程安全措施注意安全。`_spiNumOfAIs`是成员变量。

**编辑**：即使从这个小代码片段中也很明显，我什至没有看到它......在重构时我忘记了我同时使用 a`JSpinner spinbox`和 a `JSpinner _spiNumOfAis`，前者是 GUI 中可见的微调器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T09:21:07.633

所有 Swing 操作都应该在 EDT 上执行，因此与 UI 的交互总是发生在 EDT 上。简而言之，您`ChangeListener`将在 EDT 上被调用，因此无需同步。您可以通过`EventQueue.isDispatchThread`在侦听器中使用来轻松验证这一点，这将返回`true`. 这在[Swing 并发课程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)中进行了解释，我从中引用：

> 事件调度线程，所有事件处理代码都在其中执行。大多数与 Swing 框架交互的代码也必须在这个线程上执行。

要进一步用不正确的值回答您的问题，您应该发布更多代码，以便我们重现您的问题。例如，这是一个非常基本的微调器工作示例

```
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.SpinnerModel;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import java.awt.EventQueue;

public class JSpinnerDemo {

  public static JFrame createFrame(){
    JFrame frame = new JFrame(  );
    frame.add( createSpinner() );
    frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    frame.pack();

    return frame;
  }

  public static JSpinner createSpinner(){
    JSpinner spinner = new JSpinner( new SpinnerNumberModel( 2,1,7,1 ) );
    spinner.addChangeListener( new ChangeListener() {
      @Override
      public void stateChanged( ChangeEvent e ) {
        JSpinner spinner = ( JSpinner ) e.getSource();
        SpinnerModel spinnerModel = spinner.getModel();
        System.out.println(spinnerModel.getValue());
      }
    } );
    return spinner;
  }
  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        createFrame().setVisible( true );
      }
    } );
  }
} 
```

随意修改它以说明您的问题。我还可以建议查看[`JSpinner`类 javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSpinner.html)，因为编辑器和模型值可能会不同步，如 javadoc 中所述。另一个很好的起点是[关于微调器的 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

# python - 在 vim 和 python virtualenv 中带有 taglist 的 ctags

> ID：10362085
> 
> 赞同：5
> 
> 时间：2012-04-28T09:01:06.227
> 
> 标签：python, vim, virtualenv, ctags, taglist

我在我的项目中使用`virtualenv`and`django`我试图找到一种更有效的方式来浏览 django 源代码。

正如这里所建议的 -[帮助开发人员更快地阅读类层次结构的工具](https://stackoverflow.com/questions/10361714/tools-to-help-developers-reading-class-hierarchy-faster)- 我通过 ctags 对自己进行了设置

```
sudo port -v install ctags 
```

`taglist`并通过[https://github.com/vim-scripts/taglist.vim](https://github.com/vim-scripts/taglist.vim)安装了 vim 插件

不幸的是，当我试图通过“跳转”查看课程时，似乎`ctags`无法找到我的 Django 课程`Ctrl+]`。

有什么建议可以让我`ctags`阅读位于我的 virtualenv 中的 python 源代码吗？

**更新**

通过进一步的实验，我意识到这`ctags`是某种“索引”程序，它解析给定的目录/文件/文件并获取它找到的所有关键字（类名、方法名、函数名等）并将其写入文件。这个文件可以更新，vim 插件`taglist`基本上会从它读取，以知道当我`Ctrl``t`对类/方法/函数名称执行操作时将我发送到哪里。

所以我想出了一个临时和手动的解决方案，我在我的 vim 中执行，如下所示：-

```
:set tags=~/mytags
:! ctags -R -o ~/mytags ~/.virtualenvs/myprojectname 
```

第一个命令告诉我的 vim/taglist 我的“索引”结果存储在哪里。

`~/mytags`第二个命令通过递归搜索 ( `-R`)将索引结果写入文件`~/.virtualenvs/myprojectname`

这可行，但如果我碰巧在不同的`virtualenv`环境中，这是维护标签和标签更改的一种非常手动的方法。

有谁知道管理此`ctags`过程的自动化方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:06:36.303

[有许多“自动标签生成”插件可用。](http://www.vim.org/scripts/index.php)

TagList 不会从`tags`您手动/自动生成的任何内容中读取：它会调用`ctags`自身并直接读取其输出。

您可能还想阅读`:help autocommand`. 您可以设置自动命令以重新生成您`tags`的写入，如下所示：

```
autocmd BufWritePost,FileWritePost *.py :silent! !ctags -R -o ~/mytags ~/.virtualenvs/myprojectname 
```

# c# - c++ lib dll 的 C# 包装类

> ID：10362092
> 
> 赞同：1
> 
> 时间：2012-04-28T09:02:13.573
> 
> 标签：c#, c++, interop, wrapper, dllimport

我正在尝试在 c# 中创建一个类来访问 c++ 库中的函数。c++ dll 中的函数：
`bool WriteReply(const unsigned char *reply, const unsigned long reply_length)`.

如何在 c++ 中使用的示例：-

```
unsigned short msg_id = 0x0000;                      
byte msg_body[] = {(byte)(GetTickCount()/0x100)};    // a random value for loopback data

    // combine the message id and message body into an big msg
    unsigned long msg_length = sizeof(msg_id)+sizeof(msg_body);
    byte* big_msg = new byte[msg_length];
    big_msg[0] = LOBYTE(msg_id);
    big_msg[1] = HIBYTE(msg_id);
    memcpy((void*)&big_msg[2], (void*)msg_body, sizeof(msg_body));

    // send the big message
    if (!big_dev.WriteReply(big_msg, msg_length))
    {
        //do something here
    } 
```

我似乎无法将函数从 c# 传递给 dll ( `AccessViolationException`)。这是我尝试过的命令：-

```
byte[] bytearray = new byte[3] { 0x01, 0x02, 0x03 };
IntPtr unmanagedPointer = Marshal.AllocHGlobal(bytearray.Length);
Marshal.Copy(bytearray, 0, unmanagedPointer, bytearray.Length);

bool writestatus = (bool)NativeMethods.WriteReply(unmanagedPointer, (uint)bytearray.Length); 
```

在进口方面：-

```
[DllImport("dllname.dll", EntryPoint = "WriteReply")]
[return: MarshalAs(UnmanagedType.U1)]
internal static extern bool WriteReply(IntPtr msg, uint reply_length); 
```

请让我知道我哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:14:17.103

假设您的 C++ 方法使用字符串并且不修改它...

尝试这个

```
__declspec(dllexport) bool __cdecl WriteReply(const unsigned char *reply, const unsigned long reply_length);

[DllImport("libfile.dll", EntryPoint = "WriteReply")]
private static extern bool WriteReplyExternal(
    [MarshalAs(UnmanagedType.LPStr)] [Out] string replyString,
    [Out] UInt32 replyLength); 
```

或者更好（因为 C 字符串是空终止的并且缓冲区是只读的，所以你不必担心缓冲区溢出，长度参数是多余的）：

```
__declspec(dllexport) bool __cdecl WriteReply(const unsigned char *reply);

[DllImport("libfile.dll", EntryPoint = "WriteReply")]
private static extern bool WriteReplyExternal(
    [MarshalAs(UnmanagedType.LPStr)] [Out] string replyString); 
```

如果方法不在类中，这些将起作用，否则您将需要[使用 C++ 错位名称作为入口点](https://stackoverflow.com/a/2443170/38368)。

如果您的字符串包含 1...127 ASCII 范围之外的字符（例如非英文字母），您应该在 C++ 中使用 wchar_t 而不是 char，在编组中使用 LPWStr 而不是 LPStr。

编辑：

您需要使用另一种方法包装私有方法，该方法具有更适合 .NET 的签名，例如

```
public void WriteReply(string message)
{
    var result = WriteReplyExternal(message, message.Length);
    if (result == false)
        throw new ApplicationException("WriteReplay failed ...");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:47:45.077

我认为最新添加的代码为真正的问题提供了线索：

```
if (!big_dev.WriteReply(big_msg, msg_length)) 
```

这不能工作，因为`WriteReply`它是一个成员函数。您需要调用 C 样式函数而不是 C++ 成员函数。后者需要一个实例（`big_dev`在代码示例中）。

# javascript - Twitter bootstrap - 图片未显示

> ID：10362093
> 
> 赞同：1
> 
> 时间：2012-04-28T09:02:23.677
> 
> 标签：javascript, html, twitter-bootstrap

我有一个网站可以在 Google Chrome 中正常运行，但在其他浏览器（Firefox、Safari）中却不行。

我对以下代码部分有疑问：

```
 <div class="span2">
            <img src="./images/ads/karaoke.png" />
            <br><br><br>
            <img src="./images/ads/euros.png" />
            <br><br><br><br>
            <img src="./images/ads/parties.png" />
            <br><br><br><br>
            <img src="./images/ads/traleeDynamos.png" />
        </div> 
```

如您所见，我在站点的右侧显示了 4 张图像。但是图像不会在 Firefox 中呈现！！！

我究竟做错了什么？

图像显示在 Firebug 中，当我将鼠标悬停在 Firebug 上时，我可以看到正确的图像。但它根本不会出现在页面上。

我非常感谢有人查看代码。

提前谢谢了，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T09:12:46.540

我无法复制您所看到的内容，但我没有 Firefox 11，但是有几件事：该页面上的标记严重过时。抛弃 <center> 元素等，并摆脱所有已弃用的元素。然后验证标记和样式。我注意到您的第一个 img 有一个结束 </img> 元素...这是无效的，我敢打赌这是导致您的问题的原因。

请记住，验证是您的朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:37:09.360

从引导[文档](http://twitter.github.com/bootstrap/scaffolding.html)：

> **需要 HTML5 文档类型**
> 
> Bootstrap 使用需要使用 HTML5 文档类型的 HTML 元素和 CSS 属性。确保将它包含在项目中每个 Bootstrapped 页面的开头。

目前您有：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 //EN"> 
```

作为一个文档类型，所以修复它，验证并再次尝试看看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T22:42:42.630

如果您的图像未在 Firefox 中显示并且它打算占据您的浏览器的整个宽度，请确保添加 class="container-fluid"

# php - PHP - 有效地设置时间限制

> ID：10362094
> 
> 赞同：0
> 
> 时间：2012-04-28T09:02:40.913
> 
> 标签：php, performance, time

我有一个简单的脚本，如果它发现用户正在手机上浏览，它会重定向到网站的移动版本。它使用 Tera-WURFL 网络服务来实现这一点，并将放置在 Tera-WURFL 本身以外的其他主机上。我想保护它，以防 Tera-WURFL 托管停机。换句话说，如果我的脚本运行时间超过一秒钟，则停止执行它并重定向到常规网站。如何有效地做到这一点（这样CPU不会被脚本过度负担）？

编辑：看起来 TeraWurflRemoteClient 类具有超时属性。参见下文。现在我需要找到如何将它包含在我的脚本中，以便在超时的情况下重定向到常规网站。

这是脚本：

```
// Instantiate a new TeraWurflRemoteClient object
$wurflObj = new TeraWurflRemoteClient('http://my-Tera-WURFL-install.pl/webservicep.php');

// Define which capabilities you want to test for. Full list: http://wurfl.sourceforge.net/help_doc.php#product_info
$capabilities = array("product_info");

// Define the response format (XML or JSON)
$data_format = TeraWurflRemoteClient::$FORMAT_JSON;

// Call the remote service (the first parameter is the User Agent - leave it as null to let TeraWurflRemoteClient find the user agent from the server global variable)
$wurflObj->getCapabilitiesFromAgent(null, $capabilities, $data_format);

// Use the results to serve the appropriate interface
if ($wurflObj->getDeviceCapability("is_tablet") || !$wurflObj->getDeviceCapability("is_wireless_device") || $_GET["ver"]=="desktop") {
    header('Location: http://website.pl/'); //default index file
} else {
header('Location: http://m.website.pl/'); //where to go
}
?> 
```

这里[是包含的 TeraWurflRemoteClient.php 的来源](https://github.com/JohnAlbin/Tera-WURFL/blob/master/TeraWurflRemoteClient/TeraWurflRemoteClient.php)。[如文档](http://dbapi.scientiamobile.com/wiki/index.php/Remote_Webservice)中所述，它具有可选的超时参数：

```
// The timeout in seconds to wait for the server to respond before giving up
$timeout = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:19:13.030

TeraWurflRemoteClient 类具有超时属性。正如我在文档中看到的那样，默认情况下它是 1 秒。因此，此脚本的执行时间不会超过一秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:21:39.330

尝试通过在他们的类中设置对 TeraWurfl 的 HTTP 请求的非常短的超时来实现这一点，这样如果响应没有在 2-3 秒内返回，则认为检查为假并显示完整的网站。

寻找设置更短超时的位置可能会有所不同，具体取决于您用于发出 HTTP 请求的传输方式。就像在 Curl 中一样，您可以设置 HTTP 请求的超时时间。

在此之后，将您的 HTTP 请求超时重置回原来的状态，这样您就不会影响任何其他代码。

我也在研究它时发现了[这](http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html)一点，你可能想读一读，但我会说远离分叉，除非你非常清楚事情是如何运作的。

刚才 Adelf 发布了 TeraWurflRemoteClient 类的默认超时时间为 1 秒，这样可以解决您的问题，但无论如何我都会发布我的答案。

# php - 退出（）不起作用？

> ID：10362095
> 
> 赞同：0
> 
> 时间：2012-04-28T09:02:49.790
> 
> 标签：php, http, header

我有这个 php 脚本，它不在函数内

```
$num = mysql_num_rows($result);
if ($num == 0) 
{
    header("Location:index.php#captcha");//Location:#errorlogin.html");
    $_POST[password]="";
    exit;
} 
```

它似乎总是在这部分之后继续执行所有事情，不管 $num 是否等于 0 我已经尝试过退出（“消息”），死亡，返回等。对不起，如果这是一个愚蠢的问题哈哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:06:45.813

您正在[重定向](http://php.net/manual/en/function.header.php)页面。

[此](http://php.net/manual/en/function.header.php)页面中要注意的一个示例：

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T09:07:50.527

```
$_POST[password]=""; 
```

那应该是（注意`'`）：

```
$_POST['password'] = ""; 
```

该函数`exit()`在执行时肯定会停止执行。你的 if 条件一定有问题。

在 PHP 中，多个值“等于”为零（如果您使用`==`）。试着`var_dump($num)`看看里面到底有什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T11:48:13.057

`exit`无法工作，因为它有 2 个依赖项

A.`if ($num == 0)` 如果`$num`不是零退出将不起作用

B.`header("Location:index.php#captcha");`如果您的位置有效，则退出不会起作用

尝试

```
$num = mysql_num_rows ( $result );
if ($num == 0) {
    $_POST ['password'] = null;
    header ( "Location: http://yoursite.com/index.php#captcha" ); // Location:#errorlogin.html");
    exit();
}
else
{
    echo "Found $num in the database";
} 
```

# python-2.7 - 中间件未捕获异常

> ID：10362097
> 
> 赞同：1
> 
> 时间：2012-04-28T09:02:57.343
> 
> 标签：python-2.7, django-1.3

我想使用中间件来处理所有项目中的一些特殊异常。但是当引发异常时几乎从不调用中间件，我不明白这种行为的原因。

中间件类：

```
import logging
log = logging.getLogger(__name__)

class ExceptionMiddleware(object):
    def process_exception(self, request, exception):
        log.error("Сaught exception: %s"% exception) 
```

我的中间件类：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
     # Exception middleware
    'middleware.ExceptionMiddleware',
 ) 
```

也许我找到了一个原因。特定类的实例是作为全局值从所有视图中创建的，并且在调用某些视图之前引发异常。那么问题的另一部分，我如何才能捕捉到这些异常？

# objective-c - ObjC：最好为此使用 NSArray 或 NSDictionnary (zBuffer)？

> ID：10362107
> 
> 赞同：0
> 
> 时间：2012-04-28T09:04:37.183
> 
> 标签：objective-c, arrays, nsarray, hashmap, nsdictionary

假设我有一个“节点”实例的集合。整数属性调用 zIndex 将用于对它们进行分组。

将它们存储在其中的优点/缺点是什么：1）数组数组2）数组字典

在伪代码中，我会这样描述预期的结果：

```
zBuffer[100] = [node1, node 2];
zBuffer[105] = [playerNode, collectable1];
zBuffer[110] = [foreground1, foreground2]; 
```

我想知道 zBuffers 应该是什么；NSArrays 必须仅用于顺序读/写吗？喜欢不使用非连续索引？

我尝试使用 NSMutableArray：

```
[zBuffer objectAtIndex:zOrder] 
```

但如果数组不包含该索引的数据（如越界异常），它就会失败。

感谢您的建议！Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:19:12.347

据我所知，您的要求之一是您用于访问的索引`zBuffer`不连续（100、105、100）。在这种情况下，我不会为此使用数组，因为您可以与数组一起使用的索引必须小于`count`数组元素的 （如果您有 3 个元素，则索引范围从 0 到 2）。

相反，我会使用`NSMutableDictionary`，您可以在其中使用 zIndex 键作为您要查找的对象组的“名称”。

这个建议没有考虑您可能有的任何其他要求，特别是关于复杂性和您将在您的节点集合上执行的操作类型（除了通过 zIndex 访问它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:25:22.090

您实际上可以同时提供两者。看起来您想要的是一个稀疏数组：因此您按索引查找对象，但允许在某个索引处没有对象。所以你可以做到。

我会通过创建一个`NSMutableArray`实现[记录的原始方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)的子类来做到这一点。在内部，您的子类将使用`NSMutableDictionary`for 存储，以数字（“填充”索引）作为键。`-objectAtIndex:`返回以该数字作为其键的对象，或者`nil`该数组在该点是否为空。

数组合约的这种使用存在一些歧义，由您决定如何解决：

*   是否`count`返回 1+（使用中的最高索引）或数组中的对象数？
*   枚举器和快速枚举模式永远不会期望看到`nil`，因此如果您希望您的类的用户对数组进行枚举，您需要想出一个始终返回一个对象的枚举器（但让我看看它在什么索引处）。
*   您将无法使用初始化程序的`+arrayWithObjects: (id) firstObject,...`模式对其进行初始化，因为它们`nil`用作哨兵。

# windows-8 - 参数参数中带有空字符串的辅助磁贴不起作用

> ID：10362108
> 
> 赞同：1
> 
> 时间：2012-04-28T09:04:38.200
> 
> 标签：windows-8, windows-runtime, winrt-xaml

1）当我使用“arguments”参数=空字符串创建辅助磁贴时

```
SecondaryTile tile=new SecondaryTile("tileId",
"shortName",
"displayName",
 string.Empty,
TileOptions.ShowNameOnLogo,logo); 
```

我在开始窗口中单击辅助磁贴，应用程序未打开。

2）但是当我用'arguments'参数创建辅助图块时！=空字符串

```
SecondaryTile tile=new SecondaryTile("tileId",
"shortName",
"displayName",
"arguments",
TileOptions.ShowNameOnLogo,logo); 
```

然后我单击开始窗口中的辅助磁贴，应用程序打开。

请您帮我理解一下这种情况好吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:52:56.920

这是一个[已知的错误](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/9e503305-647d-4d02-9769-9137e3e0c756)。作为解决方法，您可以设置`arguments`为`null`或任何您想要的非空字符串（但不需要；）。

# c# - 如何使用动态分隔符解析文本文件

> ID：10362110
> 
> 赞同：0
> 
> 时间：2012-04-28T09:05:03.520
> 
> 标签：c#, parsing

文本文件的格式（为清楚起见，用点替换空格）：

```
1....2...23....a....5
3.........4...bc...35 
```

需要将此文件解析为锯齿状数组，如下所示：

```
{
    {"1", "2", "23", "a", "5"},
    {"3", "", "4", "bc", "35"}
} 
```

有人知道如何做到这一点吗？

更新：

最小空格数为 3。
行项目可以有不同的宽度

```
ae18...1,1234....5,567.....-2,5
ae140....1,12...0,5673.....-2,3
aw1.............0,3573...-1,545 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:25:45.057

查看您的示例，您的输入文本文件似乎使用了[固定宽度](http://en.wikipedia.org/wiki/Flat_file_database)或平面文件格式。如果是这样，将文件解析为多维数组的简单策略是读取文件的每一行，为每一行获取不同的固定列，然后修剪掉前导空格。

```
# Read next line from file
String line = readNextLineFromYourFile();
# Store the parsed line in a list of strings
List<String> parsedLine = new List<String>();
# Extract fixed width parts of the line, trim away whitespace and store in parsed line
parsedLine.Add(line.Substring(0,1).Trim());
parsedLine.Add(line.Substring(1,5).Trim());
parsedLine.Add(line.Substring(1,5).Trim());
# Store parsed line in the result
result.Add(parsedLine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:38:17.587

Use the FileHelpers engine for fixed delimited [http://www.filehelpers.net/](http://www.filehelpers.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:07:35.793

使用正则表达式来识别字母数字表达式。

# c - linux编程：写入设备文件

> ID：10362111
> 
> 赞同：3
> 
> 时间：2012-04-28T09:05:12.510
> 
> 标签：c, linux

我写了这个：

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <mtd/mtd-user.h>
#include <errno.h>

int main( void )
{
        int fd;
        char buf[4]="abc";

        fd = open("/dev/mtd0", O_RDWR);
        lseek(fd, 1, SEEK_SET);
        write(fd, &buf, 4);
        close(fd);
        perror("perror output:");

        return 0;
} 
```

文件 /dev/mtd0 是使用 nandsim 内核模块创建的，并运行

```
mtdinfo /dev/mtd0 
```

得到有意义的输出。在我运行我的程序后，它的输出：

```
perror output:: Invalid argument 
```

如果我的程序有任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:10:28.747

你应该有这样的东西

```
if(-1 == write(fd, &buf, 4)){
  perror("perror output:");
}
close(fd); 
```

因为 perror 显示最后一个错误。

[http://www.cplusplus.com/reference/clibrary/cstdio/perror/](http://www.cplusplus.com/reference/clibrary/cstdio/perror/)

以及更多关于 perror [http://www.java-samples.com/showtutorial.php?tutorialid=597](http://www.java-samples.com/showtutorial.php?tutorialid=597)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T09:12:33.873

是的，有问题。你的使用`perror()`是错误的。

在调用 perror 之前，您应该首先检查系统调用是否指示问题。手册页对此主题非常明确：

```
Note that errno is undefined after a successful library call: this call
may  well  change  this  variable, even though it succeeds, for example
because it internally used some other  library  function  that  failed.
Thus,  if  a failing call is not immediately followed by a call to per‐
ror(), the value of errno should be saved. 
```

您应该检查每个系统的返回码，并且只有在它们失败时才调用 perror。像这样的东西：

```
fd = open("/dev/mtd0", O_RDWR);
if (fd < 0) {
    perror("open: ");
    return 1;
}
if (lseek(fd, 1, SEEK_SET) < 0) {
    perror("lseek: ");
    return 1;
}
if (write(fd, &buf, 4) < 0) {
    perror("write: ");
    return 1;
}
close(fd); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T09:11:35.540

也许这有帮助？

[http://forums.freescale.com/t5/Other-Microcontrollers/Can-t-write-new-uboot-to-mtd0-in-linux-on-MPC8313E-RDB/td-p/34727](http://forums.freescale.com/t5/Other-Microcontrollers/Can-t-write-new-uboot-to-mtd0-in-linux-on-MPC8313E-RDB/td-p/34727)

这一切都必须处理访问权限。

正如 Jakub 和 Mat 所说，检查每个 API 调用的错误代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T16:34:31.347

您可能必须写一整页，而不仅仅是 4 个字节。

`dmesg`您可以通过在 shell 中键入命令来确认这一点。然后您应该看到以下内核消息：

> nand_do_write_ops：尝试写入非页对齐数据

然后将要写入 mtd 的代码替换为：

```
char buf[2048]="abcdefghij";                      //Ajust size according to 
                                                  //mtd_info.writesize
mtd_info_t mtd_info;                              // the MTD structure

if (ioctl(fd, MEMGETINFO, &mtd_info) != 0) {...   // get the device info

memset(buf+10, 0xff, mtd_info.writesize - 10);    //Complete buf with 0xff's

if (write(fd, &buf, mtd_info.writesize) < 0) {... // write page 
```

还要考虑在写入之前检查坏块 ( `ioctl(fd, MEMGETBADBLOCK, ...`) 和擦除块 ( )。`ioctl(fd, MEMERASE, ...`

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T08:50:32.940

问题出在这一行：

```
if (write(fd, &buf, 4) < 0) { 
```

写调用的第二个参数必须是一个指针，“buf”已经是一个指针，用“&”引用它，你会得到一个指向错误指针的指针：正确的调用是：

```
if (write(fd, (void*)buf, 4) < 0) { 
```

# c# - 是否有可能为 const 设置吸气剂？

> ID：10362113
> 
> 赞同：7
> 
> 时间：2012-04-28T09:05:39.620
> 
> 标签：c#, properties

只是好奇，有没有办法为常量变量设置吸气剂？我有一种内部版本号，以确保库的两个版本仍然使用相同的语言，但我希望程序员能够检查他们正在使用的版本。现在我使用：

```
 private const Int16 protocol_version = 1;
 public Int16 ProtocolVersion { get { return protocol_version; } } 
```

但如果有办法，我宁愿只用 const 来做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T09:21:06.477

您可以声明一个只有 get 访问器的属性（甚至不声明 set 访问器，甚至不声明私有）：

```
private const Int16 protocol_version = 1;
public Int16 ProtocolVersion { 
    get { return protocol_version; } 
} 
```

这与仅定义常量不同：常量将在编译时解析，因此如果您更新库而不重新编译依赖程序，程序仍会看到“旧”值。考虑这个例子：

```
// The class library
using System;

namespace MyClassLibrary {
    public class X {
        public const Int16 protocol_version = 1;
        public Int16 ProtocolVersion { get { return protocol_version; } }
    }
}

// The program
using System;
using MyClassLibrary;

class Program {
    static void Main(string[] args) {
        X x = new X();
        Console.WriteLine("Constant : {0}", X.protocol_version);
        Console.WriteLine("Getter: {0}", x.ProtocolVersion);
    }
} 
```

现在，第一次编译并执行程序。你会看见

```
Constant : 1
Getter : 1 
```

然后修改protocol_version为2，*只重新编译类库，不重新编译程序*，然后把新的类库放到程序文件夹中执行。你会看见：

```
Constant : 1
Getter : 2 
```

事实是，如果它只是一个常量，则该值会*在编译时*被替换。

I think that what you are actually looking for is a `static readonly` variable: in that way, you will avoid the compile-time const replacement, and the variable will not be modifiable after initialization:

```
public static readonly Int16 protocol_version = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T09:16:52.157

您必须牢记 getter/setter 存在的原因。就是控制对封装变量的访问，特别是控制一个变量是如何改变的，谁可以改变它。由于 const 仅设置一次并且在运行时保持只读状态，因此没有理由为其创建属性。将常量设置为 public 是完全可以接受的，因为它不是需要保护的私有变量。

如果你真的......真的想把它变成一个属性，那么只需将它定义为一个只读属性，完全跳过设置器：

```
public Int16 ProtocolVersion { get { return protocol_version; } } 
```

但是我们很清楚，我会说通常你会拥有与属性具有相同编码风格的公共常量：

```
public const Int16 ProtocolVersion = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T09:07:47.853

做就是了：

```
public const Int16 protocol_version = 1; 
```

这将提供一个公共 getter，因为它`const`不能有一个 setter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T09:19:37.927

常量不能被重新分配，因此为什么它们被称为常量，因此只需制作 protocol_version`public`

```
private const Int16 protocol_version = 1; 
```

# javascript - 为什么 String(null) 有效？

> ID：10362114
> 
> 赞同：27
> 
> 时间：2012-04-28T09:05:50.780
> 
> 标签：javascript, string, null, tostring

`null`并且`undefined`没有`toString`or`valueOf`方法。Afaik using`String`调用`toString`其参数的方法（例如`String({})`=> `[object Object]`）。

那为什么要做`String(null)`或`String(undefined`工作呢？它并没有隐含地做`Object.prototype.toString.call(null)`。因为那评估为`[object Null]`.

[编辑]：来自规范 ECMA-262/5th edition（第 48 页）。这并没有增加澄清，我会说：

```
/*
Table 13 — ToString Conversions  
-------------------------------------------------------------------------
Argument Type  | Result  
-------------------------------------------------------------------------
Undefined      | "undefined"
Null           | "null"  
Boolean        | If the argument is true, then the result is "true".
...            | ...
*/ 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-28T09:10:06.203

在查看了我之前的答案之后，似乎有必要对我之前的答案进行彻底检查。我把它复杂化了，因为简短的回答是这些是标准指定的特殊情况。

(用作函数)的[规范：](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)`String()``String`

> 15.5.1.1 字符串（[值]）
> 
> 返回由 ToString(value) 计算的 String 值（不是 String 对象）。如果未提供 value，则返回空字符串 ""。

该`ToString`函数（存在于内部，不在用户空间中）定义如下（9.8）：

“根据表 13，抽象操作 ToString 将其参数转换为 String 类型的值”

```
Argument Type | Result
Null | "null"
Undefined | "undefined" 
```

这意味着进入这个特殊的类型表`String(null)`，`String(undefined)`只返回字符串值 value`"null"`和`"undefined"`。

用户级伪实现如下所示：

```
function MyString(val) {
    if (arguments.length === 0) {
        return "";
    } else if (typeof val === "undefined") {
        return "undefined";
    } else if (val === null) {
        return "null";
    } else if (typeof val === "boolean") {
        return val ? "true" : "false";
    } else if (typeof val === "number") {
        // super complex rules
    } else if (typeof val === "string") {
        return val;
    } else {
        // return MyString(ToPrimitive(val, prefer string))
    }
} 
```

（请注意，此示例忽略了构造函数 case ( `new MyString()`)，并且它使用了用户域概念而不是引擎域。）

* * *

我有点得意忘形，找到了一个示例实现（具体来说是 V8）：

`string.js:`

```
// Set the String function and constructor.
%SetCode($String, function(x) {
  var value = %_ArgumentsLength() == 0 ? '' : TO_STRING_INLINE(x);
  if (%_IsConstructCall()) {
    %_SetValueOf(this, value);
  } else {
    return value;
  }
}); 
```

`macros.py:`

```
macro TO_STRING_INLINE(arg) = (IS_STRING(%IS_VAR(arg)) ? arg : NonStringToString(arg)); 
```

`runtime.js:`

```
function NonStringToString(x) {
  if (IS_NUMBER(x)) return %_NumberToString(x);
  if (IS_BOOLEAN(x)) return x ? 'true' : 'false';
  if (IS_UNDEFINED(x)) return 'undefined';
  return (IS_NULL(x)) ? 'null' : %ToString(%DefaultString(x));
} 
```

NonStringToString（本质上是我们感兴趣的），幸运的是在 psuedo-JS-land 中定义。如您所见，确实存在 null/true/false/undefined 的特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T09:13:25.887

对于 和 等特殊情况，可能只有一些额外的检查和`null`处理`undefined`。

[MDN 说](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String)：

> 可以将 String 用作“更安全”的 toString 替代方案，因为尽管它通常仍调用底层 toString，但它也适用于 null 和 undefined。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T09:20:32.750

`String(null)`创建一个字符串对象并将其传递给默认值 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T09:26:21.323

您可能有兴趣查看带[*注释的 ES5*](http://es5.github.com/)（比 ECMAScript 5 PDF 更具可读性），其中指出：`new String([ value ])` [http](http://es5.github.com/#x15.5.2.1) ://es5.github.com/#x15.5.2.1调用`[ToString]` [http://es5.github。 com/#x9.8](http://es5.github.com/#x9.8)（有一个特殊转换情况表）将传递给它的值转换为字符串。

# android - 片段内的Android setShareIntent

> ID：10362120
> 
> 赞同：1
> 
> 时间：2012-04-28T09:07:35.267
> 
> 标签：android, fragment, android-viewpager, shareactionprovider

**1\. 背景**

我有一个屏幕

```
ShareActionProvider 
```

和一个

```
ViewPager 
```

使用片段。

我希望做的是从当前可见的片段中获取一些信息来创建一个意图，然后我就可以在 ShareActionProvider 上设置这个意图。

这是我用来设置 ShareActionProvider 意图的代码：

```
 MenuItem actionItem = men.getMenu().findItem(R.id.menu_item_share_action_provider_action_bar);
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    actionProvider.setShareIntent(createShareIntent(mProduct.mProduct)); 
```

我已经尝试在几个地方使用它，例如在 Fragment 类的这些函数中：

```
onCreateView
onStart 
```

我也尝试在 FragmentPagerAdapter 类中的这些函数中使用它：

```
getItem 
```

**2.问题**

虽然意图实际上是在 ShareActionProvider 中设置的，但获得的信息是用于下一个片段（当前未显示的片段）。例如：

如果我有 4 个片段：frag1、frag2、frag3、frag4 并且我当前正在查看“frag1”，ShareActionProvider 将尝试共享“frag2”。这是真的，直到它到达“frag4”，它将共享正确的值。

我的猜测是片段分页器创建了当前视图和下一个视图（隐藏），这反过来又设置了 ShareActionProvider。如果是这种情况，那么“setShareIntent”的正确位置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:22:48.203

我在处理类似问题时偶然发现了这个问题。关于接受的解决方案的两件事：

1.  不要在任何地方保存对片段的引用，尤其是在适配器中的某些列表中
2.  不要在片段中创建字段，始终将您需要的数据存储在 Bundle 中，以便您可以使用 Fragment#getArguments 获取它

现在 - 考虑到这一点，这里有一个简单的解决方案：调用 ShareActionProvider 初始化代码`onPrepareOptionsMenu`。像这样的东西：

```
@Override
public void onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    MenuItem menuShare = menu.findItem(R.id.menuShare);
    ShareActionProvider shareAction = (ShareActionProvider) 
         menuShare.getActionProvider();
    shareAction.setShareIntent(createShareIntent());
}

protected Intent createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("text/plain");
    Job job = getArguments().getSerializable(JOB);
    shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, job.title);
    shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, job.toText());
    return shareIntent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:57:31.893

我设法自己弄清楚如何做到这一点。我最终做的是覆盖

```
OnPageChangeListener 
```

在片段活动中

```
private final OnPageChangeListener mOnPageChangeListener = new OnPageChangeListener() {

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int arg0) {
        // TODO Auto-generated method stub
        TestFragment frag = (TestFragment) adapter.mFragments.get(pager.getCurrentItem());

        frag.setShareActionIntent();

    }

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:27:39.230

[http://developer.android.com/reference/android/widget/ShareActionProvider.html](http://developer.android.com/reference/android/widget/ShareActionProvider.html)

来自 android sdk doc 的示例是：

```
 // In Activity#onCreateOptionsMenu
  public boolean onCreateOptionsMenu(Menu menu) {
      // Get the menu item.
      MenuItem menuItem = menu.findItem(R.id.my_menu_item);
      // Get the provider and hold onto it to set/change the share intent.
      mShareActionProvider = (ShareActionProvider) menuItem.getActionProvider();
      // Set history different from the default before getting the action
      // view since a call to MenuItem.getActionView() calls
      // onCreateActionView() which uses the backing file name. Omit this
      // line if using the default share history file is desired.
      mShareActionProvider.setShareHistoryFileName("custom_share_history.xml");
      . . .
  }

  // Somewhere in the application.
  public void doShare(Intent shareIntent) {
      // When you want to share set the share intent.
      mShareActionProvider.setShareIntent(shareIntent);
  } 
```

# php - 如果互联网不可用，计算机可以运行本地主机（MAMP 等）作为备份 - 并更新服务器数据库吗？

> ID：10362125
> 
> 赞同：1
> 
> 时间：2012-04-28T09:07:54.660
> 
> 标签：php, mysql, mamp

我一直在研究创建一个自定义的 mySQL 销售点系统，以便在多个商店和在线等之间有一个集中的库存水平数据库。

我看到的最大问题是互联网在实体店中退出的可能性不大。如果发生这种情况，是否可以设置 POS 系统运行该计算机上的本地 mySQL 数据库（使用 MAMP 或类似的东西），然后一旦互联网再次可用，自动同步数据库以更新销售和库存水平？

关于“如何在没有互联网的情况下访问实际的 POS 系统”，我在想当互联网可用时，POS 系统将在服务器上运行，然后当网络断开时，它将从文件中运行存储在机器上指向机器上的本地数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:24:10.357

是的，一个最小且可行的解决方案就是将所有 POS 数据输入本地以及远程数据库，然后它作为一种备份，以防中央数据库发生任何事情。

至于在中断后自动“修复”中央数据库，也许最好的方法是让中央系统从每个商店的本地数据库请求销售数据。如果工作流程是这样设置的，那么您实际上不必对互联网中断做任何“特别”的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:25:06.610

这里的问题显然是写入。您可以使用复制来始终拥有数据库的本地*可读*副本，但是在使用复制时拥有多个主服务器会很棘手。我没有使用 MySQL Cluster，但它可能是你需要的。

但是由于问题是写入，您可以将 POS 系统的写入部分实现为您发送消息的服务。当网络出现故障时，将消息排队并在在线时发送它们。

一个更简单的解决方案实际上可能是始终确保网络稳定性。设置一些移动 (GSM/3G) 连接以进行故障转移，甚至可能还设置标准 POTS 电话线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:50:36.187

[MySQL 主/从复制](http://dev.mysql.com/doc/refman/5.6/en/replication.html)似乎是合乎逻辑的方法。

您的 MAMP 代码直接作用于本地（从）数据库；当 MAMP 服务器可以访问主数据库时，数据库保持同步。如果 slave 无法访问 Internet，它仍然在本地工作；当互联网连接恢复时，它将再次与主服务器同步。

在数据库设计中稍加注意（特别是自动增量 pks），您可以运行多个本地/从属服务器，它们都有自己的本地存储数据，并且主服务器是所有存储的数据存储库。

# c# - 如何找到 Visual Studio 2010 可用的 EnvDTE.Comands 名称？

> ID：10362130
> 
> 赞同：1
> 
> 时间：2012-04-28T09:08:17.883
> 
> 标签：c#, visual-studio-2010, visual-studio-addins

我正在创建一个`Add-In`for `Visual Studio 2010`。使用这个插件，我想在用户输入编辑器或从中复制一些文本时添加一些额外的功能。

我在 Web 上进行了搜索，以了解 Visual Studio 执行哪些命令名称来为这些命令添加事件。但我没有找到真正有用的东西。我发现的只是一些例子，幸运的是我看到`copy-command`名字是*"Edit.Copy"*。

有没有办法从 Visual Studio 打印所有可用命令？任何有用的链接也将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:20:17.583

我终于设法使用以下代码打印命令：

```
private void EnumerateCommads()
{
    foreach (Command command in _applicationObject.Commands)
    {
        //print command
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T19:33:23.417

对于那些需要知道另一种无需代码的解决方案的人，您可以转到 Tools\Options\Environment\Keyboard

# asp.net - 使 datalist 或 listview 看起来像网格

> ID：10362131
> 
> 赞同：0
> 
> 时间：2012-04-28T09:08:17.887
> 
> 标签：asp.net, listview, grid, datalist

如何将 datalist 或 listview 项目列为网格而不是单个垂直列？我想要的是列表中的项目显示为网格，而不是一个项目低于另一个项目。我有一个从数据库中读取的员工照片列表，我想将它们放在一个网格中，这样我将利用空白空间并减少页面中的滚动，[就像亚马逊在此页面中所做的那样](http://www.amazon.com/s/ref=sr_nr_scat_172282_ln?rh=n%3A172282%2Ck%3Atv&keywords=tv&ie=UTF8&qid=1335589545&scn=172282&h=9c8869a5594999512c172f8eb18ce8e3e3ac62e9)。如何配置列表以显示为网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:57:00.220

将`RepeatColumn`属性设置为`2`或更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:18:14.467

```
#mygrid li {
    float: left;
    margin: 20px;
    width: 200px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:39:43.553

您可以创建如下：

```
<LayoutTemplate>
<table border="0" cellpadding="1">
<tr style="background-color:#E5E5FE">
<th align="left"><asp:LinkButton ID="lnkId" runat="server">Id</asp:LinkButton></th>
<th align="left"><asp:LinkButton ID="lnkName" runat="server">Name</asp:LinkButton></th>
<th align="left"><asp:LinkButton ID="lnkType" runat="server">Type</asp:LinkButton></th> 
```

<%#Eval("ID") %> <%#Eval("FirstName")+""+Eval("LastName") %> <%#Eval("ContactType") %> <%#Eval("ID ") %> <%#Eval("FirstName")+" "+ Eval("LastName") %> <%#Eval("ContactType") %>

# javascript - 对URIcomponent非utf-8字符进行编码并相应解码的正确方法是什么？

> ID：10362138
> 
> 赞同：3
> 
> 时间：2012-04-28T09:09:00.590
> 
> 标签：javascript, utf-8, urldecode, encodeuricomponent

我有一个 Javascript 小书签，用于`encodeURIcomponent`将当前页面的 URL 传递到服务器端，然后`urldecode`在服务器端使用来取回字符。

问题是，当编码字符不在 utf-8 中时（对于我来说它是 gb2312，但它可能是别的东西），并且当服务器执行 时`urldecode`，解码的字符变成正方形。显然，这不是编码之前的样子。

它是一个书签，输入可以是任何东西，所以我不能只在 js 中定义“编码为 gb2312”，或者在 php 脚本中定义“解码为 gb2312”。

那么，有没有正确的使用方法`encodeURIcomponent`，将字符编码与内容一起传递，然后解码可以选择正确的编码对其进行解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T02:49:38.990

使用`escape()`然后将字符转换为[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)，然后再将它们发送到服务器。

来自[MDN escape() 参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)：

> 字符的十六进制形式，其代码单元值为 0xFF 或更小，是两位转义序列：%xx。对于具有更大代码单元的字符，使用四位数格式 %uxxxx。

因此，很容易通过使用一个简单的语句将输出转换`escape()`为数字字符引用：`replace()`

```
escape(input_value).replace(/%u([0-9a-fA-F]{4})/g, '&#x$1;'); 
```

或者，如果您的服务器端语言仅支持十进制实体，请使用：

```
escape(input_value).replace(/%u([0-9a-fA-F]{4})/g, function(m0, m1) {
                return '&#' + parseInt(m1, 16) + ';';
}; 
```

**PHP 中的示例代码**

`client.html` [*（文件编码：GB2312）*]：

```
<html>
  <head>
    <meta charset="gb2312">
    <script>
    function processForm(form) {
        console.log('BEFORE:', form.test.value);
        form.test.value = escape(form.test.value).replace(/%u(\w{4})/g, function(m0, m1) {
            return '&#' + parseInt(m1, 16) + ';';
        });
        console.log('AFTER:', form.test.value);
        return true;
    }
    </script>
  </head>
  <body>
    <form method="post" action="server.php" onsubmit="return processForm(this);">
      <input type="text" name="test" value="确定">
      <input type="submit">
    </form>
  </body>
</html> 
```

`server.php`：

```
<?php
echo '<script>console.log("', 
     $_REQUEST['test'], ' --> ', 
     mb_decode_numericentity($_REQUEST['test'], array(0x80, 0xffff, 0, 0xffff), 'UTF-8'),
     '");</script>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:24:28.713

对于浏览器的编码，尤其是GB2312字符集，请先查看以下文档（中文）

*   [http://ued.taobao.com/blog/2011/08/26/encode-war/](http://ued.taobao.com/blog/2011/08/26/encode-war/)
*   [http://www.ruanyifeng.com/blog/2010/02/url_encoding.html](http://www.ruanyifeng.com/blog/2010/02/url_encoding.html)

对于您的情况，`%C8%B7%B6%A8`实际上是从 GB2312 形式生成的`'\u786e\u5b9a'`. 这通常发生在（旧版？）IE 和 FF 版本上，当用户直接在位置栏中输入汉字时，
~~*或者*您正在使用来自页面内容的非标准链接，该链接根本不执行 IRI 到 URI 编码，而只是呈现二进制字符串，例如`'/tag/\xc8\xb7\xb6\xa8'`（douban.com 曾经对标签有这种用法，现在他们在 UTF8 中使用正确的 URI 编码）。~~不太确定，因为无法在 Chrome 中重现，可能在 FF 和 IE 中测试，关于豆瓣的部分是正确的。

实际上，正确的输出`encodeURIComponent`应该是

```
> encodeURIComponent('%C8%B7%B6%A8')
  "%25C8%25B7%25B6%25A8" 
```

因此，在服务器端，当一个未加引号的字符串包含非 ascii 字节时，您最好将字符串保持原样，here `'%C8%B7%B6%A8'`。

此外，您*可以*签入客户端以`encodeURIComponent`再次应用包含`%XX`XX 大于的值`0x7F`。我不太确定这是否违反 RFC 2396。

写英文好累啊，不过还是要入乡随俗～

# asp.net-mvc - ASP MVC - 默认内容类型是否有任何常量？

> ID：10362140
> 
> 赞同：92
> 
> 时间：2012-04-28T09:09:22.317
> 
> 标签：asp.net-mvc, content-type

[所有标准内容类型](http://en.wikipedia.org/wiki/Internet_media_type)的框架中是否有一组常量？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-04-29T15:25:03.933

把它当作一个响亮的不，我写了我自己的。这就是星期天的目的。

```
///<summary>Used to denote the encoding necessary for files containing JavaScript source code. The alternative MIME type for this file type is text/javascript.</summary>
public const string ApplicationXJavascript = "application/x-javascript";

///<summary>24bit Linear PCM audio at 8-48kHz, 1-N channels; Defined in RFC 3190</summary>
public const string AudioL24 = "audio/L24";

///<summary>Adobe Flash files for example with the extension .swf</summary>
public const string ApplicationXShockwaveFlash = "application/x-shockwave-flash";

///<summary>Arbitrary binary data.[5] Generally speaking this type identifies files that are not associated with a specific application. Contrary to past assumptions by software packages such as Apache this is not a type that should be applied to unknown files. In such a case, a server or application should not indicate a content type, as it may be incorrect, but rather, should omit the type in order to allow the recipient to guess the type.[6]</summary>
public const string ApplicationOctetStream = "application/octet-stream";

///<summary>Atom feeds</summary>
public const string ApplicationAtomXml = "application/atom+xml";

///<summary>Cascading Style Sheets; Defined in RFC 2318</summary>
public const string TextCss = "text/css";

///<summary>commands; subtype resident in Gecko browsers like Firefox 3.5</summary>
public const string TextCmd = "text/cmd";

///<summary>Comma-separated values; Defined in RFC 4180</summary>
public const string TextCsv = "text/csv";

///<summary>deb (file format), a software package format used by the Debian project</summary>
public const string ApplicationXDeb = "application/x-deb";

///<summary>Defined in RFC 1847</summary>
public const string MultipartEncrypted = "multipart/encrypted";

///<summary>Defined in RFC 1847</summary>
public const string MultipartSigned = "multipart/signed";

///<summary>Defined in RFC 2616</summary>
public const string MessageHttp = "message/http";

///<summary>Defined in RFC 4735</summary>
public const string ModelExample = "model/example";

///<summary>device-independent document in DVI format</summary>
public const string ApplicationXDvi = "application/x-dvi";

///<summary>DTD files; Defined by RFC 3023</summary>
public const string ApplicationXmlDtd = "application/xml-dtd";

///<summary>ECMAScript/JavaScript; Defined in RFC 4329 (equivalent to application/ecmascript but with looser processing rules) It is not accepted in IE 8 or earlier - text/javascript is accepted but it is defined as obsolete in RFC 4329\. The "type" attribute of the <script> tag in HTML5 is optional and in practice omitting the media type of JavaScript programs is the most interoperable solution since all browsers have always assumed the correct default even before HTML5.</summary>
public const string ApplicationJavascript = "application/javascript";

///<summary>ECMAScript/JavaScript; Defined in RFC 4329 (equivalent to application/javascript but with stricter processing rules)</summary>
public const string ApplicationEcmascript = "application/ecmascript";

///<summary>EDI EDIFACT data; Defined in RFC 1767</summary>
public const string ApplicationEdifact = "application/EDIFACT";

///<summary>EDI X12 data; Defined in RFC 1767</summary>
public const string ApplicationEdiX12 = "application/EDI-X12";

///<summary>Email; Defined in RFC 2045 and RFC 2046</summary>
public const string MessagePartial = "message/partial";

///<summary>Email; EML files, MIME files, MHT files, MHTML files; Defined in RFC 2045 and RFC 2046</summary>
public const string MessageRfc822 = "message/rfc822";

///<summary>Extensible Markup Language; Defined in RFC 3023</summary>
public const string TextXml = "text/xml";

///<summary>Extensible Markup Language; Defined in RFC 3023</summary>
public const string ApplicationXml = "application/xml";

///<summary>Flash video (FLV files)</summary>
public const string VideoXFlv = "video/x-flv";

///<summary>GIF image; Defined in RFC 2045 and RFC 2046</summary>
public const string ImageGif = "image/gif";

///<summary>GoogleWebToolkit data</summary>
public const string TextXGwtRpc = "text/x-gwt-rpc";

///<summary>Gzip</summary>
public const string ApplicationXGzip = "application/x-gzip";

///<summary>HTML; Defined in RFC 2854</summary>
public const string TextHtml = "text/html";

///<summary>ICO image; Registered[9]</summary>
public const string ImageVndMicrosoftIcon = "image/vnd.microsoft.icon";

///<summary>IGS files, IGES files; Defined in RFC 2077</summary>
public const string ModelIges = "model/iges";

///<summary>IMDN Instant Message Disposition Notification; Defined in RFC 5438</summary>
public const string MessageImdnXml = "message/imdn+xml";

///<summary>JavaScript Object Notation JSON; Defined in RFC 4627</summary>
public const string ApplicationJson = "application/json";

///<summary>JavaScript Object Notation (JSON) Patch; Defined in RFC 6902</summary>
public const string ApplicationJsonPatch = "application/json-patch+json";

///<summary>JavaScript - Defined in and obsoleted by RFC 4329 in order to discourage its usage in favor of application/javascript. However,text/javascript is allowed in HTML 4 and 5 and, unlike application/javascript, has cross-browser support. The "type" attribute of the <script> tag in HTML5 is optional and there is no need to use it at all since all browsers have always assumed the correct default (even in HTML 4 where it was required by the specification).</summary>
[Obsolete]
public const string TextJavascript = "text/javascript";

///<summary>JPEG JFIF image; Associated with Internet Explorer; Listed in ms775147(v=vs.85) - Progressive JPEG, initiated before global browser support for progressive JPEGs (Microsoft and Firefox).</summary>
public const string ImagePjpeg = "image/pjpeg";

///<summary>JPEG JFIF image; Defined in RFC 2045 and RFC 2046</summary>
public const string ImageJpeg = "image/jpeg";

///<summary>jQuery template data</summary>
public const string TextXJqueryTmpl = "text/x-jquery-tmpl";

///<summary>KML files (e.g. for Google Earth)</summary>
public const string ApplicationVndGoogleEarthKmlXml = "application/vnd.google-earth.kml+xml";

///<summary>LaTeX files</summary>
public const string ApplicationXLatex = "application/x-latex";

///<summary>Matroska open media format</summary>
public const string VideoXMatroska = "video/x-matroska";

///<summary>Microsoft Excel 2007 files</summary>
public const string ApplicationVndOpenxmlformatsOfficedocumentSpreadsheetmlSheet = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";

///<summary>Microsoft Excel files</summary>
public const string ApplicationVndMsExcel = "application/vnd.ms-excel";

///<summary>Microsoft Powerpoint 2007 files</summary>
public const string ApplicationVndOpenxmlformatsOfficedocumentPresentationmlPresentation = "application/vnd.openxmlformats-officedocument.presentationml.presentation";

///<summary>Microsoft Powerpoint files</summary>
public const string ApplicationVndMsPowerpoint = "application/vnd.ms-powerpoint";

///<summary>Microsoft Word 2007 files</summary>
public const string ApplicationVndOpenxmlformatsOfficedocumentWordprocessingmlDocument = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";

///<summary>Microsoft Word files[15]</summary>
public const string ApplicationMsword = "application/msword";

///<summary>MIME Email; Defined in RFC 2045 and RFC 2046</summary>
public const string MultipartAlternative = "multipart/alternative";

///<summary>MIME Email; Defined in RFC 2045 and RFC 2046</summary>
public const string MultipartMixed = "multipart/mixed";

///<summary>MIME Email; Defined in RFC 2387 and used by MHTML (HTML mail)</summary>
public const string MultipartRelated = "multipart/related";

///<summary>MIME Webform; Defined in RFC 2388</summary>
public const string MultipartFormData = "multipart/form-data";

/// <summary>Body contains a URL-encoded query string as per RFC 1867</summary>
public const string ApplicationWwwFormUrlEncoded = "application/x-www-form-urlencoded";

///<summary>Mozilla XUL files</summary>
public const string ApplicationVndMozillaXulXml = "application/vnd.mozilla.xul+xml";

///<summary>MP3 or other MPEG audio; Defined in RFC 3003</summary>
public const string AudioMpeg = "audio/mpeg";

///<summary>MP4 audio</summary>
public const string AudioMp4 = "audio/mp4";

///<summary>MP4 video; Defined in RFC 4337</summary>
public const string VideoMp4 = "video/mp4";

///<summary>MPEG-1 video with multiplexed audio; Defined in RFC 2045 and RFC 2046</summary>
public const string VideoMpeg = "video/mpeg";

///<summary>MSH files, MESH files; Defined in RFC 2077, SILO files</summary>
public const string ModelMesh = "model/mesh";

///<summary>mulaw audio at 8 kHz, 1 channel; Defined in RFC 2046</summary>
public const string AudioBasic = "audio/basic";

///<summary>Ogg Theora or other video (with audio); Defined in RFC 5334</summary>
public const string VideoOgg = "video/ogg";

///<summary>Ogg Vorbis, Speex, Flac and other audio; Defined in RFC 5334</summary>
public const string AudioOgg = "audio/ogg";

///<summary>Ogg, a multimedia bitstream container format; Defined in RFC 5334</summary>
public const string ApplicationOgg = "application/ogg";

///<summary>OP</summary>
public const string ApplicationXopXml = "application/xop+xml";

///<summary>OpenDocument Graphics; Registered[14]</summary>
public const string ApplicationVndOasisOpendocumentGraphics = "application/vnd.oasis.opendocument.graphics";

///<summary>OpenDocument Presentation; Registered[13]</summary>
public const string ApplicationVndOasisOpendocumentPresentation = "application/vnd.oasis.opendocument.presentation";

///<summary>OpenDocument Spreadsheet; Registered[12]</summary>
public const string ApplicationVndOasisOpendocumentSpreadsheet = "application/vnd.oasis.opendocument.spreadsheet";

///<summary>OpenDocument Text; Registered[11]</summary>
public const string ApplicationVndOasisOpendocumentText = "application/vnd.oasis.opendocument.text";

///<summary>p12 files</summary>
public const string ApplicationXPkcs12 = "application/x-pkcs12";

///<summary>p7b and spc files</summary>
public const string ApplicationXPkcs7Certificates = "application/x-pkcs7-certificates";

///<summary>p7c files</summary>
public const string ApplicationXPkcs7Mime = "application/x-pkcs7-mime";

///<summary>p7r files</summary>
public const string ApplicationXPkcs7Certreqresp = "application/x-pkcs7-certreqresp";

///<summary>p7s files</summary>
public const string ApplicationXPkcs7Signature = "application/x-pkcs7-signature";

///<summary>Portable Document Format, PDF has been in use for document exchange on the Internet since 1993; Defined in RFC 3778</summary>
public const string ApplicationPdf = "application/pdf";

///<summary>Portable Network Graphics; Registered,[8] Defined in RFC 2083</summary>
public const string ImagePng = "image/png";

///<summary>PostScript; Defined in RFC 2046</summary>
public const string ApplicationPostscript = "application/postscript";

///<summary>QuickTime video; Registered[10]</summary>
public const string VideoQuicktime = "video/quicktime";

///<summary>RAR archive files</summary>
public const string ApplicationXRarCompressed = "application/x-rar-compressed";

///<summary>RealAudio; Documented in RealPlayer Customer Support Answer 2559</summary>
public const string AudioVndRnRealaudio = "audio/vnd.rn-realaudio";

///<summary>Resource Description Framework; Defined by RFC 3870</summary>
public const string ApplicationRdfXml = "application/rdf+xml";

///<summary>RSS feeds</summary>
public const string ApplicationRssXml = "application/rss+xml";

///<summary>SOAP; Defined by RFC 3902</summary>
public const string ApplicationSoapXml = "application/soap+xml";

///<summary>StuffIt archive files</summary>
public const string ApplicationXStuffit = "application/x-stuffit";

///<summary>SVG vector image; Defined in SVG Tiny 1.2 Specification Appendix M</summary>
public const string ImageSvgXml = "image/svg+xml";

///<summary>Tag Image File Format (only for Baseline TIFF); Defined in RFC 3302</summary>
public const string ImageTiff = "image/tiff";

///<summary>Tarball files</summary>
public const string ApplicationXTar = "application/x-tar";

///<summary>Textual data; Defined in RFC 2046 and RFC 3676</summary>
public const string TextPlain = "text/plain";

///<summary>TrueType Font No registered MIME type, but this is the most commonly used</summary>
public const string ApplicationXFontTtf = "application/x-font-ttf";

///<summary>vCard (contact information); Defined in RFC 6350</summary>
public const string TextVcard = "text/vcard";

///<summary>Vorbis encoded audio; Defined in RFC 5215</summary>
public const string AudioVorbis = "audio/vorbis";

///<summary>WAV audio; Defined in RFC 2361</summary>
public const string AudioVndWave = "audio/vnd.wave";

///<summary>Web Open Font Format; (candidate recommendation; use application/x-font-woff until standard is official)</summary>
public const string ApplicationFontWoff = "application/font-woff";

///<summary>WebM Matroska-based open media format</summary>
public const string VideoWebm = "video/webm";

///<summary>WebM open media format</summary>
public const string AudioWebm = "audio/webm";

///<summary>Windows Media Audio Redirector; Documented in Microsoft help page</summary>
public const string AudioXMsWax = "audio/x-ms-wax";

///<summary>Windows Media Audio; Documented in Microsoft KB 288102</summary>
public const string AudioXMsWma = "audio/x-ms-wma";

///<summary>Windows Media Video; Documented in Microsoft KB 288102</summary>
public const string VideoXMsWmv = "video/x-ms-wmv";

///<summary>WRL files, VRML files; Defined in RFC 2077</summary>
public const string ModelVrml = "model/vrml";

///<summary>X3D ISO standard for representing 3D computer graphics, X3D XML files</summary>
public const string ModelX3DXml = "model/x3d+xml";

///<summary>X3D ISO standard for representing 3D computer graphics, X3DB binary files</summary>
public const string ModelX3DBinary = "model/x3d+binary";

///<summary>X3D ISO standard for representing 3D computer graphics, X3DV VRML files</summary>
public const string ModelX3DVrml = "model/x3d+vrml";

///<summary>XHTML; Defined by RFC 3236</summary>
public const string ApplicationXhtmlXml = "application/xhtml+xml";

///<summary>ZIP archive files; Registered[7]</summary>
public const string ApplicationZip = "application/zip"; 
```

**更新**

今天偶然发现了这个伟大的资源。

[https://www.iana.org/assignments/media-types/media-types.xhtml](https://www.iana.org/assignments/media-types/media-types.xhtml)

**2020 年 3 月 22 日更新** 正如 Jon 和 James White 在评论中提到的那样，您可以查看：

```
System.Net.Mime.MediaTypeNames 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-06-19T17:08:00.377

You could use:

*   [System.Net.Mime.MediaTypeNames.Application](http://msdn.microsoft.com/en-us/library/system.net.mime.mediatypenames.application%28v=vs.110%29.aspx)
*   [System.Net.Mime.MediaTypeNames.Image](http://msdn.microsoft.com/en-us/library/system.net.mime.mediatypenames.image%28v=vs.110%29.aspx)
*   [System.Net.Mime.MediaTypeNames.Text](http://msdn.microsoft.com/en-us/library/system.net.mime.mediatypenames.text%28v=vs.110%29.aspx)

For example, `System.Net.Mime.MediaTypeNames.Image.Gif` is equal to `"image/gif"`.

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-01-09T06:38:15.413

以下是 .NET Framework 类库（又名基类库，BCL）中当前可用的完整列表`System.Net.Http.dll`：

1.  `System.Net.Mime.MediaTypeNames.Application.Octet` *用于* **应用程序/八位字节流**
2.  `System.Net.Mime.MediaTypeNames.Application.Pdf` *申请* **/pdf**
3.  `System.Net.Mime.MediaTypeNames.Application.Rtf` *申请* **/rtf**
4.  `System.Net.Mime.MediaTypeNames.Application.Soap` *用于* **应用程序/soap+xml**
5.  `System.Net.Mime.MediaTypeNames.Application.Zip` *用于* **应用程序/zip**
6.  `System.Net.Mime.MediaTypeNames.Image.Gif` ***图片/** *gif**
****   `System.Net.Mime.MediaTypeNames.Image.Jpeg` *用于* **图像/JPEG***   `System.Net.Mime.MediaTypeNames.Image.Tiff` ***图像/** *tiff******   `System.Net.Mime.MediaTypeNames.Text.Html` *对于* **文本/html***   `System.Net.Mime.MediaTypeNames.Text.Plain` *文本* **/纯文本***   `System.Net.Mime.MediaTypeNames.Text.RichText` *对于* **文本/富文本***   `System.Net.Mime.MediaTypeNames.Text.Xml` *对于* **文本/xml********

 ********更新[21 年 8 月 12 日]**：

`System.Net.Mime`命名空间中可用的新常量集是库的一部分`System.Net.Mail`。该库是 .NET v5 的一部分。

1.  MediaTypeNames.Application.Json
2.  MediaTypeNames.Application.Octet
3.  MediaTypeNames.Application.Pdf
4.  MediaTypeNames.Application.Rtf
5.  MediaTypeNames.Application.Soap
6.  MediaTypeNames.Application.Xml
7.  MediaTypeNames.Application.Zip
8.  MediaTypeNames.Image.Gif
9.  MediaTypeNames.Image.Jpeg
10.  MediaTypeNames.Image.Tiff
11.  MediaTypeNames.Text.Html
12.  MediaTypeNames.Text.Plain
13.  MediaTypeNames.Text.RichText
14.  MediaTypeNames.Text.Xml

**注意**：.NET v5*不是*.NET Framework 的新版本。相反，它是.NET Core v3.1 之后的[下一个主要版本。](https://docs.microsoft.com/en-us/dotnet/core/dotnet-five)[.NET 是 .NET Core 的新名称](https://en.wikipedia.org/wiki/.NET)。`Core`品牌已被删除。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-01-06T11:05:35.340

在新的 ASP.NET Core`MimeMapping`中可以使用文件名：

```
MimeMapping.GetMimeMapping("1.jpg") 
```

应该返回`image/jpeg`。

所有的映射都可以在[这里](https://github.com/Microsoft/referencesource/blob/master/System.Web/MimeMapping.cs#L101)找到，也可以添加你自己的（参见例如[这个](https://stackoverflow.com/a/28729705/1671558)答案）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-26T07:58:57.690

还请在下面的链接中查看这个惊人的解决方案（“**使用静态 MIME 类型映射**”部分）：

[https://www.ryadel.com/en/get-file-content-mime-type-from-extension-asp-net-mvc-core/](https://www.ryadel.com/en/get-file-content-mime-type-from-extension-asp-net-mvc-core/)

您可以像这样简单地使用它：

> var mineType= MimeTypeMap.GetMimeType(System.IO.Path.GetExtension(submitted));

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-30T19:38:15.653

如果有兴趣，这里是官方名单 [http://www.iana.org/assignments/media-types/media-types.xhtml](http://www.iana.org/assignments/media-types/media-types.xhtml)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-05T19:42:48.397

[https://www.nuget.org/packages/MimeTypesMap/](https://www.nuget.org/packages/MimeTypesMap/)是一个很棒的 NuGet 包。像这样使用它：

```
MimeTypesMap.GetMimeType("filename.jpeg"); // => image/jpeg 
```

或其他方式：

```
MimeTypesMap.GetExtension("image/jpeg"); // => jpeg 
```******

# facebook-credits - 如何更改应用程序 - 信用公司信息？

> ID：10362146
> 
> 赞同：1
> 
> 时间：2012-04-28T09:10:52.567
> 
> 标签：facebook-credits, credits

我需要更改 Facebook Credits 的公司信息，但我发现它是只读的，.. 我该怎么做？

# spring - java.lang.IllegalArgumentException 与 java 持久性 API

> ID：10362147
> 
> 赞同：-1
> 
> 时间：2012-04-28T09:10:52.787
> 
> 标签：spring, jpa

我得到了`java.lang.IllegalArgumentException`类似于下面给出的链接。为了解决它，我尝试将字段类型从整数更改为长。但我仍然得到：

```
Caused by: java.lang.IllegalArgumentException: Parameter value [5] was not matching type [com.buddhiedge.server.entity.StudyplanCategory] 
```

StudyplanCategory 是实体类。

该问题类似于以下链接中的问题。 [Hibernate - 参数值 [2011] 与类型 [java.lang.Integer] 不匹配。怎么解决？](https://stackoverflow.com/questions/6622882/hibernate-parameter-value-2011-was-not-matching-type-java-lang-integer-ho) 我的实体类是：

```
@JsonIgnoreProperties({ "studyplanCategoryList", "dropboxzipfile",
        "parentCategory", "createdDate", "updatedDate" })
@JsonPropertyOrder({ "id", "name", "status", "sptTutorialsList" })
@Entity
@Table(name = "studyplan_category", catalog = "buddhiedgeserver_db", schema = "", uniqueConstraints = { @UniqueConstraint(columnNames = { "dropboxzipfile" }) })
@NamedQueries({

        @NamedQuery(name = "StudyplanCategory.findSubStudyPlanById", query = "SELECT s FROM StudyplanCategory s WHERE s.parentCategory=:parentCategory order by updatedDate DESC")})

    public class StudyplanCategory implements Serializable {
        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        @Basic(optional = false)
        @NotNull
        @Column(name = "id", nullable = false)
        private Long id;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:49:49.323

看来您是`5`作为参数传递给查询的。如果要传递 ID 而不是实体，请将查询更改为：

```
WHERE s.parentCategory.id=:parentCategoryId 
```

# jquery - 如何防止离开页面，直到从 jquery ui 对话框接受答案

> ID：10362149
> 
> 赞同：0
> 
> 时间：2012-04-28T09:11:06.080
> 
> 标签：jquery, jquery-ui

我有这个代码：

```
$(window).bind('beforeunload', function () {

        $("#dialogsendnotifications").dialog('open');
    });

    $("#dialogsendnotifications").dialog({

        autoOpen: false,
        closeOnEscape: false,
        buttons: {
            "Yes": function () {
                $(this).dialog('close');
            },
            "No": function () {
                $(this).dialog('close');
            }
        }
    }); 
```

所以基本上它的作用是当用户试图离开时它会弹出yes no 对话框。问题是对话框出现了，但它在用户甚至可以选择一个按钮之前就离开了页面。

有人可以告诉我如何让它等到用户选择答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:13:18.570

你不能。该`onbeforeunload`事件非常非常严格。您所能做的就是返回一个字符串，然后*浏览器*将在其自己的对话框中使用该字符串。你根本不能做任何花哨的事情。

这是一个示例：[Live copy](http://jsbin.com/ubitew) | [来源](http://jsbin.com/ubitew/edit)

```
jQuery(function($) {

  $(window).bind("beforeunload", function(event) {
    return "This is the message you're allowed to provide";
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T14:59:36.487

谢谢你们。对我来说，这有帮助：

```
$(window).on('beforeunload', function(){
 return '';
}) 
```

但在我的例子中，`.each()`我的“beforeunload”函数中有一个循环（）。然后不要忘记在要返回值之前退出循环；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T09:13:14.470

返回 false 以阻止该操作，如下所示：

```
$(window).bind('beforeunload', function () {
    $("#dialogsendnotifications").dialog('open');
    return false;
}); 
```

# c# - 如何从富文本框将文本插入到 Word 文档中

> ID：10362152
> 
> 赞同：3
> 
> 时间：2012-04-28T09:11:30.773
> 
> 标签：c#, .net, ms-word, openxml

我的 c# 应用程序中有一个富文本框，它包含不同的文本行（一对多行）。我想获取这些行并将其插入到带有我想要的字体和字体大小的 Word 文档中。这就是它应该的样子。

> 观察：
> 
> *   富文本框中的第 1 行
> *   富文本框中的第 2 行
> *   富文本框中的第 3 行

我希望通过使用互操作库来实现这一点。

我需要一些示例代码，因为我是新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:26:07.690

您可以使用 OpenXML SDK 包：

[http://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

然后执行以下操作：

```
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing;

const string fileName = @"C:\YourFile.docx";
string dataToInsert = txtYourRichTextBox.Text;

using (var document = WordprocessingDocument.Open(fileName, true))
{
   var doc = document.MainDocumentPart.Document;
   document.Body.Append(dataToInsert);
   document.Save();
} 
```

# iphone - 外键约束不通过程序工作。但与终端一起工作

> ID：10362153
> 
> 赞同：2
> 
> 时间：2012-04-28T09:11:32.207
> 
> 标签：iphone, sqlite, foreign-keys

我的表中有外键约束，但是当我使用终端插入数据时它工作正常，但是当我在 xcode 项目中这样做时，它不工作可能是什么问题。如何通过程序启用 pragma foreign_keys = ON。我正在使用下面的代码进行插入，但我认为未启用外键。告诉我如何通过程序启用外键。

```
+(BOOL)insertEmployee:(int)din :(NSString*)name{

NSArray *arrDocPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *strDestPath = [NSString stringWithFormat:@"%@/samplepillbox1.sqlite",[arrDocPath objectAtIndex:0]];

sqlite3 *dbEmployee;
if(sqlite3_open([strDestPath UTF8String], &dbEmployee)==SQLITE_OK)
{

    //NSString *insertQuery = [NSString stringWithFormat:@"insert into maintable_master(din,brand_name) values(%d,'%@')",din,name];
    //NSString *insertQuery = [NSString stringWithFormat:@"insert into doctor_master(din,firstname) values(%d,'%@')",din,name];
    NSString *insertQuery = [NSString stringWithFormat:@"insert into schedule_master(din,start_date) values(%d,'%@')",din,name];
    void *v;
    char *errmsg;
    if(sqlite3_exec(dbEmployee, [insertQuery UTF8String], 0, v, &errmsg)==SQLITE_OK)
    {
        NSLog(@"inserted successfully");
        return YES;
    }
}
return NO;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T09:44:10.680

您应该能够像运行更标准的 SQL 语句一样设置 pragma。通常，您在打开数据库连接后立即设置 pragma。

所以你的代码应该看起来像这样：

```
// 1\. open the connection
...

// 2\. set the pragma
if (sqlite3_exec(dbEmployee, @"PRAGMA foreign_keys = ON", 0, v, &errmsg) != SQLITE_OK)
{
    NSLog(@"failed to set the foreign_key pragma");
    return -1;
} 
```

# windows-phone-7 - Windows Phone 上的 Azure ACS 令牌续订

> ID：10362161
> 
> 赞同：1
> 
> 时间：2012-04-28T09:13:15.137
> 
> 标签：windows-phone-7, azure, acs

我正在使用适用于 Windows Phone 的 Windows Azure 工具包在访问控制服务的帮助下授权用户。在您的应用程序中更新会话令牌的假定方法是什么？似乎网络上的所有样本都要求用户每 10 分钟登录一次（这是默认的令牌到期时间。将其增加到允许的最大 24 小时并不能真正解决问题 - 我只想登录一次）。

在用户明确撤销对我的应用程序的访问之前，是否可以检索仍然有效的令牌？然后我可以将此令牌存储在手机上，并使用它代表用户授权服务调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:37:03.877

目前 ACS 不提供更新令牌的机制。解决方法是使令牌寿命更长（增加门户上的令牌寿命）。但如果您使用像 Live ID 这样的身份提供者，用户可以选择记住密码。这样他就不必每次尝试登录时都手动输入密码。您的程序可以使这个过程更加透明。例如，尝试连接到您的服务。如果服务检测到令牌已过期，您的 Windows Phone 应用程序会自动打开浏览器并要求用户再次登录并获取新令牌。如果用户选择记住密码，他会看到浏览器窗口短暂地出现，然后没有任何动作就消失了。

最好的祝福，

明旭。

# java - 在 Eclipse 中找不到 Maven 选项

> ID：10362166
> 
> 赞同：22
> 
> 时间：2012-04-28T09:13:40.817
> 
> 标签：java, eclipse, maven, eclipse-indigo

我在 Eclipse Indigo 中，并且已经安装了 m2eclipse 插件。我在 Eclipse Helios 中看到右键菜单中有一个选项 Maven，当我单击一个项目时，但现在这个选项不存在。

我已经从两个市场安装了 Maven，也从在 Eclipse 的安装新软件选项中添加站点（帮助->安装新软件）。

我做错了什么。

这个问题之前在 SO 中被问过，但我尝试了那里提供的解决方案。

这个选项真的不存在吗？我想要的是启用 Eclipse 的动态 Web 项目的 Maven 依赖管理。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-28T09:19:53.213

您必须右键单击项目，然后选择`Configure`→`Convert to Maven project`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-16T10:39:46.603

右键单击项目 --> 配置 --> 转换为 Maven 项目。

它将显示 Maven 相关选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T09:42:12.410

一种方法是将项目作为 Maven 项目导入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-18T09:25:34.430

如果您尝试在 Eclipse 旧版本中安装，请使用**YOXOS Marketplace - by EclipseSource**。在市场中搜索“Maven”。您将获得Sonatype 提供的**Eclipse 的 Maven 集成。**使用它来安装。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T05:35:17.543

安装 m2eclipse 插件后，转到 Window -> Preferences。检查“Maven”是否列在左侧面板列表中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-05T15:51:18.533

这发生在我身上，因为我将父文件夹作为项目导入。所以我所有的项目都是这个父文件夹的子目录，而不是它们本身的项目。从工作区中（仅）删除它们并将它们作为单独的项目重新导入后，maven 工作正常。

# android - Facebook android 贴在墙上权限错误

> ID：10362167
> 
> 赞同：0
> 
> 时间：2012-04-28T09:13:46.370
> 
> 标签：android, facebook

我想在墙上发一条消息，但不弹出对话框我试过了

```
parameters.putString("description", "test test test")
response = mFacebook.request("me/feed", parameters, "feed"); 
```

或者

```
response = mFacebook.request("me/feed", parameters, "stream.publish"); 
```

我得到一个错误

```
Got response: `{"error":{"message":"Unsupported method, feed","type":"Exception"}}` 
```

下面发布的代码是如何在没有 dailog 的情况下在墙上发布消息以解决问题，您需要在创建 facebook 对象时添加权限，请参见下文

***最终字符串 FACEBOOK_PERMISSION = "publish_stream"; mPermissions = new String[]{FACEBOOK_PERMISSION};***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:30:31.917

使用此代码

```
 public void postOnWall(String msg) {
    Log.d("Tests", "Testing graph API wall post");
     try {
            String response = facebook.request("me");
            Bundle parameters = new Bundle();
            parameters.putString("message", msg);
            parameters.putString("description", "test test test");
            response = facebook.request("me/feed", parameters, 
                    "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("") || 
                    response.equals("false")) {
               Log.v("Error", "Blank response");
            }

     } catch(Exception e) {
         e.printStackTrace();
     } 
} 
```

# asp.net - 使用 HTML Agility Pack 从 Javascript 中提取 lang 和 lat

> ID：10362170
> 
> 赞同：0
> 
> 时间：2012-04-28T09:13:54.917
> 
> 标签：asp.net, regex, html-agility-pack

我想使用 HTML 敏捷包从以下 html 中提取 Long 和 Lat：

```
<script type="text/javascript">
  var map = new google.maps.Map($("canvas"), {zoom : 14, mapTypeControl : false, draggable: true, scrollwheel : false, mapTypeId : google.maps.MapTypeId.HYBRID, center : new google.maps.LatLng(45.4623, -77.5425)});
</script> 
```

即，我需要填充 2 个单独的变量，一个为 45.4623，另一个为 -77.5425

有人可以帮忙吗？我的正则表达式技能也不是很好。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:23:33.700

在不了解网站的情况下，很难说出如何匹配。但是，这可能会奏效。

```
HtmlDocument doc = new HtmlDocument();
//Load your website...
//doc.Load(....
HtmlNode scriptNode = doc.DocumentNode.SelectSingleNode("//script[contains(text(),'google.maps.Map']");
Match match=      Regex.Match(scriptNode.InnerText, "\\.LatLng\\((?<Lat>-?[\\d.]+), (?<Lng>-?[\\d.]+)\\)");
string latitude = match.Groups["Lat"].Value;
string longitude = match.Groups["Lng"].Value; 
```

仅当您所使用的脚本标签是第一个包含 text 的标签时才有效`google.maps.Map`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:26:45.383

HtmlAgilityPack 非常适合解析尖括号节点，但它对节点内的 JavaScript 语法一无所知。您最好在“LatLng\(([^\)]+)\)”上运行正则表达式匹配并提取 Match.Groups[1].Value。

# http - SPDY 与通过保持活动连接的 http 多路复用有什么不同吗

> ID：10362171
> 
> 赞同：17
> 
> 时间：2012-04-28T09:14:04.303
> 
> 标签：http, firefox, keep-alive, spdy

HTTP 1.1 支持保持活动连接，在发送“Connection: close”之前连接不会关闭。

那么，如果浏览器，在这种情况下firefox启用了network.http.pipelining，并且network.http.pipelining.maxrequests增加了到底是不是同样的效果？

我知道这些设置被禁用，因为对于某些网站，这可能会增加负载，但我认为一个简单的 http 标头标志可以告诉浏览器可以使用多路复用，这个问题可以更容易地解决。

更改浏览器中的默认设置会不会比发明一种增加复杂性的新协议更容易，尤其是在 http 服务器中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-28T09:57:03.163

SPDY 具有许多超出 HTTP 流水线所能提供的优势，这些优势在[SPDY 白皮书](http://dev.chromium.org/spdy/spdy-whitepaper)中进行了描述：

1.  使用流水线，服务器仍然必须按照请求的顺序一次返回一个响应。如果客户端在静态资源之前请求动态生成的资源，这可能是一个问题：在动态生成的资源生成并发送之前，服务器无法发送任何“简单”静态响应。使用 SPDY，响应可以在生成时无序或并行返回，从而减少接收所有资源的总时间。
2.  正如您在问题中指出的那样，并非所有服务器都能够处理流水线：它不仅仅是负载，当客户端请求流水线时，某些服务器实际上表现不正确。使用标头来表明可以进行流水线操作为时已晚，无法获得最大收益：此时您已经收到第一个响应，因此虽然您可以在未来的连接中使用它，但对于这个来说已经太晚了。
3.  SPDY 使用特定于该任务的算法压缩标头（有状态并了解 HTTP 标头中的正常内容）；虽然是的，SSL 已经包含压缩，只是用 deflate 压缩它们效率不高。大多数 HTTP 请求没有正文，只有一个简短的 GET 行，因此标头实际上构成了整个请求：您可以获得的任何压缩都是一种改进。与其标题相比，许多响应也很小。
4.  SPDY 允许服务器在没有客户端请求的情况下发送回额外的响应。例如，在客户端有机会接收和解析 HTML 以确定样式表 URL 之前，服务器可能会开始将页面的 CSS 与原始 HTML 一起发回。通过消除客户端在请求呈现页面所需的其他资源之前实际解析 HTML 的需要，这可以进一步加快页面加载速度。它还支持此功能的带宽较少的版本，它可以“提示”可能需要哪些资源，并允许客户端决定：例如，这允许不关心图像的客户端不打扰请求它们，但是想要显示图像的客户端仍然可以使用给定的 URL 请求图像，而无需等待 HTML。
5.  还有其他事情：请参阅陈伟霆的回答以了解更多信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T06:04:41.367

*   HTTP 流水线在 HTTP 事务级别易受行头阻塞 ( [http://en.wikipedia.org/wiki/Head-of-line_blocking](http://en.wikipedia.org/wiki/Head-of-line_blocking) ) 的影响，而 SPDY 由于其使用而在传输级别仅具有行头阻塞的多路复用。
*   HTTP 流水线存在可部署性问题。请参阅[https://datatracker.ietf.org/doc/html/draft-nottingham-http-pipeline-01](https://datatracker.ietf.org/doc/html/draft-nottingham-http-pipeline-01)，其中描述了许多不同的解决方法和启发式方法来缓解这种情况。在野外部署的 SPDY 没有这个问题，因为它通常使用 NPN（[http://technotes.googlecode.com/git/nextprotoneg.html](http://technotes.googlecode.com/git/nextprotoneg.html)）通过 SSL（端口 443）部署以协商 SPDY 支持。SSL 是关键，因为它可以防止中介干扰。
*   SPDY 具有标头压缩功能。请参阅[http://dev.chromium.org/spdy/spdy-whitepaper](http://dev.chromium.org/spdy/spdy-whitepaper)，其中讨论了标头压缩优势的一些基准测试结果。现在，注意到带宽越来越不是问题是有用的（参见[http://www.belshe.com/2010/05/24/more-bandwidth-doesnt-matter-much/](http://www.belshe.com/2010/05/24/more-bandwidth-doesnt-matter-much/)），但它也很有用请记住，带宽仍然是移动设备的关键。查看[https://developers.google.com/speed/articles/spdy-for-mobile](https://developers.google.com/speed/articles/spdy-for-mobile)，它显示了 SPDY 对移动设备的好处。
*   SPDY 支持服务器推送等功能。请参阅[http://dev.chromium.org/spdy/spdy-best-practices](http://dev.chromium.org/spdy/spdy-best-practices)以了解使用服务器推送来提高内容的可缓存性并仍然减少往返的方法。
*   HTTP 流水线具有不明确的失败语义。当服务器关闭连接时，如何知道哪些请求已成功处理？这是不允许通过管道连接进行 POST 和其他非幂等请求的主要原因。SPDY 提供语义来取消同一连接上的各个流，并且还有一个 GOAWAY 帧，指示要成功处理的最后一个流。
*   HTTP 流水线在允许深度流水线方面存在困难，通常是由于中介。这（除了许多其他原因，如 HoL 阻塞）意味着您仍然需要利用多个 TCP 连接来实现最大并行化。使用多个 TCP 连接意味着无法共享拥塞控制信息，无法共享压缩上下文（就像 SPDY 对标头所做的那样），对 Internet 来说更糟（对中介和服务器来说成本更高）。

我可以继续讨论 HTTP 流水线与 SPDY。但我建议只是阅读 SPDY。查看[http://dev.chromium.org/spdy以及我们在](http://dev.chromium.org/spdy)[http://www.youtube.com/watch?v=TNBkxA313kk&list=PLE0E03DF19D90B5F4&index=2&feature=plpp_video](http://www.youtube.com/watch?v=TNBkxA313kk&list=PLE0E03DF19D90B5F4&index=2&feature=plpp_video)上关于 SPDY 的技术讲座。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T08:33:36.973

请参阅[HTTP 管道和 HTTP 多路复用与 SPDY 之间的区别](https://stackoverflow.com/questions/10480122/difference-between-http-pipeling-and-http-multiplexing-with-spdy)

# java - 安卓。TextView 中的文本太小

> ID：10362172
> 
> 赞同：1
> 
> 时间：2012-04-28T09:14:21.520
> 
> 标签：java, android, layout, text, size

我遵循 Android 指南并以“sp”单位设置文本尺寸。在我用于 ListView 行的布局之一中，所有 TextView 大小都设置为 8sp 或 12sp。我在模拟器中使用所有可能的屏幕尺寸测试了该应用程序，一切顺利。但是一些用户（使用 Galaxy Ace 和 ZTE Blade）说 ListView 中的文本太小（每个字符几个像素）。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:21:22.620

阅读这篇文章[Android 上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

个人使用“dp”单位；更一致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:27:40.533

基本上你让用户在使用 SP 时选择字体大小。这本身并不是一件坏事，但是当设备向 API 报告小尺寸时，它可能会导致意想不到的结果（因为用户实际上选择了小文本尺寸，或者设备软件中的错误）。

如果可能，尝试增加单位字体大小以找出用户在其设备上使用的字体大小。我的猜测是它设置得非常小。如果您无法访问我会坚持使用 DP 的设备。

# java - 使用 JFileChooser 在 JPanel 中加载图像

> ID：10362173
> 
> 赞同：1
> 
> 时间：2012-04-28T09:14:26.223
> 
> 标签：java, swing, jlabel, jfilechooser, imageicon

我正在尝试将图像加载到`JPanel`using 中`JFileChooser`。但是当我尝试运行程序并加载选定的图像时，`JPanel`. 我在这里附上源代码片段：

```
JFileChooser fileChooser = new JFileChooser();
fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);  
FileFilter filter = new FileNameExtensionFilter("Image files","jpeg","jpg");  
fileChooser.setFileFilter(filter);  
int result = fileChooser.showOpenDialog(null);    
if(result == fileChooser.APPROVE_OPTION){  
imgFile = fileChooser.getSelectedFile();//imgFile is File type    
try{  
    myPicture = ImageIO.read(imgFile);//myPicture is BufferedImage  
    JLabel picLabel = new JLabel(new ImageIcon( myPicture )) ;  
    imagePanel.add( picLabel );  
    imagePanel.repaint();  
    System.out.println("You have selected "+imgFile);  
    }catch(Exception e){  
         e.printStackTrace();  
    }  
    }  

} 
```

任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:33:40.400

> 问题是我在我的框架中添加了两个面板。

您可以将您正在做的事情与这个使用两个面板的完整[示例](https://stackoverflow.com/a/4054307/230513)进行比较：左侧的文件选择器和右侧的显示面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:28:14.350

我想这可能会帮助你...

```
Object selectedItem = jComboBox14.getSelectedItem(); 
ImageIcon picturetoInsert = new ImageIcon(selectedItem.toString()); 
JLabel label = new JLabel("", picturetoInsert, JLabel.CENTER); 
JPanel panel = new JPanel(new GridLayout(1, 1));
panel.add(label, BorderLayout.CENTER); 
jInternalFrame22.getContentPane(); 
jInternalFrame22.setContentPane(panel); 
jInternalFrame22.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:28:01.807

这可能有几个原因。你可以试试

```
imagePanel.invalidate() 
```

在重绘调用之前强制它重绘。

或者可能标签太小并且需要调整大小，因为之前可能没有图像。你可以尝试调用

```
frame.pack(); 
```

方法来让框架重新计算其组件大小。

或者您可以尝试强制标签的大小（设置其最小大小）以确保它有足够的空间来显示图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T09:22:15.103

你为什么不尝试使用油漆组件？

```
class imagePanel extends JPanel
{ 
  BufferedImage image;
  public void paintComponent(Graphics g)
  {
    super.paintComponent(g);
    if(image != null)
    {
      g.drawImage(image, 0, 0, this);
    }
  }
} 
```

# c# - 用于打印表达式的库

> ID：10362205
> 
> 赞同：2
> 
> 时间：2012-04-28T09:21:16.053
> 
> 标签：c#, expression-trees

我正在寻找提供表达式打印功能的库（从转换为表达式树的 lambdas）。换句话说，它应该做与解析示例类似的工作[，](http://msdn.microsoft.com/en-us/library/bb397951.aspx)但显然应该更完整。有人知道这样的图书馆吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T10:42:50.520

如果您想要表达式的一些文本表示并且您不关心它的外观，您可以使用`ToString()`. 所有[`Expression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions)类型都覆盖此方法。

例如，对于简单表达式`num => num < 5`，`ToString()`返回`num => (num < 5)`。但是对于更复杂的表达式，它看起来不再像 C# 代码了。例如，对于`num => num < Math.Pow(5,5)`，它返回`num => (Convert(num) < Pow(5, 5))`。

# c# - StandardOutput 流上已在进行异步读取操作的异常

> ID：10362207
> 
> 赞同：5
> 
> 时间：2012-04-28T09:21:36.490
> 
> 标签：c#, multithreading, asynchronous, blocking, redirectstandardoutput

我正在尝试使用 C# 来控制命令行应用程序背景，可以在此处下载：[http ://www.ti.com/litv/zip/spmc015b](http://www.ti.com/litv/zip/spmc015b)

这是一个电机电压控制的应用程序，当我进入应用程序时，例如“b.exe -c 1”，控制台似乎是一种阻塞模型。此应用程序中的每个命令都以“#”符号开头。在这里查看图片：

[http://i46.tinypic.com/zx5edv.jpg](http://i46.tinypic.com/zx5edv.jpg)

我想做的是，使用 StandardInput.WriteLine("stat vout"); 来测量电压。这将向控制台后台发送“stat vout”命令并理想地返回电压值。在这张图片中，它返回了一些帮助提示。由于这段时间，它仍然处于阻塞模式。

我想用 StandardOutput.ReadLine(); 获取返回消息 但失败了。如果 ReadToEnd() 则我的程序被冻结，因为此应用程序永远不会返回到阻塞的标准控制台。

当我尝试 BeginOutputReadLine(); OutputDataReceived 事件可以真正获取控制台返回的消息，如“stat [vout|vbus|fault”的图片。但它仅限于我的单线程程序。

我目前的情况是，我在 WinForms 中使用 System.Timers.Timers 并且每一秒都会发送一个“stat vout2”命令来读取电压，并希望得到返回值。

但是 System.Timers.Timers 是异步的，所以当我在这个 Timers 线程中调用 BeginOutputReadLine() 时，它提示“已在流上启动异步读取操作”。同时，正如我在上面所展示的，我不能使用像 ReadLine() 这样的同步方法来获取值。

那我现在该怎么办？我真的需要在多线程模式下运行这个命令行应用程序。

非常感谢，祝大家周末愉快。

--CST 4 月 28 日 19:18 更新这里是相关的源代码：

WinFroms 按钮之一将 Start() SystemClock 类，然后每秒执行一次 Timing.Measuring()。TimingController 类会根据 SystemClock 在 1 秒内同时调用 GetVoltage() 和 GetCurrent() 来测量电压和电流。

在测量类中， StandardInput.WriteLine("stat vout2"); 从控制台应用程序和 StandardInput.WriteLine("stat cur"); 获取电压 得到电流。由于 StandardOutput 不起作用，他们都使用 BeginOutputReadLine() 来获得结果。

我使用 isOutputObtained 标志来指示数据是否返回。每次阅读完成时，我都会调用 CancelOutputRead(); 取消异步读取。

但它仍然给我“标准输出流上的异步读取操作已经在进行中”的错误异常

```
public class SystemClock
{
    TimingController Timing = new TimingController();
    private Timer TimerSystemClock;

    public SystemClock()
    {
        TimerSystemClock = new Timer();
        TimerSystemClock.Interval = 1000;
        TimerSystemClock.AutoReset = true;
        TimerSystemClock.Elapsed += new ElapsedEventHandler(TimerSystemClock_Elapsed);
        TimerSystemClock.Enabled = false;
        Timing.ClockInstance = this;
    }

    public void Start()
    {
        TimerSystemClock.Enabled = true;
    }

    void TimerSystemClock_Elapsed(object sender, ElapsedEventArgs e)
    {
        Timing.Measuring();
    }
}

public class TimingController
{
    // Get singleton of Measurement Class
    Measurement Measure = Measurement.GetInstance();       

    public SystemClock ClockInstance
    {
        get { return Clock; }
        set { Clock = value; }
    }

    private void Measuring()
    {
        CurrentVoltage = Measure.GetVoltage();
        CurrentCurrent = Measure.GetCurrent();
    }
}

public sealed class Measurement
{
    // Singleton
    public static readonly Measurement instance = new Measurement();
    public static Measurement GetInstance()
    {
        return instance;
    }

    private Process ProcMeasuring = new Process();
    double measureValue
    bool isOutputObtained;

    private Measurement()
    {
        ProcMeasuring.StartInfo.FileName = "b.exe";
        ProcMeasuring.StartInfo.Arguments = "-c 1";
        ProcMeasuring.StartInfo.WorkingDirectory = Directory.GetCurrentDirectory();
        ProcMeasuring.StartInfo.UseShellExecute = false;
        ProcMeasuring.StartInfo.RedirectStandardInput = true;
        ProcMeasuring.StartInfo.RedirectStandardOutput = true;
        ProcMeasuring.StartInfo.RedirectStandardError = true;
        ProcMeasuring.StartInfo.CreateNoWindow = true;
        ProcMeasuring.OutputDataReceived += new DataReceivedEventHandler(MeasurementOutputHandler);
    }

    public double GetVoltage(Machine machine)
    {
        isOutputObtained = false;

        ProcMeasuring.StandardInput.WriteLine("stat vout2");
        ProcMeasuring.BeginOutputReadLine();

        while (!isOutputObtained)
        {
            isOutputObtained = true;
        }

        return measureValue;
    }

    public double GetCurrent(Machine machine)
    {
        isOutputObtained = false;

        ProcMeasuring.StandardInput.WriteLine("stat cur");
        ProcMeasuring.BeginOutputReadLine();

        while (!isOutputObtained)
        {
            isOutputObtained = true;
        }

        return measureValue;
    }

    private void MeasurementOutputHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {
        if (!String.IsNullOrEmpty(outLine.Data) && (outLine.Data != "# "))
        {                
            measureCurrentValue = Convert.ToDouble(outLine.Data);
            isOutputObtained = true;

            ProcMeasuring.CancelOutputRead();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:11:08.413

我认为你有两个选择。

如果因为前一个样本花费的时间太长而错过了一个样本是可以的，那么设置一个标志以指示您已经在采样。

```
public class TimingController  
{  
    // Get singleton of Measurement Class  
    Measurement Measure = Measurement.GetInstance();         

    bool isMeasuring = false;

    public SystemClock ClockInstance  
    {  
        get { return Clock; }  
        set { Clock = value; }  
    }  

    private void Measuring()  
    {  
        if(isMeasuring) return;

        isMeasuring = true;
        CurrentVoltage = Measure.GetVoltage();  
        CurrentCurrent = Measure.GetCurrent();  
        isMeasuring = false;
    }  
} 
```

如果错过一个间隔是不行的，您可以尝试为每个调用创建一个新的进程对象，而不是重用现有的进程。如果命令需要很长时间才能完成，这可能会产生很多孩子。

# javascript - jQuery / Html 表单

> ID：10362212
> 
> 赞同：0
> 
> 时间：2012-04-28T09:22:11.310
> 
> 标签：javascript, jquery, html

到了混乱的地步

我正在创建几个输入元素和一个搜索按钮。从以前使用 HTML 开始，我相信我应该创建一个并包含我的元素和

但是除了发送到 javascript 以在谷歌地图中显示正确的位置之外，数据不会被发送到任何地方。

我设法使自己感到困惑；我需要一个元素来包含和 s 吗？问题是当我按下页面重新加载的测试或搜索按钮时。

我不希望页面重新加载。我不让这种情况发生的唯一方法是删除元素，这感觉不对，如果可能的话，我担心使用良好的做法。

这是我的代码：

```
 <form id="maps_form">
         <fieldset id="search_maps">
           <label for="marker">Search Shop: </label>
    <input name="searchName" id="searchName" type="text" placeholder="Enter Shop Name">

         </fieldset>
         <fieldset id="map_buttons">
            <button id="test"> test</button>
                <button id="searchSomething">Search</button>
          </fieldset> 
    </form> 
```

我觉得，在学习这个 javascript、浸入 jquery 和学习 xml 的同时，我忘记了 html 的基础知识：s 这通常是在学习新语言时失去联系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:28:25.753

如果您的单击/提交处理程序未返回 false，该页面将重新加载。因此，如果出现以下情况，页面将刷新：

1.  如果您的 Javascript 侦听器未正确注册
2.  您的 Javascript 处理程序返回 true
3.  您的 Javascript 处理程序导致错误（检查开发控制台是否有错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:31:21.730

```
$("#maps_form").submit(function () {
    // do stuff

    return false; // Don't submit the form
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:41:36.937

永远不要那样做！如果返回 false 后的操作过多，则不会阻止转到下一页。

```
$("#maps_form").submit(function () {

    // do stuff

    return false; // Don't submit the form
}); 
```

这是正确的形式：

```
$("#maps_form").submit(function (event) {
    event.preventDefault();

    ... 
}); 
```

# c++ - 如何通知我该窗口已激活？

> ID：10362215
> 
> 赞同：2
> 
> 时间：2012-04-28T09:22:59.613
> 
> 标签：c++, events, embedded, windows-mobile

我正在用 eVC++ 开发一个应用程序。在 MFC 中 OnInitDialog() 表示您的页面正在初始化。我希望每次激活我的页面时都有一个事件通知我。那是什么活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:27:53.817

您应该处理消息[WM_SETFOCUS](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646283%28v=vs.85%29.aspx)

**编辑：**

或[WM_ACTIVATE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646274%28v=vs.85%29.aspx)

或覆盖方法[OnSetActive()](http://msdn.microsoft.com/en-US/library/5zd196y3%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:34:50.947

按页面是什么意思。如果您在谈论 Windows，则 MFC 中有一个名为**CWnd::OnActivate的函数。**

# android - 链接天气小部件

> ID：10362219
> 
> 赞同：0
> 
> 时间：2012-04-28T09:23:15.443
> 
> 标签：android

我想将天气小部件与我的应用程序链接起来。首先我想将该图标放在我的应用程序的右上角。我应该怎么做。我在 setfeaturedrawableresource 的帮助下尝试这个，但它不起作用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:51:15.503

你可以在这里写下你的解决方案，让其他人看到。

# java - 样式化热情图节点和连接

> ID：10362220
> 
> 赞同：2
> 
> 时间：2012-04-28T09:23:27.830
> 
> 标签：java, eclipse-rcp, zest

我希望更改节点和连接的一些视觉属性。它可以做得更好吗？我发现视觉信息应用于从`org.eclipse.zest.core.viewers.GraphViewer.getFactory()`. 一共有三个工厂，都放在内部包装中`org.eclipse.zest.core.viewers.internal`。

`org.eclipse.zest.core.viewers.GraphViewer.getFactory()`覆盖并返回执行所有必要样式操作的自己的工厂是一种好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:24:36.427

有界面`org.eclipse.zest.core.viewers.ISelfStyleProvider`可以解决我的问题，而无需侵入热情的内部结构！

# linux - 如果数据在 Device::SerialPort 上可用，则在 Perl 中进行测试

> ID：10362222
> 
> 赞同：2
> 
> 时间：2012-04-28T09:23:48.100
> 
> 标签：linux, perl, serial-port, device

我编写了一个从串行端口读取数据的 Perl 脚本。

```
use Device::SerialPort;
$PortObj = new Device::SerialPort ($PortName, $quiet, $lockfile);
$PortObj->read_const_time( 500 ); # timeout waiting for data after 500ms
... 
```

主循环尝试从串口读取数据：

```
while ( 1 ) {
  ( $count, $data ) = $PortObj->read( $frameLength );
  process_my_data( $data );
  do_something_entirely_different_that_needs_being_done;
} 
```

但是我不想让 $PortObj->read 超时（这会消耗很多时间），而是希望能够测试缓冲区中是否有数据，这样我就可以加快循环速度：

```
while ( 1 ) {
  if ( test_serial_data_available ) { ( $count, $data ) = $PortObj->read( $frameLength ); }
  do_something_entirely_different_that_needs_being_done;
} 
```

我可以测试串行缓冲区的数据可用性吗？

***EDIT1：***我今天早上一直在重写问题以使用串行设备作为文件句柄并且读取数据有效，但它仍然阻塞了循环。这可能会打开新的选项来检查缓冲区中的可用数据。在伪 Perl 中：

```
use Symbol qw( gensym );
my $handle = gensym();
my $PortObj = tie( *$handle, "Device::SerialPort", $PortName );

while ( 1 ) {
  my $frameData;
  if ( test_serial_data_available ) { my $readLength = read( $handle , $frameData , $frameLength ); }
  do_something_entirely_different_that_needs_being_done;
} 
```

所以我的问题是：应该是什么`test_serial_data_available`样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:29:20.710

由于您有一个文件句柄，因此您可以使用`select`.

`select`将采用任意数量的文件描述符并等待其中一个变为“就绪”，其中就绪由 3 个集合中的哪个`select`包含文件句柄来定义。详情请参阅`perldoc -f select`。

`select`接受一个超时，所以如果你给它一个超时 0，它就变成了一个轮询函数。所以这个函数会做你需要的：

```
sub poll {
    my ($fh) = @_;
    my $in = '';
    vec($in,fileno($fh),1) = 1;
    return select($in,undef,undef,0);
}

# ...

if ( poll($handle) ) { my $readLength = read( $handle , $frameData , $frameLength ); } 
```

# ios - 如何将网页设置为PhoneGap startPage？

> ID：10362224
> 
> 赞同：1
> 
> 时间：2012-04-28T09:24:00.033
> 
> 标签：ios, cordova

最近开始在iOS平台学习PhoneGap，遇到了一个问题。我怎样才能改变`startPage`？我设置`startPage`如下：

```
self.viewController.startPage = @"http://www.google.com"; 
```

它没有用，我也尝试了以下方法：

```
 NSURLRequest *request =       
  [NSURLRequest requestWithURL:[URL URLWithString:@"http://www.google.com"]]; 
```

它也没有工作。

我不知道该怎么做。有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:59:45.340

这是我为我的应用程序所做的。按照 phonegap 的预期创建一个本地 index.html 页面。在 html 中，设置`window.location`为您需要访问的任何页面。

这是我的 index.html：

```
<html>
 <head>
   <script> window.location.href='http://www.google.com' </script>
 </head>
 <body>
   <h1 class='loading'> Loading </h1>
 </body>
</html> 
```

注意：确保将 放在`http://`该位置，否则它可能会被视为相对链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:49:37.217

您可以将应用程序的起点放在`plist`文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:42:51.510

尝试这个，

```
......
......
public partial class MainPage : PhoneApplicationPage
{
//variables…..
public MainPage()
{
   InitializeComponent();
   PGView.StartPageUri = new Uri(“www.google.com“, UriKind.Relative); 
   .....
   .....
} 
```

检查如何在 PhoneGap 1.x[**强文本**](https://stackoverflow.com/questions/9086145/how-to-change-start-page-in-phonegap-1-x)[中更改起始页](https://stackoverflow.com/questions/9086145/how-to-change-start-page-in-phonegap-1-x)

# c++ - 如何将三地址代码转换为 MIPS 汇编语言？

> ID：10362234
> 
> 赞同：2
> 
> 时间：2012-04-28T09:26:01.967
> 
> 标签：c++, assembly, compiler-construction, mips

我正在做一个项目，我必须在其中创建一个可以为 C 代码生成 MIPS 汇编代码的转换器。正在使用的编程语言是 C++，我已经完成了三个地址代码的生成，并且对如何进一步进行感到非常困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T18:53:50.983

如前所述，这是直接翻译。真的没有什么需要澄清的。以下面的三地址码为例：

```
 i := 0                  ; assignment
L1:   if i >= 10 goto L2      ; conditional jump
      t0 := i*i
      t1 := &b                ; address-of operation
      t2 := t1 + i            ; t2 holds the address of b[i]
      *t2 := t0               ; store through pointer
      i := i + 1
      goto L1
L2: 
```

MIPS 翻译为：

```
 li $t0, 0             #allocator assigned i to t0
L1:     bge $t0, 10, L2    
        mult $t1, $t0, $t0  
        la $t2, b             
        add $t3, $t2, $t0   
        sw $t1, ($t3)       
        addi $t0, $t0, 1
        j L1
L2: 
```

如果你有幸拥有这样的三个地址，你几乎不需要做任何事情。找到相应的操作码以配合指令。寄存器分配已经完成。如果三地址代码实际上是一堆字符串，我会考虑编写一个小型解析器（使用生成器），而不是尝试从字符串中提取信息。

# javascript - 使用 Ajax 调用的结果更新 div

> ID：10362235
> 
> 赞同：4
> 
> 时间：2012-04-28T09:26:04.633
> 
> 标签：javascript, ajax, jquery

我想显示下面 ajax 函数对 dom 中的 div 的响应（更新 div）。在不使用繁重的插件的情况下如何做到这一点。

```
url: 'http://dowmian.com/xs1/getcam.php',
type: 'GET',
data: {id: <?php echo $cam_id; ?>},
success: function(responseText){
},
error: function(responseText){
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:31:26.410

这取决于您的`getcam.php`函数的返回值，但您可能正在寻找该`html()`函数：

```
$.ajax({
    url: 'http://dowmian.com/xs1/getcam.php',
    type: 'GET',
    data: {id: <?php echo $cam_id; ?>},
    success: function(responseText){
        $('#update-div').html(responseText);
    },
    error: function(responseText){
    }
}); 
```

如果你想`#update-div`动态追加，就像在 ajax 调用之前一样，你可以这样做`append()`：

```
$('.container').append($('<div/>').attr('id','update-div')); 
```

**参考资料**：

*   [`ajax()`](http://api.jquery.com/jQuery.ajax/)
*   [`html()`](http://api.jquery.com/html/)
*   [`append()`](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:29:11.183

内部成功，请执行以下操作：

```
success: function(responseText) {
    $("#target").text(responseText);
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:27:39.670

利用您拥有的空的“成功”处理程序函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T09:31:09.783

试试这个：

```
success: function(responseText) {
    $("#update-div").text(responseText.d);
}, 
```

[您可以从这里](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)获得更多信息

# blackberry - 如何锁定 blckberry OS 4.5 应用程序的屏幕方向

> ID：10362240
> 
> 赞同：0
> 
> 时间：2012-04-28T09:26:29.347
> 
> 标签：blackberry

如何在黑莓 OS 4.5 中锁定方向

在 5.0 以上的黑莓操作系统中，可以使用以下方法

```
ScreenUtils.disableOrientationChange();

    // enters the event processing loop thread if required
    if (!app.isHandlingEvents())
    {
        app.enterEventDispatcher();
    } 
```

和

```
Ui.getUiEngineInstance().setAcceptableDirections(Display.DIRECTION_PORTRAIT); 
```

但我正在开发 BB OS 4.5，所以这怎么可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:21:06.667

第一款触摸屏设备 (BlackBerry Storm) 随附 RIM OS 4.7。

并且在 RIM SDK 4.7 中引入了[setAcceptableDirections](http://goo.gl/qjVAw)方法。

RIM SDK 4.5 不提供对屏幕方向的控制。

# c++ - c ++ seg错误问题

> ID：10362241
> 
> 赞同：1
> 
> 时间：2012-04-28T09:26:36.220
> 
> 标签：c++, memory-management, segmentation-fault

我正在开发一个使用一些外部 C 库的 C++ 程序。据我所知，这不是问题的原因，问题出在我的 C++ 代码上。该程序运行良好，在我的测试数据集上没有任何错误或任何东西，但是在几乎浏览了整个完整数据集之后，我得到了一个段错误。运行 GDB 给了我这个段错误：

```
(gdb) 运行 -speciesMain=allMis1 -speciesOther=anoCar2 -speciesMain=allMis1 -speciesOther=anoCar2 /hive/data/genomes/allMis1/bed/lastz.anoCar2/mafRBestNet/*.maf.gz
启动程序：/cluster/home/jstjohn/bin/mafPairwiseSyntenyDecay -speciesMain=allMis1 -speciesOther=anoCar2 -speciesMain=allMis1 -speciesOther=anoCar2 /hive/data/genome
s/allMis1/bed/lastz.anoCar2/mafRBestNet/*.maf.gz
从子进程 3718 分叉后分离。

程序收到信号 SIGSEGV，分段错误。
来自 /usr/lib64/libstdc++.so.6 的 __gnu_cxx::__exchange_and_add(int volatile*, int) () 中的 0x0000003009cb7672
(gdb) 向上
#1 0x0000003009c9db59 in std::basic_string, std::allocator >::~basic_string() () 来自 /usr/lib64/libstdc++.so.6
(gdb) 向上
#2 0x00000000004051e7 在 PairAlnInfo::~PairAlnInfo (this=0x7fffffffcd70, __in_chrg=) at mafPairwiseSyntenyDecay.cpp:37
(gdb) 向上
#3 0x0000000000404eb0 在 main (argc=2, argv=0x7fffffffcf78) 在 mafPairwiseSyntenyDecay.cpp:260

```

看起来我的 PairAlnInfo 类的双重释放正在发生一些事情。奇怪的是我没有定义析构函数，也没有用`new`. 我已经在 linux 机器上使用 g++44 和 g++4.1.2 进行了尝试，并且得到了相同的结果。

为了让事情变得更奇怪，在我的 linux 机器上（有更多可用的 RAM 和所有东西，不是 RAM 是这个程序的问题，而是一个强大的系统），在程序到达循环打印之前，seg 错误如上所述发生输出。在我使用 g++ 或 clang++ 的更小的 macbook air 上，程序仍然会出现段错误，但直到打印结果*之后*`return(0)`，就在 main 函数最终退出之前，它才会这样做。这是使用 Mac 的默认 g++4.2 编译后，在我的 Mac 上运行在同一文件上的 GDB 跟踪的样子：

```
（更多结果）...
98000 27527 162181 0.83027
99000 27457 161467 0.829953
100000 27411 160794 0.829527

程序收到信号 EXC_BAD_ACCESS，无法访问内存。
原因：KERN_INVALID_ADDRESS 地址：0x00004a2c00106077
0x00007fff9365a6e5 在 std::string::_Rep::_M_dispose ()
(gdb) 向上
#1 0x00007fff9365a740 在 std::basic_string, std::allocator >::~basic_string ()
(gdb) 向上
#2 0x0000000100003938 in main (argc=1261, argv=0x851d5fbff533) at mafPairwiseSyntenyDecay.cpp:301
(gdb)

```

以防你没有注意到我发帖的时间，现在大约是凌晨 2:30……我已经解决这个问题大约 10 个小时了。非常感谢您花时间看这个并帮助我！复制我的情况的代码和一些说明如下。

如果你有兴趣下载和安装整个依赖项，那么下载我的 KentLib 存储库，`make`在基本目录中，然后去那里`examples/mafPairwiseSyntenyDecay`运行`make`。导致我正在讨论的错误的一个示例（相当大）是此处提供的 gzip 文件：[程序崩溃的 100Mb 文件](http://hgwdev.cse.ucsc.edu/~jstjohn/anoCar2.allMis1.rbest.maf.gz)。然后使用这些参数执行程序`-speciesMain=allMis1 -speciesOther=anoCar2 anoCar2.allMis1.rbest.maf.gz`。

```
/**
 * mafPairwiseSyntenyDecay
 *  Author: John St. John
 *  Date: 4/26/2012
 *  
 *  calculates the mean synteny decay in different range bins
 *
 *
 */

//Kent source C imports
extern "C" {

#include "common.h"
#include "options.h"
#include "maf.h"

}

#include <map>
#include <string>
#include <set>
#include <vector>
#include <sstream>
#include <iostream>

//#define NDEBUG
#include <assert.h>

using namespace std;

/*
Global variables
 */

class PairAlnInfo {
public:
  string oname;
  int sstart;
  int send;
  int ostart;
  int oend;
  char strand;
  PairAlnInfo(string _oname,
      int _sstart, int _send,
      int _ostart, int _oend,
      char _strand):
        oname(_oname),
        sstart(_sstart),
        send(_send),
        ostart(_ostart),
        oend(_oend),
        strand(_strand){}
  PairAlnInfo():
    oname("DUMMY"),
    sstart(-1),
    send(-1),
    ostart(-1),
    oend(-1),
    strand(-1){}

};

vector<string> &split(const string &s, char delim, vector<string> &elems) {
  stringstream ss(s);
  string item;
  while(getline(ss, item, delim)) {
    elems.push_back(item);
  }
  return(elems);
}

vector<string> split(const string &s, char delim) {
  vector<string> elems;
  return(split(s, delim, elems));
}

#define DEF_MIN_LEN (200)
#define DEF_MIN_SCORE (200)

typedef map<int,PairAlnInfo> PairAlnInfoByPos;
typedef map<string, PairAlnInfoByPos > ChromToPairAlnInfoByPos;
ChromToPairAlnInfoByPos pairAlnInfoByPosByChrom;

void usage()
/* Explain usage and exit. */
{
  errAbort(
      (char*)"mafPairwiseSyntenyDecay -- Calculates pairwise syntenic decay from maf alignment containing at least the two specified species.\n"
      "usage:\n"
      "\tmafPairwiseSyntenyDecay [options] [*required options] file1.maf[.gz] ... \n"
      "Options:\n"
      "\t-help\tPrints this message.\n"
      "\t-minScore=NUM\tMinimum MAF alignment score to consider (default 200)\n"
      "\t-minAlnLen=NUM\tMinimum MAF alignment block length to consider (default 200)\n"
      "\t-speciesMain=NAME\t*Name of the main species (exactly as it appears before the '.') in the maf file (REQUIRED)\n"
      "\t-speciesOther=NAME\t*Name of the other species (exactly as it appears before the '.') in the maf file (REQUIRED)\n"
  );
}//end usage()

static struct optionSpec options[] = {
    /* Structure holding command line options */
    {(char*)"help",OPTION_STRING},
    {(char*)"minScore",OPTION_INT},
    {(char*)"minAlnLen",OPTION_INT},
    {(char*)"speciesMain",OPTION_STRING},
    {(char*)"speciesOther",OPTION_STRING},
    {NULL, 0}
}; //end options()

/**
 * Main function, takes filenames for paired qseq reads
 * and outputs three files.
 */
int iterateOverAlignmentBlocksAndStorePairInfo(char *fileName, const int minScore, const int minAlnLen, const string speciesMain, const string speciesOther){
  struct mafFile * mFile = mafOpen(fileName);
  struct mafAli * mAli;

  //loop over alignment blocks
  while((mAli = mafNext(mFile)) != NULL){
    struct mafComp *first = mAli->components;
    int seqlen = mAli->textSize;
    //First find and store set of duplicates in this block
    set<string> seen;
    set<string> dups;
    if(mAli->score < minScore || seqlen < minAlnLen){
      //free here and pre-maturely end
      mafAliFree(&mAli);
      continue;
    }

    for(struct mafComp *item = first; item != NULL; item = item->next){
      string tmp(item->src);
      string tname = split(tmp,'.')[0];
      if(seen.count(tname)){
        //seen this item
        dups.insert(tname);
      }else{
        seen.insert(tname);
      }
    }
    for(struct mafComp *item1 = first; item1->next != NULL; item1 = item1->next){
      //stop one before the end
      string tmp1(item1->src);
      vector<string> nameSplit1(split(tmp1,'.'));
      string name1(nameSplit1[0]);
      if(dups.count(name1) || (name1 != speciesMain && name1 != speciesOther)){
        continue;
      }

      for(struct mafComp *item2 = item1->next; item2 != NULL; item2 = item2->next){
        string tmp2(item2->src);
        vector<string> nameSplit2(split(tmp2,'.'));
        string name2 = nameSplit2[0];
        if(dups.count(name2) || (name2 != speciesMain && name2 != speciesOther)){
          continue;
        }

        string chr1(nameSplit1[1]);
        string chr2(nameSplit2[1]);
        char strand;
        if(item1->strand == item2->strand)
          strand = '+';
        else
          strand = '-';

        int start1,end1,start2,end2;

        if(item1->strand == '+'){
          start1 = item1->start;
          end1 = start1 + item1->size;
        }else{
          end1 = item1->start;
          start1 = end1 - item1->size;
        }

        if(item2->strand == '+'){
          start2 = item2->start;
          end2 = start2+ item2->size;
        }else{
          end2 = item2->start;
          start2 = end2 - item2->size;
        }

        if(name1 == speciesMain){
          PairAlnInfo aln(chr2,start1,end1,start2,end2,strand);
          pairAlnInfoByPosByChrom[chr1][start1] = aln;
        }else{
          PairAlnInfo aln(chr1,start2,end2,start1,end1,strand);
          pairAlnInfoByPosByChrom[chr2][start2] = aln;
        }

      } //end loop over item2
    } //end loop over item1
    mafAliFree(&mAli);
  }//end loop over alignment blocks

  mafFileFree(&mFile);
  return(0);
}

int main(int argc, char *argv[])
/* Process command line. */
{
  optionInit(&argc, argv, options);
  if(optionExists((char*)"help") || argc <= 1){
    usage();
  }
  int minAlnScore = optionInt((char*)"minScore",DEF_MIN_SCORE);
  int minAlnLen = optionInt((char*)"minAlnLen",DEF_MIN_LEN);

  string speciesMain(optionVal((char*)"speciesMain",NULL));
  string speciesOther(optionVal((char*)"speciesOther",NULL));

  if(speciesMain.empty() || speciesOther.empty())
    usage();

  //load the relevant alignment info from the maf(s)
  for(int i = 1; i<argc; i++){
    iterateOverAlignmentBlocksAndStorePairInfo(argv[i], minAlnScore, minAlnLen, speciesMain, speciesOther);
  }

  const int blockSize = 1000;
  const int blockCount = 100;

  int totalWindows[blockCount] = {0};
  int containBreak[blockCount] = {0};

  //we want the fraction of windows of each size that contain a break
  //

  for(ChromToPairAlnInfoByPos::iterator mainChromItter = pairAlnInfoByPosByChrom.begin();
      mainChromItter != pairAlnInfoByPosByChrom.end();
      mainChromItter++){
    //process the alignments shared by this chromosome
    //note that map stores them sorted by begin position
    vector<int> keys;
    for(PairAlnInfoByPos::iterator posIter = mainChromItter->second.begin();
        posIter != mainChromItter->second.end();
        posIter++){
      keys.push_back(posIter->first);
    }

    for(int i = 0; i < keys.size(); i++){
      //first check for trivial window (ie our block)
      PairAlnInfo pi1 = mainChromItter->second[keys[i]];
      assert(pi1.send > pi1.sstart);
      assert(pi1.sstart == keys[i]);
      int numBucketsThisWindow = (pi1.send - pi1.sstart) / blockSize;
      for(int k = 0; k < numBucketsThisWindow && k < blockCount; k++)
        totalWindows[k]++;

      for(int j = i+1; j < keys.size(); j++){

        PairAlnInfo pi2 = mainChromItter->second[keys[j]];

        assert(pi2.sstart == keys[j]);
        assert(pi2.send > pi2.sstart);
        assert(pi2.sstart > pi1.sstart);

        if(pi2.oname == pi1.oname){
          int moreToInc = (pi2.send - pi1.sstart) / blockSize;
          for(int k = numBucketsThisWindow; k < moreToInc && k < blockCount; k++)
            totalWindows[k]++;
          numBucketsThisWindow = moreToInc; //so we don't double count
        }else{

          int numDiscontigBuckets = (pi2.send - pi1.sstart) / blockSize;
          for(int k = numBucketsThisWindow; k < numDiscontigBuckets && k < blockSize; k++){
            containBreak[k]++;
            totalWindows[k]++;
          }
          numBucketsThisWindow = numDiscontigBuckets;
        }
        if((keys[j] - keys[i]) >= (blockSize * blockCount)){
          //i = j;
          break;
        }
      }
    }
  }

  cout << "#WindowSize\tNumContainBreak\tNumTotal\t1-(NumContainBreak/NumTotal)" << endl;
  for(int i = 0; i < blockCount; i++){
    cout << (i+1)*blockSize << '\t';
    cout << containBreak[i] << '\t';
    cout << totalWindows[i] << '\t';
    cout << (totalWindows[i] > 0? 1.0 - (double(containBreak[i])/double(totalWindows[i])): 0) << endl;
  }

  return(0);
} //end main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:30:33.837

尝试在 valgrind 下运行您的程序。这将为您提供可能或实际丢失内存、未初始化等的报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T14:01:54.940

您的问题可能是由于在您看到实际错误之前的某个时间点在程序中的某个时间点发生了内存损坏。

您发布的代码中的一个潜在问题是循环：

```
 for(int k = numBucketsThisWindow; k<numDiscontigBuckets && k < blockSize; k++){ 
```

它使用`blockSize`而不是正确的`blockCount`，这导致`totalWindows[]`和`containBreak[]`数组都可能溢出。这将覆盖`speciesMain`和`speciesOther`字符串，以及堆栈上的任何其他内容，这很可能会导致您看到的错误。

# c# - 两个唯一的命名管道冲突和 InvalidCredentialException

> ID：10362246
> 
> 赞同：7
> 
> 时间：2012-04-28T09:27:04.787
> 
> 标签：c#, wcf, remoting, named-pipes

昨晚我遇到了两个问题，现在我已经解决了，但我不能 100% 确定为什么我所做的事情已经解决了这些问题，并希望有人能提供一些见解，因为我已经翻了很多岩石，没有运气！

**第一个问题**

第一个问题是我有两个唯一命名的管道，它们位于两个单独的程序中：

*   net.pipe://localhost/superuniquepipe1
*   net.pipe://localhost/superuniquepipe2

但是，由于地址已在使用中，在打开 ServiceHost 时，要启动的第二个程序会引发异常（我相信是 AddressAlreadyInUseException）。

我实例化这些 ServiceHosts 的方式**如下**：

```
Uri[] baseAddresses = new Uri[] { new Uri("net.pipe://localhost") };
this.host = new ServiceHost(this, baseAddresses);
this.host.AddServiceEndpoint(typeof(IHostType), new NetNamedPipeBinding(), "superuniquepipe1");
this.host.Open(); 
```

所以我会先指定localhost的基地址，然后在添加端点时指定其余部分，我解决这个问题的方法是更改​​代码如下：

```
this.host = new ServiceHost(this);
this.host.AddServiceEndpoint(typeof(IHostType), new NetNamedPipeBinding(), "net.pipe://localhost/superuniquepipe2");
this.host.Open(); 
```

我是否正确地说这有效的原因是因为它只检查基地址而不是我试图添加的端点？并且使用第二个代码示例是让多个程序在“localhost”上侦听的有效/安全方式吗？

**第二个问题**：

为了解决上述问题，我将基地址从 localhost 更改为多个不同的唯一字符串，例如“net.pipe://rawrwhyisntthisworkingsadface”，但是在这样做时，我会收到来自客户端尝试的 InvalidCredentialException建立连接（见下面的代码）

我的印象是命名管道可以从字面上命名任何东西，任何人都可以对此有所了解吗？

```
ChannelFactory<IHostType> factory = new ChannelFactory<IHostType>(new NetNamedPipeBinding(), new EndpointAddress("net.pipe://rawrwhyisntthisworkingsadface/superuniquepipe2"));
IHostType proxy = factory.CreateChannel();
proxy.CallSomeMethodAndGetAnException(); 
```

任何输入将不胜感激，正如我所说，我已经解决了这个问题，只是想知道为什么我的解决方案有效，但是如果您发现我解决问题的方式存在缺陷并且可以提出更好的解决方法，请这样做:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T14:23:59.260

重新问题1：

WCF`NetNamedPipeBinding`使用命名的共享内存部分向其客户端发布可以调用服务的管道的实际名称。管道名称本身是一个 GUID，每次打开服务主机时都会重新生成。它是用于发布依赖于服务 URL 的服务的共享内存部分的名称。如果定义了基地址，则基地址用于派生该名称。

这意味着您一次只能运行一个 WCF 服务应用程序，该应用程序使用特定的基地址作为其 NetNamedPipe 端点。如果您尝试启动第二个，它会失败并显示 AddressAlreadyInUseException，因为它发现 WCF 想要用于发布位置的名称（从基地址派生）已被另一个应用程序占用。

如果您不指定基地址，并为每个服务提供一个绝对的、唯一的服务 URL，那么发布位置的名称现在是从完整的绝对 URL 派生的，并且应用程序之间没有名称冲突。这是让多个 WCF 命名管道服务侦听的完全有效且安全的方法。

重新问题2：

在服务端，您可以对服务 URL 的主机名部分使用任何内容。这是由于`HostNameComparisonMode`NetNamePipeBinding 中默认应用的设置，因为 WCF 中派生共享内存发布位置名称的算法用通配符替换主机名（[参见此处](http://www.google.co.uk/url?sa=t&rct=j&q=hostname%20wild%20card%20wcf&source=web&cd=9&ved=0CGkQFjAI&url=http://kennyw.com/work/indigo/109&ei=70ydT9aUAeLK0QWYk92QDw&usg=AFQjCNErcd1lb_Byo0fbF-P2G-aM9PHAHA)）以启用配置的主机名比较模式。

然而，在客户端，服务 URL 受到限制：主机部分必须真正解析为 localhost（即它是`localhost`，正确的 IP 地址或正确的机器名称）。

# ruby-on-rails - 如何修复 rake assets:precompile task 导致“[FATAL] failed to allocate memory”问题？

> ID：10362248
> 
> 赞同：2
> 
> 时间：2012-04-28T09:27:12.367
> 
> 标签：ruby-on-rails, memory-management, asset-pipeline, precompile

运行`cap deploy`时，尝试编译资产时出现以下错误：

```
*** [err :: 205.186.157.163] /usr/local/ruby-enterprise/bin/ruby /usr/local/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
*** [err :: 205.186.157.163] [DEPRECATION WARNING] Nested I18n namespace lookup under "activerecord.attributes.spree/order" is no longer supported
*** [err :: 205.186.157.163] [FATAL] failed to allocate memory
*** [err :: 205.186.157.163] rake aborted! 
```

`top`我每次使用时都会看到内存达到最大值。我确实将 MediaTemple (ve) 框的内存分配增加到 1GB，但没有成功。

上下文：Spree 1.0.3、rails 3.1、MediaTemple (ve) 服务器，内存为 1GB。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:36:28.147

实际上，我在这里按照 Ryan Bigg 的建议解决了我的问题：[https ://github.com/spree/spree/issues/1183#issuecomment-5493863](https://github.com/spree/spree/issues/1183#issuecomment-5493863)

原来`sass-rails`需要升级到 branch `3-1-stable`，然后一切都运行得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:07:28.797

我认为这是 Rails 3.1 的一个[已知问题](https://github.com/rails/rails/issues/3694)，据说在 Rails 3.2 中已修复。[还看到这里](https://stackoverflow.com/questions/8212154/how-to-optimize-the-asset-compilation-rake-task-in-rails-3-1-while-deploying-eat)的另一个提及。我在全新安装 Rails 3.1 和 Spree 1.0 并且没有其他依赖项时遇到了同样的问题。

这是我解决它的方法：

在 Capfile 中，将其注释掉：

```
load 'deploy/assets' 
```

在我的`deploy.rb`文件中，我复制`deploy/assets`了 spree-rails gem 提供的内容，但添加了`precompile_quick`任务。这编译了 CSS 和 JS，但看起来它实际上可能没有压缩 CSS 和 JS。

```
before 'deploy:finalize_update', 'deploy:assets:symlink'
after 'deploy:update_code', 'deploy:assets:precompile_quick'

namespace :deploy do
  namespace :assets do
    desc <<-DESC
      [internal] This task will set up a symlink to the shared directory \
      for the assets directory. Assets are shared across deploys to avoid \
      mid-deploy mismatches between old application html asking for assets \
      and getting a 404 file not found error. The assets cache is shared \
      for efficiency. If you cutomize the assets path prefix, override the \
      :assets_prefix variable to match.
    DESC
    task :symlink, :roles => assets_role, :except => { :no_release => true } do
      run <<-CMD
        rm -rf #{latest_release}/public/#{assets_prefix} &&
        mkdir -p #{latest_release}/public &&
        mkdir -p #{shared_path}/assets &&
        ln -s #{shared_path}/assets #{latest_release}/public/#{assets_prefix}
      CMD
    end

    desc <<-DESC
      Run the asset precompilation rake task. You can specify the full path \
      to the rake executable by setting the rake variable. You can also \
      specify additional environment variables to pass to rake via the \
      asset_env variable. The defaults are:

        set :rake,      "rake"
        set :rails_env, "production"
        set :asset_env, "RAILS_GROUPS=assets"
    DESC
    task :precompile_quick, :roles => assets_role, :except => { :no_release => true } do
      run "cd #{current_path} ; RAILS_ENV=#{rails_env} bundle exec rake assets:precompile:primary"
      run "cd #{current_path} ; RAILS_ENV=#{rails_env} bundle exec rake assets:precompile:nondigest"
    end

    desc <<-DESC
      Run the asset clean rake task. Use with caution, this will delete \
      all of your compiled assets. You can specify the full path \
      to the rake executable by setting the rake variable. You can also \
      specify additional environment variables to pass to rake via the \
      asset_env variable. The defaults are:

        set :rake,      "rake"
        set :rails_env, "production"
        set :asset_env, "RAILS_GROUPS=assets"
    DESC
    task :clean, :roles => assets_role, :except => { :no_release => true } do
      run "cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:clean"
    end
  end
end 
```

# android - 将 ImageView 保存到 Android 模拟器库

> ID：10362259
> 
> 赞同：1
> 
> 时间：2012-04-28T09:28:05.053
> 
> 标签：android, file-io, io, android-imageview, android-gallery

我想将图像保存到 Android 图库，这是我当前的代码：

```
image.setDrawingCacheEnabled(true);

image.buildDrawingCache(true);
Bitmap b = image.getDrawingCache();

if(!new File("/"+Environment.DIRECTORY_PICTURES).exists())
    Log.e("Error","/"+Environment.DIRECTORY_PICTURES+" Dont exist");

File file = new File(Environment.DIRECTORY_PICTURES+"/myImage.jpg");
file.createNewFile();
FileOutputStream ostream = new FileOutputStream(file);
b.compress(CompressFormat.JPEG, 80, ostream);
image.setDrawingCacheEnabled(false);
ostream.close();
Toast.makeText(Ads.this, "Offer saved", 1).show(); 
```

它总是返回相同的错误：

```
Error: /Pictures Dont exist 
```

然后是一个 IOException：

```
java.io.IOException: open failed: ENOENT (No such file or directory) 
```

这是在 4.0 Android 虚拟设备上。我也尝试使用`Environment.getRootDirectory()`获取 AVD 的根目录，但我仍然收到相同的错误。

在 AVD 中测试将图像保存到图库的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T09:51:11.460

因为，您已经拥有了，`Bitmap`您可以使用此代码将其插入到图库中：

```
Bitmap b = image.getDrawingCache();
Images.Media.insertImage(getContentResolver(), b, title, description); 
```

`title``description`如果您不关心设置它们，则可以为 null。如果`Uri`返回非空，则插入成功。

# internet-explorer-7 - superfish 项目的宽度在 IE 6,7 中不正确

> ID：10362261
> 
> 赞同：0
> 
> 时间：2012-04-28T09:28:39.043
> 
> 标签：internet-explorer-7, internet-explorer-6, joomla1.5, superfish

我在 joomla 1.5 中安装了 superfish 模块。我在 IE 6,7 中有问题。'li' 元素的宽度计算不正确，这会导致某些项目掉落。不幸的是，我正在使用我的电脑，无法将其上传到某个地方以向您展示该网站，但我希望这可能是一个常见问题，有人可以帮助我。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:55:03.397

在 IE6 中可能出现宽度问题的常见原因：

*   怪癖模式：IE 中布局故障的第一大原因。确保您`<!DOCTYPE>`的设置正确。
*   浮动边距错误：如果您`float`在 CSS 中使用并且这些元素也有`margin`，您可能会发现边距翻倍。最好的解决方法是使用`padding`or`border`代替`margin`. 您可能需要调整布局来处理它。
*   `max-width`并且`min-width`不支持：IE6 根本不支持这些 CSS 功能。它会破坏你的布局。您对此无能为力。
*   在它们之间有空格的浮动：在某些情况下，浮动元素在 IE6 中可能会比其他浏览器显示出更远的几个像素。IE 在它们之间插入空格，因为它在 HTML 代码中（也许它们在不同的代码行上？）。删除空格，IE 将正确呈现它。
*   错误之一`has-layout`：IE 有一个名为的内部标志`has-layout`，它有许多与之相关的渲染错误。您不能手动设置此标志；IE 根据元素的其他属性决定它应该是什么。您有时可以通过设置`zoom:0;`元素的样式表来解决它。但不总是。

进一步阅读： http: [//www.virtuosimedia.com/dev/css/ultimate-ie6-cheatsheet-how-to-fix-25-internet-explorer-6-bugs](http://www.virtuosimedia.com/dev/css/ultimate-ie6-cheatsheet-how-to-fix-25-internet-explorer-6-bugs)

# c# - 当表单是模态时如何退出函数而不退出表单？

> ID：10362264
> 
> 赞同：3
> 
> 时间：2012-04-28T09:29:12.307
> 
> 标签：c#, winforms

我有一个表单，在其他控件中，有一个 TextBox 字段，可以选择由 user 填写。
还有一个**btnSubmit 按钮**，用于执行所需的操作并关闭表单。
在其代码中，我检查是否存在评论，如果没有，则在退出之前询问用户是否要填写评论。
我使用**bool AskToFillCommentIfNeeded()**函数，该函数显示一个 MessageBox，要求用户在退出之前选择填写评论（如果尚未完成）。
如果用户回答是，则返回 true，否则返回 false。
如果用户点击是，我必须在不关闭表单的情况下退出提交功能，这样用户可以输入评论然后再次按下提交按钮。

[编辑] 代码是这样的：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
     // ask user if he wants to fill the comment : if so, exit this function
     if (AskToFillCommentIfNeeded()) { return; };

     // ... save data and exit form ...
} 
```

我以非模态形式使用此代码，它按预期工作。
但是，当我尝试在 btnSubmit DialogResult 属性设置为 OK 的模式表单中使用它时，它无法按预期工作：它
不仅退出事件接收器，还关闭表单而不保存数据。

我提出了一个（笨拙的）解决方法，使用这样的布尔标志：

```
private bool isBusy = false;
private void btnSubmit_Click(object sender, EventArgs e)
{
     // clumsy attempt to avoid form exit :
     isBusy = true;

     // ask user if he wants to fill the comment : if so, exit this function
     if (AskToFillCommentIfNeeded()) { return; };

     isBusy = false;

      // ... save data and exit form ...
} 
```

因此，如果执行 return 语句，我会拦截 _FormClosing 事件并在标志设置为 true 时取消它：

```
private void FDialog_FormClosing(object sender, FormClosingEventArgs e)
{
     // abort closing if flag is set
     e.Cancel = isBusy;
} 
```

这行得通，但并不令人满意。
有没有更好的方法来实现相同的行为？
我正在使用 C# Express 2010 。
先感谢您 。

杰克格里芬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:42:06.797

只需将表单的 DialogResult 属性设置回 None 以防止对话框关闭：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
     if (AskToFillCommentIfNeeded()) {
         this.DialogResult = DialogResult.None; 
         return;
     }

     // ... save data and exit form ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:44:12.377

手动设置`button.DialogResult = None`和分配事件`form.DialogResult`中的属性。`button.Click`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T17:30:59.510

注意：我现在会发布这个，但是在论坛上我是新手，
我必须等待 8 小时才能回答我自己的问题。
不过，我觉得在这种情况下，发帖比只对每个答案发表评论要好。
（我的意思是我的感谢会立即联系到你:-)）。

感谢您的超光速答案！
他们很有启发性。
@Hans Passant：这正是我所追求的解决方案。
@mrtofigh ：更改 button.DialogResult 将不起作用，它必须是 form.DialogResult 。
@Henk Holterman：您对标题栏中的关闭按钮是正确的。
但是，如果用户单击它，应用程序将假定用户不打算提交任何内容。
为了确定这一点，我将添加以下代码：

```
private void FDialog_FormClosing(object sender, FormClosingEventArgs e)
{
    // intercept form closing from Close box in title bar
    if (e.CloseReason == CloseReason.UserClosing)
        {
             e.Cancel = !ConfirmFormExit();
        }
} 
```

其中**ConfirmFormExit()**是一个布尔函数，显示一个 MessageBox 询问用户是否想退出而不提交，并在 Yes 上返回 true。

因此，代码将是：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
    //  avoid form exit right now
    this.DialogResult = DialogResult.None;

    // ask user if he wants to fill the comment : if so, exit this function 
    if (AskToFillCommentIfNeeded()) { return; };

    // now is safe to return dialog result
    this.DialogResult = DialogResult.OK;

    // ... save data and exit form       
} 
```

我测试了它，它工作得很好。
再次感谢你 。
杰克

# yii - 重置 fck 编辑器值 yii

> ID：10362267
> 
> 赞同：0
> 
> 时间：2012-04-28T09:30:10.087
> 
> 标签：yii

我正在使用 yii 框架，并且我有 fck 编辑器。如果我单击重置按钮，表单中的所有字段都会变空，但编辑器不会。这是 fck 编辑器的代码

```
$this->widget('application.extensions.fckeditor.FCKEditorWidget',array(
    "model"=>$model,                # Data-Model
    "attribute"=>'content',         # Attribute in the Data-Model
    "height"=>'400px',
    "width"=>'100%',

    "fckeditor"=>Yii::app()->basePath."/../fckeditor/fckeditor.php",
                                    # Path to fckeditor.php
    "fckBasePath"=>Yii::app()->baseUrl."/fckeditor/",
                                    # Relative Path to the Editor (from Web-Root)
    "config" => array("EditorAreaCSS"=>Yii::app()->baseUrl.'/css/index.css',),
                                    # Additional Parameters 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:59:16.533

AFAIK FCKEditor（和任何其他类似的）基于简单的文本框（HTML 元素文本区域）。

如果您使用的是 jQuery，我会考虑在表单重置后生成的视图中的 onDocumentReady 函数中添加一段简单的代码（或者直接添加到重置按钮的 onClick 代码，如果您在重置后没有重新加载页面） . 在此代码中，我将简单地强制用作 FCKEditor 基础的字段以确保它为空。

像这样的东西：

```
$('#editor').val(''); 
```

凭记忆写的，虽然没有测试。

# php - 如何使用php在邮件中附加大文件？

> ID：10362269
> 
> 赞同：0
> 
> 时间：2012-04-28T09:30:24.023
> 
> 标签：php, email, email-attachments

我使用 php (mime.php) 在邮件中附加大约 0.5 到 1 mb 的大文件

我附加文件并发送邮件，但在邮箱中，文件名未知，也不显示正文。所以请我。

如何使用 php (LAMP) 在邮件中上传大文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:43:58.630

附加大文件很少是必需的。也许您可以将其存储在服务器上并生成下载链接，[如此处所述](https://stackoverflow.com/a/10007260/1324707)？

# xcode - 更新 Xcode 编译器

> ID：10362274
> 
> 赞同：1
> 
> 时间：2012-04-28T09:30:41.150
> 
> 标签：xcode, macos, compiler-construction, xcode4, clang

有没有办法更新内置的 Xcode 编译器？我在 Snow Leopard 上，所以我坚持使用 Xcode 4.2，它有一个 3.0 之前的 Clang 版本。我可以构建自己的 Clang，它可以在终端上运行，但我也想更新 Xcode 的 Clang 版本。那可能吗？

# javascript - jQuery.parseJSON 与 JSON.parse

> ID：10362277
> 
> 赞同：81
> 
> 时间：2012-04-28T09:30:57.113
> 
> 标签：javascript, jquery

[`jQuery.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)并且[`JSON.parse`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)是执行相同任务的两个函数。如果已经加载了 jQuery 库，那么在性能方面 using`jQuery.parseJSON`会比 using 更好`JSON.parse`吗？

如果是，为什么？如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-28T09:35:48.647

[这是jQuery 1.9.1](https://github.com/jquery/jquery/blob/28d946384799abcd7608c3beda898a0a11ac88d7/src/core.js#L518-L546)的摘录：

```
parseJSON: function( data ) {
    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data );
    }

    if ( data === null ) {
        return data;
    }

    if ( typeof data === "string" ) {

        // Make sure leading/trailing whitespace is removed (IE can't handle it)
        data = jQuery.trim( data );

        if ( data ) {
            // Make sure the incoming data is actual JSON
            // Logic borrowed from http://json.org/json2.js
            if ( rvalidchars.test( data.replace( rvalidescape, "@" )
                .replace( rvalidtokens, "]" )
                .replace( rvalidbraces, "")) ) {

                return ( new Function( "return " + data ) )();
            }
        }
    }

    jQuery.error( "Invalid JSON: " + data );
}, 
```

如您所见，如果本地`JSON.parse`方法可用，jQuery 将使用本地方法，否则它将尝试使用 评估数据`new Function`，这有点像`eval`.

所以是的，你绝对应该使用`jQuery.parseJSON`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-28T09:33:25.287

[根据 jQuery](http://api.jquery.com/jQuery.parseJSON/)

> 在浏览器提供 JSON.parse 的本机实现的地方，jQuery 使用它来解析字符串。

因此，这意味着如果浏览器上不存在本机实现，jQuery 会提供 JSON 解析器。这是具有（和不具有）JSON 功能的浏览器[的比较表](http://caniuse.com/#search=json)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-14T22:06:21.167

如果您使用的是 jQuery 版本 3（2016 年发布），那么您应该使用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)because `jQuery.parseJSON()` [has been deprecated](http://api.jquery.com/jQuery.parseJSON/)。

> 从 jQuery 3.0 开始，不推荐使用 $.parseJSON。要解析 JSON 对象，请改用本机 JSON.parse 方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-26T18:50:04.713

JSON.parse() 在某些浏览器上原生可用，在其他浏览器上不可用，因此使用库更安全。正如其他受访者所指出的，JQuery 实现运行良好。还有[Douglas Crockford 的 JSON 库](https://github.com/douglascrockford/JSON-js)，如果可用，它使用本机实现。

JSON 库的优点是它具有将 JavaScript 对象转换为 JSON 字符串的方法，目前 jQuery 缺少这种方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-28T09:33:54.983

我不知道性能，但是使用 jQuery 方法肯定更安全，因为像 ie7 和更低版本的一些浏览器本身可能没有任何 JSON 功能。
这都是关于兼容性的，就像您使用 jQuery 的 each 方法而不是数组的本机`forEach`方法进行迭代一样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-09T19:08:13.207

谈到**性能**，**最新**的答案是**`JSON.parse`**。

**现在每个浏览器**都**支持**原生 JSON 对象，所以选择. 您可以在此处查看支持表：http: [//caniuse.com/#feat=json](http://caniuse.com/#feat=json)**`JSON.parse`**

 **您还可以在 GitHub 上的 JQuery 存储库中搜索此别名外观：[https ://github.com/jquery/jquery/search?utf8=%E2%9C%93&q=parseJSON](https://github.com/jquery/jquery/search?utf8=%E2%9C%93&q=parseJSON)

此外，如此处其他答案所述，3.0+ 版本`jQuery.parseJson`已**弃用**。

如果您是旧的 JQuery 版本 + 如果您想为非常旧的浏览器提供支持（通常**不推荐**），您应该只使用 jQuery 的版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-10T08:58:13.953

jQuery 在内部使用`JSON.parse`来解析 JSON 文件。因此在大多数情况下它没有任何区别。

但是一些较旧的浏览器不支持`JSON.parse`功能。在这种情况下使用`jQuery.parseJSON`是有益的，因为 jQuery 可以使用自己的函数处理 JSON。

笔记：

> `jQuery.parseJSON`已从 jQuery 3.0 弃用。所以请使用本机`JSON.parse`方法。**

# javascript - 如何在jquery中使用动态id

> ID：10362283
> 
> 赞同：1
> 
> 时间：2012-04-28T09:32:21.310
> 
> 标签：javascript, jquery, hover

我正在使用它来指向表格中的单独 td。并且 id(dynid) 是动态创建的，因此当用户将鼠标悬停在 td 上时，我需要将位置更改为绝对位置。我尝试了下面的一个，但它不是 wroks

```
$('#selectTable tr td #td'+dynid).hover(

 function () {

   $(this).css("position","absolute");

 }
); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:42:59.710

您正在寻找元素中的`td`元素，但您想要`td`具有特定 id 的元素。有空格。你需要`td#id`而不是`td #id`.

```
dynid = 2; // Test

$('#selectTable tr td#td' + dynid).hover(
    function () {
        $(this).css("position","absolute");
    }
); 
```

**带有背景色的示例**
[http://jsfiddle.net/FKhbd/](http://jsfiddle.net/FKhbd/)

如果悬停结束，您可能需要定义第二个处理程序。像这样的东西：

```
$('#selectTable tr td#td' + dynid).hover(
    function () {
        $(this).css("position","absolute");
    },
    function () {
        $(this).css("position","relative");
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:45:01.613

可能你的选择器是错误的：`'#selectTable tr td #td'+dynid`应该变成`'#selectTable tr td#td'+dynid`. 您还可以明智地打开和关闭设置 position: absolute 的 css 类，如下所示：

```
$("#selectTable td").hover(function () {
    $(this).addClass("pos-abs"); // focus
}, function () {
    $(this).removeClass("pos-abs"); // blur
}); 
```

见[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# javascript - 检查连接javascript

> ID：10362284
> 
> 赞同：0
> 
> 时间：2012-04-28T09:32:35.160
> 
> 标签：javascript, jquery, html

我正在尝试检查与 javascript 的连接，但我尝试了很多教程，但任何对我有用。

例如我有这个代码但不起作用

```
<!DOCTYPE HTML> 
<html>  
<head>   
  <title>Online status</title>  
  <script>    
    function updateIndicator() 
    {
     document.getElementById('indicator').textContent = navigator.onLine ? 'online' : 'offline';    
    }   
   </script>  
</head> 
<body onload="updateIndicator()" ononline="updateIndicator()"     onoffline="updateIndicator()">   <p>The network is: <span
     id="indicator">(state unknown)</span>  
</body>
</html> 
```

一些帮助？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:57:38.840

编辑：似乎这是一个设置问题，无论如何都会留下它，因为它在不支持在线和离线的情况下可能很有用。

我不确定在线和离线是否会得到很好的支持，但您可以设置一个时间间隔来检查状态并相应地更新它。这个小小提琴有效（只需停止您的网络连接，状态将切换为离线）

[http://jsfiddle.net/vpG5b/1/](http://jsfiddle.net/vpG5b/1/)

您可以根据需要调整间隔，但 500 毫秒应该足够好并且不会太苛刻，我添加了检查以仅在状态发生变化时更新状态（更少的 DOM 操作），这样您甚至可以拥有离线/在线处理程序。

```
var handler = {
    online: function() {
        alert('online');
    },
    offline: function() {
        alert('offline');
    }
};

function isOnline() {

    var status = navigator.onLine ? 'online' : 'offline',
        indicator = document.getElementById('indicator'),
        current = indicator.textContent;

    // only update if it has change
    if (current != status) {

        // update DOM
        indicator.textContent = status;

        // trigger handler
        handler[status]();
    };
};

setInterval(isOnline, 500);
isOnline();​ 
```

# amazon-ec2 - AWS ELB 处理的请求少于单个实例

> ID：10362286
> 
> 赞同：4
> 
> 时间：2012-04-28T09:32:40.087
> 
> 标签：amazon-ec2, amazon-web-services, tomcat6, load-testing, amazon-elb

我正在 AWS ELB 后面的 Web 应用程序上执行负载测试。我已经测试了两个场景 1）检查吞吐量直接在 tomcat 实例上生成负载 2）通过在 AWS ELB 上生成负载来检查吞吐量。

我正在使用 Apache Benchmark 工具进行负载测试。我观察到 AWS ELB 提供的请求/秒少于实例上的直接吞吐量。我想知道 AWS ELB 中导致吞吐量低的问题是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:42:32.357

在后台（亚马逊丛林深处）ELB 基本上只是运行 LB 软件的非常简单的小型实例，因此它们肯定有性能限制，这可能就是您遇到的问题。现在，ELB 被设计为随着负载的增加（我相信请求，而不是连接）进行扩展，但是这种扩展只发生在五分钟的时间内，所以如果你有一个合成测试在更短的时间内加速，那么你就会遇到问题。

两种解决方案：

1.  爬起来很慢，但这很无聊。
2.  向 Amazon 拨打支持电话并要求“预热”您的 ELB 实例。告诉他们您要测试多少负载，他们会相应地进行一些调整。

# c# - 单元测试 Repository.Update 方法的正确方法

> ID：10362287
> 
> 赞同：2
> 
> 时间：2012-04-28T09:32:43.987
> 
> 标签：c#, unit-testing, repository, mstest

假设我们有典型的存储库

```
 public class Repository:IRepository<Entity>
    {
            public Entity GetById(int id)
            {
                //blah
            }

            public IEnumerable<Entity> All()
            {
                //blah
            }

            public void Insert(Entity entity)
            {

            }

            public void Update(Entity entity)
            {
                //blah
            }

            public void Delete(Entity entity)
            {
                //blah
            }
    } 
```

使用 MSTest，我想测试存储库插入和更新实体的能力。只要它是具体的存储库，我就会针对真实的数据库进行测试。

所以，当我测试 Insert 方法时 - 策略很明确

1.  创建新实体
2.  保存
3.  通过 id 获取实体
4.  断言实体由存储库返回

但是当我想到更新方法测试时，这一切都变得有些棘手。主要问题是

*   如何确保数据库已经存储了我可以获取并尝试更新的对象？
*   如何针对空数据库测试更新？

看起来解决方法需要一些不必要的代码，并且测试会变得臃肿。有什么优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:47:32.550

使用[ClassInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute%28v=vs.80%29.aspx) [TestInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx)以及[ClassCleanup](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classcleanupattribute%28v=vs.80%29.aspx)和[TestCleanup](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcleanupattribute%28v=vs.80%29.aspx)使用众所周知的实体预填充数据库。然后`Update()`对它们运行测试。

不确定如何解释“不必要的代码”......看起来您将不得不做一些事情来填充您的数据库以测试该`Update()`方法；至少使用上面列出的属性允许您实现初始化和清理数据库所需的逻辑，而不会污染实际的测试方法。

# android - Android MediaPlayer setDataSourceFD 在 Pantech Crossover 上失败

> ID：10362288
> 
> 赞同：1
> 
> 时间：2012-04-28T09:32:48.993
> 
> 标签：android, debugging

我们的引擎创建媒体播放器：

```
final MediaPlayer mediaPlayer = new MediaPlayer();
final AssetFileDescriptor assetFileDescritor = pContext.getAssets().openFd(MusicFactory.sAssetBasePath + pAssetPath);
    mediaPlayer.setDataSource(assetFileDescritor.getFileDescriptor(), assetFileDescritor.getStartOffset(), assetFileDescritor.getLength());
mediaPlayer.prepare(); 
```

它在除 Pantech Crossover (Android 2.2.1) 之外的所有手机上都运行良好，它会导致游戏崩溃：

```
Caused by: java.io.IOException: setDataSourceFD failed.: status=0x80000000
  at android.media.MediaPlayer.setDataSource(Native Method)
  at org.anddev.andengine.audio.music.MusicFactory.createMusicFromAsset 
```

任何想法如何解决这个问题或这里发生了什么？

# c# - 如何解决这个“P/Invoke 声明应该是可移植的”？

> ID：10362289
> 
> 赞同：3
> 
> 时间：2012-04-28T09:32:50.653
> 
> 标签：c#, pinvoke

这段代码：

```
[DllImport("shell32", CharSet=CharSet.Unicode)]
private static extern int SHGetFileInfo(string pszPath, uint dwFileAttributes, out SHFILEINFO psfi, uint cbFileInfo, uint flags); 
```

导致以下代码分析问题：

> **CA1901 P/Invoke 声明应该是可移植的**
> 
> 正如您在代码中声明的那样，P/Invoke 'IconUtil.SHGetFileInfo(string, uint, out IconUtil.SHFILEINFO, uint, uint)' 的返回类型在 64 位平台上将是 4 字节宽。这是不正确的，因为此 API 的实际本机声明表明它在 64 位平台上应该是 8 字节宽。请参阅 MSDN 平台 SDK 文档以帮助确定应使用什么数据类型而不是“int”。

我应该做些什么？我试过“咨询 MSDN”，但我不确定这个问题是什么意思。

* * *

我也为同一行得到这个：

> **CA1060 将 P/Invokes 移至 NativeMethods 类**
> 
> 因为它是一个 P/Invoke 方法，所以应该在名为 NativeMethods、SafeNativeMethods 或 UnsafeNativeMethods 的类中定义“IconUtil.SHGetFileInfo(string, uint, out IconUtil.SHFILEINFO, uint, uint)”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T12:54:09.723

警告所指的 MSDN 页面是本机功能的文档[`SHGetFileInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762179.aspx)。它给出的签名为：

```
DWORD_PTR SHGetFileInfo(
  __in     LPCTSTR pszPath,
  DWORD dwFileAttributes,
  __inout  SHFILEINFO *psfi,
  UINT cbFileInfo,
  UINT uFlags
); 
```

所以第一个警告是指`DWORD_PTR`指针大小的无符号整数这一事实。这意味着您应该使用`UIntPtr`.

接下来跳出来的是该`SHFILEINFO`结构被指示为`__inout`. 这意味着你需要通过它`ref`。

所以 p/invoke 声明应该是：

```
[DllImport("shell32", CharSet=CharSet.Unicode)]
private static extern UIntPtr SHGetFileInfo(
    string pszPath, 
    uint dwFileAttributes, 
    ref SHFILEINFO psfi, 
    uint cbFileInfo, 
    uint flags
); 
```

最后的警告很容易解决。只需将您的 p/invoke 声明放在名为`NativeMethods`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:08:21.773

`int`我通过将返回类型更改为to解决了第一个问题`IntPtr`。

# java - 无法打印出读取的整数：java

> ID：10362291
> 
> 赞同：0
> 
> 时间：2012-04-28T09:32:53.427
> 
> 标签：java, methods, io

我正在创建一个程序，它将打印出 pi 的数字，直到用户指定的数字。我可以读取用户的输入，我可以读取文本文件，但是当我打印位数时，它会打印出错误的数字。

“Pi.txt”包含“3.14159”。这是我的代码：

```
 package pireturner;

    import java.io.*;
    import java.util.Scanner;

    class PiReturner {

        static File file = new File("Pi.txt");
        static int count = 0;

        public PiReturner() {

        }
        public static void readFile() {
            try {
                System.out.print("Enter number of digits you wish to print: ");
                Scanner scanner = new Scanner(System.in);
                BufferedReader reader = new BufferedReader(new FileReader(file));
                int numdigits = Integer.parseInt(scanner.nextLine());

                int i;
                while((i = reader.read()) != -1) {
                    while(count != numdigits) {
                        System.out.print(i);
                        count++;
                    }
                }

            } catch (FileNotFoundException f) {
                System.err.print(f);
            } catch (IOException e) {
                System.err.print(e);
            }
        }            

        public static void main(String[] args ) {
            PiReturner.readFile();
        }
    } 
```

如果用户输入 3 作为他们希望打印的位数，这将打印出“515151”。我不知道为什么会这样，我也不确定我做错了什么，因为没有错误，而且我已经测试了阅读方法并且工作正常。任何帮助将不胜感激。提前致谢。

顺便说一句，将整数 'i' 转换为 char 将打印出 333（假设输入为 3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:34:03.093

值 51 是字符 的 Unicode 代码点（和 ASCII 值）`'3'`。

要显示`3`而不是`51`您需要在打印之前将其`int`转换为：`char`

```
System.out.print((char)i); 
```

您的循环中也有错误。如果到达文件末尾或达到所需的位数，则应该有一个循环停止：

```
while(((i = reader.read()) != -1) && (count < numdigits)) { 
```

您的代码还将字符计`.`为数字，但它不是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:46:06.527

您只从文件中读取一个字符 - '3'（字符代码 51，正如 Mark Byers 指出的那样），然后打印 3 次。

```
 int i;
     while((count < numdigits) && ((i = reader.read()) != -1)) {
        System.out.print((char)i);
        count++;
     } 
```

如果用户说他们想要 4 位 pi，您打算打印`3.14`还是`3.141`？

上面的代码将打印`3.14`4 - 因为它是 4 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:53:23.637

在输出 numdigit 乘以 3 之前，您的内部循环不会离开

```
 while (count != numdigits) {
             System.out.print(i);
             count++;
         } 
```

反而 ...

```
 int numdigits = Integer.parseInt (scanner.nextLine ());
    // for the dot
    if (numdigits > 1) 
        ++numdigits;
    int i;

    while ((i = reader.read ()) != -1 && count != numdigits) {
         System.out.print ((char) i);
         count++;
   } 
```

# javascript - 如何在 Jquery 对话框上设置内容

> ID：10362295
> 
> 赞同：8
> 
> 时间：2012-04-28T09:33:02.277
> 
> 标签：javascript, jquery, html

```
$("#note_content").dialog({
            title: "Note",
            modal: true,
            width:'auto',
            height:'auto',
            resizable:false,

            open: function(){
                var note_text = $('#note_content').attr('note_text');
     }
} 
```

在我的代码中，我尝试将 note_text 设置为对话框的内容，知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T09:38:47.290

You can try this: [**DEMO**](http://jsfiddle.net/Ldktu/160/)

```
var SplitText = "Title"
var $dialog = $('<div></div>')
    .html(SplitText )
    .dialog({
        height: 500,
        width: 600,
        title: 'Title'});

$dialog.dialog('open');

$dialog.html('Some text');
​ 
```

​</p>

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T09:37:15.213

You should have a content place holder inside your dialog, for example:

```
<div id="noteContent" title="Basic dialog">
   <p id="contentholder"> This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

$("#note_content").dialog({
    title: "Note",
    modal: true,
    width:'auto',
    height:'auto',
    resizable:false,

    open: function(){
        var note_text = $('#note_content').attr('note_text');
       $("#contentholder").val(note_text)
    }
} 
```

You had your note_text assigned to a variable in this line:

```
var note_text = $('#note_content').attr('note_text'); 
```

However, you didn't assign the note_text variable to the placeholder.

# ruby-on-rails - 想在 2.2.2 的 rails 中进行单元测试，但失败了。谁能告诉我原因并帮助我找到解决方案？

> ID：10362298
> 
> 赞同：0
> 
> 时间：2012-04-28T09:33:32.410
> 
> 标签：ruby-on-rails, ruby, unit-testing

我正在关注使用 Rails 进行敏捷 Web 开发，第三版第 14 章。

我在windows中使用命令行输入这个命令： **D:\InstantRails-2.0-win\rails_apps\GraduateDesign\depot>ruby -I test test/unit/product_test.rb**

**错误消息显示如下：**

```
D:/InstantRails-2.0-win/rails_apps/GraduateDesign/depot/app/controllers/users_co
ntroller.rb:48: warning: don't put space before argument parentheses
D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.2.2/lib/acti
ve_support/dependencies.rb:445:in `load_missing_constant': uninitialized constan
t RUBY_COPYRIGHT (NameError)
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2
.2.2/lib/active_support/dependencies.rb:77:in `const_missing'
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2
.2.2/lib/active_support/dependencies.rb:89:in `const_missing'
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/rbx-require-rel
ative-0.0.9/lib/require_relative.rb:51
        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom
_require.rb:36:in `gem_original_require'
        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom
_require.rb:36:in `require'
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2
.2.2/lib/active_support/dependencies.rb:155:in `require'
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/linecache-0.45-
x86-mswin32/lib/linecache.rb:66
        from D:/InstantRails-2.0-win/ruby/lib/ruby/site_ruby/1.8/rubygems/custom
_require.rb:31:in `gem_original_require'
         ... 16 levels...
        from D:/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2
.2.2/lib/active_support/dependencies.rb:155:in `require'
        from D:/InstantRails-2.0-win/rails_apps/GraduateDesign/depot/test/test_h
elper.rb:3
        from test/unit/product_test.rb:1:in `require'
        from test/unit/product_test.rb:1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:27:22.470

错误消息的重要部分是 rails 找不到`RUBY_COPYRIGHT`常量。自 1.8.7 以来，此常量是 ruby​​ 本身的一部分，因此我认为您使用的是较旧的东西。

鉴于此，您应该真正考虑一下

1.  更新你的 Ruby。当前版本是 1.9.3
2.  使用较新的 Rails。2.2.2 版**严重**过时。3.2.2 中的当前版本。

如果你的书/文档坚持使用这些旧版本，你应该找一本更好的书，尤其是在第一次学习 Rails 时。自 Ruby 1.8.6 和 Rails 2.2 以来，情况发生了重大变化。第四版 Agile Web Development with Rails 涵盖了 Rails 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:58:44.247

我认为这不是导致错误的原因，但如果您忽略了它，您可能会检查它。

错误的第一行是这样的：

`warning: don't put space before argument parentheses`users_controller.rb 中的第 48 行。

# antlr - ANTLR 词法分析器中的特殊字符处理

> ID：10362300
> 
> 赞同：2
> 
> 时间：2012-04-28T09:33:44.310
> 
> 标签：antlr, antlr3

我为字符串变量声明编写了以下语法。字符串的定义与单引号之间的任何内容一样，但必须有一种方法可以通过使用**$**字母转义来将单引号添加到字符串值。

```
grammar test;

options       
{   
    language = Java;
}

tokens
{   
    VAR = 'VAR';
    END_VAR = 'END_VAR';
}

var_declaration: VAR string_type_declaration END_VAR EOF;

string_type_declaration: identifier ':=' string;

identifier: ID;

string: STRING_VALUE;

STRING_VALUE: '\'' ('$\''|.)* '\'';

ID:  LETTER+;

WSFULL:(' ') {$channel=HIDDEN;};

fragment LETTER: (('a'..'z') | ('A'..'Z')); 
```

如果您尝试为 var_declaration 规则运行此代码，则此语法不起作用：

```
VAR A :='$12.2' END_VAR 
```

我得到 MismatchedTokenException。

但是此代码适用于 string_type_declaration 规则：

```
A :='$12.2' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T10:22:50.580

您`STRING_VALUE`的标记不正确。在循环内部`( ... )*`，`$`它后面需要一个单引号，但是输入中的字符串 ,`'$12.2'`后面没有引号`$`。您应该将单引号设为可选`('$' '\''? | .)*`。但是现在您在循环中的替代方案`.`, 也将匹配单引号：最好让它匹配单引号和 以外的任何内容`$`：

```
STRING_VALUE
 : '\'' ( '$' '\''? | ~('$' | '\'') )* '\''
 ; 
```

产生以下解析树：

![在此处输入图像描述](../Images/d55b9b80c4a35d76417acdd4fbfa57b4.png)

# xslt - 仅在第一次遇到 XSL 时显示 XML 属性值

> ID：10362310
> 
> 赞同：-5
> 
> 时间：2012-04-28T09:34:58.340
> 
> 标签：xslt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:31:45.470

看起来您只想为您在 XML 中找到的第一个**svrl:failed-assert**元素输出“结果观察 - 警告验证阶段”消息的段落，而不是其他任何元素。

你需要做的是有一个模板来匹配第一个这样的元素，它可以输出第一段，然后调用命名模板**svrl:failed-assert**也将匹配所有其他元素。

```
<xsl:template match="svrl:failed-assert[1]">
   <p>
      <u>
         <xsl:value-of select="(preceding-sibling::svrl:active-pattern)/@name[1]"/>
      </u>
   </p>
   <xsl:call-template name="svrl:failed-assert"/>
</xsl:template>

<xsl:template match="svrl:failed-assert" name="svrl:failed-assert">
    <!-- Existing code here --> 
```

这是一个简化的 XSLT（没有任何查找和替换代码）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:svrl="oh:no" exclude-result-prefixes="svrl">
   <xsl:output method="html" indent="yes"/>
   <xsl:template match="svrl:failed-assert[1]">
      <p>
         <u>
            <xsl:value-of select="(preceding-sibling::svrl:active-pattern)/@name[1]"/>
         </u>
      </p>
      <xsl:call-template name="svrl:failed-assert"/>
   </xsl:template>
   <xsl:template match="svrl:failed-assert" name="svrl:failed-assert">
      <table width="800">
         <tr>
            <td colspan="2">
               <font color="red">
                  <xsl:value-of select="svrl:text"/>
               </font>
            </td>
         </tr>
         <tr>
            <td width="50">Test:</td>
            <td width="750">
               <i>
                  <xsl:value-of select="@test"/>
               </i>
            </td>
         </tr>
      </table>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于以下简化的 XML 时：

```
<a xmlns:svrl="oh:no">
   <svrl:active-pattern name="Result observation - warning validation phase"/>
   <svrl:fired-rule context="Context 1"/>
   <svrl:failed-assert test="Test 1" location="Location 1">
      <svrl:text>Text 1</svrl:text>
   </svrl:failed-assert>
   <svrl:failed-assert test="Test 2" location="Location 2">
      <svrl:text>Text 2</svrl:text>
   </svrl:failed-assert>
   <svrl:fired-rule context="Context 2"/>
   <svrl:failed-assert test="Test 3" location="Location 3">
      <svrl:text>Text 3</svrl:text>
   </svrl:failed-assert>
</a> 
```

输出以下 HTML：

```
<p>
   <u>Result observation - warning validation phase</u>
</p>
<table width="800">
   <tr>
      <td colspan="2">
         <font color="red">Text 1</font>
      </td>
   </tr>
   <tr>
      <td width="50">Test:</td>
      <td width="750">
         <i>Test 1</i>
      </td>
   </tr>
</table>
<table width="800">
   <tr>
      <td colspan="2">
         <font color="red">Text 2</font>
      </td>
   </tr>
   <tr>
      <td width="50">Test:</td>
      <td width="750">
         <i>Test 2</i>
      </td>
   </tr>
</table>
<table width="800">
   <tr>
      <td colspan="2">
         <font color="red">Text 3</font>
      </td>
   </tr>
   <tr>
      <td width="50">Test:</td>
      <td width="750">
         <i>Test 3</i>
      </td>
   </tr>
</table> 
```

# ios - Override shouldAutorotateToInterfaceOrientation defined in Category

> ID：10362314
> 
> 赞同：0
> 
> 时间：2012-04-28T09:35:58.897
> 
> 标签：ios, objective-c, ios5

I have the following category defined to allow orientation in a `TabBarController`

```
@implementation UITabBarController (MyApp) 

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

@end 
```

Now there are a couple of `viewcontroller`s where I don't want to allow landscape-mode. Because I used categories the methods in the `viewcontroller`s are ignored. Is there a way to solve this?

(I know you can subclass `UITabBarController` but this is discouraged by Apple themself).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:50:46.603

您可以像这样询问您类别中的当前视图控制器：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [[self selectedViewController] shouldAutorotateToInterfaceOrientation:interfaceOrientation];
} 
```

您可能想要实现更多逻辑，具体取决于您的需要。此外，在您的情况下，子类化比自定义类别更好，全局覆盖事物可能会在未来的某个时候中断。

# javascript - Delete element using javascript

> ID：10362320
> 
> 赞同：0
> 
> 时间：2012-04-28T09:37:14.147
> 
> 标签：javascript, xhtml

I have a textbox. On focus I call a javascript function in which I create a new element with this way:

```
var label = document.createElement("label");
label.innerHTML = "*For a more secure password use letters and digits";
document.getElementById('picturediv').appendChild(label); 
```

But `onblur` I call another function and then I want to remove this element. I've tried with the remove but it is not working. I am not sure if the remove is suitable for that.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:40:17.457

You can remove it this way:

```
function removeLabel() {
    document.getElementById('picturediv').removeChild(document.getElementById('picturediv').getElementsByTagName('label')[document.getElementById('picturediv').getElementsByTagName('label').length - 1]);
} 
```

edit:

The function with comments:

```
function removeLabel() {
    var parentNode = document.getElementById('picturediv'); // The parentNode of the label element

    var tagsWithLabel = parentNode.getElementsByTagName('label'); // All elements with tag name label

    var length = tagsWithLabel.length; // The length of the node array

    parentNode.removeChild(tagsWithLabel[length - 1]); // Deleting the last element with tage name label from parentNode.
} 
```

edit because of comment:

```
function removeLabel(id) {
    document.getElementById(id).removeChild(document.getElementById(id).getElementsByTagName('label')[document.getElementById(id).getElementsByTagName('label').length - 1]);
} 
```

to delete label 1: `removeLabel('picturediv');` to delete label 2: `removeLabel('picturediv2');`

# python - 如何使用 python-mysql “获取两个”？

> ID：10362323
> 
> 赞同：1
> 
> 时间：2012-04-28T09:37:16.920
> 
> 标签：python, select, mysql-python

我有一个表，我想执行一个返回两行值的查询：

```
 cursor.execute("""SELECT `egg_id`
                      FROM `groups`
                      WHERE `id` = %s;""", (req_id))
    req_egg = str(cursor.fetchone())
    print req_egg 
```

该列`egg_id`有两行可以为该查询返回，但是上面的代码只会打印第一个结果——我希望它也显示第二个，我如何获得这两个值？

编辑：有没有办法用 fetchmany 将每个变量存储在一个单独的变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:46:05.187

在这种情况下，您可以使用 fetchmany 来获取指定数量的行：

```
req_egg = cursor.fetchmany(2) 
```

编辑：

但请注意：如果您有一个包含很多行但只需要两行的表，那么您还应该`LIMIT`在 sql 查询中使用 a ，否则所有行都从数据库返回，但您的程序只使用了两行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:44:26.467

再次调用 .fetchone() ，它会返回下一个结果。

否则，如果您 100% 肯定您的查询将始终准确返回两个结果，即使您在数据库中有错误或不一致的数据，那么只需执行 .fetchall() 并捕获两个结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T09:44:42.050

试试这个：

```
Cursor.fetchmany(size=2) 
```

sqlite3 的文档（也实现了 dbapi）：[http ://docs.python.org/library/sqlite3.html#sqlite3.Cursor.fetchmany](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.fetchmany)

# java - intent RECORD_SOUND_ACTION on LGP500

> ID：10362325
> 
> 赞同：0
> 
> 时间：2012-04-28T09:37:35.903
> 
> 标签：java, android, audio, audio-recording, audiorecord

I am writing code to run RECORD_SOUND

```
 Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
    startActivityForResult(intent, AUDIO_RESULT); 
```

works on all phones, but it crashes LGP500

what is the problem?

```
04-28 14:54:18.754: E/AndroidRuntime(10446): FATAL EXCEPTION: main
04-28 14:54:18.754: E/AndroidRuntime(10446): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.provider.MediaStore.RECORD_SOUND }
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.app.Activity.startActivityForResult(Activity.java:2817)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at com.webparadox.tonquer.Map.sound(Map.java:537)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at com.webparadox.tonquer.Map.onClick(Map.java:559)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.view.View.performClick(View.java:2408)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.view.View$PerformClick.run(View.java:8816)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.os.Handler.handleCallback(Handler.java:587)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.os.Looper.loop(Looper.java:123)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at java.lang.reflect.Method.invokeNative(Native Method)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at java.lang.reflect.Method.invoke(Method.java:521)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
04-28 14:54:18.754: E/AndroidRuntime(10446):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:45:36.623

我自己发现在 android 中使用音频记录是最糟糕的工作。由于录音机的实现留给了 OEM，并非所有电话都可以使用 Intents 正常工作，有些电话不返回任何内容，有些电话总是返回 ACTIVITY_CANCELED。

似乎 lg 甚至还没有实现任何东西来处理 p500 手机中的语音记录，或者至少没有设置他们的语音记录来捕捉意图呼叫。您可以尝试安装另一个录制到手机的声音，看看它是否有效。

顺便说一句，我想你已经设置了你的权限，对吧？:P

# javascript - Configuring Royal Slider to work in Magento

> ID：10362327
> 
> 赞同：1
> 
> 时间：2012-04-28T09:38:02.267
> 
> 标签：javascript, jquery, magento, slider

For the past few days I've been trying my best to get this [slider](http://dimsemenov.com/plugins/royal-slider/#banner-rotator) to work in Magento. However nothing seem to be working.

This is the documentation for it: [http://dev.clickymedia.co.uk/web/documentation.html](http://dev.clickymedia.co.uk/web/documentation.html)

So, what I did was add this to the head.phtml:

```
<script type="text/javascript">
jQuery(document).ready(function($) {        
    $('#banner-rotator').royalSlider({            
           imageAlignCenter:true,
           hideArrowOnLastSlide:true,
           slideSpacing:20
    });        
});
</script> 
```

I then added the various css and js files in their respective folders and added this code to Magento's homepage CMS, design>custom design>Custom Layout Update XML>

```
<reference name="head">
<action method="addJs"><script>jquery/jquery-1.6.2.min.js</script></action>
<action method="addJs"><script>jquery/jquery.easing.1.3.min.js</script></action>
<action method="addJs"><script>jquery/royal-slider-8.1.min.js</script></action>
<action method="addCss"><script>css/royalslider.css</script></action>
<action method="addCss"><script>css/royalslider-skins/default/default.css</script
</action>
</reference> 
```

lastly, in the homepage CMS, page content, I added this:

```
<div id="banner-rotator" class="royalSlider default">
<ul class="royalSlidesContainer">
<li class="royalSlide"> <img class="royalImage" src="{{media url="wysiwyg/slider/banner1.png"}}" alt="banner1" width="1150" height="400" />
<div class="royalCaption" style="left: 58%; text-align: center; color: #33383e; width: 315px; top: 110px;">
<div class="royalCaptionItem" style="width: 100%;">Animated Blocks</div>
<div class="royalCaptionItem sgMidText" style="top: 35px; width: 100%;">with Custom Effects for Each Item</div>
<div class="royalCaptionItem sgSmallText " style="top: 70px; left: 96px;"><a class="tintButton non-draggable" href="[removed]void()">Button Example</a></div>
</div>
</li>
<li class="royalSlide"> <img class="royalImage" src="{{media url="wysiwyg/slider/banner2.png"}}" alt="banner2" width="1150" height="400" />
<div class="royalCaption" style="left: 57%; top: 65px; color: #b93;">
<div class="royalCaptionItem" style="width: 280px;">Drag Navigation</div>
<div class="royalCaptionItem sgMidText" style="left: 120px; top: 35px; width: 200px;">with Mobile Support</div>
</div>
</li>
<li class="royalSlide"> <img class="royalImage" src="{{media url="wysiwyg/slider/banner3.png"}}" alt="banner3" width="1150" height="400" />
<div class="royalCaption" style="left: 40%; top: 130px; width: 300px; color: #eaeaed;">
<div class="royalCaptionItem " style="left: -320px;">Autoplay Slideshow</div>
<div class="royalCaptionItem sgMidText" style="left: -200px; top: 30px;">with Pause on Hover</div>
</div>
</li>
<li class="royalSlide"> <img class="royalImage" src="{{media url="wysiwyg/slider/banner4.png"}}" alt="banner4" width="1150" height="400" />
<div class="royalCaption" style="left: 40%; top: 120px; width: 400px; color: #4e4c39; text-align: center;">
<div class="royalCaptionItem " style="left: -320px; width: 100%;">Smart Lazy-Loading</div>
<div class="royalCaptionItem sgMidText" style="left: -320px; top: 35px; width: 100%;">Preloads Nearby Images After Current</div>
</div>
</li>
</ul>
</div> 
```

Although the slider is said to be a simple little JavaScript plugin, I am a newbie at this and have no success in adding to Magento. Please, if you have a solution for this, do help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:25:03.693

这在我看来好像你在 jQuery 和原型之间有冲突。

看一下[magento using jquery with noconflict](https://stackoverflow.com/questions/8310233/magento-using-jquery-with-noconflict)的公认答案，我认为您应该检查是否需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T10:02:38.283

故障可能出在您的更新 xml 部分。试试这个：

```
<reference name="head">
<action method="addItem"><type>skin_js</type><name>jquery/jquery-1.6.2.min.js</name></action>
<action method="addItem"><type>skin_js</type><name>jquery/jquery.easing.1.3.min.js</name></action>
<action method="addItem"><type>skin_js</type><name>jquery/royal-slider-8.1.min.js</name></action>
<action method="addItem"><type>skin_css</type><name>css/royalslider.css</name><params/><if><![CDATA[<!--[]><!-->]]></if></action>
<action method="addItem"><type>skin_css</type><name>css/royalslider-skins/default/default.css</name><params/><if><![CDATA[<!--[]><!-->]]></if></action>
</reference> 
```

# android - 如何在android上创建用于访问OData服务的代理

> ID：10362329
> 
> 赞同：1
> 
> 时间：2012-04-28T09:38:20.307
> 
> 标签：android, odata

我是 android 新手，我正在按照[本教程](http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx)访问 android 上的 OData 服务。我被困在必须制作代理才能访问 Odata 服务的地方。谁能告诉我如何制作代理？该教程说使用以下方法开发它：

IDataServiceProxy 代理 = 新 DataServiceAtomPubProxyImpl(DataServiceClient.URL);

我试图将它包含在我的 MainActivity.java 中，但它不起作用。你能告诉我这些类是在哪里定义的：IDataServiceProxy、DataServiceAtomPubProxyImpl、DataServiceClient。? 以及如何继续为我的 android 应用程序制作代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:17:00.240

该示例没有对此进行解释，但实际上非常简单：

如果您查看从 java-project 导入的文件，您应该有一个名为“ *MyData* **OdataAppService.java** ”的文件。这是您的服务，而不是您在示例中看到的其他文件。

要获得该服务，您只需创建一个新实例：

**MyDataOdataAppService 服务 = new MyDataOdataAppService ();**

...然后你可以运行 service.createMyItemQuery("............");

# google-app-engine - How do I handle time zones on my Google AppEngine server?

> ID：10362330
> 
> 赞同：0
> 
> 时间：2012-04-28T09:38:31.533
> 
> 标签：google-app-engine, timezone

My Google AppEngine app does a url fetch to a remote server to sync RSS feeds from a remote location and shows to users on the client side. These RSS feeds have different time zones. How do I get to manage the different time zones coming from the RSS feeds into my GAE app such that there would be no conflict amongst users viewing the information?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:31:06.387

你见过[gae-pytz](http://code.google.com/p/gae-pytz/)吗？我将它用于不同的目的，但它对我很有用。

# javascript - Calling JSON file from URL in JavaScript

> ID：10362332
> 
> 赞同：0
> 
> 时间：2012-04-28T09:38:35.063
> 
> 标签：javascript, json, url, routes

I am trying to read a JSON file from a webpage and display the route contained in the file over my map in OpenLayers. I found another example similar to mine, [How to fetch JSON from a URL using JavaScript?](https://stackoverflow.com/q/7499555/623518), but I couldn't get it working.

I create the URL string containing as, for example, something like this:

```
http://router.project-osrm.org/viaroute?rebuild=1&amp;loc=43.46711564169348,-3.880102031707764&amp;loc=43.4669443349282,-3.862788677215576&amp;output=json 
```

This webpage should return a JSON file with all the points I have to follow to reach my end point. I know this works because I tried with this example:

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Open Space Web-Map builder Code</title>
</head>
<body>
    <div class="header-content">
    [
    <a class="result-link" onClick="document.location.href='http://router.project-    osrm.org/viaroute?  rebuild=1&amp;loc=43.46711564169348,-3.880102031707764&amp;loc=43.4669443349282,-3.862788677215576&amp;output=json';">Generar ruta</a>
    ]
    </div>
</body>
</html>​ 
```

And it returns a JSON file, as shown below. But if I try to use my page, it doesn't work. I have this function to read JSON file:

```
function pintarRutaCamion() {
    capaRuta = new OpenLayers.Layer.Vector("capaRuta");
    var style_green = {
        strokeColor: "#00FF00",
        strokeOpacity: 1,
        strokeWidth: 6
    };
    var pointRuta = [];

    alert(rutaCompleta); //show the complete url
    JQ.getJSON(rutaCompleta, function(puntosRuta) {
        alert(puntosRuta.route_geometry.length); //show size of returned json file
        for (i = 0; i < puntosRuta.route_geometry.length; i++) {
            coordenadas = new OpenLayers.LonLat(puntosRuta.route_geometry[i][1], puntosRuta.route_geometry[i][0]).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
            pointruta.push(coordenadas);
        }

    });

    //create a polyline feature from the array of points 
    var lineString = new OpenLayers.Geometry.LineString(pointRuta);
    var lineFeature = new OpenLayers.Feature.Vector(lineString, null, style_green);
    capaRuta.addFeatures([lineFeature]);
    //add it to the map 
    map.addLayer(capaRuta);
}​ 
```

The JSON file should be something like this:

```
{"version": 0.3,
 "status": 0,
 "status_message": "Found route between points",
 "route_geometry": [[43.46716, -3.87987],[43.46668, -3.87963],[43.46706, -3.87761],[43.46593, -3.87740],[43.46571, -3.87552],[43.46559, -3.87515],[43.46553, -3.87512],[43.46549, -3.87504],[43.46548, -3.87496],[43.46550, -3.87487],[43.46554, -3.87482],[43.46558, -3.87433],[43.46533, -3.87210],[43.46535, -3.87185],[43.46546, -3.87128],[43.46592, -3.86911],[43.46598, -3.86859],[43.46593, -3.86824],[43.46589, -3.86818],[43.46587, -3.86808],[43.46588, -3.86800],[43.46581, -3.86780],[43.46560, -3.86761],[43.46545, -3.86756],[43.46526, -3.86756],[43.46517, -3.86760],[43.46511, -3.86760],[43.46502, -3.86753],[43.46498, -3.86743],[43.46497, -3.86734],[43.46499, -3.86718],[43.46510, -3.86711],[43.46521, -3.86696],[43.46530, -3.86675],[43.46547, -3.86606],[43.46569, -3.86504],[43.46639, -3.86166],[43.46716, -3.86194],[43.46698, -3.86278]],
 "route_instructions": [["10","",56,0,155,"56m","SE",203.5],["7","",167,1,242,"167m","E",281.06],["3","Calle PolvorÃ­n",126,2,182,"126m","S",189.18],["7","CA-231",185,3,131,"185m","E",262.42],["11-2","CA-231",536,10,350,"536m","E",277.7],["11-1","CA-231",82,20,52,"82m","E",250.51],["11-2","Calle del Somo",36,31,19,"36m","NE",310.15],["1","Calle de El Somo",426,33,236,"426m","E",285.81],["7","Calle de Antonio Nebrija",88,36,127,"88m","N",17.56],["7","Calle de Manuel Cacicedo",70,37,76,"70m","W",103.84],["15","",0,38,0,"","N",0.0]],
 "route_summary": {"total_distance": 1890,
                   "total_time": 179,
                   "start_point": "",
                   "end_point": "Calle de Manuel Cacicedo"},
 "via_points": [],
 "hint_data": {"checksum": -1013584035,
               "locations": ["xqyjHgAAAACbAAAAzwAAABj5Tb5MZ9s_XFNCAG0U-v9", "WVr_FtzAKgAzAQAAaAAAAK5H_5Np-ec_SlNCABob-v9"]},
 "transactionId": "OSRM Routing Engine JSON Descriptor (v0.3)"} 
```

But it is impossible to get inside that function. I don't know what happens. I tried writing `document.location.href=` as the other example in the URL string but this also fails. Can anyone suggest why this is not working?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:04:43.680

你的网址应该是这样的，

```
http://router.project-osrm.org/viaroute?rebuild=1&loc=43.46711564169348,-3.880102031707764&loc=43.4669443349282,-3.862788677215576&output=json 
```

而且似乎不支持 jsonp 回调，因此您不能直接使用 $.getJSON 请求，因为[Cross-Origin Resource Sharing](http://www.w3.org/TR/cors/)。

你应该使用代理来避免这个问题，例如你可以使用[YQL](http://developer.yahoo.com/yql/)

[这是您的网址的示例](http://developer.yahoo.com/yql/console/#h=select%20%2a%20from%20html%20where%20url=%22http://router.project-osrm.org/viaroute?rebuild=1&loc=43.46711564169348,-3.880102031707764&loc=43.4669443349282,-3.862788677215576&output=json%22)

# asp.net-mvc - mvc4 和 EF 中的 Html.EditorFor 和多行文本框

> ID：10362333
> 
> 赞同：3
> 
> 时间：2012-04-28T09:38:46.210
> 
> 标签：asp.net-mvc, entity-framework, razor

`@HTMLEditorFor`自动检测模型的数据类型是否更适合显示在多行文本框中的标准是什么？使用 MVC4、razor 和 EF4.3 DatabaseFirst。我正在使用控制器向导搭建页面进行 CRUD 操作。Edit.cshtml 和 Create.cshtml 都在使用

```
@Html.EditorFor(model => model.message) 
```

显示文本框。如果我编辑脚手架 Myemail.cs 类，我可以添加一个 DataAnnotation

```
 [DataType(DataType.MultilineText)]
 public string message { get; set; } 
```

我现在得到一个`<TextArea>`生成的（尽管开始使用的大小不切实际（一条线和 178 像素）。当 tt 模板生成模型时这不应该是自动的吗？或者我是否需要以某种方式修改 tt 模板以假设`<TextArea>`字段是`varchar`大小大于 100的等？

干杯蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:21:20.337

认为我有部分答案。通过阅读更多关于 TextTemplatesTransformations 我修改了我的 Model1.tt 以包括：

```
System.ComponentModel.DataAnnotations; 
```

我还修改了 WriteProperty 方法以接受 EdmPropertyType。该代码现在为来自指定长度 > 60 或最大定义字符串的所有字符串生成多行注释。它还生成一个 maxlength 注释，希望有助于防止溢出。如果使用，您将需要修改现有的 WriteProperty 重载，如下所示。

```
void WriteProperty(CodeGenerationTools code, EdmProperty edmProperty)
{
    WriteProperty(Accessibility.ForProperty(edmProperty),
                  code.Escape(edmProperty.TypeUsage),
                  code.Escape(edmProperty),
                  code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
                  code.SpaceAfter(Accessibility.ForSetter(edmProperty)),edmProperty);
}

void WriteProperty(string accessibility, string type, string name, string getterAccessibility, string setterAccessibility,EdmProperty edmProperty = null)
{
    if (type =="string")    
    {
        int maxLength = 0;//66
        bool bres = (edmProperty != null
            && Int32.TryParse(edmProperty.TypeUsage.Facets["MaxLength"].Value.ToString(), out maxLength));
        if (maxLength > 60) // want to display as a TextArea in html 
        {
#> 
    [DataType(DataType.MultilineText)]
    [MaxLength(<#=maxLength#>)]
<#+
        }
        else
        if (maxLength < 61 && maxLength > 0) 
        {
#> 
    [MaxLength(<#=maxLength#>)]
<#+
        }
        else
        if(maxLength <=0) //varchar(max)
        {
#> 
    [DataType(DataType.MultilineText)]
<#+
        }

    }
#>
    <#=accessibility#> <#=type#> <#=name#> { <#=getterAccessibility#>get; <#=setterAccessibility#>set; }
<#+
} 
```

确保 <#+ 行和 #> 行从行首开始，因为我认为这是 TT 语法的要求。

蒂姆

# c# - 多对多进程间通信，没有中央集线器

> ID：10362335
> 
> 赞同：0
> 
> 时间：2012-04-28T09:38:48.397
> 
> 标签：c#, inter-process-communicat

我正在寻找一种有效的方法来处理我机器上运行的多个进程之间的多对多通信。

我的要求是：

*   没有中央集线器（例如没有路由消息的中央进程）
*   所有进程都必须能够发送消息
*   当有新消息（来自任何其他进程）可用时，所有进程都会收到通知

我更喜欢基于命名管道的解决方案（例如，基于文件系统的解决方案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:12:07.873

您可以尝试将 Windows Communication Foundation (WCF) 与对等绑定 ( [NetPeerTcpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netpeertcpbinding.aspx) ) 一起使用。您基本上可以在其上创建一个分散的消息总线。它是基于 TCP 的，但是在同一台计算机上时速度非常快，因此它适用于进程间通信（虽然技术上命名的管道可以实现更快的吞吐量和更好的延迟，但仅适用于对性能非常敏感的应用程序）。

阅读“[使用 WCF 进行对等编程](http://msdn.microsoft.com/en-us/library/cc297274.aspx)”以了解该主题的介绍。

# android - Accessing Background Service Through MainActivity

> ID：10362336
> 
> 赞同：0
> 
> 时间：2012-04-28T09:38:52.677
> 
> 标签：android, service, background, location

So i have a background service which gets location updates and I want to access the service from my tabActivity. (The method is static)

Can you tell me how to achieve that ? if i try xxxService.yyyMethod() it is not working.

I am talking about a background service started by the activity, then the activity was closed by the user and restarted. The service was bound to the same activity and also start() (so it continues to exist even after activity is closed). By not working I mean the method is not returning anything While it is supposed to. Also, any statements after the method call doesnt execute. – Ishwar 27 secs ago edit

In the activity: Bounding: *

```
mConnection = new ServiceConnection() {    
            public void onServiceConnected(ComponentName className, IBinder service) {
                temp="LocationService bound";

                locationService = ((LocationService.LocalBinder) service).getService();
                locationService.setProfile(Profile);
                locationService.start();
                Log.e("COnnected","");
                mBound = true;              
            }
            public void onServiceDisconnected(ComponentName arg0) {
                mBound = false;
            }
        }; 
```

*

The error area: *

```
LocationService.setProfile(homeProfile); (works fine)       
LocationService.getL(); (Any statement beyond this point doesnt get executed)
Log.e("Executed","LS");                     settingsActivity.status.append(Boolean.toString(LocationService.isRunning())); 
```

*

If I comment out the 2nd line, 3rd and 4th line gets executed, otherwise it doesnt! P.S: If I dont quit my activity, everything works. The problem only occurs if I quit my activity and restart it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:42:30.013

您只能从`TabActivity`. 您需要为选项卡设置特定活动，然后`Service`从该活动访问方法。所以基本上你的`xxxService.yyyMethod()`电话应该在活动中。

# c# - C# 序列化嵌套的自定义类列表

> ID：10362340
> 
> 赞同：4
> 
> 时间：2012-04-28T09:39:13.160
> 
> 标签：c#, .net, list, class, serialization

我在从嵌套的自定义类列表中保存序列化数据时遇到问题。你如何正确地序列化这些类？

```
[System.Serialize]
public class OuterClass() {
  List<InnerClass> someList = new List<InnerClass>();
  public OuterClass() {}
}
public class InnerClass() {
  public int someInt;
  public InnerClass(int _someInt) {
    someInt = _someInt;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:44:36.707

`[Serializable]`用属性标记你的班级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:40:40.270

该类`InnerClass`也应该具有`[System.Serialize]`能够序列化它的属性。这些方面的东西：

```
[System.Serialize]
public class OuterClass() {
  List<InnerClass> someList = new List<InnerClass>();

  [System.Serialize]
  public class InnerClass() {
    public int someInt;
  }
} 
```

附带说明，您`InnerClass`的不是嵌套的。`OuterClass`如果你想称之为“嵌套类”，它应该在里面定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:44:01.987

包含类和被包含类都必须使用`[Serializable]`属性进行修饰。

# emacs - Building emacs 24.1.50

> ID：10362341
> 
> 赞同：4
> 
> 时间：2012-04-28T09:39:13.963
> 
> 标签：emacs, build

I've just updated to Kubuntu 12.04\. Everything works fine except for the latest custom-build emacs. It says now:

```
emacs: symbol lookup error: emacs: undefined symbol: gtk_window_set_has_resize_grip 
```

So I've decided to re-build emacs. For that I've `git pull` the latest snapshot, and have done everything as I usually do, but now I get an error during compilation:

```
In file included from /home/boris/its/blds/emacs/lib-src/emacsclient.c:76:0:
../lib/getopt.h:196:8: error: redefinition of ‘struct option’
/usr/include/getopt.h:106:8: note: originally defined here
../lib/getopt.h:245:12: error: conflicting types for ‘getopt_long’
/usr/include/getopt.h:175:12: note: previous declaration of ‘getopt_long’ was here
../lib/getopt.h:249:12: error: conflicting types for ‘getopt_long_only’
/usr/include/getopt.h:179:12: note: previous declaration of ‘getopt_long_only’ was here
make[1]: *** [emacsclient] Error 1
make[1]: Leaving directory `/home/boris/its/blds/emacs/lib-src'
make: *** [lib-src] Error 2 
```

Google search reveals almost nothing on these errors.

**Edit**:

The following solves it (thanks to [JSON](https://stackoverflow.com/users/180112/json)):

```
git pull
./autogen.sh
./configure --prefix=/home/boris/its/soft/Emacs_24.1.50
make bootstrap
make install 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:57:22.700

最简单的方法是使用 PPA：[emacs-snapshot](https://launchpad.net/~cassou/+archive/emacs)。

```
sudo add-apt-repository ppa:cassou/emacs
sudo apt-get update
sudo apt-get install emacs-snapshot 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:00:57.323

我在更新到 Ubuntu 12.04 时遇到了这些问题，并通过返回 INSTALL.BZR 的说明进行首次结帐来解决问题 - 由于新版本 Ubuntu 中 libc 的更改，似乎需要重新生成配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T19:40:58.463

这就是我在 git pull 之后构建 emacs 的方法（我的[脚本](https://github.com/xaccrocheur/kituu/blob/master/scripts/px-build-emacs.sh)每晚都做）

```
make distclean && autoreconf -i -I m4 && ./configure && make && sudo make install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T11:51:15.527

我遇到了与操作相同的问题，我只是从系统中删除了 emacs，并从头开始编译。

不，我不必添加 ppa，每次我看到这样的答案获得所有选票时，我都会对 stackexchange 感到疑惑，它只会误导和误导可能有同样问题的其他人。

不，我说过一次，我会再说一遍，只需从 fsf 下载最新的 emacs。

让我补充一点，getopt.h 是 libc6-dev 的一部分（正如 json 所说）。并且 libc6-dev 是所需组的一部分，例如 libjpeg libncurses libpng libtiff xlibs 等。将其删除一次并重新安装。问题在于配置选项路径，这次需要在配置时在 emacs24 的前缀中指定。但 autogen 和 bootstrap 都不是必需的，只需 make 和 make install 即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-10T21:30:10.060

```
make maintainer-clean
./autogen.sh
./configure
make 
```

[http://debbugs.gnu.org/cgi/bugreport.cgi?bug=10108#8](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=10108#8)

我和你有同样的问题，但 24.5 标签。问题是我没有重新运行 autogen.sh 来创建新的配置脚本。我假设任何未跟踪的文件都会被 git status 列出，尽管 autogen.sh 的所有配置输出在 .gitignore 中都会被忽略。

# javascript - Reopenprogram function returns type error "Cannot read property 'style' of null"

> ID：10362342
> 
> 赞同：0
> 
> 时间：2012-04-28T09:39:27.043
> 
> 标签：javascript, onclick

I have the following javascript code which should be able to create a dialog box triggered by an onclick event in the html file. But strangely I alway get the error `Uncaught TypeError: Cannot read property 'style' of null`. By the way the TypeError concerns the reopenprogram(element) function!!! I have already checked whether the element is really null but putting it in alert showed me the usual element name. I know the code looks a little bit rough but I am free for any suggestions. Here is the [jsfiddle code.](http://jsfiddle.net/PhilippB/yY93B/) I am pretty new to javascript so I would be really glad if you could fully adjust the code yourself.

Please help me!

```
function executeprogram(element) {

var program = document.createElement("div");
var toolbar = document.createElement("div");
var title = document.createElement("div");
var minimize = document.createElement("div");
var close = document.createElement("div");
var iframe = document.createElement("iframe");
var container = document.getElementById("container");

// Create program Div //
program.id = element;
program.className = "dialog";
program.width = iframe.width;
add(element);
program.setAttribute("onmousedown", "dragstart(this)");
container.appendChild(program);

// Toolbar //

toolbar.id = "toolbar";
toolbar.width = iframe.width;
program.appendChild(toolbar);

// Title //

title.id = "title";
title.innerHTML = element;
toolbar.appendChild(title);

// Minimize //

minimize.id = "minimize";
minimize.innerHTML = "-";
minimize.onclick = minimizeprogram(element);
toolbar.appendChild(minimize);

// Close //

close.id = "close";
close.innerHTML = "x";
close.onclick = closeprogram(element);
toolbar.appendChild(close);

// Create Iframe //
iframe.frameBorder = 1;
iframe.width = "500px";
iframe.height = "250px";
iframe.id = "iframe";
iframe.src = "#";
program.appendChild(iframe);
}

// Minimize program //

function minimizeprogram(element) {
    document.getElementById(element).style.display = "hidden"; 
}
function reopenprogram(element) {
    document.getElementById(element).style.visibility = "visible"; 
}

// Close program //

function closeprogram(element) {
    var container = document.getElementById("container");
    var app = document.getElementById(element);

    container.removeChild(app);

    remove(element);
}

// Tabs //

function add(element) {
    var tabs = document.createElement("li");
    tabs.id = ""+element+"tab";
    alert(element);
    tabs.onclick = reopenprogram(element);

    var add = document.getElementById("tabs");  
    add.appendChild(tabs);
}
function remove(element) {
    var add = document.getElementById("tabs");
    var app = document.getElementById(element+"tab");
    add.removeChild(app);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:46:04.363

`element`在您的小提琴中，您永远不会将具有参数值id 的元素添加到文档中。这就是原因。

# android - uploading video through ftp using

> ID：10362343
> 
> 赞同：0
> 
> 时间：2012-04-28T09:39:48.790
> 
> 标签：android

In my application I want to upload video using ftp. I included `apache.commons.net` library in my application. When I am running the code it shows `04-28 14:56:05.229: ERROR/dalvikvm(739): Could not find class 'org.apache.commons.net.ftp.FTPClient', referenced from method net.jeema.hwdvideoshare.NewVideoActivity$loadVideo.doInBackground`.

How to solve this problem? I am using the below code:

```
protected Void doInBackground(Void... arg0) {
        String hostName = "ftp.host.net";
        String username = "test";
        String password = "test";
        String location = selectedPath;

        InputStream in = null;
        try {
            FTPClient ftp = new FTPClient();
            ftp.connect(hostName);
            ftp.login(username, password);

            ftp.setFileType(FTP.BINARY_FILE_TYPE);

            ftp.changeWorkingDirectory("/uploads");

            int reply = ftp.getReplyCode();
            System.out.println("Received Reply from FTP Connection:" + reply);

            if (FTPReply.isPositiveCompletion(reply)) {
                System.out.println("Connected Success");
            }

            File f1 = new File(location);
            in = new FileInputStream(f1);

            ftp.storeFile(fname, in);

            System.out.println("SUCCESS");

            ftp.logout();
            ftp.disconnect();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:47:29.913

当您链接 de lib 时，您是否必须引用它，并将其标记为可用的。

也许您忘记了这两个步骤之一？

打开应用程序的属性对话框，导航到“Java Build Path”->“Libraries”并添加引用。导航到“Java Build Path”->“Order and Export”并选择导出这两个jar。

# php - Apache 呈现虚拟子目录并将参数传递给 PHP 脚本

> ID：10362349
> 
> 赞同：0
> 
> 时间：2012-04-28T09:40:25.267
> 
> 标签：php, apache, mod-rewrite

我的根目录包含一系列 PHP 文件：index.php、about.php 等。每个文件都可以带一个 ID 参数来自定义页面上的一些变量，例如联系电话号码、电子邮件地址等。

如果访问者要访问[http://myserver/joebloggs](http://myserver/joebloggs)（joebloggs 是一个参数，而不是子目录），我希望他们能够从根目录中使用 index.php 页面，但要将 joebloggs 传递给 index .php 作为 ID，然后自定义页面。我不想为每个用户 ID 创建一个子目录，我宁愿在数据库中维护这些信息并让 PHP 为我生成页面。

此外，当用户然后导航到 about.php 页面时，我希望保留此 ID，然后也自定义关于页面，即“关于”的链接在 URL 中维护 ID 参数：[http:/ /myserver/joebloggs/关于/](http://myserver/joebloggs/about/)

我有一个粗略的想法如何做到这一点，并且一直在阅读 mod_rewrite 但在将各种解决方案拼凑在一起时运气不佳。

任何指示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:10:28.233

尝试这样的事情：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} \/(.+?)\/about
RewriteRule . /about.php?p1=%1 [L]

RewriteCond %{REQUEST_URI} \/.*?
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*?)$ /index.php?p1=$1 [L] 
```

应该做的工作。在我的服务器上测试过。

# sql - 来自 oracle 表的 sql 查询

> ID：10362350
> 
> 赞同：0
> 
> 时间：2012-04-28T09:40:26.390
> 
> 标签：sql, database, oracle

我的 oracle 表中只有一列`roll number`。一列中有很多数据。

```
 roll number  

  -------------

      1 
      2
      3
      4
      5
      .
      .
      . 
```

当我想从这个表中删除一些卷号时，我正在写：

```
delete from table name where roll number='2'; // 1 row deleted. 
```

如果我想`5`从表中删除然后

```
delete from table name where roll number='5'; // 1 row deleted. 
```

同样，当我想删除 100 条这样的记录时，我必须替换`roll number`字段，这需要相当长的时间。有什么快速方法可以从表中删除选择性行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T09:42:15.997

如果要删除的 id 是连续的，您可以使用`BETWEEN`：

```
DELETE FROM your_table WHERE roll_number BETWEEN 5 AND 104 
```

如果没有，您可以使用`IN`：

```
DELETE FROM your_table WHERE roll_number IN (5, 9, 110, ... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:43:31.980

您可以从另一个查询中获取数字列表并将其置于 IN 条件中，例如：

```
delete from table name where roll number IN (select roll number from table WHERE somecondition); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:47:08.167

如果您已经知道可以使用的范围，**否则**如果您知道要删除的总数，那么您可以使用**IN**之类的......

```
delete from table where roll number BETWEEN ....; 
```

# email - 包含点的本地部分的电子邮件验证

> ID：10362352
> 
> 赞同：0
> 
> 时间：2012-04-28T09:40:40.410
> 
> 标签：email, duplicates, registration

**我在做什么：**
试图减少想要在我的网站上注册的垃圾邮件发送者。

**而且我知道：**
点在 gmail 中被忽略，您可以在电子邮件地址的本地部分的任何地方放置点，但在 @ 之前的第一个位置和最后一个位置。

**问题：**
当用户使用 ex.ample@gmail.com 在站点中注册时，一切正常，但是当他可以在站点中再次使用 ex.am.pl.e@gmail.com 等注册时出现问题。

**我所做的是：**
删除电子邮件本地部分中的任何点，但我意识到用户无法使用他刚刚输入的电子邮件地址提交。

**我想要的是：**
有没有办法克服这个问题？因为在这种情况下，一个人可以通过更改电子邮件地址中的点位置来注册很多次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:32:48.703

我确定您现在已经找到了解决方案，但是为了完整起见...

基本上，您需要按原样存储本地部分，而不去除点，然后在比较时从应用程序和注册表中去除点。喜欢：

```
$registered_emails[0]="e.xample@gmail.com"; //This is just to show how it was registered first time
$application_email="exam.ple@gmail.com"; //New application email

$discard=0; //flag for discarding application
if (preg_match("/@gmail.com$/i", $application_email)===1) {
   $app_em=str_replace(".", "", $application_email);
   foreach ($registered_emails as $reg_em)
      if ($app_em==str_replace(".", "", $reg_em)) {
      // "example@gmailcom"=="example@gmailcom"
         $discard=1; // discard application
         break;
      }
      //can't use an "else" clause here to break, as you need to loop through all registries
}
if ($discard==1)
   echo "discard application";
else
   array_push($registered_emails, $application_email); //register $application_email as is (exam.ple@gmail.com) 
```

之前可能值得从列表中过滤掉所有 gmail 电子邮件，甚至将所有 gmail 电子邮件存储在一边；当然不是最优雅的解决方案，但可能是最快的解决方案

# jquery - 是否可以自定义 jqgrid 的外观和感觉？

> ID：10362353
> 
> 赞同：10
> 
> 时间：2012-04-28T09:41:02.567
> 
> 标签：jquery, jqgrid, twitter-bootstrap

我希望我的[jqgrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)看起来像[引导表](http://twitter.github.com/bootstrap/base-css.html#tables)的外观和感觉。
是否可以自定义外观。
我知道 jqgrid 支持（jquery 主题），但我想要 bootstarp 的外观和感觉，而不是 jquery 主题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T14:37:54.580

问题是 jqGrid 基于[jQuery UI CSS 框架](http://wiki.jqueryui.com/w/page/12137970/jQuery%20UI%20CSS%20Framework)。jqGrid 从空`<table>`元素动态构建网格。它插入了许多具有预定义 CSS 名称的元素，如、`"ui-widget"`、`"ui-widget-content"`等。`"ui-state-hover"``"ui-icon"`

我以前从未使用过[引导程序](http://twitter.github.com/bootstrap/)。似乎它有自己的[Base CSS](http://twitter.github.com/bootstrap/base-css.html)框架。所以我看到的唯一方法是您自定义 jQuery UI CSS，以便它对应于引导程序的外观。您可以针对[Themeroller](http://jqueryui.com/themeroller/)执行此操作。在页面上，您可以交互地创建新的 jQuery UI 主题，它看起来非常接近引导 CSS。最后，您可以通过单击“下载主题”按钮下载自定义的 CSS（请参阅页面左侧的“滚动您自己的”选项卡）。或者，您可以使用[jQuery UI ThemeRoller 开发工具](http://jqueryui.com/themeroller/developertool/)来创建新的 CSS。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T08:31:45.000

我遇到了同样的问题，最终放弃了 jqgrid 并获得了 DataTables - [http://datatables.net/](http://datatables.net/)。它与 jqgrid 非常相似，可以说具有更好的功能，并附带有关如何像 bootstrap 一样设置样式的说明 - [http://datatables.net/blog/Twitter_Bootstrap](http://datatables.net/blog/Twitter_Bootstrap)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T19:56:14.067

我有同样的问题，创建了自己的 CSS 样式。检查：[https](https://github.com/Soliman/jqGrid.bootstrap) ://github.com/Soliman/jqGrid.bootstrap 。这有点混乱，但这是一个开始，对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T14:47:34.677

jqGrid 使用基于 jQuery UI 的 html 和类，因此 jQuery UI 的 Bootstrap 主题应该可以解决问题，除非您自定义了 Bootstrap，否则需要进行两次相同的自定义。

[http://addyosmani.github.com/jquery-ui-bootstrap/](http://addyosmani.github.com/jquery-ui-bootstrap/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T09:43:02.413

jqGrid 的另一个引导主题：http: [//jquery-ui-bootstrap.github.io/jquery-ui-bootstrap/extra.html#jqgrid](http://jquery-ui-bootstrap.github.io/jquery-ui-bootstrap/extra.html#jqgrid)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-22T18:36:21.643

我正在使用免费的 jqGrid（trirand jqGrid 的一个分支），它支持内置样式。您可以使用两个主要选项调整外观：

1.  `guiStyles`( [https://github.com/free-jqgrid/jqGrid/blob/master/dist/jquery.jqgrid.src.js#L600](https://github.com/free-jqgrid/jqGrid/blob/master/dist/jquery.jqgrid.src.js#L600) ): `jQueryUI`, `bootstrap`, `bootstrapPrimary`,`bootstrap4`
2.  `icons`: ( [https://github.com/free-jqgrid/jqGrid/blob/master/dist/jquery.jqgrid.src.js#L389](https://github.com/free-jqgrid/jqGrid/blob/master/dist/jquery.jqgrid.src.js#L389) ): `jQueryUI`, `fontAwesome`,`glyph`

# java - 在 upnp / dlna 中识别电视

> ID：10362354
> 
> 赞同：3
> 
> 时间：2012-04-28T09:41:07.057
> 
> 标签：java, upnp, television, dlna

使用 Java 库 Cling，我可以使用 upnp 在 LAN 上发现我的电视。电视宣传以下 upnp 服务

*   渲染控制
*   AV运输
*   连接管理器

它还说，它是“MediaRenderer”类型，型号描述是“Samsung TV DMR”。

据我了解，所有这些功能也可以由例如计算机提供。但在“现实”世界中，电视和电脑是两种不同的东西（尽管它们可能提供相同的服务）。

通过哪种 upnp 方法，我可以唯一地识别我正在与“电视”通话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T04:58:27.867

最好深入了解服务描述文件 (SCPD)。

在 StateVariables of 中`RenderingControl`，TV 通常有`Contrast`和`Brightness`，但 PC DLNA 设备通常没有。

使用服务，我们可以获得支持`GetProtocolInfo`的`ConnectionManager`媒体格式列表，可用于将电视与其他音频设备区分开来。

见[http://upnp.org/specs/av/av4/](http://upnp.org/specs/av/av4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:23:59.770

对于“可移植性”，我能想出的唯一解决方案是根据设备的唯一 ID (UUID) 制作设备白名单。如果您打算实现一个控制器来监听某个特定设备的外观，则获取该设备的 UUID 并使用它配置控制器。如果您的控制器将具有 UI，请显示找到的所有设备并询问用户“这是电视吗？”。我敢说，在 UPnP 中没有确定性的方式可以说特定的 UPnP 设备“是电视”。UPnP 根本没有指定这样的设备类。您的服务观察是绝对正确的，您不仅可以从计算机上得到相同的响应，还可以从 DVD 播放器或智能闹钟中获得相同的响应。

# jquery - 使用 jQuery 对文本进行标记化

> ID：10362356
> 
> 赞同：0
> 
> 时间：2012-04-28T09:41:26.233
> 
> 标签：jquery, text, replace, tokenize

我有一个巧妙的挑战，但我自己无法完成！

对于不知道什么是标记化的每个人，请参见此处：[http ://en.wikipedia.org/wiki/Tokenization](http://en.wikipedia.org/wiki/Tokenization)

**目标**

逐字处理文本，然后用另一个词替换它。

**文本输入示例**

> 我可能有**HTML**，我将被替换。

**文本输出示例**

> 我可以拥有**XHTML**，但我需要更新。

我需要的是关于如何使用 jQuery 逐字处理的提示。如果它需要它：通过标记化，我偶然发现了它。这可能是一个解决方案，也许不是。

**编辑：** 一个简单的替换功能对我没有帮助，因为它一次替换了整个文本中所有出现的单词。

**Edit2：** Matt 向我询问了我编写的代码但没有用，这里是：

```
$("#textarea").replace(/\bword\b/g, 'replacedword'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:57:14.833

`var words = text.split(/(\s|\n|\t)+/g)`...现在你有一个可以迭代的单词数组，替换某些单词。
您可以通过加入数组来重新制作文本：`words.join(' ')`。
这是在没有 jquery 帮助的情况下完成的。

这有帮助吗？

# objective-c - NSTimer、NSBlockOperation 是 NSInvocation 还是 NSOperation？

> ID：10362358
> 
> 赞同：1
> 
> 时间：2012-04-28T09:41:41.243
> 
> 标签：objective-c, ios, xcode

我想调用我的服务器每 30 个数据获取一些数据，这些数据应该用于在 MKMapView 上显示注释。我已经研究过它，但我仍然不确定该使用哪个？

请给予一些指导。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:16:15.553

我建议使用 NSTimer，执行选择器并在您的选择器中启动 NSOperation 来执行下载。使用 KVO 观察 isFinished 或在您的 NSOperation 中使用委托 :)

# asp.net - 使用 aspnet_regsql 添加表/存储过程

> ID：10362370
> 
> 赞同：1
> 
> 时间：2012-04-28T09:43:13.550
> 
> 标签：asp.net, membership-provider

我有一个名为 Speakom 的已建立数据库（附加的 mdf 文件）。我执行了这个声明。

> aspnet_regsql -S (本地)\SQLEXPRESS -E -A all -d Speakom

我收到一条消息，指出它添加了以下功能：会员资格、个人资料、角色管理器等。

问题是它在哪里添加了它们，因为我在服务器资源管理器中看不到它们。

我有自己的用户表，我可以将哪个键与成员表中的成员键连接..即将成员表中的主键连接到我建立的表中的外键..

问题是我没有看到会员表1？！？

**更新** 现在很清楚了..我如何通过visual studio查看我的数据库表...我安装了会员表..在同一个数据库中但我看不到它..

我添加了到此路径的连接：

```
C:\Documents and Settings\dddddddddddd\my documents\visual studio 2010\Projects\SpeakomSite\SpeakomSite\App_Data\Speakom.mdf 
```

但我仍然看不到密码、用户、表格:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:48:42.507

您应该寻找位于解决方案资源管理器顶部的 ASP.NET 配置图标。这会将您导航到 ASP.NET 配置页面，您可以在其中自定义成员资格、角色和配置文件信息。或者，您可以转到： [http://localhost:YourPort/asp.netwebadminfiles/security/security.aspx](http://localhost:YourPort/asp.netwebadminfiles/security/security.aspx)

您还可以通过登录 SQL Server Management Studio 来检查它们是否也存储在 SQL 后端，连接到您的 SQL Express 实例，然后连接到包含附加角色信息的安全性。

# php - 使用 preg replace 格式化 url

> ID：10362371
> 
> 赞同：0
> 
> 时间：2012-04-28T09:43:14.857
> 
> 标签：php, regex, preg-replace

我有一个正则表达式，它接受一个类似于 bbcode 的字符串并将其转换为 html 链接。它工作正常。但是，我想让它检测链接的类型（内部/外部）来决定是严格使用绝对（外部）url，`http://extsite.com/category/keyword/`还是使用内部url的一部分，`category/keyword/`并将其附加到预定义的url，比如`$url . category/keyword/`

正则表达式如下：

```
preg_replace('/\[([^\]]+)\]\[([^\]"]+)\]/i', '<a href="$2">$1</a>', $text) 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:11:26.330

根据您的评论，我假设任何以 http://（或任何类似协议，例如 ftp://）开头的链接都是绝对链接。任何其他链接都将被视为相对链接（并以 $url 为前缀）

```
// replace absolute links
$text = preg replace ('/\[([^\]]+)\]\[([A-Za-z]+:\/\/[^\]"]+)\]/i',
                      '<a href="$2">$1</a>', $text )

// replace all remaining (relative) links
// $url must have a tailing slash '/'
$text = preg replace ('/\[([^\]]+)\]\[([^\]"]+)\]/i',
                      '<a href="'.$url.'$2">$1</a>', $text ) 
```

# intellij-idea - IntelliJ Ultimate/PhpStorm，显示 Symfony2 项目的代码覆盖率结果

> ID：10362373
> 
> 赞同：0
> 
> 时间：2012-04-28T09:43:33.297
> 
> 标签：intellij-idea, phpunit, code-coverage, phpstorm

我正在使用 IntelliJ Ultimate 11.1，其中包括最新的 PhpStorm 附带的好东西。

我正在尝试使用新的代码覆盖率功能来处理一些事情，但是在让覆盖率显示在我的 IDE 中时遇到了一些麻烦。

单元测试工作 100%，我什至可以在调试模式下运行单元测试，并触发 xdebug 断点等，我认为这是自 toast 以来最棒的事情。

当我设置**--coverage-html**时，HTML 覆盖率报告正在生成，所以很明显 xdebug 和 phpunit 可以很好地协同工作。

该项目是一个 Symfony2 项目，它的 PhpUnit 配置在文件 app/phpunit.xml.dist 中完成。

当我从菜单中选择分析 > 显示代码覆盖率数据时，我会看到一个如下所示的弹出窗口：

![选择要显示的 Coverage Suite](../Images/15b52293be2de26bc63e82259ee5b2eb.png)

我正在单击 [+] 但不确定我必须选择什么，因为该对话框上的 OK 按钮一直处于禁用状态。

我知道我的测试套件是在 phpunit.xml.dist 文件中定义的，但不确定如何让 IntelliJ 使用它来确定如何显示代码覆盖率。

我真的很高兴能够使用这个简洁的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:01:22.527

请[检查文档](http://www.jetbrains.com/idea/webhelp/monitoring-code-coverage-for-php-applications.html)：

**测量代码覆盖率**

1.  手动准备测试或生成测试类。
2.  创建 PHPUnit 类型的运行配置。
3.  在主工具栏上，在 Run/Debug Configurations 下拉列表中选择 PHPUnit 运行配置，然后单击**Run with Coverage**按钮。
4.  在 Coverage 工具窗口中监控代码覆盖率。

您是否使用**Run with Coverage**按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:40:33.507

我刚刚运行了最近的更新，一切都开始完美运行！

# cakephp - 蛋糕烘焙控制台错误：缺少数据库连接

> ID：10362376
> 
> 赞同：0
> 
> 时间：2012-04-28T09:43:59.460
> 
> 标签：cakephp, xampp, cakephp-2.0, php, ubuntu-11.10

我使用控制台烘焙了一个应用程序，从 URL 看起来一切正常。但是当我想在应用程序文件夹中烘焙模型时，出现错误：

```
 Error: Database connection "Mysql" is missing, or could not be created.
        #0 /opt/lampp/cake/lib/Cake/Model/ConnectionManager.php(98): DboSource->__construct(Array)
        #1 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(837): ConnectionManager::getDataSource('default')
        #2 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(782): ModelTask->getAllTables(NULL)
        #3 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(863): ModelTask->listAll(NULL)
        #4 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(186): ModelTask->getName()
        #5 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(84): ModelTask->_interactive()
        #6 /opt/lampp/cake/lib/Cake/Console/Command/BakeShell.php(102): ModelTask->execute()
        #7 /opt/lampp/cake/lib/Cake/Console/Shell.php(375): BakeShell->main()
        #8 /opt/lampp/cake/lib/Cake/Console/ShellDispatcher.php(177): Shell->runCommand(NULL, Array)
        #9 /opt/lampp/cake/lib/Cake/Console/ShellDispatcher.php(69): ShellDispatcher->dispatch()
        #10 /opt/lampp/cake/lib/Cake/Console/cake.php(24): ShellDispatcher::run(Array)
        #11 {main} 
```

这就是我的 opt/lampp/htdocs/cakapp/Confg/database.php

```
 <?php
    class DATABASE_CONFIG {

        public $default = array(
            'datasource' => 'Database/Mysql',
            'persistent' => false,
            'host' => '127.0.0.1',
            'login' => 'root',
            'password' => 'alpha',
            'database' => 'cakedb',
        );
    } 
```

我的 php --ini 返回：

```
 Configuration File (php.ini) Path: /etc/php5/cli
        Loaded Configuration File:         /etc/php5/cli/php.ini
        Scan for additional .ini files in: /etc/php5/cli/conf.d
       Additional .ini files parsed:      /etc/php5/cli/conf.d/pdo.ini 
```

而 phpinfo() 给我这个路径：

```
 Configuration File (php.ini) Path: /opt/lampp/etc
        Loaded Configuration File :/opt/lampp/etc/php.ini 
```

上面两个输出是不是有矛盾？我的意思是 php --ini 应该输出 xampp 的 php.ini 而不是另一个，我怎样才能让它指向 xampp 的 php.ini？我试图通过用这条线改变 .bashrc 来改变它，当然没有帮助

```
 export PATH=/opt/lampp/bin:$PATH 
```

我尝试将此行添加到 database.configuration 文件中：'port' => '/opt/lampp/var/mysql/mysql.sock' 但它没有帮助。

我确实发现了一些类似的问题，但它们要么适用于 mac osx 的 windows，要么适用于 ubuntu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T14:13:07.213

为了帮助（更多）**OSX**（XAMPP）用户：

只需将以下内容添加到您的`app/Config/database.php`数据库配置数组中：

```
'unix_socket' => '/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:57:05.023

您需要启用 pdo_mysql 扩展，它可能已经为您的 web 环境启用，但 ubuntu 将 cli 和 web 的 php.ini 配置分开。

所以，你只需要启用 cli 的扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T10:45:16.167

为了帮助**OSX**用户：

只需将以下内容添加到您的`/app/Config/database.php`配置变量中：

> 'unix_socket' => '/Applications/MAMP/tmp/mysql/mysql.sock'

# javascript - 删除 dom 元素时单击事件后 DOM 元素 dblclick 事件发生变化

> ID：10362378
> 
> 赞同：3
> 
> 时间：2012-04-28T09:44:04.033
> 
> 标签：javascript, dom, javascript-events

我在 Firefox 上遇到了一个奇怪的问题，在 safari 上似乎没有发生。

有一个包含一组行的表，每行都有自己的 onclick 和 ondblclick 事件。当双击其中一个对象时，它首先触发 onclick 关联函数（如预期的那样），其中另一行（与双击的不同）被删除。之后，与 dblclick 关联的函数将不会触发。

如果我评论删除该行的行（不是单击的行，如我所说，而是另一个），那么 onclick 和 ondblclick 事件都会触发...我附上这两个事件函数的代码：

```
ret.onclick = function(){
    // Trigger click event
    var evt = arguments[0] || window.event;
    self.signalClick(evt.target || evt.srcElement);

    if(elem == this.selected) return;

    if(self.selected != null){
        // Set list element to not selected
        var telem = document.getElementById(self.getChildID(self.selected['id']));
        telem.setAttribute('class', 'gui_list_uselected');

        // Remove previously selected element summary
        var telemexp = document.getElementById(self.getChildID(self.selected['id']) + '_exp');
        if(telemexp) telemexp.parentNode.removeChild(telemexp); // FAULTY LINE!
    }

    ret.setAttribute('class', 'gui_list_selected');
    self.selected = elem;

    // Add element summary to the list
    appendAfter(ret, self.drawSummary(elem));
};

ret.ondblclick = function(){
    // Trigger double click event
    var evt = arguments[0] || window.event;
    self.signalDblClick(evt.target || evt.srcElement);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:21:31.140

火狐正常工作。根据[规范](http://reference.sitepoint.com/html/event-attributes/ondblclick)， onclick 无论如何都会在 ondblclick 之前触发。看看这个[答案](https://stackoverflow.com/questions/1546040/how-to-use-both-onclick-and-ondblclick-on-an-element)来克服这个问题。

# java - 在管理字符串方面需要一些帮助

> ID：10362383
> 
> 赞同：0
> 
> 时间：2012-04-28T09:44:35.360
> 
> 标签：java, string, hashtable

不要担心哈希表的人，只要给我一些如何管理字符串的想法。

我需要使用哈希表对用户在字典中输入的单词进行拼写检查。我从哈希表中得到了一个名为 checkDictionary() 的方法来检查给定的单词是否存在于字典中。如果单词存在则返回布尔值，否则返回 false。

我想要做的是，我只想在拼写错误的时候检查字典中的单词，做一些可能的更正。

可能的更正：

更改一个字母：例如，如果拼错的单词是“kest”，我想尝试一次更改一个字符的所有可能性，并在字典中查找修改后的单词。可能性将是“aest”、“best”、...、“zest”、“kast”、...、“kzst”等。

---我怎样才能一次改变一个字符，也可以从a到z。

交换相邻的字母：例如，如果拼写错误的单词是“ebst”，请尝试“best”、esbt 和“ebts”。

---我怎样才能改变相邻的字母，需要交换什么的？...

删除一个字母：例如，如果拼写错误的单词是“tbird”，尝试一次删除一个字母的所有可能性，并在字典中查找修改后的单词，即：“bird”、“tird”、“tbrd” ”和“tbir”。

---我怎样才能每次都删除每个字母？

请记住，输入的单词可以是任意长度。

检查字典中的单词后，我需要将此建议返回给用户。字符串中是否有任何方法可以用来实现这些功能。请帮助实施上述更改、交换和删除方法。

```
 import java.util.*;
     import java .io.*;

     public class HashTableDemo
   {
     public static void main(String [] args)
  {

   // constructs a new empty hashtable with default initial capacity
     HashTable hashtable = new HashTable();
     Scanner keyboard = null;
     Scanner input=null;
     try
     {
        System.out.println("Enter a word to check in dictionary");
        keyboard = new Scanner(System.in);
        String word = (keyboard.nextLine().toUpperCase());

     //Adding aal dictionary words from a text file to hash table.
        input=new Scanner(new FileInputStream("TWL.txt"));
            int i=1;

            // adding value into hashtable
            while(input.hasNextLine())
             {
             String hello = input.nextLine();
                            hashtable.put( hello, new Integer(i) ); 
             i++;
             }
      );

        if(hashtable.checkDictionary(word))
           System.out.println("The word "+word+" is there in the dictionary.");
        else
           System.out.println("The word "+word+" is not there in the dictionary.");
     }//try

     //Here I need to implement the required methods if the word is not in dictionary and misspelled.

         catch(FileNotFoundException e)
        {
           System.out.println("Cannot open file");
           System.exit(0);
        }//end catch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:57:16.283

对于您要完成的工作，没有简单的解决方案。可以用于拼写检查的一个很好的数学概念称为[Edit Distance](http://en.wikipedia.org/wiki/Edit_distance)，在尝试编写一些代码之前，您绝对应该阅读一些理论。

# playframework - 在 playframework 项目中使用 scalatest

> ID：10362388
> 
> 赞同：5
> 
> 时间：2012-04-28T09:45:02.703
> 
> 标签：playframework, sbt, scalatest

我在scala中从事一个playframework项目。然而，我们的团队希望使用 scalatest 而不是 specs。我已将以下内容添加到 plugins.sbt 文件中：

```
libraryDependencies += "org.scalatest" %% "scalatest" % "1.7.1" "test" 
```

但是当我开始玩时，没有新的 jar 被下载，即使在运行之后也没有

```
update 
```

当我跑步时

```
library-dependencies 
```

它向我展示了这个

```
[info] List(org.scala-lang:scala-library:2.9.1, play:play:2.0, play:play-test:2.0:test) 
```

此外，当我尝试测试时，我得到一个编译错误，说 org.scalatest 不在构建路径中。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T04:16:10.957

您应该修改 project/Build.scala，并更好地使用如下：-

```
val appDependencies = Seq(
  // Add your project dependencies here,
    "org.scalatest" %% "scalatest" % "1.7.2" % "test"
) 
```

请使用版本 1.7.2，其中包含 SBT 集成中的错误修复。

此外，您需要将 testOptions 设置为 Nil：-

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here    
      testOptions in Test := Nil
    ) 
```

这是因为默认情况下 Play 2.0 将发送以下 Specs 2 测试选项，它们是：-

顺序真正的junitxml控制台

ScalaTest 无法识别它们，因此将 testOptions 设置为 Nil 应该可以修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:08:06.690

您应该修改 project/Build.scala，进行以下更改

```
val appDependencies = Seq(
  // Add your project dependencies here,
    "org.scalatest" % "scalatest_2.9.1" % "1.7.1"
) 
```

# backbone.js - 使用underscore.js复制backbone.js模型属性——算法

> ID：10362390
> 
> 赞同：3
> 
> 时间：2012-04-28T09:45:08.850
> 
> 标签：backbone.js, underscore.js

如果它们不是未定义的，我想将所有属性从backbone.js 模型对象复制到另一个。这有点像孩子凌驾于父母的属性之上。子对象的某些属性应该从整个过程中排除。这是我到目前为止所拥有的：

```
function inherit(parent, child) {
    var childAttributes = Object.keys(child.attributes);

    // Don't involve these attributes in any way, they're special.
    attributes = _.without(attributes, ['specialCase1', 'specialCase2', 'specialCase3']);

    // This array will store undefined child attributes
    var undefChildAttributes = new Array();

   for (i in attributes) {
          var attr = attributes[i];           // Get attribute name
          var value = child.get(attr);        // ... and value
          var type = RealTypeOf(value);       // ... and type

          if (type == 'undefined') {
                 undefChildAttributes.push(attr);
          }       
   }

   // Update the child attributes array to not include undefined any attributes
   attributes = _.without(attributes, undefChildAttributes);

   // Copy any attributes from child to parent

   // ------------------ PROBLEM AREA ------------------
   for (var m=0; m<attributes.length; m++) {
          var attr = attributes[m];                // Attribute to copy

          // I want to use _.extends in some way here, maybe like:
          _.extends(parent, child[attr]);
   }
} 
```

我被困在如何将属性复制到父级中。我拥有自动取款机的唯一方法是破解：

```
if (type == 'string') {
    eval('var o = {' + attr + ':"' + child.get(attr) + '"};');
 } else {
    eval('var o = {' + attr + ':' + child.get(attr) + '};');
}

parent.set(o); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T10:40:58.167

`eval`您可以通过使用括号符号来避免：

```
var o = {};
o[attr] = child.get(attr);
parent.set(o); 
```

如果我做对了，我对你的代码的看法

```
function inherit(parent, child) {
    var attributes = child.toJSON(),
        keepkeys = _.keys(attributes);

    // remove special cases
    keepkeys = _.without(keepkeys, 'specialCase1', 'specialCase2');
    // or keepkeys = _.difference(keepkeys, ['specialCase1', 'specialCase2']);

    // remove undefined values
    keepkeys = _.filter(keepkeys, function (key) {
        return typeof(attributes[key])!=="undefined";
    });

    // with underscore>=1.3.3
    var result = _.pick(attributes, keepkeys);

    // with underscore<1.3.3
    // var result = {};
    // _.each(keepkeys, function (key) {
    //    result[key] = attributes[key];
    // });

    parent.set(result);
}

var P = new Backbone.Model();
var C = new Backbone.Model({
    copy1: "c1", 
    specialCase1: "do not copy", 
    undefkey: undefined
});

inherit(P, C);
console.log(P.toJSON()); 
```

还有一个小提琴[http://jsfiddle.net/tdCEF/](http://jsfiddle.net/tdCEF/)

# php - sencha rest store json 响应

> ID：10362397
> 
> 赞同：0
> 
> 时间：2012-04-28T09:46:08.880
> 
> 标签：php, json, sencha-touch, extjs, sencha-touch-2

我刚刚被困在为煎茶开发一家宁静的商店。据我所知，我的问题是我返回错误的结构化响应。是否有任何文档显示我的 json 响应对于不同请求的 sencha extjs 应该具有的结构，例如：

*   index > 获取所有内容/没有权限，错误信息
*   获取 > id 可用/不存在/没有访问权限
*   发布>成功/不...
*   删除>成功/不...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:00:27.693

是的，一点没错。

[**有一个关于RESTful Web Services with Sencha Touch**](http://www.sencha.com/learn/legacy/Manual%3aRESTful_Web_Services#HTTP_Methods)的优秀文档。

值得一读。希望它可以帮助你！

# lisp - LISP In Small Pieces - 运行代码的最佳 LISP 环境？

> ID：10362400
> 
> 赞同：13
> 
> 时间：2012-04-28T09:46:59.290
> 
> 标签：lisp, scheme, common-lisp, racket

Christian Queinnec 写了一部名为 LISP In Small Pieces 的杰作，其中包含 11 个 Lisp 解释器和两个 Lisp 编译器。

当您从[此处](http://pagesperso-systeme.lip6.fr/Christian.Queinnec/WWW/LiSP.html)的网站下载代码时- 它有评论：

```
The programs of this book are available on the net. 
These programs used to run with some Scheme systems around 1994. 
```

任何的想法：

(a) 这些在当时运行的 Scheme 系统是什么，更重要的是；

(b) 这些今天将在什么 Scheme 系统上运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T22:44:19.573

里面有很多节目。我做了一些测试，看看我能在多大程度上回答这个问题，而不必单独尝试。tarball 中有 131 个文件，扩展名为“.scm”。但是，似乎有带有其他扩展名的 Scheme 程序，例如 .bgl。所以我搜索了前五行中包含“L i S P”的文件。这会产生 173 个文件。[我尝试在我首选的方案实现](http://www.gnu.org/software/guile/)上运行所有这些。其中 31 次运行没有错误。几乎所有这些都在“src”目录中。因此，特定于语言的程序确实看起来是特定于语言的。让我们看一下失败的 src/ 文件之一，“chap9z.scm”。它令人窒息`define-abbreviation`。我不知道这个符号的起源，但它在 guile 的任何地方都没有定义。`syntax-rules`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T15:09:40.727

1994 年存在的一些 Scheme 实现仍然存在和维护：[Scheme 48](http://s48.org/)、[Chez Scheme](http://www.scheme.com/)、[Gambit](http://dynamo.iro.umontreal.ca/~gambit/)、[Bigloo](http://www-sop.inria.fr/indes/fp/Bigloo/bigloo.html)、[MIT Scheme](http://www.gnu.org/software/mit-scheme/)和[SCM](http://people.csail.mit.edu/jaffer/SCM)。

来自 LiSP 的代码可能会在其他现代 Scheme 系统中运行，例如[Guile](http://www.gnu.org/software/guile/)或[Larceny](http://larcenists.org)。

就个人而言，我建议使用[Racket](http://racket-lang.org)。最有可能的是，大部分代码`#lang racket`无需更改即可运行，并且不需要使用`[]`（但您的代码可能更易于阅读:)。不工作的东西可能很容易修复，您还可以使用 Racket 提供的 R5RS 语言实现，它可能适用于所有代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-25T00:48:03.340

> (a) 这些当时运行在什么 Scheme 系统上

[来自作者网站的源 tarball](http://pagesperso-systeme.lip6.fr/Christian.Queinnec/Books/LiSP-2ndEdition-2006Dec11.tgz)中的 Makefile具有在 bigloo、elk、gambit、mit-scheme、scheme2c 和 scm 下运行代码的目标。

Makefile 提到 SCM 4e1 和 Bigloo 1.9d 是已知的工作版本，尽管我自己没有测试过它们。我没有发现任何提及其他方案的特定版本。

> (b) 这些今天将在什么 Scheme 系统上运行？

[此 github 存储库](https://github.com/appleby/Lisp-In-Small-Pieces)中的代码已更新，因此包含的测试套件中的几乎所有测试都通过了当前（截至 06/2014）版本的 bigloo、gambit 和 mit-scheme。

如果您只想能够运行代码并按照本书进行操作，那么其中一种方案应该适合您。

[完全披露：我是回购的所有者，我是计划菜鸟。repo 中的代码是[WOMM](http://blog.codinghorror.com/the-works-on-my-machine-certification-program/ "在我的机器上工作")认证的，但你的里程可能会有所不同。]

另一方面，如果你不满足于使用 bigloo / gambit / mit-scheme，那么在这里添加对 guile / racket / insert-favorite-scheme-scheme 的支持应该不会太难。使用其中一个`book.*`文件作为起点，例如`gambit/book.scm`或`mitscheme/book.mit`. 如果您可以`book.scm`在您喜欢的方案中加载一个版本，然后查看`test.interpreters`make 目标，最后查看`grand.test`目标以验证事情是否按预期工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T08:27:10.937

包含的`README`文件指出：

> 这些文件使用带有测试套件驱动程序 (tester.scm)、define-syntax 和 define-abbreviation 宏（使用 Dybvig 的语法案例包）和对象系统的 Scheme 解释器进行了测试：Meroonet (meroonet.scm) .
> 
> 可以使用 Bigloo、Scheme->C、Gambit、Elk 或 SCM。前三个更好，因为可以构建一个专门的解释器，其中包含一个已编译的 Meroonet 和已编译的卫生宏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T15:21:56.660

显然 Appleby 已经发布了源代码的更新版本。球拍不见了）=

见 [https://github.com/appleby/Lisp-In-Small-Pieces](https://github.com/appleby/Lisp-In-Small-Pieces)

# c# - 使用线程从列表视图中获取项目 [i]

> ID：10362406
> 
> 赞同：-1
> 
> 时间：2012-04-28T09:48:19.943
> 
> 标签：c#, winforms, multithreading, delegates, invoke

我有这样的功能：

```
foreach (ListViewItem item in getListViewItems(listView2)) //for proxy
{
    if (reader.Peek() == -1)
    {
        break;
    }

    lock (reader)
    {
        line = reader.ReadLine();
    }

    //proxy code
    List<string> mylist = new List<string>();
    if (item != null)
    {
        for (int s = 0; s < 3; s++)
        {
            if (item.SubItems[s].Text != null)
            {
                mylist.Add(item.SubItems[s].Text);
            }
            else
            {
                mylist.Add("");
            }
        }
    }
    else
    {
        break;
    }
    //end proxy code

    //some other code including the threadpool
} 
```

和委托代码：

```
private delegate ListView.ListViewItemCollection GetItems(ListView lstview);
private ListView.ListViewItemCollection getListViewItems(ListView lstview)
{
    ListView.ListViewItemCollection temp = new ListView.ListViewItemCollection(new ListView());
    if (!lstview.InvokeRequired)
    {
        foreach (ListViewItem item in lstview.CheckedItems)
        {
            temp.Add((ListViewItem)item.Clone());
        }
        return temp;
    }
    else
    {
       return (ListView.ListViewItemCollection)this.Invoke(new GetItems(getListViewItems), new object[] { lstview });
    }
} 
```

编辑：

我想用条件函数替换主函数中的 foreach 循环：

```
if (reader.Peek() == -1)
{
    break;
}

lock (reader)
{
    line = reader.ReadLine();
}

if (use_proxy == true)
{
    mylist2 = get_current_proxy();
}

//some other code including the threadpool

private List<string> get_current_proxy()
{
    //what shall I add here?
} 
```

如何使该函数与 foreach 循环相同但使用 for 循环？我的意思是让代理一个接一个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:20:23.030

我看到多个问题都围绕着一个想法，即从网站上抓取电子邮件然后发送垃圾邮件。你已经有了非常酷的工具，不需要新的。

无论如何 - 我不明白你的问题，而且似乎我不是这里唯一的人，但你必须先知道的是：

**让 Windows 中的任何东西在多个线程中运行最终都必须同步，当您这样做时必须`Invoke()`等到它全部通过一个线程，而这就是持有消息循环的线程。因此，您可以尝试`ListView`从多个线程读取或写入，但要进行每次读取/写入，您必须`Invoke()`（您可能直接尝试过 BAAAAM）并且每个 Invoke() 只有一个孔可以通过，并且所有您的线程将不得不等待轮到他们。**

下一步：让 ListView 成为您数据的容器太糟糕了，我什至无法进一步评论。将某事视为

```
class MyData
{
    public string Name;
    public string URL;
    // ...
} 
```

和

```
List<MyData> _myData; 
```

保存您的数据。如果您处理一些低调的同步问题，您将能够从多个线程访问它。

最后，如果你连语法都不知道，你怎么会问我们关于 .net C# 编程的问题。嗯，这是修辞，...

# cordova - 如何在android中集成sencha touch plus phone gap

> ID：10362408
> 
> 赞同：1
> 
> 时间：2012-04-28T09:48:52.497
> 
> 标签：cordova

我已经使用 sencha touch 开发了一个应用程序。这个应用程序包含 5 个执行不同操作的选项卡。在这 5 个选项卡中，一个选项卡的功能是包含一些按钮，例如（相机，捕获），现在当用户单击该相机按钮时，我需要拍摄照片，并且我需要向用户显示该照片。我已经使用了这个功能电话差距。但我不知道如何将此代码集成到 sencha 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:00:27.227

虽然可以使用 PhoneGap 完成，但也可以使用 Sencha Touch 的相机功能完成。

*   PhoneGap 相机 API

    ```
     var imageView = Ext.create('Ext.Img', {
           src:'',
           ....
     });
     ....
     ....

     // PhoneGap Camera API to capture image ..

     navigator.camera.getPicture(onSuccess, onFail, { quality: 50 });

     function onSuccess(imageData) {
          imageView.setSrc("data:image/jpeg;base64," + imageData);
     }

     function onFail(message) {
          alert('Failed because: ' + message);
     } 
    ```

    *   使用煎茶触控相机功能

        ```
        var imageView = Ext.create('Ext.image',{
           src:'',
           ....
           ....
        });

        Ext.device.Camera.capture({
           success: function(image) {
               imageView.setSrc(image);
           },
           quality: 75,
           width: 200,
           height: 200,
           destination: 'data'
        }); 
        ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T13:42:56.497

如果您使用的是 sencha touch2.3 和 sencha cmd 4.* 并在构建应用程序后按照步骤操作。

第 1 步：转到 app 文件夹并从 cmd 提示符“sencha cordova init”或“sencha phonegap init”运行

step2.next 从您的 cmd 转到 cordova/phonegap 文件夹，然后运行以下命令
“cordova plugin add [https://git-wip-us.apache.org/repos/asf/cordova-plugin-camera.git](https://git-wip-us.apache.org/repos/asf/cordova-plugin-camera.git) ”

第三步：接下来运行“cordova plugin ls”以查看为您的应用安装的插件列表。

第 4 步：然后在 app.js 或控制器文件中执行 requires['Ext.device.Camera']

现在您可以无缝使用相机了.. 立即尝试！！！！！！！！！

# c# - 无法解密 RSA 加密密钥

> ID：10362409
> 
> 赞同：3
> 
> 时间：2012-04-28T09:49:28.040
> 
> 标签：c#, security, encryption, rsa, encryption-asymmetric

长话短说，我正在使用 DES 并且我正在使用 RSA 加密密码以进行密钥交换，密码不超过 16 个字符问题是当我加密密钥时，加密的大小变得太大，我无法解密这是我的rsa加解密代码：

加密：--我一直在尝试将 localpwd 作为“asd”

```
 byte[] plaintext = utf8.GetBytes(localpwd);
    byte[] ciphertext = rsaservice.Encrypt(plaintext, false);
    string cipherresult = Convert.ToBase64String(ciphertext); 
```

然后我在文本框中打印加密密钥并尝试解密

```
 byte[] ciphertext = utf8.GetBytes(filetest.Text);
    byte[] plain = rsaservice.Decrypt(ciphertext, true);
    string plaintext = utf8.GetString(plain); 
```

我得到“要解密的数据超过了这个 256 字节模数的最大值”。我尝试增加密钥大小以能够加密和解密更大的密钥大小，但增加密钥只会增加加密数据的大小，导致同样的错误，请帮助！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T10:31:19.997

```
//byte[] ciphertext = utf8.GetBytes(filetest.Text);
  byte[] ciphertext = Convert.FromBase64String(filetest.Text); 
```

# spring-roo - spring-roo 1.2.1 无法过滤finder列表？

> ID：10362413
> 
> 赞同：1
> 
> 时间：2012-04-28T09:50:04.087
> 
> 标签：spring-roo

Spring-roo中的“finder list”命令，我添加了“filter”参数来减少动态finder的列表数。但这对我不起作用，它列出了对我来说包含“名称”或“价格”的查找器。

```
 finder list --depth 2 --filter name,price 
```

谁能告诉我如何过滤它们只包含“名称”和“价格”查找器？即 findBooksByNameNotEqualsAndPrice(String name, Float price) findBooksByNameEqualsAndPrice(String name, Float price) ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:05:07.597

我检查了 Roo 的源代码，看起来没有办法获得类似 AND 的行为，finder 插件只支持基于 OR 的逻辑。

在此处查看 finder 插件 src：[https](https://github.com/SpringSource/spring-roo/blob/master/addon-finder/src/main/java/org/springframework/roo/addon/finder/FinderCommands.java#L71) ://github.com/SpringSource/spring-roo/blob/master/addon-finder/src/main/java/org/springframework/roo/addon/finder/FinderCommands.java#L71 .

或者这里的源代码：

```
final SortedSet<String> result = new TreeSet<String>();
for (final String finder : finders) {
    required: for (final String requiredEntry : requiredEntries) {
       if (finder.toLowerCase().contains(requiredEntry)) {
            result.add(finder);
            break required;
        }
    }
}
return result; 
```

看起来列表操作每次在查找器小写名称中找到任何必需的条目时都会向结果列表添加一个过滤器。

我能想到的过滤列表的唯一方法是复制*finder list*命令的输出并在其上运行类似 grep 的外部实用程序。否则，您可以尝试匹配尽可能多的查找器名称：例如*EqualsAndPrice(String name 之*类的东西。Ater all a plain java *String.contains* method is used.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:58:04.900

根据我的经验，我注意到在实体的注释中直接复合查找器名称更容易：@RooJpaActiveRecord(finders = { "findTubesByVectorOrResearcher","findTubesByBox" }) 您可以混合实体属性，'And'，'Or'， “喜欢”、“之间”等。

对于您的问题，我认为 grep 是一个简单的解决方案。

# python - tbody为空时如何隐藏thead？

> ID：10362415
> 
> 赞同：2
> 
> 时间：2012-04-28T09:50:10.813
> 
> 标签：python, google-app-engine, jinja2

`if`in jinja2 对于知道是否定义了值很有用，但我需要知道查询是否有结果？例如：

```
<thead>
{% if row in rows %} # this is a pseudo-code that i looking for
...
</thead>
<tbody>
{% for row in rows %}
...
</tbody> 
```

rows 是 gql 查询的结果，其中“无结果”为 NULL，但

```
{% if rows == NULL %} 
```

或者

```
{% if rows is none %} 
```

不要帮助我。我想在`tbody`空的时候隐藏头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:15:08.607

你有没有试过：`{% if rows %}`？

编辑：为了防止每行出现thead，请将 if 语句放在 for 循环之外。就像是：

```
{% if rows %}
<thead>
</thead>
{% endif %}

<tbody>
{% for row in rows %}
...
</tbody> 
```

# events - 如何在 Firefox 插件中的 IFrame 上调度滚动 UIEvent？

> ID：10362419
> 
> 赞同：0
> 
> 时间：2012-04-28T09:50:46.107
> 
> 标签：events, firefox, firefox-addon, firefox-addon-sdk

我需要在我的 Firefox 插件中模拟`scroll`事件。`iframe`我使用了下面的代码，但它不起作用并且`iframe`滚动不会移动。对我来说另一个问题是如何`initUIEvent`知道必须调度哪个方向的滚动事件？（水平或垂直）

```
var windows = require("window-utils"),
    selectedBrowser = windows.activeBrowserWindow.gBrowser.selectedBrowser,
    contentWindow = selectedBrowser.contentWindow,
    document = selectedBrowser.contentDocument;

obj = document.getElementById("scrollable_frame");

evt = document.createEvent("UIEvents");

evt.initUIEvent("scroll", true, true,
windows.activeBrowserWindow.gBrowser.selectedBrowser.contentWindow, 2);

obj.dispatchEvent(evt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:16:10.437

我认为您的代码可以很好地调度事件。但这无助于解决您的问题，因为触发`scroll`事件的是帧滚动，而不是相反。如果您需要滚动框架，那么您可以选择直接路线：使用[`window.scrollByLines`](https://developer.mozilla.org/en/DOM/window.scrollByLines)或[`window.scrollByPages`](https://developer.mozilla.org/en/DOM/window.scrollByPages)：

```
obj = document.getElementById("scrollable_frame");
obj.contentWindow.scrollByLines(1); 
```

要水平滚动，您可以使用[`window.scrollBy`](https://developer.mozilla.org/en/Window.scrollBy). 此代码还将触发`scroll`事件作为副作用。

# java - 在java中修改xml整数值时出错

> ID：10362423
> 
> 赞同：0
> 
> 时间：2012-04-28T09:51:32.737
> 
> 标签：java, xml, dom

我可以用什么来代替`settextcontent`更新整数值？当我使用`settextcontent`更新整数值时，cmd会抛出这个错误

```
settextcontent(java.lang.string) in org.w3c.dom.node cannot be applied to (int) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:54:42.953

您需要将方法参数转换为字符串，如下所示：`String.valueOf(val)`

# git - 暂存文件，然后远程添加，然后拉取 - 我的文件不见了

> ID：10362425
> 
> 赞同：5
> 
> 时间：2012-04-28T09:51:43.747
> 
> 标签：git, github

我似乎在一个新的回购中失去了下午的工作。这是我所做的：

1.  在本地创建了一个新项目并做了一些工作。
2.  在 github 上创建了一个 repo
3.  `git init`
4.  `git add src`
5.  `git remote add origin git@github.com:Synesso/memx.git`
6.  `git pull origin master`
7.  `git add .gitignore`
8.  `git commit -m 'updated ignore'`
9.  `git push origin master`

我的本地仓库和 github 仓库都只有两个提交。初始提交（由 github 在项目创建时进行）和第二个仅包含文件`.gitignore`.

在步骤 4 ( `git add src`) 中添加的文件不存在。他们似乎也没有上演。

当你做 a 时，你会丢失暂存的文件`git pull`吗？我能以某种方式找回它们吗？

当前状态：

```
$ git status
# On branch master
nothing to commit (working directory clean) 
```

我的初始`add`不在 reflog 中。

```
$ git reflog
c80135d HEAD@{0}: checkout: moving from 999d128ea4e6969f9eacbceebb5f857f2aa5abb0 to master
999d128 HEAD@{1}: checkout: moving from master to HEAD~1
c80135d HEAD@{2}: checkout: moving from 999d128ea4e6969f9eacbceebb5f857f2aa5abb0 to master
999d128 HEAD@{3}: checkout: moving from master to 999d128ea4e6969f9eacbceebb5f857f2aa5abb0
c80135d HEAD@{4}: commit (amend): updated ignore
28b4f90 HEAD@{5}: commit: updated ignore
999d128 HEAD@{6}: initial pull 
```

`history`显示我添加了`src`文件夹，但没有提交：

```
223  git init
225  git add src
229  git add project/Build.scala
234  git remote add origin git@github.com:Synesso/memx.git
250  git pull origin master 
```

我知道如果您尝试拉动存在的脏文件，git 会抱怨。但是做一个可以消除暂存文件的拉动可以吗？这似乎是错误的。

* * *

我刚刚再次测试了这个过程，是的，它破坏了暂存文件。

```
jem@jem-usb:~/projects$ mkdir x
jem@jem-usb:~/projects$ cd x
jem@jem-usb:~/projects/x$ git init
Initialized empty Git repository in /home/jem/projects/x/.git/
jem@jem-usb:~/projects/x$ echo "hi" > hello.world
jem@jem-usb:~/projects/x$ git add hello.world
jem@jem-usb:~/projects/x$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#       new file:   hello.world
#
jem@jem-usb:~/projects/x$ ls -asl
total 24
 4 drwxrwxr-x 3 jem jem 4096 Apr 28 20:56 .
 4 drwxr-xr-x 8 jem jem 4096 Apr 28 20:56 ..
 4 drwxrwxr-x 7 jem jem 4096 Apr 28 20:56 .git
12 -rw-rw-r-- 1 jem jem    3 Apr 28 20:56 hello.world
jem@jem-usb:~/projects/x$ git remote add origin git@github.com:Synesso/memx.git
jem@jem-usb:~/projects/x$ git reflog
fatal: bad default revision 'HEAD'
jem@jem-usb:~/projects/x$ git pull origin master
remote: Counting objects: 7, done.
remote: Compressing objects: 100% (5/5), done.
remote: Total 7 (delta 0), reused 3 (delta 0)
Unpacking objects: 100% (7/7), done.
From github.com:Synesso/memx
 * branch            master     -> FETCH_HEAD
jem@jem-usb:~/projects/x$ ls -asl
total 36
 4 drwxrwxr-x 3 jem jem 4096 Apr 28 20:53 .
 4 drwxr-xr-x 8 jem jem 4096 Apr 28 20:52 ..
 4 drwxrwxr-x 8 jem jem 4096 Apr 28 20:53 .git
12 -rw-rw-r-- 1 jem jem   59 Apr 28 20:53 .gitignore
12 -rw-rw-r-- 1 jem jem    9 Apr 28 20:53 README.md
jem@jem-usb:~/projects/x$ git reflog
c80135d HEAD@{0}: initial pull 
```

该文件`hello.world`在没有警告的情况下被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T22:19:27.627

我能够在不使用 github 的情况下使用两个主机（此处重命名为 hostB，即“远程”和 hostA，即“本地”）来重现此问题：

```
hostB$ cd /tmp; mkdir repo; cd repo; git init
Initialized empty Git repository in /tmp/repo/.git/
hostB$ : > .gitignore; echo this is a readme > README.md
hostB$ git add .; git commit -m initial
[master (root-commit) 58d43bd] initial
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 .gitignore
 create mode 100644 README.md

hostA$ cd /tmp; mkdir repo; cd repo; git init
Initialized empty Git repository in /tmp/repo/.git/
hostA$ echo hi > hello.world
hostA$ git add hello.world
hostA$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#   new file:   hello.world
#
hostA$ git remote add origin ssh://hostB.dom.ain/tmp/repo
hostA$ git pull origin master
remote: Counting objects: 4, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 4 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (4/4), done.
From ssh://hostB.dom.ain/tmp/repo
 * branch            master     -> FETCH_HEAD
hostA$ ls
README.md 
```

**重要提示：**您可以`git fsck --lost-found`用来恢复暂存文件：

```
hostA$ git fsck --lost-found
Checking object directories: 100% (256/256), done.
dangling blob 45b983be36b73c0788dc9cbcb76cbb80fc7bb057
hostA$ 
```

果然，如果您检查 blob(s)（现在已在 中恢复`.git/lost-found/other`），那些将有您丢失的东西。（但任何目录结构都将消失，您必须弄清楚哪个文件是哪个文件，然后将它们重新放在您想要的位置。）

有趣的是，如果您`git fetch origin`跟着`git merge origin/master`，它会获取原始版本的初始修订版（在这种情况下，使用来自 hostB 的 .gitignore 和 README.md 文件）并保留您的“要提交的更改”。另一个受宠的理由`git fetch`紧随其后`git merge`？:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T05:17:42.583

我在 git 邮件列表中收到了来自 Junio Hamano 的以下回复：

* * *

这是一个出乎意料的极端案例，干扰了我们试图变得太好的尝试，结果适得其反。

长期以来，没有历史记录并要求拉取是被禁止的，因为“git pull”是将两个（或多个）历史记录组合在一起，当你没有历史记录时拉取是无稽之谈——你只有一个历史记录（另一边的历史），没有什么可以结合的。

后来我们尝试变得更好，因为一些新用户在空目录中执行“git init”然后执行“git pull”时触发了错误，通过将“合并”重新定义为无历史记录意味着重置到其他历史记录。

这解决了“git init && git pull”，但我们没有预料到有人会执行“git init && git add && git pull”序列，除了出错之外没有任何理智的结果。

一个只给出合理结果的补丁可能看起来像这样。

```
 git-pull.sh |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/git-pull.sh b/git-pull.sh
index 2a10047..da102d0 100755
--- a/git-pull.sh
+++ b/git-pull.sh
@@ -261,6 +261,9 @@ esac

 if test -z "$orig_head"
 then
+       test $(git ls-files | wc -l) = 0 ||
+       die "$(gettext "Uncommitted changes in the index")"
+
       git update-ref -m "initial pull" HEAD $merge_head "$curr_head" &&
       git read-tree -m -u HEAD || exit 1
       exit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T16:08:05.193

我相信这是拥有一个没有单一提交的新存储库的不幸副作用。如果您再次尝试测试但在本地执行：

```
git init; echo "Readme" > Readme; git add Readme; git commit -m 'Initial commit' 
```

然后，当您“拉”到带有“src”文件的工作目录时，GIT 会发出警告，更重要的是，它不会删除内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T10:40:32.850

您在 github 上的 repo 不包含任何有价值的文件。你没有忘记提交吗？

即使它们没有上演，您的*本地*`src`文件夹在哪里？如果你只做了有问题的事情，git 无论如何都不能吃掉你的文件。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T12:04:48.350

`add`我认为你应该在之前`remote add`和之后提交你的本地更改`pull`

1.  混帐初始化
2.  git 添加 src
3.  混帐添加.gitignore
4.  git commit -m '更新忽略'
5.  git 远程添加来源 git@github.com:Synesso/memx.git
6.  git pull 起源大师
7.  git push 起源大师*

# javascript - jquery load() 等价于离线使用

> ID：10362428
> 
> 赞同：1
> 
> 时间：2012-04-28T09:52:27.773
> 
> 标签：javascript, jquery, html

我正在寻找与 jquery 的`load()`方法等效的脱机工作方法。我从 jquery 的文档中知道它只适用于服务器。我有一些文件，我需要从中调用`<div>`在这些文件中的特定内容中找到的 html。我只是想把整个站点放在没有互联网连接的计算机上，并让站点的那部分（该`load()`部分）像连接到互联网一样运行。谢谢。

编辑：顺便说一句，它不一定是 js；它可以是任何可以工作的语言。

Edit2：我的示例代码（以防我缺少语法错误；这是针对同一目录中的文件）：

```
function clickMe() {
    var book = document.getElementById("book").value;
    var chapter = document.getElementById("chapter").value;
    var myFile = "'" + book + chapter + ".html'";
    $('#text').load(myFile + '#source')
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:27:06.977

您无法通过文件协议实现 load()，没有其他 ajax 请求适用于 html 文件。我什至尝试使用 crossDomain 和 isLocale 选项，但没有任何成功，即使精确协议。

问题是即使 jQuery 正在尝试浏览器也会停止请求安全问题（大多数浏览器，因为下面的代码片段在 FF 中工作），因为它允许您加载语言环境文件，以便您可以访问很多东西。

您可以在本地加载的一件事是 javascript 文件，但这可能意味着要更改很多应用程序/网站架构。

仅适用于 FF

```
$.ajax({
    url: 'test.html',
    type: 'GET',
    dataType: 'text',
    isLocale: true,
    success: function(data) {
        document.body.innerHTML  = data;
    }
}); 
```

FF 做得好的是它检测到请求本地文件的文件也在文件协议上，而其他文件没有。我不确定它是否对您可以请求的文件类型有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:57:06.007

您仍然可以在此上下文中使用 JQuery 加载函数：

您可以在页面上添加一个 OfflineContent div：

```
<div id="OfflineContent">

</div> 
```

然后单击一个按钮，该按钮调用：

```
$('#OfflineContent').load('OfflinePage.html #contentToLoad'); 
```

按钮代码：

```
$("#btnLoadContent").click(function() {
   $('#OfflineContent').load('OfflinePage.html #contentToLoad');
}); 
```

在 OfflinePage.html 中，您可能必须有另一个名为 contentToLoad 的部分，它将显示在初始页面上。

# android - 如何获得最受欢迎的帖子？

> ID：10362429
> 
> 赞同：1
> 
> 时间：2012-04-28T09:52:42.897
> 
> 标签：android, database

我正在创建一个应用程序，用户可以在其中发布帖子，其他用户可以喜欢和评论这些帖子。为了实现这个功能，我使用了 POSTS、LIKES、COMMENTS 等表。（我正在使用 parse.com 数据库来存储这些表） .

POSTS 具有 postId、content、userWhoMadeThePost、dateOfPosting 等字段

LIKES 包含 filelds 作为 id、postOnWhichLikeWasMade（POSTS(postId) 的外键）、userWhoLiked、dateofLike

COMMENTS 有 id、content、postOnWhichCommentWasMade(POSTS(postId) 的外键)、userWhoCommented、dateOfComment

我想检索最受欢迎的帖子（没有喜欢和评论的帖子）。

1.  第一种方法是每次请求热门帖子时计算每个帖子的帖子和点赞数，但如果有数百万个帖子，这可能会变得非常耗时。
2.  另一种方法是在 POSTS 表中包含“noOfLikes”和“noOfComments”，因此为了获得热门帖子，我必须只访问 post 表，但这种方法的问题是每当用户发表评论在一篇文章中，我将不得不在 POSTS 表中增加 'noOfComments' 并在 COMMENTS 表中创建一个条目，当对 POST 表成功进行增量并且在对 COMMENTS 表进行更改之前连接丢失时，问题就开始了。在这种情况下，POST 和 COMMENTS 表将显示错误的数据。

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:33:25.337

如果您可以控制数据库，这将很简单，但是使用[Parse](http://parse.com)执行此操作意味着您有两个主要问题（其中一个您已经提到过）：

1.  据我所知，Parse 不允许在查询中分组。这意味着（使用您的架构）实际上不可能在不检索**所有**帖子的情况下获得最喜欢/评论最多的帖子。这是因为您实际上无法像在标准 SQL 查询（使用 JOIN 和 GROUP BY）中那样动态地添加具有喜欢/评论数量的新列。
2.  您不能在一个事务中更新多个对象，因此用户可能会添加评论但帖子对象中的评论数量不会改变。

话虽如此，我认为（至少如果您坚持使用解析）您必须将“noOfLikes”和“noOfComments”列添加到 Post 对象。它不仅为检索 N 个热门帖子（而不是全部）提供了唯一可行的解​​决方案，而且在我看来，不一致的实际风险非常低。您始终可以捕获网络（或其他）异常并在本地临时存储更新请求并稍后重试。

# php - ajax 调用检查重复数据

> ID：10362430
> 
> 赞同：2
> 
> 时间：2012-04-28T09:52:43.747
> 
> 标签：php, ajax, jquery

这是让 ajax 检查用户存在的表单。

```
<!DOCTYPE html>

<html>
    <head><title>Register new user!</title>
    <script src="jquery-1.7.1.min.js"></script>
    </head>
    <body>
        Username:
        <input type="text" name="username" id="username"/><span id="user"></span><br/>
        Password:
        <input type="password" name="password" id="password"/><br/>
        <input type="button" value="Register" name="submit" id="submit" onclick="register_user();"/>
    </body>
    <script>
        function register_user()
        {
            $.ajax(
                {
                    type:"POST",
                    data:username,
                    url:"userexists.php"                    
                })
            .fail(function()
                  {
                    $('#user').html("This user already exists");
                  }
            );                
        }
    </script>
</html> 
```

这是 userexists.php 模块

```
<?php
    // connection to the db
    define(IPHOST,"localhost");
    define(DBPASSWORD,"");
    define(DBUSER,"root");
    define(DATABASE,"ajaxtest");
    define(TABLENAME,"at");

    $conn=mysql_connect(IPHOST,DBUSER,DBPASSWORD) or die(mysql_error());
    mysql_select_db(DATABASE) or die(mysql_error());
    $username=$_POST('username');
    $sql="SELECT username FROM ".TABLENAME." WHERE username=".$username;
    $query=mysql_query($sql);
    if(0!=mysql_numrows($query))
    {
        //
    }
    else
    {

    }
?> 
```

但是我一直想弄清楚ajax函数的实际工作原理，例如，在我知道输入的用户名已被使用后，我应该在空白字段中输入什么？我根本不懂ajax。

[**更新**] 谢谢，我现在明白了，我有几个答案，不知道选择哪一个作为最好的回复。没有选择全部的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:06:02.027

您的代码中有很多错误，请尝试以下代码：

```
<!DOCTYPE html>

<html>
    <head><title>Register new user!</title>
    <script src="jquery-1.7.1.min.js"></script>
    </head>
    <body>
        Username:
        <input type="text" name="username" id="username"/><span id="user"></span><br/>
        Password:
        <input type="password" name="password" id="password"/><br/>
        <input type="button" value="Register" name="submit" id="submit" onclick="register_user();"/>
    </body>
    <script>
        function register_user()
        {
            $.ajax({
                type: "POST",
                data: {
                    username: $('#username').val(),
                },
                url: "userexists.php",
                success: function(data)
                {
                    if(data === 'USER_EXISTS')
                    {
                        $('#user')
                            .css('color', 'red')
                            .html("This user already exists!");
                    }
                    else if(data === 'USER_AVAILABLE')
                    {
                        $('#user')
                            .css('color', 'green')
                            .html("User available.");
                    }
                }
            })              
        }
    </script>
</html> 
```

对于您的 php 代码：

```
<?php
    // connection to the db
    define(IPHOST,"localhost");
    define(DBPASSWORD,"");
    define(DBUSER,"root");
    define(DATABASE,"ajaxtest");
    define(TABLENAME,"at");

    $conn=mysql_connect(IPHOST,DBUSER,DBPASSWORD) or die(mysql_error());
    mysql_select_db(DATABASE) or die(mysql_error());

    $username = mysql_real_escape_string($_POST['username']); // $_POST is an array (not a function)
    // mysql_real_escape_string is to prevent sql injection

    $sql = "SELECT username FROM ".TABLENAME." WHERE username='".$username."'"; // Username must enclosed in two quotations

    $query = mysql_query($sql);

    if(mysql_num_rows($query) == 0)
    {
        echo('USER_AVAILABLE');
    }
    else
    {
        echo('USER_EXISTS');
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T10:10:07.463

由于您是 AJAX 的新手，让我试着在我们进行的过程中通过一些解释帮助您更好一点。

AJAX 代表异步 Javascript 和 XML。使用它，您可以向另一个页面发出请求，并根据另一个页面返回的结果让您的原始页面表现不同。

那么这有什么用呢？好; 您甚至可以在“用户名”字段上设置 onblur 以检查远程脚本以查看用户名是否已在使用中。（您在当前设置中已经在执行此操作。干得好！）

首先; .fail() 告诉您当前页面“如果 ajax 请求失败，让我们执行此代码”。这称为回调。回调是 javascript 代码在异步请求完成时执行的函数。

所以你真正想要做的是使用 .done() 方法。这告诉您的 jQuery 请求“嘿，当您完成此请求后，请执行这段代码。当您这样做时，我将坐在这里处理发生的任何其他事情”。

因此，您可以看到使用 .done() 和 .fail() 之间存在细微差别，但是我可以看到您很容易将 .fail() 与 ajax 新手混淆。

因此，让我们回到您当前的问题。让我们将 ajax 修改为更像这样的东西：

```
$("#submit").click(function()
{
    $.ajax({
      type: "POST",
      data: "username="+$("#username").val(),
      url: "userexists.php"                    
    })
    .done(function(response){
        $('#user').html(response);
    });
}); 
```

这样做是为您的提交按钮绑定一个 onclick 处理程序，其 id 为“提交”。所以现在你可以删除 onclick="register_user"。其次，它说，“嘿，网页，去向 userexists.php 发送带有参数名称 username 的用户名文本框值。完成该请求后，将 #user 的 html 设置为响应。

所以它会去做。

现在你的 PHP 文件，你可以这样做：

```
<?php
    // connection to the db
    define(IPHOST,"localhost");
    define(DBPASSWORD,"");
    define(DBUSER,"root");
    define(DATABASE,"ajaxtest");
    define(TABLENAME,"at");

    $conn = mysql_connect(IPHOST,DBUSER,DBPASSWORD) or die(mysql_error());
    mysql_select_db(DATABASE) or die(mysql_error());

    $username = mysql_real_escape_string($_POST['username']); // Stop some MySQL injections

    $sql="SELECT username FROM ".TABLENAME." WHERE username='$username'";
    $query=mysql_query($sql);
    if(mysql_numrows($query) == 0)
    {
        echo 'Username is available!'
    }
    else
    {
        echo 'Sorry, username is in use.';
    }
?> 
```

因此，一旦您的脚本进行查询，如果找到结果，它将在 HTML div 中显示“用户名可用！”。否则，如果找到匹配项，则会显示“对不起，用户名不可用”。

希望这可以帮助您更好地理解 ajax！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:04:52.523

这在技术上取决于你。（例如）您可以为“用户存在”返回“1”，为“用户不存在”返回“0”，或者返回更详细的 XML。客户端应用程序 (Javascript) 将读取返回的结果并向用户打印出适当的消息。

如果您的功能实际失败（服务器端错误等），则应使用 .fail 方法。所以它似乎不适合你想要做的事情。我会在您的“.done()”代码中放入上述返回值的测试并打印出正确的消息。

Javascript：

```
.done(function ( data ) {
  if(data == "0")
    alert("Your username is OK");
  else
    alert("Your username is already used");
}); 
```

PHP：

```
if(0!=mysql_numrows($query))
{
    echo "0";
}
else
{
    echo "1";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T10:05:09.917

当服务器返回意外数据时，使用 ajax 中的函数 .fail。但是您的 php 代码不返回任何内容。使用这样的东西：

```
function register_user()
    {
        $.ajax(
            {
                type:"POST",
                data:username,
                url:"userexists.php"                    
            })
        .done(function(_return)
              {
                if(_return)                                                                                                                                                               
                {
                   if(_return['status']=='yes')
                   {
                     $('#user').html(_return['msg']);
                   }
                 }
              })
        .fail(function());                
    } 
```

在 php 中：

```
if(0!=mysql_numrows($query))
{
      $return = array('status'=>'yes',
                      'msg'=>"User alredy exist");

      echo json_encode($return);
      return true;
} 
```

现在您可以添加更多具有许多状态的条件并在 javascript 中对其进行解析。

# nhibernate - nhibernate：没有表的类映射

> ID：10362436
> 
> 赞同：2
> 
> 时间：2012-04-28T09:53:40.483
> 
> 标签：nhibernate, nhibernate-mapping

我有一个实体类，用于表示 sql 查询的结果。类的映射如下所示。然而，据我所知，nhiberate 将映射视为有一个真正的数据库表 - 而实际上没有。在这种情况下，数据库中根本没有代表该实体的任何内容。我正在使用它来映射查询，但视图也是如此。有没有办法指示 nhibernate 没有映射表示的表？

```
<class name="Models.UserTransaction"> <!-- Defaults table name same as Entity even though table doesn’t exist -->
  <id name="Id">
    <column name="Id" not-null="true" unique="true" />
    <generator class="native" />
  </id>
  <property name="TransType" />
  <property name="Date" />
  <property name="Amount" />
  <property name="Balance" />
</class> 
```

这是我正在映射的查询，它使用用户定义的表。即使我复制的示例出现在没有映射的情况下，我也无法让它工作。

```
 <sql-query name="UserTransactions">
    <query-param name="userId" type="string" />
    <return class="Models.UserTransaction" alias="userTx">
      <return-property name="TransType" column="TransType" />
      <return-property name="Id" column="Id" />
      <return-property name="Date" column="TransDate" />
      <return-property name="Amount" column="Amount" />
      <return-property name="Balance" column="Balance" />
    </return>
    <![CDATA[
      SELECT userTx.[Type] as TransType, userTx.[Id] as Id, userTx.[Date] as TransDate, userTx.[Amount] as Amount, userTx.[Balance] as Balance
      FROM dbo.User_AccountStatement(:userId) userTx
    ]]>
  </sql-query> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:18:21.220

如果您有一个 db 视图，则可以使用 nhibernate 映射到该视图，但如果您所做的只是存储查询的投影字段，则根本不需要映射。

你是如何查询这些数据的？

如果您使用标准 API，则可以使用 resultstransformer 将返回的对象数组映射到您的类。类型必须在您的投影类之间匹配。

如果您使用的是 linq 提供程序，您可以直接投影到您的课程中。所以你会有这样的东西

从 s 在 Session.Query where s.some-property== "some-value" select new your-type { some-property-on-your-type = s.some-property, some-other-property-on-your -type = s.some-other-property }

由于您没有映射到数据库中的对象，因此无需编写到数据库的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:02:31.423

我想您至少应该指定一个视图作为映射的表名。该视图应该具有与您的查询相同的结果列（并希望返回您的查询可以返回的任何行）

然后您将能够：

*   将您的属性映射到您的视图/SQL 查询结果列
*   将您的课程设置为 mutable="false"
*   将您的查询声明为命名查询（请参阅：[http](http://ayende.com/blog/3948/nhibernate-mapping-named-queries-query-and-sql-query) ://ayende.com/blog/3948/nhibernate-mapping-named-queries-query-and-sql-query ）

# javascript - 将 LESS 变量传递给 JavaScript

> ID：10362445
> 
> 赞同：8
> 
> 时间：2012-04-28T09:55:48.333
> 
> 标签：javascript, jquery, css, less

我有一个包含一些变量的 LESS 文件：

```
@font-size: 100%;
@label-align: left;
@field-width: 230px;
@icon-size: 16px;
@icon-padding: 8px; 
```

在我的 JS 脚本中，我需要知道用户在 LESS 文件中设置的一些初始值的总和。计算出的 css 值可能会根据父容器大小而变化。这些值也会在首次加载时发生变化，具体取决于窗口大小。

有些元素也是动态创建的，因此很难在 JS 中获取正确的初始值，因为我必须在代码的不同点和不同的范围内声明变量。

我的一个想法是声明一个带有一些虚拟变量的“高范围”对象，并在我将元素附加到 DOM 后立即将值分配给变量，但结果却是混乱和多余的。

几个小时后，我想出了这个目前有效的想法，有点老套但有效。

**较少的：**

```
.less-vars {
    width: @field-width + @error-width + @icon-size + (@icon-padding * 2);
} 
```

**JS**：

```
var less_vars = $('<div class="less-vars" />').hide().appendTo('body').width();
$('.less-vars').remove(); 
```

我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T10:19:01.437

我刚刚编写了一小段 Javascript，它直接从 document.styleSheets 读取它，因此它不需要任何额外的 HTML。我只在 Chrome 中测试过。

在我的少我有：

```
#less {
    .thumbsWidth { width: @thumbsWidth; }
    .thumbsTop { width: @thumbsTop; }
} 
```

我的 Javascript 内容如下：

```
var oLess = {};
$.each(document.styleSheets,function(i,sheet){
    $.each(sheet.cssRules,function(i,rule){
        var sRule = rule.cssText;
        if (sRule.substr(0,5)=="#less") {
            var aKey = sRule.match(/\.(\w+)/);
            var aVal = sRule.match(/(\d+)/);
            if (aKey&&aVal) oLess[aKey[1]] = aVal[0]<<0;
        }
    });
});
console.log(oLess); 
```

这使得oLess：

```
{
    thumbsWidth: 123,
    thumbsTop: 456
} 
```

目前这只读取像素值，但您可以轻松修改它以读取任何内容。

-更新-

这是一个小提琴： http: [//jsfiddle.net/Sjeiti/VHQ8x/](http://jsfiddle.net/Sjeiti/VHQ8x/)（资源中的要点[https://gist.github.com/2948738](https://gist.github.com/2948738)）

-很晚的更新-

上面那个在当时还不错。现在你最好使用 CSS 变量和`element.style.getPropertyValue("--my-var");`. 见这里：[https ://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties#Values_in_JavaScript](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties#Values_in_JavaScript)

# facebook - 新闻源中的 Facebook 应用程序通知程序

> ID：10362446
> 
> 赞同：0
> 
> 时间：2012-04-28T09:55:53.607
> 
> 标签：facebook, facebook-opengraph

有谁知道如何实现这些功能？

![在此处输入图像描述](../Images/5aed4b4f2a5a512185c708dc20a24cd2.png)

1.  我们如何获得 PlayNow 类型的链接（我想在那个地方添加我自己的自定义链接）

2.  如何在这种聚合上获取用户图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:32:13.790

据我所知，这是您无法控制的 Facebook 自定义实现。Facebook 为某些流行的操作（例如玩游戏、阅读新闻或观看视频）在新闻源上提供自定义聚合。正如您在发布的聚合中看到的那样，每个应用程序都是不同的。

当一组用户使用您的应用阅读新闻，而 Facebook 选择在这些用户的朋友的新闻提要上显示“X 和 y 多个朋友最近阅读文章”的聚合时，您的应用*可能*会进入该聚合。“立即阅读”按钮是独立出现的，因为 Facebook 了解您的对象是什么。

您可以控制的聚合仅包含您的应用程序，您可以在开发人员网站上的应用程序的 Open Graph 面板中执行此操作。只需进入聚合并根据您的选择进行设计。这就是我为自己实现它的方式：

这就是它在用户的 Home Feed 中的样子。可以根据您的要求设置文本“分享您关于 Dil Chahta hain... 的两分钱...”。 ![这就是它在用户主页 Feed 中的样子](../Images/36039ba6e10f6a6130339adae66a8d92.png)

其次，您可以在用户的​​时间线上控制您自己的应用程序的聚合。这就是我的应用程序聚合在用户时间线上的外观。请注意，目前只为一个用户显示两个聚合，而不是我的图像中显示的 3 个（这是在批准阶段之前拍摄的）。 ![在此处输入图像描述](../Images/2585362c8d0e6712937af430cca97a9b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:27:51.253

这是 facebook 为特定类型的应用程序所做的聚合：游戏。您可以在应用设置中将您的应用设置为游戏，*类别*字段中的第一个选项卡（基本）第一部分（基本信息）。

如果您这样做，那么当 Facebook 将此提要故事汇总给朋友时，他们应该包含您的“游戏”。据我所知，如果您这样做，那么您将无法更改“立即播放”中的文本。

使用打开的图表，您可以定义您的应用程序使用的对象以及用户对其执行的操作。然后，您可以控制您的应用程序生成的故事如何聚合到用户的时间线中。

官方指南非常直截了当，并提供了很好的示例，您可以按照这些示例来了解事情的运作方式。如果您对开放图有更具体的问题，请提出来。

# asp.net-mvc - LINQ 还是存储过程？哪一个是有利的？

> ID：10362447
> 
> 赞同：-1
> 
> 时间：2012-04-28T09:55:54.543
> 
> 标签：asp.net-mvc, visual-studio-2008, linq-to-sql, stored-procedures, c#-3.0

我在 Visual Studio 2008 中使用 C#。我有一个绑定列表视图的 aspx 页面。从 8 个表访问数据。

我应该更喜欢哪一个以获得最大性能，存储过程或后面代码中的 linq？

哪一个的网络流量最小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:04:09.047

存储过程几乎总是更快，并且允许对查询执行进行更多控制，但是在流量较低的项目或开发计划非常短的项目上，构建它们的开发时间可能不合理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T10:23:30.773

在大多数情况下，它是情境化的，并且还取决于数据的大小。
同样首先，始终检查您的团队当前的编码标准和模式是什么。如果贵公司的标准说始终使用 SPROCS，那么请遵守这些标准。

**大量记录 (SPROC)**
如果表中的预期数据可能是每个表中的几十万条记录，那么对于 8 个表返回总共有一百万条记录以使用 LINQ 检索一小部分数据可能是完全开销。

LINQ 会将其当前迭代的记录保留在内存中，直到构建预期的结果集。这很可能会以内存中的所有百万条记录+内存中结果集的记录而告终。

另请注意，Visual Studio 的内存限制为 2GB 内存（无论您有多少 RAM），而不是它的表面（在 32 位系统的调试模式下，不确定 64 位）。过去我在使用 LINQ 查询大型数据集时遇到过问题，因此我遇到了内存不足的异常。

在这种情况下，SPROC 可能更快更安全。

**很少的记录 (LINQ)**
另一方面，如果 8 个表中的每一个中的数据在未来都将始终很小，并且不会发生太大变化，那么使用 LINQ 几乎没有什么区别。但是，请测试多个表连接在 LINQ 中是否可能比在 SPROC 中慢。

**编辑（比较/分析执行计划）**
另请注意，在大多数情况下，使用 LINQ 为连接生成的 SQL 在大多数情况下在 .NET 4.0 中非常有效，不确定 .NET 3/3.5 但使用 SQL 探查器可以看到生成的 SQL 并运行它在 SQL 中将其与 SPROC 执行计划进行比较。

# .net - 使非活动形式变暗

> ID：10362448
> 
> 赞同：1
> 
> 时间：2012-04-28T09:55:57.897
> 
> 标签：.net, winforms

使用 Form.ShowDialog() 打开对话框表单时，我想用灰色阴影使应用程序的其余部分变暗。

从我自己的研究来看，这样做的方法似乎是打开一个黑色背景和不透明度小于 100% 的无边界表单，但我还没有把所有的部分放在一起，它是如何工作的，或者它是否是最好的方法.

任何的意见都将会有帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T15:27:25.883

这最好通过将打开的表单与另一个无边框且大小相同的表单覆盖来完成。这允许您使整个表单看起来被禁用，包括控件和标题栏。在您的项目中添加一个新类并粘贴以下代码：

```
using System;
using System.Drawing;
using System.Collections.Generic;
using System.Windows.Forms;

class DialogOverlay : IDisposable {
    public DialogOverlay() {
        var cnt = Application.OpenForms.Count;
        for (int ix = 0; ix < cnt; ++ix) {
            var form = Application.OpenForms[ix];
            var overlay = new Form { Location = form.Location, Size = form.Size, FormBorderStyle = FormBorderStyle.None,
                ShowInTaskbar = false, StartPosition = FormStartPosition.Manual, AutoScaleMode = AutoScaleMode.None };
            overlay.Opacity = 0.3;
            overlay.BackColor = Color.Gray;
            overlay.Show(form);
            forms.Add(overlay);
        }
    }
    public void Dispose() {
        foreach (var form in forms) form.Close();
    }
    private List<Form> forms = new List<Form>();
} 
```

并像这样使用它：

```
 private void DialogButton_Click(object sender, EventArgs e) {
        using (new DialogOverlay()) 
        using (var dlg = new Dialog()) {
            if (dlg.ShowDialog(this) == DialogResult.OK) {
                // etc...
            }
        }
    } 
```

调整 Opacity 和 BackColor 属性以调整效果。它适用于任何类型的对话框，包括 OpenFileDialog 等内置对话框，以及应用程序中的任何打开表单集。请注意，Application.OpenForms 有点错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:20:41.473

我不确定您将“应用程序的其余部分”变暗是什么意思，但我将向您展示如何使用不透明度小于 100% 的灰色阴影为应用程序着色。

代码（我假设您使用的是 c#）：

```
Graphics g = this.CreateGraphics(); // Creating graphics for this form.
g.FillRectangle(Color.FromArgb(80, 102, 90, 95), 0, 0, this.Width, this.Height); 
// Draws a gray rectangle with an opacity of 30% over the whole form. 
```

然后摆脱灰色矩形，您可以使用：

```
this.Invalidate(); 
```

这将重绘表单，所有控件将保持不变，但灰色会消失。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-14T03:47:29.793

这种方法的一种替代方法是使用一个继承的表单实例，它隐藏了 showDialog。然后，您可以禁用/启用当前表单栏的所有表单。虚拟表单的代码用于处理此处描述的问题； [无法触发表单激活事件 - 禁用表单的问题](https://stackoverflow.com/questions/43694389/cannot-fire-form-activate-event-issue-with-disabled-forms)

这种方法的优点之一是它不需要更改 showDialog 方法的正常处理。就这样称呼它；

```
if (dlg.ShowDialog(this) == DialogResult.OK) {
            // etc...
        } 
```

在你继承的形式

```
public abstract class MyBaseForm : XtraForm
{
    private DialogResult setFormsToBackground(Form fParent)
    {
        Form dummyForm = new Form();
        dummyForm.ShowInTaskbar = false;
        dummyForm.FormBorderStyle = FormBorderStyle.None;
        dummyForm.Load += ((object sender, EventArgs e) => { (sender as Form).Size = new Size(0, 0); });

        List<Form> lstFormsToEnable = new List<Form>();
        for (int i = Application.OpenForms.Count - 1; i >= 0; i--)
        {
            try
            {
                Form checkfrm = Application.OpenForms[i];
                if (checkfrm != this && dummyForm != this && checkfrm.Enabled)
                {
                    lstFormsToEnable.Add(checkfrm);
                    checkfrm.Enabled = false;
                }
            }
            catch (Exception ex)
            {

            }
        }
        dummyForm.Show();
        DialogResult result = DialogResult.None;
        if (fParent == null) result = base.ShowDialog();
        else result = base.ShowDialog(fParent);
        for (int i = lstFormsToEnable.Count - 1; i >= 0; i--)
        {
            try
            {
                Form checkfrm = Application.OpenForms[i];
                checkfrm.Enabled = true;
            }
            catch (Exception ex)
            {

            }
        }
        dummyForm.Close();
        return result;
    }
} 
```

# python - 唯一的域 url 列表

> ID：10362453
> 
> 赞同：0
> 
> 时间：2012-04-28T09:56:28.980
> 
> 标签：python, list

```
urls = ['http://www.doopa.pl/1','http://www.doopa.pl/2',
    'http://www.dupa2.pl/4/php.pl', 'http://www.dupa3.pl/4/php?gfdgfd=44',
    'www.dupa4.pl/4/php.pl'] 
```

此示例列表包含同一域上的两个 url：

[http://www.doopa.pl/1](http://www.doopa.pl/1)

[http://www.doopa.pl/2](http://www.doopa.pl/2)

从这个列表（网址）中，我必须制作第二个唯一的列表。第二个列表只能包含来自一个唯一域的一个 url。

第一个列表甚至可以包含 100.000 个 URL 等等。

实现此目的的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:02:05.443

调用`urlparse.urlparse`并使用`netloc`结果的成员。

```
>>> urls = ['http://www.doopa.pl/1','http://www.doopa.pl/2',
...     'http://www.dupa2.pl/4/php.pl', 'http://www.dupa3.pl/4/php?gfdgfd=44',
...     'www.dupa4.pl/4/php.pl']
>>> from urlparse import urlparse
>>> dict((urlparse(u).netloc, u) for u in urls).values()
['www.dupa4.pl/4/php.pl', 'http://www.dupa2.pl/4/php.pl', 'http://www.doopa.pl/2', 'http://www.dupa3.pl/4/php?gfdgfd=44'] 
```

请注意，结果将包含 中列出的每个域的*最后一个*`urls`URL 。如果你想要第一个，那么`reversed(urls)`在理解中循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:08:41.387

```
import urlparse

urls = ['http://www.doopa.pl/1','http://www.doopa.pl/2',
        'http://www.dupa2.pl/4/php.pl', 'http://www.dupa3.pl/4/php?gfdgfd=44',
        'www.dupa4.pl/4/php.pl']

domains = {}

for url in urls:
    if not url.startswith("http://"):
        # Woops this will screw up the parser. Lets clean that up
        url = "http://" + url
    parse = urlparse.urlparse(url)
    path = parse.path
    netloc = parse.netloc
    if netloc in domains:
        domains[netloc].append(path)
    else:
        domains[netloc  ] = [path]

print domains 
```

您现在有一个包含关联路径的域字典。

# c# - 实体框架插入在间歇性时间段后失败

> ID：10362454
> 
> 赞同：0
> 
> 时间：2012-04-28T09:56:29.747
> 
> 标签：c#, .net, wcf, sql-server-2008, entity-framework

我在 EF 中使用代码优先方法。我的代码在我的本地开发人员计算机上运行良好，但是在生产中我遇到了奇怪的行为，一段时间后，我的一个对象将不再插入并引发错误。

我怀疑这可能是我使用的，`DatabaseGeneratedOption.Identity`因为我的用户没有遇到这个问题。

整个昨天我都能够插入这个对象，然后今天早上我现在不能。我的设置如下：

**用户**

```
 [Key]
    [DataMember]
    public Guid UserID { get; set; }

    [DataMember]
    public string Password { get; set; }

    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string LastName { get; set; }

    public ICollection<Fish> Fish { get; set; } 
```

**鱼**

```
 [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [DataMember]
    public Guid FishID { get; set; }

    [DataMember]
    public Guid UserID { get; set; }

    [DataMember]
    public virtual User User { get; set; }

    [DataMember]
    public string Title { get; set; }

    [DataMember]
    public string Description { get; set; } 
```

更新：

错误：“更新条目时发生错误。有关详细信息，请参阅内部异常。”

然后在下面我有：

> 在 SyncInvokeCreateUserFish(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] 输入, Object[]& 输出) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

**更新：**

我重新启动了服务器，现在我再次能够插入一个新的“鱼”。这是否表明 SQL Server 2008 r2 / WCF 而不是 EF 存在问题？

# html - 包括一个 在一个里面 在 HTML5 中

> ID：10362461
> 
> 赞同：0
> 
> 时间：2012-04-28T09:57:25.917
> 
> 标签：html

是否可以在 HTML5中添加`<form>`内部？`<section>`指向`<form>`inside使用示例的指针`<section>`将非常有用，因为我无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:09:20.713

对的，这是可能的。例子：

```
<section>
    <form>
        <input name="first_name" />
        <input type="submit" />
    <form>
</section> 
```

如果您使用的是 v9 之前的 Internet Explorer 版本，则需要使用[html5shiv](http://code.google.com/p/html5shiv/)才能使 HTML5 元素`<section>`完全正常工作。

# reporting-services - 如何在运行时指定报告pdf名称？

> ID：10362463
> 
> 赞同：1
> 
> 时间：2012-04-28T09:57:46.193
> 
> 标签：reporting-services

我有一份名为“债务报告”的报告。它每月运行一次，并通过订阅选项在每月的第一天生成一个 pdf。
如果我正在运行本月的报告，那么 pdf 的报告名称应该是“4 月的债务报告”，同样，如果我在 5 月运行它，那么 pdf 的名称应该是“5 月的债务报告”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:39:10.427

假设您[将报告安排到文件共享](http://msdn.microsoft.com/en-us/library/ms159264%28v=sql.105%29.aspx)，您可以将文件共享的名称设置为`Debt Report for @timestamp`- 这将以`Debt Report for` *YYYY_MM_DD_HRMINSS*格式命名文件。

如果您只希望月份名称（而不是整个时间戳）出现在文件名中，则需要使用[Data Driven Subscription](http://msdn.microsoft.com/en-us/library/ms156012%28v=sql.105%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:59:00.297

另一种选择，虽然有点技术性，是使用 rs.exe 实用程序来生成报告。这涉及：

*   创建一个生成报告的脚本文件（在这里您可以根据自己的喜好设置文件名）

*   创建一个以脚本文件为参数调用 rs.exe 的批处理文件

*   按计划运行批处理文件，例如使用 Windows 计划程序或 SQL Server 代理

这里有一个如何执行此操作的示例（创建 Excel 文件但原理相同）[http://skamie.wordpress.com/2010/08/11/using-rs-exe-to-render-ssrs-报告/](http://skamie.wordpress.com/2010/08/11/using-rs-exe-to-render-ssrs-reports/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:44:58.787

此问题的解决方案是“数据驱动订阅” [http://msdn.microsoft.com/en-us/library/ms169972(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms169972(v=sql.105).aspx) http://www.kodyaz.com/reporting-services /create-data-driven-subscription-in-sql-server.aspx

以下链接对我有很大帮助，但链接中给出的查询会产生问题 - 转换 getdate 的数据类型，它将解决问题

[http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/0f075d9b-52f5-4a92-8570-43bbdaf2b2b1](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/0f075d9b-52f5-4a92-8570-43bbdaf2b2b1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-31T18:07:04.557

我不得不做同样的事情（差不多）

我必须生成一份每周报告来归档并将其保存为 REPORT-Week01.pdf，然后是 REPORT-Week02.pdf 等。

我使用的机制是通过计划作业更改计划表中的参数列。这计算了所需的文件名并简单地替换它。然后，当计划的作业运行时，它会在创建计划时写入文件名设置（除了在午夜后 1 分钟更改为我想要的文件名）

此后，我实现了另一组写入文件夹的报告，每个月都会更改下个月的文件夹名称（当前将所有报告写入名为 202103 的文件夹）今晚作业将运行，输出文件夹将更改为 202104 和预定的工作永远不需要改变

# java - 在 Eclipse 中的服务器上运行时复制 Maven 依赖项 Jar

> ID：10362465
> 
> 赞同：1
> 
> 时间：2012-04-28T09:58:04.417
> 
> 标签：java, eclipse, maven, jboss7.x

我创建了一个启用了 Maven 依赖项的动态 Web 项目。现在，当我在 Eclipse 内置的 JBoss AS7 服务器中运行应用程序时，来自 Maven 依赖项的 jar 不会复制到 WAR 文件的库中，因此我得到了 ClassNotFoundException。

我怎么解决这个问题？

* * *

编辑：

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>EMSApplication</groupId>
    <artifactId>EMSApplication</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <repositories>
        <repository>
            <id>googlecode</id>
            <url>http://jqwicket.googlecode.com/svn/m2-repo/releases/</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>org.apache.wicket</groupId>
            <artifactId>wicket-core</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.wicket</groupId>
            <artifactId>wicket-spring</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.wicket</groupId>
            <artifactId>wicket-extensions</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.wicket</groupId>
            <artifactId>wicket-datetime</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.jqwicket</groupId>
            <artifactId>jqwicket</artifactId>
            <version>0.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>1.8.0.10</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>       
        <dependency> 
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>   
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.4.2</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
             <groupId>org.springframework</groupId>
             <artifactId>spring-orm</artifactId>
             <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
             <groupId>org.hibernate</groupId>
             <artifactId>hibernate-entitymanager</artifactId>
             <version>4.1.1.Final</version>
        </dependency>
        <dependency>
             <groupId>cglib</groupId>
             <artifactId>cglib</artifactId>
             <version>2.2.2</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:37:31.333

如果你喜欢使用 Maven，你必须遵循 Maven 的约定，即[文件夹结构](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，你不应该尝试绕过，因为你会失去战斗。我的建议是首先让您的 Maven 构建工作，然后将其导入您的 IDE，并在 build on 命令正常工作后继续在那里工作。

# powershell - Bat-file禁止用户输入

> ID：10362467
> 
> 赞同：1
> 
> 时间：2012-04-28T09:58:33.337
> 
> 标签：powershell, input, batch-file

我正在制作一个 .bat 文件运行一个 powershell 脚本，我需要确保该脚本不要求用户输入任何内容，因为这样可能会停止脚本的干净运行。所以我的问题是：

1.  如何设置禁用所有类型的输入？
2.  在计算机用户不应与脚本交互的计算机上远程运行 powershell 脚本时，我还需要考虑其他什么吗？

谢谢 周末愉快！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:03:21.907

使用`-NonInteractive`PowerShell.exe 上的开关。从使用信息：

```
-NonInteractive
    Does not present an interactive prompt to the user. 
```

我自己没有使用过它，所以我不能说它的效果如何。YMMV。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:13:13.590

1.  您可以使用 NonInteractive 开关禁用输入，但提示用户的命令仍将等待输入。

2.  有许多提示确认的 cmdlet。您可以尝试将 $ConfirmPreference 首选项变量设置为“无”以覆盖提示。

除此之外，最好的办法是在将脚本用于生产之前对其进行测试。这是确定您的脚本是否可以挂起等待某人响应的最佳方式。

# sql - 在sql中使用nolock

> ID：10362468
> 
> 赞同：-3
> 
> 时间：2012-04-28T09:58:58.240
> 
> 标签：sql

```
insert into table b select * from table a (nolock) 
```

我在哪里放`nolock`？以上给出了一个错误，因为列名无效'nolock'

我的要求是将数据从一个表插入到另一个表`a`，`b`但我经常遇到死锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:15:26.360

假设这是针对 SQL Server ...

一种更现代的编写方式是

```
insert into b 
   select * 
   from a with (readuncomitted) 
```

使用它有很多风险和后果。`readuncommitted`值得考虑的是，表 a 在使用`NOLOCKS`.

即使这样，您仍然可以看到死锁，具体取决于当时这些表还发生了什么。您可以通过读取未提交的数据并且在读取时不对表 a 持有任何锁来消除死锁的一个潜在原因。

有关详细信息，请参阅此问题：

[nolock (SQL Server) 提示是不好的做法吗？](https://stackoverflow.com/questions/1452996/is-the-nolock-sql-server-hint-bad-practice)

# php - PHP 使用 .htaccess 文件重写链接

> ID：10362474
> 
> 赞同：-2
> 
> 时间：2012-04-28T10:00:08.860
> 
> 标签：php, ajax, .htaccess, mod-rewrite

PHP 有什么好的函数可以使用 Apache 的 mod_rewrite 来重写 URL？

```
$url="semantic/path/to/page";
$url=mod_rewrite_url($url,"path/to/.htaccess");

//$url is index.php?page_id=45 
```

我的想法是简单地解析 .htaccess 文件并将其与带有 url 的字符串进行比较，但我对一些内置函数更感兴趣，但我怀疑它是否存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:24:13.280

您可以使用包含 URL 重写（或称为“路由”）的 PHP 框架。其中一些框架（及其路由机制的链接）包括：

*   [CakePHP](http://book.cakephp.org/2.0/en/development/routing.html)
*   [Zend 框架](http://framework.zend.com/manual/en/zend.controller.router.html)
*   [交响乐](http://symfony.com/doc/current/book/routing.html)
*   [代码点火器](http://codeigniter.com/user_guide/general/routing.html)

# backbone.js - 如何在模块化 Backbone.js 应用程序的视图模块中使用路由器？

> ID：10362475
> 
> 赞同：3
> 
> 时间：2012-04-28T10:00:13.083
> 
> 标签：backbone.js, requirejs, backbone-routing

我使用 RequireJS 来组织我的 Backbone 应用程序，我的路由器模块如下：

```
define([
'jquery',
'underscore',
'backbone',
'collections/todos',
'views/todosview'
], function($, _, Backbone, TodosCollection, TodosView){
var AppRouter = Backbone.Router.extend({

    routes: {
        "": "index",
        "category/:name": "hashcategory"  
    },

    initialize: function(options){
        // Do something
    },

    index: function(){
        // Do something
    },

    hashcategory: function(name){
        // Do something
    }
});

var start = function(){ 
    p = $.ajax({
        url: 'data/todolist.json',
        dataType: 'json',
        data: {},
        success: function(data) {

            var approuter = new AppRouter({data: data});
            Backbone.history.start();
        }
    });     
};

return {
    start: start
};
}); 
```

我还有另一个`app`模块用于`Router.start()`触发整个应用程序。现在，在我的 Backbone.View 模块中，我想用它`Router.navigate`来触发这个`Router`模块中的路由。我的 View 模块的开始部分如下：

```
define([
'jquery',
'underscore',
'backbone',
'models/todo',
'views/todoview',
'text!templates/todo.html',
'router'
], function($, _, Backbone, TodoModel, TodoView, todoTemplate, Router){... 
```

但是当我想`Router`在这个模块中使用时，它总是说`Router is not defined`. 我想要做的是`Router.navigate`在这个 View 模块中触发某些操作时调用。那么我怎么能做到这一点呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T12:32:40.783

创建一个单独的模块，该模块包含在您使用的每个其他模块中——它将简单地创建一个对象，您可以使用它来附加路由器实例，并在以后从您希望的任何视图或模块中调用它。（除了存储数据和轻松传递给其他模块等其他事情）

将此模块包含在您首先在此处粘贴的路由器模块中。从路由器模块的底部删除启动功能。只需在该文件的末尾返回 AppRouter。

在您最终启动主干并创建路由器的应用程序模块中，您可以将路由器初始化保存到我所指的那个共享对象中。

IE，

shared.js -> 没有依赖，但创建 YourObject = {}; 并返回 YourObject router.js -> 包含 shared.js app.js -> 包含 shared.js 和 router.js。应用程序设置路由器并保存到 YourObject.router 然后启动骨干网。您现在可以从需要此 shared.js 模块的任何其他模块调用 YourObject.router.navigate()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:11:57.377

这是一个有根据的猜测；）

您可能有一个循环需求。您需要在您的视图模块中使用路由器模块，并且还需要在您的路由器模块中使用视图模块。

这有点像糟糕的设计。您的路由器模块可能需要了解您的视图/模型，以便实例化和渲染它们。不过，您的观点应该不知道有一个路由器会在某个地方创建它们。他们应该做的就是提供可以触发路由器路由的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T04:48:07.200

怎么用

Backbone.history.navigate('',{trigger:true});

# android - 如何在 Android 上只启动一次活动？

> ID：10362479
> 
> 赞同：0
> 
> 时间：2012-04-28T10:01:15.363
> 
> 标签：android, android-intent, sharedpreferences

> **可能重复：**
> [仅开始一次活动](https://stackoverflow.com/questions/7351045/start-activity-only-once)

```
 Intent intent = new Intent(getApplicationContext(), deneme.class);

  @Override
  public void onCreate(Bundle savedInstanceState)
    {

      super.onCreate(savedInstanceState);

      if(!settings.getString(Constants.NAME, "").equals("") && !settings.getString(Constants.SURNAME,  "").equals("")  
            && !settings.getString(Constants.NUMBER, "").equals("")) {

        startActivity(intent);

    }
      //settings is my shared preferences object 

    else{   
     setContentView(R.layout.information_form_layout);

    // this part creates a shared preferences and save the values for the first time 
```

如果使用共享首选项保存的值不为空，我想开始其他活动。如果此人第一次开始活动，则 else 部分应该工作并且值应该完全填充。

我哪里弄错了？感谢帮助。

我只是按照 Henspeide 说的做了，但它仍然强制关闭。

settings 是共享首选项对象。

设置 = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:11:38.673

在 super.onCreate(..) 之后立即调用 setContentView(..)：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.first_time_startup_activity);

    if (..do settings checks here...){
        startActivity(..)
    }    
} 
```

# c++ - 总线错误：10 需要更多索引

> ID：10362481
> 
> 赞同：1
> 
> 时间：2012-04-28T10:01:17.177
> 
> 标签：c++, arrays, bus-error

我正在使用 6 个整数数组，每个数组包含 256 个元素。很标准，我想。

我面临的问题是，当我将所有这些数组初始化为全 0 时，我得到一个总线错误：10。每次在我的循环的第 240 次迭代中。

这是我的头文件...

```
class histEqImage {
private:
int histogramR[256];
int histogramG[256];
int histogramB[256];

int dashR[256];
int dashB[256];
int dashG[256];

void initHistograms();    
public:
//Other declarations here...
}; 
```

这是发生问题的功能......

```
void histEqImage::initHistograms() {
//Ensure all the values in the histogram are at 0.
for(i = 0; i <256; i++) {
    histogramR[i]= 0;
    histogramG[i] = 0;
    histogramB[i] = 0;
    dashR[i] = 0;
    dashG[i] = 0;
    dashB[i] = 0;
}
} 
```

所以每次我到达这部分代码时，程序都会在 i=240 处崩溃。抱歉，为了更好地指定，它发生`dashB[i] = 0;`在行中

这让我无休止地烦恼，我看不到我在哪里超出了我的数组范围，而且我并没有在动态内存方面使用远远超出我理解的能力。

任何帮助，都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:19:58.753

由于 的大小`histEqImage pictureDisplay`为 6 KB（假设 32 位`int`s），因此对于堆栈上的分配来说可能太大了。尝试将其移到您的外部`main`，或动态分配它。

如果将声明移到外部`main`，请将其设为静态以避免使其具有全局可见性。

```
static histEqImage pictureDisplay;

int main(int argc, char *argv[]) {
    //...
} 
```

# php - 通过cron运行php脚本会挂起终端

> ID：10362483
> 
> 赞同：0
> 
> 时间：2012-04-28T10:01:32.870
> 
> 标签：php, cron

我有一个将通过 cron 运行的 php 脚本

```
*/5 * * * * /var/www/scripts/run.php 
```

运行.php

```
#!/usr/bin/php
<?php
#stop server
exec("python /home/server.py stop");

#execute some php code here

#start server again
exec("python server.py start 2>&1 &");
?> 
```

最后一行导致了问题。

当我直接从终端运行 php 脚本时

```
/var/www/scripts/run.php 
```

它启动服务器但终端挂起

当脚本通过 cron 运行时

即使脚本完成，我在下面的 ps 中看到

```
root     23510  0.5  1.3 280064 14228 ?        Ss   10:32   0:00 /usr/bin/php /var/www/scripts/run.php 
```

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:19:29.373

如果您的 PHP 脚本确实是一个 shell 脚本，请更改 shebang。如果您希望 python 调用在后台运行，请在行尾附加“&”。如果您将其设为 shell 脚本，请尝试执行它`sh -x <script>`以查看挂起的命令。

如果你想让它成为一个有效的 PHP 脚本，这将是很多工作，但如果你使用的是 POSIX，你可以使用 fork() 这将使它相对简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:08:03.880

将最后一行更改为：

```
exec("nohup python server.py start 2>&1 &"); 
```

当控制进程或用户离开时，nohup 将告诉进程不要停止。这可能是也可能不是您的问题，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:53:00.193

最后是成功的代码

```
exec("nohup python server.py start &> /dev/null &"); 
```

# facebook - Facebook 粉丝门页面仅适用于静态页面

> ID：10362484
> 
> 赞同：0
> 
> 时间：2012-04-28T10:01:33.477
> 
> 标签：facebook, facebook-page

我正在用 php 构建 facebook 粉丝门页面。它可以 100% 工作，但仅适用于静态页面，例如 fb.php。现在我需要这样的东西：

```
FB.php>>>

$id=$_GET['id'];

///and need to put this variable into NEXT and CANCEL url.. something like that

> $loginUrl = $facebook->getLoginUrl(array(
            'canvas' => 1,
            'fbconnect' => 1,
            'display' => 'page',
            'req_perms' => 'user_likes',
            'next' => 'somesite.com/FB.php?id=$id',
            'cancel_url'=> 'somesite.com/FB.php?id=$id' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:12:43.220

```
$loginUrl = $facebook->getLoginUrl(array(
            'canvas' => 1,
            'fbconnect' => 1,
            'display' => 'page',
            'req_perms' => 'user_likes',
            'next' => 'somesite.com/FB.php?id='.$id,
            'cancel_url'=> 'somesite.com/FB.php?id='.$id 
```

# c++ - 简单的 libcurl 应用程序 - 段错误

> ID：10362487
> 
> 赞同：1
> 
> 时间：2012-04-28T10:01:40.640
> 
> 标签：c++, c, curl, segmentation-fault, libcurl

我无法确定我的代码在哪里出现段错误？

基本上，它通过 SSL (HTTPS) 安全连接连接到服务器并进行 GET，提供 MachineID（程序将其作为参数）。

还应设置一些自定义标题。然后我将返回的正文和标题保存为单独的文本文件。（基本上它会运行一个 shell 脚本，所以我的远程系统可以自动从我的服务器获取“订单”）

但它有段错误，我必须在其上开发它的唯一 linux 机器是我的 VPS，由于他们奇怪的虚拟化，它总是在加载 GDB 时崩溃......：o

谁能告诉我问题出在哪里？- 我认为它几乎可以肯定在我的字符串连接中 - 我在其中建立标题和请求 URL。

编辑：呃，忘记密码了！

```
 ```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <curl/curl.h>
#include <string.h>

 static size_t write_data(void *ptr, size_t size, size_t nmemb, void *stream)
{
 int written = fwrite(ptr, size, nmemb, (FILE *)stream);
 return written;
}

int main(int argc, char *argv[])
{
static const char *headerfilename = "head.out";
static const char *bodyfilename = "body.out";

char *url = "https://fakeserver.fakesite.com:8443/SystemManager/getOrders.jsp?machineID=";
char *customHeader = "MachineID:";
char *machineID = NULL;

struct curl_slist *chunk = NULL;

CURL *curl;
CURLcode res;
FILE *headerfile;
FILE *bodyfile;

    if (argc == 2)
{
    machineID = argv[1];
    strcat(url,machineID);
}
else
{
 printf("Usage: %s <MachineID>\n", argv[0]);
 return 1;
}

 curl_global_init(CURL_GLOBAL_SSL);

 // init the curl session 
 curl = curl_easy_init();

 if(curl) {
    // set URL to get 

 curl_easy_setopt(curl, CURLOPT_URL, url);

    // no progress meter please 
    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 1L);

    // send all data to this function 
 curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);

 // some servers don't like requests that are made without a user-agent field, so we provide one 
 curl_easy_setopt(curl, CURLOPT_USERAGENT, "libcurl-agent/1.0");

 // Also add a custom MachineID header 
 strcat(customHeader, machineID);
 chunk = curl_slist_append(chunk, customHeader);
 res = curl_easy_setopt(curl, CURLOPT_HTTPHEADER, chunk);

    // These tweaks must be enabled for my dodgy self-signed certificate.

    // DONT bother verifying our certificate is signed by a trusted CA.
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);
    // DONT check the hostname on the certificate matcheds the remote system.
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);

    // open the files 
 headerfile = fopen(headerfilename,"w");
 if (headerfile == NULL) {
 curl_easy_cleanup(curl);
 return -1;
 }
 else
 {
 // we want the headers to this file handle 
 curl_easy_setopt(curl, CURLOPT_WRITEHEADER, headerfile);
 }

 bodyfile = fopen(bodyfilename,"w");
 if (bodyfile == NULL) {
 curl_easy_cleanup(curl);
 return -1;
 }
 else
 {
 // we want the body to this file handle 
 curl_easy_setopt(curl, CURLOPT_WRITEDATA, bodyfile);
 }
     // get it! 
 res = curl_easy_perform(curl);

    // close the files 
 fclose(headerfile);
 fclose(bodyfile);

 // always cleanup curl stuff 
 curl_easy_cleanup(curl);
 }
 curl_global_cleanup();
 return 0;
} 
``` 
            回答 #1

赞同：2

时间：2012-04-28T10:06:37.873

您正在使用字符串文字作为`strcat`. 您需要为指针分配内存，然后将它们用作`strcpy`和`strcat`函数中的目标

字符串文字*通常*位于 RO 区域中，写入此类区域可能会调用**未定义的行为**

改变诸如

```
char *url 
```

至

```
char url[100]; 
```

还要考虑使用`n`的版本`strcat`和`strcpy`适当的缓冲区大小来防止无意的缓冲区溢出

            回答 #2

赞同：0

时间：2012-04-28T10:06:21.040

`strcat`如果不自己分配内存，您就无法做到。

            回答 #3

赞同：0

时间：2012-05-03T09:05:45.743

不管给出的代码中可能出现的错误供参考，在我过去的观点中，我发现 libssl 的使用默认情况下不是线程安全的。如果您使用的是 libssl，请告诉我们，如果是这样，我将能够提供更多信息

请通过 
[http://horstr.blogspot.in/2008/04/on-libcurl-openssl-and-thread-safety.html](http://horstr.blogspot.in/2008/04/on-libcurl-openssl-and-thread-safety.html)的陷阱 #2 
获得更多启发

```

# php - 在 Yii 中加入表

> ID：10362488
> 
> 赞同：1
> 
> 时间：2012-04-28T10:01:43.353
> 
> 标签：php, join, yii, inner-join

我有两张桌子，`tbl_student`和`tbl_record`。我想加入他们，但我不知道如何在 Yii 中加入。我正在使用 php。我发现教程提到`CDbCriteria`和

```
'join'=>"INNER JOIN...." 
```

我不知道代码应该在什么功能中，代码应该放在什么模型中。`tbl_student`有`stud_id`主键并且`tbl_record`有`record_id`主键和`stud_id`作为外键。有人可以告诉我一步一步的过程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T10:58:34.803

不要使用手动连接。这可以通过 Active Record 更轻松地完成。但是给你整个“一步一步的过程”并没有你想象的那么受益，你应该自己学习基础知识并提出具体的问题。*如果这个答案太令人困惑，那么 Alfredo 是对的，您应该在继续之前花更多时间学习框架。*

*第 1 步*：在各个模型中指定表关系。如果您的数据库模式使用外键（它绝对*应该*），那么`gii`模型生成器可以自动确定这些，否则您需要手动声明它们：

```
/**
 * @property Record[] $records
 */
class Student extends CActiveRecord {
  // other code...
  public function relations() {
    return array(
      // other relations
      array('records', self::HAS_MANY, 'Record', 'stud_id'),
    );
  }
}

/**
 * @property Student $student
 */
class Record extends CActiveRecord {
  // other code...
  public function relations() {
    return array(
      // other relations
      array('student', self::BELONGS_TO, 'Student', 'stud_id'),
    );
  }
} 
```

*第 2 步*：使用 Active Record 和控制器动作中的关系。这在很大程度上取决于您要做什么。

示例：加载一个学生及其所有记录。请注意，我直接在操作中打印数据 - 这是一个坏主意，我在这里使用它只是为了简洁，在实际应用程序中，您将希望使用此数据呈现视图。

```
public function actionStudentInfo($id) {
  $student = Student::model()->with('records')->findByPk($id);
  if(!$student) {
    throw new CHttpException(404, "Student not found!");
  }
  echo "<h2>Found the requested student with details:</h2>",
    "<pre>", htmlspecialchars(print_r($student->attributes, true)), "</pre>";
  if(count($student->records)) {
    echo "<h3>Student records:</h3>", "<ul>";
    foreach($student->records as $record) {
      echo "<li><pre>", htmlspecialchars(print_r($record->attributes, true)), "</pre></li>";
    }
    echo "</ul>";
  } else {
    echo "<p>Student has no records...</p>";
  }
} 
```

这其中的关键部分是`->with('records')`调用。它告诉 Active Record 系统`records`在查询中包含 Student 模型的关系数据。Active Record 将读取该关系并将其包含在查询和返回的结果中 -`Student`将`Records`在`$student->records`（这将是一个数组）中可用。

你可以在关系规范中包含很多额外的细节，例如，现在它会以没有特定顺序的方式获取这些记录，如果你想强制排序，你可以指定`'order' => 'field_name ASC'`.

Yii 文档中更详细地介绍了 Active Record 的使用：[Active Record](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)，[Relational Active Record](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)。

# java - foreach 循环中的 Java 细节

> ID：10362491
> 
> 赞同：2
> 
> 时间：2012-04-28T10:02:37.643
> 
> 标签：java, for-loop, iterator

如果我有一个二维对象数组，并且想要全部初始化它们，我会调用一个循环，例如：

```
for(int i=0; i<len; i++)
    for(int j=0; j<len; j++)
        objects[i][j] = new MyObject(); 
```

哪个工作正常，但是当我尝试使用 for-each 构造执行此操作时，它不起作用并且整个数组仍然为空：

```
for(MyObject[] intermediate: objects)
    for(MyObject obj: intermediate)
        obj = new MyObject(); 
```

他们的行为怎么不一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:05:36.020

作业

```
obj = new MyObject(); 
```

只需在变量中设置一个新对象`obj`，并不会更改数组中的值，它只会更改引用变量`obj`。

发生的情况是 ， `objects[i][j]`然后`obj`您更改 的值`obj`，而不更改实际数组。

当您直接分配时`objects[i][j]`- 它按预期工作，因为您更改了 的值`objects[i][j]`，这正是您想要做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T10:05:22.677

引用是按值传递的，因此`obj = new MyObject();`只更新您对 . 的引用的本地副本`objects[i][j]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:31:33.027

它只适用于外循环，因为有新的引用，但不是深层的：

```
public static void main (String[] args ) {
    Integer [][] iaa = new Integer[3][4];
    for (Integer[] ia : iaa) {
        for (int i = 0; i < ia.length; ++i) {
            ia[i] = i; 
        }
    }
} 
```

# c# - 如何从 C# 控制台应用程序中触发“任务失败”？

> ID：10362494
> 
> 赞同：1
> 
> 时间：2012-04-28T10:03:08.857
> 
> 标签：c#, windows, scheduled-tasks

我有一个使用 windows server 2008 任务调度程序执行的 C# 控制台应用程序，但是当应用程序内部发生异常时，我仍然在事件日志中看到“任务已完成”。我想在发生异常时触发任务失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:12:08.170

您应该让您的控制台应用程序返回一个不同于 0 的 int：

```
class Program {
    static int Main(string[] args) {
        try {
            do_stuff();
            return 0; 
        } catch (MyException exc) {
            return 1;
        }
    }
} 
```

# javascript - 带有地图的Jquery对话框问题

> ID：10362497
> 
> 赞同：1
> 
> 时间：2012-04-28T10:04:04.413
> 
> 标签：javascript, jquery, jquery-ui, google-maps, jquery-ui-dialog

```
 $("#body_content").dialog({
            title: "AAAa",
            modal: true,
            width:'auto',
            height:'auto',
            resizable:false,

            open: function(){

                var id = $('#right_button').attr('id');
                var lat = $('#right_button').attr('lat');
                var lng = $('#right_button').attr('lng');
                var body_text = $('#body_content').attr('body_text');

                $("#body_content").html(body_text); //this is the line that "breaks" the script
                if (lat != "" && lng!=""){

                if (map == null) {
                    var myOptions = {
                        zoom: 14,
                        center: new google.maps.LatLng(lat, lng),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var latLng = new google.maps.LatLng(lat,lng);
                    map = new google.maps.Map(document.getElementById('map_dialog'), myOptions);

                    var marker;
                    marker = new google.maps.Marker({
                        position: latLng,
                        map: map
                    });
                }

            }
                else {
                    $('#map_dialog').hide();
                }
                } 
```

在我的代码中，我尝试显示内容并映射到对话框中，但是当我使用`$("#body_content").html(body_text);`地图时没有出现，所以当我删除这一行时，地图出现了这里的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:36:00.887

我认为你必须在你的 html 中查看你的 div，也许这可以帮助你[如何在 Jquery 对话框上设置内容](https://stackoverflow.com/questions/10362295/how-to-set-content-on-jquery-dialog)

# java - Java中的简单堆栈实现不起作用

> ID：10362499
> 
> 赞同：0
> 
> 时间：2012-04-28T10:04:25.470
> 
> 标签：java, netbeans, stack

我已经用 Java 实现了一个非常基本的堆栈，它给出了以前从未遇到过的奇怪错误。代码如下：

```
public class Stack {
Node top;
int size;

public Stack() {top=null; size=0;}

public int pop() {
    if(top!=null) {
        int item = top.data;
        top = top.next;
        size--;
        return item;
    }
    return -1;
}

public void push(int data) {
    Node t = new Node(data);
    t.next = this.top;
    this.top = t;
    size++;
}

public boolean isEmpty() {
    return size<=0 ;
}

public int getSize() {
    return size;
}

public int peek() {
    return top.data;
}

public void printStack() {
    Node n = this.top;
    int pos = this.getSize();
    while(pos>=0) {
        System.out.println("Position: " + pos + " Element: " + n.data);
        if(pos>0) {
            n = n.next;
        }
        pos--;
    }
}
}

class Node {
public int data;
public Node next;

Node(int d) {data=d; next=null;}

public int getData() {return data;}
}

class Tester {
public static void main(String[] args) {
    Stack s = new Stack();
    s.push(9);s.push(2);s.push(7);s.push(3);s.push(6);s.push(4);s.push(5);
    System.out.println("Size is: " + s.getSize());
    //s.printStack();
    for (int i=0; i<s.getSize(); i++) {
        System.out.print(s.pop()+ " ");
    }
    System.out.println();
}
} 
```

我已经彻底测试过，发现推送操作完美地工作，所有 7 个元素都以正确的顺序推送，并设置了正确的 next/top 指针。但是，当我尝试弹出所有元素时，只会弹出前 4 个（5-4-6-3）而留下其他元素。然后，我尝试使用上述方法执行 printStack，并在那里给出随机 NullPointerException 错误，如下所示：

```
run:
Position: 7 Element: 5
Position: 6 Element: 4
Position: 5 Element: 6
Position: 4 Element: 3
Exception in thread "main" java.lang.NullPointerException
Position: 3 Element: 7
Position: 2 Element: 2
    at Stack.printStack(Stack.java:58)
Position: 1 Element: 9
    at Tester.main(Stack.java:95)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

这些错误对我来说没有意义，而且通过在 push() 和 printStack() 中引入更多打印语句来跟踪它开始引发更多随机异常。每次运行的错误都是完全不确定的，并且在不同的机器上给出了不同的模式。我用 Netbeans 调试器跟踪了一次完整的运行，没有发现任何错误！

非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:20:52.107

先入`printStack()`法：

```
while (pos > 0) { 
```

代替

```
while (pos >= 0) { 
```

因为你的 0 位置总是`null`

主要是：

```
int size = s.getSize();
for (int i = 0; i < size; i++) 
```

代替

```
for (int i = 0; i < s.getSize(); i++) 
```

因为您的堆栈大小随着每次迭代而减小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T08:07:29.627

```
for (int i=0; i<s.getSize(); i++) 
```

导致每次弹出的堆栈大小减小，并且每次弹出我都会增加。到完成 4 次弹出时，堆栈大小等于 i 的值。因此，打印堆栈停在中间。

用以下内容替换上面的 for 循环

```
for (; !s.isEmpty();) 
```

将解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T08:20:59.250

printStack() 失败，因为您没有检查 n 是否为空。以下代码修复了此问题。

`public void printStack() { 节点 n = this.top; int pos = this.getSize();

```
 System.out.println("Stack Size is " + pos);
    while(n!=null) {
        System.out.println("Position: " + pos + " Element: " + n.data);
            n = n.next;
        pos--;
    }
}` 
```

# terminal - tmux 管道窗格不起作用

> ID：10362501
> 
> 赞同：3
> 
> 时间：2012-04-28T10:04:44.633
> 
> 标签：terminal, screen, tmux

我定义了一个快捷方式来开始将窗格记录到文件中，另一个用于停止记录。快捷方式处于活动状态。这些是我的命令`.tmux.conf`：

```
bind-key H pipe-pane "cat >>$HOME/tmux.log"
bind-key h pipe-pane 
```

通过按`C-b ?`我可以看到定义：

```
 H: pipe-pane "exec cat >>/home/myuser/tmux.log"                                                                                                                                                                                     
   h: pipe-pane 
```

这个想法是，对于当前窗格，`C-b H`将开始记录并将其停止。`C-b h`很明显不同的窗格会发生碰撞，但我现在不担心这个。我只想记录工作，但事实并非如此。快捷方式似乎工作正常，并且文件创建正常：

-rw-r--r-- 1 myuser mygroup 0 2012-04-28 11:21 tmux.log

但它的大小*始终*为 0。即使关闭后也是如此。没有任何东西，永远不会，被写入它。关于如何调试此问题的任何想法？

`tmux`与相比，这是我唯一的抱怨`screen`，日志记录一直是一项简单的任务，开箱即用，无需任何配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:36:18.537

什么版本的tmux？你为什么不使用 -o 选项来管道窗格？

如果这仍然生成零长度文件，请尝试使用 -vvvv 启动 tmux，然后重复管道窗格命令，并将日志放在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T00:39:09.800

对于我的 tmux 1.8，我只能先在 tmux 窗口内工作，然后再点击

`[Ctrl]+[b]` `[:]`

然后输入：

```
pipe-pane -o 'cat >> ~/output.log' 
```

当我从 tmux 会话中分离并尝试时它不起作用

```
tmux pipe-pane -o -t sessionname:0 'cat >> ~/output.log'
# that does not work for me in tmux 1.8 
```

# android - 一个 Android 应用程序可以有多个服务吗？

> ID：10362505
> 
> 赞同：1
> 
> 时间：2012-04-28T10:05:11.587
> 
> 标签：android

Service是Android的组件之一。

一个 Android 应用程序可以有多个服务吗？我可以让服务在没有活动的情况下启动吗？怎么做？

4 个组件（活动、服务、内容提供者、广播接收器）之一是我可以控制的最小单元（我的意思是我可以让它在启动时启动）吗？

我可以注册一个类的方法并让它在启动时运行吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:12:11.127

1.  是的，您可以在一个应用程序中拥有多个服务。

2.  您可以在启动时启动服务。

    在您的清单元素中：

    `<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />`

    在您的应用程序元素中

    `<receiver android:name="com.example.BroadcastReceiver">
    <intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
    </receiver>`

在 BroadcastReceiver.java 中：

```
public class Broadcastreceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    Intent startServiceIntent = new Intent(context, Service.class);
    context.startService(startServiceIntent);
}
} 
```

我希望这能回答你的问题。

# c++ - 对我构建的类使用 STL sort() func

> ID：10362509
> 
> 赞同：1
> 
> 时间：2012-04-28T10:05:37.080
> 
> 标签：c++, sorting, stl, gmp

我写了一个类，我希望它与 STL 算法 sort() 函数一起使用。让我给出一些代码片段；

```
class bignum_index_cont
{
private:
mpz_class a;
long int index;
public:
bignum_index_cont() {a=0; index=0;}
bignum_index_cont(const bignum_index_cont &big) {a=big.a; index=big.index;}

void bignum_set(mpz_class &c, long int d) {a=c;index=d;}

bool operator==(bignum_index_cont &big) {return a==big.a;}
bool operator==(mpz_class &big) {return a==big;}
bool operator>(bignum_index_cont &big) { return a>big.a;}
bool operator>=(bignum_index_cont &big) {return a>=big.a;}
bool operator<(bignum_index_cont &big) {return a<big.a;}
bool operator<=(bignum_index_cont &big) {return a<=big.a;}

//some more functions..... that I think will not be needed here.
}; 
```

然后我`vector<bignum_index_cont> hashtx1(pow(2,20)+1);`进入了全球空间。现在，在`main()`我的一些方法中，我如何设法将输入的所有元素输入`vector<bignum_index_cont>` 然后我决定对这个向量进行排序。所以，我打电话，`sort(hashtx1.begin(), hashtx1.end());`.. 但我得到了一大堆错误。他们是：

```
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h||In function '_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<bignum_index_cont*, std::vector<bignum_index_cont> >, _Tp = bignum_index_cont]':|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h:2253|70|instantiated from '_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<bignum_index_cont*, std::vector<bignum_index_cont> >]'|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h:2284|54|instantiated from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<bignum_index_cont*, std::vector<bignum_index_cont> >, _Size = int]'|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h:5407|4|instantiated from 'void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator<bignum_index_cont*, std::vector<bignum_index_cont> >]'|
C:\Users\poneer\Desktop\Cryptography\bignum.cpp:121|40|instantiated from here|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h|2212|error: no match for 'operator<' in '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = bignum_index_cont*, _Container = std::vector<bignum_index_cont>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = bignum_index_cont&]() < __pivot'|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_algo.h|2212|note: candidates are:|
C:\Users\poneer\Desktop\Cryptography\bignum.cpp|39|note: bool bignum_index_cont::operator<(bignum_index_cont&)|
C:\Users\poneer\Desktop\Cryptography\bignum.cpp|39|note:   no known conversion for argument 1 from 'const bignum_index_cont' to 'bignum_index_cont&'|
c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\stl_pair.h|207|note: template<class _T1, class _T2> bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)|
//+ a lot of errors similar to this
C:\Files\GMP\GMP\include\gmpxx.h|3150|note: template<class T, class U> bool operator<(long double, const __gmp_expr<T, U>&)|
//+ a lot similar to this 
```

请注意，如果我采用`vector<mpz_class> hashtx1(pow(2,20)+1)`并使用 sort() 函数，它编译得很好。如何改进我的代码以使其与该`sort()`功能一起使用？

另一点是我什至尝试使用递归 quicksort() 函数对向量进行排序。但它在运行时终止。

```
void quicksort(long int left, long int right)
{
long int i=left, j=right;
bignum_index_cont pivot, temp;
pivot=hashtx1[(left+right)/2];

while(i<=j)
{
    while(hashtx1[i]<pivot)
        i++;
    while(hashtx1[j]>pivot)
        j--;
    if(i<=j)
    {
        temp=hashtx1[i];
        hashtx1[i]=hashtx1[j];
        hashtx1[j]=temp;
        i++; j--;
    }

}
quicksort(left, j);
quicksort(i, right);
} 
```

我用`quicksort(0,pow(2,20))`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:09:06.013

您需要将参数设置为比较运算符 const-references 并使运算符本身为 const。

# assembly - YASM/NASM x86 程序集中立即数与方括号的基本使用

> ID：10362511
> 
> 赞同：35
> 
> 时间：2012-04-28T10:05:44.970
> 
> 标签：assembly, x86, nasm, memory-address, yasm

假设我声明了以下内容：

```
section .bss
buffer    resb     1 
```

这些说明如下`section .text`：

```
mov    al, 5                    ; mov-immediate
mov    [buffer], al             ; store
mov    bl, [buffer]             ; load
mov    cl, buffer               ; mov-immediate? 
```

我是否正确理解 bl 将包含值 5，而 cl 将包含变量的内存地址`buffer`？

我对两者之间的区别感到困惑

*   将立即数移入寄存器，
*   将寄存器移动到立即数（什么进入，数据或地址？）和
*   将立即数移入不带括号的寄存器
    *   例如，`mov cl, buffer`vs`mov cl, [buffer]`

* * *

更新：阅读回复后，我认为以下摘要是准确的：

*   `mov edi, array`将第零个数组索引的内存地址放入`edi`. 即标签地址。
*   `mov byte [edi], 3`将 VALUE 3 放入数组的第零个索引中
*   之后`add edi, 3`，`edi`现在包含数组的第三个索引的内存地址
*   `mov al, [array]`将第零索引处的 DATA 加载到`al`.
*   `mov al, [array+3]`将第三个索引处的 DATA 加载到`al`.
*   `mov [al], [array]`无效，因为[x86 不能对 2 个显式内存操作数进行编码](https://stackoverflow.com/questions/1299077/assembly-moving-between-two-memory-addresses/53470709#53470709)，并且因为`al`只有 8 位，即使在 16 位寻址模式下也不能使用。 [引用内存位置的内容。（x86 寻址模式）](https://stackoverflow.com/questions/34058101/referencing-the-contents-of-a-memory-location-x86-addressing-modes)
*   `mov array, 3`是无效的，因为你不能说“嘿，我不喜欢`array`存储的偏移量，所以我称之为 3”。立即数只能是源操作数。
*   `mov byte [array], 3`将值 3 放入数组的第零个索引（第一个字节）。 [需要说明`byte`符](https://stackoverflow.com/questions/44577130/when-should-i-use-size-directives-in-x86)来避免带有内存、立即操作数的指令的字节/字/双字之间的歧义。否则，这将是一个汇编时错误（操作数大小不明确）。

请说明其中任何一个是否是错误的。（编者注：我修复了语法错误/歧义，因此有效的实际上*是*有效的 NASM 语法。并链接了其他问答以获取详细信息）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-28T10:13:11.550

方括号本质上像解引用运算符一样工作（例如，像`*`在 C 中一样）。

所以，像

```
mov REG, x 
```

将 的值移动`x`到`REG`，而

```
mov REG, [x] 
```

将指向的内存位置的值移动`x`到`REG`. 请注意，如果`x`是标签，则其值为该标签的地址。

至于你的问题：

> 我是否正确理解 bl 将包含值 5，而 cl 将包含变量缓冲区的内存地址？

是的，你是对的。但请注意，由于`CL`它只有 8 位宽，它只会包含`buffer`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-28T10:21:20.203

确实，你的想法是对的。就是bl会包含5，cl会包含buffer的内存地址（其实label buffer本身就是内存地址）。

* * *

现在，让我解释一下您提到的操作之间的区别：

*   可以使用 . 将立即数移动到寄存器中。`mov reg,imm`可能令人困惑的是，诸如缓冲区之类的标签本身就是包含地址的立即数。

*   您不能真正将寄存器移动到立即数，因为立即数是常量，例如`2`或。`FF1Ah`您可以做的是将寄存器移动到常量指向的位置。您可以这样做`mov [const], reg`。

*   您还可以使用间接寻址，例如`mov reg2,[reg1]`提供的 reg1 指向有效位置，它会将 reg1 指向的值传输到 reg2。

* * *

因此，`mov cl, buffer`将缓冲区的**地址**移动到 cl（它可能会或可能不会给出正确的地址，因为 cl 只有一个字节长），而 `mov cl, [buffer]`将获得实际值。

## 概括

*   当你使用 [a] 时，你指的是 a 指向的地方的值。例如，如果 a 是`F5B1`，那么 [a] 指的是*RAM*中的地址 F5B1 。
*   标签是地址，即像`F5B1`.
*   存储在寄存器中的值不必引用为[reg]，因为寄存器没有地址。实际上，寄存器可以被认为是立即值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-28T10:27:53.810

你明白了。但是，有一些细节值得牢记：

1.  地址可以而且通常大于 8 位可以容纳的地址（`cl`8 位、`cx`16 位、`ecx`32 位、`rcx`64 位）。所以，`cl`很可能会不等于变量的地址`buffer`。它只有地址的最低有效 8 位。
2.  如果存在可以抢占上述代码和/或访问的中断例程或线程，则`buffer`in 的值`bl`可能与 5 不同。中断的中断例程在无法保存寄存器值时实际上可能会影响任何寄存器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-05T12:35:21.023

对于使用立即数作为操作数将值写入 ram 位置（或在其中计算）的所有指令，我们必须指定要访问的字节数。因为我们的汇编程序无法知道我们是否只想访问一个**字节**、一个**字**或一个**多字**，例如，如果立即值是一个较低的值，如下面的说明所示。

```
array db 0FFh, 0FFh, 0FFh, 0FFh
mov byte [array], 3 
```

结果：

```
array db 03h, 0FFh, 0FFh, 0FFh 
```

……

```
mov word [array], 3 
```

结果：

```
array db 03h, 00h, 0FFh, 0FFh 
```

……

```
mov dword [array], 3 
```

结果：

```
array db 03h, 00h, 00h, 00h 
```

短剑

# c# - 序列化数据的多态性

> ID：10362513
> 
> 赞同：0
> 
> 时间：2012-04-28T10:05:55.067
> 
> 标签：c#, serialization, polymorphism

我正在尝试将多态性与要序列化和反序列化的数据一起使用。但是，似乎多态属性在序列化时丢失了：

```
// Serialize
[System.Serializable]
public ParentClass()
{
  public string someString = "a string";
}
[System.Serializable]
public ChildClass() : ParentClass
{
  public int someInt;
  public ChildClass(int _someInt)
  {
    someInt = _someInt;
  }
}

List<ParentClass> list = new List<ParentClass>();
list.Add(new ChildClass(5));

// Data is serialized

// Data is deserialized

Debug.Log(list[0].someString);
// Output: a string; Works as intended

Debug.Log((list[0] as ChildClass).someInt));
// Null Reference Exception 
```

在这种情况下，如何正确序列化这些类？

# mkmapview - MKAnnotationView / Mokriya 示例 - 将图像动态加载到地图中

> ID：10362519
> 
> 赞同：1
> 
> 时间：2012-04-28T10:06:59.180
> 
> 标签：mkmapview, nsurl, mkannotation, mkannotationview, sdwebimage

我有一个问题，我需要知道如何传递我想从数据库中获取以显示在地图上的动态 URL。

我使用这个代码......来自 mokriya 和扩展名 SDWebImage 在这里解释，代码......

[http://blog.mokriya.com/post/15342072745/dynamic-annotations-mkannotationview-for-ios-mapkit](http://blog.mokriya.com/post/15342072745/dynamic-annotations-mkannotationview-for-ios-mapkit)

我遇到的问题是这不是动态的，因为总是使用

定义 IMAGE_URL_STRING

但我需要传递一个动态生成的 URL，而不是一个定义的 URL...

有人知道我怎么能用这个 mokriya 的代码来实现这一点

mokriya 的示例始终显示相同的图片...

或者我如何将 URL 传递给 Funktion

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:12:09.350

这可能会帮助您解决问题

```
NSMutableArray *infoArray;   // Load ImageURLS you fetch from database here 
```

例子：

```
for (int i = 0; i < 20; i++) 
{
    NSString *imageURLString;
    if (i%2==0) {
        imageURLString = @"http://www.mokriya.com/images/tree_people_150px.png";
    } else {
        imageURLString = @"http://www.mokriya.com/images/mokriyalogo_sm.png";
    }
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:imageURLString,@"image_url", nil];
    [infoArray addObject:dict];
    [dict release];
} 
```

在mapview的委托方法里面

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

使用此代码

```
 NSMutableDictionary *dict  = [self.infoArray objectAtIndex:anno.tag];
   NSURL *ImageURL = [NSURL URLWithString:[dict valueForKey:@"image_url"]];
   [pinView setImageWithURL:ImageURL placeholderImage:[UIImage imageNamed:@"loading.png"]]; 
```

我们还将更改推送到 [https://github.com/mokriya/customMKAnnotationView](https://github.com/mokriya/customMKAnnotationView)

# proxy - 阻止热点屏蔽？

> ID：10362520
> 
> 赞同：0
> 
> 时间：2012-04-28T10:06:59.603
> 
> 标签：proxy, vpn, iptables, squid

我负责监控我的大学网络，最近我注意到哪些学生正在使用称为“hotspotshield”的 VPN，它通过我的代理服务器并允许他们浏览和使用任何网站或端口，甚至是已经被阻止的端口，我只是想知道是否有任何选项可以使用 iptables、squid 或类似的东西来阻止这个hotspotshield？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:12:14.563

根据这个论坛讨论 - [http://forums.informaction.com/viewtopic.php?f=7&t=1531](http://forums.informaction.com/viewtopic.php?f=7&t=1531) - 看来您必须连接到 box.anchorfree.net 才能使hotspotshield 工作。它解决如下 -

box.anchorfree.net。78161 IN A 74.115.0.34 box.anchorfree.net。78161 IN A 74.115.0.35

因此，尝试阻止从您的网络访问这些 IP 地址怎么样？

iptables -I FORWARD -p tcp -d 74.115.0.34 -j DROP

或者也许使用 REJECT 而不是 DROP。

光盘：我还没来得及安装热点软件来测试这个。

# android - 如何在 Android 中以编程方式显示图像

> ID：10362521
> 
> 赞同：-2
> 
> 时间：2012-04-28T10:07:01.900
> 
> 标签：android

我想用文字显示图像。

```
t_s.setText("You will be shown a picture like this"+R.drawable.myimage); 
```

那是我的代码，但不起作用，它显示的不是图像，而是数字..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:00:38.320

您必须创建一个 TextView 和一个 ImageView 分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:18:48.727

```
t_s.setText("You will be shown a picture like this");
t_s.setImageResource(R.drawable.myimage); 
```

如果您需要设置背景以查看，请尝试这些代码

# android - 为结果启动 PendingIntent

> ID：10362525
> 
> 赞同：6
> 
> 时间：2012-04-28T10:07:21.917
> 
> 标签：android

我实施`Activity X`. 我`PendingIntent P`从一个`Service S`. 我肯定知道，P 指向**未知** `Activity Y`，它通过它的`setResult`方法返回结果 R。

我应该如何在 X 中启动 P，以便接收结果 R `X.onActivityResult`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-07T22:15:13.017

Google Play Services 使用`PendingIntent`对象来解决相同场景中的权限错误：

```
IntentSender intentSender = pendingIntent.getIntentSender();
activity.startIntentSenderForResult(intentSender, REQUEST_CODE, null, 0, 0, 0); 
```

有关文档，请参阅[Activity.startIntentSenderForResult()](http://developer.android.com/reference/android/app/Activity.html#startIntentSenderForResult(android.content.IntentSender,%20int,%20android.content.Intent,%20int,%20int,%20int,%20android.os.Bundle))。

# jquery - Ajax页面跳转后功能

> ID：10362526
> 
> 赞同：2
> 
> 时间：2012-04-28T10:07:46.003
> 
> 标签：jquery, ajax, layout

我有一个页面显示表格中的选定项目和未选择的项目。它们通过 documentready() 上的 ajax 调用加载到 div 中。

```
$('#tags').load('establishments_get_tags.php?id=<?php echo $_GET['id']; ?>'); 
```

这里没问题。此外，如果单击，我还编写了一些代码以从表中删除条目：

```
function DeleteTag(id,tag)
    {           
        $('#tags').load('establishments_get_tags.php?id='+id+"&action=d&tag="+tag);
    } 
```

（action=d 触发 PHP 中的事件，然后显示表格结果）

工作正常，但页面不断跳到我不想要的顶部。我希望它保持原样并重新加载 div。

任何帮助都会非常棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:12:43.310

通常是“返回错误；” “onClick”事件在这些情况下有效（如果我理解正确的话）。

# android - 从服务器 Android 检索数据

> ID：10362531
> 
> 赞同：1
> 
> 时间：2012-04-28T10:08:27.300
> 
> 标签：android, database

我需要制作一个基于android的应用程序。

我需要做的如下：

1）用户登录到应用程序（服务器）；2) 与已连接的用户一起显示聊天菜单；3）当用户连接服务器时检查他是否单身（不要介意这个if语句）；4) 如果用户是单身，他的昵称旁边会添加一个绿色图标；

我只需要知道做这件事的基本指导方针，我需要在服务器上安装一个数据库吗？如果需要，你能指导我找到一个关于这种事情的好教程吗？

任何帮助都对我有好处。

亲切的问候

波阿斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:15:34.493

是的，最简单的方法是使用跟踪登录用户状态的服务器。您的问题不是特定于 Android 的，您可以使用修改后的通用基于 Java 的解决方案以满足您的需求。[这是一个简单的示例/教程。](http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-client-server.html)

# java - 在 Java 中使用内部类 - 枚举

> ID：10362535
> 
> 赞同：14
> 
> 时间：2012-04-28T10:09:09.200
> 
> 标签：java, enums, inner-classes

我有一个与内部类有关的非常具体的问题。让我向您展示一些示例代码：

```
class Foo {
    MYOPTIONS temp;

    public static enum MYOPTIONS {
        OPTION1, OPTION2, OPTION3;
    } 
} 
```

所以这个枚举在 Foo 类中。现在我想做的是将 temp 变量设置为三个选项之一，但是在 Foo 类之外执行此操作，比如说从一个名为 External 的类中。不幸的是，我不能有一个 set 方法来做到这一点，因为`External.setTemp (MYOPTIONS.OPTION1)`它无效，因为枚举在外部类中不可见。所以我唯一能想到的就是在 Foo 类中有三个方法：

```
public void setTempOption1 () {this.temp=MYOPTIONS.OPTION1;}
public void setTempOption2 () {this.temp=MYOPTIONS.OPTION2;}
public void setTempOption3 () {this.temp=MYOPTIONS.OPTION3;} 
```

显然，另一种选择是更改枚举而不将其作为内部类。我还有其他选择吗？谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-28T10:19:20.663

```
class ContainsInnerEnum {
    MYOPTIONS temp;

    public enum MYOPTIONS {
        OPTION1, OPTION2, OPTION3;
    } 
}

class EnumTester {
    public void test () {
        ContainsInnerEnum ie = new ContainsInnerEnum ();
        // fail:
        // ie.temp = MYOPTIONS.OPTION1;
        // works:
        ie.temp = ContainsInnerEnum.MYOPTIONS.OPTION1;
    }       
} 
```

MYOPTIONS 的全名包含嵌入类名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T10:24:38.067

声明是有效的，但你必须以这种方式使用它：

```
Foo.MYOPTIONS var = Foo.MYOPTIONS.OPTION1 
```

当您使用“枚举”时，您缺少类的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:20:55.353

你可以这样做：

```
Foo f = ...;
f.temp = Foo.MYOPTIONS.OPTION1; 
```

虽然我也建议外部化`MYOPTIONS`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T10:21:51.467

`Foo`使用`MYPOTIONS`枚举时必须参考：

```
public class Uta {
    public static void main(String[] args) {
        Foo foo = new Foo();
        foo.temp = Foo.MYOPTIONS.OPTION1;
    }
} 
```

假设类`Foo`在包中`foo`（你应该总是[在包中组织类](http://www.jarticles.com/package/package_eng.html)），那么你也可以使用[静态导入](http://www.deitel.com/articles/java_tutorials/20060211/index.html)，让你的代码更干净一些：

```
package foo;

import static foo.Foo.MYOPTIONS.OPTION1;

public class Uta {
    public static void main(String[] args) {
        Foo foo = new Foo();
        foo.temp = OPTION1;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-28T11:15:59.187

在内部，每个枚举常量都返回枚举类型的对象；（即 Foo.MYOPTIONS.OPTION1 返回类型为 MYOPTIONS 的对象），因此我们不能进行自己的实例化（即 new Foo.MYOPTIONS()；不允许显式创建枚举对象，因为 num本身提供对象）

所以，如果我们想默认打印引用变量 .toString(); 方法将被调用。在枚举 toString(); 方法被覆盖并返回常量的名称。所以我们可以在一行中同时拥有 Object 和 enum 常量（即 Foo.MYOPTIONS.OPTION1）示例：

```
 class Foo {
        MYOPTIONS temp;

        public static enum MYOPTIONS {
            OPTION1, OPTION2, OPTION3;
        } 
    }

public class Main
{
    public static void main(String[] args) {
        Foo foo=new Foo();
        foo.temp = Foo.MYOPTIONS.OPTION1;
        System.out.println(foo.temp);
    }
} 
```

就是这样，如果你写这行来显式实例化枚举对象

(foo.temp = new Foo.MYOPTIONS();)

```
enter code here 
```

你会得到如下编译时错误：--

错误：枚举类型可能没有被实例化

# maven - 如何检查对 Maven 的最新依赖

> ID：10362540
> 
> 赞同：0
> 
> 时间：2012-04-28T10:10:30.497
> 
> 标签：maven, maven-2, maven-3

有什么方法可以检查依赖项是否是最新的？我想知道任何网站都可以提供这样的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:09:07.607

[您可以通过search.maven.org](http://search.maven.org)找到部署在 Maven Central 上的任何 maven 依赖项的最新版本

如果您正在寻找任何动态的方法，除了使用Sonatype 提供的[以太](http://www.sonatype.org/aether)库之外，我不知道任何方法，它可以让您找到部署在任何存储库中的特定库的最新版本。

Maven 确实允许在依赖项中指定版本范围，但这违背了可重现构建的理念。我在 Maven 用户列表中看到人们不鼓励这种做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:39:52.870

如果你试图找到你在 pom 中声明的依赖项的更新，[maven 版本插件](http://mojo.codehaus.org/versions-maven-plugin/)工作得很好：

```
mvn versions:display-dependency-updates
mvn versions:display-plugin-updates 
```

# javascript - Phonegap 中的 document.addEventListener()

> ID：10362543
> 
> 赞同：2
> 
> 时间：2012-04-28T10:10:41.853
> 
> 标签：javascript, android, cordova, onload, addeventlistener

我是phonegap开发的新手。

我从 Phonegap 教程开始，并使用 HTML5 和 jqueryMobile 开发了一些 UI。

现在我想使用 Phonegap 创建数据库，我也遇到了一些教程。

我看到一个`document.addEventListener()`用 3 个参数`onDeviceReady()`调用函数的方法。

在某些教程中`document.addEventListener()`，在方法中调用`onLoad()`了它，而在某些教程中，它就在 onLoad() 之外。

现在我的问题是什么时候被调用......以及在......内部或外部`document.addEventListener()`调用这个menthod的更好方法是什么？`onLoad()``onLoad()`

document.addEventListener() 的第三个参数也是假的，那个参数是做什么的？

提前致谢...

# android - Android 开发人员：如何找到接收者的所有可用意图过滤器操作的列表？

> ID：10362548
> 
> 赞同：3
> 
> 时间：2012-04-28T10:11:59.263
> 
> 标签：android, action, broadcastreceiver, intentfilter

我想知道如何从清单文件中找到特定的“操作”来制作自己的“BroadcastReceivers”。

我可以为我的 BroadcastReceiver 在“intent-filter”上添加一个操作列表吗？

例如：

```
 <receiver android:name=".Receiver_01_OnSettingChange">
    <intent-filter>
        <action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        <action android:name="android.bluetooth.adapter.action.STATE_CHANGED" />
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <action android:name="android.location.PROVIDERS_CHANGED" />
    </intent-filter>
   </receiver> 
```

在哪里可以找到与其他设置状态相关的其他操作列表？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:20:51.097

PackageExplorer 列出了您设备中应用程序中定义的所有意图过滤器。可以从此链接获得更多信息

[Android - 如何获取所有可用意图过滤器的列表？](https://stackoverflow.com/questions/4094109/android-how-to-i-get-a-list-of-all-available-intent-filters)

使用 java 方法，您可以将 androidmanifest xml 读取为二进制格式。然后您可以写入文本文件。下面的链接讨论了这一点。

[如何解析 .apk 包中的 AndroidManifest.xml 文件](https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package)

希望这会帮助你。

# objective-c - 将浮点数舍入到第一个非零值

> ID：10362559
> 
> 赞同：0
> 
> 时间：2012-04-28T10:12:58.650
> 
> 标签：objective-c, ios, xcode, floating-point

伙计们，我有一些非常小的浮点数，我想将它四舍五入到第一个不是零值。例如：

```
float toRound = 0.000002125231553;
toRound = //Operations//;

toRound == 0.000002; 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:00:09.533

也许不是最好的方法。但它做你想要的;）

```
float s = 0.000322333123;
BOOL exit = 0;
NSString *x = [NSString stringWithFormat:@"%f", s];
for (int i = 0; i <= [x length]; i++) {
NSString *t = [x substringToIndex:i];

if ([t floatValue] == 0 || exit == 1) {
    ;;
}
else {
    exit = 1;
    s = [t floatValue];       
}
}

NSLog(@"round: %f", s); 
```

对数：圆形：0.0003

# ios - 获取使用 IOS 上传到 FB 的图像的 ID（或只是 URL）

> ID：10362564
> 
> 赞同：0
> 
> 时间：2012-04-28T10:13:58.273
> 
> 标签：ios, image, url, facebook-graph-api, uploading

我已经成功地能够使用 FB IOS SDK 将图像上传到 facebook，我只是想知道，是否有返回的 ID 或 url？或者我如何使用 FBRequest 来查找其中任何一个？

谢谢皮维特

# php - Mysql 我不断获得总工作作为回报

> ID：10362565
> 
> 赞同：2
> 
> 时间：2012-04-28T10:13:58.683
> 
> 标签：php, mysql, mysql5

我有 sql 查询，我想在其中获取总记录。

我有一个雇主和这个雇主的 600 个工作。

我需要获取所有雇主，但由于某种原因，我的查询返回了雇主发布的总职位。

请让我知道我在此查询中出了什么问题。

```
SELECT count(c.id) as total 
FROM employer as c INNER JOIN  job as j ON j.employerIDFK = c.id 
WHERE c.isActive=1 AND c.status=1 
AND j.isActive=1 
AND j.beenActive=1 
AND j.status=1 
AND DATE_ADD( j.createdAt, INTERVAL 30 DAY ) > NOW() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:59:48.553

您的查询应该返回所有雇主的所有工作的计数，但有一些标准必须匹配才能显示。正如您所使用的，隐式连接是 INNER JOIN。这要求所有条件都匹配才能包含行。这意味着它只返回“isActive”、“beenActive”、“status=1”和 createdAt 是过去 30 天以内的工作，其中雇主为“isActive”和“status=1”。检查您的数据，看看这是否是您想要的。

```
SELECT c.id AS employerID, count(*) as total 
FROM employer as c, job as j 
WHERE c.isActive=1 AND c.status=1 
AND j.employerIDFK = c.id 
AND j.isActive=1 
AND j.beenActive=1 
AND j.status=1 
AND DATE_ADD( j.createdAt, INTERVAL 30 DAY ) > NOW()
GROUP BY c.id 
```

至于其他人试图对 createdAt 上的过滤器说什么，MySQL 将首先评估 NOW()（仅一次）。然后它将每个 createdAt 日期添加 30 天，以查看它是否大于 NOW()。MySQL 有时会自动优化这一点，这取决于您的版本和其他一些因素，但一般来说，针对每行的 createdAt 日期执行一个函数以将其与常量表达式进行比较是不好的，因为 MySQL 无法在createdAt 列。

所以，你应该转换：

```
AND DATE_ADD( j.createdAt, INTERVAL 30 DAY ) > NOW() 
```

对此：

```
AND j.createdAt > DATE_ADD( NOW(), INTERVAL -30 DAY ) 
```

这将 j.createdAt 列保留为普通列，因此 MySQL 现在可以利用该列的任何索引来查找过去不到 30 天的日期。

这相当于站在一个有 100 人的房间里，要求他们将生日加 30 天，然后问谁计算的日期比今天大。你刚刚让 100 人工作。相反，通过从今天的日期减去 30 天来预先计算标准，并简单地询问是否有人的生日大于该日期。你只需要做一次计算，就可以让这 100 个人免于繁重的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:30:41.000

```
SELECT  COUNT(DISTINCT c.id) AS total 
FROM    employer c
JOIN    job j
ON      j.employerIDFK = c.id
WHERE   c.isActive = 1
        AND c.status = 1
        AND j.isActive = 1 
        AND j.beenActive = 1 
        AND j.status = 1 
        AND j.createdAt >= NOW() - INTERVAL 30 DAY 
```

创建以下索引：

```
employer (isActive, status)
job (employerFKID)
job (isActive, beenActive, status, createdAt, employerFKID) 
```

以便查询更快地工作。

如果由于某些晦涩的原因你不愿意使用`DISTINCT`，你可以使用这个：

```
SELECT  COUNT(c.id) AS total
FROM    employer c
WHERE   c.isActive = 1
        AND c.status = 1
        AND c.id IN
        (
        SELECT  employerIDFK
        FROM    job j
        WHERE   j.isActive = 1
                AND j.beenActive = 1
                AND j.status = 1
                AND j.createdAt >= NOW() - INTERVAL 30 DAY
        ) 
```

，但是，这可能效率较低，因为`MySQL`无法`job`在此类查询中领先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:20:02.930

我怀疑“SELECT count(*) as total”是你的问题。您要求 SQL 计算返回的所有内容。注意你正在“选择”的东西，因为这是唯一会返回给你的东西。

您没有完全解释您要在这里实现的目标。“我需要找到所有的雇主”是含糊不清的，很难理解。您想获取有关雇主的哪些数据？他们的身份证？他们的总工作量？

# c# - 如何在 Windows 8 Metro 中以编程方式响应 Snap

> ID：10362566
> 
> 赞同：11
> 
> 时间：2012-04-28T10:14:12.347
> 
> 标签：c#, windows-8, winrt-xaml

有没有办法在 Metro 应用程序中响应 C# 中的 Snap？当其中一页被捕捉时，我需要显示另一页。我的想法是通过导航到另一个页面来响应快照。

我发现

```
var currentView = ApplicationLayout.GetForCurrentView();
currentView.LayoutChanged += new TypedEventHandler<ApplicationLayout, ApplicationLayoutChangedEventArgs>(currentView_LayoutChanged); 
```

但它看起来不再适用于消费者预览版。还有其他方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T11:50:50.490

在 Release Preview 中，您需要再次对不同的事件做出反应 :) 现在是 SizeChanged，而不是 ViewStateChanged。

以前，您的应用会执行以下操作来处理视图状态更改：

```
using Windows.UI.ViewManagement;

// Register for the viewstatechanged event
ApplicationView.GetForCurrentView().ViewStateChanged += ViewStateChanged;    

private void ViewStateChanged(ApplicationView sender, ApplicationViewStateChangedEventArgs e)
{
     // Obtain view state from event payload
     ApplicationViewState myViewState = e.ViewState; 
} 
```

现在应用程序应该这样做：

```
using Windows.UI.ViewManagement;

// Register for the window resize event
Window.Current.SizeChanged += WindowSizeChanged;     

private void WindowSizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    // Obtain view state by explicitly querying for it
    ApplicationViewState myViewState = ApplicationView.Value;
} 
```

[更多信息在这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/d573295e-926f-4a03-a158-19d4b53521f8)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T22:05:49.420

Jowen 有答案，我只是在此处向 WindowSizeChanged 代码添加更多内容：

```
 ApplicationViewState viewState = ApplicationView.Value;
    if (viewState == ApplicationViewState.Filled)
    {
        System.Diagnostics.Debug.WriteLine("viewState is Filled");
    }
    else if (viewState == ApplicationViewState.FullScreenLandscape)
    {
        System.Diagnostics.Debug.WriteLine("viewState is FullScreenLandscape");
    }
    else if (viewState == ApplicationViewState.Snapped)
    {
        System.Diagnostics.Debug.WriteLine("viewState is Snapped");
    }
    else if (viewState == ApplicationViewState.FullScreenPortrait)
    {
        System.Diagnostics.Debug.WriteLine("viewState is FullScreenPortrait");
    }
    else
    {
        System.Diagnostics.Debug.WriteLine("viewState is something unexpected");
    } 
```

我发现有点令人惊讶的是，当我将此占位符代码复制到另一个页面时，它为代码提供了一个有界矩形，并且由于我没有“使用 Windows.UI.ViewManagement;” 然而，当我将鼠标悬停在无法识别的代码上时，它会询问“导入粘贴代码的文件？” 我猜它（我不知道“它”是 VS 还是 Resharper）正在跟踪已粘贴的代码，因为它可能会用倾斜或叉腰的眉毛来查看。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-28T15:58:00.000

在 Consumer Preview 中，您需要对不同的事件做出反应。现在是 ViewStateChanged，而不是 LayoutChanged。

# android - 获取后台服务实例

> ID：10362569
> 
> 赞同：6
> 
> 时间：2012-04-28T10:14:37.420
> 
> 标签：android, service, background, instance

所以我有一个后台服务正在运行。现在，如果用户退出活动，服务仍将运行，对吧？现在当用户重新启动应用程序时，我想访问后台服务并调用一些方法。如何访问后台服务的实例？

多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T11:59:20.607

这对我来说是开箱即用的！但是，如果您有其他选择，请不要使用它，因为公共静态成员不好，除非它们是最终的。您可以在服务中创建具有公共范围的静态变量。

```
public static BackgroundService bs;
@Override
public void onCreate(){
    bs=this;} 
```

然后使用“this”初始化变量，使其成为对当前运行服务的引用。随时将其用作您活动中的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:27:57.320

退出活动后服务是否继续运行取决于您如何启动它。（在文档 startService()/bindService() 中阅读有关此内容）如果您的服务仍在运行，则对 startService()/bindService() 的调用会将您连接到“旧”服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:24:32.167

如果你想和后台服务通信。你不能使用活页夹机制，关于这个你可以访问这个网站：[android develop](http://developer.android.com/guide/topics/fundamentals/bound-services.html.)

有一个例子告诉如何使用后台服务

多谢

# c - fcntl：打开和关闭磁盘缓冲

> ID：10362573
> 
> 赞同：4
> 
> 时间：2012-04-28T10:14:59.237
> 
> 标签：c, linux, unix

我编写了一个简短的 C 程序来打开和关闭 unix 文件缓冲。下面的代码是打开它。我使用 fcntl 获取设置，设置 O_SYNC 标志，然后将设置写回内核。但是当我再次获得设置时，它们的 O_SYNC 标志没有设置。

```
int result, s;
s = fcntl(*fd, F_GETFL);
s |= O_SYNC; // set SYNC bit
result = fcntl(*fd, F_SETFL, s);

if( result == -1 )
   perror("setting SYNC");
else
{
    // Check buffering is on
    s = fcntl(*fd, F_GETFL); //
    if((s & O_SYNC) == O_SYNC) // check if SYNC bit is set
        printf("In function buffering_off(): Buffering is OFF\n");
    else
        printf("In function buffering_off(): Buffering is ON\n");
} 
```

任何帮助，将不胜感激。干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:26:16.940

我在 Linux 内核列表中找到了这个讨论：[http ://choon.net/forum/read.php?21,22539](http://choon.net/forum/read.php?21,22539)

简而言之：

> 问题是这`fcntl(fd, F_SETFL, flags|O_SYNC)`似乎有效，但默默地忽略了`O_SYNC`标志。打开文件`O_SYNC`可以正常工作，但稍后通过设置它`fcntl`不起作用。

听起来这个错误从第一天开始就存在，但最近可能已经修复（就运输内核而言，我不确定当前状态）。

> 我正在使用 SuSE Linux，这个版本大约有 6 年的历史。

讨论是从大约一年前开始的。考虑到内核的年龄，它肯定会受到错误的影响。

# javafx-2 - JavaFX2 不能在 OS X 上运行

> ID：10362575
> 
> 赞同：1
> 
> 时间：2012-04-28T10:15:24.577
> 
> 标签：javafx-2

我刚刚在我的 iMac (Lion) 上安装了来自 Oracle 的 Java 7 和 JavaFX 2.1。

我之前安装了以前的开发人员版本。如果我正在运行 JavaFX2，编译运行顺利，但在启动应用程序后不久，应用程序就会冻结。我可以在 Dock 和任务管理器中看到图标，但我无法选择应用程序，它似乎只加载了一半。

在我之前没有任何 JavaFX 安装的 MBA 中，一切运行顺利。

我非常感谢任何提示和建议，以便成为在 iMac 上运行的 JavaFX2。

提前致谢，

雷托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:56:56.603

Java 7 和 Java FX 2 的发布在 Mac 端稍有延迟。Java 7 不是面向最终用户的正式版本，这包括 Mac 用户。

Mac 用户现在可以从 Oracle 的下载页面[下载最新的 JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u4-downloads-1591156.html)（包括 JavaFX 2）！

# html - 如何制作覆盖页眉但同时不覆盖页脚的 100% 高度的侧边栏

> ID：10362580
> 
> 赞同：0
> 
> 时间：2012-04-28T10:16:21.867
> 
> 标签：html, css, drupal, layout, drupal-theming

我正在编辑 Drupal 主题，我试图弄清楚如何制作侧边栏，它会根据内容、覆盖页眉但同时不会覆盖页脚。有点难以解释，所以我画了一张图片-> [http://i48.tinypic.com/hs2r9t.png](http://i48.tinypic.com/hs2r9t.png)

我已经使绿色区域 - 内容灵活，所以当我向其中添加文章时，它会拉伸并将页脚移动得更深。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:15:19.810

从未使用过 Drupal，但在 HTML+CSS 中，以下内容对您有用：

```
#sidebar { 
    float: left; /* push it to the left */
}
#header { 
    overflow: hidden; /* new block formatting context */
}
#content { 
    overflow: hidden; 
}
#footer { 
    clear: left; /* clear the float */
}​ 
```

[jsFiddle 演示](http://jsfiddle.net/ju2S3/)

如果您打算使用布局，则必须学习 HTML 和 CSS。

# jakarta-ee - Tomcat 7 和 Java EE 6.0 javax.annotation.sql 包

> ID：10362583
> 
> 赞同：2
> 
> 时间：2012-04-28T10:16:29.663
> 
> 标签：jakarta-ee, tomcat

我正在尝试使用新的 Java EE 6.0 注释在 Java Servlet 中定义数据源。例如：@DataSourceDefinition 注释。但似乎 Tomcat 7.0.x 不支持它，因为我无法针对其库编译代码。

我已经搜索了 Apache Tomcat 网站以找到有关这一点的任何信息，但没有运气。

所以我的问题是：

*   你确认我 Tomcat 7.0.x 不支持 javax.annotation.sql 包吗？
*   知道它是否会支持它吗？
*   在官方支持出现时，在 Tomcat 中获得此类支持的任何解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:10:01.670

Tomcat 只实现了 Servlet 和 JSP。`@DataSourceDefinition`是常见的注释（JSR 250），Tomcat 选择不支持。

你可能想试试[TomEE](http://openejb.apache.org/apache-tomee.html) insead。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T09:14:49.927

This is a [bug in Tomcat](https://issues.apache.org/bugzilla/show_bug.cgi?id=55534), Tomcat's `lib/annotations-api.jar` was not updated for changes in Commons annotations.

Update Tomcat 7 or 8 to the latest version to see the `@DataSourceDefinition` annotation.

EDIT

As Arjan Tijms points out, the annotation is included in Tomcat, but probably not supported. Tomcat probably won't create a datasource if you use it.

# vb.net - 关于“请确保已安装项目 (.wip) 的应用程序”的问题

> ID：10362587
> 
> 赞同：1
> 
> 时间：2012-04-28T10:17:14.277
> 
> 标签：vb.net, visual-studio-2010, visual-studio, vb6

多年前我有一个用 Visual Basic 开发的非常古老的插件软件，现在是时候修改版权信息了。在这一点上，问题是我不是作者，所以我对此一无所知。

我已经更新了包含 SLN、VBP、WIP、MSI 等的源文件，然后我尝试使用 VS2008 打开 SLN 文件，转换后它给了我一条消息“XXX.wip 的项目未安装，请确保已安装项目 (.wip) 的应用程序”，显然这不是正确的版本。

大家能说说哪个VS版本可以继续吗？或者知道我是怎么做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:52:02.187

这听起来像是使用过时的[Visual Studio 安装程序](http://www.devx.com/vb2themax/Article/19893)构建的设置，它是 Visual Studio 的一个插件应用程序，用于创建（非常简单的）MSI 包。

由于它似乎不再可用，替代方案是将[Inno Setup](http://www.jrsoftware.org/isinfo.php)、[WiX](http://wix.sourceforge.net/)或 ClickOnce 集成到新版本的 Visual Studio 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:57:50.520

您需要 VB6 才能处理 VB6 程序。Visual Studio 6.0 (98) 包含所需的工具。

# bash - 使用键 -> 值结构合并两个文件

> ID：10362590
> 
> 赞同：0
> 
> 时间：2012-04-28T10:17:40.177
> 
> 标签：bash, shell, sed, awk, grep

我正在寻找想法，而不是 shell(linux) 中下一个问题的完整解决方案。什么是最好的解决方案？（awk，while循环，sed ....）

我有两个具有相同行结构的文件：`key-value-value`. 我想合并这两个文件。如果该值不存在，则脚本插入一个新行。如果存在，则脚本会更新值（通过将它们相加）。

```
Example:
File 1:

john-15-40
doo-10-91
mary-14-19
foo-11-0

File 2:

foo-110-10
john-22-11
ghost-1000-1000

Result:
foo-121-10
john-37-51
ghost-1000-1000
doo-10-91
mary-14-19 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:29:02.313

Simple with awk

```
awk '
  BEGIN {FS = OFS = "-"}
  {v1[$1] += $2; v2[$1] += $3}
  END {for (key in v1) {print key, v1[key], v2[key]}}
' F1 F2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:55:41.813

这可以在 Bash 4 中本地完成：

```
#!/bin/bash
declare -A vals_one vals_two
while IFS=- read key val1 val2; do
  if [[ ${vals_one["$key"]} ]] ; then
    vals_one["$key"]=$(( ${vals_one["$key"]} + val1 ))
    vals_two["$key"]=$(( ${vals_two["$key"]} + val2 ))
  else
    vals_one["$key"]=$val1
    vals_two["$key"]=$val2
  fi
done < <(cat input1.txt input2.txt)
for key in "${!vals_one[@]}"; do
  printf '%s-%s-%s\n' "$key" "${vals_one[$key]}" "${vals_two[$key]}"
done 
```

请注意，这种方法有点内存效率低下；一种更节省内存的方法会在合并文件之前对文件进行排序（如果它排序的内容无法放入内存中，GNU sort 能够生成临时文件，因此比我们编写的任何合理脚本都更有能力），因此只需要在内存中一次存储两行：

```
#!/bin/bash

function merge_inputs {
    IFS=- read key val1 val2
    while IFS=- read new_key new_val1 new_val2; do
      if [[ $key = "$new_key" ]] ; then
        val1=$(( val1 + new_val1 ))
        val2=$(( val2 + new_val2 ))
      else
        printf '%s-%s-%s\n' "$key" "$val1" "$val2"
        key=$new_key
        val1=$new_val1
        val2=$new_val2
      fi
    done
    printf '%s-%s-%s\n' "$key" "$val1" "$val2"
}
sort input1.txt input2.txt | merge_inputs 
```

此外，后一种形式不需要关联数组，并且可以与旧版本的 bash 一起使用（或者，经过一些调整，可以使用其他 shell）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:26:43.790

您需要一种带有辅助数组的语言。对于任何脚本语言，您的任务都非常简单，但 perl 和 awk 特别适合逐行处理文本文件。

伪代码：

```
read line from file1, file2
split line to key and values
if there are no key in hash
     add key and values
else
     add values and print key/values 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T10:40:22.213

我知道您没有在 PHP 中要求它，但它可能会有所帮助。如果您愿意，可能在另一种语言中有类似的东西：

```
<?PHP

$file_handle = fopen("file1", "r");

while (!feof($file_handle) ) {
$line_of_text = fgets($file_handle);
list($name,$value1,$value2) = explode('-', $line_of_text);
$file1[$name]=array($value1,$value2);
}
fclose($file_handle);
// repeate for file2
//then use the 2 arrays, $file1[] and $file2[] to rewrite the file as 'file3' or whatever. 
//Checking for duplicates and doing the math.
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T11:58:40.550

我喜欢格伦的`short fat`解决方案。并且有一个`tall thin`解决方案。

如果您有两个文件：`1.txt`和`2.txt`.

```
sort {1,2}.txt |
awk -F- -vOFS=- '
NR==1{
    x=$1
}
x==$1{
    y+=$2
    z+=$3
    next
}
{
    print x,y,z;
    x=$1
    y=$2
    z=$3
}
END{
    print
}' 
```

# java - javax.xml.transform.Transformer 转换后交换元素属性

> ID：10362593
> 
> 赞同：0
> 
> 时间：2012-04-28T10:18:12.263
> 
> 标签：java, xml, xslt

我正在尝试打开 XML 文件，添加一些更改，然后保存到其他 XML 文件结果。我正在使用标准 javax.xml.parsers.* 和 javax.xml.transform* 类。

但是在保存的文档中，某些元素中的属性会被交换，例如：

曾是：

```
<affiliation xml:id="curr1" countryCode="HU"> 
```

改造后：

```
<affiliation countryCode="HU" xml:id="curr1"> 
```

元素“countryCode”和“xml:id”被交换。

有什么方法可以限制此类属性交换？

打开/保存 XML 的代码：

```
// Imports
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;    

// Opening
Document document = getDocumentBuilder().parse(src);

// Saving
getTransformer().transform(new DOMSource(document), new StreamResult(dst));

private DocumentBuilder getDocumentBuilder() throws ParserConfigurationException {
    return documentBuilder == null ? documentBuilder = documentBuilderFactory.newDocumentBuilder() : documentBuilder;
}

private Transformer getTransformer() throws TransformerConfigurationException {
    return transformer == null ? transformer = transformerFactory.newTransformer() : transformer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:07:13.230

不，XML 中的属性顺序并不重要，XSLT 明确允许系统以任何顺序报告属性，并且无法控制属性序列化的顺序。

# ios - 无法滚动滚动视图

> ID：10362595
> 
> 赞同：0
> 
> 时间：2012-04-28T10:19:02.993
> 
> 标签：ios, keyboard, scrollview, hidden

使用 xcode 4.3.2

我是新手，所以请保持任何答案简单。我试图遵循示例，但没有任何效果。我有一个带有文本字段的页面。底部的被键盘隐藏。我想要的只是能够向上滚动，以便我可以填写那些隐藏的字段。我附上了我的 .m 文件。

```
#import "Engine Editor.h"

@interface Engine_Editor 

@end

@implementation Engine_Editor
@synthesize Enginescroll;
@synthesize MainEngineField;
@synthesize MainSerialField;
@synthesize MainServiceField;
@synthesize AuxEngineField;
@synthesize AuxSerialField;
@synthesize AuxServiceField;
@synthesize BLANK;
@synthesize ReturnEngine;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

 - (void)viewDidLoad
  {
 self.MainEngineField.text=((ViewController *)self.presentingViewController).MainEngineLabel.text;
 self.MainSerialField.text=((ViewController *)self.presentingViewController).MainSerialLabel.text;
 self.MainServiceField.text=((ViewController *)self.presentingViewController).MainServiceLabel.text;
 self.AuxEngineField.text=((ViewController *)self.presentingViewController).AuxEngineLabel.text;
 self.AuxSerialField.text=((ViewController *)self.presentingViewController).AuxSerialLabel.text; 
 self.AuxServiceField.text=((ViewController *)self.presentingViewController).AuxServiceLabel.text;

[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
[self setEnginescroll:nil];
[self setMainEngineField:nil];
[self setMainSerialField:nil];
[self setMainServiceField:nil];
[self setAuxEngineField:nil];
[self setAuxSerialField:nil];
[self setAuxServiceField:nil];
[self setReturnEngine:nil];
[self setBLANK:nil];

[Enginescroll setScrollEnabled:YES];
[Enginescroll setShowsVerticalScrollIndicator:YES];
[Enginescroll setFrame:CGRectMake(0, 55, 320, 320)];
[Enginescroll setContentSize:CGSizeMake(320, 600)];

[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)DismissEditor:(id)sender {

((ViewController *)self.presentingViewController).MainEngineLabel.text=self.MainEngineField.text;
[self dismissViewControllerAnimated:YES completion:Nil];
((ViewController *)self.presentingViewController).MainSerialLabel.text=self.MainSerialField.text;
[self dismissViewControllerAnimated:YES completion:Nil];
((ViewController *)self.presentingViewController).MainServiceLabel.text=self.MainServiceField.text;
[self dismissViewControllerAnimated:YES completion:Nil];
((ViewController *)self.presentingViewController).AuxEngineLabel.text=self.AuxEngineField.text;
[self dismissViewControllerAnimated:YES completion:Nil];
((ViewController *)self.presentingViewController).AuxSerialLabel.text=self.AuxSerialField.text;
[self dismissViewControllerAnimated:YES completion:Nil];
((ViewController *)self.presentingViewController).AuxServiceLabel.text=self.AuxServiceField.text;
[self dismissViewControllerAnimated:YES completion:Nil];

}

- (IBAction)HideKeyBoard:(id)sender {
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:37:17.673

您可以注册`UIKeyboardDidShowNotification`并设置滚动视图`contentInset`，以便底部插图等于键盘框架的高度（请参阅`UIKeyboardFrameEndUserInfoKey`通知的键`userInfo`）。同样，当您收到时，`UIKeyboardWillHideNotification`只需将其重置`contentInset`为`UIEdgeInsetsZero`.

# android - 将数据从服务发送到活动？

> ID：10362597
> 
> 赞同：3
> 
> 时间：2012-04-28T10:19:11.803
> 
> 标签：android, service, android-activity

我想调度后台服务来运行扫描方法。因此该服务将更新扫描文件的数量。我该如何处理关闭应用程序调度程序运行服务的情况，更新 ui 方法将崩溃并停止运行服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:52:09.947

根据我的情况

我更改了结构以让服务发送广播并在活动中接收它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:22:55.540

请参阅此[链接](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)。它是一个很好的例子`Service`。它说明了双向通信。

# winforms - 当内部托管 WinForms 控件的 MFC 对话框被停用并再次激活时，没有响应

> ID：10362598
> 
> 赞同：1
> 
> 时间：2012-04-28T10:19:20.257
> 
> 标签：winforms, mfc, message-pump

我指的是 msdn 文章“在 MFC 对话框中托管 Windows 窗体用户控件”[链接]（[http://msdn.microsoft.com/en-us/library/94t3ebxz.aspx](http://msdn.microsoft.com/en-us/library/94t3ebxz.aspx)），以重用 Windows 窗体用户MFC 旧应用程序中的控件。使用花哨的 DDX_ManagedControl 实用程序，我可以看到控件（MyPanel 类）嵌入到对话框中，甚至可以 100% 浏览选项卡。

然后我继续使托管对话框成为另一个模式对话框的子对话框，然后当我的 WinForms 面板上的一个文本框获得键盘焦点并且我切换到另一个应用程序窗口（不同的进程）以停用当前对话框时，问题就出现了，接下来当我再次激活 MFC 对话框时，它不再响应。

澄清问题的一些代码：//在我的 MFC 子对话框中 CWinFormsControl m_ctrl1;

```
void CMyWinFormControlTab::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_ManagedControl(pDX, IDC_MYPANEL_STATIC, m_ctrl1);
}

//in my out-most modal dialog
BOOL CMFCAppTestDlg::OnInitDialog()
{
    CDialog::OnInitDialog();

    CDialog *pNewTab = new CMyWinFormControlTab();
    pNewTab->Create(IDD_MYWINFORMTAB, this);
    pNewTab->ShowWindow(SW_SHOW);
} 
```

一些观察：

1.  在上述情况下，如果我使用 Spy++ 监视当前进程中的所有 WM_ACTIVATEXXX 消息，我发现当有问题的停用和重新激活发生时，没有捕获到 WM_ACTIVATE 或 WM_ACTIVATEAPP 消息，也没有任何其他消息，即消息泵已死。
2.  相比之下，对于仅具有 MFC 控件的普通 MFC 子对话框，当在一个文本框获得焦点后发生停用和重新激活时，它仍在响应并且我可以看到所有 WM_ACTIVATEXXX 消息。
3.  如果我直接将我的 WinForms 控件托管到模态 MFC 对话框中，问题就消失了。但是，我需要一个临时无模式对话框，因为在我的情况下，我使用 TreeView，其中每个树节点将加载不同的无模式对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:41:17.817

今天，我设法通过在模态对话框中添加一个 ON_WM_ACTIVATE 宏和一个具有正确签名的空白消息处理程序来克服这个问题。供参考

```
//in header
afx_msg void OnActivate(UINT nState, CWnd* pWndOther, BOOL bMinimized);

//in implementation cpp
BEGIN_MESSAGE_MAP(CMyDialog, CDialog)
    //{{AFX_MSG_MAP(CMyDialog)
    ON_WM_ACTIVATE()
    //}}AFX_MSG_MAP
END_MESSAGE_MAP()

void CMyDialog::OnActivate(UINT nState, CWnd* pWndOther, BOOL bMinimized)
{
    //you can leave it blank
} 
```

# magento - dbModel 读取资源未在 Magento 1.3.2.4 版中实现 Zend_Db_Adapter_Abstract

> ID：10362601
> 
> 赞同：3
> 
> 时间：2012-04-28T10:19:26.240
> 
> 标签：magento, magento-1.3

我为我的 Magento 项目创建了一个自定义模块。该模块适用于 Magento 1.6.X 。但是当我在 Magento 版本 1.3.2.4 中安装这个扩展时。Magento 抛出以下错误。

```
dbModel read resource does not implement Zend_Db_Adapter_Abstract 
```

很多论坛都讨论过这个问题。但不幸的是。我没有得到任何结果。

我清除了缓存，重新索引。我还应该做些什么来解决这个问题。

**Var**文件夹权限已设置**777**。即使我尝试了新的 Magento 安装，但同样的错误。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T14:17:31.113

就我而言，只需帮助清除 MAGENTO_ROOT/var/cache/ 目录下的文件/目录即可解决问题。

[dbModel 读取资源没有实现 Zend_Db_Adapter_Abstract](http://www.magentocommerce.com/boards/viewthread/43091/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T21:10:39.997

对于该版本的 Magento (1.3.2.4)，您需要在 config.xml 文件中指定读写连接。

在 下`<global>`，添加一个`<resources>`节点，如下所示：

```
<resources>
    <yourModelNode_write>
        <connection>
            <use>core_write</use>
        </connection>
    </yourModelNode_write>
    <yourModelNode_read>
        <connection>
            <use>core_write</use>
        </connection>
    </yourModelNode_read>
</resources> 
```

确保刷新缓存！

这种类型的配置在以后的 Magento 版本中是可选的；如果您未在配置中指定它们，系统将加载默认的读/写连接。我不确定这个特性是什么时候实现的，但它存在于 1.6.x 中。

1.3.2.4 和 1.6.x 的区别在于 Mage_Core_Model_Resource::getConnection()。

如果您的 config.xml 中没有指定，1.6.x 将返回默认的读/写连接：

Mage_Core_Model_Resource::getConnection()

```
$connConfig = Mage::getConfig()->getResourceConnectionConfig($name);

if (!$connConfig) {
    $this->_connections[$name] = $this->_getDefaultConnection($name);
    return $this->_connections[$name];
} 
```

1.3.2.4 将返回 false：

```
$connConfig = Mage::getConfig()->getResourceConnectionConfig($name);

if (!$connConfig || !$connConfig->is('active', 1)) {
    return false;
} 
```

您收到“未实现 Zend_Db_Adapter_Abstract”错误的原因位于 Varien_Data_Collection_Db::setConnection() 中：

```
public function setConnection($conn)
{
    if (!$conn instanceof Zend_Db_Adapter_Abstract) {
        throw new Zend_Exception('dbModel read resource does not implement Zend_Db_Adapter_Abstract');
    }

    $this->_conn = $conn;
    $this->_select = $this->_conn->select();
} 
```

当`false`作为连接 ($conn) 传入时，它会抛出这个错误，因为——当然——`false`不是 Zend_Db_Adapter_Abstract 的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T10:54:30.850

无论 dbModel 是什么类，它都需要实现 Zend_Db_Adapter_Abstract。这就是所谓的接口。如果您想了解更多接口是什么，我会在这里查看它与 PHP 的关系（http://php.net/manual/en/language.oop5.interfaces.php）

所以基本上无论 dbModel 是什么，你都需要确保它的类定义在类名之后包含“implements Zend_Db_Adapter_Abstract”。

在不知道你试图用你的模块完成什么的情况下，我只能告诉你（基本上解释错误）。我怀疑 dbModel 是 Magento 的核心对象，如果是这种情况，我相信您会陷入两个 Magento 版本之间的不兼容问题。

但是，如果 dbModel 是您的类之一，则将实现添加到您的类定义中应该可以清除错误。

# javascript - Node.js 写入数组而不阻塞

> ID：10362606
> 
> 赞同：0
> 
> 时间：2012-04-28T10:20:07.083
> 
> 标签：javascript, node.js, asynchronous, nonblocking

我是 Node 新手，希望能提供一些关于写入数组的建议。我有高频实时数据进来，每个滴答都会被写入一个数组。

**以异步方式执行此操作是否有益？如果是这样，如何做到这一点？**

这是我的代码的精简片段。当收到新的报价时调用“过滤器”函数。“storeWindowData”函数然后保存到数组中。我想这可能会在高负载下阻塞？

感谢任何评论。

问候，本。

```
var window_data = [];
module.exports = {

filter: function (data) {

    this.storeWindowData(timestamp, ticker, content);

    }
},

storeWindowData: function(timestamp, ticker, content){
    // Check if we have seen this ticker before for this minute
    if(window_data[timestamp] !== undefined && window_data[timestamp][0] !== undefined && window_data[timestamp][0] === ticker){
        window_data[timestamp][1] =  window_data[timestamp][1] + ',' + content;
    } else {
        window_data[timestamp] = [ticker, content];
    }
} 
```

};

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:23:57.000

数组是内存中的原语（嗯，内置类型，不是特别原始的）。

在 JavaScript 级别上，您究竟如何异步写入它？

在等待写入时，它会临时存储在哪里？第二个数组？（看到问题了吗？写入该数组会导致两次数组写入，速度会慢一倍。）

您将不得不确定一个不同的瓶颈，或者如果这确实是问题（我非常非常确定不是），您的机器处理这个问题的能力太弱，或者您有一个疯狂的高进来的数据量。

# asp.net-mvc-3 - MVC3：EF 代码优先和身份验证

> ID：10362607
> 
> 赞同：4
> 
> 时间：2012-04-28T10:20:13.507
> 
> 标签：asp.net-mvc-3, entity-framework, authentication, code-first

我正在 SQLExpress DB 上构建 MVC3 EF Code First 应用程序。对我来说非常重要的是，每当架构更改或类似情况时，数据库都会自动生成。现在我正在向我的应用程序添加身份验证，并查看了 MVC 附带的身份验证框架。但是，看起来每次生成新数据库时都需要我运行 aspnet_regsql.exe。我真的需要身份验证表与我的应用程序数据库位于同一数据库中。

我基本上想知道我的选择是什么；

*   是否可以使用身份验证框架并以与实体框架生成我的其他数据相同的方式自动生成它？
*   如果不是，我可以编写自己的身份验证，但是还有我可以使用的部分吗？换句话说，我是否需要编写自定义会员提供程序或类似的东西？我想继续使用属性 [authenticate] 等。

我可以在正确的方向上使用一些指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:47:35.097

您可以覆盖 DbMigrationsConfiguration 的种子方法或创建迁移。

然后，您应该能够执行可以从 aspnet_regsql.exe 生成的 SQL，或者在您有权限的情况下执行 aspnet_regsql.exe。

更新 1：

我最终做了如下：

```
Add-Migration AspNetRegSql

public partial class AspNetRegSql : DbMigration
{
    public override void Up()
    {
        Migrate(false);
    }

    public override void Down()
    {
        Migrate(true);
    }

    private static void Migrate(bool down)
    {
        var action = down ? "R" : "A";
        var connectionstring = ConfigurationManager.ConnectionStrings["DataContext"];
        var arguments = string.Format(@"-Q -C ""{0}"" -{1} mrp", connectionstring, action);

        var processStartInfo = new ProcessStartInfo
        {
            WorkingDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Replace(@"file:\", string.Empty),
            FileName = "aspnet_regsql.exe",
            Arguments = arguments,
            CreateNoWindow = true,
            WindowStyle = ProcessWindowStyle.Hidden
        };

        using (var process = Process.Start(processStartInfo))
        {
            process.WaitForExit();
        }
    }
} 
```

然后将“aspnet_regsql.exe”添加到我的项目中，并将构建操作更改为“如果更新则复制”。

更新 2：

我不知道 NSGaga 发布的库 - 我没有看过它，但建议你也考虑一下。

更新 3：

一些有用的链接：

*   [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms229862.aspx](http://msdn.microsoft.com/en-us/library/ms229862.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms229654.aspx](http://msdn.microsoft.com/en-us/library/ms229654.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T13:16:28.317

您可以从[CodeFirst Membership Provider](http://codefirstmembership.codeplex.com/) （首先基于代码的自定义提供程序）开始，并在需要时对其进行扩展（也可以通读网站上的推荐用法）。

以上是 IMO 最好的方式，因为您可以真正整合两者（例如，如果您可能需要直接访问会员表，与您自己的用户/客户表等相关联）。

但你也有其他选择......

a) 编写自己的 Db 初始化程序并为数据库播种（就像这里建议的[https://stackoverflow.com/a/5462981/417747](https://stackoverflow.com/a/5462981/417747)一样。注意：您可以使用不同的方法，从运行 aspnet 表 SQL 脚本到创建模型aspnet 表等）或

b) 使用“保留”数据库的 Db 初始化程序 - 并首先使用 aspnet 表准备数据库

c）（最后但并非最不重要）使用迁移（正如@Chris 正确建议的那样）。迁移非常强大。您可以运行`Update-Database -Script`以生成 SQL 而不是更改数据库 - 然后将其组合（与 aspnet 脚本或种子数据库）并使用它来创建或更新数据库。迁移需要一些学习，但对于任何更复杂的事情来说，再次付出努力都是值得的。

希望这可以帮助

# android - 尝试通过按主页按钮重新启动我的应用程序时出错？

> ID：10362616
> 
> 赞同：0
> 
> 时间：2012-04-28T10:21:03.610
> 
> 标签：android, android-tabhost

在我的 android 应用程序中，我的选项卡很少。该应用程序运行良好，但是每当我在任何 Tabhost 的第二个选项卡上按主页并通过按主页（最近的项目）重新启动它时，它就会崩溃并在以下位置出现一个空指针：

```
 04-28 15:47:06.177: W/System.err(25731): java.lang.NullPointerException
   04-28 15:47:06.207: W/System.err(25731):     at android.widget.TabWidget.setCurrentTab(TabWidget.java:339)
   04-28 15:47:06.207: W/System.err(25731):     at android.widget.TabWidget.focusCurrentTab(TabWidget.java:363)
   04-28 15:47:06.207: W/System.err(25731):     at android.widget.TabHost.setCurrentTab(TabHost.java:320)
    04-28 15:47:06.207: W/System.err(25731):    at android.widget.TabHost.addTab(TabHost.java:213)
   04-28 15:47:06.207: W/System.err(25731):     at com.cuelearn.main.ChapterTab.onResume(ChapterTab.java:82)
   04-28 15:47:06.207: W/System.err(25731):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
  04-28 15:47:06.237: W/System.err(25731):  at android.app.Activity.performResume(Activity.java:3823) 
```

接着：

```
 04-28 15:47:06.177: W/System.err(25731): java.lang.NullPointerException
  04-28 15:47:06.207: W/System.err(25731):  at android.widget.TabWidget.setCurrentTab(TabWidget.java:339)
  04-28 15:47:06.207: W/System.err(25731):  at android.widget.TabWidget.focusCurrentTab(TabWidget.java:363)
   04-28 15:47:06.207: W/System.err(25731):     at android.widget.TabHost.setCurrentTab(TabHost.java:320)
  04-28 15:47:06.207: W/System.err(25731):  at android.widget.TabHost.addTab(TabHost.java:213)
   04-28 15:47:06.207: W/System.err(25731):     at com.cuelearn.main.ChapterTab.onResume(ChapterTab.java:82)
   04-28 15:47:06.207: W/System.err(25731):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
   04-28 15:47:06.237: W/System.err(25731):     at android.app.Activity.performResume(Activity.java:3823)
   04-28 15:47:06.827: E/AndroidRuntime(25731): FATAL EXCEPTION: main
  04-28 15:47:06.827: E/AndroidRuntime(25731): java.lang.NullPointerException
 04-28 15:47:06.827: E/AndroidRuntime(25731):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
 04-28 15:47:06.827: E/AndroidRuntime(25731):   at android.widget.TabWidget.dispatchDraw(TabWidget.java:271)
  04-28 15:47:06.827: E/AndroidRuntime(25731):  at android.view.View.draw(View.java:6743)
  04-28 15:47:06.827: E/AndroidRuntime(25731):  at android.view.ViewGroup.drawChild(ViewGroup.java:1640) 
```

我是新手请帮帮我？我必须完成最后一项任务才能完成我的应用程序，所以请帮忙？

**编辑**

```
@Override
public void onResume()
{
    super.onResume();
//  addTabs();

  tabHost=getTabHost();

    tabHost.clearAllTabs();

      try{

           tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("All").setContent(new Intent(this, ChTable.class)

                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.addTab(tabHost.newTabSpec("tab4").setIndicator("New").setContent(
                new Intent(this, ChapterNew.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.setCurrentTab(tabbed);

        tabHost.getTabWidget().getChildAt(0).getLayoutParams().height =35;

        tabHost.getTabWidget().getChildAt(1).getLayoutParams().height =35;

}
    catch (Exception e) {
e.printStackTrace();
// TODO: handle exception
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:34:41.933

tabHost.setCurrentTab(tabbed); 看起来您的“选项卡”未定义或无效。

# android - 无法将联系人照片加载到 QuickContactBadge 以进行自定义来电屏幕

> ID：10362626
> 
> 赞同：0
> 
> 时间：2012-04-28T10:22:30.957
> 
> 标签：android, phone-call, quickcontactbadge

我有一个自定义来电屏幕，每当收到来电时就会显示。我已经能够从我的联系人中捕获来电者的姓名和号码，并将它们分配给我自己的文本视图，但事实证明，获取联系人照片 ID 是一件非常痛苦的事情。这是假设处理根据电话号码获取联系人照片的代码：

```
 int idCol = cur.getColumnIndex(ContactsContract.Contacts._ID);
        long contactPhoto = Long.parseLong(IncomingCallListener.getPhoneNumberSt8());
        Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, contactPhoto);
        Bitmap bitmap = getDisplayPhoto(contactPhoto);
        qcbContactPic.setImageBitmap(bitmap); 
```

**cur**是一个游标。

**contactPhoto**获取传入电话号码的字符串，然后将其解析为 long。

**IncomingCallListener**是我的 BroadcastReceiver 类。

**qcbContactPic**是 QuickContactBadge。

这编译没有错误，但是有谁知道为什么当我接到来电时照片不会显示在 QuickContactBadge 中？

注意：我不想使用 facebook 图片。我正在使用从设备本身拍摄的手机图库中存储的照片。

**更新更新更新**

这是新代码。这假设允许检索来电者的联系人照片，但它仍然返回我设置的默认图像：

```
public Uri getPhotoUri() {
    try {
        Cursor cur = context.getContentResolver().query( //this.
                ContactsContract.Data.CONTENT_URI,
                null, 
                ContactsContract.Data.CONTACT_ID + "=" + this.getID() + " AND "
                        + ContactsContract.Data.MIMETYPE + "='"
                        + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'", null,
                null);
        if (cur != null) {
            if (!cur.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long
            .parseLong(IncomingCallListener.getPhoneNumberSt8()));
    return Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
}

public String getID(){
    return IncomingCallListener.getPhoneNumberSt8();
} 
```

然后它是这样调用的：

```
Uri u = getPhotoUri();
        if (u != null) {
            qcbContactPic.setImageURI(u);
            Log.d("PHOTO", "ID launched");
        } else {
            qcbContactPic.setImageResource(R.drawable.ic_launcher);
            Log.d("PHOTO", "Default launched");
        } 
```

**注意：** IncomingCallListener.getPhoneNumberSt8() 返回电话号码的字符串。我已经用联系人照片设置了电话号码 5555551234，但是当我从 telnet 向模拟器拨打电话时，显示的是“默认启动”而不是带有相应图片的“ID 启动”。

**LOGCAT**（所有警告，除了最后一个条目显示使用了哪张照片）：

```
04-29 05:45:31.581: W/System.err(16332): java.lang.NullPointerException
04-29 05:45:31.590: W/System.err(16332):    at com.fooapp.barname.IncomingCallReceived.getPhotoUri(IncomingCallReceived.java:239)
04-29 05:45:31.590: W/System.err(16332):    at com.fooapp.barname.IncomingCallReceived.getContactName(IncomingCallReceived.java:225)
04-29 05:45:31.590: W/System.err(16332):    at com.fooapp.barname.IncomingCallReceived.onCreate(IncomingCallReceived.java:99)
04-29 05:45:31.590: W/System.err(16332):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-29 05:45:31.590: W/System.err(16332):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-29 05:45:31.590: W/System.err(16332):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-29 05:45:31.590: W/System.err(16332):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-29 05:45:31.590: W/System.err(16332):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-29 05:45:31.590: W/System.err(16332):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 05:45:31.600: W/System.err(16332):    at android.os.Looper.loop(Looper.java:123)
04-29 05:45:31.600: W/System.err(16332):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-29 05:45:31.600: W/System.err(16332):    at java.lang.reflect.Method.invokeNative(Native Method)
04-29 05:45:31.600: W/System.err(16332):    at java.lang.reflect.Method.invoke(Method.java:507)
04-29 05:45:31.600: W/System.err(16332):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-29 05:45:31.600: W/System.err(16332):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-29 05:45:31.600: W/System.err(16332):    at dalvik.system.NativeStart.main(Native Method)
04-29 05:45:31.620: D/PHOTO(16332): Default launched 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:36:52.977

这是一个工作示例

```
public class QuickContactBadgeActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //

    QuickContactBadge badge = (QuickContactBadge) findViewById(R.id.small_contact_badge);

    String contactId = fetchContactIdFromPhoneNumber("123"); 
    Uri uri = getPhotoUri(Long.parseLong(contactId));
    badge.assignContactUri(uri);
    badge.setImageBitmap(loadContactPhoto(getContentResolver(), Long.parseLong(contactId)));

}

private String fetchContactIdFromPhoneNumber(String phoneNumber) {
    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));
    Cursor cursor = this.getContentResolver().query(uri,
            new String[] { PhoneLookup.DISPLAY_NAME, PhoneLookup._ID },
            null, null, null);

    String contactId = "";

    if (cursor.moveToFirst()) {
        do {
            contactId = cursor.getString(cursor
                    .getColumnIndex(PhoneLookup._ID));
        } while (cursor.moveToNext());
    }

    return contactId;
}

private static Bitmap loadContactPhoto(ContentResolver cr, long  id) {
    Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
    InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
    if (input == null) {
        return null;
    }
    return BitmapFactory.decodeStream(input);
}

private Uri getPhotoUri(long contactId) {
    ContentResolver contentResolver = getContentResolver();

    try {
        Cursor cursor = contentResolver
                .query(ContactsContract.Data.CONTENT_URI,
                        null,
                        ContactsContract.Data.CONTACT_ID
                                + "="
                                + contactId
                                + " AND "

                                + ContactsContract.Data.MIMETYPE
                                + "='"
                                + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                                + "'", null, null);

        if (cursor != null) {
            if (!cursor.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

    Uri person = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, contactId);
    return Uri.withAppendedPath(person,
            ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

}

它基于的示例：

[如何加载联系人照片？](https://stackoverflow.com/questions/2383580/android-how-do-i-load-a-contact-photo)

[如何获取联系人照片 URI](https://stackoverflow.com/questions/7738192/how-to-get-contact-photo-uri)

您还需要许可：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

# mercurial - TortoiseHG：添加目录树中的所有文件

> ID：10362627
> 
> 赞同：1
> 
> 时间：2012-04-28T10:22:31.503
> 
> 标签：mercurial, tortoisehg

如何将目录树中的所有文件添加到我的存储库。我可以逐个文件地执行此操作，但这似乎不是最有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:32:35.047

提交时，可以在提交对话框顶部输入过滤文本，输入要添加的具体目录即可，其他文件将被过滤，之后勾选全部，提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:54:49.127

我认为在 Windows 资源管理器文件夹的上下文菜单中的[Create Repository Here](http://tortoisehg.bitbucket.io/manual/2.0/quick.html#initialize-the-repository)`TortoiseHg`是您正在寻找的。

# linux - objdump 如何发出 intel 语法

> ID：10362630
> 
> 赞同：85
> 
> 时间：2012-04-28T10:22:49.457
> 
> 标签：linux, assembly, x86-64, objdump

我如何知道`objdump`以英特尔语法而不是默认的 AT&T 语法发出程序集？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-04-28T10:25:01.340

您正在寻找的是`-M intel`. 如下使用它。

```
objdump -M intel -d program_name 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T04:54:35.543

如果您还想要 Intel 助记符（而不是 AT&T 助记符），您可以使用：

`objdump -M intel intel-mnemonic -D <program's-object-file>`

# c# - MySqlException (0x80004005): 已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭

> ID：10362635
> 
> 赞同：1
> 
> 时间：2012-04-28T10:23:13.573
> 
> 标签：c#, mysql, database

我只在我的应用程序中使用 DataReaders 两次，看起来像这样

```
 MySqlDataReader reader = cmd.ExecuteReader();
    while (reader.Read())
    {
       //Code
    }
    reader.Close(); 
```

谁能给我一些有关如何解决此错误的指示？或者去哪里看？对不起，如果它太模糊了，但这就是错误告诉我的。它指向了这一点：

```
 MySqlCommand cmdDel = new MySqlCommand("UPDATE " + _Database + " SET balance=" + balance + ", bitaddress=" + myads + ", lostbalance=" + lostbalance + " WHERE username = '" + username + "'", connection);
        cmdDel.ExecuteNonQuery();
        cmdDel.Dispose(); 
```

我的猜测是在一段时间内不允许执行查询命令（reader.Read()）有人可以确认吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:32:51.107

这几乎肯定意味着您在多个命令对象之间共享一个连接对象。您应该避免这样做（除非它们都参与单个数据库事务）。

您通常应该遵循的模型是：

```
using(var connection = new MySqlConnection("..."))
{
   using(var cmd = new MySqlCommand("...",connection))
   {
       //Set up parameters/other settings/as required
       connection.Open();
       cmd.<Whatever ExecuteXXX method you need to use>();
       //If it was ExecuteReader, process the results now
   }
}
//If it was ExecuteScalar, or a fill of a DataSet or DataTable, consume the results now 
```

除非您有阻止它的特定需求，否则您应该更喜欢将一次性用品包装在`using`语句中，而不是手动调用`Dispose()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:26:35.837

您可以在 while 循环内编写查询，但请确保您不应该使用外部循环使用的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T10:52:58.113

如果您想同时打开一些阅读器，那么您应该为每个阅读器打开一些新的连接。创建的连接可以在读卡器关闭后再次使用。

# jquery - 带有 jQ uery Fancybox (2.0.5.) 的 iframe 中的双滚动条

> ID：10362639
> 
> 赞同：1
> 
> 时间：2012-04-28T10:23:45.040
> 
> 标签：jquery, fancybox, phpbb3

我有一个真正的anyoing问题。我使用最新的 Fancybox 在弹出屏幕中打开我的 phpBB3 论坛。当我这样做时，我在弹出窗口的右侧有一个双滚动条。你可以在这里看到它的实际效果：

[贝勒瓦尔德芬](http://www.bellewaerdefun.be)

现在单击顶部导航中的“论坛”按钮，您将明白我的意思。我真的不知道我做错了什么。使用旧的 Fancybox 版本，效果非常好！

这是我的js代码：

```
$('.forum-popup, ul#forum-topics li a').fancybox({
    type                : 'iframe',
    margin              : 30,
    padding             : 7,
    scrolling           : 'auto',
    width               : '100%',
    height              : '100%',
    openEffect          : 'fade',
    closeEffect         : 'fade',
    fitToView           : true,
    closeBtn            : true,
    closeClick          : false
}); 
```

任何有同样问题的人或任何可以帮助我解决这个美容问题的人？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:29:39.380

它尝试将 iframe 高度设置为与其内容相同的高度，以使其可滚动。但似乎它不能正常工作，并且 iframe 内的页面仍然有它的全部滚动条。将滚动设置为`no`可能会解决此问题。

# iphone - 绘制可编辑线

> ID：10362640
> 
> 赞同：1
> 
> 时间：2012-04-28T10:23:45.730
> 
> 标签：iphone, objective-c, drawing, line

如何 在 iPhone 中像这个应用程序[http://www.youtube.com/watch?v=F0GaOAXXsa8一样绘制可编辑线。](http://www.youtube.com/watch?v=F0GaOAXXsa8)我试过了，但我不能像这个应用程序那样画画。请帮我画线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:46:57.010

1.  子类 a `UIView`。
2.  实现`drawRect:`先绘制背景图像，然后使用 Core Graphics 在其顶部绘制线条。线端点可以保存为视图的实例变量。
3.  实施`touchesBegan:withEvent:`以记录线路的第一个端点。
4.  在`touchesMoved:withEvent:`记录线的第二个端点并调用`[self setNeedsDisplay]`以更新绘图。
5.  根据`touchesEnded:withEvent:`需要完成该过程。

# php - 是否可以在正则表达式中使用组而不显示在结果中？

> ID：10362644
> 
> 赞同：2
> 
> 时间：2012-04-28T10:23:59.983
> 
> 标签：php, regex

抱歉标题格式错误，但我不知道如何更好地解释这个问题。举个例子：我想使用匹配组来匹配某些东西，但我也想在该组内使用组，因为我需要它们进行匹配，但我不希望这些内部组使用 PHP 的结果显示`preg_match`. 以下是此类查询的示例：

```
(([^0-9^\n]+)*([^0-9^\n^ ]+)) 
```

它将匹配包含空格但没有任何尾随空格的句子。如您所见，它使用一个外部组（我想要的结果）和其中的两个组。我是否可以将这些内部组替换为可以完成相同工作的东西，或者以某种方式将它们标记为与结果数据无关？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T10:26:50.013

您必须使用[非捕获子模式](http://php.net/regexp.reference.subpatterns)：

> 简单的括号满足两个功能这一事实并不总是有帮助的。经常需要分组子模式而没有捕获要求。如果左括号后跟“?:”，则子模式不进行任何捕获，并且在计算任何后续捕获子模式的数量时不计算在内。

应用于您的正则表达式，它变为：

```
/((?:[^0-9^\n]+)*(?:[^0-9^\n^ ]+))/ 
```

# vb.net-2010 - 在没有管理权限的情况下通过 VB.NET 代码在磁盘上创建 XML 文件

> ID：10362645
> 
> 赞同：0
> 
> 时间：2012-04-28T10:24:02.017
> 
> 标签：vb.net-2010

我有一个 vb.net 应用程序，它在其安装根目录中创建一个临时 xml 文件以保存一些配置。

但是当没有管理权限的用户运行此应用程序时出现错误并且未创建文件，我认为用户没有对硬盘的写访问权限。

我怎样才能避免这个问题。我需要没有管理权限的用户来创建 xml 文件。

请回复我正确的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:15:54.637

除非你想让你的应用程序一直以管理员身份运行，否则你不能这样做，这真的会激怒你的用户，更不用说让那些知道一两件事的人想知道你的应用程序可能会用该访问权限做什么。

正确执行此操作，并将文件放在专门为执行此类操作而创建的文件夹之一中。 `Environment.SpecialFolder.CommonApplicationData`如果它是每台机器 `Environment.SpecialFolder.LocalApplicationData`，它是每个用户。

如果您担心它不存在，或者用户可能已将其删除或弄乱了。对此进行测试。通常的技巧是在你的应用程序中编译一个“模板”文件作为资源，然后如果出现问题，从那里重新创建它，然后存储它。

# python - Django Memcached 酸洗错误

> ID：10362656
> 
> 赞同：2
> 
> 时间：2012-04-28T10:25:09.163
> 
> 标签：python, django, memcached

我对 Django 相当陌生，我正在尝试使用内置缓存系统。我正在使用 Django 1.4。

## 我的目标

在我看来，我想缓存对外部 API 的调用。因此我想使用`cache.get()`and `cache.set()`。

## 我的方法

1）我安装了 pylibmc 以及 python-memcached

2）在我的设置中，我添加了：

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',
        # i also tried 'django.core.cache.backends.memcached.MemcachedCache'
        'LOCATION': '127.0.0.1:11211',
    }
} 
```

3）在我看来，我补充说：

```
myData = cache.get('myKey')
if not myData:
    myData = myApiCall()
    cache.set('myKey', myData) 
```

4）myApiCall()是lastfm库的方法调用：

```
api_key = '12345678901234567890'
api = lastfm.Api(api_key)
user = api.get_user('aLastFmUser')
myData = user.top_artists # this is the relevant line 
```

## 问题

当我使用 pylibmc 缓存后端时收到此错误消息：

```
cPickle.PicklingError
PicklingError: Can't pickle <type 'module'>: attribute lookup __builtin__.module failed 
```

而这个使用 memcached 缓存后端时：

```
TypeError
TypeError: can't pickle module objects 
```

显然，酸洗/序列化出错了。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:21:51.573

感谢[DrTyrsa 的评论，](https://stackoverflow.com/questions/10362656/django-memcached-pickling-error#comment13353833_10362656)我找到了解决方案：

腌制对象可能会导致错误，因此将所需数据提取到列表或字典中更可靠。

# c++ - C++ 将 *char 缓冲区的一部分写入 Windows 上的临时文件

> ID：10362658
> 
> 赞同：0
> 
> 时间：2012-04-28T10:25:42.140
> 
> 标签：c++, winapi, io

我对 C++ 和 win32 还是很陌生。我需要完成一个非常简单的任务：

1.  我有一个缓冲区 char* 缓冲区，我知道它的长度并保存一些二进制数据。您能否提供一个示例代码，将缓冲区的内容（给定起始索引和长度）写入 Windows（win32 api）上的临时文件（即使没有管理员权限，位置也必须是可写的）？因此，要做到这一点，我必须知道如何在我可以写入的 Windows 上获取有效的临时文件名，以及我应该如何从我的 char* 缓冲区的给定部分向该文件写入一些二进制数据。

2.  此外，我似乎无法弄清楚是否可以将 char 用于二进制文件，但问题是 ifstream 默认情况下会将数据读取为 char。

3.  还有一个简单的问题：一旦我完成了它们，我是否总是必须删除它们。即在我上面的示例中，我是否必须在完成后调用删除缓冲区？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:37:04.487

> 我有一个缓冲区 char* 缓冲区，我知道它的长度并保存一些二进制数据。您能否提供一个示例代码，将缓冲区的内容（给定起始索引和长度）写入 Windows（win32 api）上的临时文件（即使没有管理员权限，位置也必须是可写的）？

在 google 中快速搜索会返回制造商提供的有关临时文件的文档。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363875(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363875(v=vs.85).aspx)

请记住，一旦您以这种方式使用临时文件，您的代码将自动不可移植（如果这对您很重要）。

一旦您有了临时文件的名称和目录，您所要求的代码就很简单了。再次，在谷歌快速搜索返回：

[http://www.cplusplus.com/forum/general/21018/](http://www.cplusplus.com/forum/general/21018/)

如果您喜欢坚持 C（旧）风格而不是使用 IOStream，您也可以使用：

[http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/](http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/)

> 还有一个简单的问题：一旦我完成了它们，我是否总是必须删除它们。即在我上面的示例中，我是否必须在完成后调用删除缓冲区？

使用后，您必须始终删除由指针（这是其名称的由来）指向的已分配内存。

```
char * buffer = new char[MaxBuffer];

// more things ...

delete[] buffer; 
```

请记住`delete[]`在删除向量而不是单个对象时使用。

# javascript - 如何使用小书签在新选项卡中启动功能？

> ID：10362659
> 
> 赞同：3
> 
> 时间：2012-04-28T10:25:47.287
> 
> 标签：javascript, function, firefox, tabs, bookmarklet

这是我第一次尝试 JavaScript，如果看起来有点粗糙，请原谅。

该网站[http://www.keepvid.com/](http://www.keepvid.com/)提供了一个带有 JavaScript 的书签，允许您通过在媒体页面上单击它来从 YouTube 和其他媒体网站下载视频。但是，我发现不是在新选项卡中打开下载页面，而是在当前选项卡中打开它，中断了媒体（可能是为了鼓励你购买他们的专业版）。

将其视为尝试 JavaScript 的机会（因为我之前只使用过小书签），我一直在寻找答案，但我发现的答案似乎只适用于旧版本的网站，因为 JavaScript 似乎已更新。

我一直在尝试制作一个打开新页面的书签，然后加载媒体的下载页面。

我作为解决方案遇到的第一个代码是：`javascript:void(window.open('http://keepvid.com/?url='+escape(window.location)));`

但这不起作用，当我注意到书签的最终 URL 添加`&bm=y`到 URL 的末尾时，我将其编辑为：
`javascript:void(window.open('http://keepvid.com/?url='+escape(window.location)+'&bm=y'));`

然后我查看了书签的原始代码::
`javascript: (a%20=%20(b%20=%20document).createElement('script')).src%20=%20'http://keepvid.com/js/bm.js',%20b.body.appendChild(a);void(0);`

并意识到它正在调用外部脚本（我相信）并且它必须保持不变。

从他们那里，我一直在尝试各种方法来让它发挥作用，到目前为止，这就是我所拥有的： `javascript:void(window.open(window.location));void((a%20=%20(b%20=%20document).createElement('script')).src%20=%20'http://keepvid.com/js/bm.js',%20b.body.appendChild(a));`

此脚本会打开一个新标签，但新标签只会是 YouTube 视频的副本，而原始标签将加载下载页面，这仍然会中断媒体，使我的工作毫无用处，如果稍微方便一点的话。

我一直在尽我所能尝试，但似乎我不能在同一个书签中拥有第二个脚本，除非它指向它被调用的原始选项卡。

所以，我一直想知道我需要做什么才能： 1\. 创建一个新选项卡 2\. 让新选项卡加载下载页面（而不是原始选项卡） 3\. 保留原始选项卡并仅使用它捕获 window.location

如果这是不可能的，他们是否可以在工具箱中创建一个小书签来复制原始页面，然后指向包含重定向到下载页面的书签菜单中的小书签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T12:14:43.350

复制这段文字： http: [//keepvid.com/js/bm.js](http://keepvid.com/js/bm.js)

改变

```
<form method='post' 
```

至

```
<form method='post' target='_blank' 
```

您可以将文件托管在您自己的服务器上，并以与原始书签相同的方式附加脚本，或者您可以将代码压缩成一个独立的书签，像这样

```
javascript:eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return%20r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new%20RegExp('\\b'+e(c)+'\\b','g'),k[c]);return%20p}('o%20i(a,b,c){N{7%20u=a.v(b);7%20w=u[1].v(c);x%20w[0]}O(P){x\'\'}}o%20p(){7%20q=d.Q("R");q.9="<z%20S=\'T\'%20U=\'V\'%20W=\'r://A.g/?B="+C(h.j)+"&X=y\'%20Y=\'D\'><k%20l=\'s\'%20t=\'Z\'%20m=\'"+8+"\'%20/><k%20l=\'s\'%20t=\'2\'%20m=\'"+2+"\'%20/><k%20l=\'s\'%20t=\'5\'%20m=\'"+5+"\'%20/><k%2010=\'11-12-E%20F-G-13%20F-G-14\'%20l=\'H\'%20m=\'15%2016%2017\'%20/></z>";d.e.19(q);h.1a["D"].H()}7%20d=h;6(d.j.I.1b(/J.g/i)){7%208=i(d.e.9,\';8=\',\'&\');6(8==\'\')8=i(d.e.9,\'"8":%20"\',\'"\');7%202=i(d.e.9,\'2"%201c="\',\'"\');6(2==\'\')2=i(d.e.9,\'1d"%202="\',\'"\');7%205=i(d.e.9,\'n=\',\'&\');6(5==\'\')5=i(3.f,\'n":%20"\',\'"\').K("\\\\/","/");6(5==\'\'){7%203=1e;6(!3&&1f%20L!=\'1g\'){3=E%20L()}3.1h("1i","r://1j.J.g/1k?8="+8+"&5=18",1l);3.1m=o(){6(3.1n==4){2=i(3.f,\'&2=\',\'&\');6(2==\'\')2=i(3.f,\'2=\',\'&\');5=i(3.f,\'n=\',\'&\');6(5==\'\')5=i(3.f,\'n":%20"\',\'"\').K("\\\\/","/");p()}};3.1o()}M{p()}}M{h.j.I=\'r://A.g/?B=\'+C(1p.j)}',62,88,'||title|kvajax||fmt|if|var|video_id|innerHTML|||||body|responseText|com|document||location|input|type|value|fmt_stream_map|function|finishkv|gd|http|hidden|name|a1|split|a2|return||form|keepvid|url|escape|kvdl|new|yt|uix|submit|href|youtube|replace|XMLHttpRequest|else|try|catch|err|createElement|div|method|post|target|blank|action|bm|id|vid|class|master|sprite|button|tooltip|Download|with|KeepVid||appendChild|forms|match|content|ltr|false|typeof|undefined|open|GET|www|get_video_info|true|onreadystatechange|readyState|send|window'.split('|'),0,{})) 
```

我用这个打包它：http: [//javascriptcompressor.com/](http://javascriptcompressor.com/)

为了以同样的方式处理非 youtube 网站，也要改变

```
document.location.href='http://keepvid.com/?url='+escape(window.location); 
```

至

```
window.open('http://keepvid.com/?url='+escape(window.location)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-25T16:51:12.890

这个问题有点老了，但是我在新标签页中打开 dict.cc 的小书签非常适合问题标题。

```
javascript:(function(){window.open("http://www.dict.cc/?s="+encodeURIComponent(prompt("Enter word to look for:")))})(); 
```

我不确定包装函数的作用，但没有它，当前选项卡将被清除。

来源：[https ://www.mattcutts.com/blog/javascript-bookmarklet-basics/](https://www.mattcutts.com/blog/javascript-bookmarklet-basics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:18:15.807

> 作为解决方案，我遇到的第一个代码是： javascript:void(window.open('http://keepvid.com/?url='+escape(window.location)));
> 
> 但这没有用

没有以什么方式工作？如果浏览器阻止弹出窗口，您将不会成功。如果没有，该方法应该有效。

这是一种可能的其他方法 - 仍然不能保证更好地工作

您需要在服务器上存储一个脚本。脚本被加载到当前窗口使用

```
(function() {var scr=document.createElement('script');scr.src='http://www.yourserver.com/yourserverprocess.php?loc=escape(window.location.href;document.getElementByTagname('head')[0].appendChild(scr); })(); 
```

然后在您的服务器上您可以返回（假设为 php）

```
header("content-type: text/javascript");
echo "window.open('http://yourserver.com/convert.php?loc=".$_GET["loc"],'_blank')"; 
```

# c# - l2s 模式中的成员表

> ID：10362661
> 
> 赞同：0
> 
> 时间：2012-04-28T10:26:02.750
> 
> 标签：c#, asp.net, asp.net-mvc, linq-to-sql, asp.net-membership

我经常发现自己需要一些用户数据，例如用户名、配置文件属性以及来自数据库中其他表的其他一些数据，其中表通过 UserId(guid) 关联。让我解释一下：

```
aspnet_Users table:
UserId
username
...

Some table from which I retrive data:
Id
Post
DateTime
UserId
... 
```

因此，对于我拉出的每个帖子（通常一次超过 20 个），我都需要每个帖子的用户名。调用类似的东西似乎很昂贵：

```
 string username = Membership.GetUser(UserID).UserName; 
```

对于每个项目。好像我正在对数据库进行 20 次额外调用。这样做的正确方法是什么？我是否应该在我的 Linq to Sql 方案中包含 aspnet_Users 表，然后加入以便我可以一次提取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:17:30.263

> > 我是否应该在我的 Linq to Sql 方案中包含 aspnet_Users 表，然后加入以便我可以一次提取它？

是的，至少我是这样做的。

另一种选择是创建一个字典并将所有用户存储在那里并在内存中进行查找，但在这种情况下，您需要监视对用户的更改，因此连接似乎是一个更容易的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T10:22:30.310

你不必。至少有两种可能的方法。

首先，您可以有一个自定义成员资格提供程序，它使用您自己的数据库和数据库中的自定义表。这样您就不必处理两个数据库，也不必执行额外的调用。

其次，如果您仍然想坚持`SqlMembershipProvider`使用`aspnetdb`数据库的内置函数，因此您有两个数据库 - 用户数据库和应用程序数据库，您可以创建从应用程序数据库到`aspnetdb`数据库的链接服务器/同义词。有一个小问题`sqlmetal.exe`会阻止它生成链接表的 linq2sql 模型，但是您可以为两个数据库创建模型，然后将其放在同一个命名空间中：

[http://netpl.blogspot.com/2008/06/linq-and-synonyms-linked-servers.html](http://netpl.blogspot.com/2008/06/linq-and-synonyms-linked-servers.html)

这样，您将拥有一个**带有**链接表的数据库的 linq2sql 模型，这将允许您跨数据库创建连接。在您的场景中，这意味着使用单个 linq2sql 语句来检索带有用户名的帖子。

# iphone - 如何为我的表格视图的每个单元格设置不同的图像

> ID：10362671
> 
> 赞同：2
> 
> 时间：2012-04-28T10:27:17.803
> 
> 标签：iphone

如何为我的表格视图的每个单元格设置不同的图像。我想通过图像名称数组来做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T10:33:15.253

使用以下代码...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

/* Initialise the cell */

static NSString *CellIdentifier = @"MyTableViewCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

/* Configure the cell */

NSString *cellImageName = [[self cellImageNames] objectAtIndex:[indexPath row]];//cellImageNames ism image names array where 
UIImage *cellImage = [UIImage cellImageName];
[[cell imageView] setImage:cellIcon];

// Other cell configuration code...

return cell;
} 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T10:34:02.087

例如：

```
cell.imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"image%i.png", indexPath.row]]; 
```

或者

```
cell.imageView.image = (UIImage *)[yourArray objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-28T10:34:40.603

您的解决方案在这里转到此链接 [如何在 UITableView 中添加 UIImage](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-uiimage-and-uilabel-in-the-uitableview/)

```
- (UITableViewCell *)tableView:(UITableView *)tableView  cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     static NSString *MyIdentifier = @"MyIdentifier";
     MyIdentifier = @"TableView";

     MainView *cell = (MainView *)[tableView  dequeueReusableCellWithIdentifier: MyIdentifier];
     if(cell == nil) {
          [[NSBundle mainBundle] loadNibNamed:@"MainView" owner:self   options:nil];
           cell = tableCell;
        }

  [cell LabelText:[arryList objectAtIndex:indexPath.row]];
 [cell ProductImage:[imagesList objectAtIndex:indexPath.row]];
  return cell;
  } 
```

带有图像的 Utableview 显示如下

![在此处输入图像描述](../Images/ef2a60b27947eba85f94cd6ad427deb9.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T06:55:52.043

```
cell.imageView.image = [UIImage imageNamed:@"image.png"]; 
```

# c++ - C ++字符串数据（）函数使引用和指针无效？

> ID：10362672
> 
> 赞同：1
> 
> 时间：2012-04-28T10:27:18.587
> 
> 标签：c++, stl

我现在正在阅读《The C++ Standard Library》。当我阅读字符串章节时，我遇到了一个问题。它告诉我们，如果内容是由 data() 导出的，则引用字符串字符的引用和指针可能会失效。

![在此处输入图像描述](../Images/ffc233d1aa3d314df5d517b524588177.png)

正如我们所知，data() 将字符串的内容作为字符数组返回，并且返回类型不是有效的 C 字符串，因为没有附加 '\0' 字符。

但是为什么 data() 会使引用和指针失效呢？

有人可以为我翻译吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:28:53.033

调用`data`自身不会，`const`之后调用可变方法（非）可能会使前一个指针无效。这是因为当您修改字符串时，内部 char 数组可能会被更改或重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:17:19.620

在 C++03 中，没有要求内部字符串表示必须是一个连续的缓冲区。它还被允许与另一个字符串共享内部结构（例如，使用引用计数）。

因此，调用`data()`或`c_str()`可能会强制字符串重构其内部数据，以便能够返回指向 char 缓冲区的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:47:18.977

一个例子，假设 C++11（这样`data()`保证是空终止的）：

```
string s = "abc" ;
const char* p = s.data() ;
cout << p << endl ;
s = "ABCDE" ;
cout << p << endl ; 
```

第二个分配给`s`invalidates `p`，因为`s`可能（在这里，它可能会）重新分配其内部缓冲区。所以最终的结果`cout`是不确定的。它可能会打印“abc”或“ABCDE”，或者它可能会将苹果酒喷到你的耳朵里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T10:54:07.723

我正在阅读最新的 C++11 草案，但找不到任何支持此类声明的内容：

> 21.4.1 pt 6：引用 basic_string 序列元素的引用、指针和迭代器可能会因该 basic_string 对象的以下用途而失效：
> 
> — 作为任何标准库函数的参数，将非常量 basic_string 的引用作为参数。
> 
> — 调用非常量成员函数，除了 operator[]、at、front、back、begin、rbegin、end 和 rend。

第一点的脚注：

> 例如，作为非成员函数 swap() (21.4.8.8)、operator>>() (21.4.8.9) 和 getline() (21.4.8.9) 的参数，或作为 basic_string::swap 的参数()

`data()`成员函数已声明`const`，因此它不应使任何内容无效。

# linux - AWK 将月份从日期解析为变量

> ID：10362673
> 
> 赞同：0
> 
> 时间：2012-04-28T10:27:26.227
> 
> 标签：linux, bash, awk

我有一个包含以下数据的文件：-

```
2012/02/17  154.89    24.00        3.72   0.098      0.36   0.188     0.050     0.03  0.58
2012/02/18  238.16    24.00        5.72   0.098      0.56   0.188     0.050     0.04  0.79
2012/03/19  155.55    24.00        3.73   0.098      0.37   0.188     0.050     0.03  0.58
2012/03/20  186.00    24.00        4.46   0.098      0.44   0.188     0.050     0.03  0.66
2012/04/21  487.86    8.87         4.33   0.098      0.42   0.188     0.050     0.03  0.64
2012/04/22  264.32    24.00        6.34   0.098      0.62   0.188     0.050     0.04  0.85
2012/04/23  328.65    23.99        7.89   0.098      0.77   0.188     0.050     0.05  1.01
2012/04/24  155.31    24.00        3.73   0.098      0.37   0.188     0.050     0.03  0.58
2012/04/25  229.36    24.00        5.50   0.098      0.54   0.188     0.050     0.04  0.76
2012/04/26  153.45    24.00        3.68   0.098      0.36   0.188     0.050     0.03  0.58 
```

我有以下 AWK 脚本，当日期字段更改时，它会打印出“diff”。

```
awk '{print $1,l} NR!=1 && $1!=l {print "diff"} {l=$1}' MyFile 
```

产生以下输出： -

```
2012/02/17
2012/02/18 2012/02/17
diff
2012/03/19 2012/02/18
diff
2012/03/20 2012/03/19
diff
2012/04/21 2012/03/20
diff
2012/04/22 2012/04/21
diff
2012/04/23 2012/04/22
diff
2012/04/23 2012/04/23
2012/04/23 2012/04/23
2012/04/23 2012/04/23
2012/04/23 2012/04/23
2012/04/24 2012/04/23
diff
2012/04/25 2012/04/24
diff
2012/04/26 2012/04/25
diff
 2012/04/26
diff 
```

我将如何修改脚本来告诉它，仅当日期中的月份更改（中间数字）而不是整个日期时打印出“差异”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:42:24.070

根据分隔符“/”拆分第一个字段。在比较中使用该结果。

```
$ awk '
> {print $1, l; split($1, m, "/");}
> NR!=1 && m[2]!=l {print "diff";}
> {l=m[2];}' MyFile
2012/02/17
2012/02/18 02
2012/03/19 02
diff
2012/03/20 03
2012/04/21 03
diff
2012/04/22 04
2012/04/23 04
2012/04/24 04
2012/04/25 04 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:43:39.697

希望这应该工作：

```
awk -F'[ \t/]' '
{d=$1 "/" $2 "/" $3; print d, od; od = d} 
NR!=1 && $2!=l {print "diff"} 
{l=$2}' FILE 
```

# android - 要删除的 Android 滑动元素

> ID：10362674
> 
> 赞同：2
> 
> 时间：2012-04-28T10:27:27.683
> 
> 标签：android, android-animation, slide, gestures

我想在 ViewGroup 项目上实现滑动手势（向左或向右滑动）以将其删除。我还想让项目跟随手指（水平拖动）以删除它。我没有找到任何例子。你能建议我在哪里可以看吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:31:34.527

```
public class SelectFilterActivity extends Activity implements OnClickListener
{
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;
View.OnTouchListener gestureListener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* ... */

    // Gesture detection
    gestureDetector = new GestureDetector(new MyGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }

} 
```

# iphone - 应用程序的iTunes文件共享卡在两者之间

> ID：10362683
> 
> 赞同：0
> 
> 时间：2012-04-28T10:28:15.383
> 
> 标签：iphone, ios, ipad, itunes, file-sharing

最近我开发了启用文件共享的 iPad 应用程序。这是一个显示具有其他选项的照片的应用程序。

照片将从 Windows XP 传输，范围在 7000 到 10000 之间，总大小可能高达 3-4 GB。我只是想实现它，当传输过程中几乎没有 600-700 个文件时，iTunes 会卡在两者之间，出现未知错误。它在两者之间随机卡住并崩溃。

我曾尝试在另一台计算机上安装 iTunes 并在那里复制图像，但结果相同。卡在未知错误和 iTunes 关闭之间。

我想知道这里发生了什么。iTunes 对应用程序的文件共享是否有限制？我必须更改我的应用程序中的某些内容吗？应用程序可以使用的大小有限制吗？Ipad 是新带来的，有 60 GB 的内存。

请提供任何指导或可能导致崩溃的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:48:44.500

应用程序大小最大为 2GB，[但沙盒的大小没有限制](https://stackoverflow.com/a/2953427/251513)。

# sql-server - 我需要将我的软件与数据库一起部署在其他机器上

> ID：10362686
> 
> 赞同：2
> 
> 时间：2012-04-28T10:28:44.087
> 
> 标签：sql-server, database-connection

我创建了一个电影票预订系统，我需要将它部署在其他机器上。我正面临数据库的问题。当我在另一台机器上部署我的软件时，它已安装，但由于没有 SQL 服务器，它无法工作。所以，我在那里安装了 SQL Server。但它仍然向我展示了我提供的服务器名称参数的问题`SqlConnection`。我在那里进行了更改。现在我再次面临数据绑定的问题。

我不得不一次又一次地改变一切。有什么简单有效的解决方案吗？

帮助我实现以下目标：

*   在我部署项目时提供数据库和项目。

*   如果我将我的数据库附加到其他机器上，我想使用我现有的数据绑定。

*   我不想为我建立的每个连接一次又一次地更改数据库服务器名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:16:52.990

*   在我部署项目时提供数据库和项目。

很难“一键式”安装数据库和 GUI。但是您可以使用版本控制或时间戳记部署项目以将类似项目保持在一起。源代码控制这些项目能够回滚并按需提供您需要的版本。有一些方法可以将版本号或时间戳与 GUI 组件联系在一起，以将部署关联为一个单元。

例如，您可以对更改数据库脚本（FooTable v100、v101、v102）进行版本控制或为它们添加时间戳，然后将它们签入源代码控制。将各种关联存储在某种类型的配置数据库中。在我的工作中，我们使用 SharePoint 列表来逐项列出部署，并使用 SharePoint 列表项引用来同时引用特定更改的所有不同项。由于所有内容都受源控制，因此如果需要，我可以轻松找出并检索特定更改的部署项。

*   如果我将我的数据库附加到其他机器上，我想使用我现有的
    数据绑定。

*   我不想为我建立的每个连接一次又一次地更改数据库服务器名称。

您可以使用使用受信任连接的连接字符串，例如

数据源=myServerAddress；初始目录=myDataBase；集成安全=SSPI；

所以你不需要为每个环境嵌入不同的用户名和密码。您可以将服务器和数据库名称存储在每个相应环境服务器上的 machine.config 或 web.config 中。

所以在开发上， ConnectionString 可能是

数据源=myDevServer；初始目录=myDevDataBase；集成安全=SSPI；

测试中：

数据源=myTestServer；初始目录=myTestDataBase；集成安全=SSPI；

如果将它们存储在服务器上的配置文件中，则无需在包中进行更改。

如果您确实需要将该配置与包一起存储，您应该使用技术根据您要部署到的环境动态更改设置。例如，您可以使用环境变量来确定您所在的环境，以便您知道要运行哪些代码来动态更改配置。或者代替代码，您可以使用 XSLT 来更改 XML 配置。您还可以在 MSI 中设置自定义操作以在安装/卸载时运行。您可以在此处添加代码以在部署时根据需要更改配置。

同样，数据库脚本本身可以根据您部署的环境而改变。您可以使用 SQLCMD 变量动态更改 SQL 代码（特别是在 3 和 4 部分命名引用中的数据库和服务器名称，即 devlinkserver.devdb.dbo.foo 如果替换 devlinkserver 和 devdb 可以更改为 testlnkserver.testdb.dbo.foo带有 SQLCML 变量）。根据您要部署到的环境，使用 SQLCMDs 脚本根据需要更改变量值：

IF @@SERVER = 'somedevdbserver'

SET :linkserver = 'DevDBServer'

IF @@SERVER = 'sometestserver'

SET :linkserver = 'testDBServer'

ETC...

总之，在所有环境中保持尽可能多的配置相同。使用上述各种技术根据需要为每个环境中需要不同的部分动态更改配置。

# windows-8 - Windows 8 如何将应用程序磁贴和辅助磁贴与应用程序联系起来？

> ID：10362696
> 
> 赞同：0
> 
> 时间：2012-04-28T10:30:31.597
> 
> 标签：windows-8, windows-runtime

当您单击应用程序磁贴或辅助磁贴时，Windows 8 如何知道要启动哪个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:48:01.443

你的问题真正问的是什么？

如果您问操作系统如何知道哪个磁贴与父应用程序的辅助磁贴相关联，我的猜测是`appID`每个磁贴都有某种相关的东西。每个辅助磁贴都作为开始菜单上的“快捷方式”，因此您可以使用一些特殊参数启动应用程序。启动应用程序时要传递给应用程序的特殊参数在方法中指定为`argument`创建磁贴时的第四个参数（称为 ）。

```
var secondaryTile = new Windows.UI.StartScreen.SecondaryTile(tileId, shortName, displayName, arguments, tileOptions, logoReference); 
```

参考：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701602.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701602.aspx)

但在幕后，我不知道微软如何在他们的 API 中实现它。

如果您问如何`Secondary Tile`在 Metro Style App 中实现。此[链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh465372.aspx)可能会有所帮助。

# node.js - 使用 jsdom 获取当前浏览器 DOM？

> ID：10362697
> 
> 赞同：0
> 
> 时间：2012-04-28T10:30:39.330
> 
> 标签：node.js, dom, jsdom

是否可以使用 jsdom 获取网站的更改/实时 DOM？

例如：

**客户**

在我的`test.html`文件中，我有一个按钮，它附加了新`<div class="p">`元素：

```
$('#button').click(function(){
 $('body').append('<div class="p">new</div>');
}); 
```

然后我有另一个按钮调用服务器上的函数（使用 NowJS 或 Socket.IO）。

* * *

**服务器**

现在，在我的`server.js`文件中，我想计算所有附加的`div`元素`class="p"`：

```
everyone.now.countDiv = function() {
    var jquery = fs.readFileSync("./jquery16.js").toString();

    jsdom.env(
      {
        html: 'http://localhost:8080/test.html',
        src: [
          jquery
      ],
      done: function(errors, window) {
        var $ = window.$;
        var len = window.$('.p').length;
        console.log("Divs: ", len);
      }
    });
} 
```

我知道我可以计算客户端的元素并将其传递给服务器。但如果 jsdom 可以访问“新/当前”DOM，我很感兴趣。

我假设 jsdom 读取 DOM `text.html`，但无法访问网站的实时 DOM！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:22:41.360

即使 jsdom 允许您修改模板的 DOM，它仍然保留在服务器端。

服务器端与客户端 DOM 或所谓的“实时 DOM”无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T13:12:02.373

您可能想看看 NowJS - [http://nowjs.com/](http://nowjs.com/)和 Socket.io - [http://socket.io/](http://socket.io/)（包含在 NowJS 中）。

NowJS 将允许您从服务器到客户端共享函数和数据，反之亦然。

# java - 如何在java中从url访问#分隔参数

> ID：10362698
> 
> 赞同：2
> 
> 时间：2012-04-28T10:31:03.137
> 
> 标签：java, url, servlets

```
https://apps.facebook.com/atri-apps/next.jsp#access_token=AAADDZAgrM9vcBAA 
```

我想`access_token`从 url 访问参数，但我做不到。我正在使用`.getQueryString .getParameterValue()`servlet 的请求对象的方法。但他们没有工作，因为他们不是'？后签名`next.jsp`。

谁能帮我获取`access_token`参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T10:35:21.217

`#`表示 URL 锚点，而不是查询参数，它们不会添加到查询字符串中。结果，它们不会被发送到服务器，它们只停留在客户端上。您的 servlet 无法访问它们。

如果您需要服务器读取它们，则需要使用查询字符串参数，例如

```
https://apps.facebook.com/atri-apps/next.jsp?access_token=AAADDZAgrM9vcBAA 
```

注意，`?`而不是`#`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:00:27.363

要添加上面@skaffman 所说的内容，您可以通过客户端 JavaScript 访问锚信息：

```
 var hash = location.hash; 
```

您可以使用它的方式是通过一种与服务器的异步通信（请参阅 AJAX）。

# matrix - OpenCL 中的复矩阵求逆

> ID：10362702
> 
> 赞同：2
> 
> 时间：2012-04-28T10:31:20.330
> 
> 标签：matrix, opencl, inversion

有没有办法用openCL反转一个复杂的矩阵？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-28T13:56:09.843

据我所知，还没有图书馆可以做到这一点。不过，MAGMA 和 ViennaCL 似乎都有望实现这一目标。也许 CULA 也会推出 OpenCL 版本……

# php - SQL 服务器选择具有相同最后操作的行列表

> ID：10362705
> 
> 赞同：2
> 
> 时间：2012-04-28T10:31:44.600
> 
> 标签：php, sql-server

我有表：

```
id | uid | action
-----------------
 1 |  1  |   2
 2 |  3  |   1
 3 |  2  |   2
 4 |  3  |   2
 5 |  1  |   1 
```

如何选择带有最后一个操作的 uid，例如 1？在这种情况下，只有最后一行。

**更新：**正如你所看到的 uid=3 首先我们有 action=1，然后 action=2 它意味着 uid=3 对我们来说不是“好”行。但是对于 uid=1，最后一个动作是 1，所以“好”行。

**UPDATE2**：action=1 是进入，action=2 是退出。最后，我需要获取现在正在构建的用户列表，或者至少是每个用户的最后操作列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:45:34.967

**编辑：**我在答案的末尾添加了一些解释。

```
DECLARE @Test TABLE(
    id INT, 
    [uid] INT, 
    [action] INT
);

INSERT  @Test(id , [uid] , [action])
SELECT  1 ,  1  ,   2
UNION ALL
SELECT  2 ,  3  ,   1
UNION ALL
SELECT  3 ,  2  ,   2
UNION ALL
SELECT  4 ,  3  ,   2
UNION ALL
SELECT  5 ,  1  ,   1;

DECLARE @last_action INT;
SET     @last_action = 1; --or = 2
SELECT  x.uid
FROM
(
SELECT  t.uid, 
        t.action,
        ROW_NUMBER() OVER(PARTITION BY t.[uid] ORDER BY t.id DESC) AS RowNum
FROM    @Test t
) x
WHERE   x.RowNum = 1
AND     x.action = @last_action 
```

结果：

```
uid         
----------- 
1 
```

**说明：** 从派生表查询`(...) x`将产生以下结果：

```
id uid action RowNum
-- --- ------ ------
5  1   1      1 <-- last action (1) for uid = 1
1  1   2      2
-- --- ------ ------
3  2   2      1 <-- last action (2) for uid = 2
-- --- ------ ------
4  3   2      1 <-- last action (2) for uid = 3
2  3   1      2
-- --- ------ ------ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:43:38.153

要获取表中的最后一行，您可以按 id 排序（看起来它每次都在增加一行）。然后，您可以使用 TOP 1 过滤每个查询的 1 行。

```
SELECT TOP 1 * FROM Table
WHERE action = 1
ORDER BY id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:01:10.550

SQLServer 方言，一种方式（多种方式）... - 假设列 id 定义顺序...升序... - 假设 id 是唯一的，至少对于每个 uid

```
select uid
from (
    select uid, max(id) as lastid
    from t
    group by uid
) l
join t on t.uid = l.uid and t.id = l.lastid
where t.action = 1 
```

其他方式...

```
select uid
from t
where id in (select max(id) from t t2 where t2.uid = t.uid)
    and t.action = 1 
```

# iphone - 不太清楚如何将 TBXML url 数据添加到我的表格视图中

> ID：10362708
> 
> 赞同：0
> 
> 时间：2012-04-28T10:32:13.133
> 
> 标签：iphone, ios, nsmutablearray, traversal, tbxml

嗨，过去两天我到处找，找不到任何适合我的东西。我设法从 url 中提取数据，并在我的日志中显示每个元素和值。

我无法弄清楚的步骤是如何将它添加到我的“事件”数组中，而无需手动搜索每个字符串，因为它会自动为我执行此操作（如我的日志中所示）。

这是我的 loadUrl 方法：

```
- (void)loadURL {

// Create a success block to be called when the asyn request completes
TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
    NSLog(@"PROCESSING ASYNC CALLBACK");

    // If TBXML found a root node, process element and iterate all children
    if (tbxmlDocument.rootXMLElement)
        [self traverseElement:tbxmlDocument.rootXMLElement];

};

// Create a failure block that gets called if something goes wrong
TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
    NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
};

// Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:@"http://somexml.com/xml"] 
                           success:successBlock 
                           failure:failureBlock]; 

    events = [NSMutableArray array]; } 
```

这是我的 traverseElement 方法：

```
- (void) traverseElement:(TBXMLElement *)element {

do {
    // Display the name of the element
    NSLog(@"%@",[TBXML elementName:element]);

    // iterate all child elements of tbxml.rootXMLElement that are named "author"
    [TBXML iterateAttributesOfElement:element withBlock:^(TBXMLAttribute *attribute, NSString *name, NSString *value) {

        // Display name and value of attribute to the log window
        NSLog(@"%@->%@ = %@",[TBXML elementName:element], name, value);

    }];

    // if the element has child elements, process them
    if (element->firstChild) [self traverseElement:element->firstChild];

    // Obtain next sibling element
} while ((element = element->nextSibling));  

} 
```

这是我要引入的 xml：

```
<resultsPage totalEntries="6" perPage="50" page="1" status="ok">
<results>
<event uri="http://somexml.com/xml" popularity="0.863682" displayName="Radio 1's Hackney 
Weekend 2012" id="9234656" type="Festival" status="ok">
<location city="London, UK" lng="-0.128" lat="51.5078"/>
<series displayName="Radio 1's Hackney Weekend"/>
<end time="" date="2012-06-24" datetime=""/>
<start time="" date="2012-06-23" datetime=""/>
<performance displayName="Lucy Labeaux" billingIndex="5" id="23336188" billing="headline">
<artist uri="http://www.somexml.com/artistxml" displayName="Lucy Labeaux" id="1168415">
<identifier href="http://somexml.com.xml" mbid="4593d49a-7f67-46ba-9ec0-126bd676286f"/>
</artist>
</performance> 
```

我的日志如下所示：

```
PROCESSING ASYNC CALLBACK
 resultsPage
 resultsPage->totalEntries = 6
 resultsPage->perPage = 50
 resultsPage->page = 1
 resultsPage->status = ok
 results
 event
 event->uri = http://example.com
 event->popularity = 0.863682
 event->displayName = Cooled Up Week 2012
 event->id = 9234656
 event->type = Festival
 event->status = ok
 location
 location->city = London, UK
 location->lng = -0.128
 location->lat = 51.5078
 series
 series->displayName = Cooled Up Week 2012
 end
 end->time = 
 end->date = 2012-06-24
 end->datetime = 
 start
 start->time = 
 start->date = 2012-06-23
 start->datetime = 
 performance
 performance->displayName = Lucy Labeaux
 performance->billingIndex = 1 
```

所以现在我已经浏览了所有元素、属性等，如何将它链接到我的表格视图和行数？我想放弃，请帮助！我真的很感谢你的时间非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:47:54.437

Sudo rm -rf 反应最好

> 那你为什么不试试呢？自从我使用 TBXML 以来已经有一段时间了。从那时起，我开始直接使用 libxml2（通过 Cocoa 包装器），因此我可以使用 X-path 直接选择我想要的内容，而无需循环。作为替代方案，您应该尝试这个解析库；我听说过它的简单性。github.com/ZaBlanc/RaptureXML 很抱歉，我目前没有时间为此编写测试用例。

# facebook - 将 FB 应用程序安装限制为我网站的高级帐户

> ID：10362715
> 
> 赞同：0
> 
> 时间：2012-04-28T10:33:15.980
> 
> 标签：facebook

我正在开发一个 FB 应用程序，我希望我的网站（高级版）的某些用户可以访问并安装在他们公司的 FB 品牌页面上。

我需要实现的目标类似于 Getsatisfaction 和 Uservoice 对他们的应用程序所做的事情，只有高级帐户才能在他们的仪表板中看到，你介意怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:40:00.497

当用户购买您的应用程序时，您需要让他访问他的页面，然后将它们保存到帮助表中。

之后，您会将它们发送到安装对话框。

您的页面选项卡索引需要有一个路障，您可以在其中检查是否允许访问应用程序的页面（您可以通过 signed_request 获得）（如果它在帮助表中），否则您会阻止应用程序。

我说清楚了吗？

有什么让我知道。

# php - 在 json_decode 之后选择特定数据以显示在 Facebook 相册中的网页上的正确方法

> ID：10362717
> 
> 赞同：0
> 
> 时间：2012-04-28T10:33:22.180
> 
> 标签：php, facebook-graph-api, json, facebook-javascript-sdk

我相信我可能会以错误的方式或艰难的方式来解决这个问题。在过去的 +24 小时里，我一直在阅读帖子并尝试获得我想要的结果。我从这里的不同问题中获取了不同的代码片段，直到我终于得到了一些有用的东西。我什至读过关于数组与对象的文章，但仍然对我应该走的路线感到困惑。

我认为我目前正在使用 JS-SDK。（我安装了 Simple-Facebook-Connect wordpress 插件）但我不确定这是否是我能够做我正在做的事情的原因。

说到重点，我想在我的网站上显示来自 Facebook“页面”的专辑。我能够通过以下方式获取所有正确的数据：

```
<?php

$fbc_jsonurl  = "https://graph.facebook.com/(My_Page_ID)/albums";
$fbc_user = json_decode(file_get_contents($fbc_jsonurl));
//$fbc_user = json_decode(file_get_contents($fbc_jsonurl),true); Was experimenting with the "true" statment since some people were using it but then none of my code worked right
print_r($fbc_user);

?> 
```

上面的代码能够抓取所有数据并将其打印到屏幕上。

所以我继续使用下面的代码，这段代码基本上抓取了**所有**专辑的名称，只将专辑名称打印到屏幕上，没有其他信息：

```
foreach($fbc_user->data as $fbc_testing) {
    $fbc_albums[] = $fbc_testing->name;
}
print_r($fbc_albums); 
```

所以我尝试并尝试更进一步并使用以下代码：

```
foreach($fbc_user->data as $fbc_testing) {
    $fbc_albums[0] = $fbc_testing->name;
    $fbc_albums[1] = $fbc_testing->link;

}
print_r($fbc_albums); 
```

此代码显示专辑标题和该专辑的正确链接。问题是，这一次它只显示了 1 个列表而不是所有列表。

我首先要做的是创建一个 HTML 有序列表，其中显示专辑标题、专辑链接、专辑描述、专辑封面图片以及专辑中有多少张图片。不需要漂亮，因为我可以使用 CSS 来修复它。

也会很棒，但对于这里的这个问题可能太多了，但是如果：

1.  我可以选择要显示的专辑数量。
2.  不要显示相册，除非它有最少数量的图像。
3.  分页
4.  单击相册会将您带到我网站上的另一个页面，该页面显示该相册中的图像。

我已经阅读了 FQL，但老实说，要获得上面的内容非常困难，而且我仍然对其中一些有效的原因感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:03:32.247

在您的示例中，问题在于您只在 foreach 循环中编写显示数组的第一个和第二个 (0,1) 元素。

您在这里有许多不同的选择。您可以创建某种 FacebookAlbum 类来存储所有数据，您可以像现在一样简单地将数据放入一个数组中，或者您可以*将数据留在 facebook 返回的对象中*。

如果您只想获取每个专辑的名称和链接，请修改您的代码，如下所示：

```
foreach($fbc_user->data as $fbc_testing) {
    $fbc_albums[] = Array("name" => $fbc_testing->name, "link" => $fbc_testing->link);
}
print_r($fbc_albums); 
```

显然，您正在寻找更复杂的解决方案。这是一个示例，您可以采取一些措施来涵盖前几点。

```
<?php

function displayAlbums($albums, $numberToShow, $minPhotos) {
    $count = 0;
    foreach ($albums->data as $a) {
        if ($count > $numberToShow)
            return;
        if ($a->count > $minPhotos) {
            //Print out your html.
            //Album name is $a->name, link is $a->link etc

            $count++;
        }
    }
}

$fbc_jsonurl  = "https://graph.facebook.com/(My_Page_ID)/albums";
$fbc_user = json_decode(file_get_contents($fbc_jsonurl));
displayAlbums($fbc_user,10,20); // Show the first 10 albums with at least 20 photos.
?> 
```

显然，在这样的解决方案中，您只会输出 Facebook 订购的“前”10 张专辑，因此除非您可以在 Facebook Graph 查询中指定顺序，否则您可能不会总是得到您想要的结果。

# clojure - Clojure 函数中的移动参数

> ID：10362740
> 
> 赞同：4
> 
> 时间：2012-04-28T10:37:13.490
> 
> 标签：clojure

我正在处理[4clojure](http://www.4clojure.com)问题 29：[“获取 Caps”](http://www.4clojure.com/problem/29)

```
(= (__ "HeLlO, WoRlD!") "HLOWRD") 
```

我在 REPL 中写了一个解决方案：

```
user=> (apply str (filter (fn [foo] (some #(= % foo) 
         (map char (range 65 91)))) "AbC"))
"AC" 
```

但正如您所见，我的参数“AbC”嵌套了两个括号。我如何将我的参数移到外部，以便在 4clojure 测试中使用它？我是否以错误的方式解决问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:39:19.090

您不需要将 a 参数移到外部，您可以使用与创建过滤函数相同的技术，即`fn`：

```
(fn [string] 
  (apply str 
    (filter 
      (fn [foo] (some #(= % foo) (map char (range 65 91)))) 
      string))) 
```

例如，以下两个语句是相同的：

```
(+ 1 2 3)
((fn [n] (+ 1 2 n)) 3) 
```

但是，要实际回答您的问题，您可以使用[`comp`](http://clojuredocs.org/clojure_core/clojure.core/comp)("compose") 并[`partial`](http://clojuredocs.org/clojure_core/clojure.core/partial)移动参数以允许[eta 转换](http://www.haskell.org/haskellwiki/Eta_conversion)（这是您尝试执行的操作的最后一部分的技术名称）：

```
(comp (partial apply str)
      (partial filter (fn [foo] (some #(= % foo) 
                                       (map char (range 65 91)))))) 
```

这个表达式现在是一个函数，它接受一个字符串，过滤大写字母，然后将其转换回一个字符串（注意`comp`从右到左应用函数）。

（注意，最后一个表达式可能不是很惯用的 Clojure；第一种方法或其他人的建议更好。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:36:27.070

您应该传递一个函数作为解决方案。就像是：

```
(fn [text] 
    (apply str (filter (fn [foo] (some #(= % foo) 
                                        (map char (range 65 91)))) 
                       text))) 
```

您也可以使用[Character.isUpperCase](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isUpperCase%28char%29)过滤所有大写字符：`(filter (fn [ch] (Character/isUpperCase ch) text)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T11:39:43.900

我不熟悉 4Clojure，但如果允许，您可以使用`clojure.string/replace`.

以下应该可以解决问题：

```
(fn [s] (clojure.string/replace s #"[^A-Z]" "")) 
```

不在 A 到 Z 范围内的所有内容都将替换为空字符串。

# php - 使用 MVC 将 php 表单数据插入 mysql 数据库时出错

> ID：10362741
> 
> 赞同：1
> 
> 时间：2012-04-28T10:37:14.953
> 
> 标签：php, opencart

嗨，我下载了 opencart 版本 1.5.2.1...现在我正在使用 opencart 流程开发 API。我使用 tpl、控制器、语言文件开发了表单。我也写了模型。当我输入应该加载到数据库中的表单数据时，确切的概念是什么……但它显示一个错误，说模型中未定义的索引。如何在控制器中获取表单数据以及如何传递该数据到模型...请帮助我。

这是我的控制器文件：

```
 <?php
  class ControllerSaleAd extends Controller {
private $error = array();

 public function index() {

    $this->load->language('sale/ad');

    $this->document->setTitle($this->language->get('heading_title'));

    $this->load->model('sale/ad');
$this->data['heading_title']=$this->language->get('heading_title');
$this->data['entry_customer_name'] = $this->language->get('entry_customer_name');
$this->data['column_name']=$this->language->get('column_name');
$this->data['column_place'] = $this->language->get('column_place');
$this->data['column_date'] = $this->language->get('column_date');

$this->data['column_units'] = $this->language->get('column_units');
$this->data['column_price'] = $this->language->get('column_price');
$this->data['button_insert'] = $this->language->get('button_insert');

$this->data['breadcrumbs'] = array();

$this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_home'),
            'href'      => $this->url->link('sale/ad', 'token=' . $this->session->data['token'], 'SSL'),
            'separator' => false
);

$url='';
$this->data['action'] = $this->url->link('sale/ad', 'token=' . $this->session->data['token'] . $url, 'SSL');

$this->template='sale/ad.tpl';
$this->children = array(
            'common/header',
            'common/footer'
);

$this->response->setOutput($this->render());

$this->insert();
/*$this->load->model('sale/ad');

$this->data['orders']= array();
$data=array(
'customer'  => $customer,
'adtype'    => $adtype,
'adplace'   => $adplace,
'date'      => $date,
'units'     => $units,
'price'     => $price,
);

$results = $this->model_sale_ad->insert($data);

$this->redirect($this->url->link('sale/ad', 'token=' . $this->session->data['token'] . $url, 'SSL'));*/
}

public function insert() {
    echo("inserting data");

    $this->load->model('sale/ad');

    if (($this->request->server['REQUEST_METHOD'] == 'POST')) {

        echo("hello");
        echo($this->request->post);
        echo($this->model_sale_ad->insert);
        $this->model_sale_ad->insert($this->request->post);

        echo("in if method");

        /*$url = '';

        if (isset($this->request->get['customer'])) {
            $url .= '&customer=' . $this->request->get['customer'];
        }

        if (isset($this->request->get['adtype'])) {
            $url .= '&adtype=' . $this->request->get['adtype'];
        }

        if (isset($this->request->get['adplace'])) {
            $url .= '&adplace=' . $this->request->get['adplace'];
        }

        if (isset($this->request->get['date'])) {
            $url .= '&date=' . $this->request->get['date'];
        }

        if (isset($this->request->get['units'])) {
            $url .= '&units=' . $this->request->get['units'];
        }

        if (isset($this->request->get['price'])) {
            $url .= '&price=' . $this->request->get['price'];
        }

            $customer= $this->request->get[$entry_customer_name];
            echo($customer);
        $data=array(
        'customer'  => $customer,
        'adtype'    => $adtype,
        'adplace'   => $adplace,
        'date'      => $date,
        'units'     => $units,
        'price'     => $price,

        );

        $results = $this->model_sale_ad->insert($data);*/

        $this->redirect($this->url->link('sale/ad', 'token=' . $this->session->data['token'] . $url, 'SSL'));
    }

}

}

  ?> 
```

这是我的模型：

```
 <?php

   class ModelSaleAd extends Model{

public function insert($data)
{
    $this->db->query("INSERT INTO " . DB_PREFIX . "ad SET customer = '"
    .$this->db->escape($data['customer']) . "',adtype = '" .$this->db->escape($data['adtype']) . "',adplace = '" . $this->db->escape($data['adplace']) ."',date = NOW()'" . "',units = '".(int)$data['units'] ."',price = '".(int)$data['price']."')");

}
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:43:30.310

尝试查看 中的`$data['customer']`类型变量`public function insert`，例如`var_dump($data)`. 可能很简单，您从数组中丢失了一个变量，并且在生成 sql 时它丢失了。

# apache - Apache 在文件匹配条件上放气

> ID：10362742
> 
> 赞同：1
> 
> 时间：2012-04-28T10:37:15.460
> 
> 标签：apache, mod-rewrite, mod-deflate

我正在尝试根据`FilesMatch`条件对文件进行放气，我尝试了这个，但它没有放气：

```
<FilesMatch \.js$>
SetOutputFilter Deflate
RewriteEngine on
RewriteRule /js/(.*.js) /pack.php?f=$1
</FilesMatch> 
```

重写规则工作正常。

此外，按预期设置`SetOutputFilter Deflate`外部`FilesMatch`作品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:24:14.850

当 apache 重写规则时，它会重新处理某些配置（例如`<Directory>`, `<DirectoryMatch>`, `<Files>`, `<FilesMatch>`）以匹配“重写”的 URL。这似乎是你的问题。

将您的规则分成两`<FilesMatch>`部分，一个用于`.js$`文件，另一个用于`/pack.php`. 或者更好的是，将重写规则移到`<FilesMatch>`部分之外并使用单个`<Files pack.php>`部分。

# android - 未在 Sqlite 中创建表

> ID：10362743
> 
> 赞同：1
> 
> 时间：2012-04-28T10:37:16.377
> 
> 标签：android, sqlite

我在我现有的数据库中创建了一个名为“exercise”的新表，另外两个表 food 和 users 是正常创建的，但是在使用 SqliteDatabase Browser 时我看不到表练习。我已经升级了我的数据库的版本并确保 create_table 以正确的方式完成，但是没有，你能帮我找出为什么没有创建该表吗？

```
public class DatabaseAdapter {

public static final String COLUMN_ID = "ID";
public static final String COLUMN_NAME = "Name";
public static final String COLUMN_AGE = "Age";
public static final String COLUMN_GENDER = "Gender";
public static final String COLUMN_WEIGHT = "Weight";
public static final String COLUMN_HEIGHT = "Height";
public static final String COLUMN_ACTIVITY = "Activitylevel";
public static final String COLUMN_CALORIES = "numCal";
public static final String FOOD_ID = "food_ID";
public static final String FOOD_NAME = "food_name";
public static final String FOOD_CALS = "food_cals";
public static final String FOOD_FAT = "food_fat";
public static final String FOOD_PRO = "food_protein";
public static final String FOOD_CRAB = "food_crabs";
public static final String EXERCISE_NAME = "exercise_name";
public static final String EXERCISE_CALS = "exercise_cals";
public static final String EXERCISE_ID = "exercise_ID";

public static final String TABLE_USERS = "users";
public static final String TABLE_FOOD = "food";
public static final String TABLE_EXERCISE = "exercise";
private static final int DATABASE_VERSION = 10;
private static final String DATABASE_NAME = "nutriwellness.db";

private static final String CREATE_TABLE_USERS = "create table users( id integer primary key autoincrement, "
        + "Name text, Age integer, Gender text, Weight text, Height text, Activitylevel text, numCal float );";

private static final String CREATE_TABLE_FOOD = "create table food( food_ID integer primary key,"
        + "food_name text,food_cals real, food_fat real, food_protein real, food_crabs real );";

private static final String CREATE_TABLE_EXERCISE = "create table exercise( exercise_ID integer primary key,"
        + "exercise_name text,exercise_cals real );";

private SQLiteDatabase database;
private DatabaseHelper dbHelper;

private String[] allColumnsofuserstable = { COLUMN_ID, COLUMN_NAME,
        COLUMN_AGE, COLUMN_GENDER, COLUMN_WEIGHT, COLUMN_HEIGHT,
        COLUMN_CALORIES };

private String[] allColumnoffoodtable = { FOOD_ID, FOOD_NAME, FOOD_FAT,
        FOOD_PRO, FOOD_CRAB };
private String[] allColumnofexercisetable = { EXERCISE_ID, EXERCISE_NAME,
        EXERCISE_CALS };

public DatabaseAdapter(Context context) {

    dbHelper = new DatabaseHelper(context);
}

public static class DatabaseHelper extends SQLiteOpenHelper {

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 12);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            db.execSQL(CREATE_TABLE_USERS);
            db.execSQL(CREATE_TABLE_FOOD);
            db.execSQL(CREATE_TABLE_EXERCISE);
        } catch (SQLException e) {

            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(DatabaseHelper.class.getName(),
                "Upgrading database from version " + oldVersion
                        + "to version " + newVersion);

        db.execSQL("DROP TABLE IF EXISTS users");
        db.execSQL("DROP TABLE IF EXISTS food");
        db.execSQL("DROP_TABLE IF EXISTS exercise");

        onCreate(db);

    }

}

public DatabaseAdapter open() throws SQLException {
    database = dbHelper.getWritableDatabase();
    return this;
}

public void close() {
    dbHelper.close();
}

// create a user
public long createUser(String name, String age, String gender,
        String weight, String height, String level, float calnum) {

    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);

    return database.insert(TABLE_USERS, COLUMN_ID, values);
}

// delete a user by ID
public boolean deleteUser(long rowId) {
    return database.delete(TABLE_USERS, COLUMN_ID + "=" + rowId, null) > 0;
}

// retrieve a list of all users
public Cursor getAllUsers() {
    return database.query(TABLE_USERS, allColumnsofuserstable, null, null,
            null, null, null);

}

// retrieve a particular user
public Cursor getUser(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_USERS,
            allColumnsofuserstable, COLUMN_ID + "=" + rowId, null, null,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// update a user
public boolean updateUser(long rowId, String Name, int age, String gender,
        String weight, String height, String level, float calnum) {
    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, Name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);
    return database.update(TABLE_USERS, values, COLUMN_ID + "=" + rowId,
            null) > 0;
}

// FOOD METHODS !

// Create a new food row
public long createFood(String name, double food_cal, double food_fat,
        double food_proteins, double food_carbs) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
    Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database.insert(TABLE_FOOD, FOOD_ID, Fvalues);
}

// delete a Food by ID
public boolean deleteFood(long rowId) {
    return database.delete(TABLE_FOOD, FOOD_ID + "=" + rowId, null) > 0;
}

// retrieve a list of all FOOD
public ArrayList<String> getAllfood() {
    Cursor c = database.query(TABLE_FOOD, allColumnoffoodtable, null, null,
            null, null, null);
    ArrayList<String> food = new ArrayList<String>();

    c.moveToFirst();
    while (!c.isAfterLast()) {
        food.add(c.getString(1));
        c.moveToNext();
    }

    return food;

}

// Retrieve a specific Food

public Cursor getFood(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_FOOD, allColumnoffoodtable,
            FOOD_ID + "=" + rowId, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// Update a food

public boolean updateFood(long rowId, String name, int food_cal,
        int food_fat, int food_proteins, int food_carbs) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
    Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database
            .update(TABLE_FOOD, Fvalues, FOOD_ID + "=" + rowId, null) > 0;
}

// //////////////////////////////// EXERCISE
// TABLE///////////////////////////////////////////////////

public long createExercise(String name, double exercise_cals) {
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(EXERCISE_NAME, name);
    Fvalues.put(EXERCISE_CALS, exercise_cals);

    return database.insert(TABLE_EXERCISE, EXERCISE_ID, Fvalues);
}

public Cursor getExercise(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_EXERCISE,
            allColumnofexercisetable, EXERCISE_ID + "=" + rowId, null,
            null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public ArrayList<String> getAllexercise() {
    Cursor c = database.query(TABLE_EXERCISE, allColumnofexercisetable,
            null, null, null, null, null);
    ArrayList<String> exercise = new ArrayList<String>();

    c.moveToFirst();
    while (!c.isAfterLast()) {
        exercise.add(c.getString(1));
        c.moveToNext();
    }

    return exercise;

}

public boolean deleteexercise(long rowId) {
    return database.delete(TABLE_EXERCISE, EXERCISE_ID + "=" + rowId, null) > 0;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:54:30.343

就目前而言，您的代码可以正常工作（所有表都在我的测试中正确创建）所以我的假设是您的升级代码导致了问题。

可能是因为您已将版本号 12 硬编码到您的 openhelper 中，并且您之前的数据库也是版本 12，因此没有执行升级，并且数据库处于当前状态。

尝试更改版本号（使用您的类常量）并在更改数据库模式时增加版本号。`OnUpgrade`仅当指定版本大于数据库版本时才调用。

IE

```
 public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    } 
```

代替

```
 public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 12);
    } 
```

此外，“DROP_TABLE IF EXISTS 练习”是无效的 SQL。删除下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T13:14:30.980

你的代码看起来对我来说很好，但没什么可提的

您已声明数据库版本

私有静态最终 int DATABASE_VERSION = 10;

并在构造函数中使用 12

```
 public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, 12);
        } 
```

您可能已经更改了 DATABASE_VERSION 的值，但您在构造函数中使用了静态值。

在升级表中，您在最后一个命令中编写了 DROP_TABLE

```
 db.execSQL("DROP TABLE IF EXISTS users");
    db.execSQL("DROP TABLE IF EXISTS food");

// here you have used  DROP_TABLE 

    db.execSQL("DROP_TABLE IF EXISTS exercise"); 
```

您可以做的是，只需卸载该应用程序并再次安装它就会为您工作。

# java - 未捕获的错误：在 JavaScript 中调用 NPObject 方法时出错

> ID：10362745
> 
> 赞同：1
> 
> 时间：2012-04-28T10:37:24.377
> 
> 标签：java, javascript, html, applet

我想使用小程序来更改存储库。为此，我编写了以下代码：

加载本体：

```
package owlapi.loader;

import org.semanticweb.owlapi.apibinding.OWLManager;
import org.semanticweb.owlapi.io.*;
import org.semanticweb.owlapi.model.*;
import org.semanticweb.owlapi.util.DefaultPrefixManager;
import org.semanticweb.owlapi.util.OWLEntityRenamer;

import java.io.File;
import java.util.Collections;
import java.util.List;
import java.util.Map;

public class LoadOntology {
    private static String             ontologyDir   = "./owlapi/loader/featurepool.owl";
    private static OWLOntology        localOntology;
    private static OWLOntologyManager manager;
    private static OWLDataFactory     factory;
    private static PrefixManager      pm            = new DefaultPrefixManager("http://wise.vub.ac.be/Members/lamia/variability/Feature_Assembly/FAM.owl#");

public LoadOntology() {
    manager = OWLManager.createOWLOntologyManager();
    File file = new File(ontologyDir);
    try {
        localOntology = manager.loadOntologyFromOntologyDocument(file);
        System.out.println("Loaded ontology: " + localOntology);
        factory = manager.getOWLDataFactory();
        }   
    catch (UnparsableOntologyException e) {
        System.out.println("Could not parse the ontology: " + e.getMessage());
        Map<OWLParser, OWLParserException> exceptions = e.getExceptions();
        for (OWLParser parser : exceptions.keySet()) {
            System.out.println("Tried to parse the ontology with the " + parser.getClass().getSimpleName() + " parser");
            System.out.println("Failed because: " + exceptions.get(parser).getMessage());
        }
    }
    catch (UnloadableImportException e) {
        System.out.println("Could not load import: " + e.getImportsDeclaration());
        OWLOntologyCreationException cause = e.getOntologyCreationException();
        System.out.println("Reason: " + cause.getMessage());
    }
    catch (OWLOntologyCreationException e) {
        System.out.println("Could not load ontology: " + e.getMessage());
    }   
}

public void addInstance(String Class, String individual) {
    OWLClass owlClass = factory.getOWLClass(Class, pm);
    OWLClass superClass = factory.getOWLThing();
    OWLIndividual instance = factory.getOWLNamedIndividual(individual, pm);

    OWLClassAssertionAxiom classAssertion1 = factory.getOWLClassAssertionAxiom(superClass, instance);
    manager.addAxiom(localOntology, classAssertion1);
    OWLClassAssertionAxiom classAssertion2 = factory.getOWLClassAssertionAxiom(owlClass, instance);
    manager.addAxiom(localOntology, classAssertion2);
    System.out.println("Instance added");
}
} 
```

InJava（在 javascript 中加载的小程序）：

```
public class InJava extends Applet{
private static LoadOntology loadedOntology;

public void addInstance(String Class, String individual) {
    Graphics g = getGraphics();
     g.drawString("Test", 10, 10);
    loadedOntology = new LoadOntology();
    loadedOntology.addInstance(Class, individual);
    }
} 
```

当我加载小程序时，根本没有错误，但是当我尝试调用方法 addInstance 时：

```
<input type="button" value="call Java Applet method" onClick = 'document.owlapi.addInstance("Abstract_Feature", "New_Test")'>
<APPLET CODE="owlapi/InJava.class" NAME="owlapi" HEIGHT=100 WIDTH=100> </APPLET> 
```

浏览器抛出错误`Uncaught Error: Error calling method on NPObject.`在stackoverflow上阅读了一些关于这个的问题后，我得出的结论是插件一定有问题。

我在有效的方法（drawString("Test", 10, 10)) 中添加了一些测试代码，所以我建议 LoadOntology 类的构造会产生一些问题（这个类在其自身完美的作品中单独进行了测试）。有人看到我做错了吗？

*更新：*我添加了小程序使用的 java 类的一部分：存储库加载器。所有提供的代码都应该编译。

*更新：*我没有使用`MASCRIPT/SCRIPTABLE`，因为代码基于[this](http://www.rgagnon.com/javadetails/java-0170.html) example，它适用于我当前的浏览器（chrome）

*udpate：*您必须将 owlapi jar 包含到构建路径中，可以在[此处下载](http://owlapi.sourceforge.net/download.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:27:53.937

根据我知道的片段，我建议尝试这个 HTML。

```
<html>
<body>
<APPLET 
    CODE="owlapi.InJava" 
    NAME="owlapi" 
    archive="owlapi/owl1.jar,owlapi/owl2.jar"
    HEIGHT=100 
    WIDTH=100> 
</APPLET>  
</body>
</html> 
```

这个 HTML “静态”嵌入了一个小程序——不使用 JavaScript。类名（`code`属性）应该是类的完全限定名，而不是文件名。虽然后者通常是可以容忍的，但它是不正确的。它显示了如何从`owlapi`目录中导入 API，根据需要更改名称。

同样值得关注的是混合松散的类文件和罐子。这往往会使开发人员和 JRE 感到困惑。相反，如果将`owlapi.InJava`类放在里面`my.jar`，并且那个 Jar 放在与其余目录相同的目录中，则`codebase`可以添加 a 并使`archive`路径更短。像这样：

```
<html>
<body>
<APPLET 
    CODE="owlapi.InJava" 
    NAME="owlapi" 
    codebase="owlapi"
    archive="my.jar,owl1.jar,owl2.jar"
    HEIGHT=100 
    WIDTH=100> 
</APPLET>  
</body>
</html> 
```

这不是有效的 HTML。这只是检查基础知识的测试。稍后，您需要使其成为有效的 HTML 并（可能）使用小程序信息`deployJava.js`中提到的小程序部署小[程序。页](https://stackoverflow.com/tags/java-web-start/info)。

# c - 释放结构中的数组后的 SIGABRT

> ID：10362748
> 
> 赞同：2
> 
> 时间：2012-04-28T10:38:19.780
> 
> 标签：c, memory, struct, free, sigabrt

我有一个函数，它返回一个结构数组，如下所示：

```
my_struct * testFunction(int pSize, int pW_size) {
   struct my_struct* struct_array = (my_struct*) malloc(sizeof(my_struct)*pSize);
   for(int i=0; i<pSize; i++) {
          struct my_struct test;
          test.w_i = (double*) malloc(sizeof(double)*pW_size);
          struct_array[i] = test;
   }
   return struct_array;
} 
```

调用函数并使用数组后，我释放了内存：

```
struct my_struct * T;
T=testFunction(theSize,wSize);
.....
for (int i = 0; i < theSize; i++)
    free(T[i].w_i); // I have a SIGABRT in this line
free(T); 
```

所以我在注释的代码行中有 SIGABRT 。

```
检测到 glibc *** ./exec_main: 双重释放或损坏 (!prev): 0x0000000013f74720 ***
======= 回溯：========= /lib/libc.so.6[0x30004762f6] /lib/libc.so.6(cfree+0x6c)[0x300047ac6c]

```

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:34:00.060

```
my_struct * testFunction(int pSize, int pW_size)
{
   return (my_struct *)malloc((sizeof(my_struct) + sizeof(double) * pW_size) * pSize);
} 
```

# iframe - 如何在 iframe（鼓室）外加载灯箱？

> ID：10362751
> 
> 赞同：1
> 
> 时间：2012-04-28T10:39:11.370
> 
> 标签：iframe, load, lightbox

我有一个包含一组缩略图的 iFrame。当我单击其中一个拇指时，我想使用此灯箱打开它：http: [//tympanus.net/Tutorials/CSS3Lightbox/index2.html#page](http://tympanus.net/Tutorials/CSS3Lightbox/index2.html#page)并将其加载到 iframe 之外。

有可能吗？

非常感谢，卢卡

# groovy - Griffon SwingPad：无法添加标签（groovy.lang.MissingMethodException：没有方法签名：javax.swing.JLabel.call()..）

> ID：10362763
> 
> 赞同：1
> 
> 时间：2012-04-28T10:41:29.387
> 
> 标签：groovy, griffon

我对 groovy/griffon 和使用 SwingPad 应用程序很陌生。

它似乎工作正常，但我无法添加标签。我试过按钮、scrollPane、textArea、panel，所有这些都可以正常工作，但添加标签总是会产生以下异常：

```
groovy.lang.MissingMethodException: No signature of method: javax.swing.JLabel.call() is applicable for argument types: (java.util.LinkedHashMap) values: [[text:label text, constraints:North]]
Possible solutions: wait(), any(), wait(long), add(java.awt.PopupMenu), add(java.awt.Component), each(groovy.lang.Closure) 
```

我在 Mac 上使用最新的 griffon 版本 0.9.5。这是一个非常简单的脚本，它不起作用：

```
panel(id:'main') {
    label(text:'label text')
} 
```

已安装插件的列表（来自 SwingPad 应用程序的 about 对话框）：

```
coverflow
crystalicons
designgridlayout
effects
glazedlists
i18n-support
jexplose
jxlayer
miglayout
riverlayout
silkicons
swing
syntaxtext
transitions
tray-builder
zonelayout 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:05:30.897

我相信 0.9.5 附带的 SwingPad 需要在您尝试运行之前更新一些插件。

请稍后再致电`griffon list-plugin-updates --install`并再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T18:01:48.057

你能试一下吗：

```
panel(id:'main') {
    label('label text')
} 
```

我相信这应该工作......

# google-drive-api - 将 DrEdit Python 示例用于 Google Drive API 时出现错误 500

> ID：10362765
> 
> 赞同：2
> 
> 时间：2012-04-28T10:41:34.037
> 
> 标签：google-drive-api

我尝试将 Python 版本的 DrEdit 放到网上（在 GAE 中）。

现在从 drive.google.com 使用它可以正常工作，但从 .appspot.com 地址访问它会产生：

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~driveedit/1.358524704843584683/main.py", line 282, in get
    drive_state = DriveState.FromRequest(self.request)
  File "/base/data/home/apps/s~driveedit/1.358524704843584683/main.py", line 120, in FromRequest
    return DriveState(request.get('state'))
  File "/base/data/home/apps/s~driveedit/1.358524704843584683/main.py", line 106, in __init__
    state_data = json.loads(state)
  File "/base/python_runtime/python_lib/versions/1/simplejson/__init__.py", line 388, in loads
    return _default_decoder.decode(s)
  File "/base/python_runtime/python_lib/versions/1/simplejson/decoder.py", line 402, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/base/python_runtime/python_lib/versions/1/simplejson/decoder.py", line 420, in raw_decode
    raise JSONDecodeError("No JSON object could be decoded", s, idx)
JSONDecodeError: No JSON object could be decoded: line 1 column 0 (char 0) 
```

当我在 FromRequest 函数中添加“print request.get('state')”时，我得到：

```
Status: 500 Internal Server Error Content-Type: text/html; charset=utf-8 Cache-Control: no-cache Set-Cookie: userid=MTE2MDU1NTY3NjYxNTUzNzA2MTg2|1335608904|67eb86b0a74414014c05c4085832522f16f322f1; expires=Mon, 28 May 2012 10:28:24 GMT; Path=/ Expires: Fri, 01 Jan 1990 00:00:00 GMT Content-Length: 1206 
```

为了解决这个问题，我可以看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:59:11.750

您应该修改 DriveState 来处理这个问题，如下所示：

```
class DriveState(object):
  """Store state provided by Drive."""

  def __init__(self, state):
    """Create a new instance of drive state.

    Parse and load the JSON state parameter.

    Args:
      state: State query parameter as a string.
    """
    if state:
      state_data = json.loads(state)
      self.action = state_data['action']
      self.ids = map(str, state_data.get('ids', []))
    else:
      self.action = 'create'
      self.ids = [] 
```

我将更新示例代码以反映这一点。

编辑：在[http://code.google.com/p/google-drive-sdk-samples/source/detail?r=53dfd57c6044394670ef0c14f1f0bb6652d87b14中更新](http://code.google.com/p/google-drive-sdk-samples/source/detail?r=53dfd57c6044394670ef0c14f1f0bb6652d87b14)

# c# - 如何使用 ffmpeg 进行视频到图像的转换，反之亦然？

> ID：10362766
> 
> 赞同：0
> 
> 时间：2012-04-28T10:41:34.567
> 
> 标签：c#, c, ffmpeg

如何使用 ffmpeg 函数将视频解码为图像，然后再次将图像编码为视频？

我可以为此编写一个程序而不是使用 CLI 吗？

理想情况下，我想使用 ffmpeg dll 并从我的 c# 应用程序中引用所需的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:21:31.303

您可以使用 ffmpeg 从视频中提取图像，并从图像序列中反向生成视频。

您可以使用 ffmpeg 包装器，例如[http://www.mediasoftpro.com/post/18/extracting-frames-from-video-and-re-encoding-image.aspx](http://www.mediasoftpro.com/post/18/extracting-frames-from-video-and-re-encoding-image.aspx)或者可以使用 c#"Process() 类来执行 ffmpeg使用 c# 应用程序在后台执行命令。

# java - 如何将安装在移动设备上的 J2me Midlet 连接到 Java 应用程序？

> ID：10362767
> 
> 赞同：4
> 
> 时间：2012-04-28T10:41:50.540
> 
> 标签：java, java-me, bluetooth, wireless, jsr82

我需要帮助才能使用蓝牙连接将 J2me midlet 程序连接到桌面上的 java 应用程序。

如何配置我的 midlet 应用程序以使用蓝牙连接到桌面应用程序？

设备支持 JSR 82 J2ME 蓝牙 API。这是我的 MIDLet 代码：

```
package client;
//imports
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.io.*;
import java.io.*;

public class client extends MIDlet implements CommandListener {

    //Variable declaration
        String pass,user;
    protected Display display;
    protected Displayable displayable;

        StreamConnection stream = null;
    InputStream in = null;
    OutputStream out = null;
    Thread thread = null;

    Form Login = null;
        protected Form Message = null;
        Form Transaction = null;
        Form Broadcast = null;
    Form Help = null;

    TextField txtMessage = null;
    TextField txtPhone = null;
        TextField txtacc1 = null;
    TextField txtacc2 = null;
    TextField txtsk = null;
    TextField txtamt = null;
        TextField txtbc = null;
        TextField txtuser = null;
    TextField txtpw = null;

        Command TransOk = null;
    Command Back = null;
        Command Ok = null;
        Command SmsOk=null;
    Command SmsDel = null;
        Command BrdCstOk = null;
        Command cmdsel = null;
    Command cmdsel1 = null;
        Ticker ticker = new Ticker("WELCOME CUSTOMER!");
    byte message[] = new byte[200];

    private String login[]={"Login"};
    private String options[] = {"Inbox", "Write Message", "Transaction","Broadcast", "Help"};
    //private String opt[] = { "" };
    private List list = null, inbox = null, list1 = null;

        public void client(){

        }

        public void startApp() {

            display = Display.getDisplay(this);

                //First Screen
                list = new List("Secure SMS", List.IMPLICIT, login, null);
                list.setTicker(ticker);
                cmdsel = new Command("Select", Command.OK, 1);
        list.addCommand(cmdsel);
        list.setCommandListener(this);
                display.setCurrent(list);

               //Login Form
                Login = new Form("login");
        txtuser = new TextField("UserId", "", 10, TextField.NUMERIC);
        txtpw = new TextField("Password", "", 10, TextField.PASSWORD);
        Ok = new Command("Enter", Command.OK, 1);
        Back = new Command("Back", Command.OK, 2);
        Login.append(txtuser);
        Login.append(txtpw);
        Login.addCommand(Ok);
        Login.setCommandListener(this);

              //Options
                list1 = new List("Secure SMS", List.IMPLICIT, options, null);
                list1.setTicker(ticker);
                cmdsel1 = new Command("Select", Command.OK, 1);
        list1.addCommand(cmdsel1);
        list1.setCommandListener(this);

                //To Display Inbox Message
                inbox = new List("Received SMS", List.IMPLICIT);
        inbox.setTicker(ticker);
        inbox.addCommand(Back);
        SmsDel = new Command("Del", Command.OK, 2);
        inbox.addCommand(SmsDel);
        inbox.setCommandListener(this);

                //Write Message Form
                Message = new Form("Write Message");
        txtMessage = new TextField("Message", "", 215, TextField.ANY);
        txtPhone = new TextField("Mobile", "", 10, TextField.NUMERIC);
        SmsOk = new Command("ok", Command.OK, 1);
        Message.setTicker(ticker);
        Message.append(txtMessage);
        Message.append(txtPhone);
        Message.addCommand(SmsOk);
        Message.addCommand(Back);
        Message.setCommandListener(this);

                // TRANSACTION
        Transaction = new Form("Transaction");

        txtacc1 = new TextField("Transfer from A/C", "", 10, TextField.NUMERIC);
        txtacc2 = new TextField("Transfer to A/C", "", 10, TextField.NUMERIC);
        txtsk = new TextField("Trans pw", "", 10, TextField.PASSWORD);
        txtamt = new TextField("Amount", "", 10, TextField.NUMERIC);

        TransOk = new Command("Enter", Command.OK, 1);
        Transaction.append(txtacc1);
        Transaction.append(txtacc2);
        Transaction.append(txtsk);
        Transaction.append(txtamt);
        Transaction.addCommand(TransOk);
        Transaction.addCommand(Back);
        Transaction.setCommandListener(this);

                // BROADCAST

        txtbc = new TextField("MESSAGE", "", 50, TextField.ANY);
        BrdCstOk = new Command("ok", Command.OK, 1);
        Broadcast = new Form("Broadcast");
        Broadcast.append(txtbc);
        Broadcast.addCommand(BrdCstOk);
        Broadcast.addCommand(Back);
        Broadcast.setCommandListener(this);

              // HELP
        Help = new Form("Help");
        Help.append("1.NAVIGATION:\n");
        Help.append("Use up,down arrow keys in the cell or in the key-board for selecting the textboxes/n");
        Help.append("\n");
        Help.append("2.CONTENT TYPING\n");
        Help.append("Either type through cell buttons or by keybord after pressing enter key in the keyboard,press 'save' after typing\n");
        Help.append("\n");
        Help.append("3.INBOX:\n");
        Help.append("Inbox enables you to view your messages\n");
        Help.append("\n");
        Help.append("4.WRITE MESSAGE:\n");
        Help.append("Write message enables you to wrtie the message and send it to th number specified in 'mobile' textbox\n");
        Help.append("\n");
        Help.append("5.TRANSACTION:\n");
        Help.append("Type your account no. in 'Account no1' and the account number to be credited in 'Account no2' ,your secret key in 'secret key' and the amount to be transfered in 'Amount',then click 'ok' button for the transaction \n");
        Help.append("\n");
        Help.append("6.BROADCAST:\n");
        Help.append("Type your message and send it to everybody who are connected to the server\n");
        Help.append("\n");
        Help.addCommand(Back);
        Help.setCommandListener(this);

        }

        public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
        display = null;
        System.out.println("destroyapp");
        displayable = null;
    }

        public void commandAction(Command c, Displayable d) {

            // Login
             if (c == cmdsel) {
                        if (list.getString(list.getSelectedIndex()).equals("Login")){
                display.setCurrent(Login);

                 }
            }

             // Option Selection
             if(c == cmdsel1){
                           if (list1.getString(list1.getSelectedIndex()).equals("Inbox")) {
                try {
                    System.out.println("inside inbox");
                    out.flush();
                    out.write("Inbox;".getBytes());
                    byte b1[] = new byte[1024];
                    String buf, temp;
                    in.read(b1);

                    buf = new String(b1);

                    temp = SECURE.decrypt(buf);

                    System.out.println("temp" + temp);
                    if (temp.indexOf('.') != -1)
                        temp = temp.substring(0, temp.indexOf('.'));
                    if (temp.equals("No Message")) {

                        inbox.append("No Message", null);
                    } else {
                        try {
                            int i = 0, j = temp.indexOf(';');
                            int count = 1;
                            while (j != -1) {

                                inbox.append(temp.substring(i, j), null);
                                i = j + 1;
                                j = temp.indexOf(';', j + 1);

                            }

                        } catch (Exception e1) {
                            System.out.println("exp" + e1);
                        }
                    }
                    display.setCurrent(inbox);
                } catch (Exception e) {
                    System.out.println("hai" + e);
                }
            }

            if (list1.getString(list1.getSelectedIndex()).equals("Write Message")) {
                display.setCurrent(Message);
            }

            if (list1.getString(list1.getSelectedIndex()).equals("Help")) {
                display.setCurrent(Help);
            }

            if (list1.getString(list1.getSelectedIndex()).equals("Transaction")) {
                display.setCurrent(Transaction);
            }
            if (list1.getString(list1.getSelectedIndex()).equals("Broadcast")) {
                display.setCurrent(Broadcast);
            }
              }

             // Message delete
             if (c.equals(SmsDel)) {
            try {
                out.write(("Delete" + ";" + inbox.getString(inbox.getSelectedIndex())).getBytes());
                for (int i = 0; i < inbox.size(); i++) {
                    inbox.delete(i);

                }

            } catch (Exception e) {
            }
            display.setCurrent(list1);
            Alert currentAlert = new Alert("Message deleted");
            currentAlert.setTimeout(2500);
            currentAlert.setString("One  Message is deleted");
            currentAlert.setType(AlertType.INFO);
            display.setCurrent(currentAlert);
        }

             //login

        if (c.equals(Ok)) {
                    pass= txtpw.getString();
                    user=txtuser.getString();

                    //Server Connection
                try {

            stream = (StreamConnection) Connector.open("socket://localhost:9595");
            in = stream.openInputStream();
            out = stream.openOutputStream();
            byte b[] = new byte[50];
            out.flush();
            out.write(user.getBytes());
            in.read(b);
                      } catch (Exception ex) {
            System.out.println("Exeption " + ex);
        }

            if ((user.equals("")) || (user.length() != 10)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("your userid is wrong or not entered");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if (pass.equals("") || (pass.length() != 8)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Either your pw is wrong or not entered");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            }   else {
                try {

                    out.flush();
                    String s11, s22;
                    s11 = SECURE.encrypt(txtuser.getString());
                    s22 = SECURE.encrypt(txtpw.getString());
                    System.out.println("s11:"+s11);
                    System.out.println("s22:"+s22);
                    out.write(("login;" + s11 + ";" + s22).getBytes());
                    byte b11[] = new byte[100];
                    in.read(b11);
                    String ers1 = new String(b11);
                                        System.out.println("ers"+ers1);
                    if (ers1.trim().equals("Error1")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("Sorry you are not authorized , your userid is wrong");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtuser.setString("");
                        txtpw.setString("");

                    }

                    else if (ers1.trim().equals("Error2")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("Sorry you are not authorized ,your password is wrong");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtuser.setString("");
                        txtpw.setString("");

                    }

                    else if (ers1.trim().equals("Error3")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("login messageYou haven't got enough funds to transfer");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtuser.setString("");
                        txtpw.setString("");

                    } else {
                        display.setCurrent(list1);
                        Alert cur = new Alert("Status");
                        cur.setTimeout(2500);
                        cur.setString("login performed successfully,check your password in inbox");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtuser.setString("");
                        txtpw.setString("");

                    }
                } catch (Exception ex) {
                    System.out.println("Exeption " + ex);
                }
            }
                 }

             if (c.equals(Back)) {
            display.setCurrent(list1);
        }

             // sms

        if (c.equals(SmsOk))

        {
            if (txtPhone.getString().equals(user)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Enter another number");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if ((txtMessage.getString()).equals("") || (txtMessage.getString().length() < 2)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Enter Message");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if ((txtPhone.getString()).equals("") || (txtPhone.getString().length() != 10)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("The number field is empty or your own number");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
                txtPhone.setString("");
            } else {
                try {

                    out.flush();
                    out.write((SECURE.encrypt(txtMessage.getString()) + ";" +SECURE.encrypt(txtPhone.getString())).getBytes());
                    byte b1[] = new byte[100];
                    in.read(b1);
                    String ers = new String(b1);
                    display.setCurrent(list1);
                    Alert currentAlert = new Alert("Message sent");
                    currentAlert.setTimeout(2000);
                    currentAlert.setString("Message sent succesfully");
                    currentAlert.setType(AlertType.INFO);
                    display.setCurrent(currentAlert);
                    txtPhone.setString("");
                    txtMessage.setString("");

                } catch (Exception ex) {
                    System.out.println("Exeption " + ex);
                }
            }
        }

             // Transaction
        if (c.equals(TransOk)) {

            if ((txtacc1.getString()).equals("") || (txtacc1.getString().length() != 6)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Either your account no. is wrong or not entered");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if ((txtacc2.getString().equals("")) || (txtacc2.getString().length() != 6)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Either the account no. is wrong or not entered");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if ((txtsk.getString().equals("")) || (txtsk.getString().length() >= 4)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Either your secret key is wrong or not entered");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else if ((txtamt.getString()).equals("") || (txtamt.getString().length() < 2)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Enter Amount");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else {
                try {

                    out.flush();
                    String s1, s2, s3, s4;
                    s1 = SECURE.encrypt(txtacc1.getString());
                    s2 = SECURE.encrypt(txtamt.getString());
                    s3 = SECURE.encrypt(txtsk.getString());
                                        s4 = SECURE.encrypt(txtacc2.getString());

                    out.write(("trans;" + s1 + ";" + s2 + ";" + s3 + ";" + s4).getBytes());
                    byte b1[] = new byte[100];
                    in.read(b1);
                    String ers = new String(b1);
                                        System.out.println("ers"+ers);
                    if (ers.trim().equals("Error1")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("Sorry you are not authorized ,either one the Account numbers or the secret key is wrong");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtacc1.setString("");
                        txtacc2.setString("");
                        txtsk.setString("");
                        txtamt.setString("");

                    }

                    else if (ers.trim().equals("Error2")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("MISUSE Cellnumber and Account number mismatch");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtacc1.setString("");
                        txtacc2.setString("");
                        txtsk.setString("");
                        txtamt.setString("");

                    }

                    else if (ers.trim().equals("Error3")) {

                        Alert cur = new Alert("Warning");
                        cur.setTimeout(3500);
                        cur.setString("You haven't got enough funds to transfer");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtacc1.setString("");
                        txtacc2.setString("");
                        txtsk.setString("");
                        txtamt.setString("");

                    } else if(ers.trim().equals("Success")) {
                        display.setCurrent(list1);
                        Alert cur = new Alert("Status");
                        cur.setTimeout(2500);
                        cur.setString("Amount transfer performed succesfully");
                        cur.setType(AlertType.INFO);
                        display.setCurrent(cur);
                        txtacc1.setString("");
                        txtacc2.setString("");
                        txtsk.setString("");
                        txtamt.setString("");
                    }
                } catch (Exception ex) {
                    System.out.println("Exeption " + ex);
                }
            }
        }

             // Broadcast
        if (c.equals(BrdCstOk)) {

            if (txtbc.getString().equals("") || (txtbc.getString().length() < 2)) {
                Alert currentAlert = new Alert("Warning");
                currentAlert.setTimeout(1500);
                currentAlert.setString("Enter Message");
                currentAlert.setType(AlertType.INFO);
                display.setCurrent(currentAlert);
            } else {
                try {
                    Alert currentAlert = new Alert("Message sent");
                    currentAlert.setTimeout(2000);
                    currentAlert.setString("Message sent succesfully");
                    currentAlert.setType(AlertType.INFO);
                    display.setCurrent(currentAlert);

                    out.flush();
                    out.write(("bc;" + SECURE.encrypt(txtbc.getString())+"!").getBytes());
                    byte b1[] = new byte[100];
                    in.read(b1);
                    txtbc.setString("");
                    display.setCurrent(list1);
                    Alert cur = new Alert("Status");
                    cur.setTimeout(2500);
                    cur.setString("Broadcast performed succesfully");
                    cur.setType(AlertType.INFO);
                    display.setCurrent(cur);
                    txtbc.setString("");
                } catch (Exception ex) {
                    System.out.println("Exeption " + ex);
                }
            }
        }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:31:02.613

公共 gui.Main mid=null;

```
public BTServer(gui.Main m){
    mid=m;
} 
```

BTserver 的这行代码有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:22:18.463

这是使用 RFCOMM 协议进行蓝牙通信的代码，

该程序由客户端和服务器组成。因此，在测试代码之前，请确保设备已配对。BTServer.java 程序将在具有蓝牙活动且可见的桌面机器上运行。BTClient.java 程序是一个在 Mobile 上运行的 Midlet。

**BTServer.java**

```
package bt;

import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.bluetooth.*;
import javax.microedition.io.*;
import javax.bluetooth.*;
import java.io.*;
import java.util.*;

public class BTServer implements Runnable
{
    StreamConnectionNotifier notifier=null;
    StreamConnection conn=null;
    LocalDevice ld=null;
    ServiceRecord sr=null;
    javax.bluetooth.UUID uuid=null;
    String servurl=null;
    public Hashtable strht=new Hashtable();
    public Hashtable nameht=new Hashtable();    
    public Vector v=new Vector();
    public Vector nv=new Vector();
    DataInputStream din = null;
    DataOutputStream dout = null;
    public gui.Main mid=null;

    public BTServer(gui.Main m){
        mid=m;
    }

    public void initServer(){
        nv.addElement(mid.logingui.chatname);
        serverStart();
        System.out.println(nv);
    }

    public void serverStart(){
        uuid=new javax.bluetooth.UUID(0x1003);
        servurl="btspp://localhost:"+uuid+";name=rfcomm";//;authorize=true";
        new Thread(){public void run(){mid.btserverwaitinggui.set();}}.start();
        new Thread(this).start();
        mid.btserveruserlistgui.setUsers(nv);
    }

    public void run()
    {
        try{
            conn=null;
            ld=LocalDevice.getLocalDevice();
            System.out.println("Device Address:=="+ld.getBluetoothAddress());
            ld.setDiscoverable(DiscoveryAgent.GIAC);
            notifier=(StreamConnectionNotifier)Connector.open(servurl);
            String st = "hello";
            System.out.println("SERVER WAITING FOR CLIENT REQUEST\n");
            while(true){
                conn = notifier.acceptAndOpen();
                System.out.println("CLIENT REQUESTED FOR CONNECTION\n");
                RemoteDevice dev = RemoteDevice.getRemoteDevice(conn);
                System.out.println("Remote device address: "+dev.getBluetoothAddress());
                System.out.println("Remote device name: "+dev.getFriendlyName(true));
                dout = conn.openDataOutputStream();  
                din = conn.openDataInputStream();  
                v.addElement(dout);
                strht.put(dev.getBluetoothAddress()+"",dout);
                new Child(din,dev.getBluetoothAddress()+"");
            }       
        }
        catch(Exception e){
         System.out.println(e);         
        }
    }
    /********************************************************/

    public class Child extends Thread{
        DataInputStream dinc=null;
        String devddr=null;
        String chatname=null;
        public Child(DataInputStream dint,String devt){
            try{
                devddr=devt;
                dinc=dint;
                start();
            }catch(Exception e){
                // todo: handle exception
            }
        }

        public void run(){      
            try{
                String str=null;
                str=dinc.readUTF();
                chatname=str;
                nv.addElement(chatname);
                mid.btserveruserlistgui.setUsers(nv);
                nameht.put(str,devddr);
                System.out.println(nameht);
                sendName(str);              
                while(true){
                    str=dinc.readUTF();
                    processString(chatname,str);
                }
            }
            catch(Exception e){         
                // todo: handle exception
            }
        }

    }

    /*****************************************************/

    public void sendName(final String nam){
        new Thread(){
            public void run(){
                try{
                    for(int i=0;i<v.size();i++){
                        DataOutputStream doo=(DataOutputStream)v.elementAt(i);
                        doo.writeUTF("chatnames");
                        doo.flush();
                        for(int j=0;j<nv.size();j++){
                            String nt=(String)nv.elementAt(j);
                            doo.writeUTF(nt);
                            doo.flush();
                        }
                        doo.writeUTF("namesend");
                        doo.flush();
                    }
                }catch(Exception e){
                    // todo: handle exception
                }
            }
        }.start();
    }
    public void processString(String un,String msg){
        try {
            if(msg.indexOf("all")!=-1){
                msg=msg.substring(msg.indexOf(":")+1);
                mid.btserverchatgui.setMessage(msg);
                sendToAll(msg);
            }
            else if(msg.indexOf("one")!=-1){
                String to=msg.substring(msg.indexOf(":")+1,msg.indexOf(";"));
                String mess=msg.substring(msg.indexOf(";")+1);
                String da=""+nameht.get(to);
                System.out.println("Device ADDR=="+da);
                sendToOne(da,mess);
            }
            else if(msg.indexOf("server")!=-1){
                String mess=msg.substring(msg.indexOf(":")+1);
                sendToServer(mess);
            }   
        } catch (Exception e) {
            // todo: handle exception
        }
    }
    public void sendToAll(final String msg){
        new Thread(){
            public void run(){
                try {
                    for(int i=0;i<v.size();i++){

                        DataOutputStream doo=(DataOutputStream)v.elementAt(i);
                        doo.writeUTF("msg");
                        doo.flush();
                        doo.writeUTF(msg);
                        doo.flush();
                    }
                } catch (Exception e) {
                    // todo: handle exception
                }
            }
        }.start();
    }
    public void sendToOne(final String da,final String msg){
        new Thread(){
            public void run(){
                try {
                    DataOutputStream doo=(DataOutputStream)strht.get(da);
                    doo.writeUTF("msg");
                    doo.flush();
                    doo.writeUTF(msg);
                    doo.flush();
                } catch (Exception e) {
                    // todo: handle exception
                }
            }
        }.start();
    }
    public void sendToServer(String msg){
        System.out.println(msg);
        mid.btserverchatgui.setMessage(msg);
    }
}//class 
```

**BTClient.java**

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.io.*;
import java.io.*;
import javax.bluetooth.*;
import java.util.*;

public class BTClient extends MIDlet implements CommandListener,Runnable,DiscoveryListener{

    DataOutputStream dout   = null;
    DataInputStream din     = null;
    StreamConnection s      = null;
    String address;
    String serviceUrl;
    Vector device           = null;
    Form form               = null;
    Form addressForm;
    List devices;
    Command search,select,back,connect,home,exit;
    LocalDevice ld;
    DiscoveryAgent da;
    Display d = null;

    public BTClient(){
        d=Display.getDisplay(this);
    }

    public void startApp(){
        initbt();
        d.setCurrent(form);
    }

    public void destroyApp(boolean f){
        if(f) notifyDestroyed();
    }

    public void pauseApp(){}

    public void initbt(){

        try{
            device=new Vector();
            form = new Form("SEARCH BT DEVICES");
            addressForm=new Form("48 Bit Address");
            devices=new List("BLUETOOTH DEVICES",List.IMPLICIT);
            search=new Command("SEARCH",Command.OK,0);
            back=new Command("BACK",Command.BACK,0);
            exit=new Command("EXIT",Command.EXIT,0);
            home=new Command("BACK",Command.BACK,0);
            select=new Command("OK",Command.OK,1);
            connect=new Command("CONNECT",Command.OK,0);
            ld=LocalDevice.getLocalDevice();
            //ld.setDiscoverable(DiscoveryAgent.GIAC);
            da=ld.getDiscoveryAgent();
            devices.addCommand(select);
            devices.addCommand(home);
            form.addCommand(search);
            form.addCommand(exit);
            addressForm.addCommand(back);
            addressForm.addCommand(connect);
            devices.setCommandListener(this);
            addressForm.setCommandListener(this);
            form.setCommandListener(this);
        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }

    public void run(){      
        /*  try{
        StreamConnection con = null;
        String url="btspp://"+address+":25;master=false;encrypt=false;authenticate=false";
        System.out.println(url);
        con=(StreamConnection)Connector.open(url);
        dout = con.openDataOutputStream();
        din = con.openDataInputStream();
        d.setCurrent(f1);
        }
        catch(Exception e){
        addressForm.append("ERROR IN CONNECTION");
        d.setCurrent(addressForm);      
        }*/
    }

    public void deviceDiscovered(RemoteDevice btDevice,DeviceClass cod){
        device.addElement(btDevice);
    }

    public void inquiryCompleted(int discType){
        System.out.println("In Inquiry completed");
        devices.deleteAll();
        if(device.size()<=0){

            devices.append("size:"+device.size(),null);
            devices.append("No devices Found",null);
            d.setCurrent(devices);
        }
        else{   
            for(int i=0;i<device.size();i++){

                try{
                    String devicename = ((RemoteDevice)device.elementAt(i)).getFriendlyName(false);
                    devices.append(devicename,null);
                }
                catch(Exception e){
                    System.out.println(e);
                }
            }
            d.setCurrent(devices);
        }
    }

    public void servicesDiscovered(int transID, ServiceRecord[] servRecord){

        System.out.println("ServicesDiscovered");
        for(int i=0;i<servRecord.length;i++){

            serviceUrl = servRecord[i].getConnectionURL(0,false);
            System.out.println("Service URL:"+serviceUrl); 
        }
    }

    public void serviceSearchCompleted(int transID, int respCode){}

    public void commandAction(Command c,Displayable dp){

        if(c==search){
            try{
                da.cancelInquiry(this);
                da.startInquiry(DiscoveryAgent.GIAC,this);
            }
            catch(Exception e){
                System.out.println("ERROR IN INQUIRY");
            }
        }
        if(c==connect){

            Thread th = new Thread(this);
            th.start();
        }
        if(c==select){
            try{
                da.searchServices(null,uuids,((RemoteDevice)device.elementAt(devices.getSelectedIndex())),this);
            }catch(Exception e){}

            System.out.println(((RemoteDevice)device.elementAt(0)).getBluetoothAddress());
            address=(((RemoteDevice)device.elementAt(devices.getSelectedIndex())).getBluetoothAddress());
            addressForm.deleteAll();
            addressForm.append("The 48 Bit address of the Bluetooth Device Selected is: "+address);
            d.setCurrent(addressForm);
        }
        if(c==back){
            d.setCurrent(devices);
        }
        if(c==home)
            d.setCurrent(form);
        if(c==exit)
            destroyApp(true);
    }
} 
```

# javascript - JavaScript 中的 ezurl 运算符

> ID：10362768
> 
> 赞同：1
> 
> 时间：2012-04-28T10:42:12.673
> 
> 标签：javascript, url-routing, ezpublish

有没有办法在纯 JavaScript 文件中找出 eZPublish 模块路径？

我必须从 JS 调用一个模块，但我不会将 url 硬编码到模块中。是否有类似 JavaScript 中的 ezurl() 模板运算符之类的函数或定义 eZPublsih 基本路径以与模块 uri 连接的函数？我不知道如何找出 URL 重写结构 / siteacces ...

我无法通过“模板内”js-snippet 定义路径，因为之前加载了需要信息的脚本。

所以我需要这样的东西......

```
var moduleUrl = getEzPublishBasePath() + '/mymodule/myview'; 
```

或者

```
var moduleUrl = createEzPublishModuleUrl('/mymodule/myview'); 
```

谢谢。您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T00:36:53.480

在调用需要使用它的脚本之前，您可以在页面布局中声明一个全局 js 变量吗？

```
var moduleUrl = {'/'|ezroot()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:38:22.907

如果要连接网站的基本 URL，则最好使用 ezurl() 运算符。使用 ezroot() 时，您的站点访问标识符不会作为 URI 的前缀，这会导致问题。

也就是说，人们通常会迷路并且不了解真正的区别，因为 ezroot()*适用*于：

*   使用 RemoveSiteAccessIfDefaultAccess=enabled 的单个站点访问安装（此设置未记录在[配置文件部分](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Configuration-files/site.ini)中）。
*   使用[主机/端口模式](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Concepts-and-basics/Configuration/Access-methods)时多站点访问安装。

请记住，这些运营商有非常不同的目标：

*   [ezurl()](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Template-operators/URLs/ezurl)帮助您处理系统 url（或 url 别名，它是系统 URL 的虚拟 URL），如 /user/login 或 {$node.url_alias}。
*   [ezroot()](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Template-operators/URLs/ezroot)帮助您处理存储在 ezpublish 文件中的资源 URL/路径（例如 pdf、flash、图像...）
*   [ezdesign()](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Template-operators/URLs/ezdesign)和[ezimage()](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Template-operators/URLs/ezimage)用于帮助处理静态资源并了解[设计后备系统](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Concepts-and-basics/Designs/Design-combinations#automatic_fallback)

# symfony-1.4 - 如何检查 Doctrine 1.2 sqlite 缓存是否正常工作？

> ID：10362771
> 
> 赞同：2
> 
> 时间：2012-04-28T10:42:28.983
> 
> 标签：symfony-1.4, doctrine-1.2

我正在尝试使用以下代码在 Symfony 1.4 中设置学说 sqlite 缓存：

```
$cacheConn   = Doctrine_Manager::connection( new PDO( 'sqlite::memory:' ) );
$cacheDriver = new Doctrine_Cache_Db( array( 'connection' => $cacheConn, 'tableName' => 'cache' ) );
$cacheDriver->createTable();
$manager->setAttribute( Doctrine_Core::ATTR_QUERY_CACHE, $cacheDriver );
$manager->setAttribute( Doctrine_Core::ATTR_RESULT_CACHE, $cacheDriver );
$manager->setAttribute( Doctrine_Core::ATTR_CACHE_LIFESPAN, 60 * 5 );
$manager->setAttribute( Doctrine_Core::ATTR_RESULT_CACHE_LIFESPAN, 60 * 5 ); 
```

我没有看到任何错误，但脚本执行时间与没有缓存时完全相同。如何检查缓存是否实际工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:20:08.817

似乎您在请求之间没有持久性。

要使您的 sqlite::memory 对下一个请求有效，您必须使用“持久性”

> 在内存中 sqlite 有一些限制。内存空间可以是请求、会话，但似乎没有记录在用户之间共享内存基础。
> 
> 对于请求，使用代码 $pdo = new PDO('sqlite::memory:'); 打开你的基础。你的基地将在下一次请求时消失。
> 
> 对于会话持久性：
> 
> `$pdo = new PDO( 'sqlite::memory:', null, null, array(PDO::ATTR_PERSISTENT => true) );`

来源：[http ://www.php.net/manual/en/ref.pdo-sqlite.connection.php](http://www.php.net/manual/en/ref.pdo-sqlite.connection.php)

从 [frederic dot glorieux at diple dot net] 的评论中复制和粘贴

# html - Twitter bootstrap - 多个模式窗口

> ID：10362778
> 
> 赞同：2
> 
> 时间：2012-04-28T10:43:32.457
> 
> 标签：html, twitter-bootstrap, modal-dialog

我在循环中使用模态窗口组件。每个循环内容都有 X 个具有不同 ID 的缩略图（模式也有不同的 ID），应该通过它们的 data-toggle 属性触发模式，但是模式仅适用于循环的第一项，数据切换仅设置屏幕的背景与其余部分。模态窗口的内容和标记在 DOM 中，只是它们不显示。

我曾尝试删除淡入淡出类，重命名 ID，但到目前为止我还没有运气。我发现了一个[类似的问题，](http://www.chapter31.com/2011/10/27/twitter-bootstrap-modal-not-working-in-firefox/)但这对我的情况没有帮助。

可能是什么问题呢？

```
<li class="span3">
<div class="modal hide" id="modal1">
   <div class="modal-header">
        <button class="close" data-dismiss="modal">x</button>
        <h3>Lipsum</h3>
   </div>
   <div class="modal-body">
       <p>Lipsum</p>
   <hr>
   <img src="<?php the_field('srceenshot')?>">
   </div>
   <div class="modal-footer">
       <button class="close" data-dismiss="modal">x</button>
   </div>
</div>
    <a class="thumbnail" data-toggle="modal" rel="popover" data-content="<?php the_field('screenshot_text')?>" data-original-title="<?php the_field('screenshot_header')?>" href="#modal1">
        <img src="<?php the_field('screenshot')?>">
    </a>
</li> 
```

解决方案：

```
<div class="modal hide" id="modal1_<?php echo $count"> 
```

和

```
<a class="thumbnail" data-toggle="modal" rel="popover" data-content="<?php the_field('screenshot_text')?>" data-original-title="<?php the_field('screenshot_header')?>" href="#modal1_<?php echo $count"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:05:22.817

`id=modal1`需要是动态的。所以它应该是这样的`id=modal_<PK of Object>`

# c - (int *) 和 (int []) 是一样的吗？

> ID：10362781
> 
> 赞同：1
> 
> 时间：2012-04-28T10:43:44.457
> 
> 标签：c

> **可能重复：**
> [gcc 编译错误：cast 指定数组类型](https://stackoverflow.com/questions/3427843/gcc-compile-error-cast-specifies-array-type)

我想检查 (int * ) 和 (int []) 的区别。当我编译以下代码时，第一行正常。但是对于第 2 行，我的编译器给出了以下错误：

```
test.c:10: error: cast specifies array type 
```

谁能告诉我这个错误的含义以及我在哪里做错了？

```
#include<stdio.h>

void abc(int *a)
{
        int i;
        for(i=0;i<2;i++)
        {
            printf("%d",((int * )a)[i]);  //(1)
            printf("%d",((int [])a)[i]); //(2)
        }
}

int main()
{
    int b[2]={0,1};
    abc(b);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T10:52:27.040

通常`int *`是一个指针（指向一个整数）并且`int[]`是一个未指定大小的数组，即所谓的*不完整*类型。不完整类型只能在声明中使用，并且必须在定义中完成。例如（以下代码位于全局范围内）：

```
extern int[] p; //declaration of p

int p[5]; //definition of p - size must be specified 
```

当您谈论函数参数时，情况就完全不同了。声明：

```
void f(int *p) 
```

和

```
void f(int p[]) 
```

将是相同的。如果你愿意，它只是语法糖。

* * *

编辑：除此之外：如果您要问数组和指针之间有什么区别：一切！我会将您链接到[C-faqs.com](http://c-faq.com/)以获得更具体的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:50:03.950

试试这个

```
void abc(int *a){ 
  int i; 

  for(i=0;i<2;i++){
     printf("%d",*(a+i));  //(1)
     printf("%d", a[i]);   //(2) 
  } 
} 
```

你应该花更多的时间来理解指针和数组。数组的名称是指向他的第一个元素的指针，您可以使用数组的名称使用它们的名称，就像使用内存块和指向它的指针一样开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:48:45.590

一点也不。int * 表示指向内存中整数的指针。[] 括号代表一个数组。诠释一个[10]；将创建一个包含 10 个整数的数组。诠释*一个；将创建一个指向整数的指针。

指针不是简单类型的好习惯，因为它们消耗更多内存。

有关更多答案，请查看：[http](http://www.cplusplus.com/doc/tutorial/arrays/) ://www.cplusplus.com/doc/tutorial/arrays/和[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)。

# wcf - WCF：回调合约没有异步，错误，因为没有实现 Begin/End 方法

> ID：10362783
> 
> 赞同：0
> 
> 时间：2012-04-28T10:44:13.317
> 
> 标签：wcf, asynchronous, callback, duplex

我有一个双工 WCF 服务。在服务合同中，我有 3 个异步方法和 1 个普通方法（关闭会话）。在 tha 回调合同中，我只有 1 个非异步的 void 方法。

当我使用 svcUtil 生成代理时，我使用 /a 参数并获取 .cs。如果我打开这个文件，我可以看到为合约的 no async 方法生成了 Begin/end 方法，我不知道为什么，因为这个方法在合约中没有标记为异步。无论如何，这不是问题。

问题在于回调合约的方法。在我的客户端应用程序中，我实现了回调接口，但我实现了一个方法，一个同步方法，所以我没有 Begin/End 方法。但是，我无法编译，因为我有一个错误，即实现回调接口的类没有实现 Begin/end 方法。

哪个是问题？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:03:05.490

实现回调接口的类也需要实现异步方法（因为它们是在接口中定义的），但是如果一个接口同时具有相同方法的同步和同步版本，则[默认调用同步](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.asyncpattern.aspx)方法。在下面的代码中，回调类中的异步操作只是抛出，但代码工作得很好。

```
public class StackOverflow_10362783
{
    [ServiceContract(CallbackContract = typeof(ICallback))]
    public interface ITest
    {
        [OperationContract]
        string Hello(string text);
    }
    [ServiceContract]
    public interface ICallback
    {
        [OperationContract(IsOneWay = true)]
        void OnHello(string text);

        [OperationContract(IsOneWay = true, AsyncPattern = true)]
        IAsyncResult BeginOnHello(string text, AsyncCallback callback, object state);
        void EndOnHello(IAsyncResult asyncResult);
    }
    public class Service : ITest
    {
        public string Hello(string text)
        {
            ICallback callback = OperationContext.Current.GetCallbackChannel<ICallback>();
            ThreadPool.QueueUserWorkItem(delegate
            {
                callback.OnHello(text);
            });

            return text;
        }
    }
    class MyCallback : ICallback
    {
        AutoResetEvent evt;
        public MyCallback(AutoResetEvent evt)
        {
            this.evt = evt;
        }

        public void OnHello(string text)
        {
            Console.WriteLine("[callback] OnHello({0})", text);
            evt.Set();
        }

        public IAsyncResult BeginOnHello(string text, AsyncCallback callback, object state)
        {
            throw new NotImplementedException();
        }

        public void EndOnHello(IAsyncResult asyncResult)
        {
            throw new NotImplementedException();
        }
    }
    public static void Test()
    {
        string baseAddress = "net.tcp://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new NetTcpBinding(SecurityMode.None), "");
        host.Open();
        Console.WriteLine("Host opened");

        AutoResetEvent evt = new AutoResetEvent(false);
        MyCallback callback = new MyCallback(evt);
        DuplexChannelFactory<ITest> factory = new DuplexChannelFactory<ITest>(
            new InstanceContext(callback),
            new NetTcpBinding(SecurityMode.None),
            new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();

        Console.WriteLine(proxy.Hello("foo bar"));
        evt.WaitOne();

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# android - 如何在 Android Honeycomb 中使 tabhost/tabwidget 以垂直方式显示？

> ID：10362784
> 
> 赞同：1
> 
> 时间：2012-04-28T10:44:21.273
> 
> 标签：android, android-tabhost

我想让我的标签垂直显示在左侧。我用

```
android:orientation="vertical" 
```

在标签小部件中。如果我包括这个

```
<uses-sdk android:minSdkVersion="11"/> 
```

在我的清单文件中，它可以正常显示。但是，因为我有一个连接到互联网数据库的代码需要将版本设置为“3”，所以当我将版本更改为 3 时，选项卡无法显示。

```
<TabHost   
xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@android:id/tabhost"
android:layout_width="match_parent" 
android:layout_height="match_parent"
>
<LinearLayout android:orientation="horizontal"
              android:layout_width="match_parent" 
              android:layout_height="match_parent">
    <TabWidget android:id="@android:id/tabs" 
               android:layout_height="match_parent" 
               android:layout_width="380dip"
               android:layout_weight="0" 
               android:orientation="vertical"
               android:background="#ffe185"
               />
    <FrameLayout android:id="@android:id/tabcontent"
                 android:layout_height="match_parent" 
                 android:layout_width="0dip"
                 android:layout_weight="1"
                 android:background="#ffffff"/>
</LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T02:09:23.897

match_parent 直到 API 8 才可用。尝试用 fill_parent 替换。如果您只返回 API 4，则可以使用[Android 支持库](http://developer.android.com/tools/extras/support-library.html)。

# android - 中止服务器上的图像上传

> ID：10362785
> 
> 赞同：1
> 
> 时间：2012-04-28T10:44:24.270
> 
> 标签：android, http-post

我有一个 AsyncTask 将图像上传到我的服务器。这部分工作正常，但我不知道如何处理中止过程。我有一个可以取消的 ProgressDialog，以及一个取消监听器。在这个监听器中，我中止了 http 请求和 AsyncTask ......但似乎这还不够，因为图像仍在上传。这是我的代码的样子：

```
public class UploadCubeThread extends AsyncTask<Cube, Void, String> {

private static final String url = "http://www.mywebsite.com/upload_cube.php";
private volatile HttpPost httppost = new HttpPost(url);
private ProgressDialog waitSpinner;
private Context context;
private HashMap<String, Integer> feedback;
private boolean success = false;

public UploadCubeThread(Context context) {
    this.context = context;
    this.feedback = new HashMap<String, Integer>();
    waitSpinner = new ProgressDialog(context);
    // Cancelable
    waitSpinner.setCancelable(true);
    waitSpinner.setCanceledOnTouchOutside(false);
    waitSpinner.setOnCancelListener(new OnCancelListener() {
        public void onCancel(DialogInterface dialog) {
            httppost.abort();
            UploadCubeThread.this.cancel(true);
        }
    });
}

@Override
protected void onCancelled() {
    super.onCancelled();
    success = false;
    feedback.put("cancelled", 0);
    ((UploadListener) context).onUploadComplete(success, feedback);
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    waitSpinner.setMessage(context.getString(R.string.uploading));
    waitSpinner.show();
}

@Override
protected String doInBackground(Cube... arg0) {

    Cube cube = arg0[0];
    String result = null;
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    // Compression
    cube.getImage().compress(Bitmap.CompressFormat.JPEG, 100, stream);

    byte[] byte_arr = stream.toByteArray();
    String image_str = Base64.encodeBytes(byte_arr);
    ArrayList<BasicNameValuePair> nameValuePairs = new ArrayList<BasicNameValuePair>();
    // Hash md5 pour l'intégrité
    String hash = CubeUploader.encode(image_str);

    nameValuePairs.add(new BasicNameValuePair("image", image_str));
    nameValuePairs.add(new BasicNameValuePair("id_building", String
            .valueOf(cube.getId_building())));
    nameValuePairs.add(new BasicNameValuePair("title", cube.getTitle()));
    nameValuePairs
            .add(new BasicNameValuePair("content", cube.getContent()));
    nameValuePairs.add(new BasicNameValuePair("hash", hash));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,
                HTTP.UTF_8));

        HttpResponse response = httpclient.execute(httppost);

        // Utilisation de la réponse
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent(), "UTF-8"));
        result = reader.readLine();

    } catch (UnknownHostException he) {
        Log.e("CubeUpload", "Unknown Host : problem of connectivity ?");
        result = "host_pb";
    } catch (Exception e) {
        Log.e("CubeUpload", "Error during upload: " + e.toString());
    }
    return result;

}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
//Some process
    ((UploadListener) context).onUploadComplete(success, feedback);
    waitSpinner.dismiss();
}
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:51:34.267

我认为关键是这`httppost.abort();` 还不够，连接没有完全关闭（这是我想要的，它将在服务器端处理）所以我尝试添加`httpclient.getConnectionManager().shutdown();`，但效果并不好，图像仍在上传！... 我不明白

# jsf - 显示依赖于请求参数的动态图像

> ID：10362786
> 
> 赞同：2
> 
> 时间：2012-04-28T10:44:26.620
> 
> 标签：jsf, primefaces, bytearray

我正在尝试构建一个用户个人资料页面以显示有关我的用户的一些详细信息。

页面的 url 类似于`profile.xhtml?username=randomString`.

所以，我要做的是加载 randomString 的用户的所有数据。

一切都很好，因为现在是展示用户形象的时刻。

我正在使用带有graphicImage组件的PrimeFaces，但问题是它会导致一个新的请求来获取图像，所以请求参数实际上丢失了，并且该`getAvatar()`方法接收到一个空参数。

一种解决方案可能是制作 bean SessionScoped，但它会从第一个请求的用户那里获取数据，即使 randomString 会发生变化，它也会显示它们，所以我正在寻求帮助：

如何显示取决于请求参数的数据库中的动态图像？

谢谢 ：）

编辑：BalusC 回复后的新代码

JSF 页面：

```
<c:set value="#{request.getParameter('user')}" var="requestedUser"/>                    
<c:set value="#{(requestedUser==null) ? loginBean.utente : userDataBean.findUtente(request.getParameter('user'))}" var="utente"/>
<c:set value="#{utente.equals(loginBean.utente)}" var="isMyProfile"/>
<pou:graphicImage value="#{userDataBean.avatar}">
    <f:param name="username" value="#{utente.username}"/>
</pou:graphicImage> 
```

（我使用这个 vars 是因为我希望在页面请求`profile.xhtml`不带参数的情况下显示登录用户的个人资料）

托管豆：

```
@ManagedBean
@ApplicationScoped
public class UserDataBean {

    @EJB
    private UserManagerLocal userManager;

    /**
     * Creates a new instance of UserDataBean
     */
    public UserDataBean() {
    }

    public Utente findUtente(String username) {
        return userManager.getUtente(username);
    }

    public StreamedContent getAvatar(){
        String username = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("username");
        System.out.println(username==null);
        Utente u = findUtente(username);
        return new DefaultStreamedContent(new ByteArrayInputStream(u.getFoto()));
    }
} 
```

它出什么问题了？用户名始终为空！

编辑 2：添加了对 BalusC 的回复

是的，因为我需要使用作为参数传递的用户名来查找用户实体的`getAvatar()`方法调用（不允许我传递对象！）。`findUser()``<f:param>`

所以`findUser()`抛出异常，因为我使用`entityManager.find()`的是`null`主键！

顺便说一句，我绝对确定两者`#{utente}`和`#{utente.username}`都不为空，因为包含图像的面板仅在`#{utente ne null}`并且`username`是其主键时才呈现！

所以我无法真正检查 HTML 输出！

我担心`#{utente}`当我打电话时会丢失，`getAvatar()`因为获取图像需要新的 http 请求

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T12:24:25.560

将其作为`<f:param>`. 它将在渲染响应期间添加。

```
<p:graphicImage value="#{images.image}">
    <f:param name="id" value="#{someBean.imageId}" />
</p:graphicImage> 
```

`#{images}`辅助 bean 可以看起来像这样：

```
@ManagedBean
@ApplicationScoped
public class Images {

    @EJB
    private ImageService service;

    public StreamedContent getImage() throws IOException {
        FacesContext context = FacesContext.getCurrentInstance();

        if (context.getRenderResponse()) {
            // So, we're rendering the view. Return a stub StreamedContent so that it will generate right URL.
            return new DefaultStreamedContent();
        }
        else {
            // So, browser is requesting the image. Get ID value from actual request param.
            String id = context.getExternalContext().getRequestParameterMap().get("id");
            Image image = service.find(Long.valueOf(id));
            return new DefaultStreamedContent(new ByteArrayInputStream(image.getBytes()));
        }
    }

} 
```

由于上面的辅助 bean 没有基于请求的状态，它可以安全地在应用程序范围内。

# ruby - Rails 协会中的 Orderby

> ID：10362787
> 
> 赞同：0
> 
> 时间：2012-04-28T10:44:33.767
> 
> 标签：ruby, ruby-on-rails-3, sql-order-by, polymorphic-associations

我有以下表格

```
One is Bookmarking Table has (activity_id as foreign key)
 Table 2 - Activity has(item_id as foreign key..)
 Table 3 - ItemCache has (id,item_id,item_type, created_at...)
 Table 4 - Blog has(id,title,user_id,created_at...)
 Table 5 - Tweet has (id,title,user_id,created_at..) 
```

项目表有实际项目博客，已保存推文当此项目被添加书签时，活动被保存

现在我正在尝试获取我使用的用户的所有书签项目

```
current_user.bookmarks 
```

现在我想根据 created_at desc 的项目订购这些带书签的项目

我尝试在书签模型中编写范围为

```
scope :ordered, :joins => :activity, :order => "activities.created_at DESC" 
```

以上排序基于创建的活动

**如何根据缓存的项目 created_at 订购这些书签项目**

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:20:08.213

也许这会起作用：

```
scope :ordered, :include => [{ :activity => :item_cache }], :order => "item_caches.created_at desc" 
```

上面的代码假设：

```
bookmark.rb
  belongs_to :activity

activity.rb
  belongs_to :item_cache 
```

# vba - VBA（Excel ADODB ODBC）：从任何数据库中获取存储过程和表的列表？

> ID：10362788
> 
> 赞同：3
> 
> 时间：2012-04-28T10:44:34.000
> 
> 标签：vba, stored-procedures, ado

我希望能够使用 ADODB 列出来自 ODBC 数据连接的存储过程。

我有一个 ADO 连接：

```
 Public DBConn As New ADODB.Connection 
    DBConn.Properties("Prompt") = adPromptAlways 
```

用户选择一个 ODBC 数据源。

然后我想显示一个表和存储过程的列表。

这可以在不特定于 SQL Server 或 Oracle（比如说）的情况下通用地完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:23:32.437

大多数数据库都有名为 INFORMATION_SCHEMA（又名 SQL-92 标准）的“元视图”集合。

如果 INFORMATION_SCHEMA.ROUTINES 视图存在，那么您可以使用它列出存储过程。

但是，Oracle 不遵循此标准，需要特别注意，请参阅： [http ://www.java2s.com/Code/Oracle/System-Tables-Views/listallstoredproceduresPROCEDUREFUNCTIONPACKAGEPACKAGEBODY.htm](http://www.java2s.com/Code/Oracle/System-Tables-Views/listallstoredproceduresPROCEDUREFUNCTIONPACKAGEPACKAGEBODY.htm)

# php - 访问返回数组

> ID：10362794
> 
> 赞同：2
> 
> 时间：2012-04-28T10:45:30.400
> 
> 标签：php, arrays, curl, return

编辑：

```
<?php
    $file= 'fbplus.jpg';

    $args = array(
       'message' => $album_message,
    );
    $args[basename($file)] = '@' . realpath($file);
    $ch = curl_init();
    $url = $graph_url;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    //returns the photo id
    print_r(json_decode($data,true));

    echo "$data['id'] "; //wont work
        echo "$data[id] "; //wont work

?> 
```

这是我成功上传照片后的回报。

数组（[id] => 112235735579158 [post_id] => 100003781972892_112203478915717）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:48:48.413

`curl_exec()`返回一个字符串（网页的内容），而不是`Array`. 所以你不能这样做`$data['id']`，因为`$data`它是一个字符串而不是一个数组。

你发帖的网址是什么？它的确切输出是什么？

编辑：看起来 url 返回 JSON。在这种情况下：

```
<?php
    $file= 'fbplus.jpg';

    $args = array(
       'message' => $album_message,
    );
    $args[basename($file)] = '@' . realpath($file);
    $ch = curl_init();
    $url = $graph_url;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    //returns the photo id

    $data = json_decode($data,true);

    echo $data['id'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:49:47.373

您正在访问 Facebook Graph API 吗？

如果是这样，只需使用：

```
$data = json_decode($data); 
```

你可以通过它访问它`$data->id`

# jquery - 使用 jquery 在 django 中进行 twitter 之类的分页

> ID：10362797
> 
> 赞同：2
> 
> 时间：2012-04-28T10:46:32.143
> 
> 标签：jquery, django, twitter, pagination

有人可以建议像分页这样的 twitter 示例，其中有人点击更多按钮并将结果加载到下一页中`django`使用`jquery`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:52:18.553

我认为[django-endless-pagination](http://django-endless-pagination.readthedocs.org/en/latest/index.html)是您正在寻找的。

# wpf - WPF：按钮单击一个视图模型应该在另一个视图模型上执行命令

> ID：10362800
> 
> 赞同：1
> 
> 时间：2012-04-28T10:46:46.700
> 
> 标签：wpf, events, mvvm, parameters

我是 mvvm 的新手，我了解基本的 concpects。现在我有一个问题：我有两个不同的视图模型，它们将一起附加在另一个 wpf gui 上。

在一个视图模型中，有一个按钮和一个复选框；（“左侧控制”）现在是“技巧”：在另一个视图模型上也有一个复选框。（“右侧控制”）

现在：如果按钮被点击，那么如果复选框也被设置，则应该检查另一个视图模型。

基本上我会用一个事件或一个“信号”来做，但问题是，如果选中“右侧控件”上的复选框，它需要一个来自“左侧”的值。

实现将由一个事件完成，如果是这样：我如何传递参数？

因为我是那个 mvvm 的新手，所以我不知道我真正在寻找什么以及哪种解决方案是“最先进的”和“mvvm”风格的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:12:20.173

看看[http://www.galasoft.ch/mvvm/](http://www.galasoft.ch/mvvm/)，它有一个 Messenger 类，我认为这正是你需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:43:12.017

首先，UI 交互听起来有点复杂——可能值得回顾一下你的 UI 交互——可以简化吗？假设不是（即复杂的 UI 需求是真实的）：
听起来左侧视图模型 (LVM) 取决于右侧视图模型 (RVM) 的属性。那么是否可以在您的视图模型属性中设置这种关系，即可以设置 LVM 来保存对 RVM 的引用，并且绑定到复选框本身的属性会检查 RVM 上的依赖属性吗？然后你的命令（绑定在 LVM）只需要检查 LVM 的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T13:16:02.163

您需要使用一些事件聚合器（例如[来自 Prism 库](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx)）来处理这些东西。这是一个 c# 伪代码示例，说明如何使用 Prism 的事件聚合器进行操作：

在您的 RVM 中：

```
_eventAggregator.GetEvent<LeftCBCheckedEvent>()
    .Subscribe(SaveStateOfLeftCBLocally);

...

private void SaveStateOfLeftCBLocally(bool isLeftCBChecked)
{
    _isLeftCBChecked = isLeftCBChecked;
} 
```

在您的 LVM 中：

```
public bool IsLeftCBChecked {get; set;}
...
_eventAggregator.GetEvent<LeftCBCheckedEvent>().Publish(IsLeftCBChecked); 
```

事件定义：

```
public class LeftCBCheckedEvent : CompositePresentationEvent<bool>{} 
```

因此，当按下该按钮时，您将已经知道左侧复选框的状态。我强烈建议检查一下 Prism，它是一个很棒的复合应用程序库，我认为它可以为您的项目增加很大的价值。

# jquery-ui - 使用 XML 突出显示自动完成

> ID：10362804
> 
> 赞同：0
> 
> 时间：2012-04-28T10:47:19.027
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我正在创建一个基于 XML 文件的自动完成搜索。我想当用户输入一个单词时，文本会很突出。

到目前为止我做了什么：

```
$(function() {

    function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $.ajax({
        url: "ecole.xml",
        dataType: "xml",
        success: function( xmlResponse ) {
            var data = $( "school", xmlResponse ).map(function() {

                return {
                    value: $( "name", this ).text() + ", " +
                        ( $.trim( $( "adress", this ).text() ) + ", " + $( "description", this ).text() || "(unknown article)" ),
                    id: $( "id", this ).text(),
                    text: $( "description", this ).text()
                };
            }).get();

            $( "#birds" ).autocomplete({
                    source: data,
                    minLength: 0,
                    select: function( event, ui ) {
                        log( ui.item ?
                            "Selected: " + ui.item.value + ", Id: " + ui.item.id + ", Text: " + ui.item.text :
                            "Nothing selected, input was " + this.value ); 
                    },
            });
        }
    });
}); 
```

我真的不明白如何突出显示文本。我使用这段代码：

```
$(function() {
    highlight: function(match, keywords) {
       keywords = keywords.split(' ').join('|');
       return match.replace(new RegExp("("+keywords+")", "gi"),'<b>$1</b>');
    }
}); 
```

但我现在真的不知道为什么而且它不起作用

这是我的 HTML / PHP ：

```
 <div id="RecentEdition">
    <?php
    $schools = simplexml_load_file('ecoles.xml');
    foreach ($schools->RecentEdition as $RecentEdition): 
      foreach ($RecentEdition->school as $school):  ?>
        <figure>
          <img src='<?php echo "{$school->image} \n"; ?>' title='' />
          <figcaption>
            <h3>Contents</h3>
            <p class="over">
              <ul>
                  <?php foreach ($school->content as $content):  ?>
                    <?php foreach ($content->chap as $chap):  ?>
                      <li><a href="<?php echo "{$chap['link']} \n"; ?>"><?php echo "{$chap} \n"; ?></a></li>
                    <?php endforeach; ?>
                  <?php endforeach; ?>
              </ul>
            </p>
            <p class="go">
              <a href="<?php echo "{$school->link} \n"; ?>">View »</a>
            </p>
          </figcaption>
        </figure>
      <?php endforeach; ?>
    <?php endforeach; ?>
  </div> 
```

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <schools>    
    <RecentEdition>
        <school>
            <name>École1</name>
            <id>1</id>
            <link>./Marlburian0809/index.html</link>
            <image>./img/zine.jpg</image>
            <content>
                <chap link="./Marlburian0708/#/2/">The Master's Speech</chap>
                <chap link="./Marlburian0809/#/8/">College Community</chap>
                <chap link="./Marlburian0809/#/50/">Trips n Expeditions</chap>
                <chap link="./Marlburian0809/#/64/">Creative Arts</chap>
                <chap link="./Marlburian0809/#/92/">Sports</chap>
            </content>
            <description>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer luctus porta turpis, id congue nisi dapibus nec. Maecenas pulvinar blandit turpis, sit amet viverra arcu convallis id. Donec varius blandit orci nec molestie. Cras auctor, metus eget volutpat hendrerit, massa nibh tempor nunc, volutpat ultrices nibh eros vestibulum nulla. Aenean libero risus, auctor sed blandit ut, tincidunt non est. Nullam bibendum nunc non tortor eleifend consectetur. Proin porttitor, diam ac varius semper, leo odio mattis erat, id luctus ligula libero eu mi. Proin et lacus ligula. Quisque non consequat mauris. Morbi dolor mi, dapibus a condimentum ac, luctus at elit. Praesent sit amet felis at magna sagittis pharetra et vitae neque. 
            </description>
        </school>
    </RecentEdition>
  </schools> 
```

还有一个问题。如果我的自动完成中有一个大文本，例如：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Duis vulputate nibh urna。Aliquam in arcu vel diam malesuada malesuada。Ut volutpat hendrerit sollicitudin。Quisque 前庭 adipiscing rhoncus。Curabitur laoreet interdum tempus。Aliquam 坐在 amet urna quis dui rhoncus venenatis iaculis id arcu。Proin sit amet tincidunt est. Aenean ut Tellus lectus。前庭 ac enim orci。

我希望如果你写世界« Interdum tempus »，结果显示：« ...laoreet interdum tempus。Aliquam 坐... »

可能吗 ？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:07:35.370

您可能会混淆自动完成和搜索词突出显示。你想要_____吗：

1.  随着用户输入更多字母（即谷歌建议），慢慢显示可能的文本选择 - 或 -
2.  在搜索结果页面中突出显示已搜索的术语

或者也许你想两者都做，但看起来你正在谈论示例代码中的突出显示，尽管你的问题是关于自动完成......

无论如何，这里有一些自动完成描述和搜索词突出显示的代码：

```
<?php

$q = filter_var($_REQUEST['q'], FILTER_SANITIZE_STRING);
$query = (isset($q) && !empty($q)) ? $q : "";

?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Autocomplete/SearchHighlighting Example</title>
        <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
    <style type="text/css">
    span.highlighted {
        background-color: #FFF6C6;
        font-weight: bold;
    }
    span.term0 {
        color: #161633;
    }
    span.term1 {
        color: #331616;
    }
    span.term2 {
        color: #163316;
    }
    </style>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
    header, section, footer, aside, nav, article, figure, figcaption, audio, video, canvas  { display:block; }
  </style>
</head>
<body>
    <form id="search" name="search">
      <label for="q">Search: </label><input type="text" id="q" name="q" value="<?php echo $query; ?>" placeholder="Enter a search term" />
    </form>
    <div id="RecentEdition">
    <?php
    $schools = simplexml_load_file('ecoles.xml');
    foreach ($schools->RecentEdition as $RecentEdition): 
      foreach ($RecentEdition->school as $school):  ?>
        <figure>
          <img src='<?php echo "{$school->image} \n"; ?>' title='' />
          <figcaption>
            <h3>Contents</h3>
            <p class="over">
              <ul id="results">
                  <?php foreach ($school->content as $content):  ?>
                    <?php foreach ($content->chap as $chap):  ?>
                      <li><a href="<?php echo "{$chap['link']} \n"; ?>"><?php echo "{$chap} \n"; ?></a></li>
                    <?php endforeach; ?>
                  <?php endforeach; ?>
              </ul>
            </p>
            <p class="desc"><?php echo "{$school->description} \n"; ?></p>
            <p class="go">            
              <a href="<?php echo "{$school->link} \n"; ?>">View &#187;</a>
            </p>
          </figcaption>
        </figure>
      <?php endforeach; ?>
    <?php endforeach; ?>
  </div>
  <script type="text/javascript">
    $(function() {
      //Autocomplete    
                $("#q").autocomplete({                  
                    //define callback to format results
                    source: function(req, add){                 
                        //pass request to server
                        $.getJSON('search.php?callback=?', req, function(data) {
                            var suggestions = []; //create array for response objects
                            //process response
                            $.each(data, function(i, terms){
                                suggestions.push(terms.term);
                            });
                            add(suggestions); //pass array to callback
                        });
                    },
          //define select handler:     Search Term Highlighting function
          select: function(match, keywords) {
            var rawSearchString = $('#q').val().replace(/[a-zA-Z0-9\?\&\=\%\#]+s\=(\w+)(\&.*)?/,"$1"); // Return sanitized search string if it exists (term should be FIRST URL PARAMETER)             
            var searchString =  rawSearchString.replace(/ /g,"\|").replace("?term=",""); //  Replace '+' and '%20' with '|' for regex 
            var searchTerms = searchString.split('|'); // Split search terms on '|' and iterate over resulting array                                       
            for (var j in searchTerms) {          
              var regex = new RegExp(">([^<]*)?("+searchTerms[j]+")([^>]*)?<", "ig"); // this regex is the secret, it prevents text within tag declarations from being affected              
              var tempHTML = $('#RecentEdition').html(); // Do regex replace
              $('#RecentEdition').html(tempHTML.replace(regex, '>$1<span class="highlighted term'+j+'">$2</span>$3<')); // Inject span with class of 'highlighted termX' for term highlighting                             
            }
          }
                });    
    });
  </script>
</body>
</html> 
```

以及使用 xPath 的 PHP 搜索文件（称为“search.php”）：

```
<?php

header('content-type: application/json; charset=utf-8');

$term = urldecode($_REQUEST['term']);
$callback = $_GET["callback"];

$html = new DOMDocument();
@$html->load("ecoles.xml");
$xpath = new DOMXPath($html);
$query = "//schools/RecentEdition/school/description[contains(.,'".$term."')]";
$nodelist = $xpath->query($query);

$i = 0;
foreach ($nodelist as $n) {
  $result = trim($n->nodeValue);
  $resultArray[$i] = array( "term" => str_replace('"',"'",substr($result,strpos($result,$term),25)) );
  $i++;
}

$resultJSON = json_encode($resultArray);
echo $callback."(".$resultJSON.")";

?> 
```

演示在这里： [http ://bcmoney-mobiletv.com/widgets/autocomplete/](http://bcmoney-mobiletv.com/widgets/autocomplete/)

# google-app-engine - Google App Engine + Jersey + IntelliJ Idea

> ID：10362808
> 
> 赞同：1
> 
> 时间：2012-04-28T10:47:34.293
> 
> 标签：google-app-engine, intellij-idea, jersey

好的，所以我在这里遇到了一些烦人的问题。我显然错过了一些东西，并且在过去的 4-5 小时里已经为此感到沮丧。我似乎无法创建一个简单的 GAE+Jersey 并使用 IntelliJ 运行。令人沮丧的部分是我没有收到任何错误，只是部署后 REST 服务不存在。

我已经尝试了一些基本的东西，基本上你可以在谷歌（和这里）上找到的所有东西。经过一些挫折后，我下载了这个项目：[https](https://github.com/BluerockInteractive/GAE-Jersey-Guice-Sample) ://github.com/BluerockInteractive/GAE-Jersey-Guice-Sample 只是因为这将列出可用的服务器，以及更深的日志记录级别。现在这是 AppEngine 启动的输出：

[https://docs.google.com/open?id=0B42XvjSlpDCtTTdwQl9MSTBlQ0U](https://docs.google.com/open?id=0B42XvjSlpDCtTTdwQl9MSTBlQ0U)

所以我的问题是：AppEngine 已启动并正在运行。如果我创建一个基本的 servlet，一切都可以正常工作。但是，我无法让泽西岛工作。在我可以尝试的每一种形式中，它总是抛出一个

HTTP 错误 404

访问 /jerseyguicesample 时出现问题。原因：NOT_FOUND

由码头提供支持：//

任何想法，我可能会在这里遗漏什么？这是 IDE 和工件设置的图像：http: [//img51.imageshack.us/img51/7913/20120428124133.png](http://img51.imageshack.us/img51/7913/20120428124133.png)

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:23:49.770

此示例将 REST 处理程序映射到`/rest/test`、`/rest/players/{name}/xml`和。`/rest/players/{name}/json``/rest/hello`

你映射到什么（以及在哪里）`/jerseyguicesample`？

# google-app-engine - webapp2 的默认模型和处理程序目录？

> ID：10362817
> 
> 赞同：0
> 
> 时间：2012-04-28T10:49:15.080
> 
> 标签：google-app-engine, webapp2

是否有一种简单的方法可以使用 webapp2 配置模型目录和处理程序目录 - 可以在其中保存多个模型和处理程序文件？该文档似乎没有一个示例，其中处理程序不在 main.py 或根目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:57:32.893

创建一个包；创建一个目录并放入`__init__.py`其中。并将您的模型/处理程序模块放入这些目录中，并在必要时导入它们。

# iphone - 如果标签相等，则更改视图

> ID：10362831
> 
> 赞同：1
> 
> 时间：2012-04-28T10:52:56.443
> 
> 标签：iphone, ios, xcode, string, comparison

嗨，我得到了这段代码，当我按下按钮时，会发生很多事情，图像被设置等。但我也希望它比较 2 个标签，当它们相等时，我希望它改变视图。它不起作用，有人可以看看为什么吗？

```
-(IBAction)play {

if (labelsText.text == textview.text){

    GoedwoordViewController *Goedwoord = [[GoedwoordViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:Goedwoord animated:YES];
} 
```

labelsText 是我的输入标签，textview 是一个标签，其中会出现一个随机单词。

GoedwoodViewController 是目标视图。GameViewController 是当前视图。

希望有人知道

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T10:54:26.880

更改以下行...

```
 if ([labelsText.text isEqualToString textview.text]) 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:03:37.257

当你这样做时：

```
if(someString==anotherString){} 
```

您正在检查指针 of`someString`是否与 相同`anotherString`，因此切勿用于`==`比较字符串。
最好的办法是使用检查字符串是否相等的@Nit 解决方案。

# javascript - 禁止缓存来自特定主机的资源

> ID：10362832
> 
> 赞同：0
> 
> 时间：2012-04-28T10:52:57.713
> 
> 标签：javascript, browser, browser-cache

这是一个问题。我正在编写严重依赖 JS 的前端应用程序。为了测试它，我必须一遍又一遍地刷新网页。因为 chrome 缓存了所有资源，所以我每次都必须清除缓存。

有没有办法告诉浏览器根本不要缓存来自特定域的 JS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:01:49.410

```
var a = Math.random().toString().substr(2)
var url = '/some.js?' + a 
```

这种情况下，url 每次都会被当作新资源，不会从缓存中取出。我希望你可以自己做剩下的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:07:04.340

您可以`Cache-Control: no-cache`为上述资源使用 HTTP 标头（尽管您必须在 HTTP 服务器配置中指定此标头，但执行一次要容易得多。）

您还可以使用 Chrome 开发人员工具的“禁用缓存”功能（位于`General`设置窗格的部分，通过单击右下角的齿轮按钮调出）进行测试。

# ios - iOS 设备计算/内存限制

> ID：10362834
> 
> 赞同：1
> 
> 时间：2012-04-28T10:53:00.803
> 
> 标签：ios, ipad, device

我正在开发一款适用于 iOS 的游戏，要开始新游戏，请按照以下步骤操作：

1.  用户选择件数
2.  每件作品都是通过一个循环创建的
3.  比赛开始

在模拟器上，我可以选择任意数量的棋子，并启动任意数量的游戏，并且该应用程序运行良好。

但是在真实设备上（我的新 iPad 3），如果我选择超过 400 件，并且如果我开始（比如说）3 个游戏，每个游戏有 150 个，应用程序就会崩溃。我检查了断点，它在不同的行中崩溃：有时会创建一个片段，有时甚至在游戏开始之后。不幸的是，控制台没有告诉我任何事情。

我用仪器检查了应用程序：根本没有泄漏，总分配大小最多为 4 MB。而且我在我的 AppDelegate 中登录了 didReceiveMemoryWarning，但看起来它从未被调用过。

我的问题是：**我应该如何进行调试？我如何了解 iOS 设备的计算/内存限制是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:07:08.803

如果使用过多的内存导致您出现此问题，请尝试`NSLog`在`didReciveMemoryWarning`. 至于内存限制，我已经在这里看到了一些帖子。 [iOS 允许应用使用多少内存？](https://stackoverflow.com/questions/4169935/how-much-memory-does-ios-allow-apps-to-use) 或 [iPad 中的最大应用程序内存限制？](https://stackoverflow.com/questions/3585094/max-application-memory-limit-in-ipad)或 [iOS 内存分配 - 应用程序中可以使用多少内存？](https://stackoverflow.com/questions/6044147/memory-limit-and-ios-memory-allocation-in-iphone-sdk) 我想我还能找到更多:)

# c# - 无法将日期传递到存储过程

> ID：10362835
> 
> 赞同：2
> 
> 时间：2012-04-28T10:53:03.890
> 
> 标签：c#, sql, date

尝试将日期传递到存储过程中，如下所示：

```
@dateRegistered = '28/04/2012' 
```

但它一直告诉我：

> 将数据类型 varchar 转换为日期时出错。

如果我这样做，它会起作用：

```
@dateRegistered = '04/28/2012' 
```

但这不是我想要使用的格式。

我已运行以下查询来设置格式：

```
SET DATEFORMAT dmy 
```

为什么它不起作用？

编辑：这是我的做法：

在我的存储过程中，我放了：

```
SET DATEFORMAT dmy 
```

然后从代码中，我将其传递为：

```
myCommand.Parameters.Add("@dateRegistered", SqlDbType.Date);
myCommand.Parameters["@dateRegistered"].Value = DateTime.Now.ToString("dd/mm/yyyy"); 
```

我将它作为字符串传递以确保即使我的计算机（或服务器）具有不同的日期格式，它也将始终使用 dmy。

编辑编辑：

我将它作为 datetime.now 传递。我发的时候好像是把它转换成默认格式，我读的时候又把它转换回我的电脑格式。不确定这是如何发生的，但它似乎工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:56:09.907

看起来参数是a `date`（在数据库中），而您尝试传递a `string`（对应`varchar`于数据库中）。如果您改为传递 .NET`DateTime`对象，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T10:57:00.193

省去您的麻烦，并使用明确的日期格式 -`20120428 (YYYYMMDD)`或`2012-04-28`.

顺便说一句：您提到您正在使用 C#（基于标签）-您如何使用 ADO.NET？还是 Linq to SQL / EF / 其他一些 ORM？

编辑：

好的，使用`CONVERT`带有适当参数的函数来指示日期字符串的格式

例如：

```
declare @D datetime
set @D = CONVERT(datetime, '04/28/2012', 101)
print @D 
```

`101`是美国标准格式`mm/dd/yyyy`。

使用 convert 将确保无论日期顺序等任何环境设置如何，它都始终有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T12:11:25.013

dear your code is working after using *** SET DATEFORMAT dmy** because you are passing date as "dd/MM/yyyy" like "DateTime.Now.ToString("dd/mm/yyyy")"

check the date format in your database by following command :-

*   dbcc useroptions

and check "dateformat : mdy" by default. So passing your date in "MM/dd/yyyy" format will also work fine.

Happy Coding :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T11:11:23.783

如果你打电话`set dateformat dmy`，那只会影响当前的连接。在将字符串转换为日期之前，您必须每次都设置它。

最好的解决方案可能是 ISO 格式，就像@IanYates 建议的那样。

# silverlight-5.0 - 如何在 Silverlight 应用程序中确定调整大小何时结束？

> ID：10362836
> 
> 赞同：2
> 
> 时间：2012-04-28T10:53:20.307
> 
> 标签：silverlight-5.0

在普通的 WinForms 应用程序中，我们有一个名为 的事件`ResizeEnd`，但在 Silverlight 中我找不到它。

必须有一种方法可以知道用户在调整浏览器窗口大小后何时释放鼠标左键，这样我就可以只处理一个调整大小（或`SizeChanged`）事件（最后一个），而不是每次发生此事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:06:42.720

有[`OnResize`](http://msdn.microsoft.com/en-us/library/cc838211%28v=vs.95%29.aspx)事件。

> 指定当 Silverlight 插件的**对象**标记调整大小并且 Silverlight 插件的 ActualHeight 或 ActualWidth 更改时发生的**Resized事件的处理程序。**

 **这是在 HTML/ASP 中指定的：

```
<object ...>
    ...
    <param name "onresize" value"functionname" />
    ...
</object> 
```

当`ActualHeight`or`ActualWidth`属性更改时会触发此事件 - 但 Silverlight 插件处于全屏模式时不会触发。

不幸的是，我找不到任何信息来表明当浏览器窗口改变大小时会触发多少次。**

# heroku - DNS 路由在 Heroku 应用程序上不起作用

> ID：10362838
> 
> 赞同：1
> 
> 时间：2012-04-28T10:53:43.173
> 
> 标签：heroku, dns, hosting

我正在尝试为我的 Heroku Cedar 堆栈应用程序设置一个自定义域，但它不起作用。

我尝试在终端中输入“host www.mydomain.com”命令，但它没有产生任何输出。

我已经更改了我的 DNS 设置并添加了一个“CNAME”主机：www，直接到：我的 domain.herokuapp.com，但它仍然无法正常工作。

我在这里做错了什么？？？

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T17:00:02.150

事实上，您在终端没有得到任何结果，`host`那么问题在于您的 DNS 设置 - 有时更新需要一段时间才能在互联网上传播，我通常允许 24 小时确定。如果它仍然不起作用，那么您应该与您的 DNS 主机联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:55:32.260

您还必须将域条目添加到您的 Heroku 应用程序：

```
heroku domains:add yourdomain --app yourapp 
```

如果您位于 Rails 应用程序的根目录中，则不需要“-app yourapp”。

您可以向 Heroku 应用重复添加多个域。

这是 Heroku 开发中心的一篇关于添加自定义域和 DNS 设置的文章：

[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

# html - 选择同一类的2个div中的最后一个img

> ID：10362844
> 
> 赞同：4
> 
> 时间：2012-04-28T10:54:58.723
> 
> 标签：html, css, jquery-selectors, jquery

我有两个具有相同类的 div `.productList`，并且想`<img>`用 jQuery 操作两个 div 中的第二个。

我有以下内容；

```
$('div.productList').each(function(){
    $('img:last-child').css('margin-left','10px');
}); 
```

标记（部分）

```
<div class="productList">
<img src="images/parts/" width="120" height="120" alt="" title="" />
<img class="last" src="images/parts/" width="120" height="120" alt="" title="" /> 
```

我假设 using`.each()`会循环遍历每个 div 并找到最后一个`img`，但这对我不起作用。

有人可以指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:06:46.973

只需使用 css 来做到这一点：

```
div.productList img:last-child {
    margin-left: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T13:24:33.647

## “更好”的纯 CSS 方式

我同意 Ethan 的观点，你应该只使用 CSS 来做到这一点，但是，使用`last-child`选择器（如他所建议的那样）只有在`img`标签实际上*是最后一个 html 元素* `.productlist`时才有效（即标签后面没有其他`div`,`span`等） `img`- -[见例子](http://jsfiddle.net/RVc4g/)）。由于您只显示了部分标记，因此我完全不清楚。如果只是一系列`img`标签，那么使用Ethan的答案，否则......

**更好的 CSS3 解决方案**是使用`last-of-type`，因为它只会查找正在寻找的类型的元素（`img`在这种情况下）。因此，如果其他元素跟随它，[也没关系](http://jsfiddle.net/RVc4g/2/)。

```
.productList img:last-of-type {
    margin-left: 10px;
} 
```

**对于不支持 CSS3 的旧浏览器**，如果您的两个`img`标签实际上在您的标记中一个接一个地放置，并且它们是 中唯一成对的`img`标签`.productList`，那么对于那些旧浏览器的解决方案（这也适用于较新的 CSS3浏览器）将[使用相邻的兄弟选择器](http://jsfiddle.net/RVc4g/3/)：

```
.productList img + img {
    margin-left: 10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T11:11:58.870

要么像 Ethan 说的那样使用 CSS 来做，但如果你在 jQuery 中做，**那么绝对不需要 .each 语句**。只需使用 jQuery 选择最后一项：

```
$('.productList img:last-child').css('margin-left','10px'); 
```

在这里看到它：

[http://jsfiddle.net/Willyham/PM8eG/](http://jsfiddle.net/Willyham/PM8eG/)

CSS解决方案：

```
div.productList img:last-child {
    margin-left: 10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T10:57:32.510

```
$('div.productList').each(function(){
  $('img:last', this).css('margin-left','10px')
}); 
```

**CSS解决方案：**

```
div.productList img:last-child {
    margin-left: 10px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T11:25:18.117

一个工作[小提琴](http://jsfiddle.net/Vx9c9/2/)

```
 $('div.productList').each(function(){
        $(this).find('img:last').css('margin-left','50px');
   }); 
```

# lightbox - 显示包含在单个画廊中的图像

> ID：10362847
> 
> 赞同：2
> 
> 时间：2012-04-28T10:55:13.577
> 
> 标签：lightbox, lightbox2

我正在使用一个灯箱画廊，我设法将它集成到我的网站中。请看一个文件：[https](https://gist.github.com/2517910) ://gist.github.com/2517910 从文件中可以看出，我添加了两个画廊——每个画廊都有五张图片。当前的行为是：当我单击某张图片并显示它时，我可以浏览所有 10 张图片。我想要的是改变这种行为。那就是当我单击显示该画廊的第一个画廊 5 图片中的图片时，我想。当我点击第二个画廊中的图片时 - 显示了该画廊中的 5 张图片。而且我可以浏览每个画廊内的图片，而无需查看其他画廊中的其他图片。

# c++ - 使用 dfs 进行拓扑排序

> ID：10362848
> 
> 赞同：0
> 
> 时间：2012-04-28T10:55:18.170
> 
> 标签：c++, graph-theory, depth-first-search

这是在 C++ 中使用 DFS 的拓扑排序，它有错误（超出范围的错误）

```
#include<iostream>
#include<stdio.h>
using namespace std;
int count=0;
 static int *a=new int[8];

void dfs(int u,bool v[],bool matrix[][8])
{
    v[u]=true;
    for(int  i=0;i<8;i++)
        if(!v[i]&& matrix[u][i])
            dfs(i,v,matrix);

    a[count++]=u;
}

int main()
{
    bool v[8];
    bool matrix[8][8];
    matrix[7][6]=true;
    matrix[0][1];
    matrix[1][2]=true;
    matrix[2][3]=true;
    matrix[3][4]=true;
    matrix[2][5]=true;
    for(int i=0;i<8;i++)
        if(!v[i])
            dfs(i,v,matrix);
    for(int i=0;i<8;i++)
    cout<<a[7-i]<<"  ";
} 
```

请帮我解决这个错误，我想我应该创建矩阵[8][2]，但是之后如何继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:11:28.743

我做了一些更改，现在您的程序在[ideone](http://ideone.com/ALUiL)上成功完成 最重要的更改是您没有初始化矩阵和 v（即使没有此更改，程序仍然成功完成，但输出仅为 0-s）。我没有看到你所说的错误。当您没有初始化 v 时仅获得 0-s 的原因很明显 - 所有非零值以及所有被认为未访问的节点。

编辑：我还更改了第 27 行，您似乎忘记了“= true;”

编辑 2：你没有为不好的释放内存。另外我不明白为什么你需要动态数组。你事先知道它的大小。最后一点 - 如果您将数组矩阵和 v 设为全局，它们将自动归零（我并不是说这是一个好的方法，只是指出），但由于它们是本地的，它们不会归零。

# php - Fat Free 框架中的验证码

> ID：10362850
> 
> 赞同：4
> 
> 时间：2012-04-28T10:55:29.513
> 
> 标签：php, fat-free-framework

如何在 Fat Free 框架的登录表单中使用 CAPTCHA 插件？我以前从未使用过 CAPTCHA，所以我正在寻找某种教程来学习 FatFree 框架。

谁能指出一些资源或告诉我该怎么做？具体来说，我希望在模板的表单中插入验证码，然后在提交表单时检查正确性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:32:10.123

Fat Free 框架已经内置了验证码

```
<img src="/captcha" title="captcha image" alt="captcha"/>
<label for="code">Security Code</label>
<input type="text" name="code"/>
<p>{@message}</p> 
```

然后在您的应用程序中，您应该有一个路由来处理 src 属性中指定的 /captcha URL：

```
F3::route('GET /captcha','securityCode');
function securityCode() {
    Graphics::captcha(150,60,5);
} 
```

输入验证脚本将类似于：-

```
F3::input('code',
    function($value) {
        if (empty($value))
            F3::set('message','Security code is required');
        elseif ($value!=$_SESSION['captcha'])
            F3::set('message','Invalid security code');
    }
); 
```

有关完整文档，请参阅[http://bcosca.github.com/fatfree/](http://bcosca.github.com/fatfree/)

Fat Free Captch 存在已知错误，希望您使用最新版本进行修复

```
You know about the bug with captcha ()?
It's easy to fix!
Line number 81 in graphics.php with the error:
$ file = self:: $ global ['FONTS'].

Corrected version:
$ file = __DIR__ .'/../ fonts / '. self:: $ global [' FONTS ']. 
```

见：[http ://techzinger.blogspot.com/2011/02/fat-free-framework-for.html?showComment=1298024374012#c4330544534362949394](http://techzinger.blogspot.com/2011/02/fat-free-framework-for.html?showComment=1298024374012#c4330544534362949394)

# excel - 将列组导出到 Excel

> ID：10362852
> 
> 赞同：1
> 
> 时间：2012-04-28T10:55:37.150
> 
> 标签：excel, datatable, export

我想知道如何将带有列组的数据表以正确的格式导出到 excel 中。我正在使用 icefaces 数据表，但使用 primefaces 数据表将是相同的。

header 具有递归结构，因此您可以像 xml 文件一样解析，但我看不到反映到 excel 文件的方式，仅使用 jxl 或 poi。

我想有人需要将列组导出到 excel 中，现在我找不到执行此操作的工具。

任何想法？？

谢谢

# google-drive-api - Google Drive 身份验证问题

> ID：10362853
> 
> 赞同：3
> 
> 时间：2012-04-28T10:55:37.913
> 
> 标签：google-drive-api

我在使用 Ruby 使用 Google Drive 时遇到问题。

我可以创建一个 OAuth2 客户端并开始进行经过身份验证的调用。

我必须先查询 Google 文档列表才能获取文件列表，一旦我有了文件 ID，我就会尝试像这样查询 Google Drive API：

```
GET https://www.googleapis.com/drive/v1/files/0B9N873iFyYR7MkRfeTAxxxxxxx?access_token=ya29.AHES6ZRckKZ2jZfC6risUtH9ZZxxxxxxxxx 
```

但是我得到了这个：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "appNotInstalled",
    "message": "The authenticated user has not installed the app with client id xxxxx.apps.googleusercontent.com"
   }
  ],
  "code": 403,
  "message": "The authenticated user has not installed the app with client id xxxxx.apps.googleusercontent.com"
 }
} 
```

此客户端 ID 指的是我通过 Google API Dashboard 创建的应用程序，而不是 Chrome 网上应用店。

无论如何，我尝试设置一个托管的 Chrome Web 应用程序，配置（并支付）所有内容以允许测试用户列表，但我仍然收到相同的错误消息，尽管该应用程序是从市场上正确安装的（不是本地副本）。

使用相同的客户端和凭据，我可以调用[https://docs.google.com/feeds/](https://docs.google.com/feeds/)端点，但不能调用驱动器。

我的范围相当完整：（`'https://docs.google.com/feeds/,https://docs.googleusercontent.com/,https://spreadsheets.google.com/feeds/,http://gdata.youtube.com,plus.me,drive.file,userinfo.email,userinfo.profile'`不要看格式，它会在之后自动修复）并且效果很好。

我没有使用 Drive UI，我只想使用服务器端 API。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:09:57.037

您是否在清单中设置了 "api_console_project_id" : "xxxxxxxxxxxxx" 参数？此处提供了一个示例：[manifest.json](https://code.google.com/p/google-drive-sdk-samples/source/browse/chromewebstore/manifest.json)

# git - Git 通过单个命令重置和签出

> ID：10362868
> 
> 赞同：21
> 
> 时间：2012-04-28T10:57:52.593
> 
> 标签：git, git-checkout, git-reset

考虑一下我已经准备好提交一个`db/schema.rb`我不打算更改的文件（例如 ）。我需要去做：

```
git reset db/schema.rb
git checkout db/schema.rb 
```

我可以通过单个命令来完成吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-28T11:26:45.247

我试过这个，对我来说效果很好：

```
git checkout HEAD -- path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-27T19:55:57.040

我刚刚将此添加到我的`.zshrc`/`.bashrc`

```
checkout() {
  git reset "*$1*"
  git checkout "*$1*"
} 
```

然后你就可以做`checkout <file>`，你都准备好了。

# variables - 在 Coldfusion8 application.cfc 中的何处定义应用程序和会话变量？

> ID：10362869
> 
> 赞同：2
> 
> 时间：2012-04-28T10:58:07.647
> 
> 标签：variables, coldfusion, scope, coldfusion-8, application.cfc

我正在尝试设置我的第一个 application.cfc 文件。

我试图在“事件基础”上调用变量，如下所示：

```
<cffunction name="onApplicationStart" returnType="boolean" output="false">
    <cfparam name="Application.RootDir" default="/">
    <cfreturn true>
</cffunction>

<cffunction name="onSessionStart" returnType="boolean" output="false">
    <cfparam name="Session.activeSession" default="Yes">
    <cfparam name="Session.activeLogin" default="No">
    <cfreturn true>
</cffunction> 
```

我认为这会很好地工作，但事实证明，它没有，因为我需要先声明所有内容，如下所示：

```
 <cfparam name="Application.RootDir" default="">
 <cfparam name="Session.activeSession" default="">
 <cfparam name="Session.activeLogin" default=""> 
```

**我的问题**：
为什么我应该使用 CF 事件来声明变量。如果我无论如何都需要在事件之外声明，我可以为自己节省一行代码并声明并分配初始值？我是不是做错了，或者事件只是为了断言而不是为了声明？

感谢您的输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:37:09.257

“之前”（“之前声明所有内容”）是什么意思？在什么之前？onApplicationStart() 处理程序是应用程序启动时运行的第一件事，而 onSessionStart() 处理程序是会话启动时运行的第一件事。因此，在建立应用程序和会话的上下文中，没有“之前”。我认为您需要向我们展示更多代码：例如一些演示它们“不起作用”的代码。

也就是说，您没有向我们展示您的 Application.cfc 的伪构造函数部分，因此无法说出您在那里遇到的问题（如果有的话）。但是您需要在会话工作之前启用会话管理，并且您可能需要在应用程序或会话变量仍然存在之前命名您的应用程序（尽管它们也可能只适用于无名应用程序？即使他们这样做，最好命名您的应用程序）。

最后 - 这与你的变量是否设置无关，但你应该`<cfset>`在设置变量时使用，而不是`<cfparam>`. 两者在这里具有相同的效果，但前者是完成这项工作的正确工具。

# smtp - 更改 Exchange Server 2007 的 pop/smtp 设置

> ID：10362873
> 
> 赞同：1
> 
> 时间：2012-04-28T10:58:46.807
> 
> 标签：smtp, exchange-server, pop3

我在 Microsoft Exchange 服务器上花了几个小时，但我不知道如何更改 smtp 服务器/端口和接收邮件服务器。请记住，我们为此目的依赖共享主机。基本上我为此目的使用hostmonster：

发送邮件服务器：(SSL)：host216.hostmonster.com（服务器需要身份验证）端口 465 接收邮件服务器：(SSL)：host216.hostmonster.com IMAP：端口 993，POP：端口 995

有没有人有这种应用程序的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T17:46:00.850

On-premise Exchange 没有开箱即用的功能来从您的主机中抓取 POP/IMAP 数据。您可以通过它们进行中继，但是，如果您希望 Exchange 检索 POP/IMAP 邮件并将其缓存在本地邮箱中，则必须寻找第三方加载项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:07:54.743

Exchange 不支持 POP3。唯一的解决方案是使用第三方插件：[http ://www.servolutions.com/popcon.htm](http://www.servolutions.com/popcon.htm)

# python - 你如何在 Pygame 中使用基于圆的碰撞和组碰撞方法？

> ID：10362874
> 
> 赞同：7
> 
> 时间：2012-04-28T10:58:47.597
> 
> 标签：python, pygame

在浏览了文档和各种教程站点之后，我仍然无法理解使用矩形边界框碰撞检测以外的任何方法修改 sprite.collide 方法的方式。

我有一个程序需要检测精灵“Hook”与存储在名为“fishies”的精灵组中的任何一条鱼之间的碰撞

我可以用：

```
for hit in pygame.sprite.spritecollide(self, self.fishies) 
```

使用边界矩形返回碰撞精灵列表，但我想使用圆形或蒙版。

文档说我可以使用：

```
pygame.sprite.spritecollide(self, self.fishies, False, collided = None) 
```

其中“碰撞”是一个回调函数。但我无法弄清楚这意味着什么。简单写：

```
 pygame.sprite.spritecollide(sprite, group, dokill, pygame.sprite.collide_circle()) 
```

产生错误。

任何人都可以提供帮助，还是我误解了它应该如何工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T14:38:29.913

我认为您几乎拥有它-问题是您正在调用`collide_circle`而不是传递函数本身。尝试这样的事情：

```
pygame.sprite.spritecollide(hook, fish, False, pygame.sprite.collide_circle) 
```

语法上的唯一区别是省略了括号。pygame 需要的`collided`参数是一个函数，该函数接受两个精灵并返回一个布尔值，指示它们是否碰撞，因此您可以传递任何碰撞两个精灵的函数，甚至是自定义的。

# cakephp - CakePHP 验证错误消息

> ID：10362875
> 
> 赞同：3
> 
> 时间：2012-04-28T10:58:56.860
> 
> 标签：cakephp, validation, cakephp-2.0

我正在尝试修改 CakePHP 显示错误消息的方式。下面是它用来显示错误的通用模板

```
<div class="error-message">Please enter at least 3 characters.</div> 
```

我想将错误设置为如下所示。

```
<label class="error">Please enter at least 3 characters.</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:17:30.667

这完成了这项工作。我错过了文本参数。

```
 <?php echo $this->Form->error('name', null, array('wrap' => 'label', 'class' => 'error')); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:08:56.930

echo $this->Form->label("请至少输入 3 xter",array('class'=>'error');

# iphone - 从 plist 字符串中读取 url 图像

> ID：10362877
> 
> 赞同：1
> 
> 时间：2012-04-28T10:59:27.287
> 
> 标签：iphone, xcode, plist, cell, tableview

我有一个带字典的 plist。
在字典中，我有一个名为“cellPic”的字符串，其中包含图像的 url 地址。
我正在尝试使用我放在我的保管箱帐户中的图像填充我的表格视图并通过 plist 字符串读取它们。
（“arrayFromPlist”是我的数组）
问题是当我运行它时，我在控制台中收到错误：
[__NSCFDictionary objectAtIndex:]: unrecognized selector

这是我的代码：

```
-(void) readPlistFromDocs
{
    // Path to the plist (in the Docs)
    NSString *rootPath =
[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0];
    NSString *plistPath = [rootPath stringByAppendingPathComponent:@"Data.plist"];
    NSLog(@"plistPath = %@",plistPath);
    // Build the array from the plist  
    NSMutableArray *arrayFromDocs = [[NSMutableArray alloc] initWithContentsOfFile:plistPath];
if (arrayFromDocs)
{
    NSLog(@"\n content of plist file from the documents \n");
    NSLog(@"Array from Docs count = : %d", [arrayFromDocs count]);
}
    arrayFromPlist = [[NSArray alloc] initWithArray:arrayFromDocs];
}   

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

// Returns the number of rows in a given section.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrayFromPlist count];
    NSLog(@"Array SIZE = %d",[arrayFromPlist count]);
}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

NSURL *url = [[NSURL alloc] initWithString:[[arrayFromPlist objectAtIndex:indexPath.row] objectForKey:@"cellPic"]];
NSData *urlData = [[NSData alloc] initWithContentsOfURL:url];
[[cell imageView] setImage:[UIImage imageWithData:urlData]];

return cell;
} 
```

我的另一个问题是 - 当我从 plist 字符串中读取 url 时，如何异步加载图像？
我试图找到一个例子，但我发现只有异步没有uisng plist。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:06:53.270

更改以下行

```
NSDictionary *arrayFromDocs = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

[异步加载图像的最佳教程](http://iphonedevelopment.blogspot.in/2010/05/downloading-images-for-table-without.html)

希望对你有帮助..

# mysql - 错误 #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册

> ID：10362878
> 
> 赞同：0
> 
> 时间：2012-04-28T10:59:38.813
> 
> 标签：mysql, sql, mysql-error-1064

有人说哪里有bug吗？

```
CREATE PROCEDURE catalog_get_departments_list()
BEGIN
SELECT department_id, name FROM department ORDER BY department_id;
END$$ 
```

这个错误崩溃了：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:03:24.183

我认为你应该在最后删除美元：

```
CREATE PROCEDURE catalog_get_departments_list()
BEGIN
SELECT department_id, name FROM department ORDER BY department_id;
END 
```

或设置分隔符

```
DELIMITER $$
CREATE PROCEDURE catalog_get_departments_list()
BEGIN
SELECT department_id, name FROM department ORDER BY department_id;
END$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:15:28.167

您的 MySQL 客户端的另一种变体 -

```
CREATE PROCEDURE catalog_get_departments_list()
SELECT department_id, name FROM department ORDER BY department_id; 
```

# netbeans - 如何在 JavaME Netbeans 中获取 RAM 大小

> ID：10362880
> 
> 赞同：3
> 
> 时间：2012-04-28T11:00:00.817
> 
> 标签：netbeans, java-me, ram

我正在 Netbeans 中开发 JavaME 客户端应用程序。现在，我想知道分配给 JavaME 模拟器的 RAM 的大小。我试图找出 JavaME Netbeans 模拟器中 RAM 的大小。但我没明白。您能否建议我，如何在 JavaME 模拟器中获取 RAM 的大小。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:09:52.920

[我在http://www.techopedia.com/definition/24254/java-platform-micro-edition-java-me](http://www.techopedia.com/definition/24254/java-platform-micro-edition-java-me)
和 [http://www.developer](http://www.developer.nokia.com/Community/Wiki/CLDC)找到了关于 Java ME 内存要求及其 CLDC 规范的好文章。 [nokia.com/Community/Wiki/CLDC](http://www.developer.nokia.com/Community/Wiki/CLDC) 这些文章对我有帮助，我希望对您也有帮助。谢谢。

# java - 在方法所在的类中编码和解码序列化的 XML

> ID：10362881
> 
> 赞同：2
> 
> 时间：2012-04-28T11:00:09.003
> 
> 标签：java, xml-serialization

想不出有什么办法来描述，基本上就是在想能不能写个方法让当前对象变成解码后的序列化XML。

我知道 saveTillXML 可以工作，因为它会生成一个与当前 Till 对象的状态匹配的 XML 文件 [但实际上我不知道它是否有效，因为解码失败]。但是，当我调用 loadTillXML() 方法时，我得到了这些异常：

*   java.lang.reflect.InvocationTargetException
*   java.lang.IllegalStateException
*   java.lang.ArrayIndexOutOfBoundsException

我在窗口关闭时调用 saveTillXML() 方法，并在 Till 的构造函数中调用 loadTillXML 方法。

我在 Till 和 Till 使用的所有类中都有所有获取、设置和无参数构造函数。

```
public void saveTillXML() throws IOException{
    XMLEncoder encoder=new XMLEncoder(new BufferedOutputStream(new FileOutputStream("till.xml")));
    encoder.writeObject(this);
    encoder.close();        
}

public static void loadTillXML() throws IOException{
    XMLDecoder decoder=new XMLDecoder(new BufferedInputStream(new FileInputStream("till.xml")));
    decoder.readObject();       
    decoder.close();
} 
```

我唯一能想到的是`decoder.readObject()`没有涉及任何内容的事实，如果我想让当前实例成为它正在解码的 XML，这可能是应该的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:57:54.573

好的，我已经设法解决了我的问题。loadTillXML 需要一个返回方法——Till——这促使我认为它需要在 Till 之外调用。所以我用它而不是`private Till till=new Till();`在窗口中。

工作方法：

```
public static Till loadTillXML() {
    try{
        XMLDecoder decoder=new XMLDecoder(new BufferedInputStream(new FileInputStream("till.xml")));
        return (Till) decoder.readObject();     
    }
    catch(FileNotFoundException fNFE){
        System.out.println("Cannot find file");
        Till till=new Till();
        return till;
    }
} 
```

# javascript - 在 div 上模拟 javascript 中的鼠标事件以控制 div 显示的谷歌地图

> ID：10362885
> 
> 赞同：1
> 
> 时间：2012-04-28T11:00:11.923
> 
> 标签：javascript, google-maps, events

我想使用我自己的特殊输入坐标 (x,y) 来控制一个带有谷歌地图的 div 元素。

可以创建鼠标事件，其 x 和 y 坐标在 div（带有谷歌地图）元素内，并且来自谷歌地图的 JavaScript API 接受鼠标事件，就像用户使用真实鼠标创建事件一样。

# java - 面向对象的 2D 图形方法：将 JPanel 点击委托给绘制的对象

> ID：10362886
> 
> 赞同：4
> 
> 时间：2012-04-28T11:00:22.543
> 
> 标签：java, swing, jpanel, graphics2d, paintcomponent

来自 Qt，我总是`QGraphicsScene`与`QGraphicsItem`对象结合使用来绘制流程图、游戏板等内容。图形场景是小部件，相当于 Qt 的 Swing 组件。这些`QGraphicsItem`对象有自己的点击处理程序，因此对图形场景某些部分的点击会自动委托给正确的图形项。

我希望在 Java Swing 中复制这个工作流程。到目前为止，我只找到了一种手动绘制所有内容的方法，这也意味着我必须手动编写点击逻辑。它涉及继承 a`JPanel`并覆盖`paintComponent`函数，如下所示：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D)g;

    for (int row = 0; row < _numRows; ++row) {
        for (int col = 0; col < _numCols; ++col) {
            g2.drawRect(2 + _squareSize*col, 2 + _squareSize*row, _squareSize, _squareSize);
        }
    }
} 
```

Java Swing 是否有类似的面向对象的方式来绘制 2D 图形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:15:38.937

使用`Shape`. 有椭圆形、线形、多边形等形状。您可以使用现有的或使用`Area`类和组合创建自己的`Shapes`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T12:30:33.800

通常有两种方法可以实现：

1.  使用单个 JComponent 作为基础并将所有“项目”直接绘制到它上面（在 paintComponent 方法中）。在这种情况下，您必须自己处理所有鼠标/键事件，方法是向该 JComponent 添加鼠标/键侦听器并根据单击位置/按下的热键处理事件。

2.  另一种方法是使用任何容器（或​​只是简单的 JPanel）作为基础，并使用布局将任何其他组件放置在其上（例如，使用“空”布局，您可以通过容器内的绝对坐标简单地放置组件，也称为边界）。在这种情况下，不同的事件将根据它们在容器内的位置直接传递给这些组件（基本上 - 每个组件都有一个矩形边界，如果上面没有任何东西，所有事件都将传递给该组件，但您可以更改它“击”区域到您喜欢的任何形状）。同样在这种情况下，您可以使用自定义绘制组件作为子组件或标准 Swing 组件（如 JButton、JCheckBox 等）。

在大多数情况下，第二种方式是最好的，尽管有时第一种可能有用（例如，在创建一些图像编辑器、类似绘画的应用程序或任何其他处理图形的应用程序时）。

# php - 使用 CodeIgniter 和 PHP，有没有办法向客户端发出重定向并继续执行当前脚本？

> ID：10362899
> 
> 赞同：0
> 
> 时间：2012-04-28T11:02:30.517
> 
> 标签：php, codeigniter-2

我有一个处理表单输入的页面。它做一些事情，发送一些电子邮件，并将客户端重定向到另一个页面。事情进展顺利。

我发送电子邮件的问题很慢，如果我必须发送几封电子邮件，响应时间是不可接受的。我想将客户端重定向到结果页面，然后发送电子邮件。不幸的是，`redirect()`CodeIgniter 中的调用结束了执行。

有没有办法进行 302 重定向并允许脚本继续执行？

清除 302 重定向标头很重要。关闭连接是可以的，但不是必需的。重要的是用户在发送电子邮件*之前*被重定向，以便不必等待电子邮件发送完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:42:30.437

我认为使用消息队列比让可能的僵尸进程坐在那里更合适。基本上，当执行此操作时，将作业转储到作业队列中，其中包含电子邮件的正文、收件人、主题等。然后设置一个 cron 作业以每两分钟读取一次该队列，例如，然后发送出电子邮件。

您还可以考虑使用类似 Amazon 的 Simple Queue Service (http://aws.amazon.com/sqs/faqs/#What_can_I_do_with_Amazon_SQS) 以及 Simple E-Mail Service 来创建可扩展的解决方案。

# jquery - 在 Joomla 2.5 插件中添加 js

> ID：10362901
> 
> 赞同：0
> 
> 时间：2012-04-28T11:03:03.090
> 
> 标签：jquery, plugins, joomla-extensions, joomla2.5

我只是想添加一个 js 文件，但我无法让它工作......我已经用谷歌搜索但还没有找到任何帮助.. 任何帮助都非常重要

这是我的代码：

```
<?php

defined('_JEXEC') or die('Restricted access');
jimport('joomla.plugin.plugin');

class plgSystemInfinityScroll extends JPlugin {
protected $_execute;

function __construct(&$subject, $config) {
    $app = JFactory::getApplication();

    if($app->isAdmin())
    {
        return;
    }

    parent::__construct($subject, $config);
    $this->loadLanguage('', JPATH_ADMINISTRATOR);
    $this->_execute = true;
}

public function onBeforeCompileHead() {

    $document =& JFactory::getDocument();
    $document->addScript('/plugins/system/sjdinfinitescroll/jquery.infinitescroll.js');

}

public function onAfterRender() {

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:05:48.823

首先，Id 使用插件事件：

```
function onBeforeRender(){

} 
```

其次，您的路径指向错误。

将其更改为：

```
//J1.6+
$script= JURI::root(true).DS.'plugins'.DS.'system'.DS.'sjdinfinitescroll'.DS.'jquery.infinitescroll.js';
$document =& JFactory::getDocument();
$document->addScript($script); 
```

如果您在同一页面上加载了 MooTools，则必须使用 jQuery.noConflict(); 以避免冲突。

全部一起：

```
function onBeforeRender(){
      $script= JURI::root(true).DS.'plugins'.
           DS.'system'.DS.'sjdinfinitescroll'.DS.'jquery.infinitescroll.js';
      $document =& JFactory::getDocument();
      $document->addScript($script);
      $document->addScriptDeclaration('jQuery.noConflict();');
      $document->addScriptDeclaration('jQuery(function($){ $('#myid'.append('<h2>my header</h2>');} );');
} 
```

# javascript - 淘汰赛添加计算中断可观察数组

> ID：10362905
> 
> 赞同：1
> 
> 时间：2012-04-28T11:03:26.410
> 
> 标签：javascript, knockout.js

嗨，我正在尝试根据[http://knockoutjs.com/documentation/fn.html](http://knockoutjs.com/documentation/fn.html)此处的示例（在底部）使用计算值来制作可观察数组的过滤版本。

对于我拥有的 html

```
<select  width="50px" data-bind="options: $root.resources, optionsText: 'Name'"></select>
<select  width="50px" data-bind="options: $root.available, optionsText: 'Name'"></select>​ 
```

我的 viewModel 看起来像这样：

```
var viewModel = function() {
    var self = this;
    self.resources = ko.observableArray([{Name: "Anna",Available: true}, {Name: "Bert", Available: false}]);  

    self.getFilteredResources = function (isAvailable) {
        var all = self.resources(), results = [];
        var resource;
        for (resource in all){
            if (resource.Available() === isAvailable){
                results.push(resource);
            }
        }
        return results;
    };    
    //self.available = ko.computed(function() { self.getFilteredResources( true);}, this);    
};

ko.applyBindings(new viewModel());​ 
```

您还可以在此处查看代码[http://jsfiddle.net/patrickhastings/eCtFY/1/](http://jsfiddle.net/patrickhastings/eCtFY/1/)

就目前而言，一个下拉菜单中有一个 Anna 和 Bert，一个空的很好。

当我取消注释声明 self.available 而不是第二个下拉列表中填充 Anna 的行时，我得到两个空下拉列表。帮助请告诉我我在哪里愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:08:26.277

这个有几个小问题：

您正在调用`resource.Available()`并且`Available`不是可观察的，因此您只需要检查`resource.Available === isAvailable`.

此外，您计算出的 observable 需要`return`以下结果`self.getFilteredResources`

这样做`for resource in all`会给你索引而不是资源本身。

我会推荐类似的东西：http: [//jsfiddle.net/rniemeyer/jCYT7/](http://jsfiddle.net/rniemeyer/jCYT7/)

# c# - 在 WPF 中快速渲染绘图视觉效果

> ID：10362911
> 
> 赞同：6
> 
> 时间：2012-04-28T11:04:14.637
> 
> 标签：c#, wpf, drawing, drawingcontext

目前我在画布上有一个图像，我可以在我的应用程序中自由移动，我在上面渲染了 6 层 DrawingVisuals，但它似乎很慢。我正在使用 RenderTargetBitmap 来渲染视觉效果。有没有更快的方法在图像或任何其他我可以在画布上自由移动的框架元素上显示视觉效果？

xml:

```
<Canvas>
    <Image Height="505" HorizontalAlignment="Left" Margin="0,0,0,0" Name="_MapImage" Stretch="Fill" VerticalAlignment="Top" Width="700" MouseLeftButtonDown="_MapImage_MouseDown" MouseWheel="_MapImage_MouseWheel" MouseLeftButtonUp="_MapImage_MouseUp" MouseMove="_MapImage_MouseMove" />
</Canvas> 
```

代码：

```
_renderRoutesBitmap = new RenderTargetBitmap((int)(_MapImage.Width), (int)(_MapImage.Height), 96, 96, PixelFormats.Default);

for (int i = 6; i < 8; ++i)
{
     if((layerCode / (int)Math.Pow(10,i) % 2) == 1)
     _renderRoutesBitmap.Render(_layers[i]); //takes too much time
}
_RouteImage.Source = _renderRoutesBitmap; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:11:53.073

前段时间我不得不做类似的事情，我必须编写自己的 GIS 应用程序。我必须绘制成千上万的绘图视觉效果，我的发现是`RenderTargetBitmap`位图操作不是一个好的选择，因为它没有使用图形硬件加速。Silverlight 有更合适的类；`WriteableBitmap`这允许您的应用程序直接写入 GPU 缓冲区。唯一的问题是它仅适用于 Silverlight。如果您想坚持为您的操作使用位图，那么您可以使用等效的`WriteableBitmap`for WPF，它`WriteableBitmapEx`可以[在此处](http://writeablebitmapex.codeplex.com/)获得。

由于您总共只有 6 个绘图视觉效果，我建议您转而使用更高级别的 UI 元素，例如 Shapes 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:47:37.450

[使用Render](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.render.aspx)显示视觉对象不是一个好的解决方案。如果您有 Canvas 并且想要渲染您的视觉效果，则不需要将视觉效果转换为位图，如果您进行转换，则您的图像无法在不降低质量的情况下任意缩放（矢量图形的功能） . 还有另一种可能性：创建自己的 Canvas。我目前用这个方法，画上千个形状都没有问题。这是一个非常简单的例子：

```
public class DrawingCanvas : Panel
{

public List<Visual> visuals = new List<Visual>();

public void AddVisual(Visual visual)
{
    if (visual == null)
        return;
    this.visuals.Add(visual);

    base.AddVisualChild(visual);
    base.AddLogicalChild(visual);
}

public void RemoveVisual(Visual visual)
{
    if (visual == null)
        return;
    this.visuals.Remove(visual);

    base.RemoveVisualChild(visual);
    base.RemoveLogicalChild(visual);
}

} 
```

使用 DrawingCanvas 而不是[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)类。

# php - Yii HAS_MANY 有一些固定值

> ID：10362915
> 
> 赞同：0
> 
> 时间：2012-04-28T11:04:48.250
> 
> 标签：php, yii

我有两个模型。批次和主题。它们之间的关系是 Batch HAS_MANY Subjects。问题是三个主题是必须的，并且适用于所有批次。我如何在模型中实现这个固定值（三个主题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:24:32.733

如果您真的不想在数据库中存储 3 个默认主题，您可以编写一个函数，该函数返回默认主题以及与 Batch 对象实际相关的任何主题。

假设您的关系称为“主题”：

```
class Batch extends CActiveRecord
{
  ...
  public function getAllSubjects()
  {
    $subject1 = new Subject;
    ...
    $subject2 = new Subject;
    ...
    $subject3 = new Subject;
    ...
    return array($subject1, $subject2, $subject3) + $this->subjects;
  } 
```

限制是您不能引用数据库标准中的默认主题，并且您必须确保使用`$model->allSubjects`而不是`$model->subjects`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:36:48.777

使用自定义验证器。这应该有效，尽管它未经测试。

```
class RelatedObjAttrRangeValidator extends CValidator {
  public $relationName;
  public $relatedObjectAttributeName;
  public $relatedObjectValues = array();

  public function validateAttribute($object, $attribute) {
    if(!$this->relationName) {
      $this->relationName = $attribute;
    }
    if(!$this->relatedObjectAttributeName || !count($this->relatedObjectValues)) {
      throw new CException("Misconfigured Validator!");
    }

    $relatedObjects = $object->getRelated($this->relationName);
    if(is_array($relatedObjects)) {
      $unmatched = array_values($this->relatedObjectValues);
      $attr = $this->relatedObjectAttributeName;
      foreach($relatedObjects as $relObj) {
        $val = $relObj->$attr;
        $idx = array_search($val, $unmatched);
        if($idx !== -1) {
          unset($unmatched[$idx]);
        }
        if(!count($unmatched)) {
          break;
        }
      }
      if(count($unmatched)) {
        $object->addError($attribute, $this->message);
      }
    } else {
      throw new CException(Yii::t('error', 'Relation {rel} in model {model} is not an array!', array(
        '{rel}' => $this->relationName,
        '{model}' => get_class($model),
      ));
    }
  }
}

class Batch extends CActiveRecord {
  public function rules() {
    return array(
      array('subjects', 'RelatedObjAttrRangeValidator', 
        'relatedObjectAttributeName' => 'ID',
        'relatedObjectValues' => array("required_id_1", "required_id_2", "required_id_3"),
        'message' => "One or more required Subjects are missing",
    );
  }
} 
```

# ruby-on-rails - Rails 教程 - 必须在关闭验证的情况下保存用户

> ID：10362916
> 
> 赞同：0
> 
> 时间：2012-04-28T11:05:33.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railstutorial.org

我已经按照 Rails 教程进行操作，并且有一个可以工作的用户系统，但有一件事让我很恼火：保存用户时，即使只是在控制台中，我也必须关闭验证，因为如果没有保存密码和密码确认，它就不会保存，并设置为相同的东西。

这很痛苦，如果我向用户添加其他重要的验证，这似乎有潜在的危险。那么有什么好的方法来处理这个问题吗？真的，我希望仅当更新来自用户而不是我自己的代码时才应用验证。

所以用户模型有这个：

```
 validates :password, length: { minimum: 6 }
  has_secure_password # this does the hashing, comparisions, etc for us.
  validates :password_confirmation, presence: true 
```

这在创建用户时非常有用，并且在用户编辑他/她的个人资料时非常有用，因为它需要再次输入密码。但是，对于其他编辑，这很烦人。例如：

```
user = User.find_by_name("bob")
user.reputation = 200
user.save(validate: false) # I really don't want to have to care about password validations here. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:12:44.520

你可以打电话

```
@user.save(:validate => false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:12:27.327

您可以尝试仅在创建时进行验证。这将使密码（或其他变量）仅在注册时才需要，而在您编辑现有用户时则不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T09:21:56.733

你为什么不为它创建不同的模型，一个用于登录和密码更改的安全模型，以及一个用于其他任何东西的配置文件模型，提供声誉、奖章和其他东西。

在第一个模型中创建新函数可以让你完全忘记第二个，比如

```
def reputation value
    self.profile.reputation = value
    self.profile.save
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T00:30:28.127

如果您想控制跳过验证的属性，您可能需要尝试使用 ValidationSkipper gem：

[https://github.com/npearson72/validation_skipper](https://github.com/npearson72/validation_skipper)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T04:06:00.543

派对有点晚了，但如果你想更新单个属性，你可以使用 update_attribute 方法跳过验证检查。在这种情况下，您可以致电

```
user.update_attribute :reputation, 200 
```

# ios - 制作一个移动图像的按钮

> ID：10362924
> 
> 赞同：0
> 
> 时间：2012-04-28T11:06:24.633
> 
> 标签：ios, uiimageview

我想制作一个按钮，将我的图像向上移动一帧高度，如果再次按下按钮，将图像向下移动一帧高度。

[http://imageshack.us/photo/my-images/140/72197925.png/](http://imageshack.us/photo/my-images/140/72197925.png/) （解决方案说明）

我正在尝试使用尽可能少的代码。

```
UIImage *image = [UIImage imageNamed:@"01bear.png"];
imageView = [[UIImageView alloc] initWithImage:image];
CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:applicationFrame];   
scrollView.contentSize = CGSizeMake(5760, 1);

[scrollView addSubview:imageView];
[window addSubview:scrollView];
[window makeKeyAndVisible];

scrollView.delegate = self;
scrollView.pagingEnabled = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:14:26.450

一些问题：

您是否将滚动视图用于其他事情，或者只是为了让您的图像移动？

你想让你的图像视图向上，然后向下，还是突然移动？

如果您想要做的只是让您的视图动画向上然后向下，则滚动视图非常复杂。为此，您应该查看 UIView 类方法 animateWithDuration:animations: 及其变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:13:35.817

在按钮的 touchUpInside 事件上，您需要更改：

```
scrollView.contentOffset = CGPointMake(X,Y);//required value to scroll the scrollview 
```

如果您只想移动图像视图，您可以使用：

```
[imageView setCenter:CGPointMake(X,Y)];//required value 
```

# servlets - HTTP 状态 404 - 使用 apache tomcat 6 的 Servlet HelloServlet 不可用

> ID：10362934
> 
> 赞同：0
> 
> 时间：2012-04-28T11:07:13.743
> 
> 标签：servlets

```
Apr 28, 2012 3:48:02 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Error loading WebappClassLoader
  context: /hello
  delegate: false
  repositories:
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@6eb38a
 HelloServlet
java.lang.ClassNotFoundException: HelloServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source)
Apr 28, 2012 3:48:02 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet HelloServlet
java.lang.ClassNotFoundException: HelloServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source)
Apr 28, 2012 3:48:23 PM org.apache.catalina.core.StandardWrapperValve invoke
INFO: Servlet HelloServlet is currently unavailable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:26:47.090

检查 $TOMCAT_HOME$/webapps/hello/WEB-INF/classes 文件夹，它是否有您的 HelloServlet (HelloServlet.class) 的编译版本。

你的 HelloServlet 类的完全限定包名是什么 - 你需要确保你的 web.xml 引用了完全限定名（如果你的 HelloServlet 有 xyx 的包定义，那么 web.xml 需要引用`x.y.z.HelloServlet`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T07:44:27.890

1 - 转到项目中的 web.xml 文件。

2 - 查看标签`<servlet-class>`并确保其格式如下。`eclipsePackage.JavaClass`.

这个问题非常具有描述性，它无法加载指定的类，因为它无法加载`locate`。位置来自`web.xml`。确保上述选项卡中的路径正确。

# c++ - Boost.Signals2 销毁安全

> ID：10362936
> 
> 赞同：2
> 
> 时间：2012-04-28T11:07:43.130
> 
> 标签：c++, memory-management, boost-signals2

我在对象 1 上有一个 Boost.Signals2 信号，我在对象 2 上连接到它。
如果对象 2 被破坏，信号将不会断开，这会在发出信号时导致坏事。
为了解决这个问题，我`scoped_connection`在对象 2 上保留了一个。现在的问题是，如果对象 1 用信号破坏然后对象 2 破坏怎么办。
会不会造成问题？有没有更好的方法来解决一般问题？（具有来自对象 1 -> 对象 2 的连接，当它们中的一个被破坏时将断开连接）。

演示该问题的代码：

```
auto sig = new signal<void ()>();
auto conn = new scoped_connection(sig.connect(&some_function));
delete sig;
delete conn; 
```

这安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T11:17:59.440

查看

[http://www.boost.org/doc/libs/1_55_0/doc/html/signals2/tutorial.html#signals2.tutorial.connection-management](http://www.boost.org/doc/libs/1_55_0/doc/html/signals2/tutorial.html#signals2.tutorial.connection-management)

特别是部分：

> “但是，使用 Boost.Signals2 可以通过使用 slot::track 跟踪由 shared_ptr 管理的任何对象。当任何跟踪的对象过期时，插槽将自动断开连接。此外，Boost.Signals2 将确保没有跟踪对象在与其关联的槽处于执行中期时过期。它通过在执行它之前创建槽跟踪对象的临时 shared_ptr 副本来实现。"

这能解决您的问题吗？

# android - 简单的 mediaPlayer 示例不起作用！为什么？

> ID：10362938
> 
> 赞同：0
> 
> 时间：2012-04-28T11:07:51.977
> 
> 标签：android, media-player

从开发人员指南中，我举了这个简单的例子：

```
 MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
               mediaPlayer.start(); // no need to call prepare(); create() does that for you 
```

但是没有声音！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:11:58.310

检查您的手机（或）以下代码中的媒体音量以播放声音文件：

这对我有用：

```
 public void play()
    {
        Thread playThread = new Thread() {
            public void run()
            {
                mediaPlayer = MediaPlayer.create(VastuActivity.this, R.raw.click);
                mediaPlayer.start();
            }
        };

        playThread.start();
    } 
```

调用方法`play();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:25:00.380

你做对了一切。它可能不起作用的唯一原因是声音有问题，可能是您使用的文件不受支持（在这种情况下，您应该在所有消息选项卡中看到一些异常）或者它只是您的设备

# c# - 快速排序堆栈溢出

> ID：10362939
> 
> 赞同：1
> 
> 时间：2012-04-28T11:07:57.643
> 
> 标签：c#, stack-overflow, quicksort

我的通用快速排序算法有两个我无法确定原因的问题。

1.  列表有时未正确排序
2.  在处理大于 20,000 个项目的列表时，如果值重复很多，我经常会出现堆栈溢出（我认为这不应该是一个真正的问题）

未正确排序的列表很少见，因此列表必须相当大。下面的粘贴显示了已安装软件的 172 个元素列表的前 13 个元素，第一列显示第一次排序后的输出，第二列显示第二次排序。

```
Adobe AIR                         7-Zip 4.65 (x64 edition)
7-Zip 4.65 (x64 edition)          Adobe AIR
Adobe Community Help              Adobe Community Help
Adobe Encore CS4 Codecs           Adobe Encore CS4 Codecs
Adobe Media Encoder CS4 Exporter  Adobe Media Encoder CS4 Exporter
Adobe Media Encoder CS4 Importer  Adobe Media Encoder CS4 Importer
Adobe Media Player                Adobe Media Player
Adobe Reader X (10.1.0)           Adobe Reader X (10.1.0)
Adobe Setup                       Adobe Setup
Adobe Setup                       Adobe Setup
Apple Application Support         Adobe Setup
Adobe Setup                       Apple Application Support
Apple Mobile Device Support       Apple Mobile Device Support
...                               ... 
```

如您所见，第一次对其进行排序时，存在一些不正确的行为，可以通过进行另一次排序来解决。

如果我对我的大型 Windows 事件日志列表进行排序，则会发生堆栈溢出的第二个问题。如果我在 4 周内对 52,000 个日期进行排序，这似乎很高兴；但是如果我对有很多重复的 52,000 个 ID 号进行排序，我的堆栈大小在系统崩溃之前很久就会变成 998 个项目。如果我按主要是“gupdate”的列对 30,000 长列表进行排序，也会发生这种情况。

现在，据我所见，堆栈计数应该是 log2(n)，因为添加到堆栈的数量等于完成的一半切割的数量。

我使我的枢轴随机以帮助实现这种效果，但这并没有太大的不同。

Log2(60000) = 16。这对于堆栈溢出来说是不够的！

这是相关的代码：

```
private static void QuickSortFunction<T>(T[] array, int start, int end, Comparer<T> comparer)
{
    if (end - start >= 1)
    {
        int leftPtr, rightPtr, pivot;
        Random random = new Random();
        pivot = random.Next(start, end);
        Swap(array, pivot, start);
        pivot = start;

        leftPtr = start + 1;
        rightPtr = end;

        while (leftPtr < rightPtr)
        {
            while ((comparer.Compare(array[leftPtr], array[pivot])) <= 0 && (leftPtr < rightPtr))
            {
                leftPtr++;
            }

            while ((comparer.Compare(array[rightPtr], array[pivot])) >= 0 && (leftPtr <= rightPtr))
            {
                rightPtr--;
            }

            if (leftPtr < rightPtr)
            {
                Swap(array, leftPtr, rightPtr);
            }
        }
        Swap(array, pivot, rightPtr);
        pivot = rightPtr;

        QuickSortFunction(array, start, pivot - 1, comparer);
        QuickSortFunction(array, pivot + 1, end, comparer);
    }
}

private static void Swap<T>(T[] array, int pointer1, int pointer2)
{
    T temp = array[pointer1];
    array[pointer1] = array[pointer2];
    array[pointer2] = temp;
} 
```

对于任何感兴趣的人，这是对无序故障的修复。基本上，当它出现故障时，它无法识别 2 元素数组。例如 {E, B}，它不会改变，因为它不会查看自己的枢轴。

```
 if (end - start >= 1)
    {
        int leftPtr, rightPtr, pivot;
        Random random = new Random();
        pivot = random.Next(start, end);
        Swap(array, pivot, start);
        pivot = start;

        leftPtr = start;
        rightPtr = end;

        while (leftPtr < rightPtr)
        {
            while ((comparer.Compare(array[leftPtr], array[pivot])) < 0 && (leftPtr < rightPtr))
            {
                leftPtr++;
            }

            while ((comparer.Compare(array[rightPtr], array[pivot])) >= 0 && (leftPtr < rightPtr))
            {
                rightPtr--;
            }

            if (leftPtr < rightPtr)
            {
                Swap(array, leftPtr, rightPtr);
            }
        }
        Swap(array, pivot, rightPtr);
        pivot = rightPtr;

        QuickSortFunction(array, start, pivot - 1, comparer);
        QuickSortFunction(array, pivot + 1, end, comparer);
    } 
```

一旦我编写了堆栈溢出的解决方案，就会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:32:33.663

Let's look at the out-of-order issue first. the big loop goes until `leftPtr >= rightPtr`. Since your second loop tests for `leftPtr <= rightPtr`, it is possible that at the end `leftPtr > rightPtr`, in which case you are swapping (after the big loop) the pivot and an element that has been deemed "OK" (`rightPtr` points to something that has been passed by `leftPtr`)

Not sure about the stack overflow issue, but Hammar's suggestion seems reasonable especially that you said the problem occurs on large lists of many equal elements

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:27:37.880

> 现在，据我所见，堆栈计数应该是 log2(n)，因为添加到堆栈的数量等于完成的一半切割的数量。

仅当您将输入分成类似¹大小的两半时，这才是正确的。例如，如果您正在对所有项目都相等的列表进行排序，那么您会得到一个非常不均匀的拆分，其中一侧没有元素，而另一侧除了枢轴之外的所有内容。在这种情况下，您会得到*O(n)*堆栈大小，因为每个级别只会将输入大小减少 1。

避免这种情况的一种方法是使用三向分区代替，它将所有等于枢轴的元素放在中间。

[¹如果拆分总是比某个恒定比率好，那就没问题了。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:33:11.797

观察你创建的无限循环......函数必须终止才能在使用中实现其内在价值。

# java - 在 groovy 脚本 (soapui) 中导入 jar 时出错

> ID：10362941
> 
> 赞同：6
> 
> 时间：2012-04-28T11:08:34.330
> 
> 标签：java, groovy, soapui

我从 groovy 脚本运行 java 代码时遇到问题（groovy 脚本是 SoapUI 测试套件的一部分）我创建了简单的脚本：

```
import myjar.jar
new TopClass().sayHello() 
```

TopClass 的代码：

```
public class TopClass {
    public void sayHello (){
        System.out.println("Hello");
    }   
} 
```

我将 myjar.jar 放入了 soapui-pro-2.5\lib 和 soapui-pro-2.5\bin\ext 文件夹。但运行脚本我得到：

> org.codehaus.groovy.control.MultipleCompilationErrorsException：启动失败，Script1.groovy：2：无法解析类 myjar.jar @ 第 2 行，第 1 列。org.codehaus.groovy.syntax.SyntaxException：无法解析类 myjar.jar @ line 2, column 1\. at org.codehaus.groovy.ast.ClassCodeVisitorSupport.addError(ClassCodeVisitorSupport.java:113) at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:970) at org.codehaus。 groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:141) at org.codehaus.groovy.control.CompilationUnit$5.call(CompilationUnit.java:527) at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java :772) 在 org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:438) 在 groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:281) 在 groovy.lang.GroovyShell.parseClass(GroovyShell.java:572) 在 groovy.lang.GroovyShell.parse(GroovyShell.java:584) 在 groovy.lang.GroovyShell.parse(GroovyShell.java:564) 在groovy.lang.GroovyShell.parse(GroovyShell.java:603) 在

请帮我找出我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T17:56:44.357

将 jar 放在下面`soapui-pro-2.5\bin\ext`是找到类所需的全部内容（尽管重新启动`SoapUI`不会受到伤害）。

但是 - 您应该检查您收到的错误是否与您的 jar 相关。`com.my.research`内可用吗`myjar.jar`？如果没有 - 只需添加它。

如果是，请在您的帖子中添加更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:42:17.583

导入 myjar.jar

我认为这是不正确的，您应该导入 java 包的名称而不是 jar 的名称。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T22:55:47.167

在soapui 的非Windows 实现上，我发现如果将它添加到显式启动soapui 的.sh 文件中会有所帮助。

# caching - JSF2 静态资源缓存

> ID：10362942
> 
> 赞同：3
> 
> 时间：2012-04-28T11:08:49.220
> 
> 标签：caching, jsf-2, filter, primefaces, java-ee-6

Glassfish 3.1.2、Mojarra 2.1.6、SSL 已激活

我有一个关于静态资源缓存的问题。我已经阅读了一些关于此的帖子，但我不确定我们应该使用哪些选项。这

[https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)

也是一篇关于资源缓存的好文章。在我们的应用服务器中 SSL 被激活。我们看到静态资源（图像、脚本、css）没有被缓存。

这是我的测试过滤器：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    if (request instanceof HttpServletRequest && response instanceof HttpServletResponse) {
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        String uri = httpRequest.getRequestURI();
        if (GET_METHOD.equalsIgnoreCase(httpRequest.getMethod()) && uri.contains(ResourceHandler.RESOURCE_IDENTIFIER)) {
            httpResponse.setDateHeader("Expires", System.currentTimeMillis() + 2419200000L); // 1 month in future.
            httpResponse.setDateHeader("Last-Modified", System.currentTimeMillis() - 2419200000L); // 1 month in past.
            httpResponse.setHeader("Cache-Control", "public"); // Secure caching
        }
    }
    chain.doFilter(request, response);
} 
```

*   过期：好的。它是一种不会更改的静态资源，因此我们将到期日期设置为未来一个月。
*   最后修改：不确定。我读过将其设置为过去也会影响缓存
*   缓存控制：好的。允许安全缓存。安全影响？

这个设置有影响吗？我还阅读了很多帖子，其中应通过过滤器禁用缓存。我看到的唯一问题是用户可能在新版本上遇到问题。新版本中可以更改样式和脚本，但浏览器会忽略新版本并使用缓存中的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T13:11:32.283

你只需要设置`Cache-Control`. 和已经*默认*设置（`Expires`并且会覆盖过滤器设置的值）。必须代表相关资源的最后修改时间戳。您可以通过. 但无论如何你都不需要在这里设置它。任凭处理。`Last-Modified`*[`ResourceHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html)`Last-Modified``servletContext.getResource(path).openConnection().getLastModified()``ResourceHandler`*

 *至于版本控制，只要正确使用资源库即可。`\d+(_\d+)*`您可以在库文件夹中放置一个匹配正则表达式模式的版本文件夹，`ResourceHandler`它将提供最新的。

例如

```
/resources/libraryname/1_0/js/file.js
/resources/libraryname/1_1/js/file.js
/resources/libraryname/1_2/js/file.js 
```

然后，以下内容将从`1_2`：

```
<h:outputScript library="libraryname" name="js/file.js" /> 
```*

# android - 安卓模拟器3.0内核

> ID：10362945
> 
> 赞同：1
> 
> 时间：2012-04-28T11:09:06.257
> 
> 标签：android, linux, kernel, arm, emulation

有谁知道在编译 linux 3.0 内核时我应该使用什么配置文件才能使其与 sdk（4.0 或任何其他版本）的 Android 模拟器一起工作？

可能是这样的？：

```
./emulator-arm -avd default-v7 -shell -kernel /path/to/default/kernel/linux/arch/arm/boot/zImage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:01:48.057

Upstream (mainline, vanilla) Linux Kernel 3.0 can't boot Android userspace. You need to patch it with Android support. Kernel 3.3 is closer, but still missing a piece: [https://lwn.net/Articles/472984/](https://lwn.net/Articles/472984/)

Why don't you use AOSP kernel source? [http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

# c# - ASP .NET 中的漂亮编辑器

> ID：10362946
> 
> 赞同：0
> 
> 时间：2012-04-28T11:09:14.400
> 
> 标签：c#, jquery, asp.net

我正在开发一个应用程序并在其中添加富文本编辑器，但它不起作用。我也尝试过许多其他编辑器，例如 tinyMC 或 CK Editor，但它也无法正常工作。所以这就是我提供代码以便任何人都可以帮助我的原因。代码如下

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Tabs.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="titleContent" runat="server">
    PostProblem

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="body" runat="server">
  <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
<script type="text/javascript">    bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
 <script type="text/javascript">

     $("#PostProblem").validate();

    </script>

     <h3>PostProblem</h3>
     <br />

      <% using (Html.BeginForm("PostProblem", "Discussion",  null ,FormMethod.Post, new { id = "PostProblem" }))

        { %>

            <table  class="bodyTable">
                 <tbody class="rowHover">
                    <tr>
                        <td class="labelPortion">
                            Title:
                        </td>
                        <td class="controlPortion">
                             <%: Html.RenderControl(new ControlInfo()
                                                    {
                                                        ControlID = 1,
                                                        CanNull = false,
                                                        Type = ControlType.TextField,
                                                        Value = (TempData["__1"] != null) ? TempData["__1"].ToString() : ""
                                                    }, true
                                                    )

                        %>
                        <% // Display the error message if any. 
                            if (TempData["_1"] != null)
                            { %><br/>
                                <span class="errorMessage"> <%: TempData["_1"]%> </span>
                        <% } %>

                        </td>

                    </tr>
                    <tr>
                        <td class="labelPortion">
                            Problem:

                        </td>
                        <td class="controlPortion">

                             <%: Html.RenderControl(new ControlInfo()
                                                    {
                                                        ControlID = 3,
                                                        CanNull = false,
                                                        Type = ControlType.TextArea,
                                                        Value = (TempData["__3"] != null) ? TempData["__3"].ToString() : ""
                                                    }, true
                                                    )
                             %>  

                        <% // Display the error message if any. 
                            if (TempData["_3"] != null)
                            { %>
                            <br/>
                                <span class="errorMessage"> <%: TempData["_3"]%> </span>
                        <% } %>
                        </td>

                    </tr>
                    <tr>
                        <td class="labelPortion">
                            <b>Problem Tag:</b>
                        </td>
                         <td class="controlPortion">
                            <%: Html.DropDownList("selectedValue", (IEnumerable<SelectListItem>)ViewData["problemTags"])%>
                        </td>
                    </tr>           
                    <tr>
                        <td>
                        </td>
                        <td>

                             <input class="buttonDesign" type="submit" value="Post"/>
                        </td>

                    </tr>

        </tbody>
        </table>

        <%} %>

</asp:Content> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:01:57.040

您可以使用[AJAX 控件工具包中的](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Default.aspx)[HTML 编辑](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx)器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:56:18.647

这是在jquery中使用[CK编辑器](http://ckeditor.com/download)的一种非常简单的方法。

1.  包含必要的js文件

> ```
> /Editors/ckeditor/ckeditor.js", "/Editors/ckeditor/adapters/jquery.js" 
> ```

1.  创建一个 id 为“txtHtmlContent”的 textarea 元素

> ```
> <textarea cols="50" rows="5" id="txtHtmlContent" class="sfTextarea"> </textarea> 
> ```

1.  调用插件方法

> $('#txtHtmlContent').ckeditor("config");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:08:14.443

您还可以查看[Yahoo 用户界面库中的富文本编辑器](http://yuilibrary.com/yui/docs/editor/)

# jquery - fancyBox 图像编号

> ID：10362949
> 
> 赞同：0
> 
> 时间：2012-04-28T11:10:04.207
> 
> 标签：jquery, fancybox

我想知道是否有人可以提供帮助。

我用fancyBox创建了一个图片库，如下代码所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
    <script type="text/javascript" src="fancybox/lib/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />

  <script type="text/javascript">  

            $('.fancybox').fancybox({
                openEffect  :   'elastic',
                closeEffect :   'elastic',

                padding :   20,
                fitToView   :   true,

                prevEffect :    'none',
                nextEffect :    'none',

                closeBtn  : false,
                arrows : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

</script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-top: 5px;
    margin-right: 110px;
}
-->
  </style>  
</head>
<body style="font-family: Calibri; color:  #505050; margin-left: 240px; float:left;"/>
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post" style="margin-left: -120px; margin-right: 50px;"> 

    <p>
      <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?>
      <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" /></a>
      <?php endfor; ?>  
    </p>
</form>  
</body>
</html> 
```

除了页码，即“...的图像编号”文本仅出现在第一张图像上之外，一切都运行良好。

我直接从“fancyapps”网站获取了这段代码，所以我有点不确定错误出在哪里，因为它们看起来都一样。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:59:15.057

使用 'fancyBox' 的新版本，这个问题现在已经得到解决，并且图像编号工作正常。

# c++ - 手动注册 OCX 文件

> ID：10362950
> 
> 赞同：0
> 
> 时间：2012-04-28T11:10:04.563
> 
> 标签：c++, dll, activex

我使用 vs2008 开发了一个 activex 组件。我使用 MFC 开发它。

我尝试使用命令手动注册组件

regsvr32 mycontrol.ocx 但它抛出错误“加载库”失败。我确信这是因为依赖 dll。我使用了依赖walker并找到了dll。现在我应该怎么做才能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:36:00.473

您很可能正在运行 regsvr32 的 64 位版本，而您的 OCX 是 32 位的。由于 regsvr32 将 OCX DLL 加载到其进程中，因此您必须使用 regsvr32 的 32 位版本。这可以在 C:\Windows\SysWOW64 中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:13:13.563

尝试将dll文件放在system32文件夹下，看看它是否有效，我的工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:56:04.147

我使用 MFC 作为静态链接编译项目，它解决了我的问题

# c++ - 在二叉搜索树中找到第 n 个最小的元素

> ID：10362951
> 
> 赞同：0
> 
> 时间：2012-04-28T11:10:08.037
> 
> 标签：c++, binary-search-tree

我已经编写了一种算法，用于在 BST 中查找第 n 个最小元素，但它返回根节点而不是第 n 个最小元素。因此，如果您按 7 4 3 13 21 15 的顺序输入节点，则调用 find(root, 0) 后该算法返回值为 7 而不是 3 的节点，而调用 find(root, 1) 则返回 13 而不是 4。想法？

```
Binode* Tree::find(Binode* bn, int n) const
{
    if(bn != NULL)
    {

    find(bn->l, n);
    if(n-- == 0)
        return bn;    
    find(bn->r, n);

    }
    else
        return NULL;
} 
```

及 Binode 的定义

```
class Binode
{
public:
    int n;
    Binode* l, *r;
    Binode(int x) : n(x), l(NULL), r(NULL) {}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:05:51.747

仅靠自身无法有效地检索二叉搜索树中的第 n 个最小元素。但是，如果您在每个节点中保留一个整数，表示其整个子树中的节点数，这确实成为可能。从[我的通用 AVL 树实现](http://code.google.com/p/badvpn/source/browse/trunk/structure/BAVL.h)：

```
static BAVLNode * BAVL_GetAt (const BAVL *o, uint64_t index)
{
    if (index >= BAVL_Count(o)) {
        return NULL;
    }

    BAVLNode *c = o->root;

    while (1) {
        ASSERT(c)
        ASSERT(index < c->count)

        uint64_t left_count = (c->link[0] ? c->link[0]->count : 0);

        if (index == left_count) {
            return c;
        }

        if (index < left_count) {
            c = c->link[0];
        } else {
            c = c->link[1];
            index -= left_count + 1;
        }
    }
} 
```

在上面的代码中，和`node->link[0]`是`node->link[1]`的左右子节点， 是 的整个子树中的节点数。`node``node->count``node`

假设树是平衡的，上述算法具有 O(logn) 时间复杂度。此外，如果您保留这些计数，则可以进行另一个操作 - 给定一个指向节点的指针，可以有效地确定其索引（与您要求的相反）。在我链接的代码中，此操作称为`BAVL_IndexOf()`.

请注意，节点计数需要随着树的变化而更新；这可以在时间复杂度没有（渐近）变化的情况下完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T11:54:10.377

您的代码存在一些问题：

1)`find()`返回一个值（正确的节点，假设函数按预期工作），但您不会将该值传播到调用链上，因此顶级调用不知道（可能）找到的元素

.

```
Binode* elem = NULL;
elem = find(bn->l, n);
if (elem) return elem; 
if(n-- == 0) 
    return bn;     
elem = find(bn->r, n); 
return elem; // here we don't need to test: we need to return regardless of the result 
```

2）即使您`n`在正确的位置进行减量，更改也不会在调用链中向上传播。您需要通过引用传递参数（注意函数签名中的`&`after `int`），因此更改是在原始值上进行的，而不是在它的副本上

.

```
Binode* Tree::find(Binode* bn, int& n) const 
```

我尚未测试建议的更改，但它们应该使您朝着正确的方向前进

# linux - 在 Linux 上强制从用户态进行上下文切换？

> ID：10362953
> 
> 赞同：3
> 
> 时间：2012-04-28T11:10:31.607
> 
> 标签：linux, scheduling

**是否可以建议内核绕过调度程序逻辑立即执行上下文切换到不同的线程？**

例如，如果我刚刚创建了一个线程/进程，`clone`并且我想立即开始执行它，则立即放弃当前上下文，而不是等待内核下一次重新安排内容。

理想情况下，我正在寻找与`thread_switch`Mach 内核上的调用相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:19:42.437

您不应该尝试控制上下文切换，因为内核可能比您更清楚何时执行此操作。特别是因为上下文切换被认为是一项昂贵的操作（主要是由于缓存失效）。

但是，如果你真的需要强制调度程序循环，你可以使用[系统`sched_yield()`调用](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_yield.2.html)。

# gwt - 如何在 GWT 中手动创建 JavaScriptObject？

> ID：10362954
> 
> 赞同：12
> 
> 时间：2012-04-28T11:10:58.387
> 
> 标签：gwt

当我有这个类时，我怎么能手动创建一个 JavaScriptObject

```
public class Person extends JavaScriptObject{
    protected Person(){}

    public final native String FirstName()/*-{
        return this.firstName;
    }-*/; 

    public final native String LastName()/*-{
        return this.lastName;
    }-*/;
 } 
```

我问是因为我有这个 JavaScriptObject Peron 的数组

```
public JsArray<Person> persons = JavaScriptObject.createArray().cast(); 
```

我想用这些 Person 对象中的一些来填充这个数组

```
Peson a = new Person();
a.setfirstName(textField1.getText());
a.setLastName(textField2.getText());
persons.push(a) 
```

但我不知道如何手动创建这样的对象。我将从 UI 组件（如 textField）中获取 firstName 和 lastName 的值。请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T11:58:36.840

你应该能够做到这一点？

```
Person a = (Person)JavaScriptObject.createObject().cast(); 
```

# javascript - javascript模块模式的封装

> ID：10362956
> 
> 赞同：6
> 
> 时间：2012-04-28T11:11:18.717
> 
> 标签：javascript, module, design-patterns, encapsulation

我正在阅读此链接[http://addyosmani.com/largescalejavascript/#modpattern](http://addyosmani.com/largescalejavascript/#modpattern)

并看到了下面的例子。

```
var basketModule = (function() {
var basket = []; //private

return { //exposed to public
       addItem: function(values) {
            basket.push(values);
        },
        getItemCount: function() {
            return basket.length;
        },
        getTotal: function(){
            var q = this.getItemCount(),p=0;
            while(q--){
                p+= basket[q].price;
            }
        return p;
        }
      }
}());

basketModule.addItem({item:'bread',price:0.5});
basketModule.addItem({item:'butter',price:0.3});

console.log(basketModule.getItemCount());
console.log(basketModule.getTotal()); 
```

它指出“模块模式是一种流行的设计，该模式使用闭包封装'隐私'、状态和组织”这与像下面这样写有什么不同？不能通过函数范围简单地强制执行隐私吗？

```
var basketModule = function() {
var basket = []; //private
       this.addItem = function(values) {
            basket.push(values);
        }
        this.getItemCount = function() {
            return basket.length;
        }
        this.getTotal = function(){
            var q = this.getItemCount(),p=0;
            while(q--){
                p+= basket[q].price;
            }
        return p;
        }

}

var basket = new basketModule();

basket.addItem({item:'bread',price:0.5});
basket.addItem({item:'butter',price:0.3}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:17:42.430

在第一个变体中，您创建一个对象而不能创建它的新实例（它是一个立即实例化的函数）。第二个示例是一个完整的构造函数，允许多个实例。两个示例中的封装相同，`basket`数组在两个示例中都是“私有的”。

只是为了好玩：两全其美可能是：

```
var basketModule = (function() {
   function Basket(){
        var basket = []; //private
        this.addItem = function(values) {
            basket.push(values);
        }
        this.getItemCount = function() {
            return basket.length;
        }
        this.getTotal = function(){
            var q = this.getItemCount(),p=0;
            while(q--){
                p+= basket[q].price;
            }
        return p;
       }
     }
   return {
     basket: function(){return new Basket;}
   }
}());
//usage
var basket1 = basketModule.basket(), 
    basket2 = basketModule.basket(), 
```

# javascript - 玉选择字段填充数据

> ID：10362959
> 
> 赞同：20
> 
> 时间：2012-04-28T11:11:33.130
> 
> 标签：javascript, node.js, pug

有没有更好的方法来填充基于 Jade 的选择字段，我目前正在使用这个示例。有没有更好的方法来不破坏模板代码？

项目值是“天”的例子。

```
 select
      repeation = [ 'no-repeat', 'day', 'week', 'month']
      for item in repeation
        if job.repeat == item
          option(selected="true") #{item}
        else
          option #{item} 
```

当项目是 ['day', 'week'] 的数组时，如何显示多个选择？

// 编辑多个元素的小可能解决方案

```
 enginges = [ 'google', 'bing', 'yahoo', 'duckduckgo']
      for engine in enginges
        option(selected=job.sources.indexOf(engine) != -1) #{engine} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-28T23:13:29.170

您应该能够执行以下操作：

```
for item in repeation
  option(selected=job.repeat == item) #{item} 
```

相同的概念应该能够应用于多项选择下拉菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T22:20:54.310

有几件事要添加到答案中（[https://stackoverflow.com/a/10368381/870274](https://stackoverflow.com/a/10368381/870274)）：

1.  “each”现在更常用，而不是“for”

2.  不要忘记以下行的“-”：repeat = [ 'no-repeat', 'day', 'week', 'month'] ，否则会出现编译错误。所以最终结果将是（与您的相同）：

    ```
    select
      - repeation = [ 'no-repeat', 'day', 'week', 'month']
      each item in repeation
        option(selected=job.repeat == item) #{item} 
    ```

# jquery - 基于名称的黑白插件和基于功能的插件的区别

> ID：10362960
> 
> 赞同：3
> 
> 时间：2012-04-28T11:11:49.027
> 
> 标签：jquery

因为我刚刚开始在 jquery 中开发插件，所以我很想知道基于名称的插件和基于功能的插件之间的区别以及开发插件的更好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:25:02.063

基于名称的插件也称为方法插件和基于功能的插件也称为功能插件

1.  方法插件应该总是返回 jQuery 对象（this，在代码中），以允许可链接性。
2.  函数插件不支持可链接性，方法插件支持可链接性。
3.  方法插件应该总是返回 jQuery 对象（this，在代码中），以允许可链接性。
4.  方法插件扩展 jQuery.fn 对象，函数插件直接扩展 jQuery 对象。

# python - 如何使用 PyOpenSSL 获取公钥？

> ID：10362965
> 
> 赞同：7
> 
> 时间：2012-04-28T11:11:59.173
> 
> 标签：python, x509, public-key

我正在尝试创建 python 脚本，它将采用 PKCS#12 包并打印 x509 证书中包含的一些信息，并用于此目的 PyOpenSSL 模块。到目前为止，我想从证书公钥中获取。但是 PKey 对象没有合适的方法。我可以从哪里搬出去？任何想法如何获得公钥？

```
pfx=open('./1.p12','rb').read()
PKCS=crypto.load_pkcs12(pfx)
cert=PKCS.get_certificate()
PKey=cert.get_pubkey()

print PKey
<OpenSSL.crypto.PKey object at 0x012432D8> 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-07-18T13:53:47.337

首先，您可以像这样加载证书

```
from OpenSSL import crypto

#cert is the encrypted certificate int this format -----BEGIN -----END    
crtObj = crypto.load_certificate(crypto.FILETYPE_PEM, cert)
pubKeyObject = crtObj.get_pubkey()
pubKeyString = crypto.dump_publickey(crypto.FILETYPE_PEM,pubKeyObject)
print pubKeyString 
```

你会看到类似的东西

```
-----BEGIN PUBLIC KEY----- 
....
....
-----END PUBLIC KEY----- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-07T12:46:30.453

我假设您想从文件中读取公钥。

首先安装pyopenssl

**点安装 pyopenssl**

```
from OpenSSL import crypto
import os

   file_path = os.path.join(os.getcwd(),'/certificates/test.crt')
   f = open(file_path, "r")
   cert = f.read()
   pub_key_obj = crypto.load_certificate(crypto.FILETYPE_PEM, cert).get_pubkey()
   pub_key = crypto.dump_publickey(crypto.FILETYPE_PEM,pub_key_obj)
   print(pub_key) 
```

你会得到如下输出：

-----开始公钥-----

……

-----结束公钥-----

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-30T09:05:54.613

Instead use:

```
c.dump_privatekey(c.FILETYPE_TEXT,pubkey) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-12T10:29:01.220

这行得通吗？

```
print PKey
<OpenSSL.crypto.PKey object at 0x012432D8>

from OpenSSL import crypto

crypto.dump_privatekey(PKey) 
```

# android - 当我尝试通过线程启动另一个意图时，我的初始屏幕背景不显示

> ID：10362974
> 
> 赞同：1
> 
> 时间：2012-04-28T11:14:11.743
> 
> 标签：android, eclipse, android-layout, splash-screen

当我在没有线程代码的情况下运行启动画面时，会出现启动画面背景，但是当我通过线程启动背景图像时，不会显示启动画面。

我的splash.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/splash"
>
</LinearLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="travis.com"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Splash"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".TheNewBostonActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.thenewboston.travis.STARTINGPOINT" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

飞溅.java：

```
package travis.com;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity {
    @Override
    protected void onCreate(Bundle TravisLoveBeacon) {
    // TODO Auto-generated method stub
        super.onCreate(TravisLoveBeacon);
        setContentView(travis.com.R.layout.splash);

        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(5000);
                }
                catch(InterruptedException e) {
                    e.printStackTrace();
                }
                finally {
                    Intent openstatingpoint = new Intent("com.thenewboston.travis.STARTINGPOINT");
                    startActivity(openstatingpoint);
                }
            }
        };
        timer.run();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:22:28.680

尝试使用

```
Thread splashTimer = new Thread() {
        public void run() {

            try {

                    sleep(5000);

                // Advance to the next screen.
                startActivity(new Intent(SplashActivity.this,
                        HomeActivity.class));//}

            } catch (Exception e) {
                Log.e("ex", e.toString());
            } finally {
                finish();
            }
        }
    };
    splashTimer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:20:39.600

在您的 finally 块中尝试以下代码：

```
finish();
Intent mainIntent = new Intent().setClass(Splash.this, nextscreen.class);
startActivity(mainIntent); 
```

# iphone - iOS tabBarController 不显示

> ID：10362976
> 
> 赞同：0
> 
> 时间：2012-04-28T11:14:29.263
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个主 tabBarController，其中一些选项卡作为主控制器，每个选项卡都包含一些对象。一旦调用了一个视图，例如，按下 tableview 的一个单元格，tabBar 就会消失，使用，

```
AppsViewController.hidesBottomBarWhenPushed = YES;
[[self navigationController] pushViewController:AppsViewController animated:YES]; 
```

新视图包含一个新的 tabBarController 但它没有显示！如何解决？如果不可能，另一种选择是插入 tabBar（正确显示！）而不是 tabBarController，然后以编程方式处理其控制。如何？任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:48:39.947

老实说，我不使用标签栏。在某些条件下定制它会变得非常复杂。我所做的是放置一些自定义按钮来代替选项卡。让设计师完成剩下的工作。按钮的图像看起来与您的应用程序中的标签栏完全一样，您可以按照自己想要的方式轻松自定义它

我可以向你展示我最近的应用程序的快照，它看起来像一个标签栏，但由自定义按钮组成

让我知道你对此的看法 干杯

W

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:30:59.787

如果您在谈论 UITabarController，则无法在也是 tabbarcontroller 的选项卡中选择控制器。做到这一点的唯一方法是以模态方式呈现它。在 hig 和 view 控制器编程指南中清楚地解释了原因。原因是关于视图控制器层次结构。

# redirect - nginx 301 重定向不起作用

> ID：10362978
> 
> 赞同：0
> 
> 时间：2012-04-28T11:14:46.377
> 
> 标签：redirect, nginx

这是我的配置文件：

```
 server {
    listen   80;
    server_name moule-a-manque.com;
    access_log /var/log/nginx/myvps.com.access.log;
    error_log /var/log/nginx/myvps.com.error.log;
    client_max_body_size 4M;
    client_body_buffer_size 128k;
    expires off;

rewrite http://www.moule-a-manque.com http://moule-a-manque.com permanent;

    location / {
    root   /var/www/mom;
    index index.html index.php;
    } 
```

我认为这应该可以，但是当我在[http://nibbler.silktide.com/reports/moule-a-manque.com](http://nibbler.silktide.com/reports/moule-a-manque.com)检查时，似乎说重定向不起作用。

我这样做是正确的吗？如果是这样，如何确保 301 重定向确实有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T13:16:07.837

nginx 中的 rewrite 指令只匹配 url 的路径部分，而不匹配主机名。看起来您正在尝试强制使用 no-www，这是通过使用第二个服务器来完成的{}：

```
server {
  server_name www.moule-a-manque.com;
  rewrite ^ http://moule-a-manque.com$request_uri? permanent;
}

server {
  listen   80;
  server_name moule-a-manque.com;
  access_log /var/log/nginx/myvps.com.access.log;
  error_log /var/log/nginx/myvps.com.error.log;
  client_max_body_size 4M;
  client_body_buffer_size 128k;
  expires off;

  root   /var/www/mom;
  index index.html index.php;
} 
```

此外，通常最好将根设置在某个位置之外。请参阅[http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)。

# java - Android如何在安装后立即执行特定操作？

> ID：10362979
> 
> 赞同：0
> 
> 时间：2012-04-28T11:14:52.530
> 
> 标签：java, android, android-install-apk

我正在开发一个需要在安装后立即进行某些操作的应用程序（主要是保存一些配置参数）。

我想知道这是否可能，以及如何去做。

而且，可以在安装后立即启动应用程序（我需要启动一个广播接收器）

谢谢，伊万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:19:18.803

这是不可能的。用户必须手动启动应用程序。应用程序启动后，您可以坐在引导广播 (BOOT_COMPLETED) 上并从那时起在后台启动服务，但应用程序第一次启动需要手动启动。

# android - 如何在android的自定义列表视图中显示选定的itemimages另一个页面

> ID：10362980
> 
> 赞同：0
> 
> 时间：2012-04-28T11:15:00.673
> 
> 标签：android, web-services, android-listview

我正在从服务器数据库中获取项目名称、项目图像、价格和 desc 到自定义 lisview 中的 android 手机。我在自定义列表视图中放置了复选框。我在自定义列表视图中选择了一些项目。现在我想将那些选定的项目图像显示到另一个页面..请给出解决方案

```
 i try this code

            public class test extends BaseAdapter {
public Context Context;
  String qrimage;
  Bitmap bmp, resizedbitmap;
  Bitmap[] bmps;
  Activity activity = null;
  private LayoutInflater inflater;

  private ImageView[] mImages;
  String[] itemimage;
  TextView[] tv;  
  String itemname,price,desc;
  String[] itemnames;
  String[] prices;
  String[] descs;
  HashMap<String, String> map = new HashMap<String, String>();

  public Appetizerlist(Context context, JSONArray imageArrayJson) {
      Context=context;
    //inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //  imageLoader=new ImageLoader(activity);
    inflater=LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.prices=new String[imageArrayJson.length()];
    this.descs=new String[imageArrayJson.length()];
    try {

      for (int i = 0; i < imageArrayJson.length(); i++) {
        JSONObject image = imageArrayJson.getJSONObject(i);
        qrimage = image.getString("itemimage");
        itemname = image.getString("itemname");
        price=image.getString("price");
        desc=image.getString("itemdesc");

        itemnames[i] = itemname;
        prices[i]=price;
       descs[i]=desc;

        byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

        bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                                            qrimageBytes.length);
        int width = 100;
        int height = 100;
        resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                                                  true);
        bmps[i] = bmp;

        mImages[i] = new ImageView(context);
        mImages[i].setImageBitmap(resizedbitmap);

        mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

        // tv[i].setText(itemname);
      }
      System.out.println(map);

    } catch (Exception e) {
      // TODO: handle exception
    }
  }

  public int getCount() {
    return mImages.length;
  }

  public Object getItem(int position) {
    return position;
  }

  public long getItemId(int position) {
    return position;
  }

  public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        final ViewHolder viewHolder;
        if (view == null) {         
              view = inflater.inflate(R.layout.appetiserlistview, null);
            viewHolder = new ViewHolder();
            viewHolder.image=(ImageView)view.findViewById(R.id.appetiserimage);
            viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
            viewHolder.desc=(TextView)view.findViewById(R.id.appetiserdesc);
            viewHolder.price=(TextView)view.findViewById(R.id.appetiserdesc);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.bcheck);

            view.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) view.getTag();
        }
        viewHolder.image.setImageBitmap(bmps[position]);

        viewHolder.price.setText(prices[position]);
        viewHolder.desc.setText(descs[position]);
        viewHolder.checkbox.setTag(itemnames[position]);
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(itemnames[position]);

        return view;
    }

    static class ViewHolder {
    protected TextView text,price,desc;
    protected ImageView image;
    protected CheckBox checkbox;
}

} 
```

我想将所选项目图像显示到下一页..请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:32:36.947

you can use `OnItemClickListener()` to pass this image String `qrimage = image.getString("itemimage");` to your new Activity using `intent.putExtra("qrimage",qrimage);` and Decode this string in your New Activity as you have done this in your ListView.

If there is an array of images use `ArrayList` to store every image and pass the arrayList to intent using `intent.putStringArrayListExtra("arrImages", bmps);` and get it in another Activity using

```
Intent i = getIntent();  
arrImages = i.getStringArrayListExtra("arrImages"); 
```

Hope it Helps.

# android - 从 Activity 停止 IntentService

> ID：10362981
> 
> 赞同：1
> 
> 时间：2012-04-28T11:15:01.373
> 
> 标签：android, android-intent, intentservice

我需要帮助解决这种情况：

1.  我有活动，什么启动 IntentService。
2.  服务在循环中做一些工作并休眠一段时间。
3.  服务的主要周期是无止境的，所以我需要再次停止它的活动。
4.  我必须能够结束活动，重新启动它并从新的活动“实例”中停止 IntentService。

    ```
    public class MyService extends IntentService {

        public MyService()
        {
            super("MyService");
        }

        public MyService(String name) {
            super(name);
        }

        @Override
        protected void onHandleIntent(Intent intent) {
            Log.d("SERVICE", "start");

            while(true)
            {
                SystemClock.sleep(1000);
                Log.d("SERVICE", "tick");
            }
        }

        @Override
        public void onDestroy() {
            Log.d("SERVICE", "end");
            super.onDestroy();
        } 
    ```

...

```
Intent intent = new Intent(getApplicationContext(), MyService.class);
startService(intent); 
```

我试过打电话`stopService()`，但它不起作用。有什么解决方案如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T11:48:34.427

> 服务在循环中做一些工作并休眠一段时间。

恕我直言，这是对`IntentService`. 请创建一个常规`Service`的、您自己管理的后台线程。

> 有什么解决方案如何做到这一点？

创建一个常规`Service`的，您自己管理的后台线程。例如，您可以使用 a`ScheduledExecutorService`而不是`sleep()`循环，`shutdown()`在`shutdownNow()`服务的`onDestroy()`.

# python - 如何建模一对多？

> ID：10362984
> 
> 赞同：1
> 
> 时间：2012-04-28T11:15:45.810
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有两个实体，Item 和 City。我怎样才能像一对多关系那样建模，以便它表示一个项目可以“拥有”许多城市？我想用 ReferenceProperty 来做，但它似乎是一个列表，并且没有用于键列表的属性 AFAIK。你能告诉我应该如何建模以表示这种关系吗？

在创建新对象时，如果您使用作为集合的引用属性创建新对象，则可以创建一对多：

```
class ItemLocation(db.Model):   
    reference = db.ReferenceProperty(Item,
            collection_name='matched_cities', verbose_name='Cities') 
```

但这并不是我想要的。我想要一个方便的建模，我可以在其中迭代给定项目的城市，即

`{% for city in item.matched_cities %}`

你能告诉我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:21:43.767

您绝对可以拥有一个键列表。将此添加到您的项目模型中：

```
cities = db.ListProperty(db.Key) 
```

然后，您可以使用以下命令从数据存储中检索这些城市

```
itemsCities = ItemLocation.get(item.cities) 
```

# c# - 可长期运行的收费 Web 服务 - 事务设计

> ID：10362985
> 
> 赞同：0
> 
> 时间：2012-04-28T11:15:50.883
> 
> 标签：c#, sql-server, wcf, web-services, transactions

我正在创建一个 WCF Web 服务，它包装对另一个远程 API 的调用，并且是收费的。

我想让它成为一个同步服务以方便客户端，并且因为 99% 的时间，远程 API 会快速响应，因此客户端不会有明显的延迟。

我也想让服务收费。客户将能够在他们的账户上存入资金，如果成功，每次服务电话都将被收取费用。

显然，我需要确保当每个请求进来时，账户上都有足够的钱来进行通话。

我的计划和当前原型执行以下操作：

*   调用 Store Procedure 来检查 Client 的余额，如果足够，则扣除此请求所需的金额。这个 SProc 包含一个事务并使用 ROWLOCK 和 HOLDLOCK 来确保客户端的余额一次只能读取/更新一个。
*   如果成功充电，请执行所需的操作/远程 API 调用。
*   如果操作/远程 API 失败，则将金额退还给客户的余额（再次交易，锁定更新 SProc）
*   如果一切正常，在数据库中将调用标记为完成

通过这样做，我可以允许客户端发出并发请求，唯一的瓶颈（我认为！）是在余额检查期间。

我的想法是，将整个调用包装在 ac#Transaction 中意味着客户端一次只能进行一个调用。

**谁能预见这种机制的任何问题，或提出更好的设计方法？**

我可以看到的一个问题是，如果第一部分完成并且向客户收费，但是在操作/远程 API 调用期间发生了*灾难性*的事情并且没有发生退款，那么对于不完整的调用将会产生费用。我将能够检测到这些，因为没有针对呼叫的 Complete 或 Refunded 标记，并且必须“离线”处理它们。

# objective-c - initWithCoder：在 NSObject 中不可见？

> ID：10362987
> 
> 赞同：6
> 
> 时间：2012-04-28T11:16:18.433
> 
> 标签：objective-c, ios, cocoa-touch, nscoding

我有一个界面：

```
#import <Foundation/Foundation.h>

@interface Picture : NSObject;

@property (readonly) NSString *filepath;
- (UIImage *)image;

@end 
```

和实施：

```
#import "Picture.h"

#define kFilepath @"filepath"

@interface Picture () <NSCoding> {
    NSString *filepath;
}

@end

@implementation Picture
@synthesize filepath;

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    return self;

}

- (void)encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:filepath forKey:kFilepath];
}

- (UIImage *)image {
    return [UIImage imageWithContentsOfFile:filepath];
}

@end 
```

我收到错误：**ARC 问题 - 'NSObject' 没有可见的@interface 声明选择器'initWithCoder:'**

使用 ARC 时，NSCoding 有什么不同吗？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T11:24:35.463

ARC 和手动引用计数没有什么不同。`NSObject`不符合`NSCoding`，因此不提供`-initWithCoder:`or `-encodeWithCoder:`。只是不要调用这些方法的超类实现。

```
- (id)initWithCoder: (NSCoder *)aCoder {
    self = [super init];
    if (self) {
        [aCoder decodeObject: filepath forKey: kFilepath];
    }
    return self;
} 
```

# c# - 树状图闪烁？

> ID：10362988
> 
> 赞同：22
> 
> 时间：2012-04-28T11:16:45.970
> 
> 标签：c#, winforms, treeview

我知道通过添加 TreeView.BeginUpdate 将防止树视图闪烁，但是当我将它添加到我的项目中时，我的树视图的所有节点都消失了，任何人都可以告诉我为什么会发生，这是我使用 TreeView 的代码片段.BeginUpdate 和 TreeView.EndUpdate

```
 TreeNode treeNode = new TreeNode("Windows");
        treeView1.Nodes.Add(treeNode);
        //
        // Another node following the first node.
        //
        treeNode = new TreeNode("Linux");
        treeView1.Nodes.Add(treeNode);
        //
        // Create two child nodes and put them in an array.
        // ... Add the third node, and specify these as its children.
        //
        TreeNode node2 = new TreeNode("C#");
        TreeNode node3 = new TreeNode("VB.NET");
        TreeNode[] array = new TreeNode[] { node2, node3 };
        //
        // Final node.
        //
        treeNode = new TreeNode("Dot Net Perls", array);
        treeView1.Nodes.Add(treeNode); 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-28T14:11:59.880

Begin/EndUpdate() 方法是*并非*旨在消除闪烁。在 EndUpdate() 处闪烁是不可避免的，它会重新绘制控件。它们旨在加速添加大量节点，默认情况下会很慢，因为每个项目都会导致重绘。通过将它们放在 for 循环中，将它们移到外部以立即改进，您使情况变得更糟。

这可能足以解决您的问题。但是你可以做得更好，抑制闪烁需要双缓冲。.NET TreeView 类覆盖 DoubleBuffered 属性和*其隐藏*。这是一个历史意外，原生 Windows 控件仅在 Windows XP 及更高版本中支持双缓冲。.NET 曾经支持 Windows 2000 和 Windows 98。

如今，这不再完全相关。您可以通过从 TreeView 派生您自己的类来将其放回原处。向您的项目添加一个新类并粘贴如下所示的代码。编译。将新控件从工具箱顶部拖放到窗体上，替换现有的 TreeView。效果非常明显，尤其是在滚动时。

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

class BufferedTreeView : TreeView {
    protected override void OnHandleCreated(EventArgs e) {
       SendMessage(this.Handle, TVM_SETEXTENDEDSTYLE, (IntPtr)TVS_EX_DOUBLEBUFFER, (IntPtr)TVS_EX_DOUBLEBUFFER);
        base.OnHandleCreated(e);
    }
    // Pinvoke:
    private const int TVM_SETEXTENDEDSTYLE = 0x1100 + 44;
    private const int TVM_GETEXTENDEDSTYLE = 0x1100 + 45;
    private const int TVS_EX_DOUBLEBUFFER = 0x0004;
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-27T10:49:02.240

如果您像我一样是新手并且在 vb.net 中需要它，这里是 @Hans Passant 答案。我使用了它，变化非常显着

```
Protected Overrides Sub OnHandleCreated(ByVal e As EventArgs)
    SendMessage(Me.Handle, TVM_SETEXTENDEDSTYLE, CType(TVS_EX_DOUBLEBUFFER, IntPtr), CType(TVS_EX_DOUBLEBUFFER, IntPtr))
    MyBase.OnHandleCreated(e)
End Sub

Private Const TVM_SETEXTENDEDSTYLE As Integer = &H1100 + 44
Private Const TVM_GETEXTENDEDSTYLE As Integer = &H1100 + 45
Private Const TVS_EX_DOUBLEBUFFER As Integer = &H4
<DllImport("user32.dll")>
Private Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal msg As Integer, ByVal wp As IntPtr, ByVal lp As IntPtr) As IntPtr
End Function 
```

# php - CodeIgniter - 共享模板变量

> ID：10362989
> 
> 赞同：2
> 
> 时间：2012-04-28T11:17:04.800
> 
> 标签：php, codeigniter

当我显示我的视图时，我反复必须包含一个变量：

```
$this->load->view('login', array('logged_in' => $this->auth->is_logged_in()));
$this->load->view('somepage', array('logged_in' => $this->auth->is_logged_in()));
$this->load->view('anotherpage', array('logged_in' => $this->auth->is_logged_in())); 
```

如何在我的所有视图输出中包含这一变量？有没有比扩展模板类更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T11:21:06.030

一种更简单的方法是将数组变为变量，因此您不必一直输入它，例如

```
$params = array('logged_in' => $this->auth->is_logged_in());
$this->load->view('login', $params);
$this->load->view('somepage', $params);
$this->load->view('anotherpage', $params); 
```

另一种方法是创建一个 Helper 来返回用户是否登录。Helper 在您的控制器和视图中全局可用。请参阅[http://codeigniter.com/user_guide/general/helpers.html](http://codeigniter.com/user_guide/general/helpers.html)以及

*   [CodeIgniter：创建新的助手？](https://stackoverflow.com/questions/804399/codeigniter-create-new-helper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:44:43.133

如何使用会话？

```
$this->session->userdata($var); 
```

或饼干

```
$this->input->cookie($var, TRUE); 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:36:25.503

很好的解决方案，**戈登**！但是，根据具体情况，也可以使用[最简单的模板库](http://maestric.com/doc/php/codeigniter_template)。

问候！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:40:44.420

您还可以直接从您的视图中访问该类：

```
<?php if( $this->auth->is_logged_in() ): ?>
  Hello!
<?php endif; ?> 
```

这不是最好的解决方案，但我发现它适用于用户条件。

# mysql - DELETE 占总数的百分比

> ID：10362990
> 
> 赞同：6
> 
> 时间：2012-04-28T11:17:12.097
> 
> 标签：mysql, sql

假设我想删除 10% 的行，是否有执行此操作的查询？

就像是：

```
DELETE FROM tbl WHERE conditions LIMIT (SELECT COUNT(*) FROM tbl WHERE conditions) * 0.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T11:22:50.817

如果您只需要*大约*10% 的行，没有特别的顺序，这应该可以解决问题：

```
DELETE FROM tbl WHERE RAND() <= 0.1 
```

但是，由于生成随机数的开销，我不建议在非常大的数据集上使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:19:50.957

我将简单地返回过滤行的总数，通过 php 计算并将该值用作我的 DELETE 查询中的限制。

```
$query = mysql_query("SELECT COUNT(*) FROM tbl WHERE conditions");
$int = reset(mysql_fetch_array($query));
$int = round($int * 0.1);

mysql_query("DELETE FROM tbl WHERE conditions LIMIT {$int}"); 
```

我不确定 DELETE 是否允许像这样的高级查询：

```
DELETE FROM (   SELECT h2.id
                FROM (  SELECT COUNT(*) AS total
                        FROM tbl
                        WHERE conditions) AS h
                JOIN (  SELECT *, @rownum := @rownum + 1 AS rownum
                        FROM tbl, (SELECT @rownum := 0) AS vars
                        WHERE conditions) AS h2
                ON '1'
                WHERE rownum < total * 0.1) AS h3 
```

# c++ - 将 1 添加到 c++ 位集

> ID：10362991
> 
> 赞同：3
> 
> 时间：2012-04-28T11:17:12.600
> 
> 标签：c++, boost, bitset

我有一个给定长度的 c++ 位集。我想生成此位集的所有可能组合，我想为其添加 1 2^bitset.length 次。这该怎么做？Boost库解决方案也是可以接受的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T12:41:32.917

试试这个：

```
/*
 * This function adds 1 to the bitset.
 *
 * Since the bitset does not natively support addition we do it manually. 
 * If XOR a bit with 1 leaves it as one then we did not overflow so we can break out
 * otherwise the bit is zero meaning it was previously one which means we have a bit 
 * overflow which must be added 1 to the next bit etc.
 */
void increment(boost::dynamic_bitset<>& bitset)
{
    for(int loop = 0;loop < bitset.count(); ++loop)
    {
        if ((bitset[loop] ^= 0x1) == 0x1)
        {    break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T11:25:22.827

所有可能的组合？只需使用 64 位无符号整数，让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-26T14:39:33.130

使用 boost 库，您可以尝试以下操作：

例如，长度为 4 的位集

```
boost::dynamic_bitset<> bitset;
for (int i = 0; i < pow(2.0, 4); i++) {
    bitset = boost::dynamic_bitset<>(4, i);

    std::cout << bitset << std::endl;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-12T19:03:17.037

不是最好的，而是蛮力的方式，但你可以通过使用转换来添加 1`to_ulong()`

```
bitset<32> b (13);
b = b.to_ulong() + 1; 
```

# wordpress - 复制带有类别限制的 Wordpress 管理员帖子部分

> ID：10362998
> 
> 赞同：0
> 
> 时间：2012-04-28T11:19:07.980
> 
> 标签：wordpress

我想在左侧有一个名为“产品”的 WP Admin 菜单。此菜单将具有与“帖子”类似的复制。将有“所有帖子”、“添加新帖子”和“类别”子菜单。

*   “所有帖子”链接将仅显示“产品”类别中的帖子。
*   “添加新”将自动添加具有“产品”类别的帖子。右侧的类别将显示“产品”类别的所有子类别。
*   “类别”链接将管理作为“产品”类别的子类别的类别。

我想知道是否有人曾经这样做过，或者是否有任何插件可以容纳这个。非常感谢任何信息或反馈。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:01:24.530

这称为**[自定义帖子类型](http://codex.wordpress.org/Post_Types)**(CPT)。

您可以将您选择的任何类型添加`Product`到已经存在和众所周知的类型`Post`和`Page`. 类别和标签将被称为**[分类法](http://codex.wordpress.org/Taxonomies)**。