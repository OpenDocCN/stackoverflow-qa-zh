# StackOverflow 问答 10394000-10394999

# image - MATLAB - 监督分类/分割

> ID：10394005
> 
> 赞同：1
> 
> 时间：2012-05-01T05:39:51.673
> 
> 标签：image, matlab, image-processing, classification, image-segmentation

我目前正在使用 PRtools。我非常坚持我正在做的事情。

请谁能指导我如何从训练数据集到分类器？我查看的训练和测试数据的所有示例都是从同一数据集生成的，在本例中为 A，随机生成如下：

```
A=datafile(2:end,1:end-1);
labs=datafile(2:end,end);
A=dataset(A,labs);
A=setprior(A,[0.5 0.5]);
[B,C] = gendat(A,0.2);
W = pca(B,2);  % compute PCA on training set only
A2 = A*W;      % maps all data to 2D
B2 = B*W;      % maps training set to 2D
C2 = C*W;      % maps test set to 2D
figure; gridsize(50); scatterd(A2,'legend');
V = B2*ldc;    % compute classifier in 2D
plotc(V);      % plot in 2D
D = C2*V;      % classify
testc(D);      % compute error
confmat(D)     % compute confusion matrix 
```

但是，我有不同纹理的训练图像。计算特征；

```
train = dataset(double(glcm_features));     
train_label = setlabels(a, label(:,1)); 
```

但我的测试图像是单个图像上 2 个或多个纹理的组合：http: [//i.imgur.com/hLjPh.jpg](https://i.imgur.com/hLjPh.jpg)

请任何人都可以给我一些指导我需要做什么才能做到这一点？我被卡住了，因为我显然没有测试集的标签，而且它给了我错误，说应该有标签......

请帮忙。先感谢您。

========================更新

我真正想做的是，如何让程序对包含多个纹理的图像中的纹理进行分类

![在此处输入图像描述](../Images/4e51436af06c7ed13a89d4c3de2c14bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:15:00.760

首先我不明白你想做什么。但是，要计算分类错误，您需要随身携带真实/真实标签。但是正如您所说，您没有测试集的标签，因此您无法计算错误。

但是，通常所做的是将训练集分为两组，分别称为训练集和验证集。您使用训练集进行训练，并在您拥有真实标签的验证集上计算分类错误。

假设您的测试集和训练集来自相同的分布，您可以将验证集上计算的错误概括为测试集上的预期错误。

# php - 我在哪里查看 Drupal 以查看是否打开了魔术引号？

> ID：10394009
> 
> 赞同：0
> 
> 时间：2012-05-01T05:40:34.963
> 
> 标签：php, drupal

我有一个问题，我怀疑是由 PHP 功能 Magic Quotes 引起的。我可以在我的 Drupal 7 安装中查看它们是否已启用吗？

我正在使用共享主机（Bluehost），所以我知道我可以联系他们并以这种方式检查状态，但我只是想知道 Drupal 是否允许我以某种方式查看这个和其他 PHP 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:51:35.307

只需上传包含以下内容的 PHP 文件：

```
<?php
echo "magic_quotes_gpc = ".ini_get('magic_quotes_gpc')."\n";
echo "magic_quotes_runtime = ".ini_get('magic_quotes_runtime')."\n"; 
```

这将输出当前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:54:46.870

在 drupal 6 中，您可以在 sites/default/settings.php 中的 settings.php 文件中看到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:58:14.940

在 drupal 6 中，sites/default/settings.php 为魔术引号提供了这两行

```
ini_set('magic_quotes_runtime',     0);
ini_set('magic_quotes_sybase',      0); 
```

# iphone - 从 iOS 应用程序访问 iOS 崩溃报告

> ID：10394010
> 
> 赞同：4
> 
> 时间：2012-05-01T05:40:42.913
> 
> 标签：iphone, ios, crash-reports, crash-dumps

有很多关于如何[使用计算机](http://iphonedevelopertips.com/debugging/locating-crash-reports.html)访问崩溃报告的教程，但我希望我的应用程序在启动时扫描崩溃报告（来自自身）——以便用户可以使用我的应用程序向我发送他们的报告. 这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T06:44:15.307

[PLCrashReporter](https://www.plcrashreporter.org/)是一个开源的崩溃报告框架，可以添加到 iOS 应用程序中。报告以 protobuf 编码格式生成，这应该允许应用程序将这些报告上传到服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T05:43:53.523

看看这几个可能有你需要的解决方案的资源：

*   ~~[https://testflightapp.com/](https://testflightapp.com/)~~
*   [http://www.hockeyapp.net/](http://www.hockeyapp.net/)
*   [http://quincykit.net/](http://quincykit.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T06:03:48.730

您可以使用您的 iTunes Connect 帐户获取它们

```
 When the user synchronizes their device using iTunes, crash reports are copied to a
directory on the user's computer. If the application was distributed via the App Store and 
the user has chosen to submit crash logs to Apple, the crash log will be uploaded and the 
developer can download it via iTunes Connect. 
```

您还可以使用[Crittercism](http://www.crittercism.com/)，一旦发生崩溃，它会直接向您发送电子邮件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T12:54:14.280

另一个可用于崩溃报告的专有（但免费）框架是[Crashlytics](http://crashlytics.com/ "崩溃分析器")。

# asp.net - 在 ASPX 页面中显示 html 页面

> ID：10394013
> 
> 赞同：0
> 
> 时间：2012-05-01T05:40:53.917
> 
> 标签：asp.net, html

我需要在aspx（服务器端html）中显示动态创建的html；我尝试使用 Iframe，但它不会显示任何内容；由于安全原因，它不会工作；是否有任何控件可以显示 html 页面？动态 html 在 css 和 javascripts 上有它，所以我不能使用 html 文本框控件。如果有人有解决方案请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:54:21.213

由于您的动态页面有自己的 CSS 和 Javascript，我假设它不是为了与其主机页面共存而编写的。我还假设当您尝试使用 iFrame 时，您只是尝试从包含页面直接写入它。

我建议将生成 HTML 的代码移动到单独的 ASPX 页面，并将该页面引用为 iFrame 的源或重写 CSS 和 Javascript，以便它可以共存并使用 DIV。

此外，如果不展示您当前拥有的一些代码，就很难提出一个可行的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:46:21.610

看看

```
<asp:Literal> 
```

控制。这里有一个例子：[Set ASP Literal text with Javascript](https://stackoverflow.com/questions/4946013/set-asp-literal-text-with-javascript)

-- 2012 年 3 月 5 日编辑 --

一个简单的 asp.net 文本控件示例：

.aspx 代码

```
<asp:Literal ID="MyLiteral" runat="server" /> 
```

.vb 代码后面

```
Dim k As String
k = "<table style=""border: 1px solid red;""><tr><td>Cell 1</td></tr><tr><td>Cell 2</td></tr></table>"
MyLiteral.Text = k 
```

如果我在 VS2008 中编译它，我会在 IE 中得到一个带有红色边框的两行表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:10:16.720

我找到了答案！！使用 UFRAME！！这很简单！[uframe.codeplex.com](http://uframe.codeplex.com/)

# javascript - Javascript 对象中 `get functionname() {...}` 的含义

> ID：10394014
> 
> 赞同：0
> 
> 时间：2012-05-01T05:41:02.307
> 
> 标签：javascript, spidermonkey

我一直在查看 GNOME shell javascript 界面，并注意到`popupMenu.js`来自类原型的以下片段（对于那些感兴趣的人）：

```
PopupSwitchMenuItem.prototype = {
    __proto__: PopupBaseMenuItem.prototype,

    _init: function(text, active, params) {
        ... (code)
    },

    ... function definitions

    get state() {
        return this._switch.state;
    },

    ... more functions
}; 
```

谁能给我解释一下是什么`get state() { ... }`意思？我认为一切都必须是`name: value`javascript 对象中的形式吗？（如果我制作这些对象之一，我可以做`obj.state`它返回我假设的内容`this._switch.state`）。

请注意 GNOME 说他们使用类似于 Mozilla 的 Spidermonkey 的一种 javascript (gjs) 风格可能会有所帮助，那么这种行为是非标准的 javascript 行为和 spidermonkey/gjs 的特性吗？

另外，是否有与此相关的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:47:44.823

查看[https://developer.mozilla.org/en/JavaScript/Reference/Operators/get](https://developer.mozilla.org/en/JavaScript/Reference/Operators/get)和 John Resig 在[http://ejohn.org/blog/javascript-getters-and-setters/上的帖子](http://ejohn.org/blog/javascript-getters-and-setters/)

有趣的是，您可以像访问任何其他属性一样访问属性，除了它们是动态创建的......例如

```
foo = {
  get blah() {
    return "bar";
  }
}

foo.blah == "bar" 
```

如果没有本机吸气剂，您将不得不这样做`foo.blah()`。坦率地说，我从来没有使用过它们，只是因为 IE8 不支持它，而且优势很小。最常见的是，我可以看到它们在我开始使用像 foo.blah 这样的“愚蠢”属性的情况下很有用，并且在开发周期后期的某个时刻意识到我想要 foo.blah()，并且必须进行转换在每一点上，使用 getter 和 setter 时，这种转换是不必要的，因为您只需更改对象定义。

# android - 如何更改 Android 2.3 的选项菜单背景？

> ID：10394016
> 
> 赞同：9
> 
> 时间：2012-05-01T05:41:18.177
> 
> 标签：android, menu, background, options

我有相同的标准选项菜单，但我想将项目的背景从白色更改为黑色。我看过很多关于如何做到这一点的帖子，但这些帖子不适用于 2.3。

有谁知道具有与 2.3 版兼容的自定义颜色背景的工作菜单充气机？

******注意* ***** 没有图像放置！！！没有其他帖子的代码，因为我在这里都试过了！！！**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T13:54:59.573

看看以下解决方案是否能解决您的问题......

**AndroidMenifest.xml**

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/CustomTheme"> 
```

**菜单/选项.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/option_1" android:title="Android"/>
    <item android:id="@+id/option_2" android:title="iPhone"/>
    <item android:id="@+id/option_3" android:title="iPad"/>
</menu> 
```

**样式.xml**

```
<resources>
    <style name="CustomTheme" parent="android:Theme">
        <!-- Panel attributes -->
        <!-- <item name="android:panelBackground">@drawable/menu_bg</item> -->
        <item name="android:panelFullBackground">@drawable/menu_full_bg</item> 
            <!--    <item name="android:panelColorBackground">#FF0000</item> -->
    </style>

    <!-- <drawable name="menu_bg">#DDDAAA</drawable> -->
    <drawable name="menu_full_bg">#000FFF</drawable>

</resources> 
```

**StackoverflowActivity.java**

```
public class StackoverflowActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.options, menu);
        return true;
    }

} 
```

***![输出](../Images/3934445b8fd2ae68484a8dbb68a53139.png)***

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T04:05:28.227

下面的代码工作正常 2.3.6（在设备和模拟器上测试）。它几乎是从谷歌搜索的不同网站复制和组合的

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    setMenuBackground();
    return super.onCreateOptionsMenu(menu);
}

protected void setMenuBackground() {
    getLayoutInflater().setFactory(new Factory() {
     @Override
                public View onCreateView(final String name, final Context context,
                        final AttributeSet attrs) {

                    if (name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {

                        try { // Ask our inflater to create the view
                            final LayoutInflater f = getLayoutInflater();
                            final View[] view = new View[1];
                            try {
                                view[0] = f.createView(name, null, attrs);
                            } catch (InflateException e) {
                                hackAndroid23(name, attrs, f, view);
                            }
                            // Kind of apply our own background
                            new Handler().post(new Runnable() {
                                public void run() {
                                    view[0].setBackgroundColor(Color.BLUE);

                                }
                            });
                            return view[0];
                        } catch (InflateException e) {
                        } catch (ClassNotFoundException e) {

                        }
                    }
                    return null;
                }
            });
        }

        static void hackAndroid23(final String name,
                final android.util.AttributeSet attrs, final LayoutInflater f,
                final View[] view) {
            try {
                f.inflate(new XmlPullParser() {
                    @Override
                    public int next() throws XmlPullParserException, IOException {
                        try {
                            view[0] = (TextView) f.createView(name, null, attrs);
                        } catch (InflateException e) {
                        } catch (ClassNotFoundException e) {
                        }
                        throw new XmlPullParserException("exit");
                    }

                    @Override
                    public void defineEntityReplacementText(String entityName,
                            String replacementText)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public int getAttributeCount() {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public String getAttributeName(int index) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getAttributeNamespace(int index) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getAttributePrefix(int index) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getAttributeType(int index) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getAttributeValue(int index) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getAttributeValue(String namespace,
                            String name) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public int getColumnNumber() {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public int getDepth() {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public int getEventType() throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public boolean getFeature(String name) {
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public String getInputEncoding() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public int getLineNumber() {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public String getName() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getNamespace() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getNamespace(String prefix) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public int getNamespaceCount(int depth)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public String getNamespacePrefix(int pos)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getNamespaceUri(int pos)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getPositionDescription() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getPrefix() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public Object getProperty(String name) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public String getText() {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public char[] getTextCharacters(
                            int[] holderForStartAndLength) {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public boolean isAttributeDefault(int index) {
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public boolean isEmptyElementTag()
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public boolean isWhitespace() throws XmlPullParserException {
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public int nextTag() throws XmlPullParserException,
                            IOException {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public String nextText() throws XmlPullParserException,
                            IOException {
                        // TODO Auto-generated method stub
                        return null;
                    }

                    @Override
                    public int nextToken() throws XmlPullParserException,
                            IOException {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public void require(int type, String namespace, String name)
                            throws XmlPullParserException, IOException {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void setFeature(String name, boolean state)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void setInput(Reader in)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void setInput(InputStream inputStream,
                            String inputEncoding) throws XmlPullParserException {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void setProperty(String name, Object value)
                            throws XmlPullParserException {
                        // TODO Auto-generated method stub

                    }
                }, null, false);
            } catch (InflateException e1) {
                // "exit" ignored
            }
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T04:17:48.343

在理想情况下，您不应该这样做。根据他们的决定，各种设备会有不同的颜色。如果您真的必须自定义菜单项的背景，那么，我建议不要使用它。相反，创建某种上下文菜单，您可以根据需要对其进行完全自定义。

我知道它可能不是您要求的解决方案，但是无论您为此采取什么解决方法，它都可能适用于一些设备，并且可能对其他人来说是一场灾难。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-01T06:05:44.213

我正在寻找相同的东西，但是当我将我的应用程序安装在**版本为 2.3.6的****三星 Galaxy Y**中时。*我自动*获得了选项菜单的黑色背景。虽然模拟器为我显示相同菜单的白色背景。我不知道它是如何工作的，但我得到了我想要的。所以我没有改变它。 这是代码：

 ***```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    MenuInflater inflater1 = getMenuInflater();
    inflater1.inflate(R.menu.scfmenu, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.settings:
        Intent i = new Intent(getApplicationContext(), prefsActivity.class);
        startActivity(i);
        break;
    case R.id.logout:
        Intent j = new Intent(getApplicationContext(), LoginActivity.class);
        startActivity(j);
        break;
    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-12T05:34:15.237

我在 2.3.1 版本上使用了如下所示的代码，它可以工作，只需调用 onCreat 方法 **addOptionsMenuHackerInflaterFactory();**

```
private static final int COLOR_MENU_ID = Menu.FIRST;
private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
private static final int BLUR_MENU_ID = Menu.FIRST + 2;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    return super.onOptionsItemSelected(item);
}
@SuppressWarnings("rawtypes")
static Class       IconMenuItemView_class = null;
@SuppressWarnings("rawtypes")
static Constructor IconMenuItemView_constructor = null;

// standard signature of constructor expected by inflater of all View classes
@SuppressWarnings("rawtypes")
private static final Class[] standard_inflater_constructor_signature = 
new Class[] { Context.class, AttributeSet.class };

protected void addOptionsMenuHackerInflaterFactory()
{
    final LayoutInflater infl = getLayoutInflater();

    infl.setFactory(new Factory()
    {
        public View onCreateView(final String name, 
                                 final Context context,
                                 final AttributeSet attrs)
        {
            if (!name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView"))
                return null; // use normal inflater

            View view = null;

            // "com.android.internal.view.menu.IconMenuItemView" 
            // - is the name of an internal Java class 
            //   - that exists in Android <= 3.2 and possibly beyond
            //   - that may or may not exist in other Android revs
            // - is the class whose instance we want to modify to set background etc.
            // - is the class we want to instantiate with the standard constructor:
            //     IconMenuItemView(context, attrs)
            // - this is what the LayoutInflater does if we return null
            // - unfortunately we cannot just call:
            //     infl.createView(name, null, attrs);
            //   here because on Android 3.2 (and possibly later):
            //   1\. createView() can only be called inside inflate(),
            //      because inflate() sets the context parameter ultimately
            //      passed to the IconMenuItemView constructor's first arg,
            //      storing it in a LayoutInflater instance variable.
            //   2\. we are inside inflate(),
            //   3\. BUT from a different instance of LayoutInflater (not infl)
            //   4\. there is no way to get access to the actual instance being used
            // - so we must do what createView() would have done for us
            //
            if (IconMenuItemView_class == null)
            {
                try
                {
                    IconMenuItemView_class = getClassLoader().loadClass(name);
                }
                catch (ClassNotFoundException e)
                {
                    // this OS does not have IconMenuItemView - fail gracefully
                    return null; // hack failed: use normal inflater
                }
            }
            if (IconMenuItemView_class == null)
                return null; // hack failed: use normal inflater

            if (IconMenuItemView_constructor == null)
            {
                try
                {
                    IconMenuItemView_constructor = 
                    IconMenuItemView_class.getConstructor(standard_inflater_constructor_signature);
                }
                catch (SecurityException e)
                {
                    return null; // hack failed: use normal inflater
                }
                catch (NoSuchMethodException e)
                {
                    return null; // hack failed: use normal inflater
                }
            }
            if (IconMenuItemView_constructor == null)
                return null; // hack failed: use normal inflater

            try
            {
                Object[] args = new Object[] { context, attrs };
                view = (View)(IconMenuItemView_constructor.newInstance(args));
            }
            catch (IllegalArgumentException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (InstantiationException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (IllegalAccessException e)
            {
                return null; // hack failed: use normal inflater
            }
            catch (InvocationTargetException e)
            {
                return null; // hack failed: use normal inflater
            }
            if (null == view) // in theory handled above, but be safe... 
                return null; // hack failed: use normal inflater

            // apply our own View settings after we get back to runloop
            // - android will overwrite almost any setting we make now
            final View v = view;
            new Handler().post(new Runnable()
            {
                public void run()
                {
                    v.setBackgroundColor(Color.BLUE);

                    try
                    {
                        // in Android <= 3.2, IconMenuItemView implemented with TextView
                        // guard against possible future change in implementation
                        TextView tv = (TextView)v;
                        tv.setTextColor(Color.RED);
                    }
                    catch (ClassCastException e)
                    {
                        // hack failed: do not set TextView attributes
                    }
                }
            });

            return view;
        }
    });
} 
```

背景蓝色和文本颜色红色的输出如下所示 ![在此处输入图像描述](../Images/c5fbe09a6d1c89eab227ee87c9285deb.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-04T08:29:35.487

我从 codeproject发现[了这篇有趣的帖子。](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)您可以自定义您想要的一切：bk 颜色、图标。您可以使用以下方法更改菜单样式：

```
 mMenu.setItemsPerLineInLandscapeOrientation(8);
  mMenu.setItemsPerLineInPortraitOrientation(4); 
```

**注意**：添加类似于选项菜单的视图是一个技巧。希望这有帮助！*****

# c - 在 CDT-Eclipse 上调试程序的问题

> ID：10394017
> 
> 赞同：2
> 
> 时间：2012-05-01T05:41:28.927
> 
> 标签：c, eclipse

我只是想用 CDT-Eclipse 调试我的第一个 Win32 程序。

调试程序时出现以下错误。[新线程 3256.0x498] 无法访问地址 0x1 的内存 无法访问地址 0x1 的内存 无法访问地址 0x1 的内存

在构建或运行时不会遇到任何问题......

**信息：**

操作系统：Windows Xp 7 Eclipse 版本：Indigo 工具链：Mingw

使用 makefile 构建而不是内部构建器。按照以下链接中指定的说明构建

Win32程序：

bitvector.net/?p=75 此外，还按照以下链接更正调试过程：eclipse.org/forums/index.php/m/781309/

我正在执行的程序是：

```
 #include
 int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
 LPSTR lpCmdLine, int nCmdShow) {
 MessageBox(NULL, "Hello world!", "Note", MB_OK);
 return 0;
} 
```

请帮助我继续前进。

# c - 从用户输入任意数量的字符串

> ID：10394019
> 
> 赞同：0
> 
> 时间：2012-05-01T05:41:34.490
> 
> 标签：c, string, file-io

我想读取任意数量的字符串，一次一个，`<stdio.h>`在 C 中使用。我知道您可以使用以下方法对整数执行此操作：

```
while (scanf("%d ", &integer)) 
```

但我不能这样做：

```
while (scanf("%s", string)) 
```

我该如何实现上述内容？

输入在不同的行上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:51:16.013

您*通常*希望将`fgets`输入读取为字符串，尤其是当您希望一行输入以一个字符串结尾时。

您*还*可以使用`fscanf`扫描集转换来一次读取一行，例如：

```
char line[100], newline;

fscanf("%99[^\n]%c", line, &newline); 
```

然后您可以检查是否`newline=='\n'`确定您是否已成功读取整行，或者该行大于您提供的缓冲区。

当您尝试读取面向行的输入时，您通常希望避免使用“%s”（即使具有指定的长度），因为这会读取空格分隔的标记，而不是整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:35:09.653

从您的原始问题中，我不完全理解您要做什么。当你说你想读取任意数量的字符串时，我的意思是，你希望你的程序能够读取 0 到 n 个字符串。不幸的是，在 C 中，您要么必须限制要读取的字符串的最大数量 like `#define MAX_NUMBER_OF_STRINGS_TO_READ 25`，要么进入一些复杂的内存分配方案来读取字符串，然后将其添加到动态内存（从 malloc 返回） .

我采用了最大字符串数方法并编写了以下代码段：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char charArray[5][25] = {0};

int main(int argc, char *argv[])
{
    int in_idx = 0;
    int out_idx = 0;

    printf("\n\n%s\n", "Enter no more than 5 strings, no more than 25 characters long.");

    while(fgets (charArray[in_idx], 25, stdin))
    {
        if('\n' == charArray[in_idx][0])
        {
            printf("%s\n", "Entry terminated with newline.");
            break;
        }

        in_idx++;
    }

    for(out_idx=0; out_idx < (in_idx + 1); out_idx++)
    {
        printf("%s", charArray[out_idx]);
    }

    printf("\n%s\n", "Program ended.");

    return 0;
} 
```

我将终止字符设为换行符。如果我只想要两个字符串，我在输入第二个字符串时按 Enter。我通过在字符数组的第一个位置查找 '\n' 来终止 fgets。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:43:22.833

使用 char 数组：

```
char charArray[100];
while (scanf("%s", &charArray)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T05:51:12.217

我猜你的问题是终止循环。`scanf`返回成功扫描元素的数量。如果是字符串，则空字符串也被成功扫描。因此，您需要另一个标准，例如

```
 while(scanf("%s",string)  && (strlen(string)!=0)) 
```

# django - 直接从数据库中获取 Django 模型的表名

> ID：10394020
> 
> 赞同：0
> 
> 时间：2012-05-01T05:41:35.833
> 
> 标签：django, django-models

我需要为特定应用程序的所有模型检索表名和模型的内容类型 ID。我可以使用此代码获取模型的表名，但*不能*获取其内容类型 ID：

```
from django.db.models import get_app, get_models
app = get_app("my_app_name")
for model in get_models(app, include_auto_created=True):
    print model._meta.db_table 
```

但是我需要直接从数据库中获取这些信息。就像是：

```
Select id, model from django_content_type where app_label='my_app_name' 
```

在这种情况下，我得到 id 但没有表名。在第二种情况下从哪里获得表名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:56:53.767

获取模型内容类型的pk

```
from django.contrib.contenttypes.models import ContentType
ContentType.objects.get_for_model(model).pk 
```

要[运行独立的 Django 脚本](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)，引用[帖子](https://stackoverflow.com/search?q=django+standalone)或简单地（通常有效）

```
DJANGO_SETTINGS_MODULE='project.settings' python script.py 
```

# ruby - Ruby - 多维哈希

> ID：10394023
> 
> 赞同：1
> 
> 时间：2012-05-01T05:41:49.250
> 
> 标签：ruby

我如何制作这个多维的？每个搜索结果条目都有多个属性`:attributes => ['sAMAccountName','givenName','SN','mail']`。结果中可能有很多条目。此代码适用于仅创建一个具有多个属性的条目。

```
 def self.Find(attribute, loginID)
        conn = Net::LDAP.new :host => SERVER,
                             :port => PORT,
                             :base => BASE,
                             :auth => { 
                                         :username => 'admin',
                                         :password => 'admin',
                                         :method => :simple
                                      }
        if  conn.bind
          result = HashWithIndifferentAccess.new
          conn.search( :base => LDAPBASE,
                       :filter => Net::LDAP::Filter.eq( attribute, loginID+"*" ),
                       :attributes => ['sAMAccountName','givenName','SN','mail'],
                       :return_result => true
                      ).each do |entries|
                        entries.each do |attribute, values|
                          values.each do |value|
                            result[attribute] = value
                          end
                        end
                      end
          result
        end
  end 
```

我从 ldap 得到的实际响应是这样的——

`puts result.to_s`

```
{
 "dn"=>"CN=somename\\, somefirstname,OU=Users,DC=site,DC=com", 
 "sn"=>"somename", 
 "givenname"=>"somefirstname",
 "samaccountname"=>"someuserid", 
 "mail"=>"someone@somthing.com"
} 
```

由于搜索是有 * 通配符来查找所有匹配的条目。Ldap 将以上述格式返回多个条目。与此类似 -

```
 {
      "dn"=>"CN=somename\\, somefirstname1,OU=Users,DC=site,DC=com", 
      "sn"=>"somename1", 
      "givenname"=>"somefirstname1",
      "samaccountname"=>"someuserid1", 
      "mail"=>"someone1@somthing.com"
    },
    {
      "dn"=>"CN=somename\\, somefirstname2,OU=Users,DC=site,DC=com", 
      "sn"=>"somename2", 
      "givenname"=>"somefirstname2", 
      "samaccountname"=>"someuserid2",
      "mail"=>"someone2@somthing.com"
    },
    {
      "dn"=>"CN=somename\\, somefirstname3,OU=Users,DC=site,DC=com",
      "sn"=>"somename3",
      "givenname"=>"somefirstname3",
      "samaccountname"=>"someuserid3", 
      "mail"=>"someone3@somthing.com"
    },

A[a=>1,b=>11,c=>111]
B[a=>2,b=>22,c=>222]
C[a=>3,b=>33,c=>333]
D[a=>4,b=>44,c=>444] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:59:57.160

我不确定我是否理解了这个问题。

```
def self.Find(attribute, loginID)
        conn = Net::LDAP.new :host => SERVER,
                             :port => PORT,
                             :base => BASE,
                             :auth => { 
                                         :username => 'admin',
                                         :password => 'admin',
                                         :method => :simple
                                      }
        if  conn.bind
          conn.search( :base => LDAPBASE,
                       :filter => Net::LDAP::Filter.eq( attribute, loginID+"*" ),
                       :attributes => ['sAMAccountName','givenName','SN','mail'],
                       :return_result => true
                      ).reduce(Array.new) do |acc, el|

                         #
                         # Any modification of the entry must be here
                         #

                         acc + [el] 

                      end
          end
        end
end 
```

我觉得`Array.map`也是不错的选择

我的假设：

*   conn.search 返回哈希数组
*   您想要的结果形式：

    ```
    [
          {"uid":"123","displayName":"User 123","mail":"123@example.com"},
          {"uid":"456","displayName":"User 456","mail":"456@example.com"},
          {"uid":"789","displayName":"User 789","mail":"789@example.com"}
    ] 
    ```

# php - 为 jsTree 使用自定义表而无需硬编码

> ID：10394025
> 
> 赞同：0
> 
> 时间：2012-05-01T05:41:59.043
> 
> 标签：php, jstree

我正在使用 jsTree + PHP，我想从两个不同的数据库表中加载两个不同的树，具体取决于登录用户的用户类型。

我将代码追踪到“class.tree.php”文件，

```
class json_tree extends _tree_struct {  
function __construct($table = 'tree', $fields = array(), $add_fields = array("title" => "title", "type" => "type")) {
parent::__construct($table, $fields);
    $this->fields = array_merge($this->fields, $add_fields);
    $this->add_fields = $add_fields;
} 
```

$table = 'tree' 是硬编码的。我尝试删除它（所以只是 $table），并将“树”作为

```
$jstree = new json_tree('tree'); 
```

但这没有用。任何想法/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:56:28.967

对于那些好奇的人，我完全忘记了 server.php 还包含一个 jstree（我也在左侧菜单中启动了它）。对于那些感兴趣或需要基于条件的树的人，我所做的是：

*   如上所述删除了 __construct 中的 $table = 'tree' ，变为 `function __construct($table, $fields = array(), $add_fields = array("title" => "title", "type" => "type"))`
*   向 config.php (session_start()) 添加了一个会话
*   我有一个登录，这让我可以得到条件
*   在 server.php 中，我做了以下 `if($_SESSION['condition'] == 1) { $jstree = new json_tree("tree");} else { $jstree = new json_tree("tree_users");}`

我希望这可以帮助别人！

# ios - 两个 UIGestureRecognizers 和 UIButton

> ID：10394034
> 
> 赞同：1
> 
> 时间：2012-05-01T05:43:00.017
> 
> 标签：ios, xcode, uibutton, uigesturerecognizer, ibaction

我遇到了这个问题，并且能够按照描述解决它。

[手势识别器和按钮操作](https://stackoverflow.com/questions/4825199/gesture-recognizer-and-button-actions)

但是，当我将第二个 UIGestureRecognizer 添加到同一个 UIView 时，不会为第二个 UIGestureRecognizer 调用 UIButton 选择器，而只会调用第一个。

所以我有一个带有两个 UIGestureRecognizers 的 UIView。UIView 上有一个 UIButton。

UIButton 选择器总是在第一个 UIGestureRecognizer 之后被正确调用。第二个 UIGestureRecognizer 对 UIButton 的第一次触摸什么也不做，但对 UIButton 的第二次触摸按预期工作。

如果我从视图中删除第一个 UIGestureRecognizer ，则在执行第二个手势后，第一个 UIButton 按下会按预期触发选择器。

知道为什么第一次触摸 UIButton 不会触发选择器，但第二次会触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:22:24.410

尝试将他的委托方法放在您的视图控制器中

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

向该方法返回 YES 保证允许同时识别。

# jqgrid - 如何使用saveRow的jqgrid extraParam参数

> ID：10394035
> 
> 赞同：3
> 
> 时间：2012-05-01T05:43:08.363
> 
> 标签：jqgrid

在一个单元格中，使用如下键值对选择编辑类型。

```
 colModel: [
            {name: 'Code', index: 'Code', width: '16%', editable: true, sortable: true },
            { name: 'ABC', index: 'ABC', width: '16%', editable: true, edittype: "select", editoptions: { value: "FE:FedEx;TN:TNT"} },
            { name: 'Emailid', index: 'Emailid', width: '16%', editable: true, sortable: true },
            ], 
```

现在在添加新行时，如果我选择了**FedEx** for **ABC**列，它会将 FE 发送到 EditURL Link 而不是**FedEX**，所以我想使用 extraParam 将 FEDEX 发送到 EditURL。

所以请任何人告诉我如何实现它。

为此，我的代码如下

**更新代码**

```
var grid = jQuery("#list5").jqGrid({
        url: '/home1/GetUserData',
        datatype: "json",
        mtype: "POST",
        colNames: ['Code', 'LoginID', 'Emailid'],
        colModel: [
                        {name: 'Code', index: 'Code', width: '16%', editable: true, sortable: true },
                        { name: 'LoginID', index: 'LoginID', width: '16%', editable: true, sortable: true },
                        { name: 'Emailid', index: 'Emailid', width: '16%', editable: true, edittype: "select", editoptions: { value: "FE:FedEx;TN:TNT"} },
                      ],
        rowNum: 10,
        autowidth: true,
        height: '100%',
        rowList: 10,
        pager: $("#pager2"),
        editurl: "/home1/EditUserData",
        onSelectRow: function (id) {
            if (id && id !== lastsel2) {
                if (id == "new_row") {
                    grid.setGridParam({ editurl: "/home1/InsertUserData" });
                }
                else {
                    grid.setGridParam({ editurl: "/home1/EditUserData" });
                }
                jQuery('#list5').restoreRow(lastsel2);
                jQuery('#list5').jqGrid('editRow', id, true, pickdates);
                $("#list5_ilsave").addClass("ui-state-disabled");
                $("#list5_ilcancel").addClass("ui-state-disabled");
                $("#list5_iladd").removeClass("ui-state-disabled");
                $("#list5_iledit").removeClass("ui-state-disabled");
                lastsel2 = id;
            }
        },
        caption: "Simple data manipulation"
    });
    jQuery("#list5").jqGrid('navGrid', '#pager2', { edit: false, add: false, del: true, search: false, refresh: false }, {}, {}, { url: '/home1/DeleteUserData' });
    jQuery('#list5').jqGrid('inlineNav', '#pager2', { edit: true, add: true, editParams: {extraparam: XYZ()}});
});

function XYZ()
{
  // from here i want to return the text of combo of selected row.
} 
```

**更新奥列格的代码**

```
var grid = jQuery("#list5"),
    editingRowId,
    myEditParam = {
        keys: true,
        oneditfunc: function (id) {
            editingRowId = id;
        },
        afterrestorefunc: function (id) {
            editingRowId = undefined;
        },
        extraparam: 
            // we get the text of selected option from the column
            // 'Emailid' and include the data as additional
            // parameter 'EmailidText'
           // EmailidText: function () {
             //   return $("#" + editingRowId + "_Emailid>option:selected").text();
            //}
// **my changes here bind ABC Function which return key , value pair of object** IS THIS POSSIBLE
           function () {
               ABC(); 
            }

    };

grid.jqGrid({
    url: '/home1/GetUserData',
    datatype: "json",
    ...
    onSelectRow: function (id) {
        var $this = $(this), gridIdSelector = '#' + $.jgrid.jqID(this.id);
        $this.jqGrid('setGridParam', {
            editurl: (id === "new_row" ?
                          "/home1/InsertUserData" :
                          "/home1/EditUserData")
        });
        if (editingRowId !== id) {
            $(gridIdSelector + "_iledit").click();
        }
    }
});
$grid.jqGrid('navGrid', '#pager',
    { edit: false, add: false, search: false, refresh: false},
    {}, {}, { url: '/home1/DeleteUserData' });

// inlineNav has restoreAfterSelect: true per default so we don't need to call
// restoreRow explicitly
$grid.jqGrid('inlineNav', '#pager',
    { edit: true, add: true, editParams: myEditParam,
        addParams: {addRowParams: myEditParam } }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:51:01.550

该代码可能是关于以下

```
var grid = jQuery("#list5"),
    editingRowId,
    myEditParam = {
        keys: true,
        oneditfunc: function (id) {
            editingRowId = id;
        },
        afterrestorefunc: function (id) {
            editingRowId = undefined;
        },
        extraparam: {
            // we get the text of selected option from the column
            // 'Emailid' and include the data as additional
            // parameter 'EmailidText'
            EmailidText: function () {
                return $("#" + editingRowId + "_Emailid>option:selected").text();
            }
        }
    };

grid.jqGrid({
    url: '/home1/GetUserData',
    datatype: "json",
    ...
    onSelectRow: function (id) {
        var $this = $(this), gridIdSelector = '#' + $.jgrid.jqID(this.id);
        $this.jqGrid('setGridParam', {
            editurl: (id === "new_row" ?
                          "/home1/InsertUserData" :
                          "/home1/EditUserData")
        });
        if (editingRowId !== id) {
            $(gridIdSelector + "_iledit").click();
        }
    }
});
$grid.jqGrid('navGrid', '#pager',
    { edit: false, add: false, search: false, refresh: false},
    {}, {}, { url: '/home1/DeleteUserData' });

// inlineNav has restoreAfterSelect: true per default so we don't need to call
// restoreRow explicitly
$grid.jqGrid('inlineNav', '#pager',
    { edit: true, add: true, editParams: myEditParam,
        addParams: {addRowParams: myEditParam } }); 
```

# html - 将垂直较大的图像保留在较小的、大小定义的 div 内而不会溢出

> ID：10394037
> 
> 赞同：1
> 
> 时间：2012-05-01T05:43:09.870
> 
> 标签：html, css

如果我有一个高度为 482 像素的 IMG，但我只希望第一个/前 200 个像素（不调整图像大小）出现在 div 中，我将如何实现这一点？现在所有 482 像素都在显示，它悬垂在 div 标签上。

```
.slideshow { width: 1080px; height: 200px; margin: auto }
```

```
<div class="slideshow">
  <img src="https://www.gravatar.com/avatar/dc8abc1d06f8fc5f2e8640379ccb4742?s=328&d=identicon&r=PG" width="1080" height="482" />
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:45:43.507

您需要添加溢出规则。

```
.slideshow { width: 1080px; height: 200px; margin: auto
    overflow: hidden;
} 
```

这将隐藏任何不适合容器的内容。

# sql-server-2008 - SSAS中有哪些不同类型的维度

> ID：10394041
> 
> 赞同：3
> 
> 时间：2012-05-01T05:43:29.063
> 
> 标签：sql-server-2008, ssas, ssas-2008

我现在正在学习 SSAS。我听说有很多类型的维度。那些是什么类型。像父子一样，还有更多的类别。谁能解释一下。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:49:39.067

尺寸类型：

雪花尺寸：基于多个来源表。退化维度：基于事实表中的列。这个维度会增加事实表的大小。仅根据业务需求使用，没有太大用处。

父子维度：基于自引用关系。示例：员工表。它有 EmpID、MangerID。这被视为 SSAS 2005 多对多维度中的常规维度：至少具有三个源表。例如：课程、讲师表 这解决了 SSAS 2000 中的建模问题

角色扮演维度：基于单表的多个关系。例如：时间维度。因为我们有 OrderData、ShippingDate、DeliveryDate 等。通常与时间维度一起使用

回写维度：原始最终用户更新源数据。这可以通过将 write back 属性设置为 true 来使用。在属性窗格中，我们有 WriteEnabled 选项。默认情况下，它设置为 false。将其标记为真实。由于数据被修改，因此很容易实现危险。

挖掘模型：基于您定义的挖掘结构。

# spring - Spring 3 验证抛出 java.lang.IllegalStateException

> ID：10394046
> 
> 赞同：1
> 
> 时间：2012-05-01T05:44:25.367
> 
> 标签：spring

**我的验证器类**

```
 public class ProductValidator implements Validator {
    public void validate(Object obj, Errors errors) throws ValidatorException {
        Product product =(Product)obj;
        if("NONE".equals(product.getCategory())){
            errors.rejectValue("category","Category Required");
        }
    } 
```

**我的jsp**

```
 <form:select path="category" cssClass="add">
        <form:option value="NONE" label="--- Select Category ---"/>
    <form:options items="${categoryList}" itemValue="categoryId" itemLabel="categoryName"/>             
</form:select>       
<form:errors path="category" cssClass="error"> </form:errors> 
```

当我在不选择任何选项的情况下提交表单时，它会给出错误，

无法将 java.lang.String 类型的属性值转换为属性类别所需的 com.main.java.Category 类型；嵌套异常是 java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为属性类别所需的类型 [com.main.java.Category]：找不到匹配的编辑器或转换策略

这里有什么问题吗？

请帮忙.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:48:36.427

如果未选择任何内容，则您将“NONE”字符串提交给您的控制器。

```
 <form:option value="NONE" label="--- Select Category ---"/> 
```

这就是您收到此异常的原因

# math - 是否可以使用这个 2x2 矩阵旋转像素？

> ID：10394052
> 
> 赞同：1
> 
> 时间：2012-05-01T05:45:45.423
> 
> 标签：math, opengl, graphics, matrix, rotation

![2x2 矩阵旋转](../Images/7569b2aae0e9b05ba21fe78bf8d73cb1.png)

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

假设我有（x，y）图像的 2D 像素，现在我想围绕 X 轴旋转这些像素。我可以使用上面的 2x2 矩阵吗？

什么时候使用 2x2 矩阵？这个 2x2 矩阵是如何使用的？

opengl 是在内部使用该矩阵还是 opengl 使用 3x3 矩阵？

上述 R 矩阵中的 theta 度数是如何测量的？它是（0,0）到（x，y）和（0,0）到（x'，y'）之间的角度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:56:07.377

您想要做的是将您的点视为 1X2 矩阵并将其与 R 矩阵相乘。这将为您提供一个 2X1 矩阵，其中是新点。

[x] X [Cos(a) -Sin(a)] = [newX, newY]
[y] X [Sin(a) Cos(a)]

数学：
newX = xCos(a) -ySin(a)
newY = xSin(a) +yCos(a)

这将使点 (x,y)`a`围绕 (0,0) 点旋转大约度数。

请注意确保使用正确的尺寸（度数或弧度）与 a、Cos 和 Sin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:46:41.933

> 假设我有（x，y）图像的 2D 像素，现在我想围绕 X 轴旋转这些像素。我可以使用上面的 2x2 矩阵吗？

不，因为您**不能**在 2d 空间中围绕 x 轴（或任何其他轴）旋转任何东西。在二维空间中，您只能围绕一个点旋转（并围绕轴**镜像）。**您提供的矩阵围绕零点旋转（x = 0，y = 0）。另一件事是您旋转顶点或纹理坐标，而不是像素。您只能在 3d 空间中绕轴旋转。

> opengl 是在内部使用该矩阵还是 opengl 使用 3x3 矩阵？

这由司机决定。最有可能的固定功能 OpenGL 在内部使用 4x4 矩阵（允许在 3d 空间中旋转+平移+投影）。但是，没有什么能阻止您编写将使用 2x2 矩阵的片段着色器。

> 上述 R 矩阵中的 theta 度数是如何测量的？它是（0,0）到（x，y）和（0,0）到（x'，y'）之间的角度吗？

答案是肯定的。它是 0;0 -> x';y' 和 0;0 -> x;y 之间的角度。但是，您仍然不能在 2D 中围绕“X 轴”旋转。您只能围绕一个点旋转。而且因为您的旋转矩阵是 2x2，所以您只能围绕 (0; 0) 点旋转、缩放、镜像和倾斜。对于需要移位/平移的任何其他内容，您需要 3x3 矩阵或 4x4 矩阵（即对 3d 向量进行 2d 操作，将 z 坐标设置为零）。

# javascript - 单击图像时应出现日期选择器

> ID：10394053
> 
> 赞同：1
> 
> 时间：2012-05-01T05:45:49.313
> 
> 标签：javascript, date, datepicker, mootools

在小提琴中，我正在显示一个动态日期选择器，当我们将光标放在该文本框上时，它会显示日期，这很好。我希望将图像放置在文本框的右侧，当单击图像时，将显示相同的日期选择器.

[http://jsfiddle.net/cBwEK/](http://jsfiddle.net/cBwEK/)

我正在尝试将图像放在那里，但是当我单击该图像时，什么也没有发生。如何做呢？请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:00:04.610

事实证明，这件事有一个选项：*toggleElements*。它需要一组也可以调用日期选择器的其他元素。我添加了一个带有单个元素的数组，它似乎工作得很好。

```
var dp = new DatePicker('.picker', {
  pickerClass: 'datepicker ',
  allowEmpty: true,
  toggleElements: ['imageInvokerP']
}); 
```

小提琴：http: [//jsfiddle.net/cBwEK/10/](http://jsfiddle.net/cBwEK/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:10:15.620

乔纳森给出了一个答案，这应该是做这类事情的方式。
但是有一个简单的解决方案，你可以
假设你的图像的 id 是`Image`文本框，`Input`
你可以做所有通常
将 datepicker 绑定到输入元素的事情`$('#Input').datePicker()`，`document.Ready`
接下来你可以绑定 $('#Image') 的点击事件像这样

```
$('#Image').click(function(){
$('#Input').click();
}); 
```

这样，当您单击图像时，您的输入元素将自动获得焦点。

# java - android中原始数据类型的值限制

> ID：10394054
> 
> 赞同：0
> 
> 时间：2012-05-01T05:47:19.697
> 
> 标签：java, android, long-integer

在我的 android 应用程序（音频处理）中，我使用 long 类型变量来计算它被暂停的位置，但该应用程序给了我对于大型音频文件的奇怪结果。经过一番努力，我发现位置计算超出了 android 的限制。尽管 java 中的 long 类型的最小值为 -9,223,372,036,854,775,808，最大值为 9,223,372,036,854,775,807，但我想知道为什么我的计算超出了限制。

在浏览了一些[帖子](https://stackoverflow.com/a/9935737/1219456)后，我发现 android 支持有限的值范围，这与 java 不同。但我的问题是如何在 android 中执行此计算？是否有任何其他 android 特定的数据类型？

这是我在我的应用程序中执行的计算： position=((bufferSize*currentPosition)/duration);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:59:35.410

正如我在评论中所指出的，您从中获取信息的帖子完全不正确。`long`始终为 64 位。NIO 可能有一些限制，但那是另一回事。

但是，您的问题可以很容易地解释，而无需任何技巧。这是您的代码：

```
position = (bufferSize * currentPosition) / duration; 
```

你还没有说和的类型是什么`bufferSize`，`currentPosition`但我假设它们是`long`. 如果你有一个非常大的缓冲区和一个“迟到”`currentPosition`的值，那么乘法的结果可能会溢出成负数。当您将该负数除以 时`duration`，您仍然会得到一个负数（但幅度较小）。

如果`bufferSize`和`currentPosition`是`int`变量而不是`long`，则溢出将发生得更快。实际上，如果是这种情况，那么您很可能只需通过强制以 64 位完成算术来解决您的问题：

```
position = ((long)bufferSize * currentPosition) / duration; 
```

您应该根据您的缓冲区大小计算出这将达到什么范围`currentPosition`- 老实说，我希望它适用于任何合理大小的文件长度和缓冲区大小组合。

如果这没有帮助，请发布更多信息 - 包括变量类型和您正在观察的值（对于所有变量，包括结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:57:03.383

就像@Jon Skeet 一样，我想很长一段时间就足够了。但在 long 不够大的情况下，您可以考虑将您的 bufferSize 除以一千或一百万。您会失去一些精度，但结果仍会接近您正在寻找的结果：您将以千字节或兆字节为单位来近似缓冲区“充满度”，而不是以字节为单位的值。

# java - WSO2 ESB 适配器

> ID：10394060
> 
> 赞同：1
> 
> 时间：2012-05-01T05:47:45.593
> 
> 标签：java, wso2, wso2esb

我刚刚安装了 v4.0.3。我正在寻找适用于 COTS 的适配器，例如 SAP BAPI 和 IDoc、PeopleSoft、MS Navision、IBM WebSphere MQ、Oracle AQ、MSMQ 和云服务，例如网站中列出的 Salesforce、Paypal、LinkedIn、Twitter、JIRA。[http://wso2.com/products/enterprise-service-bus](http://wso2.com/products/enterprise-service-bus)

但是，我找不到任何东西。我想知道是否有下载所有适配器的链接？

我还想问是否有任何好的或类似的链接可以教如何将 Flickr 等其他云服务集成到 ESB 中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:50:21.787

*   WSO2 SAP 适配器将在 WSO2 ESB 的下一个公开版本中提供。目前 WSO2 为其提供开发和生产支持订阅。

*   Oracle AQ - 有关将 Oracle AQ 与 wso2 集成的完整指南，请参阅 [1]。

*   所有 MQ 系列集成都可以使用 WSO2 ESB 完成，因为它具有对 JMS 的固有支持。例如，参考 [2]
*   LinkedIn、Twitter：目前我们通过使用 Rest API（进行 RESTful 调用）来支持这些。但是，WSO2 API Manager 正在进行一些开发，它提供了使用这些 API 的开箱即用体验。-Salesforce 参考 [3]。此外，还有一些工作在改进对此类云服务的 OOB 支持。

*   Flicker 提供了各种 API，因此您可以使用 ESB 与任何这些 API 集成。[http://www.flickr.com/services/api/](http://www.flickr.com/services/api/)

[1] [http://wso2.org/library/tutorials/2011/11/configuring-wso2-esb-with-oracle-as-messaging-media](http://wso2.org/library/tutorials/2011/11/configuring-wso2-esb-with-oracle-as-messaging-media)

[2] [http://techfeast-hiranya.blogspot.com/2009/09/enterprise-messaging-with-synapse-wso2.html](http://techfeast-hiranya.blogspot.com/2009/09/enterprise-messaging-with-synapse-wso2.html)

[3] [https://wso2.org/jira/browse/CARBON-7819](https://wso2.org/jira/browse/CARBON-7819)

# javascript - 从上下文中获取标题

> ID：10394061
> 
> 赞同：0
> 
> 时间：2012-05-01T05:47:54.837
> 
> 标签：javascript, jquery

如何选择上下文的标题？我想选择它来更改页面的标题。

```
var handler = function(context){
    document.title = //context's title
    ....
}

//sample context from ajax request
var context = '<!DOCTYPE html><html>\
            <head><title>Hello</title></head>\
            <body>\
            <a href="#">Click Here</a><p>This is my sentence.</p>\
            </body></html>';

.ajax{(
    ...
    success: function(data){
                 handler(data);
             }
}); 
```

* * *

**编辑**：我忘记了文档类型，以防万一。上下文来自 AJAX 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:49:49.970

您也可以使用正则表达式来提取标题

```
var matches = context.match(/<title>(.*?)<\/title>/);
var title = matches[1]; 
```

[演示](http://jsfiddle.net/zRJg2/1/)

* * *

刚刚发现了一种方法，即非正则表达式方式

```
title = $(context).filter("title");
console.log(title.html()); 
```

[演示](http://jsfiddle.net/tW7b9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T05:49:35.387

jquery $ 函数的第二个参数是上下文所以你可以试试`$("title",$(context)).text()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T05:55:27.003

```
var handler = function(context){

    $xml=$.parseXML(context);
   console.log($($xml).find('title').text());
}

var context = '<html><head><title>Hello</title></head><body><a href="#">Click Here</a><p>This is my sentence.</p></body></html>';

    handler(context); 
```

[http://jsfiddle.net/MdvWq/](http://jsfiddle.net/MdvWq/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T06:02:44.690

请检查[http://jsfiddle.net/sethunath/UAt5p/](http://jsfiddle.net/sethunath/UAt5p/)

```
$(context)[1].innerHTML 
```

返回标题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T05:48:52.507

[这应该这样做](http://jsfiddle.net/THdaC/)：

```
var title = $(context).eq(0).text() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T06:19:02.850

我不知道为什么，但没有人提到这一点。这是一种在响应中搜索元素的[流行方法：](http://api.jquery.com/filter/)

```
$(function() {
    var context = '<html><head><title>Hello</title></head><body><a href="#">Click Here</a><p>This is my sentence.</p>< /body></html > ';
    alert($(context).filter("title").html());   //Use filter to get elements you want
    alert($(context).filter("a").html());       //Will get HTML of that link (<a>)
    alert($(context).filter("body > p").html());  //HTML of <p>
});​ 
```

[http://jsfiddle.net/DerekL/THdaC/2/](http://jsfiddle.net/DerekL/THdaC/2/)

# facebook-c#-sdk - Facebook C# SDK - 如何从 Facebook 获取我的详细信息？

> ID：10394065
> 
> 赞同：0
> 
> 时间：2012-05-01T05:48:48.207
> 
> 标签：facebook-c#-sdk

如何连接到我的脸书？SDK 只接受 APP ID。如何获取我的 Facebook 新闻、笔记和好友列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:23:46.707

以下链接可用作 Facebook C# SDK 的启动

[http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx)

# ruby-on-rails - 使用 nokogiri 解析电子邮件

> ID：10394066
> 
> 赞同：1
> 
> 时间：2012-05-01T05:48:48.730
> 
> 标签：ruby-on-rails, parsing

我正在寻找有关如何使用 nokogiri 解析电子邮件的方向。下面是一个示例电子邮件。我已经查看了这份文档[http://nokogiri.org/tutorials/parsing_an_html_xml_document.html](http://nokogiri.org/tutorials/parsing_an_html_xml_document.html)和几个小时的谷歌搜索。我是 Ruby on Rails 的新手，正在寻找一个很好的示例或详细说明。感谢您的时间。

```
MIME-Version: 1.0
Received: by 10.76.129.52; Mon, 30 Apr 2012 22:11:24 -0700 (PDT)
Date: Mon, 30 Apr 2012 22:11:24 -0700
Message-ID: <CAJq2oOCB-UzNEFGc+3TVBSEA0L9VPRrjevhdW_KK41C+AGDjJw@mail.gmail.com>
Subject: Customize Gmail with colors and themes
From: Gmail Team <mail-noreply@google.com>
To: parse email <parseemail2@gmail.com>
Content-Type: multipart/alternative; boundary=bcaec545501825242f04bef29a74

--bcaec545501825242f04bef29a74
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

To spice up your inbox with colors and themes, check out the Themes tab
under Settings.
       Customize Gmail =BB <https://mail.google.com/mail/#settings/themes>

Enjoy!

- The Gmail Team
[image: Themes thumbnails]

Please note that Themes are not available if you're using Internet Explorer
6.0\. To take advantage of the latest Gmail features, please upgrade to a
fully supported
browser<http://support.google.com/mail/bin/answer.py?answer=3D6557&hl=3Den&=
utm_source=3Dwel-eml&utm_medium=3Deml&utm_campaign=3Den>
.

--bcaec545501825242f04bef29a74
Content-Type: text/html; charset=ISO-8859-1

<html>
<font face="Arial, Helvetica, sans-serif">
<p>To spice up your inbox with colors and themes, check out the Themes tab
under Settings.</p>

<table cellpadding="0" cellspacing="0">
  <col style="width: 1px;"/>
  <col/>
  <col style="width: 1px;"/>
  <tr>
    <td></td>
    <td height="1px" style="background-color: #ddd"></td>
    <td></td>
  </tr>
  <tr>
    <td style="background-color: #ddd"></td>
    <td background="https://mail.google.com/mail/images/welcome-button-background.png"
        style="background-color: #ddd; background-repeat: repeat-x;
            padding: 10px; font-size: larger">
          <a href="https://mail.google.com/mail/#settings/themes"
            style="font-weight: bold; color: #000; text-decoration: none;
            display: block;">
      Customize Gmail &#187;</a>
    </td>
    <td style="background-color: #ddd"></td>
  </tr>
 <tr>
    <td></td>
    <td height="1px" style="background-color: #ddd"></td>
    <td></td>
  </tr>
</table>

<p>Enjoy!</p>

<p>- The Gmail Team</p>

<img width="398" height="256" src="https://mail.google.com/mail/images/gmail_themes_2.png"
alt="Themes thumbnails" />

<p><font size="-2" color="#999">Please note that Themes are not available if
you're using Internet Explorer 6.0\. To take advantage of the latest Gmail
features, please
<a href="http://support.google.com/mail/bin/answer.py?answer=6557&hl=en&utm_source=wel-    
eml&utm_medium=eml&utm_campaign=en"><font color="#999">
upgrade to a fully supported browser</font></a>.</font></p>

</font>
</html>

--bcaec545501825242f04bef29a74-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:53:04.060

Nokogiri 非常适合解析 HTML，但您在这里拥有的是电子邮件。尝试使用[TMail](http://tmail.rubyforge.org/)首先从电子邮件中获取 HTML 部分，然后您可以使用 Nokogiri 来解析它。从 TMail 文档推断，您可以执行以下操作：

```
 email = TMail::Mail.load('my_email.eml')
  html_doc = Nokogiri::HTML(email.body) 
```

# android - 通过电子邮件发送的附件大小为 0KB

> ID：10394069
> 
> 赞同：1
> 
> 时间：2012-05-01T05:49:18.230
> 
> 标签：android, android-intent, email-client

我正在开发一个应用程序，我必须在其中通过电子邮件发送图像。我成功发送电子邮件，但发送的附件大小为 0KB。我没有得到什么问题。下面，我发布我的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class EtestActivity extends Activity {
/** Called when the activity is first created. */
Button email;
Intent in;
private static final String TAG = "EmailLauncherActivity";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    email = (Button)findViewById(R.id.email);
    email.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                in = new Intent(Intent.ACTION_SEND);
                in.setType("image/jpeg");
                in.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/android.jpg"));

                startActivity(Intent.createChooser(in, "Email..."));
            } catch (Exception e) {
                Log.e(TAG, "email sending failed", e);
            }//catch
        }//onClick
    });
}//onCreate
}//class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:55:07.027

我也面临通过更改 MIME 类型解决的相同问题。

试试这个 in.setType("image/jpg");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:51:58.990

您当时的手机是否安装在您的计算机上？SD 卡在连接到您的计算机时可能无法访问，因此它实际上可能没有附加图像。

# python - 在python中将列条目写在另一个下面

> ID：10394091
> 
> 赞同：-1
> 
> 时间：2012-05-01T05:52:04.303
> 
> 标签：python

我导入了一个包含 8 列的文件，每列由 分隔`'\t'`，因此在导入过程中，所有列`'\t'`都替换为`'space'`并`'\n'`拆分，以便我更轻松地进行索引。然后从输入文件生成一个列表以供进一步分析。但经过分析我得到

```
lst =  ['PAIR', '1MFK', 'URANIUM', '82', 'HELIUM', '112', 3.6997'] 
```

一种清单，所以我把

```
final = '    '.join(lst) 
```

得到像`PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997`
但是当我打印所有值时它如下

```
PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997  
PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506 
```

这里的列条目不只是在另一个下面，但是缩进对所有人都是一样的。

我已经尝试过，`'\t'`但会产生相同的随机结果。
请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:06:44.403

如果我理解正确，你可以做这样简单的事情..

```
>>> s = '''PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997  
... PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
... PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
... PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506'''
>>> ll = [x.split() for x in s.split('\n')]
>>> for row in ll:
...   print ''.join(x.ljust(10) for x in row)
... 
PAIR      1MFK      1         URANIUM   82        HELIUM    112       3.6997    
PAIR      2JGH      2         PLUTONIUM 98        POTASSIUM 88        5.3003    
PAIR      345G      3         SODIUM    23        CARBON    14        1.664     
PAIR      4IG5      4         LITHIUM   82        ARGON     99        2.5506 
```

这里我使用 10 个字符的固定列宽。如果您愿意，您可以通过预先计算适当的列宽来使其稍微复杂一些。

```
>>> column_widths = [max(len(x) for x in l) for l in zip(*ll)]
>>> for row in ll:
...   print '  '.join(x.ljust(w) for x,w in zip(row, column_widths))
... 
PAIR  1MFK  1  URANIUM    82  HELIUM     112  3.6997
PAIR  2JGH  2  PLUTONIUM  98  POTASSIUM  88   5.3003
PAIR  345G  3  SODIUM     23  CARBON     14   1.664 
PAIR  4IG5  4  LITHIUM    82  ARGON      99   2.5506 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:14:54.653

如果您没有**太多**列表，您可以执行以下操作：

```
lst1 =  ['PAIR','1MFK','1','URANIUM','82','HELIUM','112','3.6997']
lst2 = 'PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003'.split(' ')
lst3 = 'PAIR 345G 3 SODIUM 23 CARBON 14 1.664'.split(' ')
lst4 = 'PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506'.split(' ')
lsts = [lst1, lst2, lst3, lst4]
sizes = [max(len(item) for item in l) + 2 for l in zip(*lsts)]
for lst in lsts:
    print "".join(word.ljust(sizes[i]) for i, word in enumerate(lst)) 
```

**输出**

```
PAIR  1MFK  1  URANIUM    82  HELIUM     112  3.6997  
PAIR  2JGH  2  PLUTONIUM  98  POTASSIUM  88   5.3003  
PAIR  345G  3  SODIUM     23  CARBON     14   1.664   
PAIR  4IG5  4  LITHIUM    82  ARGON      99   2.5506 
```

这种方法的好处是您不必猜测需要填充多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:08:46.180

我假设每一行输入都成为一个列表（`lst`）进行处理。在你的处理循环中，你可以使用格式化指令和你的打印来排列输出。

鉴于您当前的输入 line/ `lst`：

```
lst =  ['PAIR', '1MFK', 'URANIUM', '82', 'HELIUM', '112', '3.6997']
final = ' '.join(lst) 
```

然后：

```
print('%8s %8s %10s %4s %10s %5s %10s' % (tuple(final.split()))) 
```

您可以调整字段宽度以满足您的需要。

如果您需要数字排列，您可以通过`int()`or将字符串转换为数字`float()`，然后使用适当的格式指令排列小数点，例如使用`%7.4f`浮点数和`%4d`整数（再次选择满足您需要的值)

# php - 如何将 mysql 数据从表中获取到 php date() 中？

> ID：10394092
> 
> 赞同：0
> 
> 时间：2012-05-01T05:52:13.773
> 
> 标签：php, mysql, date, time

标题很奇怪，是的。（我是挪威人）

好的，我正在为我的新项目制作一个计数器/计时器，它的作用是当用户执行操作时，他/她必须等待 100 秒才能再次执行此操作。但是，如何将时间戳（保存在 mysql db 中）再次放入 PHP 代码中，并检查自上次用户检查重试以来的时间。

我的一些代码（来自脚本）：

```
// Waiting for time to go?
$sql = mysql_query("SELECT * FROM `crimes` WHERE user_id = '".$_SESSION["id"]."'");
$num = mysql_num_rows($sql);
$row = mysql_fetch_array($sql);

if($num == 1){ //Waiting
    $time_now = date("H:i:s", strtotime("+100 seconds")); // This is where Im stuck, how to get that timestamp from mysql with 100 secs added?
    $time_to_check = date("H:i:s", $row["time"]); // The time the action was done.

    // This is where the code is going to check how long time since user visited.

} else {        

} 
```

所以我要求的是我需要一个包含来自 mysql 的数据并添加 100 秒的 var，如何？:)

这有效：

```
$sql2 = mysql_query("SELECT UNIX_TIMESTAMP(time) AS time FROM `crimes` WHERE user_id = '".$_SESSION["id"]."'");
$row2 = mysql_fetch_array($sql2);
$seconds_ago = time() - $row2['time'];
$time_now = date("H:i:s", $seconds_ago + 100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:01:33.563

```
$time = date("h:i:s", time() + 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:06:34.273

```
$time_now = strtotime("now"); 
$time_to_check = strtotime($row["time"]) + 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:07:35.513

您可以在 MySQL 中将日期转换为 UNIX 时间戳：

```
SELECT UNIX_TIMESTAMP(time) AS time FROM `crimes` ... 
```

然后在 PHP 中：

```
$seconds_ago = time() - $row['time']; 
```

# algorithm - 考虑到图像压缩，运行长度编码总是比霍夫曼编码好吗？

> ID：10394093
> 
> 赞同：0
> 
> 时间：2012-05-01T05:52:18.473
> 
> 标签：algorithm, image-processing, image-compression

我们发现，考虑到压缩比，运行长度比霍夫曼编码 (JAVA) 好得多。是否适用于所有情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:55:50.667

当然不是。考虑一下`ABABABAB`，使用 huffman 压缩比运行长度编码更好。

运行长度仅适用于具有重复值的数据；图像中不能保证这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T05:59:06.353

RLE 通常适用于具有大面积相同颜色的图表和图形。

对于像照片这样几乎总是在像素之间表现出至少微小差异的事物，即使在看起来像纯色的区域中，它往往效果不佳（通常会导致扩展）。

虽然同样的*一般*想法也倾向于适用于霍夫曼，但它往往在更广泛的输入中工作得更好。从理论上讲，它也可能导致扩展，但我见过的唯一一次是尝试在已经压缩的数据上使用它。

# jquery - 如何使用 jQuery 实现嵌套悬停？

> ID：10394094
> 
> 赞同：1
> 
> 时间：2012-05-01T05:52:23.653
> 
> 标签：jquery

我的网站： http: [//modernego.info](http://modernego.info)

我有一个`<a>`名为`#btn-cart`. 提供时，它会下拉并显示一个名为`.block-cart`. 所以这就是我想要的方式：

如果悬停在`#btn-cart`设置`.block-cart`为`display:block;`
如果悬停在`#btn-cart`设置`.block-cart`为`display:none;`

如果悬停在`#btn-cart`set `.block-cart`to`display:block;`
然后悬停在`.block-cart`忽略 mouseleave on `#btn-cart`。

我得到了使用下面的代码；但是，当我设置 时`$('.block-cart').fadeOut(200)`，即使我将鼠标悬停在它上面也会`.block-cart`设置为。`display:none`

另外，我之所以使用这个购物车，`.live`是因为这个购物车是通过 Ajax 运行的，没有它，jQuery 在 Ajax 调用之后就无法工作。有没有更好的办法？

```
jQuery(function($) {
    $('#btn-cart').live('mouseenter', function() {
        $('.block-cart').css('display','block');                
    });
    //----------------------------------------------            
    $('.block-cart').live('mouseenter', function() {
        var close = false;
        $('.block-cart').css('display','block');    
    });
    //----------------------------------------------
    $('.block-cart').live('mouseleave', function() {
        close = false;
        $('.block-cart').fadeOut(200);   
    }); 
    //----------------------------------------------

    if (close != false) {   
        $('#btn-cart').live('mouseleave', function() {  
            $('.block-cart').fadeOut(200);
        });
    }

});

        <li class="hover hover-cart-sidebar">
                <a href="http://modernego.info/checkout/cart/" class="btn-cart hover-cart" id="btn-cart" title="Cart">

                        <span class="quantity">0</span>

                </a>    
                <div class="block block-cart">
    <div class="block-title">
    <strong><span>My Cart</span></strong>
</div>
<div class="block-content">
                        <p class="empty">Add something to your cart.</p>

        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:15:49.420

我以很多不同的方式做了很多次，但是当我想到这个问题时，我认为最好的方法是用数据属性破解它。

简化示例：

HTML *（简化/脏版，添加输入以检查子元素上的焦点/悬停）*

```
<div id="container">
    <a href="#" id="opener">open</a>
    <div id="menu">
        It's opened<br />
        <input /><br />
        Here
    </div>
</div> 
```

JS *( 应该优化以避免重复的 DOM 搜索，但是你会得到
* *Updated to reflect`fadeOut()`而不是`hide()`*
* *Updated to use`on()`而不是`hover()`*

```
$("#menu").hide();

$("#container")
    .on("mouseenter", "#menu", function(){
        $(this).data("hover", true);
        $(this).show();
    })
    .on("mouseleave", "#menu", function(){
        $(this).data("hover", false);
        $(this).fadeOut(200);
    });

$("#container")
    .on("mouseenter", "#opener", function(){
        $("#menu").show();
    })
    .on("mouseleave", "#opener", function(){
        setTimeout(function(){
            var menuHovered = $("#menu").data("hover");
            if(!menuHovered) {
                $("#menu").fadeOut(200);
            }
        }, 50);
    }); 
```

小提琴

[http://jsfiddle.net/Meligy/GLG6A/](http://jsfiddle.net/Meligy/GLG6A/)（使用`hover()`宽度`hide()`）
[http://jsfiddle.net/Meligy/GLG6A/3/](http://jsfiddle.net/Meligy/GLG6A/3/)（使用`hover()`宽度`fadeOut()`，只有轻微的变化）
[http://jsfiddle.net/Meligy/GLG6A/ 5/](http://jsfiddle.net/Meligy/GLG6A/5/)（`on()`在元素上使用而不是`hover()`）
[http://jsfiddle.net/Meligy/GLG6A/6/](http://jsfiddle.net/Meligy/GLG6A/6/)（`on()`在容器上使用，对AJAX更现实）

信用：

从这里得到灵感[如何检查鼠标是否在 jQuery 中的元素上？](https://stackoverflow.com/questions/1273566/how-do-i-check-if-the-mouse-is-over-an-element-in-jquery/1273609#1273609)并认为它工作得最好，最简单，它确实做到了！（至少在我的测试中）

# css - 对齐图像和超链接

> ID：10394096
> 
> 赞同：1
> 
> 时间：2012-05-01T05:52:46.260
> 
> 标签：css

我在 div 中有一个图像和一个超链接，但由于某种原因，超链接未与图像居中对齐。

这是我的 CSS

```
 #loginb {
    margin-top: 40px;
    height: 50px;
    left: -438px;
    float:right;
    position: relative;
    display:block;    
}

#loginb img {
    padding-top: 10px;
}

#loginb a {
    color: #fff;   
    line-height: 10px;
} 
```

这是html

```
 <div id="loginb">
                   <img src="icon.png" alt="login" />
                   <a href="">                  Login</a>
              </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:31:04.477

看到这个，希望你能找到你的解决方案。

```
<div>
   <img style="width:50px;height:50px;vertical-align:middle" alt="vertical image">
   <span style="color:red;">Check it.</span>
</div> 
```

# bash - Bash 中的真假后台进程

> ID：10394101
> 
> 赞同：-3
> 
> 时间：2012-05-01T05:53:32.190
> 
> 标签：bash, wget, zenity

后台有限任务的最终结果：

```
( wget google.com && zenity --info || zenity --error ) & PID=$!
...if ... kill $PID ...zenity ... 
```

他为什么不行动？应该怎样才好？

[编辑：] 已修复，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:58:10.570

使用您发布的内容，`wget`在后台开始，但`zenity`不是，它在`wget`启动后立即运行。所以它根本没有机会获得`wget`' 的返回值：`wget`还没有完成！

尝试类似：

```
( wget google.com  && zenity --info || zenity --error ) &
PID=$!
if ... kill $PID ...zenity ... 
```

# jquery - 在窗口调整大小时在移动视图和桌面视图之间交换

> ID：10394104
> 
> 赞同：0
> 
> 时间：2012-05-01T05:54:30.457
> 
> 标签：jquery, html

如何根据浏览器尺寸交换桌面视图和移动视图。像 bostonglobe.com 网站一样，当我调整窗口大小时，它会自动在移动设备和桌面设备之间切换。它是 HTML5 属性还是 jquery 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:22:20.460

一个很棒的问题。

我想将一些资源发送给您，对于这样的事情，我个人觉得尝试自己将它们拼凑在一起很不错。

首先，仔细阅读这篇文章——[**响应式网页设计**](http://www.alistapart.com/articles/responsive-web-design/)

牢牢掌握媒体查询，您可以使用它们做什么，不能做什么。

* * *

其他替代资源——[**聪明的我们使用 js event_listeners 来检测浏览器窗口分辨率的变化**](http://www.themaninblue.com/experiment/ResolutionLayout/)

这是另一条替代路线，可能涉及更多工作，但所有代码都在那里。

* * *

[**少框架**](http://lessframework.com/)

这是一个带有网格系统的 CSS 框架，其设计完全符合您的想法。不是我喜欢的方法，但选择越多越好？

祝你好运……或者呃咳咳，愿你运用知识和决心为你带来成功，或其他什么。

# javascript - 使用 jquery 或任何首选库获取文档中包含的所有元素及其当前值

> ID：10394106
> 
> 赞同：1
> 
> 时间：2012-05-01T05:54:44.653
> 
> 标签：javascript, jquery, html

我试图从一个页面中获取整个 DOM

```
document.getElementsByTagName('html')[0].innerHTML 
```

但我注意到它没有得到任何`inputs`, `textareas`,`selects`等的当前值...

有没有办法我也可以获取它们的当前值？本质上，我想在当前状态下对页面进行快照。

我在 JQuery 中查看过`.each`，`.serialize`但似乎两者都不是理想的解决方案..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T05:59:01.330

首先将所有表单输入的值移动到`value`属性：

```
$(':input').each(function(){
    $(this).attr('value', this.value);
}); 
```

然后使用您的代码：

```
document.getElementsByTagName('html')[0].innerHTML
// Or the jQuery way:
$('html').html() 
```

[**现场演示**](http://jsfiddle.net/4xGxL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:01:22.663

您可以尝试这样的方法来通过 jQuery 选择 DOM 中包含的所有元素

```
 $(document).Ready(function(){
 //select all the document in the DOM
  $("*");
 }); 
```

# java - Java：函数式编程中线程之间的状态共享

> ID：10394113
> 
> 赞同：2
> 
> 时间：2012-05-01T05:55:45.370
> 
> 标签：java, functional-programming, mutable

我的问题是这个问题的更具体的实例：[函数式编程：状态与重新分配](https://stackoverflow.com/questions/353912/functional-programming-state-vs-reassignment)

我是 FP 的新手，并试图通过 Java 来理解它。

我有以下类，其对象在多个线程之间共享：

```
public class Bank
{
    private double[] accounts = new double[1000];

    public synchronized void transfer(int from, int to, double amount)
    {
        account[from] -= amount;
        account[to] += amount;
    }
} 
```

（这是一个非常简化的示例，因此省略了验证和条件等待等其他细节）。

因为 'transfer' 方法是同步的，所以 Bank 对象的可变状态即使与多个线程共享也不会被破坏。如果我想通过 Java 中的 FP 实现同样的目标，我将如何编写该代码？（我想看一个实际的代码示例）。

编辑：我对 FP 的兴趣源于它编写线程安全的并发应用程序的潜力。以下是声称它的文章的链接：http: [//www.defmacro.org/ramblings/fp.html](http://www.defmacro.org/ramblings/fp.html)

EDIT2：刚刚发现了一个 STM for Java。不确定它的性能，但它似乎提供了我想要的。[http://multiverse.codehaus.org/60second.html](http://multiverse.codehaus.org/60second.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:02:05.970

有许多方法可以以更实用的方式处理您的共享、同步状态变量。

**交易变量**

这里的经典方法是使用事务内存：

*   例如[实现一个交易账户](http://en.wikipedia.org/wiki/Concurrent_Haskell)

您在程序中*只有一个*共享状态变量，支持冲突写入的回滚。在 Haskell 中，这将通过monad（仅通过事务变量支持状态的 monad `TVar`）中的（事务变量）来表示。`STM`

在这里使用 STM 的好处是可以保证避免死锁（尽管仍然可以使用活锁）。

**内存变量**

您还可以使用更传统的方法，例如`MVar`s. 这些是表现为锁的可变变量：

*   它们只包含一个值
*   该值可能会被删除或放入变量中
*   如果一个线程试图写入一个完整的 MVar，它会阻塞
*   如果一个线程试图从一个空的 MVar 中读取，它会阻塞

通过这种方式，您可以支持线程以原子方式更新共享值。

我会选择 STM 解决方案，因为这是最惯用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T23:28:01.960

将其转变为功能性方法的主要目的是计算一个新世界。在您的示例中，银行状态就是您的世界，因此您希望为每个 TX 计算一个新的银行状态。这可能看起来像：

```
class BankState implements Function<Id, AccountState> {
  final Map<Id, AccountState> balances; // ctor injected immutable

  /** initial ctor, build a map of balances computed by from function */
  BankState(Function<Id, Option<AccountState>> from, Iterable<Id> accounts) {
    this.balances = computeMap(from, accounts);//
  }

  /** overlay ctor, if account state provided by the tx use that, 
    * otherwise the old one is used */
  BankState(Function<Id, Option<AccountState>> tx, Map<Id, AccountState> old) {
    this.balances = overlay(tx, old);// special map with overlay
  }

  public AccountState apply(Id id) {return balances.get(id);}

  public BankState update(Function<Id, Option<AccountState>> tx) {
    return new BankState(tx, balances);
  }

  public BankState transfer(final Id from, final Id to, final Money amount) {
    return update(new Function<Id, Option<AccountState>>() {
      public Option<AccountState> apply(Id id) {
        if (id.equals(from) return some(bank.apply(id).debit(amount));
        if (id.equals(to) return some(bank.apply(id).credit(amount));
        return none();
      }
    });
  }
} 
```

然后，您可以简单地使用 AtomicReference 来保存当前状态并以原子方式将其更新为新的 BankState。

您需要覆盖和计算地图实现，但这些很容易使用 Guava 创建（例如，它已经有 MapMaker.makeComputingMap(Function)）。

出于说明目的，这是一个幼稚的实现，真正的实现将包含许多优化。

我使用的选项在这里：[https ://bitbucket.org/atlassian/fugue/src/master/src/main/java/com/atlassian/fugue/Option.java](https://bitbucket.org/atlassian/fugue/src/master/src/main/java/com/atlassian/fugue/Option.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T08:59:17.553

FP 是线程安全的，因为没有可变状态。现在您的示例包含可变状态。

紧随其后的是，您无法通过应用 FP 原则使其成为线程安全的，除非您找到一种方法来实现您想要的而不使用可变状态。

您可以有多个线程，每个帐户的余额为 0，并处理多个事务，从而保持已处理事务的总体效果。最后，您可以总结所有帐户和初始金额，并获得总体结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T11:17:41.507

FP 的想法是避免可变状态，当状态必不可少时，您可以使用函数构造来模拟可变性。例如，在 Haskell 中，您可以使用[monads](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29)来做到这一点。

# c++ - 谁能告诉我为什么程序在 try 块中调用 abort() ？

> ID：10394119
> 
> 赞同：0
> 
> 时间：2012-05-01T05:56:29.360
> 
> 标签：c++

下面的程序编译成功，但无法运行并调用 abort() 函数，该函数会抛出一条消息，提示“此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。” ， 为什么这样？

```
#include<cstring>
#include<iostream>

using std::string;
using std::endl;
using std::cout;

class ThrowException{

    private:
        string msg;
        int b;
    public:
        ThrowException(string m="Unknown exception",int factor=0) throw(string);        //A

};

ThrowException::ThrowException(string m, int f) throw(string):msg(m),b(f){                 //B
    if(b==1)
        throw "b=1 not allowed.";
}

int main(){

    try{
        ThrowException a("There's nothing wrong.", 1);
    }catch(string e){
        cout<<"The address of e in catch block is "<<&e<<endl;
    }    

} 
```

![错误信息](../Images/f334ae85ce96d9b3ae944d1cc444d4dd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T06:02:00.710

在这条线上：

```
throw "b=1 not allowed." 
```

你实际上是在扔一个`const char*`. 如果您将其更改为：

```
throw std::string("b=1 not allowed.") 
```

或将 catch 块（和相应的`throw`限定符）更改为：

```
}catch(const char* e){ 
```

它会起作用的

# url-rewriting - 在 iis 7 中的回发事件后附加 URL 重写 querstring

> ID：10394120
> 
> 赞同：1
> 
> 时间：2012-05-01T05:56:52.007
> 
> 标签：url-rewriting, iis-7.5, url-rewrite-module, postbackurl

我在使用 iis 7.5 的 URL 重写模块时遇到问题。

我制作了友好的 url，它以友好的 url 格式格式化 querstrings，例如

> http:domain.com/Blog/Category-2/Welcome-to-your-Blog

一切正常。但是在 asp.net 回发事件中，它再次附加了如下所述的查询字符串

> [http://domain.com/Blog/Category-2/Welcome-to-your-Blog?Category=Category-2&post=Welcome-to-your-Blog](http://domain.com/Blog/Category-2/Welcome-to-your-Blog?Category=Category-2&post=Welcome-to-your-Blog)！

但我不希望这发生在 url 中。请帮助我如何避免这种情况。从附加 querstrings。

# mysql - 添加 var 时 mySQL 中断

> ID：10394126
> 
> 赞同：2
> 
> 时间：2012-05-01T05:58:15.973
> 
> 标签：mysql

我正在尝试修改 mySQL 查询（有效）以返回更具体的结果。我在语句中添加了一个变量，以便它查找 jobID 和 UserName。将 $userName 添加到语句中会破坏它。

我将下面的代码与 SQL 语句的三种变体一起包含在内，以进行比较。我敢肯定，这对所有人来说都是显而易见的——除了我……

提前致谢！

D B

* * *

```
// get all applicants from a User
public function GetAllMyApplications($from=false, $to=false, $user_name)
    {
    global $db;
    $applicants = array();

    if ($from >= 0 && $to > 0)
            {
                $sql_limit = ' LIMIT ' . $from .', ' . $to;
            }
            else
            {
                    $sql_limit = '';                
            }

    $user_name = "Bob Bobberton"; // reset this var for testing

    $sql = 'SELECT * FROM '.DB_PREFIX.'job_applications WHERE job_id = '. $this->mJobId . ' ORDER BY name ASC ' . $sql_limit; // This was the original SQL that worked

    $sql = 'SELECT * FROM '.DB_PREFIX.'job_applications WHERE job_id = '. $this->mJobId . ' AND name = ' . $user_name . ' ORDER BY name ASC ' . $sql_limit; // Added "and" $user_name - it breaks 

    $sql = 'SELECT * FROM '.DB_PREFIX.'job_applications WHERE job_id = '. $this->mJobId . ' AND name = "Bob Bobberton" ORDER BY name ASC ' . $sql_limit; // Replace var with value "Bob Bobberton" and it works

    $result = $db->query($sql);
    while ($row = $result->fetch_assoc())
    {
            $applicants[] = array('id' => $row['id'], 
                    'job_id' => $row['job_id'], 
                    'name' => $row['name'], 
                    'email_address' => $row['email_address'], 
                    'message' => str_replace(array("\r\n", "\r", "\n"), "<br />", $row['message']),
                    'resume_path' => base64_encode($row['resume_path']),
                    'created_on' => $row['created_on'],
                    'ip' => $row['ip']);
    }

    if (isset($applicants))
    {
        return $applicants;
    }else{
        return("");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:03:02.597

改变这个

```
' AND name = ' . $user_name . ' ORDER BY name ASC ' 
```

到

```
" AND name = '" . $user_name . "' ORDER BY name ASC " 
```

它会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T20:42:09.803

[Satya 提供](https://stackoverflow.com/a/10394161/296974)的解决方案是不够的。您应该正确地转义您的输入。

假设您`$username`包含一个`"`字符。这会破坏你的 SQL 语句。所以你应该使用准备好的语句，或者至少使用函数`mysql_real_string_escape()`。

# java - 使用 netbeans 和 maven 创建 JApplet

> ID：10394129
> 
> 赞同：3
> 
> 时间：2012-05-01T05:58:34.987
> 
> 标签：java, maven-2, netbeans-7, japplet

嗨，我一直在尝试创建一个 JApplet，为我正在处理的项目创建一个 GUI。但是在项目中使用 maven 时，我似乎无法让它工作。到目前为止，我已经在视觉上创建了 GUI，它在非​​ Maven 设置中运行良好。我需要 maven 才能获得运行项目所需的一些包...

所以我的问题是，我需要采取哪些步骤才能使用 maven 获得工作的 JApplet？

我的小程序类名称是 ArFileJApplet，它在包 com.allcare.ArFile 中，项目名称是 ArFile。

我也希望能够自然地将这个小程序作为 Web 服务运行......

我觉得这与运行小程序所需的 .jar 文件有关，maven 会生成这个吗？我在哪里可以找到它的名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:43:32.000

我决定改用 ANT 脚本，这对于获取库来说效果更好，并且没有给我带来任何麻烦。

# jquery - .is(':checked') 在 jquery 中不起作用

> ID：10394131
> 
> 赞同：1
> 
> 时间：2012-05-01T05:58:49.273
> 
> 标签：jquery, radio

你好朋友我想要当用户选中单选框然后文本将显示以下是我的代码你也可以在这里查看我的代码[http://jsfiddle.net/mY4N5/](http://jsfiddle.net/mY4N5/)

**HTML**

```
<form id="form1" name="form1" method="post" action="">
  <label>
  <input name="radiobutton" type="radio" value="radiobutton" id="red"/>
  </label>
</form>
<div id="dis">
hi

</div> 
```

脚本

```
$('#dis').css('display','none');

    if($('#red').is(':checked'))
    {
    $('#dis').css('display','block');
    }
    else
    {
        $('#dis').css('display','none');
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:09:00.800

```
$(function(){
    $('#dis').css('display','none');
        $('#red').click(function(){
           if($('#red').is(':checked'))
            {
                $('#dis').css('display','block');
            }
            else
            {
                $('#dis').css('display','none');
            };
        });
    }) ; 
```

试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:35:15.690

如果您使用单选按钮并且特定单选的值很重要，您可以使用此
[http://jsfiddle.net/LcEn6/](http://jsfiddle.net/LcEn6/)
如果您只想检查其中一个，而不管您可以使用哪个。
[http://jsfiddle.net/V4W7j/](http://jsfiddle.net/V4W7j/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:08:34.607

您需要添加单击或更改事件来运行条件

```
$('#dis').css('display','none');

$('#red').click(function() {
    if($(this).is(':checked'))
    {
        $('#dis').css('display','block');
    }
    else
    {
        $('#dis').css('display','none');
    };
}); 
```

# asp.net - 使用 Asp.net 将 Web 服务 URL 传递给 Flex 3

> ID：10394135
> 
> 赞同：0
> 
> 时间：2012-05-01T05:59:19.403
> 
> 标签：asp.net, visual-studio-2010, web-services, apache-flex, flex3

我正在使用 Flex Builder 3 和 Visual Studio 2010 我创建了 webService.asmx 和 default.aspx。我想在 default.aspx 中使用这个 swf 文件。我想将 Web 服务 url 动态传递给我的 swf 文件。我的 mxml 包含此代码

```
 <mx:WebService id="webService" 
    wsdl=""
    useProxy="true"
    fault="Alert.show(event.fault.faultString), 'Error'">
        <mx:operation name="addData" 
            resultFormat="object"                
            result="AddRecord();" 
            />
</mx:WebService> 
```

我想动态传递 wsdl 即[http://localhost:12345/flexProject/WebService.asmx?wsdl](http://localhost:12345/flexProject/WebService.asmx?wsdl)到我的`<mx:WebService wsdl="">`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:20:14.673

使用[Flashvars](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_3.html)。

# php - 将会话数据写入数据库

> ID：10394140
> 
> 赞同：1
> 
> 时间：2012-05-01T05:59:36.640
> 
> 标签：php, mysql, session

我正在创建一个迷你购物车，我想知道是否有办法从会话中获取数据并将其写入数据库。用户选择的零件应该被添加到他们的购物车中。完成后，我将如何获取存储到会话中的数据，并将其写入数据库，以便他们下次登录时他们的购物车仍然存在？

```
<?php
if (isset($_GET['add'])) {
$quantity = mysql_query('SELECT partID, quantity, catergory FROM computerparts WHERE partID=' . mysql_real_escape_string((int) $_GET['add']));
while ($quantity_row = mysql_fetch_array($quantity)) {
    if ($quantity_row['quantity'] != $_SESSION['index_' . $_GET['add']]) {
        $_SESSION['index_' . $_GET['add']]+='1';
    }
}
header('Location: ' . $page);
}

 if (isset($_GET['delete'])) {
$_SESSION['index_' . (int) $_GET['delete']] = '0';
header('Location: ' . $page);
}

function cart() {
$total = "";
$sub = "";
foreach ($_SESSION as $name => $value) {
    if ($value > 0) {
        if (substr($name, 0, 6) == 'index_') {
            $id = substr($name, 6, (strlen($name) - 6));
            $get = mysql_query('SELECT partID, partName, price FROM computerparts WHERE partID=' . (int) $id);
            while ($get_row = mysql_fetch_array($get)) {
                $sub = $get_row['price'] * $value;
                echo $get_row['partName'] . 'x' . $value . '@ &pound;' . $get_row['price'] . '=' . $sub . '<a href="index.php?delete=' . $id . '">Delete</a> <br />';
            }
        }
        $total += $sub;
    }
}
if ($total == 0) {
    echo 'Your cart is empty';
} else {
    echo 'Total: &pound' . $total;
}
}
?> 
```

为了让事情变得更容易，我已经从这个网站上删除了功能。将不会购买任何物品，所有发生的事情是用户选择他想要的物品并保存该信息，以便在他希望您可以将其引用到规范时随时访问。（规格表）他选择的项目将被写入该表。使用当前登录的用户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:30:57.300

法达米

您正在考虑将会话数据存储在数据库中，因为如果用户在它的购物车中添加商品，然后他在没有从您的购物车中购买商品的情况下注销。

然后下次他来时，我们必须向他展示该物品（您已将该物品添加到购物车但未购买......）

我认为这是你的逻辑......为此我有一个答案..

您可以使用“标志类型”待定“将该特定购买项目存储在您的 purchase_item_by_user 表中。

所以每次你必须检查列表中是否有待处理列表中的项目......（你也可以检查特定的日期或时间......）

之后，当用户购买该项目时，您可以将其标志更改为“已购买”，或者如果用户取消该项目，则您可以设置标志“已取消”..

这会帮助你...谢谢，Tarun Malpani...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:57:27.433

如果我正确理解您的问题，那么您已经在会话数组中存储了您想要的值。

在这种情况下，由于数据存储在会话中，如果会话仍然处于活动状态，您可以通过以下方式访问值：`$_SESSION['cartItem']`

然后要将这些值存储在数据库中，请检查此链接：

[**PHP 和写入 MySQL 数据库**](http://bytes.com/serversidescripting/php/tutorials/phpandwritingtomysqldatabases/index.html)。这是假设它是一个 mysql 数据库，我不确定您打算如何连接或连接哪种类型的数据库，如果它有所不同，请澄清这一点。

* * *

现在表格本身，您将要保存选定的项目，并使用一个值来确定它是否已被购买。您可以在用户离开时提示他们是否想保存购买以供日后使用。如果是这样，您可以通过 ajax 将值（在这种情况下为“是”）传递给 php 函数，然后该函数将启动将会话值发送到数据库，其中有一列指定购买是挂起还是完成。

看看这些链接，以进一步说明如何实现这一点：[**AJAX 和 PHP**](http://www.w3schools.com/php/php_ajax_php.asp)

* * *

这也可以通过检查当前用户的“购物车”是否已满来实现，如果是，当他们离开时，您可以自动将数据保存到引用用户 ID 的数据库中。因此，当该用户重新登录购物车时，将保存并可以再次访问。

检查`onbeforeunload`javascript事件。您可以利用它来查看他们是否正在关闭/询问他们是否要关闭，如果是，他们是否会“保存他们的购物车？”，或者只是将该数据保存到数据库中以便他们稍后登录，这也可以当他们继续注销时触发一个函数。

检查此链接以获取演示和更多信息：[**onbeforeunload 事件**](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

* * *

有很多方法可以做到这一点，我不愿意为所述过程写出单一的方法。然而，这些信息是可用的，只要记住准备你的陈述和/或使用 PDO 并尽可能以安全的方式转移东西。

参考链接：[**Prepared Statements**](http://mattbango.com/notebook/web-development/prepared-statements-in-php-and-mysqli/) , [**PDO**](http://php.net/manual/en/ref.pdo-mysql.php)

*对 PHP 发出愤怒的嘶嘶声

# x86-16 - 在十六进制数前附加 0

> ID：10394149
> 
> 赞同：0
> 
> 时间：2012-05-01T06:00:36.580
> 
> 标签：x86-16, assembly

我的老师指示我在编写指令`0`之前附加，`hexa numbers`因为一些编译器会在指令中的数字之前搜索以`0`将其与标签区分开来。如果指令已经以 0 开头，我会感到困惑，在这种情况下应该怎么做？

例如，

```
AND BL, 0FH 
```

是否需要`0`在该十六进制数之前添加？请帮帮我。谢谢

## 编辑：

对不起，如果我之前不够清楚。我的意思是在上面的例子中，一个 0 已经存在，我需要将它转换为，

```
AND BL, 00FH 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:06:39.023

除了`0`or之类的特殊情况`1`，我倾向于用完整的数字对我的十六进制数字进行编码，这样更容易看出意图是什么：

```
mov al, 09h
mov ax, 0123h 
```

等等。

对于数字以字母字符（如`deadbeef`）开头的情况，我会在其前面加上一个额外的`0`.

但是不，如果您的十六进制数已经以数字开头，通常^((a))不需要这样做。

在任何情况下，我都会将大多数数字放入`equ`语句中，而不是在整个代码中散布幻数。你更愿意看到：

```
mov ax, 80 
```

或者：

```
mov ax, lines_per_screen 
```

* * *

^((a)) Of course, it depends on your assembler but, from memory, all the ones I've used work this way.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T06:03:10.843

不，没有必要（包括多个前导 0 是相当不寻常的）。

你的例子是一个恰当的例子——如果没有前导`0`告诉它这是一个数字，汇编程序通常会解释`FH`为一个符号而不是一个数字。

# delphi - 在其他PNG上绘制PNG图像

> ID：10394151
> 
> 赞同：2
> 
> 时间：2012-05-01T06:00:44.300
> 
> 标签：delphi, merge, png, delphi-7, scanline

如何将两个PNG合并在一起？我知道你不能使用`PNGObject.Draw`，因为它不复制 alpha transaperncy（我不确定，但它无论如何都不起作用）所以需要自定义过程/函数。我不是*空手*而来，我有这个程序：

```
procedure MergePNGLayer(Layer1,Layer2: TPNGObject; Const aLeft,aTop:Integer);
var
  x, y: Integer;
  SL1,  SL2,  SLBlended : pRGBLine;
  aSL1, aSL2, aSLBlended: PByteArray;
  blendCoeff: single;
  blendedPNG, Lay2buff: TPNGObject;
begin
  blendedPNG:=TPNGObject.Create;
  blendedPNG.Assign(Layer1);
  Lay2buff:=TPNGObject.Create;
  Lay2buff.Assign(Layer2);
  SetPNGCanvasSize(Layer2,Layer1.Width,Layer1.Height,aLeft,aTop);
  for y := 0 to Layer1.Height-1 do
  begin
    SL1 := Layer1.Scanline[y];
    SL2 := Layer2.Scanline[y];
    aSL1 := Layer1.AlphaScanline[y];
    aSL2 := Layer2.AlphaScanline[y];
    SLBlended := blendedPNG.Scanline[y];
    aSLBlended := blendedPNG.AlphaScanline[y];
    for x := 0 to Layer1.Width-1 do
    begin
      blendCoeff:=aSL1[x] * 100/255/100;
      aSLBlended[x] := round(aSL2[x] + (aSL1[x]-aSL2[x]) * blendCoeff);
      SLBlended[x].rgbtRed   := round(SL2[x].rgbtRed + (SL1[x].rgbtRed-SL2[x].rgbtRed) * blendCoeff);
      SLBlended[x].rgbtGreen := round(SL2[x].rgbtGreen + (SL1[x].rgbtGreen-SL2[x].rgbtGreen) * blendCoeff);
      SLBlended[x].rgbtBlue  := round(SL2[x].rgbtBlue + (SL1[x].rgbtBlue-SL2[x].rgbtBlue) * blendCoeff);
    end;
  end;
Layer1.Assign(blendedPNG);
Layer2.Assign(Lay2buff);
blendedPNG.Free;
Lay2buff.Free;
end; 
```

但可悲的是，它没有按应有的方式工作，它完成了工作，但不正确。当它将空图像与加载的图像合并时，它可以正常工作，但是当两个图像都不为空时，它会使它们失去透明度。

```
procedure TForm1.FormClick(Sender: TObject);
var
PNG1, PNG2, PNG3, Dest: TPNGObject;
begin
PNG1 := TPNGObject.Create;
PNG2 := TPNGObject.Create;
PNG3 := TPNGObject.Create;

PNG1.LoadFromFile('Aero\TopLeft.png');//Width 10
PNG2.LoadFromFile('Aero\Top.png');//Width 200
PNG3.LoadFromFile('Aero\TopRight.png');//Width 10

Dest := TPNGObject.CreateBlank(COLOR_RGBALPHA, 16, 220, 10);
MergePNGLayer(Dest, PNG1, 0, 0);
MergePNGLayer(Dest, PNG2, 10, 0);
MergePNGLayer(Dest, PNG3, 210, 0);
Dest.SaveToFile('C:\OUT.PNG');
end; 
```

想要的结果：

![在此处输入图像描述](../Images/c726d5c6a3ea97216635bdacbdbe40f6.png)

实际结果：

![在此处输入图像描述](../Images/7c6762034840f4f28491bf42be767d73.png)

我不确定您是否可以看到这些图像之间的差异，但是您应该在 PNG 编辑器软件中打开它们，您会看到差异。所以我需要其他程序来合并 PNG。顺便说一句，我正在使用最新版本的`PNGImage`。

谢谢，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:31:06.580

这似乎工作得很好：

```
procedure DrawPngWithAlpha(Src, Dest: TPNGObject; const R: TRect);
var
  X, Y: Integer;
  Alpha: PByte;
begin
  Src.Draw(Dest.Canvas, R);

  // I have no idea why standard implementation of TPNGObject.Draw doesn't apply transparency.
  for Y := R.Top to R.Bottom - 1 do
    for X := R.Left to R.Right - 1 do
    begin
      Alpha := @Dest.AlphaScanline[Y]^[X];
      Alpha^ := Min(255, Alpha^ + Src.AlphaScanline[Y - R.Top]^[X - R.Left]);
    end;
end; 
```

# iphone - 如何在 iOS 上的动画后丢弃图像位置

> ID：10394154
> 
> 赞同：1
> 
> 时间：2012-05-01T06:01:19.677
> 
> 标签：iphone, ios, ipad

我正在使用下面的代码进行缩放和翻译动画。这会将图像从左下角移动到屏幕中心。下次我做动画时，我想从左下角重新开始。但是动画没有开始。我需要什么来重新启动动画？

```
// Setup the animation
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];

// The transform matrix
CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);    
CGAffineTransform scale = CGAffineTransformMakeScale(2.0,2.0);
CGAffineTransform scale_transform = CGAffineTransformConcat(transform,scale);

image.transform = scale_transform;
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:50:16.693

我发现。这就是解决它的方法。

```
image.transform = CGAffineTransformIdentity 
```

# javascript - 使用 jquery load() 时 setTimeout 重叠

> ID：10394155
> 
> 赞同：0
> 
> 时间：2012-05-01T06:01:21.583
> 
> 标签：javascript, jquery, timeout

我有一组用作幻灯片的页面，其中不同的元素被定时显示为录制的画外音阅读文本。

当我使用 load() 用下一张“幻灯片”刷新该区域时，我遇到了麻烦。我正在使用 setTimeout 来控制显示。我的问题是第二页使用的是第一页中的 setTimeout 时间。我需要清除超时吗？

第 1 页脚本：

```
var actions = [
  { time : 4, action : function() { $('#slidePhoto').animate({width: $('#slidePhoto img').width() / 1.5}, 2000 ).addClass('side-photo') } },
  { time : 8, action : function() { $('#slideEl2').fadeIn('slow') } },
  { time : 17, action : function() { $('#slideEl3').fadeIn('slow') } },
  { time : 24, action : function() { $('#slide-container').hide('slide', { direction: "left"}, 1000, function () {
      $('#slide-container').load('introduction2.php', function() {
        $('#slide-container').fadeIn('slow');
      });
    } ) } }
];
$(document).ready(function() {
  for( var i in actions ) {
    setTimeout( actions[i].action, actions[i].time * 1000 );
  }
}); 
```

第 2 页脚本：

```
var actions = [
  { time : 10, action : function() { $('#slidePhoto').animate({width: $('#slidePhoto img').width() / 1.5}, 2000 ).addClass('side-photo') } },
  { time : 16, action : function() { $('#slideEl2').fadeIn('slow') } },
  { time : 29, action : function() { $('#slideEl3').fadeIn('slow') } },
  { time : 40, action : function() { $('#slide-container').hide('slide', { direction: "left"}, 1000, function () {
      $('#slide-container').load('introduction3.php', function() {
        $('#slide-container').fadeIn('slow');
      });
    } ) } }
];
$(document).ready(function() {
  for( var i in actions ) {
    setTimeout( actions[i].action, actions[i].time * 1000 );
  }
}); 
```

页面加载在主容器页面上的区域内。我相信我可以通过在每个页面上使用不同的 ID 来解决这个问题，但我猜有一些更容易的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:04:32.333

您需要注册用作 clearTimeout 函数参数的计时器 ID。

例如在创建超时时：

```
for( var i=0; i<actions.length; i++ ) {
    actions[i].timeout = setTimeout( actions[i].action, actions[i].time * 1000 );
} 
```

然后清除它们：

```
for( var i=0; i<actions.length; i++ ) {
    clearTimeout(actions[i].timeout);
} 
```

（我用动作长度的标准迭代替换了你的“for var i in”，这是数组的最佳实践）

# php - 如何将多维数组中的列转换为逗号分隔的字符串？

> ID：10394164
> 
> 赞同：2
> 
> 时间：2012-05-01T06:03:12.657
> 
> 标签：php, csv, multidimensional-array, implode

是否可以像这样爆炸数组。

```
$arr=array();
$arr[0]['id']='123';
$arr[0]['otherdatas']=
$arr[1]['id']='234';
$arr[1]['otherdatas']=
$arr[2]['id']='567';
echo "string: ".explode($arr[]['id'],','); 
```

并以这个结束？

```
string: 123,234,567 
```

执行上述结果：

> 致命错误：无法使用 [] 读取第 8 行的 /data/www/test.php

如果不做类似的事情，我怎么能做到这一点？

```
function getIDs(){
    foreach($arr as $val){
        if($string){$string.=',';}
        $string.=$arr['id'];
    }
    return $string;
} 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T06:08:08.517

首先，您尝试的*`implode`*是字符串，而不是`explode`. 其次，不，没有表达*“将`id`所有子数组中的所有键连接在一起”*操作的语法快捷方式。你可以像这样非常简洁地做到这一点：

```
echo join(',', array_map(function ($i) { return $i['id']; }, $arr)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-05T00:40:57.920

从 PHP5.5 起，您可以调用[array_column()](http://php.net/manual/en/function.array-column.php)来隔离多维数组中的单列数据。

代码：（[演示](https://3v4l.org/rLCS7)）

```
$arr=array();
$arr[0]['id']='123';
$arr[0]['otherdatas']='';
$arr[1]['id']='234';
$arr[1]['otherdatas']='';
$arr[2]['id']='567';

echo implode(',',array_column($arr,'id')); 
```

输出：

```
123,234,567 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T06:15:10.697

不，这是不可能的。

```
function myExplode ($data=array(),$row='id',$delimiter=','){
  $result='';
  foreach ($data as $item) $result.=($data[$row])?$delimiter.$data[$row]:'';
  return $result;
} 
```

# php - 我无法在 sql 中默认工作

> ID：10394165
> 
> 赞同：0
> 
> 时间：2012-05-01T06:03:24.467
> 
> 标签：php, sql, default

我现在遇到 sql 问题；我给了一个默认值，所以如果用户提交时该字段为空，但它不起作用。当用户提交一个空字段以发表评论而不是默认为 anon 时，它什么也不做。此外，在数据库中，该字段为空。

```
name VARCHAR (50) default 'anon',

$name=   $_POST['name'];
$title=  sha1($_POST['title']);
$texts= $_POST['texts'];
$forum_id = $_POST['forum_id'];

$name = str_replace("'","''",$name);
$title = str_replace("'","''",$title);
$title = str_replace("b074acd521","STREAMER",$title);
$texts = str_replace("'","''",$texts);

$title = substr($title,0,8);

$sql = "INSERT INTO post (name,title, texts, forum_id) VALUES ('$name', '$title', '$texts', '$forum_id')";
mysqli_query($conn1, $sql) or die('Error inserting to database.');
mysqli_close($conn1);

header('Location: requests.php'); 
```

有没有其他方法可以做到这一点，或者我只是做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:41:45.960

您使用的 SQL 查询不会从您的数据库中插入默认值，因为您指定了一个值`name`（即使该值是空字符串或 null）：

```
$sql = "INSERT INTO post (name,title, texts, forum_id) VALUES ('$name', '$title', '$texts', '$forum_id')"; 
```

相反，如果您希望将默认值插入到`name`字段中，则不得`name`在插入语句中指定列：

```
$sql = "INSERT INTO post (title, texts, forum_id) VALUES ('$title', '$texts', '$forum_id')"; 
```

在 SQL 查询中，您可以指定查询中将提供哪些字段的值，而表中的其余字段将包含默认值（如果是`AUTO_INCREMENT`，将使用下一个整数值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T06:46:37.507

在插入值时，您不应该在示例下方给出您设置默认值的列...请尝试这样...

```
create table er(id int,name char(10),gender char(2)default 'M') 
```

在这里，我将性别作为默认值，现在我插入值

```
 insert into er (id,name)values(1,'poda')

 select * from er 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:15:48.510

你在哪里给出了直接应用在 SQL 中的默认值？最终留在 DB 中的值正是您通过 SQL 方式传递给 DB 服务器的值，或者只是您定义了一个变量，如果它不接受来自用户的值，则使用默认值，请尝试调试它以确保值被正确处理。

# jquery - 当用户使用自定义弹出表单更改数据时如何重新加载数据 jqGrid

> ID：10394168
> 
> 赞同：1
> 
> 时间：2012-05-01T06:03:49.350
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

我是 jqgrid 的初学者。我编写此代码以加载 jqgrid 数据并创建一些图标按钮以显示自定义面板 pupup 以进行插入和更新。

```
 $(function () {
            $("#txtFullName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "AutoCompleteHandler.ashx",
                        dataType: "json",
                        data: {
                            term: request.term,
                            Person: 1
                        },
                        contentType: "application/json",
                        converters: {
                            "json json": function (msg) {
                                return msg.hasOwnProperty('d') ? msg.d : msg;
                            }
                        },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.Label,
                                    value: item.Value,
                                    id: item.Id
                                }
                            }));
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });
                },
                minLength: 1,
                change: function (event, ui) { $("#PersonId").val(ui.item.id); }

            });

            var grid = $('#list');
            grid.jqGrid({
                url: 'jQGridHandler.ashx',
                editurl: 'jQGridHandler.ashx',
                postData: { ActionPage: 'SecurityUser', Action: 'Fill' },
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",
                pgtext: "صفحه {0} از {1}",
                datatype: 'json',
                height: 490,
                colNames: ['کد کاربری', 'شماره پرسنلی', 'مدیر؟', 'نام کاربری ', 'رمز عبور', 'قفل؟', 'تاریخ ایجاد', ],
                colModel: [
                        { name: 'USER_ID', width: 100, sortable: true, hidden: true },
                        { name: 'PERSON_ID', width: 200, sortable: true },
                        { name: 'USER_TYPE', width: 100, sortable: true, editable: true, edittype: 'checkbox', editoptions: { value: "True:False" }, formatter: "checkbox", formatoptions: { disabled: false} },
                        { name: 'USER_NAME', width: 100, sortable: true },
                        { name: 'USER_PASSWORD', width: 100, sortable: true },
                        { name: 'USER_LOCK', width: 50, sortable: true, editable: true, edittype: 'checkbox', editoptions: { value: "True:False" }, formatter: "checkbox", formatoptions: { disabled: false} },
                        { name: 'CREATE_DATE', width: 30, sortable: true, hidden: true },

                        ],
                gridview: true,
                rowNum: 10,
                rowList: [10, 20, 30],
                pager: '#pager',
                sortname: 'USER_ID',
                viewrecords: true,
                sortorder: 'ASC',
                caption: 'درخواست ها......',
                rownumbers: true
            });
            grid.jqGrid('navGrid', '#pager', { add: false, edit: false, del: true }, {}, {},
                { url: "JQGridHandler.ashx?ActionPage=SecurityUser&Action=Delete", reloadAfterSubmit: false }, { multipleSearch: true, overlay: false, width: 460 })
                .navButtonAdd("#pager", {
                    caption: "",
                    buttonicon: "ui-icon-plus",
                    onClickButton: function () {
                        $("#PersonId").val('');
                        $("#chkAdmin").attr("checked", 'false');
                        $("#txtUserName").val('');
                        $("#txtPassword").val('');
                        $("#chkActive").attr("checked", 'false');
                        $("#hdnUserId").val('');

                        $("#btnUpdate").css("display", 'none');
                        $("#btnAdd").css("display", 'inline');
                        $("#POPUP1").dialog({ width: 730 });
                    },
                    position: "first"

                })
                .navButtonAdd("#pager", {
                    caption: "",
                    buttonicon: "ui-icon ui-icon-pencil",
                    onClickButton: function () {
                        $("#PersonId").val('');
                        $("#chkAdmin").attr("checked", 'false');
                        $("#txtUserName").val('');
                        $("#txtPassword").val('');
                        $("#chkActive").attr("checked", 'false');
                        $("#hdnUserId").val('');

                        var myGrid = grid;
                        var selRowId = myGrid.jqGrid('getGridParam', 'selrow');

                        $("#PersonId").val(myGrid.jqGrid('getCell', selRowId, 'PERSON_ID'));
                        $("#chkAdmin").attr("checked", myGrid.jqGrid('getCell', selRowId, 'USER_TYPE'));
                        $("#txtUserName").val(myGrid.jqGrid('getCell', selRowId, 'USER_NAME'));
                        $("#txtPassword").val(myGrid.jqGrid('getCell', selRowId, 'USER_PASSWORD'));
                        $("#chkActive").attr("checked", myGrid.jqGrid('getCell', selRowId, 'USER_LOCK'));
                        $("#btnAdd").css("display", 'none');
                        $("#btnUpdate").css("display", 'inline');
                        $("#hdnUserId").val(myGrid.jqGrid('getCell', selRowId, 'USER_ID'));

                        $("#POPUP").dialog({ width: 400 });

                    },
                    position: "first"

                });

            function add() {
                $.ajax({
                    url: 'JQGridHandler.ashx',
                    contentType: "application/json; charset=utf-8",
                    data: { PERSON_ID: $("#PersonId").val(), USER_TYPE: $("#chkAdmin").is(":checked"),
                        USER_NAME: $("#txtUserName").val(), USER_PASSWORD: $("#txtPassword").val(),
                        USER_LOCK: $("#chkActive").is(":checked"), ActionPage: 'SecurityUser', Action: 'Insert'
                    },
                    dataType: "json",
                    success: function (data) {
                        $("#list").trigger("reloadGrid", [{ current: true}]);    ??????
                    }

                });
            }
            function update() {

                $.ajax({
                    url: 'JQGridHandler.ashx',
                    contentType: "application/json; charset=utf-8",
                    data: { USER_ID: $("#hdnUserId").val(), PERSON_ID: $("#PersonId").val(), USER_TYPE: $("#chkAdmin").is(":checked"),
                        USER_NAME: $("#txtUserName").val(), USER_PASSWORD: $("#txtPassword").val(),
                        USER_LOCK: $("#chkActive").is(":checked"), ActionPage: 'SecurityUser', Action: 'Update'
                    },
                    dataType: "json",
                    success: function (data) { }

                });
            }
            $("#btnAdd").click(function () {
                add();

             //$("#list").jqGrid("reloadGrid");

            });
            $("#btnUpdate").click(function () {
                update();
            });
        }); 
```

和 html 表单用于创建 jqGrid 和弹出面板

```
 <div>
        <table id="list">
        </table>
        <div id="pager">
        </div>

        <div id="POPUP" dir="rtl">
            <table width="100%" class="tbl">
                <tr>
                    <td>
                       FullName
                    </td>
                    <td>
                        <input type="text" id="txtFullName" />
                    </td>
                </tr>
                <tr>
                    <td>
                        PersonId
                    </td>
                    <td>
                        <input type="text" id="PersonId" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="checkbox" id="chkAdmin" />IsAdmin?
                    </td>
                </tr>
                <tr>
                    <td>
                       UserName
                    </td>
                    <td>
                        <input type="text" id="txtUserName" />
                    </td>
                </tr>
                <tr>
                    <td>
                       Password
                    </td>
                    <td>
                        <input type="password" id="txtPassword" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input type="checkbox" id="chkActive" checked="checked" />IsActive
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <input id="btnAdd" type="button" value="Add" />&nbsp;&nbsp;
                        <input id="btnUpdate" type="button" value="Edit" />&nbsp;
                        <br />
                        <input id="hdnUserId" type="hidden" />
                    </td>
                </tr>
            </table>
        </div>
    </div> 
```

我想当用户单击 btnAdd 并在数据库中记录插入时 jqGrid 数据重新加载（我想刷新 jqGrid 数据）。但我得到 2 个错误

```
 Error: no element found
    Source File: http://localhost:1041/Clerance_New/JQGridHandler.ashx?PERSON_ID=1001&USER_TYPE=false&USER_NAME=tttt&USER_PASSWORD=tttt&USER_LOCK=true&ActionPage=SecurityUser&Action=Insert
    Line: 1

and
Error: uncaught exception: jqGrid - No such method: reloadGrid 
```

并重新加载?????? 行不在处理程序中运行服务器端代码，我不知道为什么。

请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T20:17:50.690

我不知道你为什么写了相对复杂的代码而不是使用标准的表单编辑，但应该可以肯定一些重要的原因。

编码

```
$("#list"). $("#list").jqGrid("reloadGrid"); 
```

绝对是错误的。您出于某种原因评论的正确代码

```
$("#list").trigger("reloadGrid", [{current: true}]); 
```

此外，将调用放在`success`相应`$.ajax`请求的回调内部`add`或`update`您使用的函数内部也很重要。

**更新**：我现在看到您使用了`loadonce: true`选项。这意味着数据将从**服务器加载一次**。第一次加载后，值`datatype`将更改为`'local'`。网格的下一次重新加载将在本地完成。如果您需要再次*从服务器*重新加载数据，则必须将其重置`datatype`为初始值（在您的情况下为“json”），然后才重新加载网格。有关详细信息，请参阅[答案](https://stackoverflow.com/a/5398136/315935)。

# javascript - 停止页面刷新 - 不使用清除功能

> ID：10394172
> 
> 赞同：0
> 
> 时间：2012-05-01T06:04:15.820
> 
> 标签：javascript

这是在加载图像时显示微调器的代码，然后在完成时显示图像。另外，该页面需要每5秒自动刷新一次，并且刷新到11秒停止，即总共刷新两次。但这不起作用。微调器代码位于 css 文件中。这不起作用 - 一遍又一遍地刷新 - 超时被重置，尝试使用 var 分配也没有快乐。任何帮助高度赞赏。

```
<META HTTP-EQUIV="Cache-Control" CONTENT="max-age=0">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META http-equiv="expires" content="0">
<META HTTP-EQUIV="Expires" CONTENT="Tue, 01 Jan 1980 1:00:00 GMT">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<html>
<head>
<link rel="stylesheet" href="/css/graph.css" type="text/css" media="screen, projection">
<script src="/javascript/jquery-latest.js" type="text/javascript">
</script>
<script type="text/javascript">
    var img = new Image(); img.height=600; img.width=2000;
    $(img).load(function () {
    $(this).css('display','none');
    $(this).animate({ opacity: 0.25 }).fadeIn("slow");
    $('#loader').append(this);
    $(this).animate({ opacity: 1 })
    }).error(function () {
    }).attr('src', 'xyz.png');
    var timer = function() { window.location.reload(true);};
        window["reload_timer"] = setTimeout(timer, 5000);
    var timer2 = function() {     
        clearTimeout(window["reload_timer"]);
        clearTimeout(window["reload_timer2"]);};
        window["reload_timer2"] = setTimeout(timer2, 11000);
</script>
</head>
<body id = "page"><div id="loader" class="loading">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:10:03.793

您可以尝试重新加载带有附加参数的页面 URL。然后您可以使用 JavaScript 读取参数并使用它来了解页面刷新了多少次，以便您在 2 次刷新后停止。

否则页面是无状态的 - 将加载与以前相同的页面，不知道它是否已经加载。通过引入此 URL 参数，您可以跟踪某种状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:13:17.160

当您重新加载页面时，页面会忘记它已经被重新加载，所以实际上您的代码永远不会到达 timer2

# javascript - 通过节点将流式视频发送到服务器

> ID：10394176
> 
> 赞同：1
> 
> 时间：2012-05-01T06:04:46.887
> 
> 标签：javascript, http, node.js, video-streaming

我正在做一个小型个人项目（学习节点），我想知道将视频数据块从客户端发送到服务器的最佳方式是什么？显然，我不想使用 Node 的 http 模块，但我从来没有使用过 http 以外的任何东西。我知道有一个网络模块——这更好吗？

# objective-c - 如何在 Objective C 中获取 gamecenter 应用好友？

> ID：10394192
> 
> 赞同：-2
> 
> 时间：2012-05-01T06:07:00.613
> 
> 标签：objective-c, ios, game-center

如何获取在 iphone 中玩我游戏的 gamecenter 好友列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:17:40.470

使用[`-[GKLocalPlayer loadFriendsWithCompletionHandler:]`](http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40009587). 例如（未经测试的代码）：

```
[[GKLocalPlayer localPlayer] loadFriendsWithCompletionHandler:
    ^(NSArray *friends, NSError *error)
    {
        if (error)
        {
            // Handle error
        }
        else
        {
            // friends is an array of player identifiers of the user's friends
            // Now would be a good time to copy or retain it.
        }
    } ]; 
```

# c# - 如何在代码中找到必须用单元测试覆盖的地方

> ID：10394199
> 
> 赞同：3
> 
> 时间：2012-05-01T06:07:39.333
> 
> 标签：c#, unit-testing, tdd, rhino-mocks, .net

我知道在您实际编写代码之后编写测试并不是那么好。我是单元测试新手，觉得单元测试可以带来很多好处，所以我痴迷于尽可能多地覆盖的想法。

例如，让我们有这样的代码：

```
public class ProjectsPresenter : IProjectsViewObserver
{
    private readonly IProjectsView _view;
    private readonly IProjectsRepository _repository;

    public ProjectsPresenter(IProjectsRepository repository, IProjectsView view)
    {
        _view = view;
        _repository = repository;
        Start();
    }

    public void Start()
    {
        _view.projects = _repository.FetchAll();
        _view.AttachPresenter(this);
    }

} 
```

所以看看上面的代码，你能回答我通常应该在上面的那段代码上写什么测试吗？

我正在对构造函数进行写入测试，以确保调用了存储库的 FetchAll 并在视图站点上调用了 AttachPresenter。

* * *

**后编辑**

这是我的视图界面：

```
public interface IProjectsView
{
    List<Project> projects { set; }
    Project project { set; }

    void AttachPresenter(IProjectsViewObserver projectsPresenter);
} 
```

这是一个视图：

```
public partial class ProjectsForm : DockContent, IProjectsView
{
    private IProjectsViewObserver _presenter;
    public ProjectsForm()
    {
        InitializeComponent();
    }

    public Project project
    {
        set
        {
            listBoxProjects.SelectedItem = value;
        }
    }

    public List<Project> projects
    {
        set
        {
            listBoxProjects.Items.Clear();   
            if ((value != null) && (value.Count() > 0))
                listBoxProjects.Items.AddRange(value.ToArray());
        }
    }

    public void AttachPresenter(IProjectsViewObserver projectsPresenter)
    {
        if (projectsPresenter == null)
            throw new ArgumentNullException("projectsPresenter");

        _presenter = projectsPresenter;
    }

    private void listBoxProjects_SelectedValueChanged(object sender, EventArgs e)
    {
        if (_presenter != null)
            _presenter.SelectedProjectChanged((Project)listBoxProjects.SelectedItem);
    }
} 
```

* * *

**编辑后 #2**

这就是我测试与存储库交互的方式。一切都顺利吗？

```
 [Test]
    public void ProjectsPresenter_RegularProjectsProcessing_ViewProjectsAreSetCorrectly()
    {
        // Arrange
        MockRepository mocks = new MockRepository();
        var view = mocks.StrictMock<IProjectsView>();
        var repository = mocks.StrictMock<IProjectsRepository>();
        List<Project> projList = new List<Project> {
            new Project { ID = 1, Name = "test1", CreateTimestamp = DateTime.Now },
            new Project { ID = 2, Name = "test2", CreateTimestamp = DateTime.Now }
        };
        Expect.Call(repository.FetchAll()).Return(projList);
        Expect.Call(view.projects = projList);
        Expect.Call(delegate { view.AttachPresenter(null); }).IgnoreArguments();
        mocks.ReplayAll();
        // Act
        ProjectsPresenter presenter = new ProjectsPresenter(repository, view);
        // Assert
        mocks.VerifyAll();            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:36:13.397

> 我知道在你真正写完代码之后再写测试不太好

总比不写测试要好。

您的方法适用于两个外部组件，并且应该验证交互（除了提到的参数验证）。检查是否`FetchAll`被调用**没有给你任何价值**（或检查它返回*一些东西*- 这属于`ProjectsRepository`测试本身） - 你想检查视图的项目是否已设置（这将间接检查是否`FetchAll`被调用）。您需要的测试是：

*   验证视图项目是否设置为预期值
*   验证演示者是否已连接
*   验证输入参数

**编辑**：您将如何测试第一个案例的示例（项目已设置）

```
// "RegularProcessing" in test name feels a bit forced;
// in such cases, you can simply skip 'conditions' part of test name
public void ProjectsPresenter_SetsViewProjectsCorrectly()
{
    var view = MockRepository.GenerateMock<IProjectView>();
    var repository = MockRepository.GenerateMock<IProjectsRepository>();
    // Don't even need content;
    // reference comparison will be enough
    List<Project> projects = new List<Project>();
    // We use repository in stub mode;
    // it will simply provide data and that's all
    repository.Stub(r => r.FetchAll()).Return(projects);
    view.Expect(v => v.projects = projects);

    ProjectsPresenter presenter = new ProjectsPresenter(repository, view);

    view.VerifyAllExpecations();
} 
```

在第二种情况下，您将对`AttachPresenter`使用有效对象调用它的视图设置期望：

```
public void ProjectsPresenter_AttachesPresenterToView()
{
    // Arrange
    var view = MockRepository.GenerateMock<IProjectView>();
    view.Expect(v => v.AttachPresenter(Arg<IProjectsViewObserver>.Is.Anything));
    var repository = MockRepository.GenerateMock<IProjectsRepository>();

    // Act
    var presenter = new ProjectsPresenter(repository, view);

    // Assert
    view.VerifyAllExpectations();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:14:45.000

我会在 start 添加简单的测试，例如：

*   `null`参考检查

*   `FetchAll()`返回任何值

不要在第一次添加大量测试代码，而是在您的开发代码发生变化后对其进行改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:19:22.373

我会添加异常测试，例如 ArgumentException、极端情况和 FetchAll() 的常见情况。

PS。开始必须是公开的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:44:39.400

Pex 是一个有趣的工具，值得一试。它可以生成具有高代码覆盖率的单元测试套件：[http](http://research.microsoft.com/en-us/projects/pex/) ://research.microsoft.com/en-us/projects/pex/ 。它不会取代你自己对代码的了解——以及哪些测试场景对你来说比其他人更重要——但它是一个很好的补充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T20:55:59.413

在编写生产代码之前编写测试的目的首先是让您（开发人员）进入“我如何知道我的代码何时工作？”的思维模式。当您的开发专注于工作代码的结果而不是代码本身时，您将专注于您的代码获得的实际业务价值，而不是无关紧要的问题（已经花费了数百万工时来构建和维护用户从未要求、想要或需要）。当你这样做时，你正在做“测试驱动开发”。

如果你在做纯 TDD，答案是 100% 的代码覆盖率。也就是说，您不会编写一行单元测试代码尚未涵盖的单行生产代码。

In Visual Studio if you go to Test->Analyze Code Coverage it will show you all of the lines of code that you do not have covered.

Practically speaking its not always feasible to enforce 100% code coverage. Also there are some lines of code that are much more important then others. Determining which depends once again on the business value provided by each line and the consequence of that line failing. Some lines (like logging) may have a smaller consequence then others.

# tinymce - 如何在 TinyMCE for Plone中替换为

> ID：10394205
> 
> 赞同：3
> 
> 时间：2012-05-01T06:08:49.320
> 
> 标签：tinymce, plone

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:17:11.280

我从来没有测试过这个改变，但是你可以试试你在修补“tiny_mce_init.js”时学到的东西。

为此，我建议使用 z3c.jbot（另请参阅[http://blog.keul.it/2011/06/z3cjbot-magical-with-your-skins.html](http://blog.keul.it/2011/06/z3cjbot-magical-with-your-skins.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:10:52.390

您可以使用 tinymce 配置执行此操作：

```
tinyMCE.init({
    ...
    extended_valid_elements : "strong/b",
    ....
    // Override internal formats  
    formats: {
    bold : {inline : 'strong' }
    },
    ...
}); 
```

如果您已经使用 b-tags 将编辑器内容保存在数据库中，则可能需要将服务器端的这些标签替换为 strong-tags。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:01:30.710

keul和[Thariama](https://stackoverflow.com/users/681548/keul)[的](https://stackoverflow.com/users/346063/thariama)答案都是正确的。为了让 TinyMCE 在 Plone 中工作，我必须结合这两个答案。

这是我的做法， - 使用 z3c.jbot 修补/覆盖名称为“Products.TinyMCE.skins.tinymce.tiny_mce_init.js”的“tiny_mce_init.js”。

```
function TinyMCEConfig(id) {
  ...
  this.init = function() {
    ...
    var init_dict = {
      ...
      fix_list_elements : false,

      extended_valid_elements : "strong/b",
      // Override internal formats  
      formats: {
        bold : {inline : 'strong' }
      }
    };
    ...
  };    
  ...      
} 
```

# node.js - 如何向父进程发送消息

> ID：10394206
> 
> 赞同：19
> 
> 时间：2012-05-01T06:08:59.233
> 
> 标签：node.js

我可以向父进程发送消息吗？

掌握

```
var child =child_process.fork();

child.send({msg:msg}) 
```

子进程

```
process.on('message', function(){

});

// how to send message to parent?? 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T06:41:24.780

简而言之：`process.send()`

更长的例子，我前一段时间写了命名`forktest.js`：

```
var cp = require('child_process');

if (!process.send) {
  var p = cp.fork(__dirname + '/forktest');
  p.send({
    count: 10
  });
  p.on('message', function(data) {
    process.exit(0);
  });
} else {
  process.on('message', function(data) {
    console.log(data);
    data.count--;
    if (data.count === 0) {
      process.send({});
      process.exit(0);
    }
    var p = cp.fork(__dirname + '/forktest');
    p.send(data);
    p.on('message', function(data) {
      process.send(data);
      process.exit(0);
    });
  });
} 
```

# php - sql代码不显示表数据

> ID：10394209
> 
> 赞同：1
> 
> 时间：2012-05-01T06:09:24.983
> 
> 标签：php, mysql, sql, database

您好，我想了解为什么这在我的页面上不起作用。我正在使用下面的 php 块来使用我在页面开头创建的变量 $sel_subj （我使用 $_GET 来获取我在上一页上单击的内容的 id。我希望新页面反映我点击的链接）我得到了 url 以显示数据库中的正确数字，但我无法让我的页面显示按下的链接的名称；又名“主题”表中标记为“主题名称”的列中的数据。

```
<?php
$query = "SELECT * FROM subjects WHERE id = \"$sel_subj\"";
$result_set = mysql_query($query, $connection);
if(!$result_set) {
    die("Database query failed: " . mysql_error());
$subject = mysql_fetch_array($result_set);
return $subject;
?> 
```

进入这个h2标签就在这里。

```
<h2><?php echo $subject['subject_name']; ?>Hello</h2> 
```

如果有帮助，我可以发布整个页面。我感谢大家的意见。
谢谢你。

编辑：新问题

这是我的代码的下半部分。我在此代码上方有一个导航 div，它将与数据库表相关的页面的链接与我想从数据库中提取并显示在页面表的 div 中的内容分开。

但是，使用我提供的代码，当我在 Firefox 中打开它时，页面上没有显示任何内容。在我的 html 中，当我在测试服务器上预览时“查看源代码”时，下面没有任何内容......

```
<td id="page">

<?php
$query = "SELECT * FROM subjects WHERE id ='$sel_subj'";
$result_set = mysql_query($query, $connection);
if(!$result_set) 
    die("Database query failed: " . mysql_error());
$subject = mysql_fetch_assoc($result_set);
return $subject;

?>
            <h2><?php echo $subject['subject_name']; ?>Hello</h2>
            <br />
            <?php echo $sel_page; ?><br />
            <?php echo $sel_subj; ?><br />
            <?php echo $subject; ?><br />
            <?php echo $subject['id']; ?>
        </td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:16:19.713

改变这个：

`$query = "SELECT * FROM subjects WHERE id = \"$sel_subj\"";`

对此：

`$query = "SELECT * FROM subjects WHERE id = '$sel_subj'";`

和这个：

`$subject = mysql_fetch_array($result_set);`

对此：

`$subject = mysql_fetch_assoc($result_set);`

PS：尽量不要再使用`mysql`类函数，它们不太好。而是使用`mysqli`或 PDO。

**编辑**

如果列`id`是数字类型，请从查询中删除撇号。像这样：

`$query = "SELECT * FROM subjects WHERE id = $sel_subj";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:12:36.620

尝试这个

```
$query = "SELECT * FROM subjects WHERE id = '$sel_subj' "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T06:19:23.757

尝试这个

```
$query = "SELECT * FROM subjects WHERE id = {$sel_subj} "; 
```

# android - 如何在android中构建应用程序（apk文件）

> ID：10394211
> 
> 赞同：-3
> 
> 时间：2012-05-01T06:09:30.407
> 
> 标签：android

嗨，我是 android 新手，我的客户想在他们的 Android 设备上运行该应用程序，我通过 Stack Overflow 浏览了许多答案，如下所示：-

[如何制作.apk文件](https://stackoverflow.com/questions/7184132/how-to-make-apk-file)

[如何在 Eclipse 中构建 APK 文件？](https://stackoverflow.com/questions/4600891/how-to-build-apk-file)

但我无法进行构建。我想构建一个通常是 .apk 扩展名的应用程序，以及如何在我的客户端 android 设备中安装这个 .apk 文件，它没有任何 Eclipse 或 IDE。

请建议我在不使用 eclipse 或任何 IDE 的情况下在客户端 android 设备中构建和安装应用程序的方式或一些链接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:14:13.677

Eclipse 自己创建项目的 .apk 文件并将其保存在 bin 文件夹中，复制该 apk 文件并将其发送给客户端并告诉他将 apk 保存在 SD 卡上并直接从 SD 卡运行。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:19:22.790

当您在模拟器或设备上运行应用程序时，会创建 .apk 文件并将其放入 /%YOUR PROJECT%/bin/app.apk

你可以发给你的客户...

# emacs - Emacs 重新打开之前被杀死的缓冲区？

> ID：10394213
> 
> 赞同：13
> 
> 时间：2012-05-01T06:09:36.783
> 
> 标签：emacs

有什么插件可以重新打开最后一个被杀死的缓冲区/文件吗？就像 CSt 在 Firefox 中所做的一样。

我知道，recentf-mode 可以记住最近访问过的文件历史。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T08:39:15.203

```
(require 'cl)
(require 'recentf)

(defun find-last-killed-file ()
  (interactive)
  (let ((active-files (loop for buf in (buffer-list)
                            when (buffer-file-name buf) collect it)))
    (loop for file in recentf-list
          unless (member file active-files) return (find-file file))))

(define-key global-map (kbd "C-S-t") 'find-last-killed-file) 
```

# mysql - mysql 1050 后跟 1051

> ID：10394214
> 
> 赞同：1
> 
> 时间：2012-05-01T06:09:44.050
> 
> 标签：mysql, mysql-error-1050, mysql-error-1051

请帮我解决这个问题。我已经尝试过删除和重新创建数据文件、刷新表、重新启动数据库和整个服务器。

InnoDB 处于强制恢复状态 = 4

```
>mysql -u root
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.5.16 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use wotstats_info_gold;
Database changed
mysql> show tables;
Empty set (0.00 sec)

mysql> create table player_team_role ( id int(11) ) ;
ERROR 1050 (42S01): Table '`wotstats_info_gold`.`player_team_role`' already exists
mysql> drop table player_team_role;
ERROR 1051 (42S02): Unknown table 'player_team_role'
mysql> flush tables;
Query OK, 0 rows affected (0.00 sec)

mysql> create table player_team_role ( id int(11) ) ;
ERROR 1050 (42S01): Table '`wotstats_info_gold`.`player_team_role`' already exists
mysql> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:21:57.997

有时这种情况发生在 sql-mode PAD_CHAR_TO_FULL_LENGTH

# php - 用于在文本中查找图像的 php 正则表达式

> ID：10394215
> 
> 赞同：2
> 
> 时间：2012-05-01T06:09:49.113
> 
> 标签：php, regex, preg-match-all

我不知道 php regex 我希望从`<img src="www.google.com/exampleimag.jpg">`我的 html 中提取所有图像标签我如何使用 preg_match_all 来做到这一点

感谢 SO 社区为您提供宝贵的时间

好吧，我的情况是这样的，没有整个 html dom，而只是一个带有 img 标签的变量 `$text="this is a new text <img="sfdsfdimg/pfdg.fgh" > there is another iamh <img src="sfdsfdfsd.png"> hjkdhfsdfsfsdfsd kjdshfsd dummy text`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T06:13:08.487

不要使用正则表达式来解析 HTML。相反，[`DOMDocument`](http://www.php.net/domdocument)出于这个原因，请使用类似的东西：

```
$html = 'Sample text. Image: <img src="foo.jpg" />. <img src="bar.png" />';
$doc = new DOMDocument();
$doc->loadHTML( $html );

$images = $doc->getElementsByTagName("img");

for ( $i = 0; $i < $images->length; $i++ ) {
  // Outputs: foo.jpg bar.png
  echo $images->item( $i )->attributes->getNamedItem( 'src' )->nodeValue;
} 
```

如果您愿意，还可以获取图像 HTML 本身：

```
// <img src="foo.jpg" />
echo $doc->saveHTML ( $images->item(0) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:13:30.660

[您无法使用 regex 解析 HTML](https://stackoverflow.com/a/1732454/477127)。你最好使用 DOM 类。它们使从有效的 HTML 树中提取图像变得非常容易。

```
$doc = new DOMDocument ();
$doc -> loadHTML ($html);
$images = $doc -> getElementsByTagName ('img'); // This will generate a collection of DOMElement objects that contain the image tags 
```

# iphone - 加载前显示视图？加载时运行指示器？

> ID：10394216
> 
> 赞同：2
> 
> 时间：2012-05-01T06:09:57.850
> 
> 标签：iphone, progress-bar

我做了第二个xib，然后从主要转到那个。问题是第二个视图有一堆数据要捕获和加载。当您单击按钮转到第二个视图时，在通过 nsxmlparser 加载所有数据之前，不会显示第二个视图。

我希望它立即转到第二个视图，然后在加载数据时在该页面（第二页）上显示一个活动指示器。如何在按钮单击时显示第二个 xib 文件，然后在那里加载数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:12:06.510

您应该看一下[MBProgressHUD](https://github.com/jdg/MBProgressHUD)，它创建了一个单独的线程，您可以在其中解析 XML，同时它显示一个进度条。它很容易实现，所以只需按照链接中的指南进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:00:26.430

听起来您最好的选择是将解析移到单独的线程中。一种方法是创建一个方法来运行/设置/加载/解析 xml 数据，然后调用`[self performSelectorInBackground:@selector(YourMethodGoesHere) withObject:nil]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:13:48.070

为每个 UIView 创建一个类，并将 xib 中的视图映射到子类。在您的第二个子类中实现 awakeFromNib 并在那里开始下载您的数据。完成后隐藏您的活动指示器（我假设这已经在您的 xib 中设置）。

# mysql - 更新查询中的语法错误

> ID：10394220
> 
> 赞同：1
> 
> 时间：2012-05-01T06:10:23.663
> 
> 标签：mysql

我正进入（状态

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 '' at line 1' 附近使用以下查询的错误

```
update Stops set trip_flag = true,
  route_type = (select route_type from Routes 
                where route_id = (select route_id from Trips 
                                  where trip_id = (select trip_id from  Stop_Times
                                                   where stop_id = (select stop_id from Stops where location_type = 0))); 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:17:43.200

最后缺少一个右括号 ) 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T06:47:21.873

正如[手册](http://dev.mysql.com/doc/refman/5.5/en/update.html)所说：

> 目前，您无法在子查询中更新表并从同一个表中进行选择。

您可以使用多表更新语法和自联接解决此问题：

```
UPDATE
       Stops
  JOIN Routes      ON Routes.route_type  = Stops.route_type
  JOIN Trips       ON Trips.route_id     = Routes.route_id
  JOIN Stop_Times  ON Stop_Times.trip_id = Trips.trip_id
  JOIN Stops AS s2 ON s2.stop_id         = Stop_Times.stop_id
SET
  Stops.trip_flag  = TRUE
WHERE
  s2.location_type = 0 
```

# python - 寻找一个可以让我折叠函数的 Python 编辑器

> ID：10394223
> 
> 赞同：2
> 
> 时间：2012-05-01T06:11:26.760
> 
> 标签：python

当我使用 Eclipse 进行 Java 编程时，我真的很喜欢这个功能，但是我找不到 Python 编辑器的相同功能。IDLE 和 Pyscripter 很好，但它们在这方面没有帮助。

基本上，我只想选择折叠或隐藏我暂时不想查看的功能。知道这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:15:54.490

除了前面提到的（优秀的）编辑器之外，您可能还想尝试一下[PyDev](http://pydev.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T06:13:21.443

[Geany](http://www.geany.org/)可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T06:13:01.970

[Notepad++](http://notepad-plus-plus.org/)有这个功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T09:17:50.267

[Komodo Edit IDE](http://www.activestate.com/komodo-edit)，*适用于 Windows、Mac 和 Linux*，*适用于 Python、PHP、Ruby、JavaScript、Perl 和 Web Dev*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T09:53:00.440

我过去使用过 Komodo Edit 和 Notepad++，但我目前的偏好是[Sublime Text Edit 2](http://www.sublimetext.com/2)。

虽然不是免费的（实际上相当昂贵），但它可以在免费模式下使用，只有偶尔提醒，没有其他限制。

它实际上是用 Python 编写的，因此您可以获得内置的 Python 控制台 - 您还可以获得其他控制台，例如 JavaScript。它非常灵活并具有一些非常好的功能。它还有一个优秀的社区，里面有很多非常有用的插件。

它在资源使用方面比 Komodo 轻得多，可以直接使用 Textmate 捆绑包（因此可以获得不同文件类型的大量格式化选项）。它是跨平台的，甚至不需要在 Windows 上安装。

# google-chrome-extension - 我的扩展程序可以从 Google Chrome 获取用户的电子邮件地址吗？

> ID：10394229
> 
> 赞同：1
> 
> 时间：2012-05-01T06:12:15.820
> 
> 标签：google-chrome-extension

我有一个扩展，一些用户为此付出了金钱或努力。我希望能够通过他们的电子邮件地址来识别这些用户，所以我可以显示“谢谢！” 下次他们加载扩展程序时。

有没有办法从谷歌浏览器获取用户的电子邮件地址？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T05:19:29.483

好的，解决了她。这个网站基本上是这样描述的：

[http://smus.com/oauth2-chrome-extensions/](http://smus.com/oauth2-chrome-extensions/)

但并不是所有的都在那里解释。所以：

首先，您需要一个 API 客户端 ID 和客户端密码，以便用户授权您使用他们的详细信息。以下步骤将以适用于 chrome 扩展的方式进行设置：

1.  谷歌 API 控制台
2.  创建 API
3.  转到 API 访问
4.  创建客户 ID
5.  给它一个名称和一个徽标，当用户被要求允许您的应用程序检索他们的详细信息时，将显示此名称和徽标。下一个
6.  选择网络应用程序
7.  单击更多以获取 URI 和授权的 javascript 来源
8.  将重定向 URI 设置为[http://www.google.com/robots.txt](http://www.google.com/robots.txt)
9.  删除 javascript origins 字段，以便没有
10.  单击“确定”或其他任何内容，将客户端 ID 和客户端密码复制出来以备后用。

其次，您需要 oauth2 javascript 库，可在此处获得： [https ://github.com/borismus/oauth2-extensions/tree/master/lib](https://github.com/borismus/oauth2-extensions/tree/master/lib)

您需要将其放在与您的 html 文件位于同一目录中的名为 oauth2 的文件夹中。

在您的 html 文件中添加以下内容：

```
<script type="text/javascript" src="oauth2/oauth2.js"></script>
<script type="text/javascript">
var googleAuth = new OAuth2('google', {
  client_id: ' $(YOUR CLIENT ID HERE) ',
  client_secret: ' $(YOUR CLIENT SECRET HERE) ',
  api_scope: 'https://www.googleapis.com/auth/userinfo.email'
});

googleAuth.authorize(function() {
  // We should now have googleAuth.getAccessToken() returning a valid token value for us 
  // Create an XMLHttpRequest to get the email address 
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() { 
    if( xhr.readyState == 4 ) {
      if( xhr.status == 200 ) { 
        var parseResult = JSON.parse(xhr.responseText);
        // The email address is located naw: 
        var email = parseResult["email"];
      }
    }
  }
  // Open it up as GET, POST didn't work for me for the userinfo 
  xhr.open("GET","https://www.googleapis.com/oauth2/v1/userinfo",true);
  // Set the content & autherization 
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.setRequestHeader('Authorization', "OAuth " + googleAuth.getAccessToken() );
  xhr.send(null);
  // Debugging stuff so we can see everything in the xhr.  Do not leave this in production code 
  console.log(xhr);
});</script> 
```

在您的 manifest.json 中，您需要：

“权限”：[“https://accounts.google.com/o/oauth2/token”、“https://www.googleapis.com/oauth2/v1/userinfo”]

同样在清单文件中，您将需要：

```
"content_scripts": [   {
    "matches": ["http://www.google.com/robots.txt*"],
    "js": ["oauth2/oauth2_inject.js"],
    "run_at": "document_start"   } 
```

那应该很照顾它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T00:59:30.617

我正在尝试自己做类似的事情。我正在尝试获取基于他们的谷歌帐户的 ID，以便我可以为用户存储一些云数据。我相信您可以通过相同的方法获取电子邮件地址，但他们必须批准权限。如果我成功了，我会发布代码。现在我正在尝试获取： [http ://smus.com/oauth2-chrome-extensions/](http://smus.com/oauth2-chrome-extensions/)

使用我自己的 google api 密钥和那个。

到目前为止没有太大的成功。花了最后两个小时实现了唯一具有良好文档的方法，它告诉我该功能已被贬值。毕竟可能不得不尝试让这个 oauth2 垃圾工作。

# python - 动态检查权限

> ID：10394243
> 
> 赞同：0
> 
> 时间：2012-05-01T06:14:25.853
> 
> 标签：python, django, permissions, authentication

```
class Task(models.Model):

    class Meta:
        permissions = (
            ("view_task", "Can see available tasks"),
            ("change_task_status", "Can change the status of tasks"),
            ("close_task", "Can remove a task by setting its status as closed"),
        )
user.has_perm('app.view_task') 
```

如果我有 contenttype.codename unknown(not hardcoded) 有什么方法可以检查权限，即它来自数据库动态如下

```
permission = Permission.objects.get(id=item.permission_id )
contenttype = ContentType.objects.get(id=permission.content_type_id)               
user.has_perm(appname.contenttype.codename) 
```

但它总是返回 false

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:39:43.860

尝试

```
user.has_perm(u'%s.%s' % (contenttype.app_label, permission.codename)) 
```

另外，使用

```
contenttype = ContentType.objects.get_for_model(Permission) 
```

# linux - 使用 perl 和串行设备检测 Linux 引导

> ID：10394247
> 
> 赞同：0
> 
> 时间：2012-05-01T06:14:54.050
> 
> 标签：linux, perl, automation, serial-port, boot

我正在编写一个启动 linux 映像并需要检测映像是否到达登录提示符的 perl 脚本。我正在使用 Device::serial 模块与开发板通信。我在检测登录字符串时遇到问题。我认为这可能与 linux 启动期间发生的大量打印有关。下面的代码尝试捕获提示。奇怪的是，它仅在我添加不必要的“读取”命令时才有效

```
# Wait for login prompt
$port->are_match("login:");
$gotit   = "";
$timeout = 60;
until (($gotit ne "") or ($timeout eq 0)) 
{
    $gotit = $port->lookfor;       # poll until data ready
    die "Aborted without match\n" unless (defined $gotit);
    $read = $port->read(1000000);
    $port->lookclear;
    sleep(1);
    $timeout--;
} 
```

“lookfor”对 linux 引导场景有好处吗？为什么“读取”使此代码有效？

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:57:52.783

[CPAN 文档页面](http://search.cpan.org/~cook/Device-SerialPort-1.04/SerialPort.pm#Lookfor_and_I/O_Processing)说要这样做：

```
 my $gotit = "";
  until ("" ne $gotit) {
      $gotit = $PortObj->lookfor;       # poll until data ready
      die "Aborted without match\n" unless (defined $gotit);
      sleep 1;                          # polling sample time
  } 
```

`$port->lookClear`在他们的循环中没有调用。我怀疑这会导致您的问题。还要小心那个超时。

# delphi - 建议报表设计者制作 4 象限页面进行打印？

> ID：10394250
> 
> 赞同：2
> 
> 时间：2012-05-01T06:15:09.903
> 
> 标签：delphi, reporting

我有一个项目需要在 Delphi XE2 中生成每页有 4 个元素的报告。例如，一页 (11 x 8.5) 横向需要四个象限

*   第一象限中的富文本项目符号
*   第二象限和第三象限中的条形图
*   最后象限中的饼图

今天，这些报告是用 Excel 和 Powerpoint 的组合生成的，这非常耗时，我想用 Delphi 应用程序自动化这个过程。

我有使用 Report Builder 和 Rave Reports 的经验，但我从来没有遇到过需要将页面分成四个区域的情况。它始终是传统的每页单图设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:32:24.250

使用 Fastreport，它有富文本和图表对象，可以制作你想要的布局。只需将 1 个富文本对象和 3 个图表对象放在页面上并填写代码即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:22:51.003

您可以将 fastReport 与 subReports 一起使用。您也可以激活 pages columns=2 我认为它可以做到这一点。

在 FastReport 中，您拥有所需的一切：

饼形图

条码

里奇分机

和组和主详细列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:20:21.227

一种解决方案是创建您的报告并将其导出为 pdf 或 jpeg，然后**使用其他工具生成 4 象限**。

查看（免费）**PosteRazor**应用程序。
[http://postrazor.sourceforge.net/](http://posterazor.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:33:12.593

您可以使用[我们的 mORMot 框架中提供](http://blog.synopse.info/post/2010/06/30/Making-report-from-code)的代码生成的报告。

每个页面都呈现在一个`TMetaFile`内容中。事实上，您可以使用 QuickReport 或其他能够将页面导出为元文件的报告。图表也是如此：您将图表保存为 EMF 内容，然后将其绘制在`TGDIPages`报告上。

然后很容易使用第二个报表实例每页绘制 4 页。

然后，您将拥有预览、打印或原生 pdf 导出功能。

# php - 增加内存限制的奇怪错误

> ID：10394254
> 
> 赞同：2
> 
> 时间：2012-05-01T06:15:19.177
> 
> 标签：php, php-5.3, concrete5

我使用的是共享主机环境，PHP 的默认内存限制为 32M。我在使用 Concrete5 设置时遇到了一些问题。

当我尝试登录 Concrete5 的管理面板时，它给出了 memory limit error `Allowed memory size of 33554432 bytes exhausted`。所以我将内存限制`ini_set('memory_limit', '128M')`增加到**128M**。在此之后，我收到一条错误消息：

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without 
sending any data. 
```

我尝试将内存限制降低到 96M、64M 和其他一些值，但同样的错误 (ERR_EMPTY_RESPONSE) 重复。

这是什么错误，为什么在我使用时会发生`ini_set()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:05:20.670

正如 Joachim Isaksson 所评论的，旧版本 (5.2.14) PHP 中存在一个缺陷，导致它终止。我升级了PHP版本，也将ulimit os调用设置的默认memory_limit增加到128M。这已经解决了错误。多谢你们... ：）

# allegro - Allegro 库安装

> ID：10394256
> 
> 赞同：0
> 
> 时间：2012-05-01T06:15:25.540
> 
> 标签：allegro

我使用的是 Dev C++ 编译器，但由于一些问题，该编译器无法在我的 PC 上正常运行，因此我无法使用我的 Dev C++ 编译器安装 Allegro 4.9 库。我现在使用 netbeans 编译器进行 c++ 编程，但无法在该编译器上安装 Allegro 库。

我不能使用 MSVS，因为它占用了大量的内存空间。

如果你能建议我任何可以安装 Allegro 库的编译器，或者在我的 netbeans 编译器上安装 Allegro 的过程，我很佩服。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:32:44.020

我建议使用 Code::Blocks 并使用[http://www.allegro.cc/files](http://www.allegro.cc/files)上提供的 Allegro 5.0 的预构建二进制文件 (MinGW) 。文档和[http://wiki.allegro.cc](http://wiki.allegro.cc)向您展示了如何安装和使用 Allegro。

# java - 如何从 JAVA Fx 2.0 的 Tableview 的行中获取数据

> ID：10394260
> 
> 赞同：4
> 
> 时间：2012-05-01T06:15:53.210
> 
> 标签：java, tableview, javafx-2

您好，我正在使用此代码获取数据

```
Set<Account> selection =new HashSet<Account>table.getSelectionModel().getSelectedItem(); 
```

但是我把它作为输出

```
passbookprintingdemo.AccountPage$Account@1eb5170 
```

谁能解释我如何获取数据而不是这个类名？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T06:25:36.237

```
table.getSelectionModel().getSelectedItem().YourGetterFunctionName and you will get your data :) 
```

# css - Wordpress BB 按 Css 问题

> ID：10394261
> 
> 赞同：0
> 
> 时间：2012-05-01T06:16:03.910
> 
> 标签：css, wordpress

你好我只有一个关于css的问题，我安装了论文主题并且按钮不对齐你可以在这里看到它[http://www.simplestepstowellness.com/forums/forum/dexters-forum-about-wordpress/](http://www.simplestepstowellness.com/forums/forum/dexters-forum-about-wordpress/)提交按钮和通知复选框未对齐我不知道在哪里编辑此类 css 或它位于哪个文件。请帮助，将不胜感激。

谢谢，上帝保佑，德克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:54:45.700

登录到 wordpress 'URL/wp-admin'，单击右侧面板下方的外观，然后单击编辑器，弹出的默认文件将是 CSS 文件，然后您必须找到特定元素并为其设置样式。

# django - 在 django form.init 数据中换行

> ID：10394271
> 
> 赞同：3
> 
> 时间：2012-05-01T06:17:36.890
> 
> 标签：django, django-forms, textarea

我有一个 Django 表单，如下所示。

```
class SampleForm(forms.Form):
    message = forms.CharField(widget=forms.Textarea()) 
```

当我创建一个表单对象时，我想用一个长段落初始化“消息”文本区域。但我需要在某些位置拆分文本。所以我尝试输入'\n'，然后输入'< br />'。两者似乎都不起作用！如何以 django 形式实现这一点？欢迎提出任何建议。

编辑：这是表单初始化代码：

```
 def sample_view(request):
     initial = {'message':'''Hello,\nThis is how my message \n look like. '''}
     form = SampleForm(initial=initial) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:23:42.567

'\n' 会在这里解决问题...

# java - 使用 Java 将文本动态添加到 JTextArea

> ID：10394275
> 
> 赞同：1
> 
> 时间：2012-05-01T06:17:48.140
> 
> 标签：java, swing

我正在尝试将文本添加/附加到`JTextArea`动态。我试着做：

```
for(int i=0;i<10;i++){
    jtextArea.append("i="+i);
    //some processing code***********
} 
```

实际上，循环`i`完成后所有值都附加到 jtextarea `for`。但是随着循环的进行，我想为`i`jtextAres 添加价值。`for`提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:24:35.717

我假设您在*Event Dispatch Thread*上执行此操作，并且您的处理代码将阻塞该线程。结果，`JTextArea`无法重新粉刷。

您需要获取 UI 线程的处理代码。通常的建议是使用 a ，但在这种情况下，使用常规和使用来安排EDT 上的呼叫`SwingWorker`可能更容易。`Thread``SwingUtilities.invokeLater``append`

注意：我建议`append`从 JDK1.7 开始调用 EDT，该方法的 javadoc 不再声明它是线程安全的（1.6 javadoc 仍然提到这一点）。但是看[这个问题](https://stackoverflow.com/questions/4869027/jtextarea-thread-safe)表明，即使在 1.6 中，在 EDT 上调用它也可能更安全。

[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)中的并发教程是关于这个主题的好读物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T06:26:19.450

我不确定我是否理解你的问题，但试试这个代码：

```
for(int i = 0; i < 10; i++)
{
    final int x = i;
    SwingUtilities.invokeAndWait(new Runnable()
    {
        @Override
        public void run()
        {
            jtextArea.append("i=" + x);
        }
    });

    //some processing code***********
} 
```

# html - IE9 背景图片 1 白色像素 :(

> ID：10394279
> 
> 赞同：3
> 
> 时间：2012-05-01T06:18:55.853
> 
> 标签：html, css, internet-explorer, internet-explorer-9, rounded-corners

这是我的网站

[http://www.forid.ir](http://www.forid.ir)

这不是英语，但我的问题只是关于搜索框（它有一个图标并且很明显）

关于搜索框中的曲线，如果您的浏览器不是 IE9，您可以看到一切正常。（包括IE8-）

但如果你使用 IE9，右上角有一个白色像素，我不知道是什么原因导致 ie 表现得像这样:(

在角落之间我有一个具有适当边框的输入我尝试了很多可能性但它不起作用最后一个选项是忘记曲线并为整个输入背景制作图像。

这是我用过的最糟糕的英语！！很抱歉，很难解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:58:20.677

该问题似乎与`direction: rtl`on 有关`body`。至少，当我关闭它时，问题就消失了。

如果没有更好的想法，您可以使用[有条件的注释](http://www.quirksmode.org/css/condcom.html)来修复它：

```
<!--[if IE 9]>
<style>
#sr_right {
    margin-left: -1px;
}
</style>
<![endif]--> 
```

# php - 是否有一种工具可以在执行 PHP 脚本时输出每一行？

> ID：10394281
> 
> 赞同：0
> 
> 时间：2012-05-01T06:19:10.367
> 
> 标签：php, debugging

我正在寻找一个函数或其他工具（但不是调试），它可以按照它们运行的​​顺序编写在 PHP 文件中运行/执行的所有行。有这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:24:40.373

不，但是 xDebug 允许您与合适的 IDE（例如 Netbeans 或 Eclipse）一起单步执行程序代码。

# php - 识别字符串中的第一个字符

> ID：10394282
> 
> 赞同：0
> 
> 时间：2012-05-01T06:19:17.513
> 
> 标签：php, string

您好，我需要帮助来识别字符串的第一个字符。如果字符串包含正斜杠“/”或 php 中没有正斜杠。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:59:57.103

试试这个代码：

```
<?php
function containSlash($str)
{
  return substr($str, 0, 1) == "/";
}

// TEST
echo (containSlash("/hello") ? "TRUE" : "FALSE"); // TRUE
echo (containSlash("hello") ? "TRUE" : "FALSE"); // FALSE
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:28:21.443

试试这个

```
function getSlashes($str)
    {
        return $str[0] ==  '/' || $str[0] ==  '\\';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:22:02.643

你在这里问两个不同的问题。

您可以使用检查字符串的第一个字符

```
$str[0] 
```

`/`您可以通过使用检查字符串是否包含 no

```
strpos($str, '/') === FALSE 
```

# c# - 除 Datatable 之外的最佳结构，可在前端存储约 50 万条记录

> ID：10394288
> 
> 赞同：0
> 
> 时间：2012-05-01T06:19:56.877
> 
> 标签：c#, .net, dictionary, datatable, binary

我有一个数据表，它从数据库（SQLite）中获取约 5,50,000 条记录。获取时会减慢系统速度。

我将这些记录存储在 SQLite 数据库的后端和 Datatable 的前端。现在我应该怎么做才能减少后端的数据库创建时间（~10.5 小时）和前端的获取时间。

是否有任何其他结构可以用来这样做。我读过字典和二进制文件很快。它们可以用于此目的吗？如何使用？

（它不是网络应用程序。它是前端和后端在同一台机器上的 WPF 桌面应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:32:24.287

*我相信*，您的基本问题不是您想要维护的结构，而是您管理数据流的*方式。*与其将数据库中的所有数据提取到某个结构中（`DataTable`在您的情况下），不如在*服务器端*`stored procedure`进行一些您需要的计算并将已经计算的数据返回给您。通过这种方式，您可以获得几个好处，例如：

 **   拥有数据库服务器的服务器*通常*比开发或客户端机器更快
*   大量减少数据传输，因为您*只*返回计算结果

**编辑**

考虑到已编辑的帖子，我会说它`DataTable`已经在内存访问方面进行了高度优化，我认为将其更改为其他内容不会给您带来显着的好处。我认为*可以*带来好处的是对程序流程的修改。换句话说，尝试回答以下问题：

*   我需要所有*当代*记录 吗？
*   `service`我可以在晚上进行一些计算吗？
*   我可以使用`SQL Server Express`（只是示例）并获得运行 a 的可能性的好处，即使在同一台机器上`stored procedure`也*可以*（必须测量）更快地运行这些东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:33:44.317

您是否考虑过在数据的位置进行计算，而不是获取它？您能否向我们提供更多信息，例如它的存储内容以及您如何获取它以及如何处理它。

如果没有指标和背景信息，很难确定优化。

这很容易说 - 是的，将数据放在一个文件中。但是文件是本地的，是网络的问题，你是否充分利用了核心/线程等。

最好从数据开始，看看需要做什么，然后设计最佳优化。

编辑：

好的，所以你在同一台机器上？在这种情况下，您真正​​应该考虑的一件事是您对数据做了什么。它需要是SQL吗？如果您只是使用是加载数据表？还是您没有披露的复杂性？

I've had a similar task- I just created a large text file and used memory mapping to read is efficicently without any overhead. Is this the kind of thing you're talking about?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:17:39.123

You could try using a [persisted dictionary like RaptorDB](http://www.codeproject.com/Articles/375413/RaptorDB-the-Document-Store) for storing and fetching/manipulating the data in an ArrayList. The proof of concept should not take long to build.*

# iphone - 某些用户的 UILocalNotification 音量低，有什么方法可以控制它？

> ID：10394289
> 
> 赞同：2
> 
> 时间：2012-05-01T06:20:04.400
> 
> 标签：iphone, ios, ipad, audio, notifications

我们有一个应用程序使用 UILocalNotification 在后台通知用户有关事件。

问题是一些用户以非常低的音量听到背景通知。

当它发生时，用户可以“重置”通知音量的唯一方法是通过设备重启。一旦完成，它就会恢复到正常水平。

我们尝试过的其他方法是更改​​应用程序外部的设置：

1.  使用音量按钮 - 更改 iPod 的音量或铃声音量，不影响通知音量。
2.  设置：设置->声音->铃声和警报->设置为最高。对通知量没有任何影响。
3.  改变 iPod 播放器的音量：不影响通知音量。
4.  终于重新启动 iPhone - 确实将通知音量设置为正常水平，但这对客户来说不是一个好的解决方案。

我们为此问题寻找代码解决方案并尝试了许多不同的选项：

1.  改变 iPod 音量 ([[MPMusicPlayerController iPodMusicPlayer]setVolume:1.0f]) 只改变了 iPod 的音量，对通知不起作用。
2.  尝试使用 [[AVAudioSession sharedInstance] setActive:YES error:NULL]; 然后像＃1一样链接音量 - 不起作用。
3.  按原样使用音量滑块“MPVolumeView”，这个滑块似乎也没有控制通知音量。

有没有办法以编程方式确保通知音量始终处于正常的可听水平？

如果不是 - 我们应该向用户提供什么建议？重新启动始终可以解决此问题，但它是向用户提供建议的糟糕解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T09:47:05.457

这是不可能的，您无法使用服装 UI 滑块控制通知音量。只有 Apple 提供的默认滑块。

# mysql - 查找同一张表的多个列之间的交集

> ID：10394290
> 
> 赞同：0
> 
> 时间：2012-05-01T06:20:06.047
> 
> 标签：mysql

我试图找到**一个**mysql 表的所有列之间的交集。我正在尝试的是：

```
select * from table where 
  col1=col2 AND col1=Col3 AND col1=Col4 AND 
  col2=Col3 AND col2=Col4 AND col3=Col4; 
```

我不认为这个查询工作正常。有人可以提出一种有效的方法。请注意所有列都来自**同**一张表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:54:30.790

您需要将表的实例连接在一起。

```
select distinct * from (
  select t1.col1 'intersection' from table t1, table t2
  where t1.col1=t2.col2 or t1.col1=t2.col3 or t1.col1=t2.col4
  union select t3.col2 'intersection' from table t3, table t4
  where t3.col2=t4.col3 or t3.col2=t4.col4
  union select t5.col3 'intersection' from table t5, table t6
  where t5.col3=t6.col4
) 
```

[编辑] 修改为包括不涉及 column1 的交叉点，并显示值而不是整个记录。

# c++ - 如何拦截 Windows 命令提示符的击键？

> ID：10394292
> 
> 赞同：0
> 
> 时间：2012-05-01T06:20:15.897
> 
> 标签：c++, winapi, keyboard, keylogger, keystrokes

我正在开发一个特定于应用程序的击键动态工具。我的要求是在**Windows CMD 提示符下获取用户的击键****时间数据**。经过几次搜索，我发现了两种方法：1）使用 windows 钩子 2）Pyhook - python 包装器模块

 **在我看来，我的应用程序功能将与键盘记录器的功能非常相似。但是我无法弄清楚是否应该使用全局挂钩或线程特定挂钩来拦截对 CMD 提示的击键。如果使用全局挂钩，是否可以根据目标应用程序过滤击键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:41:02.797

下面这个好代码是一个 Hotkey 应用程序，它位于后台侦听`CTRL-y`组合键，您可以修改或向应用程序添加更多组合键。隐藏时用于`CTRL-q`退出应用程序。

如果您希望完全隐藏控制台窗口，请在 main() 中取消注释此行：`//ShowWindow(FindWindowA("ConsoleWindowClass", NULL), false)`。享受。

```
if (CTRL_key !=0 && key == 'y' )
{
   MessageBox(NULL, "CTRL-y was pressed\nLaunch your app here", "H O T K E Y", MB_OK); 
   CTRL_key=0;
} 
```

完整代码清单：

```
#define _WIN32_WINNT 0x0400
#pragma comment( lib, "user32.lib" )

#include <windows.h>
#include <stdio.h>

HHOOK hKeyboardHook;

__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam)
{
    DWORD SHIFT_key=0;
    DWORD CTRL_key=0;
    DWORD ALT_key=0;

    if  ((nCode == HC_ACTION) &&   ((wParam == WM_SYSKEYDOWN) ||  (wParam == WM_KEYDOWN)))      
    {
        KBDLLHOOKSTRUCT hooked_key =    *((KBDLLHOOKSTRUCT*)lParam);
        DWORD dwMsg = 1;
        dwMsg += hooked_key.scanCode << 16;
        dwMsg += hooked_key.flags << 24;
        char lpszKeyName[1024] = {0};
        lpszKeyName[0] = '[';

        int i = GetKeyNameText(dwMsg,   (lpszKeyName+1),0xFF) + 1;
        lpszKeyName[i] = ']';

        int key = hooked_key.vkCode;

        SHIFT_key = GetAsyncKeyState(VK_SHIFT);
        CTRL_key = GetAsyncKeyState(VK_CONTROL);
        ALT_key = GetAsyncKeyState(VK_MENU);

        if (key >= 'A' && key <= 'Z')   
        {

            if  (GetAsyncKeyState(VK_SHIFT)>= 0) key +=32;

            if (CTRL_key !=0 && key == 'y' )
            {
               MessageBox(NULL, "CTRL-y was pressed\nLaunch your app here", "H O T K E Y", MB_OK); 
               CTRL_key=0;
            }

            if (CTRL_key !=0 && key == 'q' )
            {
                MessageBox(NULL, "Shutting down", "H O T K E Y", MB_OK); 
               PostQuitMessage(0);
            }

            printf("key = %c\n", key);

            SHIFT_key = 0;
            CTRL_key = 0;
            ALT_key = 0;

        }

        printf("lpszKeyName = %s\n",  lpszKeyName );
    }
    return CallNextHookEx(hKeyboardHook,    nCode,wParam,lParam);
}

void MessageLoop()
{
    MSG message;
    while (GetMessage(&message,NULL,0,0)) 
    {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }
}

DWORD WINAPI my_HotKey(LPVOID lpParm)
{
    HINSTANCE hInstance = GetModuleHandle(NULL);
    if (!hInstance) hInstance = LoadLibrary((LPCSTR) lpParm); 
    if (!hInstance) return 1;

    hKeyboardHook = SetWindowsHookEx (  WH_KEYBOARD_LL, (HOOKPROC) KeyboardEvent,   hInstance,  NULL    );
    MessageLoop();
    UnhookWindowsHookEx(hKeyboardHook);
    return 0;
}

int main(int argc, char** argv)
{
    HANDLE hThread;
    DWORD dwThread;

    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)   my_HotKey, (LPVOID) argv[0], NULL, &dwThread);

    //ShowWindow(FindWindowA("ConsoleWindowClass", NULL), false);

    if (hThread) return WaitForSingleObject(hThread,INFINITE);
    else return 1;

} 
```**

# android - 如何确定 Context 对象是否从一个活动泄漏到另一个活动？

> ID：10394295
> 
> 赞同：0
> 
> 时间：2012-05-01T06:20:23.940
> 
> 标签：android, memory-leaks

我想弄清楚一个活动的 Context 对象是否被泄露给另一个活动。以下代码是否将一个活动的上下文泄漏到另一个活动？

```
Intent intent = new Intent(context, Demo.class);
context.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:35:39.780

不，这不会“泄露”您的上下文。一般来说，为避免泄漏 Activity 上下文，请遵循以下提示：

*   永远不要持有对 a 的静态引用`Context`
*   不要`View`在 s 之间传递`Activity`s
*   每当您不需要`Context`带有`Activity`引用的 a 时，请使用应用程序的`Context`( `context.getApplicationContext()`)。
*   `WeakReference`在运行一些后台操作`Context`时使用（或在真正可行的情况下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:24:38.377

作为附录，使用 Eclipse 的内存分析工具 (MAT) 检查堆转储。

# mysql - 我在三个表上的 sql SELECT 语句 JOIN

> ID：10394300
> 
> 赞同：0
> 
> 时间：2012-05-01T06:20:54.393
> 
> 标签：mysql, select, join

我尝试在三张桌子上执行连接，但我很震惊

这里条件是 id = 0 和 test =0 和 data =0

每个表将有不同的列数

我想在三个表中选择 a、b、c。

提前致谢![在此处输入图像描述](../Images/08445d6307d72c51591ac7162b78f1f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:40:57.963

如果我明白这个问题，说实话我不明白，你在寻找工会吗？

```
select a,b,c,0 as e,0 as f, test,data from table1
union
select a,b,c,e,f, test,data from table2
union
select a,b,c,0 as e,0 as f, test,data from table3 
```

**编辑**包括 e 和 f

**编辑2**您需要在每个联合之前添加 where 子句

```
select a,b,c,0 as e,0 as f, test,data from table1
  where test= 1 and data =1 and id =0
union
select a,b,c,e,f, test,data from table2
  where test= 1 and data =1 and id =0
union
select a,b,c,0 as e,0 as f, test,data from table3
  where test= 1 and data =1 and id =0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:43:20.677

我在您的表格中看不到任何关系，那么您如何使用联接？如果您只想显示所有表中的 a、b 和 c 记录，那么您可以使用 UNION。

```
select a,b,c from tbl_name1
UNION
select a,b,c from tbl_name2
UNION
select a,b,c from tbl_name3 
```

# python - 如何在 *nix 下的 ipython 中使用 vi 键？

> ID：10394302
> 
> 赞同：107
> 
> 时间：2012-05-01T06:21:34.723
> 
> 标签：python, bash, vi, ipython, readline

目前在 Bash 中，我使用`set -o vi`在我的 bash 提示符中启用 vi 模式。

我如何在 ipython 中实现这一点？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2016-07-12T13:12:35.087

万一最近有人在这里闲逛，[IPython 5.0 从 readline 切换到 prompt_toolkit](http://ipython.readthedocs.io/en/stable/whatsnew/version5.html#new-terminal-interface)，所以这个问题的更新答案是传递一个选项：

```
$ ipython --TerminalInteractiveShell.editing_mode=vi 
```

...或在配置文件配置中全局设置它（`~/.ipython/profile_default/ipython_config.py`;`ipython profile create`如果你没有它，请使用它创建）：

```
c.TerminalInteractiveShell.editing_mode = 'vi' 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-01T06:24:54.190

看起来一个解决方案适用于许多其他 readline 兼容的应用程序：

在您的文件中设置以下内容`~/.inputrc`：

```
set editing-mode vi
set keymap vi
set convert-meta on 
```

来源：[http ://www.jukie.net/bart/blog/20040326082602](http://www.jukie.net/bart/blog/20040326082602)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-28T09:18:01.920

您还可以在 Vi 模式和 Emacs 模式之间进行交互切换。根据在它们之间切换的[readline 文档](https://www.gnu.org/software/bash/manual/html_node/Readline-vi-Mode.html)，您应该能够使用 MCj 组合键，但这似乎只允许我切换到 vi 模式 - 在我的 Mac 上（ESC 用作“元”键) 它是：`ESC`+ `CTRL`+ `j`。要切换回 Emacs 模式，可以使用 Ce 但这似乎对我不起作用 - 我不得不改为使用 MCe - 在我的 Mac 上它是：`ESC`+ `CTRL`+ `e`。

仅供参考，我的 ~/.inputrc 设置如下：

```
set meta-flag on
set input-meta on
set convert-meta off
set output-meta on 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-01T06:26:24.647

`ipython`使用 readline 库，这可以使用`~/.inputrc`文件进行配置。你可以加

```
set editing-mode vi 
```

到该文件以使所有`readline`基于应用程序的应用程序使用 vi 样式键绑定而不是 Emacs。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-09-13T10:43:32.200

我需要能够在 IPython 5 中以交互方式切换模式，我发现您可以通过即时重新创建提示管理器来做到这一点：

```
a = get_ipython().configurables[0]; a.editing_mode='vi'; a.init_prompt_toolkit_cli() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-17T18:11:27.140

您可以在 .ipython 启动配置文件中设置 vi。如果您没有它，请通过将文件添加到`~/.ipython/profile_default/startup/`类似`start.py`. 这是一个例子：

```
# Initializing script for ipython in ~/.ipython/profile_default/startup/
from IPython import get_ipython
ipython = get_ipython()

# If in ipython, set vi and load autoreload extension
if 'ipython' in globals():
    ipython.editing_mode = 'vi'
    ipython.magic('load_ext autoreload')
    ipython.magic('autoreload 2')
from Myapp.models import * 
```

最后一行是如果您将 ipython 与 Django 一起使用，并且希望默认导入所有模型。

# android - 运行 AsyncTask 类后，下一个活动返回 nullpointexception

> ID：10394308
> 
> 赞同：0
> 
> 时间：2012-05-01T06:22:17.637
> 
> 标签：android, android-asynctask

这是我的 AsyncTask 类

```
private class UpdatingNews extends AsyncTask<Void, Void, String> {

    @Override
    protected String doInBackground(Void... params) {
        webservice.UpdateAllNews();
        webservice.updateallCatNews();
        return null;
    }

    @Override
    protected void onPostExecute(String result) {

    }
} 
```

我叫它

```
UpdatingNewsupdate = new UpdatingNews();
        update.execute(); 
```

它确实执行。然后我想在单击按钮时检查此任务的状态是否完成，所以我像这样检查。

```
if (update.getStatus().toString()
                            .equals(AsyncTask.Status.FINISHED.toString())) {
                        toast = Toast.makeText(Main_FormNewUser.this,
                                "Thanks for fill in our survey form!",
                                Toast.LENGTH_SHORT);
                        toast.setGravity(Gravity.CENTER_VERTICAL
                                | Gravity.CENTER_HORIZONTAL, 0, 0);
                        toast.show();
                        name = nametext.getText().toString();
                        email = emailtext.getText().toString();
                        webservice.InsertSurvey(name, email, ages, genders,
                                jobs, salaries, interesting);
                        webservice.insertFormSubmit(1);

                        startActivity(new Intent(Main_FormNewUser.this,
                                Main_AllLatestNews.class));
                        finish();
                    } 
```

单击后，它将启动 Main_AllLatestNews.class 但出现 NullPointerException。

我尝试不使用 AsyncTask 并且没有返回错误，我不知道为什么我调用 AsyncTask 它会给我错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:31:23.743

像这样使用 onPostExecute 怎么样

添加布尔值以确定 AsyncTask 是否结束

```
@Override
protected void onPostExecute(String result) {
    check = true;
}

//if (update.getStatus().toString().equals(AsyncTask.Status.FINISHED.toString())) {
if(check){
                    toast = Toast.makeText(Main_FormNewUser.this,
                            "Thanks for fill in our survey form!",
                            Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER_VERTICAL
                            | Gravity.CENTER_HORIZONTAL, 0, 0);
                    toast.show();
                    name = nametext.getText().toString();
                    email = emailtext.getText().toString();
                    webservice.InsertSurvey(name, email, ages, genders,
                            jobs, salaries, interesting);
                    webservice.insertFormSubmit(1);

                    startActivity(new Intent(Main_FormNewUser.this,
                            Main_AllLatestNews.class));
                    finish();
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:31:30.023

了解 AsyncTask 的基础知识查看此博客。[无痛线程](http://android-developers.blogspot.in/2009/05/painless-threading.html) 或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

您尚未接受 onPostExecute(String result) 中 doInBackground() 的返回

doInBackground() 将结果返回给 onPostExecute。因此，您必须仅在 onPostExecute 中更新您想要的值或 UI。

# salesforce - 如何在自定义对象上显示自定义按钮？

> ID：10394310
> 
> 赞同：0
> 
> 时间：2012-05-01T06:22:34.660
> 
> 标签：salesforce

我有一个名为 Itnery 的自定义对象，我创建了一个名为 Save 的自定义按钮，在自定义按钮部分下的页面布局中，我将按钮拖到那里，但当我打开它时它没有显示在 Itnery 窗口中。Itnery 部分带有机会窗口。

第二件事是我想保存与 Itnery 相关的数据，如电子邮件、发件人、收件人等在我创建时单击按钮，我按照以下方式进行操作：

{!REQUIRESCRIPT("/soap/ajax/10.0/connection.js")} {!REQUIRESCRIPT("/soap/ajax/10.0/apex.js")}

行程 obj= 新行程；

obj.Email_Content_c *= {!Itinerary* _c.Email_Content__c}; obj.Email_Subject_c *={!行程*_c.Email_Subject__c}; obj.Email_To_c *={!行程*_c.Email_To__c}; obj.Flight_Info_c *={!行程*_c.Flight_Info_c *}; 对象。行程*_c={!行程*_c* .行程_c}; obj.Opportunity_c *={!行程*_c.Opportunity__c}; 数据库.update(obj); message ='保存成功'; window.location.reload();

* * *

行为：执行 javascript Content Source " Onclick javascript

如果代码中有任何错误，请让我知道..因为我是 saleforce 的新手

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:30:27.173

我认为您想将自定义“保存”按钮添加到相关列表中。

这样做：
- 在 Opportunity 布局页面单击“编辑布局”链接
- 然后向下滚动到相关列表 (Itnery)
- 单击工具图标
- 在弹出窗口中，您将看到相关列表的设置
- 那里是“列”和“按钮”区域，单击“按钮”
- 有标准和自定义按钮：选择您的自定义按钮并单击“添加”按钮
- 保存设置

# html - 如何使用 html 助手进行条件检查、禁用、...？

> ID：10394311
> 
> 赞同：7
> 
> 时间：2012-05-01T06:22:48.013
> 
> 标签：html, asp.net-mvc

对于视图，我必须生成一些复选框。

我有一个项目集合：

```
public class ItemSelection
    {
        public int Id { get; set; }
        public String Name { get; set; }
        public Boolean IsSelected { get; set; }
        public Boolean IsActive { get; set; }
    } 
```

在视图中，我正在对此进行迭代

```
@foreach(ItemSelection item in Model.Items){
   Html.CheckBoxFor(m=>item.IsSelected)//HERE I WOULD LIKE TO HAVE DISABLED properties if I've a IsActive=falsel
   Html.HiddenFor(m=>item.Id)
} 
```

现在我看到我可以做一个“if”，根据这个属性创建一个不同的 HtmlAttribute 数组，但是有没有办法只创建一个数组

```
new {disabled=item.IsActive?"ONE_SPECIAL_VALUE_HERE":"disabled"} 
```

我试图把`false`，或其他一些东西，没有任何效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T07:11:15.570

你无法避免`if`：

问题在于属性的特殊性，`disabled`因为没有“特殊”值可以使您的示例工作，[因为](http://reference.sitepoint.com/html/input/disabled)：

> “禁用”是该属性唯一可能的值。如果应该启用输入，只需完全省略该属性。

因此，您需要省略该属性以启用该控件，但所有 HTML 助手将序列化作为 htmlattributes 传入的匿名对象的所有属性。并且没有办法有条件地将属性添加到匿名类型。

但是，如果您有多个用于启用/禁用情况的公共属性，并且您不想创建两个匿名类型，则可以将属性放在具有可选`disabled`属性的字典中，并将字典用作 htmlAttributes：

```
var checkboxHtmlAttributes = new Dictionary<string, object>
                                {{"attibute1", "value1"}, 
                                {"attribute2", "value2"}};
if (!item.IsActive)
{
    checkboxHtmlAttributes.Add("disabled", "disabled");
}
@Html.CheckBoxFor(m=>item.IsSelected, checkboxHtmlAttributes) 
```

# visual-studio-2010 - 用于自定义 VS 2010 菜单的更好的编辑器？

> ID：10394312
> 
> 赞同：1
> 
> 时间：2012-05-01T06:22:47.927
> 
> 标签：visual-studio-2010, menu, customization, development-environment, toolbar

无法使用编辑器来配置 Visual Studio 2010 的环境菜单。现在实在是太无聊了！只需尝试创建一个子菜单，甚至向您自己的工具栏添加几个命令。你必须做一个。命令。在。答：时间。每次关闭命令窗口，然后失去你的位置，不得不重新开始。

有谁知道任何插件或扩展程序可以让您实际拖放菜单和命令，以便您可以更轻松地以您想要的方式设置您的环境？

现在，它是如此的痛苦，以至于有一半的时间我什至都懒得理会。

# vb.net - 如何让一个线程等到另一个线程完成？

> ID：10394315
> 
> 赞同：1
> 
> 时间：2012-05-01T06:23:16.033
> 
> 标签：vb.net, multithreading

```
Static lock As Object

SyncLock lock
    TraverSingweb.TraverSingWeb.WebInvoke(Sub() TraverSingweb.TraverSingWeb.putHtmlIntoWebBrowser(theenchancedwinclient)) 'This quick function need to finish before we continue
End SyncLock

SyncLock lock
    'SuperGlobal.lockMeFirst(AddressOf SuperGlobal.doNothing) ' donothing
End SyncLock 
```

这就是我目前在 vb.net 中所做的。这是一种模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T17:30:49.727

这是一个非常基本的示例；main 方法只是创建两个线程并启动它们。第一个线程等待 10 秒，然后设置**_WaitHandle_FirstThreadDone**。第二个线程只是等待**_WaitHandle_FirstThreadDone**设置后再继续。两个线程同时启动，但第二个线程将等待第一个线程设置**_WaitHandle_FirstThreadDone**后再继续。

有关详细信息，请参阅： [System.Threading.AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。

```
Module Module1

    Private _WaitHandle_FirstThreadDone As New System.Threading.AutoResetEvent(False)

    Sub Main()
        Console.WriteLine("Main Started")
        Dim t1 As New Threading.Thread(AddressOf Thread1)
        Dim t2 As New Threading.Thread(AddressOf thread2)
        t1.Start()
        t2.Start()
        Console.WriteLine("Main Stopped")
        Console.ReadKey()
    End Sub

    Private Sub Thread1()
        Console.WriteLine("Thread1 Started")
        Threading.Thread.Sleep(10000)
        _WaitHandle_FirstThreadDone.Set()
        Console.WriteLine("Thread1 Stopped")
    End Sub

    Private Sub thread2()
        Console.WriteLine("Thread2 Started")
        _WaitHandle_FirstThreadDone.WaitOne()
        Console.WriteLine("Thread2 Stopped")
    End Sub
End Module 
```

# android - 在同一 ImageView 中使用动画时，（例如：Alpha -> trans），imageview 中的剩余不透明度

> ID：10394317
> 
> 赞同：0
> 
> 时间：2012-05-01T06:23:31.463
> 
> 标签：android, android-animation, android-imageview, android-view

请帮帮我T_T

我在 ImageView 中使用动画

使用两个动画，alpha和translation

第一个阿尔法动画

```
 // 70%~100% alpha 1500ms 3times
    private static Animation makeAnimation3(Context context, final int image_width, final int image_height, final int parent_width, final int parent_height){
        AlphaAnimation alpha = new AlphaAnimation((float)0.7,1);
        alpha.setDuration(1500);
        alpha.setInterpolator(context,  R.anim.cycle_3);
        return alpha;
    } 
```

第二个翻译动画

```
 private static Animation makeAnimation4(Context context, final int image_width, final int image_height, final int parent_width, final int parent_height){
        TranslateAnimation trans = new TranslateAnimation(0, image_width/10,0,0);
        trans.setDuration(1500);
        trans.setInterpolator(context, R.anim.cycle_6);
        return trans;
    } 
```

制作动画，首先使用 alpha 动画，然后翻译动画

但是，在这种情况下，当运行平移动画时，由 alpha 动画改变的不透明度仍然存在......

我希望每个动画不会相互影响

我用过，但效果不好

有什么想法或关键字来解决这个问题吗？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:49:52.373

你需要 setFillAfter()

[http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter(boolean)](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

# c# - 如何使用 twitter api 获取 twitter 用户的电子邮件地址

> ID：10394319
> 
> 赞同：5
> 
> 时间：2012-05-01T06:23:44.623
> 
> 标签：c#, asp.net, api, twitter

我想在我的网站上添加一个“使用 twitter 登录”的插件，并且在用户允许我的 twitter 应用程序访问他们的数据后，我的网站需要获取用户的 twitterID 和电子邮件。我浏览了 twitter 开发文档，但似乎总是关于 OAuth 的复杂示例。是否有捷径可寻？我已经为facebook放了同类型的插件，非常简单。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T10:35:38.990

**如果 twitter 没有提供任何 API，那么foursquare 是如何检索它们的呢？**

*   Foursquare 可以列出用户在 Twitter 上注册的foursquare-friends。
*   它还提供API，显示用户的“foursquare 好友列表”以及用户的“twitter 关注者列表”中经常出现的用户的好友。

在上述两种情况下，只能通过电子邮件进行比较。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T08:34:31.437

您无法获取 twitter 用户的电子邮件**地址**。Twitter 不提供：[https ://dev.twitter.com/docs/faq#6718](https://dev.twitter.com/docs/faq#6718)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T06:32:32.277

来自 twitter api 常见问题解答 [https://dev.twitter.com/docs/faq](https://dev.twitter.com/docs/faq)

> 如何获取用户的电子邮件地址？
> 
> 如果您想要用户的电子邮件地址，则需要在您自己的应用程序和服务范围内向用户索取。Twitter API 不提供用户的电子邮件地址作为 OAuth 令牌协商过程的一部分，也不提供其他方式来获取它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-30T20:50:49.503

[https://dev.twitter.com/rest/reference/get/account/verify_credentials](https://dev.twitter.com/rest/reference/get/account/verify_credentials) 请求用户的电子邮件地址

请求用户的电子邮件地址要求您的应用程序被 Twitter 列入白名单。要请求访问，[请使用此表格](https://support.twitter.com/forms/platform)。

列入白名单后，“向用户请求电子邮件地址”复选框将在您在 apps.twitter.com 上的应用权限下可用。隐私政策 URL 和服务条款 URL 字段也将在电子邮件访问所需的设置下可用。如果启用，将通过 oauth/authorize 对话框通知用户您的应用可以访问他们的电子邮件地址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-14T13:21:46.367

转到[https://support.twitter.com/forms/platform](https://support.twitter.com/forms/platform) 选择“我需要访问特殊权限”输入应用程序名称和 ID。这些可以通过[https://apps.twitter.com/](https://apps.twitter.com/)获得——应用程序 ID 是单击应用程序后浏览器地址栏中的数字部分。权限请求：“电子邮件地址”提交并等待响应在您的请求获得批准后，您的 Twitter 应用程序的“权限”部分中会添加一个附加权限设置。转到“其他权限”，然后勾选“向用户请求电子邮件地址”复选框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-01T10:55:06.400

Twitter 不提供电子邮件地址，这就是许多使用 OAuth 的网站不实施 Twitter 的原因；因为用户的电子邮件地址是注册过程的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-26T05:22:43.350

无法通过 twitter 获取电子邮件，twitter 不会在 api 响应中提供电子邮件。

[见官方推特 api 链接：](https://dev.twitter.com/rest/reference/get/users/show)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-06T23:15:23.180

我正在研究 C#.Net，我使用了 Tweetinvi API，它易于使用并且有很好的文档。

好回答你的问题，有可能得到用户的电子邮件和所有数据。

第一：您需要在“apps.twitter.com”上创建您的 Twitter 应用程序并注册它。然后在应用程序管理中，您会找到一个“权限”选项卡，在页面末尾有一个复选框，说明您是否需要电子邮件信息。您必须提供指向您的隐私条款的链接，以便用户阅读并同意与您的应用共享信息，您可以使用“ [https://google.com](https://google.com) ”，但建议提供有效链接。

就这样。在代码中，您只需要对用户进行身份验证并获取您需要的数据。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Tweetinvi;
using Tweetinvi.Models;

namespace APIS
{
    public class TwitterConfig
    {
        IAuthenticationContext authenticationContext;

        /// <summary>
        /// Le indica a twitter que va a hacer una consulta de crendenciales. Esta consulta va a generar un PIN en caso de que sea correcto
        /// y el usuario tiene que digitar el pin.
        /// </summary>
        public void RequestForCredentials()
        {
            var appCredentials = new TwitterCredentials("CONSUMER-KEY", "CONSUMER-SECRET"); //GET THE CONSUMER INFORMATION ON THE TWITTER APP MANAGEMENT

            authenticationContext = AuthFlow.InitAuthentication(appCredentials);

            //This opens a web-browser and asks to the twitter client 
            //to accept the terms, and twitter gives a code and the user
            // have to introduce it on the app (use the AuthByPin(String pin) method )
            //Thats the PIN for auth the user and then get the data
            Process.Start(authenticationContext.AuthorizationURL);
        }

        /// <summary>
        /// Metodo que solicita un PIN que un usuario de Twitter al aceptar las condiciones se le brindó y este lo introdujo en la app
        /// para ser autenticado.
        /// </summary>
        /// <param name="pin">PIN del usuario</param>
        /// <returns>IAuthenticatedUser devuelve el usuario autenticado y con todos los datos.</returns>
        public IAuthenticatedUser AuthByPin(String pin) 
        {
            try
            {
                // Con este código PIN ahora es posible recuperar las credenciales de Twitter 
                var userCredentials = AuthFlow.CreateCredentialsFromVerifierCode(pin, authenticationContext);

                // Use las credenciales del usuario en su aplicación 
                Auth.SetCredentials(userCredentials);

                var user = User.GetAuthenticatedUser();
                return user; 
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
                throw new ApplicationException("Problema al autenticar.", e);
            }
        }
    }
}
</code> 
```

如果你有什么问题问我

# javascript - 使用 Raphael JS 一次缩放一组元素

> ID：10394320
> 
> 赞同：2
> 
> 时间：2012-05-01T06:23:51.247
> 
> 标签：javascript, svg, raphael

我在 Raphael JS 中有一个简单的场景，主要包含基本元素、圆圈、矩形、图像等。

我想在 mouseover 事件上放大一个圆圈，我可以这样做，但我想在圆圈顶部添加一个图像，并且当鼠标悬停在圆圈或图像上时也具有该比例。

有没有一种方法可以一次缩放两个（或 X 个）项目而不是一个？是否有某种我找不到的“容器”元素？

另外，当鼠标悬停在圆圈上时，该事件会触发，但是当鼠标移到图像上时，会触发圆圈的 mouseout 事件，我该如何停止它以使圆圈和图像看起来是一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:07:04.007

我认为你在这里要做的是在你已经拥有的圆圈/图像组合上创建一个透明的圆圈。所以，圆圈，图像，圆圈。第二个圆圈是您放置事件处理的地方。通过这种方式，顶部的透明圆圈即使看起来像悬停在图像上也会获得焦点。

将它们中的许多粘贴在一组中，然后在鼠标悬停时缩放该组。我会为你做一个例子，但我天生懒惰。如果你真的卡住了，我会试一试。

希望这是有道理的。

# python - 在html表中使用lxml获取href的值

> ID：10394321
> 
> 赞同：2
> 
> 时间：2012-05-01T06:23:55.673
> 
> 标签：python, html, lxml

我有一个 html 表。
在那张桌子上我有

```
<td>abc</td><a>www.abc.com</a> 
```

如何使用匹配 td 的值来获取链接值？

例如：我怎样才能获得 www.abc.com 使用 lxml 搜索 tect abc 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:28:54.477

`a/text()`获取文本

`a/@href`获得 attr （`href`在这种情况下）

**UPD**

```
>>> from lxml import etree
>>> etree.fromstring('<html><td>abc</td><a>www.abc.com</a></html>').xpath("//td/following-sibling::a/text()")
['www.abc.com'] 
```

[XPath 1.0](http://www.w3.org/TR/xpath/)

# database - 远程数据库链接

> ID：10394322
> 
> 赞同：0
> 
> 时间：2012-05-01T06:23:58.993
> 
> 标签：database, security, oracle10g, oracle11g, database-link

我和我的团队正在为一家银行开发一个程序，需要将数据与部署在银行客户内部网络上的现有系统同步。对我们系统中的数据所做的任何更新都应复制到他们的系统中，反之亦然。我们系统使用的数据库是Oracle 11g，现有系统使用的是Oracle 10g。我们最初考虑为此使用 Web 服务，但现有系统的开发人员不想构建 Web 服务。所以我们可以选择使用数据库链接来同步数据。

1.  使用数据库链接复制数据的优缺点是什么？
2.  由于它是一个处理货币交易的银行应用程序，我们如何加密通过网络发送的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:36:24.750

您不会使用数据库链接来复制数据——至少不会单独使用。您可能希望配置[Oracle Streams、Oracle GoldenGate 或 Advanced Replication](http://www.oracle.com/technetwork/database/features/data-integration/index.html)来处理双向复制。Streams 将是首选，因为您正在处理 Oracle 到 Oracle 复制，因为它是一种比高级复制更新且更高效的架构。这两个选项都包含在企业版许可证中。GoldenGate 是 Oracle 最近购买的产品，如果您尝试将数据从 Oracle 复制到非 Oracle 数据库并且需要额外的许可，它会更合适。

如果要加密在两个数据库之间传输的数据，则需要在两个数据库上都获得[Oracle Advanced Security](http://www.oracle.com/technetwork/database/options/advanced-security/index.html)选件的许可。这是企业版许可证之上的额外费用选项。另一种方法是在服务器之间配置 VPN 或安全端口转发。

# algorithm - B+树的构建

> ID：10394324
> 
> 赞同：1
> 
> 时间：2012-05-01T06:24:15.893
> 
> 标签：algorithm, data-structures, tree, b-tree

假设我被要求构建一个 B+ 树，它是：

```
i) n = x. 

ii) order = x.

iii) degree = x.

iv) p = x. 
```

什么应该没有。在上述每种情况下，每个节点可以包含的键和指针的数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T18:14:26.447

在B+树中，**Order**表示每个内部节点的子指针的最大数量，即如果B+树的Order为m，那么每个内部节点最多可以有m个子节点（接下来是m-1个key），并且至少有*CEIL* (m/2) 子指针的数量（根除外）。

对于B+ 树的度数，从中**我**[得到](http://math.hws.edu/eck/cs327/chapter7.pdf)的信息是，如果 d 是 B-树的度数，那么每个节点最多可以包含 2d 个项目（键）。现在， B 树和 B+ 树都是[Multiway Tree](http://www.cse.ohio-state.edu/~gurari/course/cis680/cis680Ch12.html)，因此，我想程度的定义不会改变。检查作为注释给出的 $LINK 也表明相同的事实。

对于 n，正如 JustinDanielson 所提到的，它可能是存储在节点中的键的总数，其中子指针的数量为 n+1（您的问题=x+1）

# php - sha1 没有散列，我该如何阻止它这样做？

> ID：10394325
> 
> 赞同：-1
> 
> 时间：2012-05-01T06:24:22.460
> 
> 标签：php, sql, sha1

这是代码：

```
<html>
<body>

<?php
$valid = true;

//Check for first name value
if (empty($_POST['texts'])) {
    echo 'You forgot to type something in<br />';
    $valid = false;
}

if ($valid == true) {
    $conn1 = mysqli_connect('xxx') or die('Error connecting to MySQL server.');

    $name=   $_POST['name'];
    $title=  sha1($_POST['title']);
    $texts= $_POST['texts'];
    $forum_id = $_POST['forum_id'];

        $name = str_replace("'","''",$name);
        $title = str_replace("'","''",$title);
        $title = str_replace("b074acd521","STREAMER",$title);

        $texts = str_replace("'","''",$texts);

        $title = substr($title,0,8);

        $sql = "INSERT INTO post (name,title, texts, forum_id) VALUES ('$name', '$title', '$texts', '$forum_id')";
        mysqli_query($conn1, $sql) or die('Error inserting to database.');
        mysqli_close($conn1);

        header('Location: requests.php');
        }
else {
    echo 'Click <a href="javascript:history.go(-1)">HERE</a> to go back and adjust your entry.';
}

?>

</body>
</html> 
```

当我在网站上发帖并将 id 字段留空时，它仍然会生成一个 ID，我该如何解决这个问题？另外，如果名称字段为空，我怎样才能将其设为默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:32:49.853

大多数（如果不是全部）散列算法将散列一个空字符串。如果他们不这样做，他们就不会真正成为“诚实”的哈希。这个想法是您不应该能够将散列解密为原始输入。例如，如果以下情况：

```
All good boys deserve fudge! 
```

和

```
All good boys deserve  fudge! 
```

使用哈希算法将空白空间视为不可哈希，然后他们将获得相同的哈希，这将使其更容易破解。

如果您不希望对空字符串进行散列，则需要在散列之前检查字符串。就像是：

```
 if(!empty($_POST['user_input']) {
      $user_hash = sha1($_POST['user_input']);
 } else {
      echo "No input given, wiseguy!";
 } 
```

# javascript - JavaScript 分离轴定理

> ID：10394329
> 
> 赞同：3
> 
> 时间：2012-05-01T06:25:05.553
> 
> 标签：javascript, collision-detection, overlap

我正在尝试使用 JavaScript 中的分离轴定理来检测两个正方形碰撞（一个旋转，一个不旋转）。尽我所能，我无法弄清楚这在 JavaScript 中会是什么样子，也找不到任何 JavaScript 示例。请帮忙，用纯数字或 JavaScript 代码解释将是最有用的。

* * *

更新：在研究了大量几何和数学理论后，我决定在 GitHub 存储库中推出一个简化的 SAT 实现。您可以在此处找到 JavaScript 中的 SAT 工作副本：[https ://github.com/ashblue/canvas-sat](https://github.com/ashblue/canvas-sat)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T17:34:51.763

**变换多边形**

首先，您必须通过应用`angle`.

为了将来对缩放、平移等的支持。我建议通过矩阵变换来做到这一点。您必须编写自己的`Matrix`类或找到一些已经具有此功能的库（我相信有很多选择）。

然后，您将徒劳地使用代码：

```
var transform = new Matrix();
transform.appendRotation(alpha);
points = transform.transformPoints(points); 
```

对象`points`数组在哪里。`Point`

**碰撞算法概述**

所以这就是在你遇到任何碰撞*之前的全部内容。*关于碰撞算法，标准做法是尝试使用以下步骤分离 2 个凸多边形（在您的情况下为正方形）：

*   对于每个多边形边（多边形 0 和多边形 1 的边）：
    *   将两个 polgyons 分类为“在前面”、“跨越”或“在”边缘。
    *   如果两个多边形在不同的边上（1 个“前面”和 1 个“后面”），则没有碰撞，您可以停止算法（提前退出）。
*   如果你到了这里，没有边缘能够分离多边形：多边形相交/碰撞。

*请注意，从概念上讲，“分离轴”是垂直于我们对多边形进行分类的边缘的轴。*

**关于边的多边形分类**

为了做到这一点，我们将根据边缘对多边形的点/顶点进行分类。如果所有点都在一侧，则多边形在该侧。否则，多边形跨越边缘（部分在一侧，部分在另一侧）。

要对点进行分类，我们首先需要获取边缘的法线：

```
// this code assumes p0 and p1 are instances of some Vector3D class

var p0 = edge[0]; // first point of edge
var p1 = edge[1]; // second point of edge
var v = p1.subtract(p0);
var normal = new Vector3D(0, 0, 1).crossProduct(v);
normal.normalize(); 
```

上面的代码使用边缘方向和 z 向量的叉积来获得法线。当然，您应该为每条边预先计算这个值。

*注意：法线代表与 SAT 的分离轴。*

接下来，我们可以通过首先使其相对于边缘（减去边缘点）并使用法线的点积来对任意点进行分类：

```
// point is the point to classify as "in front" or "behind" the edge
var point = point.subtract(p0);
var distance = point.dotProduct(normal);
var inFront = distance >= 0; 
```

现在，`inFront`是`true`该点是在前面还是在边缘，`false`否则。

*请注意，当您遍历多边形的点以对多边形进行分类时，如果前面至少有 1 个点，后面至少有 1 个点，您也可以提前退出，因为那时已经确定多边形跨越边缘（而不是前面或后面）。*

如您所见，您仍然需要编写大量代码。`Matrix`找到一些带有和类的js库，`Vector3D`并使用它来实现上述内容。将您的碰撞形状（多边形）表示为序列`Point`和`Edge`实例。

希望这能让你开始。

# php - Javascript IE 重定向循环（带有一些 PHP）

> ID：10394330
> 
> 赞同：4
> 
> 时间：2012-05-01T06:25:13.063
> 
> 标签：php, javascript

出于某种原因，以下内容会在 IE 中导致重定向循环，但在 Chrome 或 Firefox 中不会。

```
<?php
if (isset($_POST['a']) OR strlen($_POST['a'])>0)
    {
    die($_POST['a']);
    }
?>
<html>
<head>
<script type="text/javascript" src="fpjs2.js"></script>
</head>
<body>
<form name="fbif" id="fbif" action="checkcookie.php" method="POST">
<input type="hidden" name="a" value="" />
</form>
<script>
var ec = new MyObject();
ec.get("fbuid", function(value) {
    document.fbif.a.value=value; 
    document.fbif.submit();
});
</script>
</body>
</html> 
```

该脚本称为 checkcookie.php，它会检查 cookie 的存在（这不是问题，不要继续讨论或尝试建议我如何最好地执行此操作），然后将其发布回同一个脚本。顶部的 PHP 应该检测是否已发布某些内容，如果是，则仅显示发布变量并退出（不要加载脚本的其余部分）。

在 Chrome 和 Firefox 上，这可以完美运行。在 IE 上它会无休止地重定向。所以似乎 IE 没有发布变量，而只是一遍又一遍地重新加载自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:09:42.833

在我看来你是对的，在 IE 上它不会发布“a”变量，但它应该发布表单。所以我敢打赌，问题出在你的 javascript 和与 IE 的兼容性上。

我会尝试不发布表单，而是尝试检查它是否返回您认为它应该返回的值，mby`alert(value);`或仅评论提交函数并检查输入是否获得了值。

编辑：`isset($_POST['a']) OR strlen($_POST['a'])>0`=>`isset($_POST['a'])`与 strlen($_POST['a'])>0 为真的效果完全相同，那么 isset($_POST['a']) 也为真。

# dynamic - 如何根据 extjs 4 中选择的其他数据更改组合中的数据

> ID：10394331
> 
> 赞同：1
> 
> 时间：2012-05-01T06:25:15.247
> 
> 标签：dynamic, extjs, load, store, reload

我正在使用 extjs 4.0.7。我有一个要求，其中我在网格的编辑模式中有两个组合框，我需要根据第一个中选择的值更改第二个中的数据。

我正在使用 extjs 的 MVC 架构和返回 json 字符串以填充组合框中的数据的 java 代码。我的第一个组合框的代码是：

查看文件：

```
items: [{
            id: 'country',
            header: 'Countries',
            field: {
                xtype: 'combo',
                store: [
                    ["USA","USA"],
                    ["India","India"],
                ],
                editable: false,
                allowBlank: false,
                listeners: {
                    select: function(combo, records, eOpts){
                        contactTypeGrid = combo.getValue();
                        myGrid.fireEvent('LoadStateOnSelect');
                    }
                }
            }
        },
        {
            id: 'states',
            header: 'Sates',
            dataIndex: 'states',
            field: {
                xtype: 'combo',
                store: 'StateStore',
                valueField: 'stateDesc',
                displayField: 'stateText',
            }
        },  ....
    ] 
```

控制器：

```
LoadStateOnSelect: function(){
    contactTypeGrid = contactTypeGrid.toLowerCase();
    var stateStore = this.getStateStoreStore();
    stateStore.getProxy().url = "myURL.do";
    stateStore.getProxy().extraParams.act = contactTypeGrid;
    stateStore.load();
}, 
```

但是，当我运行此代码时，第二个存储中的数据在后台发生更改，但加载掩码继续出现在前面，因此我无法选择任何值。

我应该如何解决条件数据加载问题？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:31:38.857

我对此有一个临时修复。但是，我仍在寻找更稳定和可行的解决方案。

解决方案：无论何时更改依赖存储中的数据，您都可以展开正确加载新数据的组合框。

```
LoadStateOnSelect: function(){
    contactTypeGrid = contactTypeGrid.toLowerCase();
    var stateStore = this.getStateStoreStore();
    stateStore.getProxy().url = "myURL.do";
    stateStore.getProxy().extraParams.act = contactTypeGrid;
    statesCombo.expand(); //Here I am assuming that "statesCombo" has a 
                         //reference to the dependant combo box.
    stateStore.load(); 
}, 
```

但是，这可能会节省其他人的时间，如果有人找到更可行的解决方案，也请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T21:07:41.780

**carStore** - 主要组合的任何商店
**carModelStore** - 商店，其内容应取决于 carStore 中的选择

当数据从服务器获取时，考虑更通用和有用的示例。

```
var carModelStore = new Ext.data.Store({
    reader: new Ext.data.JsonReader({
        fields: ['id', 'car-model'],
        root: 'rows'
    }),
    storeId: 'car-model-store',
    proxy: new Ext.data.HttpProxy({
        url: 'carmodeldataprovider.json?car-name=lamborghini'
    }),
    autoLoad: true
});

{ xtype: 'combo', name: 'car-name', fieldLabel: 'Car', mode: 'local', store: carStore, triggerAction: 'all',
    listeners: {
        select: function(combo, records, eOpts){
            var carName = records.get('car-name');
            var carModelStore = Ext.StoreMgr.lookup("car-model-store");

            carModelStore.proxy.setUrl('carmodeldataprovider.json?car-name=' + carName, false);
            carModelStore.reload();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:04:37.247

您是否尝试过在重新加载商店之前清除组合框中的选定值？您可以尝试`clearValue()`在组合上调用该方法。

# jquery-plugins - 工具提示在 highcharts 的饼图中被截断

> ID：10394332
> 
> 赞同：5
> 
> 时间：2012-05-01T06:25:36.843
> 
> 标签：jquery-plugins, highcharts

我有一个从 json 字符串生成的饼图。饼图正在正确创建，但是当要在工具提示中显示的文本很大时，工具提示会被截断。我尝试增加 svg 区域的宽度和高度。但是图表是动态生成的，所以我无法根据内容动态设置图表的宽度和高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:59:28.870

可以调整边距`margin:[0,100,0,100],`以缩小饼图，以便出现工具提示/标签。这已设置为在 Highcharts 3.0 中自动缩放图表。

[http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released](http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released)

[http://github.highcharts.com/v3.0Beta/highcharts.js](http://github.highcharts.com/v3.0Beta/highcharts.js)

[http://jsfiddle.net/Zvrt6/1/](http://jsfiddle.net/Zvrt6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:40:48.980

如果可能的话，增加图表 div 的高度和宽度或将代码放在 jsfiddle 中，以便我们获得更多想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:35:38.610

这个例子可能与你的情况有关[——http://jsfiddle.net/4ac8b/1/](http://jsfiddle.net/4ac8b/1/)。当您重新调整结果窗格的大小时，您会注意到图表大小会相应更改。

您需要设置容器的大小，以便在该区域本身绘制图表。[http://jsfiddle.net/4ac8b/](http://jsfiddle.net/4ac8b/)。即使您重新调整结果窗格的大小，图表大小也不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:59:52.203

更改饼图的直径以允许附加信息

[http://www.highcharts.com/ref/#plotOptions-pie--size](http://www.highcharts.com/ref/#plotOptions-pie--size)

# javascript - js文件包含在模式对话框中显示的ajax请求页面中

> ID：10394336
> 
> 赞同：0
> 
> 时间：2012-05-01T06:26:16.497
> 
> 标签：javascript, jquery, html, ajax

我正在尝试使用 jquery 开发一个 ajax 对话框。当我点击`index.php`页面中的链接时，假设：

```
<a href='ajaxreq.php' class='dialog'>First Request</a> 
```

该页面`ajaxreq.php`应该使用 ajax 在对话框中打开。它工作正常。但是，在对话框中刚刚打开的页面（ ）中也有一些链接`ajaxreq.php`，假设

```
<a href='secondreq.php' class='dialog'>Second Request</a> 
```

现在我想要，如果我点击，`Second Request`它也应该在一个对话框中打开。我怎样才能做到这一点？

注意：如果我在页面中包含`jquery.js`& ，那么第二个链接可以正常工作。但我不想将它包含在该页面中。毕竟，所有对话框都在页面上打开，所以我只想在文件中包含 js 文件。`dialog.js``ajaxreq.php``index.php``index.php`

部分代码：

```
jQuery.fn.sDialog = function(options){

    return this.each(function(ind, elm) {

        var $t = jQuery(elm);

        $t.bind("click", '.sdialog', function(e){
            e.preventDefault();

            showLoading();

            if($t.is('a')){

                var url = $t.attr('href');
                ajaxReq(url, {});
                //$t.hide();
            }

        });

    });

}; 
```

# session - 如何为登录GRAILS（Spring security）的用户实现会话？

> ID：10394343
> 
> 赞同：0
> 
> 时间：2012-05-01T06:26:44.660
> 
> 标签：session, grails, spring-security

如何为登录的用户实现会话

这是我实施的代码

```
 def user=User.findByUserId(params.userId)
    if(user)
   {   
    def sessionUser=user
    def sessionId=sessionUser.id                       
    constSessionUser=sessionUser
    constSessionId=sessionId
  ..........
  } 
```

但是，如果我使用不同的用户名和密码登录，即使我用 session.invalidate() 终止了它，返回的 params.userId 仍然是以前的用户

因为 iam 使用 Springsecurity 我只是传递用户名和密码，但创建的会话仍然是以前的用户或当前已注册的任何其他用户！

1）我如何为使用 Spring Security 以来登录的用户创建会话

```
 def user=User.findByUserName(params.username) 
```

也导致了同样的问题

2）即使不同的用户已经登录，我如何终止会话以使相同的会话不在进行中

任何帮助都将不胜感激......因为我是 Grails 的新手......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:43:33.093

如果您使用 Spring Security 插件，则无需使用会话或手动跟踪用户。需要时，您可以通过`SpringSecurityService`（[请参阅文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.2%20SpringSecurityService)）访问用户详细信息，例如：

```
class MyController() {

  SpringSecurityService springSecurityService

  def me() {    
     render model: [user: springSecurityService.currentUser]
  }
} 
```

# sql - SQL Server 是否有“内存中”设置？

> ID：10394345
> 
> 赞同：1
> 
> 时间：2012-05-01T06:27:04.137
> 
> 标签：sql, sql-server, unit-testing, in-memory

我很好奇 SQL Server 是否可以允许创建内存数据库。

目前我正在研究单元测试/集成测试一些连接到 SQL Server 的数据层代码。

过去，我利用 SQLite 对这个概念的支持，发现它非常宝贵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:20:49.507

您可以在服务器上安装 SSD 驱动器或 ramdisk，然后在该卷上放置常规数据库？

否则，没有。

我没有提到表变量，因为它们只是部分保存在内存中，对于您的要求来说可能太短暂了。

# qt - 样式不适用于 QItemDelegate

> ID：10394347
> 
> 赞同：3
> 
> 时间：2012-05-01T06:27:12.080
> 
> 标签：qt, styles, pyqt4, qtreeview

我有一个 QTreeview，我使用了这个样式表

```
QTreeView#treeView::item:selected:active
{
    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1, stop: 0 #6ea1f1, stop: 1 #567dbc);
}
QTreeView#treeView::item:hover
{
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #e7effd, stop:1 #cbdaf1);
    border: 1px solid #bfcde4;
}
QTreeView#treeView::item:has-children
{
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #cccccc, stop:1 #aaaaaa);
    border: 1px solid #777777;
    border-left: 0;
    border-right: 0;
    font-weight: bold;
} 
```

它工作正常。但是我用

```
self.treeView.setItemDelegate(GenericDelegate()) 
```

其中 GenericDelegate 定义如下

```
class GenericDelegate(QItemDelegate):

    def _init_(self, parent=None):
        super(GenericDelegate, self)._init_(parent)

    def createEditor(self, parent, option, index): 
        if index.row()==1:
            cb = QtGui.QComboBox(parent)
            cb.addItems('A')
            cb.addItems('B')
            return cb 
```

我的风格已经不行了！
我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:36:44.787

我应该使用

```
QStyledItemDelegate 
```

代替

```
QItemDelegate 
```

现在可以了！

# php - PHP 语法错误？

> ID：10394353
> 
> 赞同：1
> 
> 时间：2012-05-01T06:28:10.590
> 
> 标签：php

我编写了一个不错的脚本，但我不断得到

```
Error on line 29: Parse error, unexpected T_IF(if) 
```

我试过调试代码，浪费了很多时间。但是什么都没有，出来了。

这是我的代码。

```
<?php

  include("geoip.inc");
$ip=$_SERVER['REMOTE_ADDR'];
$gi = geoip_open("GeoIP.dat",GEOIP_STANDARD);

$country_code = geoip_country_code_by_addr($gi, "$ip");
$referrer=$_SERVER['HTTP_REFERER'];
// Country name is not used so commented
// Get Country Name based on source IP
//$country = geoip_country_name_by_addr($gi, "$ip");
$real=0;
geoip_close($gi);

if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), "googlebot")) {
    $real = 1;  
}
else {
                if ($_COOKIE['iwashere'] != "yes")  {
                setcookie("iwashere", "yes", time()+315360000); 
                            if ($country_code="IN") {
                                    if(preg_match('/google/i', $referrer)) {
                                    $key = "g17x9erm28n7cgifddssfqhgorjf3e"; // Account API Key
                                    $ip = $_SERVER['REMOTE_ADDR']; // IP to Lookup

                                    $result = file_get_contents('http://www.ipqualityscore.com/api/ip_lookup.php?KEY='.$key.'&IP='.$ip);
                                    $real=$result
//$result will be equal to 1 for detected proxies & vpns or equal to 0 for clean IP's
                                            {if($real==0)
                                            {setcookie("testcookie", "testvalue");  
                                                        if( isset( $_COOKIE['testcookie'] ) ) {
                                                                if (isset($_POST['jstest'])) {
                                                                    $nojs = FALSE;
                                                                    } else {
  // create a hidden form and submit it with javascript
                                                                    echo '<form name="jsform" id="jsform" method="post" style="display:none">';
                                                                    echo '<input name="jstest" type="text" value="true" />';
                                                                    echo '<script language="javascript">';
                                                                    echo 'document.jsform.submit();';
                                                                    echo '</script>';
                                                                    echo '</form>';
  // the variable below would be set only if the form wasn't submitted, hence JS is disabled
                                                                    $nojs = TRUE;
    }
                                                                                if ($nojs){
    $real=1;
 }

}
else    
$real=1;        
}
else
$real=1;

        } else 
            $real = 1;

    }
 else {
    $real = 1;
}
          }  }

if ($real==1) {
    include_once('Biggenius1.htm');

}

?> 
```

如果在里面。请给我建议，关于如何避免这些错误。还有其他方法可以用多个嵌套的 if 语句编写这种复杂的脚本吗？

**请发布完整的代码：**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:30:49.017

以下是我发现的几个错误：

1.  `if ($country_code="IN")`：这是一个赋值而不是比较，总是返回true
2.  `$real=$result``;`:最后缺少终止符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:32:29.797

第 29行应以`$real=$result`分号结尾，下一行`{if($real==0)`应为`if($real==0){`.

错误消息是您的朋友，它建议您查看第 29 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:32:31.140

您在 if 条件之前放置了一个大括号 //$result 对于检测到的代理和 vpns 将等于 1 或对于干净 IP 的 {if($real==0) 等于 0

删除它然后你的错误将被删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:34:01.013

通过阅读您的代码，似乎我能找到的唯一错误是：

```
{if($real==0) 
```

和：

```
$real=$result 
```

应该改成：

```
if($real==0){ 
```

和：

```
$real=$result; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T06:35:25.263

试试这个

```
$real = 0;
geoip_close($gi);

if (strstr(strtolower($_SERVER['HTTP_USER_AGENT']), "googlebot")) {
    $real = 1;
} else {
    if ($_COOKIE['iwashere'] != "yes") {
        setcookie("iwashere", "yes", time() + 315360000);
        if ($country_code = "IN") {
            if (preg_match('/google/i', $referrer)) {
                $key = "g17x9erm28n7cgifddssfqhgorjf3e"; // Account API Key
                $ip = $_SERVER['REMOTE_ADDR']; // IP to Lookup

                $result = file_get_contents('http://www.ipqualityscore.com/api/ip_lookup.php?KEY=' . $key . '&IP=' . $ip);
                $real = $result;
//$result will be equal to 1 for detected proxies & vpns or equal to 0 for clean IP's {
                    if ($real == 0) {
                        setcookie("testcookie", "testvalue");
                        if (isset($_COOKIE['testcookie'])) {
                            if (isset($_POST['jstest'])) {
                                $nojs = FALSE;
                            } else {

                            }
                            // create a hidden form and submit it with javascript
                            echo '<form name="jsform" id="jsform" method="post" style="display:none">';
                            echo '<input name="jstest" type="text" value="true" />';
                            echo '<script language="javascript">';
                            echo 'document.jsform.submit();';
                            echo '</script>';
                            echo '</form>';
                            // the variable below would be set only if the form wasn't submitted, hence JS is disabled
                            $nojs = TRUE;
                        }
                        if ($nojs) {
                            $real = 1;
                        }
                    }
                    else
                        $real = 1;
                }
                else
                $real = 1;
            } else
                $real = 1;
        }
        else {
            $real = 1;
        }

}

if ($real == 1) {
    include_once('Biggenius1.htm');
} 
```

# jquery - 将 jQuery .click() 应用于 Ajax 生成的 HTML

> ID：10394354
> 
> 赞同：4
> 
> 时间：2012-05-01T06:28:11.667
> 
> 标签：jquery, ajax, event-handling

我正在使用 jQuery 来管理我正在编码的应用程序评论上的“编辑”按钮。在我的`document.ready`，我有：

```
$('.edit-button').click(function(){
// Code to trigger the editing interface for parent comment
}); 
```

我还使用 jQuery 来显示新发布的评论而不刷新页面。在相关`$.ajax()`函数中，我使用`$.before(data)`. 问题是，`.edit-button`里面的 s`data`没有上述`$.click()`适用于他们，因为那发生在`document.ready`. 所以我点击它们，没有任何反应。

我已经尝试过让 Ajax 函数重新包含我调用的 .js 文件的（非常丑陋的）解决方案`document.ready`。这行得通，除了它重新应用`.click()`到每一个`.edit-button`，所以他们打开编辑界面两次（甚至三次）。

那么，我怎样才能重新申请`$.click()`s from `document.ready`？最好不必将我的`document.ready`函数复制到另一个 javascript 文件中，以防我以后修改它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T06:58:38.260

取决于您的 jQuery 版本，有以下解决方案：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

显然最后一个`.on()`是最好的选择。[更多信息](http://api.jquery.com/on/)。

但关于`.bind()`：

从 jQuery 1.7 开始，该`.on()`方法是将事件处理程序附加到文档的首选方法。对于早期版本，该`.bind()`方法用于将事件处理程序直接附加到元素。处理程序附加到 jQuery 对象中当前选定的元素，因此这些**元素必须存在于调用发生的**点`.bind()`。[参考](http://api.jquery.com/bind/)

对于您的问题，答案是这样的：

```
$('.edit-button').on("click",function(){  }) 
```

或者

```
$(document).on("click", ".edit-button", function(){  }); 
```

**注意**：`.live()`不再推荐使用该方法，因为更高版本的 jQuery 提供了没有缺点的更好方法。[更多信息](http://api.jquery.com/live/)

**`.live()`jQuery 1.9 升级后删除了**更新****

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T06:37:04.840

试试这个

```
$('body').on("click", ".edit-button", function(){

}) 
```

你也许可以用更有针对性的东西来改变身体选择器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T06:45:38.163

由于您使用的是 AJAX，因此您需要使用“live()”API。

```
$('.edit-button').live("click", function(){
// Code to trigger the editing interface for parent comment
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:43:23.210

采用

```
$('.edit-button').bind('click', function() {
// Code to trigger the editing interface for parent comment
}); 
```

或者在评论发布后在您的 ajax 成功函数中添加它：

```
$.ajax({
    url: "some url",
    // ...
    success: function (data) {
        //comment posted successfully
        $('.edit-button').unbind("click");
        $('.edit-button').bind("click", editButtonClickHandler);
});

function editButtonClickHandler () {
    //.. handle click
} 
```**

# python - 如何从python中的两个列表生成嵌套列表

> ID：10394358
> 
> 赞同：1
> 
> 时间：2012-05-01T06:28:55.480
> 
> 标签：python, list, tuples, nested-lists

我是 python 的新手，我有两个列表：

```
l1 = ['a','b','c','d']
l2 = ['new'] 
```

我想得到这样的新列表

```
l3 = [('a','new'),('b','new'),('c','new'),('d','new')] 
```

结合这两个列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:34:28.473

```
>>> from itertools import product
>>> l1 = ['a','b','c','d']
>>> l2 = ['new']
>>> list(product(l1,l2))
[('a', 'new'), ('b', 'new'), ('c', 'new'), ('d', 'new')] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T06:42:06.137

如果`l2`总是只有一个元素，则无需使事情过于复杂

```
l3 = [(x, l2[0]) for x in l1] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T06:35:27.127

请参阅[itertools 文档](http://docs.python.org/library/itertools.html#itertools.product)。

特别是，将 product 用于笛卡尔积：

```
from itertools import product:
l1 = ['a','b','c','d']
l2 = ['new']
# Cast to list for l3 to be a list since product returns a generator
l3 = list(product(l1, l2)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T06:31:03.577

```
>>> from itertools import repeat
>>> l1 = ['a','b','c','d']
>>> l2 = ['new']
>>> zip(l1,repeat(*l2))
[('a', 'new'), ('b', 'new'), ('c', 'new'), ('d', 'new')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T09:23:38.240

您可以简单地使用列表推导而无需任何功能：

l3 = [(x, y) for x in l1 for y in l2]

# java - WSO2 - 在 WSAS 上配置 JPA

> ID：10394360
> 
> 赞同：2
> 
> 时间：2012-05-01T06:29:05.453
> 
> 标签：java, wso2

我们正在开发基于 WSO2 Application Server 的项目 4.2.1。我们需要与 MySQL 数据库通信的 web 服务。我们尝试使用的技术是 JPA，Hibernate。

我们让 web 服务运行，直接连接到数据库（使用 JDBC 连接）。给我们带来问题的是 JPA 配置。

我们认为 JPA 的 persistence.xml 应该在 src/main/resources/META-INF/ 目录中。Carbon-Studio create==>CarbonApplicationProject 只创建 src/main/java

当我们尝试创建 src/main/resources/META-INF 然后尝试创建 aar 文件时，它不包含 resources/META-INF/persistence.xml

接下来我们将persistence.xml 放入OurPackage/artifacts/services/axis2/G3DataTest/resources/META-INF 现在persistence.xml 被包含在aar 文件中。但是，在将文件部署到 WSAS 时，我们仍然会收到错误消息。

我们收到一个错误：错误 {org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver} - org/hibernate/MappingNotFoundException java.lang.NoClassDefFoundError: org/hibernate/MappingNotFoundException at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.爪哇：124）

访问 persistence.xml 之前的 Classpath 显示：.....;D:\Indu\wso2as-4.1.2\repository\components\lib\hibernate-3.2.7.ga.jar;D:\Indu\wso2as- 4.1.2\repository\components\lib\hibernate-commons-annotations-4.0.1.Final.jar;D:\Indu\wso2as-4.1.2\repository\components\lib\hibernate-core-4.1.2.Final .jar;D:\Indu\wso2as-4.1.2\repository\components\lib\hibernate-entitymanager-4.1.2.Final.jar;D:\Indu\wso2as-4.1.2\repository\components\lib\hibernate -jpa-2.0-api-1.0.1.Final.jar;D:\Indu\wso2as-4.1.2\repository\components\lib\httpcore-4.0.jar;....

我们如何将这个 persistence.xml 放在 resources/META-INF/ dir 中？有与此相关的任何文件吗？或者我们可以联系任何资源来解决我们的问题？

发生错误的 Java 代码：

EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("myPU");

持久性.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="1.0">
  <persistence-unit name="myPU"  transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.indu.dao.Tracks</class>
    <properties>
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://172.24.1.68:3307/SPORTECHRI"/>
        <property name="username" value="root"/>
        <property name="password" value="root"/>
    </properties>
  </persistence-unit>
</persistence> 
```

任何帮助将不胜感激。-印度

# java - 接口中的方法签名异常

> ID：10394361
> 
> 赞同：0
> 
> 时间：2012-05-01T06:29:12.510
> 
> 标签：java, exception, interface, exception-handling

我有以下界面：

```
public interface ICalculationRule {
    public void calculate(EventBag eventBag);
} 
```

我想提供一些方法来表明计算是否失败，**什么更正确**？

*   添加`throws Exception`到方法签名
*   制作`calculate`方法 `boolean`（`true`=成功，`false`-失败）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:39:39.877

这一切都取决于

```
 " Is the error is expected or unexpected ? " 
```

*   将抛出异常添加到方法签名

如果在计算过程中发生意外情况。假设抛出异常。如果它应该在使用中处理 try catch 并且如果你的方法的调用者应该对此做出反应。然后添加抛出异常。

*   使计算方法布尔值（真=成功，假 - 失败）

如果 Result NO 是预期会发生的事情，并且如果错误条件没有那么重要，并且调用者只是想知道成功或失败的结果。去吧。

也不要去通用异常，但要具体。

我也可以考虑让代表通知呼叫者成功或失败。

```
public interface Response {
   public void onSuccess();
   public void onFailure(Exception exception);  
} 
```

我可以通过调用者和计算方法调用来寻找它的实现对象。并且在成功或失败时可以调用各自的委托，例如

```
public void calculation(Response response) { 
    Exception e = null;

    try {
        // Do something here
    } catch (IOException ioe) {
        e = ioe;
    }

    if(e == null) {
        response.onSuccess();
    } else {
        response.onFailure(e);
    }
} 
```

希望这能引导你走向正确的方向:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:33:38.317

异常的优点是关心更多信息，而不仅仅是简单的布尔答案。如果您只需要是/否答案 - 返回布尔值，因为它会使代码更加简洁，但如果您需要更多细节，则会抛出异常。

但请确保有自己的例外而不是标准`java.lang.Exception`。界面总是很糟糕，而且是双重糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:27:32.587

一般来说，我们不建议使用异常来处理逻辑过程。异常应该被视为真正的异常，并且仅在必须时发生。要抛出异常，它绝对比仅仅返回一个值花费更多的时间，而且，我相信正确标记一个有意义的返回值对于代码阅读器和采用者将来更有意义。但是，这是不可避免的，如果某个地方通过返回值指示难以处理，您可以使用抛出异常。

对于您的情况，以下选项应该是正确的选择。

```
 make calculate method boolean (true=success, false - failure) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:42:14.157

1.  您可以尝试抛出一个自定义的异常，它继承自`RuntimeException`错误和*结果*，因此接口的客户端不必明确。这有助于避免不需要的 try catch 块

2.  您可以尝试发送一个捕获成功和失败的 Result 对象，而不是布尔响应，从而获得一个容器来在调用者和被调用者之间传递信息

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-01T06:41:39.643

重要的是要理解声明一个`Exception`可能会被抛出，表示它**必须**由客户端代码处理。这意味着您**作为方法的作者**，不能让它通过。

另一方面，如果计算失败不是那么严重，可能是客户端代码的问题，也可能不是，您可以`boolean`按照您的说明返回，让客户端代码决定是否应该应用特殊处理。如果您认为客户端需要的信息不仅仅是 a `boolean`，您总是可以返回某种`CalculationResult`对象。

# android - 如何使用 ANT 从另一个项目中引用 Android 项目

> ID：10394362
> 
> 赞同：0
> 
> 时间：2012-05-01T06:29:23.063
> 
> 标签：android, ant

我有 2 个项目说 P1 和 P2，P2 指的是 P1。

当我使用 eclipse 创建我的项目时，我可以通过简单地将 P2 添加到 P2->Properties->Java Build Path->Projects 来从 P2 引用 P1。它编译并运行良好。

现在我正在尝试使用 ANT 构建项目，但我无法找到如何在 P2 中添加对 P1 的引用。

我发现的唯一方法是将“android.library.reference”添加到 P1。但由于 P1 不是一个库，而是一个 android 应用程序，所以这是行不通的。

如何将 P1 的项目引用添加到 P2 中？由于这在 Eclipse 中运行良好，我相信应该有一种方法可以用 ANT 来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:35:15.173

如果不是，将 P1 用作库有点奇怪。

但如果你想调用 P1 build.xml，只需调用 antcall 即可：[http](http://ant.apache.org/manual/Tasks/antcall.html) ://ant.apache.org/manual/Tasks/antcall.html 。因此，您可以在 P2 之前编译 P1。

如果您希望 P1 类在 P2 中可用，请将源或生成的 P1 jar 文件添加到 P2 类路径编译目标。

我必须说，android 工具的变化非常频繁而且非常多，而 ant 脚本的变化比其他的更频繁。因此，我鼓励你有一个更标准的构建，维护它已经足够困难了：把 P1 变成一个库。

使您的构建过程与 google 工具更改分离的一个很好的替代方法是使用 maven 和[maven-android-plugin](http://code.google.com/p/maven-android-plugin/)。它更先进，依赖于 maven 的依赖关系，并将为 jenkins 上的连续 IC 提供更容易的移动。

# javascript - 通过查询将文本插入文本区域

> ID：10394364
> 
> 赞同：0
> 
> 时间：2012-05-01T06:29:29.477
> 
> 标签：javascript, jquery, html, dom, nicedit

我正在尝试`<textarea>`通过查询插入一些文本，但它没有按我预期的那样工作。我希望颜色代码应该插入`textarea`但`textarea`保持空白。

### HTML 代码

```
<p id="niceedit">
    <script src="js/create/text_editor/nicEdit.js" type="text/javascript"></script>
    <script type="text/javascript">

    bkLib.onDomLoaded(function() {
          new nicEditor({height : 100}).panelInstance('area5');
    });
    </script>

    <textarea id="area5" ></textarea>
</p> 
```

### jQuery代码

```
$(document).ready(function(){
    $('.simple_color').simpleColor();
    $('input#alert_button').click( function() {
        var currentlySelectedColor = $('input.simple_color')[0].value;

        $('#area5').val(currentlySelectedColor);//HERE IS THE CODE

        $.post("defualt_templates/T1/Class_File/template_editor.php", { bgcolor: currentlySelectedColor },
            function(data) {
                refreshIFrame();
        });

    });

}); 
```

* * *

### 问题

我究竟做错了什么？

* * *

### 引用外部库

[NicEdit 参考](http://nicedit.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:46:20.890

尝试这个

```
$('#area5').text(currentlySelectedColor); 
```

而不是这个

```
$('#area5').val(currentlySelectedColor); 
```

或者，NicEditor 内部有一个方法可以找到编辑器，然后获取或设置内容。

参考：[http ://wiki.nicedit.com/w/page/521/Javascript%20API](http://wiki.nicedit.com/w/page/521/Javascript%20API)

# android - 如何从 .vcf 文件中逐一读取联系人记录

> ID：10394372
> 
> 赞同：1
> 
> 时间：2012-05-01T06:31:11.040
> 
> 标签：android, contacts, vcf-vcard

在我的应用程序中，我想读取存储在我的 SD 卡中的 .vcf 文件，然后我想将该联系人存储在我的电话簿中。

# ios - 如何显示倾斜的图像视图？

> ID：10394376
> 
> 赞同：0
> 
> 时间：2012-05-01T06:31:40.410
> 
> 标签：ios, uiimageview, transformation

我想展示我的`image view`一些`arbitrary degrees tilted`而不是`just simple straight`如何将其转换为倾斜？请帮我。

**编辑**

这是目前的图像视图 ![在此处输入图像描述](../Images/bbb61fc1c12fa7c3175e04bdd6825d6a.png)

我想要这样 ![只有带有白色边框的图像框会倾斜或倾斜](../Images/f4f3760707fbb9d70ef4caaab430f627.png)

**只有白色边框的图像视图我想倾斜（倾斜）不平铺**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:17:01.690

只需设置`imageView`s`transform`属性：

```
// 10 degrees
imageView.transform = CGAffineTransformMakeRotation(M_PI / 180 * 10); 
```

# openssl - 如何从批处理文件中终止 openssl 握手？

> ID：10394378
> 
> 赞同：2
> 
> 时间：2012-05-01T06:31:51.867
> 
> 标签：openssl

我编写了一个 PHP 程序来执行一个包含 openssl 命令的批处理文件：

```
openssl s_client -showcerts -connect google.com:443 >test.cert 
```

获取这个批处理文件的输出，即 test.cert，我运行另一个包含以下命令的批处理文件：

```
openssl x509 -noout -in test.cert -dates >date.txt
openssl x509 -noout -in test.cert -issuer >issuer.txt 
```

但问题是第一个批处理文件没有终止，因为 cmd 正在等待握手完成。所以，第二个批处理文件没有运行。如何终止第一个批处理文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:55:51.313

`openssl s_client`等待输入，因此您必须终止连接而不是握手。最简单的方法是改变

```
 openssl s_client -showcert -connect google.com:443 > test.cert 
```

至

```
 openssl s_client -showcert -connect google.com:443 < /dev/null > test.cert 
```

这应该在连接建立后立即关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T03:30:11.873

```
> echo 'x' |  openssl s_client -showcert -connect google.com:443 > test.cert 
```

# c++ - C++ 类型转换 int * 到类

> ID：10394379
> 
> 赞同：4
> 
> 时间：2012-05-01T06:32:00.717
> 
> 标签：c++, casting

> **可能重复：**
> [常规强制转换、静态强制转换和动态强制转换](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)
> [未定义、未指定和实现定义的行为](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)

我面临一个奇怪的问题。在下面的代码片段中，我定义了一个类

```
 class NewClass
   {
      public:
         void Test()
         {
             cout<<"NewClass Test"<<endl;
         }
   }; 
```

在我的 main() 方法中，我写道：

```
 void main()
        {
           int *ptr = new int();
           NewClass *n = ((NewClass *)ptr);
           n->Test();
        } 
```

它显示“NewClass 测试”。我不明白如何对*任何*指向 NewClass 的指针进行类型转换并且仍然可以正常工作。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:33:28.247

那是工作中的静态调度。`this`在这种情况下确实是不必要的（例如，在 内不使用或依赖它`NewClass::Test()`）。

强制`NewClass *n = ((NewClass *)ptr);`转换是按地址进行类型转换，并且在此上下文中没有类型检查。换句话说，您没有在`NewClass`任何地方创建新实例，您只是将位于指定地址的内存`int*`视为`NewClass*`. 这是一个危险的转换，应该避免。如果您需要通过丢失类型安全性的地址（例如`void*`）来汇集对象，请始终确保两端都知道发送和接收的内容。幸运的是，擦除类型安全变得越来越少。

结果是不确定的，但在大多数情况下，您应该预料到会产生不良的副作用，并且应该不惜一切代价避免重新解释数据。

在这种情况下，编译器可能会插入结果，因为它知道它们。此外，由于在这种情况下对对象的地址或状态没有实际依赖关系，因此没有出现错误：`Test()`不依赖`this`.

如果您要添加诸如`std::string`s之类的成员`NewClass`并将其打印出来……您可以预期事情会比现在更快地爆发:)

如果危险不明显：这是一种极其危险的转换——由 支持的所有数据`int*`都被重新解释为`NewClass*`，并且它的所有内部存储器和结构（例如 vtables 和魔术 cookie）都被重新解释。您的程序段错误很快就会出现，或者通过读取超出分配（`int*`）的末尾，或者通过将 an`int`视为完全不相关的类型 - 在这种情况下，请考虑具有 vtable 的类的内存布局或数据，例如将一些`std::string`s 添加到`NewClass`，以及读取和写入这些成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:41:56.153

在你开始思考一个复杂的为什么它不应该工作之前，考虑一个简单的场景来帮助你尝试和想象它。

类是一种附加了方法的数据结构。当然，编译器是不同的，因此行为可能被认为是未定义的，但暂时忽略这一点。

你有一个空的数据结构（即没有数据），但仍然有一个附加的方法——Test()。

因此，当您声明指向某事物的指针（由您关心的 int）时，该指针仅指向某些内存。现在你有了一个新的 Int()，因此 ptr 指向的内存是整数大小的。

由于您的类没有数据并且它没有内部结构需要内存中的对象以特定方式（例如虚拟方法）在内存中布局，您可以认为您指向任何东西或实际上什么都没有，因此可以调用你的方法。

创建一个这样的类，看看会发生什么：

```
 class NewClass 
   { 
      private int i;
      public: 
         void Test() 
         { 
             cout<<"NewClass Test i="<< i << endl; 
         } 
   };

    void main() 
    { 
       int *ptr = new int();
       *ptr =  10; 
       NewClass *n = ((NewClass *)ptr); 
       n->Test(); 
    } 
```

看看它打印出来的东西。

如果您理解这一点 - 请尝试阅读您的编译器，了解它是如何布置对象的。这将告诉你很多关于为什么在你的平台上存在这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:36:06.560

这似乎是未定义的行为。但是，您始终可以`reinterpret-cast`在 c++ 中使用 reinterpret_cast 运算符的误用很容易变得不安全。除非所需的转换本质上是低级的，否则您应该使用其他强制转换运算符之一。reinterpret_cast 运算符可用于 char* 到 int* 或 One_class* 到 Unrelated_class* 等转换，这些转换本质上是不安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:38:20.873

您的方法未声明为虚拟方法。这意味着对它的调用完全由编译器解析，就像它是一个非方法函数一样，除了你必须在一个正式的变量上调用它`NewClass`。

您的编译器可能使用[虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)来分派对虚拟方法的调用，如果该方法是虚拟的，您最终可能会用垃圾代替 VMT，然后您会开始崩溃。

也就是说，行为是未定义的，这意味着在任何一种情况下都可能发生任何事情。

# python - 使用 pyes 配置分词器

> ID：10394380
> 
> 赞同：1
> 
> 时间：2012-05-01T06:32:03.007
> 
> 标签：python, elasticsearch, pyes

我正在尝试将我的一个字段配置为使用边缘 ngram 标记器。我正在尝试翻译我发现的以下要点（[https://gist.github.com/1037563](https://gist.github.com/1037563)）：

```
{
    "mappings": {
        "contact": {
            "properties": {
                "twitter": {
                    "type": "object",
                    "properties": {
                        "profile": {
                            "fields": {
                                "profile": {
                                    "type": "string",
                                    "analyzer": "left"
                                },
                                "reverse_profile": {
                                    "type": "string",
                                    "analyzer": "right"
                                }
                            },
                            "type": "multi_field"
                        }
                    }
                }
            }
        }
    },
    "settings": {
        "analysis": {
            "analyzer": {
                "left": {
                    "filter": [
                        "standard",
                        "lowercase",
                        "stop"
                    ],
                    "type": "custom",
                    "tokenizer": "left_tokenizer"
                },
                "right": {
                    "filter": [
                        "standard",
                        "lowercase",
                        "stop"
                    ],
                    "type": "custom",
                    "tokenizer": "right_tokenizer"
                }
            },
            "tokenizer": {
                "left_tokenizer": {
                    "side": "front",
                    "max_gram": 20,
                    "type": "edgeNGram"
                },
                "right_tokenizer": {
                    "side": "back",
                    "max_gram": 20,
                    "type": "edgeNGram"
                }
            }
        }
    }
} 
```

我可以看到 pyes 支持“put_mapping”API，但这似乎将所有内容都包含在“映射”中。我需要能够在“设置”键下传递分析器，但不知道如何去做。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T23:56:41.527

您应该能够将此结构作为 create_index 的第二个参数传递。

# ios - 在更新 iOS 程序时，注册 ID 缺失

> ID：10394389
> 
> 赞同：0
> 
> 时间：2012-05-01T06:32:49.770
> 
> 标签：ios, iphone, renewal

在更新 iOS 开发者计划时，我发现 Apple 生成了一些公司 ID 而不是注册 ID。

自去年以来，我注册为个人，与任何公司无关。

那么，在 Apple Developer Program Enrollment ID 字段下，我必须正确填写我的 Apple 电子邮件 ID 或其他内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:36:51.197

如果您要**续订**开发者许可证，则必须输入与开发者帐户关联的 Apple ID 中的电子邮件地址。Apple 会自动为每个开发者生成一个公司 ID；你不应该担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:50:43.347

使用您的初始注册 ID。无需写下现有的电子邮件 ID 而不是注册 ID

# ruby - 如何使用 Selenium Ruby 从所有打开的窗口中查找所有输入标签并提交按钮？

> ID：10394391
> 
> 赞同：0
> 
> 时间：2012-05-01T06:33:00.670
> 
> 标签：ruby, windows, browser, selenium, input

我想扫描所有打开的浏览器窗口以查找输入标签并提交按钮。我通过从加载的页面中抓取链接打开了所有这些窗口。我的代码如下。

```
require 'rubygems'
require 'selenium-webdriver'
driver = Selenium::WebDriver.for :firefox
page = driver.get " http://testasp.vulnweb.com "
link = Array.new(driver.find_elements(:tag_name, "a"))
link.each do |a|
    a = driver.execute_script("var d=document,a=d.createElement('a');a.target='_blank';a.href=arguments[0];a.innerHTML='.';d.body.appendChild(a);return a", a)
    a.click
end
i = driver.window_handles 
```

我能够获得所有打开的窗口 ID。如何从所有这些打开的浏览器窗口中找到输入元素并提交按钮和表单？ `window_handles`当我尝试时不接受任何论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:56:15.527

要切换到弹出窗口，您可以使用：

```
driver.switch_to().window(handle) 
```

所以可以做这样的事情：

```
#Get all of the window handles
i = driver.window_handles

#Iterate through the popups
#Note that starting at index 1 assuming we do not care about the original window
i[1..i.length].each do |handle|
    #Switch to popup
    driver.switch_to().window(handle)

    #Do whatever processing you want on the popup
    #Example, get the number of input fields
    inputs = driver.find_elements(:tag_name, 'input')
    puts inputs.length

    #Probably want to close the popup   
    driver.close
end

#Switch back to the original window
driver.switch_to().window(i[0])

#Do whatever processing you want on the original window
puts driver.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:48:05.820

I used following code, its helped me to open each link in new tab.

```
@driver.get "http://thiyagarajan.wordpress.com/"
  link = @driver.find_elements(:tag_name, "a")
  link.each do |a|
    a = @driver.execute_script("var d=document,a=d.createElement('a');a.target='_blank';a.href=arguments[0];a.innerHTML='.';d.body.appendChild(a);return a", a)
    a.click
  end 
```

# c# - 在 WPF 中使用 Interaction.Triggers

> ID：10394393
> 
> 赞同：3
> 
> 时间：2012-05-01T06:33:36.720
> 
> 标签：c#, wpf, expression-blend

我一直在尝试将 System.Windows.Interactivity.Interaction 与 MS Expression Blend SDK for .NET 4 中的 WPF 一起使用。问题是我在那里找不到 Interaction.Triggers 附加属性。Interaction 类存在，但我只能看到其中的 4 个成员：Equals、GetBehaviors、GetTriggers、ReferenceEquals。我查看了我项目中对 System.Windows.Interactivity.dll 的引用的属性，发现路径是

> “C:\Program Files (x86)\Microsoft SDKs\Expression\Blend.NETFramework\v4.0\Libraries\System.Windows.Interactivity.dll”

因此，我用 IL Disassеmbler 打开了该路径上的文件，发现 Interaction 类实际上具有 Triggers 附加属性，但该属性被声明为私有！然后我在 Prism SDK 的 \Lib\Desktop 目录中打开了相同的 dll 并在那里发现了相同的情况。这些 dll 的版本是 2.0.20525.0。还有一个带有 System.Windows.Interactivity dll 的 System.Windows.Interactivity.xml 文件。在其中，我发现了有关 TriggersProperty 的以下内容：

> 此属性不公开。这会强制客户端使用 GetTriggers 和 SetTriggers 方法来访问集合，确保集合存在并在使用之前设置。

但是我在那里没有找到任何 SetTriggers 方法。顺便说一句，Silverlight 的交互将 TriggersProperty 作为公共成员。

我已经看到了许多将 Interaction.Triggers 与 WPF 结合使用的示例，并且我认为应该没有任何问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T22:58:53.900

那么肯定有一些奇怪的事情发生了。这是我发现的：

*   使用 Prism 4.1 中的 System.Windows.Interactivity.dll，Interaction.TriggersProperty在 VS2010 的对象浏览器中显示为**公共字段。**
*   同一个程序集显示 TriggersProperty 是 ILDASM 中的私有字段。
*   使用 Blend SDK for .NET 4 中的 System.Windows.Interactivity.dll，TriggersProperty 不会显示在对象浏览器中。
*   同一个程序集显示 TriggersProperty 是 ILDASM 中的私有字段。

我没有解释。但是，我可以说，如果您只是`<i:Interaction.Triggers>`在 WPF XAML 中编写并引用 Prism 4.1 中的 System.Windows.Interactivity.dll，它就会按预期工作。

我尝试检查其他一些框架类以查看它是否是 ILDASM 中的错误，但所有这些都带有正确的访问修饰符。所以我不知道为什么 Prism 版本有效，但它似乎就是这样做的。我没有尝试过直接的 Blend SDK 版本，因为我不需要它。

编辑：更多信息：使用 Resharper 进行挖掘，我发现 Interaction.TriggersProperty 没有在任何地方使用。但是，Interaction.GetTriggers 在我的 WPF 代码中使用。所以我敢打赌，有一些 XAML 绑定反射魔法可以让这一切正常工作。我说“魔法”是因为我不明白。显然，Blend SDK 人员认为您应该只使用 XAML 中的 Behaviors 和 Triggers 附加属性，但 Prism 人员认为您也应该能够从代码中使用它。

# macos - 使用 VirtualBox 运行 Haiku r3alpha1

> ID：10394396
> 
> 赞同：1
> 
> 时间：2012-05-01T06:33:45.317
> 
> 标签：macos, osx-lion, virtualbox, haiku

我正在尝试在 Mac OS X 10.7.3 上使用 Virtual Box (4.1.14 r77440) 运行 Haiku r3alpha1 vmdk。当我启动虚拟机时，我看到的只是一排图标，操作系统上没有任何活动。有谁知道我怎样才能让它工作？

这是我的设置：

通用名称：

Haiku_r1alpha3 操作系统类型：

其他/未知

系统基本内存：

512 MB 处理器：

1 执行上限：

100% 启动顺序：

硬盘、CD/DVD-ROM VT-x/AMD-V：

启用嵌套分页：

启用

显示显存：

64 MB 3D 加速：

启用 2D 视频加速：

禁用远程桌面服务器：

已禁用

存储 IDE 控制器

IDE 初级大师：

haiku-r1alpha3.vmdk (Normal, 689.06 MB) IDE Primary Slave:

blank-bfs-2048mb.vmdk（普通，2.00 GB）IDE 二级主控（CD/DVD）：

空的

音频主机驱动程序：

核心音频控制器：

ICH AC97

网络适​​配器 1：

PCnet-FAST III (NAT)

串行端口已禁用

USB 设备过滤器：

0（0 活动）

共享文件夹 无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:51:08.347

启用串行端口，或使用来自[http://haiku-files.org/haiku/development的夜间映像](http://haiku-files.org/haiku/development)

# android - 是否可以本地化 CalendarView 或 DatePicker？

> ID：10394397
> 
> 赞同：5
> 
> 时间：2012-05-01T06:33:48.700
> 
> 标签：android, localization, calendar, datepicker, calendarview

我用户的日历是波斯日历。我有一个算法来更改西方日历和波斯日历之间的日期和时间。我想为我的用户使用 CalendarView 或 DatePicker 来选择日期。是否可以本地化 CalendarView 和 DatePicker 以支持我的本地日历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:37:15.657

对的，这是可能的。但是你不应该使用默认的日历视图。您应该将自定义视图与 Google 日历 Api 一起使用。如果您使用默认日历视图，数字不会改变，内容也不会改变，对于更改内容，您应该使用 translate.google.com api 来更改内容本地化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:11:37.623

使用`CalendarView`当前语言环境来确定日期的显示方式。它还实现`onConfigurationChanged`了侦听当前语言环境的更改并更新日历。但它似乎不支持您想要指定要使用的不同语言环境的场景（例如，用户的当前语言环境是波斯语，而您想用西方语言环境显示日历视图）。

不幸的是，setCurrentLocale 方法是私有的，因此即使您将 CalendarView 子类化，您也无法更改使用的语言环境。

您可以查看 CalendarView 的[源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/CalendarView.java)。

# jquery-ui - jQueryUI 模板：它有效吗，它会有效吗？

> ID：10394399
> 
> 赞同：1
> 
> 时间：2012-05-01T06:34:06.633
> 
> 标签：jquery-ui

我需要修改[jQueryUI Tabs](http://jqueryui.com/demos/tabs/)发出的代码。该`tabTemplate`选项似乎非常适合该目的。

我修改了我的代码以包含自定义样式：

```
tabControl = $("#tabs");
tabControl.tabs({
    tabTemplate: '<li><a href="#{href}" class="myClass"><span>#{label}</span></a></li>',
}); 
```

但是，我发现发出的代码没有改变。然后，我看到了这张票

[http://bugs.jqueryui.com/ticket/7139](http://bugs.jqueryui.com/ticket/7139)

声称模板总体上正在贬值（截至 12 个月前）。

那么......为什么 tabTemplate 不起作用，这个解决方案是否面向未来，如果没有，我怎样才能达到类似的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:44:10.000

jQuery UI 确实不赞成使用模板选项（显然是因为它们的使用可能导致与库的其余部分的样式不一致）。

根据您链接到的错误，该`tabTemplate`选项将在 jQuery UI 1.9 中删除，因此，为了安全起见，您应该避免在当前项目中使用它。

另一种方法是通过 DOM 导航添加类，如下所示：

```
$("#tabs").tabs({
    // options...
}).tabs("widget").find(".ui-tabs-nav a").addClass("myClass"); 
```

这种方法现在有效，并将在可预见的将来继续有效。

# asp.net-mvc - MvcContrib.MVC3-ci 和 Mvc.Contrib NuGet 包有什么区别？

> ID：10394400
> 
> 赞同：7
> 
> 时间：2012-05-01T06:34:08.347
> 
> 标签：asp.net-mvc, asp.net-mvc-3, versioning, nuget-package

MvcContrib.MVC3-ci 和 Mvc.Contrib NuGet 包有什么区别？

我看到他们有不同的依赖关系-ci 有更多的下载。我假设我想要 -ci 用于我的 MVC3 项目，但我该如何解决呢？-ci 是什么意思？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T08:38:32.033

据我所知，`MVCContrib.MVC3-ci`是 MVC3 包的最新版本，`MvcContrib`也是 MVC2 包的旧名称。

如果您访问[codeplex 站点](http://mvccontrib.codeplex.com/releases)，您将看到 MVC2（v 2.0.95.0 和 v2.0.96.0）的发布历史，然后看到 MVC3（v3.0.51.0）的此包的最终版本。此 MVC3 版本于 2011 年 1 月 16 日发布。

如果您随后转到[nuget 库](https://packages.nuget.org/packages/MvcContrib.Mvc3-ci/3.0.98.0)，您将在发布历史记录中看到发布于 2011 年 1 月 15 日开始并一直持续到今天。

我假设他们在以新名称将其移至 nuget 站点之前，已在 codeplex 站点上发布了该软件包的最终版本。

[此处](http://groups.google.com/group/mvccontrib-discuss/browse_thread/thread/935bdb64995dcecb)有一个链接指出该`MvcContrib.WatiN`软件包因此被重命名为`MvcContrib.Mvc3.WatiN-ci`，因此我只能假设`MvcContrib`如果它遵循相同的命名约定，它对于该软件包是相同的。

注意：此链接还指出`ci`名称中的 代表持续集成，因为包是使用他们的持续集成服务器构建的。

# return - 如何将值从表的数据源返回到 iReport 中的主报表？

> ID：10394401
> 
> 赞同：12
> 
> 时间：2012-05-01T06:34:13.523
> 
> 标签：return, jasper-reports, ireport

我的 iReport 中有一个表，它自然有它的数据集，我有一个变量，它在表的数据集中定义和初始化，返回一个值（肯定在表的范围内，而不是在表之外），我想在我的包含表格的主报告。

我该怎么做或任何替代方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-20T00:31:32.723

使用从组件返回值的正确方法（jasper 报告 v.5/v.6）`subDataset`是使用变量，在主报告和`subDataset`.

**示例**（将表的记录数返回到主报表）

1.  在主报告中定义一个变量

    ```
    <variable name="TABLE_COUNT" class="java.lang.Integer" resetType="None">
       <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable> 
    ```

2.  在`subdataset`定义一个变量（例如，将使用一个内置变量`$V{REPORT_COUNT}`）。

3.  在`datasetRun`指示哪个`subDataset`变量 ( `fromVariable`) 应该返回到哪个主报表变量 ( `toVariable`)

    ```
    <datasetRun subDataset="tableData" uuid="fa5df3de-f4c5-4bfc-8274-bd064e8b81e6">
       <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
       <returnValue fromVariable="REPORT_COUNT" toVariable="TABLE_COUNT"/>
    </datasetRun> 
    ```

`TABLE_COUNT`然后可以在主报告中使用该变量，只需记住设置正确的[评估时间](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/type/EvaluationTimeEnum.html)

**显示值**（在主报告中）

```
<textField evaluationTime="Report">
    <reportElement x="0" y="0" width="100" height="20" uuid="d67ddb3e-b0cc-4fae-9e05-f40eb0f7e059"/>
    <textFieldExpression><![CDATA[$V{TABLE_COUNT}]]></textFieldExpression>
</textField> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-19T14:26:29.657

如果您想从表数据集中获取一些数据，您实际上可以这样做。我发现了一个肮脏的技巧来实现这一点。

1.  `variableMapName`在主报告中创建类型的VARIABLE`java.util.Map`并使用表达式对其进行初始化`new java.util.HashMap()`

2.  在表数据集中创建`parameterMapName`类型的PARAMETER`java.util.Map`

3.  **使用“编辑表数据源 -> 参数 -> 添加 -> $P{parameterMapName} = $V{variableMapName}”将**数据集 PARAMETER 与主报表中的变量链接（右键单击主报表模板中的表）

4.  在表数据源中创建`putResult`类型变量。`java.lang.String`此变量的表达式将如下所示

`$P{parameterMapName}.put("KEY", $F{fieldYouWantReturn}) + $P{parameterMapName}.put("KEY2", $F{otherFieldYouWantReturn})`

现在您可以使用主报告中的表数据源中的数据了`$V{variableMapName}.get("KEY")`

这确实是一个肮脏的黑客，但有时你没有其他方法可以做某事。谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:03:41.103

这听起来很合理......但我不确定这是否可能。这可能是一个有用的增强请求。

另一种方法是使用子报表。表中的任何可能在子报表中都是可能的。子报表有返回值，这将让你传回你需要的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:37:34.860

您将无法将表数据集中的变量返回到主报表，反之亦然。替代方案可以按照 mdahlman 的建议。请改用子报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T10:00:26.693

现在您可以将值从表的数据集中返回到主报表。

在`jasper studio 6.0.1,I`找到一个名为 dataset of table 的属性时，它设置了返回值。但是进入集合，我发现“配置返回值”的形式是错误的，jasper studio 错误的“从变量到变量”，stuio 将两个变量颠倒过来。“from variable”是表的局部变量，“to value”是主要报表变量。您必须在 source 中手动编辑，并删除`"incrementerFactoryClass=""".`

我测试，没问题。返回值打印在主报告上。

接下来是我的 jrxml 的一部分。

```
<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="workscore" uuid="307278bc-db98-4de2-9b50-dea5dc69b496">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<returnValue fromVariable="returnscore" toVariable="workscore"/>
					</datasetRun>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-29T06:28:07.527

对于地图类型，其余任何类型的从表集返回到主报告的值都是不可能的。

尽管可以使用子报告，因为有返回值的选项。如果可能，请尝试使用子报告代替表。

# vim - MacVim 中的宏问题

> ID：10394404
> 
> 赞同：1
> 
> 时间：2012-05-01T06:34:40.553
> 
> 标签：vim, macros, macvim

**忽略这个愚蠢的问题**

万一有人想知道。是复制+粘贴阻止了它的工作。然后你必须使用像[Marvin](http://www.vim.org/scripts/script.php?script_id=2154)这样的插件来永久保存它。我的错。

* * *

我需要在 MacVim 上对多个文件运行一些命令，主要是搜索和替换。

所以我在做第一个文件时录制了一个宏，

```
q 
```

开始录制宏，然后

```
c 
```

命名宏，

然后将以下几行（从文本文件中复制和粘贴）一一提供

```
v/sequence One\|sequence two/d
%s/sequence three//g
%s/sequence four/,/g
%s/ /_/g
%s/<\/strong>//g
%s/<\/td>//g
g/</d 
```

然后我停止录制宏，

```
q 
```

但是当我尝试在另一个文件中播放它时

```
@C 
```

它什么也不做。它只是坐在那里在命令行中显示@c，但没有别的。我试着把它放在我的 .vimrc 文件中，像这样

```
let @c ="
    v/sequence One\|sequence two/d
    %s/sequence three//g
    %s/sequence four/,/g
    %s/ /_/g
    %s/<\/strong>//g
    %s/<\/td>//g
    g/</d
" 
```

依然没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-22T00:46:05.683

一个迟到的答案，但我认为问题在于宏寄存器是`c`并且您正在/正在尝试调用宏`C`：您发布的示例中的大小写不同。

# ruby - 用圆括号按名称调用 ruby 类

> ID：10394412
> 
> 赞同：2
> 
> 时间：2012-05-01T06:35:20.537
> 
> 标签：ruby, class

我有这堂课：

```
class Option
  # ORM's properties
  def self.get( id )
    # some ORM action
    "result of #{id}"
  end
end 
```

我可以打电话`Option.get :setting`来接收结果。`Option(:setting)`如果我想调用like in `String(42)`（返回`"42"`）以获得与 相同的结果，我该如何编写类`Option#get`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:44:14.350

`String`实际上是[内核模块](https://ruby-doc.org/core/Kernel.html#method-i-String)中的一个方法：

> **字符串(arg) → 字符串**
> 
> 通过调用其方法将*arg*转换为 a 。`String``to_s`

您会在同一个地方找到`Array`、和朋友。`Float`内核包含在 Object 中，这就是所有像普通全局函数一样使用的方法所在的地方。你可以猴子补丁内核：

```
module Kernel
  def Option(id)
    Option.get(id)
  end
end 
```

或者用这样的方法制作你自己的模块，如果他们想访问say，让人们包含它`Option(11)`。

# jquery - 如何一次设置一个键盘事件？

> ID：10394416
> 
> 赞同：0
> 
> 时间：2012-05-01T06:35:28.343
> 
> 标签：jquery, input, keyboard

我这里有这个功能

```
$(document).keydown(function(e){
        if (e.which == 39) {
            goRight();
        }
        if (e.which == 37) {
            goLeft();
        };
    }); 
```

我想要这样：如果我按下右或左箭头键，调用我的任何功能（goRight 或 goLeft），我只能在功能完成后执行另一个按键操作。我想要的类似于动画的 stop() 函数。因为当我快速按下左/右时，我的所有边距都会被窃听。

goRight 功能是这个

```
function goRight(){
                if(!$('.livin').hasClass('blog') ){
            $('#contentGeral .containerConteudo ul').stop().animate({marginLeft:'-=800'},function(){
                    removeClasses();
                    addClasses();
                });
            }
            else{
                $('#contentGeral .containerConteudo ul').stop().animate({marginLeft:'0'}, function(){
                    removeClasses();
                    addClasses();
                    });
            }
    } 
```

goLeft 是类似的。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:41:47.573

尝试在其上放置一个启用布尔值？它看起来像这样：

```
var enable = 1;
$(document).keydown(function(e){
    if (e.which == 39) {
        if(enable == 1){
            enable = 0;
            goRight();
            enable = 1;
        }
    }
    if (e.which == 37) {
        if(enable == 1){
            enable = 0;
            goLeft();
            enable = 1;
        }
    };
}); 
```

不过，这只是在黑暗中的一个镜头。我不确定你的问题是什么，希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:27:21.013

该方法`.stop(true,true)`使这项工作。感谢 3nigma 的提示。

# iphone - iPhone - 如何使用通讯录获取联系方式？

> ID：10394427
> 
> 赞同：4
> 
> 时间：2012-05-01T06:36:49.350
> 
> 标签：iphone, abaddressbook

我想获取联系人信息中保存有生日的联系人，并检索这些联系人的详细信息，如电话号码、电子邮件、生日等。

这是我尝试过的：

```
ABAddressBookRef myAddressBook = ABAddressBookCreate();
NSArray *allPeople = (NSArray *)ABAddressBookCopyArrayOfAllPeople(myAddressBook);
contactList = [[NSMutableArray alloc]init];

    for (id record in allPeople) 
    {
        NSMutableDictionary *newRecord = [[NSMutableDictionary alloc] init];
        CFTypeRef bDayProperty = ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty);

        if (ABRecordCopyValue((ABRecordRef)record, kABPersonBirthdayProperty)) 
        {
                NSDate *date=(NSDate*)bDayProperty;
                [newRecord setObject:date forKey:@"birthDate"];
                date=nil;
               [date release];  
        }
      CFRelease(myAddressBook);
    } 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:35:31.627

你可以试试这段代码。

```
ABAddressBookRef m_addressbook = ABAddressBookCreate();

if (!m_addressbook) {
    NSLog(@"opening address book");
}

CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);
NSLog(@"  cfindex %ld",nPeople);

for ( int i=0;i < nPeople;i++) { 
    NSMutableDictionary *dOfPerson=[NSMutableDictionary dictionary];

        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);

    //For username and surname      
    CFStringRef firstName, lastName;
    firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    [dOfPerson setObject:[NSString stringWithFormat:@"%@ %@", firstName, lastName] forKey:@"name"];

    //For Email ids
    ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);
    if(ABMultiValueGetCount(eMail) > 0) {
        [dOfPerson setObject:(NSString *)ABMultiValueCopyValueAtIndex(eMail, 0) forKey:@"email"];
        [contactList addObject:dOfPerson];
    }

    //For Phone number
    NSString* mobileLabel;
    for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
           {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, j);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
[dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
[dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
            break ;
        }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:35:14.580

最后一个代码包含大量内存泄漏。在所有情况下，您都使用*AB...Copy..* (ABRecordCopyValue, ABMultiValueCopyValueAtIndex, ABRecordCopyValue,...) 您必须释放内存！

# iphone - 如何分析iOS中音频队列服务中录制的音频文件？

> ID：10394431
> 
> 赞同：0
> 
> 时间：2012-05-01T06:37:15.157
> 
> 标签：iphone, ios, audio, audioqueueservices

我知道文件路径。我要如何打开它？录制音频时，我想要像缓冲区中的 LPCM 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:47:29.300

您可以使用 iOS 扩展音频文件服务 API 来读取未压缩的音频样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T01:39:42.010

AudioGraph 是一个很好的工作示例：

[https://github.com/tkzic/audiograph](https://github.com/tkzic/audiograph)

# ruby - 为 last.fm api ruby 创建 authToken

> ID：10394433
> 
> 赞同：0
> 
> 时间：2012-05-01T06:37:36.103
> 
> 标签：ruby, api, rest, restful-authentication, last.fm

我正在尝试使用 auth.getMobileSession 方法向我的 last.fm 应用程序验证用户身份，该应用程序是使用 last.fm REST api 构建的。

Last.fm 说对于移动应用我们需要发送[AuthToken](http://www.last.fm/api/show/auth.getMobileSession)

```
authToken (Required) : A 32-byte ASCII hexadecimal MD5 hash of the last.fm username and       the user's password hash. i.e. md5(username + md5(password)), where '+' represents a concatenation. The username supplied should match the string used to generate the authToken. 
```

这就是我在 ruby​​ 中尝试做的事情：

```
password = Digest::MD5.hexdigest("my_password")
auth_token = Digest::MD5.hexdigest("#{user_name}#{password}")
url_with_params = URI.parse("#{url}?method=auth.getmobilesession&api_key=#{api_key}&username=#{user_name}&authtoken=#{auth_token}&api_sig=#{api_sig}&format=json")
resp = Net::HTTP.get_response(url_with_params)
puts JSON.parse(resp.body) 
```

我得到的输出是：

```
{"error"=>4, "message"=>"Invalid authentication token. Please check username/password supplied"} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:01:47.457

我实际上已经这样做了，让我为您获取我的代码。

```
token = Digest::MD5.hexdigest("#{params[:lfmuser]}#{params[:pass]}") ## given md5 hashed password
#token = Digest::MD5.hexdigest("#{params[:lfmuser]}#{Digest::MD5.hexdigest(params[:pass])}") ## given plaintext password

## api_sig is all calls to the api put in alphabetical order, then the apisecret stuck on the end, then md5 hash it all.
apisig = Digest::MD5.hexdigest("api_key#{@bot.config['lastfm.api_key']}authToken#{token}methodauth.getmobilesessionusername#{params[:lfmuser]}#{@bot.config['lastfm.secret']}")
opts = {:cache => false}
xml = @bot.httputil.get_response("#{lastfm_api_url}method=auth.getmobilesession&username=#{CGI.escape params[:lfmuser]}&authToken=#{token}&api_sig=#{apisig}", opts)
response = Document.new xml.body
unless response
  m.reply "could not parse xml from last.fm - omg"
  return
end
if xml.class == Net::HTTPBadRequest
  m.reply "error from last.fm: #{response.root.elements["error"].text}"
  return
end
## skey is used to do things that need authorization on last.fm, store this however you want
skey = response.root.elements[1].elements["key"].text 
```

这是您需要做的基本工作。

# iphone - 我应该使用哪个存储：文档存储还是 SQLite？

> ID：10394434
> 
> 赞同：0
> 
> 时间：2012-05-01T06:37:59.460
> 
> 标签：iphone, objective-c, ios, data-storage

我正在从 API 中提取文本帖子列表。每个帖子都有一个标题和描述。我需要将它们全部保留在我的 iPhone 应用程序中。

我应该使用哪个存储？我应该使用文档存储还是应该使用 CoreData SQLite 存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:54:12.847

使用 iCloud，文档更有意义，但@yibuyiqu 是正确的，如果您想查询您的数据，最好使用数据库。

您可以将可搜索和最初可显示的数据放在数据库中，并让它指向包含完整数据的文件（使用 GUID 作为文件名）。这样，如果您使用 iCloud，您的数据就可以导出，因为它已经在文档中，这是它所期望的。

另一个好处是，数据库中的数据越少，搜索性能就会越高。因此，如果您要存储图像或其他大量数据，最好将其存储在数据库之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:10:59.110

CoreData 是一种在应用程序中持久保存数据的好方法。但请考虑，在这种情况下，您需要清理太旧的数据以避免在设备中使用过多的存储空间。除了考虑 CoreData 非常适合持久化对象关系，而在您的情况下，您可能不需要持久化对象图而只需要持久化数据列表，因此您不会利用 CoreData 的查询功能。

但是，如果您使用基于网络的 API，您也可以利用 API 提供的数据缓存并使用 iOS 网络缓存机制。为了简化事情，您可以利用开源网络框架，例如[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)，它将缓存数据持久保存在文件系统中，并在它们过期或在可自定义的时间（几天、几周、几个月）之后将其删除。或者，如果您不想使用 3rd 方工具，您仍然可以使用 Apple 在 iOS 中提供的 NSURLCache 对象。这种方法比核心数据方法简单得多：在这种情况下，您仍然会从网络中获取数据，如果它已被缓存但不会遵循网络路径，则数据将直接从文件系统中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:02:55.007

您可以使用[UIManagedDocument](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIManagedDocument_Class/Reference/Reference.html)来获得两者的好处。您还可以稍后添加 iCloud 同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:00:09.630

如果要对它们执行查询，最好使用核心数据或 sqlite。否则，我认为文档文件是可以的。

# java - 跳过 M 个元素并从 LinkedList 中删除 N 个元素，跳过 0 引发问题

> ID：10394439
> 
> 赞同：1
> 
> 时间：2012-05-01T06:38:41.023
> 
> 标签：java, data-structures, linked-list

我的算法-

```
private static MyList skip$DeleteItem(MyList L , int M , int N){
    MyList curr = L;
    MyList prev = null;
    while(curr != null){
        int counter = 0;
        while(curr != null && counter <M){
            prev = curr;
            curr = curr.next;
            counter++;
        }
        counter = 0;
        while(curr != null && counter < N){
            curr = curr.next;
            if(prev == null){                   
                prev = curr;
            }
            else{               
            prev.next = curr;
            }               
            counter ++;
        }
    }

    return L;
} 
```

它适用于每个基本测试用例，但跳过值 0 和删除 1 失败。

输入 - 9-->34-->8-->7-->5-->4-->6-->3-->1-->2-->TAIL

输出 - 9-->34-->TAIL

预期 - NULL（因为所有元素都应该被删除）

解决方案是

```
while(curr != null && counter < N){     
                curr = curr.next;
                if(prev == null){                   
                    curr = curr.next;
                    L = curr;
                }
                else{               
                prev.next = curr;
                }               
                counter ++;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:15:25.667

您的“跳过”部分似乎没问题，但删除部分有问题。

```
while(curr != null && counter < N){
        curr = curr.next;
        if(prev == null){                   
            prev = curr;
        }
        else{               
        prev.next = curr;
        }               
        counter ++;
    } 
```

在第一次迭代中，首先将 curr 指针前进到下一个元素，然后 `if(prev == null)`将 prev 前进到相同的 curr。

因此，在您的示例中，在第一次迭代结束时，curr 和 prev 都指向 34。然后，列表的其余部分将被正确删除。

# iphone - 保存后 UITableViewCell 和 Coredata 上的 UIImage 的方向发生了变化

> ID：10394442
> 
> 赞同：0
> 
> 时间：2012-05-01T06:39:03.067
> 
> 标签：iphone, ios, xcode, uitableview, core-data

我在表格的表格详细视图上有以下代码，它允许用户拍照或将图像从库加载到 UIImageView。然后这将使用核心数据保存。保存后会回到UITable。奇怪的是，保存后UITable上的图片也从纵向变成了横向。我可以知道我的代码是否有问题。

非常感谢

细节视图.m

```
- (IBAction)editSaveButtonPressed:(id)sender
{
    // If we are adding a new picture (because we didnt pass one from the table) then create an entry
    if (!currentPicture)
        self.currentPicture = (Pictures *)[NSEntityDescription insertNewObjectForEntityForName:@"Pictures" inManagedObjectContext:self.managedObjectContext];

if (imageField.image)
    {
        // Resize and save a smaller version for the table
        float resize = 74.0;
        float actualWidth = imageField.image.size.width;
        float actualHeight = imageField.image.size.height;
        float divBy, newWidth, newHeight;
        if (actualWidth > actualHeight) {
            divBy = (actualWidth / resize);
            newWidth = resize;
            newHeight = (actualHeight / divBy);
        } else {
            divBy = (actualHeight / resize);
            newWidth = (actualWidth / divBy);
            newHeight = resize;
        }
        CGRect rect = CGRectMake(0.0, 0.0, newWidth, newHeight);
        UIGraphicsBeginImageContext(rect.size);
        [imageField.image drawInRect:rect];
        UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        // Save the small image version
        NSData *smallImageData = UIImagePNGRepresentation(imageField.image);
        [self.currentPicture setSmallPicture:smallImageData];
    }

    //  Commit item to core data
    NSError *error;
    if (![self.managedObjectContext save:&error])
        NSLog(@"Failed to add new picture with error: %@", [error domain]);

    //  Automatically pop to previous view now we're done adding
    [self.navigationController popViewControllerAnimated:YES];
}

- (IBAction)imageFromAlbum:(id)sender
{    takePhotoBtn.hidden=YES;
    choosePhotoBtn.hidden=YES;
    takephoto.hidden=NO;
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentViewController:imagePicker animated:YES completion:nil];
}

//  Take an image with camera
- (IBAction)imageFromCamera:(id)sender
{    takePhotoBtn.hidden=YES;
    choosePhotoBtn.hidden=YES;
    takephoto.hidden=NO;
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
    [self presentViewController:imagePicker animated:YES completion:nil];

} 
```

表视图.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Get the core data object we need to use to populate this table cell
    Pictures *currentCell = [pictureListData objectAtIndex:indexPath.row];

    //  Fill in the cell contents
    cell.textLabel.text = [currentCell title];
    cell.detailTextLabel.text = [currentCell desc];
    cell.backgroundColor =  [UIColor colorWithPatternImage:[UIImage imageNamed:@"lightblue.jpg"]];
    //  If a picture exists then use it
    if ([currentCell smallPicture])
    {
        cell.imageView.contentMode = UIViewContentModeScaleAspectFit;
        cell.imageView.image = [UIImage imageWithData:[currentCell smallPicture]];
    }
    tableView.opaque = NO;
    [tableView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"gray.jpg"]]];

    return cell; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:07:38.107

您的图像大小调整不考虑图像旋转。我知道的最简单的解决方案：将图像分配给具有所需大小和用途的 UIImageView。

```
[imgView.layer renderInContext:context]; 
```

这考虑了所有可能的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:24:35.780

更改以下部分..

```
CGRect rect = CGRectMake(0.0, 0.0, newWidth, newHeight);
UIGraphicsBeginImageContext(rect.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];//here you can use your image view instead of self,view...
[imageField.image drawInRect:rect];
UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

希望对你有帮助..

# java - 在 sbt 0.11.2 中覆盖包名称

> ID：10394444
> 
> 赞同：3
> 
> 时间：2012-05-01T06:39:11.833
> 
> 标签：java, sbt

我有一个构建 jar 的 sbt 项目，除了生成的文件名`sbt package`是`recentusers_2.9.1-0.1.jar`. 我可以覆盖这个吗？我只想从名称中删除 Scala 版本，因为我的项目源是纯 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:35:52.910

对于纯 Java 项目，请使用：

```
crossPaths := false 
```

不跨版本工件或路径，并且：

```
autoScalaLibrary := false 
```

不自动添加对 Scala 库的依赖项。

# android - google io 2010 中的其余客户端应用程序设计方法是否仍然是最新的？

> ID：10394445
> 
> 赞同：9
> 
> 时间：2012-05-01T06:39:29.837
> 
> 标签：android, intentservice, rest-client, googleio

两年前，出现了片段、意图服务、游标加载器。该方法是否仍然是最新的，或者是否有更好或成熟的模式来设计一个android rest客户端，特别是与选项B相比（我没有发布图像的特权，而是可以从[这篇文章](https://stackoverflow.com/questions/7828292/sqlite-transactions-with-google-io-rest-patterns-contentprovider)中找到图像）。

> 我知道内容提供者部分是必不可少的。服务助手和服务组件呢？到目前为止，startService 方法是 Context 或其子类的一种性质。这意味着服务助手将是一项活动。那么从内容提供者发起活动是优雅的，还是应该从顶部的活动发起。

*   对于那些深入研究[google io 2011 iosched 应用程序源代码](http://code.google.com/p/iosched/)的人，您是否会将 HomeActivity 中的静态类 SyncStatusUpdaterFragment 视为服务助手，虽然它无法启动 SyncService，但它确实会监听来自 SyncService 的回调和触发 UI 刷新。那么它是否可以被视为 Virgil Dobjanschi 方法的一种变体？

> 有服务、意图服务、异步任务和线程。在我看来，意图服务适用于从远程服务器同步大量数据。这就是他们在[iosched](http://code.google.com/p/iosched/)中使用它的原因。但常见的情况是只有部分项目会与远程服务器同步。所以意图服务太重了。甚至服务方式。我们是否可以只使用内容提供程序中的 asyncTask 或线程或其中的某个组件来完成此类任务。或者是否有任何令人信服的理由来使用该服务，并通过服务助手-服务-处理器路径。我说的是一个严肃的应用程序。

那你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T06:18:29.220

> 那么从内容提供者发起活动是优雅的，还是应该从顶部的活动发起。

您永远**不会**从内容提供者那里发起活动。一切都应该从您的活动开始，无论是 AsyncTask、Service 还是 Content Provider 请求……

AsyncTasks 通常是一个糟糕的选择。在处理配置更改（即屏幕方向更改）时，它们只是有缺陷。加载器是解决此问题的方法，但困难的部分是将其与您的网络调用包装在一起。一种解决方案是从自定义加载器（子类化 AsyncTaskLoader）构建网络调用。

然而，就我而言，我遵循了 2010 年的 Google IO 演示文稿。构建了一个类，ServiceHelper，以管理服务对象中对服务器的请求（它启动线程以执行网络查询）。ServiceHelper 管理可以从调用 Activity 创建的 ResultReceiver。这允许活动监听来自服务请求的事件，例如查询何时开始和结束（或何时出错）。这些线程将调用它们的网络查询，然后将结果数据存储在 ContentProvider 中（用于缓存并在必要时跨多个活动使用）。

同时，我在 Activity 上有一个 CursorLoader，它监听网络线程将写入的端点。显然，有很多中间立场可以解决您自己的问题。例如您的缓存策略和这种实现的开销。但这实际上取决于您正在构建的应用程序和您正在集成的 API。

所以是的，我认为 2010 年的演讲仍然有效。他的演讲中有很多模糊的领域，今天仍在继续。您仍然需要设计出适合您的应用的设计

希望我的想法能帮助你开始..

# javascript - 页面加载时的模态显示

> ID：10394450
> 
> 赞同：3
> 
> 时间：2012-05-01T06:40:17.120
> 
> 标签：javascript, jquery, html, resize, centering

嗨，我编写了以下 javascript 来启用具有动态创建的 id 标签的模式，通过调整大小功能（无论它们的宽度和高度）定位在屏幕中央。

但是，在页面加载时，模式会显示，而不是`onClick`通过按钮显示。我是一个菜鸟，所以我不确定我必须在我的代码中改变什么，所以模式在页面加载时被隐藏了。

Javascript：

```
    $('body').prepend('');

    $(函数(){
        $(窗口).resize(函数(){       

    // 获取屏幕高度和宽度  
    var maskHeight = $(window).height();  
    var maskWidth = $(window).width();

    // 计算居中对齐的值
    var dialogTop = (maskHeight - $('.modalbox').height())/2;  
    var dialogLeft = (maskWidth - $('.modalbox').width())/2;

    // 为覆盖层和对话框赋值
    $('#overlay').css({ height:maskHeight, width:maskWidth }).show();
    $('#modalcontainer').css({ top: dialogTop, left: dialogLeft}).show();
    }).resize();
    });

    $('a.modal').each(function() {
          var 链接 = $(this);
          var id = link.attr('href');
          变量目标 = $(id);               

          if($("#modalcontainer" + id).length === 0) {
              $('#modalcontainer').append(target);
          }

          $("#main" + id).remove();

          链接。点击（函数（）{
            $('#modalcontainer > div').hide();        
            目标.show();
            $('#overlay').show();
            返回假；
          });
        });

        $('.close').click(function() {
          $('#modalcontainer > div').hide();
          $('#overlay').hide();

          返回假；
        });​

```

CSS：

```
    #覆盖{
      背景：网址（../img/overlay_bg.png）；
      位置：绝对；
      z指数：10；
    }

    #modalcontainer {
    位置：绝对；
        z指数：20；
    }

```

HTML：

 `````
<a href="#modal1" class="modal button plain">view modal</a>
<div style="width:650px; height:400px;" id="modal1" class="modalbox">               
  <div class="box-header">
    <p  align="center">Here is your modal</p>
    <div class="box-content">

    </div>
    <div align="center" class="action_bar">              
      <a href="#" class="close button blue">Close</a>
    </div>
  </div>
    </div>​ 
````  `jsfiddle 演示：http: [//jsfiddle.net/5Egf8/4/](http://jsfiddle.net/5Egf8/4/)

任何帮助是极大的赞赏。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:45:27.007

更新：现在我可以看到你的小提琴，我已经修改了我的答案。在这里查看工作分叉：http: [//jsfiddle.net/JXHAt/3/](http://jsfiddle.net/JXHAt/3/)

好的，第三次是魅力。通过消除#modalcontainer，我使这变得容易多了。相反，要显示 a `.modalbox`，您只需隐藏当前`.modalbox-active`，然后添加`.modalbox-active`到要显示的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:45:57.677

删除第一个 function() 关键字；我认为你不需要它：

$('body').prepend('');

```
$(window).resize(function(){       

// get the screen height and width  
var maskHeight = $(window).height();  
var maskWidth = $(window).width();

// calculate the values for center alignment
var dialogTop =  (maskHeight  - $('.modalbox').height())/2;  
var dialogLeft = (maskWidth - $('.modalbox').width())/2; 

// assign values to the overlay and dialog box
$('#overlay').css({ height:maskHeight, width:maskWidth }).show();
$('#modalcontainer').css({ top: dialogTop, left: dialogLeft}).show();
}).resize();
});

$('a.modal').each(function() {
      var link = $(this);
      var id = link.attr('href');
      var target = $(id);               

      if($("#modalcontainer " + id).length === 0) {
          $('#modalcontainer').append(target);
      }

      $("#main " + id).remove();

      link.click(function() {
        $('#modalcontainer > div').hide();        
        target.show();
        $('#overlay').show();
        return false;
      });
    });

    $('.close').click(function() {
      $('#modalcontainer > div').hide();
      $('#overlay').hide();

      return false;
    });​ 
```

然后确保所有 () 和 {} 都正确排列。祝你好运！``

# android - 菜单 onOptionsItemSelected 给出 ClassCastException

> ID：10394451
> 
> 赞同：1
> 
> 时间：2012-05-01T06:40:23.347
> 
> 标签：android, menu, onclick

我目前正在为菜单创建一个 onclick 事件并得到一个 ClassCastException 并且我不确定出了什么问题，

菜单创建者和 onclick 事件

```
 public boolean onCreateOptionsMenu(Menu menu) {  
     MenuInflater inflater = getMenuInflater(); 
     inflater.inflate(R.menu.menu, menu);   
     return true;
     }
 public void addFunction(){

     Intent intent = new Intent(timetable.this,AddEntry.class );
     startActivity(intent);      
 }
 public void deleteFunction(){
     Intent intent = new Intent(timetable.this,DeleteEntry.class );
     startActivity(intent);
 }
 @Override
 public boolean onOptionsItemSelected(MenuItem item) {    
     // Handle item selection    
     switch (item.getItemId()) {        
     case R.id.add:            
     addFunction();           
     return true;        
     case R.id.delete:            
     deleteFunction();            
     return true;        
     default:           
     return super.onOptionsItemSelected(item);    
                 }
     }
 } 
```

清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.paad.timetable"
  android:versionCode="1"
  android:versionName="1.0">
  <uses-sdk android:minSdkVersion="8" />

 <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".timetable"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 <activity android:name="com.paad.timetable.AddEntry"
              android:label="@string/add">
        <intent-filter>
            <action android:name="android.intent.AddEntry" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 </application>
 </manifest> 
```

和菜单的 XML 布局

```
 <?xml version="1.0" encoding="utf-8"?>
      <menu 
      xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/add"          
        android:icon="@drawable/add"          
      android:title="@string/add"/>   
      <item android:id="@+id/delete"         
      android:icon="@drawable/delete"      
      android:title="@string/delete"
     />
   </menu> 
```

它可能是我想念的小东西，但任何帮助将不胜感激:)

编辑：日志

```
 05-01 06:31:26.781: ERROR/AndroidRuntime(408): FATAL EXCEPTION: main
 05-01 06:31:26.781: ERROR/AndroidRuntime(408): java.lang.RuntimeException: Unable to 
 instantiate activity ComponentInfo
 {com.paad.timetable/com.paad.timetable.AddEntry}:      
 java.lang.ClassCastException: com.paad.timetable.AddEntry
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at 
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at 
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at 
 android.app.ActivityThread.access$2300(ActivityThread.java:125)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at      
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at     
 android.os.Handler.dispatchMessage(Handler.java:99)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at android.os.Looper.loop
 (Looper.java:123)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at android.app.ActivityThread.main
 (ActivityThread.java:4627)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at 
 java.lang.reflect.Method.invokeNative(Native Method)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at java.lang.reflect.Method.invoke
 (Method.java:521)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at 
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at      
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at dalvik.system.NativeStart.main
 (Native Method)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408): Caused by: 
 java.lang.ClassCastException: com.paad.timetable.AddEntry
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at      
 android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     at      
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
 05-01 06:31:26.781: ERROR/AndroidRuntime(408):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T06:49:32.227

```
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.DatePicker;
import android.widget.TimePicker;

public class ScheduleActivity extends Activity {

SQLiteDatabase db;

TimePicker timePicker;

DatePicker datePicker;

int hour, minute;

int yr, month, day;

static String fDate = "DepartureDate";

static String fTime = "DEPART_TIME";

/** Called when the activity is first created */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.schedule_layout);

}

public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

public void addFunction() {

    Log.i("Add Function", "True");
}

public void deleteFunction() {

    Log.i("Delete Function", "True");
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    // Handle item selection
    switch (item.getItemId()) {
        case R.id.add:
            addFunction();
            return true;
        case R.id.delete:
            deleteFunction();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

这段代码工作正常，肯定是 AddEntry/deleteEntry Activity 有问题。

# jquery - jQuery Supersized：从 LI 加载图像

> ID：10394456
> 
> 赞同：1
> 
> 时间：2012-05-01T06:41:16.650
> 
> 标签：jquery, supersized

我正在使用 jQuery Supersized 插件（[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)）。

我想要实现的是采用这样的自动生成列表：

```
<ul>
    <li><span class="image">/images/image1.jpg</span> <span class="title">My Title</span> <span class="thumb">/images/image-thumb1.jpg</span></li>
    <li><span class="image">/images/image2.jpg</span> <span class="title">My Title</span> <span class="thumb">/images/image-thumb2.jpg</span></li>
    <li><span class="image">/images/image3.jpg</span> <span class="title">My Title</span> <span class="thumb">/images/image-thumb3.jpg</span></li>
</ul> 
```

并采用相关选项并将其添加到幻灯片中：

```
<script type="text/javascript">
jQuery(function($){
    $.supersized({
        ...
        slide_links : false,
        slides : [
            {image : '/images/image1.jpg', title : 'My title', thumb : '/images/image-thumb1.jpg'},
            {image : '/images/image2.jpg', title : 'My title', thumb : '/images/image-thumb2.jpg'},
            {image : '/images/image3.jpg', title : 'My title', thumb : '/images/image-thumb3.jpg'}
        ]
    });
});
</script> 
```

正在使用的系统不允许服务器端代码，所以我必须在 JS 中完成。

我已经成功地创建了一个更简单的方法来做到这一点，但它只能用一个尾随逗号来实现，这会导致 IE8 之前的中断。

所以这是我能想出的唯一解决方案，但到目前为止还没有安排好。

或多或少：

我可以获取列表中的详细信息并在幻灯片中使用它们来生成超大的背景图像吗？

例如

这：

```
`<li><span class="image">/images/image.jpg</span> <span class="title">My Title</span> <span class="thumb">/images/image-thumb.jpg</span></li>` 
```

对此：

```
{image : '/images/image.jpg', title : 'My title', thumb : '/images/image-thumb.jpg'} 
```

最后一个没有尾随逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T06:57:07.860

您可以使用此 jQuery 构建幻灯片数据结构：

```
var slides = [];           
$("ul .image").each(function() {
    var this$ = $(this);
    var obj = {};
    obj.image = this$.text();
    obj.title = this$.nextAll(".title").text();
    obj.thumb = this$.nextAll(".thumb").text();
    slides.push(obj);
});​​​​​​​​​​​​​​​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/bYs​​4x /](http://jsfiddle.net/jfriend00/bYs4x/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T06:58:10.240

```
<script type="text/javascript">
    myApp = {};
    myApp.doSupersize = function() {

        var slides = new Array();

        $("li").each(function(){
            var obj = {
                image: $(".image", this).html(),
                title: $(".title", this).html(),
                thumb: $(".thumb", this).html()
            };
            slides.push(obj);
        });

        $.supersized({
            slide_links : false,
            slides : slides
        });
    }

    jQuery(function(){
        myApp.doSupersize();
    });

</script>​​​​​​​​​ 
```

# actionscript-3 - 如何保存影片剪辑的 x/y 坐标？

> ID：10394461
> 
> 赞同：0
> 
> 时间：2012-05-01T06:41:55.887
> 
> 标签：actionscript-3, flash-cs5

您好，我几乎完成了 AS3 中的一个项目，但我需要的最后一件事是保存/加载功能。

我只需要保存单个影片剪辑的“x”并在程序开始后立即加载它。我已经搜索了几个小时，但没有找到答案。我不确定它是否应该在类文件或主时间线中，因为它是一个非常简单的变量。关键是按一个或几个按钮以 640px 的间隔更改背景。任何帮助将不胜感激，因为我对 AS3 还很陌生。

在此先感谢，如果有人想提供样本编码，那将是惊人的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:45:10.027

您可以使用[`SharedObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)将数据保存到用户的机器：

```
// Grab a reference to the active SharedObject object.
var saveGame:SharedObject = SharedObject.getLocal("SaveGame");

// Save the x and y values to your SharedObject.
saveGame.data.mcx = yourMovieClip.x;
saveGame.data.mcy = yourMovieClip.y;

// Immediately write the above changes to the local machine.
saveGame.flush(); 
```

`saveGame.data`当用户返回时，可以收集其中存储的任何信息。

或者，您可以通过将表示为 JSON/XML/任何内容的保存数据发送到您自己的数据库`URLLoader`并从那里检索它。

# jdbc - 带有 JBoss 服务器和 Java 实例的 MS Sql 2008 服务器的连接字符串是什么

> ID：10394465
> 
> 赞同：1
> 
> 时间：2012-05-01T06:42:38.257
> 
> 标签：jdbc, jboss5.x

我已经在本地安装了 SQL sever 2008 它有很多实例。如何在 jdbc 字符串中指定实例名称。

当我使用 MS SQL Studio 访问数据库时，服务器名称看起来像 mymachinename\mssqlserver1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:06:05.087

以下是您在谷歌搜索“SQLServer JDBC URL”时发现的内容：http: [//msdn.microsoft.com/en-us/library/ms378428%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms378428%28v=sql.100%29.aspx)

> 连接 URL 的一般形式是
> 
> jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]]
> 
> 在哪里：
> 
> *   jdbc:sqlserver://（必需）被称为子协议并且是常量。
>     
>     
> *   serverName （可选）是要连接的服务器的地址。这可以是 DNS 或 IP 地址，也可以是本地计算机的 localhost 或 127.0.0.1。如果未在连接 URL 中指定，则必须在属性集合中指定服务器名称。
>     
>     
> *   instanceName（可选）是要连接到 serverName 上的实例。如果未指定，则连接到默认实例。
>     
>     
> *   portNumber（可选）是要连接到 serverName 上的端口。默认值为 1433。如果使用默认值，则不必在 URL 中指定端口，也不必指定其前面的 ':'。
>     
>     
> 
> 笔记：
> 
> 为了获得最佳连接性能，您应该在连接到命名实例时设置 portNumber。这将避免往返服务器以确定端口号。如果同时使用 portNumber 和 instanceName，则 portNumber 将优先，instanceName 将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T11:08:28.117

我必须首先找到实例的端口。可以通过触发查询来做到这一点

```
SELECT local_tcp_port
FROM   sys.dm_exec_connections
WHERE  session_id = @@SPID 
```

或通过登录数据库服务器 [![MSSQL 实例端口](../Images/8da673857ebc5b1f1bacb49b63c5cbaf.png)](https://i.stack.imgur.com/FLHFQ.png)

然后使用连接字符串 jdbc:sqlserver://db.mssql.company.com\InstanceName:56326;databaseName=DatabaseName;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T22:08:24.863

这是一个完整的 URL 示例，具有不同的端口和实例名称

```
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

return DriverManager.getConnection("jdbc:sqlserver://SERVERNAME:PORT;instanceName=INSTANCE;databaseName=DATABASE;", "sa", "PASSWORD); 
```

# perl - 计算下周一到给定日期的日期

> ID：10394466
> 
> 赞同：1
> 
> 时间：2012-05-01T06:42:55.570
> 
> 标签：perl, datetime

我希望返回给定日期的下周一的日期。如果给定日期已经是星期一，则日期应保持不变。

从另一篇文章中，我找到了一个脚本来使用 DateTime 计算给定日期的前一个星期一。

```
use DateTime;

my $date = DateTime->new(year => 2011, month => 6, day => 11); 
my $desired_dow = 1;            # Monday 
$date->subtract(days => ($date->day_of_week - $desired_dow) % 7); 
print "$date\n"; 
```

（归功于 cjm）

我根本不知道如何修改它以计算下一个星期一（而不是前一个星期一）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:46:08.397

改变

```
$date->subtract(days => ($date->day_of_week - $desired_dow) % 7); 
```

到

```
$date->add(days => ($desired_dow - $date->day_of_week) % 7); 
```

或者您可以选择在“旧”星期一增加一周：

```
$date->subtract(days => ($date->day_of_week - $desired_dow) % 7); 
$date->add(days => 7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T10:14:16.587

```
#!/usr/bin/perl

use strict;
use warnings;

use Time::Local;
use POSIX 'strftime';

my $date = shift || die "No date given\n\n\tUsage: ./test.pl 2017-07-17, please note the format, CCYY-MM-DD\n\n";

my @date = split /-/, $date;
$date[0] -= 1900;
$date[1]--;

die "Invalid date: $date\n" unless @date == 3;

my $now = &timelocal(0, 0, 12, reverse @date);

do{
    $now += 24 * 60 * 60;
#}while ((strftime('%u', localtime $now) != 1) && (strftime('%u', localtime $now) != 5) && (strftime('%u', localtime $now) != 3));  ## For Multiple days, in case you want to find either, next monday, friday or wednesday
}while (&strftime('%u', localtime $now) != 1);      #Values should be from 1 to 7, including...

my @array_of_time     = localtime($now);
my $formatted_time     = &strftime( "%Y%m%d", @array_of_time );
print ("Next Monday-[$formatted_time]\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T21:17:04.870

在我看来，接受的答案（`add`部分）是不正确的。

这就是我使用的：

```
my $date = DateTime->now;
my $current_dow = $date->day_of_week;
my $desired_dow = 1; # Monday
$date->add( days => 7 - $current_dow + $desired_dow ); 
```

# java - 关于构造函数重载

> ID：10394475
> 
> 赞同：0
> 
> 时间：2012-05-01T06:44:48.053
> 
> 标签：java

我正在研究构造函数重载，下面是我的代码

```
class Philosopher {
    Philosopher(String s) {
        System.out.print(s + " ");
    }
}

public class Kant extends Philosopher {
    // insert code here
    Kant() {
        this("Bart"); //constructor overloading 
        //super("Bart"); //-->can also write this 
    }

    Kant(String s) {
        super(s);
    }

    public static void main(String[] args) {
        new Kant("Homer"); 
        new Kant();
    }
} 
```

现在我的查询是，在 Kant 类中，它是我们正在编写 this("Bart"); 的默认构造函数；它正在调用类本身中的另一个构造函数，我们不能使用 super("Bart") 吗，它也会执行相同的功能，请告知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T06:50:58.927

在这种特殊情况下，是的，您可以只使用`super("Bart")`- 不是在这两种情况下都是构造函数*链接*。*重载*只是有多个构造函数。

然而，通常情况下，将一个类链中的所有构造函数设置为该类的“主”构造函数是一个更好的主意，该类是唯一具有`super(...)`调用的构造函数。这样，您在该构造函数中放置的任何逻辑都将在调用*任何*构造函数时执行。在这种情况下，这是无关紧要的，因为您在构造函数中没有任何其他逻辑，但通常情况并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T23:44:49.820

我认为这更符合您所看到的内容，这是父类和子类中构造函数之间的`this(...)`区别`super(...)`。

首先，我制作了这个综合测试程序并运行了它。我讨厌提出在构建时证明不正确的声明......

```
public class Philosopher {

  Philosopher(String s) {
    System.out.println(s);
    System.out.print("from Philosopher(String s){System.out.println(s);}...  ");
  }

  Philosopher() {
    this("whatev... ");
    System.out.print("from Philosopher(){this(\"whatev... \");}...  ");
  }
}

class Kant extends Philosopher {

  Kant(String s) {
    System.out.println(s);
    System.out.print("from Kant(String s){System.out.println(s);}...  ");
  }

  Kant() {
    this("whatev... ");
    System.out.println("from Kant(){this(\"whatev... \");}...  ");
  }

  Kant(int i) {
    super("whatev... ");
    System.out.println("from Kant(int i){super(\"whatev... \");}...  ");
  }

  public static void main(String[] args) {
    String s = "String \"s\" InMain";
    System.out.print("\n\n    new Philosopher(s);  produces:\n");
    new Philosopher(s);

    System.out.print("\n\n    new Philosopher();  produces:\n");
    new Philosopher();

    System.out.print("\n\n    new Kant(s);  produces:\n");
    new Kant(s);

    System.out.print("\n\n    new Kant();  produces:\n");
    new Kant();

    System.out.print("\n\n    new Kant(69);  produces:\n");
    new Kant(69);
  }
} 
```

## 带注释的输出

当我运行它时，我得到了这个输出。我在每一行输出中穿插我自己的评论。

```
 new Philosopher(s);` produces
String "s" InMain
from Philosopher(String s){System.out.println(s);}... 
```

这里毫不奇怪，调用不引用`this()`or`super()`的超类的构造函数，它只运行超类的构造函数。

```
 new Philosopher();  produces:
whatev... 
from Philosopher(String s){System.out.println(s);}...  from Philosopher(){this("whatev... ");}... 
```

没有太多惊喜。 `Philosopher()`使用`this("whatev...")`和`this()`引用`Philosopher(String s)`构造函数。所以两者都在这个结构中被调用 `Philosopher()`。`Philosopher(String s)`

```
 new Kant(s);  produces:
whatev... 
from Philosopher(String s){System.out.println(s);}...  from Philosopher(){this("whatev... ");}...  String "s" InMain
from Kant(String s){System.out.println(s);}... 
```

这让我很惊讶！一个简单的构造函数用or`Kant(String s)`什么也不调用，但它最终在构造一个. **每个没有显式调用父类构造函数的子类构造函数都会神奇地调用零参数父类构造函数！**`this()``super()``Kant`

 **所以任何`Kant`不引用 a 的构造函数`super`都会表现得就像`super();`它的第一行一样！因此，我们具有从父级到子级的构造连续性。

```
 new Kant();  produces:
whatev... 
from Philosopher(String s){System.out.println(s);}...  from Philosopher(){this("whatev... ");}...  whatev... 
from Kant(String s){System.out.println(s);}...  from Kant(){this("whatev... ");}... 
```

`Kant()`里面有一个`this`，但没有`super`。所以 Java 神奇地表现得好像`super()`我们的构造函数中有一个权限`Kant()`，即使没有。

```
new Kant(69);  produces:
whatev... 
from Philosopher(String s){System.out.println(s);}...  from Kant(int i){super("whatev... ");}... 
```

所以`Kant(int i)`确实有对父类构造函数的显式引用。所以它的输出相对简单，因为我们`Philosopher(String s)`直接引用，所以我们不走`Philosopher()`隐式父构造函数调用给我们的额外绕道。

## 结论

子类构造函数总是调用父类构造函数。如果您不指定调用哪个父类构造函数，则将在子类构造函数中的任何其他代码之前调用零参数构造函数。如果您确实指定要调用哪个父类构造函数，则您可以更好地控制。

使用`this`和的构造函数`super`可以链接在一起，在一个看似简单的`new Kant()`对象构造过程中最多可以访问 4 个构造函数！

如果你一直读到这里，你应该得到某种奖励！有评论给我点个赞...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:50:39.467

在你的情况下，你也可以打电话`super("Bart")`。

但是，请考虑 `Kant(String s)`构造函数调用一些附加代码的情况。在这种情况下`super("Bart")`不会执行`Kant(String s)`，因此不会调用该构造函数中的附加代码。**

# java - Eclipse 光标变为十字准线

> ID：10394479
> 
> 赞同：97
> 
> 时间：2012-05-01T06:45:31.463
> 
> 标签：java, eclipse, editor, mouse-cursor

我在 Eclipse Java EE IDE 中工作。使用时，鼠标光标变为十字准线。现在它在编辑器中显示为十字准线。在哪里改？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-05-01T06:47:01.593

这很可能是块编辑模式。尝试按`Alt`+ `Shift`+ `A`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-20T00:31:21.533

就这样再次为MAC提供解决方案-

`cmd`+ `alt`+`A`

感谢@vsm

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T02:31:05.870

在打开时单击`0`按钮`num lock`也可能导致它更改...

只是写了这篇文章，以防其他人找不到解决方案！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-25T14:39:13.427

由于某些拼写错误，可能会出现这些令人讨厌的光标更改。您将工作保存在不同的 txt 文件上，然后关闭工作而不将其保存在 ide 上。建立一个新的类文件，从 txt 文件中粘贴已经编写的代码，然后继续。享受；

# php - 如何在 mamp 上安装 pecl 邮件解析？

> ID：10394483
> 
> 赞同：0
> 
> 时间：2012-05-01T06:45:59.143
> 
> 标签：php, mamp, php-extension, pecl

我使用 MAMP 2.0.5 ， php5.3.6 ， OS X 10.7.2

我想安装 pecl 扩展（邮件解析）

但我遇到了这个错误注意：unserialize（）：在第 1050 行的 Config.php 中的 1133 个字节的偏移量 276 处出错 错误：默认配置文件不是有效的配置文件或已损坏。

任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:34:56.737

使用 MAMP 安装中的 pear/pecl 二进制文件后，我遇到了同样的错误。

你最好编辑文件

> /Applications/MAMP/bin/php/php5.3.6/conf/pear.conf

如此[处 MAMP 论坛中所述](http://forum.mamp.info/viewtopic.php?t=13815#p29192)，只需搜索“php_dir”并将后面的数字减 1。或者，您可以像[本教程](http://www.lullabot.com/articles/installing-php-pear-and-pecl-extensions-on-mamp-mac-os-x-107-lion#comment-9548)中那样重命名/删除文件，但我建议对其进行编辑。

# google-maps - 如何使用 Google Map API 获取街道信息

> ID：10394493
> 
> 赞同：0
> 
> 时间：2012-05-01T06:47:05.417
> 
> 标签：google-maps, google-maps-api-3

我是 Google Map API 的新手，我想将 Google Map API 与我的应用程序集成。我从邮政编码中开发了地址代码，但它只给了我一个记录，但我已经检查过提供这种设施的其他网站。他们将获得 46 条记录，请帮助我摆脱这种情况。出于演示目的，我使用“IP27 0HP”作为英国的邮政编码。我搜索了很多东西，但即使我在 Google API 文档中也没有找到返回我县、镇、街道和地址行 1、地址行 2 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:06:41.240

**Google 无法为一个邮政编码提供多个地址信息。**

皇家邮政拥有邮政编码数据，虽然他们被迫发布地理信息（因此谷歌可以提供给定邮政编码的位置），但地址数据并未发布，也无法从任何其他提供商处获得。

您的示例站点可以访问包含此数据的 PAF（皇家邮政邮政地址文件）。它不是免费的，这就是该网站收费的原因。他们必须支付自己的许可费用。

# windows - 如何在 Visual Studio 2010 中快速切换窗口布局？

> ID：10394500
> 
> 赞同：2
> 
> 时间：2012-05-01T06:47:54.430
> 
> 标签：windows, visual-studio-2010

当我开发 WinForms 应用程序的 UI 界面时，我需要工具箱面板和其他一些面板。但是当我编写代码本身时，基本上我不需要所有东西，除非有两个代码窗口。如何设置此布局，然后通过按一些热键在它们之间切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T06:57:25.460

你需要的是“观点”。透视图是当前配置，包括工具栏、停靠面板等。您可以考虑 Visual Studio 2010 的“[透视](http://perspectives.codeplex.com/)图”插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:55:10.803

Shift + Alt + Enter 切换全屏模式。其他有用的快捷方式可以在[这里](http://www.dofactory.com/ShortCutKeys/ShortCutKeys.aspx#window)找到。

# iphone - 按下按钮后锁定 UITable 滚动

> ID：10394506
> 
> 赞同：0
> 
> 时间：2012-05-01T06:48:27.427
> 
> 标签：iphone, ios, xcode, ipad, uitableview

> **可能重复：**
> [禁用 UITableView 中的滚动（iPhone SDK 3.0）](https://stackoverflow.com/questions/1237355/disable-scrolling-in-a-uitableview-iphone-sdk-3-0)

我想问一下是否可以在按下按钮后锁定UITable的滚动？有什么代码吗？

下面是我的代码，我想将 UITable 滚动到顶部，然后用户将无法再向下滚动。

```
- (IBAction)export:(id)sender{

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView scrollToRowAtIndexPath:indexPath
                          atScrollPosition:UITableViewScrollPositionTop
                                  animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:50:14.377

不要忘记`self`在下面的代码中添加前缀..

```
self.tableView.scrollEnabled = NO; 
```

希望，这会让你..

# c++ - 在 A* 算法的 openSet 中使用哪个标准容器？

> ID：10394508
> 
> 赞同：2
> 
> 时间：2012-05-01T06:48:42.337
> 
> 标签：c++, algorithm, containers, path-finding

我在 openSet 上使用 std::priority_queue 实现 A* 算法。在算法的某个时刻，如[维基百科伪代码](http://en.wikipedia.org/wiki/A%2a)：

```
else if tentative_g_score < g_score[neighbor]
    tentative_is_better := true 
```

其次是

```
if tentative_is_better = true
    came_from[neighbor] := current
    g_score[neighbor] := tentative_g_score
    f_score[neighbor] := g_score[neighbor] + h_score[neighbor] 
```

意味着必须对 priority_queue 执行搜索并更改其中一个元素的值，这是不可能的（据我所知）。

此外，在这一行：

```
if neighbor not in openset 
```

一个人不能在优先队列上搜索，所以如果不能在优先队列上实现，我通过创建一个 std::set 解决了这个问题，它只告诉我们哪些元素在 openSet 上（这样当我添加/删除一个元素到openSet，我添加/删除到 std::set 和 std::priority_queue)。

所以，我想知道如何避免第一个问题，或者应该将哪个 std::container 真正用于这个特定的（但一般的 A*）实现。

更一般地说，我想知道哪种方法是使用 std 容器的 A* 的有效方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:53:15.730

我之前用 STL 实现了 A* 算法并大致经历了相同的情况。

我最终只使用 std::vector ，使用标准算法，如 push_heap 和 pop_heap （这是 priority_queue 使用的）来保持它们的顺序。

需要明确的是：您应该使用向量来实现它并使用算法来操纵向量并使它们保持良好状态。它比使用某些替代方法更容易并且可能更有效。

* * *

更新：

今天我肯定会尝试一些 Boost 容器，比如这些：http: [//www.boost.org/doc/libs/1_55_0/doc/html/heap.html](http://www.boost.org/doc/libs/1_55_0/doc/html/heap.html)但前提是我被允许使用 Boost（比如例如我自己的代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T18:18:26.267

您可以依靠算法的行为来解决这个问题。使用标准`priority_queue`，但不是增加/减少键操作，而是将新节点插入优先级队列。两个继任者现在都位于优先级队列中。优先级较高的将被优先考虑，然后扩展并添加到关闭列表中。当具有更高优先级的附加节点被取出时，它已经关闭并因此被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:25:58.020

不幸的是，`std::`容器目前不支持您需要的操作 - 真正需要的是支持`decrease/increase_key`样式操作的“索引”优先级队列。

一种选择是滚动您自己的容器（基于增强的二进制堆）来执行此操作，如果这听起来工作量太大，您几乎可以通过使用增强的数据结构来伪造它- 这两个选项都在[此处](https://stackoverflow.com/questions/9209323/easiest-way-of-using-min-priority-queue-with-key-update-in-c/9210074#9210074)`std::set`进行了更详细的讨论.

正如其他人所说，另一种选择是完全删除优先级队列并尝试维护一个排序的`std::vector`. `O(log(n))`这种方法肯定会奏效，并且可能需要您进行最少的编码，但它确实对整个算法的渐近缩放具有重大影响 -在保持排序顺序的同时实现队列的快速更新将不再可能.

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T18:17:59.400

如果没有`decrease_key`，您可以将节点重新添加到开放集中。每当你从开放集中弹出一个节点时，检查它的键是否大于该节点的当前分数；如果是，则继续而不处理该节点。这损害了 A* 的效率证明，但实际上这并不是一个严重的问题。

# c# - 如何从属性值中选择和遍历 XML xElement 节点？

> ID：10394509
> 
> 赞同：0
> 
> 时间：2012-05-01T06:48:47.533
> 
> 标签：c#, xml, linq

我有一个这样的xml。

```
<?xml version="1.0" encoding="utf-8" ?>
<Category ID="1" AICategoryName="Schedule K: Income/Loss" Taxonomy="K">
   <Level1 ID="11965" Name="Guaranteed payments" Taxonomy="4">
      <Level2 ID="27058" Name="Gtd Pmts(trade/bus) to Sch. M-1" Taxonomy="1"> 
      </Level2>

      <Level2 ID="27059" Name="Gtd Pmts not to Sch. M-1" Taxonomy="2">      
      </Level2>
   </Level1>

   <Level1 ID="119652" Name="2Guaranteed payments" Taxonomy="4">
      <Level2 ID="227058" Name="2Gtd Pmts(trade/bus) to Sch. M-1" Taxonomy="1"> 
      </Level2>

      <Level2 ID="227059" Name="2Gtd Pmts not to Sch. M-1" Taxonomy="2">      
      </Level2>
   </Level1>
</Category> 
```

我想通过提供父节点属性 ID 来获取父节点下的子节点。

例如，如果我提供 Level1 和 11965，我应该获得所有 2 级节点及其名称和 ID。

我试过这段代码。

```
XDocument xd = XDocument.Load(xmlPath);

        var xl = from xml2 in xd.Descendants("Level1")
                 where xml2.Parent.Attribute("ID").Value == parentNode.ID
                 select xml2; 
```

但是代码没有结果。同样，一旦我获得 xl，我如何遍历它以获取子节点名称和 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:21:41.670

```
XDocument xd = XDocument.Load(xmlPath);
var nodes = (from n in xd.Root.Desendants(tagName/*Level1*/) where n.Attribute("Id").Value == "idValue" select n.Elements()).single().select(n=>{return new{
Id = n.attribute("Id").value,
Name = n.attribute("Name").value,
Taxonomy = n.attribute("Taxonomy").value
}}); 
```

如果请求的标签名称始终是“Level1”并且 xml struvvture 是固定的，您也可以将上面的代码更改为此。

```
XDocument xd = XDocument.Load(xmlPath);
var nodes = (from n in xd.Root.Elements("Level1") where n.Attribute("Id").Value == "idValue" select n.Elements()).single().select(n=>{return new{
    Id = n.attribute("Id").value,
    Name = n.attribute("Name").value,
    Taxonomy = n.attribute("Taxonomy").value
    }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:09:06.677

LINQ（假设您总是为提供的 id 获得单个 Level1 节点）：

```
XDocument xd = XDocument.Load(xmlPath);
int parentId = 119652;
var nodes = (from level1 in xd.Descendants("Level1")
            where ((int)level1.Attribute("ID")) == parentId
            select level1.Descendants("Level2"))
            .Single()
            .Select(level2 => new { ID = (int)level2.Attribute("ID"), 
                                    Name = level2.Attribute("Name").Value }); 
```

迭代

```
foreach (var level2 in nodes)
    // level2.Name and level2.ID 
```

如果提供的 ID 可能不存在 Level1 节点，或者您有多个具有相同 ID 的 Level1 节点：

```
int parentId = 119652;
XDocument xd = XDocument.Load(xmlPath);
var query = xd.Descendants("Level1")
              .Where(level1 => ((int)level1.Attribute("ID")) == parentId)
              .SelectMany(level1 => level1.Descendants("Level2"))
              .Select(level2 => new { ID = (int)level2.Attribute("ID"), 
                                      Name = level2.Attribute("Name").Value });

foreach (var level2 in query)
    // level2.Name and level2.ID 
```

# sql - 将 nvarchar 值 '20,21' 转换为数据类型 int 时转换失败

> ID：10394510
> 
> 赞同：1
> 
> 时间：2012-05-01T06:49:11.890
> 
> 标签：sql, sql-server-2008

```
SELECT     SUM(PayAmount)
FROM          TeacherPayment_Detail
WHERE      TeacherPaymentId IN (TeacherPayment.Advance_IDs) 
```

我想要一个老师通过这个查询获得的预付款总和。`Advance_IDs`老师提前记录的身份证在哪里？但sql给出以下错误。

```
Conversion failed when converting the nvarchar value '20,21' to data type int. 
```

请注意，如果`Advance_IDs`有一个值，则不会发生此错误，此错误发生在我探索通过拆分函数将 nvarchar 转换为 int 的多个值上，但我没有找到我要求的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:53:09.750

这是因为

```
SELECT     SUM(PayAmount)
FROM          TeacherPayment_Detail
WHERE      TeacherPaymentId IN ('20,21' ) 
```

但 SQL Server 期望

```
 SELECT     SUM(PayAmount)
    FROM          TeacherPayment_Detail
    WHERE      TeacherPaymentId IN ('20','21' ) 
```

因此，您可以执行以下任何一项操作

1.  在 SQL 中编写一些将“20,21”标记为“20”、“21”的函数（最好执行一个返回表的函数）

    SELECT SUM(PayAmount) FROM TeacherPayment_Detail WHERE TeacherPaymentId IN（从 Function_Split(TeacherPayment.Advance_IDs 选择 val)

2.  以 'val1','val2' 形式传递值

**当它只有一个值时，它将是 'val' 并且可以工作，但是当它是多个值时，它将是 'val1,val2'。所以这不会导致错误。如果你像这样传递'val1'，'val2'，它将起作用**

** 功能 **

```
CREATE FUNCTION GetTokenizeValue
(
    @strCSVString VARCHAR(4000)
)
RETURNS 
@Result TABLE 
(
    -- Add the column definitions for the TABLE variable here
    ID int
)
AS
BEGIN

; WITH CTE(Start, [Stop]) AS
(
  SELECT  1, CHARINDEX(',' , @strCSVString )
  UNION ALL
  SELECT  [Stop] + 1, CHARINDEX(',' ,@strCSVString  , [Stop] + 1)
  FROM CTE
  WHERE [Stop] > 0
)
INSERT INTO @Result
SELECT  SUBSTRING(@strCSVString , Start, CASE WHEN stop > 0 THEN [Stop]-Start ELSE 4000 END) AS stringValue
FROM CTE

RETURN 
END 
```

**您的选择查询将是**

```
SELECT     SUM(PayAmount)
FROM          TeacherPayment_Detail
WHERE      TeacherPaymentId IN (select * from dbo.GetTokenizeValue(TeacherPayment.Advance_IDs)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:15:38.547

您可以使用以下链接创建拆分函数： [将逗号分隔字符串转换为表列](http://riteshdmakwana.blogspot.in/2012/04/sql-server-convert-comma-separated.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T09:21:06.050

使用以下用户定义函数

```
Create Function dbo.CsvToInt ( @Array varchar(1000)) 
returns @IntTable table (IntValue int) AS 
begin 
declare @separator char(1) 
set @separator = ',' 
declare @separator_position 
int declare @array_value varchar(1000) 
set @array = @array + ',' 
while patindex('%,%' , @array) <> 0 
begin 
select @separator_position = patindex('%,%' , @array) 
select @array_value = left(@array, @separator_position - 1) 
Insert @IntTable Values (Cast(@array_value as int)) 
select @array = stuff(@array, 1, @separator_position, '') 
end 
return end 
```

如下使用

```
Select * from dbo.CsvToInt('1,5,11') 
```

在你的情况下

```
SELECT     SUM(PayAmount)
FROM          TeacherPayment_Detail
WHERE      TeacherPaymentId IN (Select * from dbo.CsvToInt(TeacherPayment.Advance_IDs)) 
```

# java - 递归遍历HashMap？

> ID：10394511
> 
> 赞同：3
> 
> 时间：2012-05-01T06:49:22.093
> 
> 标签：java, algorithm

有没有一种方法可以递归地遍历 a`HashMap`使得`value1`of`key1`实际上是新的，它再次`key2`返回`value2`，将是下一个`key3`，依此类推......直到它返回`null`？逻辑如下：

```
hm.get(key)
hm.get(hm.get(key))
hm.get(hm.get(hm.get(key)))
...... 
```

我假设这可以通过一些递归过程来完成？如果我错了，请纠正我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:56:59.150

这是你想要的程序吗？它将通过遍历 hashmap 返回最终值：

```
 Public Object traverseMap(Object key)
    while(hm.get(key) != null){
      key = hm.get(key);
    }
    return key;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:55:15.563

如果以这种方式设置散列图（即它包含一个值，该值也是另一个值的键），那将是可能的。您可以在递归方法中执行此操作，但循环就足够了：

```
Object key = someInitialKey;
Object value = null;
do {
  value = hm.get( key );
  key = value;
} while( value != null ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:07:26.060

好吧，无论如何，这就是您要求的（尾巴！）递归版本：

```
public class Qsdf {

    public static Object traverseMap(Map m, Object key) {
        return traverseMap(m, key, new HashSet());
    }

    public static Object traverseMap(Map m, Object key, Set traversed) {
        if (key == null) { // first key has to be null
            throw new NullPointerException();
        }
        traversed.add(key);
        Object value = m.get(key);
        if (traversed.contains(value)) { // added after Stephen C's comment on other answer
            // cycle found, either throw exception, return null, or return key
            return key;
        }
        return value != null ?
                traverseMap(m, value, traversed) :
                key; // I guess you want to return the last value that isn't also a key
    }

    public static void main(String[] args) {
        final HashMap<Integer, Integer> m = new HashMap<Integer, Integer>();
        m.put(0, 1);
        m.put(1, 2);
        m.put(3, 4);
        m.put(2, 3);
        final Object o = traverseMap(m, 0);
        System.out.println(o);
    }
} 
```

# python - 设置 sqlite 临时存储目录

> ID：10394517
> 
> 赞同：9
> 
> 时间：2012-05-01T06:50:35.647
> 
> 标签：python, sqlite

我有一个 Python 二进制文件，它使用 SQLite 作为其后端数据库。SQLite 的文档和代码建议设置以下 3 个环境变量中的任何一个都应该有效：

```
export TMP=/var/tmp/sqlite/
export TEMP=/var/tmp/sqlite/
export TEMPDIR=/var/tmp/sqlite/ 
```

如果我在启动 Python 二进制文件之前在我的 bash 脚本中导出上述变量，这将无济于事。

`putenv()`我尝试的另一个选项是通过设置调用`os.environ`：

```
os.environ['TMP'] = /var/tmp/sqlite/
os.environ['TEMP'] = /var/tmp/sqlite/
os.environ['TEMPDIR'] = /var/tmp/sqlite/ 
```

以上选项都没有帮助说服 SQLite`/var/tmp/sqlite`用作其临时存储目录。唯一有效的选项（SQLite 的文档说已弃用）是设置`temp_store_directory`pragma 语句：

```
PRAGMA temp_store_directory = '/egnyte/.work/sqlite_temp' 
```

由于使用 pragma 语句不是我想做的选择，还有其他技巧吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T09:41:47.493

您所指的环境变量确实是 sqlite 寻找的，但在 Windows 中，而不是在 UNIX 中。

在 Unix 中，您需要设置的环境变量`TMPDIR`如源代码所示：

```
static const char *unixTempFileDir(void){
  static const char *azDirs[] = {
     0,
     0,
     "/var/tmp",
     "/usr/tmp",
     "/tmp",
     0        /* List terminator */
  };
  unsigned int i;
  struct stat buf;
  const char *zDir = 0;

  azDirs[0] = sqlite3_temp_directory;
  if( !azDirs[1] ) azDirs[1] = getenv("TMPDIR");
  for(i=0; i<sizeof(azDirs)/sizeof(azDirs[0]); zDir=azDirs[i++]){
    if( zDir==0 ) continue;
    if( osStat(zDir, &buf) ) continue;
    if( !S_ISDIR(buf.st_mode) ) continue;
    if( osAccess(zDir, 07) ) continue;
    break;
  }
  return zDir;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T10:31:05.377

对于 3.8.1+ 版本（2013 年 10 月发布），使用新的`SQLITE_TMPDIR`环境变量而不是更干净`TMPDIR`，因为后者被 SQLite 以外的 Unix 软件使用。

从[发行说明](https://www.sqlite.org/releaselog/3_8_1.html)：

> 现在可以使用 SQLITE_TMPDIR 环境变量设置用于在 unix 上保存临时文件的目录，该环境变量优先于 TMPDIR 环境变量。但是， sqlite3_temp_directory 全局变量的优先级仍然高于两个环境变量。

# assembly - 从小写转换为大写

> ID：10394521
> 
> 赞同：3
> 
> 时间：2012-05-01T06:50:59.597
> 
> 标签：assembly, x86-16

我正在尝试从小写转换为大写。我知道这很容易做到，

```
SUB AL, 20H 
```

但是我得到了另一个解决方案，那就是，

```
AND AL, 0DFH 
```

请帮助我理解这一点。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T07:02:17.790

查看位模式：

*   一个（0x41）：`0100 0001`
*   一个（0x61）：`0110 0001`
*   米（0x4d）：`0100 1101`
*   米（0x6d）：`0110 1101`
*   Z (0x5a):`0101 1010`
*   z (0x7a):`0111 1010`

小写 ASCII 是大写 ASCII + 0x20( `0010 0000`) - 即与*第六位设置*相同的位模式。

0xdf 是`1101 1111`二进制的。AND：使用 AL 将第六位设置为零，但保留其他位值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:02:20.303

`SUB AL, 20H`从 AL 中减去 0x20

`AND AL,0DFH`将清除第 5 位（将其设为“0”）。因为 0x20 是 00100000 ，所以从一个值中减去它与清除位 5 相同。

# asp.net - 不以用户身份向粉丝（喜欢网站的人）发布/发送更新或消息

> ID：10394522
> 
> 赞同：1
> 
> 时间：2012-05-01T06:51:39.210
> 
> 标签：asp.net, c#-4.0, facebook-graph-api, facebook-c#-sdk

我有一个简单的拍卖网站。我希望喜欢我网站的人需要了解任何新的拍卖。当他们赢得拍卖时，发送消息或发布更新到他们的新闻提要或发布在他们的墙上。用户还可以将新拍卖的故事分享给他们的朋友。

为此我需要单独的画布应用程序吗？

我浏览了文档[http://csharpsdk.org/](http://csharpsdk.org/)。我还阅读了官方图形 api 文档。

我认为命名空间中会有类列表及其用途。类中的方法、属性及其用途和参数说明的列表。

我找不到 facebook c# sdk 的此类文档。在官方文档中，他们只有 5 篇文章，其中 3 篇是 [TO-DO]。

*   我找不到那里有什么课程？
*   特定类或方法的目的是什么？

    对于通知新的拍卖和获奖新闻可以使用什么？

    1.  发送消息
    2.  在他们的新闻提要上发帖
    3.  张贴在他们的墙上（或时间线）

我找到了如何代表用户发帖。但是当有新的拍卖时，我需要通知我网站的粉丝。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:02:52.180

> 赢得拍卖

关于在他们的墙上生成关于赢得拍卖和东西的用户操作，您需要查看 facebook [open graph](https://developers.facebook.com/docs/opengraph/)

> 对于通知新的拍卖和获奖新闻可以使用什么？

#1 无法发送消息

> 通知用户

要向用户发送有关新拍卖的通知，您需要使用[apprequests](https://developers.facebook.com/docs/reference/dialogs/requests/)

但是应用程序仅适用于画布应用程序，除此之外，我不认为您有机会通知用户，除非您存储他们的电子邮件 ID 并通知他们。

希望这可以帮助

# iphone - 使用 UITableViewCell 使 UIView 出队

> ID：10394524
> 
> 赞同：2
> 
> 时间：2012-05-01T06:52:01.523
> 
> 标签：iphone, objective-c, uiview, uitableview

在使用 UITableView 的正常情况下，我有重用旧单元格的标准代码：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    return cell;
} 
```

然而，我注意到，当我将子视图添加到单元格时，它们并没有被删除，并且每次都添加了一个新视图。我在下面有一个例子可以完美地展示它：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    UILabel *label = [[UILabel alloc] init];
    label.text = @"HELLO";
    label.frame = CGRectMake(arc4random() % 50, -1, 286, 45);
    label.backgroundColor = [UIColor clearColor];

    // Add views
    [cell addSubview:label];

    return cell;
} 
```

我需要一些代码，以与重用单元格相同的方式再次重用我的标签。我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:27:17.610

如果您正在创建一个新单元格，则只能添加子视图。如果您正在出队，则子视图已经存在，不应重新创建。

你的方法应该是：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
    static NSString *cellIdentifier = @"Cell"; 

    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:cellIdentifier]; 
    UILabel *label;
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier]; 
        label = [[UILabel alloc] init];
        label.tag = 1;
        // Add views 
        [cell addSubview:label];
    }
    else
    {
        // Label will already exist, get a pointer to it
        label = [cell viewWithTag:1];
    }

    // Now set properties on the subview that are unique to each cell
    label.text = @"HELLO"; 
    label.frame = CGRectMake(arc4random() % 50, -1, 286, 45); 
    label.backgroundColor = [UIColor clearColor]; 

    return cell; 
} 
```

请注意标签是如何仅在单元格为 nil 时创建的。否则，使用标签找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:27:24.343

**`else`**你可以使用类似的东西**`if(cell == nil)`**

```
for (UIView *sub in [cell.contentView subviews]) 
{
            if([UILabel class] == [sub class])
                NSLog(@"%@",[sub class]);
                UILabel *label = (UILabel *)sub;
                //do label coding ie set text etc.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:35:54.870

> 我需要一些代码，以与重用单元格相同的方式再次重用我的标签。

不，您需要更好地了解表格视图设计。视图被多次添加的原因应该很明显——重用一个单元意味着您获取一个`UITableViewCell`不再需要的先前实例（从而节省了新对象的昂贵分配）并将这个实例重用于新单元。但是这个先前的实例已经附加了标签，所以标签的数量增加了。

我将子类`UITableViewCell`化并将标签创建放在这个新类的初始化代码中。（或者创建一个`UIView`子类并将其设置为单元格`contentView`，正如[Matt Gallagher 在这个漂亮的表格教程](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)中所建议的那样。）这是封装视图详细信息并将它们隐藏在表格数据源中的正确方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:16:17.617

我在自定义表格单元类中使用视图的延迟初始化。它只需要加载视图和“addSubview”一次。

```
- (void) lazyInitTitleLabel {
    if (_titleLabel != nil) {
        return;
    }

    _titleLabel = [[UILabel alloc] initWithFrame: CGRectMake(10.0f, 10.0f, 200.0f, 30.0f)];
    // Cell adds the label as a subview...
    [self addSubview: _titleLabel];
} 
```

您唯一需要注意的是重置视图显示的任何内容，例如标签中的文本和图像视图中的图像。如果您不这样做，旧内容可能会与回收的表格单元格一起重复使用。

祝你好运！

# ipad - 如何在 iPad1 iOS SDK 上以编程方式保存视频

> ID：10394525
> 
> 赞同：0
> 
> 时间：2012-05-01T06:52:14.600
> 
> 标签：ipad, video, photolibrary

我有一系列图像，我将它们转换为电影视频，现在我想知道如何将转换后的视频保存到 ipad。

我可以将转换后的视频保存到 iPad 照片库吗

```
NSError *error = nil;

AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path] fileType:AVFileTypeQuickTimeMovie error:&error];

NSParameterAssert(videoWriter);

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];
AVAssetWriterInput* writerInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain];

// NSDictionary *bufferAttributes = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput sourcePixelBufferAttributes:nil];

NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);
[videoWriter addInput:writerInput];

//Start a session:
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

CVPixelBufferRef buffer = NULL;

//convert uiimage to CGImage.

CFDataRef imgData = (CFDataRef)[array objectAtIndex:0];
CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData (imgData);
CGImageRef image1 = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);

buffer = [self pixelBufferFromCGImage:image1];
[adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

//Write samples:......

//Finish the session:
[writerInput markAsFinished];
[videoWriter finishWriting]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T08:07:20.537

试试这个开源组件：-

[https://www.cocoacontrols.com/controls/iqprojectvideo](https://www.cocoacontrols.com/controls/iqprojectvideo)

这可能会帮助你。根据您的要求使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T07:20:46.053

尝试使用以下代码：

```
 [_operationQueue addOperationWithBlock:^{

    NSInteger i = 0;

    NSString *path = [NSTemporaryDirectory() stringByAppendingFormat:@"%d.png",i];
    UIImage *image;

    NSDate *startDate;

    while ((image = [UIImage imageWithContentsOfFile:path]))
    {
        while (1)
        {
            if (writerInput.readyForMoreMediaData == NO)
            {
                sleep(0.01);
                continue;
            }
            else
            {
                //First time only
                if (buffer == NULL)
                {
                    CVPixelBufferPoolCreatePixelBuffer (NULL, adaptor.pixelBufferPool, &buffer);
                    startDate = [_dates objectAtIndex:i];
                }

                buffer = [IQProjectVideo pixelBufferFromCGImage:image.CGImage];

                if (buffer)
                {
                    if(i<_dates.count){

                    NSDate *currentDate = [_dates objectAtIndex:i];
                    Float64 interval = [currentDate timeIntervalSinceDate:startDate];

                    int32_t timeScale;

                    if (i == 0)
                    {
                        timeScale = 1.0/([[_dates objectAtIndex:i+1] timeIntervalSinceDate:currentDate]);
                    }
                    else
                    {
                        timeScale = 1.0/([currentDate timeIntervalSinceDate:[_dates objectAtIndex:i-1]]);
                    }

                    /**/
                    CMTime presentTime=CMTimeMakeWithSeconds(interval, MAX(33, timeScale));
                    //                        NSLog(@"presentTime:%@",(__bridge NSString *)CMTimeCopyDescription(kCFAllocatorDefault, presentTime));

                    if (_progressBlock != NULL)
                    {
                        dispatch_sync(dispatch_get_main_queue(), ^{
                            _progressBlock((CGFloat)i/(CGFloat)currentIndex);
                        });
                    }

                    // append buffer
                    [adaptor appendPixelBuffer:buffer withPresentationTime:presentTime];
                    CVPixelBufferRelease(buffer);
                }
                }
                break;
            }
        }

        [[NSFileManager defaultManager] removeItemAtPath:path error:nil];

        path = [NSTemporaryDirectory() stringByAppendingFormat:@"%d.png",++i];
    }

    //Finish the session:
    [writerInput markAsFinished];

    if ([videoWriter respondsToSelector:@selector(finishWritingWithCompletionHandler:)])
    {
        [videoWriter finishWritingWithCompletionHandler:^{
            CVPixelBufferPoolRelease(adaptor.pixelBufferPool);

        }];
    }
    else
    {
        [videoWriter finishWriting];
        CVPixelBufferPoolRelease(adaptor.pixelBufferPool);
    }

    NSDictionary *fileAttrubutes = [[NSFileManager defaultManager] attributesOfItemAtPath:_path error:nil];
    NSDictionary *dictInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                              _path,IQFilePathKey,
                              [fileAttrubutes objectForKey:NSFileSize], IQFileSizeKey,
                              [fileAttrubutes objectForKey:NSFileCreationDate], IQFileCreateDateKey,
                              nil];

    if (_completionBlock != NULL)
    {
        dispatch_sync(dispatch_get_main_queue(), ^{
            _completionBlock(dictInfo,videoWriter.error);
        });
    }

    NSString *openCommand = [NSString stringWithFormat:@"/usr/bin/open \"%@\"", NSTemporaryDirectory()];
    system([openCommand fileSystemRepresentation]); 
```

# perl - Perl CGI 模块的基本帮助

> ID：10394526
> 
> 赞同：3
> 
> 时间：2012-05-01T06:52:40.997
> 
> 标签：perl, cgi

我想使用 Perl CGI 模块来创建 CGI 脚本。[我浏览了此处](http://perldoc.perl.org/CGI.html)提供的文档 ，但我似乎错过了一些明显的东西，因为我的第一个程序遇到了问题。这是HTML：

```
<form name="form1" method="post" action="http://localhost/cgi-bin/filters.cgi">
<input name="mainbox" type="checkbox"> Mainbox<br> <br>
<input name="n1" type="checkbox">No. 1 <br><br>
<input name="n2" type="checkbox"> No. 2<br><br>
<input name="n3" type="checkbox">No. 3 <br>
<div style="text-align: center;"><input name="Submit" value="Submit" type="submit"></div>
</form> 
```

我只是希望将传递给 CGI 文件的参数名称打印在新页面上。所以（以我有限的理解），我在filters.cgi中写了以下内容：

```
#!/xampp/perl/bin/perl -w
use strict;
use warnings;
use CGI;

my $query = CGI->new;
print $query = $query->header('text/html');
my @names = $query->param;

my $q1 = CGI->new;
print $q1->header('text/html');
print $q1->start_html('hello');
foreach my $name (@names) {
    print $q1->h1($name);
}
print $q1->end_html; 
```

但这没有打印出来。它也没有给我任何错误，语法也可以。我知道我在这里遗漏了一些非常简单的东西，但我真的需要一些帮助。如何正确编写此脚本？我在 Windows XP 中使用 XAMPP，如果这有什么不同的话。

编辑：也许我应该提到我自己试图解决这个问题。所以我编写了以下有效的脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI;

my @arr = ('ac', 'fg', 'ty');
my $q1 = CGI->new;
print $q1->header('text/html');
$q1->start_html('hello world');
foreach my $el (@arr) {
    print $q1->p($el);
}
$q1->end_html; 
```

所以问题出在传递的参数中。我什至不知道在冗长的文档中哪里可以寻求帮助，所以决定在这里提问。另外，我看到了 Nikhil 在评论中发布的链接。提到的要点之一是我应该尝试从命令行运行我的脚本。如何从命令行传递这些参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:38:25.320

您遇到的第一个问题是您将回调的结果分配给`$query->header('text/html')`您的`$query`变量，破坏了查询对象，这意味着下一行`my @names = $query->param`没有按预期工作。

其次，您尝试打印`Content-type`标题两次，一次使用`$query`CGI 对象，一次使用`$q1`对象。

我已经删除了不必要的 CGI 对象，并且在所有情况下都`$q1`使用了原始对象。`$query`

以下是应用了上述修复的代码。

```
#!/xampp/perl/bin/perl -w
use strict;
use warnings;
use CGI;

my $query = CGI->new;
my @names = $query->param;

print $query->header('text/html');
print $query->start_html('hello');

foreach my $name (@names) {
    print $query->h1($name);
}

print $query->end_html; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:16:57.277

```
print $query = $query->header('text/html'); 
```

这条线是您问题的一部分。`$query->header()`返回一些文本，这不是一个有用的值`$query`。您还创建了两个只需要一个的`CGI`对象 (`$query`和`$q1`)，并打印了两组标题。摆脱重复和不适当的分配，你应该没问题。

# eclipse - 在干净的 Eclipse 上安装自定义插件

> ID：10394530
> 
> 赞同：3
> 
> 时间：2012-05-01T06:53:07.037
> 
> 标签：eclipse, eclipse-plugin

我正在尝试将我的自定义 Eclipse 插件安装到全新安装的 Eclipse 上，该插件在从清单文件启动时运行良好。我已经使用他们的更新站点手动安装了必要的依赖项（GEF 和 Zest）。但是，插件仍然没有出现。我用谷歌搜索了很多，发现一个网站建议我用 -debug -consoleLog 打开 eclipse 并显示以下内容：

编辑：这是我整个日志的截图：![日志](../Images/2adbb31ef94ac6671139a0d1d8d3ea59.png)

“PowerPlugin”是我的自定义插件。

我已经检查过了，我的插件使用最低版本号指定了这些依赖项，并且我已经安装了 Zest 1.3.0、Draw2D 3.7.2 和 GEF “All-In-One” SDK 3.7.2，它们应该满足这些依赖，我相信。

任何线索有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:51:58.633

我建议仅使用 indigo 更新站点`http://download.eclipse.org/releases/indigo`并从那里安装所有必需的依赖项，例如 gef 和 zest（假设您使用 indigo 作为基线？）。这个更新站点（实际上它现在称为“软件站点”或存储库）包含所有必需的依赖项，如果需要，它们将被安装。

当您使用帮助>安装新软件时...使用 p2 配置系统，它将确保在开始安装任何东西之前满足所有必需的依赖项。

[以下更新]

那么问题在于dropin机制。我发现它非常不可靠。如果您可以使用标准 p2 机制（通过使用软件站点又名 p2 存储库）安装插件会更好，即：

1.  请创建一个功能项目。
2.  将您的插件（plug-ins）添加到新创建的功能中。
3.  导出功能（feature.xml 编辑器上的“导出向导”链接）。选择目录目标并在选项选项卡上确保选中“生成元数据存储库”（这将节省您创建 UpdateSite 项目的时间，尽管如果您以后想要更多灵活性可以这样做）。
4.  在您导出的文件夹中，您应该拥有：功能、插件文件夹以及带有 p2 元数据的 artifacts.jar 和 conten.jar。
5.  在您的目标 Eclipse 中，转到 Help>Install New Software... 然后 Add... 和 Local... 并从第 4 点浏览到文件夹。
6.  您应该会在列表中看到要安装的功能（如果没有，请取消选择“按类别分组项目”），然后按照向导安装您的功能。

如果要安装在正在运行的同一主机上，则可以使用第 3 点中的“安装到主机存储库”。

另见： [http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Fexport_wizards%2Fexport_features.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Fexport_wizards%2Fexport_features.htm)

# jquery - 使用 jquery 启用或禁用复选框列表项

> ID：10394533
> 
> 赞同：0
> 
> 时间：2012-05-01T06:53:30.633
> 
> 标签：jquery, struts2, checkboxlist

我有一个复选框列表，用于将“状态”设置为`<s:checkboxlist list="{'Enabled','Disabled'}" name="processVO.status"/>`. 所以当我从这个列表中检查任何一个时，另一个应该被禁用。我尝试了很多方法，但没有奏效。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:00:44.580

```
$(document).ready(function() { 
   $('input:checkbox').click(function() { 
     if ($(this).is(':checked')) { 
       $('input:text').val('').attr('disabled', true); 
     } else { 
       $('input:text').attr('disabled', false); 
     } 
   }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:32:21.860

这是我的答案。有点长。但有效

```
<s:checkboxlist list="checkboxListIs" label="Day"  name="checkedItems" id="checkBox" onchange="return Ischecked(this);"></s:checkboxlist> 
```

javascript代码

```
function Ischecked(current){
    if( $(current).is(":checked")){
        var name = current.name;
        var id = current.id;
        var substr = id.split('-');
        var num = substr[1];
        if(num==1){
        num = 2;
        }else{
         num = 1;   
        }
        $("#"+name+"-"+num).attr("disabled","disabled");

     }
} 
```

我认为它会帮助你。根据您的要求修改上述内容。struts 框架为复选框分配 id。(id = **name-"列表对象位置**")

# php - 使用 PHP CURL 登录远程网站

> ID：10394536
> 
> 赞同：5
> 
> 时间：2012-05-01T06:53:57.253
> 
> 标签：php, curl

我正在尝试使用 CURL 登录远程网站，但似乎无法正常工作。

我尝试登录的页面是：[https ://vp1-voiceportal.megapath.com/Login/](https://vp1-voiceportal.megapath.com/Login/)

到目前为止，我已经尝试了以下方法：

```
$username="username"; 
$password="password"; 
$url="https://vp1-voiceportal.megapath.com/Login/servlet/com.broadsoft.clients.oam.servlets.Login"; 
$cookie="cookie.txt"; 

$postdata = "EnteredUserID=".$username."&password=".$password."&domain=&UserID=&rememberPass="; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:11:43.777

**编辑**：您指定的 URL 错误，应该是：

```
https://vp1-voiceportal.megapath.com/servlet/com.broadsoft.clients.oam.servlets.Login 
```

并不是：

```
https://vp1-voiceportal.megapath.com/Login/servlet/com.broadsoft.clients.oam.servlets.Login 
```

* * *

看起来您需要遵循重定向并指定 cookie 文件（用于读取），请尝试：

```
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  

curl_close($ch); 
```

这也是一个很好的做法，因此请指定 cookie 文件的绝对（和可写）路径。

# javascript - 多个链接/Java/DOM/Cookie？

> ID：10394537
> 
> 赞同：1
> 
> 时间：2012-05-01T06:54:03.350
> 
> 标签：javascript, cookies, hyperlink

由于某种原因，我无法弄清楚这一点，在表格上发布是我最后的结果。

我正在尝试创建类似[http://powerpetsplus.site88.net/guides/clicker.php](http://powerpetsplus.site88.net/guides/clicker.php)

您将在顶部看到我正在尝试获取一个将转到新页面的下一步按钮。url 类似于 petid1，单击下一步将转到 petid2，依此类推。

在朋友的帮助下，我能够做到这一点：http: [//o.aolcdn.com/hss/storage/fss/39f0fada5bc1a32482ec7becf9f68fc9/test_next.html](http://o.aolcdn.com/hss/storage/fss/39f0fada5bc1a32482ec7becf9f68fc9/test_next.html)

但要使其正常工作，我们必须单击按钮，然后单击顶部的链接。

我们做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:33:08.153

提示：不要将 url 分配给链接，而是使用 window.href = "myurl"; 这将在当前窗口中加载您的网址（即，将您转发到此网址）。 **编辑：抱歉，window.href 不适用于所有浏览器，请改用 window.location.href！**

# android - Android中的适配器

> ID：10394538
> 
> 赞同：1
> 
> 时间：2012-05-01T06:54:05.473
> 
> 标签：android, nullpointerexception, android-arrayadapter

我只是试图通过使用手动设置微调器的值`ArrayAdapter`，

```
String[] array_string = new String[5];    
array_string [0] = "1";  
array_string [1] = "2";   
array_string [2] = "3";

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, array_spinner);                
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapter); 
```

当我运行此代码时，array_string 的第一个元素我的意思是`(array_string [0] = "1";)`值单独显示在`Spinner`当我单击它引发**空指针异常**`spinner`的项目列表时。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:01:36.357

数组中有两个空单元格（size = 5，set = 3），请更改：

```
String[] array_string = new String[5]; 
```

至

```
String[] array_string = new String[3]; 
```

`array_string[3]`或为和赋值`array_string[4]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:01:32.813

好吧，有两个错误：（1）你的第 5 行应该是：

```
ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, array_string); 
```

...ie`array_spinner`不是您在代码段中声明的数组。

(2) 您没有将 array_string 的所有元素初始化为实际的字符串不可变值。这意味着`array_string[3]`,`array_string[4]`为空，因此引发了您所说的这个空指针错误。**

# objective-c - 根据表中的行数调整 NSTableView 或 NSScrollView 的大小

> ID：10394541
> 
> 赞同：9
> 
> 时间：2012-05-01T06:54:25.220
> 
> 标签：objective-c, cocoa, nstableview, nsscrollview

我有一个嵌入在 NSScrollView 中的基于视图的 NSTableView。它具有 x 像素高的自定义单元格。NSScrollView 与作为子视图的面板大小相同。我想根据表中有多少行来调整整个 NSTableView 的大小。

除了调整大小外，一切正常。在 IB 中手动调整滚动视图的大小似乎有预期的效果，但 NSSrollView 似乎没有调整其视图大小的类方法（就像 NSView 有 setFrame）。我应该调整 scollview、tableview 的大小，还是两者兼而有之？NSScrollView 是否有我缺少的 setFrame 方法或类似方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:26:45.617

在您尝试以编程方式执行此操作之前，请确保您已在 nib 文件中正确设置了大纲视图的自动调整大小掩码。听起来您只是希望大纲视图（及其滚动视图）始终保持与其内部窗口相同的大小。

默认情况下，您放置在窗口中的`NSScrollView`/`NSOutlineView`组合的自动调整大小掩码如下所示：

![在此处输入图像描述](../Images/2f67edd06ad9ee261ae7ffbbffd74a22.png)

换句话说，它设置为始终保持与现在相同的大小，无论您将窗口大小调整为多大。

您要做的是将自动调整大小的蒙版更改为如下图所示：

![在此处输入图像描述](../Images/aadb39e1422c40f8e30e634a67a0dfce.png)

为此，您在白色的自动调整大小框中单击任何有红色虚线的地方，将其切换为红色实线。一旦以这种方式配置，滚动视图（和表格视图）将始终（自动）调整为与其所在窗口相同的大小。

也可能有一种方法可以使用 Lion 的新“自动布局”功能来实现这一点，但我必须把它留给有更多经验的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T22:49:09.970

如果您确实需要这样做（例如，当您希望所有行都适合滚动视图以减轻滚动需要时）并且滚动视图只是您可以执行的窗口/视图的一部分：

```
[[myTableView enclosingScrollView] setFrame:newFrameRect]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:56:59.977

```
scrollview.frame = CGRrectMake(x, y, w, h); 
```

# bash - 需要一个 bash 脚本来自动将文件移动到子文件夹

> ID：10394543
> 
> 赞同：2
> 
> 时间：2012-05-01T06:54:35.923
> 
> 标签：bash

我有一个包含 320G 图像的文件夹，我想将图像随机移动到 5 个子文件夹（只需移动到 5 个子文件夹）。但我对 bash 脚本一无所知。请有人帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:00:59.447

您可以根据文件的第一个字母将文件移动到不同的目录：

```
mv [A-Fa-f]* dir1
mv [F-Kf-k]* dir2
mv [^A-Ka-k]* dir3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:24:20.703

这是我对此的看法。为了使用它，将脚本放在其他地方（不在您的文件夹中），但从您的文件夹中运行它。如果你调用你的脚本文件 rmove.sh，你可以把它放在，比如说 ~/scripts/，然后 cd 到你的文件夹并运行：

> 源 ~/scripts/rmove.sh

```
#/bin/bash

ndirs=$((`find -type d | wc -l` - 1))

for file in *; do
        if [ -f "${file}" ]; then
                rand=`dd if=/dev/random bs=1 count=1 2>/dev/null | hexdump -b | head -n1 | cut -d" " -f2`
                rand=$((rand % ndirs))

                i=0
                for directory in `find -type d`; do
                        if [ "${directory}" = . ]; then
                                continue
                        fi
                        if [ $i -eq $rand ]; then
                                mv "${file}" "${directory}"
                        fi
                        i=$((i + 1))
                done
        fi
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T11:00:47.887

Here's my stab at the problem:

```
#!/usr/bin/env bash

sdprefix=subdir
dirs=5

# pre-create all possible sub dirs
for n in {1..5} ; do
    mkdir -p "${sdprefix}$n"
done

fcount=$(find . -maxdepth 1 -type f | wc -l)

while IFS= read -r -d $'\0' file ; do
    subdir="${sdprefix}"$(expr \( $RANDOM % $dirs \) + 1)

    mv -f "$file" "$subdir"
done < <(find . -maxdepth 1 -type f -print0) 
```

*   Works with huge numbers of files
*   Does not beak if a file is not moveable
*   Creates subdirectories if necessary
*   Does not break on unusual file names
*   Relatively cheap

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T07:01:06.230

任何脚本语言都可以，所以我将在这里用 Python 编写：

```
#!/usr/bin/python

import os
import random

new_paths = ['/path1', '/path2', '/path3', '/path4', '/path5']
image_directory = '/path/to/images'
for file_path in os.listdir(image_directory):
    full_path = os.path.abspath(os.path.join(image_directory, file_path))

    random_subdir = random.choice(new_paths)
    new_path = os.path.abspath(os.path.join(random_subdir, file_path))

    os.rename(full_path, new_path) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-01T07:10:41.177

```
mv `ls | while read x; do echo "`expr $RANDOM % 1000`:$x"; done \
| sort -n| sed 's/[0-9]*://' | head -1` ./DIRNAME 
```

在您当前的图像目录中运行它，此命令将一次选择一个文件并将其移动到`./DIRNAME`，迭代此命令直到没有更多文件可移动。

请注意 ` 是**反引号**，而不仅仅是引号字符。

# wxpython - PyGridTableBase得到的grid中某列的数据排序

> ID：10394545
> 
> 赞同：1
> 
> 时间：2012-05-01T06:54:44.707
> 
> 标签：wxpython

我从 sqlite 文件中提取数据，然后一次使用 wxpython 1000 个单元格的 PyGridTableBase 将其添加到网格中。在这里，我想对整列数据进行排序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:26:44.050

获取 wxPython 演示包。然后查找 Grid_MegaExample。它显示了如何使用右键单击菜单对列进行排序。至少，这就是这个答案所说的：[Sorting on columns in wxpython?](https://stackoverflow.com/questions/4581525/sorting-on-on-columns-in-wxpython)

我刚刚在我的机器上测试了它，它工作正常。我有 Python 2.6.6、wxPython 2.8.12、Windows 7。

# android - Android获取动态创建项目的值

> ID：10394546
> 
> 赞同：2
> 
> 时间：2012-05-01T06:54:51.477
> 
> 标签：android

我正在根据 Web 服务的响应动态创建 EditText、RadioButtons 复选框等视图。现在，我需要在单个 HashMap 或任何 Map 中获取所有创建视图的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:59:25.003

您可以使用该`View.getId()`功能

# playframework - 使用 Play Framework 和 Morphia 构建 json API 的最佳方法是什么？

> ID：10394548
> 
> 赞同：1
> 
> 时间：2012-05-01T06:55:00.390
> 
> 标签：playframework, morphia

*   玩 1.2.4
*   吗啡 1.2.6a
*   ExtJs 4.x

该框架似乎支持创建模型、添加验证并将其作为参数或结果轻松传递。我已经尝试了几天，但还没有看到传递有效对象的更新。但是，你对 Play 做了什么？

让我们假设一个具有姓名和电话号码（可能是地址）的联系人的简单示例。方法是基本的创建、更新、删除和选择。create 和 update 调用似乎在这里具有挑战性。

是否手动将 Json 元素映射到对象 getter/setter。这似乎很费力。

框架可以自动解析 App.Save(Contact) 之类的对象吗？某处有例子吗？

还有另一种方法可以做到这一点吗？

# ruby-on-rails - HAML 错误，ruby 1.9.3 on rails 3\. 语法错误，意外关键字_ensure，期待 $end

> ID：10394554
> 
> 赞同：2
> 
> 时间：2012-05-01T06:56:29.123
> 
> 标签：ruby-on-rails, ruby, haml

我不断收到此错误：

```
Showing app/views/posts/index.html.haml where line #115 raised:

app/views/posts/index.html.haml:115: syntax error, unexpected keyword_ensure, 
expecting $end

Extracted source (around line #115):

0

Trace of template inclusion: app/views/posts/index.html.haml

Application Trace | Framework Trace | Full Trace

app/controllers/posts_controller.rb:28:in `index' 
```

这是 index.html.haml 文件：

```
.container-fluid
%br 
.row-fluid 
    .span3 
        .well.sidebar-nav{:style=>'background-color:rgb(999,999,999);'}
            %ul.nav.nav-pills.nav-stacked 
                %li
                    %a{:href => '#'} Todays Best 
                %li 
                    %a{:href => '#'} Yesterdays Best 
                %li 
                    %a{:href => '#'} Weeks Best 
                %li 
                    %a{:href => '#'} Months Best 
                %li 
                    %a{:href => '#'} Hall of Fame 
        .label.label-inverse
            %center
                Todays Best: 
        %table.table.table-bordered.table-condensed{:style=>'background-color:rgb(999,999,999);'}
            - @count= 0
            - @feedcount= 4 #5 best
            - @popularfeed.each do |post|
                - if @count<=@feedcount then
                    %tr
                        %td
                            %center
                                =  truncate(post.content, :length => 132)
                                -  @count= @count +1
                                %br
                            %p{:align => "right"}
                                %span{:style=>'color:green;'}=post.likes
                                %span{:style=>'color:red;'}=post.dislikes
                                %span{:style=>'color:blue;'}=post.prominence
    .span6 
        %center
            %table.table.table-bordered.table-condensed{:style=>'background-color:rgb(999,999,999);'}
            - @mainfeed.each do |post|
                =link_to post do 
                    %tr
                        %td  
                            %center
                                %br
                                =post.content   
                            %p.small{:align => 'right'}
                                3 days ago
                            %center  

                                %span.labelStyle.label.label-success
                                    =link_to 'Agree', :action  =>   'like', :id  =>   post.id
                                    =post.likes 
                                %span.label.label-important.postbar 
                                    =link_to 'Disagree', :action  =>   'dislike', :id  =>   post.id
                                    =post.dislikes 
                                %span.label.label-info.postbar 
                                    =link_to 'Voice', :action => 'prominence', :id  =>  post.id
                                    =post.prominence
                                %span.label.postbar 
                                    %a{:'data-toggle'=>"modal", :'data-target'=>"#myModal"}
                                        Comments
                                        =post.comments.count

                                %span.label.postbar 
                                    Report
                                %br 
                                %br 
                                %tr
                    %td
                        %p
                            %a.btn{:href => '#'} View details &raquo; 
    .span3
        .well{:style=>'background-color:rgb(999,999,999);'}
            =render 'form'  
        -#  .alert.alert-success 
        -#      Post was succesfully made.
    .span3
        .label.label-inverse
            %center Most Controversial:                  
        %table.table.table-bordered.table-condensed{:style=>'background-color:rgb(999,999,999);'}
            - @count= 0            
            - @feedcount= 3  #3 best 
            - @controfeed.each do |post|
                - if @count<=@feedcount then  
                    %tr                                 
                        %td                                       
                            %center                                         
                                =truncate(post.content, :length => 132)             
                                -@count= @count +1
                                %br                                                     
                            %p{:align => "right"}
                                %span{:style=>'color:green;'}=post.likes              
                                %span{:style=>'color:red;'}=post.dislikes     
                                %span{:style=>'color:blue;'}=post.prominence 
```

我相信错误应该在 .span6 中，但我不确定。该文件只有 112 行长，错误在第 115 行。感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:03:20.213

您在 116 和 177 上有两条评论（或者至少，我认为您在代码中评论）没有前缀`-`

`#3 best`并且`#5 best`可能需要成为`-#3best`和`-#5best`

# php - 为什么 POST 和 GET 方法表单在 PHP 上不起作用？

> ID：10394560
> 
> 赞同：1
> 
> 时间：2012-05-01T06:58:00.350
> 
> 标签：php, html, forms, post, get

这是 index.php：

```
 header('Location:media.php?module=home'); 
```

我称之为 media.php：

```
 <html>  
    <head>      
    <title>Test media</title>   
    </head>     
    <body>
    <table width="960"  border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
    <td colspan="2"><img src="images/cms/header.png" width="780" height="77"></td>
    </tr>
    <tr>
     <td width="200" valign="top" bgcolor="#1e2528">
     <?php include "menu.php"; ?>
     <p align="center">&nbsp;</p>
      </td>
      <td width="760" valign="top" bgcolor="#FFFFFF">
      <p>
      <?php include "content.php"; ?>
       <br>
      </p>    
      </td>
      </tr>
   </table>     
</body> 
</html> 
```

这就是问题，content.php：

```
 <table width="100%" cellspacing=5>
    <?php
    include_once 'include/config.php';
    include_once 'admin/include/date_lib.php';
    include_once 'class/class_lib.php';
    include_once 'class/paging.php';
    $action = new DB();
    $action->db_connect();

 if ($_GET[module]=='home'){
     </td></tr>";
      echo "<tr><td align=center>Headline News<br><br></td></tr>";
    elseif ($_GET[module]=='request'){
      echo "<tr><td class=judul_head>&#187; Hubungi Kami</td></tr>";

      echo "<tr><td class=isi>Silahkan hubungi kami secara online:</td></tr>";  

      echo "<form action='?module=sendemail' method='post'>  
            <tr><td class=isi>Name   : <input type=text name=name size=35></td></tr>
            <tr><td class=isi>E-mail : <input type=text name=email size=35></td></tr>
            <tr><td class=isi>Subject: <input type=text name=subject size=50></td></tr>
            <tr><td class=isi>Message  : <br><textarea name=message rows=13 cols=70>

</textarea></td></tr>
            <tr><td><input type=submit value=Send></td></tr>
            </form>";

        echo "<tr><td class=back><br>
            [ <a href=javascript:history.go(-1)>Back</a> ]</td></tr>";            
    }

  elseif ($_GET[module]=='sendemail'){
      mysql_query("INSERT INTO email(name,
                                       email,
                                       subject,
                                       message,
                                       date) 
                            VALUES('$_GET[name]',
                                   '$_GET[email]',
                                   '$_GET[subject]',
                                   '$_GET[message]',
                                   '$today_date')");

 echo "<tr><td class=header_head>&#187; Status Email</td></tr>
        <tr><td class=isi>Email has been sent</td></tr>
        <tr><td class=back><br>
        [ <a href=index.php>Back</a> ]</td></tr>";            
} 
```

我有一个使用 post 方法的电子邮件表单。但是当我点击提交按钮时，它会在 url 地址栏上是这样的

```
http://staging/media.php?name=Test+name&email=Test+email&subject=test+subject&,message=Test+message 
```

就像我使用 get 方法一样。但是如果更改`$_POST`为`$_GET`在查询中。它不起作用。

我的脚本有什么遗漏吗？还是因为我使用该`$_GET[module]`方法在同一页面上调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:13:47.600

`if ($_GET[module]=='home'){ </td></tr>";` 在我看来，您缺少`echo "`陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:15:07.440

由于您已选择将表单方法设置为“post”，因此您从 mysql_query 中的表单获取的值需要是 $_POST 而不是 $_GET。希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T07:17:14.367

`elseif ($_GET[module]=='request')` 在我推荐语法高亮编辑器之前，您还缺少一个括号。找到这些东西变得非常容易。

将 HTML 输出和脚本混合在一起也不好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:09:39.703

GET 和 POST 是两个不同的东西，不应该被认为是可以互换的。

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

[http://www.php.net/manual/en/reserved.variables.post.php](http://www.php.net/manual/en/reserved.variables.post.php)

在 PHP 脚本中使用 $_GET 变量允许您解析和“获取” URL 参数（通常是查询字符串或带有 mod_rewrite 的文件夹参数），而 $_POST 变量允许您收集传输的数据。

此外，如果您正在向 API 或您自己的脚本提交 HTTP 请求，它应该是 POST 请求……因为您正在提交数据。如果您尝试访问 API 或您自己的脚本，并且只检索（而不是创建/更新/删除）数据，您应该使用 GET 请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T07:59:47.933

您将表单的方法设置为`POST`，然后在下面的代码中您尝试使用`$_GET`（`GET method`）访问数据，其中仅包含`module=sendmail` 要从您需要使用的提交表单访问数据`$_POST`（即`POST method`）。代码也没有正确编写：

*   输入标签应该是这样的：`<input type="value" name="value" />`
*   表单标签应该是这样的：`<form method="post" action="http://complete/link/page.php?media=sendmail"></form>`

为`action`属性指定完整的 URL 是一种很好的做法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T07:26:26.997

> 当我单击提交按钮时，在 url 地址栏上会像这样 [...] 就像我使用 get 方法时一样。

那么你的表格不正确。它是页面上唯一的表单（使用浏览器中的查看源代码）并且它没有嵌套在另一个表单中吗？

还要记住其他答案的所有提示。虽然它们可能不会立即解决您的问题，但当您的代码更具可读性时，就会更容易找到它。

# json - 主页的 Trakt.tv JSON 提要

> ID：10394564
> 
> 赞同：0
> 
> 时间：2012-05-01T06:58:25.443
> 
> 标签：json, api

嗨，我刚开始为 trakt.tv 创建一个小部件，我只想展示最新的 5/10 剧集，其中包含一些小信息，例如

剧集标题何时（如果可能，请在小部件 [http://trakt.tv/settings/widgets上使用图像](http://trakt.tv/settings/widgets)

```
<a href="http://trakt.tv/user/smirk"><img alt="trakt.tv" src="http://trakt.tv/user/smirk/widget/watched-fanart.jpg" /></a> ) 
```

所以 ima JSON noob 刚开始使用 apis 也许有人可以帮助我一点？

有关 API 的信息可以在这里找到[http://trakt.tv/api-docs](http://trakt.tv/api-docs)

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:09:11.050

假设您使用 PHP 动态创建图像，请查看 json_decode 函数。这可以获取 API 输入并将其转换为数组以便于使用。

# mongodb - 创建集合时自动触发操作

> ID：10394565
> 
> 赞同：4
> 
> 时间：2012-05-01T06:58:28.773
> 
> 标签：mongodb

我知道 Mongo 可以即时创建东西。但我想要一个服务器端脚本，每次创建新集合时，Mongo 都会自动执行该脚本或一组操作。

这个想法是我的应用程序代码可能不知道索引和分片配置等。

我可以做这样的事情，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:05:30.393

我在 Google Group 上回答了这个问题：[http ://groups.google.com/group/mongodb-user/browse_thread/thread/94d19658299f6bcc](http://groups.google.com/group/mongodb-user/browse_thread/thread/94d19658299f6bcc)

这个问题很模糊，但我还是试了一下——试着更具体地说明你想要做什么，你可能会得到更好的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:13:13.640

没有这样的功能。在您的应用程序代码中实现一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:03:09.907

一种可能的方法是，在对集合执行任何 ISUD（插入、选择、更新、删除）之前[检查集合是否存在。](http://api.mongodb.org/java/2.7.2/com/mongodb/DB.html#getCollectionNames%28%29)不过，这似乎有点大锤。我不确定您如何知道将哪个索引应用于任意命名的集合，除非您从某些用户输入中获取一些自由文本并针对您的 mongo install 执行该操作？如果您正在寻找针对“预期”结构验证数据库结构，那么您可以[测试您的文档结构是否存在不一致](http://exceptionallyexceptionalexceptions.blogspot.co.uk/2011/12/testing-your-document-structure-for_12.html)

# php - 使用我的用户名和密码创建 JSON 格式的文本文件？

> ID：10394567
> 
> 赞同：2
> 
> 时间：2012-05-01T06:58:39.600
> 
> 标签：php, json, api, http, authentication

我正在尝试使用 PHP 向 Web 服务进行身份验证，方法是使用包含我的用户名和密码的 .txt 文件发布到身份验证方法，该文件包含 JSON 格式的用户名和密码。

它不工作，我很难弄清楚为什么不工作。

这是我正在尝试使用的代码。首先有一个我用来发帖的功能。然后我为我的数据文件创建一个变量，并为我的身份验证服务的 URL 创建另一个变量。

```
<?php 

function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
           'method' => 'POST',
          'content' => $data
        ));
  if ($optional_headers !== null) {
$params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
   if (!$fp) {
throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
}

// Let's get logged in and get an authkey 

$url = 'http://service.com/auth';
$data= 'creds.txt';

$authkey = do_post_request($url, $data);  

        print_r($authkey);  

 ?> 
```

我的 creds.txt 文件的文本：

{“身份验证”：{“用户名”：“我的用户名”，“密码”：“我的密码”}}

我究竟做错了什么？我收到无效数据错误。我需要使用文本文件的完整 URL 吗？文本文件的格式不正确吗？

该服务的文档只说我需要：

“带有您的用户名和密码的 JSON 格式的文本文件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:17:32.133

`$data= 'creds.txt';`应该是这样的：

```
$data= file_get_contents('creds.txt'); 
```

我没有看到你打开`creds.txt`任何地方，我相信你应该以 JSON 格式发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:17:11.917

如果不披露“ `service.com`”或有关网站本身的更多详细信息，将很难找到解决方案，因为它可能涉及很多事情，但您永远不会传递实际数据（仅传递文件路径）。

尝试：

```
$authkey = do_post_request($url, file_get_contents($data)); 
```

# unity3d - Unity3D 第三人称控制器和动画

> ID：10394573
> 
> 赞同：8
> 
> 时间：2012-05-01T06:59:41.417
> 
> 标签：unity3d

我的问题是没有显示我在 Unity3D 的第三人称控制器中设置的自定义步行动画。

动画是从具有 model@walk.fbx 结构的 FBX 文件导入的。我知道动画有效，因为如果我将它用作它显示的空闲动画。另一方面，它似乎也不是控制器脚本的问题，因为它适用于原型角色。

似乎正在播放的动画是动画组件中选择的动画（选择了“自动播放”）。任何从第三人称控制器更改动画的尝试都适用于原型角色，但不适用于我的。

我没有也不想要跑步和跳跃动画。使用原型角色，我在每个角色上都设置了步行动画，没有任何不利影响。控制器不会以这种方式关闭动画，因为控制台中没有来自第三人称控制器脚本的日志条目。与 CrossFade 通话相关的线路正在被调用。

关于我接下来可以看哪里的任何线索？更可能是控制器问题还是动画问题？完全是别的东西吗？

**更新：**下面是我的控制器的代码。当我使用 Unity 提供的建筑工人样本模型时，它工作正常。`_animation.CrossFade`与在预期的时间被调用的线路。使用`Play`or`Blend`没有帮助。控制台中没有记录错误。

但是对于我们的自定义动画，它不起作用。我现在怀疑问题出在模型上。不幸的是，我无权分享该模型的样本。我已经向动画师询问了有关他如何创建 FBX 导出的更多详细信息。他需要使用任何特定设置来使模型在 Unity 中工作吗？如果我将它们单独添加到场景中，动画确实可以工作，这仍然很奇怪。

```
// Require a character controller to be attached to the same game object
@script RequireComponent(CharacterController)

public var idleAnimation : AnimationClip;
public var walkAnimation : AnimationClip;

public var walkMaxAnimationSpeed : float = 0.75;

private var _animation : Animation;

enum CharacterState {
    Idle = 0,
    Walking = 1,
}

private var _characterState : CharacterState;

// The speed when walking
var walkSpeed = 2.0;
var speedSmoothing = 10.0;
var rotateSpeed = 500.0;

var targetPrecision = 5;
var targetMaxDistance = 200;

// The camera doesnt start following the target immediately but waits for a split second to avoid too much waving around.
private var lockCameraTimer = 0.0;

// The current move direction in x-z
private var moveDirection = Vector3.zero;
// The current x-z move speed
private var moveSpeed = 0.0;

// The last collision flags returned from controller.Move
private var collisionFlags : CollisionFlags; 

// Are we moving backwards (This locks the camera to not do a 180 degree spin)
private var movingBack = false;
// Is the user pressing any keys?
private var isMoving = false;

private var isControllable = true;

private var isTargetting : boolean = false;
private var targetPoint : Vector3 = Vector3.zero;

function Awake () {
    moveDirection = transform.TransformDirection(Vector3.forward);

    _animation = GetComponent(Animation);
    if(!_animation)
        Debug.Log("The character you would like to control doesn't have animations. Moving her might look weird.");

    if(!idleAnimation) {
        _animation = null;
        Debug.Log("No idle animation found. Turning off animations.");
    }
    //_animation[idleAnimation.name] = idleAnimation;

    if(!walkAnimation) {
        _animation = null;
        Debug.Log("No walk animation found. Turning off animations.");
    }
    //_animation[walkAnimation.name] = walkAnimation;
}

function UpdateSmoothedMovementDirection () {
    var cameraTransform = Camera.main.transform;

    // Forward vector relative to the camera along the x-z plane    
    var forward = cameraTransform.TransformDirection(Vector3.forward);
    forward.y = 0;
    forward = forward.normalized;

    // Right vector relative to the camera
    // Always orthogonal to the forward vector
    var right = Vector3(forward.z, 0, -forward.x);

    var v = Input.GetAxisRaw("Vertical");
    var h = Input.GetAxisRaw("Horizontal");

    // Are we moving backwards or looking backwards
    if (v < -0.2)
        movingBack = true;
    else
        movingBack = false;

    var wasMoving = isMoving;
    isMoving = Mathf.Abs (h) > 0.1 || Mathf.Abs (v) > 0.1;

    // Target direction relative to the camera
    var targetDirection = h * right + v * forward;

    // Lock camera for short period when transitioning moving & standing still
    lockCameraTimer += Time.deltaTime;
    if (isMoving != wasMoving)
        lockCameraTimer = 0.0;

    // We store speed and direction seperately,
    // so that when the character stands still we still have a valid forward direction
    // moveDirection is always normalized, and we only update it if there is user input.
    if (targetDirection != Vector3.zero) {
        // If we are really slow, just snap to the target direction
        if (moveSpeed < walkSpeed * 0.9) {
            moveDirection = targetDirection.normalized;
        }
        // Otherwise smoothly turn towards it
        else {
            moveDirection = Vector3.RotateTowards(moveDirection, targetDirection, rotateSpeed * Mathf.Deg2Rad * Time.deltaTime, 1000);
            moveDirection = moveDirection.normalized;
        }
    }

    // Smooth the speed based on the current target direction
    var curSmooth = speedSmoothing * Time.deltaTime;

    // Choose target speed
    //* We want to support analog input but make sure you cant walk faster diagonally than just forward or sideways
    var targetSpeed = Mathf.Min(targetDirection.magnitude, 1.0);

    _characterState = CharacterState.Idle;

    // Pick speed modifier
    targetSpeed *= walkSpeed;
    _characterState = CharacterState.Walking;

    moveSpeed = Mathf.Lerp(moveSpeed, targetSpeed, curSmooth);
}

function UpdateTargettedMovementDirection () {
    var cameraTransform = Camera.main.transform;

    var wasMoving = isMoving;
    isMoving = true;//Mathf.Abs (h) > 0.1 || Mathf.Abs (v) > 0.1;

    // Target direction relative to the camera
    // var targetDirection = h * right + v * forward;
    var targetDirection = Vector3.zero;
    targetDirection.x =  targetPoint.x - transform.position.x;
    targetDirection.z =  targetPoint.z - transform.position.z;
    targetDirection = targetDirection.normalized;
    //Debug.Log("Target direction is " + targetDirection);

    // Lock camera for short period when transitioning moving & standing still
    lockCameraTimer += Time.deltaTime;
    if (isMoving != wasMoving)
        lockCameraTimer = 0.0;

    // We store speed and direction seperately,
    // so that when the character stands still we still have a valid forward direction
    // moveDirection is always normalized, and we only update it if there is user input.
    if (targetDirection != Vector3.zero) {
        // If we are really slow, just snap to the target direction
        if (moveSpeed < walkSpeed * 0.9) {
            moveDirection = targetDirection.normalized;
        }
        // Otherwise smoothly turn towards it
        else {
            moveDirection = Vector3.RotateTowards(moveDirection, targetDirection, rotateSpeed * Mathf.Deg2Rad * Time.deltaTime, 1000);
            moveDirection = moveDirection.normalized;
        }
    }

    // Smooth the speed based on the current target direction
    var curSmooth = speedSmoothing * Time.deltaTime;

    // Choose target speed
    //* We want to support analog input but make sure you cant walk faster diagonally than just forward or sideways
    var targetSpeed = Mathf.Min(targetDirection.magnitude, 1.0);

    _characterState = CharacterState.Idle;

    // Pick speed modifier
    targetSpeed *= walkSpeed;
    _characterState = CharacterState.Walking;

    moveSpeed = Mathf.Lerp(moveSpeed, targetSpeed, curSmooth);      
}

function Update() {
    if (!isControllable) {
        // kill all inputs if not controllable.
        Input.ResetInputAxes();
    }

    var distance : float = 0;
    if (Input.GetMouseButtonUp(0)) {
        if (isTargetting) {
            isTargetting = false;
            // Debug.Log("Stopped moving");
            FaceCamera();
        } else {
            var ray = Camera.main.ScreenPointToRay(Input.mousePosition);
            var layerMask = 1 << 8; // Terrain is layer 8
            var hit : RaycastHit;
            Physics.Raycast(Camera.main.transform.position, ray.direction, hit, 1000, layerMask);
            distance = Vector3.Distance(transform.position, hit.point);
            if (distance <= targetMaxDistance && hit.point != Vector3.zero) {
                targetPoint = hit.point;
                isTargetting = true;
                // Debug.Log("Mouse up at hit " + hit.point + " at distance " + distance);
            } else {
                isTargetting = false;
                // Debug.Log("Ignored mouse up at hit " + hit.point + " at distance " + distance);
            }
        }
    }

    if (isTargetting) {
        // Debug.Log("Moving to " + targetPoint);
        distance = Vector3.Distance(transform.position, targetPoint);
        if (distance < targetPrecision) {
            // Debug.Log("Reached point " + targetPoint + " at distance " + distance);
            isTargetting = false;
            FaceCamera();
        } else {
            UpdateTargettedMovementDirection();
        }
    } else {
        UpdateSmoothedMovementDirection();
    }

    // Calculate actual motion
    var movement = moveDirection * moveSpeed;
    movement *= Time.deltaTime;

    // Move the controller
    var controller : CharacterController = GetComponent(CharacterController);
    collisionFlags = controller.Move(movement);

    // ANIMATION sector
    if (_animation) {       
        if (controller.velocity.sqrMagnitude < 0.1) {
            _animation.CrossFade(idleAnimation.name);
        } else {
            //_animation[walkAnimation.name].speed = Mathf.Clamp(controller.velocity.magnitude, 0.0, walkMaxAnimationSpeed);
            _animation.CrossFade(walkAnimation.name);       
        }
    } else {
         Debug.Log("Animation is null!");
    }
    // ANIMATION sector

    // Set rotation to the move direction
    transform.rotation = Quaternion.LookRotation(moveDirection);
}

function OnControllerColliderHit (hit : ControllerColliderHit ) {
//  Debug.DrawRay(hit.point, hit.normal);
    if (hit.moveDirection.y > 0.01) 
        return;
}

function GetSpeed () {
    return moveSpeed;
}

function GetDirection () {
    return moveDirection;
}

function IsMovingBackwards () {
    return movingBack;
}

function GetLockCameraTimer () {
    return lockCameraTimer;
}

function IsMoving () : boolean {
    return Mathf.Abs(Input.GetAxisRaw("Vertical")) + Mathf.Abs(Input.GetAxisRaw("Horizontal")) > 0.5;
}

function Reset () {
    gameObject.tag = "Player";
}

function FaceCamera() {
    var cameraTransform = Camera.main.transform;

    // Forward vector relative to the camera along the x-z plane    
    var forward = cameraTransform.TransformDirection(Vector3.forward);
    forward.y = 0;
    forward = forward.normalized;

    moveDirection = -forward;
} 
```

**更新 2：**用于创建动画的设置在这些屏幕截图中。他们是正确的吗？ ![动画导出设置 1](../Images/cf8caec37e5800d3e7fc103589ba55b4.png) ![动画导出设置 2](../Images/e0014d4025145bf065ad837800da7e3a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:54:30.027

不是（还 :-) 一个答案，但我需要更多的空间和图像。

自 3.5 Unity3d 以来，基于 animation@model.fbx 表示法处理导入的方式发生了变化，一些人报告了问题（例如[BIG Unity 3.5.0f1 与 Skinned Rig 的问题 - Major FAIL](http://forum.unity3d.com/threads/122494-BIG-Unity-3.5.0f1-problem-with-Skinned-Rig-Major-FAIL)）。当第二根根骨骼开始播放时会出现问题，但我可以通过将动画拖动到模型文件预制件来解决这个问题（我的大部分动画都包含在模型中，剩下的 2 个没什么大不了的）。

只是为了确定我在评论部分正确理解了您的答案，您有以下内容：

![在此处输入图像描述](../Images/7fb331c51122c31bc0dd2fda044cca1c.png)

这意味着：

*   在角色模型中，动画数组包含所有动画
*   骨骼数量和所有名称与原型角色完全相同
*   如果打开动画视图，您可以看到在层次视图中选择的角色的所有动画的只读列表

假设这很好，还有一些建议：

*   我在代码中看不到设置[WrapMode.Loop](http://unity3d.com/support/documentation/ScriptReference/WrapMode.Loop.html?from=Animation)或动画速度的任何地方。您确定它在检查器中配置为循环并且没有在某处被覆盖。
*   无参数的 CrossFade 假定为 0.3 秒
*   交叉淡入淡出调用后会发生什么？DefaulTake 是否停止播放？
*   可以默认拖动 Walk 动画吗
*   你使用不同的动画层吗？
*   设置时得到什么输出`Debug.Log ("Walk: " + player.animation.IsPlaying ("Walk"));`

* * *

**[更新]**

1.  让我们看看导入设置。您是否检查了*拆分动画，是否在**开始*和 *结束* 时输入了错误的值，例如 1-1？

    ![动画导入设置](../Images/bdedd47900765107eee6d462a17a1ec3.png)

2.  关于*IsPlaying 的切换*：请创建更多关于[AnimationState](http://unity3d.com/support/documentation/ScriptReference/AnimationState.html)属性的输出。最值得注意的速度、长度、启用、重量……我怀疑动画太短或播放太快。
3.  没有骨骼动画的行走动画听起来有点奇怪。另一方面，如果骨骼名称不匹配，控制台会大声喊叫。所以我认为现在没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:03:52.490

好奇怪，能发下源码和demo吗？

您可以尝试检查：

1.  检查动画名称和属性是否在编辑器中正确设置。
2.  创建一个没有控制器的对象并确保正确导入了动画。

# xaml - 在网格中放大和缩小，WinRT 上的图像（Metro 风格应用程序）

> ID：10394589
> 
> 赞同：2
> 
> 时间：2012-05-01T07:01:31.930
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我正在尝试在我的应用程序中实现一些东西，我需要显示一个图像，并让用户捏入和捏出图像。

我认为它可以使用 ScrollViewer，但我无法让它工作，帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T22:23:28.570

我不想过分简化这一点，但 WinRT XAML ScrollViewer 内置了手势操作。

[你可以在这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.zoommode.aspx)看到我的意思。这可能不是你想要的。但它肯定是一种简单的方法，可能适合一定百分比的场景。也许甚至是你的。

> 在合成中包含 ScrollViewer 的控件通常会在默认模板和启动视觉状态中设置 ZoomMode 的值，您通常会从这个模板化值开始。将 ScrollViewer 作为其组成部分的控件通常使用模板绑定，以便在控件级别设置附加属性将更改控件内 ScrollViewer 部分的滚动行为。否则，可能需要替换模板才能更改 ScrollViewer 部件的滚动行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:27:12.247

查看 Morten Nielsen 关于[构建多点触控照片查看器控件](http://www.sharpgis.net/post/2012/01/17/Building-A-Multi-Touch-Photo-Viewer-Control.aspx)的文章。它适用于 Silverlight/Windows Phone，但如果您只是启用图像操作并更改操作事件中的一些类型 - 它应该会很好用。

一个简单的解决方案可能对您来说就足够了，只是将图像放在 ScrollViewer 中，尽管要看到它工作 - 您需要一个触摸屏或在模拟器中运行它（使用捏合工具，然后在图像上拖动并滚动到放大/缩小）。

您还可以使用代码对其进行缩放：

```
<Grid
    Background="{StaticResource ApplicationPageBackgroundBrush}">
    <ScrollViewer
        x:Name="myScrollViewer">
        <Image
            Source="/Assets/SplashScreen.png" />
    </ScrollViewer>
</Grid> 
```

.

```
public BlankPage()
{
    this.InitializeComponent();
    myScrollViewer.ZoomMode = ZoomMode.Enabled; // default
    Test();
}

private async void Test()
{
    while (true)
    {
        for (double x = 0; x < 2 * Math.PI; x += Math.PI / 30)
        {
            await Task.Delay(1000 / 30);
            float factor = (float)(1.0 + Math.Sin(x) / 10);
            myScrollViewer.ZoomToFactor(factor);
        }
    }
} 
```

# excel - Excel 条件格式 一行上的 3 色应用于多行

> ID：10394591
> 
> 赞同：13
> 
> 时间：2012-05-01T07:01:33.140
> 
> 标签：excel, conditional-formatting

我有一些包含几百到几千行的 excel 电子表格。每行代表以一秒为间隔进行的一组测量。

我想为每一行使用 3 色条件格式。我可以通过将“适用于”设置为以下内容来为 3 种颜色设置单行：

```
 'Table1'!$B$2:$M$2 
```

但是，如果我尝试复制格式然后将其应用于多行（例如 B3:M400），它会将整个块（从 B3 到 M400 的所有单元格）视为单个条件格式，因此每个单元格都根据到所有其他细胞。我正在寻找的是一种将 3 色条件格式分别应用于许多行的每一行的方法。

例如，在此处链接的图像中：http: [//electriceptor.files.wordpress.com/2012/04/screen-shot-2012-04-30-at-11-53-36-pm.png](http://electriceptor.files.wordpress.com/2012/04/screen-shot-2012-04-30-at-11-53-36-pm.png) （对不起，我'我太新了，不能发布图像），每一行都有一个单独的 3 色格式，我手动应用于每一行。

但是，如果我复制一行并将格式粘贴到同一个 7 行块中，它看起来像这样的图像：[http ://electriceptor.files.wordpress.com/2012/04/screen-shot-2012-04- 30-at-11-56-42-pm.png](http://electriceptor.files.wordpress.com/2012/04/screen-shot-2012-04-30-at-11-56-42-pm.png)：

请注意格式如何应用于整个块。

有没有办法单独为每一行应用条件格式而不手动执行每一行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T12:04:10.450

由于 3 色条件格式不接受相对引用（无论您如何尝试使用 、 等“欺骗”Excel `INDIRECT`）`ADDRESS`，您最好的选择是使用此处的方法（示例是 2 色格式）：[https://superuser.com/questions/350378/excel-2007-conditional-formatting-so-that-each-row-shows-low-values-yellow-hig](https://superuser.com/questions/350378/excel-2007-conditional-formatting-so-that-each-row-shows-low-values-yellow-hig)

这与在每一行上使用格式刷相同（在多行上使用格式刷会让您回到查看所有行的正方形）。

```
Sub NewCF()
    Range("B1:M1").Copy
    For Each r In Selection.Rows
    r.PasteSpecial (xlPasteFormats)
Next r
Application.CutCopyMode = False
End Sub 
```

Also, there's no limit to the number of conditional formatting rules (at least in Excel 2010), but the more you have, the more potential there is for a negative impact on performance. You'll just have to try it and see. In the worst-case scenario, I would make 3-10 (or however many you can stand to make) individual rules based on a formula to create a "gradient", but this may be just as cpu-intensive.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T10:27:08.120

I've just tried using the fill handle on a cell with conditional formatting e.g. =COUNTIF(C2,"Yes")=1 then applies to $A2 and then selected that cell and dragged the fill handle - it adds the conditional formatting to each row automatically! jippee!

# iphone - 在 ios 应用程序 libRestKit.a 上安装 RestKit.FrameWork 文件丢失，它是 RedColor？

> ID：10394593
> 
> 赞同：3
> 
> 时间：2012-05-01T07:01:38.200
> 
> 标签：iphone, ios, xcode, static-libraries, restkit

我正在尝试 `RestKit.FramWork`根据[文档在 ios 应用程序上添加/安装](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

配置目标依赖后，我正在尝试添加 Link Binary With Libraries。如果我添加`libRestKit.a`此文件丢失。它显示为红色。

![在此处输入图像描述](../Images/2c802684855d744fd18966a8b6710d1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:05:13.387

在新的 Xcode 中添加库时，有时必须将文件拖放到 finder 中的项目目录中并重新启动 Xcode。重新启动 Xcode 后，将文件从 finder 窗口（您的项目目录）拖放到您的 Xcode 项目资源管理器中，然后选中“添加文件”小框。这就是我得到的。

# java - 还有另一种类型的 JTree 吗？

> ID：10394600
> 
> 赞同：1
> 
> 时间：2012-05-01T07:02:37.517
> 
> 标签：java, swing, tree, binary-tree, jtree

我想在java中创建一个图形树，就像这个二叉树：

![二叉树](../Images/152e714d5026e433b5181dd7c2cba779.png)

我用过`JTree`，但我所能拥有的只是一个文件树：

![文件树](../Images/f571a9021ef7c52e9cd8d8e9487c0f1d.png)

我希望我的树是垂直的，如果子节点位于父节点的两侧而不是总是在同一侧，那就太好了。

谢谢您阅读此篇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:11:14.223

我认为您想以分层形式表示您的数据。如果是这样，则有一个关于此的现有帖子。

[如何在 Java 中显示树的层次结构？](https://stackoverflow.com/questions/2101468/how-to-display-tree-hierarchy-in-java)

# android - CNNAN0020W 套接字 4 上的套接字错误，对等地址 :57710; 结束连接

> ID：10394602
> 
> 赞同：2
> 
> 时间：2012-05-01T07:02:55.717
> 
> 标签：android, notifications, push, mqtt, broker

我已经为真正的小型消息代理（RSMB MQTT）安装了 php SAM 库。我正在尝试连接 Android Push Demo，但出现以下错误

> [root@user linux_ia64]# tail -f nohup.out
> 20120501 120111.226 CWNAN9997I 许可材料 - IBM 的
> 财产 20120501 120111.226 CWNAN9996I 版权所有 IBM Corp. 2007, 2010 保留所有权利
> 20120501 120120501 120120501 120111.226 美国政府用户受限使用、95I 复制或披露受限 CWNA与IBM Corp.
> 20120501 120111.226 CWNAN0053I版本1.2.0，20101年8月18日17：02:09
> 20120501 120111.226 CWNAN0054I功能包括：桥梁
> 2012010101011.226 CWNAN99993I作者：iCrian craggs：iCrraggs
> ： CNNAN0014I MQTT 协议正在启动，正在侦听端口 1883
> 
> **20120501 120126.609 CNNAN0020W 套接字 4 上的套接字错误，对等地址 ipaddress:34861；结束连接**

请任何人帮助解决上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:28:30.630

你在哪里运行 PHP 服务器？您是否有可能与 MQTT 代理之间的连接有问题？

SAM PHP 库相当老旧，目前没有维护，因此您可能想查看其他 PHP MQTT 选项之一，例如 phpMQTT。

# c# - c# 中字符串生成器的字符文字中的字符太多

> ID：10394604
> 
> 赞同：-2
> 
> 时间：2012-05-01T07:02:59.793
> 
> 标签：c#, javascript, asp.net, stringbuilder

我正在使用如下的字符串生成器...

```
 protected void Page_Load(object sender, EventArgs e)
 {       
    System.Text.StringBuilder sb = new System.Text.StringBuilder(); 
    sb.Append("<script language='javascript'>function Open() {"); 
    sb.Append(string.Format("window.open('Chat.aspx?rid={0}'",lstRooms.SelectedValue));
    sb.Append(, 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'");return false;"); 
    sb.Append("}</script>"); 

    if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock")) 
    {
        ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString()); 
    }

    if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock")) 
    {
        ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString()); 
    }

    lblFacultyNo.Text = Session["User_Id"].ToString();
    lblUserType.Text = Session["User_Type"].ToString();

    pnlChat.Visible = false;        
} 
```

现在我在这一行出现错误....

```
 sb.Append(, 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'");return false;"); 
```

对于哪个错误我得到了这个错误请帮助我快速解决它......谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:05:05.963

您需要为字符串使用引号，`"`而不是撇号`'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:06:02.990

问题是你使用 ' 作为字符串文字，而你应该使用 ". ' 来表示字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:05:40.337

如果你想在前面放一个双引号`return false`，你需要转义它-注意我添加的反斜杠

```
sb.Append(",newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'\");return false;"); 
```

但是它看起来并不平衡 - 我没有看到匹配的双引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:05:45.710

你在第 4 行的开头缺少 "

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T07:06:15.183

语法着色应该在这里指导您。您的字符串格式错误：

```
//sb.Append(,'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'");return false;");     
sb.Append(", 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500'\");return false;"); 
```

最后是

```
 right=500'\");return false;"); 
```

或者

```
right=500');return false;"); 
```

# java - 在 Windows 操作系统中查找当前登录的用户是否是管理员

> ID：10394609
> 
> 赞同：-3
> 
> 时间：2012-05-01T07:04:09.467
> 
> 标签：java, windows

> **可能重复：**
> [检测 Java 应用程序是否以管理员身份运行](https://stackoverflow.com/questions/4350356/detect-if-java-application-was-run-as-an-admin)

如何确定运行我的 Java 应用程序的用户是否是 Windows 管理员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:08:51.380

Java 是跨平台的，无法直接查看用户是否是 Windows 管理员。一般来说，您应该检查您需要的特权，而不是依赖一些关于成为 Windows 管理员意味着什么的知识。例如，如果您需要写入文件，请直接检查该文件是否可写等...

# windows-phone-7 - AdControl SDK 版本 6.1.320.0 不提供测试广告

> ID：10394613
> 
> 赞同：0
> 
> 时间：2012-05-01T07:04:48.473
> 
> 标签：windows-phone-7, windows-phone-7-emulator

我在使用适用于 Windows Phone 的 AdControl SDK(6.1.320.0) 时遇到了一些问题，想知道是否还有其他人在这里遇到了问题。我的问题是 AdControl 也没有在模拟器和设备上显示测试广告。我在多台机器上进行了测试，甚至创建了一个新的测试项目来试用它。

这是我的 XAML 代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
<my:AdControl AdUnitId="Image480_80" ApplicationId="test_client" Height="80" HorizontalAlignment="Left" Margin="-34,118,0,0" Name="adControl1" VerticalAlignment="Top" Width="540" />
</Grid> 
```

这是我到目前为止所做的：

1.  添加广告控件的erroroccured事件，并打印错误。它显示“HTTP 错误状态代码：NotFound (404)”

2.  我检查了清单中的所有功能。它包含所有功能，因为它是默认的测试项目。

3.  然后我在我的工作电脑上尝试了同样的方法，以前没有 Windows Phone SDK 和 AD SDK。它也不在那里工作。

4.  然后我反编译了 Silverlight 程序集的 Ad SDK，并找到了生产和测试服务器的 URL。

AdPlacement.ServerUrl = "https://mobileads.msn.com/v3/Delivery/Placement"; AdPlacement.TestServerUrl = "https://mobileads-test.msn.com/v3/Delivery/Placement";

测试服务器 url 根本没有连接。我在 Windows 7 x64 终极机器上使用 VS2010 终极版。

还有什么想法吗？我也联系了 microsoft DOT com 的 psupport，但尚未得到他们的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:51:02.170

在通过 MS 广告中心支持发送几封电子邮件后，他们可以在尝试从外部网络连接时在内部重现该问题。他们今天下午解决了这个问题。它在我这边没有任何代码更改的情况下工作。问题是提供测试广告的广告服务器“无法从 MS 网络外部访问 https://mobileads-test.msn.com/v3/Delivery/Placement！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:48:23.513

我个人从来不理解测试模式的必要性。我从不使用测试模式.. 只需为应用程序/广告单元设置正确的配置即可。

# text - weka中的一元类文本分类？

> ID：10394615
> 
> 赞同：2
> 
> 时间：2012-05-01T07:05:10.813
> 
> 标签：text, machine-learning, classification, weka, svm

我有一个特定类别（比如癌症）的训练数据集（文本）。我想在 weka 中为这个类训练一个 SVM 分类器。但是，当我尝试通过创建一个文件夹“cancer”并将所有这些训练文件放入该文件夹来执行此操作时，当我运行代码时，我收到以下错误：weka.classifiers.functions.SMO：无法处理一元类！

我想要做的是，如果分类器找到与“癌症”相关的文档，它会正确显示类名，一旦我输入了非癌症文档，它应该会显示类似“未知”的内容。

我应该怎么做才能得到这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:21:38.950

Weka 中的 SMO 算法只在两个类之间进行二元分类。顺序最小优化是解决 SVM 的特定算法，在 Weka 中，这是该算法的基本实现。如果你有一些例子是癌症而一些不是，那么这将是二元的，也许你没有正确标记它们。

但是，如果您使用的是所有癌症示例的训练数据，并且您希望它告诉您未来的示例是否符合该模式，那么您正在尝试进行一类 SVM，也就是异常值检测。

[Weka 中的 LibSVM](http://weka.wikispaces.com/LibSVM)可以处理一类 svm。与 Weka SMO 实现不同，[LibSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)是一个独立程序，它已与 Weka 连接，并结合了 SVM 的许多不同变体。[Wekalist 上的这篇文章](https://list.scms.waikato.ac.nz/mailman/htdig/wekalist/2007-October/011631.html)解释了如何在 Weka 中使用 LibSVM。

# reporting-services - 在 tfs 迁移到新硬件时删除报告服务加密密钥

> ID：10394625
> 
> 赞同：0
> 
> 时间：2012-05-01T07:05:48.787
> 
> 标签：reporting-services, tfs, migration

我想**将我的 tfs 2010 和 sharepoint 2010 从一个硬件移动到另一个硬件**。解决方案很清楚。但问题是，由于源硬件中的**报告服务**发生了**崩溃，****我丢失了**用于 tfs 报告服务的加密密钥。现在我正在新硬件上安装新的 sql server 实例和报告服务。

 ****问题是：**有没有办法在目标硬件上使用新的加密密钥重新创建报告服务数据库？**移动 tfs 和 sharepoint 后，我​​想重新创建报告数据库并使用新的加密密钥。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:25:22.603

唯一加密的是 OLAP 和 TFSWarehouse 数据源的 SQL 数据库连接字符串。然后，您将数据库从一种硬件配置备份/恢复到另一种硬件配置，无论如何您都应该重新创建它们。所以 RS Key 对你没用。

确保您遵循[此处Microsoft 过程的“配置报告和分析服务”部分](http://msdn.microsoft.com/en-us/library/ms404869.aspx)

**更新** 请参阅[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/tfsreporting/thread/fc53be12-2ebd-41c8-a66a-ccd4437033fd/)，它为您提供了恢复 SQL 连接的过程。****

# lua - Tile Collision Detection

> ID：10394630
> 
> 赞同：0
> 
> 时间：2012-05-01T07:06:23.573
> 
> 标签：lua, tile, love2d

So, I have been working on this game for a bit. However, over the past day I have not been able to figure out how to work my collision detection.

The scale at default is equal to 2.

The player is 41*scale by 64*scale.

My player is centered in the middle of the screen in both the x and y axis.

Since the player is centered the world is what moves, those variables are worldx and worldy. The player always stays at the center of the screen.

My tile map is stored in an array and is based on the image pixel color. If the pixel is white at map[x][y] the value is set to 0 else it's set to the block. Meaning the block does not get rendered.

```
for x = 0, w-1 do --scans the image and builds the map array
   amap[x] = {}
   for y = 0, h-1 do
      local r, g, b, a = source:getPixel(x, y)
      if r == 255 and g == 255 and b == 255 then
         block = 0
      end
      if r == 255 and g == 100 and b == 0 then
         block = 1
      end
      if r == 130 and g == 125 and b == 0 then
         block = 2
      end
      if r == 76 and g == 76 and b == 76 then
         block = 3
      end
      if r == 255 and g == 0 and b == 255 then
         --this is the spawn pixel yet to build
      end
      amap[x][y] = block
   end
end --end function 
```

function that draws the map

```
for x = 0, w-1 do --draws the map
   for y = 0, h-1 do
      if amap[x][y] ~= 0 then
         love.graphics.drawq(ImgBlocks, Blocks[amap[x][y]], 32*x*(3/bscale) + worldx, 32*y*(3/bscale) + worldy + jy, 0 , 3/bscale, 3/bscale)
      end
      if amap[x][y] == 4 then  
      end
   end
end --end function 
```

The function needs to return true or false base on if there is collision between player and block.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:32:33.023

Your tiles are 32x32, correct? (from the `drawq` call) I would recommend you make a function that checks if a point is in a solid tile:

```
function pointCollisionTest(x, y)
    -- find which tile the point is in
    local tx, ty = math.floor(x / 32), math.floor(y / 32)
    -- check the tile
    if map[tx][ty] == solid then
        return true
    else
        return false
    end
end 
```

You'll have to change the `if map[x][y] == solid` logic based on how you determine solid tiles, but this code should otherwise work.

Once you have point collision, the way you make the player collide is by checking each corner of its hitbox (which you should easily be able to determine) against this function whenever the player moves. There are a few ways to do this; I use the relatively simple method of calculating the player's new position, testing it, then canceling the move entirely if the collision test returns true. You have to check/cancel the x and y components of the move separately, though, so the player can move along walls instead of sticking to them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T22:48:13.493

Are you asking for a basic 2d collision detection?

A simplified formula: if (playerx > blockminx) and (playery < blockmaxx) and (playery > blockminy) and (playery < blockmaxy) then collission

# java - 关于对主要方法（）进行研究

> ID：10394634
> 
> 赞同：-7
> 
> 时间：2012-05-01T07:06:56.053
> 
> 标签：java

我今天在下面的代码中进行了一项有趣的研究，看看我们可以用多少种方式来表达公共静态无效

```
 //public static void main (String args[])correct
    //public static void main (String []args)//correct
    //public static void main(String...args)//correct
    //public static void main(String... args)//correct
    public static void main(String[]... args)   //correct 
    static  public  void main (String args[]) 
```

请告知是否还有其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:38:37.247

该`main`方法必须声明为`public`, `static`, 和`void`; 从[JLS 12.1.4](http://%20docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.4)开始：

> 方法 main 必须声明为 public、static 和 void。它必须指定一个声明类型为字符串数组的形式参数（第 8.4.1 节）。因此，可以接受以下任一声明：
> 
> ```
>  public static void main(String[] args)
> 
>   public static void main(String... args) 
> ```

过去的一些 JVM 实现不需要可公开访问的`main`方法。有时这已被用于将私有测试方法添加到 API 中。

虽然方法修饰符`public`和`static`可以按任何顺序排列（[JLS 8.4.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3)），但它们都必须位于返回类型之前（[JLS 8.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)），因此任何组合`void static`都是非法的。

# java - 用于启动活动的按钮 if 语句

> ID：10394636
> 
> 赞同：-4
> 
> 时间：2012-05-01T07:07:19.043
> 
> 标签：java, android, button

我希望按钮仅在内容等于 America 时打开对话框。我该怎么做？我尝试创建一个对话框活动，然后使用一个意图我得到了对话框，但它是单独出现的，而不是当前活动！

```
if(check.contentEquals("america")){

                           // Then I want the dialog to open here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:09:51.847

尝试这个：

```
if(check.contentEquals("america")){
            imageview.setAlpha(0);
            Intent i = new Intent(ACTION NAME);
            startActivity(i);
} 
```

如果你想运行一个简单的对话框，你所要做的就是：

```
if(check.contentEquals("america")){
            imageview.setAlpha(0);
            mDialog.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:54:36.900

显示警报对话框试试这个：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setCancelable(true);
builder.setTitle("Title");
builder.setMessage("your message");
builder.setInverseBackgroundForced(true);
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
@Override 
public void onClick(DialogInterface dialog, int which) {
     dialog.dismiss();
  }
});
final AlertDialog alert = builder.create();

if(check.contentEquals("america")){
   alert.show();
} 
```

# iphone - 处理 ABPersonViewController 中的点击事件

> ID：10394637
> 
> 赞同：2
> 
> 时间：2012-05-01T07:07:25.797
> 
> 标签：iphone, ios, abpersonviewcontroller

我正在实施

```
- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier 
```

在我的自定义类中委托子类`ABPersonViewController`。委托方法正在捕获`ABPersonViewController`子类中的点击事件。但是我怎么知道哪个字段被点击了。例如。如果我单击家庭地址字段，我将如何在委托方法中处理这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:20:57.660

```
- (BOOL)personViewController:(ABPersonViewController *)personViewController shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
if(property == kABPersonAddressProperty){
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, property);
    CFStringRef address = ABMultiValueCopyValueAtIndex(multi, identifier);
    NSLog(@"Address %@", (NSString *)address);
    // Do your tasks here
    CFRelease(address);
}
return YES;
} 
```

就像`kABPersonAddressProperty`您可以检查所有其他属性一样，例如电话号码、电子邮件、网址等。

# php - 从 php 文件 (NSURL) 中获取简单的变量

> ID：10394639
> 
> 赞同：0
> 
> 时间：2012-05-01T07:07:29.043
> 
> 标签：php, iphone, objective-c

我正在尝试从我的 iphone 应用程序的 php 文件中获取版本名称。

```
//version.php
 <?php 
    echo '1.0'; 
 ?> 
```

如何将“1.0”放入 NSString？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:37:03.860

你可以试试这个：

```
<?php 

   echo json_encode(array('version' =>'1.0'));

?> 
```

您检索 json 字符串并（json）对其进行解码，获取数组。这个链接可以阻止你：http: [//mobileorchard.com/tutorial-json-over-http-on-the-iphone/](http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/)

# c# - 如果我不打算在添加元素时从列表中读取，是否有必要在添加元素之前锁定 C# 列表？

> ID：10394642
> 
> 赞同：1
> 
> 时间：2012-05-01T07:07:47.060
> 
> 标签：c#, multithreading, locking

这是一个MWE：

```
Func<Int32, Boolean> MyFunc = (s) => {
    var res = false;
    // Insert function logic to modify the value to res
    return res;
};
var Result = new List<Int32> ();
var LockObj = new Object ();
ParallelEnumerable.Range (1, 100000)
    .ForAll (s => {
        if (MyFunc (s)) {
            lock (LockObj) { // IS THIS NECESSARY?
                Result.Add (s);
            } // End lock
        }
    }); 
```

这就是情况归结为。如果我不打算在 ParallelEnumerable 语句完成执行之前查询它，我是否认为我不需要锁定 Result 是否正确？

**请注意**：我知道 MWE 可以通过“Where”子句更好地解决，如下所示：

```
ParallelEnumerable.Range (1, 100000)
    .Where (s => MyFunc (s)); 
```

但由于 MWE 中不明显的原因，无法做到这一点。

**编辑**

感谢所有回答的人。也感谢您的评论。我已经纠正了 Tung 发现的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:16:23.303

是的，你必须`lock`。Parallel.For 将导致并发调用`Add()`.

附带说明：

```
//var Result = new List<Int32> ();
var Result = new List<Int32> (100000);
ParallelEnumerable.Range (1, 100000) 
```

将使这更有效率。减少增长也意味着减少对`lock`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T07:12:57.853

添加到通用列表不是线程安全的。锁定是一种可能性。您还可以使用在 .Net 4.0 中引入的一种线程安全集合类型

查看[Parallel For Loop - 添加到列表时的问题以](https://stackoverflow.com/questions/2752358/parallel-for-loop-problems-when-adding-to-a-list)获取更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T08:25:40.980

您可以通过选择现有的并行集合之一来消除*很多争用：*

```
ConcurrentBag<int> bag=new ConcurrentBag<int>();
ParallelEnumerable.Range(0,10000).ForAll(s => {if(MyFunc(s)) bag.Add(s);}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:21:18.927

使用 Semaphore.it 将管理对共享资源的访问（在您的情况下为公共列表）。

# android - 自定义 (NFC) NDEF 格式

> ID：10394643
> 
> 赞同：3
> 
> 时间：2012-05-01T07:07:47.567
> 
> 标签：android, nfc, ndef

我想通过 LLCP 在一个 NDEF 记录中的 NDEF 消息中传输自定义数据（或者可能有效负载将跨多个 NDEF 记录分块）。传输的内容是具有特定格式的文件，仅在特定应用中有意义。那么，指定 NDEF 标头的最佳方法是什么？

1) 将 TNF 设置为 0x04（NFC 论坛外部类型）、0x03（绝对 URI）还是 0x05（未知）？0x04 将在 TYPE 字段中具有自定义相对 URI，如果是 0x03 绝对 URI。0x05 我不太喜欢，因为接收设备无法识别处理数据的应用程序，因为在这种情况下TYPE必须为空（这里只有ID字段可以帮助）。

2) ID 字段用于 NDEF 消息的唯一性，因此可以为空，也可以包含自定义标识符，例如`com.company.nfc.application_name&id=message_generated_uuid`

我的意见是 - 使用 TNF 0x03 或 0x04 是一种首选方式，除非消息需要一些额外的标识，否则将 ID 留空，这将更好地在有效负载之外传输。

BR 斯坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:25:28.940

如果您的应用程序还必须与 Android 2.3 Gingerbread 和可能的其他平台一起使用，我建议您使用您自己定义的 MIME 类型（TNF 字段设置为 0x02）。

Android 2.3 不支持外部类型，所以我不建议这样做。使用未知类型将无助于识别要使用的有效负载和/或应用程序。绝对 URI 类型被 Android 视为与众所周知的类型 URI RTD "U" 相同，因此可能会引起混淆。我不知道有任何平台会使用 ID 字段来识别要使用的应用程序。

您还可以在消息末尾添加一条[Android 应用程序记录，其中包含您的应用程序包名称。](http://developer.android.com/guide/topics/nfc/nfc.html#aar)在 Android 4 ICS 上，这将使您的应用优先于基于 NDEF 消息类型的任何其他潜在匹配项。

# java - 能不能用frameset提交具体的html表单，在某种意义上给人一种ajax的感觉？

> ID：10394645
> 
> 赞同：0
> 
> 时间：2012-05-01T07:07:58.433
> 
> 标签：java, html, frames

我正在处理遗留项目。在其中一个jsp中，它具有类似这样的级联帧

```
 <frameset >
     <frame src="Welcome.jsp">
        <frameset cols="9,*" >
     <frame src="Customer.jsp">
      <frame src="Account.jsp">
     </frameset>
  </frameset> 
```

我跳过了框架集/框架之间的 jsp 代码。

现在在一个 account.jsp 中，我有一个 html 表单，通过单击提交按钮提交。我在 UI 上看到的经验是只有 account.jsp 用新数据刷新（保留其他 jsp，如欢迎和客户完好无损）。我的理解是这只能通过 ajax 请求来实现。但是当我深入研究时，我发现它与表单提交相同的简单逻辑。

那么我的问题是为什么只有特定的框架被刷新而不是完整的页面。它是框架集功能吗？我试图对它进行谷歌搜索，但找不到特定表单提交与框架集的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:16:26.940

如果您在 iframe 上提交表单，则只有该 iframe 会刷新。这就是它的工作原理。我也找不到关于它的文档。它在某种程度上就像一个完全独立的选项卡。例如，您可以在框架中导航，就好像它是不同的选项卡一样。如果要刷新父页面，请使用：
`parent.location.href = parent.location.href`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:21:04.527

您可以将框架视为浏览器的不同实例，但在同一屏幕上呈现（就像选项卡式浏览一样），我们仅在需要分离所有部分并按照您所说的工作方式工作时才使用框架，如果您愿意要从一个框架更新其他框架，请使用 javascript 来获取该框架并为该框架设置 src 属性，如果要修改整个页面，则 window.top.src = new_page

# android - 使用少量图像获取 java.lang.OutOfMemoryError，使用 png 还是位图更好？

> ID：10394647
> 
> 赞同：1
> 
> 时间：2012-05-01T07:08:40.767
> 
> 标签：android, bitmap, out-of-memory

我有一些图片正在加载到我的程序中，这些图片似乎会导致 OutOfMemoryError。我更喜欢使用 .png 文件，因为它们有一个清晰的 alpha 层，但根据[这个 SO 链接](https://stackoverflow.com/a/823966/486086)，最好对图像使用 BitmapFactory 命令以避免 OoME。是否可以对 .png 文件使用 BitmapFactory 命令？是坚持使用 .png 文件还是尝试将它们全部转换为位图或其他图像格式更好？只有大约 393k 的图像价值。

错误代码：

```
05-01 03:07:36.197: E/AndroidRuntime(561): Caused by: java.lang.OutOfMemoryError
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.Bitmap.nativeCreate(Native Method)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.content.res.Resources.loadDrawable(Resources.java:1937)
05-01 03:07:36.197: E/AndroidRuntime(561):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601) 
```

编辑：我的图像加载了一种自定义图像视图

```
 <LinearLayout
     android:orientation="horizontal"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:gravity="bottom"
     android:layout_weight="0.55"
     android:id="@+id/dicemenu">

     <com.surreall.yacht.SquareButton        
        android:layout_height="fill_parent"
        android:layout_width="0dip"          
        android:layout_weight="1"
    >
        <ImageView
        android:id="@+id/die1"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:scaleType="centerInside"
        android:layout_height="wrap_content"
        android:layout_width="0dp"          
        android:layout_weight="1" 
        android:layout_margin="9dp" 
        />

      </com.surreall.yacht.SquareButton> 
```

并且自定义图像视图看起来像这样（有点长篇大论，是我从[这里发现](https://stackoverflow.com/questions/4656986/how-do-i-keep-the-aspect-ratio-on-image-buttons-in-android)的问题中得到的解决方案：

```
package com.surreall.yacht;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.LinearLayout;

public class SquareButton extends LinearLayout {

    public SquareButton(Context context) {
        super(context);
    }

    public SquareButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    // This is used to make square buttons.
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, widthMeasureSpec);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:26:48.433

`Bitmap.recycle()`当你不再需要你的图像时尝试做

# asp.net-mvc-3 - 一对多，一个视图我需要自定义模型吗？

> ID：10394648
> 
> 赞同：0
> 
> 时间：2012-05-01T07:08:40.813
> 
> 标签：asp.net-mvc-3, linq

我有一个基于数据库的第一个应用程序，所以我没有自制的模态，只有自动创建的模态。我想在单个视图中显示 html 表/列表中单行中选择的一个和多个部分，这是在重新创建的 MS Access 查询中工作得很好的 SQL， - 一些括号：

```
SELECT Facilitiy.FacilityName, Facilitiy.FacilityImage, FacilityDetail.FacilityDetailDescription
FROM FacilityDetail INNER JOIN Facilitiy ON FacilityDetail.FacilityDetailID = Facilitiy.FacilityFK
WHERE FacilityFK = id 
```

而 LINQ 为我提供了正确的列表中的许多部分：

```
from fd in db.FacilityDetails
join f in db.Facilities on fd.FacilityID equals f.FacilityFK
where f.B FacilityFK == id
select f 
```

我有点希望能像 SQL 那样做，但我需要创建一个模式，我可以把它放在一个视图中显示：

**设施图片（一侧） | 设施名称（一侧） | FacilityDetailDescription（多面）**

我听说我可以通过做这样的事情来简单地做到这一点？？？

```
from fd in db.FacilityDetails.Include("Facilities") 
```

但这似乎没有什么区别！

这让我相信我需要创建一个新的自定义模型？如果是这样我会怎么写？

我尝试过这样的事情，但我无法让它工作。

```
public class FacilitiyDetails
{
    public string FacilitiesDescription { get; set; }
    public string FacilitiesImage { get; set; }
    public string BeachFacilitiesDescription { get; set; }
{ 
```

我不太确定我应该在这里做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:44:05.933

是的，您将需要一个自定义模型，因为您想要显示多种类型。你需要有类似的东西：

```
public class FacilityModel
{
    public Facility Facility { get; set; }
    public List<FacilityDetails> FacilityDetails { get; set; }
} 
```

根据您上面的课程并假设您已经有一个 Facility 课程。然后您需要更改您的 LINQ 以首先获取 Facility 详细信息：

```
var facility = (from f in db.Facilities
                 where f.FacilityID == id
                 select f)
               .FirstOrDefault(); //just being safe here, 
                                  //if it's null, you'll want to escape out of
                                  //the code below 
```

然后，您需要通过以下方式获得`FacilityDetails`该设施的所有等价物：

```
var facilityDetails = (from fd in db.FacilityDetails
                      where fd.FacilityFK == id
                      select fd).ToList() 
```

然后，您可以通过执行以下操作创建模型的新实例：

```
var model = new FacilityModel
            {
                Facility = facility,
                FacilityDetails = facilityDetails
            }; 
```

# ios - 如何制作具有 1 周试用期的 iDevice 应用程序，然后要求用户付费？

> ID：10394649
> 
> 赞同：1
> 
> 时间：2012-05-01T07:08:47.887
> 
> 标签：ios, iphone, in-app-purchase

我正在开发一个 iDevice 聊天应用程序。该应用的用户可以免费使用1周，但试用期结束后，用户需要以1.99美元的价格进行应用内购买才能继续使用该应用，否则将被禁用。Apple 是否接受这样的条件，如果接受，我该如何实施？请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T08:10:45.680

苹果不会接受。App Store 审查指南指出：

1.  不允许包含在有限时间后过期的“出租”内容或服务的应用程序
2.  不允许使用“beta”、“demo”、“trial”或“test”版本的应用

根据您的描述，该应用程序到期后将是试用版，因此将无法使用，这是不允许的。

为避免应用因上述原因被拒绝，您应在试用期结束后为应用提供至少最低限度的功能。例如，您可以通过 IAP 提供无限制的聊天消息，对于未解锁此功能的人，您每天最多可以提供 10 条左右的消息，或者将消息与广告混合。

# php - 如果链接处于活动状态，则使悬停颜色保持不变

> ID：10394651
> 
> 赞同：0
> 
> 时间：2012-05-01T07:08:53.427
> 
> 标签：php, html, css, hover

我正在使用 PHP、HTML 和 CSS 开发一个网站。目前在我的导航栏中，我已将背景颜色设置为灰色。当用户将鼠标悬停在导航栏上时，每个链接都会获得蓝色背景，但是当我单击链接时，背景颜色会变回灰色。如果该特定链接处于活动状态，如何使悬停颜色保持蓝色。

这是我的导航栏的代码。

```
<tr>
<td width="800" height="54">
<div id="nav" >
<ax><b><font face="Arial" ><a style="text-decoration: none; color:#303030" href="index.php" >HOME</a></font></b></ax>
<bx><b><font face="arial" ><a style="text-decoration: none; color:#303030" href="edituser.php?own=y">IT</a></font></b></bx>
<cx><b><font face="arial" ><a style="text-decoration: none; color:#303030" href="newsevents.php">HUMAN RESOURCE</a></font></b></cx>
<dx><b><font face="arial" ><a style="text-decoration: none; color:#303030" href="industries.php">PROCUREMENT</a></font></b></dx>
<ex><b><font face="arial" size="1"><a style="text-decoration: none; color:#303030" href="http://www.csmphilippines.com/aboutus.html">FINANCE</a></font></b></ex>
<fx><b><font face="arial" ><a style="text-decoration: none; color:#303030" href="hact.php">HACT</a></font></b></fx>
</div>
</td> 
```

这是我的 CSS 的代码

```
#nav {
text-decoration:none;
padding-bottom:10px;
border-bottom:none;
width:
}

#nav ax {
display:inline;
padding:15px;
padding-left:31px;
padding-right:28px;
background-color:#ececec;
text-decoration:none;
}

#nav bx {
display:inline;
padding:15px;
padding-left:45px;
padding-right:45px;
background-color:#ececec;
text-decoration:none;
}

#nav cx {
display:inline;
padding:15px;
padding-left:45px;
padding-right:45px;
background-color:#ececec;
text-decoration:none;
}

#nav dx {
display:inline;
padding:15px;
padding-left:45px;
padding-right:45px;
background-color:#ececec;
text-decoration:none;
}

#nav ex {
display:inline;
padding:15px;
padding-left:53px;
padding-right:53px;
background-color:#ececec;
text-decoration:none;
}

#nav fx {
display:inline;
padding:15px;
padding-left:30px;
padding-right:30px;
background-color:#ececec;
text-decoration:none;
}

#nav ax:hover {
background-image:url(images/tabbackit.jpg); 
background-repeat:repeat-x;
height:900px;
}

#nav bx:hover {
background-image:url(images/tabbackit.jpg); 
background-repeat:repeat-x;
height:900px;
}
#nav cx:hover {
background-image:url(images/tabback.jpg); 
background-repeat:repeat-x;
height:900px;
}

#nav dx:hover {
background-image:url(images/tabbackproc.jpg); 
background-repeat:repeat-x;
height:900px;
}
#nav ex:hover {
background-image:url(images/tabbackfin.jpg); 
background-repeat:repeat-x;
height:900px;
}

#nav fx:hover {
background-image:url(images/tabbackhact.jpg); 
background-repeat:repeat-x;
height:900px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:13:30.827

我这样做的方法是在 body 标记中为每个页面提供自己的 id：

```
<body id="pgAbout"> 
```

然后为每个菜单项设置一个单独的 id：

```
<li id="mnuAbout"> 
```

使用 CSS，您现在可以为您所在的页面设置链接样式：

```
#pgAbout #mnuAbout,
#pgOther #mnuOther
{
   /* Styles here */
} 
```

[这是一个简短的演示](http://jsfiddle.net/mFNHy/)

**更新**

[这是另一个使用您自己的 HTML 的演示](http://jsfiddle.net/nqzNm/)，以阐明它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:22:13.570

您可以做的一件简单的事情是为所有页面使用相同的样式表，但使用不同的 CSS 类来突出显示每个页面上的相应链接。例如，在 index.php 上，使用`.active`该类突出显示 Home 链接。

既然你是新人（如你所说），让我们分解一下：

对所有页面使用相同的 CSS。但是，为导航栏元素定义两个 CSS 类：一个是`.regular`状态，另一个是`.active`状态。在每个页面中，将与该页面对应的链接指定为活动类，而其他链接保留在常规类中。

但是，您是否希望它*保持*链接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:39:55.883

很简单，只要把下面的代码，例如，在首页，把下面的代码放在HEAD

```
<style type="text/css">
    #nav ax{
        background-image:url(images/tabbackit.jpg); 
        background-repeat:repeat-x;
    }
</style> 
```

# jira - JIRA 查询以检查父问题是否具有特定的子任务

> ID：10394654
> 
> 赞同：3
> 
> 时间：2012-05-01T07:09:27.133
> 
> 标签：jira, jql

我们需要审核我们的 JIRA，以确保每个 JIRA 都有特定的子任务。

我们需要确保 JIRA 具有以下结构：

父
- 子任务类型 1
- 子任务类型 2
- 子任务类型 3

我尝试使用[CraftForge](https://plugins.atlassian.com/plugins/org.craftforge.jira.craftforge-jql-functions-plugin)插件，但我不确定如何使查询正常工作。我想我需要类似的东西：

```
issue in parentIssuesFromQuery(
  issuetype in subTaskIssueTypes() 
  and (
     issuetype = 'subtask type 1' and 
     issuetype = 'subtask type 2' and
     issuetype = 'subtask type 3'
   )
) 
```

但显然这不会返回任何结果。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:56:49.793

好的，所以我解决了。我需要做几个查询：

```
 not (
   (issue in parentIssuesFromQuery("issuetype in subTaskIssueTypes() AND 
      issuetype = 'subtask type 1'")) and 
   (issue in parentIssuesFromQuery("issuetype in subTaskIssueTypes() AND 
      issuetype = 'subtask type 2'")) and 
   (issue in parentIssuesFromQuery("issuetype in subTaskIssueTypes() AND 
      issuetype = 'subtask type 3'"))
 ) 
```

尽管它有效，但它非常慢。将不胜感激有关如何更有效地做到这一点的任何建议。

# java-me - 如何在 J2ME 中执行 XOR 操作

> ID：10394655
> 
> 赞同：-2
> 
> 时间：2012-05-01T07:09:39.570
> 
> 标签：java-me

我想知道在 J2ME 中是否有任何方法可以执行 XOR 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:13:39.590

`!=`的[真值表](http://en.wikipedia.org/wiki/Exclusive_or#Truth_table)与 XOR 相同。

# process - 为什么进程最初以内核模式运行

> ID：10394658
> 
> 赞同：1
> 
> 时间：2012-05-01T07:10:02.023
> 
> 标签：process, operating-system

为什么fork创建的进程先运行在内核态，然后运行在用户态？为什么它不直接在用户模式下运行？如果dispatcher直接在用户态运行会出现什么问题？

这是图片链接：[UNIX进程状态转换图](http://www.docstoc.com/docs/23940071/Figure-315-UNIX-Process-State-Transition-Diagram)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:29:27.067

因为`fork`是（在最低级别）在内核空间中执行的系统调用。

一个进程进入内核模式（作为 的一部分`fork`），两个出来。这意味着其中一个必须从那里开始:-)

# python - 如何在 numpy 中添加计算/计算列？

> ID：10394659
> 
> 赞同：3
> 
> 时间：2012-05-01T07:10:07.190
> 
> 标签：python, arrays, numpy, calculated-columns

假设我有一个 numpy 数组：

```
1 10
2 20
3 0
4 30 
```

我想添加第三列，其中每一行是该行前两列的总和（或一些任意计算）：

```
1 10 11
2 20 22
3 0  3
4 30 34 
```

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T07:49:05.747

对于这些类型的计算，内置的[map 函数](http://docs.python.org/library/functions.html#map)非常有用。只需将计算结果添加到第三列即可。求和：

```
>>> import numpy as np
>>> my_arr = np.array([[1, 10], [2, 20], [3, 0], [4, 30]])
>>> np.vstack( (my_arr.T, map(sum, my_arr) )).T
array([[ 1, 10, 11],
       [ 2, 20, 22],
       [ 3,  0,  3],
       [ 4, 30, 34]]) 
```

它也适用于其他功能：

```
>>> my_func = lambda x: 2*x[0] + x[1]
>>> np.vstack( (my_arr.T, map(my_func, my_arr) )).T
array([[ 1, 10, 12],
       [ 2, 20, 24],
       [ 3,  0,  6],
       [ 4, 30, 38]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T07:19:56.493

```
import numpy

my_arr = numpy.array([[1, 10],
                      [2, 20],
                      [3, 0],
                      [4, 30]])
column0 = my_arr[:,0:1]  # Use 0:1 as a dummy slice to maintain a 2d array
column1 = my_arr[:,1:2]  # Use 1:2 as a dummy slice to maintain a 2d array
new_column = column0 + column1
my_arr = numpy.hstack((my_arr, new_column)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T07:22:50.127

尝试以下

注意沿轴 1 的 np.sum 将逐行添加元素。然后，您可以将结果重塑为列矩阵，最后附加到原始数组

```
>>> new_col = np.sum(x,1).reshape((x.shape[0],1))
>>> np.append(x,new_col,1)
array([[ 1, 10, 11],
       [ 2, 20, 22],
       [ 3, 30, 33],
       [ 4, 40, 44]]) 
```

或在一行中

```
np.append(x,np.sum(x,1).reshape((x.shape[0],1)),1) 
```

# python - 非常慢的 cython 课程？

> ID：10394660
> 
> 赞同：6
> 
> 时间：2012-05-01T07:10:32.580
> 
> 标签：python, performance, class, cython

此代码包含 cython 类：

```
cdef class Bench:
    cdef long n
    def __cinit__(self, long n):
    self.n = n

    cpdef int factors(self):
        n = self.n
        cdef int fac = 0
        cdef unsigned long i
        for i in range(2, n):
            if n % i == 0:
                fac += 1

        return fac

if __name__ == "__main__":
    print "hw" 
```

在编译为 python 扩展后我这样调用：

```
from time import time
t1 = time()
import factors_class
ben = factors_class.Bench(1000000007)
print ben.factors()
t2 = time()
print t2 - t1 
```

它打印出 207.374788046 (Seconds)

但是纯 python 版本（只有函数和对它的调用）在 ~ 77 秒内运行，没有类结构的 cython 代码在 ~ 10.2 秒内运行

cython 中的无类版本：

```
cdef int factors(unsigned long n):
    cdef int fac = 0
    cdef unsigned long i
    for i in range(2, n):
        if n % i == 0:
            fac += 1

     return fac

print factors(1000000007)

if __name__ == "__main__":
    print "hw" 
```

蟒蛇版本：

```
def factors(n):
    fac = 0
    for i in xrange(2, n):
        if n % i == 0:
            fac += 1

    return fac

print factors(10000007) 
```

我想在我的库中使用 cython 类，但是与 cython 中的函数式编程相比，它们似乎非常慢。显然，我的 cython 类代码有问题。我怎样才能提高它的速度？

总结基准测试结果：

Cython 类：206s

赛通：10.2s

蟒蛇：77s

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T07:39:56.653

为局部变量 n 声明一个类型：

```
cdef long n = self.n 
```

# android - 如何将绘制的图像转换为android中的字符？

> ID：10394665
> 
> 赞同：1
> 
> 时间：2012-05-01T07:11:24.933
> 
> 标签：android, android-canvas

我需要将用户在画布上绘制的图像转换为相应的字母或数字。假设如果用户在画布上绘制 'a' ，它应该被转换为正确的文本字符 'a' 。请提供一些输入以继续这种方式。

# iphone - 放大和缩小到 UIImage

> ID：10394666
> 
> 赞同：2
> 
> 时间：2012-05-01T07:11:28.243
> 
> 标签：iphone, uiimageview

我需要根据音频文件为 UIImage 制作动画；当声音开始时，我需要缩放到某个点，然后应用相同的动画进行缩小。我试图应用 CGAffineTransformMakeScale 但它不会制作动画。将放大/缩小应用到图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:21:35.087

把图片放到一个UIImageView中，然后用uiview动画，重新设置frame

例子 ：

首先，您像往常一样部署映像

```
 UIImage *myImg = [UIImage imageNamed:@"myImage.png"];
    UIImageView *myImgView = [[UIImageView alloc]initWithImage:myImg];
    [myImgView setFrame:CGRectMake(10, 10, 100, 100)];
    [self.view addSubview:myImgView]; 
```

然后你实现动画代码使视图更大

```
//START THE ANIMATION
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [myImgView setFrame:CGRectMake(10, 10, 300, 300)]; //re-set your image view size so that it become bigger
    [UIView commitAnimations]; 
```

或者你可以使用方法 animate （这有点先进，但我认为更好）

```
//START THE ANIMATION
    [UIView animateWithDuration:1.0 animations:^
    {
        [myImgView setFrame:CGRectMake(10, 10, 300, 300)]; //re-set your image view size so that it become bigger
    } completion:^(BOOL finished)
     {
         //type here what you want your program to do after the animation finished
     }]; 
```

祝你好运：D

# jpa - 域对象是否与 JPA 实体相同？

> ID：10394667
> 
> 赞同：8
> 
> 时间：2012-05-01T07:11:36.063
> 
> 标签：jpa, domain-object

域对象是否与 JPA 实体相同？如果我有一个价值对象（例如美元钞票），我如何（甚至应该）将它作为参考对象存储在数据存储中？

域对象在某些情况下是实体而在其他情况下是值对象的微妙之处是什么？任何人都可以指导我找到一篇关于这方面的好论文吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T20:54:43.027

“域对象”是一个更具概念性的术语；“JPA 实体”是指用于实现域对象的特定技术。

通常域对象对应于您域中的名词（订单、发票、客户等）。通常我们认为这些更接近数据库而不是纯粹的数据传输对象。因此，例如，您可能会在用于实现域对象的类上看到 ORM 注释。

很多人以一种贫乏的方式实现域对象——主要是使用 ORM 映射的属性，但域对象本身没有真正的逻辑。他们将逻辑放在域服务中。

另一方面，领域驱动设计的支持者将逻辑放在领域对象上。

无论哪种方式，这些都是您系统中的域对象。

JPA 实体是您使用@Entity、@Column、@ManyToOne 等注释的类。这是一种实现域对象的方法。如上所述，您可能决定将域逻辑放在对象本身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T19:25:20.153

在领域驱动设计的背景下，它们是不一样的。域对象可以是包含实体和值对象的聚合，并且应该忽略持久性。因此，它不应包含任何 JPA 注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-10T19:48:00.340

不，领域对象是具有丰富行为的对象，代表了业务的相关概念。JPA 实体是持久性的技术解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-11T20:46:56.103

> 域对象是否与 JPA 实体相同？

不，他们不是。

> 如果我有一个价值对象（例如美元钞票），我如何（甚至应该）将它作为参考对象存储在数据存储中？

我建议使用 @Embeddable 存储值对象。VO 不需要@Id，您应该只从父级引用它们（它们与父级存储在同一个表中）。如果是集合，请使用 @ElementCollection。

@Emedded 值对象在 Hibernate 中表现更好：

*   如果您不使用 @OneToOne，则您没有 JOINS。
*   值对象集合可以通过一次 DELETE 删除，并且不必在删除前加载。

> 域对象在某些情况下是实体而在其他情况下是值对象的微妙之处是什么？

实体是由@Id 区分的对象，相反，值对象是由值区分的。值对象通常被实现为不可变的，而实体/域对象包含改变其状态的业务逻辑。

在某些业务案例中，您需要将域对象表示为值对象，即快照，例如，您可以将其传递给另一个聚合或在域事件中发布。

> 任何人都可以指导我找到一篇关于这方面的好论文吗？

书籍：实施领域驱动设计，Vaughn Vernon。

# javascript - 使用 Jquery 解析 HTML 和 Javascript

> ID：10394669
> 
> 赞同：-1
> 
> 时间：2012-05-01T07:11:39.757
> 
> 标签：javascript, jquery, parsing

假设我有这样的 html 并且会使用 ajax 请求：

```
<html>
    <body>
        <div id="main">
            <div class="content"></div>
            <script>
            $(".content").doaction();
            </script>
        </div>
    </body>
</html> 
```

是否可以使用 jquery 获取（解析）#main，包括其中的 javascript 标记和内容？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:19:20.270

> 是否可以使用 jquery 获取（解析）#main，包括其中的 javascript 标记和内容？

不容易 - jQuery 在处理文本节点方面非常糟糕。

您*可以*使用`$('script').contents()`仅获取脚本，但没有简单的方法可以一次性构建包含元素*和*文本节点的嵌套对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:31:07.290

您可以在 Ajax 加载的成功回调中触发该`$(".content").doaction()`权限。

在 ajax 加载后，我从未见过嵌套 JavaScript 的工作示例。

# variables - 为什么'let'引入的绑定在范围内受到限制？

> ID：10394671
> 
> 赞同：1
> 
> 时间：2012-05-01T07:11:59.943
> 
> 标签：variables, lisp, scope, let

在 Lisp 中（我还在用 SBCL 学习 Lisp），局部变量是用 声明的`let`，作用域只在那个表达式内。这是为什么？与其他命令式语言（如 C/C++/Java...）不同，我们可以在其函数范围内的任何位置自由使用局部变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T09:08:02.177

只是对 let 是什么的另一个小见解。它基本上是“向后拼写”的匿名函数的应用程序。

我将使用 JavaScript 进行说明，因为它更像是 C 语言，并且很好地说明了这个概念。

```
(function(variableA, variableB){
  console.log("variableA = " + variableA);
  console.log("variableA * variableB = " + variableA * variableB);})(6, 7); 
```

现在，让我们为这些部分命名：from `function`to`;}`是函数定义。`(definition)(arguments)`是应用程序。Let 表达式本质上做同样的事情，即它调用一个带有参数的匿名函数，您在该函数内部将其用作变量。所以，如果你考虑前面的例子，用 let 形式重写它会变成这样：

```
(let(variableA = 6, variableB = 7){
  console.log("variableA = " + variableA);
  console.log("variableA * variableB = " + variableA * variableB);}); 
```

*（JavaScript 还不支持 let，所以上面不是一个有效的代码示例，但它应该是一个说明）*

您还应该注意，它并不是*那么*简单。因为在更复杂的情况下，您可能希望在构造另一个参数时引用其中一个参数 - 然后您将使用`(let* ...)`, 或者您希望将函数用作此表达式的参数，然后您将使用`(flet ...)`or `(labels ...)`。但总体思路是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T07:41:56.213

Lisp 有一个用于引入局部变量的结构。它设置了一个范围。您可以在任何允许使用表单的地方使用它。对此的两个主要结构是 LET 和 LET*。Ait 允许我们独立于函数定义局部变量。当我们需要局部变量时，我们不需要引入函数，并且我们使用它来使局部变量具有最小范围。

另请注意，DEFUN 允许您声明局部变量：它允许参数列表中的 &AUX 引入它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T19:15:09.233

`let`与您所指的其他样式之间的区别纯粹是语法糖之一。在可以在“任何地方”引入新变量的语言中，仍然存在嵌套范围，只是它们在表面语法中被展平。例如

```
{
  x = 3;
  x++;
  y = 4;
  print "hi";
  z = 42;
} 
```

这里不只有一个范围，而是不同的范围。有一个以`x`开头的范围`x = 3`。然后有一个以`y`开头的范围`y = 4`。如果您在该范围之前引用`y`，则会出现错误。

这种事情被 Lisp 排除在外，因为它为处理代码的代码的开发增加了很多精力。这种语言的编译器必须分析该代码并恢复显示嵌套`let`结构的抽象语法树结构，以便编译器的剩余通道不必继续重新分析代码以重新发现该信息。

在 Lisp 中，我们直接用抽象的语法树结构编写，就是这样。这使得语言统一。一切都是一种形式，如果它是一种复合形式，它在最左边的位置有一个运算符，它以一种与上下文无关的方式确定该形式其余部分的含义。

例如，请参阅这个最近的问题：[find free variables in lambda expression](https://stackoverflow.com/questions/10368809/find-free-variables-in-lambda-expression) 。如果通过绑定特殊形式（例如`let`，或通过扩展为此类特殊形式的小程序集的宏）来触发 lambda 表达式中的自由变量，则要容易得多。

另请注意，尽管 Lisp 无论如何都没有强制执行函数式风格，但它比那些类型的语言更普遍（注意我在虚构的“{} 语言”中的变量定义中有一些命令式语句。）如果你编写代码其中没有命令式语句，那么您就不会真正遇到这种情况。

在功能代码中，您*可以*采用以下形式进行连续绑定`let*`：

```
(let* ((x 1)                    x = 1;
       (y (1+ x))               y = x + 1;
       (z (/ x y))              z = x / y;
  (sqrt z))                     return sqrt(z); 
```

后面的初始化`let*`可以引用前面的绑定。

# php - SELECT CASE 缺少某些东西

> ID：10394672
> 
> 赞同：-1
> 
> 时间：2012-05-01T07:12:04.563
> 
> 标签：php, sql, select

你好我需要做这样的事情

检查一列是否有值，如果值是一，则 $display_output 是“某物” 如果值是二，则 $display_output 是“其他”

到目前为止我有这个

```
$sql_istorrenthere = $this->query("SELECT CASE WHEN torrent_download ='1' THEN $display_output = GMSG_NOTORRENT ELSE $display_output = GMSG_TORRENT ; FROM" . DB_PREFIX . "auctions" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:21:00.280

你不能这样设置变量。您可以将 torrent_download 的值设置为“某物”或“其他”：

```
$sql_istorrenthere = $this->query(
    "SELECT 
      CASE WHEN torrent_download = '1' 
        THEN 'something' 
        ELSE 'other' 
      END AS torrent_download
    FROM" . DB_PREFIX . "auctions"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:23:09.597

```
SELECT IF(STRCMP(torrent_download,'1'),'GMSG_TORRENT','GMSG_NOTORRENT') 
AS display_output
FROM " . DB_PREFIX . "auctions"; 
```

然后在 PHP 中，您可以执行以下操作：

```
$response = $sql_istorrenthere -> fetch_assoc();
$display_output = $response['display_output']; 
```

但是有更好的方法可以做到这一点，这些方法都不涉及尝试将变量名设置到查询本身中。

# wordpress - 非现有页面上的抓取错误

> ID：10394677
> 
> 赞同：0
> 
> 时间：2012-05-01T07:12:58.810
> 
> 标签：wordpress, google-search-console, qtranslate

去年我买了一个域名并开始在这里写博客：

[http://www.lengrand.fr/](http://www.lengrand.fr/)

作为一个法国人，我希望我的网站是双语的，并且使用了一段时间的 qtranslate。但我很快意识到，写更多的文章比花大量时间翻译相同的文章要好。. . 我的博客现在只有最近 6 个月的英文版。我所做的只是禁用 qtranslate 并删除任何特殊的东西。

我的问题是谷歌一直试图抓取我的法语页面，而我的页面上总是有很多不存在的 404。这里有些例子。

fr/tag/adblocker/ 404 14/04/12 fr/category/tips/ 404 02/04/12 fr/ 404 22/02/12 fr/tag/language/ 404 03/04/12

问题是，我怎样才能确保从索引中删除所有这些页面？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:11:00.697

创建或编辑您的 .htaccess 文件并添加以下内容。

```
redirect 301 /fr/ http://www.lengrand.fr/ 
```

这应该会更新搜索引擎的结果，因此他们现在知道文件夹 /fr/ 不再存在，并且他们尝试查找没有 /fr/ 的文章

因此，如果有人会去[http://www.lengrand.fr/fr/category/tips/](http://www.lengrand.fr/fr/category/tips/)它会直接去[http://www.lengrand.fr/category/tips/](http://www.lengrand.fr/category/tips/)并告诉搜索引擎该页面已移至该新网址。

# c++ - glXMakeCurrent 永远不会在多个多线程 linux opengl 应用程序中返回

> ID：10394679
> 
> 赞同：0
> 
> 时间：2012-05-01T07:13:20.930
> 
> 标签：c++, linux, opengl, xlib, juce

我在一台机器上运行 3 个基于 JUCE 的多线程 OpenGL 应用程序实例 - 每个实例都连接到单独的 X 显示器。主应用程序线程调用`XInitThreads`后跟`XOpenDisplay`相应的显示。然后将不同的线程用于主渲染循环。应用程序的 3 个实例依次初始化，以便在下一个启动时完成图形设置。

在 80% 的情况下，一切都可以正常启动，但有时在应用程序的第二个和/或第三个实例中，第 4 次调用`glXMakeCurrent`（这也是第一个由与初始化连接的线程不同的线程进行的调用）永远不会回来。X 线程已初始化，线程正在使用锁，并且在调用`glXMakeCurrent`X 显示器之前通过锁定`XLockDisplay`（并在调用返回后解锁）。

我确保每个应用程序都使用正确的显示和上下文。如果它纯粹与访问同一显示连接的多个线程的问题有关，那么第一个实例遇到此问题的可能性应该相同 - 但它从来没有遇到过。

任何想法为什么`glXMakeCurrent`不能返回，即使它拥有对其 X 显示器的独占访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:31:24.087

事实上，我错了，这个问题似乎是由 JUCE OpenGL 上下文中缺少锁引起的。因此，正确获取了 X 显示锁，但它应该映射到的上下文（在问题情况下）被另一个线程同时访问，从而导致`glXMakeCurrent`死锁。

# c# - 如何创建动态数据表？

> ID：10394680
> 
> 赞同：2
> 
> 时间：2012-05-01T07:13:24.507
> 
> 标签：c#, datatable

我想动态创建一个数据表列表，例如：

```
 DataTable[] Mydt = new DataTable(); 
```

并像这样填写：

```
Mydt[i] = ..... 
```

你知道 c# 中是否存在这样的语法吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T07:16:04.120

您可以使用以下代码示例，

```
 private static DataSet SampleData()
    {
        DataSet sampleDataSet = new DataSet();
        sampleDataSet.Locale = CultureInfo.InvariantCulture;
        DataTable sampleDataTable = sampleDataSet.Tables.Add("SampleData");

        sampleDataTable.Columns.Add("FirstColumn", typeof(string));
        sampleDataTable.Columns.Add("SecondColumn", typeof(string));
        DataRow sampleDataRow;
        for (int i = 1; i <= 49; i++)
        {
            sampleDataRow = sampleDataTable.NewRow();
            sampleDataRow["FirstColumn"] = "Cell1: " + i.ToString(CultureInfo.CurrentCulture);
            sampleDataRow["SecondColumn"] = "Cell2: " + i.ToString(CultureInfo.CurrentCulture);
            sampleDataTable.Rows.Add(sampleDataRow);
        }

        return sampleDataSet;
    } 
```

# javascript - 如何在网格编辑模式下以编程方式设置字段组件

> ID：10394685
> 
> 赞同：0
> 
> 时间：2012-05-01T07:13:59.040
> 
> 标签：javascript, extjs4

我想用组合框和字段编辑网格。在编辑选定的行时，在组合框的选择事件中，我想将一些值从数据库设置到网格中的字段。当行处于编辑模式时，我不知道如何在字段控件中设置任何值。有人建议“使用EditorGridPanel，您应该将编辑分配给控件而不是直接分配给数据库”，但我不知道该怎么做。

这是我的代码

```
var triprate_idEditor = {
xtype         : 'combobox'
, typeAhead     : true 
, triggerAction : 'all'
, displayField  : 'name'
, valueField    : 'id'
, store         : 'TriprateAllStore'
, queryMode     : 'local'
, emptyText     : 'Select a name...'
, listeners: 
  {
   select: function(combo, rec) {
        console.log(' here');
//        var triprateall = Ext.data.StoreManager.lookup('TriprateAllStore');
//        triprateall.filter(id:combo.value);

        var g = Ext.getCmp('Tripgrid-Id');
        //return default value 0
        console.log(g.getSelectionModel().selected.items[0].data.triprate); 

    //get triprate from database, excluded here 
    //set triprate to 400 but not in editor
    g.getSelectionModel().selected.items[0].data.triprate = 400;

    //return value 400
        console.log(g.getSelectionModel().selected.items[0].data.triprate); 
    }
}

var rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
    clicksToEdit: 2,
    id: 'TripEditingGrid',
    errorSummary: false
});

Ext.define('Fleet.view.grids.TripGrid',
{
    extend      : 'Ext.grid.Panel',
    alias       : 'widget.Tripgrid',  //xtype
    id          : 'Tripgrid-Id',  //Unique Id
    store       : 'TripStore',
    selType     : 'rowmodel',
    plugins: [rowEditing],
    columns :
            [
          {
              header    : 'id'
            , dataIndex : 'id'
            , width     : 80
            , field     : { xtype     : 'numberfield' } 
          },
          {
              header    : 'triprate id'
            , dataIndex : 'triprate_id'
            , width     : 100
            , filter    : true
            , editor    : triprate_idEditor
            , renderer  : function(value, metaData, record, rowIndex, colIndex, store, view){
                    return record.data.triprate_name7; //desc column for display in gird
                  }
          },
          {
              header    : 'triprate'
            , dataIndex : 'triprate'
            , width     : 80
            , field     : { xtype     : 'numberfield' } 
          },
          {
              header    : 'status'
            , dataIndex : 'status'
            , width     : 70
            , renderer  : formatBoolean
            , editor    : checkboxEditor 
          }
            ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:13:51.430

首先，您应该`editor`在定义网格列时使用属性并将定义组合框编辑器的代码放在那里。

# c# - 安装实用程序在错误的文件夹中查找服务

> ID：10394690
> 
> 赞同：3
> 
> 时间：2012-05-01T07:14:48.327
> 
> 标签：c#, .net, service, batch-file, installutil

3 我正在尝试使用批处理文件安装 Windows 服务，我们称之为“setup.bat”。在文件中，我有以下命令：

```
"%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\installutil" "MyService.exe" 
```

当我执行批处理文件（在 windows7 上以管理员身份运行）时，我得到了这个：

初始化安装时发生异常：System.IO.FileNotFoundException：无法加载文件或程序集“file:///C:\Win dows\system32\MyService.exe”或其依赖项之一。系统找不到指定的文件。实际服务位于 `"SomeRandomLocation\MyService.exe".` bat文件是 `"SomeRandomLocation\setup.bat"`

到底是怎么回事？如何强制它从我的“setup.bat”文件夹安装？

**这应该动态工作。在任何文件夹中的含义！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:20:20.687

我对安装过程一无所知。但是`%~dp0`会给出你正在运行的批处理文件的绝对路径。因此，如果您的 exe 在同一个文件夹中，您可以尝试：

```
"%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\installutil" "%~dp0MyService.exe" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T07:28:41.317

为了我自己的使用，我创建了一个小的 .bat 文件：

```
"C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe" %1 
```

现在，当我想安装服务时，我只需将 .exe 文件拖到 .bat 上。完美运行:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:31:21.597

如果您创建 .bat 文件，则工作目录基于您调用 .bat 的位置。如果您创建了 .bat 文件的快捷方式，则工作目录基于 .bat 文件的位置。脚本中的任何相对路径都相对于工作目录进行解释。

避免更改所有路径。`cd C:\Services`只需在 bat 文件的开头发出 a即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:29:59.360

您是否尝试将工作目录设置为 C:\Services？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-14T05:49:44.220

虽然这是一个老问题......

帮助我解决问题的是使用日志运行安装程序

例如：

```
"%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\installutil" "MyService.exe" /LogToConsole /ShowCallStack 
```

在我的情况下，原来的错误和你的一样

> FileNotFoundException

，但在我发现的日志中

> 安全异常

解决方案是以管理员身份运行

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-01T12:05:43.273

它对我有用（当然） - 它`MyService.exe`在包含文件夹中查找。
`"c:\windows\system32"`不是 的位置`installutil`，因此可能在批处理文件的早期工作目录以某种方式更改。

假设这不是批处理文件中的唯一命令：
尝试在批处理文件`set OLDDIR=%CD%`的最开始添加，
并在 installutil 命令之前添加`chdir /d %OLDDIR%`，看看这是否有效。

# android - 如何管理列表视图复选框自动检查？

> ID：10394704
> 
> 赞同：0
> 
> 时间：2012-05-01T07:16:38.697
> 
> 标签：android, checkbox, android-listview, scrollview

这是我想要的列表 我的问题是，当我滚动列表视图时，复选框（这是此列表的项目）会自动检查前 - 如果我先检查然后自动检查 4。

我的第一个目标：

```
 1\. want to stretch my list to full i will wrap it into Scrollview  how
 2\. i can prevent it to automatically checked 
```

.

```
<ListView   
android:id="@+id/ListViewProducts"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_column="0"
android:layout_span="2"
android:clickable="true"
android:isScrollContainer="true"
android:saveEnabled="true"
android:scrollbarAlwaysDrawVerticalTrack="true"
android:scrollbarSize="10sp"
android:scrollbars="vertical" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:41:13.967

创建您自己的 BaseAdapter。

请记住，您看到的列表视图中的所有视图都是临时的。当您滚动离开时，它们将被回收。原因是 - 您的列表中可以有 >9000 个元素。因此，您创建视图的方式必须依赖于某种（！）数据。

[这](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)是关于如何创建自己的列表的教程。

使第 X 个复选框取决于列表中的第 X 个布尔值。我第一次知道有点混乱，但这是最好的方法。

```
class MyAdapter extends BaseAdapter{

    List<boolean> myCheckBoxes;

    boolean getItem(int arg0){

        return myCheckBoxes.get(arg0);

    }

    View getView(int arg0, View arg1, ViewGroup arg2){

        ...
        ...//See article
        myView.setChecked(getItem(arg0));

        ...
        return myView;

    } 
```

在你的活动中

```
ListView myListView;
...
myListView.setAdapter(new MyAdapger(...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:20:24.897

1.  您不能将列表视图放入滚动视图中，两个向同一方向滚动的视图将无法正常工作。只需将列表视图放在您的非滚动布局中（frame-、list-、relativelayout）。
2.  使用根据要显示的数据设置每个列表视图行的视图的适配器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:23:23.603

1.  ListView 已经扩展了 ScrollView 并且不需要另一个来包围它。

2.  尝试查看[有关创建自定义 listView 项目的帖子](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)。您可以在其中实现一个复选框并使其具有`android:checked="false"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T07:25:18.293

ListVew 已经扩展了 ScrollView 不需要在 ListView 上实现它

对于 AutoCheck，请点击此链接：

[滚动列表时自动在列表视图中选中复选框。](https://stackoverflow.com/questions/6871120/check-box-checked-automatically-in-listview-when-scrolling-the-list)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T09:30:40.943

没有必要在列表视图中实现滚动视图，因为它已经扩展到滚动视图。我认为您的列表视图无法正确处理项目的回收。因此，要解决此问题，请通过以下链接。

[通过列表视图检查动态生成的复选框时出现问题](https://stackoverflow.com/questions/7738527/getting-an-issue-while-checking-the-dynamically-generated-checkbox-through-list)

# vim - 一步在vim的新目录中创建文件？

> ID：10394707
> 
> 赞同：24
> 
> 时间：2012-05-01T07:17:06.400
> 
> 标签：vim

在 vim 中我想创建一个名为`blog_spec.rb`inside的新文件`[working directory]/spec/models/`，但该目录还不存在？

创建目录并开始编辑文件的最快方法是什么？有单线吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-01T08:37:01.280

```
:!mkdir -p spec/models
:w spec/models/blog_spec.rb 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-01T11:25:38.130

如果您经常遇到这种情况，可能值得为其添加命令。

```
command -nargs=1 E execute('silent! !mkdir -p "$(dirname "<args>")"') <Bar> e <args> 
```

如果您在 .vimrc 文件中添加该行，您可以像这样简单地使用它：

```
:E spec/models/blog_spec.rb 
```

编辑这仅适用于 Linux/Mac，不适用于 Windows。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-01T11:41:06.100

尝试以下命令：

```
function s:MKDir(...)
    if         !a:0 
           \|| stridx('`+', a:1[0])!=-1
           \|| a:1=~#'\v\\@<![ *?[%#]'
           \|| isdirectory(a:1)
           \|| filereadable(a:1)
           \|| isdirectory(fnamemodify(a:1, ':p:h'))
        return
    endif
    return mkdir(fnamemodify(a:1, ':p:h'), 'p')
endfunction
command -bang -bar -nargs=? -complete=file E :call s:MKDir(<f-args>) | e<bang> <args> 
```

此命令旨在替代内置`:e`.

mkdir 未运行的情况（按顺序）：

1.  命令在没有参数的情况下运行
2.  命令使用``generate filename`` 或``=generate_filename()``反引号文件名生成器或使用`+command`/`++opt`开关运行。
3.  命令包含多个参数或具有未转义的特殊字符。
4.  参数是一个目录。
5.  参数是现有文件。
6.  参数是现有目录中的文件。

后三种情况什么都不用做，第二种和第三种情况也不是不能处理，只是比较复杂。

~~以上已准备好添加`cnoreabbrev`：~~

 ~~```
cnoreabbrev <expr> e ((getcmdtype() is# ':' && getcmdline() is# 'e')?'E':'e') 
```~~ 

~~`-complete=file`破坏事物：它不仅添加了完成，还添加了参数处理（因此检查```扩展和特殊字符的存在没有意义）并禁止拥有多个“文件名”（因此没有 ++opt）。~~

 ~~`-bar`使您无法使用``="String"``，因为`"`现在开始评论。没有`-bar`它就不是`:e`仿真，因为你做不到`E file | another command`。

另一个版本：

```
function s:MKDir(...)
    if         !a:0 
           \|| isdirectory(a:1)
           \|| filereadable(a:1)
           \|| isdirectory(fnamemodify(a:1, ':p:h'))
        return
    endif
    return mkdir(fnamemodify(a:1, ':p:h'), 'p')
endfunction
command -bang -bar -nargs=? -complete=file E :call s:MKDir(<f-args>) | e<bang> <args> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-18T08:57:14.533

我通常发现*只有在*尝试保存文件后父目录才已经存在。

[此代码](http://travisjeffery.com/b/2011/11/saving-files-in-nonexistent-directories-with-vim/)将提示您使用创建目录`:w`，或者只是使用`:w!`：

```
augroup vimrc-auto-mkdir
  autocmd!
  autocmd BufWritePre * call s:auto_mkdir(expand('<afile>:p:h'), v:cmdbang)
  function! s:auto_mkdir(dir, force)
    if !isdirectory(a:dir)
          \   && (a:force
          \       || input("'" . a:dir . "' does not exist. Create? [y/N]") =~? '^y\%[es]$')
      call mkdir(iconv(a:dir, &encoding, &termencoding), 'p')
    endif
  endfunction
augroup END 
```~~

# php - 避免重复数据映射器代码点火器中的数据库记录

> ID：10394712
> 
> 赞同：0
> 
> 时间：2012-05-01T07:17:36.630
> 
> 标签：php, codeigniter, phpmyadmin, codeigniter-datamapper

我的问题只是如何将数据插入连接表（user_book）而不在主表（book）中插入重复条目。

主要考虑我们有下面的树表

```
 id  Users id Books  id Users Books 
  1   Sam   1   B1     1   1    1
  2   Ben   2   B2     2   1    3  
  3   Mike  3   B3     3   3    3
                       4   2    2 
```

但问题是当我插入 Books 表中存在的新书（例如 Mike，如 B3）时。副本将出现在 books 表中，上表如下：

```
 id  Users id Books  id Users Books 
  1   Sam   1   B1     1   1    1
  2   Ben   2   B2     2   1    3  
  3   Mike  3   B3     3   3    4
            4   B3     4   2    2 
```

现在我要解决的问题有意义吗？或者也许我根本没有唯一的书籍清单？

如果我要插入鉴于数据库用户和书籍用户<--->书籍与 users_books 相关，我们需要确保当我们将书籍记录插入数据库时​​它不是重复的。此外，如果书存在，则将插入关系而不是书记录。怎么可能做到这一点？一种方法是说

```
$m=new Book();  
$m->where('id_book', $data['user_booklist'][$i]['id'])->get();
$u = new User();
$u -> where('id_user', $data['user_profile']['id'])-> get();
if(!$u->where_related($m))
{
$m -> name = $data['user_booklist'][$i]['name'];
$m -> id_book = $data['user_booklist'][$i]['id'];                                               
$m -> save($u);  
} 
```

if (book->exist) in the "books" table 然后检查关系，看看用户和书籍之间是否存在关系，如果存在则不要插入它。此外，我是否需要更改 mysql db 结构中的任何内容以避免这种情况。

上面的代码不起作用，但应该让我知道我在说什么。

更新：

总之，如果两个用户喜欢同一本书，我只想在连接表 (users_books) 中插入一条记录(book)，而不是在表中创建新记录。使用唯一 sql 标记不起作用，因为它保留唯一列表，但它阻止将多个关系插入连接表 users_books。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:37:07.750

你可以这样做：

```
$b = new book();  
$b->where('id_book', $data['user_booklist'][$i]['id'])->get();
// I believe you can do this as well, but I'm not sure:
// $b->where('id', $data['user_booklist'][$i]['id'])->get();

$u = new user();
$u -> where('id_user', $data['user_profile']['id'])-> get();

if( $b->exists() && $u->exists() )
{
   // This saves the relationship between the book and the user
   $b->save($u);
}
else  
{
   // Could not find the book or the user
} 
```

您应该查看[有关保存关系的数据映射器手册](http://datamapper.wanwizard.eu/pages/save.html)。

# java - 如何在春季将 @Scheduled(cron) 与 SpEL 一起使用？

> ID：10394716
> 
> 赞同：5
> 
> 时间：2012-05-01T07:19:11.297
> 
> 标签：java, spring, annotations, cron

我有一个我希望 spring 安排的方法 - 就此而言，我正在使用`@Scheduled`注释 - 更准确地说，我正在使用 cron 表达式。我的 cron 表达式位于名为 scheduler.properties 的属性文件中。当我将它用作占位符时`@Scheduled(cron="${cron}")`- 一切都很好；但我想使用 SpEL ( `@Scheduled(cron="#{scheduler['cron']}")`) ，但它不起作用 - 引发以下异常：`java.lang.IllegalArgumentException: cron expression must consist of 6 fields (found 1 in #{scheduler['cron']})`

我在这里做错了什么？

**编辑：** 这是我的属性文件中的 cron 表达式：`cron=0 0/1 * * * ?`

这是我得到的堆栈跟踪： `java.lang.IllegalArgumentException: cron expression must consist of 6 fields (found 1 in #{scheduler['cron']}) at org.springframework.scheduling.support.CronSequenceGenerator.parse(CronSequenceGenerator.java:233) at org.springframework.scheduling.support.CronSequenceGenerator.<init>(CronSequenceGenerator.java:81) at org.springframework.scheduling.support.CronTrigger.<init>(CronTrigger.java:54) at org.springframework.scheduling.support.CronTrigger.<init>(CronTrigger.java:44) at org.springframework.scheduling.config.ScheduledTaskRegistrar.afterPropertiesSet(ScheduledTaskRegistrar.java:188) at org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor.onApplicationEvent(ScheduledAnnotationBeanPostProcessor.java:209) at org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor.onApplicationEvent(ScheduledAnnotationBeanPostProcessor.java:1) at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97) at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324) at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:929) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:467) at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723) at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226) at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) at java.util.concurrent.FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722)`

**第二次编辑：** 似乎 spring 正在尝试将以下字符串解析为实际 cron 表达式本身的 cron experssion "#{scheduler['cron']}" insraed。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:22:28.137

根据错误消息，您的属性文件中的 cron 表达式的值不正确。

它不符合预期的语法。

该值应包含六个字段，看起来像这样。

```
* 10 * * * * 
```

这是引发此异常的代码

```
/**
 * Parse the given pattern expression.
 */
private void parse(String expression) throws IllegalArgumentException {
    String[] fields = StringUtils.tokenizeToStringArray(expression, " ");
    if (fields.length != 6) {
        throw new IllegalArgumentException(String.format(""
                + "cron expression must consist of 6 fields (found %d in %s)", fields.length, expression));
    } 
```

可能无法在注释中使用 spEL 将 cron 配置外部化。

替代方法是使用 XML 或使用 cron 表达式。

[http://forum.springsource.org/showthread.php?91203-Scheduled-and-externalization-of-configuration-for-fixedDelay-and-fixedRate-problem](http://forum.springsource.org/showthread.php?91203-Scheduled-and-externalization-of-configuration-for-fixedDelay-and-fixedRate-problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T18:18:05.787

在属性文件中总是这样指定：注意频率之间的空间。

# 每天早上 9 点运行刷新作业

作业.cron.rate=0 0 9 * * *

示例模式：

```
* "0 0 * * * *" = the top of every hour of every day.
* "*/10 * * * * *" = every ten seconds.
* "0 0 8-10 * * *" = 8, 9 and 10 o'clock of every day.
* "0 0/30 8-10 * * *" = 8:00, 8:30, 9:00, 9:30 and 10 o'clock every day.
* "0 0 9-17 * * MON-FRI" = on the hour nine-to-five weekdays
* "0 0 0 25 12 ?" = every Christmas Day at midnight 
```

在代码中像这样使用它：

```
@Scheduled(cron = "${job.cron.rate}")    
public void perform() throws InterruptedException {
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T04:20:10.943

我有一个类似的问题并通过读取带有上下文的属性文件来解决它：property-placeholder

`<util:properties id="applicationProps" location="/WEB-INF/classes/properties/application.properties" /> **<context:property-placeholder properties-ref="applicationProps" />**`

希望它可以帮助某人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T15:06:05.203

有用。我花了几天时间弄清楚……但这确实有效。

1.  您应该像为 JAVA_HOME 等设置环境变量一样。
2.  关闭你的 IDE。

* * *

```
export cron_scheduler_expression="0 19 21 * * *" 
```

然后重新启动您正在使用的 IDE、Eclipse 或 NetBeans。

```
@Scheduled(cron = "${cron_scheduler_expression}")
public void runSchedulerTask(){

} 
```

# regex - D std.regex - 作为文本返回

> ID：10394720
> 
> 赞同：2
> 
> 时间：2012-05-01T07:19:52.727
> 
> 标签：regex, d

是否有可能返回用于创建正则表达式的文本？

像这样的东西：

```
auto r = regex(r"[0-9]", "g"); // create regular expression
writeln(r.dumpAsText());       // this would write: [0-9] 
```

[http://dlang.org/phobos/std_regex.html](http://dlang.org/phobos/std_regex.html)对此没有任何内容。（或者至少我没有注意到）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:27:58.157

不，因为它编译正则表达式，我不相信它甚至在编译后存储字符串。

最好的办法就是在创建时自己存储字符串。

[来源`struct Regex`](https://github.com/D-Programming-Language/phobos/blob/master/std/regex.d#L1956)

如您所见，它不存储模式字符串，只存储字节码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:22:53.917

通常使用子类型会起作用，但不幸的是，由于模板约束失败，ti 不会。例如，一个合理的解决方案（现在不起作用）是将正则表达式包装为子类型：

```
auto myregex(string arg1, string arg2)
{
    struct RegexWrap
    {
        Regex!char reg;
        alias reg this;
        string dumpAsText;
    }

    return RegexWrap(regex(arg1, arg2), arg1);
}

void main()
{
    auto r = myregex(r"[0-9]", "g"); // create regular expression
    writeln(r.dumpAsText);       // this would write: [0-9]   
    writeln(match("12345", r));  // won't work 
} 
```

`match`即使使用子类型，std.regex 中的函数也无法与此包装器结构一起使用，因为它失败了此模板约束：

```
public auto match(R, RegEx)(R input, RegEx re)
    is(RegEx == Regex!(BasicElementOf!R) 
```

即使您将标题更改为此，它仍然无法正常工作：

```
public auto match(R)(R input, Regex!(BasicElementOf!R) re) 
```

唯一可行的方法是如果类型是显式的，则可以传递子类型：

```
public auto match(R)(R input, Regex!char re) 
```

我发现这是 D 中一个尴尬的部分，可以改进。

# python - 从英文文本到 UTF-8 的文件编码

> ID：10394723
> 
> 赞同：1
> 
> 时间：2012-05-01T07:20:15.107
> 
> 标签：python

如何在 Python 中将带有 CRLF 行终止符的非 ISO 扩展 ASCII 英文文本转换为 utf-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T14:31:42.370

扩展 Jishiyu's Answer，您可以使用[uchardet](http://packages.debian.org/sid/utils/uchardet)来识别字符集。例如

```
iconv -f `uchardet a_strange_file.txt` -t UTF-8 -o the_output_file.txt a_strange_file.txt 
```

虽然这在 python 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:26:46.643

我认为linux命令unix2dos、dos2unix、iconv会有所帮助。</p>

像这样

> iconv -f latin-1 -t UTF-8 latin.txt >utf8.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T08:23:54.497

如果您获得输入文件的原始字节流，则可以将`decode`其转换为`utf-8`. 请参阅[此博客文章](http://eli.thegreenplace.net/2012/01/30/the-bytesstr-dichotomy-in-python-3/)以及一些 Python 3 示例。

![在此处输入图像描述](../Images/8999d1d557687e03fbbed3eaabcde8c5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-29T12:27:10.453

我使用[enca库创建了一个自动](http://linux.die.net/man/1/enca)[转换脚本](https://gist.github.com/Barlog951/69aceea68c38230c57d6658884e2349c)，我在我的 NAS 上使用它来将字幕转换为 UTF-8，但它可以用于任何自动转换

随意使用:)

**编辑：**

```
#!/bin/bash
LANGUAGE=czech
TO=utf8
CONVERT="enca -L $LANGUAGE -x $TO"

# Find and onvert
find ./ -type f -name "*.srt" | while read fn; do
  IS_TARGET=`enca "${fn}" | egrep -ow -m 1 'UTF-8|Unrecognized|KOI8-CS2|7bit ASCII|UCS-2|Macintosh Central European'`

    if [ "$IS_TARGET" != "UTF-8" ] &&
       [ "$IS_TARGET" != "UCS-2" ] &&
       [ "$IS_TARGET" != "Macintosh Central European" ] &&
       [ "$IS_TARGET" != "Unrecognized" ] &&
       [ "$IS_TARGET" != "7bit ASCII" ] &&
       [ "$IS_TARGET" != "KOI8-CS2" ]; then

        echo "${fn} ---- Will be converted!"
    # optional backup of original srt
        # cp "${fn}" "${fn}.bak"
        $CONVERT "${fn}"
    fi  

done 
```

# python - 不支持索引？

> ID：10394726
> 
> 赞同：1
> 
> 时间：2012-05-01T07:20:26.750
> 
> 标签：python, google-app-engine, google-cloud-datastore, python-2.7

我收到此错误消息：

`TypeError: 'City' object does not support indexing`

当这是我的模型时：

```
class City(db.Model):
  region = db.ReferenceProperty()
  name = db.StringProperty()
  image = db.BlobProperty()
  vieworder = db.IntegerProperty()
  areacode = db.IntegerProperty() 
```

这是我的查询

```
items = Item.all().filter('modified >', timeline).filter('published =',                 True).order('-modified').filter('cities =',city[0].key()).fetch(PAGESIZE + 1)` 
```

你能告诉我应该如何进行查询或模拟我的类定义吗？我用`listproperty(db.Key)`引用来建模关系，我认为我可以像上面的查询一样过滤，因为它适用于一个项目。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:26:20.827

```
city[0].key() 
```

是你错误的原因。您可能认为`city`这是一个列表，但它实际上是一个项目，或类似的项目。

# iphone - 如何在iphone中运行应用程序时处理电话

> ID：10394727
> 
> 赞同：3
> 
> 时间：2012-05-01T07:20:27.920
> 
> 标签：iphone

我正在做一个油漆应用程序。如果我接到任何电话，则在绘制任何图片时，应用程序将退出并在通话结束后立即重新打开。但我的要求是我应该能够在来电时绘制图片。

任何人都可以请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:32:11.290

当有电话打进来并且用户接听时，他们将始终离开当前的应用程序，而电话应用程序将启动。我不认为你可以改变这种行为。

但是，当用户在打电话时，他们只需按下主页按钮并从主屏幕启动另一个应用程序，或者双击主页按钮并切换到另一个应用程序，包括您的应用程序，就可以切换到另一个应用程序。

在这种情况下，状态栏下方会出现一个薄视图，指示他们正在通话，因此您必须确保您的应用程序正确调整大小以腾出空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:31:08.367

这是苹果的默认设置，如果来电处于活动状态，任何应用程序都将处于非活动状态。我们无法更改此设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:32:37.947

使用下面的 Appdelegate 方法：

```
(void)applicationWillResignActive:(UIApplication *)application 
```

当应用程序即将从活动状态变为非活动状态时，此委托将调用。某些类型的临时中断（例如来电）可能会发生这种情况

重新启动应用程序处于非活动状态时暂停（或尚未启动）的任何任务。为此，请使用以下 appDelegate

```
(void)applicationDidBecomeActive:(UIApplication *)application 
```

[有关更多信息，请访问 app multitaking](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

希望对你有帮助..

# asp.net - 从页面内识别 404 源

> ID：10394731
> 
> 赞同：2
> 
> 时间：2012-05-01T07:21:09.890
> 
> 标签：asp.net, http-status-code-404

我捕获从我的站点（aspx 404 页面）返回的所有 404 响应并记录它们。有没有办法让我知道请求是直接从浏览器的地址栏发出的，还是通过单击链接引用的 - 或者它是作为另一个页面的一部分请求的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:24:11.463

检查`HttpContext.Current.Request.UrlReferrer`物业。如果请求是来自另一个页面的链接的结果，则该属性应包含该页面的 URI。如果地址是直接输入的，则该属性应为空白。

顺便说一下记录死链接的好主意。

# vim - 在 Vim 中将当前行与上面的行合并

> ID：10394735
> 
> 赞同：1
> 
> 时间：2012-05-01T07:21:29.297
> 
> 标签：vim, macvim

我有一个很长的清单，就像这样：

```
itemOne
itemTwo
,itemThree
itemFour
itemFive
,itemSix
,itemSeven 
```

以逗号开头的每一行都需要与上面的行合并，如下所示：

```
itemOne
itemTwo,itemThree
itemFour
itemFive,itemSix,itemSeven 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:59:30.360

一种有效的方法是使用以下`:global`命令：

```
:g/^,/-j! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:25:54.243

你可以这样做：

```
:%s/\n,/,/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:26:46.067

试试这个替换：

```
:%s#\n\ze,## 
```

解释：

*   `%s#`在所有行上开始替换。
*   `\n`匹配换行符。
*   `\ze,`在逗号之前设置匹配的结尾，这样逗号就不会被替换。
*   `##`替换为空（删除换行符）。

# lisp - LISP - 将语法输入转换为字符串（语言理论）

> ID：10394738
> 
> 赞同：2
> 
> 时间：2012-05-01T07:21:46.770
> 
> 标签：lisp, common-lisp, clisp

我已经实现了一个问题，它从语法 (Vn;Vt;P;S) 中确定非生产性或不可访问的元素，其中 Vn - 变量集；Vt- 终端集和 P - 生产规则，以及 S - 开始符号。

```
; Defining a grammar
(defvar *VN* '(A B C D S)) ; non-terminal variables
(defvar *VT* '(k m n)) ; terminal
(defvar *P* '((S A B) ; set of production rules
    (S C D)
    (S A k)
    (A k)
    (B m)
    (B D m D)
    (C n)
    )
)

;;; FINDING PRODUCTIVE ELEMENTS
(defun PROD-STEP (VT P PRODS)
    ;(format t "P = ~S~%" P)
    ;(format t "PRODS = ~S~%" PRODS)
    (if (null P) PRODS
        (if (subsetp (rest (first P)) (union VT PRODS))
            (PROD-STEP VT (rest P) (union (cons (first (first P)) nil) PRODS))
            (PROD-STEP VT (rest P) PRODS)
        )
    )
)
(defun PROD-AUX (VT P PRODS oldLength)
    (if (= (length PRODS) oldLength)
        PRODS
        (PROD-AUX VT P (PROD-STEP VT P PRODS) (length PRODS))
    )
)

(defun PROD (VT P)
    (PROD-AUX VT P nil -1)
)
;;; END OF FINDING PROD ELEMENTS

(trace PROD-STEP)
(trace PROD-AUX)
(trace PROD)
(PROD *VT* *P*)

;;; FINDING ACCESSIBLE ELEMENTS
(defun ACCESS-STEP (P ACC)
    ;(format t "Pacc = ~S~%" P)
    ;(format t "ACC = ~S~%" ACC)
    (if (null P) ACC
        (if (member (first (first P)) ACC)
            (ACCESS-STEP (rest P) (union (rest (first P)) ACC))
            (ACCESS-STEP (rest P) ACC)
        )
    )
)

(defun ACCESS-AUX (P ACC oldLength)
    (if (= (length ACC) oldLength)
        ACC
        (ACCESS-AUX P (ACCESS-STEP P ACC) (length ACC))
    )
)
(defun ACCESS (P S)
    ;(format t "Paccess = ~S~%" P)
    (ACCESS-AUX P (cons S nil) 0)
)
 ;;; END OF FINDING ACCESSIBLE ELEMENTS

(trace ACCESS-STEP)
(trace ACCESS-AUX)
(trace ACCESS)
(ACCESS *P* 'S)

;;; REMOVING INACCESSIBLE AND NOT PRODUCTIVE ELEMENTS
(defun BuildRules-AUX (VT ACCS PRODS P newP)
    ;(format t "newP = ~S~%" newP)
    (if (null P) newP
        ; VN' = (ACCESS(G) INTERSECT PROD(G))
        ; VT' = (VT INTERSECT ACCESS(G))
        ; DACA REGULA ESTE A->X, A = (first (first P)) SI X = (rest (first P))
        ; VERIFICAM DACA A APARTINE VN' SI X APARTINE (VT' UNION VN')
        (if (and (member (first (first P)) (intersection PRODS ACCS)) (subsetp (rest (first P)) (union (intersection ACCS PRODS) (intersection VT ACCS)) ))
            (BuildRules-AUX VT ACCS PRODS (rest P) (union newP (cons (first P) nil)))
            (BuildRules-AUX VT ACCS PRODS (rest P) newP)
        )
    )   
)

(defun BuildRules (VT ACCS PRODS P)
    (BuildRules-AUX VT ACCS PRODS P nil)
)
(trace BuildRules-AUX)
(trace BuildRules)

(BuildRules *VT* (ACCESS *P* 'S) (PROD *VT* *P*)*P*)

(defun SIMPL-AUX (VN VT P S ACCS PRODS)
    (setq ACCS (ACCESS P S))
    (setq PRODS (PROD VT P))
    (if (and (null (set-difference (union VN VT) ACCS)) (null (set-difference VN PRODS)))
        (cons VN (cons VT (cons P S)))
        (SIMPL-AUX 
                    (intersection ACCS PRODS)
                    (intersection VT ACCS)
                    (BuildRules VT ACCS PRODS P)
                    S
                    ACCS
                    PRODS
        )
    )
)
(defun SIMPL (VN VT P S)
    (SIMPL-AUX *VN* *VT* *P* 'S nil nil)
)
;;; END OF REMOVING INACCESSIBLE AND NOT PRODUCTIVE ELEMENTS

;;; GETTING THE RESULTS
  (SIMPL *VN* *VT* *P* 'S) 
```

该程序按预期工作，我想问的唯一问题是如何将输入数据转换为字符串，因为我想区分“a”终端和“A”非终端。

我想我应该在输入“a”、“k”、“*”、“begin”等中使用类似的东西。

先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:34:13.520

您可以使用符号： |这仍然是一个符号，它保持大小写|

|米| 和 M 都是符号。不同的符号。

# java - 从 Java BitSet 中随机选择 n 个比特中的 k 个比特

> ID：10394739
> 
> 赞同：3
> 
> 时间：2012-05-01T07:21:47.310
> 
> 标签：java, algorithm

如何从打开`k`位的[Java BitSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)中准确`m`地选择位，在哪里？`n``k≤n≤m`

示例输入：`m=20, n=11` ![在此处输入图像描述](../Images/246ace63e4186b0ef8f3970ec2660ff4.png)

示例输出：`k=3` ![在此处输入图像描述](../Images/875dd5628746e18a32454e44c1ac1e2c.png)

### 天真的方法

选择一个随机数`0≤ i ≤ m-1`。如果它在输入上打开而不在输出上打开，则在输出中打开它，直到在输出`k`中打开位。

`n`当远小于时，这种方法会失败`m`。还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T07:34:34.450

您可以从第一位扫描到最后一位，并将[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)应用于设置的位。

该算法具有`O(m)`时间复杂度，并且需要`O(k)`内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:26:18.713

如果约束条件允许，您可以通过以下方式解决任务：

构造一个`List`保存所有设置位的索引。照着做`Collections#shuffle`。从混洗列表中选择第一个`k`索引。

**编辑**`k`根据评论，如果这个算法真的很小，那么这个算法可能效率很低，而`n`很大。这是另一种选择：`k`在区间内生成随机的不同数字`[0, n]`。如果在生成数字的过程中，该数字已经存在于所选索引的集合中，请执行链接方法：即将该数字增加 1，直到您获得该集合中尚不存在的数字。最后，生成的索引是您在设置位中选择的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:26:58.317

`n`第一步如何找到所有设置位的位置并将它们放入集合中，然后他们`k`从该集合中随机选择位置？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T09:13:49.400

如果`n`比 大得多`k`，您可以减少 Fisher-Yates 洗牌算法，在您选择所需数量后停止：

```
private static Random rand = new Random();
public static BitSet chooseBits(BitSet b, int k) {
    int n = b.cardinality();
    int[] indices = new int[n];
    // collect indices:
    for (int i = 0, j = 0; i < n; i++) {
        j=b.nextSetBit(j);
        indices[i] =j++;
    }
    // create returning set:
    BitSet ret = new BitSet(b.size());
    // choose k bits:
    for (int i = 0; i<k; i++) {
        //The first n-i elements are still available.
        //We choose one:
        int pick = rand.nextInt(n-i);
        //We add it to our returning set:
        ret.set(indices[pick]);
        //Then we replace it with the current (n-i)th element
        //so that, when i is incremented, the 
        //first n-i elements are still available:
        indices[pick] = indices[n-i-1];
    }
    return ret;
} 
```

# oop - 我应该把 util 函数放在哪里 - OOP 最佳实践

> ID：10394740
> 
> 赞同：1
> 
> 时间：2012-05-01T07:21:48.373
> 
> 标签：oop, design-patterns

我想知道，一般（或实用功能）应该放在哪里？

例如：

```
public class Credit {
    private Integer _duration;              
    private Double _interestRate;           
    private Integer _creditSum;     
    private PaymentStream _paymentStream;
    private Date _openDate;         
} 
```

PaymentStream 实现了 gettin paymentList 的策略模式。

问题：我有一个构造函数（duration、interestRate、creditSum、paymentStream、openDate）。但我也想要以下功能：

*   getCreditDuration（creditSum，monthlyPayments，interestRate）
*   getCreditSum(montlyPayment, interestRate, duration)
*   ETC

显然，他们不能在信用实例上，因为我没有足够的信息用于构造函数。那么它们应该放在哪里呢？

**补充**：我还需要将所有计算（getCreditDuration 等）存储到数据库中。因此，如果这是返回 double(int) 的静态函数，我无法想象将它们存储到 DB 中的好方法。我应该保存什么对象？

要求是：用户可以在 Duration 计算和 Credit sum 计算（等等）之间进行选择。计算有单独的视图。每次用户单击“计算按钮”时，计算结果都必须保存到数据库中。用户可以查看所有计算，他可以在其中单击任何项​​目。

例如（с 计算平均值）：

```
Sum      Duration Interest Payment 
10000    2 yrs    12%      1000(с)    -> opens view to calculate monthly payment
12000(с) 3 yrs    10%      1200       -> opens view to calculate credit sum 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:27:25.210

它们是无状态方法（它们处理的所有数据都作为参数传递），其逻辑显然与 Credit 对象的概念相关联。所以一种可能性就是让它们成为 Credit 类的静态方法。

# php - PHP 微时间解析出了点问题

> ID：10394744
> 
> 赞同：1
> 
> 时间：2012-05-01T07:22:10.867
> 
> 标签：php, microtime

好的，我有这个基本的 PHP 逻辑，用于测量 PHP 中的执行时间，你可以在[这里](http://www.developerfusion.com/code/2058/determine-execution-time-in-php/)找到它。一切都是正确的，而不是通常的时间执行范围和格式突然开始得到不正确的结果，如下所示：

> 此页面创建时间为 6.0081481933594E-5 秒

绝对不可能在 6 秒内创建（解析）脚本（脚本为空，时间测量代码除外）。而且，正确的格式发生了什么？我每次（不正确的）时间使用计算都会结束“E-5”是什么意思？我只是为了获得正常的正常时间，例如 0.003454893745，但我不记得我已经更改了一些 PHP ini 设置？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T07:23:12.247

> 6.0081481933594E-5

方法

> 6.0081481933594 x 10 ^(-5)

换句话说，`.000060081481933594`秒或 60 微秒。

# javascript - underscore.js：_.zip.apply 示例

> ID：10394746
> 
> 赞同：5
> 
> 时间：2012-05-01T07:22:21.823
> 
> 标签：javascript, underscore.js

我想看一个`_.zip.apply`使用 underscore.js 的例子。

在[下划线文档](http://underscorejs.org/)中写道：

> 如果您正在使用嵌套数组的矩阵，则 zip.apply 可以以类似的方式转置矩阵。

但是，文档没有提供示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T07:27:08.890

这是您的标准用法[`apply`](http://msdn.microsoft.com/en-us/library/4zc42wh1%28v=vs.94%29.aspx)：

```
_.zip.apply(null, [ ['foo','bar'], [0,1] ]) 
```

这将导致以下结果：

```
[['foo', 0], ['bar', 1]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T10:24:09.627

您还可以使用“非外部库”方法：

创建这个函数：

```
function transpose(arr) {
        return Object.keys(arr[0]).map(function (c) {
            return arr.map(function (r) {
                return r[c];
            });
        });
    } 
```

接着：

var transposedArray = transpose(originalArray);

# xml - xslt 计数兄弟

> ID：10394752
> 
> 赞同：1
> 
> 时间：2012-05-01T07:23:05.790
> 
> 标签：xml, xslt, xpath, count

我有一个样本”：

```
<Root>
    <A rename="yes,it is option 1"/>
    <C rename="no"/>
    <A rename="yes,it is option 2"/>
    <C rename="no"/>
    <C rename="yes"/>
    <C rename="no"/>  
    <A rename="yes,it is option 3"/>
    <A rename="yes,it is option 4"/>
    <C rename="no"/>
    <C rename="yes"/>
    <C rename="no"/>      
    <C rename="no"/>        
</Root> 
```

然后我应用一个如下所示的模板：

```
 <xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:template match="A">
            <p><b>option1: <xsl:value-of select="count(following-sibling::C[preceding-sibling::A[1]/@rename[contains(.,'option 1')]])"/></b></p>
            <p><b>option2: <xsl:value-of select="count(following-sibling::C[preceding-sibling::A[1]/@rename[contains(.,'option 2')]])"/></b></p>            
            <p><b>option3: <xsl:value-of select="count(following-sibling::C[preceding-sibling::A[1]/@rename[contains(.,'option 3')]])"/></b></p>
            <p><b>option4: <xsl:value-of select="count(following-sibling::C[preceding-sibling::A[1]/@rename[contains(.,'option 4')]])"/></b></p>                        
 </xsl:template>
</xsl:stylesheet> 
```

但我希望输出看起来像这样，如果 A 后面没有兄弟，我们就忽略这个。只需打印这些 @rename 包含“选项”并且还包含元素

```
option1: 1 

option2: 3 

option4: 4 
```

我现在得到的是：

```
option1: 1 

option2: 3 

option3: 0 

option4: 4 

option1: 0 

option2: 3 

option3: 0 

option4: 4 

option1: 0 

option2: 0 

option3: 0 

option4: 4 

option1: 0 

option2: 0 

option3: 0 

option4: 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:50:11.797

您正在计算最近**的 A元素之后的所有****C**元素。这可以通过一个键来完成，将所有此类**C**元素与关联**的 A**元素分组

 ******```
<xsl:key name="lookup" match="C" use="generate-id(preceding-sibling::A[1])" /> 
```

要查找至少存在以下**C****的 A**元素，请执行以下操作：

 **```
<xsl:apply-templates select="A[key('lookup', generate-id())]" /> 
```

然后要计算选项的数量，您可以只计算键中的元素数量，如下所示：

```
<xsl:value-of select="count(key('lookup', generate-id()))" /> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="yes"/>
    <xsl:key name="lookup" match="C" use="generate-id(preceding-sibling::A[1])" />

    <xsl:template match="/Root">
        <xsl:apply-templates select="A[key('lookup', generate-id())]" />
    </xsl:template>

    <xsl:template match="A">
        <xsl:value-of select="concat(@rename, ': ', count(key('lookup', generate-id())) , '&#13;&#13;')" />
    </xsl:template>
</xsl:stylesheet> 
```

当这应用于您的 XML 示例时，将输出以下内容：

```
yes,it is option 1: 1

yes,it is option 2: 3

yes,it is option 4: 4 
```

请注意，如果您想要“option1”而不是“是的，它是选项 1”，您可以这样做`concat('option', substring-after(@rename, 'option '))`而不是仅仅`@rename`

请注意，如果您重新构建 XML，则可以简化此问题。这样的事情会好得多：

```
<Root>
    <A rename="yes,it is option 1">
        <C rename="no"/>
    </A>
    <A rename="yes,it is option 2">
        <C rename="no"/>
        <C rename="yes"/>
        <C rename="no"/>
    </A>
    <A rename="yes,it is option 3"/>
    <A rename="yes,it is option 4">
        <C rename="no"/>
        <C rename="yes"/>
        <C rename="no"/>
        <C rename="no"/>
    </A>
</Root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:05:53.413

在 XSLT 2.0 中，这变成了一个简单的分组问题，使用`xsl:for-each-group`指令。

```
<xsl:template match="Root">
  <xsl:for-each-group group-starting-with="A" select="*">
    <xsl:if test="count(current-group()) != 1">
      <p>Option <xsl:value-of select="substring-after(current-group()[1]/@rename, 'option ')"/> = <xsl:value-of select="count(current-group())-1"/></p>        </xsl:if>
  </xsl:for-each-group>
</xsl:template> 
```********

# memory - 为什么 CudaFree 似乎没有释放内存？

> ID：10394755
> 
> 赞同：10
> 
> 时间：2012-05-01T07:23:22.123
> 
> 标签：memory, cuda, free

我正在尝试分配设备内存，复制到它，在 GPU 上执行计算，将结果复制回来，然后释放我分配的设备内存。我想确保我没有超出限制，并且我想看看我是否在共享内存空间中有足够的内存来转储一些数组。

当我分配设备内存时，没有返回错误。当我`cudaMemGetInfo`用来检查分配的内存量时，看起来好像`cudaMalloc`没有分配任何内存。此外，当我尝试释放内存时，似乎只释放了一个指针。

我正在使用 matlab`Mexfunction`界面来设置 GPU 内存并启动内核。在这一点上，我什至没有调用内核，只是返回一个单位矩阵作为结果。

```
cudaError_t cudaErr;
size_t freeMem = 0;
size_t totalMem = 0;
size_t allocMem = 0;
cudaMemGetInfo(&freeMem, &totalMem);  
mexPrintf("Memory avaliable: Free: %lu, Total: %lu\n",freeMem, totalMem);  

/* Pointers for the device memory */
double *devicePulseDelay, *deviceTarDistance, *deviceScattDistance, *deviceScatterers;
double *deviceReceivedReal, *deviceReceivedImag;

/* Allocate memory on the device for the arrays. */
mexPrintf("Allocating memory.\n");
cudaErr = cudaMalloc( (void **) &devicePulseDelay, sizeof(double)*512);
if (cudaErr != cudaSuccess)
{
    mexPrintf("could not allocate memory to devicePulseDelay\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("devicePulseDelay: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMalloc( (void **) &deviceTarDistance, sizeof(double)*512);
if (cudaErr != cudaSuccess)
{
    mexPrintf("could not allocate memory to deviceTarDistance\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceTarDistance: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMalloc( (void **) &deviceScattDistance, sizeof(double)*999*512);
if (cudaErr != cudaSuccess)
{
    mexPrintf("could not allocate memory to deviceScattDistance\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceScattDistance: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMalloc( (void **) &deviceScatterers, sizeof(double)*999);
if (cudaErr != cudaSuccess)
{   
    mexPrintf("could not allocate memory to deviceScatterers\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}  
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceScatterers: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMalloc( (void **) &deviceReceivedReal, sizeof(double)*999*512);
if (cudaErr != cudaSuccess)
{
    mexPrintf("could not allocate memory to deviceReceivedReal\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceReceivedReal: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMalloc( (void **) &deviceReceivedImag, sizeof(double)*999*512);
if (cudaErr != cudaSuccess)
{
    mexPrintf("could not allocate memory to deviceReceivedImag\n");   
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceReceivedImag: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n", allocMem, totalMem,(freeMem - allocMem));

/* copy the input arrays across to the device */
mexPrintf("\nCopying memory.\n");
cudaErr = cudaMemcpy(devicePulseDelay, pulseDelay, sizeof(double)*512,cudaMemcpyHostToDevice);
if (cudaErr != cudaSuccess) 
{
    mexPrintf("could not copy to devicePulseDelay\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("devicePulseDelay: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMemcpy(deviceTarDistance, tarDistance, sizeof(double)*512,cudaMemcpyHostToDevice);
if (cudaErr != cudaSuccess) 
{
    mexPrintf("could not copy to deviceTarDistance\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));   
}   
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceTarDistance: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMemcpy(deviceScattDistance, scattDistance, sizeof(double)*999*512,cudaMemcpyHostToDevice);   
if (cudaErr != cudaSuccess)
{  
    mexPrintf("could not copy to deviceScattDistance\n");  
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
} 
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceScattDistance: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMemcpy(deviceScatterers, scatterers, sizeof(double)*999,cudaMemcpyHostToDevice); 
if (cudaErr != cudaSuccess) 
{
    mexPrintf("could not copy to deviceScatterers\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));   
}   
cudaMemGetInfo(&allocMem, &totalMem);  
mexPrintf("deviceScatterers: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));  

/* call the kernel */
// launchKernel<<<1,512>>>(........);   

/* retireve the output */  
cudaErr = cudaMemcpy(receivedReal, deviceReceivedReal, sizeof(double)*512*512,cudaMemcpyDeviceToHost);   
if (cudaErr != cudaSuccess)
{   
    mexPrintf("could not copy to receivedReal\n");  
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
}
cudaMemGetInfo(&allocMem, &totalMem);   
mexPrintf("receivedReal: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));
cudaErr = cudaMemcpy(receivedImag, deviceReceivedImag, sizeof(double)*512*512,cudaMemcpyDeviceToHost); 
if (cudaErr != cudaSuccess)
{ 
    mexPrintf("could not copy to receivedImag\n");   
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));   
}   
cudaMemGetInfo(&allocMem, &totalMem); 
mexPrintf("receivedImag: Memory avaliable: Free: %lu, Total: %lu, Consumed: %lu\n",allocMem, totalMem,(freeMem - allocMem));   

/* free the memory. */ 
mexPrintf("\nFree'ing memory.\n");   
cudaMemGetInfo(&freeMem, &totalMem);  
mexPrintf("Before freeing: Free %lu, Total: %lu\n", freeMem, totalMem);  
cudaErr = cudaFree(devicePulseDelay); 
if (cudaErr != cudaSuccess) 
{ 
    mexPrintf("could free devicePulseDelay\n");   
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
}   
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("devicePulseDelay: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem));   
cudaErr = cudaFree(deviceTarDistance);   
if (cudaErr != cudaSuccess) 
{
    mexPrintf("could free deviceTarDistance\n");  
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
} 
cudaMemGetInfo(&allocMem, &totalMem);   
mexPrintf("deviceTarDistance: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem));  
cudaErr = cudaFree(deviceScattDistance);   
if (cudaErr != cudaSuccess) 
{   
    mexPrintf("could free deviceScattDistance\n"); 
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));
}   
cudaMemGetInfo(&allocMem, &totalMem);   
mexPrintf("deviceScattDistance: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem));  
cudaErr = cudaFree(deviceScatterers);  
if (cudaErr != cudaSuccess) 
{   
    mexPrintf("could free deviceScatterers\n");  
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));   
}   
cudaMemGetInfo(&allocMem, &totalMem);  
mexPrintf("deviceScatterers: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem));  
cudaErr = cudaFree(deviceReceivedReal);  
if (cudaErr != cudaSuccess) 
{  
    mexPrintf("could free deviceReceivedReal\n"); 
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
} 
cudaMemGetInfo(&allocMem, &totalMem);  
mexPrintf("deviceReceivedReal: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem));   
cudaErr = cudaFree(deviceReceivedImag);   
if (cudaErr != cudaSuccess) 
{ 
    mexPrintf("could free deviceReceivedImag\n");
    mexPrintf("Error: %s\n",cudaGetErrorString(cudaErr));  
}   
cudaMemGetInfo(&allocMem, &totalMem);
mexPrintf("deviceReceivedImag: Memory avaliable: Free: %lu, Total: %lu, Free'd: %lu\n",allocMem, totalMem,(allocMem - freeMem)); 
```

这是此的输出：

```

可用内存：免费：2523959296，总计：2818572288
 分配内存。
 devicePulseDelay：可用内存：免费：2522910720，总计：2818572288，消耗：1048576
 deviceTarDistance：可用内存：免费：2522910720，总计：2818572288，已消耗：1048576
 deviceScattDistance：可用内存：免费：2518716416，总计：2818572288，已消耗：5242880
 deviceScatterers：可用内存：免费：2517667840，总计：2818572288，已消耗：6291456
 deviceReceivedReal：可用内存：免费：2515570688，总计：2818572288，已消耗：8388608
 deviceReceivedImag：可用内存：免费：2513473536，总计：2818572288，已消耗：10485760

复制记忆。
 devicePulseDelay：可用内存：免费：2513473536，总计：2818572288，消耗：10485760
 deviceTarDistance：可用内存：免费：2513473536，总计：2818572288，消耗：10485760
 deviceScattDistance：可用内存：免费：2513473536，总计：2818572288，已消耗：10485760
 deviceScatterers：可用内存：免费：2513473536，总计：2818572288，已消耗：10485760
 receivedReal：可用内存：免费：2513473536，总计：2818572288，已消耗：10485760
 receivedImag：可用内存：免费：2513473536，总计：2818572288，已消耗：10485760

释放内存。
 释放前：免费2513473536，总计：2818572288
 devicePulseDelay：可用内存：空闲：2513473536，总计：2818572288，空闲：0
 deviceTarDistance：可用内存：空闲：2513473536，总计：2818572288，空闲：0
 deviceScattDistance：可用内存：空闲：2513473536，总计：2818572288，空闲：0
 deviceScatterers：可用内存：免费：2514522112，总计：2818572288，免费：1048576
 deviceReceivedReal：可用内存：免费：2514522112，总计：2818572288，免费：1048576
 deviceReceivedImag：可用内存：免费：2514522112，总计：2818572288，免费：1048576

```

我觉得我缺少一些明显的东西。任何人都可以帮助解释发生了什么吗？

编辑：平台是带有 Tesla C2050 GPU 卡的 windows 7。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T07:17:10.233

这是一个很常见的误解，即在调用时直接`malloc`从主机操作系统获取内存分配，并在调用时`free` 直接将它们释放回运行的主机。但是它们几乎总是不会那样工作，而是标准库维护一个循环的 free'd 和 malloc'd 内存列表，通过与主机操作系统交互来机会主义地扩展和收缩（请参阅有关[如何 malloc的一些答案() 和 free() 工作吗？](https://stackoverflow.com/q/1119134/681865)如果您有兴趣了解更多详细信息）。不管它是如何工作的，这都会导致一些不直观的结果，包括通常不可能像操作系统所说的那样分配尽可能多的内存是免费的，分配有时似乎不会改变可用内存的数量，然后`free`有时对操作系统所说的免费内存量没有影响。

尽管我只有经验证据支持这一点，但我相信 CUDA 的工作方式完全相同。上下文维护自己的 malloc'd 和 free'd 内存列表，并将扩展和收缩该列表中保存的内存作为主机驱动程序/窗口管理器和 GPU 本身允许。所有硬件都有一个特有的 MMU 页面大小，有证据表明 NVIDIA GPU 上的页面大小相当大。这意味着调用中有相当粗的粒度，这`cudaMalloc`意味着有时 a`malloc`似乎不会影响可用内存量或消耗比请求更多的内存，有时`free`调用似乎没有效果（如果您有兴趣，可以找到一个小工具，有助于说明 CUDA 驱动程序的页面大小行为[here](http://forums.nvidia.com/index.php?showtopic=106167&view=findpost&p=586012)，尽管它是为早期版本的 CUDA API 编写的，可能需要进行一些更改才能与现代版本一起编译）。我相信这是您观察到的行为最可能的解释。

顺便说一句，如果我使用 GT200 系列设备运行您在 MacOS 10.6 上发布的代码的简化版本：

```
#include <cstdio>

#define mexPrintf printf

inline void gpuAssert(cudaError_t code, char *file, int line, 
                 bool abort=true)
{
   if (code != cudaSuccess) 
   {
      mexPrintf("GPUassert: %s %s %d\n", cudaGetErrorString(code),
          file, line);
      if (abort) exit(code);
   }
}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

inline void gpuMemReport(size_t * avail, size_t * total, 
        const char * title = 0, const size_t * free = 0, const bool sense = true) 
{
    char tstring[32] = { '\0' };
    gpuErrchk( cudaMemGetInfo(avail, total) );  

    if (free) {
        if (title) {
            strncpy(tstring, title, 31);
        }
        mexPrintf("%s Memory avaliable: Free: %zu, Total: %zu, %s: %zu\n",
                tstring, *avail, *total, (sense) ? "Allocated\0" : "Freed\0", 
                (sense) ? (*free - *avail) : (*avail - *free));
    } else {
        mexPrintf("Memory avaliable: Free: %zu, Total: %zu\n", *avail, *total);  
    }
}

int main()
{
    size_t freeMem = 0;
    size_t totalMem = 0;
    size_t allocMem = 0;

    gpuErrchk( cudaFree(0) );
    gpuMemReport(&freeMem, &totalMem);

    double *devicePulseDelay, *deviceTarDistance, *deviceScattDistance, *deviceScatterers;
    double *deviceReceivedReal, *deviceReceivedImag;

    mexPrintf("Allocating memory.\n");
    gpuErrchk( cudaMalloc( (void **) &devicePulseDelay, sizeof(double)*512) );
    gpuMemReport(&allocMem, &totalMem, "devicePulseDelay:", &freeMem);

    gpuErrchk( cudaMalloc( (void **) &deviceTarDistance, sizeof(double)*512) );
    gpuMemReport(&allocMem, &totalMem, "deviceTarDistance:", &freeMem);

    gpuErrchk( cudaMalloc( (void **) &deviceScattDistance, sizeof(double)*999*512) );
    gpuMemReport(&allocMem, &totalMem, "deviceScattDistance:", &freeMem);

    gpuErrchk( cudaMalloc( (void **) &deviceScatterers, sizeof(double)*999) );
    gpuMemReport(&allocMem, &totalMem, "deviceScatterers:", &freeMem);

    gpuErrchk( cudaMalloc( (void **) &deviceReceivedReal, sizeof(double)*999*512) );
    gpuMemReport(&allocMem, &totalMem, "deviceReceivedReal:", &freeMem);

    gpuErrchk( cudaMalloc( (void **) &deviceReceivedImag, sizeof(double)*999*512) );
    gpuMemReport(&allocMem, &totalMem, "deviceReceivedImag:", &freeMem);

    mexPrintf("\nFree'ing memory.\n");   
    gpuMemReport(&freeMem, &totalMem);

    gpuErrchk( cudaFree(devicePulseDelay) ); 
    gpuMemReport(&allocMem, &totalMem, "devicePulseDelay:", &freeMem, false);

    gpuErrchk( cudaFree(deviceTarDistance) ); 
    gpuMemReport(&allocMem, &totalMem, "deviceTarDistance:", &freeMem, false);

    gpuErrchk( cudaFree(deviceScattDistance) ); 
    gpuMemReport(&allocMem, &totalMem, "deviceScattDistance:", &freeMem, false);

    gpuErrchk( cudaFree(deviceScatterers) ); 
    gpuMemReport(&allocMem, &totalMem, "deviceScatterers:", &freeMem, false);

    gpuErrchk( cudaFree(deviceReceivedReal) ); 
    gpuMemReport(&allocMem, &totalMem, "deviceReceivedReal:", &freeMem, false);

    gpuErrchk( cudaFree(deviceReceivedImag) ); 
    gpuMemReport(&allocMem, &totalMem, "deviceReceivedImag:", &freeMem, false);

    return 0;
} 
```

我得到了不同的结果，但也显示了相同的现象：

```
Allocating memory.
devicePulseDelay: Memory avaliable: Free: 202870784, Total: 265027584, Allocated: 1048576
deviceTarDistance: Memory avaliable: Free: 202870784, Total: 265027584, Allocated: 1048576
deviceScattDistance: Memory avaliable: Free: 198778880, Total: 265027584, Allocated: 5140480
deviceScatterers: Memory avaliable: Free: 197730304, Total: 265027584, Allocated: 6189056
deviceReceivedReal: Memory avaliable: Free: 193638400, Total: 265027584, Allocated: 10280960
deviceReceivedImag: Memory avaliable: Free: 189546496, Total: 265027584, Allocated: 14372864

Free'ing memory.
Memory avaliable: Free: 189546496, Total: 265027584
devicePulseDelay: Memory avaliable: Free: 189546496, Total: 265027584, Freed: 0
deviceTarDistance: Memory avaliable: Free: 190595072, Total: 265027584, Freed: 1048576
deviceScattDistance: Memory avaliable: Free: 194686976, Total: 265027584, Freed: 5140480
deviceScatterers: Memory avaliable: Free: 195735552, Total: 265027584, Freed: 6189056
deviceReceivedReal: Memory avaliable: Free: 199827456, Total: 265027584, Freed: 10280960
deviceReceivedImag: Memory avaliable: Free: 203919360, Total: 265027584, Freed: 14372864 
```

这表明该行为也取决于硬件/主机操作系统。

# windows-phone-7 - 尝试创建 WriteableBitmap 实例时 WP7 崩溃

> ID：10394767
> 
> 赞同：2
> 
> 时间：2012-05-01T07:24:59.747
> 
> 标签：windows-phone-7

大家，我在将图片保存到媒体库时遇到了一个奇怪的问题，我的应用程序崩溃了，没有出现异常。这是我的保存代码。

```
using (MemoryStream stream = new MemoryStream())
{
    try
    {
        WriteableBitmap bitmap = new WriteableBitmap(InkPrest, InkPrest.RenderTransform); // Crash here, the actualHeight of InkPrest is 2370.0 

        bitmap.SaveJpeg(stream, (int)InkPrest.ActualWidth, (int)InkPrest.ActualHeight, 0, 100);
        stream.Seek(0, SeekOrigin.Begin);

        MediaLibrary library = new MediaLibrary();
        library.SavePicture(DateTime.Now.ToString(), stream.GetBuffer());
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

我一步一步调试，应用程序崩溃

```
WriteableBitmap bitmap = new WriteableBitmap(InkPrest, InkPrest.RenderTransform); // Crash here, the actualHeight of InkPrest is 2370.0 
```

关于解决这个问题的任何想法？

============================================

尝试保存多张图片

uielement 为 704 * 2370

```
TranslateTransform transform = new TranslateTransform();
transform.Transform(new Point(0,0));
double MaxHeight = 800;
double height = InkPrest.ActualHeight;
int saveCount = 0;
int succeedCount = 0;
while (height > 0)
{
    using (MemoryStream stream = new MemoryStream())
    {
        try
        {
            double actualRenderHeight = Math.Min(height, MaxHeight);
            WriteableBitmap bitmap = new WriteableBitmap((int)InkPrest.ActualWidth, (int)actualRenderHeight);

            bitmap.Render(InkPrest, transform); //Crash here, also no exception.
            bitmap.Invalidate();

            height -= actualRenderHeight;
            transform.Y -= actualRenderHeight;

            bitmap.SaveJpeg(stream, (int)InkPrest.ActualWidth, (int)actualRenderHeight, 0, 100);
            stream.Seek(0, SeekOrigin.Begin);

            MediaLibrary library = new MediaLibrary();
            Picture pic = library.SavePicture(manuscriptFile.Title + DateTime.Now.ToString(), stream.GetBuffer());
            saveCount++;
            if (pic != null)
            {
                succeedCount++;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:43:40.717

检查您是否在 uithread 或其他创建的线程中实例化 writeablebitmap。您需要在 uithread 中创建 writeablebitmap。

# javascript - 将 jQuery scrollTop 与 Wordpress 一起使用？

> ID：10394770
> 
> 赞同：0
> 
> 时间：2012-05-01T07:25:18.410
> 
> 标签：javascript, jquery, wordpress, jquery-animate, scrolltop

所以，我正在尝试使用 jQuery 动画制作一个带有 wordpress 主题的“滚动到顶部”按钮。我已经在这几个小时没有运气了。这是JS的片段：

```
 < script type = "text/javascript" > (function ($) {
        $(document).ready(function () {
            $("#back-top").hide();
            $(function () {
                $(window).scroll(function () {
                    if ($(this).scrollTop() > 100) {
                        $('#back-top').fadeIn();
                    } else {
                        $('#back-top').fadeOut();
                    }
                });
                $('#back-top a').click(function () {
                    $('body,html').animate({
                        scrollTop : 0
                    }, 800);
                    return false;
                });
            });
        });
    });
(jQuery);
<  / script > 
```

这是我的标记：

```
<p id="back-top"><a href="#top">&uarr;</a></p> 
```

值得注意的是，在上述 JS 代码之前的几行调用了 jQuery 和其他垃圾。

```
<script type='text/javascript' src='http://tambnguyen.com/wp-includes/js/prototype.js?ver=1.6.1'></script>
<script type='text/javascript' src='http://tambnguyen.com/wp-includes/js/scriptaculous/wp-scriptaculous.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://tambnguyen.com/wp-includes/js/scriptaculous/effects.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://tambnguyen.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script> 
```

请告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:04:34.367

甜的！我能够对其他地方的一些其他片段进行逆向工程。现在可以了。

```
 <script type="text/javascript"> jQuery(function () {
        jQuery(document).ready(function () {
            jQuery("#back-top").hide();
            jQuery(function () {
                jQuery(window).scroll(function () {
                    if (jQuery(this).scrollTop() > 100) {
                        jQuery('#back-top').fadeIn();
                    } else {
                        jQuery('#back-top').fadeOut();
                    }
                });
                jQuery('#back-top a').click(function () {
                    jQuery('body,html').animate({
                        scrollTop : 0
                    }, 800);
                    return false;
                });
            });
        });
    });
</script> 
```

无论如何，谢谢你的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:29:32.993

使用[event.preventDefault](http://jqapi.com/#p=event.preventDefault)

```
jQuery('#back-top').click(function() {
    jQuery('html,body').animate({
        scrollTop: 0
    }, 800);
    return false;
});​ 
```

# javascript - 跨浏览器输入文本焦点系统？

> ID：10394773
> 
> 赞同：0
> 
> 时间：2012-05-01T07:25:28.667
> 
> 标签：javascript, html, focus

我有以下代码，其中`soundid`是（不包括）0 和 11 之间的整数，并且所有元素名称都存在。目前，它并不专注于许多浏览器。我应该添加、修改或更改它以使其能够聚焦到一个`input type="text"`元素中？

代码：

```
document.getElementById("fo" + soundid + "cus").click();
document.getElementById("fo1cus").click();
$("#spellingf" + soundid).select();
$("#spellingf" + soundid).focus();
document.getElementById("spellingf" + soundid).focus();
$("#fo" + soundid + "cus").click(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:58:06.577

原生 HTML 元素没有`click`方法。所以这：

```
document.getElementById("fo" + soundid + "cus").click(); 
```

还有这个：

```
document.getElementById("fo1cus").click(); 
```

会抛出错误。该错误将停止代码执行，其余代码将不会执行。这就是为什么它不起作用。所以使用这个代码：

```
$("#fo" + soundid + "cus").click();
$("#fo1cus").click();
$("#spellingf" + soundid).focus();
$("#fo" + soundid + "cus").click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:00:40.357

不太确定你在这里问什么。

提供您的输入和 id 属性并选择该 id 将跨浏览器工作。

```
$('#fo1cus').focus(function() {
  alert('Handler for .focus() called.');
}); 
```

# android - 在列表视图中获取列表行 ID

> ID：10394774
> 
> 赞同：0
> 
> 时间：2012-05-01T07:25:42.467
> 
> 标签：android, listview, arraylist

如果我有一个使用 web 服务填充的列表视图，并且在每一行中添加的元素都有一个唯一的 id 存储在数组列表中，该数组列表利用哈希图来存储数据，那么获取数据 id 的最简单方法是什么，那就是在行中单击.. 我在列表中使用基本适配器，

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:28:10.900

在列表视图上的项目单击侦听器上设置。它将返回适配器中单击项目的位置（相当于数组列表中的位置）。你可以使用它来获取id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:30:21.083

```
lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),String.valueOf(position), Toast.LENGTH_SHORT).show();
        }
    }); 
```

第三个参数是列表中项目的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:34:51.273

使用此方法 listView.getItemAtPosition(position)。它有一个你可以使用的位置

```
listView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> a, View v, int position, long id) {
        // Get item at position like this:
        // listView.getItemAtPosition(position));
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:28:38.887

如果您使用该`adapter.getItem(position)`功能，您将能够在该特定位置获取存储在 ListView 中的项目。

***更新：***这当然是在`setOnItemClickListener`

# cocos2d-iphone - 如何消除花栗鼠的重力？

> ID：10394776
> 
> 赞同：0
> 
> 时间：2012-05-01T07:25:43.977
> 
> 标签：cocos2d-iphone, chipmunk

嗨，我是游戏开发的新手，想开发与射箭相关的游戏。我正在使用像愤怒的小鸟这样的概念。但问题是当我使用弹弓穿过物体进入空中时，它会因为重力而回到地球。我希望物体不会回到地球并停留在拥挤后它会到达的地方。任何人都可以帮助我如何做到这一点。

拜托拜托

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:46:52.977

花栗鼠默认为零重力。您已通过调用 cpSpaceSetGravity(space, ...) 或 space->gravity = ...; 显式设置它 因此，只需在您执行此操作的地方删除该行。

# iphone - 如何在地图视图中添加自定义标注视图

> ID：10394777
> 
> 赞同：9
> 
> 时间：2012-05-01T07:25:46.133
> 
> 标签：iphone, objective-c, mkmapview, mkannotationview

我是objective-c中mapkit的新手。我可以在地图视图中添加自定义注释。

我需要放置自定义标注视图，如下图所示

![像这样](../Images/ad7207d7bf6f2b7fcd71519b5677abef.png).

但我不明白如何设计这样的标注视图。

我知道我需要在视图中为注释方法添加标注。

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *AnnotationViewID = @"annotationViewID";

    MKAnnotationView *annotationView = (MKAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil)
    {
        annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID] autorelease];
    }

    annotationView.image = [UIImage imageNamed:@"blue_without_pin.png"];
    annotationView.annotation = annotation;

    return annotationView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:37:47.303

基本上你想要做的是通过在你的 MKMapViewDelegate 实例中实现以下方法来添加一个新的自定义视图：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
    CGPoint annotationCenter = [mapView convertCoordinate:view.annotation.coordinate toPointToView:mapView];
    [self displayCustomCalloutForAnnotation:view.annotation center:annotationCenter];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:47:13.963

```
@interface CustomAnnotaionView : MKAnnotationView

@property (strong, nonatomic) UIView *calloutView;

-(void)setSelected:(BOOL)selected animated:(BOOL)animated;

@end

@implementation CustomAnnotaionView

@synthesize calloutView = _calloutView;

-(void)setSelected:(BOOL)selected animated:(BOOL)animated

{

    [super setSelected:selected animated:animated];

    if(selected)
    {

        [self.calloutView setFrame:CGRectMake(30, 130, 250, 135)];
        [self.calloutView sizeToFit];
        self.calloutView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"popup.png"]];
        [self addSubview:self.calloutView];

    }
    else
    {

        [self.calloutView removeFromSuperview];
    }

}

-(void)didAddSubview:(UIView *)subview
{

    if([[[subview class]description]isEqualToString:@"UICalloutView"])
    {

        [subview removeFromSuperview];

    }
}

Use this customAnnotationView class in MapView delegate method,

- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id 

<MKAnnotation>)annotation

{

    if([annotation isKindOfClass:[MapAnnotation class]])
    {
       CustomAnnotationView *annotationView = (CustomAnnotaionView*)[theMapView dequeueReusableAnnotationViewWithIdentifier:@"CustomAnnotationView"];
        if(!annotationView)
        {
         MapAnnotation *annotation = (MapAnnotation *)annotation;

         annotationView = [[CustomAnnotaionView alloc]initWithAnnotation:annotation reuseIdentifier:@"CustomAnnotationView"];

            [annotationView setCanShowCallout:YES];
        }
        else
            annotationView.annotation = annotation;

        return annotationView;

    }
    return nil;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T23:56:41.660

一种解决方案是检测所选注释相对于父 UIView 的确切坐标，然后直接在 MKMapView 顶部绘制 UIView。

这是一个可能有帮助的片段：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    CGPoint pointInMap = [self.mapView convertCoordinate:buildingAnnotation.coordinate
                                           toPointToView:self.view];

    // Hide the default callout generated by MKMapView

    [mapView deselectAnnotation:view.annotation animated:NO];

    // Create a custom callout view and center the arrow on the pointInMap CGPoint
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-10-22T11:22:45.940

您必须自己实现标注视图，并使用

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

这个委托使标注视图显示在正确的位置，

IOS 还没有任何自定义标注视图的方法

# ios - 无法下载应用程序，此时无法安装应用程序

> ID：10394785
> 
> 赞同：7
> 
> 时间：2012-05-01T07:26:38.063
> 
> 标签：ios, enterprise, provisioning-profile, ota

我在为我的 iPad 应用程序进行 OTA 安装时遇到问题。我上周更新了我的企业证书。我创建了新的 dev/dist 证书和配置文件。Xcode 管理器显示正确的过期日期。当我尝试从链接安装应用程序时，它会下载一半并显示错误“无法下载应用程序，此时无法安装”。我以前做过 50 多次 OTA 安装。我重新检查了一切。这不是无效链接的问题，也不是选择错误的配置文件的问题。任何帮助将不胜感激。我检查了设备日志，它说：

```
May  1 13:15:32 unknown installd[2455] <Error>: entitlement 'keychain-access-groups' has value not permitted by a provisioning profile
May  1 13:15:32 unknown installd[2455] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
May  1 13:15:32 unknown installd[2455] <Error>: 00381000 verify_signer_identity: Could not copy validate signature: -402620394
May  1 13:15:32 unknown installd[2455] <Error>: 00381000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.8zrx0B/foo_extracted/Payload/Hra.app 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T02:18:56.613

这个答案对我有帮助，非常感谢。

这是我的确切步骤。我正在从为我创建的 Xcode 项目中构建一个临时项目，因此已经创建了包标识符，我必须在下面的步骤中匹配它。

在您的 Apple 开发者门户中：

*   需要首先创建新证书：分发证书，然后切换以确保它反映在开发人员证书中。我出于习惯将这两个证书都下载到了我的计算机上，但是 Xcode 4.3.2 不再需要钥匙串访问请求步骤。

*   创建 App ID（确保它与 XCode 中创建的 com.bundle 匹配，如果已经创建的话。在这种情况下，信息文件将捆绑标识符列为通配符：com.mydomain.${PRODUCT_NAME}。我的产品名称有大写和小写。App ID 区分大小写，因此它应该与此 Xcode 包标识符/产品名称完全匹配。

*   添加任何新设备。

*   创建开发和分发配置文件 - 下载并将每个文件拖到 Xcode 中。

在 XCode 中：

*   在构建信息文件中，代码签名实体字段都设置为“不代码签名”对我有用

*   创建存档，清理目标，然后确保方案指向连接的设备，转到产品 -> 存档

*   档案的组织者视图应该出现 - 选择刚刚构建的视图，选择分发，然后选择保存为企业或临时并在选择要签名的身份中选择下拉菜单中的刷新，然后将其保留为默认值并单击下一个。

*   选择 Save For Enterprise Distribution - 您只需要填写前两个字段；服务器上指向 .ipa 文件的 url，以及应用程序的名称。

*   然后将文件上传到上一步指定的目录，自定义并发送链接即itms-services://?action=download-manifest&url=http://yourdomain.com/yourdirectories/yourAppName.plist

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T10:15:01.007

解决方案是在您更新证书时从团队代理创建分发证书。——</p>

# mysql - 我应该清理参数化查询的输入吗？

> ID：10394794
> 
> 赞同：1
> 
> 时间：2012-05-01T07:27:18.673
> 
> 标签：mysql, sql-injection, sanitization

我有几个关于参数化查询的基本问题

考虑这段代码：

```
$id = (int)$_GET['id'];
mysql_query("UPDATE table SET field=1 WHERE id=".$id); 
```

现在使用参数化查询同样的事情

```
$sql = "UPDATE table SET field=1 WHERE id=?";
$q = $db->prepare($sql); 
$q->execute(array($_GET['id'])); 
```

我的问题是：

1.  是否存在第一个代码（即带有`(int)`演员表）不安全的情况？
2.  第二段代码可以吗还是我也应该`$_GET['id']`转换为int？
3.  第二段代码是否有任何已知的漏洞？也就是说，如果我使用第二个查询，是否可以进行 SQL 攻击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:49:51.643

1.  **是否存在第一个代码（即使用 (int) 强制转换）不安全的情况？**

    我不是 PHP 专家，但我认为*不*应该。这并不是说 PHP 没有可以在这里被利用的错误（已知的或尚未发现的）。

2.  **第二段代码可以吗，还是我也应该将 $_GET['id'] 转换为 int？**

    同样，第二段代码应该绝对没问题——即使数据类型是字符串，MySQL 也知道不会为 SQL 评估它，因为它是一个参数，因此只能被视为文字值。但是，执行强制转换当然也没有*坏处*（这将避免 MySQL 处理参数的任何缺陷）——我建议两者都做。

    **编辑**-@Tomalak 提出了一个很好的观点，即强制转换可能导致不正确的数据，并建议首先通过健全性检查来验证您的输入，例如`is_numeric()`；我完全同意。

3.  **第二段代码是否有任何已知的漏洞？也就是说，如果我使用第二个查询，是否可以进行 SQL 攻击？**

    据我所知不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:51:32.000

1.  `(int)``0`转换失败时将产生。这可能导致更新错误的记录。此外，当查询稍后变得更复杂时，它是草率和公开邀请“忘记”正确的类型转换。
    它*在当前形式*下是安全的（针对 SQL 注入，而不是针对更新错误的记录），但我仍然不推荐它。一旦查询变得更复杂，无论如何你都必须使用准备好的语句，所以从一开始就这样做——也是为了保持一致性。

2.  这也太马虎了 该参数将作为字符串传输到数据库，数据库将尝试对其进行转换。它是安全的（针对 SQL 注入），但除非您确切知道在传递无效数据时数据库服务器如何反应，否则您应该预先清理值（`is_numeric()`和强制转换）。

3.  不。*（除非 PDO 中存在错误，否则就是这样。）*

根据经验：

*   不要将未经检查的数据传递到数据库并期望正确的事情发生。
*   不要*故意*传递无效数据并相信其他系统会以某种方式做出反应。自己进行完整性检查和错误处理。
*   不要说*“哦，这会转换为，`0`而且我没有带有 ID 的记录，`0`所以没关系。”* 你思考过程的一部分。

# javascript - 用户控件中的隐藏字段，无法在客户端访问它

> ID：10394796
> 
> 赞同：0
> 
> 时间：2012-05-01T07:27:22.753
> 
> 标签：javascript, asp.net

我在用户控件中有一个隐藏字段。在运行时，我将隐藏字段 ClientId 分配给这样的锚标记：

```
aClickSort1.HRef = string.Format("javascript:SortImage({0},{1});", divArrowUp1.ClientID, hiddenSort1.ClientID); 
```

问题是，当我尝试在客户端代码中获取隐藏字段 ClientId 时，它是未定义的。

如何在客户端代码上访问它？

附言。HiddenField 位于用户控件中

问候奥瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:13:04.443

如果我错了，请纠正我，但不是生成的 ID，如果您在用户控件中有隐藏字段，它将获得以下 ID：

```
myUserControlName$myHiddenFieldId 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:31:43.693

当您设置`Visible="false"`为服务器端控制时，它根本不会发送到客户端。

相反，`style="display: none;"`通过 CSS 设置甚至更好，然后它将被发送到浏览器并且仍然被隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:32:08.963

似乎原因是**不可见的**容器。如果你有类似的东西：

```
<asp:panel id="panel1" runat="server" Visible="false">
    <asp:hiddenfield id="hiddenfield1 runat="server" value="123"/>
</asp:panel> 
```

您无法访问其中的内容，因为不会为具有属性`panel1`的服务器端控件呈现内容。`visible="false"`

您可以将其设置为`div`with`style="display:none;"`或将其留`hiddenfield`在`non-visible`容器之外，因为它无论如何都不可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:34:47.540

您需要将 hiddenSort1 的 ClientIdMode 设置为 Static。

像这样：

```
 <asp:HiddenField ID="hiddenSort1" runat="server" ClientIDMode="Static" /> 
```

来自 javascript：

```
var hiddenSort1 = document.getElementById('hiddenSort1'); 
```

# twitter - RestSharp：签名库生成中的 UrlEncode 返回无效字符串

> ID：10394799
> 
> 赞同：1
> 
> 时间：2012-05-01T07:27:25.597
> 
> 标签：twitter, twitter-oauth, windows-runtime, restsharp

我正在使用 RestSharp ( [http://restsharp.org/](http://restsharp.org/) ) 为 win8 开发 Twitter 客户端，但我遇到了这样的问题：当我使用 RestClient 发布新推文时

```
var timeLine = new RestRequest("/1/statuses/update.json", Method.POST);
var txt = "Hello world";
timeLine.AddParameter("status", txt); 
```

一切都很好，但是如果我添加更复杂的状态，例如：

```
var txt = "Hello, World! What a nice day! #1May";
timeLine.AddParameter("status", txt); 
```

我收到 401 错误。在我看到的调试器中，签名基本字符串中的状态参数不正确。我有：

```
status%3DHello%2C%2520World%21%2520What%2520a%2520nice%2520day%21%2520%231May 
```

和正确的字符串（来自 dev.twitter.com）：

```
status%3DHello%252C%2520World%2521%2520What%2520a%2520nice%2520day%2521%2520%25231May 
```

您可以看到，标点符号 ,!# 和其他编码不正确。我该如何解决？签名库生成和编码位于 /Authenticators/OAuth/OAuthTools.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T14:25:00.470

当我在网站上显示 twitter 提要时，我遇到了同样的问题。因此，我使用此代码来转换文本。

Regex.Replace(str, "@(.*?):", @"@http://twitter.com/#!/$1>$1:");

# ajax - jQuery $.ajax GET 缓存期

> ID：10394805
> 
> 赞同：0
> 
> 时间：2012-05-01T07:28:10.530
> 
> 标签：ajax, caching, jquery, http-get

浏览器将 AJAX 请求的缓存保留多长时间？
例如。

```
 $.ajax({ 
    type: "GET",
    url: "GetStockLevel.ashx?productId="+productId,
    success: function(data) { alert(data; }
  }); 
```

我不介意它是否被缓存了几分钟。但是，如果它缓存 30 分钟，那将是一个问题。

我们可以设置缓存到期吗？（例如到 1 分钟）

我知道我可以将缓存设置为 false，但我只是好奇 :) 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:35:25.730

您可以通过添加来控制缓存

```
Response.AddHeader("Expires", "Thu, 15 Apr 2010 20:00:00 GMT"); 
```

到您的 GetStockLevel.ashx 处理程序。

如果没有 expires 标头，则页面缓存的时间因浏览器而异，最好不要依赖于其行为。

# c# - 如何像 Windows 任务管理器中显示的那样获得可用的物理内存

> ID：10394807
> 
> 赞同：0
> 
> 时间：2012-05-01T07:28:11.837
> 
> 标签：c#, memory

我无法获得像 Windows 任务管理器中显示的那样的“可用”物理内存。无论我在哪里搜索，我最终都会得到“可用的”物理内存，这不是我的意图。

有谁知道如何获得“免费”物理内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:37:04.513

您可能需要[GlobalMemoryStatusEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366589%28v=vs.85%29.aspx)函数。有关从 C# 使用它的示例，请参阅[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/01371e94-0ef4-43a8-9fcb-f3ec40e8675e/ 。](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/01371e94-0ef4-43a8-9fcb-f3ec40e8675e/)

您可能还会发现[http://www.pinvoke.net/default.aspx/kernel32.globalmemorystatusex](http://www.pinvoke.net/default.aspx/kernel32.globalmemorystatusex)很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:48:30.097

我完全忽略了您需要可用内存，而不是可用内存，所以我的回答是错误的，对不起。但是这个数字并不意味着什么，因为用于缓存的内存会减少，看看 windows vista, 7 内存管理器是如何工作的：

[http://www.codinghorror.com/blog/2006/09/why-does-vista-use-all-my-memory.html](http://www.codinghorror.com/blog/2006/09/why-does-vista-use-all-my-memory.html)

~~您可以使用 GetPerformanceInfo windows API，它显示的值与 Windows 7 上的 Windows 任务管理器完全相同，请查看我对类似问题的回答：~~

[C# 以 % 为单位获取已用内存](https://stackoverflow.com/questions/10027341/c-sharp-get-used-memory-in)

或者下载[Top Process](http://topprocess.codeplex.com/)的源代码，这是一个显示可用内存和 CPU 使用率的小软件，它是开源的，完全免费的，我应该说是我写的 :)

# java - 任何人都可以想出一种方法来重构它以避免重复代码吗？

> ID：10394809
> 
> 赞同：0
> 
> 时间：2012-05-01T07:28:36.317
> 
> 标签：java, search, refactoring

我有两个搜索循环来执行不同的操作，但我对它看起来的重复性不满意。

用于删除项目的第一种方法如下：

```
public void RemovePlayer(int theID){
    boolean matchFound = false;

    if (playerObjects.size() != 0){
        for (int i = 0; i < playerObjects.size(); i++){
            Person playerToRemove = (Person) playerObjects.get(i);
            if (playerToRemove.getID() == theID){
                playerObjects.remove(i);
                System.out.println("Player with ID # " + theID + " removed");
                matchFound = true;
                // As ID is unique, once a player is found it is unnecessary to continue looping
                break;
            }

            // If matchFound is never set to true then show appropriate error
            if (matchFound == false) {
                System.out.println("Player with ID # " + theID + " not found");
            }
        }
    }
    else {
        System.out.println("No players have been added.");    
    }
} 
```

第二种方法，本质上是相同的代码，但如果找到匹配项则执行不同的操作，如下所示：

```
public void RetrievePlayer(int theID){
    boolean matchFound = false;

    if (playerObjects.size() != 0){
        for (int i = 0; i < playerObjects.size(); i++){
            Person playerToRetrieve = (Person) playerObjects.get(i);
            if (playerToRetrieve.getID() == theID){
                System.out.println("PLAYER FOUND:");
                playerToRetrieve.GetDetails();
                matchFound = true;
                break;
            }

            // If matchFound is never set to true then show appropriate error
            if (matchFound == false) {
                System.out.println("Player with ID # " + theID + " not found");
            }
        }
    } else {
        System.out.println("No players have been added.");    
    }
} 
```

我该如何重构呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:33:27.953

返回播放器索引的方法“FindPlayer”怎么样`i`？RemovePlayer 和 RetrievePlayer 将是：

```
public void RemovePlayer(int theID){
    int playerId = FindPlayer(theID);
    if (playerId >= 0) {
        playerObjects.remove(playerId);
    }
}

public void RetrievePlayer(int theID){
    int playerId = FindPlayer(theID);
    if (playerId >= 0) {
        Person player = (Person) playerObjects.get(playerId);
        player.getDetails();
    }
} 
```

“FindPlayer”方法有点像这样：

```
protected int FindPlayer(int theID){
    if (playerObjects.size() != 0){
        for (int i = 0; i < playerObjects.size(); i++){
            Person player = (Person) playerObjects.get(i);
            if (player.getID() == theID){
                return i;
            }
        }

        System.out.println("Player with ID # " + theID + " not found");
    } else {
        System.out.println("No players have been added.");    
    }

    return -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:14:25.377

将播放器放在一个`Map<Integer,Player>`. 然后使用 Map 的基本方法 ( `put`, `remove`) 而不是循环遍历列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:34:10.443

如果你分开，你可以有一个`find`返回 a的方法`Player`和一个`remove`将玩家作为参数的方法。我更喜欢这个而不是返回索引，因为索引可能是临时的（例如，如果其他人添加到列表中，索引可能会失效）。

您可以做更多事情（可能是带有谓词`findAll`的方法或`filter`方法），但在您有理由这样做之前我不会看这些（您不需要它）

# mysql - 在 MySQL 查询中使用 ORDER BY 时如何忽略特殊字符

> ID：10394812
> 
> 赞同：5
> 
> 时间：2012-05-01T07:28:50.327
> 
> 标签：mysql, utf-8, replace, sql-order-by, special-characters

我有以下 MySQL 查询，它为 Python 网页提供数据。在网页上，我有一个歌曲名称列表，我希望它按字母顺序排列，忽略标点符号和空格。我的 MySQL 数据库是 UTF-8 编码的，一些需要忽略的标点符号是特殊字符，例如弯撇号等。

```
SELECT * FROM Tracks\
JOIN Artists USING (ArtistID)\
JOIN Albums USING (AlbumID)\
JOIN Songs USING (SongID)\
ORDER BY UPPER(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(\
REPLACE(SoName, ' ', ''), /* space */\
                        ',', ''), /* comma */\
                        '.', ''), /* period */\
                        ':', ''), /* colon */\
                        ';', ''), /* semicolon */\
                        '!', ''), /* exclamation point */\
                        '?', ''), /* question mark */\
                   '\u201c', ''), /* left curly double quote */\
                   '\u201d', ''), /* right curly double quote */\
                   '\u2019', ''), /* right curly single quote (apostrophe) */\
                   '\u2013', ''), /* n-dash */\
                   '\u2014', ''), /* m-dash */\
                   '\u2026', '') /* ellipsis */), (SongID), UPPER(AlTitle) 
```

在`REPLACE`我的查询中似乎非常适合非特殊字符，如空格、逗号、句点等，但它似乎跳过了特殊字符。

我的猜测是字符需要以不同的格式编写。我尝试了以下但没有成功： `REPLACE(SoName, '\u2026', '')` `REPLACE(SoName, u'\2026', '')` `REPLACE(SoName, 0xE280A6, '')`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:41:35.827

[MySQL 字符串文字](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html)不提供多字节字符的转义序列。这是[一个超过 7 年的功能请求](http://bugs.mysql.com/bug.php?id=10199)，仍在等待分类：我不会屏住呼吸，它会很快得到解决。

您必须将实际字符放在字符串文字中，或者以所需的编码知道其组成字节（在这种情况下，您可以使用类似的东西[`CHAR()`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_char)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T17:04:41.347

我的兄弟告诉我把它放在包含 MySQL 查询的 Python 页面的最顶部：

```
from __future__ import unicode_literals 
```

现在一切似乎都正常了！

# android - android 中的设备 API 版本不正确

> ID：10394815
> 
> 赞同：1
> 
> 时间：2012-05-01T07:29:11.883
> 
> 标签：android

我是安卓新手。在我的应用程序中，我尝试调用 SOAP Web 服务，但是当我运行该项目时，它显示：Required API is 9, but Device API is 8。

我能为此做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:34:12.400

这意味着您在代码中使用的方法或类直到 API 修订版 9 才添加到 Android（Gingerbread，请参阅[此列表](https://developer.android.com/guide/appendix/api-levels.html)）。

如果您希望您的应用程序在较低的 API 版本上运行，则必须删除该调用，或使用反射（[如果需要，请在此处描述](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)）来检查它的可用性。无论哪种方式，您都必须找到另一种方法来在较低的 API 版本上执行您想要的操作。

# web-services - 使用地理编码 Web 服务 API 对交叉街道进行地理编码

> ID：10394820
> 
> 赞同：2
> 
> 时间：2012-05-01T07:29:44.807
> 
> 标签：web-services, api, geocoding, intersection

你好，来自阳光明媚的南非

我们正在使用 Google Geocode Webservices API 来获取街道地址的纬度/经度。这在使用一条街道时效果很好。有没有办法使用 Geocode Webservices API 在 Geocode HTTP 请求中指定第二条街道（相交街道）？

```
Example: http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,***+Intersecting+Street***,+Mountain+View,+CA&sensor=true_or_false 
```

找到了一个可行的解决方案：

在相交的街道之前和之间分别使用“CORNER”和“AND”这两个词似乎可以得出预期的结果。未经广泛测试，使用后果自负。例子：

```
http://maps.googleapis.com/maps/api/geocode/json?address=CORNER%20Rooihuiskraal%20AND%20Ruimte,%20Centurion,%20Gauteng&sensor=false 
```

# android - 24小时后删除Android上的文件？

> ID：10394825
> 
> 赞同：0
> 
> 时间：2012-05-01T07:30:22.160
> 
> 标签：android

我是初级开发人员。我正在为 Android 构建一个应用程序。我的应用程序将有音频文件。但是对于此音频，您必须付费。音频将在 24 小时后消失，然后您必须再次为音频付费，始终是相同的音频文件。用户将始终从 Google Play（像免费和专业版这样的东西）。

我该怎么做。制作一个包然后删除它，（我认为这不是可能的）。我可以使用“删除”功能来做到这一点，但是包呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:52:39.617

您应该使用alarmmanager设置24h间隔，如果手机关机则需要重置警报。例如，请参见此处：[https ://stackoverflow.com/a/7846622/969325](https://stackoverflow.com/a/7846622/969325)

但是您的文件有问题，您需要以某种方式锁定或隐藏它，以便用户无法复制它并保持这种状态。我不确定如何实现这一目标。

# facebook - 如何在应用程序为 Facebook 用户生成的请求中获取数据参数

> ID：10394826
> 
> 赞同：0
> 
> 时间：2012-05-01T07:30:24.847
> 
> 标签：facebook, facebook-javascript-sdk, facebook-apps, facebook-app-requests, facebook-requests

我通过调用以下函数向用户（已授权该应用程序）发送应用程序生成的请求

```
 function send_app_request(){
   FB.api( "/" + '<USER-ID>' + "/apprequests", "POST", {
     message: "Custom Request for you!",
     data: "<REDIRECT-APP-URL>",
     access_token: "<APP-ACCESS-TOKEN>"
   }, function(response) {
     console.log(response);
   });
 } 
```

当用户单击画布右上角应用程序图标（带有红色数字）下方的弹出窗口时，他将被重定向到画布的索引页面，其中“request_ids”作为参数之一。如何获取/解码我在 FB.api 调用期间（在上面的函数中）传递的“数据”参数（包含一个 url），以便我可以将用户重定向到我的应用程序中的特定位置（url）。

我已经在许多应用程序中看到了此功能，并且我“无法”弄清楚他们如何能够将用户重定向到其应用程序中的特定位置，而不是当用户单击弹出窗口时的索引页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:39:27.467

数据特定于您发送给用户的请求。

当用户单击请求并进入您的页面（使用“request_ids”参数）时，您应该获取请求的数据。

获取请求的 url：

> [https://graph.facebook.com/USER_ID/apprequests](https://graph.facebook.com/USER_ID/apprequests)

您将获得请求列表和每个请求的数据（如果已发送）。然后，您需要通过向以下位置发出请求来删除用户的请求：

> [https://graph.facebook.com/REQUEST_ID?method=delete](https://graph.facebook.com/REQUEST_ID?method=delete)

你可以在这里找到一个 php 示例：[升级到 Requests 2.0](http://developers.facebook.com/blog/post/464/)

# ruby-on-rails - 打开的文件太多 - 带有 net/http 的 socket(2)

> ID：10394827
> 
> 赞同：1
> 
> 时间：2012-05-01T07:30:27.363
> 
> 标签：ruby-on-rails, ruby, sockets

我对 net/http 的 http 请求有疑问...

我编写了一个与 dailymotion api 交互的 ruby​​ 脚本。该脚本将上传视频“test.flv”。基本上它由四个请求组成。

在步骤“#Create the video object”之前它可以完美运行。最后一个“response = http.request(req)”命令引发以下错误->

Errno::EMFILE: 打开的文件太多 - socket(2)

这是代码，谢谢任何建议...

```
require 'net/http'
require 'curb'
require 'json'

# Authenticate the user
url = URI.parse( 'https://api.dailymotion.com/oauth/token' )
req = Net::HTTP::Post.new(url.path)
req.set_form_data({ 'grant_type' => 'password',
           'client_id' => 'my_client_id',
           'client_secret' => 'my_client_secret',
           'username' => 'myusername',
           'password' => 'mypassword'
         })
http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.request(req)

access_token = JSON.parse( response.body )['access_token']
access_url = 'https://api.dailymotion.com/file/upload?access_token=' + access_token

# Get an upload URL
url = URI.parse( access_url )
req = Net::HTTP::Get.new( url.request_uri )
http = Net::HTTP.new( url.host, url.port )
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.request( req )

upload_url = JSON.parse( response.body )['upload_url']
progress_url = JSON.parse( response.body )['progress_url']

# Post the video
fields_hash = {}

post_data = fields_hash.map { |k, v| Curl::PostField.content(k, v.to_s) }
post_data << Curl::PostField.file('file', 'C:/test.flv')

c = Curl::Easy.new(upload_url)
c.multipart_form_post = true
c.http_post(post_data)

file_url = JSON.parse( c.body_str )['url']

# Create the video object
url = URI.parse( 'https://api.dailymotion.com/me/videos' )
req = Net::HTTP::Post.new(url.path)
req.set_form_data({ 'url' => file_url,
                'access_token' => access_token
         })
http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.request(req)

puts response.body 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:19:07.653

尝试调用完成

```
http.finish 
```

在响应 = http.request(req) 之后。

# html - HTML5 中 id 、name 和 class 属性的规则

> ID：10394829
> 
> 赞同：0
> 
> 时间：2012-05-01T07:30:28.847
> 
> 标签：html, tagname

HTML5中id、class、name属性和标签名的命名规则是什么？和以前的HTML标准有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:43:38.800

ID和类别没有变化。您仍然可以使用任何 UTF8 字符来设置 ID 和类属性。请记住，在您的文档中只使用一次相同的 ID。

对于自定义标签属性，他们引入了 data-* 属性系列，您可以在其中将任何自定义数据附加到您的元素（以字符串形式）。

仅此而已-据我所知。

# javascript - 如何在谷歌地图顶部添加窗帘

> ID：10394830
> 
> 赞同：0
> 
> 时间：2012-05-01T07:30:38.657
> 
> 标签：javascript, jquery, html, css

我需要研究标题，但不确定在这种情况下什么合适，谷歌地图很烦人，它会使网站的整个设计崩溃。我可以知道如何在嵌入的谷歌地图上制作窗帘或类似图像，当用户悬停时，图像会向上滑动并显示谷歌地图？

谢谢你的回复

![在此处输入图像描述](../Images/703ddcd2732b7a0a9ab563972dee8270.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:28:01.480

我假设您尝试`<div>`使用 jQuery 将 a 放置在地图顶部以向上滑动窗帘？

这滑动错误的方式，但你在这个[jsfiddle中得到了想法](http://jsfiddle.net/VF57B/1/)

**HTML**

```
<div id="map"></div>
<div id="curtain"></div> 
```

**CSS**

```
#map{
    background-image: url('http://0.tqn.com/d/webtrends/1/0/e/2/-/-/google-maps-walk-2.jpg');
    height:400px;
    width:400px;
}

#curtain{
    background-image: url('http://www.vectordiary.com/isd_tutorials/005_curtain/step02_2.gif');
    height:400px;
    width:400px;
    margin-top:-400px;
} 
```

**jQuery**

```
$('#curtain').click(function(){
    $(this).slideUp("slow");
}); 
```

# jquery - onclick 将下拉列表数据添加到 json 数组中

> ID：10394832
> 
> 赞同：0
> 
> 时间：2012-05-01T07:30:53.827
> 
> 标签：jquery, json, struts2

我有一个这样的下拉项目

```
<s:select name="title" 
          list="%{rulemoduleVOList}"
          headerKey="0"
          headerValue="--Select--"
          listKey="id"
          listValue="name" 
          onchange="showStatCode()"
          id="moduleList" /> 
```

除此之外，我还放置了一个按钮

```
<input type="button" value="Add" /> 
```

当我单击此按钮时，我需要使用迭代器将下拉列表选定数据及其值添加到 json 数据，例如：

添加数据后，json数组将是这样的

```
[
    {"id":"100","name":"john","order":"1"},
    {"id":"120 ","name":"honey","order":"2"},
    {"id":"130 ","name":"benz","order":"3"},
    ...
] 
```

注意：每次添加 json 数组时都应该动态增加，单击它时我还有一个按钮，json 数组中的任何数据都应该存储到数据库中

# iphone - sqlite 没有看到我添加到数据库的新表

> ID：10394833
> 
> 赞同：1
> 
> 时间：2012-05-01T07:31:00.807
> 
> 标签：iphone, sqlite

我有一个包含 7 个表的数据库，并且我只是使用 sqlite 查询从我的应用程序中调用它们……我对此并不陌生，即使使用加密，我也让应用程序工作得很好……

现在正在构建一个新应用程序并决定在我的数据库中添加 2 个新表，但是当我调用它们时 sqlites 没有看到它们并返回错误“没有这样的表：历史”我已经添加了这些新表，只是使用 sqlitemanger 附加组件就像我一直做的那样，它带有 Firefox。

在终端中，我可以看到它们，并且可以从中获取数据，但在我的应用程序中并非如此。

你有什么主意吗？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:39:16.540

尝试从模拟器中删除您的应用程序并再次运行它。我认为您更新的数据库没有被复制。

# java - 如何在 JFrame 中的两个标签之间绘制箭头/线？

> ID：10394840
> 
> 赞同：2
> 
> 时间：2012-05-01T07:31:33.250
> 
> 标签：java, swing, jframe

> **可能重复：**
> [如何在 Java 中绘制有向箭头线？](https://stackoverflow.com/questions/2027613/how-to-draw-a-directed-arrow-line-in-java)

我正在尝试在 JFrame 中的两个标签之间绘制一条线/箭头。我知道标记为 (x1,y1) (x2,y2) 的这两个标签的特定坐标。我怎样才能在它们之间画一条线/箭头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:39:42.933

这应该有助于[http://java-sl.com/connector.html](http://java-sl.com/connector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:44:41.847

您实际上应该使用一些开发平台 IDE，例如 Netbeans 或一些 Swing 专家 IDE，因为它们在开发过程中对您有很大帮助。
使用 IDE，您可以拖放操作，因此它会自动生成代码。
不仅画线，而且您可以轻松完成所有工作。试试看....

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T09:16:18.767

这不好，但它正在运行：

```
public class Example extends JFrame {

private static JLabel a;
private static JLabel b;

public static void main(String[] args) {

    Example example = new Example();

    JPanel panel = new JPanel();
    panel.setLayout(null);

    a = new JLabel("a");
    a.setBounds(50, 50, 10, 10);

    b = new JLabel("b");
    b.setBounds(150, 150, 10, 10);

    panel.add(a);
    panel.add(b);

    example.getContentPane().add(panel);

    example.setGlassPane(new MyGlas());
    example.getGlassPane().setVisible(true);

    example.setSize(400, 400);

    example.setVisible(true);
}

public static class MyGlas extends JComponent {

    public void paint(Graphics g) {

        Rectangle aBounds = a.getBounds();
        Rectangle bBounds = b.getBounds();

        g.drawLine(aBounds.x, aBounds.y, bBounds.x, bBounds.y);
    }
}
} 
```

# laravel-5.5 - 找不到模块“laravel-echo”

> ID：10394841
> 
> 赞同：6
> 
> 时间：2012-05-01T07:31:35.090
> 
> 标签：laravel-5.5

我正在学习配置 Laravel Echo Socket.js 并**[在此处关注文章](https://laravel.com/docs/5.5/broadcasting#installing-laravel-echo)**

bootstrap.js 中的代码如下

```
import Echo from "laravel-echo"

window.Echo = new Echo({
    broadcaster: 'socket.io',
    host: window.location.hostname + ':6001'
}); 
```

当我运行上面的代码时，它说，找不到模块“laravel-echo”

我没有使用 pusher 和 redis。在上面的参考页面中，我认为，没有只为 socket.io 提供安装指南

有人可以解释我是否遗漏了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-10-02T03:05:08.500

我解决了安装以下软件包的相同问题：

```
npm install --save laravel-echo pusher-js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-26T21:07:55.520

我需要安装以下软件包。

```
npm install -g laravel-echo-server 
```

**[然后按照此处给出的分步说明进行操作](https://github.com/tlaverdure/laravel-echo-server)**

最后将下面的代码放在任何 js 文件之前。

```
<script src="http://{{ Request::getHost() }}:6001/socket.io/socket.io.js"></script> 
```

# php - 如何在 CRON 下运行输出 CSV 文件并通过电子邮件发送的脚本

> ID：10394844
> 
> 赞同：-4
> 
> 时间：2012-05-01T07:31:59.980
> 
> 标签：php, csv, cron, phpmailer

我需要运行一个脚本来查询我的数据库并将结果输出为 CSV 文件。我有生成 CSV 的脚本我现在只需要弄清楚如何在凌晨 2 点安排这个任务，并使用 PHP 将输出的 CSV 通过电子邮件发送到电子邮件地址列表。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:36:20.037

你编辑你的 crontab 并简单地安排你想要发生的事情

例如

```
$ crontab -e 
```

编辑您的 crontab。添加一个条目以运行您的脚本

```
MAILTO=me@example.com
00 02 * * * cd /here && runMy2AMScript 
```

就是这样。您的脚本完成所有工作，cron 只是调用它。有关 crontab 的更多信息，请使用`man crontab`或`man 5 crontab`.

如果您不清楚如何安排发送电子邮件 - 那是 2 个任务安排（如上）和一个发送电子邮件的脚本 - 您可以通过多种方式（例如使用[swiftmailer](http://swiftmailer.org/)。选择一种技术并询问另一个具体问题，如果你被卡住了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:09:16.617

我对cron不太了解。但是一旦我尝试使用 cron 发送邮件。我的 php 站点文件夹是 home/USER/www。所以这就是我所做的：

```
1\. created a txt file: cron.txt
2\. placed cron required informtion : 29 16 * * * php /home/USER/www/test_cron.php
3\. ( test_cron.php contains code for a dummy mail )
4\. opened terminal and executed command : crontab cron.txt 
```

已经两个月了，我每天下午 4:29 都会收到一封电子邮件

希望这些信息对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:37:24.387

> 任何帮助或想法将不胜感激。

更多信息将不胜感激。你在哪里遇到问题？是在排期吗？如果是这样，如果网络服务器运行 Windows，请在 Google 搜索“计划任务”，如果网络服务器运行 Linux、Unix 或 BSD，请搜索“Cronjobs”。

如果您使用库，通过电子邮件发送文件相当简单；我建议研究[使用 Swiftmailer 附加文​​件](http://swiftmailer.org/docs/messages.html)。

# java - 关于intern()方法的作用

> ID：10394850
> 
> 赞同：1
> 
> 时间：2012-05-01T07:32:24.643
> 
> 标签：java

我已经编写了代码，但请告诉`intern()`String 类的方法的功能，它是否试图将池对象地址和内存地址放在同一页面上？

我开发了以下代码：

```
 public class MyClass
    {   
         static String s1 = "I am unique!";
         public static void main(String args[])
         {
            String s2 = "I am unique!";
            String s3 = new String(s1).intern();// if intern method
 is removed then there will be difference
          // String s3= new String("I am unique!").intern(); 

            System.out.println("s1 hashcode -->"+s1.hashCode());
            System.out.println("s3 hashcode -->"+s3.hashCode());
            System.out.println("s2 hashcode -->"+s2.hashCode());
            System.out.println(s1 == s2);
            System.out.println("s1.equals(s2) -->"+s1.equals(s2));
            /* System.out.println("s1.equals(s3) -->"+s1.equals(s3));
             System.out.println(s1 == s3);
            System.out.println(s3 == s1);
            System.out.println("s3-->"+s3.hashCode());*/
        //  System.out.println(s3.equals(s1));
        }
    } 
```

现在上述`intern()`方法的作用是什么？

由于`hashCodes()`是相同的，请解释`intern()`方法的作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:36:07.810

由于`operator==`检查身份而不是相等性`System.out.println(s1 == s3);`（已被注释掉）`true`仅当`s1`和`s3`是**完全相同的 objects**时才会产生。

该方法`intern()`确保发生这种情况，因为两个字符串 -`s1`并且彼此`s3` *相等*`intern()`，通过分配它们的值，您可以确保它们实际上是相同的对象，而不是两个不同但相等的对象。

正如[javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)所说：

> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。

ps 你不调用`intern()`on `s1`，因为它是一个[字符串文字](http://docs.oracle.com/javase/tutorial/essential/regex/literals.html)- 因此已经是规范的。

但是，它对 没有影响`s1 == s2`，因为它们都是字符串文字，并且`intern()`都不会在它们上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:04:48.917

`String.intern()`规范化内部 VM 字符串池中的字符串。它确保**每个不同的字符序列只有一个唯一的 String 对象**。**然后可以通过标识**（使用运算符`==`）而不是相等（ ）来比较这些字符串`equals()`。

例如 ：

```
public class Intern{
    public static void main(String[]args){
        System.out.println(args[0].equals("")); //True if no arguments

        System.out.println(args[0] == ""); //false since there are not identical object

        System.out.println(args[0].intern() == ""); //True (if there are not multiple string tables - possible in older jdk)
    }
} 
```

因此，如果两个字符串相等（`s1.equals(s2)`为真），`s1.intern() == s2.intern()`则为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T07:36:11.367

此方法返回字符串对象的规范表示。由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。

返回字符串对象的规范表示。

参考[http://www.tutorialspoint.com/java/java_string_intern.htm](http://www.tutorialspoint.com/java/java_string_intern.htm)

如果调用这个String对象的intern方法，

```
str = str.intern(); 
```

JVM会检查JVM维护的String池是否包含与str对象相同值的String对象，equals方法返回true。

如果 JVM 找到这样的对象，则 JVM 将返回对存在于字符串池中的该对象的引用。

如果字符串池中不存在与当前对象相等的对象，则 JVM 将此字符串添加到字符串池中，并将其对调用对象的引用返回。

JVM将该对象添加到String池中，这样下次任何字符串对象调用intern方法时，如果这两个字符串的值相等，就可以进行空间优化。

您可以使用 equals 和 == 运算符检查实习生方法的工作情况。

参考：http: [//java-antony.blogspot.in/2007/07/string-and-its-intern-method.html](http://java-antony.blogspot.in/2007/07/string-and-its-intern-method.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:37:27.927

来自[String.intern()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29) Javadoc

> 一个字符串池，最初是空的，由 String 类私下维护。
> 
> 当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。
> 
> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java™ 语言规范的第 3.10.5 节中定义。
> 
> 返回： 与此字符串具有相同内容的字符串，但保证来自唯一字符串池。

您是否有 Javadoc 未涵盖的更具体的疑问？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T07:38:13.567

.intern() 确保仅存储唯一 String 的一份副本。因此，对同一实习字符串的多次引用将导致相同的 hashCode()，因为散列应用于同一字符串。

# java - 如何将 @Transactional 与 Spring Data 一起使用？

> ID：10394857
> 
> 赞同：95
> 
> 时间：2012-05-01T07:33:58.380
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我刚开始从事 Spring-data、Hibernate、MySQL、JPA 项目。我切换到 spring-data 以便我不必担心手动创建查询。

我注意到`@Transactional`当您使用 spring-data 时不需要使用 of，因为我也尝试了没有注释的查询。

`@Transactional`我应该/不应该使用注释是否有特定原因？

作品：

```
@Transactional
public List listStudentsBySchool(long id) {
    return repository.findByClasses_School_Id(id);
} 
```

也有效：

```
public List listStudentsBySchool(long id) {
    return repository.findByClasses_School_Id(id);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-05-05T22:44:17.983

你的问题到底是什么？注释`@Repository`或`@Transactional`.

`@Repository`根本不需要，因为您声明的接口将由 Spring Data 基础架构创建并激活异常转换的代理支持。因此，在 Spring Data 存储库接口上使用此注解根本没有任何效果。

`@Transactional`[`SimpleJpaRepository`](https://github.com/SpringSource/spring-data-jpa/blob/master/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java)- 对于 JPA 模块，我们在支持代理 ( )的实现类上有这个注释。这有两个原因：首先，持久化和删除对象需要 JPA 中的事务。因此，我们需要确保事务正在运行，我们通过使用 注释方法来做到这一点`@Transactional`。

读取类似`findAll()`和`findOne(…)`正在使用的方法`@Transactional(readOnly = true)`不是绝对必要的，但会触发事务基础架构中的一些优化（设置`FlushMode`为`MANUAL`让持久性提供者在关闭 时可能跳过脏检查`EntityManager`）。除此之外，该标志也在 JDBC 连接上设置，这会导致该级别的进一步优化。

根据您使用的数据库，它可以省略表锁，甚至拒绝您可能意外触发的写操作。因此，我们建议您也使用`@Transactional(readOnly = true)`for 查询方法，您可以轻松地将该注释添加到您的存储库接口。`@Transactional`确保向您可能在该接口中声明或重新装饰的操作方法添加一个普通的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T11:43:26.607

我认为这个问题有点宽泛，不能在数据访问层的注释上减少。我们需要考虑应用程序的整个堆栈、我们想要应用的事务策略等等。Mark Richards 在 IBM developerworks 站点上有一组非常全面的关于此主题的文章。您可以在这里找到第一个：[https ://developer.ibm.com/articles/j-ts1/](https://developer.ibm.com/articles/j-ts1/)

最好的祝福

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-25T22:24:26.203

在您的示例中，这取决于您的存储库是否有`@Transactional`。

如果是，那么在您的情况下（按原样）服务-不应该使用`@Transactional`（因为没有必要使用它）。如果您计划向处理另一个表/存储库的服务添加更多逻辑，您可以`@Transactional`稍后添加 - 那么会有一点。

`@Transactional`如果不是 - 那么如果您想确保您没有隔离问题，那么您的服务应该使用，例如您没有阅读尚未通勤的内容。

--

如果谈论一般的存储库（作为 crud 收集接口）：

1.  我会说：不，你不应该使用@Transactional

为什么不：如果我们*认为*存储库在业务上下文之外，并且它不应该知道传播或隔离（锁定级别）。它无法猜测它可能涉及到哪个事务上下文。

存储库是“无业务的”（如果您相信的话）

说，你有一个存储库：

```
class MyRepository
   void add(entity) {...}
   void findByName(name) {...} 
```

并且有一个业务逻辑，比如 MyService

```
 class MyService() {

   @Transactional(propagation=Propagation.REQUIRED, isolation=Isolation.SERIALIZABLE)
   void doIt() {
      var entity = myRepository.findByName("some-name");
      if(record.field.equal("expected")) {
        ... 
        myRepository.add(newEntity)
      }
   }

 } 
```

即在这种情况下：`MyService`决定它想要将存储库涉及到什么。

在这种情况下，propagation="Required" 将确保 BOTH 存储库方法 -`findByName()`并且`add()`将涉及单个事务，并且 isolation="Serializable" 将确保没有人可以干预。它将为涉及 get() 和 add() 的表保持锁定。

但是其他一些服务可能想以不同的方式使用 MyRepository，根本不涉及任何事务，比如它使用`findByName()`方法，对任何限制不感兴趣，以读取它现在可以找到的任何内容。

2.  我会说是的，如果您将存储库视为始终返回有效实体（无脏读）等的存储库（避免用户错误地使用它）。即您的存储库应该处理隔离问题（并发性和数据一致性），例如：

我们希望（存储库）确保当我们`add(newEntity)`首先检查是否存在具有相同名称的实体时，如果是这样 - 插入，全部在一个锁定工作单元中。（与我们在上面的服务级别所做的相同，但我们没有将此责任转移到存储库）

比如说，不能有 2 个具有相同名称的任务“进行中”状态（业务规则）

```
 class TaskRepository
   @Transactional(propagation=Propagation.REQUIRED, 
   isolation=Isolation.SERIALIZABLE)
   void add(entity) {
      var name = entity.getName()
      var found = this.findFirstByName(name);
      if(found == null || found.getStatus().equal("in-progress")) 
      {
        .. do insert
      }
   }
   @Transactional
   void findFirstByName(name) {...} 
```

2nd 更像是 DDD 风格的存储库。

* * *

我想如果出现以下情况，还有更多内容需要介绍：

```
 class Service {
    @Transactional(isolation=.., propagation=...) // where .. are different from what is defined in taskRepository()
    void doStuff() {
      taskRepository.add(task);
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:39:06.657

你应该使用`@Repository`注释

这是因为`@Repository`用于将未经检查的 SQL 异常转换为 Spring Excpetion，您应该处理的唯一异常是`DataAccessException`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T14:00:02.107

我们还使用@Transactional 注释来锁定记录，以便另一个线程/请求不会更改读取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-19T13:16:54.357

`@Transactional`当我们同时创建/更新一个实体时，我们使用注释。如果`@Transactional`抛出异常的方法，注释有助于回滚先前的插入。

# oop - 在OOP编程风格中，为什么要隐藏对象的数据成员不被其他人直接访问

> ID：10394858
> 
> 赞同：3
> 
> 时间：2012-05-01T07:34:01.740
> 
> 标签：oop

我只是不知道为什么这是规则。这条规则有什么好处？
你能给我一个例子，让我们更好地遵循这个规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:37:46.547

它也称为数据隐藏，有助于维护对象的完整性。它可以防止数据被误用和外部干扰。无法直接访问数据，但可以指定访问控制以获取信息。数据或对象可以根据需要公开或私有。私有数据在对象范围之外是不可访问的。当数据公开时，程序的其他部分可以访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:01:50.637

“防止你的类的用户滥用它”经常被吹捧为封装如此重要的原因。

我认为这意味着您正在编写类供其他不受信任的开发人员使用，我认为这种情况很少见。不受信任的客户论点混淆了这个问题。

大多数时候，您班级的用户是“您”和您团队的成员。

类的公共方法和属性构成了类和其余代码之间的接口点。界面越小越容易使用和理解。

封装的原因是使您的类的接口尽可能小而简洁。

如果你的类是高度内聚的并且有小的接口，你可以很容易地“忘记”它们是如何工作的，而专注于你程序的另一部分。

以发出 Web 请求的类为例。它可能会公开一个公共方法 DownloadFile(url)。这个类可能非常复杂，但它的简单界面意味着你可以忘记它是如何工作的内部结构，让你有更多的空间来专注于你试图解决的问题。

反例是公开公开其所有方法的 Web 请求类。它有 20 个方法，DownloadBegin、DownloadEnd、ChooseProtocol 等。所有这些都可以在内部使用，但从不打算在外部调用。为了使用该类，您必须先知道它在内部是如何工作的，然后才能知道要调用哪些方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:49:09.240

被吹捧的数据隐藏的优点之一是它有助于保护您的课程免受滥用。你不能相信你班级的用户会用它做正确的事，所以你不可能用它做错事。大多数情况下，让您的类的用户直接访问它的任何成员都会使该成员有可能被设置为一些无效或无意义的值，或者在错误的时间设置。

更实际的原因之一是，您无法更改数据成员的实现。例如，如果您有一个`size`可以公开访问的成员，那么稍后您需要让该类实际*执行某些操作*以响应大小的变化，那么您就被卡住了。如果您有访问器方法，那么这些方法可以像它们需要的那样神奇。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:38:40.373

它也与关注点分离有关。如果您有公共接口并且数据不是公共的，您可以随时更改数据的表示方式，只更改保存数据的类。如果数据没有隐藏并且您更改了它，则必须更改所有使用该数据的代码。

# asp.net - asp.net会员LoginStatus控件需要代码吗？

> ID：10394870
> 
> 赞同：1
> 
> 时间：2012-05-01T07:35:17.297
> 
> 标签：asp.net, asp.net-membership, session-hijacking, loginstatus

我正在使用 loginStatus 控件让我的用户注销。我不再为注销过程编写代码（不删除会话、删除 cookie 或重定向用户），只依赖控件的内置代码。

现在我想知道在页面上放置一个 LoginStatus 控件并让它自己完成其余部分是否足够（我的意思是删除会话 cookie 并注销用户）或者我应该处理它的事件并编写代码来删除 cookie 和注销用户。

我[读过](http://www.codeproject.com/Articles/210993/Session-Fixation-vulnerability-in-ASP-NET)，即使在通过 LoginStatus 控件注销用户后，我们也应该删除会话 cookie 以避免其他人获取和使用它（劫持它）或在其内容中添加一些字符串（如 IP 或 ...）以避免劫持...是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:53:03.567

尝试这样的事情：

```
FormsAuthentication.SignOut();
Session.Abandon();

// clear authentication cookie
HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
cookie1.Expires = DateTime.Now.AddYears(-1);
Response.Cookies.Add(cookie1); 
```

接着

```
FormsAuthentication.RedirectToLoginPage(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T08:50:16.867

该`LoginStatus`控件仅注销您的 FormsAuth 票证，但并未明确放弃当前会话。需要注意的是，FormsAuth 票证（存储为 cookie）实际上决定了用户是否登录以及谁登录；ASP.NET 会话没有（除非您有自定义代码在表单身份验证状态之上另外检查 ASP.NET 会话）。

所以，如果你只需要签出票，你就可以走了。但是，如果您的应用程序将信息存储在 ASP.NET 会话中并且您也需要将其丢弃，那么您应该`LoggedOut`在页面的代码隐藏中为事件添加一个事件处理程序并调用 Session.Abandon（或任何您认为合适的方法）。

# c++ - 如何跟踪检测到的对象

> ID：10394874
> 
> 赞同：0
> 
> 时间：2012-05-01T07:35:32.550
> 
> 标签：c++, tracking, face-detection, background-subtraction

我已经阅读了很多关于对象/跟踪检测的内容。运动目标跟踪有很多算法，例如帧差分，背景减法等。还有很多目标检测算法：Viola Jones，Haar-like features 等。我使用 Viola Jones 算法，Haar-like features 和级联分类器来检测物体。因此，例如，如果我使用分类器进行人脸检测，我的问题是如何跟踪每一帧上的所有人脸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:38:44.707

最简单的方法是只为每一帧运行检测器并查看检测重叠以确定下一帧中是否相同的脸。或者一个欧几里得距离可能很好。如果脸总是这样，那就太好了。如果面部可以是非正面的，那么您需要进行某种基于直方图的跟踪，这种跟踪计算成本很低。

# c# - 如何在 C++/CLI 中执行 C# typeof(bool)？

> ID：10394875
> 
> 赞同：2
> 
> 时间：2012-05-01T07:35:36.877
> 
> 标签：c#, types, c++-cli

我试图找出 VisualHint.SmartPropertyGrid.PropertyGrid 是否能满足我设置属性的需要，并且我的一些属性是布尔值。

其中一个参数是

```
//   container:
//     The instance of an object containing the C# property displayed in this new
//     property. 
```

所以总的来说，我可以给它一个合适的对象——但是，布尔值是值类型，而不是对象。

在 C# 中，正确的语法是将容器输入为`typeof(bool)`. 在 C++ 中是否有任何明智的方法可以做到这一点，还是我必须制作自己的 bool 对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T10:23:30.837

C# 的 typeof 运算符的完全等价物由运算符在 C++/CLI 中提供`typeid`：

```
Type^ t = bool::typeid; 
```

# c - 当我同时访问 pthread_mutex_t pthread_mutex_lock.c:62: __pthread_mutex_lock: Assertion `mutex->__data.__owner == 0' 时出错

> ID：10394876
> 
> 赞同：1
> 
> 时间：2012-05-01T07:35:40.597
> 
> 标签：c, linux, multithreading, pthreads

为什么我收到此错误？

这个程序是为了重现我在其他程序中收到的错误。

这个程序的唯一任务是同时锁定和解锁 pthread_mutex_t

```
#include <pthread.h>
#include <stdio.h>
#include <stdbool.h>

#ifndef TREADSXXX
#define TREADSXXX 100
#endif

#ifndef TREADSXXX_TO_UNLOCK
#define TREADSXXX_TO_UNLOCK 25
#endif

#ifndef TREADSXXX_TO_LOCK
#define TREADSXXX_TO_LOCK 4
#endif

#ifndef SEEDXXX
#define SEEDXXX 0
#endif

void *threadF(void *nada);

pthread_mutex_t stop[TREADSXXX];

pthread_mutex_t numberAsignation;

pthread_mutex_t waintNumberAsignation;

pthread_t idTread[TREADSXXX];

unsigned int counterT=0;

int main(void){
    unsigned int localCounter;
    srand(SEEDXXX);
    pthread_mutex_init(&numberAsignation, NULL);
    pthread_mutex_init(&waintNumberAsignation, NULL);
    for(localCounter=0; localCounter<TREADSXXX; localCounter++)
        pthread_mutex_init(stop+localCounter, NULL);
    pthread_mutex_lock(&waintNumberAsignation);
    for(localCounter=0; localCounter<TREADSXXX; localCounter++)
        pthread_create(idTread+localCounter, NULL, threadF, NULL);
    while(getchar()!='X');
}

void *threadF(void *nada){
    unsigned int nunmber, localCounter, aux;
    pthread_mutex_lock(&numberAsignation);
    nunmber=counterT;
    counterT++;
    pthread_mutex_unlock(&numberAsignation);
    if(nunmber<TREADSXXX-1)
        pthread_mutex_lock(&waintNumberAsignation);
        pthread_mutex_unlock(&waintNumberAsignation);
    while(true){
        for(localCounter=0; localCounter<TREADSXXX_TO_UNLOCK; localCounter++){
            pthread_mutex_unlock(stop+(rand()%TREADSXXX));
        }
        for(localCounter=0; localCounter<TREADSXXX_TO_LOCK; localCounter++){
            pthread_mutex_lock(stop+(rand()%TREADSXXX));
        }
    }
} 
```

--------------------#####--------------------

这是另一个程序

这个程序模拟了哲学家进餐问题。

```
// Este programa es propenso al siguiente error: pthread_mutex_lock.c:62: __pthread_mutex_lock: Assertion `mutex->__data.__owner == 0' failed.

#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <stdbool.h>

// Prototipo de la función que va a ejecutar los thread hijos
void *filosofo (void *nada);

//Cantidad de filosofos
#define FILOSOFOS 5

#define CONDICIONITERACION(X) ((X<1000000))

#define MAX_VENTAJA 2

// mutex que representan los tenedores
pthread_mutex_t tenerdor[FILOSOFOS];

// mutex para evitar corrupcion en la salida por pantalla
pthread_mutex_t pantalla;

// mutex que permite comprobar la cantidad de comensales
pthread_mutex_t pt_m_tComensales;

// mutex que no deja comer al filosofo
pthread_mutex_t pt_m_tEsperar;

// mutex para asignarle numero al filosofo
// deberia hacerlo pasandole un parametro a la funcion hija pero no se como
pthread_mutex_t pt_mNumeroF;

pthread_mutex_t diferenciaIteraciones;

pthread_mutex_t ventajaInjusta[FILOSOFOS];

struct acaparamiento{
    short iteraciones;
    bool bloqueado;
} seguiento[FILOSOFOS];

// Guarda en un arreglo char el estado de los tenedores
char estadoTenedores[FILOSOFOS+1];

// Variable usada para asignarle numeros a los filosofos
int iContadorF=0;

// Lleva la cuenta del numero de comensales
int iComensales=0;

//
bool bEsperando=false;

// Principal
main()
{
    // Arreglo de identificadores de hilos
    pthread_t idHilo[FILOSOFOS];

    // error devuelto por la función de creación del thread
    int error;

    int contador;

    /* Se inicializan los mutex */
    pthread_mutex_init (&pantalla, NULL);
    pthread_mutex_init (&pt_mNumeroF, NULL);
    pthread_mutex_init (&diferenciaIteraciones, NULL);
    for(contador=0; contador<FILOSOFOS; contador++){
        pthread_mutex_init (tenerdor+contador, NULL);
        pthread_mutex_init (ventajaInjusta+contador, NULL);
    }

    // Se inicia el arreglo que contiene la info para mostrar por pantalla
    for(contador=0; contador<FILOSOFOS; contador++){
        // Se inicia el arreglo que contiene la info para mostrar por pantalla
        estadoTenedores[contador]='L'; 
        seguiento[contador].iteraciones=0;
        seguiento[contador].bloqueado=false;
    }
    estadoTenedores[FILOSOFOS]='\0';

    printf("\nRenglon: numero filosofo, actividad (C: Cojer, D: Dejar) tenedor, iteracion");
    printf("\nTenedores: L(libre) O(Ocupado) Q(Quiero)");

    printf("\ninicia:  %s", estadoTenedores);

    // Creamos los threads
    for(contador=0; contador<FILOSOFOS; contador++){
        error = pthread_create (idHilo+contador, NULL, filosofo, NULL);

        // Comprobamos el error al arrancar el thread
        if (error != 0)
        {
            perror ("No puedo crear thread");
            exit (-1);
        }
    }

    // Esperamos hasta que se digite X y se precione enter
    // El progama se detendra cuando suceda esto aunque los hilos esten activos
    while(getchar()!='X');
}

// Esta funcion se ejecuta concurrentemente
void *filosofo (void *nada)
{
    int contador, numeroFilosofo, contador2, menor;
    char ctemp1;

    //Le asignamos un puesto al filosofo
    pthread_mutex_lock (&pt_mNumeroF);
        numeroFilosofo=iContadorF;
        iContadorF++;
    pthread_mutex_unlock (&pt_mNumeroF);

    for(contador=0; CONDICIONITERACION(contador); contador++){

        // Se verifica que no tengamos mas de 4 comensales
        // En si hay 4 se bloquea al 5
        pthread_mutex_lock (&pt_m_tComensales);
            iComensales++;
            if(iComensales>=FILOSOFOS-1){
                pthread_mutex_lock (&pt_m_tEsperar);
            }
        pthread_mutex_unlock (&pt_m_tComensales);

            pthread_mutex_lock (&diferenciaIteraciones);
                seguiento[numeroFilosofo].iteraciones++;
                menor=seguiento[0].iteraciones;
                for(contador2=1; contador2<FILOSOFOS; contador2++){
                    if(seguiento[contador2].iteraciones<menor)
                        menor=seguiento[contador2].iteraciones;
                }
                for(contador2=0; contador2<FILOSOFOS; contador2++){
                    seguiento[contador2].iteraciones=seguiento[contador2].iteraciones-menor;
                    if(seguiento[contador2].iteraciones<MAX_VENTAJA && seguiento[contador2].bloqueado)
                        pthread_mutex_unlock (ventajaInjusta+contador2);
                }
                pthread_mutex_lock (&pantalla);
                    printf("\nFilosofo %d ciclo %d diferencia interaciones: ", numeroFilosofo, contador);
                    for(contador2=0; contador2<FILOSOFOS; contador2++){
                        seguiento[contador2].iteraciones;
                        printf("%d ", seguiento[contador2].iteraciones);
                    }
                pthread_mutex_unlock (&pantalla);
            pthread_mutex_unlock (&diferenciaIteraciones);

            // El filosofo toma el primer tenedor
            pthread_mutex_lock (tenerdor+numeroFilosofo);
                pthread_mutex_lock (&pantalla);
                    printf("\n%d C1 %d:  %s  ->  ", numeroFilosofo, contador, estadoTenedores);
                    estadoTenedores[numeroFilosofo]='O';
                    printf("%s;  ->  ", estadoTenedores);
                    ctemp1=estadoTenedores[(numeroFilosofo+1)%FILOSOFOS];
                    estadoTenedores[(numeroFilosofo+1)%FILOSOFOS]='Q';
                    printf("%s", estadoTenedores);
                    estadoTenedores[(numeroFilosofo+1)%FILOSOFOS]=ctemp1;
                pthread_mutex_unlock (&pantalla);

                // El filosofo toma el segundo tenedor
                pthread_mutex_lock (tenerdor+(numeroFilosofo+1)%FILOSOFOS);
                    pthread_mutex_lock (&pantalla);
                        printf("\n%d C2 %d:  %s  ->  ", numeroFilosofo, contador, estadoTenedores);
                        estadoTenedores[(numeroFilosofo+1)%FILOSOFOS]='O';
                        printf("%s", estadoTenedores);
                    pthread_mutex_unlock (&pantalla);

                // El filosofo deja el segundo tenedor
                pthread_mutex_unlock (tenerdor+(numeroFilosofo+1)%FILOSOFOS);
                pthread_mutex_lock (&pantalla);
                    printf("\n%d D2 %d:  %s  ->  ", numeroFilosofo, contador, estadoTenedores);
                    estadoTenedores[(numeroFilosofo+1)%FILOSOFOS]='L';
                    printf("%s", estadoTenedores);
                pthread_mutex_unlock (&pantalla);

            // El filosofo deja el primer tenedor
            pthread_mutex_unlock (tenerdor+numeroFilosofo);
            pthread_mutex_lock (&pantalla);
                printf("\n%d D1 %d:  %s  ->  ", numeroFilosofo, contador, estadoTenedores);
                estadoTenedores[numeroFilosofo]='L';
                printf("%s", estadoTenedores);
            pthread_mutex_unlock (&pantalla);

        // Si hay solo 3 comensales se desbloquea la entrada
        pthread_mutex_unlock (&pt_m_tEsperar);
        pthread_mutex_lock (&pt_m_tComensales);
            iComensales--;
        pthread_mutex_unlock (&pt_m_tComensales);

        pthread_mutex_lock (&diferenciaIteraciones);
            if(MAX_VENTAJA<=seguiento[numeroFilosofo].iteraciones){
                seguiento[numeroFilosofo].bloqueado=true;
                pthread_mutex_unlock (&diferenciaIteraciones);
                pthread_mutex_lock (ventajaInjusta+numeroFilosofo);
                pthread_mutex_lock (&diferenciaIteraciones);
            }
            seguiento[numeroFilosofo].bloqueado=false;
        pthread_mutex_unlock (&diferenciaIteraciones);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:47:09.460

你不能释放你不持有的互斥锁。

您的线程函数需要`pthread_mutex_unlock`一个随机互斥体，它可能不被它持有。

锁定和解锁必须对称进行。拿一个锁，做你需要的，在同一个线程中释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:18:15.583

除了破碎的随机锁定和解锁，还有一些其他的问题：

风格的东西：如果您使用数组索引而不是指针算术，您的初始化可能会更容易阅读：

```
for(localCounter=0; localCounter<TREADSXXX; localCounter++)
    pthread_mutex_init(stop+localCounter, NULL);
pthread_mutex_lock(&waintNumberAsignation);
for(localCounter=0; localCounter<TREADSXXX; localCounter++)
    pthread_create(idTread+localCounter, NULL, threadF, NULL); 
```

缓冲区将是：

```
for(localCounter=0; localCounter<TREADSXXX; localCounter++)
    pthread_mutex_init(&stop[localCounter], NULL);
pthread_mutex_lock(&waintNumberAsignation);
for(localCounter=0; localCounter<TREADSXXX; localCounter++)
    pthread_create(&idTread[localCounter], NULL, threadF, NULL); 
```

还：

```
if(nunmber<TREADSXXX-1)
    pthread_mutex_lock(&waintNumberAsignation);
    pthread_mutex_unlock(&waintNumberAsignation); 
```

布局很糟糕，应该是：

```
if(nunmber<TREADSXXX-1)
{
   pthread_mutex_lock(&waintNumberAsignation);
}
pthread_mutex_unlock(&waintNumberAsignation); 
```

明确执行路径。

# android - 从 Android 中的 Parcelable 数组中获取值

> ID：10394880
> 
> 赞同：3
> 
> 时间：2012-05-01T07:36:01.290
> 
> 标签：android, parsing, parcelable

我需要解析并从中获取值：

```
Parcelable[] uuidExtra = intent.getParcelableArrayExtra("android.bluetooth.device.extra.UUID"); 
```

我的目标是从 Parcelable[] 上方获取 UUID。如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T02:23:08.247

尝试这样的事情。它对我有用：

```
 if(BluetoothDevice.ACTION_UUID.equals(action)) {
     BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
     Parcelable[] uuidExtra = intent.getParcelableArrayExtra(BluetoothDevice.EXTRA_UUID);
     for (int i=0; i<uuidExtra.length; i++) {
       out.append("\n  Device: " + device.getName() + ", " + device + ", Service: " + uuidExtra[i].toString());
     } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-14T16:52:36.463

您需要遍历 Parcelable[]，将每个 Parcelable 转换为 ParcelUuid 并使用 ParcelUuid.getUuid() 来获取 UUID。虽然您可以像在另一个答案中一样在 Parcelables 上使用 toString() ，但这只会给您一个表示 UUID 的字符串，而不是一个 UUID 对象。

```
Parcelable[] uuids = intent.getParcelableArrayExtra(BluetoothDevice.EXTRA_UUID);
if (uuids != null) {
    for (Parcelable parcelable : uuids) {
        ParcelUuid parcelUuid = (ParcelUuid) parcelable;
        UUID uuid = parcelUuid.getUuid();
        Log.d("ParcelUuidTest", "uuid: " + uuid);
    }       
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T13:46:45.907

在引用文档并说返回的对象是 ParcelUuid 类型时，接受的答案是正确的。但是，他没有提供指向该链接的链接；这里是： [BluetoothDevice.EXTRA_UUID](https://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#EXTRA_UUID)。

此外，提供的代码在两个方面是错误的；第一，它所指的方法与问题的方法不同，第二，它是不可编译的（在这里采取一些语言学自由）。为了纠正这两个问题，代码应该是：

```
Parcelable[] uuidExtra = intent.getParcelableArrayExtra("android.bluetooth.device.extra.UUID");
if (uuidExtra != null) {
   for (int j=0; j<uuidExtra.length; j++) {
      ParcelUuid extraUuidParcel = (ParcelUuid)uuidExtra[j];
      // put code here
   }
} 
```

第三，如果想要一些额外的保护（尽管通常，对象应该总是`ParcelUuid`），可以在 中使用以下内容`for`：

```
 ParcelUuid extraUuidParcel = uuidExtra[j] instanceof ParcelUuid ? ((ParcelUuid) uuidExtra[j]) : null;
   if (extraUuidParcel != null) {
      // put code here
   } 
```

此解决方案由[Arne](https://stackoverflow.com/users/2564263/arne)提供。我只是还不能添加评论，而且我提供了文档页面:)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-01T08:13:57.350

从文档中它指出额外的是[ParcelUuid](http://developer.android.com/reference/android/os/ParcelUuid.html)

所以你应该使用

```
ParcelUuid uuidExtra intent.getParcelableExtra("android.bluetooth.device.extra.UUID");
UUID uuid = uuidExtra.getUuid(); 
```

希望有帮助。

# wordpress - WordPress 我的插件 $_GET $_POST 单个文件

> ID：10394891
> 
> 赞同：0
> 
> 时间：2012-05-01T07:37:25.997
> 
> 标签：wordpress, post, plugins, get

我制作了新插件，可以帮助我将新帖子插入编辑器。

```
add_action('media_buttons', 'jgames_button', 20);

function jgames_button()
{
$url = plugins_url().'/j_games_uploads/j_games_uploads.php?page=add&TB_iframe=true&amp;height=500&amp;width=640';
echo '<a href="'.$url.'" class="thickbox" title="Add new game"><img src="'.admin_url('images/media-button-other.gif').'" alt="Add new game"></a>';
}

if(isset($_GET['page']) && $_GET['page'] == 'add'){
?>
<div class="wrap">

<h2>Add new game:</h2>
<form method="post" action="j_games_uploads.php" enctype="multipart/form-data">

    <p>
        <label for="publisher">publisher:</labe>
        <input type="text" name="publisher" />
    </p>

    ...Here is more forms...

    <p class="submit">
        <input type="submit" name="submit" value="Save Changes" class="button-primary" />
    </p>

</form>
 </div>
<?php
} elseif (isset($_POST['submit'])){
print_r($_POST['submit']);
} 
```

但是当我在编辑器中单击新按钮时，我看到弹出窗口出现错误“致命错误：调用未定义的函数 add_action()”如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:20:12.230

你的错误在于形式行动。不要将表单帖子发送到独立文件。取而代之的是，您可以使用 `

```
<form action="?action=j_games_uploads" enctype ...` 
```

我希望我能解释一下。

# solr - 使用 Nutch solrindex 索引多个核心？

> ID：10394893
> 
> 赞同：6
> 
> 时间：2012-05-01T07:37:32.233
> 
> 标签：solr, nutch

命令中是否有参数`bin/nutch solrindex`指示要索引到哪个 Solr 核心？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T10:03:41.473

我不知道任何核心参数。您应该只在[solr url](http://wiki.apache.org/nutch/bin/nutch%20solrindex)参数中包含核心的名称，如下所示`http://localhost:8983/solr/core0`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:15:17.043

在 nutch 1.4 中，这是我用来索引不同内核的：

bin/nutch 抓取 urls/url1 -solr [http://localhost:8983/solr/](http://localhost:8983/solr/core1) core1 -depth 10 -topN 10000

# paypal - ASPDotNetStoreFront 和 PayPal Express：客户端重定向到 PayPal 时不显示订单详细信息

> ID：10394894
> 
> 赞同：0
> 
> 时间：2012-05-01T07:37:41.790
> 
> 标签：paypal, aspdotnetstorefront

我在 ASPDotNetStoreFront 中启用了 PayPal Express 付款，当客户端被重定向到 PayPal 时，订单摘要区域中会出现以下消息，而不是订单项目和总数：

您可以在付款前查看您的订单详情。

我发现这与 ASPDotNetStoreFront 发送的请求有关，所以我的问题是：可以配置 ASPDotNetStoreFront 以便将相应的请求发送到 PayPal，以便 PayPal 显示订单摘要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:20:12.430

AspDotNetStorefront 中的 PayPal Express 集成不包括此信息，正确。我们希望在未来的版本中改变这一点。

应该可以针对此问题开发自定义修复程序。我们推荐我们的开发合作伙伴之一，因为他们对我们的软件知识渊博且经验丰富：

[http://www.aspdotnetstorefront.com/c-121-development-partners.aspx](http://www.aspdotnetstorefront.com/c-121-development-partners.aspx)

PayPal Standard 确实包含订单摘要信息。

AspDotNetStorefront 支持

# javascript - javascript keydown 事件仅适用于 html 输入标签？

> ID：10394912
> 
> 赞同：0
> 
> 时间：2012-05-01T07:39:50.517
> 
> 标签：javascript, input, keydown

我已经使用 keyDown 事件通过判断 e.keycode 来管理输入标签值，但是当我想使用 keyDown 事件对`body`element 或做一些事情时`img`，我发现它不起作用，比如：

```
$('body,img').keyDown(function(e){
    console.log(e.keyCode);
}); 
```

keyDown 事件是否仅适用于`input`标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:44:18.710

keyDown 事件仅适用于*可聚焦*元素。这将包括输入字段、文本区域等，但您可能不会找到任何浏览器支持该`img`元素。来自[jQuery 文档](http://api.jquery.com/keydown/)：

> 当用户第一次按下键盘上的键时，keydown 事件被发送到元素。它可以附加到任何元素，但事件仅发送到具有焦点的元素。可聚焦元素在浏览器之间可能会有所不同，但表单元素总是可以获得焦点，因此是此事件类型的合理候选者。

您可能还对这个相关问题感兴趣： [哪些 HTML 元素可以接收焦点？](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)

# python - 为什么将拆分分配给打印格式不起作用？

> ID：10394916
> 
> 赞同：4
> 
> 时间：2012-05-01T07:40:16.243
> 
> 标签：python, string, split, string-formatting

我很困惑为什么我可以将返回值分配/解包给`split()`适当数量的变量，但是在使用格式化指令的打印字符串中使用同样失败。

例如，给定：

```
In [202]: s
Out[202]: 'here are 4 values'

In [203]: s.split()
Out[203]: ['here', 'are', '4', 'values'] 
```

这按预期工作：

```
In [204]: a, b, c, d = s.split()

In [205]: print '%s %s %s %s' % (a, b, c, d)
here are 4 values 
```

但这失败了..

```
 In [206]: print '%s %s %s %s' % (s.split()) 
```

我不确定为什么？不应该将返回的`split()`结果解包并分布在格式化字符串的预期参数上吗？

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
C:\bla\Desktop\<ipython-input-206-600f130ff0b2> in <module>()
----> 1 print '%s %s %s %s' % (s.split())

TypeError: not enough arguments for format string 
```

“注意足够多的论据” .. 我在列表中确实有正确数量的项目。在这种情况下，列表是否由于某种原因没有解包，但对变量赋值？

我在尝试回答这个问题时遇到了这个 [问题](https://stackoverflow.com/q/10394091/1209279)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:41:56.273

你必须`s.split()`像这样转换成一个元组

```
>>> s = 'here are 4 values'
>>> '%s %s %s %s' % tuple(s.split())
'here are 4 values' 
```

用于格式化或[`.format()`](http://docs.python.org/library/string.html#format-string-syntax)改为使用，解包参数。

```
'{0} {1} {2} {3}'.format(*s.split()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T07:48:25.423

根本问题是`%`-formatting 和 unpacking 根本不相关。`%` *要求*值在一个元组中；其他类型的序列[将不起作用](http://docs.python.org/library/stdtypes.html#string-formatting)。（虽然它会接受一个非元组值。）

不幸的是，所有元组都被解释为值的元组，无论这是否可取。因此，要将元组*视为*一个值，您必须将其封装在另一个元组中：

```
>>> '%s' % ('a', 'b')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not all arguments converted during string formatting
>>> '%s' % (('a', 'b'),)
"('a', 'b')" 
```

`format`无论如何最好使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T07:48:39.647

我认为问题在于 % 不允许参数解包。这是一个有效的方法：

```
>>> s = 'Here are some values'
>>> '{} {} {} {}'.format(*s.split())
'Here are some values' 
```

@senderle 指出此语法仅适用于 python 2.7 及更高版本，以下是适用于以前版本的代码：

```
>>> s = 'Here are some values'
>>> '{0} {1} {2} {3}'.format(*s.split())
'Here are some values' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T07:45:23.843

```
>>> s = 'here are 4 values'
>>> print '%s %s %s %s' % tuple(s.split())
here are 4 values
>>> print '%s' % s.split()
['here', 'are', '4', 'values'] 
```

Python 正在尝试将列表转换为字符串，因此它只需要 1 个参数

# java - 如何从java执行mongo admin命令

> ID：10394917
> 
> 赞同：9
> 
> 时间：2012-05-01T07:40:16.430
> 
> 标签：java, mongodb, mongo-java

我想使用来自 java 的参数执行 soem admin 命令。

命令是：

```
{ enablesharding : "test" }
{ shardcollection : "test.test_collection", key : {"number":1} } 
```

我怎样才能从java驱动程序做到这一点？

以下代码不起作用：

```
mongo.getDb("admin").command("{shardcollection : \"test.test_collection\", key:\"number\":1} }") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T07:52:30.507

我刚找到

```
DB db = mongo.getDB("admin");
DBObject cmd = new BasicDBObject();
cmd.put("shardcollection", "testDB.x");
cmd.put("key", new BasicDBObject("userId", 1));
CommandResult result = db.command(cmd); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-01T19:34:26.683

我只想补充一点，Julias 的答案是正确的，但现在它已被弃用。您可以使用新的 API（`Document`类来自包 `org.bson`）：

```
MongoDatabase database = client.getDatabase("admin");
Document documentA = database.runCommand(new Document("enablesharding", "test"));
Document documentB = database.runCommand(
        new Document("shardcollection", "testDB.x").append("key", new Document("userId", 1))); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T07:52:42.937

您是否确保已成功通过数据库身份验证？

你试过 db.eval(COMMAND_THAT_YOU_WANT_TO_EVAL);

# c# - 在网格中显示巨大的列

> ID：10394922
> 
> 赞同：-4
> 
> 时间：2012-05-01T07:41:25.730
> 
> 标签：c#, asp.net

是否可以在带有滚动条的网格中显示超过 500 列？或者有没有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:00:18.347

这是可能的，但非常不可用。我认为您需要重新审视您的要求，并决定用户实际需要什么。我很少能想到这将是一个合适的 UI。

# perl - 正则表达式将从 A 类中搜索符号，但不从 B 类中搜索符号？

> ID：10394925
> 
> 赞同：1
> 
> 时间：2012-05-01T07:41:52.397
> 
> 标签：perl

我是 Perl 正则表达式编程的新手（在 .NET RegExp 类中使用它），所以一天多来我试图创建正则表达式，它将从 A 类（例如 class `\W`）而不是 B 类（例如 class `[']`）。换句话说，模式在位置 1 上`\W+`匹配，但我需要仅在位置 8 上匹配的模式。如果还有其他一些字符，如, , ，则此模式将仅跳过 B 类字符。有什么想法吗？我尝试过类似的愚蠢模式，但它的效果很奇怪……如果它真的有效的话。`d'sparil!``'``???``d'sparil!``!``\W``%``@``(``[']``[\W^'``]+`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:49:39.550

尝试：

```
/[^\w']/ 
```

因为`\W`是`[^\w]`。

# javascript - 为什么 UnderscoreJS 使用 toString.call() 而不是 typeof？

> ID：10394929
> 
> 赞同：10
> 
> 时间：2012-05-01T07:42:06.233
> 
> 标签：javascript, underscore.js

在 UnderscoreJS 的引擎盖下，我看到：

```
 _.isFunction = function(obj) {
    return toString.call(obj) == '[object Function]';
  };

  _.isString = function(obj) {
    return toString.call(obj) == '[object String]';
  };

  _.isNumber = function(obj) {
    return toString.call(obj) == '[object Number]';
  }; 
```

这似乎是一个奇怪的选择。为什么不直接使用 typeof 来确定一个值是字符串、函数还是数字？使用 toString 是否有性能提升？旧浏览器不支持 typeof 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-01T08:38:40.713

嗯，实际上这是因为`[[Class]]`通过检查来检查更快`toString`。错误也可能更少，因为 toString 为您提供了确切的 Class ...

检查这个：

```
var fn = function() { 
    console.log(typeof(arguments)) // returns object
    console.log(arguments.toString()) // returns object Arguments
} 
```

您可以在此处查看下划线 typeof 与 toString 的基准：

[http://jsperf.com/underscore-js-istype-alternatives](http://jsperf.com/underscore-js-istype-alternatives)

还有一些 github 问题有更好的解释：

[https://github.com/documentcloud/underscore/pull/332](https://github.com/documentcloud/underscore/pull/332)

[https://github.com/documentcloud/underscore/pull/321](https://github.com/documentcloud/underscore/pull/321)

编辑 1：

您还可以查看这篇很棒的文章：

[http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/](http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:22:42.207

drinchev 的回答部分正确。toString 目前*比*在大多数浏览器中使用 typeOf 慢得多。[请参阅他发布](http://jsperf.com/underscore-js-istype-alternatives/7)的使用 typeOf 的测试的第 7 版。两者仍然非常快，因此在大多数情况下，这种性能差异不会很明显，并且权衡比鸭子类型/ typeOf 更好地符合规范。

[下划线拉取请求 321](https://github.com/documentcloud/underscore/pull/321)（drinchev 列出）对权衡以及他们决定使用 toString 的原因进行了深入讨论。

# php - facebook登录后重定向到同一页面，以便我可以相应地发布帖子

> ID：10394930
> 
> 赞同：0
> 
> 时间：2012-05-01T07:42:14.120
> 
> 标签：php, facebook, magento, facebook-graph-api

> **可能重复：**
> [提交表单应在用户登录时完成](https://stackoverflow.com/questions/10395923/submission-of-form-should-be-done-when-on-user-login)

以下是我的代码，如果正在检查我在 Facebook 上发布的复选框，那么我一直在尝试制作一个脚本，那么首先将检查用户是否登录到 Facebook，但如果他不是，那么他将被重定向到 facebook 页面，登录到它并重定向回同一页面。我正在研究magento，当我检查复选框以在facebook上发布时，它会将我成功重定向到facebook并在那里登录我，但它没有成功将我重定向回来并给出无效表单数据的错误请让我知道我该怎么做修改以下代码，以帮助我完成我一直在尝试做的任务。

```
 function myfunction()
    {
    $myformData = $this->getRequest()->getPost('myform');
       $fbpost=$myformData['fbpost'];
$app_id = "APP_ID";
            $app_secret = "APP_SECRET";
            $facebook = new Facebook(array(
             'appId' => $app_id,
             'secret' => $app_secret,
             'cookie' => true,
             'fileUpload' => true,
            )); //making object for facebook connectivity

$user = $facebook->getUser();
if($user==0 && isset($fbpost)) // checking if user is login to facebook or not
{
header("Location:{$facebook->getLoginUrl(array('scope' => 'photo_upload,publish_stream,user_photos,manage_pages'))}"); //redirecting to facebook

}
else
{

          //  $con = $this->_getConnection();
    //        Mage::helper('Octopus/')
            $store = Mage::app()->getStore();$userId = $store->getName();
              $db = Mage::getSingleton('core/resource')->getConnection(core_write);

             $myformData = $this->getRequest()->getPost('myform');
           $fbpost=$myformData['fbpost'];
            if(isset($fbpost))
            {
                echo Mage::helper('function')->test();

            }
                $couponId = $myformData['coupon_id'];
                $coupontype=$myformData['coupon_type'];
                 $select = $db -> select();
            $select -> from('ops_mobile_coupons')
            -> where('id =?',$couponId);

             $data = $db -> fetchRow($select);
            $select = $db -> select() -> from('ops_image_type_coupon_details')->where('coupon_id = ?',$data['id']);
                $x = $db->fetchRow($select);

                $image=$x['image_path'];

    //        -> andWhere('client_id = ?', $userId);

               if(isset($fbpost) and $coupontype == 'image')
            {
    //Image Facebook Starts                 

                $app_id = "APP_ID";
                $app_secret = "APP_SECRET";
                $facebook = new Facebook(array(
                 'appId' => $app_id,
                 'secret' => $app_secret,
                 'cookie' => true,
                 'fileUpload' => true,
                ));

    $accounts_list = $facebook->api('/me/accounts');

                $accounts_list = $facebook->api('/me/accounts');

                //to get the page access token to post as a page
                foreach($accounts_list['data'] as $account){
                      if($account['id'] == 'me'){      // my page id =123456789
                        $access_token = $account['access_token'];
                        //echo "<p>Page Access Token: $access_token</p>";
                        }
                    }
                $attachment = array('message' => 'image coupon',
                                'access_token'  => $access_token,
                                'link' => 'http://operture.com/jeegesh/index.php/octopus/adminhtml_coupon/postpart2/key/34f1bf523a35bc8c9213d669097f8e50/',

                                'source' => $image,

                                );
                $status = $facebook->api('/me/feed', 'POST', $attachment);   // my page id =123456789
                //var_dump($status);
        }
    //Image Facebook Ends }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T23:35:22.493

您使用的 URL是否`redirect_uri`与您在应用设置中为应用配置的 URL 匹配？如果没有，应用程序身份验证将失败并出现错误 191（非管理员不会看到具体原因）

# java - 在网格中循环

> ID：10394931
> 
> 赞同：5
> 
> 时间：2012-05-01T07:42:14.987
> 
> 标签：java, loops

我使用这两个简单的循环从高度到底部、从右到左搜索网格。

```
for(int y=0; y<height; y++){
  for(int x=width; x>=0; x--){
  }
} 
```

基本上，我想像下图中的数字那样横向搜索网格，直到它覆盖所有单元格。我的方法效果不佳，所以我在这里寻求帮助。

![在此处输入图像描述](../Images/ab8239b8fe527047d0d6aed0216e6dc5.png)

我怎样才能以最快的方式做到这一点？我相信这应该可以只使用两个循环来完成，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T07:59:22.473

以下将做到这一点：

```
 final int h = 4;
 final int w = 3;
 for (int d = 0; d < w + h; d++) {
     for (int y = 0; y < h; y++) {
         int x = w - d + y;
         if (x < 0 || x >= w) continue;
         System.out.printf("%d %d\n", x, y);
     }
 } 
```

这里，`h`是高度，`w`是网格的宽度。

该算法基于以下观察：对于每个对角线，到顶部边缘和右侧边缘的距离之和保持不变。

外部循环遍历对角线；内循环，在对角线上的所有单元格上。

# scala - 隐式 Monoid[Int] 等在哪里实现

> ID：10394932
> 
> 赞同：9
> 
> 时间：2012-05-01T07:42:15.573
> 
> 标签：scala, scalaz

我尝试学习/理解一点 scalaz。为此，我从示例开始：

```
List(3, 4, 5).asMA.foldMap(x => x)
 => 12 //(3+4+5) 

def foldMap[B](f: A => B)(implicit r: Foldable[M], m: Monoid[B]) 
```

所以某处必须是一个 Foldable[List[_]] 和一个 Monoid[Int] （附加 = + 和零 = 0）。但我无法找到这两个隐式。有没有简单的方法可以找到它们？

然后下一个例子是：

```
List(3, 4, 5).asMA.foldMap(multiplication)
 => 60 //(3*4*5) 
```

在这里，我变得更加困惑。我假设乘法必须将 Monoid[Int] 替换为 append = *, zero = 1 的一个。但是 f: A=>B 丢失了。如果我遵循乘法，我找不到任何与 Monoid 或函数等相关的东西。

```
sealed trait IntMultiplication extends NewType[Int]

trait NewType[X] {
  val value: X
  override def toString = value.toString
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T09:20:37.530

处理隐式时有一些方便的编译器标志`-Xlog-implicits`：`-Xprint:typer`和`-Ytyper-debug`

在这种情况下，您可以使用`-Xprint:typer`flag 查看具有应用隐式的表达式。然后，第一个片段`List(3, 4, 5).asMA.foldMap(identity)`将扩展为

```
scalaz.this.Scalaz.SeqMA[List, Int](immutable.this.List.apply[Int](3, 4, 5)).asMA.foldMap[Int]({
  ((x: Int) => scala.this.Predef.identity[Int](x))
})(scalaz.this.Foldable.ListFoldable,
   scalaz.this.Monoid.monoid[Int](scalaz.this.Semigroup.IntSemigroup, scalaz.this.Zero.IntZero)); 
```

现在很明显

```
Monoid.monoid[Int](Semigroup.IntSemigroup, Zero.IntZero) 
```

用于创建`Monoid[Int]`实例（附加 = + 和零 = 0）

第二个片段，`List(3, 4, 5).foldMap(multiplication)`将扩展为

```
scalaz.this.Scalaz.SeqMA[List, Int](immutable.this.List.apply[Int](3, 4, 5)).foldMap[scalaz.IntMultiplication]({
  ((n: Int) => scalaz.Scalaz.multiplication(n))
})(scalaz.this.Foldable.ListFoldable,
   scalaz.this.Monoid.monoid[scalaz.IntMultiplication](scalaz.this.Semigroup.IntMultiplicationSemigroup, scalaz.this.Zero.IntMultiplicationZero)); 
```

在这种情况下`Monoid[IntMultiplication]`（附加 = * 和零 = 1）用作隐式参数。

### 更新

要`Monoid`为您的类型创建，您需要具有隐式`Semigroup`和`Zero`范围内

```
case class Foo(x: Int)

implicit def FooSemigroup: Semigroup[Foo] = semigroup((f1, f2) => Foo(f1.x + f2.x))
implicit def FooZero: Zero[Foo] = zero(Foo(0))

scala> (1 to 10) map Foo foldMap identity
res5: Foo = Foo(55) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T09:11:52.887

Scalaz 6 将类型类实例存储在类型类本身的伴随对象中，因此您需要查看那里。

在 Monoid[T] 的情况下，实际的类型类可分为两部分： Semigroup[T] 为我们提供了附加操作 (T, T) => T，Zero[T] 为我们提供了一个零函数： () => T. 然后可以通过位于 MonoidLow 中的隐式 def monoid 生成实际的 Monoid 实例。

对于 foldable，Foldable[List] 的类型类位于 Foldable 单例中，称为 ListFoldable。

我相信你已经解决了，整数范围内的默认幺半群是 (+, 0)，所以你在第二个例子中使用的乘法函数只是包装器类型 IntMultiplication 的转换器，它具有半群以及在相关伴随对象中定义的零个实例。

如果你想了解 Scalaz，这里有几个很好的介绍视频。我发现最有用的是这两个：

[1] [http://skillsmatter.com/podcast/scala/practical-scalaz-2518/js-1603](http://skillsmatter.com/podcast/scala/practical-scalaz-2518/js-1603)

[2] [http://www.infoq.com/presentations/Scalaz-Functional-Programming-in-Scala#.T0q_hgmiJbw.wordpress](http://www.infoq.com/presentations/Scalaz-Functional-Programming-in-Scala#.T0q_hgmiJbw.wordpress)

两者都涉及到幺半群。

# jquery - 一个 id 有两个动态数字 _ 分隔。使用 jQuery 只更新一个

> ID：10394935
> 
> 赞同：0
> 
> 时间：2012-05-01T07:42:26.833
> 
> 标签：jquery

我有一些输入文本字段，当按下 addMore 按钮时，我使用 jQuery 动态分配 id“parent_number 和 row_number”给它。

```
<input type="text" name="xpath" id="xpath_chield_'+parent_number+'_'+row_number+'" size="50"/> 
```

它在浏览器中的输出是

```
<input id="xpath_chield_2_3" type="text" size="50" name="xpath"> 
```

这工作正常

删除一个输入字段后，我只想将“parent_number”从id的当前parent_number更新为-1，而不是“row_number”

更新后会在浏览器中输出

```
<input id="xpath_chield_1_3" type="text" size="50" name="xpath"> 
```

我怎么能用 jQuery 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:05:23.223

您可以像这样减少 ID 的那部分：

```
element.id = element.id.replace( /(\d+)_(\d+)/, function(match, n, o ){
  return ( parseInt( n, 10 ) - 1 ) + "_" + o ;
}); 
```

演示： http: [//jsbin.com/ivivor/edit#javascript](http://jsbin.com/ifivor/edit#javascript)（控制台输出）

# javascript - 将网页上的文本加粗

> ID：10394936
> 
> 赞同：-2
> 
> 时间：2012-05-01T07:42:32.550
> 
> 标签：javascript, html, google-chrome

我正在考虑制作某种基于浏览器的插件，也许是 chrome，它使引号之间的文本变为粗体。我想知道，这是否可行，我需要研究什么才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:49:22.563

第一：是的，这是可能的。

看看如何开发[Chrome 扩展](http://code.google.com/chrome/extensions/getstarted.html)和[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)。对于这个问题，我认为内容脚本应该是您正在寻找的解决方案。

要将文本变为粗体，只需在[RegExp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)中查找 HTML 文本（而不是整个 HTML！）中的引号和其中包含的文本，然后将其包裹在强标签中。要查找文本，您可以借助[jQuery .text()](http://api.jquery.com/text/)方法提取文本。

替换脚本的简单模型是： `$(body).text().replace(/"([^"]*)"/mg, '"<strong>$1</strong>"')`

如果您决定这样做，您可以在此示例的基础上进行构建。尽管您仍然必须小心不要替换脚本标签内的任何文本。

尽管对于这个简单的脚本，您无需扩展名而是简单的[用户脚本](http://www.chromium.org/developers/design-documents/user-scripts)。我认为没有必要延长..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:48:44.403

如果你想构建一个 chrome 扩展，这里是你需要开始的地方：

[http://code.google.com/chrome/extensions/devguide.html](http://code.google.com/chrome/extensions/devguide.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T13:19:44.803

```
 $(".boldAllQuotationMarks").each(function() {
        $(this).html($(this).html().replace(/"([^"]*)"/mg, '"<strong style="color:#333">$1</strong>"'));
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T08:23:00.097

最复杂的部分可能是如何定义您将视为引号的内容以及您将如何识别它们。有几十种不同的引号以不同的方式使用，例如，右双角引号 (») 在某些语言中是开引号，在某些其他语言中是右引号，并且既是开头又是结尾用几种语言。此外，此字符通常用作不表示任何类型的引用，而是用作类似箭头的符号。

我不知道你为什么要在引号之间加粗文本，但如果它是为了突出显示某种类型，那么使用独特的背景颜色可能会更好。粗体可能会增加文本的宽度要求，通常不会增加太多，但许多网页的布局都精确到像素，如果单词变宽几个像素，这些布局可能会崩溃。

# jquery - 提高页面加载时间

> ID：10394939
> 
> 赞同：0
> 
> 时间：2012-05-01T07:43:14.857
> 
> 标签：jquery

我有一个包含 2 个部分的页面，介绍和主页。

加载页面后，将显示介绍并隐藏内容，单击跳过介绍 css 类会滑动，即显示页面内容并隐藏介绍。

还有一个变量存储在 cookie 中，以便下次不会向用户显示介绍。

到目前为止一切正常，唯一的问题是当我加载页面时它会保持空白几秒钟，直到执行 javascript。

有没有办法解决这个问题？

有问题的页面：http: [//new.brandonplanning.com/home](http://new.brandonplanning.com/home)

我创建的脚本：http: [//jsfiddle.net/alokjain_lucky/rEBfF/7/](http://jsfiddle.net/alokjain_lucky/rEBfF/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:51:07.523

默认情况下，您可以在介绍部分填写 a `Spinner`，然后加载并执行 javascript 删除它`spinner`（基本上是 .gif 图像）并在介绍部分中加载您想要的任何内容

# installshield - InstallShield 执行卸载自定义动作

> ID：10394943
> 
> 赞同：1
> 
> 时间：2012-05-01T07:43:37.183
> 
> 标签：installshield, uninstallation, custom-action, basic-msi

执行卸载时如何执行自定义操作？自定义操作位于基本 MSI 项目中，我使用的是 InstallShield 2010 Premier。我尝试将安装 UI 序列设置为在 SetupProgress 之后，并将安装 UI 条件设置为 REMOVE=”ALL”，但在卸载过程中没有调用该操作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:22:35.133

我假设您正确拼写了 REMOVE 属性。意识到当您单击添加/删除程序（程序和功能）中的卸载时，UI 序列不会被执行。它仅在您单击更改时才会执行。

此外，我不知道此自定义操作在做什么，但如果它对系统状态进行任何更改，那么它应该始终被安排为执行序列中的延迟自定义操作。

你真的很想读，然后再读，直到你明白（我花了好几次才明白）以下内容：

[Windows Installer 中自定义操作的安装阶段和脚本内执行选项](http://www.installsite.org/pages/en/isnews/200108/index.htm)

# perl - 异常处理和`Getopt::Long`

> ID：10394945
> 
> 赞同：0
> 
> 时间：2012-05-01T07:44:01.177
> 
> 标签：perl, exception-handling

当我传递一个无效的文件名时，为什么这个脚本继续运行而不死？

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use Getopt::Long qw(GetOptions :config bundling);

sub help {
    say "no help text";
}

sub read_config {
    my $file = shift;
    open my $fh, '<', $file or die $!;
    say <$fh>;
    close $fh;
}

sub helpers_dispatch_table {
    return {
        'h_help'                => \&help,
        'r_read'                => \&read_config,
    };
}

my $file_conf = 'does_not_exist.txt';
my $helpers = helpers_dispatch_table();

GetOptions (
    'h|help'            => sub { $helpers->{h_help}(); exit; },
    'r|read'            => sub { $helpers->{r_read}( $file_conf ); exit },
);

say "Hello, World!\n" x 5; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T07:51:34.547

从**perldoc Getopt::Long**

```
 A trivial application of this mechanism is to implement options that are related to each other. For example:

       my $verbose = '';   # option variable with default value (false)
       GetOptions ('verbose' => \$verbose,
                   'quiet'   => sub { $verbose = 0 });

   Here "--verbose" and "--quiet" control the same variable $verbose, but with opposite values.

   If the subroutine needs to signal an error, it should call die() with the desired error message as its argument. GetOptions() will catch the die(),
   issue the error message, and record that an error result must be returned upon completion. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:15:04.433

问题源于您尝试混合两个任务，以及不检查 GetOptions 是否发现任何错误。

实际上，修复任何一个错误都可以解决您的问题，但以下是解决这两个问题的方法：

```
sub help {
   # Show usage
   exit(0);
}

sub usage {
   my $tool = basename($0);
   print(STDERR "$_[0]\n") if @_;
   print(STDERR "Usage: $tool [OPTIONS] FILE ...\n");
   print(STDERR "Try `$tool --help' for more information.\n");
   exit(1);
}

my $opt_read;
GetOptions (
    'h|help' => \&help,
    'r|read' => \$opt_read,
) or usage("Invalid arguments");

my $config = read_config($opt_read); 
```

# c++ - 将数据解析为结构

> ID：10394951
> 
> 赞同：3
> 
> 时间：2012-05-01T07:44:23.030
> 
> 标签：c++, objective-c, ios

我正在做一个需要通过 TCP/IP 协议与设备通信的项目。该设备发送大量数据，我想以某种方式将其解析为一些对象/结构。

数据包示例（在 TCP 缓冲区 [] 中）：

```
[64] [1] [78] [244] [77] [189] [249] [149] hcurrent
[64] [1] [78] [247] [89] [95] [104] [85] htarget
[0] [0] [0] [0] [0] [0] [0] [0] qcurrent
[188] [220] [97] [3] [66] [62] [0] [0] kcurrent
[66] [0] [102] [103] [66] [99][153] [154] mcurrent
[253] [191] [246] [74] [170] [216] [242] [29] fmode
[102] [191] [246] [74] [178] [44] [92] [72] tmil
[137] mode 
```

现在这个包框架被标识为：

```
 double hcurrent
 double htarget
 double qcurrent
 float kcurrent
 float mcurrent
 float fmode
 float tmil
 unsigned char mode 
```

我的想法是，我可以以某种方式将数据直接解析为具有与上述相同结构的结构。当然，需要识别一些关键值来确定它是哪种数据。

如何才能做到这一点？

由于我正在为 iOS 设备编写代码，因此它必须是 Objective-C 或 C(++)。

编辑（测试将数据报的每个部分复制到结构中的方法）：小型 Java 实现，我尝试读取前 4 个字节`[0] [0] [1] [5]`：

```
byte[] read = new byte[4]; 
int length = 0;
while (length < read.length) {
    len = iStream.read(read, len, read.length);
}
int ByteLength = (int)unsignedIntToLong(read);
ByteLength = ByteLength-5;
state = 1; // Continue and work with next data. 
```

以及位操作方法：

```
public long unsignedIntToLong(byte[] b) 
{
    long l = 0;
    l |= b[0] & 0xFF;
    l <<= 8;
    l |= b[1] & 0xFF;
    l <<= 8;
    l |= b[2] & 0xFF;
    l <<= 8;
    l |= b[3] & 0xFF;
    return l;
} 
```

所以我获取了前面提到的前 4 个字节，它决定了一些特定的东西，最后找到了`465`. 我的计划是对接收到的数据的所有其他部分重复此过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:28:10.237

您将遇到的最大问题是结构不会以完全连续的形式存储数据，它们会根据[字边界对齐数据](http://en.wikipedia.org/wiki/Data_structure_alignment)

这意味着你不能简单地定义一个结构然后将你的 buffer[] 转换为它，如果缓冲区不包含一个结构。相反，您可能需要做的是声明一个结构，然后使用指向缓冲区 [] 的指针偏移量一次将缓冲区 [] 的每个部分存储在一个字段中。

如果这种方法太麻烦，通常可以关闭结构对齐，以便结构可以表示完全打包的数据。MSVC 允许使用[#pragma pack](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)来执行此操作。然而，这种方法确实减慢了对结构的内存访问。

**编辑：**这是一个示例，它显示了如何使用模板函数从缓冲区读取任何类型，然后将偏移量更新到该缓冲区。您可以使用此方法安全地将任意数量的类型一一解析为结构：

```
// We want to copy raw data to this structure
// but the short will cause it to be unaligned
struct _parsed_structure
{
    int a;
    int b;
    short c;
    int d;
} parsed_structure;

template<typename T>
void read_and_update_offset (int & offset, char * buffer, T & var)
{
    T * pInt = (T*)(buffer + offset);
    var = *pInt;
    offset += sizeof(T);
};

int _tmain(int argc, _TCHAR* argv[])
{
    // Here's a buffer which we know contains ints and shorts, we could just cast it to our structure
    // but this will cause errors because the structure will not be aligned properly.
    char buffer[] = { 1, 0, 0, 0, 2, 0, 0, 0, 3, 0, 4, 0, 0, 0 };

    // Read the first int from the buffer into the structure
    int offset = 0;
    read_and_update_offset(offset, buffer, parsed_structure.a);
    read_and_update_offset(offset, buffer, parsed_structure.b);
    read_and_update_offset(offset, buffer, parsed_structure.c);
    read_and_update_offset(offset, buffer, parsed_structure.d);

    // Print the values
    std::cout << 
        parsed_structure.a << " " <<
        parsed_structure.b << " " <<
        parsed_structure.c << " " <<
        parsed_structure.d << " " << std::endl;

    // Look the size of our structure is different than the size of our buffer due to alignment
    std::cout <<
        "sizeof(buffer)" << "==" << sizeof(buffer) << " " <<
        "sizeof(parsed_structure)" << "==" << sizeof(parsed_structure) << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:49:21.573

处理此类事情的常用方法是编写方法`nextInt`,`nextDouble`等，这些方法将从流中读取字节（以正确的“endian”顺序）并返回指定类型的值，同时更新指向数组的指针或索引。这比尝试内联转换更易于管理，并且非常有效。（您可以使用 C++ 与 Objective-C 来提高效率。）

# asp.net-mvc - 我应该如何根据 .NET Auth 打开或关闭 JQuery ajax

> ID：10394952
> 
> 赞同：0
> 
> 时间：2012-05-01T07:44:27.713
> 
> 标签：asp.net-mvc, jquery

**首先**，有没有办法在全局范围内打开或关闭 JQuery Ajax？我正在寻找与此[http://api.jquery.com/jQuery.fx.off/](http://api.jquery.com/jQuery.fx.off/)类似的东西- 但对于 $.ajax。

**其次**，根据用户是否登录设置开/关标志的最佳方法是什么？

*我正在使用 ASP.NET MVC3。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:21:54.207

好的，它已排序 - 扩展 $.ajax 方法。

```
(function($)
{
    // store original reference to the method
    var oldAjax = $.ajax;
    $.ajax = function(prop, value) {
        // execute new behaviour
        if ($.ajax.Off) return false;
        // execute original behaviour
        return oldAjax.apply(this, arguments);
    };
})(jQuery); 
```

然后我只是设置`$.ajax.Off`为`true`禁用 ajax 调用。

至于第二部分，我将设置一个隐藏的输入或其他东西......

# jquery - jquery模态对话框高度问题

> ID：10394953
> 
> 赞同：3
> 
> 时间：2012-05-01T07:44:38.290
> 
> 标签：jquery, html, jquery-ui, jquery-ui-dialog

我在网格中有一个链接，单击该链接我会在叠加层（jquery 模态对话框）上显示该特定行的评论。我在叠加层“评论、创建日期、创建者”上显示 3 列。下面是我用来实现这一点的 document.ready() 中的代码：

```
$(document).ready(function () {
$("#dvNotesPopup").dialog({
        autoOpen: false,
        width: 450,
        height: "auto",
        buttons: [{
            text: "Ok",
            click: function () {
                $(this).dialog("close");
            }
        }
        ]
    });
..... // some other code here
......// some other code here
}); 
```

**下面是点击事件和具有表格的 div**

```
 $("#dvNotesPopup").dialog("open"); 
 <div id="dvNotesPopup" title="Notes"  style="z-index: 999999"> 
```

我的问题是，当我点击一个包含非常大的评论文本的链接时，覆盖显示的高度很大，现在当我关闭此弹出窗口并单击包含小评论文本的链接时，覆盖仍然具有旧的高度属性并且覆盖层内的网格尺寸非常小。我的意思是叠加层没有根据网格所在的 div 调整大小。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:48:33.373

设置 `height: "auto !important",`解决了我的问题。问题是覆盖层正在增加先前关闭的覆盖层的高度。`!important`每次打开叠加层时，设置都会正确设置高度

# java - 在 Amazon AWS 上托管 java servlet

> ID：10394957
> 
> 赞同：4
> 
> 时间：2012-05-01T07:45:06.607
> 
> 标签：java, servlets, amazon-ec2

我有一个需要托管在 Amazon AWS 上的 java servlet（.war 文件）。

有谁知道所涉及的步骤，以教程的形式帮助我做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T08:13:28.040

听上去，您并不熟悉部署 Web 服务器或 Java servlet 容器（如 Tomcat）的来龙去脉。也就是说，我认为您将战争文件部署到 AWS 的最快和最简单的方法是使用 Amazon 的[Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)功能（查看标题为“面向 Java 开发人员”的部分）。如果您设法创建了一个 war 文件，那么 Elastic Beanstalk 应该可以让您快速启动并运行。

如果您想了解更多有关部署 war 文件的具体细节，那么您应该阅读有关如何设置和部署[Tomcat](http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html)的信息。仅供参考 Tomcat 是一个 Web 服务器和 Java servlet 容器。它可以安装在 AWS 上。

# tfs - 错误卸载后如何取回 TFS(2010) 数据

> ID：10394960
> 
> 赞同：1
> 
> 时间：2012-05-01T07:45:16.790
> 
> 标签：tfs, database-restore, data-recovery

错误卸载后如何取回 TFS(2010) 数据？

我有 TFS_Configuration、TFS_Warehouse、TFS_ProjectName1 和 TFS_Analysis 数据库的 SQL Server 备份。

我安装了一个新的 TFS，现在我有了新的 TFS_Configuration、TFS_Warehouse、TFS_NewProjectName 和 TFS_Analysis 数据库，但我想从以前的 TFS 中取回旧数据。

我尝试按照 [http://msdn.microsoft.com/en-us/library/ms404869%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms404869%28v=vs.100%29.aspx)中的步骤操作， 但现在我被困在尝试从备份中恢复数据库（我得到恢复开始之前的验证错误，表示数据库不同）。我该怎么办？

主要目标是恢复旧 TFS 的内容文件。我有什么选择？是否可以以编程方式读取（到本地文件夹）旧的 TFS 数据？（我应该读取哪个表？这样我恢复了存储在 WSS_Content 中的文档）

请帮忙！我们没有任何数据可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:13:52.597

不要遵循“将 Team Foundation Server 从一个硬件配置移动到另一个”过程，这不是必需的。

基本上你需要做的是：

1.  安装新的 TFS 服务器。
2.  [将团队项目集合](http://msdn.microsoft.com/en-us/library/dd936138.aspx)(TPC) 移动到这个新服务器。

但是有一个技巧，通常只有在您事先正确分离 TPC 的情况下才能完成第 2 步，这不是您的情况。因此，您必须使用[TFSConfig 恢复](http://msdn.microsoft.com/en-us/library/ff407077.aspx)命令来修复 TPC 的 SQL 备份（您应该在运行此命令之前创建一个额外的副本，以防万一）。

最后一个想法，确保服务器和新服务器之间的 TFS 版本完全相同，您关于“数据库不同”的错误可能建议您尝试在 TFS 2010 RTM 上恢复 TFS 2010 SP1 TPC（例如） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:06:04.480

以下是我遵循的步骤和遇到的问题：

*   我使用“将数据还原到同一位置” [http://msdn.microsoft.com/en-us/library/ms252458.aspx](http://msdn.microsoft.com/en-us/library/ms252458.aspx)
*   卸载 TFS 后，我备份并从 SQL Server 中删除了所有 TFS 数据库：TFS_Configuration、TFS_Warehouse、TFS_ProjectCollection、ReportServer、ReportServerTemp。（我没有做备份，但我从 SQL Server 分析实例中删除了 TFS_Analisys）
*   我卸载了 SharePoint，然后尝试重新安装它，但失败了。解决方案是从 SQL Server 中删除 WSS_Content，然后安装成功。
*   我安装了一个新的 TFS（没有创建 TFS_ProjectCollection）
*   Reporting Services 发生错误。（因为我删除了 ReportServer、ReportServerTemp）。已使用 Reporting Services 配置解决：打开数据库选项卡 -> 更改数据库 -> 创建新的报表服务器数据库 ...继续使用默认选项。
*   我从备份中恢复了 ReportServer、ReportServerTemp。
*   安装 TFS 后，我停止了 TFS 服务：TFSServiceControl quiesce，然后我在 SQL Server 中从备份中恢复了 TFS 数据库（使用 OVERWRITE 选项）
*   我只重建了 analisys 服务：

> TFSConfig RebuildWarehouse /analysisServices 更新所有服务
> 帐户 TfsConfig Accounts /add /AccountType:ApplicationTier
> /account:YourTFSServicesAccount /password:YourTFSServicesPassword
> /SQLInstance:YourSqlServer /DatabaseName:TFS_Configuration
> 
> TfsConfig 帐户 /add /AccountType:ReportingDataSource /account:YourTFSServicesAccount /password:YourTFSServicesPassword /SQLInstance:YourSqlServer /DatabaseName:TFS_Configuration

*   清除服务器上的数据缓存
*   注册 Tfs_Configuration

    > TFSConfig registerDB /SQLInstance:YourSqlServer /DatabaseName:Tfs_Configuration
    > TFSServiceControl unquiesce

*   从 SQL Server 配置管理器：启动您需要的服务（分析服务）

*   从服务启动 SQL 报告服务

# java - WebLogic 上的序列化问题

> ID：10394964
> 
> 赞同：1
> 
> 时间：2012-05-01T07:45:33.337
> 
> 标签：java, serialization, weblogic

当我在本地服务器（Jetty）上运行我的代码时，我的一个类没有实现可序列化，那时它运行良好。（没有实现可序列化，代码在本地服务器上运行良好）

但是当我在 weblogic 上部署它时，它给我的错误是：

```
Caused by: java.rmi.UnmarshalException: 
```

当我对那个特定的类实现 Serializable 时，WebLogic 上的错误就消失了。

知道为什么会这样吗？

**错误的堆栈跟踪**

```
<65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766596> <BEA-000000> <Caused by: java.rmi.UnmarshalException: com.example.usecase.command.version.VersionSearchCriteria; nested exception is:
        java.io.NotSerializableException: com.example.usecase.command.version.VersionSearchCriteria>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766597> <BEA-000000> < at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:350)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766598> <BEA-000000> < at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:252)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766599> <BEA-000000> < at com.example.Starter_5i7spw_EOImpl_1002_WLStub.evaluateCommand(Unknown Source)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766600> <BEA-000000> < at com.example.taco2.service.impl.CallcomServerService.callServerWithCommand(CallcomServerService.java:178)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766601> <BEA-000000> < ... 40 more>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766602> <BEA-000000> <Caused by: java.io.NotSerializableException: com.example.usecase.command.version.VersionSearchCriteria>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766603> <BEA-000000> < at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1087)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766604> <BEA-000000> < at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1382)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766605> <BEA-000000> < at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1354)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766606> <BEA-000000> < at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1296)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766607> <BEA-000000> < at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1085)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766608> <BEA-000000> < at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:304)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766609> <BEA-000000> < at weblogic.rmi.extensions.server.CBVOutputStream.writeObject(CBVOutputStream.java:91)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766610> <BEA-000000> < at weblogic.rmi.internal.ServerRequest.copy(ServerRequest.java:238)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766611> <BEA-000000> < at weblogic.rmi.internal.ServerRequest.sendReceive(ServerRequest.java:166)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766612> <BEA-000000> < at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:335)>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <System.err> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766613> <BEA-000000> < ... 43 more>
####<Tracing Data here> <01.05.2012 09:02:46 CEST> <Error> <HTTP> <example> <coms1m1vm1> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-000000000000003d> <1335855766617> <BEA-101020> <[weblogic.servlet.internal.WebAppServletContext@eff17d - appName: 'taco2', name: 'taco2', context-path: '/taco2'] Servlet failed with Exception
java.lang.NullPointerException
        at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:384)
        at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:318)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:226)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:124)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
        at com.example.taco2.common.AuthorizeFilter.doFilter(AuthorizeFilter.java:65)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
        at com.example.enterprise.beasecurity.AuthenticationFilter$1.run(AuthenticationFilter.java:150)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(Unknown Source)
        at weblogic.security.Security.runAs(Security.java:41)
        at com.example.enterprise.beasecurity.AuthenticationFilter.doFilter(AuthenticationFilter.java:147)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
        at com.example.taco2.common.EncodingFilter.doFilter(EncodingFilter.java:36)
        at com.example.taco2.common.Taco2EncodingFilter.doFilter(Taco2EncodingFilter.java:27)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(Unknown Source)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(Unknown Source)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(Unknown Source)
        at weblogic.servlet.internal.WebAppServletContext.execute(Unknown Source)
        at weblogic.servlet.internal.ServletRequestImpl.run(Unknown Source)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:172)
>
####<01.05.2012 09:02:50 CEST> <Error> <System.err> <example> <coms1m1vm1> <[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-0000000000000004> <1335855770431> <BEA-000000> <01.05.2012 09:02:50 - WARNUNG      : Could not refresh JMS Connection for destination 'jms/elu.AnswerQueue2' - retrying in 5000 ms. Cause: Error creating bean with name 'elu.connection.target.factory2' defined in class path resource [at/example/abc/kernel/beanContext/abc.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: While trying to lookup 'jms.com.example.elu.ConnectionFactory2' didn't find subcontext 'jms'. Resolved ''; remaining name 'jms/at/example/elu/ConnectionFactory2'>
####<01.05.2012 09:02:50 CEST> <Error> <System.err> <example> <coms1m1vm1> <[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-0000000000000004> <1335855770433> <BEA-000000> <>
####<01.05.2012 09:02:50 CEST> <Info> <System.out> <example> <coms1m1vm1> <[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'> <com> <> <65d8f2366e4156e8:6d5e12f8:137072e8ad2:-8000-0000000000000004> <1335855770436> <BEA-000000> <<<exampleTimeDebugInfo>>MeteredStream.isToRotate: [STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)' time=2012-05-01 09:02:32.435 creationTime=2012-05-01 09:02:29.335 CurrentTime=Tue May 01 09:02:50 CEST 2012>
^Z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:11:57.097

您可能正在通过 RMI 部署它（与使用 Jetty 不同），它需要序列化一些东西。

使用此标志启动 Weblogic

```
-Dsun.io.serialization.extendedDebugInfo=true 
```

它会告诉你发生了什么。

编辑：我对堆栈跟踪的阅读是 Weblogic 启用了集群，其中会话被序列化以允许集群节点之间的传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:22:14.130

This error is because WebLogic is actually serializing the object for the remote call in case there are multiple servers, while Jetty doesn't and uses EJB local interface.

# ruby-on-rails-3.1 - Rails，在条件中使用 or 语句进行分页

> ID：10394965
> 
> 赞同：1
> 
> 时间：2012-05-01T07:45:39.337
> 
> 标签：ruby-on-rails-3.1, will-paginate

所以基本上我有两种状态'，我想用 status_id "2" 和 status_id "5" 显示两个属性，属性永远不会有两个状态' 所以我知道我不想在这里使用 &，我'希望能够拥有和或声明，但我不知道如何去做。这就是我必须显示的 status_id "2" 并且它工作得很好。

```
@properties = Property.order("updated_at DESC").paginate(:per_page => 20, :page => params[:page], :conditions => { :status_id => '2' }) 
```

在我的模型中，我也有如下所示的范围，不确定我是否可以那样做......

```
scope :for_sale, joins(:status).where(:statuses => { :current => 'For Sale'})
scope :market_listings, joins(:status).where(:statuses => { :current => 'Market Listing'}) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:56:00.047

与其`:conditions`在`paginate`通话中使用，不如在 IMO 中更清晰、更容易地使用`where`，如下所示：

```
@properties = Property.where('status_id = 2 or status_id = 5').order("updated_at DESC").paginate(:per_page => 20, :page => params[:page]) 
```

这也是可能的：

```
@properties = Property.order("updated_at DESC").paginate(:per_page => 20, :page => params[:page], :conditions => 'status_id = 2 or status_id = 5') 
```

或者更简单：

```
@properties = Property.order("updated_at DESC").paginate(:per_page => 20, :page => params[:page], :conditions => { :status_id => [2,5] }) 
```

# ruby-on-rails - rails，在生产中覆盖引导规则

> ID：10394966
> 
> 赞同：0
> 
> 时间：2012-05-01T07:45:40.223
> 
> 标签：ruby-on-rails, heroku, twitter-bootstrap, overriding

你好我在进入生产服务器时无法覆盖引导框架。在我的本地机器上，我可以覆盖它，但通过将它放在 heroku 上，它会恢复到 Twitter 的引导规则。

例如，我一直试图覆盖

```
<%= text_field_tag :search, params[:search], :class => "input-medium search-query" %> 
```

我的样式表文件夹中有一个 custom.css.scss 文件，然后从我的 application.css 编译它，因为我做了一个......

```
*= require_self
*= require_tree . 
```

在我的 custom.css.scss 上，我做到了

```
@import "bootstrap"; 
```

在顶端。我能够以两种不同的方式覆盖输入栏的长度。

我可以通过有

```
.input-medium{ width:300px !important } 
```

或向其添加一个类，例如 .expand

```
.expand{ width:300px !important; } 
```

然后表格看起来像

```
<%= text_field_tag :search, params[:search], :class => "input-medium search-query expand" %> 
```

不幸的是，这些更改只出现在我的本地机器上。当我推送到 heroku 时，它似乎又回到了 twitter 的规则。有人可以帮忙吗？

谢谢你=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:49:23.867

确保在更改 CSS 或 JS 后每次推送到 Heroku 时都重新编译资源。尝试这样做：

`RAILS_ENV=production rake assets:precompile`

完成后，推送到 GitHub（或其他），然后推送到 Heroku。然后您的更改应该是可见的。

# ruby-on-rails - 使用 cabybara 进行 BDD 测试：未找到按钮

> ID：10394968
> 
> 赞同：0
> 
> 时间：2012-05-01T07:45:56.987
> 
> 标签：ruby-on-rails, cucumber, capybara, bdd

我有一个简单的功能：

```
Feature: User can see the welcome page
Scenario: User can see the worker page
    Given I am on the welcome page  
    Then I should see the Worker button
    When I click on the  Worker button
    Then I should be on the Worker page

Scenario: User can see the requester page 
    Given I am on the welcome page  
    Then I should see the Requester button 
    When I click on the Requester button 
    Then I should be on the Requester page 
```

奇怪的是我可以通过 Then 我应该看到 Worker 按钮但不能通过点击测试。

这是我的步骤定义

```
Then /^I should see the (.+) button$/ do |button_name|
  page.has_button? button_name
end

When /^I click on the (.*) button$/ do |button_name|
  #page.has_button? button_name
  click_on button_name
end 
```

这是我的欢迎页面

```
 div.row
    %div.span6
      = button_to 'Worker', workers_path, :class => "btn btn-large btn-primary"
    %div.span6                   
      = button_to 'Requester', requesters_path, :class => "btn btn-large btn-primary" 
```

是has_button吗？Cabybara 或 Cucumber 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:05:20.007

无论页面上的内容如何，​​您的 Then 步骤都将始终通过，因为`has_button?`返回 true 或 false，这两者都不会导致您的 Cucumber 步骤失败。为此，您的步骤必须引发异常，最好通过以下方式实现：

```
page.should have_button button_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:36:57.863

有按钮？是Capybara提供的一种方法。它记录[在这里](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_button?-instance_method)

而不是`click_on button_name` 尝试`click_button button_name`

# java - Jar 可执行文件找不到主类 - 奇怪的一个

> ID：10394969
> 
> 赞同：4
> 
> 时间：2012-05-01T07:46:15.933
> 
> 标签：java, jar, executable

你好我有一个奇怪的问题。我正在用 eclipse 打包一个应用程序以生成一个可执行的 jar 文件，当我运行它时，我收到错误“错误找不到主类 [...]”。

当我从命令行示例运行相同的包时

> java -jar app.jar

程序启动。

奇怪的是，该错误仅发生在 Java 7 环境中编译的应用程序中。

如果我将项目设置为 java 6 一切正常。

我应该怎么做才能运行 Java 7 jar 可执行文件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:52:11.450

检查你的 jre 的版本，如果它的 jre6 那么它可能是一个问题尝试将你的 jre 更新到 jre7 它可以做一个伎俩..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:39:34.987

您需要在清单文件中设置主类

示例清单文件

```
Manifest-Version: 1.0
Created-By: 1.3.1 (Sun Microsystems, Inc.)
Main-Class: com.package.MainClassName
Class-Path: oc4j.jar 
```

确保您已在示例 jar 文件中设置了所有这些内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:04:15.223

默认情况下，jar 是不可执行的

Java 档案更常用作库，其中`jar` 格式将代码压缩到单个文件夹中。此类代码通常不作为应用程序（独立）运行，但有规定通过[Manifest 文件将 jar 文件转换为可执行应用程序](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

只需创建一个 Manifest 文件，指示哪个类包含“main”方法，以使您的 jar 可执行并将 Manifest 包含在您的 .jar 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:50:07.400

当 JVM 无法找到与 Jar 文件关联的主类时会出现此问题，JVM 使用 Manifest.mf 中的 Main-Class 属性来识别关联的主类

似乎您错过了将 Main-Class Attribute 添加到用于创建 JAr 的清单文件中，http://www.skylit.com/javamethods/faqs/createjar.html 可能会有所帮助

# php - 获取产品 ID，然后从另一个表中获取子类别和产品标题

> ID：10394972
> 
> 赞同：0
> 
> 时间：2012-05-01T07:46:54.543
> 
> 标签：php, mysql, join

在这里，我遇到了一个查询

我有这张 PRODUCT 表，其中列出了带有产品 ID、标题、子类别 ID 和类别 ID 的产品。还有另一个表（procat），我有 procat id 和 parent id ， procat title 。所以基本上一个具有父 id 的 id 是一个子类别，如果 0 那么它就是一个类别，这就是我的逻辑

现在基本上我想要做的是获取产品标题、类别标题和子类别标题我可以得到这个类别但是我怎么能得到子类别呢

```
SELECT
product.id,
product.title AS product_title,
procat.title  AS category_title  
FROM product,
procat 
WHERE product.procatid = procat.id
OR  product.procatsubid = procat.id
AND product.procatid = '31'
AND product.procatsubid = '21' 
```

我也尝试过左加入，但无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:53:49.600

**编辑**- 感谢您的澄清。似乎 Product 与类别的外键可能存在冗余（即产品可能应该只由 procat SubCategory 分类，并且通过导航 procat.parent （可能递归）到达父类别 id

```
SELECT
  product.id,
  product.title AS product_title,
  cat.title  AS category_title,
  subcat.title AS subcategory_title  
FROM product 
   INNER JOIN procat cat on product.procatid = cat.id
   INNER JOIN procat subcat on product.procatsubid = subcat.id
  procat
WHERE product.procatid = '31'
      AND product.procatsubid = '21'
      -- The below should be redundant, but I guess you can use them to ensure that the product FKs are correct and the table integrity is maintained
      AND cat.parentid = 0
      AND subcat.parentid <> 0 
```

# android - 如何在特定时间启动服务？

> ID：10394976
> 
> 赞同：1
> 
> 时间：2012-05-01T07:47:32.393
> 
> 标签：android, service

我正在开发我想在特定时间启动服务的应用程序。我已将时间存储在数据库表中。现在，我有了服​​务启动时间的列表。那么，我怎样才能在所有这些时间开始服务呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:28:33.097

Use android AlarmManager to schedule alarms. you can register multiple alarms for your application.

hope this [link](https://groups.google.com/group/android-developers/browse_thread/thread/43ddb901bd710fc6?hl=ja) helps you

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:50:58.503

您想要 Android 警报管理器：

此类提供对系统警报服务的访问。这些允许您安排您的应用程序在将来的某个时间点运行。

希望此[链接](http://justcallmebrian.com/?p=129)对您有所帮助。

# android - 从表格中保存分数

> ID：10394977
> 
> 赞同：-2
> 
> 时间：2012-05-01T07:47:38.420
> 
> 标签：android, textview

我希望将分数传递给用户输入姓名的表单，并且分数应打印在`TextView`用户名下方。单击提交按钮后，分数和用户名应显示在分数表上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:51:11.480

您必须使用意图和数据库。使用 Intent，您可以将值（分数）从一个活动传递到另一个活动，然后将其保存到数据库。稍后你想显示分数的地方你可以访问数据库并显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:12:30.630

您可以使用[Intent](http://developer.android.com/reference/android/content/Intent.html) .putExtra() 通过意图传递值。那么你就可以通过使用来获取值

```
Intent intent = getIntent();
int score = intent.getIntExtra("score",0); 
```

您可以简单地使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)保存值，或者如果您尝试保存大量值，请使用[sqlitedatabase](http://developer.android.com/reference/android/database/sqlite/package-summary.html)。

# c++ - 相互需要的标头

> ID：10394980
> 
> 赞同：0
> 
> 时间：2012-05-01T07:48:03.627
> 
> 标签：c++, class, header, include, dependencies

此问题已关闭，因为它被认为与以下内容重复：

1.  [C++ 循环头文件依赖](https://stackoverflow.com/questions/5239943/c-cyclical-header-dependency)
2.  [头文件之间的循环依赖](https://stackoverflow.com/questions/2089056/cyclic-dependency-between-header-files)
3.  [C++ 错误：'Line2' 尚未声明](https://stackoverflow.com/questions/5058363/c-error-line2-has-not-been-declared/5058627#5058627)

但是，另一个问题与我的不同：他们提出了不同的情况，而答案不适用于我的问题。他们的回答建议将函数放入`.cpp`文件并在声明它之前定义类。我不能把函数放进去，`.cpp`因为我的类是一个模板，我已经定义了这个类，但它没有用。

* * *

我有两个头文件`a.h`和`b.h`. 在它们中定义了两个模板类`A`和`B`.

`A`需要与对象一起工作的功能，`B`反之亦然。由于它们是模板类，我不能将函数放在`.cpp`文件中，它必须留在标题中，而且由于包含的顺序，我很头疼。

解决这个问题的好方法是什么？

目前我移动函数定义并找到一种方法以正确的顺序包含标题，但这总是变得更加复杂。此外，我不喜欢函数定义远离类声明（例如在其他文件中）。

* * *

示例代码：

**啊**

```
#ifndef A_H
#define A_H

#include <iostream>
#include "b.h"
template< typename T > class B;

template< typename T >
class A {
public:
    B<void> *b;
    void f();
    void g();
};
template< typename T > void A<T>::f() {
    std::cout << "A::f" << std::endl;
    b->f();
}
template< typename T > void A<T>::g() {
    std::cout << "A::g" << std::endl;
}

#endif 
```

**bh**

```
#ifndef B_H
#define B_H

#include <iostream>
#include "a.h"
template< typename T > class A;

template< typename T >
class B {
public:
    A<void> *a;
    void f();
    void g();
};
template< typename T > void B<T>::f( ) {
    std::cout << "B::f" << std::endl;
}
template< typename T > void B<T>::g( ) {
    std::cout << "B::g" << std::endl;
    a->g();
}

#endif 
```

**主文件**

```
#include "a.h"
#include "b.h"
int main( ) {
    A<void> a;
    B<void> b;
    a.b = &b;
    b.a = &a;

    a.f();
    b.g();

    return 0;
} 
```

这不起作用，因为`a.h`包括`b.h`. `b.h`然后不能包含`a.h`，因此`B::g`是错误的。

对于这个示例代码，我可以移入`B::g`或`main.cpp`移入`a.h`，但对于更复杂的程序，这并不容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:47:02.550

实际上，您的代码在我的 Visual C++ 上按原样编译。原因是编译器在实际调用它之前不会查看函数的“内部”，即直到`main.cpp`在您的情况下。

坦率地说，我不确定这是否得到标准的保证。如果不是，您始终可以将标题拆分为“独立”和“依赖”部分，如下所示：

**a_forward.h**

```
#ifndef A_FORWARD_H
#define A_FORWARD_H

template< typename T > class B;

template< typename T >
class A {
public:
    B<T> *b;
    void f();
    void g();
};

#endif 
```

**啊**

```
#ifndef A_H
#define A_H

#include <iostream>
#include "a_forward.h"
#include "b_forward.h"

template< typename T > void A<T>::f() {
    std::cout << "A::f" << std::endl;
    b->f();
}

template< typename T > void A<T>::g() {
    std::cout << "A::g" << std::endl;
}

#endif 
```

**b_forward.h**

```
#ifndef B_FORWARD_H
#define B_FORWARD_H

template< typename T > class A;

template< typename T >
class B {
public:
    A<T> *a;
    void f();
    void g();
};

#endif 
```

**bh**

```
#ifndef B_H
#define B_H

#include <iostream>
#include "a_forward.h"
#include "b_forward.h"

template< typename T > void B<T>::f( ) {
    std::cout << "B::f" << std::endl;
}

template< typename T > void B<T>::g( ) {
    std::cout << "B::g" << std::endl;
    a->g();
}

#endif 
```

**主文件**

```
---||--- 
```

# jquery - jQuery水平页面滚动

> ID：10394981
> 
> 赞同：1
> 
> 时间：2012-05-01T07:48:12.150
> 
> 标签：jquery, ajax, scroll, slide

我正在寻找这样的东西。

[http://www.sc5.fi/#clients](http://www.sc5.fi/#clients)

当您单击页面顶部的链接时，它将加载一个带有 Ajax 的新页面（我不确定它是否会这样做，但这就是我想要的）并且它会滑动或滚动到它。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:56:17.477

我认为这里正在使用此代码：

[http://blog.themeforest.net/tutorials/create-a-funky-parallax-background-effect-using-jquery/](http://blog.themeforest.net/tutorials/create-a-funky-parallax-background-effect-using-jquery/)

问候

# asp.net-mvc - 将 JSON 循环到 DIV

> ID：10394985
> 
> 赞同：0
> 
> 时间：2012-05-01T07:48:33.610
> 
> 标签：asp.net-mvc, json

我有来自控制器的 JSON，如下所示：

```
{"ja":
[
{
"ID":0,
"Name":"Son",
"DepartmentID":0,
"isNewProduct":false,
"PictureName":null,
"isInstock":false
}
,
{
"ID":0,
"Name":"AM4-B2",
"DepartmentID":0,
"isNewProduct":false,
"PictureName":null,
"isInstock":false
}
,
{
"ID":0,
"Name":"AM4-B2",
"DepartmentID":0,
"isNewProduct":false,
"PictureName":null,
"isInstock":false
}
]
} 
```

这是我要点击的菜单：

```
<ul id="navmenu-v">
   <li id="select_list" class="level1">
    <a id="56" class="selectedcategory" href="javascript:void(0);">Accessories</a>
   </li>    
   <li id="select_list" class="level1">
    <a id="69" class="selectedcategory" href="javascript:void(0);">Audio Players</a>
   </li>
</ul> 
```

这些是我想将每个 json 放入的 div：

```
 <div id="container">
  <div id="id"></div>
  <div id="name"></div>
  <div id="departmentID"></div>
  <div id="isNew"></div>
  <div id="pictureName"></div>
  <div id="isStock"></div>
</div> 
```

然后我想在单击菜单时将所有 JSON 循环到视图旁边的不同 div 中。

谁能告诉我如何使用`$.getJSON()`and 来做到这一点`$.each()`？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:56:21.640

首先必须将菜单锚元素绑定到这样的点击事件

```
$("#56").click(function(){
   $.getJSON("baseUrl/Accesories",function(data){
       $.each(data,function(index,value){
         $('div#id').html($('div#id').html()+value.ID);
         //simillarily you can do for others too
       });
   });
}); 
```

# c++ - 如何保持进程运行？

> ID：10394986
> 
> 赞同：3
> 
> 时间：2012-05-01T07:48:33.990
> 
> 标签：c++, coding-style, process

我有一个进程启动几个线程来做一些事情，监听一些端口等。

启动所有线程后，主线程当前进入无限循环：

它是这样的：

```
int main()
{
   //start threads
   while (true)
   {
      sleep(1000);
   }
} 
```

额外的`sleep`确保主线程不会吃掉处理器。

这种方法可以吗？是否有关于如何保持流程活力的行业标准？谢谢。

编辑：一些澄清：

*   线程是侦听器，因此 a `join`or`WaitForSingleObject`不是一个选项。通常我可以在这里使用 join，但是线程是由第三个客户端库启动的，我无法控制它们。
*   从设计的角度来看，在主线程中进行一些处理没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:15:35.107

. 部分取自[Linux Daemon Writing HOWTO](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)，我假设你想要这样的东西：

```
int main() {
    pid_t pid;

    /* Fork off the parent process */       
    pid = fork();
    if (pid < 0) {
            exit(EXIT_FAILURE);
    }
    /* If we got a good PID, then
       we can exit the parent process. */
    if (pid > 0) {
            exit(EXIT_SUCCESS);
    }
    // now start threads & do the work

    for( thread *t : threads ) {
            join( t );
    }

    return 0;
} 
```

这样主进程将退出，子进程将产生线程来完成工作。最后，子进程将等待这些线程完成后再退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:53:15.213

我建议你让你的主线程等待其他线程的终止：

```
int main( ) {
  // start threads
  for( thread *t : threads ) {
    join( t );
  }
  // finalize everything or restart the thread
  return 0;
} 
```

如果您使用 POSIX 线程，该`pthread_join`函数将执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:52:04.973

我不相信有*行业标准*。

您所拥有的是一种完全可以接受的运行主线程的方式。但是，您可能希望包含一种跳出循环的方法。

其他方法包括：

*   使用命令等待所有工作线程完成`join`。
*   在主线程中等待一个`event`可以退出循环的信号。
*   使用主线程做一些当前由工作线程完成的处理。
*   定期检查布尔标志以决定是否退出。

归根结底，这取决于您的具体要求。

# wpf - ContextMenu 项目可见性

> ID：10394988
> 
> 赞同：4
> 
> 时间：2012-05-01T07:48:43.773
> 
> 标签：wpf, contextmenu, visibility

我有一些 ContextMenu 和一些 menuItems。menuItems 之一是“添加项目...”。当用户选择这个项目时，他应该看到带有可用项目列表的子菜单；

这是我的上下文菜单的描述：

> *   添加项目
>     *   项目 1
>     *   第 2 项
>     *   第 3 项
>     *   第 4 项
> *   删除
> *   复制

'Add Item' menuItem 的 ItemsSource 绑定到某个可观察的集合。集合中的每个模型都有“名称”和“IsEnabled”（我有将布尔转换为可见性的转换器）。一切正常，除了“IsEnable”= false 的项目不可见，但我可以看到那里的空间。例如：假设第 3 项具有 IsEnable = false：

> *   添加项目
>     
>     
>     *   项目 1
>     *   第 2 项
>         
>         
>     *   第 4 项

如果值为假，我的 bool2Vis 转换器会返回“已折叠”。

为什么我做错了？

这是上下文菜单代码：

```
<ContextMenu  x:Key="mainContextMenu" DataContext="{Binding Source={x:Static fw:UIMainManager.Instance},Path=layoutManager}">
        <MenuItem Header="Add Item" Name="addItemMenu" ItemsSource="{Binding ControlBoxItems}" >
            <MenuItem.ItemTemplate>
                <DataTemplate>
                    <MenuItem Header="{Binding ControlName}"  Visibility="{Binding IsEnabled,Converter={StaticResource boolToVisibilityConverter}}"
                                  Command="{Binding Source={x:Static fw:ApplicationCommands.AddControlToScene}}" CommandParameter="{Binding}"/>
                </DataTemplate>
            </MenuItem.ItemTemplate>
        </MenuItem>
        <MenuItem Header="Copy" Command="{Binding Source={x:Static fw:ApplicationCommands.Copy}}" />
        <MenuItem Header="Paste" Command="{Binding Source={x:Static fw:ApplicationCommands.Paste}}" />
        <MenuItem Header="Cut"  Command="{Binding Source={x:Static fw:ApplicationCommands.Cut}}" />
        <MenuItem Header="Duplicated" Command="{Binding Source={x:Static fw:ApplicationCommands.DuplicateControl}}" />
        <MenuItem Header="Delete" Command="{Binding Source={x:Static fw:ApplicationCommands.DeleteControl}}" />
    </ContextMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:02:51.710

我认为`MenuItem`是折叠的，但不是 ItemContainer 的`MenuItem`。尝试这个：

```
<MenuItem Header="Add Item" Name="addItemMenu" ItemsSource="{Binding ControlBoxItems}">
    <MenuItem.ItemContainerStyle>
        <Style>
            <Setter Property="Visibility" Value="{Binding IsEnabled, Converter={StaticResource boolToVisibilityConverter}}" />
        </Style>
    </MenuItem.ItemContainerStyle>
    <MenuItem.ItemTemplate>
        <DataTemplate>
            <MenuItem Header="{Binding ControlName}"
                      Command="{Binding Source={x:Static fw:ApplicationCommands.AddControlToScene}}"
                      CommandParameter="{Binding}" />
        </DataTemplate>
    </MenuItem.ItemTemplate>
</MenuItem> 
```

# ubuntu - 安装 HBase 资源管理器

> ID：10394993
> 
> 赞同：0
> 
> 时间：2012-05-01T07:49:13.727
> 
> 标签：ubuntu, hadoop, hbase

大家好，我想在我的 ubuntu 上安装 Hbase explorer，但没有从任何地方得到任何好的帮助。请指导我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:17:27.613

如果您正在寻找管理 Hbase 表的工具，那么我建议您使用以下工具。

[http://sourceforge.net/projects/hbasemanagergui/?source=directory](http://sourceforge.net/projects/hbasemanagergui/?source=directory)

它很简单，更重要的是，它有助于插入和删除数据，在列限定符上应用过滤器。试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:49:02.547

Hbase Explorer 是一个部署在 tomcat 上的 Webapp。运行它的最简单方法是从[SourceForge](http://sourceforge.net/projects/hbaseexplorer/)下载独立版本 并根据 zip 存档中的 RUNNING.txt 文件进行安装。然后，您使用 startup.sh 脚本启动 tomcat webapp 并浏览到[http://localhost:8080](http://localhost:8080)。您应该会在浏览器中看到 Hbase Explorer 登录页面。您还需要运行 HBase。走到这一步，如果您还有任何问题，请附上您尝试过的示例。

# c# - 我在哪里可以找到 SharpGL 中的自定义 opengl 数据类型？

> ID：10394994
> 
> 赞同：0
> 
> 时间：2012-05-01T07:49:13.950
> 
> 标签：c#, opengl, graphics

我正在使用 SharpGL 使用 C# 对 OpenGL 进行编程，但我找不到像 GLfloat、GLint、......等这样的 OpenGL 数据类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T13:21:21.087

无论如何，我都会使用 OpenGL 类型。如果您想使用`Byte`或`Bool`通过`GLboolean`单行编辑将它们全部更改。我使用这个列表（不确定它是否完整，但它是一个开始）：

```
using GLbitfield = System.UInt32;
using GLboolean = System.Boolean;
using GLbyte = System.SByte;
using GLclampf = System.Single;
using GLdouble = System.Double;
using GLenum = System.UInt32;
using GLfloat = System.Single;
using GLint = System.Int32;
using GLshort = System.Int16;
using GLsizei = System.Int32;
using GLubyte = System.Byte;
using GLuint = System.UInt32;
using GLushort = System.UInt16;
using GLvoid = System.IntPtr; 
```

# unit-testing - VS 2010 中使用存储过程的测试驱动单元测试

> ID：10394998
> 
> 赞同：0
> 
> 时间：2012-05-01T07:49:37.963
> 
> 标签：unit-testing, mstest, data-driven-tests

我有一个类（非（DAL）），它从数据库中获取数据并以所需的格式（以特定的类格式）将其提供给我。

现在我需要编写一个单元测试用例，但 TestContext Data 行总是返回单行。

我想用我的存储过程填充 TestContext 。请告诉我如何指定存储过程名称。提前致谢。

这是代码。

```
public static List<TextValueField> ExternalDataGet(int providerId)
    {
        return ListFactory<TextValueField>.Create(Keys.QAT, "[stats].[GetExternalDataV2]", new object[] { providerId }, TextValueField.Factory);
    }
public static List<T> Create(string key, string sp, object[] parameters, FactoryDelegate factory)
    {
        List<T> list = new List<T>();
        Database db = DatabaseFactory.CreateDatabase(key);
        string connectionString = db.ConnectionStringWithoutCredentials;

        using (DbCommand cmd = db.GetStoredProcCommand(sp, parameters))
        {
            try
            {
                using (cmd.Connection = db.CreateConnection())
                {
                    cmd.Connection.Open();
                    cmd.CommandTimeout = 0;
                    using (DbDataReader reader = cmd.ExecuteReader())
                    {
                        try
                        {
                            while (reader.Read())
                                list.Add(factory(reader));
                        }
                        finally
                        {
                            if (!reader.IsClosed)   
                                reader.Close();
                        }
                    }
                    cmd.Connection.Close();
                }
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message);
                throw new DataAccessException(ex, key, connectionString, sp, parameters);
            }
            finally
            {
                if (cmd.Connection != null)
                    if (cmd.Connection.State == ConnectionState.Open)
                        cmd.Connection.Close();
            }
        }
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:28:50.327

> 我想用我的存储过程填充 TestContext 。请告诉我如何指定存储过程名称。

这应该可以处理您的请求。

```
public static List<TextValueField> ExternalDataGet(int providerId, string storedProc = "[stats].[GetExternalDataV2]")
{
    return ListFactory<TextValueField>.Create(Keys.QAT, storedProc, new object[] { providerId }, TextValueField.Factory);
} 
```