# StackOverflow 问答 11487000-11487999

# python - Python：索引关键字在列表末尾找不到项目

> ID：11487003
> 
> 赞同：0
> 
> 时间：2012-07-14T20:03:13.977
> 
> 标签：python

我有以下字符串：

```
monday,tuesday,wednesday,thursday,friday,saturday,sunday,start_date,end_date 
```

和以下 Python 脚本：

```
from datetime import datetime, date, time
today = datetime.now()
print today

print today
with open('calendar_clean.txt', 'w') as f1:
    with open('calendar.txt', 'r') as f:       
        newline = ""
        end_date_index = -1       
        for line in f:
            items = line.split(",")

            if end_date_index == -1:
                for item in items:
                    print item
                print "finding end_date index"
                end_date_index = items.index('end_date')
                print end_date_index 
```

当我执行脚本时，控制台上显示以下错误消息：

```
ValueError: 'end_date' is not in list 
```

但是，如果我查找 start_date 的索引，它会正常执行，并返回正确的结果。这是在 Windows 7 x64 上使用 Python 2.7。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T20:05:24.977

您的行尾有一个行终止符。所以它正在寻找像“end_date\n”或“end_date\r”这样的东西，而不仅仅是“end_date”。使用`line.rstrip().split(",")`而不是只调用`split`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:05:15.513

由于您正在从文件中读取数据，因此该行`\n`的末尾可能有一个换行符 ( )。这意味着最后一项不是`"end_date"`但是`"end_date\n"`。尝试`items = line.strip().split(",")`删除尾随空格。

# android - 按下按钮时 EditText 到 TextView

> ID：11487006
> 
> 赞同：2
> 
> 时间：2012-07-14T20:03:49.723
> 
> 标签：android, sdk

我怎样才能使它使用edittext中的任何内容，就像文本视图一样，如果我输入“hello”按下按钮并将textview设置为“hello”然后当你再次按下按钮时它会删除它？

```
 package com.purelymean.earnings;
  import org.w3c.dom.Text;

  import android.app.Activity;
  import android.os.Bundle;
  import android.util.Log;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.Button;
  import android.widget.TextView;

    public class Main extends Activity{
/**Called when activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    Button b = (Button) findViewById(R.id.button);
    Text et = (Text) findViewById(R.id.editText1);
    TextView tx = (TextView) findViewById(R.id.textView1);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:15:01.213

另一种方法（添加到 La bla bla）：为了在 TextView 中显示 editText 首先创建一个在单击按钮时发生的方法：

```
public void displayEditText(View view) { } 
```

在您的按钮的 xml 中添加以下内容：

```
android:onClick="displayEditText" 
```

要获取 EditText 值，请将其放入 displayEditText

`String editTextValue = et.getText().toString`; 要显示它，请执行以下操作：

```
tx.setText(editTextValue); 
```

最终解决方案：

```
public void displayEditText(View view) {        
    if (tx.getText().toString().equals("")) {
         String editTextValue =   et.getText().toString;
           tx.setText(editTextValue);
    } else {
         tx.setText("");
         tv.setText("");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:13:01.780

好吧，如果您阅读了有关如何使用它的信息，您本可以自己弄清楚，但无论如何：

```
package com.purelymean.earnings;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.EditText;

private boolean isErase = false;
private EditText et;
private TextView tx;

public class Main extends Activity{
/**Called when activity is first created. */
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.main);
Button b = (Button) findViewById(R.id.button);
et = (EditText) findViewById(R.id.editText1);
tx = (TextView) findViewById(R.id.textView1);

b.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        if(isErase) {
            tx.setText(et.getText().toString());
        } else {
            tx.setText("");
        }
        isErase = !isErase;
    }
});

} 
```

您只需从 EditText 中获取文本，并将其设置为 TextView 的文本。比你改变布尔变量的状态，所以下次点击它时它会被删除。

另请注意，我从 Text 对象更改为 EditText 代码未经测试，可能包含拼写错误和内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:15:19.400

```
package com.purelymean.earnings;
import org.w3c.dom.Text;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Main extends Activity{
   // You have to save reference to views that will be used in onClick handler.
   EditText et;  
   TextView tx;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    Button b = (Button) findViewById(R.id.button);
    et = (EditText) findViewById(R.id.editText1);
    tx = (TextView) findViewById(R.id.textView1);

    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        // If TextView is empty - copy string from EditText
        if (tx.getText().toString().equals("")) {
             tx.setText(et.getText().toString());
        } else { // Otherwise, clear the TextView.
             tx.setText("");
        }
    }
}); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T07:44:00.120

1) 在这个函数中传递你的 textview id

```
 private void EditToText(TextView tv) {

        tv.setCursorVisible(false);
        tv.setFocusableInTouchMode(false);
        tv.setEnabled(false);

    } 
```

# php - 进行 $.ajax 调用时是否可以动态更改 URL？

> ID：11487008
> 
> 赞同：2
> 
> 时间：2012-07-14T20:04:06.690
> 
> 标签：php, jquery, ajax, .htaccess

我不知道是否可能，我使用 $.ajax 通过 ajax 加载内容而不重新加载页面。我的网址如下所示：

```
http://localhost/category:blog 
```

我使用 jQuery $.ajax 无需重新加载即可正确加载内容，但我需要更多功能，我想在通过 $.ajax 加载后将地址栏中的 url 设置为 category:blog，是否可以运行 ajax 请求当用户也将该地址直接输入浏览器时？我需要 htaccess 还是不可能，我在这种情况下迷路了。我只想制作这样的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T20:08:24.083

几年前我在stackoverflow上问[过](https://stackoverflow.com/questions/680785/on-window-location-hash-change)，你可以通过window.location.hash来做到这一点，但它只能用于#而不是：字符..：

[在 - window.location.hash - 改变？](https://stackoverflow.com/questions/680785/on-window-location-hash-change)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:03:04.217

您可以使用 javascript pushState 函数 (http://blog.scoutapp.com/articles/2010/12/07/manipulating-browser-history-with-javascript-pushstate-replacestate) 对于第二个问题，当用户更改我的 url认为这是不可能的，因为在卸载事件中（当用户更改 url 时）您无法停止浏览器请求整个页面并将其显示给用户正如 VisioN 所说，使用 : 在 url 中并不是一个好主意

# javascript - 访问多返回数据结构中的 JSON 对象

> ID：11487010
> 
> 赞同：0
> 
> 时间：2012-07-14T20:04:38.087
> 
> 标签：javascript, jquery, json

如何对下面的成功回调函数进行编码，以便能够访问下面返回的 JSON 中的对象。显然，我将无法再访问返回的对象`success: function(data) {if (data.returned === true) {`了。我将如何做到这一点？

jQuery代码：

```
$("#projects").click(function() {
                jQuery.ajax({ type: "POST", dataType: "JSON",
                    url: "<?=base_url()?>index.php/home/projectsSlider",
                    json: {returned: true}, success: function(data) {
                        if (data.returned === true) {
                            $("#resultProjects").html(JSON.stringify(data.Projects));
                            $("#resultScreenshots").html(JSON.stringify(data.Screenshots));

                            $("#content").fadeOut(150, function() {
                                $(this).replaceWith(projectsSlider(data.projectId, data.projectName, data.startDate, data.finishedDate, data.projectDesc, data.createdFor, data.contributors, data.screenshotURI, data.websiteURL), function() {
                                    $(this).fadeIn(150);
                                });
                            });
                        }
                    }
                });
            }); 
```

返回的 JSON：

```
{
    "Projects": [
        {
            "projectId": "932713684f9073189ec7b",
            "projectName": "Cloud859Collective",
            "startDate": "April 19th, 2012",
            "finishedDate": "April 25th, 2012",
            "createdFor": "ClasskCreations",
            "contributors": "Mike Grigsby",
            "projectDesc": "This website was created with a friend in mind. His name is Kevin Johnson and he is a rapper. He needed a website that would allow him to host and share his music."
        },
        {
            "projectId": "10599012654f907093714e9",
            "projectName": "Nurbell Studio",
            "startDate": "April 15th, 2012",
            "finishedDate": "April 19th, 2012",
            "createdFor": "Nurbell LLC",
            "contributors": "Mike Grigsby",
            "projectDesc": "This is the page you are currently looking at. This is the official Nurbell homepage. Complete with a frontend and a backend."
        }
    ],
    "Screenshots": [
        {
            "screenshotURI": "http://nurbell.com/vd/1.0/images/project-data/kevo.png"
        },
        {
            "screenshotURI": "http://nurbell.com/vd/1.0/images/project-data/nurbell.png"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:36:34.523

我不确定你在这里问什么。我认为你应该看看 javascript 命名空间。这样，您可以在对象（或命名空间）中创建一个属性并将 json 结果放入该属性中。

像这样的东西：

```
 var myProjects = {
     projects: null,

     getProjects: function() {
           // do the ajax thing with something like
           myProjects.projects = data.projects;
     },

     placeProjects: function() {
           if (myProjects.projects == null) myProjects.getProjects();
           $.each(myProjects.projects, function(i,e){
                //place project content
           }
     },
 }

 // define the click event
 $("#projects").click(myProjects.placeProjects()); 
```

数据将被存储，直到您将其删除或重新加载页面。您可以在 firebug 的 DOM 检查器中看到此对象。希望有帮助

**编辑 ：**

我已经在这个 jsFiddle [http://jsfiddle.net/BTbJu/5](http://jsfiddle.net/BTbJu/5)中实现了这个想法 运行它，单击 Div 中的文本以加载第一个项目。继续点击旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:33:40.663

不确定我是否正确理解了这个问题，但您似乎担心在调用 JSON.stringify 时您的原始 json 可能会被永久修改。

不， JSON.Stringify 将返回一个新字符串。闭包参数“数据”引用的原始 json 将保持不变。您将通过数据引用很好地访问所有属性。

实际上，data.projectId 在闭包范围内会出错，应该评估为 undefined。

试试这个：

```
$("#projects").click(function () {
    jQuery.ajax({
        type: "POST",
        dataType: "JSON",
        url: "<?=base_url()?>index.php/home/projectsSlider",
        success: function (data) {
            var projects = data.Projects; //array
            var screenshots = data.Screenshots; //array

            //direct, one-off indexed
            console.log(projects[0].projectId);
            console.log(data.Projects[0].projectId);

            //looped with map
            projects.map(function(project, index) {
                console.log(project.projectId);
            });

            //traditional for
            for(var i1 = 0; i1 < projects.length; i1++) {
                console.log(projects[i1]);
            }

            //direct, one-off indexed
            console.log(screenshots[0].screenshotURI);
            console.log(data.Screenshots[0].screenshotURI);

            //looped
            screenshots.map(function(screenshot, index) {
                console.log(screenshot.screenshotURI);
            });

            if (data.returned === true) {
                //your stringify code etc.
            }
        }
    });
}); 
```

# html - 使用下拉菜单创建菜单

> ID：11487011
> 
> 赞同：2
> 
> 时间：2012-07-14T20:04:44.373
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, menu

我想在[这个设计上创建一个菜单](http://dribbble.com/shots/636566-Meer-li-redesign/attachments/53889)

一个菜单，您可以在其中选择您的排序方式以及您想要进入的类别。因此，当人们按下“特色设计”时，将显示所有“特色”字段设置为 true 的 iPhone 设计。我希望人们能够从下拉菜单中选择 iPad 设计，然后出现特色 iPad 设计。我不知道如何做到这一点。

有人可以给我指点吗？

我正在使用 rails 3.2.2 和 mongoid。

更多信息

因此，我在[Meer.li](http://www.Meer.li)启动并运行了整个项目。菜单在那里和一切。我唯一需要添加的是一个下拉菜单（就像您在表单中看到的那样），所以我可以选择是否要查看 iPhone、iPad、Windows 设计等。

我可以在 rails 中创建一个下拉菜单，但如何将其用作查询方式（就像您使用常规菜单一样）是另一回事。

型号代码：

```
field :featured, :type => Boolean, :default => false
field :project_number, :type => Integer, :default => 0
field :show, :type => Boolean, :default => true
field :full_member, :type => Boolean, :default => false
field :first_design, :type => Boolean, :default => false
field :option, :type => String 

default_scope desc(:created_at)
scope :full_member_and_show, where(full_member: true).and(show: true)
scope :not_full_member_and_show, where(full_member: false).and(show: true) 
```

控制器代码：

```
def newest
  designs = Design.full_member_and_show

  respond_to do |format|
    format.html
  end
end 
```

所以基本上我想在查询时添加一个 .and(:option => "iPad") 到最后，只要我从下拉菜单中选择另一个项目。

是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:34:12.857

你很近。当我进行多面搜索时，我首先在我的控制器中创建一个空数组：

```
@current_items = [] 
```

然后我开始根据我得到的参数添加项目。现在，如果您想在这里真正干，您应该根据表单中多面项目的名称来命名您的范围。反之亦然，在表格之外命名您的范围。通过这种方式，您可以执行以下操作：

```
params[:faceted_items].each do |item|
  @current_items << Object.where("#{item}" => true)
end 
```

然后在您的视图中调用`@current_items`作为返回项目的数组。

**根据评论更新**

分面搜索是一种可以通过选择和/或选择不同属性来缩小范围的搜索。

如果这就是您要查找的内容，听起来您可能想要嵌入整个搜索功能。我推荐 sunspot-solr 或 sphinx。两者都在任务中做得很好。

# parallel-processing - 简单的字符分配在 CUDA 中不起作用

> ID：11487012
> 
> 赞同：2
> 
> 时间：2012-07-14T20:04:45.710
> 
> 标签：parallel-processing, cuda, gpu

请看下面的代码，它做了一个简单的字符赋值

```
__global__ void seehowpointerwork(char* gpuHello, char* finalPoint){

    char* temp;
    bool found = false;
    for(int i = 0 ; i < 11; i++){
        if(gpuHello[i] == ' '){
            temp = &gpuHello[i+1];
            found = true;

            break;
        }
    }
    bool sth = found;
    finalPoint = temp;

}
int main()
{
    // Testing one concept;
    string hello = "Hello World";
    char* gpuHello;
    cudaMalloc((void**)&gpuHello, 11 * sizeof(char));
    cudaMemcpy(gpuHello, hello.c_str(), 11 * sizeof(char), cudaMemcpyHostToDevice);
    char* didItFind;
    char* whatIsIt = (char*)malloc(5 * sizeof(char));
    seehowpointerwork<<<1,1>>>(gpuHello, didItFind);
    cudaMemcpy(whatIsIt,didItFind, 5 * sizeof(char), cudaMemcpyDeviceToHost);
    cout<<"The pointer points to : " << whatIsIt;
    return 0;
} 
```

我真的不明白，当我打印时`whatIsIt`，为什么它不打印“世界”作为答案，而只是打印一些随机字符串。

**如所指出的，在计算空字符后**编辑更新版本****

 **```
__global__ void seehowpointerwork(char* gpuHello, char* finalPoint){

    char* temp;
    bool found = false;
    for(int i = 0 ; i < 11; i++){
        if(gpuHello[i] == ' '){
            temp = gpuHello;
            found = true;

            break;
        }
    }
    bool sth = found;
    finalPoint = temp;

}
int main()
{
    // Testing one concept;
    string hello = "Hello World";
    char* gpuHello;
    cudaMalloc((void**)&gpuHello, 12 * sizeof(char));
    cudaMemcpy(gpuHello, hello.c_str(), 12 * sizeof(char), cudaMemcpyHostToDevice);
    char* didItFind;
    char* whatIsIt = (char*)malloc(6 * sizeof(char));
    seehowpointerwork<<<1,1>>>(gpuHello, didItFind);
    cudaMemcpy(whatIsIt,didItFind, 6 * sizeof(char), cudaMemcpyDeviceToHost);
    cout<<"The pointer points to : " << whatIsIt;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:14:55.143

`finalPoint`如果你想让内核按照你定义的方式运行，你必须通过引用而不是值传递。也许是这样的：

```
#include <cstdio>
#include <iostream>
#include <string>

using namespace std;

__global__ void seehowpointerwork(char * gpuHello, char ** finalPoint){

    char* temp;
    for(int i = 0 ; i < 11; i++){
        if(gpuHello[i] == ' '){
            temp = &gpuHello[i+1];
            break;
        }
    }
    *finalPoint = temp;
}

inline void gpuAssert(cudaError_t code, char *file, int line, 
                 bool abort=true)
{  
   if (code != cudaSuccess) {
      printf("GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

int main()
{
    string hello = "Hello World";
    char* gpuHello;
    gpuErrchk( cudaMalloc((void**)&gpuHello, 11 * sizeof(char)) );
    gpuErrchk( cudaMemcpy(gpuHello, hello.data(), 11 * sizeof(char), cudaMemcpyHostToDevice) );
    char ** didItFinda, * didItFindb;
    gpuErrchk( cudaMalloc((void **)&didItFinda, sizeof(char *)) );
    char* whatIsIt = (char*)malloc(5 * sizeof(char));
    seehowpointerwork<<<1,1>>>(gpuHello, didItFinda);
    gpuErrchk( cudaPeekAtLastError() );
    gpuErrchk( cudaMemcpy(&didItFindb, didItFinda, sizeof(char *), cudaMemcpyDeviceToHost) );
    gpuErrchk( cudaMemcpy(whatIsIt, didItFindb, 5 * sizeof(char), cudaMemcpyDeviceToHost) );
    cout<<"The pointer points to : " << whatIsIt << endl;
    return 0;
} 
```

编译并运行时，此版本产生：

```
$ nvcc -arch=sm_12 -Xptxas="-v" programmer.cu 
ptxas info    : Compiling entry function '_Z17seehowpointerworkPcPS_' for 'sm_12'
ptxas info    : Used 4 registers, 8+16 bytes smem, 8 bytes cmem[1]

$ ./a.out 
The pointer points to : World 
```

就目前而言，设备到主机的复制将失败，因为`didItFind`它不是一个有效的设备指针——你将它按值传递给内核，所以它在主机上的值不能被内核修改。上面的代码包含足够的错误检查来发现此类问题 - 您应该*始终*检查*每个*API 调用的返回状态。**

# ruby-on-rails-3 - Rails 3 迁移错误：SQLite3::SQLException：表“myTable”已经存在：

> ID：11487018
> 
> 赞同：0
> 
> 时间：2012-07-14T20:05:29.593
> 
> 标签：ruby-on-rails-3, database-migration

我以前从未使用过数据库，所以这对我来说是全新的。我在 RubyMine，Rails 3 中工作。

*   首先，什么是迁移，为什么要迁移？我不能只通过数据库浏览器编辑数据库吗？迁移会保留我的数据吗？
*   其次，我继承了一个项目，migration文件夹下有3个文件，名称如20120128022506_users.rb。如果我只是运行迁移任务，我会得到：

> SQLite3::SQLException：表“projects”已经存在：CREATE TABLE“projects”（“id”INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL，“partner_id”整数，“name”varchar（255））

事实上，如果您查看名为 的文件`"20120531031320_projects.rb"`，正如预期的那样，它正在尝试创建一个项目表：

```
 def up
    create_table :projects do |table|
      table.integer :partner_id
      table.string :name
    end
    add_index :projects, :name
  end 
```

这个项目是从 Sinatra 移植过来的，可能 db 和迁移文件不同步（如果这是正确的术语）。无论如何，有没有办法在这些迁移文件和数据库之间进行同步，以便我可以使用新的迁移文件向数据库添加一个新表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:23:20.540

我通过在迁移中添加条件以查看数据库中是否存在“项目”来解决此问题：

```
 def up
    if (!ActiveRecord::Base.connection.tables.include?("projects"))
      create_table :projects do |table|
        table.integer :partner_id
        table.string :name
      end
    end
  end 
```

# c# - 用于 IEnumerable 的 ASP.NET MVC EditorTemplate

> ID：11487019
> 
> 赞同：0
> 
> 时间：2012-07-14T20:05:55.410
> 
> 标签：c#, asp.net-mvc

我有一个具有 2 个属性的模型：`string`和`IEnumerable<SomeModel>`. `UiHint`如果我通过for指定 editortemplate `string`，则会应用它。但是当我为`IEnumerable<SomeModel>`属性指定它时，什么也没有发生。我需要为 IEnumerable 做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:03:08.917

如果我正确理解您的问题，您需要将您的替换`IEnumerable`为`IList`，然后使用以下方法：

```
public class OrderDTO
{
    ...
    public IList<OrderLineDTO> Lines { get; set; }
    ...
}

public class OrderLineDTO
{
    public int ProductID { get; set; }
    ...
    [Range(0, 1000)]
    public int Quantity { get; set; }
    ...
}

...
@for (int i = 0; i < Model.Lines.Count; ++i)
{
  ...
  @Html.EditorFor(x => x.Lines[i].Quantity)
  ...
}
... 
```

适用于 MVC 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:08:32.123

您的 HintTemplate 模型应该是`IEnumerable<SomeModel>`（您将在编辑器模板中迭代模型）。或者，您可以在集合属性上使用 EditorFor，而不是 UIHint 注释（在这种情况下，EditorTemplate 模型将是 SomeModel；视图语法中不涉及迭代）。我[在这篇文章中提供了类似的回复](https://stackoverflow.com/questions/11167538/saving-multiple-objects-from-mvc-view/11174133#11174133)

如果您的模型看起来像

```
public class TestModel
{
    public string ParentName { get; set; }
    [UIHint("HintTemplate")]
    public IEnumerable<TestChildModel> children { get; set; }
} 
```

童模

```
public class TestChildModel
{
    public int id { get; set; }
    public string ChildName { get; set; }
} 
```

您的 HintTemplate.cshtml 应该看起来像

```
@model IEnumerable<MVC3.Models.TestChildModel>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>HintTemplate</title>
</head>
<body>
    @foreach(var a in Model)
    {
    <div style="background-color:#4cff00">
        @Html.DisplayFor(m => a.ChildName)
        @Html.EditorFor(m => a.ChildName)
    </div>
    }
</body>
</html> 
```

你的看法

```
@model MVC3.Models.TestModel

@{
    ViewBag.Title = "Test";
}

<h2>Test</h2>
<div>
    @Html.LabelFor(a => a.ParentName)
    @Html.EditorFor(a => a.ParentName)
</div>
<div>
    @Html.LabelFor(a => a.children)
    @Html.EditorFor(a => a.children)
</div> 
```

# jquery - 使用 JQuery 即时创建复选框列表

> ID：11487021
> 
> 赞同：1
> 
> 时间：2012-07-14T20:06:05.087
> 
> 标签：jquery, asp.net-mvc, checkboxlist

我使用以下代码创建一个复选框列表：

```
function LoadDetours() {
    if ($("#DepartureCityId").val() != "0" && $("#ArrivalCityId").val() != "0") {
        var url = "/Cities/detours?start=" + $("#DepartureCityId").val() + "&end=" + $("#ArrivalCityId").val();

        $.getJSON(url, null, function (data) {

            var topicContainer = $('ul#detourDiv');
            topicContainer.empty();
            $.each(data, function (iteration, item) {
                topicContainer.append(
                    $(document.createElement("li"))
                    .append(
                            $(document.createElement("input")).attr({
                                type: 'checkbox',
                                id: 'detour-' + iteration,
                                name: iteration,
                                value: "aaaaaaa"
                            })
                    )
                    .append(
                            $(document.createElement('label')).attr({
                                'for': 'detour-' + iteration
                            })
                            .text(item)
                    ))

                alert(item);
            });
        });

                }

    } 
```

似乎没有错误并且代码运行，警报弹出窗口显示我的项目中有数据但我的表单上没有出现任何内容，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:12:08.070

修正了语法，它对我有用

（对不起，看来我没有保存小提琴）:(

根据刚刚发布的评论，我们看到了问题所在。

```
<div id="detourDiv"> <ul style="list-style-type: none;"></ul> </div> 
```

和

```
<div > <ul id="detourDiv" style="list-style-type: none;"></ul> </div> 
```

在我的工作代码中。

# javascript - 如何在不更改地图中心的情况下在谷歌地图中加载 KML

> ID：11487034
> 
> 赞同：5
> 
> 时间：2012-07-14T20:07:48.177
> 
> 标签：javascript, html, google-maps

**如何在不更改地图范围/缩放的情况下将 KML 添加为谷歌地图（javascript v3）中的图层？**

我正在添加一个 KML，它在世界各地都有几个事件，因为这个谷歌地图 javascript v3 将地图范围更改为一个非常大的缩小视图。

这是一些示例代码：

```
function loadOverlay(inc) 
{
    var overlay = new google.maps.KmlLayer(inc);
    overlay.setMap(map);
    overlayArray.push(overlay);
}

function initialize_gmap()
{
    var Rochester = new google.maps.LatLng(43.1561, -77.607); 
    var myOptions = {
    zoom: 11,
    center: Rochester,
    mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

//Then i initialize the map here, and load the kml
initialize_gmap();
loadOverlay("linktokml.kml"); 
```

加载 kml 后，它会进行非常大的缩放以显示 kml 中的所有位置。我将如何防止这种情况，或者回到我的初始范围/缩放？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T20:11:11.077

只需将[google.maps.KmlLayerOptions](https://developers.google.com/maps/documentation/javascript/reference#KmlLayerOptions)`preserveViewport`的选项设置为：`true`

```
var overlay = new google.maps.KmlLayer(inc,{preserveViewport:true}); 
```

# python - 使用 Python，我将如何接受整数参数？

> ID：11487036
> 
> 赞同：1
> 
> 时间：2012-07-14T20:08:15.597
> 
> 标签：python, class, integer, arguments

使用这个类：

```
class Person:
  def __init__ (self, Name, Address, Phone, Height, Weight):
    self.name = Name
    self. Address = Address
    self.Phone = Phone
    self.Height = Height
    self.Weight = Weight
    self.PoundserPerInch = Height / Weight 
```

我如何将参数“高度”和“重量”作为整数接受，以便我可以对它们执行一些数学函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T20:10:02.530

您无需在 Python 中指定参数的类型。只需接受这些论点并以您想要的方式使用它们。也就是说，做`Height = Height + 7`任何你喜欢的事。如果有人传入不允许您对其执行的操作类型的参数，则在您尝试执行该操作时将在运行时引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T20:10:06.163

Python 是一种动态语言。所以你可以将任何东西作为参数传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:09:55.260

```
class Person:
  def __init__ (self, Name, Address, Phone, Height, Weight):
    self.name = Name
    self. Address = Address
    self.Phone = Phone
    self.Height = int(Height) # note
    self.Weight = int(Weight) # note
    self.PoundserPerInch = Height / Weight 
```

而且：

```
>>> int(3)
3
>>> int(3.14)
3
>>> int("3")
3 
```

# python - python模块导入错误

> ID：11487037
> 
> 赞同：1
> 
> 时间：2012-07-14T20:08:20.530
> 
> 标签：python, import, module

我有以下结构：

```
AXBot:
    __init__.py
    bot.py
    util.py
    settings.py
    creator
        __init__.py
        xbot.py 
```

问题是我无法在'xbot.py'中导入'util'模块，因为python以'ImportError：没有名为util的模块'结尾......我该如何解决？

PS：我正在使用以下代码导入：

```
import util
import settings 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:45:11.993

看来您正试图`xbot.py` 从`creator`文件夹中运行。

这是我得到的输出`xbot.py`包含`import util`：

```
C:\Users\Luke\Python stuff\AXBot\creator>xbot.py
Traceback (most recent call last):
  File "C:\Users\Luke\Python stuff\AXBot\creator\xbot.py", line 4, in <module>
    import util
ImportError: No module named util 
```

这是我得到的`xbot.py`输出`from . import util`

```
C:\Users\Luke\Python stuff\AXBot\creator>xbot.py
Traceback (most recent call last):
  File "C:\Users\Luke\Python stuff\AXBot\creator\xbot.py", line 3, in <module>
    from . import util
ValueError: Attempted relative import in non-package 
```

我也用`from .. import util`而不是得到后一个错误`from . import util`。

如果您`xbot.py`从包含它的目录运行，Python 无法判断它是在包层次结构中运行的。它认为`xbot.py`不在包裹内。

我用 替换了尝试导入的行，`util`向上`from AXBot import util`移动了几个目录并`xbot.py`使用 Python 的`-m`命令行开关运行，它告诉 Python 运行由模块名称而不是文件名指定的模块。请注意，当您使用 时`-m`，您传入模块的完全限定名称，包括包层次结构，但您不包括文件扩展名`.py`，因为它不是模块名称的一部分：

```
C:\Users\Luke\Python stuff\AXBot\creator>cd ..\..

C:\Users\Luke\Python stuff>python -m AXBot.creator.xbot
1232 
```

如果我使用`import AXBot.util as util`而不是`from AXBot import util`.

（我没有要运行的代码，所以我将一个变量放入`util.py`并尝试从内部打印它的值`xbot.py`。这个变量的值是`1232`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T20:29:00.803

使用[相对导入](http://docs.python.org/whatsnew/2.5.html#pep-328)

```
from . import util
from . import settings 
```

不过，我建议更改您的文件夹层次结构，这对我来说看起来更干净。还要检查您的 PYTHONPATH，它通常应该按照您的方式工作。

参考：

*   [PEP-0328](http://www.python.org/dev/peps/pep-0328/)
*   [如何导入上面目录的 Python 类](https://stackoverflow.com/questions/1054271/how-to-import-a-python-class-that-is-in-a-directory-above)
*   [从父目录导入](https://stackoverflow.com/questions/4542352/python-import-from-parent-directory)

尽量**远离**sys.path 黑客。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T20:23:21.103

我认为命名空间不正确。从 xbot.py，尝试使用这个导入命令

```
from AXBot import util
from AXBot import settings 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T20:25:42.500

你在哪里是最重要的问题！据此，您使用`import`. 请更新您的问题

# google-apps-script - 如何像使用函数一样使用 google.script.run

> ID：11487045
> 
> 赞同：11
> 
> 时间：2012-07-14T20:08:55.230
> 
> 标签：google-apps-script

在 Google Apps 脚本中，我有以下脚本：

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('mypage');
}

function writeSomething() {
  return "<h1>hi people</h1>";
} 
```

和以下html文件：

```
<html>
  <a id="caller" href="#">update</a>
  <br>
  <div id="div">waiting...</div>
<script>
function go() {
  var a=google.script.run.writeSomething();
  document.getElementById("div").innerHTML=a;
}
document.getElementById('caller').onclick = go;
</script>
</html> 
```

当我单击“更新”链接时，div 内容从“等待...”变为“未定义”。我想 google.script.run 不能作为函数调用。那么，我该如何解决这个麻烦呢？（显然，这是一个玩具示例；我需要一种从脚本而不是 html 文件更新 div 内容的方法）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-15T02:19:00.443

函数 writeSomething() 是异步运行的，所以它会发生，但不会像本地函数那样返回响应。（这是 JavaScript 与服务器对话的标准）。相反，您需要指定一个“回调”函数，该函数在 writeSomething() 完成时被调用。

这是您的 HTML 的更正版本：

```
<html>
  <a id="caller" href="#">update</a>
  <br>
  <div id="div">waiting...</div>
<script>
function callback(whatToWrite) {
  document.getElementById("div").innerHTML=whatToWrite;
}
function go() {
  google.script.run.withSuccessHandler(callback).writeSomething();
}
document.getElementById('caller').onclick = go;
</script>
</html> 
```

或者等效地，您可以内联指定回调函数：

```
...
<script>    
function go() {
  google.script.run.withSuccessHandler(function(whatToWrite) {
    document.getElementById("div").innerHTML=whatToWrite;
  }).writeSomething();
}
... 
```

# asp.net - #if PUBLISH macro

> ID：11487048
> 
> 赞同：0
> 
> 时间：2012-07-14T20:09:30.083
> 
> 标签：asp.net, asp.net-mvc-3

I have 2 build-specific configuration code blocks. The first one should be applied when the app is launched locally and the second one when I publish the site to the web. Now I comment/uncomment one of them when I need to publish. So I wonder is there any way to do something like this:

```
#if PUBLISH
    anyConfig = "publish_config";
#else
    anyConfig = "debug_config";
#endif 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:14:11.117

选择 RELEASE 配置，然后转到项目的属性页面，并将 Build 页面中的 PUBLISH 定义添加到 Conditional Symbol 文本框中。

当您准备好部署您的应用程序时，再次切换到 RELEASE 配置并构建您的应用程序。

您还可以创建自定义配置。

*   转到构建菜单并选择配置管理器
*   在当前配置组合框中选择新建
*   为您的配置命名并选择基本配置（如果在调试会话期间使用此新配置，则为调试）
*   请务必检查 -> 每个项目的新配置。

现在您可以像为 DEBUG 或 RELEASE 一样选择此新配置，并将您的唯一符号添加到此配置中。

（我将此方法用于 WinForm 应用程序，其中某些功能仅适用于 RELEASE_PRO 配置）

# python - Python：列表列表

> ID：11487049
> 
> 赞同：49
> 
> 时间：2012-07-14T20:09:44.790
> 
> 标签：python

运行代码

```
listoflists = []
list = []
for i in range(0,10):
    list.append(i)
    if len(list)>3:
        list.remove(list[0])
        listoflists.append((list, list[0]))
print listoflists 
```

返回

```
[([7, 8, 9], 0), ([7, 8, 9], 0), ([7, 8, 9], 0), ([7, 8, 9], 1), ([7, 8, 9], 2), ([7, 8, 9], 3), ([7, 8, 9], 4), ([7, 8, 9], 5), ([7, 8, 9], 6), ([7, 8, 9], 7)] 
```

所以不知何故，每个元组（列表）的第一个参数每次都在列表列表中更新，但第二个参数 list[0] 不是。有人可以解释这里发生了什么并提出解决此问题的方法吗？我想输出

```
[([0],0), ([0,1],0), ... 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-14T20:19:27.670

列表是一种可变类型 - 为了创建一个副本（而不是仅仅传递相同的列表），您需要明确地这样做：

```
listoflists.append((list[:], list[0])) 
```

但是，`list`它已经是 Python 内置的名称 - 最好不要为变量使用该名称。这是一个不用`list`作变量名并制作副本的版本：

```
listoflists = []
a_list = []
for i in range(0,10):
    a_list.append(i)
    if len(a_list)>3:
        a_list.remove(a_list[0])
        listoflists.append((list(a_list), a_list[0]))
print listoflists 
```

* * *

请注意，我演示了复制上述列表的两种不同方法：`[:]`和`list()`.

第一个`[:]`是创建一个*切片*（通常通常用于获取列表的一部分），它恰好包含整个列表，因此实际上是列表的副本。

第二个`list()`是使用实际的`list` *类型构造函数*创建一个新列表，其内容等于第一个列表。（我在第一个示例中没有使用它，因为您在代码中覆盖了该名称 - 这是您不想这样做的一个很好的例子！）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-09-29T23:55:48.803

我来到这里是因为我是 python 新手并且懒惰所以我正在搜索一个示例来创建一个包含 2 个列表的列表，过了一会儿意识到这里的主题可能是错误的......这是一个创建列表列表的代码：

```
listoflists = []
for i in range(0,2):
    sublist = []
    for j in range(0,10)
        sublist.append((i,j))
    listoflists.append(sublist)
print listoflists 
```

这个输出 [[(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (0, 8), (0, 9)], [(1, 0), (1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (1, 6), (1, 7), (1, 8), (1, 9)]]

您的代码的问题似乎是您正在使用列表创建一个元组，并且您获得了对列表的引用而不是副本。我想应该属于一个元组主题......

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-14T20:18:55.403

首先，我强烈建议您将变量重命名`list`为其他名称。`list`是内置列表构造函数的名称，您隐藏了它的正常功能。我将在下面重命名`list`为`a`。

Python 名称是绑定到对象的*引用。*这意味着除非您创建多个列表，否则无论何时使用`a`它都指的是与上次相同的实际列表对象。所以当你打电话

```
listoflists.append((a, a[0])) 
```

您可以稍后更改`a`，它会更改该元组的第一个元素指向的内容。这不会发生，`a[0]`因为 指向的对象（它是一个整数）`a[0]`不会改变（尽管`a[0]`在您的代码运行过程中指向不同的对象）。

您可以使用构造函数创建整个列表的*副本：*`a``list`

```
listoflists.append((list(a), a[0])) 
```

或者，您可以使用*切片表示法*进行复制：

```
listoflists.append((a[:], a[0])) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-14T20:26:09.400

*list*变量（我建议将其重命名为更合理的名称）是对可以更改的列表对象的引用。

在线上

```
listoflists.append((list, list[0])) 
```

您实际上只是通过 list 变量添加对对象引用的引用。您有多种可能性来创建列表的副本，因此*listoflists*包含您似乎期望的值：

**使用复制库**

```
import copy
listoflists.append((copy.copy(list), list[0])) 
```

**使用切片符号**

```
listoflists.append((list[:], list[0])) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-14T20:20:02.960

当你运行代码

```
listoflists.append((list, list[0])) 
```

您没有（正如我认为您所期望的那样）`list`在`listoflists`. 您正在做的是添加`list`对`listoflists`. 因此，每次更新时`list`，它都会更新对 的每个引用`list`，在这种情况下，就是`listoflists`

你可以做的是这样的：

```
listoflists = []
for i in range(1, 10):
    listoflists.append((range(i), 0)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-14T20:21:42.873

只要您仅在 if 子句内附加到 listoflists，您也不会获得您希望的输出。

尝试这样的事情：

```
import copy

listoflists = []
list = []
for i in range(0,10):
    list.append(i)
    if len(list)>3:
        list.remove(list[0])
    listoflists.append((copy.copy(list), copy.copy(list[0])))
print(listoflists) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-30T06:58:37.593

时间旅行者在这里

```
List_of_list =[([z for z in range(x-2,x+1) if z >= 0],y) for y in range(10) for x in range(10)] 
```

这应该可以解决问题。输出是这样的：

```
[([0], 0), ([0, 1], 0), ([0, 1, 2], 0), ([1, 2, 3], 0), ([2, 3, 4], 0),  ([3, 4, 5], 0), ([4, 5, 6], 0), ([5, 6, 7], 0), ([6, 7, 8], 0), ([7, 8, 9], 0), ([0], 1), ([0, 1], 1), ([0, 1, 2], 1), ([1, 2, 3], 1), ([2, 3, 4], 1), ([3, 4, 5], 1), ([4, 5, 6], 1), ([5, 6, 7], 1), ([6, 7, 8], 1), ([7, 8, 9], 1), ([0], 2), ([0, 1], 2), ([0, 1, 2], 2), ([1, 2, 3], 2), ([2, 3, 4], 2), ([3, 4, 5], 2), ([4, 5, 6], 2), ([5, 6, 7], 2), ([6, 7, 8], 2), ([7, 8, 9], 2), ([0], 3), ([0, 1], 3), ([0, 1, 2], 3), ([1, 2, 3], 3), ([2, 3, 4], 3), ([3, 4, 5], 3), ([4, 5, 6], 3), ([5, 6, 7], 3), ([6, 7, 8], 3), ([7, 8, 9], 3), ([0], 4), ([0, 1], 4), ([0, 1, 2], 4), ([1, 2, 3], 4), ([2, 3, 4], 4), ([3, 4, 5], 4), ([4, 5, 6], 4), ([5, 6, 7], 4), ([6, 7, 8], 4), ([7, 8, 9], 4), ([0], 5), ([0, 1], 5), ([0, 1, 2], 5), ([1, 2, 3], 5), ([2, 3, 4], 5), ([3, 4, 5], 5), ([4, 5, 6], 5), ([5, 6, 7], 5), ([6, 7, 8], 5), ([7, 8, 9], 5), ([0], 6), ([0, 1], 6), ([0, 1, 2], 6), ([1, 2, 3], 6), ([2, 3, 4], 6), ([3, 4, 5], 6), ([4, 5, 6], 6), ([5, 6, 7], 6), ([6, 7, 8], 6), ([7, 8, 9], 6), ([0], 7), ([0, 1], 7), ([0, 1, 2], 7), ([1, 2, 3], 7), ([2, 3, 4], 7), ([3, 4, 5], 7), ([4, 5, 6], 7), ([5, 6, 7], 7), ([6, 7, 8], 7), ([7, 8, 9], 7), ([0], 8), ([0, 1], 8), ([0, 1, 2], 8), ([1, 2, 3], 8), ([2, 3, 4], 8), ([3, 4, 5], 8), ([4, 5, 6], 8), ([5, 6, 7], 8), ([6, 7, 8], 8), ([7, 8, 9], 8), ([0], 9), ([0, 1], 9), ([0, 1, 2], 9), ([1, 2, 3], 9), ([2, 3, 4], 9), ([3, 4, 5], 9), ([4, 5, 6], 9), ([5, 6, 7], 9), ([6, 7, 8], 9), ([7, 8, 9], 9)] 
```

这是通过列表理解完成的（这使得通过一行代码循环列表中的元素成为可能）。这段代码背后的逻辑如下：

(1) for x in range(10) 和 for y in range(10) 用于列表内的两个独立循环

(2) (a list, y) 是循环的总称，这也是为什么在(1)中放在两个for之前

(3) (2)中列表的长度不能超过3，并且列表依赖于x，所以

```
[z for z in range(x-2,x+1)] 
```

用来

(4) 因为 z 从零开始，但是 range(x-2,x+1) 从 -2 开始，这不是我们想要的，所以如果 z >= 0 的条件语句放在 ( 2)

```
[z for z in range(x-2,x+1) if z >= 0] 
```

# ios - iOS 关屏 iPad

> ID：11487064
> 
> 赞同：2
> 
> 时间：2012-07-14T20:12:12.750
> 
> 标签：ios, ipad, api

有没有办法以编程方式关闭 iPad 上的屏幕和调整音量？它可以是私有 api，因为这是供个人使用的。我知道在 iPhone 中您可以使用接近传感器，但我认为这种方法不适用于 iPad。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:45:57.833

您可以使用`proximityMonitoringEnabled`和`proximityState`来处理屏幕。查看[此](https://stackoverflow.com/a/1191675/67381)答案中的评论。

而且没有办法调节音量

来自[developer.apple](https://developer.apple.com/library/ios/#codinghowtos/AudioAndVideo/_index.html)

> 全局系统卷，包括您的应用程序的卷，由 iPhone OS 处理，应用程序无法访问。

# python - 在python中仅旋转图像的一部分

> ID：11487066
> 
> 赞同：1
> 
> 时间：2012-07-14T20:12:25.180
> 
> 标签：python, python-imaging-library

对不起，在编码方面我是一个完全的菜鸟。我有一个使用 Python 仅旋转图像的一部分的问题。我已经导入了 PIL 并且旋转功能正常工作，但我不能让它只旋转图像的一部分。任何帮助将不胜感激。

```
from PIL import Image
import _imaging
import sys

myImage = Image.open("img.gif")

for x in range():
    for y in range():
        myImage.rotate(90).show() 
```

我有类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:56:36.353

我会提出以下解决方案：

```
inlay = img.crop((x1,y1,x2,y2)).rotate(90)
img.paste(inlay, (x1,y1,x2,y2)) 
```

x1,y1 是嵌体/子图像的左上角，x2,y2 是右下角。

img = myImage 来自您的示例

# jquery - 如何将撇号字符分配给 html 数据属性值？

> ID：11487067
> 
> 赞同：1
> 
> 时间：2012-07-14T20:12:36.930
> 
> 标签：jquery

步骤1 -

我使用 post 方法返回数据值，数据值可能会返回撇号字符并将值分配给变量。例如，

```
var returnData = "Test's failure"; 
```

第2步 -

接下来，我尝试将变量分配给如下数据类型的值：

```
$("testList").append("<li data-test='"+ returnData +"'>" + test_List + " </li>); 
```

概括 -

当使用firebug查看属性data-test中放置的变量returnData的值时，会显示Test的值，并且没有添加失败。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:14:50.143

只是为了安全起见：

```
$("<li />").data("test", returnData).html(test_List).appendTo("#testList"); 
```

或者，如果您需要该属性：

```
$("<li />", {
    "data-test" : returnData
}).html(test_List).appendTo("#testList");​ 
```

**演示：http:** [//jsfiddle.net/ZyMCk/](http://jsfiddle.net/ZyMCk/)

# android - 升级普通书籍的高级服务模式（wakful service）

> ID：11487072
> 
> 赞同：1
> 
> 时间：2012-07-14T20:13:37.570
> 
> 标签：android, commonsware-cwac

我正在使用公共书籍的唤醒服务模式。我的问题是处理服务实例。我的目标是每 X 分钟检查一次用户的当前位置（不必非常准确），并用它做一些逻辑。当我注册位置更新时出现问题。我将 locationManager.removeUpdates(locationListener) 放在“onDestroy”函数上，但它仍然不断地从 messageQueue 向我发出警告，告诉我他的消息将进入死线程。我不能放弃位置更新，因为如果设备上没有其他应用程序，我将获得旧的、不相关的位置。

我能做些什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:27:19.020

`WakefulIntentService``onHandleIntent()`不适合这个，因为服务一旦返回就会关闭。相反，请查看类似 的[`LocationPoller`](https://github.com/commonsguy/cwac-locpoll)内容，它使用常规`Service`和`WakeLock`，让服务运行足够长的时间，以便在关闭服务之前获得位置修复。

# google-apps-script - 如何保护附加到电子表格中触发器的脚本不被协作者编辑？

> ID：11487073
> 
> 赞同：2
> 
> 时间：2012-07-14T20:13:52.223
> 
> 标签：google-apps-script, google-sheets

我有一个脚本，应该通过编辑我的电子表格来触发，但我不想让电子表格的编辑者编辑脚本。这个怎么安排？

如果我只是在电子表格的工具>脚本编辑器中编写脚本，并将其附加到一个简单或可安装的触发器，那么电子表格的每个编辑器都可以像我一样编辑这个脚本（尽管他不能编辑可安装的我附加到这个脚本的触发器）。[Google 开发人员](https://developers.google.com/apps-script/scripts_google_accounts#permissionLevels)声称我可以独立于容器电子表格的编辑器为我的脚本选择编辑器：

> 最初，绑定到容器（例如 Google 电子表格或 Google 站点）的脚本将继承容器的权限。脚本所有者或编辑者可以在共享对话框中添加或删除用户或组，即使这意味着脚本的权限不再与容器的权限匹配。

但是，我只是找不到对此负责的菜单项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:48:32.097

如果您重新阅读文档，您会发现对于容器绑定脚本（例如附加到电子表格的脚本），脚本的权限与容器的权限相同。不再可能使这些不同。

# django - 在 webfaction 上扩展 Django 存储

> ID：11487076
> 
> 赞同：0
> 
> 时间：2012-07-14T20:14:15.333
> 
> 标签：django, amazon-s3, webfaction, django-storage

一个月前我推出了一个允许用户上传图片的网站。该网站正在起飞，我可能会在 2 或 3 个月内用完我在 webfaction 上的 200 GB 空间。

什么是规模化的最佳解决方案？是亚马逊 S3 吗？还是我应该看看其他主机？

如果最好的选择是 Amazon S3，您建议每天使用脚本迁移本地服务器上的上传文件还是使用 django-storage（目前甚至没有安装）？有什么缺点和优点？请注意，我已经启动，并且我还执行了一些操作，例如在文件上传后创建缩略图。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:59:57.800

将您的静态存储卸载到有更多空间的地方。您的静态文件存储不必与 django 安装在同一台服务器上。还要考虑您如何使用磁盘空间。如果您不是特别需要全分辨率图像，请考虑缩小它们。无论您走到哪里，200GB 都会让您付出很多。

# string - 如何在haskell中正确定义一个空字符串？

> ID：11487080
> 
> 赞同：4
> 
> 时间：2012-07-14T20:14:45.320
> 
> 标签：string, list, function, haskell, functional-programming

我的程序有问题，我能够隔离问题。我设法将其简化为这个更简单的问题。可以说我有这个功能

```
fn:: String -> String
fn (x:xs)
    | null (x:xs) = "empty"
    | otherwise = "hello" 
```

输入随机的东西会返回`"hello"`，但如果我这样做了，

```
fn "" 
```

我得到了非详尽的模式错误。由于 "" 假设是一个空列表，`[]`它不应该与我的第一个模式匹配并返回`"empty"`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T20:17:07.903

Haskell 中的A`String`是一个字符列表。因此，要`String`匹配空列表，您需要匹配一个空列表 ( `[]`)。您的模式`(x:xs)`将只匹配`String`具有至少一个元素的列表或 s，因为它由一个元素 ( `x`) 和其余元素 ( ) 组成，这些元素`xs`可以是空的或非空的。

您的函数的工作版本如下所示：

```
fn :: String -> String
fn [] = "empty"
fn (x:xs) = "hello" 
```

这将返回`"empty"`.`fn ""`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-14T23:08:52.717

你的功能

```
fn:: String -> String
fn (x:xs)
    | null (x:xs) = "empty"
    | otherwise = "hello" 
```

最好写成：

```
fn :: String -> String
fn x | null x    = "empty"
     | otherwise = "hello" 
```

或者

```
fn :: String -> String
fn "" = "empty"
fn _  = "hello" 
```

因为`null (x:xs)`肯定是错误的（总是 False）。

我更喜欢后者，因为它清楚地表明您只关心 String 类型。

这是一个有点奇怪的功能。我没有在实践中看到它。

# iphone - 在 iPad 模拟器上测试时，iphone 应用程序崩溃

> ID：11487087
> 
> 赞同：0
> 
> 时间：2012-07-14T20:15:36.883
> 
> 标签：iphone, nsview

> **可能重复：**
> [iPad 模拟器上的应用程序崩溃](https://stackoverflow.com/questions/11492647/app-crash-on-ipad-simulator)

`[UIStatusBarWindow convertPoint:fromView:]: unrecognized selector sent to class.`

尝试在 iPad 模拟器上测试 iPhone 应用程序时，应用程序崩溃并显示上述消息。

在 ipad 模拟器上测试 iphone 应用程序原因是通过苹果商店审查指南

iPhone 应用程序还必须无需修改即可在 iPad 上以 iPhone 分辨率和 2X iPhone 3GS 分辨率运行

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]autorelease];
self.containerViewController = [[[ContainerViewController alloc]init]autorelease];
self.window.rootViewController = self.containerViewController;
[window makeKeyAndVisible];
return YES;
 } 
```

我是否必须对 info.xml 中的设置进行一些更改？

# php - PHP Site Management Authentication Page

> ID：11487088
> 
> 赞同：0
> 
> 时间：2012-07-14T20:16:12.497
> 
> 标签：php, authentication

I have created a management page for my php site. I have a management page that I created that I would like to secure (allow only me to access).

What is the easiest way to secure this page without creating a full fledged login system? This feels like overkill, and I am afraid of creating security vulnerabilities. I have no other needs for a login system for the rest of the site.

Any recommendations or ideas from other people that have done stuff like this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:25:15.923

As you ask for the easiest way,

You could just use your IP for comparing:

```
$myIP="your-ip-here";

if($_SERVER['REMOTE_ADDR']!=$myIP){exit();} 
```

And maybe you could also do a little get param comparing too:

```
$myIP="your-ip-here";
$myGetParamPass="password";

if($_SERVER['REMOTE_ADDR']!=$myIP || $_GET['pass']!==$myGetParamPass){exit();} 
```

And then access the page with YOUR IP address and with this link:

```
www.site.com/page.php?pass=password 
```

But the method above will be no good if you're on a dynamic IP, which changes frequently.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:29:38.807

I find the easiest way creating a secure area for a single user with "Htaccess".

Example:

[http://webdesign.about.com/od/htaccess/ht/hthtaccess.htm](http://webdesign.about.com/od/htaccess/ht/hthtaccess.htm)

But this is not PHP or Mysql - but Apache.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T20:44:19.923

The simpliest way I can imagine is

```
 <?php
    session_start();
    if(isset($_POST['send'])){
      if($_POST['pw'] == "somepassword"){
        $_SESSION['LOGIN'] = true;
      }
    }

    if(isset($_SESSION['LOGIN'])){
      //your page
    }else{ ?>
      <form method="post" action=""> <p>Password:</p>
        <input name="pw" type="password" />
        <input name="send" value="send" type="submit" />
      </form>
    <?php 
    }
    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T20:23:45.237

create a cookie(use only once setcookie ("admin", "i'm admin", time() + $temps); or create it manually ) and use the following code in every webpage:

```
if (isset($_COOKIE['admin'])) { 
      //Do something 
} 
else { die(); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T20:29:11.427

The simplest method is the:

```
<?
  session_start();
  $user = 'YOUR_USERNAME';
  $password = 'YOUR_PASSWORD';
  if($_POST['user'] == $user  && $_POST['password'] == $password){
      $_SESSION['logged'] = true;
  }else{
       $_SESSION['logged'] = false;
   }

  if($_SESSION['logged']){
      echo "Logged in"
  }else{
      echo "Acces denied";
  }
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-14T20:19:49.490

![ScreenShot of the thing working](../Images/860caa4b171056de29a26a2440fa537a.png)

```
<?php
$realm = 'Restricted area';

//user => password
$users = array('Username123123' => 'Password1112313', 'Guest' => 'guest');

if (empty($_SERVER['PHP_AUTH_DIGEST'])) {
    header('HTTP/1.1 401 Unauthorized');
    header('WWW-Authenticate: Digest realm="'.$realm.
           '",qop="auth",nonce="'.uniqid().'",opaque="'.md5($realm).'"');

    die('<h1>HTTP/1.1 401 Unauthorized</h1>');
}

// analyze the PHP_AUTH_DIGEST variable
if (!($data = http_digest_parse($_SERVER['PHP_AUTH_DIGEST'])) ||
    !isset($users[$data['username']]))
    die('<h1>Wrong Credentials!</h1>');

// generate the valid response
$A1 = md5($data['username'] . ':' . $realm . ':' . $users[$data['username']]);
$A2 = md5($_SERVER['REQUEST_METHOD'].':'.$data['uri']);
$valid_response = md5($A1.':'.$data['nonce'].':'.$data['nc'].':'.$data['cnonce'].':'.$data['qop'].':'.$A2);

if ($data['response'] != $valid_response)
    die('<h1>Wrong Credentials!!</h1>');

echo 'Your are logged in as: ' . $data['username'] . '<hr />';

// function to parse the http auth header
function http_digest_parse($txt)
{
    // protect against missing data
    $needed_parts = array('nonce'=>1, 'nc'=>1, 'cnonce'=>1, 'qop'=>1, 'username'=>1, 'uri'=>1, 'response'=>1);
    $data = array();
    $keys = implode('|', array_keys($needed_parts));

    preg_match_all('@(' . $keys . ')=(?:([\'"])([^\2]+?)\2|([^\s,]+))@', $txt, $matches, PREG_SET_ORDER);

    foreach ($matches as $m) {
        $data[$m[1]] = $m[3] ? $m[3] : $m[4];
        unset($needed_parts[$m[1]]);
    }

    return $needed_parts ? false : $data;
}
?> 
```

# objective-c - 未使用 segue 替换主拆分设置 SplitView 委托

> ID：11487092
> 
> 赞同：0
> 
> 时间：2012-07-14T20:17:14.317
> 
> 标签：objective-c, ipad, ios5, uisplitviewcontroller

我的问题是关于`UISplitView`iOS SDK5.1 中的基于应用程序的。

*   该应用程序基于拆分视图。
*   说明应用程序时一切正常，同时使用根主视图和详细视图。
*   稍后，我使用 segue 类型对 master-和 detail 视图进行 segue：“replace master split”

这是麻烦开始的地方：

*   如果上述所有情况都发生在纵向模式下，则不会显示显示主视图的栏按钮。
*   切换到横向模式并返回可以解决问题。

masterVC 将自己设置为`splitview.delegate`in `-(void)viewDidLoad`，我怀疑为时已晚，因此无法及时调用委托方法。

所以我尝试将委托设置为`-(void)prepareForSegue`...，这并没有改变行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:26:49.020

在您的 App Delegate 的 didFinishLaunchingWithOptions 方法中设置 UISplitViewController 委托。

```
if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

    UISplitViewController *splitViewController = (UISplitViewController*)self.window.rootViewController;
 UITableViewController *yourViewController = (UITableViewController*)[splitViewController.viewControllers objectAtIndex:0];
splitViewController.delegate = yourViewController;

 } 
```

确保 yourViewController 符合 UISplitViewControllerDelegate 协议。

编辑：另外，如果您的 MasterViewController 嵌入在导航控制器中，您将必须通过首先访问 UINavigationController 然后访问它的 topViewController 来访问它。

# html - 我的第三个 div 表现得很奇怪

> ID：11487093
> 
> 赞同：0
> 
> 时间：2012-07-14T20:17:16.980
> 
> 标签：html, css

最好自己看代码。托管它的服务器是安全的，不幸的是我不允许随意提供密码。

发生的事情是我有三个大 div，理论上应该彼此对齐，但第三个一直下降到右下角，尽管我所有的宽度值都加到了 100%。像往常一样提前感谢大家。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>INT222</title>
    <link rel="stylesheet" href="./css/mycss.css" type="text/css" media="screen" /> 
  </head>
  <body class = "body">
    <div class="bdiv">
        <nav class="nav">
          <ul>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/">My Zenit Account</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/index.html">Home</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/gallery.html">Picture Gallery</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/video.html">Video</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/audio.html">Audio</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/tables.html">Tables</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/forms.html">Forms</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/css/mycss.css">CSS Used</a></li>
            <li><a href="http://zenit.senecac.on.ca/~int222_122a07/assign2/other.html">Other</a></li>
          </ul>
        </nav>
    </div>
    <form method="post" action="https://zenit.senecac.on.ca/~int222_122a07/assign2/index.html" id="formex1">
        <div class = "left1">
                <h1 class = "mama">Mama's Pizza</h1> <br />
            <hr />
                <h1 class = "mama2">416 or 905 <br /> 222-6262</h1> <br />
            <hr />
                <table class="prices">
                    <tr>
                        <td>Small</td>
                        <td>$11.55</td>
                    </tr>
                    <tr>
                        <td>Medium</td>
                        <td>$15.25</td>
                    </tr>
                    <tr>
                        <td>Large</td>
                        <td>$22.00</td>
                    </tr>
                    <tr>
                        <td>X-Large</td>
                        <td>$25.00</td>
                    </tr>
                    <tr>
                        <td>Toppings</td>
                    </tr>
                    <tr>
                        <td>$1.79 Each</td>
                    </tr>
                    <tr>
                        <td>Plus 13% HST</td>
                    </tr>
                    <tr>
                        <td>Free Delivery</td>
                    </tr>
                </table>
            <p>
                Your Price<br />
                <input type="text" name="total" value="" readonly="readonly" />
            </p>
        </div>
        <div class = "left2">
            <div class = "pdiv">      
                <fieldset><legend>Personal Information</legend> <br />
                    Name <input type = "text" name = "Name" /> <br />
                    Account No. <input maxlength="10" size="10" name = "account#" /> <br />
                    Phone No. <input maxlength = "12" size = "12" name = "Phone#" /> <br />
                    Date of Birth <input maxlength = "7" size = "7" name = "DOB" />
                </fieldset>
            </div>
            <div class = "pscdiv">
                <fieldset><legend>Pizza Size & Crust</legend> <br /> 
                    <p>
                        <select name="pizza-size" size="5">
                          <option value="1"> Select Pizza Size </option>
                          <option value="2"> Small </option>
                          <option value="3"> Medium </option>
                          <option value="4"> Large </option>
                          <option value="5"> X-Large </option>
                        </select>
                    </p>
                    <p>
                        <select name="crust" size="3">
                          <option value="1"> Regular Crust </option>
                          <option value="2"> Thin Crust </option>
                          <option value="3"> Thick Crust </option>
                          <option value="4"> Whole Wheat Crust </option>
                        </select>
                    </p>
                </fieldset>
            </div>
            <div class = "csdiv">
                <fieldset><legend>Cheeses</legend> <br />
                  <p>
                    <input type = "radio" name = "Cheeses" value = "Mozzarella" />Mozzarella<br />
                    <input type = "radio" name = "Cheeses" value = "Reduced Fat" />Reduced Fat<br />
                    <input type = "radio" name = "Cheeses" value = "Feta" />Feta<br />
                  </p>
                </fieldset>
            </div>
            <div class = "cdiv">
                <fieldset><legend>Sauces</legend> <br />
                  <p>
                    <input type = "radio" name = "Sauces" value = "Pizza Sauce" />Pizza Sauce<br />
                    <input type = "radio" name = "Sauces" value = "BBQ Sauce" />BBQ Sauce<br />
                    <input type = "radio" name = "Sauces" value = "Garlic Sauce" />Garlic Sauce<br />
                  </p>
                </fieldset>
            </div> 
            <div class = "div6">
              <fieldset><legend>Special Instructions</legend> <br />
                <p>
                  <textarea name="Additional Comments" cols="32" rows="6"></textarea>       
                </p>
              </fieldset>
            </div>
            <div class = "srdiv">       
                <input type="submit" value="Place Your Order" />       
                <input type="reset"  value="Start Over" />
            </div>
        </div>
    <div class = "right">
        <fieldset><legend>Choose Toppings - $1.79 Each</legend> <br />
            <div class = "tdiv1">
                    <p>
                      <input type="checkbox" name="Toppings" value="1" />Anchovies<br />      
                      <input type="checkbox" name="Toppings" value="2" />Bacon<br />
                      <input type="checkbox" name="Toppings" value="3" />Ham<br />
                      <input type="checkbox" name="Toppings" value="4" />Pepperoni<br />
                      <input type="checkbox" name="Toppings" value="5" />Salami<br />
                      <input type="checkbox" name="Toppings" value="6" />Sausage<br />
                    </p>
            </div>
            <div class = "tdiv2">
                    <p>
                      <input type="checkbox" name="Toppings" value="7" />Broccoli<br />
                      <input type="checkbox" name="Toppings" value="8" />Green Olives<br />
                      <input type="checkbox" name="Toppings" value="9" />Green Peppers<br />
                      <input type="checkbox" name="Toppings" value="10" />Mushrooms<br />
                      <input type="checkbox" name="Toppings" value="11" />Red Onion<br />
                      <input type="checkbox" name="Toppings" value="12" />Roasted Garlic<br />
                    </p>
            </div>
        </fieldset>
    </div>
    <br />
    </form>
</body>
</html> 

.body {
    width: 1024px;
    margin: auto;
}
.bdiv{
    position: relative;
    border: solid 2px;
}

.nav ul{
    list-style-type: none;
    overflow: hidden;

}
.nav ul li {
    display: block;
    float: left;
    padding: 0 25px;
}
.mdiv {
    position: relative;
    clear: both;
}
.h1 {
    text-align: left;
    color: #FFFFFF;
    font-style: italic;
    font-family: sans-serif;
    border-style: groove;
    padding: 4px;    
}
.div1 {
    background-color: #990000;
}
.subject {
    font-size: 40px;
    font-weight: bold;
}
.div2 {
    width: 66%;
    position: relative;
    float: left;
}
.div3 {
    width: 33%;
    position: relative;
    float: right;
}
.subject2 {
    font-size: 24px;
    font-family: monospace;
    font-weight: bold;
    text-align: center;
}
.list1 {
    list-style-type: none;
}
footer {
    vertical-align: middle;
    text-align: center;
    clear: both;
    background-color:#990000;
    color: #FFFFFF;
}

.fbody {
background-color:#0f0000;
width:1000px;
margin:auto;
color:#009900;
}

.left1{
    display:table;
    width: 20%;
    float: left;
    border: solid 2px #000000;
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0px 0px 10px #000000;
}

.left2 {
    display:table;
    width: 35%;
    float: left;
    border: solid 2px #000000;
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0px 0px 10px #000000;
}

.right {
    border: solid 2px #000000;
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0px 0px 10px #000000;
    width: 45%;
    float: right;
    clear: both;
}

.prices {
    border: ridge 5px;
    margin: auto;
    text-align: center;
}

.pscdiv1 {
    alignment-adjust: middle;
    display: table-row;
}

.srdiv {
    text-align: center;
}

.tdiv1 {
    float: left;
    border: none;
    padding: 20 0px;
}

.tdiv2 {
    margin-left: auto;
    text-align: justify;
    float: right;
    padding: 0 35px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:23:03.420

由于 div 的内部大小加起来是宽度的 100%，因此您的 div 正在换行。但是，您列出了一个边框，它增加了 div 的宽度，并且没有计入 % 宽度。如果要防止 div 换行，则需要考虑边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:24:13.843

这是因为您已经`clear:both`设置了最终容器。此外，最好`class="left"`在所有 3 个容器上使用一个标准，然后为每个单独的容器设置不同的宽度。

在这种情况下，一起使用`float:left`和可能会导致异常行为。`float:right`

最后，边框包含在宽度百分比中，要解决此问题，您可以使用 CSS3，`box-sizing: border-box;`但是最好将宽度减小到 99%。

这是您的代码中的一个示例小提琴：[单击](http://jsfiddle.net/W8Wtg/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:25:50.317

尝试将您的`.right`课程修改为：

```
.right {
    border: solid 2px #000000;
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0px 0px 10px #000000;
    width: 44%;
    float:left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T20:22:20.840

如果您将 .right 宽度更改为 44%，它就可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T20:24:34.893

元素之间的空格/换行符增加了额外的宽度。删除它们（看起来像`</div><div class="div2">`），它应该没问题。如果没有，请尝试添加`box-sizing: border-box`以使边框包含在宽度中。

# jquery - 在 jplayer 中播放 .ogg 或 .mp3 文件

> ID：11487096
> 
> 赞同：1
> 
> 时间：2012-07-14T20:18:46.167
> 
> 标签：jquery, jplayer

我正在尝试在页面加载时使用特定的音频文件来播放。问题是，我不知道如何让 jplayer 播放 .mp3 或 .ogg。

Firefox 支持 .ogg，但 Safari 和 IE 不支持。

因此，我希望音频播放用户浏览器支持的任何文件格式。

这是我的 .js 文件中的代码：

```
$f("#jquery_jplayer_1").jPlayer({
        ready: function (event) {
            $f(this).jPlayer("setMedia", {
                oga:"http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.ogg"
            }).jPlayer("play");
        },
        swfPath: "js",
        solution: 'html, flash',
        supplied: "m4a, oga",
        wmode: "window"
    });

    $f("#jquery_jplayer_2").jPlayer({
        ready: function (event) {
            $f(this).jPlayer("setMedia", {
                oga:"http://www.davidhornbrook.com/chad/test3/template/David.ogg"
            }).jPlayer("play");
        },
        swfPath: "js",
        solution: 'html, flash',
        supplied: "m4a, oga",
        wmode: "window"
    });

    $f("#jquery_jplayer_3").jPlayer({
        ready: function (event) {
            $f(this).jPlayer("setMedia", {
                mp3:"http://www.davidhornbrook.com/chad/test3/template/David.mp3"
            }).jPlayer("play");
        },
        swfPath: "js",
        solution: 'html, flash',
        supplied: "mp3",
        wmode: "window"
    }); 
```

.html 文件中的代码是这样的：

```
<div id="controls-wrapper" class="load-item">
                <div id="controls">
                    <a id="prevslide" class="load-item"></a>
                    <a id="play-button"><img id="pauseplay" src="img/pause.png" alt="fashion" /></a>
                    <a id="nextslide" class="load-item"></a>
                </div>
                <div id="jquery_jplayer_2" class="jp-jplayer"></div>
                <div id="jp_container_1" class="jp-audio">
                    <ul class="jp-controls">
                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                    </ul>
                </div>
            </div> 
```

我确信有办法做到这一点，但我现在不知所措。任何帮助，将不胜感激。您可以直接在 hornbook.com 的乍得给我发电子邮件

- - - - -编辑 - - - - - - -

我已将其作为权宜之计。在 html 代码中我添加了这个：

```
 <!-- Content -->
        <div class="content">
        <img src="img/HBLogo903.png" />
        </div>

<audio autoplay="">
  <source src="David.mp3" type="audio/mpeg" />
  <source src="David.ogg" type="audio/ogg" />
</audio>

        <!-- /Content --> 
```

无论如何都不是理想的情况，我不知道它是否可以在 IE 6/7/8 中工作我确实将其作为我的 html 中的第一行

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

感谢大家的帮助:)

# javascript - VML 抛出错误 - 鼠标按下时“失败”

> ID：11487100
> 
> 赞同：1
> 
> 时间：2012-07-14T20:19:01.767
> 
> 标签：javascript, events, internet-explorer-6, vml

这是一个奇怪的问题。我有一组用 javascript 动态创建的 VML 对象。我用来测试的系统是 Windows XP (SP3) 上的 IE6

当您在集合上按下鼠标时，它会抛出一个奇怪的“失败”错误。真正奇怪的是，我使用 VML 已经有一段时间了，我发誓截至上周没有发生此错误。

无论如何，这里有一个演示链接，它显示了错误。

[http://www.codequark.com/vml-demo](http://www.codequark.com/vml-demo)

错误是：

行：25 字符：5 错误：失败代码：0

迷人的。我正在使用 IE6，但知道它是在 7 还是 8 中发生会很有帮助。

以下是我能够找到的与此错误接近的唯一其他参考：

[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dfacff65-cd23-480f-a2e9-c928e63cb50f/](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dfacff65-cd23-480f-a2e9-c928e63cb50f/)

[我的网站不断崩溃 IE，无法调试](https://stackoverflow.com/questions/3948913/my-website-keeps-crashing-ie-cant-debug)

如果你愿意，这里是源代码。您可以加载它并在您选择的野蛮 IE 浏览器中查看它。

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>     
    <script type="text/javascript" charset="utf-8">

    //the stage element.
    var stage;     

        //create a group with a single square shape.
        function makeAScaledRotatedGroup(sclX, sclY, rot, clr) {

        var xCoord = 200;
        var yCoord = 200;

        var regX = 100;
        var regY = 100;

        var origX = -10/sclX + regX;
        var origY = -10/sclY + regY;

        var _x = xCoord - 10;
        var _y = yCoord - 10;

        var grp = document.createElement('<v:group style="position:absolute; left:'+_x+'px; top:'+_y+'px; width:20px; height:20px; rotation:'+rot+';" coordsize="'+20/sclX+' '+20/sclY+'" coordorigin="'+origX+' '+origY+'"  class="rvml">');

        var shp1 = document.createElement('<v:shape fillcolor="'+clr+'" strokecolor="red" strokeweight="2px" coordorigin="0 0" coordsize="20 20" style="position:absolute; top:0px;left:0px;width:20px;height:20px;"  class="rvml">');
        var pth1 = document.createElement('<v:path v="M 0 0 L 200 0  200 200  0 200 X E"  class="rvml">');

        shp1.appendChild(pth1);
        grp.appendChild(shp1);

        stage.appendChild(grp);

       return grp;
       }

//array to store references to all the dom nodes.
var allRects = [];

    //kick it off. mon calamari cruisers beware.
    function operationalBattleStation() {

    document.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
    document.namespaces.add("v", "urn:schemas-microsoft-com:vml");

    stage = document.createElement('div');
    stage.style.position = 'absolute';
    stage.style.top = '0px';
    stage.style.left = '0px';
    stage.style.width = '500px';
    stage.style.height = '500px';
    stage.style.clip = "rect(0px,500px,500px,0px)";
    document.body.appendChild(stage);

    var clrs = ['#0066CC', '#990000','#FF0033','#0699CC','#00FF00','#0000FF','#FF0000','#33FF00','#333300', '#990000','#FF0033','#0699CC','#00FF00','#0000FF','#FF0000','#33FF00','#333300'];
    var rot =0;
    var scl = 1;

        for(var h=0; h<clrs.length; h++) {
        allRects.push(makeAScaledRotatedGroup(scl, scl, rot, clrs[h]));                 
        rot+=10; 
        scl = scl*0.7;
        }

    };

</script></head><body onload="operationalBattleStation();"></body></html> 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:08:49.523

哦，上帝，这是一本给书的。

来看看，这个错误和几个类似的错误是由......等待它......某种名为“Reganam”的工具栏插件安装在我的IE6版本上的。隐藏它解决了问题，现在我的代码表现得像它应该的那样。

我的理论是这个附加组件在某种程度上影响了 IE6 的垃圾收集系统。这就像 VML 节点被删除了，即使它们仍然出现在屏幕上。在其他情况下，如果您尝试访问其任何属性，来自 VML 元素的 window.event.srcElement 将引发“失败”错误。但是 srcElement 不为空。（当您尝试访问已释放对象的属性时，它的行为与objective-c 的行为一样）隐藏附加组件也解决了这个问题。

为什么附加组件会干扰 VML，（以及为什么浏览器会被设计成*甚至可能*发生这种干扰）是深不可测的。

对于必须进行跨浏览器矢量图形的人来说，Reganam 插件是个坏消息。我很想写更多，但我有一些巫毒娃娃要做。

# sql - Microsoft SQL Server 中不区分大小写的搜索

> ID：11487105
> 
> 赞同：1
> 
> 时间：2012-07-14T20:19:30.627
> 
> 标签：sql, sql-server, sql-server-2005

`Arabic_BIN`我在 Microsoft SQL Server 2005 上有一个带有排序规则的数据库。

如果我运行此查询：

```
SELECT ID FROM maj_Users WHERE UserName = 'mahdi' 
```

我什么也得不到，但如果我运行这个查询：

```
SELECT ID FROM maj_Users WHERE UserName = 'Mahdi' 
```

我会得到一个单元格... 似乎 SQL Server 搜索数据库时区分大小写，但我想搜索数据库不区分大小写。

有什么办法吗？

编辑：我也试过`SELECT ID FROM maj_Users WHERE UserName LIKE 'mahdi'`了，但没用...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T20:28:16.477

SQL Server 不以区分大小写的方式搜索数据库，也不以不区分大小写的方式搜索数据库。它根据所涉及的列的[**排序规则执行此操作。**](http://msdn.microsoft.com/en-us/library/ms144260%28v=sql.105%29.aspx)有区分大小写和不区分大小写的排序规则。我建议您阅读[Collat​​ion and Unicode Support](http://msdn.microsoft.com/en-us/library/ms143503(v=sql.105))。不要开始做或比较，这**不是**正确的方法，并且由于 sarg 能力，它会对性能产生严重影响。`UPPER``LOWER`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T20:27:22.153

您可以使用 COLLATE 关键字在比较中覆盖在数据库或列级别上定义的 COLLATION：

```
SELECT ID FROM maj_Users WHERE UserName = 'Mahdi' COLLATE [collation name] 
```

要查找不区分大小写的阿拉伯语的排序规则，请使用查询

```
select * from fn_helpcollations()
where name like 'Arabic%' and name like '%CI%' 
```

Arabic_CI_AI 或 Arabic_100_CI_AI 似乎是您的正确选择。

# jsf - PrimeFaces 3.3 UTF8 过滤失败

> ID：11487113
> 
> 赞同：6
> 
> 时间：2012-07-14T20:21:12.220
> 
> 标签：jsf, primefaces

我有一个部署到 JBoss AS 7.1 的 PrimeFaces 3.3 / JSF 应用程序。为了显示我的数据，我使用了带有一些过滤标题的**p:dataTable 。**这是代码（缩小来源后）：

```
<p:outputPanel id="custDataTable">            
        <p:dataTable var="item" value="#{customerController.items}" rowKey="#{item.id}"
                        selection="#{customerController.current}" selectionMode="single" id="customersTable">
            <p:column headerText="Surname" sortBy="#{item.surname}" filterBy="#{item.surname}" id="surname">  
                #{item.surname}
            </p:column>  
            <p:column headerText="Age" sortBy="#{item.age}" filterBy="#{item.age}" id="age" styleClass="age">
                #{item.age}
            </p:column>
            <p:column headerText="&nbsp;">
                <p:spacer width="20" height="0" />
                <p:commandButton update=":custForm" ajax="false" action="#{customerController.prepareEdit}" value="edit">
                    <f:setPropertyActionListener value="#{item}" target="#{customerController.current}" />
                </p:commandButton>
            </p:column>
        </p:dataTable>  
</p:outputPanel> 
```

PrimeFaces **p:dataTable**对数字*Age*列的过滤始终有效，但在*Surname*列上会出现奇怪的行为。当支持 bean 的**items**实例变量在*surname*中包含带有 ASCII 数据的元素时，过滤就会起作用。但是当 UTF8 数据存在时，过滤只能部分起作用：

**[1]**我可以在列标题字段中键入我的语言环境的 UTF8 字符，结果确实被过滤了（这是有效的部分）。

**[2]**支持 bean 的**当前**实例变量始终为空。即绑定：

```
selection="#{customerController.current}" 
```

似乎没有工作。我在**CustomerController::prepareEdit方法中添加了一些日志记录，并且在按下***编辑* **p:commandButton**时该值设置为 null 。因此，我无法编辑基于*surname*列过滤的实例（当存在 UTF8 数据时）。*但是，当我在数字年龄*列上过滤或根本不过滤时，可以编辑具有相同 UTF8 数据的相同实例。

为了解决这个问题，我尝试注册一个字符编码过滤器：

```
public class CharacterEncodingFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req,
                             ServletResponse resp,
                             FilterChain chain)
             throws IOException, ServletException {
        req.setCharacterEncoding("UTF-8");
        resp.setCharacterEncoding("UTF-8");
        chain.doFilter(req, resp);
    } 
```

并在我的 web.xml 中注册：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app ...
...
  <filter>                                                                                                                                           
      <filter-name>Character Encoding Filter</filter-name>                                                                                           
      <filter-class>mp.util.CharacterEncodingFilter</filter-class>                                                                                   
  </filter>      
</web-app> 
```

但这也没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T22:50:00.447

您需要确保将请求字符编码设置为 UTF-8。您可以使用映射到涵盖感兴趣请求的 URL 模式的[servlet 过滤器来做到这一点。](https://stackoverflow.com/tags/servlet-filters/info)例如`/*`，或者只是在 .servlet 名称上`FacesServlet`。

```
@WebFilter("/*")
public class CharacterEncodingFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
        request.setCharacterEncoding("UTF-8");
        chain.doFilter(request, response);
    }

    // ...
} 
```

### 也可以看看：

*   [通过 PrimeFaces 输入组件检索到的 Unicode 输入已损坏](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-peditor-component/9839362#9839362)

# javascript - 在 JavaScript 中合并两个数组

> ID：11487123
> 
> 赞同：7
> 
> 时间：2012-07-14T20:22:50.767
> 
> 标签：javascript, jquery

我可以像这样在 JavaScript 中合并两个数组吗？

这些数组：

```
arr1 = ['one','two','three'];
arr2 = [1,2,3]; 
```

进入

```
arr3 = ['one': 1, 'two': 2, 'three' : 3] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T20:24:36.180

```
var arr3 = {};
for (var i = 0; i < arr1.length; i++) {
    arr3[arr1[i]] = arr2[i];
} 
```

请注意，这`arr3`不是数组，而是[对象](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-14T20:30:36.247

你可以使用`Array.prototype.reduce`...

```
var arr3 = arr1.reduce(function(obj, val, i) {
    obj[val] = arr2[i];
    return obj;
}, {}); 
```

***演示：http:*** [//jsfiddle.net/GMxcM/](http://jsfiddle.net/GMxcM/)

```
{
    "one": 1,
    "two": 2,
    "three": 3
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T20:27:39.550

正因为你说`in jQuery`，这里有一个 jQuery`$.each`版本。

```
arr1 = ['one','two','three'];
arr2 = [1,2,3];
arr3 = {};
$.each(arr1, function(i, value){
  arr3[value] = arr2[i];
});
console.log(JSON.stringify(arr3)); 
```

**输出**->

```
{"one":1,"two":2,"three":3} 
```

**[这是一个工作的jsFiddle](http://jsfiddle.net/qZT6n/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T20:25:25.587

环形！

```
var arr1 = ['one','two','three'];
var arr2 = [1,2,3];
var result = {};

for(var i = 0; i < arr1.length; i++) {
    result[arr1[i]] = arr2[i];
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-12T07:28:28.577

更容易：

```
$.merge(arr1, arr2); 
```

# django - django 暂时禁用信号

> ID：11487128
> 
> 赞同：17
> 
> 时间：2012-07-14T20:23:36.720
> 
> 标签：django, model, signals

我在 django 中有一个信号回调：

```
@receiver(post_save, sender=MediumCategory)
def update_category_descendants(sender, **kwargs):

    def children_for(category):
        return MediumCategory.objects.filter(parent=category)

    def do_update_descendants(category):
        children = children_for(category)
        descendants = list() + list(children)

        for descendants_part in [do_update_descendants(child) for child in children]:
            descendants += descendants_part

        category.descendants.clear()
        for descendant in descendants:
            if category and not (descendant in category.descendants.all()):
                category.descendants.add(descendant)
                category.save()
        return list(descendants)

    # call it for update
    do_update_descendants(None) 
```

...但是在信号处理程序的主体中，我`.save()`在同一模型上使用`MediumCategory`。这会导致再次发送信号。我怎样才能禁用它？

完美的解决方案将是一个`with`包含一些“魔法”的声明。

**更新：** 如果有人感兴趣，这是我的最终解决方案：

```
class MediumCategory(models.Model):
    name = models.CharField(max_length=100)
    slug = models.SlugField(blank=True)
    parent = models.ForeignKey('self', blank=True, null=True)
    parameters = models.ManyToManyField(AdvertisementDescriptonParameter, blank=True)
    count_mediums = models.PositiveIntegerField(default=0)
    count_ads = models.PositiveIntegerField(default=0)

    descendants = models.ManyToManyField('self', blank=True, null=True)

    def save(self, *args, **kwargs):
        self.slug = slugify(self.name)
        super(MediumCategory, self).save(*args, **kwargs)

    def __unicode__(self):
        return unicode(self.name)
(...)
@receiver(post_save, sender=MediumCategory)
def update_category_descendants(sender=None, **kwargs):
    def children_for(category):
        return MediumCategory.objects.filter(parent=category)

    def do_update_descendants(category):
        children = children_for(category)
        descendants = list() + list(children)

        for descendants_part in [do_update_descendants(child) for child in children]:
            descendants += descendants_part

        if category:
            category.descendants.clear()
            for descendant in descendants:
                category.descendants.add(descendant)
        return list(descendants)

    # call it for update
    do_update_descendants(None) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-11-27T00:30:20.340

要禁用模型上的信号，一种简单的方法是在当前实例上设置一个属性以防止即将发生的信号触发。

这可以使用一个简单的装饰器来完成，该装饰器检查给定实例是否具有**“skip_signal”**属性，如果有，则阻止调用该方法：

```
from functools import wraps

def skip_signal():
    def _skip_signal(signal_func):
        @wraps(signal_func)
        def _decorator(sender, instance, **kwargs):
            if hasattr(instance, 'skip_signal'):
                return None
            return signal_func(sender, instance, **kwargs)  
        return _decorator
    return _skip_signal 
```

您现在可以这样使用它：

```
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=MyModel)
@skip_signal()
def my_model_post_save(sender, instance, **kwargs):
    instance.some_field = my_value
    # Here we flag the instance with 'skip_signal'
    # and my_model_post_save won't be called again
    # thanks to our decorator, avoiding any signal recursion
    instance.skip_signal  = True
    instance.save() 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-14T20:42:01.273

也许我错了，但我认为`category.save()`您的代码中不需要， add() 就足够了，因为更改是在后代中进行的，但在类别中进行。

此外，为了避免信号，您可以：

*   [断开信号](https://docs.djangoproject.com/en/dev/topics/signals/#disconnecting-signals)并重新连接。
*   使用[更新](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.update)：`Descendant.objects.filter( pk = descendant.pk ).update( category = category )`

# sql - 如何通过红宝石中的聚合函数订购表格？

> ID：11487130
> 
> 赞同：0
> 
> 时间：2012-07-14T20:23:55.027
> 
> 标签：sql, ruby, ruby-on-rails-3, aggregate-functions

我有 2 个属性`opening_date`和`closing_date`一个投标模型。在索引页面上，我显示的是剩余日期，即 ( `closing_date-Date.today`)。但是，剩余日期未保存在数据库中，但我想按剩余日期排序并显示表中的数据。我应该使用什么？有没有一个聚合函数？

我正在使用 Ruby 1.9.2 和 Rails 3.2.2

//TendersController

```
 def index
 @tenders= Tender.where("company_id= ? ", current_user.company.id).order('closing_date') 
/* Here I am querying the tender by closing_date but I dont want to do that. What I wanted is I just want to order by (closing_date-Date.today) which is not in the database but should be done on the fly. i.e the smallest the number it should be at the top of the table (index.html.erb) to notify the user the closing date is sooner than they think
*/
end 
```

//招标模型

```
attr_accessible :title, :buyer_name, :category, :opening_date, :closing_date, :bid_amount, :description, :status 
```

//index.htm.erb

```
<table border="1" id="tender_table" >
  <tr class="table_header">
    <th>Title</th>
    <th>Buyer Name</th>
    <th>Remaining dates</th>
    <th>Status</th>
    <th>Bid amount</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @tenders.each do |tender| %>
<% day_diff= tender.closing_date.to_date-Date.today %>
<tr class=<%= tender.status %>> 
<td><%= tender.title %></td>
    <td><%= tender.buyer_name %></td>
    <td >

        <%  if day_diff < 0 %>
        <FONT COLOR="black"><%= -(day_diff).to_i %> days passed</td>

        <% else if day_diff > 10%>
            <FONT COLOR="green"><%= distance_of_time_in_words(tender.closing_date,Date.today) %></td>                   

        <% end %>
        <% end %>

        <% if day_diff <= 10 and day_diff>=0 %>
                <FONT COLOR="red"><%=distance_of_time_in_words(tender.closing_date,Date.today)+' ' %>left</td>

        <% end %>

    <td><%= tender.status %></td>
    <td><%= tender.bid_amount %></td>

    <%#  tender.description %>

    <td><%= link_to 'Show', tender %></td>
    <td><%= link_to 'Edit', edit_tender_path(tender) %></td>
    <td><%= link_to 'Destroy', tender, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:47:00.593

您可以使用`sort_by`，但这是在 ruby​​ 方面，因此在大型数据集上速度很慢（数据库应该处理）。使用`closing_date > NOW()`和一个`:order_by`.

# java - 在网络爬虫中解析 HTML

> ID：11487139
> 
> 赞同：1
> 
> 时间：2012-07-14T20:25:24.987
> 
> 标签：java, html, html-parsing, web-crawler

除了我之前的问题：[Extended a basic web crawler to filter status codes and HTML 之外](https://stackoverflow.com/questions/11477341/extending-a-basic-web-crawler-to-filter-status-codes-and-html-java/11478367#comment15169719_11478367)，我正在尝试使用以下方法从 HTML 标记中提取信息，在本例中为“标题”：

```
public static void parsePage() throws IOException, BadLocationException 
{
    HTMLEditorKit kit = new HTMLEditorKit();
    HTMLDocument doc = (HTMLDocument) kit.createDefaultDocument();
    doc.putProperty("IgnoreCharsetDirective", Boolean.TRUE);
    Reader HTMLReader = new InputStreamReader(testURL.openConnection()
            .getInputStream());
    kit.read(HTMLReader, doc, 0);

    // Create an iterator for all HTML tags.
    ElementIterator it = new ElementIterator(doc);
    Element elem;

    while ((elem = it.next()) != null) 
    {
        if (elem.getName().equals("title")) 
        {
            System.out.println("found title tag");
        }
    }
} 
```

就告诉我它找到了标签而言，这是有效的。我正在努力解决的是如何提取它们之后/内部包含的信息。

我在网站上发现了这个问题：[Help with Java Swing HTML parsing](https://stackoverflow.com/questions/2969108/help-with-java-swing-html-parsing)，但是它声明它只适用于格式良好的 HTML。我希望有另一种方法。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:24:02.447

尝试使用[乔德](http://jodd.org/doc/jerry/index.html)

```
Jerry jerry = jerry().enableHtmlMode().parse(html);
... 
```

或[HtmlParser](http://htmlparser.sourceforge.net/)

```
Parser parser = new Parser(htmlInput);
CssSelectorNodeFilter cssFilter = new CssSelectorNodeFilter("title");
NodeList nodes = parser.parse(cssFilter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:57:23.507

事实证明，将方法更改为此会产生所需的结果：

```
 {
            HTMLEditorKit kit = new HTMLEditorKit();
            HTMLDocument doc = (HTMLDocument) kit.createDefaultDocument();
            doc.putProperty("IgnoreCharsetDirective", Boolean.TRUE);
            Reader HTMLReader = new InputStreamReader(testURL.openConnection().getInputStream());
            kit.read(HTMLReader, doc, 0);
            String title = (String) doc.getProperty(Document.TitleProperty);
            System.out.println(title);
    } 
```

我想我对迭代器/元素的东西大发雷霆。

# java - 用 Java 将 EXIF 元数据写入 JPEG

> ID：11487141
> 
> 赞同：1
> 
> 时间：2012-07-14T20:25:44.683
> 
> 标签：java, gps, metadata, exif

我想编辑 GPS 标签并将新的 GPS 纬度和经度保存为 JPEG。好的，我找到了一个可以做到的[Sanselan Java 库](http://commons.apache.org/imaging/) 。有一个示例如何编写元数据[WriteExifMetadataExample](http://massapi.com/source/sanselan-0.97-incubator/src/test/java/org/apache/sanselan/sampleUsage/WriteExifMetadataExample.java.html) end 我使用了 changeExifMetadata(File jpegImageFile, File dst) 方法。它有效，但此示例创建了一张具有新 gps 纬度/经度的新照片。我想在同一张照片上设置新的 GPS 值，我该怎么做？

一般来说，我想创建类似于 Picasa（照片查看器 + 谷歌地图）的应用程序。在这种情况下，当我在地图上拖放标记时，我想将新的 gps exif 元数据保存到照片中。所以根据这个例子，它将是每次都创建新照片？愚蠢的......我对Java有一点经验......任何sygestion/example对我来说都非常有用:)

# android - 安卓。动态类加载和 Java 接口

> ID：11487143
> 
> 赞同：0
> 
> 时间：2012-07-14T20:25:48.770
> 
> 标签：android

我几乎完成了我的第一个真正的 Android 项目，一个出租车订购应用程序，只剩下一些小的可用性问题。对于未来的版本，我们计划像一些好的程序那样实现编程代码和资源的内置自动更新。我设法运行了一个简单的示例，基于[http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)，[如何在 android/dalvik 上动态加载 Java 类？](https://stackoverflow.com/questions/3022454/how-to-load-a-java-class-dynamically-on-android-dalvik)[是否可以在运行时从 Android 应用程序动态加载库](https://stackoverflow.com/questions/6857807/is-it-possible-to-dynamically-load-a-library-at-runtime-from-an-android-applicat?rq=1)？. 我不会在这里发布完整的代码，它看起来很像上面的链接。主 apk 充当启动器，它从 SD 卡加载一个 jar 文件，从那里加载一个特殊类，实例化一个对象并通过 Java Reflect API 调用它的方法，这只是调出 ab AlertDialog。

但我希望能够在启动器和加载的库中使用通用的基本 Java 接口，充当 API。所以我试图在启动器和库中声明一个名为 Problem 的接口。代码是这样的：

```
Class<?> problemClass = cl.loadClass("ru.homez.euler.Problem1");
Problem problem = (Problem)problemClass.newInstance();
problem.solve(this); 
```

Dalvik VM 不喜欢这个，我明白了

> java.lang.IllegalAccessError：预验证类中的类引用解析为意外实现

我认为这是因为在启动器和库中都定义了问题接口，我在这里看到了类似的问题。如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:01:28.247

我很幸运地找到了这个：[https://stackoverflow.com/questions/10698049/how-to-dynamically-load-a-jar-with-‌​common-abstract-class](https://stackoverflow.com/questions/10698049/how-to-dynamically-load-a-jar-with-%E2%80%8C%E2%80%8Bcommon-abstract-class)。我从库 jar 中剥离了接口，并在加载器中将其可用性更改为公共（库类加载器没有看到用 apk 加载的包可用类）！问题解决了！

# c# - 为什么 C 和 C++ 中的浮点数/双精度数没有除法余数运算？

> ID：11487145
> 
> 赞同：5
> 
> 时间：2012-07-14T20:25:59.010
> 
> 标签：c#, java, c++, c, division

> **可能重复：**
> [为什么模除法 ( `%`) 仅适用于整数？](https://stackoverflow.com/questions/6102948/why-does-modulus-division-only-work-with-integers)

此代码不适用于 C 和 C++，但适用于 C# 和 Java：

```
float x = 3.4f % 1.1f;
double x = 3.4 % 1.1; 
```

此外，除法余数是在 Python 中为实数定义的。

没有为 C 和 C++ 中的浮点数和双精度数定义此操作的原因是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-14T20:27:45.103

[C 委员会解释了为什么在Rationale](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)文档中没有用于浮动类型的余数运算符的立场：

> *（6.5.5 乘法运算符）* C89 委员会拒绝扩展 % 运算符以处理浮点类型，因为这种用法会重复 fmod 提供的功能（参见 §7.12.10.1）。

# android - Eclipse Juno 上的 Android 4.1 API 16

> ID：11487148
> 
> 赞同：0
> 
> 时间：2012-07-14T20:26:31.180
> 
> 标签：android, android-4.2-jelly-bean

我在 youtube 上免费找到了解释 eclipse Helios 上的 Android 2.2 API 8 的 android 教程。我的问题是，如果我想在 eclipse Juno 上使用 API 16 学习 Android 4.1 可以吗？如果没有，是否有我可以购买的书籍或其他资源可以用来学习 Android 4.1？最后，Android 4.1 API 16 是否与其他 API 向后兼容，它是否是最好的学习 API？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:06:01.303

您可以使用任何 SDK 级别和版本的 Eclipse（大于或等于 Helios）来开发 Android 应用程序。

没有任何真正“最佳”的 SDK 级别可供学习或开发，您实际上应该同时开发多个级别。它们每个都比上一个有所变化，因此在您工作时请记住这一点。根据 I/O 的小组讨论，Google 认为最好的做法是使用您支持的最高 SDK 作为目标（对于我正在开发的应用程序，即 4.1 Jelly Bean），并为最低 API 设置最低 SDK 级别您支持的级别（我的应用程序中的 2.2 Froyo）。请记住，您可能必须为不同的 API 级别提供不同的代码，具体取决于每个 SDK 级别中可用的内容。

所有 SDK 级别都向后兼容以前的 SDK 级别，但每个级别通常会添加您在旧 SDK 级别上无法使用的功能，或者如果没有 Google 支持库的帮助（可以轻松添加到您的项目Eclipse）或其他一些外部库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:07:01.127

目前，您可能希望坚持使用 Indigo。ADT在 Juno 中运行时[存在许多问题](https://code.google.com/p/android/issues/list?can=2&q=eclipse%20juno&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&cells=tiles)，其中最主要的是[用于剪切/复制/粘贴的键盘快捷键不起作用](https://code.google.com/p/android/issues/detail?id=34696)。

我使用的是 Fedora 17，它默认提供 Juno。为了使用当前版本的 ADT，我必须卸载 Juno 并从 eclipse.org 下载 Indigo 的副本。

# objective-c - 我的应用程序没有更新只读Core Data sqlite数据库的新版本

> ID：11487151
> 
> 赞同：1
> 
> 时间：2012-07-14T20:27:02.217
> 
> 标签：objective-c, core-data

**====我的解决方案====** 我通过将数据库存储在主包中解决了这个问题，并在每次更新应用程序时更改数据库的名称。

我确实考虑过刷新模型等，但并没有真正按照我的意愿工作。

[我是如何解决这个问题的](https://stackoverflow.com/questions/11492471/update-read-only-core-data-sqlite-in-main-bundle)

**====原来的问题====**

我很抱歉我之前以不同的格式问过这个问题，但我无法解决它，可能是因为我问这个问题的方式。我确实删除了旧问题。

我有一个使用 Core Data sqlite 只读/只读数据库的应用程序，我正在尝试使用数据库的新版本（嵌入在记录中的版本号）更新应用程序。无论我做什么，除了手动清理目标和重置模拟器，它仍然读取旧数据库。我需要能够通过代码做到这一点。

在初始设计期间，我发布了以下内容以尝试解决相同的问题：[初始设计](https://stackoverflow.com/questions/6284659/how-to-update-a-pre-populated-core-data-sqlite3-db-in-appstore)。现在数据库太大了，第一次开始构建它需要很多时间。

过程：

> A.) 我将新的数据库版本添加到 XCODE 项目中，并通过 Xcode 手动将其添加到包中
> 
> B.) 我检查使用的是什么版本的数据库
> 
> C.）如果有新数据库，我删除文档目录中的旧数据库，然后将新版本从主包复制到文档目录
> 
> D.）在附加的代码中，我还删除了缓存目录并重新创建它，我发现许多帖子指出缓存可能是原因。这仅用于测试，但仍包含在代码中

尽管如此，该应用程序仍然无法访问更新的 sqlite 数据库。

我在主包中加载了一个新的数据库版本，我有一个版本参数“EEEEEE”，当我读取当前数据库时，它具有“SSSSSS”参数，因此应该更新数据库。

我一直在解决这个问题，并在网上搜索了很长时间，我就是不明白出了什么问题。为什么它不访问文档目录中的新数据库。

我很感激我能得到的所有帮助。我希望代码看起来不会很奇怪，因为我已经包含了我用来尝试了解正在发生的事情的 NSLog。

跟踪（NSLog）：

```
applicationDidFinishLaunchingWithOptions

readQuestion

persistentStoreCoordinator

==>PARAMETER is EEEEEE (000000)

==> Update needed

=======================
====BEFORE REPLACE====
===>CURRENT: SSSSSS: 999999
=======================
replaceDatabase function
=======================

=======================
     DELETE CACHE
=======================

Remove successful

=======================
   CREATE NEW CACHE
=======================

===============================
REMOVE sqlite FROM DOCUMENT DIR
===============================

removeItemAtPath:dbDocumentsPath: /Users/xxxxxx/Library/Application Support/iPhone Simulator/5.1/Applications/912962FC-933E-4305-971B-FF094BBD9051/Documents/database.sqlite

=====================================
CHECK IF sqlite EXIST IN DOCUMENT DIR
=====================================

===FILE DOES NOT EXIST===

========================================
MOVE sqlite FROM BUNDLE TO DOCUMENTS DIR
========================================

==>copyItemAtPath:dbBundlePath<<
====================================
CHECK IF sqlite EXIST IN DOCUMENT DIR
=====================================

===FILE EXIST===

readQuestion

=======================
=====AFTER REPLACE=====
=======================
Updated database is SSSSSS

========>STOP<========= 
```

这是 delegate.m 中的代码，“didFinishLaunchingWithOptions”：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
NSLog(@"applicationDidFinishLaunchingWithOptions");
NSLog(@" ");

[window addSubview:navigationController.view];
[window makeKeyAndVisible];

//==CHECK IF DATABASE NEEDS TO BE UPDATED==//
//====Check if database needs to be refreshed====//

AccessQuestionsDB *refreshDB_function = [AccessQuestionsDB new];
qArray = [refreshDB_function readQuestion: 999999];
NSLog(@" ");

//Tell what language DB 
if ([k_DBVERSION isEqualToString:@"999999"]) {
    NSLog(@"==>PARAMETER is SSSSSS (999999)");
} else {
    NSLog(@"==>PARAMETER is EEEEEE (000000)");
}
NSLog(@" ");

//==== CHECK IF DATABASE NEEDS TO BE UPDATED ====//
if ([[qArray objectAtIndex:2] isEqualToString: k_DBVERSION]) {
    // No update needed
    NSLog(@"==> No update needed");
    NSLog(@" ");
}
else {
    NSLog(@"==> Update needed");
    NSLog(@" ");
    NSLog(@" ");
    NSLog(@"=======================");
    NSLog(@"====BEFORE REPLACE====");
    if ([[qArray objectAtIndex:2] isEqualToString:@"000000"]) {
        NSLog(@"===>CURRENT: EEEEEE: %@", [qArray objectAtIndex:2]);
    } else {
        NSLog(@"===>CURRENT: SSSSSS: %@", [qArray objectAtIndex:2]);
    }

    [self replaceDatabase];
}

qArray = [refreshDB_function readQuestion: 999999];
NSLog(@" ");
NSLog(@" ");
NSLog(@"=======================");
NSLog(@"=====AFTER REPLACE=====");
NSLog(@"=======================");
if ([[qArray objectAtIndex:2] isEqualToString:@"000000"]) {
    NSLog(@"Updated database is EEEEEE");
} else {
    NSLog(@"Updated database is SSSSSS");
}

NSLog(@" "); 
NSLog(@"========>STOP<=========");
NSLog(@" ");

exit(0); //>>>>STOP HERE DURING TESTING

return YES;
} 
```

替换数据库：

```
- (void)replaceDatabase {
NSLog(@"=======================");
NSLog(@"replaceDatabase function");
NSLog(@"=======================");
NSLog(@" ");

NSFileManager *fileManager = [NSFileManager defaultManager];

// remove old sqlite database from documents directory
NSURL *dbDocumentsURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"database.sqlite"];
NSString *dbDocumentsPath = [dbDocumentsURL path];

//====Cache directory testing====//
//====This is just for testing====//

//===============================//
NSLog(@"=======================");
NSLog(@"    DELETE CACHE");
NSLog(@"=======================");
NSLog(@" ");
if ([fileManager removeItemAtPath: [NSHomeDirectory() stringByAppendingString:@"/Library/Caches"] error: NULL]  == YES)
    NSLog (@"Remove successful");
 else 
    NSLog (@"Remove failed");

NSLog(@"=======================");
NSLog(@"    CREATE NEW CACHE");
NSLog(@"=======================");
NSLog(@" ");    

[fileManager createDirectoryAtPath: [NSHomeDirectory() stringByAppendingString:@"/Library/Caches"] withIntermediateDirectories:NO attributes:nil error:nil];

//===============================//
NSLog(@"===============================");
NSLog(@"REMOVE sqlite FROM DOCUMENT DIR");
NSLog(@"===============================");
NSLog(@" ");

if ([fileManager fileExistsAtPath:dbDocumentsPath]) {
    NSError *error = nil;
    [fileManager removeItemAtPath:dbDocumentsPath error:&error];
    NSLog(@"removeItemAtPath:dbDocumentsPath: %@",dbDocumentsPath);
    NSLog(@" ");

    if (error) {
        NSLog(@"Error deleting sqlite database: %@", [error localizedDescription]);
    }
} else {
    NSLog(@"file does not ExistsAtPath:dbDocumentsPath: %@",dbDocumentsPath);
    NSLog(@" ");
}

NSLog(@"=====================================");
NSLog(@"CHECK IF sqlite EXIST IN DOCUMENT DIR");
NSLog(@"=====================================");
NSLog(@" ");
if ([fileManager fileExistsAtPath:dbDocumentsPath]) {
    NSLog(@"===FILE EXIST===");
} else {
    NSLog(@"===FILE DOES NOT EXIST===");
}
 NSLog(@" ");    

// move new sqlite database from bundle to documents directory
NSLog(@"========================================");
NSLog(@"MOVE sqlite FROM BUNDLE TO DOCUMENTS DIR");
NSLog(@"========================================");
NSLog(@" ");
NSString *dbBundlePath = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"sqlite"];
if (dbBundlePath) {
    NSError *error = nil;
    [fileManager copyItemAtPath:dbBundlePath toPath:dbDocumentsPath error:&error];
    NSLog(@"==>copyItemAtPath:dbBundlePath<<");
    if (error) {
        NSLog(@"Error copying sqlite database: %@", [error localizedDescription]);
    }
}

NSLog(@"=====================================");
NSLog(@"CHECK IF sqlite EXIST IN DOCUMENT DIR");
NSLog(@"=====================================");
NSLog(@" ");
if ([fileManager fileExistsAtPath:dbDocumentsPath]) {
    NSLog(@"===FILE EXIST===");
} else {
    NSLog(@"===FILE DOES NOT EXIST===");
}
NSLog(@" ");
} 
```

持久存储协调器：

```
// If the coordinator doesn't already exist, it is created and the application's store added to it.
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
NSLog(@"persistentStoreCoordinator");

if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"database.sqlite"];
NSError *error = nil;
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}  

    return persistentStoreCoordinator;
} 
```

阅读问题：

```
- (NSMutableArray *)readQuestion: (int)questionNr {

NSLog(@"readQuestion");

NSMutableArray *read_Question = [[NSMutableArray alloc] initWithCapacity: 0];

NSError *error;
//=========PREPARE CORE DATA DB===========//
if (managedObjectContext == nil) { managedObjectContext = [(xxxxxAppDelegate *)
                                                           [[UIApplication sharedApplication] delegate] managedObjectContext]; }
// Define qContext
NSManagedObjectContext *qContext = [self managedObjectContext];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription 
                               entityForName:@"questions" inManagedObjectContext:qContext];
[fetchRequest setEntity:entity];

NSString *qNR = [NSString stringWithFormat:@"%d", questionNr];

if (questionNr == 999999) { // This is the call to check if database should be updated
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(question = %@)", @"Hur mycket är 37532 * 3?"];
    [fetchRequest setPredicate: pred];
}
else {
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(idQ = %@)", qNR];
    [fetchRequest setPredicate: pred];
}

NSManagedObject *matches = nil;

NSArray *objects = [qContext executeFetchRequest:fetchRequest error:&error];

if ([objects count] == 0) {     // If no match refresh database
    [read_Question addObject:@"Update_DB"];
    [read_Question addObject:@"Update_DB"];
    [read_Question addObject:@"Update_DB"];
    [read_Question addObject:@"Update_DB"];
} else {
    matches = [objects objectAtIndex:0];
    [read_Question addObject:[matches valueForKey:@"question"]];
    [read_Question addObject:[matches valueForKey:@"qRightAnswer"]];
    [read_Question addObject:[matches valueForKey:@"qWrongAnswer1"]];
    [read_Question addObject:[matches valueForKey:@"qWrongAnswer2"]];
}

[fetchRequest release];

return [read_Question autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:27:04.050

嗯，有趣的问题。不过我有一个理论。首先，如果我正确阅读了您的代码，您将获得一个持久存储协调器以找出数据库版本。这是创建一个引用旧 sqlite 文件的持久存储协调器。这是我不确定的部分。我怀疑由于它具有旧文件的句柄，即使您删除它，持久存储协调器仍然指的是旧文件。您可能想尝试的一件事是在删除和替换 sqlite 文件后取消持久存储协调器和托管对象上下文。此外，我会尝试简单地假设 sqlite 已过时并在初始化 Persistent Store Coordinator 和 Managed Object Context 之前替换它。

# ms-access - 从访问中附加查询

> ID：11487152
> 
> 赞同：0
> 
> 时间：2012-07-14T20:27:11.210
> 
> 标签：ms-access, asp-classic

我有这样的访问查询：

```
insert into table1
select * from table2 
```

我希望用户从 asp 网页更新上述查询。Table2 是一个链接的 excel 表，用户每天在 excel 中更新。

在一天结束时，我希望他们使用 asp 网页将其更新到主访问数据库到 table2。我尝试了下面的代码，但出现错误“**操作查询不能用作行源”**

```
 <% set conn = create.object ("ADODB.connection")
 conn open "odbcconnectionname"
 sql = "appendquery"
 set rs = create.recordset ("ADODB.recordset")
 conn.rs sql, conn %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:47:31.010

就像是：

```
Set objConn=Server.CreateObject("ADODB.Connection")

objConn.Open  "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & dbfile & ";"

Set cmd = Server.CreateObject("ADODB.Command")

cmd.ActiveConnection = objConn
cmd.CommandType = 4 ''adCmdStoredProc
cmd.CommandText = "appendquery" ''stored query
cmd.Execute recs

Response.Write recs & " updated" 
```

您收到的错误或多或少意味着它所说的，您必须执行一个操作查询，您不能将它用于记录集。

# date - 以指定格式获取日期的批处理命令

> ID：11487159
> 
> 赞同：3
> 
> 时间：2012-07-14T20:28:18.887
> 
> 标签：date, batch-file

***是否可以指定批处理命令日期***返回的日期格式（可能是参数或类似方式），或者它仅取决于 Windows 区域设置？我想要的是在我调用***日期***时以某种方式指定日期格式，以便批处理脚本可以提取日、月和年并将它们保存在变量中。问题是有些机器返回 dd/MM/yyyy 和一些 MM/dd/yyyy，所以在一种情况下，日期和月份会被切换。有些还使用点作为分隔符。我可以以某种方式告诉***日期***返回例如 MM/dd/yyyy，这样我就可以区分哪个是日期，哪个是月份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:54:04.427

我不确定这些是否一定会解决您的问题，但请查看链接[http://commandline.co.uk/lib/treeview/index.php](http://commandline.co.uk/lib/treeview/index.php)上的日期和时间函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:25:03.097

```
c:\> WMIC Path Win32_LocalTime Get 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T18:28:50.430

命令

```
for /f %%a in ('wmic path win32_localtime get /format:list ^| findstr "="') do (set %%a) 
```

创建以下环境变量：

天、DayOfWeek、小时、毫秒、分钟、月、季度、秒、WeekInMonth、年

可以照常访问：`%Year%`

要查看使用的值`wmic path win32_localtime`

**注意：**这些值可以为空。在我的桌面上，毫秒没有任何价值。

**注意 2：**如果您在命令行中使用它，请替换`%%`为`%`

此答案的灵感[将 Windows 批处理文件变量设置为星期几](https://stackoverflow.com/questions/11364147/setting-a-windows-batch-file-variable-to-the-day-of-the-week#comment15181644_11367625)

# python - Python 效率/优化项目 Euler #5 示例

> ID：11487161
> 
> 赞同：6
> 
> 时间：2012-07-14T20:28:33.543
> 
> 标签：python, performance

[我为Project Euler #5](http://projecteuler.net/problem=5)编写了这个解决方案。

```
import time
start_time = time.time()

def ProjectEulerFive (m = 20):

    a = m
    start = 2
    while (m % start) == 0:
        start += 1

    b = start
    while b < m:
        if ( a % b) != 0:
           a += m
           b = start
           continue
        else:
            b += 1
    return a

import sys

if (len(sys.argv)) > 2:
    print "error: this function takes a max of 1 argument"
elif (len(sys.argv)) == 2:
    print ProjectEulerFive(int(sys.argv[1]))
else:                          
    print ProjectEulerFive();

print "took " + str(time.time() - start_time ) + " seconds" 
```

我的系统大约需要 8.5 秒。

然后我决定与其他人的解决方案进行比较。我在 Python 中找到了这个 [Project Euler 5 - 如何优化我的解决方案？](https://stackoverflow.com/questions/8024911/project-euler-5-in-python-how-can-i-optimize-my-solution).

我没有想到独特的素数分解。

但无论如何，一个所谓的优化的基于非质因数分解的解决方案在那里发布：

```
import time
start_time = time.time()

check_list = [11, 13, 14, 16, 17, 18, 19, 20]

def find_solution(step):
    for num in xrange(step, 999999999, step):
        if all(num % n == 0 for n in check_list):
            return num
    return None

if __name__ == '__main__':
    solution = find_solution(20)
    if solution is None:
        print "No answer found"
    else:
        print "found an answer:", solution

    print "took " + str(time.time() - start_time ) + " seconds" 
```

我的系统大约需要 37 秒

即使我不必要地检查了 3、4、5、6、7、8、9、10 和 12 的整除性，我的代码也快了大约 4 倍。

我是 python 新手，无法看到效率低下的原因。

**编辑：**

我又做了一个测试。

```
import time
start_time = time.time()

def ProjectEulerFive (m = 20):
    ls = [11, 13, 14, 15, 16, 17, 18, 19]
    a = m
    i = 0
    while i < len(ls):
        if ( a % ls[i]) != 0:
            a += m
            i = 0
            continue
        else:
            i += 1
    return a

print ProjectEulerFive();                           
print "took " + str(time.time() - start_time ) + " seconds" 
```

我的系统需要 6 秒，但这是：

```
import time
start_time = time.time()

def ProjectEulerFive (m = 20):

    a = m
    start = 11

    b = start
    while b < m:
        if ( a % b) != 0:
           a += m
           b = start
           continue
        else:
            b += 1
    return a

print ProjectEulerFive()
print "took " + str(time.time() - start_time ) + " seconds" 
```

大约需要 3.7 秒

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T14:59:42.567

我看到虽然已经发布了一个更快的解决方案，但实际上没有人回答这个问题。事实上，这是一个相当难以回答的问题！基本的解释是函数调用相对昂贵。不过，为了使这个结论具有说服力，我必须对 Python 内部进行相当深入的研究。做好准备！

首先，我`ProjectEulerFive`将`find_solution`使用[`dis.dis`](http://docs.python.org/library/dis.html#module-dis). 这里有很多内容，但只需快速扫描即可确认您的代码*根本没有调用任何函数*：

```
>>> dis.dis(ProjectEulerFive)
  2           0 LOAD_FAST                0 (m)
              3 STORE_FAST               1 (a)

  3           6 LOAD_CONST               1 (11)
              9 STORE_FAST               2 (start)

  4          12 LOAD_FAST                2 (start)
             15 STORE_FAST               3 (b)

  5          18 SETUP_LOOP              64 (to 85)
        >>   21 LOAD_FAST                3 (b)
             24 LOAD_FAST                0 (m)
             27 COMPARE_OP               0 (<)
             30 POP_JUMP_IF_FALSE       84

  6          33 LOAD_FAST                1 (a)
             36 LOAD_FAST                3 (b)
             39 BINARY_MODULO       
             40 LOAD_CONST               2 (0)
             43 COMPARE_OP               3 (!=)
             46 POP_JUMP_IF_FALSE       71

  7          49 LOAD_FAST                1 (a)
             52 LOAD_FAST                0 (m)
             55 INPLACE_ADD         
             56 STORE_FAST               1 (a)

  8          59 LOAD_FAST                2 (start)
             62 STORE_FAST               3 (b)

  9          65 JUMP_ABSOLUTE           21
             68 JUMP_ABSOLUTE           21

 11     >>   71 LOAD_FAST                3 (b)
             74 LOAD_CONST               3 (1)
             77 INPLACE_ADD         
             78 STORE_FAST               3 (b)
             81 JUMP_ABSOLUTE           21
        >>   84 POP_BLOCK           

 12     >>   85 LOAD_FAST                1 (a)
             88 RETURN_VALUE 
```

现在让我们看看`find_solution`：

```
>>> dis.dis(find_solution)
  2           0 SETUP_LOOP              58 (to 61)
              3 LOAD_GLOBAL              0 (xrange)
              6 LOAD_FAST                0 (step)
              9 LOAD_CONST               1 (999999999)
             12 LOAD_FAST                0 (step)
             15 CALL_FUNCTION            3
             18 GET_ITER            
        >>   19 FOR_ITER                38 (to 60)
             22 STORE_DEREF              0 (num)

  3          25 LOAD_GLOBAL              1 (all)
             28 LOAD_CLOSURE             0 (num)
             31 BUILD_TUPLE              1
             34 LOAD_CONST               2 (<code object <genexpr> at 
                                            0x10027eeb0, file "<stdin>", 
                                            line 3>)
             37 MAKE_CLOSURE             0
             40 LOAD_GLOBAL              2 (check_list)
             43 GET_ITER            
             44 CALL_FUNCTION            1
             47 CALL_FUNCTION            1
             50 POP_JUMP_IF_FALSE       19

  4          53 LOAD_DEREF               0 (num)
             56 RETURN_VALUE        
             57 JUMP_ABSOLUTE           19
        >>   60 POP_BLOCK           

  5     >>   61 LOAD_CONST               0 (None)
             64 RETURN_VALUE 
```

很快就很清楚（a）这段代码不那么复杂，但是（b）它也调用了三个不同的函数。第一个只是对 的一次调用`xrange`，但其他两个调用出现在最外层的 for 循环中。第一个调用是调用`all`; 我怀疑第二个是调用生成器表达式的`next`方法。但是功能是*什么*并不重要。重要的是它们在循环内被调用。

现在，您可能会想“有什么大不了的？” 这里。这只是一个函数调用；这里或那里几纳秒——对吧？但事实上，这些纳秒加起来。由于最外层循环总共进行了`232792560 / 20 == 11639628`循环，因此任何开销都会乘以*超过 1100 万个*。使用 in 中的`%timeit`命令进行快速计时`ipython`表明，一个函数调用（全部单独）在我的机器上花费了大约 120 纳秒：

```
>>> def no_call():
...     pass
... 
>>> def calling():
...     no_call()
...     
>>> %timeit no_call()
10000000 loops, best of 3: 107 ns per loop
>>> %timeit calling()
1000000 loops, best of 3: 235 ns per loop 
```

因此，对于出现在 while 循环中的每个函数调用，都会`120 nanoseconds * 11000000 = 1.32 seconds`花费更多时间。如果我的第二个函数调用是对生成器表达式的`next`方法的调用是正确的，那么该函数会被调用更多次，每次通过genex 迭代时调用一次——平均每个循环可能3-4 次。

现在来检验这个假设。如果函数调用是问题所在，那么消除函数调用就是解决方案。让我们来看看...

```
def find_solution(step):
    for num in xrange(step, 999999999, step):
        for n in check_list:
            if num % n != 0:
                break
        else:
            return num
    return None 
```

这是它的一个版本，几乎与原始版本使用语法`find_solution`所做的完全一样。`for/else`唯一的函数调用是外部函数 to `xrange`，它不应该引起任何问题。现在，当我对原始版本计时时，花了 11 秒：

```
found an answer: 232792560
took 11.2349967957 seconds 
```

让我们看看这个新的改进版本管理什么：

```
found an answer: 232792560
took 2.12648200989 seconds 
```

`ProjectEulerFive`这比我机器上最快版本的性能还要快：

```
232792560
took 2.40848493576 seconds 
```

一切都变得有意义了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T21:48:30.123

这应该不会花费任何时间：

```
def gcd(a, b):
    if (b == 0): return a
    else: return gcd(b, a%b)

def lcm(a, b):
    return abs(a*b) / gcd(a, b)

def euler5(n):
    if (n == 1): return 1
    else: return lcm(n, euler5(n-1))

print euler5(20) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T20:41:59.340

不是您的问题的答案（因此是社区 wiki），但这是一个有用的计时功能装饰器：

```
from functools import wraps
import time

def print_time(f):
    @wraps(f)
    def wrapper(*args, **kwargs):
        t0 = time.time()
        result = f(*args, **kwargs)
        print "{0} took {1}s".format(f.__name__, time.time() - t0)
        return result
    return wrapper 
```

用法如下：

```
@print_time
def foo(x, y):
    time.sleep(1)
    return x + y 
```

在实践中：

```
>>> foo(1, 2)
foo took 1.0s
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T18:10:14.620

你可以使用素数来解决这个问题。在 0.0004 秒内求解 n=20，在 0.0011 内求解 n=50。

```
from math import sqrt
import time
num = int(input("Number: "))
start_time = time.clock()

def is_prime(n):
    if(n == 2 or n == 3):
        return True
    elif(n < 2 or n % 2 == 0):
        return False
    for i in range(3, int(sqrt(n))+1, 2):
        if(n % i == 0):
            return False
    return True

def decompose(n):
    if(n == 1 or n == 0):
        return [n]
    l = []
    residue = n
    while(residue != 1):
        for i in range(1, residue+1):
            if(residue%i==0 and is_prime(i)):
                l.append(i)
                residue //= i
                break
    return l

l = []
for i in range(1, num):
    d = decompose(i)
    for n in d:
        if(l.count(n) < d.count(n)):
            l += [n]*(d.count(n)-l.count(n))
result = 1
for i in l:
    result*=i
print(result)

print("time: ", time.clock()-start_time) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-12T16:17:42.520

这是我的实现

我理解原因，但希望能对它背后的数学有所启发

如果我写下所有不大于最大可除数的素数，则替换包含小于我的限制的素数除数的因子子集。

```
from functools import reduce

def divisible_by_all_up_to(limit):
    def is_prime(num):
        if num == 2 or num == 3:
            return True
        if num % 2 == 0 or num < 2:
            return False
        for i in range(3, num):
            if num % i == 0:
                return False
        return True
    primes = [i for i in range(limit) if is_prime(i) == True]
    mult = []
    for index, value in enumerate(primes):
        while value * value < limit:
            value = value * value
        mult += [value]
    return mult

ans = divisible_by_all_up_to(20)

resp = reduce(lambda x, y: x*y, ans) 
```

# erlang - Erlang 与 rebar 一起发布：一些问题

> ID：11487163
> 
> 赞同：3
> 
> 时间：2012-07-14T20:29:03.413
> 
> 标签：erlang, release, rebar

1.当我尝试使用以下方式运行我的应用程序时：

```
# ./rebar clean compile generate
# rel/master/bin/master console 
```

我收到以下错误：

```
application: app_name
exited:{shutdown,{app_name}, start, [normal, []]}}
type:permanent
{"kernel pid terminated", application_controler, "{application_start_failure,app_name 
.......... 
```

所以我无法启动我的应用程序。

2\. 此外，在构建发布之后

```
# rel.... start
# rel.... stop 
```

将导致错误：“节点 master@127.0.0.1 未响应 pings”

尽管

```
# rel.... stop <- the same error as above
# rel.... start
# rel.... stop <- is fine (outputs "ok") 
```

* * *

**应用结构：**

```
deps ebin rebar rebar.config src rel 
```

rebar.config

```
{erl_first_files, []}.
{cover_enabled, true}.
{erl_opts, [debug_info]}.
{sub_dirs, ["rel"]}.
{deps_dir, ["deps]}.
{deps, [some_stable_modules_from_github]}. 
```

reltool.config（来自`rel`文件夹）

```
{sys, [
     {lib_dirs, ["../..", "../deps"]},
     {rel, "master", "1",
        [app_name, 
         kernel,
         stdlib,
         stdlib,
         sasl,
         some_stable_modules]},
     {rel, "start_clean", "", [kernel, stdlib]},
     {boot_rel, "master"},
     {profile, embedded},
     {excl_sys_filters, ["^bin/.*", "^erts.*/bin/{dialyzer|typer)"])},
     {app, sasl, ["incl_cond", include]},
     {app, hipe, ["incl_cond", exclude]},
     {app, some_stable_module, ["incl_cond", include]},
     {app, master, ["incl_cond", include]}
   ]}.

{target_dir, "master"}.

{overlay, [
          {mkdir, "log/sasl"},
          {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
          {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
          {copy, "files/master", "bin/master"},
          {copy, "files/app.config", "etc/app.config"},
          {copy, "files/vm.args", "etc/vm.args"}
          ]}. 
```

两个问题：

1.  为什么我可以使用 启动我的应用程序`rel/master/bin/master console`？

2.  为什么我收到“节点未响应 ping”错误？

谢谢！

PS。一般来说，它是使用钢筋创建的基本应用程序。我刚刚添加了几个模块来使用 mongodb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:29:56.693

从您的 reltool.config 中，看起来 app_name 应用程序未包含在发行版中。请确保：

```
{app, app_name, ["incl_cond", include]}, 
```

在那儿。如果这没有帮助，请尝试手动启动您的应用程序。例如：

```
erl -pa ebin deps/whatever/ebin ...
> application:start(app_name). 
```

这应该会给你一个关于版本中错误/缺失的提示。

更新：如果您无法手动启动应用程序，请尝试调试它。假设你在你的应用模块中启动了一个 root supervisor，如果你手动启动这个 supervisor，会发生什么？你能发布你的 .app/.app.src 文件吗？您的应用程序模块的启动功能？你的主管最终的 start_link 功能？

**PS：**您的 reltool.config 中有两个“stdlib”条目

# jquery - 在 MVC3 中使用 JQuery 渲染局部视图

> ID：11487164
> 
> 赞同：1
> 
> 时间：2012-07-14T20:29:09.050
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, partial-views

我有一些记录。单击每条记录后，需要在手风琴中显示信息。

该信息应该动态地从数据库中获取。

到目前为止我所做的是

创建局部视图。那是假设显示详细信息。

单击记录后，我调用 jquery 方法并在控制器上执行我的方法。控制器以 Json 的形式返回对象（或任何其他东西，欢迎提出任何建议）。

> 现在 JQuery 方法有那个（模型）对象，但我怎么能用它来渲染我的部分视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:33:21.427

> 我有一些记录。单击每条记录后，需要在手风琴中显示信息。

有两种方法可以实现您的愿望。我想您必须从提供有关记录的详细信息的操作中返回部分视图。

1.  监听锚链接的点击事件，在事件内部你必须框住 url，然后`$("#accordion-container-1").load(url)`.

前任。

从您的评论中，我看到您必须将`orderNo`操作作为参数传递。因此，您必须将其设置`orderNo`为 id 或将其附加到某个字符串（以避免元素中出现重复的 id）并设置为锚链接的 id。

然后，

```
$(function(){

  $("a.somecssclass").click(function(){

     var orderNo = this.id;

     var url = "/ControllerName/Tracking?orderNo=" + orderNo;

     // this will call the action through ajax and update the container with the
     // partial view's html.
     $("#divToLoadTheHtml").load(url); 
  });   
}); 
```

1.  使用 MVC 支持的 ajax 操作链接。您可以使用通过 ajax 调用某些控制器操作来创建操作链接`Ajax.ActionLink`，并将 html 结果更新到容器。

前任。

在这种情况下，当您通过循环集合生成记录时，您必须通过方法创建链接（单击时必须通过 ajax 加载内容）`Ajax.ActionLink`，并且您还必须包含`jquery'unobtrusive.ajax.js`库。

```
@foreach(var m in Collection)
{
    .. other stuff

    @Ajax.ActionLink(link name, "Action", new { orderNo = m.something? }, 
    new AjaxOptions
    { 
        UpdateTargetId = "somediv" // set the div name where you want to load the partial view
    });
} 
```

**根据 OP 的评论更新**

你的动作方法应该是这样的，

```
public PartialViewResult Tracking(int orderNo) 
{ 
     var manager = new OrderManager(); 
     return PartialView(manager.Tracking(orderNo));
} 
```

您应该有一个带有名称`Tracking.cshtml`的局部视图，并且在局部视图中您必须创建 html 代表您正在谈论的记录的详细信息。

**跟踪.cshtml**

```
@model TrackingModel

<div>
  @Html.DisplayFor(...)
  ...
</div> 
```

当您`Tracking`从 jquery 或通过 ajax 操作（如前所述）调用操作时，您将获得部分视图 html，您可以将其加载到特定容器（如 div）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:38:13.180

当您需要提交一些表单并将部分视图呈现为结果时，这是一种基本方法

```
function GetView(){
if ($('#MyHtmlForm').valid()){
    $.ajax(
    {
      type: "POST",
      url: $('#MyHtmlForm').attr("action"), 
      data: $('#MyHtmlForm').serialize(),
      success: function(result) {
        //Render the partial view
        }
      },
      error: function(req, status, err) {
        //handle the error
      }
    });
} 
```

}

这用于通过 json 格式获取行的基本详细信息，因此使用 javascritp 生成 html

```
function GetSomeData() {
var cod = $('.row').val();
$.getJSON('@Url.action("ActionName","Controller")', { cod: cod }, function (result) {
    //Render data
}); 
```

}

# javascript - 使用 Javascript 调整 Ruby-on-Rails 模式对话框中的滚动条

> ID：11487167
> 
> 赞同：1
> 
> 时间：2012-07-14T20:29:29.627
> 
> 标签：javascript, ruby-on-rails-2

我有一个 Ruby-on-Rails Web 应用程序，它有一个简单的弹出模式对话框。

当用户单击模态对话框中的按钮时，我想使用 JavaScript 函数来修改模态对话框中其他组件的外观。

我已经能够用几个组件做到这一点；我可以隐藏和/或启用 JavaScript 函数中的各种组件。

不过，我无法做的一件事是调整模态对话框的滚动条。具体来说，当用户单击按钮时，我需要将滚动条重新设置到模式对话框的最顶部。

我在网上搜索过，并不是没有找到解决这个问题的一些可能的方法；只是到目前为止，他们都没有奏效。我试过使用scrollTo、scroll、scrollTop、document.body.scrollTop。到目前为止，这些都没有奏效。

有什么建议么？

提前致谢， 蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T19:14:36.023

我知道这是一篇旧帖子，但如果你做这样的事情，它应该修复它。

```
$(selector_for_button).click(function({
    $(selector_for_container_with_scroll_bar)[0].scrollTop = 0
}) 
```

在哪里：

selector_for_button = 按钮被点击

selector_for_container_with_scroll_bar = 滚动条所属的 div。

# asp.net - 在 App_Data 中的 MDF 文件上运行 SQL 脚本

> ID：11487170
> 
> 赞同：2
> 
> 时间：2012-07-14T20:29:51.280
> 
> 标签：asp.net, sql, ssms, mdf, app-data

我有以下设置：

*   开发：我自己的计算机使用带有连接字符串的 MDF 文件，该连接字符串引用我的 app_data 文件夹。
*   生产：具有自己的 SQL 数据库的在线服务器

当我想在我的系统中创建一个新的表/字段时，我会在部署中创建它，然后在没有数据的情况下在生产环境中运行这些脚本。

现在，我处于相反的情况：我从生产服务器生成了脚本，并希望将这些脚本运行到我的本地 MDF 文件中。

我怎么做？到目前为止我看到的所有答案都对我没有帮助。

**我尝试了以下方法**：

我尝试在 Visual Studio 的“运行查询”中运行整个 SQL 脚本，但得到“不支持设置 SQL 构造或语句”。错误。

我想我必须以某种方式在 Microsoft SQL Management Studio 中打开 MDF 文件——但我真的找不到让这一切正常工作的方法。

**编辑**：

半年后，我一直在一次又一次地使用建议的方法作为答案。这是迄今为止最好的解决方案。项目中不再有 MDF 文件！

我强烈建议任何阅读本文的人开始在本地数据库中使用您的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:35:28.097

在我看来，整个*AttachDbFileName=*方法是有缺陷的。由于该`.mdf`文件未附加到已安装的 SQL Server 实例，因此您无法执行许多操作：

*   你不能`BACKUP`用来备份你的数据库
*   你不能轻易地`.sql`对你的数据库执行脚本
*   还有更多的东西

在我看来，唯一**真正可行的解决方案是**

1.  安装 SQL Server Express（反正你已经完成了）
2.  安装 SQL Server Management Studio Express
3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`YourDatabase`）
4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:34:26.577

在 Visual Studio 中连接到 MDF：

[https://stackoverflow.com/a/173221/188926](https://stackoverflow.com/a/173221/188926)

然后，您可以在 SQL Server 对象资源管理器中打开并运行查询。

# haskell - Haskell中的参数数量和无点

> ID：11487171
> 
> 赞同：15
> 
> 时间：2012-07-14T20:29:56.813
> 
> 标签：haskell, arguments, currying, pointfree

使用多个模式匹配，不同数量的参数是不可能的，即使是无点！

```
foo True b = b + 2
foo _ = id 
```

例如不起作用。但

```
foo True = (+2)
foo _ = id 
```

做。有时我们只能在函数的一部分中使用无点，所以...

为什么？GHC太难了吗？:'(

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-15T02:03:01.940

> 为什么？GHC太难了吗？

**没有**。GHC 一点也不难。实际上，这是 Haskell 报告的错误。

请参阅：[Haskell 报告 2010 > 声明和绑定 > 函数绑定](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-840004.4.3.1)

> 函数绑定将变量绑定到函数值。变量 x 的函数绑定的一般形式是：
> 
> x p1 [1] … p1 [**k**] match1
> …<br> x pn [1] … pn [**k**] matchn
> 
> [……呜呜呜……]
> 
> 翻译：函数的一般绑定形式在**语义上等价**于等式（即简单模式绑定）：
> 
> x = \ x [1] … x [k] -> case (x [1] , …, x [k] )
> 
> (p11, ..., p1k) match1
> ...<br> (pn1, ..., pnk) matchn
> 其中 x [i]是新的标识符。

（强调我的）

虽然函数定义在*语义上等同*于 lambda & case 表达式，但它们不一定像 Mihai 所建议的那样编译。

问题是，Haskell 报告*定义了*函数声明，使得它们在等式左侧*必须具有相同数量的输入。*`k`这一点通过在第 1 和第 n 个函数声明行（并且暗示，在其间的所有行）上保持相同的事实清楚地表明。*这*就是限制的原因；**它与 GHC 的实现细节无关**。

tl;博士

> 选择不允许它只是风格问题。– 八月

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T20:35:38.027

每个函数方程*必须*具有相同数量的参数。这就是您的第一个示例失败的原因。

要修复它，请使用

```
foo True b = b + 2
foo _ x = id x 
```

如您所见，两个方程具有相同数量的参数。

涉及模式匹配的多个方程被转换为案例表达式。在您的情况下`foo`，大致翻译为

```
foo a b = case a of
    True -> b + 2
    _ -> id x 
```

的两个（所有）分支`case`必须具有相同的类型，因此您的第一个示例将被翻译为

```
foo a b = case a of
    True -> b + 2
    _ -> id 
```

是错误的，因为分支有不同的类型。

当然，这是挥手，幕后发生的实际事情要复杂得多

# javascript - JavaScript/jQuery - 脚本不工作 - 添加和删除类，合并数组 - 测试用例

> ID：11487172
> 
> 赞同：1
> 
> 时间：2012-07-14T20:30:14.813
> 
> 标签：javascript, jquery, arrays, class, merge

我有这个脚本：

**JS**

```
// A & B is needed
var needed = ["#n01", "#n03"];

// always holds what the user has clicked    
var user = [];

// needed + user
var mixed = [];

// takes care of highlighting clicked letters &
// updating the user array

function hilit ( elem, cssClass ) {
    $( elem ).click( function () {
        if( $( this ).hasClass( cssClass )){ 
            //remove from array "highlighted"
           user.splice( $.inArray( "#" + $( this ).attr( "id" ), user ), 1 );  
            $( this ).removeClass( cssClass );
        } else {
            // add to array array "highlighted"
            user.push( "#" + $( this ).attr( "id" ) );
            $( this ).addClass( cssClass );
        }
    });
}

// is something wrong here? it works locally...

$("#lorem").on("click", function() {
       // merging -> needed + user
    mixed = $.merge(needed, user);

    // removing duplicates
    var map = new Object();
        for ( var i = 0; i < mixed.length; i++ ) {
            if (map[mixed[i]] === undefined ){
                map[mixed[i]] = 1;
            }
            else{
                map[mixed[i]]++;
            }
        }

        // result = letters the user didn't click
        var result = new Array();
        for( var i = 0; i < mixed.length; i++ ){   
            if( map[mixed[i]] > 1 ){
                //do nothing
            }
            else{
                result.push(mixed[i]);
            }
        }
)};

hilit (".letter", "color"); 
```

测试用例在这里（谢谢你，CD..！）：http: [//jsfiddle.net/uDsum/2](http://jsfiddle.net/uDsum/2)

**HTML**

```
<p id="lorem">

    <span class="letter" id="n01">A</span>
    <span class="letter" id="n02">B</span>
    <span class="letter" id="n03">C</span>

</p>​ 
```

**CSS**

```
body {
    font-size: 160px;
    font-weight: bold;
}

.letter {
    cursor: pointer;
}

.color {
    background: red;
} 
```

​</p>

**描述**

段落中的每个字母`#lorem`都用`span` `.letter`. 单击时`.letter`，将检查该类`.color`是否存在。如果是，`.color`则删除并从数组中删除相应的 ID `user`。否则`color`添加并将 id 推入`user`.

有你数组`needed`：`user`和`mixed`。 `needed`保存用户需要点击的ID。`user`保存用户单击的 ID。`mixed`是用户并且需要合并。

每次点击，都会`needed`合并`user`到`mixed`. 结果是`mixed`持有一些 ID 两次。然后过滤掉这些重复项，在数组中留下用户应该点击但没有点击的元素的 ID `result`。

**问题**

好吧，起初：我直接从我的编辑器中获取了代码，但不知何故它无法正常工作。我在脚本中断的地方添加了评论。这是 JSfiddle 的怪癖还是我搞砸了什么？

单击带有 的元素后`.color`，ID 应该只在 中出现一次`mixed`。反而是现在出现了三遍。所以不是在 中删除它`hilit`，而是再次添加它。为什么会这样？我该如何解决这个问题？这与我的使用有关`on()`吗？

*非常*需要和感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:03:09.347

这似乎现在工作：http: [//jsfiddle.net/uDsum/2/](http://jsfiddle.net/uDsum/2/)

```
$("#lorem").on("click", function() {
       // merging -> needed + user
    mixed = $.merge(needed, user);

    // removing duplicates
    var map = new Object();
        for ( var i = 0; i < mixed.length; i++ ) {
            if (map[mixed[i]] === undefined ){
                map[mixed[i]] = 1;
            }
            else{
                map[mixed[i]]++;
            }
        }

        // result = letters the user didn't click
        var result = new Array();
        for( var i = 0; i < mixed.length; i++ ){   
            if( map[mixed[i]] > 1 ){
                //do nothing
            }
            else{
                result.push(mixed[i]);
            }
        }
}); 
```

**编辑：**

看看[`$.merge()`](http://api.jquery.com/jQuery.merge/)函数的文档：

> 如果您需要原始的第一个数组，请在调用 $.merge() 之前对其进行复制

[http://jsfiddle.net/uDsum/3/](http://jsfiddle.net/uDsum/3/)

# asp.net - 确定 default.aspx 是否在地址栏中

> ID：11487178
> 
> 赞同：0
> 
> 时间：2012-07-14T20:31:26.913
> 
> 标签：asp.net, vb.net, web-config, response.redirect

在我的网络配置文件中，我将主页设置为

```
<location path="Default.aspx">
    <system.web>
        <httpRuntime requestValidationMode="2.0" />
    </system.web>
</location> 
```

这是为了允许将 HTML 输入到我的表单中。但是，它不适用于`mywebsite.com/`. 它确实适用于`mywebsite.com.default.aspx`.

所以我要么需要知道如何让它工作，`mywebsite.com/`要么我需要一种方法来确定`default.aspx`地址栏中是否存在。出于某种原因，我找不到`default.aspx`即使不在地址栏中也不会告诉我的服务器变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:37:06.687

对于 IIS 7 设置默认文档，如下所示：

```
<configuration>
   <system.webServer>
      <defaultDocument enabled="true">
         <files>
            <add value="Default.aspx" />
         </files>
      </defaultDocument>
   </system.webServer>
</configuration> 
```

# c# - 当 URL 中的 SEO 文本块以点符号结尾时，我收到 404 错误

> ID：11487181
> 
> 赞同：0
> 
> 时间：2012-07-14T20:32:14.720
> 
> 标签：c#, asp.net-mvc-3, routes

很奇怪！

这是自定义路线：

```
 routes.MapRoute(
            "Dota2-News-Details", // Route name
            "dota2-news/{id}/{slug}", // URL with parameters
            new { controller = "Dota2News", action = "Detail", slug = "", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

工作链接：

```
http://localhost:20099/dota2-news/3/Some-random-post
http://localhost:20099/dota2-news/5/Another-random-post
http://localhost:20099/dota2-news/14/New-delicious-items 
```

非工作链接：

```
http://localhost:20099/dota2-news/4/The-Dark-Moon-comes.
http://localhost:20099/dota2-news/11/Bwa-ha-welcome. 
```

一时兴起，我进入数据库并修改了 SEOTextSlug 以`.`从值中删除最终符号。正如预期的那样，它现在可以正常工作。不过我很困惑，我认为 URL 可以以`.`符号结尾。

这是我的控制器：

```
public ActionResult Detail(int id, string slug)
{
    var viewModel = new OfficialNewsModel();
    var news = _officialNewsRepository.FindById(id);

    if (news.SEOTextSlug != slug)
    {
        return RedirectToAction("Detail", "Dota2News", new { id = news.OfficialNewsId, slug = news.SEOTextSlug });
    }

    viewModel = Mapper.Map<OfficialNew, OfficialNewsModel>(news);
    return View(viewModel);
} 
```

我的问题：

为什么尾随`.`符号会破坏应用程序？URL 中的任何地方都不能有 doy 符号？

> “/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/dota2-news/1/In-defense-of-the-Temple。
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.225

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:16:45.060

> URL 中的任何地方都不能有 doy 符号？

它可以。虽然开箱即用，但不是最后。

因此，要允许它将以下内容添加到您的`web.config`(`<system.web>`部分)：

```
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

[Haacked 写](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)了一篇关于它的博客。[汉塞尔曼也](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)。如果您是 .NET 开发人员并且尚未订阅这 2 个博客并每天阅读它们，您可能会错过很多有用的东西。

# java - 为什么即使在 System.exit(0) 之后也需要返回；

> ID：11487184
> 
> 赞同：35
> 
> 时间：2012-07-14T20:32:49.757
> 
> 标签：java, return

考虑这个函数：

```
public boolean foo(){
   System.exit(1);
   //The lines beyond this will not be read
   int bar = 1;                  //L1
   //But the return statement is required for syntactically correct code
   return false;                 //L2

   //error here for unreachable code
   //int unreachable = 3;        //L3

} 
```

有人可以解释为什么 L1 和 L2 明显无法到达不会发出警告，但 L3 会发出警告。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-14T20:36:55.750

因为就编译器而言，`System.exit()`只是另一个方法调用。

它所做的是结束进程的事实只能从实现中找到（这是本机代码，而不是它有任何区别）。

如果你必须`System.exit()`输入你的代码（通常最好避免它，除非你想返回一个不是 0 的代码），它应该真的在一个返回的方法中`void`，`main()`例如。这样更好。

至于可达性，解释是一样的：是Java语言的一个关键字，所以IDE使用的编译器或者解析器可以判断语句`return`后面的代码理论上是不可能执行的。`return`这些规则在[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.1)定义。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-14T20:36:49.023

Java 编译器对`System.exit`. 就它而言，这只是一种方法 - 所以语句的结尾是可以到达的。

您*这么*说`L1`并且`L2`“明显无法到达”，但这*只是*因为您知道做什么`System.exit`。该语言不知道 - 而它*确实*知道`return`语句的作用，因此它知道`L3`确实无法访问。

我有时认为能够声明一个方法不仅仅是`void`，而且*永远不会*正常终止是很有用的——它永远不会只是返回（尽管它可能会抛出异常）。然后，编译器将能够使用该信息使任何调用表达式的结尾无法访问，从而防止此类事情成为问题。然而，这只是我对语言设计的梦想——Java*没有*任何类似的东西，当无法表达该概念时，编译器“知道”特定的 JRE 方法将永远不会正常返回，这将是一个非常糟糕的主意直接在语言中。

相反，编译器受[JLS 第 14.21 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)的规则约束，包括：

> *   非空块中不是 switch 块的第一条语句是可到达的，前提是该块是可到达的。
> *   如果 S 之前的语句可以正常完成，则非空块中不是 switch 块的所有其他语句 S 都是可访问的。

...

> 一个表达式语句可以正常完成，只要它是可达的。

（方法调用是一个表达式语句。）

然后从第 8.4.7 节：

> 如果将方法声明为具有返回类型，则如果方法的主体可以正常完成（第 14.1 节），则会发生编译时错误。

在 14.1 中：

> 除非另有说明，否则如果它评估的所有表达式和它执行的所有子语句都正常完成，则该语句将正常完成。

`System.exit()`所以对编译器的调用可以正常完成，这意味着方法的主体`foo`可以正常完成，从而导致错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-14T20:41:58.253

我：“return 语句之后可以执行任何操作吗？”
爪哇：“没有。”

我：“调用 System.exit 后可以执行任何操作吗？”
Java：“那是一种方法，我不知道它的作用——它不是保留关键字，据我所知它不会影响程序流程”（它甚至可能不起作用（我不知道是否退出可以抛出异常（或它的未来变体）））

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-14T20:36:45.810

从语言的角度来看，只有两种方法可以逃避当前范围：`return`和`throw`. 方法调用永远不会被视为相同的方式，即使它们由唯一的代码行组成：

```
void method() {
  throw new RuntimeException();
} 
```

更。理论上，任何方法调用都可能导致`RuntimeException`被抛出。在这种情况下，编译器可能应该对任何不在`try`块内的方法调用发出警告：

```
...
method(); // WARNING: may throw in theory
anotherMethod(); // WARNING: possible unreachable code, also may throw
anotherMethod2(); // WARNING: possible unreachable code, also may throw
// etc
... 
```

对于您的问题，逻辑是相同的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-14T20:36:59.557

如果一个方法被声明为返回一个非 void 值，那么它*必须*在某处包含一个`return`语句，即使它从未到达过（就像问题中的代码一样）。

从编译器的角度来看，`System.exit()`这只是另一个方法调用，没有什么特别之处，表明程序一到达就结束。只有你，作为程序员，知道这个事实——但它超出了编译器的知识范围。

关于您问题的第二部分-`return`方法内的代码块中的语句后面没有任何内容，因为那将始终是无法访问的代码。这就解释了为什么编译器抱怨 L3 行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-14T20:37:10.137

编译器检查某些代码是否仅针对 return 关键字是可访问的（通常还有 throw 和 break（在循环的情况下））。对于编译器来说，exit方法调用只是另一个调用，它不知道它的含义，所以它不知道后面的代码永远不会到达。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-14T20:40:15.120

我知道这没有意义，当您调用方法时，Java 编译器仍然是这样工作的。
编译器此时不知道 Sytem.exist 做了什么（从这个意义上说，为什么 rt.jar 与您编译的其他 jar 不同？）。
例如，这与下一段代码形成对比 -

```
 public int test() {
  throw new NullPointerException("aaaa");
} 
```

编译器可以判断总是抛出异常，因此不需要返回。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-14T20:36:59.070

静态代码分析工具可能没有考虑到应用程序正在终止。

# php - PHP 深层对象复制/克隆

> ID：11487185
> 
> 赞同：8
> 
> 时间：2012-07-14T20:33:27.123
> 
> 标签：php

PHP 中执行**深度**对象复制/克隆的最佳接受方式是什么？

我发现了一些使用序列化的示例，我认为这些示例存在一些问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T21:09:40.780

如果您可以完全访问您的类，则可以`__clone()`在所有类中实现，然后使用`clone`关键字。否则，该`clone`关键字只会创建最顶层对象的浅表副本，而该对象内的潜在引用将继续指向其原始目标。该`__clone()`方法还为您提供了更多控制权，但如果您不明确处理它们，则可能会创建带有循环引用的无限循环。

序列化技术通常有效，不会因循环引用而死，但在内存和 CPU 方面更昂贵。

# php - 如何获取 _id MongoDB/php？

> ID：11487186
> 
> 赞同：0
> 
> 时间：2012-07-14T20:33:35.393
> 
> 标签：php, mongodb

我这样做：

```
$cursorLocations = $collection->find( array("locationName" => $locationName) )->limit(1);

if ($cursorLocations->count(true) == 1) {
    $idLocations = $cursorLocations->getNext();
    echo $idLocations["_id"];
} 
```

如果这个问题一直存在，我立即道歉，但阅读文档没有找到答案。

也许其他方式来获取_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:25:04.950

在蒙戈：

```
db.collection.find({'field': 'value'}, {'_id' : 1}); 
```

在 PHP 中：

```
$cursorLocations = $collection->find( array("locationName" => $locationName), array('_id' => 1) )->limit(1); 
```

上面的代码会将您的查询限制为仅检索`_id`字段而不是其他字段，您仍然必须从`find()`函数的结果中提取该字段的值 - 从`$cursor`对象中提取，例如：

```
$_id = $cursorLoactions[`_id`]; 
```

还有一个`key()`返回 current的 MongoCursor 方法`_id`：

[http://www.php.net/manual/en/mongocursor.key.php](http://www.php.net/manual/en/mongocursor.key.php)

所以你可以这样做：

```
$cursorLocations = $collection->find( array("locationName" => $locationName) )->limit(1);
$_id = $cursorLocations->key(); 
```

# regex - vb.net 中的正则表达式和列表问题

> ID：11487187
> 
> 赞同：1
> 
> 时间：2012-07-14T20:33:39.210
> 
> 标签：regex, vb.net, list

我从字幕文件 (.srt) 创建了一个列表，其中每一行都在列表的索引内。现在我想删除一些行，特别是以“xx:xx:xx,xxx --> xx:xx:xx,xxx”格式的时间间隔开头的行。我做了一些研究（好吧，对一个复杂的主题进行了相当肤浅的研究，我可能会补充）并尝试创建以下子：

```
Private Shared Sub listCleaning(ByRef sList As List(Of String))
    For Each line As String In sList
        Dim pattern As String = "\b\d\d:\d\d:\d\d:\d\d,\d\d\d --> \b\d\d:\d\d:\d\d:\d\d,\d\d\d"
        Dim reg As New Regex(pattern)

        If line = "" Or Integer.TryParse(line, Nothing) Or reg.IsMatch(pattern) Then
            sList.Remove(line)
        End If
    Next
End Sub 
```

现在我有两个问题：

1.  我的正则表达式没有被正确解析。
2.  当我的 If Block 上的条件有效并且该行被删除时，由于列表已更改，因此在单击 next 时会出现 InvalidOperationException。

谁能帮我写一个正确的正则表达式和一种遍历列表的方法来删除不需要的行？

tnx 提前。

编辑：

好的，Tim 解决了大部分问题，但我仍然需要一个适合“xx:xx:xx,xxx --> xx:xx:xx,xxx”模式的正则表达式。有人愿意关心吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:50:18.153

这些是我对您的原始代码所做的更改。

首先，我不使用 for each 循环，而是更传统的 for 循环
第二，反向循环，所以你的删除到列表的末尾
第三，正则表达式模式应该在循环之外

```
Private Shared Sub listCleaning(ByRef sList As List(Of String)) 
    Dim pattern As String = "\d{2}:\d{2}:\d{2},\d{3}\s+-->\s+\d{2}:\d{2}:\d{2},\d{3}" 
    Dim reg As New Regex(pattern) 
    Dim x as Integer
    For x = sList.Count - 1 to 0 step -1
        Dim line as string = sList(x)
                Console.WriteLine(line)
        If line = "" Or Integer.TryParse(line, Nothing) Or reg.IsMatch(line) Then 
               sList.Remove(line) 
        End If 
    Next 
End Sub 
```

这是我的测试数据：

```
Sub Main
    Dim sList as List(Of String) = new List(Of string)
    sList.Add("01:01:01,003 --> 02:02:02,003")
    sList.Add("sdsdfsdfsd03 --> 02:02:02,003")
    sList.Add("03:01:01,003 --> 03:02:02,003")
    sList.Add("04:01:01,003 --> 04:02:02,003")
    sList.Add("05:01:01,003 --> 05:02:02,003")
    sList.Add("06:01:01,003 --> 06:02:02,003")
    sList.Add("07:01:01,003 --> 07:02:02,003")
    sList.Add("08:01:01,003 --> 08:02:02,003")
    sList.Add("09:01:01,003 --> 02:02:02 003")    

    console.WriteLine("Call listCleaning with " + sList.Count.ToString +  " elements")

    listCleaning(sList)

    console.WriteLine("Returned with " + sList.Count.ToString +  " elements")
    for each line as String in sList
        Console.WriteLine(line)
    next
End Sub 
```

得到这个输出

```
Call listCleaning with 9 elements
09:01:01,003 --> 02:02:02 003
08:01:01,003 --> 02:02:02,003
07:01:01,003 --> 02:02:02,003
06:AA:01,003   --> 02:02:02,003
05:01:01,003 -->    02:02:02,003
04:01:01,003 --> 02:02:02,003
03:01:01,003 --> 02:02:02,003
sdsdfsdfsd03 --> 02:02:02,003
01:01:01,003 --> 02:02:02,003
Returned with 3 elements
sdsdfsdfsd03 --> 02:02:02,003
06:AA:01,003   --> 02:02:02,003
09:01:01,003 --> 02:02:02 003 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:40:25.003

回答第 2 点：

您不能在迭代期间修改集合。那么你

1.  需要将要删除的项目存储在另一个集合中或
2.  反向迭代（感谢@Oded）或
3.  使用[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)（看底部）或
4.  使用 Linq：

    ```
    var dontRemove = From line In sList
        Where line <> "" AndAlso Not Integer.TryParse(line, Nothing) AndAlso Not reg.IsMatch(pattern) 
    ```

现在您可以安全地从列表中删除这些行或创建一个新列表：

```
sList = dontRemove.ToList() 
```

如果您正在使用`List(Of T)`最好的选择是使用[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)并传递谓词应该删除哪些项目：

```
Dim regex = New Regex("\d{2}:\d{2}:\d{2},\d{3}\s+-->\s+\d{2}:\d{2}:\d{2},\d{3}", RegexOptions.Compiled)
sList.RemoveAll(Function(line) line.Length = 0 _
                    OrElse Integer.TryParse(line, Nothing) _
                    OrElse Not regex.IsMatch(line)) 
```

* * *

> 反向迭代列表的最佳方法是什么

```
For index As Int32 = sLines.Count - 1 To 0 Step -1
    Dim line = sLines(index)
Next` 
```

# editor - 带有键盘快捷键的所见即所得 xhtml 文本区域

> ID：11487190
> 
> 赞同：0
> 
> 时间：2012-07-14T20:33:48.837
> 
> 标签：editor, richtextbox, wysiwyg, rich-text-editor

我有一个基于 Web 的表格编辑器，其中包含许多 textarea。textarea 包含 HTML 内容。我希望用户能够以所见即所得的方式编辑它们。由于我的用户喜欢使用键盘，我希望它有一种简单的方法来添加键盘快捷键，包括使用自定义类名添加 div 的快捷键。

这：[http](http://markitup.jaysalvat.com/home/) ://markitup.jaysalvat.com/home/接近我所需要的，唯一的问题是它不是所见即所得。

这：[http](http://premiumsoftware.net/cleditor/) ://premiumsoftware.net/cleditor/也很接近，但没有键盘快捷键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:35:24.807

一个明显的答案是[CKEditor](http://ckeditor.com/demo)。除了所有内置快捷方式（按 Alt-0），您还可以使用 API 添加更多命令。

# visual-studio-2010 - 有没有办法在 IDE（无命令行）的解决方案中为所有项目执行目标？

> ID：11487193
> 
> 赞同：1
> 
> 时间：2012-07-14T20:34:44.003
> 
> 标签：visual-studio-2010, visual-studio, msbuild, msbuild-4.0

请听我说，因为这个问题已被广泛修改。

在我的解决方案中的每个项目都是从 IDE 构建后，我有一个要执行的 msbuild 目标。我可以通过创建我的解决方案的 msbuild 副本轻松做到这一点，但您不能在 Visual Studio 中使用它。您可以通过项目属性来指定构建后的过程，但这非常乏味，特别是如果您有 2 个以上的项目。

是否有更好的方法来为 IDE 中的解决方案中的所有项目执行目标？我简直不敢相信 VS2010 没有给你一个更简单的选择。

顺便说一句，VS 2012 Beta 是否支持完整的 MsBuild 文件而不是脑死亡解决方案文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:49:41.153

我从您的问题中得到的是，您已经扩展了构建过程，然后创建了一个“影子”msbuild 文件，该文件执行解决方案文件通常在构建期间最终会执行的操作。如您所知，解决方案文件是一个相当不幸的 Visual Studio 唯一概念。这个问题几乎是不可能解决的。

解决此问题的惯用方法是保留解决方案文件并修改各个 .csproj 文件以包含每个项目需要根据您的流程完成的自定义构建步骤。NuGet 在您使用它时会执行此操作，NotifyPropertyWeaver 也是如此。（NuGet 通过引入 '$(SolutionDir)' 属性来解决解决方案问题）

顺便说一句，我不确定“构建安装程序”对您团队中的单个开发人员有多大价值，并且包含在构建中似乎会增加而不是消除摩擦。

如果这是用于自定义构建服务器，那么如果您不介意使两者保持同步，则根本不需要使用解决方案文件，我会全心全意地推荐这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:39:03.933

# asp.net-mvc-4 - .NET MVC 4 强类型 ViewModel 包含带有 EditorFor 和 EditorTemplate 部分视图的强类型模型未绑定

> ID：11487197
> 
> 赞同：5
> 
> 时间：2012-07-14T20:35:43.197
> 
> 标签：asp.net-mvc-4

关于这个有很多问题......但不知何故我无法让这个绑定工作，我仍然在我发布的视图模型中得到空值。这是 MVC 4。

这是主视图模型

```
public class RoleVM {

[Required]
[Display(Name = "Name of the Role")]
public string Role {get; set;}

public IEnumerable<RolePermission> permissions { get; set; }

} 
```

这是 RolePermission 类

```
public class RolePermission {

public int id;

public bool permission_value;

public string name { get; set; } 

} 
```

这是控制器中的 GET 创建方法

```
public ActionResult Create() {

        RoleVM role_vm = new RoleVM();

        var allpermissions = from p 
        in permission_repo.GetPermissions()
        select p; 

        role_vm.permissions = from p 
        in allpermissions 
        select new RolePermission
        { name = p.name, id = p.PermissionId, permission_value = false };

        return View(role_vm);
    } 
```

这是 Create.cshtml 文件

```
@model RoleVM
@using (Html.BeginForm("Create", "Role", 
FormMethod.Post, new { @class = "permission_form" }))
{
@Html.ValidationSummary(true)

<fieldset>
    <legend>RoleVM</legend>

    <div class="form-item">
        @Html.LabelFor(model => model.Role)

        @Html.EditorFor(model => model.Role)
        @Html.ValidationMessageFor(model => model.Role)
    </div>

   @Html.EditorFor(model => model.permissions)

    <p>
        <input class="submit-btn" type="submit" value="Create" />
    </p>
</fieldset>
} 
```

接下来是位于 ~/Views/Shared/EditorTemplates 中的 rolepermissions.cshtml 文件

```
@model RolePermission

<div class="form-item">
      @Html.HiddenFor(modelItem => modelItem.id) 
      @Html.LabelFor(modelItem => modelItem.permission_value, Model.name)
      @Html.CheckBoxFor(modelItem => modelItem.permission_value) 
</div> 
```

这是在页面上呈现的其中一个 html 项的示例

```
<div class="form-item">

      <input data-val="true" data-val-number="The field Int32 must be a number." data-val-required="The Int32 field is required." id="permissions_2__id" name="permissions[2].id" type="hidden" value="3" /> 

      <label for="permissions_2__permission_value">Role-Edit</label>
      <input data-val="true" data-val-required="The Boolean field is required."  id="permissions_2__permission_value" name="permissions[2].permission_value"
 type="checkbox" value="true" /><input name="permissions[2].permission_value"  type="hidden" value="false" /> 

</div> 
```

最后是 Create POST 方法

```
 [HttpPost]
    public ActionResult Create(RoleVM rolevm)
    {

        //In here rolevm.role is populated based on the textbox input
        //However rolevm.permissions is there with the correct 
        //number of items, but the values all are not binded
        // id is null, name is empty, and permission_value is false 
        // regardless of which checkboxes were checked 

        return RedirectToAction("Index");
    } 
```

对发布模型的绑定问题的任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T22:37:21.563

这是一个简单的问题，如果其他人遇到它，也许这会对他们有所帮助。我没有使用 get 声明为属性的类的属性；放;

```
public class RolePermission {

public int id { get; set; } 

public bool permission_value { get; set; } 

public string name { get; set; } 

} 
```

# c# - “如果”语句

> ID：11487198
> 
> 赞同：5
> 
> 时间：2012-07-14T20:36:09.927
> 
> 标签：c#, winforms

我还是 C# 的新手，想知道当满足 if 条件时如何会发生多种事情。例如。

```
int number = (Convert.ToInt32(textbox1.text)); 
   if (number == 1)
         textbox2.Text = "1";                 
         number2 = 33;           
         textbox3.text = (Convert.ToString(number2)); 
```

当我做这样的事情时，它并没有完成所有想要的结果。

PS如果这不是解决此类新手问题的正确网站，有人知道我可以去哪里吗？（当然经过研究）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T20:37:40.757

```
if (number == 1) 
{
    textbox2.Text = "1";                 
    number2 = 33;           
    textbox3.text = (Convert.ToString(RSP));
} 
```

添加括号将语句组合在一起。

如果没有括号，if 语句只会影响下一个语句：`textbox2.Text = "1";`，并且其他语句将*始终*运行，而不管 if 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T20:38:02.640

您需要使用块，使用`{`和`}`字符...

```
int number = (Convert.ToInt32(textbox1.text)); 
if (number == 1)
{
    textbox2.Text = "1";                 
    number2 = 33;           
    textbox3.text = (Convert.ToString(RSP));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T20:38:05.963

您需要将其全部包裹在花括号 { }

```
int number = Convert.ToInt32(textbox1.text); 
if (number == 1)
{
   textbox2.Text = "1";                 
   number2 = 33;           
   textbox3.text = Convert.ToString(RSP);
} 
```

Also the parenthesis around your Convert functions are not necessary. Doesn't affect functionality, just general house keeping.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T20:38:17.617

If the statements under the if statement is more than 1, braces are required.

```
 int number = (Convert.ToInt32(textbox1.text));  
   if (number == 1) 
   {
         textbox2.Text = "1";                  
         number2 = 33;            
         textbox3.text = (Convert.ToString(RSP)); 
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T20:37:47.283

```
int number = (Convert.ToInt32(textbox1.text)); 
if (number == 1)
 {
     textbox2.Text = "1";                 
     number2 = 33;           
     textbox3.text = (Convert.ToString(RSP));
 } 
```

使用大括号。这显示了要在 IF 语句上执行的代码块

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-14T20:38:40.243

Wrap the block of code in curly braces ({}).

```
int number = (Convert.ToInt32(textbox1.text)); 
if (number == 1)
{
    textbox2.Text = "1";
    number2 = 33;
    textbox3.text = (Convert.ToString(number2));
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T05:42:55.653

You missed the scope {}

```
int number = (Convert.ToInt32(textbox1.text));
if (number == 1)
{
     textbox2.Text = "1";
     number2 = 33;
     textbox3.text = (Convert.ToString(number2));
} 
```

OR

```
int number = int.Parse(textbox1.text);
if (number == 1)
{
     textbox2.Text = "1";
     number2 = 33;
     textbox3.text = number2.ToString();
     //the above line can also be written as follows
     //textbox3.text = "" + number2;
} 
```

Both will work fine

# drupal - 具有动态数据的多步表单

> ID：11487199
> 
> 赞同：2
> 
> 时间：2012-07-14T20:36:13.407
> 
> 标签：drupal

我正在创建一个网站，我希望在首页上有一个类别列表，在选择一个类别时，它会将您带到子类别列表。在选择子类别时，它会带您进入基于特定子类别的调查问卷，最后，会向管理员发送一封电子邮件，其中包含类别、子类别和问卷答案等详细信息。我对 Drupal 还很陌生，但我在 Joomla 和 PHP/Javascript 的核心编程方面有经验。我尝试使用 Webforms 来做，但它似乎不能用于动态数据，我希望在选择类别时动态加载子类别，同样的事情适用于问卷。请建议我适当的模块来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:53:12.240

您可以使用：[混沌工具](http://drupal.org/project/ctools)模块中的表单向导。它有一个很棒的 AP​​I 来创建多步骤表单。

# css - CSS text-overflow: ellipsis 是否适用于 Anchor 标签？

> ID：11487213
> 
> 赞同：22
> 
> 时间：2012-07-14T20:37:08.120
> 
> 标签：css

为什么以下 CSS 不起作用？

```
a {
    width: 60px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-14T20:39:36.217

这是因为锚是标准的`inline`元素。添加`display:inline-block`将使上述代码工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T20:40:21.890

这是盒子模型，`display:block`会做的工作

```
a {
    width: 60px;
    display:block;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}​ 
```

但它可能会导致其他问题，使锚（内联元素）表现得像盒子模型元素（显示：块）。

**参考：** [**文本溢出**](http://www.quirksmode.org/css/textoverflow.html)

**更新：**

```
display:inline-block 
```

[**演示。**](http://jsfiddle.net/heera/2d3Bp/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T20:42:01.437

添加`display: block`到您的CSS。

# objective-c - 悬停时的Objective-c下划线NSTextField标签

> ID：11487214
> 
> 赞同：1
> 
> 时间：2012-07-14T20:37:09.433
> 
> 标签：objective-c, xcode, macos, cocoa

所以这个问题实际上涉及2个问题。

*   首先，我以编程方式创建了大约 5 个 NSTextField 标签，我想知道当我悬停标签时如何给它们加下划线，相应的标签会加下划线吗？我对此感到困惑，所以我什至不知道如何去做。我知道大多数人会认为我连问下一个问题都疯了，但我确实有这样做的理由。
*   其次，如何将点击附加到 NSTextField 标签？我不想使用按钮，因为我不希望单击它时背景颜色可见，即使我隐藏了边框，单击时仍然可以看到背景颜色。我环顾四周（stackoverflow.com 和谷歌），似乎没有人回答这些问题。你可能需要我如何绘制 NSTextField 标签的代码，所以你可以开始了。

    ```
    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"Helvetica" size:14], NSFontAttributeName,[NSColor lightGrayColor], NSForegroundColorAttributeName, nil];
    NSAttributedString * trashText=[[NSAttributedString alloc] initWithString: @"Trash" attributes: attributes];
    [trashText drawAtPoint:NSMakePoint(20, 500)]; 
    ```

**更新**

添加了更多的objective-c。

**主窗口控制器.h**

```
#import <Cocoa/Cocoa.h>

@interface MainWindowController : NSWindowController {
    @private

}
@end

@interface EmailContents : NSView {
    @private
}

@end

@interface SideBar : NSView {
    @private
}

@end

@interface ClickableTextField : NSTextField
@end 
```

**主窗口控制器.m**

```
#import "MainWindowController.h"
#import "NSAttributedString+Hyperlink.h"

int currentView = 1;

@implementation NSAttributedString (Hyperlink)
+(id)fakeHyperlinkFromString:(NSString*)inString withColor:(NSColor*)color {
    NSMutableAttributedString* attrString = [[NSMutableAttributedString alloc] initWithString: inString];
    NSRange range = NSMakeRange(0, [attrString length]);
    [attrString beginEditing];
    // make the text appear in color
    [attrString addAttribute:NSForegroundColorAttributeName value:color range:range];
    // make the text appear with an underline
    [attrString addAttribute: NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:NSSingleUnderlineStyle] range:range];
    [attrString endEditing];
    return [attrString autorelease];
}
@end

@implementation SideBar
- (void)drawRect:(NSRect)HTMLContent {
    int height = [[NSScreen mainScreen] frame].size.height;
    if (currentView == 1) {
        NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"AvenirNext-Regular" size:16], NSFontAttributeName,[NSColor whiteColor], NSForegroundColorAttributeName, nil];
        NSAttributedString * text_one=[[NSAttributedString alloc] initWithString: @"text_one" attributes: attributes];
        //[text_one setAttributedStringValue:[NSAttributedString fakeHyperlinkFromString:@"text_one" withColor:[NSColor whiteColor]]];
        [text_one drawAtPoint:NSMakePoint(20, 600)];
    } else {
        NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"AvenirNext-UltraLight" size:14], NSFontAttributeName,[NSColor darkGrayColor], NSForegroundColorAttributeName, nil];
        NSAttributedString * text_one=[[NSAttributedString alloc] initWithString: @"text_one" attributes: attributes];   
        [text_one drawAtPoint:NSMakePoint(20, 600)];
    }
    if (currentView == 2) {
        NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"AvenirNext-Regular" size:16], NSFontAttributeName,[NSColor whiteColor], NSForegroundColorAttributeName, nil];
        NSAttributedString * text_two=[[NSAttributedString alloc] initWithString: @"text_two" attributes: attributes];
        [text_two drawAtPoint:NSMakePoint(20, 575)];
    } else {
        NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:[NSFont fontWithName:@"AvenirNext-UltraLight" size:14], NSFontAttributeName,[NSColor darkGrayColor], NSForegroundColorAttributeName, nil];
        NSAttributedString * text_two=[[NSAttributedString alloc] initWithString: @"text_two" attributes: attributes];
        [text_two drawAtPoint:NSMakePoint(20, 575)];
    }
    ...
}
@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T21:36:39.553

您可能应该将 NSTextField 子类化以实现您想要的。我做到了。

## 1\. 下划线

我对 NSAttributedString (NSAttributedString+Hyperlink.m) 做了一个扩展函数

```
+(id)fakeHyperlinkFromString:(NSString*)inString withColor:(NSColor*)color {

    NSMutableAttributedString* attrString = [[NSMutableAttributedString alloc] initWithString: inString];
    NSRange range = NSMakeRange(0, [attrString length]);

    [attrString beginEditing];

    // make the text appear in color
    [attrString addAttribute:NSForegroundColorAttributeName value:color range:range];

    // make the text appear with an underline
    [attrString addAttribute: NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:NSSingleUnderlineStyle] range:range];

    [attrString endEditing];

    return [attrString autorelease];
} 
```

然后你可以像这样将标题分配给 NSTextField （标签）：

```
[myTextField setAttributedStringValue:[NSAttributedString fakeHyperlinkFromString:@"Hello world!" withColor:[NSColor blueColor]]]; 
```

## 2\. 点击 NSTextField -> 发送动作

在这里，您可以使用委托对其执行Selector。在 NSTextField 子类的 h 文件中声明委托：

```
@property (assign) IBOutlet id delegate; 
```

与`@synthesize`m文件中的对应。现在您可以在 IntefaceBuilder（xib 文件）中连接（分配）委托。

之后，您可以实现 NSTextField 子类的 mouseUp（或 mouseDown）方法：

```
- (void)mouseUp:(NSEvent *)theEvent {

    [super mouseUp:theEvent];

    // call delegate
    if (delegate != nil && [delegate respondsToSelector:@selector(textFieldWasClicked)] {

        [delegate performSelector:@selector(textFieldWasClicked) withObject:nil];
    }
} 
```

这对我有用。现在你试试。

* * *

**更新**

您应该将`fakeHyperlinkFromString`NSAttributedString **+Hyperlink.m**作为 NSAttributedString 的类别。

**H-文件：**

```
#import <Foundation/Foundation.h>

@interface NSAttributedString (Hyperlink)

+(id)fakeHyperlinkFromString:(NSString*)inString withColor:(NSColor*)color;

@end 
```

**M-文件：**

```
#import "NSAttributedString+Hyperlink.h"

@implementation NSAttributedString (Hyperlink)

+(id)fakeHyperlinkFromString:(NSString*)inString withColor:(NSColor*)color {

    NSMutableAttributedString* attrString = [[NSMutableAttributedString alloc] initWithString: inString];
    NSRange range = NSMakeRange(0, [attrString length]);

    [attrString beginEditing];

    // make the text appear in color
    [attrString addAttribute:NSForegroundColorAttributeName value:color range:range];

    // make the text appear with an underline
    [attrString addAttribute: NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:NSSingleUnderlineStyle] range:range];

    [attrString endEditing];

    return [attrString autorelease];
}

@end 
```

然后在你使用的地方包含这个 NSAttributedString+Hyperlink.h `fakeHyperlinkFromString`。它通常是一个控制器（窗口控制器）。

在这个控制器中，你应该有一个指向你的 textField 对象的指针（如果你创建了一个子类）。这可以通过`@property`用`(assign)`and声明`IBOutlet`、合成它并在 InterfaceBuilder 中连接来完成。

# jquery - IE8/9 中带有 jQ uery 和 XDomainRequest 的 CORS

> ID：11487216
> 
> 赞同：63
> 
> 时间：2012-07-14T20:37:12.693
> 
> 标签：jquery, internet-explorer-9, xdomainrequest

**更新：**我强烈建议不要在 XDomainRequest 上投入任何时间，因为它是一个非常糟糕的实现，有很多限制。它基本上只适用于对非 SSL 服务器的 GET 请求，所以你不妨使用 jsonp 或其他什么。

* * *

我正在使用 CORS 调用跨域 API，但是 Internet Explorer 出现问题。通过对象在 IE8 和 IE9 中应该可以使用 CORS `XDomainRequest`，但是我无法让事情正常工作..

JQuery[拒绝](http://bugs.jquery.com/ticket/8283)为 XDomainRequest 提供本机支持，但是建议使用几个 jQuery 插件来添加此支持。本[主题](https://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied)建议使用两个这样的插件：[jQuery.XDomainRequest.js](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/blob/master/jQuery.XDomainRequest.js)和[xdr.js](https://github.com/tlianza/ajaxHooks/blob/master/src/ajax/xdr.js)，据报道它们可以工作。Afaik，插件应该自动覆盖`jQuery.ajax`. [我在这里](https://github.com/Ovea/cors/blob/master/src/main/resources/com/ovea/cors/jquery.ie.cors.js)找到了另一个插件。

我放了一些演示页面，其中包含对启用 CORS 的服务器执行 ajax 请求的相应插件[jQuery.XDomainRequest](http://www.stat.ucla.edu/~jeroen/cors/test1.html)和[xdr](http://www.stat.ucla.edu/~jeroen/cors/test2.html)和[jquery.ie.cors 。](http://www.stat.ucla.edu/~jeroen/cors/test3.html)这些页面在 Chrome 和 Firefox 中运行，但是 IE8/9 立即抛出权限被拒绝错误（甚至在发出请求之前）。这个[MSDN 帖子](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/30ef3add-767c-4436-b8a9-f1ca19b4812e)建议添加另一个处理程序`xhr.onprogress = function() {};`，但我尝试了这个，它也不起作用。

任何线索我做错了什么？我现在也使用 MS 虚拟服务器对 IE8 进行了测试，但它有完全相同的问题。

编辑：好的，所以我发现问题的一部分是我使用 POST over HTTPS。显然 XDomainRequest 不允许通过 HTTPS 进行 CORS。我可以切换到 HTTP，但我真的需要 POST。

Edit2：请参阅[github](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/issues/1)上的此问题以了解此故事的结尾。事实证明，当使用 HTTP POST 时，xDomainRequest 只能将请求正文（参数）编码为`text/plain`. 这几乎使它一文不值，因为每个人都使用`application/x-www-form-urlencoded`or `multipart/form-data`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-24T11:24:25.893

支持 POST 方法，并且要进行跨域 https:// 请求，您的调用页面也需要通过 https 加载。这是我找到的最好的文章，它详细解释了 XDomainRequest 的这些和其他限制：

[http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-24T11:04:56.450

我编写了一个代理，如果使用 IE9 或更低版本，它将优雅地降级为代理。如果您使用的是 ASP.NET，则根本不必更改您的代码。

解决方案分为两部分。第一个是一个 jquery 脚本，它与 jQuery ajax 处理挂钩。如果发出跨域请求并且浏览器是 IE，它将自动调用网络服务器：

```
$.ajaxPrefilter(function (options, originalOptions, jqXhr) {
    if (!window.CorsProxyUrl) {
        window.CorsProxyUrl = '/corsproxy/';
    }
    // only proxy those requests
    // that are marked as crossDomain requests.
    if (!options.crossDomain) {
        return;
    }

    if (getIeVersion() && getIeVersion() < 10) {
        var url = options.url;
        options.beforeSend = function (request) {
            request.setRequestHeader("X-CorsProxy-Url", url);
        };
        options.url = window.CorsProxyUrl;
        options.crossDomain = false;
    }
}); 
```

在您的 Web 服务器中，您必须接收请求，从`X-CorsProxy-Url`http 标头获取值并执行 HTTP 请求并最终返回结果。

我的博文：http: [//blog.gauffin.org/2014/04/how-to-use-cors-requests-in-internet-explorer-9-and-below/](http://blog.gauffin.org/2014/04/how-to-use-cors-requests-in-internet-explorer-9-and-below/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T20:18:49.160

对于IE8/9 中的**CORS**请求，您可以使用 jQuery 插件[jquery-transport-xdr](https://github.com/gfdev/javascript-jquery-transport-xdr)

# sql-server - 为什么我得到索引搜索？

> ID：11487222
> 
> 赞同：1
> 
> 时间：2012-07-14T20:37:40.610
> 
> 标签：sql-server, tsql, indexing

我在查询下方运行，因为它从表中返回几乎所有记录，它应该使用索引扫描而不是搜索。任何人，请解释为什么它使用搜索而不是扫描。

```
 DROP TABLE tblPlanDiff
GO
CREATE TABLE tblPlanDiff(Sno int identity,Col_1 int,Col_2 int)
GO
DECLARE @i int=1
WHILE(@i<=200000)
BEGIN
BEGIN TRAN
INSERT INTO tblPlanDiff values(@i*2,@i*3)
COMMIT TRAN
SET @i+=1

END
CREATE UNIQUE CLUSTERED INDEX ix_Sno on tblplandiff(Sno ASC)
GO
CREATE INDEX ix_Col1_Col2 on tblplandiff(Col_1) INCLUDE(Col_2)
GO
SELECT sno,col_1,col_2 FROM tblPlanDiff
WHERE col_1>2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:43:50.203

因为您在 上有一个索引`Col_1`，所以它能够在该索引内搜索到`Col_1`值大于 2 的点。仅仅因为它正在执行 Seek 并不意味着它没有在寻找 MANY 行。

如果您看到 Scan，则表示它从索引的开头开始并从那里开始扫描。从某种意义上说，Index Seek 仍然可以“扫描”；它只是从索引中的精确位置开始。

无论哪种方式，您为什么希望 Scan over a Seek？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:55:07.403

正如我在评论中已经提到的那样：**您为什么担心获得索引搜索？**

`ix_Col1_Col2`您的索引`Col_1`包含`Col_2`作为包含列，并且还包含`Sno`来自聚集索引 - 因此它包含您需要满足查询的所有三列。

所以最后，查询优化器选择了如何处理这个查询——它似乎更喜欢索引搜索——我根本看不出有任何问题。

在我的 SQL Server 2008 R2 Developer 版本上运行此查询时，我有以下性能值：

```
Table 'tblPlanDiff'. 
Scan count 1, logical reads 797, physical reads 3, read-ahead reads 499, 

SQL Server Execution Times: CPU time = 47 ms,  elapsed time = 855 ms. 
```

当我使用`WITH (FORCESCAN)`查询提示运行相同的查询时，我得到：

```
Table 'tblPlanDiff'. 
Scan count 1, logical reads 797, physical reads 3, read-ahead reads 499, 

SQL Server Execution Times: CPU time = 78 ms,  elapsed time = 852 ms. 
```

所以很明显，两者之间几乎没有任何区别 - 可能有一个微小的细节使查询优化器更喜欢索引搜索而不是扫描。不知道为什么 - 但我没有看到任何问题或问题。你？

# amazon-s3 - 是否可以使用单个域的多个存储桶为 s3 设置 DNS？

> ID：11487229
> 
> 赞同：2
> 
> 时间：2012-07-14T20:38:11.027
> 
> 标签：amazon-s3, dns, amazon-route53

有没有办法在托管网站（或任何内容）时使用另一个存储桶名称，而不仅仅是 www.example.com.s3-region.amazonaws.com？我想使用多个存储桶，这样当我更新站点时，如果出现问题，我可以回滚一个版本，并且更新是站点版本之间的原子切换。我一次只想要一个用于域的存储桶。

即类似的东西

存储桶名称：

www.example.com.bucket1
www.example.com.bucket2

程序：

www.example.com 当前指向 -> www.example.com。**bucket1** .s3-region.amazonaws.com

新站点版本已上传到 www.example.com.bucket2。

一旦验证 DNS 更改，以便 www.example.com 指向 -> www.example.com。**bucket2** .s3-region.amazonaws.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:12:58.507

这应该不起作用，因为 S3 会查看请求的主机名 (www.example.com) 以找出您尝试访问的存储桶，因此存储桶必须具有相同的名称。

[但是使用Amazon CloudFront](http://aws.amazon.com/cloudfront/)可以实现您想要的。有两种选择：

1.  您可以创建单个分配并仅更新其来源（S3 存储桶）。

2.  您可以创建两个不同的分发版并更新 DNS 设置以指向所需的分发版。您还需要更新两个发行版中的 CNAME 属性（从旧发行版中删除 www.example.com 并将其添加到新发行版中）。

# javascript - 创建其他人可以嵌入其网站的 GWT 小部件？

> ID：11487232
> 
> 赞同：3
> 
> 时间：2012-07-14T20:38:19.323
> 
> 标签：javascript, gwt, iframe

我在 GWT 中创建了一个小部件，我希望能够为用户提供一小段 HTML，他们可以将其嵌入到他们的网站中，这样我的小部件就会在那里呈现。

我不认为 iframe 是合适的，因为一个要求是单击我的小部件上的任何链接都应该将用户带到我的网站（而不仅仅是更改 iframe 的内容）。

任何帮助将不胜感激。

PS我尝试嵌入以下内容，但没有运气：< script src="http://embeddedapptest.appspot.com/embeddedapp/embeddedapp.nocache.js" ></script> < div id="foo" />

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:33:29.740

有可能的。片段需要像

```
<script src="yourmodule.nocache.js"></script>
<div id="foo"/> 
```

然后在您的入口点执行以下操作：

```
RootPanel root = RootPanel.get("foo");
// add your things here. root.add(...); 
```

您需要注意不要踩到外部页面的样式，反之亦然，但编译的 CSS 应该可以帮助您实现这一目标。

这是用于在 Google API 文档中嵌入 API Explorer 的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:50:52.977

我认为现在不可能做到。但是将来您可以使用[Web 组件](http://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html)来做到这一点。

但是可以使用[gwt-exporter](http://code.google.com/p/gwt-exporter/)导出 GWT/Java API 。这使得自动创建 JavaScript API 成为可能。[gwtchismes](http://code.google.com/p/gwtchismes/)使用它来导出[GWT 小部件的 JavaScript 版本](http://code.google.com/p/gwtchismes/wiki/JsChismes_Documentation)。[您可以在他们的 wiki](http://code.google.com/p/gwtchismes/wiki/Tutorial_ExportingGwtLibrariesToJavascript_en)中找到有关它的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T18:38:29.217

在 NetBeans GWT 项目中

**mycss.css：**

```
body, html,div.wrap-frame{ 
    margin: 0;
    padding: 0;
    widht: 100%;
    height: 100%;}body{
    background: white;
}

.row1or3 {
    width: 100%;
    height: 10%;
    background: blue;
    text-align: center;
}

.row2{
    width: 100%;
    height: 80%;
    background: yellow;
    text-align: center;
    display:flex;
}

.wrapper{
   width:100%;
   height: 100%;
}

.box{
    float:left; 
    height: 100%;
}

.box:nth-child(1){
    width:25%;
    background-color:red;
}

.box:nth-child(2){
    width:50%;
    background-color:green;
}

.box:nth-child(3){
    width:25%;
    background-color:yellow;
} 
```

**欢迎GWT.html**

```
<html>
<head>
    <script id=ft type="text/javascript"  src="org.yournamehere.Main/org.yournamehere.Main.nocache.js"></script>
    <meta name='gwt:module' content='org.yournamehere.Main=org.yournamehere.Main'>
    <link rel="stylesheet" href="mycss.css"> 
</head>
<body>
    <div class="row1or3"> Row1
    </div>

    <div class="row2">
        <div class="wrapper">
            <div class="box">
                Left Side Menu
            </div>
            <div class="box" id="mydiv"> 
            </div>
            <div class="box">
                Right Side Menu
            </div>
        </div>
    </div>

    <div class="row1or3">
        Row3
    </div>​
</body> 
```

**MainEntryPoint.java**

```
public class MainEntryPoint implements EntryPoint {

/**
 * Creates a new instance of MainEntryPoint
 */
public MainEntryPoint() {
}

/**
 * The entry point method, called automatically by loading a module that
 * declares an implementing class as an entry-point
 */
public void onModuleLoad() {
    final Label label = new Label("Hello, GWT!!!");
    final Button button = new Button("Click me!");

    button.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
            label.setVisible(!label.isVisible());
        }
    });

    RootPanel root = RootPanel.get("mydiv");
   root.add(button);
    root.add(label);
}
} 
```

[![在此处输入图像描述](../Images/b526c556b28ed2243871b70ee707120f.png)](https://i.stack.imgur.com/ztnoo.jpg)

现在您可以将任何 html 页面的任何 div 元素命名为 id=mydiv 并添加已编译的 GWT jscript。我已经测试过了。

# c# - Avalon 中的大写

> ID：11487234
> 
> 赞同：2
> 
> 时间：2012-07-14T20:38:56.157
> 
> 标签：c#, wpf, avalonedit

我正在使用 AvalonEdit 编写电影脚本编辑器。

我将 DocumentLine 类扩展为具有“Type”属性，其值表示“Character”、“Dialog Line”等。

我希望脚本中某种类型的文档行以大写形式编写（例如字符名称）。

渲染管道中是否有一个扩展点可以让我获取文档行并更改它的大小写？

我尝试创建一个扩展 DocumentColorizingTransformer 的类，但是在“protected override void ColorizeLine(DocumentLine line)”方法中更改大小写不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:39:22.357

这很困难，因为大写可以改变显示字符和文档之间的映射（视觉列与文档偏移）。

例如，单个字符 'ß'（德语锐利 s）仅作为小写字母存在，并在调用 时转换为两个字符的字符串“SS” `string.ToUpper()`。编辑这个文本很棘手：我们不能让用户只替换一个“S”，因为基础文档只包含“ß”。

一个简单的解决方案是改用该`char.ToUpper()`方法，强制在原始字符和大写字符之间进行一对一的映射。这将使像“ß”这样的字母保持不变。

在 AvalonEdit 4.2 中，仅允许对已生成的 VisualLineElement 进行两种转换：

*   更改文本运行属性，例如字体大小、文本颜色等。
*   将 VisualLineElement 一分为二 - 这是在内部使用的，`ChangeLinePart()`以便可以更改文本部分的属性。

这意味着不可能在着色器中进行文本替换，您需要使用`VisualLineElementGenerator`.

```
/// <summary>
/// Makes all text after a colon (until the end of line) upper-case.
/// </summary>
public class UppercaseGenerator : VisualLineElementGenerator
{
    public override int GetFirstInterestedOffset(int startOffset)
    {
        TextDocument document = CurrentContext.Document;
        int endOffset = CurrentContext.VisualLine.LastDocumentLine.EndOffset;
        for (int i = startOffset; i < endOffset; i++) {
            char c = document.GetCharAt(i);
            if (c == ':')
                return i + 1;
        }
        return -1;
    }

    public override VisualLineElement ConstructElement(int offset)
    {
        DocumentLine line = CurrentContext.Document.GetLineByOffset(offset);
        return new UppercaseText(CurrentContext.VisualLine, line.EndOffset - offset);
    }

    /// <summary>
    /// Displays a portion of the document text, but upper-cased.
    /// </summary>
    class UppercaseText : VisualLineText
    {
        public UppercaseText(VisualLine parentVisualLine, int length) : base(parentVisualLine, length)
        {
        }

        protected override VisualLineText CreateInstance(int length)
        {
            return new UppercaseText(ParentVisualLine, length);
        }

        public override TextRun CreateTextRun(int startVisualColumn, ITextRunConstructionContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            int relativeOffset = startVisualColumn - VisualColumn;
            StringSegment text = context.GetText(context.VisualLine.FirstDocumentLine.Offset + RelativeTextOffset + relativeOffset, DocumentLength - relativeOffset);
            char[] uppercase = new char[text.Count];
            for (int i = 0; i < text.Count; i++) {
                uppercase[i] = char.ToUpper(text.Text[text.Offset + i]);
            }
            return new TextCharacters(uppercase, 0, uppercase.Length, this.TextRunProperties);
        }
    }
} 
```

在 AvalonEdit 4.3.0.8868 中，我添加了方法`VisualLine.ReplaceElement()`. 这可用于将默认`VisualText`元素替换`UppercaseText`为线路转换器（着色器）中的元素。

请注意，也可以实现对“ß”显示为“SS”的支持。为此，您必须实现自己的副本`VisualLineText`而不是仅仅覆盖现有的副本。然后，您可以使用不同于文档长度的视觉长度。`GetRelativeOffset`和方法将`GetVisualColumns`用于提供文档和视觉坐标之间的映射。

* * *

您可以使用另一种选择：小型大写字母。

```
// in the colorizer:
ChangeLinePart(start, end, e => e.TextRunProperties.SetTypographyProperties(new CapsTypography()));

// helper class
class CapsTypography : DefaultTextRunTypographyProperties
{
    public override FontCapitals Capitals {
        get { return FontCapitals.SmallCaps; }
    }
} 
```

但是，只有在使用支持它们的 OpenType 字体时，WPF 才会呈现小型大写字母。在我的测试中，`Cambria`使用小型大写字母，大多数其他字体都没有。此外，`SetTypographyProperties`方法和`DefaultTextRunTypographyProperties`类需要 AvalonEdit 4.3。

# python - 从函数内部调用 Python 函数

> ID：11487236
> 
> 赞同：-2
> 
> 时间：2012-07-14T20:38:58.057
> 
> 标签：python

我试图从 process() 中调用 two_byte_proc(payload,offset) 但它不写入输出文件 out_buf。offset 或 payload 的输出可能包含 None ，因此应跳过这些迭代并使用下一个数据包重新启动过程功能。

```
def process():
    pkts = sniff(offline="infile.pcap",filter="tcp")
    out_buf = open("outfile.bin","wb")

    for pkt in pkts:
        offset = hexdump(str(pkt.payload)[:2])
        payload = hexdump(pkt.payload)

        if offset or payload is None:
            pass
        else:
            out_buf.write(two_byte_proc(payload,offset))

process() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T20:41:04.447

表达式`offset or payload is None`总是 True；也许你的意思是：

```
if offset is None or payload is None: 
```

反而。

如果该表达式为 True，则您“通过”，因此您也可以将其反转：

```
if offset is not None and payload is not None:
    out_buf.write(two_byte_proc(payload, offset)) 
```

我怀疑`offset`and`payload`是长度 > 0 或 None 的字符串，在这种情况下可以进一步简化为：

```
if offset and payload:
    out_buf.write(two_byte_proc(payload, offset)) 
```

最后但并非最不重要的一点是，您需要确保`two_byte_proc`（或`four_byte_proc`在您的编辑之后）实际*返回*要写入 out_buf 的内容。例如，如果它返回的只是一个空字符串，您将看不到任何结果。

# c++ - VC++ 使单行文本框作用于返回键（模仿一个按钮）

> ID：11487237
> 
> 赞同：0
> 
> 时间：2012-07-14T20:39:10.980
> 
> 标签：c++

我正在 Windows XP 上学习 Visual C++ 2010 Express

这一定是我正在尝试做的标准任务！！！

我有一个非常基本的表单，有一个输入文本框、一个输出文本框和一个按钮

我在输入文本框中输入一个值并按下按钮，答案将显示在输出文本框中。

这一切都有效。

我想在输入文本框（单行框）输入值并在输出文本框中显示答案后按回车键。（与按下按钮相同）。

这不是一件简单的事情吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:39:17.007

我讨厌爆料，但你不是在编写 C++ 代码。您使用的语言称为 C++/CLI，它是一种类似于 C++ 以及 C# 的托管语言。死的赠品是编写使用 ^ 帽子的代码。在 GUI 设计器为您生成的代码中很容易看到。

您使用的 Express 版本是一个主要提示，它仅支持使用 C++/CLI 创建 GUI。通过利用 Winforms 类库和它支持的设计器。非常好，您可以在表单上放置控件并双击它们以实现默认事件。为按钮添加 Click 事件很简单。

该版本不支持本机方式 MFC。而且很奇怪，MFC 除了创建对话框之外没有设计器支持。

GUI 应用程序最大的特点是*不*使用 Enter 键从一个控件移动到另一个控件。用户熟悉并知道按 TAB 键。Enter 键保留用于操作对话框中的 OK 按钮。

这并不是说你不能让它工作，Winforms 足够灵活，可以让你捕获 Enter 键来改变焦点。只是你不应该，用户知道他们何时不使用控制台模式应用程序并且乐于使用 TAB 键。

错误的语言，错误的 UI 模式，我猜不是你去的学校告诉你的。他们没有。

# php - 如何发送未剪裁签名的 HTML 电子邮件？

> ID：11487238
> 
> 赞同：1
> 
> 时间：2012-07-14T20:39:12.693
> 
> 标签：php, email, html-email, phpmailer

我正在尝试通过 PHP 发送电子邮件，并且在消息传递时，我遇到了一个小问题。在 Gmail 和可能的其他电子邮件客户端中，邮件的最后一行（签名）被剪掉了。通过“剪辑”，我的意思是最后一行被隐藏，带有一种可以单击以取消隐藏最后一行的按钮。

有什么方法可以阻止这种情况发生吗？这是我第一次尝试通过 PHP 发送 HTML 电子邮件，所以我想也许有某种我不知道的语法。

我基本上只是使用 phpmailer 示例代码：

```
require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

$mail->IsSMTP(); // telling the class to use SMTP

try {
  $mail->Host       = "mail.yourdomain.com"; // SMTP server
  $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
  $mail->SMTPAuth   = true;                  // enable SMTP authentication
  $mail->SMTPSecure = "tls";                 // sets the prefix to the servier
  $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
  $mail->Port       = 587;                   // set the SMTP port for the GMAIL server
  $mail->Username   = "yourusername@gmail.com";  // GMAIL username
  $mail->Password   = "yourpassword";            // GMAIL password
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->AddAddress('whoto@otherdomain.com', 'John Doe');
  $mail->SetFrom('name@yourdomain.com', 'First Last');
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->Subject = 'PHPMailer Test Subject via mail(), advanced';
  $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
  $mail->MsgHTML(file_get_contents('contents.html'));
  $mail->AddAttachment('images/phpmailer.gif');      // attachment
  $mail->AddAttachment('images/phpmailer_mini.gif'); // attachment
  $mail->Send();
  echo "Message Sent OK<p></p>\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
} 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T20:46:07.083

不，真的没有。您所指的“剪辑”是由 GMail（或任何客户端）根据自己对电子邮件内容的分析完成的 - 如果某些内容看起来像签名/引用的回复，它将折叠它。

**这与您**发送电子邮件的方式无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-01T06:27:56.860

经常在 SO 上重复的解决方案是消除任何类型的“重复”，以便人们在页脚、不可见的图像等中添加唯一的时间戳。

在我的情况下，Gmail 出现了一个错误，并且会显示此消息，因为名字出现在主题行和电子邮件正文中。

它甚至没有修剪消息，它正在显示完整的消息，但说它已被修剪。

[![在此处输入图像描述](../Images/b08a72ea0baaacf71c5e1692ca1e514b.png)](https://i.stack.imgur.com/NDbyI.png)

解决方案是尝试手动删除电子邮件的一部分并继续向自己发送测试，直到您不再看到通知，然后从那里开始工作。

# jquery - 动画 backgroundColor 在 jQuery 1.7.2 中不起作用

> ID：11487242
> 
> 赞同：-1
> 
> 时间：2012-07-14T20:39:15.730
> 
> 标签：jquery, animation, colors, background

我有以下代码。

```
 $("[id^=menuItem]").mouseenter(function () {
      $(this).animate({ width: 400, backgroundColor: "black" }, 1000);
   }); 
```

当我用鼠标悬停时，所考虑的 div 确实变宽了，但是背景颜色没有变化（当然，它与黑色不同）。可能是什么问题？我尝试遵循以下链接中的建议，其中的示例似乎确实有效。

[http://docs.jquery.com/UI/Effects/ColorAnimations](http://docs.jquery.com/UI/Effects/ColorAnimations)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:40:44.003

> jQuery UI 效果核心扩展了 animate 函数，使其也能够为颜色设置动画。

在执行此操作之前，您需要包含 jQuery UI 库。

# android - 链接必须有多近才能触发 Chrome 测试版中的链接预览？

> ID：11487244
> 
> 赞同：1
> 
> 时间：2012-07-14T20:39:36.720
> 
> 标签：android, css, google-chrome

我网站的一些用户告诉我，当他们尝试触摸某些链接时，他们发现这很烦人，而不是激活链接，而是放大链接和相关元数据（由几个链接组成）。

那么链接和相关数据之间需要多少 css 像素间隔才能阻止这种行为呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:09:13.390

我也想知道这一点，最终需要一个 js/css 技巧来按需禁用它。

你也可以看看这个问题： [How to prevent google chrome android browser to display the magnifier when users click a button?](https://stackoverflow.com/questions/12972106/how-to-prevent-google-chrome-android-browser-to-display-the-magnifier-when-users?answertab=oldest#tab-top)

# javascript - 用于匹配电子邮件字段的 Jquery 验证

> ID：11487250
> 
> 赞同：0
> 
> 时间：2012-07-14T20:41:37.800
> 
> 标签：javascript, jquery, validation

我有这个 html 代码：

```
<p>
 <label for="email">E-mail</label>
 <input id="email" name="email" placeholder="ex: email@gmail.com"/>
</p>        
<p>
<label for="email_alt">E-mail Alternativo</label>
<input id="email_alt" name="email_alt" />
</p> 
```

我想验证电子邮件是否在运行时间匹配。

我在stackoverflow的一篇文章中找到了下面的代码，我知道#author_email和#author_confirm_email是输入的ID。据我所知 .blur 是在运行时触发警报。但我不理解触发该功能的“.email”。考虑到我拥有的代码，我可以在那里使用什么？

```
 $(".email").blur(function(){
  //check to two here.
  if ($("#author_email").val() != $("#author_confirm_email").val())
  {
    //do something
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:46:38.353

每当对象失去焦点（即有人按下制表符或单击下一个输入框）时，都会触发模糊事件。注意“。” 表示一个类，而“#”是一个 ID。因此，在该代码中，每当类名为“email”的内容失去焦点时，就会调用该验证函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:24:38.183

如果您想在运行时检查字段（即在用户键入时），您必须使用`keyup`事件（每次用户按下并释放键时都会触发此事件）：

```
$("#email_alt").keyup(function(){
    if ($("#email").val() != $("#email_alt").val()) {
        // emails don't match
    }
}); 
```

没有对此进行测试，但实际上它应该像那样工作。

您可能想要添加一些进一步的验证，例如防止空字段并确保有效的电子邮件地址（如 GTSouza 建议的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:44:40.027

//

```
input#email 
```

//

```
input#email-confirm 
```

//

```
function IsValidEmail(a){var b=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return b.test(a)}

var validate = true;
$('input[name*="email"]:visible', $(this)).each(function(index, field){
            if(!IsValidEmail($(field).val()) && validate){
                $(field).focus().addClass('invalid');
                validate = false;
                return false;
            }

            var confirm = $('#'+$(field).attr('id')+'-confirm');
            if(confirm.size() > 0){
                if($(field).val() != $(confirm).val()){
                    $(field).focus().addClass('invalid');
                    validate = false;
                    return false;
                }
            }
        }); 
```

# image - 用 Java 访问网络摄像头的最佳方式

> ID：11487251
> 
> 赞同：58
> 
> 时间：2012-07-14T20:41:49.667
> 
> 标签：image, camera, webcam, java

我需要使用 Java 访问网络摄像头。这就是我想做的

1.  访问网络摄像头

2.  现在用户可以看到网络摄像头工作，因为他的脸在屏幕上可见（听说有一些库不显示网络摄像头的视频输出）

3.  当用户单击保存按钮时，拍摄快照并保存

很长一段时间以来，我已经尝试了多种方法来做到这一点。

1.  JMF - 现在它已经死了
2.  FMJ - 现在它也死了
3.  VLCJ - 太多了，因为我没有创建音乐/视频播放器，它希望安装 VLC
4.  Xuggler - 太多和辛苦的工作
5.  JMyron - 没用
6.  JavaFX - 我认为它可以做到，但似乎不能

如果图书馆只做上面提到的事情，我什至很满意，因为这对我来说已经足够了。但我希望它也很简单。如果它不使用 DLL，那就太好了，因为它不是独立于平台的。真的很感激它是否可以检测相机，而无需像 VLCJ 中那样手动传递相机名称和其他信息（因为可能有数千个相机品牌，所以我无法在其中创建一千个元素的列表）。而且，我正在创建一个桌面应用程序，而不是 Web 应用程序。

如果你知道这样的图书馆，请告诉我。其他库（可能不适合我的所有要求，但适合基本要求）也欢迎。请帮忙

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-11-15T20:48:26.913

我认为您正在寻找的项目是：[https](https://github.com/sarxos/webcam-capture) ://github.com/sarxos/webcam-capture （我是作者）

有一个与您描述的完全一样的示例 - 运行后，会出现一个窗口，在您按下“开始”按钮后，您可以从网络摄像头设备查看实时图像并在单击“快照”后将其保存到文件中（[源代码可用](https://github.com/sarxos/webcam-capture/blob/master/webcam-capture/src/example/java/TakeSnapshotFromVideoExample.java)，请注意角落的FPS计数器可以禁用）：

![快照](../Images/e9b01552b56fe359a91aaa6727aea907.png)

该项目是可移植的（WinXP、Win7、Win8、Linux、Mac、Raspberry Pi），不需要在 PC 上安装任何额外的软件。

API 非常好用且易于学习。示例如何捕获单个图像并将其保存为 PNG 文件：

```
Webcam webcam = Webcam.getDefault();
webcam.open();
ImageIO.write(webcam.getImage(), "PNG", new File("test.png")); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-14T20:55:51.877

这已在 SO 上多次讨论过。以下是一些帮助您入门的链接：

SO：[在java中从网络摄像头捕获图像？](https://stackoverflow.com/questions/276292/capturing-image-from-webcam-in-java)

SO：[从实时视频设备捕获图像以供基于 Java 的应用程序使用的最佳方法是什么？](https://stackoverflow.com/questions/115835/what-is-the-best-method-to-capture-images-from-a-live-video-device-for-use-by-a)

openCVF 小程序：http: [//www.colorfulwolf.com/blog/2011/07/05/accessing-the-webcam-from-inside-a-java-applet/](http://www.colorfulwolf.com/blog/2011/07/05/accessing-the-webcam-from-inside-a-java-applet/)

配置： http: [//ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html)

# iphone - textLabel 与附件视图对齐

> ID：11487256
> 
> 赞同：2
> 
> 时间：2012-07-14T20:42:23.637
> 
> 标签：iphone, objective-c, ios, uitableview

我的 UITableView 文本居中对齐。当我在附件视图中添加时，对齐会消失。试图纠正框架不起作用。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:03:03.667

我的经验如下。

精确控制 a 中所有内容的最简单方法`UITableViewCell`是使用自定义附件制作自定义表格视图单元格。这需要更多的工作，但在这种情况下，您的单元不会出现任何不需要的行为。

我不确定它现在是否对您有帮助，但将来您可以避免定制`UITableViewCell`.

# javascript - 如何获取html元素的类标签

> ID：11487258
> 
> 赞同：18
> 
> 时间：2012-07-14T20:42:28.200
> 
> 标签：javascript, jquery, html, css, modernizr

我正在使用一个自定义的现代化配置，它选择了我在我的页面中使用的功能（并且只有那些功能）。

所以，我想简单地获取`<html>`页面的类名，这样我就可以检查有多少`no-`前缀类存在（也许检查`classlist.match(/no-/g).length`）并确定我的 javascript 是否应该放弃。

目前尚不清楚我是否应该使用

```
document.getElementsByTagName('html').className 
```

或者

```
$('html').attr('class') 
```

或者

```
document.documentElement.className 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-14T21:03:12.700

我会去：

```
document.documentElement.className; 
```

因为不涉及任何函数的调用，也没有像jquery这样的附加层。理想情况下，这是最干净和最快的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T23:11:44.840

你可以使用jQuery`[`hasClass`](http://api.jquery.com/hasClass/)方法：

> 确定是否为任何匹配的元素分配了给定的类。

```
if ( $('html').hasClass('no-something')) {
  // do something here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T20:48:20.843

如果使用纯 JS，则等价于：

```
document.getElementsByTagName('html')[0].className 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T20:46:58.800

如果您在项目中使用 jquery 为什么不使用这个：

```
var classList = $("html").attr('class').split(/\s+/);
var prefix = 'no-';

$.each( classList, function(index, item){
  if (item.substring(0, 2) === prefix) {
    //do something
  }
}); 
```

?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-16T08:14:08.313

```
 var allClasses = [];
 var allElements = document.querySelectorAll('*');

 for (var i = 0; i < allElements.length; i++) {
     if (allElements[i].hasAttribute("class")) {
        var classes = allElements[i].className.toString().split(/\s+/);
        for (var j = 0; j < classes.length; j++) {
             var cls = classes[j];
             if (cls && allClasses.indexOf(cls) === -1)
                allClasses.push(cls);
        }
     }
 }

 console.log(allClasses); 
```

# excel - 无休止的 VBA 循环，除非我单步执行代码

> ID：11487259
> 
> 赞同：2
> 
> 时间：2012-07-14T20:42:36.817
> 
> 标签：excel, excel-2007, infinite-loop, vba

我有一个包含 6 个列表对象的用户表单。所有列表对象都有命名范围行源。单击任何一个列表中的任何一项都将引用电子表格上的图表，并清除不属于所选内容的任何项目单元格的内容（如果您感兴趣，请在此底部更好地解释）。我所有的列表对象都只有“更新后”触发器，其他一切都由私人潜艇处理。

无论如何，从一个列表到另一个列表有很多循环和跳转。如果我正常运行用户窗体，它会无限循环。它似乎运行了一次，然后就像用户一遍又一遍地再次单击列表中的同一项目一样。

奇怪的是，如果我单步执行代码（F8），它会完美地结束，当它应该和控制权返回给用户时。

有人对为什么会这样有任何想法吗？

编辑：我最初没有发布代码，因为它基本上都是一个循环，并且有 150 多行。我不明白如果单步执行使其完美运行，它如何成为代码，但允许它正常运行会使其无限循环。无论如何，这是代码：

```
Option Explicit
    Dim arySelected(6) As String
    Dim intHoldCol As Integer, intHoldRow As Integer
    Dim strHold As String
    Dim rngStyleFind As Range, rngStyleList As Range

Private Sub UserForm_Activate()
    Set rngStyleList = Range("Lists_W_Style")
    Set rngStyleFind = Range("CABI_FindStyle")
End Sub
Private Sub lstStyle_AfterUpdate()
    If lstStyle.ListIndex >= 0 Then
        arySelected(0) = lstStyle.Value
        Call FilterCabinetOptions(Range("Lists_W_Style"), Range("CABI_FindStyle"), 0)
    End If
End Sub
Private Sub lstWood_AfterUpdate()
    If lstWood.ListIndex >= 0 Then
        arySelected(1) = lstWood.Value
        Call FilterCabinetOptions(Range("Lists_W_Wood"), Range("CABI_FindWood"), 1)
'        lstWood.RowSource = "Lists_W_Wood"
    End If
End Sub
Private Sub cmdReset_Click()
    Range("Lists_S_Style").Copy Destination:=Range("Lists_W_Style")
    Call RemoveXes(Range("Lists_W_Style"))
    Range("Lists_S_Wood").Copy Destination:=Range("Lists_W_Wood")
    Call RemoveXes(Range("Lists_W_Wood"))
    Range("Lists_S_Door").Copy Destination:=Range("Lists_W_Door")
    Call RemoveXes(Range("Lists_W_Door"))
    Range("Lists_S_Color").Copy Destination:=Range("Lists_W_Color")
    Call RemoveXes(Range("Lists_W_Color"))
    Range("Lists_S_Glaze").Copy Destination:=Range("Lists_W_Glaze")
    Call RemoveXes(Range("Lists_W_Glaze"))
    Range("Lists_S_Const").Copy Destination:=Range("Lists_W_Const")
    Call RemoveXes(Range("Lists_W_Const"))
    Range("Lists_S_DrawFrontConst").Copy Destination:=Range("Lists_W_DrawFrontConst")
    Call RemoveXes(Range("Lists_W_DrawFrontConst"))
End Sub
Private Sub FilterCabinetOptions(rngList As Range, rngFind As Range, intAry As Integer)
    Dim intListCntr As Integer, intFindCntr As Integer, intStyleCntr As Integer
    If intAry = 0 Then
        Call FindStyle(arySelected(intAry))
    Else
        'Save the List item.
        For intListCntr = 1 To rngList.Rows.Count
            If rngList.Cells(intListCntr, 1) = arySelected(intAry) Then
                rngList.Cells(intListCntr, 3) = "X"
'                Call RemoveNonXes(rngList)
                Exit For
            End If
        Next intListCntr
        'Save the column of the Find List.
        For intFindCntr = 1 To rngFind.Columns.Count
            If rngFind.Cells(1, intFindCntr) = arySelected(intAry) Then
                'Minus 2 to allow for columns A and B when using Offset in the below loop.
                intHoldCol = rngFind.Cells(1, intFindCntr).Column - 2
                Exit For
            End If
        Next intFindCntr
        'Find appliciple styles.
        For intStyleCntr = 1 To rngStyleFind.Rows.Count
            If Len(rngStyleFind.Cells(intStyleCntr, intHoldCol)) > 0 Then
                Call FindStyle(rngStyleFind.Cells(intStyleCntr, 1))
            End If
        Next intStyleCntr
    End If
    Call RemoveNonXes(rngStyleList)
    Call RemoveNonXes(Range("Lists_W_Wood"))
    Call RemoveNonXes(Range("Lists_W_Door"))
    Call RemoveNonXes(Range("Lists_W_Color"))
    Call RemoveNonXes(Range("Lists_W_Glaze"))
    Call RemoveNonXes(Range("Lists_W_Const"))
    Call RemoveNonXes(Range("Lists_W_DrawFrontConst"))
End Sub
Private Sub FindStyle(strFindCode As String)
    Dim intListCntr As Integer, intFindCntr As Integer
    For intListCntr = 1 To rngStyleList.Rows.Count
        If rngStyleList.Cells(intListCntr, 1) = strFindCode Then
            rngStyleList.Range("C" & intListCntr) = "X"
            Exit For
        End If
    Next intListCntr
    For intFindCntr = 1 To rngStyleFind.Rows.Count
        If rngStyleFind.Cells(intFindCntr, 1) = strFindCode Then
            intHoldRow = rngStyleFind.Cells(intFindCntr).Row
            Exit For
        End If
    Next intFindCntr
    If Len(arySelected(1)) = 0 Then Call FindStyleOptions(Range("CABI_FindWood"), Range("Lists_W_Wood"))
    If Len(arySelected(2)) = 0 Then Call FindStyleOptions(Range("CABI_FindDoor"), Range("Lists_W_Door"))
    If Len(arySelected(3)) = 0 Then Call FindStyleOptions(Range("CABI_FindColor"), Range("Lists_W_Color"), Range("Lists_W_Wood"))
    If Len(arySelected(4)) = 0 Then Call FindStyleOptions(Range("CABI_FindGlaze"), Range("Lists_W_Glaze"), Range("Lists_W_Wood"))
    If Len(arySelected(5)) = 0 Then Call FindStyleOptions(Range("CABI_FindConst"), Range("Lists_W_Const"))
    If Len(arySelected(6)) = 0 Then Call FindStyleOptions(Range("CABI_FindDrawFrontConst"), Range("Lists_W_DrawFrontConst"))
End Sub
Private Sub FindStyleOptions(rngFind As Range, rngList As Range, Optional rngCheckList As Range)
    Dim intListCntr As Integer, intFindCntr As Integer
    Dim intStrFinder As Integer, intCheckCntr As Integer
    Dim strHoldCheck As String
    Dim strHoldFound As String, strHoldOption As String
    'Go through the appropriate find list (across the top of CABI)
    For intFindCntr = 1 To rngFind.Columns.Count
        strHoldOption = rngFind.Cells(1, intFindCntr)
        strHoldFound = rngFind.Cells(1, intFindCntr).Offset((intHoldRow - 1), 0)
        If Len(strHoldFound) > 0 Then
            If rngCheckList Is Nothing Then
                For intListCntr = 1 To rngList.Rows.Count
                    If rngList.Cells(intListCntr, 1) = strHoldFound Then
                        Call AddXes(rngList, strHoldFound, "X")
                        Exit For
                    End If
                Next intListCntr
            Else
                intStrFinder = 1
                Do While intStrFinder < Len(rngFind.Cells(1, intFindCntr).Offset((intHoldRow - 1), 0))
                    strHoldCheck = Mid(rngFind.Cells(1, intFindCntr).Offset((intHoldRow - 1), 0), intStrFinder, 2)
                    intStrFinder = intStrFinder + 3
                    For intCheckCntr = 1 To rngCheckList.Rows.Count
                        If strHoldCheck = rngCheckList(intCheckCntr, 1) And Len(rngCheckList(intCheckCntr, 3)) > 0 Then
                            Call AddXes(rngList, strHoldOption, "X")
                            intStrFinder = 99
                            Exit For
                        End If
                    Next intCheckCntr
                Loop
            End If
        End If
    Next intFindCntr
End Sub
Private Sub AddXes(rngList As Range, strToFind As String, strX As String)
    Dim intXcntr As Integer
    For intXcntr = 1 To rngList.Rows.Count
        If rngList.Cells(intXcntr, 1) = strToFind Then
            rngList.Cells(intXcntr, 3) = strX
            Exit For
        End If
    Next intXcntr
End Sub
Private Sub RemoveNonXes(rngList As Range)
    Dim intXcntr As Integer
    For intXcntr = 1 To rngList.Rows.Count
        If Len(rngList(intXcntr, 3)) = 0 Then
            rngList.Range("A" & intXcntr & ":B" & intXcntr) = ""
        Else
            rngList.Range("C" & intXcntr) = ""
        End If
    Next intXcntr
End Sub
Private Sub RemoveXes(rngList As Range)
    rngList.Range("C1:C" & rngList.Rows.Count) = ""
End Sub 
```

说明：假设您有 6 个不同汽车状况的列表。因此，Make 将是 Chevy、Ford、Honda 的一个列表... Model 将是 Malibu、Focus、Civic 的另一个列表...但您也将拥有 Color Blue、Red、Green... 所以如果您的用户想要绿色汽车，该程序引用一个库存清单，并摆脱任何品牌，型号等......绿色不可用。同样，用户可以从 Model 列表中单击 Civic，它会从 Make 中淘汰除 Honda 之外的所有车型，依此类推。无论如何，这就是我想要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:11:54.397

没有看到代码很难说。当您运行脚本时，'AfterUpdate' 事件可能会被反复触发，从而导致无限循环。尝试使用计数器将更新限制为一个更改，并在计数器大于 0 时让它退出循环。

# android - 外部库中的Android BroadcastReceiver？

> ID：11487260
> 
> 赞同：3
> 
> 时间：2012-07-14T20:42:43.260
> 
> 标签：android, broadcastreceiver

目前我正在玩Android-SDK。BroadcastReceiver 真的很有趣，因为我可以从 Googly Play-store 获得推荐人信息。`com.android.vending.INSTALL_REFERRER`如果我在一个项目中使用BroadcastReceiver，它的效果非常好。但是我想编写一个小型库来包含在我的项目中，并且我的 BroadcastReceiver ( `de.sm.android.reftest.RefReceiver`) 的实现应该是其中的一部分。所以我有两个项目：

1.  ReferralTest，我的主要项目（在项目属性中`android.library.reference.1=../SDKTest`：）
2.  SDKTest，我的库项目（在项目属性中：）`android.library=true`，包含`de.sm.android.reftest.RefReceiver`

我`AndroidManifest.xml`的主要项目的文件包含：

```
 <receiver android:name="de.sm.android.reftest.RefReceiver" android:exported="true">
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </receiver> 
```

这是行不通的。我不确定它是否不能正常工作（我不这么认为）或者我是否愚蠢（这可能是问题所在）。

任何帮助表示赞赏。

在此先感谢，萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:20:30.513

好的，我找到了答案……我的实现是正确的，但是我的 am broadcast 测试不是……这个链接很有帮助：[如何测试 android 推荐跟踪？](https://stackoverflow.com/questions/5890914/how-to-test-android-referral-tracking)

# jpa - 如何在 JPA 中不写 Query 实现分页？

> ID：11487263
> 
> 赞同：1
> 
> 时间：2012-07-14T20:43:10.870
> 
> 标签：jpa, annotations, pagination, container-managed

我有一个具有映射`Question`对象`List`的`Comment`对象。`@OneToMany`该`Question`对象具有`fetchComments(int offset, int pageSize)`获取给定问题的评论的方法。

我想通过一次获取有限数量的评论来对评论进行分页。

如果我写一个`Query`对象，那么我可以设置记录偏移量和最大记录以使用`Query.setFirstResult(int offset)`和获取`Query.setMaxResults(int numberOfResults)`。但我的问题是如何（如果可能的话）无需编写`Query`带有简单注释或属性的 ie 即可获得相同的结果。更清楚的是，我需要知道是否有类似的东西

```
@OneToMany(cascade = CascadeType.ALL)
@Paginate(offset = x,maxresult = y)//is this kind of annotation available?
private List<Comment> comments; 
```

我读过`@Basic(fetch = FetchType.LAZY)`它只加载运行时需要的记录，但我无法控制那里获取的记录数量。我是 JPA 的新手。所以请考虑一下我是否错过了一些非常简单的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:16:28.990

不，JPA 中没有这样的功能。概念本身也有点混乱。使用您的示例偏移量（以及 maxresult ）是编译时间常数，并且不能很好地用于分页目的。通常，实体中的 JPA 注释定义结构，而不是依赖于上下文的结果（为此需要有查询）。

如果在列表中访问实体时获取实体就足够了，并且如果您使用的是 Hibernate，那么您可以获得的最接近的是额外的[@LazyCollection](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/LazyCollection.html)：

```
@org.hibernate.annotations.LazyCollection(LazyCollectionOption.EXTRA) 
```

# .htaccess - .htaccess 基于 cookie 的动态无缓存

> ID：11487272
> 
> 赞同：2
> 
> 时间：2012-07-14T20:44:42.490
> 
> 标签：.htaccess, cookies, cache-control

我正在编写一个在线网站编辑器，人们可以在其中制作页面并在他们自己的网站中编辑他们的内容。系统编写真正的 .html 页面和真正的 .css 页面。问题有两个方面：我想在他们编辑时禁用他们网站上所有内容的缓存，以便他们始终获得所有内容的最新版本，并且我不想为所有人完全禁用缓存，以便网站表现良好。我的想法是，我会寻找标识登录用户的 cookie，并在 .htaccess 中使用它来确定何时禁用缓存。我没有在 stackoverflow、askapache、Google 等中找到任何处理基于 cookie 设置特定请求标头的内容，但通过这些资源，我能够拼凑以下内容：

```
RewriteEngine on
RewriteCond %{HTTP_COOKIE} !^.*mode=.*$ [NC]
RewriteRule ^(.*)$ - [env=CACHECONTROL:max-age=604800]
RewriteCond %{HTTP_COOKIE} ^.*mode=.*$ [NC]
RewriteRule ^(.*)$ - [env=CACHECONTROL:no-cache]

Header set Cache-Control "%{CACHECONTROL}e" env=CACHECONTROL 
```

这在检测到 cookie 并且请求标头正在更改的意义上确实有效，但它似乎对用户体验没有任何影响。他们在缓存方面仍然存在巨大问题，他们在缓存中对其模板进行更改、发布，然后转到页面进行编辑，仍然可以查看旧版本的模板。

如果他们在未登录的情况下访问他们的网站，并且获得了 max-age 缓存，这是否意味着在他们登录后没有检查我的 .htaccess 文件？有没有更好的变量来设置这个？我已经束手无策了，真的可以用其他一些眼球来解决这个问题。

提前致谢！麦克风

*编辑*这是我现在使用的：

```
Header set Cache-Control "must-revalidate, private"
Header set Expires "-1" 
```

似乎“必须重新验证”比指定超时年龄更重要，而且它似乎有所帮助。我可以为所有用户使用相同的标头也很好，这意味着更少的服务器端编程和更多的静态服务文件。虽然它仍然不完美，我们仍然偶尔会收到有关缓存的抱怨。

# jquery - css缩放（-webkit-transform）div，它是jquery ui的子级，可拖动移动与拖动期间的光标不同

> ID：11487289
> 
> 赞同：2
> 
> 时间：2012-07-14T20:47:47.847
> 
> 标签：jquery, css, draggable, scale, css-transforms

我有一扇窗户，里面有一个孩子。孩子应该在窗户内移动。使用 css 转换 (-webkit-transform) 缩放窗口。我试过这样的事情：

```
html
<div class="window">
    <div class="rect"></div>
</div>​

css
.window
{
    width: 640px;
    height: 480px;
    background: gray;
    position: absolute;
    -webkit-transform: translate(-25%, -25%) scale(0.5);
}

.rect
{
    width: 60px;
    height: 40px;
    background: red;
}

js
$(function() {
    $('.rect').draggable({
        containment: 'parent'
    });
});​ 
```

​ 我已经在这里发布了 - [http://jsfiddle.net/bLKQj/12/](http://jsfiddle.net/bLKQj/12/) 孩子的移动速度比光标慢。如果缩放将> 1，它将移动得更快。如何解决？

PS：在变换`translate(-25%, -25%)`中是为了用固定的左上角进行缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T02:25:04.333

我会说你为什么需要使用 CSS 转换？您应该尽可能避免使用它们，因为它们没有得到很好的支持，并且它们会产生这样的意外后果。你能指定不同的高度和宽度吗？

# sql - 将两个表链接或映射在一起

> ID：11487291
> 
> 赞同：0
> 
> 时间：2012-07-14T20:48:05.473
> 
> 标签：sql

将我的数据视为按类别分隔的库存清单。当我开始时，我有一个应该分成两个表的表，否则在 oldTable 中，给定行中的列将是不相关的。我在我的数据库中创建了两个新表，一个用于类别，另一个用于数据/项目。现在我正在尝试使用 oldTable 现有数据来填充 newTable 数据/项目表，这样我就可以学习 SQL 而不必手动执行它。我手动填写的类别表，因为我看不到其他方法。

旧表有：

```
tableName (
  id, 
  categoryA, 
  categoryB, 
  categoryC, 
  categoryD, 
  categoryE, 
  categoryF,  
  isPriorityA, 
  isPriorityB, 
  isPriorityC, 
  isPriorityD, 
  isPriorityE, 
  isPriorityE
) 
```

新表有：

```
Categories (
 cat_id, 
  name
)

dataItem (
  item_id, 
  cat_id, 
  name, 
  priority, 
  description, 
  URL
) 
```

如何强制新的 dataItem 表要求匹配表列`cat_id`中的值之一？`Categories.cat_id`如果在范围之外添加值，也许会给出错误？我相信这可能是映射或链接表，从而使它们成为关系表。如何按字母顺序一次将 tableName 数据复制到 dataItem 表中的一列，带来名称、优先级并允许它自动增加`item_id`值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:23:59.517

听起来您想使用外键将 dataItem.cat_id 限制为 Categories.cat_Id 中的值。像这样的东西：

```
ALTER TABLE dataItem ADD FOREIGN KEY (cat_id) REFERENCES Categories(cat_id); 
```

确切的语法可能取决于您使用的数据库。有关外键的更多信息，请参见：[http ://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp)

# ios - 基于 CGMutablePathRefs 绘制（和剪辑）时如何在 drawRect 中剪辑

> ID：11487294
> 
> 赞同：1
> 
> 时间：2012-07-14T20:48:24.333
> 
> 标签：ios, core-graphics

在我的自定义控件中，我定义了一些 CGMutablePathRefs，其中包含绘制控件所需的线条和弧线；一个绘制整体填充形状，其他提供镜面高光。我还定义了两个 CGMutablePathRefs，其中包含作为控件活动和非活动状态的剪切掩码所需的路径。

我正在努力应用剪切路径。我以前使用剪切路径将渐变应用于图像，但这些绘图命令属于 CGContext... 品种，而不是 CGPath... 品种。

出于测试目的，我删除了镜面高光绘图方面，只是试图将大路径剪裁到较小的路径。这是我一直在测试的：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, inactiveClip); 
    CGContextClosePath(ctx);
    CGContextClip(ctx);

    CGContextAddPath(ctx, frontFace);
    CGContextSetLineWidth(ctx, 1.0);
    CGContextSetFillColorWithColor(ctx, [[UIColor blackColor] CGColor]);
    CGContextFillPath(ctx);

} 
```

通过将剪切命令放在任何绘图之前，我以为我是在对 CoreGraphics 说：“这是你应该实际绘制的区域。”

唉，什么都没画。

所以假设我有倒序我试过：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextAddPath(ctx, frontFace);
    CGContextSetLineWidth(ctx, 1.0);
    CGContextSetFillColorWithColor(ctx, [[UIColor blackColor] CGColor]);
    CGContextFillPath(ctx);

    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, inactiveClip); 
    CGContextClosePath(ctx);
    CGContextClip(ctx);

} 
```

这是对 CoreGraphics 说的，“好吧，在你实际着色位之前，对照这个剪辑区域检查它们。”

唉，什么都没有剪裁。

由于我的剪切路径使用一些相同的点和控制点，以相同的顺序，作为填充路径，我还用对 CGContextEOClip 的调用替换了对 CGContextClip 的调用，看看我是否真的在挣扎奇偶规则，但这似乎没有任何视觉影响。

我真的不知道是否需要将 CGContextAddPath 调用与 CGContextBeginPath/CGContextClosePath 调用括起来，但我试图做的是尽量减少 Apple 的示例代码和我的代码之间的差异。在他们的 CGContext 中，他们在 begin/close 调用之间绘制调用，所以我也是。

我在这里有什么误解？

# perl - 如何复制 CSV 文件，但跳过第一行？

> ID：11487297
> 
> 赞同：1
> 
> 时间：2012-07-14T20:49:41.480
> 
> 标签：perl, csv

我想编写一个脚本，它需要一个 CSV 文件，删除它的第一行并创建一个新的输出 csv 文件。

这是我的代码：

```
use Text::CSV_XS;
use strict;
use warnings;
my $csv = Text::CSV_XS->new({sep_char => ','});
my $file = $ARGV[0];
open(my $data, '<', $file) or die "Could not open '$file'\n";
my $csvout = Text::CSV_XS->new({binary => 1, eol => $/});
open my $OUTPUT, '>', "file.csv" or die "Can't able to open file.csv\n";
my $tmp = 0;
while (my $line = <$data>) {
    # if ($tmp==0)
    # {
    # $tmp=1;
    # next;
    # }
    chomp $line;
    if ($csv->parse($line)) {
        my @fields = $csv->fields();
        $csvout->print($OUTPUT, \@fields);
    } else {
        warn "Line could not be parsed: $line\n";
    }
} 
```

在 perl 命令行上我写：`c:\test.pl csv.csv`它不会创建`file.csv`输出，但是当我双击脚本时，它会创建一个空白的 CSV 文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:07:07.753

您的程序编写得并不理想，但是如果您按照您的描述在命令行上传递 CSV 文件，我无法解释为什么它不起作用。你得到错误`Could not open 'csv.csv'`或`Can't able to open file.csv`？如果不是，则必须在当前目录中创建该文件。也许你找错地方了？

如果您需要做的只是删除第一行，则无需使用模块来处理 CSV 数据 - 您可以将其作为简单的文本文件处理。

如果文件是在命令行中指定的，如在 中 `c:\test.pl csv.csv`，您可以读取它而无需使用`<>`运算符显式打开它。

`$.`该程序从输入文件中读取行，并且仅当行计数器（变量）不等于 1时才将它们打印到输出。

```
use strict;
use warnings;

open my $out, '>', 'file.csv' or die $!;

while (my $line = <>) {
  print $out $line unless $. == 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:04:34.790

Yhm..您不需要任何模块来完成此任务，因为 CSV（逗号分隔值）只是文本文件 - 只需打开文件，然后遍历其行（写入输出除特定数字之外的所有行，例如 first ）。这样的任务（跳过第一行）非常简单，使用命令行单行代码可能比使用专用脚本更好。

快速搜索 - 示例参见此链接，有许多关于 perl 输入/输出操作的教程

[http://learn.perl.org/examples/read_write_file.html](http://learn.perl.org/examples/read_write_file.html)

PS。Perl 脚本（程序）通常不会“编译”成二进制文件——它们当然是“编译”的，但是，嗯，是动态的——这就是为什么 /usr/bin/perl 被称为“解释器”而不是“编译器”之类的gcc 或 g++。我猜你正在寻找的是一些带有语法高亮和其他开发产品的编辑器——你可能可以尝试使用带有 perl 插件的 Eclipse（跨平台）。

[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

[http://www.epic-ide.org/download.php/](http://www.epic-ide.org/download.php/)

这个

```
user@localhost:~$ cat blabla.csv | perl -ne 'print $_ if $x++; ' 
```

跳过第一行（仅当变量在每次使用后递增大于零时才打印出来）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:24:13.323

由于 Windows，您错过了第一个（也是唯一一个）论点。

我认为这个问题会对您有所帮助： [@ARGV is empty using ActivePerl in Windows 7](https://stackoverflow.com/questions/4234581/argv-is-empty-using-activeperl-in-windows-7)

# delphi - 在 VirtualTreeView 中编辑根节点单元格文本

> ID：11487300
> 
> 赞同：4
> 
> 时间：2012-07-14T20:50:34.880
> 
> 标签：delphi, delphi-7, virtualtreeview, tvirtualstringtree

我想更改现有虚拟（根）节点的单元格文本。我可以更改数据，但我必须刷新整个 TreeView 以便再次触发 GetText。是否有更简单的方法或可能的方法来仅刷新 1 个根节点而不是整个树？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:50:14.767

在以下代码中，我尝试模拟您的节点更新事件。这里由按钮单击`Button1Click`事件表示。在这里，如果您单击按钮，数据记录中的值将增加，并且节点将被强制重新绘制（触发`OnGetText`事件的原因，您将在该记录中准备好获取这个新增加的值）。在您的真实代码中，您需要执行以下操作：

*   找到要更新的节点（我找到了`TopNode`:-)
*   更新该节点的数据记录（`Count`在我的例子中值是递增的）
*   为那个节点调用`InvalidateNode`（什么会触发一些事件的*虚拟事件链*，但`OnGetText`会在其中）

```
type
  PTreeData = ^TTreeData;
  TTreeData = record
    Title: string;
    Count: Integer;
  end;

procedure TForm1.FormCreate(Sender: TObject);
var
  TreeData: PTreeData;
  TreeNode: PVirtualNode;
begin
  // this is just for memory leaks report
  ReportMemoryLeaksOnShutdown := True;
  // initialize data size for our data record
  VirtualTree.NodeDataSize := SizeOf(TTreeData);
  // add one node and store it to the TreeNode variable
  TreeNode := VirtualTree.AddChild(nil);
  // get the pointer to just created node data record
  TreeData := VirtualTree.GetNodeData(TreeNode);
  // and assign some values to that data record
  TreeData.Title := 'Count: ';
  TreeData.Count := 0;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  TreeData: PTreeData;
  TreeNode: PVirtualNode;
begin
  // now I take the the top node just as an example
  TreeNode := VirtualTree.TopNode;
  // get the pointer to its data record
  TreeData := VirtualTree.GetNodeData(TreeNode);
  // increase the value in data record for this node
  TreeData.Count := TreeData.Count + 1;
  // and force the node to repaint, what will except
  // other events trigger also the OnGetText one
  VirtualTree.InvalidateNode(TreeNode);
end;

procedure TForm1.VirtualTreeGetText(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Column: TColumnIndex; TextType: TVSTTextType;
  var CellText: string);
var
  TreeData: PTreeData;
begin
  // here I'll get the pointer to data of the currently refreshed cell's node
  TreeData := VirtualTree.GetNodeData(Node);
  // and return the caption of the cell
  CellText := TreeData.Title + IntToStr(TreeData.Count);
end;

procedure TForm1.VirtualTreeFreeNode(Sender: TBaseVirtualTree;
  Node: PVirtualNode);
var
  TreeData: PTreeData;
begin
  // this is here because of VT memory leaks, so get the pointer to data
  TreeData := Sender.GetNodeData(Node);
  // and finalize them
  Finalize(TreeData^);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T10:22:50.950

此代码是使用编辑框文本更改编辑选定节点文本

```
procedure Form1.btnEditTextClick(Sender: TObject);
var
  Data: PTreeData;
begin
  Data := VST.GetNodeData(VST.FocusedNode);

  Data.Title := Edit2.Text;
  VST.InvalidateNode(VST.FocusedNode);

end; 
```

# ssas - SQL Server Analysis Services - 数据挖掘错误 5

> ID：11487305
> 
> 赞同：1
> 
> 时间：2012-07-14T20:51:18.533
> 
> 标签：ssas, olap-cube, ssas-2008

当我尝试在其中使用 NestedTable 处理 DataMining 时出现此错误。

```
Error 5 Errors in the metadata manager. The 'XYZZZZZ' dimension in the 'Dim XYZ' measure group has either zero or multiple granularity attributes. 
Must have exactly one attribute. 0 0 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:42:41.827

你能发布你的采矿结构的代码吗？

我认为您必须使用 MISSING_VALUE_SUBSTITUTION 参数创建它以摆脱零粒度。当我有一个时间序列时，它总能解决我的问题

# android - 你如何从一个按钮打开一个画廊？

> ID：11487306
> 
> 赞同：-3
> 
> 时间：2012-07-14T20:51:18.893
> 
> 标签：android, button, gallery, photo

我制作了一个按钮，点击后我希望它打开一个画廊。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:56:36.133

已经有一个关于这个的[问题](https://stackoverflow.com/a/6016352/377628)。你需要制作一个`Intent`. 这是该答案的代码：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_IMAGE); 
```

# c++ - C++中的双重排序

> ID：11487310
> 
> 赞同：2
> 
> 时间：2012-07-14T20:52:43.953
> 
> 标签：c++, sorting

我正在开发一个用 C++ 管理酒店的程序。我有一个房间列表。所有这些房间都有楼层号、房间号和价格。在我的一个报告/显示功能中，我必须按照楼层号的顺序打印房间，然后是房间号。我的意思是每层楼会有多个房间，所以如果你对 1 楼的所有房间进行排序，它会在进入下一层之前按升序对房间进行排序。

现在，我了解了如何按楼层号对房间进行排序，并且我知道如何按房间号进行排序。我不明白的是我如何将它组合起来，这样一个人就不会重写另一个人的顺序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T20:59:17.967

为了对`Room`s 的容器进行排序，您需要调用`std::sort`它。它有一个带比较器的重载，即确定哪个`Room`是“更少”的函数对象。如果要先按楼层排序，然后按房间号排序，则必须编写适当的函数对象（或简单的函数）。

```
bool CompareByFloorAndRoomNo(const Room& r1, const Room& r2) 
{
    if(r1.FloorNo() != r2.FloorNo())
        return r1.FloorNo() < r2.FloorNo();
    return r1.RoomNo() < r2.RoomNo();
}

...

int main()
{
    ...
    std::sort(rooms.begin(), rooms.end(), CompareByFloorAndRoomNo);  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T21:00:56.760

好吧，必须定义的只是小于运算符。

基本上，如果 Room1.floor < Room2.floor 那么 Room1 必须比 Room2 先出现。如果 Room1.floor==Room2.floor 并且 Room1.number < Room2.number，Room1 仍然需要在 Room2 之前。否则 Room2 必须先出现。

代码：

```
sort(rooms.begin(),rooms.end(),[](const Room& first,const Room& second)
    {
        return first.floor<second.floor || 
            (first.floor == second.floor && first.number<second.number );
    }
); 
```

**编辑：**

此代码与 C++11 兼容。要编译它，您应该使用 -std=c++0x 标志（在 g++ 4.5 和 4.6 上），或者 -std=c++11 如果使用 g++ 4.7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:59:23.377

每个排序算法最终都必须比较两个项目以确定哪个应该先出现。此时，您应该将两个值作为一组进行比较。

让我们想想应该发生什么：

*   如果楼层数越大，则越大。
*   如果楼层数越小，则越小。
*   如果楼层相同，则比较房间号来决定。

# git - 我可以自己托管任何免费的版本控制托管应用程序吗？

> ID：11487312
> 
> 赞同：1
> 
> 时间：2012-07-14T20:53:06.583
> 
> 标签：git, svn, version-control, mercurial, versioning

我正在寻找一些允许我在自己的服务器上管理 git、mercurial 甚至颠覆存储库的服务器软件（我不挑剔，我可以接受其中任何一个）。完美的东西当然是 github 或 bitbucket 服务器应用程序的私有可下载版本......

我需要的主要功能是一个 Web 界面，用于创建和管理位于我的服务器上的一些版本控制存储库，并控制用户对任何这些资源的访问（最好不授予这些用户 shell 访问权限）。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T21:11:34.973

你可以试试[gitlab](http://www.gitlabhq.com)。它的 web 界面有一些与 Github 相似的功能，比如 Pull（或 Merge）请求、提交概述等，而且 Gitlab 是免费的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T01:19:47.360

Mercurial 和 git 都提供了它们自己的适合服务器的 Web 界面。Mercurials 被称为“hgweb”，而 git 被称为“gitweb”。它们是免费的并且相对容易配置。如果您想要更多 bitbucket / github 之类的东西（拉取请求、团队、错误跟踪器等），那么您想要[Rhodecode](http://rhodecode.org/)（对于 Mercurial）或[gitorious](http://gitorious.org/)对于 git。我个人只使用 hgweb：[http: //ry4an.org/hg](http://ry4an.org/hg)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-14T23:09:11.300

当然它很昂贵，但你可以下载 Github：[https ://enterprise.github.com/](https://enterprise.github.com/)

AFAIK，它与在 Github 上运行的应用程序完全相同，但在您自己的服务器上。

# php - Magento 系统配置：对于部分和组，frontend_type 有什么用？

> ID：11487314
> 
> 赞同：3
> 
> 时间：2012-07-14T20:53:23.137
> 
> 标签：php, magento, configuration

在`system.xml`我可以`frontend_type`为一个部分和组定义一个。

的示例`Mage_Catalog`。

```
<sections>
    <catalog translate="label" module="catalog">
        <class>separator-top</class>
        <label>Catalog</label>
        <tab>catalog</tab>
        <frontend_type>text</frontend_type>
        <sort_order>40</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>
        <groups>
            <frontend translate="label">
                <label>Frontend</label>
                <frontend_type>text</frontend_type>
                <sort_order>100</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <fields> 
```

有没有这*不是*文本的例子？什么是用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T10:05:26.553

据我从Alan Storm 的[这篇文章](http://alanstorm.com/magento_system_configuration_in_depth_tutorial)`<frontend_type/>`中了解到，工厂样式模式中的值用于实例化格式为的类

```
Varien_Data_Form_Element_Type 
```

`Type`的值在哪里`<frontend_type/>`。这发生在未在部分和组上调用`addField`的类的方法中。`Varien_Data_Form_Element_Abstract`

# iphone - 导航栏中的多选 UISegmentedControl

> ID：11487319
> 
> 赞同：1
> 
> 时间：2012-07-14T20:53:55.403
> 
> 标签：iphone, ios, xcode

我正在尝试实现一个支持多项选择的 UISegmentedControl，如下面的评论中所述。但是，我不知道如何创建带有圆边的 UILabel，也不明白为什么将 UILabel 用作 UIButtons 的容器？

非常感谢任何帮助！

> 我在发布应用程序时所做的一种方法是使用带有圆边的 UILabel 并将矩形 UIButtons 放入其中。这样，您可以获得组合控件的圆角边缘。享受。– Damien Del Russo 2 月 13 日 7:03

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:57:28.527

一种方法是将按钮排列成一排并在它们上面添加 Imageview（Imageview 将与按钮重叠，但按钮仍然是可点击的。）然后你可以在按钮点击时替换图像你应该使用应该显示的图像类型选择了哪个按钮。

# ruby-on-rails - Heroku 不运行 Hartl 的 Rails 教程中的 Rails 应用程序

> ID：11487321
> 
> 赞同：-1
> 
> 时间：2012-07-14T20:54:29.317
> 
> 标签：ruby-on-rails, ruby, heroku

我在[Michael Hartl 的 Ruby on Rails 教程第 5 部分的末尾](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec%3alayout_conclusion)，我的应用程序在开发中工作，但是当我输入：

```
heroku open 
```

我得到标准“我们很抱歉，但出了点问题。” 当我输入：

```
heroku logs 
```

我得到（缩写，我选择了相关的输出，它出现了 3 次，略有不同）：

```
Processing by StaticPagesController#home as HTML

Rendered static_pages/home.html.erb within layouts/application (1.6ms)

Completed 500 Internal Server Error in 9ms

4:     <title><%= full_title(yield(:title)) %></title>

ActionView::Template::Error (Invalid CSS after " *": expected "{", was "= require_self"

2: <html>

   (in /app/app/assets/stylesheets/application.css)): 
```

我的 application.css 文件没有改变并且完全被注释掉了。

关于问题是什么的任何想法？我有一个gemfile `gem 'bootstrap-sass', '2.0.0'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:36:43.770

```
/app/app/assets/stylesheets/application.css 
```

您在路径中有两个**/app目录。**要验证，请运行

```
rails console
> Rails.application.config.assets.paths 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:52:41.943

如果您的 css 中有 *= require_self，我猜这意味着您的资产没有编译。

我会仔细检查您的样式表，并记住您通常不应该在 application.css 文件中放置任何实际的 css。

另外，我很确定 Rails 会将你所有的样式表编译成一个大的样式表以供生产，这意味着如果其中一个有问题，整个事情都可能有问题。

这就是我所得到的——这是一个奇怪的错误，因为 css 通常是非常宽容的。

# php - 闭包是对象吗？

> ID：11487324
> 
> 赞同：1
> 
> 时间：2012-07-14T20:55:44.180
> 
> 标签：php, php-5.3

我正在和一个小组的一些朋友谈论闭包（来自 PHP 5.3）。

当我做 a`var_dump(function(){});`结果是`object(Closure)`. 有人说：但闭包不是对象。

我了解当匿名函数实现闭包类时，结果需要是一个对象，仅此而已或不同。

匿名函数是对象吗？

**更新** 我已阅读“匿名函数是使用闭包类实现的。” （http://php.net/manual/en/functions.anonymous.php），所以，我认为这是一个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:57:58.363

手册中措辞强硬：

> 在 PHP 5.3 中实现的匿名函数产生这种类型的对象 [Closure]。这个事实曾经被认为是一个实现细节，但现在可以依赖它。

[http://www.php.net/manual/en/class.closure.php](http://www.php.net/manual/en/class.closure.php)

需要明确的是，答案是：是的，它们是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:58:22.470

你能详细说明你想做什么吗？在 PHP`Closure`中是 a `final class`，所以从技术上讲是的，它是一个对象。

# c# - 如何从托管 (C#) 数组中创建一个 `NSArray`，比如`int`s？

> ID：11487325
> 
> 赞同：6
> 
> 时间：2012-07-14T20:55:43.703
> 
> 标签：c#, xamarin.ios, nsarray

我有一个 s 的托管数组`int`，我们称之为 s，`int[] intArray`我正在尝试从中创建一个`NSArray`of `NSNumber`s。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T20:55:43.703

鉴于：

```
int[] intArray = {1,2,3}; 
```

你可以做：

```
NSArray nsArray = NSArray.FromObjects(intArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T16:03:39.973

如果 (C#) 数组值在您创建`NSArray`实例时已知，那么您的答案是最简单的方法。

另一种方法是，如果您需要在创建后修改（例如添加更多或删除项目）数组，则创建一个`NSMutableArray`并调用其`Add`方法来添加您自己的值。

由于您正在使用`int`，您需要调用`NSObject.FromObject`您拥有的每个整数。

```
int[] intArray = {1,2,3};
var nsArray = new NSMutableArray (3);
foreach (int i in intArray)
   nsArray.Add (NSObject.FromObject (i)); 
```

# python - python 正则表达式多个查找

> ID：11487328
> 
> 赞同：1
> 
> 时间：2012-07-14T20:55:57.047
> 
> 标签：python, regex, string

我正在尝试从 Web 请求中正确提取一些 cookie。基本上我有这个字符串：

```
 str="""Cole_gal_langid=0; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_styleid=4; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_viewid=test; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_appid=gal; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_navk=common.invalidBookmark; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_trans=InvalidBookmark; Expires=Sun, 14-Jul-13 20:37:22 GMT""" 
```

我想删除此字符串中的所有“Expires=Sun，14-Jul-13 20:37:22 GMT”条目。所以这个字符串变成了这样：

```
str="""Cole_gal_langid=0; Cole_gal_styleid=4; Cole_gal_viewid=test; Cole_gal_appid=gal; Cole_gal_navk=common.invalidBookmark; Cole_gal_trans=InvalidBookmark;""" 
```

我正在考虑为此使用 Re：

```
import re

str="""Cole_gal_langid=0; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_styleid=4; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_viewid=test; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_appid=gal; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_navk=common.invalidBookmark; Expires=Sun, 14-Jul-13 20:37:22 GMT, Cole_gal_trans=InvalidBookmark; Expires=Sun, 14-Jul-13 20:37:22 GMT"""

a = re.search('(Cole_gal_*.\=*)[^;]*', str)
if a:
   quote = "Regex found this: "+a.group(0)+"\r\n"
   print quote 
```

不幸的是，我只得到一个结果而不是所有实际的 cookie

任何帮助或建议将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:12:50.623

Removes multiple occurrences of a pattern a job for [*re.sub*](http://docs.python.org/library/re.html#re.sub):

```
>>> re.sub(r'Expires=.*?GMT([,;]|$)', '', s)
'Cole_gal_langid=0;  Cole_gal_styleid=4;  Cole_gal_viewid=test;  Cole_gal_appid=gal;  Cole_gal_navk=common.invalidBookmark;  Cole_gal_trans=InvalidBookmark; ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T20:58:16.063

怎么样[`findall`](http://docs.python.org/library/re.html#re.findall)？

> Return all non-overlapping matches of pattern in string, as a list of strings. The string is scanned left-to-right, and matches are returned in the order found. If one or more groups are present in the pattern, return a list of groups; this will be a list of tuples if the pattern has more than one group. Empty matches are included in the result unless they touch the beginning of another match.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:57:44.173

看`re.finditer`功能。

# ruby-on-rails - 如何在 Windows 上加快 ruby on rails 测试？

> ID：11487335
> 
> 赞同：3
> 
> 时间：2012-07-14T20:56:51.147
> 
> 标签：ruby-on-rails, windows

我已经开始学习使用在 Windows 7 上运行的 Ruby on Rails，运行测试的时间很痛苦，我想知道是否可以加快速度。现在我正在使用默认的测试框架（继承自 ActionController），带有 SQLite 数据库和 webrick Web 服务器。

虽然单元和功能测试报告的运行时间不到 2 秒，但从我从命令行运行测试到完成实际上是 40 秒。

朋友推荐我使用guard。看起来它会在我保存后立即开始测试，但看起来真正的成本是启动网络服务器或数据库。我想知道设置 apache 或 mysql 并在本地使用它们是否会更好。

无论如何，人们有什么技巧可以加快 Windows 上的 ruby​​ on rails 测试？我尝试在 Amazon EC2 linux 微型实例上运行测试（再次使用 webrick 和 sqlite），并且启动时间很长（尽管我没有计时）。

我试过“rake test --trace”。有一个明显的停顿：

*   在第一行输出之前
*   在输出“执行环境”和“执行 db:abort_if_pending_migrations”之间
*   在“执行测试：单元”和“运行选项：”之间

    第一次停顿似乎更糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:44:24.370

你最好的选择是使用现在在 Windows 中工作的[spork 。](https://github.com/sporkrb/spork)它通过预先填充就绪进程池（称为“杂志”策略）在 Windows 上运行。结果是网络服务器启动时间大大减少。

如果在 Windows 上运行 rails 确实是瓶颈，那么您可以使用[VirtualBox](https://www.virtualbox.org/)运行虚拟机并运行 Ubuntu 实例并在 VM 中处理您的 rails 项目。

# c - 在freebsd9下用C找到硬盘名称

> ID：11487337
> 
> 赞同：2
> 
> 时间：2012-07-14T20:57:04.697
> 
> 标签：c, freebsd

我想在 FreeBSD 9 下使用 C 查找硬盘驱动器名称（例如：ada、da 等）。硬盘驱动器未挂载（因此我无法使用 statfs），可以包含不同类型的文件系统并且可以是不同的硬件架构。

此外，如果有一个基于 shell 的解决方案（没有 grepping 到 camcontrol 输出），我会很高兴听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:00:39.263

如果您只是在查找设备名称，您可以在 /dev 下查找与您要查找的设备匹配的设备。一台机器可以有许多硬盘驱动器，并且别名是可能的。您还可以拥有特定于某种 RAID 控制器的设备名称，例如 /dev/mfid、/dev/aacd、/dev/mfisyspd 或 /dev/twe。

您应该查看 geom 子系统以了解这些东西是如何工作的。要查看的联机帮助页：geom(4)、GEOM(4)、libgeom(3)。

您可以阅读快速 sysctls 以了解系统的配置方式，包括 kern.geom.conftxt 和 kern.geom.confxml，具体取决于您是否希望将文本作为代码的输入。

# python - 在 Python 中组合不同不透明度的图像？

> ID：11487338
> 
> 赞同：1
> 
> 时间：2012-07-14T20:57:06.787
> 
> 标签：python, image, opacity, image-segmentation

我想编写一个 Python 程序来预测用户正在输入的状态并在地图上突出显示预测的城市。例如，如果用户键入“New”并点击预测按钮，程序应该突出显示以下城市：纽约、新墨西哥、新泽西和新罕布什尔。应该通过改变不透明度来突出城市。

我的想法是为每个状态创建一个图像，然后通过更改 Alpha 通道并将结果显示给用户，将它们以不同的不透明度组合在一起。

以下代码是我迄今为止为混合具有不同不透明度的图像所做的，但我认为这不是一个好的解决方案，并且必须有更好的方法来做到这一点（或者可能没有）。

有没有办法分割地图并分别更改每个段的不透明度？如果没有，什么可能是更好的解决方案？你能给我示例代码吗？

```
from Tkinter import Tk, Frame, Canvas
import ImageTk
import Image

#create a mixed images
handle = Image.open("C:\images\1.jpg")##  first image (first state)
handle.putalpha(50)
handle.save("bv.png")
df=Image.open("bv.png")
dd =Image.open("C:\images\2.jpg") ##  second image (second state)
df.paste(dd,(100,200))

#show the mixed image
t = Tk()
frame = Frame(t)
frame.pack()
canvas = Canvas(frame, bg="black", width=1024, height=768)
canvas.pack()
photoimage = ImageTk.PhotoImage(df)
canvas.create_image(512, 384, image=photoimage)
t.mainloop() 
```

# cocos2d-iphone - Cocos2d 子弹运动

> ID：11487341
> 
> 赞同：0
> 
> 时间：2012-07-14T20:57:14.383
> 
> 标签：cocos2d-iphone, game-physics, ccsprite

到目前为止，我使用 CCAction moveTo 将子弹（精灵）移动到玩家位置。我进行了设置，以便子弹始终使用 t = d/v 以恒定速率行进。但我需要帮助，以便子弹穿过给定点并继续前进一定距离。

```
CCSprite * bullet = [CCSprite spriteWithFile:@"Projectile.png"];
    int gunRange = 300;
    int velocity = 300;
    int  t = distanceFromPlayer/velocity;
    CCAction *shoot = [CCMoveTo actionWithDuration:t
                                          position:player.position];
    bullet.position = enemy.position;
    if (distanceFromPlayer <= gunRange) {
        [self addChild:bullet];
        [bullet runAction:shoot];
    } 
```

需要知道如何在射程内射击（我想我有那个部分），朝玩家位置射击并在那里继续朝那个方向前进（不知道如何做到这一点），并在之后移除子弹精灵它已经行进了等于炮射程的距离（对此也不知道）。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:00:38.280

这条线对我来说没有意义：

```
bullet.position = enemy.position; 
```

使用 MoveTo 将子弹移动到敌人的位置而不是上面的线。

另外，要将子弹从敌人身边移到某个位置，只需使用我们都会学到的旧高中三角学——直角三角形的 SOH CAH TOA。你有子弹的角度和到敌人的距离，所以使用信息和直角三角形触发，你可以让子弹经过目标一定距离

希望这可以帮助！

# mysql - 将数字从文本文件导入 mysql，其中逗号用作小数分隔符

> ID：11487350
> 
> 赞同：1
> 
> 时间：2012-07-14T20:58:20.280
> 
> 标签：mysql, replace

我想将数据加载到 mysql 中，但可用数据的格式类似于

```
37,85
36,41
38,21
38,44 
```

有没有办法在导入这些数据时将逗号替换为点，否则mysql只显示

```
 37
 36
 38
 38 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T21:46:00.340

您可以将值分配给变量并在进入的过程中对其进行操作。这样的事情应该可以工作。

`LOAD DATA LOCAL INFILE 'path.csv' INTO TABLE etf (@numcol) FIELDS TERMINATED BY '\n' SET mycol = REPLACE(@numcol, ',', '.')`

# time - 时间和性能分析工具

> ID：11487353
> 
> 赞同：1
> 
> 时间：2012-07-14T20:58:29.017
> 
> 标签：time, profiling, profiler, gprof

在大型代码库中，我正在使用计时器（开始和结束时间）来检测功能/方法。我将收集这些时间日志（类似于 gprof 所做的）。我想知道是否有可以用于以下用途的工具：

1.  后处理或数据挖掘这些时间日志并获得有用的信息，例如特定方法花费了多长时间、调用了多少次等。
2.  可视化这些时序日志。是否有可以生成计时日志的标准格式，以便我可以利用一些开源或商业 UI 工具。

代码库：C++、多线程（windows/linux）。但是，后处理日志可以在任何环境中进行。

# ruby - Rubymine 中所需的类没有自动完成功能

> ID：11487359
> 
> 赞同：0
> 
> 时间：2012-07-14T21:00:00.703
> 
> 标签：ruby, rubymine

我需要该`date`库，并且我希望该库中的方法出现在代码完成列表中（并因此获得内联文档）。然而什么也没有出现。为什么这样？

![在此处输入图像描述](../Images/2c3c9478e222b2102af7902f1abd7d74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:59:34.743

您使用的是什么 RubyMine 和 Ruby 版本？请尝试[4.5 Release Candidate](http://confluence.jetbrains.com/display/RUBYDEV/RubyMine+EAP)，该版本对我来说一切正常

# c++ - 使用基类的泛型方法指针调用派生类的方法

> ID：11487361
> 
> 赞同：2
> 
> 时间：2012-07-14T21:00:16.587
> 
> 标签：c++

我正在尝试创建一个事件处理系统，其中对象可以订阅其他对象广播的事件并在该事件被广播时调用方法。我正在尝试使用一个名为`EventHandler`. 对象调用一个公共方法，该方法`EventHandler`将它们订阅到某个对象广播的事件：

```
void startWatchingObjectEvent(PDObject * object, PDEvent event, PDObject* listener, PDReceiver receiver); 
```

`PDObject`是所有将由`EventHandler`. `PDEvent`只是一个标识事件的唯一字符串。

`PDReceiver`是我遇到问题的地方。我将它类型定义为`PDObject`类上的方法指针：

```
typedef void (PDObject::*PDReceiver)(PDObject*, PDEvent); 
```

现在`PDObject`该类本身实际上并没有任何要调用的方法，`EventHandler`而是将要调用的派生类`PDObject`，我想创建一个`EventHandler`可以存储的泛型类型，该类型将适用于`PDObject`. 我`EventHandler`以这种方式实现并尝试编写单元测试以确保它正常工作：

```
const PDEvent Test_PokeEvent = "Test_PokeEvent";

void Test_EventHandler_sendObjectMessage()
{
    EventHandler& eventh = EventHandler::instance();
    Test_PDObject caster;
    Test_PDObject listener;
    PDReceiver receiver = &Test_PDObject::test_poke;
    eventh.startWatchingObjectEvent(&caster, Test_PokeEvent, &listener, (listener.*receiver)(&caster, Test_PokeEvent));
    eventh.sendObjectEvent(&caster, Test_PokeEvent);
    assert(listener.test_wasPoked());
} 
```

`Test_PDObject`是一个派生类，它在被调用时会`PDObject`翻转`wasPoked`一点。`test_poke`

问题是编译器不喜欢我尝试将方法分配给`Test_PDObject`类型`PDReceiver`，因为`PDReceiver`它被定义为`PDObject`.

我想要做的甚至可能吗？我可以使用这个泛型方法指针类型来引用派生类的方法吗？还是我的方法完全有缺陷？

编辑：我发现我可以使用`static_cast`将派生类的方法指针转换为基类的方法指针，如下所示：

```
PDReceiver receiver = static_cast<PDReceiver>(&Test_PDObject::test_poke); 
```

到目前为止一切顺利！我的单元测试现在运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:57:38.753

*static_cast*确实是将type 的*指向成员的指针*`Child::*`强制转换为type所需的全部内容`Base::*`，但请记住，如果您不小心在（而不是相关的）实例上使用*指向成员*的指针，这可能会非常危险）。`Base``Child`

* * *

在下面的示例中，我们使用与前面描述的完全相同的方法，尽管调用`Child::func`类型对象`Base`会导致*未定义行为*，因为我们正在访问函数内部*不存在*的 Base 成员。

```
struct Base {
  /* ... */
};

struct Child : Base {

  void func () {
    this->x = 123;
  }

  int x;
}; 
```

```
int
main (int argc, char *argv[])
{
  typedef void (Base::*BaseFuncPtr) (); 

  BaseFuncPtr ptr_to_child_func = static_cast<BaseFuncPtr> (&Child::func);

  Base b;

  (b.*ptr_to_child_func) (); /* undefined-behavior */
} 
```

# jquery - 如果“x”为真，则删除在浏览器调整大小时准备好的文档上加载的函数？

> ID：11487362
> 
> 赞同：2
> 
> 时间：2012-07-14T21:00:36.477
> 
> 标签：jquery, resize, document-ready

如果窗口比“x”宽，我会在浏览器加载时加载等高函数。如果我想添加我的功能，我还想在浏览器调整大小为“重新测试”时再次检查“x”。

不知道该怎么做：

```
// global variables
var compareWidthColumn, //previous width used for comparison
detectorColumn, //the element used to compare changes
smallScreenColumn, // Size of maximum width of single column media query
jQuery(document).ready(function($) {
    //set the initial values
    detectorColumn = jQuery('.js');
    compareWidthColumn = detectorColumn.width();
    smallScreenColumn = '481';

    if ($(window).width() > smallScreenColumn) {
        $('#sidebar_right').equalHeights();
    }    

    jQuery(window).resize(function() {
        //compare everytime the window resize event fires
        if (detectorColumn.width() != compareWidthColumn) {

            //a change has occurred so update the comparison variable
            compareWidthColumn = detector.width();

            if (compareWidthColumn > smallScreenColumn) {
                $('#sidebar_right').equalHeights();
            }
        }

    });
}); 
```

整个概念是，如果浏览器宽度超过 481 像素，我只想应用“equalHeights”。这被应用于流体布局，我希望用户调整浏览器的大小，因此调用调整大小。

问题：初始加载工作正常，仅当窗口宽于 481px 时才调用 equalHeight。问题是如果用户从浏览器宽度超过 481 像素开始，然后将其缩小，equalHeight 不会被删除。

我该如何解决？*我尝试学习 jQuery，有点新。

**编辑** 评论中提到我测量了不同的东西，所以我也尝试了这个：

```
jQuery(document).ready(function($) {
    //set the initial values
    detectorColumn = jQuery('.js');
    compareWidthColumn = detectorColumn.width();
    smallScreenColumn = '481';

    if ($(window).width() > smallScreenColumn) {
        $('#sidebar_right').equalHeights();
    }    

    jQuery(window).resize(function() {

            if ($(window).width() > smallScreenColumn) {
                $('#sidebar_right').equalHeights();
            }
    });
}); 
```

我仍然遇到 equalHeights 没有“重新测量”屏幕调整大小时的元素的问题，如果屏幕小于 480 像素，也不会自行删除。

**编辑 2*** 我应该提到我使用 2 种不同测量值的原因是在此脚本之前，我声明了一些全局变量：

这是在我的 jquery 页面顶部的脚本上方。

```
// global variables
var compareWidthColumn, //previous width used for comparison
detectorColumn, //the element used to compare changes
smallScreenColumn, // Size of maximum width of single column media query 
```

我的想法是，如果我在函数之外声明它们将存储这些值。然后当屏幕调整大小时，它将新值与全局值进行比较，如果有变化，重做该功能。

这是不是很糟糕的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:08:58.807

也许我在这里遗漏了一些东西，但下面的简单方法应该可以工作（至少它会做一些事情）：

```
$(function() {
    var $sidebar_right = $('#sidebar_right'),
        smallScreenColumn = 481;
    $(window).on('resize', function() {
        $sidebar_right.height('auto');//remove previously applied equalHeights.
        if($(window).width() > smallScreenColumn) {
            $sidebar_right.equalHeights();
        }
    }).trigger('resize');
}); 
```

我假设这是根据[此处](http://www.cssnewbie.com/equalheights-jquery-plugin/)的评论`.height('auto')`删除先前应用的正确方法。`.equalHeights()`

您可能希望重新引入`detectorColumn`等，但至少从表面上看，这似乎是不必要的并发症。

当文档`.equalHeights()`中的所有示例均为`$(classSelector).equalHeights();`. 如果我的理解是正确的，那么类似的东西`$('#sidebar_right > div')`会更合适（即所有 sidebar_right 的子 div）。

**编辑**：我的错。通过设置`.equalHeights()`容器元素，它会自动“循环通过顶级子节点”。请参阅下面@shaWn 评论中的链接。

# php - 用于下载 Microsoft Word 和 Excel 文件的 http 标头

> ID：11487365
> 
> 赞同：13
> 
> 时间：2012-07-14T21:01:02.317
> 
> 标签：php, html

如果我默认在文件名中命名它，我可以成功下载我的 microsoft word。但是如果我使用 $variables 来命名它。文档扩展名将是未知的。

样本：

```
$No = 1; 
$Name = 'John'; 
$Test = 'Science';

//Download header
$document->save($doc);
header('Content-Description: File Transfer');
header('Content-Type: application/msword');
header("Content-Disposition: attachment; filename='$No_$Name_$Test.docx");
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($doc));
ob_clean();
flush();
readfile($doc); 
```

因此，如果我将文件名重命名为变量。文件下载将没有 docx 扩展名。任何人都可以建议？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T12:46:12.993

正确的标题是

对于 Excel (*.xlsx)：

```
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="' . $fileName . '"'); 
```

对于 Word (*.docx)：

```
header('Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document');
header('Content-Disposition: attachment;filename="' . $fileName . '"'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T21:01:51.843

改变这个

```
header('Content-Type: application/msword'); 
```

到

```
header('Content-Type: application/octet-stream'); 
```

编辑：

并改变

```
header("Content-Disposition: attachment; filename='$No_$Name_$Test.docx"); 
```

到

```
header("Content-Disposition: attachment; filename=\"{$No}_{$Name}_{$Test}.docx\""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T03:23:01.733

该标头的正确用法是：

`Content-Disposition: attachment; filename="fname.ext"`请注意，如果名称包含空格，则必须用引号引起来

请参阅[RFC6266](https://www.rfc-editor.org/rfc/rfc6266) *第 5 节。示例*

# java - JPanel 不响应 KeyListener 事件

> ID：11487369
> 
> 赞同：9
> 
> 时间：2012-07-14T21:01:58.347
> 
> 标签：java, swing, netbeans, keylistener

我有一个`JFrame`使用扩展自的类的子类`JPanel`

```
public class HelloWorld extends JPanel implements KeyListener 
```

`HelloWorld`我在框架中添加了一个对象- `app.add(helloWorld);`。现在，当我按下任何键盘键时，不会`KeyListener`调用任何方法，并且似乎`helloWorld`没有窗口焦点。我也尝试过调用`helloWorld.requestFocusInWindow();`但仍然没有响应。

我怎样才能让它响应按键？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T21:31:22.693

您是否`KeyListener`为您的`HelloWorld`面板设置了该面板本身？此外，您可能需要将该面板设置为可聚焦的。我用这段代码对其进行了测试，它似乎可以正常工作

```
class HelloWorld extends JPanel implements KeyListener{
    public void keyTyped(KeyEvent e) {
        System.out.println("keyTyped: "+e);
    }
    public void keyPressed(KeyEvent e) {
        System.out.println("keyPressed: "+e);
    }
    public void keyReleased(KeyEvent e) {
        System.out.println("keyReleased: "+e);
    }
}

class MyFrame extends JFrame {
    public MyFrame() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(200,200);

        HelloWorld helloWorld=new HelloWorld();

        helloWorld.addKeyListener(helloWorld);
        helloWorld.setFocusable(true);

        add(helloWorld);
        setVisible(true);
    }
    public static void main(String[] args) {
        new MyFrame();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-14T21:17:39.283

JPanel 默认情况下是不可聚焦的。也就是说，它不能响应焦点相关的事件，这意味着它不能响应键事件。

我建议尝试将窗格上的 setFocusable 设置为 true 并重试。确保首先单击面板以确保它获得焦点。

但是请理解，您会遇到奇怪的焦点遍历问题，因为面板现在将在用户浏览您的表单时接收输入焦点，使得焦点似乎在某些地方丢失了。

此外，`KeyListener`在这种情况下，s 往往不可靠（由于焦点管理器的工作方式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T09:57:23.960

很简单，你必须添加

```
addKeylistener(new HelloWorld()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-17T22:11:36.253

在 MyFrame 方法中添加它；

```
this.addKeyListener(helloWorld); 
```

# javascript - 来自 Javascript ReturnUrl 参数的 MVC3 操作调用始终为空

> ID：11487372
> 
> 赞同：0
> 
> 时间：2012-07-14T21:02:16.280
> 
> 标签：javascript, asp.net-mvc-3

我正在使用 javascript 加载一个动作，并发现当调用动作方法时，参数之一“returnUrl”始终为空。我已经确认 returnUrl 使用 firebug 正确填充在 javascript 中，但是在执行 .load 函数和 action 方法之间的某个地方，returnUrl 的值丢失并设置为 null。我发现如果我删除“id”参数并且只使用“returnUrl”参数，returnUrl 具有正确的值。我花了很多时间试图弄清楚这里发生了什么并且完全被难住了，我会感谢一些帮助。

我的Javascript：

```
<!-- Review Dialog Popup -->
<script type="text/javascript">
function showWriteReviewDialog(gameId, returnUrl) {
    if( $("#Review").length == 0)
    { 
        var url = "@Url.Action("WriteUserReview", "UGDBUser", new { id = "PLACEHOLDER", returnUrl =  Request.Url.ToString() })";

        // ajax load
        $('#writereview').load(url.replace('PLACEHOLDER', gameId));
    } else {
        // clear summary & reviewtext fields
        $('#summary,#reviewtext').val('');

        //reopen the write review dialog which was previously rendered
        $("#Review").dialog({
            modal: true, 
            autoOpen: true,
            resizeable: false
        }); 
    }
};
</script> 
```

我的愚蠢行动方法：

```
 [Authorize]
     public ActionResult WriteUserReview(Guid id, string returnUrl)
     {
        return Redirect(returnUrl);
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:08:39.523

生成的 URL 一定有问题。还要确保 id 是一个 guid。这是一个例子。

**选项1**

```
function showWriteReviewDialog(gameId, returnUrl) {

    var url = '@Url.Action("TestParams", "Home")?id=' + gameId + '&returnUrl=' + returnUrl;
    $("#writereview").load(url);

    //rest of your operations
}; 
```

**选项 2**

```
function showWriteReviewDialog(gameId, returnUrl) {

    var url = '@Url.Action("TestParams", "Home", new { id = "guid_replace", returnUrl = "url_replace"})';
    url = url.replace('guid_replace', gameId);
    url = url.replace('url_replace', returnUrl);

    $("#writereview").load(url);

    //rest of your operations
}; 
```

**击中动作的屏幕截图；它返回两个值（查看监视窗口）**

![在此处输入图像描述](../Images/7171143efa446203bfbde15236638972.png)

# php - php是否保存关联数组中的顺序？

> ID：11487374
> 
> 赞同：12
> 
> 时间：2012-07-14T21:02:25.710
> 
> 标签：php, arrays, associative-array

> **可能重复：**
> [PHP 关联数组是否已排序？](https://stackoverflow.com/questions/10914730/are-php-associative-arrays-ordered)

如果我将项目添加到具有不同键的关联数组中，是否保留了添加顺序？如何访问给定元素的“上一个”和“下一个”元素？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T21:03:50.890

是的，php 数组有一个隐含的顺序。使用[`reset`](http://php.net/manual/en/function.reset.php),[`next`](http://php.net/manual/en/function.next.php)和[`prev`](http://php.net/manual/en/function.prev.php)-[`current`](http://php.net/manual/en/function.current.php)或只是一个[`foreach`循环](http://php.net/manual/en/control-structures.foreach.php)- 来检查它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-14T21:10:41.853

是的，它确实保留了订单。您可以将 php 数组视为[有序哈希映射](http://php.net/manual/en/language.types.array.php)。

您可以将元素视为按“索引创建时间”排序。例如

```
$a = array();
$a['x'] = 1;
$a['y'] = 1;
var_dump($a); // x, y

$a = array();
$a['x'] = 1;
$a['y'] = 1;
$a['x'] = 2;
var_dump($a); // still x, y even though we changed the value associated with the x index.

$a = array();
$a['x'] = 1;
$a['y'] = 1;
unset($a['x']);
$a['x'] = 1;
var_dump($a); // y, x now! we deleted the 'x' index, so its position was discarded, and then recreated 
```

总而言之，如果您要添加一个数组中当前不存在键的条目，则该条目的位置将是列表的末尾。如果您要更新现有键的条目，则位置不会改变。

[foreach](http://www.php.net/foreach)使用上面演示的自然顺序遍历数组。你也可以使用[next](http://www.php.net/next) () [current](http://www.php.net/current) () [prev](http://www.php.net/prev) () [reset](http://www.php.net/reset) () 和朋友，如果你喜欢的话，尽管自从 foreach 被引入语言以来它们很少使用。

此外，[print_r](http://www.php.net/print_r) () 和[var_dump](http://www.php.net/var_dump) () 也使用自然数组顺序输出它们的结果。

如果你熟悉 java，LinkedHashMap 是最相似的数据结构。

# c# - 阅读 RSS 提要中的特定标签

> ID：11487376
> 
> 赞同：2
> 
> 时间：2012-07-14T21:02:51.513
> 
> 标签：c#, rss, rss-reader

我有以下 RSS 提要。我想阅读特定描述标签中的信息。例如，当标题标签包含当前日期时，我想获取描述标签中的信息。我不知道该怎么做。请帮忙

```
<item>
<title>Forecast for Saturday as of Jul. 14 5:30 AM IST</title> //If today is Saturday get information in description tag
<link>http://www.wunderground.com/global/stations/43466.html</link>    
  <description>
Thunderstorm. Low:26 &amp;deg; C.
  </description>
  <pubDate>Sat, 14 Jul 2012 00:00:00 GMT</pubDate>
  <guid isPermaLink="false">1342267200-1-night</guid>
</item>
<item>
<title>Forecast for Sunday as of Jul. 14 5:30 AM IST</title>
<link>http://www.wunderground.com/global/stations/43466.html</link>
  <description>
Chance of a Thunderstorm. High:30 &amp;deg; C.
  </description>
  <pubDate>Sat, 14 Jul 2012 00:00:00 GMT</pubDate>
  <guid isPermaLink="false">1342353600-2-day</guid>
 </item> 
```

我能够使用以下方法获得当前日期：

```
string datenow = DateTime.Today.ToString("dddd / M / yyyy");
string[] words= datenow.Split(' ');
string day = words[0]; 
```

这就是我阅读 RSS 提要的方式：

```
 public class RssReader
    {
        public static List<RssNews> Read(string url)
        {
            var webClient = new WebClient();

            string result = webClient.DownloadString(url);

            XDocument document = XDocument.Parse(result);

            return (from descendant in document.Descendants("item")
                    select new RssNews()
                    {
                        Description = descendant.Element("description").Value,
                        Title = descendant.Element("title").Value,
                        PublicationDate = descendant.Element("pubDate").Value
                    }).ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:15:09.717

根据您的要求，您只想获取当天的描述。您有带有标题、描述等的新闻提要列表现在您可以更改您的课程（在您的课程中添加一个方法）如果当天是当天

公共静态字符串 GetCurrentDayDescription(){

```
 var lst = Read("url");
   var resDescription = (from x in lst where x.Title.Contains(day) 
                          select x.Description).ToArray() ;
    return resDescription[0] ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:44:18.623

您应该能够使用 XmlSerializer 直接反序列化 rss 提要，无需手动映射。您需要修改`RssNews`对象以正确映射，例如：

```
[XmlRoot(ElementName="item")]
public class RssNews
{
    [XmlElement(ElementName = "title")]
    public string Title { get; set; }

    [XmlElement(ElementName = "pubDate")]
    public string PublicationDate  { get; set; }

    [XmlElement(ElementName = "description")]
    public string Description { get; set; }

    [XmlElement(ElementName = "link")]
    public string Link { get; set; }

    [XmlElement(ElementName = "guid")]
    public string Description { get; set; }
} 
```

现在您应该可以使用反序列化器了：

```
 var feed = new List<RssNews>();
    using (var webClient = new WebClient())
    {

        string result = webClient.DownloadString(url);
        using (var stringReader = new StringReader(result))
        {
            var serializer = new XmlSerializer(feed.GetType());
            feed = (List<RssNews>)serializer.Deserialize(stringReader);
        }
    }
    return feed; 
```

# heroku - 网络解决方案域名重定向正在添加 html 标头

> ID：11487381
> 
> 赞同：2
> 
> 时间：2012-07-14T21:03:33.010
> 
> 标签：heroku

我在 Network Solutions 注册了一个域名 www.anoneo.com。

我的域被重定向到我在 Heroku 上的托管网站，hollow-lightning-4249.herokuapp.com。

我正在尝试设置我的 Google 网站管理员工具 sitemap.xml 功能，并且它运行良好，除了 Network Solutions 将标头添加到我的 sitemap.xml 响应中。

要确切了解我的意思，请检查[http://hollow-lightning-4249.herokuapp.com/sitemap.xml](http://hollow-lightning-4249.herokuapp.com/sitemap.xml)并查看源代码。

接下来，检查[http://www.anoneo.com/sitemap.xml](http://www.anoneo.com/sitemap.xml)并查看源代码。

我打电话给网络解决方案，看看是否有任何方法可以抑制他们添加的 html 标头，他们说他们无能为力。

我需要搬到新的域名注册商，还是有办法解决这个问题？如果我需要搬到新的域名注册商，谁是 Heroku 网站的最佳选择？

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:23:36.123

问题是您使用重定向而不是 DNS 将您的域指向 heroku。网络解决方案不会更改您的 XML 文件（或任何其他文件）。它们仅显示带有框架的 HTML 文档，该框架显示您在 heroku 上托管的内容。

您应该看看是否有办法更改您的域的 DNS 设置，以便正确设置它。查看 Heroku 开发中心的[文档](https://devcenter.heroku.com/articles/custom-domains)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:14:48.367

*PS我希望这不是某种匿名的玩笑。*

1.  查看源代码与标题无关

2.  两个 XML 源都没有添加任何内容

3.  请参阅下面的真实标题：

**http://hollow-lightning-4249.herokuapp.com/sitemap.xml**

```
HTTP/1.1 304 Not Modified
Age: 0
Date: Sat, 14 Jul 2012 21:08:04 GMT
Server: WEBrick/1.3.1 (Ruby/1.9.2/2011-07-09)
X-Content-Digest: 3459e2e4d7581d2b9c67c096724040b062d0857a
X-Rack-Cache: stale, valid, store
Connection: keep-alive 
```

**http://www.anoneo.com/sitemap.xml**

```
HTTP/1.1 200 OK
Server: Sun-ONE-Web-Server/6.1
Date: Sat, 14 Jul 2012 21:05:17 GMT
Content-type: text/html
Transfer-encoding: chunked 
```

一切就绪，无需更改网络解决方案

# mysql - 3个表中的左外连接

> ID：11487383
> 
> 赞同：0
> 
> 时间：2012-07-14T21:04:17.583
> 
> 标签：mysql, join, left-join, outer-join

我 hv 3 个表
车间和所有者
商店是父表，其他 2 个是子表

```
SHOP    
s_id, floor_id,s_owner,s_remarks
1,2,1,big shop   
2,2,3,near bank   
3,1,2,corner   
4,7,7,FAKE FLOOR AND OWNER   

OWNERS   
o_id, o_name, contact
1,gale,009659999999   
2,smith,00447676767   
3,pathan,0088787878   

FLOORS   
f_id, f_name
1,FIRST FLOOR   
2,SECOND FLOOR  
3,THIRD FLOOR   

select shop.s_id, floors.f_name, owners.o_id, s_remarks  
from ? join ? 
```

显示所有店铺记录，即使业主或楼层没有相关记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:07:10.000

正如您在标题中建议的那样，您需要使用`LEFT JOIN`. 这应该让你开始：

```
SELECT shop.s_id, floors.f_name, owners.o_id, s_remarks
FROM ?
LEFT JOIN ? ON ? = ?
LEFT JOIN ? ON ? = ? 
```

您只需将问号替换为正确的表名或列名。

# c# - 我在哪里可以找到一个简单的红黑树实现？

> ID：11487388
> 
> 赞同：6
> 
> 时间：2012-07-14T21:05:14.413
> 
> 标签：c#, red-black-tree

在网上很难找到红黑树的实现，尤其是学习。

我在哪里可以找到一个*简单*的红黑树实现（首选 C#）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T21:05:14.413

默认情况下，通用红黑树不是“简单”的。
但是如果你对它们施加一个小限制，让它们[“左倾”](http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf)，那么它们就会变得更简单。看看[这个 MSDN 博客文章](http://blogs.msdn.com/b/delay/archive/2009/06/02/maintaining-balance-a-versatile-red-black-tree-implementation-for-net-via-silverlight-wpf-charting.aspx)。

我已在此处复制粘贴（稍作修改）该帖子的代码（在 C# 中）：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;

/// <summary>Implements a left-leaning red-black tree.</summary>
/// <remarks>
/// Based on the research paper "Left-leaning Red-Black Trees"
/// by Robert Sedgewick. More information available at:
/// http://www.cs.princeton.edu/~rs/talks/LLRB/RedBlack.pdf
/// http://www.cs.princeton.edu/~rs/talks/LLRB/08Penn.pdf
/// </remarks>
/// <typeparam name="TKey">Type of keys.</typeparam>
/// <typeparam name="TValue">Type of values.</typeparam>
public class LeftLeaningRedBlackTree<TKey, TValue>
{
    /// <summary>Stores the key comparison function.</summary>
    private Comparison<TKey> _keyComparison;

    /// <summary>Stores the value comparison function.</summary>
    private Comparison<TValue> _valueComparison;

    /// <summary>Stores the root node of the tree.</summary>
    private Node _rootNode;

    /// <summary>Represents a node of the tree.</summary>
    /// <remarks>Using fields instead of properties drops execution time by about 40%.</remarks>
    [DebuggerDisplay("Key={Key}, Value={Value}, Siblings={Siblings}")]
    private class Node
    {
        /// <summary>Gets or sets the node's key.</summary>
        public TKey Key;

        /// <summary>Gets or sets the node's value.</summary>
        public TValue Value;

        /// <summary>Gets or sets the left node.</summary>
        public Node Left;

        /// <summary>Gets or sets the right node.</summary>
        public Node Right;

        /// <summary>Gets or sets the color of the node.</summary>
        public bool IsBlack;

        /// <summary>Gets or sets the number of "siblings" (nodes with the same key/value).</summary>
        public int Siblings;
    }

    /// <summary>Initializes a new instance of the LeftLeaningRedBlackTree class implementing a normal dictionary.</summary>
    /// <param name="keyComparison">The key comparison function.</param>
    public LeftLeaningRedBlackTree(Comparison<TKey> keyComparison)
    {
        if (null == keyComparison)
        {
            throw new ArgumentNullException("keyComparison");
        }
        _keyComparison = keyComparison;
    }

    /// <summary>Initializes a new instance of the LeftLeaningRedBlackTree class implementing an ordered multi-dictionary.</summary>
    /// <param name="keyComparison">The key comparison function.</param>
    /// <param name="valueComparison">The value comparison function.</param>
    public LeftLeaningRedBlackTree(Comparison<TKey> keyComparison, Comparison<TValue> valueComparison)
        : this(keyComparison)
    {
        if (null == valueComparison)
        {
            throw new ArgumentNullException("valueComparison");
        }
        _valueComparison = valueComparison;
    }

    /// <summary>Gets a value indicating whether the tree is acting as an ordered multi-dictionary.</summary>
    private bool IsMultiDictionary
    {
        get { return null != _valueComparison; }
    }

    /// <summary>Adds a key/value pair to the tree.</summary>
    /// <param name="key">Key to add.</param>
    /// <param name="value">Value to add.</param>
    public void Add(TKey key, TValue value)
    {
        _rootNode = Add(_rootNode, key, value);
        _rootNode.IsBlack = true;
        AssertInvariants();
    }

    /// <summary>Removes a key (and its associated value) from a normal (non-multi) dictionary.</summary>
    /// <param name="key">Key to remove.</param>
    /// <returns>True if key present and removed.</returns>
    public bool Remove(TKey key)
    {
        if (IsMultiDictionary)
        {
            throw new InvalidOperationException("Remove is only supported when acting as a normal (non-multi) dictionary.");
        }
        return Remove(key, default(TValue));
    }

    /// <summary>Removes a key/value pair from the tree.</summary>
    /// <param name="key">Key to remove.</param>
    /// <param name="value">Value to remove.</param>
    /// <returns>True if key/value present and removed.</returns>
    public bool Remove(TKey key, TValue value)
    {
        int initialCount = Count;
        if (null != _rootNode)
        {
            _rootNode = Remove(_rootNode, key, value);
            if (null != _rootNode)
            {
                _rootNode.IsBlack = true;
            }
        }
        AssertInvariants();
        return initialCount != Count;
    }

    /// <summary>Removes all nodes in the tree.</summary>
    public void Clear()
    {
        _rootNode = null;
        Count = 0;
        AssertInvariants();
    }

    /// <summary>Gets a sorted list of keys in the tree.</summary>
    /// <returns>Sorted list of keys.</returns>
    public IEnumerable<TKey> GetKeys()
    {
        TKey lastKey = default(TKey);
        bool lastKeyValid = false;
        return Traverse(
            _rootNode,
            n => !lastKeyValid || !object.Equals(lastKey, n.Key),
            n =>
            {
                lastKey = n.Key;
                lastKeyValid = true;
                return lastKey;
            });
    }

    /// <summary>Gets the value associated with the specified key in a normal (non-multi) dictionary.</summary>
    /// <param name="key">Specified key.</param>
    /// <returns>Value associated with the specified key.</returns>
    public TValue GetValueForKey(TKey key)
    {
        if (IsMultiDictionary)
        {
            throw new InvalidOperationException("GetValueForKey is only supported when acting as a normal (non-multi) dictionary.");
        }
        Node node = GetNodeForKey(key);
        if (null != node)
        {
            return node.Value;
        }
        else
        {
            throw new KeyNotFoundException();
        }
    }

    /// <summary>Gets a sequence of the values associated with the specified key.</summary>
    /// <param name="key">Specified key.</param>
    /// <returns>Sequence of values.</returns>
    public IEnumerable<TValue> GetValuesForKey(TKey key)
    {
        return Traverse(GetNodeForKey(key), n => 0 == _keyComparison(n.Key, key), n => n.Value);
    }

    /// <summary>Gets a sequence of all the values in the tree.</summary>
    /// <returns>Sequence of all values.</returns>
    public IEnumerable<TValue> GetValuesForAllKeys()
    {
        return Traverse(_rootNode, n => true, n => n.Value);
    }

    /// <summary>Gets the count of key/value pairs in the tree.</summary>
    public int Count { get; private set; }

    /// <summary>Gets the minimum key in the tree.</summary>
    public TKey MinimumKey
    {
        get { return GetExtreme(_rootNode, n => n.Left, n => n.Key); }
    }

    /// <summary>Gets the maximum key in the tree.</summary>
    public TKey MaximumKey
    {
        get { return GetExtreme(_rootNode, n => n.Right, n => n.Key); }
    }

    /// <summary>Returns true if the specified node is red.</summary>
    /// <param name="node">Specified node.</param>
    /// <returns>True if specified node is red.</returns>
    private static bool IsRed(Node node)
    {
        if (null == node)
        {
            // "Virtual" leaf nodes are always black
            return false;
        }
        return !node.IsBlack;
    }

    /// <summary>Adds the specified key/value pair below the specified root node.</summary>
    /// <param name="node">Specified node.</param>
    /// <param name="key">Key to add.</param>
    /// <param name="value">Value to add.</param>
    /// <returns>New root node.</returns>
    private Node Add(Node node, TKey key, TValue value)
    {
        if (null == node)
        {
            // Insert new node
            Count++;
            return new Node { Key = key, Value = value };
        }

        if (IsRed(node.Left) && IsRed(node.Right))
        {
            // Split node with two red children
            FlipColor(node);
        }

        // Find right place for new node
        int comparisonResult = KeyAndValueComparison(key, value, node.Key, node.Value);
        if (comparisonResult < 0)
        {
            node.Left = Add(node.Left, key, value);
        }
        else if (0 < comparisonResult)
        {
            node.Right = Add(node.Right, key, value);
        }
        else
        {
            if (IsMultiDictionary)
            {
                // Store the presence of a "duplicate" node
                node.Siblings++;
                Count++;
            }
            else
            {
                // Replace the value of the existing node
                node.Value = value;
            }
        }

        if (IsRed(node.Right))
        {
            // Rotate to prevent red node on right
            node = RotateLeft(node);
        }

        if (IsRed(node.Left) && IsRed(node.Left.Left))
        {
            // Rotate to prevent consecutive red nodes
            node = RotateRight(node);
        }

        return node;
    }

    /// <summary>Removes the specified key/value pair from below the specified node.</summary>
    /// <param name="node">Specified node.</param>
    /// <param name="key">Key to remove.</param>
    /// <param name="value">Value to remove.</param>
    /// <returns>True if key/value present and removed.</returns>
    private Node Remove(Node node, TKey key, TValue value)
    {
        int comparisonResult = KeyAndValueComparison(key, value, node.Key, node.Value);
        if (comparisonResult < 0)
        {
            // * Continue search if left is present
            if (null != node.Left)
            {
                if (!IsRed(node.Left) && !IsRed(node.Left.Left))
                {
                    // Move a red node over
                    node = MoveRedLeft(node);
                }

                // Remove from left
                node.Left = Remove(node.Left, key, value);
            }
        }
        else
        {
            if (IsRed(node.Left))
            {
                // Flip a 3 node or unbalance a 4 node
                node = RotateRight(node);
            }
            if ((0 == KeyAndValueComparison(key, value, node.Key, node.Value)) && (null == node.Right))
            {
                // Remove leaf node
                Debug.Assert(null == node.Left, "About to remove an extra node.");
                Count--;
                if (0 < node.Siblings)
                {
                    // Record the removal of the "duplicate" node
                    Debug.Assert(IsMultiDictionary, "Should not have siblings if tree is not a multi-dictionary.");
                    node.Siblings--;
                    return node;
                }
                else
                {
                    // Leaf node is gone
                    return null;
                }
            }
            // * Continue search if right is present
            if (null != node.Right)
            {
                if (!IsRed(node.Right) && !IsRed(node.Right.Left))
                {
                    // Move a red node over
                    node = MoveRedRight(node);
                }
                if (0 == KeyAndValueComparison(key, value, node.Key, node.Value))
                {
                    // Remove leaf node
                    Count--;
                    if (0 < node.Siblings)
                    {
                        // Record the removal of the "duplicate" node
                        Debug.Assert(IsMultiDictionary, "Should not have siblings if tree is not a multi-dictionary.");
                        node.Siblings--;
                    }
                    else
                    {
                        // Find the smallest node on the right, swap, and remove it
                        Node m = GetExtreme(node.Right, n => n.Left, n => n);
                        node.Key = m.Key;
                        node.Value = m.Value;
                        node.Siblings = m.Siblings;
                        node.Right = DeleteMinimum(node.Right);
                    }
                }
                else
                {
                    // Remove from right
                    node.Right = Remove(node.Right, key, value);
                }
            }
        }

        // Maintain invariants
        return FixUp(node);
    }

    /// <summary>Flip the colors of the specified node and its direct children.</summary>
    /// <param name="node">Specified node.</param>
    private static void FlipColor(Node node)
    {
        node.IsBlack = !node.IsBlack;
        node.Left.IsBlack = !node.Left.IsBlack;
        node.Right.IsBlack = !node.Right.IsBlack;
    }

    /// <summary>Rotate the specified node "left".</summary>
    /// <param name="node">Specified node.</param>
    /// <returns>New root node.</returns>
    private static Node RotateLeft(Node node)
    {
        Node x = node.Right;
        node.Right = x.Left;
        x.Left = node;
        x.IsBlack = node.IsBlack;
        node.IsBlack = false;
        return x;
    }

    /// <summary>Rotate the specified node "right".</summary>
    /// <param name="node">Specified node.</param>
    /// <returns>New root node.</returns>
    private static Node RotateRight(Node node)
    {
        Node x = node.Left;
        node.Left = x.Right;
        x.Right = node;
        x.IsBlack = node.IsBlack;
        node.IsBlack = false;
        return x;
    }

    /// <summary>Moves a red node from the right child to the left child.</summary>
    /// <param name="node">Parent node.</param>
    /// <returns>New root node.</returns>
    private static Node MoveRedLeft(Node node)
    {
        FlipColor(node);
        if (IsRed(node.Right.Left))
        {
            node.Right = RotateRight(node.Right);
            node = RotateLeft(node);
            FlipColor(node);

            // * Avoid creating right-leaning nodes
            if (IsRed(node.Right.Right))
            {
                node.Right = RotateLeft(node.Right);
            }
        }
        return node;
    }

    /// <summary>Moves a red node from the left child to the right child.</summary>
    /// <param name="node">Parent node.</param>
    /// <returns>New root node.</returns>
    private static Node MoveRedRight(Node node)
    {
        FlipColor(node);
        if (IsRed(node.Left.Left))
        {
            node = RotateRight(node);
            FlipColor(node);
        }
        return node;
    }

    /// <summary>Deletes the minimum node under the specified node.</summary>
    /// <param name="node">Specified node.</param>
    /// <returns>New root node.</returns>
    private Node DeleteMinimum(Node node)
    {
        if (null == node.Left)
        {
            // Nothing to do
            return null;
        }

        if (!IsRed(node.Left) && !IsRed(node.Left.Left))
        {
            // Move red node left
            node = MoveRedLeft(node);
        }

        // Recursively delete
        node.Left = DeleteMinimum(node.Left);

        // Maintain invariants
        return FixUp(node);
    }

    /// <summary>Maintains invariants by adjusting the specified nodes children.</summary>
    /// <param name="node">Specified node.</param>
    /// <returns>New root node.</returns>
    private static Node FixUp(Node node)
    {
        if (IsRed(node.Right))
        {
            // Avoid right-leaning node
            node = RotateLeft(node);
        }

        if (IsRed(node.Left) && IsRed(node.Left.Left))
        {
            // Balance 4-node
            node = RotateRight(node);
        }

        if (IsRed(node.Left) && IsRed(node.Right))
        {
            // Push red up
            FlipColor(node);
        }

        // * Avoid leaving behind right-leaning nodes
        if ((null != node.Left) && IsRed(node.Left.Right) && !IsRed(node.Left.Left))
        {
            node.Left = RotateLeft(node.Left);
            if (IsRed(node.Left))
            {
                // Balance 4-node
                node = RotateRight(node);
            }
        }

        return node;
    }

    /// <summary>Gets the (first) node corresponding to the specified key.</summary>
    /// <param name="key">Key to search for.</param>
    /// <returns>Corresponding node or null if none found.</returns>
    private Node GetNodeForKey(TKey key)
    {
        // Initialize
        Node node = _rootNode;
        while (null != node)
        {
            // Compare keys and go left/right
            int comparisonResult = _keyComparison(key, node.Key);
            if (comparisonResult < 0)
            {
                node = node.Left;
            }
            else if (0 < comparisonResult)
            {
                node = node.Right;
            }
            else
            {
                // Match; return node
                return node;
            }
        }

        // No match found
        return null;
    }

    /// <summary>Gets an extreme (ex: minimum/maximum) value.</summary>
    /// <typeparam name="T">Type of value.</typeparam>
    /// <param name="node">Node to start from.</param>
    /// <param name="successor">Successor function.</param>
    /// <param name="selector">Selector function.</param>
    /// <returns>Extreme value.</returns>
    private static T GetExtreme<T>(Node node, Func<Node, Node> successor, Func<Node, T> selector)
    {
        // Initialize
        T extreme = default(T);
        Node current = node;
        while (null != current)
        {
            // Go to extreme
            extreme = selector(current);
            current = successor(current);
        }
        return extreme;
    }

    /// <summary>Traverses a subset of the sequence of nodes in order and selects the specified nodes.</summary>
    /// <typeparam name="T">Type of elements.</typeparam>
    /// <param name="node">Starting node.</param>
    /// <param name="condition">Condition method.</param>
    /// <param name="selector">Selector method.</param>
    /// <returns>Sequence of selected nodes.</returns>
    private IEnumerable<T> Traverse<T>(Node node, Func<Node, bool> condition, Func<Node, T> selector)
    {
        // Create a stack to avoid recursion
        Stack<Node> stack = new Stack<Node>();
        Node current = node;
        while (null != current)
        {
            if (null != current.Left)
            {
                // Save current state and go left
                stack.Push(current);
                current = current.Left;
            }
            else
            {
                do
                {
                    for (int i = 0; i <= current.Siblings; i++)
                    {
                        // Select current node if relevant
                        if (condition(current))
                        {
                            yield return selector(current);
                        }
                    }
                    // Go right - or up if nothing to the right
                    current = current.Right;
                }
                while ((null == current) &&
                       (0 < stack.Count) &&
                       (null != (current = stack.Pop())));
            }
        }
    }

    /// <summary>Compares the specified keys (primary) and values (secondary).</summary>
    /// <param name="leftKey">The left key.</param>
    /// <param name="leftValue">The left value.</param>
    /// <param name="rightKey">The right key.</param>
    /// <param name="rightValue">The right value.</param>
    /// <returns>CompareTo-style results: -1 if left is less, 0 if equal, and 1 if greater than right.</returns>
    private int KeyAndValueComparison(TKey leftKey, TValue leftValue, TKey rightKey, TValue rightValue)
    {
        // Compare keys
        int comparisonResult = _keyComparison(leftKey, rightKey);
        if ((0 == comparisonResult) && (null != _valueComparison))
        {
            // Keys match; compare values
            comparisonResult = _valueComparison(leftValue, rightValue);
        }
        return comparisonResult;
    }

    /// <summary>Asserts that tree invariants are not violated.</summary>
    [Conditional("Debug")]
    private void AssertInvariants()
    {
        // Root is black
        Debug.Assert((null == _rootNode) || _rootNode.IsBlack, "Root is not black");
        // Every path contains the same number of black nodes
        Dictionary<Node, Node> parents = new Dictionary<LeftLeaningRedBlackTree<TKey, TValue>.Node, LeftLeaningRedBlackTree<TKey, TValue>.Node>();
        foreach (Node node in Traverse(_rootNode, n => true, n => n))
        {
            if (null != node.Left)
            {
                parents[node.Left] = node;
            }
            if (null != node.Right)
            {
                parents[node.Right] = node;
            }
        }
        if (null != _rootNode)
        {
            parents[_rootNode] = null;
        }
        int treeCount = -1;
        foreach (Node node in Traverse(_rootNode, n => (null == n.Left) || (null == n.Right), n => n))
        {
            int pathCount = 0;
            Node current = node;
            while (null != current)
            {
                if (current.IsBlack)
                {
                    pathCount++;
                }
                current = parents[current];
            }
            Debug.Assert((-1 == treeCount) || (pathCount == treeCount), "Not all paths have the same number of black nodes.");
            treeCount = pathCount;
        }
        // Verify node properties...
        foreach (Node node in Traverse(_rootNode, n => true, n => n))
        {
            // Left node is less
            if (null != node.Left)
            {
                Debug.Assert(0 > KeyAndValueComparison(node.Left.Key, node.Left.Value, node.Key, node.Value), "Left node is greater than its parent.");
            }
            // Right node is greater
            if (null != node.Right)
            {
                Debug.Assert(0 < KeyAndValueComparison(node.Right.Key, node.Right.Value, node.Key, node.Value), "Right node is less than its parent.");
            }
            // Both children of a red node are black
            Debug.Assert(!IsRed(node) || (!IsRed(node.Left) && !IsRed(node.Right)), "Red node has a red child.");
            // Always left-leaning
            Debug.Assert(!IsRed(node.Right) || IsRed(node.Left), "Node is not left-leaning.");
            // No consecutive reds (subset of previous rule)
            //Debug.Assert(!(IsRed(node) && IsRed(node.Left)));
        }
    }
} 
```

# c# - 使用 C#/.NET 中的 GDAL 时出现“无磁盘”错误

> ID：11487390
> 
> 赞同：14
> 
> 时间：2012-07-14T21:05:25.793
> 
> 标签：c#, .net, windows, gis, gdal

我正在使用[GDAL的](http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp)[Tamas Szekeres](http://vbkto.dyndns.org/sdk/)构建，包括使用 C# 和 .net 4.0 的桌面 GIS 应用程序中的 C# 绑定

我将整个 GDAL 发行版包含在我的可执行文件的子目录中，其文件夹结构如下：

```
\Plugins\GDAL
\Plugins\GDAL\gdal
\Plugins\GDAL\gdal-data
\Plugins\GDAL\proj 
```

我们正在使用 EPSG:4326，并且该软件是使用 32 位目标构建的，因为 GDAL C# API 使用[p/invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)到 32 位库（可以尝试 64 位，因为 Tamas 提供了这些，还没有解决它然而）。

当我运行我的应用程序时，我收到以下错误

![在此处输入图像描述](../Images/1e9e2811a7601c9c1ac5fb4a54cd84b1.png)

当软件[尝试访问](http://support.microsoft.com/kb/330137)不再连接的设备（例如可移动驱动器）时，通常会发生此错误。无法“捕获”此异常，因为它会弹出一个系统对话框。

使用任何按钮关闭对话框后，软件将继续按设计执行。

第一次调用以下方法时出现错误

```
OSGeo.OSR.CoordinateTransformation.TransformPoint(double[] inout); 
```

## 奇怪的东西：

*   错误发生在一台计算机上（到目前为止）
*   我已经在其他几台 32 位和 64 位计算机上运行该软件，没有问题
*   编译我正在使用的 GDAL 垫片库后第一次运行时不会发生该错误，*它只会在每次后续运行时发生*
*   无论发布或调试版本如何，它都会发生
*   无论是否附加了调试器，它都会发生
*   无论我打开还是关闭 Gdal.UseExceptions 或 Osr.UseExceptions();
*   **禁用可移动驱动器会导致该错误消失。**这不是我认为的真正解决方案，因为我无法要求客户这样做。

我尝试了以下方法：

*   捕捉错误
*   更改 GDAL 目录和环境设置
*   更改计算机和操作系统：这行得通
*   使用 SysInternals ProcMon 来跟踪正在打开的文件没有运气，它们似乎都是存在的文件
*   当硬盘驱动器发生故障时，我重新构建了有问题的计算机，但无济于事。
*   [使用CCleaner](http://www.piriform.com/CCLEANER) “清理”注册表
*   GDAL 目录中的文件在执行时保持不变

## 假设

*   非托管代码中发生错误
*   **在 GDAL 初始化期间，某些路径指的是计算机上不再连接的驱动器**。
*   **我也在假设这仅限于计算机配置错误**

## 配置

*   视窗 7 专业版
*   英特尔酷睿 i7 920 @ 2,67GHz
*   12.0 GB 内存
*   64 位操作系统
*   驱动器 C：120 GB SSD，带操作系统、开发（Visual Studio 10）等
*   驱动器 D：1 TB WD 10,000k 有数据，未访问数据。

## 问题

我要么需要一个方向来捕获错误，要么需要一个工具或技术来让我找出导致它的原因。我不想发布某些系统可能会出现这种行为的软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T22:12:24.547

我对这个图书馆没有经验，但也许一些新鲜的眼睛可能会给你一个脑波......

首先，写得很好的问题！显然这个问题真的让你难住了……

您对重建尖叫后未发生错误的注释：此库在运行后是否在其二进制目录中生成某种状态文件？如果是这样，它可能会将不正确的路径信息保存到该“配置”文件中，这是在错误地尝试加速其下一次启动。

也许扫描此目录以查找“新构建”和“首次运行”之间的更改？

至少您可能会找到一个可以在关闭时清理的文件以避免此警报...

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:39:20.593

也许你可以试试这个：

*   运行 diskmgmt.msc
*   如果我认为磁盘 2 是可移动磁盘的假设为真，请更改磁盘 2 的驱动器号（右键单击）
*   运行您的应用程序
*   如果这消除了错误，则应用程序中的某些内容指的是旧的驱动器号
*   它可能在 p/invoked 库中
*   也许看到：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46501) ://gcc.gnu.org/bugzilla/show_bug.cgi?id= 46501 它谈到 gcc 以某种方式将驱动器号编译成二进制文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T03:53:30.917

+1 好问题，但**不可能~~“~~抓住”**

它是这些糟糕的解决方案之一，将在 5 年内出现在[DailyWTF上。](http://thedailywtf.com/)但现在它存储在这里[http://www.pinvoke.net/default.aspx/user32.senddlgitemmessage](http://www.pinvoke.net/default.aspx/user32.senddlgitemmessage)

```
using Microsoft.VisualBasic;  //this reference is for the Constants.vbNo;  

public partial class Form1 : Form
{
[DllImport("user32.dll")]
static extern IntPtr SendDlgItemMessage(IntPtr hDlg, int nIDDlgItem, uint Msg, UIntPtr wParam, IntPtr lParam);

[DllImport("user32.dll", SetLastError = true)]
public static extern IntPtr SetActiveWindow(IntPtr hWnd);

// For Windows Mobile, replace user32.dll with coredll.dll
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

// Find window by Caption only. Note you must pass IntPtr.Zero as the first parameter.
[DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName);

[DllImport("user32.dll", SetLastError = true)]
static extern uint GetDlgItemText(IntPtr hDlg, int nIDDlgItem,[Out] StringBuilder lpString, int nMaxCount);

public void ClickSaveBoxNoButton()
{
    //In this example, we've opened a Notepad instance, entered some text, and clicked the 'X' to close Notepad.
    //Of course we received the 'Do you want to save...' message, and we left it sitting there. Now on to the code...
    //
    //Note: this example also uses API calls to FindWindow, GetDlgItemText, and SetActiveWindow.
    //    You'll have to find those separately.

    //Find the dialog box (no need to find a "parent" first)
    //classname is #32770 (dialog box), dialog box title is Notepad
    IntPtr theDialogBoxHandle; // = null;
    string theDialogBoxClassName = "#32770";
    string theDialogBoxTitle = "Notepad";
    int theDialogItemId = Convert.ToInt32("0xFFFF", 16);
    StringBuilder theDialogTextHolder = new StringBuilder(1000);
    //hardcoding capacity - represents maximum text length
    string theDialogText = string.Empty;
    string textToLookFor = "Do you want to save changes to Untitled?";
    bool isChangeMessage = false;
    IntPtr theNoButtonHandle; // = null;
    int theNoButtonItemId = (int)Constants.vbNo;
    //actual Item ID = 7
    uint theClickMessage = Convert.ToUInt32("0x00F5", 16);
    //= BM_CLICK value
    uint wParam = 0;
    uint lParam = 0;

    //Get a dialog box described by the specified info
    theDialogBoxHandle = FindWindow(theDialogBoxClassName, theDialogBoxTitle);
    //a matching dialog box was found, so continue
    if (theDialogBoxHandle != IntPtr.Zero)
    {

        //then get the text
        GetDlgItemText(theDialogBoxHandle, theDialogItemId, theDialogTextHolder, theDialogTextHolder.Capacity);
        theDialogText = theDialogTextHolder.ToString();

    }

    //Make sure it's the right dialog box, based on the text we got.
    isChangeMessage = Regex.IsMatch(theDialogText, textToLookFor);

    if ((isChangeMessage))
    {
        //Set the dialog box as the active window
        SetActiveWindow(theDialogBoxHandle);

        //And, click the No button
        SendDlgItemMessage(theDialogBoxHandle, theNoButtonItemId, theClickMessage, (System.UIntPtr)wParam, (System.IntPtr)lParam);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:40:49.047

事实证明，没有办法肯定地回答这个问题。我最终通过找出系统上注册的一些硬件不存在来“解决”问题。为什么几年后只有 GDAL 设法引发了这个错误，对我来说仍然是个谜。

我将无法捕获此异常归结为与 p/invoke 相关的特性以及在系统上以非常低的级别引发的硬件错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:41:49.937

您可以将自定义错误处理程序添加到 gdal。这可能会有所帮助：

[http://www.gdal.org/ogr/cpl__error_8h.html](http://www.gdal.org/ogr/cpl__error_8h.html)

[http://trac.osgeo.org/gdal/ticket/2895](http://trac.osgeo.org/gdal/ticket/2895)

# delphi - Process32Next 不同的结果

> ID：11487391
> 
> 赞同：1
> 
> 时间：2012-07-14T21:05:53.323
> 
> 标签：delphi, delphi-2010

我正在编写代码来扫描另一个进程内存。但这不是这里的问题。要列出正在运行的进程，我使用的是 Process32First/Process32Next。但是当我在编译器调试中运行它时，它会获取所有进程（包括其他用户，如系统进程），但是当我只运行 .exe 时，只能从我的用户那里获取进程。代码的延伸如下

```
 Handle:= CreateToolHelp32SnapShot(TH32CS_SNAPPROCESS, 0);
 Struct.dwSize:=Sizeof(TProcessEntry32);
 Process32First(Handle, Struct);
   repeat
    Memo2.Lines.Append(Struct.szExeFile);
    MemStart:= 0;
    PID:= Struct.th32ProcessID;
    PIDHandle:= OpenProcess(PROCESS_QUERY_INFORMATION or PROCESS_VM_OPERATION or
                            PROCESS_VM_READ, false, PID);
    if OS64 = true then
     begin
      if IsProcWow64 then
       begin
        Proc32:= true;
      end
     else
       Proc32:= false;
  end;
 if (Proc32 = true) and (POS(Struct.szExeFile, Application.ExeName) = 0) then
      begin
        Memo1.Lines.Append('Process:: '+Struct.szExeFile+' - Scanning');
        CatchYa(Struct.szExeFile);
      end;
  CloseHandle(PIDHandle);
until (not Process32Next(Handle,Struct)); 
```

如您所见，我正在检查 64 位进程，因为我只想要 32 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:28:29.747

您正在使用管理权限运行 IDE，当您从调试器启动时，您的程序会继承这些权限。

除非您的程序需要管理权限，否则您也不需要运行提升的 IDE。它应该能够以普通用户身份运行，然后您的程序将获得与您自己运行时相同的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:05:12.917

似乎您仅在 os64 为真时才初始化 proc32 。

# solr - Solr+Nutch+AjaxSolr 查询

> ID：11487394
> 
> 赞同：0
> 
> 时间：2012-07-14T21:06:41.723
> 
> 标签：solr, nutch

1) 我参考了[https://github.com/evolvingweb/ajax-solr/wiki/reuters-tutorial](https://github.com/evolvingweb/ajax-solr/wiki/reuters-tutorial)的 Ajax-Solr 设置。

我想知道，虽然 ajax-solr 正在运行，但它只在路透社数据下搜索。如果我想使用 nutch 抓取网络并将其与 solr 集成，那么我必须将 solr 的 schema.xml 文件替换为 nutch 的 schema.xml 文件，该文件将不符合 ajax-solr 配置。通过替换 schema.xml 文件，ajax-solr 将无法工作（如果我错了，请纠正我）！！！

我现在如何将 Solr 与 Nutch 以及 Ajax-Solr 集成，以便 ajax-Solr 也可以搜索网络上的其他数据？

2) 请问有没有Solr搜索的前端API，除了Ajax-Solr，可以帮助爬​​取网页的高效搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:28:23.743

1.  看多核的Solr，最好不要尝试在一个集合中混合不同性质的文档
2.  SOLR 的 API 有很多，例如 Java 的 SOLRJ ( [http://wiki.apache.org/solr/Solrj](http://wiki.apache.org/solr/Solrj) )， PHP 的 SolPHP ( [http://wiki.apache.org/solr/SolPHP](http://wiki.apache.org/solr/SolPHP) ) 等等。

# jquery - 如何解决mouseover和mouseout的响应

> ID：11487396
> 
> 赞同：1
> 
> 时间：2012-07-14T21:06:53.213
> 
> 标签：jquery, jquery-animate

每当有鼠标悬停事件时，我都会滑动 div，并在有鼠标移出事件时将其向后滑动（隐藏）。如果我将鼠标移出和鼠标悬停的速度太快，则 div 会一直振荡。我该如何解决这个问题？

```
 $(document).ready(function() {
   $("#in").ready(function(){    
     $("#out").mouseover(function () {
       $("#in").animate({"height":"toggle",},200);
     });
   });
   $("#in").ready(function(){    
     $("#out").mouseout(function () {
       $("#in").animate({"height":"toggle",},200);
     });
   });
 }); 
```

* * *

```
<div id="out"><img src="pics/1.gif" ><div id="in"><h1>Google</h1></div></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:09:44.723

你可以使用[`stop()`](http://api.jquery.com/stop/)方法：

> 停止匹配元素上当前正在运行的动画。

```
$("#out").mouseover(function () {
     $("#in").stop(true, true).animate({"height":"toggle"},200);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:20:02.200

首先，你应该听从[我](https://stackoverflow.com/questions/11487396/how-to-to-solve-the-responsiveness-of-mouseover-and-mouseout#comment15171667_11487396)和[拉明森](https://stackoverflow.com/a/11487415/558021)的建议。该`stop()`函数将停止给定元素上所有当前正在运行的动画并阻止您看到的行为。

关于您发布的代码，还有两件事可以说。

1.  您为`.animate()`函数提供的参数中有一个尾随逗号。 `{"height":"toggle",}`. 现在这可能适用于 Chrome 和 Firefox，但在 IE 中可能不起作用，而且更多可能不会告诉你它在哪里**或**为什么不起作用。JavaScript 中的数组或对象中不应该有尾随逗号。...

2.  您将 jQuery 调用包装在文档就绪处理程序中（正如您应该做的那样），但随后您将代码包装在每个元素的另一个就绪处理程序中。`$("#in").ready()`... `$("#out").ready()`. 这是不必要的。您只需要一个准备好的函数来确保加载 DOM 和 jQuery。

# ruby-on-rails - ruby 中用于标记名称的正则表达式

> ID：11487397
> 
> 赞同：0
> 
> 时间：2012-07-14T21:06:59.210
> 
> 标签：ruby-on-rails, ruby, regex

我试图在正则表达式中允许以下字符：

```
a-z
A-Z
0-9
<space>
-
.
#
+
.
@
/ 
```

这是我到目前为止所拥有的，尽管我不知道它是否正确。我觉得我做错了：

```
 validates :name, :presence => true,
                 :length     => { :within  => 1..28},
                 :uniqueness => { :case_sensitive => false },
                 :format     => { :with => /[a-zA-Z\d\+\#\-\@\. ]+/ } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:23:42.097

您忘记了正斜杠，并且您可以省略一些反斜杠，因为在字符系列中不需要转义：

```
/[a-zA-Z\d+#\-@. /]+/ 
```

应该做。

# python - Python：左侧括号赋值

> ID：11487400
> 
> 赞同：5
> 
> 时间：2012-07-14T21:07:10.170
> 
> 标签：python, kotti

所以我在[Kotti](https://github.com/Pylons/Kotti "科蒂")中找到了这段代码：

```
[child] = filter(lambda ch: ch.name == path[0], self._children) 
```

我想知道：左边的方括号有什么作用？我在 python shell 中做了一些测试，但我不太清楚它的目的。额外的问题：`lambda`回报是什么？我猜是 的一个元组`(Boolean, self._children)`，但这可能是错误的......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T21:09:36.050

这是列表解包，只有一个元素的列表。等效的将是：

```
child = filter(lambda ch: ch.name == path[0], self._children)[0] 
```

（例外情况是，如果多个元素`self._children`满足条件——在这种情况下，Kotti 的代码会抛出一个错误（太多的值无法解包），而上面的代码将使用列表中的第一个）。

另外：`lambda ch: ch.name == path[0]`返回`True`或`False`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:12:32.667

```
[child] = filter(lambda ch: ch.name == path[0], self._children) 
```

这会将 child 设置为 result 的第一个元素。它是 list[0] = ...[0] 的语法糖。它也可以是两个元素，比如`[a, b] = [10, 20]`，它是糖`a = 10; b = 20`

另外，右边的元素数量应该和左边一样，否则会抛出异常

# c# - 当消息框关闭并用作委托时捕获事件

> ID：11487401
> 
> 赞同：0
> 
> 时间：2012-07-14T21:07:13.093
> 
> 标签：c#, winforms, visual-studio-2010, delegates

以下适用于 Windows 窗体。

当*子*窗体关闭时，它只是使用委托来重新激活*父*窗体上的 GroupBorder 。

 *```
 private void uxUpdateDataButton_Click(object sender, EventArgs e)   
    {
        uxRevisionHelperGroupBox.Enabled = false;
        uxBindingNavigator.Hide();
        uxFormDatabase myNewDisplay = new uxFormDatabase();
        myNewDisplay.FormClosed += delegate { activateGroupBorder(); };
        myNewDisplay.Show();    
    }

    public void activateGroupBorder() 
    {
        uxRevisionHelperGroupBox.Enabled = true;
        uxBindingNavigator.Show();
    } 
```

除了消息框而不是子表单之外，是否可以执行与上述等效的操作？

这是我的尝试，不是解决方案：

```
 private void uxAuthorPictureBox_Click(object sender, EventArgs e)
    { 
        uxRevisionHelperGroupBox.Enabled = false;
        uxBindingNavigator.Hide();
        MessageBox myMessage = new MessageBox;
        myMessage.close += delegate { activateGroupBorder(); };
        myMessage.Show("hello world"); 
    }
    public void activateGroupBorder()
    {
        uxRevisionHelperGroupBox.Enabled = true;
        uxBindingNavigator.Show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:50:30.900

`MessageBox.Show(...)`是同步调用，即在盒子关闭之前不会继续执行。为什么你不能`activateGroupBorder()`在消息框完成后打电话给你？例如：

```
MessageBox.Show("hello world"); 
this.activateGroupBorder(); 
```*

# python - 使用 MySQLdb 检查错误

> ID：11487402
> 
> 赞同：1
> 
> 时间：2012-07-14T21:07:44.370
> 
> 标签：python, mysql, mysql-python

我无法找到有关如何对 MySQLdb 进行错误检查的任何信息。我一直在尝试为 MySQL 数据库执行一个简单的更新命令，但它根本不起作用。无论我如何更改条款，或者我提交给它的变量类型。

以下是我的一些（已注释掉的）尝试：

```
timeid = twitseek['max_id']
            #timeup = "UPDATE `timeid` set `timestamp`='" + str(timeid) + "';"
            #print timeup
            #c.execute(timeup)

            #timeup = "UPDATE timeid SET timestamp=\"" + str(timeid) + "\"";
            #timeup = "UPDATE timeid set timestamp = '500';"
            timeup = 500
            c.execute("""UPDATE timeid SET timestamp = %d;""", timeup)
            #c.execute(timeup) 
```

我要做的就是将 的值上传`timeid`到表中`timestamp`列的第一个值（或任何值）`timeid`。

我所做的一切似乎都不起作用，而且我已经坐在这里数小时尝试无数次迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:12:59.857

您似乎错过了`.commit()`对您的连接对象的强制调用以提交您的更改。

```
# Your cursor is c
# We don't see your connection object, but assuming it is conn...
c.execute("""UPDATE timeid SET timestamp = %d;""", timeup)
conn.commit() 
```

上述方法将产生有效的 SQL，但您不会通过这种方式获得预准备语句的安全优势。传入参数的正确方法是使用`%s`, 并传入参数元组：

```
c.execute("UPDATE timeid SET timestamp = %s;", (timeup,))
conn.commit() 
```

### 从[MySQLdb 常见问题解答：](http://mysql-python.sourceforge.net/FAQ.html)

> 从 1.2.0 开始，MySQLdb 默认禁用自动提交，这是 DB-API 标准 (PEP-249) 的要求。如果您使用 InnoDB 表或其他类型的事务表类型，则需要在关闭连接之前执行 connection.commit() ，否则您的任何更改都不会写入数据库。
> 
> 相反，您也可以使用 connection.rollback() 丢弃自上次提交以来所做的任何更改。

就错误检查而言，失败的连接或语法无效的查询将引发异常。因此，您可能希望将其包装`try/except`在 Python 中常见的形式中。

# grails - 更改默认错误的重定向

> ID：11487404
> 
> 赞同：1
> 
> 时间：2012-07-14T21:07:54.420
> 
> 标签：grails

因此，我正在制作一个非常简单的 Web 应用程序，它在一个页面上完成了它的所有功能；我不希望任何其他页面暴露给用户。但与此同时，我想尽可能多地利用 Grails 的内置功能，包括内置的错误处理。

我的域类中的字段具有各种约束，即唯一：true、空白：false 等。错误捕获就像这样出色地工作，我想继续利用它。

但是，当抛出其中一个错误时，它会重定向到“创建”页面，并在那里显示 flash.message。我想要的是重定向回我的索引，并在那里显示 flash.message。

有没有地方可以改变这种行为，还是我必须将自定义错误处理写入我的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:34:06.763

您还可以为不同的错误类型定义一般错误页面，`UrlMappings.groovy`例如：

```
"500"(view: "myErrorView")
 "404"(view: "my404View") 
```

然后，您可以在控制器中抛出并记录异常，然后重定向到 500 错误页面。

# php - 为什么这个页面在 div 标签中动态加载时不能正常工作？

> ID：11487411
> 
> 赞同：0
> 
> 时间：2012-07-14T21:09:25.870
> 
> 标签：php, javascript, jquery, ajax, dynamic

这是对一个更长的问题的改编，因为我指出这个问题在没有太多信息的情况下更直接。我正在使用[This](http://www.dynamicdrive.com/dynamicindex17/ajaxcontent.htm)在我的 div 标签中动态加载页面，但某些东西在加载时会停止工作。特别是一些jquery的东西。在这个 div 中加载时，注册不检查用户名等，我不知道为什么。如果需要发布代码，我可以这样做，但我认为它可能只是在于页面加载的方式，只是不确定是哪个或为什么。[这](http://imengine.gofreeserve.com/fileshare/index.php)是我的测试页面的链接，看看我在说什么。将鼠标悬停在登录上，然后单击“注册”。它会加载表单，但不会使用 jquery 和我的用户名检查用户名。[这里](http://imengine.gofreeserve.com/fileshare/register.php)是一个单独的注册页面，它本身就可以正常工作，这也显示了我正在尝试做的事情。[摆弄 javascript/jquery 和 html](http://jsfiddle.net/3pTHv/1/)。我留下了一些 PHP 以防万一它正在做一些时髦的事情，并省略了 css，因为它用于消息框，这不会影响这一点，并且在没有它的情况下仍然会出现在测试中。

这是处理注册的 PHP：

```
<?php
//have to use &_POST instead of vars for regular vars because of bug
//hash the password
$hash = hash('sha256', $_POST['pass1']);

//creates a 3 character sequence, hash pass again
function createSalt(){    
    $string = md5(uniqid(rand(), true));    
    return substr($string, 0, 3);
}
$salt = createSalt();
$hash = hash('sha256', $salt . $hash);

//check registration code
require('config/config.php');
//match the id with the registration code to update the correct row
$result = mysql_query("SELECT id FROM user WHERE regcode=
'". mysql_real_escape_string($_POST['regcode']) ."'") or die('Unable to query!');
$row = mysql_fetch_array($result);
if ($row['id'] != "") {
    $updateid = $row['id'];
} else {
    die("No matching registration code!");
}

//check if id is blank, means registration is blank
if (isset($updateid)) {
//update into database
$result = mysql_query("UPDATE user SET username='". mysql_real_escape_string($_POST['username']) ."', 
        password='". $hash ."', salt='". $salt ."', 
        email='". mysql_real_escape_string($_POST['email']) ."', 
        firstname='". mysql_real_escape_string($_POST['firstname']) ."', 
        lastname='". mysql_real_escape_string($_POST['lastname']) ."', 
        regcode='', joined=NOW(), lastlogin=NOW(), active='yes' 
        WHERE id='". $updateid ."'") or die(mysql_error());

//echo $query.",".$_POST['username'].",".$hash.",".$_POST['email'].",".$_POST['firstname'].",
//    ".$_POST['lastname'].",".$_POST['regcode'].",". $updateid ."";
//mysql_close();
echo 'yes';
} else {
echo 'noregcode'; 
}
?> 
```

PS请忽略过时的PHP。虽然它很糟糕，但我还没有修复它，我知道我很快就会修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:15:17.740

它不起作用的原因是您使用的代码根本没有使它起作用。代码将响应填充到 DOM 元素中，但不会尝试运行脚本。对元素属性的简单更新`innerHTML`不会导致嵌入式脚本运行。

您可以根据需要修改该脚本，但由于您使用 jQuery 标记了这个问题，我会以最强烈的措辞敦促您转储该脚本并使用 jQuery 执行此操作，这（如果您做得对）将完成必要的工作导致嵌入式脚本运行。

# c - 我试图理解的字符串指针行为

> ID：11487412
> 
> 赞同：2
> 
> 时间：2012-07-14T21:09:27.467
> 
> 标签：c, pointers

我编写了一个替换字符函数，它用替换字符替换源字符的实例。该函数的工作原理是字符串按预期更改，但是当我尝试使用函数的返回值时，puts 只输出一个空行。

有人可以解释发生了什么以及我需要在 replacechar 中更改什么来修复。

```
#include <stdio.h>  /* puts */
#include <string.h> /* strcpy */
#include <stdlib.h> /* malloc, free */

char* replacechar(char* s, char ch1, char ch2) {
   while (*s) {
      if (*s == ch1)
         *s = ch2;

      *s++;
   }

   return s;
}

int main()
{
   char* s = malloc(8);

   strcpy(s, "aarvark");

   puts(replacechar(s, 'a', 'z')); /* prints blank line */

   puts(s);  /* prints zzrvzrk as expected */

   free(s);

   return 0;
} 
```

感谢所有的回复。

我已更改为此（现在可以正常工作）。

```
char* replacechar(char* s, char ch1, char ch2) {
   char* p = s;
   while (*p) {
      if (*p == ch1)
         *p = ch2;

      p++;
   }

   return s;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T21:11:26.200

`s`一旦指针增加超过字符串的末尾，它就会返回指针的值。在 中创建一个局部变量`replacechar()`，并将其递增，并返回 的原始值`s`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:13:32.330

那是因为`while`循环`replacechar`递增`s`，直到`\0`. 在函数的末尾，您将返回指针，该指针指向`\0`并且打印`\0`是一个空行。你应该像这样管理它：

```
char *replacechar(char *s, char ch1, char ch2) {
    char *start = s;
    ...
    return start;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T21:21:56.700

你在这里的问题，其他看起来很漂亮的代码，是可变范围之一。

在 replacechar 中使用不同的本地 char*，例如

```
char* replacechar(char* s, char ch1, char ch2) {
   char* tmpstr;

   tmpstr=s;
   while (*tmpstr) {
      if (*tmpstr == ch1)
         *tmpstr = ch2;

      tmpstr++;  /* Note, no "*" here as in your code.  */
   }

   return s; /* s has remained unchanged */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T21:23:14.110

```
#include <stdio.h>  /* puts */
#include <string.h> /* strcpy */
#include <stdlib.h> /* malloc, free */

char* replacechar(char* s, char ch1, char ch2) {
   char* t = s;
   while (*s) {
      if (*s == ch1)
         *s = ch2;

      *s++;
   }

  return t;
}

int main()
{
   char* s = malloc(8);

   strcpy(s, "aarvark");

   puts(replacechar(s, 'a', 'z')); /* prints blank line */

   puts(s);  /* prints zzrvzrk as expected */

   free(s);

   return 0;
} 
```

# c# - 将声音输出到设备上的特定通道

> ID：11487425
> 
> 赞同：2
> 
> 时间：2012-07-14T21:12:08.843
> 
> 标签：c#, audio

我有一个有 16 个通道的虚拟声卡。我想知道.NET 中是否可以在特定通道上输出声音。所以我有一个声音去通道 1，另一个去 2，另一个去 3。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:26:51.303

[Microsoft DirectSound](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416960%28v=vs.85%29.aspx)是您的答案的解决方案之一。如果您在 C# 中使用 DirectSound 时遇到问题，您可以在 DirectShow 上查看包装器方法。[NAudio](http://naudio.codeplex.com/)是可靠且有用的项目。

这个链接对于开始很有用：

*   [终极托管 DirectSound](http://www.codeproject.com/Articles/11184/The-ultimate-Managed-DirectSound-9-Tutorial-Part-1)
*   [使用 C#、C++ 和 Visual Basic 的 DirectSound](http://www.riemers.net/eng/Tutorials/DirectX/Csharp/Series2/tut15.php)

# css - 谷歌浏览器中是否有任何“字体平滑”？

> ID：11487427
> 
> 赞同：142
> 
> 时间：2012-07-14T21:12:44.720
> 
> 标签：css, google-chrome, fonts, google-webfonts

我正在使用谷歌网络字体，它们在超大字体大小上很好，但在 18 像素时，它们看起来很糟糕。我在这里和那里读到有字体平滑的解决方案，但我没有找到任何可以清楚地解释它的地方，而且我发现的几个片段根本不起作用。

我`h4`在几乎所有浏览器中看起来都很糟糕，但 Chrome 是最糟糕的。在 Chrome 中，我几乎所有的字体看起来都很糟糕。

谁能指出我正确的方向？也许您知道可以清楚地解释这一点的资源？谢谢！

### 示例屏幕截图 #1

这张截图显示了[https://www.dartlang.org/](https://www.dartlang.org/)的主页，这是一种由 Google 制作的编程语言（因此我们可以暗示该网站也是由 Google 构建的）并使用 Google Webfonts。

*屏幕截图显示左侧为 Google Chrome，右侧为 Firefox/Internet Explorer。*

![左边是谷歌浏览器，右边是firefox/internet explorer](../Images/b4b3b91c2b941cb220f955a03a25c155.png)

### 示例屏幕截图 #2

此屏幕截图显示了 Adob​​e.com 上的产品信息页面，使用的是 Typekit 提供的网络字体。Adobe 和 Typekit 在字体方面是专业人士。

*屏幕截图显示右侧为 Google Chrome，左侧为 Firefox/Internet Explorer：*

![左边是谷歌浏览器，右边是firefox/internet explorer](../Images/beaee788559fa1fb89588ca4f8b157d5.png)

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-07-15T16:16:26.910

# 问题状态，2014 年 6 月：已在 Chrome 37 中修复

最后，Chrome 团队[将在 Chrome 37 中发布针对此问题的修复程序](https://code.google.com/p/chromium/issues/detail?id=137692#c123)，该修复程序将于 2014 年 7 月向公众发布。请在此处查看当前稳定的 Chrome 35 和最新的 Chrome 37（早期开发预览）的示例比较：

![在此处输入图像描述](../Images/5ccaad0986539ead719a1baab44d4e45.png)

# 问题状态，2013 年 12 月

1.)通过或Google 的.加载字体时没有适当的解决**方案**。问题是 Chrome 只是从谷歌的 API请求*.woff文件，这些文件呈现得很糟糕。*令人惊讶的是，所有其他字体文件类型都呈现精美。但是，有一些 CSS 技巧会稍微“平滑”渲染的字体，你会在这个答案中找到更深层次的解决方法。`@import``<link href=``webfont.js`

 *2.) 自托管字体时有一个真正的解决方案，首先由**[Jaime Fernandez](https://stackoverflow.com/questions/11487427/is-there-any-font-smoothing-in-google-chrome/19582105#19582105)**在此 Stackoverflow 页面上的另一个答案中发布，它通过以特殊顺序加载 Web 字体来解决此问题。简单地复制他的出色答案我会感觉很糟糕，所以请在那里看看。还有一个（未经证实的）解决方案建议仅使用 TTF/OTF 字体，因为它们现在几乎所有浏览器都支持。

3.) Google Chrome 开发团队致力于解决这个问题。由于渲染引擎已经发生了一些巨大的变化，因此显然有些事情正在进行中。

*我已经写了一篇关于这个问题的大型博客文章，请随意看看： [如何修复 Google Chrome 中丑陋的字体渲染](http://www.dev-metal.com/fix-ugly-font-rendering-google-chrome/)*

# 可重现的例子

看看今天在 Chrome 29 中最初问题的示例如何：

### 正面例子：

**左：Firefox 23，右：Chrome 29**

![在此处输入图像描述](../Images/875b375e380fabf2ab1f7e8d7b07eb6c.png)

### 正面例子：

**顶部：Firefox 23，底部：Chrome 29**

![在此处输入图像描述](../Images/bb8e98dde08e051a150359cf222d035e.png)

### 反例：铬 30

![在此处输入图像描述](../Images/536bfb1216f89031b275eda4344b6482.png)

### 反例：Chrome 29

![在此处输入图像描述](../Images/9d7827b1fd8a3ca2a2b119d020d72d75.png)

# 解决方案

使用 -webkit-text-stroke 修复上面的截图：

![在此处输入图像描述](../Images/8c1247caf6d7e51e23e34da2e5a09b90.png)

第一行是默认的，第二行是：

```
-webkit-text-stroke: 0.3px; 
```

第三行有：

```
-webkit-text-stroke: 0.6px; 
```

**所以，修复这些字体的方法就是给它们**

```
-webkit-text-stroke: 0.Xpx; 
```

或 RGBa 语法（由 nezroy 提供，在评论中找到！谢谢！）

```
-webkit-text-stroke: 1px rgba(0,0,0,0.1) 
```

**还有一种过时的可能性**：给文本一个简单的（假的）阴影：

```
text-shadow: #fff 0px 1px 1px; 
```

RGBa 解决方案（在 Jasper Espejo 的博客中找到）：

```
text-shadow: 0 0 1px rgba(51,51,51,0.2); 
```

# 我为此发表了一篇博文：

如果您想了解此问题的最新信息，请查看相应的博客文章：[如何修复 Google Chrome 中丑陋的字体渲染](http://www.dev-metal.com/fix-ugly-font-rendering-google-chrome/)。如果有这方面的消息，我会发布消息。

# 我原来的答案：

这是 Google Chrome 中的一个大错误，Google Chrome 团队确实知道这一点，请参阅[此处](https://code.google.com/p/chromium/issues/detail?id=137692)的官方错误报告。目前，在 2013 年 5 月，即使在报告该错误 11 个月后，也没有解决。奇怪的是，唯一搞乱 Google Webfonts 的浏览器是 Google 自己的浏览器 Chrome（！）。但是有一个简单的解决方法可以解决问题，请参阅下面的解决方案。

**2013 年 5 月 Google Chrome 开发团队的声明**

错误报告评论中的官方声明：

*我们的 Windows 字体渲染正在积极进行中。...我们希望在开发人员可以开始使用的一两个里程碑中拥有一些东西。与往常一样，它变得稳定的速度取决于我们能够以多快的速度根除并消除任何回归。*

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-10-25T05:55:17.180

我遇到了同样的问题，我在[Sam Goddard 的这篇文章中](http://www.adtrak.co.uk/blog/font-face-chrome-rendering/)找到了解决方案，

如果**定义两次对字体的调用**的解决方案。首先是推荐的，用于所有浏览器，在特定调用后仅用于具有特殊媒体查询的 Chrome：

```
@font-face {
  font-family: 'chunk-webfont';
  src: url('../../includes/fonts/chunk-webfont.eot');
  src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
  url('../../includes/fonts/chunk-webfont.woff') format('woff'),
  url('../../includes/fonts/chunk-webfont.ttf') format('truetype'),
  url('../../includes/fonts/chunk-webfont.svg') format('svg');
  font-weight: normal;
  font-style: normal;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
    font-family: 'chunk-webfont';
    src: url('../../includes/fonts/chunk-webfont.svg') format('svg');
  }
} 
```

![在此处输入图像描述](../Images/3a01fdf0da8c3c2d3548c9379d3fc80c.png)

使用这种方法，字体将在所有浏览器中呈现良好。我发现的唯一缺点是字体文件也被下载了两次。

您可以[在我的页面中找到这篇文章的西班牙语版本](http://www.vissit.com/renderizar-fuentes-web-fonts-en-google-chrome)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-15T04:10:14.733

Chrome 不会像 Firefox 或任何其他浏览器那样呈现字体。这通常是仅在 Windows 上运行的 Chrome 中的问题。如果要使字体平滑，请像这样在您的标签`-webkit-font-smoothing`上使用该属性。`h4`

```
h4 {
    -webkit-font-smoothing: antialiased;
} 
```

您也可以使用`subpixel-antialiased`，这将为您提供不同类型的平滑（使文本有点模糊/阴影）。但是，您需要一个夜间版本才能看到效果。[您可以在此处](http://maxvoltar.com/archive/-webkit-font-smoothing/)了解有关字体平滑的更多信息。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-04-03T13:58:12.050

好的，您可以简单地使用它

```
-webkit-text-stroke-width: .7px;
-webkit-text-stroke-color: #34343b;
-webkit-font-smoothing:antialiased; 
```

确保您的文本颜色和上部文本笔划宽度必须相同，仅此而已。*

# jquery - jquery通过ajax防止元素上的默认事件

> ID：11487433
> 
> 赞同：2
> 
> 时间：2012-07-14T21:13:40.197
> 
> 标签：jquery

如何防止在创建 dom 后加载的 html 元素上的默认事件操作。如您在第一行代码中所见，我的页面通过 jquery .load 方法包含另一个页面。

从第三行开始的代码似乎不起作用。当我单击带有 a.clearCart 的链接时，浏览器只会加载页面而不是在后台请求页面。clearCart 类的链接位于名为“Cart.php”的单独文件中，该文件在页面准备好时加载。

下面的页面是：index.php

```
$(document).ready(function(e) {
    $('#cart').load('./ajax/Cart.php');//a.clearCart is located in this file    

    $("a.clearCart").click(function(e)
    {
        e.preventDefault();
        return false;
        $.getJSON('./ajax/clearCart.php?','id=12',check);
        function check(data)
        {
            if(data.Status == "Success")
            {
                alert("Update Cart");//For Debugging Only,should call UpdateCart()
            }
            else if(data.Status == "Failed")
            {
                alert("WTF");//Welcome to Finland
            }
        }
    });

    function UpdateCart()
    {
        $('#cart').load('./ajax/Cart.php');
    }
    $('.formInfo form').submit(function(e) {

        var id = this.prodId.value;
        var qta = this.qty.value;
        var data = {prodId:id,qty:qta};
        $.getJSON('./ajax/addcart.php',data,processData);

        function processData(data)
        {
            if($('p.message').text().length > 5)
            {
                $('p.message').empty().removeClass('.success').removeClass('failure');

            }
            if(data.Status == "Failed")
            {
                $('p.message').append(data.Reason).addClass('failure');
            }
            else if(data.Status == "Success")
            {
                $('p.message').append(data.Reason).addClass('success');
                UpdateCart();
            }
        }

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:15:08.923

您可以使用`live()`或`on()`功能。我将展示`on()`因为`live()`从 jQuery 1.7 开始不推荐使用：

改变

```
$("a.clearCart").click(function(e) 
```

到

```
$(document).on('click', 'a.clearCart', function(e) {
    // Code goes here
}). 
```

看

*   [http://api.jquery.com/live/](http://api.jquery.com/live/) - 自 jQuery 1.7 起已弃用
*   [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:18:06.887

The click function does nothing because of the `return false;` in it. This will end the function by returning `false`.

Remove that and the ajax code will be executed.

# struts2 - 使用struts2时如何设置操作链接以删除从表中加载的表中的行

> ID：11487435
> 
> 赞同：1
> 
> 时间：2012-07-14T21:14:30.430
> 
> 标签：struts2, action

我想从存储在数据库中的表中永久删除一行，该表正在显示在 jsp 页面上。我有一个链接`Delete`（对于每一行），只需单击一下即可删除该行。

我的jsp代码是：

```
 <s:iterator value="topperList" >
      <tr>
         <td><s:property value="uid"/></td>
         <td><s:property value="name"/></td>
         <td><s:property value="password"/></td>
         <td><s:property value="sex" /></td>
         <td><s:property value="age" /></td>
         <td><s:property value="city" /></td>
         <td><s:property value="abuse" /></td>
         <td><s:property value="lastlogin" /></td>
         <td><s:property value="points" /></td>
         <td><s:property value="joined" /></td>
         <td><s:property value="email" /></td>
         <s:url id="url" action="delete" >
           <s:param name="uid"><s:property value="uid" /></s:param>
         </s:url>
         <td><s:a href="%{url}">Delete</s:a></td>
      </tr> 
  </s:iterator> 
```

我在动作类中的代码是：

```
private Integer uid;

public Integer getUid() {
    return uid;
}

public void setUid(Integer uid) {
    this.uid = uid;
}
public String delete() {
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        Users user = (Users) session.load(Users.class, this.getUid());
        if (null != user) {
            session.delete(user);
        }
        session.getTransaction().commit();
           return SUCCESS;
    } 
```

struts.xml 中的操作代码：

```
<action name="delete" class="com.rambo.action.FindToppers" method="delete" >
        <result name="success">buser.jsp</result>
    </action> 
```

但我得到了错误：

```
org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [beans.Users#0] 
```

我已经看到 table 中有一个适当的行`USERS with uid=56`。但它显示没有具有标识符的行存在。但是我没有收到任何服务器错误日志。有人可以指出可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:13:31.270

私人整数 cid；

这应该是公开的，您可以将其更改为 int

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:44:41.833

我想我看到了问题。问题是动作中的属性`cid`是`null`（你可以做 a `System.out.println(cid)`）。如果`null`打印了可能你将不得不用 . 捕获 url 参数`ParameterAware`。

# api - Google Apps 脚本的另一个 doGet() 问题 - “未知宏 doGet”错误

> ID：11487439
> 
> 赞同：2
> 
> 时间：2012-07-14T21:14:54.247
> 
> 标签：api, google-apps-script

我显然是 Google Apps Script 的新手，但我在 C、PHP 和 Java 编码方面有一些经验。由于我们想在我们的公司中使用 Google Apps 脚本创建一个小型 CRM，因此我们需要创建一个应用程序，其中包含 Google 协作平台上可用的表单。我一直在寻找这个问题的答案很长时间，不幸的是我没有找到任何答案。我有这样的代码：

```
var klienci_id = new Array(100);
var klienci_nazwa = new Array(100);
var klienci_adres = new Array(100);
var klienci_osoba = new Array(100);
var klienci_telefon = new Array(100);
var klienci_email = new Array(100);

function doGet(e) {
  var app = UiApp.createApplication();

   // hello world label
  var helloworldLabel = app.createLabel("I love Apps  Script!").setStyleAttribute("fontSize","16px");

  // add the label to the app container
  app.add(helloworldLabel);

  return app;
}

function main() {

 var klienci = SpreadsheetApp.openById("0ArsOaWajjzv9dEdGTUZCWFc1NnFva05uWkxETVF6Q0E");

 var kuchnia_polska = klienci.getSheetByName("Kuchnia polska");

 var dane = kuchnia_polska.getRange("D7:F22");

doGet();

} 
```

每次我尝试发布它并输入给定的链接时，我都会收到错误“Unknown macro doGet”。我知道当有人不使用 doGet() 函数但我使用时这是一个常见问题 - 但它仍然不起作用。我也相信谷歌应该在谷歌应用脚​​本上创建一个完整的文档，它可以像 Unix 手册那样工作，因为我无法通过所有这些奇怪的页面帮助:) 它既不是 Windows 帮助，也不是一个好的手册;)

问候， 卡米尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T12:35:28.723

我怀疑您制作了一次“版本”，发布了应用程序，转到“真实”链接而不是“开发”链接，然后添加了 doGet() 函数。当你制作一个版本时，它会冻结当时的代码。发布应用程序的版本是在“真实”链接（您为用户提供的内容）上运行的代码版本，它允许您继续编辑代码而不会干扰应用程序的现有用户。在发布对话框中有一个特殊的“开发”链接，它总是引用最新版本的代码，但它只对你有效，对其他人无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:49:16.923

我担心您对“doGet()”函数的使用有一点误解。当您想将应用程序作为 webapp 运行时，[文档](https://developers.google.com/apps-script/uiapp?hl=fr-FR#Deploying)确实说它必须包含一个 doGet 函数，但它没有明确说明这个函数应该是整个应用程序的起点，即函数该网址将首先调用。因此，从所谓的“主”函数调用 doGet 函数没有多大意义，因为“主”函数不是主函数......

我现在无法想象某个函数调用 doGet 函数的情况，因为脚本中的每个函数最初（直接或间接）都是从这个 doGet 函数调用的......实际上是脚本中任何其他函数的“结束”返回'到 doGet 初始函数。好吧，这可能并非在每种情况下都绝对正确，但它可以让您大致了解它是如何工作的。

我希望这足够清楚，回到您的代码片段，如果您删除 doGet(e) 调用，它会显示一个很好的“我喜欢 Apps 脚本！” 但它永远不会做任何其他事情，当然看不到“主要”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T08:56:06.640

我在这里复制了您的代码[https://script.google.com/macros/d/MJ80AK8t7kbgDcC-NaLPYvH797_hv7HHb/edit?template=app&folder=0AKGkLMU9sHmLUk9PVA](https://script.google.com/macros/d/MJ80AK8t7kbgDcC-NaLPYvH797_hv7HHb/edit?template=app&folder=0AKGkLMU9sHmLUk9PVA)

并且当部署为网络应用程序时似乎可以工作[https://script.google.com/macros/s/AKfycbxOiaukLt7P4pIm7bms7aU16uEo6FuZ-MNOh0tSqUwr/dev](https://script.google.com/macros/s/AKfycbxOiaukLt7P4pIm7bms7aU16uEo6FuZ-MNOh0tSqUwr/dev)

我能想到的唯一一件事是您的代码中还有其他内容未复制到引发异常的代码段中。

[就在 GUI Builder 发布之前，我想出了[使用 Google Apps 脚本为自定义表单界面创建一个框架，](http://mashe.hawksey.info/2011/05/work-in-progress-google-spreadsheetsites-flexible-event-booking-form/)这可能会对您的项目有所帮助]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:25:25.943

谢谢你们俩的帮助。**Serge**，是的，Google Apps 脚本的结构应该是什么并不明显。它们基于 JavaScript，然而，由于代码中缺少 HTML，它们的流程完全不同——所以自然必须有一个首先执行的 main 函数。当然，在每个编程环境中，它都必须有一个不同的名称才能使其更容易区分；-)

我创建了我的应用程序的一个新副本，没有完全更改代码 - 部署它并且它工作得很好。由于我没有更改访问选项中的任何内容，因此具有相同代码和相同选项的两个应用程序不会给出相同的结果是很奇怪的。我认为这可能是一种环境缺陷，也许谷歌的人应该看看这个:)

这是脚本的链接，我已将访问权限设置为“知道链接的任何人”。

[https://script.google.com/a/macros/foodbroker.pl/s/AKfycbwk2IM-rIYLhQl6HOlbppwGOnw4Ik_kH7ixbaSNVxIE-QR7cq8/exec](https://script.google.com/a/macros/foodbroker.pl/s/AKfycbwk2IM-rIYLhQl6HOlbppwGOnw4Ik_kH7ixbaSNVxIE-QR7cq8/exec)

# php - 使用 PDO / MySQL 获得的不仅仅是最后一个插入 ID

> ID：11487441
> 
> 赞同：0
> 
> 时间：2012-07-14T21:14:56.807
> 
> 标签：php, mysql, pdo

我正在编写一个小框架，我的目标是让我的开发人员在添加/插入资源后，可以轻松地设置重定向到资源的详细信息页面。

通常这就像 PDO::lastInsertID() 一样简单，但我不仅仅使用 ID 来识别资源，我还使用资源名称/标题的格式化版本。

例如，一个新的锦标赛可能被称为“测试锦标赛”，因此它的资源 URI 将是 domain.com/tournament/328-test-tournament。

因此，当我在插入后重定向时，我需要重定向到“328-test-tournament”而不仅仅是“328”。这是出于 URL 完整性目的而设计的。我不希望人们使用不匹配的 ID 和标题访问单个资源。

也就是说，在我插入之后，我希望能够自动返回的不仅仅是 ID，而是我输入的整个数据集，这样我就可以格式化标题并重定向。

我可以在控制器中执行此操作：

```
$this->TournamentModel->insert();

$id = PDO::lastInsertID();
$title = my_title_formatting_function($_POST['title']);
@header("Location: domain.com/tournament/{$id}-{$title}"); 
```

但我想要一个稍微优雅一点的解决方案，如下所示：

$id = $this->TournamentModel->lastInsert();

lastInsert 实际上是核心模型中的一个公共方法，它不仅检索最后一个插入的 id，还检索整个行。然后我会在那里处理标题格式和 id 连接。

这样的事情存在吗？或者至少有一个 PDO 方法可以返回插入的表，以便我可以使用表名和 id 构造查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:34:43.783

检查[Doctrine](http://www.doctrine-project.org/)或[Propel](http://www.propelorm.org/)。

它们是两个非常著名的对象关系映射器，具有作为基础 PDO。 [ORM 可以满足](http://en.wikipedia.org/wiki/Object-relational_mapping)您的要求，并且还有许多其他您会喜欢的功能，请检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:43:32.880

“标题”不属于`Tournament`对象吗？IE

```
class TournamenentModel {
  private $id;
  private $title;

  public function setTitle($title) {
    $this->title = $title;
  }

  public function getTitleFormatted() {
    return my_title_formatting_function($this->title);
  }
} 
```

在这种情况下，您的插入方法可能看起来像

```
PDO::save(array('title' => $this->title)); 
```

您的工作流程将遵循以下原则：

```
$tournament = new TournamentModel();
$tournament->setTitle($_POST['title']);
$tournament->insert();

$title = $tournament->getTitleFormatted();
@header("Location: domain.com/tournament/{$id}-{$title}"); 
```

**标题会一直保存在内存中，直到您释放对象**，不需要保存然后从数据库中*检索它吗？*

# javascript - 奇怪的 javascript 数组行为。可以修复吗？

> ID：11487442
> 
> 赞同：2
> 
> 时间：2012-07-14T21:14:59.800
> 
> 标签：javascript, arrays

我有一个像这样的多维数组：

```
var map = [[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]; 
```

然后，我有一些函数可以根据一些变量在两个维度上“调整”数组的大小。我就是这样做的：

```
function resizeArr(arr, rows, rowsDiff, cols, colsDiff) {
    var arrLength = arr.length;

    if (colsDiff > 0) {
        i=0;
        while (i<arrLength) {
            j=0;
            while (j<colsDiff) {
                arr[i].push(0);
                j++
            }
            i++
        }
    }
    if (colsDiff < 0) {
        i=0;
        while (i<arrLength) {
            j=0;
            colsDiffAbs = Math.abs(colsDiff);
            while (j<colsDiffAbs) {
                arr[i].pop();
                j++
            }
            i++
        }
    }

    if (rowsDiff > 0) {
        fullColsArr = makeArrayOf(0, cols);
        i=0;
        while (i<rowsDiff) {
            arr.push(fullColsArr);
            i++
        }
    }
    if (rowsDiff < 0) {
        rowsDiffAbs = Math.abs(rowsDiff);
        i=0;
        while (i<rowsDiffAbs) {
            arr.pop();
            i++
        }
    }
    return arr;
} 
```

基本上，使用这 4 个 if 语句，我会根据 rowsDiff/colsDiff 变量是正数还是负数，弹出一些值或推送一些新值（零）。

我的问题是，当我将数组的大小从 map[4][4] 的最大值调整为 map[9][9] 时，看起来一切正常，因为我得到：

```
[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]] 
```

作为我的新数组，看起来不错。但是，当我尝试将特定值分配给 map[9][9] 时，它会填充每个新数组的最后一个值，如下所示：

```
[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,14],[0,0,0,0,0,0,0,0,0,14],[0,0,0,0,0,0,0,0,0,14],[0,0,0,0,0,0,0,0,0,14],[0,0,0,0,0,0,0,0,0,14]] 
```

如果我尝试为倒数第二个值（map[9][8]）分配一个值，它也会填充所有其他值的倒数第二个值。

但是当我为数组的原始部分赋值时，它可以正常工作。我在这里做错了什么？

我已尽力解释它 - 请随时询问更多细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:20:35.480

当您按行展开时，您将多次推送*同一个数组。*因此数组的每一行都指向同一个地方（同一个列数组）。因此，当您更改一个时，它们“全部”似乎都发生了变化。

相反，您想为每个新行创建一个新数组并推送它：

```
if (rowsDiff > 0) {
    i=0;
    while (i<rowsDiff) {
        arr.push(makeArrayOf(0, cols));
        i++
    }
} 
```

# cocoa - NSTextField 的文本更改通知

> ID：11487443
> 
> 赞同：56
> 
> 时间：2012-07-14T21:15:06.263
> 
> 标签：cocoa, observer-pattern, nstextfield, nsnotifications

我想使用这个问题的答案中的代码： [如何观察 NSTextField](https://stackoverflow.com/questions/6527321/how-to-observe-the-value-of-an-nstextfield)上的 NSTextField 的值，以便观察存储在 NSTextField 中的字符串的变化。

```
[[NSNotificationCenter defaultCenter]
    addObserverForName:NSTextViewDidChangeSelectionNotification
    object:self.textView 
    queue:[NSOperationQueue mainQueue] 
    usingBlock:^(NSNotification *note){
    NSLog(@"Text: %@", self.textView.textStorage.string);
}]; 
```

这里使用的类是一个 NSTextView。我在 NSTextField 中找不到要使用的通知来代替 NSTextViewDidChangeSelectionNotification。

在这种情况下可以使用 NSTextField 中的通知吗？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-15T01:09:29.603

如果您只想检测文本字段的值何时发生变化，您可以使用[`controlTextDidChange:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/controlTextDidChange:)继承`NSTextField`自`NSControl`.

只需将 nib 文件中的`delegate`出口连接`NSTextField`到您的控制器类，然后实现如下所示：

```
- (void)controlTextDidChange:(NSNotification *)notification {
    NSTextField *textField = [notification object];
    NSLog(@"controlTextDidChange: stringValue == %@", [textField stringValue]);
} 
```

如果您以`NSTextField`编程方式创建，您可以在创建后使用`NSTextField`setDelegate [:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTextField/setDelegate:)方法来指定委托：

```
NSTextField *textField = [[[NSTextField alloc] initWithFrame:someRect] autorelease];
[textField setDelegate:self]; // or whatever object you want 
```

委托是整个 Cocoa 中使用的基本设计模式之一。简而言之，它允许您轻松自定义标准对象（在本例中为用户界面对象）的行为，而无需通过子类化对象来添加附加行为所涉及的复杂性。例如，检测文本字段中的文本何时发生更改的另一种较低级别的方法可能是创建您自己的自定义子类，在该子类中`NSTextField`覆盖继承自. 但是，这样的子类化很困难，因为它可能要求您对对象的继承层次有深入的了解。有关更多信息，请务必查看以下内容：[`keyDown:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/keyDown:)`NSTextField``NSResponder`

[Cocoa 基础指南：代表和数据源](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW26)

关于什么`id <NSTextFieldDelegate>`意思：它意味着一个通用对象（`id`），它声明自己符合`<NSTextFieldDelegate>`协议。有关协议[的更多信息，请参阅 Objective-C 编程语言：协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1)。

示例 GitHub 项目位于：[https ://github.com/NSGod/MDControlTextDidChange](https://github.com/NSGod/MDControlTextDidChange)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-03-05T17:08:07.513

Xcode 9.2。使用 Swift 4.0.3。

NSTextField 必须通过接口构建器连接，此实现才能工作。

```
import Cocoa

@objc public class MyWindowController: NSWindowController, NSTextFieldDelegate {

@IBOutlet weak var myTextField: NSTextField!

// MARK: - ViewController lifecycle -

override public func windowDidLoad() {
    super.windowDidLoad()
    myTextField.delegate = self
}

// MARK: - NSTextFieldDelegate -

public override func controlTextDidChange(_ obj: Notification) {
    // check the identifier to be sure you have the correct textfield if more are used 
    if let textField = obj.object as? NSTextField, self.myTextField.identifier == textField.identifier {
        print("\n\nMy own textField = \(self.myTextField)\nNotification textfield = \(textField)")
        print("\nChanged text = \(textField.stringValue)\n")
    }
} 
```

}

控制台输出：

```
My own textField = Optional(<myApp.NSTextField 0x103f1e720>)
Notification textfield = <myApp.NSTextField: 0x103f1e720>

Changed text = asdasdasddsada 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-20T13:55:12.597

您应该使用`NSTextFieldDelegate`和实施`controlTextDidChange`. 在 macOS 10.14 和 Swift 4.2 中测试

```
import Cocoa

class ViewController: NSViewController, NSTextFieldDelegate {

  @IBOutlet weak var textField: NSTextField!

  override func viewDidLoad() {
    super.viewDidLoad()

    textField.delegate = self
  }

  func controlTextDidChange(_ obj: Notification) {
    let textField = obj.object as! NSTextField
    print(textField.stringValue)
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T22:36:37.000

我相信您想阅读[字段编辑器](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/TextEditing/Tasks/FieldEditor.html#//apple_ref/doc/uid/20001815-CJBJHGAG)，它本质上是一个（隐藏的） ，它处理给定窗口`NSTextView`中所有 s 的文本输入。[“使用字段编辑器使用委派和通知”](https://developer.apple.com/library/mac/documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextEditing/TextEditing.html#//apple_ref/doc/uid/20001815-131165)`NSTextField`部分应该为您指明正确的方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-02T09:51:56.647

在 Swift 中是

```
public override func controlTextDidChange(_ obj: Notification) {

} 
```

# magento - Magento 主题和 Magento 皮肤有什么区别？

> ID：11487446
> 
> 赞同：3
> 
> 时间：2012-07-14T21:15:46.557
> 
> 标签：magento

Magento 主题和 Magento 皮肤有什么区别？这些和 Magento 模块之间的关系是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T21:23:28.343

主题是创建视觉体验**的布局、模板、区域设置和/或皮肤文件的任意组合......**

主题由以下任何或所有内容组成：

*   **布局**（位于 app/design/frontend/your_interface/your_theme/layout/） 这些是基本的 XML 文件，用于定义不同页面的块结构以及控制 META 信息和页面编码。要深入了解布局，请阅读 Intro to布局）
*   **模板**（位于 app/design/frontend/your_interface/your_theme/template/） 这些是 PHTML 文件，其中包含 (X)HTML 标记和任何必要的 PHP 标记，以创建视觉呈现逻辑。
*   **语言环境**（位于 app/design/frontend/your_interface/your_theme/locale/） 这些是按语言组织的简单文本文档，其中包含商店副本的翻译。
*   **皮肤**（位于 skin/frontend/your_interface/your_theme/） 这些是特定于块的 Javascript 和 CSS 以及与您的 (X)HTML 相得益彰的图像文件。

资料来源： http: [//www.magentocommerce.com/design_guide/articles/magento-design-terminologies4](http://www.magentocommerce.com/design_guide/articles/magento-design-terminologies4)

# django - 在 Django 中将 JSON 转换为模型实例

> ID：11487447
> 
> 赞同：7
> 
> 时间：2012-07-14T21:15:50.503
> 
> 标签：django, json, deserialization

给定模型实例的 json 表示，在 django 中更新模型实例的最佳方法是什么。

使用反序列化是正确的方法吗？那里有可用的教程吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T21:48:29.047

最好的方法是利用[现有的 Django 应用程序](http://www.djangopackages.com/grids/g/api/)之一，该应用程序支持将模型实例序列化到 JSON 和从 JSON 序列化。

无论哪种情况，如果将 JSON 对象解析为 Python 字典，则基本上可以[`QuerySet.update()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/)直接使用该方法。

所以，假设你得到一个字典，其中所有的键都映射到模型属性，它们代表你想要更新的值，你可以这样做：

```
updates = {                                    # Our parsed JSON data
    'pk': 1337,
    'foo': 'bar', 
    'baz': 192.05
}

id = updates.pop('pk')                         # Extract the instance's ID
Foo.objects.filter(id=id).update(**updates)    # Update the instance's data 
```

# mysql - freeradius 模块无法启动

> ID：11487448
> 
> 赞同：0
> 
> 时间：2012-07-14T21:16:48.723
> 
> 标签：mysql, module, shared-libraries, radius, freeradius

我对 freeradius 模块有这个问题。我正在尝试添加我的自定义模块，但是在我以调试模式启动 radius 服务器后，它向我显示了这个错误：

```
/usr/local/etc/raddb/modules/m2[2]: Failed to link to module 'rlm_m2': libmysql.so.16: cannot open shared object file: No such file or directory 
/usr/local/etc/raddb/sites-enabled/default[224]: Failed to load module "m2".
/usr/local/etc/raddb/sites-enabled/default[69]: Errors parsing authorize section. 
```

我的系统是Ubuntu 12，所有mysql包都安装正确（usr/lib/mysql中确实存在libmysql.so.16）freeradius在默认参数下运行流畅等等。我真的不知道究竟是什么找不到这个 mysql 库或如何向它展示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:14:52.923

尝试像这样编译：

```
gcc -I/usr/include/mysql rlm_m2.c -o rlm_m2 -lmysqlclient -lnsl -lm -lz\
    -L/usr/lib/mysql -L/usr/lib/mysql -L/usr/lib64/mysql 
```

# javascript - 覆盖 ColorBox 打开/关闭过渡效果？

> ID：11487449
> 
> 赞同：2
> 
> 时间：2012-07-14T21:16:54.237
> 
> 标签：javascript, jquery, html, css, colorbox

现在，[颜色框](http://www.jacklmoore.com/colorbox)过渡在打开时设置为“放大”，在关闭时设置为“淡出”。有没有办法改变这个？

我希望它在关闭时“缩小”，也许使用 JQuery hide(500) 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T23:57:52.907

你能更精确一点吗？它应该“缩小”什么？发布一些代码以更好地解释它。

对于我得到的，您必须正确设置*转换*属性。

# android - Android + OpenCV + 人脸检测 + 自定义布局

> ID：11487452
> 
> 赞同：2
> 
> 时间：2012-07-14T21:17:03.680
> 
> 标签：android, opencv

我在用：

*   安卓 4.0.3
*   OpenCV 2.4.2
*   三星盖乐世 S2

面部检测示例（来自 opencv 2.4.2）运行良好。但是现在，我想创建一个自定义布局，并且只使用从人脸检测中提取的数据并在其上构建一个游戏。不一定让 FdView 表面占据整个屏幕。

我在下面做了这些修改，但只显示一个黑屏。屏幕上什么也没有出现。

添加了 fd.xml 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

    <org.opencv.samples.fd.FdView android:id="@+id/FdView" 
        android:layout_width="640dp" 
        android:layout_height="480dp"
        android:visibility="visible"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FF0000"
        android:text="hi"/> 
```

修改了FdActivity.java的baseLoaderCallback：

```
 private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

                // Load native libs after OpenCV initialization
                System.loadLibrary("detection_based_tracker");

                //EXPERIMENT
                setContentView(R.layout.fd);
                FdView surface = (FdView) (findViewById(R.id.FdView));

                surface = mView;
                // Create and set View
                mView = new FdView(mAppContext);
                mView.setDetectorType(mDetectorType);
                mView.setMinFaceSize(0.2f);
                //setContentView(mView);

                // Check native OpenCV camera
                if( !mView.openCamera() ) {
                    AlertDialog ad = new AlertDialog.Builder(mAppContext).create();
                    ad.setCancelable(false); // This blocks the 'BACK' button
                    ad.setMessage("Fatal error: can't open camera!");
                    ad.setButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        finish();
                        }
                    });
                    ad.show();
                }
            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
}; 
```

在 FdView.java 中添加了构造函数：

```
 public FdView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

public FdView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
} 
```

在 SampleCvViewBase.java 中添加了构造函数：

```
 public SampleCvViewBase(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

public SampleCvViewBase(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:13:32.990

我有完全相同的问题。也想弄清楚。我正在尝试在`SurfaceView`不占用整个屏幕的情况下显示图像。我读到你不能让你的相机处理程序类和`SurfaceView`不同的类链接。于是把所有的东西都砸成了一个。

所以，目前我让相机显示在 上`SurfaceView`，并将帧数据复制到一个`mFrame`变量中。基本上只是努力获得`mFrame`处理（在多线程、Run()、函数中）并在`SurfaceView`.

这是我拥有的代码，如果您认为它会有所帮助：（请原谅格式化，因为我的代码也在进行中）

```
package org.opencv.samples.tutorial3;

import java.io.IOException;
import java.util.List;

import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ImageFormat;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.Window;
import android.widget.TextView;

public class Sample3Native extends Activity implements SurfaceHolder.Callback,Runnable{

    //Camera variables
    private Camera              cam;
    private boolean             previewing = false;
    private SurfaceHolder       mHolder;
    private SurfaceView         mViewer;
    private int                 mFrameWidth;
    private int                 mFrameHeight;
    private byte[]              mFrame;
    private boolean             mThreadRun;
    private byte[]              mBuffer;
    Sample3View viewclass;
    TextView text;
    int value = 0;
    //==========

    int framecount = 0;

    private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) {
        @Override
        public void onManagerConnected(int status) {
            switch (status) {
                case LoaderCallbackInterface.SUCCESS:
                {

                    // Load native library after(!) OpenCV initialization
                    System.loadLibrary("native_sample");

                    //constructor for viewclass that works on frames
                    viewclass = new Sample3View();

                    //setContentView(mView);
                    //OpenCam();
                    //setContentView(R.layout.main);

                    // Create and set View
                    CameraConstruct();
                    Camopen();

                } break;
                default:
                {
                    super.onManagerConnected(status);
                } break;
            }
        }
    };

    public Sample3Native()
    {}

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.main);

        OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack);
    }

    //Camera construction
    public void CameraConstruct()
    {
        mViewer = (SurfaceView)findViewById(R.id.camera_view);
        text = (TextView)findViewById(R.id.text);
        mHolder = mViewer.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    //calls camera screen setup when screen surface changes
    public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) 
    {
        CamStartDisplay();  
    }

    public void Camclose()
    {
        if(cam != null && previewing)
        {
            cam.setPreviewCallback(null);
            cam.stopPreview();
            cam.release();
            cam = null;

            previewing = false;
        }

        mThreadRun = false;
        viewclass.PreviewStopped();
    }

    //only open camera, and get frame data
    public void Camopen()
    {
        if(!previewing){
            cam = Camera.open();
            //rotate display
            cam.setDisplayOrientation(90);
            if (cam != null)
            {
                //copy viewed frame
                cam.setPreviewCallbackWithBuffer(new PreviewCallback() 
                {

                    public void onPreviewFrame(byte[] data, Camera camera) 
                    {
                        synchronized (this) 
                        {
                            System.arraycopy(data, 0, mFrame, 0, data.length);

                            this.notify(); 
                        }
                        //text.setText(Integer.toString(value++));
                        camera.addCallbackBuffer(mBuffer);
                    }
                });

            }

        }//if not previewing
    }

    //start preview
    public void CamStartDisplay()
    {
        synchronized (this) 
        {
            if(cam != null)
            {
                //stop previewing till after settings is changed
                if(previewing == true)
                {
                    cam.stopPreview();
                    previewing = false;
                }

                Camera.Parameters p = cam.getParameters();
                for(Camera.Size s : p.getSupportedPreviewSizes())
                {
                    p.setPreviewSize(s.width, s.height);
                    mFrameWidth = s.width;
                    mFrameHeight = s.height;
                    break;
                }

                p.setPreviewSize(mFrameWidth, mFrameHeight);

                List<String> FocusModes = p.getSupportedFocusModes();
                if (FocusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO))
                {
                    p.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
                }
                cam.setParameters(p);

                //set the width and height for processing
                viewclass.setFrame(mFrameWidth, mFrameHeight);

                int size = mFrameWidth*mFrameHeight;
                size  = size * ImageFormat.getBitsPerPixel(p.getPreviewFormat()) / 8;
                mBuffer = new byte[size];
                mFrame = new byte [size];
                cam.addCallbackBuffer(mBuffer);

                viewclass.PreviewStarted(mFrameWidth, mFrameHeight);

                //start display streaming
                try 
                {
                    //cam.setPreviewDisplay(null);
                    cam.setPreviewDisplay(mHolder);
                    cam.startPreview();
                    previewing = true;
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                }

            }//end of if cam != null
        }//synchronising
    }

    //thread gets started when the screen surface is created
    public void surfaceCreated(SurfaceHolder holder) {
        //Camopen();
        //CamStartDisplay();
        (new Thread(this)).start(); 
    }

    //called when the screen surface is stopped
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        Camclose();
    }

    //this is function that is run by thread
    public void run() 
    {

        mThreadRun = true;
        while (mThreadRun) 
        {
            //text.setText(Integer.toString(value++));
            Bitmap bmp = null;

            synchronized (this) 
            {
                try 
                {
                    this.wait();

                    bmp = viewclass.processFrame(mFrame);
                } 
                catch (InterruptedException e) {}
            }

            if (bmp != null) 
            {
                Canvas canvas = mHolder.lockCanvas();

                if (canvas != null) 
                {
                    canvas.drawBitmap(bmp, (canvas.getWidth() - mFrameWidth) / 2, (canvas.getHeight() - mFrameHeight) / 2, null);
                    mHolder.unlockCanvasAndPost(canvas);
                }
            }//if bmp != null
        }// while thread in run
    }

}//end class 
```

`Sample3View`在此类中使用的仅包含以下`processFrame`功能：

```
package org.opencv.samples.tutorial3;

import android.content.Context;
import android.graphics.Bitmap;
import android.widget.TextView;

class Sample3View {

    private int mFrameSize;
    private Bitmap mBitmap;
    private int[] mRGBA;

    private int frameWidth;
    private int frameHeight;
    private int count = 0;

    Sample3Native samp;

    //constructor
    public Sample3View() 
    {
    }

    public void setFrame(int width,int height)
    {
        frameWidth = width;
        frameHeight = height;
    }

    public void PreviewStarted(int previewWidtd, int previewHeight) {
        mFrameSize = previewWidtd * previewHeight;
        mRGBA = new int[mFrameSize];
        mBitmap = Bitmap.createBitmap(previewWidtd, previewHeight, Bitmap.Config.ARGB_8888);
    }

    public void PreviewStopped() {
        if(mBitmap != null) {
            mBitmap.recycle();
            mBitmap = null;
        }
        mRGBA = null;   
    }

    public Bitmap processFrame(byte[] data) {
        int[] rgba = mRGBA;

        FindFeatures(frameWidth, frameHeight, data, rgba);

        Bitmap bmp = mBitmap; 
        bmp.setPixels(rgba, 0, frameWidth, 0, 0, frameWidth, frameHeight);

        //samp.setValue(count++);
        return bmp;
    }

    public native void FindFeatures(int width, int height, byte yuv[], int[] rgba);
} 
```

所以，是的，希望这会有所帮助。如果我得到完整的解决方案，我也会发布。如果你先得到解决方案，也请发布你的东西！享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:13:59.433

我遇到了同样的问题，我想使用布局创建自定义视图。OpenCV 2.4.2 似乎没有提供这个功能。OpenCV 2.4.3 有这个功能，但它的教程没有这么说（它使用 OpenCV2.4.2 中的旧示例）。它的 Android 示例提供了一些见解。最后我在[OpenCV 2.4.9 文档](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#dev-with-ocv-on-android)中找到了说明。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:38:09.750

哈哈，我想出了一个办法。您可以简单地将 OpenCV 加载器和自定义布局分开。

定义 BaseLoaderCallback mOpenCVCallBack。

```
 private BaseLoaderCallback mOpenCVCallBack = new BaseLoaderCallback(this) {

    @Override
    public void onManagerConnected(int status) {
        switch (status) {
        case LoaderCallbackInterface.SUCCESS: {
            Log.i(TAG, "OpenCV loaded successfully");

            // Load native library after(!) OpenCV initialization
            System.loadLibrary("native_sample");    
        }
            break;
        default: {
            super.onManagerConnected(status);
        }
            break;
        }
    }
}; 
```

在 OnCreat 中，构建您的自定义布局，加载 OpenCv 加载器，

```
 public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "onCreate");
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    // /////////////////////////////////////////////////////////////////////
    // // begin:
    // // Create and set View
    setContentView(R.layout.main);
    mView = (Sample3View) findViewById(R.id.sample3view);

    mcameraButton = (ImageView) findViewById(R.id.cameraButton);

    if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack)) {
        Log.e(TAG, "Cannot connect to OpenCV Manager");
    }

} 
```

只是！我这样做了，而且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:47:14.840

Sry 不是一个真正的答案（还），但也尝试在 opencv 2.4.2 中进行自定义布局

如果我没记错的话，我有这个完美的 2.4.0 解决方案，添加讲师就足够了.. 但它不适用于 2.4.2

我会设法弄清楚并让你们知道。

# android - Android - ContentObserver 没有被调用

> ID：11487458
> 
> 赞同：2
> 
> 时间：2012-07-14T21:18:13.730
> 
> 标签：android, events, contacts, contentobserver

我正在尝试在更改联系人表时提取联系人。它工作正常，但现在不起作用。它只工作几次。我正在使用 ContentObserver 来获取事件。

这是注册 ContentObserver 的代码。我在服务上注册它以不断收听。

```
public void onCreate() {
    super.onCreate();
    context = this;
    db = new Database(context);
    Log.i("**********", "Started Service!");

    Contacts contacts = new Contacts(context);
     context.getContentResolver().registerContentObserver (ContactsContract.CommonDataKinds.Phone.CONTENT_URI, true, contacts);

} 
```

这是我提取联系人姓名和此内容时的代码：

```
public void onChange(boolean selfChange) {
    super.onChange(selfChange);
    Log.i("********","*****");
    db = new Database(co);
    db.open();
    if (db.Preferences(3) && new CheckConexion().isOnline(co)) {
        Cursor phones = co.getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                null, null, null);

        while (phones.moveToNext()) {
            try {
                name = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                phoneNumber = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                JSONObject jobject = db.select_contact(name, phoneNumber);

                String type1 = jobject.getString("type");

                if (type1.equals("upload")) {
                    if (!(name.equals("") && phoneNumber.equals(""))) {
                        JSONObject jobject2 = new JSONObject();
                        jobject2.put("name", name);
                        jobject2.put("phone", phoneNumber);

                        String value_json = String.valueOf(jobject2);
                        upload(value_json, co);
                        Log.i("********", "Upload on the db" + name + "  "
                                + phoneNumber);
                    }

                } else {
                    return;
                }

            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
        db.close();
    } else {
        db.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:40:35.317

Oncreate() 仅在服务第一次启动时被调用一次。如果您一次又一次地启动服务，则将直接调用 onStartCommand()。因此，我觉得它的观察者注册没有被保留并且正在丢失。

# jquery - 使用硬币滑块时出现“未捕获的类型错误”

> ID：11487464
> 
> 赞同：0
> 
> 时间：2012-07-14T21:20:01.943
> 
> 标签：jquery, slider, typeerror

完整的具体错误是

```
Uncaught TypeError: Object #coin-slider has no method ‘coinslider’ 
```

我已经非常深入地研究了这个问题，似乎其他人也受到了这个问题的困扰。

不幸的是，似乎对他们有用的解决方案对我来说失败了。大多数发生这种情况的人，像我一样，是 JQuery 的新手……所以这可能很简单，但可能会帮助像我这样的许多新手。

我的示例代码目前托管在[techbuildersgroup.com/Sirah/](http://techbuildersgroup.com/Sirah)

只要这个问题确实存在，该页面就会存在......对不起，该页面是垃圾，它确实是在 gedit 中被放在一起以使其正常工作，首先。

我看到的关于此错误的最常见答案与脚本的加载顺序有关。

我在本地开发这个，并从 Google 中提取 JQuery，所以当我使用 Chrome 中的开发人员工具检查加载顺序时，我注意到尽管在代码中请求脚本的顺序，但 JQuery 实际上是最后加载的。

因此，我构建了 JQuery 的本地副本，并确保脚本调用在页面中尽可能广泛地分开。JQuery 在头部调用，而硬币滑块脚本在主体底部调用。

这并没有解决它。

其他遇到此问题的人的滑块实例化调用搞砸了，以至于浏览器试图在页面准备好之前立即调用它。我的一直被包裹在 中`$(document).ready(function(){...});`，所以我不明白这个问题是否、为什么或如何适用于我。

同样，我是 JQuery 的新手，并且希望*能够*更深入地使用它。似乎每次我涉足时，我都会遇到一些我根本无法解释的行为。 ..

任何帮助将不胜感激。

==================================================== ======================

有人要求我发布代码而不是将其托管在异地：

头部相关代码：

```
 <link rel="stylesheet" href="css/site.css">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/coin-slider-styles.css">
  <!-- Import JQuery -->
  <script src="js/jquery.min.js"></script> 
```

实际滑块的相关代码（对于本节中的任何格式问题，抱歉……显示它需要做一些工作）：

`<div id="image_scroller">`

```
 `<div id="coin-slider">`
     `<a href="#">`
        `<img src="img/sirah_logo.png">`
        `<span>sirah logo</span>`
     `</a>`
     `<a href="#">`
        `<img src="img/sirah_logo2.png">`
        `<span>sirah logo</span>`
     `</a>`
              ....
  `</div>` 
```

`</div>`

和相关的脚本调用：

```
 <!-- Instantiate Slider -->
  <script src="js/coin-slider.min.js"></script>
  <script>
     $(document).ready(function()
     {
        $("#coin-slider".coinslider());
     });
  </script> 
```

我希望这会有所帮助，很抱歉先托管它，而不是发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:28:01.243

你放错了一个右括号。

改变这个

```
$("#coin-slider".coinslider()); 
```

到

```
$("#coin-slider").coinslider(); 
```

# database - 使用 VB.NET 更新 access 数据库中的关系表失败

> ID：11487469
> 
> 赞同：0
> 
> 时间：2012-07-14T21:21:14.127
> 
> 标签：database, vb.net, ms-access

我在 vb.net 中使用 access 作为我的数据库我使用拖放数据源方法来设置其数据集、数据网格视图、表适配器、表绑定源。

我有两个表，A 和 B A 是父表，B 是子表所以 B 中有一个外键（比如 A.id ）

当我尝试编辑 A 并保存它时。会出现错误。它告诉我B有A的相关记录，所以我不能修改或删除A

我对这意味着我没有编辑 A 中的列 ID（这是 B 中的外键）感到非常困惑，我只是编辑了其他列我不明白为什么我仍然无法保存它

当我尝试保存时：tableAdapterManager 正在使用 UpdateAll 方法来更新整个数据集，我尝试使用 A 和 B 的 tableAdapter 来更新他们各自的数据集。无论 tableAdapter 更新方法的顺序如何，结果都是一样的

真的很感谢能回答我问题的人:):)

# android - Google Play 中的下载次数

> ID：11487470
> 
> 赞同：94
> 
> 时间：2012-07-14T21:21:53.360
> 
> 标签：android, google-play

我已经在 Google Play 上发布了几个月的应用程序。我可以从开发者控制台看到它有一些下载，但下载数量没有显示在应用页面上的应用图标旁边（因为它适用于所有其他应用）。

为什么是这样？我需要配置一些我不知道的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-07-18T09:04:10.987

Google Play 商店显示（每天更新一次）下载次数和设备安装次数。您在 Google Play（在网络或他们的移动应用程序中）看到的号码仅在以下步骤中更新：

**Google Play 应用***中的下载（网络中的* 下载）

*   **1+** ( *1 - 5* )
*   **5+** ( *6 - 10* )
*   **10+** ( *11 - 50* )
*   **50+** ( *51 - 100* )
*   **100+** ( *101 - 500* )
*   **500+** ( *501 - 1000* )
*   **1000+** ( *1001 - 5000* )
*   **5000+** ( *5001 - 10000* )
*   **10000+** ( *10001 - 50000* )
*   **50000+** (50001–100000)
*   **100000+** (100001–500000)
*   **500000+** (500001–1000000)
*   **1000000+** (1000001–5000000)
*   **5000000+** (5000001–10000000)
*   **10000000+** (10000001–50000000)
*   **50000000+** (50000001–100000000)
*   **100000000+** (100000001–500000000)
*   **500000000+** (500000001–1000000000)
*   **1000000000+** (1000000001–5000000000)

因此，如果您的应用不经常下载，则需要数天或数周才能达到下一个级别。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-12-01T17:05:51.637

正如 Tano 指出的那样，下载数量只是按类别给出的。这些类别是（截至 2015 年 12 月）：

*   1 - 5
*   5 - 10
*   10 - 50
*   50 - 100
*   100 - 500
*   500 - 1.000
*   1.000 - 5.000
*   5.000 - 10.000
*   10.000 - 50.000
*   50.000 - 100.000
*   100.000 - 500.000
*   500.000 - 1.000.000
*   1.000.000 - 5.000.000
*   5.000.000 - 10.000.000
*   10.000.000 - 50.000.000
*   50.000.000 - 100.000.000
*   100.000.000 - 500.000.000
*   500.000.000 - 1.000.000.000
*   1.000.000.000 - 5.000.000.000

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-01-13T11:32:34.737

Google Play 不会立即更新“下载徽章”。要查看您的应用的唯一安装计数，请转到 Google Play 控制台 > 仪表板页面 >**获得的新用户**（从右上角的下拉菜单中选择“生命周期”，而不是过去 30 天）。此编号不应被视为下载计数徽章的唯一编号。

Google Play 根据“用户安装总数（曾在其一台或多台设备上安装此应用的唯一用户总数）”显示下载徽章。虽然我的应用获得了超过 100 K 的新用户，但 Google Play 应用页面显示了 50 K+ 的安装量。我打开了一张关于它的票，因为我没有找到关于它的确切信息。他们回答说，有助于获得新下载徽章的下载数量与“获得新用户”并不完全相同。阈值计数是 Google Play 的内部信息，在某些情况下，如果检测到欺诈性安装，安装指标可能会被打折或完全删除。

下载范围（2020）如下：K（千），M（百万），B（十亿）

*   1+
*   5+
*   10+
*   50+
*   100 +
*   500+
*   1千+
*   5千+
*   10K +
*   50K +
*   100K +
*   500 K +
*   1 百万 +
*   5 万+
*   10 万+
*   50 万+
*   100 万+
*   500 M +
*   1 乙 +
*   5 乙 +

K（千），M（百万），B（十亿）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-09-05T06:10:43.703

这可能会有所帮助

1.  选择您的应用并转到仪表板
2.  勾选“获得新用户”

或者

转到统计信息并在“配置报告”中选择以下过滤器
添加指标 -> 用户 -> 用户获取 -> 新用户

每月选择时间间隔
您将获得“新用户获取（唯一用户，每个间隔，每月）”的结果
添加它们，您将获得总下载量

根据应用程序的年龄，更新可能会延迟几天（3-4）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-25T17:19:01.910

仅当下载次数超过 50 次时，Play 商店才会在应用图标旁边显示下载次数。即使您的应用获得超过 50 次下载，下载次数最多可能需要 2 天才会出现在 Playstore 上

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-13T08:54:40.450

1.  转到您各自的应用程序“仪表板”

2.  将时间范围更改为生命周期

3.  “按用户安装”卡将显示总安装量

# forms - 将表单参数保留在 url 中？

> ID：11487472
> 
> 赞同：0
> 
> 时间：2012-07-14T21:22:26.973
> 
> 标签：forms, jsp

我有一个 jsp 页面，它以一系列形式从用户那里获取输入。首先我询问用户的身高，然后是他们的体重。我想在单独的“页面”上要求每个。但实际上我只是再次提交相同的 jsp 文件，仅使用 url 中的值来确定我应该显示哪些表单内容：

```
String height = request.getParameter("height");
String weight = request.getParameter("weight");
<form>
<%
if (height != null) {
    %>
    Weight: <input type="text" name="weight" />
    <%
} else {
    %>
    Height: <input type="text" name="height" />
    <%
}
%>
    <input type="submit" />
</form> 
```

所以第一次运行会询问他们的身高，第二次会询问他们的体重（如果它看到“身高”参数已经存在于 url 中）。那可能吗？随着每一步的进展，我似乎失去了参数，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:38:40.760

只需添加一个隐藏的输入字段，其中存储了身高，这样在第二步询问体重时就不会丢失身高值：

```
<input type="text" name="weight" />
<input type="hidden" name="height" value="<%= height %>" /> 
```

# asp.net - 如何以编程方式更改 GridView 的列宽

> ID：11487473
> 
> 赞同：0
> 
> 时间：2012-07-14T21:22:33.243
> 
> 标签：asp.net, gridview, width

我有使用对象列表以编程方式填充的 GridView。我无法访问 GridView 中的列。我喜欢以编程方式放置列宽？这是我如何填充 GridView 的代码

```
DataClassesDataContext dContext = new DataClassesDataContext();
            var userId = (Guid)(Membership.GetUser(Membership.GetUser().UserName, false).ProviderUserKey);
            var tekovenKorisnikQuery = from d in dContext.pregledIshranas
                              where d.UserId == userId
                              select new {d.datum, d.kilogrami, d.visina, d.BMI, d.kalorii};

            List<PregledIshranaFormatirano> listaFormatirana = new List<PregledIshranaFormatirano>();
            foreach (var d in tekovenKorisnikQuery)
            {
                listaFormatirana.Add(new PregledIshranaFormatirano(string.Format("{0:dd-MM-yyyy}", d.datum), d.kilogrami.ToString(), d.visina.ToString(), string.Format("{0:N2}", d.BMI), d.kalorii.ToString()));
            }

            gvTekovenKorisnik.DataSource = listaFormatirana;
            gvTekovenKorisnik.DataBind(); 
```

我使用这个事件处理程序来更改标题

```
 protected void gvTekovenKorisnik_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.Header)
        {
            e.Row.Cells[0].Width = new Unit("200px"); 
            e.Row.Cells[0].Text = "Датум";
            e.Row.Cells[1].Width = new Unit("200px");
            e.Row.Cells[1].Text = "Килограми";
            e.Row.Cells[2].Width = new Unit("200px");
            e.Row.Cells[2].Text = "Висина";
            e.Row.Cells[3].Width = new Unit("200px");
            e.Row.Cells[3].Text = "BMI индекс";
            e.Row.Cells[4].Width = new Unit("200px");
            e.Row.Cells[4].Text = "Калории"; 
```

}

这样宽度不会改变，我无法访问 gridView 列。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:31:38.127

您可以在调用 GridView DataBind() 方法后立即更改列宽。例如：gvTekovenKorisnik.Columns[0].Width = %yourvalue%;

# objective-c - 无法识别的选择器发送到构造函数上的实例

> ID：11487475
> 
> 赞同：1
> 
> 时间：2012-07-14T21:22:53.650
> 
> 标签：objective-c, ios, xcode

我的构造函数越来越出名`"unrecognized selector sent to instance"`。可能我缺少一些非常简单的东西。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Problem on the next line:

    UserFetcher* userFetcher = [[UserFetcher alloc] initWithEmail:[self email] AndPassword:[self password]]; 

    [userFetcher fetch];
} 
```

**UserFetcher.h**

```
-(id)initWithEmail:(NSString*)theEmail AndPassword:(NSString*)thePassword;

-(void)fetch; 
```

**UserFetcher.m**

```
-(id)initWithEmail:(NSString*)theEmail AndPassword:(NSString*)thePassword AndDelegate: (id<UserFetcherDelegate>)theDelegate;
{
    if ([super init])
    {
        email = theEmail;
        password = thePassword;
    }
    return self;
}

-(void) fetch {...} 
```

**错误**

```
2012-07-14 22:15:12.726 Project1[38478:c07] -[UserFetcher initWithEmail:AndPassword:]: unrecognized selector sent to instance 0x7af2ff0 
```

任何想法缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:24:21.527

你忘了那`AndDelegate: (id<UserFetcherDelegate>)theDelegate;`部分。此外，`;`从行尾删除 （在实现中）。应该是：

```
-(id)initWithEmail:(NSString*)theEmail AndPassword:(NSString*)thePassword
{
    if ([super init])
    {
        email = theEmail;
        password = thePassword;
    }
    return self;
} 
```

# jquery - AJAX/jQuery 项目查看器

> ID：11487481
> 
> 赞同：-3
> 
> 时间：2012-07-14T21:23:54.363
> 
> 标签：jquery, ajax, wordpress

最近我在带有 jQ​​uery 的 WordPress 中看到了很多很酷的作品集“AJAX 项目查看器”。例如： [http ://demo.designerthemes.com/prolio/portfolio/](http://demo.designerthemes.com/prolio/portfolio/)

[http://themetrust.com/demos/reveal/](http://themetrust.com/demos/reveal/)

我一直在谷歌上搜索几个小时来找到一些关于如何构建一个很酷的 AJAX 项目查看器的教程，但找不到。我很想在我的投资组合中实现这一点！

我知道很多这些脚本都是定制的，但是有人知道是否有一些教程吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:28:42.393

这个特定的例子使用[isotope](http://isotope.metafizzy.co/)，一个 jQuery 插件。

这里有一个教程，讨论如何进行集成[http://rollyourowncreative.com/2011/09/using-isotope-jquery-plugin-in-wordpress-a-better-way-to-implement-isotope-in -wordpress/](http://rollyourowncreative.com/2011/09/using-isotope-jquery-plugin-in-wordpress-a-better-way-to-implement-isotope-in-wordpress/)

更合适的搜索是“wordpress 中的 ajax”，并分别处理 UI（JS 行为）和检索帖子（Ajax 位）的任务。

# asp.net - 将 ASP.NET 应用程序移植到 Azure 时的文件系统问题

> ID：11487485
> 
> 赞同：0
> 
> 时间：2012-07-14T21:24:32.190
> 
> 标签：asp.net, azure, migration, log4net, azure-storage

我有一个现有的 ASP.NET 网站，我想在免费试用期间移植到 Azure。

我希望迁移尽可能轻松。该应用程序使用 log4net 和 NHibernate，此外它还需要与应该在虚拟服务器上运行的应用程序共享数据。

可以问两个问题 1

### 如何在 Web.config 中配置路径以访问共享驱动器？

我需要配置存储日志的路径**，**最重要的是，我必须指定应用程序将读取由将在我的 Azure Linux VM 上运行的守护程序写入的文件的位置。

当应用程序和守护程序都在同一台服务器上运行时（是的，我的 Mono 运行良好），我只需要选择一个共享的本地目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:36:50.550

我不确定我是否完全理解这种情况，但我会尝试为您提供一些选择。

一 - Windows Azure 网站（目前为预览版）可能是您的 ASP.NET 网站的绝佳选择。当然，这取决于您的网站有什么需求。但是，您也可以使用网站编写 log4net 文件并使用 NHibernate。

二 - Web 角色非常适合这种情况。您可能必须更改一些代码才能将 blob 存储用于持久文件存储。您可以使用 Windows Azure 驱动器来获取日志文件的持久位置。Windows Azure 驱动器没有预先确定的驱动器号，因此您需要使用 API 来实现。对于您的情况，这可能是也可能不是一个不错的选择。使用 Web 角色，您还可以将 log4net 文件写入本地存储，并使用 Windows Azure 诊断程序定期将它们传输到 blob 存储。只是另一种持久化文件的方法。

三 - 使用 Windows Azure 虚拟机（目前为预览版），您可以将日志文件写入由 blob 存储支持的数据磁盘。

In the end, if you have files you need to share across instances and/or roles, then leveraging blob storage is likely your best option.

# css - 子元素悬停时的CSS转换

> ID：11487490
> 
> 赞同：14
> 
> 时间：2012-07-14T21:25:46.203
> 
> 标签：css, parent-child, css-transitions

我试图在其父元素悬停时暂停子元素的显示。

html:

```
<span>
    <div>This Is The Child</div>
    Some Text in the span
</span> 
```

CSS：

```
span { 
    position: relative; 
}
span div { 
    display: none;
    width: 0px;
    opacity: 0;

    transition: width 5s;
    -webkit-transition: width 5s;

    transition: opacity 5s;
    -webkit-transition: opacity 5s;
}
span:hover div {
    display: inline-block;
    width: 150px;
    opacity: 1;
}​ 
```

截至目前，当跨度悬停时，div 在显示之前没有延迟。我将如何修复它以便暂停？

在这里摆弄：http: [//jsfiddle.net/SReject/vmvdK/](http://jsfiddle.net/SReject/vmvdK/)

一些注意事项：
我最初尝试转换显示，但正如 Edward 指出的那样，这是不可能的，并且已经尝试过上述方法，但也不起作用

**解决了**

看起来“过渡到”样式中的任何“显示”属性都会阻止任何过渡动画的发生。要解决这个问题。我将要显示的孩子的宽度设置为 0px 并让它完全透明。然后在“过渡到”样式中，我设置了正确的宽度，并使 div 实心：

html:

```
<span>
    <div>This Is The Child</div>
    Some Text in the span
</span> 
```

CSS：

```
span { 
    position: relative; 
}
span div { 
    position: absolute;

    width: 0px;
    opacity: 0;
    transition: opacity 5s;
    -webkit-transition: opacity 5s;
}
span:hover div {
    width: 150px;
    opacity: 1;
}​ 
```

在这里摆弄：http: [//jsfiddle.net/SReject/vmvdK/](http://jsfiddle.net/SReject/vmvdK/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T22:00:05.833

根据[这篇](http://oli.jp/2010/css-animatable-properties/)关于 CSS 过渡的文章（由[MDN 页面上的 CSS 过渡](https://developer.mozilla.org/en/CSS/CSS_transitions)引用） ，该`display`属性不是可以过渡的：

> 您需要转换几个属性或值，但在撰写本文时它们都未指定且不受支持：
> 
> *   `background-image`，包括梯度
> *   ...
> *   `display`在没有和其他任何东西之间

因此，将`transition: display 5s;`属性应用于您`div`的没有效果。

编辑：

根据您更新的代码，只要不指定`display`属性，就可以通过不透明度和宽度达到您想要的效果。只需删除该行

```
display: none; 
```

从该`span div`部分中，弹出菜单将使用您将鼠标悬停在其上时指定的过渡。

由于从`display:none;`to的过渡`display:inline-block`无法动画化，因此该属性可能仅在过渡结束时更改 - 因此 opacity 会在`div`仍然不可见时进行动画处理。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-14T22:33:06.030

你试过使用`-webkit-transition-delay: ;`吗？如果没有，这可能是您正在寻找的东西？

对代码做了一些更改：

```
span div { 
position: absolute;
left: 5px;
top: 5px;
border: 1px solid #000;
background-color: #888;
width: 0px;
opacity: 0;
cursor: pointer; 
```

}

```
span:hover div {
display: inline-block;
-webkit-transition-delay: 2s;
width: 150px;            
opacity: 1; 
```

}​</p>

这是一个[演示](http://jsfiddle.net/j6RHS/)

# javascript - 什么是 node.js 模块？

> ID：11487493
> 
> 赞同：2
> 
> 时间：2012-07-14T21:26:21.680
> 
> 标签：javascript, node.js

关于这个问题：[Node.js module.exports 的目的是什么，你如何使用它？](https://stackoverflow.com/questions/5311334/what-is-the-purpose-of-nodejs-module-exports-and-how-do-you-use-it)

我是 Javascript 初学者。在引用的问题中...

mymodule.js 代码

```
var myFunc = function() { ... };
exports.myFunc = myFunc; 
```

主js文件

```
var m = require('./mymodule.js');
m.myFunc(); 
```

mymodule 本质上是定义对象的类文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:34:06.720

Node.js 允许将代码分成不同的模块。这些模块只是可以使用`exports`对象公开函数或对象的 javascript 文件。

1.  [这个约定有更多细节](http://wiki.commonjs.org/wiki/CommonJS)
2.  [Node.js 模块的好文档](http://nodejs.org/docs/latest/api/modules.html#modules_modules)

JavaScript 中没有类，但您可以使用模式来模拟该行为。有一个关于在 JavaScript 中实现 OOP 模式的问题：[创建 javascript 类时使用什么模式？](https://stackoverflow.com/questions/5388458/what-pattern-to-use-when-creating-javascript-class)

作为初学者，有一些非常好的 JavaScript 书籍：

1.  [JavaScript：好的部分](https://rads.stackoverflow.com/amzn/click/com/0596517742)
2.  [JavaScript 模式](https://rads.stackoverflow.com/amzn/click/com/0596806752)

它们很短，可以让您很好地了解 JavaScript 语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:37:09.060

> mymodule 本质上是定义对象的类文件吗？

和函数，虽然在 Javascript 中函数*是*对象，所以区别可能没有实际意义。

重要的是，每个模块都有自己的范围，因此`var`在其中声明的任何内容都不会在模块外部可见。

您关于用户和列表的其余问题没有书面意义。Javascript OO 编程本身就是一个完整的主题，模块系统并没有真正改变这一点。模块*只是*包装代码库的一种方式。

# c# - OnServerClick 按钮不起作用

> ID：11487495
> 
> 赞同：1
> 
> 时间：2012-07-14T21:26:41.870
> 
> 标签：c#, asp.net

我有一个 html 按钮，我想要一个服务器端单击事件，但是当单击按钮并且页面执行回发时它不会触发。该按钮位于用于呈现信息表的`ItemTemplate`for an内。`<asp:ListView id="usersListView"/>`

aspx

```
<button runat="server" id="delete" class="btn btn-mini" title="Delete" OnServerClick="delete_Onclick"></button> 
```

aspx.cs

```
protected void delete_Onclick(object sender, EventArgs e) {
    ListViewItem listViewItem = (ListViewItem)((Button)sender).NamingContainer;
    if(listViewItem != null) {
        Membership.DeleteUser(((Label) listViewItem.FindControl("userName")).Text);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:53:04.767

我的猜测是它不会像这样工作，因为放置在项目模板中的嵌套控件引发的事件应该由 ListView 的`ItemCommand`事件处理。

为此，您应该设置按钮`CommandName`和`CommandArgument`处理列表视图中的特定值`ItemCommand`。

但是，如果我没记错的话，`HtmlInputButton`没有`CommandName`和`CommandArgument`属性。相反，使用`asp:Button`

```
 <asp:Button id="delete" runat="server" CommandName="something" CommandArgument="somethingelse" /> 
```

并处理列表视图的 itemcommand：

```
 protected void usersListView_ItemCommand( object sender, ListViewCommandEventArgs e )
 {
     switch ( e.CommandName ) { 
         case "something" : 
             // this is where you handle the button click
     }
 } 
```

请注意，这`CommandArgument`通常绑定到特定于项目的值（可能是 id），以便在服务器端处理程序中您可以准确地识别确切单击的按钮：

```
 <asp:Button id="delete" runat="server" CommandName="something" CommandArgument="<%# Eval( "id" ) %>" />

 protected void usersListView_ItemCommand( object sender, ListViewCommandEventArgs e )
 {
     switch ( e.CommandName ) { 
         case "something" : 
             // this is where you handle the button click
             var itemid = e.CommandArgument; 
     }
 } 
```

# linux - 使用 Perl 程序和命令行参数读取指定行

> ID：11487503
> 
> 赞同：1
> 
> 时间：2012-07-14T21:28:52.227
> 
> 标签：linux, perl

所以，假设我正在编写一个 Perl 程序：

```
./program.perl 10000 < file 
```

我希望它只读取“文件”的第 10000 行。我怎么能以这种形式使用输入重定向呢？似乎我不断得到类似 10000 的东西不是文件。

我认为这会起作用：

```
#!/usr/bin/perl -w
$line_num = 0;
while ( defined ($line = <>) && $line_num < $ARGV[0]) {
    ++$line_no;
    if ($line_no == $ARGV[0]) {
        print "$line\n";
        exit 0;
    }
} 
```

但失败得很惨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:38:44.100

如果有命令行参数，则`<>`打开所谓的文件并从中读取，如果没有，则从标准输入中获取。（请参阅[perlop 手册页中的“I/O 运算符”](http://perldoc.perl.org/perlop.html#I/O-Operators)。）

如果像您的情况一样，您想从标准输入中读取是否有命令行参数，那么您需要`<STDIN>`改用：

```
while ( defined ($line = <STDIN>) && $line_num < $ARGV[0]) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:40:05.257

你可以使用[Tie::File](http://search.cpan.org/perldoc?Tie%3a%3aFile)

```
use Tie::File;
my ($name, $num) = @ARGV;
tie my @file, 'Tie::File', $name or die $!;

print $file[$num];
untie @file; 
```

**用法：**

```
perl script.pl file.csv 10000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T22:35:05.987

强制单行：

```
perl -ne 'print if $. == 10000; exit if $. > 10000' 
```

`$.`计算从 读取的行数`stdin`。`-n`将程序隐式包装在：

```
while (<>) {
   ...program...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T14:51:11.897

您也可以使用 awk 非常简单地做到这一点：

```
awk 'NR==10000' < file 
```

或 sed：

```
sed -n '10000p' file 
```

# opencv - 使用 javacv 和 ffmpeg 或备用库创建 1080p 视频

> ID：11487504
> 
> 赞同：2
> 
> 时间：2012-07-14T21:28:56.730
> 
> 标签：opencv, ffmpeg, video-capture, video-processing, javacv

JavaCV 中是否有从图像中捕获 1080p 视频的选项？如果我使用`FFmpegFrameRecorde`，我只能找到 480p。

或者是否有 Java 的替代库？我想用它从某种图片中创建视频（具有缩放和旋转效果）

问候

//编辑

好的，现在我测试了一个非常简单的代码：

```
 FrameRecorder  recorder = FFmpegFrameRecorder.createDefault("out.avi", 1920, 1080);
    recorder.start();
    recorder.record(iplImage);
    recorder.stop(); 
```

它的作品！但是文件非常大（10sec 大约 300MB ......）

现在我想添加一个像 xvid 这样的编解码器。我得到以下 eyxception：

```
com.googlecode.javacv.FrameRecorder$Exception: codec not found 
```

但我已经安装了 xvid paket。我必须将编解码器添加到像 ffmpeg bin 这样的特殊文件夹中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:06:14.103

好的，现在我测试 mp4 编解码器，一切正常 :)

//更新

**对于 JavaCV 0.2**

```
 FrameRecorder recorder = FFmpegFrameRecorder.createDefault("out.avi", 1920, 1080);
    recorder.setCodecID(CODEC_ID_MPEG4);
    recorder.setPixelFormat(PIX_FMT_YUV420P);
    recorder.start();
            .....
    recorder.stop(); 
```

**对于 JavaCV 0.3**

```
 FrameRecorder recorder = FFmpegFrameRecorder.createDefault("out.avi", 1920, 1080);
    recorder.setVideoCodec(CODEC_ID_MPEG4);
    recorder.setFrameRate(fps);
    recorder.setFormat("avi");
    recorder.start();
            .....
    recorder.stop(); 
```

# perl - 范围对象在 Excel 中的位置

> ID：11487505
> 
> 赞同：1
> 
> 时间：2012-07-14T21:29:21.743
> 
> 标签：perl, excel, win32ole

我想弄清楚如何在 Excel(2007)-Worksheet 中获取选定范围的位置。是否有类似于`$self->{EXCEL}->ActiveCell->Row`Cells 的东西（`self->{EXCEL}`作为 Excel 对象）？

我尝试了`->Selection->Range`,`->ActiveSheet->Range`和 作为一种解决方法`->Range->Row`，`->Range->Rows`使用 Excel 和 Worksheet-Object 都没有成功。

最奇特的输出是两个单元对象，一个用于起始地址，另一个用于结束地址。

感谢您提供任何有用的提示！

=== 更新 ===

我现在成功地使用该命令`$self->{EXCEL}->Selection->Address();`来检索所选范围的地址。默认情况下，我以“A1”格式（`$E$1:$G$14`）获取地址。但是，使用`->Address("ToReferenceStyle:=xlR1C1")`不会像我预期的那样以“R1C1”格式返回地址......

命令错误？不懂Excel？再次感谢任何有用的提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:39:43.700

怎么样`->Selection->Address`？我不确定格式，但是选择（范围对象）的地址属性将为您提供范围的地址。`$A$1:$B$7`. 您可以通过在冒号上拆分字符串来解析开始和结束。

为了解决您的新问题...我什至不确定您使用的是什么，但地址方法的第三个参数是 ReferenceStyle 而不是 ToReferenceStyle。所以我会尝试`->Address(ReferenceStyle:=xlR1C1)`或者`->Address(,,xlR1C1)`

# php - PHP 使用 twitter、facebook 或 youtube 上的现有帐户创建用户注册页面

> ID：11487507
> 
> 赞同：0
> 
> 时间：2012-07-14T21:29:48.187
> 
> 标签：php, oauth, openid, social-networking, registration

我正在创建一个有点类似于 stackoverflow 的用户注册页面。为此，如果用户在 facebook、twitter、google 或 linkedin 等 3rd 方网络上已经存在任何帐户，那么我必须给他一个机会，而不是自定义注册。

我需要将他们的 3rd 方**网络 ID、电子邮件、名称**保存 在我的数据库中的用户表中。因此，如果该特定用户来提供类似的用户名并且他的身份验证成功，那么我可以让他访问使用我网站上的用户页面。（我对保存第 3 方网络社交网络的密码不感兴趣）

我有点困惑如何构建这样的系统，有人告诉我 openid 和 openauth 但我不确定哪一个可以给我正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:36:02.593

对于这个问题，您是否选择使用`openid`或`openauth`两者都将为您提供用户身份并不重要。我倾向于这样做的方式是这样的：

```
table users_openids(identity, user_id, created, last_used, ...) 
```

然后它允许您的用户附加多个身份，以防您要从其中的许多人导入数据。

要通过身份登录，您只需在主表中查找 user_id。

因此，对于现有用户，只需为他们添加一行，对于新用户，同时插入一个新用户并使用 NULL 密码，并确保在您的应用程序逻辑中正确处理它。由于您应该使用哈希，因此如果有人输入 NULL，您将永远不会匹配。

# c# - ExcelDataReader 错误的十进制数（未格式化）

> ID：11487510
> 
> 赞同：0
> 
> 时间：2012-07-14T21:30:34.527
> 
> 标签：c#, .net, excel

我一直在使用`ExcelDataReader`该方法获取一些 .xlsx 文件并将它们转换为 DataSet `AsDataSet()`。

但是，我有一个大问题。在 Excel 的一列中，我们有一个值“2061,95”（用“，”作为小数分隔符，因为我来自巴西）。

我将 .xlsx 重命名为 .zip 并提取文件，值为“2061.94899999”。

但是在我的软件中有一条规则，一个数字只能有 2 位小数，我不能使用四舍五入。

有人有想法吗？

# c++ - 运行时共享库 可以调用现有符号吗？

> ID：11487513
> 
> 赞同：1
> 
> 时间：2012-07-14T21:31:07.107
> 
> 标签：c++, symbols, dylib

我有：

*   应用**A**
*   动态库**D**
*   静态库**S**

在哪里：

*   A 在编译时与静态库 S 链接。
*   D 编译时不链接 S，但使用它的头文件
*   A 用于`dlopen`在运行时加载 D。

D 在 A 中运行时是否可以使用 S 中定义的符号，而 D 在其自己的编译时不与 S 链接？即 D 可以访问全局命名空间中的符号吗？

其他注意事项：我需要 D 和 A 都能够从 S 调用函数。理想情况下，我不想更改 S。

我已经尝试过了，我得到了（当 D 中使用 S 中的符号时）：

```
dyld: lazy symbol binding failed: Symbol not found: __Z14myFunctioni 
```

我想这可能是：

1.  共享库无法使用现有函数“myFunction(int)”（安全性？）
2.  此函数的符号名称以不同的方式命名（编辑：测试`extern "C"`并排除了这一点）。

也许我需要使用不同的设置进行编译，或者我必须始终将所有 S 链接到 D？如果 S 本身成为动态库，情况也会改变吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:05:33.307

> 使用该库的依赖项列表中的库和以前使用 RTLD_GLOBAL 标志打开的任何其他库来解析库中的外部引用。**如果可执行文件与标志“-rdynamic”**（或同义词“--export-dynamic”）链接，则可执行文件中的全局符号也将用于解析动态加载的库中的引用。

# android - 使用 OpenGL 固定管道（例如多纹理）将图像变成棕褐色

> ID：11487519
> 
> 赞同：2
> 
> 时间：2012-07-14T21:32:32.727
> 
> 标签：android, opengl-es

我正在使用 OpenGL（固定管道，我需要支持 GL1.1）试图将图像变成类似棕褐色的颜色。

到目前为止，我已经能够（有点，它最终太暗）对图像进行灰度化，但是当我尝试对其进行调制或添加另一种颜色以使其呈现棕褐色外观时，所有出现的都是恒定颜色。

到目前为止，代码是

```
float weights_vector[] = { 0.2126f, 0.7152f, 0.0722f, 1.0f };
float color_vector[] = {0.1f, 0.2f, 0.05f, 0.0f};

gl.glActiveTexture(GL11.GL_TEXTURE0); // Select texture unit 0
gl.glBindTexture(GL11.GL_TEXTURE_2D, _texturePointer); // Bind the texture
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_COMBINE); // Set to combine
if (grayscale) { // Gives better results, but can't understand yet why
    gl.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
}
else {
    gl.glBlendFunc(GL11.GL_ONE, GL11.GL_ONE_MINUS_SRC_ALPHA);
}

/* Grayscale */
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_DOT3_RGB);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB, GL11.GL_TEXTURE);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_ONE_MINUS_SRC_COLOR);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB, GL11.GL_CONSTANT);
gl.glTexEnvfv(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_COLOR, weights_vector, 0);

/* Give color */
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_ADD);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB, GL11.GL_PREVIOUS);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB, GL11.GL_CONSTANT);
gl.glTexEnvfv(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_COLOR, color_vector, 0); 
```

**编辑1：**

感谢@Tim，我终于让它工作了，他断然指出我的代码永远不会工作。我把工作代码留在这里以防万一有人需要它。

最终的代码看起来像这样，工作起来就像一个魅力，虽然在我的移动设备上有点慢，屏幕上有很多精灵。

```
gl.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);

// STAGE 0
gl.glActiveTexture(GL11.GL_TEXTURE0);
gl.glEnable(GL11.GL_TEXTURE_2D);
gl.glBindTexture(GL11.GL_TEXTURE_2D, _texturePointer);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_COMBINE);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_DOT3_RGB);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB, GL11.GL_TEXTURE);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB, GL11.GL_CONSTANT);
//gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_SRC_COLOR);
gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_ONE_MINUS_SRC_COLOR);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND1_RGB, GL11.GL_SRC_COLOR);
gl.glTexEnvfv(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_COLOR, weights_vector, 0);

// STAGE 2
gl.glActiveTexture(GL11.GL_TEXTURE1);
gl.glEnable(GL11.GL_TEXTURE_2D);
gl.glBindTexture(GL11.GL_TEXTURE_2D, 100); // Dummy texture - use any that's not your current
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_COMBINE);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_ADD);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB, GL11.GL_PREVIOUS);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB, GL11.GL_CONSTANT);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_SRC_COLOR);
gl.glTexEnvi(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND1_RGB, GL11.GL_SRC_COLOR); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:43:37.307

我认为您对状态机的工作方式有误解。

If you're expecting that code to convert the color to grayscale, and then convert the grayscale to sepia, it doesn't work that way.

The code under `Give color` isn't being appended to the end of the `Grayscale` stage, it's just overwriting all of it's settings. So you're going directly from the texture sample to the `GL_ADD` part, because you've overwritten all of the grayscale settings. You need to switch to another texture unit to setup the grayscale to sepia transform.

There's lots of examples here if you want an example:

[http://www.opengl.org/wiki/Texture_Combiners](http://www.opengl.org/wiki/Texture_Combiners)

# android - Android 应用发布和更新？

> ID：11487530
> 
> 赞同：0
> 
> 时间：2012-07-14T21:34:31.663
> 
> 标签：android, google-play, publishing

我将在几周内发布我的应用程序，但在此之前，我需要知道一些我认为可能对我很重要的事情。据我所知，发布我的应用程序的 .apk 文件的唯一方法是通过 Google Play。我对吗？如果有错误请纠正我。为了发布我的应用程序，我还需要什么？有什么关于许可证或更重要的事情我应该记住的吗？

我需要知道的第二件事是关于更新。在 Play 上发布我的应用程序后，如果我需要发布更新怎么办？为了在将来提供更新，我现在需要在我的代码中添加一些东西还是在我的开发过程的这个时刻在清单中添加一些东西？我现在应该记住哪些要点，以便稍后提供更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:58:53.677

除了 Google Play Store 之外，您还可以在其他地方发布应用程序，例如 Amazon App Store。

关于除了 APK 之外您还需要什么，您至少需要两个应用程序运行的屏幕截图、一个大版本的应用程序图标和托管在网络某处的预制隐私政策。您还*应该*包含其他可选内容，但不需要（例如置顶大图或宣传视频）。

更新要简单得多。如果您需要发布更新，只需在清单中更改`android:versionName`和增加`android:versionCode`，然后您只需将使用与原始密钥相同的密钥签名的新 APK 上传到开发者控制台中的应用列表，Google Play 将自动托管新版本并通知已安装您的应用的用户有可用更新。

大多数问题都可以通过访问此处的开发者控制台来回答：

[https://play.google.com/apps/publish/](https://play.google.com/apps/publish/)

或 Android 开发者 Google Play 指南：

[http://developer.android.com/distribute/index.html](http://developer.android.com/distribute/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:45:32.137

如果您使用了外部库，请检查它们附带的许可证，了解您需要什么。更新只是当您在发布更新时向代码添加新功能时，您会更改清单中的版本号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:39:41.890

我遇到过同样的问题。请务必在 APK 文件选项卡上激活 APK。

# php - PHP RegEx 字符串包含两个以上并用斜杠括起来的数字

> ID：11487536
> 
> 赞同：1
> 
> 时间：2012-07-14T21:35:36.313
> 
> 标签：php, regex

我的正则表达式很差，我一直在为此苦苦挣扎。我有一些 URL 包含这样的模式：

```
/1234/
/5527191/
/15974/ 
```

等等。它总是一堆字母，然后是斜线、数字（不超过 10 个数字），然后是另一个斜线。

所以我在寻找一些正则表达式，它会搜索、忽略字母并在两个斜杠之间找到一组数字。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:37:01.123

您可以将[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)（或者[`preg_match`](http://php.net/manual/en/function.preg-match.php)如果您只想要第一个匹配项）与以下正则表达式一起使用：

```
preg_match_all("#/\d{1,10}/#", $s, $matches); 
```

**解释**

*   `#`是正则表达式的[分隔符。](http://php.net/manual/en/regexp.reference.delimiters.php)
*   `/`匹配文字斜线。
*   `\d`匹配任何数字。
*   `{1,10}`匹配前一个标记 1 到 10 次。

在线查看它：[ideone](http://ideone.com/iHY3y)

如果您还想捕获不带斜杠的数字，您可以使用捕获组：

```
preg_match_all("#/(\d{1,10})/#", $s, $matches); 
```

# iphone - 移动 View 后 UIButton 框架坐标不更新

> ID：11487538
> 
> 赞同：0
> 
> 时间：2012-07-14T21:35:54.170
> 
> 标签：iphone, ios, uiview, uiscrollview, uibutton

我有一个带有一堆按钮+文本字段的滚动视图，当在一个元素中输入数据时，滚动视图滚动到下一个元素。我正在通过`frame`组件访问每个元素的位置

但是，用户可以上传图像，这会有意将*所有*这些元素移到页面下方。这完全打破了滚动到下一个元素的功能，它只是滚动到*元素曾经所在的位置*。意思`frame`是 each 的组件`UIButton`没有`UITextField`得到更新。

当我向下移动所有这些元素时，如何更新它们的坐标？我不应该使用`frame`吗？

有关更多详细信息，这些字段实际上位于 View 上，然后位于`UIScrollView`. 当我添加图像时，我通过将框架向下移动屏幕来移动字段视图。我不会移动每个按钮/字段本身。

```
- (void)scrollViewToNextElement:(CGRect)frame {
[self.scrollView scrollRectToVisible:CGRectMake(frame.origin.x,frame.origin.y, scrollView.frame.size.width, scrollView.frame.size.height) animated:YES];
} 
```

触发动作：

```
-(void)button1TextEntered{
// Now go to the next button
[self scrollViewToNextElement:button2.frame]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:05:25.017

获取滚动视图框架并将框架减少`origin.y`一些值。当您输入值并按下回车时，滚动视图`origin.y`值将向上移动。这样你就可以修复它。

# javascript - 服务器端 javascript 框架

> ID：11487539
> 
> 赞同：5
> 
> 时间：2012-07-14T21:36:01.400
> 
> 标签：javascript, server-side, javascript-framework, serverside-javascript, server-side-scripting

我正在寻找用更好的东西替换 PHP（每个人似乎都说 PHP 是邪恶的，对吗？），并考虑服务器端 JavaScript。

node.js 似乎很受欢迎，但恐怕我会因为异步的东西而发疯。是否可以在 node 下编写普通（同步）代码？

我的愿望清单：Web 和命令行脚本，良好的性能（在 [The Computer Language
Benchmarks Game](http://benchmarksgame.alioth.debian.org/u32/which-programs-are-fastest.html) 上，V8 似乎比 PHP 快一个数量级），最好由某些公司或社区开发，这样它就不会有一天被抛弃, 具有不错的模块库的用户社区。

我不考虑基于 Rhino 的各种框架，因为 Rhino 在 Java 中运行，而且我不熟悉 Java，知道它的内存占用，并且将 javascript 编译为 java 的整个想法对我来说毫无意义。

花了一些时间在谷歌上搜索，发现了许多项目：Myna、Meteor、GromJS、APE、GLUEscript、v8cgi、silkjs、wakanda、GPSEE、sorejs、ejscript、Persevere、PhantomJS。

有人对这些有任何经验吗？欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T21:45:05.230

好吧，如果您问我，Node.JS 就是要走的路。您可以编写同步代码，但只能在命令行脚本中执行。在编写 Web 服务器时，您必须走异步路由，否则它将无法执行，因为**JavaScript 是单线程**的，并且一切都停止了。

**Node.js 之所以如此之快，是因为异步 IO。**

你会习惯回调和事件，一段时间后你不想回去。

> Node.js 是一个基于 Chrome 的 JavaScript 运行时构建的平台，用于轻松构建快速、可扩展的网络应用程序。Node.js 使用事件驱动的非阻塞 I/O 模型，使其轻量且高效，非常适合跨分布式设备运行的数据密集型实时应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T01:17:49.260

[流星](http://meteor.com)。建立在 Node.js 之上并且发展[非常](http://www.meteor.com/blog/2013/03/08/meteor-devshop-1-the-shape-of-things-to-come)迅速。

> 在 Meteor 中，您的服务器代码在每个请求中运行在一个线程中，而不是以 Node.js 典型的异步回调样式。我们发现线性执行模型更适合 Meteor 应用程序中的典型服务器代码。

**更新**一年后 -[为什么流星](http://www.meteorpedia.com/read/Why_Meteor)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T21:48:44.257

你看过[服务器端 JavaScript 解决方案的比较](http://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions)吗？

**Node.js**很流行。至于 php 速度，你看过[HipHop](http://en.wikipedia.org/wiki/HipHop_for_PHP "嘻哈")吗？用 javascript 重写代码可能不会比 php 带来太多的性能提升。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-15T02:42:24.777

Nodejs 在许多方面都是非常好的选择。

但是您说您担心它的异步性质。

对此有两点。

1.  你永远不需要担心异步，并且可以继续像 PHP 一样从上到下编写你的应用程序。那是如果您没有执行“阻塞 IO”。

2.  如果您正在执行“阻塞 IO”，例如读取数据库或访问文件系统，那么您将需要处理异步。幸运的是，有一些很好的方法可以做到这一点，而无需过多地改变你的编码实践。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-27T07:40:23.490

感谢您提供您找到的“众多项目”列表。我们目前正在使用自 1996 年以来提供服务器端 JavaScript 实现的 Microsoft ASP 3.0（“经典 ASP”，与 IIS 一起提供）——它快速、成熟并且由于 COM 技术相当可扩展。如果您不固定开源，那么值得一看。对于我们的开源策略，我们将仔细研究 SilkJS。

# c# - 强制 TopShelf 服务的单个实例

> ID：11487541
> 
> 赞同：4
> 
> 时间：2012-07-14T21:36:16.917
> 
> 标签：c#, windows-services, single-instance, topshelf

我正在使用 TopShelf 来托管我的 Windows 服务。这是我的设置代码：

```
static void Main(string[] args)
{
    var host = HostFactory.New(x =>
    {
        x.Service<MyService>(s =>
        {
            s.ConstructUsing(name => new MyService());
            s.WhenStarted(tc => tc.Start());
            s.WhenStopped(tc => tc.Stop());
        });

        x.RunAsLocalSystem();
        x.SetDescription(STR_ServiceDescription);
        x.SetDisplayName(STR_ServiceDisplayName);
        x.SetServiceName(STR_ServiceName);
    });

    host.Run();
} 
```

我需要确保我的应用程序只有一个实例可以同时运行。目前，您可以将其作为 Windows 服务和任意数量的控制台应用程序同时启动。如果应用程序在启动期间检测到其他实例，它应该退出。

我真的很喜欢基于[互斥锁](http://sanity-free.org/143/csharp_dotnet_single_instance_application.html "互斥体")的方法，但不知道如何使用 TopShelf。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T19:17:19.833

这对我有用。结果非常简单——互斥代码只存在于控制台应用程序的 Main 方法中。以前我对这种方法进行了误报测试，因为我在互斥体名称中没有“全局”前缀。

```
private static Mutex mutex = new Mutex(true, @"Global\{my-guid-here}");

static void Main(string[] args)
{
    if (mutex.WaitOne(TimeSpan.Zero, true))
    {
        try
        {
            var host = HostFactory.New(x =>
            {
                x.Service<MyService>(s =>
                {
                    s.ConstructUsing(name => new MyService());
                    s.WhenStarted(tc =>
                    {
                        tc.Start();
                    });
                    s.WhenStopped(tc => tc.Stop());
                });
                x.RunAsLocalSystem();
                x.SetDescription(STR_ServiceDescription);
                x.SetDisplayName(STR_ServiceDisplayName);
                x.SetServiceName(STR_ServiceName);
            });

            host.Run();
        }
        finally
        {
            mutex.ReleaseMutex();
        }
    }
    else
    {
        // logger.Fatal("Already running MyService application detected! - Application must quit");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T09:00:20.477

一个更简单的版本：

```
static void Main(string[] args)
{
    bool isFirstInstance;
    using (new Mutex(false, "MUTEX: YOUR_MUTEX_NAME", out isFirstInstance))
    {
        if (!isFirstInstance)
        {
            Console.WriteLine("Another instance of the program is already running.");
            return;
        }

        var host = HostFactory.New(x =>
        ...
        host.Run();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:06:13.187

只需将互斥代码添加到 tc.Start() 并在 tc.Stop() 中释放 Mutex，还将互斥代码添加到控制台应用程序的 Main。

# c# - 使用 SMTP 服务器从我的程序之外的某个地方得到意外的回复

> ID：11487543
> 
> 赞同：4
> 
> 时间：2012-07-14T21:36:37.110
> 
> 标签：c#, smtp

我目前正在为我正在从事的项目创建自己的 SMTP 服务器。

除了当我输入数据时，这一切都非常有效，我得到了不是我的程序的其他东西的响应。

为了进行测试，我正在运行我的程序，该程序绑定到 IPAddress.Any 并在端口 25 上用于 smtp。然后我使用本地 PC 上的 telnet 来测试我是否发送了正确的响应。在执行此操作时，我打开了调试并单步执行代码以查看我的程序在做什么。

*   当我连接时，我发送一个`220 with my domain name`
*   当 telnet 发送时，`EHLO`我发回一个`250 with my domain name`
*   从 telnet 我发送`MAIL FROM: someone@fromaddress.com`然后我发回`250 2.1.0 OK`
*   从 telnet 我发送`RCPT TO: someone@toaddress.com`然后我发回`250 2.1.5 OK`

现在这就是奇怪的事情开始发生的地方，我从 telnet 发送`DATA`准备好接收主要电子邮件消息，在我应该发送的代码中，`354 End data with <CR><LF>.<CR><LF>`但我得到了一个响应`354 please start mail input.`

在 data visual studio 进入调试模式之前的所有步骤中，我可以逐步完成，但是在进入 DATA visual studio 时没有响应，就好像我的程序从未收到任何东西，而是转到了其他地方。

我不知道这是从哪里来的，我的 PC 上没有运行其他 SMTP 服务器。

下面是我正在使用的代码

```
private void processSmtpReceived(TcpClient client)
        {
            stream = client.GetStream();
            reader = new StreamReader(stream);
            writer = new StreamWriter(stream);
            writer.NewLine = "\r\n";
            writer.AutoFlush = true;

            //writer.WriteLine("220 localhost -- Fake proxy server");
            string line = "";
            string message = "";
            string subject = "";
            bool readingData = false;
            if (client.Connected)
            {
                writer.WriteLine("220 localhost -- Fake proxy server");

                while ((line = reader.ReadLine()) != null && reader != null)
                {
                    line = line.Replace("\b", "");
                    if (readingData)
                    {
                        message += line;
                        if (line.Contains("Subject:"))
                        {
                            subject = line;
                        }
                        else if (line == ".")
                        {
                            writer.WriteLine("250 2.0.0 OK");
                            readingData = false;
                        }
                    }
                    else if (line.Contains("EHLO"))
                    {
                        writer.WriteLine("250 OK localhost-workgroup");
                    }
                    else if (line.Contains("MAIL FROM"))
                    {
                        writer.WriteLine("250 2.1.0 OK");
                    }
                    else if (line.Contains("RCPT TO"))
                    {
                        writer.WriteLine("250 2.1.5 OK");
                    }
                    else if (line.Contains("DATA"))
                    {
                        writer.WriteLine("354 End data with <CR><LF>.<CR><LF>");
                        readingData = true;
                    }
                    else if (line == ".")
                    {
                        writer.WriteLine("250 2.0.0 OK");
                    }
                    else if (line == "QUIT")
                    {
                        writer.WriteLine("221 2.0.0 Bye");
                        Console.WriteLine("Message: " + message);
                    }
                    else
                    {
                        writer.WriteLine("250 OK");
                    }
                    Console.WriteLine("Received: {0}", line);
                }
            } 
```

正如您从代码中看到的`start mail input`那样，我的代码中没有响应，所以不知道这是从哪里来的。

感谢您的任何帮助，您可以提供

**更新** 刚刚发现了一些有点奇怪的东西。如果我在同一台机器上运行 SMTP 服务器和 telnet，即`telnet localhost 25`它可以正常工作，并且我得到 354 结尾`<CR><LF>.<CR><LF>`，但是如果我从单独的服务器 telnet，即`telnet 192.168.1.74 25`我得到`354 please start mail input`. 无论是在 Windows 还是 Linux 上都是一样的，我不知道它为什么会生成此响应，因为在代码中没有输入响应的位置，并且当我停止程序并尝试时没有运行 smtp 服务器并连接到端口 25 上的 telnet 我收到连接失败消息。

**更新 2** 作为测试，我更改了代码，而是从 telnet 输入`DATA`我输入的消息`MYTEST`，当我使用 MYTEST 时，我的程序接收到我发送的消息并且我的程序按预期工作，只有在我使用 DATA 的程序中，这是我的程序没有收到它的 SMTP 所期望的，我得到了其他东西的响应。我已经进行了网络扫描，以查看我的网络上是否有其他任何东西作为 SMTP 服务器运行，但没有找到任何东西。

**更新 3** 我还刚刚发现，通过 telnet 发送数据未被程序接收到的问题仅在 Windows 上到远程 Windows。如果我从 linux 服务器远程登录到在 Windows 上运行的 smtp 服务器，它工作正常，只有当我从 Windows 远程登录时，我才遇到 DATA 命令的问题。

**更新 4** 做了一个测试，发现它不是特定于 Windows，而是我的台式机和笔记本电脑开发机器。我已经用 Windows 7 安装了一个空白虚拟机，如果我远程登录到它自己，即 localhost，它工作正常，如果我从我的开发 PC 远程登录到虚拟机，那么我会得到意外的响应，它不会通过我的程序。我想我的笔记本电脑和台式机上一定有一些东西以某种方式监听 smtp 流量，不知道当我的程序没有运行时我无法连接到端口 25。我唯一能想到的我是否安装了 Symantec Norton 360，但我禁用了防火墙、防病毒和反垃圾邮件并且没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:50:56.047

才发现问题。我已经证明，当通过 smtp 客户端发送 DATA 时，Symantec Norton 360 似乎接受了输入。出于某种原因，即使禁用包括反垃圾邮件在内的诺顿似乎也没有什么不同。在受保护端口的反垃圾邮件设置中有一个部分，它添加了端口 25，但似乎并没有让我想要删除该端口。但是，由于我的程序允许配置 smtp 端口，如果我将其更改为不同的端口，即端口 26，那么我的程序可以正常工作。

感谢您的帮助和建议。

# ios - 体系结构 i386 链接命令退出代码 1 的未定义符号

> ID：11487545
> 
> 赞同：2
> 
> 时间：2012-07-14T21:36:47.073
> 
> 标签：ios, xcode

为模拟器构建时出现此错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_SA_OAuthTwitterEngine", referenced from:
      objc-class-ref in NetworkUpdateViewController.o
  "_OBJC_CLASS_$_SA_OAuthTwitterController", referenced from:
      objc-class-ref in NetworkUpdateViewController.o
  "_OBJC_CLASS_$_MGTwitterEngine", referenced from:
      objc-class-ref in TwitterLoginViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是为本地设备（iPad）构建时的一个：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_SA_OAuthTwitterController", referenced from:
      objc-class-ref in NetworkUpdateViewController.o
  "_OBJC_CLASS_$_SA_OAuthTwitterEngine", referenced from:
      objc-class-ref in NetworkUpdateViewController.o
  "_OBJC_CLASS_$_MGTwitterEngine", referenced from:
      objc-class-ref in TwitterLoginViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

尝试了我能想到的一切......你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:30:00.060

Clang 非常擅长将错误放入人类可读的纯文本中，只是我们有时会放眼大局而放弃。看这里：

```
"_OBJC_CLASS_$_SA_OAuthTwitterController" 
```

现在去掉标准的 _OBJC_CLASS_$ 部分，你会得到什么？ `SA_OAuthTwitterController`.

现在，第二部分：

```
... referenced from:
  objc-class-ref in NetworkUpdateViewController.o
   "_OBJC_CLASS_$_SA_OAuthTwitterEngine", referenced from:
  objc-class-ref in NetworkUpdateViewController.o
  "_OBJC_CLASS_$_MGTwitterEngine", referenced from:
  objc-class-ref in TwitterLoginViewController.o 
```

显然，您***在******名为******:***和. ***`NetworkUpdateViewController``TwitterLoginView`***

 ***现在，出现了两种可能性：要么是您没有将正确的文件添加到 Compile Sources 列表中，要么您碰巧使用了不是为 iOS Simulator（架构 i386）构建的框架（或通用的图书馆，因为它们通常被称为）。在第一种情况下，找到有问题的实现文件并将它们拖到 Compile Sources 列表中，然后构建并运行。如果是第二种情况，那么您必须在设备上进行测试，或者尝试将 lib 重新编译为可用的通用库，这比听起来更难。***

# c - 通过fifo逐行读取

> ID：11487549
> 
> 赞同：3
> 
> 时间：2012-07-14T21:37:10.437
> 
> 标签：c, linux, unix

我是 Unix 编程的绝对初学者，我必须制作一个从标准输入读取一些命令的程序，然后是另一个执行这些命令的程序。我必须使用 fifo 来建立这两个程序之间的通信。我的问题是：我怎样才能从那些行没有固定大小的fifo逐行（一个命令）读取？我正在考虑用信号实现一种同步，但是我相信有更好的方法。

如果这是一个平庸的问题，我很抱歉，但我是一个完美的新手。

哦，对不起，如果我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:19:19.713

我假设你正在阅读`read()`？只需使用`fgets()`并让 stdlib 处理缓冲。如果您使用`open()`而不是`fopen()`先获取您的 FILE 结构`fdopen()`。就像是：

```
FILE * pFile;

char mystring [100];

pFile = fopen("myfifo" , "r");

if (pFile == NULL)
{   perror ("Error opening fifo");
    exit(1);
}

while (fgets(mystring, 100, pFile) != NULL)
    puts(mystring);

fclose (pFile); 
```

# jquery - jQuery Masonry 和 Plus 滑块

> ID：11487552
> 
> 赞同：0
> 
> 时间：2012-07-14T21:37:48.373
> 
> 标签：jquery, css, jquery-masonry

似乎 jQuery Masonry 和 Plus Slider 不能一起玩，[http](http://layot.prestatrend.com/?page_id=129) ://layot.prestatrend.com/?page_id=129你看，位置不对？请问有什么帮助吗？但尝试调整窗口大小并在 Masonry 与此滑块配合良好后再次放大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:48:46.020

这成功了：

```
jQuery(window).load(function(){.... 
```

代替

```
jQuery(document).ready(function(){... 
```

# r - R：将R与Eurequa连接，Rcpp编译错误

> ID：11487554
> 
> 赞同：2
> 
> 时间：2012-07-14T21:37:59.313
> 
> 标签：r, rcpp

我正在尝试从 R 中运行 Eurequa。 [http://code.google.com/p/eureqa-api/](http://code.google.com/p/eureqa-api/) 我正在使用下面的代码，但出现编译错误：

```
Error in compileCode(f, code, language = language, verbose = verbose) : 
  Compilation ERROR, function(s)/method(s) not created! 

library(Rcpp)
library(inline) 
rcpp1 <- '

int main(int argc, char *argv[])
{

  // initialize data set and options
  eureqa::data_set data("abc1.txt");
  eureqa::search_options options("y = f(x)");

  // connect to a eureqa server
  eureqa::connection conn("127.0.0.1");
  conn.send_data_set(data);
  conn.send_options(options);
  conn.start_search();

  // display results
  eureqa::search_progress progress;
  eureqa::solution_frontier solutions;

  while (conn.query_progress(progress))
  {
    solutions.add(progress.solution_);
    std::cout << progress.summary() << std::endl;
    std::cout << solutions.to_string() << std::endl;
  }
  return 0;
}
'

rcpp2 <- cxxfunction(
                       rcpp1, plugin="Rcpp", 
                       includes=c('#include  <eureqa/eureqa.h>, <iostream>'))

rcpp2() 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:00:01.237

那么，错误是什么？

虽然您讲述`cxxfunction()`了一个头文件，但您可能仍然需要告诉编译器从哪里获取它——并且大概还必须告诉编译器（它调用链接器）要链接哪个库以及在哪里找到它。'Rcpp-FAQ' 小插图有一个关于如何判断`cxxfunction()`在哪里可以找到 GSL 头文件和库的示例。

最后，`includes=c('#include <eureqa/eureqa.h>, <iostream>'`看起来很不对劲。也许你的意思是：

```
 include=c("#include <eureqa/eureqa/eureqa.h>", "include <iostream>") 
```

反而。

# html - 如何使用 CSS 制作圆形扇区

> ID：11487557
> 
> 赞同：18
> 
> 时间：2012-07-14T21:38:26.490
> 
> 标签：html, css, css-shapes

我想使用 CSS 制作一个圆形扇区。这些扇区将形成一个完整的圆圈。如何使用 CSS 制作它？

我找到了一个[样本](http://jsfiddle.net/nchtG/)，但它是四分之一圆形扇区。我想做六个扇形来组成一个完整的圆。我怎样才能做到？

注意：我不擅长绘画，但这里有一个我想要的样本......

![以扇区划分的圆圈](../Images/f1a93fe122286470ad8a57603878a248.png)

```
div {
  width: 50px;
  height: 50px;
  background-color: #ccc;
  background-color: #ccc;
  -moz-border-radius: 100px;
  border-radius: 100px;
}
#center {
  position: relative;
  margin: 100px 0 0 100px;
  border: solid #fff 1px;
}
#tl,#tr,#bl,#br {
  position: absolute;
  height: 75px;
  width: 75px;
  z-index: -1;
}
#tl {
  border-radius: 100px 0 0 0;
  -moz-border-radius: 100px 0 0 0;
  top: -50px;
  left: -50px;
}
#tr {
  border-radius: 0 100px 0 0;
  -moz-border-radius: 0 100px 0 0;
  top: -50px;
  left: 26px;
}
#bl {
  border-radius: 0 0 0 100px;
  -moz-border-radius: 0 0 0 100px;
  top: 26px;
  left: -50px;
}
#br {
  border-radius: 0 0 100px 0;
  -moz-border-radius: 0 0 100px 0;
  top: 26px;
  left: 26px;
}
```

```
<div id="center">
  <div id="tl"></div>
  <div id="tr"></div>
  <div id="bl"></div>
  <div id="br"></div>
</div>
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T02:39:32.190

我已经完成了菜单：[**循环菜单 v6 - jsFiddle**](http://jsfiddle.net/LMPcB/1/)。

此菜单中不涉及 JavaScript。它是用纯 CSS 完成的！

**这是代码：**

```
#menu {
  background: #aaa;
  position: relative;
  width: 200px;
  height: 200px;
  margin: 0 auto;
  overflow: hidden;
  border-radius: 100px;
  -moz-border-radius: 100px;
  -webkit-border-radius: 100px;
}

#center {
  position: absolute;
  left: 70px;
  top: 70px;
  width: 60px;
  height: 60px;
  z-index: 10;
  background: #eee;
  background: linear-gradient(top, #eee, #aaa);
  background: -moz-linear-gradient(top, #eee, #aaa);
  background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#aaa));
  border-radius: 30px;
  -moz-border-radius: 30px;
  -webkit-border-radius: 30px;
}

#center a {
  display: block;
  width: 100%;
  height: 100%
}

.item {
  background: #aaa;
  overflow: hidden;
  position: absolute;
  width: 100px;
  height: 100px;
  transform-origin: 100% 100%;
  -moz-transform-origin: 100% 100%;
  -webkit-transform-origin: 100% 100%;
  transition: background .5s;
  -moz-transition: background .5s;
  -webkit-transition: background .5s;
  -o-transition: background .5s;
  -ms-transition: background .5s;
}

.item:hover {
  background: #eee
}

.item1 {
  z-index: 1;
  transform: rotate(60deg);
  -moz-transform: rotate(60deg);
  -webkit-transform: rotate(60deg);
}

.item2 {
  z-index: 2;
  transform: rotate(120deg);
  -moz-transform: rotate(120deg);
  -webkit-transform: rotate(120deg);
}

.item3 {
  z-index: 3;
  transform: rotate(180deg);
  -moz-transform: rotate(180deg);
  -webkit-transform: rotate(180deg);
}

.item4 {
  z-index: 4;
  transform: rotate(240deg);
  -moz-transform: rotate(240deg);
  -webkit-transform: rotate(240deg);
}

.item5 {
  z-index: 5;
  transform: rotate(300deg);
  -moz-transform: rotate(300deg);
  -webkit-transform: rotate(300deg);
}

.item6 {
  border: none;
  position: absolute;
  z-index: 6;
  transform: rotate(-30deg);
  -moz-transform: rotate(-30deg);
  -webkit-transform: rotate(-30deg);
}

#wrapper6 {
  position: absolute;
  width: 100px;
  height: 100px;
  overflow: hidden;
  transform-origin: 100% 100%;
  -moz-transform-origin: 100% 100%;
  -webkit-transform-origin: 100% 100%;
}

.item1 .content {
  left: -10px;
  top: 15px;
  transform: rotate(-60deg);
  -moz-transform: rotate(-60deg);
  -webkit-transform: rotate(-60deg);
}

.item2 .content {
  left: -11px;
  top: 16px;
  transform: rotate(-120deg);
  -moz-transform: rotate(-120deg);
  -webkit-transform: rotate(-120deg);
}

.item3 .content {
  left: -7px;
  top: 12px;
  transform: rotate(-180deg);
  -moz-transform: rotate(-180deg);
  -webkit-transform: rotate(-180deg);
}

.item4 .content {
  left: -5px;
  top: 18px;
  transform: rotate(-240deg);
  -moz-transform: rotate(-240deg);
  -webkit-transform: rotate(-240deg);
}

.item5 .content {
  left: -10px;
  top: 20px;
  transform: rotate(-300deg);
  -moz-transform: rotate(-300deg);
  -webkit-transform: rotate(-300deg);
}

.item6 .content {
  left: 20px;
  top: -10px;
  transform: rotate(30deg);
  -moz-transform: rotate(30deg);
  -webkit-transform: rotate(30deg);
}

.content,
.content a {
  width: 100%;
  height: 100%;
  text-align: center
}

.content {
  position: absolute;
}

.content a {
  line-height: 100px;
  display: block;
  position: absolute;
  text-decoration: none;
  font-family: 'Segoe UI', Arial, Verdana, sans-serif;
  font-size: 20px;
  text-shadow: 1px 1px #eee;
  text-shadow: 0 0 5px #fff, 0 0 5px #fff, 0 0 5px #fff
}

.display-target {
  display: none;
  text-align: center;
  opacity: 0;
}

.display-target:target {
  display: block;
  opacity: 1;
  animation: fade-in 1s;
  -moz-animation: fade-in 1s;
  -webkit-animation: fade-in 1s;
  -o-animation: fade-in 1s;
  -ms-animation: fade-in 1s;
}

@keyframes fade-in {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}

@-moz-keyframes fade-in {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}

@-webkit-keyframes fade-in {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}

@-o-keyframes fade-in {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}

@-ms-keyframes fade-in {
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }
}
```

```
<div id="menu">
  <div class="item1 item">
    <div class="content"><a href="#one">one</a></div>
  </div>
  <div class="item2 item">
    <div class="content"><a href="#two">two</a></div>
  </div>
  <div class="item3 item">
    <div class="content"><a href="#three">three</a></div>
  </div>
  <div class="item4 item">
    <div class="content"><a href="#four">four</a></div>
  </div>
  <div class="item5 item">
    <div class="content"><a href="#five">five</a></div>
  </div>
  <div id="wrapper6">
    <div class="item6 item">
      <div class="content"><a href="#six">six</a></div>
    </div>
  </div>
  <div id="center">
    <a href="#"></a>
  </div>
</div>
<div id="one" class="display-target">Welcome!
  <br />This changing effect is done by ...</div>
<div id="two" class="display-target">... having <code>&lt;div&gt;</code>s with <code>id</code>s ... </div>
<div id="three" class="display-target">... that have the style <code>display: none</code> and the style
  <pre style="text-align: left">:target {
    display: block;
}</pre>so that these messages appear when there is a hash tag like <code>#three</code> (look at the address bar!)</div>
<div id="four" class="display-target">Look at the source of this page ...</div>
<div id="five" class="display-target">... to see how the circular menu works.</div>
<div id="six" class="display-target">By Shaquin Trifonoff</div>
<p><a href="http://stackoverflow.com/users/1421049/shaquin-trifonoff" title="My profile on Stack Overflow">By Shaquin Trifonoff</a></p>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-14T13:03:11.557

## 简单的圆圈分隔成 6 个扇区

在伪元素上使用边框来制作三角形：

**[演示](http://jsfiddle.net/webtiki/hX7nZ/)**

输出：

![CSS 圆圈分为 6 个扇区](../Images/a71372d918a6ff4890816185b2dd814d.png)

```
.circle {
  position: relative;
  display: inline-block;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  overflow: hidden;
}

.circle:before,
.circle:after,
.circle > div:before,
.circle > div:after {
  content: '';
  position: absolute;
  z-index: -1;
}

.circle:before {
  bottom: 50%;
  left: 50%;
  margin-left: 2px;
  margin-bottom: 2px;
  border-top: 300px solid transparent;
  border-right: 150px solid gold;
}

.circle:after {
  top: 50%;
  left: 50%;
  margin-left: 2px;
  margin-top: 2px;
  border-right: 150px solid gold;
  border-bottom: 300px solid transparent;
}

.sector1:before {
  bottom: 50%;
  right: 50%;
  margin-right: 2px;
  margin-bottom: 2px;
  border-top: 300px solid transparent;
  border-left: 150px solid gold;
}

.sector1:after {
  bottom: 50%;
  margin-bottom: 5px;
  border-top: 300px solid gold;
  border-right: 150px solid transparent;
  border-left: 150px solid transparent;
}

.sector2:before {
  top: 50%;
  right: 50%;
  margin-right: 2px;
  margin-top: 2px;
  border-bottom: 300px solid transparent;
  border-left: 150px solid gold;
}

.sector2:after {
  top: 50%;
  margin-top: 5px;
  border-right: 150px solid transparent;
  border-bottom: 300px solid gold;
  border-left: 150px solid transparent;
}

.round-middle {
  position: absolute;
  top: 96px;
  left: 96px;
  width: 100px;
  height: 100px;
  border: 4px solid #fff;
  border-radius: 50%;
  background: gold;
}
```

```
<div class="circle">
  <div class="sector1"></div>
  <div class="sector2"></div>
  <div class="round-middle"></div>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T05:45:59.257

可以使用`-moz-transform`，试试这个**[小提琴](http://jsfiddle.net/raymondralibi/nchtG/751/)**。实际上，我们不需要`.sec1.sec_`。`.sec4.sec_`然后`.sec5.sec_`是`.sec6`

```
#container {
  margin: 50px 0 0 50px;
  position: relative;
}

#center {
  position: absolute;
  width: 50px;
  height: 50px;
  background-color: #ccc;
  -moz-border-radius: 100px;
  border-radius: 100px;
  position: relative;
  margin: 50px 0 0 0px;
  border: solid #fff 1px;
  z-index: 1000;
}

.outer_sec {
  width: 75px;
  height: 75px;
  overflow: hidden;
  position: absolute;
  left: -50px;
  top: 25px;
}

.sec {
  position: absolute;
  height: 75px;
  width: 75px;
  z-index: 1;
  border-radius: 100px 0 0 0;
  -moz-border-radius: 100px 0 0 0;
  top: -50px;
  left: -50px;
  -moz-transform-origin: 100% 100%;
  cursor: pointer;
}

.sec1.sec {
  -moz-transform: rotate(0deg);
  z-index: 1;
  background-color: #cc1;
}

.sec2.sec {
  -moz-transform: rotate(60deg);
  z-index: 2;
  background-color: #cb2;
}

.sec3.sec {
  -moz-transform: rotate(120deg);
  z-index: 3;
  background-color: #ca3;
}

.sec4.sec {
  -moz-transform: rotate(180deg);
  z-index: 4;
  background-color: #c94;
}

.sec5.sec {
  -moz-transform: rotate(240deg);
  z-index: 5;
  background-color: #c85;
}

.sec6.sec {
  -moz-transform: rotate(300deg);
  z-index: 6;
  margin: 0px 0px 0px 50px;
  background-color: #c76;
  top: -74px;
}

.sec:hover {
  background-color: #06c;
}
```

```
<div id="container">
  <div class="sec1 sec"></div>
  <div class="sec2 sec"></div>
  <div class="sec3 sec"></div>
  <div class="sec4 sec"></div>
  <div class="sec5 sec"></div>
  <div class="outer_sec">
    <div class="sec6 sec"></div>
  </div>
  <div id="center"></div>
</div>
```

# python - 尝试从 FTP 服务器下载 .zip 时出现 TypeError

> ID：11487564
> 
> 赞同：2
> 
> 时间：2012-07-14T21:39:20.143
> 
> 标签：python, ftp, download, ftplib

我正在尝试从 FTP 服务器下载 .zip 文件，但我不断收到此错误：

```
File "C:/filename.py", line 37, in handleDownload
file.write(block)
TypeError: descriptor 'write' requires a 'file' object but received a 'str' 
```

这是我的代码（借自[http://postneo.com/stories/2003/01/01/beyondTheBasicPythonFtplibExample.html](http://postneo.com/stories/2003/01/01/beyondTheBasicPythonFtplibExample.html)）：

```
def handleDownload(block):
    file.write(block)
    print ".",

ftp = FTP('ftp.godaddy.com') # connect to host
ftp.login("auctions") # login to the auctions directory
print ftp.retrlines("LIST")
filename = 'auction_end_tomorrow.xml.zip'
file = open(filename, 'wb')
ftp.retrbinary('RETR ' + filename, handleDownload)
file.close()
ftp.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:08:47.030

我自己无法重现这一点，但我知道发生了什么——我只是不确定它是*如何*发生的。希望有人可以插话。请注意，`file`它不会传递给 handleDownload，`file`它也是内置类型的名称。如果`file`保留为内置，那么你会得到这个错误：

```
>>> file
<type 'file'>
>>> file.write("3")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor 'write' requires a 'file' object but received a 'str' 
```

所以我认为一些问题是`file`内置的和`file`打开的文件本身之间的混淆。（可能`"file"`在这里使用其他名称不是一个好主意。）无论如何，如果您只是使用

```
ftp.retrbinary('RETR ' + filename, file.write) 
```

并完全忽略该`handleDownload`功能，它应该可以工作。或者，如果你想保持每个块都打印点，你可以更花哨一点，写下类似的东西

```
def handleDownloadMaker(openfile):
    def handleDownload(block):
        openfile.write(block)
        print ".",
    return handleDownload 
```

这是一个*返回*指向正确文件的函数的函数。之后，

```
ftp.retrbinary('RETR' + filename, handleDownloadMaker(file)) 
```

也应该工作。

# python - 模型中的元素未定义

> ID：11487565
> 
> 赞同：0
> 
> 时间：2012-07-14T21:39:24.113
> 
> 标签：python, django

我正在使用 django，构建一个 Web 应用程序。我的大部分东西都在工作。一般结构是我有一个用户绑定到一个元素列表。当我点击这些元素时，我得到一个 404 page not found 错误。

继承人一些`models.py`：

```
class Event(models.Model):
    #user that created the event

    #event title
    title = models.CharField(max_length=200)

    #time created
    created = models.DateField('Date Created',auto_now_add=True)

    #description of event from user
    description = models.CharField(max_length=400)

    #address of event if existant
    address = models.CharField(max_length=50)

class User(models.Model):

    attending = models.ManyToManyField('Event', related_name='User_attending')
    hosting = models.ForeignKey('Event', related_name='User_hosting')

    gender = models.IntegerField(max_length=1)
    password = models.CharField(max_length=100)
    email = models.CharField(max_length=100)
    age = models.IntegerField()
    fName = models.CharField(max_length=25)
    lName = models.CharField(max_length=25)
    id = models.AutoField(primary_key=True) 
```

从`views.py`，当我尝试访问附加到我的“事件”对象的 html 页面时，我收到 404 错误，因为我的代码无法识别“事件”。

```
from list.models import *

def event(request, id):
     #e = Event()
     #code.interact(local = locals())
     try:
         e = Event.objects.get(User_hosting=id)
     except Event.DoesNotExist:
         raise Http404
     if e.user_id != request.user.id:
         raise Http404
     #code.interact(local = locals())
     return render_to_response('event/event.html', {'event':e}) 
```

当我使用外壳时，`e = Event.objects.get(User_hosting=id)`它说“未定义事件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:42:19.467

您必须导入要在 shell 中使用的任何模块或类。试试这个（`appname`你的应用程序的名称在哪里。

```
from appname.models import Event 
```

# objective-c - 从类中访问实例变量

> ID：11487566
> 
> 赞同：0
> 
> 时间：2012-07-14T21:39:28.700
> 
> 标签：objective-c, class, instance-variables

我创建了一个具有静态 NSMutableArray 的类，我希望在覆盖期间用该类的每个实例填充该数组，`init`因此我不必做任何比我需要的更多的编码。

**我应该指出该数组完美地工作，我只是无法存储正确的数据。**

这有意义吗？如果是这样，我该怎么做？

虽然我试过这样做

```
_instance = self;

[[MyClass getStack] addObject:_instance]; 
```

似乎我无法访问该属性的实例，并且登录后我得到的只是：

```
2012-07-14 22:37:58.223 Application[4497:1bb03] <MyClass: 0x92cfc70> 
```

**编辑更多代码：**

我的 .h 文件：

```
@interface MyClass : NSObject

+ (NSMutableArray *)getStack; 
```

我的 .m 文件：

```
@interface MyClass ()

@end

static NSMutableArray *stack;

@implementation MyClass 
```

**使用崩溃图像编辑**

记录数组属性时`NSLog(@"%@", [[[MyClass stack] objectAtIndex:0] adam]);`，它在该行崩溃并给我以下错误。

![崩溃错误](../Images/5adff41fa6b82eaa4781fb44cd119ea5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:59:14.023

凯文格兰特的回答很好，但有一个问题。NSArray 保留它包含的对象。因此，当您向数组添加实例时，对象实际上不会被释放，因为数组将保持对它的强引用。当然，通常 NSArray 保留它的孩子是有意义的，这样它就不会持有一个不再有效的指针，指向从它下面释放出来的对象。在这种情况下，您要在对象被释放之前手动将其从数组中删除，实际上您希望阻止数组保留它包含的对象。

一种方法是将每个实例包装在一个 NSValue 中。NSValue 有一个名为 的方法`-valueWithNonretainedObject:`，它听起来像。它创建一个包含一个对象但不保留该对象的 NSValue 实例。现在，当您将 NSValue 实例添加到数组时，数组会保留 NSValue 实例，而不是包含的对象，并且不会阻止实例被释放。这是代码中的示例：

```
static NSMutableArray *instanceArray = nil;

@implementation MyClass

+ (void)addInstance:(MyClass *)instance
{
    if (!instanceArray) instanceArray = [[NSMutableArray alloc] init];
    NSValue *value = [NSValue valueWithNonretainedObject:instance];
    [instanceArray addObject:value];
}

+ (void)removeInstance:(MyClass *)instance
{
    NSValue *valueToRemove = nil;
    for (NSValue *value in instanceArray) 
    {
        if ([value nonretainedObjectValue] == instance) 
        {
            valueToRemove = value;
            break;
        }
    }
    if (valueToRemove != nil) [instanceArray removeObject:valueToRemove];
}

- (id)init
{
    self = [super init];
    if (self != nil)
    {
        [[self class] addInstance:self];
    }
 }

 - (void)dealloc
 {
      [[self class] removeInstance:self];
      [super dealloc];
 }

 @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:42:58.220

编辑：正如已经正确指出的那样，Objective-C 容器存在过度保留问题。此外，不能保证有可用的自动释放池，因此必须明确分配。

解决这些问题的一种方法是使用根本不保留的容器，例如动态重新分配的数组或（如果是 Objective-C++）`std::set< YourClass* >`包含指向当前实例的指针的容器。

给定这样一个“安全”容器，基本思想保持不变：普通初始化程序添加到容器，例如`myGlobal.insert(self);`，而`dealloc`方法删除它，例如`myGlobal.erase(self);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T09:21:12.463

`init`将其中的每个实例添加到全局数组中很容易：

```
static NSMutableArray *stack = nil;

@implementation MyClass
+ (void)initialize {
    if (stack == nil)
        stack = [[NSMutableArray alloc] init];
}

+ (id)init {
    self = [super init];
    if (self) {
        [stack addObject:self];
    }
    return self;
}
@end 
```

你的问题一定来自别的东西。要么你没有保留全局数组。或者您没有正确存储您的“财产”（例如，您没有保留它）。或者其他的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:06:50.880

事实证明，问题出在我创建的实例属性的名称上，例如，我为“size”创建了一个 int，为“layer”创建了一个 CALayer，但这些都被标准属性覆盖了。为了克服它，我只是将类名添加为每个属性的前缀。此外，由于格式为 %@ 而不是 %i，日志在上面崩溃了。感谢大家的帮助！

# php - 如何将 CSV 行连接成新行？

> ID：11487567
> 
> 赞同：0
> 
> 时间：2012-07-14T21:39:32.277
> 
> 标签：php, csv

考虑以下 data.csv：

```
 "1", "2", "3", "4"
 "5", "6", "7", "8"
 "9","10","11","12"
"13","14","15","16"
"17","18","19","20"
"21","22","23","24"
"25","26","27","28"
"29","30","31","32"
"33","34","35","36" 
```

实际上，行和列要长得多，但原理保持不变。

我需要一种方法来读取 csv 文件，删除引号并将每 3 个连续行相互连接以格式化以下输出：

```
1,2,3,4,5,6,7,8,9,10,11,12
13,14,15,16,17,18,19,20,21,22,23,24
25,26,27,28,29,30,31,32,33,34,35,36 
```

我现在有：

```
$path = "data.csv";
$row = 0;
$newrow = 0;
$newrows = array();
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $newrows[$newrow] = implode("," $data);
    if ($row % 3) $newrow++;
    $row++;
  }
  fclose($handle);
} 
```

我想要做的是创建一个数组“newrows”（见下文），其中数据被添加到当前的新行，而 $row 不能被 3 分开

```
$newrows = array (
  [0] = "1,2,3,4,5,6,7,8,9,10,11,12",
  [1] = "13,14,15,16,17,18,19,20,21,22,23,24",
  [2] = "25,26,27,28,29,30,31,32,33,34,35,36"
) 
```

我的代码显然不起作用，但我对如何继续感到困惑。你知道吗？任何帮助是极大的赞赏 ：-）

`edit`我好像犯了一个错误。输出不应该是“连接每组 3 行”，而是“连接每第三行”，所以：

*   每第三行连接到前第三行
*   第 4 行 (1 + 3) 和 7 (1 + 3 + 3) 连接到第 1 行
*   第 5 行 (2 + 3) 和 8 (2 + 3 + 3) 连接到第 2 行
*   第 6 行 (3 + 3) 和 9 (3 + 3 + 3) 连接到第 3 行

然后输出将是一个数组：

```
array (
  [0] => 1,2,3,4,13,14,15,16,25,26,27,28
  [1] => 5,6,7,8,17,18,19,20,29,30,31,32
  [2] => 9,10,11,12,21,22,23,24,33,34,35,36
) 
```

我试过这个，但它连接不正确：

```
$path = "data.csv";
$row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    for ($i = 1; $i <= 3; $i++) {
      if ($row % $i == 0) $newrows[$i] .= implode(",", $data);
    }
    $row++;
  }
}

print_r($newrows);

Array (
  [1] => 1,2,3,45,6,7,89,10,11,1213,14,15,1617,18,19,2021,22,23,2425,26,27,2829,30,31,3233,34,35,36
  [2] => 5,6,7,813,14,15,1621,22,23,2429,30,31,32
  [3] => 9,10,11,1221,22,23,2433,34,35,36
) 
```

PS实际上，csv要大得多，我需要将每147行连接到前147行，但我猜原理是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:51:15.323

您的 while 循环需要一些工作：

```
$newrow = 0; $row = 1;
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    if( !isset( $newrows[$newrow])) $newrows[$newrow] = '';
    $newrows[$newrow] .= implode(",", $data);
    if ($row % 3 == 0) {
        $newrow++;
    } else {
        $newrows[$newrow] .= ', ';
    }
    $row++;
} 
```

显着变化：

*   `$row`现在从 1 开始，因此前三个迭代将映射到同一个条目。
*   `$newrows[$newrow] = '';`已正确初始化。
*   `$row % 3`与 进行比较`== 0`，这确定我们是否正确地位于每三行的末尾。
*   `$newrows[$newrow]`设置为`.= implode(",", $data);`，它将不断地将行连接在一起。否则，只有最后一次迭代会保留在您的原始代码中。

# c++ - C++ 打印到终端会显着减慢代码速度吗？

> ID：11487568
> 
> 赞同：14
> 
> 时间：2012-07-14T21:39:34.567
> 
> 标签：c++, performance, printing, terminal

我有一个代码，我目前在其中向终端打印了很多诊断消息。有人知道这会减慢我的代码多少吗？通过将输出管道传输到文件，我是否会大大提高速度，例如，而不是运行：

```
./my_program 
```

我跑

```
./my_program > output.log 
```

另外，我会通过用 ofstream 替换 cout 并直接写入文件来进一步提高速度吗？

编辑：假设我正在写入 /dev/shm，磁盘访问速度并不是真正的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T18:11:12.183

是的，渲染到屏幕比写入文件需要更长的时间。
在 Windows 中，它甚至更慢，因为程序渲染不是正在运行的程序，因此进程之间不断发送消息来绘制它。
我猜它在 linux 中是一样的，因为虚拟终端与正在运行的进程不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T22:58:07.260

当然可以。打印到终端涉及渲染和其他事情（非平凡的），并且通常缓冲少得多。操作系统和流实现可以通过文件 I/O 做更多的缓冲和缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T18:17:50.357

您获得多少速度将取决于几个因素。例如，Windows 控制台的速度非常慢。`ofstream` *可能*比 快一点`cout`，这取决于你的 libc++ 实现（不同的缓冲区大小，线程同步，......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T22:47:34.303

如果不测量特定系统，这很难说，但我怀疑写入文件实际上会比写入显示器更快（文件不必滚动等）。

根据您的操作系统、系统和库，如果它使用不同的缓冲方案，`ofstream`直接写入*可以*`cout`进一步提高性能，但它可能没有任何效果。确定的唯一方法是分析您的代码（正如评论中已经建议的那样）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T17:51:03.237

这实际上取决于您要打印多少。

如果您的程序每秒打印 50 行或更多行，那么我敢打赌输出开始变得重要。

输出到文件肯定比打印到终端快得多，尽管不同的终端程序的速度会有很大差异，具体取决于它们正在执行的渲染量以及它们用于渲染 api 的内容。

我非常怀疑 cout 与 ofstream 的终端打印性能甚至输出到文件的性能是否存在任何显着的性能差异。如果您使用 fwrite 编写日志行，可能会有非常小的性能提升。最终，像 cout 这样的东西会调用 fwrite，所以你可以通过自己调用到最低级别来获得一个小的改进。

最后 - 像 cout 这样的输出流比像 cerr 这样的错误流更快。Cout 会比 cerr 做更多的缓冲，性能会明显更快。但看起来你已经在使用 cout 了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T17:55:31.883

一般来说，是的。如果您不必写入终端，则可以使用文件。如果不需要查看输出，您也可以使用 /dev/null。（例如，测量实际速度......）

# svn - svn diff 与 DirDiff

> ID：11487572
> 
> 赞同：0
> 
> 时间：2012-07-14T21:39:50.013
> 
> 标签：svn, vim

我曾将[DirDiff](http://www.vim.org/scripts/script.php?script_id=102)与 Mercurial 一起使用。我现在在我工作的新公司使用 svn。我设法让 vimdiff 使用[它](https://github.com/c4rlo/Subversion-scripts/blob/master/svndiff_helper)来工作。但是，它为每个文件打开了一个单独的 vimdiff，我必须依次查看这些差异。我很高兴能够使用 DirDiff 查看整个差异集。有人让 dirdiff 使用 svn 吗？如果是这样，请提高我的生活质量并分享如何。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:10:19.423

我不知道整套 dirdiff 选项的替换，但你可以试试我的支持颠覆的[aurum插件。](https://bitbucket.org/ZyX_I/aurum)它可以执行以下操作：

*   使用“<a href="http://vimpluginloader.sourceforge.net/doc/aurum.txt.html#:AuVimDiff" rel="nofollow noreferrer">AuVimDiff full” 来获取当前工作目录和在一个打开的 BASE 之间的 vimdiffs选项卡的数量。默认情况下只打开修改过的文件，但您也可以打开添加和删除的文件（在这种情况下，这些选项卡中的一个窗口将为空）。AuVimDiff 不需要任何临时目录，尽管在许多地方都使用了临时文件（因为`system()`不能用于可靠地获取任意数据）。

*   使用[AuRecord](http://vimpluginloader.sourceforge.net/doc/aurum.txt.html#:AuRecord)选择您要提交的更改。它与 mercurial 的“hg 记录”不同：相反，您会在拆分后打开一个状态窗口。当您在状态窗口中按 A 时，对文件的更改被~~包含~~标记为包含，当 R 它们被删除时，当您在上面的拆分中打开它们时：在左侧未更改（或先前编辑）版本并在右侧更改。左版本将被提交，但不要忘记做`:w`.

    虽然界面与 hg 记录不同，但 AuRecord 使用相同的方法来提交部分更改：原始文件移动到 {path}.orig 并在完成后恢复。它适用于任何具有“vcs cat”、“vcs status”和“vcs commit”或其等价物的 VCS（目前所有三个受支持的 VCS 都有这些）。

随意在[问题跟踪器](https://bitbucket.org/ZyX_I/aurum/issues)上提交错误报告，我没有将颠覆驱动程序用于实际工作，仅用于测试。

# cakephp-2.0 - CakePhp 2.0 使用 Pagination / Paginator 对关联模型进行排序

> ID：11487573
> 
> 赞同：2
> 
> 时间：2012-07-14T21:39:57.313
> 
> 标签：cakephp-2.0

我意识到这个问题几乎遍布 StackOverflow，但似乎没有一个答案对我有用。

我的问题很简单。我只想列出按城市名称排序的公司：

```
class Company extends AppModel
 public $recursive = 2;

 public $belongsTo = array(
 'City' => array(
  'className'    => 'City',
   'foreignKey'   => 'city_id'
  )
 );

class City extends AppModel {
 public $useTable = 'cities';

 public $belongsTo = 'Country';
 public $hasMany = array(
  'Company' => array(
    'className'    => 'Company',
    'foreignKey'   => 'city_id'
 )
); 
```

在公司页面上，因此在公司控制器中，我想做这样的事情：

```
$this->paginate = array(
 'order' => array('Company.City.name' => 'ASC' ),
 // or is it 'order' => array('Company->City.name' => 'ASC' ), ??
);
$companies = $this->paginate('Company'); 
```

在视图中，有一个链接可以将排序更改为按城市名称：

```
<?php echo $this->Html->link(__('Sort by City name'), array('controller' => 'companies', 'action' => 'index', '?' => array('sort' => 'Company.City.name'))); ?> 
```

当我创建一个链接以将排序更改为公司模型中的一个字段时，比如（公司的）名称，我创建这样的链接：

```
<?php echo $this->Html->link(__('Sort by Company name'), array('controller' => 'companies', 'action' => 'index', '?' => array('sort' => 'Company.name'))); ?> 
```

...它工作正常。并且所有的分页链接，比如第一个、下一个、数字等，也可以工作，并创建如下链接：

localhost/companies/20/sort:Company.name/page:2

那么，我到底如何才能为 Company.City.name 做到这一点（当我在它的时候，Company.City.Country.name！）目前它似乎忽略了我的“排序”参数。如果我打开调试，当我尝试按 Company.City.name 排序时，生成的 SQL 查询没有“order by”子句。

这让我发疯了，这似乎是一件很简单的事情。非常感谢您的帮助！

**更新：**嘿！那行得通！或者至少，我已经成功了一半！我能够在我的控制器中使用您的建议：

```
$this->paginate = array(
  'limit' => 10,
  'order' => array('City.name' => 'ASC' )
); 
```

它有效！现在我正在尝试为 Country 做同样的事情，但它不起作用。我试过了：

```
$this->paginate = array(
      'limit' => 10,
      'order' => array('City.Country.name' => 'ASC' )
    );

$this->paginate = array(
      'limit' => 10,
      'order' => array('City->Country.name' => 'ASC' )
    ); 
```

而且没有爱。它忽略了我的“订单”参数。关于如何做到这一点的任何想法？

再次感谢您的有用回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:21:00.840

如果定义了模型关联船，则不需要使用 Company.City.name 等，直接使用 City.name 即可。

如果您要显示一个列表，那么您可以使用以下代码，而不是提供您想要对表格数据进行排序的链接。

```
<?php echo $this->Paginator->sort('City.name', 'City Name');?> 
```

请询问它是否不适合您。

# c# - Listview/DataGrid 返回 {collection}

> ID：11487575
> 
> 赞同：0
> 
> 时间：2012-07-14T21:40:25.300
> 
> 标签：c#, wpf, wpfdatagrid

在我的一个专栏中，我有一个想要在 ListView 或数据网格中显示的列表。

该类看起来像：

```
class Cab
{
    public Cab()
    {
        Stations = new List<string>();
    }

    public string Medication { get; set; }
    public List<string> Stations { get; set; }
} 
```

结果如下：

![在此处输入图像描述](../Images/dc9246f789838669ac604f176b4edfdb.png)

我尝试了几种不同的方法，但我不知道要查找什么搜索词。我想做的是将工作站格式化为如下所示的内容：ER、ICU、Foo、Bar 旁边的每个 med。

```
<ListView x:Name="myCab">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Medication" DisplayMemberBinding="{Binding Medication}" />
            <GridViewColumn Width="140" Header="Stations" DisplayMemberBinding="{Binding Stations}">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="140" Header="Column 3" />
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:37:36.140

您可以将您的课程更改为

```
class Cab
{
    public Cab()
    {
        Stations = new List<string>();
    }

    public string Medication { get; set; }
    public List<string> Stations { get; set; }

    public string StationsToString
    {
        set {}
        get { return string.Join(",", this.Stations.ToArray()); }
    }
} 
```

然后你设置`StationsToString`为绑定列表的属性。

希望这可以帮助。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:57:06.700

我会使用[ValueConverter](http://www.codeproject.com/Articles/38773/WPF-Introduction-Databinding-Styles-IValueConverte)

基本上第一步是创建`ListToStringConverter`实现的类`IValueConverter`：

```
using System.Windows.Data;
using System.Collections; 

namespace myNameSpace
{
   public class ListToStringConverter : IValueConverter
   {
      public object Convert(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture) 
      {
         string returnValue = string.Empty; 
         List<string> targetList = value as List<string>; 

         foreach(string s in targetList)
         {
           if(!returnValue == string.Empty)
              returnValue += ", " + s; 
           else 
              returnValue += s; 
         }

         return returnValue; 
      }     

        public object ConvertBack(object value, Type targetType, 
    object parameter, System.Globalization.CultureInfo culture)
       {
          List<string> returnValue = new List<string>(); 

          string input = value as string; 
          returnValue.AddRange(input.Split(",")); 

          return returnValue; 
       }
   }
} 
```

然后在你的 XAML 中使用 ValueConverter

*   导入命名空间
*   在你的窗口资源中声明你的价值转换器
*   修改绑定以使用值转换器

// 假设你导入了命名空间

```
<Window>
<Window.Resources>
    <local:ListToStringConverter x:Key="listFormatter" /> 

</Window.Resources>

<ListView x:Name="myCab">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Medication" DisplayMemberBinding="{Binding Medication}" />
            <GridViewColumn Width="140" Header="Stations" DisplayMemberBinding="{Binding Path=Stations Converter={StaticResource listFormatter}}">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="140" Header="Column 3" />
        </GridView>
    </ListView.View>
</ListView>
</Window> 
```

这样做的美妙之处在于，您可以在不使用 UI 特定属性污染您的类的情况下获得您想要的结果。

# c# - 除以两个整数不会返回预期结果

> ID：11487577
> 
> 赞同：1
> 
> 时间：2012-07-14T21:40:35.477
> 
> 标签：c#

我目前正在编写一个需要预览实时显示的程序，但是预览当然是按比例缩小的。但是，当我缩小`PictureBox`时，尺寸不正确。要使比例正确，宽度和高度需要达到 4:3 的比例。这是代码：

```
private void FindOptimalRes(PictureBox picBox)
{
    double h = Height / 4;
    double ratio = 4 / 3;
    picBox.Size = new Size((int)(h * ratio), (int)h);
} 
```

在测试中，`Height`（表格的高度）是400，所以新尺寸的宽度应该是133。但它总是被调整为100×100！为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T21:43:00.497

`4`并且`3`都是`int`s，所以它变成了`1`。使它们成为浮点数：

```
double ratio = 4.0 / 3.0; 
```

请注意，您也犯了同样的错误`Height`（现在没关系，但它会 - 将其更改为`4.0`）。如果这是实际代码，为什么要除以四再乘以四？

```
private void FindOptimalRes(PictureBox picBox)
{
    picBox.Size = new Size(Height / 3, Height / 4);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T21:42:57.550

C# 的数学是“正确的”。对正在做的事情的理解是..缺少:-)

表达式`4 / 3`（类型`int / int`）将计算为*整*数值 1，因为它使用*整数除法*（两个*操作数*都是整数）。结果 1 然后在赋值时被隐式强制为 double 值。

另一方面`4d / 3`将“工作”（并导致*双*1.333_），因为现在它是`double / int`-> `double / double (by promotion)`->`double`使用适当的*浮点除法*。

同样，对于`Height / 4`（假设 Height 是一个整数），这些将起作用：

```
(double)Height / 4          // double / int -> double
Height / 4d                 // int / double -> double
(double)Height / (double)4  // double / double -> double 
```

快乐编码！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T21:43:05.377

你正在做整数除法：

```
double ratio = 4 / 3; // evaluates to 1 
```

这不会为您提供您正在寻找的值，因为小数点被截断，因此评估为`1`而不是`1.333`. 至少有一个操作数必须是双精度数：

```
double ratio = 4.0 / 3.0; // evaluates to 1.333 
```

也一样`Height`。将 更改`4`为`4.0`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T21:53:17.597

确保除法结果是`double`

```
double ratio = (double) 4 / 3; // double division 
```

并且无需将您的输入值设置为双倍。

```
var num1 = // an integer number
var num2 = // an integer number

//result is integer, because of integer/integer uses 'integer division'
double result = num1 / num2; 

//result is double , because of you forced to 'double division'
double result = (double) num1 / num2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T21:59:19.117

你正在做整数除法。

你需要做的是：

```
private void FindOptimalRes(PictureBox picBox)
{
    double h = Height / 4D; // or Height / 4.0
    double ratio = 4D / 3D; // or 4.0 / 3.0
    picBox.Size = new Size((int)(h * ratio), (int)h); // Size is now correct [133,100]
} 
```

当您使用整数文字（无小数位）进行数学运算时，它被隐式键入为 int。

只需在文字（4D，3D）的末尾附加一个大写字母 D 即可将它们键入为双精度数，并且您的数学将是正确的。或者，您可以编写 4.0、3.0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T21:43:05.043

也许你应该做一个小数除法而不是整数除法：

```
double h = Height / 4.0;
double ratio = 4 / 3.0; 
```

如果 C# Math 关闭，世界各地的许多东西也会关闭。

# mongodb - MongoDB按嵌入式匹配查询的字段排序

> ID：11487584
> 
> 赞同：2
> 
> 时间：2012-07-14T21:42:04.723
> 
> 标签：mongodb, sorting

我在 MongoDB 中有这样的文档

```
{ 
    "_id": "...",
    "ranks":[
    {"pos": 1,"type":"some type"},
    {"pos": 56,"type":"other type"},
    ...
    ]
} 
```

我想找到“ranks.type”与“某种类型”匹配的所有项目，并在此嵌入文档中按“pos”对它们进行排序。

在 SQL 中，我会做这样的事情（表文档和 document_rank）

```
SELECT
    D.* 
FROM
    document D 
JOIN
    document_rank DR ON DR.document_id = D.id
WHERE
    DR.type="some type" 
ORDER BY 
    DR.pos 
```

我只是问我是否可以通过嵌入等级来做到这一点，或者我必须将它们链接到文档。我的实验表明我必须链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:24:44.890

您正在返回单个文档，因此询问排序没有意义 - 没有对单个文档中数组中的嵌入元素进行排序的概念。

但是，从 2.1（开发版）开始，聚合框架允许您通过选择文档、`$unwind`数组，然后对结果文档进行排序来做您想做的事情（如果需要，您甚至可以使用 更改结果的一般形状`$project`）。

```
db.coll.aggregate([
      {$unwind:"$ranks"},
      {$match:{"ranks.type":"some type"}},
      {$sort:{"ranks.pos":1}}
]) 
```

请注意，这些不是您的完整原始文档，它们是每个只有一个“等级”嵌入元素的文档，这就是为什么现在可以在嵌入字段上对它们进行排序的原因。

如果这种操作是您的应用程序不可或缺的一部分，那么您拥有的架构设计可能不是最佳选择。我建议查看应用程序对这些对象的查询类型和访问模式，以防更改架构会显着简化事情。

# jquery - 如果使用 jQuery 禁用 css，则隐藏内容或重定向

> ID：11487591
> 
> 赞同：0
> 
> 时间：2012-07-14T21:42:58.470
> 
> 标签：jquery, css, redirect, hide

好的，我一直在做一些关于检测用户是否禁用 css 的研究。我知道世界上甚至没有 2% 的人在禁用 css 的情况下浏览网页，但我仍然需要检测 css 是否已加载。

基本上，我使用经典的 asp 和 jquery 的组合来检测用户是否登录，然后使用 jquery 将使用登录表单淡入窗口上的覆盖层。如果用户转到该特定页面并禁用 css，我的所有内容仍然可供他们使用。

我想知道是否有更好的方法来使用 jQuery 做到这一点？可以检测样式表是否已被即时禁用/删除。

如果禁用了javascript，我已经使用`<noscript>`重定向用户，但我想采取额外的预防措施并重定向它们。

我尝试只使用一个简单的 javascript 显示检查来查看特定的 div 元素是否被隐藏，以“检测”css是否被禁用。但是在 Chrome 中，如果我在页面上并且我使用 Web 开发人员禁用所有 css，则 javascript 警报不会显示。该警报只是作为检查它的测试，一旦我弄清楚如何正确执行它，我将添加重定向。

非常感谢任何帮助或建议，在此先感谢。

```
<noscript>
<meta http-equiv='refresh' content='0;url=old_login.asp'/>
</noscript>

<script type="text/javascript">
    var csschk = document.getElementById('nocss');

    if (csschk.style.display = 'none') {
    } else {
        alert('Please enable CSS to view this page');
    }

</script>

<style>
#nocss {
display: none;
}
</style>

<div id="nocss">no css</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:58:47.243

我认为你在这里有更严重的问题。无论是否启用 CSS，一个简单的视图源都会显示您的页面及其内容。

你需要重新考虑你的方法。在显示安全内容之前使用凭据进行普通表单发布，或者如果您想避免页面刷新，请使用 AJAX。

有关使用 Ajax 提交表单的示例，请参见此处： [http:](http://randomactsofcoding.blogspot.com.au/2008/10/jquery-ajax-and-classic-asp.html) //randomactsofcoding.blogspot.com.au/2008/10/jquery-ajax-and-classic-asp.html http://heybigname.com/2009/04/ 15/ajax-with-jquery-a-simple-login-example/ [http://blog.webwizo.com/2011/05/04/simple-login-with-php-and-jquery-ajax/](http://blog.webwizo.com/2011/05/04/simple-login-with-php-and-jquery-ajax/)

出于学术目的，要检查页面是否具有 CSS，您可以使用 jQuery / JavaScript 来检测头部标签内是否存在链接标签。

您还可以使用[Modernizr](http://modernizr.com)之类的库来进行功能检测并检查 CSS 功能是否在浏览器中工作。

# javascript - jQuery - 返回值“From”和“To”的可选范围

> ID：11487592
> 
> 赞同：1
> 
> 时间：2012-07-14T21:42:58.787
> 
> 标签：javascript, jquery, jquery-ui-selectable

当用户在 jQuery UI Selectable 上选择一系列值时，我希望第一个数字和最后一个数字的值位于两个输入上。有谁知道如何做到这一点？

我现在拥有的例子。我的 jQuery 目前一次只能使用一个值。

```
<script>
$(function() {
    $("#selectable").selectable({
        stop : function() {
            var items = '';
            var result = $("#select-result").empty();
            $(".ui-selected", this).each(function() {
                var index = $("#selectable li").index(this);
                items += (index + 1);
            });
            alert('You have selected: ' + items);
            $('input[name="bid"]').val(items);
        }
    });
    $("#selectable li").addClass("ui-state-default");
}); 
</script>
<form>
<div>
<ol id="selectable">
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
</ol>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:50:51.993

Selectables 没有范围，但是下面的函数*应该*允许您找到第一个和最后一个选定的元素。

然后如何将这些元素转换回数字范围取决于您 - 这取决于您的标记。

```
$('#selectable').on('selectablestop', function() {
    var $selected = $(this).children('.ui-selected');
    var $first = $selected.first();
    var $last = $selected.last();
    // ...
}); 
```

演示在[http://jsfiddle.net/alnitak/sQwKu/](http://jsfiddle.net/alnitak/sQwKu/)

# xcode - 制作已准备好开发人员 ID 的 macOS 安装程序包

> ID：11487596
> 
> 赞同：202
> 
> 时间：2012-07-14T21:43:08.360
> 
> 标签：xcode, packagemaker, pkgbuild, productbuild

注意：这仅适用于[OS X 安装](https://en.wikipedia.org/wiki/Installer_(macOS))程序包，提交到[Mac App Store](https://en.wikipedia.org/wiki/Mac_App_Store)的包遵循不同的规则。

由于 Mountain Lion 的[Gatekeeper](https://en.wikipedia.org/wiki/Gatekeeper_(macOS))，我最终不得不将我的[PackageMaker](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/packagemaker.1.html)构建脚本带到谷仓后面并拍摄它。PackageMaker 已从 Xcode 中删除并移至“Xcode 辅助工具”，因此希望它很快就会被遗忘。

问题是如何使用`pkgbuild`,`productbuild`和`pkgutil`替换它？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2012-07-14T21:54:45.790

我们的示例项目有两个构建目标：HelloWorld.app 和 Helper.app。我们为每个组件制作一个*组件包*，并将它们组合成一个*产品档案*。

*组件包*包含要由 OS X 安装程序安装的有效负载。尽管可以单独安装组件包，但它通常被合并到*产品存档*中。

## 我们的工具：[pkgbuild](http://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html)、[productbuild](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/productbuild.1.html)和[pkgutil](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/pkgutil.1.html)

成功“构建和存档”后，在终端中打开 $BUILT_PRODUCTS_DIR。

```
$ cd ~/Library/Developer/Xcode/DerivedData/.../InstallationBuildProductsLocation
$ pkgbuild --analyze --root ./HelloWorld.app HelloWorldAppComponents.plist
$ pkgbuild --analyze --root ./Helper.app HelperAppComponents.plist 
```

这给了我们组件-plist，您可以在[“组件属性列表”](http://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html)部分找到值描述。*pkgbuild -root*生成*组件包*，如果您不需要更改任何默认属性，您可以在以下命令中省略*--component-plist参数。*

*productbuild --synthesize*产生一个[分布定义](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Introduction.html#//apple_ref/doc/uid/TP40005370-CH1-DontLinkElementID_16)。

```
$ pkgbuild --root ./HelloWorld.app \
    --component-plist HelloWorldAppComponents.plist \
    HelloWorld.pkg
$ pkgbuild --root ./Helper.app \
    --component-plist HelperAppComponents.plist \
    Helper.pkg
$ productbuild --synthesize \
    --package HelloWorld.pkg --package Helper.pkg \
    Distribution.xml 
```

在[Distribution.xml](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Introduction.html#//apple_ref/doc/uid/TP40005370-CH1-DontLinkElementID_16)中，您可以更改标题、背景、欢迎、自述文件、许可证等内容。您可以使用此命令将*组件包*和分发定义转换为*产品存档*：

```
$ productbuild --distribution ./Distribution.xml \
    --package-path . \
    ./Installer.pkg 
```

我建议查看[iTunes Installers](http://apple.com/itunes/download/) Distribution.xml 以了解可能的情况。您可以使用以下方法提取“安装 iTunes.pkg”：

```
$ pkgutil --expand "Install iTunes.pkg" "Install iTunes" 
```

## 让我们把它放在一起

我的项目中通常有一个名为 Package 的文件夹，其中包含 Distribution.xml、组件列表、资源和脚本等内容。

添加一个名为“Generate Package”的*运行脚本构建阶段*，设置为*仅在安装时运行脚本*：

```
VERSION=$(defaults read "${BUILT_PRODUCTS_DIR}/${FULL_PRODUCT_NAME}/Contents/Info" CFBundleVersion)

PACKAGE_NAME=`echo "$PRODUCT_NAME" | sed "s/ /_/g"`
TMP1_ARCHIVE="${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp1.pkg"
TMP2_ARCHIVE="${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp2"
TMP3_ARCHIVE="${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp3.pkg"
ARCHIVE_FILENAME="${BUILT_PRODUCTS_DIR}/${PACKAGE_NAME}.pkg"

pkgbuild --root "${INSTALL_ROOT}" \
    --component-plist "./Package/HelloWorldAppComponents.plist" \
    --scripts "./Package/Scripts" \
    --identifier "com.test.pkg.HelloWorld" \
    --version "$VERSION" \
    --install-location "/" \
    "${BUILT_PRODUCTS_DIR}/HelloWorld.pkg"
pkgbuild --root "${BUILT_PRODUCTS_DIR}/Helper.app" \
    --component-plist "./Package/HelperAppComponents.plist" \
    --identifier "com.test.pkg.Helper" \
    --version "$VERSION" \
    --install-location "/" \
    "${BUILT_PRODUCTS_DIR}/Helper.pkg"
productbuild --distribution "./Package/Distribution.xml"  \
    --package-path "${BUILT_PRODUCTS_DIR}" \
    --resources "./Package/Resources" \
    "${TMP1_ARCHIVE}"

pkgutil --expand "${TMP1_ARCHIVE}" "${TMP2_ARCHIVE}"

# Patches and Workarounds

pkgutil --flatten "${TMP2_ARCHIVE}" "${TMP3_ARCHIVE}"

productsign --sign "Developer ID Installer: John Doe" \
    "${TMP3_ARCHIVE}" "${ARCHIVE_FILENAME}" 
```

如果您不必在使用*productbuild*生成包后更改包，则可以摆脱`pkgutil --expand`和`pkgutil --flatten`步骤。您也可以在*productbuild上使用**--sign*参数，而不是运行*productsign*。

 **## 签署 OS X 安装程序

软件包使用*Developer ID Installer*证书进行签名，您可以从[Developer Certificate Utility](https://developer.apple.com/account/mac/certificate/)下载该证书。

他们的签名是使用*pkgbuild*、*productbuild*或*productsign*`--sign "Developer ID Installer: John Doe"`的参数完成的。

 ***请注意，如果您要使用 productbuild 创建已签名的*产品存档*，则没有理由对*组件包*进行签名。

![开发人员证书实用程序](../Images/8101c85fffe6a196e9d3add5f6b59bc7.png)

## 一路：将包复制到 Xcode 存档中

要将某些内容复制到 Xcode 存档中，我们不能使用*Run Script Build Phase*。为此，我们需要使用方案动作。

编辑方案并展开存档。然后单击 post-actions 并添加一个*New Run Script Action*：

在 Xcode 6 中：

```
#!/bin/bash

PACKAGES="${ARCHIVE_PATH}/Packages"

PACKAGE_NAME=`echo "$PRODUCT_NAME" | sed "s/ /_/g"`
ARCHIVE_FILENAME="$PACKAGE_NAME.pkg"
PKG="${OBJROOT}/../BuildProductsPath/${CONFIGURATION}/${ARCHIVE_FILENAME}"

if [ -f "${PKG}" ]; then
    mkdir "${PACKAGES}"
    cp -r "${PKG}" "${PACKAGES}"
fi 
```

在 Xcode 5 中，使用这个值`PKG`代替：

```
PKG="${OBJROOT}/ArchiveIntermediates/${TARGET_NAME}/BuildProductsPath/${CONFIGURATION}/${ARCHIVE_FILENAME}" 
```

如果您的版本控制不存储 Xcode 方案信息，我建议将其作为 shell 脚本添加到您的项目中，这样您就可以通过将脚本从工作区拖到后期操作中来简单地恢复操作。

## 脚本

有两种不同类型的脚本：[分发定义文件中的 JavaScript](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/InstallerJavaScriptRef/index.html#//apple_ref/doc/uid/TP40005137)和 Shell 脚本。

我在[WhiteBox - PackageMaker How-to](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html)中找到了关于 Shell 脚本的最佳文档，但请谨慎阅读，因为它引用了旧的包格式。

## 苹果硅

为了使包作为 arm64 运行，分发文件必须在其`hostArchitectures`部分中指定它支持`arm64`除了`x86_64`：

```
<options hostArchitectures="arm64,x86_64" /> 
```

## 附加阅读

*   [平面包格式 - 缺少的文档](http://s.sudre.free.fr/Stuff/Ivanhoe/FLAT.html)
*   [安装程序问题和解决方案](http://simx.me/technonova/tips/packagemaker_and_installer.html)
*   [pkgbuild 的愚蠢技巧](http://managingosx.wordpress.com/2012/07/05/stupid-tricks-with-pkgbuild/)
*   [持续过时](https://macops.ca/flat-packages-persisting-obsolescence/)

## 已知问题和解决方法

目的地选择窗格

向用户呈现的目的地选择选项只有一个选项——“为此计算机的所有用户安装”。该选项在视觉上显示为选中，但用户需要单击它才能继续安装，这会造成一些混乱。

![显示安装程序错误的示例](../Images/dfc5cd1e065ae6cedf1bc0e9b891a4f5.png)

Apples 文档建议使用`<domains enable_anywhere ... />`，但这会触发新的更多错误目的地选择窗格，Apple 不会在其任何包中使用该窗格。

使用弃用`<options rootVolumeOnly="true" />`会为您提供旧的目标选择窗格。 ![显示旧目标选择窗格的示例](../Images/f4c63cd123abd9279fafdf5dfe21e363.png)

* * *

您想将项目安装到当前用户的主文件夹中。

简短的回答：**不要尝试**！

长答案：**真的；不要尝试！**阅读[安装程序问题和解决方案](http://simx.me/technonova/tips/packagemaker_and_installer.html)。你知道我在读完这篇文章后做了什么吗？我傻到尝试了。告诉自己我确定他们在 10.7 或 10.8 中解决了这些问题。

首先，我不时看到上面提到的目的地选择窗格错误。那应该阻止我，但我忽略了它。如果您不想在发布软件后的一周内回复支持电子邮件，他们必须单击漂亮的蓝色选项，不要使用此选项。

您现在认为您的用户足够聪明，可以弄清楚面板，不是吗？那么这是关于主文件夹安装的另一件事，**它们不起作用**！

我在大约 10 台具有不同操作系统版本的不同机器上对它进行了两周的测试，并且从未失败过。所以我发货了。在发布后的一个小时内，我从无法安装它的用户那里得到了回复。日志提示您无法修复的权限问题。

所以让我们再重复一遍：我们不使用安装程序来安装主文件夹！

* * *

用于欢迎、自述、许可和结论的 RTFD 不被`productbuild`.

安装程序从一开始就支持 RTFD 文件，以制作带有图像的漂亮欢迎屏幕，但 productbuild 不接受它们。

解决方法：使用虚拟 rtf 文件并在包中将其替换为 after `productbuild`is done。

注意：您还可以在 RTFD 文件中包含 Retina 图像。为此使用多图像 tiff 文件：`tiffutil -cat Welcome.tif Welcome_2x.tif -out FinalWelcome.tif`. 更多[细节](http://s.sudre.free.fr/Stuff/Installer/Unreleased_Notes/10.7_Retina.html)。

* * *

*使用BundlePostInstallScriptPath*脚本完成安装后启动应用程序：

```
#!/bin/bash

LOGGED_IN_USER_ID=`id -u "${USER}"`

if [ "${COMMAND_LINE_INSTALL}" = "" ]
then
    /bin/launchctl asuser "${LOGGED_IN_USER_ID}" /usr/bin/open -g PATH_OR_BUNDLE_ID
fi

exit 0 
```

以登录用户身份运行应用程序很重要，而不是以安装程序用户身份运行。这是通过*launchctl asuser uid path*完成的。此外，我们仅在不是命令行安装时才运行它，使用*安装程序*工具或*Apple Remote Desktop*完成。

* * *

* * *

## 回答 #2

> 赞同：196
> 
> 时间：2013-04-04T15:50:39.817

Stéphane Sudre 有一个非常有趣的应用程序，它可以为您完成所有这些工作，可编写脚本/支持从命令行构建，具有超级漂亮的 GUI 并且是免费的。可悲的是：它被称为“包”，这使得它无法在谷歌中找到。

[http://s.sudre.free.fr/Software/Packages/about.html](http://s.sudre.free.fr/Software/Packages/about.html)

我希望我在开始手工制作自己的脚本之前就已经知道了。

![包应用程序截图](../Images/b63b1f048aed93959922736f74b338db.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-10T21:40:52.177

对于那些试图为包或插件创建包安装程序的人来说，这很容易：

```
pkgbuild --component "Color Lists.colorPicker" --install-location ~/Library/ColorPickers ColorLists.pkg 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-11T02:55:28.380

A +1 接受答案：

**安装程序中的目标选择**

如果在用户域和系统域之间需要域（又名目标）选择，那么不要尝试`<domains enable_anywhere="true">`使用以下内容：

`<domains enable_currentUserHome="true" enable_localSystem="true"/>`

[enable_currentUserHome](https://developer.apple.com/library/archive/documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Distribution_XML_Ref.html)安装应用app下`~/Applications/`，`enable_localSystem`允许应用安装在下`/Application`

我已经在 El Capitan 10.11.6 (15G1217) 中尝试过这个，它似乎在我尝试的 1 台开发机器和 2 台不同的 VM 中运行良好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-06T19:49:13.167

[这是一个构建脚本](https://github.com/drichardson/TRIMCheck/blob/master/build.sh)，它从构建根目录中创建一个签名的安装程序包。

```
#!/bin/bash
# TRIMCheck build script
# Copyright Doug Richardson 2015
# Usage: build.sh
#
# The result is a disk image that contains the TRIMCheck installer.
#

DSTROOT=/tmp/trimcheck.dst
SRCROOT=/tmp/trimcheck.src

INSTALLER_PATH=/tmp/trimcheck
INSTALLER_PKG="TRIMCheck.pkg"
INSTALLER="$INSTALLER_PATH/$INSTALLER_PKG"

#
# Clean out anything that doesn't belong.
#
echo Going to clean out build directories
rm -rf build $DSTROOT $SRCROOT $INSTALLER_PATH
echo Build directories cleaned out

#
# Build
#
echo ------------------
echo Installing Sources
echo ------------------
xcodebuild -project TRIMCheck.xcodeproj installsrc SRCROOT=$SRCROOT || exit 1

echo ----------------
echo Building Project
echo ----------------
pushd $SRCROOT
xcodebuild -project TRIMCheck.xcodeproj -target trimcheck -configuration Release install || exit 1
popd

echo ------------------
echo Building Installer
echo ------------------
mkdir -p "$INSTALLER_PATH" || exit 1

echo "Runing pkgbuild. Note you must be connected to Internet for this to work as it"
echo "has to contact a time server in order to generate a trusted timestamp. See"
echo "man pkgbuild for more info under SIGNED PACKAGES."
pkgbuild --identifier "com.delicioussafari.TRIMCheck" \
    --sign "Developer ID Installer: Douglas Richardson (4L84QT8KA9)" \
    --root "$DSTROOT" \
    "$INSTALLER" || exit 1

echo Successfully built TRIMCheck
open "$INSTALLER_PATH"

exit 0 
```*****

# wordpress - HTMLUnit 和处理 cookie（“警告：cookie 被拒绝”）

> ID：11487599
> 
> 赞同：5
> 
> 时间：2012-07-14T21:43:18.377
> 
> 标签：wordpress, cookies, httpclient, htmlunit

我正在寻找一种使用 HTMLUnit 接受 cookie（所有 cookie）的方法

我正在尝试使用 HTMLUnit 登录我的 wordpress 网站，但是当 cookie 被拒绝时，我无法提交表单（因此无法登录），因为我的错误是：

> 2012 年 7 月 14 日晚上 10:42:24 org.apache.http.client.protocol.ResponseProcessCookies processCookies 警告：Cookie 被拒绝：

代码：

```
package backend;

import java.io.IOException;
import java.net.MalformedURLException;
import java.util.Set;

import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.CookieManager;
import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.util.Cookie;

public class temp {

    WebClient myClient = new WebClient(BrowserVersion.FIREFOX_3);
    CookieManager cm = new CookieManager();
    HtmlPage page;

    public void Someting() throws FailingHttpStatusCodeException, MalformedURLException, IOException{

    //Disabling Javascript for now.
    myClient.setJavaScriptEnabled(false);
    myClient.setCssEnabled(false);
    myClient.setCookieManager(cm);

    page = myClient.getPage("http://nick.wordpress.com/wp-admin");

    Set<Cookie> cookies = myClient.getCookieManager().getCookies();

    System.out.println("Page status code: " + page.getWebResponse().getStatusCode() + "\nPage status message: "  + page.getWebResponse().getStatusMessage());

    if(cookies != null)
    {
        for(Cookie cookie : cookies)
        {
            this.myClient.getCookieManager().addCookie(cookie);
        }
    }

    System.out.println("We have: " + myClient.getCookieManager().getCookies().size() + " cookie");
    }

    public static void main(String args[]) throws FailingHttpStatusCodeException, MalformedURLException, IOException{
        temp t = new temp();
        t.Someting();
    }
} 
```

此代码不包括 WordPress 表单填写/提交功能，因为这似乎不相关。

在网上搜索时，我只能找到 1 或 2 个模糊的答案，我应该修改`"http.client.protocol.ResponseProcessCookies"`课程，但我希望没有这个也可以完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T22:48:54.853

[你的问题在这里](https://stackoverflow.com/questions/4681772/cookie-policy-in-htmlunit)得到解答

您必须重新创建 CookieManager 类。找到方法`public synchronized Set<Cookie> getCookies(final URL url)`并删除语句`if (spec.match(cookie, cookieOrigin))`。

# android - 将位图从 imageview 存储到 SD

> ID：11487603
> 
> 赞同：-1
> 
> 时间：2012-07-14T21:44:23.430
> 
> 标签：android

我正在尝试保存显示在 imageview 上的位图。我的理解是我需要

1.  将位图转换为流。
2.  将该流写入 SD 卡上的文件。

这是我所做的

```
try {
                   File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
                   File file = new File(path, "name.png");
                   FileOutputStream out = null;
                   if (file.exists()) {
                       // do something awesome

                   } else {

                       out = new FileOutputStream(file);
                       currentimage.compress(Bitmap.CompressFormat.PNG, 100, out);
                   }
                   out.close();
            } catch (Exception e) {
                   e.printStackTrace();
            } 
```

我正在尝试更改保存的文件名，我知道它将进入 FileOutputStream 但不太确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:49:28.363

您的代码看起来正确，唯一的问题是您没有关闭 OutputStream。您需要添加

```
try {
    out.close();
} catch (IOExcetion ex) {
} 
```

给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T21:50:45.867

您需要通过扩展获得公共图片目录的路径来提供文件名。

```
FileOutputStream out = new FileOutputStream(new File(path, "name.png")); 
```

或者，如果您想先检查它是否已经存在：

```
File file = new File(path, "name.png");
if (file.exists()) {
    // do something awesome
    // perhaps save over top
    // perhaps pick another name
} else {
    // save it
    FileOutputStream out = new FileOutputStream(file);
    currentimage.compress(Bitmap.CompressFormat.PNG, 100, out);
} 
```

# jboss - JBoss Seam 项目无法运行/部署 JBoss Server 7.1

> ID：11487604
> 
> 赞同：1
> 
> 时间：2012-07-14T21:44:55.207
> 
> 标签：jboss, seam

我在 Seam 框架（Seam Web Project）和 JBoss Server 7.1 中创建了示例应用程序。当我尝试运行应用程序时，控制台显示：

```
23:29:35,419 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit."secoundProject-ds.xml".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."secoundProject-ds.xml".PARSE: Failed to process phase PARSE of deployment "secoundProject-ds.xml"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_24]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: IJ010061: Unexpected element: local-tx-datasource
    at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:85)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: org.jboss.jca.common.metadata.ParserException: IJ010061: Unexpected element: local-tx-datasource
    at org.jboss.jca.common.metadata.ds.DsParser.parseDataSources(DsParser.java:183)
    at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:119)
    at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:82)
    at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:80)
    ... 6 more

23:29:35,452 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015877: Stopped deployment secoundProject-ds.xml in 1ms
23:29:35,455 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015863: Replacement of deployment "secoundProject-ds.xml" by deployment "secoundProject-ds.xml" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"secoundProject-ds.xml\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"secoundProject-ds.xml\".PARSE: Failed to process phase PARSE of deployment \"secoundProject-ds.xml\""}}
23:29:35,457 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "secoundProject-ds.xml"
23:29:35,920 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."secoundProject-ds.xml".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."secoundProject-ds.xml".PARSE: Failed to process phase PARSE of deployment "secoundProject-ds.xml"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_24]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: IJ010061: Unexpected element: local-tx-datasource
    at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:85)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: org.jboss.jca.common.metadata.ParserException: IJ010061: Unexpected element: local-tx-datasource
    at org.jboss.jca.common.metadata.ds.DsParser.parseDataSources(DsParser.java:183)
    at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:119)
    at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:82)
    at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:80)
    ... 6 more

23:29:35,952 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."secoundProject-ds.xml".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."secoundProject-ds.xml".PARSE: Failed to process phase PARSE of deployment "secoundProject-ds.xml" 
```

我的 secoundProject-ds.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE datasources
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
<datasources>

   <local-tx-datasource>
      <jndi-name>secoundProjectDatasource</jndi-name>
      <use-java-context>true</use-java-context>
      <connection-url>jdbc:mysql://localhost:3306/database</connection-url>
      <driver-class>com.mysql.jdbc.Driver</driver-class>
      <user-name>root</user-name>
      <password></password>
   </local-tx-datasource>

</datasources> 
```

当我评论标签错误消失，但应用程序在浏览器（`The requested resource (/secoundProject/) is not available.`）中被禁用。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:33:01.897

更新：修复了数据源示例的断开链接。

问题是您使用的是旧的数据源定义方式。使用[此](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6.2/html/Administration_and_Configuration_Guide/Example_MySQL_Datasource1.html)示例作为起点。

此外，使用[这些](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Migration_Guide/index.html)文档将您的 Seam 应用程序迁移到 jbossas-7

# ruby-on-rails - 如何制作collection_select

> ID：11487606
> 
> 赞同：1
> 
> 时间：2012-07-14T21:45:01.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

有一个基于Devise系统的用户。
User_has_one：user_profile，user_profile_belongs_to：用户
User_profile_has_one：语言，language_belongs_to：User_profile

在“user_profiles”表中，有一列名为“language_id”，用于了解用户说的语言。
在“语言”表中，有一列名为“名称”。这可能是英语、西班牙语和语言种类。

现在我想将语言选择添加到我的设计的编辑页面

下面应该是这样的。正确的？

```
<h2>Edit <%= resource_name.to_s.humanize %></h2>

<% resource.build_user_profile if resource.user_profile.nil? %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

    <%= f.fields_for :user_profile do |profile_form| %>

      <div><%= profile_form.label :nickname %><br /> 
      <%= profile_form.text_field :nickname %></div> 

      <div><%= profile_form.label :language_id %><br /> 
      <%= profile_form.collection_select(language_id, @languages, language_id, name_ja ) %></div> 

    <% end %> 

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
  <%= f.password_field :current_password %></div>
  <br />
  <div><%= f.submit "Update" %></div>
<% end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete %>.</p>

<%= link_to "Back", :back %> 
```

更新！

registrations_controller.rb 中的编辑方法

```
 def edit
    @languages = Language.all
    @countries = Country.all 
    @prefectures = Prefecture.all
    @genders = Gender.all 
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:26:00.507

假设您在控制器中分配 @languages ，那么您可能想要类似的东西：

```
<%= profile_form.collection_select(:language_id, @languages, :id, :name) %> 
```

你想传递代表应该被调用的方法的符号，所以 ":language_id" 而不是 "language_id"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:26:29.713

在控制器动作中你应该有 -

```
@languages = Language.find_by_sql("select distinct id, name from languages") 
```

并且在视图中

```
<%= collection_select :language, :id, @languages, :id, :name %> 
```

在 jquery 中，您可以使用 -

```
var languageId = $('select#language_id :selected').val(); 
```

# php - CakePHP 和 Pages Controller 的麻烦

> ID：11487607
> 
> 赞同：1
> 
> 时间：2012-07-14T21:45:02.710
> 
> 标签：php, cakephp

我对 CakePHP 很陌生，对于我的第一个项目，我正在制作一个带有一些表单等的大部分静态站点。我使用 CakePHP 2.2

当我在 CookBook 中阅读静态页面时，我应该使用默认页面控制器“如果您制作视图文件 app/View/Pages/about_us.ctp，您可以使用 URL [http://example.com/pages/about_us](http://example.com/pages/about_us)访问它。bla bla bla”所以我在 /View/Pages/ 中创建了新视图，然后用一些 lorem ipsum 填充它。

当我尝试使用[http://example.com/pages/myview](http://example.com/pages/myview)访问它时，我在 PagesController 错误中收到 Missing Method。

所以我试图删除 app/Controller/PagesController.php 中的所有内容，并用一些基本的东西填充它，比如

```
class PagesController extends AppController {
public function index() {
        }
public function staticpagename() {
        }
} 
```

现在它可以工作了，我可以使用两种不同的视图访问我的页面。但我想添加大约 6 或 7 个需要不同视图的静态页面。编写大量的公共函数*staticpagename*看起来有点错误。我应该怎么做才能正确实现我的目标：没有使用空方法淹没控制器的静态页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:59:30.307

您需要恢复所有代码`PagesController`，并将静态页面路由到`display`方法。

# c++ - 处理错误的 ifstream

> ID：11487613
> 
> 赞同：0
> 
> 时间：2012-07-14T21:45:59.677
> 
> 标签：c++, file, coding-style, ifstream

如果在 C++ 程序中，我正在读取文件，并且其中一个文件由于某种原因未正确读取，并且未正确打开，关闭文件是个好主意`fstream`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T21:47:30.607

当您超出 C++ 的范围时，Fstream 将自动关闭。我不明白为什么您需要在 C++/ 中手动关闭 fstream

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T22:03:49.733

您可以通过检查文件是否正确加载来跳过所有这些..

```
ifstream file(_path);
if(file.good()) {
    //do anything you want to the file  
} 
```

注意。*除了在这种情况下作为一个好习惯，您应该始终在完成文件后关闭它们。*

# ruby-on-rails - Rails omniauth + Facebook 可通过 http 进行开发，但不能通过 HTTPS 进行生产

> ID：11487617
> 
> 赞同：1
> 
> 时间：2012-07-14T21:46:27.517
> 
> 标签：ruby-on-rails, facebook, omniauth

我有一个使用omniauth + Facebook 进行登录身份验证的Rails 3.1 应用程序。

```
omniauth (1.1.0)
  hashie (~> 1.2)
  rack
omniauth-facebook (1.2.0)
  omniauth-oauth2 (~> 1.0.0)
omniauth-oauth2 (1.0.0)
  oauth2 (~> 0.5.0)
  omniauth (~> 1.0) 
```

当我将 Facebook 设置设置为使用 localhost:3000/users/auth/facebook 时，效果很好。当我将代码部署到生产中时，它根本不起作用。主要区别在于，在本地，我只使用 HTTP，而在生产中 Nginx 配置为强制使用 HTTPS（通过重定向）。

```
initializers/devise.rb
config.omniauth :facebook, '1705xxxxxxxxx586', '173b59ba3xxxxxxxxxxxx893e2e697', :scope => 'email,user_birthday'

initializers/omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  #provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET']
  provider :facebook, '1705xxxxxxxxx586', '173b59ba3xxxxxxxxxxxx893e2e697',
        :scope => 'email,user_birthday',
        :client_options => {:ssl => {:ca_path => '/etc/nginx/certs/cacert.pem'}}
end 
```

有没有人遇到过这个问题？似乎在生产中没有读取密钥/秘密，但这对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:59:57.613

我们将问题追溯到一个“额外的”“？” 在其配置中的 nginx 重写中。万一其他人在将来的某个时候遇到这个问题，nginx 会完全按照您的指示去做。:)

# java - 将音频文件数组传递给 ArrayList

> ID：11487618
> 
> 赞同：0
> 
> 时间：2012-07-14T21:47:10.480
> 
> 标签：java, android, android-activity

如何从存储在以下位置的“原始”文件夹中存储这些音频文件：

```
int[] lessonClips = { R.raw.button_a, R.raw.button_2, R.raw.button_3,
                R.raw.button_4, R.raw.button_5, R.raw.button_6 }; 
```

进入带有 HashMap 参数的 ArrayList，例如 **ArrayList < HashMap < ?>>**

我正在使用的类具有以下方法

/** 从 sdcard 读取所有 mp3 文件并将详细信息存储在 ArrayList 中的函数 * */

```
public ArrayList<HashMap<String, String>> getPlayList(){
                    File home = new File(new String("/sdcard/audio"));

                    if (home.listFiles(new FileExtensionFilter()).length > 0) {
                        for (File file : home.listFiles(new FileExtensionFilter())) {
                            HashMap<String, String> song = new HashMap<String, String>();
                            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                            song.put("songPath", file.getPath());

                            // Adding each song to SongList
                            songsList.add(song);
                        }
                    }
                    // return songs list array
                    return songsList;
                } 
```

所以我正在尝试将这些音频文件转换为字符串以在该方法中使用它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:28:04.403

我完全同意 Jrom 和 10s 的观点。为什么要使用 HashMap。使用数组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:43:36.410

现在我明白你想要做什么了。我会为您提供替代解决方案。尽管使用了`HashMap`类似的方法，但请尝试为您的代码实现这一点，以便对未来的更改更加具体。

使用属性实现歌曲对象：

```
public class Song {
   String title;
   String path;
   int resource; //R.raw.*
   //setters and getters
} 
```

然后你就有了这个对象：`ArrayList<HashMap<int, Song>>;`

通过这种方式，您可以在一个对象中拥有所有歌曲的详细信息，您可以按照自己的方式制作不同的播放列表，并且在 HashMap 中，您为每首歌曲都有一个 ID，因此您可以轻松访问它们。

如果你不关心给每首歌一个 ID，你可以这样做：`ArrayList<ArrayList<Song>>`.

将来您可能需要在歌曲中添加艺术家或其他内容。这对此类更改更加健壮，并且是保持代码清洁的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:04:27.787

这就是我的想法。从您的代码来看，您似乎只是从特定目录中提取 mp3 文件。这意味着您将只有一个播放列表。如果是这种情况，我会像这样存储歌曲的名称：

```
ArrayList<String> songList; 
```

或者像：

```
ArrayList<Song> songList; //10s' suggestion. 
```

至于你原来的问题，你可以尝试这样的事情：

```
for(int x = 0; x < lessonClips.length; x++)
{
    songList.add(getApplicationContext().getResources().
               getResourceEntryName(lessonClips[x]);
} 
```

# asp.net-mvc - 以 DRY 方式显示按类别和子类别排序的产品列表

> ID：11487620
> 
> 赞同：0
> 
> 时间：2012-07-14T21:47:20.307
> 
> 标签：asp.net-mvc, entity-framework, dry, categories, conventions

我有以下实体：

```
public class Product{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Category { get; set; }
    public string SubCategory { get; set; }
} 
```

我最终想显示一个页面，该页面采用 a`IEnumerable<Product>`并按`Products`第一个排序-`Category`然后按每个排序`Category`。`Products``SubCategory`

我的 ViewModel 应该是什么样的？

起初我想出了这样的事情：

```
public class ProductListViewModel{
    public IEnumerable<Product> Products { get; set; }
    public IEnumerable<string> Categories { get; set; }
    public IEnumerable<string> SubCategories { get; set; }
} 
```

但是后来我的控制器变得充满了提取唯一性的逻辑，`Categories`而且`SubCategories`我没有干净的方法来处理每个`Category`人都有不同的`SubCategories`.

任何有按类别对对象进行分类经验的人 - 你能在正确的方向上推动我如何干净地处理这种情况吗？我可以完成工作，但我觉得我的代码不必要地草率而不是干燥。

我还想知道我的`Product`班级是否以不恰当的方式处理`Categories`/ `SubCategories`- 其他人有同样的感觉吗？（我认为我的类别可能更适合完全作为单独的对象）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:52:39.033

关于您关于模型结构的问题，我认为 Category 绝对应该是一个单独的实体 - 您的数据库将处于规范化状态（Category 不应在数据库中重复多次）。也许 ：

```
public class Product{
    public int ID { get; set; }
    public string Name { get; set; }
    public Category Category { get; set; }
}

public class Category{
    public int ID { get; set; }
    public string Name { get; set; }
    public SubCategory SubCategory { get; set; }
}

public class SubCategory{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

通过这种方式，您可以从产品中分离出类别（您还可以通过在产品实体中具有 ICollection 来为单个产品拥有多个类别）。这也创建了 Category 和 SubCategory 之间的关系。

# macos - Eclipse 在 Mac 上找不到 ADT 插件

> ID：11487621
> 
> 赞同：1
> 
> 时间：2012-07-14T21:47:27.753
> 
> 标签：macos, plugins, adt

Eclipse 无法识别我的 Mac 上的 ADT 插件（运行 OSX 10.5.8。）

我已按照开发者网站上的所有说明进行操作：

1.  已安装 Android SDK 工具、SDK 平台工具和 Android 4.1 (API 16)

2.  安装 Eclipse Classic 并重新启动。

进入 Eclipse，Preferences 时，没有名为 Android 的选项

任何人都可以帮忙吗？

我已经卸载并重新安装了所有东西，还尝试了不同版本的 eclipse，但这仍然没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T14:16:05.127

您需要为 Android 选项安装 Eclipse 插件才能显示在其首选项中。
只需按照[官方文档](https://developer.android.com/sdk/installing/installing-adt.html#Download)在 Eclipse 中安装插件并让它指向您下载的 sdk。

# java - 我如何将参数作为通用传递？

> ID：11487624
> 
> 赞同：0
> 
> 时间：2012-07-14T21:47:45.217
> 
> 标签：java, generics

我有：

```
public class<E extends aninterface> AClass{

    public AClass(){
    }

    public void amethod(E element){
        //something
    }

}

public class B implements aninterface{

} 
```

在调用代码中：

```
aninterface f = new B();
AClass<B> ac = new AClass<B>();
ac.amethod(f); 
```

它说 f 是类型`aninterface`，但参数是类型 'E'

如果我不能这样做，我不明白泛型的意义何在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:49:52.443

因为`AClass<B>.amethod()`期望 a`B`作为参数。但是您将其传递给`aninterface`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:57:59.263

请注意，*引用* `f`被声明为 type `aninterface`——*而不是*type `B`。尽管在运行时引用`f`指向类型的实例`B`，编译器在这里只寻找引用的声明类型`f`和`B`要求的类型之间的对齐`AClass#amethod(E)`。

也许你打算写这个？

```
final aninterface f = new B();
final AClass<? super aninterface> ac = new AClass<aninterface>();
ac.amethod(f); 
```

或者也许是这个？

```
final B f = new B();
final AClass<? super B> ac = new AClass<B>();
ac.amethod(f); 
```

同样，请注意 a`B`是 a `aninterface`，但不是相反：an`aninterface`不是 a `B`。因此，您不能为`aninterface`需要类型参数的方法提供类型引用`B`。

# javascript - 如何组合元素转换？

> ID：11487628
> 
> 赞同：4
> 
> 时间：2012-07-14T21:48:39.280
> 
> 标签：javascript, css, html, linear-algebra, css-transforms

在 HTML5 中，我想实现对画布元素的转换功能，以便用户可以`translate`（移动）、`scale`（放大/缩小）和`rotate`画布元素。每个这样的变换都可以用不同的变换原点来完成。

第一次转换很容易：

```
function transform(el, value, origin) {
  el.style.Transform = value;
  el.style.MozTransform = value;
  el.style.msTransform = value;
  el.style.OTransform = value;
  el.style.webkitTransform = value;
  el.style.TransformOrigin = origin;
  el.style.MozTransformOrigin = origin;
  el.style.msTransformOrigin = origin;
  el.style.OTransformOrigin = origin;
  el.style.webkitTransformOrigin = origin;
}

transform(myCanvas, 'translate('+ dx +'px, ' + dy + 'px) ' +
                    'scale(' + zoom + ', ' + zoom + ') ' +
                    'rotate(' + angle + 'deg)',
                    cx + 'px ' + cy + 'px'); 
```

用户将移动或缩放或旋转元素，而不是一次全部移动，因此一些转换参数将保持默认值*(dx = 0, dy = 0, zoom = 1, angle = 0)*。

在这样的转换之后，如果用户想要进行另一个转换（和另一个，另一个......），我如何将*(dx1, dy1, zoom1, angle1, cx1, cy1)*与*(dx2, dy2, zoom2, angle2, cx2 , cy2)*以获得可以在以后与新的转换参数组合的最终值？我不能将另一个转换附加到`transform`参数，因为`tranform-origin`可能会有所不同。是否有一个公式如何将变换与不同的变换原点结合起来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T22:31:46.860

您不必学习矩阵数学。根据[CSS 变换规范](http://www.w3.org/TR/css3-transforms/#transformation-matrix-computation)

> 1.  从单位矩阵开始。
> 2.  通过“transform-origin”的计算 X、Y 和 Z 值进行转换。
> 3.  依次乘以“变换”属性中的每个变换函数
> 4.  通过 'transform-origin' 的否定计算 X、Y 和 Z 值进行转换</li>

换句话说，`transform-origin: A; transform: B`与 相同`transform: translate(-A) B translate(A)`。（转换从右到左应用，所以你想要发生的第一件事发生在最后。）

所以使用上面的规则来消除`transform-origin`，现在你只有可以连接的简单变换。

例子：

1.  `transform-origin: 5px 5px; transform: translate(10px, 40px)`
2.  `transform-origin: 25px 30px; transform: scale(2)`
3.  `transform-origin: 10px 10px; transform: rotate(30deg)`

变成

1.  `transform: translate(-5px, -5px) translate(10px, 40px) translate(5px, 5px)`
2.  `transform: translate(-25px, -30px) scale(2) translate(25px, 30px)`
3.  `transform: translate(-10px, -10px) rotate(30deg) translate(10px, 10px)`

现在您可以将它们组合起来，因为它们都同意原产地（即无原产地）

`transform: translate(-5px, -5px) translate(10px, 40px) translate(5px, 5px) translate(-25px, -30px) scale(2) translate(25px, 30px) translate(-10px, -10px) rotate(30deg) translate(10px, 10px)`

当然，如果您愿意，您可以折叠连续的翻译

`transform: translate(-15px, 10px) scale(2) translate(15px, 20px) rotate(30deg) translate(10px, 10px)`

或者你可以翻出你的数学课本，[计算出最终的变换矩阵](http://www.youtube.com/watch?v=Nu0WpF-1_LM)。

**编辑**：变换从右到左应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:15:05.083

您必须处理矩阵转换。

每个线性运算都可以用一个 3x3 矩阵和一个 3x1 向量表示，您可以将它们应用于平面的点。如果*p*是一个点，*M*是矩阵，*q*是另一个向量，则每个线性变换都可以表示为*Mp + q*。

如果你有一个二维点，那么它的向量将是 [ *x; 是；1* ]（垂直向量），而矩阵可以有多种形式。

对于翻译，矩阵就是单位矩阵。向量*q*是平移向量。

对于缩放，*M*就像

```
 [a 0 0]
M = [0 b 0]
    [0 0 1] 
```

其中*a*和*b分别是**x*和*y*的比例因子。向量*q*为空。

对于旋转，比如角度*a*，你会得到

```
 [cos(a) -sin(a) 0]
M = [sin(a)  cos(a) 0]
    [  0       0    1] 
```

并且*q*再次为空。

也有用于倾斜的矩阵。所以，如果你必须应用三个连续的变换，你就必须应用这些线性变换。您的问题是您也必须处理原点，因此您必须从*p中减去向量**o*，而不是应用*M*，添加*q*，然后再添加*o*。

 ***假设您有这些转换 ( *M1, q1, o1* ) 和 ( *M2, q2, o2* )。当你申请第一个你得到

```
p1 = M1 * (p - o1) + q1 + o1 
```

然后你必须应用第二个转换：

```
p2 = M2 * (p1 - o2) + q2 + o2 
```

最后你会得到：

```
p2 = M2 * (M1 * (p - o1) + q1 + o1 - o2) + q2 + o2 
```

依此类推，最后是第三个（*M3, q3, o3*）。

一团糟？看起来像。但是如果你知道矩阵的样子，事情就可以简单一点。

现在，进行数学运算，并将其应用于`transform: matrix(a, b, c, d, tx, ty)`.***

# jquery - 日期输入永远不会为空

> ID：11487631
> 
> 赞同：1
> 
> 时间：2012-07-14T21:49:27.250
> 
> 标签：jquery, html, date, keyup

我有这个代码

```
$("#inputId").keyup(function(){
    alert($("#inputId").val());
}); 
```

我知道这是相当基本的（我不确定谷歌是什么），但我想知道为什么那个警报总是一个空字符串。

编辑-

由于某种原因，这不包括在内。

我的意思是当我在字段中输入时，警报从不显示任何内容 - 如果这不准确，抱歉，我的意思是警报显示，但它总是显示一个空字符串（所以它应该显示日期字段中的内容键已解除，但没有）。下面的固定 html 仍然会发生这种情况。

编辑（后续问题）-

很酷，所以我接受了以下答案之一。我想让它不管我输入什么，值都会出现在警报中（不仅仅是当条目是日期格式时）。我如何实现这一目标？

HTML 代码-

```
<div id = "container">
        <input type = "date" id = "inputId" class = "inputClass"><br /></input>
        <div id="deleteContainer"><span id="x">x</span></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T21:55:57.577

`input`坏了。改变

```
<input type = "date" id = "inputId" class = "inputClass"><br /></input>
                                                        ^^^^^^^^^^^^^^^ 
```

至

```
<input type = "date" id = "inputId" class = "inputClass"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T21:56:40.140

我创建了一个[JSFiddle](http://jsfiddle.net/cV5ZT/2/)来测试它，如果您使用并输入日期类型，那么它应该可以工作。

还将 $('#inputId') 更改为 $(this) ，这样可以节省额外的查询并且速度更快。

```
$("#inputId").keyup(function(){
    alert($(this).val());
});​ 
```

正如您在小提琴中看到的那样，在日期正确之前，使用带有日期字段的 keyup（在 Chrome 中）不会返回值。

您无法更改日期字段的行为，但您有两个选择。

*   将其更改为输入类型文本字段并添加您自己的验证。
*   当用户离开字段时获取值（这是 HTML 中的“模糊”事件或 jQuery 中的“更改”事件），如果日期有效，则获取值。

这是一个演示更改事件而不是 keyup 事件的[小提琴。](http://jsfiddle.net/cV5ZT/3/)

**更新**将小提琴更改为使用输入日期

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T21:56:01.183

您破坏了 HTML：

```
<input type="date" id="inputId" class="inputClass"><br /></input> 
```

应该：

```
<input type="date" id="inputId" class="inputClass" /><br /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T22:04:52.973

这工作正常：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Test</title>
    </head>
    <body>
        <input id="inputId" type="text"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
        $("#inputId").keyup(function() {
            console.log($("#inputId").val());
        })
        </script>
    </body>
</html> 
```

# android - 如何检测 Android 设备中的新应用

> ID：11487637
> 
> 赞同：3
> 
> 时间：2012-07-14T21:50:15.633
> 
> 标签：android, broadcastreceiver, contentobserver, android-package-managers

我想检测用户何时安装或删除应用程序，但我没有找到`BroadcastReceiver`这样做的。

在我的应用程序中，我通过 class 获取有关已安装应用程序的信息`PackageManager`，但我不想定期扫描应用程序。有没有`BroadcastReceiver`这样做的？或者任何`ContentObserver`？是否可以收到应用程序已安装或删除的通知？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T22:23:31.913

您可以注册一个`BroadcastReceiver`using `Intent.ACTION_PACKAGE_ADDED`（以及 `Intent.ACTION_PACKAGE_REMOVED`和/或`Intent.ACTION_PACKAGE_CHANGED`如果需要）。例如，

```
void registerReceiver() {
    IntentFilter filter = new IntentFilter(Intent.ACTION_PACKAGE_ADDED);
    filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
    filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
    filter.addDataScheme("package_name");     
}

public void onReceive(Context context, Intent intent) {
    final String action = intent.getAction();

    if (action.equals(Intent.ACTION_PACKAGE_ADDED)) {
        Uri data = intent.getData();
        String pkgName = data.getEncodedSchemeSpecificPart();
    }

    /* etc. */
} 
```

# cmake - 带有符号链接的 CMake 文件（安装文件 DESTINATION 目录）

> ID：11487638
> 
> 赞同：10
> 
> 时间：2012-07-14T21:50:27.653
> 
> 标签：cmake

我正在使用 FILE(INSTALL files)，但其中一些文件是符号链接。我可以告诉 CMake 取消引用符号链接而不是在目标上创建符号链接吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T15:36:21.007

您可以在将文件传递给之前以编程方式取消引用文件`install(FILES ...)`：

```
set (_resolvedFiles "")
foreach (_file ${_files})
    get_filename_component(_resolvedFile "${_file}" REALPATH)
    list (APPEND _resolvedFiles "${_resolvedFile}")
endforeach()
install(FILES ${_resolvedFiles} DESTINATION ${_dest}) 
```

# java - 使用 AutoBeans 以接口作为参数的 GWT RPC 调用

> ID：11487639
> 
> 赞同：0
> 
> 时间：2012-07-14T21:50:28.560
> 
> 标签：java, gwt, serialization, gwt-rpc, autobean

我尝试将 AutoBeans 添加到我们的 GWT 应用程序中，以将我们的对象序列化为 cookie，然后将它们读回。

但是，在此之后我无法使用反序列化对象调用 GWT RPC 方法调用。谁能提供有关 RPC 调用失败原因的任何见解？

**示范：**

```
public interface Worker {
    public String getTitle();

    public void setTitle(String title);
  }

  public interface WorkerFactory extends AutoBeanFactory {
    AutoBean<Worker> createWorker();
  }

  public class MyObject implements Worker {
    private String title;

    public MyObject() {
    }

    public String getTitle() {
      return title;
    }

    public void setTitle(String title) {
      this.title = title;
    }
  } 
```

**然后运行：**

```
 @Test
  public void testMyObject() {
    MyObject obj = new MyObject();
    obj.setTitle("titely");

    WorkerFactory factory = AutoBeanFactorySource.create(WorkerFactory.class);
    AutoBean<Worker> bean = factory.create(Worker.class, obj);
    String json = AutoBeanCodex.encode(bean).getPayload();
    System.out.println("Json is: " + json);

    bean = AutoBeanCodex.decode(factory, Worker.class, json);
    Worker newObject = bean.as();
    System.out.println("Object title is: " + newObject.getTitle());
  } 
```

...这似乎按预期工作：

```
Json is: {"title":"titely"} 
Object title is: titely 
```

但是现在我的 RPC 方法失败了，并且`caught.getMessage()`是`null`.

**服务定义：**

```
@RemoteServiceRelativePath("workerService")
interface WorkerService {
   public void doWork(Worker worker);
}

public interface WorkerServiceAsync {
  void doWork(Worker worker, AsyncCallback<Void> callback);
}

public class WorkerServiceImpl extends RemoteServiceServlet implements WorkerService {
  @Override
  public void doWork(Worker worker) {
      // Do stuff that never gets called
    }
} 
```

**调用者：**

```
WorkerServiceAsync WORKER_SERVICE = GWT.create(WorkerService.class);
WORKER_SERVICE.doWork(newObject, new AsyncCallback<Void>() {
      public void onSuccess(Void result) {
        Window.alert("Never get here!");
      }

      public void onFailure(Throwable caught) {
        Window.alert("Get here, but message is blank: " + caught.getMessage());
      }
    }); 
```

此外，我在服务器日志中看不到任何请求。

任何人都可以帮忙吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:03:32.187

我发现了如何使这项工作。

我没有将 Service 声明为接受 的类型`interface Worker`，而是将其更改为接受序列化的 JSON 字符串作为参数，然后使用[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)将其转换为服务器上需要的类型。

这是有道理的，因为 GWT 中的 AutoBean 反序列化返回的对象类型只是一个声明的`Worker`接口类型……实际的对象类型是某种代理，而该代理本身显然不是可序列化的。

所以我要在这里使用的解决方案是将序列化的 JSON 字符串从客户端上的 GWT 发送到服务器，服务器`Worker`使用以下代码对同一个类进行反序列化：

```
// on the server
public void doWork(String jsonString) {
    ObjectMapper jsonHelper = new ObjectMapper();
    ObjectReader reader = jsonHelper.reader(new TypeReference<MyObject>() {});
    MyObject actualHardObject;
    try {
      actualHardObject = reader.readValue(jsonString);
    } catch (IOException e) {
      log.severe("Couldn't parse json param: " + e.getMessage());
    }

    // do whatever you want with actualHardObject now
} 
```

# android - Intellij Idea 找不到我的安卓设备

> ID：11487646
> 
> 赞同：15
> 
> 时间：2012-07-14T21:51:28.713
> 
> 标签：android, debugging, intellij-idea, adb

嗨，我想做一些使用录音的测试应用程序，但它在模拟器中不起作用。我需要在我的手机上对其进行测试，但每次我更改使用 USB 的选项时，它都不会检测到我的 Wildfire S ... 已连接并处于 USB 调试模式。

它显示“未找到 USB 设备”。

使用 11.1.2

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-19T11:24:45.583

这对我有用：

1.  取消阻止手机中的开发人员设置（[链接](https://stackoverflow.com/a/18103158/2275775)）
2.  确保您的 Adb USB 驱动程序已安装（Windows 8 和 8.1 解决方案）：

    *   通过 USB 连接您的设备
    *   右键单击“这台电脑”（我的电脑）-> 管理-> 设备管理器-> 其他设备
    *   如果未安装 USB 驱动程序，则在“其他设备”中会出现您的手机
    *   为您的手机下载 ADP USB 驱动程序（[常用驱动程序列表](http://developer.android.com/tools/extras/oem-usb.html#Drivers)）
    *   右键单击您的设备 -> 更新驱动程序软件 -> 浏览您的计算机以获取下载的驱动程序目录
    *   单击下一步并安装驱动程序。
    *   您可能会收到如下错误：

        > 尝试将驱动程序添加到商店时遇到问题。

    *   [通过解锁未签名的驱动程序安装来](http://revryl.com/2013/08/06/install-unsigned-drivers/)处理错误
3.  IDE 仍然无法识别您的手机

    *   尝试运行命令（[如果无法识别命令，请设置 PATH](https://stackoverflow.com/questions/20564514/adb-is-not-recognized-as-an-internal-or-external-command-operable-program-or)）：
        `adb devices`

    *   结果如下：

        > adb 服务器已过期。杀死...守护进程成功启动`

    *   IDE 现在应该可以识别您的设备

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-22T16:18:36.823

我今天遇到了这个问题并且越来越沮丧，直到我找到了这篇博文：http: [//vuknikolic.me/2013/03/10/idea-intellij-usb-device-not-found-android-problem/](http://vuknikolic.me/2013/03/10/idea-intellij-usb-device-not-found-android-problem/)

基本上，您要运行两个命令：

```
adb kill-server
adb devices 
```

当您运行第二个命令时，它将重新启动服务器，您应该会看到列出的设备：

```
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
List of devices attached
37329B0B96FD00EC    device 
```

如果您尝试从 IntelliJ（或 Android Studio）再次运行该应用程序，如果您的设备在上面列出，它应该可以工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-14T23:19:27.857

通过安装 HTC Sync 解决了问题，它安装了正确的驱动程序并允许我检测设备。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-29T14:38:22.593

可能是你手机的配置。打开开发者设置，确保USB配置选项在：

> MIDI

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-10T09:41:54.513

对于 Sony EXPERIA，我安装了 PC Companion，然后一切正常。（或者您可以只安装或更新您的设备派生程序，但它在 Windows 7 上对我不起作用。）

PC Companion 下载链接： http: [//www.sonymobile.com/gb/tools/pc-companion/](http://www.sonymobile.com/gb/tools/pc-companion/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-29T12:35:40.963

[安卓 SDK 管理器](http://i.stack.imgur.com/zVxXX.jpg)

您可以在 SDK 管理器中安装或更新您的 Google USB 驱动程序。它可能对任何无法识别的设备有所帮助。点击上面的链接，看看在哪里。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-24T03:18:14.640

大家，请升级到新版本（对我来说是12.04）。现在一切正常！

不要在分叉错误和版本交叉上浪费更多时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-01T23:28:53.837

将您的手机连接到亚行：Linux

1.  创建一个名为 android.rules 的文件
2.  在不切换目录的情况下，运行以下命令：sudo cp android.rules /etc/udev/rules.d/51-android.rules b。sudo chmod 644 /etc/udev/rules.d/51-android.rules c。须藤 chown 根。/etc/udev/rules.d/51-android.rules d. sudo service udev restart e. sudo your-path-to-adb-executable/adb kill-server f. sudo your-path-to-adb-executable/adb start-server g. 你的路径到 adb 可执行文件/adb 设备

3.  将能够在Android Studio上看到

[致谢：[为开发设置设备（??????没有权限）](https://stackoverflow.com/questions/9210152/set-up-device-for-development-no-permissions])

# java - 无法从 Java SE 客户端访问 EJB - 查找失败错误

> ID：11487647
> 
> 赞同：3
> 
> 时间：2012-07-14T21:52:05.043
> 
> 标签：java, servlets, ejb, ejb-3.0

我正在使用 Netbeans 并正在试验 EJB。

我有两个项目（2 个单独的应用程序）

1- 一个名为 EnterpriseApp 的 Java ME 项目

2- 一个名为 Test 的标准 Java SE 项目

现在这就是我所做的 - 在 EnterpriseApp 中，我生成了一个名为 TestEJB 的无状态 EJB，它具有本地和远程接口。对于远程项目选择，我选择了测试应用程序。简而言之，bean 代码看起来像这样

```
@Stateless
public class TestEjb implements TestEjbRemote, TestEjbLocal 
{
    @Override
    public String Try() 
    {
        return "Hello World";
    } 
} 
```

在 Java SE 客户端项目中，这是我试图访问 bean 的主要类：

```
public class Main 
{
    public static void main(String[] args) 
    {
        try 
        {
                Properties props = new Properties();
                props.load(new FileInputStream("jndi.properties"));
                InitialContext ctx = new InitialContext(props);
                TestEjbRemote testEJB = (TestEjbRemote) ctx.lookup("stateless.TestEjbRemote");
                System.out.println(testEJB.Try());
        } 
        catch (NamingException nex) 
        {
                nex.printStackTrace();
        } 
        catch (FileNotFoundException fnfex) 
        {
                fnfex.printStackTrace();
        } 
        catch (IOException ioex) 
        {
                ioex.printStackTrace();
        }
    }

} 
```

这是 JNDI.properties 文件的内容

```
java.naming.factory.initial = com.sun.enterprise.naming.SerialInitContextFactory
java.naming.factory.url.pkgs = com.sun.enterprise.naming
java.naming.factory.state = com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl
#optional.  Defaults to localhost.  Only needed if web server is running
#on a different host than the appserver
org.omg.CORBA.ORBInitialHost = localhost
#optional.  Defaults to 3700\.  Only needed if target orb port is not 3700.
org.omg.CORBA.ORBInitialPort = 3700 
```

我得到这个错误

```
 TestEjbRemote testEJB = (TestEjbRemote) ctx.lookup("stateless.TestEjbRemote");

javax.naming.NamingException: Lookup failed for 'stateless.TestEjbRemote' in SerialContext[myEnv={org.omg.CORBA.ORBInitialPort=3700, java.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory, org.omg.CORBA.ORBInitialHost=localhost, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: stateless.TestEjbRemote not found]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at Main.main(Main.java:19)
Caused by: javax.naming.NameNotFoundException: stateless.TestEjbRemote not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
    at com.sun.enterprise.naming.impl.RemoteSerialContextProviderImpl.lookup(RemoteSerialContextProviderImpl.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie.dispatchToMethod(ReflectiveTie.java:144)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie._invoke(ReflectiveTie.java:174)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540) 
```

关于如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:55:25.417

从概念上讲，你做的一切都是正确的。所以这应该是一些“错误名称”相关的问题。

好消息，你可以检查它:)

EJB一旦被应用服务器识别就被部署了。这意味着存根由 AS 创建并放入 JNDI 树中。这意味着一旦服务器启动，您可以转到 JNDI 树查看器（通常是应用服务器提供的）并查看部署在哪里。我相信，鉴于您已经正确设置了罐子，这应该可以工作。

希望这可以帮助

# c++ - 模板类的工厂模式和模板类的新类型的默认参数

> ID：11487648
> 
> 赞同：1
> 
> 时间：2012-07-14T21:52:32.430
> 
> 标签：c++, templates, default-value, factory-pattern

我有三层类，例如*BaseSpreading*（基类）、*IterativeMapSpreading*（BaseSpreading 的子类之一）和*TentSpreading*、*BernoulliSpreading*（IterativeMapSpreading 的两个子类）。一个名为*generateSpreading*的方法出现在所有类中。用户定义的选项指定传播，例如“*帐篷*”或“*伯努利*”。然后 if-else 控制结构调用相应子类的 generateSpreading 方法（“tent”和“bernoulli”将分别调用 TentSpreading 和 BernoulliSpreading 子类的 generateSpreading 方法）。

我知道如何通过将 generateSpreading 声明为虚拟并定义一个基类指针（指向 BaseSpreading）来解决我的问题。然后，派生类对象可以根据用户选项在if-else控制结构内实例化。尽管这样的实例在控制结构范围之外是不可用的，但是可以使用工厂模式将基类指针指向派生类对象，例如参见[这篇文章](https://stackoverflow.com/questions/8543167/scope-of-variables-in-if-statements)。尽管基于虚拟方法的解决方案有效，但由于其性能不佳，它对我的​​目的没有用。我的模拟调用了数百万次虚函数。

作为替代方法，我使用了模板编程。在这种情况下，我必须处理嵌套模板类的实例在 if-else 结构范围之外不可用的问题。我的问题是在使用模板类时是否可以扩展工厂模式的想法。为了使这项工作，如果可能的话，我必须创建一个指向模板基类的指针，然后将它指向实例化的模板子类，该子类在 if-else 结构中定义。然后问题归结为为模板基类定义一个默认模板参数，这一直是我的困难。[这个链接](http://www.linuxtopia.org/online_books/programming_books/c++_practical_programming/c++_practical_programming_107.html)给出了一个如何定义默认模板参数的示例，该参数不是众所周知的类型，例如“int”（链接示例的默认参数是向量的标准“分配器”模板）。

这些是我的脚本：

base_spreading.h：

```
#ifndef BASE_SPREADING_H_
#define BASE_SPREADING_H_

#include <boost/filesystem.hpp>
#include <boost/filesystem/fstream.hpp>
#include <boost/numeric/ublas/vector.hpp>

template <class S>
class BaseSpreading
{
  public:
    BaseSpreading(S& spreading);

    void generateSpreading(boost::numeric::ublas::vector<double>&);
  private:
    S& spreading_;
};

template <class S>
BaseSpreading<S>::BaseSpreading(S& spreading) : spreading_(spreading) {}

template <class S>
void BaseSpreading<S>::generateSpreading(
  boost::numeric::ublas::vector<double>& spr) {
  spreading_.generateSpreading(spr);
}

#endif /* BASE_SPREADING_H_ */ 
```

spread_iterative_map.h

```
#ifndef SPREADING_ITERATIVE_MAP_H_
#define SPREADING_ITERATIVE_MAP_H_

#include <boost/numeric/ublas/vector.hpp>

template <class S>
class IterativeMapSpreading
{
  public:
    IterativeMapSpreading(S& spreading);

    double evaluateMap(double);
    void generateSpreading(boost::numeric::ublas::vector<double>&);
    double sampleInitialPoint();
  private:
    S& spreading_;

    void calculateFollowingPoints(boost::numeric::ublas::vector<double>&);
};

template <class S>
IterativeMapSpreading<S>::IterativeMapSpreading(S& spreading) :
  spreading_(spreading) {}

template <class S>
void IterativeMapSpreading<S>::calculateFollowingPoints(
  boost::numeric::ublas::vector<double>& spr) {
    for (unsigned int i=1; i<spr.size(); ++i) {
      spr(i) = spreading_.evaluateMap(spr(i-1));
    }
}

template <class S>
double IterativeMapSpreading<S>::evaluateMap(double x) {
  return spreading_.evaluateMap(x);
}

template <class S>
void IterativeMapSpreading<S>::generateSpreading(
  boost::numeric::ublas::vector<double>& spr) {
  spr(0) = spreading_.sampleInitialPoint();
  calculateFollowingPoints(spr);
}

template <class S>
double IterativeMapSpreading<S>::sampleInitialPoint() {
  return spreading_.sampleInitialPoint();
}

#endif /* SPREADING_ITERATIVE_MAP_H_ */ 
```

传播_帐篷.h：

```
#ifndef SPREADING_TENT_H_
#define SPREADING_TENT_H_

#include <math.h>

#include "random_number_generation.h"

class TentSpreading
{
  public:
    TentSpreading(double uniformMin=0, double uniformMax=1,
      double nonCentrality=0.5);

    double evaluateMap(double);
    double sampleInitialPoint();
  private:
    const double uniformMin_, uniformMax_, nonCentrality_;
    double leftIntercept_, leftSlope_, rightIntercept_, rightSlope_;
    boost::random::uniform_real_distribution<> Uniform;

    void setLines();
    void validateParameters() const;
};

#endif /* SPREADING_TENT_H_ */ 
```

spread_tent.cpp:

```
#include "spreading_tent.h"

TentSpreading::TentSpreading(double uniformMin, double uniformMax,
  double nonCentrality) : uniformMin_(uniformMin), uniformMax_(uniformMax),
  nonCentrality_(nonCentrality), Uniform(uniformMin, uniformMax) {
  setLines();
}

double TentSpreading::evaluateMap(double x) {
  double y;

  if((uniformMin_<=x) && (x<nonCentrality_))
    y = leftSlope_*x+leftIntercept_;
  else if((nonCentrality_<=x) && (x<=uniformMax_))
    y = rightSlope_*x+rightIntercept_;

  return y;
}

double TentSpreading::sampleInitialPoint() {
  return Uniform(rng);
}

void TentSpreading::setLines() {
  leftSlope_ = (uniformMax_-uniformMin_)/(nonCentrality_-uniformMin_);
  leftIntercept_ = -uniformMin_*(uniformMax_-nonCentrality_)/
    (nonCentrality_-uniformMin_);
  rightSlope_ = -(uniformMax_-uniformMin_)/(uniformMax_-nonCentrality_);
  rightIntercept_ = (pow(uniformMax_, 2)-uniformMin_*nonCentrality_)/
    (uniformMax_-nonCentrality_);
} 
```

最后，main.cpp 中感兴趣的部分：

```
 try  {
    if (sbcOptions.mode=="sim-spr") {
      boost::numeric::ublas::vector<double> sprVector(3);

      if (sbcOptions.spr=="tent") {
        TentSpreading tent(-1, 1, 0);
        IterativeMapSpreading<TentSpreading> map(tent);
        BaseSpreading<IterativeMapSpreading<TentSpreading> > spreading(map);
      }

      spreading.generateSpreading(sprVector);
    }
  }
  catch(std::logic_error& logicError) {
    logTee << logicError.what() << "\n";
    return 1;
  } 
```

为了使用工厂模式，我尝试添加一个抽象基类，称为 FactoryBaseSpreading，BaseSpreading 是其子类。这是 FactoryBaseSpreading 的定义：

```
FactoryBaseSpreading {
  public:
    static BaseSpreading* create(std::string type);
}

FactoryBaseSpreading* FactoryBaseSpreading::create(std::string type) {
  if (type == "tent") {
    TentSpreading tent(-1, 1, 0);
    IterativeMapSpreading<TentSpreading> map(tent);
    return new BaseSpreading<IterativeMapSpreading<TentSpreading> >(map);
  }
  return NULL;
}

//Also, change the following line in base_spreading.h:
class BaseSpreading : public FactoryBaseSpreading 
```

这样，我可以在“main.cpp”中定义一个指向 FactoryBaseSpreading 的指针，并将其指向 if-else 结构内的适当子类，例如：

```
FactoryBaseSpreading* spreading;

try  {
  if (sbcOptions.mode=="sim-spr") {
    boost::numeric::ublas::vector<double> sprVector(3);

    if (sbcOptions.spr=="tent") {
      spreading = FactoryBaseSpreading::create("tent");
    }

    spreading.generateSpreading(sprVector);
  }
}
catch(std::logic_error& logicError) {
  logTee << logicError.what() << "\n";
  return 1;
} 
```

如果我在 FactoryBaseSpreading 中定义了一个虚拟 generateSpreading 方法，则编译并运行正常。但是，我试图避免的是使用虚函数，所以工厂模式并不能解决我的问题。

于是，我想到了在 BaseSpreading 基类中定义“create”方法，而不创建 FactoryBaseSpreading 抽象基类。在这种情况下，“create”方法的定义变为：

```
template <class S>
BaseSpreading<S>* BaseSpreading<S>::create(std::string type) {
  if (type == "tent") {
    TentSpreading tent(-1, 1, 0);
    IterativeMapSpreading<TentSpreading> map(tent);
    return new BaseSpreading<IterativeMapSpreading<TentSpreading> >(map);
  }
  return NULL;
} 
```

这段代码的问题是我不能再定义基类指针，因为它依赖于模板参数 S。例如，这是无效的：

```
BaseSpreading<S>* spreading; 
```

这就是为什么我要问是否可以在 BaseSpreading 的定义中提供默认参数。即使我能够指定默认模板参数，我也无法在运行时切换模板参数，因为模板是在编译时由编译器实例化的，如此处[所述](https://stackoverflow.com/questions/608409/select-template-argument-at-runtime-in-c)。所以，我似乎无法避免使用虚函数，甚至在模板元编程的帮助下也是如此。我能想到的解决问题的唯一其他方法是通过函数指针、委派函数，或者使用函数式编程完全改变我的代码设计......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:11:44.567

如果我理解正确，您希望基于内部循环中不会更改的内容进行动态调度，并且您希望内部循环不受任何“if”语句或间接调度的影响。这可以通过对代码进行小的重组来完成：

```
template<typename SPREADING>
void inner_loop(SPREADING* spreading) {
  while(something_long) {
    spreading->whatever();
  }
}

main(){
  if (opts.tentspreading) {
    TentSpreading spreading(stuff);
    inner_loop(&spreading);
  } else {
    IterativeMapSpreading spreading(other,stuff);
    inner_loop(&spreading);
  }
} 
```

注意两个inner_loop(&spreading)语句不能统一。他们实际上是用不同的参数调用不同的函数。

# c# - 在 DataTemplate 中绑定 ElementName

> ID：11487649
> 
> 赞同：21
> 
> 时间：2012-07-14T21:52:39.597
> 
> 标签：c#, wpf, xaml, data-binding

我正在尝试绑定一个依赖于同一个控件的属性`DataTemplate`。

为了显示：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <ComboBox x:Name="ComboList"
                  ItemsSource="{Binding StatTypes}"
                  SelectedItem="{Binding SelectedStatType, Mode=TwoWay, FallbackValue='Select a type'}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Text}"/>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>

        <TextBox Grid.Column="1" MinWidth="40" Margin="5">
            <TextBox.Text>
                <Binding Path="StatValue">
                    <Binding.Converter>
                        <converter:PercentageConverter SelectedStatType="{Binding ElementName=ComboList, Path=SelectedItem}" />
                    </Binding.Converter>
                </Binding>
            </TextBox.Text>
        </TextBox>
    </StackPanel>
</DataTemplate> 
```

但是`PercentageConverter`从来没有通过这个设置属性，我不明白为什么。这是命名范围问题吗？如果是这样，我认为这无关紧要，因为它是相同的。`DataTemplate` 如果不是，我做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-14T22:03:09.927

这可能是名称范围问题，绑定不是框架元素，其中的任何对象都不会共享外部名称范围，任何树中的绑定也不会，因此相对源绑定也应该失败。

您可以尝试使用[`x:Reference`](http://msdn.microsoft.com/en-us/library/ee795380.aspx)，它使用不同的机制：

```
{Binding SelectedItem, Source={x:Reference ComboList}} 
```

# php - PHP、mySQL、换行符和文本区域

> ID：11487655
> 
> 赞同：1
> 
> 时间：2012-07-14T21:54:17.247
> 
> 标签：php, mysql, textarea, newline

我有一个文本区域。用户在 textarea 中输入文本，其中可以包含用于格式化目的的换行符。我将此文本按原样保存到 mySQL 数据库，而不添加 HTML br 中断。这看起来像“text blah blah。\n\nText2 blah blah。” 在数据库记录中。

我在常规 HTML 页面上显示文本，`echo nl2br($text);`文本格式很好，两个换行符显示为两个句子，它们之间有一个空行。

当我将相同的文本发送到预先为用户编辑其原始条目的文本区域时，我使用以下代码：

`<textarea><?php echo $text;?></textarea>`

我希望我会得到一个充满文本的文本区域，其中包括一些存储在数据库中的双换行符。在这种情况下，我不使用 nl2br，因为这样做只会显示 HTML 字符（实际上不会创建换行符——换句话说，向用户显示 br 的 6 个字符）。相反，我得到的是剥离任何双新线，因此两条新线背靠背现在是单新线。单个新行不会被完全剥离——它们只是保持单个新行。

所以，简而言之，当我发送格式应该在文本行之间包含一个空行的文本时，我得到的只是一个新行，破坏了文本的重要格式）。

将文本从数据库输出到文本区域时，如何保留所有换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:05:55.467

这对我有用：

```
<?php
$txt = "line1\nline2\n\nline4\nline5";
?>
<html>

<body>

<form>
<textarea rows=10><?php echo $txt ?></textarea>
</form>

</body>

</html> 
```

请注意缺少`line3`text 和 double `\n\n`。正如预期的那样，在 Firefox 中加载此表单会在 line2/line4 文本之间出现一个空白行。

检查您的文本是否没有在其他地方被破坏，并且确实在数据库中作为双换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T07:05:28.127

你可以试试... echo str_replace("\n", "\r\n", $txt)

这个简单的读取换行符并将它们转换为textareas可以清楚理解的新行:)希望这会有所帮助。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T10:36:36.537

我遇到了同样的问题，但经过一些故障排除后，我的发现如下：

无论值是来自数据库、会话还是 cookie，所有文本区域都显示带有换行符的 \n\n。

但是如果 HTML 页面被缩小，空行会随着最终的 HTML 被缩小而消失。有利于减少页面大小的方法是从文档中清除空白。

检查实际的 HTML 可以证明这一点。

我将我的 OWN minify 函数与输出缓冲区一起使用，因此我只为该页面添加了一个异常。

=> 我的意思是不要 monify 包含重要文本区域的页面！

标头中的 PHP 代码如下所示：

```
$minify_exceptions = array(
    "page1.php",
    "page2.php"
);
if (isset($file_route) && in_array($file_route, $minify_exceptions)) {
    ob_start();
} else {
    ob_start("minify_html");
} 
```

注意：仅此代码没有任何作用。如果您有任何第 3 方 HTML 缩小器，或通过其他服务器传输的 HTML，例如 Google Page Speed，您需要在某处（MINIFY 发生的地方）找到页面的例外列表

PS更聪明的方法是增强你的MINIFY功能而不是在textarea标签之间MINIFY文本

# javascript - 浏览器全屏无按键消息

> ID：11487657
> 
> 赞同：0
> 
> 时间：2012-07-14T21:54:36.827
> 
> 标签：javascript, firefox, web-applications, browser, fullscreen

我在我的[新 webapp](http://openwords.org)中实现了 Firefox 的全屏功能。进入全屏时，firefox 会显示一条消息，告诉用户如何取消全屏。[您可以在每个youtube](http://youtube.com)视频上看到这种行为。

每次用户*按下*键盘上的任何键时，也会出现此消息。

因为我的 webapp 是关于写下单词的，所以消息经常出现。这样它隐藏了我的 webapp 的一些用户界面并激怒了用户。

如何防止 Firefox 因为按键而显示此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:42:45.153

新 Firefox 版本的新全屏 api 的行为完全符合我的要求。所以这个问题自己解决了。

# c# - 无法从正则表达式解析组

> ID：11487662
> 
> 赞同：0
> 
> 时间：2012-07-14T21:55:37.473
> 
> 标签：c#, regex

我正在使用下面的正则表达式来匹配以下语句：

> @import url(normalize.css); @import url(style.css); @import url(helpers.css);

```
 /// <summary>
   /// The regular expression to search files for.
   /// </summary>
   private static readonly Regex ImportsRegex = new Regex(@"@import\surl\(([^.]+\.css)\);", RegexOptions.Compiled | RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace); 
```

这与我的陈述相匹配，但是当我试图让这些组脱离我的比赛时，我得到的是完整的结果，而不是我期望的值。

例如预期结果`normalize.css` 实际结果`@import url(normalize.css);`

执行此操作的代码如下。谁能告诉我我做错了什么？

```
 /// <summary>
    /// Parses the string for css imports and adds them to the file dependency list.
    /// </summary>
    /// <param name="css">
    /// The css to parse.
    /// </param>
    private void ParseImportsToCache(string css)
    {
        GroupCollection groups = ImportsRegex.Match(css).Groups;

        // Check and add the @import params to the cache dependancy list.
        foreach (string groupName in ImportsRegex.GetGroupNames())
        {
            // I'm getting the full match here??
            string file = groups[groupName].Value;

            List<string> files = new List<string>();
            Array.ForEach(
                CSSPaths,
                cssPath => Array.ForEach(
                    Directory.GetFiles(
                        HttpContext.Current.Server.MapPath(cssPath),
                        file,
                        SearchOption.AllDirectories),
                    files.Add));

            this.cacheDependencies.Add(new CacheDependency(files.FirstOrDefault()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:02:44.707

您应该始终将您的正则表达式表示为您要查找的内容。`(?:exp)`用于非捕获组，而`()`用于捕获组。你也可以给他们起名字，比如`(?<name>exp)`

将您的正则表达式更改为`(?:@import\surl\()(?<filename>[^.]+\.css)(?:\);)`并像这样捕获它

```
pRegexMatch.Groups["filename"].Captures[0].Value.Trim(); 
```

希望这可以帮助。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T21:58:28.327

而是迭代组。您的第二场比赛将是内部比赛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:09:46.933

您必须像这样确定组名：

```
Regex.Matches(@"@import\surl\((?<yourGroupname)[^.]+\.css)\);" 
```

# actionscript-3 - AS3 Blitting - 复制像素获取一些源图像

> ID：11487663
> 
> 赞同：3
> 
> 时间：2012-07-14T21:55:51.180
> 
> 标签：actionscript-3, bitmap, bitmapdata

我正在尝试在屏幕上绘制一些东西，然后将其复制到舞台上的位图上。

我以前做过这个，程序绘制的形状像一个圆圈，但是当我使用库项目时，大多数源像素都会被切断。

这是我的代码 - 在另一个函数中，位图对象被添加到舞台上，我可以看到 copyPixels 可以工作，但正如我所说的，它只复制了一些像素。我试过玩矩形，但到目前为止还没有运气。

```
var s:StarAsset = new StarAsset();

        s.x = e.stageX;
        s.y = e.stageY;
        s.scaleX = e.pressure * 10;
        s.scaleY = e.pressure * 10;
        s.rotation = Math.random() * 360;

        var bms:BitmapData = new BitmapData(s.width + 6, s.height + 6, true, 0x00000000);
        bms.draw(s);

        var srect:Rectangle = new Rectangle();
        srect.width = s.width + 6;
        srect.height = s.height + 6;

        var destpoint:Point = new Point(s.x, s.y);
        bmcontainer.copyPixels(bms, srect, destpoint, null, null, true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T03:06:51.337

使用明星资产：

![明星资产](../Images/b19fe24990f4329d22b05626e3e132e8.png)

并假设你正在舞台上的画布位图：

```
var canvas:BitmapData = new BitmapData(600, 600, true, 0x0);
var bitmap:Bitmap = new Bitmap(canvas, PixelSnapping.AUTO, true);
addChild(bitmap); 
```

此实现将实例化您的`StarAsset`，将其绘制到`BitmapData`，然后随机变换每个绘制到画布的副本的比例、位置和旋转：

```
makeStars();

function makeStars():void
{
    // get the star asset
    var s:StarAsset = new StarAsset();

    // copy star asset to bitmap data
    var bd:BitmapData = new BitmapData(s.width, s.height, true, 0x0);
    bd.draw(s);

    // draw 100 variants on BitmapData
    for(var i:uint = 0; i < 100; i++)
    {
        var positionX:Number = Math.random() * 600;
        var positionY:Number = Math.random() * 600;
        var scale:Number = Math.random();
        var angle:Number = Math.random() * 360;

        var matrix:Matrix = new Matrix();
        matrix.scale(scale, scale);
        matrix.rotate(angle * Math.PI / 180);
        matrix.translate(positionX, positionY);

        canvas.draw(bd, matrix, null, null, null, true);
    }
} 
```

产生：

![星星](../Images/a2cea8cb309e9ee44b416b7e59551822.png)

或者这里画了 1000 颗星：

![星星-1000](../Images/338e7d9db3e669df946c3754e9d4a130.png)

或者最终抽取 10,000 颗星：

![星数-10000](../Images/748b438ab84d539c541ce76b5f5d63d9.png)

# asp.net-mvc - MVC 4 是否有内置的站点地图解决方案？

> ID：11487670
> 
> 赞同：6
> 
> 时间：2012-07-14T21:57:07.273
> 
> 标签：asp.net-mvc

我正在查看 ASP.NET MVC 4，它似乎 System.Web.SiteMapProvider 不支持 MVC 功能，如控制器和操作名称。

快速搜索后，我注意到很多人正在创建他们的所有提供程序和/或自定义解决方案。

所以这让我想到：MVC 团队没有在 MVC Site MAP 提供商上工作是否有原因？有没有更优雅的方式，甚至是处理大型项目的菜单和面包屑的最佳实践？

我感谢任何评论。提前致谢;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:59:13.420

不，在 ASP.NET MVC 中没有任何内置的站点地图。

您应该查看[MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)，它是 ASP.NET MVC 的 ASP.NET MVC SiteMapProvider 实现——尽管我认为它没有经过 MVC 4 的测试。

MvcSiteMapProvider 基于区域、控制器和操作方法名称，而不是固定的 URL 引用。

# hibernate - 将 Hibernate 4.1 和 JPA 2.0 与实体管理器一起使用，将具有子实体的多个实体加载到多个级别的最佳方法是什么？

> ID：11487681
> 
> 赞同：1
> 
> 时间：2012-07-14T21:59:27.630
> 
> 标签：hibernate, jpa-2.0, hibernate-entitymanager

我们正在使用带有实体管理器实现的 Hibernate 4.1.4，并且对它非常满意。当加载单个实体或一小组实体（10-50 + 子实体）时，我们获得了出色的性能，并且我们所有的连接都工作得很好并且是双向的。编辑/保存/删除轻而易举！

**加载 2500 个实体和相关数据以进行报告**

当我们尝试加载数百或数千个实体以及子实体时，我们遇到了问题。在一个示例中，我们有大约 2500 个基本实体以及两个一对一连接和三个一对多连接。这导致 2500 x 5 +1 查询。使用我们的数据库 (DB2) 执行大约需要 30 秒。

我们使用动态查询和实体管理器创建查询方法：

[http://docs.jboss.org/hibernate/orm/4.1/javadocs/](http://docs.jboss.org/hibernate/orm/4.1/javadocs/)

[http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)

**试图哄骗 Hibernate 使用 Joins**

我们的观察结果是，无论我们尝试什么，我们似乎都无法让休眠状态来执行大量子实体作为主查询的连接。当使用 find 方法和主键加载单个实体时，hibernate 使用连接，但当加载多个基本实体时，它不会。

我们已经尝试了具有相同结果的标准 api。

**在查询中检索多个实体的一些成功**

例子：

```
select a,b from table1 a left join table2 b 
```

我们在查询中手动连接并通过元组检索单个实体已经取得了部分成功，但这绕过了我们的注释实体模型并且不是首选方法（如果我们可以避免的话）。

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#objectstate-querying-executing](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#objectstate-querying-executing)

我们遇到的元组问题是它们与主实体分离（这似乎合乎逻辑，因为它们不是通过带注释的关系加载的）并且似乎没有办法重新附加它们。在手动添加实体列表中的所有一对多记录后，当 hibernate 命中列表的 get 方法时，它仍然尝试急切/延迟加载列表（尽管列表已经设置）。

**尝试的优化 - 数据集的预加载**

我们尝试的另一种优化技术是提前预加载数据集。在加载所有核心实体后，我们构建了一个 pk 列表并触发了一个查询以加载所有一对多数据集。但是当hibernate再次点击列表数据的getter时，它再次尝试急切/延迟加载列表，忽略会话中已经预加载的内容（可能需要启用缓存？）。

**建议？**

我们正朝着许多不同的方向前进，但收效甚微，希望有人能够为我们指明正确的道路（或指出一条新的道路！）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:34:03.083

看来我自己也想通了！两种策略解决了这个问题：

1.  查询中的 Join fetch 处理一对多的连接！当然你只能做一个 join fetch 因为 Hibernate 会抛出*cannot 同时 fetch multiple bag*异常。

    例子：

    ```
    LEFT OUTER JOIN FETCH t.table3 t3 
    ```

2.  对于其他连接 @Fetch(FetchMode.SUBSELECT) 成功了！

有效地将总查询从数千减少到几个。在一个示例中，选择了 188 个核心实体，总共执行了 12 个查询。额外的查询大多是一对一的查找，对总执行时间没有显着影响（平均 1-2 秒）。无论选择 188 条还是 1888 条记录，查询的总数都没有明显增加。

如果有人想了解更多信息，请随时与我联系或发表评论！:)

# java - 如何通过返回 highValue 消除错误？

> ID：11487683
> 
> 赞同：0
> 
> 时间：2012-07-14T21:59:32.493
> 
> 标签：java, arrays, integer, double, max

基本上我试图让双打与整数一起工作，也许我遗漏了一些明显的东西，但是，使用**返回的 highValue**代码，我收到一个错误，上面写着“可能丢失精度，需要：int，找到：double ”。就评论而言，这是我正在上的一门课。这是代码：

```
package pj701;

public class PJ70103 {

     public static void main(String[] args)
    {   //DO NOT CHANGE ANYTHING IN THE MAIN()
        double[] x = { 11.11, 66.66, 88.88, 33.33, 55.55 };
        double[] y = { 9, 6, 5, 8, 3, 4, 7, 4, 6, 3, 8, 5, 7, 2 };
        double[] z = { 123, 400, 765, 102, 345, 678, 234, 789 };

        int index = FindIndexHighest (x);

        System.out.printf( "%s%5d%s%8.2f\n", "Array x:  element index = " ,  index,
                "  element contents = ", x[index] );

        index = FindIndexHighest (y);
        System.out.printf( "%s%5d%s%8.2f\n", "Array y:  element index = " ,  index,
                "  element contents = ", y[index] );

        System.out.printf( "%s%5d%s%8.2f\n", "Array z:  element index = ",
                 FindIndexHighest (z),  "  element contents = ",
                 z[FindIndexHighest (z) ] );
}
 //======================================================
// put your method definition here - - ONE method
//======================================================

     public static int FindIndexHighest(double[] x)
     {
        double highValue = 0;
        for (int i = 1; i < x.length; i++)
        {
            if (x[i] > highValue)
                    {
                        highValue = x[i];
                    }
            else
            {
                highValue = highValue + 0;
            }

        }
        return highValue;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:02:39.380

您收到错误是因为您错误地实现了该方法。您正在返回最高*值*（双精度）而不是最高*索引*（整数）。您需要返回具有最高值的元素的索引。

您还应该知道，数组的第一个索引是索引 0，而*不是*索引 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:06:40.680

我认为您需要再次检查作业的要求。它不是被要求的值，而是这个值在传递数组中的索引。

至于编译器警告，这意味着当您尝试将 double 隐式转换为 int 时，您可能会丢失一些您拥有的信息。例如`double d = 3.5; int i = d;`将导致`i == 3`，因此小数点后的信息丢失。这就是编译器警告您的内容。要消除警告，请发出显式强制转换，例如`int i = (int)d;`在上面的示例中。

# c - c中的函数命名约定重载/重载

> ID：11487684
> 
> 赞同：4
> 
> 时间：2012-07-14T21:59:34.480
> 
> 标签：c, coding-style

可以说我有多个功能可以实现相同的目标。这方面的一个例子是为数据类型创建一个“构造函数”。

```
String new_String();
String new_String(const char *cstr);
String new_String(String s); 
```

显然这不能在 C 中完成，但是对于像这样的函数（以及函数重载有用的情况）是否有命名它们的约定或最佳实践？

像这样的东西？

```
String new_String();
String new_String_c(const char *cstr);
String new_String_s(String s); 
```

这对我来说感觉很尴尬，不容易阅读。还是这样的？

```
String new_String();
String new_String_from_cstr(const char *str);
String new_String_copy(String s); 
```

这让我想起了可怕的长 Java 名称，因为这很快就会变得荒谬。

```
int String_last_index_of_any_characters(String s, char *chars, int length); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:07:03.907

您可以定义一个带有 void * 初始化参数和枚举的“构造函数”：

```
enum StringCtor { SC_DEFAULT, SC_C_STR, SC_COPY };

String new_String(enum StringCtor type, const void *arg);

String s1 = new_String(SC_DEFAULT, 0);
String s2 = new_String(SC_C_STR, "hello");
String s3 = new_String(SC_COPY, &s2); 
```

您也可以选择使用 a`...`而不是 a `void *`。想法是一样的，但是`va_*`如果参数应该是字符串或副本，您可以使用宏来提取参数。

如果您只希望 API 具有单个构造函数的外观，但仍希望类型安全，则可以使用上述技术来创建实际的构造函数实现，并使用内联函数和预处理器技巧来赋予单个构造函数的外观，具有类型安全性。

```
String new_StringImpl(enum StringCtor type, const void *arg);

static inline String new_StringImplDefault () {
    return new_StringImpl(SC_DEFAULT, 0);
}
static inline String new_StringImplCstr (const char *s) {
    return new_StringImpl(SC_C_STR, s);
}
static inline String new_StringImplCopy (String *s) {
    return new_StringImpl(SC_COPY, s);
}

#define new_String_Paste(TYPE) new_String_ ## TYPE
#define new_String_SC_DEFAULT(ARG) new_StringImplDefault()
#define new_String_SC_C_STR(ARG) new_StringImplCstr(ARG)
#define new_String_SC_COPY(ARG) new_StringImplCopy(ARG)

#define new_String(TYPE, ...) new_String_Paste(TYPE)(__VA_ARGS__)

String s1 = new_String(SC_DEFAULT);
String s2 = new_String(SC_C_STR, "hello");
String s3 = new_String(SC_COPY, &s2); 
```

注意使用可变参数宏，`SC_DEFAULT`不再需要第二个参数。在足够的优化级别上，代码仅转换为对单个实现函数的调用，并具有编译时类型安全检查的好处。因此，以您编写更多代码为代价，您可以为库的用户提供单个构造函数 API 的外观，并具有多个构造函数的所有类型安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:10:30.327

没有标准约定，但如果一个或多或少相似的函数有很多重载，人们通常会参考[OpenGL 函数命名约定](http://en.wikibooks.org/wiki/OpenGL_Programming/Basics/NamingConventions)。

[@user315052 提供](https://stackoverflow.com/a/11487728/405725)的方法通常不是首选，因为类型安全问题（容易出错、难以更改等）和/或当您要传递多个参数时会带来不便。但有时出于不同的技术原因使用它（内核系统调用就是一个很好的例子）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:47:16.340

我不认为关于如何处理重载有一个完善的约定。您的第二种方法很好；使用常识使名称保持合理简短但仍易于理解。

在某些情况下，像您的第一种方法（或在 OpenGL 中）这样的系统命名约定可能是一个好主意，但它会使代码不那么自解释；任何阅读您的代码的人都需要先了解您的命名约定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T22:49:28.273

现代 C，又名 C11，可以做的比你想象的要多。`_Generic`它具有类型泛型宏，可以使用新表达式完成类似于 C++ 中的函数重载的事情。

作为库的*内部*接口，您仍然需要函数声明：

```
String new_String_from_cstr(const char *str);
String new_String_copy(String s); 
```

现在您的类型泛型宏可能如下所示：

```
#define new_String(X)                       \
_Generic((X),                               \
         const char*: new_String_from_cstr, \
         String: new_String_copy)(X) 
```

C11 还没有完全实现，但我认为最新的 clang 编译器已经有你需要的东西了。

对于其他编译器（gcc 和堂兄弟），您可以查看[P99](http://p99.gforge.inria.fr/p99-html/group__generic.html)，它模拟了接近于此的功能。P99 还具有处理[接收不同数量参数](http://p99.gforge.inria.fr/p99-html/group__preprocessor__conditionals.html)的宏的技巧。

如果您使用诸如用户界面之类的工具，那么函数本身的命名约定就变得不那么重要了。

# javascript - Firefox中的td高度不同

> ID：11487687
> 
> 赞同：0
> 
> 时间：2012-07-14T22:01:04.223
> 
> 标签：javascript, jquery, html, css, firefox

所以我做了一些搜索，发现这个问题是已知的，但似乎没有一个修复程序有效。

问题是 td 高度被拉伸，就像这张图片展示了 [http://i.stack.imgur.com/A5UYw.jpg](http://i.stack.imgur.com/A5UYw.jpg)

我试过以下

A. 将 td 高度设置为 1px 并允许内容对其进行拉伸。

B.添加样式并将高度设置为 1 px

C.在td内的内容上添加div标签并设置div标签高度和溢出隐藏

D. 为 td 设置样式以隐藏溢出

E. 用 display: block 为 td 设置样式

我认为问题可能是 iframe 设置为根据 iframe 中的内容自动调整大小。

这里似乎没有一个对页面有帮助[http://soldbybillcox.com/listings.html](http://soldbybillcox.com/listings.html)

我知道网站应该用 div 制作，而使用表格已经过时了！

对此问题的任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:24:35.343

如果您**将此添加**到您希望保持领先的每个 td 中，它将有所帮助。

```
<td colspan="2" rowspan="5" style="vertical-align:top;"> 
```

最终，使用 div 会让你的生活变得更加轻松。干净多了！

此外，您是一名房地产经纪人，因此验证您的网站非常重要（出于 SEO 原因），因此我建议您在所有图片中添加 alt 标签 (5)。这也将帮助您的搜索引擎结果本身[看这里](http://www.w3schools.com/tags/att_img_alt.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:23:14.680

您可以将以下规则添加到您的 CSS（这将影响所有表格单元格）

```
#Table_01 td {
    vertical-align: top
} 
```

或添加

```
style="vertical-align: top" 
```

仅作为这一表格单元格的属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T06:50:05.560

它不是真正的修复，但我最终只是使用`<br/>`并粘贴了顶行中的所有图像并对齐到顶部。它看起来不错，但仍然不知道发生了什么。

# php - 从数组创建字符串？

> ID：11487689
> 
> 赞同：3
> 
> 时间：2012-07-14T22:02:12.380
> 
> 标签：php

我记得有一种简单的方法，无需 for each 即可将数组重构为字符串。

例如：

```
1 > my
2 > name
3 > is
4 > sam 
```

进入 `$string = "my name is sam"`（中间有空格）。

这是如何用 php 完成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T22:04:45.430

你只需要内[爆](http://php.net/manual/en/function.implode.php)字符串：

```
$array = array("my", "name", "is", "sam");
$string = implode(' ', $array);
echo $string; // "my name is sam" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T22:04:14.170

尝试这个：

```
<?php

$array = array('lastname', 'email', 'phone');
$comma_separated = implode(",", $array);

print $comma_separated; // lastname,email,phone

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T22:05:11.167

您应该使用内爆方法。您可以通过以下链接了解更多信息：http: [//php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)。

您的代码将类似于：

```
$string = implode(" ", $array); 
```

# iphone - 如何将动作 UISlider 链接到 UIScrollView

> ID：11487690
> 
> 赞同：0
> 
> 时间：2012-07-14T22:02:16.570
> 
> 标签：iphone, ipad

我有两个视图`UISlider`并`UIScrollView`添加到`UIView` 我在`UIScrollView`2*10 矩阵上以网格格式显示图像。我已经定制了我的 UISlider 并添加到 UIView。现在，当我更改 UISlider 值时，滚动视图会自动推送。任何人都可以为我的实施提供建议。

@提前致谢

问候基兰库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:22:51.770

试试`NSNotification`。先给scrollView添加一个通知观察者，当UISlider发生变化时，发布通知让scrollView自动滚动。

# jquery - 将 css 添加到 iframe 内容的 Jquery 问题

> ID：11487695
> 
> 赞同：2
> 
> 时间：2012-07-14T22:02:53.827
> 
> 标签：jquery, html, css, iframe

我发现了多篇关于如何将 css 添加到 iframe 内容的帖子，这是我的代码：

```
$(function() {
    $('iframe').addClass('bro'); //does work
    $('iframe').contents().find('html').addClass('broz'); //doesn't work
    $('iframe').contents().find('.side-section').addClass('brozzz'); //doesn't work
}); 
```

第一个按预期工作，但是所有其他标识符都不起作用。我只是想测试他们为什么不工作，这不是我正在做的实际工作。

这是 iframe 代码：

```
<iframe src="http://www.dropcards.com/download/profilewidget/?ArtistID=17121" width="400" height="230" scrolling="no" frameborder="0" allowtransparency="true" ></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:07:33.340

如果页面与包含 iframe 的域不在同一个域中，则不能在 iframe 中修改页面的 dom。这个想法是为了防止 XSS，cross-side-scripting。

您可以在此处找到更多信息[同源政策](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

在第一种情况下，您正在修改页面的 dom，在接下来的 2 种情况下，这是不可能的，因为您无权访问 iframe 中包含的页面的 dom

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:08:38.137

如果 iframe 的内容来自另一个域，则不允许您操作它们。

# mysql - mysql 在一个命令中选择 id 并计数？

> ID：11487697
> 
> 赞同：0
> 
> 时间：2012-07-14T22:02:59.830
> 
> 标签：mysql

使用 Mysql 我如何将这两个命令合并为一个？

```
select id from User where name='name'
select count(*) from Msg where user_id=@id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:06:30.010

您可以加入表格：

```
SELECT COUNT(*)
FROM User a
INNER JOIN Msg b ON a.id = b.user_id
WHERE a.name = 'name' 
```

# php - 无法使用php连接到mysql

> ID：11487698
> 
> 赞同：-1
> 
> 时间：2012-07-14T22:03:02.763
> 
> 标签：php, mysql, connect

运行此代码时

```
<?php
$con = mysql_connect("localhost","Grant","grant"); 
if (!$con)
{
die('Could not connect: ' . mysq_error());
}

if (mysql_query("CREATE DATATBASE my_db",$con))
{
echo "Database Created";
}
else 
{
echo "Error creating database: " . mysqlerror();
}
mysql_close($con);
?> 
```

它打印

> 无法连接：没有这样的文件或目录

我不确定我做错了什么......我在 Mac OSX 10.7.4 上的用户帐户下本地运行它

编辑：感谢捕捉非初始化，但它仍然没有运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:05:14.033

你没有分配 $con

也许是这样：

```
$con = mysql_connect("localhost","Grant","grant"); 
```

根据[http://www.w3schools.com/php/func_mysql_connect.asp上的示例代码](http://www.w3schools.com/php/func_mysql_connect.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:05:38.403

`(!$con)`无论连接状态如何，您都在测试未初始化的变量并返回 true

```
$con = mysql_connect("localhost","Grant","grant"); 
```

# c# - 后台工作人员不忙

> ID：11487702
> 
> 赞同：2
> 
> 时间：2012-07-14T22:03:17.663
> 
> 标签：c#, backgroundworker

对于一个有点生硬的问题，我很抱歉，可能有几十个答案，但我什至不知道要寻找什么......

我正在使用后台工作人员，出于某种原因，它似乎并不忙。在尝试启动工作程序之前，我正在检查它是否很忙。

我里面的代码如下：

```
 void ClientMsg_BgWrkrTimer_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker ClientMsg_BgWrkrTimer = sender as BackgroundWorker;
        string current = msgqueue.Last().Key;
        if (msgqueue.Last().Value.t_Type == 0 || msgqueue.Last().Value.t_Type == 1)
        {
            TimedMsgIcon.Enabled = true;
            foreach (KeyValuePair<string, UUID> g in Msgqueue.Last().Value.t_ngroups)
            {
                GroupNotice ntc = new GroupNotice();
                ntc.Subject = Msgqueue.Last().Value.t_nmsg;
                ntc.Message = Msgqueue.Last().Value.t_nmsg;
                ntc.OwnerID = Client.Self.AgentID;
                UUID key = UUID.Zero;
                if (UUID.TryParse(Msgqueue.Last().Value.t_attach.ToString(), out key))
                {
                    ntc.AttachmentID = key;
                }
                Client.Self.InstantMessage(Client.Self.Name, g.Value, ntc.Subject + "|" 
                    + ntc.Message, UUID.Zero, InstantMessageDialog.GroupNotice,
                    InstantMessageOnline.Online, Vector3.Zero, UUID.Zero,
                    ntc.SerializeAttachment());
                Thread.Sleep(2000);
            }
        }
    } 
```

我已经缩小了罪魁祸首是这个：

```
 Client.Self.InstantMessage(Client.Self.Name, g.Value, ntc.Subject + "|" 
        + ntc.Message, UUID.Zero, InstantMessageDialog.GroupNotice,
        InstantMessageOnline.Online, Vector3.Zero, UUID.Zero,
        ntc.SerializeAttachment()); 
```

最有可能是序列化，就是这个（来自我正在使用的库）：

```
 public struct GroupNotice
    {
        /// <summary></summary>
        public string Subject;
        /// <summary></summary>
        public string Message;
        /// <summary></summary>
        public UUID AttachmentID;
        /// <summary></summary>
        public UUID OwnerID;

        /// <summary>
        /// 
        /// </summary>
        /// <returns></returns>
        public byte[] SerializeAttachment()
        {
            if (OwnerID == UUID.Zero || AttachmentID == UUID.Zero)
                return Utils.EmptyBytes;

            OpenMetaverse.StructuredData.OSDMap att = new OpenMetaverse.StructuredData.OSDMap();
            att.Add("item_id", OpenMetaverse.StructuredData.OSD.FromUUID(AttachmentID));
            att.Add("owner_id", OpenMetaverse.StructuredData.OSD.FromUUID(OwnerID));

            return OpenMetaverse.StructuredData.OSDParser.SerializeLLSDXmlBytes(att);
        }
    } 
```

问题是，为什么这会阻止我的工人忙碌？我一拿出来，它就像一个魅力。不过我需要它，所以我希望任何人都可以帮助我提出导致问题的原因，以及如何在工作人员中正确使用它。

编辑：

我很抱歉错过了“不工作”的关键点..

所以

通过“不工作”，我的意思是 Client.Self.InstantMessage() 不会启动，并且后台工作人员不会忙碌。如前所述，我在进入工人之前先测试工人是否忙：

```
 void MsgTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        if (!ClientSpam_BgWrkrTimer.IsBusy)
        {
            Messagebox.Show("Going into BgWrkr!");
            ClientSpam_BgWrkrTimer.RunWorkerAsync();
        }
    } 
```

使用 Client.Self.InstantMessage() 时，消息框会在每个计时器滴答声中不断弹出，并且工作人员永远不会结束。但是，如果我删除它，工人就完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:49:49.127

我注意到`Thread.Sleep(2000)`您的员工中有一份声明。这将导致 worker 的`.IsBusy`属性在大约 2 秒内为真，加上在`Sleep`.

您还提到，当调用到时`Client.Self.InstantMessage(...)`，工作人员永远不会显得忙。对我来说，这似乎`Thread.Sleep`永远不会执行调用，这意味着该`Client.Self.InstantMessage`方法很可能正在引发异常。

尝试将调用包装`Client.Self.InstantMessage`在一个`try/catch`块中以查看是否引发了异常。在调试器中运行时，您将能够在 Visual Studio 输出窗口中观察到该消息。

```
 ...

        try
        {    
            Client.Self.InstantMessage(Client.Self.Name, g.Value, ntc.Subject + "|"  
                + ntc.Message, UUID.Zero, InstantMessageDialog.GroupNotice, 
                InstantMessageOnline.Online, Vector3.Zero, UUID.Zero, 
                ntc.SerializeAttachment()); 
        } 
        catch(Exception e)
        {
            Debug.WriteLine("Exception while calling InstantMessage: {0}", e.ToString());
        }

        Thread.Sleep(2000);

        ... 
```

您还可以检查`RunWorkerCompletedEventArgs.Error`属性（来自`BackgroundWorker.RunWorkerCompleted`事件）以查看工作人员是否引发了异常。

一旦您知道异常是什么，您将能够更好地诊断问题的原因。

# xml - 如何使 xsl 标记化工作

> ID：11487704
> 
> 赞同：13
> 
> 时间：2012-07-14T22:04:08.490
> 
> 标签：xml, xslt, xslt-1.0

我有一个巨大的 xsl 文件，但我使用“tokenize”解析逗号分隔字符串的部分抛出错误。为简单起见，我将其分解为仅测试标记化部分，似乎无法取得任何进展。我不断收到以下错误：

> 预期的表达。标记化(-->[<--text],',')

我尝试使用在其他帖子中共享的一些示例 xsl，但从未设法让它工作。我很难理解为什么下面的 xsl 代码无效。这似乎不是很简单，但我想我错过了一些简单的东西。任何帮助我朝着正确的方向前进将不胜感激。

XSL：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/root">
<xsl:for-each select="tokenize([text],',')"/>
<items>
<item>
<xsl:value-of select="."/>
</item>
</items>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

XML:

```
<?xml-stylesheet type="text/xsl" href="simple.xsl"?>
<root>
<text>Item1, Item2, Item3</text>
</root> 
```

我期待 XML 输出如下：

```
<items>
<item>Item1</item>
<item>Item2</item>
<item>Item3</item>
</items> 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T23:10:41.343

我看到了 4 个错误：

1.  您正在使用`tokenize()`1.0 样式表。您需要将版本更改为 2.0 并使用 2.0 处理器。如果您使用网络浏览器进行转换，根据`xml-stylesheet`处理指令，您可能没有使用 2.0 处理器。

2.  您的 tokenize ( `[text]`) 的第一个参数无效。只需使用`text`.

3.  你过早地关闭了你的`xsl:for-each`.

4.  您正在`<items>`为每个项目输出一个。把`<items>`外面的`xsl:for-each`。

更改示例：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/root">
        <items>
            <xsl:for-each select="tokenize(text,',')">
                <item>
                    <xsl:value-of select="."/>
                </item>
            </xsl:for-each>
        </items>
    </xsl:template>
</xsl:stylesheet> 
```

要真正使用 2.0 处理器获得所需的输出，我还建议使用`xsl:output`and `normalize-space()`：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>

    <xsl:template match="/root">
        <items>
            <xsl:for-each select="tokenize(text,',')">
                <item>
                    <xsl:value-of select="normalize-space(.)"/>
                </item>
            </xsl:for-each>
        </items>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T15:21:28.883

正如 DevNull 所述，tokenize() 是一个 XSLT 2.0 函数。但是，如果您的处理器支持 EXSLT，则可以使用[str:tokenize() 函数](http://exslt.org/str/functions/tokenize/index.html)。否则，您将需要用户递归来拆分逗号分隔的值，如下所示...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="/">
 <items>
   <xsl:apply-templates select="root/text"/>
 </items>
</xsl:template>

<xsl:template match="text">
 <xsl:call-template name="tokenize"> 
   <xsl:with-param name="csv" select="." /> 
 </xsl:call-template>    
</xsl:template>

<xsl:template name="tokenize">
 <xsl:param name="csv" />
  <xsl:variable name="first-item" select="normalize-space( 
    substring-before( concat( $csv, ','), ','))" /> 
 <xsl:if test="$first-item">
  <item>
   <xsl:value-of select="$first-item" /> 
  </item>  
  <xsl:call-template name="tokenize"> 
   <xsl:with-param name="csv" select="substring-after($csv,',')" /> 
  </xsl:call-template>    
 </xsl:if>  
</xsl:template>

</xsl:stylesheet> 
```

# c# - 如何在剃刀视图中将@model 指令更改为不同的模型？

> ID：11487707
> 
> 赞同：7
> 
> 时间：2012-07-14T22:04:37.240
> 
> 标签：c#, asp.net-mvc-3, razor, model

我有一个控制器，它创建一个模型并调用一个将模型作为参数传递的视图。在视图中有一个@model 指令指定模型的类型。我想重用相同的视图，但从控制器传递不同的模型。是否可以在视图中动态（或有条件地）更改@model 指令？

例如，在我的控制器操作中：

```
var contactsModel = db.GetContacts();
var companiesModel = db.GetCompanies();
return (someCondition)? View(contactsModel):View(companiesModel); 
```

那么如何在 View 指令中定义 @model 来满足两个模型呢？我希望相同的视图根据传递的模型类型来呈现信息。

谢谢你。

* * *

**更新：**

谢谢，但我只需要对不同模型使用一个通用视图。

这是可能的，这是可以做到的。

在我定义的视图中：

```
@model IEnumerable<MvcApplication1.Models.IBaseInterface> 
```

在我定义的模型类中：

```
public interface IBaseInterface { }

public class Contact: IBaseInterface {}

public class Company: IBaseInterface {} 
```

然后，在我使用的视图中：

```
@if (Model is List<Contact>) {
    @foreach (var item in (List<Contact>)Model)
        { // Here item has type Contact }
}

@if (Model is List<Company>) {
    @foreach (var item in (List<Company>)Model)
        { // Here item has type Company }
} 
```

完美运行:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:06:06.390

> 是否可以在视图中动态（或有条件地）更改@model 指令？

不。

如果您需要传递不同的模型，这意味着您需要不同的视图：

```
return (someCondition) 
    ? View("Contacts", contactsModel) 
    : View("Companies", companiesModel);\ 
```

ASP.NET MVC 中的一个基本规则如下：`a view model per view`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:33:40.497

简单而好的解决方案是使用视图模型并将视图绑定到该视图模型，然后从控制器操作中，您可以将模型转换为视图模型并将其传递给视图。

如果您是动力学爱好者并且两个模型的属性相同，则另一个选项是您可以将视图绑定到`dynamic`模型。

# ruby-on-rails - 如何将任意（非模型属性）值传递给 rails 动作？

> ID：11487709
> 
> 赞同：14
> 
> 时间：2012-07-14T22:04:47.437
> 
> 标签：ruby-on-rails, form-for

我在用户之间有一个单向关系模型（用户有很多关系），它包含两个给定用户的 id 以及用户 a 对用户 b 的昵称。我想使用一个表单来允许用户传递另一个用户的电子邮件地址和昵称。如果存在具有该电子邮件的用户，则在用户之间创建关系。如果没有用户匹配，则使用该电子邮件创建一个新的“幻影”用户，然后建立关系。

我对 Rails 比较陌生，首先天真地尝试使用基本的：

```
= form_for @relationship do |f|
    = f.label :email
    = f.text_field :email
    = f.label :nickname, "Nickname"
    = f.text_field :nickname
    = f.submit "Submit", class: "btn btn-large btn-primary" 
```

这会失败，因为关系模型不包含电子邮件属性。然后我尝试了以下方法，认为它可能会起作用，因为它没有直接引用关系模型。

```
= form_tag :controller => "relationships", :action => "create" do
    = label :email        
    = text_field :email
    = label :nickname, "Nickname"
    = text_field :nickname
    = submit "Submit", class: "btn btn-large btn-primary" 
```

但这会引发错误“参数数量错误（1 对 2）”

我可以在关系模型中添加一个电子邮件字段，但除了我将使用它来查找所需用户之外，不需要它。我的计划是使用传递给关系控制器中创建操作的电子邮件和昵称值来创建关系或创建新用户，然后根据情况创建关系。那么如何将任意值传递给控制器​​操作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T22:14:57.927

使用第一种形式，并`attr_accessor`在您的模型中创建 email 属性。

这基本上是一个临时变量，您可以从表单之类的东西中派生它，但它不会保存到数据库中。

```
class Relationship < ActiveRecord::Base # <- Assuming that's the name of your Relationship model

  attr_accessor :email 
```

# android - 从edittext中提取文本并将其用于android通知

> ID：11487713
> 
> 赞同：0
> 
> 时间：2012-07-14T22:05:13.190
> 
> 标签：android, string, notifications, android-edittext

我正在尝试为 android 制作一个简单的应用程序，允许用户制作自定义通知提醒。我对编程相当陌生，并且无法从 edittext 小部件中提取文本并在通知中使用它们。我尝试了一些人们为回答类似问题而发布的方法，但它们没有奏效。请查看我的代码并尝试提供帮助

```
public class MainActivity extends Activity {
private static final int NOTIFICATION_ID = 1;
Button   mButton;
EditText mTitle;
EditText mContent;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mButton = (Button)findViewById(R.id.button1);
    mTitle   = (EditText)findViewById(R.id.editTitle);
    mContent   = (EditText)findViewById(R.id.editContent);

    int icon = R.drawable.ic_launcher;
    CharSequence tickerText = "Reminder Created";
    long when = System.currentTimeMillis();
    Context context = getApplicationContext();
    CharSequence contentTitle = MainActivity.this.mTitle.getText().toString();
    CharSequence contentText = MainActivity.this.mContent.getText().toString();
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    final Notification notification = new Notification(icon, tickerText, when);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    String ns = Context.NOTIFICATION_SERVICE;
    final NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

    Button statusbarnotify = (Button) findViewById(R.id.button1);
    statusbarnotify.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {               
            mNotificationManager.notify(NOTIFICATION_ID, notification);

        }
    });   
}    

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:26:16.717

据我所知，您的代码没有问题，但问题是您在`onCreate`.

`onCreate`顾名思义，该方法仅在创建活动时调用。由于在创建时没有输入，因此您的`contentTitle`和`contentText`将是空字符串，并且通知不会按预期显示。

要解决此问题，您需要从 edittext 小部件中获取文本并在`onClick`您放置的按钮的方法内部创建通知。换句话说，你需要携带你创造的所有这些东西

```
int icon = R.drawable.ic_launcher;
CharSequence tickerText = "Reminder Created";
long when = System.currentTimeMillis();
Context context = getApplicationContext();
CharSequence contentTitle = mTitle.getText().toString();
CharSequence contentText = mContent.getText().toString();
Intent notificationIntent = new Intent(this, MainActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

final Notification notification = new Notification(icon, tickerText, when);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

String ns = Context.NOTIFICATION_SERVICE;
final NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns); 
```

`onClick`在通知通知管理器之前覆盖的内部方法。

希望有帮助！

# ruby - 如何更新文本文件中的单个匹配行？

> ID：11487715
> 
> 赞同：4
> 
> 时间：2012-07-14T22:05:14.020
> 
> 标签：ruby, regex, file-io

我正在尝试编写一个脚本，将一些数据块存储在平面 .txt 文件中*（它们是小文件，少于 100 行）*。

无论如何，实际上，我正在尝试用该行的新值更新单个匹配行，同时将文件中的所有其他内容单独保留，但无法完全弄清楚如何仅修改 1 行而不是替换整个文件。

到目前为止，这是我的代码：

```
# get file contents as array.
array_of_lines = File.open( "textfile.txt", "r" ).readlines.map( &:chomp )

line_start = "123456:"    # unique identifier
new_string = "somestring" # a new string to be put after the line_start indentifier.

# cycle through array finding the one to be updated/replaced with a new line.
# the line we're looking for is in format 123456:some old value

# delete the line matching the line_start key
array_of_lines.delete_if( |line| line_start =~ line )

# write new string into the array.
array_of_lines.push( "#{line_start}:#{new_string}" )

# write array contents back to file, replacing all previous content in the process
File.open( "textfile.txt", "w" ) do |f|
    array_of_lines.each do |line|
        f.puts line
    end
end 
```

内容将`textfile.txt`始终由以下格式组成：

> unique_id:string_of_text

我可以在其中匹配`unique_id`脚本生成的使用应用程序数据，以确定要更新的文本行。

有没有更好的方法来做我想做的事情？

将整个文件读入内存似乎有点低效，循环遍历所有内容只是为了更新该文件中的一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:46:18.267

除非您正在写入的新数据与旧数据的长度相同，否则您无法做您想做的事情。

如果长度不同，则需要移动修改后文件中的所有字节。移动文件数据总是涉及重写所有内容（从修改点开始）。在这种情况下，您不妨重写整个文件，因为您的文件非常小。

如果替换数据的长度相同，则可以使用[`IO.seek`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-seek)将文件指针指向适当的位置，然后只需使用`write`输入替换数据即可。

如果您仍然不想重写整个文件，而只是移动数据（如果替换长度不同），那么您需要到`seek`正确的位置，然后`write`从该点开始到文件末尾。如果替换更短，您还需要调用[`File.truncate`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-truncate)以调整文件大小。

# wordpress - 管理 Wordpress 插件的自定义代码修改

> ID：11487722
> 
> 赞同：1
> 
> 时间：2012-07-14T22:06:20.323
> 
> 标签：wordpress, plugins, version-control

我对流行的现有插件进行的自定义修改的数量已经增长到难以管理它们的地步。我保留了一个列表，列出了我在哪些文件的哪些行中进行了哪些插入或编辑，但这有点麻烦。

当我升级我的插件并且它覆盖了我需要重新应用的更改时，问题就出现了。

有没有人对这种代码合并问题有一种自动化的或至少是托管的方法？

我觉得这里有一个 GIT 解决方案，但我不清楚它是如何设置的。

# c++ - 如何简化这个 typedef 不同的 switch 语句？

> ID：11487723
> 
> 赞同：2
> 
> 时间：2012-07-14T22:06:25.060
> 
> 标签：c++, coding-style, switch-statement

我正在对 char 执行 switch 语句，并且通常唯一的区别是 和 之间的唯一区别`'A'`是`'a'`我在特定结构中具有的某些静态常量和随机数字常量。这是一个例子：

```
switch(someChar)
{
case 'A':
{
    typedef structWithConstants<caseA, UPCASE> constantsT;
    someStruct s;
    s.bla = bla;
    s.foo = getfoo7(rat+constantsT::rat);
    s.other = getOther10(other + constantsT::other);

    someFunctionBar(&s);
}
break;
case 'a':
{
    typedef structWithConstants<caseA, LOWCASE> constantsT;
    someStruct s;
    s.bla = bla;
    s.foo = getfoo3(rat+constantsT::rat);
    s.other = getOther10(other + constantsT::other);

    someFunctionBar(&s);
}
break;
} 
```

所以在上面，从字面上看，在代码方面唯一的区别是使用的常量 T 和 7 切换到三......有没有办法简化上面的重复代码？也许会破坏这两种情况之间的一些共同行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:35:28.247

可以模板化一个函数，为那些 'foo'-s 声明一个类型，然后将套管模板参数传递给某个调用函数

```
typedef int getfootype(char c);

template<getfootype f,char CASING>
void  handle(char c)
{
        typedef structWithConstants<caseA, CASING> constantsT;
        someStruct s;
        s.bla = bla;
        s.foo = f(rat+constantsT::rat);
        s.other = getOther10(other + constantsT::other);

        someFunctionBar(&s);
}

switch(someChar)
{
    case 'A':
          handle<getfoo7,UPCASE>(someChar);
       break;
    case 'a':
          handle<getfoo3,LOWCASE>(someChar);
       break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:12:00.957

类似的东西：

```
switch(someChar)
{
case 'A':
case 'a':
{
    typedef structWithConstants<caseA, UPCASE> constantsT_UP;
    typedef structWithConstants<caseA, LOWCASE> constantsT_LO;
    someStruct s;
    s.bla = bla;
    if (someChar == 'a')
      s.foo = getfoo3(rat+constantsT_LO::rat);
     else
    s.foo = getfoo7(rat+constantsT_UP::rat);
    s.other = getOther10(other + (someChar == 'a') ? constantsT_LO::other : constantsT_UP::other);

    someFunctionBar(&s);
}
break;
} 
```

但它看起来很复杂......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T22:15:25.607

将重复部分放在 之外`switch`：

```
someStruct s;
s.bla = bla;

switch(someChar)
{
case 'A':
    typedef structWithConstants<caseA, UPCASE> constantsT;
    s.foo = getfoo7(rat+constantsT::rat);
break;
case 'a':
    typedef structWithConstants<caseA, LOWCASE> constantsT;    
    s.foo = getfoo3(rat+constantsT::rat);
break;
}

s.other = getOther10(other + constantsT::other);
someFunctionBar(&s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T22:12:56.247

```
 switch(someChar)
    {
    case 'A': case 'a' :
    {
        typedef structWithConstants<caseA, UPCASE> constantsT;
        someStruct s;
        s.bla = bla;
        if(someChar == 'A')
            s.foo = getfoo7(rat+constantsT::rat);
        else if(someChar == 'a')
            s.other = getOther10(other + constantsT::other);

        someFunctionBar(&s);

        s.foo = getfoo3(rat+constantsT::rat);
        break;
    } 
```

# php - 从 div 中删除边框使其隐藏

> ID：11487724
> 
> 赞同：1
> 
> 时间：2012-07-14T22:06:26.000
> 
> 标签：php, css, html

所以这里发生了一些奇怪的事情……我的 div 上有边界进行测试，所以我可以看到它们从哪里开始和结束。一旦我删除了边框，我的 div 内容之一就会消失，我不明白为什么......

这是我的主要 html 文件

```
<!DOCTYPE html>
<html>
    <head>
        <title>EasyZag Admin</title>

        <!-- add the jQuery script -->
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <!-- add the jQWidgets framework -->
        <script type="text/javascript" src="jqwidgets/jqxcore.js"></script>
        <script type="text/javascript" src="jqwidgets/jqxcore.js"></script>
        <script type="text/javascript" src="jqwidgets/jqxmenu.js"></script>
        <script type="text/javascript" src="jqwidgets/jqxcheckbox.js"></script>
        <!-- add the css themes -->
        <link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />
        <link href="stylesheets/basic.css" media="all" rel="stylesheet" type="text/css" />
        <link href="jqwidgets/styles/jqx.darkblue.css" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <div id='container'> 
            <div id="header">
                <div id='logo'>
                <img src="ezag_logo.jpeg" alt="eZag">
                </div>
                <script type="text/javascript">
                    $(document).ready(function () {
                        // Create a jqxMenu and set its width and height.
                        $("#jqxmenu").jqxMenu({ height: 30 , theme: 'darkblue'});
                        $("#main").height($('#container').height() - $('#header').height() - $('#footer').height() - 10);
                    });
                    $(window).resize(function() {
                        $("#main").height($('#container').height() - $('#header ').height() - $('#footer').height() - 10);
                    });
                </script>

                <div id='jqxmenu'>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li>Clients
                            <ul>
                                <li><a href="#">Add Client</a></li>
                                <li><a href="#">All Clients</a></li>
                                <li><a href="#">Search</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Logout</a></li>
                    </ul>
                </div>
            </div><br />

            <div id="main">
                <?php
                    if(isset($_GET['section'])) {
                        //include which section
                    } else {
                        include "default.php";
                        echo "hello";
                    }
                ?>
            </div>

            <div id="footer">
                <center>Copyright 2012, EasyZag</center>
            </div>
        </div>
    </body>
</html> 
```

这是我的 CSS 文件

```
body, html { height: 99%; width: 99%;}
div {position: relative; border: 1px dotted;}   

#container {width: 100%; height: 100%; background-color:#E8F4FF; border-radius:25px; border: solid; border-color: } 
#header { float: left; height: 80px; width: 100%; }
#logo {float: left; width: 225px; height: 70px; padding-left: 10px; padding-top: 10px;}
#jqxmenu {float: left; position: relative; top: 40px; left: 0px; }
#main {position: width: 100%; height: 50%; overflow: auto;}
#footer {float: left; width: 100%; position: absolute; bottom: 0;} 
```

最后所有的 php 包括如下：

```
Welcome to EasyZag Admin!<br />
<br />
Goals:<br />
<br /> 
```

有谁知道为什么只是改变 div {position: relative; 边框：1px dotted;} 到 div {position: relative;}

在我的css文件中会完全删除包含php的div吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:08:03.143

尝试添加具有透明度的颜色边框。

```
border: 1px dashed transparent; 
```

由于您使用了 1px 的边框，这意味着您在垂直和水平方向上有 2 个额外的像素。换句话说，如果您删除边框。如果您正在使用，`width = something`那么您的元素可能不会放置在过去的位置。

使用类似`width: auto;`和高度的东西也会使元素使用新的 2 像素。

使用透明颜色可能不是一个好主意，但它可以确保您的边框存在并且您仍然像以前一样使用那 2 个额外的像素......但它们是透明的。如果您使用背景颜色。重构你的css可能会更好。

另一方面，我可能会建议使用背景而不是边框​​来检查您的元素在哪里。

如果您设置不同的颜色，将很容易检查您的布局，背景颜色不会影响元素的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:12:34.530

#main 中有一个错误 - 您没有包含 position 属性的值..

# c# - 与模运算符相反？

> ID：11487731
> 
> 赞同：15
> 
> 时间：2012-07-14T22:07:20.750
> 
> 标签：c#, integer-division

我记得在java中，模运算符可以反转，因此您可以反转它而不是查看运算的余数，因此它会告诉您多次除以一个数字：

```
Console.WriteLine(1000 % 90);
Console.WriteLine(100 % 90);
Console.WriteLine(81 % 80);
Console.WriteLine(1 % 1); 
```

**输出：**

*   10
*   10
*   1
*   0

*示例由 DotNetPerls 提供*

我不想看到其余部分，而是想看看“80”进入“81”的次数。应为 1，余数为 1。

c# 模运算符是否支持这种行为？如果没有，如何实现所需的行为？请使用最少的代码...：D

编辑：

我想答案将很简单，例如将两个数字相除并去掉“-.#”值并保持整数“1.-”。我知道这一点，但必须有一种更巧妙的方式来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-14T22:08:20.983

您要查找的内容称为*整数除法*。它根本与模运算符无关。

要执行整数除法，只需确保两个操作数都不是浮点数/双精度数。

例子：

```
int one = 81 / 80; 
```

例如，这会给您`1`同时`double notOne = 81.0 / 80`给您`1.0125`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-14T22:17:47.943

您已经得到了答案，如果将其分配给整数，则无需处理小数。

在您的评论中，您说您正在使用小数，那么[Math.Floor](http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx)是一种可能性。IE：

```
double d = Math.Floor(81.0 / 80.0); // 1.0000.... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-04T17:51:33.337

在 OpenOffice CALC 中有 QUOTIENT，它返回除法的整数部分 ᎓

```
 MOD(17;4) returns 1, while
 QUOTIENT(17;4) returns 4.

      MOD(33;9) returns 6, while
 QUOTIENT(33;9) returns 3. 
```

我一直认为 QUOTIENT 是 MOD 的对应物——也许这就是 OP 所说的 MOD 的“对立面”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T22:18:29.797

```
Console.WriteLine(1000 % 90); // modulo = 10
Console.WriteLine(1000 / 90); // integer division = 11
Console.WriteLine(1000 / 90.0); // floating point division = 11.1111111111111 
```

所以我有点明白你的问题，即使其他人都在你的案子上。为了平衡整数除法，您需要使用模运算符来处理余数：`((1000 / 90) * 90) + (1000 % 90) == 1000`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-17T09:07:29.017

幸运的是，您提出的问题与模数的倒数不同。理论上，模的倒数可以给你一个未知的分子或除数。

例如，假设您有`n % d = r`. 你知道 r 和 d，而 n 是未知的。模函数表示为`n % d = n - d*INT(n/d)`。所以`r = n - d*INT(n/d)`。我想不出如何直接解决这个问题，因为当你不知道 n 时，你需要知道 INT(n/d)。

# javascript - 将字符串传递给对象 javascript

> ID：11487734
> 
> 赞同：0
> 
> 时间：2012-07-14T22:07:52.080
> 
> 标签：javascript

我得到了`id`一个`li`元素，并希望使用该名称来访问对象的该部分。我试图添加`var selectionId`其中包含我想要的部分的名称，例如`cars`但我得到一个错误。有办法吗？

谢谢。

```
$(document).ready(function() {

    $(".markerSelection").click(function() {
      var selectionId = $(this).attr("id");
      drop(selectionId);
    }); 
});

var markers = {
    shopping : [
    new google.maps.LatLng(52.26183, -7.11339),
    new google.maps.LatLng(52.26134, -7.11226),
    new google.maps.LatLng(52.26067, -7.11181),
    new google.maps.LatLng(52.26003, -7.11033)],
    cars : [
    new google.maps.LatLng(52.26183, -7.11339),
    new google.maps.LatLng(52.26134, -7.11226),
    new google.maps.LatLng(52.26067, -7.11181),
    new google.maps.LatLng(52.26003, -7.11033)] 
};

var iterator = 0; 

function drop(selectionId) {
    clearOverlays();
    for (var i = 0; i < markers.selectionId.length; i++) {
        setTimeout(function() {
            addMarker();
        }, i * 200);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:10:42.330

如果您尝试通过变量键访问对象属性，则需要使用数组表示法：

```
... markers[selectionId].length ... 
```

`markers.selectionId`失败，因为它等同于`markers["selectionId"]`.

# php - 警告：解析 SimpleXML 时存在非法偏移类型

> ID：11487740
> 
> 赞同：0
> 
> 时间：2012-07-14T22:08:26.573
> 
> 标签：php, simplexml

```
$defindexes = get_tf2_allitem_node($backpack,"defindex");

$itemmap = array();
foreach ($defindexes as $items)
{
    $imageURL = find_tf2_allitem_node_by_defindex($schema,$items,"image_url");
    $itemmap[$items] = $imageURL;
} 
```

本质上，我正在尝试解析模式文档和 simpleXML 中的背包文档。$defindexes 获取给定 $backpack 对象中项目的所有索引。然后我试图在背包中创建项目的 $itemmap => 这些项目的 image_url，我正在使用 find_tf2_allitem_node_by_defindex() 对其进行轮询，并将 $schema 作为参数提供给它，并遍历每个索引。我认为我将 $items 传递给函数的方式有问题，因为没有返回值。我猜这与 $defindexes 是一个对象数组有关吗？

这有什么问题？

示例 $defindexes 转储：

```
array(146) { 
    [0]=> object(SimpleXMLElement)#10 (1) { [0]=> string(2) "42" }   
    [1]=> object(SimpleXMLElement)#8 (1) { [0]=> string(2) "44" }  
    [2]=> object(SimpleXMLElement)#11 (1) { [0]=> string(2) "37" } 
    [3]=> object(SimpleXMLElement)#12 (1) { [0]=> string(3) "116" }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:14:57.323

我通过修改我的 $defindexes 以包含转换为字符串的 SimpleXML 对象数组解决了这个问题。通过这种方式，foreach 循环能够完成，因为 find_tf2_allitem_node_by_defindex() 函数现在将接收要解析的字符串。

# c# - 以正确的方式从二进制文件中提取存储的 png 图像

> ID：11487741
> 
> 赞同：2
> 
> 时间：2012-07-14T22:08:26.120
> 
> 标签：c#, binary, png, binaryfiles, binary-data

我有一个二进制文件，其中一次包含每个 PNG 文件（二进制文件不是 DLL，不是 EXE，没有什么常见的，只是一个包含不同文本信息的文件，一个 PNG 文件和其他一些东西。文件对我来说是未知的。PNG 文件可通过执行此类文件的程序显示）。我没有执行这些文件的程序的来源。我现在的任务是从二进制文件中提取这个 PNG 文件，以便显示或保存为 PNG。我写了一个代码，它适用于其中一些文件（假设大约 50% 的文件），但在其他文件上则不行。在不工作的文件上，创建此文件的程序仍然可以显示包含的图像，因此图像在每个文件中肯定是有效的 - 但无论如何我的代码不适用于某些文件。

有些图像似乎可能有另一种格式，可能是编码类型（我已经尝试了所有不同的编码类型，但没有成功）。这是我的代码（我希望有人能告诉我要更改什么以使图像始终可读）。

我的代码是什么：它找到已知的 PNG 图像“‰PNG”的起始字符串和已知的结束字符串“IEND®B`‚”。这个字符串在我的任何包含 PNG 的二进制文件中都是相同的。然后我的代码获取开始和结束之间的字符串 + 开始和结束序列，并将其保存到带有 Encoding.Default 的文件中。大多数通过这种方式提取的 PNG 文件可以使用图像查看器显示，但大约 50% 是无效的。如果我用编辑器打开它并将字符与工作图像进行比较，图像看起来还不错。到目前为止，我不知道哪个符号是错误图像格式的原因。

如果需要，我会提供更多信息，这里是我的代码：

```
private void button2_Click(object sender, EventArgs e)
    {
        string ReadFile1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "file.dat");
        string WriteFile1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "test.png");
        string TMP = File.ReadAllText(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), ReadFile1), Encoding.Default); //System.Text.Encoding.GetEncoding(1251)
        int start1 = TMP.IndexOf("PNG", 0 ,StringComparison.Ordinal);
        if (start1 == 0) { return; }
        int end1 = TMP.IndexOf("IEND", StringComparison.Ordinal);
        string PNG = TMP.Substring(start1 - 1, (end1 + 9) - start1);
        File.WriteAllText(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "test.png"), PNG, Encoding.Default);
    } 
```

我还想首先使用二进制方法获取 PNG 并使用此代码，但我得到完全相同的结果，然后只读取字符串。这是我之前的代码。我使用要比较的字符串在字节数组中寻找位置。我对二进制代码没有运气......

```
 byte[] by;
        // 1.
        // Open file with a BinaryReader.
        using (BinaryReader b = new BinaryReader(File.Open(ReadFile1, FileMode.Open), Encoding.Default))
        {
            // 2.
            // Variables for our position.
            int pos = start1 - 1;           //I determine the right positions before doing this
            int required = (end1 + 9) - start1; 

            // 3.
            // Seek to our required position.
            b.BaseStream.Seek(pos, SeekOrigin.Begin);

            // 4.
            // Read the next 2000 bytes.
            by = b.ReadBytes(required);
            b.Close();
        }

        FileStream writeStream;
        writeStream = new FileStream(WriteFile1, FileMode.Create);
        BinaryWriter writeBinay = new BinaryWriter(writeStream, Encoding.Default);
        writeBinay.Write(by);
        writeBinay.Close(); */ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T22:16:09.197

您不应该将文件作为文本文件读取；内容可能会发生转换。您应该尝试使用`File.ReadAllBytes`，然后搜索 PNG 文件开头和结尾的字节序列，然后写出该字节区域。

要在字节数组中查找字节序列，可以使用如下代码：

```
private static int IndexOf(byte[] array, byte[] sequence, int startIndex)
{
    if (sequence.Length == 0)
        return -1;

    int found = 0;
    for (int i = startIndex; i < array.Length; i++)
    {
        if (array[i] == sequence[found])
        {
            if (++found == sequence.Length)
            {
                return i - found + 1;
            }
        }
        else
        {
            found = 0;
        }
    }

    return -1;
}

private void button2_Click(object sender, EventArgs e) 
{ 
    string ReadFile1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "file.dat"); 
    string WriteFile1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), "test.png"); 

    byte[] TMP = File.ReadAllBytes(ReadFile1);

    byte[] pngStartSequence = new byte[] { 0x89, 0x50, 0x4E, 0x47 };
    byte[] pngEndSequence = new byte[] { 0x49, 0x46, 0x4E, 0x44 };

    int start1 = IndexOf(TMP, pngStartSequence, 0);
    if (start1 == -1)
    {
       // no PNG present
       MessageBox.Show("Could not find PNG header");
       return;
    }

    int end1 = IndexOf(TMP, pngEndSequence, start1 + pngStartSequence.Length);
    if (end1 == -1)
    {
       // no IEND present
       MessageBox.Show("Could not find PNG footer");
       return;
    }

    int pngLength = end1 - start1 + 8;
    byte[] PNG = new byte[pngLength];

    Array.Copy(TMP, start1, PNG, 0, pngLength);

    File.WriteAllBytes(WriteFile1, PNG); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T22:17:29.430

PNG文件是二进制文件。如果您使用某种编码读取它们，您将丢失信息并且程序的输出不再是有效的 PNG 文件。有关更多说明和代码示例，请参阅[在 PNG 中使用块。](https://stackoverflow.com/questions/723392/using-chunks-in-a-png)

另请阅读[PNG 规范：文件结构](http://www.w3.org/TR/PNG-Structure.html)以获取详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T22:15:40.940

使用[`File.ReadAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)和[`File.WriteAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)。作为文本的读写可能会受到编码的影响。

您可以使用[Jb Evain 算法](https://stackoverflow.com/a/283648/1495442)来寻找这样的模式`Byte Array`：

```
static void Main()
{
    // PNG file signature
    var startPattern = new byte[] { 137, 80, 78, 71, 13, 10, 26, 105 };
    var data = File.ReadAllBytes("png file");

    var start = data.Locate(startPattern);
    // and end like this
}    

public static int[] Locate(this byte[] self, byte[] candidate)
{
    if (IsEmptyLocate(self, candidate))
        return Empty;

    var list = new List<int>();

    for (int i = 0; i < self.Length; i++)
    {
        if (!IsMatch(self, i, candidate))
            continue;

        list.Add(i);
    }

    return list.Count == 0 ? Empty : list.ToArray();
}

static bool IsMatch(byte[] array, int position, byte[] candidate)
{
    if (candidate.Length > (array.Length - position))
        return false;

    for (int i = 0; i < candidate.Length; i++)
        if (array[position + i] != candidate[i])
            return false;

    return true;
}

static readonly int[] Empty = new int[0];

static bool IsEmptyLocate(byte[] array, byte[] candidate)
{
    return array == null
            || candidate == null
            || array.Length == 0
            || candidate.Length == 0
            || candidate.Length > array.Length;
} 
```

# php - 在登录页面中使用 FOUND_ROWS

> ID：11487744
> 
> 赞同：0
> 
> 时间：2012-07-14T22:08:51.940
> 
> 标签：php, mysql, sql, sql-calc-found-rows

我正在尝试设置一个用户登录页面（我学习 php 时的基本培训），但该页面无法正常工作，因为我认为我**在计算行数**的部分存在问题（我检查了我的行数输入的登录名和密码与已输入的匹配的用户表数据库=1）。

我在 PDO 中，我不想使用`mysql_num_rows`已[弃用](http://php.net/manual/en/function.mysql-num-rows.php)的，或者至少建议不要使用它。相反，我想使用`Found_rows`

这是我的 login_page.php：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <title>LOGIN PAGE</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
<h1>Connect to your account</h1>
    <form method="post" action="login_verify.php">
        <input type="text" name="inputed_username" size="35" maxlength="30" required="required" value="Enter your login" /><br/><br/>
        <input type="password" name="inputed_password" size="35" maxlength="30" required="required" value="Enter your password" /><br/><br/>
        <input type="submit" name="submit "value="Connect me !" />         
    </form>
</body>
 </html> 
```

然后是 php 文件，我在该文件中检查`{login,password}`此 login_verify.php 文件中输入的内容是否正确：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <title>login process check-up</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
<?php
    if (isset($_POST['submit']))//if the button submit has not been clicked on
    {
        try
        {
            //database connection          
            $dbhost     = "localhost";
            $dbname     = "test";
            $dbuser     = "root";
            $dbpass     = "";

            $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
            $bdd = new PDO("mysql:host=$dbhost;dbname=$dbname; charset=UTF8",$dbuser,$dbpass,$pdo_options);
            $bdd -> query('SET NAMES utf8'); 

            //the database is checked to see if there is a match for the couple {user,password}

            $user = $_POST['inputed_username'];
            $password = $_POST['inputed_password'];
            //preparaiton and execution of the request
            $req = $bdd->prepare('SELECT * from user_table WHERE login= :login && password= :password LIMIT 1');
            $req->execute(array(
            'login' => $user,
            'password' => $password));
            $foundrows = $req->query("SELECT FOUND_ROWS()")->fetchColumn();//the number of rows are counted

            //we check if there is a match for the login-password
            if ($foundrows == 1)//if we find one that matches
            {
                session_start();
                $_SESSION['username'] = $req['login'];
                $_SESSION['fname'] = $req['first_name'];
                $_SESSION['lname'] = $req['last_name'];
                $_SESSION['logged'] = TRUE;
                header("Location: first_page.php");
                exit();
            }
            else //if we don't find any match
            {
                header("Location: login_page.php");
                exit;
            }
        }
        catch (Exception $e)
        {
            die('Erreur: '.$e->getMessage());
        }

    }
    else //if the submit button has  not been clicked on
    {
        header ("Location: login_page.php");
        exit;
    }
?> 
```

如果你们中的任何人知道问题出在哪里，那就太好了。

我认为它来自对found_rows的滥用。这是我第一次使用它，所以我觉得我的东西很糟糕，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:11:05.290

`FOUND_ROWS()`仅在您在选择查询中有[`SQL_CALC_FOUND_ROWS`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)选项的选择查询之后使用它时才有效，并且只有在它是 LIMIT 查询时才真正有用。FOUND_ROWS() 是如果没有限制子句，将返回的行数。

```
SELECT SQL_CALC_FOUND_ROWS ... WHERE ... LIMIT 10
SELECT FOUND_ROWS() 
```

对于非 LIMITed 查询，请[`mysql_num_rows()`](http://php.net/mysql_num_rows)改用。

大概您的数据库设置`login`为主/唯一键字段，因此您的查询无论如何只会返回最多一行，因此限制是没有意义的。

# sql - 将 dbtype_dbdate 转换为日期时出错

> ID：11487745
> 
> 赞同：1
> 
> 时间：2012-07-14T22:09:23.827
> 
> 标签：sql, database, odbc, sql-server-2012

我在 MS SQL Server 2012 中将 ODBC 数据源设置为链接服务器。在整个数据库中，数据类型为日期的大多数（但不是全部）列在我运行查询时都会给我带来麻烦。查询这些日期类型列以外的任何列都没有任何问题。

以下查询：

```
SELECT *
FROM   OPENQUERY(LINKEDSERVERNAME, 'SELECT Product, 
                                           DateLastReceipt
                                    FROM   ProductTable') 
```

在 SQL Server Management Studio (2012) 中给出以下错误消息：

> 消息 8114，级别 16，状态 10，第 1 行。将数据类型 DBTYPE_DBDATE 转换为日期时出错。

我已经尝试使用 CONVERT 将数据类型转换为 varchar 根据以下讨论没有任何运气（相同的错误消息）： [http ://social.technet.microsoft.com/Forums/en-US/transactsql/thread/3a7d94ee-46a0- 40ce-ae95-127ec462fbff](http://social.technet.microsoft.com/Forums/en-US/transactsql/thread/3a7d94ee-46a0-40ce-ae95-127ec462fbff)

现在，有一些完全相同的数据类型（日期）的列根本不会给我带来任何麻烦。例如，在我的 ProductTable 中有一个名为 AdditionalToFile 的列，它显示了记录的创建日期。这个专栏完全没有给我带来麻烦。

有人可以提供的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:27:20.297

希望这会有所帮助（我没有使用 SQL Server 2012）。
如果您的 ODBC 链接到 db2，对于不支持的日期范围，例如“0001-01-01”，您需要进行转换。通常这是有效的。

```
SELECT * 
FROM   OPENQUERY(LINKEDSERVERNAME, 'SELECT Product, 
                                       CAST(DateLastReceipt AS CHAR(10))
                                FROM   ProductTable') 
```

如果您仍然希望结果为日期，只需使用 CASE 并将无效日期替换为您的默认日期。例如

```
SELECT *
FROM   OPENQUERY(LINKEDSERVERNAME, 'SELECT Product, 
                               ,CASE WHEN DateLastReceipt AS CHAR(10)) = ''0001-01-01''
                                       THEN CURRENT_DATE
                                     ELSE DateLastReceipt 
                                     END
                                FROM   ProductTable') 
```

您可能需要将 CURRENT_DATE 更改为 CURRENT_TIMESTAMP 和 CASE 组合取决于您的数据库服务器和您的要求

# microsoft-metro - 具有摘要身份验证的 HttpWebRequest 在 Metro 应用程序中返回错误 401（Windows 8）

> ID：11487749
> 
> 赞同：1
> 
> 时间：2012-07-14T22:09:56.837
> 
> 标签：microsoft-metro, windows-runtime, webrequest, digest

我正在为需要从需要摘要式身份验证的服务器下载一些内容的 Windows 8（地铁应用程序）开发应用程序。

这是我用来发送请求的代码：

```
WebRequest webRequest = WebRequest.Create("http://my_site_with_http_digest_auth");
webRequest.Method = "GET";
webRequest.Credentials = new NetworkCredential("user", "pass");
webRequest.UseDefaultCredentials = false;
HttpWebResponse webResponse = (HttpWebResponse)await webRequest.GetResponseAsync();
if (webResponse != null && webResponse.StatusCode == HttpStatusCode.OK)
{
    // Analyze response here...
} 
```

当我在 Metro 应用程序中运行此代码时，服务器返回`401 (authentication error)`. 完全相同的代码在 Windows Phone 和普通的 .NET 应用程序上运行良好。这只发生在 Windows 8 Metro 应用程序上。也许这是 WinRT 中的一个错误。其他人在 Metro 应用程序中遇到过这个问题吗？任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:10:31.323

这可能是 .NET Framework 中更普遍的错误的另一种表现形式

[https://connect.microsoft.com/VisualStudio/feedback/details/571052/digest-authentication-does-not-send-the-full-uri-path-in-the-uri-parameter](https://connect.microsoft.com/VisualStudio/feedback/details/571052/digest-authentication-does-not-send-the-full-uri-path-in-the-uri-parameter)

（不允许对那个投票！）

还有一份报告：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/5b66153e-6b02-4523-b17f-3c6b711345ed/httpclient-digest-authentication-does-not-work-if-the-uri-has-查询字符串参数](http://social.msdn.microsoft.com/Forums/vstudio/en-US/5b66153e-6b02-4523-b17f-3c6b711345ed/httpclient-digest-authentication-does-not-work-if-the-uri-has-querystring-parameters)

并且（带有奇怪的 MSFT 响应）：

[http://connect.microsoft.com/VisualStudio/feedback/details/786592/webclient-digest-authentication-does-not-work-if-the-uri-has-querystring-parameters](http://connect.microsoft.com/VisualStudio/feedback/details/786592/webclient-digest-authentication-does-not-work-if-the-uri-has-querystring-parameters)

最后：

[在 C# 中通过 HttpWebRequest 实现 Digest 身份验证](https://stackoverflow.com/questions/594323/implement-digest-authentication-via-httpwebrequest-in-c-sharp)

# php - getFinalPrice：未显示正确的国际价格

> ID：11487750
> 
> 赞同：0
> 
> 时间：2012-07-14T22:09:58.973
> 
> 标签：php, magento, internationalization, currency

我需要在我网站的目录/列表布局上显示价格，并且正在使用这个：

```
<?php echo number_format($_product->getFinalPrice(), 2) ?> 
```

该网站需要显示澳大利亚和日本的不同价格。当我查看产品页面时会显示正确的价格，但是当我转到使用（以上）PHP 调用的目录/列表布局时，它会显示原始价格。它需要显示日本价格，而不是原始价格。

有人可以帮忙解决这个问题吗，我花了几天时间试图解决这个问题，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:48:00.973

您好，您是否会更改管理员的默认货币选项？

做一件事去管理侧点击系统=>配置=>货币设置（在配置选项卡中）

现在根据您的要求设置默认显示货币选项。并检查它是否工作？

希望对你有帮助

# git - 使用 git 了解 jquery UI 的最新信息

> ID：11487755
> 
> 赞同：0
> 
> 时间：2012-07-14T22:11:06.243
> 
> 标签：git, jquery-ui

我想要一种机械化的方式来确保我有最新的 jquery-ui 和主题可以在开发中使用。我知道 jquery-ui 可以在以下位置从 git 中获取：

> [https://github.com/jquery/jquery-ui.git](https://github.com/jquery/jquery-ui.git)

但我很失望地看到它只带有“基础”主题。我可以从以下位置获取特定构建的最新版本的 zip：

> [http://jquery-ui.googlecode.com/files/jquery-ui-themes-1.8.21.zip](http://jquery-ui.googlecode.com/files/jquery-ui-themes-1.8.21.zip)

但这意味着 URL 会随着每个新版本而变化，并且立即闻起来像是我在机械化过程中不想要的工作。我错过了一个技巧吗？某个地方是否有同时具有代码和主题的 git 存储库？有最新主题的 git repo 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:33:15.600

我认为主题是**构建**过程的一部分。在[https://github.com/jquery/jquery-ui/blob/master/build/themes](https://github.com/jquery/jquery-ui/blob/master/build/themes)的 repo 中有一个命名主题的文件，这似乎被**grunt.js**用作构建过程的一部分。

自述文件中给出了构建说明

[https://github.com/jquery/jquery-ui/blob/master/README.md#building-jquery-ui](https://github.com/jquery/jquery-ui/blob/master/README.md#building-jquery-ui)

# java - Perlin 噪声百分比

> ID：11487759
> 
> 赞同：6
> 
> 时间：2012-07-14T22:11:31.137
> 
> 标签：java, perlin-noise, normal-distribution

我正在编写基于 perlin 噪声的地图生成器并遇到问题：

假设我想要 30% 的水和 70% 的泥瓦。使用通常的随机生成器没有问题：

```
tile = rnd.nextFloat() < 0.7f ? DIRT : WATER; 
```

但是柏林噪声是正态分布的（范围从 -1 到 1，平均为 0），所以这并不容易。

有谁知道将正态分布转换为均匀分布的方法，或者我可以从噪声值中获得百分比的不同方法？

编辑：70% 只是一个例子，我希望能够动态地使用任何值，最好是 0.1% 的精度。

EDIT2：我想将 perlin 噪声转换为均匀分布，***而不是***正态分布（它已经是相似的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T23:00:02.293

如果您想获得正好 30% 的水（或其他指定值），您可以这样做。

1.  生成您的高度图。
2.  将所有高度值放入列表中。
3.  对列表进行排序。
4.  选择出现在列表中**30%**的值作为您的水位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T22:25:43.517

Perlin 噪声分布只是*高斯*分布，它不是真正的正态分布。

此外，峰值*非常*窄，标准偏差在 0.1 左右（我找不到确切的数字）。

只需将您的阈值选择为 ~ 0.1，这应该会给您*大约*70% 的值低于该值，30% 高于该值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T12:15:14.780

我想出了一个解决方案：首先，我生成 100,000,000 个柏林噪声并将它们存储在一个数组中。我对其进行排序，然后我可以将每 10,000 个值作为每千分之一的阈值。现在我可以对这些阈值进行硬编码，所以我只有一个包含 1,000 个浮点数的数组，以便在运行时进行查找。

好处：

它*真的*很快，因为它只是运行时的一个数组访问。

缺点：

如果更改算法，则必须重新生成阈值数组。其次，平均值缩放到每千分之一约 10 个，使 50% 的阈值为 49.5% 或 50.5%（取决于您是否使用 < 或 <= 比较器）。第三，增加的内存占用（4kb，每单位精度）。您可以使用百分比精度或对数精度刻度来减少它。

生成代码：

```
final PerlinNoiseGenerator perlin = new PerlinNoiseGenerator(new Random().nextInt());

final int size = 10000; //Size gets sqared, so it's actually 100,000,000

final float[] values = new float[size * size];
for (int x = 0; x < size; x++)
    for (int y = 0; y < size; y++) {
        final float value = perlin.noise2(x / 10f, y / 10f);
        values[x * size + y] = value;
    }
System.out.println("Calculated");

Arrays.sort(values);
System.out.println("Sorted");

final float[] steps = new float[1000];
steps[999] = 1;
for (int i = 0; i < 999; i++)
    steps[i] = values[size * size / 1000 * (i + 1)];
System.out.println("Calculated steps");

for (int i = 0; i < 10; i++) {
    System.out.println();
    for (int j = 0; j < 100; j++)
        System.out.print(steps[i * 100 + j] + "f, "); //Output usuable for array initialization
    System.out.println();
    System.out.println();
} 
```

查找代码：

```
public final static float[] perlinThresholds = new float[]{}; //Initialize it with the generated thresholds.

public static float getThreshold(float percent) {
    return perlinThresholds[(int)(percent * 1000)];
}

public static float getThreshold(int promill) {
    return perlinThresholds[promill];
}

X 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-11T06:01:33.003

这是一个分析解决方案，它不依赖于保留数据，并且是连续的。[按照这里描述的方法](http://en.wikipedia.org/wiki/Probability_integral_transform)，我生成了一个柏林噪声值的直方图，然后通过对直方图求和来近似连续分布函数，所以`cdf(x)`

```
cdf(x) = sum(histogram[i] for all i < x) 
```

[然后我用 Wolfram Alpha`cdf(x)`用五次多项式逼近](http://www.wolframalpha.com/input/?i=quintic%20fit%20%7B-1%2C0%7D%2C%7B-0.83%2C0.00005%7D%2C%7B-0.67%2C0.00254%7D%2C%7B-0.5%2C0.02875%7D%2C%7B-0.33%2C0.11532%7D%2C%7B-0.17%2C0.28271%7D%2C%7B0%2C0.50162%7D%2C%7B0.17%2C0.71822%7D%2C%7B0.33%2C0.88384%7D%2C%7B0.5%2C0.97016%7D%2C%7B0.67%2C0.99711%7D%2C%7B0.83%2C0.99989%7D%2C%7B1%2C1%7D)。这给了我这个功能：

```
function F(x) { return (((((0.745671 * x + 0.00309887) * x - 1.53841) * x - 0.00343488) * x + 1.29551) * x) + 0.500516; 
```

x^5+0.00309887 x^4-1.53​​841 x^3-0.00343488 x^2+1.29551 x+0.500516 u = (u + 0.002591009999999949) / 1.0055419999999997; // 交叉 (0,0) 和 (1,1)

```
F(x) = 0.745671 x^5 + 0.00309887 x^4 - 1.53841 x^3 - 0.00343488 x^2 + 1.29551 x + 0.500516 
```

现在`F(perlin.noise2(...))`相当接近均匀分布。

此函数并没有完全通过点`(-1,0)`，`(1,1)`因此您可以将其更正为

```
F1(x) = (F(x) + 0.002591009999999949) / 1.0055419999999997 
```

该函数也偏离 1 near`x = 1`和 0 near 之下`x = -1`，因此如果这对您很重要，您应该将其限制在 0 和 1 之间。

```
F2(x) = max(min(F1(x), 1), 0) 
```

（除非出现想要更多细节的人，否则我将保持简洁。如果是这样，请发表评论。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T22:15:25.700

只需加 1 除以 2 ？这将为您提供以 0.5 和从 0 到 1 为中心的分布。

编辑：您想要一个阈值拆分 70% 与 30%，您必须使用[正态法的累积分布函数](http://en.wikipedia.org/wiki/Normal_distribution#Cumulative_distribution_function)，您只需找到 x，例如低于 x 的概率为 0.7。请注意，这仅适用于正态分布，如果您的分布始终介于 -1 和 1 之间，则它不是正态分布。正态分布输出区间应该是-∞和+∞。@paxinum 提到的解决方案可能比自己进行计算更简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T22:29:29.663

好吧，如果它几乎是高斯分布，那么 70% 将是低于 0.75 的所有值，请参阅此表：[http ://www.roymech.co.uk/Useful_Tables/Statistics/Statistics_Normal_table.html](http://www.roymech.co.uk/Useful_Tables/Statistics/Statistics_Normal_table.html)

# mysql - 强制更改/重置mysql密码？

> ID：11487760
> 
> 赞同：0
> 
> 时间：2012-07-14T22:11:39.687
> 
> 标签：mysql, database, mamp

我在安装 MAMP 时遇到问题，我似乎无法连接到数据库。

我以为我知道密码，但它不起作用，我无法使用它手动登录 mysql。

我想硬重置 mysql 的 MAMP 安装的 root 密码，我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:14:20.530

启动 mysql[`--skip-grant-tables`](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-grant-tables)以绕过登录系统。这将使您以超级用户身份进入，并且您可以修改用户帐户。

之后，用于`flush privileges`恢复门禁系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:17:32.347

在终端中输入：

```
/Applications/MAMP/Library/bin/mysqladmin -u root -p password <YOUR_PASS> 
```

如果您的密码不起作用，请使用刷新权限

# ios - xcode 4.3.2 查看旧版本

> ID：11487761
> 
> 赞同：2
> 
> 时间：2012-07-14T22:12:00.110
> 
> 标签：ios, xcode, version-control, xcode4.3, vcs-checkout

Xcode 现在有内置的版本控制系统。如何在不同位置查看当前项目的旧版本？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:45:52.650

您在这里查看两个步骤：

1.  克隆存储库。
2.  检出旧版本。

# 克隆存储库

[通过Xcode 文档中](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/085-Save_and_Revert_Changes_to_Projects/manage_project_changes.html#//apple_ref/doc/uid/TP40010215-CH7-SW29)的步骤，这非常简单（查找“克隆或签出项目副本以在本地使用”）。

假设我们从一个名为“Foo”的项目开始，它有一个由 Xcode 创建的存储库。我已经做到了这一点并做出了一些承诺。在存储库管理器中（Command-Shift-2，然后切换到“存储库”选项卡）我可以看到 Foo 列在左侧。要克隆此存储库，请单击窗口左下方的加号（如下所示）。

![存储库组织者。](../Images/e2bca545f178345a8dc6f56e2540b986.png)

根据 Apple 的说明，我选择“结帐或克隆存储库...”。在下一个视图中，我提供了 Foo 存储库的完整路径并继续执行这些步骤。最终，我在 Repositories Organizer 中有两份“Foo”。

# 检出旧版本

让我们假设您正在使用 Git 的答案。

[这个问题](https://stackoverflow.com/questions/8497715/pull-specific-revision-from-master-branch)和[这个问题](https://stackoverflow.com/questions/5302367/xcode-4-git-integration)都表明 Xcode 不支持签出特定的修订版本。您可以在终端中轻松完成。

在下面的屏幕截图中，您可以在 Repositories Organizer 中看到我的存储库的提交日志。Commit`a04ae8d14d13`是存储库的当前 HEAD。假设我想检查 commit `ea09c358d44f`。

![提交日志。](../Images/cd8706abfe9a758b4d00e5da83c97fb3.png)

为此，我打开一个终端，`cd`进入`/Users/David/Documents/Projects/Foo2`并执行`git checkout ea09c358d44f`. 之后，您可以更新存储库管理器并查看提交日志的新视图。

![结帐后提交日志。](../Images/07217afc302488c0480ff9925f6de427.png)

# php - 自版本以来添加的 PHP 函数

> ID：11487763
> 
> 赞同：-4
> 
> 时间：2012-07-14T22:12:18.230
> 
> 标签：php

是否有资源可以让我查看自某个版本发布以来添加/更改的 PHP 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:13:31.097

您在寻找 PHP 更改日志吗？

[http://www.php.net/manual/en/doc.changelog.php](http://www.php.net/manual/en/doc.changelog.php)

在您想要查看的更改列表中进行选择 - 全部都在那里...只需单击...

[http://www.php.net/manual/en/migration5.incompatible.php](http://www.php.net/manual/en/migration5.incompatible.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:22:25.313

[http://www.php.net/manual/en/migration5.functions.php](http://www.php.net/manual/en/migration5.functions.php)
[http://www.php.net/manual/en/migration52.functions.php](http://www.php.net/manual/en/migration52.functions.php)
[http://www.php.net/manual/ en/migration53.functions.php](http://www.php.net/manual/en/migration53.functions.php)
[http://www.php.net/manual/en/migration54.functions.php](http://www.php.net/manual/en/migration54.functions.php)

# azure - Azure VHD 初始化非常慢 (Lucene.Net)

> ID：11487768
> 
> 赞同：0
> 
> 时间：2012-07-14T22:13:01.180
> 
> 标签：azure, lucene.net, vhd

我在 Windows Azure 的 VHD 上构建了一个 Lucene.Net 索引（大约 250M，仍在增长）。我有 10G 本地缓存用于 VHD

但是，初始化非常慢，导致几乎所有请求都涉及全文搜索，在 Azure 实例重新启动时的前 1-2 分钟内失败。

我的问题：

1.  有没有将 VHD 预加载到本地缓存？
2.  是否有强制 Lucene.Net 给出结果（甚至为空）而不是因异常而失败。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T17:10:04.103

1.  我不了解 Lucene.Net，但是，您的云只是读取了最重要的文件（只获取数据但不对其进行任何操作），这将“加热”缓存，然后将角色报告为准备就绪

2.  你可以抓住它并用它做点什么（小心道格）

试试这个（在 vb 中）：

```
function getData()
  try{
    return some.lucene.code
  }catch e as exception' have some smarter tings here this is dangerous
    trace.TraceError("Lucene trew:"+e.ToString)
    return Nothing
  }
End Function 
```

# jquery - jQuery UI 自动完成：在输入时选择自定义项

> ID：11487769
> 
> 赞同：0
> 
> 时间：2012-07-14T22:13:06.223
> 
> 标签：jquery, jquery-ui, autocomplete, event-propagation

我有一个带有自动完成功能的文本框。当输入框的文本包含某些字符时，我还在自动完成下拉列表中添加了一个自定义元素。我正在添加这个自定义元素来自定义插件的 _renderItem 函数：

```
$tb.autocomplete({
    /* OPTIONS HERE */
}).data("autocomplete")._renderItem = function (ul, item) {
  if ($tb.val().indexOf('someText') > -1){
    ul.append('<li class="dropdown-element"><a href="#" class="my-option">My custom option</a></li>');
  }
  return false;
} 
```

我希望每当用户键入包含“someText”的内容并按 Enter 键（之前没有在下拉列表中选择任何内容）时，都会为我的自定义元素引发自动完成的“选择”事件。

我尝试在文本框上为“keyup”事件添加一个处理程序，但是每次按 Enter 时都会调用该处理程序（即使在下拉列表中选择了一些元素），并且我无法从“选择”中取消事件的传播' 自动完成的事件处理程序。（我尝试了 e.stopPropagation 和 e.originalEvent.stopPropagation 但它仍然由“keyup”处理程序处理）。

关于如何实现这一目标的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:52:46.250

如果用户没有输入整个内容，则将其`someText`作为有效选项，通过事件将其删除，但如果他们有，则将其保留 - [http://jsfiddle.net/tj_vantoll/bgstB/](http://jsfiddle.net/tj_vantoll/bgstB/)。`open`

这种方法的唯一问题是，如果您需要在用户键入类似事件时调用事件，则不会调用`foo bar someText`该事件。`open`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:57:41.880

好的，我花了一段时间才找到解决方案，但这里是：

```
var autocomplete = $tb.autocomplete({
    /* OPTIONS HERE */
  select:function(e, ui){
    // The 'autocompleteselected' event wraps a 'menuselected' event that wraps a 'keydown' event
    // we stop the propagation of this event to prevent the event handler of keydown from processing the enter when an item was selected by that enter
    event.originalEvent.originalEvent.stopPropagation();

    ProcessSelectedElement(ui);
  }
});
autocomplete.data("autocomplete")._renderItem = function (ul, item) {
  if ($tb.val().indexOf('someText') > -1){
    ul.append('<li class="dropdown-element"><a href="#" class="my-option">My custom option</a></li>');
  }
  return false;
}

autocomplete.keydown(function(e){
    if (e.keyCode == 13 && !e.isPropagationStopped() && tb.val().indexOf('someText') > -1) {
      ProcessCustomElement();
    }
}); 
```

基本上，我所做的是在此事件选择现有项目之一时停止传播原始 keydown 事件。在 keydown 事件处理程序中，我只是验证该事件的传播尚未停止并相应地处理输入。

一个可能的问题是，由于某种原因，keydown 的事件处理程序在 'autocompleteselected' 事件处理程序之前执行，在这种情况下，事件传播不会停止，但我所做的测试没有显示这个问题.

# c# - ANTLR：我可以在一个上下文中使用“，”作为一个标记，而在所述上下文之外使用另一个标记吗？

> ID：11487770
> 
> 赞同：2
> 
> 时间：2012-07-14T22:13:06.417
> 
> 标签：c#, parsing, antlr, antlr3, lexical-analysis

具体来说，我正在尝试在 ANTLR 中实现 RegExp 解析器。

以下是我语法的相关部分：

```
grammar JavaScriptRegExp;
options {
    language = 'CSharp3';
}

tokens {
    /* snip */
    QUESTION = '?';
    STAR = '*';
    PLUS = '+';
    L_CURLY = '{';
    R_CURLY = '}';
    COMMA = ',';
}

/* snip */

quantifier returns [Quantifier value]
    :   q=quantifierPrefix QUESTION?
        {
            var quant = $q.value;
            quant.Eager = $QUESTION == null;
            return quant;
        }
    ;

quantifierPrefix returns [Quantifier value]
    :   STAR { return new Quantifier { Min = 0 }; }
    |   PLUS { return new Quantifier { Min = 1 }; }
    |   QUESTION { return new Quantifier { Min = 0, Max = 1 }; }
    |   L_CURLY min=DEC_DIGITS (COMMA max=DEC_DIGITS?)? R_CURLY
        {
            var minValue = int.Parse($min.Text);
            if ($COMMA == null)
            {
                return new Quantifier { Min = minValue, Max = minValue };
            }
            else if ($max == null)
            {
                return new Quantifier { Min = minValue, Max = null };
            }
            else
            {
                var maxValue = int.Parse($max.Text);
                return new Quantifier { Min = minValue, Max = maxValue };
            }
        }
    ;

DEC_DIGITS
    :   ('0'..'9')+
    ;

/* snip */

CHAR
    :   ~('^' | '$' | '\\' | '.' | '*' | '+' | '?' | '(' | ')' | '[' | ']' | '{' | '}' | '|')
    ; 
```

现在，在花括号的内部，我想将“，”标记为 COMMA，但在外面，我想将它标记为 CHAR。

这可能吗？

这不是发生这种情况的唯一情况。我将遇到许多其他问题（十进制数字、字符类中的连字符等）

编辑：

我知道这被称为上下文相关的词法分析。ANTLR可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:37:53.460

> 这称为上下文相关的词法分析。ANTLR可以做到这一点吗？

不，解析器不能“告诉”它需要处理的词法分析器，比如说，在解析过程中某个时间不同的数字。仅在词法分析器中可能存在一些上下文敏感的词法分析，但解析器无法影响词法分析器。

但是，它可以通过一些额外的解析器规则轻松解决。例如，当匹配一个字符类 ( `[`... `]`) 时，您使用一个匹配字符类中任何有效内容的解析器规则：

```
char_class
 : LBRACK char_class_char+ RBRACK
 ;

// ...

char_class_char
 : LBRACK // the '[' is not special inside a character class!
 | LBRACE // the '{' is not special inside a character class!
 | RBRACE // the '}' is not special inside a character class!
 | PLUS   // the '+' is not special inside a character class!
 | STAR   // the '*' is not special inside a character class!
 | QMARK  // the '?' is not special inside a character class!
 | COMMA
 | DIGIT
 | OTHER
 ; 
```

一个小演示：

```
grammar T;

parse
 : atom* EOF
 ;

atom
 : unit quantifier?
 ;

unit
 : char_class
 | single_char
 ;

quantifier
 : greedy (PLUS | QMARK)?
 ;

greedy
 : PLUS
 | STAR
 | QMARK
 | LBRACE (number (COMMA number?)?) RBRACE
 ;

char_class
 : LBRACK char_class_char+ RBRACK
 ;

number
 : DIGIT+
 ;

single_char
 : DIGIT
 | COMMA
 | RBRACE
 | RBRACK // this is only special inside a character class
 | OTHER
 ;

char_class_char
 : LBRACK
 | LBRACE
 | RBRACE
 | PLUS
 | STAR
 | QMARK
 | COMMA
 | DIGIT
 | OTHER
 ;

LBRACK : '[';
RBRACK : ']';
LBRACE : '{';
RBRACE : '}';
PLUS   : '+';
STAR   : '*';
QMARK  : '?';
COMMA  : ',';
DIGIT  : '0'..'9';
OTHER  : . ; 
```

它将`"[+*]{5,20}?A*+"`按如下方式解析输入：

![在此处输入图像描述](../Images/036fe293d677d071d1c14d0b5ef18792.png)

更完整的 PCRE 语法可以在这里找到：[https](https://github.com/bkiers/PCREParser) ://github.com/bkiers/PCREParser （语法可以在[这里](https://github.com/bkiers/PCREParser/blob/master/src/grammar/PCRE.g)找到）

## 编辑

> 那它，我更愿意将“，”标记为花括号内的 COMMA，但将其标记为外部的 CHAR。我现在将使用解决方法，但这可能吗？

不，就像我说的：词法分析器不受解析器的影响。如果你想要这个，你应该选择[PEG](http://en.wikipedia.org/wiki/Parsing_expression_grammar)而不是 ANTLR。使用 ANTLR，词法分析和解析之间只有严格的分离：你对此无能为力。

但是，您可以只更改解析器规则中匹配的令牌类型。每个解析器规则都有一个`$start`和`$end`标记，表示它匹配的第一个和最后一个标记。由于`char_class_char`(and `single_char`) 将始终匹配单个标记，因此您可以更改`@after`规则块中标记的类型，如下所示：

```
single_char
@after{$start.setType(CHAR);}
 : DIGIT
 | COMMA
 | RBRACE
 | RBRACK // this is only special inside a character class
 | OTHER
 ;

char_class_char
@after{$start.setType(CHAR);}
 : LBRACK
 | LBRACE
 | RBRACE
 | PLUS
 | STAR
 | QMARK
 | COMMA
 | DIGIT
 | CHAR
 ;

// ...

CHAR : . ; 
```

导致你追求的行为（我猜）。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:10:45.143

可以使用词法分析器中的门控语义谓词来做到这一点。在下面的代码中，仅当 isComma 为 true 时，才会匹配 COMMA 规则。否则它将匹配 CHAR，前提是 CHAR 出现在语法中的 COMMA 之后。我不知道 CSharp，所以我不能给出一个完整的例子。

```
L_CURLY : '{' {setComma();};
R_CURLY : '}' {clearComma();};
COMMA : {isComma}? => ','; 
```

显然，如果在不同的上下文中使用花括号，这可能不起作用。我建议避免以这种方式使用词法分析器，除非它真的把解析器弄得一团糟。

# javascript - 未知的 JSLint 错误

> ID：11487774
> 
> 赞同：1
> 
> 时间：2012-07-14T22:14:16.067
> 
> 标签：javascript, jslint

我从 JSLint 收到以下错误，但我无法理解：

-所有问题都已回答-

对这些有任何帮助吗？

```
use /*jslint browser: true, devel: true */
function submit() {
    "use strict";
    document.forms.form.submit();
    var Mathematics = document.personal.Mathematics;
    var OMathematics = document.personal.OMathematics;
    var Sci = document.personal.Sci;
    var OSci = document.personal.OSci;
    var ELA = document.personal.ELA;
    var OELA = document.personal.OELA;
    var SS = document.personal.SS;
    var OSS = document.personal.OSS;
    var Elec1 = document.personal.Elec1;
    var OElec1 = document.personal.OElec1;
    var Elec2 = document.personal.Elec2;
    var OElec2 = document.personal.OElec2;
    var Elec3 = document.personal.Elec3;
    var OElec3 = document.personal.OElec3;
    var Owed = 0;
    function calc(n, o) {
        if (n >= 90) {
            Owed = Owed + 1;
            if (n >= 95) {
                Owed = Owed + 1;
            }
        }
        else if (o >= 80) {
            Owed = Owed + 0.5;
        }
        if (n > o) {
            Owed = Owed + 0.5;
        }
        if (n < o) {
            if (n > 95) {
                Owed = Owed - 0.25;
            }
        }
    }
    calc(Mathematics, OMathematics);
    calc(Sci, OSci);
    calc(ELA, OELA);
    calc(SS, OSS);
    calc(Elec1, Elec1);
    calc(Elec2, Elec2);
    calc(Elec3, Elec3);
    alert(Owed);
}​ 
```

这是上下文中的代码：http: [//jsfiddle.net/Aidoboy/AdzwC/](http://jsfiddle.net/Aidoboy/AdzwC/)

正在使用的异常：“每个函数有许多 var 语句”和“混乱的空白”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-14T22:17:50.507

> ' `document`' 在定义之前使用

你得到这个是因为`document`变量没有被声明。您可以告诉 JSLint 它应该假定代码将在浏览器中运行，因此假定 和 之类的东西`document`是`window`预定义的。您可以使用文件顶部的 JSLint 注释来执行此操作：

```
/*jslint browser: true */ 
```

* * *

> `['form']`最好用点符号写

由于您知道属性的名称，因此无需使用方括号表示法：

```
document.forms.form.submit(); 
```

* * *

> ' `alert`' 在定义之前使用

您可以使用该`devel`选项来防止此错误（例如，您也可以使用它来允许`console.log`调用）：

```
/*jslint browser: true, devel: true */ 
```

* * *

> 意外`'​'`

右大括号后有一些不可见的字符。只需删除该字符即可消除此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:34:04.250

添加这个以避免警报定义错误：

```
/*jslint devel: true */ 
```

[运行 www.jshint.com 时未定义“警报” - Thinbug](https://stackoverflow.com/a/8173484/746943)

> 以及关于开发选项的以下内容：
> 
> 此选项定义了通常用于记录穷人调试的全局变量：控制台、警报等。通常最好不要在生产环境中发布它们，因为例如，console.log 在旧版本的 Internet Explorer 中会中断。

# jquery - 为 jQuery UI 滑块添加“悬停”预览支持

> ID：11487776
> 
> 赞同：0
> 
> 时间：2012-07-14T22:14:23.660
> 
> 标签：jquery, jquery-ui, slider

我正在使用 1 - 10 分等级的 jQuery UI 滑块。我想为滑块添加悬停支持。现在，当您滑动它时，滑块会随着您增加评分等级而改变颜色。它还在滑块外显示 1/10 比例。

我想添加人们将鼠标悬停在滑块的一部分上并将其更改为适当的颜色并根据光标悬停的位置将 1/10 更改为适当的评级的功能。但我不希望在用户单击滑块以保存评级之前触发实际的更改事件。如果它们悬停而不单击，则它会恢复到原始的加载状态。

这可能吗？滑块是否提供任何悬停功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:41:52.450

感谢 jQuery 论坛，我能够完成我需要的工作。下面是我基于这个线程的解决方案：http: [//forum.jquery.com/topic/add-hover-preview-support-to-jquery-ui-slider](http://forum.jquery.com/topic/add-hover-preview-support-to-jquery-ui-slider)

它工作得很好，但我仍然遇到一个 Firefox 问题。我已将错误分解到一个新线程中：[jQuery mousemove errattic Movements and jumpy results in Firefox](https://stackoverflow.com/questions/11507710/jquery-mousemove-erratic-movements-and-jumpy-results-in-firefox)

```
$('#user-rating-slider').slider({
    value: userRating,
    min: 0,
    max: 10,
    step: 1,
    slide: function(event, ui) {
        updateSlider(ui.value);
    },
    change: function(event, ui) {
        ...
    }
}).on({
    mousemove: function(e) {
        e.stopPropagation();

        var width = $(this).width();
        var offset = $(this).offset();

        var value = Math.round(((e.pageX - offset.left) / width) * (10 - 0)) + 0;

        updateSlider(value);
    },
    mouseout: function() {
        updateSlider(userRating);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:43:35.923

创建另一个函数，当您将鼠标悬停在新滑块上时保存当前滑块状态，然后动画到悬停的滑块。发布时让它回到保存的滑块位置。如果他们单击，它将使用与原始代码相同的滑块功能。

# javascript - 没有 iframe 的 Ajax 网络聊天保持状态

> ID：11487777
> 
> 赞同：1
> 
> 时间：2012-07-14T22:14:29.463
> 
> 标签：javascript, html, ajax

我正在开发一个网站，我将在该网站上进行聊天以及网络摄像头聊天（这是 Flash）。我的第一个想法是将整个站点包含在 iframe 中，以确保聊天保持其状态并且不会中止网络摄像头聊天。再想一想，我觉得这样做是一次大规模的黑客攻击，而且不是很愉快。阅读它，谷歌似乎也没有索引框架。这意味着该解决方案不是一个好的解决方案。

除了让 javascript 更新网站的全部内容 (á Twitter) 之外，还有其他适当的解决方案可以让我保持聊天状态，但仍然保持网站正常。

我希望这个问题是可以理解的！

# javascript - 自动关闭当前窗口并使用新 URL 地址打开新窗口

> ID：11487778
> 
> 赞同：1
> 
> 时间：2012-07-14T22:14:30.600
> 
> 标签：javascript, html

我正在使用以下代码自动关闭当前窗口并使用变量中的新 URL 打开新窗口。

代码有问题，不再工作它正在关闭但没有重新打开新窗口。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
  <head>
    <meta http-equiv="prahma" content="no-cache">
    <title>Auto Close and Open New window</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

    <script language="javascript">
      var url = "http://www.myweb.com/weather_control.php?"+Math.random()
      window.open(url,"","");
      window.open('', '_self', ''); 
      window.close();
    </script>

  </head>
  <body onload="closeIt();">
  </body>
</html> 
```

您需要接受“允许始终弹出此站点”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T19:57:09.603

you do know that [http://www.myweb.com/weather_control.php](http://www.myweb.com/weather_control.php) is dead page, right? Try to use this:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<meta http-equiv="prahma" content="no-cache">
<title>Auto Close and Open New window</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<script language="javascript">
  var url = "http://www.myweb.com/weather_control.php?"+Math.random()
  window.open(url,"","MyTitle");
  window.open('', '_self', ''); 
</script>

</head>
<body onload="setTimeout(function(){window.close();},2000)">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T22:30:49.713

尝试这个

```
<html>
  <head>
    <script>
      function gio() {
        popup = window.open('http://www.wholewordz.cf/2017/02/kenya-says-it-will-shut-worlds-biggest.html');
        setTimeout( 5000);
      }

      function closed(){
        setTimeout("window.close()", 500);
      }

      function call() {
        popup = window.open('http://www.google.co.in');
        setTimeout(wait, 8000);
      }

      function caller() {
        setInterval(call, 12000);
      }

      function wait() {
        popup.close();
        closed();
      }
    </script>
  </head>
  <body onload="caller(); gio();">
  </body>
</html>
```

# android - Jenkins在构建android项目时停止响应

> ID：11487779
> 
> 赞同：2
> 
> 时间：2012-07-14T22:14:49.603
> 
> 标签：android, maven, build, jenkins

当我尝试构建 Android 项目时，我无法弄清楚为什么 Jenkins 停止响应（并且我最终不得不重新启动 Jenkins 服务）。

我是新手，所以我不确定哪些信息对调试问题有用，但我很乐意提供所需的任何信息。

不确定这是否相关，但是当我重新启动 Jenkins 服务时，我看到 Jenkins 构建历史记录中缺少失败的构建。

奇怪的是我可以从命令行直接运行构建（作为詹金斯），没有任何问题。我所要做的就是为 ANDROID_HOME 和 JAVA_HOME 设置环境变量，然后运行

```
mvn clean install. 
```

我在无头 Ubuntu 12.04 LTS 服务器上运行 Jenkins。

当它停止时，Jenkins 控制台输出的最后一位是：

```
 -------------------------------------------------------
     T E S T S
    -------------------------------------------------------
    Running TestSuite
    Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.793 sec

    Results :

    Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

    [INFO] 
    [INFO] --- android-maven-plugin:3.2.0:emma (default-emma) @ application ---
    [INFO] 
    [INFO] --- android-maven-plugin:3.2.0:dex (default-dex) @ application ---
    [INFO] /var/lib/jenkins/tools/JDK/jdk-6/jre/bin/java [-Xmx1024M, -jar, /var/lib/jenkins/tools/android-sdk/platform-tools/lib/dx.jar, --dex, --output=/var/lib/jenkins/jobs/moodsherpa/workspace/android/application/target/classes.dex, /var/lib/jenkins/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar, /var/lib/jenkins/jobs/moodsherpa/workspace/android/application/target/classes, /var/lib/jenkins/.m2/repository/com/actionbarsherlock/library/4.0.2/library-4.0.2.apklib, /var/lib/jenkins/.m2/repository/com/commonsware/cwac-loaderex/0.3.0/cwac-loaderex-0.3.0.jar, /var/lib/jenkins/.m2/repository/com/google/inject/extensions/guice-assistedinject/3.0/guice-assistedinject-3.0.jar, /var/lib/jenkins/.m2/repository/com/google/inject/guice/3.0/guice-3.0-no_aop.jar, /var/lib/jenkins/.m2/repository/org/roboguice/roboguice/2.0/roboguice-2.0.jar, /var/lib/jenkins/.m2/repository/com/google/android/support-v4/r7/support-v4-r7.jar, /var/lib/jenkins/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar]
    Build step 'Invoke top-level Maven targets' marked build as failure
    Finished: FAILURE 
```

使用 Maven -X 标志：

```
[INFO] --- android-maven-plugin:3.2.0:dex (default-dex) @ application ---
[DEBUG] Configuring mojo com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0:dex from plugin realm ClassRealm[plugin>com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0, parent: sun.misc.Launcher$AppClassLoader@77cde100]
[DEBUG] Configuring mojo 'com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0:dex' with basic configurator -->
[DEBUG]   (f) aaptExtraArgs = []
[DEBUG]   (f) androidManifestFile = /var/lib/jenkins/jobs/ms/workspace/android/application/AndroidManifest.xml
[DEBUG]   (f) assetsDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/assets
[DEBUG]   (f) attachJar = true
[DEBUG]   (f) attachSources = false
[DEBUG]   (f) combinedAssets = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/combined-assets/assets
[DEBUG]   (f) combinedRes = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/combined-resources/res
[DEBUG]   (f) dexCoreLibrary = false
[DEBUG]   (f) dexJvmArguments = [-Xmx1024M]
[DEBUG]   (f) dexNoLocals = false
[DEBUG]   (f) dexOptimize = true
[DEBUG]   (f) envANDROID_HOME = /var/lib/jenkins/tools/android-sdk/
[DEBUG]   (f) extractedDependenciesAssets = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/extracted-dependencies/assets
[DEBUG]   (f) extractedDependenciesDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/extracted-dependencies
[DEBUG]   (f) extractedDependenciesJavaResources = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/extracted-dependencies/src/main/resources
[DEBUG]   (f) extractedDependenciesJavaSources = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/extracted-dependencies/src/main/java
[DEBUG]   (f) extractedDependenciesRes = /var/lib/jenkins/jobs/ms/workspace/android/application/target/generated-sources/extracted-dependencies/res
[DEBUG]   (f) generateApk = true
[DEBUG]   (f) nativeLibrariesDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/libs
[DEBUG]   (f) project = MavenProject: com.ms.android:application:0.0.1-SNAPSHOT @ /var/lib/jenkins/jobs/ms/workspace/android/application/pom.xml
[DEBUG]   (f) projectRepos = [central (http://repo.maven.apache.org/maven2, releases)]
[DEBUG]   (f) repoSession = org.sonatype.aether.util.DefaultRepositorySystemSession@566e9e64
[DEBUG]   (f) resourceDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/res
[DEBUG]   (f) resourceOverlayDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/res-overlay
[DEBUG]   (f) platform = 15
[DEBUG]   (f) sdk = com.jayway.maven.plugins.android.configuration.Sdk@1f26ecd2
[DEBUG]   (f) session = org.apache.maven.execution.MavenSession@29eb0cd0
[DEBUG]   (f) sourceDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/src/main/java
[DEBUG]   (f) undeployBeforeDeploy = true
[DEBUG]   (f) unpackedApkLibsDirectory = /var/lib/jenkins/jobs/ms/workspace/android/application/target/unpack/apklibs
[DEBUG] -- end configuration --
[DEBUG] Checking for existence of: /var/lib/jenkins/jobs/ms/workspace/android/application/target/proguard-obfuscated.jar
[DEBUG] Using non-obfuscated input
[DEBUG] Adding jvm argument -Xmx1024M
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar
[DEBUG] Adding dex input: /var/lib/jenkins/jobs/ms/workspace/android/application/target/classes
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/com/actionbarsherlock/library/4.0.2/library-4.0.2.apklib
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/com/commonsware/cwac-loaderex/0.3.0/cwac-loaderex-0.3.0.jar
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/com/google/inject/extensions/guice-assistedinject/3.0/guice-assistedinject-3.0.jar
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/com/google/inject/guice/3.0/guice-3.0-no_aop.jar
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/org/roboguice/roboguice/2.0/roboguice-2.0.jar
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/com/google/android/support-v4/r7/support-v4-r7.jar
[DEBUG] Adding dex input: /var/lib/jenkins/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar
[INFO] /var/lib/jenkins/tools/JDK/jdk-6/jre/bin/java [-Xmx1024M, -jar, /var/lib/jenkins/tools/android-sdk/platform-tools/lib/dx.jar, --dex, --output=/var/lib/jenkins/jobs/ms/workspace/android/application/target/classes.dex, /var/lib/jenkins/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar, /var/lib/jenkins/jobs/ms/workspace/android/application/target/classes, /var/lib/jenkins/.m2/repository/com/actionbarsherlock/library/4.0.2/library-4.0.2.apklib, /var/lib/jenkins/.m2/repository/com/commonsware/cwac-loaderex/0.3.0/cwac-loaderex-0.3.0.jar, /var/lib/jenkins/.m2/repository/com/google/inject/extensions/guice-assistedinject/3.0/guice-assistedinject-3.0.jar, /var/lib/jenkins/.m2/repository/com/google/inject/guice/3.0/guice-3.0-no_aop.jar, /var/lib/jenkins/.m2/repository/org/roboguice/roboguice/2.0/roboguice-2.0.jar, /var/lib/jenkins/.m2/repository/com/google/android/support-v4/r7/support-v4-r7.jar, /var/lib/jenkins/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:38:07.560

我将 RAM 从 512 升级到 2048MB，这解决了我的问题。

# google-app-engine - 是否有自动化/脚本化 Google AppEngine Java 部署的解决方案？

> ID：11487793
> 
> 赞同：3
> 
> 时间：2012-07-14T22:16:29.103
> 
> 标签：google-app-engine

我想在 AppEngine Java 上自动/脚本部署我的应用程序。据我所知，没有人想出一个很好的可重用的开放解决方案......还是有吗？

理想情况下，它将执行以下任务：

1.  将war文件夹复制到临时目录。
2.  运行任何需要运行的任务（我们在这一步中对我们的 JS 代码进行 Uglify）。
3.  运行“appcfg resource_limits_info war”以通过 google 进行身份验证并存储 cookie。（因此：[http](http://code.google.com/p/googleappengine/issues/detail?id=7653) ://code.google.com/p/googleappengine/issues/detail?id=7653 ）
4.  调用“appcfg update”以上传新版本，使用当前日期时间作为版本 (2012-01-01-1411)。
5.  [通过点击http://2012-01-01-1411.appid.appspot.com](http://2012-01-01-1411.appid.appspot.com) url预热实例。
6.  如果 #5 成功，调用 'appcfg set_default_version' 切换到新版本。如果没有，请重复 #5 直到完成。
7.  自动删除旧版本以保持整洁。（不可能，功能请求：[http](http://code.google.com/p/googleappengine/issues/detail?id=2723) ://code.google.com/p/googleappengine/issues/detail?id=2723 ）

我可以/将自己写这个，但我想知道是否有其他人以前曾走这条路，或者想合作开发一个很多人可以使用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:28:48.720

这是对我们非常有效的 ant 目标的核心。上述步骤中唯一未实现的部分是 #7，因为 AppEngine 尚无法实现。我们发现使用日期作为版本号对于跟踪部署非常方便。

```
<target name="auth">
    <java classname="com.google.appengine.tools.admin.AppCfg" inputstring="${appengine.pass}" fork="true">
        <sysproperty key="appengine.sdk.root" value="${appengine.sdk.dir}" />
        <classpath>
            <fileset dir="${appengine.sdk.dir}/lib" includes="**/*.jar" />
        </classpath>
        <arg value="--email=${appengine.email}" />
        <arg value="resource_limits_info" />
        <arg value="war" />
    </java>
</target>

<target name="optimize">
    <delete dir="${staging.dir}" />
    <mkdir dir="${staging.dir}" />

    <copy todir="${staging.dir}">
        <fileset dir="war">
            <exclude name="WEB-INF/classes/**" />
            <exclude name="WEB-INF/appengine-generated/**" />
            <exclude name="include.js" />
            <exclude name="js/app/**" />
            <exclude name="js/tmpl/**" />
        </fileset>
    </copy>
    <jar destfile="${staging.dir}/WEB-INF/lib/classes.jar" basedir="${classes.dir}" />

    <exec executable="./scripts/optimize.sh">
        <env key="PATH" value="/usr/bin:/bin:/usr/local/bin" />
    </exec>
</target>

<target name="deploy-prod" depends="auth, optimize">
    <property name="appid" value="voost0" />
    <tstamp>
        <format property="vnum" pattern="yyyy-MM-dd-HHmm"/>
    </tstamp>

    <echo message="Deploying to version: ${vnum}" />

    <appcfg action="update" war="${staging.dir}">
        <options>
            <arg value="--application=${appid}" />
            <arg value="--version=${vnum}" />
        </options>
    </appcfg>

    <get src="http://${vnum}.${appid}.appspot.com/ping" dest="${build.dir}/warmup-garbage" verbose="true" />
</target>

<target name="deploy-prod-switch" depends="deploy-prod">
    <appcfg action="set_default_version" war="${staging.dir}">
        <options>
            <arg value="--application=${appid}" />
            <arg value="--version=${vnum}" />
        </options>
    </appcfg>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T20:07:11.103

你可以使用他们的 Gradle 或 Maven 插件

摇篮： [https ://github.com/GoogleCloudPlatform/gradle-appengine-plugin](https://github.com/GoogleCloudPlatform/gradle-appengine-plugin)

Maven： [https ://cloud.google.com/appengine/docs/java/tools/maven](https://cloud.google.com/appengine/docs/java/tools/maven)

# cookies - Stackoverflow 如何让用户通过 HTTP 登录？

> ID：11487794
> 
> 赞同：7
> 
> 时间：2012-07-14T22:16:41.360
> 
> 标签：cookies, ssl, session-cookies, session-hijacking

我注意到 stackoverflow 仅在登录页面上使用 SSL，并且可以通过 HTTP 发布问题/答案。

用户必须登录才能做到这一点，所以我想知道如果没有使用 SSL，stackoverflow 如何设法跟踪哪些用户已登录。

目前我正在制作一个 Rails 应用程序，它使用 cookie 跟踪登录状态。我一直认为您需要 SSL 才能安全地做到这一点。但我以登录用户身份通过​​ HTTP 发布此内容。

当我运行`tcpdump -i eth0 -A`然后访问 stackoverflow 时，我注意到一个名为“usr”的 cookie，并且该 cookie 以纯文本形式传输，没有 SSL。如果我通过不安全的连接（如 wifi 咖啡馆）登录，黑客/数据包嗅探器能否获取我的 usr cookie 并重播我的会话？

我想避免在我的 Rails 应用程序中使用 SSL（因为我的主机要为实现它负责），所以我想使用与 stackoverflow 相同的技术。我想让用户保持登录状态，而不使用 SSL。

我猜这里正在使用数据库（或 memcache/redis）会话存储。但肯定还是需要某种 cookie 吗？为什么这些 cookie 不必通过 SSL 发送？后台是否发生了其他事情，使这些 cookie 对不同机器上的黑客来说是多余的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:28:56.910

这是我认为会发生的事情或您可以在应用程序中使用的事情。当用户通过您的登录页面登录时，您会创建两种不同类型的 cookie。您创建第二个 cookie，以便将其专门发送回 HTTPS 页面，并且所有其他页面（包括 HTTP 和 HTTPS）可以使用第一个 cookie（用户会话 cookie）来维护会话和所有包含安全信息的页面用户专有的将使用第二个 HTTPS cookie..

通过这种方式，可以仅使用会话 cookie 来查看喜欢的页面，但是当您想要查看用户信息页面时，您使用第二个 HTTPS cookie。

希望这有点道理。

# python - Python Matplotlib Basemap 在地图图上叠加小图像

> ID：11487797
> 
> 赞同：27
> 
> 时间：2012-07-14T22:17:25.797
> 
> 标签：python, image, matplotlib, overlay, matplotlib-basemap

我正在地图上绘制来自飞机的数据，我想在绘图上最新数据点的坐标处插入这架 75 像素 x 29 像素的飞机 PNG 图像。

[![飞机](../Images/8136945bb47a56c0ed3413bfceaf65fb.png)](https://i.stack.imgur.com/Q5tbO.png)

据我所知和阅读，`pyplot.imshow()`是实现这一目标的最佳方式。但是，我在第 1 步上挂断了，让图像均匀显示。使用普通绘图而不是底图，使用 imshow 很容易让图像出现，但是使用底图时，我根本无法显示它。请参阅示例代码。

如果我可以让图像显示在地图上，我假设我可以通过反复试验，使用 的`extent`属性设置它的位置和一些适当的尺寸`imshow()`，绘图坐标是从地图坐标转换而来的`x,y = m(lons,lats)`。

这是示例代码（要尝试它，您可能需要下载上面的飞机图像）。

```
from matplotlib import pyplot as plt
from mpl_toolkits.basemap import Basemap
import Image
from numpy import arange

lats = arange(26,29,0.5)
lons = arange(-90,-87,0.5)

m = Basemap(projection='cyl',llcrnrlon=min(lons)-2,llcrnrlat=min(lats)-2,
            urcrnrlon=max(lons)+2,urcrnrlat=max(lats)+2,resolution='i')

x,y = m(lons,lats)
u,v, = arange(0,51,10),arange(0,51,10)
barbs = m.barbs(x,y,u,v)
m.drawcoastlines(); m.drawcountries(); m.drawstates()

img = Image.open('c130j_75px.png')
im = plt.imshow(img, extent=(x[-1],x[-1]+50000,y[-1],y[-1]+50000))
plt.show() 
```

这是生成的图像，其中不包含飞机的痕迹。我尝试了几种不同的尺寸`extent`，我想我可能只是把它做得太小了，但没有成功。我也试过设置`zorder=10`，但也没有运气。任何帮助，将不胜感激。

[![结果](../Images/ada088b132be244385d7636cdf691dbf.png)](https://i.stack.imgur.com/cuDNs.png)

`m.imshow`更新：我现在可以通过使用而不是让图像至少出现`plt.imshow`，因为前者在地图的轴实例中传递，但`extent`参数似乎对图像的尺寸没有影响，因为它总是填满整个情节无论我制作`extent`的尺寸有多小，即使我将它们设置为零。如何适当缩放飞机图像并将其放置在最后一个数据点附近？

`im = m.imshow(img, extent=(x[-1],x[-1]+5,y[-1],y[-1]+2))`

[![结果2](../Images/b63883d8402ca1888ec0b4da526163c5.png)](https://i.stack.imgur.com/G9K3b.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-16T03:43:58.353

实际上，为此您想使用 matplotlib 的一个未记录的功能：`matplotlib.offsetbox`模块。这里有一个例子：http: [//matplotlib.sourceforge.net/trunk-docs/examples/pylab_examples/demo_annotation_box.html](http://matplotlib.sourceforge.net/trunk-docs/examples/pylab_examples/demo_annotation_box.html)

在你的情况下，你会做这样的事情：

```
import matplotlib.pyplot as plt
import numpy as np
import Image

from mpl_toolkits.basemap import Basemap
from matplotlib.offsetbox import OffsetImage, AnnotationBbox

# Set up the basemap and plot the markers.
lats = np.arange(26, 29, 0.5)
lons = np.arange(-90, -87, 0.5)

m = Basemap(projection='cyl',
            llcrnrlon=min(lons) - 2, llcrnrlat=min(lats) - 2,
            urcrnrlon=max(lons) + 2, urcrnrlat=max(lats) + 2,
            resolution='i')

x,y = m(lons,lats)
u,v, = np.arange(0,51,10), np.arange(0,51,10)
barbs = m.barbs(x,y,u,v)

m.drawcoastlines()
m.drawcountries()
m.drawstates()

# Add the plane marker at the last point.
plane = np.array(Image.open('plane.jpg'))
im = OffsetImage(plane, zoom=1)
ab = AnnotationBbox(im, (x[-1],y[-1]), xycoords='data', frameon=False)

# Get the axes object from the basemap and add the AnnotationBbox artist
m._check_ax().add_artist(ab)

plt.show() 
```

![在此处输入图像描述](../Images/1d68f8f90ba519b4e7974fffa51ac1e9.png)

这样做的好处是平面位于轴坐标中，并且在放大时相对于图形的大小将保持相同的大小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-15T21:01:17.547

使用底图，如果首先使用地图实例转换坐标，通常可以只使用普通的 pyplot 样式命令。在这种情况下，您可以将范围转换为 uv 坐标：

```
x0, y0 = m(x[-1], y[-1])
x1, y1 = m(x[-1] + 0.5, y[-1] + 0.5) 
```

然后您将能够执行以下操作：

```
im = plt.imshow(img, extent=(x0, x1, y0, y1)) 
```

我对此的完整解决方案如下所示：

```
import matplotlib.pyplot as plt
from mpl_toolkits.basemap import Basemap
import numpy as np

lats = np.arange(26, 29, 0.5)
lons = np.arange(-90, -87, 0.5)

m = Basemap(projection='cyl', llcrnrlon=min(lons)-2, llcrnrlat=min(lats)-2,
            urcrnrlon=max(lons)+2, urcrnrlat=max(lats)+2, resolution='h')

x, y = m(lons,lats)
u, v = np.arange(0, 51, 10), np.arange(0, 51, 10)
barbs = m.barbs(x, y, u, v)

m.drawcoastlines()
m.fillcontinents()

x_size, y_size = 0.8, 0.4
x0, y0 = m(x[-1] - x_size/2., y[-1] - y_size/2.)
x1, y1 = m(x[-1] + x_size/2., y[-1] + y_size/2.)
im = plt.imshow(plt.imread('mslr86.png'), extent=(x0, x1, y0, y1))

plt.show() 
```

这会产生一个看起来像![在此处输入图像描述](../Images/3382f44a9b08456855dc77b725dd17bf.png)

更新：如果您希望图像保持固定大小，独立于缩放，请参阅乔的回答。

# ios - 适用于 iOS 的 SDK 3.0 Beta 中的 FQL

> ID：11487803
> 
> 赞同：3
> 
> 时间：2012-07-14T22:18:08.737
> 
> 标签：ios, facebook-fql, facebook-ios-sdk, fql.multiquery

`requestWithMethodName`我在适用于 iOS 的新 3.0 Beta SDK 中的任何地方都找不到该方法。你们放弃了吗？如果是，我们现在应该如何将 fql 查询发送到 API？或者那些被弃用了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T03:01:54.983

您可以使用方法名称发出请求：

```
[[[FBRequest alloc] initWithSession:...
                         restMethod:... 
                         parameters:... 
                         HTTPMethod:...]
 startWithCompletionHandler:...]; 
```

但是，您也可以使用 FQL 图形对象进行 FQL 查询，如下所示：

```
FBRequest *fql = [FBRequest requestForGraphPath:@"fql"];
[fql.parameters setObject:@"SELECT uid, name, pic_square FROM user WHERE uid = me()"
                          @"OR uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"
                   forKey:@"q"];

[fql startWithCompletionHandler:^(FBRequestConnection *connection, 
                                  id result, 
                                  NSError *error) {
    if (result) {
        NSLog(@"result:%@", result);
    }
}]; 
```

最后，如果您想批量处理多个请求，而不是在`FBRequest`对象上调用 start，您可以创建一个`FBRequestConnection`对象并在调用 start 之前添加多个请求，如下所示：

```
FBRequestConnection *conn = [[FBRequestConnection alloc] init];
[conn addRequest:fqlRequest1 completionHandler:^(FBRequestConnection *connection, 
                                                 id result,
                                                 NSError *error) {
    if (result) {
        NSLog(@"result:%@", result);
    }
}];

[conn addRequest:fqlRequest2 completionHandler:^(FBRequestConnection *connection,
                                                 id result,
                                                 NSError *error) {
    if (result) {
        NSLog(@"result:%@", result);
    }
}];

[conn start]; 
```

SDK 负责将请求序列化为对服务器的单个批处理请求，以及解析响应并使用匹配的结果或错误调用正确的处理程序。

## 笔记

如果您可以使用图形 API 或 REST API 来获得相同的结果，则使用图形 API 优于使用 REST API。我们正在弃用旧的 rest API

# c# - 如何重新加载 ASP.NET 用户配置文件数据

> ID：11487804
> 
> 赞同：0
> 
> 时间：2012-07-14T22:18:17.423
> 
> 标签：c#, asp.net, profile

这感觉像是一个基本问题，但我还是新手。

我将 ASP.NET TextBox 控件值（例如用户名、bio 等）传递给我的代码隐藏中的页面方法，然后将这些值保存到用户的配置文件中。这一切似乎工作正常。

```
[WebMethod]
public static void UpdateProfile(Person formValues)
{
    HttpContext.Current.Profile.SetPropertyValue("Bio", formValues.Bio);
} 
```

（注意 - formValues 是通过 jQuery 从 AJAX Post 提供的）。

我希望看到更新的配置文件信息实际上反映在 ASPX 网络表单上，而无需手动刷新页面以获取最近更新的配置文件信息。这可能吗？

这是我在 Page_Load 方法中所做的

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        FirstName.Text = Profile.FirstName;
        Bio.Text = Profile.Bio;

    }
} 
```

我希望这是有道理的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:16:27.260

按照破折号的建议并进一步阅读，我实现了一种看似简单的方法：向 jQuery 添加一个隐藏按钮`UpdatePanel`，然后从 jQuery 调用隐藏按钮的 onclick。

（我是否提到正在通过 jQuery UI 对话框收集更新的配置文件信息？）

**这是相关的 ASPX 代码：**

```
 <!-- Change User Profile info -->
    <div id="profileBasicInfoDiv">
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="True" UpdateMode="Conditional" Visible="True">
             <ContentTemplate>       
                 <asp:Label ID="lblProfileUserName" runat="server" Text="Name"></asp:Label>
                 <asp:Button ID="btnUserProfileUpdatePanel1" runat="server" Text="Button" Visible="True" onclick="btnUserProfileUpdatePanel1_Click" />        
            </ContentTemplate>     
       </asp:UpdatePanel>
       <br /> 
       <a href="#" id="hlShowBasicInfo">Change my details</a>
   </div> <!-- End of profileBasicInfoDiv --> 
```

**..jQuery：**

```
 $("#profileChangeBasicInfo").dialog({
            modal: true,
            buttons: { 'Save': function () { $(this).dialog('close'); }                    
            },
            close: function () { UpdateProfile(); }

        });
 function UpdateProfile() {

        var jsonText = "{'Bio':'" + $("[id$='MainContent_Bio']").val() + "','FirstName':'" + $("[id$='MainContent_FirstName']").val() + "'} ";
        sendData(jsonText);
        $("#MainContent_btnUserProfileUpdatePanel1").click();

    }; 
```

**这是隐藏按钮的相应 onclick 事件处理程序：**

```
 protected void btnUserProfileUpdatePanel1_Click(object sender, EventArgs e)
   {
        UpdatePanel1.Update();
        ((Label)(lblProfileUserName)).Text = Profile.FirstName + " " + Profile.LastName;
   } 
```

这可能不是最优雅的方法，但它很有效，而且我在此过程中学到了很多东西。非常感谢您的想法和评论。

谢谢你。

# c# - 使用 BeginInvoke 异步调用方法并将结果保存在 Session 状态

> ID：11487805
> 
> 赞同：1
> 
> 时间：2012-07-14T22:18:20.637
> 
> 标签：c#, asp.net, session, asynchronous, begininvoke

我有这个示例代码，它使用 begininvoke 异步调用一个方法，我在 webform 上的按钮单击事件上执行它。

单击按钮后，用户将被重定向到另一个页面，用户在此等待结果。

AuthorizePayment 方法需要很长时间才能运行并返回一个 int 代码。我想将该 int 值存储在会话或 cookie 中的某处（但不显示）当我访问 Session 以添加该代码时，它会引发空异常。如何将此结果保存在会话或 cookie 中？

任何想法？

```
 public class CreditCardAuthorizationManager
{
  // Delegate, defines signature of method(s) you want to execute asynchronously
  public delegate int AuthorizeDelegate(string creditcardNumber, 
                                        DateTime expiryDate, 
                                        double amount);

  // Method to initiate the asynchronous operation
  public void StartAuthorize()
  {
      AuthorizeDelegate ad = new AuthorizeDelegate(AuthorizePayment);
      IAsyncResult ar = ad.BeginInvoke(creditcardNumber, 
                                       expiryDate, 
                                       amount,                  
                                       new AsyncCallback(AuthorizationComplete), 
                                       null);
  }

  // Method to perform a time-consuming operation (this method executes 
  // asynchronously on a thread from the thread pool)
  private int AuthorizePayment(string creditcardNumber, 
                               DateTime expiryDate, 
                               double amount)
  {
    int authorizationCode = 0;

    // Open connection to Credit Card Authorization Service ...
    // Authorize Credit Card (assigning the result to authorizationCode) ...
    // Close connection to Credit Card Authorization Service ...
    return authorizationCode;
  }

  // Method to handle completion of the asynchronous operation
  public void AuthorizationComplete(IAsyncResult ar)
  {
    // See "Managing Asynchronous Completion with the EndInvoke Method"
    // later in this chapter.
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:36:18.763

您无法跨 HTTP 请求可靠地执行工作，因为 ASP.NET 工作进程可能会在任意时刻中止。付款可能已由提供商执行，但您的网站可能认为尚未执行（并且付款已丢失）。我当然不想将我的信用卡数据输入这样的系统。

更好的方法是在 AJAX 请求上运行支付，并使授权代码同步执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T13:51:18.010

您可以使用 async 关键字创建方法并返回任务，而不是创建开始调用和使用委托。

在您的原始方法中，您可以将异步方法称为

```
 Task<int> authorizationValue = await yourAsyncMethodCall(creditcardNumber, expirydate, amount)

  session["authorisation"] = authorizationValue; 
```

如果您需要更具体的示例，请告诉我（我的 VS.net 坏了，所以我必须在这里输入 :()

# java - 在 for 声明中调用 .length() 比在循环之前调用慢？

> ID：11487807
> 
> 赞同：2
> 
> 时间：2012-07-14T22:18:45.407
> 
> 标签：java, optimization, for-loop, micro-optimization

在Java代码中，我认为：

```
for (int i = 0; i < s.length(); i++) {
    // do a lot of something
} 
```

比这慢：

```
int length = s.length();
for (int i = 0; i < length; i++) {
    // do a lot of something
} 
```

请告诉我我是否正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T22:21:50.867

理论上，第一个代码示例可能会更慢，因为它`s.length()`每次迭代调用一次。但是 JVM 可能会为您优化第一段代码。除非基准测试表明：

1.  您处于对性能至关重要的一段代码中。
2.  将长度存储在局部变量中实际上确实可以加快速度。

# c - 将文件中的值读入数组会导致分段错误，C

> ID：11487808
> 
> 赞同：0
> 
> 时间：2012-07-14T22:18:47.157
> 
> 标签：c, file-io, malloc, scanf, scientific-notation

我有多个数据文件，其中包含两列科学格式的数字，如下所示：

```
 -6.000000E-2 0.000000E+0
    1.060000E+0 0.000000E+0
    2.510000E+0 0.000000E+0
    2.700000E+0 5.000000E-2
    2.735000E+0 5.000000E-2
    2.755000E+0 1.000000E-1
    2.775000E+0 1.500000E-1
    2.785000E+0 1.500000E-1
    2.790000E+0 2.000000E-1
    2.805000E+0 2.500000E-1
    2.810000E+0 3.500000E-1
    2.815000E+0 4.000000E-1
    2.820000E+0 5.000000E-1
    2.825000E+0 5.500000E-1
    2.835000E+0 6.000000E-1
    2.835000E+0 7.000000E-1
    2.840000E+0 8.000000E-1
    2.840000E+0 9.000000E-1
    2.850000E+0 9.500000E-1
    2.850000E+0 1.050000E+0
    2.855000E+0 1.200000E+0
    2.860000E+0 1.300000E+0
    2.865000E+0 1.400000E+0
    2.870000E+0 1.450000E+0
    2.870000E+0 1.600000E+0
    2.875000E+0 1.650000E+0
    2.880000E+0 1.800000E+0
    2.880000E+0 1.900000E+0
    2.885000E+0 2.000000E+0
    2.885000E+0 2.150000E+0
    2.890000E+0 2.200000E+0
    2.895000E+0 2.300000E+0
    ... 
```

第一列是 x 数据，第二列是 y 数据。列由一个`<tab>`字符分隔。文件中的行数从 300 到 400 不等。我编写了一个程序来从文件中读取值并使用第 100 和第 200 点计算梯度。从那个梯度我需要计算 x 截距（我使用第 150 个点）。这是来源：

```
#include <stdio.h>
#include <stdlib.h>

float **make_array(int size);
void cleanup(float **array, FILE *filehandle);

int main(int argc, char **argv)
{   
    float **entry;  //2D array to hold data; entry[0][i] holds the x_i while entry[1][i] holds y_i.
    FILE *infile;
    infile=fopen(argv[1], "r");
    if(infile=NULL){
        printf("Unable to open inpufile");
        exit(1);
    }

    char c;
    int i, numlines=0, ret;

    //count number of lines in file
    while((c=(fgetc(infile))!=EOF))
        if(c=='\n')
            numlines++;
    printf("Number of lines: %d", numlines);

    //array to store values from file
    entry=make_array(numlines);
    rewind(infile);

    //read values into array, ensure correct number of arguments read
    for(i=0; i<numlines; i++){
        fscanf(infile, " %g\t%g\n", &entry[0][i], &entry[1][i]);
        if(ret!=2){
            printf("reading incorrect number of inputs from file.. Terminating");
            cleanup(entry,infile);
            exit(3);
        }
    }
    //dump array contents to screen to check
    for(i=0;i<numlines;i++)
        printf("%f\t%f\n", entry[0][i], entry[1][i]);

    //find gradient of the data between the 100th and 200th point
    float gradient = (entry[1][200]-entry[1][100])/(entry[0][200]-entry[0][100]);

    // use the 150th point (midpoint) and the gradient to calculate the x-intercept
    float vt = (entry[1][150]/gradient) - entry[0][150];
    printf("\n Threshold Voltage: %f\n", vt);

    cleanup(entry, infile);
return 0;
}

float **make_array(int size)
{   
    int i;
    float **entry = malloc(2*sizeof(float));
    if(entry==NULL) exit(2);
    entry[0] = malloc(size*sizeof(float));
    if(entry[0]==NULL) exit(2);
    for(i=0; i<size; i++) entry[0][i]==0.0;
    entry[1] = malloc(size*sizeof(float));
    if(entry[1]==NULL) exit(2);
    for(i=0; i<size; i++) entry[1][i]==0.0;
return entry;
}

void cleanup(float **array, FILE *filehandle)
{   free(array[0]);
    free(array[1]);
    free(array);
    fclose(filehandle);
} 
```

该程序编译时没有错误或警告，但在执行时会产生分段错误（在 Ubuntu Linux 上）。我已经研究了很长一段时间，但仍然无法发现问题。任何帮助/意见将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:30:13.910

```
float **entry = malloc(2*sizeof(float)); 
```

分配两个的空间`float`来存储两个`float *`。`sizeof(float) == sizeof(float *)`如果在您的平台上是真的，那将起作用。是吗？无论如何，它应该被纠正。

此外，初始化`for(i=0; i<size; i++) entry[1][i]==0.0;`只是将未初始化的内存与 0.0 进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:24:34.283

```
float **entry = malloc(2*sizeof(float)); 
```

你想去`malloc(2*sizeof(float*))`那里。或者更好`malloc(2*sizeof *entry);`。

# git - 如何开始一个没有祖先的干净分支，然后逐步提交文件？

> ID：11487811
> 
> 赞同：63
> 
> 时间：2012-07-14T22:20:34.183
> 
> 标签：git, branch

我有一个使用 GIT 版本化的 PHP 框架，我计划对其核心进行几项（重大）更改。

我想做的是开始在新分支中处理新核心，但是由于这种更改可能也需要对文件系统进行一些重组，所以我想尽可能干净地启动这个新分支。

我希望干净的分支只包含核心文件。当我完成更改时，我想将框架中的其余模块一一添加到工作目录中，但如果我在 master 上进行更改，则保留合并的能力。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-07-14T22:52:22.920

### 没有祖先的分支

你想要**--orphan**标志。例如：

```
git checkout master
git checkout --orphan foo

# Unstage all the files in your working tree.
git rm --cached $(git ls-files) 
```

将创建一个没有祖先的名为*foo*的新分支，但它将保留当前工作树，而不是您调用命令时所在的任何分支（在本例中为*master*分支）。然后，您可以修改您的工作树以适应，然后进行提交以重新启动该分支的历史记录。

### 文件的增量暂存

要对您的历史执行增量添加，请使用`git add`为每次提交仅暂存您想要的文件。git-add(1) 手册页有关于选择性添加文件的说明：

> 可以给出 Fileglobs（例如 *.c）来添加所有匹配的文件。还可以给出一个前导目录名称（例如，添加 dir/file1 和 dir/file2 的 dir）以递归方式添加目录中的所有文件。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-09-02T06:18:42.297

如果您必须使用旧版本的 git：

```
 mkdir some_dir
 cd some_dir
 git init
 echo a>some_file; git add some_file; git commit -m 'initial commit'
 cd ..
 git fetch ./some_dir/ master:new_independent_branch
 rm -rf some_dir 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-14T22:44:50.523

你可以做的只是移动到一个新的分支，`git co -b my_new_branch`清理你的代码并保留你需要的东西，最后提交。然后，第一个 on 提交`my_new_branch`将是一个*干净*的提交。

# java - 如何在 Android 中从/到 Dropbox 导出导入 SQLite 数据库？

> ID：11487813
> 
> 赞同：2
> 
> 时间：2012-07-14T22:20:47.923
> 
> 标签：java, android, sqlite, dropbox

我已经成功地将 dropbox 与我的应用程序集成，可以上传和下载文件，但是当我上传 sqlite 数据库文件然后下载后，该文件不包含任何数据。

这是我上传的代码：

```
public void upload() {

        FileInputStream inputStream = null;
        try {
            File file = new File(Environment.getExternalStorageDirectory()
                    .toString() + "/tripmileagedatabase");
            inputStream = new FileInputStream(file);
            Entry newEntry = mDBApi.putFile("/tripmileagedatabase", inputStream,
                    file.length(), null, null);
            Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e("DbExampleLog", "User has unlinked.");
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {
                }
            }
        }
    } 
```

我的下载方法是：

```
public void download() {

        FileOutputStream outputStream = null;
        try {
            File file = new File(Environment.getExternalStorageDirectory()
                    .toString() + "/tripmileagedatabase");
            outputStream = new FileOutputStream(file);
            DropboxFileInfo info = mDBApi.getFile("/tripmileagedatabase", null,
                    outputStream, null);
            Log.i("DbExampleLog", "The file's rev is: "
                    + info.getMetadata().rev);
            // /path/to/new/file.txt now has stuff in it.
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while downloading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (outputStream != null) {
                try {
                    outputStream.close();
                } catch (IOException e) {
                }
            }
        }
    } 
```

但是当我在我的应用程序中使用这个数据库时，它在那个数据库中没有显示任何数据，我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:49:41.813

只需在浏览器上从他们的网站访问 sqlite 文件并签入 sqlitebrowser 以确保数据确实存在于数据库中。

这是我用过的。可能需要对其进行一些修改以使用您的 api。但它应该工作

```
private void saveStreamToFile(InputStream responseStream){
    try{
        byte[] buf = new byte[1024];int len;
        FileOutputStream out = getActivity().openFileOutput(
                "SQLIITE_FILE_NAME", Context.MODE_PRIVATE);
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        out.close();
        in.close();
        responseStream.close();

        SQLiteDatabase appDb = SQLiteDatabase.openDatabase(this.getFilesDir()
                .getAbsolutePath()+"/SQLITE_FILE_NAME.db", null
                ,SQLiteDatabase.NO_LOCALIZED_COLLATORS
                |SQLiteDatabase.OPEN_READONLY);
    }catch(IOException e){
        e.printStackTrace();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

# java - 通过网络将参数/参数传递给 jnlp。有哪些可用选项？

> ID：11487815
> 
> 赞同：5
> 
> 时间：2012-07-14T22:21:33.380
> 
> 标签：java, ant, properties, arguments, jnlp

目前我有一个使用 Java web start 通过 JNLP 运行的应用程序。用户能够点击一个特定的 URL 并启动这个应用程序就好了。

通过使用 j2seproperty 标记，我可以在 build.xml（ant web start）内向 JNLP 文件本身添加属性，例如 this。

`<jw:j2se>`

`<j2seproperty name="testProperty" value="1"/>`

`</jw:j2se>`

并且可以通过以下方式在代码中的任何位置访问这些属性： `System.getProperty("testProperty");`

问题是我希望能够通过 html 设置这些属性，如下所示。

'http://localhost:8080/somelink?testProperty=2'

我有什么选择来实现这一目标？我已经做了一些研究，到目前为止，似乎唯一的解决方案是通过某种 servlet 以某种方式动态创建 JNLP 启动器。

这是正确的，如果不是，这里还有其他选择吗？如果是这样，我对所有可能性持开放态度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:32:10.430

通过 JSP 页面创建 JNLP，并让它从请求参数中填充属性值。请参阅[此问题](https://stackoverflow.com/questions/11038773/generate-jnlp-dynamically)以获取稍微不起作用的示例，但是您应该能够很容易地修复它，我做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T16:51:06.033

[另一个更灵活的选择是使用NanoHTTP](https://github.com/NanoHttpd/nanohttpd)嵌入 HTTP 服务器，并通过 Javascript 或任何您喜欢的方式与您的 JNLP 应用程序通信。

# jsp - 带有转发 JSP 的 GWT 开发者插件

> ID：11487817
> 
> 赞同：0
> 
> 时间：2012-07-14T22:22:08.853
> 
> 标签：jsp, gwt, servlets

在我的 GWT 和 AppEngine 项目中，我`Servlet`使用以下内容转发了一个 JSP：

```
req.getRequestDispatcher("/index.jsp").forward(req, resp); 
```

该 JSP 包含一个 GWT 编译的 Javascript 参考。

问题是即使页面加载正常，GWT Javascript 也不会运行。我假设这是因为新加载的文件不包含`?gwt.codesvr=127.0.0.1:9997`GWT 插件通常存在的部分。

有没有办法让这个工作？

**编辑：**根据到目前为止的答案，我想我应该提到它在 Web 模式下工作得非常好。此外，基本 URL 直接映射到 my 中的 Servlet，`Web.xml`因此我访问 Servlet`http://127.0.0.1:8888/`而不是建议的 URL`http://127.0.0.1:8888/index.html?gwt.codesvr=127.0.0.1:9997`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:02:18.663

`?gwt.codesvr=`文件仅在客户端使用来`*.nocache.js`触发加载 of`hosted.html`而不是 some `*.cache.html`，因此它必须存在于 URL 中以触发 DevMode，而与服务器端可以执行的操作无关。

如果您的主机页面位于`http://127.0.0.1:8888/`，则使用`http://127.0.0.1:8888/?gwt.codesvr=127.0.0.1:9997`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:41:19.813

使用 RequestDispatcher 转发不应更改浏览器中的 URL。如果您`gwt.codesvr`在浏览器 URL 中看到该参数，则 GWT 插件应该能够找到它。所以问题可能出在其他地方。可以肯定的是，您可以暂时将 URL 参数附加到转发呼叫，例如：

```
req.getRequestDispatcher("/index.jsp?gwt.codesvr=127.0.0.1:9997").forward(req, resp); 
```

如果它仍然不起作用，请确保`*.nocache.js`相对于主机页面正确解析的路径。它在网络模式下工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T01:54:45.947

在你的servlet中，你为什么不检查请求是否是本地的。

```
String url = request.getRequestURL().toString(); 
```

如果 url 包含`http://127.0.0.1:8888`或者你在哪里运行它，你可以附加`"/index.jsp?gwt.codesvr=127.0.0.1:9997"`. 如果没有，你可以离开它。

然后，您也可以在那里部署和测试代码，而无需更改代码！

# concurrency - Web 应用程序中的并发问题

> ID：11487822
> 
> 赞同：1
> 
> 时间：2012-07-14T22:22:36.397
> 
> 标签：concurrency, lamp

在我开始进行网络编程之前，我认为这很容易。现在，经过一年的经验，我认为这真的很难，主要是因为并发问题。

因为这是一个非常出乎意料的发现，所以我试图询问我更有经验的朋友（他们制作了一些应用程序，如电子商店等）。具体来说，我问他们你是否真的有需要解决的并发问题，否则你有数据变得不一致的危险，他们就像：“嗯，从没想过”。这让我有点害怕自己的理智，甚至一些令人筋疲力尽的网络搜索也没有令人信服地回答这个问题。

因此，在这里我要确保我的思想不会导致一个非常白的房间：

1）假设LAMP框架，apache运行的两个php脚本是否有可能以任何可能的方式在执行中重叠？

2) 同一个脚本是否可以同时运行多次，其实例以任何可能的方式重叠？

3) LAMP 的选择是否重要，或者与今天使用的任何 Web 开发环境一样吗？

4）如果并发真的可能是一个问题而且我不只是在编造事情，是否有任何理论可以帮助我解决这些问题并解决这些问题：“嘿，看，可能存在并发问题” 又过了一会：“哎，这是X的一个经典例子，可以这样解决”。

5) 为什么程序员倾向于将 Web 开发视为不“犹太教”，同时认为他们可以轻松做到这一点？（无需回答这个问题，但这个事实让我很生气，虽然我知道它曾经和我一样）

我知道，从 stackoverflow 的角度来看，这可能是一个非常糟糕的一般问题，但我周围没有人真正有经验可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:58:12.337

我真的不认为网络应用程序和标准桌面程序之间保护共享资源的原则有太大不同。资源就是资源，除非您特别阻止多个实例，否则应用程序可以多次运行。

> 1）假设LAMP框架，apache运行的两个php脚本是否有可能以任何可能的方式在执行中重叠？

是的。Apache 可以在线程/进程中运行请求。两个 PHP 脚本请求可以同时运行。

> 2) 同一个脚本是否可以同时运行多次，其实例以任何可能的方式重叠？

是的。Apache 可以在线程/进程中运行请求。两个 PHP 脚本请求可以同时运行。

> 3) LAMP 的选择是否重要，或者与今天使用的任何 Web 开发环境一样吗？

Apache 具有在多个线程中运行请求的方法。还有其他使用异步方法的服务器。无论哪种方式，您都不应该依赖 Web 服务器来防范代码中的并发操作。这是您的代码检查资源的责任。

> 4）如果并发真的可能是一个问题而且我不只是在编造事情，是否有任何理论可以帮助我解决这些问题并解决这些问题：“嘿，看，可能存在并发问题” 又过了一会：“哎，这是X的一个经典例子，可以这样解决”。

这实际上取决于您的代码资源以及您共享的内容。例如，如果一个脚本需要与文件系统一起工作，那么您的代码应该通过某种类型的同步进行检查。数据库倾向于通过对行或表的内部锁定来为您处理这些问题。

> 5) 为什么程序员倾向于将 Web 开发视为不“犹太教”，同时认为他们可以轻松做到这一点？（无需回答这个问题，但这个事实让我很生气，虽然我知道它曾经和我一样）

我敢肯定，不知道如何进行网页设计（尤其是服务器端）的人认为这一切都只是输入 word 文档。一旦你这样做了，你就会意识到它的工作量很大。

# linux - 在linux中运行不同名称的相同程序

> ID：11487823
> 
> 赞同：0
> 
> 时间：2012-07-14T22:22:37.390
> 
> 标签：linux, bash, shell

如何在调用 ps -ef 时以不同的名称运行同一程序两次或更多次，例如，我从一个 shell 运行 yes，从另一个 shell 运行另一个 yes，当我执行 ps -ef |grep [y]es 时，我可以查看两个具有相同名称的副本，当然具有不同的 PID。如何在 shell 中将第一个是“一”和第二个名称命名为“二”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:38:35.500

在壳里是不可能的。进程只能通过调用`setproctitle (2)`syscall 来更改自己的 proc 标题。如果您想轻松检查，[这里是 Python](https://github.com/dvarrazzo/py-setproctitle)辅助模块。这里[有一些讨论](https://stackoverflow.com/questions/3548294/python-changing-process-name-with-setproctitle)和替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:39:15.593

如果您有不同的参数/参数，并且您希望能够在您的进程列表中对它们进行 grep，那么您需要使用 -w 标志。ps(1) 手册说：

> -w 宽输出。使用此选项两次以获得无限宽度。

考虑到这一点，`ps -efww`or`ps axww`将为您提供每个进程的整个命令行，使其易于区分。

# android - 在android中获得快速的字符串输入

> ID：11487835
> 
> 赞同：0
> 
> 时间：2012-07-14T22:25:01.543
> 
> 标签：android, string, performance, input

我正在寻找一种快速的方法来从 Android 中的用户那里获取输入字符串。例如在java中的代码：

`JOptionPane.showInputDialog(null, "enter your input");`

从用户那里获取输入。我在Android中寻找这样的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T23:18:45.080

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);

alert.setTitle("Title");
alert.setMessage("Message");

// Set an EditText view to get user input 
final EditText input = new EditText(this);
alert.setView(input);

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int whichButton) {
  String value = input.getText();
  // Do something with value!
  }
});

alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int whichButton) {
    // Canceled.
  }
});

alert.show(); 
```

# javascript - 有什么学习 Javascript 浏览器对象模型的好地方吗？

> ID：11487836
> 
> 赞同：0
> 
> 时间：2012-07-14T22:25:29.757
> 
> 标签：javascript

我目前正在阅读[面向 Web 开发人员的专业 Javascript，](https://rads.stackoverflow.com/amzn/click/com/1118026691)并且在 BOM 部分中，有很多谈话内容，而且不时阅读大量段落和小段代码确实无济于事。

我正在寻找一个很好的网站，可以很好地展示 BOM 的教程。我搜索了很多，但我得到的只是 DOM 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:30:09.587

DOM**是**“浏览器对象模型”。好的参考资料是：

*   [DOM 核心 2](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM 2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM 核心 3](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [DOM 事件 2](http://www.w3.org/TR/DOM-Level-2-Events/)
*   [DOM 事件 3](http://www.w3.org/TR/DOM-Level-3-Events/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

至于元引用，[MDN](https://developer.mozilla.org/en-US/)相当不错。

[除了几乎所有浏览器都提供的纯 DOM 之外，这篇博](http://bay-six.blogspot.in/2013/01/javascript-browser-object-model.html)文还提供了各种对象的精美图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:15:28.143

W3Schools 将一些标准的浏览器对象组合在一起：

[JavaScript 和 HTML DOM 参考](http://www.w3schools.com/jsref/default.asp)

*   浏览器对象
    *   窗户
    *   航海家
    *   屏幕
    *   历史
    *   地点

[MDN](https://developer.mozilla.org/en/DOM/window)中的一些非标准 Gecko 和 firefox 对象。

# javascript - 两种形式，一种选择/下拉框 - 需要将选择值从一种形式复制到另一种形式

> ID：11487837
> 
> 赞同：0
> 
> 时间：2012-07-14T22:25:31.337
> 
> 标签：javascript, select, copy

我有一个场景，访问者可以从下拉框中选择一个值，然后选择两个提交按钮中的一个[触发两个不同的表单操作并且都在单独的元素中]。

下拉框与两个提交按钮都相关，但仅位于其中一个元素下。

我尝试编写一个 javascript 函数，将下拉值从一个表单元素拉到另一个表单元素，但它似乎不起作用。请在下面查看我的代码，有什么想法吗？

```
<script type="text/javascript">
function grabselection(){
var select_genre = document.getElementById("genre");
var genre = select_genre.value;
var genre_cloaked = document.getElementById("genre2");
genre_cloaked.value = genre;
}
</script>

<form class="youtubeupload" action="uploadfinalised.php" method="post"      enctype="multipart/form-data">
<input name="token" type="hidden" value="Alhl"/>
<select  id="genre2" class="genre" name="genre"><option value="">What style is your video?</option></select>
<input value="" onclick="grabselection();" type="submit" id="uploadbutton" /></div>
    </form>     

<form id="provideurl" class="provideurl" method="post" action="provideurl.php">
<select id="genre" class="genre" name="genre">
    <option value="">What style is your video?</option>             
    <option id="genreid_1" value="1">first genre</option>
    <option id="genreid_2" value="2">second genre</option>
    <option id="genreid_3" value="3">third genre</option>
    <option id="genreid_4" value="4">fourth genre</option>  
</select> 
```

我相信有一个更简单的解决方案 - 将一个表单元素链接到两个不同的表单，但我不知道该怎么做 - 非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:48:40.140

您正在使用以下代码获取所选索引的值 -

```
var genre = select_genre.value; 
```

相反，将该行代码更改为 -

```
var genre = select_genre.options[select_genre.selectedIndex].value; 
```

这会将当前选择的值插入到流派变量中。其余代码应该可以正常工作。让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:49:51.837

您正在`genre2`选择框上设置值，但**它不包含任何具有该值的选项**。要完成您想要实现的目标，必须在*两个*选择字段中定义选项。

为什么不直接使用隐藏输入并更新其值？

```
<input type="hidden" name="genre2" /> 
```

可以说，最好的办法是**根据用户输入确定表单操作，**这样你就只有一个表单......这里有一个简短的讨论：[http ://www.javascript-coder.com/html-form/html -form-action.phtml](http://www.javascript-coder.com/html-form/html-form-action.phtml)

# lua - 面向对象的lua类泄漏

> ID：11487841
> 
> 赞同：0
> 
> 时间：2012-07-14T22:26:24.040
> 
> 标签：lua

我已经阅读了很多关于面向对象的 lua（设置元表），并且我已经构建了一个系统，并完成了继承。

我现在的问题是，一些变量似乎正在相互泄漏。如果我调用一个函数调用`window:click(x, y)`函数调用就好了。这个功能的工作是通知我所有的点击组件。它正在做什么

```
for number, component in pairs(self.components) do
    component.focus = false
    component:click(x, y, msg)
end 
```

`self.components`包含窗口的所有组件

为了充当所有组件的基类，我有一个名为 component.lua 的类，此文件创建一个名为 components 的表，并向`create()`其添加一个方法（执行所有常见的 OO lua 内容），此基类包含所有方法和我想要在我的所有组件中使用的变量，包括`component:click(x, y)`再次调用它。

```
for key, callback in pairs(self.clickCallback) do
    callback()
end
return 
```

该`clickCallback`表包含在通知组件时应调用的函数。并在 component.lua 中初始化

从这里我将这个类继承到我的其他类，只需设置我的新组件（文本框、按钮、标签等）的元表。这些组件是添加到`self.components`窗口中表格的内容。

问题是这些组件中的每一个都应该有自己的 clickCallback 表。我通过二传手写信给`component.lua`

```
function component:addClickHandler(handler)
    table.insert(self.clickCallback, handler)
end 
```

但是当我调用`click(x,y)`一个组件时，它会调用所有的 clickHandler，无论是另一个按钮还是标签。

正如您在上面看到的，我正在设置一个名为`focus`this 的参数似乎遇到了同样的问题，为一个组件设置它（如您所见，我正在循环遍历每个组件）为所有组件设置它（所以如果我有 4 个组件焦点在每个组件上重置 4 次）

为什么lua会这样做，可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:18:17.370

首先，如果您只是发布了一个完整的工作示例来演示问题，那么尝试从您的小片段中弄清楚发生了什么要困难得多。

> self.components 包含窗口的所有组件

这可能是你的问题。同样，这是一个猜测，因为您没有显示该`create`方法，但是如果您的构造函数没有`clickCallback`为每个*实例*初始化一个成员，那么它将使用类本身中的表。

这是一个说明问题的示例：

```
component = {}
component.__index = component

component.clickCallback = {}

function component.create()
  return setmetatable({}, component)
end

function component:addClickHandler(handler)
  table.insert(self.clickCallback, handler)
end

function component:click(x,y)
  for _,callback in pairs(self.clickCallback) do
      callback(x,y)
  end
end

a = component.create()
b = component.create()

a:addClickHandler(function(x,y) print("a", x, y) end)
b:addClickHandler(function(x,y) print("b", x, y) end)

a:click(10,20)
b:click(11,22) 
```

这是输出，它显示了您描述的症状：

```
a       10      20
b       10      20
a       11      22
b       11      22 
```

换句话说，调用会调用and`a:click`的处理程序，因为表在类本身中，由该类的所有实例共享。修复它确保每个实例都有自己的处理程序表：`a``b``clickCallback`

```
component = {}
component.__index = component

function component.create()
  return setmetatable({ clickCallback = {}}, component)
end

function component:addClickHandler(handler)
  table.insert(self.clickCallback, handler)
end

function component:click(x,y)
  for _,callback in pairs(self.clickCallback) do
      callback(x,y)
  end
end

a = component.create()
b = component.create()

a:addClickHandler(function(x,y) print("a", x, y) end)
b:addClickHandler(function(x,y) print("b", x, y) end)

a:click(10,20)
b:click(11,22) 
```

输出：

```
a       10      20
b       11      22 
```

# php - Mysql 忠告：两个字段值相同

> ID：11487848
> 
> 赞同：0
> 
> 时间：2012-07-14T22:27:50.633
> 
> 标签：php, mysql, mysqli

我正在构建一个原始模板系统，并对某个用户级别可以访问的模板数量进行一些限制。所以我有一些这样的代码

```
if (is_premium($session_user_id)==true){
    $userlevel = premium_level($session_user_id);
} else {
    //if the user is not premium
    $userlevel = 0;
} 
```

然后在mysql上我有：

```
SELECT FROM `galleries` where `UserLevel` = 0 and `UserLevel` ='".$userlevel."' 
```

因此，任何用户级别高于 0 的用户都可以访问所有免费用户模板以及他的用户级别模板。希望您仍然清楚，因为我不确定这是最好的方法，但无论如何。

因此，无论哪种情况，查询都将包含两个值第一个：UserLevel` = 0，始终为 0，第二个可能会根据用户级别而有所不同，但如果用户级别为 0（免费用户），查询将像这样执行：

```
 SELECT FROM `galleries` where `UserLevel` = 0 and `UserLevel` =0 
```

我只想问，这有什么问题吗？其中 userlevel=0 和 userlevel=0 ？

我想抽出一些时间来构建条件查询。

谢谢你。

**更新：** 所以在您的反馈之后，我决定进行条件查询。感谢您的时间。这是它现在的样子：

```
if (is_premium($session_user_id)==true){
    //Check premium accont level
    $userlevel = premium_level($session_user_id);
    $statement = "`galleries` where `UserLevel` = 0 OR `UserLevel` ='".$userlevel."' ";
} else {
    //if the user is not premium
    $userlevel = 0;
    $statement = "`galleries` where `UserLevel` = 0";
} 
```

我认为这种方式更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:30:41.847

当两个`UserLevel`值不相同时，您将不会得到任何结果。你应该改变它`AND`，`OR`这样它就可以工作了。

```
WHERE `UserLevel` = 0 AND `UserLevel` = 1; // no results, can't be 1 AND 0 
```

而是使用：

```
WHERE `UserLevel` = 0 OR `UserLevel` = 1; // returns values where level = 0 OR level = 1 
```

# iphone - UIKeyboardTypeDecimalPad 中的小数点不能用于数学计算

> ID：11487850
> 
> 赞同：2
> 
> 时间：2012-07-14T22:28:17.873
> 
> 标签：iphone, objective-c, ios, keyboard, uitextfield

我正在使用键盘类型：`UIKeyboardTypeDecimalPad`用于两个`UITextField`对象。尝试执行添加时，我会根据当前的语言环境得到不同的结果：

案例1：美国格式：小数点`.`按预期出现。如果我添加 12.3（文本字段 1）+ 12.3（文本字段 2），答案将是 24.6。这就是我想要的。但：

案例 2：埃及 格式：小数点显示为`,`. 如果我重复相同的计算，答案将是 24。小数部分被忽略。有解决办法吗？

注意：我使用的`[textField.text floatValue]`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T22:31:25.170

因为`floatValue`进行非本地化扫描，所以它需要“美国格式”。

您可以使用 NSScanner 对象对字符串中的数值进行本地化扫描。

请参阅：[字符串编程指南：扫描仪](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html "字符串编程指南：扫描仪")

注意最后一段：

> **本土化**
> 
> 扫描器的某些扫描行为基于区域设置，该区域指定了值表示的语言和约定。NSScanner 仅使用区域设置的小数分隔符定义（由名为 NSDecimalSeparator 的键给出）。您可以使用localizedScannerWithString: 创建一个带有用户区域设置的扫描器，或者使用setLocale: 显式设置区域设置。如果您使用未指定区域设置的方法，则扫描程序会采用默认区域设置值。

另请参阅：[如何在 Objective-C 中进行字符串转换？](https://stackoverflow.com/questions/169925/how-to-do-string-conversions-in-objective-c)

例子：

```
NSScanner *scanner = [NSScanner localizedScannerWithString:textField.text];
double mynumber;
if([scanner scanDouble: &mynumber]){
  // do something
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:45:08.807

您可以使用：

```
double number = [[self.myTextField.text stringByReplacingOccurencesOfString:@”,” withString:@”.”] doublevalue]; 
```

这适用于所有语言。

# c# - 具有自动“加/减”功能的 C# Numeric UpDown

> ID：11487852
> 
> 赞同：0
> 
> 时间：2012-07-14T22:28:23.383
> 
> 标签：c#, winforms

我有一个`NumericUpDown`控件，我希望单独文本框中的值根据用户输入的输入（向上或向下）减少或增加

我用什么事件或代码来完成这个？我试过了，但运行时出错

> “无法将‘System.Windows.Forms.NumericUpDown’类型的对象转换为‘System.IConvertible’类型。

```
 int UpDownNum;
  int NumBank;
  int TV = 0
  private void UpDown1_MouseUp(object sender, MouseEventArgs e)
    {
        UpDownNum = (Convert.ToInt32(UpDown1));
        NumBank = (Convert.ToInt32(NumTextbox.Text));

        TV = NumBank - UpDownNum;
        NumTextbox.Text = (Convert.ToString(TV)); 
```

我在做错事吗？还是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:34:15.167

异常是由将`NumericUpdown`控件转换为整数引起的。那是行不通的。您需要使用该[`NumericUpdown.Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value%28v=vs.100%29.aspx)属性。

我认为这 [`ValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.valuechanged.aspx)是您正在寻找的事件：

```
private decimal oldValue = 0;

private void numericUpDown1_ValueChanged(object sender, EventArgs e)
{
    NumericUpDown UpDown1 = (NumericUpDown)sender;
    decimal diff = UpDown1.Value - oldValue;
    oldValue = UpDown1.Value;
    int numBank = int.Parse(NumTextBox.Text);
    decimal newValue = numBank + diff;
    NumTextBox.Text = newValue.ToString();
} 
```

**编辑**：

我知道获取值的旧值和新值之间差异的唯一方法`NumericUpDown`是手动保存旧值（例如在成员变量中）并在计算差异后在 ValueChanged 中更改它（请参阅编辑的代码多于）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:35:05.753

你桅杆捕捉[`NumericUpDown.ValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.valuechanged.aspx)事件，并获得[`NumericUpDown.Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value%28v=vs.100%29.aspx)财产：

```
private void NumericUpDown1ValueChanged(object sender, EventArgs e)
{
    var num = ((NumericUpDown) sender).Value;
    newTextBox.Text = num.ToString();
} 
```

# c++ - 需要一个对 windows.h 中的所有定义进行取消定义的头文件

> ID：11487857
> 
> 赞同：9
> 
> 时间：2012-07-14T22:29:04.600
> 
> 标签：c++, windows, winapi

为了整洁，我`#undef`想要`windows.h`.

例如：

```
namespace os_stuff
{
    #include <windows.h>

    // ARGH! Macros everywhere!

    // at least I can keep the rest of the API in here
}

// include a bunch of files here that use the Windows API through os_stuff

namespace os_stuff
{
    #include <unwindows.h> // <- #undefs all that was #defined in windows.h
}

// All clean, as though windows.h was never here. Though os_stuff, used nowhere else,
// still has all of the API declarations in it (which is OK). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:53:42.590

与其取消定义一切，不如避免一开始就定义它们。您可以通过将模块的第一部分（作为单独的源文件）显式传递给[预处理器](http://en.wikipedia.org/wiki/C_preprocessor)并在模块的主源文件中包含预处理器输出而不是原始源代码来实现此目的。

我使用 Visual Studio 2010 进行了尝试。在我的试用中，我创建了三个源文件。这是 headers.cpp，类似于示例代码的第一部分：

```
namespace os_stuff
{
#undef _MSC_EXTENSIONS
#define _WIN32_WINNT 0x0601
#include <windows.h>
}

#include "xyzzy.h" 
```

这`#undef _MSC_EXTENSIONS`是为了防止包含`sourceannotations.h`，因为从命名空间中包含该文件时会生成错误。

这是 xyzzy.h，用于从您的示例代码中演示“在此处包含一堆文件”：

```
os_stuff::DWORD myFunction(os_stuff::HANDLE h); 
```

这是 test.cpp，类似于示例代码的“全部干净”部分：

```
#include "headers.h"

int main(int argc, char ** argv)
{
  os_stuff::DWORD UNALIGNED;
  os_stuff::HANDLE h = 0;
  UNALIGNED = myFunction(h);
  return UNALIGNED;
} 
```

请注意，我们使用 UNALIGNED 作为变量名，不是因为它有意义，而是作为一个示例，如果您`windows.h`直接包含将无法使用（因为它扩展为 __unaligned 关键字）。

在 Visual Studio 2010 命令行中，`headers.h`像这样创建：

```
cl /P headers.cpp /Fiheaders.h 
```

/P 选项[在此处记录](http://msdn.microsoft.com/en-us/library/8z9z0bx6)。

然后你可以`test.cpp`用通常的方式编译：

```
cl test.cpp 
```

（显然在这种情况下程序不会链接，因为我们还没有定义 myFunction，但它编译得非常愉快。）

`headers.h`稍微摆弄一下，自动化构建而不是从命令行进行构建应该不会太难。

在某些 C++ 编译器中，预处理器实际上是一个单独的可执行文件（这是传统模型），但如果不是这样，仍然应该有一个选项来运行预处理器而不调用编译器。

# google-oauth - OAuth 登录后从 Google Apps 中检索用户列表

> ID：11487859
> 
> 赞同：0
> 
> 时间：2012-07-14T22:29:17.167
> 
> 标签：google-oauth

是否可以使用 OAuth 和 Feed 从第三方应用程序中检索 Google Apps 用户列表？我有使用网站管理员提要检索所有网站的工作脚本。这里有一些信息，但仍然没有成功： [https](https://developers.google.com/google-apps/profiles/) ://developers.google.com/google-apps/profiles/ 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:23:05.343

我找到了解决方案。

只需使用 oAuth，范围应该是：

[https://apps-apis.google.com/a/feeds/user/](https://apps-apis.google.com/a/feeds/user/)

然后 API 调用应该从这个提要中检索用户：

[https://apps-apis.google.com/a/feeds/%domain%/user/2.0](https://apps-apis.google.com/a/feeds/%domain%/user/2.0)

在这里你可以测试它：

[https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

使用 Google 配置 API。

# python - GAE python：如何在提交表单之前将表单输入值传递给操作？

> ID：11487868
> 
> 赞同：0
> 
> 时间：2012-07-14T22:30:53.973
> 
> 标签：python, html, google-app-engine, templates, jinja2

我想在用户按下表单提交按钮之前（在执行 POST 方法之前）将表单输入值传递给操作。我的目标是：用户填写一个输入字段，当他进入第二个字段时，服务器中的 python 代码执行一些计算（比如根据他输入的名字猜测用户的性别）。是否可以使用 python gae 和 jinja2 html 模板？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:30:43.193

就像丹尼尔说的，你需要使用 Javascript。您可以在服务器端定义一个处理程序，然后将回调绑定到您的第一个字段上的`input`or`keyup`事件，该字段使用 AJAX 将数据发布到后端并获取结果。我最喜欢的 AJAX 库是[reqwest](https://github.com/ded/Reqwest)，我通常使用[bean](https://github.com/fat/bean)进行事件处理，但许多其他人同时使用[jQuery](http://jquery.org/)。

# c - 覆盖到c中的特定行

> ID：11487869
> 
> 赞同：2
> 
> 时间：2012-07-14T22:31:10.273
> 
> 标签：c, file, fseek, fputs, ftell

我在我的程序中生成了一个大约 2000 行文本的文件，每一行都有一个员工的信息，它的输出是这样的

> 1 1 ISAAC FONECA 58 C 1600 1310.40 6 1 0.22 2164.80 1
> 2 1 Manuel Gutierrez 22 D 1700 1523.37 4 1 0.13 897.26 1
> 3 1 Daniel Bernal 34 C 1600 1195.84 2 1 0.26 836.16 1
> 4 1 Miguel Gonzalez 43 E 1800 1195.84 0 1 0.15 0.00 1

但是每当我编辑员工信息时，我都必须更新文件，我正在做的是我搜索该行并尝试重写它

我已经看到有同样问题的人的以下问题，但是当我尝试写入文件时，它总是写入文件末尾

[覆盖文本文件上的特定行？](https://stackoverflow.com/q/1832757)

这是我的代码：

```
datos = fopen(archivo,"a+");
for(i=0;i<num;i++){
    // buscar la linea
    fgets(lineaA,100,datos);
    // sobreescribir
    if(i == (num-1))
        cursor = ftell(datos);                      
}

cursor -= strlen(lineaA) - 1;
fseek(datos,cursor,SEEK_CUR);

fputs(linea2,datos);            
fclose(datos); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:45:56.880

你几乎不能这样做。

您可以使用`fseek`转到文件中的特定位置，并且可以将数据写入该位置（您可能想要使用`"r+"`模式）。

但是文件通常存储为字节序列（或字符），而不是行序列。

如果您小心地写入与行中已经存在的字节数完全相同的字节，您可能会侥幸成功——但在您的示例中，行的长度不同，因此这不是一个选项。

例如，您可以用空格填充每一行，因此它们的长度都相同，但是如果您使用普通文本编辑器修改文件，则很容易破坏布局。

对于文本文件，通常的做法是将文件读入内存，修改内存中的表示，然后重新创建整个文件。您可能希望将内容写入一个新的临时文件，然后在确认没有写入错误后重命名它。

这是文本编辑器通常做的事情。

（不要太担心效率；2000 行并不是那么大，而且你不会注意到编写它们所花费的时间。）

有替代方案。您可以定义具有固定长度记录的二进制格式，也可以使用数据库。或者您可以在文件中添加新行，并将重复项*视为*已被删除（但如果您进行大量更新，这可能会导致文件变得非常大）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:50:11.983

除非这类似于家庭作业，您需要自己滚动所有代码，否则切换到数据库可能是最简单的。鉴于您的其余代码都在工作，[SQLite](http://www.sqlite.org/)可能是最明显的选择。

如果你真的想坚持（至少类似于）你当前的格式和代码，我可能会写数据，每行填充到 64 或 128 字节（如果你有一些更长的记录，隔离它们，例如将它们全部移到文件末尾，或将它们放在单独的文件中）。这种方式（大多数？）编辑可以在不影响其他行的情况下完成。如果您有员工行的索引，您还可以直接查找该行，而不是阅读其所有前辈来找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:44:15.380

您使用“a+”选项打开文件，它只允许您附加到文件，而不是覆盖。你想使用“r+”

```
datos = fopen(archivo,"r+); 
```

# iphone - UIImageView 不替换另一个视图

> ID：11487874
> 
> 赞同：0
> 
> 时间：2012-07-14T22:31:38.033
> 
> 标签：iphone, objective-c, ios, uiview, uiimageview

我有这个代码来创建我原来的 UIView：

```
itemView = [[UIView alloc] initWithFrame:CGRectMake(self.frame.size.width - CELL_HEIGHT - 10, 0, CELL_HEIGHT, CELL_HEIGHT)];
itemView.backgroundColor = [UIColor redColor];
[self addSubview:itemView]; 
```

然后我稍后会有这段代码：

```
UIImageView *accessory = [[UIImageView alloc] initWithFrame:cell.itemView.frame];
accessory.contentMode = UIViewContentModeCenter;
accessory.image = [UIImage imageNamed:@"icon_settings_fwd.png"];

itemView = accessory; 
```

但我看到的只是红色。它没有用 UIImage 替换它。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:36:53.303

itemView 只是一个指向具有红色背景颜色的 UIView 实例的指针。当您将其作为子视图添加到另一个视图时，父视图会保留新添加的子视图，因此从现在开始，维护它自己的指针副本。它对您重用原始指针一无所知。您必须首先删除第一个子视图（具有红色背景颜色的子视图），然后将第二个视图添加为子视图。

# c++ - 使用 C++ 或任何 Windows 脚本语言格式化文本数据

> ID：11487878
> 
> 赞同：1
> 
> 时间：2012-07-14T22:32:42.320
> 
> 标签：c++, windows, file, text, formatting

这可能是一项简单的任务，但目前我真的不知道如何以简单的方式做到这一点。我有以下情况，我有一个用 COFFEE 编写的脚本，COFFEE 是 3D 程序 Cinema 4D 的脚本语言。现在，此脚本正在将以下格式的位置数据写入文本文件（在这种情况下为 rtf，但也可以是 .txt）。

```
0  0.0  471.2  0.0
1  0.0  470.5  0.0
2  0.0  468.8  0.0
3  0.0  465.9  0.0
4  0.0  461.9  0.0
5  0.0  456.8  0.0
6  0.0  450.5  0.0
7  0.0  443.2  0.0
8  0.0  434.8  0.0
9  0.0  425.2  0.0 
```

框架，X，Y，Z。

现在我需要做的是把这个位置数据变成这种格式：

```
Transform   Position
    Frame   X pixels    Y pixels    Z pixels    
    0   0.0    471.2    0.0 
    1   0.0    470.5    0.0 
    2   0.0    468.8    0.0 

End of Keyframe Data 
```

它在这里实际上不可见，但这里没有空格，所有内容都用制表符隔开（也许将其复制到记事本以真正看到制表符）。重要的是我在每个数字之间都有制表符，可以有空格，但我每次都需要一个制表符。所以最重要的部分是，我如何从第一个数据集中获取这些数字并让程序在每个数字之间添加一个 \t ？

我尝试在脚本中执行此操作，但如果我使用制表符而不是位置之间的几个空格，脚本会失败。我搜索了很多，但找不到任何好的解决方案。我熟悉 C++ 和一些批处理脚本，但我对每个解决方案都很满意，即使我必须学习另一种语言的基础知识。

我试图在 C++ 中找到一种方法，但我想出的方法无法格式化 n 行，而且每一行都太复杂了。帧数/行数每次都不同，所以我从来没有固定的行数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:40:09.843

这样的事情可能会奏效。我没有对数字进行任何特殊格式化，所以如果你需要，你需要添加它。如果您担心输入文件格式错误，例如一行没有足够的数字，那么您需要添加一些额外的错误检查来防范它。

```
#include <fstream>
#include <iostream>
#include <vector>

bool Convert(const char* InputFilename, const char* OutputFilename)
{
    std::ifstream InFile(InputFilename);
    if(!InFile)
    {
        std::cout << "Could not open  input file '" << InputFilename << "'" << std::endl;
        return false;
    }

    struct PositionData
    {
        double FrameNum;
        double X;
        double Y;
        double Z;
    };
    typedef std::vector<PositionData> PositionVec;

    PositionVec Positions;
    PositionData Pos;
    while(InFile)
    {
        InFile >> Pos.FrameNum >> Pos.X >> Pos.Y >> Pos.Z;
        Positions.push_back(Pos);
    }

    std::ofstream OutFile(OutputFilename);
    if(!OutFile)
    {
        std::cout << "Could not open output file '" << OutputFilename << "'" << std::endl;
        return false;
    }

    OutFile << "Transform\tPosition\n\tFrame\tX pixels\tY pixels\tZ pixels" << std::endl;
    for(PositionVec::iterator it = Positions.begin(); it != Positions.end(); ++it)
    {
        const PositionData& p(*it);
        OutFile << "\t" << p.FrameNum << "\t" << p.X << "\t" << p.Y << "\t" << p.Z << std::endl;
    }
    OutFile << "End of Keyframe Data" << std::endl;
    return true;
}

int main(int argc, char* argv[])
{
    if(argc < 3)
    {
        std::cout << "Usage: convert <input filename> <output filename>" << std::endl;
        return 0;
    }
    bool Success = Convert(argv[1], argv[2]);

    return Success;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T02:29:13.887

另一个使用正则表达式的例子

```
#include <fstream>
#include <iostream>
#include <regex>
#include <algorithm>
int main()
{
    using namespace std;

    ifstream inf("TextFile1.txt");
    string data((istreambuf_iterator<char>(inf)), (istreambuf_iterator<char>()));

    regex reg("([\\d|\.]+)\\s+([\\d|\.]+)\\s+([\\d|\.]+)\\s+([\\d|\.]+)");  
    sregex_iterator beg(data.cbegin(), data.cend(), reg), end;

    cout << "Transform\tPosition" << endl;
    cout << "\tFrame\tX pixels\tY pixels\tZ pixels" << endl;
    for_each(beg, end, [](const smatch& m) {
        std::cout << "\t" << m.str(1) << "\t" << m.str(2) << "\t" << m.str(3) << "\t" << m.str(4) << std::endl;
    });
    cout << "End of Keyframe Data" << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T02:55:44.537

有兴趣的示例 Python 脚本。

```
#!c:/Python/python.exe -u
# Or point it at your desired Python path
# Or on Unix something like: !/usr/bin/python

# Function to reformat the data as requested.
def reformat_data(input_file, output_file):

    # Define the comment lines you'll write.
    header_str = "Transform\tPosition\n"
    column_str = "\tFrame\tX pixels\tY pixels\tZ pixels\n"
    closer_str = "End of Keyframe Data\n"

    # Open the file for reading and close after getting lines.
    try:
        infile = open(input_file)
    except IOError:
        print "Invalid input file name..."
        exit()

    lines = infile.readlines()
    infile.close()

    # Open the output for writing. Write data then close.
    try:
        outfile = open(output_file,'w')
    except IOError:
        print "Invalid output file name..."
        exit()

    outfile.write(header_str)
    outfile.write(column_str)

    # Reformat each line to be tab-separated.
    for line in lines:
        line_data = line.split()
        if not (len(line_data) == 4):
            # This skips bad data lines, modify behavior if skipping not desired.
            pass 
        else:
            outfile.write("\t".join(line_data)+"\n")

    outfile.write(closer_str)
    outfile.close()

#####
# This below gets executed if you call
# python <name_of_this_script>.py
# from the Powershell/Cygwin/other terminal.
#####
if __name__ == "__main__":
    reformat_data("/path/to/input.txt", "/path/to/output.txt") 
```

# objective-c - 在 Objective-C 中快速将 URL 字符串转换为图像

> ID：11487883
> 
> 赞同：1
> 
> 时间：2012-07-14T22:33:33.650
> 
> 标签：objective-c, ios, url, nsstring, uiimage

我需要将 URL 字符串转换为 UIImage。我目前正在使用以下代码：

```
NSString *stringEncodingUrl = [[[ourWorkIcon objectAtIndex:i] valueForKey:@"Pic_s"] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSURL *Imageurl = [NSURL URLWithString:urlString];
NSData *data =  [NSData dataWithContentsOfURL:Imageurl]; 
UIImage *image = [[UIImage alloc] initWithData:data];` 
```

但这需要很长时间。所以我的问题是：如何更快地将 URL 转换为图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:39:10.683

简短的回答：不，你不能。

长答案：从 Web 服务器加载图像（通常是相对较大的文件）是一项昂贵且缓慢的操作，并且您无法真正控制网络的传输速度/带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:39:47.177

H2CO3 是对的。您只能通过在后台执行此操作（因此延迟不会阻塞您的整个 UI ...在您尝试再次检索之前，您已经下载了它）。

# regex - 将所有 URL 重定向到一个文件，指向某个目录的 URL 除外

> ID：11487884
> 
> 赞同：1
> 
> 时间：2012-07-14T22:33:40.630
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试将所有 URL 重定向到 index.php，所以这个 URL：

> domain.com/home/stats

将指向：

> domain.com/index.php

反而。

但是，我不想要指向“公共”目录的 URL，例如：

> domain.com/public/images

重定向到 index.php。

我已经尝试了许多不同的重写，我在这个网站上找到了，但是到目前为止没有一个是 100% 的。他们都刚刚将每个 URL 重定向到 index.php，即使您尝试访问公共目录。

这是我现在拥有的：

```
RewriteRule !^/public/.*$ index.php 
```

我对 RegEx 知之甚少，但我的理解是使用“！” 字符的意思是“除此之外”。但显然，在这种情况下，它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:32:13.680

您可以尝试以下方法：

```
RewriteBase /
RewriteRule ^(public/.*) $1 [L]
RewriteRule ^index.php$ index.php [L]
RewriteRule ^(.*) index.php 
```

第二行是让 URI 保持原样。第三行是避免 index.php 陷入无限循环。第一个和第二个`ReWriteRule`应在处理后立即停止 ( `[L]`)。最后一个适用于其他一切。

# perl - 我可以使用 Perl 脚本在 Mathematica 结果中寻找和计算不同类型吗？

> ID：11487885
> 
> 赞同：1
> 
> 时间：2012-07-14T22:33:44.960
> 
> 标签：perl, pattern-matching, string-matching

嗨，我试图在 Mathematica 中生成的大型输出文件中寻找三种不同的模式。我想用 perl 脚本分析。这是输出文件：

```
{{{4,1,2},0,{2,2,2},{4,4,2},{3,5,2},{4,11,0},0,{3,6,2},0,{4,7,2}},{{3,8,2},{1,22,0},   {3,3,2},{1,16,0},{1,9,0},{2,10,0},{3,74,1},{2,18,2},{3,12,0},{2,13,0}},{{1,14,0},0,{2,15,0},0,{1,17,0},0,0,{4,19,1},{4,20,0},{3,30,0}},{{3,38,0},{2,21,0},{1,23,0},{1,24,0},{3,25,0},{1,26,0},{2,27,0},0,{1,28,0},{2,29,0}},{0,{3,32,0},{4,33,0},0,{3,41,0},{3,34,0},{3,36,0},{4,43,0},{4,37,0},{2,31,0}},{{4,46,0},{3,39,0},{1,40,0},{4,49,0},{1,35,0},{3,42,0},{4,44,0},0,0,{4,45,0}},{{2,47,0},0,{1,48,0},{1,57,0},{1,50,0},{1,51,0},{1,60,0},{3,52,0},0,{2,53,0}},{{1,54,0},{2,55,0},0,{1,56,0},{2,58,2},0,{4,59,2},0,{2,68,0},{3,69,0}},{0,{4,62,0},{4,71,2},{1,63,0},{3,64,2},0,{1,65,2},{4,67,0},0,{4,61,2}},{{2,76,2},{2,70,1},0,0,{4,72,2},{4,73,2},0,0,{3,66,2},{1,75,2}}} 
```

我需要计算在输入文件中找到了多少 {\d,\d,0} 和 {\d,\d,1} 和 {\d,\d,2} 。我的代码是这样的：

```
#!/usr/bin/perl

use strict;
use warnings;

my $count0 = 0;
my $count1 = 0;
my $count2 = 0;
my $totalcount = 0;

open(MYINPUTFILE, "ultimo.in"); # open for input
my @lines = <MYINPUTFILE>; # read file into list

foreach ($#lines) { # loop thru list
    $count0++ while $lines[0] =~ /\{\d\W\d\W0\}/g;
    $count1++ while $lines[0] =~ /\{\d\W\d\W1\}/g;
    $count2++ while $lines[0] =~ /\{\d\W\d\W2\}/g;
    $totalcount++ while $lines[0] =~ /\{\d\W\d\W\d\}/g;
    }       

print "\n"."Esta es la cuenta de Suceptibles0 es :"."$count0"."\n";
print "\n"."Esta es la cuenta de Infectados1 es :"."$count1"."\n";
print "\n"."Esta es la cuenta de Recuperados2 es :"."$count2"."\n";
print "\n"."El total de agentes en esta grilla es:"."$totalcount"."\n";

close(MYINPUTFILE);

exit; 
```

输出是：

```
Esta es la cuenta de Suceptibles0 es :1

Esta es la cuenta de Infectados1 es :0

Esta es la cuenta de Recuperados2 es :8

El total de agentes en esta grilla es:9

El total de agentes en esta grilla es:0

El total de agentes en esta grilla es:0 
```

但这是一个错误的结果，因为程序不会计算字符串中存在的所有模式。

我如何修改程序来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:47:58.537

您的代码中有几个奇怪的地方。

1.  当您可能要迭代 @lines 时，您正在迭代标量 $#lines。由于您编写循环内部的方式，这不会产生负面影响。但是，如果您的意图是在将来的版本中处理包含多行的文件，它会的。

2.  您只匹配单个数字。您可能需要添加一个量词，最好是“+”

3.  如果每个组内的分隔符始终是逗号，则专门匹配逗号而不是非单词字符。它将使您的正则表达式更具可读性并且效率更高。

这是我最终得到的代码。注意：我尚未验证这些计数。我让你来做这件事，但问题 #2 是导致你报告不足的主要原因。

```
#!/usr/bin/perl

use strict;
use warnings;

my $count0 = 0;
my $count1 = 0;
my $count2 = 0;
my $totalcount = 0;

open(MYINPUTFILE, "ultimo.in"); # open for input
my @lines = <MYINPUTFILE>; # read file into list

foreach (@lines) { # loop thru list
    $count0++ while $lines[0] =~ /\{\d+,\d+,0\}/g;
    $count1++ while $lines[0] =~ /\{\d+,\d+,1\}/g;
    $count2++ while $lines[0] =~ /\{\d+,\d+,2\}/g;
    $totalcount++ while $lines[0] =~ /\{\d+,\d+,\d\}/g;
    }       

print "\n"."Esta es la cuenta de Suceptibles0 es :"."$count0"."\n";
print "\n"."Esta es la cuenta de Infectados1 es :"."$count1"."\n";
print "\n"."Esta es la cuenta de Recuperados2 es :"."$count2"."\n";
print "\n"."El total de agentes en esta grilla es:"."$totalcount"."\n";

close(MYINPUTFILE);

exit; 
```

# visual-studio-2010 - VC++ DLL工程启动外部程序进行调试

> ID：11487892
> 
> 赞同：1
> 
> 时间：2012-07-14T22:34:18.113
> 
> 标签：visual-studio-2010, visual-c++

我正在使用 Visual Studio 2010。我正在查看项目属性，但我在哪里提到要打开哪些外部程序来启动 DLL 的调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:20:40.873

配置属性 -> 调试 -> 命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:40:09.263

你调试一个*进程*。

您可以单步执行任何具有可用符号的代码，无论该代码是在 .exe 中还是在 .exe 调用的 .dll 中。

您可能遇到的主要问题是调试“​​托管代码”（即 .Net dll 或 exe 中的字节代码）与“非托管代码”（实际的 Intel x86 指令）。如果您的项目包含两种二进制文件的组合，那么您需要进行“混合模式调试”。

这里有更多信息：

[http://msdn.microsoft.com/en-us/library/sc65sadd](http://msdn.microsoft.com/en-us/library/sc65sadd)

# php - PHP拆分字符串两次

> ID：11487893
> 
> 赞同：-1
> 
> 时间：2012-07-14T22:34:45.987
> 
> 标签：php, mysql

我有一个带有交易字段的数据库，它显示了我网站上带来的产品。我正在尝试开发一个管理界面，我可以在其中看到带来的产品。

字符串看起来像这样 `37,2:27,1:5,3:94,10:49,15:`

这基本上意味着客户订购了编号为 37 且数量为 2 的产品。他们的交易中包括编号为 27 的产品编号为 1，依此类推。

`product_id,ordered_quantity:nextproduct_id,next_orderedquantity`.

为了显示此信息，我需要将其分解。我试过 php explode 但遇到了一些麻烦。所以我们需要将冒号上的产品`:`和数量和id分开`comma`。字符串可以是一个产品或多个产品。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:38:45.993

```
$ids = '37,2:27,1:5,3:94,10:49,15';
$products = explode(':', $ids);
$productAndQuantity = array();
foreach ($products as $product) {
    $exploded = explode(',', $product);
    $productAndQuantity[$exploded[0]] = $exploded[1];
} 
```

你得到一个产品 id - 数量数组。

这种存储数据的方式是不可扩展且容易出错的。为什么不使用具有以下字段的表：userId、productId、数量？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T22:41:08.073

这是我一起扔的东西-

```
$str = '37,2:27,1:5,3:94,10:49,15:';

$a = explode(':',$str); // split by colon ":"

$data = array(); 
foreach ($a as $product) {  // iterate over each product
    $item = explode(',',$product); // split product and quanitity
    $data[$item[0]] = array(  // use product_id [0] as array key
      'product_id'=>$item[0],
      'quantity'=>$item[1]
    );
}

// in this example there is a trailing colon - this removes it.    
array_pop($data);

print_r($data); 
```

* * *

```
Array
(
    [37] => Array
        (
            [product_id] => 37
            [quantity] => 2
        )

    [27] => Array
        (
            [product_id] => 27
            [quantity] => 1
        )

    [5] => Array
        (
            [product_id] => 5
            [quantity] => 3
        )
    ...
) 
```

# php - 如果我将其限制为一行，我应该检查多行吗？(mysqli)

> ID：11487895
> 
> 赞同：0
> 
> 时间：2012-07-14T22:35:04.473
> 
> 标签：php, mysql, mysqli

我正在从 MySQL 转换为 MySQLi，我注意到如果我在 mysql 查询中限制为一行，是否有必要检查行数是否为 1？毕竟，可以返回的行是 0 或 1。

这是我目前使用的代码（未经测试，因为我正在从 mysql 转换为 mysqli）：

```
$query = "SELECT email,auth,username FROM user_list WHERE id = '".$user["id"]."' LIMIT 1";
$query = $mysqli->query($query);

if($query and $query->num_rows() == 1)
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:44:09.287

您应该检查的所有内容是查询是否返回 0 行或更多行。它不会返回超过由`LIMIT`子句指定的内容，但如果没有找到匹配项，它可以返回 0。

* * *

顺便说一句，MySQLi 只是一个扩展，允许您访问 MySQL 4.1+ 提供的功能。它仍然是 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:40:39.553

在 MySQL 中，保证返回的行数不会超过`LIMIT`子句中指定的行数。您无需担心被给予超过一排。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:54:29.343

由于您的查询`WHERE`在表的主键上包含一个子句，因此它永远不会返回多于一行。
因此，在这个查询中，`LIMIT 1`完全没有用（但一点也不错）。

我会删除它。

```
$query = "SELECT email,auth,username FROM user_list WHERE id = '".$user["id"]."'";
$query = $mysqli->query($query);

if($mysqli->errno==0 and $query->num_rows == 1)
{ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-10-05T19:57:19.187

根本不需要检查行数。您应该只检查查询是否返回了您需要的数据。

```
$query = $mysqli->query($query);
$single_row = $query->fetch_assoc();

if($single_row) {
    // There was some data returned. 
} 
```

这同样适用于可以返回多行的查询。

```
$query = $mysqli->query($query);
$data = $query->fetch_all(MYSQLI_ASSOC);

if($data) {
    // There was some data returned. 
} 
```

# c - 在 SIGINT 上释放分配内存的最佳实践

> ID：11487900
> 
> 赞同：3
> 
> 时间：2012-07-14T22:35:38.400
> 
> 标签：c, memory-management, sigint

我有一个简单的程序，它使用`select`类似的东西来复用 IO。**为了中断“服务器”进程，我集成了一个对SIGINT**
做出反应的 sig_handler 。

 **每次分配内存时，包含方法都会释放自身或调用方法。

使用`valgrind`显示，有一些分配没有被释放。
也许不需要它，但我想了解处理信号的最佳方法。*按STRG + C*
时 似乎`free`没有调用调用。 所以用中断条件退出循环是没有意义的，这是我的第一种方法。

 *在关闭整个程序之前，有没有可能清理所有东西？

感谢您的任何提示和建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T00:14:17.600

Valgrind 只是一个查找内存泄漏的工具，而不是一个必须注意其建议的预言机。制作“Valgrind-clean”程序是一个有价值的目标，但不要让它失控。问自己一些有关该计划的问题。

1.  `SIGINT`当程序收到一个或什么时，它是否需要做任何`SIGQUIT`事情？它是否需要进行某种干净的关机？例如，服务器可能决定完成所有打开请求的处理，或者至少向连接的客户端发送关闭消息。

2.  突然终止是否总是留下某些障碍？然后，您可以从 Valgrind 取消这些报告，而无需花费额外的时间来释放已经将被释放的内存。

**简单来说，**`free`调用一个即将退出的程序只有两个原因。

1.  如果这是取消 Valgrind 消息的最简单方法（即，无需阅读 Valgrind 手册）

2.  如果它使您的代码更简单。

否则，不要`free`在程序退出期间调用，因为它只会消耗 CPU 周期。

**处理 SIGINT：**我可以想到四种处理 SIGINT 的常用方法：

1.  使用默认处理程序。强烈推荐，这需要最少的代码，并且不太可能导致任何异常的程序行为。您的程序将简单地退出。

2.  使用`longjmp`立即退出。这是为喜欢不戴头盔骑快速摩托车的人准备的。这就像用图书馆电话玩俄罗斯轮盘赌。不建议。

3.  设置一个标志，并中断主循环的`pselect`/ `ppoll`。做对是一件很痛苦的事，因为你必须摆弄信号掩码。你只想中断`pselect`/ ，而不是像or这样`ppoll`的不可重入函数，所以你必须非常小心信号掩码之类的东西。不建议。您必须使用/而不是/ ，因为“p”版本可以自动设置信号掩码。如果您使用or ，则在您检查标志之后但在您调用/之前，信号可能会到达，这很糟糕。`malloc``free``pselect``ppoll``select``poll``select``poll``select``poll`

4.  创建一个管道以在主线程和信号处理程序之间进行通信。`select`始终在对/的调用中包含此管道`poll`。信号处理程序只是将一个字节写入管道，如果主循环成功地从另一端读取一个字节，则它干净地退出。强烈推荐。您还可以让信号处理程序自行卸载，因此不耐烦的用户可以点击`CTRL+C`两次以立即退出。

两种最简单和最简单的方法是#1 和#4。

**退出的程序没有任何泄漏。** 只有正在运行的程序才会有泄漏。一旦程序退出，所有内存都被释放（因此不再有泄漏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:22:22.113

这是我的简单且略显肮脏的解决方案。

```
#include <signal.h>

volatile bool gContinue; 

void handleCtrlC(int ) {
    gContinue = false;
}

int main () {
    gContinue = true;

    signal(SIGINT, handleCtrlC);

   ... allocate memory ...

    sigset_t sigmask;
    sigemptyset (&sigmask);  

    while (gContinue) {

        /*...*/
        ready = pselect(nfds, &readfds, &writefds, &exceptfds,
            timeout, &sigmask);
        /*...*/
    }

    ... free memory ...

    return 0;
} 
```

**编辑：**将 pselect 添加到循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:51:51.447

亚当亨特的建议会奏效，前提是您在调用`select`. 它必须紧接在之前，`EINTR`否则您的正常处理可能会跳过检查，因此退出将被延迟，直到您的下一个`select`返回真实事件。

```
while (gContinue) {
    /*set up some stuff for next select call*/
    do {
        if (gContinue == 0) break;
        nfds = select(...);
    } while (nfds == -1 && errno == EINTR);
    /*handle select return*/
} 
```

**编辑：** Dietrich Epp 指出标志检查和`select`调用之间存在竞争条件，只能通过调用`pselect`. `pselect`与 非常相似`select`，主要区别在于最后一个参数用作掩码来确定要阻止哪些信号。`pselect`因此，下面的代码示例结束了标志检查和调用之间的竞争：

```
sigset_t emptyset, blockset, origset;
sigemptyset(&emptyset);
sigemptyset(&blockset);
sigaddset(&blockset, SIGINT);

while (gContinue) {
    /*...*/
    sigprocmask(SIG_BLOCK, &blockset, &origset);
    do {
        if (gContinue == 0) break;
        nfds = pselect(..., &emptyset);
    } while (nfds == -1 && errno == EINTR);
    sigprocmask(SIG_SETMASK, &origset, NULL);
    /*...*/
}; 
```

另一种方法是将所有分配的元素注册到全局数据结构中，以便它们可以由`atexit`您安装的处理程序释放。如果你的代码最终会释放它，首先从全局数据结构中注销它；

```
m = malloc(sz);
register_allocation(m);
/*...*/
unregister_allocation(m);
free(m); 
```

并使用`atexit`：

```
void cleanup_allocations () {
    /*...*/
}

atexit(cleanup_allocations); 
```***

# c# - 如何更改 PictureBox 的图像？

> ID：11487901
> 
> 赞同：20
> 
> 时间：2012-07-14T22:35:55.943
> 
> 标签：c#, image, winforms, picturebox

我在 C# 中有一个程序，其中一个`PictureBox`对象位于`Form`. 如何更改其图片？可供选择的图片在 bin/Pics 中；它们是 jpeg 格式，如果这很重要的话..

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-14T22:39:27.147

为您的属性分配一个新[`Image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)对象。要从文件加载，您可以使用该方法。在您的特定情况下，假设当前目录是 under ，这应该加载 image ，例如：`PictureBox``Image``Image`[`Image.FromFile`](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromfile.aspx)`bin``bin/Pics/image1.jpg`

```
pictureBox1.Image = Image.FromFile("../Pics/image1.jpg"); 
```

此外，如果这些图像是静态的并且仅用作应用程序中的资源，则资源将比文件更适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-15T16:59:13.497

您可以使用 的`ImageLocation`属性`pictureBox1`：

```
pictureBox1.ImageLocation = @"C:\Users\MSI\Desktop\MYAPP\Slider\Slider\bt1.jpg"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-18T02:17:24.270

如果您在项目中将图像作为资源导入，则还有：

```
picPreview.Image = Properties.Resources.ImageName; 
```

其中*picPreview*是图片框的名称，*ImageName*是要显示的文件的名称。

*资源位于： *项目 --> 属性 --> 资源*

# c# - 将 Linq 查询表达式转换为点表示法

> ID：11487905
> 
> 赞同：4
> 
> 时间：2012-07-14T22:36:51.307
> 
> 标签：c#, linq

我刚开始学习LINQ。我编写了以下 linq 表达式来获取列表中重复 3 次的数字。

```
 var query = from i in tempList
             where tempList.Count(num => num == i) == 3
             select i; 
```

我想知道如何将其转换为点表示法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T22:40:59.377

你可以使用`Enumerable.GroupBy`：

```
var query = tempList
            .GroupBy(i => i)
            .Where(g => g.Count() == 3)
            .Select(g => g.Key); 
```

例如：

```
var tempList = new List<Int32>(){
    1,2,3,2,2,2,3,3,4,5,6,7,7,7,8,9
};
IEnumerable<int> result = tempList
 .GroupBy(i => i)
 .Where(g => g.Count() == 3)
 .Select(g => g.Key); 

Console.WriteLine(string.Join(",",result)); 
```

结果：3,7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:38:51.437

*文字*转换如下：

```
var query = tempList.Where(i => tempList.Count(num => num == i) == 3); 
```

正如 Tim 已经提到的，您也可以使用 GroupBy 来实现这一点：

```
var query = tempList.GroupBy(i => i).Where(g => g.Count() == 3).Select(g => g.Key); 
```

请注意，该`GroupBy`版本仅返回每个数字的*一​​个*副本，这与您的代码返回每个数字的三个副本不同。尽管我怀疑您宁愿只获得每个号码的一份副本。

# php - 防止用户篡改html

> ID：11487908
> 
> 赞同：1
> 
> 时间：2012-07-14T22:37:06.350
> 
> 标签：php

目前我有它，当用户回复一个线程时；我`$id = $_GET['id']`在回复表单中使用并将变量传递给隐藏的只读输入。

我使用的另一种方法是数据属性，我使用 jQuery 检索该属性，然后使用 ajax 提交表单。可以在 firebug 中更改数据属性。

什么是防止篡改 html 隐藏字段/数据属性的好方法？

我考虑过使用会话。例如，如果用户打开了多个窗口：page1.php?id=1、page2.php?id=2、page3.php?id=3。我将如何存储和检索会话？在打开多个窗口的情况下，我无法获得确定的会话名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:49:22.017

显然，您无法阻止用户更改 HTML 客户端（您可以使其变得困难，但并非不可能）。如果您担心人们回复他们无权回复的线程，您应该处理该服务器端（发帖前检查权限）。这样，用户可以随意更改 ID，但他们仍然只能回复允许回复的线程。

另一种选择可能是在查询字符串中使用加密的 id，但在这种情况下，我仍然会检查服务器端的权限。

# qt - QT 设计器与 C++ 关于连接

> ID：11487909
> 
> 赞同：0
> 
> 时间：2012-07-14T22:37:09.237
> 
> 标签：qt

我想知道是否可以将使用 QT 创建的 QUI 与另一个程序连接起来，例如模拟电子设备的 HSPICE。我想要一个插槽，您可以通过单击操作按钮来输入一个数字（电容器的电容）和该数字，以成为 HSPICE 程序的输入并使用该输入执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:42:30.430

您可以将 Qt GUI 包装在您想要的任何功能周围。您的 gui 小部件是否触发完全属于您的代码，或者通过管道调用外部应用程序取决于您。你可以编写一个只是 gui 逻辑的应用程序，甚至可以通过网络套接字完全控制远程的东西。

GUI 简单地包装了可以调用外部二进制文件的系统命令。

# php - 从表单插入数据库，返回值 1，不输入文本

> ID：11487917
> 
> 赞同：0
> 
> 时间：2012-07-14T22:38:56.200
> 
> 标签：php, sql

正如标题所说。

表格或我的查询在欺骗我:(

它在我的数据库中输入 1 而不是我在表格中写的内容。

这是我的表格

```
<form action="deleteupdate.php" method="post">
<div id="txtHint"></div>
<input type ="submit" name="submittype" value ="Delete">
<input type ="submit" name="submittype" value ="Update">
category: <input type="text" name="category" />
</form> 
```

和 deleteupdate.php 中的查询

```
else if($_POST['submittype']=="Update"){
    mysql_query("INSERT INTO `category`(`category`) 
    VALUES (category='$category')") ; 
    } 
```

这不应该工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:40:31.263

它应该是

```
mysql_query("INSERT INTO `category`(`category`) 
    VALUES ('". mysql_real_escape_string($_POST['category']) ."')") ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:44:21.997

$category 在您的脚本中不存在。
使用此代码：

```
else if($_POST['submittype']=="Update"){
    mysql_query("INSERT INTO `category`(`category`) 
        VALUES ('". mysql_real_escape_string($_POST['category']) ."')") ; 
} 
```

# c# - 平铺纹理而不是拉伸？

> ID：11487921
> 
> 赞同：0
> 
> 时间：2012-07-14T22:39:24.087
> 
> 标签：c#, xna, sprite, textures

是否有一种内置的方式来绘制图案中的纹理，而不是仅仅拉伸以填充整个矩形？我知道你可以通过这样的循环轻松地做到这一点：

```
for (int i = 0; i < 5; i++) {
    for (int a = 0; a < 5; a++) {
        spriteBatch.Draw(myTexture, ...);
    }
} 
```

但我很好奇是否有内置功能，因为它可能经常使用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-15T03:16:45.397

在您对 的调用中`SpriteBatch.Begin()`，指定其中一种包装`SamplerStates`. 然后，当你绘制一个精灵时，指定一个大于纹理的源矩形。这将被转换为大于 1 的 u/v 坐标，这将包裹纹理。

# html - 如果低于 30，paypal 不会通过询问运输声明

> ID：11487926
> 
> 赞同：0
> 
> 时间：2012-07-14T22:40:02.533
> 
> 标签：html, paypal, web

我使用此代码查看捐赠的价值是否高于 30，然后要求运输，如果不是，则不要求运输，但是当我输入的价值小于 30 时，贝宝不会通过

```
 function askShipping(){
    var amount = $("#amount").val();
    if(amount == ''){
        alert('Please enter Donation amount');
        return false;
    }
    if(amount >= 30){
        var ret = shipSuccess();
        return false;
    }
    return false;
}
function shipSuccess(){
    $( "#dialog:ui-dialog" ).dialog( "destroy" );

    $( "#dialog-success" ).dialog({
        height: 260,
        modal: true,
        buttons: {
            "yes": function(){
                $( this ).dialog( "close" );
                shippingForm();
                // document.donationForm.submit();
            },
            Cancel: function() {
                $( this ).dialog( "close" );
                document.donationForm.submit();

            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:46:42.590

从您发布的代码中很难弄清楚您的问题是什么，因为您没有解释哪段代码实际上将信息提交给了 PayPal。

但是，我要对答案进行抨击，因为您的`askShipping()`函数应该如下所示：

```
function askShipping () {
    if ($("#amount").val() == '') {
        alert('Please enter Donation amount');
    } else if (amount >= 30) {
        shipSuccess();
    } else {
        document.donationForm.submit();
    }
    return false;
} 
```

如果这解决了您的问题，请在评论中告诉我，我会解释原因... ;-)

# php - 使用下一个/上一个按钮在 php 中显示来自 sql 的图像

> ID：11487927
> 
> 赞同：1
> 
> 时间：2012-07-14T22:40:04.317
> 
> 标签：php, sql, image

如何更改此代码，使其一次仅显示一个图像，并带有下一个和上一个按钮以浏览图像。

[我使用了这个网站的代码](http://www.dreamincode.net/forums/topic/76064-uploading-images-with-php/)

```
$sql = "select * from people";
    $result = mysql_query($sql) or die ("Could not access DB: " .  mysql_error());
    while ($row = mysql_fetch_assoc($result))
    {
        echo "<div class=\"picture\">";
        echo "<p>";

// Note that we are building our src string using the filename from the database
        echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" /><br />";
        echo $row['fname'] . " " . $row['lname'] . "<br />";
        echo "</p>";
        echo "</div>"; 
```

如果没有人愿意提供帮助，他们能否向我指出可能有答案的教程或网站的方向。我是 php 新手，因此非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:48:51.260

```
$page = $_GET['page'];    
$sql = "select * from people LIMIT $page,1";
while(...){
  ...
  $next_page = $page+1;
  $prev_page = $page-1;

  $next_btn = "<a href='script.php?page=".$next_page."'>Next</a>";
} 
```

这是一个基本的实现，不要忘记否定/最大验证和 mysql 注入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:54:32.793

图像裁剪。您可以在 url 中传递参数以获得所需的输出图像大小，如下所示`image.php?src=img/random.jpg&w=300&h=200`

```
<?php
header("Content-type: image/jpeg");
$image = imagecreatefromjpeg($_GET['src']);

$thumb_width = $_GET['w'];
$thumb_height = $_GET['h'];

$width = imagesx($image);
$height = imagesy($image);

$original_aspect = $width / $height;
$thumb_aspect = $thumb_width / $thumb_height;

if($original_aspect >= $thumb_aspect) {
   // If image is wider than thumbnail (in aspect ratio sense)
   $new_height = $thumb_height;
   $new_width = $width / ($height / $thumb_height);
} else {
   // If the thumbnail is wider than the image
   $new_width = $thumb_width;
   $new_height = $height / ($width / $thumb_width);
}

$thumb = imagecreatetruecolor($thumb_width, $thumb_height);

// Resize and crop
imagecopyresampled($thumb,
                   $image,
                   0 - ($new_width - $thumb_width) / 2, // Center the image horizontally
                   0 - ($new_height - $thumb_height) / 2, // Center the image vertically
                   0, 0,
                   $new_width, $new_height,
                   $width, $height);
imagejpeg($thumb);
?> 
```

在一次将一个图像放在页面上并浏览它们方面，使用上一个和下一个按钮。那将需要一些javascript来实现。

有很多不错的画廊可以一次显示一张图片，而且他们已经解决了图片调整大小的问题。看看[这里](http://www.1stwebdesigner.com/css/57-free-image-gallery-slideshow-and-lightbox-solutions/)

# spell-checking - 如何在 LibreOffice 的拼写检查器中添加自定义连字符？

> ID：11487936
> 
> 赞同：2
> 
> 时间：2012-07-14T22:41:42.977
> 
> 标签：spell-checking, libreoffice

我使用 LibreOffice 来编辑医学研究文章。LibreOffice 有 3 种类型的字典：拼写、连字符和同义词库。许多蛋白质、基因、设备等都有连字符的名称。Bcl-2 应该通过拼写检查，Bcl 不应该。但是，如果我只是将 Bcl-2 添加到我的自定义医学词典中，它不会通过并继续抱怨 Bcl。即使我将最小连字字符数从 5 个减少到 3 个，它仍然会在 Bcl 下添加红色墨水，从而忽略 Bcl-2 有效的事实。

显然，我可以拥有所有我想要的自定义词典，但一次只能拥有一本连字词典。知道如何将单词添加到 Libhyphen 连字符或其他方式来解决此问题吗？

# c++ - 获取用数字字符串表示的树中的所有直接父/子

> ID：11487944
> 
> 赞同：1
> 
> 时间：2012-07-14T22:44:00.557
> 
> 标签：c++, algorithm, tree

我有代表树的数字字符串（我不知道是否有正式名称）：

```
012323301212 
```

上面的示例代表 2 棵树。根用 0 表示。根的直接子代是“1”，“1”的直接子代是“2”，以此类推。我需要将这些分组到由父母及其直系子女组成的子树中。所以上面的内容会被分解成...

```
01 122 23 233 011 12 12 
```

我在想一种可能的方法是从字符串构建一个树结构，然后访问每个节点并生成它的子树及其直接子树（如果有的话），但这似乎相对复杂。有没有一些聪明的方法可以做到这一点，而无需创建树结构并遍历它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:18:43.197

您请求的输出本质上是树结构。也就是说，您可以将您的输入视为预先排序的深度优先遍历并读取树结构，而无需一次将其全部保存在内存中：

```
depths = [0, 1, 2, 3, 2, 3, 3, 0, 1, 2, 1, 2]   # Our input

next_id = 0                                 # Id of the next node
ids = []                                    # The ids of nodes as we traverse
parents = {}                                # Maps children to parents
children = {}                               # Maps parents to lists of children

for depth in depths
  # First we give this node an id
  id = next_id
  next_id += 1

  if ids.length <= depth
    # If this is our first time to this depth, push a new level onto ids.
    ids.append(id)
  else
    # Otherwise just insert the id into the list at its depth
    ids[depth] = id

    # And truncate off all elements after.  This preserves the invariant
    # that each id is the descendent of ids that appears before it.
    ids[depth].resize(depth + 1)

  assert(ids.length == depth + 1)

  # Emit the link between this node and its parent
  if depth > 0
    parents[ids[depth]] = ids[depth - 1]
    children[ids[depth - 1]] ||= []       # add the empty list first if needed
    children[ids[depth - 1]].append(ids[depth]) 
```

# php - 将每 3 行连接到前 3 行

> ID：11487948
> 
> 赞同：1
> 
> 时间：2012-07-14T22:44:17.253
> 
> 标签：php, arrays, csv

我之前发表过一篇文章，但没有正确地阐述这个问题。因此，这个问题可能看起来像以前的问题，但不是。考虑以下 data.csv：

```
 "1", "2", "3", "4"
 "5", "6", "7", "8"
 "9","10","11","12"
"13","14","15","16"
"17","18","19","20"
"21","22","23","24"
"25","26","27","28"
"29","30","31","32"
"33","34","35","36" 
```

实际上，行和列要长得多，但原理保持不变。输出应如下所示：

*   3行
*   每第三行连接到前第三行，所以
*   第 4 行 (1 + 3) 和 7 (1 + 3 + 3) 连接到第 1 行
*   第 5 行 (2 + 3) 和 8 (2 + 3 + 3) 连接到第 2 行
*   第 6 行 (3 + 3) 和 9 (3 + 3 + 3) 连接到第 3 行

然后输出将是一个数组：

```
array (
  [0] => 1,2,3,4,13,14,15,16,25,26,27,28
  [1] => 5,6,7,8,17,18,19,20,29,30,31,32
  [2] => 9,10,11,12,21,22,23,24,33,34,35,36
) 
```

感谢@nickb，我现在有了：

```
$path = "data.csv";
$newrow = 1; $row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    if( !isset( $newrows[$newrow])) $newrows[$newrow] = '';
    $newrows[$newrow] .= implode(",", $data);
    if ($row % 3 == 0) {
        $newrow++;
    } else {
        $newrows[$newrow] .= ',';
    }
    $row++;
  }
}

print_r($newrows); 
```

但这将“所有 3 个连续的”行相互连接，而不是“每第三行”。谁能告诉我如何完成每第三行的连接？我试过这个，但它以一种奇怪的方式连接起来：

```
$path = "data.csv";
$row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    for ($i = 1; $i <= 3; $i++) {
      if ($row % $i == 0) $newrows[$i] .= implode(",", $data);
    }
    $row++;
  }
}

print_r($newrows); 
```

输出：

```
Array (
    [1] => 1,2,3,45,6,7,89,10,11,1213,14,15,1617,18,19,2021,22,23,2425,26,27,2829,30,31,3233,34,35,36
    [2] => 5,6,7,813,14,15,1621,22,23,2429,30,31,32
    [3] => 9,10,11,1221,22,23,2433,34,35,36
) 
```

`edit`实际上，csv 要大得多，我需要将每 147 行连接到前 147 行，但我猜原理是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:48:33.763

编辑：您可以做的（实际上是更智能的解决方案，在 Java 中显示）是：

```
String[] newarray = new String[147];
for(int i = 0; i < yourarray.length; i++){
    newarray[i%147].concat(yourarray[i]);
} 
```

将 String[] 替换为您需要的任何数组类型，并将 concat() 方法替换为您用于连接数组的任何方法。代码的要点是您需要某种方法将原始数组中索引 147n+C 处的元素（对于某些非负整数 n 和某些整数 C < 147）映射到索引 C 处的新数组中的元素，这本质上是模运算的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:51:36.650

您的一般逻辑应该是：

*   取一行，也就是第n行
*   取 x 等于 n/3 的下限
*   将行 n 的内容附加到输出行 x

我的 PHP 太生疏了，无法编写确切的代码来做到这一点，但你所拥有的肯定不会那样做。

# python - Eclipse 随机用空格替换制表符

> ID：11487954
> 
> 赞同：1
> 
> 时间：2012-07-14T22:45:19.663
> 
> 标签：python, eclipse, pydev

我正在使用 pydev 在 Eclipse Indigo 中编辑 django 文件。突然在一个文件中，eclipse 决定开始使用四个空格而不是制表符。该文件具有 .py 扩展名。在其他文件中没问题，只是这个文件有问题。这些设置对于使用选项卡是正确的。我已经尝试关闭并重新打开文件，退出并重新启动 eclipse，删除所有空格并重新加载文件，但 eclipse 仍然坚持使用空格，这真的很烦人，因为 eclipse 然后将其标记为错误。

以前有其他人经历过这种情况，如果是这样，您是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:58:25.007

这最初是对OP的评论，但结果是正确的答案，所以我重新发布。

用空格替换制表符的设置存在于eclipse中的两个地方：

1.  常规 > 编辑器 > 文本编辑器
2.  Pydev > 编辑器

这两个设置都需要正确设置才能解决此问题，因为它们可以相互覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T15:50:07.943

就我而言，我无法（追溯地）用 Eclipse 或 PyDev 替换。它们允许我们在“打字时”写 4 个空格，但不能替换旧文件。

[所以，我使用了一个名为Reindent](https://pypi.python.org/pypi/Reindent)的外部工具

我唯一不喜欢的是它会创建所有文件的备份，而在 1.1 中你没有任何标志可以避免它。这意味着在执行结束时，您有双重来源......

# objective-c - 由代码实例化的表格视图的单元格问题

> ID：11487966
> 
> 赞同：0
> 
> 时间：2012-07-14T22:47:36.323
> 
> 标签：objective-c, ios5

我正在构建一个具有外部委托控制器的表视图，它是由代码创建的，而不是由故事板创建的。我对单元格有疑问，尽管执行正确地到达了委托方法，但它们没有显示：

构建方法：

```
-(void)buildCategorias{

    CGRect twitterFrame = CGRectMake(105, 83, 600, 568);

    categoriasView = [[UIView alloc] initWithFrame:twitterFrame];

    CGRect scrollViewFrame = CGRectMake(105, 83, 400, 568);

    categoriasTableView = [[UITableView alloc] initWithFrame:scrollViewFrame];

    categoriasController = [[categoriasViewController alloc] init];

    categoriasController.categorias = [[NSArray alloc] initWithObjects:@"Gafas", @"Relojes", @"Pantalones", @"Deportivas", @"Cazadoras", nil];

    [categoriasTableView setDelegate:categoriasController];

    [categoriasTableView setDataSource:categoriasController];

    [self.categoriasView addSubview:categoriasTableView];

    [categoriasTableView reloadData];

    [self.view addSubview:categoriasView];

} 
```

自定义单元格：categoriasCell.h

```
@interface categoriasCell : UITableViewCell{

    UILabel *title;

}

@property (nonatomic, strong) IBOutlet  UILabel *title;

@end 
```

分类Cell.m

```
@implementation categoriasCell

@synthesize title;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
} 
```

表视图委托：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    categoriasCell *cell = [self.tableView 
                      dequeueReusableCellWithIdentifier:@"categorias"];

    if (cell == nil) {
        cell = [[categoriasCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"categorias"];
    }

    cell.title.text = [categorias objectAtIndex:indexPath.row];

    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

    @end 
```

表格视图是空的，没有内容。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:15:13.587

是根本没有单元格，还是有正确数量的单元格，但它们是空的？

如果根本没有单元格，请检查您是否实现了其他必需的委托方法 ( `tableView:numberOfRowsInSection:`)，并且它确实返回了您期望的单元格数量。

否`categoriasCell`_来自NIB）。请参阅[Apple 的文档](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW20)以了解如何加载单元格的 NIB 并在您的委托方法中使用它。如果您不从 NIB 加载它，则文本字段将不存在，因此您的单元格将为空。

还有两个非致命的编码/样式问题：

*   您`UITableViewCellSelectionStyleNone`在初始化单元格时作为样式传递。你真的应该在`UITableViewCellStyleDefault`这里使用，因为参数是单元格样式，而不是选择样式。
*   您的班级名称应大写（`CategoriasCell`而不是`categoriasCell`）。

# c# - Mp3 播放类播放列表中的歌曲，但要等到一首完成后再继续

> ID：11487967
> 
> 赞同：0
> 
> 时间：2012-07-14T22:47:51.363
> 
> 标签：c#, winforms, multithreading, datagridview, thread-sleep

我目前正在学习使用 c# 和 winforms 播放 mp3 文件的本[教程](http://www.codeproject.com/Articles/14709/Playing-MP3s-using-MCI?msg=4309683#xx4309683xx)，但是我添加了一个 datagridview 来列出歌曲，现在当我点击网格中的一首歌曲时，它播放的歌曲很好，但它只播放那一首歌，我想做的是在歌曲播放完毕后继续播放列表中的下一首歌曲。我已经尝试了 Thread.Sleep 与 audiolenght 作为时间，但这只是阻止整个应用程序工作，直到它完成睡眠，这根本不是我想要的，我对 winforms 有点陌生，所以如果有人可以指导我我需要更改以使其正常工作，我将非常感激。这是我到目前为止的代码：

```
private void dgvTracks_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        PlayFiles(e.RowIndex);
    }
    public void PlayFiles(int index)
    {
        try
        {
            int eof = dgvTracks.Rows.Count;
            for (int i = index; index <= eof; i++)
            {
                if (File.Exists(dsStore.Tables["Track"].Rows[i]["Filepath"].ToString()))
                {
                    PlayFile(dsStore.Tables["Track"].Rows[i]["Filepath"].ToString());
                    Application.DoEvents();
                    Thread.Sleep(TimeSpan.FromSeconds(mplayer.AudioLength));
                }
                else
                {
                    Exception a = new Exception("File doesn't exists");
                    throw a;
                }

            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, ex.Message, MessageBoxButtons.OK);
        }
    }
    public void PlayFile(string filename)
    {
        mplayer.Open(filename);
        mplayer.Play();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:00:39.047

我假设这`mplayer`是`System.Windows.Media.MediaPlayer`.

您可以订阅`MediaPlayer.MediaEnded`事件，并使用事件处理程序开始播放下一个文件。您需要将当前播放的索引存储在某处。

```
...

int currentPlayIndex = -1;

...

mplayer.MediaEnded += OnMediaEnded;

...

private void OnMediaEnded(object sender, EventArgs args)
{
    // if we want to continue playing...
    PlayNextFile();
}

...

public void PlayNextFile()
{
    PlayFiles(currentPlayIndex + 1);
}

public void PlayFiles(int index)  
{  
    try  
    {  
        currentPlayIndex = -1;

        int eof = dgvTracks.Rows.Count;  
        for (int i = index; index <= eof; i++)  
        {  
            if (File.Exists(dsStore.Tables["Track"].Rows[i]["Filepath"].ToString()))  
            {  
                currentPlayIndex = i;  // <--- save index

                PlayFile(dsStore.Tables["Track"].Rows[i]["Filepath"].ToString());  
                Application.DoEvents();  
                Thread.Sleep(TimeSpan.FromSeconds(mplayer.AudioLength));  
            }  
            else  
            {  
                Exception a = new Exception("File doesn't exists");  
                throw a;  
            }  
        }  
    }  
    catch (Exception ex)  
    {  
        MessageBox.Show(ex.Message, ex.Message, MessageBoxButtons.OK);  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:55:59.237

`Stop`以及`Close`在播放新音频之前的先前播放。例如，如果您使用[`MediaPlayer.Play`](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.play)

```
using System.Windows.Media;

MediaPlayer mplayer = new MediaPlayer();

public void PlayFile(string filename)
{
    mplayer.Stop();
    mplayer.Close();
    mplayer.Open(filename);
    mplayer.Play();
} 
```

# css - 如何将 CSS 标签添加到 ruby on rail loop？

> ID：11487971
> 
> 赞同：0
> 
> 时间：2012-07-14T22:48:38.817
> 
> 标签：css, ruby-on-rails-3

我正在尝试缩进整个循环，如下所示，所以我假设我需要在整个事物上放置一个标签，以便我可以在 CSS 文件中指向它。我只是不知道我应该把它放在什么格式。

```
<% micropost.comments.each do |comment| %>

       <div class="box">
         <b>Vendor:</b>
         <%= comment.commenter %><br>
         <b>Deal:</b>
         <%= comment.body %>
       </div>

    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:55:28.097

要将 css 类或 id 分配给 link_to 方法，请执行以下操作：

```
<%= link_to "Link name", { :controller => 'controller_name', :action => 'action_name' }, :class => 'box' -%> 
```

关键部分是使用大括号将 :controller => 和 :action 从 html 中分离出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:14:54.533

您可以使用`content_tag`如下方式将内容包装在`div`带有类名的 a 中。

```
<% micropost.comments.each do |comment| %>
  <%= content_tag(:div, class: 'box') do %>
    <b>Vendor:</b>
    <%= comment.commenter %><br>
    <b>Deal:</b>
    <%= comment.body %>
  <% end %>
<% end %> 
```

# regex - 如何使用正则表达式将 foo(.*) 替换为 (foo )?

> ID：11487973
> 
> 赞同：0
> 
> 时间：2012-07-14T22:48:45.290
> 
> 标签：regex, variables, vim, alias, replaceall

是否有使用正则表达式替换所有的机制，但保留匹配的内容`".*"`？

如果这不是正则表达式的一部分，但在某些编辑器中是可能的，请相应说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T22:57:30.877

假设您希望用空格将“foo”与括号中的内容分开，然后用括号将整个内容括起来：

`:%s/foo\(.*\)/(foo \1)/g`

其中`\1`代表第一个括号中的文本。`\2`如果您有另一个括号分组等，则可以使用。

鉴于你有 `fooMOO`

你最终会得到： `(foo MOO)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T22:57:40.187

您可以在替换模式中使用反向引用：

```
%s/foo(\(.*\))/foo \1/g 
```

在此模式中，未转义的括号与文本中的实际括号匹配，而转义的括号充当捕获括号。\1 是反向引用，它指的是在正则表达式中的第一组捕获括号内匹配的所有内容。请注意，如果您可能在一行中有多个函数调用，您可能希望限制匹配的字符数。如果在 foo() 的参数列表中没有右括号（例如，在字符串中），那么您可能希望通过不匹配右括号来做到这一点：

```
%s/foo(\([^)]\))/foo \1/g 
```

如果在参数列表中存在右括号的危险，那么事情就会变得复杂。

# javascript - 改变滚动速度并增加惯性

> ID：11487975
> 
> 赞同：0
> 
> 时间：2012-07-14T22:48:56.213
> 
> 标签：javascript, jquery, performance

我想要一种有效的方法来修改滚动并在网页上添加惯性效果。

你对 JavaScript 有什么想法吗（例如使用 jQuery）？

前任。[https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:11:37.177

AFAIK 没有原生的“scrollStop”事件。

[但是这个插件使用 jQUerys“特殊事件”API http://james.padolsey.com/javascript/special-scroll-events-for-jquery/](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)模拟类似的东西

您也许可以从那里为 scrollTop 设置动画...

[http://jsfiddle.net/3cAdy/](http://jsfiddle.net/3cAdy/)

```
$(window).bind('scrollstop', function(e) {
    console.log(  );
    $('html, body').animate({scrollTop: ($(window).scrollTop() +100 )}, 'slow');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:46:41.117

您的示例网站没有对本机滚动条做任何事情。

我相信，如果您查看您所指向的网站上的内容，就会发现正在发生的事情有一种流行的效果，称为“视差”。您应该能够查找视差示例并获得您在那里看到的那种效果。

# android - 为什么我的应用程序在关闭套接字时卡住了？

> ID：11487977
> 
> 赞同：0
> 
> 时间：2012-07-14T22:49:11.893
> 
> 标签：android, sockets

我正在开发一个通过 TCP 套接字连接到 java 服务器的应用程序。由于某种原因，客户端/应用程序一直卡在 //HERE。

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Socket;
import java.net.UnknownHostException;

import android.util.Log;

class ClientConnectToServer
{Socket clientSocket;

      public ClientConnectToServer()
     { try {
        clientSocket = new Socket("10.0.2.2", 9000);
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

      public String sendMessage(String message)
      {
try{        clientSocket = new Socket("10.0.2.2", 9000);

          String modifiedSentence;
          DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
          BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
          outToServer.writeBytes(message + '\n');
          modifiedSentence = inFromServer.readLine();
          outToServer.close();
          inFromServer.close();
              //HERE
          clientSocket.close();
          Log.v(modifiedSentence, modifiedSentence);
          return modifiedSentence;}
catch(Exception e)
{
    return "";}

      }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:06:50.173

不可能。此时，由于先前的两次关闭，套接字已经关闭，因此该行代码无需执行任何操作。由于某种原因，您更有可能在日志记录行被阻止。

关闭套接字时，您应该关闭输出流或围绕其输出流包装的写入器。这会刷新它并关闭输入流和套接字。不要关闭其他任何东西。

# ms-access - 如果不在列表中，则 MS 访问将项目添加到组合框

> ID：11487979
> 
> 赞同：1
> 
> 时间：2012-07-14T22:49:27.713
> 
> 标签：ms-access, combobox

我有一个访问表单，如果组合框中没有，我想知道如何在组合框中添加项目。我的组合框处于值模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:00:54.863

不幸的是，如果不将表单更改为设计模式并添加新值，则无法永久更改行源。使用代码可以做到这一点，但是当人们工作时这不是一个好主意。最简单的事情是创建一个小表并将值添加到其中。当您关闭表单时，新值将被保存。

Allen Browne 描述了如何做到这一点： http: [//allenbrowne.com/ser-27.html](http://allenbrowne.com/ser-27.html)

这是他展示的想法之一：

```
Private Sub CategoryID_NotInList(NewData As String, Response As Integer)
    Dim strTmp As String

    'Get confirmation that this is not just a spelling error.
    strTmp = "Add '" & NewData & "' as a new product category?"
    If MsgBox(strTmp, vbYesNo + vbDefaultButton2 + vbQuestion, "Not in list") = vbYes Then

        'Append the NewData as a record in the Categories table.
        strTmp = "INSERT INTO Categories ( CategoryName ) " & _
            "SELECT """ & NewData & """ AS CategoryName;"
        DBEngine(0)(0).Execute strTmp, dbFailOnError

        'Notify Access about the new record, so it requeries the combo.
        Response = acDataErrAdded
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T00:20:34.810

您需要将该属性设置`limit to list`为 true。

然后在 On Not In List 事件中添加一些代码，这些代码可能会将值添加到组合框中。[这是一个教程。](http://www.fontstuff.com/access/acctut20.htm)或者您可以查看其他答案。

请注意，通常最好使用存储组合框值的表。使用值列表，除非您禁用快捷菜单，否则用户可以右键单击组合框选择`Edit List Items...`并修改列表，即使它设置为限制为列表...这有效地破坏了您尝试在字段上放置的任何限制.

# c# - 如何读取文本文件并将数据添加到 C# 中的 int 数组？

> ID：11487981
> 
> 赞同：0
> 
> 时间：2012-07-14T22:49:39.730
> 
> 标签：c#, arrays, text, io

我正在尝试读取包含用逗号分隔的数字的文本文件。当我阅读使用时，`File.Readline()`我得到了一个`string[]`. 我需要将它转换为一个 int 数组，但它给出了一个错误。

文本文件的内容：

> 146429,143689,144380,141523,139572,136930,133714,130011,125843,121110,115974,110363,104367,97909,91245,84218,77008,69626,62058,54445,46942,39436,32146,24932,18359, 12601,9039,9776,13638,18314,23221,27728,32142,35941,39577,42657,45692,48180

我的代码：

```
while ((line = sr.ReadLine()) != null)
{
    string[] values = line.Split(new string[] { " , " }, StringSplitOptions.None); 

    for (int i = 0; i < values.Length; i++)
    {
        // Console.WriteLine(values[i]);
        valArr[LineCount][i] = Convert.ToInt64(values[i]); // error
    }

    LineCount++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:06:59.943

我认为这就是你所追求的：

```
 static void Main(string[] args)
    {
        var sr = new StreamReader(@"d:\test.txt");
        long[] data = ExtractData(sr).ToArray();
    }

    private static IEnumerable<long> ExtractData(StreamReader sr)
    {
        string line;
        while ((line = sr.ReadLine()) != null)
        {
            var items = line.Split(',');
            foreach (var item in items)
            {
                yield return Convert.ToInt64(item);
            }
        }
    } 
```

我的测试文件 (d:\test.txt) 持有：

```
1,2,3,4,5
1,2,3,4 
```

我得到的数组包含：

```
1,2,3,4,5,1,2,3,4 
```

## 编辑

正如 Monroe 指出的那样，我错过了你想要一个数组的事实。这是另一个提供这种锯齿状数组的版本。尽管如此，仍然保持产量；）

```
 static void Main(string[] args)
    {
        var sr = new StreamReader(@"d:\test.txt");
        var data = ExtractData(sr).ToArray();
    }

    private static IEnumerable<long[]> ExtractData(StreamReader sr)
    {
        string line;
        while ((line = sr.ReadLine()) != null)
        {
            yield return line.Split(',').Select(i => Convert.ToInt64(i)).ToArray();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:11:37.077

用`List`可以帮助你，用可以`StringSplitOptions.RemoveEmptyEntries`预防`null exception``Convert.ToInt64`

```
var lineArray = new List<List<Int64>>();

foreach (var lineString in File.ReadAllLines("path"))
{
    var line = new List<Int64>();
    string[] values = lineString.Split(new[] { ',', ' ' },  
                                       StringSplitOptions.RemoveEmptyEntries);
    line.AddRange(values.Select(t => Convert.ToInt64(t)));
    lineArray.Add(line);
} 
```

并使用它：

```
// Array of numbers for specific line
var resultArray = lineArray[lineNumber].ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:21:41.160

它应该几乎是：

```
int yourIntArray = 
    new List<string>(RealAllText(fileName)
    .Split(new char[] {',', '\r', '\n', ' '},
    stringSplitOptions.RemoveEmptyEntries))
    .ConvertAll<int>(s => int.Parse(s))
    .ToArray(); 
```

当然，为了更健壮，`int.Parse`应该用一些可以处理数字错误的方法来代替，等等......

编辑：

哦，我刚刚看到你的行是数组的另一个索引......那么，在这种情况下应该修改这段代码，但我会把它留给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T23:23:59.833

我认为这就是你想要做的。唯一的问题是您的 vallArr 应该是一个可以保留所有值的二维数组。类似 var valArr = new Int64[x, y];

```
 while ((line = sr.ReadLine()) != null)
        {
            string[] values = line.Split(new string[] { " , " }, StringSplitOptions.None);

            for (int i = 0; i < values.Length; i++)
            {
                valArr[LineCount, i] = Int64.Parse(values[i]);
            }
            LineCount++;
        } 
```

# c++ - 我的复制构造函数导致使用我的类的方法失败。有人可以看看它并告诉我我做错了什么吗？

> ID：11487986
> 
> 赞同：1
> 
> 时间：2012-07-14T22:50:47.167
> 
> 标签：c++, oop, class, destructor, copy-constructor

我的构造函数可以很好地创建一个副本 - 但是当一个方法将 IntegerNumber 作为参数时，它会停止工作。

我的构造函数：

```
IntegerNumber::IntegerNumber(const IntegerNumber &integerInput){
//Creates a copy of an Integer Number
//Set len and isNegative
len = integerInput.len; 
isNegative = integerInput.isNegative;
//Fill integer with IntegerInput
integer = new char[len+1];
for(int i = 0; i <= len; i++)
    integer[i]=integerInput.integer[i];
} 
```

我的析构函数：

```
IntegerNumber::~IntegerNumber(){
//Destructs IntegerNumber
delete [] integer;
delete &len;
delete &isNegative;
} 
```

我的班级的数据成员：

```
private:
    char *integer;
    int len;
    bool isNegative; 
```

请尝试帮助我弄清楚我的构造函数/析构函数可能有什么问题，导致程序停止但不会崩溃或中断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:53:53.917

你不想要这个：

```
delete &len;
delete &isNegative; 
```

像这样删除实例变量是未定义的行为，因此您的程序可以停止

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:00:39.233

使用`std::unique_ptr`和其他*类*来管理内存 - 总是。动态数组特别适用于`std::vector<T>`. 不要手动管理你的记忆——你会得到所有的错误。

# c# - 用于向列表添加或删除对象的事件

> ID：11487987
> 
> 赞同：0
> 
> 时间：2012-07-14T22:50:58.447
> 
> 标签：c#, list, events, generics

我正在开发一个控件来绘制一些图表。为此，我想从中派生一个控件`PictureBox`并向其添加一个字段，该字段基本上是以下简单类的列表：

```
public class Curve
{
     public List<PointF> DataPoints;
     public Color CurveColor;
     //and constructor and stuff
} 
```

和 PictureBox 类：

```
public class Graph : PictureBox
{
    List<Curve> Curves;
    //And some code to take care of drawing the curves
} 
```

所以我真的很喜欢这里的一些技巧，有没有办法连接一个事件，所以每当`Curve`在类中添加或删除一个对象时`Graph`，它会用剩余的曲线对象重新绘制自己？

[我在这里](http://msdn.microsoft.com/en-us/library/aa645739%28v=VS.71%29.aspx)找到了一些细节，但这是为了`ArrayList`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T22:59:12.377

一种方法是在您的 Graph 类中使用 ObservableCollection，然后侦听其 CollectionChanged 事件以重绘您的 Graph。

```
public class Graph : PictureBox {
    ObservableCollection<Point> Curves;
    //And some code to take care of drawing the curves

    public Graph() {
      Curves.CollectionChanged += Curves_CollectionChanged;
    }

    void Curves_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) {
      Redraw();
    }
} 
```

# mysql - STI MySQL fun select 与 case

> ID：11487988
> 
> 赞同：1
> 
> 时间：2012-07-14T22:51:01.410
> 
> 标签：mysql, ruby, ruby-on-rails-3, activerecord, sti

我有以下 STI 设置：

```
class Cage < ActiveRecord::Base
  has_many :animals
end

class Animal < ActiveRecord::Base
  belongs_to :cage
end

class Cat < Animal
  # name = "Tom"
end

class Mouse < Animal
  # name = "Jerry"
end 
```

我想在返回以下结构的 Animals 表上进行选择：

```
+----+-----------------------+
| ID | cat_name | mouse_name |
+----+-----------------------+
| 1  | Tom      | Jerry      | 
+----+-----------------------+ 
```

理想情况下，我想要这样的东西：

```
Cage \
  .joins(:animals)
  .select("
    cages.id,
    animals.name as case animals.type 
      when 'Mouse' then mouse_name 
      when 'Cat' then cat_name end
  ") \
  .group('cages.id') 
```

但这不起作用，所以我这样做了：

```
Cage \
  .joins(:animals)
  .select("
    cages.id,
    case animals.type when 'Mouse' then animals.name end mouse_name end,
    case animals.type when 'Cat' then animals.name cat_name end
  ") \
  .group('cages.id') 
```

有没有办法使第一个查询工作，如果没有，是否有更好/替代的方法来编写第二个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:19:55.500

在您的第一个查询中，您尝试使用一个`CASE`表达式创建两个名称列。那是行不通的。如果你想在你的结果集中有两个 cols，你必须选择两个不同的东西。

您的第二个查询更接近，但您在选择中没有任何聚合函数进行分组，因此您可以从每个组中获得随机结果。我建议：

```
...
GROUP_CONCAT(IF(animals.type='Cat',animals.name,NULL)) AS cat_name,
GROUP_CONCAT(IF(animals.type='Mouse',animals.name,NULL)) AS mouse_name
... 
```

如果我误解并且您实际上希望两个名称都在一个结果列中，您可以这样做：

```
GROUP_CONCAT( 
    CONCAT(animals.type,' name is: ',animals.name) 
    SEPARATOR ', '
) AS animal_names 
```

# entity-framework - 同步两个 SQL Server CE 4.0 数据库/数据复制

> ID：11487995
> 
> 赞同：1
> 
> 时间：2012-07-14T22:53:14.993
> 
> 标签：entity-framework, synchronization, sql-server-ce

如何同步两个 SQL Server CE 4.0 数据库？我使用的是 4.0 版，因为我想使用代码优先的方法。事实证明，SQL Server CE 4.0 不支持 MS Sync 框架，而 SQL Server CE 3.5 支持 MS Sync 但不支持完整的代码优先方法。（不创建数据库）。

我想至少先使用 EF 数据库。在这种情况下我该怎么办？先放弃代码，改用 SQL Server CE 3.5？使用 SQLite 或其他紧凑型数据库，例如 ms access。也许为每一行使用时间戳编写我自己的同步。

一个类似的问题[Using MS Sync Framework to synchronize two SQL CE Dbs](https://stackoverflow.com/questions/581110/using-ms-sync-framework-to-synchronize-two-sql-ce-dbs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:20:51.413

您可以使 Sync Framework 与 SQL CE 4 一起工作。但它不受支持。

看看：[同步框架和 SQL Compact 4（是的，你可以！）](http://jtabadero.wordpress.com/2012/04/20/sync-framework-and-sql-compact-4-yes-you-can/)

# css - CSS 间距问题

> ID：11487996
> 
> 赞同：2
> 
> 时间：2012-07-14T22:53:48.130
> 
> 标签：css

我有一个大图形，我正试图在我的内容后面拉出。目前，图形并没有拉到我的内容后面，而是放在它的下方，这在内容的底部和页脚之间留下了很大的空隙。参考的大图是底部的水彩鸟。内容是简历文本。请记住，该简历文本是一个可扩展的手风琴链接。我需要帮助关闭这个空间，拜托。

[http://imip.rvadv.com/index3.html](http://imip.rvadv.com/index3.html)

CSS：

```
#bottom-graphic-container {
margin:0;
padding:0;
background:#fff url(../images/bg-bottom.jpg) bottom left no-repeat;
height:313px;

}

.wrapper{
max-width:920px;
margin:25px auto 0 auto;
padding:0;
width:100%;
z-index:1;
}
.st-accordion ul li.st-open > a{
/*margin-top:70px;*/
}

.st-open:last-child .st-content {
padding-bottom: 0;
}

.st-content{
padding: 5px 0px 100px 0px;
}
.st-content p {
font-size:  14px;
font-family:  Georgia, serif;
font-style: normal;
line-height:22px;
padding: 0px 4px 15px 4px;
}

.st-accordion{
width:100%;
min-width:270px;
margin:0 auto;

}
.st-accordion ul li{
overflow: hidden;
padding:0 30px;
}
.st-accordion ul li:first-child{
overflow:visible;
list-style-type:none;
}
.st-accordion ul li:last-child{

}
.st-accordion ul li > a{
font-family: 'Trocchi', serif;
text-shadow: 1px 1px 1px #fff;
color:#688993;
line-height:44px;
font-size: 36px;
display: block;
text-decoration:none;
-webkit-transition:  color 0.2s ease-in-out;
-moz-transition:  color 0.2s ease-in-out;
-o-transition:  color 0.2s ease-in-out;
-ms-transition:  color 0.2s ease-in-out;
transition:  color 0.2s ease-in-out;
}
.st-accordion ul li > a:hover{
color:#18232e;
} 
```

HTML：

```
 <div class="wrapper">
           <!-- <div class="chirp">chirp</div>-->
            <div id="st-accordion" class="st-accordion">
                <ul>
                    <li>
                        <a href="#aboutme" id="chirp" class="chirp">Chirp. Would you like to know about me?<h2>Read the official birdwatcher's guide.</h2></a>
                        <div class="st-content"><p>content goes here</p>
                        </div>
                    </li>
                    <li>
                        <a href="#portfolio" id="birdseye">A bird's eye view of my endeavors<h2>and other flights of fancy, also known as my portfolio.</h2></a>
                        <div class="st-content">
                            <p>Portfolio Goes Here.</p>

                        </div>
                    </li>
                                            <li>
                        <a href="#resume" id="migration">My migration pattern<h2> and other common facts, otherwise known as my resume.</h2></a>
                        <div class="st-content"><p>content goes here</p> 
```

```
 </ul>
            </div>
        </div>
    </div>
    <!--bottom graphics-->

    <div id="bottom-graphic-container"></div>
    <!--Footer-->
    <div id="footer-container">
        <div id="footer-content-container">
            <div id="footer-copy">Tiffani Hollis, Creative Professional (404)931.6057 <a href="mailto:thollis@i-make-it-pretty.com"> thollis@i-make-it-pretty.com</a></div>
            <div id="signature"><img src="images/signature.png"></div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:23:45.557

**我在本地**复制了您的网站，并且能够为您解决此问题。

**参考：** [**jsFiddle 1**](http://jsfiddle.net/LsRLW/show/) *（注意：由于@font-face 相同的域Orgin 规则，这些字体没有显示。）*

*解决方案*是更改***Corner Bird***的HTML 顺序，以便这个带有 ID 名称的 Div`#bottom-graphic-container`将包含 Accordion 内容（带有类名称`.wrapper`）。

然后，对 CSS 进行了一些修改/配置以允许正确操作。值得注意的是，我将***Footer***和***Corner Bird*** Div's 设置为`position:fixed;`使其始终*紧贴在底部*。当***Footer***后面有**Link's**或**Resume Text**时，预期的浏览器就会发挥作用。*`scrollbar`*

 ***进一步澄清：** Corner Bird 是“**后层**”，Accordion 是“**中间层**”，Footer 是“**前层**”。他们现在都在和谐地工作。**:-D**

由于 Corner Bird 现在*位于*Accordion div 后面，因此它`bg-background.jpg`被剪裁到**Header Image**中。解决方案是使用 Transparency 将此图像转换为***PNG***。为此，我使用了开源**irfanview**。我在这里也包含了该 PNG，或者您可以自己制作。

一切就绪后，您的网站将按照您的预期运行。在**IE8**、**Firefox**和**Chrome**中测试没有问题。*（旁注：在 IE8 中我没有测试 @font-face 字体）*。

这是您的网页**屏幕截图**，其中浏览器窗口调整为小尺寸： ![在此处输入图像描述](../Images/41cdd410838629a599ad1e9260acf3de.png)

**修改后的 HTML：**

```
<!--bottom graphics--><!-- Think of this as "bottom-back-layer" since various layers are at play here. -->
<div id="bottom-graphic-container">

    <!--Footer-->
    <div id="footer-container"><!-- Think of this as "bottom-front-layer". That said, back-layer and front-layer are also 'top' and 'bottom' too (nothing overlaps). -->
        <div id="footer-content-container">
            <div id="footer-copy">
              <!-- Removed personal info -->
            </div>
            <div id="signature"><img src="images/signature.png"></div>
        </div>
    </div>

</div> <!--Closing tag for bottom graphics--> 
```

**修改后的 CSS：**

```
.wrapper{
  width: 920px;
  max-width:920px;
  margin: 0 auto;
  padding: 0;
  margin-bottom: 65px;            /* Once the last item in Accordion menu is behind Footer, margin-bottom:65px; will provide Browser main scrollbar if hidden. */
  position: relative;             /* position:relative required with z-index below. (or absolute can be used with more CSS settings */
  z-index: 1;                     /* A z-index of 1 is used since it's higher than '#bottom-graphic-container' (0 z-index) so Accordion Links are clickable */
}

#bottom-graphic-container {
  width:100%;
  height:313px;
  background-image:url(../images/bg-bottomTrans.png);    /* Use transparent PNG image. This CSS rule has color #fff removed as well. */
  background-repeat: no-repeat;
  position: fixed;
  bottom: 94px;                                          /* The height used here is the height of 'bg-footer.png' image. */
  /* border: 1px solid red;  */                          /* Use for troubleshooting since image, even when transparent, may prevent interaction with content under it. */
}

#footer-container {
  width:100%;
  height:94px;                                           
  background-image:url(../images/bg-footer.png);
  background-repeat: repeat-x;
  position: fixed;
  bottom:0;
  z-index: 10;                                           /* A z-index of 10 will allow the footer to cover the Accordion Links. */
}

#resume-container ul li{
  list-style-type:disc;
  list-style-position:inside;
  line-height:20px;
  font-size:  14px;
  font-family: Arial, Helvetica, sans-serif;
  font-style: normal;
  padding-left:20px;
  margin-right:80px;
}                                                        /* this closing '}' was missing */ 
```

**修改后的带有透明背景的PNG图片文件：**
[**bg-bottomTrans.png**](http://img232.imageshack.us/img232/4779/bgbottomtrans.png)

* * *

**最终更新：**由于上述 jsFiddle 是满足此问题的一种方法，因此应 OP 的要求，这是一种完全***不同*****的**方法。

**参考：** [**jsFiddle 2**](http://jsfiddle.net/LsRLW/2/show)

底部图形和页脚是最后一个 Accordion 项目 (Resume) 的一部分。请注意，将底部的项目向上移动到更靠近顶部的位置会在网页底部为大型显示器创建空白空间（可以肯定的是，最大化您的浏览器）。要更改距离，请按照 CSS 中的说明调整`bottom`底部图形和页脚的 CSS 属性。

这就是为什么上面的第一种方法将它们固定，因此无论浏览器高度如何，都能实现统一的外观。注意：Font-face 具有相同域来源策略规则，因此它们不会在 jsFiddle 中呈现。

要访问 jsFiddle 编辑页面，请`/show/`从地址栏中删除。

**HTML 和 CSS 面板是您的代码。**

我在 CSS 部分中添加了注释，HTML 部分的更改包括：

**1.** div`id="masthead-container"`现在包含其他项目。
**2.**其他项目是：`class="wrapper"`,`id="bottom-graphic-container"`和`id="footer-container`
**3.**在 jsFiddle 查看 HTML 时，看到的 RED 标签是由于之前的标记错误。编写好网页后，请访问[**W3C 在线验证**](http://validator.w3.org/#validate_by_uri)以查看错误发生的位置。示例：您有一个不应该存在的未关闭或额外的 div 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:10:53.137

我看到两个可能的修改来改善视觉/删除空间：

更改包装类以删除底部边距：

```
.wrapper {
  margin: 25px auto -50px;
  max-width: 920px;
  padding: 0;
  width: 100%;
  z-index: 1;
} 
```

改变的线是边距一。我把 -50px 放在底部边距。您可以使用该值（使其更低或更高）来更改包装器和页脚之间的空间。

您可能还想为最后一个手风琴子项添加规则。因为他不需要将他与兄弟姐妹分开的额外底部填充物。

```
.st-open:last-child .st-content {
  padding-bottom: 0;
} 
```

这个目标`.st-content`是具有`.st-open`作为 parent 的 div ，但前提是具有 的块`.st-parent`是其父级的最后一个子级。因此，它仅适用于手风琴的底部，将底部填充设置为 0 而不是 100px。*

# php - SimpleXML 中的递增变量

> ID：11487998
> 
> 赞同：0
> 
> 时间：2012-07-14T22:54:11.720
> 
> 标签：php, simplexml

我对以下代码有疑问。变量 $entry 永远不会大于 1。我希望它增加以能够获取所有关键字并将它们放在一个变量中。我找不到 $entry 增加的原因。提前致谢！:-)

```
function objectsIntoArray($arrObjData, $entry, $arrSkipIndices = array()) {

`$arrData = array();`
$kwords=array();

// if input is object, convert into array

if (is_object($arrObjData)) {

    $arrObjData = get_object_vars($arrObjData);

}

if (is_array($arrObjData)) {

    foreach ($arrObjData as $index => $value) {

    if ($index=="keywordterm"&&$index!="0"){
        $kword=$arrObjData[$index];
        //echo "arrObjData[$index]: ".$kword."</br></br>";
        $kwords[$entry]=$kword;
        //echo "keywords: ".$kwords."</br></br>";
        //echo "keywords[$entry]: ".$kwords[$entry]."</br></br>";
        $entry++;

    }
        if (is_object($value) || is_array($value)) {

            $value = objectsIntoArray($value, $entry, $arrSkipIndices); // recursive call

        }

        if (in_array($index, $arrSkipIndices)) {
            continue;
        }

        $arrData[$index] = $value;
        //echo "$arrData[$index]: ".$arrData[$index]."</br>";
    }

}

return $arrData;
}

`$entry=0;

$xmlUrl = "9424.xml"; // XML feed file/URL

$xmlStr = file_get_contents($xmlUrl);

$xmlObj = simplexml_load_string($xmlStr);

$arrXml = objectsIntoArray($xmlObj, $entry);` 
```

第一次执行时显示：关键字[0]：电信计算

第二个显示：关键字[0]：多代理系统

你看？又是0....

xml中的一些代码：

```
<keywordset keywordtype="Inspec">
      <keyword>
        <keywordterm><![CDATA[telecommunication computing]]></keywordterm>
      </keyword>
      <keyword>
        <keywordterm><![CDATA[multi-agent systems]]></keywordterm>
       </keyword>
      <keyword>
        <keywordterm><![CDATA[state estimation]]></keywordterm>
      </keyword>
      <keyword>
        <keywordterm><![CDATA[control engineering computing]]></keywordterm>
      </keyword>
      <keyword>
        <keywordterm><![CDATA[telecommunication control]]></keywordterm>
      </keyword>
    </keywordset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:04:08.600

我不完全确定你想在这里实现什么，但我注意到的一件事是你试图在不引用对象的情况下更改参数。

改变

```
function objectsIntoArray($arrObjData, $entry, $arrSkipIndices = array()) { 
```

到

```
function objectsIntoArray(&$arrObjData, &$entry, $arrSkipIndices = array()) { 
```

它可能有帮助，也可能没有帮助；但它可以尝试。

我的意思的例子...

```
function IncNumber($num)
{
    $num++;
}

$num = 0;
IncNumber($num);
// $num will still be 0

// Using & to declare a reference to the object
function IncNumber2(&$num)
{
    $num++;
}
IncNumber2($num);
// $num will be 1 
```

# groovy - 在 Groovy 中详尽地遍历 AST 树

> ID：11487999
> 
> 赞同：1
> 
> 时间：2012-07-14T22:54:21.657
> 
> 标签：groovy, abstract-syntax-tree

这与我关于拦截对给定类中的字段的所有访问的问题有关，而不仅仅是那些以与 Groovy“属性”样式访问一致的方式完成的访问。您可以在此处查看：[在 groovy 中拦截 LOCAL 属性访问](https://stackoverflow.com/questions/11456215/intercepting-local-property-access-in-groovy)。

我发现肯定会解决我的问题的一种方法是在编译时使用 AST 用属性访问重写任何非属性访问。例如，如果一个类看起来像这样：

```
class Foo {
  def x = 1
  def getter() {
    x
  }
  def getProperty(String name) {
    this."$name" ++
  }
}

foo = new Foo()
assert foo.getter() == 1
assert foo.x == 2 
```

这些断言语句将起作用，因为 getter 方法直接访问 x 并且 foo.x 通过 getProperty("x") 在返回之前递增 x。

经过一些试验和错误后，我可以使用 AST 转换来更改代码的行为，以便“getter”方法中的表达式“x”实际上作为属性而不是本地字段进行访问。到目前为止，一切都很好！

现在，我该如何访问给定类中本地字段的所有访问权限？我一直在互联网上寻找某种 AST tree walker helper，但还没有找到。[我真的需要在这里http://groovy.codehaus.org/api/org/codehaus/groovy/ast/expr/package-summary.html](http://groovy.codehaus.org/api/org/codehaus/groovy/ast/expr/package-summary.html)和所有 18 种语句类型http://groovy.codehaus.org/api/org/codehaus/groovy/ast/expr/package-summary.html实现一个表达式步行器[： //groovy.codehaus.org/api/org/codehaus/groovy/ast/stmt/package-summary.html](http://groovy.codehaus.org/api/org/codehaus/groovy/ast/stmt/package-summary.html) ? 这似乎是某人必须已经写过的东西（因为它首先是构建 AST 树的组成部分），但我似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:40:58.617

格伦

您正在寻找某种访客。Groovy 定义了一些您可以使用的访问者（文档薄弱）。对于您的问题，我没有确切的答案，但我可以为您提供一些指导。

下面的代码片段显示了如何遍历类的 AST 并打印所有方法名称：

```
class TypeSystemUsageVisitor extends ClassCodeVisitorSupport {

@Override
public void visitExpression(MethodNode node) {
    super.visitMethod(node)
    println node.name
}

@Override
protected SourceUnit getSourceUnit() {
    // I don't know ho I should implement this, but it makes no difference
    return null;
} 
} 
```

这就是我使用上面定义的访问者的方式

```
def visitor = new TypeSystemUsageVisitor()
def sourceFile = new File("path/to/Class.groovy")
def ast = new AstBuilder().buildFromString(CompilePhase.CONVERSION, false, sourceFile.text).find { it.class == ClassNode.class }
ast.visitContents(visitor) 
```

游客会为您照顾横穿这棵树。他们有 visit* 方法，您可以覆盖这些方法并使用它们做任何您想做的事情。我相信适合您问题的访问者是 CodeVisitorSupport，它有一个 visitVariableExpression 方法。

我建议您阅读groovyConsole 附带[的 AST 浏览器的代码，](https://github.com/groovy/groovy-core/blob/master/subprojects/groovy-console/src/main/groovy/groovy/inspect/swingui/ScriptToTreeNodeAdapter.groovy)以获取有关如何使用 Groovy AST 访问者的更多示例。另外，请查看 CodeVisitorSupport 的[api 文档](http://groovy.codehaus.org/api/org/codehaus/groovy/ast/CodeVisitorSupport.html)。