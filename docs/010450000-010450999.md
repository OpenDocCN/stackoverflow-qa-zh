# StackOverflow 问答 10450000-10450999

# facebook-like - 当有人喜欢页面并且永远不会不显示给其他人时，Facebook 喜欢按钮不会显示

> ID：10450001
> 
> 赞同：0
> 
> 时间：2012-05-04T13:38:46.603
> 
> 标签：facebook-like

我想在每个页面上添加**facebook like 按钮。**

但问题是当页面加载时第一次显示like按钮，然后如果有人喜欢这个按钮，那么like按钮是不可见的。

我正在测试网址`https://developers.facebook.com/docs/reference/plugins/like/`

在这里遇到同样的问题。我在测试时没有遇到任何问题`http://fridaymedia.in/`

但是当我测试时

```
http://fridaymedia.in/TP_ECom/

http://fridaymedia.in/TP_ECom/retail/

http://fridaymedia.in/TP_ECom/retail/details/

http://fridaymedia.in/TP_ECom/retail/details/men-clothing-t-shirts/ 
```

他们正在解决问题。

请问有人解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:29:56.690

您网站的页面是否受 .htaccess 密码保护？如果是这样，那可能就是问题所在。我自己也遇到了这个问题，在走了一段错误的路之后，我又回到了我最初的怀疑——htaccess 密码。

我并没有真正查看代码，但我假设按钮设置为在用户点击后让 FB 抓取页面。用密码屏蔽的东西，FB不能刮网页。它不会像没有被点击一样显示按钮，而是什么都不显示——这是我的，我假设你的，困惑的地方。

更改 htaccess 后，您必须等待 24 小时，以便页面在加载时被 FB 抓取。但是，您可以使用 FB 调试器 (http://developers.facebook.com/tools/debug) 手动抓取各个页面。

# .net - 创建设置而不写入注册表

> ID：10450003
> 
> 赞同：1
> 
> 时间：2012-05-04T13:38:49.287
> 
> 标签：.net, installation, registry, roaming

我需要为我的 .Net4 应用程序进行设置。我对安装程序的期望是它只会检查目标计算机上是否安装了 .Net4 客户端配置文件，如果没有，它将部署 .Net 包并将应用程序提取到启动设置的目录。

我不想在其他任何地方写（应用程序正在“漫游”并从 sd 卡运行，例如）将其复制到开始菜单或程序文件或写入注册表。我只想能够运行该应用程序。

可以通过设置分发 .Net4 客户端配置文件（任何许可证限制）吗？

可能吗？我该如何开始？感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:58:58.907

好的，所以这是可能的。只需删除安装项目中的所有注册表和应用程序条目。简单的。

# android - 我在哪里可以下载旧版本的 Android SDK？

> ID：10450008
> 
> 赞同：2
> 
> 时间：2012-05-04T13:39:02.123
> 
> 标签：android, android-sdk-1.6

我需要下载第 16 版，因为它们似乎破坏了处理兼容性。我在 SDK 网站上找不到它，我唯一能想到的就是谷歌搜索文件名“installer_r16-windows.exe”，但它似乎没有合法地托管在任何地方，我宁愿避免。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:47:40.527

[http://dl.google.com/android/installer_r16-windows.exe](http://dl.google.com/android/installer_r16-windows.exe)

或更一般地说

[http://dl.google.com/android/installer_rXX-windows.exe](http://dl.google.com/android/installer_rXX-windows.exe)

它们没有列出，您只需在 URI 中修复它！

# facebook - 如何让 Facebook 从我的应用程序中注销

> ID：10450011
> 
> 赞同：-3
> 
> 时间：2012-05-04T13:39:12.143
> 
> 标签：facebook

我正在使用 Facebook 登录来登录我的应用程序。所有应用程序都运行良好

但是用户单击我的应用程序中的注销按钮，用户将从我的应用程序中注销

应用程序，但登录用户的 Facebook 帐户不会从 Facebook 注销

application.当用户从我的应用程序中自动注销时，用户将从

脸书应用程序也。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:37:00.027

我不确定您的应用程序是如何构建的，但可以使用 JavaScript SDK 将用户从 FB 中注销（或将其登录）。

[http://developers.facebook.com/docs/reference/javascript/FB.logout/](http://developers.facebook.com/docs/reference/javascript/FB.logout/)

# html - 为（移动）浏览器中的 CSS3 HW GPU 加速优化基于 SVG 的精灵表

> ID：10450022
> 
> 赞同：36
> 
> 时间：2012-05-04T13:39:55.087
> 
> 标签：html, css, webkit, svg, mobile-safari

在过去的一周里，我一直在帮助一个朋友在浏览器中试验基于 SVG 的精灵表。我们想提出一个**理想的工作流程**来在浏览器中准备、发布和运行高质量的动画图形。因此，理想情况下，拥有适用于小型智能手机屏幕、平板电脑、视网膜显示器和桌面浏览器的单一动画数据源。

理论上，（基于矢量的）SVG 应该是理想的，但由于 SVG 通常不常用 - 我们决定对其进行测试。这个想法不是使用 SMIL SVG（因此没有基于 SVG 的动画），而是创建一个动画精灵表（就像您通常使用光栅数据 PNG/JPG 一样），而是使用纯矢量（即 SVG）来执行此操作。它有点大，但如果它可以工作 - 它甚至可以使用更优化的东西。

再加上逐帧矢量动画可以为我们的工作流程做很多事情——它允许我们使用 Flash 编辑器来制作动画，然后将它们导出到 SVG 精灵表。

无论如何，**结果出奇地好**，但在某些方面也失败了（请注意，出于测试目的，我们只使用基于 Webkit 的浏览器，即 Safari、Chrome、iOS 上的移动 Safari 和 Android ICS）。

在 CSS 中，为这样的精灵表触发硬件加速非常容易（至少在具有关键帧和步骤的现代浏览器中）——你只需这样做：

```
background-image: url(my.svg);
-webkit-animation: walk 1s steps(12, end) infinite; 
```

调用此处显示的基于关键帧的动画：

```
@-webkit-keyframes walk {
    from { -webkit-transform: translate3d(0, 0, 0); }
    to { -webkit-transform: translate3d(-100%, 0, 0); }          
} 
```

在哪里使用 translate3d 应该让 GPU 启动，整个事情应该在 iOS 移动 Safari 和 Android ICS 浏览器中进行硬件加速。

考虑到它是一种蛮力技术和相当大的矢量动画（测试为 600x600px），这足以令人惊讶 - 整个事情都飞了。但它并不完美 - 它在起飞前会在 Safari 中闪烁。而且在 ICS 浏览器中它一直在闪烁，所以它不是真正可用的。

所以我们尝试了常用的技巧来消除闪烁，例如：

```
-webkit-transform: translateZ(0);    
-webkit-backface-visibility: hidden;
-webkit-perspective: 1000; 
```

但这没有用。因此，我们尝试在内存中动态光栅化 SVG，并将其用作纹理*-webkit-transform: scale3d(1, 1, 0)*但这对以太没有帮助。

最后，我们只是用相同大小的渲染出来的 PNG/JPG 精灵表替换了 SVG，认为复杂的矢量对浏览器来说太多了 - 但你猜怎么着？它是同样的问题 - 所以它根本不是 SVG 渲染 -**它是一个浏览器绘图问题。**进一步的证明是，如果我们将动画减慢到 1FPS - 闪烁仍然存在。

图像对于 GPU 来说太大了吗？我们是否已达到您能够在浏览器（尤其是移动设备）中轻松绘制/动画的性能极限？

我真的很感激关于如何潜在地摆脱闪烁的想法/黑客（特别是因为它的表现如此之快）。它只是一种有前途的技术——适应不同屏幕尺寸**的高性能浏览器动画——HTML5 圣杯**；）

通过一些优化，例如

```
<svg preserveAspectRatio="xMinYMax slice" viewBox="0 0 600 50"> 
```

还有一些 CSS 魔法，我们能够让 SVG 完美地适应它的容器，并从单个 CSS 类改变它的大小。它真的会创造奇迹 - 但可惜闪烁。

无论如何 - 请**[在此处阅读更多相关信息](https://plus.google.com/100663135211813370970/posts/Tmd6tL28ZFD)**，您也可以**尝试一下**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:46:31.760

很酷的想法。

如何更改帧的 zindex 以便将图像分层？这可能会解决闪烁问题，因为在重绘期间最后一帧仍然可见。因此，您只需不断增加最新帧的 zindex 值即可。当然，这是有限制的，您需要再次重置 zindex，但这可能会对减少闪烁产生很大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:29:48.477

我这里没有 ICS 来检查它，但是在 iPhone 5 上的 iOS 6 和 Galaxy Nexus 上的 Jelly Bean 4.1.1 上，动画看起来非常流畅，*除非*我缩放时，此时我会看到一些闪烁的帧然后它又安定下来了。

这让我想起了一个类似的问题，我在大画布上进行渲染并在屏幕周围进行转换（在任何给定时间，大部分画布都在屏幕外）。

我当时的黑盒分析表明这是一些优化，浏览器不会费心渲染屏幕外的内容，而是等到它变得可见，这完全违背了拥有大图像和硬件加速它的目的。

我的“解决方案”是 -webkit-transform：将整个图像缩小到足够小以确保它全部适合屏幕（因此浏览器别无选择，只能渲染整个图像），让它渲染，然后将其放大到我想要的尺寸。

（顺便说一句：为了对用户隐藏这个hackery，我最初尝试设置 opacity: 0 以便预渲染不可见，但似乎这与离屏渲染具有相同的效果 - 它已被优化。在最后，我将不透明度设置得非常低，并用*几乎*不透明的“加载”消息覆盖它，这意味着肉眼看不到背景渲染，但浏览器没有绝对可见/不可见的优化。不确定这是否有点矫枉过正，但它似乎适用于我的设置。）

我很想知道类似的技术是否适合您。

# asp.net - DataTable 和 GridView 中的换行符

> ID：10450024
> 
> 赞同：1
> 
> 时间：2012-05-04T13:39:58.883
> 
> 标签：asp.net, string, gridview, datatable

我实际上是在尝试使用 c# 在 asp.net 项目中的字符串中插入换行符。我将此字符串放入 DataRow 中，然后将其添加到名为“ds”的数据表中。完成后，我将此数据表 ds 链接到 gridview . 这是我的代码：

```
 risque.projet = dt.Rows[i]["fk_projet"].ToString();
            risque.release = dt.Rows[i]["fk_release"].ToString();

            //Create the String for adding to the row
            String test = "Project:"+risque.projet+"<br>"+ "Release: "+risque.release;
            drow["Description"] = test;
            Label1.Text = test;

            //Add the row to the datatable.
            ds.Rows.Add(drow);

            //Link the datatable to the gridview
            GridView1.DataSource = ds;
            GridView1.DataBind(); 
```

我想要这个输出：

项目：.......

释放：.......

但我总是有：项目：....发布......

我尝试了很多解决方案： -System.Environment.NewLine -\r\n -\n

编辑：我的 gridView 的代码。我的 gridview 中没有任何内容，因为所有内容都是在运行时创建的。

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        EnableSortingAndPagingCallbacks="True" PageSize="5">
        <SelectedRowStyle Wrap="True" />
    </asp:GridView> 
```

但没有任何效果。br 标签有效，但仅当我在标签中显示我的字符串时。

你知道我的错误吗？你有解决办法吗？我在这上面花了太多时间。

谢谢，

昆汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:44:12.163

它应该可以将标签放入，但将列的 HtmlEncode 属性设置为 false。默认情况下，所有字段都是 HtmlEncoded，这当然会阻止 html 标签像 html 标签一样工作。

但是，如果您这样做，则需要在代码隐藏中手动对字段值进行 htmlencode 以防止 XSS。

```
"Project:" + Server.HtmlEncode(risque.projet )+ "<br />" + "Release: " + Server.HtmlEncode(risque.release) 
```

（与 Server.HtmlEncode 相比，我更喜欢[Anit-Cross-Site Scripting](http://msdn.microsoft.com/en-us/security/aa973814) Library 的 HtmlEncode 实现，但这是另一个主题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:56:41.353

在这种情况下，您可以使用回车符 vbCrLf 来代替连接中断标记。

回车字符用于打印和显示功能。

但是，C# 中不存在 vbCrLf。vbCrLf 的值为“\r\n”。所以试试下面这个。

```
string vbCrLf = "\r\n";
String test = "Project:" + risque.projet + vbCrLf + "Release: " + risque.release; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T20:33:55.643

将网格列转换为模板列，标签将发挥作用。
如果将数据绑定到标签，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:44:53.943

我认为你需要：`<br />` 而不是`<br>`

# linux-device-driver - 无法在 RHEL 6.1 中配置 Idea-3g NetSetter，系统将其作为海量存储而不是调制解调器

> ID：10450025
> 
> 赞同：0
> 
> 时间：2012-05-04T13:39:59.183
> 
> 标签：linux-device-driver

我已经安装了 Redhat（未购买）6.1（新 Redhat），我正在尝试在其中连接 Idea-3g NetSetter。我已经通过 Yum 安装了 ppp 和 wvdial 并在 /etc/wvdial.conf 文件中进行了必要的更改，但我无法配置它。

当我浏览日志时，我发现我的系统正在将此设备作为大规模存储设备而不是将其作为调制解调器设备。我去了谷歌，但它也没有帮助我

在 Wvdial.conf 文件中，我必须输入 /dev/ttyUSB0 但在 dev 目录下没有像 ttyUSB 这样的文件。有 tty1，tty2 等。所以我该如何解决这个问题。请帮助我..一些必要的信息在这里

```
[root@server ~]# wvdial
--> WvDial: Internet dialer version 1.60
--> Cannot open /dev/ttyUSB0: Inappropriate ioctl for device
--> Cannot open /dev/ttyUSB0: Inappropriate ioctl for device
--> Cannot open /dev/ttyUSB0: Inappropriate ioctl for device
[root@server ~]# lsusb
Bus 002 Device 003: ID 0bda:0138 Realtek Semiconductor Corp. 
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 006: ID 12d1:1446 Huawei Technologies Co., Ltd. E1552 (HSPA modem)
Bus 001 Device 004: ID 0c45:643d Microdia 
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
[root@server ~]#vi /proc/version
Linux version 2.6.32-131.0.15.el6.i686 (mockbuild@x86-001.build.bos.redhat.com) (gcc version 4.4.4 20100726 (Red Hat 4.4.4-13) (GCC) ) #1 SMP Tue May 10 15:42:28 EDT 2011 

[root@server ~]# tail /var/log/messages  (Last Few Lines)
May  4 22:49:18 server kernel: usb 1-1.2: USB disconnect, address 6
May  4 22:49:18 server kernel: scsi 15:0:0:0: rejecting I/O to dead device
May  4 22:49:19 server gnome-keyring-daemon[2212]: removing removable location: /media/20110811_0533
May  4 22:49:19 server gnome-keyring-daemon[2212]: no volume registered at: /media/20110811_0533
May  4 22:49:31 server kernel: usb 1-1.2: new high speed USB device using ehci_hcd and address 7
May  4 22:49:31 server kernel: usb 1-1.2: New USB device found, idVendor=12d1, idProduct=1446
May  4 22:49:31 server kernel: usb 1-1.2: New USB device strings: Mfr=3, Product=2, SerialNumber=0
May  4 22:49:31 server kernel: usb 1-1.2: Product: HUAWEI Mobile
May  4 22:49:31 server kernel: usb 1-1.2: Manufacturer: HUAWEI Technology
May  4 22:49:31 server kernel: usb 1-1.2: configuration #1 chosen from 1 choice
May  4 22:49:31 server kernel: scsi17 : SCSI emulation for USB Mass Storage devices
May  4 22:49:31 server kernel: scsi18 : SCSI emulation for USB Mass Storage devices
May  4 22:49:36 server kernel: scsi 17:0:0:0: CD-ROM            HUAWEI   Mass Storage     2.31 PQ: 0 ANSI: 2
May  4 22:49:36 server kernel: scsi 18:0:0:0: Direct-Access     HUAWEI   SD Storage       2.31 PQ: 0 ANSI: 2
May  4 22:49:36 server kernel: sr1: scsi-1 drive
May  4 22:49:36 server kernel: sr 17:0:0:0: Attached scsi generic sg2 type 5
May  4 22:49:36 server kernel: sd 18:0:0:0: Attached scsi generic sg4 type 0
May  4 22:49:36 server kernel: sd 18:0:0:0: [sdc] Attached SCSI removable disk

[root@server ~]# cd /dev/
[root@server dev]# ls
agpgart          log                 ram1    sda5      tty15  tty40  tty9
autofs           loop0               ram10   sda6      tty16  tty41  ttyS0
block            loop1               ram11   sda7      tty17  tty42  ttyS1
bsg              loop2               ram12   sda8      tty18  tty43  ttyS2
bus              loop3               ram13   sdb       tty19  tty44  ttyS3
cdrom            loop4               ram14   sdc       tty2   tty45  urandom
cdrom2           loop5               ram15   sg0       tty20  tty46  usbmon0
cdrw             loop6               ram2    sg1       tty21  tty47  usbmon1
char             loop7               ram3    sg2       tty22  tty48  usbmon2
console          lp0                 ram4    sg3       tty23  tty49  v4l
core             lp1                 ram5    sg4       tty24  tty5   vcs
cpu              lp2                 ram6    shm       tty25  tty50  vcs1
cpu_dma_latency  lp3                 ram7    snapshot  tty26  tty51  vcs2
crash            MAKEDEV             ram8    snd       tty27  tty52  vcs3
disk             mapper              ram9    sr0       tty28  tty53  vcs4
dri              mcelog              random  sr1       tty29  tty54  vcs5
dvd              mem                 raw     stderr    tty3   tty55  vcs6
dvdrw            net                 rfkill  stdin     tty30  tty56  vcsa
fb               network_latency     root    stdout    tty31  tty57  vcsa1
fb0              network_throughput  rtc     systty    tty32  tty58  vcsa2
fd               null                rtc0    tty       tty33  tty59  vcsa3
full             nvram               scd0    tty0      tty34  tty6   vcsa4
fuse             oldmem              scd1    tty1      tty35  tty60  vcsa5
hpet             port                sda     tty10     tty36  tty61  vcsa6
hugepages        ppp                 sda1    tty11     tty37  tty62  vga_arbiter
hvc0             ptmx                sda2    tty12     tty38  tty63  video0
input            pts                 sda3    tty13     tty39  tty7   watchdog
kmsg             ram0                sda4    tty14     tty4   tty8   zero

 [root@server dev]#vi /etc/wvdial.congf

[Dialer Defaults]
Modem=/dev/ttyUSB0        ***what to write here***
Baud = 115200
Init 1 = AT+CGMM
Init 2 = AT+CMEE=1
Init 3 = ATE0
Init 4 = AT^HS=0,0
Init 5 = AT+CFUN?
Init 6 = AT+CLCK="SC",2
Init 7 = AT+CPIN?
Init 8 = AT+CLCK="SC",2
Modem Type = USB MODEM
Phone=*99#
Username =""
Password =""
New PPPD = yes
Dial Command=ATDT
Stupid Mode=1
ISDN=0 
```

**请帮助我如何解决它**

* * *

我正在提供 wvdial coomand 的输出，它一次又一次地重新启动并**显示 ppd 错误 16。**我试图找出它并发现这个错误是调制解调器挂起的。我尝试了很多，但问题就是这样。

```
[root@server ~]# wvdial
--> WvDial: Internet dialer version 1.60
--> Cannot get information for serial port.
--> Initializing modem.
--> Sending: ATZ
ATZ
OK
--> Sending: ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
OK
--> Modem initialized.
--> Sending: ATDT*99#
--> Waiting for carrier.
ATDT*99#
CONNECT
--> Carrier detected.  Starting PPP immediately.
--> Starting pppd at Sat May  5 07:25:25 2012
--> Pid of pppd: 2905
--> Using interface ppp0
--> Disconnecting at Sat May  5 07:25:27 2012
--> The PPP daemon has died: A modem hung up the phone (exit code = 16)
--> man pppd explains pppd error codes in more detail.
--> Try again and look into /var/log/messages and the wvdial and pppd man pages for more information.
--> Auto Reconnect will be attempted in 5 seconds
--> Cannot get information for serial port.
--> Initializing modem.
--> Sending: ATZ
ATZ
OK
--> Sending: ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
OK
--> Modem initialized.
--> Cannot get information for serial port.
--> Initializing modem.
--> Sending: ATZ
ATZ
OK
--> Sending: ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
OK
--> Modem initialized.
--> Sending: ATDT*99#
--> Waiting for carrier.
ATDT*99#
CONNECT
--> Carrier detected.  Starting PPP immediately.
--> Starting pppd at Sat May  5 07:25:32 2012
--> Pid of pppd: 2925
--> Using interface ppp0
--> Disconnecting at Sat May  5 07:25:34 2012
--> The PPP daemon has died: A modem hung up the phone (exit code = 16)
--> man pppd explains pppd error codes in more detail.
--> Try again and look into /var/log/messages and the wvdial and pppd man pages for more information.
--> Auto Reconnect will be attempted in 10 seconds

[root@server ~]# vi /dev/tty
tty                tty25              tty42              tty6
tty0               tty26              tty43              tty60
tty1               tty27              tty44              tty61
tty10              tty28              tty45              tty62
tty11              tty29              tty46              tty63
tty12              tty3               tty47              tty7
tty13              tty30              tty48              tty8
tty14              tty31              tty49              tty9
tty15              tty32              tty5               ttyS0
tty16              tty33              tty50              ttyS1
tty17              tty34              tty51              ttyS2
tty18              tty35              tty52              ttyS3
tty19              tty36              tty53              ttyUSB3
tty2               tty37              tty54              ttyUSB4
tty20              tty38              tty55              ttyUSB_utps_diag
tty21              tty39              tty56              ttyUSB_utps_modem
tty22              tty4               tty57              ttyUSB_utps_pcui
tty23              tty40              tty58              
tty24              tty41              tty59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:53:29.260

这种设备首先将自己呈现为大容量存储设备是相当普遍的，可能包含文档和驱动程序。

尝试先[弹出](http://eject.sourceforge.net/)大容量存储设备。真正的调制解调器设备可能会出现。

**自动化这个**

一旦您确认这确实是问题所在，您就可以自动弹出。

在[这个论坛讨论](http://www.linuxquestions.org/questions/slackware-14/wvdial-problem-911225/)中描述得相当好，但简而言之，你添加一个 udev 规则，一旦检测到设备就会调用弹出或 usb-modeswitch。这样，将创建正确的设备节点，您无需担心 WvDial 中的问题。

# wix - icacls 从 Wix CAQuietExec 运行时的行为与从 dos 命令行运行时不同

> ID：10450029
> 
> 赞同：1
> 
> 时间：2012-05-04T13:40:15.703
> 
> 标签：wix, windows-installer, windows-server-2008-r2, wix3.5, cacls

在 Windows 2008 R2 x64 上使用 Wix 3.5
我以管理员身份运行它以避免任何权限问题。我创建了一个安装程序，它执行 icacls 命令以将用户添加到 c:\windows\system32\inetsrv\config\administration.config 文件的 ACL。这是wix代码

```
 <Property Id="QtExecExample" Value='"cmd" /c icacls "c:\windows\system32\inetsrv\config\administration.config" /Grant johndoe:M /T'/>
    <CustomAction Id="QtExecExample" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="no"/>

    <InstallExecuteSequence>
       <Custom Action="QtExecExample" Before='InstallFinalize' > NOT Installed</Custom>
    </InstallExecuteSequence> 
```

以下是 msi 日志中的输出

*MSI (s) (44:88) [07:51:46:872]：执行操作：CustomActionSchedule(Action=QtExecExample,ActionType=3073,Source=BinaryData,Target=CAQuietExec,CustomActionData="cmd" /c icacls "c :\windows\system32\inetsrv\config\administration.config" /Grant johndoe:M /T) MSI (s) (44:88) [07:51:46:872]: 为 790536 类型创建 MSIHANDLE (795)线程 1928
MSI (s) (44:38) [07:51:46:872]：调用远程自定义操作。DLL：
C:\Windows\Installer\MSIFBCF.tmp，入口点：CAQuietExec
MSI (s) (44!68) [07:51:46:888]：为线程 2920
**CAQuietExec 创建类型为 790531 的 MSIHANDLE (796)：已成功处理0 个文件；处理 0 个文件失败*** 

如您所见，文件几乎没有被修改，就好像命令被忽略了一样。用户未添加到 ACL。我知道该命令有效，因为如果我从 dos 提示符运行该命令，我会得到以下信息。

*C:\Users\Administrator\Desktop>cmd /c icacls "c:\windows\system32\inetsrv\config\administration.config" /Grant johndoe:M /T
处理文件：c:\windows\system32\inetsrv\config\ Administration.config
**成功处理了 1 个文件；处理 0 个文件失败***

如果从 WIX 运行命令但不确定原因，似乎无法更改 inetsrv\config 下文件的 ACL。如果命令通过命令行工作，那么它不应该通过 Wix CAQuietExec 工作吗？有谁知道我做错了什么或我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:01:14.153

发现了问题。即使我的 msi 构建为 64 位二进制文​​件，正在运行的 icacls 命令也是 32 位版本。inetsrv\config 下的文件只能由 64 位程序修改。无论如何，我需要在我的 wix 文件中进行以下两项更改
1) 使用 icacls 的 64 位版本的完整路径，即。**c:\windows\system32\icacls**
2) 将 DllEntry="CAQuietExec" 更改为**DllEntry="CAQuietExec64"**

上述两个更改解决了该问题。即使这现在可行，我还是决定使用一个自定义操作来更改 ACL。

# php - PHP 嵌套导航

> ID：10450041
> 
> 赞同：1
> 
> 时间：2012-05-04T13:40:30.187
> 
> 标签：php, recursion, navigation

我正在构建一个数据库驱动的导航，我需要一些帮助来构建我的数据结构。我对递归不是很有经验，但这很可能是这条路。数据库表有一个 id 列、一个 parent_id 列和一个 label 列。调用该方法的结果为我提供了数据结构。我的数据结构方式应导致以下结果：

*   parent_id 为 0 的记录被假定为根元素。
*   如果存在一个子元素，则每个根元素都包含一个子元素数组，该子元素包含一个包含等于根元素 id 的 parent_id 的元素数组。
*   子项可能包含一个子项数组，其中包含的 parent_ids 等于直接子项（这将是递归点）
*   当存在包含不为 0 的 parent_id 的记录时，它会被添加到子元素的数组中。

以下是数据结构的外观：

```
$data = array(
  'home' => array(    
      'id' => 1,
      'parent_id' => 0,
      'label' => 'Test',
      'children' => array(
          'immediatechild' => array(
              'id' => 2,
              'parent_id' => 1,
              'label' => 'Test1',
              'children' => array(
                 'grandchild' => array(
                     'id' => 3,
                     'parent_id' => 2,
                     'label' => 'Test12',
             ))
         ))
  ) 
```

);

这是我在片刻之后想到的。它不正确，但它是我想要使用的，我想要一些帮助来修复它。

```
<?php
// should i pass records and parent_id? anything else?
function buildNav($data,$parent_id=0)
{
   $finalData = array();
   // if is array than loop
   if(is_array($data)){
      foreach($data as $record){
          // not sure how/what to check here
        if(isset($record['parent_id']) && ($record['parent_id'] !== $parent_id){
            // what should i pass into the recursive call?            
            $finalData['children'][$record['label'][] = buildNav($record,$record['parent_id']);
         }
      }
    } else {
       $finalData[] = array(
        'id' => $data['id'],
        'parent_id' => $parent_id,
        'label' => $data['label'],         
     )
   } 
    return $finalData
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:06:21.793

最简单的解决方案（假设您已经使用父 id 作为 FK 以指示层次结构以关系表示形式存储数据）只是暴力破解它：

```
 $start=array(
     array('parent_id'=>0, 'title'=>'Some root level node', 'id'=>100), 
     array('parent_id'=>0, 'title'=>'Other root level node', 'id'=>193),
     array('parent_id'=>100, 'title'=>'a child node', 'id'=>83),
     ....
 );
 // NB this method will work better if you sort the list by parent id

 $tree=get_children($start, 0);

 function get_children(&$arr, $parent)
 {
    static $out_index;
    $i=0;
    $out=array();
    foreach($arr as $k=>$node) {
       if ($node['parent_id']==$parent) {
         ++$i;
         $out[$out_index+$i]=$node;
         if (count($arr)>1) {
             $out[$out_index+$i]['children']=get_children($arr, $node['id']);
         }
         unset($arr[$k]);
    }
    $out_index+=$i;
    if ($i) {
      return $out;
    } else {
      return false;
    }
 } 
```

但更好的解决方案是对数据库中的数据使用[邻接表模型](http://www.sqlsummit.com/AdjacencyList.htm)。作为一种临时解决方案，您可能希望序列化树数组并将其缓存在文件中，而不是每次都解析它。

# php - 如果已经提交了一个键，则附加一个值（表单中的复选框）PHP

> ID：10450042
> 
> 赞同：0
> 
> 时间：2012-05-04T13:40:36.387
> 
> 标签：php, mysql

我有一个奇怪的问题。我有一个用于多种表单的 PHP 脚本。它接收所有请求，然后将数据放入数据库中的适当表中。就目前而言，它看起来像这样：

```
 $fields = "";
$values = "";

foreach ($_REQUEST as $key=>$value)
{

        $key = str_replace(":","",$key);
        $fields .= "$key,";
        $values .= "'$value ',";
}

//remove the ending comma from $fields and $values
$fields = substr($fields, 0, -1);
$values = substr($values, 0, -1);

$sql = "INSERT INTO " . $survey . " ($fields) VALUES ($values)";
mysql_query($sql)
    or die(mysql_error()); 
```

这很好用。问题是，有些表格带有复选框（即一个人可以选择多个选项）。如果我使用 get 方法，查询字符串将如下所示：

www.somesite.php?V9=1&V9=2&V9=4

使用当前脚本，只取 4，因为它是最后一个值。

现在，我知道发生这种情况的一个原因是因为复选框名称在表单中的定义方式。它说 name="V9" 而不是 name="V9[]" 但是，我无法更改表格。它们是由软件生成的，其想法是任何用户都可以创建一个 HTML 表单，将其指向脚本，它们的信息将记录在一个表格中。因此，更改 HTML 不是我的选择。

因此，我需要一种方法来检测是否已提交密钥，如果已提交，则附加该值。我试过这个：

```
 $fields = "";
$values = "";

foreach ($_REQUEST as $key=>$value)
{

        //check to see if the key has already been used for multi-choice questions
        $key_check = strpos($fields, "$key,");

        if($key_check !== false){
            $values = substr($values, 0, -2);
            $values .= "\;$value ',";
        }else{
            $key = str_replace(":","",$key);
            $fields .= "$key,";
            $values .= "'$value ',";
        }
}

//remove the ending comma from $fields and $values
$fields = substr($fields, 0, -1);
$values = substr($values, 0, -1);

$sql = "INSERT INTO " . $survey . " ($fields) VALUES ($values)";
mysql_query($sql)
    or die(mysql_error()); 
```

但我得到相同的结果。$key_check 似乎永远不会有效。任何帮助，将不胜感激。这里有人有一个工作的 ASP 版本，它做类似的事情，但它通过电子邮件发送数据，而不是将其保存在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:44:46.163

如果你使用 $_GET，你可以试试这个：

```
function convertInput($qs=""){
  $rtn = "";
  $holdingArray = array();
  if(trim($qs)!=""){
    $vars = explode("&", $qs);
    foreach($vars as $val){
      $kv = explode("=", $val);
      if(count($kv)==2){
        if(isset($holdingArray[$kv[0]])){
          $holdingArray[$kv[0]] .= "," . $kv[1];
        }else{
          $holdingArray[$kv[0]] = $kv[1];
        }
      }
    }
    $rtn = $holdingArray;
  }
  return $rtn;
}
print_r(convertInput($_SERVER["QUERY_STRING"])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:05:28.557

试试这个：

```
$keys = array();
$values = array();
foreach ($_POST as $key=>$value){ //So, it will loop through the form data
    if (!array_search($key, $keys)){ //Checking to see if the key has been used yet
        $keys[] = $key;
    } else {
        $values[$key][] = array($key=>$value);
    }
} 
```

这应该构建一个从相同表单构建的选择数组`FORM SELECT`，前提是从浏览器中保留数据并在逻辑上消除（当作为数组访问时，仅保留相同关联键的最后一个元素，否则数据有没有）而不是程序上消除。

我不知道这是否有效，因为这是建立在理论之上，而不是来自任何类型的文档或代码专业知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:17:00.380

PHP 将请求字符串（查询字符串或 x-www-form-urlencoded）解析为 $_GET、$_POST 和 $_REQUEST 数组，使用的规则是，当同一个键多次出现时，后面的键值会覆盖以前的键值。因此，如果您不能`[]`像 PHP 期望的那样更改表单上的键名以追加，您必须访问原始查询字符串并手动解析它。

请注意，重复键名而不会使`[]`查询字符串键是标量还是数组产生歧义。你将不得不决定如何解决这个问题。例如，您可以使用服务器定义的硬编码名称列表和数组值。

这是您可以将查询字符串处理为值*列表*的方式：

```
function paramlist($querystring, $raw=false) {
    $plist = array();
    $decoder = ($raw) ? 'rawurldecode' : 'urldecode';
    $pairs = explode('&', $querystring);
    foreach ($pairs as $pair) {
        $plist[] = array_map($decoder, explode('=', $pair, 2));
    }
    return $plist;
} 
```

如果您有类似的查询字符串`a=1&b=2&a=3`，此函数将返回`array(array('a','1'),array('b','2'),array('a','3'))`。然后，您可以使用所需的任何逻辑将其转换为关联数组。

但是，您首先需要获取查询或表单字符串：

```
if ($_SERVER['REQUEST_METHOD']==='POST'
    and $_SERVER['CONTENT_TYPE']==='application/x-www-form-urlencoded') {
   // form body
   $qs = trim(file_get_contents('php://input'));
} else {
   // url query string
   $qs = $_SERVER['QUERY_STRING'];
} 
```

请注意，如果您发送使用 编码的表单`multipart/form-data`，PHP*将不允许您访问原始请求*（甚至`php://input`无法正常工作），因此在这种情况下，*无法*重新处理表单变量。对不起！

# java - 为什么 Tomcat 使用端口 8080 而不是 80？

> ID：10450045
> 
> 赞同：21
> 
> 时间：2012-05-04T13:40:49.410
> 
> 标签：java, linux, tomcat, port, firewall

我已经在端口 8080（默认）下启动并测试了 Tomcat。现在我将连接器端口更改为 80 并重新启动 Tomcat，在我的最小 Debian 6.0 安装上什么都不会显示。现在这里的诀窍在哪里？

```
<Connector port="80" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           URIEncoding="UTF-8"
           redirectPort="8443" /> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T14:26:47.313

转到 /etc/default/tomcat6 并更改`#AUTHBIND=no`为`AUTHBIND=yes`

```
 # If you run Tomcat on port numbers that are all higher than 1023, then you
 # do not need authbind.  It is used for binding Tomcat to lower port numbers.
 # NOTE: authbind works only with IPv4\.  Do not enable it when using IPv6.
 # (yes/no, default: no)
 #AUTHBIND=no 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T13:42:44.617

两个典型的原因：

*   您很可能没有权限收听低于 1024 的端口（通常需要管理权限，例如 being `root`）
*   其他东西可能已经在监听 80 端口（例如 apache）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-09T10:44:43.390

如果之前的评论都没有工作（就像发生在我身上一样），您可以将流量从端口引导`80`到`8080`.

去做吧：

[http://forum.slicehost.com/index.php?p=/discussion/2497/iptables-redirect-port-80-to-port-8080/p1](http://forum.slicehost.com/index.php?p=/discussion/2497/iptables-redirect-port-80-to-port-8080/p1)

简而言之，在终端中键入这三个命令：

```
$ sudo iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT
$ sudo iptables -A INPUT -i eth0 -p tcp --dport 8080 -j ACCEPT
$ sudo iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-04T13:42:15.530

您是否以 root 身份在端口 80 上启动了 Tomcat？您必须是 root 才能绑定到 Linux 中的端口 <= 1024。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-18T12:33:11.947

更改绑定后，以 root 身份运行启动脚本。

```
sudo ./<path to tomcat bin director>/startup.sh 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T13:42:29.803

停止 apache 服务，然后运行 ​​tomcat 应该没问题，默认情况下 apache 运行在 80 端口

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-27T06:36:59.217

您可以使用 authbind/privbind 或功能绑定到端口 80。

# image - 为什么随机化不起作用（MATLAB）？

> ID：10450049
> 
> 赞同：0
> 
> 时间：2012-05-04T13:41:07.537
> 
> 标签：image, matlab, random

好的，这就像我第五次不得不问这个问题，但仍然没有人能够给我答案或解决方案。但我们又来了……

我想运行一个非常简单的 MATLAB 小程序。它所做的只是随机显示目录中的图像。这是我的代码：

```
files = dir(fullfile(matlabroot,'toolbox','semjudge',bpic,'*.png')); 
nFiles = numel(files);
combos = nchoosek(1:nFiles, 2);
index = combos(randperm(size(combos, 1)), :); 
picture1 = files(index(nRep,1)).name;
picture2 = files(index(nRep,2)).name;
image1 = fullfile(matlabroot,'toolbox','semjudge',bpic,picture1);
image2 = fullfile(matlabroot,'toolbox','semjudge',bpic,picture2);
subplot(1,2,1); imshow(image1); 
subplot(1,2,2); imshow(image2); 
```

我已经尝试了几个不同的迭代，包括用“randsample”替换“nchoosek”。

但它不起作用！每次我运行程序时，脚本都会以相同的顺序运行相同的图像文件。为什么要这样做？就像我第一次运行它时它随机化了图像文件，但现在它只按该顺序运行它们，而不是每次运行脚本时都随机化它们。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:46:04.537

伪随机数生成器从特定的**种子**开始。提供的“随机”数字是确定性的。您需要更改种子才能更改这些数字。

这样做的好处是，即使您在算法中使用伪随机性，您也始终可以通过再次使用相同的种子来重播一次运行。

参考： http: [//www.mathworks.de/help/techdoc/ref/rng.html](http://www.mathworks.de/help/techdoc/ref/rng.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T14:03:21.047

作为@ypnos 答案的详细说明，您可能想要添加这样的一行：

```
rng('shuffle'); 
```

到代码的开头。这将为随机数生成器提供一个基于时间的值，然后你应该得到一个不同的随机数序列。

# django - 如何在 Django 中获取 410 http 状态码的错误页面？

> ID：10450051
> 
> 赞同：0
> 
> 时间：2012-05-04T13:41:17.930
> 
> 标签：django, http, redirect, http-error, http-status-code-410

我有一些不再有效的 URL 重定向，所以我需要它们返回 410。因为这些 URL 来自网站的旧版本（具有完全不同的系统），我只是将它们放在重定向应用程序中以便于编辑。然而，410“重定向”只返回状态码——通常显示的页面只是空的。

如何显示对用户有意义的内容（例如“页面不再存在”）？最好有某种类似于 404 错误模板的模板。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:48:51.447

只需将响应中的状态码更改为 410。

```
from django.shortcuts import render

def my_view(request):
    context = {}
    return render(request, '410.html', context, status=410) 
```

`render`快捷方式文档： [https ://docs.djangoproject.com/en/1.3/topics/http/shortcuts/#render](https://docs.djangoproject.com/en/1.3/topics/http/shortcuts/#render)

您还可以创建一个异常`Http410`和一个中间件来捕获此异常以呈现 410 页面。这就是 Django 中经常处理 404 页面的方式。

# javascript - javascript 函数参数的值如何在页面请求中存在？

> ID：10450055
> 
> 赞同：1
> 
> 时间：2012-05-04T13:41:32.367
> 
> 标签：javascript, asp.net, ajax, scope

我正在调查我继承的网站中的一个错误，我的调查提出了一个有趣的 javascript 范围问题。下面的代码已经过简化，只显示相关细节。

下面的通用服务有一个问题，它有时在注销后不返回任何数据（当然，仅在生产中）。发生这种情况时，我们会看到 ApplyToolbarBindings 的“数据”参数不是 null 或空对象——它实际上是由上一个页面请求的状态组成的。该对象的状态通过 asp.net 回发而存在，换句话说，最终效果是工具栏即使在他们注销后仍显示“已知”用户。

```
function ApplyToolbarBindings(data) {
    if (!data.IsKnown) {
        jQuery("#ToolBar").attr("data-bind", 'template: { name: "AnonymousUserToolbarTemplate" }');
    } else {
        jQuery("#ToolBar").attr("data-bind", 'template: { name: "KnownUserToolbarTemplate" }');
    }
    ko.applyBindings(data, document.getElementById('ToolBar'));
}
function GetToolBarData(callbackFunction) {
    jQuery.ajax({
        url: '/Services/Toolbar/ToolBarService.ashx?v=' + toolbarV,
        success: callbackFunction,
        dataType: 'json',
        type: 'GET'
    });
}
function loadToolbar() {
    GetToolBarUserData(ApplyToolbarBindings);
}
jQuery(function () { loadToolbar(); }); 
```

当函数已被全局定义时，该函数的参数的生命周期是什么？这种行为是因为没有数据返回时ajax对象状态没有改变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:49:23.123

这与 JavaScript 范围无关；没有页面加载范围之类的东西。

您会发现浏览器（或用户和服务器之间的某些设备）正在将 AJAX 请求缓存到`'/Services/Toolbar/ToolBarService.ashx?v=' + toolbarV`.

您可以通过使用[选项`cache: false` `jQuery.ajax`（](http://api.jquery.com/jQuery.ajax/)有效地将随机字符串添加到 URL 以阻止它被缓存）或发出正确的`Cache-Control`标头 ( `no-cache`) 来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:53:50.513

在大多数服务器上，您都有会话、应用程序和请求范围。这意味着，该 js 范围低于请求范围，因为它在设置请求并且您得到响应后存在很短的时间。

如果您想要一个作用域值，您可以使用模板系统和 bean。（速度，JSF 或其他）。如果不...

你可以使用cookies！

```
/**
 * deletes a cookie
 **/
function deleteCookie(c_name) {
    now = new Date();
    document.cookie=c_name+"=; expires="+now.toGMTString();
}

/**
 * sets a cookie
 **/
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

/**
 * Returns the cookie Value with unescaped content
 **/
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
} 
```

# wpf - 如何停用缩放图像初步平滑？

> ID：10450059
> 
> 赞同：0
> 
> 时间：2012-05-04T13:41:37.940
> 
> 标签：wpf

我已经`Grid`应用了一些比例变换；包含`Grid`一个图像：

```
<Grid Background="Black">
    <Grid.LayoutTransform>
        <ScaleTransform ScaleX="5.7" ScaleY="3.7"/>
    </Grid.LayoutTransform>
    <Image Source="rw.bmp" VerticalAlignment="Top"/>
</Grid> 
```

图像为 2 x 1 像素，一个像素红色和一个白色：

![原始图像](../Images/b7d834e38ed66e97b116e417a003ce10.png)

我希望得到这样的渲染图像（拉伸）：

![拉伸的预期图像](../Images/4f4b4183f6236ef232c9503d10a77e68.png)

但我实际上得到了这个（再次拉伸）：

![拉伸实际图像](../Images/9ae335c7bc5bc7496a34d2f28647add0.png)

您可以看到实际渲染的图像在拉伸之前以某种方式进行了平滑处理，而不是在拉伸之后进行了平滑处理。有没有办法像预期的例子一样获取图像？

* * *

编辑：尝试了不同的`RenderOptions.BitmapScalingMode`. 最接近我需要的是“NearestNeighbor”，它提供以下内容：

![不完全的](../Images/be97e1d7a049c5fc7b1904582e8044e8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:59:52.690

我不肯定，但你能以某种方式使用[`RenderOptions.BitmapScalingMode`](http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.bitmapscalingmode.aspx)这个吗？

# python - Python wxTree 将树保存到文件

> ID：10450062
> 
> 赞同：0
> 
> 时间：2012-05-04T13:42:08.153
> 
> 标签：python, tree, wxpython

我的问题是，当我的树中有一个节点时，它不会将树保存到文件中。

保存到文件的代码是：

```
def project_save(self):

    try:
        output = open(self.project_file, 'w+')
        output.write(self.tree.GetItemText(self.root) + '\n')
        count = self.tree.GetChildrenCount(self.root)
        iter = 0
        child = ''

        for i in range(count):
            if i == 0:
                child, cookie = self.tree.GetFirstChild(self.root)

            else:
                child, cookie = self.tree.GetNextChild(self.root, cookie)

            output.write(self.tree.GetItemText(child) + '\n')
        output.close()
        self.projectdirty = False

    except IOError:
        MsgDlg(self, 'There was an error saving the new project file.', 'Error!', wx.OK) 
```

当我的树看起来像：

```
root
 |
  ---item
 |
  ---item 
```

它工作得很好

但是当我的树看起来像：

```
root
|
  ---item
 |
  ---item
 |
  -node
    |
     ---item
    |
     ---item 
```

它给了我一个错误，我的文件最终为空白

> 文件“project_manager.py”
> 
> output.write(self.tree.GetItemText(child) + '\n')
> 
> GetItemText 中的文件“C:\Python27\lib\sit-packages\wx-2-8-msw-ansi\wx\contrls.py”，第 5303 行
> 
> 返回*控件*.TreeCtrl_GetItemText(*args, **kwargs)
> 
> wx._core.PyAssertionError: c++ assertion "item.IsOk()" failed at ....\src\msw\treectrl.cpp(963) in wxTreeCtrl::GetItemText(): 无效的树项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:54:51.633

几年前，PersistentControls 模块发布，它应该可以帮助您保存和恢复 wxPython 中的任何小部件。请参阅以下链接：

*   [原始公告](https://groups.google.com/forum/?fromgroups#!topic/wxpython-users/4yRpm-ogHzE)/说明
*   PersistenceManager[文档](http://xoomer.virgilio.it/infinity77/AGW_Docs/persist.persistencemanager.PersistenceManager.html)

# android - Mediaplayer 在 reset() 和 prepareAsync() 调用时抛出 Error(-38,0)

> ID：10450065
> 
> 赞同：2
> 
> 时间：2012-05-04T13:42:22.740
> 
> 标签：android, android-mediaplayer

我有这段代码：

```
 try
        {
            mMusicPlayer.reset();
            FileInputStream fis = new FileInputStream(pathToTitleFile);
            mMusicPlayer.setDataSource(fis.getFD());
            mMusicPlayer.prepareAsync();
        }
        catch (Exception e){} 
```

当我跳过一首歌时，有时我会得到两个错误/错误（-38,0）。我已经对其进行了调试，并且在以下代码部分引发了错误：reset()-call 之后的错误(-38,0)。prepareAsync() 调用后的 Error(-38,0)。在此之后，玩家调用 onPrepare()-callback 并跳回并再次执行 try-block。在播放歌曲之前重复几次。奇怪的是，我没有得到关于错误的任何其他信息，错误 (-38,0) 似乎是“通用错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:49:06.833

基于此处[MediaPlayer 重置](http://developer.android.com/reference/android/media/MediaPlayer.html#reset%28%29)

将 MediaPlayer 重置为未初始化状态。调用此方法后，您将不得不通过设置数据源并调用 prepare() 再次对其进行初始化。

您需要再次初始化 MediaPlayer。

# jquery - jQuery 附加到 .each

> ID：10450067
> 
> 赞同：2
> 
> 时间：2012-05-04T13:42:26.793
> 
> 标签：jquery, append, each

```
var positions = [ "00", "01", "02", "03", "04", "05" ];
jQuery.each( positions, function(players) {
var playerNotesContent = document.createElement('div');
playerNotesContent.setAttribute('id', 'player_stats_block'+this);
$("#player_stats_block" + this).append (columns); 
}) 
```

我想知道，为什么该`.append`命令不适用于`+this`，但在创建 div 时它可以工作。我究竟做错了什么？对不起我的英语不好，提前非常感谢！

**更新**！

```
var positions = [ "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18" ];

jQuery.each( positions, function(players, value) {

var player_id = $("#ctl" + value).attr("href").match(RegExp('players/([^/]+)/details.php$'))[1];
var playerlink = document.getElementById("ctl" + value);

GM_xmlhttpRequest({
method: 'GET',
url: 'http://www.test.com/players/item/' + player_id,
onload: function(responseDetails) 
{
            var page = jQuery(responseDetails.responseText);
            var columns = jQuery('div.columns',page);
            var playerNotesContent = document.createElement('div');
            playerNotesContent.setAttribute('id', 'player_stats_block'+value);
            playerlink.parentNode.insertBefore( playerNotesContent, playerlink.nextSibling  );
            $('#player_stats_block00').append (columns); 
}
});
}); 
```

像这样，所有值都附加在#player_stats_block00 中！我尝试了您的几个答案，但我无法将它们附加到正确的#player_stats_blockXX。再次抱歉我的英语不好，谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T13:45:05.323

您的代码正在创建一个 div 并设置它`id`，然后尝试通过该 ID*查找*它。`div`查找将失败，因为`div`尚未将 DOM 添加到任何地方。

```
var positions = [ "00", "01", "02", "03", "04", "05" ];

jQuery.each( positions, function(players) {
    // Here you're creating the div
    var playerNotesContent = document.createElement('div');

    // ...and setting its `id` (btw, you can just do playerNotesContent.id = value;)
    playerNotesContent.setAttribute('id', 'player_stats_block'+this);

    // ...and here trying to look it up
    $("#player_stats_block" + this).append (columns); 
}); 
```

如果您尝试将 div 附加到`columns`，您可能想要这个而不是最后一行：

```
columns.append(playerNotesContent); 
```

（请注意，[`append`](http://api.jquery.com/append)将内容添加到您调用它的容器中。）

假设`columns`是一个 jQuery 对象。除此以外：

```
$(playerNotesContent).appendTo(columns); 
```

或者

```
$(columns).append(playerNotesContent); 
```

（请注意，[`appendTo`](http://api.jquery.com/appendTo)将您调用它的内容添加到您给它的参数中；它是 的反面`append`。）

还值得注意的是，正在创建的 div 没有内容，因此除非您对它们进行样式设置，否则它们将没有任何尺寸，并且在页面上很难找到。:-)

这是一个假设`columns`是一个 jQuery 对象的示例，并为 div 提供一些内容以便您可以看到它们：[Live copy](http://jsbin.com/unucaj) | [来源](http://jsbin.com/unucaj/edit)

HTML：

```
<div id="columns"></div> 
```

JavaScript：

```
jQuery(function($) {

  var columns = $("#columns");
  var positions = [ "00", "01", "02", "03", "04", "05" ];

  jQuery.each( positions, function(players) {
    var playerNotesContent = document.createElement('div');
    playerNotesContent.innerHTML = "Player Stats";
    playerNotesContent.id = 'player_stats_block'+this;
    columns.append(playerNotesContent);
  });  

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:47:50.000

我会改变的东西很少。回调将值作为第二个参数提供，而不是第一个。您的呼叫`append`后跟一个空格 - 中断。我不确定您是要添加`columns`到 new`div`还是相反。

```
var positions = [ "00", "01", "02", "03", "04", "05" ];

$.each( positions, function( index, value ) {
  $( "<div>", { id : 'player_stats_block' + value } )
    .appendTo( "#columns" );
}); 
```

如果`columns`是对 dom 元素的合法引用，则可以将其放回`$.appendTo()`主行末尾的调用中。目前尚不清楚这个变量在您的原始帖子中代表什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:50:49.907

```
var positions = [ "00", "01", "02", "03", "04", "05" ];

jQuery.each( positions, function(index, value) {
   $('<div id="player_stats_block'+ value +'"></div>').append(columns);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T13:44:51.050

将其替换为 $(this) -->

```
var positions = [ "00", "01", "02", "03", "04", "05" ];
jQuery.each( positions, function(players) {
var playerNotesContent = document.createElement('div');
playerNotesContent.setAttribute('id', 'player_stats_block'+$(this));
$("#player_stats_block" + $(this)).append (columns); 
}) 
```

# .net - 无法设置断点以在 Visual Studio 中调试加载项项目

> ID：10450078
> 
> 赞同：1
> 
> 时间：2012-05-04T13:43:09.670
> 
> 标签：.net, visual-studio, add-in

我已按照此[页面](http://msdn.microsoft.com/en-us/library/f7fb383x%28v=vs.80%29.aspx)上有关如何调试加载项项目的说明进行操作，但未能成功。选择 F5 开始调试后，另一个 Visual Studio 会打开，但无论我把它放在哪里，它都不会在我的断点处中断。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:30:17.777

上周，当我将加载项从 Visual Studio 2008 移动到 2010 时，我自己也遇到了同样的问题。有一个已知问题是，如果您的加载项是针对 .Net 框架版本构建的，您将不会遇到断点4.0之前。对我来说，更改为 4.0 解决了这个问题。

[https://connect.microsoft.com/VisualStudio/feedback/details/650694/vs-2010-sp1-breaks-add-in-debugging-targetting-net-framework-2-0-rather-than-net-framework- 4-0#详情](https://connect.microsoft.com/VisualStudio/feedback/details/650694/vs-2010-sp1-breaks-add-in-debugging-targetting-net-framework-2-0-rather-than-net-framework-4-0#details)

要尝试的另一件事是`devenv`使用参数从命令行运行，`/log vslog.xml`然后退出。检查文件`<ApplicationData>\Roaming\Microsoft\VisualStudio\<version>\vslog.xml`。这可能会告诉您加载加载项时存在其他问题，这意味着 dll 未加载。

# linux - 在暂停和恢复工作后，用 R 编写的字符变得不可见

> ID：10450080
> 
> 赞同：1
> 
> 时间：2012-05-04T13:43:18.747
> 
> 标签：linux, r, jobs

将 R 与 Linux 控制台一起使用时，我遇到了一个反复出现的问题。我有时用 暂停它`[Ctrl+Z]`，然后用 , 将其置于后台`bg`（执行一些其他命令），然后用 再次将其置于前台`fg`。

R 在所有工作区完好无损的情况下正确恢复，但是当我输入时，字符是不可见的（就像我们输入密码时一样）。

我仍然可以执行命令，并且我看到了响应。此外，当我输入 时`[enter]`，提示不会转到下一行，而是执行如下操作：`> > >`.

然后我需要使用 退出 R `q()`，以便一切恢复正常。我没有设法在互联网上找到有关此问题的任何参考。

你有什么想法吗？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:55:23.697

没有直接的答案，但通过

> “医生，医生，我这样做的时候很痛。”
> 
> “那就别这样了。”

我建议如果你必须打开一个 R 控制台，把它放在里面`screen`--- 或者如果你有它，[byobu](https://launchpad.net/byobu)一个更高级的扩展，甚至是[tmux](http://tmux.sourceforge.net/)。

甚至在使用[ESS](http://ess.r-project.org)的 One True Editor (TM) 中。对于它的价值，我总是在终端上或通过 X11 下运行`emacs --daemon`并连接到*同一个 R 会话*（我都将其别名为和）。我还为命令行工作运行会话，我经常将[littler](http://dirk.eddelbuettel.com/code/littler.html)用于命令行任务和测试。`emacsclient -nw``emacsclient -c``emt``emx``byobu`

Unix是一个多任务系统。没有必要将自己限制在一个提示上，特别是如果您因此遭受副作用。

# c# - 操作上有点区别

> ID：10450090
> 
> 赞同：0
> 
> 时间：2012-05-04T13:43:53.723
> 
> 标签：c#, nullable

```
class Program {

        static bool? a = null;
        static bool b = false;

        static void Main( string[] args ) {
            //1
            if( a!=null ) {
                b = (bool) a;
            }
            //2
            if( a!=null && (b=(bool) a) ) { }
        }
    } 
```

案例#1 和案例#2 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:45:39.610

就将获得的价值而言`b`，它们在功能上是相同的。

但是，由于您使用的是可空值，因此您应该使用它们的功能：

```
if(a.HasValue)
   b = a.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:47:37.267

或者你可以写：

```
b = (a.HasValue) ? a.Value : b; 
```

虽然我不得不说@Oded 的答案是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:45:50.620

是的，如果 a isnt null 则案例 1 触发，案例 2 仅在 a isnt null AND 如果 b = bool a 时触发

# html - Consolas 小于 Verdana

> ID：10450091
> 
> 赞同：3
> 
> 时间：2012-05-04T13:43:55.217
> 
> 标签：html, css, fonts

我正在编写一个网页，我想将一种字体用于普通文本，另一种用于代码，所以我有以下 CSS：

```
body {
    font-family:Verdana, sans-serif;
    font-size:100%;
}

code, pre {
    font-family:Consolas, monospace;
} 
```

除了 Consolas 文本比 Verdana 文本小得多之外，这是可行的。`font-size:1.2em;`我可以通过添加设置来修复它`code, pre`，但这感觉像是一种黑客行为，特别是因为这个数字不是来自试验和错误以外的任何东西。

这是所涉及的特定字体的怪癖，还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:56:59.607

唉，这是因为 Consolas 的 x 高度比 Verdana 小。您确实可以通过使用更大的字体大小来“修复它”，但如果用户没有 Consolas，页面将退回到默认的等宽字体，这会显得太大。

正确的解决方案在于 CSS3 的[`font-size-adjust`](http://webdesignernotebook.com/css/the-little-known-font-size-adjust-css3-property/). 唉，它根本没有得到很好的支持。据我所知，支持它的主流浏览器只有火狐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:12:40.253

当您在 CSS 中定义字体大小时，您所做的是定义一个称为“em square”或“em box”的概念，即使您没有使用 em 单位。

em square 之所以得名，是因为在金属印刷时代，每个字母都放在自己的金属“盒子”中，而在传统字体中，大写的拉丁 M 通常填满整个盒子的宽度，定义了整个家庭的大小. 因此，em 框。虽然最初的 em 框是由 M 的宽度定义的，但 em 单位本身是指一个字符的最大允许*高度*。这只是为大写 M 创建的框的结果。

简而言之，字体系列中的所有字母都需要放入 em 框内，但它们不必占据整个空间。因此，当您设置具有给定宽度的 em 框时，您所做的就是定义要放置的字母的最大允许空间。从那里，字体设计师在字距、几何、比率等方面的选择将决定如何他们的字体将占据那个盒子的大部分。这就是为什么您必须使用两种不同的字体大小来使字体看起来相同的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:59:12.837

字体大小是一样的。但在 Verdana 中，字符通常比大多数字体高（在相同大小的情况下）。例如，Verdana 中的“H”比 Consolas 中的“H”高。这是一个字体设计问题。

解决方案是使用匹配的字体。如果您真的想使用 Verdana 来复制文本，Lucida Console 可能是等宽字体的最佳选择。如果您想将 Consolas 用作等宽字体（很好！），然后使用另一种“C 字体”来复制文本，例如 Cambria（衬线字体）或 Calibri 或 Candara（无衬线字体）。

尽管这里的字体大小是相同的（在我测试过的浏览器上），但最好确保它，因为浏览器经常应用类似`font-size: 90%`on`code`和`pre`其他一些元素。发生这种情况的条件有些模糊，并且明确地将字体系列设置为通用以外的其他内容`monospace`似乎可以防止在现代浏览器上出现这种情况。但这仍然是一个有用的预防措施

```
pre, code, samp, kbd, tt { font-size: 100%; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:51:57.623

![字体](../Images/1d70022dad4f71d558e2747c0453e773.png)

第一行是 Verdana，第二行是 Consolas。两个12pt。Consolas 稍短一些，但相差不到 20%。检查 pre 的父元素，因为 em 字体大小是累积的 - 例如，如果 body 是 0.9em 而 pre 是 0.9em，结果将是 12pt * 0.9 * 0.9 = 9.72pt

如果你试图只匹配高度而忽略宽度，那么 1.16em 看起来是正确的，这确实是字体的怪癖，你没有做错任何事情。

**编辑**

看起来你没有做错 =) 左边来自提琴手，右边来自写字板

![在此处输入图像描述](../Images/165ffa84ee08c11df2fba6e9e6d4f08c.png)

# lisp - 在鸡计划中创建数据库

> ID：10450093
> 
> 赞同：4
> 
> 时间：2012-05-04T13:43:58.327
> 
> 标签：lisp, scheme, chicken-scheme

我想问是否可以在鸡计划中创建一个数据库；与此类似的东西：

[http://www.gigamonkeys.com/book/practical-a-simple-database.html](http://www.gigamonkeys.com/book/practical-a-simple-database.html)

如果是，那么我必须阅读/搜索哪些谓词？我应该用鸡蛋吗？在鸡肉维基中，我进行了搜索，但没有找到我搜索的内容。是不可能在方案中实现上述类似的东西，还是以完全不同的方式完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:00:57.543

这是可能的，但您需要使用其他数据类型。

与 Common Lisp（该书重点介绍的）不同，Scheme 没有`plist`s，因为它们缺少`:keyword`包。您需要决定如何存储您的数据，而该决定将影响您必须如何构建您的数据`make-`和`select`等价物。例如，如果您认为`alist`s 是一个足够好的替代品，那么从您的一条记录中获取一个属性将看起来像

```
(cdr (assoc foo record)) 
```

而不是

```
(getf :foo record) 
```

# .net - 如何将 SolrNet 查询结果映射到类？

> ID：10450094
> 
> 赞同：0
> 
> 时间：2012-05-04T13:44:00.640
> 
> 标签：.net, solrnet

我正在尝试使用 SolrNet 客户端查询 Solr。我可以索引文档并使用 Solr 网络管理员搜索它们而不会出错。当我尝试使用同一个类进行查询时，我对文档进行了索引，每个字段都出现如下错误。

错误：

无法将值“System.Collections.ArrayList”转换为文档类型 Search.WebService.Handler.Document 的属性“Title”

为什么 Solr 试图将一个数组列表映射到每个字段？这是我的设置的详细信息，架构基于示例架构。

我的架构：

```
<field name="ReferenceId" type="identifier" indexed="true" stored="true" required="true"/>
<field name="Title" type="text_general" indexed="true" stored="true"/>
<field name="Revision" type="identifier" indexed="true" stored="true"/>
<field name="Author" type="text_general" indexed="true" stored="true"/>
<field name="Filename" type="text_general" indexed="true" stored="true"/> 
```

我的文档类：

```
class Document
{
    [SolrField("ReferenceId")]
    public string ReferenceId { get; set; }

    [SolrField("Title")]
    public string Title { get; set; }

    [SolrField("Revision")]
    public string Revision { get; set; }

    [SolrField("Author")]
    public string Author { get; set; }

    [SolrField("Filename")]
    public string Filename { get; set; }
} 
```

一个示例查询：

```
string queryString = String.Format("Title :\"{0}\"", titleSearchTerm);
SolrQuery query = new SolrQuery(queryString);
SolrQueryResults<Document> results = index.Query(query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:53:46.583

为每个字段添加了属性 multiValued="false"。

[有关多值字段](http://wiki.apache.org/solr/SchemaXml)的更多详细信息，请参阅文档。

# c# - C# Linq Char 数组 except() - 奇怪的行为

> ID：10450098
> 
> 赞同：7
> 
> 时间：2012-05-04T13:44:09.500
> 
> 标签：c#, linq

我不明白为什么这个测试会失败并显示消息**“Assert.AreEqual failed. Expected:<2>.Actual:<1>。”**

```
 [TestMethod]
        public void Test()
        {
            char[] a1 = "abc".ToCharArray();
            char[] a2 = {'a', 'b', 'c', ' ', ' '};

            Assert.AreEqual(2, a2.Except(a1).Count());
        } 
```

但以下将通过：

```
 [TestMethod]
        public void Test()
        {
            char[] a1 = "abc".ToCharArray();
            char[] a2 = {'a', 'b', 'c', ' ', 'd', ' '};

            Assert.AreEqual(2, a2.Except(a1).Count());
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:48:56.207

除了给你一个**SET**，这意味着它不会返回重复项。

请参阅[除文档](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T13:48:55.347

该`Except`函数返回两个序列的**集合差异**——而不是**差异**。

空格字符只返回一次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T13:47:33.340

因为 except 发现两个序列的差异

[http://msdn.microsoft.com/ru-ru/library/system.linq.enumerable.except.aspx](http://msdn.microsoft.com/ru-ru/library/system.linq.enumerable.except.aspx)

也许你需要这样的东西

```
var c=a2.Where(a=>a1.Contains(a)==false).Count(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T13:48:16.457

除了给你一个不同的列表。

```
char[] a1 = "abc".ToCharArray();
char[] a2 = {'a', 'b', 'c', ' ', '1'};

Assert.AreEqual(2, a2.Except(a1).Count()); // Passes 
```

# spring - Spring MVC + Apache 2 tile + Spring 安全配置异常

> ID：10450103
> 
> 赞同：1
> 
> 时间：2012-05-04T13:44:17.483
> 
> 标签：spring, apache, spring-mvc, spring-security, tiles

我的应用程序使用 Spring MVC + Apache 2 tile + Spring security，但出现异常

```
SEVERE: Servlet /spring-tiles threw load() exception                                     
java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-servlet.xml]
at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我的 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/applicationContext.xml,/WEB-INF/spring-security.xml
        </param-value>
</context-param>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Spring Character Encoding -->
<filter>
    <filter-name>encoding-filter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>encoding-filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

spring-security.xml 是

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- non security for login page -->
<http pattern="/jsp/login.jsp" security="none"/>
<http auto-config="true">
    <intercept-url pattern="/*" access="ROLE_USER" />
    <form-login login-page='/login.htm' default-target-url='/home.htm'
        always-use-default-target='true' />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="me" password="1234" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:50:18.140

Spring 期望来自 DispatcherServlet 的 spring-servlet.xml。来自 Spring 文档

> 在初始化 DispatcherServlet 时，Spring MVC 在您的 Web 应用程序的 WEB-INF 目录中查找名为 [servlet-name]-servlet.xml 的文件并创建在那里定义的 bean，覆盖任何同名定义的 bean 的定义在全球范围内。

在 servlet 中定义不同的应用程序上下文（我通常将默认的 applicationContext.xml 移动到 servlet 中）或创建该文件。

# syslog - 如何登录傀儡代理和主控

> ID：10450118
> 
> 赞同：8
> 
> 时间：2012-05-04T13:45:06.830
> 
> 标签：syslog, puppet

Puppet 默认将日志写入 syslog。这是为什么？大多数软件写入一些单独的日志文件。我检查了文档，其中提到您可以写入日志文件，但提到“这通常不使用”。这是个坏主意吗？

遵循 puppet 日志记录的典型设置是什么？在 /var/log/messages 文件上使用 grep？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-09T06:00:48.653

既然你提到了`syslog`，我假设你在谈论类似 Debian 的 Linux。

实际上没有必要编写自己的日志工具。定制`/etc/default/puppet`就够了。

```
# Startup options
DAEMON_OPTS="--logdest /var/log/puppet/puppet.log" 
```

`/etc/default/puppet`来源是`/etc/init.d/puppet`，因此您在此处添加的选项将在`puppet`服务启动时执行。

关于`--logdest`选项的文档：[https ://docs.puppetlabs.com/references/3.3.1/man/apply.html#OPTIONS](https://docs.puppetlabs.com/references/3.3.1/man/apply.html#OPTIONS)

顺便说一句，为 Debian（或 Ubuntu）提供的 deb 包 puppet 甚至包括一个 logrotate 配置文件`/var/log/puppet`，我不知道为什么这个选项不是默认的。

```
/var/log/puppet/*log {
  missingok
  sharedscripts
  create 0644 puppet puppet
  compress
  rotate 4

  postrotate
    pkill -USR2 -u puppet -f 'puppet master' || true
    [ -e /etc/init.d/puppet ] && /etc/init.d/puppet reload > /dev/null 2>&1 || true
  endscript
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T10:07:56.237

为此，我们正在使用 puppet-dashboard。它将为您提供有关环境的一个很好的概述，什么是失败的，什么是有效的。以及哪些服务器已停止签入。

它易于设置，请查看[http://puppetlabs.com/puppet/related-projects/dashboard/](http://puppetlabs.com/puppet/related-projects/dashboard/)

如果要记录到不同的文件，可以使用 puppet ( [http://docs.puppetlabs.com/references/stable/configuration.html#syslogfacility](http://docs.puppetlabs.com/references/stable/configuration.html#syslogfacility) ) 中的 syslogfacility 配置选项，并将 syslog 配置为将其记录到不同的文件文件。

# linux - 优化 PDF 文件（使用 Ghostscript 或其他）

> ID：10450120
> 
> 赞同：56
> 
> 时间：2012-05-04T13:45:08.367
> 
> 标签：linux, pdf, debian, ghostscript

如果您想优化 PDF 文件并减小文件大小，Ghostscript 是最佳选择吗？

我需要存储大量的 PDF 文件，因此我需要尽可能优化和减小文件大小

有人对 Ghostscript 和/或其他有任何经验吗？

# 命令行

```
exec('gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4
-dPDFSETTINGS=/screen -sOutputFile='.$file_new.' '.$file); 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-04T17:07:04.640

如果您正在寻找免费（如“libre”）软件，Ghostscript 无疑是您的最佳选择。然而，它并不总是很容易使用——它的一些（非常强大的）处理选项不容易找到文档。

看看这个答案，它解释了如何比泛型执行更详细的图像分辨率下采样控制`-dPDFSETTINGS=/screen`（它定义了一些您可能想要覆盖的整体默认值）：

*   [**如何对pdf文件中的图像进行下采样？**](https://stackoverflow.com/a/9571488/359307)

基本上，它告诉你如何让 Ghostscript 将所有图像下采样到 72dpi 的分辨率（这个值是`-dPDFSETTINGS=/screen`使用的——你可能想要更低）：

```
-dDownsampleColorImages=true \
-dDownsampleGrayImages=true \
-dDownsampleMonoImages=true \
-dColorImageResolution=72 \
-dGrayImageResolution=72 \
-dMonoImageResolution=72 \ 
```

如果您想尝试 Ghostscript 是否也能够“取消嵌入”所使用的字体（有时有效，有时无效 - 取决于嵌入字体的复杂性以及所[**使用的字体类型**](https://stackoverflow.com/a/3489369/359307)），您可以尝试将以下内容添加到您的 gs 命令中：

```
gs \
  -o output.pdf \
   [...other options...] \
  -dEmbedAllFonts=false \
  -dSubsetFonts=true \
  -dConvertCMYKImagesToRGB=true \
  -dCompressFonts=true \
  -c ".setpdfwrite <</AlwaysEmbed [ ]>> setdistillerparams" \
  -c ".setpdfwrite <</NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats /Arial]>> setdistillerparams" \
  -f input.pdf 
```

**注意：**请注意，图像分辨率下采样肯定会降低质量（不可逆），并且反嵌入字体将使显示和打印 PDF 变得困难或不可能，除非机器上安装了相同的字体....

* * *

## 更新

我在原始答案中忽略的一个选项是添加

```
-dDetectDuplicateImages=true 
```

到命令行。此参数会导致 Ghostscript 尝试检测多次嵌入 PDF 中的任何图像。如果您将图像用作徽标或页面背景，并且 PDF 生成软件未针对这种情况进行优化，则可能会发生这种情况。这曾经是旧版本的 OpenOffice/LibreOffice 的情况（我测试了 LibreOffice 的最新版本 v4.3.5.2，它不再做这种愚蠢的事情）。

如果您在`pdftk`. 为了向您展示效果以及如何发现它，让我们看一个示例 PDF 文件：

```
pdfinfo p1.pdf

 Producer:       libtiff / tiff2pdf - 20120922
 CreationDate:   Tue Jan  6 19:36:34 2015
 ModDate:        Tue Jan  6 19:36:34 2015
 Tagged:         no
 UserProperties: no
 Suspects:       no
 Form:           none
 JavaScript:     no
 Pages:          1
 Encrypted:      no
 Page size:      595 x 842 pts (A4)
 Page rot:       0
 File size:      20983 bytes
 Optimized:      no
 PDF version:    1.1 
```

Poppler`pdfimages`实用程序的最新版本添加了对`-list`参数的支持，该参数可以列出 PDF 文件中包含的所有图像：

```
pdfimages -list p1.pdf

 page num  type width height color comp bpc  enc interp objectID x-ppi y-ppi size ratio
 --------------------------------------------------------------------------------------
    1   0 image    423   600   rgb    3   8 jpeg     no     7  0    52    52 19.2K 2.6% 
```

此示例 PDF 是一个 1 页的文档，其中包含一个使用 JPEG 压缩进行压缩的图像，其宽度为 423 像素，高度为 600 像素，并且在页面上以 52 PPI 的分辨率呈现。

如果我们在这样的帮助下连接该文件的 3 个副本`pdftk`：

```
pdftk p1.pdf p1.pdf p1.pdf cat output p3.pdf 
```

然后结果通过以下方式显示这些图像属性`pdfimages -list`：

```
pdfimages -list p3.pdf

 page num  type width height color comp bpc  enc interp objectID x-ppi y-ppi size ratio
 --------------------------------------------------------------------------------------
    1   0 image   423    600   rgb    3   8 jpeg     no     4  0    52    52 19.2K 2.6%
    2   1 image   423    600   rgb    3   8 jpeg     no     8  0    52    52 19.2K 2.6%
    3   2 image   423    600   rgb    3   8 jpeg     no    12  0    52    52 19.2K 2.6% 
```

这表明`p3.pdf`现在嵌入了 3 个相同的 PDF 对象（ID 为 4、8 和 12）。`p3.pdf`由 3 页组成：

```
pdfinfo p3.pdf | grep Pages:

 Pages:          3 
```

### 通过用参考替换重复的图像来优化 PDF

现在我们可以借助 Ghostscript 应用上述优化

```
 gs -o p3-optim.pdf -sDEVICE=pdfwrite -dDetectDuplicateImages=true p3.pdf 
```

检查：

```
 pdfimages -list p3-optim.pdf

 page num  type width height color comp bpc  enc interp objectID x-ppi y-ppi size ratio
 --------------------------------------------------------------------------------------
    1   0 image   423    600   rgb    3   8 jpeg     no    10  0    52    52 19.2K 2.6%
    2   1 image   423    600   rgb    3   8 jpeg     no    10  0    52    52 19.2K 2.6%
    3   2 image   423    600   rgb    3   8 jpeg     no    10  0    52    52 19.2K 2.6% 
```

每页仍然列出一个图像 - 但 PDF 对象 ID 现在始终相同：10。

```
 ls -ltrh p1.pdf p3.pdf p3-optim.pdf

   -rw-r--r--@ 1 kp  staff    20K Jan  6 19:36 p1.pdf
   -rw-r--r--  1 kp  staff    60K Jan  6 19:37 p3.pdf
   -rw-r--r--  1 kp  staff    16K Jan  6 19:40 p3-optim.pdf 
```

如您所见，使用 pdftk 进行的“哑”连接将原始文件大小增加到原始文件的三倍。Ghostscript 的优化使其大幅下降。

最新版本的 Ghostscript 甚至可以`-dDetectDuplicateImages`默认应用。*（AFAIR，v9.02，第一次引入，默认没有使用。）*

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-17T16:58:27.780

您可以通过将 PDF 转换为 Postscript，然后使用

```
pdf2ps file.pdf file.ps
ps2pdf -dPDFSETTINGS=/ebook file.ps file-optimized.pdf 
```

参数的值`-dPDFSETTINGS`定义了生成的 PDF 中图像的质量。选项是，从低质量到高质量：`/screen`, `/default`, `/ebook`, `/printer`, `/prepress`, 请参阅[http://milan.kupcevic.net/ghostscript-ps-pdf/](http://milan.kupcevic.net/ghostscript-ps-pdf/)以获取参考。

Postscript 文件可能会变得非常大，但结果是值得的。我从 60 MB PDF 变成了 140 MB Postscript 文件，但最终得到了 1.1 MB 优化的 PDF。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-09T09:48:08.253

我将 Ghostscript 与从[此处](http://blog.rot13.org/2011/05/optimize-pdf-file-size-using-ghostscript.html)获取的以下选项一起使用。

```
gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/screen \
 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=output.pdf input.pdf 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-30T20:31:09.530

您可能会发现`pdftocairo`（来自[Poppler](http://poppler.freedesktop.org/)）可以制作更小的 PDF，但要注意它会剥离一些功能（例如超链接）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-30T17:25:53.957

你会失去质量，但如果这不是问题，那么 ImageMagick`convert`可能会很有帮助：

```
convert original.pdf reduced.pdf 
```

请注意，它并不总是有效：我曾经使用此命令将 126 MB 文件转换为 14 MB 文件，但另一次它将 350 Ko 文件的大小增加了一倍。

不管怎样，值得一试……</p>

正如评论中提到的，在基于矢量的 PDF 上应用这个命令当然没有意义，它只对光栅化图像有用。

另请参阅[此帖子](https://askubuntu.com/a/469255/136964)以获取相关选项。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-23T12:02:39.523

这对我有用

将您的 PDF 转换为 PS（这会创建一个大文件

```
pdf2ps large.pdf very_large.ps 
```

将新 PS 转换回 PDF

```
ps2pdf very_large.ps small.pdf 
```

资料来源： [https ://pandemoniumillusion.wordpress.com/2008/05/07/compress-a-pdf-with-pdftk/](https://pandemoniumillusion.wordpress.com/2008/05/07/compress-a-pdf-with-pdftk/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-29T03:47:29.410

Ghostscript 附带`ps2pdf14`可用于优化 PDF 文件的实用程序，但在某些情况下，“优化”文件的大小可能比原始文件大。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-10T13:46:21.643

对于大小主要取决于嵌入图像（`pdfimages -list`是你的朋友）的 PDF，通常是扫描文档，我建议使用非常擅长[优化的](https://ocrmypdf.readthedocs.io/en/latest/optimizer.html)[ocrmypdf](https://github.com/ocrmypdf/OCRmyPDF) ，并带有可选的 OCR 层作为奖励。

# c# - 将 C++ 程序转换为 C#

> ID：10450129
> 
> 赞同：5
> 
> 时间：2012-05-04T13:45:37.243
> 
> 标签：c#, c++

我正在开发一个手动将 C++ 代码转换为 C# 的项目。我有 C# 的工作知识，但我以前从未使用过 C++。

我需要知道的是如何处理头文件，因为 C# 没有这样的东西。假设我有 buffer.h 和 buffer.cpp，我是否将它们都转换并将它们包含在同一个 buffer.cs 文件中？

C++ 头文件是否与 Ada 规范文件有任何关联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:53:10.967

包含“.h 文件”和源“.cpp 文件”之间的区别只是约定之一。约定是声明（函数、类等）在 .h 文件中，这些文件`#include`在实现（定义）或 .cpp 文件中。在大多数情况下，您可以将 Xh 和 X.cpp 折叠到单个 X.cs 文件中。

也就是说，您仍然需要查看每个文件中发生的情况。在这里，对 C++ 的基本了解会有很长的路要走，我强烈建议您在深入翻译之前获得一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:03:52.440

它可能有助于您将 C++ 头文件视为包含两种主要类型的东西：类定义，它定义其成员数据和“接口”（不要与 C# 接口类型混淆）和“其他东西”。类定义部分包含方法原型和类成员变量。

关于原型的好消息是您在 C# 中根本不需要它们。您的类的客户端通过命名空间的程序集从实现本身接收原型信息。数据成员包含在您的 C# 类实现中，通常作为通过 C# 属性公开的私有成员。

上面提到的“其他东西”可以包括#defines，您通常希望将其转换为 C# 中的 const 定义。诸如枚举之类的其他内容在 C# 中具有等价物，您当然可以将其移入类的 .cs 文件中。

# android - action_send 链接的 mime 类型

> ID：10450132
> 
> 赞同：2
> 
> 时间：2012-05-04T13:45:45.997
> 
> 标签：android, mime-types

当有人长按链接并选择共享链接并选择我的应用程序时，它会抓取它并执行它的功能..但这也适用于其他可共享的文本项。我只想接受链接。目前我的 mime 类型为 text/plain。是否有链接的 MIME 类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:14:49.800

不，对不起。至少对于标准的 Android 浏览器，它使用`text/plain`. 欢迎您检查发送给您的值，通过正则表达式查看它是否像 URL，并弹出错误指示您只发送链接。

理论上，您甚至可以转身执行`startActivity()`相同`Intent`的操作，以允许用户选择其他内容来尝试共享。不过，我还没有尝试过，所以这里可能会有一些我不知道的小问题。

# linq - Linq - 如何从存储在三个不同列中的时间值创建 DateTime？

> ID：10450136
> 
> 赞同：-3
> 
> 时间：2012-05-04T13:46:03.617
> 
> 标签：linq, linq-to-sql

如何使用 linq to sql 从存储在三个不同列中的时间值创建 DateTime？所有字段都是类型`smallint`，以下是数据库中字段的示例：

```
hour(column1) minute (column2) second (column3) 
17                34                 45 
```

这是我尝试过的，但我没有运气。

```
Saat = Convert.ToDateTime(c.HOUR_ + '/' + c.MINUTE_ + '/' + c.SECOND_) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:50:09.510

问题是您试图创建一个`DateTime`只有一个时间部分的。

`Hour/minute/second`不会给你一个有效的日期。你有两个选择。您可以使用[TimeSpan ，也可以使用](http://msdn.microsoft.com/en-us/library/bk8a3558.aspx)[DateTime 构造函数](http://msdn.microsoft.com/en-us/library/272ba130.aspx)的重载，该构造函数需要年、月、日、小时、分钟、秒。

# c# - 排序子序列的最有效排序算法

> ID：10450138
> 
> 赞同：1
> 
> 时间：2012-05-04T13:46:08.740
> 
> 标签：c#, algorithm, sorting, quicksort, mergesort

我有几个 long 类型（升序）数字的排序序列，并希望生成一个包含相同顺序的所有元素的主序列。我寻找最有效的排序算法来解决这个问题。我以 C#、.Net 4.0 为目标，因此也欢迎针对并行性的想法。

这是一个示例：
s1 = 1,2,3,5,7,13
s2 = 2,3,6
s3 = 4,5,6,7,8
结果序列 = 1,2,2,3,3,4 ,5,5,6,6,7,7,8,13

编辑：当有两个（或更多）相同的值时，这两个（或更多）的顺序无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:48:02.587

只需合并序列。您不必再次对它们进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T14:05:15.400

我知道没有 .NET Framework 方法可以进行 K 路合并。通常，它是通过优先级队列（通常是堆）完成的。做起来不难，效率也很高。给定 K 个排序列表，共包含 N 个项目，复杂度为 O(N log K)。

我在我的文章[A Generic Binary Heap Class](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)中展示了一个简单的二进制堆类。在[对大文本文件进行排序](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=674)中，我介绍了创建多个排序的子文件并使用堆进行 K 路合并。给定一个小时（也许更少）的学习时间，您可能可以调整它以在您的程序中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T13:54:41.817

您只需要像合并排序一样合并您的序列。

这是可并行的：

1.  合并序列（1/2 中的 1 和 2），（3/4 中的 3 和 4），...</li>
2.  合并序列（1/2/3/4 中的 1/2 和 3/4），（5/6/7/8 中的 5/6 和 7/8），...</li>
3.  …</li>

这是合并功能：

```
int j = 0;
int k = 0;
for(int i = 0; i < size_merged_seq; i++)
{
  if (j < size_seq1 && seq1[j] < seq2[k])
  {
    merged_seq[i] = seq1[j];
    j++;
  }
  else
  {
    merged_seq[i] = seq2[k];
    k++;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T14:05:58.123

简单的方法是将它们一一合并。但是，这将需要`O(n*k^2)`时间，其中`k`是序列数，是序列`n`中的平均项目数。但是，使用分而治之的方法，您可以将此时间降低到 O(n*k*log k)。算法如下：

1.  将 k 序列划分为 k/2 组，每组 2 个元素（如果 k 为奇数，则为 1 组，每组 1 个元素）。
2.  合并每组中的序列。因此，您将获得 k/2 个新组。
3.  重复直到你得到一个序列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T14:42:06.230

更新：

事实证明，使用所有算法......简单的方法仍然更快：

```
private static List<T> MergeSorted<T>(IEnumerable<IEnumerable<T>> sortedBunches)
{
    var list = sortedBunches.SelectMany(bunch => bunch).ToList();

    list.Sort();

    return list;
} 
```

并且出于遗留目的...

这是按优先级排序的最终版本：

```
 private static IEnumerable<T> MergeSorted<T>(IEnumerable<IEnumerable<T>> sortedInts) where T : IComparable<T>
    {
        var enumerators = new List<IEnumerator<T>>(sortedInts.Select(ints => ints.GetEnumerator()).Where(e => e.MoveNext()));

        enumerators.Sort((e1, e2) => e1.Current.CompareTo(e2.Current));

        while (enumerators.Count > 1)
        {
            yield return enumerators[0].Current;

            if (enumerators[0].MoveNext())
            {
                if (enumerators[0].Current.CompareTo(enumerators[1].Current) == 1)
                {
                    var tmp = enumerators[0];
                    enumerators[0] = enumerators[1];
                    enumerators[1] = tmp;
                }
            }
            else
            {
                enumerators.RemoveAt(0);
            }
        }

        do
        {
            yield return enumerators[0].Current;
        } while (enumerators[0].MoveNext());
    } 
```

# ios - 部署 iOS 应用程序的临时测试版本时遇到问题

> ID：10450141
> 
> 赞同：1
> 
> 时间：2012-05-04T13:46:21.447
> 
> 标签：ios, iphone, xcode

我是 iOS 开发的新手，在部署一些东西供我的客户测试时遇到了一些问题。我正在使用 XCode v4.3.2。我得到了一个 xcode 项目，并被要求进行一些小的编码更改，主要是为了让我的脚湿透。我进行了更改，编译了应用程序，在模拟器中运行它，它运行良好。我将我的 iPhone 连接到 macbook 并按照苹果的说明将我的手机设置为开发手机，从手机上运行它，没有问题。

现在我需要帮助的部分。该公司拥有苹果公司的开发许可证。他们通过 Apple 向我发送了邀请，我接受了邀请，这为我生成了 Apple 开发许可证。我接手的项目有一堆与之关联的代码签名密钥，它们都已过期，所以我将密钥切换到为我生成的那个。我将项目存档，然后将其保存为 adhoc/enterprise，这会生成一个 .ipa 文件。他们试图将 ipa 加载到 iPod Touch 上（该项目以前曾使用过该设备），但它产生了一个错误，指出它没有权利。

我检查了 Stackoverflow 并找到了一篇说明如何添加权利的文章，所以我关注了它们，现在在代码签名权利（在构建设置中）它说：[ProjectName].entitlements（其中 [ProjectName] 是实际的项目名称:) )。我重新归档并发送给她，她尝试加载新的 .ipa。现在在同步时，她得到“未安装在 ipod 上，因为发生了未知错误 (0xE8003FFE)”。

这让我发疯......我做错了什么？我有她 iPod 的设备 ID，以防万一，作为临时测试人员，我是否必须为她设置一些特定的“东西”？我认为它会起作用....请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:50:44.847

我建议你看看

[https://testflightapp.com/](https://testflightapp.com/)

这是将构建分发给您的客户和测试人员的一种更简单的方法。

我经常使用它，它可以节省很多头痛......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:16:56.703

我们使用 hockeyapp.net 取得了巨大成功。我们已经使用它很长一段时间了，我们的客户喜欢 OTA beta 发行版的简单性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T21:16:11.153

另一家值得研究的公司是 www.appblade.com。如果您想要一个将 iOS 与 Android 和其他平台融为一体的解决方案，它运行良好。Testflight 已迁移到 iTunes Connect。

# iphone - NSLocalizedString 和应用程序语言

> ID：10450144
> 
> 赞同：0
> 
> 时间：2012-05-04T13:46:52.790
> 
> 标签：iphone, ios, nslocalizedstring, localizable.strings

我想知道是否有人知道我如何连接我的应用程序语言和 NSLocalizeStrings，例如：我的应用程序在 fr、ru、ro 但用户设备在 en 上，当用户打开应用程序时它在 en 但在应用程序设置中有ro 或 fr。如何在 NSLocalizedString 中传递我的应用程序语言。谢谢。

```
UIAlertView *finishQuiz = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Finished Quiz",@"Quiz finished")
                                                     message:NSLocalizedString(@"You answered to all quiestions. If you win you will be informed by e-mail" ,@"Information")
                                                    delegate:self 
                                           cancelButtonTitle:NSLocalizedString(@"Le menu principale",@"MainMenu")
                                           otherButtonTitles:nil, nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:11:33.010

你没有。应用程序将`Localizable.strings`根据系统语言在适当的本地化下查找。如果用户将法语设置为系统语言，应用程序将从`fr.lproj\Localizable.strings`您使用`NSLocalizedString(...)`.

所以`NSLocalizedString(@"SomeTest", @"This is a test description");`将从`fr.lproj\Localizable.string`

```
// Localizable.string (Francais)
"SomeTest" = "Un test"; 
```

有关更多信息，请阅读：[本地化字符串资源](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html)。

# couchdb - couchdb 适合构建 wiki 引擎吗？

> ID：10450154
> 
> 赞同：2
> 
> 时间：2012-05-04T13:47:53.873
> 
> 标签：couchdb, wiki-engine

couchdb的每个文档在更新后都会有一个新版本，而之前的文档还在数据库中。

我认为这个特性适合构建一个wiki引擎。但我是 couchdb 的新手，我不太确定。

你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:52:24.417

我看到的主要问题是，如果您压缩数据库，版本信息将会丢失。我不确定让应用程序依赖于这样的功能是否会更好。

# objective-c - 如何垂直移动 UITableView

> ID：10450155
> 
> 赞同：1
> 
> 时间：2012-05-04T13:47:56.177
> 
> 标签：objective-c, ios, ios5, ios4

我创建了小型 iPhone 应用程序。我把 UITableView 和一些 UIView 放在单元格内。我添加了水平移动单元格中的视图的功能。现在，如果我在 UIView 中垂直移动手指，我想添加逻辑以垂直移动整个 UITableView。那是我的代码：

```
-(void)moveView:(UIPanGestureRecognizer *)recognizer
{

    if([recognizer state] == UIGestureRecognizerStateBegan)
    {
        CGPoint location = [recognizer locationInView:[self superview]];
        prevPos = location;
        startPosition = self.frame.origin.x;

    }
    else if([recognizer state] == UIGestureRecognizerStateChanged)
    {
        CGPoint location = [recognizer locationInView:[self superview]];
        float delX =  location.x - prevPos.x;
        float delY =  location.y - prevPos.y;
        if(delX > 0 && delX * delX > delY * delY)
        {
            CGPoint np = CGPointMake(self.frame.origin.x+delX, self.frame.origin.y);
            CGRect fr = self.frame;
            fr.origin = np;
            self.frame = fr;
            prevPos = location;
        }
        else if(delX * delX < delY * delY)
        {

        }
    }
    else if([recognizer state] == UIGestureRecognizerStateEnded ||
            [recognizer state] == UIGestureRecognizerStateFailed ||
            [recognizer state] == UIGestureRecognizerStateCancelled)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];

        CGRect rect = self.frame;
        rect.origin.x = startPosition;
        self.frame = rect;
        startPosition = 0;
        [UIView commitAnimations];
    }
} 
```

我应该在这种情况下输入什么代码： `else if(delX * delX < delY * delY)`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:47:28.957

如果要滚动 TableView，则需要更改 TableView 的 contentOffset 属性。

查看[setContentOffset:animated:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/setContentOffset%3aanimated%3a)文档

# utf-8 - 在 VB6 中追加写入文本文件（utf-8 编码）

> ID：10450156
> 
> 赞同：13
> 
> 时间：2012-05-04T13:47:57.530
> 
> 标签：utf-8, vb6, append, text-files

我必须在 VB6 中编写一个文本文件。我需要在附加和 utf-8 编码中完成。

我尝试了两种解决方案，一种使用“TextStream”，另一种使用“ADODB.Stream”。

第一个：

```
 Set fsoFile = fso.OpenTextFile(FileIn(fi), ForAppending, True)
    fsoFile.WriteLine "<tag>kkkjòòkkkkjlòlk</tag>"
    fsoFile.Close 
```

附加效果很好，但我怎样才能把它写成 utf-8 编码？

第二个：

```
Dim ST As ADODB.Stream

Set ST = New ADODB.Stream
ST.Mode = adModeReadWrite
ST.Type = adTypeText
ST.Charset = "UTF-8"

ST.Open
ST.LoadFromFile FileIn(fi)
ST.Position = ST.Size
ST.WriteText "<tag>kkkjòòkkkkjlòlk</tag>"
ST.SaveToFile FileIn(fi)
ST.Close 
```

在 utf-8 中正确写入，但我不能在附加文件中写入文件，只能使用“adSaveCreateOverWrite”。

我怎样才能做到这一点？还有其他方法吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T18:37:38.283

您可以将二进制 I/O 与 API 调用结合起来执行到 UTF-8 的转换：

```
Option Explicit

Private Const CP_UTF8 As Long = 65001

Private Declare Function WideCharToMultiByte Lib "kernel32" ( _
    ByVal CodePage As Long, _
    ByVal dwFlags As Long, _
    ByVal lpWideCharStr As Long, _
    ByVal cchWideChar As Long, _
    ByVal lpMultiByteStr As Long, _
    ByVal cchMultiByte As Long, _
    ByVal lpDefaultChar As Long, _
    ByVal lpUsedDefaultChar As Long) As Long

Private Function OpenAppendUTF8(ByVal FileName As String) As Integer
    OpenAppendUTF8 = FreeFile(0)
    Open FileName For Binary Access Write As #OpenAppendUTF8
    Seek #OpenAppendUTF8, LOF(OpenAppendUTF8) + 1
End Function

Private Sub WriteUTF8( _
    ByVal FNum As Integer, _
    ByVal Text As String, _
    Optional ByVal NL As Boolean)

    Dim lngResult As Long
    Dim UTF8() As Byte

    If NL Then Text = Text & vbNewLine
    lngResult = WideCharToMultiByte(CP_UTF8, 0, StrPtr(Text), Len(Text), _
                                    0, 0, 0, 0)
    If lngResult > 0 Then
        ReDim UTF8(lngResult - 1)
        WideCharToMultiByte CP_UTF8, 0, StrPtr(Text), Len(Text), _
                            VarPtr(UTF8(0)), lngResult, 0, 0
        Put #FNum, , UTF8
    End If
End Sub

Private Sub Main()
    Dim F As Integer

    F = OpenAppendUTF8("test.txt")
    WriteUTF8 F, "Hello"
    WriteUTF8 F, ChrW$(&H2026&)
    WriteUTF8 F, "World", True
    Close #F
    MsgBox "Done"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:42:32.640

我更喜欢将其保存为 ANSI，因为它默认保存。用记事本打开它并选择UTF8编码覆盖它。我发现这是迄今为止最快的方法。我使用其他一些代码来附加，例如用于数据库转换：

```
Dim fs As Object, a
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.CreateTextFile(filename, True) 'example (myfile.xml, True)
a.writeline var1
a.writeline var2
a.Close 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-05T12:51:35.493

实际上不需要API调用。

```
Option Explicit

Sub testAppend()

    Dim fileName
    fileName = "C:\Test\test.txt"
    Dim f As Integer
    f = FreeFile(0)
    Open fileName For Binary Access Write As #f
    Seek #f, LOF(f) + 1
    Dim t
    t = "<tag>" & ChrW(107) & ChrW(107) & ChrW(107) & ChrW(106) & ChrW(242) & ChrW(242) & ChrW(107) & ChrW(107) & ChrW(107) & ChrW(107) & ChrW(106) & ChrW(108) & ChrW(242) & ChrW(108) & ChrW(107) & "</tag>"
    Put #f, , textToBinary(t, "utf-8")
    Close #f

End Sub

Function textToBinary(text, charset) As Byte()

    With CreateObject("ADODB.Stream")
        .Open
        .Type = 2 ' adTypeText
        .charset = charset
        .WriteText text
        .Position = 0
        .Type = 1 ' adTypeBinary
        textToBinary = .Read
        .Close
    End With

End Function``` 
```

# sencha-touch - Sencha touch 2 - 在 DataView 中显示嵌套模型

> ID：10450161
> 
> 赞同：0
> 
> 时间：2012-05-04T13:48:17.390
> 
> 标签：sencha-touch, sencha-touch-2

我有一个代表用户的模型。用户有一些个人字段（姓名、家庭）和另一个 Model 作为 hasMany（例如他的电话）。

像这样的东西：

```
Ext.define('MyApp.model.User', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['ID', 'Name', 'Family'],
        hasMany: { model: 'MyApp.model.Phone', name: 'Phones', associationKey: 'phones' }
   }
});

Ext.define('MyApp.model.Phone', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['ID', 'Phone', 'Type']
   }
}); 
```

现在，我想将它加载到数据视图（我成功地做到了）并想显示用户信息，然后是属于他的手机列表以及用户点击手机时 - 使用布局（或消息，或任何东西 - 关键是要获得它的 ID）

问题是，当我使用 itemtap 时，它会获取整个记录，包括用户信息和所有电话 - 所以我真的不知道什么电话被窃听了。

为了显示用户信息，我只使用显示信息的 itemTpl，然后列出所有电话。

那么 - 我怎么知道什么电话被窃听了？

谢谢！罗马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:58:10.170

没有干净的方法可以做到这一点，除非您直接将`phones`( `userRecord.phones()`) 存储绑定到数据视图。相反，您需要获取`itemtap`事件的目标并检查它是什么元素。

```
itemtap: function(me, index, target, record, e) {
    var el = Ext.get(e.target);
    alert(el.dom.innerHTML);
} 
```

完整示例：

```
Ext.application({
    name: 'Sencha',

    launch: function() {
        Ext.create('Ext.DataView', {
            fullscreen: true,
            store: {
                fields: ['name'],
                data: [
                    { name: 'one' },
                    { name: 'two' }
                ]
            },
            itemTpl: '{name} <span>tap me</span>',
            listeners: {
                itemtap: function(me, index, target, record, e) {
                    var el = Ext.get(e.target);
                    alert(el.dom.innerHTML);
                }
            }
        });
    }
}); 
```

# c - 堆栈损坏；跨函数调用存储在寄存器中的变量应该发生什么？

> ID：10450163
> 
> 赞同：0
> 
> 时间：2012-05-04T13:48:33.117
> 
> 标签：c, ios5, gdb, llvm

我一直在追查似乎是由于内存损坏造成的崩溃。设置为 C，使用 llvm for iOS 构建。

在调试模式和优化级别 0 (-O0) 中不存在内存损坏。为了能够单步执行代码，我使用调试符号进行了重建，但优化级别为 1 (-O1)。这足以重现崩溃，它允许我逐步完成程序。

我已将问题缩小到特定的函数调用。在它之前，某个指针的值是正确的。在它之后，值被破坏（它最终等于 0x02，无论它是什么值）。

Lldb 似乎不想查看变量或内存位置。切换到 gdb，我发现如果我尝试打印上述变量的地址，我会遇到以下消息：“地址请求标识符'x'，它在寄存器 $r4 中”。

我知道，作为一种优化，编译器可能会决定将变量的值保存在寄存器中。确实，如果我在函数调用之前和之后打印 $r4 的值，我会在之前和之后看到正确的值和 0x02。

在这一点上，我有点不知所措，不知道如何将其分解为更小的问题。因此，我的问题是：

1.  假设编译器将变量的值存储在寄存器中作为优化，那么当调用另一个函数时该寄存器应该发生什么？

2.  是否有某种机制可以在新函数返回后存储和恢复值？

3.  关于调试技术的任何建议？

所有帮助和建议表示赞赏。也非常欢迎提供有关该主题的阅读材料的链接。

谢谢

* * *

编辑：添加版本信息

iOS版本：5.1

llvm 版本：i686-apple-darwin10-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2377.00）

Xcode 版本：4.3.1

gdb 版本：GNU gdb 6.3.50-20050815（苹果版 gdb-1708）

在 iPhone 3Gs 上运行（模拟器中不会出现崩溃）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:51:59.407

不是完整的答案，但是

> 假设编译器将变量的值存储在寄存器中作为优化，那么当调用另一个函数时该寄存器应该发生什么？

寄存器可能应该由被调用者推入堆栈。

> 是否有某种机制可以在新函数返回后存储和恢复值？

取决于调用约定，但通常 - 将其推入堆栈的人负责将其从堆栈中弹出

**最后一件事：**

如果您遇到这种情况，在某些优化级别上“它有效”而在其他优化级别上无效，那么您很可能会有未定义的行为。如果你在你的代码中找不到它，你可以在这里问它，给出实际的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:00:39.097

如果可能，请尝试使用 Valgrind。[这](http://root42.blogspot.com/2011/02/valgrind-checking-of-ios-programs.html)看起来是一个很好的起点。

另外，尝试为您的程序启用 -fstack-protector。

# c# - 有没有一种简单的方法可以遍历集合并创建报告？

> ID：10450166
> 
> 赞同：1
> 
> 时间：2012-05-04T13:48:39.223
> 
> 标签：c#, linq

我有以下类型的数据：

```
class Content {
   public String RowKey ..
   public String Title
}

a collection: ICollection<Content> contentItems 
```

集合的数据如下所示，其中第一列是 RowKey，第二列是 Title

```
1.0 Topic1
1.1 Some text for topic1
1.2 More text for topic1
2.0 Topic2 header
2.1 Some text for topic2
2.3 Some more text for topic2 
```

我要做的是创建以下内容：

```
<h2>1 Topic1</h2>
<ul>
<li>1.1 Some text for topic1</li>
<li>1.2 More text for topic1</li>
</ul>
<h2>2 Topic2 header</h2>
<ul>
<li>2.1 Some text for topic2</li>
<li>2.3 Some more text for topic2</li>
</ul> 
```

我可以想办法使用循环、临时变量等来做到这一点，但有没有办法在 LINQ 中做到这一点？我已经看到了 LINQ 可以做的一些事情，如果你真的知道如何使用它，它似乎可以做很多事情。不幸的是，我的知识只不过是使用 LINQ 从集合中获取有序数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:43:12.970

以下代码将所需的 html 包装在 body 标记中，但您可以轻松地从此元素中提取内容。

```
private static void BuildHtml()
{
    var content = new List<Content>
                    {
                        new Content() { RowKey= "1.0", Title = "Topic1" },
                        new Content() { RowKey= "1.1", Title = "Some text for topic1" },
                        new Content() { RowKey= "1.2", Title = "More text for topic1" },
                        new Content() { RowKey= "2.0", Title = "Topic2 header" },
                        new Content() { RowKey= "2.1", Title = "Some text for topic2" },
                        new Content() { RowKey= "2.3", Title = "Some more text for topic2" }

                    };

    var html = new XElement("Body", content
        .GroupBy(x => x.RowKey.Split('.').First())
        .Select(
            y =>
            new List<XElement>
                {
                    new XElement("h2", y.First().RowKey.Split('.').First() + " " + y.First().Title,
                                    new XElement("ul", y.Skip(1).Select(z => new XElement("li", z.RowKey + " " + z.Title))))
                }));

    html.ToString();
} 
```

# c# - 数据绑定列表 到中继器

> ID：10450167
> 
> 赞同：0
> 
> 时间：2012-05-04T13:48:41.543
> 
> 标签：c#, asp.net

我试图将图像列表（`System.Web.UI.WebControls.Image`）绑定到转发器，但图像显示为损坏。当我在 ItemDataBound 事件中放置一个断点时，似乎没问题，DataItem 是正确的并且具有正确的 ImageUrl。然而，结果是错误的。

这段代码非常简单，但最终会变得更加复杂。使用 ImageUrls绑定 a`List<String>`最终不会帮助我，因为所有图像也将具有更多独特的属性。

中继器：

```
<asp:Repeater ID="repButtons" runat="server" OnItemDataBound="repButtons_OnItemDataBound">
    <ItemTemplate>
        <asp:Image ID="imgButton" runat="server" />
    </ItemTemplate>
</asp:Repeater> 
```

用图像制作列表：

```
List<System.Web.UI.WebControls.Image> myButtons = new List<System.Web.UI.WebControls.Image>();

Image myEditButton = new Image();
myEditButton.ImageUrl = "~/images/themes/pencil.png";

myButtons.Add(myEditButton);

repButtons.DataSource = myButtons;
repButtons.DataBind(); 
```

数据绑定：

```
protected void repButtons_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Image myImage = (Image)e.Item.DataItem;

        Image imgButton = (Image)e.Item.FindControl("imgButton");

        imgButton = myImage;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:36:47.867

如果您更改为使用 a`PlaceHolder`而不是`Image`

```
<ItemTemplate>
    <asp:PlaceHolder ID="imgPlaceholder" runat="server" />
</ItemTemplate> 
```

然后在 DataBound 事件中将您的 Image 添加到此。

```
Image myImage = (Image)e.Item.DataItem;
PlaceHolder imgPlaceholder = (PlaceHolder)e.Item.FindControl("imgPlaceholder");
imgPlaceholder.Controls.Add(myImage); 
```

您无法按照您尝试的方式执行此操作的原因是因为您基本上是在说`imgButton`现在是一个新创建的图像控件，而不是中继器中的那个。你认为你正在做的基本上是把它的所有属性`myImage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:57:31.603

创建并将 list<string> 绑定到中继器。列表中的每个字符串都是图像的 URL。更改转发器标记如下-->

```
<asp:Image ID="imgButton" runat="server" ImageUrl="DataBinder.Eval(Container.DataItem)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:44:16.737

以下代码应该适合您：

```
<asp:Repeater ID="repButtons" runat="server" OnItemDataBound="repButtons_OnItemDataBound">
    <ItemTemplate>
        <asp:Image ID="imgButton" runat="server" ImageUrl='<%# Eval("ImageUrl") %>' />
    </ItemTemplate>
</asp:Repeater> 
```

* * *

制作图像列表

```
List<System.Web.UI.WebControls.Image> myButtons = new List<System.Web.UI.WebControls.Image>();

Image myEditButton = new Image();
myEditButton.ImageUrl = "~/images/themes/pencil.png";

myButtons.Add(myEditButton);

repButtons.DataSource = myButtons;
repButtons.DataBind(); 
```

* * *

# iphone - 如何在 iPhone 中使用移动和缩放 UIImagePickerController？

> ID：10450177
> 
> 赞同：4
> 
> 时间：2012-05-04T13:49:04.037
> 
> 标签：iphone, ios, uinavigationcontroller, uiimagepickercontroller

我是 iPhone 开发的新手。我正在使用图像选择器控制器，我想在其中移动和缩放从照片库中选择的图像，所以我启用了`allowsediting = yes`.

我的选择器确实完成了方法：

```
 - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary

    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    self.imgForDisplay.image=[self scaleAndRotateImage:image];
    self.imagePicker.allowsEditing = YES;

    ImageDetailsViewController *imageDetailsVC = [[ImageDetailsViewController alloc] init];
    imageDetailsVC.imagedisplay.image = self.imgForDisplay.image;
    [picker pushViewController:imageDetailsVC animated:YES];

//[picker dismissModalViewControllerAnimated:YES];

} 
```

然后我推另一个视图控制器，我想在其中显示选择的图像。

这里我有两个问题：

1）当我选择图像时，它导航到另一个没有“移动和缩放”屏幕的视图，但图像现在在导航时显示在 ImageDetailsViewController 中。

2）当我再次导航并选择另一个图像时，现在它显示“移动和缩放”屏幕。当我单击选择按钮时，它只是显示没有导航栏的白屏。

有没有办法设置选择按钮的动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:55:35.180

我也面临同样的问题，我通过使用代码解决了这个问题，通过这个它会很有用。

```
 - (void)imagePickerController:(UIImagePickerController *)picker  
    didFinishPickingMediaWithInfo:(NSDictionary *)info { 
        self.lastChosenMediaType = [info objectForKey:UIImagePickerControllerMediaType]; 
        if ([lastChosenMediaType isEqual:(NSString *)kUTTypeImage]) { 
            UIImage *chosenImage = [info objectForKey:UIImagePickerControllerEditedImage]; 
            UIImage *shrunkenImage = shrinkImage(chosenImage, imageFrame.size); 
            self.image = shrunkenImage; 
        } else if ([lastChosenMediaType isEqual:(NSString *)kUTTypeMovie]) { 
            self.movieURL = [info objectForKey:UIImagePickerControllerMediaURL]; 
        } 

        ImageSelectionView *imageSelectionVC = [[ImageSelectionView alloc] init];
        imageSelectionVC.theImage = image;
        [picker pushViewController:imageSelectionVC animated:YES];
        imageSelectionVC.dismissDelegate =self;

       // [picker dismissModalViewControllerAnimated:YES]; 
    } 
```

'

```
-(void)updateDisplay { 
    if ([lastChosenMediaType isEqual:(NSString *)kUTTypeImage]) { 
        imageView.image = image; 
        imageView.hidden = NO; 
        moviePlayerController.view.hidden = YES; 
    } else if ([lastChosenMediaType isEqual:(NSString *)kUTTypeMovie]) { 
        [self.moviePlayerController.view removeFromSuperview]; 
        self.moviePlayerController = [[MPMoviePlayerController alloc] 
                                       initWithContentURL:movieURL] ; 
        moviePlayerController.view.frame = imageFrame; 
        moviePlayerController.view.clipsToBounds = YES; 
        [self.view addSubview:moviePlayerController.view]; 
        imageView.hidden = YES; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:01:27.913

我认为你最好像这样展示你的选择器模式：

```
 if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]){
    UIImagePickerController * picker = [[UIImagePickerController alloc] init];

    picker.allowsEditing = YES;
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentModalViewController:picker animated:YES]; 
```

然后让您的图像显示在显示它的视图控制器的视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T14:24:31.940

```
-(IBAction)Btn_AddImage:(id)sender
{
    UIImagePickerController *Image_Picker=[[UIImagePickerController alloc]init];
    Image_Picker.delegate=self;
    Image_Picker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentViewController:Image_Picker animated:YES completion:Nil];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSData  *Data=UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"], 1);
    UIImage *Cust_Image=[[UIImage alloc]initWithData:Data];
    Profile_Image.image=Cust_Image;
    [picker dismissViewControllerAnimated:YES completion:Nil];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissViewControllerAnimated:YES completion:Nil];
} 
```

# zend-framework - 学说2：显式获取没有缓存

> ID：10450182
> 
> 赞同：1
> 
> 时间：2012-05-04T13:49:28.153
> 
> 标签：zend-framework, caching, doctrine-orm

我在 Zend Framework1 中使用了学说 2.2.2，目前正在开发一个编辑工具。用户单击链接以在列表中“向上”移动某些内容，我的操作完成了它的工作，对数据库进行了更改，我重定向但结果，从数据库中新获取的仍然是旧版本。

我认为它与缓存有关，因为我没有将对象临时存储在会话或任何东西中。

所以问题是：有没有办法获取一些东西并告诉 Doctrine，不要为这个特定的请求使用缓存？或者是否有可能删除某些缓存条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:10:09.790

是的，看看[http://readthedocs.org/docs/doctrine-orm/en/latest/reference/caching.html?highlight=cache#result-cache](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/caching.html?highlight=cache#result-cache)。

有一个查询 api 可以启用、禁用、...结果缓存，例如，每个查询的单个查询；或全球。

# mongodb - 评估 mongo DB 性能

> ID：10450188
> 
> 赞同：1
> 
> 时间：2012-05-04T13:49:41.280
> 
> 标签：mongodb, performance, mongodb-query, nosql

我在 mongoDB 中有一个集合，我在该集合上设置了用户首选项。我在一个特定的集合中有大量的对象，用户可以关注集合中的一个键。例如：

```
colletionx { key1: value1, key2: value2 : key3: value3 .. keyn:valuen} 
```

现在用户可以关注任意数量的键，即当 key1 等于某个值时更新我。（非常类似于 Twitter 的“关注”功能）。

现在我怎样才能有效地做到这一点？

另外，如果我使用这样的查询查询 mongo：

```
 db.collection.find({ keyId : 290}) 
```

或者 `db.collection.find({ keyId : { $in [ 290] } })`当有数百万用户并且都关注 1 个节目时，是否会有任何显着的性能提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:53:52.447

我认为在任何数据库中拥有大量数据的最大问题之一是，当您查询时，您希望避免撞到磁盘。Mongodb 在将数据保存在内存方面做得相当好，但如果您的数据集超出内存，您将开始交换，这将损害您的性能。

只要您要查询的键上有索引，执行`$eq`查询和查询之间应该没有太大区别。`$in`如果没有索引，您将执行完整的集合扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:28:23.423

对于大量数据，非常推荐使用[Sharding](http://www.mongodb.org/display/DOCS/Sharding) 它将允许您在分片之间拆分数据，因此您的索引可以适合 ram 内存。我认为 findOne by index 应该非常有效。在这种情况下，唯一会损害您的性能的是除了您的读取操作之外的大量写入。由于 mongo 有一个全局锁。

# iphone - 如何在 iPhone 中创建 JSON 格式的字符串？

> ID：10450192
> 
> 赞同：0
> 
> 时间：2012-05-04T13:49:58.763
> 
> 标签：iphone, json, string-formatting

我想创建像 {"search_element": "New York"} 这样的 JSON 字符串。我为此使用了以下代码。

```
 NSString *JSONString = [NSString stringWithFormat:@"{\"search_element\":""\"%@\"""}",
                            [searchName stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

这样做之后，我得到了像 {"search_element":"New%20York"} 这样的价值。我希望它应该是纽约而不是 New%20York。我没有得到如何格式化它以获得预期的结果。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:57:07.670

你就不能这样用吗？

```
NSString *JSONString = [NSString stringWithFormat:@"{\"search_element\":""\"%@\"""}", searchName]; 
```

所以基本上没有`stringByAddingPercentEscapesUsingEncoding:`方法

而且我真的不明白你为什么要使用它：

```
@"{\"search_element\":""\"%@\"""}" 
```

我会用更少的引号来做：

```
@"{\"search_element\":\"%@\"}" 
```

做了一个快速测试：

```
NSString *test = @"{\"search_element\":\"%@\"}";
NSLog(test, @"New York"); 
```

输出：

`{"search_element":"New York"}`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:55:26.833

你可以简单地调用下一个

```
 NSString *newString = [JSONString stringByReplacingOccurrencesOfString:@"%20" withString:@""]; 
```

但是查看[JSONKit](https://github.com/johnezang/JSONKit)和[SBJSON](https://github.com/stig/json-framework) ..他们有在 iOS 中生成有效 JSON 的方法

# debugging - gdb --write 不会保存到 64 位可执行文件 - 32 位可以吗？

> ID：10450193
> 
> 赞同：1
> 
> 时间：2012-05-04T13:49:58.923
> 
> 标签：debugging, gdb

我试过了

```
gdb --write --nx file 
```

无论我做什么，即使我让程序正常退出，它也不会写入 64 位二进制更改！

32 位的作品，我使用完全相同的命令和顺序/序列和“设置 {int} 0x0xxxxxx = 0xffffffff”

然后输入 quit （应该用 --write 标志保存）

**权限：** rwx-rxrx / 755

我开始怀疑 BFD（二进制文件描述符）或其他内部组件是否不允许它。

如前所述（[此处](http://sourceware.org/gdb/onlinedocs/gdb/Files.html)）：

*此外，如果底层 BFD 功能支持它，您可以使用 gdb -write 使用此技术修补目标文件。请注意，在这种情况下 gdb 既不能解释也不能修改重定位，因此分支和一些已初始化的变量会出现在错误的位置。但是这个功能时不时还是很方便的。*

# c++ - 多线程——无法访问构造函数设置的类成员变量

> ID：10450197
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:50:13.137
> 
> 标签：c++

我正在从 main 调用的函数之一生成线程。该线程的启动例程完全是另一个单独类中的函数。因此，为了访问该类，我编写了一个 extern "C" 函数，通过它我可以调用启动例程。但问题是，进入启动例程后，线程无法访问类的构造函数设置的成员变量值。

这对我来说似乎很奇怪，因为当我在不使用线程的情况下运行代码时一切都很完美。有人可以建议我出什么问题吗？

我在下面发布了一些相关的代码详细信息：

`外部“C”{

```
void* run(void* arg)
{
    CFileOp* trans = static_cast<CFileOp*>(arg);
    trans->write_block(arg);
    return 0;
} 
```

}

```
int
TestFileOps(int file_size, CGlobalItems &globals){
...

for(i = 0; i < num_chunks; i++)
{
pthread_create( &thread_id[i], NULL, run, buf);
}

...
}` 
```

//有一个类CFileOp，它有一些私有成员变量，而write_block是它的一个公共函数。

```
void* CFileOp::write_block(PVOID buf)
{
int rc = my_write(78, buf, m_chunk_size);
 if(rc != m_chunk_size)
 {
   fprintf(stderr, "Can't write block; rc=%d, buf=%p, chunk_size=%d\n", rc, buf, m_chunk_size);
    pthread_exit((void *)-1);return 0;;
  }
m_cur_pos++;
fprintf(stderr,"m_cur_pos: %d   m_chunks_per_file: %d\t",m_cur_pos,m_chunks_per_file);
  if(m_cur_pos >= m_chunks_per_file)                                                    
  {
   if(seek(0, SEEK_CUR) == -1)
    pthread_exit((void *)-1);return 0;// return -1;
 }
pthread_exit((void *)rc);
return 0;
} 
```

我不能将整个代码作为基准代码发布，并且非常冗长和详细。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:52:36.193

如果我正确理解你想从线程调用成员函数的问题，如果你有 c++11，你就可以这样做

```
 std::thread th(&my_class::my_mem_func, &my_object); 
```

这将创建一个线程`th`并执行`my_mem_func``my_object`

编辑

```
std::thread th(&my_writer::write_some, &writer_object, data);
th.join(); 
```

# c# - 如何使用 .NET C# 从登录屏幕中隐藏用户？

> ID：10450198
> 
> 赞同：2
> 
> 时间：2012-05-04T13:50:18.360
> 
> 标签：c#, .net, group-policy

我需要在 Windows 上的“切换用户”屏幕中**隐藏**用户帐户名。为此，我需要将该用户名添加到本地计算机策略/计算机配置/Windows 设置/安全设置/本地策略/用户权限分配/“拒绝本地登录”中。

**我需要以编程方式做到这一点。**

**你知道如何在 .NET C# 中做到这一点吗？**

任何链接或任何提示可能会有所帮助......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:01:15.983

您需要在注册表中写入信息

首先阅读此[配置用户权限](http://technet.microsoft.com/en-us/library/dd277404.aspx)（您可以在其他操作系统中找到相同的内容）

第二次阅读此[Read-write-and-delete-from-registry](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

**编辑**

对于 Win7 和 Vista [Win7 和 Vista](http://www.askvg.com/how-to-disable-switch-user-option-in-windows-vista-and-7/)

**编辑2**

转到“HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Winlogon”并创建一个名为“SpecialAccounts”的新密钥。创建一个名为“UserList”的“SpecialAccounts”子项。在“UserList”键中，使用要隐藏的帐户名称创建一个 DWORD 值，并将该 DWORD 的值设置为 0。对要隐藏的每个帐户执行此操作。

所有这些你都可以通过[第二个链接来完成](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

# apache - 在 YSlow 中为我的 magento 网站减少 HTTP 请求的 E 级

> ID：10450208
> 
> 赞同：0
> 
> 时间：2012-05-04T13:50:53.463
> 
> 标签：apache, http, magento

E 级减少 HTTP 请求

此页面有 3 个外部样式表。尝试将它们合二为一。此页面有 19 个外部背景图像。尝试将它们与 CSS 精灵结合起来。

我应该怎么做才能将其提高到 A 级。我应该在 .htaccess 文件或其他任何地方进行改进。我已经做了很多事情，我得到了 89 分，但我想将它提高到使用 apache 服务器的 AI 级。我该怎么做。请建议某人。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:04:10.753

这是解决外部样式表问题的一种非常简单的方法：打开 Magento 管理员，转到系统>配置>高级>开发人员，然后在 CSS 设置下将“合并 CSS 文件”设置为是。

要解决第二个问题，创建 CSS 精灵表是一个好主意（尽管它可能会有点浪费时间，除非您从一开始就这样做）。独立加载您的主题图形会导致您的响应时间受到很大影响，因此一般的想法是将您的站点图标和背景图像加载到一个文件中，然后使用一些 CSS 技巧仅在需要时显示它们。Smashing Magazine 上的这篇文章应该让您开始使用 CSS 精灵：[http ://coding.smashingmagazine.com/2012/04/11/css-sprites-revisited/](http://coding.smashingmagazine.com/2012/04/11/css-sprites-revisited/)

至于整体速度优化，有很多（广泛的）关于这个主题的博客文章，只需搜索它们即可。在更改服务器配置之前，请确保您知道自己在做什么，否则响应缓慢将是您最不麻烦的事情！

# centos - 邮件未从服务器发送，被告知要编辑

> ID：10450210
> 
> 赞同：0
> 
> 时间：2012-05-04T13:51:03.040
> 
> 标签：centos, imap, plesk

最近从服务器发送邮件时出现问题。当研究它时，有一个segmentation(11)错误错误。

我被定向到这篇文章[http://kb.parallels.com/en/260](http://kb.parallels.com/en/260)，并被告知要更新 fs.file-max /etc/sysctl.conf。问题是，文件中没有 fs.file-max。关于这个问题的更多背景：

*   服务器 Centos 5.5
*   Plesk 10
*   电子邮件不是从具有 4 Gigs 电子邮件价值的邮箱发送的（如果重要的话）。

有没有人知道如何修复或找出发生了什么的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:14:44.607

```
The problem is, there is no fs.file-max in the file. 
```

您所指的文章建议添加此参数，并没有说此参数在文件中：

“...应该通过将以下行***添加***到 /etc/sysctl.conf 来更改它...”

# ruby-on-rails - Rails 中的 ActiveRecord::MissingAttributeError（不能写入未知属性）

> ID：10450213
> 
> 赞同：2
> 
> 时间：2012-05-04T13:51:15.517
> 
> 标签：ruby-on-rails, activerecord, attributes

我想创建一个新的“AnswerStat”对象并将其保存在数据库中。我正进入（状态：

```
can't write unknown attribute `answer_stat_id'

app/models/answer_stat.rb:14:in `new'
app/models/answer_stat.rb:14:in `add_answer'
app/controllers/users_controller.rb:31:in `block in index'
app/controllers/users_controller.rb:30:in `each' 
```

answer_stat_id 不存在，我猜它是指表 answer_stats 的主键，即 id。我当然没有明确声明这个属性。为什么 Rails 会寻找这个不存在的属性？代码：

```
class AnswerStat < ActiveRecord::Base

  attr_accessible :contact, :statement, :answer_sum, :answer_count, :variation

  belongs_to :contact, :class_name => "Friend"
  has_one :statement

  validates_uniqueness_of :contact, :scope => :statement

  def self.add_answer(answer)
    if stat = AnswerStat.find_by_contact_id_and_statement_id(answer.contact.id, answer.statement.id)
    ...........do some stuff...........
    else
      @answer_stat = AnswerStat.new(:contact => answer.contact, :statement => answer.statement, :answer_count => 1, :answer_sum => answer.description, :variation => answer.description)
      @answer_stat.save
    end      
  end 
```

我从 rails 控制台或任何控制器调用它，使用：

```
 Answer.all.each do |a|
      AnswerStat.add_answer(a)
   end 
```

answer_stats 表（使用 PRAGME table_info(answer_stats) 的 sqlite3）：

```
0|id|INTEGER|1||1
1|contact_id|integer|0||0
2|answer_sum|integer|0||0
3|answer_count|integer|0||0
4|created_at|datetime|1||0
5|updated_at|datetime|1||0
6|statement_id|integer|0||0
7|variation|integer|0||0 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:14:40.003

它可能来自`statement`引用关联模型的属性。我认为[它正在寻找](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)语句表中的 answer_stat_id 外键。

您应该：

*   [create the associated answer](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference) via `@answer_stat.build_statement(...)`
*   redesign your model associations if the statement is meant to preexist the stat

# python - Python尝试连接到多个mysqldb主机

> ID：10450215
> 
> 赞同：2
> 
> 时间：2012-05-04T13:51:33.287
> 
> 标签：python, mysql, multiple-databases

想知道是否有办法使用 python 脚本尝试连接到组 mysql 数据库主机？理想情况下，会有 X 台主机，它会尝试连接到每台主机，如果无法建立连接，则会失败。我不相信 MySQLdb.connect 能够处理多个主机，也许我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:06:12.250

`mysqldb.connect`连接到多个主机完全可以：

```
try:
    conn1 = mysqldb.connect(...)
    conn2 = mysqldb.connect(...)
    ...
except:  # add specific exception here
    ...  # support failure when connecting 
```

# cubes - Sifteo 支持哪些声音格式？

> ID：10450216
> 
> 赞同：2
> 
> 时间：2012-05-04T13:51:49.093
> 
> 标签：cubes, sifteo

我正在尝试在我的立方体上播放一些声音，但没有运气，我的 /assets/sounds 中有一个欢呼.wav，我这样称呼它：

```
Sound cheers = Sounds.CreateSound("cheers");
cheers.Play(1,0); 
```

更改名称会在 CreateSound() 方法中引发异常，所以我知道它正在加载它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:27:50.947

它们是 wav 和 mp3，虽然有些 wav 对我不起作用，但 mp3 可以正常工作

# java-me - 删除 RMS 中的特定记录？

> ID：10450217
> 
> 赞同：2
> 
> 时间：2012-05-04T13:51:50.687
> 
> 标签：java-me, midp, rms

我正在创建一个读/写 RMS 记录的 J2ME 应用程序。我能够
在 RMS 中读取和写入记录，但现在的问题是我想通过接受一些值来删除记录，
例如`accountNumber`.
RMS 记录的格式。

```
101,ABC,12345,12345 
```

和 String str 包含以下数据。

```
String str=accountSrNumber +","+ name +","+ balance +","+ TextDeposit;
deleteRecStore(str,accountSrNumber); 
```

我需要从用户那里接受 accountNumber(101) 并且需要删除这条记录。
这是我的删除方法。

```
 public void deleteRecStore(String str, String accNumber121) //
 {
   int s=str.indexOf(accNumber121);     
   System.out.println("index in delete function"+s);          
           if(s==0)
            {
             try{

                 rs.deleteRecord(s);
                    // RecordStore.deleteRecordStore(REC_STORE);
                     System.out.println("record delete successfully");
                 }
                catch (Exception e)
                {}   
     }
} 
```

我尝试同时使用方法`rs.deleteRecord(s)`和`RecordStore.deleteRecordStore(REC_STORE);`.
但没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:08:22.867

您总是删除记录 0，这是第一条记录，这是一个坏主意。例如，如果您添加两条记录并删除它们，然后添加另一条记录，它将被索引为 2，因此您必须调用 deleteRecord(2) 来删除它。方法 deleteRecordStore() 删除整个 recordStore（其中包含记录） - 之后，如果您创建一个，则下一个添加的记录将被索引为零。

如果我明白了，您想通过它的 acountNumber 删除记录。如果我是对的，您需要通过它的内容找到记录 ID。代码大概会是这个样子（可能有错误，没测试过，但是思路很重要）：

```
 public void deleteRecStore(String accNumber121) {
        RecordEnumeration e = rs.enumerateRecords();
        int found = -1;
        while (e.hasMoreElements()) {
            int id = e.nextRecordId();
            String next = new String(e.nextRecord());
            if (next.startsWidth(accNumber121)) {
                found = id;
            }
        }
        if (found == -1) {
            System.out.println("not found!");
        } else {
            rs.deleteRecord(found);
        }
    } 
```

# iis-7 - IIS 重写模块重写映射性能

> ID：10450218
> 
> 赞同：1
> 
> 时间：2012-05-04T13:51:54.470
> 
> 标签：iis-7, url-rewriting, iis-7.5

我正在编写一个新站点以取代旧站点，并且需要处理旧的 url 重定向（带有适当的内容迁移）。我想我想使用重写地图而不是开发一堆正则表达式来匹配 b/c 旧网站有各种各样奇怪的 url 格式。但是，我最多可以映射 8,000 个旧网址，我担心这可能会消耗太多资源并降低我的网站速度。任何人都有关于使用大量 url 重写地图性能的任何数据/经验/指导？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:57:00.357

问题是指 II7 Url Rewrite 模块 2.0 和 rewritemap 中大量项目的实现。将此作为自定义功能添加到 404 页面不是一个好的设计，也不是请求管道的最佳选择。

rewritemap 是专门为处理大型 url 集合而设计的，只要您有内存来保存 8k url 以及其他内存需求，就不应该成为问题。

您可以使用 jmeter 或 Visual Studio 轻松测试服务器，以查看 rewritemap 大小是否对响应时间有任何显着影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:41:00.863

我不止一次实现了 URL 重定向机制；我主要为此使用 404 处理程序（因为这不会对新 URL 产生开销惩罚）；如果请求触发了 404 处理程序，请查看它是否实际上不是重定向；如果是发送 301，否则发送 404。

重定向可以存储在索引查找中（如 c# 中的字典），这保证了您所指示的大小（8k 条目）的接近恒定时间的查找性能。

替代方案可能是使用 HttpModule 或（呃）ISAP 过滤器，但您的“404 aspx 错误页面”是最直接和最容易实现的。

至于性能；对于每天点击量超过 900 万的网站来说，这是一个经过验证的解决方案。

# html - 将样式应用于第一行的单元格

> ID：10450221
> 
> 赞同：88
> 
> 时间：2012-05-04T13:51:59.297
> 
> 标签：html, css, css-selectors, html-table

它应该很简单，但我无法弄清楚。

我有一张这样的桌子：

```
<table class="category_table">
 <tr><td> blabla 1</td><td> blabla 2 </td></tr>
 <tr><td> blabla 3 </td><td> blabla 4 </td></tr>
</table> 
```

我想让第一行的`td`标签有. 但不是第二排。`tr``vertical-align`

```
.category_table td{
    vertical-align:top;
} 
```

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-05-04T13:54:39.077

用来`tr:first-child`取第一个`tr`：

```
.category_table tr:first-child td {
    vertical-align: top;
} 
```

如果您有嵌套表，并且您不想将样式应用于内部行，请添加一些子选择器，以便只有第`td`一个顶级中的顶级 s`tr`获取样式：

```
.category_table > tbody > tr:first-child > td {
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T13:54:46.503

这应该做的工作：

```
.category_table tr:first-child td {
    vertical-align: top;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-05T00:05:30.660

以下适用于`tr`下表的第一个`thead`

```
table thead tr:first-child {
   background: #f2f2f2;
} 
```

这适用于第一个`tr`和`thead`两者`tbody`：

```
table thead tbody tr:first-child {
   background: #f2f2f2;
} 
```

# command-line - C# - 隐藏命令行窗口

> ID：10450224
> 
> 赞同：0
> 
> 时间：2012-05-04T13:52:04.367
> 
> 标签：command-line, hide

我正在我的代码中启动一个bat文件

System.Diagnostics.Process.Start(path + ".bat");

如何隐藏该 bat 文件的命令行窗口？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:54:18.967

使用 ProcessStartInfo 进行更多控制，例如

```
var psi = new ProcessStartInfo(path + ".bat"));

psi.WindowStyle = ProcessWindowStyle.Hidden;

Process.Start(psi); 
```

# php - 在字符串上的数字之间放置自定义字符

> ID：10450225
> 
> 赞同：1
> 
> 时间：2012-05-04T13:52:07.160
> 
> 标签：php, regex

一段代码可以解释我的问题

```
$string = '53 69 cm; 988 2460 g; wing 106 116 cm';
$patterns = array();
$patterns[0] = '/[0-9]+\s[0-9]+/';
$replacements = array();
$replacements[0] = '$0';
echo preg_replace($patterns, $replacements, $string,1); 
```

我需要在数字之间加上 - ，例如：

```
$string = '53-69 cm; 988-2460 g; wing 106-116 cm'; 
```

我怎样才能把 - 放在替代品上？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:54:44.570

希望这能给你一些帮助：

```
$string = '53 69 cm; 988 2460 g; wing 106 116 cm';
$pattern = '/(\d+)\s(\d+)/';
$replacement = '$1-$2';
echo preg_replace($pattern, $replacement, $string); 
```

输出：

```
53-69 cm; 988-2460 g; wing 106-116 cm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:55:27.780

```
$string = '53 69 cm; 988 2460 g; wing 106 116 cm';
$patterns[0] = '/([0-9]+)\s([0-9]+)/';
$replacements[0] = '$1-$2'; 
```

此外，由于您正在进行单次替换，您可以这样做：

```
$string = '53 69 cm; 988 2460 g; wing 106 116 cm';
$string = preg_replace('/([0-9]+)\s([0-9]+)/','$1-$2',$string); 
```

# symfony - Symfony2/Doctrine2 可搜索行为？

> ID：10450227
> 
> 赞同：1
> 
> 时间：2012-05-04T13:52:08.613
> 
> 标签：symfony, full-text-search, doctrine-orm, searchable

为什么可搜索行为已从教义2中删除？我没有在 Doctrine Extensions (https://github.com/stof/StofDoctrineExtensionsBundle) 中找到任何关于该主题的资源。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:04:56.113

如果您搜索一个非常简单的可搜索系统，您可以查看[https://github.com/knplabs/DoctrineBehaviors#filterable](https://github.com/knplabs/DoctrineBehaviors#filterable)和[https://github.com/KnpLabs/ControllerBehaviors/blob/master/src/Knp/ControllerBehaviors/FilterableBehavior .php](https://github.com/KnpLabs/ControllerBehaviors/blob/master/src/Knp/ControllerBehaviors/FilterableBehavior.php)

它是一组特性 (php5.4)，可帮助您创建简单的过滤器表单。

# c# - 防止表单关闭冻结 Invoke 调用

> ID：10450229
> 
> 赞同：3
> 
> 时间：2012-05-04T13:52:19.077
> 
> 标签：c#, winforms

在我的应用程序中，我创建了一个在`Bitmap`对象上绘制的线程，当它完成绘制时，它调用`form.Invoke(form.Refresh)`将位图绘制到主窗体。（`form`作为我申请的主要形式的参考。）

**问题**：我注意到，如果我在另一个线程等待来自 UI 线程的回调消息（因为`Invoke`调用）时关闭表单 - 线程将无限期等待（？）并且基本上会卡住，阻止应用程序从关闭。

在我的程序中使用`BeginInvoke`没有意义，因为刷新表单所需的时间必须在线程的工作中考虑。

**问：**防止这种情况发生的最好方法是什么？

**编辑：**我在某些地方读到这是一个坏主意，但在我看来，处理这个问题的唯一方法是调用`Thread.Abort()`. 我不能通过使用标志或类似的东西来关闭线程，因为它只是停留在`Invoke`调用中。

**编辑2：**为了清楚起见，我正在寻找一种告诉工作线程它应该停止等待`Invoke`回调并继续工作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:21:45.810

最好的答案当然是使用 BeginInvoke。如果您需要线程等待 UI 线程处理完结果，那么您必须向该进程添加另一个同步方法。

AutoResetEvent 将作为一个门，如下所示：

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;

public class MainForm : Form
{
    protected override void OnLoad(EventArgs e)
    {
        new Thread(ProcessBitmap) { IsBackground = true }.Start(null);
        base.OnLoad(e);
    }

    void DoneProcessingBitmap(Bitmap bitmap)
    {
        Trace.WriteLine("Done Processing Bitmap");
        uiDoneEvent.Set();
    }

    AutoResetEvent uiDoneEvent = new AutoResetEvent(false);
    volatile bool terminate = false;

    void ProcessBitmap(object state)
    {
        while (!terminate)
        {
            Bitmap bitmap = (Bitmap)state;
            Trace.WriteLine("Processing Bitmap");
            Thread.Sleep(5000); // simulate processing
            BeginInvoke(new Action<Bitmap>(DoneProcessingBitmap), bitmap);
            Trace.WriteLine("Waiting");
            uiDoneEvent.WaitOne();
        }
    }

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:18:12.650

在调用之前检查表单是否仍然存在`Invoke`。就像是...

```
if (form != null && !form.Disposed)
    form.Invoke(form.Refresh()); 
```

# r - 绘制绘图时是否可以更改 ylim 和 xlim ？

> ID：10450233
> 
> 赞同：16
> 
> 时间：2012-05-04T13:52:54.957
> 
> 标签：r, plot, limit

例如，如果我想用点 1-5 绘制一个图并添加点 5-9，以下将起作用：

```
plot(c(1,2,3,4,5), ylim=c(0,10))
points(c(5,6,7,8,9)) 
```

但是，如果我事先不知道要添加的点数是多少（可以是 5-9，也可以是 20-29），我无法预先设置 ylim 和 xlim。我希望能够执行以下操作（不起作用）：

```
plot(c(1,2,3,4,5))
points(c(5,6,7,8,9), ylim=c(0,10)) 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:33:27.977

（只是为了完整性。）

这在 R 基础图形中几乎肯定是不可能的。其他答案指出它在`ggplot`. 它*可能*在类似包的东西中是可能的`playwith`，尽管短暂的玩耍并没有告诉我一种方法来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:03:49.057

您可以更改 ggplot2 中的轴限制。例如，

```
require(ggplot2)
data(mpg) 

g = ggplot(mpg, aes(cyl, cty)) + geom_point() + xlim(5, 8)
g
g + xlim(4,8) 
```

正如 Ben Bolker 所提到的，在基本图形中，如果没有额外的软件包，你肯定无法做到这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T14:10:24.493

你可以修改`ggplot2`轴：

```
df <-data.frame(age=c(10,10,20,20,25,25,25),veg=c(0,1,0,1,1,0,1),extra=c(10,10,20,20,25,25,90))
 g=ggplot(data=df,aes(x=age,y=veg))
 g=g+stat_summary(fun.y=mean,geom="point")
 g 
```

然后

```
a<-g+coord_cartesian(xlim=c(0,100))
a+geom_point(data=df,aes(x=extra,y=veg)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T14:19:06.850

这足够好吗？它将 ylim 的上限视为变量，但从技术上讲，在添加点之前您会知道 ylim：

```
my.data <- seq(0,5)
my.points <- seq(5,9)
plot(my.data, ylim=c(0,max(my.data,my.points)))
points(my.points) 
```

你也可以用同样的方式处理 ylim 的下限：

```
my.data <- seq(0,5)
my.points <- seq(5,9)
plot(my.data, ylim=c(min(my.data,my.points),max(my.data,my.points)))
points(my.points) 
```

# jquery - TinyMCE 文本编辑器重置

> ID：10450234
> 
> 赞同：2
> 
> 时间：2012-05-04T13:52:57.190
> 
> 标签：jquery, tinymce

我正在使用带有 jQ​​uery 的 TinyMCE 编辑器 3.5 版。当我尝试更改编辑器的内容时​​遇到问题。我收到了来自 AJAX 请求的一些内容，然后我想把它放在可编辑区域。所以我写：

```
#('#my-textarea-id').html(ajax_result);
// OR
#('#my-textarea-id').val(ajax_result); 
```

在我使用它的前两次它工作正常，但之后它不会改变并保持在第一个选定的值上。这很奇怪。什么可能导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:07:44.167

你需要使用`tinymce.get('#my-textarea-id').setContent(ajax_result);`

# jquery - 如何使用 jquery 获取单选按钮选择的 td 值？

> ID：10450237
> 
> 赞同：0
> 
> 时间：2012-05-04T13:53:00.093
> 
> 标签：jquery

我在下面有这个 div，在选择`CFGID`单选按钮时，我应该能够获得相同的行值。例如`testDev`：`indi`等值

```
<div id="updateFormDiv">
        <table class="tableForms">
            <tbody>
                <tr>
                    <th class="tableHeading"></th>
                    <th class="tableHeading">Name</th>
                    <th class="tableHeading">Host Name</th>
                    <th class="tableHeading">Description</th>
                    <th class="tableHeading">Type</th>
                    <th class="tableHeading">Last Update Time</th>
                </tr>
                <tr>
                    <td><input type="radio" name="CFGID" id="CFGID" value="11579"></input></td>
                    <td>testDev</td>
                    <td>indi</td>
                    <td>testDev</td>
                    <td>Development</td>
                    <td>Fri Apr 26 04:31:40 IST 2012</td>                           
                </tr>
            </tbody>
        </table>
    </div> 
```

所以在按钮点击我写了这个

```
alert($("input[name='CFGID']:checked").next().text()); 
```

但它让我空虚。请帮我获取每个值。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:55:56.987

尝试这样的事情；

```
$(document).on('change', ':radio[name="CFGID"]', function () {
    var arOfVals = $(this).parent().nextAll().map(function () {
        return $(this).text();
    }).get();
}); 
```

`arOfValues`然后将是一个数组，例如`['testDev', 'indi', 'testDev', 'Development', 'Fri Apr 26 04:31:40 IST 2012']`（即该行剩余列中的文本）

您的选择器不起作用，因为`<td>`包含文本的 ' 是输入*父*`next()`级上的元素，而不是本身（没有兄弟姐妹）。*`input``input`*

 *请注意如何`$(this)`在事件处理程序内部使用来引用所选元素，而不是`$("input[name='CFGID']:checked")`. 另请参阅我如何通过 使用事件委托[`on()`](http://api.jquery.com/on)，因为将同一事件绑定到多个元素是不好的做法。

阅读[`on()`](http://api.jquery.com/on), [`parent()`](http://api.jquery.com/parent), [`nextAll()`](http://api.jquery.com/nextAll),[`map()`](http://api.jquery.com/map)并[`get()`](http://api.jquery.com/get)查看它们的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:57:57.027

试试这个：

```
 var texts = [];

 $("input[id='createRad']:checked").siblings("td").each(function(i, v){
     texts[i] = $(this).text()        
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:04:02.460

```
$("input[name='CFGID']").on('change', function() {
    console.log($(this).parent().nextAll('td').text());
}); 
```*

# javascript - jQuery 添加选项卡创建额外的跨度

> ID：10450238
> 
> 赞同：2
> 
> 时间：2012-05-04T13:53:00.277
> 
> 标签：javascript, jquery, tabs

我有一个使用 jquery 的简单选项卡设置。

我使用以下函数创建一个额外的 jQuery 选项卡并将其插入到我喜欢的位置

```
$('#tabs').tabs('add', "ElementId", "Tab Text", intPosition); 
```

可以在这里看到购买。

[http://jsfiddle.net/qKBUu/88/](http://jsfiddle.net/qKBUu/88/)

主题有助于清楚地显示作为选项卡文本周围的额外跨度插入的最新选项卡

```
<li class="ui-state-default ui-corner-top">
    <a href="#ui-tabs-2">
        <span>Delivery 66</span>
    </a>
</li> 
```

任何人都可以解释为什么它在添加选项卡时添加跨度而不是在创建初始时添加跨度？

我相信这可能是 jQuery 的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:58:18.747

添加新选项卡时，该跨度是默认值的一部分。查看“tabTemplate”选项 - [http://jqueryui.com/demos/tabs/#option-tabTemplate](http://jqueryui.com/demos/tabs/#option-tabTemplate)。

如果要更改 tabTemplate，只需添加您自己的：

```
$('.selector').tabs({ tabTemplate: '<li><a href="#{href}">#{label}</a></li>' }); 
```

更新小提琴：http: [//jsfiddle.net/qKBUu/89/](http://jsfiddle.net/qKBUu/89/)

# java - Spring dataSource bean定义失败

> ID：10450240
> 
> 赞同：4
> 
> 时间：2012-05-04T13:53:07.050
> 
> 标签：java, spring, jdbc, datasource

我正在尝试使用 Spring 的 JdbcTemplate 在部署在 Tomcat 中并连接到 Postgres 的 Java Web 服务中简化我的 DAO。

我正在关注[Spring 的文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)，我正在尝试在应用程序上下文文件中配置一个 DataSource，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.manta" />

  <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${driverClassName}"/>
    <property name="url" value="${url}"/>
    <property name="username" value="${username}"/>
    <property name="password" value="${password}"/>
  </bean>

  <context:property-placeholder location="/WEB-INF/db.properties"/>

</beans> 
```

`db.properties`我在适当的地方有以下文件：

```
driverClassName=org.postgresql.Driver 
url=jdbc:postgresql://pgprod.ecnext.com:5432/manta
username=my_user_name
password=my_password 
```

当我尝试部署时，我发现以下堆栈跟踪`catalina.out`：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: 
Invalid bean definition with name 'dataSource' defined in ServletContext resource [/WEB-INF/context.xml]: 
Could not resolve placeholder 'driverClassName'
    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:209)
    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:220)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:84)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:656)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:842)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

不是问题的事情：

1.  该`db.properties`文件位于正确的位置。
2.  中的凭据`db.properties`是正确的，可以手动读取以连接到数据库。
3.  ContextLoaderListener 正在找到该`context.xml`文件，并且我能够注入其他依赖项。

对于可能导致这种情况的任何建议，我将不胜感激。我正在使用 Spring 3.1.1 和 Tomcat 7.0.26。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:05:58.853

您的项目中可能有多个`<context:property-placeholder ... >`，每个都创建底层对象的新实例，并且是通往痛苦的大门......

我更喜欢使用以下声明来加载属性文件：

```
<bean id="propertyConfigurer"     class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:db-config.properties</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T14:03:59.750

从您的位置（即）删除前导斜杠`location="WEB-INF/db.properties"`或更好地将其更改为类路径：

```
location="classpath:db.properties" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:02:20.370

`use org.springframework.jdbc.datasource.DriverManagerDataSource` 代替`org.apache.commons.dbcp.BasicDataSource`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-20T09:43:11.853

确保您有正确的 maven 依赖项，Sping-core 和 Spring-context 依赖项应该存在于您的项目中。

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version></version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version></version>
        </dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-16T13:32:39.547

在您的应用程序上下文中使用**ignore-unresolvable="true" 。**默认值为“fales”，您需要将其设置为“true”，以便将密钥传递给上下文中尚未访问的任何其他人。

```
<context:property-placeholder ignore-unresolvable="true" location="/WEB-INF/application.properties" />
<context:property-placeholder ignore-unresolvable="true" location="/WEB-INF/dbcp.properties"/> 
```

# mysql - 整合多个查询条件

> ID：10450246
> 
> 赞同：4
> 
> 时间：2012-05-04T13:53:45.020
> 
> 标签：mysql

我需要单个查询来在 mysql 中执行此功能

```
select * from 'users' where user_name like 'account' 
```

如果没有名称`account`存在的用户，那么我必须使用第二个查询，否则我可以使用第一个查询。

```
select * from 'users' where user_name like 'manager' 
```

有没有办法将其优化为单个查询？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:03:10.083

像这样的东西应该工作

```
Select IF ((Select count(*) from 'users' where user_name like 'account')>0,
select * from 'users' where user_name like 'account',
select * from 'users' where user_name like 'manager') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:54:07.860

```
SELECT m.*
  FROM users m
  LEFT JOIN users a ON a.user_name = 'account'
 WHERE m.user_name = coalesce(a.user_name, 'manager'); 
```

如果不是唯一的，它将无法正常工作`user_name`，我认为它应该是，实际上。这将有助于了解如何定义表以正确设计查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:00:31.690

只是一个想法，你怎么做

```
select * 
from 'users' 
where user_name like 'account' or  user_name like 'manager' 
order by   user_name 
```

比检查第一个帐户，如果它是 ='account'，则从数据集中删除所有经理。如果它是经理，那么你有你的数据集

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T14:01:18.120

我认为你应该能够`IF`在你的`WHERE`子句中使用一个语句：

```
SELECT * FROM `users` 
WHERE user_name LIKE 
IF((SELECT COUNT(*) 
    FROM `users` 
    WHERE name = 'account'
   ) > 0,'account','manager'); 
```

# jquery - 使用jquery提交表单时，修复输入类型提交参数在发布数据中不可用的正确方法

> ID：10450254
> 
> 赞同：0
> 
> 时间：2012-05-04T13:54:10.137
> 
> 标签：jquery, forms, form-submit

**简而言之 -** 当用户单击表单的提交按钮时，根据某些条件，我们将其称为案例 A，我进行了一些 AJAX 调用，读取响应并根据响应向用户显示确认对话框，并且然后当用户单击是时，我使用`.submit()`（不是 AJAX 提交）提交表单。在另一种情况下，我们称之为案例 B，我允许提交表单。问题是，在案例 A 中，提交输入参数本身不存在于`$_REQUEST`服务器端的参数中。我们在服务器端代码中进行了一些检查`$_REQUEST['submitform']`。

为什么会这样？我在[这个问题](https://stackoverflow.com/q/4935850/351903)中检查了该`.serialize()`方法不会按照设计序列化提交类型的输入。这种情况是否过于相关和设计？我没有做任何序列化。

解决此问题的正确方法是什么？ *注意 -*在我的情况下，我需要同时提交正常的表单提交和 jquery 表单提交。

**细节 -**

我有这样的表格-

```
<form class="clearfix" enctype="multipart/form-data" action="/banner/addbanner/-1/2756?name=23 apr adv traffic management test&amp;action=add" method="post" id="frmBanners" name="frmBanners">
   <textarea id="comments" rows="3" cols="47" name="data[BannerInfo][comments]"></textarea>
   <input type="text" id="description" maxlength="255" size="50" value="" name="data[BannerInfo][description]">

    <input type="submit" class="stdButton save" value="Submit" name="submitform" id="submitform">
</form> 
```

还有一些 javascript -

```
$("input#submitform").click(preValidateUrls);

function preValidateUrls()
{

   if(Case A, a particular condition and URLs are not empty)
   {//Ajax call to validate some URLs

      $.ajax({ ...

      success: function(res)
      {
         if(validation fails)
         {
            if(confirm(msg))
            { //Display a javascript confirm dialogue, if user still wants to continue 
                $("form#frmBanners").submit();
            }
         }
      }
     }); //end of $.ajax

      return false; //do not allow form to get submitted before ajax response has not been received.

   }
   else
   {//case B, let the form submit normally
        return true;
   }
} 
```

在服务器端代码中 -

```
if(isset($_REQUEST['submitform']) && $_REQUEST['submitform']=='Submit')
{
   //form submission detection - does not work in case A.
} 
```

问题是表单提交检测在使用jquery发生表单提交的情况下不起作用，即$_REQUEST中不存在参数“submitform”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:00:27.017

作为一种快速简便的修复方法，您可以手动将“&submitform=submit”附加到 .serialize() 输出。这应该够了吧。

# c# - 使用 ffmpeg 在 c# asp.net 中合并视频

> ID：10450255
> 
> 赞同：2
> 
> 时间：2012-05-04T13:54:12.307
> 
> 标签：c#, asp.net, merge, ffmpeg

是否可以在 ffmpeg 的帮助下通过 c#asp.net 合并两个视频。在 ffmpeg 文档中，他们给了我们 cat 命令。但它不会在 asp.net 中工作。我以为它只适用于linux。

```
cat intermediate1.mpg intermediate2.mpg > intermediate_all.mpg 
```

asp.net 执行此命令但没有输出。帮我。

```
namespace demo
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Button2_Click(object sender, EventArgs e)
        {
            string strFile = "cars1.flv";
            MergeFiles(strFile);
        }

        public void MergeFiles(string strFile)
        {
            string strParam;
            string Path_FFMPEG = Server.MapPath("~/ffmpeg/bin/ffmpeg.exe");

            //Converting a video into mp4 format
            string strOrginal = Server.MapPath("~/Videos/");
            strOrginal = strOrginal + strFile;
            string strConvert = Server.MapPath("~/Videos/ConvertedFiles/");
            string strExtn = Path.GetExtension(strOrginal);
            if (strExtn != ".mp4")
            {
                strConvert = strConvert + strFile.Replace(strExtn, ".mp4");
                strParam  = "-i " + strOrginal + " " + strConvert;
                //strParam = "-i " + strOrginal + " -same_quant " + strConvert;
                process(Path_FFMPEG, strParam);
            }

            //Merging two videos               
            String video1 = Server.MapPath("~/Videos/Cars1.mp4");
            String video2 = Server.MapPath("~/Videos/ConvertedFiles/Cars2.mp4");
            String strResult = Server.MapPath("~/Videos/ConvertedFiles/Merge.mp4");
            //strParam = "-loop_input -shortest -y -i " + video1 + " -i " + video2 + " -acodec copy -vcodec mjpeg " + strResult;

            strParam = " -i " + video1 + " -i " + video2 + " -acodec copy -vcodec mjpeg " + strResult;

            process(Path_FFMPEG, strParam);
        }

        public void process(string Path_FFMPEG, string strParam)
        {
            try
            {
                Process ffmpeg = new Process();
                ProcessStartInfo ffmpeg_StartInfo = new ProcessStartInfo(Path_FFMPEG, strParam);
                ffmpeg_StartInfo.UseShellExecute = false;
                ffmpeg_StartInfo.RedirectStandardError = true;
                ffmpeg_StartInfo.RedirectStandardOutput = true;
                ffmpeg.StartInfo = ffmpeg_StartInfo;
                ffmpeg_StartInfo.CreateNoWindow = true;
                ffmpeg.EnableRaisingEvents = true;
                ffmpeg.Start();
                ffmpeg.WaitForExit();
                ffmpeg.Close();
                ffmpeg.Dispose();
                ffmpeg = null;
            }
            catch (Exception ex)
            {

            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:25:37.427

最后我找到了我自己问题的答案。

以下方法解决了我的问题。

```
public void MergeFiles(string strFile)
        {
            Process p = new Process();
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.CreateNoWindow = true;
            p.StartInfo.FileName = Server.MapPath("~/app.bat");
            p.Start();
            p.WaitForExit();
            p.Dispose();
        } 
```

**应用程序.bat**

app.bat 包含以下代码。

```
copy e:\cars1.mpg /b + e:\cars2.mpg /b e:\output.mpg /b 
```

注意：这仅适用于 Windows。这就是“cat”命令不起作用的原因。我们使用复制命令代替“cat”命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-10T06:43:31.560

创建应用程序。蝙蝠文件是文件大小的两倍，但它以单个文件的形式播放。仍然没有解决问题。您应该尝试 ffmpeg concat 命令方法，在该方法中您需要创建一个包含文件名的文本文件，并且该文件应位于 mp4 文件所在的同一文件夹中。下面的代码将帮助你我面临同样的问题。我的任务是合并两个 mp4 文件，当我从命令提示符下合并时成功合并。但是当我通过asp进行时卡住了。网。我的问题通过给定正确的路径解决并从命令中删除 ffmpeg。对于 E.G（ffmepg - f concat TO - f concat）

Dim _ffmpeg As String = "D:\Develop\Experiment\mergermp4Vb\mergermp4Vb\bin\ffmpeg.exe" Dim params = "-f concat -i D:\Develop\Experiment\mergermp4Vb\mergermp4Vb\Videos\mylist2.txt -c复制 D:\Develop\Experiment\mergermp4Vb\mergermp4Vb\Videos\0104.mp4" Dim _FFmpegProcessPropertys As New ProcessStartInfo _FFmpegProcessPropertys.FileName = _ffmpeg

```
_FFmpegProcessPropertys.Arguments = params
_FFmpegProcessPropertys.UseShellExecute = False
_FFmpegProcessPropertys.RedirectStandardOutput = True
_FFmpegProcessPropertys.RedirectStandardError = True
_FFmpegProcessPropertys.CreateNoWindow = True
Dim FFmpegProcess = Process.Start(_FFmpegProcessPropertys) 
```

# c# - 为什么这个 C# ThreadPool 有时会丢弃工作项？

> ID：10450256
> 
> 赞同：2
> 
> 时间：2012-05-04T13:54:13.740
> 
> 标签：c#, .net, threadpool

```
class Program
{
    private int x = 0;
    static void Main(string[] args)
    {

        Program p = new Program();
        int a, b;
        ThreadPool.GetMaxThreads(out a, out b);
        Console.WriteLine("{0} - {1}", a, b);
        for (int y = 0; y < 20; y++)
        {
            WaitCallback cb = new WaitCallback(DoSomething);

            ThreadPool.QueueUserWorkItem(cb, y);
        }
    }

    public static void DoSomething(object state)
    {
        Console.WriteLine(state);
    }
} 
```

大多数时候它会打印出 20 个项目。但是，有时它只打印一些。这是为什么？我来自 Java 背景，想知道我是否对 .NET 线程池的工作方式做出了一些错误的假设。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:57:07.823

ThreadPool 没问题，它不会丢弃任何东西。

您的程序很可能在输出完成之前关闭。
ThreadPool 使用后台线程，它们在进程退出时简单地中止。

所以添加一些等待的东西，比如`Console.ReadLine()`在 Main 的末尾，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:11:28.487

在所有线程完成各自的任务之前，没有什么可以阻止程序继续运行。在你的循环之后，你会想要阻塞主线程，直到所有的回调都被触发。

# c# - 从实体框架中的 POCO 类中删除导航属性

> ID：10450257
> 
> 赞同：5
> 
> 时间：2012-05-04T13:54:13.883
> 
> 标签：c#, sql, entity-framework, ado.net, foreign-keys

我正在使用生成的 POCO 类和实体框架。

为了使代码不那么复杂，我试图从代码中删除所有导航属性，同时仍将外键约束保留在数据库中（导航属性对我们弊大于利）。

如果我从 POCO 类中手动删除它们，我会收到以下错误

> 实体类型 UserEntity 不是当前上下文模型的一部分

如果我尝试从 .edmx 文件中删除它们，我会收到以下错误：

> 错误 3 错误 3015：从第 479、562 行开始映射片段时出现问题：从表 StorageContract (OwnerUserID) 到表 User (ID) 的外键约束“fk_StorageContracts_User1”:: 映射不足：外键必须映射到某些 AssociationSet 或 EntitySets 参与在概念方面的外键关联中。

有什么方法可以在不删除相应 FK 的情况下从 POCO 类中删除导航属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:46:15.470

我知道这是旧的，但是，由于仍然没有答案，我想我会试一试：

我仍在使用 EF 4.0，但是，按照您提到的示例，您有一个 xxxModel.tt。如果您愿意调整它，您可以找到它生成导航属性的位置并将它们更改为简单的自动属性。我有一个类似的项目，我像这样生成它们：

```
public List<NavDataX> NavDataXs
{
    get; set;
} 
```

现在，它们仍然存在，但在您明确设置它们之前它们是空的。这样做，我没有弄乱EDMX，也没有遇到你提到的两个错误。

# mysql - 优化sql查询

> ID：10450258
> 
> 赞同：0
> 
> 时间：2012-05-04T13:54:14.907
> 
> 标签：mysql, sql, indexing

我正在尝试优化现在需要大约 20 秒才能执行的 sql 查询。

这是我的表格的结构。

```
last_login

id | ip_address |when
1    2130706433 2012-05-04 12:00:36 
```

和

```
country_by_ip

ip_from | ip_to | country
16843008 | 16843263 | CN 
```

这是我使用的查询：

```
SELECT 
ll.ip_address,
ll.when,
cbi.country
FROM last_login ll
LEFT JOIN `country_by_ip` cbi on ll.ip_address BETWEEN  cbi.ip_from AND cbi.ip_to 
```

字段 ip_from 和 ip_to 已编入索引。

你能推荐我如何加快这个查询吗？

//编辑

```
CREATE TABLE `last_login` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ip_address` int(11) unsigned NOT NULL,
  `when` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=32 DEFAULT CHARSET=utf8

CREATE TABLE `country_by_ip` (
  `ip_from` int(20) unsigned NOT NULL,
  `ip_to` int(20) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  KEY `ip_from` (`ip_from`),
  KEY `ip_to` (`ip_to`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

![解释扩展](../Images/fd085fbf5990e881fb7da2ab1f8f1846.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:46:06.113

怎么样：

```
SELECT 
ll.ip_address,
ll.when,
cbi.country
FROM last_login ll
LEFT JOIN `country_by_ip` cbi on ll.ip_address > cbi.ip_from 
WHERE ll.ip_address < cbi.ip_to 
```

但是，我完全同意@Romain，将数据库模式更改为更好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:20:55.057

通过将 country_by_ip 范围拆分为 2 个单独的索引，您不会给自己带来任何好处 - 将它们更改为 KEY `ip_range`( `ip_from`, `ip_to`)。

# ios - iOS PhoneGap 1.7.0 + 条码扫描插件问题

> ID：10450259
> 
> 赞同：8
> 
> 时间：2012-05-04T13:54:16.420
> 
> 标签：ios, cordova, barcode-scanner, phonegap-plugins

有没有人设法让 PhoneGap 的 BarcodeScanning 插件在 PhoneGap 1.7.0 上工作？

条码扫描插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)

问题是插件在添加时没有设置..

当我调用“alert(window.plugins.barcodeScanner);”时，我得到以下信息

“不明确的”

我正在尝试隔离插件无法添加的点，一旦我知道更多信息就会更新问题..

提前感谢任何可以提供帮助的人...

* * *

更新的答案如下：

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T12:58:13.873

太好了，

该插件现在又可以使用了。
一个问题是插件的文档仍然说 key in`Cordova.plist`应该是`org.apache.cordova.barcodeScanner`但现在应该是显而易见的事情`com.cordova.barcodeScanner`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T11:15:05.767

好的，经过一番摸索，并以 twitter PhoneGap 插件为例，我设法让它工作了！！

我将此作为我的方法的基础，因为 twitter 上可爱的人更新了他们的插件以使用 PhoneGap 1.7.0，感谢上帝！

**Twitter PhoneGap 插件：** [https ://github.com/phonegap/phonegap-plugins/blob/master/iOS/Twitter/js/TwitterPlugin.js](https://github.com/phonegap/phonegap-plugins/blob/master/iOS/Twitter/js/TwitterPlugin.js)

**这是更新的barcodescanner.js 代码：**

```
var BarcodeScanner = function(){};

BarcodeScanner.prototype.isBarcodeScannerAvailable = function(response){
    cordova.exec(response, null, "BarcodeScannerPlugin", "isBarcodeScannerAvailable", []);
};

BarcodeScanner.prototype.isBarcodeScannerSetup = function(response){
    cordova.exec(response, null, "BarcodeScannerPlugin", "isBarcodeScannerSetup", []);
};

//-------------------------------------------------------------------
BarcodeScanner.Encode = {
TEXT_TYPE:     "TEXT_TYPE",
EMAIL_TYPE:    "EMAIL_TYPE",
PHONE_TYPE:    "PHONE_TYPE",
SMS_TYPE:      "SMS_TYPE",
CONTACT_TYPE:  "CONTACT_TYPE",
LOCATION_TYPE: "LOCATION_TYPE"
}

//-------------------------------------------------------------------
BarcodeScanner.prototype.scan = function(success, fail, options) {
    function successWrapper(result) {
        result.cancelled = (result.cancelled == 1)
        success.call(null, result)
    }

    if (!fail) { fail = function() {}}

    if (typeof fail != "function")  {
        console.log("BarcodeScanner.scan failure: failure parameter not a function")
        return
    }

    if (typeof success != "function") {
        fail("success callback parameter must be a function")
        return
    }

    if ( null == options ) 
        options = []

        return PhoneGap.exec(successWrapper, fail, "com.cordova.barcodeScanner", "scan", options)
        }

//-------------------------------------------------------------------
BarcodeScanner.prototype.encode = function(type, data, success, fail, options) {
    if (!fail) { fail = function() {}}

    if (typeof fail != "function")  {
        console.log("BarcodeScanner.scan failure: failure parameter not a function")
        return
    }

    if (typeof success != "function") {
        fail("success callback parameter must be a function")
        return
    }

    return PhoneGap.exec(success, fail, "com.cordova.barcodeScanner", "encode", [{type: type, data: data, options: options}])
}

cordova.addConstructor(function() {

                       /* shim to work in 1.5 and 1.6  */
                       if (!window.Cordova) {
                       window.Cordova = cordova;
                       };

                       if(!window.plugins) window.plugins = {};
                       window.plugins.barcodeScanner = new BarcodeScanner();
                       }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T20:12:07.093

我刚刚将barcodescanner 添加到cordova 2.3 - 这很简单

复制必要的文件后，您只需将以下行添加到 config.xml

```
<plugin name="org.apache.cordova.barcodeScanner" value="CDVBarcodeScanner" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T16:04:49.783

如果这对任何人都有帮助： [https ://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS](https://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS)

具体来说：

安装了插件（在少数几个路径中），但保留了一个有效的。实现了一个基本的 JS 扫描器代码来演示功能：加载时自动运行，错误时自动重新加载，成功/失败/取消警报。

注意：barcodescanner.js 和 index.js 上的注释都提到了我对定义/要求对象路径的自定义。经过几次排列后，我无法让演示/示例路径正常工作。

# jquery - 使用 jquery .load 获取内容时覆盖

> ID：10450269
> 
> 赞同：3
> 
> 时间：2012-05-04T13:55:10.990
> 
> 标签：jquery, jquery-load, progressive-enhancement

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:03:04.843

我认为您正在寻找的是 e.stopPropagation 或 e.preventDefault。这将阻止事件冒泡，即单击锚点的动作，因为您正在使用 js 应用事件。如果用户未启用 js，则代码将不会运行，因此该操作将回退到锚点默认行为。

```
$("#show-services").click(function(e){
    e.preventDefault;
    $(".content").load("our_service.html .content");
    return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:03:24.687

如果您要在页面上有多个以这种方式工作的链接，我建议给它们一个特定的类名，这样您就可以共同定位它们：

```
$("nav").on("click", ".asyncLoad", function(event){
  event.preventDefault();
  $(".content").load( event.target.href + ' .content' );
}); 
```

这假设链接都在一个`<nav>`元素内：

```
<nav>
  <ul>
    <li><a class="asyncLoad" href="home.html">Home</a></li>
    <li><a class="asyncLoad" href="our_services.html">Our Services</a></li>
    <li><a class="asyncLoad" href="contact_us.html">Contact us</a></li>
  </ul>
</nav> 
```

# c# - MS Office 配色方案不适用于 Outlook 插件中的自定义表单

> ID：10450270
> 
> 赞同：2
> 
> 时间：2012-05-04T13:55:13.397
> 
> 标签：c#, winforms, ms-office

我正在开发一个可以显示自定义表单的 Outlook 插件。如果我通过转到“工具”>“选项”>“邮件格式”>“编辑器选项”来更改 Outlook 2007 的配色方案并更改颜色，它将适用于 Outlook 中的所有内容，但我的自定义表单除外。

如何以编程方式确定 Office 的配色方案并将其应用于我的表单？

# php - 不小于零 - 将小于零的变量设为零

> ID：10450278
> 
> 赞同：2
> 
> 时间：2012-05-04T13:55:35.007
> 
> 标签：php, zero

如何使变量不小于零？像：

```
$var=(($add-$substract) || 0); 
```

这适用于 JavaScript，但不适用于 PHP。有人能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T13:57:17.393

至于你关心整数，我觉得[`max`](http://php.net/max)很方便：

```
$var = max(0, $add-$substract); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T13:59:17.660

您可以使用三元运算符

```
$var = ($add-$subtract)>0?($add-$subtract):0; 
```

# asp.net - 通过点击浏览器后退按钮，防止（已注销）用户查看登录的成员 asp.net 网站页面

> ID：10450280
> 
> 赞同：3
> 
> 时间：2012-05-04T13:55:38.777
> 
> 标签：asp.net, authentication, webforms, web, forms-authentication

**设想：**

1.  用户“a”登录网站并从图书馆计算机访问会员目录页面，
2.  用户“a”退出，浏览器保持打开状态。
3.  用户“b”开始使用同一台计算机，点击返回按钮查看用户“a”的会员页面和信息
4.  用户“b”不能在页面上做任何事情，只能查看（如果他们点击刷新将被重定向到登录，例如。用户“b”能够查看所有 a 的数据是一个安全隐患/错误。

**注销时的当前代码：**

```
Session.Contents.RemoveAll();
FormsAuthentication.SignOut();
Session.Abandon();
Response.Redirect("~/LogOff.aspx", false); 
```

那么，我怎样才能阻止他们只是回击浏览器以“仅查看”他们不再经过身份验证才能查看的页面。

我了解有一种方法可以关闭网站的浏览器缓存

EG：[从 ASP.NET 禁用所有浏览器的浏览器缓存](https://stackoverflow.com/questions/914027/disabling-browser-caching-for-all-browsers-from-asp-net)

但是这会干扰/代价高昂，因为我有部分回发的更新面板？

我所描述的问题还有其他选择吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:41:27.830

我知道一个更原始的方法。您应该在所有页面的页面加载中检查激活用户，如果当前用户不是激活用户，您应该将他/她重定向到 logof.aspx。这不是最好的方法，但它曾经有效。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:09:25.153

ok Session[""] != null 很重要，看看那是 null 还是 no。但由于没有任何 page_Load 事件，所以这是在母版页/内容持有者页面上禁用缓存的解决方案，页面不会存储在缓存中，并且在按下后退按钮时，它将带您进入登录屏幕，如果不是登录旅馆

将这些标签复制到 head 部分下

```
<meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" /> 
```

并将其复制到文件后面的代码中。

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
    Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);
    Response.Cache.SetNoStore(); 
```

你会很高兴的。

# android - Android：以编程方式将控件重新定位到另一个控件下方

> ID：10450285
> 
> 赞同：0
> 
> 时间：2012-05-04T13:56:08.323
> 
> 标签：android

我在xml中有以下内容。它用于相对布局：

```
 <TextView
    android:id="@+id/tv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>        
  <TextView
    android:id="@+id/tv2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/tv1"/>
  <TextView
    android:id="@+id/tv3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/tv2" /> 
```

在代码中，如果我删除第二个文本视图（tv2），我想将 tv3 重新定位在 tv1 下方。我无法找到使用 xml 执行此操作的方法，因此我想以编程方式执行此操作。我怎样才能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:01:41.227

我假设它与这里的问题非常相似->[如何从代码中动态设置 layout_weight 属性？](https://stackoverflow.com/questions/4641072/how-to-set-layout-weight-attribute-dynamically-from-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:27:07.583

Lint 报告嵌套权重的性能问题。不是很明显，但这是另一种解决方案。

```
 RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(
ViewGroup.LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

p.addRule(RelativeLayout.BELOW, R.id.tv1);
tv3.setLayoutParams(p); 

```

# iphone - 自定义 UITableViewCell 宽度在 tableview reloadData 上调整大小

> ID：10450286
> 
> 赞同：0
> 
> 时间：2012-05-04T13:56:14.130
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个 UITableView，我正在通过 UIView 动画块增加它的宽度。

```
[UIView animateWithDuration:.5 
                     animations:^{
                         CGRect frame = myTableView.frame;
                         frame.size.height += 190;
                         myTableViewView.frame = frame;
                         [[myTableViewView visibleCells] makeObjectsPerformSelector:@selector(setNeedsDisplay)];
                     } 
                     completion:nil]; 
```

一旦这个调用完成，我的子类 UITableViewCells 将被重绘并调用这个委托方法。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell        forRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGRect frame = cell.frame;
    frame.size.width = tableView.frame.size.height;
    cell.frame = frame;
} 
```

没有这个，我的 UITableViewCells 不会被绘制到 UITableView 的整个宽度。我遇到的问题是当我调用 [tableView reloadData] 时。重新加载数据正在调用上述 willDisplayCell 调用以设置正确的帧，但是当我查看 UITableViewCell setFrame 的堆栈跟踪时：正在从私有 UITableView 调用对我的所有单元格调用另一个调用：

```
 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] 
```

此调用将我所有可见 UITableViewCells 的框架设置为 UITableView 的原始和较小宽度。有谁知道如何防止这种情况发生，以便我的单元格保持表格视图的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:15:25.217

我认为最好的主意是不要用`UITableViewCell`宽度做魔术。

更好的解决方案是将子视图添加到单元格并更改该子视图的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T08:59:15.447

基本上你不能改变单元格本身的宽度，它最终总是等于表格的宽度。

您可以更改单元格的框架`contentView`，但这不是一个好习惯。

创建您自己的视图，将其添加到单元格中，然后更改其宽度`layoutSubviews`。

# r - 使用 plyr 并行

> ID：10450287
> 
> 赞同：1
> 
> 时间：2012-05-04T13:56:20.307
> 
> 标签：r, foreach, parallel-processing, plyr

我正在读取一个 XML 文件，并想尝试使用 foreach 和 doSNOW 提高性能，但是在使用 plyr 时遇到错误。我认为这可能是因为我错过了将功能和包发送给工人的方法。

```
library(foreach)  
library(doSNOW)  
cl <- makeCluster(4)  
registerDoSNOW(makeCluster(4, type = "SOCK"))

> getDoParWorkers()  
[1] 4  
> getDoParName()  
[1] "doSNOW"  
> getDoParVersion()  
[1] "1.0.5"

namelist = list()  
out1 <- foreach(i = 1:xmlSize(root[[3]])) %dopar% {  
     namelist[[i]] <- llply(xmlToList(root[[3]][[i]][[2]]), 
                        data.frame, .parallel = TRUE)
}

out2 <- t(as.vector(as.data.frame(namelist))) 
```

生成错误：

```
Error in { : task 1 failed - "could not find function "llply"" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:06:44.247

`?foreach`然后看`.packages`论据

# java - 会话属性是 Web 应用程序的本地属性吗？

> ID：10450288
> 
> 赞同：1
> 
> 时间：2012-05-04T13:56:24.057
> 
> 标签：java, session, servlets

当我在我的 jboss 中部署多个 Web 应用程序时，它们似乎都共享同一个会话，因为只`JSESSIONID`创建了一个具有路径 - / 的 cookie，这意味着它可以从域内的任何地方访问。但是，如果您`session.setAttribute()`在一个 Web 应用程序中使用，该属性是否可用于其他应用程序（当他们使用 时`session.getAttribute()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:01:01.363

据我所知，每个WAR/EAR模块默认都有自己的会话，所以答案是肯定的，会话属性是本地的，不会在同域的其他Web应用程序中可用（参见[不同的会话共享jboss 中可能的战争模块？](https://stackoverflow.com/questions/9204585/session-share-between-different-war-modules-possible-in-jboss)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:01:50.437

session.setAttribute() 仅适用于您设置其属性的会话。您在每个会话上看到 JSESSIONID cookie 的原因是每个 Web 应用程序都单独设置它（是弹簧安全性吗？）。

# bash - 键入“第一个命令”时的 Bash 可编程完成

> ID：10450289
> 
> 赞同：6
> 
> 时间：2012-05-04T13:56:34.343
> 
> 标签：bash, command, bash-completion

有没有办法控制在 bash4 命令提示符上键入的第一个命令的完成？

我可以用完整的 -E 控制“空行”的完成，但是只要键入一些字符，bash（或可能是 readline）就会给我 PATH 中的所有文件名、内置命令（if、then、else...）和函数完成尝试 (TAB)。

我能够通过在 PROMPT_COMMAND 中取消设置 PATH 并通过绑定函数以捕获 DEBUG 来恢复它来避免 PATH 条目，但是摆脱 bash bultin 命令完成没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T13:15:14.033

这是 bash 的可编程完成设施设计中的一个名副其实的弱点。即使是“默认”命令补全`-D`也仅对空行上的命令生效（前提是没有`complete -E`指定）。诸如`complete -I`（对于不完整输入的命令）之类的东西丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T23:10:09.693

从[Bash](https://tiswww.case.edu/php/chet/bash/bashtop.html) 5.0 开始，内置的 bash`complete`支持以下`-I`选项：

> -I 选项指示其他提供的选项和操作应适用于在该行的初始非赋值字上或在命令分隔符（如“;”）之后的完成。或“|”，通常是命令名称完成。

我能够毫无问题地在 ubuntu docker 映像上[下载和安装 bash 5.1 ，并使用它来模拟工具环境 shell。](https://tiswww.case.edu/php/chet/bash/INSTALL)Bash 5[应该主要是一个替代品](https://git.savannah.gnu.org/cgit/bash.git/diff/NEWS?id=d233b485e83c3a784b803fb894280773f16f2deb)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-21T23:56:08.540

bash 完成存储在 /etc/bash_completion.d/ 如果您有 root 访问权限，那么您可以在那里编辑/删除文件。

如果您想在用户级别控制事物，那么您可以创建和编辑 ~/.inputrc。看看 /etc/inputrc，它会让你知道从哪里开始。

~/.inputrc 覆盖 /etc/inputrc 中的任何内容，因此您可以更改 bash_completion 查找完成文件的位置。您可以创建一个本地完成目录，并且只在其中包含您想要完成的项目。我相信您也可以消除 bash 内置函数。

还有一些关于 bash 在线完成的非常好的教程。 [这里](http://www.debian-administration.org/articles/316) [这里](http://linux.byexamples.com/archives/275/cli-magic-programable-bash-completion/)

# c# - 通知图标鼠标移动的位置为空

> ID：10450291
> 
> 赞同：0
> 
> 时间：2012-05-04T13:56:40.397
> 
> 标签：c#, system-tray, notifyicon

我在 .NET Framework 3.5 中使用 C# 中的通知图标控件我的目标是检测鼠标何时悬停在我的应用程序的托盘图标上。问题是此版本没有 mouseenter、mouseleave 或 mousehover 事件。当我尝试使用 mousemove 和轮询线程来检测鼠标是否悬停在图标上时。它返回 0 的 ax 和 y 位置。这个不准确的位置是否有原因，是否有另一种方法来检测通知图标控件上的悬停？

# meteor - 使用 Meteor 进行就地编辑：无法读取 null 的属性“parentNode”

> ID：10450293
> 
> 赞同：2
> 
> 时间：2012-05-04T13:56:47.667
> 
> 标签：meteor

`network`我为模型设置了就地编辑。有两个输入字段，用于模型的`title`和`description`。当用户单击标题时，它会切换 的`<h2>`标签`<input>`，就像在规范的 Todos 示例中一样。

我正在向相关模板添加事件，如下所示：

```
Template.network_edit.events = {}

Template.network_edit.events['click #network-description'] = -> 
    Session.set('editing_network_description',true)
    Meteor.flush()
    focus_field_by_id('network-description-input')

Template.network_edit.events['click #network-title'] = -> 
    Session.set('editing_network_title',true)
    Meteor.flush()
    focus_field_by_id('network-title-input') 
```

`focus_field_by_id`功能是，

```
 var focus_field_by_id = function (id) {
  var input = document.getElementById(id);
  if (input) {
    input.focus();
    input.select();
  }
}; 
```

一切都按预期工作，但是当我单击 时`#network-description`，我在控制台中看到一个错误：

```
Uncaught TypeError: Cannot read property 'parentNode' of null 
```

在第 600 行抛出`liveui.js`。当我点击 时`#network-title`，我没有收到这样的错误。

如果我颠倒事件的顺序，将`#network-title`事件放在第一位，然后是`network-description`第二位，则当我点击时会收到错误`#network-title`消息。通常，添加的第一个事件会引发此错误，但不会引发后续事件。

正如我所说，一切似乎都正常工作（输入出现，获得焦点等），但错误令人不安，我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:12:38.040

啊哈，我能够重现这个。

这是在事件处理期间 DOM 发生突变时发生的错误。调用 后`Meteor.flush()`，事件的原始目标不再在模板中。Meteor 的事件处理代码阻塞，可能是在检查第二个处理程序是否适用时，因此第一个处理程序似乎中断了。这个错误是无害的，你没有做错任何事。

正在为下一个版本重写事件处理，并且我对新代码已经通过的这种情况进行了回归测试。

感谢您的报告和您的耐心等待。

# c++ - 返回向量的奇怪行为

> ID：10450294
> 
> 赞同：2
> 
> 时间：2012-05-04T13:56:47.823
> 
> 标签：c++, vector, return

我有以下问题：

```
#include <vector>
#include <iostream>
using namespace std;

class Mat {
public:

        typedef vector<float>::size_type size_type;

        Mat (size_type k, size_type m)
        :data_(k*m){}

        inline vector<float> data() const {return data_;}

        vector<float> data_;
};

int main(){

    Mat f (6, 10);

    cout << f.data().size() << " " << f.data().end() - f.data().begin();

} 
```

输出为 60 122。

我以为整个向量 data_ 一遍又一遍地移动，但是为什么在这个操作之后 begin() end() 无效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:59:59.080

每次调用时，您都在创建向量的临时副本`data()`。然后，您正在对指向不同副本的迭代器进行迭代器算术。

将签名更改`data()`为`const vector<float>& data()const;`

# nhibernate - 配置 NHibernate hibernate.cfg.xml 文件以获得更多连接字符串

> ID：10450300
> 
> 赞同：2
> 
> 时间：2012-05-04T13:57:01.303
> 
> 标签：nhibernate, connection-string, hibernate.cfg.xml

我的客户要求从 ac# 应用程序从“CURRENT”数据库切换到 TEST 数据库或 DEV 数据库的可能性。一次只能激活一个。在菜单文件中，她选择 DEV 或 TEST 数据库。

如何配置 hibernate.cfg.xml 文件以获得更多连接字符串，例如 app.config。

## 

```
<name="CURRENT" connectionString='User Id=u1;Data Source=CURRENT;Password=...' />
<name="DEV" connectionString='User Id=u1;Data Source=DEV;Password=...' />
<name="TEST" connectionString='User Id=u1;Data Source=TEST;Password=...' /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T01:38:27.800

*更新：*现在可以在[NuGet](https://www.nuget.org/packages/NHibernate.XFactories/)和[GitHub 上使用](https://www.github.com/roydukkey/NHibernate-X-Factories/)

这是我一直想要的功能。它从来没有出现过，所以随着时间的推移，我创建了一个名为 NHibernate X-Factories 的扩展方法。您所要做的就是在一个 .cfg.xml 中创建多个会话工厂元素并命名它们。然后，您可以在配置 sessionFactory 时按名称调用它们。

**休眠.cfg.xml**

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2-x-factories">

    <session-factory name="Development">
        <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
        <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
        <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
        <property name="connection.connection_string">Server=dsql01;DataBase=dbDev;uid=nhDeveloper;pwd=pass1234</property>

        <property name="show_sql">true</property>

        <mapping assembly="DataLayer" />
    </session-factory>

    <session-factory name="Production">
        <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
        <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
        <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
        <property name="connection.connection_string">Server=psql02;DataBase=dbDev;uid=nhDeveloper;pwd=pass5678</property>

        <property name="show_sql">false</property>

        <mapping assembly="DataLayer" />
    </session-factory>

</hibernate-configuration> 
```

**C＃**

```
NHibernate.Cfg.Configuration config = new NHibernate.Cfg.Configuration();
config.Configure("~/nhibernate.cfg.xml", "Development").BuildSessionFactory(); 
```

[在https://www.github.com/roydukkey/NHibernate-X-Factories/](https://www.github.com/roydukkey/NHibernate-X-Factories/)上查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:12:23.263

我可以想到两种解决方法：

一种是将 NHibernate 配置放在 *.config 文件之外，然后使用 FileSystemWatcher 类监听这个外部文件。您可以动态更改文件内容。

另一种方法是同时拥有两个 NHibernate Configuration 对象，然后将其对应的 ISession 注入到您的 DAO / UnityOfWork / 不管

如果这只是用于开发/测试/生产数据库，我建议同时反对。最好有三个不同的环境，每个环境都有自己的 *.config 文件。

# php - 为什么将文本保存到文件时 \n\n 不换行？

> ID：10450304
> 
> 赞同：2
> 
> 时间：2012-05-04T13:57:07.813
> 
> 标签：php, file

我有这个将内容写入文本文件的函数：

```
function write($text){
  fwrite($this->fp, '#' . date('H:i d.m.Y') . ': ' . $text . "\n\n");
} 
```

每次调用它时，都会添加文本并调用新行。

但如果我做了这样的事情：

```
$text = 'some text \n\n Some more text.';
write($text) 
```

那么文本中的换行符不是“工作”。

这是为什么？我错过了什么？

这是我用来记录调试数据的整个函数：

```
 class logDebuggData {
    private $fp = NULL;

    function __construct($name='log', $dir=''){
      $this->fp = fopen(TEMPLATE_DIR.$name.'.txt', 'a+');
    }

    function write($text){
      fwrite($this->fp, '#' . date('H:i d.m.Y') . ': ' . $text . "\n\n");
    }

    function close(){
      if ($this->fp) {
        fclose($this->fp);
        $this->fp = NULL;
      }
    }

    function __destruct() {
      $this->close();
    }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:58:18.077

您需要使用双引号而不是单引号：

```
$text = "some text \n\n Some more text.";
        ^                              ^ 
```

# silverlight - Silverlight DataGrid 模板中的自定义 UserControl 绑定

> ID：10450306
> 
> 赞同：1
> 
> 时间：2012-05-04T13:57:12.227
> 
> 标签：silverlight, data-binding

我一直在努力解决问题。我希望能够输入日期和时间并将它们绑定到我的 ViewModel 中的单个 DateTime 对象。

我设法创建了一个结合了 DatePicker 和 TimeUpDown 控件的自定义控件。[我在我的博客](http://www.ronaldrosier.net/Blog/2012/05/04/a_custom_datetimepicker_usercontrol_in_silverlight_5)上用代码解释了实现。

虽然，如果用户控件只是在我的页面上，此解决方案非常有效，但最初的想法是将其添加到 DataGrid 的 CellEditingTemplate 中。
在调试过程中，我发现将 DatePicker 或 TimeUpDown 控件留在模板中时，根本不会触发属性更改事件。（这可能是一些事件冒泡问题吗？）。

我真的很感激围绕这个问题的任何想法。

# database - 在 C++ builder 中自定义 TDBNavigator 按钮

> ID：10450308
> 
> 赞同：-3
> 
> 时间：2012-05-04T13:57:18.080
> 
> 标签：database, delphi, c++builder

有没有办法[`TDBNavigator`](http://docwiki.embarcadero.com/Libraries/en/Vcl.DBCtrls.TDBNavigator)在 C++ builder 中为按钮添加标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:16:04.900

这将允许您为 c++ builder 中的每个按钮添加标题

```
char *btntext[11] = {"First","Prior","Next","Last","Insert","Delete","Edit","Post","Cancel","Refresh","Apply"};
for(int x = 0; x < nav->ComponentCount; ++x)
    {
    TNavButton* navbutton = dynamic_cast<TNavButton *>( nav->Components[ x ] );
    if( navbutton )
        {
        navbutton->Font->Name = "Arial";
        navbutton->Font->Size = 8;
        navbutton->Caption = btntext[x];
        navbutton->Spacing = 0;
        navbutton->Layout = blGlyphTop;
        }
    } 
```

![例子](../Images/ad7852c4e2bb213712c4eed1ddcea329.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:58:13.847

在这里你有一个完整的例子来说明如何做到这一点

[http://delphi.about.com/od/usedbvcl/l/aa090203a.htm](http://delphi.about.com/od/usedbvcl/l/aa090203a.htm)

它是用 Delphi 编写的，但代码可以很容易地适应 c++ builder。

# sql - 带有重复子条目的 SQL SUM - 最佳实践？

> ID：10450309
> 
> 赞同：1
> 
> 时间：2012-05-04T13:57:18.597
> 
> 标签：sql, sum, left-join

我经常遇到这个问题，但这里有一个例子......

我有一个订单和交货表。每个订单可以有一对多的交货。

我需要根据订单表报告总计，但还需要逐行显示交货。

我可以轻松地为此编写 SQL 和相关的访问报告....

```
SELECT xxx 
    FROM 
        Order 
    LEFT OUTER JOIN 
        Delivery on Delivery.OrderNO = Order.OrderNo 
```

直到我到达求和元素。我显然只想对每个订单求和一次，而不是该订单的 1 次交付。

```
e.g. The SQL might return the following based on 2 Orders (ignore the banalness of the report, this is very much simplified)
Region  OrderNo    Value    Delivery Date
North   1          £100     12-04-2012
North   1          £100     14-04-2012
North   2          £73      01-05-2012
North   2          £73      03-05-2012
North   2          £73      07-05-2012
South   3          £50      23-04-2012 
```

我想报告：

```
Total Sales North - £173
    Delivery 12-04-2012
    Delivery 14-04-2012
    Delivery 01-05-2012
    Delivery 03-05-2012
    Delivery 07-05-2012

Total Sales South - £50
    Delivery 23-04-2012 
```

我指的是173英镑和50英镑的计算，其中第一个显然不应该是419英镑！

在过去，我使用过诸如 MAX 之类的东西（对于给定的订单），但这似乎是一种软糖。

对于这个看似常见的问题，肯定有一个固定的答案，但我找不到。

我不一定需要代码 - 只是在正确方向上的有用点。

非常感谢，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:05:10.180

我相信您想要的称为聚合操作的窗口函数。它如下所示：

```
SELECT xxx, SUM(Value) OVER (PARTITION BY Order.Region) as OrderTotal
FROM 
    Order 
LEFT OUTER JOIN 
    Delivery on Delivery.OrderNO = Order.OrderNo 
```

[这是 MSDN 文章。](http://msdn.microsoft.com/en-us/library/ms189461.aspx)`PARTITION BY`告诉要为每个不同的单独`SUM`完成`Order.Region`。

**编辑：**我刚刚注意到我错过了你所说的关于订单被多次计算的内容。您可以做的一件事是`SUM()`加入之前的值，作为 CTE（稍微猜测您的模式）：

```
WITH RegionOrders AS (
    SELECT Region, OrderNo, SUM(Value) OVER (PARTITION BY Region) AS RegionTotal
    FROM Order
)
SELECT Region, OrderNo, Value, DeliveryDate, RegionTotal
FROM RegionOrders RO
INNER JOIN Delivery D on D.OrderNo = RO.OrderNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:17:20.663

汇总运算符可能看起来不漂亮。但是，它会执行您现在看到的常规聚合，并显示订单的小计。这就是你要找的。

```
SELECT xxx 
    FROM 
        Order 
    LEFT OUTER JOIN 
        Delivery on Delivery.OrderNO = Order.OrderNo
GROUP BY xxx
WITH ROLLUP; 
```

我不确定您的查询的其余部分是如何设置的，但它看起来像这样：

```
Region  OrderNo    Value    Delivery Date
North   1          £100     12-04-2012
North   1          £100     14-04-2012
North   2          £73      01-05-2012
North   2          £73      03-05-2012
North   2          £73      07-05-2012
NULL    NULL       f419     NULL 
```

# html - CSS div没有浮动在图像旁边

> ID：10450310
> 
> 赞同：0
> 
> 时间：2012-05-04T13:57:20.760
> 
> 标签：html, css, css-float

我正在尝试进行响应式设计。当屏幕很小的时候，评论应该在“Slikica”（Cyan DIV）下面。但是当我在桌面版本上时，我希望评论（灰色 div）在图像周围扭曲。

*   青色 div 具有固定宽度，并且向左浮动。
*   灰色 div 的长度未知（最多 200 个字符），它们应该是青色 div。它们也向左浮动。
*   如果我将它们设置为宽度，例如 300 像素，一切都会正常工作。

看下图，价值千言万语。

![显示问题](../Images/978ce9fcfc29073135181ed86b4ead76.png)

```
<div id="content">
    <div id="slikica">Slikica</div>
    <div class="gray">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec elementum dui ut enim rutrum congue. Nulla ut odio vel metus pharetra aliquet. Proin nec erat non nisl semper sagittis. Pellentesque sed.</div>
    <div class="gray">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris imperdiet interdum enim eget sollicitudin. Praesent eleifend interdum odio sit amet luctus. Nulla egestas eros vitae dui tincidunt amet.</div>
    <div class="gray">Quisque non ligula id dolor tincidunt imperdiet at et libero. Cras eu sapien mi. Phasellus sollicitudin accumsan vehicula. In fermentum, sapien vitae ullamcorper porttitor, felis sem dapibus est amet.</div>
    <div class="gray">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec elementum dui ut enim rutrum congue. Nulla ut odio vel metus pharetra aliquet. Proin nec erat non nisl semper sagittis. Pellentesque sed.</div>
    <div class="gray">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris imperdiet interdum enim eget sollicitudin. Praesent eleifend interdum odio sit amet luctus. Nulla egestas eros vitae dui tincidunt amet.</div>
    <div class="gray">Quisque non ligula id dolor tincidunt imperdiet at et libero. Cras eu sapien mi. Phasellus sollicitudin accumsan vehicula. In fermentum, sapien vitae ullamcorper porttitor, felis sem dapibus est amet.</div>
    <br class="clrfix" />
</div> 
```

[jsFiddle 链接](http://jsfiddle.net/PTq23/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:19:20.770

只需删除`float: left;`评论 DIV 上的。当将每个评论浮动到前一个评论时，它们将不适合视口。

[http://jsfiddle.net/feeela/Xtuc9/1/](http://jsfiddle.net/feeela/Xtuc9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:04:11.860

尝试将以下 CSS 添加到评论`div`元素中：

```
display:inline; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:20:34.560

如果您`float: left;`从灰色 div 中删除并添加等于（或大于）青色 div 宽度的左边距，它们将占据右侧的空间。如果有更多的灰色 div，它们将不会因为边距而环绕青色 div。我不知道是否需要这种行为。否则，您可以跳过边距和浮动，并让它们环绕青色 div。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T14:08:03.327

问题是您的 div 将扩展以达到其容器的最大宽度（在这种情况下为`<div id="content">`）。当它们的宽度太大而无法容纳蓝色时，它们就会被夹下来。你需要的是放置一些东西来阻止它们达到那个宽度。

你有两个选择来做到这一点。

1.  放置一个带有 a 的 div `width: 600px`（或任何适合该空间的）并将每个灰色 div 放入其中。[JSFiddle](http://jsfiddle.net/PTq23/3/)（您需要展开结果窗口以查看它是否有效）
2.  `max-width`在每个 div 上放一个（例如`max-width: 600px`：）

# c# - 为什么反射会为 lambda 返回如此奇怪的名称？

> ID：10450311
> 
> 赞同：1
> 
> 时间：2012-05-04T13:57:21.557
> 
> 标签：c#, .net, reflection, lambda

我有这个代码：

```
class Program
{
    static void Main(string[] args)
    {
        Action whatToDo = () => {
            var member = (MemberInfo)(MethodBase.GetCurrentMethod());
            Thread.Sleep(0); //whatever, need something to put a breakpoint on
        };
        whatToDo();
    }
} 
```

当我运行它并使用 watch 查看绑定到`member`引用的对象内部时，我看到该`MemberInfo.Name`属性具有 value `<Main>b__0`。

这看起来很奇怪。为什么反射不使用`whatToDo`名称？如果我在一个成员函数中有多个具有相同签名的动作怎么办 - 我将如何判断报告了哪一个？

为什么反射会返回这么奇怪的名字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T13:59:52.907

被转换为委托的 Lambda 表达式被转换为方法。您的代码相当于：

```
class Program
{
    static void Main(string[] args)
    {
        Action whatToDo = MyLambda; // Method group conversion
        whatToDo();
    }

    static void MyLambda()
    {
        var member = (MemberInfo)(MethodBase.GetCurrentMethod());
        Thread.Sleep(0); //whatever, need something to put a breakpoint on
    }
} 
```

...除了编译器足够聪明，可以在必要时为捕获的变量等创建新类。虽然在我的转换中调用了额外的方法`MyLambda`，但 C# 编译器会生成*不可描述的名称*，这些名称不是有效的 C# 标识符（为了避免冲突，防止您可以直接访问它们等）。

# c# - Silverlight 视频会议的视频/音频编解码器

> ID：10450315
> 
> 赞同：0
> 
> 时间：2012-05-04T13:57:43.627
> 
> 标签：c#, asp.net, visual-studio, silverlight

我目前正在开发一个基于网络的视频会议应用程序。我的项目基于以下示例：[http](http://www.codeproject.com/Articles/65190/Your-First-Step-to-the-Silverlight-Voice-Video-Cha) ://www.codeproject.com/Articles/65190/Your-First-Step-to-the-Silverlight-Voice-Video-Cha ..我目前正在经历“滞后”在视频会议本身..

首先我，这种滞后的原因可能是什么？可能是由于编解码器的原因吗？如果不是，其他可能性是什么？

关于编解码器，当前项目采用帧（即JPG）对其进行编码并发送。. 推荐其他编解码器用于对JPG帧进行编码并在接收端对其进行解码？

谢谢，任何形式的帮助都非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:13:40.383

我对 CodeProject 上引用的工作没有经验。但是，话虽如此，如果该方法确实使用帧抓取并发送 jpg 文件，那么它将非常低效，导致您描述的帧速率非常低。像这样的应用程序应该依赖于基于移动视频而不是静止图像的高效编码机制。这将基于源图像中的增量创建经济体，而不是每次都从头开始数字化新帧。此外。H.264 不旨在作为实时传输，而 H.263 旨在用于此类应用。一个简单的 Google 搜索将显示大量参考资料，包括 stackoverflow 上的主题 -[请参阅此](https://stackoverflow.com/questions/8460453/how-do-i-encode-an-image-in-h-263-and-send-it-in-real-time-using-udp)

祝你好运。

# java - 我可以增加 apache 池的超时时间以减少新对象的创建吗？

> ID：10450316
> 
> 赞同：0
> 
> 时间：2012-05-04T13:57:46.140
> 
> 标签：java, connection-pooling, pool

我正在尝试汇集一些对象并共享它们，但我注意到线程中的阻塞。我对 Java 有点陌生，所以不确定这是否是我缺乏经验或特定于池的问题。这是一些复制问题的代码（创建 10 个线程并共享 20 个对象，在一个长循环中执行此操作，以便您可以捕获阻塞）。如果您分析它（线程视图中的 Java visualvm 或 yourkit），您会注意到 borrowObject 似乎阻塞了线程。所以问题是，这是正常行为还是我做错了什么？

我可能完全错了，但我在某处读到它在为池创建/销毁新对象时可能会阻塞。我只是不明白如何增加对象的寿命，以及为什么如果线程不空闲，它甚至需要破坏/制造？

这是一个例子：

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.impl.GenericObjectPool;

public class main{
    public static void main(String[] a){
        ObjectPool<Foo> fpool = new GenericObjectPool<Foo>(new FooPoolableObjectFactory(), 20);
        ExecutorService tpool = Executors.newFixedThreadPool(10);

        for(int i = 0; i < 900000000; ++i){
            tpool.submit(new FooWorker(fpool));
        }
    }
}

class Foo{
    private static int pk = 0;
    private int count = 0;
    public final int id;

    public Foo(){
        id = pk++;
    }

    public int increment(){
        return ++count;
    }
}

class FooWorker implements Runnable{
    private ObjectPool<Foo> fpool;

    public FooWorker(ObjectPool<Foo> fpool){
        this.fpool = fpool;
    }

    @Override
    public void run(){
        Foo foo = null;
        try{
            foo = fpool.borrowObject();
            //System.out.println(foo.id + ": " + foo.increment());
        }
        catch(Exception e){
            e.printStackTrace();
        }
        finally{
            // This is done in a finally block to ensure the object is returned to the pool
            if(foo != null){
                try{
                    fpool.returnObject(foo);
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        }
    }
}

class FooPoolableObjectFactory extends BasePoolableObjectFactory<Foo>{

    @Override
    public Foo makeObject() throws Exception{
        return new Foo();
    }
}

/*
Example output:
1: 1
0: 1
2: 1
3: 1
2: 2
0: 2
2: 3
0: 3
1: 2
3: 2

The number on the left is the id of the foo object being used.
The number on the right is the value of the foo object.

Notice how the foos are being reused.
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:16:34.153

不确定“阻塞”线程是什么意思（多个线程在同一个互斥体上等待？）。apache 池实现使用简单的同步，因此如果您的任务主要是在池中添加和删除对象所花费的时间，它就不是最并发的解决方案。假设您在借用和返回调用之间做了一些实际工作，您可能会看到更少的阻塞。

# c# - 跳转表单无法正常工作

> ID：10450317
> 
> 赞同：0
> 
> 时间：2012-05-04T13:57:46.473
> 
> 标签：c#, winforms, sqlconnection

[这是与前一个](https://stackoverflow.com/questions/10448951/open-an-existing-form-from-the-main-form)问题相关的问题。

基本上我有两种形式，我想从第一种形式跳到第二种形式。第一种形式的代码。

```
public partial class Main : Form
{
    public Main()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Edit_Metric Edit_Metric = new Edit_Metric();
        Edit_Metric.Show();
    }

} 
```

第二种形式：

```
public partial class Edit_Metric : Form
{
    BindingSource bsource = new BindingSource();
    DataSet ds = new DataSet();
    private SqlDataAdapter da;
    public Edit_Metric()
    {
        InitializeComponent();
    }
    private string connString = ConfigurationManager.ConnectionStrings["QISConnectionString"].ConnectionString;

    private void Edit_Metric_Load(object sender, EventArgs e)
    {
        dgv.EditMode = DataGridViewEditMode.EditOnKeystroke;
        DataGridViewButtonColumn EditColumn = new DataGridViewButtonColumn();
        EditColumn.Text = "Edit";
        EditColumn.Name = "Edit";
        EditColumn.DataPropertyName = "Edit";
        EditColumn.DisplayIndex = 0;
        EditColumn.UseColumnTextForButtonValue = true;
        DataGridViewButtonColumn DelColumn = new DataGridViewButtonColumn();
        DelColumn.Text = "Delete";
        DelColumn.Name = "Delete";
        DelColumn.DataPropertyName = "Delete";
        DelColumn.DisplayIndex = 1;
        DelColumn.UseColumnTextForButtonValue = true;
        dgv.Columns.Add(EditColumn);
        dgv.Columns.Add(DelColumn);

        using (SqlConnection conn = new SqlConnection("connString"))
        {
            conn.Open();
            // data query, display data in a datagridview.
        } 
```

我的问题是：当代码到达

```
 using (SqlConnection conn = new SqlConnection("connString")) 
```

下一步代码立即转到第一个表单

```
 Edit_Metric.Show(); 
```

它永远不会进入第二种形式的代码

```
 conn.Open(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:03:12.380

如果不是拼写错误，则您正在尝试使用字符串“connString”而不是上述“QISConnectionString”中的 var connString 打开连接

我确定你想写

```
using (SqlConnection conn = new SqlConnection(connString)) 
```

# javascript - ASP.Net 按钮未重置为默认值

> ID：10450321
> 
> 赞同：0
> 
> 时间：2012-05-04T13:58:01.023
> 
> 标签：javascript, jquery, asp.net, dialog

我正在使用“BLOCKUI”jquery 确认对话框插件，它工作得很好，除了它没有重置它弹出的按钮，

也许这是一个逻辑错误：/，这是代码，

**脚本**

```
 <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>
<script type="text/javascript" src="JS.js"></script>
<script type="text/javascript">
    $(document).ready(function() { 

        $("input[id$='btDelete']").click(function() { 
            $.blockUI({ message: $('#question'), css: { width: '620px' } });
        }); 

        $("input[id$='yes']").click(function() { 
            $.blockUI({ message: "" }); 
        }); 

        $("input[id$='no']").click(function() { 
            $.unblockUI(); 
            return false; 
        }); 
    }); 
</script> 
```

**分区标签**

```
<asp:Content ID="Content4" ContentPlaceHolderID="cphSubmit" runat="server">
<div id="question" style="display:none; background-color:Menu; cursor: default">
    <div align="center">
        <br /><asp:Label ID="Label1"  runat="server" Text="Deleting this eDecision will remove all site content and uploaded documents.<br />Are you sure you wish to continue?" CssClass="headertext"></asp:Label><br /><br /><br /><br /><br />
        <asp:Button ID="yes" Width="200px" Height="25px" CssClass="gradientbutton" OnClick="btDelete_Click" Runat="server" Text="Yes"></asp:Button>
        <asp:Button ID="no" Width="200px" Height="25px" CssClass="gradientbutton" Runat="server" Text="No"></asp:Button><br /><br /><br />
    </div>
</div> 
```

**按钮**

```
 <td>
    <asp:Button ID="btDelete" runat="server" CssClass="gradientbutton" OnClick="btDelete_Click"
    OnClientClick="this.disabled=true;" Text="Delete" Width="200px"  />
</td> 
```

[这是插件链接](http://jquery.malsup.com/block/#dialog)

如果我将按钮更改为

```
<asp:Button ID="btDelete" runat="server" CssClass="gradientbutton" Text="Delete" Width="200px"  /> 
```

对话框出现然后消失：S

和 IF 按钮如下所示，出现对话框但即使我按“否”删除按钮仍处于禁用状态，

```
<asp:Button ID="btDelete" runat="server" CssClass="gradientbutton" OnClick="btDelete_Click"
    OnClientClick="this.disabled=true;" Text="Delete" Width="200px"  /> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:08:55.210

Try this

```
 $("input[id$='btDelete']").click(function() {  
        $.blockUI({ message: $('#question'), css: { width: '620px' } }); 
        return false;
    }); 
```

And your button without the OnClientClick. You already have a client-click event above. The return false will stop the event bubbling and prevent the submit of the asp.net button.

# database - 为 Magento 创建两个新的数据库表

> ID：10450328
> 
> 赞同：0
> 
> 时间：2012-05-04T13:58:19.903
> 
> 标签：database, magento

我正在尝试向 magento 添加两个表，但它仍然不起作用！我没有得到 MySQL 中的表。没有错误消息，只是没有任何反应。我找不到错误在哪里；我已经检查了我所有的页面。

这是我在 config.xml 中的 XML 代码：

```
 <models>
        <interactivebanner>
            <class>Kiwi_InteractiveBanner_Model</class>
            <resourceModel>InteractiveBanner_resource</resourceModel>
        </interactivebanner>
        <interactivebanner_resource>
            <class>Kiwi_InteractiveBanner_Model_Resource</class>
            <entities>
                <interactivebanner>
                    <table>interactivebanner</table>
                </interactivebanner>
                <interactivebanner2>
                    <table>interactivebanner_prod</table>
                </interactivebanner2>
            </entities>
        </interactivebanner_resource>
    </models> 
```

这是设置页面：

```
<?php 

$installer = $this;
  $installer->startSetup();

  $installer->run("
DROP TABLE IF EXISTS `{$this->getTable('interactivebanner/interactivebanner')}`;
create table `{$this->getTable('interactivebanner/interactivebanner')}`
(
   ENTITY_ID            int not null,
   NAME                 varchar(100),
   LINK                 varchar(100),
   STATUS               int,
   primary key (ENTITY_ID)
);

DROP TABLE IF EXISTS `{$this->getTable('interactivebanner/interactivebanner_prod')}`;
create table `{$this->getTable('interactivebanner/interactivebanner_prod')}`
(
   PROD_ID              int not null,
   ENTITY_ID            int,
   POSI_V               float,
   POSI_H               float,
   primary key (PROD_ID)
);

alter table banner_pro add constraint FK_RELATION_1 foreign key (ENTITY_ID)
      references banner (ENTITY_ID) on delete restrict on update restrict;

");

  $installer->endSetup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:28:34.320

您要升级此现有模块吗？

如果是这样，您将不得不在升级脚本运行之前提升模块版本。如果它是一个单独的模块，您必须使 mysql4-setup-<version>.php 具有如此高或更高的版本以创建表。此外，您还需要在 app/etc/Myself_Interactivebanner.xml 中有模块声明，以便 Magento 知道模块的存在。

要获得更确定的答案，请提供有关您所拥有环境的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:06:54.030

如果我不得不猜测，您的安装脚本没有运行。这可能有多种原因。我会看这篇帮助我运行安装脚本的帖子：

[我的 Magento 扩展安装脚本将无法运行](https://stackoverflow.com/questions/4717535/my-magento-extension-install-script-will-not-run)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:22:10.463

我在我的 config.xml 上发现了一个错误！缺少大写字母:) 抱歉。

# c++ - 检测是否针对调试 MSVCRT 构建了 .lib

> ID：10450332
> 
> 赞同：1
> 
> 时间：2012-05-04T13:58:34.670
> 
> 标签：c++, c, visual-c++, msvcrt

主题说 - 是否有可靠的方法来检测是否针对 MSVCRT 的调试版本构建了 .lib 静态库（以及动态库，如果可能的话）？例如，是否有任何导入符号可用于检测？基本上我有一个使用大量依赖静态库的应用程序，其中至少一个需要调试 msvcrt，因为生成的可执行文件需要两个版本的运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:23:36.150

对于 dll，我们可以使用 depends [Dependency Walker](http://support.microsoft.com/kb/256872)，如果 dll 依赖于 MSVCRxxD.DLL 它与调试运行时链接。有关详细信息，请参阅[使用运行时库](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.100%29.aspx)。

如果你有 cygwin 你可以运行例如

字符串 xxx.lib | grep MSVCRT

或者

字符串 xxx.dll | grep MSVCRT

看看有没有出现D版

# objective-c - iOS ASIHTTPSRequest 在 HTTP/HTTPS 连接之间切换

> ID：10450333
> 
> 赞同：0
> 
> 时间：2012-05-04T13:58:38.260
> 
> 标签：objective-c, ios, rest, https, asihttprequest

我有一个使用 ASIHTTPRequest 与 REST 服务器通信的 iOS 应用程序。服务器支持端口 80 (HTTP) 和端口 443 (HTTPS) 上的连接 - 我在端口 443 上使用 GeoTrust/RapidSSL 证书。用户可以配置应用程序以选择他们想要使用的协议。我正在使用 WireShark 监控服务器上的流量，我发现偶尔如果用户在 HTTP 和 HTTPS 之间切换，当他们下一次提交请求时，我可以看到这两种协议的流量，然后是之后的每个请求仅适用于新选择的协议。

此外，当应用程序关闭时，会发送一些数据包，我猜这是某种清理。这些最终数据包的类型（HTTP/HTTPS）取决于应用程序使用的协议。如果应用程序已设置为在同一应用程序会话期间同时使用 HTTP 和 HTTPS，则在应用程序关闭时会同时发送 HTTP 和 HTTPS 数据包。这些场景对我来说似乎不正确，并表明我的 ASIHTTPRequest 没有被完全清除。当我的请求以响应“HTTP/0.9 200 OK”完成但未返回任何数据时，我偶尔会遇到错误，我认为这是由于尝试使用 HTTP 与端口 443 通信引起的。

谁能证实我的怀疑是真的？在 ASIHTTPRequest 之后我应该使用一些命令来清除它，以便可以通过不同的协议发送下一个请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:39:22.360

您所看到的听起来像是 HTTP 持久连接的目的；请参阅[http://en.wikipedia.org/wiki/HTTP_persistent_connection](http://en.wikipedia.org/wiki/HTTP_persistent_connection)等。

你不需要做任何事情，这些都不会造成任何伤害。我相信在切换协议时看到的少数 http 数据包只是旧套接字被关闭 - 我假设您只是看到到 TCP 端口 80 的数据包，并没有看到任何带有数据/实际 http 请求的数据包。

# iphone - 以编程方式将一些文本分配给 UITextView 中的特定行

> ID：10450337
> 
> 赞同：0
> 
> 时间：2012-05-04T13:59:00.647
> 
> 标签：iphone, objective-c, ios, xcode, uitextview

我以编程方式创建 UITextView 的一个实例。我想以编程方式将一些文本分配给 UITextView 中的特定行。这是我创建 UITextView 的代码。

```
UITextView *textView =[[UITextView alloc]init];
textView.frame=CGRectMake(0,0,282,210);
[textView setReturnKeyType:UIReturnKeyDone];
[self.view addSubview:textView]; 
```

例如，我想向特定行添加一些文本（在第 5 行的末尾）。

以编程方式，怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:09:26.647

```
UITextView *textView =[[UITextView alloc]init];
textView.frame=CGRectMake(0,0,282,210);  
textView.text = @"xxxxxx"; 
```

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:18:17.943

您不能直接在文本视图中编辑行，因为行数取决于内容大小和字体大小。

检查这个问题作为参考： [How to Read Number of lines in UITextView](https://stackoverflow.com/questions/3585470/how-to-read-number-of-lines-in-uitextview)

你可以做一些计算来确定在哪里插入文本，但我不确定这是否是最好的方法。可能有更好的方法来完成您正在尝试做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:01:41.760

您可以使用以下内容：

```
NSString *str=yourTextview.text;
[str stringByAppendingString:yourNewString]; 
```

然后将其添加到 textview

```
yourTextView.text=str; 
```

check it and let me know if any clarification you need

# javascript - 由 AJAX 引起的 700 个 Google 抓取错误？

> ID：10450339
> 
> 赞同：0
> 
> 时间：2012-05-04T13:59:08.417
> 
> 标签：javascript, ajax, server-error

我最近向一个站点添加了一个新功能，它使用 AJAX 加载登录和注册面板。

上传后，我收到了大量的 Google 抓取错误，将近 700 个！

错误 URL 不会出现在页面源中的任何位置，除了 jQuery **.load()**函数使用的 URL。

会不会是 Google 试图抓取我的 JavaScript 代码使用的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:07:00.957

从 Google 文档中查看此页面 [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174993](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174993) 它为您提供了一些关于 ajax 以及如何防止机器人与您的 ajax 内容混淆的想法. 特别是“如果我的网站有一些不应该被抓取的哈希片段 URL 怎么办？” 问题。

# iis - serviceAutoStartProviders 是否与 App_Offline.htm 结合运行？

> ID：10450340
> 
> 赞同：0
> 
> 时间：2012-05-04T13:59:12.180
> 
> 标签：iis, autostart, app-offline.htm

我一直在研究 IIS 7.5 的“[应用程序初始化](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)”模块（已嵌入到[IIS 8](http://learn.iis.net/page.aspx/1089/iis-80-application-initialization/)中）和 serviceAutoStartProviders，它们可以设置为在应用程序加载时初始化服务。

我想知道当应用程序具有 AppOffline.aspx 时 serviceAutoStartProviders 会发生什么，无论出于何种原因关闭该应用程序。提供程序是否仍在运行，或者没有？就我而言，我有一个提供程序，我不想在更新应用程序时运行它 - 我在更新应用程序时使用 AppOffline.aspx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:59:10.793

快速测试，即使在应用程序目录中找到 App_Offline.htm，serviceAutoStartProviders 似乎也会运行。

# jquery - 动画 jQuery 脚本以着色文本

> ID：10450344
> 
> 赞同：0
> 
> 时间：2012-05-04T13:59:30.827
> 
> 标签：jquery, colors, jquery-animate

我正在使用下面的脚本为特定类中的文本字母随机着色。我想扩展它，使着色每 10 秒动画一次。然后的想法是动画将使用相同的 generateColors 函数，该函数用于在页面加载时为文本着色，从一组颜色动画到另一组颜色。

我已经为动画添加了包含在**中的代码，但它不起作用。我还包含了[jQuery 颜色动画插件](http://www.bitstorm.org/jquery/color-animation/)，但我意识到，通过下面我尝试使用的代码，我实际上并不是在为颜色设置动画，而是在尝试为 HTML 设置动画，这可能是不可能的。但是，我不确定如何使用颜色插件为颜色设置动画，并且很高兴获得任何帮助。

谢谢，

缺口

```
$(document).ready(function() {

        $('.colour').each(function() {
        var text = $(this).text().split(''),
        normal = generateColors(text),
        **animate = generateColors(text);**

     $(this).html(normal);

     **$(this).animate( 
      function(event) { $(this).html(animate) });**

     });
});

function generateColors(characters) {
    var result = "";
    var i = 0;
    for(i=0; i < characters.length; i++) {
        result += "<span style='color:"+getColor()+"'>"+characters[i]+"</span>";
    }

   return result;
}        

function getColor() {
    var colList = ['#942525', '#9E2921','#A4392A', '#8C381E', '#8E4224', '#7C3E21','#B64B26', '#B75D29', '#7F5B24','#665824','#89782E', '#49411F', '#4E512A', '#5E7D37', '#567D38', '#278C8C', '#387872','#1D6362','#257377', '#257377', '#8D3594'];

    var i = Math.floor((Math.random()*colList.length));
  return colList[i];
} 
```

**setInterval 函数**

```
setInterval(function(){

$(".colour").each(function colourChange() {
      var text = $(this).text().split('');
      var normal = generateColors(text);
      $(this).html(normal);
  });
}, 3000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:03:56.383

也许你可以使用`setTimeout()`如下所示：

```
setTimeout(generateColors($('.color').text()), 10000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:28:41.807

好的，我最后想通了。感谢 sp00m 让我通过 setTimeout 走上正轨。我添加了以下 setInterval 函数，该函数使用我已经使用的 getColor 函数动画更改 .colour div（使用颜色动画插件）中的跨度颜色：

```
setInterval(function(){
    $(".colour span").each(function () {
        var colourChange=getColor();
        $(this).animate ({
        color: colourChange,
        },2000);     
    });

}, 4000);

}); 
```

工作一种享受！

# .net - 带有 Castle Windsor 子容器的快照

> ID：10450345
> 
> 赞同：5
> 
> 时间：2012-05-04T13:59:32.393
> 
> 标签：.net, castle-windsor, nservicebus3

在阅读了有关 NServiceBus 3 对子容器支持的页面 ( [http://docs.particular.net/nservicebus/containers/child-containers ) 之后，我期待在 Castle Windsor 中，](http://docs.particular.net/nservicebus/containers/child-containers)**父容器中的****瞬态**组件的行为类似于**单**例**子容器**。然而，这些父组件与子容器的依赖关系每次都会被实例化。

 ******有没有办法在温莎城堡中实现父容器快照的这种行为？换句话说，容器中组件的瞬态，如果从子容器解析，则为单例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:14:53.013

NServiceBus 使用 Castle Windsor 中的 Scoped 生活方式功能来实现子容器功能，请在此处阅读有关 Scoped 生活方式的信息：http: [//docs.castleproject.org/Windsor.Whats-New-In-Windsor-3.ashx](http://docs.castleproject.org/Windsor.Whats-New-In-Windsor-3.ashx)。所以瞬态会表现得像瞬态单例会表现得像单例，而作用域会表现得像单例 pr nservicebus 请求。我们对 ISession 使用范围生活方式，其余 99% 使用单例。我很少需要瞬变，至少在做网络应用时是这样。为什么您希望组件根据解析的位置而表现出不同的行为？我很确定您可以通过另一种方式完成此操作。******

# android - 如何在我的 android 应用程序中使用 epublib jar

> ID：10450346
> 
> 赞同：2
> 
> 时间：2012-05-04T13:59:32.320
> 
> 标签：android, eclipse, epub, epublib

我在 android 中实现了一个应用程序，它使用 epublib 来查看 .epub 文件。

[http://www.siegmann.nl/epublib/android](http://www.siegmann.nl/epublib/android)

根据此链接，我已完成以下步骤。

> Slf4j-安卓。[你可以在http://www.slf4j.org/android/](http://www.slf4j.org/android/)
> 下载这个

入门

> 从[https://github.com/downloads/psiegman/epublib/epublib-core-latest.jar](https://github.com/downloads/psiegman/epublib/epublib-core-latest.jar)
> 下载 epublib-core-latest.jar 下载 slf4j-android
> 将两者都添加到您的 android 项目中

完整的电子书阅读器和源代码。

我正在使用 Eclipse SDK 版本：3.7.2。

我在运行时收到此错误：java.lang.NoClassDefFoundError: nl.siegmann.epublib.epub.EpubReader。

我使用了下面提到的代码

```
import java.io.IOException;
import java.io.InputStream;
import java.util.List;

import nl.siegmann.epublib.domain.Book;
import nl.siegmann.epublib.domain.TOCReference;
import nl.siegmann.epublib.epub.EpubReader;
import android.app.Activity;
import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log;

/**
 * Log the info of 'assets/books/testbook.epub'.
 *
 * @author paul.siegmann
 *
 */
public class LogTestBookInfo extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AssetManager assetManager = getAssets();
    try {
      // find InputStream for book
      InputStream epubInputStream = assetManager
          .open("books/testbook.epub");

      // Load Book from inputStream
      Book book = (new EpubReader()).readEpub(epubInputStream);

      // Log the book's authors
      Log.i("epublib", "author(s): " + book.getMetadata().getAuthors());

      // Log the book's title
      Log.i("epublib", "title: " + book.getTitle());

      // Log the book's coverimage property
      Bitmap coverImage = BitmapFactory.decodeStream(book.getCoverImage()
          .getInputStream());
      Log.i("epublib", "Coverimage is " + coverImage.getWidth() + " by "
          + coverImage.getHeight() + " pixels");

      // Log the tale of contents
      logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
      Log.e("epublib", e.getMessage());
    }
  }

  /**
   * Recursively Log the Table of Contents
   *
   * @param tocReferences
   * @param depth
   */
  private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {
      return;
    }
    for (TOCReference tocReference : tocReferences) {
      StringBuilder tocString = new StringBuilder();
      for (int i = 0; i < depth; i++) {
        tocString.append("\t");
      }
      tocString.append(tocReference.getTitle());
      Log.i("epublib", tocString.toString());

      logTableOfContents(tocReference.getChildren(), depth + 1);
    }
  }
} 
```

请给我一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:41:04.777

如果您在使用外部 jar 时遇到问题，请创建一个名为 libs 的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:39:32.683

您应该创建一个名为“libs”的文件夹。然后将所有需要的 jar 文件复制并粘贴到该文件夹​​中。jar 文件将自动包含在内

# android - 片段真的需要一个空的构造函数吗？

> ID：10450348
> 
> 赞同：280
> 
> 时间：2012-05-04T13:59:33.347
> 
> 标签：android, android-fragments

我有一个`Fragment`带有多个参数的构造函数。我的应用程序在开发过程中运行良好，但在生产中我的用户有时会看到此崩溃：

```
android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment 
make sure class name exists, is public, and has an empty constructor that is public 
```

正如此错误消息所暗示的那样，我可以创建一个空的构造函数，但这对我来说没有意义，因为那时我将不得不调用一个单独的方法来完成设置`Fragment`.

我很好奇为什么这种崩溃只是偶尔发生。也许我使用`ViewPager`不正确？我自己实例化所有`Fragment`s 并将它们保存在`Activity`. 我不使用`FragmentManager`事务，因为`ViewPager`我看到的示例不需要它，并且在开发过程中一切似乎都在工作。

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-05-04T14:10:04.263

是的，他们这样做。

无论如何，您不应该真正覆盖构造函数。您应该`newInstance()`定义一个静态方法并通过参数（捆绑包）传递任何参数

例如：

```
public static final MyFragment newInstance(int title, String message) {
    MyFragment f = new MyFragment();
    Bundle bdl = new Bundle(2);
    bdl.putInt(EXTRA_TITLE, title);
    bdl.putString(EXTRA_MESSAGE, message);
    f.setArguments(bdl);
    return f;
} 
```

当然，以这种方式获取参数：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    title = getArguments().getInt(EXTRA_TITLE);
    message = getArguments().getString(EXTRA_MESSAGE);

    //...
    //etc
    //...
} 
```

然后你会像这样从你的片段管理器中实例化：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    if (savedInstanceState == null){
        getSupportFragmentManager()
            .beginTransaction()
            .replace(R.id.content, MyFragment.newInstance(
                R.string.alert_title,
                "Oh no, an error occurred!")
            )
            .commit();
    }
} 
```

这样，如果分离和重新附加对象状态，则可以通过参数存储。很像附加到 Intents 的捆绑包。

**原因 - 额外阅读**

我想我会为想知道为什么的人解释原因。

如果您检查：[https ://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/Fragment.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/Fragment.java)

你会看到类中的`instantiate(..)`方法`Fragment`调用了`newInstance`方法：

```
public static Fragment instantiate(Context context, String fname, @Nullable Bundle args) {
    try {
        Class<?> clazz = sClassMap.get(fname);
        if (clazz == null) {
            // Class not found in the cache, see if it's real, and try to add it
            clazz = context.getClassLoader().loadClass(fname);
            if (!Fragment.class.isAssignableFrom(clazz)) {
                throw new InstantiationException("Trying to instantiate a class " + fname
                        + " that is not a Fragment", new ClassCastException());
            }
            sClassMap.put(fname, clazz);
        }
        Fragment f = (Fragment) clazz.getConstructor().newInstance();
        if (args != null) {
            args.setClassLoader(f.getClass().getClassLoader());
            f.setArguments(args);
        }
        return f;
    } catch (ClassNotFoundException e) {
        throw new InstantiationException("Unable to instantiate fragment " + fname
                + ": make sure class name exists, is public, and has an"
                + " empty constructor that is public", e);
    } catch (java.lang.InstantiationException e) {
        throw new InstantiationException("Unable to instantiate fragment " + fname
                + ": make sure class name exists, is public, and has an"
                + " empty constructor that is public", e);
    } catch (IllegalAccessException e) {
        throw new InstantiationException("Unable to instantiate fragment " + fname
                + ": make sure class name exists, is public, and has an"
                + " empty constructor that is public", e);
    } catch (NoSuchMethodException e) {
        throw new InstantiationException("Unable to instantiate fragment " + fname
                + ": could not find Fragment constructor", e);
    } catch (InvocationTargetException e) {
        throw new InstantiationException("Unable to instantiate fragment " + fname
                + ": calling Fragment constructor caused an exception", e);
    }
} 
```

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance())解释了为什么在实例化时它会检查访问器是否存在`public`以及该类加载器是否允许访问它。

总而言之，这是一个非常讨厌的方法，但它允许`FragmentManger`杀死和重新创建`Fragments`状态。（Android 子系统与 做类似的事情`Activities`）。

**示例类**

我被问到很多关于打电话的问题`newInstance`。不要将此与类方法混淆。这个整个类的例子应该显示用法。

```
/**
 * Created by chris on 21/11/2013
 */
public class StationInfoAccessibilityFragment extends BaseFragment implements JourneyProviderListener {

    public static final StationInfoAccessibilityFragment newInstance(String crsCode) {
        StationInfoAccessibilityFragment fragment = new StationInfoAccessibilityFragment();

        final Bundle args = new Bundle(1);
        args.putString(EXTRA_CRS_CODE, crsCode);
        fragment.setArguments(args);

        return fragment;
    }

    // Views
    LinearLayout mLinearLayout;

    /**
     * Layout Inflater
     */
    private LayoutInflater mInflater;
    /**
     * Station Crs Code
     */
    private String mCrsCode;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mCrsCode = getArguments().getString(EXTRA_CRS_CODE);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        mInflater = inflater;
        return inflater.inflate(R.layout.fragment_station_accessibility, container, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        mLinearLayout = (LinearLayout)view.findViewBy(R.id.station_info_accessibility_linear);
        //Do stuff
    }

    @Override
    public void onResume() {
        super.onResume();
        getActivity().getSupportActionBar().setTitle(R.string.station_info_access_mobility_title);
    }

    // Other methods etc...
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-24T13:38:27.243

正如 CommonsWare 在这个问题[https://stackoverflow.com/a/16064418/1319061](https://stackoverflow.com/a/16064418/1319061)中指出的那样，如果您正在创建片段的匿名子类，也会发生此错误，因为匿名类不能有构造函数。

不要创建 Fragment 的匿名子类 :-)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-04T14:04:05.323

是的，正如您所看到的，支持包也实例化了片段（当它们被破坏并重新打开时）。您的`Fragment`子类需要一个公共的空构造函数，因为这是框架调用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T22:43:01.253

看看官方文档：Fragment：[https ://developer.android.com/reference/android/app/Fragment](https://developer.android.com/reference/android/app/Fragment)

> Fragment 的所有子类都必须包含一个公共的无参数构造函数。框架通常会在需要时重新实例化一个片段类，特别是在状态恢复期间，并且需要能够找到这个构造函数来实例化它。如果无参数构造函数不可用，在状态恢复过程中某些情况下会发生运行时异常。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2016-04-05T07:47:16.350

这是我的简单解决方案：

1 - 定义你的片段

```
public class MyFragment extends Fragment {

    private String parameter;

    public MyFragment() {
    }

    public void setParameter(String parameter) {
        this.parameter = parameter;
    } 
} 
```

2 - 创建新片段并填充参数

```
 myfragment = new MyFragment();
    myfragment.setParameter("here the value of my parameter"); 
```

3 - 享受它！

显然，您可以更改参数的类型和数量。快捷方便。

# database - 用于 Mac OS X 开发（尤其是核心数据）的安全数据库有哪些选项？

> ID：10450350
> 
> 赞同：1
> 
> 时间：2012-05-04T13:59:41.160
> 
> 标签：database, macos, cocoa, security, core-data

我正在构建一个存储客户数据的 Cocoa 应用程序。我目前正在使用带有 SQLite 存储的 Core Data。不幸的是，我还没有找到保护数据库的方法。

即使在市场上的其他一些 Mac CRM 应用程序上，您也可以浏览到库/应用程序支持并使用任何 SQLite 管理器打开它们的数据库，例如 Firefox SQLite 管理器扩展。应用程序有密码保护，但如果你可以进入数据库并进行更改，它似乎没有用。

所以：1) 有没有办法保护 Core Data 应用程序的 SQLite 存储，同时保留搜索、聚合等？2）如果不是，那么缺乏这种能力是否表明由于操作系统身份验证而认为没有必要对其进行保护？3) 是否有适用于 Mac 的替代开源数据库？

谢谢！拜伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:01:43.090

SQLite 有第三方加密扩展：

*   [http://www.hwaci.com/sw/sqlite/see.html](http://www.hwaci.com/sw/sqlite/see.html)
*   [http://sqlcipher.net/](http://sqlcipher.net/)

# c# - 更新/插入表格

> ID：10450353
> 
> 赞同：1
> 
> 时间：2012-05-04T13:59:50.230
> 
> 标签：c#, sql-server

我必须更新 SQL Server 上的表，但首先我必须检查表中的现有数据，因此如果数据存在则更新它，如果没有则进行新插入：

```
cmd_sql.CommandText = " SELECT BrDok as id_dok " +
                      " FROM ordersstavke " +
                      " WHERE SifParFil = '" + rw_mat["sifskl_kor"] + "'" +
                      " AND DokumentTip = '" + rw_mat["vrst_dok"] + "'";

MySqlDataAdapter sql_adapter = new MySqlDataAdapter(cmd_sql);
DataSet dt_dok = new DataSet("DOK_MAT_EXCHANGE");
sql_adapter.Fill(dt_dok);

if (dt_dok.Tables["DOK_MAT_EXCHANGE"].Rows.Count == 0)
{
   myQuery = " INSERT INTO ordersstavke (BrDok, DocumentTip, SifParFil) " +
             " VALUES ('" + rw_mat["brdok"] + "', '" +
                            rw_mat["vrst_dok"] + "', '" +
                            rw_mat["sifskl_kor"] + "')";
}
else
{
    UPDATE DATA
} 
```

但是我的代码有错误，错误就在这里 if ( `dt_dok.Tables["DOK_MAT_EXCHANGE"].Rows.Count == 0`)

> 你调用的对象是空的。

问题出在这个 if 语句中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:06:42.113

`DOK_MAT_EXCHANGE`是 的名称，而`DataSet`不是第一个表的名称。

你应该用

```
if (dt_dok.Tables[0].Rows.Count == 0) 
```

另外，我认为最好使用这样的语法来发现有多少记录

```
cmd_sql.CommandText = "SELECT COUNT(BrDok) as id_dok " +
                      " FROM ordersstavke " +                         
                      " WHERE SifParFil = ?p1 " +                         
                      " AND DokumentTip = ?p2";   
cmd_sql.Parameters.AddWithValue("?p1", rw_mat["sifskl_kor"] );
cmd_sql.Parameters.AddWithValue("?p2", rw_mat["vrst_dok"] );
int rowCount = (Int32)cmd_sql.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:09:08.050

change

```
DataSet dt_dok = new DataSet("DOK_MAT_EXCHANGE"); 
```

to

```
DataSet dt_dok = new DataSet("ordersstavke "); 
```

and

```
if (dt_dok.Tables["DOK_MAT_EXCHANGE"].Rows.Count == 0) 
```

to

```
if (dt_dok.Tables["ordersstavke "].Rows.Count == 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:17:39.427

通过数据集名称访问第一个表是不正确的，这是为了设置 XML。

而是使用

```
dt_dok.Tables[0].Rows.Count; 
```

话虽如此，您最好将其编写为单个 SQL 语句，而不是单独的 select && insert。这样您就不会多次访问数据库。

```
var sql = @"if exists(select * from ordersstavke where SifParFil = ? and DokumentTip = ?)
then 
 -- do insert statement
else
 -- do update
end if"; 
```

使用存储过程也可以更好地完成此操作，因此您在 C# 中没有那么多 SQL 代码。以这种方式管理多个操作更容易。

而对于大声喊叫，使用`SqlParameters`，而不是字符串连接！那简直是自找麻烦！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:05:37.510

好的，谢谢大家，我是这样写的

```
if (ds_dok.Tables[0].Rows.Count <= 0)
                    {
                        myQuery = " INSERT INTO ordersstavke (BrDok, " +
                                  " SifParFil) " +
                                  " VALUES ('" + rw_mat["brdok"] + "', '" +
                                                 rw_mat["sifskl_kor"] + "')";
                    }
                    else if (ds_dok.Tables[0].Rows.Count >= 1)
                    {

                        myQuery = "UPDATE ordersstavke " +
                                  "SET BrDok = '" + rw_mat["brdok"] + "', " +
                                  "SifParFil = '" + rw_mat["sifskl_kor"] + "', " +
                                  "WHERE BrDok = " + ds_dok.Tables["ordersstavke"].Rows[0]["BrDok"].ToString() + "'";

                    } 
```

但是在更新部分有一个小问题：s_dok.Tables["ordersstavke"].Rows[0]["BrDok"].ToString()，这里它给了我一个可爱的错误：对象引用未设置为实例一个东西。

也许 MySQL 上的更新方式不同，我在 sql server 上引用示例，更新方式不同

# spring - Spring Validation ... Validator 正在工作，但未显示错误

> ID：10450354
> 
> 赞同：0
> 
> 时间：2012-05-04T13:59:50.583
> 
> 标签：spring, validation, websphere-portal

好的，我的应用程序中有两个非常相似的页面。addressForm.jsp 和 termsForm.jsp .... 每个页面都有一个 Spring 验证器用于它的字段。地址表格工作正常。条款表单验证器运行，我在日志中的错误对象中看到错误，但 jsp 没有显示错误。

地址表格...

```
<form:form htmlEscape="false" name="addressForm" commandName="vendorTransmittal" method="post" action="${onboardingActionUrl}">
<form:errors path="*" cssClass="errorblock" element="div"/> 
```

条款形式...唯一的区别是编码类型，因为条款形式有一个文件上传片段...不确定这是否会弄乱错误显示。

```
<form htmlEscape="false" name="termsForm" commandName="vendorTransmittal" method="post"  action="${uploadFileUrl}" enctype="multipart/form-data">
<form:errors path="*" cssClass="errorblock" element="div"/> 
```

错误在那里

[5/4/12 9:23:17:649 EDT] 0000003a SystemOut O 52945 [WebContainer：6] 调试 com.bedbath.vendorportal.onboarding.validator.TermsFormValidator - 检索到错误字段“VTShippingMinimumTypeId”上的对象“vendorTransmittal”中的字段错误': 拒绝值 [1]; 代码 [invalidValue.shippingMinimumType.vendorTransmittal.VTShippingMinimumTypeId,invalidValue.shippingMinimumType.VTShippingMinimumTypeId,invalidValue.shippingMinimumType.java.lang.Integer,invalidValue.shippingMinimumType]; 论据 []; 默认消息 [如果没有最低运费，则不应输入最低运费类型]

控制器识别错误，并按预期路由回同一页面。他们只是不显示。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:47:00.693

看起来您的第二种形式是 HTML `<form>`，而不是 Spring `<form:form>`。`<form:errors>`只能在里面使用`<form:form>`。

# c# - 如何自定义 DataGrid 标头？

> ID：10450360
> 
> 赞同：1
> 
> 时间：2012-05-04T14:00:02.557
> 
> 标签：c#, .net, wpf, templates, datagrid

如何自定义 DataGrid 标头？这张照片显示了我想做的事情...... ![截屏](../Images/afcb912afcc0d2bf75a9c4acefb67a3c.png)

我试试这个，但它不起作用......

```
<DataGridTemplateColumn.Header>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <TextBlock Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Text="Název modelu"></TextBlock>
        <TextBlock Grid.Column="0" Grid.Row="1" Text="Cena bez DPH"></TextBlock>
        <TextBlock Grid.Column="1" Grid.Row="1" Text="Cena s DPH"></TextBlock>
    </Grid>
</DataGridTemplateColumn.Header> 
```

你能帮我吗，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:10:18.270

尝试将[Horizo​​ntalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.horizontalalignment.aspx)`Center`设置为`TextBlock`

```
<TextBlock HorizontalAlignment="Center" 
           Grid.Column="1" Grid.Row="1" Text="Cena s DPH"></TextBlock> 
```

您可以从这里开始阅读有关[WPF 布局系统的更多信息](http://wpftutorial.net/LayoutProperties.html)

您还需要`HorizontalContentAlignment`将`DataGridColumnHeader`

将此添加到`DataGridTemplateColumn`：

```
<DataGridTemplateColumn.HeaderStyle>
    <Style TargetType="DataGridColumnHeader">
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    </Style>
</DataGridTemplateColumn.HeaderStyle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:31:41.427

在 ColumnDefinitions 上尝试 Width="*"

# c - lint 错误 18“符号 'CsiNetInit(void)' 重新声明（精度）与第 21 行冲突

> ID：10450361
> 
> 赞同：0
> 
> 时间：2012-05-04T14:00:03.833
> 
> 标签：c, lint

任何人都可以解释一下我们会在哪些情况下得到这些错误？

我有以下代码，lint 显示以下错误：

```
#ifdef SIC_CSI_NET
short CsiNetInit(void);
#endif 
```

错误：

> “重新声明的符号‘CsiNetInit(void)’（精度）与第 21 行冲突

第 21 行没有任何内容，我可以看到用于注释的 **。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:58:48.517

可能，在处理这些行的编译单元之一中，`SIC_CSI_NET`没有定义，与引发此警告的文件相反，但使用了该函数。在这种情况下，Lint 根本看不到原型，带来了不同的警告（可能是 718“未声明的符号 'CsiNetInit'，假定返回 int”），并假定为原型`int CsiNetInit(void);`。

当它看到实际的原型时，区别就很明显了：`int`vs `short`.。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:14:02.347

查看 ; 的实际`CsiNetInit()`定义 也许它的原型指定了不同的返回类型`short`？

# google-app-engine - 无法从 Google App Engine 取回记录

> ID：10450363
> 
> 赞同：1
> 
> 时间：2012-05-04T14:00:08.150
> 
> 标签：google-app-engine, gql

我已经收集了数据，它不是特别干净的数据，并且已经批量上传到 DataStore。但是，当尝试简单地遍历所有记录时，我遇到了以下问题。此时我不太关心验证，因为我想做的只是执行批量操作，但 GAE 似乎甚至不允许我遍历数据记录。我想深入了解这一点。据我所知，所有记录都有该国家/地区的现场数据，我可以切换验证，但有人可以解释为什么会发生这种情况并且 GAE 很敏感。谢谢

```
result = Company.all()
        my_count = result.count()
        if result:
            for r in result:
                self.response.out.write("hello") 
```

数据模型具有以下属性：

```
class Company(db.Model):
    companyurl = db.LinkProperty(required=True)
    companyname = db.StringProperty(required=True)
    companydesc = db.TextProperty(required=True)
    companyaddress = db.PostalAddressProperty(required=False)
    companypostcode = db.StringProperty(required=False)
    companyemail = db.EmailProperty(required=True)
    companycountry = db.StringProperty(required=True) 
```

错误信息如下

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/XXX/1.358667163009710608/showcompanies.py", line 99, in get
    for r in result:
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 2312, in next
    return self.__model_class.from_entity(self.__iterator.next())
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 1441, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 973, in __init__
    prop.__set__(self, value)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 613, in __set__
    value = self.validate(value)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 2815, in validate
    value = super(StringProperty, self).validate(value)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 640, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property companycountry is required 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:47:28.733

如果您有希望在其自己的脚本中运行的批量进程，您可以构建您的`Company`类的修改版本而无需验证。由于`db.Model`类只是基于类名称的数据存储的包装器，因此您可以在代码的不同部分拥有具有不同行为的不同类。

因此，您可能有一个 model.py 文件，其中包含：

```
class Company(db.Model):
  companyurl = db.LinkProperty(required=True)
  # ...
  companycountry = db.StringProperty(required=True)

# Normal operations go here 
```

而且，另一个 bulk_process.py 文件包含：

```
class Company(db.Model):
  companyurl = db.LinkProperty()
  # ...
  companycountry = db.StringProperty()

result = Company.all()
my_count = result.count()
if result:
  for r in result:
    self.response.out.write("hello") 
```

因为第二个模型类缺少验证，它应该运行得很好。而且，由于代码在逻辑上是分开的，您不必担心会因删除其余代码中的验证而产生意外的副作用。只需确保您的批量过程不会在未经验证的情况下意外写回数据（除非您对此表示满意）。

# asp.net - SharePoint 委托控件 (GlobalSiteLink3)

> ID：10450364
> 
> 赞同：0
> 
> 时间：2012-05-04T14:00:11.230
> 
> 标签：asp.net, sharepoint, sharepoint-2010

如果我使用 GlobalSiteLink3 的 ControlID 将 SharePoint 委托控件添加到我的母版页，它会呈现某些社交图像按钮。这些在哪里定义？该委托如何控制“查找”社交网络菜单以进行渲染？我认为委托控件的可用控件是在 xml 文件中找到的，但我似乎无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:22:48.820

我不确定，但这些必须在某处的程序集中或资源中定义。有一件事想，如果你想定制我会删除它并制作我自己的系统。如果您只想自定义图像，请覆盖 css 并输入您自己的图像。

# c# - 如何使用 windowhook 模拟按键

> ID：10450366
> 
> 赞同：3
> 
> 时间：2012-05-04T14:00:13.480
> 
> 标签：c#, winforms, c#-4.0

我相信我正在尝试做的事情相当简单，但已经在谷歌上搜索了几个小时。
我有一个带有按钮的 Windows 窗体。当我按下按钮时，我想用鼠标在坐标 50、50 上单击鼠标右键。这在表单之外，所以我认为应该使用 windowhook 来完成。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:10:35.510

您不应该使用钩子，而是使用 WinApi。您需要来自 USER32.DLL 的 2 种方法之一（在 MSDN 中了解不同）：

```
[DllImport("user32.dll")]
private static extern bool SendMessage(int hnd, Messages msg, int wParam, uint lParam);
[DllImport("user32.dll")]
private static extern bool PostMessage(int hWnd, Messages msg, int wParam, int lParam); 
```

Messages 是一个枚举，这里是：

```
enum Messages
{
     WM_LBUTTONDOWN = 0x201,
     WM_LBUTTONUP = 0x202,
     WM_RBUTTONDOWN = 0x204,
     WM_RBUTTONUP = 0x205
} 
```

使用这种方法，您应该向 hWND 发送特殊消息等于 0，这意味着向 Desktop 发送消息。

这里有帮助你的方法：

```
public static void MouseLeftClick(Point p)
{
     int coordinates = p.X | (p.Y << 16);
     PostMessage(0, Messages.WM_LBUTTONDOWN, 0x1, coordinates);
     PostMessage(0, Messages.WM_LBUTTONUP, 0x1, coordinates);
}

public static void MouseRightClick(Point p)
{
     int coordinates = p.X | (p.Y << 16);
     PostMessage(0, Messages.WM_RBUTTONDOWN, 0x1, coordinates);
     PostMessage(0, Messages.WM_RBUTTONUP, 0x1, coordinates);
} 
```

通过将 0 更改为任何窗口的句柄，您可以在所需的任何窗口中按左或右按钮。

# c# - 我应该向包含数据集的类添加析构函数/终结器吗？

> ID：10450369
> 
> 赞同：1
> 
> 时间：2012-05-04T14:00:17.503
> 
> 标签：c#, destructor, dispose, idisposable

我已经阅读了这篇关于[处理数据集](https://stackoverflow.com/questions/913228/should-i-dispose-dataset-and-datatable)的帖子，但我仍然对析构函数有疑问。我知道那个帖子基本上说你不需要处理数据集、数据表和数据视图，但是我的数据集是巨大的，所以我想尽快释放那个内存。所以，我的问题是，即使在调用我的对象的 dispose 方法时数据集将被释放，我是否应该包含一个析构函数？另外，再次向我解释为什么需要“布尔处理”。

```
 public DEditUtil(DataSet dsTxData)
    {
        this.dsTxData = dsTxData;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
                dsTxData.Dispose();

            disposed = true;
        }
    }

    ~DEditUtil()
    {
        Dispose(false);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:07:35.653

是的，一般来说，只要满足以下任一条件，您就应该实现[完整的 IDisposable 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)：

1.  您的班级正在分配非托管资源，或者
2.  您拥有实现的托管资源`IDisposable`（这意味着它们又具有非托管资源）

终结器（C++/C# 称为“析构函数”的通用 CLR 术语）的存在是为了处理因某种原因未调用 Dispose 方法的情况。传递给受保护方法的布尔值`Dispose()`指示您是从 public 内部调用`Dispose`，还是从终结器内部调用。

如果您的公共`Dispose`方法被调用，则该调用堆栈是确定性的：您的 dispose 方法被直接调用，因此您可以安全地调用`Dispose`子对象上的方法（包括 ）。

如果您在终结器内部，那么您不知道其他也被垃圾收集的对象发生了什么。通常，从终结器中调用您控制的托管对象上的方法可能不安全。

所以，布尔值基本上是说：“如果为真，则处置一切；如果为假，则仅处置*我的*非托管资源，让其他人处理他们的。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:07:26.257

对象使用的内存`DataSet`一旦不再被代码引用，就可用于垃圾回收。

垃圾收集器将在稍后（不确定的）时间将该内存提供给程序。

这两件事都不取决于是否有析构函数或对 的调用`Dispose`，所以答案是否定的——你不需要析构函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:05:39.973

不，您在这里不需要任何其他方法调用，您所做的已经足够了。 `Dispose`将由运行时调用，您将释放分配的资源，清理让我们留给 GC 来决定如何以及何时进行清理。

如果你的内存**真的**有很大的问题，你可以*尝试*强制`GC.Collect()`收集垃圾，这通常是有效的，但以这种方式使用它从来都不是一个好习惯，所以尽量避免它。

**编辑**

根据评论，重要的是要注意*您的*情况下的执行流程，因为**只有**在不`DataSet`进行清理的情况下才会进行清理，并且从提供的代码来看，仅在代码的 esplicit 调用期间才会出现这种情况。**`disposed==false``disposing == true`**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T19:29:14.763

除了记录调用`Dispose`. 除非深入研究终结器如何工作的细节，以及关于它们运行的​​上下文的确切保证或不保证，否则永远不应该`Dispose`在终结器中调用任何其他对象的方法。特别是，如果一个对象的`Finalize()`方法正在运行，`IDisposable`它所引用的任何对象通常都属于以下类别之一：

1.  其他人仍然拥有对该对象的引用并期望它可用，因此调用“Dispose”会很糟糕。
2.  该对象无法在终结器线程上下文中安全地释放，因此调用“Dispose”会很糟糕。
3.  如果它的 `Dispose` 处理程序有任何有意义的事情要做，那么该对象将保持当前对象处于活动状态；当前对象的 `Finalize` 方法正在运行的事实意味着不再需要在另一个对象上调用 `Dispose`（这种情况可能发生在事件中）。
4.  该对象已经调用了它的`Finalize`方法，所以调用`Dispose`充其量是多余的。
5.  该对象计划调用其“Finalize”方法，因此调用“Dispose”可能是多余的。

尽管在某些情况下，一个对象可能需要在方法中清理另一个`IDisposable`对象，但在这种情况下正确使用是很棘手的，并且使用不当往往比根本不使用更糟糕。除其他外，通常仅在实体请求并且在放弃之前错误地未能调用时运行。通常最好将精力集中在确保在放弃对象之前正确处理，而不是尝试正确处理有错误的消费者代码。`Finalize``Finalize``Finalize``IDisposable``Dispose``Dispose`**

# gwt - GWT：集成第 3 方 Web 服务并通过 REST / gwt-RPC 向 gwt-client 公开

> ID：10450370
> 
> 赞同：0
> 
> 时间：2012-05-04T14:00:18.643
> 
> 标签：gwt, rest, gwt-rpc

我是一位经验丰富的 Java 开发人员，但对 GWT 很陌生。

考虑一个基于第 3 方 http POST 的 web 服务 api，它不完全基于 REST，因为除其他外，还有 servlet 的配置来调用这些服务。我正在构建扩展基本 gwt 组合的 gwt 组件，并使用这些 3rd 方数据服务来获取/改变数据。

在普通的 java 世界中，我会在这些服务上构建一个 REST 包装器，并通过 JaxB Xml/Json 将它们公开为 Pojos。然而，在 GWT 中，考虑到所需的序列化，我读到 GWT-RPC 将是最快的。预计数据会很大（数千个，分页）。

设计 3rd 方数据服务和 gwt 客户端组件之间的“桥梁”的最佳方式是什么？

1.  我排除了 RequestFactory，因为我们有一个由第三方提供的自定义 servlet 来获取 web 服务。
2.  添加一个 REST 包装器会添加一个感觉太重的第 3 层间接（第 3 方 api+rest+gwt-rpc 序列化）

关于低延迟设计的建议，我不必为每个服务调用（pojo）编写太多的包装类？

我想在服务器端考虑 jaxb，将模式作为新合同，并将它们转换为用于 gwt-client 的 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:50:34.997

我的建议是使用 Spring RestTemplate、Gwt-RPC 并拥有一个 RemoteServiceServlet/Spring 桥——这将通过来自服务器客户端的 POJO 和一个干净的层为您提供 RPC 调用以与您的外部 Web 服务进行通信。

这将是轻量级和干净的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:13:49.283

我在服务器端使用 RestEasy，它使用 Hibernate JPA 访问数据库。稍加修改，我应该能够切换到 Datanucleus JPA。

我在客户端使用 RestyGWT。

仔细考虑 DTO，我能够 - 在服务器和客户端之间共享相同的 DTO - 在服务器和客户端之间共享相同的 REST 接口（在服务器端 REST 接口上运行脚本以将返回类型转换为异步回调之后）。

[将多个 GWT 应用程序集成到一个可插拔平台](https://stackoverflow.com/questions/8247225/integrating-multiple-gwt-applications-into-a-pluggable-platform/8320940#8320940)中。

目前，我还在尝试将 JPA DTO 与 REST DTO 合并，以便在服务器、数据库和客户端之间拥有一组 POJO。因此，每个 DTO POJO 都会混合使用 JAX-RS、JAXB、Jackson JSON 和 JPA 注释。

为了减少不必要的客户端-服务器流量，我使用 JSP 作为 GWT 托管文件与 GWT Dictionary 类一起将所有特定于会话的会话静态信息传输到客户端。

# protobuf-net - 如何调试 protobuf-net 缺少的类型？

> ID：10450376
> 
> 赞同：2
> 
> 时间：2012-05-04T14:00:36.710
> 
> 标签：protobuf-net

我有 100 多个继承自通用基础的类。因此，我在运行时使用如下代码动态添加它们：

```
RuntimeTypeModel.Default.Add(typeof(BaseClass<SubClass>),true)
    .AddSubType(1,typeof(SubClass)); 
```

现在我在子类的序列化过程中遇到“缺少类型”异常，但我需要知道它试图破译哪种类型。

是否有事件处理程序或我可以使用的东西？如何确定问题类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:21:27.343

简单：看异常；在大多数情况下，它`.Message`会告诉你到底是什么让它不安；如果它不多说，也看看`.InnerException`，等等。如果对于某些已定义的场景，它仍然没有告诉您任何有用的信息：请告诉我；p

# javascript - javascript中有没有办法检测元素是否附加了任何事件？

> ID：10450384
> 
> 赞同：4
> 
> 时间：2012-05-04T14:01:15.827
> 
> 标签：javascript, jquery, html

我在页面上有一个链接列表，有时它们附有事件，有时没有（它们只是不做任何事情）。我想说，'如果这个元素没有事件处理程序（基本上它什么都不做），那么添加一个 disabled 类。我用谷歌搜索了它，但没有找到任何检测事件处理程序的东西。有谁知道做这样的事情的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:03:32.033

这应该会给你一个事件列表：

```
jQuery(theElement).data('events'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T14:05:21.053

你可以试试这个：

```
$("element").data("events"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:46:07.643

我使用以下，在 IE、FF 和 Chrome 中测试：

```
if(typeof document.getElementById("elementname").onchange === "function"){ 
    alert("has a function");
} else {
    alert("no function");
} 
```

# algorithm - 双向链表 Fortran。从头到尾打印。

> ID：10450387
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:01:27.430
> 
> 标签：algorithm, linked-list, fortran, fortran90

我正在尝试打印出一个双向链表。我能够从头到尾打印列表。但是，当我尝试从尾部打印到头部时，只打印头部。这是代码的最后一部分。我已经包含了链接列表代码。有什么建议么？

```
*INPUT UP TO EOF
   NULLIFY(HEAD,TAIL)
   DO WHILE(.TRUE.)
       READ(1,*,END=999)NAMEIN
       READ(1,*,END=999)AGEIN

*INITIALIZE THE POINTERS TO NULL
      NULLIFY(CURRENT)
      ALLOCATE(CURRENT)
      CURRENT%PERSON = NAMEIN
      CURRENT%AGE = AGEIN 
*IF THERE IS NOT AT LEAST ONE NODE

      IF(.NOT.ASSOCIATED(HEAD))THEN
          HEAD => CURRENT
          TAIL => CURRENT
          NULLIFY(HEAD%NEXT,HEAD%PREV)

*IF THE CURRENT IS LAST NODE      
      ELSE
*PLACE AT END OF LIST

          TAIL%NEXT =>CURRENT
         CURRENT%PREV=>TAIL
          NULLIFY(CURRENT%NEXT)

*CHANGE TAIL POINTER TO NEW END
          TAIL => CURRENT
          NULLIFY(CURRENT%NEXT)
          NULLIFY(CURRENT%PREV)
     END IF    
  END DO

999    CONTINUE

*PRINT FROM HEAD TO TAIL      
*POINT TO THE BEGINNING
  NULLIFY(TEMP)   
  TEMP => HEAD
*PRINT EACH NODE
  PRINT *,'-----PRINTING fROM HEAD TO TAIL-----'
  DO WHILE(ASSOCIATED(TEMP))
      PRINT 5,TEMP%PERSON
      PRINT 10,TEMP%AGE
      TEMP => TEMP%NEXT
  END DO

*PRINT FROM TAIL TO HEAD      
*POINT TO THE BEGINNING   
*PRINT EACH NODE
  CURRENT => TAIL
  PRINT *,'-----PRINTING fROM TAIL TO HEAD------'
  DO WHILE(ASSOCIATED(cCURRENT))
      PRINT 5,CURRENT%PERSON
      PRINT 10,CURRENT%AGE
      CURRENT => CURRENT%PREV
  END DO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:56:08.953

您使指针无效，`PREV`从而破坏了反向链接：

```
*CHANGE TAIL POINTER TO NEW END
          TAIL => CURRENT
          NULLIFY(CURRENT%NEXT)
          NULLIFY(CURRENT%PREV) <--- THE PROBLEM LIES HERE 
```

# python - 有没有办法将 unicode 编码为人类可读的 base64 变体（在 python 中）

> ID：10450388
> 
> 赞同：1
> 
> 时间：2012-05-04T14:01:30.727
> 
> 标签：python, encoding, character-encoding, radix

我想对来自 Web 界面的用户输入值进行编码，以便我可以以安全的方式将数据传递到我的系统中。换句话说，我想去掉我认为不好的字符，例如引号和括号等。

我可以使用 base64，它可以正常工作。但是，如果字符串最初是较低层的人类可读格式的字母数字，我希望能够读取这些字符串。

因此，`'Nice string'`将被编码为`'Nice string'`但`'N@sty!!``string!!))'`会被编码为类似`"N=E2sty=B3=B3=XY=XYstring=B3=B3=B1=B1"`. 我只是编造的，但你明白了。

是否存在这种编码格式，尤其是在 python 中是否存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:09:36.663

怎么样：

```
urllib.quote("'N@sty!!`` string,!!))'",safe=" ,.").replace('%','=')
'=27N=40sty=21=21=60=60 string,=21=21=29=29=27' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:03:29.663

我认为[Punycode](http://en.wikipedia.org/wiki/Punycode)会满足您的需求。

```
import encodings.punycode
encoded = encodings.punycode.punycode_encode(inputstr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:07:16.163

你可以使用`urllib.quote`：

```
>>> urllib.quote("Nice String");
'Nice%20String'
>>> urllib.quote("N@sty!!``string!!))");
'N%40sty%21%21%60%60string%21%21%29%29' 
```

# android - 如何从 Android 的后台线程更新 UI 中的文本

> ID：10450389
> 
> 赞同：0
> 
> 时间：2012-05-04T14:01:31.673
> 
> 标签：android, android-asynctask

在我的应用程序中，我需要根据来自网络的数据更新 UI 中的文本。为此，我使用 a`AsyncTask`在 Android 的后台工作。我的代码如下。

```
public class DefaultActivity extends Activity{

  TextView textView;
  public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    textView=(TextView)findViewById(R.id.textId);
    new networkFileAccess().execute("background","Progress","result");
  }

  private class networkFileAccess extends AsyncTask<String,String,String>{

    protected String doInBackground(String... background){
       return changeText();
    }

    private String changeText(){
     //Code to Access data from the Network.
     //Parsing the data.
     //Retrieving the boolean Value.
     if(booleanistrue){
      //Displaying some text on the UI.
      publishProgress("someTextOnUI");
      //Send request till we get get boolean value as false.
      changeText();
     }else{
       return "success";
     }
      return "";
    }

    protected void onProgressUpdate(String... progress){
      textView.setText("Wait background work is going on");
    }

    protected void onPostExecute(String result){
      if(result.equals("success")){
       //Code to finish the activity.
      }
    }
  } 
```

}

在上面的代码中，我能够运行后台线程，直到我得到布尔值为 false。但是文本没有在 UI 上更新。我可以`onProgressUpdate`通过调用方法使用 () 方法更新 UI 上的文本`publishProgress`吗？任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T14:08:17.927

像这样将您的 Ui 方法放在 runonUiTHREAD 中

```
runOnUiThread(new Runnable() {
public void run() {
    tv.setText("ABC");
}
 }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T14:07:54.167

在 AsyncTask 中，onPostExecute() 和 onPreExecute() 都在 UI 线程上运行。因此，您可以更改 onPostExecute() 方法中的文本。

或者您也可以在线程中运行的 doInBackground() 方法中调用 runOnUiThread：

```
runOnUiThread(new Runnable() {
    public void run() {
        // change text
    }
}); 
```

它发布 runnable 以在 UI 线程上运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T14:08:08.567

我想简短的回答是，是的，您可以在 onProgressUpdate 方法中更新 UI 元素。OnProgressUpdate 实际上是在 UI 线程本身上调用的，因此您不需要做任何花哨的事情。

如果硬编码为“等待后台工作正在进行”，你怎么知道你的 onProgressUpdate 不起作用？

此外，您是否有任何理由不使用 ProgressDialog 向您的用户显示“等待后台工作正在进行”消息？如果您真的希望他们等待，通常会更直观。它显示一个微调器或进度条（您的选择），让他们知道工作正在完成。它还可以作为一种防止他们做其他事情的方式，直到您的应用程序完成处理它必须处理的任何事情。

# jquery - jQuery：滚动时修复窗口底部边缘的div？

> ID：10450392
> 
> 赞同：1
> 
> 时间：2012-05-04T14:01:41.880
> 
> 标签：jquery, css, scroll, position

我的网站上有一个侧边栏，一旦达到它的高度，它应该贴在浏览器窗口的底部 - 我知道这听起来很复杂，但可能不是。

我在 jsfiddle 上做了一个小演示：http: [//jsfiddle.net/dJXS2/1/](http://jsfiddle.net/dJXS2/1/)

```
$(window).scroll(function() {

    var bh = $(window).height();
    var st = $(window).scrollTop();
    var eh = $('#element').height();
    var eo = $('#element').offset();

    if ( st >= (eo.top + eh) - bh ) {
        //$('#element').css('position', 'fixed');
    }

});
​ 
```

所以，再一次 - 我想要什么：你看到 div`page-height`只是为了测试目的而使身体更长。绿色侧边栏比页面高度短。一旦用户滚动到绿色条的底部之外，我希望绿色条固定在它当前所在的位置。所以我不希望用户看到绿条下面的空白。再次向上滚动时，我当然希望恢复正常的滚动行为，并且不应再修复绿色条。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:58:04.657

您可以使用位置：固定

[http://jsfiddle.net/dJXS2/5/](http://jsfiddle.net/dJXS2/5/)

```
$(window).scroll(function() {

    var bh = $(window).height();
    var st = $(window).scrollTop();
    var el = $('#element');
    var eh = el.height();
    if ( st >= (100 + eh) - bh ) {
        //fix the positon and leave the green bar in the viewport
        el.css({
            position: 'fixed',
            left: el.offset().left,
            bottom: 0
        });
    }
    else {
        // return element to normal flow
        el.removeAttr("style");
    }

}); 
```

# algorithm - LZW解压算法

> ID：10450395
> 
> 赞同：5
> 
> 时间：2012-05-04T14:01:50.250
> 
> 标签：algorithm, compression, lzw

我正在为必须实现 LZW 压缩/解压缩的任务编写程序。我为此使用以下算法：

-压缩

```
w = NIL;
   while ( read a character k )
       {
         if wk exists in the dictionary
         w = wk;
         else
         add wk to the dictionary;
         output the code for w;
         w = k;
       } 
```

-减压

```
read a character k;
   output k;
   w = k;
   while ( read a character k )    
  /* k could be a character or a code. */
        {
         entry = dictionary entry for k;
         output entry;
         add w + entry[0] to dictionary;
         w = entry;
        } 
```

对于压缩阶段，我只是输出表示字典条目索引的整数，起始字典也由 ascii 字符（0 - 255）组成。但是当我进入解压阶段时，我会收到此错误，例如，如果我压缩一个仅包含“booop”的文本文件，它将通过这些步骤生成一个输出文件：

```
w       k       Dictionary          Output

-       b       -                   -
b       o       bo (256)            98 (b)
o       o       oo (257)            111 (o)
o       o       -                   -
oo      p       oop (258)           257 (oo)
p       -       -                   112 (p) 
```

输出.txt：98 111 257 112

然后当我来解压文件时

```
w       k          entry        output       Dictionary
        98 (b)                  b   
b       111 (o)    o            o             bo (256)
o       257 (error) 
```

257 (oo) 尚未添加。谁能看到我在这里出错的地方，因为我很难过。算法错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:12:45.687

您的压缩部分正确且完整，但解压缩部分不完整。您只包括代码在字典中的情况。由于解压缩过程总是比压缩过程落后一步，因此解码器有可能找到不在字典中的代码。但是由于它只是落后了一步，它可以弄清楚编码过程接下来会添加什么并正确输出解码后的字符串，然后将其添加到字典中。像这样继续你的解压过程：

-减压

```
read a character k;
   output k;
   w = k;
   while ( read a character k )    
  /* k could be a character or a code. */
        {
         if k exists in the dictionary
         entry = dictionary entry for k;
         output entry;
         add w + entry[0] to dictionary;
         w = entry;
         else
         output entry = w + firstCharacterOf(w);
         add entry to dictionary;
         w = entry;
        } 
```

然后当你来解压文件，看到257，你发现字典里没有。但是你知道前面的条目是'o'，它的第一个字符也是'o'，把它们放在一起，你会得到“oo”。现在输出 oo 并将其添加到字典中。接下来你得到代码 112 并且确定你知道它是 p。完毕！

```
w       k          entry        output       Dictionary
        98 (b)                  b   
b       111 (o)    o            o             bo (256)
o       257 (oo)                oo            oo(257)
oo      112(p)                  p 
```

有关更多信息，请参阅： Steve Blackstock 的[此](http://www.martinreddy.net/gfx/2d/GIF-comp.txt)解释。一个[更好的页面，其中包含](http://gingko.homeip.net/docs/file_formats/lzwgif.html)[“icafe”](https://github.com/dragon66/icafe/wiki) Java 图像库 GIF 编码器和解码器所基于的实际解码器和编码器实现的流程图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:30:52.647

来自[http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch)您是否陷入这种情况？

如果解码器收到一个尚未在其字典中的代码 Z，会发生什么？由于解码器始终只是编码器后面的一个代码，因此只有当编码器刚刚生成它时，Z 才能在编码器的字典中，当为 χ 发出前一个代码 X 时。因此 Z 编码了一些 ω 即 χ + ?，解码器可以确定未知字符如下：

```
1) The decoder sees X and then Z.
2) It knows X codes the sequence χ and Z codes some unknown sequence ω.
3) It knows the encoder just added Z to code χ + some unknown character,
4) and it knows that the unknown character is the first letter z of ω.
5) But the first letter of ω (= χ + ?) must then also be the first letter of χ.
6) So ω must be χ + x, where x is the first letter of χ.
7) So the decoder figures out what Z codes even though it's not in the table,
8) and upon receiving Z, the decoder decodes it as χ + x, and adds χ + x to the table as the value of Z. 
```

每当编码器遇到 cScSc 形式的输入时，就会出现这种情况，其中 c 是单个字符，S 是字符串，并且 cS 已经在字典中，但 cSc 不在。编码器发出 cS 的代码，将 cSc 的新代码放入字典中。接下来，它在输入中看到 cSc（从 cScSc 的第二个 c 开始）并发出它刚刚插入的新代码。上面的论点表明，每当解码器接收到不在其字典中的代码时，情况一定是这样的。

尽管 cScSc 形式的输入似乎不太可能，但当输入流具有大量重复特征时，这种模式相当普遍。特别是，单个字符的长字符串（在 LZW 经常用于编码的图像种类中很常见）重复生成这种类型的模式。

* * *

对于这种特定情况，维基百科的东西很合适，你有 X+？其中 X 是 (o)，Z 到目前为止是未知的，所以第一个字母是 X，将 (oo) 添加到表中作为 257。我只是在继续我在维基百科上读到的内容，让我们知道结果如何如果这不是解决方案。

# eclipse - Tomcat 和 Eclipse 服务器配置

> ID：10450400
> 
> 赞同：0
> 
> 时间：2012-05-04T14:02:08.230
> 
> 标签：eclipse, tomcat

我在我的ubuntu上安装了tomcat。当我创建一个新的动态 Web 项目时，我选择了 tomcat 7 服务器。当我启动我的页面时，它可以在 localhost:8080/app/page 上运行，但是如果我在 localhost:8080 上运行，它会给我一个 404 错误。

如果我使用 /etc/init.d/tomcat start 之类的外部脚本启动 tomcat 服务器，它可以工作，但我无法启动我的应用程序，因为它说端口 8080 已被占用（被另一个 tomcat 实例占用）。

我对如何设置一切感到困惑，我会在启动时启动 tomcat 并为我的应用程序链接该实例。

你能解释一下我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:21:29.893

因此，我不反对从 Eclipse 中“启动/停止”服务器，但为了简单起见，我认为您可以从 Eclipse 中停止服务器（单击 windows/showview/Servers 然后停止服务器）。那么我认为如果您从外部脚本再次启动tomcat，您应该不会收到错误消息。然后你可以在 eclipse 中右键单击你的动态 web 项目并将其导出为 tomcat-install--dir/webapps 中的 war 文件。您的 Web 应用程序在哪里可用（在哪个上下文中）取决于 web.xml 文件。如果您需要有关此 plz 的更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:45:47.723

在 Eclipse 的 Servers 选项卡中打开服务器配置。在“服务器位置”上，标记“使用 Tomcat 安装”。

编辑：更准确地说，这将使 Eclipse “控制”您的 Tomcat 文件夹。因此，它不仅会在 eclipse .metadata 上复制并仅在其上部署您的应用程序；相反，它就像您运行 bin/startup 一样，但使用服务器视图中定义的一些配置。所以如果你去`localhost:8080`你会看到欢迎页面，因为`/ROOT`现在是由 Eclipse 启动的。

# soundcloud - 构建 SoundCloudAPI 失败并出现 Apple Mach-O Librarian 错误

> ID：10450404
> 
> 赞同：2
> 
> 时间：2012-05-04T14:02:25.030
> 
> 标签：soundcloud, ios-frameworks

我正在尝试使用[https://github.com/soundcloud/CocoaSoundCloudAPI](https://github.com/soundcloud/CocoaSoundCloudAPI)上的说明将 SoundCloud 共享集成到我的项目中。在我的工作区中，OHAttributedLabel、OAuth2Client、JSONKit 和 SoundCloudUI 都构建良好，但构建 SoundCloudAPI for iOS 总是失败并出现以下错误：

> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：找不到文件：-lSoundCloudAPI /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr /bin/libtool：文件：-lSoundCloudAPI 不是目标文件（库中不允许） 命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool 失败，退出代码为 1

有谁知道这里发生了什么？

# java - 为什么检索系统信息会返回空异常点？

> ID：10450405
> 
> 赞同：0
> 
> 时间：2012-05-04T14:02:36.720
> 
> 标签：java, swing, runtime, nullpointerexception, swingworker

我有托盘来获取系统信息`Runtime.getRuntime().exec(cmd);`

我收到以下错误：

```
java.lang.NullPointerException
    at java.lang.Runtime.exec(Runtime.java:422)
    at java.lang.Runtime.exec(Runtime.java:326)
    at mytest.SystemInfoToTextArea.doInBackground(SystemInfoToTextArea.java:31)
    at mytest.SystemInfoToTextArea.doInBackground(SystemInfoToTextArea.java:16) 
```

**欢迎任何建议**

**班级代码**

```
public class SystemInfoToTextArea extends SwingWorker<String, Void> {
private JTextArea textArea;
private String cmd;

public SystemInfoToTextArea(JTextArea textArea, String cmd) {
    textArea = textArea;
    cmd = cmd;
}

@Override
protected String doInBackground() throws Exception {
    String outputMem = null;
    try {
        String lineMem;
        outputMem = "";
        Process procMem = Runtime.getRuntime().exec(cmd);
        BufferedReader input =
                new BufferedReader
                        (new InputStreamReader(procMem.getInputStream()));
        while ((lineMem = input.readLine()) != null) {
            outputMem = (lineMem + "\n");

        }

        input.close();
    } catch (Exception err) {
        err.printStackTrace();
    }
    return outputMem;
}

@Override
protected void done() {
    super.done();
    try {
        textArea.append(get());
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }

}

public static void main(String... args){
    JFrame frame = new JFrame();
    frame.setSize(700,500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = new JPanel();
    JTextArea textArea = new JTextArea("System info");

    panel.add(textArea);
    frame.setContentPane(panel);

    frame.setVisible(true);

    SystemInfoToTextArea systemInfoToTextArea = new SystemInfoToTextArea(textArea,"cmd /C dir");
     systemInfoToTextArea.execute();

}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T14:04:28.757

你`cmd`显然是`null`因为你的构造函数代码是错误的。写

```
this.cmd = cmd; 
```

与 textArea 相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:08:08.553

You constructor doesn't do what you think:

```
public SystemInfoToTextArea(JTextArea textArea, String cmd) {
    textArea = textArea;
    cmd = cmd;
} 
```

This just reassigns the parameters (to their own values!), and doesn't set the *fields* with the same names. What you want to do is prefix them with this:

```
public SystemInfoToTextArea(JTextArea textArea, String cmd) {
    this.textArea = textArea;
    this.cmd = cmd;
} 
```

A decent IDE would warn you of this mistake.

# java - Java 音频剪辑在 Mac OS X 上停止后不会继续循环

> ID：10450406
> 
> 赞同：1
> 
> 时间：2012-05-04T14:02:39.617
> 
> 标签：java, macos, audio, javasound

如果我开始播放剪辑，`loop(Clip.LOOP_CONTINUOUSLY)`它可以正常工作并无限循环。但是，如果我“暂停”它`stop`然后尝试再次开始循环，它只会播放它之前播放的循环的剩余部分，并且不会继续循环。

据我所知，这只发生在 OS X 上（它在 Windows 中运行良好）。

难道我做错了什么？从所有 Clip 文档来看，它看起来不像。

如果我在停止剪辑后将帧位置设置回 0，则会循环播放，但这不是所需的效果（从原来的位置恢复）。

SSCCE：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.net.URL;
import javax.swing.*;
import javax.sound.sampled.*;

public class LoopSound {

    public static void main(String[] args) throws Exception {
        //borrowed from http://stackoverflow.com/tags/javasound/info
        //the sound will not continue to loop on mac os x
        //it does continue looping correctly on ms windows
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        final Clip clip = AudioSystem.getClip();
        // getAudioInputStream() also accepts a File or InputStream
        AudioInputStream ais = AudioSystem.
            //getAudioInputStream( new File("filename") );
            getAudioInputStream( url );
        clip.open(ais);
        // loop continuously
        clip.loop(-1);
        SwingUtilities.invokeLater(new Runnable() {
            boolean isPlaying = true;
            public void run() {

                JFrame window = new JFrame("test");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JToggleButton button = new JToggleButton("sound toggle");
                button.setSelected(true);
                button.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent arg0) {
                        if(isPlaying){
                            clip.stop();
                        }else{
                            clip.loop(-1);
                        }
                        isPlaying = !isPlaying;
                    }
                });

                window.add(button);
                window.pack();
                window.setVisible(true);
            }
        });
    }
} 
```

# jquery - 在 JavaScript 中使用验证引擎插件检查验证表单

> ID：10450409
> 
> 赞同：0
> 
> 时间：2012-05-04T14:03:02.880
> 
> 标签：jquery, asp.net, validation

我是 jQuery 验证插件（[验证引擎](http://www.position-absolute.com)）的初学者。我写了这段代码

```
<head runat="server">
    <title></title>
    <link href="validationEngine.jquery.css" rel="stylesheet" type="text/css" />
    <script src="jquery-1.6.min.js" type="text/javascript"></script>
    <script src="jquery.validationEngine-fa.js" type="text/javascript"></script>
    <script src="jquery.validationEngine.js" type="text/javascript"></script>
    <script>
        $(function () {
            jQuery("#form1").validationEngine();
            $("#Button1").click(function () {

                alert("hhhhhhhhhhh");
            });
        });
    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
        <asp:Button ID="Button2" runat="server" Text="Button" onclick="Button2_Click" />
        <input id="Text1" type="text" class="validate[required] text-input" />
        <input id="Button1" type="button" value="button" />
    </div>
    </form>
</body> 
```

我想在用户单击 Button1 时首先验证表单。如果表单在显示中是有效的警报，但是当用户单击 button1 警报时通过此代码显示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T15:49:11.153

试试这个

```
<script type="text/javascript">
    $(document).ready(function () {

        $("#form1").validationEngine();

        $("#Button1").live('click', function () {
            var valid = $("#form1").validationEngine('validate');
            var vars = $("#form1").serialize();

            if (valid == true) {

                alert("Hi");

            } else {
                $("#form1").validationEngine();
            }
        });
    });

</script> 
```

这也有效

```
 <script type="text/javascript">
    $(document).ready(function () {

        $("#form1").validationEngine();

        $("#Button1").click(function () {
            var valid = $("#form1").validationEngine('validate');
            var vars = $("#form1").serialize();

            if (valid == true) {

                alert("Hi");

            } else {
                $("#form1").validationEngine();
            }
        });
    }); 
```

# objective-c - 是否可以使用 Objective-C 修改 iTunes 曲目？

> ID：10450416
> 
> 赞同：1
> 
> 时间：2012-05-04T14:03:15.217
> 
> 标签：objective-c, itunes, scripting-bridge

问题在标题中:) 我正在玩一些 Objective-C 和 Scripting Bridge。我知道可以从 iTunes 获取信息（只读），但我看不到任何修改曲目的方法，例如更改其名称。是否有可能使用这种或另一种技术？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:24:58.347

好吧，从 AppleScript Editor 的脚本库中，我可以看到 a`file_track`继承自`item`并且 an`item`具有读写属性`name`。因此，您应该能够像阅读它一样轻松地设置它。

编辑：实际上，几乎每条元数据都是`track`（其中`file_track`继承的）的一部分，并且大多数是读写属性......

[Doug Adams](http://dougscripts.com)有一个[这样的脚本](http://dougscripts.com/itunes/scripts/ss.php?sp=songtitlearticles)，它可以更改 iTunes 中歌曲的标题。也许看看它？

至于通过 Objective-C 设置它，也许[这个文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html#//apple_ref/doc/uid/TP40006104-CH4-DontLinkElementID_14)可以帮助你。

摘自网站：

> ***清单 2-3 设置 Finder 项的锁定属性***
> 
> ```
> int main (int argc, const char * argv[]) { 
>    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init]; 
>    FinderApplication *theFinder = [SBApplication applicationWithBundleIdentifier: @"com.apple.finder"]; 
>    SBElementArray *trashItems = [[theFinder trash] items]; 
>    if ([trashItems count] > 0) { 
>        for (FinderItem *item in trashItems) { 
>            if ([item locked]==YES) 
>                [item setLocked:NO];          // <<<-- Setting the property
>        } 
>    } 
>    [pool drain]; 
>    return 0; 
> } 
> ```

* * *

你有没有尝试过：

```
iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"]; 
[[iTunes currentTrack] setName:@"The New Song Title"]); 
```

# ruby - PrivatePub & Faye-Websocket 不工作

> ID：10450420
> 
> 赞同：0
> 
> 时间：2012-05-04T14:03:23.043
> 
> 标签：ruby, websocket, faye

就在最近我的 private_pub 设置停止工作。我不确定为什么会这样，因为我发现很难通过以下错误诊断问题：

```
[ERROR] [Faye::RackAdapter] input must be a string or IO 
```

这是一个完整的堆栈跟踪：

```
2012-04-18 13:33:32 [ERROR] [Faye::RackAdapter] input must be a string or IO
Backtrace:
/ruby/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:36:in `parse'
/ruby/1.9.1/gems/yajl-ruby-1.1.0/lib/yajl.rb:36:in `parse'
/ruby/1.9.1/gems/faye-0.8.2/lib/faye/adapters/rack_adapter.rb:98:in `handle_request'
/ruby/1.9.1/gems/faye-0.8.2/lib/faye/adapters/rack_adapter.rb:91:in `call'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:53:in `process'
/ruby/1.9.1/gems/faye-websocket-0.4.5/lib/faye/adapters/thin.rb:41:in `process'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:38:in `receive_data'
/ruby/1.9.1/gems/faye-websocket-0.4.5/lib/faye/adapters/thin.rb:45:in `receive_data'
/ruby/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb:179:in `run_machine'
/ruby/1.9.1/gems/eventmachine-1.0.0.beta.4/lib/eventmachine.rb:179:in `run'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:86:in `start'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
/ruby/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
/ruby/1.9.1/bin/thin:23:in `load'
/ruby/1.9.1/bin/thin:23:in `<main>' 
```

关于如何调试/修复此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:14:14.753

I have the same problem. I'm searching for the answer everywhere I can, but there are no normal answers. One issue [here](https://groups.google.com/group/faye-users/browse_thread/thread/7ef8a55f15765950) found but not explained good. if it help you I would be happy.

Please, if someone knows why such error happens -- help with this. It is very needed.

# sql-server-2008 - 按日期分组的 SQL 运行总计

> ID：10450425
> 
> 赞同：2
> 
> 时间：2012-05-04T14:03:46.570
> 
> 标签：sql-server-2008, count

（使用 SQL Server 2008）如果我构建一个视图，然后对视图进行查询，我可以很容易地让它工作，但我想在一个 SQL 查询中执行此操作。我有一个包含两列（DeliveredDate (DateTime)、Delivered (Varchar)）的表。我首先将 DeliveredDate 转换为 Date，然后按 Date 分组。同时，我正在执行 Count on Delivered（列是 YES 或 NULL）。这是我用来完成这部分的内容：

```
 SELECT CAST([DeliveredDate] As Date),
         COUNT([Delivered])
  FROM [TableName]
  GROUP BY CAST([DeliveredDate] As Date)
  ORDER BY CAST([DeliveredDate] As Date) 
```

作为输出，我得到如下信息：

```
DeliveredDate  |  Delivered
 2012-04-24          10
 2012-04-25         500
 2012-04-26         422
 2012-04-27          33 
```

我正在寻找的是这样的：

```
DeliveredDate  |  Delivered  |  RunningTotal
 2012-04-24          10            10
 2012-04-25         500           510
 2012-04-26         422           932
 2012-04-27          33           965 
```

我尝试了各种我在那里看到的示例，但似乎没有一个与在所述 Count 上执行 Count 和 RunningTotal 的场景相匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:14:33.663

如果您正在使用为 SUM 实现有序 OVER 子句的产品，您可以执行以下操作：

```
select
  cast(DeliveredDate as date) as DeliveredDate,
  count(Delivered) as Delivered,
  sum(count(Delivered)) over (
    order by DeliveredDate
  ) as RunningTotal
from Orders
group by OrderDate
order by OrderDate; 
```

您的表情计数（已交付）有点奇怪。只是为了确保它是您想要的：它将计算特定日期的已交付列中的值不为空的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:19:04.630

我不确定 CTE 是否算作视图，但这将在 SQL 2005+ 中工作，它不支持 SUM 的有序 OVER 子句，

```
WITH cte (DeliveredDate, Delivered)
     AS (SELECT Cast([DeliveredDate] AS DATE) DeliveredDate, 
                Count([Delivered]) Delivered 
         FROM   [TableName] 
         GROUP  BY Cast([DeliveredDate] AS DATE)) 
SELECT d1.delivereddate, 
       d1.delivered, 
       Sum(d2.Delivered) RunningTotal 
FROM   cte d1 
       LEFT JOIN cte d2 
         ON d1.delivereddate >= d2.DeliveredDate 
GROUP  BY d1.delivereddate, 
          d1.delivered 
ORDER BY d1.delivereddate 
```

# php - SOAP 客户端接收空的标准类

> ID：10450438
> 
> 赞同：4
> 
> 时间：2012-05-04T14:04:12.827
> 
> 标签：php, zend-framework, soap, wsdl, stdclass

我不明白为什么我得到一个空的 stdclass 对象。

这是代码：

```
$client = new Zend_Soap_Client('http://urltocodethatgenerateswsdl?wsdl', $options);
$result = $client->sayHello(array( 'who' => 'Heidi'));
Zend_Debug::dump($client->getLastResponse());
Zend_Debug::dump($result); 
```

这是我为 lastResponse 得到的：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://urltocodethatgenerateswsdl">
    <SOAP-ENV:Body>
        <ns1:sayHelloResponse>
            <return>Say Hello Heidi</return>
        </ns1:sayHelloResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是 $result 的转储

```
object(stdClass)#23 (0) {} 
```

这是为什么？有人可以解释一下吗？

**更新：添加了 WSDL（由 Zend 使用 AutoDiscovery 自动生成）**

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://clxpreview.ch/index/soap" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="Service_Soap" targetNamespace="http://clxpreview.ch/index/soap">
<types>
    <xsd:schema targetNamespace="http://urltocodethatgenerateswsdl">
        <xsd:complexType name="User">
            <xsd:all>
                <xsd:element name="username" type="xsd:string" nillable="true"/>
                <xsd:element name="password" type="xsd:string" nillable="true"/>
            </xsd:all>
        </xsd:complexType>
    </xsd:schema>
</types>
<portType name="Service_SoapPort">
    <operation name="getSystemTime">
        <documentation>getSystemTime</documentation>
        <input message="tns:getSystemTimeIn"/>
        <output message="tns:getSystemTimeOut"/>
    </operation>
    <operation name="sayHello">
        <documentation>sayHello</documentation>
        <input message="tns:sayHelloIn"/>
        <output message="tns:sayHelloOut"/>
    </operation>
    <operation name="getUser">
        <documentation>setUser</documentation>
        <input message="tns:getUserIn"/>
        <output message="tns:getUserOut"/>
    </operation>
    <operation name="setUser">
        <documentation>setUser</documentation>
        <input message="tns:setUserIn"/>
        <output message="tns:setUserOut"/>
    </operation>
</portType>
<binding name="Service_SoapBinding" type="tns:Service_SoapPort">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="getSystemTime">
        <soap:operation soapAction="http://urltocodethatgenerateswsdl#getSystemTime"/>
        <input>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </input>
        <output>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </output>
    </operation>
    <operation name="sayHello">
        <soap:operation soapAction="http://urltocodethatgenerateswsdl#sayHello"/>
        <input>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </input>
        <output>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </output>
    </operation>
    <operation name="getUser">
        <soap:operation soapAction="http://urltocodethatgenerateswsdl#getUser"/>
        <input>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </input>
        <output>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </output>
    </operation>
    <operation name="setUser">
        <soap:operation soapAction="http://urltocodethatgenerateswsdl#setUser"/>
        <input>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </input>
        <output>
            <soap:body use="literal" namespace="http://urltocodethatgenerateswsdl"/>
        </output>
    </operation>
</binding>
<service name="Service_SoapService">
    <port name="Service_SoapPort" binding="tns:Service_SoapBinding">
        <soap:address location="http://urltocodethatgenerateswsdl"/>
    </port>
</service>
<message name="getSystemTimeIn"/>
<message name="getSystemTimeOut">
    <part name="return" type="xsd:string"/>
</message>
<message name="sayHelloIn">
    <part name="who" type="xsd:string"/>
</message>
<message name="sayHelloOut">
    <part name="return" type="xsd:string"/>
</message>
<message name="getUserIn">
    <part name="uid" type="xsd:int"/>
</message>
<message name="getUserOut">
    <part name="return" type="tns:User"/>
</message>
<message name="setUserIn">
    <part name="user" type="tns:User"/>
</message>
<message name="setUserOut">
    <part name="return" type="xsd:string"/>
</message>
</definitions> 
```

提前致谢

开尔文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:48:20.447

我找到了它不起作用的原因。我不得不在配置中**关闭缓存**并在我提出的请求中添加一个不缓存的选项。

通过使用 ini_set 或修改 php.ini 来禁用缓存：

```
ini_set("soap.wsdl_cache_enabled", 0); 
```

我还在我的请求中添加了以下选项参数：

```
array('cache_wsdl' => WSDL_CACHE_NONE) 
```

这是我在 Stackoverflow 上找到的一篇文章： [在 PHP 中，如何清除 WSDL 缓存？](https://stackoverflow.com/questions/303488/in-php-how-can-you-clear-a-wsdl-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:53:19.450

这篇文章似乎讨论了同样的问题：

[使用 Zend_Soap 返回对象](https://stackoverflow.com/questions/4400605/return-object-with-zend-soap)

引文：

*您需要在客户端中传递一个“类映射”选项变量。请参阅[http://www.php.net/manual/en/soapclient.soapclient.php](http://www.php.net/manual/en/soapclient.soapclient.php)和[http://www.php.net/manual/en/soapclient.soapclient.php](http://www.php.net/manual/en/soapclient.soapclient.php)关于传入的 'classmap' 选项选项数组。基本上它应该是一个数组，将您的类映射到在 WSDL 文件中定义为返回对象的类。*

卢西安

# javascript - web worker postMessage 处理顺序

> ID：10450441
> 
> 赞同：4
> 
> 时间：2012-05-04T14:04:30.190
> 
> 标签：javascript, web-worker

使用以下代码：

文件：

```
<!DOCTYPE html>

<html>

    <head>
        <title></title>
        <!--<script type="text/javascript" src="worker.js"></script>-->
        <script type="text/javascript" src="run.js"></script>
    </head>

    <body>
        <div id='log'></div>
    </body>

</html> 
```

运行.js：

```
window.onload = function(){

    var worker = new Worker('worker.js');

    var log = document.getElementById('log');

    log.innerHTML += "<p>"+"test"+"</p>";

    worker.addEventListener('message', function(e) {
        //alert(e.data);
        log.innerHTML += '<p>' + e.data + '</p>';
    }, false);

    for(var i=1; i<21;i++){
        worker.postMessage(i);
    }
}; 
```

worker.js

```
self.addEventListener('message', function(e) {
  self.postMessage(e.data);
}, false); 
```

输出是我期望的 1 到 20 的列表，但是如果我取消注释 run.js 消息侦听器中的警报调用，它会打印出 20 到 1。这是因为警报导致写入页面延迟并且消息处理备份在堆栈中，所以最后一个打开是第一个关闭？或者是别的什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T07:47:28.343

是的，这是因为“alert()”。它阻止了工作侦听器块内代码的进一步执行。换句话说，代码：

```
log.innerHTML += '<p>' + e.data + '</p>'; 
```

仅在按下警报框的模式窗口上的“确定”按钮后执行，您将按顺序按下它们，按此顺序“log.innerHTML”将被更改，因此您按降序按下它们，那就是为什么你会得到这个结果。如果您不使用警报消息，一切都会顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-13T20:58:05.417

我认为这是 Firefox 中的一个错误。在我尝试过的任何浏览器中，我都没有在 2020 年看到这种行为：它们的顺序都是从 1 到 20。

# c# - 实现接口的通用基类

> ID：10450443
> 
> 赞同：4
> 
> 时间：2012-05-04T14:04:37.710
> 
> 标签：c#, asp.net, generics

如何在 asp.net webforms 项目中声明我的 Basepage 类以实现 IBasePage？

```
public abstract class BasePage<T> : Page where T : class
{

} 
```

和界面

```
public interface IBasePage
    {
        UserProfile UserProfile { get;}
        bool IsStreamingAdmin {get;}
        int? EmplId {get;}       
    } 
```

我的最终目标是能够编写如下代码：

```
IBasePage page = HttpContext.Current.Handler as IBasePage;
if (page.IsStreamingAdmin)
{
    //do something here....
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:07:35.187

你的问题对我来说并不完全清楚，但你不能这样做：

```
public abstract class BasePage<T> : Page, IBasePage where T : class { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:17:34.607

```
public abstract class BasePage<T> : Page, IBasePage where T : class { } 
```

如果您的类实现了代码中定义的所有方法，那么`interface`您的代码就能够编译，并且您将能够调用`instance`您的抽象类。

调用`page.IsStreamingAdmin`将导致返回您拥有实例的类的值。

# vb.net - 如何将文件从剪贴板粘贴到特定路径

> ID：10450447
> 
> 赞同：1
> 
> 时间：2012-05-04T14:04:47.840
> 
> 标签：vb.net, winforms

如何从剪贴板粘贴文件到我的路径？我在 VB .NET 中工作。我从剪贴板获得文件名，但不知道如何从剪贴板中提取文件并将其保存到我的文件夹中。

```
 Dim data As IDataObject = Clipboard.GetDataObject()
  If data.GetDataPresent(DataFormats.FileDrop) Then
     Dim files As String() = data.GetData(DataFormats.FileDrop)
  End If 
```

有谁能够帮助我？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:31:56.340

您可以使用`Path`该类来隔离文件名并创建新文件的路径以在文件复制操作中使用：

```
Dim data As IDataObject = Clipboard.GetDataObject
If data.GetDataPresent(DataFormats.FileDrop) Then
  For Each s As String In data.GetData(DataFormats.FileDrop)
    Dim newFile As String = Path.Combine("c:\mynewpath", Path.GetFileName(s))
    File.Copy(s, newFile)
  Next
End If 
```

示例需要错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T19:58:58.947

您还可以获得文件的完整路径，如下所示：

```
Dim objeto As IDataObject = Clipboard.GetDataObject
For Each data As String In objeto.GetData(DataFormats.FileDrop)
    ...
    Dim newFile As String = Path.GetFullPath(data.ToString)
    ...
Next 
```

# asp.net - 如何在 MVC 中显示列表

> ID：10450448
> 
> 赞同：1
> 
> 时间：2012-05-04T14:04:48.710
> 
> 标签：asp.net, asp.net-mvc, vb.net, asp.net-mvc-3

我正在尝试显示成员/角色表中的“角色”列表

我的控制器是：

```
' GET: /Admin/Index
Function Index() As ActionResult
    Dim model = New AdminRoles()
    model.Roles = Roles.GetAllRoles()
    Return View(model)
End Function 
```

我的模型是：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations
Imports System.ComponentModel

Public Class AdminRoles
    Public Property Roles() As String()
End Class

Public Class AdminRolesDBContext
  Inherits DbContext
  Public Property AdminRole() As DbSet(Of AdminRoles)
End Class 
```

我的看法是：

```
@ModelType IEnumerable(Of MPConversion.AdminRoles)
@Code
    ViewData("Title") = "Index"
End Code
<h2>Index</h2>
<p>    @Html.ActionLink("Create New", "Create")</p>
<table><tr><th>Role</th><th></th></tr>
@For Each item In Model
    Dim currentItem = item
    @<tr>
    <td>currentitem.Roles</td>
        <td>
            @*@Html.ActionLink("Edit", "Edit", New With {.id = currentItem.PrimaryKey}) |
            @Html.ActionLink("Details", "Details", New With {.id = currentItem.PrimaryKey}) |
            @Html.ActionLink("Delete", "Delete", New With {.id = currentItem.PrimaryKey})*@
        </td>
    </tr>
Next
</table> 
```

但是我得到错误：

> 传递到字典中的模型项的类型为“MPConversion.AdminRoles”，但此字典需要类型为“System.Collections.Generic.IEnumerable`1[MPConversion.AdminRoles]”的模型项。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:08:33.247

您的类 adminRoles 没有实现 IEnumerable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:15:33.570

只需使用

```
@ModelType MPConversion.AdminRoles 
```

进而

```
 @For Each item In Model.Roles 
```

您的 AdminRoles 类包含某种由 Roles.GetAllRoles() 返回的集合，但对象本身 (AdminRoles) 不是一个集合，并且根本不实现 IEnumerable。

**更新** 以优化一点：

控制器

```
Function Index() As ActionResult
    IEnumerable(Of String) allRoles = Roles.GetAllRoles() // modify the GetAllRoles method
    Return View(allRoles)
End Function 
```

看法：

```
@ModelType IEnumerable(Of String)
@Code
    ViewData("Title") = "Index"
End Code
<h2>Index</h2>
<p>    @Html.ActionLink("Create New", "Create")</p>
<table><tr><th>Role</th><th></th></tr>
@For Each item In Model
    <tr>
    <td>@item</td>
    @* Commented part deleted for brevity *@
    </tr>
Next
</table> 
```

# javascript - SOAP 客户端仅适用于 Google Chrome

> ID：10450450
> 
> 赞同：0
> 
> 时间：2012-05-04T14:05:04.540
> 
> 标签：javascript, jquery, google-chrome, soap

我用 javascript 制作了一个 SOAP 客户端。问题是它只适用于谷歌浏览器。

编码：

```
$("#send").click(function (event) {
    var wsUrl = "http://myip:8084/Service1.asmx";
    var soapRequest =
        '<?xml version="1.0" encoding="utf-8"?> \
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" \
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
            <soap:Body> \
                <GetVozilo xmlns="http://mydomain.com/apps"> \
                      <vin>' + $("#vin").val() + '</vin> \
                </GetVozilo> \
            </soap:Body> \
        </soap:Envelope>';

        console.log(soapRequest);

                $.ajax({
                    type: "post",
                    url: wsUrl,
                    contentType: "text/xml",
                    dataType: "xml",
                    data: soapRequest,
                    success: processSuccess,
                    error: processError
                });

            }); 
```

在控制台中，我也收到此错误：

> 选项[http://mydomain.com/Service1.asmx](http://mydomain.com/Service1.asmx) 403（禁止）

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:28:50.600

有一种方法可以在任何浏览器中从不同域获取数据。在 jQuery 中，您可以使用 JSONP。更多信息：[http ://www.jquery-tutorial.net/ajax/same-origin-policy/](http://www.jquery-tutorial.net/ajax/same-origin-policy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:15:32.650

听起来很像这是因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

您不能将 ajax-requets 发送到另一个域（在您的情况下`localhost`vs `84.255.246.99:8084`），而不是执行脚本的域。我假设您在 chrome 中添加了某种异常规则，因此它在该浏览器中适用于您。

要检查这一点，请使用 firebug 或非工作浏览器的开发者控制台来检查响应标头 - 您可能会发现如下内容：

```
X-Frame-Options:sameorigin 
```

# java - log4j 控制台和 SMTPAppender：如何使用多个附加程序

> ID：10450451
> 
> 赞同：0
> 
> 时间：2012-05-04T14:05:08.130
> 
> 标签：java, email, console, log4j

我正在开发一个移动应用程序，我正在使用 log4j 来显示信息。我想使用 log4j 在控制台上显示它正确执行的信息，但是当我尝试添加 SMTPAppender 以在发生错误时发送电子邮件时遇到问题。它没有显示错误，但是当我添加 SMTPAppender 启动它时，tomcat 无法正确启动。

我正在使用 Apache Tomcat 7.0.23

这是我的 log4j.properties 文件

```
log4j.rootCategory=TRACE, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} [application] %-5p %m%n

log4j.rootCategory=ERROR, mail

log4j.appender.mail=org.apache.log4j.net.SMTPAppender
#defines how often emails are send
log4j.appender.mail.BufferSize=1
log4j.appender.mail.SMTPHost=smtp.gmail.com
log4j.appender.mail.SMTPUsername=*******   #not the username im using
log4j.appender.mail.SMTPPassword=*******   #not the password im using
log4j.appender.mail.From=info@gmail.com
log4j.appender.mail.To=noc@gmail.com
log4j.appender.mail.Subject="Application.log error occurred"
log4j.appender.mail.layout=org.apache.log4j.PatternLayout
log4j.appender.mail.layout.ConversionPattern=%d{ISO8601} [application] %-5p %m%n 
```

这是我的控制台

```
Found binding in [jar:file:/C:/Documents%20and%20Settings/noconnor/.m2/repository/org/slf4j/slf4j-simple/1.6.1/slf4j-simple-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/Documents%20and%20Settings/noconnor/.m2/repository/org/slf4j/slf4j-log4j12/1.6.2/slf4j-log4j12-1.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

这是添加第二个附加程序的正确方法还是我在某处犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:09:56.977

You can only have one `log4j.rootCategory` property.

You can have multiple appenders:

```
log4j.rootCategory=TRACE, stdout, mail 
```

But you probably don't want all messages go to mail. For this, you need to add [priority filter](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/LevelRangeFilter.html) to your mail appender, but I think that's only possible to do using [XML syntax](http://wiki.apache.org/logging-log4j/Log4jXmlFormat) instead of log4j.properties.

Here is an example for using both appenders, but "mail" appender is only activated for ERROR and FATAL messages.

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="stdout" class="org.apache.log4j.ConsoleAppender"> 
    <param name="Target" value="System.out"/> 
    <layout class="org.apache.log4j.PatternLayout"> 
      <param name="ConversionPattern" value="%d{ISO8601} [application] %-5p %m%n"/> 
    </layout> 
  </appender> 

  <appender name="mail" class="org.apache.log4j.net.SMTPAppender">
    <!-- mail configuration here... -->

    <layout class="org.apache.log4j.PatternLayout"> 
        <param name="ConversionPattern" value="%d{ISO8601} [application] %-5p %m%n"/> 
    </layout> 

    <filter class="org.apache.log4j.varia.LevelRangeFilter">
        <param name="levelMin" value="ERROR" />
        <param name="levelMax" value="FATAL" />
    </filter>
  </appender>

  <root> 
    <priority value="trace" /> 
    <appender-ref ref="stdout" /> 
    <appender-ref ref="mail" />
  </root>

</log4j:configuration> 
```

You need to add more mail configuration options to match your original properties file. This file must be called "log4j.xml" and must be used instead of "log4j.properties" (remove this one).

# php - 有没有更好的方法来查看是否正在写入文件？

> ID：10450454
> 
> 赞同：6
> 
> 时间：2012-05-04T14:05:18.540
> 
> 标签：php

我们有一个带有 samba 的 FreeBSD 服务器，员工将图像文件复制到该服务器上，然后上传到我们的 Web 服务器（这样他们就不必与 ftp 混淆）。有时，如果上传脚本在复制文件的同时运行，它可能会上传不完整的文件。

我们通过获取文件列表以及文件大小来解决此问题，然后等待 5 秒并重新检查文件大小。如果尺寸匹配，则保存上传，如果它们不匹配，则在另外 5 秒内再次检查。

这似乎是一种检查文件是否正在写入的奇怪方法。有没有更好、更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:09:36.680

I recommend to `shell_exec()` smbstatus(1), e.g. `smbstatus -LB` to check for locked files

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:18:22.300

使用`flock`函数[http://php.net/flock](http://php.net/flock) - 写入文件时获得排他锁`flock($handle, LOCK_EX)`，写入后释放锁`flock($handle, LOCK_UN)`。

上传脚本也可以尝试获取独占写锁，如果成功则可以移动文件，否则不能。

**编辑：**对不起，我忘记了用户通过 samba 将文件复制到服务器...所以`flock`复制时没有空间可以使用...但是上传脚本仍然可以`flock($handle, LOCK_EX)`用来查看是否成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:10:07.167

编写脚本将文件复制到 Samba 服务器上的临时文件夹，然后在完全复制和刷新后，将它们移动（即取消链接/链接，不再复制）到上传文件夹。

# continuous-integration - 如何在 Jenkins 上使用远程浏览器执行 js-test-driver 任务？

> ID：10450457
> 
> 赞同：8
> 
> 时间：2012-05-04T14:05:25.387
> 
> 标签：continuous-integration, hudson, jenkins, windows-server-2003, js-test-driver

我们使用 Jenkins 将 .NET Web 应用程序与 NAnt/NUnit 持续集成以进行 .NET 测试。Jenkins 配置了 9 个从属设备（所有这些从属设备都是 Windows Server 2003），它们运行许多构建及其自动化测试。

我们正在尝试设置 js-test-driver 来运行我们的 JavaScript 单元测试，并且下面的 NAnt 任务在开发人员工作站上本地运行良好。Internet Explorer 是我们想要测试的唯一浏览器，因为它是我们所有 Web 应用程序的唯一目标浏览器。

```
<target name="jsTests" >
    <echo message="Running JavaScript tests..." />
    <exec program="java.exe">
        <arg line="-jar '${jstestdriver.dir}\JsTestDriver.jar'" />
        <arg line="--config '${ui.webtests.dir}\JsTestDriver.conf'" />
        <arg line="--port 9876"/>
        <arg line="--browser 'C:\program files\internet explorer\iexplore.exe'"/>
        <arg line="--verbose"/>
        <arg line="--reset"/>
        <arg line="--tests all"/>
        <arg line="--testOutput '${results.jstestdriver.dir}'"/>
    </exec>
</target> 
```

我们在 Jenkins 上遇到相同任务的问题，可能是因为：

1.  它是一台服务器，我们作为服务帐户运行
2.  服务器上的浏览器安装存在安全限制

[js-test-driver wiki](http://code.google.com/p/js-test-driver/wiki/GettingStarted)上的`GettingStarted`页面说我们可以在与运行 js-test-driver 服务器的机器不同的机器上运行浏览器：

> 在运行任何测试之前，您需要启动测试服务器并捕获至少一个从属浏览器。服务器不必驻留在测试运行器所在的机器上，**浏览器本身也可以在不同的机器**上。

1.  有人在 Jenkins/Windows 设置上做过这个吗？
2.  对于运行 js-test-driver 的可扩展设置，还有其他替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:33:40.147

我做过类似的事情，但在 100% Windows 设置中没有，但我想你在 Windows 上做类似的事情不会有任何问题。

就我而言，我必须在更多的浏览器上进行测试：IE7、IE8、IE9、Chrome、Safari、Firefox 3.6 和最新版本，所以，我所做的是用我需要的所有浏览器安装虚拟机，以及另一个在服务器模式下运行 jstestdriver 的机器：

```
java -Xmx256m -jar JsTestDriver-1.3.4-a.jar --port 4224 
```

所有带有浏览器的虚拟机，总是有一个指向该服务器的实例（http://[jstd-server-ip]:4224/capture）

在这些机器上，我创建了一个计划任务，每天早上都会重置浏览器的实例，因为我看到一些浏览器，特别是 IE7，如果运行超过 3 天就会停止工作。

```
taskkill /f /IM iexplore.exe
iexplore.exe http://[jstd-server-ip]:4224/capture 
```

这些机器和 jstestdriver 服务器一直在运行。我不确定在你的情况下这是否可能。

然后，在应用程序上，我使用 maven 插件来启动测试：[http](http://code.google.com/p/jstd-maven-plugin/wiki/GettingStarted) ://code.google.com/p/jstd-maven-plugin/wiki/GettingStarted在我的情况下效果更好，但如果你不是使用 maven，我想在 NAnt 中应该是这样的：

```
<target name="jsTests" >
    <echo message="Running JavaScript tests..." />
    <exec program="java.exe">
        <arg line="-jar '${jstestdriver.dir}\JsTestDriver.jar'" />
        <arg line="--config '${ui.webtests.dir}\JsTestDriver.conf'" />
        <arg line="--browser 'C:\program files\internet explorer\iexplore.exe'"/>
        <arg line="--verbose"/>
        <arg line="--reset"/>
        <arg line="--tests all"/>
        <arg line="--testOutput '${results.jstestdriver.dir}'"/>
    </exec>
</target> 
```

在*JsTestDriver.conf*的顶部添加这一行：

```
server: http://[jstd-server-ip]:4224 
```

这告诉jenkins 执行的 jstestdriver*客户端实例使用**http://[jstd-server-ip]:4224*作为服务器。

希望这对你有帮助！

# java - 无法对批处理创建的文件执行任何操作

> ID：10450461
> 
> 赞同：1
> 
> 时间：2012-05-04T14:05:29.143
> 
> 标签：java

这就是我想要实现的目标：从 JAVA 程序运行批处理文件。批处理在特定文件夹中创建一个新文件，假设文件夹“A”。创建新文件后，JAVA 程序将新创建的文件从文件夹“A”移动到文件夹“B”。

以下是代码片段：

```
// Run a batch that creates a file
String[] cmd = new String[]{"cmd", "/C", "start /min" + batchFilePath + batchFileName};
Process proc = Runtime.getRuntime().exec(cmd);  
proc.waitFor();

// Command in the batch file

dir c:\ > C:\Chen_Med\EDICron\EDIOUT\test.edi
exit

// Move the file created by batch
boolean result2= ediOutFile.renameTo(new File(processedFolder, ediOutFile.getName())); 
```

这就是我运行上述代码时发生的情况：在文件夹“A”中创建了新文件。但是，新创建的文件不会移动到文件夹“B”。

分析：

> 上面的代码没有语法问题。我尝试了移动文件的替代方法。也就是说，将文件夹“A”中的文件读写到文件夹“B”，然后从文件夹“A”中删除文件。新文件在文件夹“B”中创建，但是文件并未从文件夹“B”中删除。当我运行另一个试图移动文件的程序时，在执行上述程序后，它就可以工作了。也就是说，运行时控制文件似乎存在问题。

请帮我解决问题。我浪费了一整天的时间试图找出解决方案:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:09:47.457

By using `cmd /c start ...` to start the batch file, you're starting it asynchronously -- i.e., `cmd.exe` is creating a second process to run the batch file, and the `proc.waitFor()` is waiting for the original `cmd.exe`, but not for the batch file itself. The batch file is then running in parallel with the Java program, and the attempt to rename the file from Java occurs before the file is even created.

Instead, just use `cmd /c batch.bat`, and this should work fine.

# c - 在未排序的数组中找到其差是输入值“k”的一对数字

> ID：10450462
> 
> 赞同：14
> 
> 时间：2012-05-04T14:05:30.563
> 
> 标签：c, arrays, performance, algorithm

如标题所述，我想找到差异为**K的元素对**

```
example k=4 and a[]={7 ,6 23,19,10,11,9,3,15}
output should be :
   7,11
   7,3
   6,10
   19,23
   15,19
   15,11 
```

我已经阅读了之前的帖子“[在数组中找到添加到给定总和的数字对](https://stackoverflow.com/questions/8334981/find-pair-of-numbers-in-array-that-add-to-given-sum)”

为了找到一个有效的解决方案，需要多少时间？是时间复杂度`O(nlogn)`还是`O(n)`？我试图通过分而治之的技术来做到这一点，但我没有得到任何退出条件的线索......

如果一个有效的解决方案包括对输入数组进行排序和使用两个指针操作元素，那么我认为我应该采取最少的`O(nlogn)`......

是否有任何与数学相关的技术可以带来解决方案`O(n)`。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T14:09:19.660

You can do it in O(n) with a hash table. Put all numbers in the hash for O(n), then go through them all again looking for `number[i]+k`. Hash table returns "Yes" or "No" in O(1), and you need to go through all numbers, so the total is O(n). Any set structure with O(1) setting and O(1) checking time will work instead of a hash table.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T14:56:29.807

O(n*Log(n)) 中的一个简单解决方案是对数组进行排序，然后使用此函数遍历数组：

```
void find_pairs(int n, int array[], int k)
{
  int first = 0;
  int second = 0;
  while (second < n)
  {
    while (array[second] < array[first]+k)
      second++;
    if (array[second] == array[first]+k)
      printf("%d, %d\n", array[first], array[second]);
    first++;
  }
} 
```

与带有哈希表的解决方案不同，此解决方案不使用额外空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:10:51.530

使用 O(n) 中的索引可以完成一件事

*   `arr`取一个由输入列表索引的布尔数组。
*   对于每个整数`i`都在输入列表中，然后设置`arr[i] = true`
*   从最小整数到最大整数遍历整个`arr`，如下：
    *   每当你找到第一个索引时，记下这个索引`true`。`i`
    *   看看有`arr[i+k]`没有真的。如果是，那么`i`和`i+k`numbers 是必需的对
    *   else 继续下一个整数`i+1`

# python - 如何压缩字符串？

> ID：10450463
> 
> 赞同：10
> 
> 时间：2012-05-04T14:05:32.123
> 
> 标签：python, ruby-on-rails

python中这个类的等价物是什么？[https://gist.github.com/2594962](https://gist.github.com/2594962)

在 PHP 中，它允许您压缩字符串。

我试图在以下语言中找到等价物：Python、Ruby on Rails 和 ASP。

我希望这些语言有内置的功能。我在 PHP 中找不到一个。

## 更新

当我说 Zip 时，我指的是 windows 使用的标准算法。不是档案的意义。我目前使用该类压缩字符串，base64 对其进行编码并将其作为请求发送到内部 API。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T15:59:33.337

要使用存档中使用的相同方法压缩字符串`.zip`，只需[`zlib`](https://docs.python.org/3/library/zlib.html)直接使用模块（这是 Python 的[`zipfile`](https://docs.python.org/3/library/zipfile.html#module-zipfile)模块[所做](https://github.com/python/cpython/blob/master/Lib/zipfile.py)的）。这是一个简单的例子：

```
import zlib

teststr = """Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus
pretium justo eget elit eleifend, et dignissim quam eleifend. Nam vehicula nisl
posuere velit volutpat, vitae scelerisque nisl imperdiet. Phasellus dignissim,
dolor amet."""

cmpstr = zlib.compress(teststr.encode('utf-8'))
uncmpstr = zlib.decompress(cmpstr)

fmt = '{:>8}: (length {}) {!r}'
print(fmt.format('teststr', len(teststr), teststr))
print(fmt.format('cmpstr', len(cmpstr), cmpstr))
print(fmt.format('uncmpstr', len(uncmpstr), uncmpstr)) 
```

输出：

```
 teststr: (length 237) 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\npretium justo eget elit eleifend, et dignissim quam eleifend. Nam vehicula nisl\nposuere velit volutpat, vitae scelerisque nisl imperdiet. Phasellus dignissim,\ndolor amet.'
  cmpstr: (length 157) 'x\x9cMO[\x0e\xc30\x08\xfb\xef)8@\xd5\x93L\xd3\xae\x10%^\xcb\x94W\x03\xf4\xfc\xa3\x9d\xb4\xed\x07\tcc\xfb\xd6\x06\nq\x17+\x94Zn\x83\x84\x95B\x81\xce\x14[\x15D\x85\xda\xa0\x90\xb8\xb3D\xae+!\xb3.\xf4\xd8\x82 g\x93\xa9\x0f(\xbb\xfce\xa2\x8d\xb0B/\x8a\x0f\xf0\x135\xcd\xe4H\xe2\xb5\xb2\x08\x17\xda-\x94\xefm\xa1\xbbo\x076\x8e\x96\x039%O\xbd\x89a\xc0\xd1\xf3\xcb\xd1\xb2i\x0f\x1e\xe7`\r \x89\xae\x1d,\xbb\xe1\xa2\x13\x97\x8e\x91\x18\xff\x99~v\xf3\xf4iu6Z\xde\xf8\xa6X\r'
uncmpstr: (length 237) 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\npretium justo eget elit eleifend, et dignissim quam eleifend. Nam vehicula nisl\nposuere velit volutpat, vitae scelerisque nisl imperdiet. Phasellus dignissim,\ndolor amet.' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T14:11:47.850

Python 有一个`zipfile`模块可以让你读/写 zip 档案。

该类`zipfile.ZipFile`有一个`writestr()`方法可以直接从字符串在存档中创建“文件”。

所以不，您不必在归档之前将字符串写入文件。

**问题编辑后更新**

您说您不需要存档，但链接的 PHP 代码就是这样做的——创建一个 PK-Zip 存档。在 Python 中，您对`zipfile`. 这是一个创建 zip 并向其中添加一个文件的示例——所有文件都在内存中，没有物理文件。

```
import zipfile
from cStringIO import StringIO

f = StringIO()
z = zipfile.ZipFile(f, 'w', zipfile.ZIP_DEFLATED)
z.writestr('name', 'some_bytes_to_compress')
z.close()

output_string = f.getvalue() 
```

`output_string`将是 PK-Zip 格式的压缩内容。

如果您同时控制发送端和接收端，并且不需要在一个数据块中发送多个压缩文件，那么使用 PK-Zip 就大材小用了。相反，您可以只使用`zlib`实现 PK-Zip 压缩的模块。

```
import zlib

output_string = zlib.compress('some_bytes_to_compress') 
```

然后你可以解压它（假设是 Python）：

```
decompressed_string = zlib.decompress(output_string) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T14:09:31.660

Under Python, you are looking for [the `zipfile` module](http://docs.python.org/library/zipfile.html) - specifically [`ZipFile.writestr()`](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.writestr).

I'd note that in general, [`zlib`](http://docs.python.org/library/zlib.html#module-zlib) is used a lot more for the kind of uses you are talking about.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T14:21:41.743

我不知道你到底需要什么，但你可能会觉得这很有趣。我在这里使用带有类似字符串文件的对象的 zipfile 模块

```
import zipfile
import StringIO

s = StringIO.StringIO()  # s is a file like object
z = zipfile.ZipFile(s, 'w')  # this is a zip archive
z.writestr('file1.txt', 'Hello, world') # create a "file" inside the archive called 'file1.txt' and write 'hello world' into it
z.close() # close the archive

print s.getvalue()  # this is the content of the string
s.close()  # close the string file-like object 
```

看字符串里面的PK开始

# sip - 星号如何创建呼出电话

> ID：10450465
> 
> 赞同：2
> 
> 时间：2012-05-04T14:05:36.710
> 
> 标签：sip, asterisk, outbound

我有一个 sip 服务器。在 extensions.conf 我设置了以下内容：

```
[extensions.conf]

exten =>1,1,Dial(SIP/1,20,tr)
exten => 1,n,Hangup()

exten => 2,1,Dial(SIP/2,20,tr)
exten => 2,n,Hangup() 
```

我需要能够`have outbound calls`。我的意思是`client 1`我想在不同的 sip 服务器上调用客户端。如何在 extensions.conf 文件中设置它？

需要帮助。欣赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T18:50:38.650

最简单的方法是：

```
exten => _X.,1,Dial(SIP/192.168.1.1/${EXTEN}) 
```

但更好的答案是：先阅读 O'Relly 的书。

# .net - IProcessHostPreloadClient 参数值从何而来？

> ID：10450466
> 
> 赞同：6
> 
> 时间：2012-05-04T14:05:36.793
> 
> 标签：.net, iis

查看 IProcessHostPreloadClient 的 Preload 方法，可以提供一个 string[] 参数，在[MSDN](http://msdn.microsoft.com/en-us/library/system.web.hosting.iprocesshostpreloadclient.preload.aspx)中描述为“初始化应用程序的数据”。但是，没有关于这些数据来自何处或我们如何为其赋值的信息。

这些数据来自哪里，我们如何为它分配值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:01:18.233

我问过我同样的问题。[我从http://www.houseofmorten.com/geeky/dotnet/-net-framework-4-0-readme](http://www.houseofmorten.com/geeky/dotnet/-net-framework-4-0-readme)找到了这个答案：

> System.Web.Hosting.IProcessHostPreloadClient.Preload 方法将字符串数组作为输入参数。但是，无法设置此数据，并且在此参数中从未传递任何信息。
> 
> 要解决此问题：
> 
> IIS 7.5 自动启动功能的早期预览版本支持一种配置一个或多个字符串值以传递给 ASP.NET 4 IProcessHostPerloadClient.Preload 方法的方法。但是，在 Windows 7 和 Windows Server 2008 R2 的最终版本发布之前，该功能已被删除。

# jquery - jQuery scrollTop 不滚动

> ID：10450471
> 
> 赞同：1
> 
> 时间：2012-05-04T14:06:02.530
> 
> 标签：jquery, scrolltop

我在尝试使用 javascript 自动滚动时遇到问题。我的滚动区域是正文，我的 js 代码是

```
$("body").animate({scrollTop: $("#myDiv").position().top) 
```

但我没有得到任何结果：没有动画也没有滚动我也试过

```
$("body").scrollTop($("#myDiv").position().top); 
```

并且还更换

```
$("body") with $(window). 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:08:09.633

`scrollTop` is a jQuery method which gets or sets the the offset of the current elements scroll bar, but with no animation.

You might be getting confused with the jQuery plugin [`scrollTo`](http://demos.flesler.com/jquery/scrollTo/), which offers the functionality you're after.

You'd use it like;

```
$(window).scrollTo($('#myDiv'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T05:33:57.580

试试下面的代码，

```
$('html,body').animate({scrollTop: $("#myDiv").offset().top},500); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:11:58.583

`scrollTop`是一个 javascript 属性，您可以像这样使用它：

```
document.body.scrollTop = scrollValue; 
```

或者

```
$("body").get(0).scrollTop = scrollValue; 
```

如果您想为滚动设置动画，还有一个由 Ariel Flesler 编写的名为**jQuery ScrollTo的插件：**

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T17:52:53.467

注意：如果您启用了 chrome://flags/#enable-experimental-web-platform-features，上面列出的插件将不起作用。这是一个已知问题：[https ://github.com/flesler/jquery.scrollTo/issues/92](https://github.com/flesler/jquery.scrollTo/issues/92)

# android - BroadcastReceiver 在活动创建后触发

> ID：10450473
> 
> 赞同：0
> 
> 时间：2012-05-04T14:06:06.587
> 
> 标签：android, usb, broadcastreceiver

我想使用 BroadcastReceiver 来获得与 USB 设备通信的权限。我正在尝试以与在 android 网站[http://developer.android.com/guide/topics/usb/host.html](http://developer.android.com/guide/topics/usb/host.html)上相同的方式实现它， 这一切都有效。但是广播接收器仅在创建主要活动后才会触发。这意味着我只能在关闭应用程序并再次打开它后才能与设备通信（当我不取消注册广播接收器时，我根本无法通信）。可能是什么原因？我的代码是这样的：

私有最终广播接收器 mUsbReceiver = 新广播接收器（） {

```
 public void onReceive(Context context, Intent intent) 
    {
        String action = intent.getAction();

        if (ACTION_USB_PERMISSION.equals(action)) 
        {
            synchronized (this) 
            {
                device = (UsbDevice) intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
                if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) 
                {
                    if(device != null)
                    {

           //things I do when the permission is granted             

                    }

                } 
                else 
                {
                    devMessage = "permission denied for device ";
                }
            }
        }
    }
}; 
```

我注册它的代码部分：

public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；

```
 mUsbManager = (UsbManager) getSystemService(Context.USB_SERVICE);       

    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
    filter = new IntentFilter(ACTION_USB_PERMISSION);
    registerReceiver(mUsbReceiver, filter);

    HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList();
    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
        while(deviceIterator.hasNext())
        {
            device = deviceIterator.next();
            mUsbManager.requestPermission(device, mPermissionIntent);             
        }

            // ...      

    if(device!=null)
    {
      // ...
    }
    else
    {
      // ...
    }
    tv.setText(devMessage);
    } 
```

有谁知道为什么会这样，我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:16:24.693

您正在活动中注册广播接收器。这意味着在您运行该活动之前，您无法接收广播。

您可能应该考虑在 AndroidManifest.xml 中注册一个接收者标签。 [这是 receiver-tag 的文档](http://developer.android.com/guide/topics/manifest/receiver-element.html)。这允许您在不开始活动的情况下注册接收者。

这部分很重要：

> <application> 元素有自己的 enabled 属性，适用于所有应用程序组件，包括广播接收器。<application> 和 <receiver> 属性都必须为“true”才能启用广播接收器。如果其中一个为“false”，则它被禁用；它不能被实例化。

# jquery - 有没有办法动态删除或禁用 JavaScript 文件？

> ID：10450474
> 
> 赞同：1
> 
> 时间：2012-05-04T14:06:09.080
> 
> 标签：jquery, javascript, monkeypatching

您能否告诉我可以动态删除或禁用 JavaScript 文件的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:08:22.847

To remove:

```
$('script[src="SOURCE_TO_JS_FILE"]').remove(); 
```

But to load conditionally:

```
if(SOME_CONDITION_TRUE) {
  $.getScript(SOURCE_TO_JS_FILE, function(data, textStatus){
      // something
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:03:39.520

[我会在http://requirejs.org/](http://requirejs.org/)上看看 RequireJS

# c++ - 遍历列表映射？

> ID：10450477
> 
> 赞同：1
> 
> 时间：2012-05-04T14:06:16.337
> 
> 标签：c++, list, map, iterator, auto

我有一个`map<string, list<int> >`我想遍历列表并打印出每个数字。我不断收到关于 const_iterator 和迭代器之间转换的编译错误。我做错了什么？

```
for (map<string, list<int> >::iterator it = words.begin(); it != words.end(); it++)
{
   cout << it->first << ":";
   for (list<int>::iterator lit = it->second.begin(); lit  != it->second.end(); lit++)
      cout << " " << intToStr(*lit);
   cout << "\n";
}

error: conversion from
  ‘std::_Rb_tree_const_iterator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::list<int, std::allocator<int> > > >’
to non-scalar type
  ‘std::_Rb_tree_iterator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::list<int, std::allocator<int> > > >’
requested| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:09:23.327

尝试使用新的 C++11`auto`关键字

```
for (auto it = words.begin(); it != words.end(); it++)
{
   cout << it->first << ":";
   for (auto lit = it->second.begin(); lit  != it->second.end(); lit++)
      cout << " " << intToStr(*lit);
   cout << "\n";
} 
```

如果仍然出现错误，则说明您定义了不一致的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:08:15.133

```
map<string, list<int> >::iterator 
```

应该

```
map<string, list<int> >::const_iterator 
```

您的`map`is`const`或您的 map 是 a 的成员，`class`并且您在`const`函数中调用此代码，这也使您的`map` `const`. 无论哪种方式，容器上都不能有非`const`操作员。`const`

编辑：我是唯一一个喜欢使用显式类型的人`auto`吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T14:27:24.120

尝试使用新的 C++11[基于范围的 for 循环](http://en.wikipedia.org/wiki/C%2B%2B11#Range-based_for-loop)：

```
for(auto& pair : words) {
  std::cout << pair.first << ":";
  for(auto& i : pair.second) {
    std::cout << " " << intToStr(i);
  }
  std::cout << "\n";
} 
```

# iis - 使用 BlogEngine 的 URL 重定向

> ID：10450478
> 
> 赞同：3
> 
> 时间：2012-05-04T14:06:18.053
> 
> 标签：iis, url-rewriting, web-config, blogengine.net

我正在将博客从 dasBlog 转移到 BlogEngine。在 dasBlog 中，我的 URL 看起来像这样。

> [http://pfsolutions-mi.com/blog/2008/03/08/Beyond-Compare.aspx](http://pfsolutions-mi.com/blog/2008/03/08/Beyond-Compare.aspx)

而在 BlogEngine 中，我的 URL 看起来像这样。

> [http://pfsolutions-mi.com/blog/post/2008/03/08/Beyond-Compare.aspx](http://pfsolutions-mi.com/blog/post/2008/03/08/Beyond-Compare.aspx)

这两个 URL 之间的唯一区别是 BlogEngine 中的“post”子文件夹。

由于我目前正在使用 IIS URL Rewrite 从 URL 中删除 WWW，因此我认为最简单的解决方案是创建另一个规则来处理添加子文件夹。我尝试过这样的事情。

> 规则名称=“博客重定向”启用=“真”停止处理=“真”
> 
> 匹配 url="^blog/([_0-9]+)/([_0-9]+)/([_0-9]+)/([_0-9a-z-]+).([_0- 9a-z-]+)$"
> 
> action type="Redirect" url="blog/post/{R:1}/{R:2}/{R:3}/{R:4}.{R:5}" redirectType="Temporary"

但是，当我输入旧的 dasBlog URL 时，它不会被重定向到新位置。相反，我得到了通用的 BlogEngine 404 错误页面。

注意：一旦我知道一切正常，我计划将 redirectType 更改为 Permanent。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:20:36.473

您的匹配正则表达式不应该看起来更像这样吗？

```
match url="^blog/([0-9]+)/([0-9]+)/([0-9]+)/([\w-]+)\.([a-z]+)$" 
```

无论如何，日期数字中没有下划线，并且您`[_0-9a-z-]+`不包括“Beyond-Compare”中的大写字母。

所以在这里我们应该有： url="^blog/digits/digits/digits/any-word-characters.lowercase-letters$"

我们还可以指定更多：

```
match url="^blog/([0-9]{2,4})/([0-9]{2})/([0-9]{2})/([\w-]+)\.([a-z]{3,4})$" 
```

基于您始终拥有的假设：

1.  年份为“08”或“2008”
2.  月份和日期为“01”或“11”
3.  文件以 3 或 4 个小写字母结尾（htm、html、php、asp、aspx 等）

编辑：我认为 "\w+" 不包括连字符，所以你必须把它变成 "[\w-]+"

# selenium - 硒。IEDriverServer.exe 不存在？

> ID：10450484
> 
> 赞同：4
> 
> 时间：2012-05-04T14:07:00.893
> 
> 标签：selenium

我收到一个错误：

**文件 Capabilities [BrowserName=, IsJavaScriptEnabled=False, Platform=Any, Version=]\IEDriverServer.exe 不存在。可以在[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)下载驱动程序`**

我必须怎么做才能解决这个错误，因为我真的找不到信息....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T06:44:17.827

除非您从源代码构建 Selenium 项目，或者正在使用 .NET 绑定并在`InternetExplorerOptions`类中设置了特定选项，否则您不应该看到此消息。当前的源代码在这个特定领域是不稳定的，因为该项目目前正在为 IE 驱动程序实现独立的可执行服务器的使用，类似于 Chrome 驱动程序目前发生的情况。如果您**是**从源代码构建，或者对使用此新功能感兴趣，您应该从异常消息中指定的 URL 下载独立的 IE 驱动程序服务器可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T11:57:50.020

下载给定 URL 的 IEDriver.exe

[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)

假设 exe 文件保存在 E:\IEdriver.exe 中。

在 Selenium 中，您必须设置 IEDriver 的属性，因为 Selenium 只有 firefox 驱动程序。

设置系统属性，然后调用 IEDriver。

```
WebDriver driver;

System.setProperty("webdriver.ie.driver", "E:\\IEdriver.exe");

//Selenium will not support single slash, so we are providing double slash in path.

driver = new InternetExplorerDriver();

// By this it will call the IEDriver and execute 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T12:43:11.753

分享一个例子：

```
public static void main(String[] args) {

        System.setProperty("webdriver.ie.driver", "D:\\selenium\\IEDriverServer.exe");
        WebDriver driver = new InternetExplorerDriver();
        driver.get("www.google.com");
        driver.findElement(By.id("gbqfq")).sendKeys("abc");
        driver.close();

} 
```

}

# vb.net - VB.NET：电子邮件中的多行

> ID：10450493
> 
> 赞同：1
> 
> 时间：2012-05-04T14:07:35.370
> 
> 标签：vb.net, smtpclient

我尝试了以下代码的多种变体，但仍然得到相同的结果。我试图让最后一行“问题描述：....”出现在新行上。

我已经尝试过 vbCrLf、vbCr 和 & Environment.NewLine & _ 都不起作用。

还有其他人有什么建议吗？

请注意：其他电子邮件的格式正确。此外，如果我在“问题标题”行的末尾添加 put 2 vbCr (s)，那么它看起来很正常。

特别是这个似乎是我身边的一根刺。

结果：

![在此处输入图像描述](../Images/bce1535a383b46f59b4f54e7c501648e.png)

编码：

```
Dim mail As New MailMessage()
Dim strbody As String

strbody = Nothing

'set the addresses
mail.From = New MailAddress("email.address@server.com")
mail.[To].Add(Email_Add)

'set the content
mail.Subject = Issue_Num & " Issue has been created."
strbody = "Your issue has been created." & vbCr & vbCr
strbody += "The Issue Team has received the following issue: " & vbCrLf
strbody += "Issue ID: " & Issue_Num & vbCrLf
strbody += "Issue Title: " & Email_Summary & vbLf
strbody += "Issue Description: " & Description & vbCrLf

mail.Body = strbody

'set the server
Dim smtp As New SmtpClient("mailhost.mailserver.com", 15)

'send the message

smtp.Send(mail) 
```

当我使用以下代码时：

```
 'set the content
mail.Subject = Issue_Num & " Issue has been created."
strbody = "Your issue has been created." & vbCrLf & vbCrLf
strbody += "The Issue Team has received the following issue: " & vbCrLf
strbody += "Issue ID: " & Issue_Num & vbCrLf
strbody += "Issue Title: " & Email_Summary & vbCrLf & vbCrLf
strbody += "Issue Description: " & Description & vbCrLf 
```

我明白了：

![在此处输入图像描述](../Images/7daaac8e4f5da5e0908669c28f29ae8c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:11:50.220

将邮件格式转换为 HTML，如下所示：

```
mail.IsBodyHtml = True 
```

`<br />`然后在要换行的地方添加一个 html 中断标记 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T15:35:24.377

```
Message.to.Add(ToEmail)
Message.From = New MailAddress(FromEmail)
Message.Attachment.Add(Attachment)
Dim body As String = "Hello user" + ","
body += "<br /><br />"

body += tbEmailBody.Text.Replace(vbCrLf, "<br />")
'This line and the "Message.IsBodyHtml = True" are the important lines to get it to work.

body += "<br /><br />"
body += "<br /><br />Thanks"
Message.Body = body
Message.IsBodyHtml = True 
```

我没有看到这个确切的答案，但也许我忽略了它。也许别人会觉得它有用祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-11T07:39:45.610

暗淡 str 作为字符串

把 html 代码像这样的字符串 -

```
str = "<table> <tr> <td> Name : </td> <td> Yuwraj D. Bramhankar </td></tr><tr> <td> Address : </td> <td> 439, Anand Nagar, Nagpur 09 - INDIA</td></tr> </table>"

 mail.Body = str
Dim smtp As New SmtpClient("mailhost.mailserver.com", 15) 
```

'在这里发送消息

```
smtp.Send(mail) 
```

# ruby - RSpec: ActionView::Template::Error: nil:NilClass 的未定义方法“full_name”

> ID：10450508
> 
> 赞同：1
> 
> 时间：2012-05-04T14:08:20.897
> 
> 标签：ruby, ruby-on-rails-3, rspec

开始规范测试时出现此错误。我了解未设置与用户的连接。我该怎么做才能通过测试？

RSpec 文件：posts_controller_spec.rb

```
require 'spec_helper'
include Devise::TestHelpers

describe PostsController do
  render_views

  context "Logged in as user" do
    let(:user) { FactoryGirl.create(:user) }

    before { login_as(user) }

    context "on viewing index page" do
      let!(:p) { FactoryGirl.create(:post) }

      before { get :index }

      it { should respond_with(:success) }

      it { assigns(:posts).should == [p] }
    end
  end
end 
```

我的观点：_home.html.erb

```
<% @posts.each do |post| %>
  <%= link_to post.title, post %>

    <%= post.user.full_name %></i></b><hr />

    <div>
      <%= post.content.html_safe %>
    </div>
<% end %> 
```

RSpec 失败：

```
PostsController Logged in as user on viewing index page 
     Failure/Error: before { get :index }
     ActionView::Template::Error:
       undefined method `full_name' for nil:NilClass
     # ./app/views/posts/_home.html.erb:5:in `block in _app_views_posts__home_html_erb__709569216_93469850'
     # ./app/views/posts/_home.html.erb:2:in `each'
     # ./app/views/posts/_home.html.erb:2:in `_app_views_posts__home_html_erb__709569216_93469850'
     # ./app/views/posts/index.html.erb:1:in `_app_views_posts_index_html_erb___825727830_90641210'
     # ./spec/controllers/posts_controller_spec.rb:33:in `block (4 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:13:43.030

没有看到你的模型`Post`and `User`，看起来你需要改变

```
let!(:p) { FactoryGirl.create(:post) } 
```

到

```
let!(:p) { FactoryGirl.create(:post, :user => user) } 
```

或者

```
let!(:p) { FactoryGirl.create(:post, :user_id => user.id) } 
```

正确设置关联。

但是，如果您的视图假设 a`Post` *始终*具有 a `User`，那么您的`Post`模型可能应该验证 a 的存在`User`，或者您应该更改视图以处理 a`Post`没有 a的情况`User`。

# asp.net - IIS7 上的 asp .net 4.0 应用程序错误 404.17

> ID：10450510
> 
> 赞同：1
> 
> 时间：2012-05-04T14:08:24.607
> 
> 标签：asp.net, iis-7

我在 IIS 7 下设置网站时遇到问题。我已经为该应用程序创建了一个应用程序和应用程序池。应用程序池使用 .Net Framework 4.0，因为我的 .net 应用程序是用 .Net Framework 4.0 编写的。应用程序池设置为使用经典管道模式。MIME 类型已自动添加到 .asp 和 .aspx。

当我运行网站时，Windows 资源管理器向我显示“查看下载”并在下载文件时尝试下载“应用程序名称 localhost”，我注意到它是我的 default.aspx 的 html。我检查了默认文档，它包含 Default.aspx。

如果我删除 .asp 和 .aspx MIME 类型，则会收到错误：HTTP 错误 404.17 - 未找到 请求的内容似乎是脚本，静态文件处理程序不会提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:19:01.480

我已经多次看到这个问题。IIS 不提供 aspx 页面，很可能没有为整个服务器或该站点运行。

对于整个服务器：检查 iis 万维网服务是否正在运行。

仅针对站点：在 IIS 中运行。

您可以通过转到 IIS 并从网站内部点击浏览选项轻松了解 IIS 是否正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:57:51.680

如果我是您，使用您放置的数据，我会按顺序尝试：

*   如果安装了 ASP.NET，请检查服务器管理器/功能（ServerManager/Roles/Web Server(IIS) 查找 ASP.NET
*   如果一切正常，请通过以下方式检查 IIS 管理器：
    *   尝试浏览一个test.html文件，看看能不能正常浏览
    *   通过单击测试设置检查基本设置
    *   检查处理程序映射以查看 aspx 是否存在。
    *   尝试浏览包含测试数据的示例 test.aspx 页面。
*   检查应用程序池设置。
*   重新安装框架 4.0
*   重启机器（经典）

如果您向我们提供更多信息和/或我提出的测试的输出可能会有所帮助。祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T23:26:32.527

我今天在服务器上发生了 404.17 错误。正如您和 cad 提到的，我检查了我的站点正在使用的应用程序池的框架，以确保它设置为 ASP.Net 4.0，并且确实如此。在我的情况下发生的事情是我的站点没有使用我认为的应用程序池。我的站点嵌套在另一个站点下，这意味着我的站点指向一个子文件夹，但另一个站点指向根文件夹。即使我的站点设置为使用 ASP.Net 4.0 应用程序池，根站点使用了另一个关闭了 ASP.Net 的池，它被设置为“无托管代码”。当我将父站点正在使用的池的框架设置为 4.0 时，我的站点开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T22:48:06.730

在我的情况下，解决方案是修复处理程序映射，如下所述：[http ://forums.iis.net/post/1943489.aspx](http://forums.iis.net/post/1943489.aspx)

> IIS Manager->high-light you web site->click Handler Mappings icon on the home pane->click Revert to Parent... on the right Actions pane

# asp.net - 实体框架（linq）中的选择数据列表？

> ID：10450512
> 
> 赞同：0
> 
> 时间：2012-05-04T14:08:40.017
> 
> 标签：asp.net, vb.net, entity-framework

这是我的功能：

```
 Public Function GetAllEmployee() As List(Of Employees)
    Return DB.Employees.Select(Function(q) New With {q.EmployeeID, q.LastName,q.FirstName}).ToList()
End Function 
```

我收到一个错误：

> 类型的值`System.Collections.Generic.List(Of <anonymous type>)`不能转换为`System.Collections.Generic.List(Of NorthwindModel.Employees)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:12:57.203

您在select 语句中实例化了一个[Anonymous对象。](http://msdn.microsoft.com/en-us/library/bb384767.aspx)尝试使用这个：

```
Return DB.Employees.ToList() 
```

**编辑**：如果你想返回一个只有这 3 个属性的对象列表，你可以定义一个包含这些属性的类：

```
Public Class MyEmployees
    Public Property EmployeeId As Long
    Public Property FirstName As String
    Public Property LastName As String
End Class 
```

然后返回该新类的列表：

```
Public Function GetAllEmployee() As List(Of MyEmployees)
    Return DB.Employees.Select(Function(q) New MyEmployees With { .EmployeeId = q.EmployeeID, .LastName = q.LastName, .FirstName = q.FirstName}).ToList()
End Function 
```

# jquery - 停止关闭 div；如果将鼠标悬停在它上面

> ID：10450513
> 
> 赞同：3
> 
> 时间：2012-05-04T14:08:40.597
> 
> 标签：jquery

如下所示，如果用户将鼠标悬停在 div 上，那么如何停止淡出 div？如果不是悬停div，那么无论时间设置如何都会淡出。？

下面是我正在使用的代码....用于淡入和淡出：

```
 $("#success").fadeOut('slow');
 $("#success").fadeIn('slow');
 $("#success").fadeTo(5000, 1).fadeOut(2000); 
```

我的分区：

```
<div class="success"><a href="#" class="close">&times;</a>status message here...</div> 
```

我试过这个：

```
if ($('#success').is(':hover')) { //dont close me and reset the time ...} 
```

结果： ![在此处输入图像描述](../Images/3ba6e62a957561d34821003f7eb9ab9c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:15:59.600

像这样的东西？[http://jsfiddle.net/krmNY/1/](http://jsfiddle.net/krmNY/1/)

JS

```
var $msg = $('#dvFadeMsg'); 
var timer = null; 

function StartFadeTimer(){
    timer = setTimeout(function(){
        $msg.fadeOut('slow');
    }, 1500); 
}

$('#dvFadeMsg').hover(function(){
    clearTimeout(timer); 
}, function(){
    StartFadeTimer(); 
});

$msg.fadeIn('slow');
StartFadeTimer(); 
```

HTML

```
<div id="dvFadeMsg">Fade me if no mouse</div>​ 
```

# android - Full-screen gallery scrolling problems

> ID：10450514
> 
> 赞同：0
> 
> 时间：2012-05-04T14:08:46.853
> 
> 标签：android, animation, gallery, fullscreen

I'm building an app based on a card game. A user may look at his own cards; he can also scroll "around the table" to look at the open cards of his opponents. The screen shows one player (the user or one of the opponents) at a time.

I used Gallery to implement it. With a custom adapter, I made it circular. I have also intercepted onFling() to make sure it "flings" to the next player, not further around the table. So far, so good.

Here is the problem. If the element of the gallery is as wide as the entire screen, gallery does not work well. I can't drag the view "slightly" to expose the next player. Most of the time, the fling does not work. When it does, there is no animation; the view just switches to the next player.

I solved it by making gallery elements 2 pixels narrower than the screen. 1 pixel is not enough: it fixes scrolling in one direction, but the other direction is still "stiff".

I'm writing this for two reasons. First, if you have similar problems, this post may save you a few hours. Second, I'm curious: can any of the Android gurus explain this behavior of the Gallery control???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:12:54.677

我做了同样的事情，但使用了[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)。也许你应该试试这个而不是画廊。您只需在视图上设置一个[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)并在 onTouch 捕获 MotionEvent.ACTION_UP 时调整滚动。

# java - I am using Geotools to display a road map of Bangalore

> ID：10450530
> 
> 赞同：-4
> 
> 时间：2012-05-04T14:09:53.017
> 
> 标签：java, geotools

I want to know how to highlight any specific road. For example i want to color a road yellow that has id=1\. I am using Java to display the map.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:15:37.247

我找到了如何突出显示 ID=1 的道路。我遵循的步骤是：

```
//create a filter object
Filter filter;

//create a datastore object from .shp file

FileDataStore store= FileDataStoreFinder.getDataStore(file);
SimpleFeatureSource featureSource=store.getFeatureSource();

//I am using CQL query to select the road that is ID=1
filter=CQL.toFilter("ID=1");

//create a SimpleFeatureCollection object for the filtered features
SimpleFeatureCollection fc=featureSource.getFeatures(filter);

//create a feature iterator to traverse through the selected features
SimpleFeatureIterator iter=fc.features();

//create a Set object to store the featureIdentifiers.
Set<FeatureId> IDs=new HashSet<FeatureId>();

//add the selected features to IDs
try{

    while(iter.hasNext()){

        SimpleFeature f=iter.next();

        IDs.add(f.getIdentifier());

        System.out.println(" "+f.getIdentifier());

    }
}
finally{

    iter.close();

}

//create style object to store style of selected features
Style style=createSelectedStyle(IDs);

MapContext map=new DefaultMapContext();

//show the map
map.addLayer(featureSource,style);
JMapFrame.showMap(map);

//defining the createSelectedStyle method

private Style createSelectedStyle(Set<FeatureId> IDs) {
    Rule selectedRule = createRule(SELECTED_COLOUR, SELECTED_COLOUR);
    selectedRule.setFilter(ff.id(IDs));

    Rule otherRule = createRule(LINE_COLOUR, FILL_COLOUR);
    otherRule.setElseFilter(true);

    FeatureTypeStyle fts = sf.createFeatureTypeStyle();
    fts.rules().add(selectedRule);
    fts.rules().add(otherRule);

    Style style2 = sf.createStyle();
    style2.featureTypeStyles().add(fts);

    return style2;
}

//defining the createRule method

private Rule createRule(Color outlineColor, Color fillColor) {
    Symbolizer symbolizer = null;
    Fill fill = null;//not required if working with line
    Stroke stroke = sf.createStroke(ff.literal(outlineColor), ff.literal(LINE_WIDTH));

    symbolizer = sf.createLineSymbolizer(stroke, "the_geom");

    Rule rule = sf.createRule();
    rule.symbolizers().add(symbolizer);
    return rule;
} 
```

# visual-studio-2010 - Using SQLCipher with Mono for Android

> ID：10450531
> 
> 赞同：1
> 
> 时间：2012-05-04T14:09:55.947
> 
> 标签：visual-studio-2010, sqlite, xamarin.android, sqlcipher

Does anyone have any tutorials on how to setup SQLCipher for Mono for android in visual studio 2010?

If so could you share it with me and possibly show how you would create and connect to an encrypted SQLite database including Connection String?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:58:59.573

我们在此处整理了一个关于使用针对 Mono for Andoroid 的新 SQLCipher 二进制文件的[教程](http://sqlcipher.net/sqlcipher-on-mono-for-android)。主要区别在于文章显示了与 MonoDevelop 的集成。

# android - Changing color of selected listview item

> ID：10450534
> 
> 赞同：0
> 
> 时间：2012-05-04T14:09:59.550
> 
> 标签：android, android-listview

I'm using the [FileExplorer library](http://code.google.com/p/android-file-dialog/) (open source) for Android in my project. The problem is that an item (file) selected in the list of the FileExplorer is shown in highly unreadable gray color. I'd like to customize this, but don't see any place where the color is assigned.

Activity source code does not contain any management of colors.

And here is the layout of list item:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">

<ImageView android:layout_alignParentLeft="true" android:id="@+id/fdrowimage"
    android:layout_height="35dp" android:layout_width="wrap_content"
    android:paddingRight="5dp" android:paddingLeft="3dp"></ImageView>
<TextView android:text="@+id/fdrowtext" android:layout_width="wrap_content"
    android:id="@+id/fdrowtext" android:layout_toRightOf="@+id/fdrowimage"
    android:layout_alignTop="@+id/fdrowimage" android:layout_alignBottom="@+id/fdrowimage"
    android:gravity="center_vertical" android:layout_height="35dp"
    android:textSize="23dp"</TextView> 
```

If I add `android:textColorHighlight` with custom color to the TextView, it does not take any effect. If I add `android:textColor`, it works, but changes text color for all items, which is not what I need.

Also I see a strange mention of color gray in strings.xml, but changing this value does not produce an effect as well.

# jtable - JCheckBox 未在 JTable 中呈现（JRE？）

> ID：10450536
> 
> 赞同：0
> 
> 时间：2012-05-04T14:10:05.117
> 
> 标签：jtable, render, jcheckbox

我有一个 Jtable 并打算向其中添加 JCheckboxes。[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)有一个非常清晰的示例 ，我实现了它，但在运行时不断获取“true”和“false”字符串值。然后我尝试运行示例本身，发现它也显示“true”/“false”字符串值。

![在此处输入图像描述](../Images/353a1b8853b5af01401a0de88d0c1f45.png)

这是我的 JRE 的问题吗？我怎样才能查看/使用复选框？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:14:09.723

你确定在你的表模型中覆盖了这个函数吗？这就是告诉表格这些值是`Booleans`.

```
 @Override
 public Class getColumnClass(int c) {
    return getValueAt(0, c).getClass();
 } 
```

# ios - iPad 3 上的启动画面

> ID：10450540
> 
> 赞同：4
> 
> 时间：2012-05-04T14:10:19.080
> 
> 标签：ios, ipad-3

我正在开发一个可以在 iPad 2 和 iPad 3 上正常工作的应用程序。我有spash 纵向和横向屏幕。对于 iPad2 初始屏幕，我使用大小为 768x1004 的 Default-Portrait.png 和大小为 1024x768 的 Default-Landscape.png，对于 iPad3，我使用大小为 1536x2008 的 Default-Portrait@2x.png 和大小为 2048x1496 的 Default-Landscape@2x.png。当我第一次在 iPad3 中构建我的应用程序时，初始启动图像首先是 iPad3 的（Default-Portrait@2x.png/ Default-Landscape@2x.png），然后切换到 iPad2 的（Default-Portrait.png）。 png/ Default-Landscape.png)。有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:59:04.003

在最新版本的 Xcode 上，您可以直接从项目设置面板设置默认图像。只需点击左上角的项目，然后选择目标，然后转到摘要选项卡。向下滚动，您将看到“iPad 开发信息”面板，将您的默认图像拖放到那里（最右边是视网膜，iPad 3 图像）。

尝试以这种方式设置默认图像，它会自动为您命名它们，我认为它甚至会为您调整它们的大小。

# .net - 从 .NET WCF 服务将文件插入 Google Drive

> ID：10450542
> 
> 赞同：0
> 
> 时间：2012-05-04T14:10:28.613
> 
> 标签：.net, wcf, google-drive-api

我创建了一个示例应用程序，用于将文档插入 .NET 中的 Google 驱动器。为此，我使用了 WCF 服务。我传递给服务方法：访问令牌、刷新令牌和到期时间。

我使用传递给它的参数在服务中使用 Google 驱动器 .NET SDK 创建身份验证器和驱动器服务。在插入期间它给出了错误

> 如果您设置`ContentLength>0`或，则必须提供请求正文`SendChunked==true`。通过调用`[Begin]GetRequestStream`之前做到这一点`[Begin]GetResponse.`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:26:03.757

这看起来像是最近修复的库的一个已知问题：[http ://code.google.com/p/google-api-dotnet-client/issues/detail?id=181](http://code.google.com/p/google-api-dotnet-client/issues/detail?id=181)

如果您不想更新整个库，只需确保在[http://code.google.com/p/google-api-dotnet-client/source/detail?r=fe2d32e0713ae1c6138af72049377b145d4fa6cf应用补丁](http://code.google.com/p/google-api-dotnet-client/source/detail?r=fe2d32e0713ae1c6138af72049377b145d4fa6cf)

如果您可以等待，该库的更新版本将很快发布并包含该修复程序。

# visual-studio-2010 - 从 msbuild .proj 文件创建 Visual Studio 解决方案

> ID：10450547
> 
> 赞同：2
> 
> 时间：2012-05-04T14:10:52.983
> 
> 标签：visual-studio-2010, msbuild

有谁知道是否可以从 msbuild .proj 文件自动创建一个 Visual Studio 项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:48:03.813

我一直在尝试做类似的事情。基本上 VS2010 不会让我在解决方案中添加“*.proj”文件。但是，我发现如果我只是将它重命名为 vbproj 或 csproj，那么 VS2010 会让我将它添加到解决方案中，并且它似乎可以正确调用它。（vbproj 对我来说似乎是“最好的”，因为它没有多余的“参考”子文件夹。）

VS2010 似乎无法使用特定的 MSBuild 项目文件，这似乎很奇怪，而是需要一个明确绑定到特定语言（C#、VB.Net、SQL、WiX 等）的文件。

在我的例子中，它简单地有一个 Exec 任务去调用 Doxygen 来构建开发者文档。也就是说，这很简单！我希望同样的技巧也对你有用！

另一个选择可能是你会太看 VS2010 中的“Makefile”项目类型（它在 C++ 下）；这将允许您直接调用 nmake 并完全取消 proj 包装器。

# msysgit - msysgit“fork：无法为堆栈保留内存”？

> ID：10450550
> 
> 赞同：2
> 
> 时间：2012-05-04T14:11:04.153
> 
> 标签：msysgit

[我已经从这里http://code.google.com/p/msysgit/downloads/list](http://code.google.com/p/msysgit/downloads/list)在我的 Windows Server 2003 64 位机器上安装了 msysgit Git-1.7.10-preview20120409.exe 。我在设置过程中加入了“Git Bash here”。当我为 Windows 资源管理器中列出的任何文件夹选择“Git Bash here”时，我得到

> C:\Program Files (x86)\Git\bin\sh.exe: *** fork: 无法为堆栈 0x490000 - 0x690000 保留内存，Win32 错误 0 0 [main] sh.exe" 1348 sync_with_child: child 2612(0xF8)在初始化之前死亡，状态码为 0x1 145 [main] sh.exe" 1348 sync_with_child: ***等待 longjmp 的子状态
> 
> sh.exe": fork: 资源暂时不可用 sh.exe"-3.1$

但是，开始菜单项 Git，Git Bash 并没有遇到同样的问题。相反，我得到

> 欢迎使用 Git（版本 1.7.10-preview20120409）
> 
> 运行 'git help git' 以显示帮助索引。运行 'git help' 以显示特定命令的帮助。
> 
> dmoore@DC1-2K3 ~ $

我想 Windows Explorer shell 扩展应该使用 c:\windows\syswow64\cmd.exe 但我不知道如何告诉它这样做。

非常感谢任何建议，DaleEMoore@gMail.Com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:02:55.570

好的，看起来在 64 位 XP 和 Server 2003 上，64 位（默认）wscript 进程无法正确启动 bash，并且由于这是在注册表中设置菜单项的方式，因此导致此问题同时开始菜单快捷方式明确指定 syswow64 版本。

解决方法是编辑注册表项的`HKEY_CLASSES_ROOT\Directory\shell\git_shell\command`“默认”值。

它可能看起来像`wscript "C:\Program Files (x86)\Git\Git Bash.vbs" "%1"`

将其更改`C:\Windows\SysWOW64\wscript "C:\Program Files (x86)\Git\Git Bash.vbs" "%1"`为适当的内容（如果您的 windows 目录在其他地方等）

这应该作为 Windows 用户的 git 的错误提出，不幸的是，看起来他们关闭了错误跟踪器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T20:46:17.550

在 Windows XP 64 上

```
[HKEY_CLASSES_ROOT\VBSFile\Shell\Open\Command] 
```

从 "%SystemRoot%\System32\WScript.exe "%1" %*" 更改默认值

到 "%SystemRoot%\SysWOW64\WScript.exe "%1" %*"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T10:18:03.633

随机我在另一个项目上收到了 mingw bash 的“* fork ...”错误消息（我猜 mingw 是 git 安装的 sh 的起源 - 它绝对是相同的错误消息）。[我可以通过用win-bash](http://win-bash.sourceforge.net/)替换 shell 来解决这个问题

# iphone - 在 iPhone 应用程序中对一些地址数据进行排序和结构化

> ID：10450555
> 
> 赞同：0
> 
> 时间：2012-05-04T14:11:36.527
> 
> 标签：iphone, objective-c, arrays, string, mobile

我有一个应用程序调用服务器并返回一长串数据。数据是地址列表，如下例所示：

```
2133664:American Taxi Dispatch, Inc:Mount Prospect:834 E RAND RD|2133665:Walmart:Mount Prospect:930 Mount Prospect Plaza| 
```

数据是唯一标识符、标题、城市和街道地址。

我首先需要知道如何遍历这些数据，以便我可以分离标识符、标题、城市和街道。我也在寻找一种推荐的数据结构，我可以用它来将所有信息联系在一起。我会将标题添加到 a 中`NSMutableArray`，以便可以在`UIPickerView`. 然后用户需要选择一个并且必须返回整个地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:18:41.540

据我所见，您的数据由 分隔`:`，您需要做的是拆分此字符上的每一行：

```
NSString* line = @"2133664:American Taxi Dispatch, Inc:Mount Prospect:834 E RAND RD|2133665:Walmart:Mount Prospect:930 Mount Prospect Plaza|"
NSArray* components = [line componentsSeparatedByString:@":"];
NSString entryId = [components objectAtIndex:0];
NSString name = [components objectAtIndex:1];
NSString address = [components objectAtIndex:2];
// etc ... 
```

您可以使用这些组件来构建一个包含 entryId、name、address 字段的对象。显示项目时使用名称，选择项目时访问地址字段。

# google-fusion-tables - Fusion Tables - 如何对空值单元格不使用多边形颜色？

> ID：10450560
> 
> 赞同：1
> 
> 时间：2012-05-04T14:11:50.207
> 
> 标签：google-fusion-tables

我有一个 Google Fusion Tables 地图可视化。每个国家都采用基于单元格数值的多边形颜色。没关系。但是没有价值的单元格会以为最大值设计的颜色重新出现在地图上。那是错误的。它们根本不应该有颜色。我怎样才能确保这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:22:07.863

尝试添加过滤器以仅选择单元格值不为空的行。

# google-chrome-extension - webRequest api：不处理对 favicon.ico 的请求

> ID：10450561
> 
> 赞同：1
> 
> 时间：2012-05-04T14:11:54.760
> 
> 标签：google-chrome-extension, webrequest

我有一个 Google Chrome[扩展](https://github.com/chestozo/faviconer)，是我在 webRequest Extensions API 处于实验阶段时编写的。目前我正在重写它，我注意到它不处理对`/favicon.ico`.

**UPD**仅在打开开发工具面板时才处理此请求。

它处理除此之外的所有其他请求（我测试过的）。

我用：

`chrome.webRequest.onBeforeRequest.addListener(handler, filter)`

收听来自我的浏览器的所有请求。过滤器值设置为处理所有请求：

`var filter = { urls: [ "*://*/*" ] };`

这是一个已知的错误？

这可能是由 Chrome 优化其网站图标存储的方式引起的（我的意思是从它的缓存中加载图标，如下所示`chrome://favicon/http://yandex.ru`：）

* * *

**参考**

webRequest API [http://code.google.com/chrome/extensions/webRequest.html](http://code.google.com/chrome/extensions/webRequest.html)

# objective-c - 使用 Cocoa/objective-C 的 HTTPS 请求

> ID：10450563
> 
> 赞同：1
> 
> 时间：2012-05-04T14:12:07.463
> 
> 标签：objective-c, cocoa, https

我需要从我的应用程序发出 HTTPS 请求才能获取一些数据。我曾经可以在这里使用这种方法来做到这一点

```
 -(void)Authenticate
{
    self.responseData = [NSMutableData data];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://10.84.4.2:8444/fish-mobile/GetPIN.jsp?MSISDN=12345"]];
    //NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];

}
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

    - (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:       (NSURLAuthenticationChallenge *)challenge {

    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
}

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    self.responseData = nil;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

      NSString *responseString = [[NSString alloc] initWithData:responseData       encoding:NSUTF8StringEncoding];

    NSLog(@"%@", responseString);

    } 
```

但是，自从我升级了代码后，这不起作用，具有此代码的旧应用程序仍然可以工作，但是如果我创建一个新应用程序并将此代码发布到其中，则会出现错误

```
 [responseData setLength:0]; 
```

和

```
 [responseData appendData:data]; 
```

它说 NSString 没有可见的@interface 声明 setLength 或 appenddata。

有人可以告诉我为什么这不起作用吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:04:46.220

把它缩短到这个

```
-(void) testme: (NSString *) link{
NSURL * url = [NSURL URLWithString:link];
NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];
[request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPMethod:@"GET"];
[[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES]; 
```

}

方法是

```
 - (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    NSString *s = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@", s);

} 
```

工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:22:00.533

在我看来，您的 responseData 实例变量以某种方式被强制转换为 NSString。responseData ivar 是如何定义的，除了您刚刚发布的委托之外，您是否对其进行了任何其他操作？

# asp.net - 将单个键/值对属性附加到枚举的最佳方法是什么？

> ID：10450566
> 
> 赞同：1
> 
> 时间：2012-05-04T14:12:19.000
> 
> 标签：asp.net, vb.net, dictionary, enums

我试图找出将单个键/值对属性附加到枚举的最佳方法，其中键是我的**MerchantId**并且值是相应的**TransactionKey**。

我目前所做的是将逗号分隔的字符串放入一个`StringValueAttribute`类中：

```
Public Enum Merchants
    <StringValue("coke,faj80785hq+faf=-1=-jfa+">
        Coke = 0
    <StringValue("pepsi,adfji=-901jnas++fdj98ua")>
        Pepsi = 1
    <StringValue("drpepper,jk878-=+9kdkdja0=a=f--daj")>
        DrPepper = 2
End Enum

Public Property Merchant As Merchants 
```

我通过调用以下方式 取出钥匙或**MerchantId**`.GetStringValue().Split(","c)(0)`：

```
Public ReadOnly Property MerchantId() As String
    Get
        Return Merchant.GetStringValue().Split(","c)(0)
    End Get
End Property 
```

我通过调用 提取值或**TransactionKey**`.GetStringValue().Split(","c)(1)`：

```
Public ReadOnly Property TransactionKey() As String
    Get
        Return Merchant.GetStringValue().Split(","c)(1)
    End Get
End Property 
```

* * *

这是最有效的方法吗？代替`StringValueAttribute`，使用 a 创建属性怎么样，`Dictionary(Of String, String)`因为它是一个键/值对列表？还是字符串数组或列表？也许在 LINQ 中有什么？还是它已经尽可能高效了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:24:12.020

我建议创建您自己的属性类，该类以类型安全的方式获取这两个值并适当地命名它们。或者，如果不是每个项目都具有两个值，则创建两个单独的属性，每个属性一个。

或者更好的是，根本不要使用枚举。创建您自己的类，该类在构造函数中采用所有三个值，然后为每个项目创建一个具有共享属性的类，如下所示：

```
Public Class Merchants
    Public Shared ReadOnly Property Coke() As Merchant
        Get
            Return _coke
        End Get
    End Property
    Private Shared _coke = New Merchant(0, "Coke", "faj80785hq+faf=-1=-jfa+")

    ...
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:02:44.450

您可以使用以下自定义属性和扩展方法来获取值。需要注意的一些事项：

*   它在 C# 中，希望没问题 :)

*   扩展方法类将 MerchantIds 和 TransactionIds 缓存在静态范围内，因此应该非常有效。

*   你`MerchantId`通过调用（*例如*）得到`Merchants.Coke.GetMerchantId();`。

*   你`TransactionId`通过调用（*例如*）得到`Merchants.Coke.GetTransactionId();`。

此外，扩展方法不会检查`Merchants`传递给它们的值是否有效，因此您可以通过调用`((Merchants)76282).GetMerchantId()`.

```
[AttributeUsage(AttributeTargets.Field)]
public class MerchantDataAttribute : Attribute
{
    public MerchantDataAttribute(string merchantId, string transactionId)
    {
        this.MerchantId = merchantId;
        this.TransactionId = transactionId;
    }

    public string MerchantId
    {
        get;
        private set;
    }

    public string TransactionId
    {
        get;
        private set;
    }
}

public static class MerchantsExtensions
{
    private static readonly Dictionary<Merchants, MerchantDataAttribute> 
        _merchantsCache = CacheMerchantsCache();

    public static string GetMerchantId(this Merchants merchants)
    {
        return _merchantsCache[merchants].MerchantId;
    }

    public static string GetTransactionId(this Merchants merchants)
    {
        return _merchantsCache[merchants].TransactionId;
    }

    private static Dictionary<Merchants, MerchantDataAttribute> CacheMerchantsCache()
    {
        return Enum.GetValues(typeof(Merchants))
            .Cast<Merchants>()
            .Select(m => new
            {
                Merchant = m, 
                MerchantAttribute = GetMerchantAttribute(m)
            })
            .ToDictionary(m => m.Merchant, m => m.MerchantAttribute);
    }

    private static MerchantDataAttribute GetMerchantAttribute(Merchants merchant)
    {
        return typeof(Merchants)
            .GetMember(merchant.ToString())
            .First()
            .GetCustomAttributes(typeof(MerchantDataAttribute), inherit: false)
            .Cast<MerchantDataAttribute>()
            .First();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:54:35.317

对于任何未来的访问者，我想我会发布答案的 VB 版本，因为这就是我标记问题的内容。此外，由于 VB 要求扩展位于模块内部，我不得不做一些稍微不同的事情。

这是模块：

*（为了更易于阅读，我使用了很多行延续。另外，为了在这个示例中的可读性，我导入了 SomeClass，这样我就不必输入那个 NameSpace）*

```
Imports SomeClass

Module MerchantsExtensions

    Private ReadOnly MerchantsCache _
        As Dictionary(Of Merchants, MerchantDataAttribute) _
        = CacheMerchantsCache()

    Private Function CacheMerchantsCache() _
        As Dictionary(Of Merchants, MerchantDataAttribute)

        Return [Enum].GetValues(GetType(Merchants)) _
            .Cast(Of Merchants)() _
            .Select(Function(m) New With
            {
                .Merchant = m,
                .MerchantAttribute = GetMerchantAttribute(m)
            }) _
            .ToDictionary(Function(m) m.Merchant, _
                          Function(m) m.MerchantAttribute)

    End Function

    Private Function GetMerchantAttribute(merchant As Merchants) _
        As MerchantDataAttribute

        Return GetType(Merchants) _
            .GetMember(merchant.ToString()) _
            .First() _
            .GetCustomAttributes(GetType(MerchantDataAttribute), _
                                 inherit:=False) _
            .Cast(Of MerchantDataAttribute)() _
            .First()

    End Function

    <Runtime.CompilerServices.Extension()>
    Public Function GetMerchantId(merchants As Merchants) As String

        Return MerchantsCache(merchants).Id

    End Function

    <Runtime.CompilerServices.Extension()>
    Public Function GetTransactionKey(merchants As Merchants) As String

        Return MerchantsCache(merchants).TransactionKey

    End Function

End Module 
```

`SomeClass`这是我为此示例 命名的类中扩展方法的实现：

```
Public Class SomeClass

    Public Enum Merchants
        <MerchantData("coke", "faj80785hq+faf=-1=-jfa+")>
            Coke = 0
        <MerchantData("pepsi","adfji=-901jnas++fdj98ua")>
            Pepsi = 1
        <MerchantData("drpepper","jk878-=+9kdkdja0=a=f--daj")>
            DrPepper = 2
    End Enum

    <AttributeUsage(AttributeTargets.Field)>
    Public Class MerchantDataAttribute : Inherits Attribute

        Public Sub New(merchantId As String, transactionKey As String)
            _Id = merchantId
            _TransactionKey = transactionKey
        End Sub

        Public Property Id() As String
        Public Property TransactionKey() As String

    End Class

End Class 
```

# javascript - 如何使用 JW Player 流式传输视频？

> ID：10450568
> 
> 赞同：2
> 
> 时间：2012-05-04T14:12:23.593
> 
> 标签：javascript, jwplayer

我目前有 JW Player 设置，因此它的第一个选项是 HTML5，后备是 FLV，然后后备是下载。

只有 HTML5 路由似乎可以流式传输视频，但我也需要它来流式传输 flash 路由中的视频。

任何想法我需要使用哪些附加参数？

当前设置如下：

```
jwplayer('the_video_container').setup({
            'id': 'playerID',
            'width': '654',
            'height': '410',
            'file': '/video/keyword_vid_1.mp4',
            'autostart': 'true',
            'controlbar': 'none',
            'screencolor': 'FFFFFF',
            'repeat': 'always',
            'modes': [
                {type: 'html5'},
                {type: 'flash', src: '/js/jwplayer/player.swf'},
                {type: 'download'}
            ]
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:26:41.040

尝试如下设置您的 JW Player：

```
jwplayer('the_video_container').setup({
        'id': 'playerID',
        'flashplayer':'/js/jwplayer/player.swf',
        'width': '654',
        'height': '410',
        'file': '/video/keyword_vid_1.mp4',
        'autostart': 'true',
        'controlbar': 'none',
        'screencolor': 'FFFFFF',
        'repeat': 'always',
        'modes': [
            {type: 'html5'},
            {type: 'flash'},
            {type: 'download'}
        ]
    }); 
```

请记住，对于那些在 html5 播放中不支持 mp4 的浏览器，您可能希望`src`在块中包含其他属性。`html5`

# jquery - 如何使用 Jquery 显示包含数组的 JSON 数据

> ID：10450569
> 
> 赞同：0
> 
> 时间：2012-05-04T14:12:24.463
> 
> 标签：jquery, ajax, json, each

这是从我的 PHP 返回的 JSON

```
{
"17":{"answer_id":"17","answer":"你挣工资","is_correct":"N"},
"18":{"answer_id":"18","answer":"您赚取利润","is_correct":"N"},
"19":{"answer_id":"19","answer":"你投资了钱","is_correct":"N"},
"20":{"answer_id":"20","answer":"以上所有。","is_correct":"Y"}
}

```

所以我基本上需要遍历这个并将它们显示为单选按钮选项。但我被卡住了 - 我检查了这个解决方案 [jQuery $.each 循环和 json 数据](https://stackoverflow.com/questions/5973717/help-with-jquery-each-loop-and-json-data)

但这只是一个数组，我遇到的另一个问题是密钥是一个数字。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:30:37.137

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var data = {
                "17": { "answer_id": "17", "answer": "You earn a salary", "is_correct": "N" },
                "18": { "answer_id": "18", "answer": "You earn profit", "is_correct": "N" },
                "19": { "answer_id": "19", "answer": "You invest money", "is_correct": "N" },
                "20": { "answer_id": "20", "answer": "All of the above.", "is_correct": "Y" }
            };

            $.each(data, function (i, entity) {
                $('#radioButtonList').append($('<input />', { 'type': 'radio', 'name': 'answerRadioButtonList', 'id': entity.answer_id, 'value': entity.is_correct })).append(entity.answer + '<br />');
            });

            $('#radioButtonList').find(':radio').live('click', function () {
                if ($(this).val() === 'Y') {
                    alert('Correct Answre.');
                }
            });
        });
    </script>
</head>
<body>
    <div id="radioButtonList">
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:28:52.710

```
var data = {
    "17": {
        "answer_id": "17",
        "answer": "You earn a salary",
        "is_correct": "N"
    },
    "18": {
        "answer_id": "18",
        "answer": "You earn profit",
        "is_correct": "N"
    },
    "19": {
        "answer_id": "19",
        "answer": "You invest money",
        "is_correct": "N"
    },
    "20": {
        "answer_id": "20",
        "answer": "All of the above.",
        "is_correct": "Y"
    }
}

$.each(data, function(key, value) {
    $('#content').append('<input id="rad-'+key+'" type="radio" name="contnet" value="'+key+'"><label for="rad-'+key+'">'+value.answer+'</label><br>');
});​ 
```

[演示](http://jsfiddle.net/nnrjs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T14:17:18.647

```
var ret = {
"17":{"answer_id":"17","answer":"You earn a salary","is_correct":"N"},
"18":{"answer_id":"18","answer":"You earn profit","is_correct":"N"},
"19":{"answer_id":"19","answer":"You invest money","is_correct":"N"},
"20":{"answer_id":"20","answer":"All of the above.","is_correct":"Y"}
};

$.each(ret, function(key, value) {

   var radio_with_label = $('<label for="'+ value.answer_id +'">'+ value.answer +'</label><input name="'+ key +'" id="'+ value.answer_id +'" type="radio" value="'+ value.is_correct+'">');

   $(TARGET).append(radio_with_label); // TARGET -> any valid selector container to radios
}); 
```

# entity-framework - 如何配置我的 DbSet 以映射到特定 SqlServer 架构中的特定表？

> ID：10450570
> 
> 赞同：3
> 
> 时间：2012-05-04T14:12:31.233
> 
> 标签：entity-framework

我需要为其构建 DAL 的数据库设计有多个模式，这给我带来了一些问题：

因此，例如，在两个单独的模式（供应商、交易）中考虑这些表

*   供应商.供应商
*   供应商类型
*   特卖。特卖
*   交易类型

我有 C#

```
namespace Data.Entities.Suppliers 
{
    public class Suppliers { /* properties mapped to fields in Sql Server table Suppliers .Suppliers */ }
    public class Types { /* properties mapped to fields in Sql Server table Suppliers .Types */ }
}

namespace Data.Entities.Deals
{
    public class Deals { /* properties mapped to fields in Sql Server table Deals.Deals */ }
    public class Types { /* properties mapped to fields in Sql Server table Deals.Types */ }
}

namespace Data.Repositories 
{
    public class EfDataContext: DbContext 
    {
        public DbSet<Suppliers.Suppliers> Suppliers { get; set; }
        public DbSet<Suppliers.Types> SupplierTypes { get; set; }
        public DbSet<Deals.Deals> Deals{ get; set; }
        public DbSet<Deals.Types> DealTypes { get; set; }
    }
} 
```

但是 EF 绊倒了两个名为“类型”的东西，我如何仅使用 DbSet 来消除两者的歧义？

注意：我试图摆脱拥有 .edmx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:15:47.420

要指定架构，您可以在类上使用 TableAttribute (http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.tableattribute(v=vs.103).aspx) 或使用 fluent 配置模型带有 ToTable() 方法的 api (http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.tableattribute(v=vs.103).aspx)

# java - 如何制作可以从调用类更新值的进度条类

> ID：10450571
> 
> 赞同：1
> 
> 时间：2012-05-04T14:12:39.163
> 
> 标签：java, swing, swingworker, jprogressbar, event-dispatch-thread

我已经尝试过遵循教程，但我一直在某个地方迷路。

我需要的是一个创建和显示进度条`JProgressBar`（我的问题是，我发现的每个示例都有某种计数器，它填充进度条并从“主”函数执行。每次我将该教程更改为我可以随意调用并显示栏的类时，我都没有显示栏（即框架出现，但栏甚至看起来不像是添加到框架中，直到之后迭代完成）。

我已经尝试过使用`SwingUtilities.invokeLater`和`SwingWorker`（在下面的课程中的最新尝试）都遇到了同样的问题。更糟糕的是，我可以做一个`dbug.myMessage`（基本上发送到`System.out`）并看到一条消息，显示该条在内存中发生变化，只是没有显示。我显然错过了一些可能很简单的东西，但我想不出它是什么。

另一件事，如果我按照[Java 教程代码示例 - ProgressBarDemo2.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemo2Project/src/components/ProgressBarDemo2.java)的原样离开本教程，并将 main 更改为 createAndShow 方法，它可以工作，但它当然不能满足我的需要。

我确实发布了另一个关于此的问题，但是对课程进行了很大的改变，我认为最好发布一个新问题。

所以，这是我修改后的代码，似乎不起作用：

```
public class MyProgressBar extends JPanel implements PropertyChangeListener, 
                                                     MyData, 
                                                     Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -1632492668549544408L;

    private MyDebug         dbug               = new MyDebug( MyData.MYDEBUGCHECK.MYPROGRESSBAR.getOn() );

    public static final int MAX                = 100;
    public static final int WIDTH              = 400;
    public static final int HEIGHT             = 75;

    private JProgressBar    myBar              = new JProgressBar( SwingConstants.HORIZONTAL, 0, MAX );
    private JFrame          myFrame            = new JFrame();

    public  Task            task;

    class Task extends SwingWorker<Void, Void> {

        public int myValue = 0;

        @Override
        public Void doInBackground() {
            //Initialize progress property.
            setProgress(0);
            while (myValue < 100) {
                //Make random progress.
                //myValue += random.nextInt(10);
                setProgress( Math.min( myValue, 100 ) );
                dbug.myMessage( "MYPROGRESSBAR", "doInBackground", "Value is %3.2f %d", myBar.getPercentComplete(), myValue );
                myBar.repaint();
            }
            return null;
        }

        public void done() {
        }

        public void mySetValue( int percent ) {
            myValue = (int)( MAX * ( (double)percent / 100.0 ) );
            dbug.myMessage( "MYPROGRESSBAR", "mySetValue", "Value is %3.2f %d percent was %d", myBar.getPercentComplete(), myValue, percent );
        }

    }

    public MyProgressBar() {
        add(myBar);

        int x = ( MyData.SCREEN.width  / 2 ) - ( WIDTH  / 2);
        int y = ( MyData.SCREEN.height / 2 ) - ( HEIGHT / 2);

        this.setBounds( x, y, WIDTH, HEIGHT );

        myFrame.setBounds( x, y, WIDTH, HEIGHT );
        myFrame.setUndecorated(true);
        myFrame.getContentPane().setSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setMinimumSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setPreferredSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setVisible(false);
        myFrame.getContentPane().setLayout(null);
        myFrame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

        myBar.setStringPainted( true );
        myBar.setBorderPainted( true );
        myBar.setValue( 0 );
        myBar.setBounds( 0, 0, WIDTH, HEIGHT );
        myBar.addPropertyChangeListener( this );

        myFrame.add( myBar );

        //Create and set up the content pane.
        //JComponent newContentPane = new MyProgressBar();
        JComponent newContentPane = myBar;
        newContentPane.setOpaque(true);                     //content panes must be opaque

        myFrame.setContentPane(newContentPane);
        myFrame.pack();

    }

    public void createAndShow () {

        //Display the window.
        myFrame.setVisible(true);
        myFrame.repaint();

    }

    public void hideAndClear () {
        //myFrame.setVisible(false);
    }

    @Override
    public void propertyChange(PropertyChangeEvent args) {
        dbug.myMessage( "MYPROGRESSBAR", "propertyChange", "Value is %s", args.getPropertyName() );
        if ( "progress" == args.getPropertyName() ) {
            int progress = (Integer) args.getNewValue();
            //myBar.setValue(progress);
        }
    }

    public void start () {
        //Instances of javax.swing.SwingWorker are not reusuable, so
        //we create new instances as needed.
        task = new Task();
        task.addPropertyChangeListener(this);
        task.execute();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:40:20.287

与其调用方法，`setProgress`不如调用.`doInBackGround``publish``SwingWorker`

该`publish`方法会将这些值传递给`process`事件调度线程上调用的方法，并且在此方法中您应该更新进度条。

在[另一个问题](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)中，我已经发布了一个示例，该示例正是这样做的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T22:48:56.643

也许下面的例子对你有用。它假装加载一个大的 XML 文件，并为每个“重要数据段”添加一个面板（在本例中实际上只是一个字符串）。通过 SwingWorker 中的 PropertyChangeEvent 更新 GUI。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.concurrent.TimeUnit;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class WorkerExample
{

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                WorkerGui gui = new WorkerGui();
                JFrame frame = gui.createFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
}

class WorkerGui
{
    public static final String ADD_NEW_ROW_PROPERTY = "ADD_NEW_ROW";
    private static final Dimension SUB_PANEL_SIZE = new Dimension(350, 50);
    private JButton button;
    private JComponent labelComponent;
    private JScrollPane scroller;
    int labelCount = 0;

    private List<String> loadXml() {
        try {
            // pretend to load a large XML file...
            TimeUnit.SECONDS.sleep(1);
        } catch (InterruptedException ex) {
            Logger.getLogger(WorkerGui.class.getName()).log(Level.SEVERE, null, ex);
        }

        List<String> dataList = new ArrayList<String>();

        for (int i = 1; i <= 20; i++) {
            dataList.add("Important data " + i);
        }

        return dataList;
    }

    ProgressMonitor monitor = null;

    class XmlWorker extends SwingWorker<Void, Void> {

        @Override protected Void doInBackground() throws Exception {
            monitor.setProgress(2);
            List<String> rows = loadXml();

            final int denom = rows.size();

            int i = 1;
            Random random = new Random();
            for (String string : rows) {
                if (monitor.isCanceled()) {
                    break;
                }
                Thread.sleep(random.nextInt(2000));
                firePropertyChange(ADD_NEW_ROW_PROPERTY, null, string);
                setProgress((int)(100 * (i / (double)denom)));
                i++;
            }
            return null;
        }

        @Override protected void done() {
            // restore the button
            button.setEnabled(true);
            button.requestFocus();
        }
    }

    final PropertyChangeListener listener = new PropertyChangeListener() {
        @Override public void propertyChange(PropertyChangeEvent evt) {
            if ("progress".equals(evt.getPropertyName())) {
                monitor.setProgress((Integer)evt.getNewValue());
            } else if (ADD_NEW_ROW_PROPERTY.equals(evt.getPropertyName())) {
                addRow((String)evt.getNewValue());
            }
        }
    };

    private void doWork() {
        monitor = new ProgressMonitor(labelComponent.getTopLevelAncestor(), "Loading XML", "", 0, 100);
        monitor.setProgress(0);
        monitor.setMillisToPopup(0);
        monitor.setMillisToDecideToPopup(0);
        XmlWorker worker = new XmlWorker();
        worker.addPropertyChangeListener(listener);
        worker.execute();
    }

    private JComponent setupGui() {
        labelComponent = Box.createVerticalBox();
        scroller = new JScrollPane(labelComponent,
                                    JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, 
                                    JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        JPanel buttonPanel = new JPanel();
        button = new JButton("Do it!");
        buttonPanel.add(button);
        button.addActionListener(new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                button.setEnabled(false);
                clear();
                doWork();
            }
        });

        JPanel mainPanel = new JPanel(new BorderLayout());
        mainPanel.add(scroller, BorderLayout.CENTER);
        mainPanel.add(buttonPanel, BorderLayout.SOUTH);
        return mainPanel;
    }

    public JFrame createFrame() {
        JFrame frame = new JFrame("Hello!");
        frame.setSize(400, 400);
        JComponent component = setupGui();
        frame.add(component);
        return frame;
    }

    public void clear() {
        labelComponent.removeAll();
        labelCount = 0;
        scroller.validate();
        scroller.getTopLevelAncestor().repaint();
    }

    /**
     * Creates a JLabel out of the data and adds it to the main panel.
     * Must be called on Event Dispatch Thread!!
     * @param data  the data to add, could be any class.
     */
    public void addRow(String data) {
        if (labelCount > 0) {
            labelComponent.add(Box.createVerticalStrut(10));
        }
        labelCount++;

        final JLabel label = new JLabel(data);
        JPanel panel = new JPanel();
        panel.add(label);

        panel.setPreferredSize(SUB_PANEL_SIZE);
        panel.setMaximumSize(SUB_PANEL_SIZE);
        panel.setBorder(BorderFactory.createLineBorder(Color.BLUE));

        labelComponent.add(panel);
        scroller.validate();
        panel.scrollRectToVisible(panel.getBounds());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:19:59.510

我确实让它工作并发布，以防有​​人碰巧在这个踏板上搜索并需要工作代码。

```
package com.swa.fin.esaa.sgb.myclasses.myzzarchives;

import java.awt.Dimension;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.Serializable;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingConstants;
import javax.swing.SwingWorker;

public class MyProgressBarTest {

    public class MyProgressBar extends JPanel implements PropertyChangeListener, 
                                                         Serializable {

        private static final long serialVersionUID = -1632492668549544408L;

        public static final int MAX                = 100;
        public static final int WIDTH              = 400;
        public static final int HEIGHT             = 75;

        private JProgressBar    myBar              = new JProgressBar( SwingConstants.HORIZONTAL, 0, MAX );
        private JFrame          myFrame            = new JFrame();

        public  Task            task;

        class Task extends SwingWorker<Void, Integer> {

            public int myValue = 0;

            @Override
            public Void doInBackground() {
                //Initialize progress property.
                setProgress(0);
                myBar.setValue( myValue );
                myBar.repaint();
                return null;
            }

            public void done() {
            }

            public void mySetValue( int percent ) {
                myValue = (int)( MAX * ( (double)percent / 100.0 ) );
                setProgress( Math.min( myValue, 100 ) );
                myBar.repaint();
            }

        }

        public MyProgressBar() {
            add(myBar);

            myFrame.setUndecorated(false);
            myFrame.getContentPane().setSize( new Dimension( WIDTH, HEIGHT ) );
            myFrame.setMinimumSize( new Dimension( WIDTH, HEIGHT ) );
            myFrame.setPreferredSize( new Dimension( WIDTH, HEIGHT ) );
            myFrame.setSize( new Dimension( WIDTH, HEIGHT ) );
            myFrame.setVisible(false);
            myFrame.getContentPane().setLayout(null);
            myFrame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

            myBar.setStringPainted( true );
            myBar.setBorderPainted( true );
            myBar.setValue( 0 );
            myBar.setBounds( 0, 0, WIDTH, HEIGHT );
            myBar.addPropertyChangeListener( this );

            myFrame.add( myBar );

            //Create and set up the content pane.
            //JComponent newContentPane = new MyProgressBar();
            JComponent newContentPane = myBar;
            newContentPane.setOpaque(true);                     //content panes must be opaque

            myFrame.setContentPane(newContentPane);
            myFrame.pack();

        }

        public void createAndShow () {

            //Display the window.
            myFrame.setVisible(true);
            myFrame.repaint();

        }

        public void hideAndClear () {
            //myFrame.setVisible(false);
        }

        @Override
        public void propertyChange(PropertyChangeEvent args) {
            if ( "progress" == args.getPropertyName() ) {
                int progress = (Integer) args.getNewValue();
                myBar.setValue(progress);
            }
        }

        public void mySetValue( int percent ) {
            if ( task != null ) {
                task.mySetValue( percent );
            }
            myBar.repaint();
        }

        public void start () {
            //Instances of javax.swing.SwingWorker are not reusuable, so
            //we create new instances as needed.
            task = new Task();
            task.addPropertyChangeListener(this);
            task.execute();
        }
    }

    public class Tester {

        public Tester() {
        }
        public void testit () {
            MyProgressBar bar = new MyProgressBar();
            bar.createAndShow();
            bar.start();
            bar.mySetValue(  0 );
            try { Thread.sleep( 100 );  } catch (InterruptedException e) { e.printStackTrace(); } 
            bar.mySetValue(  10 );
            try { Thread.sleep( 100 );  } catch (InterruptedException e) { e.printStackTrace(); } 
            bar.mySetValue(  20 );
            try { Thread.sleep( 100 );  } catch (InterruptedException e) { e.printStackTrace(); }
            for ( int count = 20; count <= 100; count++ ) {
                bar.mySetValue(  count );
                try { Thread.sleep( 100 );  } catch (InterruptedException e) { e.printStackTrace(); }
            }
        }
    }

    public static void main ( String[] args ) {
        MyProgressBarTest my = new MyProgressBarTest();
        MyProgressBarTest.Tester test = my.new Tester();

        test.testit();

    }

} 
```

但是，如果我从类中调用它并读取 XML 文件，将其解组，然后循环加载的 ArrayList 并创建放置在 JPanel 上的 JLabels，它不会更新任何图形（其中任何一个）直到班级完全完成了它正在做的事情，尽管重新粉刷和其他东西。

对此有什么想法吗？

# c++ - Fluent 接口模式和 std::unique_ptr

> ID：10450574
> 
> 赞同：4
> 
> 时间：2012-05-04T14:12:56.697
> 
> 标签：c++, design-patterns, c++11, fluent-interface, unique-ptr

我正在玩[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)模式。

首先，我写了这样的东西：

```
class C
{
public:
    C() { }

    C* inParam1(int arg1){ param1 = arg1; return this; }
    C* inParam2(int arg2){ param2 = arg2; return this; }

private:
    int param1;
    int param2;
} 
```

然后我尝试使用 std::unique_ptr，但后来我意识到我不知道如何沿链“移动”指针（this）。我试过类似的东西：

```
return std::move(this); 
```

那当然行不通。

我怎样才能做到这一点？做这样的事情有什么问题吗？

为了回复诸如“不要使用指针”之类的评论：（还）没有任何实际原因，因为我正在使用指针进行此操作，只是我想知道是否可以这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T14:18:18.130

为什么你必须返回指针？

```
class C
{
public:
    C create() { return C(); }

    C & inParam1(int arg1){ param1 = arg1; return *this; }
    C & inParam2(int arg2){ param2 = arg2; return *this; }

private:
    C() { }
    int param1;
    int param2;
}; 
```

我必须承认，我根本不了解该创建函数的目的，或者为什么构造函数是私有的，或者您实际上是如何创建此类的对象的。在我的理解中，这个类实际上应该是这样的：

```
class C
{
public:
    C() {}

    C & inParam1(int arg1){ param1 = arg1; return *this; }
    C & inParam2(int arg2){ param2 = arg2; return *this; }

private:        
    int param1;
    int param2;
}; 
```

并像这样使用：

```
int main()
{
    C().inParam1(10).inParam2(20).whatever();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:18:57.560

任何给定实例只能有一个`std::unique_ptr`实例（因为每个实例都会尝试删除它并且只能执行一次）。因此，虽然`create`可以返回 a `std::unique_ptr`，但其他两种方法不能。

是否有任何理由不让其他方法返回引用而不是指针？为什么你不只是有一个公共构造函数？`create`在此示例中，我看不到该方法的价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:22:27.193

您错过了[c++ fluent interface 示例](http://en.wikipedia.org/wiki/Fluent_interface#C.2B.2B)中的一个重要想法：

```
//it doesn't make sense to chain after create(), so don't return *this 
```

因此，您不应该从您的`create()`方法中返回任何内容。

但是，如果您仍然想返回某些东西，至少不要（误）使用`unique_ptr`，而只需返回一个新对象：

```
C create() { return C(); } 
```

# objective-c - kUTTypeAppleICNS 有损？

> ID：10450576
> 
> 赞同：0
> 
> 时间：2012-05-04T14:12:58.600
> 
> 标签：objective-c, icons, lossless

只是一个（也许是愚蠢的）问题：为什么将 NSImage 保存为 kUTTypeTIFF 或 kUTTypePNG（将 kCGImageDestinationLossyCompressionQuality 设置为 1.0）会生成无损文件，而 kUTTypeAppleICNS 会生成奇怪的图标？我得到的最明显的结果是将标准（我的意思是“未自定义”）MacOS垃圾图标（/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/TrashIcon.icns）加载为NSImage并尝试将其写回文件。（我使用标准程序：CGImageDestinationCreateWithURL + CGImageDestinationAddImage + CGImageDestinationFinalize）

谢谢

# objective-c - iOS - 跨故事板使用的 NIB 视图（用于设计和动画逻辑）

> ID：10450577
> 
> 赞同：3
> 
> 时间：2012-05-04T14:13:01.950
> 
> 标签：objective-c, ios, interface-builder, storyboard, xib

我有一个几乎完成的 iOS 5 项目，但是到处都缺少一个相同的视图。它是标准 NavigationBar 的替代品，您可以通过滑动在导航层次结构中“返回”，并且动画效果很好。

好的，因为很难通过代码进行布局，所以我创建了一个空的 IB 文档（HeaderView.xib），其中我有一个包含子视图等的视图。我之前有动画代码，所以我只创建了一个 UIView 子类（“HRAnimationView”） （并在 xib 的检查器“自定义类”字段中写下它的名称，还将子视图连接到插座）使用方法：

```
- (void)loadAnimation {…} 
```

第二个（这是完成动画的委托方法）：

```
- (void)animationDidStop:(NSString*)animationID finished:(NSNumber*)finished context:(void*)context {} 
```

...这是所有动画内容发生并一遍又一遍地调用自己直到完成的地方...

在情节提要中，我有一个尺寸完全相同的子视图（及其出口），并希望加载 XIB（在相应控制器的 viewDidLoad 方法中）：

```
NSArray *bundle = [[NSBundle mainBundle] loadNibNamed:@"HeaderView" owner:self options:nil];

HRAnimationView *view;

for (id object in bundle) {        
    NSLog(@"%@",object);
    if ([object isKindOfClass:[UIView class]])
        view = (HRAnimationView *)object;
}

self.headerView = view;
[self.view setNeedsDisplay];
[view loadAnimation]; 
```

但是 headerView 是空的！（UIView *view 也不起作用，owner:self.headerView 也不起作用）

…日志只是给了我：

```
<HRAnimationView: 0x3f1890; frame = (0 0; 240 49); autoresize = RM+BM; layer = <CALayer: 0x3f18d0>> 
```

…</p>

问题是什么？？也没有编译失败！

我不明白，为什么 xib 在我的情况下完全一文不值？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:23:27.120

> NSArray *bundle = [[NSBundle mainBundle] loadNibNamed:@"HeaderView" owner:self options:nil];

在上述声明之后......尝试添加这个

```
[self.headerView = [bundle objectAtIndex:0] 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:11:14.627

解决了！！！

我创建了一个新的 ViewController 并选中了“使用 xib 创建”框并删除了 xib 的视图并复制并粘贴了已经设置的视图，在 ViewController 中我将动画代码放在 viewDidLoad 中。

然后在每个故事板 ViewController 的 viewDidLoad-method 中加载洞的东西：

```
UIViewController *ctrl = [[UIViewController alloc] initwithNibNamed:@"HeaderView"];
[self.headerView addSubview:ctrl.view] 
```

（headerView 是每个 Storyboard 中一个视图的 IBOutlet，所以，这基本上是唯一需要设置的东西，NICE！）

1.  另一种可能性是： [使用没有外部 xib 的情节提要添加子视图](https://stackoverflow.com/questions/8303101/add-subview-using-storyboard-without-external-xib)
2.  或： http: [//forums.macrumors.com/showthread.php?t=749544](http://forums.macrumors.com/showthread.php?t=749544)

看起来 Xib 没有相应的 ViewController 是没用的，但应该（奇怪..无论如何）。但是感谢您的回复，如果他/她有同样的问题，希望现在有人能找到这个！

# c# - 使用 ExchangeService 从 Exchange Server 2010 SP1 获取全局地址列表 (GAL)

> ID：10450578
> 
> 赞同：3
> 
> 时间：2012-05-04T14:13:04.057
> 
> 标签：c#, exchangewebservices, exchange-server-2010, gal

我想使用 ExchangeService WebService 以编程方式（使用 C#）访问交换中的全局地址列表。我怎样才能做到这一点？另一个问题：我已经知道如何搜索特定用户。但是，如果该用户有超过 1 封电子邮件，如果我搜索非默认电子邮件，他找不到它！如何使用 ExchangeService 解决此问题？我看到了[如何从 Exchange Server 获取联系人列表的问题？](https://stackoverflow.com/questions/2071668/how-to-get-contact-list-from-exchange-server)但是，通过这种方式，我只能访问我自己的地址列表（我想要所有组织地址列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:54:19.877

这能满足您的需要吗？

[http://vivekiyer.net/2010/07/17/querying-the-global-address-list-gal-via-exchange-web-services-ews/](http://vivekiyer.net/2010/07/17/querying-the-global-address-list-gal-via-exchange-web-services-ews/)

# installation - 创建 setup.exe

> ID：10450580
> 
> 赞同：2
> 
> 时间：2012-05-04T14:13:04.633
> 
> 标签：installation

我有三个 exe 文件和一个用于安装程序的文件夹，我正在考虑进行设置以运行这些 exe，然后将文件夹移动到 c:。

程序执行会是这样的：

文件1.exe

文件2.exe

文件3.exe

将文件夹移动到 c：

我正在考虑做一个批处理文件，但批处理文件一次执行所有程序。

我知道有一个名为 installshield 的程序可以创建一个安装文件，但它很昂贵。我需要一些关于可以使用哪些开源软件来完成这项工作的建议，我在想 Visual Basic？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:16:22.860

查找[NSIS](http://nsis.sourceforge.net/Main_Page)，我认为这就是您要寻找的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:22:18.237

看看这个应用程序：[http ://www.sminstall.com/](http://www.sminstall.com/)

# javascript - 通过javascript提交表单并传递一个变量

> ID：10450581
> 
> 赞同：1
> 
> 时间：2012-05-04T14:13:05.587
> 
> 标签：javascript, html

我想提交一个表单并添加一个 javascript 变量。我尝试使用 AJAX，但由于表单在同一页面上被分成两部分，因此无法正常工作。我现在使用一个`<button onclick='submit_form()'>send</button>`调用以下函数的函数：

```
function submit_form()
{
document.getElementById("form2").submit();
} 
```

但是我需要传递一个`current_score`我声明的javascript变量，它有一个值我只是不知道如何将它添加到我的提交函数中我尝试在函数本身中使用return并为它编写一个函数，但都没有奏效:) 非常感谢帮助和提示。 **这个想法是人们收到一个分数填写一个表格并将其发送到数据库，ajax 脚本部分是尝试将值传递到将提交数据的下一页**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T14:19:01.823

你的问题不是很清楚。简单的方法是将 get 参数附加到您请求的 URL。以下示例将隐藏的输入元素附加到您的表单：

```
var hidden = document.createElement("input");
hidden.type = "hidden";
hidden.name = "theName";
hidden.value = current_score;
var f = document.getElementById("form2");
f.appendChild(hidden);
f.submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T23:49:03.590

您也可以将信息存储在 window.variable 中

# c# - XNA BlendState 与 SpriteBatch

> ID：10450585
> 
> 赞同：1
> 
> 时间：2012-05-04T14:13:20.970
> 
> 标签：c#, .net, xna, texture2d, spritebatch

我们需要一个 BlendState 来执行以下操作：

*   透明PNG按预期绘制，保留其后面的任何内容
*   我们用来`Color.White`按原样绘制PNG
*   我们将改变颜色的 alpha 通道来改变纹理的“不透明度”

为了获得这种效果，`BlendState.AlphaBlend`如果我们将 alpha 设置为 100 或 255 以外的任何数字，则它很接近，但会绘制白色作为透明部分。

所以我们尝试了这个：

```
 _blendState = new BlendState();
        _blendState.AlphaSourceBlend = Blend.SourceAlpha;
        _blendState.AlphaDestinationBlend = Blend.InverseSourceAlpha;
        _blendState.ColorSourceBlend = Blend.SourceAlpha;
        _blendState.ColorDestinationBlend = Blend.InverseSourceAlpha; 
```

这行得通，但如果两个 PNG 相互重叠，我们现在会得到不希望的效果。基本上我们会得到一些奇怪的线条，看起来像是在添加像素数据（或其他东西）。

例子：

![在此处输入图像描述](../Images/82a794c220d77ab472d8bdcb5d474942.png)

实际上，`BlendState.AlphaBlend`是这样的：

```
 _blendState = new BlendState();
        _blendState.AlphaSourceBlend = Blend.SourceAlpha;
        _blendState.AlphaDestinationBlend = Blend.InverseSourceAlpha;
        _blendState.ColorSourceBlend = Blend.One;
        _blendState.ColorDestinationBlend = Blend.InverseSourceAlpha; 
```

图像看起来比上面更好：

![在此处输入图像描述](../Images/a502533a2e80108117e17ad2a20fc449.png)

但是随后 alpha 不起作用，使用 100 作为 alpha 将用白色替换背景。

我们`BlendState`应该使用什么来从 SpriteBatch 中获得我们想要的效果？我们可以使用不同的颜色，例如`Color.Black`有另一种方法可以让它工作。

*PS - 另一个不错的功能是如果我们可以`Color.Red`用来“着色”纹理，但我们希望它首先能够正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:04:31.830

尝试为内容项目中的那些 .png 设置为`premultipliedAlpha`。`false`

不幸的是，我不知道在使用`Texture2d.FromStream()`.

# macos - Qt、谷歌 BreakPad 和 MacOs

> ID：10450586
> 
> 赞同：1
> 
> 时间：2012-05-04T14:13:24.837
> 
> 标签：macos, qt, google-breakpad

有没有人在没有 xcode 的情况下使用标准 Qt 工具链在 MacOS 上成功构建 Google Breakpad？

我现在正在尝试在这个图书馆工作两天，但仍然没有成功。我已经成功编译并在 Windows 和 Linux 上运行它。（来自原始 Google-git 存储库）。

但是 MacOS 版本的库缺少**libbreakpad_client.a**的生成文件，并且生成的**libbreakpad.a**不包含异常处理程序。

[http://screencast.com/t/V0mNiM3kZ](http://screencast.com/t/V0mNiM3kZ)

[我在 stackoverflow](https://stackoverflow.com/questions/5404636/building-google-breakpad-on-mac-os-x)上找到了关于这个问题的几个主题，但是更新生成文件的建议对我不起作用（或者我没有正确复制生成文件）。

我还尝试直接从 Mozilla 存储库（版本 10 和 11beta）下载更新版本。但是当我尝试编译 Mozilla 版本时，出现了另一个未定义符号的错误（在 Mac 和 Linux 上）。

我还找到[了 AlekSi - breakpad-qt](https://github.com/AlekSi/breakpad-qt)但这个版本也只能在 Win 和 Linux 下正常工作。在 Mac 下，有一些关于“未知架构——你在 PDP-11 上吗？”的错误。

我将感谢任何能告诉我如何编译它并让它在 Mac 下工作的人，或者能给我发送一个打包版本的 breakpad，它可以在 MacOS 下使用标准 make 编译并在 Qt 应用程序中使用。

谢谢卢德克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:04:35.567

AlekSi 的 breakpad-qt 已有三年历史，其中的 breakpad 源不支持 OSX 上的 64 位。

未能检测到您的处理器类型是它抱怨“未知架构 - 你在 PDP-11 上吗？”的原因。

您肯定需要更新的 breakpad 版本，无论是来自他们的 svn，还是来自我的 breakpad-qt fork：[https ://github.com/webitup/qt-breakpad](https://github.com/webitup/qt-breakpad)

现在，如果您还打算支持 10.6 (MACOSX_DEPLOYMENT_TARGET=10.6)，则需要使用此[https://github.com/webitup/qt-breakpad/commit/71a9fdedd827e5939ba66bfcc0cd6c1c9fbbc87b](https://github.com/webitup/qt-breakpad/commit/71a9fdedd827e5939ba66bfcc0cd6c1c9fbbc87b)修补 breakpad 源（-> 我不认为 10.6有PPC支持）

然后：

您显然设法直接从源代码编译，因此，这种方式很好。

现在，如果您想从 breakpad 构建一个框架，并从您的 qt app/lib 链接到该框架，那么 Dave Mateer 的建议是可行的方法（他值得称赞）。以下对我有用：

```
cd $BREAKPAD_SOURCE_TREE
xcodebuild -sdk macosx10.7 -project src/client/mac/Breakpad.xcodeproj -configuration Release -target Breakpad ARCHS=x86_64 ONLY_ACTIVE_ARCH=YES MACOSX_DEPLOYMENT_TARGET=10.6 GCC_VERSION=com.apple.compilers.llvmgcc42 
```

请注意，我只是在构建目标 Breakpad 而不是 All（看来您只需要那个 - 并且使用 All 的测试对我来说失败了，尽管它确实产生了一个可用的框架）。

请注意，您不需要 XCode 本身 - 只是命令行构建工具。

为了在您的 QT 项目中使用该框架：

```
mac {
        QMAKE_LFLAGS += -F$$BREAKPAD_PATH/client/mac/build/Release/
        LIBS += -framework Breakpad
} 
```

你应该准备好了。

最后：我还在我的 breakpad-qt fork 源本身中进行了一些更改，以使其至少针对更新的 breakpad 版本进行编译（在 OSX 上！），但我不知道*它*是否*能*正常工作。

我只是从那个叉子开始——如果你想分享经验和/或在那里提交一些东西，请问。

# html - 为什么浮动元素出现在非浮动元素之前，即使它们在标记中出现在它之后？

> ID：10450593
> 
> 赞同：1
> 
> 时间：2012-05-04T14:14:12.117
> 
> 标签：html, css, css-float

我认为如果文本在标记中跟随该元素，则文本将围绕浮动元素流动。那么为什么下面的例子会产生显示的结果呢？

这是HTML：

```
<div class="float block red">Red</div>
TEXT BETWEEN RED AND BLUE
<div class="float block blue">Blue</div>
<div class="float block green">Green</div> 
```

和CSS：

```
.float{
    float: left;
}
.block{
    width: 50px;
    height: 50px;
}
.red{ background-color: red;  }
.blue{ background-color: blue; }
.green{ background-color: green; } 
```

这是结果：

![结果](../Images/621a321ebd50a3f2c11e646a9b26018e.png)

为什么屏幕上没有顺序：红色、红色和蓝色之间的文本、蓝色、绿色？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:17:30.427

> “一个浮动框位于正常流中，然后从流中取出并尽可能向左或向右移动。内容可能会沿着浮动的一侧流动。[...] 当一个盒子从正常流中取出时，所有仍在正常流中的内容都会完全忽略它，不会为它腾出空间。”</p>

[资源](http://css.maxdesign.com.au/floatutorial/definitions.htm)

这是因为您正在浮动左侧的元素。您实质上是在说这些元素相对于其他浮动元素将尽可能位于页面的左侧。您的文本不是浮动的，因此是相对于最右边、最左边的浮动元素。那有意义吗？

要达到您想要的结果，只需将文本放入 DIV、SPAN 等中并将其也向左浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:24:44.220

CSS中有两种元素：块级元素和内联元素。这些元素及其位置由称为流的概念控制。

块级元素前后都有断点，内联元素没有。虽然这过于简单化了，但这些是在 CSS 中管理流的基本规则。

给定`position:fixed`的元素和给定`float`属性的元素*在正常意义上从流中删除，*另外需要注意的是内联元素和文本将环绕浮动元素。

如果你可以把一个浮动元素想象成一​​个盒子，它在物理上将自己抬离地面，向左或向右飞行，直到它不能再往前走，然后又扑通一声回到地面上，你的想法是正确的（想想星际争霸中的人族基地）。浮动元素从您的文本中吹出，然后您的文本会重新定位，以在浮动的内容“着陆”后将其包裹起来。

浮动总是相对于其他浮动定位自己。

一个例外是当一个元素`clear`粘在它上面时。CSS clear 属性基本上表示任何块级元素将允许浮动在一侧或另一侧，否则将浮动元素踢到下一行。它实际上比这要复杂一些，你应该查看[MDN 关于 Clear 的文章](https://developer.mozilla.org/en/CSS/clear)。

# .net - 如何处理访问百分比字段？

> ID：10450594
> 
> 赞同：0
> 
> 时间：2012-05-04T14:14:21.730
> 
> 标签：.net, ms-access, getschematable

MS Access 对每个字段都有一个“格式”设置。对于数字字段，选项之一是“百分比”。选择百分比时，小数位数的行为会发生变化。例如，指定 0 个小数时，该字段实际上将存储 2 个小数。因此，例如，0.05 的存储值显示为 5%。

问题是当通过 GetSchema 检索列信息时，该示例的精度为 0（实际上为 NULL）。这是一个问题，因为我使用 GetSchema 信息来确保用户输入的小数不会超过可以存储的数量。

任何想法如何解决这一问题？

# jquery - iPhone 和 Android Web 浏览器的启动画面

> ID：10450595
> 
> 赞同：0
> 
> 时间：2012-05-04T14:14:23.653
> 
> 标签：jquery, android, iphone, html, splash-screen

想要显示 iphone 和 android 网络浏览器的启动页面。我是新来的。最好的方法是什么？有教程吗？

对于 iphone，我想要一个模态屏幕。

感谢你的帮助。

最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:44:32.733

您必须在 html 上设置一些元信息，例如：

```
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-startup-image" href="/img/startup-landscape.png" sizes="1024x748" />
<link rel="apple-touch-startup-image" href="/img/startup-portrait.png" sizes="768x1004" />
<link rel="apple-touch-startup-image" href="/img/startup-portrait.png" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi" />
<meta name="HandheldFriendly" content="true" />
<meta name="format-detection" content="telephone=no" />
<link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon.png" /> 
```

# java - 仅在 jTextPane 中为一个字符着色

> ID：10450601
> 
> 赞同：1
> 
> 时间：2012-05-04T14:14:53.017
> 
> 标签：java, textcolor

我正在使用 netbeans 进行项目。我试图只为 jTextPane 中文本的多个位置中的一个字符着色。我尝试使用 StyledDocument.setCharacterAttributes，但它允许我为至少 2 个字符着色，这不是我想要的。

目前我正在使用此代码：

```
StyledDocument doc = jTextPane1.getStyledDocument();
javax.swing.text.Style style = jTextPane1.addStyle("Red", null);
StyleConstants.setForeground(style, Color.RED);
doc.setCharacterAttributes(5, 2, jTextPane1.getStyle("Red"), true); 
```

任何人都可以帮助解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:52:21.320

这是为单个字符着色的示例。

```
import java.awt.Color;
import javax.swing.*;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class ColoredTextTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = initgui();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    private static JFrame initgui() {
        JFrame frame = new JFrame("Test");
        JPanel panel = new JPanel();
        StyledDocument doc = (StyledDocument) new DefaultStyledDocument();
        JTextPane textpane = new JTextPane(doc);
        textpane.setText("Test");
        javax.swing.text.Style style = textpane.addStyle("Red", null);
        StyleConstants.setForeground(style, Color.RED);
        doc.setCharacterAttributes(0, 1, textpane.getStyle("Red"), true); 
        panel.add(textpane);
        frame.add(panel);
        return frame;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:46:16.977

你读过文档[`setCharacterAttributes`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/StyledDocument.html#setCharacterAttributes%28int,%20int,%20javax.swing.text.AttributeSet,%20boolean%29)吗？

您将`length`参数设置为 2。将其设置为 1。

# android - 内容提供者是单个阻塞实例吗？

> ID：10450603
> 
> 赞同：1
> 
> 时间：2012-05-04T14:14:57.503
> 
> 标签：android, multithreading, android-asynctask, android-contentprovider

我有一个内容提供者，它可以查询多个其他内容提供者（通过内容解析器），并对联系人数据进行一些合并。

基本上我已经扩展了 asyncTask 并处理了数据。在我的主 UI 线程中，我执行以下操作

```
cancelAllExistingTask();

proiverTest1 = new ProviderTask(getActivity, MyActivity.this.callBack).execute(SearchString, elementId1);
proiverTest2 = new ProviderTask(getActivity, MyActivity.this.callBack).execute(SearchString, elementId2);
proiverTest3 = new ProviderTask(getActivity, MyActivity.this.callBack).execute(SearchString, elementId3);
proiverTest4 = new ProviderTask(getActivity, MyActivity.this.callBack).execute(SearchString, elementId4); 
```

因此，我创建了 ProviderTask 的 4 个实例，作为 ProviderTask 构造函数的一部分，我传入了一个接口，该接口在我的 callBack 类实例中实现。

```
class CallBackClass implements MyCallBackIF{} 
```

doInBackground 期间的 ProviderTask 将 ContentResolver.query() 触发到一个提供者。所有 4 个任务都使用相同的提供程序。但是基于 elementId，它通过 onPostExecute() 返回到接口，其中包含它应该放入的游标数组的 elementId（参见下面的**）。

contentProvider 解析传入的 URI，并基于 URI 去向其他 1 个 ContentProvider 查询数据。这可以是本地数据，也可以是来自服务器的远程数据。然后根据来源，它可能会将其与其他数据（本地）合并，并提供一个带有合并数据的新游标。单独的 Content Provider -> Content Resolver -> Content Provider -> Content Resolver 相当快。对于在我们拥有的几个不同应用程序中提供搜索聚合有点有用。提供者确实生成了一个 asyncTask 来加载远程内容提供者数据，并且有一个同步块等待它完成返回数据，然后再返回到 Activity。造成这种情况的部分原因是我可以传入一个有多个提供者要搜索的 uri & 在它触发多个内容解析器查询的地方合并到它自己的合并游标中。（但现在它是一个在异步任务上运行的带有 1 个元素的合并光标）。

** 我正在做的是使用合并游标和 Cursor[] 根据来自各种不同提供者的合并数据更新列表视图。您可能会问，为什么不让内容提供商为我们做这项工作？我们尝试了。它似乎对我们不起作用，但对建议持开放态度。

因此，如果我们的 MergeProvider 查询 - ContentProvider1、ContentProvider2、ContentProvider3、ContentProvider4 和说 ContentProvider3 也必须查询 ContentProvider 1 以合并一些数据。ContentProvider 3 & 4 是远程的（基于服务器）

使用预测搜索，我们希望返回最快的搜索结果首先出现。其他人在他们回来时慢慢加入，如果输入了一个新字母，我们想转储整个结果集，并等待一个新的查询。这就是正在发生的事情，似乎我们在某个地方被阻止了（我们已经尝试提高 AsyncTask 的线程优先级，我们有 ExecuteExecutor w/我们自己的 Executor 和池（将异步任务的最大值提高到 10 到 100）w/没有结果）。

所以有人输入了一个字母“a”——内容提供者 1 和内容提供者 2 会在 0.050 秒内返回。Content Provider 4 会在 0.100 秒后返回。Content Provider 3 在 5.00 秒后返回。（5.00 延迟与我们正在测试的测试服务器有关，但它暴露了我们看到的阻塞问题）。

现在，如果他们继续输入，并且字符串显示 'albert' 它可能已经为 'al' 触发了一个新的 AsyncTask，其中一些会快速返回，而另一些则不会。假设 Provider 3 仍在等待响应。我们的如果在结果返回时预测搜索已更改，代码将丢弃结果。（这很好）。所以它会触发另一轮 AsyncTasks 'albert'。现在记住 Provider 3 在它的 5 秒响应中仍然关闭。

我们在 AsyncTask 和 Calling 方法（处理程序）中添加了一些日志记录。我们看到的是 AsyncTask 正在创建，但在 SearchProvider3 返回结果（并且它们被丢弃）之前，我们没有看到 doInBackground() 开始。我很困惑为什么会这样。但它基本上阻塞了其他 AsyncTask 对象。不知道什么会导致 doInBackground() 在另一个 AsyncTask 返回之前不会被调用，除非它是因为 10 个 AsyncTask 的最大限制？使用我们自己的 ThreadPoolExecutor 实现（甚至创建两个不同的 ThreadPoolExecutor 实例），我们仍然看到相同的问题。

如果在我们的 Provider 3 的查询方法中添加一个 thread.sleep(60000)，这是非常明显的。基本上看起来可能有 5 个异步任务在开始阻塞之前被调用。我们的目标是独立于其他长时间运行的任务，更快地获得本地匹配结果。这在慢速（3g）网络上会更加明显。

也许我们不应该为此使用异步任务，而只使用可运行对象？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:21:27.620

我们没有让我们的应用实现 ContentResolvers 和所有查询，而是将其实现为内容提供者的一部分，并通过 IntentService 分派搜索。

我们将单个游标抓取到临时表，然后使用服务意图，它会触发所有其他内容解析器查询，并填充底层临时表。如果在其中一个意图服务上花费一些时间，则用户不会真正注意到，因为其他意图服务会很快填充它。

似乎解决了我们的问题。

# c# - 将 Xsd Xml 验证警告视为错误

> ID：10450605
> 
> 赞同：0
> 
> 时间：2012-05-04T14:15:10.780
> 
> 标签：c#, visual-studio, xsd, xml-validation

我发现在 Project Properties 中，有一个选项可以在 VS 2010 中将 Selected Warnings as Error 视为错误。以及通过将 Xsd 验证为 Error 来指定 Xml 警告的方法是什么？因为我希望在构建期间进行验证，所以我没有使用 ValidationEventHandler 来验证 Xml。任何其他建议也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:13:05.340

我认为没有 VS 设置可以做到这一点，您需要添加一个自定义构建步骤，明确验证 XML 文件是否针对其模式。

# java - Apache Camel 和 CXF：多个 cxf:rsServer 标签 .. 这可能吗？

> ID：10450606
> 
> 赞同：3
> 
> 时间：2012-05-04T14:15:19.490
> 
> 标签：java, rest, http-status-code-404, apache-camel, cxfrs

我一直在用 cxf 和骆驼制作宁静的网络服务，我遇到了一个奇怪的问题，我不知道这是正常的骆驼行为还是什么。

我有多个类公开为 RESTful 服务并映射到不同的路径。首先，我的配置中只有 cxf，我可以同时将所有类公开为服务。现在我也在使用骆驼，我有这样的标签：

```
 <camelcxf:rsServer id="rsServer1" address="/"
            serviceClass="com.something.PoiSearchImpl">
        </camelcxf:rsServer>
 <camelcxf:rsServer id="rsServer2" address="/"
            serviceClass="com.something.FooBarImpl">
        </camelcxf:rsServer> 
```

在此之后，我有两条路线从我的 cxf 端点（如上所述）开始并进行一些处理。问题是只有一项服务正在工作，而其他服务没有被调用。它给了我 404 not found 错误。这是正常的还是我的配置中缺少某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T12:11:07.820

```
嗨西科尔斯基，
Camel 支持多个 cxf:rsServer。您的方法的问题是两者都映射到地址“/”。这意味着调用其中一个服务器。

```

解决方案：您需要为每个 rsServer 提供唯一的地址，如下所示，

```
<camelcxf:rsServer id="rsServer1" address="/Bar" serviceClass="com.something.PoiSearchImpl">
</camelcxf:rsServer>
<camelcxf:rsServer id="rsServer2" address="/Foo" serviceClass="com.something.FooBarImpl">
</camelcxf:rsServer> 
```

# android - 从 Android 应用程序到 Youtube 的实时流式传输

> ID：10450624
> 
> 赞同：9
> 
> 时间：2012-05-04T14:16:05.013
> 
> 标签：android, youtube, streaming, video-streaming, youtube-api

**是否可以在直播模式下将视频从 Android 应用程序流式传输到 Youtube（到 Youtube 上的直播频道）？**

我想这样做，但通过从 Android 设备流式传输以前保存的文件（而不是从设备的相机流式传输视频）。

我正在寻找最简单的解决方案（不需要任何中间服务器等），特别是为了从 Android 流式传输（但问题更多关于 Youtube API）。

如果可能，我应该从哪里开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T12:08:53.993

**不** ，除非你是他们神奇的快乐名单上的官方 YouTube 合作伙伴。他们知道他们是谁，听起来你不是他们中的一员。对不起。

从[他们博客](http://youtube-global.blogspot.com/2011/04/youtube-is-going-live.html)上的公告：

> 今天，我们还将开始逐步推出我们的直播测试平台，该平台将允许**某些**拥有良好信誉帐户的 YouTube 合作伙伴在 YouTube 上流式传输直播内容。

请记住，[Youtube Live](http://www.youtube.com/live)只有一岁。在短期到中期的未来，情况很可能会发生变化。

同时，查看可能满足您需求的服务，例如[justin.tv](http://justin.tv)或[ustream.com](http://ustream.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-10T16:31:06.670

[可以做到](https://play.google.com/store/apps/details?id=ro.numedecod.cast):) 要回答这个问题：您需要深入研究 MediaCodec、H264 视频编码器、Adobe 的 RTMP 规范、FLV 媒体容器格式和其他一些东西。

免责声明：我是该应用程序的作者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-06T14:45:34.850

是的……如果你愿意付出很多钱的话。

**Play Store 上有一个名为“Screen Stream Mirroring”的应用程序**。有一个有限的免费版本（我已经尝试过，似乎只能播放大约 10 分钟），还有一个付费版本，但对于你得到的东西来说，这是很多钱：3.99 英镑（截至 06 年约为 6.05 美元/ 09/2015 根据 xe.com）。

随意尝试一下：[单击此处获取免费版本](https://play.google.com/store/apps/details?id=com.mobzapp.screenstream.trial)或[单击此处获取付费版本。](https://play.google.com/store/apps/details?id=com.mobzapp.screenstream)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-13T12:39:16.920

您可以将视频直播到视频群聊，最后它们可能会上传到您的 YouTube 中。

更多信息： [http ://www.google.com/+/learnmore/hangouts/onair.html](http://www.google.com/+/learnmore/hangouts/onair.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-22T01:40:46.350

您必须在您的 Youtube 帐户上启用直播。但问题是你需要通过环聊给某人打电话，而对方需要接听你的电话。然后，您的信息流会直播到环聊和您关联的 Youtube 频道。如果没有至少一个人接听那个“电话”，就不可能进行直播。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-09T11:55:53.560

根据这个 youtube 页面，有可能：http: [//youtube-eng.blogspot.com.tr/2014/10/watchme-live-stream.html](http://youtube-eng.blogspot.com.tr/2014/10/watchme-live-stream.html)

# c++ - 具有非不同键的直接地址表

> ID：10450625
> 
> 赞同：2
> 
> 时间：2012-05-04T14:16:21.607
> 
> 标签：c++, c, c++11, hashtable, associative-array

我正在处理一个练习问题，涉及设计一个直接地址表，可能具有非不同的键。约束是 INSERT、DELETE 和 SEARCH 应该在 O(1) 时间内运行；arguments 是指向设置对象的指针。

一种明显的解决方案是使用链接，表条目指向链表的头部（可能为 NULL）。有了这样的链接，INSERT 和 DELETE 肯定会在 O(1) 时间内运行，但是，SEARCH 不会......任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:18:37.037

根据您是否要存储 {unique, non-unique} 和 {keys, key-values} 来研究 STL 关联容器[std::unordered_set](http://en.cppreference.com/w/cpp/container/unordered_set)、[std:unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)、[std::unordered_multiset](http://en.cppreference.com/w/cpp/container/unordered_multiset)、[std::unorderd_multimap的设计。](http://en.cppreference.com/w/cpp/container/unordered_multimap)如果您没有 C++11 编译器（例如 MSVC++ >= 2010 或 gcc >= 4.4），您可以使用[Boost.Unordered](http://www.boost.org/doc/libs/1_37_0/doc/html/unordered.html)。

**更新：** 如果您专门寻找 C 库：请查看[http://attractivechaos.wordpress.com/2008/09/02/implementing-generic-hash-library-in-c/](http://attractivechaos.wordpress.com/2008/09/02/implementing-generic-hash-library-in-c/)

# django - 如何使用模板显示具有一对多关系的模型（种类）？

> ID：10450628
> 
> 赞同：0
> 
> 时间：2012-05-04T14:16:25.080
> 
> 标签：django, google-app-engine, google-cloud-datastore

我有两个模型，像这样：

```
class A(db.Model):
    propertyA = db.XxxProperty(required=True)

class B(db.Model):
    reference = db.ReferenceProperty(A,collection_name='Bs',required=Ture)
    propertyB = db.XxxProperty(required=True) 
```

现在，我想使用模板显示所有 As 的信息。在python文件中，我这样做：

```
As = A.all().filter('propertyA =', XXX).fetch(10) 
```

我将 As 传递给模板，如下所示：

```
{% for a in As%}
    {{a.propertyA}}
    *****SHOW EVERY B THAT a HAS*****
{% endfor%} 
```

这是问题所在，每个 A 可能有很多 B，我需要这样的东西：

```
a_has_these_Bs = a.BS
for b in a_has_these_Bs:
    b.propertyB 
```

但是如何将上面的查询内容放入模板中？还有其他方法可以实现我的意图吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:24:27.787

这`collection_name`就是为了。`A`有一个属性`Bs`，它是一个返回那些`B`引用的对象的查询`A`。

所以你想要类似的东西`{% for b in a.Bs %}`，虽然我没有任何方便的东西来测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:52:12.013

你可以使用@property 函数

```
class A(db.Model):
    propertyA = db.XxxProperty(required=True)

    @property
    def has_these_bs(self):
        objs = B.all().filter('reference =', self)
        return [b for b in objs]

class B(db.Model):
    reference = db.ReferenceProperty(A,collection_name='Bs',required=Ture)
    propertyB = db.XxxProperty(required=True) 
```

然后在模板中：

```
for b in a.has_these_Bs:
    b.propertyB 
```

当然，它不是最好的解决方案`B.all().filter('reference =', self)`，然后循环该查询。`B.all().filter('reference =', self).fetch(500)`如果您知道实体 A 有多少个 B 或它可以拥有的最大数量，那么获取结果会好得多。

# tcl - 如何在文件中全局匹配正则表达式

> ID：10450630
> 
> 赞同：0
> 
> 时间：2012-05-04T14:16:27.860
> 
> 标签：tcl

我有一个文件说 text.txt 有类似的模式块

```
<tr> I am nitesh goyal <\tr> nothing nothing <tr> I logged in stackoverflow<\tr> nothing nothing <tr> I want help to solve this <\tr> anyhting anything. 
```

我想获取所有块数据<\tr>。

目前我正在使用正则表达式

```
I stored the file in a variable buffer
regexp "tr.*?\\tr" $buffer 
```

但它只给出拳头块。如何获取具有相同分隔符的所有块。

是否可以一次有一个块并执行一些操作，然后再进行第二个等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:27:24.953

使用`-all -inline`选项。在这种情况下`regexp`，命令将返回它找到的所有块的列表。

```
set list_of_found_blocks [regexp -all -inline -- "tr.*?\\t" $buffer] 
```

# java - JTabbedPane 中的图标未显示

> ID：10450631
> 
> 赞同：0
> 
> 时间：2012-05-04T14:16:31.153
> 
> 标签：java, image, swing, embedded-resource, imageicon

我的标签有问题：

```
JTabbedPane tab = new JTabbedPane();
    frame.add(tab, BorderLayout.CENTER);

    JPanel contact = new JPanel();
    contact.add(backgroundContact);
    tab.add("Contacto", contact);
    //tab.addTab("Contacto",new ImageIcon("images/image2.gif"), contact,"");

    JPanel schedule = new JPanel();
    schedule.add(backgroundSchedule);
    tab.add("Horario", schedule);
    //tab.addTab("Horario", new ImageIcon("images/image2.gif"), schedule,"");

    JPanel cost = new JPanel();
    cost.add(backgroundCost);
    tab.add("Tarifas", cost);
    //tab.addTab("Tarifas", new ImageIcon("images/image3.gif"), cost,"");

      // Los iconos
    tab.setIconAt(0, new ImageIcon("images/image1.gif"));
    tab.setIconAt(1, new ImageIcon("images/image2.gif"));
    tab.setIconAt(2, new ImageIcon("images/image3.gif")); 
```

我已经尝试了这两个选项，但没有显示图标。为什么会这样？

我也试过：`new ImageIcon("images/im.gif")`不存在，我有任何错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:27:04.970

试试这个：

```
URL urlToImage3 = this.getClass().getResource("/" + "images/image3.gif");
... new ImageIcon(urlToImage3); 
```

您可能会连接`"/" + "images/image3.gif"`- 我只是想突出显示前导`/`，因为从类路径的根目录搜索更加健壮。

如果这些图像是我怀疑的“嵌入式资源”，它们在运行时将不可用`File`，但应该在应用程序的其中一个 Jars 中的类路径上，因此可用`URL`.

# asp.net - 在 ASPX 页面的响应中获取一些 HTML 代码

> ID：10450637
> 
> 赞同：0
> 
> 时间：2012-05-04T14:16:41.137
> 
> 标签：asp.net, visual-studio-2010, response

我正在制作一个应用程序。在该应用程序中，我有一个空白的 aspx 页面。该应用程序部署在 IIS 上。我正在从其他机器调用该 aspx 页面。在 aspx 页面的加载事件中，我将代码编写为

```
protected void Page_Load(object sender, EventArgs e)
    {           

        Response.BufferOutput = false;
        writer = Response.Output;
        try
        {
            if (!Page.IsPostBack)
            {

                processRequest.ProcessReuest(Request, writer);
                writer.Close();

            }
        }
        catch(Exception ex)
        {
            LoggerWeb.Error(ex.Message,ex);
        }
        finally
        {
            processRequest = null;
        }
    } 
```

其中 processRequest.ProcessReuest 是同一项目中另一个类的方法。在该方法中，我在响应中写入了一些字符串数据。很多时候，我在响应中获得了正确的数据，但有时我在响应中获得了一些 HTML 数据，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
   <form method="post" action="obstreamer.aspx?PortNo=16387&amp;Scode=8&amp;SessionId=04052012073228202&amp;Width=4&amp;historyDirection=backword" id="form1">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="
2012-05-04 19:34:18.994 MVisum Ob[3270:f803] [self.newdata length]=235
2012-05-04 19:34:18.995 MVisum Ob[3270:f803] RECEIVED DATA=/wEPDwULLTE2MTY2ODcyMjlkZIYNklWIHuNxLNApLWs+6QTn2Vt4n8THjCx316p9WOvX" />

   <div>

   </div>
   </form>
</body>
</html> 
```

我不明白为什么这些数据会在响应中出现。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:20:35.487

听起来更简单的体验是将这些其他东西放入 UserControls 中，然后在此页面中包含相关的 UserControl。请参阅[http://msdn.microsoft.com/en-us/library/26db8ysc(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/26db8ysc(v=vs.85).aspx)

# vbscript - 如何制作用于递归下载所有空文件的脚本？

> ID：10450639
> 
> 赞同：1
> 
> 时间：2012-05-04T14:16:49.827
> 
> 标签：vbscript

我需要开发从驱动器 C 下载所有大小等于 0 的文件的 VBScript。我制作了以下脚本：

```
Dim oFSO 
Dim sDirectoryPath
Dim oFolder  
Dim oFileCollection
Dim oFile
Dim oFolderCollection
Dim n
Set oFSO = CreateObject("Scripting.FileSystemObject")
sDirectoryPath = "C:\"
set oFolder = oFSO.GetFolder(sDirectoryPath)
set oFolderCollection = oFolder.SubFolders
set oFileCollection = oFolder.Files
For each oFile in oFileCollection
    IF oFile.Size = 0 Then
        oFile.Delete(true)
    END IF
Next 
```

但是这个脚本只从驱动器 C 的根目录中删除文件！我需要在这段代码中使用 recusive，但我是 VBScript 的新手，不知道该怎么做。拜托，我希望你能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:19:49.910

here a tested and working script

```
set oFso = createobject("scripting.filesystemobject")
sDirectorypath = "c:\testing"
delete_empty_files(sDirectorypath)

sub delete_empty_files(folder)
  set oFolder = oFso.getfolder(folder)
  for each oFile in oFolder.files
    if oFile.size = 0 then
      wscript.echo " deleting " & oFile.path
      oFile.delete(true)
    end if
  next
  for each oSubFolder in oFolder.subfolders
    delete_empty_files(oSubFolder)
  next
end sub 
```

# ruby-on-rails - 如何为 aws ec2 ubuntu 服务器提供 Capistrano rails 3.1 应用程序部署的密码？

> ID：10450642
> 
> 赞同：1
> 
> 时间：2012-05-04T14:16:58.297
> 
> 标签：ruby-on-rails, ubuntu, ssh, amazon-ec2, capistrano

我们正在尝试在运行 ubuntu 12.04 的 aws ec2 实例上部署 rails 3.1 应用程序。使用 cap deploy，但是，我们被密码提示卡住了。aws ecs login 中只有私钥，没有密码。我们如何通过 ssh 登录进行 ec2 部署？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:53:13.073

这就是我为解决这种情况所做的事情：

1.  在本地机器上，使用例如 ssh-keygen 生成密钥。保持标准位置不要使事情过于复杂，即密钥文件应该是 ~/.ssh/id_rsa 和 id_rsa.pub；如果您已经拥有 .ssh 中的密钥，请跳过此步骤
2.  复制 id_rsa.pub 文件的内容
3.  使用 .pem 密钥文件通过 SSH 连接到 EC2 实例
4.  将本地 id_rsa.pub 的内容粘贴到 /home/[YOUR_EC2_USER]/.ssh/authorized_keys

您现在应该可以使用 capistrano 进行部署了。

# php - 您如何解释新的 \DateTime('0000-00-00 00:00:00') 的结果？

> ID：10450644
> 
> 赞同：27
> 
> 时间：2012-05-04T14:17:06.753
> 
> 标签：php, datetime, date

这是一个测试代码：

```
<?php

ini_set('date.timezone', 'Europe/London');    
$dt = new \DateTime('0000-00-00 00:00:00');

var_dump($dt); 
```

这提供了：

```
object(DateTime)[1]
  public 'date' => string '-0001-11-30 00:00:00' (length=20)
  public 'timezone_type' => int 3
  public 'timezone' => string 'Europe/London' (length=13) 
```

而这不是一个有效的日期。我不明白返回的值，尤其是月份……你能解释一下吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-04T14:21:47.957

您在这里看到两种效果。第一个是您使用一种可以写成多种形式的日期的书写方式：

```
0000-01-01 same as  0000-01-01
0000-01-00 same as -0001-12-31
0000-00-01 same as -0001-12-01
0000-00-00 same as -0001-11-30 
```

因此，按日期本身，您已经指定了 11 月 30 日 -1。

现在剩下的时间偏移量大约是 9 分 21 秒。这是因为与当地时间 1911 年 3 月 10 日 23:51:38/39 巴黎/法国的 UTC 相比，时钟发生了变化。

* * *

我对您的代码示例进行了一些修改，并在您拥有它时引入了*Europe/Paris*设置，它正在发挥作用。此代码还告诉您与 UTC ( `Z`) 的秒数偏移量，这是您正在寻找的：

```
$dt = new DateTime('0000-00-00 00:00:00', new DateTimeZone('Europe/Paris'));
printf("%s secs offset from UTC\n", $dt->format('r T (e) Z')); 
```

我稍微更改了日期

```
Fri, 10 Mar 1911 23:51:38 +0009 PMT (Europe/Paris) 561 secs offset from UTC
                                                   ^^^ 
```

一秒钟后：

```
Fri, 10 Mar 1911 23:51:39 +0000 WET (Europe/Paris) 0 secs offset from UTC 
```

> 当当地标准时间即将到达 1911 年 3 月 11 日星期六 00:01:00 时，时钟被调回 0:09:21 小时至 1911 年 3 月 10 日星期五 23:51:39 当地标准时间。

那是561秒。参考：[巴黎的时钟变化 - 1911 年的时间变化日期](http://www.timeanddate.com/worldclock/clockchange.html?n=195&year=1911)和[1900 年至 1924 年之间的时区变化和夏令时开始/结束日期](http://www.timeanddate.com/worldclock/timezone.html?n=195&syear=1900)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T14:56:13.177

看起来错误处理`DateTime`不完整。通常，其他 PHP 函数将 '0000-00-00' 处理为错误（无效日期）。

DateTime 应该遵循相同的准则，但事实并非如此。此代码不会抛出异常，即使它*应该*：

```
try { $dt = new \DateTime('0000-00-00 00:00:00'); } 
catch (Exception $e) { var_dump($e); }
var_dump($dt); 
/* result:
object(DateTime)#1 (3) {
  ["date"]=>
  string(20) "-0001-11-30 00:00:00"
  ["timezone_type"]=>
  int(3)
  ["timezone"]=>
  string(13) "Europe/Berlin"
*/ 
```

其他函数确实将该输入视为错误：

```
var_dump(strtotime('0000-00-00 00:00:00'));  // returns: bool(false) 
```

似乎 PHP 在处理这种情况时总是遇到问题.. 示例：[错误 #30190](https://bugs.php.net/bug.php?id=30190)，[错误 #60288](https://bugs.php.net/bug.php?id=60288)

引用 PHP bug tracker 中的评论：

> 0000-00-00 是不存在的日期（01-01-0001 的前一天是 31/12/-0001）

# arrays - 在 Excel VBA 中过滤二维数组

> ID：10450645
> 
> 赞同：6
> 
> 时间：2012-05-04T14:17:18.313
> 
> 标签：arrays, excel, vba, multidimensional-array, filter

使用 Excel 和 VBA，我想要一些关于如何严格使用 VBA 最好地过滤数组中的数据（以同样的方式使用数据透视表）的建议。我正在创建一个用户窗体，它将根据当前现有数据做出一些数据决策。我可以想象如何做得足够好，但我并不精通 VBA 编程。

这是一个例子

```
A       B       C
bob     12      Small
sam     16      Large
sally   1346    Large
sam     13      Small
sally   65      Medium
bob     1       Medium 
```

要获取数组中的数据，我可以使用

```
Dim my_array As Variant

my_array = Range("A1").CurrentRegion 
```

现在，我熟悉循环遍历二维数组，但我想知道：**过滤二维数组数据的最有效方法是什么**（无需一次又一次地循环遍历数组）？

例如，我如何得到会说得到这种数据：

```
data_for_sally As Variant 'rows with sally as name in ColA
data_for_sally_less_than_ten As Variant ' all rows with sally's name in ColA and colB < 10
data_for_all_mediums as Variant ' all rows where ColC is Medium 
```

建议？我可以用一堆自定义函数和循环来解决这个问题，但我认为必须有更好的方法。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:56:32.903

我假设您只想使用 VBA。

我认为这取决于几个参数，主要是：

*   您多久运行一次相同的条件 => 您是存储过滤器的结果还是每次都重新计算？
*   你需要多久过滤一次东西=>如果经常，值得有一个适当的代码结构，如果没有，那么一次性循环显然是要走的路。

从 OO 的角度来看，假设性能（速度和内存）不是问题，我会选择以下设计（我不会详细介绍实现的细节，只给出大致的想法）。创建一个可以像这样使用的类（让我们想象一下 ArrayFilter）。

**设置过滤器**

```
Dim filter As New ArrayFilter
With filter
    .name = "sam"
    .category = "Medium"
    .maxValue = 10
End With 
```

或者

```
filter.add(1, "sam") 'column 1
filter.add(3, "Medium") 'column 3
filter.addMax(2, 10) 'column 2 
```

**创建过滤后的数据集**

```
filteredArray = getFilteredArray(originalArray, filter) 
```

getFilteredArray 写起来相当简单：您循环检查值是否与过滤器匹配并将有效行放入新数组中：

```
If filter.isValidLine(originalArray, lineNumber) Then 'append to new array 
```

**优点**

*   简洁的设计
*   可重复使用，尤其是在使用列号的第二个版本中。这可以用来过滤任何数组。
*   过滤代码在您可以测试的一个函数中
*   推论：避免代码重复

**缺点**

*   每次都会重新计算过滤，即使您使用相同的过滤器两次。例如，您可以将结果存储在字典中 - 见下文。
*   内存：每次调用 getFilteredArray 都会创建一个新数组，但不确定如何避免这种情况
*   这增加了相当多的代码行，所以只有当它有助于使代码更易于阅读/维护时，我才会这样做。

ps：如果需要缓存结果以提高性能，一种方法是将结果存储在字典中，并在 getFilteredArray 函数中添加一些逻辑。请注意，除非您的数组非常大和/或您经常运行相同的过滤器，否则这可能不值得。

```
filters.add filter, filteredArray 'filters is a dictionary 
```

这样，当您下次调用 getFilteredArray 时，您可以执行以下操作：

```
For each f in filters
    'Check if all conditions in f and newFilter are the same
    'If they are:
    getFilteredArray = filters(f)
    Exit Function
Next

'Not found in cache: compute the result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-27T13:35:11.013

尝试这个

```
' credited to ndu
Function Filter2DArray(ByVal sArray, ByVal ColIndex As Long, ByVal FindStr As String, ByVal HasTitle As Boolean)
  Dim tmpArr, i As Long, j As Long, Arr, Dic, TmpStr, Tmp, Chk As Boolean, TmpVal As Double
  On Error Resume Next
  Set Dic = CreateObject("Scripting.Dictionary")
  tmpArr = sArray
  ColIndex = ColIndex + LBound(tmpArr, 2) - 1
  Chk = (InStr("><=", Left(FindStr, 1)) > 0)
  For i = LBound(tmpArr, 1) - HasTitle To UBound(tmpArr, 1)
    If Chk Then
      TmpVal = CDbl(tmpArr(i, ColIndex))
      If Evaluate(TmpVal & FindStr) Then Dic.Add i, ""
    Else
      If UCase(tmpArr(i, ColIndex)) Like UCase(FindStr) Then Dic.Add i, "" 'This finds only exact matches, if you need *FindStr* use:  If UCase(tmpArr(i, ColIndex)) Like UCase("*" & FindStr & "*") Then Dic.Add i, ""

    End If
  Next
  If Dic.Count > 0 Then
    Tmp = Dic.Keys
    ReDim Arr(LBound(tmpArr, 1) To UBound(Tmp) + LBound(tmpArr, 1) - HasTitle, LBound(tmpArr, 2) To UBound(tmpArr, 2))
    For i = LBound(tmpArr, 1) - HasTitle To UBound(Tmp) + LBound(tmpArr, 1) - HasTitle
      For j = LBound(tmpArr, 2) To UBound(tmpArr, 2)
        Arr(i, j) = tmpArr(Tmp(i - LBound(tmpArr, 1) + HasTitle), j)
      Next
    Next
    If HasTitle Then
      For j = LBound(tmpArr, 2) To UBound(tmpArr, 2)
        Arr(LBound(tmpArr, 1), j) = tmpArr(LBound(tmpArr, 1), j)
      Next
    End If
  End If
  Filter2DArray = Arr
End Function 
```

# php - 404 错误和 .htaccess

> ID：10450648
> 
> 赞同：0
> 
> 时间：2012-05-04T14:17:24.610
> 
> 标签：php, .htaccess

我的脚本面临错误 404。

我想隐藏页面标题。例如

`http://example.com/final/admin/admin.php`

我想躲`admin.php` 起来

`http://example.com/final/admin`

这是我的 .htaccess 总是返回**404 page not found** 错误

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/final/.*$
RewriteRule ^(.*)$ /final/$1 [L] 
```

这是我的 index.php 代码

```
<?php

/**
 * @author Mina Wilson
 * @copyright 2012
 * // EPCI Pharma Survey | Rights Reserved
 */
// Inialize session
session_start();
echo $_SESSION['message']; unset($_SESSION['message']);

ob_start();

session_destroy();

// Check, if user is already login, then jump to secured page

ob_start();
if (isset($_SESSION['name'])) {

header('Location: login_process.php');
}

ob_flush();
?>
-- html here 
```

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:35:09.287

像这样使用重写规则。您可以单独使用 rewriterule

```
RewriteRule final/(.*)$  index.php?page=$1 [NC,L] 
```

但这会将最后一句话之后的任何页面重定向到 index.php

# c++ - 使用 MinGW 编译自动化代理

> ID：10450649
> 
> 赞同：2
> 
> 时间：2012-05-04T14:17:25.587
> 
> 标签：c++, mingw

我正在使用 mingw 开发自动化服务器。

MIDL MyAutomationLib 创建文件 MyAutomationLib.h、MyAutomationLib_i.c、MyAutomationLib_p.c 和 dlldata.c。

MyAutomationLib_i.c编译到我的自动化服务器中，MyAutomation_p.c编译到我的自动化代理中，需要使用regsvr32.exe注册。

当我编译自动化代理时，编译失败是因为 MinGW 提供的头文件 rpcproxy.h 太旧了。

有谁知道如何解决这个问题？

我想一个解决方案可以是使用较旧的 IDL 编译器，但我无法在 mingw.org 上找到有关此的任何信息。

MIDL 编译器版本 7.00.0555

MinGW 版本 - 两周前使用 mingw-get 安装（找不到 MinGW 版本..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:14:34.273

我会自己回答这个问题。而且解决方法很简单，用MSVC编译代理就行了。代理不必用 MinGW 编译。

# android - Android：无法将变量传递给第三个活动

> ID：10450658
> 
> 赞同：0
> 
> 时间：2012-05-04T14:18:11.053
> 
> 标签：android, android-intent, android-activity

我有三个活动：

*   登录
*   选择
*   入口

我必须将 var "Name" 从登录传递到选择（这很好用），然后，从选择到条目，这就是我遇到问题的地方：/ 我可以将名称传递给选择，但是当我尝试传递它时进入，我不能！这很奇怪，因为如果我将变量直接从登录名传递到条目，它可以工作：/ 所以：

*   登录 -> 进入作品！
*   登录 -> 选择有效！
*   选择 -> 条目无效！

这是从登录传递到选择的代码

```
Intent intent;
String pkg=getPackageName();                    
intent=new Intent(getApplicationContext(), scelta.class);
//inseriamo i dati nell'intent
String parts[] = risp.split("/");
intent.putExtra(pkg+".myNome", parts[0]); 
intent.putExtra(pkg+".myId", parts[1]);
startActivity(intent); 
```

这是选择（可能是错误）：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.scelta);        
    // l'intent di questa activity
    Intent intent=getIntent();
    String pkg=getPackageName(); 
    //prendiamo i dati   
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 
    intent.putExtra(pkg+".myNome", nome); 
    intent.putExtra(pkg+".myId", Id);  
    TextView tvNome =  (TextView) findViewById(R.id.txtNome); 
    tvNome.setText(nome);
}    

//pulsante per il checkin
public void checkin (View v) {
     // l'intent di questa activity
    Intent intent=getIntent();
    String pkg=getPackageName(); 
    //prendiamo i dati   
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 
    //li reinseriamo nell'intent
    intent.putExtra(pkg+".myNome", nome); 
    intent.putExtra(pkg+".myId", Id);
    intent=new Intent(getApplicationContext(), entrata.class);
    startActivity(intent);
} 
```

签入是我在点击按钮以从选择传递到条目时使用的方法。这就是我在条目中取名的地方：

```
Intent intent=getIntent(); // l'intent di questa activity
String pkg=getPackageName();   
String nome=intent.getStringExtra(pkg+".myNome");  //prendiamo i dati

TextView tvNome =  (TextView) findViewById(R.id.nome); 
tvNome.setText(nome); 
```

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:31:10.303

您将您的值放入一个 Intent 对象中，然后您创建了不同的 Intent 来开始您的最后一个活动。

```
public void checkin (View v){

    Intent intent=getIntent();
  //first intent you created.

    String pkg=getPackageName(); 
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 
    intent.putExtra(pkg+".myNome", nome); 
    intent.putExtra(pkg+".myId", Id);
 //you are adding extra in first intent
    intent=new Intent(getApplicationContext(), entrata.class);
    // here you again recreated an Intent object second intent
    startActivity(intent);
 // you are start activity using second intent which do not contain any extra
} 
```

通过以下方式更改：

```
 public void checkin (View v){

    Intent intent=getIntent();
    String pkg=getPackageName(); 
    String nome=intent.getStringExtra(pkg+".myNome"); 
    String Id=intent.getStringExtra(pkg+".myId"); 

    Intent intent1 = new Intent(getApplicationContext(), entrata.class);
    intent1.putExtra(pkg+".myNome", nome); 
    intent1.putExtra(pkg+".myId", Id);
    startActivity(intent); 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:28:57.983

您也可以为此使用 SharedPreferences。在 Activity 中定义一个 SharedPreferences 对象。把你想要的数据放在 LoginActivity 中。从您喜欢的每个 Activity 中的 SharedPreferences 对象中获取数据：

在登录活动中：

```
SharedPreferences preferences = getSharedPreferences("preferences", MODE_WORLD_WRITEABLE);
preferences.edit().putString("MY_NOME",this.nome).commit(); 
preferences.edit().putString("MY_ID",this.id).commit(); 
```

在其他活动中：

```
SharedPreferences preferences = getSharedPreferences("preferences", MODE_WORLD_WRITEABLE);
String myNome = preferences.getString("MY_NOME", null);
String myId = preferences.getString("MY_ID", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:45:07.570

可能与两次要求附加功能有关（onCreate 和 checkin 方法）。您可以尝试仅在 onCreate 方法中检索额外内容并将值存储在实例变量中（与实例中的所有方法共享）。就像是：

```
 public class choice extends Activity {
     private String nome;
     private String id;     //first letter lowercase in variables: Java conventions
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.scelta);        
     // l'intent di questa activity
    Intent intent = getIntent();
    String pkg = getPackageName(); 
    //prendiamo i dati   
    this.nome=intent.getStringExtra(pkg+".myNome"); //this is now an instance variable
    this.id=intent.getStringExtra(pkg+".myId");     //this is now an instance variable
    intent.putExtra(pkg+".myNome", this.nome); 
    intent.putExtra(pkg+".myId", this.id);  
    TextView tvNome =  (TextView) findViewById(R.id.txtNome); 
    tvNome.setText(this.nome);
}
//pulsante per il checkin
public void checkin (View v){
     // l'intent di questa activity
    //Intent intent=getIntent();  //NO NEED FOR THIS ANYMORE
    //String pkg=getPackageName();//NO NEED FOR THIS ANYMORE 
    //prendiamo i dati   
    //String nome=intent.getStringExtra(pkg+".myNome"); //NO NEED FOR THIS ANYMORE
    //String Id=intent.getStringExtra(pkg+".myId"); //NO NEED FOR THIS ANYMORE
    //li reinseriamo nell'intent

    intent=new Intent(getApplicationContext(), entrata.class);
    intent.putExtra(pkg+".myNome", this.nome);
    intent.putExtra(pkg+".myId", this.id);

    startActivity(intent);
}
} 
```

我认为这是更优化的。如果自 onCreate 以来没有更改，`nome`则`id`无需再次 putExtra。如果是这样，也许 onCreate 是使用错误的地方`putExtra`

# c# - 根据 MVC3 的 Highchart 条形图中的值更改条形的颜色

> ID：10450663
> 
> 赞同：9
> 
> 时间：2012-05-04T14:18:28.087
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, charts, highcharts

我正在将 Dotnet Highchart 与 MVC3 一起使用

我目前正在使用如下图：

![图表](../Images/675faf219e9547c2ecd7c1c2bd106818.png)

我正在尝试修改我的代码，以便我可以根据它们的数量来更改条形上的颜色。我还想知道如何删除您在图像上看到的按钮“Snittbetyg”。

这是我的代码：

```
 public ActionResult OfficeStatistic()
        {
            {

                Highcharts chart1 = new Highcharts("chart1")
                    .SetXAxis(new XAxis { Categories = new[] { "Ödmjukhet", "Engagemang", "Kompetens", "Lönsamhet" } })
                    .SetYAxis(new YAxis { Title = new YAxisTitle { Text = "Betygskalan" } })
                    .SetSeries(new Series { Data = new Data(new object[] { 1, 8, 9, 6 }), Name = "Snittbetyg" })
                    .SetTitle(new Title { Text = "Örebro Statistik" })
                    .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column });

                return View(chart1);

            }

        } 
```

任何形式的帮助表示赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:55:12.060

我没有使用过 Highchart，但你可以从他们的[codeplex page](http://dotnethighcharts.codeplex.com/releases/view/85324)下载示例。看起来您的两个要求都可以轻松实现。

**删除“Snittbetyg”按钮**

禁用图例：

```
.SetLegend(new Legend { Enabled = false }); 
```

**添加颜色**

对于系列数据，使用点数而不仅仅是数字：

```
Data data = new Data(new[]
{
    new Point { Y = 1, Color = System.Drawing.Color.Red },
    new Point { Y = 8, Color = System.Drawing.Color.Blue },
    new Point { Y = 9, Color = System.Drawing.Color.Green },
    new Point { Y = 6, Color = System.Drawing.Color.Black }
});

Highcharts chart1 = new Highcharts("chart1")
    .SetXAxis(new XAxis { Categories = new[] { "Ödmjukhet", "Engagemang", "Kompetens", "Lönsamhet" } })
    .SetYAxis(new YAxis { Title = new YAxisTitle { Text = "Betygskalan" } })
    .SetSeries(new Series { Data = data, Name = "Snittbetyg" })
    .SetTitle(new Title { Text = "Örebro Statistik" })
    .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column })
    .SetLegend(new Legend { Enabled = false }); 
```

* * *

似乎没有内置方法可以使 highchart 根据 y 值自动为条形着色。我相信您必须自己选择颜色，例如：

```
 private System.Drawing.Color GetBarColour(int value)
    {
        if (value < 5) return System.Drawing.Color.Red;
        if (value > 7) return System.Drawing.Color.Green;
        return System.Drawing.Color.Orange;
    }

    public ActionResult OfficeStatistic()
    {
        {
            var dataItems = new[] {1, 8, 9, 6};
            Data data = new Data(
                dataItems.Select(y => new Point {Color = GetBarColour(y), Y = y}).ToArray()
            );

            Highcharts chart1 = new Highcharts("chart1")
                .SetXAxis(new XAxis { Categories = new[] { "Ödmjukhet", "Engagemang", "Kompetens", "Lönsamhet" } })
                .SetYAxis(new YAxis { Title = new YAxisTitle { Text = "Betygskalan" } })
                .SetSeries(new Series { Data = data, Name = "Snittbetyg" })
                .SetTitle(new Title { Text = "Örebro Statistik" })
                .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column })
                .SetLegend(new Legend { Enabled = false }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-25T05:20:37.993

1.  首先，定义一个元组列表第一项是颜色，第二项是点值

    ```
    List<Tuple<string, Object>> dataItems = new List<Tuple<string, Object>>(); 
    ```

2.  我正在用 swtich 传递价值，这不是必需的

    SqlDataReader 阅读器 = myComm.ExecuteReader();

    ```
     if (reader.HasRows)
        {               
            string colorName ="";
            while (reader.Read())                   
            {
                switch ((string)reader.GetValue(1))
                {
                    case "Total Employee(s)":
                        colorName = "Blue";
                        break;
                    case "Present":                       
                        colorName = "Green";
                        break;
                    case "Late":
                    case"Absent":
                    case "During Less":
                    case "Early Going":
                        colorName = "Red";
                        break;
                    case "Leave":
                        colorName = "Orange";
                        break;
                    default:
                        colorName = "Gray";
                        break;
                }

                dataItems.Add(new Tuple<string, Object>(colorName, reader.GetValue(2)));
    } 
    ```

3.  现在，最后将数据添加到系列对象中

    ```
    new Series{
     Name = "Employees",
     Data  = new Data(
        dataItems.Select(y => new Point { 
         Color = System.Drawing.Color.FromName(y.Item1), 
         Y = (int)y.Item2 }).ToArray()
        )               
     } 
    ```

# email - 用邮件编码数据 NSString

> ID：10450664
> 
> 赞同：1
> 
> 时间：2012-05-04T14:18:30.480
> 
> 标签：email, encoding, character-encoding, nsdata, mailcore

我正在尝试使用 Mailcore 发送一些数据（NSDictionaray）。但是正文为空或“”我的代码是：*

```
// Dic is  NSDictionary
NSMutableData *data = [[NSMutableData alloc]init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc]initForWritingWithMutableData:data];
[archiver encodeObject:dic forKey:@"k"];
[archiver finishEncoding];
[archiver release];
NSString *value = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
CTCoreMessage *msg = [[CTCoreMessage alloc]initWithString:value]; 
```

这里的值为：bplist00Ô¿¿¿¿¿¿¿¿¿bcT$topX$objectsX$versionY$archiver¿¿¿Ñ¿¿¿Qk�¯

&'(/>?@AELRWX]U$nullÓ ¿¿¿¿¿¿¿ZNS.objectsWNS.keysV$class¡¡��WrequestÙ !"#$%YrequestIDYoperationQaQrXpeerNameQfVpeerIDQv��¿¿¿¿¿¿¿< /p>

但是 msg.body 是：“”

如果我尝试：

```
NSString *value = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

值将为空，因此消息正文也是如此。我应该尝试不同的编码吗？

# c# - Visual Studio 2010 C# 在远程机器上运行/调试

> ID：10450667
> 
> 赞同：1
> 
> 时间：2012-05-04T14:18:40.187
> 
> 标签：c#, visual-studio-2010, debugging

请原谅我的无知，我主要是一名Java开发人员，对Visual Studio和一些调试过程的细节有些陌生。

我正在使用 C# 创建一个正在我的工作站上开发的应用程序（WPF 和控制台），但我需要在另一台远程机器上运行/调试该应用程序。有没有一种方法可以让我从 Visual Studio 2010 中点击“调试”并让它模拟目标机器的运行？由于远程机器上的本地文件目录访问权限，我需要这样做。

我已经研究过远程调试，但我认为我走错了路，因为远程调试似乎只是使用另一台机器来运行调试器，而不是进程本身。

非常感谢任何信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:26:15.317

您将简单地附加到正在运行的应用程序的进程，有关详细说明，您应该查看文章

[使用 Visual Studio 2010 进行远程调试](http://www.codeproject.com/Articles/146838/Remote-debugging-with-Visual-Studio-2010)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:22:46.490

你不能，但你可以远程调试并附加到远程机器上运行的应用程序，你需要在远程机器上安装远程调试工具

在远程机器上运行 (F5)，直接从 VS 在 Dev11 中是可能的，但是

# php - 使用 Active Record 和 GroceryCrud 在 CodeIgniter 中加入表

> ID：10450671
> 
> 赞同：1
> 
> 时间：2012-05-04T14:18:54.970
> 
> 标签：php, mysql, codeigniter, activerecord

参考：[http ://www.grocerycrud.com/documentation/options_functions/set_model](http://www.grocerycrud.com/documentation/options_functions/set_model)

我有 2 个这样的表：

> [tblFitnessClasses] id uid 标题 描述 位置
> 
> [tblFitnessClassDateTimes] owner_uid startDate endDate startTime endTime 天数重复

本质上，我希望表格最终是这样的：

```
(uid - hidden)  | Title     | Description   | Location  | Start Date    | End Date     | Start Time | End Time | Days      | Reccurence
                Swim Lesson  Level 1         Gym         05/04/2012     NULL            12:30       1:30        Mon,Wed,Fri   2 
```

在我的主控制器的一部分中，我有这个：

```
 function fitnessSchedule()
{
    $this->config->set_item('url_suffix', '');
    $crud = new grocery_CRUD();
    $crud->set_table('tblFitnessClasses');
    $this->load->model('schedule_model');
    $this->schedule_model->join_table('tblFitnessClasses','tblFitnessClassDateTimes');
    $crud->columns('title','description','location','startEventDate','endEventDate','startTime', 'endTime', 'days', 'recurrence', 'finalDate);
    $crud->display_as('title','Event')
         ->display_as('description','Description')
         ->display_as('location','Location')
         ->display_as('startEventDate','Start Date')
         ->display_as('endEventDate','End Date')
         ->display_as('startTime','Start Time')
         ->display_as('endTime','End Time');
    $crud->required_fields('title','location');
    $crud->set_subject('Event');             

    $output = $crud->render();
    $this->_example_output($output);     
} 
```

在我的模型中，我有这个：

```
 <?php
class schedule_model extends CI_Model
{
        public function join_table($table1,$table2)
        {
          $this->output->enable_profiler(TRUE);//Turns on CI debugging

          $this->db->select("*");
          $this->db->from($table1);
          $this->db->join($table2, $table1.".uid". "=".$table2.".owner_uid"); // Join classes and class date times by UID

          $results = $this->db->get()->result();
            return $results;
        }
}
?> 
```

**当我运行此代码时，我得到一个包含所有必填字段的表，但 table2 (tblFitnessClassDateTimes) 中的字段缺少所有信息。这些字段不填充其数据。除此之外，如果我选择编辑表格，它只会编辑able1(tblFitnessClassses)**

![在此处输入图像描述](../Images/a9e056d1b6f9e9df8ddaff3cc1bb73bd.png) ![在此处输入图像描述](../Images/1846f0ca4bd5de248a3ab3e6963ae250.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:02:55.537

您以错误的方式加载模型。事实上，你甚至没有加载一个！您只是在创建一个新实例，`grocery_CRUD`而不是您编写的模型。

```
$this->load->model('schedule_model');
$this->schedule_model->join_table('tblFitnessClasses','tblFitnessClassDateTimes'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:16:27.527

总是建议使用：

```
$this->load->library('grocery_CRUD'); 
```

因此代码应该是：

```
$this->load->library('grocery_CRUD');

$crud = new grocery_CRUD(); 
```

# mysql - Mysql - 我应该使用 ID 列吗？

> ID：10450678
> 
> 赞同：1
> 
> 时间：2012-05-04T14:19:13.127
> 
> 标签：mysql, indexing

我对最佳实践以及数据库引擎的工作方式有疑问。

假设我创建了一个名为 Employee 的表，其中包含以下列：

*   SS ID（主键）
*   姓名
*   性别
*   年龄

问题是.. 我看到很多数据库，它的所有表都有一个名为 ID 的附加列，它是一个序列号。我应该在我的表中输入 ID 字段吗？我的意思是，它已经有一个要索引的主键。数据库使用顺序 ID 字段会更快吗？如果我不使用它来链接或研究任何表格，我看不出它有什么帮助。

它有帮助吗？如果是这样，为什么，数据库中发生了什么？

谢谢！

编辑 ----- 这只是一个愚蠢的例子。忘记 SS_ID，我知道选择主键有更好的方法。主要问题是因为我认识的一些人只是要求我添加名为 ID 的列，即使我知道我们不会将它用于任何 SQL 查询。他们只是认为它在某种程度上有助于数据库的性能，特别是因为 Microsoft Access 等一些数据库工具总是询问我们是否希望它添加这个新列。

这是错误的，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:23:17.037

如果 SS 的意思是“社会保障”，我强烈建议不要将其用作 PK。自动递增的身份是要走的路。

使用内置业务逻辑的键是一个坏主意。很多人对提供 SS 信息很敏感。如果他们使用 SS 作为主键，您的应用程序可能会消除部分受众。像 HIPPA 这样的法律可能会让您无法使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T14:22:20.667

具有顺序的实际性能增益`id`将在很大程度上取决于您如何使用该表。

*   如果您使用一些 ORM 框架，这些通常使用整数类型的顺序 ID [1] 效果更好，这通常通过顺序 id 列来实现。
*   如果您不使用 ORM 框架，那么拥有一个`id`您从不使用的键和一个实际上是您一直使用的代理`ss_id`键是没有意义的。
*   如果您`employees`从其他数据库表（外键）引用，那么拥有一列可能会更有效`id`，因为存储该整数将比存储该整数在子表中消耗更少的空间`ss_id`（我假设是a`CHAR`或`VARCHAR`) 无处不在。

在 上`ss_id`，假设它是一个社会安全号码（看起来应该是这样），可能存在您应该关心的法律和隐私问题 - 我的回答假设您确实有正当理由在您的数据库中拥有社会安全号码，并且您将在法律上被允许使用和存储它们。

[1] 这通常可以通过 ORM 框架依赖于具有高度专业化的缓存机制来解释，这些机制是为典型的 ORM 使用量身定制的 - 这通常意味着具有顺序`id`主键，并让应用程序处理实际的业务身份。这实际上与与这些“外键”考虑非常相似的考虑有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T14:30:08.200

美国社会安全号码*不足以*识别。银行当然*不会*以这种方式使用它们。不是每个人都有一个。错误导致重复。外国人没有。它们太脆弱了，无法用作数据库 PK。

最重要**的是：死后被重新使用**

做一些研究：[SSN 作为主键](https://www.google.co.uk/search?q=ssn%20as%20primary%20key)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T14:26:46.803

更重要的（显然）是您有一个主键，只要您用于该主键的数据是唯一可识别的。在您的示例中，SSN 是唯一可识别的，这就是银行使用它们并且会起作用的原因。此示例的问题在于，您的 Employee ID 很可能被用作其他表中的外键，这意味着您正在获取个人信息（受法律保护）并将其散布到您的数据模型中。在这种情况下，使用 Auto Incremented 字段可能会做得更好。

# iphone - ISGL3D 透明度问题

> ID：10450680
> 
> 赞同：2
> 
> 时间：2012-05-04T14:19:15.943
> 
> 标签：iphone, opengl-es, transparency, alpha-transparency

我正在使用 isgl3d 框架运行一个 iOS 项目来显示 pod 文件。

我有一辆带有 0.5 alpha 窗口的时尚汽车，我希望在相机背景上渲染它，以寻求一些增强现实的好处。

窗口上的 alpha 看起来不错，但是当我添加对象时，我注意到它透明地渲染了整个对象，也就是窗口所在的位置。包括汽车内饰。

像这样（例如，键盘可以通过仪表板，座椅等看到。应该是实心的）

![坏车就是坏](../Images/ca6dfa0421cba9dcc185902a0e930b11.png)

汽车内部是一个 alpha 1.0 的单独对象。

我宁愿不在我的项目中展示“幽灵车”，但我还没有找到解决方法。

有没有人遇到过同样的问题，并最终找到了解决方案？

**已解决：** 感谢黛米的回答。这是最终代码：

```
// Render opaque objects
        [_scene render:renderer opaque:true];

        // First planar shadow pass (if needed)
        [self renderPlanarShadows:renderer];

        // Render transparent objects
        glColorMask(1, 1, 1, 0);
        if (_zSortingEnabled) {
            [_scene renderZSortedAlphaObjects:renderer viewMatrix:&viewMatrix];

        } else {
            [_scene render:renderer opaque:true];
        }
        glColorMask(1, 1, 1, 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:47:58.693

问题：您的玻璃会重写 Alpha 通道。绘制汽车玻璃时使其不被修改。*当您使用 绘制透明*项目时，禁用对颜色缓冲区的 Alpha 通道的写入`glColorMask(1, 1, 1, 0)`。透明绘制后不要忘记恢复：`glColorMask(1, 1, 1, 1)`！！！

# sql - SQL AS/400 - 提取每个商店的产品价格

> ID：10450682
> 
> 赞同：0
> 
> 时间：2012-05-04T14:19:26.497
> 
> 标签：sql, select, ibm-midrange

我们有一个电话拨号器，可以给我们的商店打电话，**告知**他们所在地区的汽油价格。

我们有 3 个表（WBDAPP00、WBDCIE00、WBDCIA00）

`WBDAPP00`是我们存储呼叫信息的地方。
`DANOID`= ID
`DA#INT`, `DA#IND`, `DA#TEL`= 电话号码
`DA#ENV`= 群呼号码，我们向少数商店发送 1 条消息。
`DASTAT`= 调用状态（Confirm by store,canceled,running,confirmed by us, in pause）
`DADTHR`=最后状态修改的时间戳

`WBDCIE00`是我们存储该组store信息的地方 `CIE#EN`=ID
`CIEDHC`=调用有效的时间戳，我们可以早上打电话告诉价格将在14h30改变
`CIE$OR`=普通
`CIE$PL`的价格=加
`CIE$SP`的价格=超级的价格
`CIE$DI`=柴油的价格

`WBDCIA00`是关于的补充信息`WBDAPP00`
`CIA#ST`=商店
`CIA#AP`的ID=呼叫
`CIE#EN`的ID=群呼的ID
`CIABAN`=这是商店的公司编号

这是这 3 个表的示例输出

```
SELECT * FROM PRDCM/WBDAPP00 WHERE DA#ENV = 17258 OR DA#ENV = 17257 
```

```
+--------+--------+--------+---------+--------+--- -----+----------------+-----------+--- -----+
| 达诺德 | DA#INT | DA#IND | 数据#电话 | DA#ENV | 数据统计 | 爸爸 | 减震器 | 达穆斯 |
+--------+--------+--------+---------+--------+--- -----+----------------+-----------+--- -----+
| 100420 | 1 | 418 | 9600055 | 17257 | 4 | 2012-05-07-09.15.04.768228 |1;2;1;1;1;1| 伊萨拉普 |
| 100421 | 1 | 819 | 7346491 | 17258 | 0 | 2012-05-07-09.23.32.362971 |0;4;0;1;0;0| 伊萨拉普 |
| 100422 | 1 | 819 | 7624747 | 17258 | 1 | 2012-05-07-09.24.28.042330 |0;3;1;1;0;1| 伊萨拉普 |
| 100423 | 1 | 819 | 6377874 | 17258 | 0 | 2012-05-07-09.23.32.803073 |0;3;0;1;0;1| 伊萨拉普 |
| 100424 | 1 | 819 | 8742844 | 17258 | 1 | 2012-05-07-09.24.25.347116 |1;1;1;1;0;1| 伊萨拉普 |
| 100425 | 1 | 819 | 8255744 | 17258 | 0 | 2012-05-07-09.23.33.207688 |1;3;1;1;0;1| 伊萨拉普 |
+--------+--------+--------+---------+--------+--- -----+----------------+-----------+--- -----+

```

```
SELECT * FROM PRDCM/WBDCIE00 WHERE CIE#EN = 17258 OR CIE#EN = 17257 
```

```
+--------+----------------+--------+-- ------+--------+--------+
| CIE#EN | CIEDHC | CIE$ 或 | CIE$PL | CIE$SP | CIE$DI |
+--------+----------------+--------+-- ------+--------+--------+
| 17257 | 2012-05-04-17.00.00.000000 | 0 | 0 | 0 | 1,359 |
| 17258 | 2012-05-07-09.30.00.000000 | 1,354 | 0 | 0 | 0 |
+--------+----------------+--------+-- ------+--------+--------+

```

```
SELECT * FROM PRDCM/WBDCIA00 WHERE CIA#EN = 17258 OR CIA#EN = 17257 
```

```
+--------+--------+--------+--------+
| 中央情报局#ST | 中央情报局#AP | 中央情报局#EN | 夏班 |
+--------+--------+--------+--------+
| 96 | 100420 | 17257 | 2 |
| 316 | 100421 | 17258 | 4 |
| 320 | 100422 | 17258 | 3 |
| 321 | 100423 | 17258 | 3 |
| 338 | 100424 | 17258 | 1 |
| 366 | 100425 | 17258 | 3 |
+--------+--------+--------+--------+

```

这是表之间的关系
`CIA#AP`= `DANOID`
`CIA#EN`= `CIE#EN`=`DA#ENV`

我想为每个提取最后一个`CIE$OR`（不是 0）和最后一个`CIE$DI`（不是 0）`CIA#ST`。
最后一个由`CIEDHC`（Desc order）确定。 `DASTAT`必须是 1 或 4。

这是我想从上面的数据中提取的一个例子：

```
+--------+--------+--------+
| 中央情报局#ST | CIE$ 或 | CIE$DI |
+--------+--------+--------+
| 96 | 0 | 1,359 |
| 316 | 1,354 | 0 |
| 320 | 1,354 | 0 |
| 321 | 1,354 | 0 |
| 338 | 1,354 | 0 |
| 366 | 1,354 | 0 |
+--------+--------+--------+

```

或者像这个，这并不理想，但在这种情况下我会容忍它

```
+--------+-------------+--------+
| 中央情报局#ST | 产品类型 | 价格 |
+--------+-------------+--------+
| 96 | 3 | 1,359 |
| 316 | 6 | 1,354 |
| 320 | 6 | 1,354 |
| 321 | 6 | 1,354 |
| 338 | 6 | 1,354 |
| 366 | 6 | 1,354 |
+--------+-------------+--------+

```

对于那些不了解 AS400 的人，`FETCH FIRST 1 ROWS ONLY`等于`TOP 1`AND`LIMIT 1`

`LAST`在 AS400 中不存在，所以我需要替换 `SELECT LAST(Column1) AS test FROM table1` 为 `SELECT Column1,Column2 FROM table1 ORDER BY Column2 DESC LIMIT 1`

我尝试过使用 subselect 但你不能使用`ORDER BY`and `FETCH FIRST 1 ROWS ONLY`。
我们在没有任何 PTF 的 V5R1 中。

这是一个提取的例子

```
SELECT CIA#ST,CIE$OR,CIE$DI,CIEDHC 
FROM PRDCM/WBDAPP03 
INNER JOIN PRDCM/WBDCIE01 ON CIE#EN = DA#ENV 
INNER JOIN PRDCM/WBDCIA01 ON CIA#AP = DANOID 
WHERE DASTAT IN (1,4)
ORDER BY CIEDHC,DA#ENV
FETCH FIRST 5 ROWS ONLY 
```

```
+--------+--------+--------+---------- ------+
| 中央情报局#ST | CIE$ 或 | CIE$DI | CIEDHC |
+--------+--------+--------+---------- ------+
| 88 | 1,014 | 1,039 | 2010-08-25-09.00.00.000000 |
| 89 | 1,014 | 1,039 | 2010-08-25-09.00.00.000000 |
| 90 | 1,014 | 1,039 | 2010-08-25-09.00.00.000000 |
| 91 | 1,014 | 1,039 | 2010-08-25-09.00.00.000000 |
| 119 | 1,084 | 0 | 2010-08-25-09.00.00.000000 |
| 第522章 1,014 | 1,039 | 2010-08-25-09.00.00.000000 |
+--------+--------+--------+---------- ------+

```

我会尝试你所有的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:49:56.630

坦率地说，我对您的架构有点紧张-除其他外，我对某些非规范化不满意（真的是多值列吗？）。但是您更改它的能力可能有限，所以...如果可能，您应该考虑至少升级到 V6R1（这是我们正在使用的），因为数据库会获得更多好东西。值得庆幸的是，您仍然有 CTE，这将有所帮助。

我假设您想要的是商店的最新`CIEDHC`价格*变化*`DASTAT`（由在后来的一个之后被“确认”？）。换句话说，这不是最后一次“确认”更改，而是最后一次“输入”更改。

 *我还假设您有一个“商店”表，其中定义了所有实际的商店 ID。但是，由于您没有列出它，我创建了一个 CTE 来制造它。您可以（并且可能应该）在结果语句中将其换掉。

```
WITH Store (storeId) as (
            SELECT DISTINCT cia#st
            FROM Wbdcia00), 
     Price_Change (callGroup, occurredAt, productType, newPrice) as (
                   SELECT cie#en, ciedhc, 1, cie$or
                   FROM Wbdcie00
                   WHERE cie$or > 0
                   UNION ALL
                   SELECT cie#en, ciedhc, 4, cie$di
                   FROM Wbdcie00 
                   WHERE cie$di > 0), 
     Confirmed_Changes (storeId, occurredAt, productType, newPrice) as (
                        SELECT WarehouseCall.cia#st, Change.occurredAt, 
                               Change.productType, Change.newPrice
                        FROM Wbdcia00 as WarehouseCall
                        JOIN Wbdapp00 as Call
                        ON Call.danoid = WarehouseCall.cia#ap
                        AND Call.dastat IN (1, 4)
                        JOIN Price_Change as Change
                        ON Change.callGroup = da#env),
     Latest_Change (storeId, productType, newPrice) as (
                    SELECT Actual.storeId, Actual.productType, Actual.newPrice
                    FROM Confirmed_Changes as Actual
                    EXCEPTION JOIN Confirmed_Changes as Remove
                    ON Remove.storeId = Actual.storeId
                    AND Remove.productType = Actual.productType
                    AND Remove.occurredAt > Actual.occurredAt)
SELECT store.storeId, COALESCE(Regular.newPrice, 0) as regularPrice,
                      COALESCE(Diesel.newPrice, 0) as dieselPrice
FROM Store
LEFT JOIN Latest_Change as Regular
ON Regular.storeId = Store.storeId
AND Regular.productType = 1
LEFT JOIN Latest_Change as Diesel
ON Diesel.storeId = Store.storeId
AND Diesel.productType = 4 
```

需要注意的一些事情-
我认为您实际上并没有给产品定价 0。这意味着您不是在寻找发出的单个电话，同时列出了两个价格-您要进行最后一次更改发生了，对于每个产品。这就是为什么我像以前那样旋转/取消旋转该表。
不用说，该语句报告了最后输入的“确认”更改。然而，这*不是*最后一次确认更改（用 表示`dadthr`）。*

# windows-8 - 是什么导致 Windows 8 Consumer Preview 在 Oracle VM VirtualBox 中锁定/冻结/挂起？

> ID：10450683
> 
> 赞同：0
> 
> 时间：2012-05-04T14:19:37.697
> 
> 标签：windows-8, virtualbox

我已使用 Oracle VM VirtualBox (4.1.14) 将 Windows 8 Consumer Preview 安装到虚拟机。除了偶尔的临时锁定/冻结/挂起中断外，它运行良好。

它会冻结大约一分钟，然后再恢复正常几分钟，然后再次冻结。

**主机**
Windows 7 Professional 64 位
16 GB RAM
Intel Core i7（四核、超线程、虚拟化）CPU

**来宾**
Windows 8 Consumer Preview 64 位
2 GB RAM
2 个 CPU

我应该如何配置 VirtualBox 才能很好地运行 Windows 8？

[![VirtualBox 上的 Windows 8](../Images/31942513632fa7b2c65df9f78a3da140.png)](https://i.stack.imgur.com/34NCs.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:46:32.563

确保在 Windows 8 上安装了 Guest Additions。在我安装了 Guest Additions 之前，我确实受到了 Win 8 虚拟化性能的困扰。

但是，如果您打算在 Windows 8 中做任何重要的事情，我强烈建议您更接近金属运行。我很高兴启动到 VHD [http://www.hanselman.com/blog/HowToGuideToInstallingAndBootingWindows8ConsumerPreviewOffAVHDVirtualHardDisk.aspx](http://www.hanselman.com/blog/HowToGuideToInstallingAndBootingWindows8ConsumerPreviewOffAVHDVirtualHardDisk.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:44:31.593

这是一个早期的测试版。它通常安装在我的高端笔记本电脑上，并且每隔几天就会冻结一次。经常保存并感谢它比 Win7 更快地重新启动

# android - 崩溃应用程序类

> ID：10450687
> 
> 赞同：1
> 
> 时间：2012-05-04T14:19:54.180
> 
> 标签：android

我坐在那里的问题。事情就是这样。我正在编写一个应用程序来显示 pdf 文件。

渲染文件的过程与主流并行运行。当我的类应用程序中的所有对象都变为空时，屏幕非常频繁地出现。

如何禁用屏幕旋转并等待页面渲染完成？

我试过用

> setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR); setActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);

但在设置屏幕 SCREEN_ORIENTATION_SENSOR 时，屏幕方向改变了几次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:35:26.870

这是同一个问题，不同的答案适用于一个活动或整个应用程序：[如何在 Android 中禁用方向更改？](https://stackoverflow.com/questions/1512045/how-to-disable-orientation-change-in-android)

# ios - 如何在核心数据中保存与另一个对象相关的对象？

> ID：10450689
> 
> 赞同：2
> 
> 时间：2012-05-04T14:19:58.977
> 
> 标签：ios, core-data, ios5

我很难建立一对一的关系。在最高级别，我有一对多的关系。我将使用典型的经理、员工等示例来解释我正在尝试做的事情。为了更进一步，我正在尝试为员工添加一对一的众议院关系。

当我对 NSManagedObject 进行子类化时为我创建的 addEmployeesToManagereObject 方法，我添加的员工没有问题。当我在我的表视图中选择一个员工时，我设置了 Employee 类型的 currentEmployee - 它在我的 .h 中声明。

现在我有了那个当前员工，我想保存与当前员工相关的 Houses 实体属性。

我真正苦苦挣扎的部分是设置 managedObjectContext 以及设置和保存与 currentEmployee 相关的房屋属性。

我已经尝试了几件事，但这是我的最后一次尝试：

> **注意**：employeeToHouse 是一个 House 类型的属性，它是在我继承 NSManagedObject 时为我创建的

```
House *theHouse = [NSEntityDescription 
                   insertNewObjectForEntityForName:@"House"
                   inManagedObjectContext:self.managedObjectContext];
// This is where I'm lost, trying to set the House
// object through the employeeToHouse relationship
self.currentEmployee.employeeToHouse 
```

如何访问和保存房屋属性到 currentEmployee？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:13:02.657

由于 House 设置为实体，因此可以将其视为数据存储中的表。如果确实如此，您需要在数据模型中设置 Employee 和 House 之间的一对一关系。

如果您已经这样做了，那么它就像调用一样简单。尽管我对 Core Data 的一对一关系不如我对多对多的熟悉。无论哪种情况，请尝试以下方法之一

```
[self.currentEmployee addHouseObject: theHouse]; 
```

或者

```
self.currentEmployee.employeeToHouse=theHouse; 
```

然后保存到 managedObjectContext：

```
NSError *error=nil;
if (![self.managedObjectContext save:&error]{

    NSLog(@"Core Data Save Error:  %@", error);
} 
```

另外，我不确定您的具体情况，但是您的 self.managedObjectContext 应该已经与 self.currentEmployee.managedObjectContext 所指向的相同。

祝你好运，

蒂姆

# ruby-on-rails - 如何测试表单文本字段没有值？

> ID：10450691
> 
> 赞同：0
> 
> 时间：2012-05-04T14:20:13.630
> 
> 标签：ruby-on-rails, rspec, capybara, rspec-rails

如何测试没有值的文本表单字段，例如以下情况：

```
<input class="string required" id="student_name" name="student[name]"
       size="50" type="text" /> 
```

我知道如果存在值，您将拥有：

```
<input class="string required" id="student_name" name="student[name]"
       size="50" type="text" value="John" /> 
```

您可以进行测试以确保表单字段预先填充了名称“John”，其中包含以下内容：

```
it "should display an enmpty field for the student name" do
  rendered.should have_selector("input", :type => "text",
                                         :name => "student[name]",
                                         :value => "John")
end 
```

我尝试指定“：value => nil”，但没有奏效。

have_selector() 的文档非常少，因此无法在那里找到任何内容，也无法通过搜索找到任何示例（可能使用错误的术语进行搜索）。

根据建议，我也尝试过`:value => ''`，但收到以下错误消息：

```
expected following output to contain a <input type='text' name='vendor[name]' value=''/> 
```

当我尝试时，`:value => nil`我收到以下错误消息：

```
 NoMethodError:
   undefined method `include?' for nil:NilClass 
```

**答案**
解决方案是使用`:value => ""`或`:value => ""`。

它最初在我的案例中不起作用的原因是我在我的 Gemfile 中包含了 webrat 和 capybara gem。删除 webrat 后，它使用两种解决方案都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:31:20.013

尝试将值指定为“”

```
it "should display an enmpty field for the student name" do
    rendered.should have_selector("input", :type => "text",
                                     :name => "student[name]",
                                     :value => "")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:32:05.880

@Unixmonkey 在评论中所说的应该有效。你也可以这样做：

```
page.first(:css, "#student_name")[:value].should be_nil 
```

**编辑**哦，我猜@Unimonkey 的评论根据您的更新不起作用，但以上内容会起作用 - 我已经测试过了。

**编辑 2 回复：评论**试试这个，因为你在一个视图规范中：

```
selector = css_select("#student_name").first
selector["value"].should be_nil 
```

# objective-c - 如何计算在uiimageview中加载图像所花费的时间

> ID：10450692
> 
> 赞同：1
> 
> 时间：2012-05-04T14:20:16.293
> 
> 标签：objective-c, ios4

如何计算图片在uiimageview中加载所用的时间。我在单击按钮时使用此代码

```
-(IBAction)loadImage:(id)sender
{
    //Using block to create image view through NSOperationQueue
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperationWithBlock: ^{

    //Create image view and adding it to the view
    imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 375)];
    imageView.image = [UIImage imageNamed:@"Yellow_Red_Parrot.jpg"];
    [self.view addSubview:imageView];

    }];
} 
```

我想计算从点击到图像视图加载图像所花费的时间。任何人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:30:12.820

在开始操作之前，添加：

```
NSDate *startDate=[NSDate date]; 
```

操作结束后，添加：

```
NSDate *endDate=[NSDate date];
double ellapsedSeconds=[endDate timeIntervalSinceDate:startDate]; 
```

# linq - 在实体框架的 LINQ 中使用“NOT IN”从两个表中进行选择

> ID：10450697
> 
> 赞同：2
> 
> 时间：2012-05-04T14:20:40.000
> 
> 标签：linq, entity-framework, linq-to-sql, entity-framework-4

我有以下 SQL，我如何在 LINQ 中实现它，我在我的 MVC 项目中使用实体框架。

```
 SELECT 
  * FROM Catalog.ServiceItem 
  WHERE SKU NOT IN (SELECT ServiceItemSKU FROM Catalog.TaggedServiceItems) 
```

有任何想法吗 ？

**编辑： 答案：**

```
var untaggedItems = from item in serviceItems where !taggedServiceItems.Contains(item.SKU) select item; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T14:24:58.177

你可以这样做`Contains`：

```
var result = from item in ServiceItem
    where !TaggedServiceItems.Contains(item.SKU)
    select item; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:37:29.850

试试这个

```
var Catalog_ServiceItem = ds.Tables["Catalog.ServiceItem"].AsEnumerable();
var Catalog_TaggedServiceItems = ds.Tables["Catalog.TaggedServiceItems"].AsEnumerable();
var _except = from c in Catalog_ServiceItem 
                   join b in Catalog_TaggedServiceItems 
                     on c.Field<string>("ServiceItemSKU ") equals b.Field<string>("ServiceItemSKU ") into j
                   from x in j.DefaultIfEmpty()
                   where x == null
                   select c; 
```

**编辑**

你可以这样做

```
var _except = Catalog_ServiceItem.Except(Catalog_TaggedServiceItems); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:38:55.763

使用拉姆达。

```
dim query=Catalog.ServiceItem.where(function(q) not q.Contains(q.SKU)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T14:33:47.743

试试这个：

```
var untaggedItems = 
  from i in Catalog.ServiceItem
  let taggedItems = (
    from ti = Catalog.TaggedServiceItems
    select ti.ServiceItemSKU ).Distinct()
  where ! taggedItems.Contains( i.SKU )
  select i; 
```

# lua - 在协议字段创建中发出“尝试索引全局“基础”的问题

> ID：10450701
> 
> 赞同：3
> 
> 时间：2012-05-04T14:20:55.590
> 
> 标签：lua, wireshark-dissector

我尝试在 lua 上为wireshark 编写解剖器。我需要解析头字段版本= 4字节（0x00000000）

我的代码：

```
do 

    local asc_sccp =Proto("asc_sccp", "ASC Skinny Client Control Protocol") 

    local f =asc_sccp.fields 

    f.length = ProtoField.bytes("asc_sccp.length", "length")  
    f.version =ProtoField.uint8("asc_sccp.version", "version", base.HEX, 0xC)

    function asc_sccp.init() 
    end  

    function asc_sccp.dissector(buffer,pinfo,tree)

        local subtree = tree:add (asc_sccp, buffer())
        local offset = 0

        pinfo.cols.protocol = asc_sccp.name

        local length = buffer (offset, 4)

        subtree:add (f.length, length)
        subtree:append_text ("Data length: " .. length) 

        offset = offset + 4 

        local version = buffer (offset, 4)

        subtree:add (f.version, version)
        subtree:append_text ("    Version: " .. version)

    end

    local tcp_table = DissectorTable.get("tcp.port") 
    tcp_table:add(2000, asc_sccp)  

end 
```

为什么我收到错误'尝试索引全局'基础'（零值）'？你能帮忙吗，我浏览了很多解剖器的例子，但我找不到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-10T15:33:52.423

这可能是因为`init.lua`未安装而发生的。如果未安装开发包，这可能发生在基于 Redhat 的发行版（Fedora、Centos、RHEL 等）中。在这里查看答案：[https ://stackoverflow.com/a/40489742/409638](https://stackoverflow.com/a/40489742/409638)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:18:22.370

在这行代码中：

```
f.version =ProtoField.uint8("asc_sccp.version", "version", base.HEX, 0xC) 
```

您正在访问变量“base”。具体来说，您通过告诉 Lua 它是一个包含键“HEX”的表并尝试检索该键的值来对其进行索引。除非你在某处将变量'base'定义为一个表（或userdata）并在键“HEX”处添加一个值，否则lua会抱怨你试图索引一个名为'base'的全局变量，而它实际上是nil （即不存在）。

# html - 需要右对齐ol列表中的十进制数

> ID：10450702
> 
> 赞同：3
> 
> 时间：2012-05-04T14:21:19.033
> 
> 标签：html, css

我有一个标准`ol`清单：

```
1\. One
2\. Two
10\. Ten 
```

有没有办法让十进制数右对齐，使其看起来像这样：

```
 1\. One
 2\. Two
10\. Ten 
```

**编辑**：截图。顶部是 Typekt (Proxima Nova) 字体粗细正常。底部是无衬线字体。

唯一相关的样式是：`ol { list-style-position: inside; }`

![](../Images/9a9d79ecba1c2aaea882014b660e93e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:26:30.327

默认情况下，项目编号不是右对齐吗？至少它们在 IE 和 Firefox 中：

```
<ol>
  <li>One</li>
  <li>Two</li>
  <li value="10">Ten</li>
</ol> 
```

**更新：**问题在于 (1)`list-style-position`设置为`inside`，因此项目编号显示为项目内容的一部分，而不是在左边距中，并且 (2) 您使用的是具有可变宽度数字的字体。

删除`list-style-position: inside`将解决问题。你添加它的原因是什么？如果一个脚注太长以至于它换行了，你希望后面的行如何缩进？

# css - css改变第二个元素

> ID：10450703
> 
> 赞同：1
> 
> 时间：2012-05-04T14:21:25.070
> 
> 标签：css, css-selectors

我知道：

```
p+p 
```

在另一个 p 之后更改第一个 p 的样式。但是如何在 ap 之后更改第二个 p 的 css 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:23:31.060

只需添加另一个`+p`：

```
p+p+p 
```

如果您有三个以上的`p`元素，则这适用于第一个之后的第二个，*以及所有后续元素*。如果您只想应用于一个`p`元素，请使用：

```
p:first-child+p+p 
```

或者，如果您有能力忽略旧版浏览器：

```
p:nth-child(3) 
```

# symfony - Doctrine2 只给了我相关对象的第一个实例

> ID：10450707
> 
> 赞同：0
> 
> 时间：2012-05-04T14:21:38.170
> 
> 标签：symfony, doctrine-orm, one-to-many

我正在使用 QueryBuilder 来获取 10 个最大的城市。

```
$query = $em->createQueryBuilder()
            ->select('c','s')
            ->from('CitiesBundle:Cities', 'c')
            ->innerJoin('c.state', 's','WITH', 'c.state = s')
            ->orderBy('c.population', 'DESC')
            ->setMaxResults(10)
            ->getQuery(); 
```

生成的 SQL：

> SELECT c0_.id AS id0, c0_.name AS name1, c0_.landarea AS landarea2, c0_.density AS density3, c0_.population AS population4, s1_.id AS id5, s1_.name AS name6, c0_.state_id AS state_id7 FROM 城市c0_ INNER JOIN states s1_ ON c0_.state_id = s1_.id AND (c0_.state_id = s1_.id) ORDER BY c0_.population DESC LIMIT 10

当我在 PHPMyAdmin 中测试该查询时，每个城市都有自己的州，但在应用程序中，数组中的所有城市都与第一个城市的州相关联。

在这种情况下，有人可以为我解释 Doctrine2 的行为吗？

**[编辑]**

架构：

```
XYZ\Bundle\CitiesBundle\Entity\Cities:
  type: entity
  table: cities
  fields:
  #fields
  oneToMany:
    state:
      targetEntity: States
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        state_id:
          referencedColumnName: id
      orphanRemoval: false
  lifecycleCallbacks: {  }

XYZ\Bundle\CitiesBundle\Entity\States:
  type: entity
  table: states
  fields:
    id:
      id: true
      type: boolean
      nullable: false
      generator:
        strategy: IDENTITY
    name:
      type: string
      length: 50
      fixed: false
      nullable: false
  lifecycleCallbacks: {  } 
```

我尝试了不同的架构选项（ManyToOne 等）但没有运气

PHPMyAdmin、mazowieckie 等的屏幕截图是州名。在我的应用程序中，所有 10 个城市都有 state->name mazowieckie。

![在此处输入图像描述](../Images/e14f42fdc3f00ff7415e5a0f3d2feee6.png)

应用外观截图：

![在此处输入图像描述](../Images/3ee189231799450969465c0017c58f6c.png)

我在循环中输出州名：{{ city.state.name }}

# java - Character.valueOf

> ID：10450713
> 
> 赞同：-2
> 
> 时间：2012-05-04T14:22:01.213
> 
> 标签：java

我运行这个方法：

```
String str=Character.valueOf(char).toString() 
```

输出就像控制台上的一个小方块，就像文件中的条形码一样。输出的实际格式是什么，输出也无法复制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:28:03.350

`Character.valueOf(char)`只需接受 a`char`并返回`Character`表示相同值的包装器实例。使用`toString()`on 会返回一个`String`仅包含该单个字符的值。

因此，如果您的初始`char`值表示可打印字符，那么结果应该是可打印的。

但是，如果您使用任意数值（特别是，如果您使用 0、1 或非常高的值）作为起点，则结果将是一个包含单个 Unicode 字符和该代码点的字符串。这不太可能是一个有用的结果。

换句话说：*废话，废话*。

您的实际输入值是多少，您期望发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:28:56.473

尝试

```
String.valueOf(c); 
```

.toString() 提供对象的字符串表示形式，它可以是任何东西。您想要的不是 Character 对象的字符串表示形式。您想从 char 转换/创建字符串。

# asp.net - 用数字填充 asp.net 下拉列表

> ID：10450714
> 
> 赞同：4
> 
> 时间：2012-05-04T14:22:12.903
> 
> 标签：asp.net, for-loop, drop-down-menu

一个简单的查询，我想用从 17 到 90 的数字填充下拉列表，最后一个数字应该是 90+ 而不是 90 之类的字符串。我猜逻辑将使用类似的 for 循环：

```
for (int a = 17; a <= 90; a++)
        {
            ddlAge.Items.Add(a.ToString());
        } 
```

我还想用相同的数字填充每个列表项的文本和值。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:27:04.843

```
for (int i = 17; i < 90; i++)
{
    ddlAge.Items.Add(new ListItem(i.ToString(), i.ToString()));
}
ddlAge.Items.Add(new ListItem("90+", "90")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T14:25:33.573

试试这个：

```
for (int a = 17; a <= 90; a++)
{
    var i = (a == 90 ? a.ToString() + '+': a.ToString());
    ddlAge.Items.Add(new ListItem(i, i));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T14:26:39.313

这很容易。您需要实例化 ListItem 类并填充其属性，然后将其添加到您的 DropDownList。

```
 private void GenerateNumbers()
    {
        // This would create 1 - 10
        for (int i = 1; i < 11; i++)
        {
            ListItem li = new ListItem();
            li.Text = i.ToString();
            li.Value = i.ToString();
            ddlAge.Items.Add(li);
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T14:24:48.910

```
for (int a = 17; a <= 90; a++)
{
    ddlAge.Items.Add(new ListItem(a.ToString(), a.ToString()));
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-12T13:14:09.627

```
for (int i = 17; i <= 90; i++)
{
    ddlAge.Items.Add(new ListItem(i.ToString(), i.ToString()));
}
ddlAge.Items.Insert(0, new ListItem("Select Age", "0")); //First Item
ddlAge.Items.Insert(ddlAge.Items.Count, new ListItem("90+", "90+")); //Last Item 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-01T16:48:37.293

```
for (int i = 0; i <=91; i++)
    {
        if (i == 0)
        {
            ddlAge.Items.Add("Select Age");
        }
        else if(i<=90)
        {
            ddlAge.Items.Add(i.ToString());
            i++;
        }
        else
        {
         ddlAge.Items.Add("90+");
        }
    } 
```

# usb - USB 2.0 主机控制器上的可读 CRC 错误计数属性

> ID：10450716
> 
> 赞同：1
> 
> 时间：2012-05-04T14:22:20.057
> 
> 标签：usb, driver, packet, crc

传输描述符包含每次传输持续存在的错误限制。但是，对于 USB 2.0 设备上的每个端点传输，主机控制器上是否存在累积的 CRC 错误计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:32:29.957

由于到目前为止（2个月）还没有人回答这个问题，我将在这里陈述我的解决方案。

此处记录的`USB 3.0`规范（第 10-63 页）：

[http://www.gaw.ru/pdf/interface/usb/USB%203%200_english.pdf](http://www.gaw.ru/pdf/interface/usb/USB%203%200_english.pdf)

列出在`GET_PORT_ERROR_COUNT`.

由于此属性是`USB 3.0`独占的，因此目前还不能向后兼容`USB 2.0`。由于缺乏 Windows`USB 3.0`支持（支持 Windows 8）以及`POSIX-compliant`机器上对 3.0 标准的 libusb 支持不完整，我无法测试此属性是否符合我的项目。

**驱动参考**： http: [//lxr.free-electrons.com/source/include/linux/usb/hcd.h#L517](http://lxr.free-electrons.com/source/include/linux/usb/hcd.h#L517)

```
521   /* class requests from USB 3.0 hub spec, table 10-5 */
522   #define SetHubDepth             (0x3000 | HUB_SET_DEPTH)
523   #define GetPortErrorCount       (0x8000 | HUB_GET_PORT_ERR_COUNT) 
```

# c# - 将 ASMX 服务加载为 XMLDocument

> ID：10450725
> 
> 赞同：0
> 
> 时间：2012-05-04T14:22:50.873
> 
> 标签：c#, web-services, asmx, xmldocument

有人能帮我吗？我将 ASMX 加载为 XMLDocument，我使用以下代码：

```
string url = "http://www.*******.com/WebService.asmx/Test";
    wsResponse.Load(url);
    string XMLDocument = wsResponse.InnerXml;
    Response.ContentType = "text/xml";
    Response.Write(XMLDocument); 
```

在生产服务器上，我收到了服务器内部错误，它位于共享主机上。在本地主机上，Web 服务已成功使用。Web 服务返回一个简单的字符串作为“服务测试” 该服务是通过 HTTP GET 请求的

是什么导致了问题，我该如何解决。

PS我尝试使用这种方法，因为在共享主机上他们突然停止支持跨域Web服务消费，所以我不能通过ajax消费服务

![在此处输入图像描述](../Images/700cd7bf6c3c746051f53aefe996935e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:05:50.280

任何以“5”开头的 HTTP 错误代码都是服务器错误。这意味着它是您的服务内部未处理的异常。异常可能只有当你以这种方式访问​​服务时才会发生，但异常肯定是在服务中。

查看应用程序事件日志以查看是否记录了异常的详细信息。否则，要么调试服务，要么查看服务可能记录异常的其他任何地方。

仅供参考，当您以这种方式访问​​服务时，您使用的是 HTTP GET 动词。在服务的web.config中，需要开启HttpGet协议。默认情况下它是禁用的，您需要启用它：

```
<configuration>
    <system.web>
    <webServices>
        <protocols>
            <add name="HttpGet"/>
        </protocols>
    </webServices>
    </system.web>
</configuration> 
```

最后，我只想确保您知道 ASMX 技术是一种遗留技术，不应该用于新的开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:35:44.220

当然，这是一种奇怪的查询 Web 服务的方式。通常，您添加一个服务引用/代理类并在 web.config 中指定服务端点。

你可以在这里阅读：http: [//msdn.microsoft.com/en-US/library/y92e0td0.aspx](http://msdn.microsoft.com/en-US/library/y92e0td0.aspx)

如果您出于某种原因不能使用此方法，我猜（这是理论上的）您可以使用您的 Web 服务 url 声明一个 HttpRequest 并将响应作为字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:14:21.400

**似乎问题出在远程服务器上，因为它需要一个有效的用户代理。**

这是修复：

```
var m_strFilePath = "http://www.google.com/ig/api?weather=12414&hl=it";
        string xmlStr;
        using (var wc = new WebClient())
        {
            wc.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
            TaskCompletionSource<string> tcs = new TaskCompletionSource<string>();
            xmlStr = wc.DownloadString(m_strFilePath);
        }
        xdoc.LoadXml(xmlStr); 
```

这是 Stackoverflow 网站上的文章： [webclient 远程服务器返回错误：（500）内部服务器错误](https://stackoverflow.com/questions/14919683/webclient-the-remote-server-returned-an-error-500-internal-server-error/14919757#14919757)

# c - 关于C语言（C89）的一些问题

> ID：10450726
> 
> 赞同：-12
> 
> 时间：2012-05-04T14:22:52.267
> 
> 标签：c

对不起我的英语不好。

下面我列出了我寻找 C 语言 (C89) 的问题答案。

1.  如何获得处理器计数？
2.  如何获得处理器核心数？
3.  如何获取处理器名称？
4.  如何获得 RAM 大小？
5.  如何了解这个或那个处理器（或核心）的负载水平？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:25:36.687

1.  您需要一个操作系统 API。
2.  您需要一个操作系统 API。
3.  您需要一个操作系统 API。
4.  您需要一个操作系统 API。
5.  您需要一个操作系统 API。

# javascript - 必须选中复选框以提交表单

> ID：10450730
> 
> 赞同：0
> 
> 时间：2012-05-04T14:23:08.610
> 
> 标签：javascript, forms, validation

试图创建一个表单，迫使人们选择带有“我接受条款和条件”短语的复选框，以便发送表单。

这就是我所拥有的，但它没有提交表单——我收到一个错误。

我放在标题中的Javascript：

```
<script type="text/javascript">
   <!--

   function validate_form ( )
   {
   valid = true;

   if ( document.form1.cb.checked == false )
   {
   alert ( "Please check the Terms & Conditions box ." );
   valid = false;
   }

   return valid;
   }

   //-->
   </script> 
```

形式：

```
 <form action="/cgi-bin/FormMail.pl" method="POST" name="frmOne"  id="frmOne">
    <input type=hidden name="recipient" value="XXX@XXX.com"/>
    <table width="100%" cellspacing="5" cellpadding="5" style="margin-top:-20px">
    <tr>
    <td width="50%" valign="top">
    <br/>
      <p><span id="sprytextfield1">
    <label for="Full Name">Full Name (First and Last): </label>
    <input name="Full Name" type="text" id="name" tabindex="10" size="60" />
    <span class="textfieldRequiredMsg"><br />Please provide information.</span></span> </p>
    <p><span id="sprytextfield2">
    <label for="Your Email">Your e-mail address: </label>
    <input name="email" type="text" id="email" size="60" />
    <span class="textfieldInvalidFormatMsg"></span></span>  </p>
    <p><span id="sprytextfield3">
    <label for="Phone Number"> Phone Number: </label>
    <input name="Phone Number" type="text" id="phone" size="60" />
    <span class="textfieldInvalidFormatMsg"><br />Invalid format.</span><span class="textfieldRequiredMsg"><br/>A phone number is required.</span></span></p>
    <p class="text">
      <span id="sprytextfield4">
    <label for="Nature Of The Accident">Nature of Accident, i.e. slip and fall, motor vehicle accident, etc.:  </label>
    <input name="Nature Of The Accident" type="text" id="natureOfAccident" size="60" />
    </span></p>
    <p><span id="sprytextfield5">
    <label for="Date Of The Accident">Date of the Accident: </label>
    <input name="Date Of The Accident" type="text" id="dateOfAccident" size="60" />
    <span class="textfieldRequiredMsg"><br />Please provide information.</span><span class="textfieldInvalidFormatMsg"><br />Invalid format.</span></span></p>
    <p class="text">
    </td>

    <td width="50%" valign="top">

    <p class="text">
    <span id="sprytextarea1"> 
    <label for="Description Of The Injury"><br />Brief Description of your Injuries: </label>
    <textarea name="Description Of The Injury" cols="45" rows="4" id="descriptionOfInjury">
    </textarea> 
    <span class="textareaRequiredMsg"><br />Please provide information.</span></span></p>
    <p class="text">
    <span id="sprytextarea2">
    <label for="Description Of The Accident">Brief Description of the Accident:</label>
    <textarea name="Description Of The Accident" id="descriptionOfAccident" cols="45" rows="4"></textarea>
    <span class="textareaRequiredMsg"><br />
    Please provide information.</span></span></p>
    <p class="text">
    <span id="sprytextfield6">
    <label for="How Did You Hear About Us">How did you hear about us?: </label>
    <input name="How Did You Hear About Us" type="text" id="howDidYouHear" size="56" />
    <span class="textfieldRequiredMsg"><br />Please provide information.</span></span>  </p>
    <input type="checkbox" name="agree" value="agree_terms" id="disclaimer" />
    <label for="disclaimer">I have read the Disclaimer</label>
    <br/><br />
    &nbsp;<input type="reset" name="reset" id="reset" value="Reset Form" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="submit" name="Form Action" id="send" tabindex="100" value="Submit" />

    </td>
    </tr>
    </table>

</form>
<script type="text/javascript">
<!--
var sprytextfield1 = new Spry.Widget.ValidationTextField("sprytextfield1", "none", {validateOn:["blur", "change"]});
var sprytextfield2 = new Spry.Widget.ValidationTextField("sprytextfield2", "email", {validateOn:["blur", "change"], isRequired:false});
var sprytextfield3 = new Spry.Widget.ValidationTextField("sprytextfield3", "phone_number", {validateOn:["blur"], useCharacterMasking:true});
var sprytextfield4 = new Spry.Widget.ValidationTextField("sprytextfield4", "none", {isRequired:false, validateOn:["blur", "change"]});
var sprytextfield5 = new Spry.Widget.ValidationTextField("sprytextfield5", "date", {hint:"dd/mm/yyyy", validateOn:["blur", "change"], format:"dd/mm/yyyy"});
var sprytextarea1 = new Spry.Widget.ValidationTextarea("sprytextarea1", {validateOn:["blur", "change"]});
var sprytextarea2 = new Spry.Widget.ValidationTextarea("sprytextarea2", {validateOn:["blur", "change"]});
var sprytextfield6 = new Spry.Widget.ValidationTextField("sprytextfield6", "none", {validateOn:["blur", "change"], hint:"Google, etc"});
//-->
</script></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:32:57.293

您引用的表单和元素错误，请尝试以下操作：

```
<form name="frmOne" method="POST" onSubmit="return checkForm(frmOne);" action="/cgi-bin/FormMail.pl">

<script>
function checkForm(form) 
{
    if(!form.agree.checked) 
    { 
        alert("You must agree to this disclaimer before applying.");
        return false;
    }
}
</script> 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:27:29.467

更改`<form action="/cgi-bin/FormMail.pl" method="POST" name="frmOne" id="frmOne">`为`<form action="/cgi-bin/FormMail.pl" method="POST" name="frmOne" id="frmOne" onSubmit="validate_form();">`

你还有什么其他错误？

并更改`document.form1.cb.checked`为`document.frmOne.agree.checked`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:27:52.100

试一试`document.getElementById("disclaimer").checked == false`。

# facebook - 如何通过 Graph API 获取随机 facebook 页面的状态

> ID：10450732
> 
> 赞同：3
> 
> 时间：2012-05-04T14:23:15.123
> 
> 标签：facebook, graph

我正在尝试获取 facebook 页面的状态。为此，我需要一个访问令牌，我可以通过以下方式获得：

```
https://graph.facebook.com/oauth/access_token?
client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&
grant_type=client_credentials 
```

（[在这里找到](https://stackoverflow.com/questions/7633234/get-public-page-statuses-using-facebook-graph-api-without-access-token)）

但是，当我尝试使用访问令牌手动访问图形 api 时，如下所示：[https://graph.facebook.com/id_of_page/statuses?access_token=my_fresh_access_token](https://graph.facebook.com/id_of_page/statuses?access_token=my_fresh_access_token)，我总是收到此错误：

```
{
  "error": {
  "message": "A user access token is required to request this resource.",
  "type": "OAuthException",
  "code": 102
}
} 
```

是否有不同“种类”的访问令牌？或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:35:45.577

Facebook 上有几个访问令牌。您收到的访问令牌是一个应用访问令牌，它比用户访问令牌更受限制。

可用的访问令牌在“访问令牌术语”下进行了解释：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# if-statement - 批处理语法错误

> ID：10450736
> 
> 赞同：0
> 
> 时间：2012-05-04T14:23:33.633
> 
> 标签：if-statement, batch-file, for-loop

我正在尝试编写一个批处理，将配置文件文件夹的名称复制到一个 txt 文件，然后获取每一行（配置文件）并用它查询广告。我似乎遇到的两个问题是：

1.  它说我编写 for 循环的方式存在语法错误
2.  如果我将其分解以进行调试，则循环似乎只是一遍又一遍地设置变量，然后仅使用最终值来执行下标中的命令

```
@echo off

@setlocal enabledelayedexpansion
pushd "c:\documents and settings"

mkdir c:\pulls
copy \\mint\testfolder\forfiles.exe c:\pulls\
copy \\mint\testfolder\psexec.exe c:\pulls\
rem call \\mint\testfolder\copy.bat c:\pulls\
set queryid=
set checkid=

rem finds all profiles that have been logged into in the last 18 months

c:\pulls\forfiles.exe /p "c:\documents and settings\" /d -540 /c "cmd /c if @ISdir==true deltree @isdir"

dir/b > "c:\documents and settings\profiles.txt"

%queryid% > "c:\documents and settings\tmp.txt"

rem active directory query

:adquery

for /f  "tokens=*" %%n IN ("c:\documents and settings\profiles.txt") do (
    set queryid=%%n
    call :sub
)

goto :end

:sub

c:\pulls\psexec.exe \\computer-u domain\user -p password dsquery user -name %queryid%     > "c:\documents and settings\tmp.txt"
set /p checkid= < "c:\documents and settings\tmp.txt"
del "c:\documents and settings\tmp.txt"

::checks to see if variable is an empty string

if [!%checkid%==!] goto :process1

if [%checkid%==] %queryid% >> c:\documents and settings\final.txt

goto :eof

:process1

c:\pulls\psexec.exe \\computer -u domain\user -p password dsquery user -name %queryid%     -desc *termed* > "c:\documents and settings\tmp.txt"
set /p checkid= < "c:\documents and settings\tmp.txt"
del "c:\documents and settings\tmp.txt"

::checks to see if variable is an empty string

if [!%checkid%==!] goto :amending
if [%checkid%==] goto :process2

goto :eof

:process2

c:\pulls\psexec.exe \\computer -u domain\user -p password dsquery user -name %queryid%     -disabled > "c:\documents and settings\tmp.txt"
set /p checkid= < "c:\documents and settings\tmp.txt"
del "c:\documents and settings\tmp.txt"

::checks to see if variable is an empty string

if [!%checkid%==!] goto :amending

goto :eof

:amending

%checkid% >> "c:\documents and settings\final.txt"

 goto :eof

:end

 notepad.exe "c:\documents and settings\final.txt"

del c:\pulls /y

del "c:\documents and settings\profiles.txt"

del "c:\documents and settings\final.txt"

rem copies selected profiles

rem c:\pulls\copy.bat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:34:25.513

我没有追踪你的整个逻辑，看看你是否还有其他问题。但是我已经确定了您的 FOR /F 循环的问题。

您正在尝试读取文件，但您的 IN() 子句是双引号，因此它被解释为字符串而不是文件名。（键入`FOR /?`FOR 命令的帮助）。您想使用双引号，因为您的路径包含空格，但您需要将其解释为文件名 - 这就是 USEBACKQ 选项的用途！

```
for /f  "usebackq tokens=*" %%n IN ("c:\documents and settings\profiles.txt") do ... 
```

# c# - 在 Mvc 3 razor 视图中，基于模型中的 Null 有条件地渲染 html 的最佳方法是什么

> ID：10450742
> 
> 赞同：5
> 
> 时间：2012-05-04T14:24:24.720
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我确信这是一个简单的问题，但我无法弄清楚这一点。

我想做这样的事情......

> ```
> @(string.IsNullOrEmpty(Model.CustomerUrl) ? "" : <a href="@Model.CustomerUrl">Click me</a>) 
> ```

这个片段不起作用。

html 与 razor 语法的混合以及在标签属性中包含引号使得很难弄清楚。

我喜欢剃须刀，除了弄清楚这种东西真的让我绊倒。

如果 CustomerUrl 为空或为空，我希望根本不呈现以下内容......

```
<p class="customerLink links"><a href="@Model.CustomerUrl">@Model.CustomerName</a></p> 
```

**编辑**
这仍然不适合我......不过感谢您的建议。

我的问题是上面的代码已经在 Razor 代码块中。这是我无法弄清楚的实际代码...

**编辑二号 - 下面的代码现在正在工作**

```
 @if (Model.Count() > 0)
    {
        foreach (var partner in Model)
        {
            <li>
                @Html.ActionLink(@partner.CustomerName, "Details", "Customer", new { id = Customer.AID }, null)<br />
                @partner.Street<br />
//this is what i cannot figure out!!
                @if(!string.IsNullOrEmpty(partner.Phone))
                    {
                        @partner.Phone@:<br />
                    }
                @partner.Distance<br />
            </li>
        }
    } 
```

我在嵌套块（if）之前加上@ 符号。
然后我必须用@分隔标记：然后它起作用了。

昨天，当我尝试使用嵌套的剃刀代码块时，似乎出现了编译器错误，因为我在它前面加上了一个 @。所以现在我比以往任何时候都更加困惑。

事实上......如果我试图用这样的引号包围我的@partner.Phone......`"@partner.Phone"@:</ br>`我会得到另一个编译器错误。Razor 在工作时很棒，但当它不工作时会很混乱。

赛斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T14:26:32.440

如果不做内联。

```
@if(!string.IsNullOrEmpty(Model.CustomerUrl))
{
    <a href="@Model.CustomerUrl">Click me</a>
} 
```

'纳夫说

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:16:36.890

```
 @if (Model.Count() > 0)
 { 
```

大概在这一行之前你有 html 显示，所以为了表示你正在使用代码，你需要 @ 符号。

```
 foreach (var partner in Model)
    { 
```

您已经在代码块中，所以 @ 符号在这里不起作用。

```
 <li> 
```

通过使用 html 标记，razor 意识到您正在再次显示 HTML。这里的所有内容都假定为 HTML。如果您想告诉 Razor 您在此处有代码，则需要使用 @ 符号来表示代码。

```
 @if(!string.IsNullOrEmpty(partner.Phone))
            {
                @partner.Phone@:<br />
            } 
```

这是正确的，因为您需要告诉 Razor 您再次使用代码。请注意，如果此 if 直接位于您的列表标记之上，您将不会在此处使用 @ 符号，因为当您已经在代码中时，您不会使用 @ 符号。

“@partner.Phone”出于同样的原因不起作用

```
if(something)
    "" 
```

在 C# 中不起作用。您正在代码中创建一个对象而不使用它。

希望这有助于解释它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T14:30:03.130

您会在 Internet 上找到关于条件输出和 View 的建议之一，即不应将两者混在一起。如果您需要根据某些条件显示某些内容，那么您应该创建一个 HTML Helper。但是，为了回答您的问题，您可以做什么（如果您不想打扰助手）是这样的：

```
@if (!String.IsNullOrWhitespace(Model.CustomerUrl))
{
    <p class="customerLink links">
        <a href="@Model.CustomerUrl">@Model.CustomerName</a>
    </p>
} 
```

# django - 使用 sendmail 发送电子邮件 - django

> ID：10450748
> 
> 赞同：1
> 
> 时间：2012-05-04T14:24:35.783
> 
> 标签：django, email

[我用这个片段](http://djangosnippets.org/snippets/1864/)设置了`sendmail`电子邮件后端

我打开外壳并运行（使用实际的电子邮件帐户）：

```
from django.core.mail import send_mail

send_mail('Subject here', 'Here is the message.', 'from@example.com',
    ['to@example.com'], fail_silently=False) 
```

之后，控制台只打印一个：

> 1

没有错误消息或任何东西......但电子邮件永远不会到达另一端......

还有什么我需要配置的吗？

谢谢，

* * *

从我的托管服务提供商处请求邮件服务器的错误日志并看到：

```
 send_to_gateway router failed to expand "${perl{mailtrapheaders2}}": 
 Undefined subroutine &main::mailtrapheaders2 called.\n` 
```

他们仍在试图弄清楚：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:31:33.647

在片段代码中：

```
def send_messages(self, email_messages):
    """
    Sends one or more EmailMessage objects and returns the number of email
    messages sent.
    """ 
```

它返回一个变量，该变量`num_sent`为实际发送的每封邮件递增。这是`1`您在控制台中看到的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:38:13.677

可能问题出在您的邮件服务器上。sendmail 连接到邮件服务器并告诉他“接收这封邮件并将其发送到地址 X”。如果邮件服务器正在工作，它会说 OK，然后尝试将其发送到该地址 - 如果在发送邮件服务器错误期间出现问题并且它没有发送到 Django。

检查你的邮件服务器日志，相信你会在那里找到“为什么主邮件没有送达”的答案。

# c# - 您可以从另一个线程访问 UI 元素吗？（不设置）

> ID：10450750
> 
> 赞同：20
> 
> 时间：2012-05-04T14:24:43.610
> 
> 标签：c#, wpf, multithreading

我在 google/here 上看到了很多关于从另一个线程更新 UI 元素的线程。

如果我只想获取复选框的值怎么办？

我能做到这一点而不必做任何特别的事情吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-04T14:26:35.407

**编辑**：看来我必须收回我之前写的东西。尝试了以下方法：

添加了一个名为`myTextBox`并尝试检索`Text`属性值的文本框：

```
Thread t = new Thread(
    o =>
    {
        Thread.Sleep(2000);                    
        string value = myTextBox.Text;
        Thread.Sleep(2000);
    });
t.Start(); 
```

似乎应用程序（WPF）在 2 秒后崩溃。使用调度程序工作：

```
Thread t = new Thread(
    o =>
    {
        Thread.Sleep(2000);
        myTextBox.Dispatcher.BeginInvoke(
            (Action)(() => { string value = myTextBox.Text; }));
        Thread.Sleep(2000);
    });
t.Start(); 
```

**因此，在从 GUI 组件读取值时，您仍然需要通过调度程序线程，至少在 WPF 中是这样。**

**第二次编辑**：这会变得更好。显然重复经典 WinForms 的实验表明它可以在`Text`不使用`Invoke/BeginInvoke`. 有趣的是，似乎设置属性也可以正常工作（没有调用），尽管我敢打赌它不是线程安全的，并且应用程序不会出于某种原因抱怨。

**底线**：在任何情况下，在与来自其他线程的 GUI 组件交互时使用调度程序都是一个好主意，因为它确保读/写被序列化到单个线程，因此您没有线程安全问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T16:28:19.737

> 您可以从另一个线程访问 UI 元素吗？（不设置）？

**不。**

这是交易。UI 元素有非常严格的线程亲和性要求。这意味着您只能从托管它的线程访问该元素。这包括各种访问，包括简单读取。¹

它对于简单的属性获取器可能工作得很好，但其感知的安全性将是特定控制实施方式的意外结果。由于`Control`实例具有线程亲和性，它们可能会使用线程本地存储技术来保存它们的一些状态，当然，这些状态与不同的线程不兼容。或者，如果您尝试读取的值处于半生不熟的状态怎么办？由于写入可能发生在您无法控制的代码中，因此无法同步对该读取的访问。这仍然忽略了可能出现的微妙的内存屏障问题。

同样，如果它看起来有效，那么将其归为意外。从线程访问 UI 元素而不是从线程访问它们是灾难的根源。事情可能会出人意料地失败。

* * *

¹*这条规则很少有例外。使用这些`ISynchronizeInvoke`方法就是这样的一个例外。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T14:27:17.170

你可以但严格来说它不是线程安全的。例如，如果属性 Get 代码包含多个操作，则 UI 线程可能会在 Get 操作的中途同时进行操作，从而导致意外结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T14:27:15.517

只需像往常一样读取值。仅要更新控件，您需要切换到 GUI 线程。

# java - 下载最新的 jar 文件

> ID：10450758
> 
> 赞同：1
> 
> 时间：2012-05-04T14:25:12.473
> 
> 标签：java, maven, jar

我有一个 jar 文件列表。我想检查是否有任何新版本可用。一种方法是一一检查。我想知道是否还有另一种更短的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:29:09.950

如果这个问题真的与 Maven 相关，这可以通过使用[versions-maven-plugin](http://mojo.codehaus.org/versions-maven-plugin/examples/display-dependency-updates.html)来实现。进入您的项目并在命令行上执行以下操作：

```
mvn versions:display-dependency-updates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:28:39.267

看看[常春藤](http://ant.apache.org/ivy/)

Apache Ivy 为 Apache Ant 构建文件带来了 Apache Maven™ 的依赖管理优势

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:33:22.103

对于 maven，使用 maven-versions-plugin 查看是否有新版本的依赖项可用。

```
mvn versions:display-dependency-updates 
```

# c# - 如何访问应用程序文件夹中的项目

> ID：10450759
> 
> 赞同：0
> 
> 时间：2012-05-04T14:25:27.163
> 
> 标签：c#, windows-8

在 Windows 8 Developer Preview 中有一个“应用程序”文件夹，其中包含所有 Metro 和桌面应用程序。我发现这个文件夹仍然存在于 Windows 8 Consumer Preview 中。如何使用 C# 读取此文件夹中的所有元素？

文件夹是：

```
%­windir%\explorer.exe shell:::{4234d49b-0245-4df3-b780-3893943456e1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:29:34.657

你有一个教程可以在这个 URL 中访问 Win8 中的应用程序文件夹：

[http://justinangel.net/ReverseEngineerWin8Apps](http://justinangel.net/ReverseEngineerWin8Apps)

# delphi - Delphi XE2 DataSnap REST - 当我尝试下载大文件时出现“内存不足”

> ID：10450765
> 
> 赞同：3
> 
> 时间：2012-05-04T14:25:44.353
> 
> 标签：delphi, rest, delphi-xe2, datasnap

我在 Delphi XE2 中创建了一个简单的 DataSnap REST 服务器，并且我有一个方法可以返回一个 TStream 对象来传输文件。这很好用，但是当我尝试下载一个大文件（~2,5GB）时，我得到了一个

> “内存不足”

服务器端的错误消息。

我想通过互联网浏览器（*[http://localhost:8080/datasnap/rest/TServerMethods1/GetFile](http://localhost:8080/datasnap/rest/TServerMethods1/GetFile)*）下载文件。

休息服务可以返回大文件吗？

我阅读了这个[问题](https://stackoverflow.com/questions/8892334/delphi-xe2-datasnap-download-file-via-tstream-with-progress-bar)并尝试了当我使用小文件时效果很好的解决方案。

这是我的简单代码：

```
function TServerMethods1.GetFile: TStream;
var
  FileStream: TFileStream;
begin
  FileStream := TFileStream.Create('d:\file.exe', fmOpenRead);
  Result := FileStream;
end; 
```

如何通过 Internet 浏览器从 REST 服务器下载大文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:43:16.193

您的函数的结果是`TStream`，尝试增加应用程序的内存量[如何使我的 32 位 Delphi 应用程序在 64 位窗口上使用 4gb 内存（通过 Wow64.exe）？](https://stackoverflow.com/questions/1849344/how-can-i-enable-my-32-bit-delphi-application-to-use-4gb-of-memory-on-64-bit-win)

无论如何，您正在加载大量数据。您应该创建一个函数，以更小块的形式为您提供结果。

# iphone - 带有音乐的 iPhone sdk 闹钟应用程序

> ID：10450766
> 
> 赞同：2
> 
> 时间：2012-05-04T14:25:53.367
> 
> 标签：iphone, objective-c, ios, ipad, iphone-4

我想创建一个闹钟应用程序。据我所知，我们必须使用 NSLocalNotification 播放音乐 30 秒，正如苹果所说，声音文件必须在通知的主包中。如何播放音乐库中的声音文件？App store 上的大多数闹钟应用都在使用音乐库？任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:29:20.980

构建了这样一个应用程序后，答案是你不能从库中播放通知声音，只有当他们确认通知并启动你的应用程序时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:24:21.663

做一个短期或夜间警报应用程序的另一种方法是在 UIBackgroundModes 中声明你的应用程序是一个背景感知音频应用程序，并开始使用音频队列或 RemoteIO 音频单元在应用程序中播放静音。然后，只需在适当的时间将您的警报声混合到 PCM 采样中即可。您可能必须首先使用 AVFoundation 将音乐库中的音乐转换为未压缩的样本。

这种技术会比使用通知更快地消耗用户的电池，并且如果用户使用音乐播放器（等）或其他音频应用程序可能会被禁用，因此不应该用于紧急或长时间离开的警报及时。

# php - 具有不同表的多个 MySQL 查询合二为一

> ID：10450768
> 
> 赞同：0
> 
> 时间：2012-05-04T14:25:56.827
> 
> 标签：php, mysql

所以我正在开发一款游戏，如果可能的话，我想让我的代码更简单一些。我有两张表需要查询，一张表我想从中返回用户 ID，另一张表进行一些背景检查。

> 统计表：用户 ID | 黄金 | 攻击 | 防御| 奖金 | ...
> 
> 日志表：logid | 攻击者 | 被攻击 | 时间 | ...

这是我可能会遇到的两个问题：

> SELECT userid AS user FROM stats WHERE ($attack + $bonus) > (defense + bonus) ORDER BY gold DESC LIMIT 1
> 
> 从日志中选择计数（*）作为计数 WHERE 攻击者 = $id AND 被攻击 = 用户 AND 日期 > $time - 86400

$变量当然是php变量，第二个查询中的'user'指的是第一个查询中的“AS用户”。我的目标是返回我可以攻击的最高金币的人的用户 ID，我在最后一天攻击了不到 5 次。我不太确定如何加入这两者，但如果可能的话，我想加入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:34:31.180

试试这个（未测试）：

```
SELECT s.userid AS user 
FROM stats s
LEFT JOIN logs l ON (l.attacked = s.userid) // attacked is the one I want to get from stats with the highest gold
WHERE ($attack + $bonus) > (s.defense + s.bonus) 
    AND l.attacker = $id
    AND l.date > $time - 86400
ORDER BY s.gold DESC LIMIT 1 
```

# ios - 架构 i386 的未定义符号（是的，再次...）

> ID：10450770
> 
> 赞同：0
> 
> 时间：2012-05-04T14:25:58.073
> 
> 标签：ios, objective-c++, undefined-symbol

我对这个问题越来越疯狂！

我得到的错误之一是下一个：

```
Undefined symbols for architecture i386:
  "_zipOpen", referenced from:
      -[ZipArchive CreateZipFile2:] in ZipArchive.o 
```

当我调用该方法时代码的平静（我在那里使用objective-c ++，以防万一）：

```
@implementation ZipArchive
...
-(BOOL) CreateZipFile2:(NSString*) zipFile
{
    _zipFile = zipOpen( (const char*)[zipFile UTF8String], 0 );
} 
```

在`.h`我拥有的文件中

```
zipFile _zipFile; 
```

在其他地方：

```
typedef voidp zipFile; 
```

在哪里

```
typedef void *voidp; 
```

好的，我知道它可能不应该工作。但是之前效果很好。随着我为单元测试添加的新目标，事情发生了变化。

我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:51:03.760

好的，从错误

```
Undefined symbols for architecture i386:
  "_zipOpen", referenced from:
      -[ZipArchive CreateZipFile2:] in ZipArchive.o 
```

我们可以看出 zipOpen() 函数的原型被声明为 C 函数 ( `extern "C"`)，因为它的名称没有被破坏。

因此，出现此错误的原因基本上有 2 个选项：

*   zipOpen() 实现根本没有与您的程序链接（忘记将文件/库添加到您的构建中，#ifdef'd out 等）
*   出于某种原因，zipOpen() 实现正在获取 C++，而不是 C 链接。也许您不小心将它放在了命名空间中，或者 .cpp 文件没有包含`extern "C"`函数声明的标头。

根据提供的信息，我们不能说它是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:48:34.363

检查头文件中的函数声明是否等于实现文件中的函数原型

# vba - 转发电子邮件并附加其他文本，而不会丢失原始消息的格式

> ID：10450771
> 
> 赞同：1
> 
> 时间：2012-05-04T14:26:01.530
> 
> 标签：vba, email, outlook

我正在尝试转发收到的电子邮件并在其上附加一条附加消息。我编写的以下代码有点这样做，但是我丢失了原始消息的所有格式。有什么方法可以保持原始消息的格式，并且能够在电子邮件中附加额外的测试？

我的代码：

```
Sub xForward()
    myMessage = "You recently requested access to the table.   We are requiring all requests to complete a mandatory training session." & vbCr & vbCr & "Thank you, " & vbCr & "Ricky"

    Dim itmOld As MailItem, itmNew As MailItem

    Set itmOld = ActiveInspector.CurrentItem
    Set itmNew = itmOld.Forward

    itmNew.Body = myMessage & vbCr & vbCr & itmOld.Body
    itmNew.Subject = "Access Request"
    itmNew.Display

    Set itmOld = Nothing
    Set itmNew = Nothing
End Sub 
```

如果我不更新 itmNew 的正文，那么我将保持原始消息的格式。在我更新 itmNew.Body 的那一刻，itmOld.Body 是用简单的文本编写的，我失去了所有的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:43:14.863

我认为 JP 的评论为您指明了正确的方向，但我认为您的问题是由于对 HTML 的了解有限。这不是关于 HTML 的完整教程，但我希望它能帮助您入门。

如果您使用 Debug.Print 将 .HTMLBody 输出到即时窗口，您将看到如下内容：

> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http ://www.w3.org/1999/xhtml"> <head>
> 
> 这里有很多东西
> 
> </head> <body>
> 
> 这里有很多东西
> 
> </body> </html>

如果创建消息的包支持 HTML 的 XML 版本，您只会得到“<!DOCTYPE html ...”。您应该看到的最小值是：

> <html><head> 这里有很多东西 </head><body> 这里有很多东西 </body></html>

如果你把额外的信息放在前面或后面，那么你就违反了 HTML 的规则。会发生什么将取决于收件人的电子邮件包的宽容程度。为了符合 HTML 的规则，您必须将额外的消息放在“<body>”和“</body>”之间的某个位置。

如果您查看几条消息，您会发现它们的差异有多大。有些是白底黑字，有些是黑底白字，中间有各种变化。无论消息的作者做了什么，您的消息都必须是可读的。我的建议是您在顶部创建一个单元格表，然后设置字体和背景颜色。尝试以下方法，然后根据您的要求进行调整：

```
Dim AddedMsg As String
Dim Pos As Long

' Create message to be inserted
' =============================
' Start a table with white background and blue text
AddedMsg = "<table border=0 width=""100%"" style=""Color: #0000FF"" bgColor=#FFFFFF>"
' Add row with single cell
AddedMsg = AddedMsg & "<tr><td><p>Cool stuff you must see!!</p></td></tr>"
' End table
AddedMsg = AddedMsg & "</table>"

' Code to add message once you have checked there is an HTML body    
'================================================================
Pos = InStr(1, LCase(.HTMLBody), "<body")
If Pos = 0 Then
  ' This should be impossible.
  Call MsgBox("<Body> element not found in HTML body", vbCritical)
  ' Code to handle impossible situation
End If
Pos = InStr(Pos, .HTMLBody, ">")
If Pos = 0 Then
  ' This should be impossible.
  Call MsgBox("Terminating > for <Body> element not found in HTML body", vbCritical)
  ' Code to handle impossible situation
End If
'Insert your message
.HTMLBody = Mid(.HTMLBody, 1, Pos) & AddedMsg & Mid(.HTMLBody, Pos + 1) 
```

# 3d - 卡在重新创建由 FiftyThree 完成的纸张旋转效果的最后一步

> ID：10450774
> 
> 赞同：2
> 
> 时间：2012-05-04T14:26:19.687
> 
> 标签：3d

查看纸张旋转的最终效果： [Paper By FiftyThree](http://vimeo.com/37254322)

您可以看到，在任何旋转点，只有两条边在旋转。我已经完成了一个引导演示，其中计算了论文的位置： [jsfiddle](http://jsfiddle.net/colintoh/2EwfS/2/)

我将这种定位建立在假设纸张实际上位于三角形上并且正在旋转的纸张实际上在三角形的尖端处旋转的假设上。

![报纸正面图](../Images/ad34790bce26fa885dce05647fcdcfb3.png) ![论文底视图](../Images/a21ddf53374488ba83253decee03bbd0.png)

当纸沿 x 轴移动时，它沿三角形滑动。您可以通过在演示中滑动滑块来查看效果。但是，纸张的两侧必须一起旋转，才能达到理想的旋转效果。我如何找到 x 定位的偏移和旋转侧的旋转角度之间的相关性？

以下几点我希望能有所帮助：

*   两个旋转边形成的三角形始终是等腰三角形
*   除两个旋转边外，所有边的角度始终保持不变。只有它们的 (x,z) 位置发生了变化。

# sql-server - 从 SQL Server 表中批量删除数据

> ID：10450775
> 
> 赞同：1
> 
> 时间：2012-05-04T14:26:21.467
> 
> 标签：sql-server, batch-file, sql-delete

如何使用批处理从 SQL Server 表中删除数据。

我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:31:52.473

您的意思是将您的 sql 脚本配置为批处理作业吗？如果是，则在脚本中编写您的 sql 查询，例如

```
Filename: sqldelete.sql

delete from my_table where <some condition>;
GO 
```

创建一个批处理文件`.bat`并在那里调用你的sql脚本

```
sqlcmd -s <server name> -d <db name> -i sqldelete.sql 
```

有关更多选项：在命令提示符下`sqlcmd`运行命令`sqlcmd /?`

根据您的需要配置此`.bat`文件以按计划运行

如果您想知道如何在 Windows 任务计划程序中安排任务，请查看 @ [http://support.microsoft.com/kb/308569](http://support.microsoft.com/kb/308569)（这是针对 WINXP 的）。

# python - 由于旧的 ipv6 配置，Python 总是返回网络无法访问

> ID：10450776
> 
> 赞同：4
> 
> 时间：2012-05-04T14:26:26.017
> 
> 标签：python, networking, archlinux

我目前使用 python 发出的任何请求都会出现 Network is unreachable 错误。无论我使用的是 urllib 库还是 requests 库。

经过更多研究后，它可能是由不正确的设置 ipv6 隧道引起的，该隧道似乎仍然处于活动状态：

```
$ ip -6 addr show  
$ ip -6 route
default dev wlan0  metric 1 
```

一些背景：我今天正在运行 Archlinux 并更新了系统，尽管今天似乎没有任何与 python 相关的特殊更新。我也在 virtualenv 下运行它，但是其他 virtualenvs 和在 virtualenv 之外使用我的 Python 也有同样的问题。
我正在使用 VPN，但在没有 VPN 的情况下，我也会遇到同样的错误。我也试过重启电脑，哈哈，这通常有助于解决任何问题，哈哈，但也没有帮助。
我感觉它可能与 Archlinux 有关，但我不确定。

这是我之前尝试设置 ipv6 隧道的方法：

```
sudo modprobe ipv6
sudo ip tunnel del sit1
sudo ip tunnel add sit1 mode sit remote 59.66.4.50 local $ipv4
sudo ifconfig sit1 down
sudo ifconfig sit1 up
sudo ifconfig sit1 add 2001:da8:200:900e:0:5efe:$ipv4/64
sudo ip route add ::/0 via 2001:da8:200:900e::1 metric 1 
```

还使用了这个命令：

```
ip -6 addr add 2001:0db8:0:f101::1/64 dev eth0 
```

在我的 /etc/systemctl.conf 中删除 ipv6 行后更新 3，一些 url 开始工作：

```
>>> urllib2.urlopen('http://www.google.com')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 101] Network is unreachable>
>>> urllib2.urlopen('http://baidu.com')
<addinfourl at 27000560 whose fp = <socket._fileobject object at 0x7f4d1fed5e50>> 
```

这是来自 ipython 的错误日志。

```
In [1]: import urllib2

In [2]: urllib2.urlopen('http://google.com')
---------------------------------------------------------------------------
URLError                                  Traceback (most recent call last)

/home/samos/<ipython console> in <module>()

/usr/lib/python2.7/urllib2.py in urlopen(url, data, timeout)
    124     if _opener is None:
    125         _opener = build_opener()
--> 126     return _opener.open(url, data, timeout)
    127 
    128 def install_opener(opener):

/usr/lib/python2.7/urllib2.py in open(self, fullurl, data, timeout)
    398             req = meth(req)
    399 
--> 400         response = self._open(req, data)
    401 
    402         # post-process response

/usr/lib/python2.7/urllib2.py in _open(self, req, data)
    416         protocol = req.get_type()
    417         result = self._call_chain(self.handle_open, protocol, protocol +
--> 418                                   '_open', req)
    419         if result:
    420             return result

/usr/lib/python2.7/urllib2.py in _call_chain(self, chain, kind, meth_name, *args)
    376             func = getattr(handler, meth_name)
    377 
--> 378             result = func(*args)
    379             if result is not None:
    380                 return result

/usr/lib/python2.7/urllib2.py in http_open(self, req)
   1205 
   1206     def http_open(self, req):
-> 1207         return self.do_open(httplib.HTTPConnection, req)
   1208 
   1209     http_request = AbstractHTTPHandler.do_request_

/usr/lib/python2.7/urllib2.py in do_open(self, http_class, req)
   1175         except socket.error, err: # XXX what error?
   1176             h.close()
-> 1177             raise URLError(err)
   1178         else:
   1179             try:

URLError: <urlopen error [Errno 101] Network is unreachable> 
```

我可以从网络浏览器正常访问 google.com，而且我很确定网络是可以访问的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:43:42.597

你确定你没有使用任何 http 代理服务器来上网吗？

尝试将浏览器中的网络设置更改为无代理，并检查它是否仍连接到互联网。

如果您使用代理（假设代理地址为[http://yourproxy.com](http://yourproxy.com)），请尝试执行此操作以检查是否可以解决问题。

```
import urllib2
proxy = urllib2.ProxyHandler({'http': 'yourproxy.com'})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
urllib2.urlopen('http://www.google.com') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:02:17.090

最重要的是我通过放回文件的备份来编辑我的 /etc/hosts 文件，一切又开始工作了。我这样做是为了绕过伟大的防火墙来手动设置facebook等的ipv6地址，所以它仍然使用那些ipv6地址......

经验教训：不要工作太多，不要匆忙做事。总是试着去理解你在做什么，并写下你到底做了什么。所以你有办法倒退。

在 /etc/systemctl.conf 中删除以下行似乎有点帮助：

```
net.ipv6.conf.all.forwarding = 1 
```

它最终没有帮助，仍然收到错误 Network is unreachable for google.com 尽管它可以在我的浏览器中访问：

```
>>> urllib2.urlopen('http://baidu.com')
<addinfourl at 27000560 whose fp = <socket._fileobject object at 0x7f4d1fed5e50>>
>>> urllib2.urlopen('http://www.google.com')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 101] Network is unreachable> 
```

# python - 在python中搜索和编写多个字符串的行？

> ID：10450779
> 
> 赞同：-3
> 
> 时间：2012-05-04T14:26:30.523
> 
> 标签：python

```
def info(): #Here you can write your password and username.
 Username = raw_input ("Username: ")
 Password = raw_input ("Password: ")
 print("")
 for line in open('/home/hello/Usernames.txt'):
  if Username == Username in line: #Checks if username is available.
   print ("Username is already taken!\n")
   info()
  else: 
   User = open("/home/hello/Usernames.txt", "w") #Registers username.
   User.write(Username)
   Psw = open("/home/hello/Passwords.txt", "w") #Registers password.
   Psw.write(Password)
   print ("You have succsesfully registered!") #If you managed to register.
   break 

info() 
```

这是一个可以注册用户名和密码的帐户注册器。但是我需要一些帮助......如何让它检查文件中的多行字符串，以及如何让程序在我注册时在文本文件中写入新的字符串而不替换旧字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:41:11.193

以附加 ( ) 模式打开文件，`'a'`而不是写入 ( `'w'`) 以截断文件。

# android - 带有视图的 Android 选项卡，仍然是动态的

> ID：10450782
> 
> 赞同：0
> 
> 时间：2012-05-04T14:26:34.803
> 
> 标签：android, oop, dynamic, tabs

我想避免在 android 选项卡中使用意图。所以我正在做视图，但我想要一个关于大型项目如何做到这一点的例子。

主要是因为我不仅显示在视图 xml 上配置的静态信息，而且当用户与视图中的按钮交互时，我会从服务器中提取大量信息。这个视图实现的代码看起来真的很长而且很混乱，而不是当每个视图都在一个单独的活动中时。

我想看看其他人如何以一种整洁有序的方式分离他们的方法。

这个例子`hello-tabwidget`离我要找的还很远，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:42:01.050

使用取景器。它就像文本切换器。您将布局放在 viewflipper 内，并在选择选项卡时触发它。

[http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/](http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/)

# c# - 我们真的可以在 windows 窗体中以表格形式显示数据吗？

> ID：10450790
> 
> 赞同：0
> 
> 时间：2012-05-04T14:26:57.013
> 
> 标签：c#

我想要4列。

```
col 1: contains a plain string
col 2 :contains a button
col 3: contains a text box
col 4 : contains a combobox 
```

这些行将在运行时创建（C#）。
我已经尝试过使用 DataGridView，但这看起来不像 asp.net 中的普通表。
甚至尝试使用 TableLayoutPanel 但我也不能。
有人会以任何方式（TableLayoutPanel 或 DataGridview）向我提供代码吗？

谢谢。

# mysql - 具有 0 个已分配记录的用户的 mySQL JOIN 查询

> ID：10450799
> 
> 赞同：0
> 
> 时间：2012-05-04T14:27:09.230
> 
> 标签：mysql

我有 2 张桌子，选民和用户。我想在所有用户的用户信息旁边显示分配的选民记录总数。

此时，这种查询可以工作——它显示分配了任意数量记录的用户的总数，但它不显示在投票者表中分配了 0 条记录的用户。

选民记录分配给具有字段 voter.owner 的用户。这是我目前拥有的：

```
SELECT u.id
    ,u.admin
    ,u.active
    ,u.name
    ,u.email
    ,u.last
    ,if(count(v.owner) is NULL,'0',count( v.owner )) as assigned 
from user u 
left join voter v 
    on u.id = v.owner 
where u.cid = '$cid' 
order by u.id asc 
```

关于如何显示所有用户的任何建议，即使是那些不拥有和选民记录的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:27:36.797

```
if(count(v.owner) is NULL,'0',count( v.owner )) as assigned 
```

应该...

```
SUM(if(v.owner is NULL,0,1) as assigned 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-04T14:45:53.827

对于这个问题，Left-Join 是错误的方法。解决方案是像这样使用子选择：

```
SELECT `user.id`, `user.admin`, `user.active`, `user.name`, `user.email`, `user.last`,
    (SELECT COUNT(*) FROM voter WHERE `user.id` = voter.owner)
FROM `user` 
WHERE user.cid = '$cid'
ORDER BY `user.id` ASC 
```

# architecture - 重新生成查询数据库

> ID：10450806
> 
> 赞同：1
> 
> 时间：2012-05-04T14:27:27.177
> 
> 标签：architecture, cqrs, maintainability, event-sourcing

我拥有的网站有一个运行良好的简单 CQRS 架构。一个事件被不同的订阅者发布和接收，其中一个使报告数据库保持同步[在 RavenDb 中]。

例如，我的报告数据库已损坏/丢失。使用事件溯源，我可以重播事件并重建报告数据库，但是我 [当前] 不使用事件溯源；我有一个简单的 nHibernate 持久化到关系存储。解决方案是创建一个“重新生成”类型的脚本，该脚本基本上将基于关系存储发送所有事件（例如，PersonCreatedEvent 后跟 30xPersonLikedBlogPostEvent 等）？它本质上与事件源所做的事情相同，但事件是从关系模型中推断出来的。

可维护性和 DR 显然很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T14:21:13.820

如果您存储了发送到服务器的所有命令（例如，在日志中），您可以从第一个命令到最后一个命令将所有命令发送到总线，并且您可以重现所有查询端。那就是命令采购。使用命令溯源，您可以在准备就绪时轻松进行事件溯源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:23:23.027

如果不存储事件，则无法进行再生。如果您使用关系存储仅生成“已创建”事件，您将无法从这种“重新生成”中获得任何好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:14:01.297

您无需实施完整的事件溯源解决方案即可实现这一目标。如果您只是将所有事件存储在事件日志中，则可以根据需要检索和重播它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:18:35.683

我认为没有一个简单/快速的解决方案。如果您要将数据从关系源迁移到事件源，这实际上是您需要做的。正如您所说，您唯一能做的就是为每个实体脚本以合理的顺序编写事件（即 CreatedEvent 然后是您的其他状态更改事件）。但是当您捕获这些事件时，我会将它们存储起来，以便您以后可以重新运行它们。

# jquery - 通过使用 jQuery 解析 sessionID 从 WCF 服务访问会话变量

> ID：10450809
> 
> 赞同：4
> 
> 时间：2012-05-04T14:27:33.413
> 
> 标签：jquery, asp.net, wcf, session

是否可以使用 SessionID 从 WCF 服务访问 Asp.net 会话变量。

我的服务是从 jQuery 调用的，我的想法是使用 jQuery 将 sessionID 解析为服务，然后设置所需的变量，但我找不到这样做的方法。

这是我的 jQuery 调用

```
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: baseURL,
    data: JSON.stringify(data),
    dataType: "json",
    success: function (data) { 
```

有谁知道这是否可能或建议另一种方式设置会话相关变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:59:53.273

来自浏览器的 jQuery 请求将已经包含会话 cookie，因此如果您在 ASP.NET 兼容模式下运行 WCF 服务，它已经可以直接访问当前`HttpContext`，这意味着您可以从那里访问会话状态。以下是在 WCF 服务上启用此集成的方法：

首先，将以下属性添加到您的服务类：

```
[AspNetCompatibilityRequirements(RequirementsMode=AspNetCompatibilityRequirementsMode.Allowed)] 
```

接下来，将以下内容添加到您的服务 .config：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
    <!-- whatever else you already have -->
</system.serviceModel>` 
```

完成此操作后，您可以访问当前`HttpContext`以获取会话状态，如下所示：

```
public void MyServiceOperation()
{
    string myStoredValue = HttpContext.Current.Session["MyStoredValue"];

    // whatever
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:26:33.403

您可以将会话对象存储在数据库本身中，以允许您在不同的 Web 应用程序或平台中访问。

# html - IE7 中的 CSS 问题

> ID：10450811
> 
> 赞同：0
> 
> 时间：2012-05-04T14:27:50.493
> 
> 标签：html, css, internet-explorer-7

我的网页遇到了最奇怪最烦人的问题。它位于 [2012sbc.com/demo][1]。如果您单击宣传材料的链接，然后单击其中一个下载，然后刷新宣传材料页面，它使用来自完全不同的 div 的 a:visited、a:hover 和 a:active 属性，即导航。

我试图为页面上的链接设置一个全新的 div，然后这些属性会干扰我的导航！！我不能只是喜欢，设置一个类，然后设置另一个类，它们相互交互，我不知道为什么。当然，它只发生在`IE7`.

有人可以检查一下并告诉我我做错了什么吗？我完全失去了！

编辑：屏幕截图位于：[https ://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/screenshot.gif](https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/screenshot.gif)

我个人并不关心 IE7，但那是我们的客户使用的，所以我必须让它工作。

第二次编辑：这些东西都没有帮助，还有其他人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:38:57.650

a:visited for main-menu 没有意义。如果用户访问了菜单中的多个项目怎么办？你想把它画成访问过的样子吗？这是一个菜单，而不是一个普通的链接。

但是，如果您仍然想要这种行为，那么：

在您声明的 oneColFixCtrHdr.css 中：

```
A:visited {
    BACKGROUND-IMAGE: url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/darkredbar.jpg)
} 
```

您应该像这样确定范围：

```
.oneColFixCtrHdr #stripes UL A:visited { 
        BACKGROUND-IMAGE: url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/darkredbar.jpg)
    } 
```

为了将它应用到您的主菜单上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:22:51.960

尝试这个，

```
.roundside a {color:#990000; font-weight:bold}
.roundside a:visited,
.roundside a:hover,
.roundside a:active{ color: #F00; font-weight:normal; } 
```

希望对你有所帮助:)

# iphone - 带有不存在项目的“NSUnknownKeyException”消息

> ID：10450814
> 
> 赞同：0
> 
> 时间：2012-05-04T14:27:57.517
> 
> 标签：iphone, ios5, xcode4.3

运行应用程序时收到此消息：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<examSelf 0x6854ea0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key examQBodyTextView.' 
```

有趣的是我从代码中删除了所有与“examQBodyTextView”相关的东西，因为它们不再需要了。

注意：我正在使用故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:31:53.407

情节提要或其他地方的 XIB 之一具有对`examQBodyTextView`.

当视图实例化时它会爆炸。

浏览您的 XIB 并寻找一个对象，很可能是一个文件所有者，当您右键单击它时，它的连接旁边有一个黄色三角形。断开它，你应该没问题。

# php - 使用内部连接查找前 3 个值

> ID：10450818
> 
> 赞同：2
> 
> 时间：2012-05-04T14:28:14.973
> 
> 标签：php, mysql

我有一个名为 users_preferred_zips 的表，如下所示：

```
 username  |  price  |   zip   |  program  |  active
-----------+---------+---------+-----------+---------
 joe       |    5    |  92108  |  dog      |    1
 tom       |    7    |  92108  |  dog      |    1
 mary      |    5    |  92108  |  dog      |    1
 paul      |    6    |  92108  |  dog      |    1
 ron       |    6    |  92108  |  dog      |    1 
```

我有另一个名为 users 的表，看起来像这样

```
 username  |  balance
-----------+----------
 joe       |    10
 tom       |    12
 mary      |    2
 paul      |    14
 ron       |    3 
```

我需要一个查询来从表中提取和求和表中的 3 个最高值，其中`users_preferred_zips`表中的值大于或等于 5。我知道我需要做一些事情，但下面的查询不起作用。这是我的查询：`username``users``balance``inner join`

```
SELECT SUM(price) AS SumOfTopValues
FROM (
    SELECT users_preferred_zips . * , users.last_purchase, users.lesson_type, users.pref_acct_balance
    INNER JOIN users ON ( users_preferred_zips.username = users.username ) 
    WHERE users_preferred_zips.zip =  '92108'
    AND users_preferred_zips.program =  'dog'
    AND users_preferred_zips.active =  1
    AND users.pref_acct_balance >= '5'
    ORDER BY price DESC
    LIMIT 3
) AS sub 
```

因此，正确的查询将提取以下内容：

3 最高：

```
joe   |  5
tom   |  7
paul  |  6 
```

3 个最高值之和 = 18

我觉得这应该很简单，但我很难过！谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:34:16.230

您可以使用以下方法进行检查：

```
SELECT SUM(price) AS SumOfTopValues
FROM users_preferred_zips
WHERE username IN (
  SELECT username
  FROM users
  WHERE pref_acct_balance >= 5
) 
```

# android - Android服务器联系服务保持活跃

> ID：10450820
> 
> 赞同：1
> 
> 时间：2012-05-04T14:28:20.180
> 
> 标签：android, service, wakelock

所以我为我正在处理的应用程序提供服务。该服务每 20 秒与我的服务器联系一次，以查看是否有更新，并在有更新时提供通知。我在这里遇到了一些问题。

1）我的服务往往会在 30 分钟左右后消失。看起来android正在杀死它。我怎样才能让它一直活着？

2）正如你在我的代码中看到的，我的唤醒锁很奇怪。我需要在睡眠期间让它保持活动状态以检查通知，但如果我在等待 20 秒后获得唤醒锁，它就不起作用。所以现在它释放然后在计时器之前重新获取唤醒锁。这对电池等不利。有人知道更好的方法吗？

```
import java.io.IOException;
import java.net.UnknownHostException;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;

public class UpdateService extends Service {
    private boolean isRunning = true;
    String username, pass, outpt;
    String ns = Context.NOTIFICATION_SERVICE;

    int Notify_ID = 0;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);

        username = intent.getStringExtra("username");
        pass = intent.getStringExtra("pass");

        isRunning = true;
            Thread contact = new Thread(new Contact());
            contact.start();

        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        // Stop the Background thread
        isRunning = false;

    }

    private class Contact implements Runnable {

        public void run() {
            while (isRunning) {

            PowerManager mgr = (PowerManager) UpdateService.this
                    .getSystemService(Context.POWER_SERVICE);
            WakeLock wakeLock = mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                    "MyWakeLock");
            wakeLock.acquire();
            try {
                Thread.currentThread().sleep(20000);
                ServerContact server = new ServerContact("stuff i send to the server");
                outpt = server.connect();
                if (!outpt.equals("false")) {
                    handler.sendEmptyMessage(0);
                }

            } catch (UnknownHostException e) {
                System.err.println("cannot connect to host.");
            } catch (IOException e) {
                System.err.println("Server Contact ERROR!! ");
            } catch (InterruptedException e) {
                System.err.println("thread sleep interrupt ");
            }
            wakeLock.release();
            }

        }

        public Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                if (msg.what == 0) {
                    for (String item : outpt.split("\\s+")) {
                        Notify_ID++;
                        notifySys(item, Notify_ID);
                    }
                }
            }
        };
    }

    public void notifySys(String data, int id) {
        // id/name/location
        try {
            String[] content = data.split("/");
            int icon = R.drawable.wcicon;
            CharSequence tickerText = "Word Circle";
            long when = System.currentTimeMillis();

            Notification notification = new Notification(icon, tickerText, when);

            Context context = getApplicationContext();
            CharSequence contentTitle = content[2];
            CharSequence contentText = "It is your turn!";
            Intent go = new Intent(UpdateService.this, SomeClass.class);

            PendingIntent contentIntent = PendingIntent.getActivity(
                    UpdateService.this, 0, go, 0);

            notification.setLatestEventInfo(context, contentTitle, contentText,
                    contentIntent);
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            notification.defaults = Notification.DEFAULT_ALL;
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            mNotificationManager.notify(Notify_ID, notification);

        } catch (Exception e) {
            // TODO: handle exception
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:37:05.797

您所做的称为轮询，但您需要使用 C2DM 进行推送通知。[您可以在Google IO](http://www.google.com/events/io/2010/sessions/push-applications-android.html) 2010上观看此视频。您可以[在此处](http://code.google.com/p/chrometophone/source/browse/trunk/appengine/c2dm/com/google/android/c2dm/server/C2DMessaging.java)获取 C2DM 的示例代码。

# maven - 配置 maven-shade-plugin 以包含 src/main/webapp

> ID：10450821
> 
> 赞同：2
> 
> 时间：2012-05-04T14:28:20.553
> 
> 标签：maven, jetty, war, embedded-jetty, maven-shade-plugin

我正在处理一个简单的项目，webapp 目录位于标准位置（src/main/webapp）。出于某种原因，maven-shade-plugin 似乎没有将其包含在最终生成的 jar 中 - 默认情况下它只会包含工件 src/main/resources。我尝试使用以下配置，但没有运气：

```
<configuration>
 <artifactSet>
  <includes>
   <include>*</include>
   <include>*:*</include>
  </includes>
 </artifactSet>
</configuration> 
```

关于如何做到这一点而不必将 src/main/webapp 移动到 src/main/resources/webapp 的任何建议？

谢谢你。

欧根。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:49:56.517

您是否尝试使用资源路径更新构建部分？

```
<build>
        <resources>
            <resource>
                <directory>src/main/webapp</directory>
           </resource>
        </resources>
</build> 
```

编辑

正如已经说过的，遮荫的目的不是为了战包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T00:29:20.640

您需要将它放在 src/main/resources/webapp 中或明确指定适当的位置以便正确捕获它。烦人，但它有效。

对于那些问为什么做这种事情有意义的人，这是一个典型的 jar 设置，它带有像 Jetty 这样的嵌入式 Web 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T09:17:20.747

我使用资源插件将 webapp 移动到 classes 文件夹。

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>3.0.2</version>
    <executions>
        <execution>
            <id>copy-resources</id>
            <phase>compile</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>${basedir}/target/classes/webapp</outputDirectory>
                <resources>
                    <resource>
                        <directory>src/webapp/dist</directory>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这样，我可以将文件夹与我的 webapp 放在任何地方，定义目标目录并将其包含在我的阴影 jar 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:03:04.643

听起来您想将源打包到一个包中。存在一个[maven-source-plugin](http://maven.apache.org/plugins/maven-source-plugin/)它将创建一个包含源文件的 jar。此外，这通常在发布周期中完成。如前所述，maven-share-plugin 的意图是将 jar 文件打包在一起（它们的内容；关键字：ueberjar）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T15:13:28.883

我会使用战争插件[http://maven.apache.org/plugins/maven-war-plugin/faq.html#attached](http://maven.apache.org/plugins/maven-war-plugin/faq.html#attached)创建一个 webapp 项目的 jar。你已经设置了`<packaging>war</packaging>`吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T19:24:16.550

将 webapp 资源添加到 JAR 中有什么意义？这就像战争。

将您的包装类型更改为`war`，它将起作用。

# java - 我需要在 java 中检索 SQL Server 对象信息

> ID：10450824
> 
> 赞同：2
> 
> 时间：2012-05-04T14:28:25.000
> 
> 标签：java, sql-server

我需要从结构的角度从 SQL Server 检索信息

示例：我需要列出所有数据库、所有程序、程序中的所有参数、表中的所有列名、表列中的列类型。

这样做的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:41:29.660

有（至少）三种方式。

1.  使用 DatabaseMetaData 类。里面有很多，所以有关详细信息，请参阅 Java Docs。我相信这是首选方式，因为它是所有数据库引擎的标准。因此，如果您切换到不同的数据库引擎，它应该仍然可以工作，并且无论您是在使用这个数据库引擎还是其他数据库引擎，您所学到的如何使用它都将适用。

2.  对“information_schema”进行查询。基本上，这是一个包含有关数据库结构信息的数据库。它有列出所有表、所有列等的表。这是第二好的选择。information_schema 或多或少是跨数据库的标准。不幸的是，MS SQL Server 的实现并不是最好的。

3.  对“系统表”和/或“系统视图”进行查询。MS SQL Server 中有一组表，其中包含有关数据库结构的信息。与 information_schema 类似，但它特定于 MS SQL Server，因此包括不属于标准 SQL 的内容的元数据，例如计算字段和标识列。它也比 MS 的 information_schema 实现更完整和可靠。

对于非常一般的东西，比如数据库中有哪些表或给定表中有哪些列，information_schema 和系统表同样好用。但是，如果您还需要其他任何东西，MS 对 information_schema 的实施很快就会证明是不够的。我在 Web 上看到很多评论鼓励开发人员使用系统表而不是 information_schema。我不喜欢使用非标准的东西，因为代码本身和获得的经验都不可移植，但在这种情况下，我认为他们是对的：使用系统表。

但是 DatabaseMetaData 更好，如果它可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:33:25.657

查看[DatabaseMetaData](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html)接口

# java - 是否可以通过引用将变量传递给函数？

> ID：10450826
> 
> 赞同：0
> 
> 时间：2012-05-04T14:28:36.283
> 
> 标签：java, variables

> **可能重复：**
> [Java 是否通过引用传递？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

我需要修改传递给该函数中的函数的变量的内容。

类型是字符串。我想在使用 PlainDocument 扩展类的 insertString 函数时注入一个前面的字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:30:49.793

使用包装类：

```
public class Wrapper
{
    public String text;
}

// ...

public static void changeString(Wrapper w, String newText)
{
    w.text = newText;
} 
```

你可以像这样使用它：

```
Wrapper w = new Wrapper();
w.text = "old text";
changeString(w, "new text");
System.out.print(w.text); 
```

**输出：**

> 新文本

* * *

另请参阅此答案：[https ://stackoverflow.com/a/9404727/597657](https://stackoverflow.com/a/9404727/597657)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:31:50.043

简短的回答是否定的，但您始终可以使用中间对象“模拟”指针。

# php - Yii：如果我更改其名称，BELONGS_TO 关系将返回 null

> ID：10450829
> 
> 赞同：1
> 
> 时间：2012-05-04T14:28:47.237
> 
> 标签：php, activerecord, yii

我想知道为什么框架可能会有这种奇怪的行为。

如果我将事件模型中的关系定义为`weird`或除此之外的任何其他名称`interest`，则它可以正常获取类的对象`Interest`。

```
public function relations() 
{
    return array_merge(
        parent::relations(),
        array(
            'weird' => array(self::BELONGS_TO, 'Interest', 'interest_id'),
        ));
} 
```

但是，如果我将名称更改为`interest`它会返回`null`

```
public function relations()
{
    return array(
        'interest' => array(self::BELONGS_TO, 'Interest', 'interest_id'),
    );
} 
```

因此，只需将名称更改为兴趣意味着关系将返回`null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:13:11.590

您是否在 Event 上有任何变量，称为兴趣，您无法使用 Yii 特殊功能（如关系和魔术方法）覆盖本机类变量。如果不是，那么这里正在发生一些奇怪的事情。

# jenkins - 手动选择工件并使用 Jenkins 创建构建？

> ID：10450839
> 
> 赞同：0
> 
> 时间：2012-05-04T14:29:08.027
> 
> 标签：jenkins, artifacts

这是我想要实现的目标：我们有一个 SVN 存储库，但我们不想推广通过 svn update 获得的所有更改！我想手动选择每个工件，然后通过 Jenkins 构建它并部署它。

任何允许我这样做的插件？我没有像排除 *.jar 或 *.xml 这样的简单标准，但它纯粹是人工干预。

谢谢，放大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:29:01.150

用构建参数做一个新工作怎么样。其中一个参数可以是构建/运行/使用的 svn 标记/分支，然后有一个运行脚本的构建步骤。在脚本中，您可以使用该 svn 标签做任何您想做的事情，包括签出和构建。

或者，如果您想使用来自另一个作业的预构建工件，您可以在构建参数或作业名称/编号中指定指向这些工件的链接，并让脚本自动为您抓取它们。

手动运行作业的许多不同方法:)

# javascript - 通过 javascript 调用 MVC 操作方法但不使用 AJAX

> ID：10450851
> 
> 赞同：0
> 
> 时间：2012-05-04T14:30:12.323
> 
> 标签：javascript, asp.net-mvc-3

我有一个带有 3 个参数的 MVC3 操作方法，如下所示：

```
 var url = "/Question/Insert?" + "_strTitle='" + title + "'&_strContent='" + content + "'&_listTags='" + listTags.toString() + "'"; 
```

我想通过普通的javascript函数而不是AJAX来调用它（因为没有必要使用AJAX函数）我试图使用这个函数但它没有用：

```
window.location.assign(url); 
```

它没有跳转到 QuestionController 的插入操作。

有人愿意帮助我吗？非常感谢

**这是更详细的**

我想向数据库插入新问题，但我必须从 CKeditor 获取数据，所以我必须使用下面的这个函数来获取和验证数据

```
// insert new question
$("#btnDangCauHoi").click(function () {
    //validate input data
    //chủ đề câu hỏi
    var title = $("#txtTitle").val();

    if (title == "") {
        alert("bạn chưa nhập chủ đề câu hỏi");
        return;
    }
    //nội dung câu hỏi
    var content = GetContents();
    content = "xyz";
    if (content == "") {
        alert("bạn chưa nhập nội dung câu hỏi");
        return;
    }
    //danh sách Tag
    var listTags = new Array();
    var Tags = $("#list_tag").children();

    if (Tags.length == 0) {
        alert("bạn chưa chọn tag cho câu hỏi");
        return;
    }

    for (var i = 0; i < Tags.length; i++) {
        var id = Tags[i].id;
        listTags[i] = id;
        //var e = listTags[i];
    }
    var data = {
        "_strTitle": title,
        "_strContent": content,
        "_listTags": listTags.toString()
    };
    //        $.post(url, data, function (result) {
    //            alert(result);
    //        });
    var url = "/Question/Insert?" + "_strTitle='" + title + "'&_strContent='" + content + "'&_listTags='" + listTags.toString() + "'";
    window.location.assign(url); // I try to use this, and window.location also but they're not working
}); 
```

此 URL 通过 POST 方法调用下面的 MVC 操作“插入”

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult Insert(string _strTitle, string _strContent, string _listTags)
    {

        try
        {
            //some code here 
        }
        catch(Exception ex)
        {
            //if some error come up
            ViewBag.Message = ex.Message;
            return View("Error");
        }
        // if insert new question success
        return RedirectToAction("Index","Question");
    } 
```

如果插入操作成功，它将重定向到列出所有问题的索引页面，包括已插入的新问题。如果没有，它将显示错误页面。所以，这就是我不使用 AJAX 的原因

有人帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:34:43.817

尝试：

```
window.location = yourUrl; 
```

另外，尝试使用 Fiddler 或其他类似工具来查看重定向是否发生。

编辑：

您的操作需要 HTTP POST 方法，但使用 window.location 将导致 GET 方法。这就是为什么您的操作永远不会被调用的原因。

```
[HttpPost] 
[ValidateInput(false)] 
public ActionResult Insert(string _strTitle, string _strContent, string _listTags)
{
    // Your code
} 
```

要么更改为 HttpGet（您不应该这样做），要么使用 jQuery 或其他支持 Ajax 的库来执行 POST。您不应该使用 GET 方法来更新数据。它会给您带来很多安全问题，以至于您在解决问题时不知道从哪里开始。

考虑到您已经在使用 jQuery，您不妨一路走下去，使用 Ajax。使用`$.post()`方法执行 HTTP POST 操作。

在 $.post() 的回调函数中，您可以`return false`在最后防止重定向到错误或索引视图。

```
$.post("your_url", function() {
    // Do something

    return false; // prevents redirection
}); 
```

就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:37:19.103

你可以尝试改变

```
var url = "/Question/Insert?" + "_strTitle='" + title + "'&_strContent='" + content + "'&_listTags='" + listTags.toString() + "'"; 
```

到

```
var url = "/Question/Insert?_strTitle=" + title + "&_strContent=" + content + "&_listTags=" + listTags.toString(); 
```

我删除了单引号，因为它们不是必需的。

在没有看到您的 php 代码的情况下，虽然很难找出问题所在。

当您说“它没有跳转到 QuestionController 的插入操作”时。你的意思是浏览器没有加载那个页面，或者当 url 被加载时它没有路由到预期的控制器/动作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:32:21.430

如果你想避免使用 AJAX，你可以使用 iframe，但我建议使用 AJAX

```
<iframe src="" id="loader"></iframe>
<script>
document.getElementById("loader").src = url;
</script> 
```

# mips - 虚拟内存、LRU 和页面错误 - 作业

> ID：10450853
> 
> 赞同：0
> 
> 时间：2012-05-04T14:30:14.530
> 
> 标签：mips, virtual-memory, lru, page-fault

我一直在研究以下程序，感觉它缺少一些信息，或者 a) 和 b) 有点诡计：

该循环作为程序的一部分在使用 4KB 页的虚拟内存系统上执行。假设在需要时使用LRU替换算法在内存中选择要替换的页面。标记为“开始”的指令从页面边界开始，循环体包含 4601 对移位指令（sll 和 srl）。

```
Start:  addi    $3,$0,32

Loop:   sll $4,$4,1

srl $4,$4,1

...         # previous two instructions are

...         # repeated  4600 times

addi    $3,$3,-1

bne $3,$0,loop 
```

a) 如果内存包含 8 个 4KB 帧，在循环执行期间会发生多少页错误？

b) 如果内存包含 9 个 4KB 帧，在循环执行期间会发生多少页错误？

a) 和 b) 不是 5 个页面错误吗？每次循环有4602条指令，MIPS指令为4B，页面大小为4KB。4KB/4B = 每页 1024 条指令，所以第一次通过循环：

指令 0 - 1023 帧 0 页面错误是

指令 1024 - 2047 帧 1 页面错误 是

指令 2048 - 3071 帧 2 页面错误是

指令 3072 - 4096 帧 3 页面错误是

指令 4096 - 4602 帧 4 页面错误是

因此，当我们在第二次交互中返回循环时，页面还没有被 LRU 策略替换，所以我们可以再次引用它们。为什么 32 次循环迭代的帧数是 8 帧还是 9 帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:53:03.927

循环体包含 4601*对*移位指令。除了`addi`and指令，每个循环`bne`总共有**9204条指令。**

# html - 对象不能作为链接

> ID：10450854
> 
> 赞同：0
> 
> 时间：2012-05-04T14:30:15.440
> 
> 标签：html, hyperlink, svg

我`object`用来显示 SVG 徽标，但不幸的是，SVG 的区域不能用作链接。同一个地方的`img`标签可以工作；我没有使用 img，因为 firefox 和 chrome 在包含为`img`.

jsFiddle在这里：http: [//jsfiddle.net/DN7xc/](http://jsfiddle.net/DN7xc/)

有没有办法让`object`行为像`img`包含在`a`标签中一样？

# java - JetLang（无线程并发）与 Java Executor 的基本原理

> ID：10450857
> 
> 赞同：1
> 
> 时间：2012-05-04T14:30:22.067
> 
> 标签：java, concurrency, messaging

> **可能重复：**
> [消息（例如 JMS）何时可以替代多线程？](https://stackoverflow.com/questions/1592757/when-is-messaging-e-g-jms-an-alternative-for-multithreading)

我想在项目中使用 JetLang。我知道，JetLang 属于无线程（基于消息的）并发机制类，如 Erlang、Scala Actors 等。但除此之外，我无法合理地将其用于 JDK 中的内置 Executors。

有人可以说清楚吗？

# hibernate - 会话关闭后，使用 session.laod 检索实体信息出现异常

> ID：10450872
> 
> 赞同：0
> 
> 时间：2012-05-04T14:31:21.113
> 
> 标签：hibernate

我在关闭会话后使用加载方法加载学生对象我试图在休眠 3.0 中打印学生名称。但我得到**LazyInitializationException：无法初始化代理 - 拥有会话已关闭**。我提到了代码片段

```
 Session session=HibernateUtil.currentSession();
    Transaction tx=session.beginTransaction();
    Object o1=session.load(Student.class,new Integer(2));
    tx.commit();
    session.close();
           log.info("Student name"+((Student)o1).getSname()); 
```

然后我添加了另一个属性lazy =“true”。但是抛出了同样的错误。如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:34:59.387

这就是该`Session.load()`方法的原理：它向实体返回一个未初始化的代理（除非该实体已经在会话中加载）。如果您想要 Student 的初始化实例，请使用`Session.get()`.

# php - set_error_handler 与 set_exception_handler

> ID：10450873
> 
> 赞同：1
> 
> 时间：2012-05-04T14:31:23.597
> 
> 标签：php, exception-handling, error-handling

> **可能重复：**
> [在 PHP5 中，我应该使用 Exceptions 还是 trigger_error/set_error_handler？](https://stackoverflow.com/questions/60607/in-php5-should-i-use-exceptions-or-trigger-error-set-error-handler)

在 PHP 5+ 中，什么更好用？

*   `set_error_handler`，因为它还可以捕获不是异常的错误；
*   `set_exception_handler`，因为它是一个新功能，它可能会被取代`set_error_handler`；或者
*   两者，因为一个不会取代另一个，并且两者都有用？

# windows-phone-7 - 自动生成的 SQL Server Compact 键的问题

> ID：10450876
> 
> 赞同：0
> 
> 时间：2012-05-04T14:31:37.650
> 
> 标签：windows-phone-7

我使用 VS2010 生成带有两个简单表的 SQL Server Compact 数据库。

两者都有一列`TheID`（int）。一方面，我将唯一设置为 true，另一方面则没有。

我在此列上设置了主键。

```
CREATE TABLE [TestTab] (
  [TheID] int NOT NULL
, [TheVal] nvarchar(100) NOT NULL
);
GO

ALTER TABLE [TestTab] ADD CONSTRAINT [PK_TestTab] PRIMARY KEY ([TheID]);
GO 
```

对于另一个（在列上具有唯一集），我得到：

```
CREATE TABLE [TestTab2] (
  [TheID] int NOT NULL
, [TheVal] nvarchar(100) NOT NULL
);
GO

ALTER TABLE [TestTab2] ADD CONSTRAINT [PK_TestTab2] PRIMARY KEY ([TheID]);
GO

CREATE UNIQUE INDEX [UQ__TestTab2__00000000000033E9] ON [TestTab2] ([TheID] ASC);
GO 
```

接下来，我使用 SQL Server Compact Toolbox 创建数据上下文。

选择数据工作正常 - 但是当我尝试更新代码时它会中断`dc.SubmitChanges()`。

只是我的 WP7 应用程序结束。

尝试/捕获没有帮助。

```
TestTab tT = (from A in dC.TestTabs select A).FirstOrDefault();

if(tT != null) {
    tT.TheText += "1";
    dC.SubmitChanges();
} 
```

如果我删除唯一索引，则代码可以正常工作。

任何想法为什么会发生这种情况？

曼弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:01:22.750

这是 Windows Phone 上的一个 LINQ to SQL 错误...您的索引是重复的（主键定义也添加了一个索引） - 请参阅我的博客文章：http: [//erikej.blogspot.com/2012/04/windows -phone-local-database-tip.html](http://erikej.blogspot.com/2012/04/windows-phone-local-database-tip.html)。要获取自动生成的值，仅设置主键是不够的，您还必须将列定义为 IDENTITY。

# javascript - jQuery - 文字描述悬停

> ID：10450878
> 
> 赞同：0
> 
> 时间：2012-05-04T14:31:45.147
> 
> 标签：javascript, jquery, css, html

我有一个显示我的一些工作（作品集）的 div 网格，并且我正在处理一个鼠标悬停事件，该事件使标题 div 向上移动并显示描述。

看一看：

[http://olliejones.com/demo/demo.html](http://olliejones.com/demo/demo.html)

现在，如您所见，当您将鼠标悬停在一个框上时，标题框的高度会向上移动，显示一个描述。我猜效果很好，但描述文本（当你没有悬停时）位于 div 下。

如果您不明白我的意思，请刷新页面，然后突出显示所有内容（Cntl A）...您看到说明文字了吗？是啊，如何防止这种情况发生？只在悬停时显示，而不在悬停时不显示？

这是我的代码**HTML**，这只是 div 的第一行（所以前 2 个框）：

```
 <div id="cube_base">    
            <div id="cube1" onmouseover="portfolio_hover_over(1);">
              <div id="cube_title1">Title
                <div id="cube_logo">
                    <img src="images/icons/photoshop.png" width="20" height="20" border="0" title='Adobe Photoshop'>
                    </div><br/><br/>
                <span class="cube_sub_title">This is a really long description about nothing. Here I begin to talk about nothing, rather interesting isn't it? Text goes here, and is seems like my imagination stops here.</span></div>
            </div>
        </div>

        <div id="cube_div"></div>

        <div id="cube_base">    
            <div id="cube2" onmouseover="portfolio_hover_over(2);">
                <div id="cube_title2">Title
                    <div id="cube_logo">
                        <img src="images/icons/photoshop.png" width="20" height="20" border="0" title='Adobe Photoshop'>
                    </div><br/><br/>
                <span class="cube_sub_title">This is a really long description about nothing. Here I begin to talk about nothing, rather interesting isn't it? Text goes here, and is seems like my imagination stops here.</span></div>
            </div>
        </div>

        <br/>
        <div id="cube_gap"></div>
        <br/> 
```

**CSS：**

```
#cube_div{
    float:left;
    width:40px;
    height:100px;
}
#cube_gap{
    width:800px;
    height:40px;
    float:left;
}
.cube_sub_title{
    font-size:12px;
    font-weight: normal;    
}

#cube_title1{
    position:absolute;
    width:335px;
    height:15px;
    background-image: url(images/alpha_black_strong.png);
    background-repeat: repeat;
    bottom:0px;
    padding:10px;
    color:#EEE;
}
#cube_title2{
    position:absolute;
    width:335px;
    height:15px;
    background-image: url(images/alpha_black_strong.png);
    background-repeat: repeat;
    bottom:0px;
    padding:10px;
    color:#EEE;
}
#cube_base{
    width:355px;
    height:200px;
    background-color:#080;
    float:left;
    padding:5px;

    background-color:#f0f0f0;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius:2px 2px 2px 2px;
    border: 1px solid #bbbbbb;
    background-image: url(images/icon_slate.png);
    background-repeat: repeat-x;
    background-position: top;
    cursor:pointer;
}

/* Logo placements */
#cube_logo{
    height:20px;
    float:right;
    left: 50px;
    margin-top:-2px;
}

/* Actual Content for the cube divs */
#cube1{
    position:relative;
    width:355px;
    height:200px;
    background-color: #777;
}
#cube2{
    position:relative;
    width:355px;
    height:200px;
    background-color: #777;
} 
```

还有我的**JS**：

```
function portfolio_hover_over(cube){

    // hides the text panel
    for(var i = 1; i < 7; i++){
        if(i != cube){

            //animated panel back to 15px
            $('#cube_title'+i).animate({
                height: '15px'}, 200, function(){
            });
        }
    }

    $('#cube_title'+cube).animate({
        height: '130px'}, 200, function(){
    });

} 
```

我知道这里有很多，但如果我能得到任何帮助，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:33:45.937

您需要添加`overflow:hidden`到`#cube_base`css 块

# servlets - 如何*正确*将 WAR 及其依赖项上传到 Ubuntu 中的 Tomcat7

> ID：10450885
> 
> 赞同：1
> 
> 时间：2012-05-04T14:32:06.137
> 
> 标签：servlets, classpath, tomcat7

我想知道如何上传与其依赖项分开的 WAR 文件。例如，您上传所有依赖项并将它们保留在类路径中，然后您上传您的 WAR 文件，而无需将依赖项打包在其中。当您测试您的 servlet 时，这非常有用，因为您不必在每次需要更正某些内容时上传带有小更改的大 WAR 文件。

问题是有时它会起作用，而有时它不会。

那么有没有官方*正确*的方法来做到这一点？

当然，只需将所有内容打包到 WAR 文件中就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T00:24:09.817

如果您的 WAR 文件具有其外部的依赖项，那么每当您更新这些依赖项时，您都需要重新启动 Tomcat：除了容器为您构建的内容（其中将包括webapp 的 WEB-INF/classes 和 WEB-INF/lib/*.jar 中的内容，以及容器保证可用的所有库，如 servlet.jar 等）。

Tomcat 允许您使用共享的 lib 目录，但在更新库时不会自动重新加载，这可能会导致您观察到的“不一致”行为。

这样做的*官方*正确方法是上传整个 WAR 文件：这就是它们的用途。

# android - 在移动设备中使用 Kendo ui web

> ID：10450886
> 
> 赞同：1
> 
> 时间：2012-05-04T14:32:06.203
> 
> 标签：android, mobile, cordova, telerik, kendo-ui

根据常见问题解答，可以在移动应用程序中使用 Kendo UI 小部件。我通过包含对这些 js 脚本的引用进行了尝试：

```
 jquery-1.7.1.js
    kendo.core.js
    kendo.fx.js
    kendo.popup.js
    kendo.calendar.js
    kendo.datepicker.js 
```

并使用以下方法对其进行初始化：

```
$("#datePicker").kendoDatePicker(); 
```

但它永远不会正确呈现。我错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:00:22.633

哟

我不确定你可能会错过什么——[在这里](http://www.kendoui.com/documentation/javascript-dependencies.aspx)你可以看到所有的 JavaScript 依赖项。还要确保您已添加 CSS 文件。

 `````
<link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.common.min.css" rel="stylesheet" />

<link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.default.min.css" rel="stylesheet" />

<link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.mobile.all.min.css" rel="stylesheet" /> 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:51:16.967

听起来可能很有趣，但你是否创建了一个剑道应用程序对象（你没有提到你在你的问题中做过），如果你没有，创建一个剑道应用程序对象，比如 -

```
var application = new kendo.mobile.Application($(document).body, { transition:"slide" }); 
`````

# php - 资源 ID nvarchar(MAX)

> ID：10450891
> 
> 赞同：2
> 
> 时间：2012-05-04T14:32:38.603
> 
> 标签：php, sql, nvarchar

我似乎无法得到一个直接的答案。

我正在获取 SQLSRV 数据库中类型为 nvarchar(MAX) 的字段的内容，但是当我回显从查询返回的字段结果而不是内容时，我不断收到“资源 ID #1”。我对 SQLSRV 和 PHP 相当陌生，但据我了解，这个值是指向我需要的实际内容的其他地方的指针吗？

如果是这样，我如何获得这些数据。

我努力了：

```
$sql = "SELECT * FROM table";
    $stmt= sqlsrv_query($conn, $sql, array(), array("Scrollable" => SQLSRV_CURSOR_STATIC));

$getNext = sqlsrv_fetch($stmt);
$result = sqlsrv_get_field($stmt, 1); // this is the nvarchar(max) field

echo $result; // this shows Resource id #1;

// I tried
//$resource = sqlsrv_fetch($result); // this creates errors 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:39:06.090

NVARCHAR(MAX) 将为您处理存储问题，在表中存储少于约 4000 个字符的任何内容，但在表中带有指针的单独位置存储更多内容。好消息是 SQL Server 将返回的数据呈现给您，就好像它存储在表中一样，因此 NVARCHAR(MAX) 的使用不应该是您的问题的原因，它就像一个普通的表字段一样工作。

刚找到这个，可能有帮助...

```
/*Get the second field of the row as a stream.
Because the default return type for a nvarchar field is a
string, the return type must be specified as a stream. */
$stream = sqlsrv_get_field( $stmt, 1, 
                            SQLSRV_PHPTYPE_STREAM( SQLSRV_ENC_CHAR));
while( !feof( $stream))
{ 
    $str = fread( $stream, 10000);
    echo $str;
} 
```

[http://msdn.microsoft.com/en-us/library/cc296207(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/cc296207(v=sql.105).aspx)

# iphone - Iphone：UITableView 标题行在 6 行后重复

> ID：10450894
> 
> 赞同：0
> 
> 时间：2012-05-04T14:32:45.177
> 
> 标签：iphone, objective-c, ios, ipad, ios-universal-app

我正在开发一个通用应用程序。在这个应用程序中有一个 UITableView。问题是 TableView 中的标题行在 iphone 中的 6 行和 iPad 中的 9 行之后重复。

我用谷歌搜索但没有找到解决这个标题问题的解决方案。请帮忙。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.

    return [tripList count];
} 
```

UiTableview cellForRowAtIndexPath 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UILabel *lblTripNumber = nil;
    UILabel *lblTripState = nil;
    UIImageView *imgTripState = nil;
    UILabel *lblStateTitleText = nil;
    UILabel *lblTripNUmberTitleValue = nil;

    static NSUInteger const kTripNumberLabelTag = 2;
    static NSUInteger const kTripStateLabelTag = 3;
    static NSUInteger const kTripImageTag = 4;

    BOOL isiPhone = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(indexPath.row == 0)
    {
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            if (!isiPhone) // 1=Ipad        
            {
                lblStateTitleText = [[[UILabel alloc] initWithFrame:CGRectMake(205, 27, 250, (cell.contentView.frame.size.height))] autorelease];
                lblStateTitleText.font = [UIFont boldSystemFontOfSize:32];
            }
            else
            {
                lblStateTitleText = [[[UILabel alloc] initWithFrame:CGRectMake(65, 10, 130, (cell.contentView.frame.size.height))] autorelease];
                lblStateTitleText.font = [UIFont boldSystemFontOfSize:16];
            }
            lblStateTitleText.textAlignment = UITextAlignmentLeft;
            lblStateTitleText.backgroundColor = [UIColor clearColor];
            lblStateTitleText.tag = 11;     
            lblStateTitleText.text = @"Trip State"; 
            lblStateTitleText.textColor = [UIColor cyanColor];
            [cell.contentView addSubview:lblStateTitleText];

            if (!isiPhone) // 1=Ipad        
            {
                lblTripNUmberTitleValue = [[[UILabel alloc] initWithFrame:CGRectMake(445, 27, 290, (cell.contentView.frame.size.height))] autorelease];
                lblTripNUmberTitleValue.font = [UIFont boldSystemFontOfSize:32];
            }
            else
            {
                lblTripNUmberTitleValue = [[[UILabel alloc] initWithFrame:CGRectMake(180, 10, 250, (cell.contentView.frame.size.height))] autorelease];
                lblTripNUmberTitleValue.font = [UIFont boldSystemFontOfSize:16];
            }
            lblTripNUmberTitleValue.textAlignment = UITextAlignmentLeft;
            lblTripNUmberTitleValue.backgroundColor = [UIColor clearColor];
            lblTripNUmberTitleValue.tag = 12;       
            lblTripNUmberTitleValue.text = @"Confirmation#";    
            lblTripNUmberTitleValue.textColor = [UIColor greenColor];
            [cell.contentView addSubview:lblTripNUmberTitleValue];  

        }

    }
    else 
    {   
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            CGFloat xIndex = 6.0;       
            CGFloat xIpadIndex = 6.0;

            CGFloat TripNumberLabelWidth = 130.0;

            if (!isiPhone) // 1=Ipad        
            {
                imgTripState = [[[UIImageView alloc] initWithFrame:CGRectMake(xIndex, 18, 50, 64)] autorelease];
            }
            else
            {
                imgTripState = [[[UIImageView alloc] initWithFrame:CGRectMake(xIndex, 8, 32, 32)] autorelease];
            }

            imgTripState.tag = kTripImageTag;
            [cell.contentView addSubview:imgTripState];

            xIndex +=73;
            xIpadIndex +=85;

            if (!isiPhone) // 1=Ipad        
            {
                lblTripState = [[[UILabel alloc] initWithFrame:CGRectMake(xIpadIndex, 25, TripNumberLabelWidth, (cell.contentView.frame.size.height))] autorelease];
                lblTripState.font = [UIFont boldSystemFontOfSize:38];
            }
            else
            {
                lblTripState = [[[UILabel alloc] initWithFrame:CGRectMake(xIndex, 1, TripNumberLabelWidth, (cell.contentView.frame.size.height))] autorelease];
                lblTripState.font = [UIFont boldSystemFontOfSize:20];
            }
            lblTripState.textAlignment = UITextAlignmentLeft;
            lblTripState.backgroundColor = [UIColor clearColor];
            lblTripState.tag = kTripStateLabelTag;      
            lblTripState.textColor = [UIColor colorWithRed:(0.0/255) green:(241.0/255) blue:(216.0/255) alpha:1.0f];
            [cell.contentView addSubview:lblTripState];

            xIndex +=132;
            xIpadIndex +=120;

            if (!isiPhone) // 1=Ipad
            {
                lblTripNumber = [[[UILabel alloc] initWithFrame:CGRectMake(xIpadIndex, 25, TripNumberLabelWidth, (cell.contentView.frame.size.height))] autorelease];
                lblTripNumber.font = [UIFont boldSystemFontOfSize:35];
            }
            else
            {
                lblTripNumber = [[[UILabel alloc] initWithFrame:CGRectMake(xIndex, 0, TripNumberLabelWidth, (cell.contentView.frame.size.height))] autorelease];
                lblTripNumber.font = [UIFont boldSystemFontOfSize:18];
            }

            lblTripNumber.textAlignment = UITextAlignmentLeft;
            lblTripNumber.backgroundColor = [UIColor clearColor];
            lblTripNumber.tag = kTripNumberLabelTag;        
            lblTripNumber.textColor = [UIColor greenColor];
            [cell.contentView addSubview:lblTripNumber];

        }else
        {
            // A reusable cell was available, so we just need to get a reference to the subviews using their tags.
            lblTripNumber = (UILabel *)[cell.contentView viewWithTag:kTripNumberLabelTag];
            lblTripState = (UILabel *)[cell.contentView viewWithTag:kTripStateLabelTag];
        //  imgTripState = (UILabel *)[cell.contentView viewWithTag:kTripImageTag];
        }

        lblTripNumber.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
        lblTripState.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

        int indCount = indexPath.row -1;
        TripDetails *trip = [tripList objectAtIndex:indCount];
        lblTripNumber.text = trip.tripNumber;
        lblTripState.text = trip.tripState;

    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:38:44.753

您的 TableData 中可能只有 6 个项目。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   return [TableData count];

} 
```

在您的情况下，“TableData”是“tripList”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:40:06.053

我知道了，我删除了

```
if (cell == nil) 
```

它工作得很好。实际上，它正在第一个标题行中寻找它的标签，并且无法替换它的值，因此产生了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:42:07.573

检查部分中的 viewFor 标题。如果您将数组用于标题视图，则此数组对象未正确分配内存。它使用最后一个对象来完成它的所有发生并替换旧的。在向其中添加对象之前，先创建一个数组的内存分配对象。告诉我这是否是解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T14:45:35.397

您的代码尝试重用单元格，但您的编码方式是错误的。[有关适当的模式，请参见](https://stackoverflow.com/questions/10446793/uitableviewcell-cell-identifier-memory-management/10446902#10446902)我的答案。简而言之，您应该只在`if (cell == nil)`部分中定义共享单元格属性，行特定属性，如标签文本等，应在本部分之外定义。对于索引 0 处的行，情况并非如此。

# wpf - 如何在不给键盘焦点的情况下设置逻辑焦点？

> ID：10450895
> 
> 赞同：8
> 
> 时间：2012-05-04T14:32:47.170
> 
> 标签：wpf, xaml, focus, focusmanager

如何在代码中定义容器或焦点子的逻辑焦点，**而不**给它键盘焦点？

我只想控制当控件将通过 Tab 键获得焦点或单击未击中子项的容器部分时，哪个子项将获得焦点，但如果还没有给它（或窃取）实际焦点，则不给它（或窃取）实际焦点有它。

而且我还希望通过键盘手势选择特定的孩子或用鼠标单击它仍然是可能的。

我理解键盘焦点和逻辑焦点在 WPF 中的区别，并且对于一个元素来说，拥有键盘焦点也意味着拥有逻辑焦点，但拥有逻辑焦点并不意味着元素拥有键盘焦点。

我也了解附加属性 FocusManager.FocusedElement 定义了哪个元素在视觉树中具有逻辑焦点，从定义此属性的元素开始。

我意识到这个属性不仅在 FocusManager.IsFocusScope 设置为 true 时使用，而且还用于诸如**GroupBox**之类的容器。

我已经做了很多尝试，大量搜索和阅读 WPF 焦点主题，但到目前为止没有成功，我不明白我错过了什么：

*   调用`FocusManager.SetFocusedElement`也给键盘焦点，并且我之前暂时将我的子元素的属性 Focusable 更改为 false，它只在之前没有孩子有焦点的第一次工作，但在孩子获得焦点后不工作*   在元素或容器处处理事件**GotKeyboardFocus**和**PreviewGotKeyboardFocus**以覆盖初始聚焦元素也不起作用，因为我无法判断焦点是通过鼠标还是键盘获得的，以及焦点是直接设置到子元素还是通过容器。

一个例子来说明我想要实现的目标：我有一个简单的 RadioButtons 组，我想在代码中动态控制当用户“tab”将焦点移到这个 GroupBox 时哪个选项将获得焦点（通常是选项有`isChecked=true`）。

```
<GroupBox Header="Options" Name="myGroupBox"
          KeyboardNavigation.TabNavigation="Once" 
          KeyboardNavigation. DirectionalNavigation="Cycle" >
    <StackPanel>
        <RadioButton GroupName="g1" Name="opt1" Content="Option _1"/>
        <RadioButton GroupName="g1" Name="opt2" Content="Option _2"/>
        <RadioButton GroupName="g1" Name="opt3" Content="Option _3"/>
    </StackPanel>
</GroupBox> 
```

最后的评论，我知道如何使用**ListBox实现选项的动态列表，将列表的****selectedItem**绑定到数据上下文的属性，然后通过**ListBoxItem上的样式和模板**上的样式和模板将项目模板中**RadioButton的****IsChecked**属性绑定到**IsSelected**其父**ListBoxItem**的属性，它可以工作，但对于我的具体情况，我需要将我的**RadioButtons**直接绑定到我的数据上下文的属性，我不能同时将它们绑定到列表的 IsSelected 属性。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T21:14:02.477

我知道这是一个老问题，但希望这个答案能帮助其他有类似问题的人。

如果我正确理解了问题，您可以通过在 GroupBox 上设置 FocusManager.IsFocusScope="True" 来实现所需的行为，并为 RadioButton.Checked 事件连接一个事件处理程序，该事件将逻辑焦点设置为事件的发送者：

**xml:**

```
 <GroupBox Header="Options" Name="myGroupBox"
              FocusManager.IsFocusScope="True"
              RadioButton.Checked="MyGroupBox_OnChecked"
              KeyboardNavigation.TabNavigation="Once" 
              KeyboardNavigation.DirectionalNavigation="Cycle">
        <StackPanel>
            <RadioButton GroupName="g1" Name="opt1" Content="Option _1"/>
            <RadioButton GroupName="g1" Name="opt2" Content="Option _2"/>
            <RadioButton GroupName="g1" Name="opt3" Content="Option _3"/>
        </StackPanel>
    </GroupBox> 
```

**后面的代码：**

```
 private void MyGroupBox_OnChecked(object sender, RoutedEventArgs e)
    {
        var radioB = sender as RadioButton;
        if (radioB != null)
            FocusManager.SetFocusedElement(myGroupBox, radioB);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T13:55:19.180

正如 Document 所说，FocusManager.SetFocusedElement 将在指定的焦点范围内为指定的元素提供逻辑焦点，并将尝试为元素提供键盘焦点。

我遇到了同样的问题，我觉得这种赋予元素键盘焦点的尝试是不可预测的。在某些情况下，获得逻辑焦点的元素也会获得键盘焦点。但在其他一些情况下，它不会。我还没有弄清楚背后的确切机制。

如果官方文件是这样说的，我认为可能没有“官方”的方式来实现你想要的。现在我只是通过调用 Keyboard.Focus 来完成此操作，您希望在设置逻辑焦点后保持键盘焦点。

我正在解释的说明如下：

```
private void SomeMember(){
  FocusManager.SetFocusedElement(focusScope, logicalFocus);
  Keyboard.Focus(controlMaintainingKeyboardFocus);
} 
```******

# c++ - 将记录写入和读取到 .dat 文件 C++

> ID：10450900
> 
> 赞同：1
> 
> 时间：2012-05-04T14:32:59.197
> 
> 标签：c++, file-io, record

我对 C++ 很陌生，正在尝试研究如何以下面这种结构的格式将记录写入文本文件：

```
struct user {
    int id;
    char username [20];
    char password [20];
    char name [20];
    char email [30];
    int telephone;
    char address [70];
    int level;
}; 
```

到目前为止，我可以很好地写入它，但没有递增的 id 编号，因为我不知道如何计算记录数，因此在我将数据写入文件后文件看起来像这样。

```
1 Nick pass Nick email tele address 1
1 user pass name email tele address 1
1 test test test test test test 1
1 user pass Nick email tele addy 1
1 nbao pass Nick email tele 207 1 
```

使用以下代码：

```
ofstream outFile;

outFile.open("users.dat", ios::app);

// User input of data here

outFile << "\n" << 1 << " " << username << " " << password << " " << name << " "
        << email << " " << telephone << " " << address  << " " << 1;
cout << "\nUser added successfully\n\n";

outFile.close(); 
```

那么，如何在插入时增加每条记录的值，然后如何定位文件中的特定记录？

编辑：我已经能够显示每一行：

```
 if (inFile.is_open())
    {
    while(!inFile.eof())
    {

    cout<<endl;
    getline(inFile,line);
    cout<<line<<endl;

    }
    inFile.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:44:44.963

如果您想在读取文件时进行随机访问，至少使用典型方法，您将需要使用固定大小的记录，因此假设您有 5 个字符作为名称，它将被存储为

```
bob\0\0 
```

或任何其他你用来填充的东西，这样你就可以用记录号*记录大小来索引。

要以您正在做的方式增加索引，您需要读取文件以找到高现有索引并增加它。或者您可以将文件加载到内存中并附加新记录并将文件写回

```
std::vector<user> users=read_dat("file.dat");
user user_=get_from_input();
users.push_back(user_);

then write the file back
std::ofstream file("file.dat");
for(size_t i=0; i!=users.size(); ++i) {
    file << users.at(i); 
   //you will need to implement the stream extractor to do this easily
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:50:49.313

到目前为止，您所拥有的还不错，只是它无法处理字符串中有空格的情况（例如在地址中！）

您要做的是编写一个非常基本的数据库。您需要三个需要单独实现的操作（尽管在某些情况下将它们交织在一起可能会给您带来更好的性能，但我相信这不是您关心的问题）。

*   插入：你已经实现了这个。您唯一可能想要更改的是`" "`to `"\n"`。这样，结构的每个字段都在一个新行中，并且您的空格问题得到解决。稍后阅读时，需要逐行阅读
*   搜索：要搜索，您需要打开文件，逐个结构读取结构（其本身包括读取与您的结构字段对应的多行）并识别您感兴趣的实体。如何处理它们是另一个问题，但最简单的情况是返回数组（或向量）中匹配实体的列表。
*   删除：这类似于搜索，但您必须重写文件。你所做的基本上是，再次逐个阅读结构，看看哪些符合你的删除标准。您忽略那些匹配的内容，并将其余部分（如插入部分）写入另一个文件。之后，您可以用新文件替换原始文件。

这是一个伪代码：

```
Write-entity(user &u, ofstream &fout)
    fout << u.id << endl
         << u.username << endl
         << u.password << endl
         << ...

Read-entity(user &u, ifstream &fin)
     char ignore_new_line
     fin >> u.id >> ignore_new_line
     fin.getline(u.username, 20);
     fin.getline(u.password, 20);
     ...
     if end of file
         return fail

Insert(user &u)
     ofstream fout("db.dat");
     Write-entity(u, fout);
     fout.close();

Search(char *username) /* for example */
     ifstream fin("db.dat");
     user u;
     vector<user> results;
     while (Read-entity(u))
         if (strcmp(username, u.username) == 0)
             results.push_back(u);
     fin.close();
     return results;

Delete(int level) /* for example */
     ifstream fin("db.dat");
     ofstream fout("db_temp.dat");
     user u;
     while (Read-entity(u))
         if (level != u.level)
             Write-entity(u, fout);
     fin.close();
     fout.close();
     copy "db_temp.dat" to "db.dat" 
```

旁注：将`\n`数据写入后放置是个好主意（这样您的文本文件将以[新行结尾](https://stackoverflow.com/questions/729692/why-should-files-end-with-a-newline)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:08:33.810

我建议将文件处理程序包装到一个类中，然后`>> and <<`为您的结构重载运算符，这样您就可以控制进出。例如

```
struct User{
...
};

typedef std::vector<User> UserConT;

struct MyDataFile
{
  ofstream outFile;
  UserConT User_container;

  MyDataFile(std::string const&); //
  MyDataFile& operator<< (User const& user); // Implement and/or process the record before to write
  MyDataFile& operator>> (UserConT & user); // Implement the extraction/parse and insert into container
  MyDataFile& operator<< (UserConT const & user); //Implement extraction/parse and insert into ofstream 
};

MyDataFile& MyDataFile::operator<< (User const& user)
{
  static unsigned myIdRecord=User_container.size();
  myIdRecord++;
  outFile << user.id+myIdRecord << ....;
  return *this;
}

int main()
{
   MydataFile file("data.dat");

   UserConT myUser;
   User a;
   //... you could manage a single record  
   a.name="pepe"; 
   ...
   file<<a;
   ..//

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T14:43:36.353

.Dat 文件本身通常是一个简单的文本文件，可以用记事本打开。因此，您可以简单地读取文件的最后一行，读取它，提取第一个字符，将其转换为整数。然后增加值并完成。这里有一些示例代码：

```
 #include <iostream.h>
  #include <fstream.h>
  using namespace std;

  int main(int argc, char *argv[])
  {
    ifstream in("test.txt");

  if(!in) {
       cout << "Cannot open input file.\n";
       return 1;
    }

     char str[255];

     while(in) {
       in.getline(str, 255);  // delim defaults to '\n'
        //if(in) cout << str << endl;
     }
    // Now str contains the last line , 
    if  ((str[0] >=48) || ( str[0] <=57))
    {
      int i = atoi(str[0]);
      i++;
    } 
    //i contains the latest value , do your operation now
    in.close();

     return 0;
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T14:44:00.343

假设您的文件格式不需要是人类可读的。

您可以将结构写入文件，例如。

```
outFile.open("users.dat", ios::app | ios::binary);
user someValue = {};
outFile.write( (char*)&someValue, sizeof(user) );

int nIndex = 0;
user fetchValue = {};
ifstream inputFile.open("user.data", ios::binary);

inputFile.seekg (0, ios::end);

int itemCount = inputFile.tellg() / sizeof(user);

inputFile.seekg (0, ios::beg);

if( nIndex > -1 && nIndex < itemCount){
    inputFile.seekg ( sizeof(user) * nIndex , ios::beg);
    inputFile.read( (char*)&fetchValue, sizeof(user) );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T14:44:11.890

写入文件的代码是用户结构的成员函数吗？否则我看不出输出和结构之间有任何联系。

可能要做的事情：

*   写 id 成员而不是 1
*   对 id 使用计数器并在每次写入时将其递增
*   不要写 id 并且在读取时使用行号作为 id

# c++ - 通过 UDP 发送任何类型的数据

> ID：10450901
> 
> 赞同：5
> 
> 时间：2012-05-04T14:33:00.680
> 
> 标签：c++, udp

我尝试到处搜索，但没有运气。这是我的问题：

我有一个 UDP 套接字，它可以通过任何端口将数据发送到任何 IP 地址（经过测试并确认工作）。

我阅读了很多教程，但它们都是在操纵`char*[]`，他们没有指定如何解密它。

我想做什么（伪代码）：

客户：

```
Class my_class;
send (..., my_class, sizeof(my_class),...) 
```

服务器：

```
receive (sender, buffer, sizeof (buffer))
and do something like
Class my_class = (Class) buffer 
```

所以我的服务器可以分析缓冲区的内容。

但是我迷失了指针，我只能发送`char*[]`，所以我不知道如何来回转换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:06:33.727

您不能只是“发送”您的课程。您必须在您的班级中发送数据的*表示*。并且向您的班级发送指针也不起作用。当网络上的另一个应用程序收到您的指针时，它对他们来说将毫无意义。

考虑一下：

```
class Data
{
  std::string  name_;
  unsigned value_;
} data; 
```

您不能只是“发送课程”。如果您尝试执行以下操作：

```
send(&data, sizeof(data)); 
```

...您最终将向下游客户端发送废话。 `value_`可能会被正确接收，但`name_`肯定不会。这是因为`std::string`对象不仅仅包含构成字符串的字符。还有计数器，指向数据缓冲区的指针，还有谁知道还有什么。字符本身可能甚至不会出现在所指示的内存空间中`(&data, &data[sizeof(data)])`——这些字符将完全在其他地方。因此，使用`send`上面的伪代码，您不仅发送了一堆客户无法理解的内容，而且很多时候您甚至不发送他们*可以*理解的内容。

输入[序列化](http://en.wikipedia.org/wiki/Serialization)。序列化只是意味着创建可以存储、保存或发送到某个地方并在以后重新组合的数据对象的表示。您决定此序列化将采用何种形式。在上述情况下`data`，我们可能决定像这样进行序列化：

```
NNNNCCCCCCCC...VVVV 
```

其中每个字符为 1 个字节，并且：

1.  N 是一个 4 字符整数，是`name_`ASCII 表示的字符数
2.  C 是 N 个字节，每个字节是一个字符`name_`
3.  V 是一个 4 字符的无符号整数，是`value_`ASCII 表示的值

上面序列化和发送的一种方法`data`可能是这样的（警告：不是生产质量，未经测试）：

```
stringstream ss;
ss 
  << setw(4) << setfill('0') << right << data.name_.length() << setw(0)
  << data.name_
  << setw(4) << data.value_;

  string buf = ss.str();

  send(buf.c_str(), buf.length()); 
```

现在，我们不是尝试发送`data`，而是发送一个代表 的字符串`data`。如果`data`是这样创建的：

```
data.name_ = "foo";
data.value_ = 42; 
```

...然后通过套接字发送的字符串将是：

```
0003foo0042 
```

这可以由客户端接收并重新组合到`Data`客户端的新对象中，该对象模仿您在服务器端的内容。

我们上面使用的映射--`NNNNCCCCCCCC...VVVV`双方都必须理解。这通常被称为[通信协议](http://en.wikipedia.org/wiki/Communications_protocol)。

所有应用程序领域都使用了无数的协议和序列化方法。它们的范围从超级简单的，如我上面概述的，到高度压缩和复杂的，如[FIX/FAST](http://fixprotocol.org/fast)。许多库提供满足广泛应用需求的序列化功能。 [Boost.Serialization 浮现](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html)在脑海中，我建议您考虑一下。

我已经在这里掩盖了更多内容。诸如[字节序](http://en.wikipedia.org/wiki/Endianness)、安全性、会话控制之类的东西……如果您要进行任何重要的网络编程，无论是在客户端还是服务器端，您都需要学习很多东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:34:53.957

您需要[序列化](http://en.wikipedia.org/wiki/Serialization)您的课程。这将转换为二进制表示，然后您可以将其放入`char*[]`数据类型中并发送。char*[] 实际上只是保存要发送的字节，因此您需要将类转换为字节。当它到达另一端时，您需要对其进行反序列化：将其从字节数组转换回对象。

# qt - 具有透明背景颜色的 QDialog

> ID：10450902
> 
> 赞同：5
> 
> 时间：2012-05-04T14:33:13.563
> 
> 标签：qt

我想让背景`QDialog`透明，这样我就可以透过窗户看到。我问是因为我想使用一个半透明的背景图像来创建一个“圆角窗口”的错觉。使用`setOpacity`对我来说不是一个选项，因为我希望所有小部件都保持完全不透明。

有没有办法在不使用本机操作系统 API 的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T15:54:49.737

使用`QWidget::setAttribute(Qt::WA_TranslucentBackground);`. 请注意，这也需要`Qt::FramelessWindowHint`设置。

这个例子对我有用：

```
#include <QtGui>

class Dialog : public QDialog
{
public:
    Dialog() : QDialog(0, Qt::FramelessWindowHint) // hint is required on Windows
    {
        QPushButton *button = new QPushButton("Some Button", this);    
        setAttribute(Qt::WA_TranslucentBackground);
    }

};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Dialog d;
    d.show();
    return a.exec();
} 
```

关于圆角，`QWidget::setMask()`会帮助你。

编辑：针对下面评论中的另一个问题，这是一个使用资源文件中的图像的工作示例，它覆盖`QWidget::paintEvent()`：

```
#include <QtGui>

class Dialog : public QDialog
{
public:
    Dialog() : QDialog(0, Qt::FramelessWindowHint) // hint is required on Windows
    {
        setFixedSize(500, 500); // size of the background image
        QPushButton *button = new QPushButton("Some Button", this);
        setAttribute(Qt::WA_TranslucentBackground);
    }

protected:
    void paintEvent(QPaintEvent *event)
    {
        QPainter painter(this);
        painter.drawImage(QRectF(0, 0, 500, 500), QImage(":/resources/image.png"));
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Dialog d;
    d.show();
    return a.exec();
} 
```

# ruby-on-rails - 相关模型的每个实例的活动管理范围

> ID：10450905
> 
> 赞同：9
> 
> 时间：2012-05-04T14:33:25.470
> 
> 标签：ruby-on-rails, ruby, heroku, activeadmin

我对动态活动管理范围有疑问。我正在尝试为我的应用程序中“项目”的每个“经理”创建一个范围。但是，当创建新经理（或分配给项目）时，范围似乎没有更新，但如果我重新启动服务器，它们会更新。所以代码本身“有效”，但显然不是我想要的方式。我是一个 ruby​​/rails 菜鸟，所以我不确定我是否需要做一些事情以某种方式“刷新”范围。

作为一个仅供参考，我在 Heroku Cedar 上使用 Rails 3.2 和 ActiveAdmin

这是有问题的代码（有效但仅在服务器重新启动后引入新的管理器）：

* * *

```
Manager.find_each do |m|
  scope m.first_name do |projects|
    projects.where(:manager_id => m.id)
  end
end 
```

以及整个 Active Admin Project 模型：

```
ActiveAdmin.register Project do
 menu :priority => 1
 index do
  column :name
  column :company_name
  column :status
  column :projection do |project|
   number_to_currency project.projection
  end
  column :updated_at
  default_actions
 end

 scope :all
 scope :working, :default => true do |projects|
  projects.where(:status => 'working')
 end

 Manager.find_each do |m|
  scope m.first_name do |projects|
    projects.where(:manager_id => m.id)
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-06T19:55:48.263

这是此问题的实际解决方案...尽管使用过滤器代替了更理想的稳定性和维护方式，这在 ActiveAdmin 中看起来更好，并且更用户友好，因为范围变成了漂亮的选项卡。

这有点像 hack，但在适当的情况下它是一个可行的解决方案：

诀窍是**更新控制器索引操作的 before_filter 中的范围**。

如果您在资源上创建了许多范围，这可能会变得很糟糕（尽管您可以轻松设置一些限制）

```
ActiveAdmin.register Project do
  menu :priority => 1
  index do
    column :name
    column :company_name
    column :status
    column :projection do |project|
      number_to_currency project.projection
    end
    column :updated_at
    default_actions
  end

  scope :all
  scope :working, :default => true do |projects|
    projects.where(:status => 'working')
  end

  controller do
    before_filter :update_scopes, :only => :index

    def update_scopes
      resource = active_admin_config

      Manager.all.each do |m|
        next if resource.scopes.any? { |scope| scope.name == m.first_name }
        resource.scopes << (ActiveAdmin::Scope.new m.first_name do |projects|
          projects.where(:manager_id => m.id)
        end)
      end

      # try something like this for deletions (untested)
      resource.scopes.delete_if do |scope|
        !(Manager.all.any? { |m| scope.name == m.first_name } || ['all', 'working'].include?(scope.name)) # don't delete other scopes you have defined
      end

    end
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T08:27:38.630

我发现这对我有用：

活动管理文件

```
scope :working, :default => true do |projects|
  Project.working
end 
```

模型

```
scope :working, -> { where(:status => 'working') } 
```

回复有点晚，但希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:25:08.107

AA 寄存器块内的真正动态范围不起作用。我的意思是，Manager 表中的更改不会反映在“初始化”时创建的动态范围中。另请参阅：[https](https://github.com/gregbell/active_admin/wiki/Creating-dynamic-scopes) ://github.com/gregbell/active_admin/wiki/Creating-dynamic-scopes 。您可以尝试使用过滤器而不是范围。然后你可以写这样的东西：

```
filter :managers, :as => :select, :collection => proc { Manager.order('name ASC').map(&:first_name) } 
```

并且管理器属性中的更改将显示（在页面刷新后），而无需重新启动服务器。还要检查 [https://github.com/gregbell/active_admin/issues/1261#issuecomment-5296549](https://github.com/gregbell/active_admin/issues/1261#issuecomment-5296549)

另请注意，活动记录范围是！不同！来自活动的管理范围。你可能想检查

[http://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope](http://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T03:41:11.403

Rails 在生产模式下只加载一次类。这意味着您的范围仅被调用一次，然后它们被缓存。这就是为什么新范围直到重新启动后才会出现的原因。如果您在案例中编辑了经理的名字，情况也是如此。

我认为解决方案可能是使用 lambda 或 Proc，但在我使用它的几分钟内，我没有成功。activeadmin 的编写方式可能也不可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-28T02:43:21.473

韦斯顿·甘格（weston Ganger）提到的解决方案很有魅力。如果您没有默认范围，则可以使用 all 范围作为默认范围。

```
 scope :all, default: true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-08T22:47:01.370

这是我根据 Brant Sterling Wedel 的回答优化的解决方案。

此解决方案包含以下附加增强功能：

*   删除任何未使用的范围
*   允许设置默认范围

```
### Default scope must be set in advance
scope "Jeff", default: true do |x| 
  x.joins(:manager).where(manager: {name: "Jeff"})
end

controller do

  before_action :reload_scopes, only: :index

  def reload_scopes
    resource_config = active_admin_config

    resource_config.instance_variable_set(:@scopes, [
      resource_config.scopes.first ### Default scope
    ])

    Manager.all.each do |m|
      next if resource_config.scopes.first.name ==  m.name

      resource_config.scopes << ActiveAdmin::Scope.new(m.name){|scope| scope.where(manager_id: m.id) }
    end
  end

end 
```

# asp.net - 在 Asp.Net MVC 3 的 View 文件夹中路由图像

> ID：10450908
> 
> 赞同：0
> 
> 时间：2012-05-04T14:33:31.133
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-routing, viewengine

我之前尝试过以不同的方式提出这个问题，但没有被理解，所以我将尝试另一种方式：

我有一个 MVC 3 应用程序，像往常一样在 Views 目录中有视图。但是，由于各种原因，我需要每个视图的图像与视图本身位于同一文件夹中，即在我的情况下，例如 Views/Manuals/en-US/name

这是我使用的路线：

```
routes.MapRoute(
                "Parameter",
                "{controller}/{action}/{lang}/{prod}",
                new { controller = "Manuals", action = "Product", lang = "en-US", prod = "name" }
        ); 
```

现在，如前所述，我需要此视图的图像位于同一文件夹中，以便图像路径可以简单地为“ATEXSymbol.svg”。

当我只有这条路线，并为图像使用这样的简单相对路径时，我得到的是这样的错误：

> 未找到视图“da-DK/ATEXSymbol.svg”或其主视图，或者没有视图引擎支持搜索到的位置。搜索了以下位置：~/Views/Manuals/da-DK/ATEXSymbol.svg.aspx ~/Views/Manuals/da-DK/ATEXSymbol.svg.ascx ~/Views/Shared/da-DK/ATEXSymbol.svg。 aspx ~/Views/Shared/da-DK/ATEXSymbol.svg.ascx ~/Views/Manuals/da-DK/ATEXSymbol.svg.cshtml ~/Views/Manuals/da-DK/ATEXSymbol.svg.vbhtml ~/Views/ Shared/da-DK/ATEXSymbol.svg.cshtml ~/Views/Shared/da-DK/ATEXSymbol.svg.vbhtml

所以基本上，它在正确的语言文件夹中寻找图像，但没有产品名称文件夹部分，并且附加了许多视图扩展名之一。我知道 MVC 并不真的希望在同一个文件夹中使用这个相对路径，但我几乎别无选择。我需要将图像放在同一个文件夹中，以防我无法控制。

那么我该如何实现呢？

编辑：

其实上面我有点误会了，说路径的产品名称部分丢失了，当然不是。路径的那部分是视图本身的名称。所以基本上我通过 src 属性中的简单相对路径（只是图像文件的名称）获得的路径为图像创建了正确的路径。唯一的问题是添加了视图文件扩展名......

有谁知道如何解决这个问题？

编辑2：

顺便说一句，我本可以使用 Url.Content，但由于某种原因，它也不起作用。如果我使用这个：

```
<embed  type="image/svg+xml" src="@Url.Content("~/Content/images/da-DK/3153/CheckRotation.svg")"></embed> 
```

...它工作...但是如果我使用它（同样的东西，但在 Views 文件夹中的图像）...

```
<embed  type="image/svg+xml" src="@Url.Content("~/Views/Manuals/da-DK/CheckRotation.svg")"></embed> 
```

......它不起作用。如果我在 web 检查器中检查后一个示例中的路径，它看起来像正确的路径 (localhost:49864/Views/Manuals/da-DK/CheckRotation.svg)，但显示找不到它的消息。

编辑 3：

Thinking Sites 的回答给了我一个解决方案，我只需要稍微修改一下，因为我需要为视图本身建议的路线。所以我添加了这条路线：

```
routes.MapRoute(
                "Image",
                "{controller}/{action}/{lang}/{prod}",
                new { controller = "Manuals", action = "Image", lang = "en-US", prod = "name" }
        ); 
```

我对路径做了一些调整（如建议的那样），因为 prod 现在实际上带有整个文件名，包括扩展名：

```
public ActionResult Image(string lang, string prod)
        {
            var root = Server.MapPath("~/Views/Manuals/");
            var filepath = Path.Combine(root, lang, prod); // whatever creates your path here.
            return File(filepath, "image/svg+xml");
        } 
```

然后在视图中我可以有这样的路径：

```
<embed  type="image/svg+xml" src="@Url.Content("/Manuals/Image/da-DK/CheckRotation.svg")"></embed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:26:28.013

使用这条路线：

```
routes.MapRoute(
                "Parameter",
                "{controller}/{action}/{lang}/{prod}",
                new { controller = "Manuals", action = "Product", lang = "en-US", prod = "name" }
        ); 
```

在您的控制器 ManualsController 中创建此操作

```
public ActionResult Product(string lang,string prod){
   var root = Server.MapPath("~/views/manuals/");
   var filepath = Path.Combine(root,lang,prod,".svg"); // whatever creates your path here.
   return File(filepath ,"your mime type");
} 
```

无需自定义视图引擎。FileResult 就是为这种场合而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:28:40.047

也许您的问题的答案在您的错误中：

未找到视图“da-DK/ATEXSymbol.svg”或其主视图，或者**没有视图引擎支持搜索到的位置**。

您是否考虑过插入[自定义视图引擎](https://www.google.com/search?q=mvc%20custom%20view%20engine)？

我自己从未创建过一个并且无法提供指导，因此这是一个不完整的答案（我可以稍后根据评论删除）。不过，这是一个有趣的问题，据我所知，这是一个独特的问题。我想知道谁会规定将项目“大量倾倒”以用于一个按惯例不按这种方式工作的框架。不过，如果您使用的是 Web 表单，那将非常简单。

# testing - 使用fitnesse表中的数据作为变量

> ID：10450909
> 
> 赞同：1
> 
> 时间：2012-05-04T14:33:43.333
> 
> 标签：testing, fitnesse

我刚刚开始使用 Fitnesse。我正在尝试使用查询的结果（数字？），并在另一个测试夹具中使用该结果。所以例如

```
!|Create Account                                                                                    |
|Contractor No  |Account State  |Account Name  |Account Type  |Invoice Template Name|Number?|Result?|
|${ContractorNo}|${AccountState}|${AccountName}|${AccountType}|${InvoiceTempName}   |       |TRUE   |

!|Check Account                      |
|AccountNo           |Account Exists?|
|(result from number?)|TRUE          | 
```

有没有这样做？我试过这个：[SymbolTestTables](http://fitnesse.org/FitNesse.UserGuide.SymbolsInTestTables)，但这似乎是针对整个记录，而不仅仅是一个函数的结果。

正如我所说，我是健身新手，所以如果这很容易，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:39:35.117

我认为您所指的页面是 Fit 样式符号。

我建议人们要么使用 Slim，要么迁移到 FitLibrary；因为两者都比 FIT 得到更好的支持。

如果您以 Slim 方式做事，您可能需要查看此页面：[表中的符号](http://www.fitnesse.org/FitNesse.UserGuide.WritingAcceptanceTests.SliM.SymbolsInTables)

如果您使用 Slim 方式，您的表格将如下所示：

```
!|Create Account                                                                                    |
|Contractor No  |Account State  |Account Name  |Account Type  |Invoice Template Name|Number?               |Result?|
|${ContractorNo}|${AccountState}|${AccountName}|${AccountType}|${InvoiceTempName}   |$accountNumber=      |TRUE   |

!|Check Account                |
|AccountNo     |Account Exists?|
|$accountNumber|TRUE           | 
```

我对 FitLibrary 样式不太熟悉，所以我会向您推荐他们的文档： http: [//sourceforge.net/apps/mediawiki/fitlibrary/index.php ?title=Main_Page](http://sourceforge.net/apps/mediawiki/fitlibrary/index.php?title=Main_Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:10:44.377

使用 .NET/Fit，您可以使用 << 和 >> 来存储和调用值，但我不知道 Java 是否支持这一点：

```
!|Create Account                                                                                    |
|Contractor No  |Account State  |Account Name  |Account Type  |Invoice Template Name|Number?        |Result?|
|${ContractorNo}|${AccountState}|${AccountName}|${AccountType}|${InvoiceTempName}   |>>AccountNumber|TRUE   |

!|Check Account                      |
|AccountNo           |Account Exists?|
|<<AccountNumber     |TRUE          | 
```

# c# - 如何对自定义数据注释进行单元测试

> ID：10450914
> 
> 赞同：4
> 
> 时间：2012-05-04T14:33:58.263
> 
> 标签：c#, unit-testing, data-annotations

我有以下简单的类数据注释来控制电话号码的区域：

```
public class PhoneAreaAttribute : ValidationAttribute, IClientValidatable
{
    public const string ValidInitNumber = "0";
    public const int MinLen = 2;
    public const int MaxLen = 4;

    public override bool IsValid(object value)
    {
        var area = (string)value;
        if (string.IsNullOrWhiteSpace(area))
        {
            return true;
        }

        if (area.StartsWith(PhoneAreaAttribute.ValidInitNumber))
        {
            return false;
        }

        if (!Regex.IsMatch(area, @"^[\d]+$"))
        {
            return false;
        }

        if (!area.LengthBetween(PhoneAreaAttribute.MinLen, PhoneAreaAttribute.MaxLen))
        {
            return false;
        }

        return true;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "phoneArea",
        };

        yield return rule;
    }
} 
```

我不知道这将如何成为此类的正确单元测试。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:29:54.463

好的，基本上测试一个属性与测试任何常规类是一样的。我上了你的课并稍微减少了一点，以便我可以运行它（你创建了一些我不想重新创建的扩展方法）。您可以在下面找到此类定义。

```
public class PhoneAreaAttribute : ValidationAttribute
{
    public const string ValidInitNumber = "0";

    public override bool IsValid(object value)
    {
        var area = (string)value;

        if (string.IsNullOrEmpty(area))
        {
            return true;
        }

        if (area.StartsWith(PhoneAreaAttribute.ValidInitNumber))
        {
            return false;
        }

        return true;
    }
} 
```

事先注意：我的一些单元测试命名约定可能与您使用的不同（那里有一些）。

现在我们将创建一个单元测试。我知道您已经有一个*Test Project*，如果您没有，只需创建一个。在这个测试项目中，您将创建一个新的单元测试（*Basic Unit Test*），我们将其命名`PhoneAreaAttributeTest`。

作为一种好的做法，我创建了一个*测试初始化​​程序*来创建所有共享的“资源”，在这种情况下是一个`PhoneAreaAttribute`类的新实例。是的，您可以创建一个实例，就像您习惯使用“常规”类一样（事实上，“常规”类和您的属性类之间没有太大区别）。

现在我们准备开始为这些方法编写测试。基本上你会想要处理所有可能的情况。我将在这里向您展示我的（简化的）IsValid 方法中可能出现的两种情况。首先，我将查看给定的对象参数是否可以转换为字符串（这是第一个场景/TestMethod）。其次，我将查看“IsNullOrEmpty”的路径是否被正确处理（这是第二个场景/TestMethod）。

如您所见，这只是一个常规的单元测试。这些只是最基本的。如果您仍有疑问，我还建议您阅读一些教程。

这是`PhoneAreaAttributeTest`测试类：

```
[TestClass]
public class PhoneAreaAttributeTest
{
    public PhoneAreaAttribute PhoneAreaAttribute { get; set; }

    [TestInitialize]
    public void PhoneAreaAttributeTest_TestInitialise()
    {
        PhoneAreaAttribute = new PhoneAreaAttribute();
    }

    [TestMethod]
    [ExpectedException(typeof(InvalidCastException))]
    public void PhoneAreaAttributeTest_IsValid_ThrowsInvalidCastException()
    {
        object objectToTest = new object();
        PhoneAreaAttribute.IsValid(objectToTest);
    }

    [TestMethod]
    public void PhoneAreaAttributeTest_IsValid_NullOrEmpty_True()
    {
        string nullToTest = null;
        string emptoToTest = string.Empty;

        var nullTestResult = PhoneAreaAttribute.IsValid(nullToTest);
        var emptyTestResult = PhoneAreaAttribute.IsValid(emptoToTest);

        Assert.IsTrue(nullTestResult, "Null Test should return true.");
        Assert.IsTrue(emptyTestResult, "Empty Test should return true.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:30:26.677

在考虑如何“正确”测试此类时，请考虑以下事项：

*   的[圈复杂度](http://cyvis.sourceforge.net/cyclomatic_complexity.html)(CC)`IsValid`为 5。
*   该方法依赖于另外两种方法`IsNullOrWhiteSpace`和`LengthBetween`. 我相信这两个都有额外的CC 2。
*   有投掷的机会`InvalidCastException`。这代表了另一个潜在的测试用例。

总共有 8 个案例需要测试。使用[xUnit.net](http://xunit.codeplex.com/)和[Fluent Assertions](http://fluentassertions.codeplex.com/) *（您也可以在 NUnit 中执行类似的操作），您可以编写以下单元测试来“正确”测试此方法：

```
public class PhoneAreaAttributeTests
{
    [Theory]
    [InlineData("123", true)]
    [InlineData(" ", true)]
    [InlineData(null, true)]
    public void IsValid_WithCorrectInput_ReturnsTrue(
        object value, bool expected)
    {
        // Setup
        var phoneAreaAttribute = CreatePhoneAreaAttribute();

        // Exercise
        var actual = phoneAreaAttribute.IsValid(value);

        // Verify
        actual.Should().Be(expected, "{0} should be valid input", value);

        // Teardown            
    }

    [Theory]
    [InlineData("012", false)]
    [InlineData("A12", false)]
    [InlineData("1", false)]
    [InlineData("12345", false)]
    public void IsValid_WithIncorrectInput_ReturnsFalse(
        object value, bool expected)
    {
        // Setup
        var phoneAreaAttribute = CreatePhoneAreaAttribute();

        // Exercise
        var actual = phoneAreaAttribute.IsValid(value);

        // Verify
        actual.Should().Be(expected, "{0} should be invalid input", value);

        // Teardown      
    }

    [Fact]
    public void IsValid_UsingNonStringInput_ThrowsExcpetion()
    {
        // Setup
        var phoneAreaAttribute = CreatePhoneAreaAttribute();
        const int input = 123;

        // Exercise
        // Verify
        Assert.Throws<InvalidCastException>(
            () => phoneAreaAttribute.IsValid(input));

        // Teardown     
    }

    // Simple factory method so that if we change the
    // constructor, we don't have to change all our 
    // tests reliant on this object.
    public PhoneAreaAttribute CreatePhoneAreaAttribute()
    {
        return new PhoneAreaAttribute();
    }
} 
```

*我喜欢使用 Fluent Assertions，在这种情况下它会有所帮助，因为我们可以指定一条消息让我们知道断言何时失败，哪个是失败的断言。这些数据驱动的测试很好，因为它们可以通过将各种排列组合在一起来减少我们需要编写的类似测试方法的数量。当我们这样做时，最好通过自定义消息避免[Assertion Roulette ，如所解释的那样。](http://xunitpatterns.com/Assertion%20Roulette.html)顺便说一句，Fluent Assertions 可以与许多测试框架一起使用。

# iphone - Grand Central Dispatch - 加载时显示第一张图片？

> ID：10450923
> 
> 赞同：5
> 
> 时间：2012-05-04T14:35:02.770
> 
> 标签：iphone, ios, grand-central-dispatch

我只想预渲染不同的图像以便快速访问。我在这里使用大中央调度来执行不同的块。

启动队列后，我想在完成后设置第一张图像。使用下面的当前代码，不幸的是，只有在渲染完所有图像后才会显示第一张图像。

那么如何修改代码呢？每张图片完成后是否有可能获得委托？

这是代码：

```
// Async prerendering
    for (int i = 0; i < count; i++) {

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

            dispatch_async(dispatch_get_main_queue(), ^{

                UIImage* finalImage = [self prerenderImageForIndex:i];
                [self.imageArray addObject:finalImage];   

                // TODO: i want to display the first image. 
                // rendering goes on in the background 

               if (i==0 && [self.imageArray objectAtIndex:0] != nil ) {
                    self.image = [self.imageArray objectAtIndex:0];
                }
            });
        });
    } 
```

更新：

```
-(UIImage*) prerenderImageForIndex:(int)frame {
 UIGraphicsBeginImageContextWithOptions(CGSizeMake(self.frame.size.width, self.frame.size.height), NO, 0);      

        for (int i=0; i< [configurationArray count]; i++) {     
         //... get the layerName

        UIImage* layerImage = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:layerName ofType:@"png"]];

              // draw layer with blendmode and alpha 
        [layerImage drawInRect:CGRectMake(x, y, layerImage.size.width, layerImage.size.height) 
                     blendMode:layerblendmode 
                         alpha: layeralpha];

           }   

    // Get current context as an UIImage
    UIImage* finalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

return finalImage;

} 
```

* * *

我只想知道如何取消/停止或重新启动正在运行的队列？那可能吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:04:43.773

我不确定为什么你有这样嵌套的 dispatch_async 调用，但也许这就是问题所在。我想像下面这样的东西会完成你想要的。当您真正想要进行 UI 更新时，您只需要获取主队列，其他一切都应该在后台队列中完成。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    UIImage* finalImage = [self prerenderImageForIndex:i];
    [self.imageArray addObject:finalImage];

    if (i==0 && [self.imageArray objectAtIndex:0] != nil ) {
        dispatch_async(dispatch_get_main_queue(), ^{   
            self.image = [self.imageArray objectAtIndex:0];
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:28:11.493

您必须使用串行队列，例如执行 FIFO：

```
dispatch_queue_t queue;
queue = dispatch_queue_create("myImageQueue", NULL);
for(int i = 0; i<count; i++) {
    dispatch_async(queue, ^{
        // do your stuff in the right order
    });
} 
```

对于串行调度队列，请查看：http: [//developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

# ruby-on-rails - 按相关（属于）表中的字段对查询进行排序？

> ID：10450926
> 
> 赞同：0
> 
> 时间：2012-05-04T14:35:22.710
> 
> 标签：ruby-on-rails

导轨 2.3.5 / Ruby 1.8.6

我有一个“团队”表，其中包含一个“中心”id (center_id) 字段（团队属于中心，中心有很多团队）。在视图中，我使用了中心的名称：

```
Controller (sorting by team 'name':
 @teams= Team.find(:all, :order => "name ASC")
View:
 <%=h team.center.center_name %> 
```

如何按中心名称对查询进行排序？像：

```
@teams= Team.find(:all, :order => "center.center_name ASC name ASC") 
```

我什至不确定这是否可能......我是否应该尝试解决这个问题，将逻辑添加到“@teams.each do |team|” 环形？或者也许通过将查询结果收集到一个普通数组中然后对数组进行排序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:43:07.927

看起来你很接近。你有一个“中心”表吗？如果是这样尝试：

```
@teams= Team.find(:all, :include=>:center, :order => "centers.center_name ASC, teams.name ASC") 
```

# javascript - javascript / html5 - 文本到图像

> ID：10450930
> 
> 赞同：0
> 
> 时间：2012-05-04T14:35:36.530
> 
> 标签：javascript, html

我需要帮助将文本转换为图像。有没有办法通过 js 或 jquery 来做到这一点..？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T14:38:43.003

使用画布并在画布上打印文本。之后，可以将画布导出到图像。

```
<canvas id="e" width="200" height="200"></canvas>
<script>
  var canvas = document.getElementById("e");
  var context = canvas.getContext("2d");
  context.fillStyle = "blue";
  context.font = "bold 16px Arial";
  context.fillText("Your text", 100, 100);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:37:30.133

将您的文本绘制到`canvas`标签中。

```
var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d');

ctx.fillText(myText, x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:42:22.297

有一个图书馆试图做到这一点。

[http://hertzen.com/experiments/jsfeedback/](http://hertzen.com/experiments/jsfeedback/)

从 html 读取 DOM 并将其呈现到画布上，在某些情况下失败，但在一般情况下有效。

# java - 运行相同的 Java 代码 Windows 与 Unix 时的性能差异

> ID：10450932
> 
> 赞同：1
> 
> 时间：2012-05-04T14:35:46.673
> 
> 标签：java, windows, eclipse, unix

我在windows中通过eclipse运行下面的代码，然后在Unix中作为独立的java运行。

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.sql.SQLException;
import java.text.ParseException;

public class readObjectBoeing {

/**
 * @param args
 * @throws ParseException 
 * @throws SQLException 
 */
public static void main(String[] args) {
    //File file = new File("/opt/app/d1ebp1m1/dv01/Vibhor/test/00017741_repository.dat");
    File file = new File("C:/_Vibhor/00017741_repository.dat");
    InputStream is;
    try {
        is = new FileInputStream(file);
        byte[] b = toByteArray(is);//read from file;
        Object o1 =null;
        o1 = convertByteArrayToObject(b);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
public static Object convertByteArrayToObject(byte[] buf) throws Exception 
{

    if (buf.length == 0)
    {
        return null;
    }
    long startTime = -1;
    long step1=-1,step2=-1;
    Object                  obj = null;
    ByteArrayInputStream    bis = null;
    ObjectInputStream       in  = null;
    try 
    {   
        bis = new ByteArrayInputStream(buf);
        in  = new ObjectInputStream(bis);
        startTime = System.currentTimeMillis()/1000;
        obj = in.readObject();
        step1 = System.currentTimeMillis()/1000 - startTime ;
        System.out.println("in.readObject()!! :  " + step1);
    } 
    catch (Exception e) 
    {
        throw e;
    } 
    finally 
    {
        if (in != null) 
        {
            in.close();
        }
        if (bis != null) 
        {
            bis.close();
        }
        in  = null;
        bis = null;
    }

    return obj;
}
public static byte[] toByteArray(InputStream input) throws IOException
{
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    long count = 0L;
    byte[] buffer =new byte[4096];
    for(int n = 0; -1 != (n = input.read(buffer));){
        output.write(buffer, 0, n);
        count += n;
    }
    return output.toByteArray();
}

} 
```

00017741_repository.dat - 它是 57Mb 文件。
在 Windows`obj = in.readObject();`中 - 我需要 4-5 秒。
但在 Unix`obj = in.readObject();`中，我需要 19 - 25 秒！

我在这两种情况下都使用 VM args -Xmx512m 来执行。

在 unix 中：

```
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) Server VM (build 20.4-b02, mixed mode) 
```

在 Windows 中：

```
jre 1.6.0_26 
```

我在这里想念什么？有什么建议可以提高 unix 的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:40:57.723

在平台之间发现这样的差异并不令人震惊。了解虽然字节码相同，但 JVM 是特定于平台的。

有很多这样的领域，您的代码在一个平台上完美运行，而在另一个平台上却失败了。我遇到的一种情况是在文件中拖放，其中 unix（至少是 ubuntu）会丢弃具有与 windows 不同的数据风格的文件。

您必须在您打算运行代码的所有平台上进行测试

此外，在您的特定情况下，您应该尝试更有效地从输入流中读取（使用 byte[]）或创建一个 BufferedInputStream 来包装您的 FileInputStream

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:42:57.007

以下是您可以做的两件具体的事情来解决这个问题：

1.  确保在 Unix 上文件驻留在本地文件系统而不是网络挂载上；
2.  使用分析器（例如[YourKit](http://www.yourkit.com/overview/index.jsp)）找出时间花在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:43:43.293

您还必须区分使用的不同 JVM。例如，在 *nix 系统上，广泛使用像“icedtea”或“OpenJDK”这样的虚拟机（因为它们是默认安装）。

# flex-lexer - 如何使用 Flex（快速词法分析器）进行 unlex？

> ID：10450934
> 
> 赞同：4
> 
> 时间：2012-05-04T14:35:59.383
> 
> 标签：flex-lexer, lex, lexical-analysis

有没有办法使用 Flex 将令牌放回输入流？我想像一些功能`yyunlex()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:28:51.523

有一个宏`REJECT`会将令牌放回流中并继续匹配其他规则，就好像第一个匹配没有一样。如果您只想将一些字符放回流@Kizaru's answer就足够了。

示例片段：

```
%%
a     |
ab    |
abc   |
abcd  ECHO; REJECT;
.|\n  printf("xx%c", *yytext);
%% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:48:35.617

你有几个选择。

`unput(ch)`您可以使用其中 ch 是字符将令牌的每个字符放回输入流中。此调用将 ch 作为输入流上的下一个字符（扫描中要考虑的下一个字符）。因此，如果您在令牌匹配期间保存字符串，则可以执行此操作。

您可能想查看`yyless(0)`哪个会将令牌中的所有字符也放回输入流中。不过我从来没有用过这个，所以我不确定是否有任何问题。您可以指定一个整数`n`，将除前 n 个字符之外的所有字符放回输入流。

现在，如果您要在扫描/解析期间经常这样做，您可能只想使用 lex 来构建标记并将标记放置到您自己的数据结构中进行解析。这类似于 bison 和 yacc 的生成`yyparse()`函数所做的。

# c# - 如何使用后期绑定从 VB.Net 调用位于 C# DLL 中的方法

> ID：10450935
> 
> 赞同：1
> 
> 时间：2012-05-04T14:36:01.087
> 
> 标签：c#, .net, vb.net, late-binding

我无法掌握各种“Init”、“Accumulate”... 方法的工作原理，以便能够从 VB.Net 代码调用位于 DLL 中的方法。

假设要调用的方法具有以下签名：

```
public double ComputeMeanPosition(ref SortedList<DateTime, double> posByTime) 
```

请您指出一个使用方法的实际示例，或者简单地给我一些提示，说明如何将参数实际传递给方法，调用它并获取结果？

@Olivier Jacot-Descombes：我肯定会在类名前加上命名空间名称，但无法访问该对象。事实上，我很惊讶您的建议不涉及以下方法，通过对加载的 DLL 的内省显示：

```
Type: MyClassName
        Method: Void Init()
        Method: Void Accumulate(System.Data.SqlTypes.SqlDouble, System.Data.SqlTypes.SqlDateTime, System.Data.SqlTypes.SqlBoolean)
        Method: Void Merge(MyClassName)
        Method: System.Data.SqlTypes.SqlDouble Terminate()
        Method: Void Write(System.IO.BinaryWriter)
        Method: Void Read(System.IO.BinaryReader)
        Method: Boolean Equals(System.Object)
        Method: Int32 GetHashCode()
        Method: System.String ToString()
        Method: System.Type GetType() 
```

**编辑**

事实上，我有一个类似于下面的代码，它成功地检查了 DLL 并从中获取了几种类型和方法，为我想调用的方法提供了以下结果。

这是代码

> ```
>  For Each oneModule As Reflection.Module In useAssembly.GetLoadedModules()
>             Console.WriteLine("   - " & oneModule.Name)
>             For Each oneType As System.Type In oneModule.GetTypes()
>                 Console.WriteLine("     Type: " & oneType.Name)
>                 For Each oneField As Reflection.FieldInfo In oneType.GetFields()
>                     Console.WriteLine("        Field: " & oneField.ToString())
>                 Next oneField
> 
>                 For Each oneMethod As Reflection.MethodInfo In oneType.GetMethods()
>                     Console.WriteLine("        Method: " & oneMethod.ToString())
> 
>                     [[ ADD "Invoke" here ?]]
>                 Next oneMethod
>             Next oneType
>         Next oneModule 
> ```

最后，似乎 [[...]] 在应该调用 Invoke 方法以调用我选择的方法的地方，但这就是我卡住的地方......我需要构建调用它之前的对象？我应该如何传递参数？如何得到结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:50:57.687

像这样的东西应该工作：

```
using System;
using System.Reflection;
using System.IO;

public class MainClass
{
      public static int Main(string[] args)
      {
           Assembly a = null;
           try
           {
                a = Assembly.Load("YourLibraryName");
           }
           catch(FileNotFoundException e)
               {Console.WriteLine(e.Message);}

           Type classType = a.GetType("YourLibraryName.ClassName");

           object obj = Activator.CreateInstance(classType);

           object[] paramArray = new object[1];    
           paramArray[0] = new SortledList<DateTime, double>();
           MethodInfo mi = classType.GetMethod("ComputeMeanPosition");
           mi.Invoke(obj, paramArray);

           return 0;
       }
 } 
```

对于 VB.NET：

```
Imports System
Imports System.Reflection
Imports System.IO

Public Class MainClass
    Public Shared Function Main(args As String()) As Integer
        Dim a As Assembly = Nothing
        Try
            a = Assembly.Load("YourLibraryName")
        Catch e As FileNotFoundException
            Console.WriteLine(e.Message)
        End Try

        Dim classType As Type = a.[GetType]("YourLibraryName.ClassName")

        Dim obj As Object = Activator.CreateInstance(classType)

        Dim [paramArray] As Object() = New Object(0) {}
        [paramArray](0) = New SortledList(Of DateTime, Double)()
        Dim mi As MethodInfo = classType.GetMethod("ComputeMeanPosition")
        mi.Invoke(obj, [paramArray])

        Return 0
    End Function
End Class 
```

经过测试，这有效：

```
 Dim a As Assembly = Nothing
    Try
        a = Assembly.Load("TestLib")
    Catch ex As FileNotFoundException
        Console.WriteLine(ex.Message)
    End Try

    Dim classType As Type = a.[GetType]("TestLib.Class1")

    Dim obj As Object = Activator.CreateInstance(classType)

    Dim [paramArray] As Object() = New Object(0) {}
    [paramArray](0) = New SortedList(Of DateTime, Double)()
    Dim mi As MethodInfo = classType.GetMethod("ComputeMeanPosition")
    mi.Invoke(obj, [paramArray]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:45:38.650

这不是实际的代码，因为我不是坐在实际的 c# 编辑器前，而是像这样

```
// using System.Reflection required

// first load the external assembly into the appdomain and 
// create an instance of the object
var assembly = Assembly.Load("Path to the Assembly");
var type = assembley.GetType("TheNameOfTheClass");
var ctor = type.GetConstuctor();
var object = ctor.Invoke(); // assuming an empty construtor, else you'll need to pass in data

// next invoke the method
var methodInfo = assembly.GetMethodByName("ComputeMeanPosition");
var param = new SortedList<DateTime, double>();
var result = methodInfo.Invoke(object, new object[] { param }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:44:11.487

您可以像在 VB 中这样声明一样调用此方法

```
Public Function ComputeMeanPosition( _
    ByRef posByTime As SortedList(Of DateTime, Double)) As Double 
```

* * *

注意：我使用这个在线[片段转换器](http://codeconverter.sharpdevelop.net/SnippetConverter.aspx)将 C# 代码转换为 VB。`{}`在转换之前，您必须将一个空的方法主体添加到 C# 方法标头。

```
public double ComputeMeanPosition(ref SortedList<DateTime, double> posByTime) {} 
```

* * *

由于此方法未`static`在 C# 中（`Shared`在 VB 中）中声明，因此您首先需要创建一个对象。该方法很可能在类中声明。假设这个类被命名为“MyClass”，那么你将不得不写这样的东西

```
Dim posByTime = New SortedList(Of DateTime, Double)()
Dim obj = New MyClass()
Dim result As Double = obj.ComputeMeanPosition(posByTime) 
```

如果构造函数（`New`方法）声明了参数，则必须在创建对象时传递它们

```
Dim obj = New MyClass(arg1, arg2, ...) 
```

根据`ComputeMeanPosition`预期，您必须`posByTime`在调用它之前将项目添加到列表中。

* * *

如果该方法是`static`在 C# 中（`Shared`在 VB 中）声明的，您将使用类名来限定它，而不是创建一个对象。

```
Dim posByTime = New SortedList(Of DateTime, Double)()
Dim result As Double = MyClass.ComputeMeanPosition(posByTime) 
```

* * *

**更新**

如果你动态加载程序集，你可能会做这样的事情

```
Dim ass As Assembly = Assembly.LoadFrom("C:\SomePath\MyDll.dll")
Dim obj As Object = ass.CreateInstance("MyClass", True) 

Dim posByTime = New SortedList(Of DateTime, Double)()
Dim result As Double = obj.ComputeMeanPosition(posByTime) 
```

而且您必须设置`Option Strict Off`后期绑定。

* * *

如果构造函数需要参数，则必须将它们传递给另一个重载`CreateInstance`

```
Dim args = new Object() { arg1, arg2, ... }
Dim obj As Object = ass.CreateInstance("MyClass", True, _
    BindingFlags.Public Or BindingFlags.Instance, Nothing, Nothing, _
    args, Nothing, Nothing) 
```

# java - 数据存储：删除事务之外的实体

> ID：10450936
> 
> 赞同：0
> 
> 时间：2012-05-04T14:36:07.960
> 
> 标签：java, google-app-engine, google-cloud-datastore

我无法找到完全解释从数据存储中删除的实体（我正在使用 JDO deletePersistent）的文档，而无需进行事务处理。当为了性能和避免争用而不使用事务时，我可以承受在并行更新期间失去数据准确性。

但是我如何确保当我的代码同时在不同的机器上运行时，**删除**操作不会被稍后的**更新覆盖/**在另一台机器上对该实体进行先前的读取，我让 PersistenceManager 照顾对附加对象的隐式更新。

编辑：尝试在 deletePersistent 之后更新该实体将导致异常，但那是在尝试更新传递给 deletePersistent 的完全相同的副本时。但如果它是另一台机器上的不同副本，将被视为更新已删除实体（无效）或**插入或更新**导致将该实体放回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:40:06.747

这取自 GAE 文档：

> 使用事务
> 
> 事务是对一个或多个实体的一组 Datastore 操作。每个事务都保证是原子的，这意味着事务永远不会部分应用。要么应用事务中的所有操作，要么不应用它们。
> 
> 在以下情况下，操作可能会失败：
> 
> 太多用户尝试同时修改实体组。应用程序达到资源限制。数据存储遇到内部错误。

由于事务保证是原子的，因此像单个删除操作这样的 ATOMIC 操作将始终在事务内部或外部工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:01:00.670

答案是肯定的，即使在对象被删除之后，如果之前读取它并且在提交删除后提交更新，它也会被放回，因为@Nick Johnson 评论插入和更新是相同的。测试了在获取对象进行更新后使用 20 秒线程休眠，允许删除对象然后放回。

# android - 如何在 achartengine 中为 Y 轴上的每个值设置网格线？

> ID：10450937
> 
> 赞同：1
> 
> 时间：2012-05-04T14:36:16.970
> 
> 标签：android, achartengine

我正在使用**achartengine 1.0**并且我正在尝试为我的**LineChart**设置网格线。

**Y 轴**的最小值为 1，最大值为 7。我需要图表显示此区间内的每一步，因此我添加了 1、2、3、... 的标签

`addYTextLabel();`

现在我想为**Y-axis**上的每个值显示一条网格线。

但是当我为这个轴添加网格时，只有 3 行，分别位于 2、4 和 6。

如何让网格为所有值显示一条线？

最好的问候， htz

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:24:39.740

可以`setYLabels()`设置 Y 轴显示的标签数量。有了显示的标签，就会出现一条网格线。

# android - 如何在 onGeolocationPermissionsShowPrompt 中显示弹出窗口

> ID：10450943
> 
> 赞同：1
> 
> 时间：2012-05-04T14:37:00.190
> 
> 标签：android, geolocation, android-webview, android-alertdialog

我有一个地理定位权限问题没有出现在 webview 中，我不得不添加以下自动授予权限的代码。

```
 mWebView.setWebChromeClient(new WebChromeClient() {
        @Override
            public void onGeolocationPermissionsShowPrompt(String origin, 
                                                           GeolocationPermissions.Callback callback) 
            {

                  callback.invoke(origin,true,false);
            }               
       });     
 } 
```

一切正常。现在我想在这段代码中显示一个自定义弹出窗口，而不是给予自动权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:59:11.237

我的解决方案是在 setWebChromeClient 中创建一个 AlertDialog。在这种情况下，我决定用户必须始终确认是否共享您的位置。

```
reportingView.setWebChromeClient(new WebChromeClient() {
             public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
                    final GeolocationPermissions.Callback callbackF = callback;
                    final String originF = origin;
                    AlertDialog.Builder builder = new AlertDialog.Builder(_context);
                    builder.setTitle("Locations");
                    builder.setMessage("MyApp want to know your location")
                    .setCancelable(true)
                    .setPositiveButton("Share location", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           callbackF.invoke(originF, true, false);
                       }
                    }).setNegativeButton("Decline", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           callbackF.invoke(originF, false, false);
                       }
                    });
                    AlertDialog alert = builder.create();
                    alert.show();
                 }
                }); 
```

# sql - Oracle SQL - 比较空值时的 JOIN 性能

> ID：10450945
> 
> 赞同：2
> 
> 时间：2012-05-04T14:37:05.807
> 
> 标签：sql, performance, oracle, join

早上好，

在我昨天在两个体面大小的结果集（每个<50k结果）之间编写的查询中，我的部分 JOIN 是检查数据是否匹配或为空的子句（下面的简化版本）：

```
SELECT a JOIN b ON a.class = b.class OR (a.class is null AND b.class is null) 
```

然而，我注意到一个以使用 OR 语句为中心的严重性能问题。我使用以下方法解决了这个问题：

```
SELECT a JOIN b ON NVL(a.class, 'N/A') = NVL(b.class, 'N/A') 
```

第一个查询的运行时间长得令人无法接受，而第二个查询要快几个数量级（>45 分钟 vs. <1）。由于更多的比较，我希望 OR 运行得更慢，但是在这个特定的数据集中，a.class = b.class = null 的情况相对较少。

什么会导致表演时间如此显着增加？Oracle SQL 是否不像许多其他语言那样短路布尔比较？有没有办法挽救第二个查询的第一个查询（用于一般 SQL 而不仅仅是 Oracle）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:16:13.860

您将返回一个带有任何具有空类的记录的叉积。这对你的结果好吗？

我在 11gR2 中创建了两个示例查询：

```
WITH a as 
(select NULL as class, 5 as columna from dual
 UNION
 select NULL as class, 7 as columna from dual
 UNION
 select NULL as class, 9 as columna from dual
 UNION
 select 'X' as class, 3 as columna from dual
 UNION
 select 'Y' as class, 2 as columna from dual),
 b as 
 (select NULL as class, 2 as columnb from dual
 UNION
 select NULL as class, 15 as columnb from dual
 UNION
 select NULL as class, 5 as columnb from dual
 UNION
 select 'X' as class, 7 as columnb from dual
 UNION
 select 'Y' as class, 9 as columnb from dual)
    SELECT * from a JOIN b ON (a.class = b.class 
                              OR (a.class is null AND b.class is null)) 
```

当我在这个查询上运行 EXPLAIN PLAN 时，它表明表（在我的例子中是内联视图）是通过 NESTED LOOPS 连接的。NESTED LOOPS 连接通过扫描一个表的第一行，然后扫描另一个表的每一行以查找匹配项，然后扫描第一个表的第二行，在第二个表上查找匹配项等操作。因为您不是直接比较JOIN 的 OR 部分中的任何一个表，优化器都必须使用 NESTED LOOPS。

在幕后，它可能看起来像：

*   获取表 A 的第 1 行。如果类为空，则将表 A 中的这一行包含在结果集中。
*   虽然仍在表 A 的第 1 行，但在表 B 中搜索类为空的所有行。
*   对表 A 第 1 行和表 B 中找到的所有行执行叉积
*   在结果集中包含这些行
*   获取表 A，第 2 行。如果类为空，则将表 A 中的这一行包含在结果集中。
*   .... ETC

当我将 SELECT 语句更改为 时`SELECT * FROM a JOIN b ON NVL(a.class, 'N/A') = NVL(b.class, 'N/A')`，EXPLAIN 表示使用了 HASH JOIN。散列连接本质上生成小表的每个连接键的散列，然后扫描大表，在小表中找到匹配的每一行的散列。在这种情况下，由于它是一个简单的 Equijoin，优化器可以毫无问题地散列驱动表的每一行。

在幕后，它可能看起来像：

*   遍历表 A，将 NULL 类值转换为“N/A”
*   散列表 A 的每一行。
*   哈希表 A 现在位于临时空间或内存中。
*   扫描表 B，将 NULL 类值转换为“N/A”，然后计算值的哈希值。哈希表中的查找哈希，如果存在，则将表 A 和 B 中的连接行包含在结果集中。
*   继续扫描 B.

如果您对查询运行 EXPLAIN PLAN，您可能会发现类似的结果。

即使最终结果是相同的，由于您没有在第一个查询中使用“OR”*连接*表，因此优化器无法使用更好的连接方法。如果驱动表很大，或者如果您强制对大型辅助表进行全表扫描，则嵌套循环可能会非常慢。

您可以使用 ANSI`COALESCE`函数来模拟其他数据库系统中的 NVL oracle 函数。这里真正的问题是你试图加入一个 NULL 值，在那里你真的应该有一个“NO CLASS”或其他一些识别“null”类的方法，在 null = nothing 而不是 null = unknown 的意义上.

**在评论中回答您的问题的附录：**

**对于空查询，SQL 引擎将执行以下操作：**

1.  从表 A 中读取第 1 行，类为空，转换为“N/A”。
2.  表 B 有 3 行，其类为空，将每个空转换为“N/A”。
3.  由于第一行与所有 3 行匹配，因此将 3 行添加到我们的结果集中，一个用于 A1B1、A1B2、A1B3。
4.  从表 A 中读取第 2 行，类为空，转换为 'N/A'/
5.  表 B 有 3 行，其类为空，将每个空转换为“N/A”。
6.  由于第二行匹配所有 3 行，因此将 3 行添加到我们的结果集中，A2B1、A2B2、A2B3 各行。
7.  从表 A 中读取第 3 行，类为空，转换为“N/A”/
8.  表 B 有 3 行，其类为空，将每个空转换为“N/A”。
9.  由于第三行与所有 3 行匹配，因此将 3 行添加到我们的结果集中，A3B1、A3B2、A3B3 各行。10.. 第 4 行和第 5 行不为空，因此不会在连接的这一部分中处理它们。

**对于“N/A”查询，SQL 引擎将执行以下操作：**

1.  从表 A 中读取第 1 行，类为空，转换为“N/A”，散列该值。
2.  从表 A 中读取第 2 行，类为空，转换为“N/A”，散列该值。
3.  从表 A 中读取第 3 行，类为空，转换为“N/A”，散列该值。
4.  从表 A 中读取第 4 行，类不为空，散列此值。
5.  从表 A 中读取第 5 行，类不为空，散列此值。
6.  哈希表 C 现在在内存中。
7.  从表 B 中读取第 1 行，类为空，转换为“N/A”，对值进行哈希处理。
8.  将哈希值与内存中的哈希表进行比较，为每个匹配添加一行到结果集中。找到 3 行，A1、A2 和 A3。结果添加了 A1B1、A2B1、A3B1。
9.  从表 B 中读取第 2 行，类为空，转换为“N/A”，散列值。
10.  将哈希值与内存中的哈希表进行比较，为每个匹配添加一行到结果集中。找到 3 行，A1、A2 和 A3。结果添加了 A1B2、A2B2、A3B2。
11.  从表 B 中读取第 3 行，类为空，转换为“N/A”，对值进行哈希处理。
12.  将哈希值与内存中的哈希表进行比较，为每个匹配添加一行到结果集中。找到 3 行，A1、A2 和 A3。结果添加了 A1B3、A2B3、A3B3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:51:32.867

在第一种情况下，因为每个 null 都不同，所以数据库不使用优化（对于`a`从表中检查每一行的每一行`b`）。

在第二种情况下，数据库首先将所有空值更改为“N/A”，然后仅比较`a.class`and `b.class`，使用优化

在 Oracle 中比较空值非常耗时。Null 是未定义的值 - 一个 null 与另一个 null 不同。比较两个几乎相同的查询的结果：

```
select 1 from dual where null is null

select 1 from dual where null = null 
```

只有带有特殊`is null`子句的第一个查询返回正确答案。因此，空值不能被索引。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T14:56:23.793

试试这个：

```
SELECT a from Table1 a JOIN JTable1 b ON a.class = b.class
where a.class is null
union all
SELECT a from Table1 a JOIN JTable1 b ON a.class = b.class
where b.class is null 
```

应该更快

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-12T02:59:19.727

解释很简单：第一个必须在join操作中使用嵌套循环，在使用OR操作时**总是会发生这种情况。**第二个必须使用哈希连接操作，它比前一个更快。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-04T15:07:10.743

你为什么不让它变得更容易一些。像

SELECT * FROM a,b WHERE a.class(+)=b.class(+)

我认为它更具可读性。

# java - 半透明JFrame边框JDK 7

> ID：10450948
> 
> 赞同：14
> 
> 时间：2012-05-04T14:37:27.543
> 
> 标签：java, swing, user-interface, jframe, translucency

我在问关于 Translucent JFrame 边框的问题（[见这里](https://stackoverflow.com/questions/10409500/translucent-jframe-border)），我得到了很好的答案，但不幸的是，给出的答案只在 JDK 6 上完美工作，而不是 7。任何想法如何使它与 JDK 7 一起工作？

在 JDK 6 中，它看起来像这样：

![在此处输入图像描述](../Images/9e0526c45b660a628b4d00054890ff9e.png)

和 JDK 7：

![在此处输入图像描述](../Images/3326aead57adff04ccb3324158443ac4.png)

我的代码如下所示：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.border.AbstractBorder;

public class ShadowBorder extends AbstractBorder {

private static final int RADIUS = 30;
private static BufferedImage shadowTop;
private static BufferedImage shadowRight;
private static BufferedImage shadowBottom;
private static BufferedImage shadowLeft;
private static BufferedImage shadowTopLeft;
private static BufferedImage shadowTopRight;
private static BufferedImage shadowBottomLeft;
private static BufferedImage shadowBottomRight;
private static boolean shadowsLoaded = false;

public ShadowBorder() {
    if (!shadowsLoaded) {
        try {
            shadowTop = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-top.png"));
            shadowRight = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-right.png"));
            shadowBottom = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-bottom.png"));
            shadowLeft = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-left.png"));

            shadowTopLeft = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-top-left.png"));
            shadowTopRight = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-top-right.png"));
            shadowBottomLeft = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-bottom-left.png"));
            shadowBottomRight = ImageIO.read(getClass().getResource("/cz/vutbr/fit/assets/shadow-bottom-right.png"));

            shadowsLoaded = true;
        } catch (IOException ex) {
            Logger.getLogger(ShadowBorder.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

@Override
public boolean isBorderOpaque() {
    return false;
}

@Override
public Insets getBorderInsets(Component c) {
    return new Insets(RADIUS, RADIUS, RADIUS, RADIUS);
}

@Override
public Insets getBorderInsets(Component c, Insets insets) {
    insets.top = RADIUS;
    insets.left = RADIUS;
    insets.bottom = RADIUS;
    insets.right = RADIUS;

    return insets;
}

@Override
public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
    Graphics2D g2d = (Graphics2D) g.create();
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.DST_ATOP, 1f));

    int recWidth = width - (2 * RADIUS);
    int recHeight = height - (2 * RADIUS);
    int recX = width - RADIUS;
    int recY = height - RADIUS;

    //edges
    g2d.drawImage(shadowTop.getScaledInstance(recWidth, RADIUS, Image.SCALE_REPLICATE), RADIUS, 0, null);
    g2d.drawImage(shadowRight.getScaledInstance(RADIUS, recHeight, Image.SCALE_REPLICATE), recX, RADIUS, null);
    g2d.drawImage(shadowBottom.getScaledInstance(recWidth, RADIUS, Image.SCALE_REPLICATE), RADIUS, recY, null);
    g2d.drawImage(shadowLeft.getScaledInstance(RADIUS, recHeight, Image.SCALE_REPLICATE), 0, RADIUS, null);

    //corners
    g2d.drawImage(shadowTopLeft, 0, 0, null);
    g2d.drawImage(shadowTopRight, recX, 0, null);
    g2d.drawImage(shadowBottomLeft, 0, recY, null);
    g2d.drawImage(shadowBottomRight, recX, recY, null);

}
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:44:19.737

我刚刚解决了我的问题。问题是，JDK 7 在方法中实现`AWTUtilities.setWindowOpaque()`了来自 JDK6 的`setBackground()`方法，而我（NetBeans 做到了:-)）在不同的地方为 JFrame 设置了默认背景，因此设置背景以`new Color(0, 0, 0, 0);`使 JFrame 透明并且现在一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T14:56:08.313

对于偶然发现此线程并想要自己的透明窗口的人，我设计了这个示例。由于网络上可用的信息很少，我几乎不得不打破一条腿来想出一些可行的东西，并且不使用图像文件或任何东西。[（结合本](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)网站上的不同示例）

```
public class GradientTranslucentWindowDemo
{
    public static void main(String[] args)
    {
        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                final JFrame f = new JFrame("Per-pixel translucent window");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                f.setUndecorated(true);
                f.setBackground(new Color(0, 0, 0, 0));

                final BufferedImage backrgoundImage = makeBackrgoundImage(400, 400);

                JPanel panel = new JPanel()
                {
                    @Override
                    public void paintComponent(Graphics g)
                    {
                        super.paintComponent(g);
                        if (g instanceof Graphics2D)
                        {

                            g.drawImage(backrgoundImage, 0, 0, null);
                        }
                    }
                };
                panel.setOpaque(false);
                f.setContentPane(panel);

                f.setLayout(new GridBagLayout()); // Centers the button
                f.add(new JButton(new AbstractAction("Close")
                {
                    @Override
                    public void actionPerformed(ActionEvent e)
                    {
                        f.dispose();
                    }
                }));

                f.setBounds(100, 100, 400, 400);
                f.setVisible(true);
            }
        });
    }

    static BufferedImage makeBackrgoundImage(int w, int h)
    {
        BufferedImage img = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

        // Draw something transparent
        Graphics2D g = img.createGraphics();
        g.setPaint(new RadialGradientPaint(new Point2D.Float(w / 2, h / 2), (w + h) / 4, new float[]{0, 1}, new Color[]{Color.RED, new Color(1f, 0, 0, 0)}));
        g.fillRect(0, 0, w, h);
        g.setPaint(Color.RED);
        g.drawRect(0, 0, w - 1, h - 1);
        g.dispose();

        return img;
    }
} 
```

# mysql - 改进mysql查询？

> ID：10450951
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:37:33.117
> 
> 标签：mysql

我的尝试是加入 customer 和 order 表，并加入 lineitem 和 order 表。我还索引了 c_mktsegment 字段。我的结果查询是这样的。有什么我可以做的改进吗？

```
select
    o_shippriority,
    l_orderkey,
    o_orderdate,
    sum(l_extendedprice * (1 - l_discount)) as revenue
from
    cust As c
    join ord As o on c.c_custkey = o.o_custkey
    join line As l on o.o_orderkey = l.l_orderkey
where
    c_mktsegment = ':1'
    and o_orderdate < date ':2'
    and l_shipdate > date ':2'
group by
    l_orderkey,
    o_orderdate,
    o_shippriority
order by
    revenue desc,
    o_orderdate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:49:00.887

我看不出这个查询有什么明显错误。为了获得良好的性能，您可能应该在 orders.o_custkey 和 lineitem.l_orderkey 上有索引。c_mktsegment 上的索引可以让数据库快速找到客户记录，但您需要能够从那里找到订单和订单项记录。

您应该进行解释以查看数据库如何处理查询。这取决于很多因素，包括每个表中的记录数和键的分布，所以我不能仅仅通过查看查询来说明计划是什么。但是，如果您运行 Explain 并看到它正在对表进行全文件读取，则应该添加一个索引来防止这种情况发生。这几乎是查询优化的第一条规则。

# c# - 在 setter 中自行订阅 PropertyChanged 或添加方法调用？

> ID：10450952
> 
> 赞同：11
> 
> 时间：2012-05-04T14:37:34.767
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

也许这里已经有这样的问题，但我没有找到。

我有 MVVM 应用程序，在我的应用程序中，`ViewModel`我必须对某些属性的更改执行一些额外的操作（例如，如果`View`更改它们）。您认为哪种方法更好，为什么？

***1st - 添加`AdditionalAction`对 setter 的调用***

```
public class ViewModel: INotifyPropertyChanged
{
  private int _MyProperty;

  public int MyProperty
  {
    get { return _MyProperty; }
    set
    {
      if (_MyProperty == value) return;
      _MyProperty = value;
      RaisePropertyChanged(() => MyProperty);

      // --- ADDITIONAL CODE ---
      AdditionalAction();
    }
  }
} 
```

***2nd - 自行订阅 INotifyPropertyChanged***

```
public class ViewModel: INotifyPropertyChanged
{
  public ViewModel()
  {
    // --- ADDITIONAL CODE ---
    PropertyChanged += OnPropertyChanged;
  }

  private int _MyProperty;

  public int MyProperty
  {
    get { return _MyProperty; }
    set
    {
      if (_MyProperty == value) return;
      _MyProperty = value;
      RaisePropertyChanged(() => MyProperty);
    }
  }

  void PropertyChanged(object sender, PropertyChangedEventArgs e)
  {
    // --- ADDITIONAL CODE ---
    if (e.PropertyName == "MyProperty")
      AdditionalAction();
  }
} 
```

想象一下，我没有性能问题或 10'000 个对象。它只是 View 和 ViewModel。什么是更好的？第一个代码“更小”并且开销更少，但第二个（在我看来）更清晰，我可以将代码片段用于自动生成属性的代码。甚至更多 - 在第二种情况下，我可以在事件处理程序中编写如下内容：

```
On.PropertyChanged(e, p => p.MyProperty, AdditionalAction); 
```

`On`类助手在哪里。

那么，您认为什么更好，为什么？

**更新：**

好的，看起来我找到了一种方法：

***第三 - 在 RaisePropertyChanged 中添加“扩展点”：***

```
public class NotificationObject : INotifyPropertyChanged
{
  void RaisePropertyChanged(Expression<...> property)
  {
    // ... Raise PropertyChanged event
    if (PropertyChanged != null)
      // blah-blah

    // Call extension point
    OnPropertyChanged(property.Name);
  }

  public virtual OnPropertyChanged(string propertyName)
  {
  }
}

public class ViewModel: NotificationObject
{
  private int _MyProperty;

  public int MyProperty
  {
    get { return _MyProperty; }
    set
    {
      if (_MyProperty == value) return;
      _MyProperty = value;
      RaisePropertyChanged(() => MyProperty);
    }
  }

  override OnPropertyChanged(string propertyName)
  {
    if (propertyName == "MyProperty")
      AdditionalAction();
  }
} 
```

这样我们不使用事件，而是从同一个“扩展点”调用所有“附加操作”。“所有添加操作的一个地方”比“不透明的工作流程”更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:58:19.957

我*肯定*会选择第一种方法：

*   天气晴朗
*   它的流程和意图很明确
*   它避免了奇怪的（imo）自我订阅

第二个允许您使用自动生成的属性的“好处”不值得第一个案例的*执行流程*清晰，imo。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:53:23.780

这是“通常”的模式。这允许您将特定于属性的代码放入 OnX 方法中，并允许派生类执行相同的操作。不需要大的 switch 语句，除非您当然是外部侦听器，但这对于 INotifyPropertyChanged 的​​课程来说是正常的。

```
public class NotificationObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void FirePropertyChanged(PropertyChangedEventArgs e)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, e);
    }
}

public class ViewModel : NotificationObject
{
    private int _MyProperty1;
    public int MyProperty1
    {
        get { return _MyProperty1; }
        set
        {
            if (value != _MyProperty1)
            {
                _MyProperty1 = value;
                OnMyProperty1Changed(new PropertyChangedEventArgs("MyProperty1"));
            }
        }
    }

    protected virtual void OnMyProperty1Changed(PropertyChangedEventArgs e)
    {
        FirePropertyChanged(e);
    }

    private int _MyProperty2;
    public int MyProperty2
    {
        get { return _MyProperty2; }
        set
        {
            if (value != _MyProperty2)
            {
                _MyProperty2 = value;
                OnMyProperty2Changed(new PropertyChangedEventArgs("MyProperty2"));
            }
        }
    }

    protected virtual void OnMyProperty2Changed(PropertyChangedEventArgs e)
    {
        FirePropertyChanged(e);
    }
} 
```

# azure - 延迟使虚拟机角色可用，直到启动任务完成

> ID：10450953
> 
> 赞同：0
> 
> 时间：2012-05-04T14:37:40.433
> 
> 标签：azure

是否可能会延迟使虚拟机角色可用，直到启动任务完成？

在将机器安全地添加到负载平衡器之前，我需要在虚拟机启动时完成一些任务。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:15:29.557

找到了解决方案。在 VM Role Startup windows 服务中，我可以处理 RoleEnvironment.StatusCheck 事件。然后我可以调用 SetBusy() 来告诉阻止实例在负载均衡器中可用。

```
 private void RoleEnvironmentStatusCheck(object sender, RoleInstanceStatusCheckEventArgs e)
    {
        if (this.busy)
        {
            e.SetBusy();
        }
        statusCheckWaitHandle.Set();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:57:42.303

我相信将`taskType`属性设置为`simple`将使角色在实际开始之前等待任务完成：

```
<ServiceDefinition name="MyService" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
   <WebRole name="WebRole1">
      <Startup>
         <Task commandLine="Startup.cmd" executionContext="limited" taskType="simple">
         </Task>
      </Startup>
   </WebRole>
</ServiceDefinition> 
```

# jquery - jQuery UI 错误：对话框关闭更改单选按钮

> ID：10450955
> 
> 赞同：1
> 
> 时间：2012-05-04T14:37:55.993
> 
> 标签：jquery, jquery-ui-dialog

**另一个编辑**

调用对话框时会出现问题`close`。我很确定这是一个错误，因为有相关错误[1](http://bugs.jqueryui.com/ticket/4589) ​​、[2](http://bugs.jqueryui.com/ticket/2804)、[3](http://bugs.jqueryui.com/ticket/6137)的历史记录，都标记为已修复。对于 FF 12.0 和 IE9，我得到这个问题的`modal`真假；没有测试其他任何东西。我在 1.8.17。还有人看到这个吗？我可以尝试 1.8.20，但我正在失去生存的意愿。

* * *

我在模式弹出窗口中有两个单选按钮。如果选择按钮 B，会发生很多事情 - 显示一个 div，用户填写一个表单，一些 Ajax-y 的东西继续，一个新的 jQuery UI 选项卡被显示，最终，一个新的模态被显示，我可以再次看到这两个按钮。

在此过程开始时，按钮 B 被明显选中。但是，当该过程完成时，按钮 B 神奇地变为未选中，而按钮 A 被选中。更多信息：

1.  当我选择/选中按钮 A 时，我不会以编程方式更改代码中任何位置的任何按钮，除了在 处`onLoad`。我以前使用 来执行此`.attr`操作，现在正在使用`.prop`（见下文）。我在 jQuery 1.7 上。
2.  按钮 A 的 html 输入标签最初有一个`checked`属性。
3.  如果我使用`.attr`上面的 (1)，那么 html 是否包含该`checked`属性都没有关系：在这两种情况下，我都会得到上述行为。
4.  如果我使用`.prop`上面的（1），并取出 html`checked` 属性，那么行为就会改变。当单击按钮 B 并且一切都稳定下来时，*两个*单选按钮都没有被选中。
5.  我有各种其他单选按钮对，它们做的事情非常相似，但我从未见过它们。
6.  在 FF 和 IE9 上都检查过
7.  这些是普通的无线电输入 html 按钮——我根本没有设置 jQuery UI 组或任何特殊的东西。
8.  只有当我遵循一系列复杂的步骤时才会发生这种情况。通常，按钮的行为与预期相同。
9.  如果我向按钮添加更改处理程序，我可以看到在手动检查按钮时运行处理程序，但在发生此问题时*不会运行*
10.  任何时候都不会重新加载页面；发生此问题时不会调用 onLoad 例程
11.  点击处理程序不会返回 false 或阻止任何默认操作

知道这里可能发生了什么，或者我该如何调试它？

**编辑** 上面添加了几个额外的点。不能真正添加​​任何代码 - 有数百行，我不知道从哪里开始。

# java - 在签名的小程序中使用 AccessControler.doPrivileged 时出现 InvocationTargetException

> ID：10450956
> 
> 赞同：0
> 
> 时间：2012-05-04T14:38:05.167
> 
> 标签：java, javascript, security, applet, invocationtargetexception

我在通过 JavaScript 调用的小程序中有以下方法

```
public String getAString()
    {
        Object rc = AccessController.doPrivileged(
        new java.security.PrivilegedAction() 
        {
            public Object run()
            {
                try
                {
                    return "OK";
                }
                catch (Throwable t)
                {
                    t.printStackTrace();
                    return "ERROR: " + t.getMessage() + " " + t.getCause();
                }
            }
        });

        // Return value
        return rc.toString();
    } 
```

小程序使用通过 keytool 创建的证书进行签名

当我调用`getAString()`if 时抛出`InvocationTargetException`. 如果我调用其他不使用 AccessController 类的方法，我就没有这个问题。

此外，每次我打开浏览器时，都会要求我允许小程序运行，即使小程序已签名。

我怎样才能解决这个问题？

**编辑**

我添加了一个按钮，现在我得到了更多信息：

> 签名者信息与同一包中其他类的签名者信息不匹配

我正在使用第三方存档。原始形式是未签名的，但我使用相同的证书（尽管使用不同的命令）对其进行了签名。

**编辑2** 这是我签署罐子的方式

```
keytool -genkey -keystore vkeystore -keyalg rsa -dname "CN=XXX, OU=XXX, O=XXX, L=Atlanta, ST=GA,C=NL" -alias printer -validity 3600 -keypass XXX-storepass XXX

jarsigner -keystore vkeystore -storepass XXX -keypass XXX -signedjar JSPrintS.jar JSPrint.jar printer

jarsigner -keystore vkeystore -storepass XXX -keypass XXX -signedjar jPDFPrintS.jar jPDFPrint.jar printer 
```

JSPrint.jar 包含小程序

编辑 3

小程序定义是（位于 JSPrint.jar 中）

```
package Eplatforms;

import java.net.URL;
import java.security.AccessController;

import javax.swing.JApplet;
import java.awt.event.*;
import java.awt.*;

import com.XXX.pdfPrint.PDFPrint;

public class JSPrint extends JApplet implements ActionListener
.... 
```

jPDFPrint.jar 是第三方 jar

**编辑 4**

我试图将问题最小化一点，我发现当从 jar 文件（甚至签名的文件）调用 AccessControler.doPrivileged 时，我得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: TestPrivileges$1
        at TestPrivileges.getAString(TestPrivileges.java:14)
        at TestPrivileges.main(TestPrivileges.java:7)
Caused by: java.lang.ClassNotFoundException: TestPrivileges$1
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

这是一个测试类：

[http://pastebin.com/EgmdwuqL](http://pastebin.com/EgmdwuqL)

请注意，调用其他方法不会引发此异常。

这是我编译和运行它的方法：

```
javac TestPrivileges.java
java TestPrivileges
jar cvf TestPrivileges.jar TestPrivileges.class
jarsigner -keystore vkeystore -storepass My0Company -keypass My0Company -signedjar TestPrivilegesS.jar TestPrivileges.jar printer
copy TestPrivilegesS.jar x /Y
copy TestPrivileges.jar x /Y
cd x
java -classpath TestPrivilegesS.jar TestPrivileges
java -classpath TestPrivileges.jar TestPrivileges
cd .. 
```

vkeystore 快速入门：

```
keytool -genkey -keystore vkeystore -keyalg rsa -dname "CN=MyCompany, OU=MyCompany, O=MyCompany, L=Atlanta, ST=GA,C=NL" -alias printer -validity 3600 -keypass My0Company -storepass My0Company 
```

第一次运行正常（可能是因为类文件在同一目录中）。然后我创建存档，一个已签名，另一个未签名。当我运行它们时，我得到了这些错误。请注意，jar 位于一个单独的文件夹中，该文件夹仅包含这些 jar，没有类文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:27:07.833

~~我同意安德鲁的观点。~~

我创建了一个应用程序，可以帮助我们找到代码签名问题。

[https://gist.github.com/2596125](https://gist.github.com/2596125)

~~（因为我们不想向 Andrew 发送垃圾邮件，所以我创建了这个。）~~

随着最终出现的更多信息，您似乎没有`TestPrivileges$1`用罐子包装课程。

要解决此问题，请为 jar 包装执行此操作：

```
jar cvf TestPrivileges.jar TestPrivileges.class TestPrivileges$1.class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:33:56.887

## 新理论

当使用您的证书对其进行签名时，第 3 方 Jar 已经被签名。现在Jar里面有2很多关于数字密钥的信息，这让JRE感到困惑。

要么原样使用原始 Jar，要么删除数字签名并使用您自己的证书重新签名。

## 较早的答案

> **签名者信息与同一包**中其他类的签名者信息不匹配
> 
>  **实际的错误是因为**两个 jar**被认为是用不同的证书签名的，即使我使用的是相同的证书。**

 **我怀疑问题归结为我**加粗**的错误/评论部分。**同一个包**
中的类必须在**同一个 Jar 中。****

# java - 为什么我不能调用 UIComponent.setValueExpression()？

> ID：10450957
> 
> 赞同：0
> 
> 时间：2012-05-04T14:38:07.777
> 
> 标签：java, jsf, compiler-errors

我收到了一个包含许多行的项目，如下所示：

```
HtmlOutputText content = new HtmlOutputText();
ValueBinding vb = dashBoardBean.getApplication()
    .createValueBinding(columnas[cont][1]);
content.setValueBinding("value", vb); 
```

带有 Java 5 的 Eclipse 将它们标记为已弃用（包括类`ValueBinding`和方法`setValueBinding`）。

所以我查看了[API`HtmlCommandLink.setValueBinding()`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponentBase.html#setValueBinding%28java.lang.String,%20javax.faces.el.ValueBinding%29)（它实际上是在 UIComponentBase）并发现了这个：

**已弃用。** *这已被[UIComponent.setValueExpression(java.lang.String, javax.el.ValueExpression)](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponent.html#setValueExpression%28java.lang.String,%20javax.el.ValueExpression%29)取代。*

所以我将最后一行代码更改为以下内容：

```
content.setValueExpression("value", null); 
```

但现在我得到一个编译器错误。

我也试过：

```
UIComponent uic;
uic.setValueExpression("", null); 
```

并得到同样的错误：

```
The type javax.el.ValueExpression cannot be resolved. It is indirectly referenced from 
```

所需的 .class 文件

那个错误是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:53:12.340

您的类路径中需要 JSF 1.2（或更高版本）的 jar。

# php - 如何将动态 php 页面放入 jquery 手风琴“活动”部分

> ID：10450959
> 
> 赞同：0
> 
> 时间：2012-05-04T14:38:10.523
> 
> 标签：php, javascript, jquery, ajax

我正在重做我的网站，随时拥有 80-120 辆车，所有车辆都在我的数据库中通过其唯一的库存号进行标识。我正在使用 jQuery 的手风琴列出车辆： [http ://www.login.carcityofdanbury.com/New/?cat=01](http://www.login.carcityofdanbury.com/New/?cat=01)

`edit.php?stock=__STOCK__`一旦手风琴打开，我如何嵌入到打开的手风琴的 div 中？我尝试只使用 HTML`<embed>`标记，但它使页面加载非常缓慢。

我是整个 jQuery、Ajax、编码的新手，完全是一个自学的“边走边学”的人，所以演示、教程或示例会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:51:47.393

您可以结合使用 jQuery .load 函数 ( [http://api.jquery.com/load/](http://api.jquery.com/load/) ) 和 jQuery UI Accordion 更改事件 ( [http://jqueryui.com/demos/accordion/#event-change](http://jqueryui.com/demos/accordion/#event-change) )在手风琴幻灯片打开后触发：

```
$(document).ready(function(){

    $("#listVehicles").accordion({
        collapsible: true,
        active: false,
        autoHeight: false,
        change: function(event, ui){
            ui.newContent.load('edit.php', { stock: __STOCK__ });
        }
    });

});​ 
```

触发更改事件时，使用 AJAX 加载 edit.php 文件，并将 HTML 拖放到打开的折叠式幻灯片中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:57:43.683

我建议使用专门为此设计的 jQuery[`load()`函数。](http://api.jquery.com/load/)你给它一个元素和一个 url，它会将内容加载到元素中。

因此，在您的 Accordion 处理代码中，您需要放置以下内容：

```
$('#elementToLoadInto').load('edit.php?stock='+id'); 
```

从那里开始，您的 PHP 页面应该提供一个（或多个，如果需要）`<div>`元素，而不是一个完整的 HTML 页面。该内容将完全按原样放置`#elementToLoadInto`，就像在那里编码一样。

jQuery 也可以[只加载页面的一部分](http://api.jquery.com/load/#loading-page-fragments)，因此如果您出于某些其他原因需要返回完整的 HTML 页面，也可以利用该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:49:03.183

你可以在这里得到一些帮助：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子：

```
$.ajax({
       url: "yourPage.php",
       success: function(data){
         $("#youarea").text(data);
       }
     }); 
```

# php - 如何在不指定主键的情况下从 DynamoDB 表中获取所有项目？

> ID：10450962
> 
> 赞同：63
> 
> 时间：2012-05-04T14:38:21.617
> 
> 标签：php, amazon-dynamodb

我有一个名为 products with primary key 的表`Id`。我想选择表中的所有项目。这是我正在使用的代码：

```
$batch_get_response = $dynamodb->batch_get_item(array(
    'RequestItems' => array(

        'products' => array(
            'Keys' => array(
                array( // Key #1
                    'HashKeyElement'  => array( AmazonDynamoDB::TYPE_NUMBER => '1'),
                    'RangeKeyElement' => array( AmazonDynamoDB::TYPE_NUMBER => $current_time),
                ),
                array( // Key #2
                    'HashKeyElement'  => array( AmazonDynamoDB::TYPE_NUMBER => '2'),
                    'RangeKeyElement' => array( AmazonDynamoDB::TYPE_NUMBER => $current_time),
                ),
            )
        )
    )   
)); 
```

是否可以在不指定主键的情况下选择所有项目？我正在使用适用于 PHP 的 AWS 开发工具包。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-04T15:17:36.650

[Amazon DynamoDB 为此](http://aws.amazon.com/dynamodb/)提供了[Scan](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html)操作，该操作*通过对表执行完整扫描来返回一个或多个项目及其属性*。请注意以下两个限制：

*   根据您的表大小，您可能需要使用分页来检索整个结果集：

    > **注意**
    > 如果扫描的项目总数超过 1MB 限制，则扫描停止并将结果返回给用户，并带有 LastEvaluatedKey，以便在后续操作中继续扫描。结果还包括超出限制的项目数。扫描可能导致没有符合过滤条件的表数据。
    > 
    > 结果集最终是一致的。

*   就性能和消耗的容量单位（即价格）而言，扫描操作的成本可能很高，请参阅Query 和 Scan in [Amazon DynamoDB中的](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/QueryAndScan.html)*扫描和查询性能*部分：

    > [...] 此外，随着表的增长，扫描操作会变慢。扫描操作检查每个项目的请求值，并且**可以在单个操作中用完大表的预置吞吐量**。为了加快响应时间，请以可以使用 Query、Get 或 BatchGetItem API 的方式设计您的表。或者，将您的应用程序设计为以对表请求率的影响最小化的方式使用扫描操作。有关更多信息，请参阅[Amazon DynamoDB 中的预置吞吐量指南](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/BestPractices.html)。*[强调我的]*

[您可以在Scanning Tables Using the AWS SDK for PHP Low-Level API for Amazon DynamoDB](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LowLevelPHPScanning.html)中找到有关此操作的更多详细信息和一些示例片段，其中最简单的示例说明了该操作：

```
$dynamodb = new AmazonDynamoDB();

$scan_response = $dynamodb->scan(array(
    'TableName' => 'ProductCatalog' 
));

foreach ($scan_response->body->Items as $item)
{
    echo "<p><strong>Item Number:</strong>"
         . (string) $item->Id->{AmazonDynamoDB::TYPE_NUMBER};
    echo "<br><strong>Item Name: </strong>"
         . (string) $item->Title->{AmazonDynamoDB::TYPE_STRING} ."</p>";
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-01-24T13:25:16.893

您好，您可以使用 boto3 下载。在蟒蛇

```
import boto3
from boto3.dynamodb.conditions import Key, Attr

dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('Table')
response = table.scan()
items = response['Items']
while 'LastEvaluatedKey' in response:
    print(response['LastEvaluatedKey'])
    response = table.scan(ExclusiveStartKey=response['LastEvaluatedKey'])
    items.extend(response['Items']) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-15T20:52:29.727

我认为您正在使用 PHP，但未提及（已编辑）。我通过搜索互联网找到了这个问题，因为我得到了解决方案，**对于那些使用 nodejs 的人来说，**这里是一个使用 scan 的简单解决方案：

```
 var dynamoClient = new AWS.DynamoDB.DocumentClient();
  var params = {
    TableName: config.dynamoClient.tableName, // give it your table name 
    Select: "ALL_ATTRIBUTES"
  };

  dynamoClient.scan(params, function(err, data) {
    if (err) {
       console.error("Unable to read item. Error JSON:", JSON.stringify(err, null, 2));
    } else {
       console.log("GetItem succeeded:", JSON.stringify(data, null, 2));
    }
  }); 
```

我假设相同的代码也**可以****使用不同的 AWS 开发工具包翻译成 PHP**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-05T12:05:39.377

我使用以下查询从 dynamodb 获取所有项目。它工作正常。我在 zend 框架中创建了这些通用函数，并通过项目访问这些函数。

```
 public function getQuerydata($tablename, $filterKey, $filterValue){
            return $this->getQuerydataWithOp($tablename, $filterKey, $filterValue, 'EQ');
        }

        public function getQuerydataWithOp($tablename, $filterKey, $filterValue, $compOperator){
        $result = $this->getClientdb()->query(array(
                'TableName'     => $tablename,
                'IndexName'     => $filterKey,
                'Select'        => 'ALL_ATTRIBUTES',
                'KeyConditions' => array(
                    $filterKey => array(
                        'AttributeValueList' => array(
                            array('S' => $filterValue)
                        ),
                'ComparisonOperator' => $compOperator
            )
            )
        ));
            return $result['Items'];
        }

       //Below i Access these functions and get data.
       $accountsimg = $this->getQuerydataWithPrimary('accounts', 'accountID',$msgdata[0]['accountID']['S']); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-24T03:36:53.390

通过指定 AWS 服务的区域列出 DynamoDB 表中所有项目的简单代码。

```
import boto3

dynamodb = boto3.resource('dynamodb', region_name='ap-south-1')
table = dynamodb.Table('puppy_store')
response = table.scan()
items = response['Items']

# Prints All the Items at once
print(items)

# Prints Items line by line
for i, j in enumerate(items):
    print(f"Num: {i} --> {j}") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-28T22:42:44.187

我没有在以下代码上指定 pk：

```
client = boto3.client('dynamodb')
table = 'table_name'
response = client.scan(
    TableName=table,
    AttributesToGet=['second_field_in_order', 'first_field_in_order']
) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-12-05T17:09:36.760

此 C# 代码是使用 BatchGet 或 CreateBatchGet 从 dynamodb 表中获取所有项目

```
 string tablename = "AnyTableName"; //table whose data you want to fetch

        var BatchRead = ABCContext.Context.CreateBatchGet<ABCTable>(  

            new DynamoDBOperationConfig
            {
                OverrideTableName = tablename; 
            });

        foreach(string Id in IdList) // in case you are taking string from input
        {
            Guid objGuid = Guid.Parse(Id); //parsing string to guid
            BatchRead.AddKey(objGuid);
        }

        await BatchRead.ExecuteAsync();
        var result = BatchRead.Results; 
```

// ABCTable 是表格模态，用于在 dynamodb 中创建 & 要获取的数据

# javascript - 使用构造变量名称循环遍历表单上的单选按钮

> ID：10450963
> 
> 赞同：4
> 
> 时间：2012-05-04T14:38:26.610
> 
> 标签：javascript, forms, radio-button

我在一个表单上有几个单选按钮，它们都分组为 3，当它们被单击时，我需要在它们上运行一个 JS 函数。在这个函数中，我循环遍历被按下的按钮组中的单选按钮（即，如果该组被称为 'abc_name' id use `for (var i = 0; i < form.abc_name.length; i++){ }`）。

我想知道是否有一种方法可以使用构造的组名以相同的方式操作一组单选按钮？例如，如果我将 'xyz' 传递给函数，我需要将代码设为`for (var i = 0; i < form.xyz_name.length; i++){ }`. 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:43:33.393

你*真的*应该`getElementsByName()`在这两种情况下都使用；

```
for (var els = document.getElementsByName(xyz + '_name'), i=0; i<els.length;i++) {
    // something on els[i]
} 
```

尽管您所拥有的直接等价物是：

```
for (var els = form.elements[xyz + "_name"];, i=0; i<els.length;i++) {
    // something on els[i]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:43:36.787

使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)。

```
function loopDeLoop (xyz) {
    var elems = form.elements[xyz + "_name"],
        len = elems.length,
        i;
    for (i=0;i<len;i++){
        console.log(elems[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:43:04.610

使用`[]`属性语法：

```
function loop(s) {
   s += '_name';
   var inputs = form[s];

   for (var i = 0; i < inputs.length; ++i) {
       ...
   }
} 
```

当属性键是变量时，这是必要的 -`a.b`语法仅在`b`是“文字”时才有效。

# .net - 如何使用 linq 将列表与查找进行比较？

> ID：10450964
> 
> 赞同：1
> 
> 时间：2012-05-04T14:38:31.960
> 
> 标签：.net, linq, list, lookup

我有一个查找，其中包含优先级和组的主列表。此外，一个包含用户所在组的列表`ILookup<int, string>, List<string>`。我想将 List 与 ILookup 进行比较，并返回与 List 中的组匹配的 IGrouping。然后最终获得具有更高优先级的 IGrouping（例如：返回 6 而不是 3）。

我的问题是 List 和 ILookup 的实际比较。看来我可能不得不使用 for 循环。但我想我还没有找到正确的 Linq 语句。

我在下面尝试过的。

```
 List<string> groupsOfUser = whatGroupsUserBelongTo();
        ILookup<int, string> loginGroups = mapADToRole.SelectMany(ad => ad.Value
                                                                          .Select(grp => new {ad.Key, Value = grp}))
                                                      .ToLookup(adLkUp => adLkUp.Key, adLkUp => adLkUp.Value);

        var blah = loginGroups.Where(adGrp => adGrp.SelectMany(ad => groupsOfUser.Contains(ad))); 
```

**更新：**

mapADToRole 是`Dictionary<int, List<string>>`. 下面的代码有效，但使用了 foreach 循环。

```
 public static string getWindowsGroup()
        {
            List<string> groupsOfUser = whatGroupsUserBelongTo();
            ILookup<int, string> loginGroups = mapADToRole.SelectMany(ad => ad.Value
                                                                              .Select(grp => new {ad.Key, Value = grp}))
                                                          .ToLookup(adLkUp => adLkUp.Key, adLkUp => adLkUp.Value);

            List<IGrouping<int, string>> foo = new List<IGrouping<int, string>>();
            foreach (IGrouping<int, string> loginGroup in loginGroups)
            {
                foreach (var blah in loginGroup)
                {
                    if (groupsOfUser.Contains(blah))
                    {
                        foo.Add(loginGroup);
                    }
                }
            }

            var foobar = foo.Max(grp => grp.Key);
            return loginGroups[foobar].FirstOrDefault();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:02:34.513

我不确定，但这应该做你的功能：

```
return mapADToRole.Where(item => item.Value.Any(groupsOfUser.Contains))
                  .OrderBy(item => item.Key)
                  .SelectMany(item => item.Value)
                  .FirstOrDefault(); 
```

# mysql - 在 Zend Framework 中获取最后一个用户 ID

> ID：10450968
> 
> 赞同：1
> 
> 时间：2012-05-04T14:38:45.280
> 
> 标签：mysql, zend-framework, zend-db, zend-db-table

使用 MySQL 查询浏览器，我手动创建了一个名为的表`users`并在字段中输入了一些日期。我将其设置`primary key`为`id`并将其设置为`auto increment`。有`3 rows`，最高`id`的是`3`。

`class`然后我在目录中进行了以下`method`操作以调用表中的数据等。

```
class Application_Model_DbTable_User extends Zend_Db_Table_Abstract
    {
        protected $_name = 'user';  

        public function getLatestUserId()
        {
            $id = $this->getAdapter()->lastInsertId();
            return $id;
        }   
    } 
```

在`controller`我执行以下操作获取由 生成的值`method`并允许`view`访问它：

```
 $usersDbModel = new Application_Model_DbTable_User();
    $lastUserId = $usersDbModel->getLatestUserId();     
    $this->view->lastUserId = $lastUserId; 
```

然后在视图中回显它以将其显示给用户：

`echo $this->lastUserId;`

但是，即使我`id`在`users`表中的最后一个是 3。它显示 0。

我也试过：

```
 public function getLatestUserId()
    {    
        $sql = 'SELECT max(id) FROM user';  
        $query = $this->query($sql);
        $result = $query->fetchAll();
        return $result;
    } 
```

但这只会抛出服务器错误。

我做错了什么？
我错过了什么吗？
还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:52:28.210

答案是：

```
$sql = 'SELECT max(id) FROM user';  
        $query = $this->getAdapter()->query($sql);
        $result = $query->fetchAll();
        return $result[0]['max(id)']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:43:05.620

如果您查询“SELECT id FROM USERS SORT BY id DESC LIMIT 0,1”

除了最新用户的 id，你什么也得不到，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:44:59.423

如果您使用 select 语句，例如

```
SELECT max(id) FROM USERS; 
```

如果您还没有尝试在控制器中使用功能，请尝试这样的操作。

```
class IndexController extends Zend_Controller_Action {

     public function init() {

    }

    public function indexAction() {

    }

    public function getLatestUserId()
    {
         $bootstrap = $this->getInvokeArg('bootstrap');
         $resource = $bootstrap->getPluginResource('db');
         $db = $resource->getDbAdapter();

         $sqlrequest = "select max(id) as Idmax from user";
         $rows = $db->fetchAll($sqlrequest);     

         foreach ($rows as $row)
             echo $maxId = $row['Idmax'];       

         return $maxId;
    }
} 
```

你的引导文件看起来像

```
 class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
 {

     protected function _initConfig()
    {
        $config = new Zend_Config($this->getOptions());
        Zend_Registry::set('config', $config);
        return $config;
    }
} 
```

希望这样的工作，希望它有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T13:09:29.133

问题是 Mysql 并不真正支持`lastInsertId()`它在某些情况下会返回自动递增主键的最后一个 id。
这里提出了几种解决方案，大多数会返回主键的最后一个 id，这可能是也可能不是你真正需要的。

此方法也将使用 select() 对象执行相同的操作。

```
public function getlastInsertId(){
        $select = $this->select();
        $select->from($this->_name, "id");
        $select->order('id DESC');
        $select->limit(0, 1);
        $result = $this->fetchAll($select)->current();

        return $result->id;
    } 
```

我认为，如果您真正追求的是您插入的最后一个 id，那么随着时间的推移，您可能会发现这些方法不可靠。随着时间的推移，随着记录的添加和删除，数据库可能会或可能不会填充空 id，具体取决于您当前使用的数据库以及该数据库的设置方式。
在大多数情况下，我们需要在插入后很快插入的最后一个项目的 id，通常用于更新视图脚本。在这种情况下，我通常只是将整个行对象作为返回的一部分。

这是我的意思的一个例子：

```
/**this method will save or update a record depending on data present in the array*/
public function saveUser(array $data) {
        /**cast data array as std object for convience*/
        $dataObject = (object) $data;
        /**if id exists as array and has a non null value*/
        if (array_key_exists('id', $data) && isset($data['id'])) {
            /**find row if updating*/
            $row = $this->find($dataObject->id)->current();
        } else {
            /**create new row*/
            $row = $this->createRow();
        }

        $row->first_name = $dataObject->first_name;
        $row->last_name = $dataObject->last_name;
        $row->email = $dataObject->email;
        /**save or update row*/
        $row->save();
        /**return the $row you just built or you can return $result = $row->save(); and get*/
        /** just the primary key. Save() will throw an exception if table is marked read only*/
        return $row;
    } 
```

# algorithm - “最不常用”——算法

> ID：10450969
> 
> 赞同：0
> 
> 时间：2012-05-04T14:38:46.487
> 
> 标签：algorithm, artificial-intelligence

我正在构建一个应用程序，该应用程序应该从有限的任务池中为用户提取任务。问题是我想要：

1.  用户不会两次获得相同的任务，
2.  在一段时间过去之前，用户不会获得与他的朋友（在应用程序中）相同的任务。

总结一下我的问题，我需要从池中提取最**不常见的任务**。

有人可以参考我找到最不常见的东西（LFU）的已知算法。我还需要理论方面的知识，所以如果有人知道一些关于这方面的文章或研究论文（来自《科学美国人》等知名杂志），那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:45:08.487

为了获得最不常用的任务，只需给每个任务一个计数器，计算它被使用了多少次。然后搜索计数器值最低的任务。

为了获得一群朋友最不常用的任务，您可以为每个用户存储他/她完成的任务（以及次数）。无论如何，此信息可能很有用。然后，当需要为用户选择新任务时，可以轻松创建用户及其所有朋友使用过的任务及其频率的（临时）组合列表，并按频率排序。这不是很贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:54:05.457

根据您的 2 个要求，我看不出“最少”使用的任务与此有什么关系。你说你想要不重复的任务。

**选项 1：**
您使用什么容器来容纳所有任务？假设它是一个列表，当您或您的朋友选择一个任务时，将该任务移至列表末尾（与那里的任务交换）。现在您已将初始列表拆分为 2 个子列表。第一部分包含未使用的任务，第二部分包含已使用的任务。跟踪分隔 2 个列表的枢轴/索引。
现在，每次您或您的朋友选择一个新任务时，都会从第一个子列表中选择它。然后将其移动到第二个子列表并更新枢轴。

**选项 2：** 如果您最终重复任务，但首先选择那些选择时间最少的任务，那么您可以使您的容器成为最小堆。为每个任务添加一个使用计数器，并基于此将它们添加到堆中。提取任务并增加其使用计数器，然后将其放回堆中。这是一个很好的解决方案，但根据程序的简单程度，您甚至可以使用循环缓冲区。

很高兴了解更多关于您正在构建的内容:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:45:29.973

一个好的开始是 Edmond Blossom V 算法，用于在一般图中实现完美的最小匹配。如果您有二分图，则可以查找 Floyd-Warshall 算法以找到最短路径。也许你也可以使用拓扑搜索，但我不知道，因为这些算法真的很难学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:03:01.380

我认为您需要的结构是[min-heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。它允许提取 O(Log(n)) 中的最小值，并且还允许您增加 O(Log(n)) 中的项目的值。

# java - 尝试将对象传递给 groovy 模板 Play Framework 1.2 时出现内存不足异常

> ID：10450973
> 
> 赞同：2
> 
> 时间：2012-05-04T14:39:03.543
> 
> 标签：java, garbage-collection, playframework, playframework-1.x

我在控制器中有这个方法：

```
public static void show(Long id)
{
    Article article = Article.findById(id);
    //List<Review> reviews = Review.find("byArticle", article).fetch();
    render(article);
} 
```

它将文章对象传递给模板，模板尝试呈现文章对象中的各种字段。

然后我得到 outofMemory 异常，我哪里出错了？

这是 Play Framework 显示的错误消息：

```
RuntimeException occured : java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

# android - 具有多线程的Android sqlite

> ID：10450977
> 
> 赞同：3
> 
> 时间：2012-05-04T14:39:23.577
> 
> 标签：android, multithreading, sqlite, android-loadermanager

我正在使用`sqlite`. 有许多活动和一项服务。我从多个线程中使用数据库。它在 中完美`Android 2.X`运行，但是一旦我在其中运行`Android 3.X`它总是会引发此错误并且`Force Close`：

```
05-04 22:17:04.815: I/SqliteDatabaseCpp(8774): sqlite returned: error code = 5, msg = database is locked, db=/data/data/xxx/databases/im
05-04 22:17:04.815: E/SqliteDatabaseCpp(8774): sqlite3_open_v2("/data/data/xxx/databases/im", &handle, 6, NULL) failed
05-04 22:17:04.835: E/SQLiteDatabase(8774): Failed to open the database. closing it.
05-04 22:17:04.835: E/SQLiteDatabase(8774): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:790)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
05-04 22:17:04.835: E/SQLiteDatabase(8774):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149) 
```

任何人都知道它为什么会发生以及如何解决它？

我在互联网上进行了研究，大多数人建议：

1.  仅对应用程序使用一个 DB 连接。如何保证？我想为服务和活动共享数据库连接。我应该通过创建一个公共静态数据库变量来做到这一点吗？

2.  ContentProvider - 我在代码中使用了复杂的 SQL 语句（例如加入几个表、临时表）。是否可以在 ContentProvider 中运行这些复杂的 SQL 语句？

    谢谢大家。最后，（1）对我来说很好。但是我还是想知道为什么Android 2.X没有这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:57:38.660

1号就是答案。我有几个关于如何做到这一点的堆栈答案和博客文章：

[Android 上 SQLite 的最佳实践是什么？](https://stackoverflow.com/questions/2493331/what-is-best-practice-with-sqlite-and-android/3689883#3689883)

[http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)

第 2 项是很多额外的工作，而且是不必要的。ContentProvider 存在，因此您可以与其他应用程序共享数据。它用于管理数据库连接，因为人们不了解 Sqlite 和 Android 是如何协同工作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:14:41.037

我建议您尽可能使用 a`ContentProvider`和 a 。`LoaderManager`它能够在后台自动执行查询。

# silverlight - 如何在 Silverlight 数据网格中查找 id

> ID：10450978
> 
> 赞同：1
> 
> 时间：2012-05-04T14:39:36.013
> 
> 标签：silverlight

我需要获取放置在数据模板中的图像的 id .. 代码如下。

```
<sdk:DataGrid.Columns>
 <sdk:DataGridTemplateColumn x:Name="colDeleteContent" IsReadOnly="True" Header="Delete Content" Width="100" CanUserResize="False">
   <sdk:DataGridTemplateColumn.CellTemplate>
      <DataTemplate>
         <StackPanel x:Name="spDeleteContent" VerticalAlignment="Center" Margin="10,0,0,0" Width="20" Height="20" HorizontalAlignment="Center" Orientation="Vertical">
             <Image x:Name="imgDeleteContent" Source="Assets/Images/close.png" Height="15" Tag="Assets/Images/close.png" Width="15" Margin="0" Cursor="Hand" Opacity="0" />
         </StackPanel>
       </DataTemplate>
     </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn>
</sdk:DataGrid.Columns> 
```

我需要获取“imgDeleteContent”的 ID，该 ID 已放置在我后面的代码中的该数据模板堆栈面板中。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:42:24.600

您可以在网格加载行事件上找到控件名称，如下所示

```
StackPanel Sp = grdProducts.Columns[1].GetCellContent(e.Row) as StackPanel; 
```

然后使用快速查看找到该 imgDeleteContent 控件。做任何你喜欢的事:)

# sql - 如何将字符串数组或字符串向量传递给参数化 SQL 查询中的 IN 子句？

> ID：10450981
> 
> 赞同：1
> 
> 时间：2012-05-04T14:39:57.990
> 
> 标签：sql, informix, parameterized

我的 executeQueries.ec 文件中有这段代码

```
sprintf(sqlQuery,
"select distinct e.emp_id, e.join_date \
from employees e
where e.emp_id in (?) and e.dob <= '%s')");

$prepare empDataStmt from $sqlQuery;
if (sqlca.sqlcode)
{
    fprintf(stderr, "Error %d in prepare empDataStmt%s\n",
    sqlca.sqlcode, sqlQuery);
    return 0;
}
$declare empDataCursor cursor for incptDatesStmt;

if (pcs_sql_check("Error in declaring empDataCursor Stmt"))
{
    return 1;
}

$open empDataCursor using $empIds_,dob_ ; 
```

当我 dbx 代码和 print`empIds_`时，我在控制台上得到了这个：

```
""04-Emp1","W2-Emp2"" 
```

这意味着 empIds_ 的内容是`"04-Emp1","W2-Emp2"` （包括引号）。问题是数量`empIds`可以是 1 到 100 或 500 之间的任何值。例如，它甚至可以是：

```
"04-Emp1","W2-Emp2","04-Emp4","W2-Emp3","0A-Emp1","E2-Emp7" 
```

因此，我无法让我的代码工作。任何人都可以帮助我使用“？”来编写这段代码。对于可以处理任意数量的参数化查询`empIds`。请注意，empIds_ 的内容将始终嵌入双引号。我不知道这是好事还是坏事，但我不能做任何事情来阻止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:49:43.553

### 一个小的转移

您向我们展示的内容存在一些语法问题：

```
sprintf(sqlQuery,
"select distinct e.emp_id, e.join_date \
from employees e
where e.emp_id in (?) and e.dob <= '%s')"); 
```

那不会编译；之后你需要第二个反斜杠`employees e`。我强烈建议避免在字符串中使用反斜杠换行符；改为使用字符串连接。

```
sprintf(sqlQuery, "select distinct e.emp_id, e.join_date from employees e "
                  "where e.emp_id in (?) and e.dob <= '%s')"); 
```

请注意，字符串的两个部分之间只有空格（注释也算作空格）；C 编译器将这些字符串连接成一个字符串。

现在`sprintf()`调用在 C 源代码级别的语法是正确的；它在语义上仍然不正确，因为它包含`%s`并且您没有提供要复制的字符串。您可能应该使用占位符`?`作为日期，因为您将它作为第二个参数传递给`$open`语句（但实际上并没有占位符）。

然后，您可以通过编写以下代码来避免显式准备操作：

```
$ DECLARE empDataCursor FOR
    SELECT DISTINCT e.emp_id, e.join_date
      FROM employees e 
     WHERE e.emp_id IN ($empIds_) AND e.dob <= $dob_; 
```

* * *

### 症结

但是，不幸的是，这对您不起作用。您的问题的症结在于您试图将字符串作为 IN 子句的值列表传递。它根本不像那样工作。如果您有一个值，则需要一个占位符 ( `?`)；如果您有两个值，则需要两个占位符等。

因此，我们最终返回到一个完整的准备好的语句并将 empIds 替换为字符串：

```
 int reqlen;

 reqlen = snprintf(sqlQuery, sizeof(sqlQuery), "SELECT DISTINCT e.emp_id, e.join_date"
                       " FROM employees e WHERE  e.emp_id IN (%s) AND e.dob <= '%s'",
                       empIds_, dob_);

 if (reqlen >= sizeof(sqlQuery))
     ...truncated SQL...larger sqlQuery needed...

 $ PREPARE empDataStmt FROM $sqlQuery;
 ...SQL error check...
 $ DECLARE empDataCursor FOR empDataStmt;
 ...SQL error check...

 $ OPEN empDataCursor;   /* No USING clause! */
 ...SQL error check...

 ...code as before... 
```

# google-api - 如何获取用户在谷歌驱动器中可访问的所有文档的文档 ID？

> ID：10450984
> 
> 赞同：0
> 
> 时间：2012-05-04T14:40:04.620
> 
> 标签：google-api, google-drive-api

我尝试使用 Google 文档列表 API“https://docs.google.com/feeds/default/private/full?max-results=100&showfolders=true”来获取用户可访问的所有文件和文档的列表。

但得到错误 - “无效的请求 URI”。

请谁能解释我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:23:40.110

尝试在末尾附加 ?v=3 ，或者您可以添加一个 HTTP 标头 GData-Version: 3 这应该可以解决它。

这是因为此 API 端点仅适用于最新版本的文档列表 API，并且默认情况下该 API 使用 v1。因此，您会遇到与使用 ?v=1 相同的错误

# html - 如何将占位符添加到 GWT 文本输入字段

> ID：10450987
> 
> 赞同：14
> 
> 时间：2012-05-04T14:40:19.180
> 
> 标签：html, gwt

是否知道 Google Web Toolkit 文本输入小部件会在字段为空时显示一条消息？

例如，名字字段会说：“输入你的名字”，当用户开始输入时，标签被删除以显示输入的文本。

你会怎么做？

丹尼尔

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-04T15:36:14.347

这在 textarea 中为我工作：

```
yourInputField.getElement().setPropertyString("placeholder", "enter your first name"); 
```

我认为这是一个 HTML5 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-11T21:04:44.363

使用此解决方案，您可以在 binder xml 中定义任何其他属性：

**解决方案：**

```
public class MorePropertiesTextArea extends TextArea {
    private String moreProperties;

    public MorePropertiesTextArea() {}

    public void setMoreProperties(String moreProperties) {
        for (Entry<String, String> entry : parse(moreProperties).entrySet()) {
            getElement().setAttribute(entry.getKey(), entry.getValue());
        }
        this.moreProperties = moreProperties;
    }

    public String getMoreProperties() {
        return moreProperties;
    }

    private Map<String, String> parse(String moreProperties) {
        String[] pairStrings = moreProperties.split(";");
        HashMap<String, String> map = new HashMap<>();
        for (String pairString : pairStrings) {
            String[] pair = pairString.split("=");
            if(pair.length != 2)
                throw new IllegalArgumentException("at " + pair + " while parsing " + moreProperties + 
                        ". Use format like: 'spellcheck=false; placeholder=Write something here...'");
            map.put(pair[0].trim(), pair[1]);
        }
        return map;
    }

} 
```

**UI 活页夹 xml：**

```
<p2:MultiLineTextArea ui:field="taMultiLine" styleName="form-control muliLine"  
            moreProperties="spellcheck=false; placeholder=Write something here... " /> 
```

**结果html：**

```
<textarea class="form-control muliLine" spellcheck="false" placeholder="Write something here..."></textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-12T06:28:58.520

我会选择一个 UI 框架来为你（以及更多）做这一切。

我在所有项目中都使用 GWT-Bootstrap 3，对此我感到非常高兴：[https ://github.com/gwtbootstrap3/gwtbootstrap3](https://github.com/gwtbootstrap3/gwtbootstrap3)

如果您不了解 bootstrap，最好快速阅读一本 bootstrap3 书，了解 Grid 系统和其他东西的工作原理。比使用 gwt-bootstrap 3 时有先见之明。

您可以查看的另一个是[https://github.com/GwtMaterialDesign/gwt-material](https://github.com/GwtMaterialDesign/gwt-material)，它是 Google Material 的包装器。我自己没用过，但我认为这不是一个糟糕的选择。

# php - php curl 的资源限制

> ID：10450989
> 
> 赞同：1
> 
> 时间：2012-05-04T14:40:21.457
> 
> 标签：php, curl

我有一个页面，可以在其中使用 curl 从许多 url 中检索内容。我发现在检索到一定数量的 url 后，curl 返回 null。curl 在任何给定会话中检索的资源是否有限制。

我`curl_init()`在检索每个 url 之前和`curl_close()`在获取内容之后做一个。我认为这将立即释放资源将防止达到限制的情况。`curl_init()`调用次数过多是否存在问题。

这是我检索 url 的 php 代码示例。

```
<?php
    function get_curl() {
        // Initialize a new curl resource
        $ch = curl_init(); 

        // Get only the content not the headers
        curl_setopt($ch, CURLOPT_HEADER, 0); 

        // Return the value instead of printing the response to browser
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

        // Use a user agent to mimic a browser
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0');

        return $ch;

        // Remember to always close the session and free all resources 
    }

    // Make sure curl is installed
    $curl_exists = function_exists('curl_init');
    if ( !$curl_exists ) {
        return;
    }

    $todayfeast = date("Ymd");

    $ctitleff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=FR';
    $creadff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=FR';

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $ctitleff);        
    $titleff = curl_exec($ch);
    curl_close($ch); 

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $creadff);      
    $readff = curl_exec($ch);
    curl_close($ch);

    $ctitlepf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=PS';
    $creadpf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&&type=reading&lang=FR&content=PS';

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $ctitlepf);    
    $titlepf = curl_exec($ch);
    curl_close($ch); 

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $creadpf); 
    $readpf = curl_exec($ch);
    curl_close($ch);

    $titlesf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=SR';
    $readsf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=SR';

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $titlesf);  
    $titlesf = curl_exec($ch);
    curl_close($ch); 

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $readsf); 
    $readsf = curl_exec($ch);
    curl_close($ch);

    $titlegf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=GSP';
    $readgf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=GSP';

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $titlegf); 
    $titlegf = curl_exec($ch);
    curl_close($ch); 

    $ch = get_curl();
    curl_setopt($ch, CURLOPT_URL, $readgf); 
    $readgf = curl_exec($ch);
    curl_close($ch); 

    // Send info
    $params = array(
        'titleff' => $titleff,
        'readff' => $readff,
        'titlepf' => $titlepf,
        'readpf' => $readpf,
        'titlesf' => $titlesf,
        'readsf' => $readsf,
        'titlegf' => $titlegf,
        'readgf' => $readgf,
    );

    echo json_encode($params);

?> 
```

**编辑**

只有当我通过 ajax 调用这个 php 脚本时才会出现问题。

```
<script>
    $('#readingf').ready(function(){
    $.ajax({
        url: "loadfrench.php",
        type: "GET",
        data: { },
        cache: false,
        async: true,
        dataType: 'json',
        success: function (response) {
            if (response != '') 
            {
            $('#titleff').html(response.titleff);
            $('#readff').html(response.readff);
            $('#titlepf').html(response.titlepf);
            $('#readpf').html(response.readpf);
            $('#titlesf').html(response.titlesf);
            $('#readsf').html(response.readsf);
            $('#titlegf').html(response.titlegf);
            $('#readgf').html(response.readgf);
            alert ('titleff '+response.titleff+' readff '+response.readff);
            }
        },
        error: function (request, status, error) {
            alert ("status "+status+" error "+error+"responseText "+request.responseText);
        },
    });    

    });
</script> 
```

如果我有这个文件，并包含在我的主页中，`<?php require("filename.php") ?>`它就可以工作。

```
<?php
    function get_curl() {
        // Initialize a new curl resource
        $ch = curl_init(); 

        // Get only the content not the headers
        curl_setopt($ch, CURLOPT_HEADER, 0); 

        // Return the value instead of printing the response to browser
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

        // Use a user agent to mimic a browser
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0');

        return $ch;

        // Remember to always close the session and free all resources 
    }

    // Make sure curl is installed
    $curl_exists = function_exists('curl_init');
    if ( !$curl_exists ) {
        return;
    }

    $ch = get_curl();

    $todayfeast = date("Ymd");
    /* $titleff = $readff = $titlepf = $readpf = $titlesf = $readsf = $titlegf = $readgf = "blank"; */

    $ctitleff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=FR';
    $creadff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=FR';

    curl_setopt($ch, CURLOPT_URL, $ctitleff);        
    $titleff = curl_exec($ch);

    curl_setopt($ch, CURLOPT_URL, $creadff);      
    $readff = curl_exec($ch);

    $ctitlepf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=PS';
    $creadpf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&&type=reading&lang=FR&content=PS';

    curl_setopt($ch, CURLOPT_URL, $ctitlepf);    
    $titlepf = curl_exec($ch);

    curl_setopt($ch, CURLOPT_URL, $creadpf); 
    $readpf = curl_exec($ch);

    $titlesf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=SR';
    $readsf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=SR';

    curl_setopt($ch, CURLOPT_URL, $titlesf);  
    $titlesf = curl_exec($ch);

    curl_setopt($ch, CURLOPT_URL, $readsf); 
    $readsf = curl_exec($ch);

    $titlegf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=GSP';
    $readgf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=GSP';

    curl_setopt($ch, CURLOPT_URL, $titlegf); 
    $titlegf = curl_exec($ch);

    curl_setopt($ch, CURLOPT_URL, $readgf); 
    $readgf = curl_exec($ch);

    curl_close($ch); 

    // Send info
    $params = array(
        'titleff' => $titleff,
        'readff' => $readff,
        'titlepf' => $titlepf,
        'readpf' => $readpf,
        'titlesf' => $titlesf,
        'readsf' => $readsf,
        'titlegf' => $titlegf,
        'readgf' => $readgf,
    );

    echo json_encode($params);

?>

<?php
    $curl_exists = function_exists('curl_init');

    // Make sure curl is installed
    if ( $curl_exists ) {

        // Initialize a new curl resource
        $ch = curl_init(); 

        // Get only the content not the headers
        curl_setopt($ch, CURLOPT_HEADER, 0); 

        // Return the value instead of printing the response to browser
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

        // Use a user agent to mimic a browser
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0');

    }

?>

<div id="readfre" style="overflow:hidden;">
<div id="readingf" class="tabber" style="width:100%; margin-top: 10px; margin-right:0px;">

<?php 

    $todayfeast = date("Ymd");

    $ctitleff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=FR';
    $creadff = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=FR';

    if ( $curl_exists ) {
        curl_setopt($ch, CURLOPT_URL, $ctitleff);        
        $titleff = curl_exec($ch);
    }

    if ( $curl_exists ) {
        curl_setopt($ch, CURLOPT_URL, $creadff);      
        $readff = curl_exec($ch);
    }

?>
    <div id="readf" class="tabbertab">
        <h2>PremiËre Lecture</h2>
        <div id='titleff' class='rtitle'>
        <?php echo $titleff; ?>
        </div>
        <div id='readff' class='rtext'>
        <?php echo $readff; ?>
        </div>
    </div>

<?php

    $ctitlepf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=PS';
    $creadpf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&&type=reading&lang=FR&content=PS';

    if ( $curl_exists ) {
        curl_setopt($ch, CURLOPT_URL, $ctitlepf);    
        $titlepf = curl_exec($ch);
    }

    if ( $curl_exists ) {
        curl_setopt($ch, CURLOPT_URL, $creadpf); 
        $readpf = curl_exec($ch);
    }
?>  
    <div id="readp" class="tabbertab">
        <h2>Psaume</h2>
        <div id='titlepf' class='rtitle'>
        <?php echo $titlepf; ?>
        </div>
        <div id='readpf' class='rtext'>
        <?php echo $readpf; ?>
        </div>
    </div>

    <?php

        $titlesf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=SR';
        $readsf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=SR';

        if ( $curl_exists ) {
            curl_setopt($ch, CURLOPT_URL, $titlesf);  
            $titlesf = curl_exec($ch);
        }

        if ( $curl_exists ) {
            curl_setopt($ch, CURLOPT_URL, $readsf); 
            $readsf = curl_exec($ch);
        }

    ?>
        <div id="reads" class="tabbertab">
            <h2>DeuxiËme Lecture</h2>
            <div id='titlesf' class='rtitle'>
            <?php echo $titlesf; ?>
            </div>
            <div id='readsf' class='rtext'>
            <?php echo $readsf; ?>
            </div>
        </div>

    <?php

        $titlegf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading_lt&lang=FR&content=GSP';
        $readgf = 'http://feed.evangelizo.org/reader.php?date='.$todayfeast.'&type=reading&lang=FR&content=GSP';

        if ( $curl_exists ) {
            curl_setopt($ch, CURLOPT_URL, $titlegf); 
            $titlegf = curl_exec($ch);
        }

        if ( $curl_exists ) {
            curl_setopt($ch, CURLOPT_URL, $readgf); 
            $readgf = curl_exec($ch);
        }

    ?>
        <div id="readg" class="tabbertab">
            <h2>Evangile</h2>
            <div id='titlegf' class='rtitle'>
            <?php echo $titlegf; ?>
            </div>
            <div id='readgf' class='rtext'>
            <?php echo $readgf; ?>
            </div>
        </div>

    <?php

        // Remember to always close the session and free all resources 
        if ( $curl_exists ) {
            curl_close($ch); 
        } 
    ?>

    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:47:14.120

我无法确切说明为什么会发生这种情况，但是看到您从同一台服务器获取数据，我不会每次都创建一个新的 curl 句柄。只需使用相同的，只需更改 CURLOPT_URL。这样，服务器将重用 TCP 连接，而不是每次都创建一个新连接：

```
$ch = get_curl();

curl_setopt($ch, CURLOPT_URL, $ctitleff);        
$titleff = curl_exec($ch);

curl_setopt($ch, CURLOPT_URL, $creadff);      
$readff = curl_exec($ch);

...

curl_close($ch); 
```

不确定这是一个答案，但可以尝试:)

此外，您可能想看看[curl-multi-exec()](http://www.php.net/manual/en/function.curl-multi-exec.php)

# asp.net-mvc-3 - asp.net mvc - 回发时数据丢失

> ID：10450991
> 
> 赞同：1
> 
> 时间：2012-05-04T14:40:36.767
> 
> 标签：asp.net-mvc-3, model, validation, postback

我有一个只有一个复选框的表单。如果未选中该复选框，则该页面将无效并且不会提交数据。在视图中，我已经从模型对象中放入了一些字段，只是为了让用户知道他们正在删除什么。当我单击提交按钮并且模型状态无效时，页面将显示验证错误，但模型中的数据不再存在！

有谁知道我如何在不再次调用数据库来填充模型对象的情况下保留这些数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:43:04.183

ASP.Net MVC 不会神奇地保留模型信息。

您需要将其包含在表单的隐藏字段中（攻击者可以修改），或者从数据库中重新获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:44:36.850

如果您不从数据库重新填充模型，则必须回发所有数据，例如使用隐藏字段。

无论如何，我不明白模型验证如何失败，只是一个复选框：/。

# python - 无法在 Windows 的 GIT bash mingw32 中激活 virtualenv

> ID：10450992
> 
> 赞同：53
> 
> 时间：2012-05-04T14:40:37.933
> 
> 标签：python, git, bash, virtualenv, git-bash

当我尝试从 GIT bash mingw32 激活我的 virtualenv 时，我没有得到预期的响应。

注意：`py`是我的 Google Drive 文件夹中 Python 项目的文件夹。`hy`是我运行时创建的 virtualenv 文件夹`virtualenv --distribute hy`。

```
s3z@s3z ~/Google Drive/py/hy
$ Scripts/activate 
```

所以你看，之前没有出现预期的（hy）`s3z@s3z ~/Google Drive/py/hy`

```
s3z@s3z ~/Google Drive/py/hy
$ Scripts/activate.bat
Scripts/activate.bat: line 1: @echo: command not found
Scripts/activate.bat: line 4: syntax error near unexpected token `('
Scripts/activate.bat: line 4: `if not defined PROMPT (' 
```

当定位实际文件名时，`activate.bat`我会收到错误消息。然后我尝试停用以查看会发生什么，因为我认为 virtualenv 可能已激活但被隐藏。

```
s3z@s3z ~/Google Drive/py/hy
$ Scripts/deactivate.bat
Scripts/deactivate.bat: line 1: @echo: command not found
Scripts/deactivate.bat: line 3: syntax error near unexpected token `('
Scripts/deactivate.bat: line 3: `if defined _OLD_VIRTUAL_PROMPT ('

s3z@s3z ~/Google Drive/py/hy
$ Scripts/deactivate
sh.exe": Scripts/deactivate: No such file or directory 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-05-04T14:42:20.143

Doing`Scripts/activate`在新的 shell 实例中运行脚本，该实例在脚本执行后被销毁。要在当前 shell 中运行脚本，请使用`. Scripts/activate`或`source Scripts/activate`。

`Scripts/activate.bat`在这里不起作用，因为它是用 Batch、Windows`cmd.exe`语言而不是 Bash 编写的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-10-08T03:56:03.483

在 Windows10 上，您可以进入放置 Scripts 文件夹的 virtualenv 目录，然后输入以下命令

```
source ./Scripts/activate 
```

请注意 .(dot) 没有这个，当我像上面提到的那样使用它时，它会给我带来错误，然后 Pierre 提供的解决方案对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-18T14:07:38.173

# ***如何使用 Git Bash 激活然后停用 venv***

* * *

要在 Windows 10 中访问您的 python，您需要在创建虚拟环境时添加 .exe。

```
$ python.exe -m venv Scripts 
```

然后，您可以进入为虚拟环境创建的 Scripts 文件夹。

```
$ cd Scripts/ 
```

现在你必须调用它来激活虚拟环境。

```
$ source ./Scripts/activate 
```

完成后，您只需停用虚拟环境。

```
$ deactivate 
```

![如何激活/停用 Git Bash venv 的屏幕截图](../Images/eb5ee95cb2a2597e286e07f4768907b5.png)

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T11:15:47.487

我有同样的错误：在你的 bash 运行中，这个推荐： `source venv/Scripts/activate` 然后使用这个推荐检查它是否有效： `pip -V` 我希望这很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-19T07:24:45.307

我知道这里已经有一个答案，但我想我可以为那些像我一样晚来这篇文章的人发布我的解决方案。安装 python 3.8.2 并确保在初始安装时选择了将 python 添加到 c 驱动器路径后，执行以下操作...

1.  安装 virtualenv`pip install virtualenv`并进行测试。

2.  进入你的项目文件夹，输入`pip freeze`这将显示新项目可能不需要的所有已安装包。

3.  键入，`python -m venv ./venv`然后`cd venv`

4.  键入`. Scripts/activate`。您现在应该看到`(venv)`，这是您在步骤 3 中提供的名称。

5.  `cd ..`返回项目文件夹的根目录并键入`pip freeze`以检查此虚拟环境（如果清除为新项目）。

> (venv) 用户@DESKTOP MINGW64 ~/Documents/yourproject

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-05-15T03:52:56.907

只需 `. Scripts/activate`在您的虚拟环境文件夹中 执行[![在此处输入图像描述](../Images/fd00c27a14805fd398280a77cc3d63cc.png)](https://i.stack.imgur.com/dHmeD.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2022-02-06T07:27:53.040

我最近遇到了这个问题，我找到了解决方案。在你完成之后

```
$ cd Scripts 
```

在此之后，您只需键入

```
$ source activate 
```

这将激活你的 venv

停用只需键入

```
$ deactivate 
```

并且您的venv已停用

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-13T18:37:48.847

```
Danyal Abbasi@DESKTOP-7I43AM4 MINGW64 /e/Django-projects/studybudproject/studybud/Scripts
$ . activate
(studybud)
Danyal Abbasi@DESKTOP-7I43AM4 MINGW64 /e/Django-projects/studybudproject/studybud/Scripts
$ deactivate

Danyal Abbasi@DESKTOP-7I43AM4 MINGW64 /e/Django-projects/studybudproject/studybud/Scripts
$ 
```

# java - 以一种形式多次提交。在一个表格中提交超过 1 个。或 1 个 JSP 中的一种以上形式

> ID：10450996
> 
> 赞同：1
> 
> 时间：2012-05-04T14:41:00.183
> 
> 标签：java, forms, jsp, servlets, submit

我正在做网络应用程序。我在编辑数据时遇到问题

我想创造这样的东西

![我的想法](../Images/7c7a7786d3658acd77eac52787c82444.png)

我希望你能帮助我找到方法来做到这一点。我找到了下一个变体，但我不知道人们通常会这样做。

1.  以一种形式多次提交。
2.  在一个表格中提交超过 1 个。
3.  或 1 个 JSP 中的一种以上形式

而且我不应该使用任何框架。并且没有javascript。

谢谢

好的，如果它有助于理解我想在 servlet 上得到什么，我会展示 selvlet 的某些部分

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        request.setCharacterEncoding("UTF-8");
        response.setCharacterEncoding("UTF-8");
        String page = new String();
        Command command = CommandFactory.getCommand(request);

        page = command.execute(request);
        if (page != null) {
            RequestDispatcher dispatcher =
                    getServletContext().getRequestDispatcher(page);
            dispatcher.forward(request, response);
        }
          ....
} 
```

和 CommandFactory

```
public static Command getCommand(HttpServletRequest request){
        Command current = new NoCommand();

        String action = request.getParameter("command");

        if(action == null || action.isEmpty()){
            return current;
        }

        try{
            CommandEnum currentState = CommandEnum.valueOf(action.toUpperCase());
            current = currentState.getCurrentCommand();           
        }
...
} 
```

和 CommandEnum

```
public enum CommandEnum {

    EDIT_QUESTION {

        {
            this.command = new EditQuestionCommand();
        }
    };
} 
```

特别是命令我做一些业务逻辑

请帮助我找到从 jsp 值作为 command="delete" 获取的方法。通过单次提交，我使用隐藏字段。我们如何为几个按钮做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:00:22.600

您可以在一个表单中使用任意数量的提交按钮。但要对它们进行唯一命名，以便您可以轻松识别单击了哪个按钮。服务器将不会收到未单击的按钮的名称、值对。您可以轻松找到单击的哪个按钮可用作请求参数。使用它，您可以实现您的要求。

**示例 HTML**：

```
<form>
 <input type="submit" name="s1" value="S1"/><br/>
 <input type="submit" name="s2" value="S2"/>
</form> 
```

单击这些按钮中的任何一个时，您将看到查询字符串为`?s1=S1`或`?s2=S2`

**更新 1**：
您可以为所有提交按钮使用相同的名称并唯一标识，它们必须具有不同的值。

```
<input type="submit" name="modeOfAction" value="Delete"/><br/>
<input type="submit" name="modeOfAction" value="Update"/> 
```

**更新 2**：
如果您真的不在乎每个按钮的*值*，那么最好为每个提交按钮使用唯一名称。

```
<input type="submit" name="delete" value="Удалить (Err! I don't know what this text is!)"/><br/>
<input type="submit" name="update" value="Update"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:34:46.073

曾经有一段时间，可选的 JavaScript 确实意味着：当没有 JavaScript 存在时优雅地接受。对于小型设备，人们可能会认为这个位置可能会再次得到加强，但是：

*   HTML 表单的使用受到限制，如上所示。
*   DOM 的使用，如 AJAX 调用更新部分页面，需要 JS。
*   使用 jQuery 等库的 JavaScript 用户界面可能性（效果、表格排序、分页、主题、验证）。

我现在仍然有一种方法来获得`command=edit`：编写一个转换请求参数的*servlet*过滤器。例如，将参数**command- *NAME* = *TEXT***转换为**command= *NAME***。

# c++ - 需要检索用户所属的所有组...在 C++ 中

> ID：10450998
> 
> 赞同：5
> 
> 时间：2012-05-04T14:41:13.077
> 
> 标签：c++, winapi, ldap

我需要找到特定用户所属的所有组。我使用的是 C++，而不是 Powershell，如果这是错误的论坛，我深表歉意。

根据我在网上找到的内容，我需要检索 memberOf 属性，但我收到该属性不存在的错误。任何帮助，将不胜感激。这是代码：

```
HRESULT hrObj = E_FAIL;
HRESULT hr = E_FAIL;
ADS_SEARCHPREF_INFO SearchPrefs;
//  COL for iterations
ADS_SEARCH_COLUMN col;
//  Handle used for searching
ADS_SEARCH_HANDLE hSearch;

//  Search entire subtree from root.
SearchPrefs.dwSearchPref = ADS_SEARCHPREF_SEARCH_SCOPE;
SearchPrefs.vValue.dwType = ADSTYPE_INTEGER;
SearchPrefs.vValue.Integer = ADS_SCOPE_SUBTREE;

//  Set the search preference.
DWORD dwNumPrefs = 1;
hr = pSearchBase->SetSearchPreference(&SearchPrefs, dwNumPrefs);
if (FAILED(hr))
{
    return hr;
}

//  Create search filter.
LPWSTR pszFormat = L"(&(objectCategory=person)(objectClass=user)(sAMAccountName=%s))";
int len = wcslen(pszFormat) + wcslen(szFindUser) + 1;
LPWSTR pszSearchFilter = new WCHAR[len];
if(NULL == pszSearchFilter)
{
    return E_OUTOFMEMORY;
}

swprintf_s(pszSearchFilter, len, pszFormat, szFindUser);

//  Set attributes to return.
LPWSTR pszAttribute[NUM_ATTRIBUTES] = {L"ADsPath"};

//  Execute the search.
hr = pSearchBase->ExecuteSearch(pszSearchFilter,
                                pszAttribute,
                                NUM_ATTRIBUTES,
                                &hSearch);
if (SUCCEEDED(hr))
{    
    //  Call IDirectorySearch::GetNextRow() to retrieve the next row of data.
    while(pSearchBase->GetNextRow(hSearch) != S_ADS_NOMORE_ROWS)
    {
        //  Loop through the array of passed column names and
        //  print the data for each column.
        for (DWORD x = 0; x < NUM_ATTRIBUTES; x++)
        {
            //  Get the data for this column.
            hr = pSearchBase->GetColumn(hSearch, pszAttribute[x], &col);
            if (SUCCEEDED(hr))
            {
                //  Print the data for the column and free the column.
                //  Be aware that the requested attribute is type CaseIgnoreString.
                if (ADSTYPE_CASE_IGNORE_STRING == col.dwADsType)
                {
                    IADs *pADS;
                    hr = ADsOpenObject( col.pADsValues->CaseIgnoreString,
                        L"Administrator",
                        L"passW0rd",
                        ADS_SECURE_AUTHENTICATION,
                        IID_IADs,
                        (void**)&pADS);

                    VARIANT var;
                    VariantInit(&var);
                    if (SUCCEEDED(hr))
                    {
                        hr = pADS->GetEx(L"memberOf", &var);  <-- FAILS!!!
                        wprintf(L"Found User.\n",szFindUser); 
                        wprintf(L"%s: %s\r\n",pszAttribute[x],col.pADsValues->CaseIgnoreString); 
                        hrObj = S_OK;
                    }
                }

                pSearchBase->FreeColumn( &col );
            }
            else
            {
                hr = E_FAIL;
            }
        }
    }
    //  Close the search handle to cleanup.
    pSearchBase->CloseSearchHandle(hSearch);
}

delete pszSearchFilter;

if (FAILED(hrObj))
{
    hr = hrObj;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T18:06:59.093

除非您打算直接使用 AD，否则使用 Windows Net* 函数来完成这项工作可能会更容易：

```
#include <windows.h>
#include <lm.h>
#include <stdio.h>

int main() {
    wchar_t user[256];
    DWORD size = sizeof(user)/sizeof(user[0]);
    GetUserNameW(user, &size);

    printf("User: %S\n", user);

    printf("Local groups: \n");

    LPBYTE buffer;
    DWORD entries, total_entries;

    NetUserGetLocalGroups(NULL, user, 0, LG_INCLUDE_INDIRECT, &buffer, MAX_PREFERRED_LENGTH, &entries, &total_entries);

    LOCALGROUP_USERS_INFO_0 *groups = (LOCALGROUP_USERS_INFO_0*)buffer;
    for (int i=0; i<entries; i++)
        printf("\t%S\n", groups[i].lgrui0_name);
    NetApiBufferFree(buffer);

    printf("Global groups: \n");

    NetUserGetGroups(NULL, user, 0, &buffer, MAX_PREFERRED_LENGTH, &entries, &total_entries);

    GROUP_USERS_INFO_0 *ggroups = (GROUP_USERS_INFO_0*)buffer;
    for (int i=0; i<entries; i++)
        printf("\t%S\n", ggroups[i].grui0_name);
    NetApiBufferFree(buffer);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T12:32:42.337

感谢您的回复，我想我在 MSDN 中找到了我想要的东西。

```
HRESULT CheckUserGroups(IADsUser *pUser)
{

    IADsMembers *pGroups;
    HRESULT hr = S_OK;

    hr = pUser->Groups(&pGroups);
    pUser->Release();
    if (FAILED(hr)) return hr;

    IUnknown *pUnk;
    hr = pGroups->get__NewEnum(&pUnk);
    if (FAILED(hr)) return hr;
    pGroups->Release();

    IEnumVARIANT *pEnum;
    hr = pUnk->QueryInterface(IID_IEnumVARIANT,(void**)&pEnum);
    if (FAILED(hr)) return hr;

    pUnk->Release();

    // Enumerate.
    BSTR bstr;
    VARIANT var;
    IADs *pADs;
    ULONG lFetch;
    IDispatch *pDisp;

    VariantInit(&var);
    hr = pEnum->Next(1, &var, &lFetch);
    while(hr == S_OK)
    {
        if (lFetch == 1)
        {
             pDisp = V_DISPATCH(&var);
             pDisp->QueryInterface(IID_IADs, (void**)&pADs);
             pADs->get_Name(&bstr);
             printf("Group belonged: %S\n",bstr);
             SysFreeString(bstr);
             pADs->Release();
        }
        VariantClear(&var);
        pDisp=NULL;
        hr = pEnum->Next(1, &var, &lFetch);
    };
    hr = pEnum->Release();
    return S_OK;
} 
```