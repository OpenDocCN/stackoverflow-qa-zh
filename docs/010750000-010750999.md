# StackOverflow 问答 10750000-10750999

# python - 巨大列表或字典中的 for 循环性能

> ID：10750001
> 
> 赞同：0
> 
> 时间：2012-05-25T07:08:45.397
> 
> 标签：python, performance, hypertable

我正在做一个关于搜索引擎的研究项目，我遇到了 for 循环的性能问题。我有以下问题：

```
for value in hash_array.keys():  
        cell= db_conn.use_client().hql_query(db_conn.use_namespace(),'SELECT doc_text FROM SE_doc_text WHERE ROW=\"'+
                             value+"\" SCAN_AND_FILTER_ROWS LIMIT 1").cells  
        list_result[value].append(cell[0].value) 
```

使用超表我希望获得最佳性能，但是当我在 hash_array.keys() 的 20.000 或 30.000 个元素上使用它时，我会得到 5-6 分钟的结果，所以速度非常慢。还有其他方法可以快速执行吗？或者我应该将我的计划 b 用于整个搜索引擎。

查询的性能：

```
 Elapsed time:  0.10 s
Avg value size:  1428.00 bytes
  Avg key size:  57.00 bytes
    Throughput:  595190.38 bytes/s
   Total cells:  1
    Throughput:  400.80 cells/s 
```

在硬件上测试：

```
8gb 1600mhz
1055t amd 
```

附加事实：

```
 Without SCAN_AND_FILTER_ROWS: 1.78163504601ms
 With SCAN_AND_FILTER_ROWS: 3.27163504601ms
 Only for loop: 0.0630ms 
```

使用解决方案（来自答案）我有以下内容：

```
stringRow = ' AND '.join(["ROW = \""+value + "\"" for value in hash_array.keys()])
cell = db_conn.use_client().hql_query(db_conn.use_namespace(),stringBatch+stringRow).cells  

Results:  0.355320930481ms for 2097 documents
          1.0214779377 for 3565 documents 
```

这很好，但不是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:15:19.660

我从未使用过 Hypertable，但只是阅读[文档](http://hypertable.com/documentation/reference_manual/thrift_api/)表明该`SCAN_AND_FILTER_ROWS`子句可能是一个问题：

> 对于查询大量行间隔（例如 10,000+）的情况，这是一个显式优化。此选项不会单独获取每个行间隔，而是会导致系统执行全表扫描并过滤结果以找到所需的行。谨慎使用此选项，对于较少数量的行间隔，它可能会非常低效。

如果您一次发送一批密钥，此子句可能会变得更合适。

阅读更多[文档](http://hypertable.com/documentation/reference_manual/hql/#select)表明可以使用以下构造进行批处理：

```
| '(' [row_key relop] ROW relop row_key
      (OR [row_key relop] ROW relop row_key)* ')' 
```

因此，使用 100 个独立键的析取构造一个查询：`ROW=x OR ROW=y OR...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:56:24.160

请不要为此使用 SCAN_AND_FILTER_ROWS，当您只选择一行时会导致性能问题。

一些使它更快的方法：

*   创建一个 TableScanner 并将多行添加到 ScanSpec 以避免发送许多小型网络消息的开销（这是 Daniel Renshaw 建议的）
*   如果您的行键在一个范围内，那么您还可以获取一系列行键
*   如果您的行键有一个公共前缀，那么您可以使用前缀搜索（WHERE ROW =^ "prefix"）

# iphone - UISegmentedControl 非常奇怪的问题

> ID：10750007
> 
> 赞同：1
> 
> 时间：2012-05-25T07:09:18.110
> 
> 标签：iphone, objective-c, ios, ipad

所以这里是代码：

```
UISegmentedControl * segmentedCtrl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 180, 35)];
    //[segmentedCtrl setTintColor:[UIColor brownColor]];
    [segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [segmentedCtrl setBackgroundColor:[UIColor clearColor]];

    [segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:0 animated:NO];
    [segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:1 animated:NO];
    [segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:2 animated:NO];

    [segmentedCtrl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
    [segmentedCtrl setSegmentedControlStyle:UISegmentedControlStyleBar];
    //[segmentedCtrl setMomentary:YES];
    [segmentedCtrl.layer setBorderWidth:1.0];
    [segmentedCtrl.layer setCornerRadius:5.0]; 
```

但是，当我按下分段控件时，我得到了这个：

![在此处输入图像描述](../Images/65451ebceefca764b77f66fd55c2c054.png)

任何想法删除蓝色突出显示？

这是我压缩的一个示例项目，它显示了这个问题：

[http://dl.dropbox.com/u/19680269/Test.zip](http://dl.dropbox.com/u/19680269/Test.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:04:28.790

我试过你的代码...

我通过添加此代码解决了这个问题

![在此处输入图像描述](../Images/b7a64d85aa5ea3fbc1038b1efdad5d41.png)

```
[segmentedCtrl setSegmentedControlStyle:UISegmentedControlStyleBezeled]; 
```

所以整个代码会是这样的

```
UISegmentedControl * segmentedCtrl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 180, 35)];
//[segmentedCtrl setTintColor:[UIColor brownColor]];
[segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[segmentedCtrl setBackgroundColor:[UIColor clearColor]];
[segmentedCtrl setSegmentedControlStyle:UISegmentedControlStyleBezeled];
[segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:0 animated:NO];
[segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:1 animated:NO];
[segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:nil] atIndex:2 animated:NO];

[segmentedCtrl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
//[segmentedCtrl setMomentary:YES];
[segmentedCtrl.layer setBorderWidth:1.0];
[segmentedCtrl.layer setCornerRadius:5.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:28:21.043

您可以添加一个分隔符 png 文件：

```
[segmentedControl setDividerImage:[UIImage imageNamed:@"separator.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

ps：

你为什么将它两次添加到你的视图中？

```
[self.view addSubview:segmentedControl]; 
```

**编辑：**

如果您真的不需要分段之间的分隔符，您可以这样删除它们：

```
for (UIView* aSubV in segmentedControl.subviews) {
    NSLog(@"•••");
    NSLog(@"aSubV2: %@",[aSubV.subviews objectAtIndex:1]);
    UIView* separatorToRemove = [aSubV.subviews objectAtIndex:1];
    [separatorToRemove removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:59:36.123

```
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar; 
```

添加此行修复`viewDidLoad`了`MCSegmentedControlDemoViewController.m`该错误。蓝色是普通段视图的高亮颜色。

当您为普通段设置背景时，它不会完全覆盖。所以你会看到边缘的蓝色。

使其条形样式使您的图像覆盖整个片段。因此，您不会看到蓝色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:30:20.950

我不确定这是否正是您正在寻找的，但如果您使用下面的代码，结果将是：

![在此处输入图像描述](../Images/053185aa63007eb56980392e8299c6c4.png)

更改您的代码：

*   你加`segmentedControl`了`self.view`两次 - 删除了第一次出现
*   添加`[segmentedControl setSegmentedControlStyle:UISegmentedControlStyleBar];`

段之间有一条 1px 的绿线 - 这是由于您的线：

```
segmentedControl.tintColor = [UIColor colorWithRed:.0 green:.6 blue:.0 alpha:1.0]; 
```

如果您希望线条具有其他颜色，只需更改`tintColor`属性即可。

完整的`viewDidLoad`样子：

代码没有在其他任何地方修改。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor colorWithWhite:0.95 alpha:1.0];
    NSArray *items = [NSArray arrayWithObjects:
                      @"one",
                      @"two",
                      [UIImage imageNamed:@"star.png"],
                      nil];

    UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:items];

    // set frame, add to view, set target and action for value change as usual
    segmentedControl.frame = CGRectMake(10.0f, 208.0f, 300.0f, 44.0f);
    //[self.view addSubview:segmentedControl];
    [segmentedControl addTarget:self action:@selector(segmentedControlDidChange:) forControlEvents:UIControlEventValueChanged];

    [segmentedControl setSegmentedControlStyle:UISegmentedControlStyleBar];

    [segmentedControl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    segmentedControl.selectedSegmentIndex = 1;

    // Set a tint color
    segmentedControl.tintColor = [UIColor colorWithRed:.0 green:.6 blue:.0 alpha:1.0];

    [self.view addSubview:segmentedControl];
    [segmentedControl release];    
} 
```

# javascript - 构建可访问数据库的跨平台应用程序

> ID：10750008
> 
> 赞同：0
> 
> 时间：2012-05-25T07:09:17.907
> 
> 标签：javascript, database, wcf, cordova, cross-platform

我们需要技术或一组技术来创建对单个数据库的跨平台访问。我们将使用 ASP.NET MVC 创建一个 Web 应用程序，使用 PhoneGap、C# for Windows、native for Mac 或 Adob​​eAIR 部署移动应用程序以同时针对 Windows、Mac 和 Linux。我们需要一种方法来拥有一个集中访问层，以便我们可以发出请求并从数据库中获取结果。

有什么方法可以使用 WCF 服务并确保安全，因此只有登录的用户才能访问其数据？如果不是，在这种情况下可以推荐什么。请注意，在实现 Web 和 PhoneGap 应用程序时，我们需要使用 JavaScript AJAX 请求来访问数据。

我们将非常感谢任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:57:49.513

是的，有可能，如果您将其与 twitter 或 facebook 等门户网站进行比较，他们会非常按照您所说的去做。使用 OAuth 进行身份验证，并使用令牌和密钥识别每个 HTTP 请求，并使数据非常特定于登录用户。

这样做可以让您扩展平台的范围，以便将来在需要时提供开发人员 API。

# c# - 如何在动态添加现在数据之前清除dataGridView行以前的数据......？

> ID：10750012
> 
> 赞同：2
> 
> 时间：2012-05-25T07:10:09.793
> 
> 标签：c#, asp.net, datagridview, windows-forms-designer

```
 for(int c =1;c<=author.books.count;c++)             
 {

  string author = author.name.ToString();

  string author = author.book_name.ToString();
  string author = author.published_year.ToString();

  string[] row = new string[]{author, book_name, published_year};
  dataGridView1.Rows.Add(row);
 } 
```

这是我的代码（类似地）........我正在从一个 XML 文件中获取数据。我的问题是当我选择一位作者时，它在 windows_form 的 gridview 中提供数据。之后，如果我再选择一位作者，comming 数据将附加到预览数据中。我只想显示当前选定的作者数据。

我试过了：

```
 dataGridView1.Rows.Clear(); 
```

当我在for循环之前将此代码放在pgm中时，它甚至没有在“GridView”中提供任何数据。

我试过了：

```
 if (this.dataGridView1.DataSource != null)
      {
          this.dataGridView1.DataSource = null;
      }
     else
     {
       this.dataGridView1.Rows.Clear();
     } 
```

与上面相同的方式不显示任何数据。

请帮我.................

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T15:00:54.717

如果您的`datasource = null`. 这意味着如果已经分配了某些数据源，您将不会清除行。这是你的情况。

所以你应该这样做。不需要 if 语句。

删除此声明

```
 if (this.dataGridView1.DataSource != null) 
```

你的代码应该是这样的

```
 this.dataGridView1.DataSource = null;
      this.dataGridView1.Rows.Clear(); 
```

这是清除行的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:13:43.710

将 xml 读入 dataTable 并将表与 datagridview 绑定。在这种情况下，您不需要清除行内容。

否则你可以使用`datagridview.Rows.RemoveAt(index)`或`datagridview.Rows.Remove(row)`

# c - 需要一些教程链接在 C 中的控制台应用程序中与 TUI 相邻

> ID：10750015
> 
> 赞同：4
> 
> 时间：2012-05-25T07:10:15.903
> 
> 标签：c, windows, console-application, tui

我想用 C 语言制作一个基于控制台的应用程序，比如 Norton Commander。
我在编写核心时没有问题。
我需要一些关于如何在 Windows 控制台中制作 TUI 的教程（使用 windows.h）。
我需要它是这样的：

![数控](../Images/eaeffcfc3898837b2ee1dbb2eaebd8cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:56:41.213

可能是您需要的[PDCurses库。](http://www.projectpluto.com/win32a.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:16:58.627

我已经开始编写我的[`Tickit`](http://metacpan.org/module/Tickit)Perl 模块的 C 库版本，它提供终端 UI 功能。最终完成这将提供一组基于小部件的高级代码来构建全屏交互式 UI。目前，C 库具有较低级别的屏幕输出和键盘/鼠标输入代码，但缺少完整应用程序的窗口和小部件。

在这一点上，它是一个正在进行中的工作，所以它还不能作为一个简单的最终用户库使用，但如果你有兴趣，我可以尝试至少在这个较低层准备发布一些东西。

# google-chrome - 在 Chrome 浏览器中查看 HTTP 站点中的 HTTPS iframe

> ID：10750019
> 
> 赞同：2
> 
> 时间：2012-05-25T07:10:47.453
> 
> 标签：google-chrome, iframe, https

我有一个持有 HTTPS iframe 的 HTTP 站点。

最初，iframe 不会出现在 Chrome (501 - erro_insecure_response) 中，但会出现在 IE 和 Firefox 中。

如果我直接访问 iframe 并接受 Chrome 中的证书，那么我也可以在带有 iframe 的 http 页面中看到它。

有什么解决办法吗？我希望它在带有 HTTP 页面的 iframe 中第一次在 Chrome 中显示（要求接受证书）。

# php - 从静态函数内部访问带引号的静态变量

> ID：10750024
> 
> 赞同：0
> 
> 时间：2012-05-25T07:11:10.037
> 
> 标签：php

我有以下一段代码，它不起作用：

```
<?php
class test{
    public static $var = 'foo';
    public static function printvar(){
        echo "Var value is {self::$var}";
    }
}
test::printvar();
?> 
```

但是，这有效：

```
<?php
class test{
    public static $var = 'foo';
    public static function printvar(){
        echo "Var value is " . self::$var;
    }
}
test::printvar();
?> 
```

问题是，无论如何我可以从静态方法内部访问引号内的静态变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:24:10.490

手动：

> > {$} 中的函数、方法调用、静态类变量和类常量从 PHP 5 开始工作。但是，访问的值将被解释为定义字符串的范围内的变量名。**使用单个花括号 ({}) 无法访问函数或方法的返回值或类常量或静态类变量的值**。

阅读更多[字符串](http://php.net/manual/en/language.types.string.php)...

# azure - 从 Azure 表存储中删除列

> ID：10750026
> 
> 赞同：0
> 
> 时间：2012-05-25T07:11:17.080
> 
> 标签：azure, azure-table-storage, data-transform

这是我用来从表存储中读取实体的代码片段：

```
public void OnReadingEntity(object sender, ReadingWritingEntityEventArgs args)
    {
        XNamespace AtomNamespace = "http://www.w3.org/2005/Atom";
        XNamespace AstoriaMetadataNamespace = "http://schemas.microsoft.com/ado/2007/08/dataservices/metadata";

        GenericEntity entity = args.Entity as GenericEntity;
        if (entity == null)
        {
            return;
        }

        // read each property, type and value in the payload   
        var properties = args.Entity.GetType().GetProperties();
        var q = from p in args.Data.Element(AtomNamespace + "content")
                                .Element(AstoriaMetadataNamespace + "properties")
                                .Elements()
                where properties.All(pp => pp.Name != p.Name.LocalName)
                select new
                {
                    Name = UnescapePropertyName(p.Name.LocalName),
                    IsNull = string.Equals("true", p.Attribute(AstoriaMetadataNamespace + "null") == null 
                        ? null 
                        : p.Attribute(AstoriaMetadataNamespace + "null").Value, StringComparison.OrdinalIgnoreCase),
                    TypeName = p.Attribute(AstoriaMetadataNamespace + "type") == null 
                        ? null 
                        : p.Attribute(AstoriaMetadataNamespace + "type").Value,
                    p.Value
                };

        foreach (var dp in q)
        {
            entity[dp.Name] = GetTypedEdmValue(dp.TypeName, dp.Value, dp.IsNull);
        }
    } 
```

不幸的是，这段代码将返回一些存在于我已删除的实体中的属性。

有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:27:50.050

Azure 表存储没有你在关系数据库中习惯的列。除了强制列之外，每一行都可以具有完全不同的属性。

当您说“仍然显示”时，我假设这正是您使用的工具呈现数据的方式，这让您认为它就像一个关系表。

有关一些良好的技术背景，请参阅[http://msdn.microsoft.com/en-us/magazine/ff796231.aspx](http://msdn.microsoft.com/en-us/magazine/ff796231.aspx)。

# php - PHP脚本不适用于登录表单

> ID：10750029
> 
> 赞同：0
> 
> 时间：2012-05-25T07:11:26.067
> 
> 标签：php, login-script

我使用会话变量制作了一个登录表单。此登录表单是 index.php，此表单操作将在他继续之前将其重定向到 validate.php 页面。Vaidate.php 代码包含这个

```
<?php
session_start();                    // Initialize session           
include('config.php');              // Include database connection settings
$sql= mysql_query("select * from users where (username= '". mysql_real_escape_string($_post['uname'])."') and (password='".mysql_real_escape_string($_post['pass'])."')");  // Retrieve username and password from database according to user's input
    // check if the username and password exists
    if(mysql_num_rows($sql)==1)
    {
        // store the USERNAME in SESSION VARIABLE
        $_SESSION['name'] = $_POST['uname']; 
        // and then JUMP to WELCOME page
        header('Location:welcome.php');
    }
    else
    {
        // Jump to login page
        //echo "<script type='javascript'>{alert('Username Or Password Incorrect')
//      return false;
//      }
        header('Location:index.php');
    }

?> 
```

index.php 包含以下代码

```
<?php
session_start();                // function to start the session 

if (isset($_SESSION['name']))   // Check, if user is already login, then jump to Welcome page
    {
        header('Location: welcome.php');
    }
?>
</head>
<title>Login</title>

<body>
<form action="validate.php" method="post" name="log"/>
<h3 align="center" style="margin-top:40px">User Login</h3>
<table border="1" cellpadding="3" cellspacing="0" width="40%" align="center" style="margin-top:60px">
<tr>
    <td>User Name</td>
    <td >
        <input type="text" name="uname"/>
    </td>
</tr>
<tr>
    <td>Password</td>
    <td>
        <input type="password" name="pass"/>
    </td>
</tr>
<tr>
    <td colspan="2" align="center">
        <input type="submit" value="Submit">
        <input type="reset" value="Clear ">
    </td>
</tr>
</table>
</body>
</html> 
```

这个问题是即使用户名密码正确，它也会重定向到 index.php。在这种情况下，我无法弄清楚我缺少什么。代码似乎是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:16:39.577

$_post['pass'] 和 $_post['uname'] 未定义。使用`$_POST['pass']`和`$_POST['uname']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:27:31.220

$_POST 必须是大写。此外，我建议先将 $_POST['uname'] 存储在变量中，然后在查询中使用它。

# ruby-on-rails - 使用引导程序获取占位符文本

> ID：10750031
> 
> 赞同：1
> 
> 时间：2012-05-25T07:11:36.100
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3, twitter-bootstrap, less

我正在使用 rails 和[twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)的最新版本，但我无法让我的输入显示占位符文本。当我添加以下内容时：

```
@placeholderText: @grayLight 
```

在我的 bootstrap_and_overrides.css.less 中，我得到一个 Less::Error 有人可以告诉我我缺少什么吗？

```
Syntax Error on line 30
  (in /home/ubuntu/new-project/app/assets/stylesheets/bootstrap_and_overrides.css.less) 
```

****更新**** 感谢 xnm，错误现在消失了，但我仍然没有占位符文本。这是我的**

 **```
@import "twitter/bootstrap/bootstrap";
body { padding-top: 60px; }

@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
@fontAwesomeEotPath: asset-path('fontawesome-webfont.eot');
@fontAwesomeWoffPath: asset-path('fontawesome-webfont.woff');
@fontAwesomeTtfPath: asset-path('fontawesome-webfont.ttf');
@fontAwesomeSvgzPath: asset-path('fontawesome-webfont.svgz');
@fontAwesomeSvgPath: asset-path('fontawesome-webfont.svg');

// Font Awesome
@import "fontawesome";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
@linkColor: #ff0000;
@placeholderText: @grayLight; 
```

这是我的html：

```
<div class="placeholding-input">
  <input type="text" class="text-input" autocomplete="off" name="user[name]" maxlength="20">
  <span class="placeholder">Full name</span>
</div> 
```

生成的样式表只是没有给我占位符样式。我想我应该 @import 一些东西，但我找不到任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:53:27.927

与 sass 不同，less 在每行末尾使用分号。

```
@placeholderText: @grayLight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T01:31:09.537

我找到了。显然正确的方法是：

```
<input type="text" class="text-input" name="user[name]" maxlength="20" placeholder="Full name"> 
```

非常混乱，因为我从 twitter 主页复制了不正确的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:39:14.810

看到这个问题的更新。 [https://github.com/seyhunak/twitter-bootstrap-rails/issues/239](https://github.com/seyhunak/twitter-bootstrap-rails/issues/239)**

# java - 变量和线程

> ID：10750032
> 
> 赞同：-1
> 
> 时间：2012-05-25T07:11:37.580
> 
> 标签：java, multithreading, variables

我有这个代码：

```
public class Tarea implements Runnable
{

    private int valor;

    public Tarea()
    {
         valor = 0;
    }

    public void run()
    {
         for (int i = 1; i <= 10; i++)
         {
             valor++;
         }
         System.out.println(Thread.currentThread().getName() + " Valor " + valor);
    }
}

public class AppTarea
{

    public static void main(String[] args)
    {
         Thread[] hilos = new Thread[5];
         for (int i = 0; i < hilos.length; i++)
         {
             hilos[i] = new Thread(new Tarea());
             hilos[i].start();
         }
         System.out.println("Main terminado");
    }
} 
```

这个线程安全吗？我应该将变量 valor 定义为 volatile。valor 是否在不同的线程中共享？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:14:54.423

它是线程安全的，因为没有共享任何东西......该变量`valor`对于每个线程都是唯一的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:31:53.637

答案是肯定的。每个线程都在自己的上下文中运行并使用变量“valor”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:24:12.553

简短的回答：是的，这是线程安全的。

长答案：您的代码是线程安全的，因为您的线程的成员变量都不是共享资源。这意味着您创建的每个线程都拥有一个`valor`成员变量。`volatile`应该用于共享资源，以确保它们是同步的，而不是在线程之间缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:15:00.883

这是线程安全的，因为它只能`run()`从同一个类访问构造函数和方法。唯一可以使用该变量的线程是正在运行的线程，它在[java 内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)（实际上是我知道的任何内存模型）下与自身同步，因此这里没有[数据竞争](http://en.wikipedia.org/wiki/Race_condition)。这里不需要`volatile`也不需要`synchronized`关键字。

当你想从多个线程修改一个变量，并且你不希望它被存储在缓存中时，使用 volatile 关键字。情况并非如此 - 变量在此处由单个线程修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T07:16:28.857

您的变量是一个实例变量，线程和实例之间存在一对一的映射。所以每个线程都有一个单独的状态副本。因此不需要同步。

如果变量在线程之间共享，那么您将需要同步。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-25T07:13:38.570

不，它不是共享的，它是一个私有*实例*变量。该类的每个实例都有一个私有副本，并且无法在类外部访问它，因此它是安全的。

--根据下面的讨论，我最初的答案是错误的-错过了关键实例与静态变量角度。以下是原答案：

不，它不是共享的，它是私有变量。没有办法在课堂外访问它，所以它是安全的。

# json - 在 Jetty 中使用 Jersey 映射到 JSON

> ID：10750033
> 
> 赞同：0
> 
> 时间：2012-05-25T07:11:47.317
> 
> 标签：json, jetty, jersey

我有一个 Jetty 服务器（8.1.3），我想在其中使用 Jersey（1.12）通过 REST 服务公开一些 POJO。我在将资源映射到 JSON 时遇到问题，我不知道为什么。

Jetty 和 Jersey servlet 启动：

```
public class JettyUtil {
  public static void start() throws Exception {
    Server server = new Server();
    SelectChannelConnector connector = new SelectChannelConnector();
    connector.setPort(8999);
    server.addConnector(connector);

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { createJerseyServlet(), new DefaultHandler() });
    server.setHandler(handlers);

    server.start();
    server.join();  
  }

  private static Handler createJerseyServlet() {
    ServletContextHandler handler = new ServletContextHandler();
    handler.setContextPath("/game");
    SessionHandler sessionHandler = new SessionHandler();
    handler.setSessionHandler(sessionHandler);
    ServletHolder holder = handler.addServlet("com.sun.jersey.spi.container.servlet.ServletContainer", "/*");
    Map<String,String> initParams = ImmutableMap.of(
             "com.sun.jersey.config.property.packages", "com.test.todo.rest",
             "com.sun.jersey.api.json.POJOMappingFeature", "true");
    holder.setInitParameters(initParams);
    return handler;
  }
 } 
```

资源：

```
@XmlRootElement
public class Todo {
  private String summary;
  public String getSummary() { return summary; }
  public void setSummary(String summary) { this.summary = summary; }
} 
```

网络服务：

```
@Path("/todo")
public class TodoResource {
  @GET
  @Produces( { MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
  public Todo getTodo() {
    Todo todo = new Todo();
    todo.setSummary("This is my first todo");
    return todo;
  }
 } 
```

测试：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource service = client.resource(getBaseURI());     
System.out.println(
  service.path("game").path("todo").
    accept(MediaType.APPLICATION_JSON).get(String.class)); 
```

输出码头服务器：

```
May 24, 2012 4:21:34 PM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: A message body writer for Java class com.test.todo.rest.Todo, and Java type class com.test.todo.rest.Todo, and **MIME media type application/json was not found**

May 24, 2012 4:21:34 PM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: The registered message body writers compatible with the MIME media type are:
*/* ->
com.sun.jersey.core.impl.provider.entity.FormProvider
com.sun.jersey.core.impl.provider.entity.StringProvider
com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
com.sun.jersey.core.impl.provider.entity.ReaderProvider
com.sun.jersey.core.impl.provider.entity.DocumentProvider
com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General

May 24, 2012 4:21:34 PM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: 
com.sun.jersey.api.MessageException: A message body writer for Java class com.test.todo.rest.Todo, and Java type class com.test.todo.rest.Todo, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.jvva:1451)
... 
```

问题：

如何使用 Jetty 中的 Jersey servlet 将“application/json”添加为受支持的 MIME 格式？我认为将 com.sun.jersey.api.json.POJOMappingFeature 设置为 true 是诀窍吗？（获取 XML 工作正常，但我也需要它与 Json 一起工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:51:17.590

将 lib 添加`jersey-jackson`到您的类路径中。

# android - 杀死应用程序

> ID：10750034
> 
> 赞同：0
> 
> 时间：2012-05-25T07:11:49.653
> 
> 标签：android, alarmmanager

我想在 10 秒后杀死我的应用程序，我想在获得 Kill Action 后启动杀死应用程序的服务。但是这段代码在 10 秒后注意到。为什么？

```
AlarmManager alarmMgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, service_MyService.class);
intent.setAction("Kill");
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,intent, 0);
Calendar time = Calendar.getInstance();
time.setTimeInMillis(System.currentTimeMillis());
time.add(Calendar.SECOND, 10);
alarmMgr.set(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(),pendingIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:57:05.110

您可以使用以下方法终止您的活动：

```
finish(); 
```

或者你可以杀死你的应用程序：

```
System.exit(0); 
```

但两者都不推荐。Android系统不适合这个。Android 操作系统控制杀死应用程序。

更多信息在[这里](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:51:30.680

这不好，因为 Android 想自己管理应用程序，但你可以这样做。

```
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:41:09.147

在您的代码中，您正在发送广播意图

```
PendingIntent.getBroadcast(this, 0,intent, 0); 
```

它只能启动一个广播接收器而不是一个服务。但是，您使用了正确的意图，因为 AlarmManager 无法唤醒服务，只能唤醒 BroadCastReceiver-s。

您应该创建一个 BroadCastReceiver 而不是服务，并替换此行：

```
Intent intent = new Intent(this, service_MyService.class); 
```

用这条线

```
Intent intent = new Intent(this, KillerBroadCastReceiver.class); 
```

然后在您的 KillerBroadCastReceiver 类中杀死该应用程序。

但是，如果您想在一段时间后终止应用程序，更好的解决方案是使用处理程序。这是一个例子：

```
public class VeryFirstActivity extends Activity {
    Handler mKillerHandler;

    public void onCreate(...) {
        mKillerHandler = new Handler();
        mKillerHandler.postDelayed(new Runnable() {
           public void run() {
               VeryFirstActivity.this.finish();
           }
        }, 10000); // 10 seconds
    }
} 
```

# c++ - 当用户点击一个键时显示一条消息

> ID：10750037
> 
> 赞同：2
> 
> 时间：2012-05-25T07:12:12.977
> 
> 标签：c++, c, winapi, setwindowshookex, hinstance

以下代码段旨在在用户键入密钥时显示消息。即使焦点不在应用程序上。但是下面的代码似乎有问题。它不会调用在 windows 的钩子链中注册的函数。我想问题出在`HINSTANCE hInst`. 我应该如何修改下面的代码，以便在用户点击一个键时能够看到消息。

```
// Global Variables
static HHOOK handleKeyboardHook = NULL;
HINSTANCE hInst = NULL;

void TestKeys_setWinHook // i call this function to activate the keyboard hook
  (...) {
    hInst = GetModuleHandle(NULL);
    handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInst, 0); // LowLevelKeyboardProc should be put in the hook chain by the windows,but till now it doesn't do so.
    printf("Inside function setWinHook !");
} 
```

* * *

```
// the following function should be called when the user taps a key.

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
  printf("You pressed a key !\n");
  return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
} 
```

但是 windows 不调用该函数`LowLevelKeyboardProc`。我不明白原因，但我确信问题出`hInst`在钩子函数中。我需要如何初始化它？

到目前为止，我看到的输出是`Inside function setWinHook !`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:22:06.577

下面是一个 LowLevelKeyboardProc 的示例。

```
HHOOK hHook;

LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam);
{
    printf("You pressed a key!\n"); 
    return CallNextHookEx(hHook, nCode, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
  hHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInstance, 0);
  MSG msg;
  while(GetMessage(&msg, NULL, 0, 0))
  {
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }
  return msg.wParam;
} 
```

# vb.net - 使用 SQLBulkCopy 导入数据

> ID：10750043
> 
> 赞同：1
> 
> 时间：2012-05-25T07:12:45.707
> 
> 标签：vb.net, sqlbulkcopy

我们有一个遗留应用程序将大量数据转储到制表符分隔的文件中。每个文件都包含一个记录类型，并且所有字段都是固定长度的。

这些文件可以很容易地从命令行使用 BCP 实用程序导入到我们的 SQL 服务器数据库中的相应表中。我们有一个用 VS 2003 编写的 VB.Net 程序，它使用 SQLDMO.BulkCopy 例程导入这些文件。

我们正在更新系统以将 VS 2010 与 SQL Server 2008 一起使用，并且根据 Microsoft 文档，SQLDMO 不再可用。

我在互联网上搜索并重写了导入例程，以使用 Microsoft.Jet.OLEDB.4.0 提供程序将制表符分隔的文件导入 DataTable。然后使用 SqlClient.BulkCopy 对象导入此 DataTable。我遇到的这个问题是制表符分隔文件中设置为空格的字段在导入 DataTable 时被视为 NULL。当 SqlClient.BulkCopy 处理 DataTable 时，复制失败，因为空值被定义为 NOT NULL 的 SQL 表字段拒绝。

正在测试的代码如下所示

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim data As DataTable = RetrieveSourceData()
    CopyData(data)
End Sub

Private Function RetrieveSourceData() As DataTable
    Dim connstring As String = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=C:\temp\;Extended Properties='text;HDR=No;FMT=TabDelimited'"
    Dim sourcedata As New DataTable
    Using conn As New OleDb.OleDbConnection(connstring)
        conn.Open()
        Dim command As New OleDb.OleDbCommand("Select * from X1.CSV", conn)
        Dim adapter As New OleDb.OleDbDataAdapter(command)
        adapter.Fill(sourcedata)
        conn.Close()
    End Using
    Return sourcedata
End Function

Private Sub CopyData(SourceData As DataTable)
     Dim dbConnString As String = "Data Source=(local);Initial Catalog=XtractDB;User ID=xxxx;Password=yyyy;"
    Using bcp As New SqlClient.SqlBulkCopy(dbConnString)
        bcp.DestinationTableName = "X1"
        bcp.BatchSize = 1000
        bcp.WriteToServer(SourceData)
    End Using
End Sub 
```

为了让输入文件被识别为 TabDelimited，我必须在与输入文件相同的目录中创建一个 schema.ini 文件。内容如下图

```
[X1.CSV]
Format=TabDelimited 
```

在创建 DataTable 时，有什么方法可以强制带空格的字段不被视为 NULL？

这是通过 VB.Net 程序处理批量复制的最佳方法吗？

TIA,

安迪

保存到：默认

切换颜色主题
选择消息背景颜色...
选择消息区域宽度...
调整消息文本字体大小...
禁用自动链接 启用首字母缩略词 禁用消息标题 启用自动引用 更新此线程的标题... **SQL 批量复制**线程# 1544244 消息 #1544244

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:19:07.717

SqlDMO 在 Sql server 2012 中已弃用，但在 Sqlserver 2008 R2 版本之前可用。SqlBulkCopy 在 4.5 之前的所有 .net 框架中都可用，除了 1.1。

[请参考此链接进行验证](http://msdn.microsoft.com/en-us/library/cc707782.aspx)

您可以使用 BULK INSERT（命令行实用程序）一次插入多条记录。

```
BULK
INSERT Tablename
FROM 'c:\csvtest.txt'
WITH
(
    FIELDTERMINATOR = ','
    ,ROWTERMINATOR = '\n'
    --,FIRSTROW = 2
    --,MAXERRORS = 0
)
GO 
```

# android - 如何在来自 web 服务的 Android 中显示马拉地语文本

> ID：10750044
> 
> 赞同：5
> 
> 时间：2012-05-25T07:13:01.087
> 
> 标签：android, web-services

我需要在我的应用程序中显示马拉地语文本。其实我知道程序。我用过这段代码：

```
 Typeface font = Typeface.createFromAsset(getAssets(), "Marathi-Saras.TTF");
         userNameTxt.setTypeface(font);
         userNameTxt.setText("Marathi"); 
```

但这是硬编码和有限的。实际上，我要显示的网络服务数据包含一些马拉地语和英语数据。每当马拉地语数据出现时，它只会显示盒子。这里我的输出看起来像这样： ![输出](../Images/3fa0f1a229efb805a19232c03460db26.png)

谁能知道我需要做什么才能以马拉地语形式显示数据。提前致谢

这是我的代码：XMLHandler 类

```
package com.app.unipune.announcements.parserHandler;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.text.Html;

public class AnnouncementHandler extends DefaultHandler {
    public static ItemList itemList;
    public boolean current = false;
    public String currentValue = null;

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        current = true;
        if (localName.equals("channel")) {
            itemList = new ItemList();
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        current = false;
        if (localName.equals("title")) {
            itemList.setTitle(currentValue);
        } else if (localName.equals("author")) {
            itemList.setLink(currentValue);
        } else if (localName.equals("description")) {
            itemList.setDescription(currentValue);

        }else if(localName.equals("guid"))
        {
            itemList.setGuid(currentValue);
            System.out.println(currentValue);
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        if (current) {
            currentValue = new String(ch, start, length);
            current = false;
        }
    }

} 
```

我在这里使用它：

```
package com.app.unipune.announcements;

import java.net.URL;
import java.util.ArrayList;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.method.LinkMovementMethod;
import android.widget.ListView;

import com.app.unipune.announcements.parserHandler.Adapter;
import com.app.unipune.announcements.parserHandler.AnnouncementHandler;
import com.app.unipune.announcements.parserHandler.ItemList;

public class Announcements extends Activity {
    private ProgressDialog dialog;
    ItemList itemList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.descriptionlist);
        if (isInternetOn() == true) {
            dialog = ProgressDialog.show(this, "Loading", "Please Wait...",
                    true, false);

            System.out.println("start call");
            Handler myHandler = new DoParsing();
            Message m = new Message();
            myHandler.sendMessageDelayed(m, 2000);
            System.out.println("end Call");
        } else {
            new AlertDialog.Builder(Announcements.this)
                    .setTitle("Error")
                    .setMessage(
                            "Your  device is not Connected to the Internet."
                                    + "\n"
                                    + "Please make connection to proceed ")
                    .setPositiveButton("OK", null).show();
        }

    }

    public final boolean isInternetOn() {
        ConnectivityManager connec = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED
                || connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) {
            return true;
        } else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
            return false;
        }
        return false;
    }

    public class DoParsing extends Handler {
        @Override
        public void handleMessage(Message msg) {
            try {

                URL url = new URL(
                        "http://uopnews.unipune.ac.in/_layouts/listfeed.aspx?List={E1D35B2C-88CA-40FF-A956-C01C44A45DC8}");
                System.out.println("URL= " + url);
                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();
                AnnouncementHandler handler = new AnnouncementHandler();
                xmlR.setContentHandler(handler);
                xmlR.parse(new InputSource(url.openStream()));

                itemList = new ItemList();
                itemList = AnnouncementHandler.itemList;

                ArrayList<String> title = itemList.getTitle();
                System.out.println("title=" + title);
                ArrayList<String> des = itemList.getDescription();
                ArrayList<String> link = itemList.getLink();

                Adapter adapter = new Adapter(Announcements.this, title, des,link);

                ListView lview = (ListView) findViewById(R.id.searchList);
                lview.setAdapter(adapter);

                dialog.dismiss();
            } catch (Exception e) {
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:24:45.717

而不是这个：

```
Typeface font = Typeface.createFromAsset(getAssets(), "Marathi-Saras.TTF"); 
```

写

```
 Typeface font = Typeface.createFromAsset(getAssets(), "fonts/Marathi-Saras.TTF"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:16:36.577

您实际需要做的是创建一个包含马拉地语单词的 xml 链接，并使用 json 或 sax 解析器解析该 xml 链接。要创建 xml 链接，您需要 php 开发人员的支持。

如果您需要任何帮助或支持，请与我联系。

# jquery - 如何追加新元素并隐藏现有元素？

> ID：10750053
> 
> 赞同：0
> 
> 时间：2012-05-25T07:13:40.743
> 
> 标签：jquery, append, lightbox

我正在尝试将 '.test' 附加到 '#lig' 并且这有效，但显然加载了具有相同类的所有元素。我将如何拥有它以隐藏现有的并仅从同一个 div 中获取“.test”？

```
<div class="qq">
    <a href="image1.jpg" class="more">More</a>
    <a href="http://yahoo.com" class="test">Yahoo</a>
</div>

<div class="qq">
    <a href="image2.jpg" class="more">More</a>
    <a href="http://google.com" class="test">Google</a>
</div>

<div id="lig"></div>

$('.test').appendTo('#lig'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:41:16.830

您是否尝试向当前显示或选定的元素添加类？

```
$('.qq').click(function(){
  $(this).addClass('selected');
  //..append to #lig
}); 
```

然后，当您想获取相同的元素或（不）时：

```
$('.selected .test') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:16:39.540

```
$('#lig .test')
   .hide() // hide existing .test
   .parent() // back to #lig
   .append('.test'); // append .test 
```

# c++ - 如何打印出向量的内容？

> ID：10750057
> 
> 赞同：355
> 
> 时间：2012-05-25T07:13:52.907
> 
> 标签：c++, vector, output, stdvector, cout

如何将 a 的内容打印`std::vector`到屏幕上？

* * *

实现以下内容的解决方案也`operator<<`很好：

```
template<container C, class T, String delim = ", ", String open = "[", String close = "]">
std::ostream & operator<<(std::ostream & o, const C<T> & x)
{
  // ... What can I write here?
} 
```

* * *

这是我到目前为止所拥有的，没有单独的功能：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cmath>
#include <vector>
#include <sstream>
#include <cstdio>
using namespace std;

int main()
{
    ifstream file("maze.txt");
    if (file) {
        vector<char> vec(istreambuf_iterator<char>(file), (istreambuf_iterator<char>()));
        vector<char> path;
        int x = 17;
        char entrance = vec.at(16);
        char firstsquare = vec.at(x);
        if (entrance == 'S') { 
            path.push_back(entrance); 
        }
        for (x = 17; isalpha(firstsquare); x++) {
            path.push_back(firstsquare);
        }
        for (int i = 0; i < path.size(); i++) {
            cout << path[i] << " ";
        }
        cout << endl;
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：470
> 
> 时间：2012-05-25T17:25:53.947

如果您有 C++11 编译器，我建议使用基于范围的 for 循环（见下文）；或者使用迭代器。但是你有几个选择，我将在下面解释所有这些。

## 基于范围的 for 循环 (C++11)

在 C++11（及更高版本）中，您可以使用新的基于范围的 for 循环，如下所示：

```
std::vector<char> path;
// ...
for (char i: path)
    std::cout << i << ' '; 
```

for 循环语句中的类型`char`应该是向量元素的类型，`path`而不是整数索引类型。换句话说，因为`path`is 是 type `std::vector<char>`，所以应该出现在基于范围的 for 循环中的 type 是`char`。但是，您可能经常会看到显式类型替换为`auto`占位符类型：

```
for (auto i: path)
    std::cout << i << ' '; 
```

无论您使用显式类型还是`auto`关键字，对象`i`的值都是对象中实际项的副本`path`。`i`因此，循环中的所有更改`path`本身都不会保留：

```
std::vector<char> path{'a', 'b', 'c'};

for (auto i: path) {
    i = '_'; // 'i' is a copy of the element in 'path', so although
             // we can change 'i' here perfectly fine, the elements
             // of 'path' have not changed
    std::cout << i << ' '; // will print: "_ _ _"
}

for (auto i: path) {
    std::cout << i << ' '; // will print: "a b c"
} 
```

如果你想禁止`i`在 for 循环中更改这个复制的值，你可以强制的类型`i`是`const char`这样的：

```
for (const auto i: path) {
    i = '_'; // this will now produce a compiler error
    std::cout << i << ' ';
} 
```

如果您想修改其中的项目，`path`以便这些更改在`path`for 循环之外持续存在，那么您可以使用如下引用：

```
for (auto& i: path) {
    i = '_'; // changes to 'i' will now also change the
             // element in 'path' itself to that value
    std::cout << i << ' ';
} 
```

即使您不想修改`path`，如果对象的复制成本很高，您应该使用 const 引用而不是按值复制：

```
for (const auto& i: path)
    std::cout << i << ' '; 
```

## 迭代器

在 C++11 之前，规范的解决方案是使用迭代器，这仍然是完全可以接受的。它们的用法如下：

```
std::vector<char> path;
// ...
for (std::vector<char>::const_iterator i = path.begin(); i != path.end(); ++i)
    std::cout << *i << ' '; 
```

如果要在 for 循环中修改向量的内容，请使用`iterator`而不是`const_iterator`.

#### 补充：typedef / 类型别名 (C++11) / auto (C++11)

这不是另一种解决方案，而是对上述`iterator`解决方案的补充。如果您使用的是 C++11 标准（或更高版本），那么您可以使用`auto`关键字来提高可读性：

```
for (auto i = path.begin(); i != path.end(); ++i)
    std::cout << *i << ' '; 
```

这里的类型`i`将是非常量的（即编译器将`std::vector<char>::iterator`用作的类型`i`）。这是因为我们调用了`begin`方法，所以编译器从中推断出类型`i`。如果我们`cbegin`改为调用该方法（“c”表示 const），那么`i`将是 a `std::vector<char>::const_iterator`：

```
for (auto i = path.cbegin(); i != path.cend(); ++i) {
    *i = '_'; // will produce a compiler error
    std::cout << *i << ' ';
} 
```

如果您对编译器推导类型不满意，那么在 C++11 中，您可以使用类型别名来避免必须一直输入向量（养成的好习惯）：

```
using Path = std::vector<char>; // C++11 onwards only
Path path; // 'Path' is an alias for std::vector<char>
// ...
for (Path::const_iterator i = path.begin(); i != path.end(); ++i)
    std::cout << *i << ' '; 
```

如果您无权访问 C++11 编译器（或出于某种原因不喜欢类型别名语法），那么您可以使用更传统的`typedef`：

```
typedef std::vector<char> Path; // 'Path' now a synonym for std::vector<char>
Path path;
// ...
for (Path::const_iterator i = path.begin(); i != path.end(); ++i)
    std::cout << *i << ' '; 
```

#### 边注：

在这一点上，您以前可能遇到过迭代器，也可能没有，您可能听说过或可能没有听说过迭代器是您“应该”使用的，并且可能想知道为什么。答案并不容易理解，但简而言之，这个想法是迭代器是一种抽象，可以保护您免受操作细节的影响。

拥有一个执行您想要的操作（如顺序访问）的对象（迭代器）而不是您自己编写详细信息（“详细信息”是实际访问向量元素的代码）是很方便的。您应该注意到，在 for 循环中，您只是要求迭代器返回一个值（迭代器`*i`在哪里`i`）——您永远不会`path`直接与自身交互。逻辑是这样的：你创建一个迭代器并给它你想要循环的对象（`iterator i = path.begin()`），然后你所做的就是让迭代器为你获取下一个值（`*i`）；您永远不必担心迭代器是如何做到这一点的——这是它的业务，而不是您的业务。

好的，但有什么意义呢？好吧，想象一下，如果获得价值并不简单。如果它涉及一些工作怎么办？你不必担心，因为迭代器已经为你处理了——它整理了细节，你需要做的就是向它询问一个值。此外，如果您将容器从`std::vector`其他东西更改怎么办？从理论上讲，即使访问新容器中的元素的细节发生了变化，您的代码也不会改变：请记住，迭代器会在幕后为您整理所有细节，因此您根本不需要更改代码-- 你只需向迭代器询问容器中的下一个值，和以前一样。

因此，虽然这看起来像是对循环向量的混淆过度杀伤，但迭代器的概念背后有充分的理由，因此您不妨习惯使用它们。

## 索引

您还可以使用整数类型在 for 循环中显式地索引向量的元素：

```
for (int i=0; i<path.size(); ++i)
    std::cout << path[i] << ' '; 
```

如果您打算这样做，最好使用容器的成员类型，如果它们可用且合适的话。`std::vector`有一个`size_type`为此作业调用的成员类型：它是`size`方法返回的类型。

```
typedef std::vector<char> Path; // 'Path' now a synonym for std::vector<char>
for (Path::size_type i=0; i<path.size(); ++i)
    std::cout << path[i] << ' '; 
```

为什么不优先使用它而不是`iterator`解决方案？对于简单的情况，您可以这样做，但使用 an`iterator`会带来一些优势，我在上面已经简要概述了这些优势。因此，我的建议是避免这种方法，除非你有充分的理由。

## 标准::复制 (C++11)

见[约书亚的回答](https://stackoverflow.com/a/11335634/498730)。您可以使用 STL 算法`std::copy`将矢量内容复制到输出流中。我没有什么要补充的，只是说我不使用这种方法；但除了习惯之外，没有什么好的理由。

## std::ranges::copy (C++20)

为了完整起见，C++20 引入了范围，它可以作用于 a 的整个范围`std::vector`，因此不需要`begin`and `end`：

```
#include <iterator> // for std::ostream_iterator
#include <algorithm> // for std::ranges::copy depending on lib support

std::vector<char> path;
// ...
std::ranges::copy(path, std::ostream_iterator<char>(std::cout, " ")); 
```

除非您有最近的编译器（显然[在 GCC 上至少版本 10.1](https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2020)），否则即使您可能有一些可用的 C++20 功能，您也可能不会支持范围。

## 重载 std::ostream::operator<<

另请参阅[下面 Chris 的回答](https://stackoverflow.com/a/23397700/498730)。这更像是对其他答案的补充，因为您仍然需要在重载中实现上述解决方案之一，但好处是代码更简洁。这就是您可以使用上述`std::ranges::copy`解决方案的方式：

```
#include <iostream>
#include <vector>
#include <iterator> // for std::ostream_iterator
#include <algorithm> // for std::ranges::copy depending on lib support

using Path = std::vector<char>; // type alias for std::vector<char>

std::ostream& operator<< (std::ostream& out, const Path& v) {
    if ( !v.empty() ) {
        out << '[';
        std::ranges::copy(v, std::ostream_iterator<char>(out, ", "));
        out << "\b\b]"; // use two ANSI backspace characters '\b' to overwrite final ", "
    }
    return out;
}

int main() {
    Path path{'/', 'f', 'o', 'o'};

    // will output: "path: [/, f, o, o]"
    std::cout << "path: " << path << std::endl;

    return 0;
} 
```

现在您可以`Path`像基本类型一样将对象传递给输出流。使用上述任何其他解决方案也应该同样简单。

## 结论

此处介绍的任何解决方案都可以使用。哪个是“最好的”取决于您（以及上下文或您的编码标准）。任何比这更详细的东西可能最好留给另一个可以正确评估优点/缺点的问题，但一如既往，用户偏好总是会发挥作用：所提出的解决方案都不是客观错误的，但有些解决方案对每个编码人员来说看起来更好.

## 附录

这是我发布的早期解决方案的扩展解决方案。由于该帖子一直受到关注，因此我决定对其进行扩展并参考此处发布的其他出色解决方案，至少是那些我过去至少亲自使用过一次的解决方案。但是，我鼓励读者查看下面的答案，因为可能有一些我已经忘记或不知道的好建议。

* * *

## 回答 #2

> 赞同：238
> 
> 时间：2012-07-04T21:30:21.797

一个更简单的方法是使用标准[复制算法](http://en.cppreference.com/w/cpp/algorithm/copy)：

```
#include <iostream>
#include <algorithm> // for copy
#include <iterator> // for ostream_iterator
#include <vector>

int main() {
    /* Set up vector to hold chars a-z */
    std::vector<char> path;
    for (int ch = 'a'; ch <= 'z'; ++ch)
        path.push_back(ch);

    /* Print path vector to console */
    std::copy(path.begin(), path.end(), std::ostream_iterator<char>(std::cout, " "));

    return 0;
} 
```

ostream_iterator 就是所谓的*迭代器适配器*。它被模板化为要打印到流中的类型（在本例中为`char`）。`cout`（又名控制台输出）是我们想要写入的流，空格字符 ( `" "`) 是我们想要在存储在向量中的每个元素之间打印的内容。

这个标准算法很强大，许多其他算法也是如此。标准库为您提供的功能和灵活性是它如此出色的原因。想象一下：只需一行代码，您就可以将向量打印到**控制台**。您不必处理带有分隔符的特殊情况。您无需担心 for 循环。标准库为您完成所有工作。

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2011-06-05T04:07:35.320

此解决方案的灵感来自 Marcelo 的解决方案，但做了一些更改：

```
#include <iostream>
#include <iterator>
#include <type_traits>
#include <vector>
#include <algorithm>

// This works similar to ostream_iterator, but doesn't print a delimiter after the final item
template<typename T, typename TChar = char, typename TCharTraits = std::char_traits<TChar> >
class pretty_ostream_iterator : public std::iterator<std::output_iterator_tag, void, void, void, void>
{
public:
    typedef TChar char_type;
    typedef TCharTraits traits_type;
    typedef std::basic_ostream<TChar, TCharTraits> ostream_type;

    pretty_ostream_iterator(ostream_type &stream, const char_type *delim = NULL)
        : _stream(&stream), _delim(delim), _insertDelim(false)
    {
    }

    pretty_ostream_iterator<T, TChar, TCharTraits>& operator=(const T &value)
    {
        if( _delim != NULL )
        {
            // Don't insert a delimiter if this is the first time the function is called
            if( _insertDelim )
                (*_stream) << _delim;
            else
                _insertDelim = true;
        }
        (*_stream) << value;
        return *this;
    }

    pretty_ostream_iterator<T, TChar, TCharTraits>& operator*()
    {
        return *this;
    }

    pretty_ostream_iterator<T, TChar, TCharTraits>& operator++()
    {
        return *this;
    }

    pretty_ostream_iterator<T, TChar, TCharTraits>& operator++(int)
    {
        return *this;
    }
private:
    ostream_type *_stream;
    const char_type *_delim;
    bool _insertDelim;
};

#if _MSC_VER >= 1400

// Declare pretty_ostream_iterator as checked
template<typename T, typename TChar, typename TCharTraits>
struct std::_Is_checked_helper<pretty_ostream_iterator<T, TChar, TCharTraits> > : public std::tr1::true_type
{
};

#endif // _MSC_VER >= 1400

namespace std
{
    // Pre-declarations of container types so we don't actually have to include the relevant headers if not needed, speeding up compilation time.
    // These aren't necessary if you do actually include the headers.
    template<typename T, typename TAllocator> class vector;
    template<typename T, typename TAllocator> class list;
    template<typename T, typename TTraits, typename TAllocator> class set;
    template<typename TKey, typename TValue, typename TTraits, typename TAllocator> class map;
}

// Basic is_container template; specialize to derive from std::true_type for all desired container types
template<typename T> struct is_container : public std::false_type { };

// Mark vector as a container
template<typename T, typename TAllocator> struct is_container<std::vector<T, TAllocator> > : public std::true_type { };

// Mark list as a container
template<typename T, typename TAllocator> struct is_container<std::list<T, TAllocator> > : public std::true_type { };

// Mark set as a container
template<typename T, typename TTraits, typename TAllocator> struct is_container<std::set<T, TTraits, TAllocator> > : public std::true_type { };

// Mark map as a container
template<typename TKey, typename TValue, typename TTraits, typename TAllocator> struct is_container<std::map<TKey, TValue, TTraits, TAllocator> > : public std::true_type { };

// Holds the delimiter values for a specific character type
template<typename TChar>
struct delimiters_values
{
    typedef TChar char_type;
    const TChar *prefix;
    const TChar *delimiter;
    const TChar *postfix;
};

// Defines the delimiter values for a specific container and character type
template<typename T, typename TChar>
struct delimiters
{
    static const delimiters_values<TChar> values; 
};

// Default delimiters
template<typename T> struct delimiters<T, char> { static const delimiters_values<char> values; };
template<typename T> const delimiters_values<char> delimiters<T, char>::values = { "{ ", ", ", " }" };
template<typename T> struct delimiters<T, wchar_t> { static const delimiters_values<wchar_t> values; };
template<typename T> const delimiters_values<wchar_t> delimiters<T, wchar_t>::values = { L"{ ", L", ", L" }" };

// Delimiters for set
template<typename T, typename TTraits, typename TAllocator> struct delimiters<std::set<T, TTraits, TAllocator>, char> { static const delimiters_values<char> values; };
template<typename T, typename TTraits, typename TAllocator> const delimiters_values<char> delimiters<std::set<T, TTraits, TAllocator>, char>::values = { "[ ", ", ", " ]" };
template<typename T, typename TTraits, typename TAllocator> struct delimiters<std::set<T, TTraits, TAllocator>, wchar_t> { static const delimiters_values<wchar_t> values; };
template<typename T, typename TTraits, typename TAllocator> const delimiters_values<wchar_t> delimiters<std::set<T, TTraits, TAllocator>, wchar_t>::values = { L"[ ", L", ", L" ]" };

// Delimiters for pair
template<typename T1, typename T2> struct delimiters<std::pair<T1, T2>, char> { static const delimiters_values<char> values; };
template<typename T1, typename T2> const delimiters_values<char> delimiters<std::pair<T1, T2>, char>::values = { "(", ", ", ")" };
template<typename T1, typename T2> struct delimiters<std::pair<T1, T2>, wchar_t> { static const delimiters_values<wchar_t> values; };
template<typename T1, typename T2> const delimiters_values<wchar_t> delimiters<std::pair<T1, T2>, wchar_t>::values = { L"(", L", ", L")" };

// Functor to print containers. You can use this directly if you want to specificy a non-default delimiters type.
template<typename T, typename TChar = char, typename TCharTraits = std::char_traits<TChar>, typename TDelimiters = delimiters<T, TChar> >
struct print_container_helper
{
    typedef TChar char_type;
    typedef TDelimiters delimiters_type;
    typedef std::basic_ostream<TChar, TCharTraits>& ostream_type;

    print_container_helper(const T &container)
        : _container(&container)
    {
    }

    void operator()(ostream_type &stream) const
    {
        if( delimiters_type::values.prefix != NULL )
            stream << delimiters_type::values.prefix;
        std::copy(_container->begin(), _container->end(), pretty_ostream_iterator<typename T::value_type, TChar, TCharTraits>(stream, delimiters_type::values.delimiter));
        if( delimiters_type::values.postfix != NULL )
            stream << delimiters_type::values.postfix;
    }
private:
    const T *_container;
};

// Prints a print_container_helper to the specified stream.
template<typename T, typename TChar, typename TCharTraits, typename TDelimiters>
std::basic_ostream<TChar, TCharTraits>& operator<<(std::basic_ostream<TChar, TCharTraits> &stream, const print_container_helper<T, TChar, TDelimiters> &helper)
{
    helper(stream);
    return stream;
}

// Prints a container to the stream using default delimiters
template<typename T, typename TChar, typename TCharTraits>
typename std::enable_if<is_container<T>::value, std::basic_ostream<TChar, TCharTraits>&>::type
    operator<<(std::basic_ostream<TChar, TCharTraits> &stream, const T &container)
{
    stream << print_container_helper<T, TChar, TCharTraits>(container);
    return stream;
}

// Prints a pair to the stream using delimiters from delimiters<std::pair<T1, T2>>.
template<typename T1, typename T2, typename TChar, typename TCharTraits>
std::basic_ostream<TChar, TCharTraits>& operator<<(std::basic_ostream<TChar, TCharTraits> &stream, const std::pair<T1, T2> &value)
{
    if( delimiters<std::pair<T1, T2>, TChar>::values.prefix != NULL )
        stream << delimiters<std::pair<T1, T2>, TChar>::values.prefix;

    stream << value.first;

    if( delimiters<std::pair<T1, T2>, TChar>::values.delimiter != NULL )
        stream << delimiters<std::pair<T1, T2>, TChar>::values.delimiter;

    stream << value.second;

    if( delimiters<std::pair<T1, T2>, TChar>::values.postfix != NULL )
        stream << delimiters<std::pair<T1, T2>, TChar>::values.postfix;
    return stream;    
}

// Used by the sample below to generate some values
struct fibonacci
{
    fibonacci() : f1(0), f2(1) { }
    int operator()()
    {
        int r = f1 + f2;
        f1 = f2;
        f2 = r;
        return f1;
    }
private:
    int f1;
    int f2;
};

int main()
{
    std::vector<int> v;
    std::generate_n(std::back_inserter(v), 10, fibonacci());

    std::cout << v << std::endl;

    // Example of using pretty_ostream_iterator directly
    std::generate_n(pretty_ostream_iterator<int>(std::cout, ";"), 20, fibonacci());
    std::cout << std::endl;
} 
```

与 Marcelo 的版本一样，它使用 is_container 类型特征，该特征必须专门用于要支持的所有容器。可以使用 trait 来检查`value_type`, `const_iterator`, `begin()`/ `end()`，但我不确定我是否建议这样做，因为它可能匹配符合这些条件但实际上不是容器的东西，比如`std::basic_string`. 也像 Marcelo 的版本一样，它使用可以专门指定要使用的分隔符的模板。

主要区别在于我围绕 a 构建了我的版本`pretty_ostream_iterator`，它的工作方式类似于，`std::ostream_iterator`但不会在最后一项之后打印分隔符。格式化容器是由 完成的`print_container_helper`，它可以直接用于打印没有 is_container 特征的容器，或者指定不同的分隔符类型。

我还定义了 is_container 和分隔符，因此它适用于具有非标准谓词或分配器的容器，以及 char 和 wchar_t。operator<< 函数本身也被定义为与 char 和 wchar_t 流一起使用。

最后，我使用`std::enable_if`了 ，它作为 C++0x 的一部分提供，适用于 Visual C++ 2010 和 g++ 4.3（需要 -std=c++0x 标志）及更高版本。这样就没有对 Boost 的依赖。

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2013-12-10T23:25:09.360

在 C++11 中，您现在可以使用基于[范围的 for 循环](http://en.cppreference.com/w/cpp/language/range-for)：

```
for (auto const& c : path)
    std::cout << c << ' '; 
```

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2019-03-20T22:12:05.037

[您可以使用{fmt} 库](https://github.com/fmtlib/fmt)打印容器以及范围和元组。例如：

```
#include <vector>
#include <fmt/ranges.h>

int main() {
  auto v = std::vector<int>{1, 2, 3};
  fmt::print("{}", v);
} 
```

印刷

```
[1, 2, 3] 
```

到`stdout`（[上帝螺栓](https://godbolt.org/z/xEdz15)）。

我不建议`operator<<`对标准容器进行重载，因为它可能会导致 ODR 违规。

**免责声明**：我是 {fmt} 的作者。

* * *

## 回答 #6

> 赞同：50
> 
> 时间：2014-04-30T20:46:28.030

我认为最好的方法是`operator<<`通过将此函数添加到程序中来重载：

```
#include <vector>
using std::vector;
#include <iostream>
using std::ostream;

template<typename T>
ostream& operator<< (ostream& out, const vector<T>& v) {
    out << "{";
    size_t last = v.size() - 1;
    for(size_t i = 0; i < v.size(); ++i) {
        out << v[i];
        if (i != last) 
            out << ", ";
    }
    out << "}";
    return out;
} 
```

然后您可以`<<`在任何可能的向量上使用运算符，假设它的元素也已`ostream& operator<<`定义：

```
vector<string>  s = {"first", "second", "third"};
vector<bool>    b = {true, false, true, false, false};
vector<int>     i = {1, 2, 3, 4};
cout << s << endl;
cout << b << endl;
cout << i << endl; 
```

输出：

```
{first, second, third}
{1, 0, 1, 0, 0}
{1, 2, 3, 4} 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2014-10-14T14:48:38.330

**`for_each`+ lambda 表达式**怎么样：

```
#include <vector>
#include <algorithm>
// ...
std::vector<char> vec;
// ...
std::for_each(
              vec.cbegin(),
              vec.cend(),
              [] (const char c) {std::cout << c << " ";} 
              );
// ... 
```

当然，基于**范围的 for**是这个具体任务的最优雅的解决方案，但这个解决方案也提供了许多其他可能性。

**解释**

该`for_each`算法采用**输入范围**和**可调用对象**，在范围的每个元素上调用此对象。输入**范围**由两个**迭代器**定义。可**调用对象**可以是函数、函数指针、重载类的对象，`() operator`或者在本例中**是 lambda 表达式**。此表达式的参数与 vector 中元素的类型相匹配。

这种实现的美妙之处在于您从 lambda 表达式中获得的强大功能——您可以将这种方法用于更多的事情，而不仅仅是打印向量。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2011-01-31T12:12:18.133

这已经被编辑了几次，我们决定调用包装一个集合的主类`RangePrinter`。

一旦您编写了一次性`operator<<`重载，这应该会自动适用于任何集合，除了您需要一个特殊的地图来打印该对，并且可能希望在那里自定义分隔符。

您还可以在项目上使用特殊的“打印”函数，而不是直接输出它，有点像 STL 算法允许您传入自定义谓词。你会以`map`这种方式使用它，为`std::pair`.

您的“默认”打印机只会将其输出到流中。

好的，让我们使用自定义打印机。我会将我的外部类更改为`RangePrinter`. 所以我们有 2 个迭代器和一些分隔符，但没有自定义如何打印实际项目。

```
struct DefaultPrinter
{
   template< typename T >
   std::ostream & operator()( std::ostream& os, const T& t ) const
   {
     return os << t;
   }

   // overload for std::pair
   template< typename K, typename V >
   std::ostream & operator()( std::ostream & os, std::pair<K,V> const& p)
   {
      return os << p.first << '=' << p.second;
   }
};

// some prototypes
template< typename FwdIter, typename Printer > class RangePrinter;

template< typename FwdIter, typename Printer > 
  std::ostream & operator<<( std::ostream &, 
        RangePrinter<FwdIter, Printer> const& );

template< typename FwdIter, typename Printer=DefaultPrinter >
class RangePrinter
{
    FwdIter begin;
    FwdIter end;
    std::string delim;
    std::string open;
    std::string close;
    Printer printer;

    friend std::ostream& operator<< <>( std::ostream&, 
         RangePrinter<FwdIter,Printer> const& );

public:
    RangePrinter( FwdIter b, FwdIter e, Printer p,
         std::string const& d, std::string const & o, std::string const& c )
      : begin( b ), end( e ), printer( p ), open( o ), close( c )
    {
    } 

     // with no "printer" variable
    RangePrinter( FwdIter b, FwdIter e,
         std::string const& d, std::string const & o, std::string const& c )
      : begin( b ), end( e ), open( o ), close( c )
    {
    } 

};

template<typename FwdIter, typename Printer>
std::ostream& operator<<( std::ostream& os, 
          RangePrinter<FwdIter, Printer> const& range )
{
    const Printer & printer = range.printer;

    os << range.open;
    FwdIter begin = range.begin, end = range.end;

    // print the first item
    if (begin == end) 
    { 
      return os << range.close; 
    }

    printer( os, *begin );

    // print the rest with delim as a prefix
    for( ++begin; begin != end; ++begin )
    {
       os << range.delim;
       printer( os, *begin );
    }
    return os << range.close;
} 
```

现在默认情况下，只要键和值类型都是可打印的，并且您可以放入自己的特殊项目打印机（与任何其他类型一样），或者如果您不想要，则默认情况下它适用于地图“=”作为分隔符。

我现在将自由功能移动到最后：

一个自由函数（迭代器版本）看起来像这样，你甚至可以有默认值：

```
template<typename Collection>
RangePrinter<typename Collection::const_iterator> rangePrinter
    ( const Collection& coll, const char * delim=",", 
       const char * open="[", const char * close="]")
{
   return RangePrinter< typename Collection::const_iterator >
     ( coll.begin(), coll.end(), delim, open, close );
} 
```

然后你可以将它`std::set`用于

```
 std::cout << outputFormatter( mySet ); 
```

您还可以编写带有自定义打印机和带有两个迭代器的自由功能版本。在任何情况下，它们都会为您解析模板参数，并且您将能够将它们作为临时对象传递。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2011-01-31T11:51:51.110

这是一个工作库，作为一个完整的工作程序呈现，我刚刚一起破解：

```
#include <set>
#include <vector>
#include <iostream>

#include <boost/utility/enable_if.hpp>

// Default delimiters
template <class C> struct Delims { static const char *delim[3]; };
template <class C> const char *Delims<C>::delim[3]={"[", ", ", "]"};
// Special delimiters for sets.                                                                                                             
template <typename T> struct Delims< std::set<T> > { static const char *delim[3]; };
template <typename T> const char *Delims< std::set<T> >::delim[3]={"{", ", ", "}"};

template <class C> struct IsContainer { enum { value = false }; };
template <typename T> struct IsContainer< std::vector<T> > { enum { value = true }; };
template <typename T> struct IsContainer< std::set<T>    > { enum { value = true }; };

template <class C>
typename boost::enable_if<IsContainer<C>, std::ostream&>::type
operator<<(std::ostream & o, const C & x)
{
  o << Delims<C>::delim[0];
  for (typename C::const_iterator i = x.begin(); i != x.end(); ++i)
    {
      if (i != x.begin()) o << Delims<C>::delim[1];
      o << *i;
    }
  o << Delims<C>::delim[2];
  return o;
}

template <typename T> struct IsChar { enum { value = false }; };
template <> struct IsChar<char> { enum { value = true }; };

template <typename T, int N>
typename boost::disable_if<IsChar<T>, std::ostream&>::type
operator<<(std::ostream & o, const T (&x)[N])
{
  o << "[";
  for (int i = 0; i != N; ++i)
    {
      if (i) o << ",";
      o << x[i];
    }
  o << "]";
  return o;
}

int main()
{
  std::vector<int> i;
  i.push_back(23);
  i.push_back(34);

  std::set<std::string> j;
  j.insert("hello");
  j.insert("world");

  double k[] = { 1.1, 2.2, M_PI, -1.0/123.0 };

  std::cout << i << "\n" << j << "\n" << k << "\n";
} 
```

它目前仅适用于`vector`and `set`，但可以通过扩展`IsContainer`专业化使其适用于大多数容器。我没有过多考虑这段代码是否是最小的，但我无法立即想到我可以删除的任何多余的东西。

**编辑：**只是为了好玩，我包含了一个处理数组的版本。我不得不排除 char 数组以避免进一步的歧义；它可能仍然会遇到麻烦`wchar_t[]`。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2015-09-27T13:09:14.967

*该代码现在多次被证明很方便，我觉得进行定制的费用很低，因为使用率很低。因此，我决定在**MIT**许可下发布它，并提供一个 GitHub 存储库，可以在其中下载标头和一个小示例文件。*

## [http://djmuw.github.io/prettycc](http://djmuw.github.io/prettycc/)

# 0\. 前言和措辞

就这个答案而言， **“装饰”**是一组前缀字符串、分隔符字符串和后缀字符串。前缀字符串插入到流之前，后缀字符串插入到容器的值之后（请参阅 2\. 目标容器）。分隔符字符串插入到相应容器的值之间。

*注意：实际上，这个答案并没有解决 100% 的问题，因为装饰不是严格编译的时间常数，因为需要运行时检查来检查自定义装饰是否已应用于当前流。* 不过，我认为它有一些不错的功能。

*注意2：可能有一些小错误，因为它还没有经过很好的测试。*

# 1\. 总体思路/用法

### 使用所需的零附加代码

保持简单

```
#include <vector>
#include "pretty.h"

int main()
{
  std::cout << std::vector<int>{1,2,3,4,5}; // prints 1, 2, 3, 4, 5
  return 0;
} 
```

### 轻松定制...

...关于特定的流对象

```
#include <vector>
#include "pretty.h"

int main()
{
  // set decoration for std::vector<int> for cout object
  std::cout << pretty::decoration<std::vector<int>>("(", ",", ")");
  std::cout << std::vector<int>{1,2,3,4,5}; // prints (1,2,3,4,5)
  return 0;
} 
```

或关于所有流：

```
#include <vector>
#include "pretty.h"

// set decoration for std::vector<int> for all ostream objects
PRETTY_DEFAULT_DECORATION(std::vector<int>, "{", ", ", "}")

int main()
{
  std::cout << std::vector<int>{1,2,3,4,5}; // prints {1, 2, 3, 4, 5}
  std::cout << pretty::decoration<std::vector<int>>("(", ",", ")");
  std::cout << std::vector<int>{1,2,3,4,5}; // prints (1,2,3,4,5)
  return 0;
} 
```

### 粗略的描述

*   代码包含一个类模板，为任何类型提供默认装饰
*   它可以专门用于更改（a）某些类型的默认装饰，它是
*   `ios_base`使用`xalloc`/提供的私有存储，`pword`以保存指向`pretty::decor`特定流上特定类型的对象的指针。

如果没有`pretty::decor<T>`明确设置此流的对象，`pretty::defaulted<T, charT, chartraitT>::decoration()`则调用以获取给定类型的默认装饰。该类`pretty::defaulted`将专门用于自定义默认装饰。

# 2.目标对象/容器

此代码`obj`的*“漂亮装饰”*的目标对象是具有以下任一属性的对象

*   重载`std::begin`和`std::end`定义（包括 C 样式数组），
*   拥有`begin(obj)`并`end(obj)`通过 ADL 获得，
*   是类型`std::tuple`
*   或类型`std::pair`。

该代码包含一个用于识别具有范围特征 ( `begin`/ `end`) 的类的特征。（不过，没有检查是否`begin(obj) == end(obj)`是一个有效的表达式。）

该代码`operator<<`在全局命名空间中提供了 s，这些名称仅适用于没有更专业版本的`operator<<`可用的类。因此，例如，`std::string`尽管有一个有效的`begin`/`end`对，但在此代码中不使用运算符打印。

# 3.利用和定制

`tuple`可以为每种类型（不同的 s 除外）和流（不是流类型！）单独施加装饰。（即a`std::vector<int>`可以对不同的流对象有不同的装饰。）

## A) 默认装饰

默认前缀是`""`(nothing) 和默认后缀一样，而默认分隔符是`", "`(comma+space)。

## `pretty::defaulted`B）通过专门化类模板自定义类型的默认装饰

有`struct defaulted`一个静态成员函数，`decoration()`返回一个`decor`包含给定类型的默认值的对象。

### 使用数组的示例：

自定义默认数组打印：

```
namespace pretty
{
  template<class T, std::size_t N>
  struct defaulted<T[N]>
  {
    static decor<T[N]> decoration()
    {
      return{ { "(" }, { ":" }, { ")" } };
    }
  };
} 
```

打印一个数组：

```
float e[5] = { 3.4f, 4.3f, 5.2f, 1.1f, 22.2f };
std::cout << e << '\n'; // prints (3.4:4.3:5.2:1.1:22.2) 
```

### 将`PRETTY_DEFAULT_DECORATION(TYPE, PREFIX, DELIM, POSTFIX, ...)`宏用于`char`流

宏扩展为

```
namespace pretty { 
  template< __VA_ARGS__ >
  struct defaulted< TYPE > {
    static decor< TYPE > decoration() {
      return { PREFIX, DELIM, POSTFIX };
    } 
  }; 
} 
```

使上述部分专业化重写为

```
PRETTY_DEFAULT_DECORATION(T[N], "", ";", "", class T, std::size_t N) 
```

或插入一个完整的专业，如

```
PRETTY_DEFAULT_DECORATION(std::vector<int>, "(", ", ", ")") 
```

流的另一个宏`wchar_t`包括：`PRETTY_DEFAULT_WDECORATION`.

## C) 对溪流进行装饰

该函数`pretty::decoration`用于对某个流进行装饰。有重载采用 - 一个字符串参数作为分隔符（采用默认类的前缀和后缀） - 或三个字符串参数组装完整的装饰

### 给定类型和流的完整装饰

```
float e[3] = { 3.4f, 4.3f, 5.2f };
std::stringstream u;
// add { ; } decoration to u
u << pretty::decoration<float[3]>("{", "; ", "}");

// use { ; } decoration
u << e << '\n'; // prints {3.4; 4.3; 5.2}

// uses decoration returned by defaulted<float[3]>::decoration()
std::cout << e; // prints 3.4, 4.3, 5.2 
```

### 为给定流自定义分隔符

```
PRETTY_DEFAULT_DECORATION(float[3], "{{{", ",", "}}}")

std::stringstream v;
v << e; // prints {{{3.4,4.3,5.2}}}

v << pretty::decoration<float[3]>(":");
v << e; // prints {{{3.4:4.3:5.2}}}

v << pretty::decoration<float[3]>("((", "=", "))");
v << e; // prints ((3.4=4.3=5.2)) 
```

# 4.特殊处理`std::tuple`

这段代码没有允许对每种可能的元组类型进行专门化，而是将任何可用于`std::tuple<void*>`所有类型的修饰应用到`std::tuple<...>`s。

# 5.从流中删除自定义装饰

要返回给定类型的默认装饰，请使用`pretty::clear`流上的函数模板`s`。

```
s << pretty::clear<std::vector<int>>(); 
```

# 5\. 进一步的例子

使用换行符打印“类似矩阵”

```
std::vector<std::vector<int>> m{ {1,2,3}, {4,5,6}, {7,8,9} };
std::cout << pretty::decoration<std::vector<std::vector<int>>>("\n");
std::cout << m; 
```

印刷

```
1, 2, 3
4, 5, 6
7, 8, 9 
```

## 在[ideone/KKUebZ上查看](http://ideone.com/KKUebZ)

# 6\. 代码

```
#ifndef pretty_print_0x57547_sa4884X_0_1_h_guard_
#define pretty_print_0x57547_sa4884X_0_1_h_guard_

#include <string>
#include <iostream>
#include <type_traits>
#include <iterator>
#include <utility>

#define PRETTY_DEFAULT_DECORATION(TYPE, PREFIX, DELIM, POSTFIX, ...) \
    namespace pretty { template< __VA_ARGS__ >\
    struct defaulted< TYPE > {\
    static decor< TYPE > decoration(){\
      return { PREFIX, DELIM, POSTFIX };\
    } /*decoration*/ }; /*defaulted*/} /*pretty*/

#define PRETTY_DEFAULT_WDECORATION(TYPE, PREFIX, DELIM, POSTFIX, ...) \
    namespace pretty { template< __VA_ARGS__ >\
    struct defaulted< TYPE, wchar_t, std::char_traits<wchar_t> > {\
    static decor< TYPE, wchar_t, std::char_traits<wchar_t> > decoration(){\
      return { PREFIX, DELIM, POSTFIX };\
    } /*decoration*/ }; /*defaulted*/} /*pretty*/

namespace pretty
{

  namespace detail
  {
    // drag in begin and end overloads
    using std::begin;
    using std::end;
    // helper template
    template <int I> using _ol = std::integral_constant<int, I>*;
    // SFINAE check whether T is a range with begin/end
    template<class T>
    class is_range
    {
      // helper function declarations using expression sfinae
      template <class U, _ol<0> = nullptr>
      static std::false_type b(...);
      template <class U, _ol<1> = nullptr>
      static auto b(U &v) -> decltype(begin(v), std::true_type());
      template <class U, _ol<0> = nullptr>
      static std::false_type e(...);
      template <class U, _ol<1> = nullptr>
      static auto e(U &v) -> decltype(end(v), std::true_type());
      // return types
      using b_return = decltype(b<T>(std::declval<T&>()));
      using e_return = decltype(e<T>(std::declval<T&>()));
    public:
      static const bool value = b_return::value && e_return::value;
    };
  }

  // holder class for data
  template<class T, class CharT = char, class TraitT = std::char_traits<CharT>>
  struct decor
  {
    static const int xindex;
    std::basic_string<CharT, TraitT> prefix, delimiter, postfix;
    decor(std::basic_string<CharT, TraitT> const & pre = "",
      std::basic_string<CharT, TraitT> const & delim = "",
      std::basic_string<CharT, TraitT> const & post = "")
      : prefix(pre), delimiter(delim), postfix(post) {}
  };

  template<class T, class charT, class traits>
  int const decor<T, charT, traits>::xindex = std::ios_base::xalloc();

  namespace detail
  {

    template<class T, class CharT, class TraitT>
    void manage_decor(std::ios_base::event evt, std::ios_base &s, int const idx)
    {
      using deco_type = decor<T, CharT, TraitT>;
      if (evt == std::ios_base::erase_event)
      { // erase deco
        void const * const p = s.pword(idx);
        if (p)
        {
          delete static_cast<deco_type const * const>(p);
          s.pword(idx) = nullptr;
        }
      }
      else if (evt == std::ios_base::copyfmt_event)
      { // copy deco
        void const * const p = s.pword(idx);
        if (p)
        {
          auto np = new deco_type{ *static_cast<deco_type const * const>(p) };
          s.pword(idx) = static_cast<void*>(np);
        }
      }
    }

    template<class T> struct clearer {};

    template<class T, class CharT, class TraitT>
    std::basic_ostream<CharT, TraitT>& operator<< (
      std::basic_ostream<CharT, TraitT> &s, clearer<T> const &)
    {
      using deco_type = decor<T, CharT, TraitT>;
      void const * const p = s.pword(deco_type::xindex);
      if (p)
      { // delete if set
        delete static_cast<deco_type const *>(p);
        s.pword(deco_type::xindex) = nullptr;
      }
      return s;
    }

    template <class CharT> 
    struct default_data { static const CharT * decor[3]; };
    template <> 
    const char * default_data<char>::decor[3] = { "", ", ", "" };
    template <> 
    const wchar_t * default_data<wchar_t>::decor[3] = { L"", L", ", L"" };

  }

  // Clear decoration for T
  template<class T>
  detail::clearer<T> clear() { return{}; }
  template<class T, class CharT, class TraitT>
  void clear(std::basic_ostream<CharT, TraitT> &s) { s << detail::clearer<T>{}; }

  // impose decoration on ostream
  template<class T, class CharT, class TraitT>
  std::basic_ostream<CharT, TraitT>& operator<<(
    std::basic_ostream<CharT, TraitT> &s, decor<T, CharT, TraitT> && h)
  {
    using deco_type = decor<T, CharT, TraitT>;
    void const * const p = s.pword(deco_type::xindex);
    // delete if already set
    if (p) delete static_cast<deco_type const *>(p);
    s.pword(deco_type::xindex) = static_cast<void *>(new deco_type{ std::move(h) });
    // check whether we alread have a callback registered
    if (s.iword(deco_type::xindex) == 0)
    { // if this is not the case register callback and set iword
      s.register_callback(detail::manage_decor<T, CharT, TraitT>, deco_type::xindex);
      s.iword(deco_type::xindex) = 1;
    }
    return s;
  }

  template<class T, class CharT = char, class TraitT = std::char_traits<CharT>>
  struct defaulted
  {
    static inline decor<T, CharT, TraitT> decoration()
    {
      return{ detail::default_data<CharT>::decor[0],
        detail::default_data<CharT>::decor[1],
        detail::default_data<CharT>::decor[2] };
    }
  };

  template<class T, class CharT = char, class TraitT = std::char_traits<CharT>>
  decor<T, CharT, TraitT> decoration(
    std::basic_string<CharT, TraitT> const & prefix,
    std::basic_string<CharT, TraitT> const & delimiter,
    std::basic_string<CharT, TraitT> const & postfix)
  {
    return{ prefix, delimiter, postfix };
  }

  template<class T, class CharT = char,
  class TraitT = std::char_traits < CharT >>
    decor<T, CharT, TraitT> decoration(
      std::basic_string<CharT, TraitT> const & delimiter)
  {
    using str_type = std::basic_string<CharT, TraitT>;
    return{ defaulted<T, CharT, TraitT>::decoration().prefix,
      delimiter, defaulted<T, CharT, TraitT>::decoration().postfix };
  }

  template<class T, class CharT = char,
  class TraitT = std::char_traits < CharT >>
    decor<T, CharT, TraitT> decoration(CharT const * const prefix,
      CharT const * const delimiter, CharT const * const postfix)
  {
    using str_type = std::basic_string<CharT, TraitT>;
    return{ str_type{ prefix }, str_type{ delimiter }, str_type{ postfix } };
  }

  template<class T, class CharT = char,
  class TraitT = std::char_traits < CharT >>
    decor<T, CharT, TraitT> decoration(CharT const * const delimiter)
  {
    using str_type = std::basic_string<CharT, TraitT>;
    return{ defaulted<T, CharT, TraitT>::decoration().prefix,
      str_type{ delimiter }, defaulted<T, CharT, TraitT>::decoration().postfix };
  }

  template<typename T, std::size_t N, std::size_t L>
  struct tuple
  {
    template<class CharT, class TraitT>
    static void print(std::basic_ostream<CharT, TraitT>& s, T const & value,
      std::basic_string<CharT, TraitT> const &delimiter)
    {
      s << std::get<N>(value) << delimiter;
      tuple<T, N + 1, L>::print(s, value, delimiter);
    }
  };

  template<typename T, std::size_t N>
  struct tuple<T, N, N>
  {
    template<class CharT, class TraitT>
    static void print(std::basic_ostream<CharT, TraitT>& s, T const & value,
      std::basic_string<CharT, TraitT> const &) {
      s << std::get<N>(value);
    }
  };

}

template<class CharT, class TraitT>
std::basic_ostream<CharT, TraitT> & operator<< (
  std::basic_ostream<CharT, TraitT> &s, std::tuple<> const & v)
{
  using deco_type = pretty::decor<std::tuple<void*>, CharT, TraitT>;
  using defaulted_type = pretty::defaulted<std::tuple<void*>, CharT, TraitT>;
  void const * const p = s.pword(deco_type::xindex);
  auto const d = static_cast<deco_type const * const>(p);
  s << (d ? d->prefix : defaulted_type::decoration().prefix);
  s << (d ? d->postfix : defaulted_type::decoration().postfix);
  return s;
}

template<class CharT, class TraitT, class ... T>
std::basic_ostream<CharT, TraitT> & operator<< (
  std::basic_ostream<CharT, TraitT> &s, std::tuple<T...> const & v)
{
  using deco_type = pretty::decor<std::tuple<void*>, CharT, TraitT>;
  using defaulted_type = pretty::defaulted<std::tuple<void*>, CharT, TraitT>;
  using pretty_tuple = pretty::tuple<std::tuple<T...>, 0U, sizeof...(T)-1U>;
  void const * const p = s.pword(deco_type::xindex);
  auto const d = static_cast<deco_type const * const>(p);
  s << (d ? d->prefix : defaulted_type::decoration().prefix);
  pretty_tuple::print(s, v, d ? d->delimiter : 
    defaulted_type::decoration().delimiter);
  s << (d ? d->postfix : defaulted_type::decoration().postfix);
  return s;
}

template<class T, class U, class CharT, class TraitT>
std::basic_ostream<CharT, TraitT> & operator<< (
  std::basic_ostream<CharT, TraitT> &s, std::pair<T, U> const & v)
{
  using deco_type = pretty::decor<std::pair<T, U>, CharT, TraitT>;
  using defaulted_type = pretty::defaulted<std::pair<T, U>, CharT, TraitT>;
  void const * const p = s.pword(deco_type::xindex);
  auto const d = static_cast<deco_type const * const>(p);
  s << (d ? d->prefix : defaulted_type::decoration().prefix);
  s << v.first;
  s << (d ? d->delimiter : defaulted_type::decoration().delimiter);
  s << v.second;
  s << (d ? d->postfix : defaulted_type::decoration().postfix);
  return s;
}

template<class T, class CharT = char,
class TraitT = std::char_traits < CharT >>
  typename std::enable_if < pretty::detail::is_range<T>::value,
  std::basic_ostream < CharT, TraitT >> ::type & operator<< (
    std::basic_ostream<CharT, TraitT> &s, T const & v)
{
  bool first(true);
  using deco_type = pretty::decor<T, CharT, TraitT>;
  using default_type = pretty::defaulted<T, CharT, TraitT>;
  void const * const p = s.pword(deco_type::xindex);
  auto d = static_cast<pretty::decor<T, CharT, TraitT> const * const>(p);
  s << (d ? d->prefix : default_type::decoration().prefix);
  for (auto const & e : v)
  { // v is range thus range based for works
    if (!first) s << (d ? d->delimiter : default_type::decoration().delimiter);
    s << e;
    first = false;
  }
  s << (d ? d->postfix : default_type::decoration().postfix);
  return s;
}

#endif // pretty_print_0x57547_sa4884X_0_1_h_guard_ 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2015-04-07T15:28:44.550

只需将容器复制到控制台即可。

```
std::vector<int> v{1,2,3,4};
std::copy(v.begin(),v.end(),std::ostream_iterator<int>(std::cout, " " )); 
```

应该输出：

```
1 2 3 4 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2012-05-25T07:19:07.283

问题可能出在上一个循环中：

```
(x = 17; isalpha(firstsquare); x++) 
```

此循环将根本不运行（如果`firstsquare`是非字母）或将永远运行（如果它是字母）。原因是它`firstsquare`不会随着`x`增加而改变。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-07-30T13:34:54.510

### 使用`std::copy`但没有额外的尾随分隔符

使用[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)（最初在[@JoshuaKravtiz answer](https://stackoverflow.com/a/11335634/4573247)中使用）但不包括最后一个元素之后的附加尾随分隔符的替代/修改方法：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

template <typename T>
void print_contents(const std::vector<T>& v, const char * const separator = " ")
{
    if(!v.empty())
    {
        std::copy(v.begin(),
                  --v.end(),
                  std::ostream_iterator<T>(std::cout, separator));
        std::cout << v.back() << "\n";
    }
}

// example usage
int main() {
    std::vector<int> v{1, 2, 3, 4};
    print_contents(v);      // '1 2 3 4'
    print_contents(v, ":"); // '1:2:3:4'
    v = {};
    print_contents(v);      // ... no std::cout
    v = {1};
    print_contents(v);      // '1'
    return 0;
} 
```

* * *

应用于自定义 POD 类型容器的示例用法：

```
// includes and 'print_contents(...)' as above ...

class Foo
{
    int i;
    friend std::ostream& operator<<(std::ostream& out, const Foo& obj);
public:
    Foo(const int i) : i(i) {}
};

std::ostream& operator<<(std::ostream& out, const Foo& obj)
{
    return out << "foo_" << obj.i; 
}

int main() {
    std::vector<Foo> v{1, 2, 3, 4};
    print_contents(v);      // 'foo_1 foo_2 foo_3 foo_4'
    print_contents(v, ":"); // 'foo_1:foo_2:foo_3:foo_4'
    v = {};
    print_contents(v);      // ... no std::cout
    v = {1};
    print_contents(v);      // 'foo_1'
    return 0;
} 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2015-03-12T04:00:26.017

在 C++11 中，基于范围的 for 循环可能是一个很好的解决方案：

```
vector<char> items = {'a','b','c'};
for (char n : items)
    cout << n << ' '; 
```

输出：

```
a b c 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2016-08-12T00:14:57.300

重载运算符<<：

```
template<typename OutStream, typename T>
OutStream& operator<< (OutStream& out, const vector<T>& v)
{
    for (auto const& tmp : v)
        out << tmp << " ";
    out << endl;
    return out;
} 
```

用法：

```
vector <int> test {1,2,3};
wcout << test; // or any output stream 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-02-13T17:55:59.273

我将在这里添加另一个答案，因为我想出了与以前的方法不同的方法，那就是使用语言环境方面。

基础知识在[这里](http://www.cantrip.org/locale.html?seenIEPage=1)

基本上你所做的是：

1.  创建一个派生自`std::locale::facet`. 轻微的缺点是你需要一个编译单元来保存它的 id。我们称它为 MyPrettyVectorPrinter。您可能会给它一个更好的名称，并为 pair 和 map 创建名称。
2.  在您的流功能中，您检查`std::has_facet< MyPrettyVectorPrinter >`
3.  如果返回 true，请使用`std::use_facet< MyPrettyVectorPrinter >( os.getloc() )`
4.  您的构面对象将具有分隔符的值，您可以读取它们。如果未找到该构面，则您的打印函数 ( `operator<<`) 将提供默认值。请注意，您可以执行相同的操作来读取矢量。

我喜欢这种方法，因为您可以使用默认打印，同时仍然可以使用自定义覆盖。

缺点是如果在多个项目中使用你的方面需要一个库（所以不能只是标题），而且你需要注意创建新语言环境对象的费用。

我把它写成一个新的解决方案，而不是修改我的另一个，因为我相信这两种方法都是正确的，你可以选择。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2012-05-25T07:32:50.410

我看到两个问题。正如在

```
for (x = 17; isalpha(firstsquare); x++) 
```

要么存在无限循环，要么根本不执行，并且`if (entrance == 'S')`如果入口字符不同于`'S'`然后没有任何东西被推送到路径向量，使其为空，因此在屏幕上不打印任何内容。您可以测试后者检查`path.empty()`或打印`path.size()`。

无论哪种方式，使用字符串而不是向量不是更好吗？您也可以像访问数组一样访问字符串内容、查找字符、提取子字符串并轻松打印字符串（无需循环）。

用字符串来做这一切可能是以一种不那么复杂的方式编写它并且更容易发现问题的方法。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-02-07T16:28:58.653

此答案基于[Zorawar](https://stackoverflow.com/a/10758845)的答案，但我无法在此处发表评论。

您可以使用and来制作`auto`(C++11)/`typedef`版本`const``cbegin``cend`

```
for (auto i = path.cbegin(); i != path.cend(); ++i)
    std::cout << *i << ' '; 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-11-25T03:02:24.893

这里的目标是使用 ADL 来定制我们漂亮的打印方式。

您传入一个格式化程序标签，并覆盖标签命名空间中的 4 个函数（之前、之后、之间和下降）。这会改变格式化程序在迭代容器时打印“装饰”的方式。

`{(a->b),(c->d)}`用于映射、`(a,b,c)`元组、`"hello"`字符串以及其他所有内容的默认格式化程序`[x,y,z]`。

它应该与 3rd 方可迭代类型“正常工作”（并将它们视为“其他一切”）。

如果您想要为您的 3rd 方迭代定制装饰，只需创建您自己的标签。处理地图下降需要一些工作（您需要重载`pretty_print_descend( your_tag`才能返回`pretty_print::decorator::map_magic_tag<your_tag>`）。也许有一种更清洁的方法可以做到这一点，不确定。

一个检测可迭代性和元组的小库：

```
namespace details {
  using std::begin; using std::end;
  template<class T, class=void>
  struct is_iterable_test:std::false_type{};
  template<class T>
  struct is_iterable_test<T,
    decltype((void)(
      (void)(begin(std::declval<T>())==end(std::declval<T>()))
      , ((void)(std::next(begin(std::declval<T>()))))
      , ((void)(*begin(std::declval<T>())))
      , 1
    ))
  >:std::true_type{};
  template<class T>struct is_tupleoid:std::false_type{};
  template<class...Ts>struct is_tupleoid<std::tuple<Ts...>>:std::true_type{};
  template<class...Ts>struct is_tupleoid<std::pair<Ts...>>:std::true_type{};
  // template<class T, size_t N>struct is_tupleoid<std::array<T,N>>:std::true_type{}; // complete, but problematic
}
template<class T>struct is_iterable:details::is_iterable_test<std::decay_t<T>>{};
template<class T, std::size_t N>struct is_iterable<T(&)[N]>:std::true_type{}; // bypass decay
template<class T>struct is_tupleoid:details::is_tupleoid<std::decay_t<T>>{};

template<class T>struct is_visitable:std::integral_constant<bool, is_iterable<T>{}||is_tupleoid<T>{}> {}; 
```

一个允许我们访问可迭代或元组类型对象内容的库：

```
template<class C, class F>
std::enable_if_t<is_iterable<C>{}> visit_first(C&& c, F&& f) {
  using std::begin; using std::end;
  auto&& b = begin(c);
  auto&& e = end(c);
  if (b==e)
      return;
  std::forward<F>(f)(*b);
}
template<class C, class F>
std::enable_if_t<is_iterable<C>{}> visit_all_but_first(C&& c, F&& f) {
  using std::begin; using std::end;
  auto it = begin(c);
  auto&& e = end(c);
  if (it==e)
      return;
  it = std::next(it);
  for( ; it!=e; it = std::next(it) ) {
    f(*it);
  }
}

namespace details {
  template<class Tup, class F>
  void visit_first( std::index_sequence<>, Tup&&, F&& ) {}
  template<size_t... Is, class Tup, class F>
  void visit_first( std::index_sequence<0,Is...>, Tup&& tup, F&& f ) {
    std::forward<F>(f)( std::get<0>( std::forward<Tup>(tup) ) );
  }
  template<class Tup, class F>
  void visit_all_but_first( std::index_sequence<>, Tup&&, F&& ) {}
  template<size_t... Is,class Tup, class F>
  void visit_all_but_first( std::index_sequence<0,Is...>, Tup&& tup, F&& f ) {
    int unused[] = {0,((void)(
      f( std::get<Is>(std::forward<Tup>(tup)) )
    ),0)...};
    (void)(unused);
  }
}
template<class Tup, class F>
std::enable_if_t<is_tupleoid<Tup>{}> visit_first(Tup&& tup, F&& f) {
  details::visit_first( std::make_index_sequence< std::tuple_size<std::decay_t<Tup>>{} >{}, std::forward<Tup>(tup), std::forward<F>(f) );
}
template<class Tup, class F>
std::enable_if_t<is_tupleoid<Tup>{}> visit_all_but_first(Tup&& tup, F&& f) {
  details::visit_all_but_first( std::make_index_sequence< std::tuple_size<std::decay_t<Tup>>{} >{}, std::forward<Tup>(tup), std::forward<F>(f) );
} 
```

一个漂亮的打印库：

```
namespace pretty_print {
  namespace decorator {
    struct default_tag {};
    template<class Old>
    struct map_magic_tag:Old {}; // magic for maps

    // Maps get {}s. Write trait `is_associative` to generalize:
    template<class CharT, class Traits, class...Xs >
    void pretty_print_before( default_tag, std::basic_ostream<CharT, Traits>& s, std::map<Xs...> const& ) {
      s << CharT('{');
    }

    template<class CharT, class Traits, class...Xs >
    void pretty_print_after( default_tag, std::basic_ostream<CharT, Traits>& s, std::map<Xs...> const& ) {
      s << CharT('}');
    }

    // tuples and pairs get ():
    template<class CharT, class Traits, class Tup >
    std::enable_if_t<is_tupleoid<Tup>{}> pretty_print_before( default_tag, std::basic_ostream<CharT, Traits>& s, Tup const& ) {
      s << CharT('(');
    }

    template<class CharT, class Traits, class Tup >
    std::enable_if_t<is_tupleoid<Tup>{}> pretty_print_after( default_tag, std::basic_ostream<CharT, Traits>& s, Tup const& ) {
      s << CharT(')');
    }

    // strings with the same character type get ""s:
    template<class CharT, class Traits, class...Xs >
    void pretty_print_before( default_tag, std::basic_ostream<CharT, Traits>& s, std::basic_string<CharT, Xs...> const& ) {
      s << CharT('"');
    }
    template<class CharT, class Traits, class...Xs >
    void pretty_print_after( default_tag, std::basic_ostream<CharT, Traits>& s, std::basic_string<CharT, Xs...> const& ) {
      s << CharT('"');
    }
    // and pack the characters together:
    template<class CharT, class Traits, class...Xs >
    void pretty_print_between( default_tag, std::basic_ostream<CharT, Traits>&, std::basic_string<CharT, Xs...> const& ) {}

    // map magic. When iterating over the contents of a map, use the map_magic_tag:
    template<class...Xs>
    map_magic_tag<default_tag> pretty_print_descend( default_tag, std::map<Xs...> const& ) {
      return {};
    }
    template<class old_tag, class C>
    old_tag pretty_print_descend( map_magic_tag<old_tag>, C const& ) {
      return {};
    }

    // When printing a pair immediately within a map, use -> as a separator:
    template<class old_tag, class CharT, class Traits, class...Xs >
    void pretty_print_between( map_magic_tag<old_tag>, std::basic_ostream<CharT, Traits>& s, std::pair<Xs...> const& ) {
      s << CharT('-') << CharT('>');
    }
  }

  // default behavior:
  template<class CharT, class Traits, class Tag, class Container >
  void pretty_print_before( Tag const&, std::basic_ostream<CharT, Traits>& s, Container const& ) {
    s << CharT('[');
  }
  template<class CharT, class Traits, class Tag, class Container >
  void pretty_print_after( Tag const&, std::basic_ostream<CharT, Traits>& s, Container const& ) {
    s << CharT(']');
  }
  template<class CharT, class Traits, class Tag, class Container >
  void pretty_print_between( Tag const&, std::basic_ostream<CharT, Traits>& s, Container const& ) {
    s << CharT(',');
  }
  template<class Tag, class Container>
  Tag&& pretty_print_descend( Tag&& tag, Container const& ) {
    return std::forward<Tag>(tag);
  }

  // print things by default by using <<:
  template<class Tag=decorator::default_tag, class Scalar, class CharT, class Traits>
  std::enable_if_t<!is_visitable<Scalar>{}> print( std::basic_ostream<CharT, Traits>& os, Scalar&& scalar, Tag&&=Tag{} ) {
    os << std::forward<Scalar>(scalar);
  }
  // for anything visitable (see above), use the pretty print algorithm:
  template<class Tag=decorator::default_tag, class C, class CharT, class Traits>
  std::enable_if_t<is_visitable<C>{}> print( std::basic_ostream<CharT, Traits>& os, C&& c, Tag&& tag=Tag{} ) {
    pretty_print_before( std::forward<Tag>(tag), os, std::forward<C>(c) );
    visit_first( c, [&](auto&& elem) {
      print( os, std::forward<decltype(elem)>(elem), pretty_print_descend( std::forward<Tag>(tag), std::forward<C>(c) ) );
    });
    visit_all_but_first( c, [&](auto&& elem) {
      pretty_print_between( std::forward<Tag>(tag), os, std::forward<C>(c) );
      print( os, std::forward<decltype(elem)>(elem), pretty_print_descend( std::forward<Tag>(tag), std::forward<C>(c) ) );
    });
    pretty_print_after( std::forward<Tag>(tag), os, std::forward<C>(c) );
  }
} 
```

测试代码：

```
int main() {
  std::vector<int> x = {1,2,3};

  pretty_print::print( std::cout, x );
  std::cout << "\n";

  std::map< std::string, int > m;
  m["hello"] = 3;
  m["world"] = 42;

  pretty_print::print( std::cout, m );
  std::cout << "\n";
} 
```

[活生生的例子](http://coliru.stacked-crooked.com/a/3a906b33cb84ad0b)

这确实使用了 C++14 特性（一些`_t`别名和`auto&&`lambda），但没有一个是必不可少的。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2011-06-19T09:38:44.837

我的解决方案是[simple.h](http://github.com/lvv/scc/blob/master/simple)，它是[scc](http://volnitsky.com/project/scc/)包的一部分。所有标准容器、地图、集合、c 数组都是可打印的。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-11-24T14:38:28.297

在 C++11 中

```
for (auto i = path.begin(); i != path.end(); ++i)
std::cout << *i << ' ';

for(int i=0; i<path.size(); ++i)
std::cout << path[i] << ' '; 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-06-16T22:35:02.743

从第一个 BoostCon（现在称为 CppCon）中走出来，我和另外两个人开发了一个库来做到这一点。主要的症结在于需要扩展`namespace std`。事实证明，对于 boost 库来说，这是不行的。

不幸的是，代码的链接不再有效，但您可能会在讨论中发现一些有趣的花絮（至少那些不讨论如何命名的花絮！）

[http://boost.2283326.n4.nabble.com/explore-Library-Proposal-Container-Streaming-td2619544.html](http://boost.2283326.n4.nabble.com/explore-Library-Proposal-Container-Streaming-td2619544.html)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-05-24T06:06:20.877

这是我在 2016 年完成的实施版本

一切都在一个标题中，因此很容易使用 [https://github.com/skident/eos/blob/master/include/eos/io/print.hpp](https://github.com/skident/eos/blob/master/include/eos/io/print.hpp)

```
/*! \file       print.hpp
 *  \brief      Useful functions for work with STL containers. 
 *          
 *  Now it supports generic print for STL containers like: [elem1, elem2, elem3]
 *  Supported STL conrainers: vector, deque, list, set multiset, unordered_set,
 *  map, multimap, unordered_map, array
 *
 *  \author     Skident
 *  \date       02.09.2016
 *  \copyright  Skident Inc.
 */

#pragma once

// check is the C++11 or greater available (special hack for MSVC)
#if (defined(_MSC_VER) && __cplusplus >= 199711L) || __cplusplus >= 201103L
    #define MODERN_CPP_AVAILABLE 1
#endif

#include <iostream>
#include <sstream>
#include <vector>
#include <deque>
#include <set>
#include <list>
#include <map>
#include <cctype>

#ifdef MODERN_CPP_AVAILABLE
    #include <array>
    #include <unordered_set>
    #include <unordered_map>
    #include <forward_list>
#endif

#define dump(value) std::cout << (#value) << ": " << (value) << std::endl

#define BUILD_CONTENT                                                       \
        std::stringstream ss;                                               \
        for (; it != collection.end(); ++it)                                \
        {                                                                   \
            ss << *it << elem_separator;                                    \
        }                                                                   \

#define BUILD_MAP_CONTENT                                                   \
        std::stringstream ss;                                               \
        for (; it != collection.end(); ++it)                                \
        {                                                                   \
            ss  << it->first                                                \
                << keyval_separator                                         \
                << it->second                                               \
                << elem_separator;                                          \
        }                                                                   \

#define COMPILE_CONTENT                                                     \
        std::string data = ss.str();                                        \
        if (!data.empty() && !elem_separator.empty())                       \
            data = data.substr(0, data.rfind(elem_separator));              \
        std::string result = first_bracket + data + last_bracket;           \
        os << result;                                                       \
        if (needEndl)                                                       \
            os << std::endl;                                                \

////
///
///
/// Template definitions
///
///

//generic template for classes: deque, list, forward_list, vector
#define VECTOR_AND_CO_TEMPLATE                                          \
    template<                                                           \
        template<class T,                                               \
                 class Alloc = std::allocator<T> >                      \
        class Container, class Type, class Alloc>                       \

#define SET_TEMPLATE                                                    \
    template<                                                           \
        template<class T,                                               \
                 class Compare = std::less<T>,                          \
                 class Alloc = std::allocator<T> >                      \
            class Container, class T, class Compare, class Alloc>       \

#define USET_TEMPLATE                                                   \
    template<                                                           \
template < class Key,                                                   \
           class Hash = std::hash<Key>,                                 \
           class Pred = std::equal_to<Key>,                             \
           class Alloc = std::allocator<Key>                            \
           >                                                            \
    class Container, class Key, class Hash, class Pred, class Alloc     \
    >                                                                   \

#define MAP_TEMPLATE                                                    \
    template<                                                           \
        template<class Key,                                             \
                class T,                                                \
                class Compare = std::less<Key>,                         \
                class Alloc = std::allocator<std::pair<const Key,T> >   \
                >                                                       \
        class Container, class Key,                                     \
        class Value/*, class Compare, class Alloc*/>                    \

#define UMAP_TEMPLATE                                                   \
    template<                                                           \
        template<class Key,                                             \
                   class T,                                             \
                   class Hash = std::hash<Key>,                         \
                   class Pred = std::equal_to<Key>,                     \
                   class Alloc = std::allocator<std::pair<const Key,T> >\
                 >                                                      \
        class Container, class Key, class Value,                        \
        class Hash, class Pred, class Alloc                             \
                >                                                       \

#define ARRAY_TEMPLATE                                                  \
    template<                                                           \
        template<class T, std::size_t N>                                \
        class Array, class Type, std::size_t Size>                      \

namespace eos
{
    static const std::string default_elem_separator     = ", ";
    static const std::string default_keyval_separator   = " => ";
    static const std::string default_first_bracket      = "[";
    static const std::string default_last_bracket       = "]";

    //! Prints template Container<T> as in Python
    //! Supported containers: vector, deque, list, set, unordered_set(C++11), forward_list(C++11)
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    template<class Container>
    void print( const Container& collection
              , const std::string& elem_separator   = default_elem_separator
              , const std::string& first_bracket    = default_first_bracket
              , const std::string& last_bracket     = default_last_bracket
              , std::ostream& os = std::cout
              , bool needEndl = true
            )
    {
        typename Container::const_iterator it = collection.begin();
        BUILD_CONTENT
        COMPILE_CONTENT
    }

    //! Prints collections with one template argument and allocator as in Python.
    //! Supported standard collections: vector, deque, list, forward_list
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    VECTOR_AND_CO_TEMPLATE
    void print( const Container<Type>& collection
              , const std::string& elem_separator   = default_elem_separator
              , const std::string& first_bracket    = default_first_bracket
              , const std::string& last_bracket     = default_last_bracket
              , std::ostream& os = std::cout
              , bool needEndl = true
            )
    {
        typename Container<Type>::const_iterator it = collection.begin();
        BUILD_CONTENT
        COMPILE_CONTENT
    }

    //! Prints collections like std:set<T, Compare, Alloc> as in Python
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    SET_TEMPLATE
    void print( const Container<T, Compare, Alloc>& collection
              , const std::string& elem_separator   = default_elem_separator
              , const std::string& first_bracket    = default_first_bracket
              , const std::string& last_bracket     = default_last_bracket
              , std::ostream& os = std::cout
              , bool needEndl = true
            )
    {
        typename Container<T, Compare, Alloc>::const_iterator it = collection.begin();
        BUILD_CONTENT
        COMPILE_CONTENT
    }

    //! Prints collections like std:unordered_set<Key, Hash, Pred, Alloc> as in Python
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    USET_TEMPLATE
    void print( const Container<Key, Hash, Pred, Alloc>& collection
              , const std::string& elem_separator   = default_elem_separator
              , const std::string& first_bracket    = default_first_bracket
              , const std::string& last_bracket     = default_last_bracket
              , std::ostream& os = std::cout
              , bool needEndl = true
            )
    {
        typename Container<Key, Hash, Pred, Alloc>::const_iterator it = collection.begin();
        BUILD_CONTENT
        COMPILE_CONTENT
    }

    //! Prints collections like std:map<T, U> as in Python
    //! supports generic objects of std: map, multimap
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    MAP_TEMPLATE
    void print(   const Container<Key, Value>& collection
                , const std::string& elem_separator   = default_elem_separator
                , const std::string& keyval_separator = default_keyval_separator
                , const std::string& first_bracket    = default_first_bracket
                , const std::string& last_bracket     = default_last_bracket
                , std::ostream& os = std::cout
                , bool needEndl = true
        )
    {
        typename Container<Key, Value>::const_iterator it = collection.begin();
        BUILD_MAP_CONTENT
        COMPILE_CONTENT
    }

    //! Prints classes like std:unordered_map as in Python
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    UMAP_TEMPLATE
    void print(   const Container<Key, Value, Hash, Pred, Alloc>& collection
                , const std::string& elem_separator   = default_elem_separator
                , const std::string& keyval_separator = default_keyval_separator
                , const std::string& first_bracket    = default_first_bracket
                , const std::string& last_bracket     = default_last_bracket
                , std::ostream& os = std::cout
                , bool needEndl = true
        )
    {
        typename Container<Key, Value, Hash, Pred, Alloc>::const_iterator it = collection.begin();
        BUILD_MAP_CONTENT
        COMPILE_CONTENT
    }

    //! Prints collections like std:array<T, Size> as in Python
    //! \param collection which should be printed
    //! \param elem_separator the separator which will be inserted between elements of collection
    //! \param keyval_separator separator between key and value of map. For default it is the '=>'
    //! \param first_bracket data before collection's elements (usual it is the parenthesis, square or curly bracker '(', '[', '{')
    //! \param last_bracket data after collection's elements (usual it is the parenthesis, square or curly bracker ')', ']', '}')
    ARRAY_TEMPLATE
    void print(   const Array<Type, Size>& collection
                , const std::string& elem_separator   = default_elem_separator
                , const std::string& first_bracket    = default_first_bracket
                , const std::string& last_bracket     = default_last_bracket
                , std::ostream& os = std::cout
                , bool needEndl = true
            )
    {
        typename Array<Type, Size>::const_iterator it = collection.begin();
        BUILD_CONTENT
        COMPILE_CONTENT
    }

    //! Removes all whitespaces before data in string.
    //! \param str string with data
    //! \return string without whitespaces in left part
    std::string ltrim(const std::string& str);

    //! Removes all whitespaces after data in string
    //! \param str string with data
    //! \return string without whitespaces in right part
    std::string rtrim(const std::string& str);

    //! Removes all whitespaces before and after data in string
    //! \param str string with data
    //! \return string without whitespaces before and after data in string
    std::string trim(const std::string& str);

    ////////////////////////////////////////////////////////////
    ////////////////////////ostream logic//////////////////////
    /// Should be specified for concrete containers
    /// because of another types can be suitable
    /// for templates, for example templates break
    /// the code like this "cout << string("hello") << endl;"
    ////////////////////////////////////////////////////////////

#define PROCESS_VALUE_COLLECTION(os, collection)                            \
    print(  collection,                                                     \
            default_elem_separator,                                         \
            default_first_bracket,                                          \
            default_last_bracket,                                           \
            os,                                                             \
            false                                                           \
    );                                                                      \

#define PROCESS_KEY_VALUE_COLLECTION(os, collection)                        \
    print(  collection,                                                     \
            default_elem_separator,                                         \
            default_keyval_separator,                                       \
            default_first_bracket,                                          \
            default_last_bracket,                                           \
            os,                                                             \
            false                                                           \
    );                                                                      \

    ///< specialization for vector
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::vector<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for deque
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::deque<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for list
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::list<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for set
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::set<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for multiset
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::multiset<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

#ifdef MODERN_CPP_AVAILABLE
    ///< specialization for unordered_map
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::unordered_set<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for forward_list
    template<class T>
    std::ostream& operator<<(std::ostream& os, const std::forward_list<T>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for array
    template<class T, std::size_t N>
    std::ostream& operator<<(std::ostream& os, const std::array<T, N>& collection)
    {
        PROCESS_VALUE_COLLECTION(os, collection)
        return os;
    }
#endif

    ///< specialization for map, multimap
    MAP_TEMPLATE
    std::ostream& operator<<(std::ostream& os, const Container<Key, Value>& collection)
    {
        PROCESS_KEY_VALUE_COLLECTION(os, collection)
        return os;
    }

    ///< specialization for unordered_map
    UMAP_TEMPLATE
    std::ostream& operator<<(std::ostream& os, const Container<Key, Value, Hash, Pred, Alloc>& collection)
    {
        PROCESS_KEY_VALUE_COLLECTION(os, collection)
        return os;
    }
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-06-19T03:07:56.637

您可以使用[`std::experimental::make_ostream_joiner`](https://en.cppreference.com/w/cpp/experimental/ostream_joiner/make_ostream_joiner)：

```
#include <algorithm>
#include <experimental/iterator>
#include <iostream>
#include <iterator>
#include <numeric>
#include <vector>

int main()
{
    std::vector<int> vi(12);
    std::iota(vi.begin(), vi.end(), -5);
    std::cout << "Int vector:\n";
    std::copy(std::begin(vi),
              std::end(vi),
              std::experimental::make_ostream_joiner(std::cout, ", "));

    std::cout <<"\nString vector:\n[";
    std::vector<std::string> vs { "some", "string", "vector" };
    std::copy(std::begin(vs),
              std::end(vs),
              std::experimental::make_ostream_joiner(std::cout, "] - ["));
    std::cout << "]\n";
} 
```

[在 Godbolt 上演示](https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlJvoCqAZ0wAFAB4gA5AAYppAFZdSrZrVDIApACYAQjt2kR7ZATx1KmWugDCqVgFcAtrWVX0AGTy1MAOWcARpjEINq8AA6oQoTmtHaOLsqR0WZ0Xj7%2BTkEhYUaYJqm0DATMxATxzq6ceQWxxaUE6X6BwcpCJWUVidXtDU2Z2VwAlEaoDsTIHFI6AMzeyI5YANSaMzZswCSECE6r2JoyAIKz84uYK2uY4uHBeE5WJawA9ITBzETEewfH2nO0Cw5lqsbOZ2sRMMxdjN9kcTv8zhcQQQ3h8vrDfqdAedgbRnLctNDvnCAUC1gA3TCmEhow4rI7eAhLJzMbwQIZEgDs%2BiOS15S3a6BAIApVM%2BawZeyWZLwEE42nZM25tL5AqF5hKEGlADogsBWSMpXgte42aQlgBaACsCqVfP5BEFKDGjOBwJW2m0AEl6FLKR8QJpLTZaDptKtbSqHUK0OEAJ4QVUgXWs6Ujb52jMZxMm1OkdOZgvZ663e70NhC5kAa0wAH0ogRwZCawpUN5ggmo06HAQzaHex6hjaiTzI460N3Ea6PYHg8ViN5gL7RQGgyHLfpp4r87zEyLUWtE2CF5KyUIVlz3dohKh7n3L0f1HfQ3vqR7zwARcPb%2B1j1BxjuOsmtCakIaYjgWWadjmoF5uBEGjkKVw3POpaPBWzDVnWYIQk4zatj4xAAdGzr9mGlrvhaKzrqGg5fnBibji6axuqGgafqurFbrCHKfkcUgjKw0iWvIriyPIqDSDYBgGPyYwTNivycPIBDSHIg6kJWoQABxapwlp6TM3AAJzcKZWkyByMwzCo0jcCJqnidI8hCCAMikCpYkjHAsAwIgTpOOEeDsGQFAQGgAVBa0wCcDFfBBcixAuRAAQOaQATeKUsbSEppDhahADytCsFlYmkFgzLqOwqX4OCph4BSLmlVclLdlMcjkPQ%2BSpaweABMQmV2FgqUNnc2X8XwdCMCwVU8BNggiBIqVKNUqjqCg0l6CovUuZAIx/oUjXmvl2jOfkfqxJY1hdFUpDuP0LQhNUyQxHQ11JFEL20PdWStD0Z11XQ9SdPYlRtP9hRA40bYDL9RgdOUIPdHDfTQw9wyjOMkzo4JUjCaQontRJUjiFpABs5qk9wSzAMgyBLDFulLBAuCECQ7ozNUSx2BFwXs5wQxcxtujKQ5XlIOFgXBeQlAS5FIQLGo0XaDIblUPFwRJSlpXpbQmVjblN4FUVJXteVitVaVNXnQ1qXNcgrWpQyXWlT1fUDRgbXKShY0jPwU1sBws1%2B8IYiSKVSjaCoivrXoBhbQEO2mvtsSHcdp21BYEDuG91R3ajP2PaQz2FDnRcfYU32DH9GdFPDpfGOdgPw5XsO9MDCQ3W3UMZGj/MY/J2NCfZpVEyT5OU0sCvqPT2hajIc9MyzHx82a3OS8E7PyoLsd6CLnkjAgEJYCEpqaZabk43ZpBOCA5/46lRPOa57mi6Q3l%2Bc64TdtLYU3uvheYHwP6aofsmABy4LwYOC0w7tQAO79XCD7GyuNh6E2kPlbsX9GSoCoEsMeFMqY0zpgzTgTM15yz5kMPeak35IE/t/UKstgqhFukAkgyhQHTUDpAyaIdFqlXgcwRBUglICSHvfEe6DMEThwXgsmBDJ6rUXHKOeC8IDkN5rMeU1D%2BIHyPq0U0l95A3zvgTRyUgn5uQ8mpEYmkOScC1FpbgTjSbn0tO4zgRltAcmQTMVB5idHqRxidCRaCLEv33qQCkiULrcCAA)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-03-06T15:17:27.690

如果[boost](https://www.boost.org/doc/libs/1_75_0/libs/algorithm/doc/html/index.html)是一个选项，那么您可以使用[`boost::algorithm::join`](https://www.boost.org/doc/libs/1_75_0/boost/algorithm/string/join.hpp). 例如打印出一个向量`std::string`：

```
#include <boost/algorithm/string/join.hpp>

std::vector<std::string> vs { "some", "string", "vector" };
std::cout << boost::algorithm::join(vs, " | ") << '\n'; 
```

对于其他类型的向量，您需要先[转换](https://www.boost.org/doc/libs/1_75_0/boost/range/adaptor/transformed.hpp)为字符串

```
#include <algorithm>
#include <iostream>
#include <numeric>
#include <vector>

#include <boost/algorithm/string/join.hpp>
#include <boost/range/adaptor/transformed.hpp>

int main()
{
    using boost::adaptors::transformed;
    using boost::algorithm::join;

    // Generate the vector
    std::vector<int> vi(10);
    std::iota(vi.begin(), vi.end(), -3);

    // Print out the vector
    std::cout << join(vi |
                 transformed(static_cast<std::string(*)(int)>(std::to_string)),
                 ", ")
              << '\n';
} 
```

[在 Godbolt 上演示](https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tENwDspLegAyeWpgByxgEaZiISwAdUCwuto9QxMzb19/OjsHZyM3D0slFTU6BgJmYgIg41MLRWVMVQDU9IIop1d3T0U0jKyQ3IUa0vty2MrzAEpFVANiZA4AcikAZntkQywAanFhnTZgEkIEIxnscQAGAEERsYnMadn1RuJMZhXhta2d2nGDKZmdWmN3PAkLje3JUZu9g50ANwKRGIqw%2BYK%2Buzu%2BweLlQvgIAHp5osCMsEcd7MAEXxUPYAHQILxeUFXCE/KF/WHwhHEETATBI9DMLzAhEEWm0BQ0YhGTDoAlEknbLb2AiTIzMewQDpg8yyLaTRWTAx%2BUSTKmNEAgZhMlkkBRa9kiLkkXnoGbyzZK5Wq4DquGa7WsBbEJZGLU4%2BwWsEKpWNdBawGqEgPUWrSb/PAQTjrGXDS3W/1a9RpCCRvFuYBSroRvB46zS0iTAC0wzjlo%2BiYIAZQPTFDwe00kkgAakCSJNUFRJqKQOIAKyPKSSb2%2BxVJ2sGeuzRue2hpvDTcw6SZGzncs0QRrMNTIAD6LEaDwnGNEEAAVB0IKK49gt9XDag96fgB0c8Oi8OZWPrb/FQ3ZkmMAhkHWhgNHK0lUrP0H0nacdEbYc22DYhO27F8%2B1A4cIKrGsg2BY9YJfcN/gUJdpCbSQFFQXkP0o4jm0/Zt8JDZslwAERwmCazQKc/lnXF51IpjJCXFcv34wDwNA8D41lTitgGLpWBAAZ%2BwGUhTAGdYNNQVSEJkORJmo3p%2BibYZOA0ghVJ0t9SAAaxAYZ1jxYZuEkTh%2BwANmbABOAAOSRvN83gVIGbgNK0nTSD0gYNINdZSGs7SlNIOBYBgRBayMLw8HYMgKAgNAcryypgBjSRSCoPKCHcA0IBcGyNJcex0gAT1UyzSGK3l6AAeVoVgOpS0gsAlUR2Ca0a8BOQpAQNEbMAADwKKdBmi0VlCm1g8BcWliDavQsCm9k8HdAZLK6Gh6CYNgOB4fhBGEUQUDkOQhF2g1YFoM4OA1AhSEBDwLvMdS7NQFkAgW4s%2BtE4t/RmdiJEMmRJGixIgQCTRtDqUxOCsbQyhiOJBB8PxkkCfRslJ8IKaJioPHxjHChSJpccEZmKeKDJ6baRnqhKdmmaaXmSc4LoTL6e7lNU9TNKm2Klv8rziy87hJmAZBkEmGM8VEiBcEIDsRnxyY9BK/LzPFs23pkKymq6CAkGK3L8vISgXdKjxxjpTgY3x6rWFq4h6sakaWp%2Bg7Oo0nqtAIAahqmsa6Umkb8FmtR5qm5bVtqqbNrC6Kdr29qjvWqzXXOy6qroRgWEmh6BEq56xFt%2BRi6%2BqAft5EB/sByoQbBroIYp6HYZLBHhiRtu0fi/IWdMCBrCFgnbBaYnKnxsmIkp4I8dIbe6fXhmOfnrm2apkImbPooRePvmOYvvfH5KUXN4lnopa4GW1MihXVKVirNWkwfZqj9niFynBJgG3wMCK2RZzau3cOZSQHQbYo2kPbFKdlHL9kSmFCKpB3TcF8niXy5CKGUMofLEasV4ogESslWyaVMpOxAHWLwU53ZFRokg/mfIjb82unXO6XBeAAHdaReGjj/OWUVdKqRNpMcRSxJiANVurTW2tdaSCwcwthHCuGFU9vlEAlUBHAkEMI26DcJFSJkUIWWf9aGKK%2BKJFRqI1HKw0SAluOtOAQLxF1JhSkugIFOFgDwhYCEaWIaQqhCSKE0OinQxQDCkoOy6I5LypCvL9nMP5bgwxzDmHWJwcwRTHEDGGM4lJqk9GhKqbo5JCi4oZOwV0IGfgNDcCAA%3D%3D%3D)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-10-20T16:01:44.680

我编写了一个`operator<<`打印任何可迭代对象的 an，其中包括自定义容器、标准容器和具有已知边界的数组。需要 c++11：

```
template<typename Container, typename = 
    std::enable_if_t<std::is_same_v<std::void_t<
        decltype(static_cast<typename Container::const_iterator (*)(const Container&)>(&std::cbegin)),
        decltype(static_cast<typename Container::const_iterator (*)(const Container&)>(&std::cend))>, void>
        && !std::is_same_v<std::string, Container>>>
std::ostream& operator<<(std::ostream& out, const Container &vec)
{
    std::cout << "[ ";
    for(const auto& t: vec){
        std::cout << t << " ";
    }
    std::cout << "] ";
    return out;
} 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2019-08-21T09:22:06.270

对于那些感兴趣的人：我编写了一个综合解决方案，它充分利用了两全其美，更适用于任何类型的范围，并在非算术类型周围加上引号（对于类似字符串的类型来说是理想的）。此外，这种方法不应该有任何 ADL 问题，也应该避免“意外”（因为它是根据具体情况明确添加的）：

```
template <typename T>
inline constexpr bool is_string_type_v = std::is_convertible_v<const T&, std::string_view>;

template<class T>
struct range_out {
  range_out(T& range) : r_(range) {
  }
  T& r_;
  static_assert(!::is_string_type_v<T>, "strings and string-like types should use operator << directly");
};

template <typename T>
std::ostream& operator<< (std::ostream& out, range_out<T>& range) {
  constexpr bool is_string_like = is_string_type_v<T::value_type>;
  constexpr std::string_view sep{ is_string_like ? "', '" : ", " };

  if (!range.r_.empty()) {
    out << (is_string_like ? "['" : "[");
    out << *range.r_.begin();
    for (auto it = range.r_.begin() + 1; it != range.r_.end(); ++it) {
      out << sep << *it;
    }
    out << (is_string_like ? "']" : "]");
  }
  else {
    out << "[]";
  }

  return out;
} 
```

现在它在任何范围内都相当容易使用：

```
std::cout << range_out{ my_vector }; 
```

类似字符串的检查留有改进的空间。我也`static_assert`检查了我的解决方案以避免`std::basic_string<>`，但为了简单起见，我把它留在这里。

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2019-10-26T12:48:40.297

**对于想要没有循环的单行代码的人：**

我不敢相信没有人知道这一点，但也许是因为更像 C 的方法。无论如何，在没有循环的情况下这样做是完全安全的，在单行中，假设**是**`std::vector<char>`空终止的：

```
std::vector<char> test { 'H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd', '!', '\0' };
std::cout << test.data() << std::endl; 
```

`ostream`但正如@Zorawar 建议的那样，为了安全起见，我会将其包装在运算符中：

```
template <typename T>std::ostream& operator<< (std::ostream& out, std::vector<T>& v)
{
    v.push_back('\0'); // safety-check!
    out << v.data();
    return out;
}

std::cout << test << std::endl; // will print 'Hello, world!' 
```

我们可以通过使用来实现类似的行为`printf`：

```
fprintf(stdout, "%s\n", &test[0]); // will also print 'Hello, world!' 
```

笔记：

重载的`ostream`运算符需要接受向量作为非常量。这可能会使程序不安全或引入误用代码。此外，由于附加了空字符，因此`std::vector`可能会发生重新分配。因此，使用带有迭代器的 for 循环可能会更快。

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2020-09-17T07:55:05.313

# 模板集合：

## 申请`std::cout <<`和`std::to_string`

## 到`std::vector`,`std::array`和`std::tuple`

由于在 cpp 中打印向量结果出乎意料的多（至少与这项任务的基本相比），并且作为一个步骤再次解决相同的问题，当使用其他容器时，这里有一个更通用的解决方案......

### 模板集合内容

此模板集合处理 3种**容器**类型 `std::vector`：`std::array`和`std::tuple`. 它`std::to_string()`为这些定义，并可以通过`std::cout << container;`.

此外，它定义了 << 运算符`std::string << container`。这样就可以以紧凑的方式构造包含这些容器类型的字符串。

从

```
std::string s1 = "s1: " + std::to_string(arr) + "; " + std::to_string(vec) + "; " + std::to_string(tup); 
```

我们到

```
std::string s2 = STR() << "s2: " << arr << "; " << vec << "; " << tup; 
```

### 代码

您可以交互地测试此代码：[here](https://techiedelight.com/compiler/?D-BR)。

```
#include <iostream>
#include <string>
#include <tuple>
#include <vector>
#include <array>

namespace std
{   
    // declations: needed for std::to_string(std::vector<std::tuple<int, float>>)
    std::string to_string(std::string str);
    std::string to_string(const char *str);
    template<typename T, size_t N>
    std::string to_string(std::array<T, N> const& arr);
    template<typename T>
    std::string to_string(std::vector<T> const& vec);
    template<typename... Args>
    std::string to_string(const std::tuple<Args...>& tup);

    std::string to_string(std::string str)
    {
        return std::string(str);
    }
    std::string to_string(const char *str)
    {
        return std::string(str);
    }

    template<typename T, size_t N>
    std::string to_string(std::array<T, N> const& arr)
    {
        std::string s="{";
        for (std::size_t t = 0; t != N; ++t)
            s += std::to_string(arr[t]) + (t+1 < N ? ", ":"");
        return s + "}";
    }

    template<typename T>
    std::string to_string(std::vector<T> const& vec)
    {
        std::string s="[";
        for (std::size_t t = 0; t != vec.size(); ++t)
            s += std::to_string(vec[t]) + (t+1 < vec.size() ? ", ":"");
        return s + "]";
    }

    // to_string(tuple)
    // https://en.cppreference.com/w/cpp/utility/tuple/operator%3D
    template<class Tuple, std::size_t N>
    struct TupleString
    {
        static std::string str(const Tuple& tup)
        {
            std::string out;
            out += TupleString<Tuple, N-1>::str(tup);
            out += ", ";
            out += std::to_string(std::get<N-1>(tup));
            return out;
        }
    };
    template<class Tuple>
    struct TupleString<Tuple, 1>
    {
        static std::string str(const Tuple& tup)
        {
            std::string out;
            out += std::to_string(std::get<0>(tup));
            return out;
        }
    };
    template<typename... Args>
    std::string to_string(const std::tuple<Args...>& tup)
    {
        std::string out = "(";
        out += TupleString<decltype(tup), sizeof...(Args)>::str(tup);
        out += ")";
        return out;
    }
} // namespace std

/**
 * cout: cout << continer
 */
template <typename T, std::size_t N> // cout << array
std::ostream& operator <<(std::ostream &out, std::array<T, N> &con)
{
    out <<  std::to_string(con);
    return out;
}
template <typename T, typename A> // cout << vector
std::ostream& operator <<(std::ostream &out, std::vector<T, A> &con)
{
    out <<  std::to_string(con);
    return out;
}
template<typename... Args> // cout << tuple
std::ostream& operator <<(std::ostream &out, std::tuple<Args...> &con)
{
    out <<  std::to_string(con);
    return out;
}

/**
 * Concatenate: string << continer
 */
template <class C>
std::string operator <<(std::string str, C &con)
{
    std::string out = str;
    out += std::to_string(con);
    return out;
}
#define STR() std::string("")

int main()
{
    std::array<int, 3> arr {1, 2, 3};
    std::string sArr = std::to_string(arr);
    std::cout << "std::array" << std::endl;
    std::cout << "\ttest to_string: " << sArr << std::endl;
    std::cout << "\ttest cout <<: " << arr << std::endl;
    std::cout << "\ttest string <<: " << (std::string() << arr) << std::endl;

    std::vector<std::string> vec {"a", "b"};
    std::string sVec = std::to_string(vec);
    std::cout << "std::vector" << std::endl;
    std::cout << "\ttest to_string: " << sVec << std::endl;
    std::cout << "\ttest cout <<: " << vec << std::endl;
    std::cout << "\ttest string <<: " << (std::string() << vec) << std::endl;

    std::tuple<int, std::string> tup = std::make_tuple(5, "five");
    std::string sTup = std::to_string(tup);
    std::cout << "std::tuple" << std::endl;
    std::cout << "\ttest to_string: " << sTup << std::endl;
    std::cout << "\ttest cout <<: " << tup << std::endl;
    std::cout << "\ttest string <<: " << (std::string() << tup) << std::endl;

    std::vector<std::tuple<int, float>> vt {std::make_tuple(1, .1), std::make_tuple(2, .2)};
    std::string sVt = std::to_string(vt);
    std::cout << "std::vector<std::tuple>" << std::endl;
    std::cout << "\ttest to_string: " << sVt << std::endl;
    std::cout << "\ttest cout <<: " << vt << std::endl;
    std::cout << "\ttest string <<: " << (std::string() << vt) << std::endl;

    std::cout << std::endl;

    std::string s1 = "s1: " + std::to_string(arr) + "; " + std::to_string(vec) + "; " + std::to_string(tup);
    std::cout << s1 << std::endl;

    std::string s2 = STR() << "s2: " << arr << "; " << vec << "; " << tup;
    std::cout << s2 << std::endl;

    return 0;
} 
```

### 输出

```
std::array
    test to_string: {1, 2, 3}
    test cout <<: {1, 2, 3}
    test string <<: {1, 2, 3}
std::vector
    test to_string: [a, b]
    test cout <<: [a, b]
    test string <<: [a, b]
std::tuple
    test to_string: (5, five)
    test cout <<: (5, five)
    test string <<: (5, five)
std::vector<std::tuple>
    test to_string: [(1, 0.100000), (2, 0.200000)]
    test cout <<: [(1, 0.100000), (2, 0.200000)]
    test string <<: [(1, 0.100000), (2, 0.200000)]

s1: {1, 2, 3}; [a, b]; (5, five)
s2: {1, 2, 3}; [a, b]; (5, five) 
```

# javascript - CSS 显示：无；-> 使用 jQuery Click() -> jQuery ComboBox

> ID：10750058
> 
> 赞同：0
> 
> 时间：2012-05-25T07:13:54.007
> 
> 标签：javascript, jquery, jquery-ui, combobox, jquery-click-event

所以我注意到在元素内部使用 jQuery 的 click() 似乎有问题`<div style="display: none;"></div>`

有可能让它工作吗？我在这里测试过，似乎可以工作。 [http://jsfiddle.net/FBYhe/](http://jsfiddle.net/FBYhe/)

我正在使用 jQuery UI -> ComboBox 小部件。

这是我当前的代码。

```
 <select name="labels" id="labelsList">
        <option>Filter By Label</option>
        <option selected>Show All</option>
        <option class="ClickMe">Filter By Label</option>
    </select>
    <script>
        $(document).ready(function(){
            $(".ClickMe").click(function() {
                alert('tets');
            });
        });
    </script> 
```

所以我得到了零警报，我不知道为什么，但我相信它与 Display:None 有关。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:34:06.553

您的代码无法在 IE 或 Chrome 上运行，因为它们都没有通过选项元素实现 onClick 事件。也许您可以添加一个 onchange 事件，例如：

```
<select name="labels" id="labelsList" onchange="test_click(this)">
     <option>Filter By Label</option>
     <option selected>Show All</option>
     <option class="ClickMe">Filter By Label</option>
</select>

<script>
function test_click(obj)
{
    if ($(obj[obj.selectedIndex]).hasClass("ClickMe"))
        alert("clicked!");
}
</script> 
```

当您单击任何具有“ClickMe”类的元素时，这将触发警报。您甚至可以通过 jQuery 的绑定更改将此行为分配给您想要的任何选择（在这种情况下，函数会有所不同，没有参数 obj，并且在函数体中使用“this”而不是 obj）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:36:49.267

如果您使用的是 jQuery UI 组合框自动填充小部件，您正试图让它在点击时工作：

```
<li class="ui-menu-item" role="menuitem">
  <a class="ui-corner-all" tabindex="-1">MENU ITEM</a>
</li> 
```

这与您帖子中的html不同。

您将需要绑定到

$(".ui-menu-item");

如果你想在 jQuery UI 小部件上执行某些操作

或者破解这个

```
$.widget( "ui.combobox", {
.
.
.
    .click(function() {
      // close if already visible
      if ( input.autocomplete( "widget" ).is( ":visible" ) ) {

        // here I guess you want your thing
        // 
        input.autocomplete( "close" );
        return;
      }

      // work around a bug (likely same cause as #5265)
      $( this ).blur();

      // pass empty string as value to search for, displaying all results
      input.autocomplete( "search", "" );
      input.focus();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:39:34.633

如果要在选择特定选项时执行某些脚本，则必须获取该值并查看我所需要的。

```
$('#labelsList).click(function() {
   if($(this).val == 'somevalue'){
      alert("I have selected the correct option");
   }
}); 
```

# android - android.content.Context 与 android.app.Activity

> ID：10750064
> 
> 赞同：3
> 
> 时间：2012-05-25T07:14:12.993
> 
> 标签：android, android-activity, android-asynctask, android-context

我想将当前活动的引用传递给不扩展活动的类的方法。我需要使用这个对活动活动的引用，以便我可以使用`getWindow().addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);`

我使用类中的这些 setter 方法将当前上下文和活动都传递给类对象：

```
public class VersionCheck {

    public Context context;
    public Activity activity;

    //---------------------------------------------------------------------------------------------------------
    //set the current context
    //---------------------------------------------------------------------------------------------------------
    public void setContext(Context context) {

        this.context = context;
    }

    //---------------------------------------------------------------------------------------------------------
    //set the current activity
    //---------------------------------------------------------------------------------------------------------
    public void setActivity(Activity activity) {

        this.activity = activity;
    } 
```

对活动的引用在类中的 AsyncTask 中使用（摘录如下）：

```
//---------------------------------------------------------------------------------------------------------
//asynchronous task to check if there is a newer version of the app available
//---------------------------------------------------------------------------------------------------------
private class UpdateCheckTask extends AsyncTask<String, Void, String> {

HttpClient httpclient;
HttpPost httppost;
HttpResponse response;
InputStream inputStream;
byte[] data;
StringBuffer buffer;

protected void onPreExecute ()
{
    VersionCheck vc = new VersionCheck();

    //do not lock screen or drop connection to server on login
        activity.getWindow().addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);

        //initiate progress dialogue to block user input during initial data retrieval
        ProcessingDialog = ProgressDialog.show(context, "Please Wait", "Checking for Updates", true,false);
}

    @Override
    protected String doInBackground(String... currentVersion) 
    { 
```

如何获取对 Activity 的引用，以便可以将其传递给 setActivity(Activity) 方法？我使用 myActivity.this 作为上下文的参考。Activity 也一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:21:13.703

是的，Activity 也是一样的......

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

看这里 Context 是 Activity 的超类......

```
java.lang.Object

   ↳    android.content.Context

       ↳    android.content.ContextWrapper

           ↳    android.view.ContextThemeWrapper

               ↳    android.app.Activity 
```

# android - Fourquare 的地点数据

> ID：10750072
> 
> 赞同：0
> 
> 时间：2012-05-25T07:14:38.110
> 
> 标签：android, json, get, foursquare

我需要 Fourquare 的地点数据。我尝试使用[Venue](https://developer.foursquare.com/docs/venues/venues)。但是没有反应。

```
 try {
         HttpClient client = new DefaultHttpClient();  
         String getURL = "https://api.foursquare.com/v2/venues/4cbd52efd78f46881cf1cc73";     
        HttpGet get = new HttpGet(getURL);
        HttpResponse responseGet = client.execute(get);  
        HttpEntity resEntityGet = responseGet.getEntity();  
        if (resEntityGet != null) {  
            // do something with the response
            String response = EntityUtils.toString(resEntityGet);
            Log.i("GET RESPONSE", response);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

这个怎么用？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:57:06.713

您应该查询您的纬度和经度以获得最近的位置。这说得通。

将您的 URL 更改为以下以获得最近的位置：

```
String getURL = "https://api.foursquare.com/v2/venues/search?ll="Your Latitude","Longitude"&intent=checkin&limit=50&oauth_token=MVVYZJAO0V4UNTA3YFHGI5YO2YEXIM3TTLW1GO2YZNOZZXER"; 
```

**ll** - 纬度和经度

**oauth_token** - 您的有效令牌

**限制**- 只要你喜欢靠近你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:56:43.780

几乎每个对 Foursquare API 的查询都必须包含一个有效的 OAuth 令牌。在某些情况下，例如您的情况，您可能会使用 Foursquare 在注册您的应用程序后提供给您的客户端 ID 和客户端密码（但如果您想分发您的应用程序，这不是一个好主意）。将令牌附加到 URL 后，您将获得所需的 JSON 答案。

[您可以在此 GitHub 存储库](https://github.com/foursquare/android-oauth-example "GitHub存储库")中找到有关在 Android 上获取 OAuth 令牌的示例

# php - Yii 控制器找不到请求的视图

> ID：10750080
> 
> 赞同：6
> 
> 时间：2012-05-25T07:15:20.820
> 
> 标签：php, yii

渲染“错误”视图时遇到此错误

```
ApiController cannot find the requested view "error". 
```

所有目录都是小写字母。我在 Linux 机器上运行 Yii

```
Sample Code:

class ApiController extends Api
{
    private $api;
    private $placesapikey;

public function __construct()
{
    parent::__construct("Api");
    $uri = explode('=', Yii::app()->request->getQueryString());
    $this->api = end($uri);
    $this->placesapikey = "";

    if ($this->api != Yii::app()->params['apikey'] || $this->api == '')
    {
        $error['data']['title'] = "Un-Authorized Access";
        $error['data']['message'] = "You are not authorized to access or view this area";
        $this->render('error', $error);
        exit;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T08:16:58.173

尝试：

```
$this->render('/api/error', $error); 
```

# objective-c - “已加载控制器笔尖，但未设置视图出口。”

> ID：10750082
> 
> 赞同：5
> 
> 时间：2012-05-25T07:15:53.740
> 
> 标签：objective-c, ios, uiviewcontroller, xib

我不知道出了什么问题：我正在尝试使用按钮的 UIAction 进入另一个视图。

我的视图控制器包含一个 UIScrollView IBOutlet。我为此视图控制器创建了一个 .xib 文件。

在这个 .xib 中，我将该类自定义为我的 SettingsController 类。

但是现在，有了这个配置（我有 scrollView、searchDisplayController 和 view 作为我的出口），我不知道我必须如何连接它才能让它工作。请帮忙 ！

非常感谢您的建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T07:52:20.947

正如我从您的帖子中看到的，您尚未将某些属性与您的 nib 文件中的对象连接起来。

在 Interface Builder 中打开第二个 .xib。检查 UIView 是否连接到文件的所有者。如果没有，只需用鼠标右键（或 cmd+鼠标左键）从 File 的所有者拖动到 UIView 并连接到视图属性。*（也许你应该从另一个方向拖动，从 UIView 到文件的所有者，我现在不记得了）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T19:11:48.863

为了向其他人澄清 - 如果您正在使用这样的界面构建器制作自己的自定义 View Controller 类：

*   MyViewController.h

*   我的视图控制器.m

*   MyViewController.xib

您需要确保您的 .xib 知道它与哪个类相关联。

选择您的.xib文件->单击占位符下的文件所有者->在右侧导航窗格上，单击左侧第三个图标（又名身份检查器）并在自定义类下输入您的控制器类名称（即MyViewController） . 保存 .xib 文件。

**如果您将 UITabBarController 与多个 UIViewController（每个都有自己的 nib 文件）一起使用，您还需要在您的 UITabBarController nib 中为每个 ViewController 设置 UIViewController 类文件。**

![视图控制器类](../Images/fd024093bfaab37be58c32b20a3aa8ad.png)

*然后*您可以连接您的插座属性。

查看“在 Xcode 中创建新的 UI 类”部分：http: [//developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/InterfaceBuilder/InterfaceBuilder.html](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/InterfaceBuilder/InterfaceBuilder.html)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:27:33.453

我只是错过了为文件所有者设置正确的类。

# spring - com.springsource.org.hibernate maven 神器 jar 文件下载失败

> ID：10750095
> 
> 赞同：0
> 
> 时间：2012-05-25T07:16:46.443
> 
> 标签：spring, hibernate, maven

我在 pom.xml 中添加了 SpringSource 存储库，如下所示：

```
<repositories>
    <repository>
        <id>com.springsource.repository.bundles.release</id>
        <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/release</url>
    </repository>
    <repository>
        <id>com.springsource.repository.bundles.external</id>
        <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
        <url>http://repository.springsource.com/maven/bundles/external</url>
    </repository>
    <repository>
        <id>com.springsource.repository.libraries.release</id>
        <name>SpringSource Enterprise Bundle Repository - SpringSource Library Releases</name>
        <url>http://repository.springsource.com/maven/libraries/release</url>
    </repository>
    <repository>
        <id>com.springsource.repository.libraries.external</id>
        <name>SpringSource Enterprise Bundle Repository - External Library Releases</name>
        <url>http://repository.springsource.com/maven/libraries/external</url>
    </repository>
</repositories> 
```

我尝试添加它的所有版本，如下所示：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>com.springsource.org.hibernate</artifactId>
        <version>4.1.0.Final</version>
        <!--
        <version>4.0.1.Final</version>
        <version>4.0.0.CR4</version>
        <version>3.3.2.GA</version>
        <version>3.3.1.GA</version>
        <version>3.2.6.ga</version>
        -->
    </dependency> 
```

但都失败了。

在 Maven 依赖项中，它的 jar 没有出现。

我检查了 .m2 目录，只有以下文件：

```
_maven.repositories
com.springsource.org.hibernate-4.1.0.Final.pom.lastUpdated
com.springsource.org.hibernate-4.1.0.Final.pom
com.springsource.org.hibernate-4.1.0.Final.pom.sha1 
```

多次删除整个目录后，我尝试下载。

突然，它现在正在工作。

我错过了什么？我的错是什么？

# java - 困惑，java在传递对象引用时是使用按值调用还是按引用调用？

> ID：10750098
> 
> 赞同：23
> 
> 时间：2012-05-25T07:16:54.027
> 
> 标签：java, pass-by-reference, pass-by-value

```
public class program1{

    public static void main(String args[]){

        java.util.Vector vc=new java.util.Vector();

        vc.add("111");
        vc.add("222");

        functioncall(vc);

        vc.add("333");

        System.out.println(vc);

    }

    public static void functioncall(java.util.Vector vc){     

        vc=null;    

    }
} 
```

上述程序的输出是 [111,222,333]。但是，当我运行以下程序时，输出为 [333]。当我们传递引用时感到困惑，无论是按值调用还是按引用调用，它是如何工作的？为什么

```
public class program1{

    public static void main(String args[]){

        java.util.Vector vc=new java.util.Vector();

        vc.add("111");
        vc.add("222");

        functioncall(vc);

        vc.add("333");

        System.out.println(vc);

    }

    public static void functioncall(java.util.Vector vc){

        vc.removeAllElements();  

    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T07:21:43.063

它传递引用的*值*。

为了厚颜无耻地盗用我不久前在这里看到的一个类比，假设您使用的每个标识符都是一张写有地址的纸。地址指向一所房子。

您可以更改房子（例如，通过向矢量添加对象或清除它），但您仍然拿着同一张纸，地址仍然会将您带到同一房子。

如果将向量设置为空，那么您所做的就是删除地址。

[这篇文章](http://javadude.com/articles/passbyvalue.htm)更详细地解释了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:22:04.423

您将 vc 作为参考副本传递（始终）。然后执行 `vc = null;`or `vc = new Vector()`，您只需修改来自 vc 本地属性的引用，因此 main 没有更改是正常的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T07:25:53.740

它是按值调用的。在这两种情况下，您都将引用*值放在方法的参数中，即方法的**本地*引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-19T03:35:56.813

Java 编程语言总是使用按值调用。在 Java 中，方法的所有参数都是按值调用或按值传递的。Cay S. Horstmann 和 Garry Cornell 在他们非常著名的书“Core Java Volume - I Fundamentals”中提到 Java 编程语言总是使用按值调用。这意味着该方法获取所有参数值的副本，并且该方法不能修改传递给它的任何参数变量的内容。Java 使用两种方法参数：

*   Java 原始类型
*   Java 对象引用

当您尝试将原始类型传递给方法时，它看起来非常直接和简单，但在将对象传递给方法时变得晦涩难懂。有趣的是，当一个对象引用被传递给一个方法时，该方法得到一个对象引用的副本，并且原始副本和正式副本都引用同一个对象，因此在方法内可以更改对象参数的状态.

以下文章很好地解释了[按值调用和按引用调用](http://cs-fundamentals.com/java-programming/java-call-by-value-call-by-reference.php)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T07:20:49.463

Java 使用对象引用。参数是参考值。所以它是按值调用的，其中值是对象的引用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T07:20:52.977

vc 是一个新变量，其中包含用于调用该方法的向量的引用。将其更改为 null 不会影响原始向量，因为此引用是原始向量引用的副本。

但是由于这是对原始向量的引用，因此对向量的任何修改实际上都会改变原始向量。所以java总是使用按值调用，这里的值恰好是一个引用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-07T17:20:02.253

Java 和 C**总是按值调用**。引用调用这个术语严格适用于 C++，我们在形式参数中使用 & 运算符。在对象引用的情况下，引用从实际参数复制到形式参数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-07T19:40:07.143

在java中按值传递意味着传递要传递的值的副本。在java中通过引用传递意味着传递地址本身。在 Java 中，参数总是按值传递。Java 仅支持按值传递。

对于 Java 对象，对象引用本身是按值传递的，因此原始引用和参数副本都引用同一个 Java 对象。Java 原语也是按值传递的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-25T07:24:51.257

使用Java“按引用传递”，引用本身是按值传递的。

因此，您不能更改引用本身，但可以更改引用指向的对象。

因此，您的`removeAll`呼叫会起作用，`Vector`因此您会看到结果。但是，如果您更改引用本身，例如：

```
vc = null 
```

或者，

```
vc = new Vector(); 
```

这些更改指向一个新的（或 null ）对象，因此之后的任何更改都不会反映在`main`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-23T03:35:46.460

Java 使用“按值调用概念”。如果它的堆栈和堆是可视化的，那么 java 会尝试在本地工作空间中查找任何变量的值，如果在本地找不到它，那么它会尝试在堆中的对象中查找。

**例子**

```
class Foo
{

int x;

public void call(int x)

{

    x++;

}

public static void main(String[] args)

{

       Foo foo = new Foo();

       foo.x = 5;

       System.out.println(foo.x);

       foo.call(foo.x);

       System.out.println(foo.x); 

}

} 
```

上述程序的输出将是：5、5 说明：在 main 方法中，x 的值在“foo”的引用上赋值为 5：在调用方法中，工作区中有名为“x”的局部变量（作为参数传递）。所以它是值只会在其工作区中更改。当此函数的控制返回到 main 方法时。在 main 的工作区中，“x”的值仍然是 5。

**例子**

```
class Foo

{

int x;

public void call(int y)

{

    x++;

}

public static void main(String[] args)

{

       Foo foo = new Foo();

       foo.x = 5;

       System.out.println(foo.x);

       foo.call(foo.x);

       System.out.println(foo.x); 

}

} 
```

上述程序的输出为： 5 , 6

**描述**：在main方法中，x的值在“foo”的引用上赋值为5：在调用方法中，工作区中没有名为“x”的局部变量（作为参数传递）。所以java在引用中找到它“调用”函数被调用并且“x”的值是 5，调用方法将其值增加到“6”，因此它的值将被更改引用，即“foo”。当该函数的控制返回到 main 方法时。现在在 main 的工作区值“x”是 6，因为这里我们在 foo 引用上打印了“x”。

我希望这能帮助你理清概念。

问候， 苏希尔耆那教

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-01T18:12:52.960

值传递

实际参数（或参数表达式）被完全评估，结果值被复制到用于在方法/函数执行期间保存形式参数值的位置。该位置通常是应用程序运行时堆栈上的一块内存（这是 Java 处理它的方式），但其他语言可以选择不同的参数存储。

Pass-by-reference 形式参数仅充当实际参数的别名。每当方法/函数使用形式参数（用于读取或写入）时，它实际上是在使用实际参数。 ***Java 是严格按值传递的***

# ruby-on-rails-3 - Rails 3 RSpec 控制器测试失败/错误：

> ID：10750102
> 
> 赞同：0
> 
> 时间：2012-05-25T07:17:25.910
> 
> 标签：ruby-on-rails-3, controller, rspec-rails

我正在测试我的 Rails 3.2 应用程序，但在尝试测试我的控制器时遇到了错误。

这是我的控制器

```
class WidgetsController < ApplicationController
  #skip_before_filter :authenticate, :only => [:new, :create]
  before_filter :authenticate, :except=>[:disabled]

  def index
    @widgets = current_user.widgets.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @widgets }
    end
  end

  def new
    @widget = Widget.new
  end

  def create
    @widget = Widget.new(params[:widget])
    @widget.user_id = current_user.id
    @widget.score = 0
    @widget.total_score = 0
    @widget.click_number = 0
    @widget.average = 0
    respond_to do |format|
      if @widget.save
        format.html { redirect_to edit_widget_path(@widget), notice: 'Widget was successfully created.' }
        format.json { render json: @widget, status: :created, location: @widget }
      else
        format.html { render action: "new" }
        format.json { render json: @widget.errors, status: :unprocessable_entity }
        raise 'there is an error when creation'
      end
    end
  end

  def show
    @widget = Widget.find_by_uuid(params[:uuid])
  end

  def edit
    @widget = Widget.find_by_uuid(params[:uuid])
  end

  def update
    @widget = Widget.find_by_uuid(params[:uuid])
    respond_to do |format|
      if @widget.update_attributes(params[:widget])
        format.html { redirect_to edit_widget_path(@widget), notice: 'Widget was successfully updated.' }
        format.json { render json: @widget, status: :created, location: @widget }
      else
        format.html { render action: "edit" }
        format.json { render json: @widget.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @widget = Widget.find_by_uuid(params[:uuid]).destroy
    redirect_to widgets_path
  end

  #generate widget
  def generate
    respond_to do |format|
      format.js {}
    end
  rescue
    #TODO add widget not found page
    render :template => 'application/widget_not_found', :status => :not_found
  end

  protected

  def authenticate
    unless current_user
      redirect_to root_url
    end
  end

end 
```

这是我的控制器规格

```
require 'spec_helper'

describe WidgetsController do
  login_admin

  describe "User" do
    it "should have a current_user" do
      subject.current_user.should_not be_nil
    end
  end

  def mock_widget(stubs={})
    @mock_widget ||= mock_model(Widget, stubs).as_null_object
  end

  describe "GET index" do
    it "assigns all widgets as @widgets" do
      Widget.stub(:all) { [mock_widget] }
      get :index
      assigns(:widgets).should eq([mock_widget])
    end
  end

end 
```

我只是想看看我可以在索引页面上获取数据。但是我在运行时在命令行上看到了这个错误`$rspec spec/controllers/widgets_controller_spec.rb`

```
.F

Failures:

  1) WidgetsController GET index assigns all widgets as @widgets
     Failure/Error: assigns(:widgets).should eq([mock_widget])

       expected: [#<Widget:0x3ffb0c3c9d70 @name="Widget_1001">]
            got: []

       (compared using ==)

       Diff:
       @@ -1,2 +1,2 @@
       -[#<Widget:0x3ffb0c3c9d70 @name="Widget_1001">]
       +[]
     # ./spec/controllers/widgets_controller_spec.rb:20:in `block (3 levels) in <top (required)>'

Finished in 0.11937 seconds
2 examples, 1 failure

Failed examples:

rspec ./spec/controllers/widgets_controller_spec.rb:17 # WidgetsController GET index assigns all widgets as @widgets 
```

我做了这个教程[http://www.codethinked.com/rails-3-baby-steps-part-4](http://www.codethinked.com/rails-3-baby-steps-part-4)并且我没有遇到任何问题。我应该如何解决它？这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:42:27.803

我猜这与在控制器中确定 current_user 返回的小部件集的范围有关。在控制器中，您正在调用`all`小部件对象（Widget 类的实例）集合上的方法，而在测试中，您正在`all`对 Widget 类的方法进行存根。您可以通过将控制器方法更改为简单地调用来测试这个理论`Widget.all`。我知道这不是您想要的，但它会确认这是问题所在。

# php - 根据 id 将值插入数据库

> ID：10750103
> 
> 赞同：0
> 
> 时间：2012-05-25T07:17:34.863
> 
> 标签：php, mysql

我想根据从下拉列表中选择的值将数据插入表中。其实我有两张桌子，`Categories`和`Products`。两者都与`CategoryID`.
现在我有一个表格，我正在尝试添加一个产品。我有一个类别的下拉列表。我将从下拉列表中选择一个类别，然后将相关产品添加到该类别中。

获取表单数据后，我获取了我的表格，`CategoryID`如下所示：

```
 include('includes/conn.php');
 if (isset($_POST['submit']))
 { 
     $CategoryName = $_POST['cat'];
     echo $CategoryName; 
     $ProductName = mysql_real_escape_string(htmlspecialchars($_POST['ProductName']));
     $ProductCode = $_POST['ProductCode'];
     $Specification = $_POST['Specification'];
     $Description = $_POST['Description'];
     $CostPrice = $_POST['CostPrice'];
     $DisplayPrice = $_POST['DisplayPrice'];
     $ProductID = $_POST['ProductID'];
     $Productimage = $_POST['ProductImage'];
     $sql = "select * Categories";
     $result = mysql_query ($sql);
     $row = mysql_fetch_array($result);
     $Category_ID = $row['CategoryID']; 
```

在此之后我不知道该怎么做。除了那个条件我的代码成功插入记录。我的完整代码没有像这样选择categoryid

```
<?php 
}

include('includes/conn.php');
    if (isset($_POST['submit']))
    { 
        $ProductName = mysql_real_escape_string(htmlspecialchars($_POST['ProductName']));
        $ProductCode = $_POST['ProductCode'];
        $Specification = $_POST['Specification'];
        $Description = $_POST['Description'];
        $CostPrice = $_POST['CostPrice'];
        $DisplayPrice = $_POST['DisplayPrice'];
        $ProductID = $_POST['ProductID'];
        $Productimage = $_POST['ProductImage'];
        if ($ProductName == '' || $ProductCode == ''|| $Specification == '' || $Description == '' || $CostPrice == '' || $DisplayPrice =='')
        {
            echo  "Please fill in all required fields";
            renderForm($ProductID, $ProductName, $ProductCode, $Description, $Specification, $CostPrice, $DisplayPrice,  $error);
        }
        else
        {
            $sql = "INSERT into Products SET ProductName='$ProductName', ProductCode='$ProductCode', Specification ='$Specification', Description = '$Description', CostPrice = $CostPrice, DisplayPrice = $DisplayPrice, ProductImage = '$ProductImage'";
            mysql_query($sql) or die(mysql_error());
            echo " Successfully Added "; 
            //header("Location: view.php"); 
        }
    }
    else
    {
        renderForm('','','','','','','','','');
    }
   ?> 
```

请建议怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:24:11.020

```
$sql = "INSERT INTO Products (ProductName, ProductCode, ...) VALUES ('".$ProductName."', '". $ProductCode ."', ..."; 
```

这就是您使用插入查询的方式。

[http://www.tizag.com/mysqlTutorial/mysqlinsert.php](http://www.tizag.com/mysqlTutorial/mysqlinsert.php)

# iphone - 如何逐渐减少在 AVAudioPlayer 中播放的每一秒歌曲的剩余时间

> ID：10750108
> 
> 赞同：0
> 
> 时间：2012-05-25T07:18:14.803
> 
> 标签：iphone

我是 iPhone 新手。我正在开发音频播放器。我必须在音频播放器中显示当前歌曲的当前时间和剩余时间。在视频播放器中它会默认获取，但在音频播放器中它没有得到，所以我需要编写逻辑来获取歌曲的当前时间。

下面的代码就是为此

```
int minutes = (int)audioPlayer.currentTime / 60;
int seconds = (int)audioPlayer.currentTime % 60;
startDurationLabel.text = [NSString stringWithFormat:@"%d:%02d",minutes,seconds]; 
```

这`audioPlayer`是一个实例，`AVAudioPlayer`是`startDurationLabel`显示歌曲当前时间的标签。

我正在努力获得显示歌曲剩余时间的逻辑。它从持续时间的背面每秒逐渐减少，例如歌曲的持续时间为 4 分钟：52 秒，然后每秒减少到 4 分钟：51 秒、4 分钟：50 秒、4 分钟：49 秒......就像在 iphone 视频播放器应用程序中一样。

我试过下面的代码

```
NSTimeInterval interval = audioPlayer.duration - audioPlayer.currentTime;
NSLog(@"the interval is %f",interval); 
```

在这里，我得到时间间隔的值`292, 291, 290`。它逐渐减少，但我想以 min:sec 的格式展示它们是如何可能的？

如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:22:17.437

您可以使用`NSTimer`它并每隔一秒触发一次。

```
NSTimer *progressTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(setProgress) userInfo:nil repeats:YES]; 
```

`setProgress`是您需要更新标签文本的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:27:23.907

创建 NSTimer 和触发方法 timerFired: 每秒

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];

- (void) timerFired:(NSTimer *)timer {
NSTimeInterval remainingTime = audioPlayer.duration - audioPlayer.currentTime; 
```

}

NSTimeInterval 与 double 相同。

# ios5 - 如何从 iPhone 应用程序上传 Godaddy 服务器上的音频文件？

> ID：10750109
> 
> 赞同：1
> 
> 时间：2012-05-25T07:18:18.310
> 
> 标签：ios5, file-upload

我制作了一个 iphone 应用程序来上传音频文件。

我还在 asp.net 中制作了 webervices 以支持此应用程序的其他功能，并将其发布在 godaddy 服务器上。

我想从我的 iphone 应用程序上传/保存该服务器上的音频文件。

我搜索了很多代码，但它们并不相关且无用。

那么我该怎么做呢？

如何获取可以上传文件的服务器路径？

请为 iphone 提供一些示例代码来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:39:47.890

这就是我将文件（可以是任何文件、图像、视频、音频等）发布到网络服务的方式

```
NSString *fileName = @"myAudio";
    NSData *audioFile = [NSData dataWithContentsOfFile:@"myAudio.ext"]; //some audio
    NSString *urlString = @"http://www.something.com/someservice";
    urlString = [urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
    NSURL *url = [NSURL URLWithString:urlString];
    NSString *strPostLength = [NSString stringWithFormat:@"%d", [audioFile length]];  
    NSMutableURLRequest *uRequest = [[NSMutableURLRequest alloc] init];  
    [uRequest setURL:url];  
    [uRequest setHTTPMethod:@"POST"];  
    if (audioFile)
    {
        NSMutableData *body = [NSMutableData data];

        NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
        [uRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

        /*
         now lets create the body of the post
         */

        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [uRequest setValue:strPostLength forHTTPHeaderField:@"Content-Length"];  
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.ext\"\r\n",fileName] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

//userfile -> 服务器代码中给出的变量名...

```
 [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithData:audioFile]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        // setting the body of the post to the reqeust
        [uRequest setHTTPBody:body];
    }

    NSURLConnection *uConn=[[NSURLConnection alloc] initWithRequest:uRequest delegate:self];  
    if (uConn)   
    {  
        NSLog(@"Failed to connect to url"); 
    } 
    uRequest = nil; 
```

我希望这将帮助您解决您的问题...

# java - 在java中连接Apache FTP服务器上的多个用户

> ID：10750111
> 
> 赞同：2
> 
> 时间：2012-05-25T07:18:26.363
> 
> 标签：java, apache, jakarta-ee, ftp-server

我在使用 apache ftp 服务器时遇到问题。对于一位用户来说，它对我来说工作正常。我想用不同的主目录连接 Apache FTP 服务器上的多个用户。

这是我连接一个用户的代码：

```
PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();
            userManagerFactory.setPasswordEncryptor(new SaltedPasswordEncryptor());
            UserManager um = userManagerFactory.createUserManager();
            BaseUser user = new BaseUser();
            user.setName("username");
            user.setPassword("password");
user.setHomeDirectory("myhomedirectory");
            List<Authority> auths = new ArrayList<Authority>();
            Authority auth = new WritePermission();
            auths.add(auth);
            user.setAuthorities(auths);
            um.save(user);
            FtpServerFactory serverFactory = new FtpServerFactory();
            ListenerFactory factory = new ListenerFactory();
factory.setPort(Integer.parseInt(2221);
            serverFactory.addListener("default", factory.createListener());
            // set user
            serverFactory.setUserManager(um);
            // start the server
            FtpServer server = serverFactory.createServer();
            server.start(); 
```

当我尝试创建另一个 BaseUser 并将其保存到 UserManager 时，它成功保存但不起作用，而是覆盖上次保存的用户 HOME_DIRECTORY，因此两个用户都指向同一个目录，这不应该发生。

我哪里错了？

# javascript - 缩放 HTML5 画布宽度保留 w/h 纵横比

> ID：10750125
> 
> 赞同：12
> 
> 时间：2012-05-25T07:19:10.250
> 
> 标签：javascript, html5-canvas, aspect-ratio

我有一个尺寸为 979X482px 的画布元素，我想让它拉伸以适应任何给定浏览器窗口的宽度，保持宽度/高度的纵横比为 1 比 1，我希望高度相对于宽度进行缩放画布。关于如何使用 javascript/jQuery 执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T04:28:17.533

```
 ctx.canvas.width = window.innerWidth;

 ctx.canvas.height = 3*window.innerWidth/4; 
```

或一些变化。`ctx`是上下文。边缘情况的 if 语句可能是必要的！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T07:34:12.327

首先将画布的宽度设置为 100%

```
$('#canvas').css('width', '100%'); 
```

然后根据其宽度更新其高度

```
$(window).resize(function(){
   $('#canvas').height($('#canvas').width() / 2.031);
}); 
```

2.031 = 979/482

但是你不应该像我一样附加到 $(window).resize ......这是一种不好的行为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T06:35:15.693

以前的所有答案都很棒，但它们不会按比例缩放画布上绘制的所有图像与新的画布大小。如果您使用的是动力学，我在这里做了一个函数 = [http://www.andy-howard.com/how-to-resize-kinetic-canvas-and-maintain-the-aspect-ratio/](http://www.andy-howard.com/how-to-resize-kinetic-canvas-and-maintain-the-aspect-ratio/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-27T13:52:44.643

我自己玩了一段时间。这个概念围绕着了解画布的宽度。您还需要确保所有画布资产也使用计算来发布依赖于浏览器的内容。我记录了我的代码，希望对您有所帮助，

```
<body>
// in style make your canvas 100% width and hight, this will not flex for all browsers sizes.

  <style>
    canvas{
      width: 100%;
      height:100%;
      position: relative;
    }
  </style>

  <canvas id="myCanvas"></canvas>

  <script>
    // here we are just getting the canvas and asigning it the to the vairable context
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');

    // no we get with of content and asign the same hight as the with. this gives up aspect ration 1:1.
    context.canvas.width = window.innerWidth;
    context.canvas.height = window.innerWidth;

    // If you want aspect ration 4:3 uncomment the line below.
    //context.canvas.height = 3 * window.innerWidth / 4;
  </script>
</body> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-25T07:45:07.717

试试这个

```
$('#canvas').css('width', $(window).width());
$('#canvas').css('height', $(window).height()); 
```

# c# - 使用 C++/CLI 而不是 C# 来包装（第三方）C 库 (dll) 有什么优势？

> ID：10750134
> 
> 赞同：2
> 
> 时间：2012-05-25T07:19:50.337
> 
> 标签：c#, c, dll, c++-cli, wrapper

我有一个需要从 C# 使用的第三方 C 库。系统的其余部分是用 C# 编写的，因此使用 C++/CLI 只是包装器的一个选项。

使用 C++/CLI 包装 C 库而不是 C# 有什么优势？创建 C# 包装器有什么好处吗？

这些库包含一些结构、一些枚举和许多函数。

编辑：是否可以在 C# 中使用 C 结构和枚举而不包装它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:19:20.153

使用 C++/CLI 的优点是您可以在同一个程序集中编写本机代码和托管代码。

使用 C++/CLI 时与 C 库交互更容易，您可以正常使用所有库，并且仍然公开完全托管的 .NET 接口或类。但当然 C++/CLI 增加了一些复杂性。

另一方面，在 C# 中，您需要重新声明所有结构并使用 DllImport 在 C# 中再次声明您的 C-Function。

我想说对于简单的互操作任务（比如一些函数和几个结构），使用 C# 和 PInvoke 就可以了。如果使用需要大量结构重定义、固定、转换等的完整 API，C++/CLI 可能是更好的选择。

# asp.net - asp.net 应用程序中的路径设置

> ID：10750135
> 
> 赞同：-1
> 
> 时间：2012-05-25T07:19:51.900
> 
> 标签：asp.net, filepath

我正在一个网站上工作（其中有两个以上的项目）。其他团队已经部分开发了这个站点的东西。在经历这个过程中，我在理解代码方面遇到了一些问题。

有一个链接正在导航到另一个站点的页面。给这个的网址是

[http://mywebsite.com/testsearch/nvalue/xxxxxxxxxxxxxxx](http://mywebsite.com/testsearch/nvalue/xxxxxxxxxxxxxxx)

通过此 url 打开的页面是 textpage.aspx，它位于 mywebsite 项目的主根目录，“nvalue”是来自上一个站点的一些文本（单击链接的位置）。xxxxxxxxxxxxxxx 是一些加密值。

上面的 url 看起来好像 testsearch 是一个没有这样的文件夹的文件夹。

我不明白上面的 url 是如何工作的，以及为什么它是这样给出的

谁能提供一些这方面的信息。

在此先感谢帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:26:06.183

url 必须在目标站点中被覆盖，这可以使用 URL 重写。

检查 web.config 或 global.asax 或 IIS 的 URL 重写规则，它必须直接存在于某个地方或使用 http 模块。

最好问问老开发者。

# mysql - 如何在我的在线网站中启用 mysql 端口？

> ID：10750136
> 
> 赞同：0
> 
> 时间：2012-05-25T07:19:54.860
> 
> 标签：mysql

为了从本地访问我的在线数据库...请帮助我如何在线启用端口，当我在防火墙中启用我的系统中的 mysql 端口时，我的系统 mysql 数据库可用于我的 LAN 连接中的所有系统。

但现在我想从我的系统访问我的在线数据库，我需要

> 启用我的网站 mysql 端口

如何访问

> 我网站的互联网防火墙

请帮助我，如何启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:35:38.273

请检查您的托管帐户，这可能是您将获得远程 sql 选项

因为您的网站来自`yahoo server`. 请检查您的托管帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:23:35.487

请提供更多详细信息，您使用的是 Apache、IIS 哪个服务器？

Web服务器和mysql都在同一台计算机上吗？

您是否启用了任何防火墙？

您是否尝试从脚本连接到 mysql？

Mysql默认端口是3306

看看这里，有一些示例连接字符串

[MySql 连接字符串](http://www.connectionstrings.com/mysql)

# javascript - 移除所有 从 ?

> ID：10750137
> 
> 赞同：44
> 
> 时间：2012-05-25T07:19:57.170
> 
> 标签：javascript, jquery

我`li`使用`ul`以下代码附加：

```
for (var i = 1; i <= len; i++) {
    li = document.createElement('li');

    element = document.createElement("img");
    element.setAttribute("src", path[i]);

    li.appendChild(element);
    root.appendChild(li);
} 
```

现在，我想通过单击按钮从列表中删除所有项目。这是我正在使用的，它不起作用：

```
while(root.hasChildNodes()){
    root.removeChild('li');
} 
```

条件为真，但内线`root.removeChild('li')`不起作用。我也尝试了这些选项：

```
root.removeChild(root li);
root.removeChild('#listid li');
root.removeChild('ul li');
... 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-25T07:23:36.807

如果您使用 jQuery，为什么不使用它的好处呢？

添加`<li>`元素：

```
$("<li><img src='"+path[i]+"'></li>").appendTo(root); 
```

删除所有`<li>`元素：

```
$(root).empty(); 
```

删除一个`<li>`元素：

```
$("li:eq(3)",$(root)).remove(); 
```

如果您使用的是原始 js，则可以使用：

```
document.getElementById("root").innerHTML = ""; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-25T07:23:54.080

您似乎正在尝试使用原始 JavaScript：

```
while( root.firstChild ){
  root.removeChild( root.firstChild );
} 
```

jQuery 只会让你慢下来。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-12-05T21:15:38.810

```
document.getElementById("the_ul_ID").innerHTML = ""; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-01-23T08:52:53.303

关于什么？

```
 var ul = root;
    ul.innerHTML = ''; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T07:20:48.870

```
$('#button').on('click', function() {
    $(root).empty();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T07:27:40.383

您需要在删除元素之前获取元素，因为本机 DOM 方法（无论如何大多数方法）不能像 jQuery 的方法一样在选择器字符串中传递。

```
var lis = root.getElementsByTagName("li");

for(var i = 0, il = lis.length;i<il;i++) {
    root.removeChild(lis[i]);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-14T03:26:09.380

您可以如何使用`replaceChildren()`来完成此操作：

```
root.replaceChildren(); 
```

# html - CSS：并排，相同高度

> ID：10750142
> 
> 赞同：1
> 
> 时间：2012-05-25T07:20:17.607
> 
> 标签：html, css, layout

我写了一个简单的并排小提琴：http: [//jsfiddle.net/CwSD6/7/](http://jsfiddle.net/CwSD6/7/)

当您在小提琴中更改视图部分的大小时，您会看到表格（.text.meta）不再与文本的顶部边​​框对齐。

是否有解决此问题的简单方法，使两个部分具有相同的高度？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:33:46.613

喜欢这里的小提琴[吗？](http://jsfiddle.net/CwSD6/8/)

我所做的只是在两者中删除这一`.text`行`.text.details`：

```
display: inline-block; 
```

并将其添加到两个类中：

```
float: left; 
```

# c# - WCF：减少交换的数据 GZipMessageEncodingBindingElement + 二进制内部编码器？

> ID：10750143
> 
> 赞同：1
> 
> 时间：2012-05-25T07:20:20.730
> 
> 标签：c#, .net, wcf, encoding, wcf-binding

我有一个由服务器和客户端应用程序组成的解决方案。

问题是大多数用户都是通过小型GPRS连接连接的，与服务器同步数据很慢，所以我正在寻找一些方法来减少交换数据的大小。

实际上，应用程序使用带有 TextMessage 编码的 HTTP 连接。

我看到我可以用二进制编码对其进行编码，这将节省我一些时间，而且我也刚刚看到有一个 gzip 编码器：http: [//msdn.microsoft.com/en-us/library/ms751458.aspx](http://msdn.microsoft.com/en-us/library/ms751458.aspx) .

在示例中，它有一个 textMessage 内部编码器，但我想知道是否有任何理由不使用二进制内部编码？

在 gzip 压缩之前进行二进制编码是否有悖于生产力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:45:42.593

您必须使用您的特定数据分析各种选项才能回答这个问题。例如，我对 protobuf-net 数据（一个不相关的二进制序列化器）做了很多工作，是否*压缩*取决于确切的数据。如果数据是大量基于文本的，或者有很多重复，那么即使在二进制序列化之后，它也可能会很好地压缩。但是，在许多情况下，尝试对数据进行 gzip 压缩会导致其大小*增加*。

所以; 这是非常具体的数据。

如果带宽是您的主要问题，我可能会说：检查 WCF 和 DataContractSerializer 之类的东西是否对您有所帮助。就我个人而言，我会看一些更小的东西（可能是 json 或 protobuf-net）和原始套接字或基本的 http 主体。这里有一些[带宽比较](http://www.servicestack.net/benchmarks/NorthwindDatabaseRowsSerialization.1000000-times.2010-02-06.html)。

# python - Py2exe 的 Python 脚本无法以 TIFF 格式保存图像

> ID：10750144
> 
> 赞同：0
> 
> 时间：2012-05-25T07:20:21.837
> 
> 标签：python, python-imaging-library, py2exe, tiff

我正在处理一个python脚本，它处理图像并将其从GIF图像转换并保存为扩展名为“.tif”的TIFF格式......

该脚本工作正常，甚至给了我正确的输出..

但是，当我使用 Py2exe（甚至尝试过 Cx-Freeze）将其转换为 exe 时，它​​无法以 TIFF 格式保存处理后的图像......它会引发以下错误：

> 文件“PIL\Image.pyc”，第 1423 行，保存 KeyError: '.tif'

保存图像的代码如下所示..

```
im_orig = Image.open(path1)
big = im_orig.resize((116, 56), Image.NEAREST)
ext = ".tif"
new=path.replace('.','') 
newpath=new+"input-NEAREST"+ext
newimage=big.save(newpath) 
```

我什至尝试如下更改上面的代码以避免密钥错误

```
im_orig = Image.open(path1)
big = im_orig.resize((116, 56), Image.NEAREST)
new=path.replace('.','') 
newpath=new+"input-NEAREST.tif"
newimage=big.save(newpath, "TIFF" ) 
```

当我将其作为脚本运行时，更改后的代码再次运行良好，

但是当我将脚本作为可执行文件运行时会引发错误！

我得到的错误是：

```
\PIL\Image.py", line 1429, in save
save_handler = SAVE[string.upper(format)] # unknown format
KeyError: 'TIFF' 
```

显然错误应该在这一行：

```
newimage=big.save(newpath, "TIFF" ) 
```

非常感谢解决此问题的任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:56:55.773

我认为这个问题与 PIL 中图像插件的延迟初始化有关。编译后，无法找到这些插件。解决方案是手动导入所需的插件。所以你需要的是

```
import TiffImagePlugin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T12:11:21.073

我遇到了同样的问题，除了使用 cx_freeze 而不是 py2exe 时。Raja Selvaraj 的解决方案为我解决了这个问题。

# c# - Linq 选择新对象

> ID：10750146
> 
> 赞同：45
> 
> 时间：2012-05-25T07:20:34.410
> 
> 标签：c#, linq, group-by

我有一个 linq 查询

```
var x = (from t in types select t).GroupBy(g =>g.Type) 
```

它按对象的类型对对象进行分组，因此我希望拥有一个包含所有分组对象及其计数的新对象。像这样的东西：

```
type1, 30    
type2, 43    
type3, 72 
```

更清楚地说：分组结果应该在一个对象中，而不是每个项目类型的对象中

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-25T07:25:51.673

阅读：该 LINQ 中的[**101 个 LINQ 示例**](https://docs.microsoft.com/en-us/samples/dotnet/try-samples/101-linq-samples/)-来自 Microsoft MSDN 站点的[分组运算符](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)

```
var x = from t in types  group t by t.Type
         into grp    
         select new { type = grp.key, count = grp.Count() }; 
```

forsingle 对象利用 stringbuilder 并附加它将执行或以字典形式转换它

```
 // fordictionary 
  var x = (from t in types  group t by t.Type
     into grp    
     select new { type = grp.key, count = grp.Count() })
   .ToDictionary( t => t.type, t => t.count); 

   //for stringbuilder not sure for this 
  var x = from t in types  group t by t.Type
         into grp    
         select new { type = grp.key, count = grp.Count() };
  StringBuilder MyStringBuilder = new StringBuilder();

  foreach (var res in x)
  {
       //: is separator between to object
       MyStringBuilder.Append(result.Type +" , "+ result.Count + " : ");
  }
  Console.WriteLine(MyStringBuilder.ToString()); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-03-24T17:56:07.297

这里的答案让我很接近，但在 2016 年，我能够编写以下 LINQ：

```
List<ObjectType> objectList = similarTypeList.Select(o =>
    new ObjectType
    {
        PropertyOne = o.PropertyOne,
        PropertyTwo = o.PropertyTwo,
        PropertyThree = o.PropertyThree
    }).ToList(); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-05-25T07:25:01.567

所有分组的*对象*，还是所有*类型*？听起来您可能只想：

```
var query = types.GroupBy(t => t.Type)
                 .Select(g => new { Type = g.Key, Count = g.Count() });

foreach (var result in query)
{
    Console.WriteLine("{0}, {1}", result.Type, result.Count);
} 
```

编辑：如果你*想要*它在字典中，你可以使用：

```
var query = types.GroupBy(t => t.Type)
                 .ToDictionary(g => g.Key, g => g.Count()); 
```

无需成对选择*然后*构建字典。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T07:28:32.807

```
var x = from t in types
        group t by t.Type into grouped
        select new { type = grouped.Key,
                     count = grouped.Count() }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T07:41:38.187

如果您希望能够对每种类型执行查找以获取其频率，那么您需要将枚举转换为字典。

```
var types = new[] {typeof(string), typeof(string), typeof(int)};
var x = types
        .GroupBy(type => type)
        .ToDictionary(g => g.Key, g => g.Count());
foreach (var kvp in x) {
    Console.WriteLine("Type {0}, Count {1}", kvp.Key, kvp.Value);
}
Console.WriteLine("string has a count of {0}", x[typeof(string)]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-31T02:38:08.867

这是一篇很棒的文章，介绍了从 LINQ 查询创建新对象所需的语法。

但是，如果填充对象字段的分配不仅仅是简单的分配，例如，将字符串解析为整数，并且其中一个失败，则无法调试。您不能在任何单独的分配上创建断点。

如果你把所有的赋值都移到一个子程序中，并从那里返回一个新对象，并试图在那个程序中设置一个断点，你可以在那个程序中设置一个断点，但是断点永远不会被触发。

所以而不是：

```
var query2 = from c in doc.Descendants("SuggestionItem")
                select new SuggestionItem
                       { Phrase = c.Element("Phrase").Value
                         Blocked = bool.Parse(c.Element("Blocked").Value),
                         SeenCount = int.Parse(c.Element("SeenCount").Value)
                       }; 
```

或者

```
var query2 = from c in doc.Descendants("SuggestionItem")
                         select new SuggestionItem(c); 
```

我改为这样做：

```
List<SuggestionItem> retList = new List<SuggestionItem>();

var query = from c in doc.Descendants("SuggestionItem") select c;

foreach (XElement item in query)
{
    SuggestionItem anItem = new SuggestionItem(item);
    retList.Add(anItem);
} 
```

这让我可以轻松调试并找出哪个作业失败了。在这种情况下，XElement 缺少我正在解析以在 SuggestionItem 中设置的字段。

在为新的库例程编写单元测试时，我在 Visual Studio 2017 中遇到了这些问题。

# iphone - 在设备上安装给出错误：命令 /usr/bin/codesign 失败，退出代码为 1

> ID：10750154
> 
> 赞同：0
> 
> 时间：2012-05-25T07:20:53.893
> 
> 标签：iphone, xcode, keychain

我参考这个链接 [Command /usr/bin/codesign failed with exit code 1](https://stackoverflow.com/questions/2017756/command-usr-bin-codesign-failed-with-exit-code-1) and [Xcode Error: Command /usr/bin/codesign failed with exit code 1](https://stackoverflow.com/questions/7071691/xcode-error-command-usr-bin-codesign-failed-with-exit-code-1) but not find solution。我花了很多时间来解决和尝试这个问题，但我无法解决它。

错误如下。

`/Users/macmini2/Library/Developer/Xcode/DerivedData/CliniCalc-euqpjsnetzgblefamkvsxhinzomp/Build/Products/Debug-iphoneos/CliniCalc.app: The operation was cancelled by the user. Command /usr/bin/codesign failed with exit code 1`

我使用 Xcode 5.1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T07:34:26.010

我解决了。我刚刚重新启动我的 Mac 并修复了错误。感谢您的帮助

# jquery - jquery datepicker minDate 在 IE 中不起作用

> ID：10750155
> 
> 赞同：0
> 
> 时间：2012-05-25T07:21:00.183
> 
> 标签：jquery, jquery-ui

```
$("#s_shipDate_from").datepicker({
        dateFormat : "yy-mm-dd",
        showButtonPanel: false,
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        onSelect: function (dateText, inst) {
            if($('#s_shipDate_to').val()!="")
            {
                var fromDate = new Date(dateText);
                var toDate = new Date($('#s_shipDate_to').val());
                $('#s_shipDate_to').datepicker("option", 'minDate', fromDate);

                if(toDate<fromDate)
                {
                    alert("'TO' date must be more than 'FROM' date.");
                    $('#s_shipDate_to').datepicker("setDate", fromDate);
                }
            }
        }
    })
    $("#s_shipDate_to").datepicker({
        dateFormat : "yy-mm-dd",
        showButtonPanel: false,
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        beforeShow : function (input, inst) {
            if($('#s_shipDate_from').val()!="")
            {
                var fromDate = new Date($('#s_shipDate_from').val());
                $('#s_shipDate_to').datepicker("option", 'minDate', fromDate);
            }
        },
        onSelect: function (dateText, inst) {
            if($('#s_shipDate_from').val()!="")
            {
                var fromDate = new Date($('#s_shipDate_from').val());
                var toDate = new Date(dateText);

                if(toDate<fromDate)
                {
                    alert("'TO' date must be more than 'FROM' date.");
                    $('#s_shipDate_to').datepicker("setDate", fromDate);
                }
            }
        }
    }) 
```

我有日期字段`From`，`To`使用 jquery-ui datepicker。我编写了上面的代码，因此`To`日期不能超过`From`日期，它在 FF/chrome 中效果很好，但在 IE(8) 中不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T07:54:44.570

检查你的

```
<script type="text/javascript"></script> 
```

如果它在“text/javascript”之后包含空格，则标记 IE 将不会运行脚本

# linux - 主机：/etc/resolv.conf 解析失败

> ID：10750156
> 
> 赞同：10
> 
> 时间：2012-05-25T07:21:04.860
> 
> 标签：linux, parsing, dns, host, nameservers

我收到一个错误，我看不到会发生什么，请看看你是否能发现问题所在。

每当我使用“主机”命令时，都会收到此错误：

```
xavi@cobalto:~$ host www.guparty.com
host: parse of /etc/resolv.conf failed 
```

我认为语法是正确的：

```
xavi@cobalto:~$ cat /etc/resolv.conf
search dsitelecom.com
nameserver 8.8.8.8 8.8.4.4 
```

每个人都可以读取权限：

```
xavi@cobalto:~$ ls -l /etc/resolv.conf
-rw-r--r-- 1 root root 49 2011-10-30 12:02 /etc/resolv.conf 
```

可能这是一件愚蠢的事情，但我无法理解。你看那里有什么不对吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T07:31:41.220

检查您的语法，您需要在每行定义一个名称服务器`/etc/resolv.conf`

```
search dsitelecom.com
nameserver 8.8.8.8 
nameserver 8.8.4.4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-14T11:31:33.267

当错误地将 *nix EOL ("\n") 替换为 windows ("\r\n") 时，我看到了同样的错误。解决方案：`dos2unix filename`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T09:36:06.827

我有类似的问题，但这样做并开始工作：

```
# mv resolv.conf resolv.conf.old
# cat resolv.conf.old
search example.com
domain example.com
nameserver 11.22.33.44
nameserver 2000::1
# echo "search example.com" >>resolv.conf
# echo "domain example.com" >>resolv.conf
# echo "nameserver 11.22.33.44" >>resolv.conf
# echo "nameserver 2000::1" >>resolv.conf 
```

这些地址只是示例，但结果是有效的。为什么要复制 resolv.conf 是你得到一个原始的副本。然后当你打印出来时，你不必记住resolv.conf中的所有内容。并且当您使用回声制作文件时，您可以确定没有多余的字符会造成麻烦。因此，将所有名称服务器行回显到那里。

# excel - Excel - 源代码中的一行代码

> ID：10750162
> 
> 赞同：0
> 
> 时间：2012-05-25T07:21:34.423
> 
> 标签：excel, csv, delimiter

全部

我正在尝试更改 csv 文件中的“分隔符”，以便可以将其作为 excel 文件打开。

我知道分隔列的分隔符是';'。但是新行的分隔符是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:14:43.927

对于 windows 机器：`vbCrLf`或`Chr(13) & Chr(10)`
回车然后换行

如果您要在多个平台上使用此代码，那么`vbNewLine`将是平台所需的任何内容（windows/unix/mac/whatever）

# db2 - iReport 到 DB2 连接 ERRORCODE=-4499, SQLSTATE=08001

> ID：10750167
> 
> 赞同：6
> 
> 时间：2012-05-25T07:21:47.420
> 
> 标签：db2, ireport

我正在使用 Jasper iReport。当我尝试连接到 IBM DB2 时，出现错误：“Permission denied: ERRORCODE=-4499, SQLSTATE=08001”

我正在使用与我也使用的 Razor 相同的驱动程序进行连接，并且它工作正常（相同的设置、用户名、密码等）。

最近开始出现这个问题。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T07:52:15.770

请确保中间的任何防火墙和/或代理服务器都已配置为允许您的请求通过。我们遇到了类似的错误，结果是我们的 appserver 和 db2 之间的防火墙没有打开所需的端口。

# linux - 如何使用 wget 或其他工具在 linux 中完全下载网站的子域？

> ID：10750168
> 
> 赞同：5
> 
> 时间：2012-05-25T07:21:52.473
> 
> 标签：linux, download, wget, web-crawler

我想下载[http://source.yeeyan.org](http://source.yeeyan.org)的所有段落。它有很多页面。eg [http://source.yeeyan.org/?page=22202](http://source.yeeyan.org/?page=22202) 那么如何使用 wget 或者 linux 中的其他工具下载下来呢？目前，我使用以下参数，但它不起作用。

wget --recursive --no-clobber --page-requisites --html-extension --convert-links --restrict-file-names=windows --domains yeeyan.org --no-parent source.yeeyan.org

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:57:51.663

作为 wget 的替代方案，还有[httrack](http://www.httrack.com/)，其唯一目的是复制网站，因此可能更适合您。它也有一个图形用户界面。

# php - 我无法在 symfony 2 中获取发布的值

> ID：10750169
> 
> 赞同：0
> 
> 时间：2012-05-25T07:21:55.707
> 
> 标签：php, symfony, doctrine, doctrine-orm

我正在使用 Symfony2 和 Doctrine 2。

我在 Symfony2 中创建了一个表单。但我无法在控制器中获取发布的值。我用来获取值的语法是：

```
$block = $request->request->get('txtblock'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:09:51.767

您可以尝试打印 $_POST 的内容。这不是 Symfony 的设计方式，但如果 $_POST 也是空的，我想问题出在您的表单提交上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:36:52.470

您应该尝试使用 a `var_dump()`on `$request->request->all()`。这样，您可以调试已发送的内容。很可能，您的表单/输入字段具有不同的名称。

# wcf - Can you export protocol types to instal on the live enviroment?

> ID：10750173
> 
> 赞同：0
> 
> 时间：2012-05-25T07:22:10.770
> 
> 标签：wcf, biztalk, biztalk-2010

We have successfully setup our first interface on our development environment. when we try to put this live, we get an error stating that "Protocol type "WCF-Custom" not found.". At first we tought this was due to the adapter not being installed on the live but we assured ourselves that this is the case. the only diffrence between the two enviroments now is the fact that we deployed to the test one and are importing the exported msi on the live. Is there a way to also import this protocol?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:16:58.307

This is most often caused by not having the WCF Adapter installed. It may be worthwhile to go and and uninstall and reinstall it.

Note also that you have to both **import** the MSI file into BizTalk and **run** the MSI file on the live server.

Lastly, verify in the BizTalk Server Administration Console that the WCF-Custom adapter is assigned to a valid BizTalk host, which has a host instance assigned to it. The adapter needs to have a handler for both send and receive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:43:53.747

Make sure the adapter is visible under Platform Settings - Adapter. If it is not there, add it.(After running all the MSI's to install the adapters.) This is what I had to do to get rid of this error. (Except mine said it could not find WCF-SQL in stead of WCF-Custom.)

# c - %64[^ C 中的说明符

> ID：10750175
> 
> 赞同：7
> 
> 时间：2012-05-25T07:22:14.740
> 
> 标签：c

```
sscanf(line, "%d %64[^\n", &seconds, message); 
```

**%64[^**的意思是- 最多 64 个字符？它应该与 GNU C 编译器一起使用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T07:23:19.010

它的意思是“最多读取 64 个字符或在到达换行符时停止，以先到者为准”。它由标准指定，因此所有标准库都必须支持它。

> C11 7.21.6.2
> 
> `[`匹配一组预期字符（扫描集）中的非空字符序列。[...] 转换说明符包括格式字符串中的所有后续字符，直到并包括匹配的右括号 (])。
> 
> 括号之间的字符（扫描列表）组成扫描集，除非左括号之后的字符是一个抑扬符 (^)，在这种情况下，扫描集**包含所有未出现在抑扬符**和右括号之间的扫描列表中的字符。

如评论中所述，可能需要匹配`]`来分隔扫描列表。**不需要说明****符`s`**。

# java - 分隔整数中的数字（用户输入）

> ID：10750179
> 
> 赞同：0
> 
> 时间：2012-05-24T23:38:02.863
> 
> 标签：java

如何输入像“23423”这样的数字并像“2 3 4 2 3”一样输出？以及如何使用户不能输入少于或多于 5 位的数字？（您的帮助将不胜感激。因为我正在学习 Java，所以我只需要你们的提示。期待学习新的东西。）

这是我到目前为止所拥有的：

```
 Scanner input = new Scanner(System.in);

    int value1, value2, value3, value4, value5;

    System.out.print("Enter a number: ");
    value1 = input.nextInt();

    System.out.print("Enter a number: ");
    value2 = input.nextInt();

    System.out.print("Enter a number: ");
    value3 = input.nextInt();

    System.out.print("Enter a number: ");
    value4 = input.nextInt();

    System.out.print("Enter a number: ");
    value5 = input.nextInt();

    System.out.printf(" %d " + " %d " + " %d " + " %d " + " %d\n ", value1, value2, value3, value4, value5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:47:46.703

可以用循环重做：使循环读取输入 5 次，每次将第 i 个读取值放在数组的第 i 个位置。

然后，要打印它，您可以使用一个`for`循环来打印数组的每个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:21:53.997

如果您真的希望他们输入一个 5 位数字，您将不得不对用户输入进行验证，然后在输入无效时给出错误。如果要求您的 5 位数字的第一个数字永远不为零，您可以获取一个 int 然后检查它是否大于 9999 且小于 100000。否则将其作为字符串并检查长度，然后在验证后将其转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:35:35.513

在我看来，最合适的解决方案是一个 while 循环，您可以在其中构建一个字符串并添加一个空格。在 while 处理之后，您应该消除最后一个空格。类似以下内容应该适合您的需求。我使用了 apache commons 项目，但您也使用了自己的类。

```
 Scanner scanner = new Scanner(System.in);

    String str = "";
    while (scanner.hasNext()) {
        String next = scanner.next();
        if (next.equals("E")) {
            break;
        }

        if (NumberUtils.isNumber(next)) {
            for (int i = 0; i < next.length(); i++) {
                str += Integer.valueOf(next.substring(i, i + 1)) + " ";
            }
        }
    }
    str = str.substring(0, str.length() - 1);

    System.out.println("your number: " + str); 
```

使用“E”可以退出循环。

# xml - 从 str:tokenize() 循环多个序列

> ID：10750184
> 
> 赞同：3
> 
> 时间：2012-05-25T07:22:58.227
> 
> 标签：xml, xslt, xpath

我有来自某些硬件的类似传入 XML：

```
<invoice>
  <field name="item">Item 1;Item 2;Item 3</field>
  <field name="price">32.0;192.2;12.0</field>
  <field name="quantity">1;4;2</field>
</invoice> 
```

我需要转换类似于：

```
<invoice>
  <item>
    <desc>Item 1</desc>
    <price>32.0</price>
    <quantity>1</quantity>
  </item>
  <item>
    <desc>Item 1</desc>
    <price>192.0</price>
    <quantity>4</quantity>
  </item>
  <item>
    <desc>Item 3</desc>
    <price>12.0</price>
    <quantity>2</quantity>
  </item>     
</invoice> 
```

目前我已经尝试过 str:tokenize()，但主要问题是构建一个简单的循环。我对 XSLT 的了解非常基础，我正在进行的工作也差不多：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:str="http://exslt.org/strings">
<xsl:output method="xml" indent="yes" version="1.0" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:template match="inovice">
    <xsl:param name="separator" select="';'"/>
    <xsl:param name="desc" select="str:tokenize(field[@name='item'],$separator)"/>
    <xsl:param name="price" select="str:tokenize(field[@name='price'],$separator)"/>
    <xsl:param name="quantity" select="str:tokenize(field[@name='quantity'],$separator)"/>
    <xsl:param name="count" select="count($desc)"/>
    <!-- some loop goes here -->
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:57:26.893

一个简单的 XSLT 2.0 样式表，它遍历所有项目并根据当前位置选择相应的价格/数量，如下所示：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="invoice">
    <xsl:variable name="fields" select="field"/>
    <invoice>
      <xsl:for-each select="tokenize(field[@name='item'], ';')">
        <xsl:variable name="pos" select="position()"/>
        <item>
          <desc>
            <xsl:value-of select="."/>
          </desc>
          <price>
            <xsl:value-of select="tokenize($fields[@name='price'], ';')[position()=$pos]"/>
          </price>
          <quantity>
            <xsl:value-of select="tokenize($fields[@name='quantity'], ';')[position()=$pos]"/>
          </quantity>          
        </item>
      </xsl:for-each>
    </invoice>
  </xsl:template>
</xsl:stylesheet> 
```

如果您想将 XSLT 1.0 与 EXSLT 扩展模块*字符串*一起使用，则只需稍微修改样式表：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:str="http://exslt.org/strings"
  extension-element-prefixes="str">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="invoice">
    <xsl:variable name="fields" select="field"/>
    <invoice>
      <xsl:for-each select="str:tokenize(field[@name='item'], ';')">
        <xsl:variable name="pos" select="position()"/>
        <item>
          <desc>
            <xsl:value-of select="."/>
          </desc>
          <price>
            <xsl:value-of select="str:tokenize($fields[@name='price'], ';')[position()=$pos]"/>
          </price>
          <quantity>
            <xsl:value-of select="str:tokenize($fields[@name='quantity'], ';')[position()=$pos]"/>
          </quantity>          
        </item>
      </xsl:for-each>
    </invoice>
  </xsl:template>
</xsl:stylesheet> 
```

# java - overflowToDisk 在 ehcache 中是如何工作的？

> ID：10750185
> 
> 赞同：3
> 
> 时间：2012-05-25T07:23:06.623
> 
> 标签：java, caching, ehcache

> overflowToDisk：设置当内存存储达到 maxInMemory 限制时元素是否可以溢出到磁盘。

据我了解，如果 memoryStoresSize 未达到 maxElementsInMemory，它将不会写入磁盘。但好像不是这样的。

我有一个简单的缓存如下：

```
<cache name="cache" maxEntriesLocalHeap="100000" eternal="true"  
 overflowToDisk="true" statistics = "true">
    <terracotta clustered="false"/>
</cache> 
```

我在从缓存中获取值时打印了统计信息。

```
System.out.println("memory size:" + cache.getMemoryStoreSize());
System.out.println("disk size:" + cache.getDiskStoreSize()); 
```

但是输出显示磁盘大小不是 0，即使内存大小非常小于 maxElementsInMemory。

```
memory size:2
disk size:186
memory size:2
disk size:186
memory size:3
disk size:186
memory size:3
disk size:186 
```

甚至内存大小也小于磁盘大小。这怎么可能发生？或者我该如何配置它以按预期工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T08:45:23.510

自 2.6 版以来，Ehcache 已更改其存储模型 - 有关详细信息，请参阅[此答案](https://stackoverflow.com/a/23358936/18591)。

因此，您所看到的完全正常。

出于兼容性原因，未重命名旧配置选项 - 尽管我同意描述应该是。查看有关磁盘支持的缓存的[最新文档](http://ehcache.org/generated/2.9.0/html/ehc-all/#page/Ehcache_Documentation_Set%2Fto-persist_configuring_persistance_and_restart.html)以了解推荐的配置方式。

# ruby-on-rails - 为什么 :reject_if 不能以嵌套形式工作？

> ID：10750193
> 
> 赞同：0
> 
> 时间：2012-05-25T07:23:40.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 :reject_if 拒绝我的字段以保存在 DB 中。这是我的代码

```
accepts_nested_attributes_for :profiles,
    :reject_if => proc { |a| a[:name] == "Name"},
    :allow_destroy => true 
```

我正在使用嵌套形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:54:17.440

你有 attr_accessible 吗？

如果是这样，您需要包括

```
 attr_accessible :profiles_attributes 
```

# ajax - 无法根据传递参数显示数据？

> ID：10750194
> 
> 赞同：0
> 
> 时间：2012-05-25T07:23:43.250
> 
> 标签：ajax, spring-mvc, jquery-mobile

我很难根据参数传递显示数据。下面是我基于序列的代码。我的问题是，当调试时，它传递给第二页 jsp 的控制器，它检索参数 courseId，但是当它没有在 jsp 和获取数据的控制器中显示数据时。我知道我的问题很长，但请帮助我。第一页将显示可用课程列表。当用户点击课程时，它将进入控制器

```
@RequestMapping(value="MregisteredClassesDetail.phone")
public final ModelAndView registeredClassesDetail(final HttpServletRequest request,
        final HttpServletResponse response,HttpSession session) {
    ModelAndView mav = new ModelAndView();
    log.debug("Registered Classes Detail:");
    log.debug("CourseId:"+request.getParameter("courseId"));
    request.setAttribute("page",  AlteraCommonConstant.DEFAULT_PAGE);
    request.setAttribute("row",  AlteraCommonConstant.DEFAULT_PAGE_SIZE);
    request.setAttribute("courseId","courseId");
    System.out.println(">>>>>>>>>>>>>>>> Registered Classes Detail");
    mav.setViewName("mobile/MregisteredClassesDetail.jsp");
    return mav;
} 
```

然后它将转到jsp第二页..

```
$('#MregisteredClassesDetails').live('pageshow', function(){
    var rowInput = "1";
    var pageInput = "1";
    var idInput = document.getElementById("courseId");

    $.ajax({
     url: '${pageContext.request.contextPath}/getRegisteredClassesDetails.html',
     data: ( {rows : rowInput , page : pageInput, courseId : idInput}),
     type: 'POST',

     success: function(json_results){
       $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
       listItems = $('#list').find('ul');
       html  = '#################################################################################################';
       html += '<h1>' +json_results.courseName+'</h1>';
       html += '#################################################################################################';
       html += '<br> Registration #    : '+json_results.regNo+'</br>';
       html += '<br> Status            : '+json_results.regStatus+'</br>';
       html += '<br> Location          : '+json_results.courseLoc+'</br>';
       html += '<br> Start Date        : '+json_results.startDate+'</br>';
       html += '<br> Registered Person : '+json_results.fullName+'</br>';
       html += '<br> Rate              : '+json_results.rate+'</br>';
       listItems.append(html);

       $('#list ul').listview();
       $.mobile.pageLoading(true);      
    }
});
}); 
```

和html

```
<form name="ViewClassForm" method="POST">
<input name="courseId" type="hidden" value="${MregisteredClassesDetail.courseId}"/>
</form>
<div data-role="page" id="MregisteredClassesDetails" data-add-back-btn="true">
<div data-role="header" data-position="fixed" data-theme="b"><h1></h1>
</div><!-- /header -->
<div data-role="content">
    <div id="courseDetail"> 
        <ul data-role="listview" data-inset="true" id="list"></ul>
    </div> 
</div><!-- /content --> 
```

然后它将返回控制器以检索数据..

```
@RequestMapping(value = "getRegisteredClassesDetails.html", method = RequestMethod.POST)
public @ResponseBody CustomPagedResultResponse getRegisteredClassesDetails(
        HttpServletRequest request,HttpSession session) {
    CustomPagedResultResponse paging = new CustomPagedResultResponse();

    log.debug("getRegisteredClassesData.html:");  
    log.debug("rows:"+request.getParameter("rows"));
    log.debug("courseId:"+request.getParameter("courseId"));
    log.debug("page:"+request.getParameter("page"));
    log.debug("sidx:"+request.getParameter("sidx"));
    log.debug("sord:"+request.getParameter("sord"));

    String page = request.getParameter("page");
    int pageSize = new Integer(request.getParameter("rows")).intValue();
    StringBuffer condition = new StringBuffer();
    if (request.getParameter("sidx") != null && !request.getParameter("sidx").equals("")) {
        condition.append(request.getParameter("sidx"));
        condition.append(" ");
    }
    if (request.getParameter("sord") != null && !request.getParameter("sord").equals("")) {
        condition.append(request.getParameter("sord"));
    }
    log.debug("condition: " + condition.toString());
       log.debug("page:"+page);
       log.debug("row:"+pageSize);

    String courseType = "%";

    UserProfile userProfile = (UserProfile)session.getAttribute("userProfile");

    //////////////////////////////////////////////////////
    // Retrieve  Total Record first
    ///////////////////////////////////////////////////////
    RegisteredClassesSearch search = new RegisteredClassesSearch();
    search.setLanguage("ENU");
    search.setLoginRowId(userProfile.getContactRowId());
    search.setRegNo(null);
    search.setAction("1");
    search.setCourseType(courseType);
    search.setPage(null);
    search.setPageSize(null);
    search.setOrderBy(null);

    Integer recordCount = registeredClassesService.getTotalAccounts(search);
    log.debug("*****Training Controller Total record:"+recordCount);
    System.out.println("*****Training Controller Total record:"+recordCount);

    //////////////////////////////////////////////////////
    // Retrieve  Total Record first
    ///////////////////////////////////////////////////////
    if(recordCount>0){

        System.out.println("******** Login Id:"+userProfile.getContactRowId());
        System.out.println("******** Course Type:"+courseType);
        System.out.println("******** Page Size:"+pageSize);
        System.out.println("******** Page:"+page);
        System.out.println("******** Order By:"+condition);

        List<RegisteredClassesTest> registeredClassesView = registeredClassesService.getAccounts(search);

        paging.setRows(registeredClassesView);
    }else{
        paging.setRows(null);
    }

    paging.setRecords(String.valueOf(recordCount));
    paging.setPage(page);
    int total = recordCount % pageSize == 0 ? recordCount / pageSize : recordCount / pageSize + 1;
    paging.setTotal(String.valueOf(total));

    return paging;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:25:20.243

我认为在这种情况下你有一个错字。

在您的第一个控制器中，您将在请求参数中设置课程 ID，如下所示。

```
request.setAttribute("courseId","courseId"); 
```

在我看来应该是

```
request.setAttribute("courseId",some int value); 
```

您没有在**courseId**中添加一些实际值。

希望这对您有所帮助。

干杯。

# selenium - 使用 selenium 如何移动鼠标指针？

> ID：10750195
> 
> 赞同：0
> 
> 时间：2012-05-25T07:23:47.593
> 
> 标签：selenium, cucumber, watir-webdriver

尝试在文本区域中的一行文本周围移动鼠标指针表单时遇到问题。

**我的问题的详细信息：**

我在文本区域中有一行文本，并且该文本区域包含用于外部链接的“降价”选项卡。当我单击该降价选项卡时，我`[](http://)`在文本区域内得到一行。鼠标指针目前在`[]`大括号内，我在那里写了一些东西。所以当前指针位置在`[]`大括号内，如果我在里面写“Googel”，那么它看起来像 `[Google | ](http://)`

**我的问题是：**

我怎样才能移动那个指针来写东西`(http://)`

像这样`[Google](http://www.google.com)`

# python - 在 Selenium WebDriver 中设置加载页面的真正超时？

> ID：10750198
> 
> 赞同：18
> 
> 时间：2012-05-25T07:24:03.240
> 
> 标签：python, selenium, webdriver, selenium-webdriver, wait

我正在测试一个有很多代理的网站，问题是其中一些代理非常慢。因此，我的代码时不时地卡在加载页面上。

```
from selenium import webdriver

browser = webdriver.Firefox()
browser.get("http://example.com/example-page.php")
element = browser.find_element_by_id("someElement") 
```

我已经尝试了很多类似`explicit waits`或的东西，`implicit waits`并且已经搜索了很长一段时间，但仍然没有找到解决方案或解决方法。似乎没有什么真正影响 page loading line `browser.get("http://example.com/example-page.php")`，这就是为什么它总是卡在那里。

有人对此有解决方案吗？

**更新1：**

JimEvans 的回答解决了我之前的问题，[在这里](http://code.google.com/p/selenium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=687)你可以找到这个新功能的 python 补丁。

**新问题：**

```
browser = webdriver.Firefox()
browser.set_page_load_timeout(30)

browser.get("http://example.com/example-page.php")

element = browser.find_element_by_id("elementA")
element.click() ## assume it's a link to a new page http://example.com/another-example.php

another_element = browser.find_element_by_id("another_element") 
```

正如您所看到的，`browser.set_page_load_timeout(30)`仅影响`browser.get("http://example.com/example-page.php")`这意味着如果此页面加载超过 30 秒，它将抛出超时异常，但问题是它无法控制页面加载，例如`element.click()`，尽管它不会阻塞直到新页面完全加载up，`another_element = browser.find_element_by_id("another_element")`是新的麻烦，因为要么`explicit waits`或`implicit waits`将等待整个页面加载，然后再开始寻找该元素。在某些极端情况下，这甚至需要**HOURS**。我能做些什么呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T11:34:24.567

您可以尝试使用库中引入的页面加载超时。它的实现不是通用的，但它通过.NET 和Java 绑定确定地暴露出来，并且已经在现在和Firefox 驱动程序中实现，并且在即将到来的2.22 中的IE 驱动程序中实现。在 Java 中，要将页面加载超时设置为 15 秒，设置它的代码如下所示：

```
driver.manage().timeouts().pageLoadTimeout(15, TimeUnit.SECONDS); 
```

如果它没有在 Python 语言绑定中公开，我相信维护者会急切地接受实现它的补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T05:51:21.413

您仍然可以通过等待预期元素的存在（不等待可见性）5-8 秒然后发送 window.stop() JS 脚本（停止加载更多元素）来加速脚本执行，而无需等待整个页面加载或在 5-8 秒后捕获页面加载超时异常，然后调用 window.stop()

因为如果页面没有采用延迟加载技术（仅加载可见元素并仅在滚动后加载其余元素）它会在返回 window.ready 状态之前加载每个元素，因此如果任何元素需要更长的时间来渲染，它会变慢。

# android - Android 4.0 版本如何实现操作栏？

> ID：10750202
> 
> 赞同：2
> 
> 时间：2012-05-25T07:24:11.573
> 
> 标签：android, android-actionbar

我实现了一个适用于 2.1 及更高版本的应用程序。但是我的应用程序具有退出应用程序的菜单功能。我在 Ice Cream Sandwich（ICS，4.0 版）设备中安装了该应用程序，它运行良好。但是 ICS 没有菜单按钮——取而代之的是操作栏。我对这个概念很陌生。我想将它集成到我的应用程序中。我试过了，但我没有成功。

为此，我遵循以下步骤：

1.  `android:targetSdkVersion="11"`在 Android 清单中。
2.  `android:showAsAction="ifRoom|withText"`--> 添加到 menu.xml（位于菜单文件夹中），但出现以下错误：

> 在包“android”中找不到属性“showAsAction”的资源标识符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:30:04.263

您应该从一个有效的[选项菜单](http://developer.android.com/guide/topics/ui/menus.html)实现开始。在 1.x 或 2.x 模拟器上对其进行测试以确保其正常工作。然后将您的设置`targetSdkVersion`为 >=11（如果还没有）并验证菜单是否出现在>=3.0 的[ActionBar中。](http://developer.android.com/guide/topics/ui/actionbar.html)*只有运行 Android 3.0 或更高版本的设备或模拟器才会绘制操作栏。旧版本仍然使用选项菜单。* 一旦菜单出现在 ActionBar 中，您就可以开始将`showAsAction`属性添加到菜单 XML 中的各个项目。

设置`targetSdkVersion`：

打开您的项目属性，选择 Android，然后选择一个 Android SDK 来链接您的项目。对于 Project 属性和您的[Android Manifest](http://developer.android.com/guide/topics/fundamentals.html#Manifest) `targetSdkVersion`，我建议使用可用的最新 SDK。

![说明设置 targetSdkVersion 的屏幕截图](../Images/2dbc735524c9e20f4de7156f0c9b68a8.png)

`minSdkVersion`定义应用程序将在其上运行的最低 Android 版本。 `targetSdkVersion`定义了应用程序在构建时知道的最高 Android 版本——哪些类和方法可用，定义了哪些常量等。它可以在较新的版本上运行，但它不知道在`targetSdkVersion`.

有关[API 级别](http://developer.android.com/guide/appendix/api-levels.html)的更多信息。

如果您希望 ActionBar 在 Android <3.0 上显示，请基于[Action Bar Sherlock](http://actionbarsherlock.com/)或SDK 中的[Action Bar Compatibility示例制作一个项目。](http://developer.android.com/resources/samples/ActionBarCompat/index.html)但是，在您对 >= 3.0 中的 ActionBar 感到满意之前，请不要尝试此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:50:54.480

[你可以在这里](http://www.vogella.com/articles/Android/article.html#menu_tutorial)找到一个很好的示例代码。

# jquery - 每当将元素添加到 DOM 时向元素添加类

> ID：10750204
> 
> 赞同：1
> 
> 时间：2012-05-25T07:24:15.360
> 
> 标签：jquery, css, timeout

我有以下代码`document.ready()`：

```
$(document).ready(function(){

   $('img').addClass('myClass');

}); 
```

现在，如果我一次**加载所有图像**，则此代码可以正常工作，然后此函数**将****myClass**添加到它们（所有 img）。但是这里发生的是，每当在 DOM 中添加带有**img** like标签的新元素时`<img...../>`（通过 ajax 或 javascript），它的类不会被添加..它是 JQuery 的限制还是它通过某些插件或 api 提供的，或者我们必须手动完成。

我希望每当在 DOM 中添加新的***img*****时，它的类都会设置为myClass**，

***PS***现在我使用 setTimeout() 像这样在 2 秒后调用一个函数，将类添加到我的图像中：

```
setTimeout(function(){
  $('img').addClass('actAsButton');
},2000); 
```

但这是正确的做法吗？事实上，如果我们在 2 秒后在 DOM 中添加任何新内容，则此代码也会失败，我可以使用**setInterval**代替，但这在内存使用方面非常昂贵。请说明一下。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:25:38.600

```
$('img').load(function() {
  $(this).addClass('actAsButton');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:18:31.940

在您的情况下，`addClass`它不起作用，因为 img 元素在`$(document).ready()`被触发时不存在。S0，您应该为此使用以下代码。

```
$('img').live('load', function () {
    $('img').addClass('actAsButton');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:20:42.750

```
$(document).on('img', 'load', function() {
    $(this).addClass('actAsButton');
}); 
```

# c# - 这个还是基地？在哪种情况下，我们可以使用 base 代替 this 吗？

> ID：10750205
> 
> 赞同：1
> 
> 时间：2012-05-25T07:24:18.867
> 
> 标签：c#, .net, inheritance

在下面的代码中

```
// MVVM Views part class
public partial class DashBoard : UserControl
{
    public DashBoard()
    {
        InitializeComponent();
        this.DataContext = new DashBoardViewModel();
    }
} 
```

我们可以使用 base.DataContext 代替 this.DataContext。在哪种情况下，我们可以使用 base 代替 this 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:26:36.137

通常使用起来会更清楚`this`。您通常只指定`base`何时要显式调用基类构造函数或重写方法或属性的基实现。

使用`base.DataContext`会*起作用*，但它可能意味着这`this.DataContext`意味着不同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:27:28.307

您用于`this`访问在当前类中定义的方法（或超类，如果它不在当前类中）。您用于`base`访问超类或更高级别中的方法。在这种情况下，您可以使用其中任何一个（或者正如 Marc 上面指出的那样不使用）。

我更喜欢发射，`this`除非它（很少）需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:40:15.010

添加到其他人所说的话，基地。当您使用 overrides 或 new 关键字覆盖了基类中的某些内容时使用，您需要使用 base 来访问原始方法。

```
class a
{
   public virtual void method1()
   {
   }

   public string property1 { get; set; }
}

class b : a
{
    // this has it's own instance in b, the only way to get to
    // the original property1 is with base (or reflection)
    public new string property1 { get; set; }

    public override void method1()
    {
       // the only way to get to the original method1 and property1
       base.method1();
       base.property1 = "string";
    }
} 
```

在您的示例中，如果 DataContext 属性使用这些关键字中的任何一个，那么 base 和这根本不是同一件事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T08:31:09.117

考虑到您的情况，您正在尝试用一些值初始化类**DashBoard的****DataContext属性。**因此，如果您随后调用**（基）UserControl类对象的****DataContext**类型属性，它仍然不会被初始化。因此，要决定初始化哪个属性，您必须查看程序的逻辑。

 ******基本上 MSDN 告诉你应该在两个场景中使用 (base.)： - 调用基类上的一个方法，该方法已被另一个方法覆盖。- 指定在创建派生类的实例时应调用哪个基类构造函数。在我的实践中，当（此）方法以异常结束时，我使用了第一个场景，我试图调用更通用的（基本）方法。祝你好运！******

# f# - “大写变量标识符通常不应在模式中使用......”是什么？

> ID：10750214
> 
> 赞同：2
> 
> 时间：2012-05-25T07:24:48.013
> 
> 标签：f#, compiler-warnings

这个编译器喜欢：

```
let test Xf Yf = Xf + Yf 
```

这个编译器不喜欢：

```
let test Xfd Yfd = Xfd + Yfd 
```

警告：大写的变量标识符通常不应该用在模式中，并且可能表示模式名称拼写错误。

也许我没有正确使用谷歌搜索，但我没有设法找到任何解释为什么函数参数会出现这种情况的东西......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T09:49:47.393

我同意这个错误信息看起来有点神秘，但它有一个很好的动机。根据 F# 命名指南，区分联合的案例应该使用命名`PascalCase`并且编译器试图确保您不会在模式匹配中意外拼错案例名称。

例如，如果您有以下联合：

```
type Side = 
  | Left 
  | Right 
```

您可以编写以下函数，当参数为`Left`“错误”时打印“ok”！否则：

```
let foo a = 
  match a with 
  | Lef -> printfn "ok"
  | _ -> printfn "wrong!" 
```

代码中有一个错字——我刚刚写的`Lef`——但代码仍然有效，因为`Lef`可以解释为一个新变量，因此匹配分配任何一侧`Lef`并始终运行第一个案例。关于大写标识符的警告有助于避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:08:21.187

F# 尝试强制执行活动模式的大小写规则 - 考虑这段代码的作用

```
let f X = 
    match X with
    |X -> 1
    |_ -> 2 
```

这很令人困惑。此外，函数参数类似于模式，你可以做

```
let f (a,b,_) = a,b 
```

例如。不太清楚为什么第三个字母会触发警告

# jquery - 如何检查启用缓存的jquery选项卡是否在缓存中有数据？

> ID：10750215
> 
> 赞同：2
> 
> 时间：2012-05-25T07:24:48.167
> 
> 标签：jquery, jquery-ui, jquery-tabs

如果特定选项卡的缓存中不存在数据，我需要使用 JQuery 掩码插件屏蔽选项卡视图。如果数据存在于缓存中，则不会进行 AJAX 调用，并且 TAB 小部件不会触发任何事件来通知数据已从缓存中加载。

谢谢，哈文德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:27:22.533

这是检查选项卡内容是否已缓存的相关代码：

```
$.data( ui.tab[ 0 ], "cache.tabs" ) 
```

`ui.tab[ 0 ]`是选项卡链接的 DOM 节点。

演示：http: [//jsfiddle.net/RQXUL/](http://jsfiddle.net/RQXUL/)

# java - 从数据库中检索图像并显示在标签中

> ID：10750223
> 
> 赞同：1
> 
> 时间：2012-05-25T07:25:20.777
> 
> 标签：java, mysql, sql, database, sqlexception

我有一张名为`P100.jpg`. 我正在调整它的大小并将其转换为`ZP100.png`. 我通过插入查询将它存储到数据库 MySQL 中。

```
 File imageFile = new File("F:\\POSTERS\\Roses\\ZP100.png");
    FileInputStream fis = new FileInputStream(imageFile);

    String insertImage = "insert into image values(?,?)";
    prestmt = con.prepareStatement(insertImage);
    prestmt.setInt(1,4);
    prestmt.setBinaryStream(2, fis, fis.available());
    result = prestmt.executeUpdate(); 
```

现在我想检索该图像并通过将其分配给标签来显示在表单上。

```
 String selectImage = "select img from image";
    prestmt = con.prepareStatement(selectImage); 
```

但它给了我例外

```
java.sql.SQLException: Can not issue executeUpdate() for SELECTs 
```

为了将图像分配给我有的标签：

```
 image.setText("ZP100.png"); 
```

我知道，它不能工作。请帮我重新编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:22:11.473

第一个错误必须在此：

```
result = prestmt.executeUpdate(); 
```

我担心你已经`result`用 type声明了`ResultSet`。
并且当您分配`int`, 的返回类型时`executeUpdate()`，`result`
显然`SQLException`会提高 an 。

像这样修改上面的语句：

```
int insertResult = prestmt.executeUpdate(); 
```

你应该在这方面取得成功。

***建议***：

> *prestmt.setBinaryStream(2, fis, **fis.available()** );*

[`available()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)如果您想`read`从流中获取内容，请不要依赖方法。
这只是一个*估计*，并不能保证您可以阅读到流结束。

而是使用该`setBinaryStream`方法的其他签名，例如： Javadoc 说，，这意味着您无需明确阅读它。 更改后，您的声明将如下所示：
[`setBinaryStream( int parameterIndex, InsputStream is )`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setBinaryStream%28int,%20java.io.InputStream%29)
*`The data will be read from the stream as needed until end-of-file is reached.`*

> ***prestmt.setBinaryStream(2, fis);***

* * *

**图片**：
我在 Java GUI 和图片方面工作不多。
但可以建议您参考一些解决方案：

1.  *[将图像添加到按钮](http://www.java2s.com/Tutorial/Java/0280__SWT/AddImagetoButton.htm)*
2.  *[带有图像的标签](http://www.java2s.com/Code/Java/Swing-JFC/LabelwithImage.htm)*

# ruby-on-rails - has_one 关系不适用于新建/创建

> ID：10750228
> 
> 赞同：0
> 
> 时间：2012-05-25T07:25:46.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这些模型：

```
class User < ActiveRecord::Base 
  has_one  :user_tms, :dependent => :destroy
  accepts_nested_attributes_for :user_tms
end

class UserTms < ActiveRecord::Base
  belongs_to :user
end 
```

在 UsersController 我有这个：

```
def new
  @user = User.new
  @user.build_user_tms
end 
```

用户表单如下所示：

```
<%= form_for(@user) do |f| %>
  <%= f.collection_select(:company_id, @companies, :id, :name, :include_blank => true) %>

  <%= f.fields_for(:user_tms) do |tms_form| %>
    <%= tms_form.collection_select(:department, @departments, :id, :description) %>
  <% end %>
<% end %> 
```

我认为非常基本的东西，但是在提交表单时出现错误：

```
User tms user can't be blank 
```

奇怪的是，在编辑现有用户时，一切正常。知道这里出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:48:56.387

不确定，但以“s”结尾的类是不寻常的。

表名是什么？user_tms 或 user_tmses。我会在你的模型中设置复数名称。

如果是这样，我可能会错过其他东西，我会删除。不过，最好为新开发人员提供一个更好的型号名称。tms 对大多数人来说意义不大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:39:29.537

嗯，这真的很奇怪，因为我认为 rails 会自动处理这个问题，但您的嵌套模型似乎缺少对“嵌套器”的引用。尝试手动提供。

```
@user.user_tms.user = @user 
```

您必须在创建操作中执行此操作，即。保存记录的位置。

您使用的是什么版本的导轨？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:14:23.793

我发现出了什么问题，我有一个方法导致错误的返回值出现问题，这干扰了与这两个模型的关系的正常处理。

# asp.net - 对于具有数百万数据的应用程序，我应该更喜欢哪个数据库

> ID：10750230
> 
> 赞同：0
> 
> 时间：2012-05-25T07:25:49.603
> 
> 标签：asp.net, oracle, sql-server-2008

我们将使用 Asp.Net 开发一个 Web 应用程序，它可以处理数百万个数据

所以我对数据库选择感到困惑

就性能和所有标准而言，我应该更喜欢 sql server 还是 oracle

请指导我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:33:27.583

你的问题看起来很主观，我怎么喜欢回答和说：

[如果有人让你驾驶一级方程式赛车](http://www.youtube.com/watch?v=EGUZJVY-sHo)，你会在几秒钟内撞上它？可能您甚至无法启动它运行。

同样的想法也适用于编程。这两个程序都像一级方程式赛车，也许一个有一些功能，另一个有其他一些，但如果“你可以驾驶它们”，它们可以运行得如此之快。

现在由你来为数据库做出一个好的设计，让它变得非常快，或者非常慢和巨大。这不是机器，而是你可以让它快速运行。这不是比赛中的一级方程式赛车，而是飞行员（和其他车队）让他们开得如此之快。

# android - 如何获取 Facebook 页面数据到我的 android 应用程序？

> ID：10750240
> 
> 赞同：1
> 
> 时间：2012-05-25T07:26:26.293
> 
> 标签：android, facebook

我需要获取我的粉丝页面数据，即喜欢的数量、最近喜欢的用户；到我的 android 应用程序。

**没有登录到 facebook，应用程序用户应该可以使用该应用程序。**

我尝试[了 Facebook SDK for Android](https://github.com/facebook/facebook-android-sdk/)，但没有找到访问页面数据的方法。似乎用户应该登录到 facebook 以获取数据。

当我检查[这个](http://developers.facebook.com/docs/reference/api/)时，可以访问喜欢的数量。但是如何在不要求用户登录的情况下对给定页面执行此操作？

对此有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:40:14.180

```
With out log in to facebook the application user should be abel to use the app. 
```

**如果没有登录 facebook，您将无法访问 Facebook 详细信息**

在此代码段下方使用以获取用户订阅的页面信息：

```
Bundle likes_params = new Bundle();
likes_params.putString("fields", "id,name,picture");
jObj_friends_likes = new JSONObject(authenticatedFacebook.request("me/likes",likes_params)); 
```

其中 authenticatedFacebook 是您的 Facebook 实例和字段，您可以添加任何您需要的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:44:21.963

某些页面信息无需用户登录即可访问，例如点赞数；有关详细信息，您可以在[此处查看](https://developers.facebook.com/docs/reference/api/page/)。

以下是获取它们的方法：

```
private Facebook mFacebook = new Facebook("xxxxxx");
private AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);

mAsyncRunner.request("yourPage", new RequestListener() {

    @Override
    public void onComplete(String response, Object state) {
        Log.d(LOG_TAG, response);   // page info JSONObject
    }

    @Override
    public void onIOException(IOException e, Object state) { }

    @Override
    public void onFileNotFoundException(FileNotFoundException e,
            Object state) { }

    @Override
    public void onMalformedURLException(MalformedURLException e,
            Object state) { }

    @Override
    public void onFacebookError(FacebookError e, Object state) { }

}); 
```

**PS** [Graph API Explorer](https://developers.facebook.com/tools/explorer)是一个很好的使用 Graph API 的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-16T23:31:52.210

安装 Facebook SDK 后，试试这个

```
/* make the API call */
new GraphRequest(
AccessToken.getCurrentAccessToken(),
"/{page-id}",
null,
HttpMethod.GET,
new GraphRequest.Callback() {
    public void onCompleted(GraphResponse response) {
        /* handle the result */
    }
}
).executeAsync(); 
```

# django - 美味的 Django POST 错误

> ID：10750242
> 
> 赞同：0
> 
> 时间：2012-05-25T07:26:29.717
> 
> 标签：django, http, tastypie

我将 Tastypie 用于 Django 的 API。但它返回错误。我的代码如下。

```
$.ajax({
      type : "POST", 
      url : "http://192.168.1.130:8000/api/user/author/", 
      data : '{"first_name": "111","second_name": "222"}', 
      success: function(){
        alert('Submit Success')
      },
      dataType : 'json', 
      contentType : 'application/json',
      processData: false
    }); 
```

我的 api.py 是这样的：

```
class AuthorResource(ModelResource):
    class Meta:
        queryset = Author.objects.all()
        resource_name ='author'
        fields = ['first_name','last_name']
        filtering = {
            'first_name': ALL,
        }
        authentication = Authentication()
        authorization = Authorization() 
```

它返回 200 并且什么也没有发布。我怎样才能重新喜欢它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:58:53.373

如果对象创建成功，对象 uri 将显示在响应标头的 Location 字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T16:38:49.277

这是[在 django-tastypie 的 POST 上返回数据](https://stackoverflow.com/questions/10138169/returning-data-on-post-in-django-tastypie)的欺骗。

添加`always_return_data = True`到您的资源元

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T10:57:15.920

网址不应该是[http://192.168.1.130:8000/api/author/](http://192.168.1.130:8000/api/author/)而不是[http://192.168.1.130:8000/api/user/author/](http://192.168.1.130:8000/api/user/author/)

# c# - 在c#中计算两个文本文件之间的百分比差异

> ID：10750243
> 
> 赞同：3
> 
> 时间：2012-05-25T07:26:30.367
> 
> 标签：c#, string, text

我有两个 txt 文档，需要找出它们的不同之处。

在 c# 中计算两个文本文件之间百分比差异的最佳算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:37:59.830

[这](http://code.google.com/p/google-diff-match-patch/)可能会有所帮助。它是用 C# 和其他一些语言编写的，并且是开源的。您还有一个演示部分，您可以使用它来查看它是否对您的目的有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:41:19.170

diff算法参考Linux源码中的diff.c。

或者看看[这个帖子](https://stackoverflow.com/questions/65199/c-sharp-compare-algorithms)

# c# - 即时窗口是否正在逐步淘汰？

> ID：10750246
> 
> 赞同：3
> 
> 时间：2012-05-25T07:26:39.723
> 
> 标签：c#, .net, visual-studio-2010

[我丢失了这个窗口，然后使用Ctl+Alt+I](https://stackoverflow.com/questions/761750/vs2008-immediate-window-lost)再次找到它，但在 VS2010ultimate 的任何菜单中都看不到它。

*   这是否意味着它正在逐步淘汰？
*   如果是这样，我应该使用哪种工具来获得类似的结果？
*   如果它不是默认菜单之一，并且您必须自定义一个开箱即用的菜单，这是否表明它正在被逐步淘汰？

![在此处输入图像描述](../Images/020a47e54f4e44cf044a5bc303877025.png)

在我的 VS 中缺少即时窗口的更多证据：

![在此处输入图像描述](../Images/f6addc5ab27da7100caeb232fa95ef1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:30:12.140

奇怪的是，它在 VS 2010 终极版中为我提供：

![在此处输入图像描述](../Images/97f61ab28a4554e865be6d9793949932.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:31:11.137

在工具栏上单击：调试 -> Windows -> 立即

您确定您没有在 Windows 选项卡下查看吗？

编辑：

[http://www.vitalygorn.com/blog/post/2008/01/Missing-Immediate-Window-in-VS2008.aspx](http://www.vitalygorn.com/blog/post/2008/01/Missing-Immediate-Window-in-VS2008.aspx)![在此处输入图像描述](../Images/509f7f95795a6506221db5dab6284243.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:50:23.330

您必须已从工具栏中删除该命令。转到**Tools**，**Customize**，单击**Commands**选项卡，然后向下滚动并单击**Debug**，然后选择**Add Command**。然后，向下滚动并在左侧的 Categories 菜单中选择**Debug ，然后向下滚动并找到****Immediate** :)。

看这里：

![在此处输入图像描述](../Images/33d675c4b803750cffe49f247e299511.png)

# c# - 如何防止 c# XmlElement.SetAttribute 将 '&' 更改为 '&'？

> ID：10750252
> 
> 赞同：1
> 
> 时间：2012-05-25T07:27:15.793
> 
> 标签：c#, asp.net, xml

我想得到一个 xml 标签，如：

```
 <link url="http://www.xxx.com/?&q=xxx">xxx</link> 
```

但是`SetAttribute`方法更改`&`为`&amp;`，我该如何防止呢？

我的代码：

```
 XmlElement Link = doc.CreateElement("Link");
    Link2.SetAttribute("url", "http://www.xxx.com/?&q=xxxx"); 
```

请帮我 ！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:53:05.237

查看[此](http://en.wikipedia.org/w/index.php?title=XML#Escaping)wiki 文章以查看也必须转义的其他字符。它还描述了原因。

# android - 使用 gps 从纬度和经度获取当前位置

> ID：10750259
> 
> 赞同：-1
> 
> 时间：2012-05-25T07:27:30.787
> 
> 标签：android, android-ndk, location

我使用 Telnet 获得了模拟器中的纬度和经度值。（即）GPS。

我有一个疑问（即），如果没有谷歌地图，我们能否使用纬度和经度获取当前位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:43:40.670

您可以同时使用 GPS 和 Google 地图获取当前位置。如果您想通过 Google 地图获取位置，请[展示本](http://marakana.com/s/tutorial_android_location_service_example,311/index.html)教程。你可以[看到这个](https://stackoverflow.com/questions/7644063/getting-0-0-for-latitude-and-longitude-while-showing-current-location-in-map)先前提出的问题。

如果你想在没有谷歌地图的情况下获取位置，那么你可以使用位置管理器。

为此，我们需要在 OnCreate 方法中添加以下代码：

```
/* Use the LocationManager class to obtain GPS locations */
LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
LocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

在自定义类 MyLocationListener 中使用实现了接口 LocationListener。

我们将添加我们自己的个人位置侦听器，这样我们就可以重写一些函数来做我们想做的事。在我们的例子中，我们只会在闲置的情况下在屏幕上打印一条消息：

```
onLocationChanged ( Location Update )
onProviderDisabled ( GPS Off )
onProviderEnabled (GPS On ) 
```

并添加另一个强制方法，它什么都不做。

```
onStatusChanged (We are not adding nothing here). 
```

之后在 AndroidManifest.xml 文件中授予权限：

```
android:name="android.permission.ACCESS_FINE_LOCATION" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T12:42:00.800

您可以通过此代码获取纬度和经度

```
GPS_Location mGPS = new GPS_Location(MyApplication.getAppContext());

if (mGPS.canGetLocation) {

    mLat = mGPS.getLatitude();
    mLong = mGPS.getLongitude();

} else {
    System.out.println("cannot find");
} 
```

您必须将 gps 权限和其他权限添加到您的应用程序

# regex - Instr 在 perl 中等效吗？

> ID：10750267
> 
> 赞同：3
> 
> 时间：2012-05-25T07:28:00.757
> 
> 标签：regex, perl, hash

perl 中的一个新任务（我以前从未使用过）。所以请帮助我，即使这听起来很傻。

一个名为 RestrictedNames 的变量包含受限制的用户名列表。SplitNames 是一个数组变量，其中包含完整的用户名集。现在我必须检查是否在 RestrictedNames 变量中找到当前名称，例如使用 instr。

@SplitNames = ("naag algates","arvind singh","abhay avasti","luv singh","new algates") 现在我想阻止所有具有“singh”、“algates”等的姓氏。

```
@SplitNames = ("naag algates","arvind singh","abhay avasti","luv singh","new algates")
$RestrictedNames="tiwary singh algates n2 n3 n4 n5 n6";
for(my $i=0;$i<@SplitNames;$i++)
{
    if($RestrictedNames =~ m/^$SplitNames[$i]/ ) //google'd this condition, still fails
    {
          print "$SplitNames[$i] is a restricted person";
    }
} 
```

我恳请您帮助我找到解决方案。如果已经问过这个问题，请原谅我并分享该链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T07:35:34.667

您应该修改这一行：

```
if($RestrictedNames =~ m/^$SplitNames[$i]/ ) 
```

到

```
if($RestrictedNames =~ m/$SplitNames[$i]/ ) 
```

`^`从头开始寻找匹配。

有关 perl 元字符的更多详细信息，请参见[此处](http://perldoc.perl.org/perlre.html#Metacharacters)

**编辑：** 如果您需要基于姓氏的阻塞，请在 for-loop 正文中尝试此代码。

```
my @tokens = split(' ', $SplitNames[$i]); # splits name on basis of spaces
my $surname = $tokens[$#tokens]; # takes the last token
if($RestrictedNames =~ m/$surname/ )
{
      print "$SplitNames[$i] is a restricted person\n";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T07:37:03.027

不要尝试处理一串受限制的名称，而是处理一个数组。

然后只需使用[智能匹配运算符](http://perldoc.perl.org/perlsyn.html#Smart-matching-in-detail)（`~~`或两个波浪号）来查看给定的字符串是否在其中。

```
#!/usr/bin/perl
use v5.12;
use strict;
use warnings;

my $RestrictedNames="n1 n2 n3 n4 n5 n6 n7 n8 n9";
my @restricted_names = split " ", $RestrictedNames;
say "You can't have foo" if 'foo' ~~ @restricted_names;
say "You can't have bar" if 'bar' ~~ @restricted_names;
say "You can't have n1" if 'n1' ~~ @restricted_names;
say "You can't have n1a" if 'n1a' ~~ @restricted_names; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T07:49:17.970

使用 Hash Slice 尝试以下操作：

```
my @users =  ( "n10", "n12", "n13", "n4", "n5" );
my @r_users = ( "n1", "n2", "n3", "n4", "n5", "n6", "n7", "n8", "n9" ) ;
my %check;
@check{@r_users}  = ();
foreach my $user ( @users ) {
   if ( exists $check{$user} ) {
      print"Restricted User: $user  \n";
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-12T22:06:47.727

最惯用的方法是创建受限制名称的散列，然后将姓氏从名称中分离出来并检查姓氏是否在散列中。

```
use strict;
use warnings;

my @SplitNames = ("naag algates","arvind singh","abhay avasti","luv singh","new algates");
my $RestrictedNames = "tiwar y singh algates n2 n3 n4 n5 n6";

# Create hash of restricted names
my %restricted;
map { $restricted{$_}++ } split ' ', $RestrictedNames;

# Loop over names and check if surname is in the hash
for my $name (@SplitNames) {
    my $surname = (split ' ', $name)[-1];
    if ( $restricted{$surname} ) {
        print "$name is a restricted person\n";
    }
} 
```

请注意，该`split`函数通常采用 RegEx。但是使用`' '`with split 是一种特殊情况。它分割任意长度的空格，并且忽略任何前导空格，因此对于分割单个单词的字符串很有用。

仅供参考，`instr`perl 中的等价物是使用`index($string, $substring)`. 如果`$substring`里面没有发生`$string`就会返回`-1`。任何其他值均`$string`包含`$substring`. 但是，在比较列表时，使用上面显示的哈希会少很多麻烦......而且与索引不同，当您真的只想匹配“joy”时，它不会匹配“joyce”。

# mysql - Unity 3d 在触敏 Webstore 界面中

> ID：10750268
> 
> 赞同：1
> 
> 时间：2012-05-25T07:28:14.450
> 
> 标签：mysql, user-interface, unity3d

我需要用 3D 元素创建一个触摸版的网上商店。一开始我选择了 WebGL 技术，因为它可以直接与数据库集成（这样的界面需要使用 MySQL 下载产品的缩略图和有关它的基本信息）。

问题是缺乏创建这样一个项目的简单工具。最近我对 Unity 产生了兴趣。我只是不知道它的功能是否允许我这样做。您如何看待 Unity 3d？这样的任务是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:04:47.033

Unity3D 网络播放器需要在用户的浏览器中安装一个插件。此插件不适用于 iPhone，AFAIK 也不适用于 Android。因此，不可能创建一个**纯粹**的基于浏览器的在线商店解决方案。

您可以使用 Unity3D 作为解决方法：在 Unity3D 中执行项目并将其导出为桌面客户端的 Web 版本，然后将其导出为 iPhone 的应用程序（即需要安装的胖客户端），然后再次导出为 Android。但即便如此，您仍需要为所有目标设备提供不同的布局。

虽然我非常喜欢 Unity3D，但我不会推荐它用于开发在线商店。

# objective-c - 目标c保留，分配和复制？

> ID：10750275
> 
> 赞同：0
> 
> 时间：2012-05-25T07:29:04.873
> 
> 标签：objective-c, memory-management, retain, assign

之前的帖子我删了。。。

如果我有一个拥有对象 objA 的类，我应该使用哪一个？我知道如果该对象不属于该类，则需要保留它。

```
@class A

@property (retain) ObjectA objA;

@end

@implementation A

-(void) func {
   self.objA = [[ObjectA alloc] init];
}

@end 
```

如果类 A 中的 objA 设置为保留，并使用 init 函数在 func 中初始化。这会给出 2 个保留计数还是仅 1 个保留计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:33:02.437

alloc 给出保留计数 1。 self.objA = 将给出保留计数 2（因为保留属性）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:08:41.840

我会这样做：

```
 - (void) func {objA = [[ObjectA alloc] init]; } 
```

或者

```
 - (void) func { self.objA = [[[ObjectA alloc] init] autorelease]; } 
```

以防止内存泄漏。但是我更喜欢第一个解决方案

# c - 如何确保只有一份应用程序正在运行？

> ID：10750278
> 
> 赞同：3
> 
> 时间：2012-05-25T07:29:21.083
> 
> 标签：c, linux

> **可能的重复：**
> [防止 Linux 上的多个进程实例](https://stackoverflow.com/questions/2964391/preventing-multiple-process-instances-on-linux)

我有多线程应用程序，可以作为守护进程运行，也可以使用输入参数运行一次。

我想确保如果应用程序作为守护进程运行，则不应允许用户再次运行它。

编辑：在你们都建议去羊群之后，我试了一下，把它放在服务器上。我知道有一个奇怪的问题，当服务器被退回时，他们会删除所有文件，包括锁定文件:(。现在怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:23:39.200

最简单的方法是绑定到一个端口（可以是 unix 域，在“私有”目录中）**只有一个进程可以绑定到一个端口**，因此如果绑定了端口，则该进程正在运行。如果进程退出，内核会自动关闭文件描述符。它确实花费了您的进程一个（未使用的？）文件描述符。通常，一个守护进程无论如何都需要一些监听套接字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:40:12.340

您可以尝试使用[文件锁](http://linux.die.net/man/2/flock)。启动该过程后，您可以打开文件、锁定文件并检查值（例如文件大小）。如果它不是所需的值，则该过程可以退出。如果需要值，请将文件更改为不需要的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T07:51:46.783

我通过使用 shell 脚本来启动和停止守护程序来实现类似的事情。

在 exe 调用之前的启动脚本中，查看此 exe 是否仍在运行。如果它发现它仍在运行，则不会启动新进程。

# java - Java，如何将格林威治标准时间更改为当地时间？

> ID：10750279
> 
> 赞同：1
> 
> 时间：2012-05-25T07:29:36.727
> 
> 标签：java, time, format, localtime

服务器向我发送这样的时间：

> 2012-06-08 17:00:00 +0100

我需要`HH:MM`根据当地时间进行更改。例如这个时间是日本、印度、美国等的时间。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T07:40:37.953

**选项 1：使用`java.util.Date`/ `Calendar`：**

首先，您需要将值解析为 a `Date`，然后将其重新格式化为您感兴趣的格式和时区：

```
SimpleDateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z",
                                                    Locale.US);
Date date = inputFormat.parse(inputText);

// Potentially use the default locale. This will use the local time zone already.
SimpleDateFormat outputFormat = new SimpleDateFormat("HH:mm", Locale.US);
String outputText = outputFormat.format(date); 
```

**选项 2：使用 Joda Time**

[Joda Time](http://joda-time.sf.net)是一个更好的 Java 日期/时间库。

```
DateTimeFormatter inputFormatter = DateTimeFormat
    .forPattern("yyyy-MM-dd HH:mm:ss Z")
    .withLocale(Locale.US);

DateTime parsed = inputFormatter.parseDateTime(inputText);

DateTimeFormatter outputFormatter = DateTimeFormat
    .forPattern("HH:mm")
    .withLocale(Locale.US)
    .withZone(DateTimeZone.getDefault());

String outputText = outputFormatter.print(parsed); 
```

请注意，您应该只在真正需要时转换为字符串表示形式/从字符串表示形式转换。否则，请根据您的使用情况使用最合适的类型 - 这是 Joda Time 真正闪耀的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:33:18.563

使用乔达时间。它比 Java 的日期和时间 API 更好、更安全。有很多方法会返回 LocalTime 对象 (HH:MM)。

例如， new DateTime(your date time).toLocalTime();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:38:14.383

java.util.Date*始终*采用 UTC。是什么让你觉得是当地时间？我怀疑问题在于您是通过使用本地时区的 Calendar 实例来显示它，或者可能使用也使用本地时区的 Date.toString() 来显示它。

如果这不是问题，请发布一些示例代码。

不过，我还是建议您使用[Joda Time](http://joda-time.sourceforge.net/)，它提供了更清晰的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T00:11:33.343

其他答案是正确的，但已过时。请改用 java.time 类。

# tl;博士

```
ZonedDateTime zdt_Kolkata = OffsetDateTime.parse( "2012-06-08 17:00:00 +0100" , DateTimeFormatter.ofPattern( "yyyy-MM-dd HH:mm:ss Z" ) ).atZone( ZoneId.of( "Asia/Kolkata" ) ); 
```

# 使用 java.time

定义[`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)格式模式以匹配您的输入字符串。

```
String input = "2012-06-08 17:00:00 +0100";
DateTimeFormatter f = DateTimeFormatter.ofPattern( "yyyy-MM-dd HH:mm:ss Z" ); 
```

## `OffsetDateTime`

将字符串解析为[`OffsetDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html)表示`+0100`输入中的对象，这意味着“比 UTC 提前一小时”。

```
OffsetDateTime odt = OffsetDateTime.parse( input , f ); 
```

## `ZonedDateTime`

应用 a为任何所需的时区`ZoneId`生成 a 。[`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)指定[适当的时区名称](https://en.wikipedia.org/wiki/List_of_tz_zones_by_name)。永远不要使用 3-4 个字母的缩写，例如`EST`或`IST`，因为它们不是真正的时区，不是标准化的，甚至不是唯一的（！）。

```
ZoneId zoneId_Kolkata = ZoneId.of( "Asia/Kolkata" ); // India
ZonedDateTime zdt_Kolkata = odt.atZone( zoneId_Kolkata ); 
```

……还有一个……</p>

```
ZoneId zoneId_Montréal = ZoneId.of( "Asia/Montreal" ); // Québec Canada
ZonedDateTime zdt_Montréal = odt.atZone( zoneId_Montréal ); 
```

## `Instant`

对于 UTC，提取一个`Instant`对象。该类代表[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的一个时刻，分辨率为[nanoseconds](https://en.wikipedia.org/wiki/Nanosecond)。

```
Instant instant = zdt_Montréal.toInstant(); 
```

# 关于 java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。

[现在处于维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)的[Joda-Time](http://www.joda.org/joda-time/)项目建议迁移到 java.time。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)中[进一步](http://www.threeten.org/threetenbp/)适应[Android](https://en.wikipedia.org/wiki/Android_(operating_system))。

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目通过附加类扩展了 java.time。该项目是未来可能添加到 java.time 的试验场。

# php - 在php代码错误中从url获取#var

> ID：10750286
> 
> 赞同：1
> 
> 时间：2012-05-25T07:30:28.677
> 
> 标签：php, javascript

我想`#var`从 url 中获取价值，就像我的 url 一样，`mydomain.com/index.php#1`所以我想从 url 中获取 has(#) 值，`1`经过一些研究，我得到了这篇文章[http://www.stoimen.com/blog/2009/04/15/用 php 读取 url 的锚部分/](http://www.stoimen.com/blog/2009/04/15/read-the-anchor-part-of-the-url-with-php/)

我将此代码用于获取 has(#) 值，这在其中可以正常工作，但在我的代码中`JavaScript` 不起作用是：`php`

```
<script language="javascript">
var query = location.href.split('#');
document.cookies = 'anchor=' + query[1];
alert(query[1]);
</script>
<?php
echo $_COOKIE['anchor'];
?> 
```

这段代码给了我`alert`价值，`JavaScript`但没有`echo`价值。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:38:37.737

*在下一个*页面请求之前，您设置的 cookie 对 PHP 不可见。您链接到的文章*明确说明了这一点*：

> 当然，是的。这无法正常工作。事实上，它从第二次加载开始就可以正常工作，但是在页面的初始加载时，$_COOKIE 数组内部没有任何锚键。这是因为这部分代码是在浏览器在客户端设置 cookie 之前执行的。

那篇文章中有一个“解决方法”，但坦率地说：这种事情是垃圾，如果您希望 PHP 读取它，您不应该（仅）将此信息放在查询片段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:38:44.323

通过您发送的文章，您必须执行如下重定向：

```
<?php if (!$_COOKIE['anchor']){ ?>
<script language="javascript">
  var query = location.href.split('#');
  document.cookie = 'anchor=' + query[1];
  window.location.reload();
</script>
<?php } ?>

<?php
echo $_COOKIE['anchor'];
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:42:56.863

此外，您似乎在 JS 中设置了错误的属性（它是`.cookie`，不是`.cookies`）：

```
document.cookie = 'anchor' + query[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:34:54.823

您正在设置一个在下次重新加载之前不会传递给 php 的 cookie。我错了吗？

客户动态是链条的末端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T03:00:54.447

使用此方法来防止错误：

```
<script> 
query=location.hash;
document.cookie= 'anchor'+query;
</script> 
```

当然，在 PHP 中，炸掉那只小狗并获得其中一个值

```
$split = explode('/', $_COOKIE['anchor']);
print_r($split[1]); //to test it, use print_r. this line will print the value after the anchortag 
```

# php - 获取 FancyBox 模式之外的当前 URL

> ID：10750288
> 
> 赞同：1
> 
> 时间：2012-05-25T07:30:35.807
> 
> 标签：php, fancybox

我想获取我所在页面的当前 URL，而不是使用 PHP 在 FancyBox 模式中加载的页面。

`$_SERVER['REQUEST_URI']`给我在 FancyBox 模式中加载的页面的 URL。

例子：

虽然我是`a.php`，但我想单击一个链接，该链接打开一个`b.php`已加载的模式窗口，并在其中包含一个 PHP 代码`b.php`来说明我来自`a.php`，而不是来自`b.php`（现在发生了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:34:27.880

你不能使用 PHP。您需要使用 javascript。在`b.php`：

```
<script type="text/javascript">

    var parentURL = window.parent.location.href
    alert(parentURL);

</script> 
```

如果您确实需要知道`a.php`PHP 代码中的 URL，请考虑在打开`b.php`页面时将其作为 GET 参数传递。因此，在`a.php`您的链接`b.php`中将是：

```
<?php $myURL = $_SERVER['REQUEST_URI'] ?>

<a href="b.php?parent=<?php echo urlencode($myURL) ?>">Open B</a> 
```

然后，在`b.php`：

```
$parentURL = $_GET['parent']; 
```

# python - 强制属性存在于 XML 中的标签中

> ID：10750290
> 
> 赞同：0
> 
> 时间：2012-05-25T07:30:53.810
> 
> 标签：python, xml, lxml

如果没有特定属性，如何在解析 XML 文档时删除所有标签？例如，我希望所有标签（当然除了根）都具有名称属性。我正在使用 XML 来拥有树数据库，并且没有名称的标签根本没有意义。

当然，我可以（深度）遍历所有标签并检查属性是否存在，但是对于更大的文件需要一些时间。

我想应该有一些选项可以用 XMLParser 来做......也许使用一些模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:14:55.513

使用 XPath 和 lxml，这应该可以工作：

```
from lxml import etree

xml = etree.XML("<root><a name='1'><b name='1-1'>ABC</b></a><a>Does not exist</a><a name='2'>DEF</a><a><b name='3-1'>GHI</b></a></root>")

print 'Before:'
print etree.tostring(xml)

xp = etree.XPath("/*/*[not(@name)]") # or "//*[not(@name)]" to include the root tag
all_nodes = xp(xml)
for x in all_nodes:
    parent = x.getparent()
    #if parent is None: continue # if the root tag is included, the parent is None
    parent.remove(x)

print 'After:'
print etree.tostring(xml) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:27:43.133

在 XSLT 中非常容易。两个模板规则，一个复制所有内容的身份规则：

```
<xsl:template match="*">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

和另一个丢弃你不想要的元素的规则：

```
<xsl:template match="*[not(@specific-attribute)]"/> 
```

# javascript - 如何在茉莉花单元测试中根据其他对象测试功能

> ID：10750292
> 
> 赞同：1
> 
> 时间：2012-05-25T07:30:59.520
> 
> 标签：javascript, unit-testing, backbone.js, jasmine, sinon

我有一个名为 Event 的主干模型的 jasmine 单元测试。

在这个模型中，我有一个功能：

```
getParticipants: function(){
  new Myappp.Collections.UsersCollection(
    this.get("participations").map(function(participation){
      return participation.get("user");
    });
  );
} 
```

它有 4 个依赖项：

*   用户模型
*   用户集合
*   参与模式
*   参与合集

我想单独测试所有模型，因为这是最佳实践，但我不确定如何。

我正在使用 sinon.js 进行模拟和存根，但不知道在这种情况下如何正确使用它。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T19:43:47.597

你的方法`getParticipants`做了很多事情..实际上是三件事，所以我宁愿尝试让它专注于一件事情：构建`Myappp.Collections.UsersCollection`. 并将所有先前需要的计算移至其他方法。

然后你可以专注于非常棘手的一个：**模拟`new`call**。

我会分三个阶段进行：

### 1.将用户过滤器移动到另一个地方

我建议将它移动到 中的一个方法`Myapp.Collections.ParticipationsCollection`，然后我们可以`Event`像这样从我们的实例中调用它：

```
Myapp.Models.Event = 
  Backbone.Model.extend({
    getParticipants: function(){
      var usersArray   = this.get("participations").getUsers();
      var participants = new Myapp.Collections.UsersCollection(usersArray);

      return participants;
    }
  });

Myapp.Collections.ParticipationsCollection = 
  Backbone.Collection.extend({
    getUsers: function(){
      var users = 
        this.map(function(participation){
          return participation.get("user");
        });

      return users;
    }
  }); 
```

这样我们就可以轻松地*模拟*该`getUsers`方法来测试我们的目标方法。

### 2.包装，甚至更多，用户数组获得

在上面的代码示例中，我们仍然有一个复杂的链方法调用，`this.get("participations").getUsers()`我们可以将它移动到一个自定义方法，也很容易模拟：

我们以这样的方式结束：

```
Myapp.Models.Event = 
  Backbone.Model.extend({
    getParticipants: function(){
      var usersArray   = this.getUsersArray();
      var participants = new Myapp.Collections.UsersCollection( usersArray );

      return participants;
    },

    getUsersArray: function(){
      return this.get("participations").getUsers();
    }
  }); 
```

### 3.测试Collection初始化

现在我们必须专注于模拟 Collection`Myapp.Collections.UsersCollection`并检查我们的初始化方法和这个 Collection 的实体是否具有正确的参数。

*正确的参数*是该方法的结果，现在`Event.getUsersArray()`我们可以轻松地模拟它。

Sinon 有一个特别的期望，就是检查一个方法是否被`new`..调用过。

我的 Jasmine/Sinon 方法不是很准确，因为我没有测试该方法是否返回*新*的Collection，我希望有人能提供更好的实现：

```
describe("Event", function() {
  beforeEach(function(){
    testModel = new Myapp.Models.Event();
  });

  it("getParticipants returns proper Collection", function() {
    var usersCollectionSpy = sinon.spy( Myapp.Collections, "UsersCollection" );

    var getUsersArrayMock = sinon.stub(testModel, "getUsersArray");
    getUsersArrayMock.returns( "usersArray" );

    testModel.getParticipants();

    expect( usersCollectionSpy.calledWith( "usersArray" ) ).toBeTruthy();
    expect( usersCollectionSpy.calledWithNew() ).toBeTruthy();
  });
}); 
```

[检查 jsFiddle](http://jsfiddle.net/fguillen/J5WTf/)

# qt - 从 QListWidget 中删除 QListWidgetItem？

> ID：10750293
> 
> 赞同：3
> 
> 时间：2012-05-25T07:31:09.473
> 
> 标签：qt, qt4.8

我检查了最新的文档，没有找到相关的。我在我的类中放置了一个指向 a 的指针`QListWidgetItem`，我想使用一些函数`QListWidget`来删除这个子项。

我发现只是通过 ID 删除它，`takeItem (i)`.

有没有更好/真正的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:45:11.723

> 要从列表中删除项目，请使用 takeItem()。

根据文档，这是正确的使用方法。

# apache-flex - flex ios 应用程序中的自定义 URL 问题

> ID：10750298
> 
> 赞同：0
> 
> 时间：2012-05-25T07:31:20.190
> 
> 标签：apache-flex

我在我的 flex iOS 应用程序中使用自定义 url 方案，当我从网络链接启动我的应用程序时它工作正常。但问题是当我从 iPad 的开始菜单启动我的应用程序并移动到 safari 中的网页时。在页面 i单击一个将其重定向到我的应用程序的按钮，当时应用程序多次调用“预初始化”方法..每次都很谨慎，有时它是 2,3,4 并且每次都不同..我不知道为什么它的行为是这样的..我能知道原因吗，请它的紧急..谢谢...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:36:22.073

创建一个标志`initialized`并将其设置为何`true`时`preinitialize`调用。可以过滤掉对该方法的所有其他调用。简单的例子：

```
private var initialized:Boolean = false;
public function preinitialize():void
{
  if (initialized) return;
  initialized = true;
} 
```

下一步是找到多次调用的真正原因，但为此我们需要查看您的应用程序的一些代码。

# c++ - 如果我在 C++ 中为“std::string &”类型的参数指定默认值，会导致内存泄漏吗？

> ID：10750299
> 
> 赞同：14
> 
> 时间：2012-05-25T07:31:22.813
> 
> 标签：c++, memory-leaks, valgrind, stdstring

我有一个这样声明的方法：

```
/*!
\brief Removes the leading and trailing white space from a string.
\param s The string to remove the white space from.
\param white_chars Characters to be considered as whitespace.
*/
std::string Trim(const std::string &s, const std::string &white_chars = " \t\n\r"); 
```

该方法的定义是无趣的，但无论如何是这样的：

```
std::string Trim(const std::string &s, const std::string &white_chars)
{
    size_t startidx = s.find_first_not_of(white_chars);
    if (startidx == std::string::npos) return "";
    size_t endidx = s.find_last_not_of(white_chars);
    return s.substr(startidx, endidx - startidx + 1);
} 
```

现在在这种方法的大多数用法中，我只提供第一个参数。Valgrind 给了我以下警告

```
==3338== 68 bytes in 2 blocks are possibly lost in loss record 4,639 of 7,212
==3338==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==3338==    by 0x728CA88: std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==3338==    by 0x728E2B4: char* std::string::_S_construct<char*>(char*, char*, std::allocator<char> const&, std::forward_iterator_tag) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==3338==    by 0x728E414: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&, unsigned long, unsigned long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==3338==    by 0x728E441: std::string::substr(unsigned long, unsigned long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
==3338==    by 0x6965F0A: str::Trim(std::string const&, std::string const&) (appbase.cpp:90)
==3338==    by 0x5F481D7: netopt::Element::set_ID(std::string const&) (netopt_elem.cpp:85) 
```

注意“块可能丢失”？我已经看到 Valgrind 告诉我“块肯定丢失了”的内存泄漏，但这是一个不太确定的消息。

**所以问题就变成了，我是否通过将默认值分配给 a 导致内存泄漏`std::string &`？如果是这样，我做错了什么？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T07:50:19.433

没有技术问题，但是`std::string`在每次通话时从哲学上创建一个临时的并不是那么好。特别是对于 libstdc++（您似乎在使用），因为它每次都会导致内存分配（缺乏短字符串优化）。

由于`find_first_not_of`具有采用 a 的重载`char const*`，因此最好提供两个重载：

```
// First, the one with the default argument, but without a temporary
std::string Trim(std::string const& s, char const* white_chars = " \t\n\r");

// Second, for convenience, one with a `std::string`
std::string Trim(std::string const& s, std::string const& white_chars); 
```

这也意味着在调用时`Trim(xx, "abc")`您将避免临时`std::string`生成:)

当然，矫枉过正的解决方案是重用已经编写的代码：[Boost String Algorithm](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo.html)有许多用于字符串操作的算法，包括[`trim`](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.trim_hpp).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T07:36:38.317

没问题。

临时字符串在每次调用时构造，并在语句结束时再次自动销毁。只要您不保存对它的（悬空）引用，就没有问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T07:44:26.157

一般来说，只有没有delete/free的new/malloc才会导致内存泄漏。在你的情况下，没有新的调用，所以应该没有内存泄漏。它`" \t\n\r"`在堆栈内存中，并且每次都被重用以创建一个实例`std::string &white_chars`

在栈中创建的临时实例，函数返回后释放。也没有内存泄漏。

# java - 使用 HtmlUnit 登录

> ID：10750301
> 
> 赞同：8
> 
> 时间：2012-05-25T07:31:26.040
> 
> 标签：java, htmlunit

我对 HtmlUnit 非常陌生。我想知道我是否能够使用 htmlunit 登录到站点并在站点中执行一些操作，例如我想登录到我的办公室门户并请假。

我正在使用 html 单元，它显示了一些错误，它可能与 html 单元有关，还是**有任何其他工具可以用于此目的**......
这是我的代码

```
final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);        
webClient.setJavaScriptEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true);

final HtmlPage page1 =  webClient.getPage("http://www.ccstechnologies.org/login.aspx/");
final HtmlForm form = page1.getFormByName("form1");         
final HtmlSubmitInput button =  form.getInputByName("BtnLogin");
final HtmlTextInput textField =  form.getInputByName("Username");
final HtmlPasswordInput pwd =  form.getInputByName("password");        
textField.setValueAttribute("username");
pwd.setValueAttribute("password");      

final HtmlPage page2 =  button.getEnclosingForm().click();  
String htmlBody = page2.getWebResponse().getContentAsString(); 

System.out.println("Base Uri 1 : "+page1);
System.out.println("Base Uri 2 : "+page2);

webClient.closeAllWindows(); 
```

但是当我打印`page2`它时，它只显示登录页面的 url，而不是返回主页 url。可能是什么问题呢 ？

这是我在单击表单时在控制台中得到的

> 2012 年 5 月 28 日上午 11:44:15 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。2012 年 5 月 28 日上午 11:44:16 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。基本 Uri 1：HtmlPage(http://www.ccstechnologies.org/login.aspx/)@2741851 基本 Uri 2：HtmlPage(http://www.ccstechnologies.org/login.aspx/)@2741851

单击按钮时生成的结果

```
May 29, 2012 10:00:02 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:02 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'text/javascript'.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler error
WARNING: CSS error: [259:24] Error in expression. Invalid token "=". Was expecting one of: <S>, <COMMA>, "/", <PLUS>, "-", <HASH>, <STRING>, ")", <URI>, "inherit", <EMS>, <EXS>, <LENGTH_PX>, <LENGTH_CM>, <LENGTH_MM>, <LENGTH_IN>, <LENGTH_PT>, <LENGTH_PC>, <ANGLE_DEG>, <ANGLE_RAD>, <ANGLE_GRAD>, <TIME_MS>, <TIME_S>, <FREQ_HZ>, <FREQ_KHZ>, <DIMENSION>, <PERCENTAGE>, <NUMBER>, <FUNCTION>, <IDENT>.
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler error
WARNING: CSS error: [259:29] Error in style rule. Invalid token "\r\n   ". Was expecting one of: "}", ";".
May 29, 2012 10:00:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler warning
WARNING: CSS warning: [259:29] Ignoring the following declarations in this rule.
HtmlPage(http://192.168.0.5/login.aspx)@23511316
HtmlPage(http://192.168.0.5/login.aspx)@17700115 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:50:29.313

好的，我调查了一下，似乎问题出在按钮上。我用这个替换了你的按钮代码行：

```
 final HtmlPage page2 =  (HtmlPage) form.getInputByValue("Login").click(); 
```

现在看来它至少尝试登录（并且页面当然会打印无效登录），因此它应该使用适当的凭据。在 java 中打印页面并查看它使用 system.out.println(page1.asText()) 或 asXml 取决于你想看到什么

我的代码终于是这样的：

```
final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);         
        webClient.setJavaScriptEnabled(true);
        webClient.getCookieManager().setCookiesEnabled(true);

     try{   final HtmlPage page1 =  webClient.getPage("http://www.ccstechnologies.org/login.aspx/");
        final HtmlForm form = page1.getFormByName("form1");         
        final HtmlSubmitInput button =  form.getInputByName("BtnLogin");
        final HtmlTextInput textField =  form.getInputByName("Username");
        final HtmlPasswordInput pwd =  form.getInputByName("password");        
        textField.setValueAttribute("username");
        pwd.setValueAttribute("password");      
System.out.println(page1.asText());
        final HtmlPage page2 =  (HtmlPage) form.getInputByValue("Login").click();

        String htmlBody = page2.getWebResponse().getContentAsString(); 
        System.out.println(page2.asText());
       System.out.println("Base Uri 1 : "+page1);
      System.out.println("Base Uri 2 : "+page2);

        webClient.closeAllWindows();}catch (Exception e) {
            // TODO: handle exception
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T13:34:21.730

这是您应该为 javascript 设置的内容：

```
webClient.getOptions().setJavaScriptEnabled(false); 
```

您也可以将这些添加到其中。

```
webClient.getOptions().setRedirectEnabled(true);
        webClient.getOptions().setThrowExceptionOnScriptError(false);
        webClient.getOptions().setCssEnabled(false);
        webClient.getOptions().setUseInsecureSSL(true);
        webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
        webClient.getCookieManager().setCookiesEnabled(true); 
```

这应该像对我一样解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T09:59:10.403

如果网站使用 ajax 调用登录。这对我有用。设置这个

```
webClient.setAjaxController(new NicelyResynchronizingAjaxController()); 
```

这将导致所有 ajax 调用都是同步的。

这就是我设置 WebClient 对象的方式

```
WebClient webClient = new WebClient(BrowserVersion.CHROME);
webClient.getOptions().setJavaScriptEnabled(true);
webClient.getOptions().setCssEnabled(false);
webClient.getOptions().setUseInsecureSSL(true);
webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
webClient.getCookieManager().setCookiesEnabled(true);
webClient.setAjaxController(new NicelyResynchronizingAjaxController());
webClient.getOptions().setThrowExceptionOnScriptError(false);
webClient.getCookieManager().setCookiesEnabled(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T18:37:49.883

尝试设置cookies启用，并尝试设置javascript启用忽略它可能打印的错误......（我曾经认为红色的错误是坏的，在html单元中似乎不一定）

# node.js - 如何在 Node.js 中获取本地 IP 地址？

> ID：10750303
> 
> 赞同：63
> 
> 时间：2012-05-25T07:31:26.987
> 
> 标签：node.js

我不是指

127.0.0.1

而是其他计算机用来访问机器的计算机，例如

192.168.1.6

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-25T14:42:34.320

[http://nodejs.org/api/os.html#os_os_networkinterfaces](http://nodejs.org/api/os.html#os_os_networkinterfaces)

```
var os = require('os');

var interfaces = os.networkInterfaces();
var addresses = [];
for (var k in interfaces) {
    for (var k2 in interfaces[k]) {
        var address = interfaces[k][k2];
        if (address.family === 'IPv4' && !address.internal) {
            addresses.push(address.address);
        }
    }
}

console.log(addresses); 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-12-26T15:25:35.210

[https://github.com/indutny/node-ip](https://github.com/indutny/node-ip)

```
var ip = require("ip");
console.dir ( ip.address() ); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-13T04:31:58.490

我的版本需要一个紧凑的单文件脚本，希望对其他人有用：

```
var ifs = require('os').networkInterfaces();
var result = Object.keys(ifs)
  .map(x => [x, ifs[x].filter(x => x.family === 'IPv4')[0]])
  .filter(x => x[1])
  .map(x => x[1].address); 
```

或者回答原来的问题：

```
var ifs = require('os').networkInterfaces();
var result = Object.keys(ifs)
  .map(x => ifs[x].filter(x => x.family === 'IPv4' && !x.internal)[0])
  .filter(x => x)[0].address; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-09-27T04:40:16.487

```
$ npm install --save quick-local-ip 
```

其次是

```
var myip = require('quick-local-ip');

//getting ip4 network address of local system
myip.getLocalIP4();

//getting ip6 network address of local system
myip.getLocalIP6(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-16T09:57:52.157

[https://github.com/dominictarr/my-local-ip](https://github.com/dominictarr/my-local-ip)

```
$ npm install -g my-local-ip
$ my-local-ip 
```

或者

```
$ npm install --save my-local-ip
$ node
> console.log(require('my-local-ip')()) 
```

一个非常小的模块就是这样做的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-17T13:42:25.443

野蛮单线来袭

根据接受的答案，这将根据地址属性构建具有条件条目的对象数组

```
[{name: {interface name}, ip: {ip address}}, ...] 
```

```
const ips = Object.entries(require("os").networkInterfaces()).reduce((acc, iface) => [...acc, ...(iface[1].reduce((acc, address) => acc || (address.family === "IPv4" && !address.internal), false) ? [{name: iface[0], ip: iface[1].filter(address => address.family === "IPv4" && !address.internal).map(address => address.address)[0]}] : [])], []);
console.log(ips); 
```

解释：

```
const ips = Object.entries(require("os").networkInterfaces()) // fetch network interfaces
.reduce((acc, iface) => [ // reduce to build output object
    ...acc, // accumulator
    ...(
        iface[1].reduce((acc, address) => acc || (address.family === "IPv4" && !address.internal), false) ? // conditional entry
        [ // validate, insert it in output
            { // create {name, ip} object
                name: iface[0], // interface name
                ip: iface[1] // interface IP
                .filter(address => address.family === "IPv4" && !address.internal) // check is IPv4 && not internal
                .map(address => address.address)[0] // get IP
            }
        ] 
        : 
        [] // ignore interface && ip
    )
], []); 
```

输出示例：

```
Array(4) [Object, Object, Object, Object]
length:4
__proto__:Array(0) [, …]
0:Object {name: "vEthernet (WSL)", ip: "172.31.xxx.x"}
1:Object {name: "Ethernet", ip: "10.0.x.xx"}
2:Object {name: "VMware Network Adapter VMnet1", ip: "192.168.xxx.x"}
3:Object {name: "VMware Network Adapter VMnet8", ip: "192.168.xx.x"} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T18:00:22.473

从 Node 版本 0.9.6 开始，就有一种简单的方法可以根据每个请求获取服务器的 IP 地址。如果您的机器有多个 IP 地址，或者即使您在 localhost 上做某事，这可能很重要。

`req.socket.localAddress`将根据当前连接返回正在运行的机器节点的地址。

如果您的公共 IP 地址为`1.2.3.4`并且有人从外部访问您的节点服务器，那么 的`req.socket.localAddress`值为`"1.2.3.4"`。

如果您从 localhost 访问同一服务器，则地址将是`"127.0.0.1"`

如果您的服务器有多个公共地址，那么 的值`req.socket.localAddress`将是套接字连接的正确地址。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-15T11:26:32.827

用一些 es6 和模块语法修改了一些[Ebrahim 的答案，以获得更精简的代码：](https://stackoverflow.com/a/38929214/5762431)

```
import { networkInterfaces } from "os";
const netInterfaces = networkInterfaces();
const [{ address }] = Object.values(netInterfaces).flatMap((netInterface) =>
  netInterface.filter((prop) => prop.family === "IPv4" && !prop.internal)
);
console.log(address) // -> '192.168...' 
```

# iphone - 如何从另一个 UIImageView 中删除 UIImageView

> ID：10750305
> 
> 赞同：0
> 
> 时间：2012-05-25T07:31:36.143
> 
> 标签：iphone, ipad

在 touchesBegan 方法中，我将 stampBrush Image 添加到 drawImage 中，两者都是 UIImageView

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

     stampBrush = [[UIImageView alloc] initWithImage:[[PaintColor stampImages] objectAtIndex:[stamp_Default integerForKey:STAMP_TYPE]]];

            [stampBrush setFrame:CGRectMake(lastPoint.x, lastPoint.y, stampBrush.image.size.width,stampBrush.image.size.height)];
            [drawImage addSubview:stampBrush];

} 
```

现在我试图在 removeStampBrush 点击时一一删除！哪个 stampBrush 需要从 drawImage 中删除！

```
-(void)removeStampBrush:(UIButton *)sender{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:32:55.543

```
if([stampBrush superView])
{
    [stampBrush removeFromSuperView];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:05:23.413

由于您想以相反的顺序删除图章，我将扩展 UIImageView 如下：

你的ImageView.h

```
@interface YourImageView : UIImageView {
    NSMutableArray *stamps;
}

- (void)addStamp:(UIImageView *)stamp;
- (void)removeLastStamp;

@end 
```

你的ImageView.m

```
#import "YourImageView.h"

@implementation YourImageView

-(void)dealloc {
    [stamps release];

    [super dealloc];
}

- (void)addStamp:(UIImageView *)stamp {
    if (stamps == nil) {
        stamps = [[NSMutableArray array] retain];
    }

    [stamps addObject:stamp];
    [self addSubview:stamp];
}

- (void)removeLastStamp {
    if (stamps.count > 0) {
        UIImageView *stamp = [stamps lastObject];
        [stamp removeFromSuperview];

        [stamps removeLastObject];
    }
}

@end 
```

现在从您的触摸事件调用`[drawImage addStamp:stampBrush]`中删除最后一个`[drawImage removeLastStamp]`

# java - WSO2 ESB 无法将完整的 JSON 数据转换为 XML

> ID：10750309
> 
> 赞同：8
> 
> 时间：2012-05-25T07:31:51.200
> 
> 标签：java, xml, json, wso2, wso2esb

我正在构建一个 POC。我为 Google Plus 创建了一个直通代理服务。在不使用任何代理服务的情况下，我得到这是我的输出：

```
 {
   "kind":"plus#person",
   "etag":"\"ExituU7aUpmkkfyD52VulzptThw/4J1clegrhxYC2fsJOu2XWCs1Ewg\"",
   "id":"117488614303967062311",
   "displayName":"Abhi NeoN",
   "name":{
      "familyName":"NeoN",
      "givenName":"Abhi"
   },
   "tagline":"hey guys ! ssup!! check out ma recnt videos... uploaded",
   "gender":"male",
   "aboutMe":"\u003cb\u003ehie, abhishek - ma full name \u003c/b\u003e\u003cdiv\u003e\u003cb\u003em a DANCER ,\u003c/b\u003e\u003c/div\u003e\u003cdiv\u003e\u003cb\u003ei luv ma dancing .\u003c/b\u003e\u003c/div\u003e\u003cdiv\u003e\u003cb\u003ei care ma dancing ,\u003c/b\u003e\u003c/div\u003e\u003cdiv\u003e\u003cb\u003ei jus hv a gr8 thng in me dats ma dancing.\u003c/b\u003e\u003c/div\u003e",
   "relationshipStatus":"single",
   "url":"https://plus.google.com/117488614303967062311",
   "image":{
      "url":"https://lh6.googleusercontent.com/-tF-ip0tUxD4/AAAAAAAAAAI/AAAAAAAAAAA/WKI3USUh_DA/photo.jpg?sz=50"
   },
   "urls":[
      {
         "value":"https://plus.google.com/117488614303967062311",
         "type":"profile"
      },
      {
         "value":"https://www.googleapis.com/plus/v1/people/117488614303967062311",
         "type":"json"
      }
   ],
   "organizations":[
      {
         "name":"our lady of nazareth high school",
         "title":"science",
         "type":"school"
      },
      {
         "name":"",
         "title":"BLUEBYTES",
         "type":"work"
      }
   ]
} 
```

但是当我尝试使用简单的直通服务来做同样的事情时，我只得到：

```
{
   "kind":"plus#person"
} 
```

我在 wso2esb 网站上读到他们有一个错误，解决错误的解释是收到的 json 数据格式不正确。但是现在我该如何解决这个问题。我的意思是他们可以在 esb 将其转换为 json 数据之前以任何方式操作 json 数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:38:08.330

我们已经在 ESB 的最新版本（版本 4.5.0）中解决了这个问题。默认情况下，它带有 JSONMessageFormatter/JSONBuilder，可以处理带有多个键的 JSON 有效负载。

我们还提出了另一种解决方案，用于处理涉及不同类型的 JSON <--> XML（或 JSON <--> JSON）转换的消息流。`JSONStreamBuilder`并可`JSONStreamFormatter`用于使用“脚本”中介来实现此类场景。查看 ESB 4.5.0 中的示例 #441。

运行示例 #441；

*   在 repository/conf/axis2/axis2.xml 文件中添加`JSONStreamBuilder`和`JSONStreamFormatter`作为 JSON 的构建器和格式化程序
*   部署 SimpleStockQuoteService
*   启动示例axis2server
*   `ant newjsonclient`使用 ' '运行 JSON 客户端

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T05:10:34.293

可靠地将 json 转换为 xml 并再次转换回来的唯一方法是通过在 xml 中使用类型提示。默认转换器不这样做。它 1\. 删除第一个属性之后的所有内容 2\. 从 xml 到 json 时将单个元素列表与属性混淆

我使用 json-util 库重新实现了转换类，该库将 json 转换为包含类型提示作为元素属性的 xml，以确保没有歧义。

通过这种方式，我们可以通过 WSO2 为所有基于 json 的休息服务进行智能代理（即内容路由和调解传输和有效负载），没有任何问题

这解决了问题（我认为骆驼默认这样做）。

这是pom文件和代码：

**将 jar 放入 /repository/components/lib**

**您必须更新axis2.xml 中内容类型“application/json”的messageformatter 和messagebuilder 映射**

* * *

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <name>wso2 json/xml converter</name>
    <groupId>x.y.z</groupId>
    <artifactId>wso2converter</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <properties>
        <jdk.version>1.6</jdk.version>
    </properties>

    <build>
        <finalName>wso2converter</finalName>
        <resources>
            <resource>
                <filtering>false</filtering>
                <directory>src/main/resources</directory>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${jdk.version}</source>
                    <target>${jdk.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>1.0.1</version>
                <executions>
                    <execution>
                        <id>enforce-jdk</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>display-info</goal>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <requireJavaVersion>
                                    <version>[${jdk.version},)</version>
                                </requireJavaVersion>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>net.sf.json-lib</groupId>
            <artifactId>json-lib</artifactId>
            <version>2.3</version>
            <classifier>jdk15</classifier>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-api</artifactId>
            <version>1.2.13</version>
        </dependency>

        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-kernel</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>xom</groupId>
            <artifactId>xom</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.synapse</groupId>
            <artifactId>synapse-core</artifactId>
            <version>2.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>1.1.5</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.13</version>
            <!--scope>provided</scope-->
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.4</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

</project> 
```

* * *

```
package a.b.wso2;

import java.io.InputStream;
import net.sf.json.JSON;
import net.sf.json.JSONSerializer;
import net.sf.json.xml.XMLSerializer;
import org.apache.axiom.om.OMElement;
import org.apache.axiom.om.util.AXIOMUtil;
import org.apache.axis2.AxisFault;
import org.apache.axis2.builder.Builder;
import org.apache.axis2.context.MessageContext;
import org.apache.commons.io.IOUtils;
import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Logger;

public class WsoJtoX implements Builder {

    Logger logger = Logger.getLogger("a.b.wso2converter");

    @Override
    public OMElement processDocument(InputStream is, String contentType,
            MessageContext messageContext) throws AxisFault {
        String jsonData = "";
        try {

            jsonData = IOUtils.toString(is,"UTF-8");

            String output = process(jsonData);

            OMElement e = AXIOMUtil.stringToOM(output);
            return e;

        } catch (Exception e) {
            logger.error("error converting json string " + jsonData, e);
            if (e instanceof AxisFault) {
                throw (AxisFault) e;
            }
            throw new AxisFault("(B"+counter+") error converting json to xml", e);
        }

    }

    static int counter=0;

    public String process(String jsonData) throws AxisFault {

        try {
            String tran = "__ns__";

            jsonData=jsonData.replace("\r", "").trim();
            //jsonData=jsonData.replace("\n", "");

            String decoded = (jsonData.replaceAll("\"([a-zA-Z0-9_]*)\\:([a-zA-Z0-9]*)\"(\\s*)(:)", "\"$1" + tran + "$2\"$3:"));

            counter++;

            if (logger.isDebugEnabled()) {
                logger.debug("\n>>>>> (B"+counter+") converting json\n " + jsonData + "\n====");
            }

            XMLSerializer serializer = new XMLSerializer();
            JSON json = JSONSerializer.toJSON(decoded);

            String xml = serializer.write(json);

            //add in the soap stuff
            StringBuilder sb = new StringBuilder();
            sb.append("<soap:Envelope xmlns:soap=\"http://www.w3.org/2001/12/soap-envelope\" soap:encodingStyle=\"http://www.w3.org/2001/12/soap-encoding\"> <soap:Body>");
            sb.append(xml.replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", ""));
            sb.append("</soap:Body></soap:Envelope>");

            if (logger.isDebugEnabled()) {
                logger.debug("\n==== (B"+counter+") to xml\n" + sb.toString()+"\n<<<<<");
            }

            return sb.toString();

        } catch (Exception e) {
            throw new AxisFault("(B"+counter+") error transforming json to xml", e);
        }

    }

} 
```

* * *

```
package a.b.wso2;

import java.io.IOException;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.net.URL;
import net.sf.json.JSON;

import net.sf.json.xml.XMLSerializer;
import org.apache.axiom.om.OMElement;
import org.apache.axiom.om.OMOutputFormat;
import org.apache.axiom.om.util.AXIOMUtil;
import org.apache.axis2.AxisFault;
import org.apache.axis2.Constants;
import org.apache.axis2.context.MessageContext;
import org.apache.axis2.transport.MessageFormatter;
import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Logger;

public class WsoXtoJ implements MessageFormatter {

    Logger logger = Logger.getLogger("a.b.wso2converter");

    private static int counter=0;

    public String convert(String xData) {

        counter++;

            if (logger.isDebugEnabled()) {
                logger.debug("\n]]]]] (A"+counter+") converting xml\n " + xData + "\n-----");
            }

        try {
            String tran = "__ns__";
            XMLSerializer serializer = new XMLSerializer();
            OMElement e = AXIOMUtil.stringToOM(xData);
            OMElement b = (OMElement) e.getChildrenWithLocalName("Body").next();
            b = (OMElement) b.getChildElements().next();
            String xfrag = b.toStringWithConsume();
            String str = "";
            JSON j = serializer.read(xfrag);
            str = j.toString();
            String nstr = str.replaceAll("\"([a-zA-Z0-9_]+)" + tran + "([a-zA-Z0-9]+)\"(\\s*)(:)", "\"$1:$2\"$3:");  //", "\"$1:$2\"");

            if (logger.isDebugEnabled()) {
                logger.debug("\n----- (A"+counter+") to json\n" + nstr+"\n[[[[[");
            }

            return nstr;

        } catch (Exception e) {
            throw new RuntimeException(e);
        }

    }

    @Override
    public String formatSOAPAction(MessageContext msgCtxt, OMOutputFormat format,
            String soapActionString) {
        return null;
    }

    @Override
    public byte[] getBytes(MessageContext ctx, OMOutputFormat format)
            throws AxisFault {
        String env="";
        try {
            OMElement element = ctx.getEnvelope().getBody().getFirstElement();
            String payload = this.convert(element.toString());
            return payload.getBytes(format.getCharSetEncoding());
        } catch (UnsupportedEncodingException e) {
            logger.error("(A"+counter+") error converting xml to json "+ctx.getEnvelope().toString());
            throw AxisFault.makeFault(e);
        }
    }

    @Override
    public String getContentType(MessageContext msgCtxt, OMOutputFormat format,
            String soapActionString) {
        String contentType = (String) msgCtxt.getProperty(Constants.Configuration.CONTENT_TYPE);
        String encoding = format.getCharSetEncoding();
        if (contentType == null) {
            contentType = (String) msgCtxt.getProperty(Constants.Configuration.MESSAGE_TYPE);
        }
        if (encoding != null) {
            contentType += "; charset=" + encoding;
        }
        return contentType;
    }

    @Override
    public URL getTargetAddress(MessageContext msgCtxt, OMOutputFormat format,
            URL targetURL) throws AxisFault {
        return targetURL;
    }

    @Override
    public void writeTo(MessageContext msgCtxt, OMOutputFormat format,
            OutputStream out, boolean preserve) throws AxisFault {
        try {
            out.write(this.getBytes(msgCtxt, format));
            out.flush();
        } catch (IOException e) {
            throw AxisFault.makeFault(e);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T08:30:18.137

这是当前axis2 JSON builder/formatter的限制之一。我们目前正在为 JSON 开发一个新的构建器/格式化器对，它不会转换 JSON <-> XML。相反，它（构建器）将 JSON 消息存储为流，并且脚本中介可用于从该流构建 JSON 对象。例如，如果我们发送 {"a" : "x", "b" : "y"} 作为请求，在 ESB 中，我们可以使用 javascript 将此请求作为 JSON 对象进行操作。

```
var a = mc.getJSON().a.toString();
var b = mc.getJSON().b.toString();
mc.setPayloadXML(
    <m:A xmlns:m="http://example.json">
        <m:a>{a}</m:a>
        <m:b>{b}</m:b>
    </m:A>); 
```

类似`mc.setJSON()`的方法可用于设置任意 JSON 对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T14:48:00.980

我有同样的问题。

根据我的经验，WSO2 ESB（基于 Axis2-json）的 JSON 解析器仅支持 JSON 的一个子集：

1.  JSON 必须以“{”开头，即根不能有 JSONArray。

2.  只考虑第一个键值对。这是因为 JSON 映射到类似 XML 的数据结构，而 XML 必须有根，所以第一个键值对被认为是根。

3.  第一个键值对的值不能是数组。这是因为转换器必须知道每个值应该使用哪个 XML 标记：

    例如：... { "key": ["val1", "val2", ...]} -> <key>val1</key><key>val2</key>....

我在这里遇到了同样的问题，想找到解决办法。我的想法是创建一个新的 JSONBuilder（构建内部 SOAP 消息结构的解析器）和 JSONFormatter（序列化器）以使用虚拟根（例如 { " **root** " : ... } ）来伪造解析器。

# javascript - 是否可以在我现有的 webview 中通过 Javascript 打开一个新的本机 webbrowser？

> ID：10750314
> 
> 赞同：2
> 
> 时间：2012-05-25T07:32:13.920
> 
> 标签：javascript, html, jquery-mobile, webview

```
<a href="http://the-page-i-want-to-jump" 
target="_blank"> <%= image_tag ("banner_bb_en.png", :alt => "",
:style => "width:100%;") %> </a> 
```

这是我的服务器端代码。当我单击黑莓 webview 中的图像时，它会跳转到 webview 中的新页面。但是我想通过打开一个与默认浏览器关联的新的本机网络浏览器来改变它。（我现在不应该修改客户端代码）
有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:58:57.240

通过一些选项，javascript 弹出窗口可以做到！但在服务器端，我不认为 PHP 可以那样。

看看弹出窗口：http: [//www.blazonry.com/javascript/windows.php](http://www.blazonry.com/javascript/windows.php)

# php - 我如何在表格中显示这个数组，用for？

> ID：10750315
> 
> 赞同：-5
> 
> 时间：2012-05-25T07:32:14.787
> 
> 标签：php

```
<?php 
$ex = array
(
    'Product' => array
        (
            '0' => array
                (
                    'item_id' => '1',
                    'product_name' => 'Paine',
                    'product_description' => 'Intermediala',
                    'product_price' => '2',
                    'product_weight' => '300',
                    'product_quantity' => '300',
                    'product_photos ' => '0',
                    'product_colors ' => '',
                ),

            '1' => array
                (
                  'item_id' => '2',
                    'product_name' => 'Apa',
                    'product_description' => 'plata',
                    'product_price' => '4',
                    'product_weight' => '4000',
                    'product_quantity' => '',
                    'product_photos' => '0',
                    'product_colors' => '',
                ),
            '2' => array
                (
                    'item_id' => '3',
                    'product_name' => 'Apa',
                    'product_description' => 'minerala',
                    'product_price' => '4',
                    'product_weight' => '4000',
                    'product_quantity' => '',
                    'product_photos' => '0',
                    'product_colors' => '',
                )   

        )
);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:39:28.407

```
<table border="1"><?php
foreach ($ex['Product'] as $row) {
    echo '<tr>';
    echo '<td>'.$row['item_id'].'</td><td>'.$row['product_name'].'</td>';
    echo '</tr>';
}
?></table> 
```

# prolog - Prolog XPCE 对话框返回选择列表

> ID：10750316
> 
> 赞同：0
> 
> 时间：2012-05-25T07:32:20.177
> 
> 标签：prolog, swi-prolog, xpce

我有另一个 Prolog 问题，我找不到如何解决它的线索。

这是我的代码

```
list(Q):-
new(D,dialog('Sehenswuerdigkeiten')),
send_list(D,append,
[
new(Von,menu(von,cycle)),
new(Zu,menu(zu,cycle)),
new(@button,button('Los',message(@prolog,packing,Von?selection,Zu?selection,Q)))

]),
findall(X,sehenwuerdigkeit(X),Y),
send_list(Von, append,Y),
send_list(Zu, append,Y),
send(D,open).

packing(X,Y,Q):-Q=[X,Y]. 

:-consult('sw.pl'),list(Q). 
```

我需要两种循环选择来启动另一个功能。但是prolog无法打开打包操作。

如果对话框返回 Q=[first selection,second selection]，问题就解决了。

希望您能够帮助我。我对此感到非常沮丧......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:27:35.710

您应该阅读此页面[http://www.swi-prolog.org/packages/xpce/UserGuide/modal.html](http://www.swi-prolog.org/packages/xpce/UserGuide/modal.html)

```
list(Q):-
    new(D,dialog('Sehenswuerdigkeiten')),
    send_list(D,append,
      [new(Von,menu(von,cycle)),
       new(Zu,menu(zu,cycle)),
       new(_,
           button('Los',
              message(D,return,[Von,Zu])))]),
    findall(X,city(X),Y),
    send_list(Von, append,Y),
    send_list(Zu, append,Y),
    get(D,confirm, Answer),
    get(Answer, element(1), A),
    get(A, selection, AV),
    get(Answer, element(2), B),
    get(B, selection, BV),
    send(D, destroy),
    Q = [AV, BV].

city(berlin).
city(london).
city(paris).
city(rom). 
```

# c# - WCF : 检查交换的大小

> ID：10750321
> 
> 赞同：4
> 
> 时间：2012-05-25T07:32:55.560
> 
> 标签：c#, wcf, performance, benchmarking

要进行一些 WCF 基准测试，我需要有一种方法来获取交换数据的大小（包括所有标头（甚至 TCP）/压缩/...）。

它在一个更大的基准测试中（它也尝试了不同的绑定，编码，......）所以我需要以编程方式而**不是**通过像wireshark这样的东西。

有没有钩子可以做到这一点？

所有通道/绑定/编码器都是以编程方式创建的，以自动化一些测试。

我找到了一些方法（[http://devlicio.us/blogs/derik_whittaker/archive/2011/02/03/how-to-intercept-a-wcf-message-to-track-message-size.aspx](http://devlicio.us/blogs/derik_whittaker/archive/2011/02/03/how-to-intercept-a-wcf-message-to-track-message-size.aspx)），但我'不确定它是否适用于非文本数据。或[http://zamd.net/2008/08/15/calculating-wcf-message-size/](http://zamd.net/2008/08/15/calculating-wcf-message-size/)但我不知道如何启动它（并且不确定它是否适用于我的自定义编码器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:43:06.053

编写一个 MessageInspector。这将为您提供所有消息的事件。 [http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.clientruntime.messageinspectors.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.clientruntime.messageinspectors.aspx)

您也许可以使用 WMI 性能计数器 [http://msdn.microsoft.com/en-us/library/ms735098.aspx](http://msdn.microsoft.com/en-us/library/ms735098.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:40:16.213

您有 2 个选项：

*   使用 WCF 可扩展性。这通常需要更多的工作，并且您需要考虑各种 wcf 情况。
*   使用像wireshark这样的带外解决方案

我不确定你为什么更喜欢前者 - 我建议尝试使用wireshark，我相信它也可以自动化。无论如何，如果您想在 wcf 中执行此操作，您应该实现一个自定义消息编码器来计算线路上的字节大小。这将需要是一个通用编码器，其中包含任何其他编码器。这是通用编码器[的示例](https://stackoverflow.com/questions/10589561/attempting-to-migrate-from-wse-3-0-to-wcf-for-client-code/10661470#10661470)。请注意，编码器方法将仅考虑消息大小，而不考虑其之上的任何框架（例如 HTTP 标头）。这就是为什么我认为wireshark 更适合您的情况。

# java - Java中需要Iterator类吗？

> ID：10750327
> 
> 赞同：4
> 
> 时间：2012-05-25T07:33:12.920
> 
> 标签：java

我知道这个问题可能很模糊。但我问这个的原因是因为这门课一定是经过深思熟虑的。

在浏览 SO 上的几个问题时，我想到了这个问题。

考虑以下代码：

```
class A
{

    private int myVar;

    A(int varAsArg)
    {
          myVar = varAsArg;
    }

   public static void main(String args[])
   {

      List<A> myList = new LinkedList<A>();
      myList.add(new A(1));
      myList.add(new A(2));
      myList.add(new A(3));

      //I can iterate manually like this:
      for(A obj : myList)
                 System.out.println(obj.myVar);

      //Or I can use an Iterator as well:
      for(Iterator<A> i = myList.iterator(); i.hasNext();)
      {
         A obj = i.next();
         System.out.println(obj.myVar);
      }
   }
} 
```

从上面的代码中可以看出，我可以替代使用`for`循环进行迭代，而我可以使用`Iterator`类`hasNext()`和`next()`方法来做同样的事情。类似地，该方法可以有一个示例`remove()`。并且有经验的用户评论了使用`Iterator`类而不是使用`for`循环遍历`List`. 为什么？

更让我困惑的是，这个`Iterator`类只有[三个](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)方法。这些功能也可以通过编写一些不同的代码来实现。

有些人可能会争辩说，许多类的功能可以通过编写自己的代码来实现，而不是使用`class`make 来实现。是的，没错。但正如我所说，`Iterator`类只有三个方法。那么，当同样的工作可以用一个简单的代码块完成时，为什么还要麻烦创建一个额外的类，这也不是太复杂而难以理解。

* * *

编辑：

虽然我在这里，但由于许多答案都说我无法在不使用的情况下实现删除功能`Iterator`，所以我只想知道以下内容是否错误，或者是否会产生一些不良结果。

```
for(A obj : myList)
{
           if(obj.myVar == 1)
                 myList.remove(obj);
} 
```

上面的代码片段不是做同样的事情`remove()`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T07:35:54.950

`Iterator``for`早在您在 Java 的演变中展示的声明之前就出现了。这就是它存在的原因。此外，如果您想删除某些内容，使用`Iterator.remove()`是您可以做到的唯一方法（您不能使用该`for`语句）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:37:41.247

首先，for-each 构造实际上使用了幕后的`Iterator`接口。但是，它不会将底层`Iterator`实例暴露给用户代码，因此您不能在其上调用方法。

这意味着有些事情需要显式使用`Iterator`接口，而无法通过使用 for-each 循环来实现。

删除当前元素就是这样一种用例。

有关其他想法，请参阅[`ListIterator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html)界面。它是一个双向迭代器，支持插入元素和改变光标下的元素。这些都不能通过 for-each 循环来完成。

> ```
> for(A obj : myList)
> {
>            if(obj.myVar == 1)
>                  myList.remove(obj);
> } 
> ```
> 
> 上面的代码片段不是和 remove() 做同样的事情吗？

不，不是的。[`ConcurrentModificationException`](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)当您尝试执行此操作时，我所知道的所有标准容器都会抛出。即使它被允许工作，它也是模棱两可的（如果`obj`两次出现在列表中怎么办？）并且效率低下（对于链表，它需要线性而不是恒定时间）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T07:40:29.560

foreach 构造 ( `for (X x: list)`) 实际上`Iterator`在内部用作其实现。您可以将其`Iterable`作为元素来源提供任何内容。

而且，正如其他人已经指出的那样：Java 中的迭代器比 foreach 更长，它提供`remove()`.

另外：您将如何实现自己的提供程序类（`myList`在您的示例中）？您制作它`Iterable`并实现一个创建`Iterator`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T07:36:25.087

一方面，`Iterator`它是在将*foreach*循环（如上面的代码示例所示）引入 Java 之前创建的。（前者出现在 Java2 中，后者仅出现在 Java5 中）。

从 Java5 开始，foreach 循环确实是最常见场景的首选习惯用法（当您一次迭代一个`Iterable`，以默认顺序，并且不需要删除或索引元素时）。请注意，foreach 在后台使用标准集合类的迭代器；换句话说，它只是语法糖。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T07:37:49.517

Iterator，listIterator 都用于允许用户不同的权限，如 list iterator 有 9 个方法，但 iterator 只有 3 个方法，但具有使用 for 循环无法实现的删除功能。枚举是另一件事，它也用于仅提供读取权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T07:42:49.767

迭代器是经典 GoF 设计模式的实现。通过这种方式，您可以从迭代的“技术代码”（迭代器）和您的业务代码中实现清晰的行为分离。

想象一下，您必须更改“下一个”行为（例如，不是通过获取下一个元素，而是获取下一个 EVEN 元素）。如果你只依赖`for`循环，你将不得不手动更改每个 for 循环，就像这样

```
for (int i; i < list.size(); i = i+2) 
```

而如果您使用迭代器，您可以简单地覆盖/重写“next()”和“hasNext()”方法，并且更改将在您的应用程序中随处可见。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T08:10:47.443

我认为你的问题的答案是抽象。编写迭代器是因为抽象迭代不同的集合集。

每个集合都有不同的方法来迭代它们的元素。ArrayList 具有索引访问。队列有 poll 和 peek 方法。Stack 有 pop 和 peek。

通常你只需要迭代元素，这样 Iterator 就会发挥作用。您不关心需要迭代哪种类型的 Collection。您只需调用 iterator() 方法和用户迭代器对象本身来执行此操作。

如果您问为什么不在 Collection 接口上放置相同的方法并摆脱额外的对象创建。您需要知道您在集合中的当前位置，因此您不能在 Collection 中实现 next 方法，因为您不能在不同的位置使用它，因为每次调用 next() 方法时它都会增加索引（简化每个集合都有不同的实现）所以您如果您在不同的地方使用相同的集合，将跳过一些对象。此外，如果集合支持并发，则不能在集合中编写多线程安全的 next() 方法。

通过迭代器以外的其他方式从集合中删除对象通常是不安全的。Iterator.remove() 方法是最安全的方法。对于 ArrayList 示例：for(int i=0;i

# android - 从 Android 库（.jar）调用活动？

> ID：10750328
> 
> 赞同：1
> 
> 时间：2012-05-25T07:33:13.780
> 
> 标签：android, android-intent, jar, android-activity

我创建了一个包含多个活动的 Android 库项目。我想在其他项目中重用这些活动。我怎样才能做到这一点？我添加了项目vi：

> 项目->Android->添加（Android 库项目。）

然后将所需的详细信息添加到 Android Manifest 文件中。

Android 清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="org.testlib.com"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-libraryandroid:name="org.mainlib.com" android:required="true"/>
    <application android:icon="@drawable/ic_launcher" 
        android:label="@string/app_name" >
        <activity android:name=".TestLibActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="org.mainlib.com.MainActivity"/>                 
    </application>    
</manifest> 
```

开始活动的代码：

```
Intent myintent=new Intent(v.getContext(),MainActivity.class);
startActivityForResult(myintent, 0); 
```

如何从我的 jar 文件中调用活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:39:06.697

我不明白你的问题。你的意思是

> 如何从库外部启动“TestLibActivity”

?

如果是这种情况，您可以通过调用来调用它`Intent myintent=new Intent(v.getContext(),org.testlib.com.TestLibActivity.class); startActivityForResult(myintent, 0);`

当然，您必须在您的活动中添加正确的导入并将库添加到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:39:17.753

如果您创建了一个 android 库并正确添加了它（看起来像这样）。然后，您唯一要做的就是与常规活动相同的事情。唯一的区别是您从库项目而不是您自己的项目中导入路径。

在旁注中，您不需要在清单中添加库。您只需要通过项目属性添加库项目。

# java - 什么是android java中的会话变量？

> ID：10750329
> 
> 赞同：-1
> 
> 时间：2012-05-25T07:33:13.980
> 
> 标签：java, android, session-variables

我更喜欢android和java。android java中是否有可用的会话变量？如果是这样，请让我知道它的目的和过程。如果可能的话，提供样品。

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:48:04.270

在谈论会话时，会话是什么意思

因为如果您谈论 Session 来存储登录凭据或用户信息。

它可能是一个[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref).

如果您谈论临时数据存储，例如从 Internet 下载的数据或其他与应用程序相关的数据，这些数据旨在在整个应用程序中共享，可以使用[`Application`类](http://developer.android.com/reference/android/app/Application.html)、`static`变量、[`File`IO](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)等多种方式共享[`Sqlite`](http://developer.android.com/guide/topics/data/data-storage.html#db)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T14:14:05.410

Android 没有我知道的会话变量。但是，如果您的 Android 应用程序正在与 Web 服务器通信，则您的应用程序可以利用 Web 服务器上的 PHP 会话变量。方法如下：

1) Android 应用程序将用户的登录凭据发送到您的 Web 服务器 (www.your-web-server.com/login.php)
2) login.php 检查凭据，然后调用`session_start()`以开始会话。
3) login.php 然后调用类似这样的方法：`my_current_session = session_id();`为了获取当前会话的会话 ID。
4) login.php 然后将会话 ID ( `my_current_session`) 发送回 Android 应用程序。我建议将会话 ID 回显为 JSON 编码的字符串 (json_encode)。
5) Android 应用程序将会话 ID 存储在本地。正如其他一些答案所建议的那样，您可以将其存储在 SharedPreferences 中。或者，您可以将其存储在[设备本地的 SQLite 数据库中](http://developer.android.com/guide/topics/data/data-storage.html#db)。
6) 然后您可以[在请求标头中包含会话 ID](https://stackoverflow.com/questions/16793647/how-to-set-request-header-for-sending-data-from-android-apps-to-our-server)从 Android 应用程序到 Web 服务器的所有未来 GET 和 POST 请求。在 Web 服务器上运行的 PHP 将识别会话 ID 并使相关的会话变量可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:47:12.147

在会话中没有可用于存储值的 api，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，或者可以使用静态变量来存储您想要在会话中保存的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:37:49.597

你为什么需要它。在应用程序启动期间有一些应用程序变量会被初始化。你也可以让你的单例类来实现这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T08:42:19.690

使用共享首选项。

你可以找到一个[例子](http://www.tutorialspoint.com/android/android_shared_preferences.htm)

# android - Android中语音邮件收到通知消息的广播/事件

> ID：10750338
> 
> 赞同：0
> 
> 时间：2012-05-25T07:33:45.450
> 
> 标签：android, events, broadcastreceiver, voicemail

在我的应用程序中，我阻止了来电，因此它被重定向到配置的语音邮件。

来电者发出语音邮件后，我在设备上收到一条通知消息，上面写着“您有新的语音邮件”并且它会发出哔哔声。

一旦设备收到语音邮件收到的通知消息，我想通过我的应用程序禁用此哔声。

有没有android提供的广播或事件？

我怎样才能做到这一点？

我的应用程序基于 android 2.2 版。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:09:47.247

不幸的是，没有。从 API 级别 14（Android 4.0+）开始，他们添加了新语音邮件消息的广播意图，但这仅适用于运行 API 级别为 14 及以上的 Android 的设备。

[http://developer.android.com/reference/android/provider/VoicemailContract.html](http://developer.android.com/reference/android/provider/VoicemailContract.html)

# php - 错误输出在文本中有特殊符号

> ID：10750340
> 
> 赞同：0
> 
> 时间：2012-05-25T07:33:48.567
> 
> 标签：php

我有一个示例代码：

```
$text = '<a title="L'Oreal Pure Zone - 80ml">L'Oreal Pure Zone</a>'; 
```

当我回显代码时，符号错误`'`

```
echo json_encode($text); 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:35:23.293

您必须[转义单引号](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)：

```
$text = '<a title="L\'Oreal Pure Zone - 80ml">L\'Oreal Pure Zone</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:35:24.807

```
$text = '<a title="L\'Oreal Pure Zone - 80ml">L\'Oreal Pure Zone</a>'; 
```

这是一种可能的方式

# jquery - 对象元素上的 jQuery 事件有效吗？

> ID：10750344
> 
> 赞同：1
> 
> 时间：2012-05-25T07:34:06.147
> 
> 标签：jquery, events, object

我无法成功地将 jQuery 事件侦听器附加到 type 的元素上`<object>`，并让它接收在该事件上触发的任何事件。

因此：

```
<object></object> 
```

使用 JavaScript：

```
$('object').on('foo', function(evt, data){ alert(data) });
$('object').trigger('foo', 'object-on-object'); 
```

如果我有完全相同的代码`$('body')`，那么它工作正常。`<body>`另外，如果我在, 和上监听事件`$('object').trigger()`，那么我确实得到了事件。

我有一个[jsFiddle](http://jsfiddle.net/bxnKR/1/)可以证明这一点。在其中您将看到该`bar`事件没有导致输出，但两个`foo`事件都有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:14:09.257

所以，答案似乎是否定的。根据[这个线程](http://groups.google.com/group/jquery-dev/browse_thread/thread/8fbbd73d142dad78/82759f4dd14936e9?#82759f4dd14936e9)，存在与绑定事件相关的问题，或者可能使用 jQuery 和`<object>`元素做任何有趣的事情。

解决方案似乎是让事件在其他地方冒泡。`$(document)`似乎是一个有效的选择，因此您可以执行以下操作：

```
$(document).on('foo', 'object', {data: data}, handler);

$('object').trigger('foo'); 
```

这对于我想要的东西来说是一种错误的方式（我希望能够告诉消费者监听插件元素上的事件），但它工作得很好。您无法在代码中修复的内容，请在文档中修复。

# git - Git Hub GitIgnore 错误

> ID：10750351
> 
> 赞同：2
> 
> 时间：2012-05-25T07:34:29.207
> 
> 标签：git, github, gitignore

我不断收到此错误：

```
error: Your local changes to the following files would be overwritten by merge:
    .gitignore 
```

如何让它忽略我的 HOME 目录中的 .gitignore 文件？

我的 .gitignore 看起来像这样并且被忽略：

```
# Can also ignore all directories and files in a directory.
app/config/**
app/config/**/*
plugins/**
vendors/shells/**/* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:37:54.803

不要忽视它。

但是提交它。没有理由不保存此文件。

如果您提交它然后合并，合并将（可能正确）添加您的规则和收到的规则。

# imagemagick - 如何为 Imagick 标题分别着色文本和背景？

> ID：10750352
> 
> 赞同：3
> 
> 时间：2012-05-25T07:34:29.533
> 
> 标签：imagemagick, imagick, caption

我只想为标题文本着色，而不是整个标题框（或背景）。在 Imagemagick 6.3.7 之前，我可以使用此代码来获得红色文本：

```
$im->newPseudoImage(300, 300, "caption:" . "Put your text" );
$im->colorizeImage('#ff0000',1.0); 
```

我已经升级了，因为我需要使用以下代码设置字体和字体大小：

```
$im->setFont("somefont.ttf");
$im->setpointsize(72); 
```

现在 colorizeImage 不能以同样的方式工作，因为它不仅为标题 TEXT 着色，而且还为标题背景着色 ..！

例如，如果我设置黑色背景和白色文本：

```
$im->newPseudoImage(300, 300, "caption:" . "Put your text" );
$im->setBackgroundColor('black');
$im->colorizeImage('white',1.0); 
```

我在白色文本或白色框（框的文本颜色）后面有一个白色背景！

我尝试了不同的东西，setBackgroundColor 在 colorizeImage 之前或之后，仍然一样......我做了很多研究，但没有发现其他任何东西可以分别为标题和背景标题着色。

有人有想法可以帮助我吗？提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T17:01:48.567

1.  你想要一个**透明**的背景。然后你只会给前景着色。
2.  使用**clutImage**应用颜色。**colorizeImage**在替换黑色时应用稍深的颜色存在问题。

```
$im = new Imagick();
$im->newPseudoImage(300, 300, "caption:" . "Put your text" );
$im->setBackgroundColor('transparent');

$clut = new Imagick();
$clut->newImage(1, 1, new ImagickPixel('#ff0000'));
$txt->clutImage($clut);
$clut->destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:22:13.797

不确定这是否是您想要的，但这会给我黑色背景上的白色文本：

```
$width = '600';
$height = '200';
$im = new Imagick();
$draw = new ImagickDraw();
$draw->setFont('arial.ttf');
$draw->setFontSize( 96 );
$fillcolor = new ImagickPixel( "white" );
$draw->setFillColor( $fillcolor );
$draw->setGravity( Imagick::GRAVITY_CENTER );
$bgcolor = new ImagickPixel( "black" );
$text = 'Rubblewebs';
$im->newImage($width, $height, $bgcolor );
$im->annotateImage($draw, 0, 0, 0, $text);
$im->setImageFormat("png");
$im->writeImage( 'text.png' ); 
```

# c# - mvc 2 开始日期和结束日期验证

> ID：10750356
> 
> 赞同：1
> 
> 时间：2012-05-25T07:35:01.263
> 
> 标签：c#, datetime, asp.net-mvc-2

大家好，我正在尝试比较两个日期，由于某种原因，如果我指定 25/05/2012（开始日期）和 31/05/12（结束日期），以下代码将返回 false。

仅当使用 25 日作为开始日期时才会发生这种情况，如果我使用 26 日则工作正常。

```
 public bool IsValidDate(DateTime startDate, DateTime endDate)
    {
        return startDate < endDate && endDate > startDate;
    } 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:45:01.400

你一定是误会了什么。对于您指定的给定输入，此代码返回`true`：

```
class Program
{
    static void Main()
    {
        var startDate = new DateTime(2012, 5, 25);
        var endDate = new DateTime(2012, 5, 31);
        Console.WriteLine(IsValidDate(startDate, endDate));
    }

    public static bool IsValidDate(DateTime startDate, DateTime endDate)
    {
        return startDate < endDate && endDate > startDate;
    }
} 
```

`true`在控制台上打印。

现在当然重复两次完全相同的条件是没有意义的。陈述条件一次就足够了：

```
public bool IsValidDate(DateTime startDate, DateTime endDate)
{
    return startDate < endDate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:52:38.727

为什么要创建一个函数来检查 if `startDate < endDate`？

```
private void button1_Click(object sender, EventArgs e)
{
    DateTime startDate = new DateTime(2012 , 05 , 25);
    DateTime endDate = new DateTime(2012 , 05 , 31);

    bool rtnval = IsValidDate(startDate, endDate);

}

public bool IsValidDate(DateTime startDate, DateTime endDate)
{
    return startDate < endDate && endDate > startDate; 
} 
```

此代码返回真！！！

分解它并检查你是否有你想要的值

```
public bool IsValidDate(DateTime startDate, DateTime endDate)
{
    bool resulta = startDate < endDate; // break here
    bool resultb = endDate > startDate; // break here
    return startDate < endDate && endDate > startDate;
} 
```

// 哎呀，我没有意识到它已经被回答了

# xml - 带有 XML/AS3 的头像制作器

> ID：10750357
> 
> 赞同：0
> 
> 时间：2012-05-25T07:35:04.617
> 
> 标签：xml, actionscript-3, flash

因此，我还有另一个与此相关的问题，但我想就解决此问题的最佳方法提出一些一般性建议。我正在尝试制作一个头像创建者，它从 XML 文件（头部、头发、眼睛、鼻子嘴巴等）中获取元素并将它们叠加在一起。

我对 actionscript 很陌生，所以我所做的只是遵循一堆 xml 照片库教程和示例，然后根据我的需要进行修改，这可能不是从一开始就最好的方法，但我学到了很多。

这是目前的样子：**i.imgur.com/HRxNi.jpg** 有一个滚动窗格元素可以加载缩略图，一个组合框可以在元素之间切换，还有一个保存按钮，到目前为止什么都不做，但最终我会希望它将舞台上的内容发送到我的服务器，并让 php 将其保存为 avvie。

基本上我已经完成的是让拇指加载一个元素（头部），您可以在它们之间单击以更改它们，仅此而已。

我需要做的和我想要的建议是

*(1) 根据组合框为不同的元素加载不同的拇指（例如，从组合框中选择“头发”，并且头发选项显示在滚动窗格中）*

*(2) 当一个头发元素或任何元素被点击时，它会覆盖在它下面的任何东西上*

这是我到目前为止所得到的，三个文件包含在我的项目中完成所有工作，您可以在此处查看它们：http: [//pastebin.com/Jy9HPNWH](http://pastebin.com/Jy9HPNWH)（将所有三个文件粘贴在那里，评论它所以你知道什么是发生）

你可以在这里查看我的 XML 文件：http: [//pastebin.com/nbAUryUk](http://pastebin.com/nbAUryUk)这就是我使用的结构

关于如何以最好的方式做到这一点的任何想法？我真的遇到了障碍，理论上看起来很简单，但我是 AS 领域的新手，也许你们中的一些人有更好的想法

我确信我可以以一种非常程序化的方式完成此任务，但这对我来说似乎是一种编码罪。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:46:15.800

**根据组合框为不同的元素加载不同的拇指（例如，从组合框中选择“头发”，并且头发选项显示在滚动窗格中。**

把事情分成两个层次。类别和项目。类别拥有自己的详细信息（例如 categoryName = "hair" , categoryId = 1, categoryImage = "cat-hair.jpg"）

现在创建项目所有项目都知道它们属于哪个类别。当一个类别是单击搜索具有相同类别 ID 的项目。现在你有了你的物品。

创建一个您将项目详细信息传递给（图像 url、类别 ID 等）的框，它独立地加载项目的 jpeg。

当用户单击此框时。使用 Id 在预览窗格中加载项目。

**当一个头发元素或任何元素被点击时，它会覆盖在它下面的任何东西上**

myMan.addChild(loadedHairDisplayObject)

但事情就是这样。您需要检查图层（如果您的头发遮住眼睛等）。头发总是盖过眼睛。眉毛总是在眼睛上方等等，所有东西都放在那个特定的层内。仅当您有覆盖它们的物品时才这样做，否则您很好。

# c++ - 用户定义字符串类的重载 >> 运算符

> ID：10750360
> 
> 赞同：1
> 
> 时间：2012-05-25T07:35:12.157
> 
> 标签：c++, operator-keyword

## 问题

问题是我正在尝试使用插入运算符获取用户输入并初始化值`thechars`，以将大小分配给我需要输入长度的字符，我如何获得它？并在插入运算符中初始化。

主要问题是插入运算符。

当我运行程序时，它显示分段错误，

请帮助

```
class string1
{    
  private:
    int len;
    char *thechars;

    //friend ostream& operator<<(ostream&,string1&);##
    //friend istream& operator>>(istream&,string1&);##

  public:
    //string1() :len(0),thechars(NULL){}
    string1()
    {
      thechars = new char[1];
      thechars[0] = '\0';
      len=0;
      // cout << "\tDefault string constructor\n";
      // ConstructorCount++;
    }
};

// this is the insertion operator i use
istream& operator>>(istream& in, string1& tpr)
{
  in >> tpr.thechars;
  //tpr.thechars[i+1]='\0';
  return in;
}

//this one is the extraction operator
ostream& operator<<(ostream& out,string1& prt)
{
  for(int i=0;i<prt.len;i++)
    out<<prt.thechars[i];

  return out;
}

// main function##
string1 str;
cout << "enter first string" << endl;
cin >> str;
cout << str << endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:39:55.410

如果`in`是文件输入流，可以执行以下操作：

```
in.seekg(0, ios::end);
length = in.tellg();
in.seekg(0, ios::beg); 
```

另一种选择是逐个字符地读取输入流，并在`thechars`每次用完时将其大小加倍。首先，再引入一个变量来存储当前分配的缓冲区大小 --- `allocSize`。之后更新构造函数，`operator<<`如下所示。

构造函数：

```
string1()
{
    allocSize = 1; // initially allocated size
    thechars = new char[allocSize];
    thechars[0] = '\0';
    len=0;
} 
```

输入运算符：

```
istream& operator>>(istream& in, string1& tpr)
{
    char inp;
    while (in.get(inp)) {
        // end-of-input delimiter (change according to your needs)
        if (inp == ' ')
            break;
        // if buffer is exhausted, reallocate it twice as large
        if (tpr.len == tpr.allocSize - 1) {
            tpr.allocSize *= 2;
            char *newchars = new char[tpr.allocSize];
            strcpy(newchars, tpr.thechars);
            delete[] tpr.thechars;
            tpr.thechars = newchars;
        }
        // store input char
        tpr.thechars[tpr.len++] = inp;
        tpr.thechars[tpr.len] = '\0';
    }
} 
```

但最好的选择是`std::string`用作`thechars`. 你真的需要所有这些手动内存处理吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:58:37.293

而不是给`in`a`char*`给它一个常规字符串。然后你可以自己提取数据。

```
istream& operator>>(istream& in, string1& tpr)
{
  string temp;
  in >> temp;
  tpr.len = temp.length + 1;
  tpr.thechars = new char[tpr.len];
  tpr.thechars[temp.length] = '\0';
  strcpy(tpr.thechars, &temp[0], tpr.len);
  return in;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:43:13.043

你写了

```
 in>> tpr.thechars; // where thechars="\0"; 
```

你只分配了一个字节，但我猜你输入的字符串有更多字节。我认为这里有错误。

# python - 在 Python 中使异步调用同步

> ID：10750366
> 
> 赞同：1
> 
> 时间：2012-05-25T07:35:29.907
> 
> 标签：python

使异步调用显示为同步的最佳方法是什么？例如，类似这样的事情，但我如何协调调用线程和异步回复线程？在 java 中，我可能会使用超时的 CountdownLatch()，但我找不到 Python 的明确解决方案

```
def getDataFromAsyncSource():
    asyncService.subscribe(callback=functionToCallbackTo)
    # wait for data
    return dataReturned

def functionToCallbackTo(data):
    dataReturned = data 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T07:44:45.157

有一个你可以使用的模块

```
import concurrent.futures 
```

查看这篇文章以获取示例代码和模块下载链接：[Python 中的并发任务执行](http://gosteven.com/blog/2012/05/13/concurrent-tasks-execution-in-python/)

您可以将执行器结果放在未来，然后获取它们，这是来自[http://pypi.python.org](http://pypi.python.org)的示例代码：

```
import concurrent.futures
import urllib.request

URLS = ['http://www.foxnews.com/',
    'http://www.cnn.com/',
    'http://europe.wsj.com/',
    'http://www.bbc.co.uk/',
    'http://some-made-up-domain.com/']

def load_url(url, timeout):
    return urllib.request.urlopen(url, timeout=timeout).read()

with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
    future_to_url = dict((executor.submit(load_url, url, 60), url)
                     for url in URLS)

    for future in concurrent.futures.as_completed(future_to_url):
        url = future_to_url[future]
        if future.exception() is not None:
            print('%r generated an exception: %s' % (url,future.exception()))
        else:
            print('%r page is %d bytes' % (url, len(future.result()))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T05:59:24.933

一个常见的解决方案是使用同步`Queue`并将其传递给回调函数。请参阅[http://docs.python.org/library/queue.html](http://docs.python.org/library/queue.html)。

因此，对于您的示例，这可能看起来像（我只是猜测 API 将其他参数传递给回调函数）：

```
from Queue import Queue

def async_call():
    q = Queue()
    asyncService.subscribe(callback=callback, args=(q,))
    data = q.get()
    return data

def callback(data, q):
    q.put(data) 
```

这是在`threading`内部使用模块的解决方案，因此它可能无法根据您的异步库工作。

# ios - 带有控件的图像

> ID：10750374
> 
> 赞同：-1
> 
> 时间：2012-05-25T07:36:06.083
> 
> 标签：ios, user-interface

每当用户点击我的应用程序栏上的按钮时，我希望一个窗口从侧面滑入。
我希望那个“窗口”是半透明的，并且像其他实际用作按钮、UILabels 和文本字段的图像一样具有控件。
什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:38:58.813

我不确定我是否理解您所说的“*并且具有像其他实际用作按钮、UILabels 和文本字段的图像一样的控件*”，但我会试一试。

带有控件的半透明窗口应该是这样的：

> *   UIView - backgroundColor = clearColor [父视图]
>     *   UIView - alpha = 0.5 [透明视图]
>     *   控件 - 按钮、标签等

基本上，这种布局会给你一个透明的背景视图和可见的控件。只需确保您的控件与*透明视图具有相同的父级 [**父级视图*] 。

 *要滑入/滑出，您可以使用：

```
[UIView beginAnimations:nil context:nil]
[UIView setAnimationDuration:0.3];

// move the parent view here

[UIView commitAnimations]; 
```

祝你好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:09:30.860

如果我对你的理解正确，你可以通过简单地实现你想要的：

*   创建你的主视图控制器
*   创建单独的 UIView 或 UIViewController 并设置其 frame.origin 参数以将其隐藏在 left/right/top/bottom

以 DarkByte 简要解释的方式管理透明度。[例如slidingView.alpha = 0.5;]

要为“滑动”设置动画，我宁愿使用：

```
[UIView animateWithDuration:animationDuration 
                      delay:wait
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     /*Parameter changing code goes heare, for example: */ 
                     view.frame.origin.x = newX; 
                 } 
                 completion:^(BOOL finished){
                     /*Code which will be executed AFTER the animation goes heare*/
                 }]; 
```

我认为它很容易使用，并且设置动画后要执行的代码非常方便。*

# php - 在 PHP 中检索 Twitter 的 X-RateLimit-Limit

> ID：10750376
> 
> 赞同：0
> 
> 时间：2012-05-25T07:36:12.530
> 
> 标签：php, http, http-headers, twitter

对于我发出的每个 Twitter 请求，[返回的 HTTP 标头应包含 X-RateLimit-Limit](https://dev.twitter.com/docs/rate-limiting/faq)。

但是，我似乎无法使用 PHP 检索这些。谁能告诉我我犯了什么愚蠢的错误？

我已经以正常方式设置了我的 curl 并且能够成功地 GET 和 POST 请求。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE);
curl_setopt($ch, CURLOPT_VERBOSE, TRUE);

$response = curl_exec($ch);
$response_info=curl_getinfo($ch);
$erno = curl_errno($ch);
$er = curl_error($ch);
curl_close($ch); 
```

我可以获得一些响应信息，例如 http_code

```
$response_info['http_code'] 
```

但是这一行只返回 null

```
//Doesn't bloody work. No idea why!
$rate_limit = $response_info['X-RateLimit-Limit']; 
```

我正在运行 PHP 版本 5.3.10。

**编辑**

这是 print_r($response_info); 的结果

```
Array
(
[url] => https://api.twitter.com/1/statuses/home_timeline.json...
[content_type] => application/json;charset=utf-8
[http_code] => 200
[header_size] => 695
[request_size] => 410
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 1.239977
[namelookup_time] => 0.007361
[connect_time] => 0.155783
[pretransfer_time] => 0.465397
[size_upload] => 0
[size_download] => 99425
[speed_download] => 80182
[speed_upload] => 0
[download_content_length] => 99425
[upload_content_length] => 0
[starttransfer_time] => 0.794829
[redirect_time] => 0
[certinfo] => Array()
[redirect_url] => 
[request_header] => GET /1/statuses/home_timeline.json... HTTP/1.1
Host: api.twitter.com
Accept: */*
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:02:11.087

`curl_getinfo`不返回响应标头，仅返回有关请求的其他元信息。要检索标头，请设置`CURLOPT_HEADER`为`true`. 这将包括输出中的标题。要将它们与响应正文分开，请执行以下操作：

```
list($headers, $body) = explode("\n\n", $response, 2); 
```

要解析标题，请再次分解：

```
$headers = explode("\n", $headers);
foreach ($headers as $header) {
    list($key, $value) = explode(':', $header, 2);
    $headers[trim($key)] = trim($value);
}

echo $headers['X-RateLimit-Limit']; 
```

# php - mysql_real_escape_string 与 PDO PHP

> ID：10750377
> 
> 赞同：0
> 
> 时间：2012-05-25T07:36:15.337
> 
> 标签：php, mysql, pdo

您好，我是 PDO 的新手，所以对 mysql_real_escape_string 感到困惑并出现错误；）

谁能帮忙，这是我的代码

```
if(!empty($_POST) && isset($_POST)) { 

include ('connection_pdo.php');

$dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);

$source_url= mysql_real_escape_string($_POST['source_url']);
$class     = mysql_real_escape_string($_POST['class']);
$year      = mysql_real_escape_string($_POST['year']);
$date      = time();
$ip        = $_SERVER['REMOTE_ADDR'];

$insert = $dbh->prepare("
  INSERT IGNORE INTO school_students_images
            ( folder_name,  image_url,  source_url,  class, year , date , ip )
    VALUES  (:folder_name, :image_url, :source_url, :class, :year, :date, :ip)
");

$a=0;
while ($a<1000){
$a++;
$insert->execute(array(
            'folder_name'=> $name->content, //** geting from other source
            'image_url'  => $link[$a], //** geting from other source
            'source_url' => $source_url,
            'class'      => $class ,
            'year'       => $year ,
            'date'       => $date,
            'ip'         => $ip
            ));
} 
```

它无法正常工作，但如果我没有使用它

```
 $source_url= ($_POST['source_url']);
    $class     = ($_POST['class']);
    $year      = ($_POST['year']);
    $date      = time();
    $ip        = $_SERVER['REMOTE_ADDR']; 
```

它正在工作......所以我很困惑在没有mysql_real_escape_string的情况下POST到数据库中是否安全？（默认情况下 PDO 是否提供任何安全性？）或者我在这方面犯了一些错误......请帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T07:38:53.617

是的，PDO 会自动转义您的数据，因此您不需要使用`mysql_real_escape_string`. 例如，请参见[此处。](https://stackoverflow.com/questions/1742066/why-is-pdo-better-for-escaping-mysql-queries-querystrings-than-mysql-real-escape)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T07:39:32.717

`mysql_real_escape_string`需要`mysql`通过`mysql_connect`以前的呼叫建立一个活动连接......所以是的，它不会工作。

无论如何，PDO 都会自动为您执行此操作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T07:39:30.237

使用准备好的语句，您不必转义变量。驱动程序会根据您在下面使用的数据库自动为您执行此操作。实际上你不能自己逃避它，因为这会双重逃避它。

# xcode - 在 Xcode 之外运行可可应用程序

> ID：10750381
> 
> 赞同：1
> 
> 时间：2012-05-25T07:36:30.513
> 
> 标签：xcode, cocoa

当我在 Xcode 中运行我的可可应用程序时，它运行良好。但我要去 .app 文件所在的位置并从那里运行它，出现此错误：

```
Process:         QBLoader [4571]
Path:            /Users/USER/Library/Developer/Xcode/DerivedData/QBLoader-egxdvwlbzueazygfdbjqcxtgyvqz/Build/Products/Debug/QBLoader.app/Contents/MacOS/QBLoader
Identifier:      com.fsm.QBLoader
Version:         1.0 (1)
Code Type:       X86-64 (Native)
Parent Process:  launchd [210]

Date/Time:       2012-05-25 09:25:31.121 +0200
OS Version:      Mac OS X 10.7.3 (11D50)
Report Version:  9

Interval Since Last Report:          62057 sec
Crashes Since Last Report:           10
Per-App Interval Since Last Report:  20 sec
Per-App Crashes Since Last Report:   10
Anonymous UUID:                      5DEC6815-69C3-48FA-A3C4-3EEBC31CC1B6

Crashed Thread:  0

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
dyld: launch, loading dependent libraries

Dyld Error Message:
  Library not loaded: /Library/Frameworks/SBJson.framework/Versions/A/SBJson
  Referenced from: /Users/USER/Library/Developer/Xcode/DerivedData/QBLoader-egxdvwlbzueazygfdbjqcxtgyvqz/Build/Products/Debug/QBLoader.app/Contents/MacOS/QBLoader
  Reason: image not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:12:47.000

这对我有用。我将 SBJson 目标的“安装目录”更改为：“@executable_path/../Frameworks”。现在可以在 Xcode 之外运行应用程序了。

# jsf - JSF 1.2：我可以在 JSF 视图中创建可重用的组件吗

> ID：10750384
> 
> 赞同：6
> 
> 时间：2012-05-25T07:36:46.757
> 
> 标签：jsf, components, code-reuse

在 jsf 中可能有这样的事情吗？

```
<ui:composition>
  <x:reusableCode id="editScreen">InnerHtml ... </x:reusableCode>
  code...
  <x:use component="editScreen"/>
</ui:composition 
```

我知道我可以创建自己的组件并将其注册到 jsf tagLib 中，但我只需要在 jsf 视图文件中使用可重用的 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T11:43:35.243

在 Facelets 1.x 中，您可以为此创建一个标记文件。

这是一个基本的启动示例。创建`/WEB-INF/tags/some.xhtml`：

```
<ui:composition 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <h:outputText value="#{foo}" />
</ui:composition> 
```

定义它`/WEB-INF/my.taglib.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE facelet-taglib PUBLIC
    "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
    "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">

<facelet-taglib>
    <namespace>http://example.com/jsf/facelets</namespace>
    <tag>
        <tag-name>some</tag-name>
        <source>/WEB-INF/tags/some.xhtml</source>
    </tag>
</facelet-taglib> 
```

注册它`/WEB-INF/web.xml`：

```
<context-param>
    <param-name>facelets.LIBRARIES</param-name>
    <param-value>/WEB-INF/my.taglib.xml</param-value>
</context-param> 
```

*（注意，当你有多个时，用分号`;`分隔它们）*

最后，只需在您的主页模板中声明它。

```
<ui:composition 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:my="http://example.com/jsf/facelets"
>
    <my:some foo="value1" />
    <my:some foo="value2" />
    <my:some foo="value3" />
</ui:composition> 
```

可以在这里找到更高级的示例：[如何制作 JSF 复合组件的网格？](https://stackoverflow.com/questions/5713718/how-to-make-a-grid-of-jsf-composite-component/5716633#5716633)注意：针对 JSF 2.0，但基于上面的示例进行了微小的更改，它在 Facelets 1.x 上也能正常工作。

# java - 对文件中的数据进行排序

> ID：10750389
> 
> 赞同：1
> 
> 时间：2012-05-25T07:37:14.107
> 
> 标签：java, sorting

我在排序时遇到问题。数据格式为：

```
b4 S0_c5 t 0.426544 
b6 S1_c5 t 1.51049 
b13 S0_c5 t 0.594502 
b13 S1_c5 t 0.537496 
b15 S1_c5 t 0.884126   
b18 S0_c5 t 0.500933 
b19 S1_c5 t 0.628472 
b22 S0_c5 t 0.437718 
```

所需的结果是：

```
S0_c5 b13 0.594502 b18 0.500933 b22 0.437718 b4 0.426544 
S1_c5 b6 1.51049 b15 0.884126 b19 0.628472 b13 0.537496 
```

该值也是按降序排列的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:49:40.097

*   按“”拆分您的数据。
*   创建一个`HashMap<String, List<String[]>`>
*   对于每一行：
    *   查看地图是否包含键（split[1]）
        *   如果该键处没有 List，则创建一个
        *   添加 split[1]，拆分到正确的列表
*   遍历您的地图并订购每个`List`
*   输出数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:54:00.443

将数据放在一个`TreeList<String, List<String>>`（因为它已排序）中，其中序列中的第二个单词是键，值是字符串列表，然后对您获得的每个列表进行排序：

```
 Map<String, List<String[]>> map = new TreeMap<String, List<String[]>>();
    for (String s : strings) {
        String[] tokens = s.split(" ");
        List<String[]> values = map.get(tokens[1]);
        if (values == null) {
            values = new ArrayList<String[]>();
            map.put(tokens[1], values);
        }
        values.add(new String[]{tokens[0],  tokens[3]});
    }

    for (String key : map.keySet()) {
        List<String[]> list = map.get(key);
        Collections.sort(list, new Comparator<String[]>() {

            @Override
            public int compare(String[] o1, String[] o2) {
                return o1[1].compareTo(o2[1]) * -1;
            }

        });

        System.out.print(key + " ");
        for (String[] s : list) {
            System.out.print(s[0] + " " + s[1]);
        }
        System.out.println();
    } 
```

更新：例如从文件中读取：

```
 BufferedReader br;
    try {
        br = new BufferedReader(new FileReader("d:/temp/r.res"));

        Map<String, List<String[]>> map = new TreeMap<String, List<String[]>>();
        while (br.ready()) {
            String s = br.readLine();
            if (!s.trim().isEmpty()) {
                String[] tokens = s.split(" ");
                List<String[]> values = map.get(tokens[1]);
                if (values == null) {
                    values = new ArrayList<String[]>();
                    map.put(tokens[1], values);
                }
                values.add(new String[]{tokens[0],  tokens[3]});
            }
        }
    } finally {
        br.close();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:38:47.787

将数据放入 a`List`并使用`Collections.sort()`它进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T07:44:10.900

JDK中有一个类只是为了有一个排序列表。它被命名（与其他 Sorted* 接口有点乱）“java.util.PriorityQueue”。它可以对 Comparables 或使用 Comparator 进行排序。

与使用 Collections.sort(...) 排序的 List 的区别在于，这将始终保持顺序，并且通过使用堆数据结构具有良好的插入性能，其中插入已排序的 ArrayList 将是 O(n) (即，使用二进制搜索和移动）。

然而，除了 List，PriorityQueue 不支持索引访问（get(5)），访问堆中项目的唯一方法是一次取出一个（因此得名 PriorityQueue）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T19:25:32.127

试试这个。它会起作用的。

```
private void ReadTextFile(String filename) throws IOException
    {
        BufferedReader br = null;
        FileInputStream fin = null;
        fin = new FileInputStream(filename);
        br =new BufferedReader(new InputStreamReader(fin));
        Map<String,String> stringStringMap = new TreeMap<String, String>(Collections.reverseOrder());
        while ((line = br.readLine()) != null) {
            stringStringMap.put(line.split(" ")[3],line);
        }
        Collection<String> collection = stringStringMap.values();
        Map<String, List<String>> map = new TreeMap<String, List<String>>();
        Iterator<String> iterator = collection.iterator();
        while(iterator.hasNext()){
            String[] tokens = iterator.next().split(" ");
            List<String> values = map.get(tokens[1]);
            if (values == null) {
                values = new ArrayList<String>();
                map.put(tokens[1], values);
            }
            values.add(tokens[0] + " " + tokens[3]);
        }
        for (List<String> mapList : map.values()) {
            Collections.sort(mapList);
        }
        for (String key : map.keySet()) {
            System.out.println(key + " " + map.get(key));
        }
    } 
```

# asp.net - 每个应用程序一个 asp.net 会话

> ID：10750390
> 
> 赞同：1
> 
> 时间：2012-05-25T07:37:15.273
> 
> 标签：asp.net, wcf, session

我将数据保存在 HttpContext.Current.Session 中，但是当我从不同的浏览器调用我的 wcf 服务时，我的会话有其他 ID，我找不到保存的数据。

如何为对应用程序的所有请求创建具有相同 ID 的会话对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:43:50.117

会话基于 cookie。因此，当 cookie 发生变化时，例如您从不同的浏览器打开相同的页面，会话就会不同。

如果您有用户登录，那么您可以在所有连接的会话上的用户连接之间创建一些通用数据。

# iis - 为 iis 开放端口

> ID：10750393
> 
> 赞同：1
> 
> 时间：2012-05-25T07:37:27.083
> 
> 标签：iis, networking, webserver, port, firewall

伙计们，我想知道如何为 iis 打开端口。我也厌倦了从防火墙打开端口，但我似乎错过了一些东西，实际上我在本地有站点（端口上的示例）7895 我可以访问它通过在浏览器中键入 localhost:7895 或 192.168.1.1:7895 （本地 IP）但想通过网络打开它，例如我的外部 IP 是 119.155.116.102 所以 119.155.116.102:7895 我该怎么做？是的，路由器中是否有任何问题我的意思是我需要打开路由器中的某些功能才能打开端口？

感谢您的回答！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T07:45:05.710

是的，在大多数情况下，您需要先在路由器中打开端口（检查您的 NAT 设置部分），然后设置 IIS 站点绑定到 7895 端口

# perl - 关于相等运算符的警告

> ID：10750399
> 
> 赞同：3
> 
> 时间：2012-05-25T07:37:49.377
> 
> 标签：perl, operators, warnings

Perl 中是否发生了某些变化，或者一直都是这样，第二个 ( `$number eq 'a'`) 之类的示例不会引发警告？

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;

my $string = 'l';
if ($string == 0) {};

my $number = 1;
if ($number eq 'a') {};

# Argument "l" isn't numeric in numeric eq (==) at ./perl.pl line 6. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T07:50:42.850

Perl 将尝试将标量转换为使用它的上下文所需的类型。

从任何标量类型到字符串都有一个有效的转换，所以这总是默默地完成。

`looks_like_number`如果字符串通过测试（可通过 访问） ，则转换为数字也会静默完成[`Scalar::Util`](https://metacpan.org/module/PerlIO::eol)。否则会发出警告，并且无论如何都会进行“最佳猜测”近似。

```
my $string = '9';
if ( $string == 9 ) { print "YES" }; 
```

将字符串静默转换为整数 9，测试成功并`YES`打印。

```
my $string = '9,8';
if ( $string == 9 ) { print "YES" }; 
```

引发警告`Argument "9,8" isn't numeric in numeric eq (==)`，将字符串转换为整数 9，测试成功并`YES`打印。

据我所知，一直都是这样，至少从 v5.0 开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T07:48:36.657

一直是这样。

在第一个`if`,`l`被认为是在*数字*上下文中。但是，`l`不能转换为数字。因此，发出警告。

在第二个`if`中，数字`1`被认为是在*字符串*上下文中。因此，数字在比较之前`1`被转换为字符串`'1'`，因此不会发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:21:42.630

您是否故意使用小写“L”？通常很难区分小写的“L”和一。如果您使用的是一个问题，那么您会回答自己的问题。

```
>perl -wE"say '1' == 0;"

>perl -wE"say 1 eq 'a';"

> 
```

如你看到的，

*   如果需要一个数字，Perl 会将字符串转换为数字*而不会发出警告*。
*   如果需要一个字符串，Perl 会在*没有警告*的情况下将一个数字转换为字符串。

非常一致。

当您尝试将小写 L 转换为数字时会收到警告，但这有什么令人惊讶的呢？

# joomla - Joomla 管理员和前端的单点登录

> ID：10750402
> 
> 赞同：2
> 
> 时间：2012-05-25T07:37:50.920
> 
> 标签：joomla

是否可以为 Joomla 1.5 后端和前端实现单点登录。我发现当管理员例如在后端登录并且需要在前端执行一些用户功能时必须再次登录，这有点多余。有没有办法实现单点登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:07:47.757

Joomla！被实现为两个独立的应用程序，前端启动`/index.php`和后端管理，`/administrator/index.php`因此它们具有单独的用户会话和状态。

分离是一种标准的安全方法，而您可以编写自己的 mod_login 来执行此操作，除非您非常清楚自己在做什么，否则我不建议这样做。

话虽如此，有 255 个 Joomla！[Access & Security](http://extensions.joomla.org/extensions/access-a-security/) ——>处理登录的[站点访问](http://extensions.joomla.org/extensions/access-a-security/site-access)部分中的扩展。你试过在那里看吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T19:31:00.093

这个 joomla 扩展可以做到这一点。 [http://www.everlive.net/joomla-extensions/15-joomla-admin-from-frontend.html](http://www.everlive.net/joomla-extensions/15-joomla-admin-from-frontend.html)

只需以管理员用户身份登录前端即可。您将自动登录到后端。此外，它还为您提供了用于各种后端操作（如文章添加、编辑、发布、取消发布等）的有用直接链接。模块和菜单项也可以使用相同类型的链接。

# java - 如何解决 java.net.ConnectException：无法连接到 /10.0.2.2（端口 8080）：连接失败：ETIMEDOUT（连接超时）

> ID：10750405
> 
> 赞同：2
> 
> 时间：2012-05-25T07:37:58.080
> 
> 标签：java, php, android

我正在制作一个应用程序，它应该将文件从 sd 卡上传到 php 服务器以进行进一步处理，但是当我尝试上传我的 logcat 时显示以下错误：java.net.ConnectException: failed to connect to /10.0.2.2 (port 8080):连接失败：ETIMEDOUT（连接超时）。我的java代码如下。

```
package de.smsbackup;

import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.os.StrictMode;
import android.util.Log;
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import de.smsbackup.SMSList;

@SuppressWarnings("unused")
public class Uploader extends Activity {

private String Tag = "UPLOADER";
private String urlString = "http://10.0.2.2:8080/admin/admin/uploadtest.php";
HttpURLConnection conn;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.upload_sms_file);

    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()  
    .detectDiskReads()  
    .detectDiskWrites()  
    .detectNetwork()   // or .detectAll() for all detectable problems  
    .penaltyLog()  
    .build());  
   StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()  
    .detectLeakedSqlLiteObjects()  
    .detectLeakedClosableObjects()  
    .penaltyLog()  
    .penaltyDeath()  
    .build()); 
    String exsistingFileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/SMSBackup.txt";

    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    try {
        // ------------------ CLIENT REQUEST

        Log.e(Tag, "Inside second Method");

        FileInputStream fileInputStream = new FileInputStream(new File(
                exsistingFileName));

        // open a URL connection to the Servlet

        URL url = new URL(urlString);

        // Open a HTTP connection to the URL

        conn = (HttpURLConnection) url.openConnection();

        // Allow Inputs
        conn.setDoInput(true);

        // Allow Outputs
        conn.setDoOutput(true);

        // Don't use a cached copy.
        conn.setUseCaches(false);

        // Use a post method.
        conn.setRequestMethod("POST");

        conn.setRequestProperty("Connection", "Keep-Alive");

        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);

        DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: post-data; name=uploadedfile;filename="
                        + exsistingFileName + "" + lineEnd);
        dos.writeBytes(lineEnd);

        Log.e(Tag, "Headers are written");

        // create a buffer of maximum size

        int bytesAvailable = fileInputStream.available();
        int maxBufferSize = 1000;
        // int bufferSize = Math.min(bytesAvailable, maxBufferSize);
        byte[] buffer = new byte[bytesAvailable];

        // read file and write it into form...

        int bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bytesAvailable);
            bytesAvailable = fileInputStream.available();
            bytesAvailable = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);
        }

        // send multipart form data necesssary after file data...

        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // close streams
        Log.e(Tag, "File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();

    } catch (MalformedURLException ex) {
        Log.e(Tag, "error: " + ex.getMessage(), ex);
    }

    catch (IOException ioe) {
        Log.e(Tag, "error: " + ioe.getMessage(), ioe);
    }

    try {
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn
                .getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            Log.e("Dialoge Box", "Message: " + line);
        }
        rd.close();

    } catch (IOException ioex) {
        Log.e("Note Pad", "error: " + ioex.getMessage(), ioex);
    }
}
} 
```

我的PHP文件如下：

```
<?php
// Where the file is going to be placed 
 $target_path = "admin/";

 /* Add the original filename to our target path.  
  Result is "uploads/filename.extension" */
 $target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

 if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
  echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
  " has been uploaded";
  chmod ("uploads/".basename( $_FILES['uploadedfile']['name']), 0644);
} else{
 echo "There was an error uploading the file, please try again!";
 echo "filename: " .  basename( $_FILES['uploadedfile']['name']);
 echo "target_path: " .$target_path;
}
?> 
```

请任何人尽快告诉我我错在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-25T03:46:32.843

我认为这是因为您处理 IP。尝试使用域名。

# php - PHP, OOP, 静态

> ID：10750410
> 
> 赞同：0
> 
> 时间：2012-05-25T07:38:33.040
> 
> 标签：php, oop, static

我在 PHP.net 上对 static 关键字的一些句子有疑问，在这个[链接](http://php.net/manual/en/language.oop5.static.php)，PHP.net 解释 static 关键字我确实理解了他们所说的一切，但我没有成功得到一个从“开始”的句子像任何其他 PHP 静态变量一样”。如果有人可以帮助我提供代码示例，我只是不明白，也许解释会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:42:12.040

当说“像任何其他静态变量一样”时，手册指的是函数内的静态变量。原型示例是保留内部计数器的函数：

```
function foo() {
    static $counter = 0; // static variable
    return ++$counter;
} 
```

像这样的静态变量和静态类属性都对您可以用来初始化它们的表达式有限制。

```
function foo() {
    static $counter = getInitialValue(); // ERROR: not possible!
    return ++$counter;
} 
```

如果你需要做这样的事情，通常的解决方法是

```
function foo() {
    static $counter; // not initialized explicitly, same as = null
    if ($counter === null) { // three equals!
        $counter = getInitialValue();
    }
    return ++$counter;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:42:24.223

基本上，你可以这样做：

```
class Foo
{
    public static $my_static = 'foo';

    public function staticValue() {
        return self::$my_static;
    }
} 
```

where`$my_static`被初始化为一个值为 的字符串`foo`。但你不能这样做：

```
class Foo
{
    public static $my_static = substr('food',0,3);

    public function staticValue() {
        return self::$my_static;
    }
} 
```

并期望`$my_static`包含函数调用的结果`substr`；直接将函数的返回值分配给静态变量是非法操作。同样，您不能这样做：

```
class Foo
{
    public static $my_static = 'foo';
    public static $my_static_2 = $my_static;

    public function staticValue() {
        return self::$my_static;
    }
} 
```

因为您可能无法通过指向另一个变量来初始化静态变量。

# android - 在android中动态查找和复制视图？

> ID：10750411
> 
> 赞同：1
> 
> 时间：2012-05-25T07:38:35.057
> 
> 标签：android, view, android-linearlayout

我现在创建了一个视图我只想一个接一个地**复制**这个
说

```
<LinearLayout
    android:id="@+id/comp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="top"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/txtComp1_Brand"
        android:layout_width="200sp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|left"
        android:gravity="center_vertical"
        android:text="ModelName"
        android:textSize="8pt"
        android:textStyle="bold" >
    </TextView>

    <CheckBox
        android:id="@+id/chkComp1GSB"
        android:layout_width="120sp"
        android:layout_height="40sp"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal|center_vertical"
        android:saveEnabled="true"
        android:text="" />

    <EditText
        android:id="@+id/editTxtNofISBCount"
        android:layout_width="80sp"
        android:layout_height="35sp"
        android:layout_gravity="center_vertical"
        android:gravity="center_vertical"
        android:inputType="number"
        android:maxLength="3"
        android:saveEnabled="true"
        android:textSize="8pt" >
    </EditText>  

</LinearLayout> 
```

现在我想在线性布局中动态地一个接一个地复制它，就像这样

```
<LinearLayout
        android:id="@+id/comp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:orientation="vertical" >
    </LinearLayout> 
```

我怎样才能做到这一点 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:46:08.500

使用`<merge />`和/或`<include />`。请参阅有关在 Android SDK 中重用布局的 Android 布局提示：

*   [布局技巧：创建可重用的 UI 组件](http://developer.android.com/resources/articles/layout-tricks-reuse.html)
*   [布局技巧：合并布局](http://developer.android.com/resources/articles/layout-tricks-merge.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:47:59.683

也可以动态添加

```
LinearLayout parent = (LinearLayout)findViewById(R.id.item);

in loop 
LinearLayout child = getLayoutInflater().inflate(R.layout.child);
 // fill in any details dynamically here
  TextView textView = (TextView) v.findViewById(R.id.txtComp1_Brand);
  textView.setText("text");
parent .addView(LinearLayout); 
```

# java - 从本地用户和 glassfish 到 Mysql DB 的并发连接

> ID：10750416
> 
> 赞同：2
> 
> 时间：2012-05-25T07:38:55.867
> 
> 标签：java, mysql, jdbc, glassfish, persistence

我的 Glassfish Web 应用程序出现问题：我在 glassfish 应用程序上使用了持久性提供程序和 EJB facedes。Mysql 连接配置为 JDBC 资源。问题是当我在本地更新数据库时（使用 mysql promt 或其他客户端），glassfish 服务器仍然“看到”旧值。我意识到 glassfis 服务器和 Msyql DB 之间可能存在某种类型的缓存。我很确定我可以更改一些参数来解决这个问题，但是在搜索了很长一段时间后我似乎找不到它。谁能指导我到有问题的地区？mysql JDBC驱动？web.xml？连接池？

一些技术细节： 数据库：Mysql 5.1 服务器：Glassfish 3.1 服务器正在使用 root 用户名连接到数据库 我使用 EclipseLink 作为 glassfish 应用程序配置 (sun-resources.xml) 的持久性提供程序：

```
<jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="mysql_drivingschool_rootPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
    <property name="serverName" value="localhost"/>
    <property name="portNumber" value="3306"/>
    <property name="databaseName" value="drivingschool"/>
    <property name="User" value="*****"/>
    <property name="Password" value="****"/>
    <property name="URL" value="jdbc:mysql://localhost:3306/******"/>
    <property name="driverClass" value="com.mysql.jdbc.Driver"/>
</jdbc-connection-pool> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:52:30.283

JPA 使用两层缓存机制。第一级缓存是当前的 PersistenceContext。二级缓存在不同的上下文之间共享。

您可以控制缓存行为。它取决于您使用的 JPA 实现。由于您在 EclipseLink 上，请参阅[此介绍](http://wiki.eclipse.org/Introduction_to_Cache_%28ELUG%29)。但是，这会降低应用程序的性能。

如果我们需要手动更新数据库，我们会重新启动应用程序（而不是服务器）。如果它在生产状态下更频繁地发生，您应该直接从数据库中获取相关数据。

# ios - Xcode：sigabrt 错误

> ID：10750418
> 
> 赞同：0
> 
> 时间：2012-05-25T07:39:01.217
> 
> 标签：ios, xcode, sigabrt, lldb

我是 iOS 编程的新手，我正在尝试让表格视图与我的应用程序一起运行，但我找不到任何关于应用程序为何不断中止的可靠信息。这是委托文件中的代码，谁能告诉我我做错了什么导致错误？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    listTopics = [NSMutableArray arrayWithCapacity:8];
    Topics *topic = [[Topics alloc]init];
    topic.topic = @"Movies";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Games";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"TV";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Cars";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Actors";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Sports";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Brands";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];
    topic.topic = @"Music";
    [listTopics addObject:topic];
    topic = [[Topics alloc]init];

    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;      
    TopicsViewController *topicsViewController = [[navigationController viewControllers]objectAtIndex:0];
    topicsViewController.listTopics = listTopics;
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:41:59.627

为了帮助调试，您应该添加一个“异常断点”。转到断点导航器（左侧面板上的选项卡之一），然后单击左下角的小 + 按钮。选择“添加异常断点”，然后单击确定。

再次运行应用程序，您应该会在错误行获得一个断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:59:32.283

疯狂的猜测：你的 topicViewController 是 nil 或者不是 TopicViewController。

您可能还会遇到一些内存问题，因为您没有释放您正在创建的对象。（或者你正在使用ARC？）。您还可以检查您正在销毁主题对象的房屋。

请提供更多代码供我们帮助您。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:00:50.037

我假设您想显示一个导航控制器，它具有表视图控制器作为根视图控制器，即 TopicsViewController。

在你的

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

方法您需要设置窗口的 rootViewController 属性。你不能得到它，因为你还没有设置。之后，您需要使其可见。以下代码应该可以帮助您

```
TopicsViewController *topicsViewController = [[TopicsViewController alloc] init]; 
// or 
TopicsViewController *topicsViewController = [[TopicsViewController alloc]initWithStyle:UITableViewStylePlain];
// depends if it is a view controller or table view controller

topicsViewController.listTopics = listTopics;

UINavigationController *topicsNavController = [[UINavigationController alloc] initWithRootViewController:topicsViewController];
self.window.rootViewController = topicsNavController;
[self.window makeKeyAndVisible];
return YES; 
```

请注意，如果您不使用 ARC，则需要释放您在其上调用 alloc 的对象。

# facebook - Facebook Like 按钮 - 实时更新？

> ID：10750419
> 
> 赞同：0
> 
> 时间：2012-05-25T07:39:03.227
> 
> 标签：facebook, facebook-like

有什么方法可以接收“赞”按钮的实时/流式更新值（https://developers.facebook.com/docs/reference/plugins/like/）？例如，Facebook 的“实时流”（https://developers.facebook.com/docs/reference/plugins/live-stream/）允许您在发布评论时“实时”查看评论。是否可以看到实时更新的“喜欢”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:39:37.553

1) 您可以在此处添加域并[在此处](https://www.facebook.com/insights/)查看统计信息

2）您可以检查这些插件[，如框](https://developers.facebook.com/docs/reference/plugins/like-box/)和[活动提要](https://developers.facebook.com/docs/reference/plugins/activity/)

3）您可以运行脚本以频繁获取数据

```
FB.api({
                method: 'fql.query',
                query: 'SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="http://www.facebook.com"'
            }, function(response){}); 
```

# python - 在python中将拉丁字符串转换为unicode

> ID：10750420
> 
> 赞同：4
> 
> 时间：2012-05-25T07:39:14.553
> 
> 标签：python, unicode, scrapy, latin

我正在工作 o scrapy，我抓取了一些网站并将抓取页面中的项目存储到 json 文件中，但其中一些包含以下格式。

```
l = ["Holding it Together",
     "Fowler RV Trip",
     "S\u00e9n\u00e9gal - Mali - Niger","H\u00eatres et \u00e9tang",
     "Coll\u00e8ge marsan","N\u00b0one",
     "Lines through the days 1 (Arabic) \u0633\u0637\u0648\u0631 \u0639\u0628\u0631 \u0627\u0644\u0623\u064a\u0627\u0645 1",
     "\u00cdndia, Tail\u00e2ndia &amp; Cingapura"] 
```

我可以预期该列表包含不同的格式，但我想将其转换并使用原始名称将字符串存储在列表中，如下所示

```
l = ["Holding it Together",
     "Fowler RV Trip",
     "Lines through the days 1 (Arabic) سطور عبر الأيام 1 | شمس الدين خ | Blogs"         ,
     "Índia, Tailândia & Cingapura "] 
```

提前致谢...........

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T07:54:31.517

您有包含 unicode 转义的字节字符串。您可以使用编解码器将它们转换为 unicode `unicode_escape`：

```
>>> print "H\u00eatres et \u00e9tang".decode("unicode_escape")
Hêtres et étang 
```

您可以将其编码回字节字符串：

```
>>> s = "H\u00eatres et \u00e9tang".decode("unicode_escape")
>>> s.encode("latin1")
'H\xeatres et \xe9tang' 
```

您可以过滤和解码非 unicode 字符串，例如：

```
for s in l: 
    if not isinstance(s, unicode): 
        print s.decode('unicode_escape') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:25:44.913

> 我想转换它并将字符串与其原始名称一起存储在列表中，如下所示

当您序列化为 JSON 时，可能会有一个标志允许您关闭将非 ASCII 字符转义为`\u`序列。如果您使用的是标准库`json`模块，它是`ensure_ascii`：

```
>>> print json.dumps(u'Índia')
"\u00cdndia"
>>> print json.dumps(u'Índia', ensure_ascii= False)
"Índia" 
```

但是请注意，在取消安全措施后，您现在必须能够以正确的方式处理非 ASCII 字符，否则您将得到一堆`UnicodeError`s。例如，如果要将 JSON 写入文件，则必须将 Unicode 字符串显式编码为所需的字符集（例如 UTF-8）。

```
j= json.dumps(u'Índia', ensure_ascii= False)
open('file.json', 'wb').write(j.encode('utf-8')) 
```

# ruby - Nokogiri 破坏 Erb 标记

> ID：10750422
> 
> 赞同：2
> 
> 时间：2012-05-25T07:39:21.247
> 
> 标签：ruby, nokogiri, erb

我正在使用 Nokogiri 在我的 Sinatra、Ruby 应用程序中进行一些页面处理。

所以当我这样做时：

```
require 'nokogiri'
s='<a href="<%=@prevHref%>">a</a>'
doc = Nokogiri::HTML.fragment(s)
puts doc.to_s 
```

我明白了

```
<a href="%5C&lt;%=@prevHref%%5C&gt;">a</a> 
```

代码被转义。我该如何避免这种情况？其实我在做的是：

1.  打开磁盘上的模板
2.  用 Nokogiri 解析它
3.  替换一些节点（不是逃脱的节点；其他一些）
4.  将模板保存回磁盘
5.  使用 ERB 解析模板显然失败，因为 ERB 标记被破坏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:06:29.990

您必须先`s`通过 erb 运行字符串，然后才能使用 Nokogiri 解析它。否则你做对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:44:13.000

如本页其他地方所述，Nokogiri（更准确地说是 libxml2）不能在内部表示 Erb。例如，考虑这个产生值 HTML 输出的有效 Erb 模板：

```
<p<%="> Hello"%> World!<%="</p"%>> 
```

如果您仔细考虑一下，您会意识到期望 Nokogiri 能够从中创建 DOM 是不合理的。

您需要使用使用有效标记的模板语言，而不是使用 Erb（不能解析为 HTML 或 XML）。例如：

*   [甘露](http://amrita.sourceforge.jp/) - 采用有效的 X/HTML 并结合 Ruby 数据结构来生成 HTML 输出。
*   [Kwartz](http://www.kuwata-lab.com/kwartz/) - 采用有效的 X/HTML 并结合类似 CSS 的数据绑定文件来生成 Erb 模板。

# lotus-notes - 在 Lotus Notes 中链接数据库

> ID：10750423
> 
> 赞同：1
> 
> 时间：2012-05-25T07:39:21.700
> 
> 标签：lotus-notes, lotus-domino, lotusscript, lotus-formula

我有一个 NSF，在那个“新请求”中有一个操作按钮，当我点击那个按钮时，首先它会抛出一个错误，比如“找不到主数据库，请联系“NSF 名称”管理员”，它将打开相应的页面.

我的问题是

该数据库是否与另一个数据库链接（可能这就是它抛出错误的原因），如果是这样，那么我如何将主数据库与实际数据库链接以避免该错误

请帮忙..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:21:11.937

显然缺少一个可识别主数据库的配置文档。编写代码的人实际上编写了一个很好的错误捕获例程，因为它告诉您发生了什么。但是，如果没有看到代码，我们无法告诉您如何解决问题。

Notes 数据库之间没有特定的“链接”。开发人员编写了自定义代码来与其他数据库进行交互，如果没有看到该代码，就无法知道如何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:08:49.980

访问其他 Notes 数据库的操作按钮通常使用文件路径和服务器名称，或者有时使用目标数据库的副本 ID，如果这些是硬编码在新的请求操作按钮中（非常糟糕的编程，但在旧应用程序中并不少见）并且目标数据库已被移动，或重命名或更可能使用新的replicaID制作了副本，则该按钮将失败。

目标数据库的路径也可能存储在配置文档中，当上述情况之一发生时，该配置文档尚未更新。这些通常只有数据库管理员可以访问并且隐藏，除非您对数据库具有管理员或管理员级别的访问权限。您需要让 Lotus Notes 管理员参与进来，但请查看代码，以便告诉他们他们在寻找什么。

# php - 支持 HTML 的 HTML 文本区域？

> ID：10750429
> 
> 赞同：-6
> 
> 时间：2012-05-25T07:39:53.917
> 
> 标签：php, html, textarea

我希望在我的表单中的 html textarea 中支持 html 标记，就像在提问时在 stackoverflow 中一样。并在 php 中传递其值并在 textarea 中打印准确的用户类型。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:42:59.907

[在http://www.ckeditor.com](http://www.ckeditor.com)使用 CKEditor

使用 jQuery，它可以轻松地将 textareas 转换为 WYSIWYG HTMLareas。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:45:04.317

首先，您需要清楚地了解您要做什么。从你的问题的遗憾状态来看，我敢打赌你不知道你在做什么，你已经超出了你的深度，你在问我们如何潜水。

我相信您已经注意到 StackOverflow 会立即显示其预览。我可以按住一个按钮，它会毫无延迟地更新。这是一个不涉及 PHP 的迹象，这一切都是通过 JavaScript 的“魔法”完成的。

获取 textarea 的内容并将其预览为 HTML 很简单：

```
document.getElementId('preview').innerHTML = document.getElementById('textbox').value; 
```

但是 SO 并没有做这种原始的事情，它实现了服务器端使用的整个 Markdown 设置，以准确地向您展示另一端会出现什么。

总而言之，它实际上非常复杂，你真的应该从更简单的练习开始，查找一些教程，或者只是加入潮流并使用 jQuery 来逃避。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:50:38.880

使用 Tinymce 或 ckeditor。

[http://ckeditor.com/](http://ckeditor.com/)

[http://www.tinymce.com/](http://www.tinymce.com/)

还有更多的所见即所得编辑器可用。

[http://phphtmledit.com/](http://phphtmledit.com/) PHP 的可爱编辑器

[http://nicedit.com/](http://nicedit.com/)

做一些谷歌搜索，你会发现更多。

祝你好运

# c++ - 是否有任何公司仍在使用 Pro*C SQL？

> ID：10750434
> 
> 赞同：0
> 
> 时间：2012-05-25T07:40:13.977
> 
> 标签：c++, oracle-pro-c

有一个学期，每个学生都需要使用 VB.NET 开发一个系统。随着时间的推移，复制粘贴别人的项目，编辑界面，图片等变得很容易了。所以我的讲师决定从使用VB.NET改变，现在我们都必须使用Pro*C SQL连接到甲骨文使用 C++。

我个人支持并帮助讲师提供开始使用 Pro*C 所需的指南，因为我以前做过。原因是如果没有适当的基本编程知识，学生将无法仅仅复制、粘贴和编辑任何 Pro*C 项目。

我的问题是，这种方法有多实用？还有其他公司还在使用 Pro*C SQL 吗？谷歌并没有给我带来太多最近的结果。我希望这是问这类问题的最佳场所

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:02:20.937

是的。我曾是许多使用 pro*c 进行许多批处理程序开发的公司的一员。零售计费、汽车租赁和电信计费是我使用过的一些仍然使用 pro*c 的域。这种方法非常成功，我看到许多应用程序已经运行了 15 年左右。希望我回答了你的问题。

# excel - 公式中使用的自定义 vba 函数中当前单元格的范围

> ID：10750437
> 
> 赞同：1
> 
> 时间：2012-05-25T07:40:24.650
> 
> 标签：excel, function, vba, formula

我想编写一个`Foo`可以在公式中使用的函数，以返回使用它的单元格上方的单元格的内容。

例如，如果在单元格 B2 中，我写`=Foo()`我想获取 B1 的内容。

**我知道我可以`=B1`直接写。显然，我在这里简化了案例。**

那么，这个功能是什么样子的。

更准确地说，我希望（也）能够从其他函数中使用这个函数（例如`Bar(factor)`，将上面的单元格相乘的函数，所以我可以写`=Bar(2)`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:22:37.203

这通常是一个坏主意，因为您将不得不使函数不稳定，对计算等产生连锁反应。

```
Public Function Foo() As Variant
    Application.Volatile
    Foo = Application.Caller.Offset(-1, 0)
End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-15T11:16:22.713

这有效

```
Public Function Foo() As Variant
    Foo = Application.ThisCell.Offset(-1, 0)
End Function 
```

# shell - 使用 SFTP 将文件从另一台服务器复制到我的盒子而不提示输入密码的 Shell 脚本

> ID：10750439
> 
> 赞同：0
> 
> 时间：2012-05-25T07:40:32.493
> 
> 标签：shell, sftp

我想编写一个 shell 脚本，它使用 SFTP 将文件从另一台服务器复制到我的盒子，而不提示输入密码，因为我已经为服务器上的密码创建了 private keygen。你能给我提供示例脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:42:10.343

您可以使用`scp`which 适用于`ssh`协议并读取私钥：

`scp -r path/to/src/folder1 username@server:/path/to/dst/folder`

开关是`-r`递归复制

如果需要指定端口，请使用`-p`

`scp -r -P 2222 path/to/src/folder1 username@server:/path/to/dst/folder`

# java - Selenium RC：所有测试只有一个浏览器？

> ID：10750442
> 
> 赞同：0
> 
> 时间：2012-05-25T07:40:42.450
> 
> 标签：java, maven, selenium, selenium-rc

我现在很困惑，我不明白为什么我的代码不能按我的需要工作。事实上，每次有新的测试时，它都会关闭 firefox 并重新打开它。这让我的测试需要很长时间才能意识到......你能告诉我我做错了什么吗？

```
public class SeleniumTestLoginEntry extends SeleneseTestCase {

    private String login="scLocator=//DynamicForm[ID=\"formulaire_login\"]/item[index=0||Class=TextItem]/element";
    private String passwd="scLocator=//DynamicForm[ID=\"formulaire_login\"]/item[index=1||Class=PasswordItem]/element";
    static public DefaultSelenium selenium;

    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4500, "*firefox", "http://localhost:9091/");
        selenium.start();
    }

    public void testFields() throws Exception {
        selenium.open("/agepro-prototype/login/Login.html");
        selenium.type(login, "Unlogin");
        selenium.type(passwd, "Unpassword");
        Assert.assertEquals("Unlogin", selenium.getValue(login));
        Assert.assertEquals("Unpassword", selenium.getValue(passwd));
        selenium.click("scLocator=//ImgButton[ID=\"bouton_login\"]/");
    }

    public void testSameWindow() throws Exception {
        selenium.open("/agepro-prototype/login/Login.html");
        selenium.type(login, "truc");
        Assert.assertEquals("truc", selenium.getValue(login));
    }

    public void tearDown() throws Exception {
        selenium.stop();
    }
} 
```

我试图将注释@BeforeClass 和@AfterClass 放在setUp() 和tearDown 之前，它不会改变任何东西。在每次测试之前都有一个 @Test 之前，但这根本没有帮助。我可以请你帮忙吗？=)

编辑：哦，我也在 setUp() 中尝试了 selenium.open(blablabla) 而不是直接在测试中，同样的问题，并没有改变任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:26:38.307

在不使用注释的情况下，setUp() 将在每次测试之前运行（即两次）。

这并不漂亮，但您可以创建一个初始测试（只运行一次）并将实例化从 setUp() 移到新的 test() 中。但是请记住，如果创建 selenium 实例失败，那么所有后续测试也将失败。不是很好 ：）

# spring - 如何使用 Hibernate 在 Spring MVC 中为读取操作应用事务最佳实践？

> ID：10750445
> 
> 赞同：5
> 
> 时间：2012-05-25T07:40:48.733
> 
> 标签：spring, hibernate, transactions

正如博客/书籍中提到的那样（例如 Mark Richards 的 Java Transactions Design Strategies），读取操作必须具有 Propagation.SUPPORTS 属性。

在一个带有 Hibernate 4.1 的简​​单 Spring 3.1 MVC 项目中，场景是：

*   使用@Transactional 的声明式事务管理
*   org.springframework.orm.hibernate4.LocalSessionFactoryBean 的 sessionFactory
*   org.springframework.orm.hibernate4.HibernateTransactionManager 的事务管理器
*   带有@Transactional(propagation=Propagation.REQUIRED) 的服务类
*   该服务类的函数，仅使用 @Transactional(propagation=Propagation.SUPPORTS) 检索结果集（执行读取操作）
*   读取操作的功能使用 sessionFactory.getCurrentSession().get() 检索结果集

当然，当Controller执行读操作的功能时，由于没有启动事务，也没有获取到会话，所以会抛出“No Session found for current thread”的异常。

基于上述配置（虽然它是最好的，例如非侵入性、更少代码等），除非之前使用 Propagation.REQUIRED 或 Propagation.REQUIRES_NEW 启动事务，否则不能使用 Propagation.SUPPORTS 属性。

我们如何使用使用 Propagation.SUPPORTS 进行读取操作，而不必启动事务，例如之前使用 Propagation.REQUIRED 但仍然利用声明式事务管理的好处？

先感谢您。

编码器，这里是配置：

```
<tx:annotation-driven transaction-manager="txManager"/>

<context:component-scan base-package="com.myapps.service.impl" />

<bean id="txManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${db.driverClassName}" />
    <property name="url" value="${db.url}" />
    <property name="username" value="${db.username}" />
    <property name="password" value="${db.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="mappingResources">
        <list>
            <value>.....</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${db.dialect}</prop>
            <prop key="hibernate.format_sql">true</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T10:06:51.010

我不同意将 SUPPORTS 用于读取操作。使用必需。

*   无论如何都需要一个事务来执行每个数据库操作
*   做几个小事务一次读取几个东西不会从一级缓存中受益
*   所有后续读取之间不会有任何隔离，这意味着第一次读取不可见的内容可能对第二次读取可见
*   遍历关联时会出现延迟加载异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:11:51.760

Propagation.SUPPORTS 并不总是需要事务。Propagation.SUPPORTS：支持当前事务，如果不存在则以非事务方式执行。

# sql-server-2008 - 如果为空，则遍历表并将外键分配给新记录

> ID：10750447
> 
> 赞同：1
> 
> 时间：2012-05-25T07:41:00.813
> 
> 标签：sql-server-2008, merge-replication

我正在开发一个 SQL 数据库

我有一个表用户

```
 Id   Name   Age    AddressId
----+------+------+----------- 
```

其中 AddressId 是表名称 Addresses 的外键

地址表：

```
 Id   Country   State  City   ZipCode
----+---------+------+------+--------- 
```

我需要一个 SQL 脚本，它遍历所有用户，如果该用户的 AddressId 为空，则在地址表中使用默认值创建一条新记录，并将其作为外键分配给用户

在 SQL 脚本中是这样的：

```
Foreach (User in Users)
    If(user.AddressId==null)
        INSERT INTO Addresses values('DefaultCountry', 'DefaultState', 'DefaultCity', 99999)
        User.AddressId= the id of the newly created row 
```

**编辑** 这是一对一的关系

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:58:55.840

您可以使用`merge`and`output`来执行此操作而无需循环。

```
declare @IDs table(UserId int, AddressId int);

merge Addresses as T
using (select Id, 'DefaultCountry', 'DefaultState', 'DefaultCity', 99999
       from Users
       where AddressID is null) as S (UserId, Country, State, City, ZipCode)
on 0 = 1
when not matched then
  insert(Country, State, City, ZipCode) 
    values (S.Country, S.State, S.City, S.ZipCode)
output S.UserId, inserted.Id into @IDs;

update Users
set AddressId = IDs.AddressID
from @IDs as IDs
where Users.Id = IDs.UserId; 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/71095)

如果您只需要添加一个地址并将该地址连接到所有没有地址的用户，请改用此地址。

```
declare @AddressId int;

insert into Addresses(Country, State, City, ZipCode)
  values('DefaultCountry', 'DefaultState', 'DefaultCity', 99999);

set @AddressId = scope_identity();

update Users
set AddressId = @AddressId
where AddressId is null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:46:56.193

```
create table #Users
(
    id int,
    AddressID int
)

insert into #Users(id, AddressID)values(1, 1)
insert into #Users(id, AddressID)values(2, null)

create table #Address
(
    id int Identity(1,1),
    nam varchar(100)
)

declare @id int
declare @AddressID int
declare @NewAddressID int

declare cur cursor for Select id, AddressID from #Users Where AddressID is null
open cur
Fetch next from cur into @id, @AddressID
While(@@Fetch_Status = 0)
Begin
    Fetch next from cur into @id, @AddressID
    insert into #Address(nam)values(NEWID())
    Set @NewAddressID = SCOPE_IDENTITY();
    Update #Users
    Set AddressID = @NewAddressID
    Where id = @id
End

Deallocate cur

SELECT * FROM #Address
SELECT * FROM #Users
drop table #Address
drop table #Users 
```

# java - Spring MVC 中的响应体

> ID：10750455
> 
> 赞同：1
> 
> 时间：2012-05-25T07:41:23.430
> 
> 标签：java, spring, model-view-controller

我有一个 Spring MVC 控制器，它生成某种字节响应，直接写入响应输出流。对于这种情况，我需要一个带有此签名的控制器

```
@BodyResponse
@AuthorizedMethod(...)
public void createPdf() {
  // doSomething on response
} 
```

但是当用户未被授权时，我想向他展示登录表单。所以我需要这样的方法签名

```
@AuthorizedMethod(...)
public ModelAndView createPdf() {
  return new ModelAndView("login.jsp");
} 
```

我该如何处理？

问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:48:17.670

对于安全检查的特定情况，通常安全框架会自动处理在那里进行重定向，除非您正在执行某种“升级”登录。

对于您的问题的一般情况：如果您在响应中读取并为 ModelAndView 返回 null，则 HandlerAdapter 中有一个特殊陷阱会禁用视图解析。

这意味着如果您只是将 HttpServletResponse 作为方法参数并自己写入字节，然后返回 null，Spring 将不采取进一步的行动并提交响应。

然后，如果您不想写入字节而想返回视图，则只需正常返回 ModelAndView 即可。

# google-analytics - 使用 Google Analytics 为客户显示分析仪表板

> ID：10750457
> 
> 赞同：0
> 
> 时间：2012-05-25T07:41:36.380
> 
> 标签：google-analytics, google-analytics-api, web-analytics

我们有一定数量的客户，我们每个人都会在我们的网站上有他们的页面。我们必须向他们展示他们特定页面的分析。为此，我们根据页面在 Google Analytics 上提供数据。

在客户端管理页面上，他们应该能够查看其页面的分析。这必须来自谷歌分析。

我曾尝试使用 Core Reporting Api，但这需要身份验证，并且应该有权访问 Google Analytics 配置文件，这对客户来说是不可能的。

那么现在，有没有一种方法，客户可以在没有任何身份验证的情况下看到从 Google Analytics 中提取数据的仪表板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:41:28.700

不，需要身份验证才能直接从 Google 提取数据。您可以使用一个“全球”Google 帐户并通过代码对该帐户进行身份验证，以便您的用户可以访问该数据。

我见过的唯一其他选择是自动导出 CSV 数据（通过电子邮件），并有一个例程可以提取 CSV 数据并将其导入系统以供公共/私人使用 - 例如在您的示例中。

希望这可以帮助！

# json - 将 kogrid 与 json 和 knockout.mapping 一起使用

> ID：10750463
> 
> 赞同：2
> 
> 时间：2012-05-25T07:41:54.820
> 
> 标签：json, knockout.js, knockout-mapping-plugin

我尝试将 kogrid 与通过 knockout.mapping 映射的 json 数据一起使用。在我的 WebApp 中，它确实部分适用于 Firefox 和 Chrome - IE9 没有机会。现在我尝试用 fiddle.js 重现问题：但它根本不起作用 - 没有 FF，没有 Chrome，没有 IE9。我看不到我的错误，还有其他人吗？

[http://jsfiddle.net/g9YAT/1/](http://jsfiddle.net/g9YAT/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:59:53.730

这是一个固定版本：

[http://jsfiddle.net/jearles/g9YAT/2/](http://jsfiddle.net/jearles/g9YAT/2/)

JSON.encode 正在将您的对象文字转换为字符串。

# c# - 使用 Windows Phone 7 的局域网 IP 扫描仪

> ID：10750470
> 
> 赞同：1
> 
> 时间：2012-05-25T07:42:21.810
> 
> 标签：c#, windows-phone-7, crash, asyncsocket

我正在尝试向 Windows Phone 7 编写远程控制应用程序。
一切正常，但我无法通过网络进行 IP 扫描。
`Connected`课堂上的参数`Socket`效果不佳。要使用它，我需要连接到任何 IP，然后发送任何消息 - 没关系。但超时时间太长 - 大约 10 秒（对于关闭的个人电脑）。
我需要扫描大约 256 个 IP，而且 2560 秒 - 太长了。我试图自己写超时。它有效，但一段时间后应用程序停止。
我不明白为什么。没有例外。电话只是停止尝试连接，视觉工作室有时会崩溃。如果有溢出 - 它会在哪里？
这是一些代码：（`TryHost`循环`FOR`运行。一次只有一个开始，`Searcher.AddHost()`运行下一次迭代`TryHost`）

**异步客户端：**

```
 public void TryHost(string host)
            {

                SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
                DnsEndPoint hostEntry = new DnsEndPoint(host, _port);

                // Create a socket and connect to the server 

                Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(SocketEventArg_Completed1); 
                socketEventArg.RemoteEndPoint = hostEntry;
                sock.NoDelay = true;
                socketEventArg.UserToken = sock;
                try
                {
                    sock.ConnectAsync(socketEventArg);
                }
                catch (SocketException ex)
                {}

            }

    void SocketEventArg_Completed1(object sender, SocketAsyncEventArgs e)
            {

                switch (e.LastOperation)
                {
                    case SocketAsyncOperation.Connect:
                        ProcessConnect1(e);
                        break;
                    case SocketAsyncOperation.SendTo:
                        connected = false;
                        ProcessSend1(e);
                        break;
                    case SocketAsyncOperation.Receive:
                        sended = false;
                        ProcessReceive1(e);
                        break;
                    default:
                        throw new Exception("Problems");

                }
            }
 private void ProcessReceive1(SocketAsyncEventArgs e)
        {

            if (e.SocketError == SocketError.Success)
            {

                // Received data from server 

                string dataFromServer = Encoding.UTF8.GetString(e.Buffer, 0, e.BytesTransferred);
                if (dataFromServer.IndexOf("<EOF>") > -1)
                {

                    Searcher.AddHost(dataFromServer);

                }

            }
            else
            {
                Searcher.AddHost(null);

            }
        }

        private void ProcessSend1(SocketAsyncEventArgs e)
        {
            if (e.SocketError == SocketError.Success)
            {

                Socket sock = e.UserToken as Socket;
                sended = true;               
                sock.ReceiveAsync(e);                
                Thread.Sleep(500);
                if (sended)
                {
                    sock.Dispose();
                    Searcher.AddHost(null);

                }
            }
            else
            {

                Searcher.AddHost(null);
            }
        }

        private void ProcessConnect1(SocketAsyncEventArgs e)
        {
            if (e.SocketError == SocketError.Success)
            {
                byte[] buffer = Encoding.UTF8.GetBytes("Knock" + "!" + sessionId + "<EOF>");
                  e.SetBuffer(buffer, 0, buffer.Length);
                  sock = e.UserToken as Socket;
                  connected = true;
                  sock.SendToAsync(e);
                  e.ConnectSocket.NoDelay = false;
                  Thread.Sleep(500);
                  if (connected)
                  {
                      sock.Dispose();
                  }
            }
            else
            {
                sock.Dispose();
                Searcher.AddHost(null);

            }
        } 
```

我正在使用`static`类`Searcher`。UI 按钮从`StartSearch()`准备类搜索的方法开始搜索，并在**AsyncClient**变量中运行方法。当`AssyncClient`请求超时或被主机应答时，`AssyncClient`运行`AddHost()`方法并`Searcher`准备下一个 IP，然后重新`TryHost()`开始

**静态搜索器：**

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Collections.Generic;
using System.Threading;    

namespace PivotApp1 {

 class PartedIp
 {
     public string FirstPart;
     public string LastPart;
     public PartedIp(string first, string last)
     {
         FirstPart = first;
         LastPart = last;
     }
 }
 public class SearchArgs : EventArgs
 {

     private List<string> message;

     public SearchArgs(List<string> msg)
     {

         message = msg;
     }

     public List<string> Message
     {
         get { return message; }
     }
 }
 public static class Searcher
 {
     static bool searching = false;
     static string phoneIp = "";
     static string ipTemplate = "";
     static int currentLookingIp;
     static int stopIp;
     static List<string> answers = new List<string>();
     static AsynchronousClient newC;
     static int chBound = 255;
     static int lwBound = 255;

     public static event EventHandler SearchComplete = delegate { };
     public static void SayItsOver(List<string> message)
     {
         SearchComplete(null, new SearchArgs(message));
     }
     static AsynchronousClient searcher;
     static string CheckIp()
     {
         string phoneIp = null;
         try
         {
             MyIPAddress finder = new MyIPAddress();
             finder.Find((address) =>
             {

                 phoneIp = address == null ? "Unknown" : address.ToString();

             });
         }
         catch (Exception e)
         {
             throw new Exception();
         }
         if (phoneIp == "Unknown")
         {
             return null;
         }
         else
         {
             return phoneIp;
         }
     }
     static PartedIp PrepareForSearch(string phoneIp)
     {
         IPAddress ipForTest = new IPAddress(10);
         if (IPAddress.TryParse(phoneIp, out ipForTest))
         {

             string[] splittedIp = phoneIp.Split('.');
             PartedIp phonePartedIp = new PartedIp(splittedIp[0] + '.' + splittedIp[1] + '.' + splittedIp[2] + '.', splittedIp[3]);
             return phonePartedIp;
         }
         else return null;
     }
     public static void StartSearch(AsynchronousClient newC)
     {

         phoneIp = CheckIp();
         if (phoneIp != null)
         {
             searching = true;
             newC = newC1;

             PartedIp partedIp = PrepareForSearch(phoneIp);
             ipTemplate = partedIp.FirstPart;
             stopIp = Int32.Parse(partedIp.LastPart);

             currentLookingIp = stopIp - 1;

             newC.TryHost(ipTemplate + currentLookingIp);
         }
         else
             Deployment.Current.Dispatcher.BeginInvoke(() => {
                MessageBox.Show("Error in Ip detection");

              });
     }

     static void NextHost()
     {
         if (searching)
         {
             currentLookingIp--;
             if (currentLookingIp == 0)
                 currentLookingIp = 255;
         }
     }

     static public void AddHost(string answer)
     {
         if (searching)
         {
             if (answer != null)
             {
                 answers.Add(answer);
             }

             NextHost();
             if (currentLookingIp == stopIp)
             {
                 SayItsOver(answers);
                 searching = false;
             }
             else
             {

                 newC.TryHost(ipTemplate + currentLookingIp);
             }
         }

     }
 } } 
```

我调试了很多时间。我的开始`ip = 192.168.0.103`。`My Server Ip = 192.168.0.100`. 搜索工作完美，直到`192.168.0.19`（这里没有 PC）。即使我从`192.168.0.20`它开始搜索也会崩溃。另一个死区`is 192.168.0.1`和下一个`192.168.0.255`。另外 - 手动启动`TryHost()`工作正常。当我尝试自动搜索时，问题就开始了。怎么了？
我花了几天时间，只是不知道该怎么办。

# c# - 如何只返回带有符号、字母和 C# 数字的大字符串中的数字

> ID：10750473
> 
> 赞同：2
> 
> 时间：2012-05-25T07:42:25.080
> 
> 标签：c#, regex, digits

我在这里有这段代码，我需要返回只有数字的**args.Content （我的输入数据）并删除其余的字符。**我一直在用正则表达式尝试很多东西，但它对我不起作用。我对 C# 几乎一无所知，我真的需要这个网站的程序员的帮助。

```
using System;
using VisualWebRipper.Internal.SimpleHtmlParser;
using VisualWebRipper;
public class Script
{

    public static string TransformContent(WrContentTransformationArguments args)
    {
        try
        {
            //Place your transformation code here.
            //This example just returns the input data
            return args.Content;
        }
        catch(Exception exp)
        {
            //Place error handling here
            args.WriteDebug("Custom script error: " + exp.Message);
            return "Custom script error";
        }
    }
} 
```

希望你能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:45:50.343

只需删除任何不是数字的内容。有一个预定义的数字字符类：`\d`，否定是`\D`。

所以你的正则表达式很简单：

```
\D+ 
```

在您的 C# 代码中，它类似于

```
return Regex.Replace(args.Content, @"\D+", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:48:37.663

当然不是最有效的，但是哦，好吧，我忍不住做了一些 LINQ：

```
var digitsOnly = new string(args.Content.Where(c => char.IsDigit(c)).ToArray()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:52:19.210

```
StringBuilder builder = new StringBuilder();
Regex regex = new Regex(@"\d{1}");
MatchCollection matches = regex.Matches(args.Content);
foreach (var match in matches)
{
    builder.Append(match.ToString());
}
return builder.ToString(); 
```

# url-rewriting - 在 IIS [UrlRewite] 中添加入站规则

> ID：10750476
> 
> 赞同：4
> 
> 时间：2012-05-25T07:42:36.600
> 
> 标签：url-rewriting, iis-7.5, inbound

目前，在我的生产服务器上，我有如下的入站规则集，它可以满足我的所有要求。

入站规则如下。

```
Match URL section
Requested URL: Matches the Pattern
Using: Regular Expression
Pattern: (.*)
Ignore Case: checked.

Conditions section
Logical grouping: Match All.
Input: {HTTPS}
Type: Matches the Pattern
Pattern: ^OFF$
Track capture groups across conditions: unchecked.

Action section:
Action type: Redirect
Redirect URL: https://www.domainname.com/{R:0}
Append query string: checked.
Redirect Type: Permanent (301). 
```

我的要求是：当用户输入

```
https://beta.domain.com it should redirect to https://www.domain.com. 
```

如果用户输入

```
http://beta.domain.com it should redirect to https://www.domain.com. 
```

如果用户键入

```
http://www.domain.com it should redirect to https://www.domain.com 
```

如果用户键入

```
http://domain.com it should redirect to https://www.domain.com 
```

提前致谢。任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:56:12.237

这不正是条件假设要做的吗？它检查 HTTPS 是否关闭，然后才会发生重定向。如果 HTTPS 处于打开状态，则不应重定向，否则您将最终陷入无休止的重定向。

如果您总是希望主机名成为`www.domainname.com`您应该将其添加为附加条件。例如：

```
<rule name="Force HTTPS and host name: www.domainname.com" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAny">
        <add input="{HTTPS}" negate="true" pattern="^ON$" />
        <add input="{HTTP_HOST}" negate="true" pattern="^www\.domainname\.com$" />
    </conditions>
    <action type="Redirect" url="https://www.domainname.com/{R:0}" appendQueryString="true" redirectType="Permanent" />
</rule> 
```

如果`HTTPS`不是或**不是** ，**它将**重定向。只有当两者都为真时，它才不会重定向。`ON``HTTP_HOST` **`www.domainname.com`**

# sql - 如何使用 SQL UNION 指定订单结果？

> ID：10750477
> 
> 赞同：2
> 
> 时间：2012-05-25T07:42:43.527
> 
> 标签：sql, sql-server-2008, select, sql-order-by, union

我正在尝试运行以下查询：

```
select * from (select * from customquestionbank where questionid=6 or secondquestionid=6 
union select * from customquestionbank where questionid=5 or secondquestionid=5 
union select * from customquestionbank where questionid=10 or secondquestionid=10 
union select * from customquestionbank where questionid=11 or secondquestionid=11) Tabled 
```

作为这个网站的新手，我还不能发布图片，但结果如下：

```
questionid -> 5,6 ,10,11 
```

但是，我希望结果以与我上面的选择语句相同的顺序显示。换句话说，questionid=6 先返回，然后是 5，以此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:55:07.473

你不需要所有的工会，只要这样：

```
SELECT DISTINCT * 
FROM   customquestionbank 
WHERE  questionid IN ( 6, 5, 10, 11 ) 
        OR secondquestionid IN ( 6, 5, 10, 11 ) 
ORDER  BY CASE 
            WHEN 6 IN ( questionid, secondquestionid ) THEN 0 
            WHEN 5 IN ( questionid, secondquestionid ) THEN 1 
            WHEN 10 IN ( questionid, secondquestionid ) THEN 2 
            WHEN 11 IN ( questionid, secondquestionid ) THEN 3 
          END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:53:33.790

删除您正在使用的超级选择

将查询写为

```
Select * from query1 union
Select * from query2 union
Select * from query3; 
```

这将根据需要带来您的结果

否则试试这个

```
Select col1,col2 from( Select 1,q1.* from query1 q1 union
Select 2,q2.* from query2 q2 union
Select 3,q1.* from query3 q3) 
```

在超级查询中仅选择所需的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:00:13.673

如果您的 RDBMS 支持`VALUES`构造函数

```
SELECT questionid, secondquestionid
FROM   (VALUES(6,1), 
              (5, 2), 
              (10, 3), 
              (11, 4)) V(q, ord) 
       JOIN customquestionbank 
         ON q IN ( questionid, secondquestionid ) 
GROUP BY questionid, secondquestionid         
ORDER  BY MIN(ord) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:04:52.940

如果您的 RDBMS 是`mysql`，我认为您可以`ORDER BY FIELD`这样尝试：

```
SELECT *
FROM customquestionbank
WHERE
  questionid IN(6, 5, 10, 11)
  OR secondquestionid IN(6, 5, 10, 11)
ORDER BY FIELD(questionid, 6) ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:09:53.327

替换`Union`为`Union ALL`

```
create table #t
(
    id int
)
insert into #t(id)values(5)
insert into #t(id)values(2)
insert into #t(id)values(4)
insert into #t(id)values(3)

Select * from
(
    Select * from #t where id = 5
    uNION All
    Select * from #t where id = 2
    uNION All
    Select * from #t where id = 4
    uNION All
    Select * from #t where id = 3
)K

DROP TABLE #t 
```

# android - facebook如何知道用户在哪些应用程序中注册

> ID：10750481
> 
> 赞同：0
> 
> 时间：2012-05-25T07:42:50.077
> 
> 标签：android, facebook-graph-api, facebook-fql

我正在构建一个基于 facebook 的移动应用程序。每次用户登录我的服务器时，我都想知道他的哪些朋友在 facebook 中接受了我的申请。我现在正在做的是我正在向我的服务器发送用户朋友的列表，并向他返回一个列表，其中朋友也是我的应用程序的成员。问题是当用户有很多朋友时，这个过程真的很慢..

有没有办法抛出图形 api 或 FQL 来检查用户（或他的朋友）授予哪些应用程序权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:12:59.170

每当您将应用标记为原生时，Facebook 都会禁止应用访问令牌发出 API 请求 - 这是一种保护开发人员和用户的安全措施，因为大多数原生应用都会分发其应用机密，因此无法信任。

也就是说，目前无法通过 Graph API 或 FQL 检索应用程序的用户列表。我的建议是您应该在授权时跟踪这一点 - 您获得用户访问令牌的时间点 - 因为您可以将完整的 UID 列表存储在您自己的数据库中，而不依赖于该列表的 API。

作为一种可能的解决方法（假设您没有执行我上面推荐的操作并且已经有许多用户），如果您在某处存储了访问令牌，则可以遍历这些令牌并调用`https://graph.facebook.com/me`每个令牌，这应该会给您所有应用用户的 UID。不过，您可能没有集中存储访问令牌，在这种情况下，恐怕您将无法获得此列表。

# r - 在 R 框架中按字符串标签选择特定列

> ID：10750483
> 
> 赞同：3
> 
> 时间：2012-05-25T07:42:58.143
> 
> 标签：r, dataframe

我想从 R 的框架中排除*带有“fldname”*标签的列`frm`。如果我们知道列的索引，`i`那么我们可以使用`frm[-i]`排除第`i`^(th)列。是否有任何简单的方法可以通过指定我要排除的列标签字符串或标签字符串列表来做同样的事情？

我制定了一个解决方案（由 Fhnuzoag 更正）：

~~`frm[names (frm)[names (frm) != c("fldname1","fldname2")]]`~~

`frm[names (frm)[!names (frm) %in% c("fldname1","fldname2")]]`

获取想要的字符串列表并将它们用作索引。“ fldname1 *”*和*“fldname2”*上方是不需要的字段。

语言语法有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:06:17.303

是的，使用否定`!`和`%in%`. 例如，使用`iris`：

```
x <- iris[, !names(iris) %in% c("Sepal.Width", "Sepal.Length")]
str(x)
'data.frame':   150 obs. of  3 variables:
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:07:13.637

我想不是。通常我会`frm[, setdiff(names(frm), excludelist)]`。

# php - php exec() 输出的触发函数

> ID：10750487
> 
> 赞同：0
> 
> 时间：2012-05-25T07:43:20.563
> 
> 标签：php, console, command-line-interface

我有一个非常耗时的视频编码任务，我使用 exec() 函数从 php 运行它。在编码期间，软件更新控制台行并完成百分比。有没有办法在 php 中获取这些数据以供以后处理，或者在控制台中的数据更新时调用 php 函数。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:51:31.937

您可以`shell_exec`改用，但这意味着您的 PHP 脚本将等待操作完成。如果您希望您的用户上传视频，您可能不想让他们等待那么久。在这种情况下，您可以做的是让面向用户的脚本`exec`调用`php processvideo.php`或调用任何您的繁重脚本，然后`shell_exec`从那里使用，这样您就可以获得返回数据。

# php - 我如何将现有的 Zend FW 应用程序集成到 1 个应用程序中？

> ID：10750488
> 
> 赞同：0
> 
> 时间：2012-05-25T07:43:30.807
> 
> 标签：php, zend-framework, integration

一个已有 8 年以上历史的应用程序正在从一个独立的网站迁移到一个面向 Web 服务的架构，以允许外部各方访问应用程序内的计算和数据。

该应用程序允许访问者访问与保险相关的信息、计算报价和联系代理。

应用程序的原始逻辑已从主应用程序提取到 SOAP 服务 - 到目前为止，一切都很好。

基于 Zend FW 的内部知识，我们选择放弃具有许多缺点的遗留代码，转而使用更强大和社区支持的框架 - Zend。

已经构建了一个使用 WSDL 并允许搜索和显示客户的初始 Zend FW 应用程序。完成之后，我们希望为组件集成外部应用程序/模块，例如基本 (!) cms、群发邮件、投票等。

由于我们认为这些组件对最终产品至关重要，但不是我们自己的核心产品，因此我们希望为此使用外部应用程序。

然而——看看tomatocms和digitalus等，他们似乎要求我们将我们的产品构建到他们的产品中——而我们希望它反过来。CMS 页面是例外，而不是规则。

在这些应用程序之间集成身份验证似乎非常困难，因为每个应用程序似乎都想成为“那个”应用程序。

TL;博士：

将 CMS 或其他应用程序集成到现有/正在进行的 zend FW 应用程序中的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:59:18.893

我认为对您来说最好的解决方案是为模块/插件创建一个结构，您可以在其中设置使用模式，您将使您的应用程序理解按照上述规范创建的这些模块。

有了这个，您允许任何人创建或开发模型 desaclopados 他们的应用程序。

我认为这是您的 Wordpress 插件的一个很好的例子。任何人都可以在应用程序页面中创建和嵌入它的功能，但当然你可以限制它的 API，控制你想要的。

# android - 为每个选项卡维护单独的后台堆栈（使用片段实现）

> ID：10750489
> 
> 赞同：0
> 
> 时间：2012-05-25T07:43:34.087
> 
> 标签：android, android-fragments, fragment, android-tabhost

我正在研究 FragmentsTabs，谁能告诉我，如何为每个选项卡维护单独的 backstack...？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T06:20:45.033

最新的支持库包括嵌套片段。嵌套片段可用于为每个选项卡实现单独的后台堆栈。

您需要在每个父选项卡片段中都有一个子片段，并使用子片段而不是父片段添加到后台堆栈。

您还需要覆盖 OnBackPressed 以便在必要时弹出当前活动选项卡片段的后台堆栈。

例如：

```
 public void onBackPressed()
    {
        if (!currentTabFragment.getChildFragmentManager().popBackStackImmediate())
        {
            super.onBackPressed();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:52:55.587

其实你不能。这对于您跑步`backstack`的每个人来说都是独一无二的。因此，IMO 唯一的方法就是拥有更多.`Activity``fragments``Activity`

编辑：[在这里查看我的问题](https://stackoverflow.com/questions/9598475/fragment-with-multiple-backstack)

# .net - 如何指定从 WebBrowser 控件提供的证书？

> ID：10750511
> 
> 赞同：3
> 
> 时间：2012-05-25T07:45:07.063
> 
> 标签：.net, winforms, webbrowser-control, x509certificate, digital-certificate

我在 WinForms 应用程序中嵌入了一个 webbrowser 控件，该控件正在加载需要数字证书的内容。如果我的证书集合中只有一个有效证书，则它可以正常工作。

但是，如果我有多个证书，尤其是其中一个无效，则似乎选择并提交了错误的证书。当应用程序分发时，我不知道他们将安装什么证书。

[除此之外](https://stackoverflow.com/questions/4388149/how-to-force-webbrowser-control-to-select-one-specific-client-certificate)，还有什么方法可以确保 WebBrowser 控件选择正确的证书？

# wcf - 服务发回一个错误，表明它太忙而无法处理请求。请稍后重试。故障详情请查看内部异常

> ID：10750520
> 
> 赞同：0
> 
> 时间：2012-05-25T07:45:50.797
> 
> 标签：wcf

我正在使用一项部署在 .net 4.0v 设计的服务器中的 WCF 服务。但是在处理完所有队列后，它会产生异常，即服务发回一个错误，表明它太忙而无法处理请求。请稍后重试。有关故障详情，请参阅内部异常。我正在使用“wsHttpBinding”

```
<customBinding>
        <binding name="CustomSecurity">
          <security>
            <localServiceSettings maxPendingSessions="1000" />
            <secureConversationBootstrap />
          </security>
        </binding>
      </customBinding>

 <binding name="CustomSecurityxxx" closeTimeout="01:00:00"
          openTimeout="01:00:00" receiveTimeout="01:00:00" sendTimeout="01:00:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="1000000" maxReceivedMessageSize="1000000"
          messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
          allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="01:00:00"
            enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding> 
```

提前致谢。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:16:21.957

是的，它是固定的。

我增加了 serviceThrottling 值

`<serviceThrottling maxConcurrentCalls="1000" maxConcurrentSessions="1000" maxConcurrentInstances="1000"/>`从 200 开始，并简单地将服务实例包含在 using 块中，以便该块将处理对象的范围，如初始化和处置

示例代码语法如下

```
xxxClient ServiceObject;

    using (ServiceObject= new xxxClient()) 
                    {
                        try
                        {
                            your code goes here
                        }
                        catch (Exception ex)
                        {
                            ServiceObject.Abort();
                        }  

                    } 
```

希望对面临同样问题的人有所帮助。

# android-ndk - Android.mk：如何自动添加反斜杠

> ID：10750521
> 
> 赞同：2
> 
> 时间：2012-05-25T07:45:51.447
> 
> 标签：android-ndk, makefile, gnu-make

在`Android.mk`中，我读取了系统环境变量的上下文，如 $(MY_ENV_VARIABLE)。env 变量在“Program(x86) Files”中包含以下字符串。

但是构建失败，声称找不到指定的库。失败发生在`"Program(x86) Files"`.

所以我的问题是，是否有任何机制可以自动转义空间等特殊符号（即`"Program(x86)\ Files"`，就我而言）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:04:14.253

您可能可以尝试使用使用波浪号字符的 Windows 路径约定，而不是`C:\Program(x86) Files\mydir`它`C:\PROGRA~2\mydir`（PROGRA~1 用于 64 位程序文件）。

就像 eldar 在评论中所说的那样，最好不要在路径名中使用空格，因为大多数 make 的函数都使用空格作为分隔符。您可以尝试的另一个选择是在这里查看我的建议：[WINAVR not find file in include path with whitespace](https://stackoverflow.com/questions/10762766/winavr-not-finding-file-in-include-path-with-whitespace)

由于 Android 是一个非常复杂的构建环境，除非您知道自己在做什么并且希望不会破坏 makefile 中的任何其他内容，否则可能很难看到最终替换的位置。

# xquery - 有没有办法从 Marklogic 通用索引中获取索引词列表

> ID：10750530
> 
> 赞同：1
> 
> 时间：2012-05-25T07:46:33.273
> 
> 标签：xquery, marklogic

我正在使用 Marklogic 工具，我有一个包含大约 27000 个文档的数据库。我想要做的是检索在任何搜索查询结果给出的文档中频率最高的关键字。我目前正在使用 xquery 函数来计算作为查询结果检索到的所有文档集中每个单词的频率。然而，这是非常低效的。我在想，如果我能获得 marklogic 执行索引的单词列表，这将对我有所帮助。那么有没有办法从marklogic的通用索引中检索索引词列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:56:35.487

通常你会在 MarkLogic 中使用这样的东西：

```
(
    for $v in cts:element-values(xs:Qname("myelem"))
    let $f := cts:frequency($v)
    order by $f descending
    return $v
)[1 to 10] 
```

这种功能是内置在`search:search`库中的，使用起来非常方便。

但不幸的是，你不能在`cts:words`ea 的值上使用它。有一个小技巧可以让你接近。`cts:frequency`您可以使用 a `xdmp:estimate`on a`cts:search`来获取片段计数，而不是使用：

```
(
    for $v in cts:words()
    let $f := xdmp:estimate(cts:search(collection(), $v))
    order by $f descending
    return $v
)[1 to 10] 
```

性能较差，但仍然比直截了当地运行所有文档要快得多。

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:57:57.553

如果您的搜索包含多个字词怎么办？你将如何计算订单？

如果您的某些术语在您的文档语料库中非常常见，而其他术语则非常罕见怎么办？“the”的计数应该比“protease”对分数的贡献更大，还是应该贡献相同？

如果这些词出现在标题中而不是文档中的其他地方，这有关系吗？

如果一个文件比较短，而另一个文件很长怎么办。你怎么解释？

这些是在尝试确定相关性时出现的一些基本问题。大多数搜索引擎使用词频（这些词在您的文档中出现的频率）和文档频率（有多少文档包含这些词）的组合。他们还可以使用文档中术语的位置来确定分数，并且他们还可以在确定分数时考虑文档长度。

默认情况下，MarkLogic 使用术语频率和文档频率的组合来确定相关性。这些因素（和其他因素）用于确定搜索条件的相关性分数，该分数是 search:search 从搜索 API 或低级 cts:search 及其支持运算符返回的结果的默认排序。

您可以查看 cts:search 选项的详细信息，以了解一些不同的评分选项。在此处查看“score-logtfidf”和其他内容：

[http://community.marklogic.com/pubs/5.0/apidocs/SearchBuiltins.html#cts:search](http://community.marklogic.com/pubs/5.0/apidocs/SearchBuiltins.html#cts:search)

我还会查看搜索开发人员指南：

[http://community.marklogic.com/pubs/5.0/books/search-dev-guide.pdf](http://community.marklogic.com/pubs/5.0/books/search-dev-guide.pdf)

XQuery 工作组正在考虑将许多概念作为 XQuery 未来版本的增强功能。它们不是今天语言的一部分。MarkLogic 多年来一直处于搜索的前沿，因此您会发现产品中有许多功能，并且在档案中与该领域相关的讨论很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T16:05:07.323

*“有没有办法从marklogic的通用索引中检索索引词列表？”* 不，通用索引是哈希索引，因此它包含哈希而不是单词。

正如其他人所指出的，您可以创建可以列出其内容的基于值的词典。其中一些还包括频率信息。但是，我有另一个建议：`cts:distinctive-terms()`从一系列节点中识别出最有特色的词条，这可能是搜索结果的当前页面。您可以控制输出术语是否只是单词，或者包含更复杂的术语，例如元素词或短语。有关更多详细信息，请参阅文档。

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:distinctive-terms](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:distinctive-terms)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:34:22.493

我使用了 cts:distinctive-terms()。在我的情况下，它主要提供通配符术语，这些术语没有多大用处。此外，它还适用于在单个文档中查找独特的术语。当我尝试在许多文档上运行它时，速度很慢。

我想要实现的是一个动态方面，其中填充了搜索结果中出现的文档的关键字。我已经实现了它，但它效率低下，因为它计算文档中所有单词的频率。我希望它是一个建议或推荐功能，例如，如果您搜索过这个特定的术语或短语，那么您可能会对这些建议的术语或短语感兴趣。所以我想要一种有效的方法来查找搜索文档结果集中常见的术语。

我按照建议尝试了 cts:words() 。它给出了与搜索查询词相似的词以及包含它的文档数。它没有考虑的是搜索结果文档集。它只显示整个数据库中包含相似词的文档的数量，无论这些文档是否存在于搜索结果中

# php - 让 Symfony 2 Assetic 开发变得舒适

> ID：10750531
> 
> 赞同：9
> 
> 时间：2012-05-25T07:46:40.630
> 
> 标签：php, symfony, assetic

我正在寻找使 Symfony 2 Assetic 1.0.2 开发更容易的方法。我使用 Assetic 倾销/发布我的资产。

目前我一直在后台运行这个命令：

```
php app/console assetic:dump --watch 
```

它有很大帮助，我对 JS 或 CSS 文件所做的每一次更改都会自动转储到浏览器从中获取资源的公共目录中。

但是，我对此有疑问：

1.  如果我添加一个新的 CSS/JS 文件，由于某种原因它不会被转储。我需要停止手表，清除缓存并再次启动手表。

2.  它有点慢，不断消耗 5%-20% 的 CPU 时间。

与 Assetic 一起开发是否有替代方案？我已经尝试过通过控制器（`use_controller: true`用于 Assetic）提供资源的方法，但它甚至更慢（因为让我们面对一个事实，PHP 不用于提供静态数据）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:17:51.287

对我来说，这是`Assetic`我能找到的最快的开发方式。我尝试并尝试找到更好的工作流程来提高资产生成速度，但没有找到。

`Symfony2`在组件的主分支中有一些工作`ResourceWatcher`可能有助于解决这个问题：

1.  通过依赖原生资源观察器来加速观察过程`inotify`
2.  修复添加/删除资源时的问题，以便正确转储它们。

您可以在此[PR](https://github.com/symfony/symfony/pull/3961)中查看组件的进度。

希望有人能提供一些技巧来加快使用资产或完全不同的工作流程的开发。

问候，
马特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T16:41:00.220

对于缓慢，您可以使用`--no-debug`and运行`--forks=4`。通过 composer 安装 Spork 依赖，然后运行`app/console assetic:dump --no-debug --forks=4`​​.

如果您有更多核心，请添加更多分叉。如果您想保持核心空闲，请降低该数字。不知道为什么它没有快 4 倍——毫无疑问，将不同的资产作业分配给不同的内核并不是很聪明——但这是一个开始。

我只是简单地尝试了一些事情：

```
time app/console assetic:dump

real    1m53.511s
user    0m52.874s
sys     0m4.989s

time app/console assetic:dump --forks=4

real    1m14.272s
user    1m12.716s
sys     0m5.752s

time app/console assetic:dump --forks=4 --no-debug

real    1m9.569s
user    1m6.948s
sys     0m5.844s 
```

我不确定这是否会有所帮助`--watch`，`--watch`因为它本身会消耗整个核心，因为`while (true)`在 PHP 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:53:59.233

在开发中使用这个：

```
php app/console assets:install web --symlink 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-15T17:27:36.993

1.  为开发和生产配置不同的过滤器。在生产中，你希望你的 JS 和 CSS 被缩小和丑化，但这在开发过程中是浪费时间。

2.  确保这`assetic.debug`是错误的。这将确保您的 JS 和 CSS 文件连接在一起，以便可以在一个 HTTP 请求中分别获取所有 JS 和 CSS。

3.  如果您正在使用控制器（`assetic.use_controller`为 true）并且您打开了浏览器的开发人员工具箱，请确保*取消选中*“禁用缓存”复选框（在 Chrome 中，该复选框位于网络窗格中；在 Firefox 中，它位于设置窗格中） . 这将允许您的浏览器发送 If-Modified-Since 请求——如果服务器上的文件没有更改，服务器将返回`304 Not modified`而不重新编译您的资产，并且浏览器将使用浏览器缓存中的最新版本。

4.  不要使用 Assetic 从 CDN 加载文件。将文件下载到您的服务器（手动、使用 Bower 或其他方式），或者通过添加`<script src=…&gt;`或`<link rel=stylesheet href=…&gt;`直接添加到 HTML 模板从 CDN 加载它们。

# c# - 如何根据互联网连接将数据保存在不同的数据库中

> ID：10750532
> 
> 赞同：1
> 
> 时间：2012-05-25T07:46:48.287
> 
> 标签：c#, mysql, database, database-connection

我想让我的代码能够检查是否建立了互联网连接。之后，我通常会将记录保存在服务器上的数据库中，但我希望能够在每次连接丢失时将记录保存在 pc 上的本地数据库中，并且在服务器上的每个正常连接之前检查本地数据库是否为空并且将所有内容从本地数据库复制到服务器数据库。

这是我现在使用的代码：

```
//open database connection
con = new MySqlConnection("server=192...;database=GPS_data;uid=root;pwd=******");
con.Open();

//check if card reader is loged
if (card_number != null)
{
    cmd = new MySqlCommand("insert into data values (null, ?Parname , ?Parname2, ?Parname3, ?Parname4, ?Parname5, ?Parname6, ?Parname7);", con);
    cmd.Parameters.Add("?Parname", MySqlDbType.Double).Value = Math.Round(deciLat, 5);
    cmd.Parameters.Add("?Parname2", MySqlDbType.Double).Value = Math.Round(deciLon, 5);
    cmd.Parameters.Add("?Parname3", MySqlDbType.Timestamp).Value = DateTime.Now;
    cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = card_number;
    cmd.Parameters.Add("?Parname5", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("reg");
    cmd.Parameters.Add("?Parname6", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("ser");
    cmd.Parameters.Add("?Parname7", MySqlDbType.Double).Value = ellipHeight;
    cmd.ExecuteNonQuery();
    lastDBUpdate = DateTime.Now;
}
else //in the case when user is not logged in with the card
{
    cmd = new MySqlCommand("insert into data values (null, ?Parname , ?Parname2, ?Parname3, ?Parname4, ?Parname5, ?Parname6, ?Parname7);", con);
    cmd.Parameters.Add("?Parname", MySqlDbType.Double).Value = Math.Round(deciLat, 5);
    cmd.Parameters.Add("?Parname2", MySqlDbType.Double).Value = Math.Round(deciLon, 5);
    cmd.Parameters.Add("?Parname3", MySqlDbType.Timestamp).Value = DateTime.Now;
    cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = null;
    cmd.Parameters.Add("?Parname5", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("reg");
    cmd.Parameters.Add("?Parname6", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("reg");
    cmd.Parameters.Add("?Parname7", MySqlDbType.Double).Value = ellipHeight;
    cmd.ExecuteNonQuery();
    lastDBUpdate = DateTime.Now;
} 
```

所以这部分代码在服务器上。我的意思是不应该有任何特殊的连接检查，因为如果没有建立连接，这可能会导致错误。

我想根据连接添加保存到本地数据库，所以连接=丢失（保存在本地数据库中），连接=建立（首先检查本地数据库是否为空=如果不复制到服务器数据库，继续在服务器上记录）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:52:01.133

创建一个函数 GetConnectionString() 并使用此函数始终获取连接。

写下代码以检查互联网是否存在并在此基础上返回连接。

```
public string GetConnectionString()
    {
        string SqlConString1 = value;//Read from config
        string SqlConString2 = value;//Read from config
        WebClient client = new WebClient();
        try
        {
            using (client.OpenRead("http://www.google.com"))
            {
            }
            return SqlConString1 ;
        }
        catch (WebException)
        {
            return SqlConString2 ;
        }
    } 
```

[请参阅此以获取更多代码以检查互联网连接 1](https://stackoverflow.com/questions/5405895/how-to-check-internet-connection-with-net-c-wpf)

[请参阅此以获取更多代码以检查互联网连接 2](https://stackoverflow.com/questions/2521569/how-to-detect-working-internet-connection-in-c)

[请参阅此以获取更多代码以检查互联网连接 3](https://stackoverflow.com/questions/1085045/check-whether-internet-connection-is-available-with-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:18:17.623

创建返回连接对象的函数取决于任何逻辑。然后对该对象进行交易并始终检查结果。如果结果不正确，则取决于连接类型决定如何处理数据。

# jquery - 滑块不会后退

> ID：10750533
> 
> 赞同：0
> 
> 时间：2012-05-25T07:47:02.993
> 
> 标签：jquery

我怀疑我的 jQuery 脚本出了点问题，但与示例相比，似乎无法追踪出了什么问题。你在 jQuery 调用中看到了什么可疑的地方吗？

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<style>
#menu{
    height: 30px;
    background-color: #f90;
}

#menu li li:hover{
background-color: yellow;
cursor: pointer;
}

#menu ul, #menu li{
list-style-type:none;
padding:0;
margin:0;
}

#menu li{
float:left;
width:120px;
list-style-type:none;
line-height:30px;
text-align:center;
}

#menu li ul{
position:absolute;
background-color:#f90;
display:none;
}

#menu li li{
float:none;
padding:2px;
}

#menu a{
color:#000;
text-decoration:none;
}
</style>
<script type="text/javascript">
    $(document).ready(function(){
        $("#menu li").hover(function(){
            $(this).children(":hidden").slideDown();
        });
    },function(){
        $(this).parent().find("ul").slideUp();
    });
</script>
</head>

<body>
<div id="menu">
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Info</a>
        <ul>
            <li><a href="#">Submenu1</a></li>
            <li><a href="#">Submenu2</a></li>
            <li><a href="#">Submenu3</a></li>
        </ul>
    </li>
    <li><a href="#">Portfolio</a>
        <ul>
            <li><a href="#">Submenu1</a></li>
            <li><a href="#">Submenu2</a></li>
            <li><a href="#">Submenu3</a></li>
        </ul>
    </li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:51:16.423

**工作演示** [http://jsfiddle.net/bncSS/9/](http://jsfiddle.net/bncSS/9/)

你有额外的`});`错误

**代码**

```
 $(document).ready(function(){
        $("#menu li").hover(function(){
            $(this).children(":hidden").slideDown();

    },function(){
        $(this).parent().find("ul").slideUp();
    });
  });
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:51:20.897

是的，jQuery 应该是：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#menu li").hover(
        function(){
            $(this).children(":hidden").slideDown();
        },
        function(){
            $(this).parent().find("ul").slideUp();
        });
    });
</script> 
```

[jsfiddle](http://jsfiddle.net/jesus_tesh/KCdaa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:36:20.647

```
<html>
<head>
<script
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"
    type="text/javascript"></script>
<style>
#menu {
    height: 30px;
    background-color: #f90;
}

#menu li li:hover {
    background-color: yellow;
    cursor: pointer;
}

#menu ul,#menu li {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#menu li {
    float: left;
    width: 120px;
    list-style-type: none;
    line-height: 30px;
    text-align: center;
}

#menu li ul {
    position: absolute;
    background-color: #f90;
    display: none;
}

#menu li li {
    float: none;
    padding: 2px;
}

#menu a {
    color: #000;
    text-decoration: none;
}
</style>
<script type="text/javascript">
    $(document).ready(function() {
        $("#menu li").hover(function() {
            $(this).parent().find("ul").slideUp();
            $(this).children(":hidden").slideDown();
        });
    });
</script>
</head>
<body>
    <div id="menu">
        <ul>
            <li><a href="#">Home</a>
            </li>
            <li><a href="#">Info</a>
                <ul>
                    <li><a href="#">Submenu1</a>
                    </li>
                    <li><a href="#">Submenu2</a>
                    </li>
                    <li><a href="#">Submenu3</a>
                    </li>
                </ul></li>
            <li><a href="#">Portfolio</a>
                <ul>
                    <li><a href="#">Submenu1</a>
                    </li>
                    <li><a href="#">Submenu2</a>
                    </li>
                    <li><a href="#">Submenu3</a>
                    </li>
                </ul></li>
        </ul>
    </div>
</body>
</html> 
```

# c# - XSLT 将 HTML 转换为 Markdown 不起作用

> ID：10750537
> 
> 赞同：1
> 
> 时间：2012-05-25T07:47:33.117
> 
> 标签：c#, asp.net, xslt, markdown

我正在使用[此处](http://symphony-cms.com/download/xslt-utilities/view/20573/)找到的 XSLT将 HTML 中的内容转换为 Markdown 格式，但我得到的结果是没有 Markdown 格式语法的纯文本。这是我正在使用的功能：

```
private static string ConvertToText()
{
    string text = string.Empty;

    XmlDocument xsl = new XmlDocument();
    xsl.CreateEntityReference("nbsp");
    xsl.Load(System.Web.HttpContext.Current.Server.MapPath("/Test/markdown.xslt"));

    XmlReader xr = XmlReader.Create(System.Web.HttpContext.Current.Server.MapPath("/Test/html.xml"));

    //creating stringwriter
    StringWriter writer = new System.IO.StringWriter();

    XslCompiledTransform xslt = new XslCompiledTransform();
    xslt.Load(xsl);
    xslt.Transform(xr, null, writer);

    //return string
    text = writer.ToString();
    writer.Close();

    return text;
} 
```

谁能告诉我为什么它不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:20:00.180

我猜你的问题是你输入 XML 中的 xmlns。在转换之前尝试在`xr`变量中删除它，或者使用命名空间声明调整 XSL 文件，例如：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="http://www.w3.org/1999/xhtml">
...
<xsl:template match="html:h3">
... 
```

# asp.net - 创建文件下载功能

> ID：10750540
> 
> 赞同：1
> 
> 时间：2012-05-25T07:47:56.213
> 
> 标签：asp.net, asp.net-mvc

我正在尝试在 MVC 操作中创建下载功能，并且实际下载有效，但是文件以操作名作为文件名保存，例如从下面的代码中我得到一个文件名“DownloadMP3”。有人知道下载时如何保留原始文件名吗？

```
[Authorize]
    public virtual FileResult DownloadMP3(string fileName)
    {
        //Actions/Download?filename=test

        //test 
        string filePath = @"~/Content/xxxxx/" + fileName + ".mp3";

        Response.AddHeader("content-disposition", "attachment;" + filePath + ";");

        return File(filePath, "audio/mpeg3");

        //for wav use audio/wav

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:52:16.513

Content-Disposition 标头的正确语法如下：

```
Content-Disposition: attachment; filename=foo.mp3 
```

但在这种情况下，您可以简单地使用 File 方法的重载，该方法接受 3 个参数，第三个是文件名。它将自动发出带有附件的 Content-Disposition 标头，因此您无需手动添加它（并且像您一样在其语法中犯错误）。

此外，您的`filePath`变量必须指向服务器上的物理文件，而不是相对 url。用于`Server.MapPath`此：

```
public virtual ActionResult DownloadMP3(string fileName)
{
    var downloadPath = Server.MapPath("~/Content/xxxxx/");
    fileName = Path.ChangeExtension(Path.GetFileName(fileName), "mp3");
    var file = Path.Combine(downloadPath, fileName);
    return File(file, "audio/mpeg3", fileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:54:13.600

只需将文件名放在内容配置中，而不是虚拟路径：

```
 string fileOnly = fileName + ".mp3";
    string filePath = @"~/Content/xxxxx/" + fileOnly;

    Response.AddHeader("content-disposition", "attachment;" + fileOnly + ";"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:54:42.770

尝试添加第三个参数

```
return File(file.FullPath, file.MimeType, file.FullName); 
```

# javascript - 未捕获的类型错误：无法读取 null 的属性“名称”

> ID：10750544
> 
> 赞同：0
> 
> 时间：2012-05-25T07:48:06.623
> 
> 标签：javascript, google-maps, google-maps-api-3, google-places-api

我正在使用 Google Maps and Places API 来获取地点列表并将它们添加到地图中。当您单击其中一个标记时，会出现一个信息窗口，允许用户查看该地点的名称、联系方式等。对于大约 60% 的标记，一切正常，但对于另外 40%，信息窗口没有出现。查看 javascript 错误，我看到了这个：

```
Uncaught TypeError: Cannot read property 'name' of null. 
```

这是我创建信息窗口的代码：

```
function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });
  var one = 1;
  var two = 2;

  var request = { reference: place.reference };
  service.getDetails(request, function(details, status) {
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(
        details.name + "<br />"
        + details.formatted_address + "<br />"
        + "<a target='_blank' href='" + details.website +"'>Visit Website</a>" + "<br />"
        + details.formatted_phone_number + "<br />"
        + "<a href='#' onclick='getDirections(" + details.geometry.location.toUrlValue() 
        + "," + location1 + "); return false;'>Directions from Marker One</a>" + "<br />"
        + "<a href='#' onclick='getDirections2(" + details.geometry.location.toUrlValue()
        + "," + location2 + "); return false;'>Directions from Marker Two</a>" + "<br />"
      );
      infowindow.open(map, this);
    });
  });
} 
```

我真的不明白这个错误。谷歌存储的所有地方肯定都必须有名字吗？！

作为记录，我浏览了 Google Places & Maps API 文档，我真的找不到任何对我有帮助的东西。

任何帮助将不胜感激。

更新：

所以我按照建议在控制台中记录了这些地方。对于我正在做的示例测试，它在我的地图上创建了 20 个标记。在它创建的 20 个中，只有 8 个在单击时显示信息窗口，其他 12 个返回上面列出的错误。正如我所期望的那样，所有 20 个地方都已打印到控制台，所有这些都是对象，它们看起来都一样。下面我列出了控制台中打印的可点击和不可点击的内容。

可点击：

```
Object
geometry: Object
html_attributions: Array[0]
icon: "http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png"
id: "97df16ee5e8d0d9e0c337f52b66dd85ae44de298"
name: "Red Lion"
rating: 3.3
reference: "CnRmAAAA1Oe3LpGcT2zpHUgRq4jfsx-QsnpgUlPKKhVhBL0AVjY1BNKJiscqTbxl-25alM_DJzTIjJTeIkpuVKL0CHkxgBc_nLKNddOkKv6EICQymo7etn-MVY4h06bTKUBwSjIfH30vbNSgCeiv3Cfzy27eORIQrUUJ4nStEjkCI2fJMTaVsRoUHI04xFPDfej3xHC17nJH2mBNBzg"
types: Array[3]
vicinity: "Little Missenden, Amersham"
__proto__: Object 
```

不可点击：

```
Object
geometry: Object
html_attributions: Array[0]
icon: "http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png"
id: "01128746c46a52d9a215d3d6a01c11e22f1a49be"
name: "The Full Moon"
rating: 3.9
reference: "CnRrAAAAWDw84_G5mLrNQxd1b14uVsPhw6LmR6sXdvDrJqSDqnMUSzj88n1TImyictRtxtI6_mQz5YXyiBDWM5Un74MoCH06On5kf5JDw6RM3le2SDUcqyZO04NhqwyeBT267ctu91I74hTJmx_VGgqEpXe0HxIQhErbCKXmDJU2yaVmtltITxoUOi4OrxKU9fPGoBiYAn3NGmNpcn8"
types: Array[2]
vicinity: "Hare Lane, Little Kingshill, Great Missenden"
__proto__: Object 
```

我也尝试删除所有不必要的代码。

可能值得注意的是，控制台中打印的一些属性可以进一步扩展，不确定它是否相关，所以我没有为示例做。如果有人认为它是相关的，我可以在以后添加一个更新的。

感谢您迄今为止的所有回复。

JA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:06:31.067

`details`是`null`，所以你的要求，即`place.reference`有问题。登录`place`到控制台并打开它，看看里面有什么——如果有的话。

# php - cakePHP 使用 html 输入助手从 2 个数组中分配选定的值

> ID：10750545
> 
> 赞同：0
> 
> 时间：2012-05-25T07:48:07.827
> 
> 标签：php, html, cakephp, input, controller

我从一个模型中创建了 2 个数组，其中 1 个是已经从用户那里选择的值，而第二个是用户可以选择的可用值。这是一个编辑页面。我想用两个模型的值填充一个多选输入框，但希望突出显示已经选择的值（第一个数组）。它可以很好地创建模型，并使用 array_merge() 我将两个数组合并为选项，但是所选的并没有突出显示正确的字段。有小费吗？

```
 // Controller:
 $ivrNumbersAvail = $this->Survey->SurveyIvrNumber->find("list",array("conditions" => array("OR" => array("SurveyIvrNumber.survey_id" => array($id)))));
 $ivrNumbersSelected = $this->Survey->SurveyIvrNumber->find("list",array("conditions" => array("OR" => array("SurveyIvrNumber.survey_id" => array(0)))));

 // In the view:
 echo $this->Form->input('SurveyIvrNumbers.id',array(
                            'empty' => '-- Select IVR Number(s) --',
                            'options' => array_merge($ivrNumbersAvail,$ivrNumbersSelected),
                            'selected' => $ivrNumbersSelected,
            'class' => 'textbox',
                            'multiple' => true,
            'div' => array(
                    'class' => 'field'
            ),
                'label' => array(
                'class' => 'label-tooltip',
                'title' => '', //tool tips
                'text' => 'IVR Numbers: (you can select multiple numbers)'

                ),
                'after' => '<p class="field-help"></p>'
        )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:34:39.413

如果您设置`$this->request->data`为您当前正在编辑的记录，CakePHP 将自动为您填充此数据！

```
// CONTROLLER
// this line sets the data
$this->request->data = $this->Survey->read(null, $id); 

// this passes the SurveyIvrNumbers to the view, (you can put any options on to this)
$this->set('SurveyIvrNumber',$this->Survey->SurveyIvrNumber->find('all')); 

// VIEW
// CakePHP does the rest
echo $this->Form->input('SurveyIvrNumbers',array( 
    'empty' => '-- Select IVR Number(s) --', // plus other options
); 
```

# sql - 根据我们输入的日期获取最近 3 个星期四的日期

> ID：10750549
> 
> 赞同：1
> 
> 时间：2012-05-25T07:48:32.850
> 
> 标签：sql, sql-server, tsql

我试图根据我给出的日期来获得最后三个星期四的日期。如果我插入星期二的日期但不适用于星期五的日期，那我就做对了。我所做的是：

```
select dt from (select *,ROW_NUMBER() over (order by(d.dt)) as rn from  
(SELECT Top 4 CONVERT(varchar, DATEADD(Month, -1, '5/29/2012')+number,101) as dt 
FROM master..spt_values WHERE TYPE ='p' AND 
DATEDIFF(d,DATEADD(Month, -1, '5/29/2012'),'5/29/2012') >= number 
AND DATENAME(w,DATEADD(Month, -1, '5/29/2012')+number) = 'Thursday') as d ) 
as nw where nw.rn>1 
```

我得到的输出是 2012 年 5 月 10 日、2012 年 5 月 17 日、2012 年 5 月 24 日。

但是当我将日期更改为 5/18/2012 时，我得到的输出是

2012 年 4 月 26 日、2012 年 5 月 3 日、2012 年 5 月 10 日

但它应该是 05/3, 05/10, 05/17 .....出了什么问题或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:35:33.237

只需替换`DATEADD(Month, -1,`它`DATEADD(Week, -4,`，它就会在周五和周六开始工作。

说明：如果减去一个月，通常会减去 30 或 31 天，如果开始日期是星期五、星期六或（在 31 天的情况下是星期日），则会增加一个额外的星期四。之后，前 4 名将在名单中的最后一个星期四削减。

编辑，只选择三个值：

```
select * from (select *,ROW_NUMBER() over (order by(d.dt)) as rn from   
(
   SELECT CONVERT(varchar, DATEADD(Week, -3, '5/25/2012')+number,101) as dt  
   FROM master..spt_values WHERE TYPE ='p' 
   AND DATEDIFF(d,DATEADD(Week, -3, '5/25/2012'), DATEADD(Day,-1,'5/25/2012')) >= number  
   AND DATENAME(w,DATEADD(Week, -3, '5/25/2012') + number) = 'Thursday') as d
)
as nw 
```

# ruby-on-rails - Capybara+Rspec如何匹配标签属性的一部分

> ID：10750556
> 
> 赞同：8
> 
> 时间：2012-05-25T07:48:58.157
> 
> 标签：ruby-on-rails, rspec, capybara

我有一个包含几个链接的页面，`<a href='/bla/bla/bla/?page=xxx>text</a>` 我想`xxx`使用 Capybara 和 RSpec 匹配某些值的链接，我不关心属性`bla/bla/bla`的一部分。`href`

```
page.should have_selector("div.class ul li a", :href => "page=2") 
```

也不行

```
page.should have_xpath("//a[@href='page=2']") 
```

不是一个选项，因为我不知道完整的`href`属性值。

PS：也没有找到任何完整的 Capybara API 文档来获取所有可用的方法和参数的描述。我有这种事吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T09:00:40.023

尝试使用`contains`：

```
page.should have_xpath "//a[contains(@href,'page=2')]" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:00:08.637

试试这个：

```
link = page.find('div.class ul li a')
link[:href].should match(/page=2/) 
```

更多信息[在这里](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element)。

# clojure - clojure 中何时实现惰性序列的不同元素？

> ID：10750557
> 
> 赞同：4
> 
> 时间：2012-05-25T07:49:05.120
> 
> 标签：clojure, lazy-sequences

我试图了解 clojure 的惰性序列何时是惰性的，何时发生工作，以及我如何影响这些事情。

```
user=> (def lz-seq (map #(do (println "fn call!") (identity %)) (range 4)))
#'user/lz-seq
user=> (let [[a b] lz-seq])
fn call!
fn call!
fn call!
fn call!
nil 
```

我希望在这里只看到两个“fn call！”。有没有办法管理它？无论如何，继续进行毫无疑问只需要一次评估的事情：

```
user=> (def lz-seq (map #(do (println "fn call!") (identity %)) (range 4)))
#'user/lz-seq
user=> (first lz-seq)
fn call!
fn call!
fn call!
fn call!
0 
```

不`first`适合惰性序列？

```
user=> (def lz-seq (map #(do (println "fn call!") (identity %)) (range 4)))
#'user/lz-seq
user=> (take 1 lz-seq)
(fn call!
fn call!
fn call!
fn call!
0) 
```

在这一点上，我完全不知道如何访问我的玩具 lz-seq 的开头而不必了解整个事情。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:04:32.847

我相信表达式会产生一个分块的序列。尝试在范围表达式中将 4 替换为 10000 - 您会在第一个 eval 上看到类似 32 次调用的内容，这是块的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:08:17.883

Clojure 的序列是惰性的，但为了提高效率也是分块的，一次实现 32 个结果块。

```
=>(def lz-seq (map #(do (println (str "fn call " %)) (identity %)) (range 100)))
=>(first lz-seq)

fn call 0
fn call 1
...
fn call 31
0 
```

一旦你先越过 32 边界，也会发生同样的事情

```
=>(nth lz-seq 33)
fn call 0
fn call 1
...
fn call 63
33 
```

对于每次实现都需要完成大量工作的代码，[Fogus](http://blog.fogus.me/about/)提供了一种[解决分块](http://blog.fogus.me/2010/01/22/de-chunkifying-sequences-in-clojure/)的方法，并提示可能正在进行控制分块的官方方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:08:12.763

惰性序列是我们在需要时对序列进行评估的序列。（因此懒惰）。一旦结果被评估，它就会被缓存，以便可以重复使用（我们不必再次做这项工作）。如果您尝试实现尚未评估的序列项目，clojure 会评估它并将值返回给您。但是，它也做了一些额外的工作。它预计您可能想要评估序列中的下一个元素，并为您执行此操作。这样做是为了避免一些性能开销，其确切性质超出了我的技能水平。因此，当您说 (first lz-seq) 时，它实际上会计算 seq 中的第一个以及接下来的几个元素。由于您的 println 语句是一个副作用，您可以看到正在发生的评估。现在，如果你说（第二个 lz-seq），

查看您的序列是否惰性的更好方法是：

```
user=> def lz-seq (map #(do (println "fn call!") (identity %)) (range 400))
#'user/lz-seq
user=> (first lz-seq) 
```

这将打印几个“fn call！” 声明，但不是全部 400 个。那是因为第一次调用实际上最终会评估序列中的多个元素。

希望这个解释足够清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:21:07.763

我认为它是由 repl 进行的某种优化。我的 repl 一次缓存 32 个。

```
user=> (def lz-seq (map #(do (println "fn call!") (identity %)) (range 100))
#'user/lz-seq
user=> (first lz-seq)
prints 32 times
user=> (take 20 lz-seq)
does not print any "fn call!"
user=> (take 33 lz-seq)
prints 0 to 30, then prints 32 more "fn call!"s followed by 31,32 
```

# iphone - 获取部分标题时出错

> ID：10750561
> 
> 赞同：0
> 
> 时间：2012-05-25T07:49:26.377
> 
> 标签：iphone, objective-c, ios, uitableview, core-data

我正在创建一种费用跟踪器类型的应用程序。

我的要求是在部分标题中获取日期，并在表格视图中获取该日期添加的费用。我尝试了以下代码，但它不起作用。

```
-(IBAction)bydate:(id)sender
{
[self.byDateArray removeAllObjects];
[self.byDateCountArray removeAllObjects];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
for(NSManagedObject *info in self.listOfExpenses){
    NSString *compareDates = [dateFormatter stringFromDate:[info valueForKey:@"date"]];
    BOOL isAvail = NO;
    for (int i = 0; i<[self.byDateArray count]; i++){
        if([compareDates isEqualToString:[self.byDateArray objectAtIndex:i]])
        {
            isAvail = YES;
        }
    }
    if(!isAvail)
        [self.byDateArray addObject:compareDates];
}
int count = 0;
for (int i = 0 ; i < [self.byDateArray count] ; i ++){
    NSString *compareDates = [self.byDateArray objectAtIndex:i];
    for(NSManagedObject *info in self.listOfExpenses){
        if([compareDates isEqualToString:[dateFormatter stringFromDate:[info valueForKey:@"date"]]])
        {
            count++;
        }
    }
    [self.byDateCountArray addObject:[NSNumber numberWithInt:count]];
    count = 0;
}
self.byDateTab.hidden = NO;
self.byDateTab.frame = CGRectMake(0, 123, 320, 244);
[self.view addSubview:self.byDateTab];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
if(tableView == self.byDateTab)
    return [self.byDateArray count
 return 3;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
int rows;
 if(tableView == self.byDateTab)
     rows = [[self.byDateCountArray objectAtIndex:section] intValue];
return rows;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

UITableViewCell *cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier"]autorelease];
 if (tableView == self.byDateTab)
{
for(int i = 0; i < [self.byDateCountArray count];i++)
{
    if(indexPath.section == 0)
    {
        NSManagedObject *records = nil;
        records = [self.listOfExpenses objectAtIndex:indexPath.row];

        self.firstLabel.text = [records valueForKey:@"category"];
        self.secondLabel.text = [records valueForKey:@"details"];

        NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
        self.thirdLabel.text = amountString;
    }
    else if (indexPath.section == i)
    {
        int rowCount = 0;
        for(int j=0; j<indexPath.section; j++)
        {
            rowCount = rowCount + [[self.byDateCountArray objectAtIndex:j]intValue];
        }
        NSManagedObject *records = nil;
        records = [self.listOfExpenses objectAtIndex:(indexPath.row + rowCount) ];

        self.firstLabel.text = [records valueForKey:@"category"];
        self.secondLabel.text = [records valueForKey:@"details"];

        NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
        self.thirdLabel.text = amountString;
    }
}
} 
```

但是我在这一行得到了 SIGABRT 错误

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
return [self.byDateArray objectAtIndex:section];
} 
```

我在 NSlog 中收到以下错误

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSCFArray objectAtIndex:]: index 2 beyond bounds for empty array' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:53:52.817

问题就在这里

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(tableView == self.byDateTab)
        return [self.byDateArray count];
     //why crashed at index 2,  because here is 3
     return 3;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.byDateArray objectAtIndex:section];
} 
```

它在另一个不是“self.byDateTab”的表视图中崩溃

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if(tableView == self.byDateTab)
    {
        return [self.byDateArray objectAtIndex:section];
    }
    else
    {
         //you should deal with other tableview
         // it crashed here
    }
} 
```

或者只是禁用其他 tableview 的部分标题

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(tableView == self.byDateTab)
        return [self.byDateArray count];

    //i don't see other tableviews how to work, so if you do this, the code will work
    //then you should look back to the solution above
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:54:55.653

根据错误您`self.byDateArray`在索引 2 处没有任何对象，因此请检查您的数组的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:55:57.340

你的`byDateArray`似乎是空的。

在做什么`[self.byDateArray removeAllObjects];`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:02:46.243

如上所述，问题在于向您添加对象时`self.byDateArray` 可能`self.byDateArray`没有初始化？请在你的方法`NSLog(@"self.byDateArray: %@",self.byDateArray)`之前制作。`[self.byDateArray removeAllObjects];``-(IBAction)bydate:(id)sender`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T08:06:34.340

这意味着一个

`section`

值大于

```
self.byDateArray 
```

数数。

尝试在第一行代码中添加：

```
NSLog(@" %@ ", self.byDateArray); 
```

在 -(NSString *)tableView: 函数中查看数组的内容。

# python - Python 不明确的正则表达式行为

> ID：10750562
> 
> 赞同：1
> 
> 时间：2012-05-25T07:49:28.450
> 
> 标签：python, regex

我对 python 正则表达式有疑问。结果在 regxe buddy 上似乎很好，但在 python 中失败了。

我必须匹配的一组数据是一个列表：

```
['  101  0\.  0.\n',
 '  0\.  100.\n',
 '  1\.  98.5107805\n',
 '  2\.  97.0464459\n',
 '  3\.  95.6065328\n', ... ] 
```

我必须从第二行开始获取所有数字。为此，我使用了：

```
pattern = compile(r'\s*(?P<raw_time>\d*\.?\d*)\s+(?P<raw_value>\d*\.\d*)') 
```

一切都很好。我遍历列表并在“raw_time”中获取第一个值，在“raw_value”中获取每行的第二个值。然后我应该扩展这个术语来处理加权数据。

于是数据变成了：

```
['  101  0\.  0.\n',
 '  0\.  100\.  1\n',
 '  1\.  98.5107805  1\n',
 '  2\.  97.0464459  1\n',
 '  3\.  95.6065328  1\n', ... ] 
```

我仍然只需要解析出两个第一个参数。所以我将模式更改为：

```
pattern = compile(r'\s*(?P<raw_time>\d*\.?\d*)\s+(?P<raw_value>\d*\.\d*).+') 
```

除了 1 之外的所有行都可以正常工作。

在职的：

```
In [35]: pattern.search('1\.  98.5107805  1\n').groupdict()
Out[35]: {'raw_time': '1.', 'raw_value': '98.5107805'} 
```

在职的：

```
In [37]: pattern.search('  0\.  100\.  1\n').groupdict()
Out[37]: {'raw_time': '0.', 'raw_value': '100.'} 
```

在职的：

在 [44] 中：pattern.search('1.98.5107805\n').groupdict() Out[44]: {'raw_time': '1.', 'raw_value': '98.510780'}

不工作：

```
In [46]: pattern.search('  0\.  100.\n').groupdict()
Out[46]: {'raw_time': '', 'raw_value': '0.'} 
```

我严重依赖正则表达式（当然，演示，但到目前为止它与 python 一致）。

建议？

tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:55:53.627

您添加的`.+`需要更改为`.*`。

`+`运算符需要*至少一个字符*，而将`*`接受零个或多个。

# css - Sass 中的 :after 和 :before 伪元素选择器

> ID：10750563
> 
> 赞同：213
> 
> 时间：2012-05-25T07:49:31.180
> 
> 标签：css, css-selectors, sass, pseudo-element

如何按照 Sass 或 SCSS 的语法使用 :before 和 :after 伪元素选择器？像这样：

```
p
  margin: 2em auto
  > a
    color: red
  :before
    content: ""
  :after
    content: "* * *" 
```

当然，上述失败。

* * *

## 回答 #1

> 赞同：482
> 
> 时间：2012-05-25T08:06:36.523

[使用 & 指定父选择器](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#parent-selector)。

SCSS 语法：

```
p {
    margin: 2em auto;

    > a {
        color: red;
    }

    &:before {
        content: "";
    }

    &:after {
        content: "* * *";
    }
} 
```

# sql-server - 全文目录 - SQL Server 中的 ftCatalog 是什么？

> ID：10750566
> 
> 赞同：0
> 
> 时间：2012-05-25T07:49:45.143
> 
> 标签：sql-server, sql-server-2008, full-text-search

使用`select * from sys.fulltext_catalogs`我的 SQL Server 2008 数据库，我可以看到一个全文目录。

我想知道：

*   是什么`ftCatalog`？是默认值吗？
*   我可以安全地删除它吗？怎么做？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:05:18.793

我不是 FTS 专家，但我从未见过 SQL Server 创建的默认全文目录，[文档](http://msdn.microsoft.com/en-us/library/ms189520%28v=sql.100%29.aspx)也没有提到它。通过观察，我的 SQL Server 2008 数据库中没有一个包含`sys.fulltext_catalogs`.

但是，我链接到的文档中的示例使用“ftCatalog”作为示例目录名称，因此大胆猜测，其他有权访问数据库的人通过复制文档中的示例来创建目录。

丢弃是否安全取决于创建它的人和原因。如果它是一个开发服务器，并且您是唯一一个在数据库上工作的开发人员，那么丢弃它的风险是有限的。但是，如果这是一个生产数据库，那么我不会，除非您可以肯定地验证目录为什么存在。`sys.fulltext_indexes`可能是开始您的研究的好地方。

# xcode - 如果计算机的日期错误，xCode 的 iPhone 模拟器会变得无响应吗？

> ID：10750569
> 
> 赞同：1
> 
> 时间：2012-05-25T07:50:15.777
> 
> 标签：xcode, ios-simulator

无论出于何种原因，我的笔记本电脑将其日期恢复到 2001 年。我尝试在 XCode 中运行我的代码，但无论我更新多少次，它都运行的是旧版本的代码。但是，在我调整日期后，代码运行良好。模拟器不能使用错误的日期是有原因的吗？

# c# - 让 ServiceStack 保留类型信息

> ID：10750571
> 
> 赞同：21
> 
> 时间：2012-05-25T07:50:24.563
> 
> 标签：c#, .net, json, serialization, servicestack

我正在使用 ServiceStack 将一些对象序列化和反序列化为 JSON。考虑这个例子：

```
public class Container
{
    public Animal Animal { get; set; }
}

public class Animal
{
}

public class Dog : Animal
{
    public void Speak() { Console.WriteLine("Woof!"); }
}

var container = new Container { Animal = new Dog() };
var json = JsonSerializer.SerializeToString(container);
var container2 = JsonSerializer.DeserializeFromString<Container>(json);

((Dog)container.Animal).Speak(); //Works
((Dog)container2.Animal).Speak(); //InvalidCastException 
```

最后一行抛出 InvalidCastException，因为 Animal 字段被实例化为 Animal 类型，而不是 Dog 类型。有什么方法可以告诉 ServiceStack 保留这个特定实例是 Dog 类型的信息吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-25T18:00:00.887

DTO 中的继承是一个坏主意 - DTO 应该尽可能地自我描述，并且通过使用继承，客户端实际上不知道服务最终返回什么。这就是为什么您的 DTO 类在大多数“基于标准的”序列化程序中无法正确反序列化的原因。

在 DTO 中使用接口没有充分的理由（在 POCO 模型上使用它们的理由也很少），使用接口来减少应用程序代码中的耦合是一种货物崇拜习惯，这些代码会被轻率地泄露到 DTO 中。但是跨进程边界，接口只会增加耦合（它只是在代码中减少），因为消费者不知道要反序列化的具体类型，所以它必须发出特定于序列化的实现提示，现在将 C# 关注点嵌入到线路上（所以现在甚至C# 命名空间将中断序列化），现在将您的响应限制为由特定的序列化程序使用。在线路上泄露 C# 问题违反了服务实现互操作性的核心目标之一。

由于 JSON 规范中没有“类型信息”的概念，为了让继承在 JSON 序列化程序中工作，他们需要向[JSON 有线](http://www.json.org/)**格式发出专有扩展**以包含此类型信息 - 现在将您的 JSON 有效负载耦合到特定的 JSON序列化器实现。

[ServiceStack 的 JsonSerializer](https://github.com/ServiceStack/ServiceStack.Text/)将此类型信息存储在**__type**属性中，并且由于它会大大增加有效负载，因此只会为需要它的类型（即`Interfaces`后期绑定`object`类型或`abstract`类）发出此类型信息。

话虽如此，解决方案是更改`Animal`为**接口**或**抽象**类，但建议不要在 DTO 中使用继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:21:18.360

您只序列化动物对象的属性，无论序列化对象是否为狗。即使您向狗类添加公共属性，例如“Name”，它也不会被序列化，因此当您反序列化时，您只会拥有“Animal”类的属性。

如果您将其更改为以下内容，它将起作用；

```
public class Container<T> where T: Animal 
{        
    public T Animal { get; set; } 
}

public class Animal
{
}

public class Dog : Animal
{
    public void Speak() { Console.WriteLine("Woof!"); }
    public string Name { get; set; }
}

var c = new Container<Dog> { Animal = new Dog() { Name = "dog1" } };
var json = JsonSerializer.SerializeToString<Container<Dog>>(c);
var c2 = JsonSerializer.DeserializeFromString<Container<Dog>>(json);

c.Animal.Speak(); //Works
c2.Animal.Speak(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-28T15:01:05.560

也许是题外话，但 Newtonsoft 序列化程序可以做到这一点，包括选项：

```
 serializer = new JsonSerializer();
        serializer.TypeNameHandling = TypeNameHandling.All; 
```

它将在 json 中创建一个名为 $type 的属性，该属性具有对象的强类型。当您调用反序列化器时，该值将用于再次构建具有相同类型的对象。下一个测试使用强类型的 newtonsoft，而不是使用 ServiceStack

```
 [TestFixture]
public class ServiceStackTests
{
    [TestCase]
    public void Foo()
    {
        FakeB b = new FakeB();
        b.Property1 = "1";
        b.Property2 = "2";

        string raw = b.ToJson();
        FakeA a=raw.FromJson<FakeA>();
        Assert.IsNotNull(a);
        Assert.AreEqual(a.GetType(), typeof(FakeB));
    }
}

public abstract class FakeA
{
    public string Property1 { get; set; }
}

public class FakeB:FakeA
{
    public string Property2 { get; set; }
} 
```

# c# - 需要对文本框的 MouseDown 和 KeyDown 进行更多控制

> ID：10750574
> 
> 赞同：2
> 
> 时间：2012-05-25T07:50:47.023
> 
> 标签：c#, wpf, textbox

标题只是有点准确。我正在尝试使用文本框做一些特别的事情，并且缺少某些事件触发会造成一些麻烦，但我也想要一些关于如何做我正在尝试做的事情的一般建议。我正在尝试重新创建旧访问应用程序上存在的特殊文本框。用于输入社保号，空白时显示`___-__-____`。

当您单击任何空格时，它会突出显示特定字符​​。如果您输入一个数字，它会将 _ 替换为该数字。如果您点击删除或退格，它只会用 _ 或 - 替换突出显示的任何字符，具体取决于。

我可以通过使用只读文本框并触发 PreviewMouseUp 事件来调用突出当前光标位置的方法来重新创建它。但由于它是只读的，它不会触发任何 KeyUp 或 KeyDown 事件来改变选择。如果我将 KeyUp 放在主 UI 网格中，我可以做到这一点，但它只适用于 KeyUp，所以它看起来非常滞后。PreviewMouseUp 也有同样的问题，我希望它在按下鼠标时突出显示，而不是按下鼠标，但 PreviewMouseDown 什么也不触发。

我觉得我正在以一种更混乱和更混乱的方式来解决这个问题。我已经描述了我想要的，有没有人有更好的想法来完成这个不是超级复杂的？我想将文本框保持为只读，以允许我手动处理键输入。我的意思是，我最初的格式化方法是简单地在 KeyUp 上运行一个方法，该方法检查您添加的内容的长度并适当地格式化（添加破折号等），但这会导致此时一切看起来都没有格式化，直到您释放钥匙。例如，如果我在文本框的中间按“2”，它会将所有破折号移动一个字符，直到“2”按钮被释放，然后格式就被修复了。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:10:55.113

有趣的是，我已经为此工作了多长时间才终于得到它，但关键在于 AddHandler。对于那些想要这样的文本框的人，我就是这样做的。这里有一些乱七八糟的地方，这些只是为了重新创建访问文本框的确切功能。最烦人的部分是实现退格按钮，因为它删除了所选部分之前的内容。另外，请确保您的文本框是 IsReadOnly。

在构造函数中放置：

```
textBox_ssn.AddHandler(Control.MouseDownEvent, new MouseButtonEventHandler(ClickSS), true);
textBox_ssn.AddHandler(Control.KeyDownEvent, new KeyEventHandler(ButtonSS), true); 
```

然后使用这两种方法：

```
public void ClickSS(object sender, EventArgs e)
    {
        textBox_ssn.SelectionLength = 1;
    }

    public void ButtonSS(object sender, KeyEventArgs e)
    {
        bool on_first_char = false;
        if (textBox_ssn.SelectionStart == 0) on_first_char = true;

        if (e.Key == Key.Right && textBox_ssn.SelectionStart < 10)
        {
            ++textBox_ssn.SelectionStart;
            textBox_ssn.SelectionLength = 1; //Without this, it will move around large blocks of selection
            if (textBox_ssn.SelectedText == "-") ++textBox_ssn.SelectionStart;
        }
        else if (e.Key == Key.Left && textBox_ssn.SelectionStart > 0)
        {
            --textBox_ssn.SelectionStart;
            textBox_ssn.SelectionLength = 1;
            if (textBox_ssn.SelectedText == "-") --textBox_ssn.SelectionStart;
        }
        else
        {
            string temp = "";
            switch (e.Key)
            {
                case Key.D0:
                    temp = "0";
                    break;
                case Key.D1:
                    temp = "1";
                    break;
                case Key.D2:
                    temp = "2";
                    break;
                case Key.D3:
                    temp = "3";
                    break;
                case Key.D4:
                    temp = "4";
                    break;
                case Key.D5:
                    temp = "5";
                    break;
                case Key.D6:
                    temp = "6";
                    break;
                case Key.D7:
                    temp = "7";
                    break;
                case Key.D8:
                    temp = "8";
                    break;
                case Key.D9:
                    temp = "9";
                    break;
                case Key.Delete:
                    temp = "_";
                    break;
                case Key.Back:
                    temp = "_";
                    if (textBox_ssn.SelectionStart > 0) --textBox_ssn.SelectionStart;
                    if (textBox_ssn.SelectedText == "-") --textBox_ssn.SelectionStart;
                    //else return; //or could do temp = selection text but only if selection length is 1 ectect
                    break;
            }

            if (temp != "")
            {
                if (textBox_ssn.SelectionLength > 1)
                {
                    string underscores = "";

                    foreach (char c in textBox_ssn.SelectedText)
                    {
                        if (c == '-') underscores += "-";
                        else underscores += "_";
                    }

                    textBox_ssn.SelectedText = underscores;
                    textBox_ssn.SelectionLength = 1;
                }

                if (textBox_ssn.SelectedText == "-") ++textBox_ssn.SelectionStart;
                if (textBox_ssn.SelectionLength == 1)
                {
                    if (!(on_first_char && e.Key == Key.Back)) textBox_ssn.SelectedText = temp;

                    if (e.Key == Key.Delete) ;
                    else if (e.Key == Key.Back)
                    {
                        if (textBox_ssn.SelectionStart > 0)
                        {
                            //--textBox_ssn.SelectionStart;
                            if (textBox_ssn.SelectedText == "-") --textBox_ssn.SelectionStart;
                        }
                    }
                    else
                    {
                        ++textBox_ssn.SelectionStart;
                        if (textBox_ssn.SelectedText == "-") ++textBox_ssn.SelectionStart;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:35:37.570

您所描述的内容被称为蒙面文本框。[VisualStudioGallery](http://visualstudiogallery.msdn.microsoft.com/ba94d841-80bf-4faa-9543-2fcad04f5998)和[Extended WPF ToolKit](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox&referringTitle=Home)中有一个免费的

# c# - 寻找 .NET 4.5 进展 源代码

> ID：10750577
> 
> 赞同：1
> 
> 时间：2012-05-25T07:51:18.307
> 
> 标签：c#, .net-4.5

我没有安装 .NET 4.5（我无法安装它）。

我在哪里可以找到新`System.Progress<T>`类的源代码？

（或者安装 .NET 4.5 beta 的好心人，复制/粘贴代码）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T07:14:04.710

这是 ILSpy 的输出：

```
using System;
using System.Runtime;
using System.Threading;
namespace System
{
    [__DynamicallyInvokable]
    public class Progress<T> : IProgress<T>
    {
        private readonly SynchronizationContext m_synchronizationContext;
        private readonly Action<T> m_handler;
        private readonly SendOrPostCallback m_invokeHandlers;
        [__DynamicallyInvokable]
        public event EventHandler<T> ProgressChanged
        {
            [__DynamicallyInvokable]
            add
            {
                EventHandler<T> eventHandler = this.ProgressChanged;
                EventHandler<T> eventHandler2;
                do
                {
                    eventHandler2 = eventHandler;
                    EventHandler<T> value2 = (EventHandler<T>)Delegate.Combine(eventHandler2, value);
                    eventHandler = Interlocked.CompareExchange<EventHandler<T>>(ref this.ProgressChanged, value2, eventHandler2);
                }
                while (eventHandler != eventHandler2);
            }
            [__DynamicallyInvokable]
            remove
            {
                EventHandler<T> eventHandler = this.ProgressChanged;
                EventHandler<T> eventHandler2;
                do
                {
                    eventHandler2 = eventHandler;
                    EventHandler<T> value2 = (EventHandler<T>)Delegate.Remove(eventHandler2, value);
                    eventHandler = Interlocked.CompareExchange<EventHandler<T>>(ref this.ProgressChanged, value2, eventHandler2);
                }
                while (eventHandler != eventHandler2);
            }
        }
        [__DynamicallyInvokable]
        public Progress()
        {
            this.m_synchronizationContext = (SynchronizationContext.CurrentNoFlow ?? ProgressStatics.DefaultContext);
            this.m_invokeHandlers = new SendOrPostCallback(this.InvokeHandlers);
        }
        [__DynamicallyInvokable]
        public Progress(Action<T> handler) : this()
        {
            if (handler == null)
            {
                throw new ArgumentNullException("handler");
            }
            this.m_handler = handler;
        }
        [__DynamicallyInvokable]
        protected virtual void OnReport(T value)
        {
            Action<T> handler = this.m_handler;
            EventHandler<T> progressChanged = this.ProgressChanged;
            if (handler != null || progressChanged != null)
            {
                this.m_synchronizationContext.Post(this.m_invokeHandlers, value);
            }
        }
        [__DynamicallyInvokable, TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
        void IProgress<T>.Report(T value)
        {
            this.OnReport(value);
        }
        private void InvokeHandlers(object state)
        {
            T t = (T)((object)state);
            Action<T> handler = this.m_handler;
            EventHandler<T> progressChanged = this.ProgressChanged;
            if (handler != null)
            {
                handler(t);
            }
            if (progressChanged != null)
            {
                progressChanged(this, t);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T07:53:32.850

下载`.NET Framework version 4.5`并安装在您的 PC 上。然后获取类似内容的副本`dotPeek`并使用它来查看 Progress 的源代码。

[http://www.microsoft.com/en-us/download/details.aspx?id=8483](http://www.microsoft.com/en-us/download/details.aspx?id=8483)

[http://www.jetbrains.com/decompiler/](http://www.jetbrains.com/decompiler/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-22T15:14:46.007

如果您对原始源代码感兴趣，Microsoft 已在 Internet 上提供了它。Progress 类的源代码可以在这里找到：

[https://referencesource.microsoft.com/#mscorlib/system/progress.cs](https://referencesource.microsoft.com/#mscorlib/system/progress.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-16T12:39:05.743

取自 ReSharper Decompiler 的源代码：

```
// Decompiled with JetBrains decompiler
// Type: System.Progress`1
// Assembly: mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
// MVID: 85AB3664-E4CA-41A0-86E3-96342ED95AAA
// Assembly location: C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll

using System.Threading;

namespace System
{
  /// <summary>Provides an <see cref="T:System.IProgress`1" /> that invokes callbacks for each reported progress value.</summary>
  /// <typeparam name="T">Specifies the type of the progress report value.</typeparam>
  [__DynamicallyInvokable]
  public class Progress<T> : IProgress<T>
  {
    private readonly SynchronizationContext m_synchronizationContext;
    private readonly Action<T> m_handler;
    private readonly SendOrPostCallback m_invokeHandlers;

    /// <summary>Raised for each reported progress value.</summary>
    [__DynamicallyInvokable]
    public event EventHandler<T> ProgressChanged;

    /// <summary>Initializes the <see cref="T:System.Progress`1" /> object.</summary>
    [__DynamicallyInvokable]
    public Progress()
    {
      this.m_synchronizationContext = SynchronizationContext.CurrentNoFlow ?? ProgressStatics.DefaultContext;
      this.m_invokeHandlers = new SendOrPostCallback(this.InvokeHandlers);
    }

    /// <summary>Initializes the <see cref="T:System.Progress`1" /> object with the specified callback.</summary>
    /// <param name="handler">A handler to invoke for each reported progress value. This handler will be invoked in addition to any delegates registered with the <see cref="E:System.Progress`1.ProgressChanged" /> event. Depending on the <see cref="T:System.Threading.SynchronizationContext" /> instance captured by the <see cref="T:System.Progress`1" /> at construction, it is possible that this handler instance could be invoked concurrently with itself.</param>
    [__DynamicallyInvokable]
    public Progress(Action<T> handler)
      : this()
    {
      if (handler == null)
        throw new ArgumentNullException("handler");
      this.m_handler = handler;
    }

    /// <summary>Reports a progress change.</summary>
    /// <param name="value">The value of the updated progress.</param>
    [__DynamicallyInvokable]
    protected virtual void OnReport(T value)
    {
      // ISSUE: reference to a compiler-generated field
      if (this.m_handler == null && this.ProgressChanged == null)
        return;
      this.m_synchronizationContext.Post(this.m_invokeHandlers, (object) value);
    }

    [__DynamicallyInvokable]
    void IProgress<T>.Report(T value)
    {
      this.OnReport(value);
    }

    private void InvokeHandlers(object state)
    {
      T e = (T) state;
      Action<T> handler = this.m_handler;
      // ISSUE: reference to a compiler-generated field
      EventHandler<T> progressChanged = this.ProgressChanged;
      if (handler != null)
        handler(e);
      if (progressChanged == null)
        return;
      progressChanged((object) this, e);
    }
  }
} 
```

# javascript - 使用 JavaScript 全局覆盖鼠标光标

> ID：10750582
> 
> 赞同：17
> 
> 时间：2012-05-25T07:51:34.627
> 
> 标签：javascript, html, css, mouse-cursor

在我的 Web 应用程序中，我尝试实现一些拖放功能。我有一个全局 JavaScript 组件来完成基本工作。该对象还负责根据当前的拖动操作（移动、复制、链接）更改鼠标光标。在我的网页上，有各种 HTML 元素定义了自己的光标样式，可以是内联的，也可以是通过 CSS 文件。

那么，有没有办法让我的中央拖放组件全局更改鼠标光标，而与鼠标光标所在元素的样式无关？

我试过：

```
document.body.style.cursor = "move" 
```

和

```
document.body.style.cursor = "move !important" 
```

但它不起作用。每次我拖动定义光标样式的元素时，光标都会更改为该样式。

当然，我可以更改当前拖动的元素的样式，但是当我离开元素时我必须重置它。这似乎有点复杂。我正在寻找一个全球性的解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T12:27:22.740

**重要更新（2021 年）：**

[element.setCapture()](https://developer.mozilla.org/en-US/docs/Web/API/Element/setCapture)的 MDN 页面清楚地表明此功能已弃用且非标准，不应在生产中使用。

该页面底部的浏览器支持表表明它仅在 Firefox 和 IE 中受支持。

原答案如下

* * *

***请：不要屠杀你的 CSS！***

要实现拖放功能，您必须使用一个非常重要的 API：**element.setCapture()**，它执行以下操作：

*   所有鼠标事件都被重定向到捕获的目标元素，无论它们发生在哪里（甚至在浏览器窗口之外）
*   光标将是捕获的目标元素的光标，无论鼠标指针在哪里。

您必须调用**element.releaseCapture()**或**document.releaseCapture()**在操作结束时切换回正常模式。

***当心拖放的幼稚实现：***您可能会遇到很多痛苦的问题，例如（以及其他）：如果将鼠标释放到浏览器窗口之外，或者在具有停止传播的处理程序的元素上释放会发生什么. 使用 setCapture() 解决了所有这些问题，以及光标样式。

如果你想自己实现拖放，你可以阅读[这个优秀的教程，它详细解释了这一点。](https://developer.mozilla.org/en/DOM/element.setCapture)

如果可能的话，也许您也可以在您的上下文中使用[可拖动的 jQuery UI 。](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T08:05:53.793

```
document.body.style.cursor = "move" 
```

应该可以正常工作。

但是，我建议通过 CSS 进行全局样式设置。

定义以下内容：

```
body{
   cursor:move;
} 
```

问题是，其他元素上定义的光标会覆盖主体样式。

你可以这样做：

```
your-element.style.cursor = "inherit"; // (or "default") 
```

将其重置为从正文或使用 CSS 继承的样式：

```
body *{
   cursor:inherit;
} 
```

但是请注意，这`*`通常被认为是错误的选择器选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T12:20:20.390

不幸的是`element.setCapture()`不适用于IE

我使用蛮力方法 - 在拖放期间在整个页面顶部打开一个透明 div。

```
.tbFiller {
   position:absolute;
   z-index:5000; 
   left:0;
   top:0;
   width:100%;
   height:100%; 
   background-color:transparent;
   cursor:move;
}

...

function dragStart(event) {
    // other code...
    document.tbFiller=document.createElement("div");
    document.tbFiller.className="tbFiller"
}

function dragStop(event) {
    // other code...
    document.tbFiller.parentNode.removeChild(document.tbFiller);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-22T20:41:41.230

感谢这里的一些其他答案的线索，这很好用：

```
/* Disables all cursor overrides when body has this class. */
body.inheritCursors * {
    cursor: inherit !important;
} 
```

注意：我**不需要**使用`<html>`and `document.documentElement`; 相反，`<body>`工作`document.body`得很好：

```
document.body.classList.add('inheritCursors'); 
```

这会导致（因为它现在具有此类）的[所有](https://developer.mozilla.org/en-US/docs/Web/CSS/Universal_selectors) [后代](https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_combinator)元素从其自身继承其光标，即您将其设置为：`<body>``inheritCursors``<body>`

```
document.body.style.cursor = 'progress'; 
```

然后要将控制权交还给后代元素，只需删除该类：

```
document.body.classList.remove('inheritCursors'); 
```

并将光标[取消设置](https://developer.mozilla.org/en-US/docs/Web/CSS/unset)`<body>`为默认值：

```
document.body.style.cursor = 'unset'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-18T11:12:05.450

我尝试使用`setPointerCapture`效果很好。不利的一面是，（原因）所有指针事件都不会像以前那样工作。所以我失去了悬停样式等。

我现在的解决方案非常简单，并且对于我的用例来说比上面的 CSS 解决方案更适合。

为了设置光标，我在 head 中添加了一个新样式表：

```
const cursorStyle = document.createElement('style');
cursorStyle.innerHTML = '*{cursor: grabbing!important;}';
cursorStyle.id = 'cursor-style';
document.head.appendChild(cursorStyle); 
```

要重置它，我只需删除样式表：

```
document.getElementById('cursor-style').remove(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-22T19:28:05.003

这就是我所做的，它在 2017 年开始在 Firefox、Chrome、Edge 和 IE 中运行。

将此 CSS 规则添加到您的页面：

```
html.reset-all-cursors *
{
    cursor: inherit !important;
} 
```

当`<html>`元素具有“reset-all-cursors”类时，这会覆盖在其`style`属性中为元素单独设置的所有游标——而无需实际操作元素本身。不需要到处清理。

然后，当您想用 any 覆盖整个页面上的光标时`element`，例如。G。被拖动的元素，在 JavaScript 中执行此操作：

```
element.setCapture && element.setCapture();
$("html").addClass("reset-all-cursors");
document.documentElement.style.setProperty("cursor", $(element).css("cursor"), "important"); 
```

它使用`setCapture`可用的功能。这目前只是 Firefox，尽管他们说它是 Microsoft API。然后将特殊类添加到整个文档中，从而禁用所有自定义光标。最后在文档上设置你想要的光标，让它出现在任何地方。

结合捕获事件，这甚至可以将拖动光标扩展到页面和浏览器窗口之外。`setCapture`在 Firefox 中可靠地做到这一点。但在其他地方，它并非每次都有效，具体取决于浏览器、它的 UI 布局以及鼠标光标离开窗口的路径。;-)

完成后，清理：

```
element.releaseCapture && element.releaseCapture();
$("html").removeClass("reset-all-cursors");
document.documentElement.style.setProperty("cursor", ""); 
```

这包括 jQuery`addClass`和`removeClass`. 在简单的场景中，您可以简单地比较并`class`设置`document.documentElement`. 不过，这会破坏像 Modernizr 这样的其他库。如果您已经知道元素所需的光标，则可以摆脱该`css`功能，或者尝试类似`element.style.cursor`.

# maven - m2e 不使用 maven-archetype-quickstart 生成站点

> ID：10750585
> 
> 赞同：0
> 
> 时间：2012-05-25T07:51:46.327
> 
> 标签：maven, m2e

我们的项目团队想为我们的构建和 CI 从 ant 切换到 maven，所以我通过遵循 Sonatype “Maven By Example”一书来掌握它。

我正在使用 m2e，以及 m2e 安装的内部 maven。

我已经使用 maven-archetype-quickstart 创建了一个项目，并且没有以任何方式对其进行修改。它构建得很好，但是当我以.. 以目标“站点”运行时，我的项目的目标文件夹或我能找到的任何其他地方都不会产生任何内容。这是输出：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building quickstart 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-site-plugin:2.0.1:site (default-site) @ quickstart ---
Downloading: http://repo1.maven.org/maven2/org/apache/maven/skins/maven-default-   skin/maven-metadata.xml
Downloaded: http://repo1.maven.org/maven2/org/apache/maven/skins/maven-default-skin/maven-metadata.xml (370 B at 2.0 KB/sec)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.759s
[INFO] Finished at: Fri May 25 08:46:54 BST 2012
[INFO] Final Memory: 10M/110M
[INFO] ------------------------------------------------------------------------ 
```

这是因为我使用的是内部 m2e Maven 吗？我需要单独安装maven吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:13:33.210

首先，根据我的经验，将外部 Maven 安装与 m2e 一起使用绝对是个好主意。我在使用嵌入式 Maven 时遇到了一些（其他类型的）麻烦，我不建议使用它。

现在关于您的问题：我不知道是 m2e 的嵌入式 Maven 还是您的某种错误或误解，但我刚刚使用相同的快速入门原型生成了简单的项目，一切正常。我有这样的输出：

```
 [INFO] Scanning for projects...
    [INFO]
    [INFO] ------------------------------------------------------------------------
    [INFO] Building tester 1.0-SNAPSHOT
    [INFO] ------------------------------------------------------------------------
    [INFO]
    [INFO] --- maven-site-plugin:3.0:site (default-site) @ tester ---
    [WARNING] Report plugin org.apache.maven.plugins:maven-project-info-reports-plugin has an empty version.
    [WARNING]
    [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
    [WARNING]
    [WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
    [INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.4
    [INFO] Relativizing decoration links with respect to project URL: http://maven.apache.org
    [INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
    [INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.4
    [INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.4
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 4.046s
    [INFO] Finished at: Fri May 25 10:10:35 CEST 2012
    [INFO] Final Memory: 9M/28M
    [INFO] ------------------------------------------------------------------------ 
```

并且 - 正如预期的那样 - 网站是在`target/site`.

# java - 在一个应用程序中使用大量静态分析工具

> ID：10750588
> 
> 赞同：1
> 
> 时间：2012-05-25T07:52:01.927
> 
> 标签：java, sonarqube, code-analysis, findbugs, pmd

现在，我们有很多用于java中静态代码分析的工具。

例如：

*   PMD
*   CPD
*   查找错误
*   检查样式
*   声纳
*   依赖

等等

在一个应用程序中使用所有这些工具是否很好（使用 maven，如果出现负面情况，我们将无法构建）。它们是可互换的还是检查大致相同？或者它只是多余的？也许这些工具有一些类别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:02:05.160

Sonar 的目的是汇总所有核心分析引擎（如 PMD、Findbugs、Checkstyle）的结果，这就是 Sonar 嵌入所有这些工具以及更多工具的原因。

所以我的建议是建立一个基于 Sonar 的持续检查服务器，不要担心任何其他工具，因为你会在 Sonar 中得到最好的。

您可以阅读以下有关持续检查的博客文章：http: [//www.sonarsource.org/continuous-inspection-practice-emerges-with-sonar/](http://www.sonarsource.org/continuous-inspection-practice-emerges-with-sonar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:17:00.230

我只使用 FindBugs - 伟大的工具。真正有助于定义问题/潜在问题的地方。

但有时您的代码应该以 FindBugs 提供冗余错误/警告的方式实现。认为可以通过一些注释来抑制它。

但是你永远不会用这个工具代替好的代码审查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T02:57:13.960

它们不可互换，但您不需要在同一个应用程序中全部使用它们。

分类：

1.  报告 - Sonar 为您正在使用的其他工具（加上 JUnit 等）提供了一个漂亮的可视化仪表板
2.  静态分析 - PMD、FindBugs、CheckStyle
3.  重复代码 - CPD
4.  设计/包依赖项 - JDepend

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:56:20.133

这取决于您要执行的规则集。使用其他工具只有在提供额外检查时才有意义。另一个问题是，您必须以不检查相互矛盾的规则的方式配置所有工具。最后，你会得到很多多余的警告。结论：尝试找到一套最少的工具来提供您需要的所有检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T12:32:10.937

在[qulice.com](http://www.qulice.com/index.html)（Maven 项目的复合静态分析工具）中，我们使用 Checkstyle、PMD、FindBugs 和一些我们的自定义规则。它们在某个地方相互冲突，我们必须通过禁用其中一个规则来解决冲突。除此之外，这三个开源静态分析器共同存在并执行最重要（和简单）的设计原则。

# php - 使用 twilio 中的 say 动词说电话号码

> ID：10750593
> 
> 赞同：1
> 
> 时间：2012-05-25T07:52:22.410
> 
> 标签：php, twilio

我正在使用带有 php 代码的 Twilio 作为电话卡。客户按下他们的电话号码，然后拨号。在拨号之前，声音会说：“您拨打的号码是......”。但它说它是一个数字，即 900 万、77.6 万、80 和 94。我想让它说 9776894 等。每次都是不同的数字。（我在菜单的另一部分写着“你正在打电话回家”和然后拨号。）

我认为这与“请求摘要”有关，但我不确定代码。谢谢。

```
<?php
echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";
echo "<Response><Say>The Australian Phone Number you entered was"                 $_REQUEST['Digits'] . "
Transferring you now</Say>
<Dial>
<Number>+61"
.   $_REQUEST['Digits'] . 
"</Number>
</Dial>
</Response>";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:09:59.567

如果您在数字之间放置空格，Twilio 应该将它们读取为不同的数字。

# vb.net - 将 PDF 作为页面添加到 PDF

> ID：10750598
> 
> 赞同：1
> 
> 时间：2012-05-25T07:52:42.580
> 
> 标签：vb.net, pdf, itextsharp

我在网上书店工作。显然，当我们买东西时，我们会发出发票。我有一个默认模板，用于将所有信息放入（客户数据）中，当然还有有关购买物品的信息。

现在出现了一个看起来令人困惑的部分。我们也将给予折扣。

示例：一件产品售价 100 欧元，您可以获得 10% 的折扣。现在您只需支付 90 欧元，但必须在某个时候由提供折扣的人支付缺少的 10 欧元。

因此，我们每个月都会向提供折扣的公司发送一张额外的发票，以及他们提供的所有折扣，以便他们知道应该向我们支付什么。

该发票的第一页将概述所有订单以及该订单的折扣总额以及税金和订单号。在第二页上将有所有订单的详细概述。

我将显示订单上购买的商品，以便他们查看折扣来自何处以及价格是否正确。

现在我们终于解决了这个问题。第一页将（再次）保存客户的所有详细信息，在本例中为公司。它有地址、姓名、客户编号、发票编号等。第二页不需要这些信息，所以我想为此制作一个新模板，给我两个模板 PDF。

是否可以获取第二个 PDF 并将其作为单页插入 PDF？这一切都在 vb.net 中完成。

# java - JSF 中 convertDateTime 的奇怪行为

> ID：10750599
> 
> 赞同：1
> 
> 时间：2012-05-25T07:52:42.653
> 
> 标签：java, richfaces, jsf-1.2

我正在使用带有richfaces的JSF。我正在使用核心 ip 的 convertDateTime 将 inputText 转换为 Date。

```
<h:inputText styleClass="datepicker" value="#{searchBean.creationDate}" id="inputfield">
  <f:convertDateTime pattern="yyyy-MM-dd" />
</h:inputText> 
```

SearchBean中的*creationDate*是Java util Date 类型，我使用 jquery datpicker 来填充输入字段*。*

问题是它不能正常工作。当我提交表单而不输入任何日期（空输入字段）时，一切正常。但是，当我选择日期时，调用不会到达 bean（在调试模式下测试过）。该页面只是在服务器端刷新，没有任何异常/日志记录。

我已经实现了一个快速的[LifeCycleListener](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html#ListenAndDebugJSFLifecyclePhases)，它显示了以下输出：

**输入字段填充日期：**

```
START PHASE RESTORE_VIEW(1)
END PHASE RESTORE_VIEW(1)
START PHASE APPLY_REQUEST_VALUES(2)
END PHASE APPLY_REQUEST_VALUES(2)
START PHASE PROCESS_VALIDATIONS(3)
END PHASE PROCESS_VALIDATIONS(3)
START PHASE UPDATE_MODEL_VALUES(4)
END PHASE UPDATE_MODEL_VALUES(4)
START PHASE INVOKE_APPLICATION(5)
END PHASE INVOKE_APPLICATION(5)
START PHASE RENDER_RESPONSE(6)
END PHASE RENDER_RESPONSE(6) 
```

**日期为空：**

```
START PHASE RESTORE_VIEW(1)
END PHASE RESTORE_VIEW(1)
START PHASE APPLY_REQUEST_VALUES(2)
END PHASE APPLY_REQUEST_VALUES(2)
START PHASE PROCESS_VALIDATIONS(3)
END PHASE PROCESS_VALIDATIONS(3)
START PHASE RENDER_RESPONSE(6)
END PHASE RENDER_RESPONSE(6) 
```

很明显，在第二种情况下缺少两个步骤。我对 JSF 很陌生，对它的内部工作没有太多了解。此外，没有验证/转换异常。我被困在这里，我不知道在哪里寻找解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:57:37.340

未输入日期时未显示更新模型和调用应用程序的原因是因为您的验证失败，如果验证失败模型未更新 UI 内容和应用程序逻辑（您的自定义代码）将不会被调用。

如果您在 .properties 文件中添加了错误消息，请添加以下内容

```
javax.faces.converter.DateTimeConverter.DATE=value ({0}) must be a date 
```

别的

```
<h:inputText styleClass="datepicker" value="#{searchBean.creationDate}" id="inputfield" converterMessage="Please Enter creation date in yyyy-MM-dd format">
  <f:convertDateTime pattern="yyyy-MM-dd" />
</h:inputText> 
```

这将能够在验证失败时显示错误消息。

当您提交 null 作为日期时，您将收到转换错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:53:37.777

如果您使用的是 JSF 1.2 和 RichFaces 3.x，则使用`rich:calendar`标签组件来处理日期，它在后台使用 jquery 来显示。在您的示例中使用它：

```
<rich:calendar id="calCreationDate" popup="true"
    value="#{searchBean.creationDate}"
    enableManualInput="true"
    locale="#{application.locale}"
    datePattern="#{application.datePattern}"
    showApplyButton="false" /> 
```

在我的应用程序中：

```
public class ApplicationBean {
    private Locale locale;
    private String datePattern;

    public ApplicationBean() {
        locale = new Locale("es"); //for spanish
        datePattern = "dd/MM/yyyy"; //you can change it to yyyy-MM-dd
    }
} 
```

ApplicationBean 有 ApplicationScope 的地方。

更多信息在这里：

*   [RichFaces 日历组件文档](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_calendar.html)
*   [RichFaces 日历组件演示](http://livedemo.exadel.com/richfaces-demo/richfaces/calendar.jsf;jsessionid=394378C1BF747D1A3A51A80647976CB3?c=calendar&tab=usage)

# ajax - 基于 Ajax 的应用程序并希望在会话过期后重定向到登录页面

> ID：10750601
> 
> 赞同：0
> 
> 时间：2012-05-25T07:52:48.510
> 
> 标签：ajax, grails, grails-2.0

在这里，我制作了一个完全基于远程的应用程序。

仅加载一次所有 js 和 css。所以我想要会话过期的解决方案。

意味着当 ajax 请求到达控制器时，它将首先被验证，如果会话过期，那么我想重定向到登录页面重新登录。

**[编辑-@布拉德]**

让我们尝试澄清您的要求..

1) 通过 Ajax 向服务器发出请求

2) 服务器响应 HTTP 401，未授权

3) Ajax 识别 401 状态并重定向到登录页面

4）登录成功，

5）然后执行旧请求。表示第 1 步请求执行。

6）但我不想执行第 1 步请求，但想每次都执行主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:59:13.190

您可以在每次请求进入您的操作之前使用过滤器拦截器。

更好的方法是使用可用于 grails 的 apache-shiro 身份验证插件。

看到这个：[用于 Grails 的 Apache Shiro 集成](http://grails.org/plugin/shiro)

在您的应用程序中安装它并进行配置。它很简单，可以满足您的大部分身份验证要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:34:25.950

一种方法是让您的客户端 AJAX 代码检查[HTTP 401 响应代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)，这意味着您的用户会话已超时并且他们不再登录。

使用 JQuery...

```
$.ajax({
    type: "post", url: "/SomeController/SomeAction",
    success: function (data, text) {
        //...
    },
    error: function (request, status, error) {
        // look for status of 401 and redirect to login
    }
}); 
```

当然，您只需确保您的 Web 应用程序返回适当的状态代码。我发现[这篇](http://www.bennadel.com/blog/2228-Some-Thoughts-On-Handling-401-Unauthorized-Errors-With-jQuery.htm)关于这个主题的文章发人深省。

还有一些关于[类似问题的好信息](https://stackoverflow.com/questions/377644/jquery-ajax-error-handling-show-custom-exception-messages)

**[编辑]**

好的，从您在第 3 步更新的问题）这是通过 ajax 请求发生的，我希望您的用户看不到登录页面，因为您的 ajax 处理代码将收到 401 响应，您可以决定不显示它。然后，您可以将用户浏览器重定向到您选择的登录 URL。在这种情况下，您将重定向到主页，或将登录页面配置为接受额外的 URL 参数，告诉它您希望用户在登录后被发送到的位置。

# jquery - 检测窗口宽度变化但不检测高度变化

> ID：10750603
> 
> 赞同：47
> 
> 时间：2012-05-25T07:52:54.457
> 
> 标签：jquery, responsive-design, resize, jquery-events

我正在使用该`.resize()`函数来检测窗口大小调整事件，但这会同时检测高度和宽度的变化。

有没有办法只检测**宽度变化**而不是高度变化？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-25T08:06:17.210

```
var width = $(window).width();
$(window).on('resize', function() {
  if ($(this).width() !== width) {
    width = $(this).width();
    console.log(width);
  }
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-25T08:00:15.840

您可以检测这两个事件并在宽度更改时执行代码：

```
var lastWidth = $(window).width();

$(window).resize(function(){
   if($(window).width()!=lastWidth){
      //execute code here.
      lastWidth = $(window).width();
   }
}) 
```

你可能想检查**事件去抖动**。

> 去抖动强制一个函数在没有被调用的情况下经过一定的时间后才被再次调用。如“仅在经过 100 毫秒而没有被调用的情况下才执行此函数。

**阅读更多：**

* * *

*   [https://css-tricks.com/the-difference-between-throttling-and-debouncing/](https://css-tricks.com/the-difference-between-throttling-and-debouncing/)
*   [https://davidwalsh.name/javascript-debounce-function](https://davidwalsh.name/javascript-debounce-function)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-05T14:53:49.397

尽管已经有几个可用解决方案的答案，但这种任务对性能至关重要（在用户调整窗口大小时会触发多次调整窗口大小事件），因此我强烈建议您注意性能。请看下面的优化代码：

```
/* Do not waste time by creating jQuery object from window multiple times.
 * Do it just once and store it in a variable. */
var $window = $(window);
var lastWindowWidth = $window.width();

$window.resize(function () {
    /* Do not calculate the new window width twice.
     * Do it just once and store it in a variable. */
    var windowWidth = $window.width();

    /* Use !== operator instead of !=. */
    if (lastWindowWidth !== windowWidth) {
        // EXECUTE YOUR CODE HERE
        lastWindowWidth = windowWidth;
    }
}); 
```

另外，您可能对检查[Debounce / Throttle](http://benalman.com/projects/jquery-throttle-debounce-plugin/)模式感兴趣——它们在这种情况下极大地提高了性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-14T14:04:05.837

也可以为此使用这个微小的 jQuery 插件：[https ://github.com/adjohnson916/jquery-resize-dimension](https://github.com/adjohnson916/jquery-resize-dimension)

使您自己的代码更具可读性：

```
ResizeDimension.bind('width');
$(window).on('resize-width', function () {
  console.log('resize-width event');
}); 
```

要不就：

```
$(window).resizeDimension('width', function () {
  console.log('resize-width event');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-05T18:50:06.383

@nachtigall 提供的链接已损坏，因此我找到了另一个具有相同库的链接，这帮助我解决了我的问题： [resize-dimension.js](https://github.com/joeey1984ad/jquery-resize-dimension/blob/master/src/resize-dimension.js)

解决方案示例如下： 导入库：

```
<script src="./resize-dimension.js"></script> 
```

创建脚本：

```
<script type="text/javascript">
        ResizeDimension.bind('width');
        $(window).on('resize-width', function () {
            //alert(window);
            ForResize();
        });
 </script> 
```

调整浏览器大小时会触发该函数`ForResize()`，尽管在这种情况下，IE 处理它比其他浏览器更好，但是，在我的情况下，它适用于移动设备，在滚动页面时触发事件，这取决于移动浏览器，它可以隐藏地址栏，这会影响浏览器的大小。实施该库有帮助！

[我使用了此处](https://stackoverflow.com/questions/40638402/javascript-countdown-timer-with-start-stop-buttons)提供的计数器/计时器并根据我的需要对其进行了修改。以下是我必须创建的关键脚本：

```
<script type="text/javascript">
    function RefreshWidth() {
        var _hcontainer = $("#chart_container").width();
        var _hcontainerInt = parseInt(_hcontainer, 10);
        $("#txChartSize").val(_hcontainerInt);
        $("#txChartSize_1").val(_hcontainerInt);
        $("#textWidthFire").val(_hcontainerInt);
        DetectResizeChange();
    }
</script>

<script type="text/javascript">
    var myTimer; //also in C#
    var c = 0;
    //these functions are needed in order to fire RefreshWidth() so it will fire DetectResizeChange() after browser changes size
    function clock() {
        //RefreshWidth();
        myTimer = setInterval(myClock, 1000);
        c = 3;

        function myClock() {
            document.getElementById("loadMsg").innerHTML = "Processing chart, please wait...";
            --c; //--->>counts in reverse to resize
            if (c == 0) {
                RefreshWidth(); //--->>gives enough time for the width value to be refreshed in the textbox
                clearInterval(myTimer);
            }

        }
    }

    //detects size change on the browser
    function DetectResizeChange() {
        var _NoDataAvailable = $('#txNoDataAvailable').val();

        if (_NoDataAvailable != 'NoData') {

            var refLine = $("#refLine").width();

            var _hcontainer = $("#chart_container").width();
            var _width = _hcontainer;

            var _hcontainerInt = parseInt(_hcontainer, 10);

            $("#txChartSize").val(_hcontainerInt);
            $("#textWidthFire").val(_hcontainerInt);
            $('#msgAdjustView').show();

            $("#msgAdjustView").text("Loading data and adjusting chart view, please wait...");
            $('.modal').show();

            var checkOption = document.getElementById('lbViewingData').value;
            var button;
            var btnWidth;
            btnWidth = document.getElementById('btnStopTimer');
            if (checkOption == 'Option 1') {
                button = document.getElementById('firstTab');
            } else if (checkOption == 'Option 2') {
                button = document.getElementById('secondTab');
            } else if (checkOption == 'Option 3') {
                button = document.getElementById('thirdTab');
            }
            button.click();
        }
    }
</script>
        <script type="text/javascript">
            function ForResize() {
                var _NoDataAvailable = $('#txNoDataAvailable').val();

                if (_NoDataAvailable != 'NoData') {
                    clock();
                    document.getElementById('loadMsg').innerHTML = 'Resizing chart in progress...';
                }
            }

</script> 
```

如果库的链接再次被破坏，这里是来自同一来源的代码（resize-dimension.js）：

```
(function (root, factory) {
  var moduleName = 'ResizeDimension';
  if (typeof define === 'function' && define.amd) {
    define(['jquery'], function ($) {
        return (root[moduleName] = factory($));
    });
  } else {
    root[moduleName] = factory(root.$);
  }
}(this, function ($) {

  var $window = $(window);

  var ResizeDimension = function ($el, dimension, handler, options) {

    if (! (this instanceof ResizeDimension)) {
      return new ResizeDimension($el, dimension, handler, options);
    }

    this.$el = $el;

    this.init(dimension, handler, options);

    return this;
  };

  /**
   * Stub - overridden on #init()
   */
  ResizeDimension.prototype.onResize = function () {};

  ResizeDimension.bound = {};

  ResizeDimension.bind = function (dimension, options) {
    if (ResizeDimension.bound[dimension]) return;
    ResizeDimension.bound[dimension] = true;
    $window.resizeDimension(dimension, function () {
      $window.trigger('resize-' + dimension);
    }, options);
  };

  ResizeDimension.prototype.init = function (dimension, handler, options) {

    if (typeof dimension === 'object') {
      options = dimension;
      dimension = options.dimension;
      handler = options.handler;
    }

    options = $.extend({}, options);
    options.dimension = dimension;
    options.handler = handler;

    this.options = options;

    if ($.isFunction(options.changed)) {
      this.changed = options.changed;
    }

    this.dimension = this.normalize(options.dimension);
    this.handler = options.handler;
    this.previousValue = this.value();

    var proxied = $.proxy(this.handle, this);
    if (options.throttler) {
      this.onResize = options.throttler(proxied);
    }
    else {
      this.onResize = proxied;
    }
  };

  ResizeDimension.prototype.normalize = function (dimension) {
    return dimension;
  };
  ResizeDimension.prototype.changed = function (previous, current) {
    return previous !== current;
  };

  ResizeDimension.prototype.value = function (e) {
    return this.$el[this.dimension]();
  };

  ResizeDimension.prototype.handle = function (e) {
    var currentValue = this.value();
    if (this.changed(this.previousValue, currentValue)) {
      this.previousValue = currentValue;
      return this.handler.call(this.$el, e);
    }
  };

  var $resizeDimension = function () {
    var args = Array.prototype.slice.call(arguments);
    return this.each( function() {
      var $el = $(this);
      args = [$el].concat(args);
      var instance = ResizeDimension.apply(null, args);
      $el.on('resize', $.proxy(instance.onResize, instance));
    });
  };

  $.fn.resizeDimension = $resizeDimension;

  return ResizeDimension;

})); 
```

# generator - 浮点数据生成器

> ID：10750608
> 
> 赞同：0
> 
> 时间：2012-05-25T07:53:14.237
> 
> 标签：generator, data-generation

是否有数据生成的程序或源代码？

我想要一个 Java 数据生成器。（语言无所谓，如果我能得到结果文件）

我想要一个相关数据，反相关数据，独立数据。

我想要一个具有

输入：最小值、最大值、数据分布（例如，独立、反相关、相关、高斯、泊松 ...）、维度、点数 (n)

输出：遵循给定数据分布的 n 个点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:59:55.020

您可以使用一些简单的数学来更改生成数字的间隔：

```
Random r=new Random();
floatx=(r.nextFloat()%(max+min))-min; 
```

java random 类还具有返回高斯分布值的选项。

# asp.net-mvc-3 - 用户登录 FB 或 google 时自动登录网站 - DotNetOpenAuth

> ID：10750615
> 
> 赞同：0
> 
> 时间：2012-05-25T07:53:35.190
> 
> 标签：asp.net-mvc-3, dotnetopenauth

我正在使用 DotNetOpenAuth 通过 FB 和 Google 登录用户。

当用户访问网站时，有没有办法检测到他/她已经登录 FB 或 Google 并自动登录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:16:48.370

可以，如果您的用户*之前已经*使用 Google 或 Facebook 明确登录过您的网站。出于隐私原因，两家提供商都不允许您在每个用户至少一次明确登录您的网站的情况下隐式登录他们的用户（并在登录页面上单击“记住我”）。

一旦用户批准了它，它就成为可能，但仍然不是很简单。该方法涉及在您的页面上创建一个隐藏的 iframe（也许在首次创建用户会话时，您将 iframe 添加到用户正在查看的任何页面，或者只是您的热门登录页面）。此 iframe 指向您网站上的 URL，该 URL 除了启动无用户交互登录流程外什么都不做。对于 Google，这意味着您的服务器`OpenIdRelyingParty.CreateRequest`使用 Google OP 标识符进行调用，并且您`IAuthenticationRequest.Mode = AuthenticationRequestMode.Immediate`在调用`IAuthenticationRequest.RedirectToProvider`. 这`Immediate`bit 告诉提供者不要期望与用户交互（因为您的 iframe 是不可见的）并且立即给出是或否响应。然后在重定向回您的网站（仍然在隐藏的 iframe 中）时，您会看到用户已登录 Google（或未登录）并获取他们声明的标识符并将他们登录到您的网站。

对于使用 OAuth 2 旧草案的 Facebook，该过程可能类似，但使用 OAuth 2 类。我还没有做过这个，所以我不能真正给出一个概述。

# apache-flex - Flex 4 - 生涩的动画问题

> ID：10750618
> 
> 赞同：0
> 
> 时间：2012-05-25T07:53:50.007
> 
> 标签：apache-flex, animation, effects, tween

我在 flex 4 中创建了我的第一个动画效果。它在我的自定义组件中是一个非常简单的动画，它将标签组件从左到右向左移动 3-5 次，然后逐渐淡出。

一切正常，但问题是当我第一次运行动画时，它会播放生涩的动画，之后会变得更加流畅。我不知道为什么。

有人能说出这有什么问题吗？

这是我的自定义组件的完整源代码。将其添加到舞台后，调用 showProgressEffect() 将播放动画。

请注意，我制作了标签“cacheAsBitmap”以避免在移动标签时闪烁，并在每个动画/效果的 play() 方法之前调用 stop()。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="274" height="72"
         click="onClick()" xmlns:components="ui.hud.components.*" cacheAsBitmap="true">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:Sequence id="tween" repeatCount="5" effectEnd="onEffectEnd()" >
            <s:Move xBy="20" duration="500" />
            <s:Move xBy="-20" duration="500" xFrom="50"/>
        </s:Sequence>
        <s:Fade id="fadeEffect" alphaTo="0" duration="2000" />
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            [Bindable]
            public var questId:int;
            [Bindable]
            public var questTitle:String;
            [Bindable]
            public var iconUrl:String;

            private function onClick():void{

                Globals.questCtr.showQuest(questId);

            }
            private function onEffectEnd():void{

                fadeEffect.stop();
                fadeEffect.play([lblStatus]);
            }

            public function showProgressEffect():void{

                tween.stop();
                lblStatus.alpha = 1;
                tween.play([lblStatus]);
            }

        ]]>
    </fx:Script>

    <mx:Image source="{iconUrl}" width="75" height="75"/>
    <s:Group x="77" y="24" width="197">
        <s:Label id="lblStatus" text="Task Complete" fontWeight="bold" fontSize="25" alpha="0" cacheAsBitmap="true" hideEffect="" mouseEnabled="false"/>        
    </s:Group>

</s:Group> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:34:10.067

发生这种情况是因为在动画开始之前，您的标签与之后的位置不同。我不知道您到底想实现什么，但有两种选择：

*   您可以更改`xFrom="50"`为`xFrom="20"`第二步效果；
*   您可以将`lblStatus`x坐标更改为30；

# php - android中的Webview能够运行php

> ID：10750619
> 
> 赞同：3
> 
> 时间：2012-05-25T07:53:51.883
> 
> 标签：php, android

我正在开发一个具有 Web 视图的 Android 应用程序，我还需要在其中加载 html、jquery 和 js 以及 php。现在我可以加载 html jquery css javascript ，但我的问题是我无法在离线的 web 视图中加载 php 有没有办法在 web 视图中执行 php 请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:07:37.133

您几乎肯定不想在您的 Android 上运行 PHP。但如果你这样做，那么你会想要[http://code.google.com/p/php-for-android/](http://code.google.com/p/php-for-android/)。更好的链接： http: [//phpforandroid.net/](http://phpforandroid.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T07:59:00.897

PHP 是一种服务器端语言。它不能在浏览器中运行。它可以帮助您构建动态网页。

在线时可以调用 webview 中的任何网页。什么是服务器端语言并不重要。

当您离线时，您无法向任何服务器发送请求。所以没有执行任何页面的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T19:54:16.510

您可以使用 AndroPhp 轻松完成，只需在 Google play 中搜索并安装即可。

它就像用于 Php+Mysql 的 WampServer。您应该运行它，而不仅仅是在 www/ 文件夹下创建您的 PHP 项目并从 Android webview 127.0.0.1:80/yourproject 调用它

这样你就可以在你的 Android 上拥有本地服务器，你不应该用 Java 为 Android 编码，你可以用 PHP 编码。也许这不是为 Android 编写代码的优雅方式，但可以！

# android - 相对布局位置

> ID：10750621
> 
> 赞同：1
> 
> 时间：2012-05-25T07:53:54.283
> 
> 标签：android, android-layout

我有一个垂直线性布局，它有两个不同元素的线性布局，我想将第一个固定到顶部，第二个居中，我正在尝试但不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_bg"
    >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:background="#3b5998"
    >    
         elements
    </LinearLayout>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="300dip"
        android:layout_height="300dip"
        android:background="@drawable/background_resto"
        android:gravity="center"
    >

           elements
    </LinearLayout>
    </LinearLayout 
```

为什么它不起作用？先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:03:07.777

我建议为此目的选择一个RelativeLayout。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/holo_blue_bright"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:layout_alignParentTop="true"
        android:background="#fff" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="300dip"
        android:layout_height="300dip"
        android:layout_centerInParent="true"
        android:background="@android:color/holo_green_light"
        android:orientation="vertical" >
    </LinearLayout>
</RelativeLayout> 
```

这将帮助您设置相对于其他视图的确切“相对”位置。

最好的祝愿，蒂姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:02:31.393

应该使用`RelativeLayout`而不是`LinearLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_bg"
    >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:background="#3b5998"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        >
        elements
    </LinearLayout>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="300dip"
        android:layout_height="300dip"
        android:background="@drawable/background_resto"
        android:layout_centerInParent="true"
        >
        elements
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:01:14.810

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/background_bg"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="50dip"
            android:layout_alignParentTop="true"
            android:background="#ff0000" >
        </LinearLayout>

        <LinearLayout
            android:layout_width="300dip"
            android:layout_height="300dip"
            android:layout_centerInParent="true"
            android:background="#ff0000"
            android:orientation="vertical" >
        </LinearLayout>
    </RelativeLayout>

</LinearLayout> 
```

# javascript - 使用这个。在 jquery 选择器中

> ID：10750622
> 
> 赞同：2
> 
> 时间：2012-05-25T07:53:58.327
> 
> 标签：javascript, jquery, jquery-selectors

在 javascript 程序中有一个包含对象的数组 (gData)。
这些对象中的每一个都有一个称为标签的属性，它是一个对象。
每个标签在一个名为 div_ 的 div 中包含一个名为 span_ 的跨度。

在其他 gData 相关操作中，标签对象被实例化为

`gData.label = new Label();`

然后将 gData 对象推送到 gData 数组上。

在主程序中，我可以执行以下运行良好的 jquery 代码：

`$(gData[0].label.span_).css("border","5px solid green");`

我想向名为 setCSS() 的标签对象添加一个函数原型。我会这样调用 setCSS 方法：

```
gData[0].label.setCSS("border","5px solid green"); 
```

我编写的 setCSS 代码（如下）不起作用。我猜选择器不起作用。

```
Label.prototype.setCSS = function(args) {

// args contains an object in the form {"cssAtribute":"cssData"}
// call this method as label.setCSS({"border":"3px solid blue"});
// Any number of css attributes can be included in the args object

    $.each(args, function(theKey, theValue) {
        $(this.span_).css(theKey, theValue);
    });
} 
```

我已经尝试过 $(this.span_)、$(this.div.span_) 和其他几个选择器，但都不起作用。

使用 Firebug 我可以看到 gData[0] 包含一个标签对象，而标签对象包含一个 span_ 对象。我的选择器规格错了吗？还是我错过了其他一些让我感到愚蠢的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:57:04.950

`this`在 a 内部`jQuery.each`会有不同的范围。您需要先将其保存在局部变量中：

```
var $span = $(this.span_);
$.each(args, function(theKey, theValue) {
    $span.css(theKey, theValue);
}); 
```

请注意，您的示例`.setCSS("border","5px solid green");`将无法使用此方法，因为它要求参数是使用键/值的对象。

但是，您应该能够将该方法简化为：

```
Label.prototype.setCSS = function() {
    $.prototype.css.apply($(this.span_), $.makeArray(arguments));
}; 
```

这样你就可以像 jQuery 一样使用它，`.css()`包括你的实现示例。

**小提琴：**

第一个例子：http: [//jsfiddle.net/ESrSY](http://jsfiddle.net/ESrSY)

第二个例子：http: [//jsfiddle.net/UpEPK](http://jsfiddle.net/UpEPK)

# redis - Redis 中的事务和监视语句

> ID：10750626
> 
> 赞同：40
> 
> 时间：2012-05-25T07:54:25.983
> 
> 标签：redis

您能否解释一下“The Little Redis Book”中的示例：

> 使用上面的代码，我们将无法实现我们自己的 incr 命令，因为一旦调用了 exec，它们就会一起执行。从代码中，我们不能这样做：

```
redis.multi() 
current = redis.get('powerlevel') 
redis.set('powerlevel', current + 1) 
redis.exec() 
```

> 这不是 Redis 事务的工作方式。但是，如果我们将手表添加到 powerlevel，我们可以这样做：

```
redis.watch('powerlevel') 
current = redis.get('powerlevel') 
redis.multi() 
redis.set('powerlevel', current + 1) 
redis.exec() 
```

> 如果另一个客户端在我们调用 watch 后更改了 powerlevel 的值，我们的事务将失败。如果没有客户端更改该值，则该设置将起作用。我们可以循环执行这段代码，直到它工作。

为什么我们不能在不能被其他命令中断的事务中执行增量？为什么我们需要迭代并等到没有人在事务开始*之前更改值？*

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-25T08:41:18.037

这里有几个问题。

**1）为什么我们不能在不能被其他命令中断的事务中执行增量？**

首先请注意，Redis“事务”与大多数人认为的经典 DBMS 中的事务完全不同。

```
# Does not work
redis.multi() 
current = redis.get('powerlevel') 
redis.set('powerlevel', current + 1) 
redis.exec() 
```

您需要了解在服务器端（在 Redis 中）执行什么，以及在客户端（在您的脚本中）执行什么。在上面的代码中，GET 和 SET 命令将在 Redis 端执行，但对 current 的赋值和 current + 1 的计算应该在客户端执行。

为了保证原子性，MULTI/EXEC 块将 Redis 命令的执行延迟到 exec。所以客户端只会把 GET 和 SET 命令堆积在内存中，一键执行，最后原子化执行。当然，将 current 分配给 GET 和增量的结果的尝试将发生在很久以前。实际上 redis.get 方法只会返回字符串“QUEUED”，表示命令延迟，增量不起作用。

在 MULTI/EXEC 块中，您只能使用在块开始之前可以完全知道其参数的命令。您可能需要阅读[文档](http://redis.io/topics/transactions)以获取更多信息。

**2）为什么我们需要迭代并等到没有人在事务开始之前更改值？**

这是并发乐观模式的一个例子。

如果我们不使用 WATCH/MULTI/EXEC，我们将有一个潜在的竞争条件：

```
# Initial arbitrary value
powerlevel = 10
session A: GET powerlevel -> 10
session B: GET powerlevel -> 10
session A: current = 10 + 1
session B: current = 10 + 1
session A: SET powerlevel 11
session B: SET powerlevel 11
# In the end we have 11 instead of 12 -> wrong 
```

现在让我们添加一个 WATCH/MULTI/EXEC 块。使用 WATCH 子句，只有当值没有改变时，MULTI 和 EXEC 之间的命令才会被执行。

```
# Initial arbitrary value
powerlevel = 10
session A: WATCH powerlevel
session B: WATCH powerlevel
session A: GET powerlevel -> 10
session B: GET powerlevel -> 10
session A: current = 10 + 1
session B: current = 10 + 1
session A: MULTI
session B: MULTI
session A: SET powerlevel 11 -> QUEUED
session B: SET powerlevel 11 -> QUEUED
session A: EXEC -> success! powerlevel is now 11
session B: EXEC -> failure, because powerlevel has changed and was watched
# In the end, we have 11, and session B knows it has to attempt the transaction again
# Hopefully, it will work fine this time. 
```

因此，您不必反复等待直到没有人更改值，而是一次又一次地尝试操作，直到 Redis 确定值一致并发出成功信号。

在大多数情况下，如果“事务”足够快并且发生争用的概率很低，则更新非常有效。现在，如果存在争用，则必须对某些“事务”进行一些额外的操作（由于迭代和重试）。但数据将始终保持一致，不需要锁定。

# android - 我可以以编程方式更改设备 DPI 吗？

> ID：10750629
> 
> 赞同：5
> 
> 时间：2012-05-25T07:54:33.987
> 
> 标签：android

我想知道我是否可以更改决定它应该选择哪种布局或应该选择/缩放哪个图形的设备。当然，此更改只会影响我的应用程序。我可以以某种方式设置设备 DPI 吗？

我这样做的原因是这款手机：[http](http://www.gsmarena.com/samsung_p1000_galaxy_tab-3370.php) : //www.gsmarena.com/samsung_p1000_galaxy_tab-3370.php 它的 DPI 非常差，只有 240DPI，而它只有 170PPI，应该被识别为 160DPI 设备。我有相当大的 layout-large 图形，在 mdpi 上看起来很棒，但在 hdpi 上它们不适合，它们太大了。

也许除了更改设备 DPI 之外，您还有其他解决方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-11-09T11:52:07.290

是的，有可能。以下将 dpi 设置为 240。尽管您必须以某种方式刷新活动，例如重新启动应用程序。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
metrics.density = 1.5f;
metrics.densityDpi = 240;
metrics.heightPixels = 1104;
metrics.widthPixels = 1920;
metrics.scaledDensity = 1.5f;
metrics.xdpi = 254.0f;
metrics.ydpi = 254.0f;
getResources().getDisplayMetrics().setTo(metrics); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T08:49:34.163

您应该创建您的应用程序以支持多个屏幕。查看[文档](http://developer.android.com/guide/practices/screens_support.html)

并希望这些链接对您有所帮助

[多屏设计](http://developer.android.com/training/multiscreen/index.html)

[使用多个 Android 屏幕](http://www.slideshare.net/motodev/ui-multiplescreens)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:23:33.180

三星 Galaxy Tab GT-P1000 从 layout-xhdpi 获取布局，如果不存在，那么它会看起来很大。

尝试根据 您必须为您的应用程序设计替代布局和可绘制文件的[文档，为您的应用程序支持多个屏幕分辨率](http://developer.android.com/guide/practices/screens_support.html)

# jquery - 使用 jQueryAjax "GET" 调用 WebMethod

> ID：10750631
> 
> 赞同：18
> 
> 时间：2012-05-25T07:54:37.650
> 
> 标签：jquery, asp.net-ajax, webmethod

我有一个 ajax 请求，它使用“POST”运行良好，但是当使用“GET”时，它给了我以下错误，

```
{"Message":"An attempt was made to call the method \u0027GetSomething\u0027 
using a GET      request, which is not allowed.","StackTrace":" at 
System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData 
methodData, HttpContext context)\r\n at 
System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, 
WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"} 
```

所以这是我的代码，在客户端，

```
function test() {
        $.ajax({
            url: "Default4.aspx/GetSomething",
            type: "GET",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (res) { debugger; alert(res.d); },
            error: function (res) { debugger; alert("error"); }
        });
    } 
```

在服务器端，

```
[WebMethod]
public static string GetSomething()
{
    return "got something";
} 
```

使用“GET”时出现错误的任何原因？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-25T10:32:28.240

如果要使用 GET 调用它，则需要添加：

```
[WebMethod]
[ScriptMethod(UseHttpGet=true)]
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T08:00:59.710

另一种方法：您可以将其添加到配置文件中

```
<system.web>
    ...
    <webServices>
        <protocols>
              <add name="HttpGet"/>
        </protocols>
    </webServices>
    ...
</system.web> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T06:13:35.000

您应该在 Web .config 文件中的标记之前添加以下代码。

```
<location path="webservice.asmx">
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web>
</location> 
```

# azure - 我的 Azure 项目设置中的数据传输成本如何

> ID：10750632
> 
> 赞同：2
> 
> 时间：2012-05-25T07:54:39.963
> 
> 标签：azure, azure-sql-database

我为最终用户 Azure 应用程序构建了一个实用程序（启动任务）。该启动任务将通过 REST API（托管在东亚）将来自该 webrole 应用程序（根据最终用户选择托管在任何区域）中的一些数据发布到数据库（托管在东亚）。

因此，如果最终用户将他们的应用程序托管在同一地区（东亚），那么 Azure 不会向我和最终用户传输数据（如果我理解错误，请纠正我）。

在另一种情况下，如果最终用户将他们的应用程序托管在另一个区域，那么最终用户将需要将数据传输到另一个区域的 REST API 上。

我为降低成本所做的工作，我在所有区域设置了 REST API，并在启动任务中告诉用户根据他们要部署应用程序的区域设置特定 REST API 的路径。现在在这种情况下，最终用户不需要为数据传输支付任何费用，但是我的 REST API（托管在不同区域）会将数据传输到数据库（托管在东亚），因此我需要为此以及托管 REST API 付费在所有地区，以降低最终用户成本。

在上述情况下，有没有办法使用共享数据库来降低成本并删除所有区域上托管的多个 REST API？另外请建议是否存在更好的解决方案来降低我和最终用户的成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:09:29.320

有趣的场景：您基本上是让您的最终用户为自己部署应用程序到选择的区域？通过 REST API 上传数据库的目的是什么：备份，还是用于实时数据？

我不明白的一件事是关于共享数据库的问题。根据您的描述，已经有一个共享数据库，因为每个用户都通过 REST API 将数据推送到东亚的单个数据库。这不正确吗？

根据您提供的信息，所有数据都转到一个数据中心，我看到 3 个选项，其中两个您已经指出：

1.  用户在 8 个数据中心中的任何一个中托管应用程序，您在一个数据中心中托管 REST API。在这种情况下，用户在本地和应用程序之间获得最佳本地应用程序性能，用户为您的 API 的出口付费，并且用户在跨数据中心传输数据时可能会看到延迟。
2.  用户在 8 个数据中心中的任何一个中托管应用程序。您在所有数据中心托管 REST API。用户的数据可以免费传输到本地 REST API，而且速度非常快。但是，您随后将数据传输到东亚数据库，如果用户不在东亚托管，这将花费您的出口带宽。此外，您现在还需要花费许多额外的 REST API 实例。
3.  用户仅在东亚托管，以及您的 REST API 和数据库。所有数据中心带宽都是免费且快速的。用户可能会看到从本地连接到应用程序的延迟，具体取决于他们所在的位置。

在每种情况下，您都让用户部署他们自己的托管服务，然后该服务与您的对话。是否可以通过让他们都访问相同的托管服务但使用不同的凭据来优化用户成本？

对于您的成本，在每个数据中心托管一个 REST API 似乎是一笔不小的开支，因为您需要在每个数据中心至少运行 2 个实例才能获得 Windows Azure 的正常运行时间 SLA。但是......同样，我并不完全了解您的应用程序的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:48:59.813

我认为在这种情况下，最好让客户提供自己的数据库。如果您需要使用自己的数据库，则很难为您节省成本。您可以使用托管在不同数据中心的多个数据库。但显然这需要更多的成本。您也可以使用单个数据库，但是不可避免地会有一些用户从另一个数据中心传输数据。但是，您可以通过提高产品价格来要求用户支付费用。但看起来最好让用户提供他们自己的数据库（如果他们愿意，他们甚至可以选择本地数据库）。这也有助于提高安全性，因为不会共享用户的数据。

此致，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:11:03.953

根据我的理解，情况似乎有点奇怪。如果您要提供最终用户可以使用自己的 Windows Azure 帐户托管的软件包，为什么还要让他们使用自己的数据库呢？还是您的意思是您向最终用户提供项目的源代码作为示例？无论如何，我认为最好让最终用户提供他们自己的数据库帐户。如果您想为自己设计一个 REST API，请将其托管在您自己的 Windows Azure 服务中。请不要将软件包分发给您的最终用户。此外，有关计费的更多信息，您还可以通过[https://support.microsoft.com/oas/default.aspx?prid=14234&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?prid=14234&st=1&wfxredirect=1&sd=gn)联系我们的客户支持。

此致，

明旭。

# asp.net-mvc - 在控制器上找不到公共操作方法“缓存”

> ID：10750637
> 
> 赞同：8
> 
> 时间：2012-05-25T07:54:44.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, asp.net-mvc-routing, telerik-mvc

我`A public action method 'cache' was not found on controller`在执行`actionresult`. 虽然这里没有在我的代码中定义或使用缓存。不知道它从哪里得到这个。它发生在 Telerik mvc 网格的 ajax 绑定上。这是来自 elmah 的堆栈跟踪

```
HTTP Referrer
/mycontroller/75/myaction
Path Info
/mycontroller/cache/b19858cce4adf72d090c2334d5584f06 
```

堆栈跟踪

```
 System.Web.HttpException (0x80004005): A public action method 'cache' was not found on controller 'myapp.Controllers.MyController'.
   at System.Web.Mvc.Controller.HandleUnknownAction(String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:52:24.333

有一个与此描述匹配的 Chrome 错误：[http](http://code.google.com/p/chromium/issues/detail?id=132059) ://code.google.com/p/chromium/issues/detail?id=132059 根据问题描述，它不会在其他浏览器中发生，因此很可能是 Chrome必须用它做点什么。但是，该错误尚未得到确认，并且有多种理论可能导致该错误。我建议您自己使用多个浏览器进行测试，以检查它是否与 Chrome 相关。

# javascript - 选择性帧爆破

> ID：10750639
> 
> 赞同：10
> 
> 时间：2012-05-25T07:55:01.127
> 
> 标签：javascript, jquery

我想为我的 iframe 应用程序实现选择性 Framebursting。

我的 iframe 可在`www.mywebsite.con/iframe.aspx?lic=1234`

当托管我的 iframe 的第三方网站是 ( `PayedWebsited1.con`OR `PayedWebsited2.con`) 并且该`lic=1234`选项也存在时，显示 iframe。对于任何其他作弊者，展示香蕉！

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:57:06.187

问题是，该许可证号不会有任何帮助 - 无论您将使用服务器端解决方案还是在 javascript 中。作弊者将能够在 PayedWebsite1.com 中看到该许可证号。

如前所述，您无法获取父框架位置，但您可以获得引荐来源 - 如果您的页面在 iframe 中加载，则它等于父框架。

```
if (window.top.location !== document.location) {  // only if we're in iframe
                           // we get host of our referrer
    var host = document.referrer.match(new RegExp("(http|https)://(.*?)/.*$"))[2];
    host = host.toLowerCase();  // convert to lower case
    var myHost = document.location.host.toLowerCase();
    if (
        host !== myHost                  // so we can click on links in an iframe
        && host !== 'payedwebsite1.com'
        && host !== 'payedwebsite2.com'
    ) {
        window.top.location.href = document.location.href;
    }
} 
```

请注意，这种技术可以被击败。更多信息请访问[http://javascript.info/tutorial/clickjacking](http://javascript.info/tutorial/clickjacking)

对于较新的浏览器，您可以发送特殊标头：

```
X-Frame-Options: DENY 
```

逻辑保持不变，仅在服务器端。检查推荐人，如果 PayedDomain 或您自己的域，请继续。否则，发送此标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T04:34:08.010

如果您的第三方用户可以包含 javascript 文件，或者理想情况下在绘制页面之前在 ASP 中发送请求，我会这样做：

**Javascript**

1.  在您的服务器上构建一个 ASP（我使用 PHP，因此我的示例是 PHP）页面，该页面检查引用者和许可证号以匹配您数据库中的帐户。然后，ASP 文件应输出 javascript 函数，这些函数将使用您生成的“一次性使用”密钥替换或插入您指定的 iframe 元素。该文件可能类似于以下内容：

    ```
    <?php
    $lic = $_GET['lic']; // Do better validation (short for demo purposes)
    if (valid_license($lic, $_SERVER['HTTP_REFERER'])) {
        $one_time_key = get_access_key($lic);
        ?>
        function drawIframe() {
            document.getElementById('iframe_target').innerHTML = "<iframe src='mysite.php?key=<?php echo $one_time_key;?>'></iframe>";
        }
        <?php
    }
    else {
        echo "You are not authorized to use this service.";
    } 
    ```

2.  让您的客户以类似于以下方式包含此 javascript 代码作为 iframe 的替换：

    ```
    <script src="http://www.yoursite.com/preauth.php?lic=1234"></script>
    <script>drawIframe();</script>
    <div id="iframe_target"></div> 
    ```

3.  在 iframe 加载的页面上，立即根据传递给 iframe 的值检查您生成的密钥。如果有效，请立即删除或更改密钥的状态，以便您知道它已被使用。然后显示适当的应用程序。

    *   这种 javascript 方法对于您的第三方用户来说将是最不痛苦的方法，尽管它可以被击败（用户可以更改发送到您的服务器的“引用者”，尽管这不太可能。）

**ASP**

如果您可以让您的用户在他们的服务器中向您的 url 发出请求，您将避免向用户公开任何有风险的信息，例如许可证。`$key = file_get_contents("http://www.yoursite.com/preauth.asp?lic=1234");`他们可以在使用您刚刚生成的一次性使用密钥输出 iframe 之后立即调用类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:05:16.103

出于安全考虑，您的浏览器将不允许您使用 javascript 来检测父页面的 URL（即包含显示您页面的 iframe 的页面）。

我能想到的唯一解决方案是：

1.  坚持让 iframe.aspx 页面的用户包含一个额外的 GET 参数，说明他们正在使用的域。
2.  使用`Request.UrlReferrer`获取推荐人

在您呈现的页面上，您应该有一个文字，如果您想阻止人们构筑您的页面，您可以简单地添加强制框架所需的 javascript。

不幸的是，如果禁用 Javascript，这将使您的代码无用...

希望这可以帮助？

```
protected void page_load(object sender, EventArgs e)
{
    bool killFrames = false;
    if(Request.QueryString["lic"] == null)
        killFrames = true;
    if(!killFrames && Request.UrlReferrer != null)
    {
        // do some database check against the LIC and Referrer
        // and set killFrames accordingly.
    }
    if(killFrames)
    {
        literalFrame.Text = "<script type=\"text/javascript\">if(top.location != location) { top.location.href = document.location.href; }</script>";
        // or show the bananas
    }
    else
    {
        // render the page accordingly.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T15:42:50.890

我将尝试为您的一般问题而不是这个特定的技术问题指出一个解决方案，据我所知，这对于所有网络浏览器所做的安全预防措施都是不可能的。

* * *

您需要在他们的应用程序和您的应用程序之间进行某种握手，并且必须在服务器端完成。

每个*付费网站*都应该有一个密码（或者如果他们有一个静态 IP，你可以使用它）。在他们的服务器内部（可能使用 CURL），他们会通过 POST 向您发送他们的密码；然后你返回一个在 iframe 中使用的令牌。

```
iframe.aspx?lic=1234&token=d16evg5tr44e0trty45xp6es5 
```

并且令牌只能使用一次；因此每次需要打开 iframe 时都必须重复该过程。并且您拒绝所有不包含有效令牌的连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T23:13:28.523

我不是 .NET 专家，但看起来您的解决方案可以通过跟踪客户端在加载 iframe 内容时发送到您的页面的引荐标头来轻松解决。

您可能想参考有关引用标头的另一个问题： [我们应该如何在 aspx .net 中验证 http 标头引用者](https://stackoverflow.com/questions/677116/how-should-we-validate-http-header-referrer-in-aspx-net)

基本上，您将执行以下操作

1.  使用引用标头获取域名
2.  在您的数据库中查找域名（查看该站点是否有许可证）
3.  根据匹配结果发送真实页面或香蕉。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-18T16:44:30.767

`Global.asax`成功了！

```
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
        Dim ref As String = HttpContext.Current.Request.ServerVariables("HTTP_REFERER")
        If Not ref.Contains("PayedWebsited1") And Not ref.Contains("PayedWebsited2") Then
            Response.Redirect("MYDOMAIN", True)
        End If
 End Sub 
```

谢谢大家！

# android - android 是否可以通过 NDK 开发 eap-sim 连接？

> ID：10750645
> 
> 赞同：2
> 
> 时间：2012-05-25T07:55:19.010
> 
> 标签：android

在我的 Galaxy ace 上，我遇到了 wifi eap-sim 连接问题。检测到 SSID，但是当我尝试连接时总是失败或断开连接。要使其连接，我必须根我的手机，但我不想根它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T17:13:13.807

不。

你需要 -

1.  修补 RIL 接口以公开 GSM 逻辑通道。
2.  实现了用于访问 RIL 接口的智能卡服务。
3.  修补 wpa_supplicant 以使用智能服务
4.  补丁Wifi设置界面。

# web-hosting - 共享主机更适合 SaaS 应用程序还是云主机？

> ID：10750654
> 
> 赞同：1
> 
> 时间：2012-05-25T07:56:45.217
> 
> 标签：web-hosting

我正在创建一个 SaaS 应用程序，并计划将其商业化。我想知道共享主机是否足够，或者我应该选择云主机吗？我看到云托管非常昂贵，作为一家初创公司，我们负担不起高昂的成本。下面我们计划做：

1) 运行 cron 作业以每 6 小时备份一次数据库。

2）动态创建一个数据库并使用它。

3) 向用户发送自动电子邮件。

4) 部署支付网关。

主要的是我们将执行大量的 mysql 查询。最大限度。我预计未来 1 年的流量是每月 10,000。

我正在考虑来自 hostgator 的 SaaS 应用程序的商业计划。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T11:54:22.360

常规的非云网络托管就足够了。有很多基于 PHP 的成功电子商务网站，它们使用支付网关、cron 作业、电子邮件营销等。云托管要贵得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:30:05.487

我们将使用云（pagodabox.com）。

# c++ - Fsync 太快了？

> ID：10750655
> 
> 赞同：0
> 
> 时间：2012-05-25T07:56:55.843
> 
> 标签：c++, c, linux, filesystems

我对大文件`ftruncate`和`fsync`操作感到惊讶。我编写了一个程序，在 Linux 64 位系统上创建一个空文件，将其截断为 0xffffffff 字节，然后再截断`fsync`它。

在所有操作之后，使用此长度正确创建文件。

我看到这`ftruncate`花费了大约 1442 微秒，而`fsync`只花费了 4 微秒。

这么高的性能正常吗？真的把所有字节都写在光盘上吗？如果没有，我怎样才能确保这种同步？

```
#include <sys/time.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <iostream>

static const size_t __tamFile__ = 0xffffffff;

int main(int, char **)
{
    std::string fichero("./testTruncate.dat");

    unlink(fichero.c_str());

    int fd = open(fichero.c_str(), O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);
    if (fd != -1)
    {
        struct timeval t1, t2;

        timerclear(&t1);
        timerclear(&t2);

        gettimeofday(&t1, NULL);
        ftruncate(fd, __tamFile__);
        gettimeofday(&t2, NULL);

        unsigned long long msecTruncate = static_cast<unsigned long long>((((t2.tv_sec * 1E6) + t2.tv_usec) - ((t1.tv_sec * 1E6) + t1.tv_usec))) ;

        gettimeofday(&t1, NULL);
        fdatasync(fd);
        gettimeofday(&t2, NULL);

        unsigned long long msecFsync = static_cast<unsigned long long>((((t2.tv_sec * 1E6) + t2.tv_usec) - ((t1.tv_sec * 1E6) + t1.tv_usec))) ;

        std::cout << "Total microsec truncate: " << msecTruncate << std::endl;
        std::cout << "Total microsec fsync: " << msecFsync << std::endl;

        close(fd);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T07:58:56.733

> 我编写了一个程序，在 Linux 64 位系统上创建一个空文件，将其截断为 0xffffffff 字节，然后对其进行 fsync。

除非您向其写入内容，否则该文件极有可能包含漏洞。

来自 TLPI：

> 如果程序越过文件末尾，然后执行 I/O，会发生什么？调用 read() 将返回 0，表示文件结束。有点令人惊讶的是，可以在文件末尾之后的任意点写入字节。
> 
> 文件的前一个结尾和新写入的字节之间的空间称为文件洞。从编程的角度来看，孔中的字节是存在的，从孔中读取会返回一个包含 0（空字节）的字节缓冲区。
> 
> 但是，文件漏洞不会占用任何磁盘空间。文件系统不会为空洞分配任何磁盘块，直到稍后将数据写入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:23:53.743

您拥有哪个 Linux 内核版本、哪个文件系统以及哪些挂载选项（特别是是否启用了屏障？）？

在 Linux 2.6.32 64 位，启用了障碍的 ext4（默认）上，我得到

```
 $ ~/src/cpptest/truncsync 
Total microsec truncate: 32
Total microsec fsync: 266
Total microsec close: 14 
```

否则相同，但使用 NFS 安装的文件系统，我得到

```
 $ ./truncsync 
Total microsec truncate: 38297
Total microsec fsync: 6
Total microsec close: 6
$ ./truncsync 
Total microsec truncate: 3454967
Total microsec fsync: 8
Total microsec close: 330 
```

# javascript - 类型转换和函数签名

> ID：10750662
> 
> 赞同：3
> 
> 时间：2012-05-25T07:57:25.173
> 
> 标签：javascript, jquery, haxe

我想知道如何**签署我的私有函数** *（例如：function onTweets(datas:RightType):Void）*，这样我就可以直接遍历 datas.results 而无需在我的 for 循环之前提取结果？

```
private function onTweets(datas:Dynamic):Void {
    var tweets:Array<Tweet> = new Array<Tweet>();
    var results:Hash<Dynamic> = datas.results;
    for (data in  results ) {
        var tweet:Tweet = new Tweet( { from_user: data.from_user , created_at : data.created_at , text : data.text } );
        tweets.push(tweet);
    }
    this._datas = datas ;
    this._tweets = tweets ;
    this._next(tweets);
} 
```

**这是我的对象在Chrome**中的样子：

![在此处输入图像描述](../Images/b94e6fcb44b2877a59ae3f1003b47ba9.png)

推文来自 $.getJSON 调用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:13:58.693

如果结果似乎是一个数组，为什么要转换为 Hash？

```
private function onTweets(datas:{ results : Array<Dynamic> }):Void {
    var tweets:Array<Tweet> = new Array<Tweet>();
    for (data in datas.results ) {
        var tweet:Tweet = new Tweet( { from_user: data.from_user , created_at : data.created_at , text : data.text } );
        tweets.push(tweet);
    }
    this._datas = datas ;
    this._tweets = tweets ;
    this._next(tweets);
} 
```

这是你想要的吗？

编辑：您甚至可以定义更具体的类型：

```
typedef TweetData = {
    created_at: String,
    from_user: String,
    from_user_id: Int,
    from_user_id_str: String
};

private function onTweets(datas:{ results:Array<TweetData> }):Void 
```

# eclipse - 使用所有插件和设置升级 STS

> ID：10750666
> 
> 赞同：0
> 
> 时间：2012-05-25T07:57:32.260
> 
> 标签：eclipse, sts-springsourcetoolsuite

当我必须更新 Springsource Toolssuite（也适用于 Eclipse，但我从来没有遇到过这么多更新问题）时，我总是很失望，因为它需要相当长的时间，而且 STS 内部的更新功能不起作用出色地。例如，我无法从 2.9.1 升级到 2.9.2，所以我被迫重新安装。在这个问题中，我想展示我是如何做到这一点的，我希望得到一些反馈来改进这个过程：

1.  我总是确保我从市场上安装了这个插件：[P2 Installation Replication](http://marketplace.eclipse.org/content/p2-installation-replication)。它允许我选择所有插件信息并将其转储到单个 XML 文件中。所以我启动旧版本的 STS 并将我的插件列表转储到文件名中带有日期的文件中以具有不同的版本。
2.  然后我关闭 STS 并将根目录重命名为“springsource_old”
3.  我将新版本下载为 ZIP 文件并将其解压缩到一个目录中。
4.  我使用[Lombok](http://projectlombok.org/download.html)，所以我下载它并双击 JAR 为所选的 STS 安装位置安装它。通常，如果您坚持 C:\springsource\.. 或类似的默认位置，Lombok 会找到安装。
5.  接下来，我更新 STS.INI 文件以强制 STS 使用带有 -vm 标志的特定版本的 Java SDK。如果您有很多 Eclipse 工作区要管理，将它们显示在窗口的标题栏中也很有帮助。所以我在 INI 文件中包含 -showlocation 。它不必首先出现，就在 -vmargs 之前，因此它看起来不是 JVM 参数。
6.  然后我启动 STS，选择第一个工作区并再次关闭它。这会生成一些首选项文件。我想要的是所有工作区的列表。STS (Eclipse) 将工作空间信息存储在名为“org.eclipse.ui.ide.prefs”的首选项文件中。该文件位于“%ECLIPSE_HOME%\configuration.settings”下，包含一个名为“RECENT_WORKSPACES”的键。因此，在备份位置打开文件，复制条目，打开新生成的文件，并将设置复制到其中。下次我启动 STS 时，我可以再次在所有以前使用的工作区之间进行选择。
7.  即使没有安装插件，STS (Eclipse) 也可以使用步骤 1（导入 - 安装 - 从文件安装软件项目）中转储的插件本地打开文件。它还允许获取最新版本，而不是保存在 XML 文件中的版本。所以我选择并获取我所有丢失的插件。

你的经验还缺少什么？我该如何改进这个过程？这仍然需要一些时间。

**更新**
不可能是我是唯一一个更新 STS 有问题的人。今天从 3.1.0 到 3.2.0 的更新来了，现在我的 STS 看起来像： ![更新后的 STS](../Images/37fbe91224bdce8876c41d23a719ef82.png) 所以我仍然有每次重大更新后 STS 不再工作的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:03:31.943

你到底有什么问题？一般来说，您应该能够毫无问题地从一个单点版本升级到下一个单点版本（例如，从 2.9.1 升级到 2.9.2）。

有一次出现问题，导致您无法升级，但现在已解决。见这里： http: [//forum.springsource.org/showthread.php?126775-Cannot-update-Grails-Support-from-2-9-1-to-2-9-2 &p=413794#post413794](http://forum.springsource.org/showthread.php?126775-Cannot-update-Grails-Support-from-2-9-1-to-2-9-2&p=413794#post413794)

如果您在升级时遇到问题，请在 STS 论坛上发帖并粘贴 p2 给您的错误信息。

有时，在升级时，您可以查看错误消息并查看未找到哪个组件。您可能需要添加新的更新站点或取消选择不兼容的功能。

# php - PHP从while循环中获取变量

> ID：10750670
> 
> 赞同：0
> 
> 时间：2012-05-25T07:57:47.887
> 
> 标签：php, mysql

在我的 PHP 脚本中，我创建了一个 mysql_query ：

```
 $full_alarm_sql = "
          SELECT alarms.id, alarms.date, clients.name, clients.number, alarms.controller, alarmstype.type, 
          alarms.alarmstatus, alarms.starttime, alarms.endtime, DATEDIFF(CURDATE(), alarms.date) AS difference
          FROM alarms
          LEFT JOIN clients ON alarms.clientid = clients.id
          LEFT JOIN alarmstype ON alarms.typeid = alarmstype.id
          WHERE DATEDIFF(CURDATE(), alarms.date) <=" . $type . " AND clients.number = " . $market;
  $full_alarm_query = mysql_query($full_alarm_sql); 
```

然后我在一个表中进行一个while循环，并获取查询：

```
while ($full_alarm_fetch = mysql_fetch_array($full_alarm_query)) {
  $content .=
    "
           <tr>
          <td>" . $full_alarm_fetch['date'] . "</td>
          <td>" . $full_alarm_fetch['number'] . " | " . $full_alarm_fetch['name'] . "</td>
          <td>" . $full_alarm_fetch['controller'] . "</td>
          <td>" . $full_alarm_fetch['type'] . "</td>
          <td>" . $full_alarm_fetch['alarmstatus'] . "</td>
          <td>" . $full_alarm_fetch['starttime'] . "</td>
          <td>" . $full_alarm_fetch['endtime'] . "</td>
        </tr>";
   $client_name = $full_alarm_fetch['name'] . ' | ' . $full_alarm_fetch['number'];
} 
```

然后我需要使用

```
$full_alarm_fetch['name'] . ' | ' . $full_alarm_fetch['number']; 
```

所以我现在这样做的方式似乎不是最好的方式，这意味着while循环内的变量一次又一次地被覆盖，直到循环终止并且我可以使用获取信息。

我想知道是否有更好/有效的方法来做我想做的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:08:53.620

你的代码很好。你*可以*一次抓取整个 rs，然后循环它，

```
while ($rs[] = mysql_fetch..);
//done..
for($i=0;$i<sizeof($rs);$i++) or
foreach($rs as $rec) 
```

给予以下好处：

*   在php中缓存rs（序列化数据）
*   在 rs 中向后跳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:07:36.710

是的，有更好的方法。您可以首先声明一个数组并将获取的内容保存在那里，然后循环遍历该数组。像这样。

```
 $fetched_arr = array();
while ($full_alarm_fetch = mysql_fetch_array($full_alarm_query)) {
  $fetched_arr[] = $full_alarm_fetch;
} 
```

然后你循环数组

```
foreach($fetched_array as $something)
 {
    //here you can save the values in the $content
    // you can use $somethin['date'] and etc.. 
 } 
```

# php - 如何从段落中获取第一行

> ID：10750671
> 
> 赞同：1
> 
> 时间：2012-05-25T07:58:07.950
> 
> 标签：php, sql

我有一个段落存储在数据库中，我只想从中获取前五行。它怎么做？

我应该将第一个数组转换为 srting 吗？如果是，那么该怎么做？

如果它的字符串比我可以做到这一点

```
$str='mayank kumar swami mayank kumar swami';
$var= strlen($str);
for($i=0;$i<8;$i++){
    echo $str[$i];
} 
```

2.  或者如何通过 sql 从数据库中只获取 200 字？

我知道它可以通过 css 轻松显示在 Show [first line of a paragraph](https://stackoverflow.com/questions/3964900/show-first-line-of-a-paragraph) nut 我想通过 php 或 sql 查询来完成

我在做什么

```
$article_result = mysql_query("SELECT * FROM article ORDER BY time DESC LIMIT 1",$connection);
    if($article_result){
        while($row = mysql_fetch_array($article_result)) 
            {

                echo "<div class=\"article_div\" >";
                echo "<h4 id=\"article_heading\"><img src=\"images/new.png\" alt=\"havent got\" style=\"padding-right:7px;\">".$row['article_name']."</h4>";
                echo"<h5 class=\"article_byline\">";
                echo" by";
                echo"<a href=\"#\">{$row['authore']}</a></h5>";
                echo" <div id=\"article_about\"><p>{$row['content']}</p></div>";
                             //here i want to get only 2000  word from database (content)

                echo "</div>";
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:35:29.360

这个问题有很多解决方案。

如果您想按字数拆分它，类似于`user247245`发布的内容：

```
function get_x_words($string,$x=200) {
  $parts = explode(' ',$string);
  if (sizeof($parts)>$x) {
    $parts = array_slice($parts,0,$x);
  }
  echo implode(' ',$parts);
} 
```

然而，我首选的方法是获取所有完整的单词直到某个点（例如 200 个字符）：

```
function chop_string($string,$x=200) {
  $string = strip_tags(stripslashes($string)); // convert to plaintext
  return substr($string, 0, strpos(wordwrap($string, $x), "\n"));
} 
```

以上会将字符串截断为 200 个字符，但只会在单词结尾后截断（所以最后不会返回半个单词）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:18:34.177

我们是在说单词、线条还是字母？

如果的话：

```
$a = explode(' ',$theText);
if (sizeof($a)>200) $a = array_slice($a,0,200);
echo implode(' ',$a); 
```

问候，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:01:12.533

您可以在mysql中使用[子字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring)

```
SELECT SUBSTRING('Quadratically',1,5); 
```

返回

```
Quadr 
```

我建议您使用 sql，因为它减少了数据库服务器和应用程序服务器之间的数据传输量。

所以，现在你修改这个

```
$article_result = mysql_query("SELECT article_name, authore, SUBSTRING(content,1,200) as content FROM article ORDER BY time DESC LIMIT 1",$connection); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T08:05:38.270

尝试这个：

```
<?php
echo  substr("mayank kumar swami mayank kumar swami", 0, 6);
?> 
```

结果输出：`mayank`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-19T11:09:01.977

```
<?php
$about_vendor ="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci officia excepturi quisquam mollitia, obcaecati cupiditate, quaerat est quibusdam nostrum esse culpa voluptates eum, et architecto animi. Voluptates enim tenetur minus! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laboriosam magni exercitationem non at error possimus, voluptas aut, aperiam sint pariatur illo libero vel aspernatur tempora laborum. Harum nesciunt quos at. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vitae quidem saepe voluptates minus delectus, dolores, repellat maiores quae consectetur quasi qui voluptas eius odit autem optio cupiditate nesciunt iste ducimus!"
// Convert string to array
$convert_to_array = explode(' ',$about_vendor);
// Total length of array
$total_length_of_array =  count($convert_to_array);
?>
<p class="tip_par" style="text-align:justify;">
<!-- specify how many words do you want to show, I like to show first 30 words -->
  <?php for($i=0;$i<=30;$i++) {
  echo $convert_to_array[$i].' ';
  } ?>
  <!-- If you have more than 30 word it will show on toggle click on below more link -->
  <span style="color:#C1151B;">  <span data-toggle="collapse" data-target="#demo" style="cursor:pointer;"><?php if($total_length_of_array >30) {
    echo "more";
  } ?></span>
  <div id="demo" class="collapse tip_par" style="padding-top: 0px;">
    <?php  for($i=31;$i<$total_length_of_array;$i++) {
    echo $convert_to_array[$i].' ';
    } ?>
  </div>
</span> </p> 
```

# ios - UITableView 在 XCode 4 中表现怪异

> ID：10750672
> 
> 赞同：0
> 
> 时间：2012-05-25T07:58:19.273
> 
> 标签：ios, uitableview, xcode4, gradient, xcode3to4

我在 XCode 3 中创建了一个应用程序，当我在手机或模拟器上运行该应用程序时，我的 tableviews 工作得很好，但是当我在 XCode 4 中打开项目时，我的 tableViews 出现在它们上面有一个渐变。你能告诉我有什么问题吗？

# javascript - 为所有主流浏览器创建 css3 无限旋转

> ID：10750673
> 
> 赞同：0
> 
> 时间：2012-05-25T07:58:22.157
> 
> 标签：javascript, gwt, animation, css, rotation

我使用 GWT (javascript) 和 CSS3 属性创建了一个无限旋转动画：我创建了一个计时器，它反复将“transform”属性设置为“rotate(currentVal + 360)”（用于 webkit、opera、firefox、safari）。问题是这种方法使用大约 10-15% 的 CPU（在 chrome 上）和 20-25% 的 CPU 在 firefox（Intel Core2 Duo 1.8 GHz）上，我不明白为什么。是否有替代解决方案？（对于所有主要浏览器，不仅仅是 chrome 或 safari 让我们说......）还是我可能在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:33:18.283

目前 CSS3 还没有硬件加速，至少你测试的浏览器没有。但是除了 CSS3 之外，还有其他几种旋转图像的可能性：

*   [Raphaël-JavaScript 库](http://raphaeljs.com/)
*   [Paper.js](http://paperjs.org/)
*   [jQueryRotate](http://code.google.com/p/jqueryrotate/)（一个 jQuery 插件）

这些库与 SVG 一起使用，恕我直言，它的 CPU 消耗较少。如果您只想旋转图像，则可能不需要整个 raphaeljs-library。在这种情况下，您应该查看规格：w3.org/TR/SVG11

现场示例：http: [//upload.wikimedia.org/wikipedia/commons/4/4f/Soccer_ball_animated.svg](http://upload.wikimedia.org/wikipedia/commons/4/4f/Soccer_ball_animated.svg)

# mysql - com.mysql.jdbc.Driver 找不到类异常

> ID：10750675
> 
> 赞同：1
> 
> 时间：2012-05-25T07:58:38.603
> 
> 标签：mysql, class, ubuntu, jdbc

这是我的第一篇文章，我希望我能联系到这个小组。我正在为这个问题拉头发。

我正在使用 LAMP 运行 EC2 Ubuntu 微型实例。我正在使用带有 JDBC 的 Java 来访问 mysql 数据库。

问题是Java代码在我执行时不断抛出“ClassNotFound”异常： Class.forName("com.mysql.jdbc.Driver");

我已经安装了以下内容：

```
sudo apt-get install mysql-server
sudo apt-get install mysql-client
sudo apt-get install libmysql-java 
```

我在 Java 文件中的导入是：

```
import java.text.CharacterIterator;
import java.text.StringCharacterIterator;
import java.util.regex.*;
import java.sql.*;
import java.util.Properties;
import java.net.*;
import java.sql.Connection;
import java.sql.DriverManager; 
```

我的 $CLASSPATH 显示：

```
.:/usr/share/java/mysql.jar:/usr/share/java/mysql-connector-java.jar:/usr/share/java/mysql.jar:/usr/share/java/mysql-connector-java.jar:/usr/share/java/mysql-5.1.10.jar:/usr/share/java/mysql-connector-java-5.1.10.jar 
```

在 /usr/share/java 我有：

```
drwxr-xr-x   3 root root   4096 2012-05-25 02:01 .
drwxr-xr-x 316 root root  12288 2012-05-24 21:21 ..
-rwxrwxrwx   1 root root 448964 2009-11-23 22:38 gnome-java-bridge.jar
-rwxrwxrwx   1 root root   2621 2010-03-05 04:16 libintl.jar
lrwxrwxrwx   1 root root     31 2012-05-25 02:01 mysql-5.1.10.jar -> mysql-connector-java-5.1.10.jar
-rwxrwxrwx   1 root root 754057 2010-01-26 08:02 mysql-connector-java-5.1.10.jar
lrwxrwxrwx   1 root root     31 2012-05-25 02:01 mysql-connector-java.jar -> mysql-connector-java-5.1.10.jar
lrwxrwxrwx   1 root root     16 2012-05-25 02:01 mysql.jar -> mysql-5.1.10.jar 
```

这是总是将异常消息抛出到输出文件的代码：

```
try {
    try {
        Class.forName("com.mysql.jdbc.Driver");     
        outyyy.write("Class loaded \n");
    }
    catch (ClassNotFoundException e) {
        outyyy.write("Class not found! \n");
        outyyy.write(e.getMessage() + " \n");
    }

    this._connection = DriverManager.getConnection(url, this._user, this._pass);
    this._isConnected = true;
}
catch (Exception e) {
    this._isConnected = false;
} 
```

我不确定它是否相关，但我可以使用 PHP 访问和查询数据库。

非常感谢任何帮助。

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T16:59:08.417

设置类路径

```
export CLASSPATH=$CLASSPATH:/usr/share/java/mysql-connector-java.jar 
```

来源： http: [//marksman.wordpress.com/2009/03/01/setting-up-mysqljdbc-driver-on-ubuntu/](http://marksman.wordpress.com/2009/03/01/setting-up-mysqljdbc-driver-on-ubuntu/)

# linq - 基于用户输入构建动态 linq 查询

> ID：10750680
> 
> 赞同：2
> 
> 时间：2012-05-25T07:58:53.063
> 
> 标签：linq, entity-framework

我在项目中使用动态 linq，但不知道如何根据参数运行特定查询。下面的示例显示了用于运行 3 个单独查询的动态 linq，其中用户输入了过滤器表达式或过滤器和排序表达式等。不使用 if 语句来检查 I（这看起来不正确且混乱，因为我可能会得到很多 if涵盖许多不同排列的语句）我不确定如何动态生成语句。这可能吗？我正在针对实体框架运行此查询。

```
context.Users.AsQueryable().Where(filterExpression)
context.Users.AsQueryable().Where(filterExpression).OrderBy(sortExpression)
context.Users.AsQueryable()Take(10).Where(filterExpression).OrderBy(sortExpression) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:01:42.033

这应该只使用表达式树来实现，或者可以使用 if..else 子句

[如何：使用表达式树构建动态查询（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

# ruby - 无法安装 gem 'twitter-bootstrap-rails'

> ID：10750689
> 
> 赞同：2
> 
> 时间：2012-05-25T07:59:36.697
> 
> 标签：ruby, rubygems, gem, twitter-bootstrap

尝试捆绑安装时出现错误。我在空项目中遇到同样的错误。

```
 Installing libv8 (3.3.10.4) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    C:/Ruby192/bin/ruby.exe extconf.rb
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.

  Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Ruby192/bin/ruby
    Checking for Python...Unable to build libv8: Python not found!

    Gem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/libv8-3.3
 .10.4 for inspection.
   Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/libv8-3.3.10.4/ext/libv8/g
  em_make.out
   An error occured while installing libv8 (3.3.10.4), and Bundler cannot continue.

    Make sure that `gem install libv8 -v '3.3.10.4'` succeeds before bundling. 
```

这是我的 Gemfile：来源 'https://rubygems.org'

```
 gem 'rails', '3.2.2'
  gem 'bootstrap-sass', '2.0.0'
  # Bundle edge Rails instead:
  # gem 'rails', :git => 'git://github.com/rails/rails.git'
   gem'devise'

  gem 'mysql2'

group :deployment do
 gem 'pg'
end 
```

宝石'活跃商人'

```
Gems used only for assets and not required 
```

默认在生产环境中。group :assets do gem 'twitter-bootstrap-rails' gem 'sass-rails', '~> 3.2.3' gem 'coffee-rails', '~> 3.2.1'

```
# See https://github.com/sstephenson/execjs#readme for more supported runtimes 
```

# gem 'therubyracer'

```
 gem 'uglifier', '>= 1.0.3'
end

  gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:58:25.160

libv8 需要安装 Python 并将其添加到 Windows 路径。

*   脚步
    *   下载并安装[Python27](http://www.python.org/getit/releases/2.7/)
    *   右键单击计算机 -> 属性 -> 高级设置 -> 环境变量
    *   在“系统变量”下找到路径并选择编辑
    *   添加“c:\Python26;”

注意：我必须重新启动 Aptana 才能识别新的 Python 路径。

# android - 如何在膨胀视图上获取 OnClick 事件

> ID：10750691
> 
> 赞同：1
> 
> 时间：2012-05-25T07:59:46.517
> 
> 标签：android, events, inflate, android-inflate

我从 xml 膨胀视图并将其添加到布局中：

```
View header = LayoutInflater.from(this).inflate(R.layout.lenta_parent_item,(FrameLayout)findViewById(R.id.frameContent), false);
header.setOnClickListener(new OnClickListener() {

        public void onClick(View header) {
            ...some code
        }
    }); 
```

主要布局xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:id="@+id/frameContent">
<view ....

</FrameLayout> 
```

当我运行我的应用程序时，我可以看到这个视图（“标题”），但是当我点击它时没有任何反应。事件只是没有被触发。我该怎么做才能为我的视图获取点击事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:09:33.480

我不清楚你的概念，你到底想点击发布你的完整 xml 代码。

```
View header ;
LayoutInflater inflater= LayoutInflater.from(this);
header=inflater.inflate(R.layout.lenta_parent_item,null, false); 
```

我想你试图点击 customExapandablelistview 权利，然后尝试这样。

```
PinnedHeaderExpListView listviewpinned=(PinnedHeaderExpListView )header.findViewbyId(R.id.list);
    listviewpinned.setOnItemClickListener(new OnClickListener() {

        public void onClick(View header) {
            ...some code
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:04:26.340

我建议您设置`android:clickable="false"`FrameLayout 中包含的所有视图，并设置`android:clickable="true"`FrameLayout 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:05:47.910

用这个。

```
View header = getLayoutInflater().inflate(R.layout.lenta_parent_item, null);
 header.setOnClickListener(new OnClickListener() {

    public void onClick(View view) {
        ...some code
    }
}); 
```

# hadoop - hadoop 流式获取最佳插槽数

> ID：10750694
> 
> 赞同：0
> 
> 时间：2012-05-25T08:00:04.483
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我有一个流式 map-reduce 工作。我有大约 30 个插槽用于处理。最初我得到一个包含 60 条记录的输入文件（字段以制表符分隔），每条记录的第一个字段是一个数字，第一个记录号（第一个字段）是 1，第二个记录号（第一个字段）是 2，依此类推. 我想从这些记录中创建 30 个文件以进行下一步处理，每个文件都包含 2 条记录（均匀分布）。

为此，我将 hadoop 作业的 reducer 数量指定为 30。我预计第一个字段将用作键，我将获得 30 个输出文件，每个输出文件包含 2 条记录。

我确实得到了 30 个输出文件，但并非所有文件都包含相同数量的记录。有些文件甚至是空的（零大小）。任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:56:40.313

默认情况下，Hadoop suffle 并将 Map 任务输出组合为 Reducer 输入。因此具有相同键值的 Map 输出集映射到相同的 reducer。因此通过这样做，一些 reducer 可能没有输入集，所以说 part-00005 文件的大小0 KB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:45:03.003

你的输出键类型是什么？如果您使用的是 Text 而不是 IntWritable （我假设您必须像使用流式传输一样），则减少数是根据字节表示的哈希值计算的，即键值的 UTF-8“字符串”。您可以编写一个简单的单元测试来观察这一点：

```
public class TextHashTest {
    @Test
    public void testHash() {
        int partitions = 30;
        for (int x = 0; x < 100; x++) {
            int hash = new Text(String.valueOf(x)).hashCode();
            int part = hash % partitions;
            System.err.printf("%d = %d => %d\n", x, hash, part);            
        }
    }
} 
```

我不会粘贴输出，但在 100 个值中，分区箱 0-7 永远不会收到任何值。

因此，就像*Thomas Jungblut*在他的评论中所说，您需要编写一个自定义分区器将 Text 值转换回整数值，然后将该数字与分区总数取模 - 但这可能仍然不会给您“偶数”如果值本身不在 1-up 序列中，则分布（你说它们是这样的，所以你应该没问题）

```
public class IntTextPartitioner implements Partitioner<Text, Text> {
    public void configure(JobConf job) {}

    public int getPartition(Text key, Text value, int numPartitions) {
        return Integer.valueOf(key.toString()) % numPartitions;
    }            
} 
```

# postgresql - pgsql返回表错误：列引用不明确

> ID：10750707
> 
> 赞同：7
> 
> 时间：2012-05-25T08:01:20.473
> 
> 标签：postgresql, function, return, plpgsql

我不断收到此错误：列引用“人”不明确。

我需要返回一个 TABLE（个人整数）。当我使用 SETOF 整数时它工作正常，但在这种情况下它不起作用。我的另一个函数 recurse() 很好地返回了一组整数。

```
CREATE OR REPLACE FUNCTION try(_group text) RETURNS TABLE (person integer) AS $$ 
DECLARE
     _init_id integer;
     _record integer;
BEGIN
     SELECT id INTO _init_id FROM egroups WHERE name = _group;

    FOR _record in SELECT person FROM egroupdata WHERE egroup IN (SELECT recurse(_init_id))
    LOOP
        RETURN NEXT;
    END LOOP;

END;
$$ language plpgsql stable; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-25T08:39:49.353

不明确的列引用是由于存在不止一个可用的同名列。在这种情况下，我想这是返回一张桌子的怪癖。尝试将查询更改为：

```
SELECT egroupdata.person FROM egroupdata WHERE egroup IN (SELECT recurse(_init_id)) 
```

这将消除列引用的歧义。

# android - AsyncTask doInBackground() 中的多级函数调用导致“Activity has leaked window”崩溃！为什么？

> ID：10750709
> 
> 赞同：0
> 
> 时间：2012-05-25T08:01:29.473
> 
> 标签：android, android-asynctask

我有一个简单的 AsyncTask，它的 doInBackground() 调用了一个函数 fn1，而 fn1 又简单地调用了另一个 fn2。结果是“活动已泄漏窗口”崩溃！当我直接从 doInBackground() 调用 fn2 时，一切正常。这是否意味着在一个线程中不能有超过 1 级的 fn 调用？( Thread-> fn1->fn2)

我是 Java 和 android 的新手，所以如果这是一个基本问题，请多多包涵！谢谢。

我的代码算法是这样的：

**我的活动：**

```
MyLibrary myLib;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.myXML);

    myLib = new MyLibrary(MyActivity.this);
    new myTask().execute();

}

private class myTask extends AsyncTask<Void, Void, Void> 
{

    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(MyActivity.this, "", "Fetching Data...");
    }
    @Override
    protected Void doInBackground(Void... params) {

            myLib.fn1();        
            return null;

    }

    @Override
    protected void onPostExecute(Void result) {

        progressDialog.dismiss();
    }
} 
```

**我的图书馆 ：**

```
Context ctx;
String iVar;

public MyLibrary(Context context){
    this.ctx = context;
}

public void fn1()
{

  fn2();
  Log.d("TAG", "Function 1";
}

public void fn2()
{
   iVar = "100"; 
   Log.d("TAG", "Function 2";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:11:41.357

在 Activity 的代码中添加以下内容：

```
@Override
protected void onPause() {
    super.onPause();

    if(progressDialog != null)
        progressDialog.dismiss();
} 
```

如果您离开活动，它将关闭对话框窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:05:49.837

通常，当您引用的 Activity 已从 ActivityStack 顶部删除时，会发生此错误。您应该真正检查 AsyncTask 是否正确嵌入到您的 Activity 生命周期中。

最好的祝愿，蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:11:25.023

不知何故 ProgressDialog 可能在嵌套函数调用期间崩溃了。

# javascript - jquery自定义过滤器不起作用

> ID：10750711
> 
> 赞同：2
> 
> 时间：2012-05-25T08:01:44.047
> 
> 标签：javascript, jquery

过滤器本身非常简单：

```
$.expr[':'].valid = function(a) {
    var phone = a.value.replace(/\D/g,''),
        phonesub = phone.substr(0, 2);
    return (phonesub == '79' || phonesub == '89') && phone.length == 11 
} 
```

我只想检查`phone`长度是否为 11 并且它以`79`or开头`89`。然而：

```
$(":valid")
[<input type=​"text" id=​"phone1" name=​"phone1" value>​] 
```

很明显 value 是 ""。

为什么我的过滤器不起作用？

顺便说一句，与此同时，DOM 上还有另一个输入：

```
<input type="text" id="phone2" name="phone2" value="" disabled=""> 
```

并且它没有被过滤器匹配。是否受到影响`disabled`？

让我们改变它的价值：

```
$("#phone2")
[<input type=​"text" id=​"phone2" name=​"phone2" value disabled>​]
$("#phone2").val("79111111111")
[<input type=​"text" id=​"phone2" name=​"phone2" value disabled>​]
$("#phone2").val()
"79111111111"
$(":valid")
[<input type=​"text" id=​"phone1" name=​"phone1" value>​] 
```

我很绝望

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:53:33.547

因为“有效”它在 jQuery 中保留的过滤器名称。使用“validPhone”或其他名称代替“valid”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:21:46.410

因为`a`是一个 dom 元素，你应该写

```
a.value.replace(/\D/g,''), 
```

或者

```
$(a).val().replace(/\D/g,''), 
```

# c# - ASP MVC4 - 传递列表以通过视图模型查看

> ID：10750718
> 
> 赞同：4
> 
> 时间：2012-05-25T08:02:34.573
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

我有一个模型 Person （其中包括出生日期），我想将所有人的列表以及每个人的计算年龄传递给视图

为此：

1.  视图模型

    ```
    public class vm_PersonList
    {
        public Person Person { get; set; } 
        public int age { get; set; }
    } 
    ```

2.  控制器动作：

    ```
    public ActionResult PersonList()
    {
        ViewBag.Message = "My List";

        var list = new List<vm_PersonList>();
        var list_p = new vm_PersonList();

        foreach (var p in db.Person)
        {
            list_p.Person = p;
            //the age will be calculated based on p.birthDay, not relevant for the    
            //current question
            list_p.age = 23;

            list.Add(list_p);
        }
        return View(list);
    } 
    ```

3.  风景

    ```
    @model List<programname.Viewmodels.vm_PersonList>

    @foreach (var p in Model)
    {
        <tr>
            <td>
                @p.Person.FullName
            </td>
            <td>
                @p.age
            </td>  
        </tr>
    } 
    ```

Person 表包含例如 6 个条目。调试应用程序时，我看到：

在控制器操作“列表”的末尾正确包含 6 个不同的人员条目

在视图中，“模型”包含 6 个条目，但是最后一个“数据库条目”的 6 倍。有没有人有解决这个问题的建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T08:06:45.757

您`list_p`在循环中一遍又一遍地使用相同的实例。因此，您不断更新其 Person 属性。由于`Person`是引用类型，因此您正在修改内存中的相同引用。在循环的最后一次迭代中，您显然将这个引用替换为 Person 的最后一个实例，这解释了为什么您在视图中看到的是同一个人。

像这样尝试，似乎更容易：

```
public ActionResult PersonList()
{
    ViewBag.Message = "My List";
    var model = db.Person.Select(p => new vm_PersonList
    {
        Person = p,
        age = 23
    }).ToList();
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:07:58.973

您正在处理 vm_PersonList 的同一个实例。将 vm_PersonList 的实例化移动到循环中

```
foreach (var p in db.Person)
{
    var list_p = new vm_PersonList();
    list_p.Person = p;
    //the age will be calculated based on p.birthDay, not relevant for the    
    //current question
    list_p.age = 23;

    list.Add(list_p);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:10:26.610

`list_p`这是您的实例范围的问题。尝试将您的控制器代码更改为：

```
public ActionResult PersonList()
{
    ViewBag.Message = "My List";

    var list = db.Person
        .Select(p => new vm_PersonList
                     {
                         Person = p,
                         age = 23,
                     })
        .ToList();

    return View(list);
} 
```

# javascript - Windows 小工具上下文菜单

> ID：10750721
> 
> 赞同：0
> 
> 时间：2012-05-25T08:02:52.067
> 
> 标签：javascript, silverlight, sidebar, windows-desktop-gadgets

我的小工具应用程序在显示标准小工具上下文菜单时遇到问题。由于silverlight控件引起的问题，当我单击右键Silverlight控件处理上下文菜单事件时。

所以首先我的解决方案是放在silverlight control transprent web control (table)之上。那么这样我就得到了很好的工作小工具上下文菜单，而不是工作的silverlight控件。所以下一步就是让透明的web控件不可见并处理oncontextmenu。像这样。

HTML

```
<body oncontextmenu="ContextMenu();" onload="init();" > 
```

JavaScript

```
ContextMenu()
{
var vis = document.getElementById('overlapControl').style.visibility;
if (vis == "hidden") {
    document.getElementById('overlapControl').style.visibility = "visible";
    window.event.returnValue = false;
} 
```

它正在处理一些故障。您需要进行两次右键单击，以及一些隐藏透明控件的事件。第二个问题不大，我可以使用 onmouseover 事件来隐藏控件。但是第一个是脖子上的真正疼痛。似乎没有办法一键显示上下文菜单。

任何想法如何使它工作。或者其他更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:12:07.910

你试过无窗模式吗？[这](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2008/02/07/how-to-handle-rightclick-mouse-event-in-silverlight.aspx)是一个更复杂的例子，但应该给你一些想法。

# django - 可加载/可卸载的 django 应用程序

> ID：10750722
> 
> 赞同：0
> 
> 时间：2012-05-25T08:02:55.213
> 
> 标签：django, plugins, pluggable

我想制作一个可以将其他应用程序作为插件处理的应用程序，用户可以随时下载和加载/卸载。我阅读了所有的 django 文档，除了手动安装应用程序并执行同步数据库之外，似乎没有合适的方法来执行此操作，并且无法卸载。

我想做的一个很好的例子可能是 wordpress 插件。我想为我的 django 项目提供类似的东西，用户可以随时加载和卸载的可下载“插件”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:08:18.083

我不认为这是可能的。当它的 *cgi 进程启动时， Django 只加载它的所有`.py`文件一次。因此，要更新您的`urls.py`或`models.py`需要重新启动 cgi，我认为您不想让您的用户这样做。:-)

# java - 在 Java 中抑制 NTLM 身份验证

> ID：10750723
> 
> 赞同：1
> 
> 时间：2012-05-25T08:02:55.687
> 
> 标签：java, ntlm, urlconnection

我目前正在对一个 Web 应用程序进行渗透测试，并遇到了一个有趣的现象。在我的测试过程中，我使用代理收集了 URL。现在我想测试我的 URL 列表是否可以匿名访问，所以我写了这个小工具

```
 public static void main(String[] args) {
    try {
        TrustAllCerts.disableCertChecks();
        FileReader fr = new FileReader(new File("urls.txt"));
        BufferedReader br = new BufferedReader(fr);

        String urlStr = br.readLine();
        while (urlStr != null) {
            if (urlStr.trim().length() > 0) {
                URL url = new URL(urlStr);

                HttpsURLConnection urlc = (HttpsURLConnection) url.openConnection();
                urlc.connect();
                if (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    System.out.println(urlStr);

                } else {
                    System.out.println("["+urlc.getResponseCode()+"] "+urlStr);
                }
                urlc.disconnect();
            }
            urlStr = br.readLine();
        }
        br.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

它基本上什么都不做，只是在给定的 URL 上打开一个 URL 连接并测试 HTTP 响应代码（实际上我实现了更多测试，如果我被重定向到登录页面）。然而，问题是，这个特定的应用程序（一些自定义的 MS SQL Server 报告服务）被配置为使用 NTLM WWW 身份验证。如果我尝试使用 Firefox 访问某些 URL，我会得到 401 Unauthorized + login dlg。Internet Exploder 在后台执行 NTLM 身份验证并授予访问权限。似乎 Java URLConnection（或 URL）类也是如此，因为我没有收到 401。有没有办法在 Java 中禁用隐式 NTLM 身份验证？这对我来说是一个糟糕的陷阱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:11:34.400

我认为[Java 网络文档](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html)是最好的资源。设置`http.auth.preference="basic"`应该得到你想要的。假设您不需要摘要或其他东西。我不确定您是否可以超越这一点来禁用 NTLM。

要考虑的另一件事是其他 Java HTTP 客户端实现，例如 Apache 或 Google 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:15:06.970

我不确定这会有所帮助，但我被相反的情况难住了。

我*希望*进行 NTLM 身份验证，所以在我的本地机器上我使用了一个名为 CNTLM 的免费应用程序。它是一个本地代理服务器，将转发（和 NT 身份验证）传入请求。适用于不能使用 NTLM 代理的应用程序。

对不起，我知道这不能回答你的问题，但也许它对那里的人有帮助！:)

# java - 全屏的可能性？

> ID：10750727
> 
> 赞同：0
> 
> 时间：2012-05-25T08:03:13.657
> 
> 标签：java, swing, awt, jpanel, fullscreen

我发现很难将我的 JPanel 转换为 lwjgl 全屏显示器？关于您需要更改的内容是否有其他方法或指南：

这就是我目前所说的：

```
public void TowerDefence() {
    setLayout(new GridLayout(1, 1, 0, 0));

    Window window = new Window(this);
    add(window);

    setVisible(true);
} 
```

这就是初始化 JPanel 的方法：

```
public Window(Frame frame) {
    frame.addMouseListener(new KeyHandler());
    frame.addMouseMotionListener(new KeyHandler());

    thread.start();
} 
```

我只需要在这个构造函数内部进行更改吗？为了全屏工作需要添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:24:50.693

请参阅教程中有关[全屏独占模式 API](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:35:12.580

尝试这个：

```
frame.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

# c# - 如何使用 C# 在 Crystal Report 中输入多个数据库的登录信息？

> ID：10750729
> 
> 赞同：0
> 
> 时间：2012-05-25T08:03:35.157
> 
> 标签：c#, crystal-reports

在这里，我使用以下代码在加载 Crystal Report 时输入单个数据库的登录详细信息。

```
rpt.Load(reportPath);
ConnectionInfo connectionInfo = new ConnectionInfo();
connectionInfo.DatabaseName = "Northwind";
connectionInfo.UserID = "user";
connectionInfo.Password="user123";
SetDBLogonForReport(connectionInfo,rpt);
CrystalReportViewer1.ReportSource = rpt;

 private void SetDBLogonForReport(ConnectionInfo connectionInfo, ReportDocument reportDocument)
{
    Tables tables = reportDocument.Database.Tables;
    foreach (CrystalDecisions.CrystalReports.Engine.Table table in tables)
    {
        TableLogOnInfo tableLogonInfo = table.LogOnInfo;
        tableLogonInfo.ConnectionInfo = connectionInfo;
        table.ApplyLogOnInfo(tableLogonInfo);
    }
} 
```

但是我如何在此代码中输入 2 个数据库的名称及其登录详细信息以加载 Crystal Report...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:38:59.013

`SetDBLogonForReport`检查_`If (reportDocument.Database.Tables.Item(i).Name == "TableName")`

然后申请

```
tableLogonInfo.ConnectionInfo.ServerName = "AltetrnativeName"
tableLogonInfo.ConnectionInfo.DatabaseName= "AltetrnativeDBName"
tableLogonInfo.ConnectionInfo.ReportUser= "AltetrnativeUser"
tableLogonInfo.ConnectionInfo.Password= "AltetrnativePsw" 
```

如果没有，则使用您传递的 connectionInfo 。这是为了解释的目的，您也可以将 AlternativeConnectionInfo 作为参数传递。

这种方式允许您通过表格将任意数量的 BD 连接到您的报告。

如果不清楚请告诉我。我很乐意以更详细的方式解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:47:25.463

从您的帖子中，我添加了一些示例代码

```
rpt.Load(reportPath);
ConnectionInfo connectionInfo = new ConnectionInfo();
connectionInfo.DatabaseName = "Northwind";
connectionInfo.UserID = "user";
connectionInfo.Password="user123";

ConnectionInfo altConnectionInfo = new ConnectionInfo(); 
altConnectionInfo.DatabaseName = "altDataBase";
altConnectionInfo.UserID = "atlUser";
altConnectionInfo.Password="123user123";

SetDBLogonForReport(connectionInfo, altConnectionInfo, rpt);
CrystalReportViewer1.ReportSource = rpt;

 private void SetDBLogonForReport(ConnectionInfo connectionInfo, ConnectionInfo altConnectionInfo ReportDocument reportDocument)
{
    Tables tables = reportDocument.Database.Tables;
    foreach (CrystalDecisions.CrystalReports.Engine.Table table in tables)
    {
        TableLogOnInfo tableLogonInfo = table.LogOnInfo;
        //you can add as much tables as you want but associated with the same connectionInfo
        if (table.Name == "SomeTable") { tableLogonInfo.ConnectionInfo = altConnectionInfo; }
        //if you have multiple connections, you could even use switch structure depending on the table name.
        else { tableLogonInfo.ConnectionInfo = connectionInfo; }
        //unfortunately, this uses table name property, so you must specify any table name depending on the connection you want to associate with.  

        table.ApplyLogOnInfo(tableLogonInfo);
    }
} 
```

要使用 Crystal Report，SetDBLogonForReport 允许您向每个表添加一个 connectionInfo。这就是 CR 的工作方式。我无法找到另一种方法（我不喜欢使用硬编码表名）

希望这可以帮助！

# c++ - 二维对象数组 C++

> ID：10750731
> 
> 赞同：0
> 
> 时间：2012-05-25T08:03:46.903
> 
> 标签：c++, arrays, object, 2d

我制作了这个方法，它为坐标创建了一个二维数组，并将对象（物品、宝藏、敌人）放置在随机位置。我想创建一个新方法来接收当前的 Player 对象（这样我就可以保留当前的 ​​hp、stats、points）并在随机位置生成一组坐标和对象。

```
void Game::newGame() {
    srand(time(0));

    int count = 0;
    int row = 0;
    int col = 0;

    Room* newRoom = new Room;
    room = newRoom;
    m_alive = true;

    for(int i = 0; i < rows; i++) {
        for(int j = 0; j < cols; j++) {
            room->aRoom[i][j] = NULL;
        }
    }

    //spawn player at 0,0
    room->aRoom[0][0] = new Player("Lemmiwinks", rand()%9+11, rand()%6+7, rand()%6+7);
    m_player = room->aRoom[0][0];
    room->currentRow = 0;
    room->currentCol = 0;
    printMoves();

    //spawn boss
    room->aRoom[rand()%rows][cols-1] = new Boss("Demon Lord", rand()%9 + 10, rand()%7 + 8, rand()%7 + 8);

    //spawn meat cleaver
    count = 0;
    while(count < 1) {
        row = rand()%rows;
        col = rand()%cols;
        if (room->aRoom[row][col] == NULL) {
            room->aRoom[row][col] = new Item("Rusty Shank", 0, 3, 1);
            count++;
        }
    }

    //spawn barrel lid
    count = 0;
    while(count < 1) {
        row = rand()%rows;
        col = rand()%cols;
        if (room->aRoom[row][col] == NULL) {
            room->aRoom[row][col] = new Item("Barrel Lid", 0, 1, 3);
            count++;
        }
    }

    //place potion at random loc
    count = 0;
    while(count < 2) {
        row = rand()%rows;
        col = rand()%cols;
        if (room->aRoom[row][col] == NULL) {
            room->aRoom[row][col] = new Item("Potion", 10, 0, 0);
            count++;
        }
    }   

    //place 5 enemies at random loc
    count = 0;
    while(count < 5) {
        row = rand()%rows;
        col = rand()%cols;
        if (room->aRoom[row][col] == NULL) {
            room->aRoom[row][col] = new Enemy("Demon", rand()%5 + 5, rand()%4 + 4, rand()%4 + 4);
            count++;
        }
    }

    //place 5 treasures at random loc
    count = 0;
    while(count < 5) {
        row = rand()%rows;
        col = rand()%cols;
        if (room->aRoom[row][col] == NULL) {
            room->aRoom[row][col] = new Treasure("Artifact", rand()%5 + 5);
            count++;
        }
    }

    cout << "\n---Stats---" << endl;
    m_player->printEntity();

} 
```

有什么办法可以欺骗这个方法并传入一个玩家对象，这样我就可以在新地图上重用同一个玩家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:13:41.837

不确定这是否是您所追求的，但应该这样做：

```
void Game::newGame() {

...
    if (!m_player) {
        m_player = new Player("Lemmiwinks", rand()%9+11, rand()%6+7, rand()%6+7);
    }
    room->aRoom[0][0] = m_player; 
...
}

void Room::clear(Item* player) {
    for(int i = 0; i < rows; i++) {
        for(int j = 0; j < cols; j++) {
            if (room->aRoom[i][j] != player) {
                delete room->aRoom[i][j];
            }
            room->aRoom[i][j] = NULL;
        }
    }
} 
```

我会考虑为您的游戏对象使用智能指针。也许您已经是，但我无法从您的示例代码中看出。

您总是可以重新构建您的程序并简单地拥有一个游戏对象列表，每个对象都包含其坐标。这将避免在游戏逻辑的其余部分中对可能较大的二维数组进行迭代。还可能避免您将遇到的许多双重派遣。

# java - Android - BufferedOutputStream 不刷新

> ID：10750733
> 
> 赞同：1
> 
> 时间：2012-05-25T08:03:51.593
> 
> 标签：java, android, networking, flush, bufferedoutputstream

我对 BufferedOutputStream 有疑问。我想通过套接字连接将 kml 文件从 Android 设备发送到 java 服务器。（连接正常，我已经能够在我的程序的其他部分与 PrintWriter 交换数据）

为了发送我的 kml 文件，我填充了缓冲区。但是当我刷新（）它时，什么也没有发生。

```
 int lu = inFile.read();
        while(lu != -1){
            out.write(lu);
            lu = inFile.read();
        }
        out.flush();
        inFile.close(); 
```

inFile 是我用来读取 kml 文件的流 out 是我的 BufferedOutputStream 使用我的套接字的 OutputStream

我没有关闭我的对象，但我不想，我不只使用一次。这就是问题所在…… close() 方法发送缓冲区的数据，但也关闭了套接字。flush() 方法不发送缓冲区的数据。

我想在不关闭套接字的情况下刷新缓冲区。

我也尝试使用 mySocket.shutdownOutput();

```
 int lu = inFile.read();
        while(lu != -1){
            out.write(lu);
            lu = inFile.read();
        }
        out.flush();
        mySocket.shutdownOutput();
        inFile.close(); 
```

这个方法关闭我的流并保持我的套接字打开，这就是我想要的。但是当我尝试打开一个新的输出流时，异常 java.net.SocketException: Socket output is shutdown

那么，如何在不关闭我的 sokcet 的情况下刷新我的缓冲区无法打开新的输出流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:18:22.327

`Socket.close()`并且`Socket.shutdownOutput()`都向对等方发送一个 EOS，他应该关闭套接字，之后你不能再写入套接字，因为你已经在那个方向关闭了它。

因此，如果您需要继续写入套接字，则不能使用这些方法中的任何一种。

可能您正在搜索的是一种分隔应用程序协议消息的方法。至少有三种技术：

1.  在每条消息之前发送一个长度字。
2.  在每条消息之后发送一个带外分隔符，即消息中不能出现的字节或字节序列。带有转义的 STX/ETX 协议就是一个例子。
3.  使用自描述消息格式，例如对象序列化或 XML。STX/ETX 也是一个例子。

# c# - 在 C# 中解析列表达式

> ID：10750734
> 
> 赞同：0
> 
> 时间：2012-05-25T08:03:58.707
> 
> 标签：c#, .net

我正在尝试解析`DataTable`in的列表达式`ADO.NET`并识别其中包含的一组依赖列名。

例子：

A`DataTable`有 3 列`Unit Price`，`Quantity`和`BreakEven`。

我们可以通过列表达式导出两个额外的列。

```
[Total Sale Value] = “IIF([Unit Price] > 0, [Unit Price] * Quantity, 0)”
[Profit or Loss Indication] = “IIF([Total Sale Value]> BreakEven, ‘Profit’, ‘Loss’)” 
```

当我手动解析 [Total Sale Value] 的列表达式时，我希望能够选择 [Unit Price] 和“Quantity”作为其中包含的一组源列。

此外，当我解析 的列表达式时`[Profit or Loss Indication]`，我希望能够选择 [ `Total Sale Value`] 和 “<code>BreakEven” 作为其中包含的一组源列。

据我所知，尽管 .net 框架有自己的解析列表达式的机制，但它并没有通过公共类和方法公开任何功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:47:18.630

如果你想成为超级 hacky，你可以这样做：

```
public static class DataColumnExtensions
{
    private static readonly Assembly DataAssembly = Assembly.GetAssembly(typeof(DataTable));

    public static bool DependsOn(this DataColumn thisColumn, DataColumn otherColumn)
    {
        if (string.IsNullOrEmpty(thisColumn.Expression))
        {
            return false;
        }

        var dataExpression = DataAssembly.CreateInstance(
            "System.Data.DataExpression",
            false,
            BindingFlags.Default | BindingFlags.CreateInstance | BindingFlags.Instance | BindingFlags.NonPublic,
            null,
            new object[] { thisColumn.Table, thisColumn.Expression, thisColumn.DataType },
            null,
            null);

        var dependsOnMethod = dataExpression.GetType().GetMethod("DependsOn", BindingFlags.NonPublic | BindingFlags.Instance);

        var result = (bool)dependsOnMethod.Invoke(dataExpression, new object[] { otherColumn });

        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:43:39.627

这很复杂——我认为唯一可靠的方法是复制.NET Framework 代码，即内部System.Data.DataExpression 类，然后是ExpressionNode 等相关类。

# javascript - 在javascript中关闭多个窗口

> ID：10750735
> 
> 赞同：0
> 
> 时间：2012-05-25T08:04:08.710
> 
> 标签：javascript, javascript-events

我在javascript中使用window.open打开多个窗口，弹出窗口打开同一个应用程序，现在我想在关闭任何打开的窗口时关闭多个窗口，我使用数组来存储窗口对象，问题是我仅在最后一个打开的窗口上获取更新的数组，而不是在之前打开的窗口上，所以当我关闭最后一个窗口时，它会关闭所有窗口，但是当我打开中间的任何窗口时，它不会关闭所有窗口，因为更新的数组页面上不存在。

有什么方法可以关闭所有窗口以获取前几页上的更新数组，我已经通过网络搜索但无法找到解决方案。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:29:08.337

如果您从同一页面打开多个窗口（比如说 master.html），那么您可以在 master.html 中维护数组对象，并通过链接的单击事件或在打开的每个窗口上不断更新数组对象$(document).ready() 子窗口的事件。您可以将子页面中 master.html 的数组对象引用为 Parent.arrWindow[Parent.mCounter++]（假设 arrWindow 是数组对象，mCounter 是 master.html 中定义的计数器变量）。现在在任何子页面的关闭事件中，您可以引用相同的数组对象并关闭所有其他子窗口。希望我已经正确理解您的问题并解决了它。

您可以使用以下 javascript 代码作为参考：

```
<script type="text/javascript">
    var abcd = "Hello";
    var myParent = null;

    function openWindow(){
        window.open("anypage.html");
    }

    $(document).ready( function () {
        myParent = window.opener;
        while(myParent != null || myParent != undefined) {
            alert(myParent.abcd);
            myParent = myParent.opener;
        }
    });
</script> 
```

HTML 代码：

```
<input type="button" id="btnWindowOpener" value="Click Me" onclick="openWindow();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:18:02.323

我不知道您为什么需要此功能，但无论您的应用程序需要什么，我认为打开多个弹出窗口都不是一个合适的解决方案。我认为你需要找到另一种方法来解决你的问题。我建议使用[jQuery 对话框](http://docs.jquery.com/UI/Dialog)插件，然后你可以很容易地关闭所有打开的对话框。

# c# - ASP.Net 维护按钮单击事件的对象列表

> ID：10750738
> 
> 赞同：1
> 
> 时间：2012-05-25T08:04:20.207
> 
> 标签：c#, asp.net

我正在创建一个从 (SQL) Visual Studio 数据库文件 (.mdf) 加载数据的 asp.net 页面。

数据被加载到包含从数据库获得的用户数据的用户对象列表 (List) 中。然后，此数据将显示在 ASP.net 表中，并在第一列中带有一个复选框。这允许查看网页的人在理论上通过复选框选择用户。

我在同一页面上也有一个 ASP.net 按钮，单击该按钮将导致回发并通过表格行并正确识别哪些行已检查和未检查。此时我能够获取用户数据，因为 Page_Load 事件被触发并且数据库内容被第二次重新加载。

显然，获取每个 Page_Load 上的完整用户列表可能会变得非常昂贵，因此我开始使用 IsPostBack 变量进行调查，该变量允许我确定是按钮单击还是标准页面加载。

我在使用 IsPostBack 时遇到的问题是，在初始 Page_Load 事件中加载到 List 中的数据库内容现在将等于 null，因为永远不会发生对数据库的调用。这是可以理解的预期行为，我的问题是保留列表内容的最佳方法是什么，以便单击按钮可以访问在初始 Page_Load 上从数据库加载的数据，而无需执行另一个数据库查询？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:14:09.760

如果它不是您要获取的用户特定数据，请将其存储在缓存中。

[Asp.net 缓存](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx)

如果它使用特定的数据将其存储在会话中。

[会议](http://msdn.microsoft.com/en-us/library/ms972429.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:12:31.327

我建议缓存数据库中的结果，然后像往常一样进行绑定。还有其他选项，例如将其存储在 ViewState 中，但这可能会导致更大的页面大小，具体取决于数据（我个人不是 ViewState 的粉丝，但它是一个选项）。

归根结底，您需要一定数量的数据才能使页面正常工作，您无法避免以某种方式存储和检索这些数据，因此归结为决定什么是最可维护的（和预期的）方式，没有不可接受的权衡。在我看来，这将缓存数据库结果，但这实际上取决于应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:13:48.627

在你的类中保留一个私有变量怎么样？

```
private List<myObject> _data = null;

private void Page_Load(object sender, System.EventArgs e)
{
    if(!Page.IsPostBack)                        
    {
        _data = loadDataFromDb();
    }
}

private void Button_Click()
{
    if(_data != null)
       //Do something with the data
} 
```

-更新：我认为您可以通过这种方式避免回发，因此您只需加载一次数据。

# jira - 如何使用 Jira 高级查询或 JQL 列出大多数链接问题

> ID：10750741
> 
> 赞同：0
> 
> 时间：2012-05-25T08:04:31.317
> 
> 标签：jira

我试图找出返回前 10 个链接问题的查询。我知道有 linkedIssues(issueKey,linkType) 但它适用于每个呼叫的单个问题键。

是否有类似下面的调用，（所以 sql 没有防错）

从linkedIssues(issue.id) order by linkedIssues(issue.id) desc的问题中选择issue.id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T21:06:12.983

是的，您可以使用 SQL 执行此操作。表 issuelink 是一个包含“source”、“destination”和“linktype”列的关系表。下面的 SQL 查询将返回具有目标链接引用的所有问题。

```
SELECT I.id, I.pkey, count(*) AS LinkCount 
FROM jiraissue I 
JOIN issuelink L on L.DESTINATION = I.ID
JOIN issuelinktype LT on LT.ID = L.LINKTYPE
WHERE LT.LINKNAME in ('Blocks', 'Cloners', 'Duplicate', 'Relates')
GROUP BY I.id, I.pkey
ORDER BY LinkCount DESC 
```

# javascript - 特定持续时间的自动翻转选项卡

> ID：10750743
> 
> 赞同：0
> 
> 时间：2012-05-25T08:04:51.847
> 
> 标签：javascript, jquery

全部

我正在为我的项目使用这个翻转标签。

这是 js 小提琴链接：http: [//jsfiddle.net/ajaypatel_aj/XbhUW/1/](http://jsfiddle.net/ajaypatel_aj/XbhUW/1/)

js代码

```
$('document').ready(function(){
$('#flip-container').quickFlip();

$('#flip-navigation li a').each(function(){
    $(this).click(function(){
        $('#flip-navigation li').each(function(){
            $(this).removeClass('selected');
        });
        $(this).parent().addClass('selected');
        var flipid=$(this).attr('id').substr(4);
        $('#flip-container').quickFlipper('', flipid, 1);

        return false;
    });
}); 
```

});​</p>

我尝试了以下代码：

```
 $('document').ready(function(){
        $('#flip-container').quickFlip();

        $('#flip-navigation li a').each(function(){
            $(this).delay(800)(function(){
                $('#flip-navigation li').each(function(){
                    $(this).removeClass('selected');
                });
                $(this).parent().addClass('selected');
                var flipid=$(this).attr('id').substr(4);
                $('#flip-container').quickFlipper('', flipid, 1);

                return false;
            });
        });
    });​ 
```

但这对我不起作用。我想要的是自动翻转 1000 毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:34:31.423

这将起作用

```
$('document').ready(function(){
    $('#flip-container').quickFlip();

    $('#flip-navigation li a').each(function(){
        $(this).click(function(){
            $('#flip-navigation li').each(function(){
                $(this).removeClass('selected');
            });
            $(this).parent().addClass('selected');
            var flipid=$(this).attr('id').substr(4);
            $('#flip-container').quickFlipper('', flipid, 1);

            return false;
        });
    });

    var id = 0;
    function autoFlip(){
        $('#flip-navigation li a:eq('+id+')').click();
        id++;
        if (id > 2) id=0;
    }
    setInterval(autoFlip, 1000);
}); 
```

# php - 如何在没有数组搜索的情况下从php中的数组中删除一个元素？

> ID：10750747
> 
> 赞同：1
> 
> 时间：2012-05-25T08:05:14.607
> 
> 标签：php

从php中的数组中删除一个元素而不`array_search`

我想从数组中删除一个数组元素，但我不知道该`key`元素的数组只有值是已知的

可以通过`array_search`带值，首先找到密钥然后使用`unset`

是否有任何内置的数组函数来删除具有数组值的数组元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:10:04.940

您只能通过引用此 KEY 从数组中删除元素。所以你必须以某种方式得到这个 KEY。从数组中获取搜索值的键的`array_search()`函数正是返回给定值的键的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:12:59.050

示例显示了一种无需使用 array_search() 即可执行此操作的方法

```
$myArray = array(5, 4, 3, 2, 1, 0, -1, -2); 
$knownValue = 3;

$myArray = array_filter(
               $myArray, 
               function($value) use ($knownValue) {
                   return $value !== $knownValue; 
               }
           ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:13:57.847

任何必须*“删除具有数组值的数组元素”的*函数都必须对每个*元素执行循环以查找要删除的值。因此，您不妨添加自己的`for`循环来执行此操作，或者`array_search()`为您执行此操作。

数组具有键的原因是您可以使用该键有效地获取值。

**实际上，一旦找到它，您就会停止循环，而不是继续寻找，除非可能有重复项要删除*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:16:02.307

唯一不使用的有效情况`array_search`是如果您想取消设置多个值。不过，您仍然需要使用密钥。我建议您遍历数组并删除符合您的条件的字段。

```
foreach($array as $key => $value) {
    if($value === $deleteValue)
        unset($array[$key]);
} 
```

# javascript - window.onbeforeunload 未在 Layout.cshtml 中触发

> ID：10750748
> 
> 赞同：0
> 
> 时间：2012-05-25T08:05:34.000
> 
> 标签：javascript, asp.net-mvc-3

布局.cshtml：

```
 window.onbeforeunload = function () {
            alert("navigating away");
        }; 
```

不开枪，你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:10:17.287

你不应该`alert`在[`onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)函数内部做任何事情。您应该返回一个字符串：

```
<script type="text/javascript">
    window.onbeforeunload = function () {
        return "navigating away";
    };
</script> 
```

此字符串将呈现给用户的方式取决于用户代理。你完全无法控制它。但在大多数情况下，它会显示为确认弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:22:58.730

正如达林所说，你**只能**返回一个字符串。

调用onbeforeunload时，会将handler的返回值作为window.event.returnValue，然后将返回值解析为字符串（除非为null） False解析为字符串，会触发对话框，会触发然后传递适当的真/假。

无法将 false 分配给 onbeforeunload。

# ios - 线索如何获取所有已安装 iOS 应用程序的列表？

> ID：10750750
> 
> 赞同：2
> 
> 时间：2012-05-25T08:05:45.697
> 
> 标签：ios, ipc, sandbox

我刚刚[在 iOS 上安装了 BitDefender 的 Clueful](http://itunes.apple.com/us/app/clueful/id512467899?mt=8)。此应用程序会扫描我 iPhone 上所有已安装的应用程序。

鉴于 iOS 将所有应用程序数据沙箱化，而我的应用程序无法访问其他已安装的应用程序，那么 Clueful 是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:11:17.507

BitDefender 仅检查已安装应用程序的[URL 方案](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)是否存在。

您可以通过以下方式检查已安装的应用程序是否支持 URL：

```
if ([[UIApplication sharedApplication] canOpenURL:[url absoluteURL]]) {
    //Your code
} 
```

这是一个包含许多已知 URL 方案的[Wiki](http://wiki.akosma.com/IPhone_URL_Schemes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:12:16.397

您可以获得正在运行的进程的列表（请看[这里](https://stackoverflow.com/questions/8275578/how-to-get-information-about-free-memory-and-running-processes-in-an-app-store-a)的示例）及其名称。为了获得图像和真实的应用程序名称，您必须在某些服务器上匹配它们（该服务器存储包含产品及其进程名称的列表）。

# blackberry - Titanium SDK 是否支持 BlackBerry？

> ID：10750752
> 
> 赞同：1
> 
> 时间：2012-05-25T08:05:49.080
> 
> 标签：blackberry, titanium, titanium-mobile

谁能告诉我Titanium SDK是否支持Blackberry。其实我浏览了很多网站。我按照安装程序进行了安装，但安装后我在 Titanium 中找不到任何 BB 插件。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:32:13.940

目前，它仅适用于可以访问测试版的付费用户。

然而，他们已经宣布（[http://thinkmobile.appcelerator.com/press-releases/bid/142950/Appcelerator-s-300-000-Worldwide-Developers-to-Gain-Application-Support-on-Blackberry-10-平台](http://thinkmobile.appcelerator.com/press-releases/bid/142950/Appcelerator-s-300-000-Worldwide-Developers-to-Gain-Application-Support-on-Blackberry-10-Platform)）他们将支持黑莓10。但你必须等待它。

除此之外，不支持黑莓。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:07:47.490

我认为他们为它提供了付费支持，并且黑莓仍处于测试阶段。

# ruby - Jekyll Liquid - 动态访问 _config.yml

> ID：10750755
> 
> 赞同：3
> 
> 时间：2012-05-25T08:05:58.040
> 
> 标签：ruby, jekyll, liquid

为了使我的应用程序国际化，我需要能够动态访问 YAML 文件中的条目。

最好用一个例子来解释：

**页：**

```
---
layout: default
title: title_homepage
--- 
```

这将允许访问默认布局模板中的 title_homepage 变量：

**默认布局：**

page.title = "title_homepage"

现在通常我会像这样访问我的 _config.yml 文件：

```
{{ site.locales[site.default_locale].variable }} 
```

但是，现在要使其正常工作，我需要使用 page.title 的值访问 _config.yml。这将不起作用：

```
{{ site.locales[site.default_locale].page.title }} 
```

我需要以下（伪代码）：

```
{{ site.locales[site.default_locale].#{value of page.title}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:08:40.443

通过设置变量的方式，它将类似于以下内容

```
{{ site.locales[site.default_locale][page.title] }} 
```

问题是，*......我真的不明白这样做的意义*。假设您的页面是英文页面。然后应该在页面中定义语言环境，您的标题也应该定义！

```
---
locale: en
title: My Wonderful Page
--- 
```

您可以使用`{{ page.title }}`...检索

将标题放入`_config.yml`文件有什么意义？

（编辑）好吧，除非您想`page.title`在另一个页面/帖子中访问，在这种情况下，您别无选择，只能将其放入`_config.yml`.

# sharepoint - 使用 Powershell 升级 WSP

> ID：10750759
> 
> 赞同：1
> 
> 时间：2012-05-25T08:06:30.877
> 
> 标签：sharepoint, powershell, sharepoint-2010

我已经运行了`Update-SPSolution`我猜测的命令，因为我没有返回错误。但是，我在 WSP 文件中的额外功能不会显示在网站集功能中。

我从来没有真正升级过一个解决方案，我总是把它全部收回，然后重新安装。这可能是由于我缺乏理解，我曾与之共事的几个人告诉我升级可能是粗略的。

为什么我的收藏功能中没有显示额外功能？

升级解决方案是否只替换WSP文件，然后需要再次运行安装命令？

如果有人能指出一些体面的文章，将不胜感激。

我已经设法通过重新运行 install solution powershell 命令来安装该功能，它似乎已经奏效了！

然而，这是最佳实践吗？我目前看不到这样做有任何不利影响！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T23:11:50.253

您需要在 Update-Solution 之后运行 Install-SPFeature 命令来安装新添加的功能。[http://technet.microsoft.com/en-us/library/ff607825](http://technet.microsoft.com/en-us/library/ff607825)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T22:59:31.850

From my experience I use Update-SPSolution only when I need to deploy an updated dll for the whole existing solution (wsp). If you updated other files or added a new feature then these changes will not be available, as update doesn’t instantiate manifest file to make your new feature available.

To "really" update solution you need to write an "UpgradeActions" as described here.

[http://msdn.microsoft.com/en-us/library/ee535723.aspx](http://msdn.microsoft.com/en-us/library/ee535723.aspx)

# sql - SQL 备份版本与此服务器不兼容

> ID：10750763
> 
> 赞同：4
> 
> 时间：2012-05-25T08:06:47.523
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

当我尝试将数据库备份还原到客户 SQL Server 2008 时，我收到以下消息。

> System.Data.SqlClient.SqlError：数据库备份在运行版本 10.50.1600 的服务器上。该版本与运行版本 10.00.4064 的此服务器不兼容。

我已经备份了数据库并在版本为 10.50.1600 的服务器上恢复，然后一旦我完成我的开发工作，我就备份了它，但现在它不会在客户服务器 10.00.4064 上恢复。

我现在有什么选择？有没有办法恢复这个？我可以将数据导入或导出到客户服务器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:38:26.187

基本上您需要手动完成，并且无法恢复。因此，您需要执行以下操作：

1.  选项 1：使用它工作的 SQL Management Studio 的开发版本编写整个数据库（表、视图、索引、过程、函数、数据……），您也可以使用 Aqua Data Studio 等其他一些工具来执行此操作。然后只需在客户端服务器上运行 sql 脚本，整个事情就会在那里重新创建
2.  选项2：在客户端服务器上设置一个 sql2008r2 无论如何都是免费的开发版，然后只需使用导出 GUI 将其传输到实际服务器

我更喜欢 Option1，因为我认为它有点“干净”

# mysql - 我的fedora中有tomcat吗？

> ID：10750766
> 
> 赞同：0
> 
> 时间：2012-05-25T08:07:01.343
> 
> 标签：mysql, apache, tomcat, webserver, fedora

我被要求实现 jsp 文件并给出有关如何设置所有 mysql、tomcat 和所有的说明。

我确实遵循了一切，但是当我打开时`http://localhost`什么也没发生。连接浏览器页面的唯一错误。我假设我的网络服务器有问题并且仍然没有启动。

在指令中，我被要求运行此命令以检查它是否已启动：

```
ps –ef | grep tomcat 
```

这个例子表明我想得到这样的东西：

[http://tinyurl.com/7yvmm9q](http://tinyurl.com/7yvmm9q)

但我只得到了这个：

```
root       2319 2297 0 15:58/0 00:00:00 tomcat 
```

我没有得到我应该在给出的例子中得到的其余行。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:13:43.443

我首先检查tomcat是否监听80端口。您可以通过键入找到它`lsof -i`- 在这里您将看到 tomcat 是否正在侦听任何端口。

# opengl - 如何获得平滑的阴影？

> ID：10750767
> 
> 赞同：0
> 
> 时间：2012-05-25T08:07:05.510
> 
> 标签：opengl, xtk

使用[XTK](https://github.com/xtk/X#readme)，我尝试加载 STL 文件。阴影不平滑。我需要做哪些修改才能获得平滑的阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:55:17.773

XTK 不会重新计算法线（还）。由于 .STL 只有面法线，没有顶点法线，所以不会平滑

您可以将模型转换为支持顶点法线的 .vtk 文件。

此外，欢迎您提供法线计算代码:) 对于自由冲浪者网格，法线会重新计算，因此所有部分都应该在那里

# java - 用于java的马拉地语正则表达式

> ID：10750769
> 
> 赞同：1
> 
> 时间：2012-05-25T08:07:12.433
> 
> 标签：java, android, regex

我想通过使用`Regular-Expression`我的字符串是否包含任何马拉地语字母来检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:26:29.650

用于`\p{BlockName}`匹配指定 Unicode 块中的字符。要获取您的语言的块名称，请查看：[Character.UnicodeBlock](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.UnicodeBlock.html)

可能`\p{InDevaganari}`是你需要的。

您可以通过循环示例文本来检查字符类型，并使用它`Character.UnicodeBlock.of(int codePoint)`来查看字符的代码块。

请注意，您必须使用`-encoding utf8`选项（例如`javac -encoding utf8 Main.java`）编译您的文件。而且您必须将所有输入流设置为使用 UTF8 编码。

# maven - Maven3.0.3 + artifactory 2.5 + ubuntu 11.10 无法解析依赖

> ID：10750777
> 
> 赞同：1
> 
> 时间：2012-05-25T08:07:43.263
> 
> 标签：maven, maven-3

我只是在使用 maven + artifactory 时遇到了这个奇怪的问题。我有一个项目，我首先使用 maven-compiler 2.3.2 和 maven2 构建。它构建成功，我能够在 artifatory 2.5 中进行部署。

最终我添加了几个模块，其中一个需要使用 maven-compiler-plugin 2.4，这也需要我安装 maven3，否则我会遇到几个错误。所以我的应用程序再次运行。

但是当我在一台新机器上结帐并且 maven 编译时，我得到了 ff 错误：

```
Could not resolve dependencies for project com.xxxjar:0.0.1-SNAPSHOT: Failed to collect depend
encies for <list of jars>. Failure to find <snapshot> in <repo> was cached in the local repository, resolution will not be reattempted until the update interval of <repo> has elapsed or updates are forced. 
```

奇怪的是，当我从我第一次使用 maven2 开发的第一台机器上继承我的 m2 目录时，它编译没有错误。很明显maven3错过了一些设置或jar？

此外，我尝试将我的快照存储库“maven 快照版本”设置设置为唯一，如其他论坛所述。我还尝试了几乎所有可以在工件存储库设置中配置的可能组合。

我的 pom.xml 分发设置：

```
<distributionManagement>
    <!-- <repository>
        <id>release</id>
        <name>xx</name>
        <url>xx-repo-release</url>
    </repository> -->
    <snapshotRepository>
        <id>snapshots</id>
        <name>xx</name>
        <url>xx-snapshots</url>
    </snapshotRepository>
</distributionManagement> 
```

附加信息：当我在另一台机器上运行安装时，我有：

```
2012-05-25 17:21:32,316 [pool-1-thread-3] [WARN ] (o.a.e.DownloadServiceImpl:343) - Sending HTTP error code 409: The repository 'xx-repo-release' rejected the artifact 'xx-repo-release:com/xx/xx/0.0.1-SNAPSHOT/xx-0.0.1-SNAPSHOT.pom' due to its snapshot/release handling policy..
2012-05-25 17:21:32,342 [pool-1-thread-13] [WARN ] (o.a.e.DownloadServiceImpl:343) - Sending HTTP error code 409: The repository 'xx-repo-release' rejected the artifact 'xx-repo-release:com/xx/xx/0.0.1-SNAPSHOT/xx-0.0.1-SNAPSHOT.pom' due to its snapshot/release handling policy..
2012-05-25 17:21:32,350 [pool-1-thread-7] [WARN ] (o.a.e.DownloadServiceImpl:343) - Sending HTTP error code 409: The repository 'libs-release-local' rejected the artifact 'libs-release-local:com/xx/xx/0.0.1-SNAPSHOT/xx-0.0.1-SNAPSHOT.pom' due to its snapshot/release handling policy.. 
```

两台机器的 settings.xml 相同。还有相同版本的maven。为什么指向释放？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:52:59.217

我认为另一种解决方案可能是运行以下命令： mvn clean install -U

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:28:49.970

问题是依赖问题。我有一个模型模块，它位于父 pom 项目下。虽然我能够在远程存储库中部署模型模块，但我忘记部署它的父模块，这会导致问题。

解决方案：[http ://czetsuya-tech.blogspot.com/2012/05/could-not-resolve-dependencies-for.html](http://czetsuya-tech.blogspot.com/2012/05/could-not-resolve-dependencies-for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T01:38:06.630

我指出了一个人工制品 3.1.1.1 安装，并且在声明 log4j:log4j:1.2.17 的依赖项的项目中存在上述问题。

当在 GAVC 搜索中查找对工件的依赖时，仅在 jcenter-cache 存储库中出现 pom。

我的解决方案是运行以​​下命令：

mvn 干净安装 -U

之后，再次使用 GAVC 查找 log4j:log4j:1.2.17，现在出现在一个罐子里。当然在我的笔记本电脑上 $HOME/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar 被下载了。

感谢 mike.tihonchik。

# eclipse - 在 Ubuntu 12.04 中卸载和重新安装 Eclipse

> ID：10750781
> 
> 赞同：0
> 
> 时间：2012-05-25T08:07:53.403
> 
> 标签：eclipse, ubuntu

我在 Ubuntu 12.04 中手动安装了 Eclipse，然后简单地删除了放置 Eclipse 的文件夹并从 Ubuntu 应用程序商店重新安装。

当我尝试更新我的新安装时，我收到以下错误。

如何进行干净的安装和重新安装？

卸载会话上下文时出错：(profile=PlatformProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Uninstall,operand=[R]org.eclipse.platform_root 3.7.2.dist-9nF7UHagFqn9pElwWhC90gLz- soEuSGYmtSeiRH --> null, action=org.eclipse.equinox.internal.p2.touchpoint.natives.actions.CleanupzipAction)。文件 /usr/lib/eclipse/.eclipseproduct 的备份失败。无法删除复制到备份的文件：/usr/lib/eclipse/.eclipseproduct

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:13:03.993

也许尝试以root身份删除文件/usr/lib/eclipse/.eclipseproduct？

```
sudo rm  /usr/lib/eclipse/.eclipseproduct 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:14:17.863

我将使用 Ubuntu 的卸载程序将其删除（根据需要手动删除），然后安装从 eclipse.org 下载的 Eclipse。我从不使用 Linux 发行版附带的 Eclipse。

# c# - SetLocalTime 通过远程调试给出错误 87

> ID：10750787
> 
> 赞同：0
> 
> 时间：2012-05-25T08:08:16.333
> 
> 标签：c#, remote-debugging, kernel32

我有以下 C# 代码：

```
 public static void SetDateTime(System.DateTime datetime)
    {
        var systemNew = new SystemTime
            {
                wDay = (ushort)datetime.Day,
                wMonth = (ushort)datetime.Month,
                wYear = (ushort)datetime.Year,
                wHour = (ushort)datetime.Hour,
                wMinute = (ushort)datetime.Minute,
                wSecond = (ushort)datetime.Second,
                wMilliseconds = (ushort)datetime.Millisecond
            };

        // update system clock
        NativeMethods.SetLocalTime(ref systemNew);
        int errorCode = Marshal.GetLastWin32Error();
        if (errorCode != 0)
        {
            Debug.WriteLine("SetDateTime error: {0}", errorCode);
        }
    }

internal struct SystemTime
{
    internal ushort wDay;
    internal ushort wDayOfWeek;
    internal ushort wHour;
    internal ushort wMilliseconds;
    internal ushort wMinute;
    internal ushort wMonth;
    internal ushort wSecond;
    internal ushort wYear;
}

internal static class NativeMethods
{
    [DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    internal static extern int SetLocalTime(ref SystemTime lpSystemTime);
} 
```

但是，每次我调用该方法时，这都会给我错误代码 87，有什么想法吗？

编辑：我在我的本地机器上检查了它，它在那里工作正常。 **它不适用于 Visual Studio 中的远程调试，即使远程进程在与我的本地帐户相同的帐户下运行并且它是该系统上的管理员。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:26:19.910

您发布的代码不包含您用来重现错误的任何*值。*`datetime`

例如`DateTime.Year`，属性的值可以在 1 到 9999 之间（参见[此处](http://msdn.microsoft.com/en-us/library/system.datetime.year.aspx)）。另一方面， 的`wYear`字段`SYSTEMTIME`可以在 1601 和 30827 之间。

因此，我建议您首先验证您用作输入的输入结构的*旧值*`SetLocalTime`。

**更新**：在我看来，我现在知道问题的根源了。您`SystemTime`将**错误的字段顺序**定义为：

```
internal struct SystemTime
{
    internal ushort wDay;
    internal ushort wDayOfWeek;
    internal ushort wHour;
    internal ushort wMilliseconds;
    internal ushort wMinute;
    internal ushort wMonth;
    internal ushort wSecond;
    internal ushort wYear;
} 
```

但[SYSTEMTIME](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)定义为

```
typedef struct _SYSTEMTIME {
  WORD wYear;
  WORD wMonth;
  WORD wDayOfWeek;
  WORD wDay;
  WORD wHour;
  WORD wMinute;
  WORD wSecond;
  WORD wMilliseconds;
} SYSTEMTIME, *PSYSTEMTIME; 
```

# java - final ArrayList 是什么意思？

> ID：10750791
> 
> 赞同：73
> 
> 时间：2012-05-25T08:08:22.373
> 
> 标签：java, arraylist, final

通过使 ArrayList（或其他集合）最终化，我们可以获得哪些优点/缺点？我仍然可以向 ArrayList 添加新元素、删除元素并对其进行更新。但是最终的效果是什么？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-05-25T08:10:01.340

> 但是最终的效果是什么？

这意味着您不能重新绑定变量以指向不同的*集合实例*：

```
final List<Integer> list = new ArrayList<Integer>();
list = new ArrayList<Integer>(); // Since `list' is final, this won't compile 
```

作为风格问题，我将大多数我不打算更改的引用声明为`final`.

> 我仍然可以向 ArrayList 添加新元素、删除元素并对其进行更新。

如果您愿意，可以使用以下方法防止插入、移除等[`Collections.unmodifiableList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)：

```
final List<Integer> list = Collections.unmodifiableList(new ArrayList<Integer>(...)); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-25T08:10:42.417

这只是意味着您不能重新分配其参考。尝试执行以下操作将导致编译器错误。

```
final List<String> list = new ArrayList<String>();

list = new LinkedList<String>();
     ^
     Compiler error here 
```

如果你真的想要一个不可变的列表，你应该使用该`Collections.unmodifiableList()`方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-25T08:11:16.707

例如，您将无法修改其引用`new ArrayList`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-25T08:19:21.230

制作变量`final`可确保您在分配后无法重新分配该对象引用。正如您提到的，您仍然可以使用该列表方法进行更改。

如果您将`final`关键字与[Collections.unmodifiableList](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)的使用结合起来，您将获得您可能试图实现的行为，例如：

```
final List fixedList = Collections.unmodifiableList(someList); 
```

`fixedList`这导致无法更改指向的列表。但是请注意，它仍然可以通过`someList`引用进行更改（因此请确保在此分配之后它超出范围。）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-27T23:01:21.023

`final`在多线程下有很多后果。

1.  JMM 明确定义了一个`final`字段的初始化完成是有保证的。

没有明确定义的是：

1.  编译器可以自由地跨内存屏障重新排序它们。
2.  编译器总是可以读取缓存的副本。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-25T08:15:09.173

正如您正确观察到的那样，它不会影响您可以使用 ArrayList 做什么 - ArrayList 本身仍然是可变的。您刚刚使引用不可变。

但是制作变量 final 确实有其他好处：

*   如果期望变量保持不变，它可以防止变量被更改。这可以帮助防止未来的错误。
*   制作变量`final`可以帮助编译器进行某些性能优化。

一般来说，你使不可变的东西越多越好。因此，使引用成为最终引用（即使它们是对可变对象的引用）通常是一个好主意。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-25T08:13:15.133

> final是Java中的关键字或保留字，可以应用于Java中的成员变量、方法、类和局部变量。一旦你做了一个最终引用，你就不能改变那个引用，如果你尝试在 java 中重新初始化最终变量，编译器将验证这一点并引发编译错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-25T08:17:56.610

正如 aix 所说，您不能将其重新绑定到不同的集合。

示例：结合不可变列表实现，您可以获得可以公开的安全成员。

示例：当您依赖该引用不会更改时，您需要 final。例如，在同步场景中就是如此。

可能还有更多的例子。如果您根本不打算更改引用，则将成员声明为 final 是一种很好的风格。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-18T03:06:10.370

我想到了同样的问题，并编码和示例以从另一个角度添加到解释中。

> 最终的arrayList仍然可以修改，参考下面的示例并运行它自己看看。

**这是具有不可变 List 声明的不可变类：**

```
public final class ImmutableClassWithArrayList {
 final List<String> theFinalListVar = new ArrayList<String>();
} 
```

**这是驱动程序：**

```
public class ImmutableClassWithArrayListTester {
public static void main(String[] args) {
    ImmutableClassWithArrayList immClass = new ImmutableClassWithArrayList();
    immClass.theFinalListVar.add("name");
    immClass.theFinalListVar.forEach(str -> System.out.println(str));
 }
} 
```

> 如您所见，主要方法是添加（修改）列表。所以唯一要注意的是，对集合类型对象的“引用”不能重新分配给另一个这样的对象。正如上面 adarshr 的回答，你不能做 immClass.theFinalListVar = new ArrayList(); 在这里的主要方法中。

修改部分确实帮助我理解了这一点，并希望它以同样的方式有所帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-27T07:13:03.417

要获得一个真正不可变的列表，您必须对列表的内容进行深度复制。UnmodifiableList 只会使引用列表有些不可变。现在，随着大小的增加，制作 List 或数组的深层副本将很难占用内存。您可以利用序列化/反序列化并将数组/列表的深层副本存储到临时文件中。setter 将不可用，因为成员变量需要是不可变的。getter 会将成员变量序列化到文件中，然后对其进行反序列化以获取深层副本。序列化具有进入对象树深处的先天性质。不过，这将以一定的性能成本确保完全不变。

```
 package com.home.immutable.serial;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.List;

public final class ImmutableBySerial {

    private final int num;
    private final String str;
    private final ArrayList<TestObjSerial> immutableList;

    ImmutableBySerial(int num, String str, ArrayList<TestObjSerial> list){
        this.num = num;
        this.str = str;
        this.immutableList = getDeepCloned(list);
    }

    public int getNum(){
        return num;
    }

    public String getStr(){
        return str;
    }

    public ArrayList<TestObjSerial> getImmutableList(){
        return getDeepCloned(immutableList);
    }

    private ArrayList<TestObjSerial> getDeepCloned(ArrayList<TestObjSerial> list){
        FileOutputStream fos = null;
        ObjectOutputStream oos = null;
        FileInputStream fis = null;
        ObjectInputStream ois = null;
        ArrayList<TestObjSerial> clonedObj = null;
        try {
             fos = new FileOutputStream(new File("temp"));
             oos = new ObjectOutputStream(fos);
             oos.writeObject(list);
             fis = new FileInputStream(new File("temp"));
             ois = new ObjectInputStream(fis);
             clonedObj = (ArrayList<TestObjSerial>)ois.readObject();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            try {
                oos.close();
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return clonedObj;
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-15T02:22:34.360

我个人标记了我的类的集合字段，`final`以使我的类的用户免于检查它是否为空。这是有效的，因为一旦该值已经分配给最终变量，它就永远不能重新分配给另一个值，包括 null。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-12T19:26:47.823

如果我们将 ArrayList 声明为 final，我们仍然可以向它添加元素，但我们不能重新分配它。

```
final ArrayList<String> list = new ArrayList<>();
        list.add("abc"); //allowed
        list.add("pqr"); //allowed

list = new ArrayList<>(); // Not allowed 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-06T12:51:06.443

基本上你在这里想要实现的是使列表不可变我猜。但是，当您将列表引用标记为 final 时，这意味着该引用不能指向除此之外的任何其他列表对象。

如果你想要一个最终的（不可变的）ArrayList，请使用 Collections 类的实用方法 Collections.unmodifaibleList(list)。

# ios - 使用 Twitter 凭据预填充模拟器

> ID：10750794
> 
> 赞同：1
> 
> 时间：2012-05-25T08:08:37.933
> 
> 标签：ios, twitter, ios-simulator

有什么方法可以自动将 Twitter 帐户添加到模拟器中？由于各种因素，我经常不得不在模拟器上“重置内容和设置”。这将清除所有 Twitter 帐户信息。然后我必须手动添加多个 Twitter 帐户。这是非常耗时且低效的。

# php - 用图像制作视频

> ID：10750798
> 
> 赞同：0
> 
> 时间：2012-05-25T08:09:04.887
> 
> 标签：php, linux, video

我想允许用户上传一堆图像并按特定顺序排列并创建相同的视频。

是否有一些我需要在我的服务器上安装的脚本或工具可以用来实现上述目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:11:20.047

是的，您可以使用 FFmpeg[从图像序列制作视频。](http://en.wikibooks.org/wiki/FFMPEG_An_Intermediate_Guide/image_sequence)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:12:56.003

您可以使用[ffmpeg.org](http://ffmpeg.org/)，有示例教程[教程](http://electron.mit.edu/~gsteele/ffmpeg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:23:30.523

还有用于 ffmpeg的[PHP API](http://ffmpeg-php.sourceforge.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T09:03:11.847

如果 gif-videos 足够，这也可以使用 ImageMagick。详情可以看[这里](http://www.imagemagick.org/Usage/anim_basics/)。

# python - 在 argparse 中禁用缩写

> ID：10750802
> 
> 赞同：15
> 
> 时间：2012-05-25T08:09:20.500
> 
> 标签：python, argparse

argparse 在明确的情况下使用默认缩写。

我不想要缩写，我想禁用它。但是在[文档中没有找到](http://docs.python.org/library/argparse.html#argument-abbreviations)中没有找到。

可能吗？

**例子：**

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--send', action='store_true')
parser.parse_args(['--se']) # returns Namespace(send=True) 
```

但我希望它仅在提供完整参数时才成立。防止用户出错。

**更新：**

在 Vikas 回答后，我[在 python bugtracker](http://bugs.python.org/issue14910)创建了一张票。而且已经处理好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-02T04:50:29.633

从 Python 3.5.0 开始，您可以通过使用以下命令启动 ArgumentParser 来禁用缩写：

```
parser = argparse.ArgumentParser(allow_abbrev=False) 
```

另请参阅[文档](https://docs.python.org/3.5/library/argparse.html#allow-abbrev)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T08:31:59.023

不，显然这是不可能的。至少在 Python 2.7.2 中。

首先，我查看了文档 - 无济于事。

然后我打开了 Lib\argparse.py 并查看了源代码。省略了很多细节，似乎每个参数都由这样的正则表达式解析（argparse:2152）：

```
 # allow one or more arguments
    elif nargs == ONE_OR_MORE:
        nargs_pattern = '(-*A[A-]*)' 
```

此正则表达式将成功解析“-”和“--”，因此我们无法控制短参数和长参数。其他正则表达式也使用 -* 构造，因此它不依赖于参数的类型（无子参数、1 个子参数等）。

稍后在代码中，双破折号被转换为一个破折号（仅适用于非可选参数），同样，用户无需控制任何标志：

```
 # if this is an optional action, -- is not allowed
    if action.option_strings:
        nargs_pattern = nargs_pattern.replace('-*', '')
        nargs_pattern = nargs_pattern.replace('-', '') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T08:53:39.670

不，不是没有丑陋的黑客。

@Vladimir 发布的代码片段，我想这不是您想要的。这样做的实际代码是：

```
def _get_option_tuples(self, option_string):
    ...
    if option_string.startswith(option_prefix):
    ... 
```

看检查是`startswith`不是`==`。

而且您始终可以扩展`argparse.ArgumentParser`以提供您自己的`_get_option_tuples(self, option_string)`来改变这种行为。我只是通过替换两次出现的`option_string.startswith(option_prefix)`to`option_string == option_prefix`和：

```
>>> parser = my_argparse.MyArgparse
>>> parser = my_argparse.MyArgparse()
>>> parser.add_argument('--send', action='store_true')
_StoreTrueAction(option_strings=['--send'], dest='send', nargs=0, const=True, default=False, type=None, choices=None, help=None, metavar=None)
>>> parser.parse_args(['--se'])
usage: [-h] [--send]
: error: unrecognized arguments: --se 
```

**一个警告**

该方法`_get_option_tuples`以 为前缀`_`，通常表示 python 中的私有方法。覆盖私有也不是一个好主意。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-13T21:52:24.740

Python 2.7 的另一种方式。让我们变得笨拙！假设您要识别`--dog`而不使用缩写。

```
p = argparse.ArgumentParser()
p.add_argument('--dog')
p.add_argument('--dox', help=argparse.SUPPRESS, metavar='IGNORE') 
```

通过添加第二个参数`--dox`，该参数与您仅在第三个字母中想要的参数不同，`--d`并且`--do`变得模棱两可。因此，解析器将拒绝识别它们。您需要添加代码来捕获生成的异常并根据您调用的上下文对其进行处理`parse_args`。您可能还需要抑制/调整帮助文本。

将`help=...`参数保留在默认帮助消息的选项列表之外（根据[this](https://docs.python.org/2/library/argparse.html#help)），`metavar='IGNORE'`只是为了清楚地表明你真的没有对这个选项做任何事情:)。

# c# - 使用 C# 将 Excel 文件导入 Microsoft SQL Server

> ID：10750803
> 
> 赞同：0
> 
> 时间：2012-05-25T08:09:30.017
> 
> 标签：c#, excel, sql-server-2008-r2, import-from-excel

我有一个 C# 程序，我想将 Excel 文件导入 Microsoft SQL Server 2008 R2。

有人可以给我一个链接或教程，我可以完全理解如何做到这一点吗？

我已经这样做了很长时间，我真的不知道如何实现这一点。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:19:10.467

```
string excelConnectionString = @"Provider=Microsoft 
.Jet.OLEDB.4.0;Data Source=Book1.xls;Extended 
Properties=""Excel 8.0;HDR=YES;"""; 
```

`// Create Connection to Excel Workbook`

我们可以像这样将excel导入sql server

`using (OleDbConnection connection = new OleDbConnection(excelConnectionString)){`

`OleDbCommand command = new OleDbCommand ("Select ID,Data FROM [Data$]", connection);`

```
connection.Open(); 

`// Create DbDataReader to Data Worksheet `
using (DbDataReader dr = command.ExecuteReader()) 
{ 
    // SQL Server Connection String 
    string sqlConnectionString = "Data Source=.; 
       Initial Catalog=Test;Integrated Security=True"; 

    // Bulk Copy to SQL Server 
    using (SqlBulkCopy bulkCopy = 
               new SqlBulkCopy(sqlConnectionString)) 
    { 
        bulkCopy.DestinationTableName = "ExcelData"; 
        bulkCopy.WriteToServer(dr); 
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-25T03:33:34.933

此代码也可能对您有所帮助。

```
private void processExcel(string filename)
{
    filename = Server.MapPath("~/Files/WM-0b23-productsBook.xlsx");
    Microsoft.Office.Interop.Excel.Application xlApp;
    Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
    Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

    var missing = System.Reflection.Missing.Value;

    xlApp = new Microsoft.Office.Interop.Excel.Application();
    xlWorkBook = xlApp.Workbooks.Open(filename, false, true, missing, missing, missing, true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, '\t', false, false, 0, false, true, 0);
    xlWorkSheet = (Microsoft.Office.Interop.Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

    Microsoft.Office.Interop.Excel.Range xlRange = xlWorkSheet.UsedRange;
    Array myValues = (Array)xlRange.Cells.Value2;

    int vertical = myValues.GetLength(0);
    int horizontal = myValues.GetLength(1);

    System.Data.DataTable dt = new System.Data.DataTable();

    // must start with index = 1
    // get header information
    for (int i = 1; i <= horizontal; i++)
    {
        dt.Columns.Add(new DataColumn(myValues.GetValue(1, i).ToString()));
    }

    // Get the row information
    for (int a = 2; a <= vertical; a++)
    {
        object[] poop = new object[horizontal];
        for (int b = 1; b <= horizontal; b++)
        {
            poop[b - 1] = myValues.GetValue(a, b);
        }
        DataRow row = dt.NewRow();
        row.ItemArray = poop;
        dt.Rows.Add(row);
    }

    // assign table to default data grid view
    GridView1.DataSource = dt;
    GridView1.DataBind();

    xlWorkBook.Close(true, missing, missing);
    xlApp.Quit();

    releaseObject(xlWorkSheet);
    releaseObject(xlWorkBook);
    releaseObject(xlApp);
}

private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        obj = null;
    }
    catch (Exception ex)
    {
        obj = null;
        MessageBox.Show("Unable to release the Object " + ex.ToString());
    }
    finally
    {
        GC.Collect();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T06:15:02.177

我认为已经给出了最有用的答案。我不打算描述 C# 的方式，而是给你一个不用 C# 的简单方法：

打开您的 MS Access，通过 ODBC 链接您的 MS SQL 数据库，在 Access 中打开您的表并通过复制粘贴将您的 Excel 记录粘贴到那里（预先格式化以匹配表架构。）

当您进行一些一次性数据导入时，这种方式非常快速且有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T08:12:57.970

看看这篇文章：

[使用 C# DataTable 和 SQL server OpenXML 函数批量插入数据](http://www.google.co.in/url?q=http://pranayamr.blogspot.com/2011/12/bulk-insertion-of-data-using-c.html&sa=U&ei=4T6_T96oBpHJrAf01LjeCQ&ved=0CBMQFjAA&usg=AFQjCNFX2TZzcRYtmXA2t3tDPNuU8bRPbQ)

[将数据从 Excel 导入 SQL Server](http://www.codeproject.com/Articles/32581/Import-Data-from-Excel-to-SQL-Server)

# javascript - 更改 div 的类名

> ID：10750805
> 
> 赞同：0
> 
> 时间：2012-05-25T08:09:39.923
> 
> 标签：javascript, prototypejs

在我的页面中，我想在 div id=question 中更改 id 为 answer1 的 div 的类名。我怎样才能做到这一点？谢谢。

```
$('question1 answer1').addClassName('new_name');

<div id="question1">
   <div id="answer1" class="old_name">
   </div>
</div>

<div id="question2">
   <div id="answer2" class="old_name">
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:06:44.570

只需简单地`$('answer1')`为您提供所需的 div 元素的引用。该`$`函数返回具有给定 id 字符串的元素（如果没有找到，则返回 null）。请注意，您在使用时不使用选择器字符串`$`- 它仅对 id 进行操作。

该`$$`函数接受一个 CSS 选择器字符串并返回一个包含所有匹配元素的数组，如果没有匹配则返回一个空数组。如果您想要或需要走这条路，您可以像这样找到相同的 div：

```
$$('#question1 .answer1')[0] 
```

使用上述任一方法获得元素引用后，您可以使用`addClassName`或`removeClassName`或任何其他可用的元素方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:19:10.283

因此，正如已经指出的那样，任何选择器方法都需要某种迭代器，因此您不能只将方法应用于所有返回的对象。您会在文档中注意到`Element.select`，这应该可以减轻必须将对象显式转换为数组的情况，但我在 jsfiddle 上没有运气。但是，我确实尝试了以下方法：

```
 $('answer2').addClassName('new_name'); 
```

​它工作得很好。我不知道问题是否在于您正在尝试遍历原始元素对象中的 DOM（通过使用 question1 answer1），这需要对象/数组迭代器，或者它是否只是代码中其他地方的一个小问题。但是在您的具体示例中，由于您知道要更改其类的实际元素的 id，因此上面的代码应该可以正常工作，而无需指定父元素或使用任何类型的数组索引。

我承认prototypejs让我失望了，因为它们对Element对象使用与Enumerable对象相同的方法名，所以我看到了第一个实例`select`并认为它看起来很简单。现在已经看到几乎每个类/方法都需要您设置一个选择器并转换它或手动遍历它，我肯定会说这会*很多*使用 jquery 更容易，并且在这种情况下，您最初评论它们几乎相同是不正确的。也许 protojs 提供了一些 jquery 没有的功能，也许您的代码与 protojs 相关联（我在一个项目上工作了一年，不得不使用 YUI，这是一个更大的噩梦，相信我），但 jquery 设置为可玩对prototypejs很好，所以在这种情况下，我会考虑同时使用两者。在 jquery 中，代码应该是：

```
jQuery.noConflict();  // Avoids $ fight between jquery and prototypejs
jQuery( '#question1 #answer1' ).addClass('new_name'); 
```

或者，首先删除旧的：

```
jQuery.noConflict();  // Avoids $ fight between jquery and prototypejs
jQuery( '#question1 #answer1' )removeClass('old_name').addClass('new_name'); 
```

此外，prototype 有一个 toggleClass 方法，它可能也是不必要的深奥，但也许你应该阅读： [toggleClassName](http://prototypejs.org/api/element/toggleClassName)

而且我不会因为在这上面浪费时间而生气（因为我不喜欢认为卡在学习新框架上是浪费时间），除了他们的文档虽然很有吸引力，但有我见过的最糟糕的例子见过。他们都假设您有一些基本的想法，而没有一个友好的现实世界示例或超链接到实例和类之间的差异，并且他们区分两者的示例是**相同**的。我今天晚些时候肯定会花一些时间来找到你问题的真正最佳答案，出于恶意和自豪，如果没有别的，但如果真的归结为*每次都*必须迭代器，只需使用 vanilla js 和在实际有用时使用此框架。

# html - 悬停按钮时文本颜色无法更改

> ID：10750807
> 
> 赞同：0
> 
> 时间：2012-05-25T08:09:42.863
> 
> 标签：html, css

当鼠标悬停在按钮上时，我正在尝试更改按钮的文本颜色
**这是*我的[Jsfiddle](http://jsfiddle.net/sureshpattu/yQEQJ/)***

我的 HTML 是

```
<div id="groups_landingpage_contentdiv">        
    <div class="groups_landingpage_contentdiv_image">
        <img src="http://i.imgur.com/F1s05.png" width="150" />
    </div>
    <div class="groups_landingpage_contentdiv_text">
        <h2>Welcome To Rang De Group</h2>
        <p>RDBO conducts free screenings of rare, socially relevant 
           documentaries and films for the general public and corporate audiences.  
            <button class="landingpage_create_group_button">
                <span class="sprite_16x16_group_icon_with_circleback fl mar5"></span>
                <p>Create A Group</p>
            </button>
        </p>
    </div>            
    <div class="clearfloat"> </div>
</div>` 
```

我的 CSS 是

```
.sprite_16x16_group_icon_with_circleback {
    background:transparent url(http://i.imgur.com/On0lt.png) no-repeat 0 0;
    background-position:-250px -524px;
    height:34px;
    width:41px
}

.fl {
    float:left
}

.mar5 {
    margin:5px
}

#groups_landingpage_contentdiv {
    float:left;
    width:727px;
    padding:0 0 20px!important
}

.groups_landingpage_contentdiv_image {
    float:left;
    width:35%;
    padding:25px 0 0 20px
}

.groups_landingpage_contentdiv_text {
    float:left;
    width:55%;
    text-align:justify;
    padding:20px 0 0
}

.groups_landingpage_contentdiv_text h2 {
    color:#628e0e;
    font:11pt/22pt Arial, Helvetica, sans-serif;
    font-weight:600;
    padding:0 0 10px
}

.groups_landingpage_contentdiv_text p {
    color:#404040;
    font:9pt/16pt Arial, Helvetica, sans-serif;
    padding:0
}

.groups_landingpage_contentdiv_text p button.landingpage_create_group_button p {
    font-size:11pt;
    font-weight:600;
    color:#000;
    line-height:18px;
    cursor:pointer;
    text-shadow:1px 1px 0 white;
    padding:9px 0 0!important
}

.landingpage_create_group_button {
    background:#F8F8F8;
    color:black;
    font-weight:bold;
    font-size:10pt;
    border-radius:3px;
    -moz-border-radius:3px;
    -webkit-border-radius:3px;
    line-height:17px;
    cursor:pointer;
    text-shadow:1px 1px 0 white;
    width:200px;
    margin-top:10px;
    padding:0 7px 3px
}

.landingpage_create_group_button:hover {
    background:#9ABA3B;
    color:#fff!important;
    text-shadow:1px 1px 0 #6F862A
}

.landingpage_create_group_button:hover.groups_landingpage_contentdiv_text p button.landingpage_create_group_button p {
    color:#fff!important;
    text-shadow:1px 1px 0 #6F862A
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:26:08.433

首先：你不需要 javascript/jquery ！（请不要这样做，因为这是很多不必要的工作）

你只需要注意[选择器的特殊性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

另外，总是尽量避免`!important`。它旨在清除作者和用户样式表之间的冲突，而不是修复您凌乱的 CSS！

请参阅[此示例](http://jsfiddle.net/yQEQJ/11/)以查看您的代码是否正常工作。

我只是减少了您的初始选择器的特异性：

```
.groups_landingpage_contentdiv_text p button.landingpage_create_group_button p 
```

至

```
.landingpage_create_group_button p 
```

并将您的悬停选择器从

```
.landingpage_create_group_button:hover.groups_landingpage_contentdiv_text p button.landingpage_create_group_button p 
```

（这到底是什么）

```
.landingpage_create_group_button:hover p 
```

一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:16:50.543

因为您的文本在更高的特异性顺序内，所以在您的 css 中添加规则：

[http://jsfiddle.net/yQEQJ/2/](http://jsfiddle.net/yQEQJ/2/)

```
/** This takes effect, overriding the 
    text color inside your button, since its' wrapped in p 
**/
.landingpage_create_group_button:hover.groups_landingpage_contentdiv_text p button.landingpage_create_group_button p
{
    color: #fff !important;
    text-shadow: 1px 1px 0px #6F862A;
}

/** add this rule **/
button.landingpage_create_group_button:hover p {

    color: #fff !important;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:22:03.910

这是 Tats_innit 解决方案的更新。两个改进：

1.  将鼠标悬停在 div 上，但更改 p 的文本
2.  存储旧文本值以防止“信息”重复

[jsfiddle](http://jsfiddle.net/2fBjJ/1/)

```
$(document).ready(function(){
    $('.landingpage_create_group_button').hover(function(){
           if ( ! $(this).data('oldtext') ) $(this).data('oldtext', $('p', this).text()) ;
           $('p', this).text('Changed on mouseover');
    },function(){
        $('p', this).text( $(this).data('oldtext'));
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T08:15:46.223

**工作演示** [http://jsfiddle.net/2fBjJ/](http://jsfiddle.net/2fBjJ/) **或** [http://jsfiddle.net/2fBjJ/4/](http://jsfiddle.net/2fBjJ/4/) (courtsey @NiftyDude)

**文本颜色更改演示** [http://jsfiddle.net/2fBjJ/8/](http://jsfiddle.net/2fBjJ/8/) **或** [http://jsfiddle.net/2fBjJ/10/](http://jsfiddle.net/2fBjJ/10/)

悬停时，您的文本将在按钮中更改，而在鼠标移出时，它将恢复正常。

希望这会有所帮助，如果我错过了什么，请告诉我！

**代码**

```
 $(document).ready(function() {
        $('.landingpage_create_group_button p').hover(function() {

            $(this).text('Changed on mouseover');

        }, function() {
            $(this).text('Create A Groups');
        });
    });​
​ 
```

**代码**

```
$(document).ready(function() {
    $('.landingpage_create_group_button').hover(function() {

        $(this).find('p').text('Changed on mouseover');

    }, function() {
        $(this).find('p').text('Create A Groups');
    });
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T08:17:48.357

要更改 DOM 元素的文本（在您的案例按钮中），您应该使用 javascript。jQuery 非常适合。

**例如：**

```
$(".landingpage_create_group_button").hover(
  function () {
    $(".landingpage_create_group_button > p").html('one');
  }, 
  function () {
    $(".landingpage_create_group_button > p").html('Create A Group');
  }
); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T08:21:17.623

```
$('.landingpage_create_group_button').hover(function() {
    $('p', this).text(function(i, oldText) {
        return oldText == 'Create A Group' ? 'mouse hover' : 'Create A Group';
    });
}); 
```

并改变颜色试试这个CSS：

```
button.landingpage_create_group_button:hover p {
    color: #fff !important;
} 
```

**[演示](http://jsfiddle.net/yQEQJ/8/)**

# linux-kernel - net_device 和 net_device_ops 结构

> ID：10750808
> 
> 赞同：0
> 
> 时间：2012-05-25T08:09:43.253
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux

我想添加一个新的操作，`struct net_device_ops`但我对这类事情真的很陌生，我有点担心从一开始就走错了路。

我添加了这样的操作：

```
static const struct net_device_ops wl_netdev_ops =
{
/* The other operations..
.ndo_clear_stats = clear_stats
}; 
```

从我的角度来看，我不清楚如何从用户空间调用，我通常从

```
/sys/class/net/.../statistics 
```

但是现在我真的不明白我的新操作放在哪里，有人可以帮我讲一个好的教程或链接，我可以在哪里找到一个简单的示例或教程？

在此先感谢，pedr0

[有趣的材料](http://forum.kernelnewbies.org/read.php?12,27482)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:50:22.847

你不能直接调用它。您需要以某种方式将其功能导出到用户空间，例如通过 ioctl、netlink、procfs 条目等。推荐使用哪一种在很大程度上取决于您想要实现的目标。

通常还建议不要像这样更改核心内核结构，即使您不打算分发更改 - 有时内核结构成员的顺序或它的大小很重要，并且内核内部对此有一些假设。我很确定还有其他方法可以做你想做的事。

# html - 如何将图像转换为html？

> ID：10750809
> 
> 赞同：7
> 
> 时间：2012-05-25T08:09:45.897
> 
> 标签：html, image, email, signature

有没有办法将图像转换为图像的`html`等价物，通过将`html`表格分成许多单元格，每个单元格都有特定的背景颜色，就像图像中的像素一样？很像 ASCII 艺术。

我认为这是在电子邮件签名中添加公司徽标的一种方式，而不必担心电子邮件客户端会阻止图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T08:11:34.807

是的，很多人都这样做了：http: [//pgl.yoyo.org/img2html/](http://pgl.yoyo.org/img2html/)就是一个例子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T08:13:54.803

也许您需要的只是将图像转换为 URI 格式。

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

[http://jsfiddle.net/z6FFc/](http://jsfiddle.net/z6FFc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:31:19.497

试试 STYLECampaign 中的“用于电子邮件的图像到 HTML 转换器”。如果我没记错的话，您将获得一个下载链接，以换取您在 stylecampaign.com 上订阅他们的时事通讯。该工具工作正常，具有缩放和压缩功能；这是一篇博客文章[http://bit.ly/Jhf1CK](http://bit.ly/Jhf1CK)和一个解释技巧和缺点的视频指南：[http ://www.youtube.com/watch?v=VSi51yLQFnc](http://www.youtube.com/watch?v=VSi51yLQFnc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:40:26.880

我会告诫不要尝试这种把戏。

使用电子邮件做“聪明”事情的一个简单规则是首先询问“垃圾邮件发送者是否使用相同的技术？”。如果答案是肯定的，您可以确定 ISP 正在使用他们的过滤器来处理包含它的垃圾邮件。

在诱骗图像显示的情况下，无论是使用 base64 技巧还是 pixeldiv，这些技术已被垃圾邮件发送者使用多年，可能会损害您的发送声誉。

如果有问题的公司与收件人有良好的联系，他们会很乐意展示图片。一旦您回复或添加到联系人，许多客户端（如 gmail）将启用图像。此外，使用 DKIM 等技术签署您的标头、使用信誉良好的第三方发件人或支付 ReturnPath 认证费用可以提高您的声誉，从而足以覆盖大多数主要 ISP 的图像屏蔽。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T17:25:06.007

Tom Walsh，是什么让您认为阻止图像的总是 ISP？电子邮件客户端呢？默认情况下，80% 的电子邮件都屏蔽了图像。依靠用户的努力或知识来更改这些设置是一个坏主意。

使用某些服务，例如 Mailchimp，每次发送时都会为您提供一个新的电子邮件地址，因此，您无法添加为安全发件人。上述技术是获取电子邮件列表的好方法，该列表已经双重选择加入，以接收您的电子邮件的半图片版本，以吸引他们下载图像。

该顶部链接有效。我使用的是 JPG，我不确定它接受什么格式。正如你所知，这使得文件比普通的 JPG 大一点。考虑是否值得将其用于更大的图像，但对于电子邮件签名，我认为这是一个不错的用途。我注意到，有时当您回复时，签名会中断......所以......请注意，您最终可能会收到大量`<tr><td>A</td></tr>`

最后警告......如果您的电子邮件签名确实中断并以代码形式结束......请注意顶部链接的默认设置是“arse”因此......一些客户可能会觉得这很冒犯。也许将其更改为您的公司名称。请记住，为这个表格图像创建一个链接将 (a) 花费一些时间，并且 (b) 第二次主要使这个代码膨胀。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-14T09:41:34.673

**终于在PHP、CSS和HTML中完成了一个函数**
最终这个方法应该被认为是Jpeg和Png到Div的转换。

实现这一点的方法包括制作一个 html 元素网格，为每个值设置 RGB 背景颜色。

希望它对来到这里的人有所帮助，我第一次来到这里，只发现了 Base64 转换，与原始 HTML 和 CSS 完全不同。

```
 <?php

// Convert Images to RAW HTML for Bypassing Email Protection, Project by Woke World 2021
// image2div($imagePath, $type, $scale);

echo image2div("test.png","png", 5);

// Custom Function by Woke World @ GitHub
function image2div($imagePath, $type, $scale)
{
if ($type == "png")
{
$resource = imagecreatefrompng('test.png');
}
else
{
$resource = imagecreatefromjpeg('test.jpg');
}
$width = imagesx($resource);
$height = imagesy($resource);
$html_start_1 = '
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
</head>
<body>
<div style="display: grid;';
$cols = 'grid-template-columns: ';
$widths = 1;
while($widths <= $width)
{
   $cols .= "1fr ";
   $widths++;
}
$cols .= "; ";
$rows = 'grid-template-rows: ';
$heights = 1;
while($heights <= $height)
{
   $rows .= "1fr ";
   $heights++;
}
$rows .= "; ";
$html_start_2 = '
  grid-gap: 0px;
  padding: 0px;
  border:0px;
  height: '.$height*$scale.'px;
  width:'.$width*$scale.'px;
  ">';
$blocks = '';
$html_end = '
</div></body></html>';

for($y = 0; $y < $height; $y++) {
  for($x = 0; $x < $width; $x++) {
        $color = imagecolorat($resource, $x, $y);
        $color_rgb = imagecolorsforindex($resource, $color);
        $red = $color_rgb["red"];
        $green = $color_rgb["green"];
        $blue = $color_rgb["blue"];
        $alpha = $color_rgb["alpha"];
        $blocks .= '<div style="background-color: rgb('.$red.','.$green.','.$blue.'); margin:-1px;"></div>';

    }
}

$build = $html_start_1.$cols.$rows.$html_start_2.$blocks.$html_end;
return $build;
}
?> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-12-20T23:42:58.173

尝试转换为 html/css。它比 base64 更紧凑，虽然我还没有尝试过，但它应该可以工作。它使用 css 来创建图像，而不需要任何外部的东西。不要注意顶部，那是完成所有工作的代码所在的地方。注意底部。[https://codepen.io/blazeeboy/pen/bCaLE](https://codepen.io/blazeeboy/pen/bCaLE)

```
no code. just something I have to do to get the post online. 
```

# android - 如何在 SQLite 中使用和调用过程

> ID：10750815
> 
> 赞同：2
> 
> 时间：2012-05-25T08:10:03.680
> 
> 标签：android, database, sqlite

这是示例程序。

```
DROP PROCEDURE IF EXISTS AddEdge; 
DELIMITER | 
CREATE PROCEDURE AddEdge(  
  pSourceName VARCHAR(20), pDestinationName VARCHAR(20), pValue INT  
) 
BEGIN 
  DECLARE vSourceID, vDestinationID, vEdgeID INT; 
  SET vSourceID = ( SELECT NodeID FROM nodes WHERE NodeName = pSourceName ); 
  IF vSourceID IS NULL THEN 
    BEGIN 
      INSERT INTO nodes (NodeName,Total) VALUES (pSourceName,0); 
      SET vSourceID = LAST_INSERT_ID(); 
    END; 
  END IF; 
  SET vDestinationID = ( SELECT NodeID FROM nodes WHERE NodeName = pDestinationName ); 
  IF vDestinationID IS NULL THEN 
    BEGIN 
      INSERT INTO nodes(NodeName, Total)  
      VALUES(pDestinationName,0); 
      SET vDestinationID = LAST_INSERT_ID(); 
    END; 
  END IF; 
  SET vEdgeID = ( SELECT EdgeID FROM edges  
                  WHERE sourceNodeID = vSourceID AND dID = vDestinationID  
                ); 
  IF vEdgeID IS NULL THEN 
    INSERT INTO edges(sourceNodeID,destinationNodeID,value)  
    VALUES(vSourceNodeID,vDestinationID,pValue); 
  ELSE 
    UPDATE edges SET value = pValue   
    WHERE sourceNodeID = vSourceID AND destinationNodeID = vDestinationID; 
  END IF; 
END;  
| 
DELIMITER 
```

如何在 android 中使用的数据库 SQLite 中使用上述过程？实际上，我是处理 android 中的数据库的新手，即 SQLite 中的数据库。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:09:33.053

> 为了实现简单性，SQLite 不得不牺牲一些人认为有用的其他特性，例如高并发、细粒度的访问控制、丰富的内置函数集、存储过程、深奥的 SQL 语言特性、XML 和/或 Java 扩展、TB 或 PB 可扩展性等等。- [sqlite.org](http://www.sqlite.org/whentouse.html)

* * *

但是在这里您可以找到一些解决方法：[向 SQLite 添加存储过程](http://chriswolf.heroku.com/articles/2011/01/26/adding-stored-procedures-to-sqlite)

# facebook-graph-api - 如何获取特定地点的所有签到用户？

> ID：10750822
> 
> 赞同：1
> 
> 时间：2012-05-25T08:10:42.730
> 
> 标签：facebook-graph-api, checkin

我需要为我的应用程序（不是 facebook 应用程序）内的特定位置（由我拥有）的所有签入 facebook 用户详细信息实现逻辑。

如果任何用户签入我的位置，Facebook 是否提供任何工具来访问我的应用程序的 URL？

或者

是否有任何 facebook api 来获取实例上的所有签入用户？

谢谢

# android - SQLite 数据库外部附加

> ID：10750826
> 
> 赞同：0
> 
> 时间：2012-05-25T08:11:03.760
> 
> 标签：android, android-layout, sqlite

我有一个扩展名为 .s3db 的数据库文件，它是使用 SQLite Administrator 创建的。我想用我的 android 应用程序连接到数据库。我已将我的数据库放在资产文件夹中。打开数据库需要写什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:39:56.943

**以下是一些完整的教程，展示了访问存储在assets**文件夹中的数据库的分步过程：

* * *

[使用现有的sqlite-database-in-android](http://davehiren.blogspot.com/2011/12/use-existing-sqlite-database-in-android.html)

* * *

[使用你自己的 sqlite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

顺便说一句，如果您想使用手动创建的数据库（将在 sdcard 中），只需像这样访问它：

```
File dbfile = new File("/sdcard/Your_db_File" ); 
SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:12:10.190

如前所述，结果是，安装软件后，我们应该将文件夹中的数据库复制`assets`到`/data/data/your_package/`文件夹中，然后轻松使用它。为此，我使用如下代码在运行时复制数据库。

```
 if (!new File("/data/data/" + this.getPackageName()
            + "/database.sqlite").exists()) {
        try {
            FileOutputStream out = new FileOutputStream("data/data/"
                    + this.getPackageName() + "/database.sqlite");
            InputStream in = getAssets().open("databases/dic.db");

            byte[] buffer = new byte[1024];
            int readBytes = 0;

            while ((readBytes = in.read(buffer)) != -1)
                out.write(buffer, 0, readBytes);

            in.close();
            out.close();
        } catch (IOException e) {
        }
    } 
```

您应该将此代码放在 MainActivity 的`onCreate`函数中。您可以在整个项目中轻松使用自己的数据库。要访问您的数据库，您可以使用以下代码：

```
SQLiteDatabase sqliteDB = SQLiteDatabase.openOrCreateDatabase(
                "/data/data/" + this.getPackageName() + "/database.sqlite",
                null);

Cursor cursor = sqliteDB.rawQuery("SELECT * FROM table", null); // example of query 
```

好好享受 ：）

# sip - RTP SSRC：如何知道呼叫方向

> ID：10750837
> 
> 赞同：1
> 
> 时间：2012-05-25T08:11:46.193
> 
> 标签：sip, rtp, jnetpcap, call-flow

我正在使用 jNetPcap 从 tcpdumps 解码 rtp。目前，我使用 SIP 邀请消息和源 IP（还通过源 ips 检查..）来检测呼叫的方向（正向、反向）.. 这是有效的，但实际上并不是按照 rfc 标准的预期工作方式并解决所有可能的行为。

有什么方法可以从 SSRC 确定源在哪个方向进行 sip 呼叫？据我所见，ssrc 标识符首先出现在 rtp 流上，我无法说出它是哪个呼叫流向。

而且我不想保存两个方向并让用户决定它是哪个方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:03:13.323

无法仅从 RTP 流中确定是哪一方发出了呼叫。您需要捕获 INVITE/200/ACK 交换以从 IP 地址/端口/传输三元组映射到呼叫的参与者。听起来你已经在这样做了。

我不确定您所说的“但不是真正打算如何按照 rfc 标准工作”的意思。似乎 RTP 和 SIP 标准都在做他们应该做的事情。SIP 使用 SDP 将自己与直接了解媒体平面隔离开来，这允许 SIP 与任意媒体协议一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:59:52.717

我做了脏解析，但似乎 jnetpcap 没有更好的方法来做到这一点：

```
private class JPacketHandlerSSRCs implements JPacketHandler<String> {

    @Override
    public void nextPacket(JPacket packet, String user) {
        // TODO Auto-generated method stub

        Udp udp = new Udp();
        Rtp rtp = new Rtp();
        Sdp sdp = new Sdp();
        Sip sip = new Sip();

        // get the source ip of the caller from the invite message.
        // seems to be a tricky and dirty workaround, poor jnetpcap framework!
        if(packet.hasHeader(sip) && packet.hasHeader(sdp)) {

            if( (sip.getUTF8String(0, '@')).startsWith("INVITE ") ) {
                String sdptext = sdp.text();
                int pos = sdptext.indexOf("m=audio ") + 8;
                int end = pos;
                if(pos != -1)
                    while(sdptext.charAt(end) != ' ') end++;

                rtp_forward_channel_port = Integer.parseInt(sdptext.substring(pos, end));
                }
        }

        if(packet.hasHeader(udp))
            if(rtp_forward_channel_port == udp.source() && packet.hasHeader(rtp)) {
            try {
                dos = getOutputStream(rtp.ssrc());
                dos.write(rtp.getPayload());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    } 
```

# objective-c - Object-C++ 和框架的问题

> ID：10750847
> 
> 赞同：0
> 
> 时间：2012-05-25T08:12:42.400
> 
> 标签：objective-c, frameworks, cocos2d-iphone, box2d, iphone-wax

我有这个项目需要集成 Box2D、Cocos2d-iPhone 和 iPhone 蜡。起初我把 cocos2d-iphone 和 box2d 放在一起，它给了我这个错误信息：

```
 fatal error: 'cassert' file not found
    #include <cassert>
             ^ 
```

我查了一下发现是因为box2d是用c++写的，你必须把所有引用box2d的源文件都设置为*.mm，这样苹果编译器才能把它编译成object-c++。

所以我只是将每个源文件都更改为 *.mm 并且它起作用了。

然后我试着把 iPhone 蜡放进去。iPhone 蜡是用 object-c 和 c 编写的。他们提供了一个wax.framework。所以我下载它并将它拖到我项目的框架区域中。它给了我这个错误：

```
 "__Z9wax_startPcPFiP9lua_StateEz", referenced from:
          _main in main_old.o
    ld: symbol(s) not found for architecture armv7
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

所以我再次搜索，我发现这是因为预期的库不存在。我逐个检查列表，我很确定每个设置都是正确的，我找不到问题。

所以我做了一些测试。我从其中一个模板创建了一个新的示例项目，并将 iPhone 蜡放入其中，它工作正常。然后我将 main.m 文件更改为 main.mm，它给出的错误就像上面一样。

那么我该如何解决呢？这是因为 object-C++ 无法导入 object-c 和 c 框架吗？我是否应该重新创建框架并将其所有名称更改为 *.mm？还是当我将源文件更改为 *.mm 时我做错了，应该有更好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:39:31.207

该函数实际上是一个名为 的函数`wax_start()`。所有其他废话都是 C++ 编译器添加的名称修改。这是支持重载所需要的，即其他废话编码的参数和返回类型`wax_start()`。解决这个问题的最简单方法是告诉 C++ 编译器该头文件中的所有内容都是纯 C，例如

```
extern "C"
{
 #import "Wax/whatever.h"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:22:21.750

不要使用 main.mm，而是坚持使用 main.m。无需为 Box2D 重命名 main.m。这是因为您通常不在 main.m 中包含/导入任何 Box2D (C++) 标头。

如果将 Box2D (C++) 头文件添加到前缀头文件中，请确保它们仅包含在 C++ (Objective-C++) 文件中，如下所示：

```
// C++ header files
#ifdef __cplusplus
#import "Box2D.h"
#endif // __cplusplus 
```

# c# - 如何在WPF中使TextBlock可滚动

> ID：10750849
> 
> 赞同：7
> 
> 时间：2012-05-25T08:12:52.960
> 
> 标签：c#, wpf, rss

我想让我的文本块区域可滚动，因为要加载很多文本。

我会放上所有代码，因为它不是太大，所以你可以测试它。

```
<UserControl x:Class="Fleet_management.Info"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" Height="492" Width="578">
    <UserControl.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFE2E2E2" Offset="0" />
            <GradientStop Color="White" Offset="1" />
        </LinearGradientBrush>
    </UserControl.Background>

    <UserControl.Resources>
        <XmlDataProvider x:Key="rssData" XPath="//item" Source="*******" />
    </UserControl.Resources>

    <Grid Margin="3" Height="598" Width="565">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="252*" />
            <ColumnDefinition Width="90*" />
            <ColumnDefinition Width="223*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="177*" />
            <RowDefinition Height="55*" />
            <RowDefinition Height="122*" />
            <RowDefinition Height="177*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0" VerticalAlignment="Stretch" FontStretch="Normal" FontSize="14" FontFamily="Lucida Sans Unicode" Grid.ColumnSpan="3">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,0,5" Grid.ColumnSpan="3">
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
        </StackPanel>
        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,3,115" Grid.RowSpan="2" Grid.ColumnSpan="3">
            <TextBlock ScrollViewer.CanContentScroll="True" Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Width="528" AllowDrop="False"
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" Height="215" FontSize="14" Padding="0,0,5,0" />
        </ScrollViewer>

    </Grid>
</UserControl> 
```

这是无法正常工作的部分：

```
<ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,3,115" Grid.RowSpan="2" Grid.ColumnSpan="3">
            <TextBlock ScrollViewer.CanContentScroll="True" Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Width="528" AllowDrop="False"
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" Height="215" FontSize="14" Padding="0,0,5,0" />
        </ScrollViewer> 
```

代码正在加载文本但不是全部，应该有滚动

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T16:07:47.823

只需从您的内部删除`Width`和它应该可以工作。顺便说一句：不需要.`Height``TextBlock``Scrollviewer``ScrollViewer.CanContentScroll="True"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-28T13:07:53.327

**创建一个可滚动的文本框**

在 Microsoft 提出使 TextBlock 控件可滚动的解决方案之前，以下解决方案可以完美运行。``` 创建一个定义单个字符串的类；例如（在解决方案文件夹 Concrete 中创建的类）：

```
namespace jScheduleVI.Concrete
{
    public class MyString
    {
        public string MyParagraph { get; set; }
    }
} 
```

在您希望显示可滚动文本的页面后面的代码中，声明上面创建的单个字符串类项的 ObservableCollection：

```
public ObservableCollection<MyString> textList = new ObservableCollection<MyString>(); 
```

创建一个或多个按钮以激活在 Xaml 中显示可滚动文本的页面，以在其中显示它。例如关于按钮和隐私策略按钮（我将这些按钮放在 Grid.Row=”0” 的网格中）：

```
<RelativePanel>            
            <Button Name="InformationButton"
                    ToolTipService.ToolTip="About"
                    RelativePanel.AlignRightWithPanel="True"
                    Margin="5"
                    Background="White"
                    Click="InformationButton_Click"
                    Width="50" Height="30"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                <Image Source="Assets/InfoIcon.jpg" 
                           Stretch="UniformToFill"/>
            </Button>
            <Button x:Name="PrivacyPolicy"
                    RelativePanel.LeftOf="InformationButton"
                        ToolTipService.ToolTip="Privacy Policy"
                    Margin="0,5,0,5"
                    Background="White"
                    Click="PrivacyPolicy_Click"
                    Width="40" Height="30"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                <Image Source="Assets/Icons/Privacy.png" 
                           Stretch="UniformToFill"/>
            </Button>
        </RelativePanel> 
```

在下一个网格行 (Grid.Row=”1”) 中定义可滚动文本的可视区域。将此区域的可见性设置为折叠以禁止显示测试，直到发生按钮单击事件。此网格行将容纳另一个网格，其中两行定义了可滚动文本控件的 Xaml 和一个关闭按钮。第一个网格行将在 ScrollableView 中包含一个 ListView，在我的例子中是在 Border 中。第二行包含关闭按钮。

```
<Grid Grid.Row="1"
                    x:Name="ScrollableText"                                       
                    Visibility="Collapsed"
                    Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border BorderThickness="2" 
                    BorderBrush="Gray">
                <ScrollViewer ScrollViewer.VerticalScrollMode="Auto">
                    <ListView ItemsSource="{x:Bind textList}"
                              HorizontalAlignment="Stretch"
                              HorizontalContentAlignment="Stretch" 
                              ItemTemplate="{StaticResource TextBlockDataTemplate}"
                              Height="500">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </ScrollViewer>
            </Border>

            <Button Grid.Row="1" 
                    Name="CloseButton" 
                    Content="Close" 
                    Click="CloseButton_Click" 
                    Margin="10"/>
        </Grid> 
```

ListView 的 ItemTemplate 在显示可滚动文本的页面上的页面资源中定义（对于更复杂的可滚动文本，可以在 UserControl 中定义模板），例如：

```
<DataTemplate x:Key="TextBlockDataTemplate" x:DataType="data:MyString">
            <TextBlock HorizontalAlignment="Left" 
                           TextWrapping="Wrap"
                           FontSize="16"
                           FontFamily="Global Sans Serif"
                           Margin="10" 
                           Height="Auto"
                       Text="{x:Bind MyParagraph}"/>
        </DataTemplate> 
```

然后在每个按钮的 Click 事件中，放置可滚动文本。文本将包含一个单字符串类（在我的示例中为 MyString）类型的段落列表，这些段落添加到为 ListView 定义的 ObservableCollection 中。为了使集合可用于可滚动文本的多个视图，在添加文本之前先清除集合。收集完成后，Grid.Row=”1” 可见。

```
private void InformationButton_Click(object sender, RoutedEventArgs e)
        {
            textList.Clear();
            MyString line = new MyString();
            line.MyParagraph = "jMajorsIV provides golf score data management of 9 or 18 hole competition golf in a format that mimics play of the PGA tour major tournaments, namely The Masters, The US Open, the PGA, and The British Open. Each major tourney consists of four rounds and scoring is based on net score using a progressive handicap calculated weekly. Player standings at the end of each major are awarded Cup Points according to their finish. At the end of the four major tourneys, the players can decide on the cup points cut-off for participation in the Cup Championship.";
            textList.Add(line);
            MyString line1 = new MyString();
            line1.MyParagraph = "Competition can include at little as two players, personal groups, as well as organized leagues. Scoring can be entered at any time allowing play to conform to available play times and dates. Leader boards will show the latest round scored and the net score for that round while players not yet completing rounds will show dash marks for a current score. Over or under par total scores for each player for rounds completed will determine standings for the tourney.";
            textList.Add(line1);
            MyString line2 = new MyString();
            line2.MyParagraph = "Users are presented with a setup page to allow course data settings to be entered for the type of players competing(seniors, women, mixed, men's) and consists of tee slope and ratings, tee par per hole, tee hole handicap per hole, along with the course name or group name. The setup page provides for initial player entry but does not require all players to be entered; players an join as the competition ensues throughout the season. Play format is also selected for the competition and allows for settings the handicap percentage to be used for net scoring.";
            textList.Add(line2);
            MyString line3 = new MyString();
            line3.MyParagraph = "Scoring is entered by individual players or by a designee on consists of the gross score for each hole. Equitable score control is used based on the players handicap index to adjust gross score entries for net score determination. Handicap dots and over - under score are maintained as each hole score is entered. Leader score boards will automatically update as a score is entered. Player statistics are tabulated and displayed for each tournament round and for each hole on the course.";
            textList.Add(line3);
            MyString line4 = new MyString();
            line4.MyParagraph = " Comments and suggestions are welcome and can be sent to: jbhSolutionsLM@gmail.com   Product of jbhSolutions - Lake Monticello, VA";
            textList.Add(line4);
            ScrollableText.Visibility = Visibility.Visible;
        } 
```

关闭按钮单击事件折叠页面上显示的可滚动视图区域：

```
private void CloseButton_Click(object sender, RoutedEventArgs e)
        {
            ScrollableText.Visibility = Visibility.Collapsed;
        } 
```

有关此控件的实际操作示例，请访问 Web 和 Microsoft 应用商店上的“jbhSolutions”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:36:09.383

将这些属性添加到 ScrollViewer 标记。允许滚动 TextBlock 的内容。

CanContentScroll="真"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:35:25.643

这是您更改后的 xaml 代码。并且工作正常。

我根据我的数据更改了绑定。你需要用你的数据成员来改变它。

```
<Grid Margin="3">

        <Grid.RowDefinitions>
            <RowDefinition Height="177*" />
            <RowDefinition Height="100*" />
            <RowDefinition Height="122*" />
            <RowDefinition Height="177*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems"
                 Grid.ColumnSpan="3"
                 Margin="3,0"
                 VerticalAlignment="Stretch"
                 FontFamily="Lucida Sans Unicode"
                 FontSize="14"
                 FontStretch="Normal"
                 SelectedIndex="0">
            <ListBox.Background>
                <ImageBrush />
            </ListBox.Background>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Width="100"
                                   Margin="3"
                                   Text="{Binding Name}" />
                        <TextBlock Margin="3"
                                   VerticalAlignment="Center"
                                   FontWeight="Bold"
                                   Text="{Binding InceptionDate}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1"
                    Margin="5"
                    DataContext="{Binding ElementName=lstItems,
                                          Path=SelectedItem}"
                    Orientation="Vertical">
            <TextBlock Margin="3"
                       FontSize="13"
                       FontWeight="Bold"
                       Foreground="Red"
                       MaxHeight="50"
                       Text="{Binding FundSummary}"
                       TextWrapping="Wrap" />
            <TextBlock Margin="3"
                       Foreground="Blue"
                       Opacity="0.72"
                       ScrollViewer.CanContentScroll="True"
                       ScrollViewer.VerticalScrollBarVisibility="Auto"
                       Text="{Binding ManagerBio}"
                       TextWrapping="WrapWithOverflow" />
        </StackPanel>
        <ScrollViewer Grid.Row="2"
                      Grid.RowSpan="2"
                      Grid.ColumnSpan="3"
                      Margin="10"
                      DataContext="{Binding ElementName=lstItems,
                                            Path=SelectedItem}"
                      HorizontalScrollBarVisibility="Disabled"
                      VerticalScrollBarVisibility="Auto">

            <TextBlock Height="Auto"
                       Margin="3"
                       AllowDrop="False"
                       Background="Silver"
                       FontFamily="Lucida Sans Unicode"
                       FontSize="14"
                       FontStyle="Italic"
                       Foreground="YellowGreen"
                       Padding="0,0,5,0"
                       ScrollViewer.CanContentScroll="True"
                       Text="{Binding ManagerBio}"
                       TextAlignment="Justify"
                       TextWrapping="Wrap" />

        </ScrollViewer>
    </Grid> 
```

# javascript - 没有*使用 jQuery（或其他库）滚动 div 是不可能的吗？

> ID：10750851
> 
> 赞同：2
> 
> 时间：2012-05-25T08:12:58.127
> 
> 标签：javascript, css, html

我想在*不*使用任何库的情况下以编程方式滚动 div。有可能吗？如果可以，怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:16:57.377

是的。

```
var myEl = document.getElementById('myEl');
myEl.scrollLeft = 12;
myEl.scrollTop = 34; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:17:44.707

是的，这是可能的。试试这个代码。

```
<html>
<head><title>Scrolling a DIV with JavaScript</title>

<script language='javascript'>

  function move_up() {
    scroll_clipper.scrollTop = 0;
  }

</script>

</head>
<body>

  <a href='javascript:move_up()'>Move UP</a>

  <p>

  <div id='scroll_clipper' style='position:absolute; width:150px; height: 150px; overflow:auto'>
    <div id='scroll_text' style='background-color:yellow'>
       Here is some content that can be scrolled.
       <p>It uses two divs:<ul>
         <li>scroll_clipper, and
         <li>scroll_text
        </ul>

      scroll_clipper defines the scroll area while scroll_text
      defines the text to be scrolled.

    </div>
  </div>

</body>
</html> 
```

# c# - 相当于c#中枚举类型的索引？

> ID：10750856
> 
> 赞同：4
> 
> 时间：2012-05-25T08:13:09.047
> 
> 标签：c#, enums, indexing

假设我有以下枚举类型：

```
private enum ranks { ace = "Ace", two = "2", three = "3", four = "4", five = "5", six = "6", seven = "7", 
                     eight = "8", nine = "9", ten = "10", jack = "Jack", queen = "Queen", king = "King" }

ranks rank; 
```

我知道我可以做 sizeof(ranks) 之类的事情，但是有没有办法让排名中的第 n 个项目？假设用户输入 4 并且我想将排名设置为第 4 个枚举而不明确执行：

```
rank = ranks.four; 
```

我怎样才能做到这一点？

（为了这个例子的目的，假设我必须使用 enum 并且我知道还有其他集合更适合这个问题。）

谢谢您的帮助。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T08:34:48.790

(1) 命名约定：不要将枚举的名称复数，除非它是一组可以组合在一起的“位标志”。

(2) 在枚举中总是有一个值为零的项目。枚举的默认初始化将给它一个零值，因此最好为它有一个明确的名称（例如无）。

(3) 您可以将任何您喜欢的值转换为枚举，只要它与枚举的基础类型相同（默认为 int32）。

所以你可以有一个看起来像这样的枚举：

枚举排名{无，王牌，二，...}

并且要从 5 的等级值转换为枚举，您可以强制转换：

排名rank = (Rank)5；

但是您最好编写一个方法来检查范围，然后在转换之前检查范围，如果超出范围则抛出异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T08:20:02.833

如前所述，您的枚举声明无效，但也许您想要做的更像是；

```
private enum Ranks
{
    Ace = 1,
    Two = 2,
    Three = 3,
    . . .
    Jack = 11,
    Queen = 12,
    King = 13
}

public void SomeMethod()
{ 
    Ranks rank = Ranks.Jack;
    int rankValue = (int)rank;
    string rankName = rank.ToString();
}

public Ranks GetRank(int i)
{
    string name = Enum.GetName(typeof (Ranks), i);
    if (null == name) throw new Exception();
    return (Ranks)Enum.Parse(typeof (Ranks), name);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T08:17:50.620

我不确定您要做什么，但是您发布的内容不是 c# 世界中的合法枚举。
如果您有以下示例枚举：

```
 enum sample
    {
        ace = 1,
        two = 2,
        three = 3
    } 
```

那么您可以随时将任何 int 转换为该枚举（假设您确定该值有效）：

```
 int i = 3;
  sample mySample = (sample)i; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T08:20:17.437

如果您的枚举值不是从 0 到 X 以 1 为增量顺序运行，那么您还可以执行以下操作：

```
var rank = (rank)Enum.GetValues(typeof(rank))[3]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T08:21:54.873

您可以在枚举中指定整数值，这将帮助您获取自定义值以识别其位置。

检查这个：

```
 void Main()
{
    int rank = (int)ranks.two;
    Console.WriteLine(rank);
    ranks rankEnum = (ranks)2;
    Console.WriteLine(rankEnum.ToString());

}
private enum ranks 
    { ace = 1, two = 2, three = 3, four = 4, five = 5, six = 6, seven = 7, 
                     eight = 8, nine = 9, ten = 10 } 
```

//输出

```
2
two 
```

您可以获得枚举的索引：

```
int position = EnumUtil.GetEnumIndex<ranks>(ranks.four);

//
public static class EnumUtil
    {        
            public static int GetEnumIndex<T>(T value)
            {
                int index = -1;
                int itemIndex = 0;
                foreach (T item in Enum.GetValues(typeof(T)).Cast<T>())
                {
                    if (item.Equals(value))
                    {
                        index = itemIndex + 1;
                        break;
                    }
                    itemIndex ++;
                }
                return index;
            }
    } 
```

希望这有帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T08:31:30.617

枚举值必须是数字，但您可以为它们添加描述：

```
private enum ranks {
  [Description("Ace")] ace = 1,
  two = 2,
  three = 3,
  four = 4,
  five = 5,
  six = 6,
  seven = 7,
  eight = 8,
  nine = 9,
  ten = 10,
  [Description("Jack")] jack = 11,
  [Description("Queen")] queen = 12,
  [Description("King")] king = 13
} 
```

现在您可以将任何整数值转换为枚举值：

```
 (ranks)4 
```

您可以使用此函数来获取描述或排名：

```
private static string GetRankName(ranks rank) {
  FieldInfo fi = typeof(ranks).GetField(rank.ToString());
  DescriptionAttribute[] attributes = (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute), false);
  if (attributes.Length > 0) {
    return attributes[0].Description;
  } else {
    return ((int)rank).ToString();
  }
} 
```

用法：

```
Console.WriteLine(GetRankName((ranks)4)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T08:56:50.180

基本上，枚举用于提供一些标准，告诉每个人可以使用哪些 exsacly 值。但是，如果枚举值必须关心除此“标准”之外的一些信息 - 使用枚举不是一个好习惯。

考虑到您的情况“rank = ranks.four;”，我更喜欢使用带有常量字符串字段的 Class 而不是 Enum。

# c# - 为 PDF 输出编码 .NET 字符串

> ID：10750859
> 
> 赞同：0
> 
> 时间：2012-05-25T08:13:21.497
> 
> 标签：c#, .net, string, unicode, fonts

我有一个 PDF 库，我用它来将字符串写入 PDF 文档。我正在为 PDF 使用字体“MS gothic UI”，因为它包含 Unicode 字符（例如日文符号）。问题是，所有字符串在生成的 PDF 中都显示为空白。

当我使用像 Arial 这样的字体并且只有“普通”字母 (az) 时，一切正常。但是因为我也想支持亚洲字符，所以我选择了另一种字体（MS gothic UI）。

我想这是某种编码问题。也许 .NET 字符串的编码方式与字体中的字符不同？有没有办法来解决这个问题？谢谢！

# css - 如何在 Metro Apps 中对输入范围的左侧部分进行样式化？

> ID：10750865
> 
> 赞同：2
> 
> 时间：2012-05-25T08:13:50.653
> 
> 标签：css, windows-8

我目前正在尝试在我的 Metro 应用程序之一中对输入类型范围进行样式化。但是，我找不到如何更改控件左侧的默认蓝色/紫色。任何的想法？

我使用以下 CSS 成功更改了标记和右侧部分的颜色：

```
html input[type=range]::-ms-track {
  background: yellow;
}

html input[type=range]::-ms-thumb {
  background: red;
} 
```

所以，我想一定有类似的东西。但是什么？：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:58:44.530

您可以使用这些 CSS 类来设置范围控件左侧的颜色样式：

```
input[type=range]::-ms-fill-lower {
    background-color: rgb(0, 130, 135); /* same in dark and light */
}
input[type=range]:hover::-ms-fill-lower {
    background-color: rgb(33, 146, 151); /* same in dark and light */
}
input[type=range]:active::-ms-fill-lower {
    background-color: rgb(37, 187, 196); /* same in dark and light */
}
input[type=range]:disabled::-ms-fill-lower {
    background-color: rgba(255, 255, 255, 0.24);
}
.win-ui-light input[type=range]:disabled::-ms-fill-lower {
    background-color: rgba(0, 0, 0, 0.24);
} 
```

请注意，以上是默认值，您必须用您的颜色覆盖它们。

如果要查找控件的其他颜色设置或不同的控件，请在 dark-ui.css 文件中搜索控件的类型。每个控件都有一个带有颜色的单独部分

# html5-video - 如何为移动设备和桌面网页版加载不同的视频？

> ID：10750874
> 
> 赞同：2
> 
> 时间：2012-05-25T08:14:40.920
> 
> 标签：html5-video, responsive-design

我正在使用响应式 Web 技术和 HTML5 开发一个网站。我有一个 720x576 分辨率的高清质量视频，我使用 HTML5`<video>`和 `<source>`标签嵌入。

但由于它是一个非常重的视频，所以我不想为 Ipad 和移动设备调整它的大小。相反，当网站在移动/Ipad 设备中打开时，我想加载一个 320x240 分辨率的不同视频。我在`<source>`标签中使用了媒体查询，但它不起作用，下面是我尝试过的代码示例。

```
<video controls>
   <source src="mySmallVideo.webm" type="video/webm" media="all and (max-width:600px)">
   <source src="myVideo.webm" type="video/webm">
</video> 
```

知道如何实现这个要求，如果可以使用 Jquery 和 javascript，那么请给我一些想法，或者如果可能的话，提供一些链接。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:21:13.643

我可以用两种方法想到一种技术。

首先在您的服务器端，您可以检测浏览器的用户代理，如果它与移动浏览器匹配，那么您可以将视频的 src 更改为较低分辨率的视频。

第二种方法是使用 javscript / jQuery 来检测用户是否使用移动浏览器并执行相同的操作，将视频的 src 更改为较低分辨率的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T10:40:02.090

所以我使用了一种不同的方法，很抱歉这可能很难读，但视频只是嵌入到 HTML 中。

```
 <section style="height: 1098px;" class="main-content section-full-area no-padding">
    <a href="#second-section" class="scroll-btn-full-area">
        <i class="scroll-btn-down-icon animated-opacity"></i> 
    </a>
    <div class="video-section-container">
        <div class="video-overlay" style="background-color:#000000; opacity: 0.65;"></div>
        <div class="mobile-video-image" ></div>
        <div style="width: 1920px; height: 1098px;" class="video-wrap">
            <div style="width: 1920px; height: 800px;" id="mep_0" class="mejs-container svg video mejs-video">
                <div class="mejs-inner">
                    <div class="mejs-mediaelement">
                        <video style="width: 1990px; height: 1120px;" src="about_files/final.mp4" class="video" preload="auto" loop="" autoplay="autoplay"  height="800" width="1920">
                            <source type="video/mp4" src="about_files/final.mp4">
                            <source type="video/mp4" src="about_files/final.mp4">
                        </video>
                    </div> 
                    <div class="mejs-layers">
                        <div style="width: 1920px; height: 800px; display: none;" class="mejs-overlay mejs-layer">
                            <div class="mejs-overlay-loading">
                                <span></span>
                            </div>
                        </div>
                        <div style="display: none; width: 1920px; height: 800px;" class="mejs-overlay mejs-layer">
                            <div class="mejs-overlay-error"></div>
                        </div>
                        <div style="display: none; width: 1920px; height: 0px;" class="mejs-overlay mejs-layer mejs-overlay-play">
                            <div style="margin-top: -20px;" class="mejs-overlay-button"></div>
                        </div>
                    </div>
                    <div style="visibility: hidden; display: block;" class="mejs-controls">
                        <div class="mejs-button mejs-playpause-button mejs-pause">
                            <button type="button" aria-controls="mep_0" title="Play/Pause" aria-label="Play/Pause"></button>
                        </div>
                    <div class="mejs-time mejs-currenttime-container">
                        <span class="mejs-currenttime">00:18</span>
                    </div>
                    <div style="width: 1756px;" class="mejs-time-rail">
                        <span style="width: 1738px;" class="mejs-time-total">
                        <span style="display: none;" class="mejs-time-buffering"></span>
                        <span style="width: 1738px;" class="mejs-time-loaded"></span>
                        <span style="width:  540px;" class="mejs-time-current"></span>
                        <span style="left: 537px;" class="mejs-time-handle"></span>
                        <span class="mejs-time-float">
                            <span class="mejs-time-float-current">00:00</span>
                            <span class="mejs-time-float-corner"></span>
                        </span>
                    </span>
                </div>
                <div class="mejs-time mejs-duration-container">
                    <span class="mejs-duration">01:00</span>
                </div>
                <div class="mejs-button mejs-volume-button mejs-mute">
                    <button type="button" aria-controls="mep_0" title="Mute Toggle" aria-label="Mute Toggle"></button>
                <div style="display: none;" class="mejs-volume-slider">
                    <div class="mejs-volume-total"></div>
                    <div style="height: 36.8px; top: 17.2px;" class="mejs-volume-current"></div>
                    <div style="top: 15px;" class="mejs-volume-handle"></div>
                </div>
            </div>
            <div class="mejs-button mejs-fullscreen-button">
                <button type="button" aria-controls="mep_0" title="Fullscreen" aria-label="Fullscreen"></button> 
            </div>
        </div>
        <div class="mejs-clear"></div>
    </div>
</div> 
```

# python - Python：编写元组值字典的 csv 输出文件

> ID：10750875
> 
> 赞同：0
> 
> 时间：2012-05-25T08:14:41.777
> 
> 标签：python, csv

如何将以下字典打印到 csv 文件中：

```
maxDict = {'test1': ('alpha', 2), 'test2': ('gamma', 2)} 
```

因此，输出 CSV 如下所示：

```
test1, test2
alpha, gamma
2, 2 
```

ps 我以前问过这个问题，但不知道如何以另一种方式重新排列它，即转置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:20:55.157

您应该知道字典中键的顺序是实现定义的，即随机的。因此，建议对它们进行[排序](http://docs.python.org/library/functions.html#sorted)。除此之外，简单地使用该[`csv`](http://docs.python.org/library/csv.html)模块应该可以工作：

```
import csv
maxDict = {'test1': ('alpha', 2), 'test2': ('gamma', 2)} 
keys = sorted(maxDict.keys())
csvw = csv.writer(open('output.csv', 'wb'))
csvw.writerow(keys)
data = [maxDict[k] for k in keys]
for row in zip(*data):
  csvw.writerow(row) 
```

# sencha-touch-2 - Sencha touch 2 + Apple 推送通知 + Ext.device.Push

> ID：10750876
> 
> 赞同：2
> 
> 时间：2012-05-25T08:14:54.257
> 
> 标签：sencha-touch-2, apple-push-notifications, javascript-framework, devicetoken

我最近开始使用 Sencha Touch 2 进行开发，目前我正在创建一个需要支持 Apple Push Notifications 的应用程序。

因此，我在 Apple 开发人员中心创建了必要的证书，并使用它们将应用程序与 Sencha Touch SDK 工具打包在一起。一切顺利，我可以在我的设备上运行这个应用程序。

在应用程序中，我添加了一个按钮来接收设备令牌。当我点击按钮时，它执行以下代码：

```
 Ext.device.Push.register({
        type: Ext.device.Push.ALERT | Ext.device.Push.BADGE | Ext.device.Push.SOUND,
        success: function (token) {
            console.log('# Push notification registration successful:');
            Ext.Msg.alert('    token: ' + token);
        },
        failure: function (error) {
            console.log('# Push notification registration unsuccessful:');
            Ext.Msg.alert('     error: ' + error);
        },
        received: function (notifications) {
            console.log('# Push notification received:');
            Ext.Msg.alert('    ' + JSON.stringify(notifications));
        }

    //    Ext.device.Notification.show({
    //        title: 'My Title',
    //        message: 'A message',
    //        style: "login",
    //        buttons: ["Cancel", "Login"],
    //        callback: function (button, values, options) {
    //              //When the user taps a button, show another notification
    //              Ext.device.Notification.show({
    //                   message: 'You typed: "' + values + '"'
    //              });
    //                    }
    //        });
}, 
```

当 Ext.device.Notificaion.show 未注释时，我会收到一条消息，因此我确信这段代码会被执行。现在我的问题是我没有收到来自 Ext.device.Push.register 的任何消息。没有成功、失败或收到的事件被触发。这里有没有人设法让这个工作，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:56:58.340

确保您包含`"notificationConfiguration":"debug"`在 JSON 配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T14:55:11.007

我已经在我的博客上发布了如何为 IOS 推送通知配置和构建 Sencha Touch 应用程序 - http://isolaso [​​ftware.it/2013/09/17/ios-push-notifications-using-sencha-touch-2](http://isolasoftware.it/2013/09/17/ios-push-notifications-using-sencha-touch-2/) /。

最重要的步骤是：

*   在 package.json 中配置 applicationName、applicationId 和 bundleSeedId
*   在您的应用程序上执行手动授权
*   正确构建推送服务器的 .pem 证书（或 .p12）

# php - 在 PHP 网站中显示当前时间

> ID：10750880
> 
> 赞同：3
> 
> 时间：2012-05-25T08:15:12.230
> 
> 标签：php, date, time, web

所以，我有这个代码：

```
 print date("l, F j, Y h:m:s a", strtotime("+8 hours")); 
```

它已经在网站中显示当前日期和时间，但问题是我需要刷新页面才能看到时间和日期正在更新。请帮忙！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T08:34:29.430

使用 PHP 您可以获取服务器时间，请使用此代码获取当前时间

```
<?php echo date("D M d, Y G:i a"); ?> 
```

您可以根据需要更改日期格式，请看[**这里**](http://php.net/manual/en/function.date.php)。

现在要更新当前时间和日期，您必须`<div>`使用显示日期的（JQuery Ajax）刷新元素（），我提供了一个链接，该链接描述了一种`<element>`定期刷新的方法。对你来说，它应该是 1 秒或 1000 毫秒。**[这是教程链接](http://www.webinfopedia.com/autoload-refresh-div-in-jquery.html)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:16:53.367

PHP 在服务器上运行，这意味着您必须刷新代码才能再次执行它。这里最好的解决方案是使用 JavaScript，因为您可以设置 a`setInterval`并使用新时间更新元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-24T13:23:19.930

```
<?php
//$today = date("F j, Y, g:i a");                 // March 10, 2001, 5:16 pm
//$today = date("m.d.y");                         // 03.10.01
//$today = date("j, n, Y");                       // 10, 3, 2001
//$today = date("Ymd");                           // 20010310
//$today = date('h-i-s, j-m-y, it is w Day');     // 05-16-18, 10-03-01, 1631 1618 6 Satpm01
//$today = date('\i\t \i\s \t\h\e jS \d\a\y.');   // it is the 10th day.
//$today = date("D M j G:i:s T Y");               // Sat Mar 10 17:16:18 MST 2001
//$today = date('H:m:s \m \i\s\ \m\o\n\t\h');     // 17:03:18 m is month
//$today = date("H:i:s");                         // 17:16:18

echo $today;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T01:48:11.120

您需要从 php 获取日期并在 javascript 变量中打印该日期并在导航器显示小时内进行循环

用 javascript 检查这段代码：

[http://www.dynamicdrive.com/dynamicindex6/clock2.htm](http://www.dynamicdrive.com/dynamicindex6/clock2.htm)

或者这个带有 jQ​​uery 的代码：

[http://www.jquery4u.com/snippets/create-jquery-digital-clock-jquery4u/](http://www.jquery4u.com/snippets/create-jquery-digital-clock-jquery4u/)

您需要将 javascrip 代码放在 php 页面的头部，然后打印实际日期，以获取 javascript 代码的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T09:52:58.780

添加您的时区

```
date_default_timezone_set("Asia/Colombo");

echo date("Y-m-d H:i:s");  // or any format 
```

PHP 支持的时区列表：[https ://www.w3schools.com/php/php_ref_timezones.asp](https://www.w3schools.com/php/php_ref_timezones.asp)

# opengl-es - 部分渲染 3D 对象

> ID：10750884
> 
> 赞同：1
> 
> 时间：2012-05-25T08:15:46.017
> 
> 标签：opengl-es, opengl-es-2.0

目前的问题是我的 3D 对象仅被部分渲染。如果我有一个典型的圆柱体，两端都“填充”，则两端渲染完美，而圆柱体本身不是。我附上了一个例子来说明。

这是代码的构建方式：

```
struct ObjMeshVertex{
    Vector3f pos;
    Vector2f texcoord;
    Vector3f normal;
};

struct ObjMeshFace{
    ObjMeshVertex vertices[3];
};

struct ObjMesh{
    std::vector<ObjMeshFace> faces;
};

ObjMesh myMesh;

for(size_t i = 0; i < faces.size(); ++i){
    ObjMeshFace face;
    for(size_t j = 0; j < 3; ++j){
        face.vertices[j].pos        = positions[faces[i].pos_index[j] - 1];
        face.vertices[j].texcoord   = texcoords[faces[i].tex_index[j] - 1];
        face.vertices[j].normal     = normals[faces[i].nor_index[j] - 1];
    }
    myMesh.faces.push_back(face);
} 
```

设置：

```
 glGenVertexArraysOES(1, &_boxVAO);
    glBindVertexArrayOES(_boxVAO);

    int sizeOfFaces = myMesh.faces.size() * sizeof(ObjMeshFace);
    glGenBuffers(1, &_boxBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _boxBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeOfFaces, &(myMesh.faces[0]), GL_STATIC_DRAW);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(ObjMeshVertex), 0);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeof(ObjMeshVertex), (void*)offsetof(ObjMeshVertex, texcoord));        
    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE ,sizeof(ObjMeshVertex), (void*)offsetof(ObjMeshVertex, normal));

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glEnableVertexAttribArray(2);

    glBindVertexArrayOES(0); 
```

画：

```
glBindVertexArrayOES(_boxVAO);
glDrawArrays(GL_TRIANGLES, 0, indicesize); 
```

其中 indexize = myMesh.faces.size()

所以我的对象看起来像这样：

![在此处输入图像描述](../Images/d119fd1141e2abf7daae7ece2da808a0.png)

渲染最终是这样的：

![在此处输入图像描述](../Images/f529a4160f313ff2b96e53b7d0be479c.png)

而且我只渲染 1 个对象，而不是多个对象，这对于这种行为来说似乎有点奇怪。

球体并排：

![在此处输入图像描述](../Images/f85b879d5a82d1629564a1e949643805.png)

最新效果图：

![在此处输入图像描述](../Images/971f872b823296838422e32d33aadf53.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:15:10.690

通常这个问题可能有多种解释。

1.  OBJ 加载器已损坏或未考虑所有不同的 OBJ 特征，因此您在加载中丢弃了顶点/面的反弹

2.  OBJ 文件不是三角剖分的，在这种情况下，您通常不会丢失“结构”的整个部分，但您只会注意到畸形的面孔。

3.  你有一个剔除问题，因此，一些人脸是由你的调用绘制的，但不是由 Opengl 的人脸剔除算法写在屏幕上的。要解决此问题，请尝试使用 glDisable 语句禁用 OpenGL 中的人脸剔除。这很容易测试。如果是这个问题，请注意不要在您的 SW 生产版本中禁用剔除，因为面部剔除会在性能方面挽救您的生命。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:17:04.660

> glDrawArrays(GL_TRIANGLES, 0, indexize);
> 
> 其中 indexize = myMesh.faces.size()

这就是问题所在。的最后一个参数`glDrawArrays`不是要绘制的图元数量（在您的情况下为三角形），而是数组元素（顶点）的数量，因此应该是`3 * myMesh.faces.size()`. 所以目前你只画了所有三角形的三分之一。

# php - 在从数据库中删除行之前添加警报窗口

> ID：10750889
> 
> 赞同：0
> 
> 时间：2012-05-25T08:16:00.807
> 
> 标签：php, javascript, sql, ajax

如何在从数据库中删除条目之前添加问题警报窗口（类似于“删除第 2 行？”）？

```
<script type="text/javascript">
function deleteRow(tableName,colName,id, obj){
    $.ajax({
           type: "POST",
           url: "callpage.php?page=tables/delete.php",
           data: "tableName=" + tableName + "&colName=" + colName + "&id=" + id,
           success: function(msg){
             if(msg === '1'){
                obj = $(obj).parents('tr');
                $(obj).slideUp().remove();
             }
             else
                 alert("Error.");
           }
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:18:39.653

您可以使用 JavaScript 的[`window.confirm()`](https://developer.mozilla.org/en/DOM/window.confirm)函数向用户显示确认对话框，并`if`根据他们的选择显示一个简单的语句，即`OK`( `true`) 或`Cancel`( `false`)：

```
<script type="text/javascript">
function deleteRow(tableName,colName,id, obj){
    if(window.confirm('Delete row ' + id + '?')){
        $.ajax({
               type: "POST",
               url: "callpage.php?page=tables/delete.php",
               data: "tableName=" + tableName + "&colName=" + colName + "&id=" + id,
               success: function(msg){
                 if(msg === '1'){
                    obj = $(obj).parents('tr');
                    $(obj).slideUp().remove();
                 }
                 else
                     alert("Error.");
               }
        });
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:17:53.460

您需要使用 javascript[**确认框**](https://developer.mozilla.org/en/DOM/window.confirm)，该 puprose 将完成您的任务

```
function deleteRow(tableName,colName,id, obj){ 
    var r=confirm("you need to delete row from" + tableName + "having id :" +id );
    if (r==true)
      {
           $.ajax({
                   type: "POST",
                   url: "callpage.php?page=tables/delete.php",
                   data: "tableName=" + tableName + "&colName=" + colName + "&id=" + id,
                   success: function(msg){
                     if(msg === '1'){
                        obj = $(obj).parents('tr');
                        $(obj).slideUp().remove();
                     }
                     else
                         alert("Error.");
                   }
            });

       }
    else
      {
      alert("You pressed Cancel!");
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:18:17.283

您可以使用带有类似代码的确认窗口

```
if (confirm('Want to delete row XY ? ')) {
    $.ajax({
           type: "POST",
           url: "callpage.php?page=tables/delete.php",
           data: "tableName=" + tableName + "&colName=" + colName + "&id=" + id,
           success: function(msg){
             if(msg === '1'){
                obj = $(obj).parents('tr');
                $(obj).slideUp().remove();
             }
             else
                 alert("Error.");
           }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:18:30.620

您应该在通话前添加一个*确认*弹出窗口：

```
function deleteRow(tableName, colName, id, obj) {
  if(confirm("Are you sure to delete this row?")) {
    // ...
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T08:18:40.947

在 ajax 调用之前放置一个 html confirm()。

就像是

```
var r=confirm("Do you want to delete?")
if (r==true)
{
  //call the delete function
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T08:19:19.417

确认框的简单和非常基本的解释。

```
var r=confirm("按下一个按钮");
如果（r==真）
{
  alert("你按下了确定！");
}
别的
{
  alert("你按下了取消！");
}

```

# python - Numpy直方图，如何在每个bin中取最大值

> ID：10750894
> 
> 赞同：4
> 
> 时间：2012-05-25T08:16:21.680
> 
> 标签：python, numpy, histogram

我有一系列数字，我使用上面的代码进行分类。是否可以返回每个 bin 中的最大数量？

看一下示例代码：

```
 from numpy import *

  a=array([1,4,5,6,7.8,9,3.4,5.,6,3.5,6,8,9,10])

  bins=arange(0,11,1)

  h=hist(a,bins=bins)

  h=hist(a,bins=bins,weights=a) 
```

这就是它的回报

```
 (array([  0\. ,   1\. ,   0\. ,   6.9,   4\. ,  10\. ,  18\. ,   7.8,   8\. ,  28\. ]), array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10]) 
```

我想知道是否有可能在第 4 个 bin 中获得 3.5（这是 3 到 4 之间的最大数字）而不是 6.9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:45:09.780

这将为您提供 bin 中每个元素的最大值，`0`如果 bin 中没有元素：

```
print [max(a[(a>=(i))&(a<i+1)]) if a[(a>=(i))&(a<i+1)].size else 0 for i in bins]
[0, 1.0, 0, 3.5, 4.0, 5.0, 6.0, 7.7999999999999998, 8.0, 9.0, 10.0] 
```

更改`+1`您的垃圾箱大小，使其有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:48:32.860

你可以使用[numpy.digitize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html)。请注意，它将小于第一个 bin 的值标记为 0。

```
a[np.digitize(a,bins) == 4].max() 
```

掩码数组在这里很有用：

```
import numpy.ma as ma
a2 = ma.empty((len(bins),len(a)))
a2.data[...] = a
a2.mask = np.digitize(a,bins)-1 != bins[:,np.newaxis]
a2.max(axis=1).filled(np.nan)

array([  nan,   1\. ,   nan,   3.5,   4\. ,   5\. ,   6\. ,   7.8,   8\. ,
         9\. ,  10\. ]) 
```

# javascript - 跨页面加载识别元素

> ID：10750905
> 
> 赞同：1
> 
> 时间：2012-05-25T08:17:40.963
> 
> 标签：javascript, hash

我不确定这个问题的标题是最好的，但希望这个解释能很好地说明我想要做什么。现在是凌晨 4 点，所以请原谅我向您传达的困惑。

基本上我想做的是确定用户选择的元素是否再次出现在网站的任何页面上。这用于实现“不再向我显示”通知，而无需在服务器端维护用户隐藏什么通知的巨大数据库，并且还允许创建动态生成的通知。

手动为每个通知赋予唯一标识符会使动态通知变得不可能，因此需要动态解决方案。

我的想法是生成通知的散列，使用简单的方法将通知的文本转换为整洁的小散列，如果使用大量通知，可以有效地存储在`localStorage`不占用大量内存的情况下（或者如果这些通知包含大量文本）。

显然，像 MD5 和 SHA-1 这样的东西是直接的候选者，因为它们被广泛使用，并且在 JavaScript 中有许多示例实现来弥补这些函数不是原生的事实。

但对我来说，它们似乎有点矫枉过正。我见过的每个实现都定义了至少十几个帮助函数来完成工作，而且我不喜欢使用我不理解的代码。此外，我不需要加密强度，我只需要一个快速简单的哈希。

我想出了以下几点：

```
function hash(str) {
    var l = str.length, i, out = 0;
    for( i=0; i<l; i++) out = (out<<1)^str.charCodeAt(i);
    return out;
} 
```

在使用少量值进行一些测试后，这似乎生成了相当不错的哈希值。这显然是一致的：相同的输入将产生相同的输出。

我真正想知道的是：**这是一个可用的哈希函数**吗？我的意思是，使用这个哈希函数是否有很高的冲突风险？

* * *

指出`<<`不循环，仅移位丢弃溢出后，函数为：

```
function hash(str) {
    var l = str.length, i, out = 0;
    for( i=0; i<l; i++) out = ((out<<1)|(out&0x80000000?1:0))^str.charCodeAt(i);
    return out;
} 
```

这基本上实现了位旋转，因为我认为没有内置的运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:58:49.243

我测试了几个样本，结果似乎不是很好，因为长度超过 32 个字符且具有相同结尾的字符串给出了相同的结果。

```
console.log(hash('Hello world. Lorem ipsum dolor sit amet, consectetur adipiscing elit.'));
console.log(hash('Something entirely different. Lorem ipsum dolor sit amet, consectetur adipiscing elit.')); 
```

对我来说，这`721528210`两种情况都会产生。

我认为这是因为您通过使用 << 移动字节来不断破坏字节，同时 XOR ^ 是成对的。任何字母都会改变当前的 32 个字节，但这些都将在 32 个字符后被销毁。

# sharepoint - Sharepoint 外部列表问题

> ID：10750909
> 
> 赞同：0
> 
> 时间：2012-05-25T08:17:49.980
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-designer

我在 Sql server 2008 R2 中有一个表。在 SQL 服务器中，我创建了一个具有 5 Column 的视图。我想在 Sharepoint 2010 中显示相同的视图。

为了显示的目的，我使用了 BCS 和外部列表，然后我得到了 Sharepoint 外部列表中的所有记录。但在这里我的问题是我想再添加一个列附件。我没有得到任何成功。

现在我正在使用自定义列表。通过使用 SSIS，我将记录从 SQl 服务器导出到共享点列表。它具有附件的默认选项，但我的问题是用户能够从自定义列表中编辑剩余的列。我希望只有附件和剩余列应该是只读的。

任何人请让我知道解决方案：

如何将附件列添加到外部列表到 Sharepoint 2010 中。或者 。

我怎样才能使其他列只读附件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:19:13.263

您应该能够以编程方式设置字段。您可以在需要时使用事件接收器来定位。看看这篇[文章](http://rnowik.com/Sharepoint-Setting-value-of-readonly-fields-programmatically.aspx)。

通过对象模型在 SharePoint 中创建项目时，您可以将该字段的只读属性转换为 false，以便您设置该字段的值，反之亦然。您可以将它们来回设置为只读相当容易。

```
// get the list and set modified property to allow writing
SPWeb web = new SPSite("http://url/to/web").OpenWeb();
SPList selectedList = web.Lists["listname"];
selectedList.Fields["Modified"].ReadOnlyField = false;
selectedList.Fields["Modified"].Update();

// set the item
SPItem newItem = selectedList.Items[0];
newItem["Modified"] = DateTime.Now;
newItem.Update();

// Set readonly back to true
selectedList.Fields["Modified"].ReadOnlyField = true;
selectedList.Fields["Modified"].Update(); 
```

# java - 为什么 JSP 文件的文件名中有感叹号？

> ID：10750928
> 
> 赞同：1
> 
> 时间：2012-05-25T08:19:04.583
> 
> 标签：java, oracle, jsp

如果我们有一个名为 的文件`user!userAdd.do?userId=18282`，那么 Java 如何/在哪里解释这个请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:54:15.330

您的 .do 扩展名可能表明您正在使用 struts。struts中的感叹号使用如下

user!userAdd.do

用户 --> 映射到映射到该 url 的类

userAdd --> 映射到上一个类中调用的方法

此技术只能在激活 DynamicMethodInvocation 时使用。

出于安全原因，我个人总是禁用此功能。使用这种活动的和以前的技术，用户可以有效地调用类的每个公共方法。

# delphi - Firemonkey 和可停靠表单

> ID：10750930
> 
> 赞同：3
> 
> 时间：2012-05-25T08:19:07.017
> 
> 标签：delphi, firemonkey

是否可以在 FireMonkey 中有可停靠的表单，因为我已经检查了表单属性，并且没有这样的属性可以做到这一点。有什么解决方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:23:14.317

据我所知，没有内置任何东西，但自己添加应该不会太难。请记住，任何表单都可以作为另一个表单上的任何控件的父级：

在子窗体上，在容器内添加任何控件（例如 TLayout）。创建子窗体。将 TLayout（等）的 Parent 属性设置为父窗体（或者，更可能是父窗体上的容器，以便您可以将子 TLayout 的对齐方式设置为 alClient）。

如果您想在拖动操作期间显示位置，请尝试包含的各种效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T16:25:08.133

与 VCL 不同，Firemonkey 没有用于创建停靠表单的内置可停靠界面。但是有一个商业组件可以在 FMX 中创建一个完整的可停靠界面。该组件仅实现可停靠表单。到目前为止，不支持停靠的文档面板（就像 Visual Studio IDE 一样），也没有停靠的工具栏。但总的来说，它们具有所有必要的功能，包括自动隐藏面板以及在 XML 中/从 XML 中保存/恢复的能力。

[https://www.devmachines.com/firedocking-overview.html](https://www.devmachines.com/firedocking-overview.html)

# wordpress - wordpress：如何为帖子添加层次结构

> ID：10750931
> 
> 赞同：8
> 
> 时间：2012-05-25T08:19:09.997
> 
> 标签：wordpress, post, hierarchy

我正在 wordpress 平台上创建一个网站，我希望能够在其中发布我自己的书籍文本。所以我想要的是有某种层次结构，我会在其中添加一个帖子，然后向其中添加子项（章节）。我找到了这个：

```
register_post_type( 'post', array(
        'labels' => array(
            'name_admin_bar' => _x( 'Post', 'add new on admin bar' ),
        ),
        'public'  => true,
        '_builtin' => true, /* internal use only. don't use this when registering your own post type. */
        '_edit_link' => 'post.php?post=%d', /* internal use only. don't use this when registering your own post type. */
        'capability_type' => 'post',
        'map_meta_cap' => true,
        'hierarchical' => false,
        'rewrite' => false,
        'query_var' => false,
        'supports' => array( 'title', 'editor', 'author', 'thumbnail', 'excerpt', 'trackbacks', 'custom-fields', 'comments', 'revisions', 'post-formats' ),
    ) ); 
```

并尝试制作`'hierarchical"=>true`，但没有效果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-26T11:21:52.453

这是我的解决方法。这正是您想要的，能够为内置帖子类型帖子设置帖子父级。`registred_post_type`您可以通过向操作挂钩添加操作来实现此目的。只需将其添加到您的主题的functions.php。

```
add_action('registered_post_type', 'igy2411_make_posts_hierarchical', 10, 2 );

// Runs after each post type is registered
function igy2411_make_posts_hierarchical($post_type, $pto){

    // Return, if not post type posts
    if ($post_type != 'post') return;

    // access $wp_post_types global variable
    global $wp_post_types;

    // Set post type "post" to be hierarchical
    $wp_post_types['post']->hierarchical = 1;

    // Add page attributes to post backend
    // This adds the box to set up parent and menu order on edit posts.
    add_post_type_support( 'post', 'page-attributes' );

} 
```

使帖子分层可能有帮助的原因可能有很多。我的用例是客户希望将他们的（已经存在的）帖子构建成问题，其中子帖子是一个问题的文章（父帖子）。

这很容易通过将查询限制为仅显示没有父母的帖子来实现，使用。

```
 'post_parent' => 0, 
```

在您的查询 $args.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-19T09:08:21.337

WP 4.9.*

上面的解决方法让友好的 URL 变得疯狂。

我将层次结构添加到任何现有帖子类型的解决方案：

```
add_filter( 'register_post_type_args', 'add_hierarchy_support', 10, 2 );
function add_hierarchy_support( $args, $post_type ){

    if ($post_type === 'post') { // <-- enter desired post type here

        $args['hierarchical'] = true;
        $args['supports'] = array_merge($args['supports'], array ('page-attributes') );
    }

    return $args;
} 
```

在 /wp-admin/options-permalink.php 重新保存 wp 设置

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-09T12:30:32.923

我来这里是为了实现：

1.  将页面属性添加到 post_type 帖子以添加父帖子
2.  能够将页面模板添加到 post_type 帖子
3.  能够在 post_type 帖子上获得分层永久链接结构

我能够使用[接受的答案](https://stackoverflow.com/a/40261005/2100636)来完成 1 和 2，但不能完成 3。

**注意**：要完全让 2 工作，您需要在页面模板的模板评论中指定 post_type ，如下所示：

```
<?php
/*
Template Name: Your Post Template Name
Template Post Type: post
*/ 
```

对于 3，我发现一个插件破坏了我的 post_type 页面，而且它是很多非常糟糕的、无人维护的代码。

所以我写了一个解决方案来完成这一切，借用[这个答案](https://stackoverflow.com/a/40261005/2100636)：

（用 4.9.8 测试）

```
<?php

add_action('registered_post_type', 'make_posts_hierarchical', 10, 2 );

// Runs after each post type is registered
function make_posts_hierarchical($post_type, $pto){

    // Return, if not post type posts
    if ($post_type != 'post') return;

    // access $wp_post_types global variable
    global $wp_post_types;

    // Set post type "post" to be hierarchical
    $wp_post_types['post']->hierarchical = 1;

    // Add page attributes to post backend
    // This adds the box to set up parent and menu order on edit posts.
    add_post_type_support( 'post', 'page-attributes' );

}

/**
 * Get parent post slug
 * 
 * Helpful function to get the post name of a posts parent
 */
function get_parent_post_slug($post) {
  if (!is_object($post) || !$post->post_parent) {
    return false;
  }

  return get_post($post->post_parent)->post_name;
}

/**
 * 
 * Edit View of Permalink
 * 
 * This affects editing permalinks, and $permalink is an array [template, replacement]
 * where replacement is the post_name and template has %postname% in it.
 * 
 **/
add_filter('get_sample_permalink', function($permalink, $post_id, $title, $name, $post) {
  if ($post->post_type != 'post' || !$post->post_parent) {
    return $permalink;
  }

  // Deconstruct the permalink parts
  $template_permalink = current($permalink);
  $replacement_permalink = next($permalink);

  // Find string
  $postname_string = '/%postname%/';

  // Get parent post
  $parent_slug = get_parent_post_slug($post);

  $altered_template_with_parent_slug = '/' . $parent_slug . $postname_string;
  $new_template = str_replace($postname_string, $altered_template_with_parent_slug, $template_permalink);

  $new_permalink = [$new_template, $replacement_permalink];

  return $new_permalink;
}, 99, 5);

/**
 * Alter the link to the post
 * 
 * This affects get_permalink, the_permalink etc. 
 * This will be the target of the edit permalink link too.
 * 
 * Note: only fires on "post" post types.
 */
add_filter('post_link', function($post_link, $post, $leavename){

  if ($post->post_type != 'post' || !$post->post_parent) {
    return $post_link;
  }

  $parent_slug = get_parent_post_slug($post);
  $new_post_link = str_replace($post->post_name, $parent_slug . '/' . $post->post_name, $post_link);

  return $new_post_link;
}, 99, 3);

/**
 * Before getting posts
 * 
 * Has to do with routing... adjusts the main query settings
 * 
 */
add_action('pre_get_posts', function($query){
  global $wpdb, $wp_query;

  $original_query = $query;
  $uri = $_SERVER['REQUEST_URI'];

  // Do not do this post check all the time
  if ( $query->is_main_query() && !is_admin()) {

    // get the post_name
    $basename = basename($uri);
    // find out if we have a post that matches this post_name
    $test_query = sprintf("select * from $wpdb->posts where post_type = '%s' and post_name = '%s';", 'post', $basename);
    $result = $wpdb->get_results($test_query);

    // if no match, return default query, or if there's no parent post, this is not necessary
    if (!($post = current($result)) || !$post->post_parent) {
      return $original_query;
    }

    // get the parent slug
    $parent_slug = get_parent_post_slug($post);
    // concat the parent slug with the post_name to get most of the url
    $hierarchal_slug = $parent_slug . '/' . $post->post_name;

    // if the concat of parent-slug/post-name is not in the uri, this is not the right post.
    if (!stristr($uri, $hierarchal_slug)) {
      return $original_query;
    }

    // pretty high confidence that we need to override the query.
    $query->query_vars['post_type'] = ['post'];
    $query->is_home     = false; 
    $query->is_page     = true;  
    $query->is_single   = true; 
    $query->queried_object_id = $post->ID;  
    $query->set('page_id', $post->ID);

    return $query;
  }

}, 1); 
```

您可以将其保存到文件中`custom-posts-hierarchy.php`并将其包含在主题中的 functions.php 文件中，或者您可以添加到顶部：

```
/*
Plugin Name: Custom Posts Hierarchy
Plugin URI:
Description: Add page attributes to posts and support hiearchichal
Author: Angela Murrell
Version:
Author URI: 
*/ 
```

并将其放入您的插件文件夹中。祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T09:03:00.007

*Wordpress 中的帖子*应该是典型的按时间顺序排列的博客帖子。*页面*是为静态内容而设计的，它们可以以开箱即用的层次结构进行组织。

对于任何页面，您都可以选择父页面。这样，您可以创建具有多个子级的嵌套层次结构。听起来像你需要的。

查看[Wordpress 文档](https://codex.wordpress.org/Pages#Organizing_Your_Pages)了解详细信息。

如果你有一个深而复杂的树结构，一个插件可能会帮助你管理它，比如[Wordpress Page Tree](https://wordpress.org/extend/plugins/page-tree/)。它提供了比默认的 Wordpress 页面列表更好的界面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-06T11:46:26.777

使用类似的插件`CPT UI`，您可以创建自定义帖子类型并将其设置为具有分层树。

然后只需检查是否`page-attribute`为此自定义帖子类型设置了帖子类型，并且您的帖子现在具有分层状态。

[https://wordpress.org/plugins/custom-post-type-ui/](https://wordpress.org/plugins/custom-post-type-ui/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T09:08:03.390

最好的解决方案是创建自定义分类法 [1]：[http](http://codex.wordpress.org/Function_Reference/register_taxonomy) ://codex.wordpress.org/Function_Reference/register_taxonomy并创建主要的 slug - 书籍或其他东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-07T08:28:04.853

存在插件，它为以下创建层次结构`post`：

**[https://wordpress.org/plugins/add-hierarchy-parent-to-post/](https://wordpress.org/plugins/add-hierarchy-parent-to-post/)**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-01T07:55:03.510

这不是更好的选择吗？

```
register_post_type( 'MYPOSTTYPE',
    array(
        'labels' => array(
            'name' => __( 'MYPOSTTYPE' ),
            'singular_name' => __( 'MYPOSTTYPE' )
        ),
        'supports' => array('title', 'editor', 'page-attributes'),
        'public' => true,
        'has_archive' => true,
        'hierarchical' => true,
        'rewrite' => array('slug' => 'MYPOSTTYPE'),
    )
); 
```

我已经添加了：

'分层' => 真的，

它有效。

# java - 如何在 oracle XE 中创建数据库？

> ID：10750938
> 
> 赞同：6
> 
> 时间：2012-05-25T08:19:35.083
> 
> 标签：java, database, oracle

在oracle XE中，有一个预装的数据库，关于员工和部门等等，但是我想创建一个新的数据库，我知道我可以在命令行中完成，但是我查看了数据库主页，我只发现创建表, 在 GUI 或浏览器中，我需要创建自己的数据库，并创建一个只能访问该数据库而不能访问员工数据库的用户

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T08:30:25.670

> 我认为您的意思是“模式”而不是“数据库”。安装程序创建一个名为 XE 的数据库，该数据库内部是一个名为 HR 的模式。要创建其他模式，您可以使用任何 Oracle 工具，如 SQL *Plus 或 Database Control，您只需创建一个新用户帐户（因为 user=schema）。但是，Oracle 可能比 SQL* Plus 更喜欢的是，您使用他们放在 Win2K 桌面上的快捷方式访问计算机上的 XE“主页”，然后单击管理链接

在此处阅读更多信息：[http ://www.dbforums.com/oracle/1605421-creating-new-db-express-edition.html](http://www.dbforums.com/oracle/1605421-creating-new-db-express-edition.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-07T07:26:04.040

这是文本模式下的步骤，其中 img-snapshots 被丢弃...

'''先决条件：应该有管理员权限

'''本文档仅涵盖 Microsoft Windows 版本的 Oracle XE

'''我已经为 Oracle XE 11g 做了这个......我希望它对于所有版本的 Oracle XE 都是一样的......

1) 安装 Oracle XE

2) 确保您已记下您在安装过程中提供的系统密码。

3) 安装后，点击启动 Oracle XE 服务`Start Database`

4) 打开 oracle web 仪表板，- 通过单击开始页面。

5) 在 Web 仪表板中创建新用户。

```
a.  In the Getting Started web page, click on – “Application Express”

b.  Login as system user

c.  Now create new-user under Application Express, give the db-username,application-express-user-name as same for convenience. 
```

6）一旦创建了db_user，打开sql_plus

7) `connect sys as sysdba`并给出`system`用户密码，

8) 将 sysdba 角色授予 created-db

`grant sysdba to {database};` 例如`grant sysdba to pcbscheduler;`

9）现在您已完成在 XE 中创建新数据库（因为它有限。）

10) 尝试从 Oracle SQL Developer 连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:31:35.397

在 oracle xe 中我觉得有点奇怪；你必须创建一个用户。以该用户身份登录，然后您可以创建数据库对象。

您可以从所谓的数据库主页进行操作；如果你想真正探索你的选择；创建用户后；您可以安装 sql developer 并与之连接；它对我来说更直观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T04:39:42.633

将以下代码保存在批处理文件（例如 createOraDbWin.bat）中。更改 app_name、ora_dir 等参数值，以管理权限运行文件。批处理文件创建一个基本的 oracle 数据库：

**注意**：可能需要很长时间（根据资源可用性大约需要 30 分钟）

```
REM ASSUMPTIONS
rem oracle xe has been installed
rem oracle_home has been set
rem oracle_sid has been set
rem oracle service is running

REM SET PARAMETERS
set char_set =al32utf8
set nls_char_set =al16utf16

set ora_dir=d:\app\db\oracle
set version=11.2.0.0
set app_name=xyz
set db_name=%app_name%_db
set db_sid=%db_name%_sid
set db_ins=%db_name%_ins
set sys_passwd=x3y5z7
set system_passwd=1x4y9z

set max_log_files=32
set max_log_members=4
set max_log_history=100
set max_data_files=254
set max_instances=1

set version_dir=%ora_dir%\%version%
set db_dir=%version_dir%\%db_name%

set instl_temp_dir=%db_dir%\instl\script

set system_dir=%db_dir%\system
set user_dir=%db_dir%\user
set undo_dir=%db_dir%\undo
set sys_aux_dir=%db_dir%\sysaux
set temp_dir=%db_dir%\temp
set control_dir=%db_dir%\control

set pfile_dir=%db_dir%\pfile
set data_dir=%db_dir%\data
set index_dir=%db_dir%\index
set log_dir=%db_dir%\log
set backup_dir=%db_dir%\backup
set archive_dir=%db_dir%\archive

set data_dir=%db_dir%\data
set index_dir=%db_dir%\index
set log_dir=%db_dir%\log
set backup_dir=%db_dir%\backup
set archive_dir=%db_dir%\archive
set undo_dir=%db_dir%\undo
set default_dir=%db_dir%\default

set system_tbs=%db_name%_system_tbs
set user_tbs=%db_name%_user_tbs
set sys_aux_tbs=%db_name%_sys_aux_tbs
set temp_tbs=%db_name%_temp_tbs
set control_tbs=%db_name%_control_tbs

set data_tbs=%db_name%_data_tbs
set index_tbs=%db_name%_index_tbs
set log_tbs=%db_name%_log_tbs
set backup_tbs=%db_name%_backup_tbs
set archive_tbs=%db_name%_archive_tbs
set undo_tbs=%db_name%_undo_tbs
set default_tbs=%db_name%_default_tbs

set system_file=%system_dir%\%db_name%_system.dbf
set user_file=%user_dir%\%db_name%_user.dbf
set sys_aux_file=%sys_aux_dir%\%db_name%_sys_aux.dbf
set temp_file=%temp_dir%\%db_name%_temp.dbf
set control_file=%control_dir%\%db_name%_control.dbf

set data_file=%data_dir%\%db_name%_data.dbf
set index_file=%index_dir%\%db_name%_index.dbf
set backup_file=%backup_dir%\%db_name%_backup.dbf
set archive_file=%archive_dir%\%db_name%_archive.dbf
set undo_file=%undo_dir%\%db_name%_undo.dbf
set default_file=%default_dir%\%db_name%_default.dbf

set log1_file=%log_dir%\%db_name%_log1.log
set log2_file=%log_dir%\%db_name%_log2.log
set log3_file=%log_dir%\%db_name%_log3.log

set init_file=%pfile_dir%\init%db_sid%.ora
set db_create_file=%instl_temp_dir%\createdb.sql
set db_drop_file=dropdb.sql

set db_create_log=%instl_temp_dir%\db_create.log
set db_drop_log=db_drop.log

set oracle_sid=%db_sid%

REM WRITE DROP DATABASE SQL COMMANDS TO FILE
echo shutdown immediate;>%db_drop_file%
echo startup mount exclusive restrict;>>%db_drop_file%
echo drop database;>>%db_drop_file%

REM EXECUTE DROP DATABASE SQL COMMANDS FROM THE FILE    
rem sqlplus -s "/as sysdba" @"%db_drop_file%">%db_drop_log%

REM DELETE WINDOWS ORACLE SERVICE
rem oradim -delete -sid %db_sid%

REM CREATE DIRECTORY STRUCTURE
md %system_dir%
md %user_dir%
md %sys_aux_dir%
md %temp_dir%
md %control_dir%

md %pfile_dir%
md %data_dir%
md %index_dir%
md %log_dir%
md %backup_dir%
md %archive_dir%
md %undo_dir%
md %default_dir%
md %instl_temp_dir%

REM WRITE INIT FILE PARAMETERS TO INIT FILE
echo db_name='%db_name%'>%init_file%
echo memory_target=1024m>>%init_file%
echo processes=150>>%init_file%
echo sessions=20>>%init_file%
echo audit_file_dest=%user_dir%>>%init_file%
echo audit_trail ='db'>>%init_file%
echo db_block_size=8192>>%init_file%
echo db_domain=''>>%init_file%
echo diagnostic_dest=%db_dir%>>%init_file%
echo dispatchers='(protocol=tcp) (service=%app_name%xdb)'>>%init_file%
echo shared_servers=4>>%init_file%
echo open_cursors=300>>%init_file%
echo remote_login_passwordfile='exclusive'>>%init_file%
echo undo_management=auto>>%init_file%
echo undo_tablespace='%undo_tbs%'>>%init_file%
echo control_files = ("%control_dir%\control1.ora", "%control_dir%\control2.ora")>>%init_file%
echo job_queue_processes=4>>%init_file%
echo db_recovery_file_dest_size = 10g>>%init_file%
echo db_recovery_file_dest=%log_dir%>>%init_file%
echo compatible ='11.2.0'>>%init_file%

REM WRITE DB CREATE AND ITS RELATED SQL COMMAND TO FILE    
echo startup nomount pfile='%init_file%';>>%db_create_file%
echo.>>%db_create_file%

echo create database %db_name%>>%db_create_file%
echo user sys identified by %sys_passwd%>>%db_create_file%
echo user system identified by %system_passwd%>>%db_create_file%
echo logfile group 1 ('%log1_file%') size 100m,>>%db_create_file%
echo group 2 ('%log2_file%') size 100m,>>%db_create_file%
echo group 3 ('%log3_file%') size 100m>>%db_create_file%
echo maxlogfiles %max_log_files%>>%db_create_file%
echo maxlogmembers %max_log_members%>>%db_create_file%
echo maxloghistory %max_log_history%>>%db_create_file%
echo maxdatafiles %max_data_files%>>%db_create_file%
echo character set %char_set %>>%db_create_file%
echo national character set %nls_char_set %>>%db_create_file%
echo extent management local>>%db_create_file%
echo datafile '%system_file%' size 325m reuse>>%db_create_file%
echo sysaux datafile '%sys_aux_file%' size 325m reuse>>%db_create_file%
echo default tablespace %default_tbs%>>%db_create_file%
echo datafile '%default_file%'>>%db_create_file%
echo size 500m reuse autoextend on maxsize unlimited>>%db_create_file%
echo default temporary tablespace %temp_tbs%>>%db_create_file%
echo tempfile '%temp_file%'>>%db_create_file%
echo size 20m reuse>>%db_create_file%
echo undo tablespace %undo_tbs%>>%db_create_file%
echo datafile '%undo_file%'>>%db_create_file%
echo size 200m reuse autoextend on maxsize unlimited;>>%db_create_file%
echo.>>%db_create_file%

echo @?\rdbms\admin\catalog.sql>>%db_create_file%
echo.>>%db_create_file%

echo @?\rdbms\admin\catproc.sql>>%db_create_file%
echo.>>%db_create_file%

echo create spfile from pfile='%init_file%';>>%db_create_file%
echo.>>%db_create_file%

echo shutdown immediate;>>%db_create_file%
echo.>>%db_create_file%

echo startup;>>%db_create_file%
echo.>>%db_create_file%

echo show parameter spfile;>>%db_create_file%
echo.>>%db_create_file%

REM CREATE WINDOWS ORACLE SERVICE
oradim -new -sid %db_sid% -startmode auto

REM EXECUTE DB CREATE SQL COMMANDS FROM FILE
sqlplus -s "/as sysdba" @"%db_create_file%">%db_create_log%

pause 
```

欢迎您的指正和改进！

# orm - 如何在 Doctrine 2 中丢弃对实体的未刷新更改？

> ID：10750939
> 
> 赞同：11
> 
> 时间：2012-05-25T08:19:47.347
> 
> 标签：orm, doctrine, doctrine-orm

我长期使用基于 SQL 查询的数据库访问级别。但现在我决定使用 ORM Doctrine2。目前，我对实体工作流程有一个概念上的误解。

最好的例子描述：

```
 try {
   $user = $entityManager->find('User', 1);
   $user->setName('New name');
   $entityManager->flush();
 }
 catch (...)
 {
   // !we are here: changes failed and $user-row in DB was not updated
 }

 // ...

 $user = $entityManager->find('User', 1);
 $user->setOther('Other');
 $entityManager->flush(); // <- in this request both [other] and [name] fields will be updated to DB, but only [other] update expected 
```

在第一个代码块中，我获取了 $user 对象。更改了 [name] 并尝试保存它，但失败了。在第二个块（与第一个块无关）中，我再次获取了 $user 对象。但是 ORM 返回的链接与第一次相同的对象。所以这个对象已经改变了 [name] 属性。在第二个块的最后一行，我只想保存 [other] 文件，但 [other] 和 [name] 都将被更新。

解决这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T19:24:31.580

这是设计使然。

实体管理器确保您始终为给定的 id 获取相同的实体。毕竟，这就是身份的含义。只能有一个 ID 为 1 的唯一用户。

如果你想从数据库中“刷新”一个实体，[EntityManager::refresh()](http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.EntityManager.html#_refresh)会为你做这件事。从文档：

> 从数据库中刷新实体的持久状态，覆盖任何尚未持久的本地更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T02:34:14.790

您必须执行命令：`$entityManager->detach($userEntity);`。调用 flush 后，更改将不会反映在数据库中。其他实体将起作用。

# android - Android屏幕动画到两边

> ID：10750946
> 
> 赞同：0
> 
> 时间：2012-05-25T08:20:26.017
> 
> 标签：android, animation

我可以在更改屏幕时添加动画。ViewFlipper 的动画取决于用户选择的方向。可以在运行时设置几次动画吗？我还有其他解决方案可以根据选择的按钮为屏幕设置不同的动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:48:20.893

可以在运行时设置几次动画。您还可以使用计时器设置不同的动画

# c# - 使用 ExeCOMServer 时无法将类型为“...”的 COM 对象转换为接口类型“...”

> ID：10750947
> 
> 赞同：3
> 
> 时间：2012-05-25T08:20:31.697
> 
> 标签：c#, com, interface, casting

我正在使用这个 exe com 服务器：

[https://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/CSExeCOMServer/ExeCOMServer.cs](https://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/CSExeCOMServer/ExeCOMServer.cs)

*   我的 prog 是一个 com 应用程序
*   我的 com 方法采用另一个 com 对象是`void Init(AppsScriptRunningContext rc);`
*   在这种方法中，我尝试读出一个属性并得到这个错误

> 无法将“AppsScriptLib.AppsScriptRunningContextClass”类型的 COM 对象转换为接口类型“AppsScriptLib.IAppsScriptRunningContext”。此操作失败，因为 IID 为“{4D2E5723-87C2-49C1-AA28-ED2D88275100}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)）

如果我的应用程序不是 com 服务器而是普通的 com 应用程序，则没有错误。这就是为什么我认为错误是由 exe com 服务器产生的。

[https://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/CSExeCOMServer/ExeCOMServer.cs](https://cfx.svn.codeplex.com/svn/Visual%20Studio%202008/CSExeCOMServer/ExeCOMServer.cs)

问候，克里斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T13:31:46.930

这是一个非常令人遗憾的代码示例，成功的几率非常接近于零。它是 MSDN 论坛支持小组的产品，他们的工作未在 Microsoft 进行同行评审。一名团队成员[后来承认](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/b6ba4d6b-fd36-4ad3-af65-8b5d9217c231/)这不是正确的做法。

该代码的一个问题是它完全忽略了 MSDN 文档中关于 RegistrationServices.RegisterTypeForComClients() 方法的备注：

> 请注意，不支持使用平台调用调用非托管 CoRegisterClassObject 和 CoDisconnectObject 方法注册和注销 COM 对象。

不幸的是，没有解释为什么不支持它。关键问题是 COM 接口总是需要在进程外激活情况下进行编组。这是通过在客户端创建一个*代理*来完成的，该代理具有与原始接口相同的所有方法，但其实现的方法通过 RPC 将方法的参数发送到另一个进程。在服务器端，存根执行相同但相反的角色，使用方法参数构建堆栈框架并进行实际的方法调用。

在 .NET 中创建代理和存根非常容易，反射使它变得简单。由框架中内置的 Remoting 管道完成。然而这在 COM 中并不容易，它没有任何类似于反射的东西。它有两种基本的实现方式，第一种是用 IDL 语言编写 COM 接口定义，然后用 midl.exe 编译它。它可以自动生成执行编组的 C 源代码，您可以从中构建 DLL。然后需要在 HKCR\Interface 注册表项中正确注册该 DLL，以便 COM 可以在需要封送接口时找到并加载 DLL。如果您的接口派生自 IDispatch 并将其自身限制为与 OLE 自动化兼容的参数类型，则可以使用第二种方法。然后，您可以生成类型库并使用标准编组器。

这是 .NET 进程外服务器中不会​​发生的部分。您没有 midl.exe 来帮助您生成代理/存根 DLL，并且您没有获得使用标准编组器的注册帮助。这就是错误消息的真正含义，这里的 E_NOINTERFACE 确实意味着它找不到任何方法来编组接口。是的，糟糕的错误信息。

.NET 中官方支持的创建进程外 COM 服务器的方法是将其注册到 COM+。使用 System.EnterpriseServices.ServicedComponent 类作为基类。MSDN 库文章[在此处](http://msdn.microsoft.com/en-us/library/ty17dz7h%28VS.80%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T12:24:53.667

我得到了一个改变主线程的建议，它帮助了我！

在主线程（主要在“Program.cs”）中找到 [STAThread] 行并将其更改为 [MTAThread]。

# objective-c - 从 osx 中的代码更改键盘布局

> ID：10750951
> 
> 赞同：1
> 
> 时间：2012-05-25T08:20:39.623
> 
> 标签：objective-c, cocoa

我使用下面的代码从代码更改键盘布局，但出现在第二行的警告下方。

```
//warning
Assigning to 'TISInputSourceRef' (aka 'struct __TISInputSource *') from 'const void *' discards qualifiers 
```

* * *

```
//code
CFArrayRef sourceList = TISCreateInputSourceList (NULL, false);
TISInputSourceRef wantedSource= CFArrayGetValueAtIndex(sourceList, 0);
TISSelectInputSource(wantedSource); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:28:35.617

我认为你需要转换返回的值`CFArrayGetValueAtIndex`，它的类型是`const void*`：

```
TISInputSourceRef wantedSource = (TISInputSourceRef)CFArrayGetValueAtIndex(sourceList, 0); 
```

# mysql - 具有多个外键链接到同一个主键的表

> ID：10750955
> 
> 赞同：3
> 
> 时间：2012-05-25T08:21:02.300
> 
> 标签：mysql, sql

最近，我很难用我的 MySQL 数据库获得我想要的查询结果——目前我不确定问题出在数据库还是实际查询上。

基本上它是一个包含这些表的足球运动员数据库：

```
(player): player_id (primary), playerName
(match): match_id (primary), playerID1, playerID2, playerID3, etc.. 
```

我想查询数据库，以便返回匹配数据库中的属性，但返回的是球员的姓名而不是他们的 ID。

我可以让它为一名球员工作，但不能为其他球员工作。这是代码：

```
SELECT p.Name 
FROM `match` m
inner join `player` p on p.player_id=m.playerID1 
```

但是当我添加第二个玩家时，`p.Name`已经映射到了，`playerID1`所以它不起作用。

我怀疑它的数据库设计得不是很好，但欢迎任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:29:00.077

那个数据库设计让你头疼。您应该通过添加一个同时具有 a和 a的表格来分解`Match`和之间的关系，从而允许尽可能多的玩家链接到 a ，而不必为每个玩家设置一个字段。`Player``MatchPlayer``MatchID``PlayerID``Match`

但是，对于您的查询，您必须执行以下操作：

```
SELECT p.Name 
FROM `match` m
INNER JOIN `player` p 
    ON p.player_id IN (m.playerID1, m.playerID2, m.playerID3) //etc 
```

**演示 SQLFiddle[这里](http://sqlfiddle.com/#!3/e3c6c/1)**

# sharepoint - 共享点。拒绝访问文档库项目

> ID：10750961
> 
> 赞同：0
> 
> 时间：2012-05-25T08:21:22.960
> 
> 标签：sharepoint, access-denied, sharepointdocumentlibrary, registering, tagprefix

我遇到了共享点权限的问题。当我尝试打开文档库项目 (.aspx) 时 - 访问被拒绝。

我创建了具有读取权限的特定组，在其上包含用户并将其应用于 doc lib 和 doc lib 项 (.aspx)。Doc lib 允许查看项目，但随后尝试打开它 - 引发访问被拒绝。

doc lib 中的 .aspx 有一个 webpart。当我尝试加载空白 .aspx - 一切正常，权限 - 允许，但是当我尝试注册 webpart Tagprefix:
<%@ Register Tagprefix="ICTWebparts" Namespace="ICT.WebParts" Assembly="ICT, Version= 1.0.0.0，Culture=neutral，PublicKeyToken=cece68aca32fb0ba" %> - 访问被拒绝。

有什么问题？为什么当我尝试在 aspx 中注册 .dll 时它会引发访问被拒绝？

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:30:14.397

我以前遇到过这种问题，当你在一个带有外部 .aspx 的 webpart 中时，你需要强制使用默认的凭据，即你登录的凭据，就像这样（在后面的代码中）：

```
request.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

# php - 通过附加值合并 2 个数组

> ID：10750963
> 
> 赞同：4
> 
> 时间：2012-05-25T08:21:29.590
> 
> 标签：php, arrays, merge

我有 2 个数组

```
$a = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>4);

$b = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>5); 
```

我如何将它们合并到一个这样的数组中：

```
Array
(
    [v1] => 1
    [v2] => 2
    [v3] => 3
    [v4] => Array
        (
            [0] => 4
            [1] => 5
        )
) 
```

我试过使用`array_merge`& `array_merge_recursive`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:30:03.337

您可以使用以下代码：

```
$a = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>4);
$b = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>5);
$c = array();
foreach($a as $m => $n) {
   if (($b[$m] != $n))
      $c[$m] = array($n, $b[$m]);
   else
      $c[$m] = $n;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:38:55.757

```
$result = array_intersect_assoc($a, $b);

foreach (array_diff_assoc($a, $b) as $k => $v)
  $result[$k] = array($v, $b[$k]); 
```

**更新：**
anubhava 的解决方案很好。可以这样简化：

```
$c = array();
foreach($a as $k => $v) 
  $c[$k] = $b[$k] == $v ? $v : array($v, $b[$k]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:26:23.410

```
$a = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>4);
$b = array('v1'=>1,'v2'=>2,'v3'=>3,'v4'=>5);
$results = array();

foreach ($a as $key=>$elem) {
  $results[$key][] = $elem;
  if (!in_array($b[$key], $results[$key])) {
    $results[$key][] = $b[$key];
  }
} 
```

# php - WAMP 运行速度非常慢

> ID：10750964
> 
> 赞同：25
> 
> 时间：2012-05-25T08:21:35.067
> 
> 标签：php, localhost, wampserver

我在 Windows 7 上使用**WAMP** ( *localhost )。*

当我运行*本地主机*时，加载页面需要超过 1 分钟。没有查询或数据库连接。如果只是一个 HTML 页面，也需要同样的时间，如果连接了 Internet，则可以正常工作。 **如果 Internet 已连接，则它可以完美运行。当 Internet 不可用时，加载一个简单页面需要 1 分钟以上。**

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-09-13T12:58:22.433

对我有用的解决方案是禁用**cgi_module**。使用以下方法之一：

**（方法1）**左键单击WAMP > Apache > Apache Modules > 取消选中**“cgi_module”**

**（方法 2）**编辑**httpd.conf**并通过注释此行来禁用 CGI 模块的加载：

```
LoadModule cgi_module modules/mod_cgi.so 
```

评论只是在前面添加一个**#**，如下所示：

```
#LoadModule cgi_module modules/mod_cgi.so 
```

重新启动 Apache 服务，您应该一切顺利。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-08T14:34:00.743

设置 mysql_connect('127.0.0.1'... 而不是 mysql_connect('localhost'....

[WAMP/XAMPP 在 localhost 上的响应非常慢](https://stackoverflow.com/questions/8432601/wamp-xampp-localhost-responding-very-slow)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-07T23:49:02.673

我在这里尝试了很多答案，但没有取得多大成功。发生瓶颈的是 PHP 本身。我禁用了 Xdebug，我的页面加载时间从 ~1200 毫秒变为 ~275 毫秒。到目前为止，这是最大的单一收益发生的地方。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-20T14:35:28.160

不要使用主机名“localhost”，而是在 MySQL 连接字符串中使用 IP 地址。

通常，您的 WAMP 安装位于`C:\wamp`. [使用记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)编辑此文件：

```
C:\wamp\www\wp-config.php 
```

代替

```
define("DB_HOST", "localhost"); 
```

和

```
define("DB_HOST", "127.0.0.1"); 
```

重新启动 WAMP 服务。

[您可以在此网站](https://web.archive.org/web/20150930194225/http://www.boonigo.com/slow-wamp-on-windows-8-1/)上查看更多详细信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-04T10:47:29.967

访问我的本地内容`127.0.0.1`而不是`localhost`为我工作（因此 DNS 解析问题可能隐藏在某处）：

*   `http://127.0.0.1/mysite`很快

*   `http://localhost/mysite`是缓慢的

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-21T13:41:12.667

将文件中的 PHP SMTP 服务器`php.ini`从更改`localhost`为`127.0.0.1`，在我的香草副本的第 1084 行，成功了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-07-14T04:40:16.440

以下是我为在 Windows 10 Pro 64 位中加快 WAMP 所做的更改列表：

1.  编辑*主机*文件并添加：`127.0.0.1 localhost`
2.  编辑*主机*文件并添加：（`127.0.0.1 myVhosts`注意*：我在与第一个相同的行中添加了所有其他条目。我没有创建多行将 127.0.0.1 指向不同的地方。所以我只有一个 127.0.0.1 然后下一个对它，任何虚拟主机或我想指向它的任何其他东西*）
3.  编辑*my.ini*并添加：（`bind-address="127.0.0.1"`在*[wampmysqld64]*下方）
4.  从 Apache禁用*cgi_module* ** → *Apache Modules* → *cgi_module*（取消选中它）
5.  从*php.ini*禁用*XDEBUG 扩展*
**   因为我有防病毒和防火墙，所以将*httpd.exe*和*mysqld.exe*文件（以及 PHP CLI 和 CGI​​ 二进制文件，以及 PHP 的 DLL 文件）添加到异常中。*   在*httpd.conf*中开启*EnableMMAP*和*EnableSendfile***   在*php.ini中将**realpath_cache_size*设置为*4096k***   最后，编辑了项目的配置文件，并将*localhost*替换为*127.0.0.1*。***

 **我还建议查看这篇文章：*[WAMP is Running Very Slow](https://www.devside.net/wamp-server/wamp-is-running-very-slow)*。他们涵盖了许多可能对您也有帮助的更改。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-15T02:57:12.103

我正在运行 Windows 8，而 WAMP 非常慢。我之前建议的都做了。有区别；WAMP`httpd.conf`默认具有：

```
AcceptFilter http none
AcceptFilter https none 
```

所以我做了相反的想法：也许这不再需要了。它似乎工作正常：

```
 #AcceptFilter http none
 #AcceptFilter https none 
```

也许在所有 Windows 版本中都不是问题。在 httpd 你读到：

```
# AcceptFilter: On Windows, none uses accept() rather than AcceptEx() and
# will not recycle sockets between connections. This is useful for network
# adapters with broken driver support, as well as some virtual network
# providers such as vpn drivers, or spam, virus or spyware filters.
#AcceptFilter http none
#AcceptFilter https none 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-01T23:18:04.097

[在主机文件](http://en.wikipedia.org/wiki/Hosts_(file))中取消注释这一行对我有用：

```
# 'localhost' name resolution is handled within DNS itself.
    127.0.0.1       localhost
#   ::1             localhost 
```

取消注释`127.0.01 localhost`。在那之后它超级快。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-18T16:11:04.770

添加到[tvanc 的答案](https://stackoverflow.com/questions/10750964/wamp-is-running-very-slow/26247091#26247091)`php.ini`中，还使用`xdebug.profiler_enable=Off`或禁用 Xdebug 分析器`xdebug.profiler_enable=0`。

您还可以增加 PHP 内存限制。`memory_limit`在 中搜索`php.ini`。

*[WAMP is Running Very Slow](https://www.devside.net/wamp-server/wamp-is-running-very-slow)*也有一些有用的提示，这里不一一列举。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-15T08:11:45.667

我的问题规模较小。一个空的 PHP 页面从几乎即时呈现到大约 1 秒。

原来是我的 Xdebug 设置导致了这个问题。我已经`xdebug.remote_enable=on`在`php.ini`文件中设置了，这导致了延迟。在我开始之前，调试会话使用的是 idekey，所以我只在启动调试会话时遇到了延迟。评论这条线解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-12T03:47:15.953

关闭 cgi_module 也适用于 WAMP + WordPress。我想分享你也可以使用[WampServer](https://en.wikipedia.org/wiki/WampServer) 2.5 中的 WYSIWYG 来做到这一点。

*   单击任务栏中的 WAMP 快速启动图标。
*   将鼠标悬停在*Apache* → *Apache 模块上*
*   单击以从 cgi_module 中删除复选标记

WAMP 应该会自行重启，并且您应该会看到速度加快。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-16T16:05:28.317

这听起来很简单，但如果您使用[Notepad++ 的](http://en.wikipedia.org/wiki/Notepad%2B%2B)菜单*Run* → *Launch in <browser>*选项（例如*Launch in Firefox*），它会加载为`file:///C:/wamp/www/dynamic/index.php`而不是`localhost/dynamic/index.php`.

如果是这种情况，请尝试自行前往 URL 栏中的 localhost/dynamic/index.php，它会加载得更快。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-23T21:48:10.880

就我而言，缓慢是因为我使用的是公司[VPN](http://en.wikipedia.org/wiki/Virtual_private_network)，并且还在 Chrome 中设置了代理 URL。关闭 VPN，一切都加载得很快。

为了在 VPN 上运行，我从 Chrome 中删除了代理设置。那时事情大部分都奏效了，但从仪表板搜索 WordPress 插件或主题仍然失败。

我在 wp-config.php 中添加了以下内容，然后搜索也起作用了：

```
 /** proxy settings */
 define('WP_PROXY_HOST', 'proxy.url.com');
 define('WP_PROXY_PORT', '1234');
 define('WP_PROXY_USERNAME', '');
 define('WP_PROXY_PASSWORD', '');
 define('WP_PROXY_BYPASS_HOSTS', 'localhost'); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-09-08T15:01:47.053

我专门在 Chrome 中遇到了这个问题。清空浏览器缓存完全解决了它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-03-05T01:30:29.690

[在我将WAMP](http://en.wikipedia.org/wiki/WAMP) Server 从 2.2 升级到 2.4后，这个问题一直困扰着我。

我最终找到了解决方案，详见这篇博文： *[Apache server 2.4.6 hangs after serving requests from Internet Explorer 10/11](https://stijndewitt.com/2014/01/10/apache-hangs-ie11/)*

将以下内容添加到 Apache 的配置文件 (httpd.conf) 中：

```
AcceptFilter http none
AcceptFilter https none 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-05-16T13:00:51.437

我遇到了同样的问题并更改了所有提到的选项。

在那之后，我看到一个非常重的 Drupal 数据库导致了这个问题。清除看门狗表和缓存解决了这个问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-29T05:10:51.483

我尝试了一切，但没有任何效果。然后我发现通过删除所有会话引用 WAMP 快了 20 倍。由于会话被锁定，因此当同一个应用程序请求多个页面时，速度非常慢。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-04-25T17:42:37.310

我跟着所有这些和链接没有喜悦。我的 Wamp v7.3.16-2 的金牌是 在 MySQL 的 my.ini 文件中设置**bind-address=:: 。**响应时间从最短 2 秒变为零。

感谢[http://regularcoder.com/tutorial/wamp-optimization-for-better-performance/#comment-30](http://regularcoder.com/tutorial/wamp-optimization-for-better-performance/#comment-30)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-03-18T08:12:11.600

我发现不重新加载页面有很大帮助，而是转到另一个页面，然后单击上一页的链接（如果存在）

我这样做，因为我有一个菜单栏，所以我只需单击另一个链接，然后返回。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-02-27T22:18:01.697

仅运行 WAMP。退出使用 Internet 的其他应用程序。

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2016-09-18T15:02:18.923

*在使用以下 DNS 服务器地址*→*首选 DNS 服务器*中添加`127.0.0.1`为您的 DNS**

# javascript - 如何强制 Backbone.js 不删除“默认”值的兄弟姐妹？

> ID：10750968
> 
> 赞同：0
> 
> 时间：2012-05-25T08:21:50.807
> 
> 标签：javascript, backbone.js

这个问题很难用语言描述，所以如果需要澄清，请告诉我。我对backbone.js 很陌生，所以这可能是一个愚蠢的问题。

我想使用骨干轻松创建图表（highcharts 库）。我想在模型中的“默认”对象中保留一个具有所有常见 highcharts 设置的大型 json 对象。然后，我想覆盖一些变量，例如包含图表需要呈现的 dom 元素名称的变量。

这是我的代码：

```
var app = {
    Views:{},
    Models:{},
    Collections:{},
    init:function(){
        new app.Views.PageView();
    }
};

$().ready(_.bind(app.init,app));

 app.Models.chart = Backbone.Model.extend({
    defaults:{
        chart:{
           renderTo:'charts',
           backgroundColor:'#e1e1e1',
           height:200,
           width:200,
           defaultSeriesType:'spline',
           spacingRight:40,
           animation:false
        },
        colors:['#000', '#AA4643'],
        title:{
           text:''
        },
//lots lots lots of other attributes defined here.

app.Views.ChartView = Backbone.View.extend({
    render : function() {
        var chartContainer = this.model.attributes.chart.renderTo;
        $('#charts').append("<div id="+chartContainer+"></div>");

        new Highcharts.Chart(this.model.toJSON());
        return this;
    }
});

var chartDetails = [{chart:{renderTo:'div1'}},{chart:{renderTo:'div2'}}];

app.Views.PageView = Backbone.View.extend({
    el: $("#charts"),

    initialize : function(){
        this.chartCollection = new app.Collections.Charts(chartDetails);
        this.render();
    },

    render: function(){
        var that = this;
        _.each(this.chartCollection.models, function(item){
            that.renderChart(item);
        })
    },

    renderChart : function (item) {
        var chartView = new app.Views.ChartView({
            model: item
        });
        chartView.render();
    }
}); 
```

所以，这里真正的问题是：当我定义一个新集合时，我提供了“chartDetails”对象，它覆盖了我在模型中指定的“默认”。因此，它不会更新 defaults.charts.renderTo 属性，而是替换完整的 defaults.charts 对象。除了我要替换的值之外，如何让它保留存储在那里的所有内容（背景颜色等）？

提前谢谢k

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:00:01.113

一个非常简单的方法，如果你有你的模型的平面表示，那就是沿着这些路线，你可以定义`defaults`为一个函数

```
app.Models.Chart = Backbone.Model.extend(
{
    // we're using constructor to set this.options 
    //  as defaults gets called before initialize
    constructor: function (attrs, options)
    {
        this.attrs = attrs;
        Backbone.Model.prototype.constructor.apply(this, arguments)
    },
    // defaults can be defined as a function, yeah!
    defaults: function ()
    {
        var defaults = {
            renderTo: 'charts',
            backgroundColor: '#e1e1e1',
            height: 200,
            width: 200,
            defaultSeriesType: 'spline',
            spacingRight: 40,
            animation: false
        };
        return _.extend({}, defaults, this.attrs);
    }
}); 
```

我更喜欢这种实现而不是像这样的实现，因为您不会一次性将引导程序捆绑在一起，这实际上可能会触发不需要的事件：

```
app.Models.Chart = Backbone.Model.extend(
{
    initialize: function (attrs, options)
    {
        // this might trigger events, even if you make it {silent: true}
        // and is why I prefer the above implementation instead
        this.set(attrs); 
    },
    defaults: {
        renderTo: 'charts',
        backgroundColor: '#e1e1e1',
        height: 200,
        width: 200,
        defaultSeriesType: 'spline',
        spacingRight: 40,
        animation: false
    };
}); 
```

但是由于您的模型具有深度嵌套而不是平面表示，因此您将不得不做一些额外的魔术来仅替换嵌套对象中的单个键/值对，因为如果您决定扩展它，您将覆盖整个对象如上例所示。

谢天谢地，jQuery 的`extend`方法，而不是 underscore.js 的`extend`方法，为我们提供了一个`deep`参数，以便您可以这样做：

```
app.Models.Chart = Backbone.Model.extend(
{
    // we're using constructor to set this.options 
    //  as defaults gets called before initialize
    constructor: function (attrs, options)
    {
        this.attrs = attrs;
        Backbone.Model.prototype.constructor.apply(this, arguments)
    },
    // defaults can be defined as a function, yeah!
    defaults: function ()
    {
        var defaults = {
            renderTo: 'charts',
            backgroundColor: '#e1e1e1',
            height: 200,
            width: 200,
            defaultSeriesType: 'spline',
            spacingRight: 40,
            animation: false
        };
        return $.extend(true, {}, defaults, this.attrs); // thank you jQuery!
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:36:27.057

您可以使用初始化函数进行一些自定义数据处理。

```
myModel = Backbone.Model.extends({
initialize: function(myObject){
// do some stuff with myObject
}
}); 
```

# azure - Unity3D Azure 访问和跨域

> ID：10750972
> 
> 赞同：0
> 
> 时间：2012-05-25T08:22:01.447
> 
> 标签：azure, unity3d

目前，我正在按照此处的建议在 Windows Azure WebRole 中运行 Unity Web Player App。

[在 Windows Azure 中部署 Unity3D](https://stackoverflow.com/questions/10739720/deploy-unity3d-in-windows-azure)

我对我的统一应用程序有点坚持。我刚刚在 Windows azure 上部署了我的应用程序。有关详细信息，我的网络播放器文件位于 siteroot/0/.unity3d

我使用 Uniweb 与我的网络角色进行通信（与 .unity3d 文件所在的角色相同，因此，它是同一个域）

但是当我将 HttpPost 发送到我的[http://asp.net](http://asp.net)页面时，我得到了这个异常： SocketPolicyClient1: Incoming GetPolicyStreamForIP

```
SocketPolicyClient1: About to BeginConnect to x.x.x.x:843

SocketPolicyClient1: About to WaitOne

SocketPolicyClient1: WaitOne timed out. Duration: 3002.1718

SocketPolicyClient1: Caught exception: BeginConnect timed out

Exception: Unable to connect, as no valid crossdomain policy was found 
```

但我有一个位于 siteroot/0/ 的 crossdomain.xml

```
xml version="1.0"

cross-domain-policy

allow-access-from domain="*" to-ports="1-65536"

cross-domain-policy 
```

我不知道为什么我的统一应用程序不与我的（相同的）[http://asp.net](http://asp.net) webrole 通信。当我构建 Windows 应用程序时它运行良好，但使用网络播放器它失败了。

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:07:35.060

根据上面的日志，我怀疑您在角色启动时没有正确绑定端口。要完成，您需要以下内容：

将以下端点添加到您的 Azure 应用程序：

```
<Endpoints>
 <InputEndpoint name="Unity3DPort843" protocol="tcp" port="843" />
</Endpoints> 
```

之后，在您的 Role OnStart() 方法中，您将需要执行以下操作以开始对该端口的侦听：

```
TcpListener Unity3DPortListener = new TcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Unity3DPort843"].IPEndpoint);
Unity3DPortListener.Start(); 
```

我只是根据问题描述在上面提出建议，所以请尝试让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:48:55.240

真奇怪。它不再使用 Uniweb，但在 www 类中构建它仍然给我 SecurityException: No valid crossdomain policy available to allow access。
我在 blob 存储中有我的 .unity3d（不是同一个域）

# java - 将字符串解析为 Double.NaN

> ID：10750975
> 
> 赞同：9
> 
> 时间：2012-05-25T08:22:15.207
> 
> 标签：java, string, nan

我想让用户编辑带有双数据的字段。我想允许`Double.NaN`（使值无效）。是否有一种通用方法（预定义的字符串）可以`Double.NaN`从方法中解析出来`Double.valueOf(String)`而不在后台检查它？

有一个特殊的字符，看起来像一个带有问号的菱形（在 HTML 中），它的行为类似于 NaN，但是 - 好吧 - 用户不会在他们的键上找到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T08:24:24.087

您可以通过`+NaN`or`-NaN`或`NaN`to`valueOf()`并让它返回一个 NaN。该[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)提供了完整的详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:24:44.910

`parseDouble("NaN")`将返回一个`NaN`值：

```
System.out.println(Double.isNaN(Double.parseDouble("NaN")); 
```

# c# - C# DES ECB 加密

> ID：10750977
> 
> 赞同：-1
> 
> 时间：2012-05-25T08:22:27.013
> 
> 标签：c#, encryption, des, ecb

我在用 C# 加密某些东西时遇到了困难。

我有 3 个变量。第一个是 16 位十六进制，我们称之为 X 值 IE 0072701351979990 第二个也是一个 16 位十六进制值，我们称之为 Y IE 3008168011FFFFFF

这两个值必须经过 XOR 运算才能获得 DES-ECB 加密的密钥。

因此导致 307a66934068666f 。现在这就是我的加密密钥块。然后我把它作为我的数据块，它是 64 位用于加密 0E329232EA6D0D73

现在我有下面的代码来加密这个。加密的结果应该再次与数据块进行异或运算，并产生 64 位的结果。不是这种情况。

这是我的加密代码

```
$ public static string DESEncrypt(string keyBlock,string dataBlock){
        DES desEncrypt = new DESCryptoServiceProvider();
        byte[] keyBlockBytes = BitConverter.GetBytes(Convert.ToInt64(keyBlock, 16));
        byte[] dataBlockBytes = BitConverter.GetBytes(Convert.ToInt64(dataBlock, 16));
        desEncrypt.Mode = CipherMode.ECB;
        desEncrypt.Key = keyBlockBytes;
        ICryptoTransform transForm = desEncrypt.CreateEncryptor();
        MemoryStream enecryptedStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(enecryptedStream, transForm, CryptoStreamMode.Write);
        cryptoStream.Write(dataBlockBytes, 0, dataBlockBytes.Length);
        cryptoStream.FlushFinalBlock();
        byte[] encryptedData = new byte[enecryptedStream.Length];
        enecryptedStream.Position = 0;
        enecryptedStream.Read(encryptedData, 0, encryptedData.Length);
        string enCryptedHex = BitConverter.ToString(encryptedData);

        return enCryptedHex.Replace("-",""); 
    } 
```

我究竟做错了什么？

**更新的问题** 我已经从 CodeInChaos 测试了上述解决方案。它确实给了我一个 64 位的结果。但是还是有问题。

这是我更新的代码。

keyblock值为ababababababababab，数据块值为215135734068666F。

生成的 64 位结果应再次与数据块进行异或。

最终答案应该是 414945DD33C97C47 但我得到 288a08c01a57ed3d。

为什么它不正确？

这是供应商文档中的加密规范。

加密是符合 FIPS 46-3 的 DEA，ECB 模式下的单个 DES，使用具有奇校验的单个 64 位 DES 密钥。

```
$      public static string DESEncrypt(string keyBlock,string dataBlock){
        DES desEncrypt = new DESCryptoServiceProvider();
        byte[] keyBlockBytes = BitConverter.GetBytes(Convert.ToInt64(keyBlock, 16));
        byte[] dataBlockBytes = BitConverter.GetBytes(Convert.ToInt64(dataBlock, 16));
        desEncrypt.Mode = CipherMode.ECB;
        desEncrypt.Key = keyBlockBytes;
        desEncrypt.Padding = PaddingMode.None;
        ICryptoTransform transForm = desEncrypt.CreateEncryptor();
        MemoryStream enecryptedStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(enecryptedStream, transForm, CryptoStreamMode.Write);
        cryptoStream.Write(dataBlockBytes, 0, dataBlockBytes.Length);
        cryptoStream.FlushFinalBlock();
        byte[] encryptedData = enecryptedStream.ToArray();
        string enCryptedHex = BitConverter.ToString(encryptedData);
        enCryptedHex = enCryptedHex.Replace("-", "");
        long iDeaEncrypt = Convert.ToInt64(enCryptedHex, 16);
        long iDataBlock = Convert.ToInt64(dataBlock, 16);
        long decoderKey = iDeaEncrypt ^ iDataBlock;
        string decKeyHex = Convert.ToString(decoderKey, 16);
        return decKeyHex;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:27:53.727

我认为您需要将填充设置为`PaddingMode.None`：

```
desEncrypt.Padding = PaddingMode.None; 
```

但是你真的应该好好想想，如果 DES 和 ECB 真的是你想要的。

* * *

顺便提一句

```
byte[] encryptedData = new byte[enecryptedStream.Length];
encryptedStream.Position = 0;
encryptedStream.Read(encryptedData, 0, encryptedData.Length); 
```

可以替换为：

```
encryptedData = encryptedStream.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T10:59:42.727

也许有必要将 DES Provider 设置为使用 FIPS 46-3 标准，以便 DEA 使用 FIPS 46-3 中指定的置换表等。不幸的是，我也在为同样的问题而苦苦挣扎。

# java - Jetty 8 中静态页面的基本 HTTP 身份验证

> ID：10750978
> 
> 赞同：1
> 
> 时间：2012-05-25T08:22:30.357
> 
> 标签：java, jetty

我的静态内容配置如下：

```
 ContextHandler staticContext = new ContextHandler();
    staticContext.setContextPath("/");
    staticContext.setResourceBase(".");
    staticContext.setClassLoader(Thread.currentThread().getContextClassLoader());

    ResourceHandler resourceHandler = new ResourceHandler();
    resourceHandler.setDirectoriesListed(true);
    resourceHandler.setWelcomeFiles(new String[]{"index.html"});

    resourceHandler.setResourceBase(webDir);

    staticContext.setHandler(resourceHandler); 
```

现在我想为我的所有静态文件设置 Basic HTTP Auth。我怎样才能做到这一点？

**附言**。我正在使用带有 web.xml 的嵌入式 Jetty

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:15:42.203

`ResourceHandler#handle()`用类似的东西覆盖：

```
public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    String authHeader = request.getHeader("Authorization");

    if (authHeader != null && authHeader.startsWith("Basic ")) {
        String[] up = parseBasic(authHeader.substring(authHeader.indexOf(" ") + 1));
        String username = up[0];
        String password = up[1];
        if (authenticateUser(username, password)) {
            super.handle(target, baseRequest, request, response);
            return;
        }
    }

    response.setHeader("WWW-Authenticate", "BASIC realm=\"SecureFiles\"");
    response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Please provide username and password");
}

private boolean authenticateUser(String username, String password) {
    // Perform authentication here
    return true; // .. if authentication is successful
}

private String[] parseBasic(String enc) {
    byte[] bytes = Base64.decodeBase64(enc.getBytes());
    String s = new String(bytes);
    int pos = s.indexOf( ":" );
    if( pos >= 0 )
        return new String[] { s.substring( 0, pos ), s.substring( pos + 1 ) };
    else
        return new String[] { s, null };
} 
```

以上`Base64.decodeBase64`来自 Apache Commons Codec。当然，您可以找到一个为您执行基本身份验证的库，但在这里您可以看到幕后发生的事情。另一种方法可能是使用基本身份验证过滤器并将其安装到您的上下文中。

# javascript - javascript dom innerhtml scrollheight 性能

> ID：10750983
> 
> 赞同：1
> 
> 时间：2012-05-25T08:23:02.743
> 
> 标签：javascript, performance, dom, innerhtml

我的问题分为两部分：

## 问题的第1部分：

测试一个：

```
 t1 = new Date().getTime();
    for (i=0; i<205; i++) {
        document.getElementById("divTest").innerHTML = sText;

    }           
    t2 = new Date().getTime();
    alert(t2-t1); 
```

结果：16ms

测试b；

```
 document.getElementById("divTest").innerHTML = sText;
    t1 = new Date().getTime();
    for (i=0; i<205; i++) {         
        if ( document.getElementById("divTest").scrollHeight > document.getElementById("divTest").clientHeight ) {
            j++;
        }
    }           
    t2 = new Date().getTime();
    alert(t2-t1); 
```

结果：2ms

所以理论上，如果我们将两者都放在循环中，我们应该绕过：18 ms，但测试 c 证明我错了：

测试c：

```
 t1 = new Date().getTime();      
    for (i=0; i<205; i++) {
        document.getElementById("divTest").innerHTML = sText;       
        if ( document.getElementById("divTest").scrollHeight > document.getElementById("divTest").clientHeight ) {
            j++;
        }
    }           
    t2 = new Date().getTime();
    alert(t2-t1); 
```

结果：240ms

惊人的 240 毫秒！！！浏览器之间的行为是一致的。为什么会这样？

## 问题的第 2 部分：

自从

```
document.getElementById("divTest").innerHTML = sText; 
```

通常很慢，我在这里找到了一种更快的方法：http: [//blog.stevenlevithan.com/archives/faster-than-innerhtml](http://blog.stevenlevithan.com/archives/faster-than-innerhtml)，因此最终实现（测试 c）变为：

```
 t1 = new Date().getTime();      
    for (i=0; i<205; i++) {
        el = document.getElementById("divTest").cloneNode(false);
        el.innerHTML = sText;
        document.getElementById("divTest").parentNode.replaceChild(el, document.getElementById("divTest"));
        if (el.scrollHeight > el.clientHeight) {
            j++;
        }
    }           
    t2 = new Date().getTime();
    alert(t2-t1); 
```

结果为 105 毫秒，优于 240 毫秒

但是我想知道是否通过 parentnode 或其他一些 dom 操作方式我可以获得访问 scrollheight 和 clientheight 的更快方法，就像我用直接 DOM 操作替换 innerHTML 一样？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:28:14.563

1.  当您更改 时`innerHTML`，浏览器必须重新计算 DOM。但是，如果您`innerHTML`多次更改，它可以通过在需要之前不重新计算 DOM 来进行优化。因此，与其他情况相比，它需要的时间要短得多。但是，当您访问它时，`scrollHeight`它需要更新的 DOM，因此它每次都必须停止并重新计算。
2.  您可以通过缓存正在修改的元素来更好地优化。`var div = document.getElementById('divTest')`然后用于`div`引用元素。除此之外，您仍然面临每次重新计算 DOM 的障碍。总的来说，你不应该让这种事情像那样迭代 200 多次，即使你做的事情不到半秒也不会造成破坏。

# database - CouchBase 1.8 和 2.0 Erlang SDK？为什么 Erlang 被排除在外

> ID：10750986
> 
> 赞同：6
> 
> 时间：2012-05-25T08:23:30.590
> 
> 标签：database, erlang, nosql, couchdb, couchbase

[我真的很高兴看到CouchBase](http://www.couchbase.com)团队在为我们提供出色的 NoSQL 解决方案方面所做的出色工作。然而，尽管与 ruby​​、PHP、java 或 Python 相比，erlang Web 开发人员很少，但使用 erlang 的开发人员数量正在增加。

这让我想到了为什么在他们的[SDK 页面上](http://www.couchbase.com/develop)，他们总是忽略[Erlang](http://erlang.org)。有了[yaws web Server](http://yaws.hyber.org)、[Mochiweb](https://github.com/mochi/MochiWeb)和许多其他 Erlang Web 库，他们到底为什么在他们的 NoSQL 领域不支持 Erlang。发现他们在构建 DBMS 时使用它但他们没有为该语言提供客户端/SDK，这非常令人不安。

现在，问题是：我在某处读到它是因为 Erlang Web 开发没有钱。这是他们给出的唯一理由吗？

还有谁知道为什么 Couch Base 一直拒绝为他们的 NoSQL 数据库提供 Erlang SDK？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T21:35:16.717

我认为主要问题是对 Erlang SDK 的需求量。Java、C#、Ruby 和 Python 的开发人员远多于 Erlang。

话虽如此，应该可以将 Erlang 与 Couchbase 一起用于某些功能。Couchbase 支持 memcached API，因此基本的键/值查找应该可以工作。你可以试试这个库，看看它是否有效：[erlmc](https://github.com/JacobVorreuter/erlmc)。Couchbase 2.0 功能（例如视图）可能无法访问。此外，Couchbase 是开源的，所以如果你真的想的话，你可以尝试编写自己的客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:08:12.350

`couchbase`今年四月，我接到了公司的电话。他们问我使用哪种语言进行编程。

我认为这与如何`couchbase`赚钱有关。从网站的信息来看，他们为客户的项目团队提供项目团队成员，按天或小时收费。

这些成员（`couchbase`员工）应该使用与他们的客户相同的语言，大多数客户使用 c#、java、python。所以他们只提供这些语言的sdk，而不是erlang。

对于中长期（1年或2年），我认为不可能`erlang sdk`提供`couchbase.`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T15:54:42.903

[cberl](https://github.com/chitika/cberl)是一个基于 NIF 的 Erlang 客户端，它使用 libcouchbase。我已经开始工作，但没有花太多时间。它没有经过全面测试并且有一些损坏的部分，但所有基本功能都在那里，所以值得一试。[现在它在couchbase 网站](http://www.couchbase.com/develop)上被列为实验性 SDK，所以我认为它会在短时间内获得更多的牵引力并减少错误。

# struts2 - Struts2 中的 NoSuchMethodException

> ID：10750991
> 
> 赞同：1
> 
> 时间：2012-05-25T08:23:39.343
> 
> 标签：struts2

我有出生日期的文本字段。当用户输入无效日期时，例如一个字符串，错误消息成功显示为 fielderror。但是在我的控制台中，我收到了这个错误：

java.lang.NoSuchMethodException: Profile.setBirthDate([Ljava.lang.String;)

我是否错过了一些导致我遇到错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:18:43.120

在您的 Action 类中，您没有一个名为 的方法`setBirthDate(String birthDate)`，添加它您的问题应该得到解决。

请注意检查您是否已将所有 getter 和 setter 放置在所有属性的操作类中。

我认为在你的 JSP 中你有：

```
<s:textfield name="birthDate" /> 
```

Struts 将尝试将其映射到`setBirthDate(String string)`，因为您的操作中缺少此方法，因此`NoSuchMethodException`

更新：

要将字符串转换为日期：

```
public class MyStringToDateConverter extends StrutsTypeConverter {
    public Object convertFromString(Map context, String[] values, Class toClass) {
       //Parse String to get a date object
    }

    public String convertToString(Map context, Object o) {
       // Get the string from object o
    }
 } 
```

如果您在动作类中使用注释，则添加`@Conversion()`到您的动作中

```
@Conversion()
public class MyAction extends ActionSupport{
    public Date myDate = null;

    @TypeConversion(converter="MyStringToDateConverter") //Fully qualified name so if this class is in mypackage then converter will be "myPackage.MyStringToDateConverter"
    public void setMyDate(Date date) { 
        this.myDate = date;
    }
} 
```

如果您不想使用 Annotation，则可以查看[官方文档](http://struts.apache.org/2.0.14/docs/type-conversion.html)。

# c++ - c++模板混淆

> ID：10750995
> 
> 赞同：0
> 
> 时间：2012-05-25T08:24:04.097
> 
> 标签：c++

我正在使用模板编写一些代码，但出现了一些链接错误：

> [链接器错误] 未定义对 `Vector::Vector(Vector const&)' 的引用

但我在 .cpp 中编写了这个函数。这是代码。

```
template <class T>

Vector<T>::Vector(Vector const& r)
{

m_nSize = r.size();
int i = 0;
m_pElements = new T[m_nSize];
    while(i <= m_nSize)
{
    m_pElements[i] = r[i];
    i++;
}
} 
```

它在.h中声明：

```
template <class T>

class Vector
{

public:

Vector():m_nSize(0){ m_pElements = (T*)NULL; }
Vector(int size):m_nSize(size){ m_pElements = new T[size]; }
Vector(const Vector& r);
virtual ~Vector(){ delete m_pElements; }
T& operator[](int index){ return m_pElements[index];}
int size(){return m_nSize;}
int inflate(int addSize);
private:

    T *m_pElements;
    int m_nSize;
}; 
```

我现在真的很困惑......我应该怎么做才能纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:26:41.740

[您应该使实现可见](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.12)。移动

```
template <class T>
Vector<T>::Vector(Vector const& r)
{
    //....
} 
```

从`cpp`文件到标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:27:13.057

请参阅 C++ 常见问题解答 (http://www.parashift.com/c++-faq-lite/templates.html#faq-35.13)。基本上将代码放在头文件中。

# python - 你如何模拟一个 python 类并为每个实例化获取一个新的 Mock 对象？

> ID：10750996
> 
> 赞同：32
> 
> 时间：2012-05-25T08:24:10.400
> 
> 标签：python, mocking, python-unittest, python-mock

好的，我知道[手册](http://www.voidspace.org.uk/python/mock/)
中提到了这一点，并且可能与和/或有关，​​但是一个简单直接的示例将极大地帮助我。 `side_effect``return_value`

我有：

```
class ClassToPatch():
   def __init__(self, *args):
       _do_some_init_stuff()

   def some_func():
       _do_stuff()

class UUT():
    def __init__(self, *args)
       resource_1 = ClassToPatch()
       resource_2 = ClassToPatch() 
```

现在，我想对这个`UUT`类进行单元测试，并模拟`ClassToPatch`. 知道`UUT`该类将恰好实例化两个`ClassToPatch`对象，我希望 Mock 框架为每个实例化返回一个新的 Mock 对象，这样我以后就可以分别断言对每个对象的调用。

如何`@patch`在测试用例中使用装饰器来实现这一点？即，如何修复以下代码示例？

```
class TestCase1(unittest.TestCase):

    @patch('classToPatch.ClassToPatch',autospec=True)
    def test_1(self,mock1,mock2):
        _assert_stuff() 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-25T09:25:52.760

这是一个快速的'n'dirty示例来帮助您：

```
import mock
import unittest

class ClassToPatch():
   def __init__(self, *args):
       pass

   def some_func(self):
       return id(self)

class UUT():
    def __init__(self, *args):
        resource_1 = ClassToPatch()
        resource_2 = ClassToPatch()
        self.test_property = (resource_1.some_func(), resource_2.some_func())

class TestCase1(unittest.TestCase):
    @mock.patch('__main__.ClassToPatch', autospec = True)
    def test_1(self, mock1):
        ctpMocks = [mock.Mock(), mock.Mock()]
        ctpMocks[0].some_func.return_value = "funky"
        ctpMocks[1].some_func.return_value = "monkey"
        mock1.side_effect = ctpMocks

        u = UUT()
        self.assertEqual(u.test_property, ("funky", "monkey"))

if __name__ == '__main__':
    unittest.main() 
```

我已经添加`test_property`到 UUT 以便单元测试做一些有用的事情。现在，没有 mock`test_property`应该是一个包含两个`ClassToPatch`实例 id 的元组。但是对于模拟，它应该是元组：`("funky", "monkey")`。

我使用了[`side_effect`](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.side_effect)模拟对象的属性，以便在初始化程序`ClassToPatch`中的每次调用时返回一个不同的实例。`UUT`

希望这可以帮助。

**编辑：**哦，顺便说一句，当我运行单元测试时，我得到：

```
.
----------------------------------------------------------------------
Ran 1 test in 0.004s

OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-24T15:45:39.107

这是另一个更通用的版本，可以处理创建的任意数量的实例：

```
class TestUUT:
    def test_init(self, mocker):
        class MockedClassToPatchMeta(type):
            static_instance = mocker.MagicMock(spec=ClassToPatch)

            def __getattr__(cls, key):
                return MockedClassToPatchMeta.static_instance.__getattr__(key)

        class MockedClassToPatch(metaclass=MockedClassToPatchMeta):
            original_cls = ClassToPatch
            instances = []

            def __new__(cls, *args, **kwargs):
                MockedClassToPatch.instances.append(
                    mocker.MagicMock(spec=MockedClassToPatch.original_cls))
                MockedClassToPatch.instances[-1].__class__ = MockedClassToPatch
                return MockedClassToPatch.instances[-1]

        mocker.patch(__name__ + '.ClassToPatch', new=MockedClassToPatch)

        UUT()

        # since your original code created two instances
        assert 2 == len(MockedClassToPatch.instances) 
```

如果您需要对每个实例进行更彻底的验证，您可以访问`MockedClassToPatch.instances[0]`或`MockedClassToPatch.instances[1]`.

I've also created [a helper library](https://pypi.org/project/mock-generator/) to generate the meta class boilerplate for me. To generate the needed code for your example I wrote:

```
print(PytestMocker(mocked=ClassToPatch, name=__name__).mock_classes().mock_classes_static().generate()) 
```

# c++ - vim ctag 导致 fun 的错误定义

> ID：10750997
> 
> 赞同：4
> 
> 时间：2012-05-25T08:24:11.840
> 
> 标签：c++, vim, ctags

我正在使用 vim 的 ctag 浏览 c++ 代码。在许多情况下，它工作得很好。但是在以下情况下会出现一些错误：

```
vector<int> v;
v.push_back(10); 
```

当我从这里的“push_back”导航时，它把我带到 /usr/include/c++/4.4.7/bits/basic_string.h 的 push_back()

我想知道这是否是 vim/ctags 的错误或缺点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T20:59:31.627

ctags 只是跳转到第一个到第一个匹配的标签：“push_back()”。它不知道“v”的类型是“std::vector”。解决此问题的唯一方法是不使用 ctags。我尝试了不同的 vim 插件，但它们中的大多数都不能正常工作或根本不能用于 c++。

有插件 clang_complete 和 YouCompleteMe，它们使用 clang C++ 编译器生成语法树。它们用于自动完成，但它们也提供在 c++ 代码中导航的功能。YouCompleteMe 比 clang_complete 快得多，但我认为它更难安装和配置。

[https://github.com/Valloric/YouCompleteMe](https://github.com/Valloric/YouCompleteMe)

[https://github.com/Rip-Rip/clang_complete](https://github.com/Rip-Rip/clang_complete)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:03:27.190

Vim 的标签导航不支持语法树。默认情况下，它会跳转到标签文件中的第一个匹配标签。

# delphi - 将项目从 XE 升级到 XE2 后 vrc 文件出现问题

> ID：10750999
> 
> 赞同：2
> 
> 时间：2012-05-25T08:24:21.790
> 
> 标签：delphi, delphi-xe2

我试图在 XE2 中构建一个项目。那在 Delphi XE 中正确构建，但在 XE2 上我有一个错误。

出现此文件，我在 ICON 上有错误

此 vrc 文件以这些行结尾：

```
MAINICON ICON "Project1_Icon1.ico"

PLATFORMTARGETS RCDATA {1} 
```

我在主图标上有错误。

如果我删除这一行一切都很好。

你能解释一下为什么我看到这个文件以及如何解决这个问题吗？

**注意**：我的同事没有这个问题，而是有一个向导将项目从 XE 升级到 XE2。而且他们没有vrc文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T08:15:02.773

我已经解决了在记事本++中打开项目（.dproj）的问题，并且我已经搜索了 MAINICON。然后我删除行'< Icon_MainIcon> Project1_Icon1.ico </Icon_MainIcon>'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T15:28:01.400

为了在 XE3 中修复同样的错误，我重新加载了图标。

在德尔福 IDE 中：

*   转到项目 -> 选项，您可能会收到有关缺少图标的错误消息。我忽略了他们。

*   单击树中的“应用程序”

*   单击“加载图标..”并重新选择图标。

然后我就可以运行该程序了。运行程序后，.vrc 文件不再在我的项目文件夹中。

注意：在发布和调试模式之间切换时，您会收到相同的图标错误。只需为两种模式重新加载图标即可。

有关详细信息，请参阅[Delphi 7 到 Delphi XE2 .res 文件问题](https://stackoverflow.com/questions/11906963/delphi-7-to-delphi-xe2-res-file-issue)。

我不是 Delphi 的粉丝，也没有太多的经验，所以我无法解释为什么会发生这种情况。