# StackOverflow 问答 10972000-10972999

# linux - 在命令行和 Xargs 中批量重命名文件

> ID：10972002
> 
> 赞同：36
> 
> 时间：2012-06-10T20:13:26.407
> 
> 标签：linux, shell, unix, command-line, xargs

所以，我有以下结构：

```
.
..
a.png
b.png 
c.png 
```

我运行了一个命令来调整它们的大小

```
ls | xargs -I xx convert xx -resize xx.jpg 
```

现在我的目录看起来像这样

```
.
..
a.png.jpg
a.png
b.png.jpg
b.png
c.png.jpg
c.png 
```

第一个问题是，我如何重命名文件以便只有一个扩展名。不是两个。（基本上，我如何清理我原来的错误）？

第二个问题是，将来使用 xargs 时，如何将文件 simular 的扩展名更改为第二个命令？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-10-15T14:50:41.840

`xargs`这也可以通过`sed`更改文件扩展名来完成。

```
ls | grep \.png$ | sed 'p;s/\.png/\.jpg/' | xargs -n2 mv 
```

您可以打印原始文件名以及您想要的文件名。然后让 xargs 在 move 命令中使用这两个参数。对于单行，我还添加了一个 grep 来过滤掉任何不是 *.png 文件的内容。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-10T20:16:28.950

> 我如何重命名文件，以便我可以只有一个扩展名。

```
cd dir/with/messedup/files

for file in *.png.jpg; do
  mv "$file" "${file%.png.jpg}.jpg"
done 
```

> 将来，使用 xargs，如何将文件 simular 的扩展名更改为第二个命令？

据我所知，这是做不到的。最好的方法是使用带有参数替换的 for 循环，就像上面的那样：

```
for file in *.png; do
  convert "$file" -resize "${file%.png}.jpg"
done 
```

如果您在要转换的子目录中有文件，则可以通过管道`find`连接到`while read`循环：

```
find . -type f -name '*.png' |
while read file; do
  convert "$file" -resize "${file%.png}.jpg"
done 
```

***注意：***通常认为在 shell 脚本中使用 的输出是[个坏主意。](http://mywiki.wooledge.org/ParsingLs)`ls`虽然您的示例可能效果很好，但有很多示例无法正常工作。例如，如果您的文件名中碰巧有换行符（unix 允许），`ls`则可能不会为您转义。（这实际上取决于您的实现，这是不在`ls`脚本中使用的另一个原因；它的行为从一个框到下一个框变化很大。）如果您`find`在 while-read 循环或文件通配符（例如`*.png`）在 for 循环中。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-09T06:20:41.873

聚会迟到了，但这里是您可以使用 xargs 重命名文件的方法。假设您有一堆名为 fileN.svg.png 的文件，并且您想将它们命名为 fileN.png 其中 N 可以是一系列整数：

`ls *.svg.png | xargs basename -s .svg.png | xargs -I {} mv {}.svg.png {}.png`

第一个 xargs 使用 basename 剥离 .svg*和*.png 以获得一个公正的`filenameN`. 第二个 xargs 接收该裸名并使用替换来重命名文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-10T21:05:13.297

要清除您的错误，请尝试使用该`rename`实用程序。查看手册页以获取详细信息。

在您的情况下，`rename '.png.jpg' '.jpg' ./*`如果您的当前目录设置正确，您会这样做。

既然你`convert`有空，我假设你也有`mogrify`（`imagemagick`套件）。每当我想这样做时，我都会将文件复制到不同的目录中并`mogrify`改为使用。我通常只需要它来调整大小，但如果您也更改图像格式，`mogrify`将处理文件名（使用正确的文件名制作新文件）。

你会用它作为`mogrify -format jpg -resize [size] ./*.png`. 我不确定`-resize`没有几何参数应该做什么。它没有记录，也不能在我的机器上运行。

正如 Tim Pote 所说，我认为您不能让 xargs 分别处理文件名和扩展名。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-05T18:24:37.773

我参加这个聚会迟到了大约 3 年，我只是遇到了一个类似的问题，我自己也发现了。我有一个使用 inkscape 转换的 png 文件列表，因为 ImageMagick 的 svg 支持很差。

我最初通过以下方式转换它们：

```
find . -name "*.svg" -exec inkscape {} --export-png={}.png 
```

这当然导致了与上面发布的相同的问题。

```
file1.svg
file1.svg.png
file2.svg
file2.svg.png
file3.svg
file3.svg.png
file4.svg
file4.svg.png 
```

我想将 *.svg.png 重命名为 *.png，这就是我最终的结果......

```
find . -name "*.svg.png" -print0 | sed 's/.svg.png//g' | xargs -0 -I namePrefix mv namePrefix.svg.png namePrefix.png 
```

这做了三件事：

1.  在此目录中找到名为 *.svg.png 的文件，将 -print0 打印到标准输出
2.  sed 修改标准输出，基本上交换 .svg.png 什么都没有，所以我会得到：file1/file2/file3/file4
3.  xargs -0 从 sed 获取数据，-I 引用不带扩展名的文件名，然后将原始文件名 mv 引用为新文件名。namePrefix 这个词并没有什么特别之处，只是想说明一下。

**编辑**

我现在意识到这是最复杂的方法。可以简单地使用重命名命令。

```
rename 's/svg\.png/.png/' * 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-06T01:54:39.673

在对类似任务进行一些调查后，这是我的代码：

```
find . -maxdepth 1 -name '*.png' -print0 | sed 's/.png//g' | xargs -0 -I% -n 1 -P 8 convert -quality 100 %.png %.jpg 
```

推理：

*   重命名不会压缩文件（所以使用`convert`代替`mv`）
*   `ls \.png$ | xargs`不会处理路径/文件名中的空格
*   `find .`将在子文件夹中搜索，所以使用`-maxdepth 1`
*   `convert`不使用可用的 CPU，所以`-P8`（或`-P other`）
*   `sed`没有`'g'`最后不会替换所有文件（只有一个）
*   `sed 's/.png//g'`不会留下任何扩展名（basename 也可以工作，但之后没有`-print0`）
*   `parallel`- 可能更好的解决方案，但不适用于我的 Ubuntu 18.04 bash 4.4
*   `%`是用于替换的最小通用符号（与 相比`{} xx namePrefix`）
*   `-n2`参数适用，`xargs`但不能正常使用`-print0`（`n`要获取和传递的条目数`xargs`）
*   `-quality 100`默认魔法质量是 92（这很好），这里是 100% 以避免丢失任何东西

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-10T17:32:06.630

我的尝试来自：[https ://www.tecmint.com/linux-image-conversion-tools/](https://www.tecmint.com/linux-image-conversion-tools/)

```
ls -1 *.png | xargs -n 1 bash -c 'convert "$0" "${0%.png}.jpg"' 
```

使用并行

```
parallel convert '{}' '{.}.jpg' ::: *.png 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-17T19:58:43.057

我的解决方案类似于许多 xarg 解决方案，尤其类似于 Schleis 的解决方案。

这里的区别是一个完整的正则表达式操作，带有匹配引用，以及正确忽略不匹配文件的 sed 命令，因此您不需要预先过滤您的列表。

这对于带有空格和 shell 元数据的文件也是安全的。

`\2`将替换更改为任何所需的扩展名。

```
ls |
sed -nE 's/Rick\.and\.Morty\.(S03E[0-9]{2})\..*(\.[a-z0-9]{3})/"&" "Rick and Morty \1\2"/;T;p' |
xargs -n 2 mv 
```

## 解释

`-n`arg 告诉 sed 默认情况下不打印任何内容，如果前一个命令没有进行替换，该命令说`T`跳到脚本的末尾，该命令打印模式空间（仅在命令匹配时才命中）。`s``p``s`

替换中的`&`是对原始文件名匹配内容的引用。

如果我们`mv`在命令中替换为`bash -c 'echo "run($#) $@"' bash`then 我们可以看到`mv`将被调用的次数，以及参数 count 和 value：

```
$ ls |
  sed -nE 's/Rick\.and\.Morty\.(S03E[0-9]{2})\..*(\.[a-z0-9]{3})/"&" "Rick and Morty \1\2"/;T;p' |
  xargs -n 2 bash -c 'echo "run($#) $@"' bash
run(2) Rick.and.Morty.S03E02.720p.HDTV.x264-BATV.mkv Rick and Morty S03E02.mkv
run(2) Rick.and.Morty.S03E03.720p.HDTV.x264-BATV.mkv Rick and Morty S03E03.mkv
run(2) Rick.and.Morty.S03E04.720p.HDTV.x264-BATV.mkv Rick and Morty S03E04.mkv
run(2) Rick.and.Morty.S03E05.HDTV.x264-BATV[ettv].mkv Rick and Morty S03E05.mkv
run(2) Rick.and.Morty.S03E06.720p.HDTV.x264-BATV.mkv Rick and Morty S03E06.mkv
run(2) Rick.and.Morty.S03E06.HDTV.x264-BATV.mkv Rick and Morty S03E06.mkv
run(2) Rick.and.Morty.S03E07.720p.HDTV.x264-BATV[ettv].mkv Rick and Morty S03E07.mkv
run(2) Rick.and.Morty.S03E08.720p.HDTV.x264-BATV.mkv Rick and Morty S03E08.mkv
run(2) Rick.and.Morty.S03E09.720p.HDTV.x264-BATV.mkv Rick and Morty S03E09.mkv
run(2) Rick.and.Morty.S03E10.720p.HDTV.x264-BATV.mkv Rick and Morty S03E10.mkv 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-23T05:34:11.040

第一次回答，希望不会太惨。

我遇到了同样的麻烦，我设法结合[Schleis](https://stackoverflow.com/users/498699/schleis) [答案](https://stackoverflow.com/a/19384307/18284678)和[adrianN](https://stackoverflow.com/users/1912315/adriann)评论解决了它。问题在于某些带有空格字符的文件或 ext4 中允许的其他特殊文件。
它应该增加使用任何 UTF8 文件名的能力。就这个：

```
find . -type f -iname \*.png.jpg -print0 | sed -z 'p;s/\.png\.jpg/\.jpg/' | xargs -0 -n2 mv 
```

我读过（不记得在哪里）过去 sed（或 xarg？）在处理空字符时遇到了麻烦。好像就没有这种情况了。

我在下面为像我这样喜欢了解他们所做的事情而不仅仅是复制一些答案的人添加了一些解释。;-)

命令参数：

> 寻找 。：在当前目录中查找
> -type f ：常规文件（例如：不是设备、目录等）
> -iname ：根据文件名搜索，但匹配不区分大小写。以防万一您的图片软件写“PNG”而不是“png”
> -print0 ：分隔由 NULL 字符找到的内容

> sed -z ：将空字符视为要处理的不同文本元素的唯一分隔符；对于收到的文本和修改后的文本
> p ：写入第一个收到的行
> s/.png.jpg/.jpg/ ：用 .jpg 替换 .png.jpg 并写入

> xargs -0 ：输入项以空字符而不是其他任何字符终止
> -n2 ：将从 sed 接收到的两个参数发送到 mv

每个命令的作用：

> 寻找 ：

```
file1.png.jpgNULLfile2.png.jpgNULLfile3.png.jpgNULLfile4.png.jpg 
```

> sed

```
file1.png.jpgNULLfile1.jpgNULLfile2.png.jpgNULLfile2.jpgNULLfile3.png.jpgNULLfile3.jpgNULLfile4.png.jpgNULLfile4.jpg 
```

> xargs

```
mv file1.png file1.jpg  
mv file2.png file2.jpg  
mv file3.png file3.jpg  
mv file4.png file4.jpg 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-12-08T07:51:22.937

`find ./xx -name "*.png" -print0 |sed 's/.png$//g'|xargs -0 -I% mv %.png %.jpg`

我喜欢使用以下命令

```
find ./xx -name "*.png" -type f|while read FILE; do
  mv "$FILE" "$(echo $FILE|sed -e 's/.png$/.jpg/')";
done 
```

# apache - 无法获取使用了哪个 php.ini

> ID：10972003
> 
> 赞同：1
> 
> 时间：2012-06-10T20:13:27.867
> 
> 标签：apache, php

我正在使用 apache 2.2 网络服务器（win 7 32,php 5.2）。试图在apache中运行php文件

我在 apache conf 目录下的 httpd.conf 中添加了以下语句，以使 php 文件在 apache 下运行（参考：http: [//goo.gl/jxKI](http://goo.gl/jxKI)）

```
LoadModule php5_module "C:/Program Files/PHP/php-5.2.6-Win32/php5apache2_2.dll" 
```

一切正常我能够在 apache 下运行 php 文件

现在我想对 php.ini 进行一些更改，但找不到正在使用的 php.ini 文件。尝试在 php 安装文件夹 C:/Program Files/PHP/php-5.2.6-Win32/php.ini 中使用我的 php.ini，但该文件也没有使用。

```
phpinfo() gives path as c:\windows but there is no php.ini 
echo get_cfg_var('cfg_file_path'); doesn't return anything 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:20:31.610

你可以使用这个功能：

[php_ini_loaded_file](http://www.php.net/manual/en/function.php-ini-loaded-file.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:50:19.063

你写了：

> phpinfo() 给出路径为 c:\windows 但没有 php.ini

这意味着您的 .dll 需要 .dll 中的配置文件`c:\windows`。您的教程错误地建议在`c:\php\php.ini`. 将其移至`c:\windows`，根据自己的喜好对其进行编辑，它应该可以正常工作。

我会建议想要学习 PHP/Apache 的初学者首先使用现成的软件包，例如[WAMP Server](http://www.wampserver.com/en/)。手动安装需要更深入地了解 PHP（在某种程度上还有 Apache）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:53:17.280

这是因为 PHP 可以在*没有*php.ini 文件的情况下运行。

您的 Windows 软件包（实际上我认为所有软件包都附带它）应该带有以下两个文件：

*   `php.ini-development`
*   `php.ini-production`

将这两个中的任何一个重命名为`php.ini`并将其移动到搜索路径（例如`c:\windows`）将使 PHP 从该文件加载其配置。

确保在对 Apache 进行更改后重新启动它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:32:12.140

您可以尝试 phpinfo() 函数，该函数将列出 apache 正在使用的 php 变量的详细信息。我想你可以试试这个功能，它会告诉你加载了哪个 php.ini。或者，如果您使用自己的目录来存储项目文件，您可以使用 .htaccess 覆盖您的模块要求，或者您可以使用 php 函数来加载您的 php 模块。希望它会帮助你...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-12T08:45:43.760

您可以使用以下命令通过命令行（终端）快速检查：

```
php -i | grep /php.ini 
```

# ruby - 将 url 链接插入 Gtk::TextBuffer

> ID：10972004
> 
> 赞同：1
> 
> 时间：2012-06-10T20:13:32.680
> 
> 标签：ruby, hyperlink, web, gtk, ruby-gnome2

我从事基于[ruby​​-gnome2](http://ruby-gnome2.sourceforge.jp/)的 GUI 项目（[http://smartdict.net](http://smartdict.net) ） 。[我想在Gtk::TextBuffer](http://ruby-gnome2.sourceforge.jp/hiki.cgi?Gtk%3a%3aTextBuffer)元素中插入一个网络链接。我怎样才能做到这一点？

这是一个 ruby​​ 项目，但 C 或 Python 上的解决方案也很有用。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T05:41:07.673

我是这样做的：

正如 Micah 所说，您创建了一个标签，使文本看起来像一个链接（蓝色和下划线）。然后给TextView连接一个信号，这样当用户点击它时，它会调用一个方法打开url。您需要设计一种方法，让该方法知道要打开的链接，方法是在数组中跟踪它们，或者根据光标位置解析链接。那部分取决于你。

```
class myTextView  < Gtk::TextView

  def initialize
    signal_connect("button_release_event") { open_url() }   
    buffer.create_tag("blue", { "foreground" => "#0000FF", "underline" => Pango::UNDERLINE_SINGLE  })
    start_iter, end_iter = get_line_iters()
    buffer.apply_tag("blue", start_iter, end_iter)
  end

  def open_url()
     # open link here
  end

end 
```

这是一个标准的 Gtk 解决方案。我建议使用visualruby：

[http://visualruby.net](http://visualruby.net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:25:21.103

虽然我自己没有这样做，但我想你可以通过两种方式做到这一点：

1.  使用文本标签自己设置文本样式（带下划线的蓝色）并自己处理 URL 的启动。

2.  使用 a`gtk_text_buffer_insert_child_anchor`指定在缓冲区中的何处插入链接，然后`gtk_text_view_add_child_at_anchor`将 a`GtkLinkButton`插入到文本视图中。

# c - 如何检查数组中的非零值（元素）

> ID：10972006
> 
> 赞同：3
> 
> 时间：2012-06-10T20:13:35.733
> 
> 标签：c, arrays

我想知道如何编写一个函数来返回是否有至少三个不等于 0 的值。我搜索了类似的问题，但找不到任何有效的解决方案。为了解释我的问题，这里有一个例子：

我有一个包含这些元素的数组： `[1,0,2,0,4,0,0,3,0,0]`. 我想检查是否至少有 3 个元素不等于零。

`1`如果至少有 3 个元素，我的代码将返回`!= 0`，或者`0`如果元素少于 3个，则返回`!=0`。

所以在我的例子中它应该返回`1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:15:08.043

计算不等于零的元素个数。如果小于三个，则返回 false，否则返回 true。

为了获得计数，使用 for 循环遍历数组的内容，然后使用 if 语句测试元素是否为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:28:40.367

```
int non_zero(int a[], int lim) {  
    int i, count;
    count = 0;
    for (i = 0; i < lim && count < 3; i++)
        if (a[i] != 0)
            count++;
    return count == 3 ? 1 : 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T22:23:39.053

我想分享我的解决方案

```
int check(){
    int arr[10]= [1,0,2,0,4,0,0,3,0,0];
    int total=0;
    for(int i=0;i<=10;i++){
        total+=arr[i];
     }
    return total;
} 
```

谢谢你们试图解决我的问题<3

# css - modrewrite 规则不允许加载 CSS 文件

> ID：10972011
> 
> 赞同：0
> 
> 时间：2012-06-10T20:14:14.340
> 
> 标签：css, mod-rewrite

当谈到 modrewrite 时，我完全是个菜鸟，我在我的 .htaccess 文件中编写了以下重写规则：

```
RewriteRule ^([^/]*)/([^/]*)$ teams.php?team=$1&year=$2 [L] 
```

该规则有效地使链接像

```
teams.php?team=Cincinnati Reds&year=2012 
```

成为 /Cininnati Reds/2012

但是css文件不会加载。我试着改变

```
<link rel="stylesheet" type="text/css" href="css/conceptually.css" /> 
```

到

```
<link rel="stylesheet" type="text/css" href="../css/conceptually.css" /> 
```

没有运气。

关于如何制定我将编写的任何快速重写规则的任何想法，这样我就不必进入每个文件并将目录更改为每个 CSS 文件。

* * *

### 编辑：

实际上，理想情况下，我希望 URL 是`teams/Cincinnati Reds/2012`而不仅仅是`/Cincinnati Reds/2012`. 有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:24:30.023

我使用以下两个重写条件来不对所有真实文件和目录使用重写：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# your RewriteRule here… 
```

顺便提一句。使用 mod_rewrite，您将 URL 从 重写`/Cininnati Reds/2012`为`teams.php?team=Cincinnati Reds&year=2012`。mod_rewrite 不会将您的链接转换为该格式。这留给显示应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:51:10.907

对于您的第二个请求，这应该有效：

```
RewriteRule ^teams/([^/]*)/([^/]*)$ teams.php?team=$1&year=$2 [L] 
```

# reentrancy - 可重入代码的用途？

> ID：10972014
> 
> 赞同：-1
> 
> 时间：2012-06-10T20:14:35.483
> 
> 标签：reentrancy

应该可重入的应用程序或方法类型的示例是什么？还是您通常应该努力争取的东西？

此外，在（纯）函数式编程中，您的代码通常是可重入的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:19:17.143

如果您的代码没有任何副作用（如果它是“纯功能性的”，则会发生这种情况），那么它就是可重入*且*线程安全的。

在 UI 开发中，您会遇到可重入问题。您获得一个 UI 事件并启动一系列事件，这些事件可能会在您的第一个处理程序完成之前触发相同的事件。

# c++ - 多线程守护进程和 SIGPIPE 退出

> ID：10972027
> 
> 赞同：1
> 
> 时间：2012-06-10T20:16:15.763
> 
> 标签：c++, pipe, popen

“程序收到信号 SIGPIPE，管道损坏。” 并终止。我使用以下代码打开管道。 [正确的代码 - 带有 popen 的非阻塞管道](https://stackoverflow.com/questions/10962044/correct-code-non-blocking-pipe-with-popen)

如你所见，我只`read`从管道。简单地忽略 SIGPIPE 信号是正确的行为吗？为什么 SIGPIPE 出现在 read 上？也许我做错了什么？或者也许我必须使用其他调用来执行第三方程序和结果？

# algorithm - 在无向图中找到一个循环与在有向图中找到一个循环

> ID：10972028
> 
> 赞同：17
> 
> 时间：2012-06-10T20:16:22.647
> 
> 标签：algorithm, graph

所以我正在阅读 Robert Sedgewick 的算法第 4 版。书和在有向图中找到循环的方法与在无向图中找到循环的方法不同。

这是在无向图中查找循环的示例代码

```
public class Cycle {
   public boolean[] marked;
   public boolean hasCycle;

   public Cycle(Graph G) {
      marked = new boolean[G.V()]; // G.V() is the number of vertices in the graph G
      for (int s = 0; s < G.V(); ++s) {
         if (!marked[s])
            dfs(G, s, s);
      }
   }

   private void dfs(Graph G, int v, int u) {
      marked[v] = true;
      for (int w : G.adj(v)) //iterate through vertices adjacent to v
         if (!marked[w])
            dfs(G, w, v)
         else if (w != u) hasCycle= true;
   }

   public boolean hasCycle() {
      return hasCycle;
   }
} 
```

然而，当试图在有向图中找到一个循环时，Sedgewick 使用一个布尔数组，如果在当前调用堆栈期间检查了第 i 个顶点，则该数组的第 i 个元素为真。对于检查的每个顶点 K，我们检查布尔数组的第 K 个元素是否为真。如果是，那么我们就有了一个循环。我的问题是，为什么有必要将该布尔数组用于有向图。我刚刚列出的方法不应该更节省内存吗？这种方法是否仅适用于无向图？为什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-10T20:35:25.070

您不能使用相同的算法：上面的算法只是探索了图的所有连接组件。如果遇到已经标记的顶点，则必须有**两条不同的路径**才能到达它，并且在**无向图中必须有一个循环**。如果没有，您可以继续使用下一个连接的组件 - 无需清理您刚刚完成的组件。

另一方面，如果您有一个有**向图**，则到同一顶点的两条不同路径**不会形成循环**。所以你需要一个不同的算法（例如，你可能需要清理你回溯的任何步骤。）

# ruby-on-rails-3 - Rails 控制器究竟是什么时候渲染的？

> ID：10972029
> 
> 赞同：0
> 
> 时间：2012-06-10T20:16:27.883
> 
> 标签：ruby-on-rails-3, faye

如果用户存在，我有一个呈现 fetch.js.erb 的控制器。我想要做的是渲染这个文件，然后调用 update_tweets 并保存在用户对象上。目前，在呈现 javascript 之前调用 update_tweets 和 save。因此，faye 消息在订阅设置之前被发布。如何强制 javascript 提前执行？另一种选择是以某种方式以非阻塞方式调用@user.update_tweets，但我不确定如何执行此操作。

用户控制器.rb

```
class UserController < ApplicationController

  def fetch
    unless @user = User.find_by_name(params["user"])
      begin
        if Twitter.user(params["user"]).protected?
          render :private_user and return
        else
          @user = User.new(:name => params["user"])
        end
      rescue Twitter::Error::NotFound
        render :dne_user and return
      end
    end

    render :fetch
    @user.update_tweets
    @user.save
  end

end 
```

用户.rb

```
class User

  after_save do |user|
    puts "i've been saved!! sleeping now"
    sleep(20)
    user.tweets.each do |tweet|
      message = {:channel => "/" + self.name, :data => tweet.text }
      uri = URI.parse("http://localhost:9292/faye")
      puts Net::HTTP.post_form(uri, :message => message.to_json)
    end
  end

end 
```

fetch.js.erb

```
client = new Faye.Client("http://localhost:9292/faye");
alert("running");
client.subscribe("/<%= @user["name"] %>", function(data) {
  $('#tweets').append("<p>"+data+"</p>");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:35:47.423

该`render`调用将在调用时创建输出，但在控制器返回之前不会将其发送到浏览器。

也就是说，你为什么要那样做？你真的应该在调用之前保存用户`render`并让渲染方法为已经加载的推文提供服务，如果你已经在为客户端，在 fetch.js.erb 中，只提供其中的内容。

作为旁注，您可能希望将其`@user.id`用作频道而不是`name`，可能会有同名的人，他们会收到其他同名的人的消息，除非您打算这样做。

# android - 使用键盘时背景图片臃肿

> ID：10972031
> 
> 赞同：0
> 
> 时间：2012-06-10T20:16:32.373
> 
> 标签：android, background, keyboard, android-tablelayout

我有一个关于背景图片和安卓键盘的问题。

我的界面如下图 2 所示。它是一个搜索功能，其下方有一个列表视图。我的问题是，每当您在搜索栏（EditText）中键入时，键盘就会出现并更改背景图片。它看起来很糟糕而且臃肿。你如何告诉android在使用键盘时不要更改背景图片（只需让键盘滑过背景图片而不更改它）？

背景应该是什么样子：[http ://tinypic.com/view.php?pic=2nsxowx&s=6](http://tinypic.com/view.php?pic=2nsxowx&s=6)

键盘将背景更改为这个烂摊子：[http ://tinypic.com/view.php?pic=23huck0&s=6](http://tinypic.com/view.php?pic=23huck0&s=6)

这是我的 xml 文件：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_search_task"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/searchable"
android:gravity="center|top"
android:orientation="vertical" 
android:stretchColumns="1"
android:weightSum="1.0"
>

<TableRow
>
    <EditText
        android:id="@+id/searchText"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.8"
        android:hint="@string/SearchTaskHint" />

    <Button
        android:id="@+id/searchButton"
        android:layout_width="0dip" 
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="0.2"
        android:text="@string/Search" />

 </TableRow> 

 <TableRow>
 <TextView
 android:layout_width="wrap_content" 
 android:layout_height="5dp">
   </TextView>
 </TableRow> 
 <TableRow
 android:paddingLeft="40dp">

 <TextView 
   android:id="@+id/search_task_column_names"
   android:layout_width="0dip" 
   android:layout_height="wrap_content" 
   android:textStyle="bold"

   android:layout_weight="0.33"
  >
    </TextView>

 <TextView 
   android:id="@+id/search_task_column_names1"
   android:layout_width="0dip" 
   android:layout_height="wrap_content" 
   android:textStyle="bold"

   android:layout_weight="0.33">
    </TextView>

 <TextView 
   android:id="@+id/search_task_column_names2"
   android:layout_width="0dip" 
   android:layout_height="wrap_content" 
   android:textStyle="bold"

   android:layout_weight="0.33"
  >
    </TextView>

  </TableRow>

  <TableRow
  android:paddingLeft="25dp"
  android:paddingRight="30dp" >
  <ListView
   android:id="@+id/search_task_list"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"

   android:gravity="center"

    />
  </TableRow> 
  </TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:28:46.887

我猜`TableLayout`随着视图的变化形状的背景。尝试将其设置为`Activity`背景并使`TableLayout`透明的背景。

注意：我不确定活动背景不会调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:58:59.220

启动软键盘时的默认行为是让操作系统调整视图大小以适应新的屏幕范围。由于您有背景图像，因此结果会像您所看到的那样被捏起来。

[请参阅此处的文档 android:windowSoftInputMode](http://developer.android.com/guide/topics/manifest/activity-element.html) 您想要的行为是“adjustPan”

# javascript - 更改 Google 可视化图表对象

> ID：10972032
> 
> 赞同：1
> 
> 时间：2012-06-10T20:16:35.103
> 
> 标签：javascript, google-api, google-visualization

我目前正在使用`ChartWrapper`并`ControlWrapper`在我一直从事的项目中开发一些实用程序。让我使用示例中的控件和仪表板中的这个示例：

```
var pieChart = new google.visualization.ChartWrapper({
         'chartType': 'PieChart',
         'containerId': 'chart_div',
         'options': {
           'width': 300,
           'height': 300,
           'pieSliceText': 'value',
           'legend': 'right'
         }
       }); 
```

我知道`pieChart`是 type `ChartWrapper`，但我正在使用一个`PieChart` 对象来绘制图表。现在，我该如何设置`PieChart`对象的选项，而不是`ChartWrapper`? 我尝试使用`getChart`，但总是返回 null。我想 `ChartWrapper`有一个类型的对象`PieChart`。如果我能以某种方式访问​​该对象，那么我可以设置一些选项来满足我的需求。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:29:18.800

从[getChart 文档](https://developers.google.com/chart/interactive/docs/reference#chartwrapperobject)，这可能解释了为什么你得到空值：

> 在您对 ChartWrapper 对象调用 draw() 之前，这将返回 null，并且它会引发一个就绪事件。

如果要设置选项，可以直接在*ChartWrapper*对象上使用设置它们。

```
pieChart.setOption("width", 400); 
```

或者您可以从头开始设置所有选项：

```
pieChart.setOptions( {
       'width': 300,
       'height': 300,
       'pieSliceText': 'value',
       'legend': 'right'
     } ); 
```

# php - 使用 zend 框架的 SQL 查询逻辑

> ID：10972034
> 
> 赞同：2
> 
> 时间：2012-06-10T20:17:07.943
> 
> 标签：php, mysql, zend-framework

所以，我在逻辑上的情况有点糟糕，我的数学也不是很好，所以我需要你的帮助“构建”一个查询来通过连接查询从 3 个不同的表中获取信息。我的结构是这样的：

*   用户表：主键“ID”
*   广告系列表：带有主键“ID”
*   User_Campaign 表：带有 user_id 和campaign_id 行。

我想使用用户 ID X 提取 user_campaign 表中不存在的所有广告系列。

我的查询是针对 zend 框架的。我将不胜感激任何形式的帮助，谢谢，来自以色列的晚安！

我当前的查询：

```
$q = $this->select()
                ->setIntegrityCheck(false)
                ->from(array('c' => 'campaigns'))
                ->join(array('uc'=> 'user_campaign'), 'uc.campaign_id != c.id AND uc.user_id != 1', array('campaign_id', 'user_id')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:32:11.880

试试这个查询，使用左连接，并在连接表上添加一个 WHERE 以使有效 id 为空，将返回连接右侧不存在的结果

```
public function check_access($campaign_id, $user_id) {
    $q = $this->select()
        ->from(array('c' => 'campaigns'))
        ->joinRight(array('uc'=> 'user_campaign'), 'uc.campaign_id = c.id', array('campaign_id', 'user_id'));
        ->where('uc.user_id != ?', $user_id)
        ->where('campaign_id = ?', $campaign_id);

    // User has an entry, return false
    if($this->fetchRow($select))
        return false;

    // User wasn't found, create an entry, and return true
    $this->insert('users_campaigns', array(
        'user_id'       => $user_id,
        'campaign_id'   => $campaign_id
    ));

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:31:23.670

你没有正确地做`ON`。`JOIN`你想要的`uc.campaign_id = c.id`不是`!=`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T21:05:27.257

布莱恩！thanx 很多，最后我在你之前做的查询的帮助下设法做到了，我写的最后一个查询是这样的：

```
$q = $this->select()
            ->setIntegrityCheck(false)
            ->from(array('c' => 'campaigns'))
            ->joinLeft(array('uc' => 'user_campaign'), "uc.campaign_id = c.id AND uc.user_id = '$id'")
            ->where('uc.campaign_id IS NULL'); 
```

再次感谢你们！你太棒了！

# android - Android Emulator 不启动 LibGDX 项目？

> ID：10972035
> 
> 赞同：5
> 
> 时间：2012-06-10T20:17:09.033
> 
> 标签：android, android-emulator, libgdx

每当我尝试在模拟器上执行应用程序时，模拟器都会显示错误消息“不幸的是，我的 libGDX 游戏已停止。” 该应用程序在桌面版本中运行良好。

我有最新的夜间版本、ADT 版本 18、最新的 GWT 和最新版本的 eclipse。我的 Android SDK 工具是 19 版，而我的 android SDK 平台工具是 11 版。

有想法该怎么解决这个吗？

我一直在关注本教程：[LibGDX tutorial](http://www.youtube.com/watch?feature=player_embedded&v=pOYrtJwYaGw#!)

这是我看到的截图：![模拟器截图](../Images/e8541c9f4fae1a9d57f6f2e4e32bb61e.png)

日志猫：

```
06-10 19:50:44.282: I/Process(1548): Sending signal. PID: 1548 SIG: 9
06-10 19:50:48.022: I/dalvikvm(1566): threadid=3: reacting to signal 3
06-10 19:50:48.152: I/dalvikvm(1566): Wrote stack traces to '/data/anr/traces.txt'
06-10 19:50:48.312: W/dalvikvm(1566): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/badlogic/gdx/backends/android/AndroidApplication;
06-10 19:50:48.312: W/dalvikvm(1566): Class init failed in newInstance call (Lcom/me/mygdxgame/MainActivity;)
06-10 19:50:48.322: D/AndroidRuntime(1566): Shutting down VM
06-10 19:50:48.332: W/dalvikvm(1566): threadid=1: thread exiting with uncaught exception (group=0xb40d5180)
06-10 19:50:48.392: E/AndroidRuntime(1566): FATAL EXCEPTION: main
06-10 19:50:48.392: E/AndroidRuntime(1566): java.lang.ExceptionInInitializerError
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.Class.newInstanceImpl(Native Method)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.Class.newInstance(Class.java:1319)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.os.Looper.loop(Looper.java:137)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.reflect.Method.invokeNative(Native Method)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.reflect.Method.invoke(Method.java:511)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at dalvik.system.NativeStart.main(Native Method)
06-10 19:50:48.392: E/AndroidRuntime(1566): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load gdx: findLibrary returned null
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at java.lang.System.loadLibrary(System.java:535)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at com.badlogic.gdx.utils.GdxNativesLoader.load(GdxNativesLoader.java:116)
06-10 19:50:48.392: E/AndroidRuntime(1566):     at com.badlogic.gdx.backends.android.AndroidApplication.<clinit>(AndroidApplication.java:59)
06-10 19:50:48.392: E/AndroidRuntime(1566):     ... 15 more
06-10 19:50:49.152: I/dalvikvm(1566): threadid=3: reacting to signal 3
06-10 19:50:49.192: I/dalvikvm(1566): Wrote stack traces to '/data/anr/traces.txt'
06-10 19:50:49.972: I/dalvikvm(1566): threadid=3: reacting to signal 3
06-10 19:50:50.012: I/dalvikvm(1566): Wrote stack traces to '/data/anr/traces.txt'
06-10 19:50:52.093: I/dalvikvm(1566): threadid=3: reacting to signal 3
06-10 19:50:52.112: I/dalvikvm(1566): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-10T20:26:55.437

如果这是基于 ARM 的模拟器，您忘记将 armeabi 和 armeabi-v7a 文件夹添加到 Android 项目的 libs/ 文件夹中。请按照此处的设置指南进行操作：[http ://code.google.com/p/libgdx/wiki/ProjectSetupNew](http://code.google.com/p/libgdx/wiki/ProjectSetupNew)

如果这是一个基于x86模拟器，然后̶只怕̶t̶h̶e̶r̶e̶'̶s̶没有办法解决此问题̶y̶e̶t̶.̶我们不编译Android的X86在̶m̶o̶m̶e̶n̶t̶.̶

编辑。-现在支持 x86

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-30T02:58:28.027

我有同样的问题......尝试Android Studio - >运行 - >运行'android'。就我而言，它起作用了。如果仍然失败，我建议重新安装 libG

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:51:33.500

如果它在设备上也不起作用，试试这个：android-project -> properties -> java Build Path -> Order and Export。然后，单击您链接到的项目（您的普通 java 项目或桌面项目）并单击“向上”按钮，直到它位于最顶部。确保勾选 [V]。为了以防万一，我也用罐子做了这个，现在它在我的设备上运行。我的 x86 VM 上仍然出现同样的错误，因为 libgdx 不支持 x86 Android 设备

# tomcat7 - 你可以在 Tomcat 7 中为不同的 Web 应用程序设置不同的 JDBC 领域吗？

> ID：10972041
> 
> 赞同：1
> 
> 时间：2012-06-10T20:17:57.753
> 
> 标签：tomcat7, jdbcrealm

我已经成功地将 mysql 服务器实现为 Tomcat 7 中用于身份验证的 JDBCRealm。我不知道是否可以为不同的 Web 应用程序使用不同的模式或表。本质上，就是为不同的 Web 应用定义不同的 JDBCRealms。这样我就可以使用不同的用户凭据架构/表来分隔 Web 应用程序。我知道这可以用 Tomcat 中的角色来模拟。我希望找到一种方法来使 Web 应用程序与它们的关联模式一起移植。我不知道如何实现这一点，所以我没有代码可以发布。无论是代码还是更好，进一步研究的主题都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:44:34.793

您必须配置您的应用程序`Realm`内部`Context`。这样，如果您将多个应用程序部署到同一个 Tomcat 实例中，则每个应用程序都有自己的领域。此外，在应用程序上下文文件中封装身份验证/授权详细信息使您的应用程序更便携，更易于部署。

# c# - Microsoft Office Interop Word 读取页眉和脚注

> ID：10972043
> 
> 赞同：4
> 
> 时间：2012-06-10T20:18:09.277
> 
> 标签：c#, ms-office

我想使用 Microsoft Office 互操作 Word 程序集来阅读 word 文档的页眉和页脚。

我有两个问题：

首先如何访问脚注和标题？其次如何将它们转换为字符串（当我调用 toString() 时我刚刚得到“System.__ComObject”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T05:34:29.990

您应该有一个由许多部分组成的 Document 对象文档，并且页脚/页眉是单个部分的一部分。每个部分可以有多个页眉/页脚（例如，第一页的页眉/页脚可能不同）。要访问页眉/页脚的文本，您必须获取页眉/页脚中包含的 Range，然后访问其 Text 属性。

如果 app 是您的 Word ApplicationClass，则此代码应为您提供两个包含活动文档的页眉和页脚的集合：

```
 List<string> headers = new List<string>();
        List<string> footers = new List<string>();
        foreach (Section aSection in app.ActiveDocument.Sections)
        {
            foreach (HeaderFooter aHeader in aSection.Headers)
                headers.Add(aHeader.Range.Text);
            foreach (HeaderFooter aFooter in aSection.Footers)
                footers.Add(aFooter.Range.Text);
        } 
```

如果您对脚注而不是页脚感兴趣（从问题中并不清楚，因为您在某些地方写了脚注，而在其他地方写了页脚），事情就更简单了，因为您可以向文档询问所有脚注的集合。要访问注释中的文本，您可以对页眉/页脚执行相同的操作：访问 Range，然后获取 Text 属性：

```
 List<string> footNotes = new List<string>();
        foreach (Footnote aNote in app.ActiveDocument.Footnotes)
            footNotes.Add(aNote.Range.Text); 
```

# python - 如何在python中的一行中放置多个导入

> ID：10972045
> 
> 赞同：2
> 
> 时间：2012-06-10T20:18:22.130
> 
> 标签：python, python-2.7

我的问题是关于如何将多个导入放在一行中。

```
from sys import argv
from os.path import exists 
```

我们能否将上述语句修改为如下所示的单个语句：

```
from sys,os.path import argv,exists 
```

我们可以那样做吗..？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T20:21:50.880

不，你不能。对不起！

python[`import`语句](http://docs.python.org/reference/simple_stmts.html#the-import-statement)一次只支持*一个*模块导入语句。

如果你*能*做到这一点，假设地说，下面的意思是什么：

```
from threading, multiprocessing import Thread, Condition, Lock 
```

将从哪个模块`Condition`导入？两个模块都定义了这样一个类。

Python 更喜欢显式而不是隐式；您一次选择一个要从中导入的来源，因为这样可以使您对正在发生的事情产生最小的惊讶和最大的清晰度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T20:24:19.687

```
from sys import argv; from os.path import exists 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:37:31.300

您可以将两行放在一条上并用分号分隔，但除此之外，不行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T20:19:27.763

如果您尝试过，您会发现它不起作用。不，你不能那样做。

# extjs - extjs 创建双行

> ID：10972054
> 
> 赞同：1
> 
> 时间：2012-06-10T20:19:18.870
> 
> 标签：extjs, grid, rows, extjs4.1

请告诉我如何在网格中创建双行，如下所示：

在 ext JS 中我还没有找到这样的例子

![我用 gimp 做的](../Images/d34aeb7ba89894a42ace88d61af0de01.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:04:29.143

目前尚不清楚您使用的是哪个版本的 ExtJs，但我认为`getRowClass`方法在 3 和 4 中可用。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-getRowClass](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-getRowClass)

您可以在此处理程序中定义您需要的任何逻辑。在您的情况下，您需要为第 1、2、5、6 等行返回一个类...，为 3、4、7、8 等返回第二个类。

# javascript - HTML5 Canvas ImageData rgb 值不正确

> ID：10972055
> 
> 赞同：4
> 
> 时间：2012-06-10T20:19:22.177
> 
> 标签：javascript, html, canvas

我正在为绘图应用程序开发油漆桶工具。

我`context.getImageData`用来找出画布中所有像素的颜色值。

但是，默认情况下所有 rgba 值似乎都是 0，即使默认情况下画布是白色的。现在我的油漆桶工具不适用于黑色轮廓的形状，因为黑色具有 rgb`0,0,0`并且默认画布图像数据也可以，即使画布是白色的。

所以我的问题是我是否可以更改默认图像数据，使其反映画布的实际默认颜色（白色，或，`255,255,255`），或者如何快速将画布清除为该颜色。我认为一种可行但效率极低的解决方案是，在清除画布时，将每个像素的值设置为 255。但是，由于画布的大小，这会在执行时导致几秒钟的延迟。

还有其他我忽略的选择吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:56:35.817

一个空的画布被初始化为`rgba(0,0,0,0)`（即透明的）

如果您希望将所有内容初始化为白色，请运行类似这样的操作。

```
ctx.fillStyle = '#FFFFFF'; // or 'rgba(255,255,255,1)'
ctx.fillRect(0,0,canvas.width, canvas.height); 
```

[作为规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)中的参考，它说：

> 初始化画布时，必须将其位图清除为透明黑色。

# c# - 保护 JSON 和 ASP.NET MVC2

> ID：10972059
> 
> 赞同：0
> 
> 时间：2012-06-10T20:19:42.637
> 
> 标签：c#, javascript, ajax, json, security

我在使用 JSON 的 ASP.NET MVC2 应用程序中使用 AJAX 请求来回发送敏感数据。如果我可能将敏感数据发回给客户端，是否有一种保护数据的首选机制，以便随后可以通过 javascript 代码对其进行解密？有没有可以在 JS 和 C# 中一起使用的标准加密库？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:20:37.963

不要向客户发送敏感信息。或者，如果您这样做，请使用 HTTPS 来保护您免受[*man-in-the-middle 的*](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)侵害。最好的办法是将敏感信息保存在服务器上。显然，根据敏感程度和您正在处理的信息类型，可能会有不同的技术。

# c - C：如何将字符串存储到“char *myArray[100]”数组中？

> ID：10972060
> 
> 赞同：0
> 
> 时间：2012-06-10T20:19:49.093
> 
> 标签：c, string

我在 C 中创建了这段代码，以逐行读取文本文件并将每一行存储到数组的位置：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

static const int MAX_NUMBER_OF_LINES = 100000;
static const char filename[] = "file.csv";

int main ( void )
{

  // Read file and fill the Array
  char *myArray[MAX_NUMBER_OF_LINES];
  int numberLine = 0;
  FILE *file = fopen (filename, "r");
  if (file != NULL)
  {
      char line [128];
      while (fgets (line, sizeof line, file) != NULL)
      {
          myArray[numberLine] = line;
          numberLine++;    
      }
      fclose (file);
  }

  // Print the Array
  for (int i = 0; i<numberLine; i++)
  {
    printf("%d|%s", i, myArray[i]);
  }
} 
```

但是在打印数组时，它是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:21:44.377

因为您需要将这些行复制到数组中的缓冲区中。

您需要为数组的每个元素中的字符串分配空间，然后使用类似的东西`strncpy`将每个元素移动`line`到每个`myArray`插槽中。

在您当前的代码中，您只是将相同的引用 - 到您的`line`缓冲区 - 复制到每个数组插槽中，因此最后，每个插槽`myArray`应该指向内存中的相同字符串。

根据 Shoaib 的建议，如果可用 strdup 将保存一个步骤，因此请尝试：

```
myArray[i] = strdup(line); 
```

那里没有错误处理，请参阅[strncpy](http://en.cppreference.com/w/c/string/byte/strncpy)和[strdup](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)的文档。

或者，您可以只添加一个维度`myArray`：

```
char myArray[MAX_NUMBER_OF_LINES][100]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:26:47.417

您需要真正为所有字符串分配空间，而不仅仅是为指向不存在的字符串的指针。在您的示例中，所有分配的指针都指向变量，这超出了范围。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

static const int MAX_NUMBER_OF_LINES = 100000;
static const int MAX_LINE_LENGTH = 127;
static const char filename[] = "file.csv";

int main ( void )
{

  // Read file and fill the Array
  char myArray[MAX_NUMBER_OF_LINES][MAX_LINE_LENGTH + 1 /* for 0 byte at end of string */];
  int numberLine = 0;
  FILE *file = fopen (filename, "r");
  if (file != NULL)
  {
      while (fgets (myArray[numberLine], MAX_LINE_LENGTH + 1, file) != NULL)
      {
          numberLine++;    
      }
      fclose (file);
  }

  // Print the Array
  for (int i = 0; i<numberLine; i++)
  {
    printf("%d|%s", i, myArray[i]);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:29:33.313

char* 数组指向行 chararray，但您应该将每一行保存在一个数组中并将 myArray[numberLine] 指向它：

*   malloc : 分配内存 -[有关 malloc 的更多信息](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)
*   free : 通过 malloc 释放分配的内存 -[有关 free 的更多信息](http://www.cplusplus.com/reference/clibrary/cstdlib/free)

* * *

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

static const int MAX_NUMBER_OF_LINES = 100000;
static const char filename[] = "file.csv";

int main ( void )
{

  // Read file and fill the Array
  char *myArray[MAX_NUMBER_OF_LINES];
  int numberLine = 0;
  FILE *file = fopen (filename, "r");
  if (file != NULL)
  {
      char line [128];
      while (fgets (line, sizeof line, file) != NULL)
      {
          //refinement is hre
          myArray[numberLine] = (char*)malloc(sizeof line);
          strcpy(myArray[numberLine], line);
          numberLine++;    
      }
      fclose (file);
  }

  // Print the Array
  for (int i = 0; i<numberLine; i++)
  {
    printf("%d|%s", i, myArray[i]);
    free(myArray[i])

  }
} 
```

# javascript - 单选按钮的订单表格总文本框

> ID：10972062
> 
> 赞同：0
> 
> 时间：2012-06-10T20:20:30.653
> 
> 标签：javascript, html, textbox, radio-button, dom-events

我正在为一个需要实现几个功能的类项目工作。现在，我坚持的一个问题是，当用户使用 ComputerForm 中的单选按钮进行选择时，订单总数文本框中的值会自动更新。如果有人能告诉我应该如何编写脚本，将不胜感激。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <title> Final: Computer Order Form </title>
    <meta name="Generator" content="EditPlus">
    <meta name="Author" content="Joshua Aslan Smith">
    <meta name="Keywords" content="">
    <meta name="Description" content="Final Project">

    <script type="text/javascript">

        function doClear()
            {
                document.AddressForm.customer.value = "";
                document.AddressForm.address.value = "";
                document.AddressForm.city.value= "";
                document.AddressForm.state.options[0].selected = "true";
                document.AddressForm.zip.value = "";
                document.AddressForm.phone.value= "";
                document.AddressForm.email.value= "";

                document.ComputerForm.cases[0].checked = false;
                document.ComputerForm.cases[1].checked = false;
                document.ComputerForm.cases[2].checked = false;

                document.ComputerForm.monitors[0].checked = false;
                document.ComputerForm.monitors[1].checked = false;
                document.ComputerForm.monitors[2].checked = false;

                document.ComputerForm.printers[0].checked = false;
                document.ComputerForm.printers[1].checked = false;
                document.ComputerForm.printers[2].checked = false;

                return;
            }

        //function totalPrice()
            //{
            //  var t1 = document.ComputerForm.cases.selected.value;
            //  var t2 = document.ComputerForm.monitors.selected.value;
            //  var t3 = document.ComputerForm.printers.selected.value;
            //  var total = document.AddressForm.total.value;

        //      total.value = t1.value + t2.value + t3.value;
        //  }

    </script>

</head>

<body>  <h1 align="center">Computer System Order Form</h1>  <table border="black" cellpadding="10px" align="center">        <tr>            <td>
                <table cellpadding="10px">
                <form name="ComputerForm">
                    <tr>
                        <td>
                            Computer Case Style:</br>
                            <input type="radio" name="cases" value="500.00" /> Desktop Case (500.00) </br>
                            <input type="radio" name="cases" value="600.00" /> Mini-Tower Case (600.00) </br>
                            <input type="radio" name="cases" value="700.00" /> Full-Tower Case (700.00) </br>
                        </td>
                        <td>
                            <img src="case.jpg" alt="pc case" >/>   
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Computer Monitor: <br/>
                            <input type="radio" name="monitors" value="250.00" /> 17" LCD Flat Screen (250.00) </br>
                            <input type="radio" name="monitors" value="300.00" /> 19" LCD Flat Screen (300.00) </br>
                            <input type="radio" name="monitors" value="350.00" /> 21" LCD Flat Screen (350.00) </br>
                        </td>
                        <td>
                            <img src="monitor.jpg" alt="pc >monitor" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Computer Printer:<br/>
                            <input type="radio" name="printers" value="100.00" /> Inkjet Printer (100.00) </br>
                            <input type="radio" name="printers" value="250.00" /> Laser Printer (250.00) </br>
                            <input type="radio" name="printers" value="350.00" /> Color Printer (350.00) </br>
                        </td>
                        <td>
                            <img src="printer.jpg" alt="pc printer" />
                        </td>
                    </tr>
                </form>
                </table>            </td>           <td>
                <table padding="10px">
                    <tr>
                    <form name="AddressForm">
                        <td>
                            Total System Price:
                        </td>
                        <td>
                            $<input type="text" name="total" readonly value="0.00" size="8">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Full Name:
                        </td>
                        <td>
                            <input type="text" name="customer" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Street Address:
                        </td>
                        <td>
                            <input type="text" name="address" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            City:
                        </td>
                        <td>
                            <input type="text" name="city" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            State:
                        </td>
                        <td>
                            <select name="state">
                                <option value=""></option>
                                <option value="DE">DE</option>
                                <option value="NJ">NJ</option>
                                <option value="NY">NY</option>
                                <option value="PA">PA</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Zip:
                        </td>
                        <td>
                            <input type="text" name="zip" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Phone Number:
                        </td>
                        <td>
                            <input type="text" name="phone" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Email Address:
                        </td>
                        <td>
                            <input type="text" name="email">
                        </td>
                    </tr>
                    </form>
                    <tr>
                        <td>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="button" value="Submit Order" onClick="doSubmit()" />
                        </td>
                        <td>
                            <input type="button" value="Clear Form" onClick="doClear()"  />
                        </td>
                    </tr>
                </table>            </td>       </tr>   </table> </body> </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:01:48.607

首先，将以下代码放在您的 JS 文件中的任何位置：

```
var prices = new Object();
function updateTotal () {
    var total = 0.00;
    for (var price in prices) {
        total += price;
    }
    document.getElementById("total").value = total;   // Add the id "total" to the input field
} 
```

然后为每个单选按钮的 html 标签添加以下内容：

```
onchange="javascript:prices['cases'] = parseInt(this.value); updateTotal();" 
```

并替换`'cases'`为相应的值。现在，当您添加新价格时，您只需将`onchange`函数添加到适当的标签，该`updatePrice()`函数无需修改即可正常工作。

[在此处](http://jsfiddle.net/gsdH9/)查看工作演示。

# c++ - 将未知数据类型的元素输入向量并传递给函数模板

> ID：10972069
> 
> 赞同：0
> 
> 时间：2012-06-10T20:21:02.170
> 
> 标签：c++, vector, types

> **可能重复：**
> [将未知类型的元素输入到向量中](https://stackoverflow.com/questions/10969040/inputting-elements-of-unknown-type-into-a-vector)

程序应该从用户那里得到一个未知类型的元素列表，能够确定使用了哪种类型，能够对元素进行排序，并以新排序的顺序将它们打印回来。用户将输入元素的数量以及元素，它们必须都是相同的类型。

我对编程很陌生，对模板和向量也很陌生。任何对我一直在做错的事情的洞察力都值得赞赏。

```
 #include <iostream>
    #include <vector>
    #include <string>
    using namespace std;

    int n;
    vector<int>Integers;
    vector<float>Floats;
    vector<char>Chars;
    vector<string>Strings;

    template <class T>

    //sorts vector elements
    void sort(const T &x)
    {
        char *ptr1,*ptr2;
        T tmp;
        for (int i=0;i<n;i++)
        {
            ptr1=x[i];
            for (int j=i+1;j<=n;n++)
            {
                ptr2=x[j];
                if (tolower(ptr1)>tolower(ptr2))
                {
                    tmp=x[j];
                    x[j]=x[i];
                    x[i]=tmp;
                }
            }
        }
    }

    template <class T>
    //prints vector in ascending order
    void ascend(const T &x)
    {
        for (int z=0;z<n;z++)
        {
            cout<<x[z];
        }
    }

    template <class T>
    //prints vector in descending order
    void descend(const T &x)
    {
        for (int z=n;z>=0;z--)
        {
            cout<<x[z];
        }

    }

    template <class T>
    //prints in both orders
    void both(const T &x)
    {
        for (int z=0;z<n;z++)
        {
            cout<<x[z];
        }
        for (int z=n;z>=0;z--)
        {
            cout<<x[z];
        }
    }
    int main()
    {
        int x=0, y=0;
        string input;
        cout<<"Number of elements: "<<endl;
        cin>>n;
        cout<<"Enter elements: "<<endl;
        cin>>input;
        //determines data type of first element inputed
        for(int i=0;i<input.size();i++)
        {
            //int
            if (input[i]>='0'&&input[i]<='9')
                x=1;
            //float
            else if (input[i]=='.')
                    {
                        x=2;
                        i=input.size();
                    }
            //char
            else if (input[i]>='A'&&input[i]<='z')
                x=3;
            //string
            if(input[i+1]>='A'&&input[i+1]<='z')
                {
                    x=4;
                    i=input.size();
                }
        }

        //populates vectors of various data types of size n
        switch(x)
        {
            //int 
            case 1: 
            {
                int a=1;
                //creates vector of of size n+1
                Integers.resize(n+1);
                //concatenates first element
                for (int i=0;i<input.size();i++)
                {
                    a=(a*10)+input[i];
                }
                Integers[0]=a;
                //adds in rest of elements
                for (int i=1;i<=n;i++)
                    cin>>Integers[i];
                sort(Integers);
                break;
            }
            //float
            case 2: 
            {
                float b=1;
                Floats.resize(n+1);
                for (int i=0;i<input.size();i++)
                {
                    if(input[i]!='.')
                        b=(b*10)+input[i];
                    else
                    {   
                        i++;
                        for(int x=10,i;i<input.size();x*10,i++)
                        {
                            b+=input[i]/x;
                        }
                    }
                }
                Floats[0]=b;
                for (int i=1;i<=n;i++)
                    cin>>Floats[i];
                sort(&Floats);
                break;
            }
            //char
            case 3:
            {   
                Chars.resize(n+1);
                Chars[0]=input[0];
                for (int i=1;i<=n;i++)
                    cin>>Chars[i];
                sort(Chars);
                break;
            //string
            }
            case 4: 
            {
                Strings.resize(n+1);
                Strings[0]=input;
                for (int i=1;i<=n;i++)
                    cin>>Strings[i];
                sort(Strings);
                break;
            }
        }
        cout<<"Ascending (1), Descending (2), or Both (3)? ";
        cin>>y;

        //determines what vector is to be printed out and in what format
        switch(y)
        {
            case 1:
            {
                switch(x)
                {
                    case 1: ascend(Integers); break;
                    case 2: ascend(Floats); break;
                    case 3: ascend(Chars); break;
                    case 4: ascend(Strings); break;
                }
            }
            case 2:
            {
                switch(x)
                {
                    case 1: descend(Integers); break;
                    case 2: descend(Floats); break;
                    case 3: descend(Chars); break;
                    case 4: descend(Strings); break;
                }
            }
            case 3:
            {
                switch(x)
                {
                    case 1: both(Integers); break;
                    case 2: both(Floats); break;
                    case 3: both(Chars); break;
                    case 4: both(Strings); break;
                }
            }
        }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:24:53.570

除非这是家庭作业，否则您应该使用 std::sort - [http://en.cppreference.com/w/cpp/algorithm/sort](http://en.cppreference.com/w/cpp/algorithm/sort)

# orm - Kohana ORM 如果为空则打印

> ID：10972071
> 
> 赞同：0
> 
> 时间：2012-06-10T20:21:25.163
> 
> 标签：orm, kohana

可以说我有以下内容：

```
$categories = ORM::factory('category')->find_all();
foreach ($categories as $category) :
echo $category->category_title;
foreach ($category->posts->find_all() as $post) :
echo $post->post_title; 
endforeach;
endforeach; 
```

它打印：

```
Category One
Post One
Category Two

Category Three
Post Two
Category Four
Post Three 
```

差距意味着那里没有帖子。

我想要它打印的是：

```
Category One
Post One
Category Two
No Post
Category Three
Post Two
Category Four
Post Three 
```

所以基本上我想要：

```
foreach ($posts->find_all() as $post) :
if post exists
echo $post->post_title; 
else
No Post
endforeach; 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:49:44.103

我假设您使用的是 Kohana 3.2 和 ORM。

查看指南： http: [//kohanaframework.org/3.2/guide/orm/using](http://kohanaframework.org/3.2/guide/orm/using#check-that-orm-loaded-a-record)

有一个部分叫做**检查 ORM 加载了一条记录**

```
if ($post->loaded())
{
    echo $post->post_title;
}
else
{
    echo 'No Post';
} 
```

包括更新问题的类别：

```
$categories = ORM::factory('category')->find_all();
foreach ($categories as $category)
{
    $posts = $category->posts->find_all();
    if (count($posts) > 0)
    {
        echo $category->category_title;
        foreach ($posts as $post)
        {
            echo $post->post_title; 
        }
    }
    else
    {
        echo 'No Posts';
    }
} 
```

# bash - 带有管道输入的 Bash 超时

> ID：10972072
> 
> 赞同：0
> 
> 时间：2012-06-10T20:21:36.590
> 
> 标签：bash, timeout, pipe, tar

有一个命令（比如 $run_command），它必须在超时后被杀死。解决方案非常简单——我可以使用coreutils中的*timeout或其他 stackoverflow 主题中的**timeout3*。但是我的命令像这样从 untar pipe smth 接收它的标准输入

```
tar -xO -f "$1" | /usr/bin/time -f "%e" --output=$time_output -- $run_command 
```

其中*$run-command*是我的命令，还测量了执行时间（使用*time*实用程序）。

那么，问题是避免在*超时*实用程序中包含解压时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:20:42.800

以非常简单的形式，您可以像这样终止调用脚本：

```
#!/bin/bash

( sleep $timeout_period && kill $$ ) &

tar -xO -f "$1" | ... 
```

当然，这只是一个例子；您需要提供一些保证 $$ 在`kill`运行时仍然是相同的脚本。

这当然会杀死整个脚本，包括`time`（如果脚本被杀死，这将是 $timeout_period ）。

**更新#1**：

使用临时文件的示例。

```
tmpfile=$(/usr/bin/mktemp /tmp/temp.XXXXX)

tar -xO -f "$1" > $tmpfile
trap "rm -f $tmpfile" 0 1 2 3 15

/usr/bin/time -f "%e" --output=$time_output -- $run_command < $tmpfile 
```

请注意，由于文件系统的速度/性能，这仍然会出错。

**更新#2**：

除了免除`tar`时间之外，这还添加了超时功能：

```
(
  tmpfile=$(/usr/bin/mktemp /tmp/temp.XXXXX)
  tar -xO -f "$1" > $tmpfile
  trap "rm -f $tmpfile" 0 1 2 3 15
  /usr/bin/time -f "%e" --output=$time_output -- $run_command < $tmpfile
) &

pid=$!

( sleep $timeout_period && kill $pid ) &

wait %1 
```

第一个脚本段中存在相同的潜在问题；您需要提供保险，确保 $$ 在您杀死它之前仍然是您的想法。此外，信号将被发送到 shell 包装器，而不是直接发送到您的命令。您必须测试信号是否按预期传递到您的命令。

Note also that this backgrounds the timeout/kill. The "wait" tells the script to wait until the first background process is finished, so *either* your command finishes by itself *or* it gets killed by the timeout ... and then the script proceeds to anything after the `wait`. If the command finishes by itself, then that's where you run into potential issues with $pid being recycled for another process. Solving that is left as an exercise for the reader. :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:02:51.047

我认为您在此示例中要查找的是临时文件，而不是管道。在大多数情况下，您希望并行执行管道。在您的情况（分析）以及前面的命令应该在执行后面的命令之前成功时，顺序操作是可取的。我建议使用`mktemp`此效果。`mkfifo`对于此示例，我不知道通过进程替换或 with 使用 FIFO 的方法，因为`$run_command`它始终依赖于`tar`.

# java - 我如何根据注释和命名破译这段代码的作用？

> ID：10972073
> 
> 赞同：1
> 
> 时间：2012-06-10T20:21:39.383
> 
> 标签：java, debugging

我正在探索一个大型 Java 库，并遇到了这段代码。我想知道@Override 的用途以及评论中的# 符号。

这是一个不完整的功能吗？看起来像这样，因为它总是返回 false。

```
/* (non-Javadoc)
 * @see cascadas.supervision.components.SensorDataReady#evaluate(cascadas.ace.event.Event, cascadas.ace.session.Contract, cascadas.ace.session.Session, cascadas.ace.session.Session)
 */
@Override
public boolean evaluate(Event inputMessage, Contract contract,
        Session executionSession, Session globalSession) {
    // TODO Auto-generated method stub
    return false;
} 
```

我很感激任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:28:21.380

有关井号 ( `#`) 的含义，请参阅[Javadoc 标记](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see)[的文档`@see`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see)。它基本上指定一个`package.class#member`.

该`(non-Javadoc)`部分指定此方法将从其超类之一的 Javadoc 继承其 Javadoc。方法注释基本上是引导您`SensorDataReady#evaluate`查看此方法的 Javadoc。

`@Override`是注解。请参阅它的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Override.html)。

至于方法本身，它看起来像[Eclipse 生成的代码](https://stackoverflow.com/questions/501648/how-to-change-auto-generated-code-when-creating-new-class-in-eclipse)。Eclipse 将`TODO`注释放在那里以提醒开发人员实现被覆盖的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:26:42.990

`@Override`指示该方法正在覆盖基类方法。

# comments - 评论框审核工具的问题

> ID：10972080
> 
> 赞同：0
> 
> 时间：2012-06-10T20:23:00.693
> 
> 标签：comments, facebook-apps

我已经花了几个晚上来让审核工具在不同页面上的评论框中工作。在这个网站和网上我找不到解决我问题的答案。

如果我将我网站的链接放在调试工具中，我会得到以下信息：

> 必须修复的错误对象无效值：“网站”类型的 URL“http://www.mysite.be/Page.php”处的对象>无效，因为给定值“{e-mail@msn.com}”无法将属性“fb:admins”解析为“fbid”类型。

所以我检查了我的用户名是否正确。它是，但在我的代码中，在头部，它是一个数字：

```
<meta property="fb:admins" content="5897144XX"/>
<meta property="fb:app_id" content="3226088511525XX"/>
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.mysite.be/page.php" />
<meta property="og:title" content="Title" />
<meta property="og:description" content="Discription" />
<meta property="og:image" content="http://www.mysite.be/page.png"/>
<meta property="og:image:width" content="150" />
<meta property="og:image:height" content="150" /> 
```

在我头顶上方：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/" xml:lang="en" lang="en" dir="ltr"> 
```

在身体里：

```
<div class="fb-comments" data-href="http://www.mysite.be/page.php" data-num-posts="5" data-width="470"></div>
<div id="fb-root"></div>
<script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src= "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=3226088511525xx"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));

</script>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '3226088511525xx', // App ID
      channelUrl : '//www.mysite.be/channel.php', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

评论框工作正常，人们可以对一篇文章做出反应，它会显示在 Facebook 上。但是我在审核工具中看不到的反应。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T15:15:58.350

您不能同时将管理员和应用程序 ID 作为元标记。你必须删除一个，如果我是你，我应该选择你自己的用户配置文件来删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:14:09.640

顺便说一句，Facebook 有调试工具：

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

虽然它不是 100% 防弹的（例如，一旦我的图像出现问题，它在调试工具中运行良好但在 url 提交中不可见），但可能会在元数据中发现细微的错误。

# android - 强制关机安卓

> ID：10972083
> 
> 赞同：1
> 
> 时间：2012-06-10T20:23:43.177
> 
> 标签：android, android-intent

出于某种原因，我新创建的课程不会收到上一个课程的意图，并导致应用程序关闭（这只发生在这个课程上，不会发生在其他课程上）

这是我的代码：

```
 package com.WNF;

 import android.os.Bundle;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ArrayAdapter;
 import android.widget.ListView;
 import android.app.ListActivity;
 import android.content.Intent;

 public class Actiemenu extends ListActivity{

 @Override 
 public void onCreate(Bundle savedInstanceState) { 

super.onCreate(savedInstanceState); 
setContentView (R.layout.actiemenu);

final String[] array = new String[] {
        "Ding", "AnderDing", "Nogeending", "laatseding"
    };

setListAdapter(new ArrayAdapter<String> (this, R.layout.actiemenu, array));
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        if (position == 0) {
            Intent een = new Intent(v.getContext(), Acties.class);
            startActivity(een);
        }
        else if (position == 1) {
            Intent twee = new Intent(v.getContext(), Acties2.class);
            startActivity(twee);
        }
    }
    });
getIntent();
    }
    } 
```

我究竟做错了什么？？

编辑：Logcat 堆栈：

[![logcat 堆栈](../Images/aaa7b739e284cec77a84a8b70db8c565.png)](https://i.stack.imgur.com/yynG3.png)
[（来源：[alphalife-roleplay.com](http://www.alphalife-roleplay.com/logcat.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:07:09.230

根据[这个](https://stackoverflow.com/questions/3533370/android-activity-not-found-exception)问题，您的`onCreate()`方法中最有可能出现未处理的异常。

它是一个完整的调用堆栈吗？您可能有一个类似“...引起...”的字符串，它将指向代码中发生异常的位置（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:57:56.060

我执行列表视图的方式是通过将活动名称设置为：

“com.whateveryouhavehere。” + 你的数组[v]

把它放在 onItemClicked

那应该让它进入正确的活动。

现在，您告诉它根据单击数组的哪一部分转到名称。

您需要使用您在清单中为活动设置的名称，而不是类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:29:36.950

当我将活动添加到**AndroidManifest.xml时，这通常会发生在我身上**

让我知道这是否有帮助。

# python - 如何使用 Python 正则表达式获取 Image src？

> ID：10972086
> 
> 赞同：4
> 
> 时间：2012-06-10T20:24:22.147
> 
> 标签：python, html, regex, html-parsing

如何使用正则表达式使用 Python 从以下 html 字符串中获取图像的 src

`<td width="80" align="center" valign="top"><font style="font-size:85%;font-family:arial,sans-serif"><a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNFqz8ZCIf6NjgPPiTd2LIrByKYLWA&amp;url=http://www.news.com.au/business/spain-victory-faces-market-test/story-fn7mjon9-1226390697278"><img src="//nt3.ggpht.com/news/tbn/380jt5xHH6l_FM/6.jpg" alt="" border="1" width="80" height="80" /><br /><font size="-2">NEWS.com.au</font></a></font></td>`

我试着用

```
matches = re.search('@src="([^"]+)"',text)
print(matches[0]) 
```

但一无所获

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T20:33:12.273

[您可以考虑使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc)代替正则表达式：

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(junk)
>>> soup.findAll('img')
[<img src="//nt3.ggpht.com/news/tbn/380jt5xHH6l_FM/6.jpg" alt="" border="1" width="80" height="80" />]
>>> soup.findAll('img')[0]['src']
u'//nt3.ggpht.com/news/tbn/380jt5xHH6l_FM/6.jpg' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T20:26:00.383

只需在正则表达式中丢失 @ 即可

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T20:30:07.217

你可以简化`re`一下：

```
match = re.search(r'src="(.*?)"', text) 
```

# c# - 如何将文件插入文件流数据类型

> ID：10972091
> 
> 赞同：1
> 
> 时间：2012-06-10T20:24:59.833
> 
> 标签：c#, .net, sql-server-2008, excel, filestream

我正在创建一个应用程序，使用 SQL Server 2008 提供的文件流数据类型将 Excel 文件存储到数据库中，现在我一直在互联网上搜索使用 C# 中的存储过程插入它的最佳实践方法。

到目前为止，我已经创建了数据库结构和类，我现在需要做的是实际使用存储过程，我被卡住了，这是代码片段

```
OpenFileDialog ofd = new OpenFileDialog();
ofd.ShowDialog();

if (ofd.CheckFileExists)
{
    ....            
}

using (SqlConnection conn = new SqlConnection(Murel.Util.DBUtil.CONSTRING))
{
    try
    {
        conn.Open();

        using (SqlCommand cmd = new SqlCommand("items_insert", conn))
        {
           cmd.CommandType = CommandType.StoredProcedure;
           cmd.Parameters.Add(new SqlParameter("@name", "test"));
           cmd.Parameters.Add(new SqlParameter("@template", HELP));

           Guid id = (Guid)cmd.ExecuteScalar();

           return true;
        }
     }
     catch (Exception ex)
     {
        throw ex;
     }
     finally
     {
         conn.Close();
     }
  } 
```

数据表由`id`一个唯一标识符、名称和模板组成`varbinary(max)`，我已经设置了其他任何东西，我只需要知道要输入什么

```
cmd.Parameters.Add(new SqlParameter("@template", HELP)); 
```

谢谢，

大流士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:53:41.560

试试这个，应该可以

```
byte[] fileContent = new byte[ofd.PostedFile.ContentLength];
ofd.PostedFile.InputStream.Read(fileContent, 0,ofd.PostedFile.ContentLength);
command.Parameters.Add("@FileContent", SqlDbType.VarBinary, -1).Value = fileContent; 
```

ofd 是您的文件上传控件

# html - 无序列表未在 div 中一直向左对齐

> ID：10972096
> 
> 赞同：19
> 
> 时间：2012-06-10T20:25:39.600
> 
> 标签：html, css

我有一个无序列表，用作简单的导航栏。如下所示：

![在此处输入图像描述](../Images/55b31c324e029b04f5d87226d3f94f1c.png)

正如您所看到的，尽管`<li>`元素并没有一直对齐到`<div>`它们所在的左侧。我已经尝试`text-align: left;`过包含`<div>`但似乎没有效果。

```
 #menu {
        width: 800px;
        margin: 0 auto;
    }

    #menu div {
        float: left;
        width: 400px;
        height: 60px;
        background-color: #CACACA;
    }

    #menutop {
        text-align: left;
    }

    #menutop ul {
        list-style: none;
    }

    #menutop li {
       display: inline;
       padding: 10px;
    }

    #menutop a {
        color: #000000;
        text-decoration: none;
    }

    #menutop a:hover {
        text-decoration: underline;
    } 
```

```
 <div id="menu">                                                                         
        <div id="menutop">                                                                  
            <ul>                                                                            
                <li><a href="#">Home</a></li>                                               
                <li><a href="#">About</a></li>                                              
            </ul>                                                                           
        </div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-10T20:31:39.917

`ul`并且`li`默认情况下有边距或填充，具体取决于浏览器。您需要在菜单中覆盖此默认样式：

```
#menu ul, #menu li {
    margin: 0; padding: 0;
} 
```

[在此处](http://jsfiddle.net/vg3Wm/)查看演示

^(注意：默认情况下，jsfiddles 会重置 CSS，因此并不总是很适合测试这种事情。在寻找这种错误时，请确保禁用“规范化 CSS”。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T06:30:48.443

设置 padding,margin 0px,

```
#menutop ul {
    padding: 0;
    margin: 0;
    list-style: none;
} 
```

[演示](http://jsfiddle.net/tQb75/)

[http://jsfiddle.net/tQb75/](http://jsfiddle.net/tQb75/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T21:02:43.663

您可以覆盖 ul 和 li 填充和边距。

这个简单的代码：

```
.menu ul, .menu li{
   margin:0;
   padding:0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T20:28:39.387

尝试使用**[CSS Reset](http://meyerweb.com/eric/tools/css/reset/)**。

最简单的形式是：

```
* { margin: 0; padding: 0; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-23T06:07:46.250

您可以删除菜单的边距和填充

```
#menu *{
margin:0;
padding:0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-10T20:31:04.993

`<ul>`元素左对齐，但`<li>`元素已`padding-left`设置为`10px`。这就是为什么第一个元素稍微偏右的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-08T01:28:53.647

我创建了一个文本左对齐的 div，然后给了那个 div 边距 - x auto。这样 div 水平居中。该 div 内的任何 ul 都会自动左对齐并居中。我正在使用 Bootstrap 类。

```
<div class="text-left mx-auto"> 
  <ul> 
    <li></li>
  </ul>
</div> 
```

# ruby-on-rails - 使用 Sinatra 和 Datamapper 的虚拟属性

> ID：10972097
> 
> 赞同：2
> 
> 时间：2012-06-10T20:25:49.630
> 
> 标签：ruby-on-rails, ruby, sinatra, datamapper, virtual-attribute

我正在将 Rails 应用程序转换为 Sinatra。该应用程序依赖于支持虚拟属性的 ActiveRecord，但是，我正在努力在 DataMapper 中找到类似的支持。

在 Rails 中，我使用了一种算法来生成分数并根据分数对记录进行排序。虚拟属性是这个过程的核心。有谁知道如何在 Sinatra/DM 中复制此功能？

我愿意接受任何解决方法。重构可以稍后进行，因为我目前只对功能感兴趣。

理论上，该解决方案的工作原理如下：

```
require 'sinatra'
require 'data_mapper'
require 'haml'

DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/example.db")

class Link
  include DataMapper::Resource
  property :id, Serial
  property :title, Text
  property :url, String
  property :points, Integer, :default => 0
  property :created_at, Time

  attr_accessor :score

  def calculate_score
    time_elapsed = (Time.now - self.created_at) / 3600
    self.score = (self.points-1) / (time_elapsed+2)**1.8 
  end
end

DataMapper.finalize.auto_upgrade!

get '/hot' do
    @links = Link.all :order => :score.desc 
    haml :index 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:34:08.317

我没有使用过数据映射器，但我认为这段代码将为您提供所需的功能：更改包括 Link 上的新类方法`all_sorted_desc`并在“获取”请求中调用它

```
require 'sinatra'
require 'data_mapper'
require 'haml'

DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/example.db")

class Link
  include DataMapper::Resource
  property :id, Serial
  property :title, Text
  property :url, String
  property :points, Integer, :default => 0
  property :created_at, Time

  attr_accessor :score

  def calculate_score
    time_elapsed = (Time.now - self.created_at) / 3600
    self.score = (self.points-1) / (time_elapsed+2)**1.8 
  end

  def self.all_sorted_desc
    self.all.each { |item| item.calculate_score }.sort { |a,b| a.score <=> b.score }.reverse 
  end
end

DataMapper.finalize.auto_upgrade!

get '/hot' do
    @links = Link.all_sorted_desc 
    haml :index 
end 
```

# javascript - CoffeeScript - 理解“@”

> ID：10972100
> 
> 赞同：2
> 
> 时间：2012-06-10T20:26:04.953
> 
> 标签：javascript, coffeescript

我已经阅读了几篇关于 CoffeeScript OOP 的论文。从他们那里，我是否正确理解使用`@`CoffeeScript 中的符号（和`this`JavaScript 中的前缀）：

*   for variables：使变量成为类实例的成员。每个实例都有它自己的变量（非静态变量）
*   对于“方法”：使方法成为静态的，这与它对变量的作用相反

我是JS和CS的菜鸟，对不起。他们的哲学与我习惯的完全不同。

**更新**

以下是我阅读的信息的参考：

*   [参考1](http://elegantcode.com/2011/07/26/exploring-coffeescript-part-4-objects-and-classes/)
*   [参考文献2](http://www.gridlinked.info/oop-with-coffeescript-javascript/#statics)

只需搜索`static`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T20:40:23.680

在方法内部，`@`是 JavaScript 的`this`，指的是当前对象；当前对象取决于该方法的调用方式，请参阅[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)以及[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)弄乱方法`@`（AKA `this`）的方法；您还可以[使用`=>`将方法绑定](http://coffeescript.org/#fat_arrow)到 CoffeeScript 中的对象。

如果你说，那与该对象中的and`@p = 11`相同。`this.p = 11``p`

在类定义中，`@`指的是类本身。所以这：

```
class C
    @m: -> ... 
```

定义了一个类方法，你可以说`C.m()`执行它。

考虑这个例子：

```
class C
    a: -> @p = 11
    b: -> console.log(@p)
    @c: -> console.log('Class method')

C.c()            // This calls the class method.
o = new C
o.b()            // There is no 'o.p' yet.
o.a()            // This sets 'o.p'.
o.b()            // And now we see an 'o.p'.
console.log(o.p) // And we see o.p here as well. 
```

这将在控制台中为您提供以下输出：

```
Class method
undefined
11
11 
```

演示：http: [//jsfiddle.net/ambiguous/DFcRt/](http://jsfiddle.net/ambiguous/DFcRt/)

这些可能也很有趣：

*   [CoffeeScript 中的变量类型](https://stackoverflow.com/q/9347782/479863)
*   [如何将方法设为私有并在 Coffeescript 中继承？](https://stackoverflow.com/q/10612293/479863) ​</li>

# lua - Lua：问一些事情，回答，正确答案=更多信息？

> ID：10972101
> 
> 赞同：1
> 
> 时间：2012-06-10T20:26:18.093
> 
> 标签：lua

我正在创建一个小程序来向我的朋友炫耀......这是我的第一个程序，所以我需要很多帮助。

我的问题：我有文字，一个问题，但是当你输入某行时，我如何做出特定的答案，比如诺亚？到目前为止，这是我的代码...

```
 local background = display.newImage( "white.png" )

    local text = display.newText( "Hello!", 25, 65, "Helvetica", 22 )
    text:setTextColor( 0, 128, 0 )

    local text = display.newText( "What is your name?", 25, 100, "Helvetica", 22 )
    text:setTextColor( 0, 128, 0 )

    local answer
    repeat
       io.write("What is your name?")
       io.flush()
       answer=io.read()
    until answer=="Emmy" or answer=="Mom" or answer=="Dad" or answer=="Noah" 
```

我正在试用 Corona SDK，它只是不断重复“你叫什么名字？” 我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:32:53.473

我会将响应编码在表格中。像这样：

```
local responses={Emmy="Hi Emmy!",Mom="Hi Mom!",Dad="Hi Dad!",Noah="Hi Noah!"}
local answer
repeat
    io.write("What is your name?\n")
    io.flush()
    answer=io.read()
until responses[answer]
print(responses[answer]) 
```

这将在表中查找答案，`responses`如果匹配，则返回请求的答案。

请注意，此逻辑将用于提示和回答标准输入和输出。对于 GUI 的东西（比如 Corona 可能使用的），您应该使用它们的一些功能或方法。我可以想象使用该`newText()`函数生成的文本对象可能有一个 changeText （或值，或任何方法）来更改显示的文本。

# mysql - MySql FULLTEXT INDEX 与 JOINS

> ID：10972103
> 
> 赞同：1
> 
> 时间：2012-06-10T20:26:19.180
> 
> 标签：mysql, join, inner-join, full-text-indexing

是否可以在从两个表的内部连接派生的两列上创建全文索引？如果是，请给我一个例子的语法。

认为

```
`table1 = Car_first (Columns: car_id, car_name)` 

`table2 = Car_second (Columns: car_id, car_description)` 
```

现在我想`MATCH (car_name, car_description) AGAINST`查询字符串。请帮忙。泰。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:04:11.553

`FULLTEXT`不是直接的，但 MySQL 的相关性评分是相加的，因此结果与在每个表中的列上具有单独的索引并执行以下操作相同：

```
MATCH(car_name) AGAINST 'foo' + MATCH(car_description) AGAINST 'foo' 
```

# c++ - C++ GMP，为什么会抛出错误？

> ID：10972104
> 
> 赞同：-3
> 
> 时间：2012-06-10T20:26:21.450
> 
> 标签：c++, gmp

```
mpz_t* myArr= new mpz_t[M+1];
cout << myArr[0] << endl;
cin.get(); //so I know the program pauses here if everything's OK so far 
```

M 是 long long 数据类型。

我也试过

```
mpz_t* myArr= new mpz_t[M+1];
mpz_set_si(myArr[0],0);
cout << myArr[0] << endl;
cin.get(); //so I know the program pauses here if everything's OK so far 
```

只是给它一个价值，但它仍然不起作用。

运行时崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:38:20.307

您必须初始化 mpz_t 值，这些值只是使用 GMP C API 的普通 C 结构。如果要使用带有构造函数的类，请使用 mpz_class，它是一个 C++ 类。

例子：

```
mpz_class x;
x = 3;
mpz_class y;
y = x * 7; 
```

# php - CodeIgniter 控制器命名混乱

> ID：10972109
> 
> 赞同：0
> 
> 时间：2012-06-10T20:26:52.630
> 
> 标签：php, html, css, codeigniter

我需要一些帮助来构建我的网站。

我有一个`home.php`只绘制主页的控制器。`members.php`控制器基本上处理其他所有事情，从检查用户是否登录到将用户发送到注册页面，以及将数据发送到`membership_model.php`.

我的问题是：我应该以不同的方式安排吗？当用户单击给定链接时，我的`home.php`控制器不应该负责加载正确的视图。如果用户点击注册按钮，`home.php`控制器不应该加载注册页面的模板吗？我只是觉得让加载主页的控制器只这样做是错误的。

如果我在主页控制器中有一个注册方法，并且还有一个`register.php`控制器来处理从注册页面发生的事情，那可以吗？这合适吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:31:03.647

您应该根据需要拆分它。没有这样做的“最佳”方式。

使用主控制器处理网站的视觉部分，让另一个控制器处理所有与用户相关的操作（如用户面板、注册、登录等）。至少那是我会做的。没有这个的食谱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:27:09.253

不要担心有一个只加载主页的主页控制器。如果这就是你需要的，那就是你需要的。最好将事情组织起来并拥有一个几乎没有什么文件的文件，而不是停留在其他没有意义的地方。

像 Nicolas 我使用 users.php 控制器，它可以登录、注销、注册等...

# python - django 1.3 基于类的视图-> FormView，请求之间的初始结转？

> ID：10972113
> 
> 赞同：0
> 
> 时间：2012-06-10T20:27:10.617
> 
> 标签：python, django-forms, django-views

我在 Django 中遇到了一个奇怪的问题，我认为这可能是因为我没有正确理解基于类的视图是如何工作的。

基本上我有一个 ListView 和一个 FormView。一是列出对象，二是编辑。

在浏览器中，如果我从列表视图导航到现有对象的表单视图，我会得到预期的结果：表单字段填充了预期值。

相同的表单视图用于呈现用户可以创建对象的空白表单。
如果我从现有对象的表单导航到新对象的表单视图或列表视图，然后导航到新对象的表单视图，则初始（即 CBV 的 self.initial）预先填充了来自现有对象的信息参观了。
显然，我希望 self.initial 在新的获取请求开始时为空白。

我的理解是每个请求都会生成一个基于类的视图的新实例。初始如何跨请求结转？我是根据一些调试得出这个结论的。下面的 get_initial() 中的相关行。

```
def get_initial(self, **kwargs):
    initial = super(M_EditNewsletterView, self).get_initial(**kwargs)       
    fs_logger.debug('initial immediately after super -> %s' % initial) 
```

SO建议这是相似的，但我不明白赞成票的答案。 [Django(trunk) 和基于类的通用视图：一个表单的初始数据出现在另一个表单中](https://stackoverflow.com/questions/5019070/djangotrunk-and-class-based-generic-views-one-forms-initial-data-appearing-i)

谁能帮我解释一下发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:56:31.907

`get_initial`将仅根据`initial`类的属性返回值。只是一个猜测 - 但你`initial`是这样设置的吗？

IE

```
class M_EditNewsletterView(FormView):
    #this value will essentially be constant as it belongs to the 
    #class, not the instance
    initial = get_my_value() 
```

您应该自己覆盖“get_initial”方法。

```
def get_initial(self, **kwargs):
    return get_my_value() 
```

# android - 如何从 AsyncTask 中取回字符串？

> ID：10972114
> 
> 赞同：54
> 
> 时间：2012-06-10T20:27:20.310
> 
> 标签：android, string, android-asynctask

我有以下课程：

```
public class getURLData extends AsyncTask<String, Integer, String>{

@Override
protected String doInBackground(String... params) {
    String line;
    try {  
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(params[0]);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        line = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
    } catch (MalformedURLException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
    } catch (IOException e) {
        line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
    }
    return line;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
}

} 
```

我试图这样称呼它：

```
String output = null;
output = new getURLData().execute("http://www.domain.com/call.php?locationSearched=" + locationSearched); 
```

但是输出变量没有获取数据，而是出现错误：

```
Type mismatch: cannot convert from AsyncTask<String,Integer,String> to String 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-10T20:30:42.530

该方法`execute`返回`AynscTask`自身，您需要调用`get`：

```
output =
    new getURLData()
        .execute("http://www.example.com/call.php?locationSearched=" + locationSearched)
        .get(); 
```

这将启动一个新线程（via `execute`），同时阻塞当前线程（via `get`），直到新线程的工作完成并返回结果。

如果你这样做，你只是把你的*异步*任务变成了*同步*任务。

但是，使用的问题`get`在于，因为它是阻塞的，所以需要在工作线程上调用它。但是，`AsyncTask.execute()`需要在主线程上调用。因此，尽管此代码可以工作，但您可能会得到一些不希望的结果。我还怀疑`get()`谷歌对它的测试不足，他们可能在某个地方引入了一个错误。

参考：[AsyncTask.get](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-10T20:45:39.353

我宁愿创建回调而不是阻止 UI 线程。在您的类中创建数据到达时将调用的方法。例如：

```
private void setData(String data){
    mTextView.setText(data);
} 
```

然后在 AsyncTask 中实现 onPostExecute：

```
@Override
protected void onPostExecute(String result) {
    setData(result);
} 
```

然后在代码中的某个地方执行任务：

```
new getURLData().execute(... 
```

当任务完成时调用 setData 并填充 mTextView。

AsyncTask.get() 会阻塞你的 UI，所以没有理由使用 AsyncTask。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T21:13:25.560

如果用户点击按钮，则必须等待内容，同时他们在做什么？

为什么不这样做：

1.  用户点击按钮。
2.  您*检查连接性*。如果用户未连接到 Internet，请告诉他们。
3.  您通过发送一个 Intent 来启动一个 IntentService 以发送 HTTP 请求。
4.  请求完成后，您会发布通知。
5.  用户点击通知，返回一个可以进行下一步的Activity。

这允许用户在处理请求时离开并做任何事情。

IntentService 在自己的线程上在后台运行。当它接收到一个 Intent 时，它运行 onHandleIntent()。当该方法完成时，Service 被缓存：它不是活动的，但它可以在下一个 Intent 到达时快速重新启动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-03T19:40:56.110

1.  像这样在构造函数中获取上下文：

    `public GetDataTask(Context context) {}`

2.  使用以下方法创建接口：

    `void onDataRetrieved(String data);`

3.  在创建任务对象的类中实现接口（例如`MainActivity`）

4.  将上下文强制转换为接口并调用 onDataRetrieved 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-17T04:23:11.747

在下面的代码中，我从 AsyncTask 返回一个字符串（directorName）。

```
public class GetDirector {
    String id;
    private String baseURL = "http://www.omdbapi.com/?i=";
    private String finalURL = "";
    String theDirector;

    public GetDirector(String imdbID) throws ExecutionException, InterruptedException {
        id= imdbID;
        finalURL = baseURL + id + "&plot=full&r=json";
        System.out.println("GetDirector. finalURL= " + finalURL);
        theDirector = new GetDirectorInfo().execute().get();
    }

    public String getDirector (){
        return theDirector;
    }

    private class GetDirectorInfo extends AsyncTask<Void, Void,String> {
        @Override
        protected String doInBackground(Void... params) {
            String directorName = null;

            ServiceHandler sh = new ServiceHandler();

            // Making a request to url and getting response
            String jsonStr = sh.makeServiceCall(finalURL, ServiceHandler.GET);
            System.out.println("Act_DetailsPage. jsonStr= " + jsonStr);

            if (jsonStr != null) {
                try {
                    JSONObject everything = new JSONObject(jsonStr);

                    directorName = everything.getString(JSON_Tags.TAG_DIRECTOR);
                    System.out.println("directorName= "+ directorName);
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            } else {
                System.out.println("Inside GetDirector. Couldn't get any data from the url");
            }
            return directorName;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-24T02:53:14.717

这个 ONE LINER 为我工作：

```
String result = MyasyncTask.execute(type, usrPhoneA, usrPWDA).get(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-22T08:36:39.253

向任务的构造函数添加一个上下文参数，该参数将引用存储结果数据的对象。

```
class PopulateArray extends AsyncTask<Integer, Integer, ArrayList<String>>
{
    Context _context; // context may be what ever activity or object you want to store result in
    PopulateArray(Context context)
    {
        _context = context;
    }
    @Override
    protected ArrayList<String> doInBackground(Integer... integers)
    {
        ArrayList<String> data = new ArrayList<String>();
        //manipulate
        return data;
    }

    @Override
    protected void onPostExecute(ArrayList<String> strings)
    {
        _context.setData(strings);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-01T04:40:36.510

`AsyncTask`将数据从 UI 发送到 UI的唯一方法是[Otto](https://github.com/square/otto)或[事件](https://github.com/greenrobot/EventBus)总线。注册一个方法，该方法将`@Subscribe`在 UI 中`post`的注释下处理结果`message`，并在`onPostExecute`您的`AsyncTask`.

# javascript - 使用 Javascript 的边框半径

> ID：10972115
> 
> 赞同：6
> 
> 时间：2012-06-10T20:27:24.527
> 
> 标签：javascript, css

使用 CSS，单独的边框半径设置如下：

```
border-top-left-radius: 10px;   
border-top-right-radius: 10px;   
border-bottom-left-radius: 10px;   
border-bottom-right-radius: 10px; 
```

但是我将如何使用 Javascript 设置这些单独的边界半径？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T20:31:07.750

```
<div id="target">Lorem Ipsum</div>

<script type="text/javascript">
    var target = document.getElementById("target");
    target.style.borderTopLeftRadius = "20px";
</script> 
```

**[现场示例](http://jsfiddle.net/pWDFp/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T20:29:36.633

```
element.style['border-top-left-radius'] = '4px';
element.style['border-top-right-radius'] = '4px';
element.style['border-bottom-left-radius'] = '4px';
element.style['border-bottom-right-radius'] = '4px'; 
```

甚至更小：

```
element.style['border-radius'] = '4px'; 
```

您还可以使用：

```
element.style.borderTopLeftRadius = '4px';
element.style.borderTopRightRadius = '4px';
element.style.borderBottomLeftRadius = '4px';
element.style.borderBottomRightRadius = '4px'; 
```

但请记住，它（还）不是网络标准，所以每个浏览器都有自己的声明：

```
element.style['border-radius']//Future standard
element.style['-webkit-border-radius']//Webkit(Safari and Chrome)
element.style['-moz-border-radius']//Mozilla Firefox
element.style['-o-border-radius']//Opera 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:41:34.160

如果可能的话，最好制作 CSS 类并指定每个角的圆角，然后使用简单的 JS 在类之间进行交换。这样，例如，如果浏览器需要或者是 IE，`-webkit-border-radius`您可以更轻松地指定回退。`border-radius`

# java - 如何使用 jsoup 解析没有 Id 标签的表格。

> ID：10972118
> 
> 赞同：1
> 
> 时间：2012-06-10T20:28:10.027
> 
> 标签：java, arrays, jsoup

如何解析没有 Id 标签的表格。我正在尝试使用源代码行 2290 到 3153 [http://pastebin.com/DjGHED5t解析一个表](http://pastebin.com/DjGHED5t)

对我来说如何做到这一点并不明显。我现在拥有的是

```
import java.util.*;
import java.io.*;
import java.awt.*;
import javax.swing.*;
import org.jsoup.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class test{
public static void main (String []args){
    String Ticker = "KO";
    URL url = new URL("http://toolbox.investools.com/graphs/fundamentalAnalysis.iedu?report=BS&symbol="+(Ticker));
    Document doc = Jsoup.parse(url, 3000);
    Elements table = doc.select(table);
    Iterator<Element> ite = table.select(table[width="100%"] [bgcolor="#CCCCCC"] [cellpadding="0"] [cellspacing="2"]);

        String[][] balanceSheetInfo = new String [46][11];

        while (ite.hasNext()){
            for (int row = 0, row_size = balanceSheetInfo[row].length; row < row_size; row++){
                    for (int col = 0, col_size = balanceSheetInfo.length; col < col_size; col++){
                        if(ite.hasNext()){
                        balanceSheetInfo[col][row] = input.next();
                        System.out.printf("%s",balanceSheetInfo[col][row]);                         }
                    }
                }                   
            }
        }
    } 
```

但我收到符号未找到错误。鉴于这是我使用它的第一个项目，我对 Jsoup 和抓取并不擅长。如果有人可以指导我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:03:55.843

阅读您的代码：

```
Elements table = doc.select(table); 
```

您`doc.select(table)`甚至在声明之前就使用了表变量 (in )。该[`Element.select()`方法](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#select%28java.lang.String%29)接受一个字符串作为参数。你需要

```
Elements table = doc.select("table"); 
```

带双引号，它将选择所有表格元素。

下一行有同样的问题：

```
table.select(table[width="100%"] [bgcolor="#CCCCCC"] [cellpadding="0"] [cellspacing="2"]); 
```

应该

```
table.select("table[width=\"100%\"] [bgcolor=\"#CCCCCC\"] [cellpadding=\"0\"] [cellspacing=\"2\"]"); 
```

# macos - 响应 keyDown 事件的最佳实践

> ID：10972119
> 
> 赞同：4
> 
> 时间：2012-06-10T20:28:17.450
> 
> 标签：macos, cocoa, design-patterns, keydown, cocoa-design-patterns

我正在编写我的第一个 Cocoa 应用程序。这是一个简单的实用程序——一个计算器。我已经完成了所有工作，我最不想添加的是我希望应用程序响应按键事件。因此，您可以用鼠标单击“4”按钮，也可以直接按键盘上的“4”键。我正在阅读所有的事件处理文档，但我没有采用推荐的方法来获取处理事件的 NSResponder（或 NSView）。

我可以创建一个 NSWindow 的子类并告诉界面构建器创建该类型的主窗口。然后，当我在我的新 NSWindow 子类中覆盖 keyDown 消息时，它会获取事件，但我不确定如何将它连接到我的应用程序委托类（因为我基本上只想打开按下的键并调用相应的消息在按钮“选择”操作目标的委托中。

或者，我想我听说过通过将应用程序委托类的超类从 NSObject 更改为 NSView 或 NSResponder 或其他东西来做到这一点。我并没有过多地探讨这个想法，但我不确定如何实际获取应用程序委托对象，然后实际设置为第一响应者（我认为这就是我想要做的）。

所以，我希望有人能给我关于如何/在哪里实现我的 keyDown 方法的具体指导，但我也想了解推荐的“最佳实践”是什么。苹果会说什么是做这件事的正确架构？我对学习如何使这项工作像学习其背后的 Apple 设计模式一样感兴趣。

我的程序结构如下：我有一个 nib 文件（实际上是一个 .xib），我在其中设计了一个带有用于显示的文本框和几个按钮的窗口。我已经将出口和操作从那里注册到 AppDelegate 类（标准项目模板为您设置的类）。遵循 MVC 模式，然后我有一个 AppDelegate 初始化的 Calculator 类，并且计算器的所有实际逻辑都在该类中。AppDelegate 基本上只是响应来自按钮的消息，将它们传递给 Calculator 类中的方法，然后向 Calculator 询问当前显示值并将其更新回文本框。因此，我的 nib 文件中的图形元素是“视图”，AppDelegate 是“控制器”，Calculator 类是“模型”。正确的？

那么，谁应该处理 keyDown 事件呢？似乎视图应该捕获它们并将它们发送到控制器，但是我该如何设置呢？

我想一个可能相关的问题是我已经看到提到“窗口控制器”和“视图控制器”类。我不确定我是否理解这些课程的意义。我的简单应用程序有吗？应该是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:48:15.560

Use `NSButton`'s `setKeyEquivalent:` method or set the key equivalent for each button in interface builder.

I'm not sure of the "proper" way to do this, but custom key event handling can be put in a custom window `contentView` like so:

```
- (void)keyDown:(NSEvent *)theEvent {
    NSLog(@"keyDown:%@", theEvent);

    //Put event handling code here.

    [super keyDown:theEvent];
}

- (BOOL)acceptsFirstResponder {
    return YES;
} 
```

If anyone knows the correct way of doing this, feel free to chime in.

# android - 使用 isavailable() 指示网络连接是否可行

> ID：10972121
> 
> 赞同：0
> 
> 时间：2012-06-10T20:28:27.900
> 
> 标签：android

我已尝试使用此代码检查我的移动网络连接

```
final ConnectivityManager connMgr = (ConnectivityManager) 
        getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo mobile = 
        connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if( mobile.isAvailable() ){
            Toast tst = Toast.makeText(this, "There is a network", Toast.LENGTH_SHORT);
              tst.show();   
                        }
        else
        {
            Toast tst = Toast.makeText(this, "There is No network",Toast.LENGTH_SHORT);
              tst.show();   
        } 
```

程序总是说“没有网络”，尽管有网络。可能是因为我使用的是 2G 的 SIM 卡，而这种方法适用于 3G。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:04:05.797

我猜你想要电话状态，而不是数据状态。

尝试使用不同的 API。

[http://developer.android.com/reference/android/telephony/ServiceState.html](http://developer.android.com/reference/android/telephony/ServiceState.html)

这可能有效。

[http://developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

可能也很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:35:51.170

尝试使用：

```
try{

     if(mobile.getState() == NetworkInfo.State.CONNECTED){
          //connected
     }else{
          //not connected
     }

}catch (Exception e){
    // if device doesnt have mobile
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T20:41:54.937

我用它来检查网络连接，希望它有帮助:)

```
public static boolean isOnline(Context applicationContext){
    ConnectivityManager cm = (ConnectivityManager) applicationContext.getSystemService(Context.CONNECTIVITY_SERVICE);
    try{ 
        return cm.getActiveNetworkInfo().isConnectedOrConnecting();
    }
    catch(NullPointerException npe){

        return false; //Airplane mode is on
    }
} 
```

# .net - Windows Azure Web 角色缓存（预览版）“挂起”使模拟器陷入部署循环

> ID：10972124
> 
> 赞同：5
> 
> 时间：2012-06-10T20:28:44.827
> 
> 标签：.net, azure, azure-web-roles, azure-caching

我正在尝试按照 Microsoft 网站上的指南，将 Windows Azure AppFabric 缓存替换为 2012 年 6 月 SDK 版本中引入的新发布的基于角色的缓存。

但是，在我的 Web 角色中选中*“启用缓存（预览）”*时，模拟器将无法成功实例化网站（模拟器日志： http: [//pastebin.com/dwbDvak2](http://pastebin.com/dwbDvak2)）。似乎它陷入了某种循环。禁用 Web 角色缓存使其再次工作。卸载所有以前的 Azure SDK 并重新安装 1.7 版本后，我得到了相同的结果。

Visual Studio 告诉我“角色实例的启动时间比预期的要长。你想继续等待吗？” [是][否]。按下是让它等待，并一遍又一遍地出现。

是否有人可能知道如何解决上述问题，或者可能已经尝试过新的 Web 角色缓存功能并使其在 azure 模拟器中运行？

[天蓝色本地调试环境部署对话框截图](http://s7.postimage.org/fh61tvpmj/Azure_Emulator_Stuck.jpg)

谢谢你。

**更新：**

我创建了一个新的解决方案，只添加了一个简单的 MVC 站点，添加了 Web 角色并启用了缓存，同样的事情发生了。因此，我查看了事件查看器，发现了与该问题相关的 3 个条目：

```
Fault bucket 3034750239, type 5
Event Name: CLR20r3
Response: Not available
Cab Id: 0

Problem signature:
P1: cacheinstaller.exe
P2: 1.0.4655.0
P3: 4fb0f3f9
P4: CacheInstaller
P5: 1.0.4655.0
P6: 4fb0f3f9
P7: 11
P8: 47
P9: System.TypeLoadException
P10: 

Attached files:
C:\Users\anan\AppData\Local\Temp\WEREA8F.tmp.WERInternalMetadata.xml

These files may be available here:
C:\Users\anan\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_cacheinstaller.e_1fbc3b72afb6acf93335ca8611850d289906c25_2ddaf529

Analysis symbol: 
Rechecking for solution: 0
Report Id: 3138ba06-b344-11e1-a8d6-402cf41c1e07
Report Status: 0

Application: CacheInstaller.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.MissingMethodException
Stack:
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStoreIfRequired()
   at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

接着：

```
Application: CacheInstaller.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.MissingMethodException
Stack:
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStoreIfRequired()
   at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

和：

```
Faulting application name: CacheInstaller.exe, version: 1.0.4655.0, time stamp: 0x4fb0f3f9
Faulting module name: KERNELBASE.dll, version: 6.1.7601.17651, time stamp: 0x4e21213c
Exception code: 0xe0434352
Fault offset: 0x000000000000cacd
Faulting process id: 0x17b4
Faulting application start time: 0x01cd4750f5db0096
Faulting application path: c:\users\anan\documents\visual studio 11\Projects\AzureCacheTest\AzureCacheTest\csx\Debug\roles\WebRole\plugins\Caching\CacheInstaller.exe
Faulting module path: C:\Windows\system32\KERNELBASE.dll
Report Id: 33a53608-b344-11e1-a8d6-402cf41c1e07 
```

仅供参考：这是一个 Windows 7 x64 企业版，使用 Visual Studio 2012 RC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:30:35.243

I had the same issue. To do with an AppFabric Server dll conflict - check whether you have AppFabric Server installed and either deinstall the cache or remove the cache assemblies from the GAC. I removed and the emulated cache works fine.

I have some information which may be helpful on our blog:

[http://blog.elastacloud.com/2012/06/09/using-the-windows-azure-cache-preview-with-sdk-1-7/](http://blog.elastacloud.com/2012/06/09/using-the-windows-azure-cache-preview-with-sdk-1-7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T20:04:09.373

对我来说，问题是我在 UNC Share 上运行我的项目（实际上它在我的 macbook 上的 VM 中运行）。当我在工作角色上选中“启用缓存”框后启动调试器时，它就会挂起。来看看，它大约每 2 秒在 C:\Windows\System32\%LOCALAPPDATA%\CrashDumps 中创建一个 160MB 的转储文件。在调试其中一个之后，我可以看到第一个错误是当它尝试在我的工作角色的缓存内容上启动 cmd.exe 时，它​​说 CMD 不能在网络共享上运行，所以它默认为 windows/system32 或某物。

就在那时，我发现了这篇方便的 7 岁 MS KB 文章： http: [//support.microsoft.com/kb/156276](http://support.microsoft.com/kb/156276)当我在注册表路径下添加`DisableUNCCheck REG_DWORD`并将值设置为时，一切都像冠军一样开始了。希望这对其他人有帮助。`0 x 1 (Hex)``HKEY_CURRENT_USER\Software\Microsoft\Command Processor`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:46:02.957

Missing method probably means that the assembly loaded doesn't have the method in there. Can you make sure that you've the proper assembly being added to your project ?

Ensure that you don't have Windows AppFabric Server installed in the machine as well, as it'll GAC the caching dll which will get picked up during runtime

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T03:49:27.770

你的意思是只要勾选`CheckBox`启用缓存，就会出现这个错误？这不应该发生......它在我的机器上运行良好。

您是在创建新项目还是升级现有项目？尝试创建一个新项目。

还要检查以下日志：

附加的文件：

```
C:\Users\anan\AppData\Local\Temp\WEREA8F.tmp.WERInternalMetadata.xml 
```

这些文件可能在此处可用：

```
C:\Users\anan\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_cacheinstaller.e_1fbc3b72afb6acf93335ca8611850d289906c25_2ddaf529 
```

# java - 在 4.0+ 上获取状态栏高度

> ID：10972125
> 
> 赞同：1
> 
> 时间：2012-06-10T20:28:45.390
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, statusbar, window-managers

我正在尝试获取状态栏高度，它在 2.3 中成功运行。但是当我在 4.0+ 上运行相同的代码时，它将返回为 0。

这是我正在使用的代码...

```
Rect rectgle= new Rect();
                Window window= getWindow();
                window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
                int StatusBarHeight= rectgle.top;
                int contentViewTop= 
                    window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
                int TitleBarHeight= contentViewTop - StatusBarHeight;

                Context context = getApplicationContext();
                CharSequence text = "DETERMINED STATUSBAR HEIGHT - "+TitleBarHeight;
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(context, text, duration);
                toast.show(); 
```

任何输入都会很棒！

# git - Git 要求提交或存储，但没有提交

> ID：10972128
> 
> 赞同：9
> 
> 时间：2012-06-10T20:28:57.933
> 
> 标签：git

尝试从远程分支中提取时出现错误： `Your local changes to the following files would be overwritten by merge: app/..../_shared.scss` Git is ask to commit the file or to stash。

问题是 - 我已经完成了`git add .`并且`git commit -am "trying to remove the error"`. 问题依然存在。

`git status`说：“没有提交（工作目录干净）”

有谁知道如何摆脱它？

解答： 将有问题的文件移动到其他位置。然后从树中删除有问题的文件。再拉一次。然后将您的违规文件中的更改与您刚刚提取的文件进行比较。hack，但它有效。

注意：我在这里找到了答案（[即使提交了这些更改，Git 也会要求我提交或存储](https://stackoverflow.com/questions/8709001/git-asks-me-to-commit-or-stash-changes-on-checkout-master-even-though-all-chang)），但由于没有人在最初的想法中投票，我应该重新发布。这是一个 hack，但它是解决问题的最快途径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T21:22:27.747

如果`git status`报告工作目录干净，我敢打赌你的工作目录中有一个被其他人添加到远程仓库的被忽略的文件。`git diff --stat your-branch remote-name/remote-branch`你可以用and来确认`git ls-files -i --exclude-standard`。

解决方案是从忽略文件中删除该文件（因此`git status`将其显示为未跟踪的文件），使用`--include-untracked`选项存储它，从远程提取更改，然后应用存储以合并您的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T09:54:42.550

Or you could *"force pull"* as I tend to call it.

A fair warning: this snippet will **destroy** all local changes.
(including commited but not pushed changes)

```
git fetch origin master
git reset --hard FETCH_HEAD
git clean -df 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:14:45.770

正如@ellotheth 所说，我试图检查被忽略的文件，但这不是问题。对我来说唯一的解决方案是移动受影响的文件。

然而，在提交期间有很多“无法取消链接文件，权限被拒绝”，我知道远程一些文件被移动/添加。可能它与Windows安装有关... [Git Checkout警告：无法取消链接文件，权限被拒绝](https://stackoverflow.com/questions/7199496/git-checkout-warning-unable-to-unlink-files-permission-denied)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T10:23:42.077

上述解决方案对我不起作用。我在有问题的文件中插入了一个空行并使用了命令`git update-index --no-assume-unchanged /path/to/file`。然后提交并正常推送。

# asp.net - Asp.net MVC3，使用构造函数

> ID：10972130
> 
> 赞同：1
> 
> 时间：2012-06-10T20:29:08.150
> 
> 标签：asp.net, asp.net-mvc-3

我想在构造方法中定义一个 cookie 值作为类变量，以使所有方法都可以使用 Cookie。

但我收到一条错误消息，例如，

**你调用的对象是空的。**

```
 public class OrdersController : Controller
{   
    string userData;

    public orderConroller(){
       string cookieName = FormsAuthentication.FormsCookieName;
           HttpCookie authCookie = Request.Cookies[cookieName];
       FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
           userData = authTicket.UserData;
    }

    public void a(){
      //I need Cookie
    }
    public void b(){
      //I need Cookie
    }
    public void c(){
      //I need Cookie
    }
    public void d(){
      //I need Cookie
    }
} 
```

我怎么解决这个问题？@.@

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T20:29:54.433

您不能在控制器构造函数中使用`HttpContext`（在您的情况下您正在尝试访问`Request`对象），因为它尚未初始化。您可以访问它的最早方法是[`Initialize`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.initialize.aspx)您可以覆盖的方法。

所以：

```
public class OrdersController : Controller
{   
    private string userData;

    protected override void Initialize(RequestContext requestContext) 
    {
        base.Initialize(requestContext);
        var request = requestContext.HttpContext.Request;
        string cookieName = FormsAuthentication.FormsCookieName;
        HttpCookie authCookie = request.Cookies[cookieName];
        FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
        userData = authTicket.UserData;
    }

    public void a() {
      //I need Cookie
    }
    public void b() {
      //I need Cookie
    }
    public void c() {
      //I need Cookie
    }
    public void d() {
      //I need Cookie
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:28:35.890

我看到您对 cookie 的需求与身份验证有关。对于身份验证，最好的方法是使用自定义授权过滤器。过滤器可以使用所需的所有信息初始化用户对象。比在构造函数中包含此代码更优雅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:44:30.177

您可以以惰性方式使用户数据可用：

```
public class OrdersController : Controller
{   
    private string userData;
    private string UserData {  
        get { 
            if(userData == null) {
                var request = requestContext.HttpContext.Request;
                string cookieName = FormsAuthentication.FormsCookieName;
                HttpCookie authCookie = request.Cookies[cookieName];
                FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
                userData = authTicket.UserData;
             }
             return userData;
         }
     }
...
} 
```

然后在您的操作中，您只需调用该`UserData`属性。这样您就不会在任何请求中执行该代码，而只是在需要用户数据的那些中执行（考虑到您正在解密事物，如果您不需要，您可能希望避免在每个请求中都这样做）。

希望能帮助到你。

# facebook - 获取有效的访问令牌以在 Facebook 网站状态上发布

> ID：10972131
> 
> 赞同：0
> 
> 时间：2012-06-10T20:29:16.310
> 
> 标签：facebook, facebook-graph-api

尝试使用带有图形 API 资源管理器的访问令牌，效果很好，但当然，这个令牌只在几个小时内有效。那么如何生成自己的呢？

注意：想在俱乐部的 Facebook 网站（不是个人网站！！）上从外部网站（连接的服务器和客户端 JS 到 FB）写

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T06:24:28.563

您必须在 facebook 上为您的网站制作一个应用程序。之后，您将授权所有访问者，并在范围参数中添加`offline_access`. `offline_access`影响实时访问令牌，但它不再可用。我刚刚在这里[删除了 offline_access](https://developers.facebook.com/roadmap/offline-access-removal/)。

# php - php ZipArchive readfile 错误 No such file or directory ziparchive

> ID：10972139
> 
> 赞同：0
> 
> 时间：2012-06-10T20:30:06.877
> 
> 标签：php, codeigniter, ziparchive

我正在尝试使用 PHP/codeigniter 在 zip 存档中下载多个文件。此代码适用于我的本地主机，但在 webhost 上，zip 开始下载，但文件未添加到 zip 文件中。这是我得到的错误：

```
A PHP Error was encountered

Severity: Warning
Message:  readfile(Album1.zip): failed to open stream: No such file or directory
Filename: controllers/download.php
Line Number: 54 
```

这是我的代码：

```
function _zipFilesAndDownload($file_names,$archive_file_name,$file_path)
    {

        $zip = new ZipArchive();

        if(file_exists($archive_file_name)){
            if ($zip->open($archive_file_name, ZIPARCHIVE::OVERWRITE )!==TRUE) {
            exit("cannot open <$archive_file_name>\n");
            }
        }else
        //create the file and throw the error if unsuccessful
        if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE )!==TRUE) {
            exit("cannot open <$archive_file_name>\n");
        }
        //add each files of $file_name array to archive
        foreach($file_names as $files)
        {
            $zip->addFile($file_path.$files,$files);
            //echo $file_path.$files."<br>";
        }
        $zip->close();
        //then send the headers to foce download the zip file

        header("Content-type: application/zip"); 
        header("Content-Disposition: attachment; filename=$archive_file_name"); 
        header("Pragma: no-cache"); 
        header("Expires: 0"); 
        readfile("$archive_file_name");

        exit;

    }
    function album($albumid){       
            $this->load->model("albums_model");
            $this->load->model("songs_model");
            $aid = $albumid;
            $albuminfo = $this->albums_model->getAlbum($aid);
            $songs = $this->songs_model->getSongNamesAvailableDownload($aid);
            $file_path=$_SERVER['DOCUMENT_ROOT']. '/demo/albums/'.$albumid.'/';
            $archive_file_name = $albuminfo->album_name;
            $file_names = $songs;
            $this->_zipFilesAndDownload($file_names,$archive_file_name,$file_path);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:28:57.077

CodeIgniter为此提供了一个[zip 库。](http://codeigniter.com/user_guide/libraries/zip.html)它更容易处理，您可以将代码减少到最低限度。这也可能解决您的问题。祝你好运！

# iphone - FMDB 错误 1：没有这样的表

> ID：10972143
> 
> 赞同：2
> 
> 时间：2012-06-10T20:30:53.050
> 
> 标签：iphone, fmdb

我遇到了一个奇怪的问题。我刚刚在我的 iPhone 项目中添加了一个测试数据库，名为“pharmacies.sqlite3”。我已将该文件复制到我的 iPhone 项目的 SUPPORTING FILES 文件夹中。

但即使我将自定义 db 文件复制到 iPhone 上的文档文件夹中，我还是收到一条消息，指出我要查找的表不存在。即使它可用。我稍微重构了我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

// FMDB

self.databaseName = [[NSString alloc] initWithString:@"pharmacies.sqlite3"];
NSString *documentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
self.databasePath = [documentsDir stringByAppendingPathComponent:self.databaseName];

[self createAndCheckDatabase];
[self getPharmacies];

} 
```

这是我的辅助方法：

```
- (void)createAndCheckDatabase
{
BOOL success;
NSFileManager *fileManager = [NSFileManager defaultManager];
success = [fileManager fileExistsAtPath:self.databasePath];

if (success) {
    return;
}

NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath]    stringByAppendingPathComponent:self.databaseName]; 
[fileManager copyItemAtPath:databasePathFromApp toPath:self.databasePath error:nil];
}

- (void)getPharmacies
{
FMDatabase *db = [FMDatabase databaseWithPath:self.databasePath];

[db setLogsErrors:YES];
[db setTraceExecution:YES];

[db open];

FMResultSet *results = [db executeQuery:@"SELECT * FROM pharmacies"];

while ([results next]) {
    NSString *name = [results stringForColumn:@"name"];
    NSLog(@"Apotheke: %@", name);
}
[db close];
} 
```

但是仍然没有找到任何桌子..我错过了什么吗？没有错误消息表明复制不起作用....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-12T03:06:30.490

我遇到了同样的问题，结果问题是 sqlite 数据库没有出现在 Copy Bundle Resources 列表中（在选择项目下然后单击 Build Phases），因此它没有与其余资源打包在一起。我正在使用 XCode 6。

我认为会发生什么是 fmdb open 函数创建了一个空数据库。当您查询时，它会抱怨您的表丢失了，因为您自己的数据库一开始就没有被复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:50:12.760

尝试在文件名前添加正斜杠，如下所示：

```
NSString *finalDatabasePath = [NSString stringWithFormat:@"%@/%@",documentsDirectory,@"/pharmacies.sqlite3"]; 
```

这解决了我遇到的类似问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:09:51.253

我只是通过将代码更改为：

```
NSString *finalDatabasePath = [NSString stringWithFormat:@"%@/%@",documentsDirectory,@"pharmacies.sqlite3"];

FMDatabase *database = [FMDatabase databaseWithPath:finalDatabasePath];
[database open]; 
```

现在错误消息消失了，但出现了一个新消息：“DB ERROR 1: no such table: pharmacies”

有趣的问题：表肯定存在......但根据其他消息来源，这意味着 FMDB 已经创建了一个名为 pharmacies 的新数据库，但没有任何表。当没有具有该名称的此类表时，根据手册会发生这种情况。所以...如您在上面看到的那样，我制作了那个数据库副本...但是doc文件夹中似乎根本没有数据库...？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T03:51:27.607

我在这个问题上苦苦挣扎了好几个小时..部分原因是..我不明白路径在 mac 环境中是如何工作的（来自 MS/Visual Studio 背景）..

搜索结果中的许多示例代码也不起作用..至少在我的情况下..所以我解决它的方法是仔细查看顶部 SQLiteManager 标头路径上的数据库文件路径..

原来是.. /Users/myname/Desktop/delete_later/Xcode Projects/CustomerDB/CustomerDBTests/supplier.sqlite

我在我的代码中硬编码如下：

```
NSString *writableDBPath = @"/Users/myname/Desktop/delete_later/Xcode Projects/CustomerDB/CustomerDBTests/supplier.sqlite";

db = [FMDatabase databaseWithPath:writableDBPath];
 [db open]; 
```

这立即为我解决了问题....

# xml - 使用 XmlSlurper/GPath 查找不区分大小写的 xml 元素值？

> ID：10972146
> 
> 赞同：1
> 
> 时间：2012-06-10T20:31:05.367
> 
> 标签：xml, grails, groovy, xmlslurper, gpath

我正在使用 XmlSlurper 解析一段 XML，需要找到一个 xml 元素值。这方面的挑战是我并不总是确定 xml 文档中的大小写是否正确，所以我需要以任何可能的方式找到元素。

例子：

```
<start>
   <Header>
      <Elem>1234</Elem>
   </Header>
</start> 
```

获得**Elem**的价值将是：

```
def parsedXml = new XmlSlurper().parseText(xml)
parsedXml.Header.Elem 
```

但是当外壳不同时我也需要找到它.. 那么有没有一种方法可以在外壳不同时找到 Elem 的值？

```
<start>
   <header>
      <elem>1234</elem>
   </header>
</start>

def parsedXml = new XmlSlurper().parseText(xml)
parsedXml.header.elem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:34:44.870

可能有一个更好的解决方案（例如，似乎使用 XPath 应该可以[不区分大小写地比较节点名称](http://forums.codeguru.com/archive/index.php/t-460915.html)），但是将文档转换为小写将起作用。如果您关心文档内文本节点的大小写，则只能将标记元素转换为小写：

```
def toLowerCaseXmlTags(xmlText) {
    xmlText.replaceAll(/<[^<>]+>/) { it.toLowerCase() }
}

text = """
<start>
   <Header>
      <Elem>1234</Elem>
      <SomeText>This should PRESERVE casing</SomeText>
   </Header>
</start>
"""

def xml = new XmlSlurper().parseText(toLowerCaseXmlTags(text))
assert xml.header.elem.text() == '1234'
assert xml.header.sometext.text() == 'This should PRESERVE casing' 
```

又快又脏，但它有效：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T21:51:34.243

XML 区分大小写，XmlSlurper 结果的属性查找也是如此。您将需要使用以下[`GPathResult.find()`](http://groovy.codehaus.org/api/groovy/util/slurpersupport/GPathResult.html#find%28groovy.lang.Closure%29)方法：

```
def header = parsedXml.find { it.name().toLowerCase() == 'header' }
def elem = header.find { it.name().toLowerCase() == 'elem' } 
```

查看[groovy 文档](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)，了解更多使用 XmlSlurped 文档的方法。

# javascript - 使用 JS 和 Jquery 将“月和年”字符串转换为日期对象

> ID：10972151
> 
> 赞同：1
> 
> 时间：2012-06-10T20:31:56.017
> 
> 标签：javascript, jquery, date, elapsed

我有两个数组（我从一个表中用 jQuery 制作它们），第一个是结束日期，第二个是开始日期。元素是字符串：

`["June, 2012", "June, 2012", "August, 2011", "April, 2013", "August, 2010", "August, 2010", "April, 2013", "April, 2012", "April, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012", "June, 2012"]`

`["November, 2011", "April, 2012", "May, 2008", "May, 2007", "November, 2007", "May, 2007", "June, 2006", "June, 2007", "April, 2006", "January, 2008", "April, 2001", "April, 2001", "April, 2006", "April, 1998", "April, 1998", "September, 2008", "August, 2010", "August, 2009", "August, 2010", "August, 2009", "August, 2010", "August, 2010", "August, 2010", "January, 1997", "January, 1997", "January, 2010", "January, 2007", "April, 2010"]`

我正在尝试获取每组索引之间的经过时间。我假设我必须将这些字符串转换为 Date 对象`date()`，然后进行计算以获取经过的时间，然后使用以下方法将其截断为月份和年份：

```
function convertDate(passedDate) {
    var m = new Array(7);
    var y = passedDate.getFullYear();
    m[0] = "January";
    m[1] = "February";
    m[2] = "March";
    m[3] = "April";
    m[4] = "May";
    m[5] = "June";
    m[6] = "July";
    m[7] = "August";
    m[8] = "September";
    m[9] = "October";
    m[10] = "November";
    m[11] = "December";
    return m[passedDate.getMonth()] + "months and " + y + " years;  
}; 
```

这是[小提琴](http://jsfiddle.net/chrisfrisina/t2SEF/)，这是我的问题：

1.  因为我对日期或时间不感兴趣，所以无论如何都可以在不将其更改为日期对象的情况下执行此操作？

2.  除了尝试将经过日期数学公式转换为日期，然后再转换回字符串之外，您是否会建议另一种方法？

3.  如何识别当前元素的姐妹元素，以便避免使用双嵌套循环？（也会在不同的问题中提出这个问题，因为它涉及不同的主题）

感谢您帮助我，因为我正在尝试制作具有可选属性的交互式简历，并且我包含了一些数据，因此我不必向冷电话的招聘人员回答所有基本信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T21:00:17.797

真的，您所需要的只是一张从月份名称到数字的地图。您可以像这样构建一个：

```
var monthNames = [ "January",   "February", "March",    "April",
                   "May",       "June",     "July",     "August",
                   "September", "October",  "November", "December" ]
var monthNumber = {}
for (var i=0; i<monthNames.length; ++i) {
    monthNumber[monthNames[i]] = i;
} 
```

现在您有了，例如`monthNumber['October']`== 9。然后您可以将其中一个字符串转换为月份和年份。如果然后将其转换为绝对月份数（年 * 12 + 月），则只需减去即可获得经过的月份。

```
function stringToMonthNumber(monthYear) {
    var parts = monthYear.split(/\s*,\s*/)
    var month = monthNumber[parts[0]]
    var year = parts[1] - 1
    return year * 12 + month
}

function elapsedMonths(startString, endString) {
    return stringToMonthNumber(endString) - stringToMonthNumber(startString)
} 
```

然后这个：

```
elapsedMonths("November, 2011", "June, 2012") 
```

返回 7。

# css - CSS悬停在链接列表项上

> ID：10972156
> 
> 赞同：-1
> 
> 时间：2012-06-10T20:32:59.283
> 
> 标签：css, list, hover

我有这样的无序列表......

```
<div class="social">
<ul>
<li><a href="#">Find Me <img src="images/facebookGrey.png" width="50" border="0" style="vertical-align:middle;" class="facebook" /></a></li>
</ul>
</div> 
```

我想要做的是设置一个悬停，所以当用户悬停在该列表项上时，图像会发生变化。

这是我尝试过的css..

```
.social ul img.facebook a:hover{
    background-image:url(images/facebook.png);
    width:50px;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:36:18.963

它应该是：

```
.social ul a:hover img.facebook 
```

因为图像在锚点内。

但是，最好将`img`标签全部删除，然后使用锚点并设置它的`background-image`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:36:55.047

您将背景图像与实际图像混淆。

将背景图像设置`<a>`为`images/facebookGrey.png`，然后在悬停时更改背景图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T20:39:48.447

图像在链接内，而不是相反。此外，您不能通过 CSS 更改图像的来源。设置背景*将*起作用，但源将在它之上。从图像名称的外观来看，您不会看到任何效果。

尝试这样的事情：

```
<div class="social">
<ul>
<li><a href="#">Find Me</a></li>
</ul>
</div> 
```

```
.social ul a {
    background-image: url(images/facebookGrey.png);
    background-position: center right;
    background-repeat: no-repeat;
    padding-right: 60px;
}
.social ul a:hover {
    background-image: url(images/facebook.png);
} 
```

# java - 门廊：Java.lang.OutofMemoryError java 堆空间

> ID：10972159
> 
> 赞同：2
> 
> 时间：2012-06-10T20:33:24.383
> 
> 标签：java, jvm, java-7

我正在尝试在我的一个项目中使用 Portico，以便在多台机器上运行的同一应用程序的多个实例之间通过网络共享对象。

我正在使用 Windows 7 64 位。

所以假设有3种对象。甲、乙、丙。

Obj A 的大小约为：300 字节 Obj B 的大小约为：700 字节 Obj C 的大小约为：1200 字节

我能够在应用程序之间共享 objA 和 objB。但是，一旦我共享 objC，它就会在日志中引发错误：发送长度为 1213 字节的消息时出错。**java.lang.OutOfMemoryError java 堆空间。**

我还在 VirtualVM 中跟踪我的应用程序的堆大小。以下是我检索到的信息。

**发送 objA 时：** 最大堆大小：64 MB 堆大小：2.5 MB 已用堆：1.8 MB

**发送 objB 时：** 最大堆大小：64 MB 堆大小：2.5 MB 已用堆：2.0 MB

注意这里：堆大小达到 64 KB，但使用的堆大小几乎保持不变。

**发送 objC 时：** 最大堆大小：64 MB 堆大小：64 MB 已用堆：2.0 KB

因此，我尝试使用以下命令增加堆大小：

**java -Xms1024m -Xmx1024m -jar portico.jar**

但随后它抛出错误：**错误：无法找到或加载主类 org.portico.rti.Main**

然后我尝试在 Windows 7 64 位上编译 portico，它给了我一些与 JVM 相关的链接错误。我正在使用最新的 JDK 1.7。我使用的是服务器虚拟机，因为客户端虚拟机在 64 位中不可用。

所以我尝试使用客户端 VM 在 32 位 Windows 7 上构建门廊。它构建成功，但我再次无法在**codebase\build\java\classes\org\portico\rti\Main.class**中找到 Main 类文件。因此，当我尝试使用与上面相同的命令以及 classpath 时：

**java -cp ......\build\java\classes -Xms1024m -Xmx1024m -jar portico.jar**

它再次抛出相同的错误：**错误：无法找到或加载主类 org.portico.rti.Main**

我该如何解决这个问题。这让我快疯了。请帮帮我。

# java - 井字游戏的 Minimax 算法中的错误

> ID：10972166
> 
> 赞同：6
> 
> 时间：2012-06-10T20:34:33.923
> 
> 标签：java, artificial-intelligence, tic-tac-toe, minimax

我目前正在尝试自学 Minimax 算法，并尝试在 java 中的井字游戏中实现它。但是，我的算法中有一个错误，我无法弄清楚是什么原因造成的。

以下是完整的源代码（对不起，文字墙！）：

```
public class TicTacToe {
    private static boolean gameEnded = false;
    private static boolean player = true;
    private static Scanner in = new Scanner(System.in);
    private static Board board = new Board();

    public static void main(String[] args){
        System.out.println(board);
        while(!gameEnded){
            Position position = null;
            if(player){
                position = makeMove();
                board = new Board(board, position, PlayerSign.Cross);
            }else{
                board = findBestMove(board);
            }               
            player = !player;
                System.out.println(board);
                evaluateGame();
        }
    }

    private static Board findBestMove(Board board) {
        ArrayList<Position> positions = board.getFreePositions();
        Board bestChild = null;
        int previous = Integer.MIN_VALUE;
        for(Position p : positions){
            Board child = new Board(board, p, PlayerSign.Circle);
            int current = max(child);
            System.out.println("Child Score: " + current);
            if(current > previous){
                bestChild = child;
                previous = current;
            }
        }
        return bestChild;
    }

    public static int max(Board board){
        GameState gameState = board.getGameState();
        if(gameState == GameState.CircleWin)
            return 1;
        else if(gameState == GameState.CrossWin)
            return -1;
        else if(gameState == GameState.Draw)
            return 0;
        ArrayList<Position> positions = board.getFreePositions();
        int best = Integer.MIN_VALUE;
        for(Position p : positions){
            Board b = new Board(board, p, PlayerSign.Cross);
            int move = min(b);
            if(move > best)
                best = move;
        }       
        return best;
    }

    public static int min(Board board){
        GameState gameState = board.getGameState();
        if(gameState == GameState.CircleWin)
            return 1;
        else if(gameState == GameState.CrossWin)
            return -1;
        else if(gameState == GameState.Draw)
            return 0;
        ArrayList<Position> positions = board.getFreePositions();
        int best = Integer.MAX_VALUE;
        for(Position p : positions){
            Board b = new Board(board, p, PlayerSign.Circle);
            int move = max(b);
            if(move < best)
                best = move;
        }
        return best;
    }

    public static void evaluateGame(){
        GameState gameState = board.getGameState();
        gameEnded = true;
        switch(gameState){
            case CrossWin : 
                System.out.println("Game Over! Cross Won!");
                break;
            case CircleWin : 
                System.out.println("Game Over! Circle Won!");
                break;
            case Draw : 
                System.out.println("Game Over! Game Drawn!");
                break;
            default : gameEnded = false;
                break;
        }
    }

    public static Position makeMove(){
        Position position = null;
        while(true){
            System.out.print("Select column(x-axis). 0, 1 or 2: ");
            int column = getColOrRow();
            System.out.print("Select row(y-axis). 0, 1 or 2: ");
            int row = getColOrRow();
            position = new Position(column, row);
            if(board.isMarked(position))
                System.out.println("Position already marked!");
            else break;
        }
        return position;
    }

    private static int getColOrRow(){
        int ret = -1;
        while(true){
            try{
                ret = Integer.parseInt(in.nextLine());
            } catch (NumberFormatException e){}
            if(ret < 0 | ret > 2)
                System.out.print("\nIllegal input... please re-enter: ");
            else break;
        }
        return ret;
    }
}

public enum PlayerSign{
    Cross, Circle
}

public enum GameState {
    Incomplete, CrossWin, CircleWin, Draw
}

public final class Position {
    public final int column;
    public final int row;

    public Position(int column, int row){
        this.column = column;
        this.row = row;
    }
}

public class Board {
    private char[][] board; //e = empty, x = cross, o = circle.

    public Board(){
        board = new char[3][3];
        for(int y = 0; y < 3; y++)
            for(int x = 0; x < 3; x++)
                board[x][y] = 'e'; //Board initially empty
    }

    public Board(Board from, Position position, PlayerSign sign){
        board = new char[3][3];
        for(int y = 0; y < 3; y++)
            for(int x = 0; x < 3; x++)
                board[x][y] = from.board[x][y];
        board[position.column][position.row] = sign==PlayerSign.Cross ? 'x':'o';
    }

    public ArrayList<Position> getFreePositions(){
        ArrayList<Position> retArr = new ArrayList<Position>();     
        for(int y = 0; y < 3; y++)
            for(int x = 0; x < 3; x++)
                if(board[x][y] == 'e')
                    retArr.add(new Position(x, y));
        return retArr;
    }

    public GameState getGameState(){    
        if(hasWon('x'))
            return GameState.CrossWin;
        else if(hasWon('o'))
            return GameState.CircleWin;
        else if(getFreePositions().size() == 0)
            return GameState.Draw;
        else return GameState.Incomplete;
    }

    private boolean hasWon(char sign){ //8 ways to win.
        if(board[1][1] == sign){ 
            if(board[0][0] == sign && board[2][2] == sign)
                return true;
            if(board[0][2] == sign && board[2][0] == sign)
                return true;
            if(board[1][0] == sign && board[1][2] == sign)
                return true;
            if(board[0][1] == sign && board[2][1] == sign)
                return true;
            }
            if(board[0][0] == sign){
                if(board[0][1] == sign && board[0][2] == sign)
                    return true;
                if(board[1][0] == sign && board[2][0] == sign)
                    return true;
            }
            if(board[2][2] == sign){
                if(board[1][2] == sign && board[0][2] == sign)
                    return true;
                if( board[2][1] == sign && board[2][0] == sign)
                    return true;
            }   
            return false;
    }

    public boolean isMarked(Position position){
        if(board[position.column][position.row] != 'e')
            return true;
        return false;
    }

    public String toString(){
        String retString = "\n";
        for(int y = 0; y < 3; y++){
            for(int x = 0; x < 3; x++){
                if(board[x][y] ==  'x' || board[x][y] == 'o')
                    retString += "["+board[x][y]+"]";
                else
                    retString += "[ ]";
            }
            retString += "\n";
        }       
        return retString;
    }   
} 
```

这是我运行程序时的输出（计算机是圆圈）：

```
[ ][ ][ ]  
[ ][ ][ ]  
[ ][ ][ ]  
Select column(x-axis). 0, 1 or 2: 1  
Select row(y-axis). 0, 1 or 2: 1  
[ ][ ][ ]  
[ ][x][ ]  
[ ][ ][ ]  
Child Score: 0  
Child Score: 0  
Child Score: 0  
Child Score: 0  
Child Score: 0  
Child Score: 0  
Child Score: 0  
Child Score: 0  
[o][ ][ ]  
[ ][x][ ]  
[ ][ ][ ]  
Select column(x-axis). 0, 1 or 2: 0  
Select row(y-axis). 0, 1 or 2: 1  
[o][ ][ ]  
[x][x][ ]  
[ ][ ][ ]  
Child Score: -1  
Child Score: 0  
Child Score: 0  
Child Score: -1  
Child Score: -1  
Child Score: -1  
[o][ ][o]  
[x][x][ ]  
[ ][ ][ ]  
Select column(x-axis). 0, 1 or 2: 
```

正如您在第一步之后看到的那样，计算机认为无论它做出什么举动都可以平局（Score = 0）。

在第二步中，我在第 0 列第 1 行打了一个叉。由于某种原因，计算机认为有两个可能的棋步可以达到平局（得分 = 0），只有四个棋步会输（得分 = -1） . 然后它做出了错误的举动，认为它会平局。

我首先认为 hasWon 方法有问题，但是我测试了所有 8 种连续获得三个的方法，它们都返回 true。

我怀疑问题存在于 findBestMove、max 或 min 方法中的某个地方，但我无法准确找出导致它的原因。

如果有人能说出导致错误的原因或就如何更好地调试我的递归算法提供任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T21:09:39.097

在我看来，您混淆了`min`和的部分内容`max`。目前，您返回*人类*`max`可能采取的最坏可能移动（对他而言）的值，而不是计算机可能采取的最佳移动。*同样， min 返回计算机*可能采取的最差移动的值，而不是对手的最佳移动。

 **通过将 PlayerSigns 切换为`min`和来解决此问题`max`，并且`findBestMove`应该调用`min`，而不是`max`。**

# java - Java：用JSoup提取所有带有某个单词的链接？

> ID：10972167
> 
> 赞同：5
> 
> 时间：2012-06-10T20:34:36.373
> 
> 标签：java, html, parsing, jsoup

可能是一个不清楚的问题，所以这里是代码和解释：

```
 Document doc = Jsoup.parse(exampleHtmlData);

    Elements certainLinks = doc.select("a[href=google.com/example/]"); 
```

String exampleHtmlData 包含来自某个站点的已解析 HTML 源。这个网站有很多链接可以引导用户到谷歌。几个例子是：

```
http://google.com/example/hello 
http://google.com/example/certaindir/anotherdir/something
http://google.com/anotherexample 
```

我想使用 doc.select 函数提取链接中包含 google.com/example/ 的所有链接。我如何用 JSoup 做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T20:57:12.667

您可以参考[SelectorSyntax](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。

```
Document doc = Jsoup.parse(exampleHtmlData);
Elements certainLinks = doc.select("a[href*=google.com/example/]"); 
```

# java - 使用 XJC 到 Java 类的 XML 模式

> ID：10972168
> 
> 赞同：1
> 
> 时间：2012-06-10T20:34:39.370
> 
> 标签：java, xml, xsd, jaxb, xjc

我正在使用从这里下载的官方 XSD 架构：

[http://docs.oasis-open.org/ubl/os-UBL-2.0.zip](http://docs.oasis-open.org/ubl/os-UBL-2.0.zip)

*（路径：xsd/maindoc/UBL-Order-2.0.xsd）*

当我使用以下命令使用 XJC 生成 java 类时，我总是在控制台中收到一个错误，我不知道如何处理。

**命令：**

```
xjc -d C:\Users\Oscar\Desktop\results -p com.ubl.order C:\Users\Oscar\Desktop\os-UBL-2.0\xsd\maindoc\UBL-Order-2.0.xsd 
```

**错误：**

```
parsing a schema...
[WARNING] Simple type "UnitCodeContentType" was not mapped to Enum due to EnumMemberSizeCap limit. Facets count: 1.093, current limit: 256\. You can use customization attribute "typesafeEnumMaxMembers" to extend the limit.
  line 38 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/CodeList_UnitCode_UNECE_7_04.xsd

[WARNING] Simple type "BinaryObjectMimeCodeContentType" was not mapped to Enum due to EnumMemberSizeCap limit. Facets count: 616, current limit: 256\. You can use customization attribute "typesafeEnumMaxMembers" to extend the limit.
  line 38 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/CodeList_MIMEMediaTypeCode_IANA_7_04.xsd

[WARNING] Simple type "LanguageCodeContentType" was not mapped to Enum due to EnumMemberSizeCap limit. Facets count: 276, current limit: 256\. You can use customization attribute "typesafeEnumMaxMembers" to extend the limit.
  line 38 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/CodeList_LanguageCode_ISO_7_04.xsd

compiling a schema...
[ERROR] A class/interface with the same name "com.ubl.order.LocationType" is already in use. Use a class customization to resolve this conflict.
  line 9890 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonAggregateComponents-2.0.xsd

[ERROR] (Relevant to above error) another "LocationType" is generated from here.
  line 1543 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.TextType" is already in use. Use a class customization to resolve this conflict.
  line 2598 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "TextType" is generated from here.
  line 1070 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.NameType" is already in use. Use a class customization to resolve this conflict.
  line 1718 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "NameType" is generated from here.
  line 1105 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.AmountType" is already in use. Use a class customization to resolve this conflict.
  line 613 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "AmountType" is generated from here.
  line 57 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.MeasureType" is already in use. Use a class customization to resolve this conflict.
  line 1668 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "MeasureType" is generated from here.
  line 930 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.QuantityType" is already in use. Use a class customization to resolve this conflict.
  line 2143 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "QuantityType" is generated from here.
  line 1035 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.ChannelCodeType" is already in use. Use a class customization to resolve this conflict.
  line 763 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "ChannelCodeType" is generated from here.
  line 119 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.DocumentStatusCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1103 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "DocumentStatusCodeType" is generated from here.
  line 618 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.PackagingTypeCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1873 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "PackagingTypeCodeType" is generated from here.
  line 1113 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.TransportModeCodeType" is already in use. Use a class customization to resolve this conflict.
  line 2753 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "TransportModeCodeType" is generated from here.
  line 1708 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.AllowanceChargeReasonCodeType" is already in use. Use a class customization to resolve this conflict.
  line 603 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "AllowanceChargeReasonCodeType" is generated from here.
  line 19 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.TransportEquipmentTypeCodeType" is already in use. Use a class customization to resolve this conflict.
  line 2728 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "TransportEquipmentTypeCodeType" is generated from here.
  line 1609 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.PaymentMeansCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1978 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "PaymentMeansCodeType" is generated from here.
  line 1212 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.CurrencyCodeType" is already in use. Use a class customization to resolve this conflict.
  line 913 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "CurrencyCodeType" is generated from here.
  line 517 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.LongitudeDirectionCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1563 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "LongitudeDirectionCodeType" is generated from here.
  line 915 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.SubstitutionStatusCodeType" is already in use. Use a class customization to resolve this conflict.
  line 2478 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "SubstitutionStatusCodeType" is generated from here.
  line 1411 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.LineStatusCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1528 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "LineStatusCodeType" is generated from here.
  line 816 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] A class/interface with the same name "com.ubl.order.LatitudeDirectionCodeType" is already in use. Use a class customization to resolve this conflict.
  line 1468 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Relevant to above error) another "LatitudeDirectionCodeType" is generated from here.
  line 717 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 9890 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonAggregateComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1543 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 2598 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1070 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1718 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1105 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 613 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 57 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1668 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 930 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 2143 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1035 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UnqualifiedDataTypeSchemaModule-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 763 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 119 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1103 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 618 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1873 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1113 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 2753 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1708 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 603 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 19 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 2728 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1609 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1978 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1212 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 913 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 517 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1563 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 915 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 2478 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 1411 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1528 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 816 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1468 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 717 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-QualifiedDatatypes-2.0.xsd

[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 166 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonAggregateComponents-2.0.xsd

[ERROR] (Related to above error) This is the other declaration.
  line 230 of file:/C:/Users/Oscar/Desktop/os-UBL-2.0/xsd/common/UBL-CommonBasicComponents-2.0.xsd

Failed to produce code. 
```

我尝试的是不使用官方 XSD 并使用 trang.jar 生成我自己的。结果很好，我得到了生成的 java 类，但是当我使用 JAXB（使用这些类）创建 XML 文档时，命名空间不正常。

所以，我想要的是使用官方的 XSD，但经过修改（也许）使其工作。

**我该如何解决这个问题以获取我生成的类？**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:16:42.600

尝试这个。

1.  确保您的 JDK 版本是 1.6 或更高版本
2.  PATH 环境变量中的 $JAVA_HOME/bin
3.  打开一个 cmd 并定位到 /UBL-2.0/xsd/maindoc
4.  跑：`xjc UBL-Order-2.0.xsd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T06:57:13.357

I created a library that encapsulates all the UBL 2.0 and 2.1 enerated files plus some sanity methods for the usage with Java 1.6 and Maven. Look at [https://github.com/phax/ph-ubl](https://github.com/phax/ph-ubl) for details.

# c# - 如何在 C# 中读取 txt 文件

> ID：10972171
> 
> 赞同：-4
> 
> 时间：2012-06-10T20:35:47.253
> 
> 标签：c#, visual-studio, text

编辑：

由于仍然存在随机投票，我想我可以进一步澄清这一点。

本质上，问题是询问**您如何从 C# 中的文本文件中读取**。我认为可行的代码如下。答案提供了实际有效的方法。请在您投反对票时发表评论。

老的：

我正在使用 Microsoft 视觉工作室编写视频游戏，但似乎无法让它从文本文件中获取输入。如果我注释掉以下行和基于它的东西，它工作正常。如果我只添加这一行，那么它会运行但窗口永远不会弹出。

```
string[] allLines = File.ReadAllLines("map1.txt"); 
```

我也有声明以确保它被包括在内。

```
using System;
using System.IO; 
```

如果您想要更多代码，我可以发布它，但数量很大。

旧编辑：澄清一下，当我运行我的游戏时，不会像往常一样弹出任何窗口，但也不会弹出错误消息。我的 txt 文件包含在内容中，但由于某种原因无法正常工作。我使用了完整路径，现在它可以工作了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:44:34.940

我建议在这里使用完整路径，因为该文件可能不在您的程序试图读取的位置（因此您在读取它时会遇到问题）。

```
string fullPath = @"C:\MyFantasticVideoGame\map.txt";
string text = System.IO.File.ReadAllText(fullPath); 
```

# networking - 链接 TCP 应用程序和 UDP 应用程序

> ID：10972174
> 
> 赞同：1
> 
> 时间：2012-06-10T20:36:15.430
> 
> 标签：networking, tcp, udp

> 您有两个应用程序需要在局域网中在它们之间交换信息。第一个应用程序使用 TCP 进行通信，而第二个应用程序使用 UDP。我们可以直接链接两个应用程序吗？如果您的回答是否定的，请解释我们如何将它们联系起来？

（来自家庭作业）

我认为答案是否定的，我们需要在它们之间使用一些翻译器或中间件。但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:13:21.040

如您所见，您不能简单地将两种类型的连接合二为一。TCP 是一种状态全连接，需要两台计算机建立连接，而 UDP 是无状态/无连接连接，只需要一台计算机，发送和忘记的风格。

如果你想让它们相互通信，你必须有一个中间件。

TCP 应用程序应该有一个**TCP 客户端**和**TCP 服务器** 中间件应该有一个**TCP 服务器**，它将监听 TCP 应用程序的客户端并建立连接，以及一个**TCP 客户端**，它将与 TCP 应用程序的服务器建立连接。

现在中间件可以与 TCP 应用程序完全通信。

为了对 UDP 应用程序执行此操作，**您应该**在某个端口监听 UDP，以便监听来自 UDP 应用程序的传入数据，**并通过 UDP 将其发送到**UDP 应用程序（UDP 应用程序需要监听该端口）港口）

# node.js - 查找已安装 npm 包的版本

> ID：10972176
> 
> 赞同：2667
> 
> 时间：2012-06-10T20:36:27.693
> 
> 标签：node.js, package, npm

如何找到已安装的 node.js/npm**包**的版本？

这将打印 npm 本身的版本：

```
npm -v <package-name> 
```

这会打印一个神秘的错误：

```
npm version <package-name> 
```

*这会在注册表上*打印软件包版本（即可用的最新版本）：

```
npm view <package-name> version 
```

如何获取已**安装的版本**？

* * *

## 回答 #1

> 赞同：3078
> 
> 时间：2012-06-11T19:13:26.997

`npm list`对于本地软件包或`npm list -g`全局安装的软件包。

您可以通过将其名称作为参数传递来查找特定包的版本。例如，`npm list grunt`将导致：

```
projectName@projectVersion /path/to/project/folder
└── grunt@0.4.1 
```

或者，您可以直接运行`npm list`而不传递包名称作为参数来查看所有包的版本：

```
├─┬ cli-color@0.1.6 
│ └── es5-ext@0.7.1 
├── coffee-script@1.3.3 
├── less@1.3.0 
├─┬ sentry@0.1.2 
│ ├── file@0.2.1 
│ └── underscore@1.3.3 
└── uglify-js@1.2.6 
```

您还可以添加`--depth=0`参数以列出已安装的软件包，而无需依赖它们。

* * *

## 回答 #2

> 赞同：982
> 
> 时间：2013-05-23T01:50:16.977

另一种快速找出哪些软件包安装**在本地**并且**没有依赖**项的方法是使用：

```
npm list --depth=0 
```

这给了你类似的东西

```
├── bower@0.8.6
├── grunt@0.4.1
├── grunt-bower-requirejs@0.4.3
├── grunt-contrib-clean@0.4.1
├── grunt-contrib-coffee@0.7.0
├── grunt-contrib-copy@0.4.1
├── grunt-contrib-imagemin@0.1.4
├── grunt-contrib-jshint@0.1.1
├── grunt-contrib-livereload@0.1.2
├── grunt-contrib-requirejs@0.4.1
├── grunt-regarde@0.1.1
└── grunt-svgmin@0.1.0 
```

显然，同样可以在全球范围内使用`npm list -g --depth=0`.

如果你安装了很多包，这种方法会更清楚。

要找出需要更新的软件包，您可以使用`npm outdated -g --depth=0`.

* * *

## 回答 #3

> 赞同：265
> 
> 时间：2014-07-01T03:03:41.820

`npm view <package> version`- 返回软件包的最新可用版本。

`npm list --depth=0`- 返回所有已安装模块的版本，没有依赖关系。

`npm list`- 返回所有模块和依赖项的版本。

最后获取节点版本：`node -v`

* * *

## 回答 #4

> 赞同：107
> 
> 时间：2015-06-24T03:21:41.003

```
npm info YOUR_PACKAGE version 
```

例如

```
npm info grunt version
0.4.5 
```

* * *

## 回答 #5

> 赞同：75
> 
> 时间：2016-09-30T11:57:20.887

从包的根目录执行：

```
node -p "require('./package.json').version" 
```

**编辑**：（所以如果你还没有进入模块的主目录，那么你需要`cd`进入模块的主目录。如果你已经安装了模块`npm install`，那么它将在下面`node_modules/<module_name>`）

**编辑 2**：根据@jeff-dickey 的回答更新

* * *

## 回答 #6

> 赞同：71
> 
> 时间：2016-01-27T12:39:55.573

我刚用

```
npm list | grep <package name> 
```

效果很好

在 Windows 上运行：

```
npm list | find <package name> 
```

在 PowerShell 中运行：

```
npm list | sls <package name> 
```

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2020-05-14T07:43:04.983

#### 这很简单..只需在下面输入

```
npm view <package-name> version 
```

#### 例子

```
npm view redux version 
```

我有版本 7.2.0 的 redux

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2018-03-09T12:26:08.717

对于本地包

```
npm list --depth=0 
```

对于全球包裹

```
npm list  -g --depth=0 
```

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2017-12-13T07:08:54.510

结合上面的一些答案并产生一个超级简单和超级快速的查找。
从项目根目录运行。无需`cd`进入任何文件夹，只需 1 行：

`node -p "require('SOMEPACKAGE/package.json').version"`

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2014-08-13T11:56:21.817

如果您同意安装[jq](http://stedolan.github.io/jq/)，则可以使用`npm list`.

```
npm -j ls <package-name> | jq -r .version 
```

或者，如果你想详细一点

```
npm --json list <package-name> | jq --raw-output '.version' 
```

例如：

```
$ npm -j ls ghost | jq -r .version
0.4.2 
```

此外，全局包的 JSON 格式略有不同，因此您需要更改查询。

例如：

```
$ npm -j -g ls | jq -r .dependencies.ghost.version
0.4.2 
```

* * *

## 回答 #11

> 赞同：20
> 
> 时间：2017-12-16T04:28:22.177

您还可以使用以下命令检查版本：

`npm info <package name> version`

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2016-08-05T14:41:02.357

如果您足够勇敢（并且已经`node`安装），您可以随时执行以下操作：

```
echo "console.log(require('./package.json').version);" | node 
```

这将打印当前包的版本。您还可以将其修改为疯狂，如下所示：

```
echo "eval('var result='+require('child_process').execSync('npm version',{encoding:'utf8'})); console.log(result.WHATEVER_PACKAGE_NAME);" | node 
```

这将打印`WHATEVER_PACKAGE_NAME`包的版本，由`npm version`.

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2016-12-20T15:04:18.770

要在本地或全局查看所有已安装的包，请使用以下命令：

1.  `npm list`对于本地软件包或`npm list -g`全局安装的软件包。
2.  `npm list --depth=0`
3.  `npm list | sls <package name>`
4.  `node -v`

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2018-03-10T17:42:10.050

我已经构建了一个完全可以做到这一点的工具 - [qnm](https://github.com/ranyitz/qnm)

## qnm - 一个用于查询`node_modules`目录的简单 CLI 实用程序。

安装它使用：

```
npm i --global qnm 
```

并运行：

```
qnm [module] 
```

例如：

```
> qnm lodash

lodash
├── 4.17.5
├─┬ cli-table2
│ └── 3.10.1
└─┬ karma
  └── 3.10.1 
```

这意味着我们已经在和`lodash`的根目录中安装了`node_modules`另外两个`node_modules`副本。`cli-table2``karma`

它非常快，并且具有一些不错的功能，例如制表符补全和匹配搜索。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2019-07-09T19:35:12.223

要列出具有版本号的本地包，请使用：

`npm ls --depth=0`

要列出具有版本号的全局包，请使用：

`npm ls -g --depth=0`

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2016-05-13T13:16:19.313

尝试：

```
npm list --depth 1 --global packagename 
```

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2019-06-11T06:22:15.520

`npm list --depth 0`是显示所有带有版本的库的命令，但您可以使用`npm-check`

npm-check 是一个很好的库来管理与版本系统事件有关的所有事情，它将显示库版本、新版本更新和未使用的版本等等。

安装它只需运行

```
npm install -g npm-check 
```

并简单地运行

```
npm-check 
```

检查显示有关软件包版本、新版本更新和未使用版本的所有内容的屏幕截图。

[![在此处输入图像描述](../Images/5f933608acbe1347fa51820ae6dba573.png)](https://i.stack.imgur.com/2PQZW.png)

它也适用于全球。试试看。希望这对某人有所帮助。

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2020-07-19T23:46:06.837

我已经看到了一些非常有创意的答案，但你可以这样做（对于全局包添加 --global 开关）：

```
npm ls package 
```

例子：

```
npm ls babel-cli
`-- babel-cli@6.26.0 
```

npm 文档说 npm -ls

> 此命令将以树形结构将已安装的所有软件包版本及其依赖项打印到标准输出。

[NPM 文档](https://docs.npmjs.com/cli/ls.html)

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2015-10-29T23:11:11.823

这是一个可移植的 Unix（使用`grep`and `sed`）单行程序，它返回全局安装的 npm 包的版本字符串（删除`g`from`-pg`以改为查询本地包）：

```
$ npm ll -pg --depth=0 grunt | grep -o "@.*:" | sed 's/.$//; s/^.//'
0.4.5 
```

*   输出一个可解析的`npm ll`字符串，格式如下`/usr/lib/node_modules/npm:npm@2.14.8:`：
*   该`grep`命令提取 和 之间的值`@`，`:`包括在内；
*   该`sed`命令删除周围的字符。

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2015-11-12T15:53:03.993

您可以使用*npm view [module] version*、*npm info [module] version*、*npm show [module] version*或*npm v [module] version*来检查已安装 npm 模块的版本。

假设我的 grunt 模块版本是 0.4.5：

```
npm view grunt version => 0.4.5
npm info grunt version => 0.4.5
npm show grunt version => 0.4.5
npm v grunt version    => 0.4.5 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2019-03-23T20:47:41.320

这是一个简单的问题，应该有比我上面看到的更简单的答案。

要查看已安装的 npm 包及其版本，命令是`npm ls --depth=0`，默认情况下，它会显示本地安装的内容。要查看全局安装的软件包，请添加`-global`参数：`npm ls --depth=0 -global`.

`--depth=0`返回一个没有依赖关系的已安装包的列表，这是您大多数时候想要做的。

`ls`是命令的名称，并且是的`list` [别名](https://docs.npmjs.com/cli/ls)。`ls`

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2020-03-04T19:10:57.503

**npm list package-name**给出当前安装的版本

* * *

## 回答 #23

> 赞同：6
> 
> 时间：2017-06-04T02:04:49.173

我将此添加到我的 .bashrc

```
function npmv {
    case $# in # number of arguments passed
    0) v="$(npm -v)" ; #store output from npm -v in variable
        echo "NPM version is: $v"; #can't use single quotes 
                                   #${v} would also work
    ;;   
    1) s="$(npm list --depth=0 $1 | grep $1 | cut -d @ -f 2)";
       echo "$s";
    ;;
    2) case "$2" in # second argument
        g) #global|#Syntax to compare bash string to literal
             s="$(npm list --depth=0 -g $1 | grep $1 | cut -d @ -f 2)";
        echo "$s";
        ;;
        l) #latest
             npm view $1 version; #npm info $1 version does same thing
       ;;
       *) echo 'Invalid arguments';
       ;;
       esac;
    ;;
    *) echo 'Invalid arguments';
    ;;
    esac;
}
export -f npmv 
```

现在我要做的就是输入：

*   **npmv**用于 npm 的版本，例如：`NPM version is: 4.2.0`
*   **npmv <package-name>**用于本地版本，例如：`0.8.08`
*   **npmv <package-name> g**用于全局版本，例如：`0.8.09`
*   **npmv <package-name> l**用于最新版本，例如：`0.8.10`

注意 cut 命令上的 -d 表示分隔符，后跟 @，然后 f 表示字段，2 表示第二个字段，因为 @ 符号的任一侧都会有一个。

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2021-05-06T14:16:25.683

您可以查看 package.json 以查看已安装的软件包版本

在命令行上获取列表

`npm ls`

它将为您提供项目中所有已安装的软件包及其各自的版本。

对于特定的包版本

```
npm ls <package-name> 
```

例如

```
npm ls next 
```

它将返回版本

```
-- next@10.1.3 
```

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2017-11-04T12:41:51.953

你可以试试这个： `npm show {package} version`显示最新的包版本。如果您的包已过时，`npm outdated`将显示版本信息。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2020-08-11T20:11:02.157

如果您想检查全局安装的特定模块，请在 *nix 系统上使用：

```
npm list -g --depth=0 | grep <module_name> 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2016-11-17T11:23:43.687

# 访问`package.json`

您可以通过以下方式访问包的`package.json`or `bower.json`：

`notepad ./node_modules/:packageName/package.json`

这将打开您包含`package.json`在`notepad`其中`version number`的.`:packageName``command`

## 例如 ：

`notepad ./node_modules/vue-template-compiler/package.json`

祝你好运。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2017-12-28T12:14:48.210

我们可以使用**npm view any-promise** (你的模块名称) -v

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2021-11-22T18:40:50.517

我在用

> npm 列表 --depth=0 | grep 模块名称@

它给我带来了这样的结果

> ├── module_name@2.1033.0

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2021-07-06T05:33:15.637

有一种简单的方法可以做到这一点。首先，转到所需的位置（所在`package.json`位置）。和简单的打开`package.json`文件作为文本编辑器。

通过这种方法，您可以在一个地方找到所有模块版本

`package.json`看起来像这样

```
{
  "name": "raj",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "bcrypt": "^5.0.1",
    "connect-flash": "^0.1.1",
    "dotenv": "^10.0.0",
    "ejs": "^3.1.6",
    "express": "^4.17.1",
    "express-session": "^1.17.2",
    "mysql2": "^2.2.5",
    "passport": "^0.4.1",
    "passport-local": "^1.0.0",
    "sequelize": "^6.6.2",
    "socket.io": "^4.1.2"
  }
} 
```

因此，您可以在您的电脑中读取每个已安装的依赖项（模块），
即`"socket.io": "^4.1.2"`有`'socket.io'`版本`4.1.2`

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-11-12T16:03:36.673

要仅获取已安装的版本号，请尝试：

npm list -g --depth=0 包名 | grep 包名 | 剪切 -d'@' -f2

例如安装的 PM2 版本号：

npm 列表 -g --depth=0 pm2 | grep pm2 | 剪切 -d'@' -f2

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-02-04T10:42:48.440

您还可以`package.json`在文本编辑器中手动查看，查看哪些包是依赖项。如果`npm list`不能作为手动替代，请使用此选项。

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2021-11-23T14:50:23.050

npx 在 npm `run-script-like`shell 环境中运行命令，所有常用的环境变量都可用。因此你也可以使用类似的东西

```
npx -c 'node -p "process.env.npm_package_version"' 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2021-10-31T12:43:24.427

所有的答案都是关于`npm`
这是如何使用`yarn`.
如果有人需要，可以提供帮助。
您可以使用以下命令检测确切的运行模块版本：
`yarn list`=>[列出所有依赖](https://classic.yarnpkg.com/en/docs/cli/list#toc-yarn-list)
`yarn list --depth=0`项 => 要限制依赖项的深度，请[使用`--depth`flag](https://classic.yarnpkg.com/en/docs/cli/list#toc-yarn-list-depth-pattern)。

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2022-01-25T23:41:07.817

只需检查您的 package.json 文件。

```
"dependencies": {
  "ajv": "^8.9.0",
  "ajv-keywords": "^5.1.0",
  "fastify": "^3.27.0" 
```

# java - Opengl Quads不渲染

> ID：10972178
> 
> 赞同：1
> 
> 时间：2012-06-10T20:36:38.283
> 
> 标签：java, opengl, render, lwjgl

这是有问题的代码：

```
glColor3f(1,1,1);
for(int x=0;x<125;x++){
    for(int y=0;y<10;y++){

        int p = levelArray[x][y];
        if(p == 0){
            break;
        }
        Texture t = pieces[1];
        t.bind();
        System.out.println(x*64+"|"+y*64 + " :: "+((x*64)+t.getTextureWidth())+"|"+((y*64)+t.getTextureHeight()));
        glBegin(GL_QUADS);
            glTexCoord2f(0,0);
            glVertex2f(x*64,y*64);
            glTexCoord2f(1,0);
            glVertex2f((x*64)+t.getTextureWidth(),y*64);
            glTexCoord2f(1,1);
            glVertex2f((x*64)+t.getTextureWidth(),(y*64)+t.getTextureHeight());
            glTexCoord2f(0,1);
        glEnd();    
    }
} 
```

我得到了一个打印输出，所以我到达了 glBegin，我获取了打印输出的样本坐标，并使用完全相同的纹理在此处显示的第一个线上方绘制了该四边形，并进行渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T20:48:11.597

您只有三个 glVertex2f 调用，而应该有四个（在 GL_QUADS 内）。你有四个 glTexCoord2f，所以这在你的代码中必须是一个类型-o。

# neo4j - 在 neo4j 数据库中表示本体的好框架？

> ID：10972179
> 
> 赞同：6
> 
> 时间：2012-06-10T20:36:47.100
> 
> 标签：neo4j, ontology, graph-databases

我想为我的 Web 应用程序构建一个本体，我想使用 Neo4j 来表示本体（因为我还是使用 Neo4j）。

现在看来，我必须从头开始编写它，包括整个本体实现、验证、推理、GUI 编辑器。肯定是工作量太大了。

是否有一个框架或库可以让我在 neo4j 上管理我的本体，而无需从头开始实现它？如果不是，最合理的选择是什么？（我在 Node.js 上使用 Neo4j）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:28:17.577

> 本体实现、验证、推理、GUI 编辑器。

如果您想要这些东西（GUI 编辑器除外），您可以使用[Tinkerpop 的蓝图](https://github.com/tinkerpop/blueprints/wiki)堆栈，同时仍然使用 Neo4j 作为数据库。它从“低级”图形数据库的 API 中抽象出来，并提供统一的接口。这意味着您可以在将来更改数据库，同时保留这些功能。

要开始使用，您需要主[蓝图库 Neo4j impl。](https://github.com/tinkerpop/blueprints/wiki/Neo4j-Implementation)和[赛欧。](https://github.com/tinkerpop/blueprints/wiki/Sail-Ouplementation). 此时，您应该使用`GraphSail`该类及其 Connection 类进行语义图管理。

请注意，通过使用 Sail 补充（我没有想出这个术语..），您可以使用 Sesame 的库，例如（从我的 maven 项目中粘贴）sesame-rio-rdfxml、sesame-rio-ntriples、sesame-repository-sail ，芝麻-queryparser-sparql。

我不是为 Tinkerpop 工作，但我真的很喜欢他们的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T16:18:57.877

[Neosemantics 插件](https://neo4j.com/labs/neosemantics/)可以做很多事情。你可能想看看。您可以导入现有的本体并轻松扩展它。您可以使用 Bloom 免费获得可视化，但没有本体编辑器本身。为此，您可以使用 Protégé。在那里创建您的，然后使用新语义将其导入neo4j。这是一条线：

```
CALL n10s.onto.import.fetch("...path to your onto...", "Turtle") 
//or whichever serialisation format you're using 
```

# cmake - 在 CMake 中将文件添加到 source_group

> ID：10972188
> 
> 赞同：6
> 
> 时间：2012-06-10T20:38:47.297
> 
> 标签：cmake

我在使用 CMake 时遇到问题，我无法将我的文件添加到 Visual Studio 内的文件夹/过滤器中。

```
# Add folders to filters
file(GLOB_RECURSE DATABASE_SRCS     RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/database *.cpp *.h)
file(GLOB_RECURSE LOG_SRCS          RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/log *.cpp *.h)
file(GLOB_RECURSE NETWORK_SRCS      RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/network *.cpp *.h)
file(GLOB_RECURSE THREADING_SRCS    RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/threading *.cpp *.h)
file(GLOB_RECURSE UTILS_SRCS        RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/utils *.cpp *.h)

source_group(database   FILES ${DATABASE_SRCS})
source_group(log        FILES ${LOG_SRCS})
source_group(network    FILES ${NETWORK_SRCS})
source_group(threading  FILES ${THREADING_SRCS})
source_group(utils      FILES ${UTILS_SRCS}) 
```

可能导致此问题的一个问题是`GLOB_RECURSE`' 返回位于`${CMAKE_CURRENT_SOURCE_DIR}`但相对于`/database`（或任何其他目录）的文件。

例如，有一个文件`database/`名为`dbcore.cpp`. 该文件被添加到`DATABASE_SRCS`as `dbcore.cpp`，但主目录（即`${CMAKE_CURRENT_SOURCE_DIR}`）中的文件也被添加，但具有相对于 的路径`database/`，例如`../common.h`.

另一个问题可能是在 Visual Studio 项目内部，默认的“头文件”和“源文件”过滤器已经存在。

我正在使用 CMake 2.8.6 和 Visual Studio 11/2012。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T00:16:08.140

为避免`file(GLOB_RECURSE...`调用每次都返回所有文件，请使用以下内容：

```
file(GLOB_RECURSE DATABASE_SRCS
         RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
         ${CMAKE_CURRENT_SOURCE_DIR}/database/*.cpp
         ${CMAKE_CURRENT_SOURCE_DIR}/database/*.h) 
```

这将设置应该使您的`DATABASE_SRCS`呼叫正常工作的值。`database/dbcore.cpp;database/dbcore.h;...``source_group`

但是，从文档中`file(GLOB`：

> 我们不建议使用 GLOB 从源代码树中收集源文件列表。如果添加或删除源时没有 CMakeLists.txt 文件更改，则生成的构建系统无法知道何时要求 CMake 重新生成。

要查看完整的详细信息，请运行

```
cmake --help-command file 
```

列出项目文件的常用方法是手动将它们添加到 CMakeLists.txt。

要回答您的最后一个问题，如果 Visual Studio 的默认“头文件”和“源文件”为空（即所有文件都出现在其他文件夹中），它们不会出现。这些默认值的存在不会影响使用`source_group`.

# php - 如何通过电子邮件发送数据库和表单值

> ID：10972190
> 
> 赞同：-3
> 
> 时间：2012-06-10T20:39:01.637
> 
> 标签：php, mysql, email

我有一个使用 PHP 创建的网站，用于将表单值存储在数据库中，并有一个页面根据选择显示某些用户的值。我正在尝试将这些值从数据库发送到电子邮件地址，但我无法将主题每一行的值分开。我正在使用 PHP 内置函数发送电子邮件并将值存储在主题变量中。

我尝试通过使用分别添加每个变量

```
$subject . "content"; 
```

对于每个变量，但它仍然在一行中。

我现在正在考虑制作一种时事通讯类型，但不知道如何制作或使其按我的意愿工作。因此，如果有人可以帮助我以这种方式或以其他语言发送这些值。

这是我到目前为止的代码。

```
 $query= sql query
    $resultt= sql result
    $roww=mysql_fetch_assoc($resultt);

    extract($roww);

    $emmessage = "User Form Information";

    $emmessage = $emmessage . "     " . "values extracted from the database from $roww

$send = @$_POST['send'];
$subject = strip_tags(@$_POST['subject']);
$reciever= strip_tags(@$_POST['email']);
$message = $emmessage;

//  Start email processing
if ($send) 
{
//  Send the message
mail($reciever, $subject, $message, "From: $email");
$emessage="Your message has been sent";
include("forme.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:18:31.500

你可以使用`br2nl()`函数。或者，如果您在使用`\n`之前按照建议直接使用`nl2br()`函数，那么在 HTML 页面中您将得到一个新行而不是`\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:42:54.007

您可以使用 分隔电子邮件中的行`\n`。

```
$content = "Value 1 \n Value2"; 
```

# java - JAX-WS、@XmlJavaTypeAdapter 和自定义枚举

> ID：10972195
> 
> 赞同：4
> 
> 时间：2012-06-10T20:39:32.060
> 
> 标签：java, soap, enums, jaxb, jax-ws

我正在使用一个基于 IDL 定义生成代码的库。能够在各种语言（Java、C 和 C++）中使用通用枚举非常棒，但是这些生成的枚举似乎不能很好地与 JAX-WS 配合使用。

基本上，主枚举“超级”类有两个成员：序数和名称。它看起来与此类似（注意：这是在第三方库中，对 JavaBean 不友好）：

```
public class CustomEnum {

    int _ordinal;
    String _name;

    public CustomEnum(int ordinal, String name) {
        this._ordinal = ordinal;
        this._name = name;
    }

    public int ordinal() {
        return _ordinal;
    }

    public String name() {
        return _name;
    }
} 
```

因此，在基于 IDL 定义生成的代码中看起来与此类似（以 Day 为例——但实际上我有大约 50 个扩展 CustomEnum 的“枚举”，所以我想要一个解决方案，让我避免拥有多个枚举的副本，例如 IDL 生成的类型和 java.lang.enum）：

```
public class Day extends CustomEnum {

    public static final Day Sunday = new Day(0, "Sunday");
    public static final Day Monday = new Day(1, "Monday");
    public static final Day Tuesday = new Day(2, "Tuesday");
    public static final Day Wednesday = new Day(3, "Wednesday");
    public static final Day Thursday = new Day(4, "Thursday");
    public static final Day Friday = new Day(5, "Friday");
    public static final Day Saturday = new Day(6, "Saturday");

    public Day(int ordinal, String name) {
        super(ordinal, name);
    }
} 
```

请注意，我也不想弄乱/重新排列/注释这个类，因为它是生成的代码。

所以，现在我想做的是能够在 JAX-WS @WebMethod 中使用这个“Day”枚举作为 @WebParam。这是我想要做的一个非常简单的例子：

```
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

    @WebService
    public class EnumEndpoint {

        @WebMethod
        public boolean callEndpoint(
                @XmlJavaTypeAdapter(CustomEnumAdapter.class) Day day) {
            System.out.println(day.ordinal() + " " + day.name());
            return false;
        }

    } 
```

我希望像这样编写一个 XmlJavaTypeAdapter：

```
import java.lang.reflect.Type;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class CustomEnumAdapter extends XmlAdapter<CustomEnum, EnumBean>
        implements Type {

    @Override
    public EnumBean unmarshal(CustomEnum v) throws Exception {
        EnumBean mine = new EnumBean(v.ordinal(), v.name());
        return mine;
    }

    @Override
    public CustomEnum marshal(EnumBean v) throws Exception {
        CustomEnum customEnum = new CustomEnum(v.getOrdinal(),v.getName());
        return customEnum;
    }

} 
```

EnumBean 看起来像：

```
public class EnumBean {

    int ordinal;
    String name;

    public EnumBean(int ordinal, String name) {
        this.ordinal = ordinal;
        this.name = name;
    }

    public int getOrdinal() {
        return ordinal;
    }

    public void setOrdinal(int ordinal) {
        this.ordinal = ordinal;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

但是当我像这样声明一个服务器端点时：

```
import javax.xml.ws.Endpoint;

public class Server {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Endpoint.publish("http://0.0.0.0:7979/enum", new EnumEndpoint());

    }

} 
```

我收到此错误：

```
Jun 10, 2012 3:29:21 PM com.sun.xml.internal.ws.model.RuntimeModeler getRequestWrapperClass
INFO: Dynamically creating request wrapper Class test.jaxws.CallEndpoint
Exception in thread "main" javax.xml.ws.WebServiceException: java.lang.IllegalArgumentException: value class test.CustomEnumAdapter
    at com.sun.xml.internal.ws.model.WrapperBeanGenerator.createRequestWrapperBean(WrapperBeanGenerator.java:249)
    at com.sun.xml.internal.ws.model.RuntimeModeler.getRequestWrapperClass(RuntimeModeler.java:280)
    at com.sun.xml.internal.ws.model.RuntimeModeler.processDocWrappedMethod(RuntimeModeler.java:674)
    at com.sun.xml.internal.ws.model.RuntimeModeler.processMethod(RuntimeModeler.java:612)
    at com.sun.xml.internal.ws.model.RuntimeModeler.processClass(RuntimeModeler.java:401)
    at com.sun.xml.internal.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:240)
    at com.sun.xml.internal.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:312)
    at com.sun.xml.internal.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:178)
    at com.sun.xml.internal.ws.api.server.WSEndpoint.create(WSEndpoint.java:456)
    at com.sun.xml.internal.ws.api.server.WSEndpoint.create(WSEndpoint.java:475)
    at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.createEndpoint(EndpointImpl.java:213)
    at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.publish(EndpointImpl.java:143)
    at com.sun.xml.internal.ws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:102)
    at javax.xml.ws.Endpoint.publish(Endpoint.java:170)
    at test.Server.main(Server.java:11)
Caused by: java.lang.IllegalArgumentException: value class test.CustomEnumAdapter
    at com.sun.xml.internal.ws.org.objectweb.asm.ClassWriter.newConstItem(ClassWriter.java:893)
    at com.sun.xml.internal.ws.org.objectweb.asm.AnnotationWriter.visit(AnnotationWriter.java:185)
    at com.sun.xml.internal.ws.model.WrapperBeanGenerator.createBeanImage(WrapperBeanGenerator.java:111)
    at com.sun.xml.internal.ws.model.WrapperBeanGenerator.createRequestWrapperBean(WrapperBeanGenerator.java:245)
    ... 14 more 
```

我在这里想念什么？我尝试直接使用“Day”，但由于它没有默认构造函数并且对获取/设置不友好，因此也不起作用。有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:46:35.033

**枚举豆**

如果`EnumBean`是适配类，那么它需要有一个默认构造函数。

```
package forum10972195;

public class EnumBean {

    int ordinal;
    String name;

    public EnumBean() {

    }

    public EnumBean(int ordinal, String name) {
        this.ordinal = ordinal;
        this.name = name;
    }

    public int getOrdinal() {
        return ordinal;
    }

    public void setOrdinal(int ordinal) {
        this.ordinal = ordinal;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**自定义枚举适配器**

在扩展时，适应的类也应该作为第一个参数出现`XmlAdapter`。由于您要映射到的参数是类型`Day`，因此您需要将`XmlAdapter`指定`Day`作为绑定类型。

```
package forum10972195;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class CustomEnumAdapter extends XmlAdapter<EnumBean, Day> {

    @Override
    public EnumBean marshal(Day v) throws Exception {
        EnumBean mine = new EnumBean(v.ordinal(), v.name());
        return mine;
    }

    @Override
    public Day unmarshal(EnumBean v) throws Exception {
        Day day = new Day(v.getOrdinal(),v.getName());
        return day;
    }

} 
```

* * *

**测试客户**

通过我建议的更改，我在 WebLogic 12.1.1 中运行了您的服务，并使用内置的测试客户端得到了以下结果：

**服务请求**

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
  <env:Header />
    <env:Body>
    <callEndpoint xmlns="http://forum10972195/">
      <!--Optional:-->
      <arg0 xmlns="">
        <!--Optional:-->
        <name>string</name>
        <ordinal>3</ordinal>
      </arg0>
    </callEndpoint>
  </env:Body>
</env:Envelope> 
```

**服务响应**

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
    <ns0:callEndpointResponse xmlns:ns0="http://forum10972195/">
      <return>false</return>
    </ns0:callEndpointResponse>
  </S:Body>
</S:Envelope> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:52:28.840

听起来它在运行时失败，因为您的 webmethod 参数上的 @XmlJavaTypeAdapter 注释 - 如何`Day`在您的请求包装器中将您的请求参数和您的布尔响应包装在包装器消息类型中，只需将其声明为`@XmlRootElement`并声明您的适配器`@XmlJavaTypeAdapter(CustomEnumAdapter.class)`。这样，您的 @Webservice 声明就没有 @XmlJavaTypeAdapter 注释。

# ruby - 创建一个将方法添加到核心类的 Gem

> ID：10972198
> 
> 赞同：2
> 
> 时间：2012-06-10T20:39:43.737
> 
> 标签：ruby

我正在创建一个为`String`类添加新方法的 gem。例如，如果我正在创建一个添加`to_foobar`on的方法，`String`我知道我可以简单地执行以下操作：

```
class String
  def to_foobar
    # ...
  end
end 
```

但这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T00:17:14.490

我会选择

```
# my_gem/lib/my_gem/core_extensions/string.rb

module MyGem::CoreExtensions::String
  def to_foobar
    # ...
  end
end

class String
  include MyGem::CoreExtensions::String
end 
```

这样，如果我收到一条错误消息提到`String#to_foobar`，我不必怀疑“等等，`String`没有`to_foobar`方法，这是从哪里来的？” 我只能说

```
String.ancestors
# => [String, MyGem::CoreExtensions::String, Comparable, Object, Kernel] 
```

Et voilà, there's this suspicious looking module in the ancestry chain, which, following standard Ruby naming conventions, probably lives in `my_gem/lib/my_gem/core_extensions/string.rb`.

Or, I can say

```
''.method(:to_foobar).owner
# => MyGem::CoreExtensions::String 
```

And actually get a meaningful answer.

Of course,

```
''.method(:to_foobar).source_location
# => ['my_gem-0.0.1/lib/my_gem/core_extensions/string.rb", 4] 
```

always works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:58:19.487

是的，这完全没问题。如果您不知道如何从头开始制作宝石，我建议您看一下[珠宝商](https://github.com/technicalpickles/jeweler)。

# ruby - 创建一个连接许多其他 XML 文件

> ID：10972201
> 
> 赞同：2
> 
> 时间：2012-06-10T20:40:08.470
> 
> 标签：ruby, nokogiri

我正在尝试使用一些 XML 列表创建一个 XML。

这是 XML 的示例列表

## java.xml：

```
<JavaDetails>
   <SomeList> ... </SomeList>
   ....
</JavaDetails> 
```

## c.xml

```
<CDetails>
   <SomeList> ... </SomeList>
   ....
</CDetails> 
```

我想使用上面的 XML 创建一个 Programming.xml

它应该看起来像：

```
<programming>
 <Java>
   <JavaDetails>
    <SomeList> ... </SomeList>
    ....
   </JavaDetails>
 </Java>
 <C>
  <CDetails>
    <SomeList> ... </SomeList>
   ....
  </CDetails>
 </C>
</programming> 
```

我目前正在研究 nokogiri，因为性能是一个主要因素，我不确定如何为输出 XML 创建节点。非常感谢使用 Nokogiri 在 Ruby 中的任何代码帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:27:09.833

要创建具有特定根的新 XML 文件，它可以很简单：

```
doc = Nokogiri.XML("<programming/>") 
```

将子节点添加到该文档的一种方法：

```
java = doc.root.add_child('<Java/>').first 
```

要从磁盘读取另一个 XML 文件并附加它：

```
java_details = Nokogiri.XML( IO.read )
java << java_details.root 
```

因此，如果您有一个文件名数组，并且您想根据名称从每个文件名构造包装元素：

```
require 'nokogiri'
files = %w[ java.xml c.xml ]
doc   = Nokogiri.XML('<programming/>')

files.each do |filename|
  wrap_name = File.basename(filename,'.*').capitalize
  wrapper   = doc.root.add_child("<#{wrap_name} />").first
  wrapper   << Nokogiri.XML(IO.read(filename)).root
end

puts doc 
```

或者，如果您想使用 Nokogiri 的 Builder 界面：

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.programming do
    files.each do |filename|
      wrap_name = File.basename(filename,'.*').capitalize
      xml.send(wrap_name) do
        xml.parent << Nokogiri.XML(IO.read(filename)).root
      end
    end
  end
end

puts builder.to_xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:05:36.897

要安装它：

```
gem install nokogiri 
```

这是语法：

```
require 'nokogiri'

builder = Nokogiri::XML::Builder.new do |xml|
  xml.programming {
    xml.Java {
      xml.JavaDetails {
        xml.SomeList 'List item'
      }
    }
  }
end 
```

结果可以通过以下方式检索`to_xml`：

```
builder.to_xml 
```

！

# java - XML 与 setImageDrawable/setImageBitmap

> ID：10972202
> 
> 赞同：5
> 
> 时间：2012-06-10T20:40:09.433
> 
> 标签：java, android, android-layout, drawable

如果我预加载某些图像，这对我的应用程序是有利的。我在 AsyncTask 中正确地执行了此操作，因为它是在官方文档中编写的。但我有一个关于何时应该设置它们的问题/疑问。

我将展示代码片段。请注意，它已简化（它们的互操作性在我的真实代码中更好，它检查空值等）。

让我们先看看原始（非预加载）版本：

```
<ImageView
    android:id="@+id/imageViewMyGraphicalImageElement"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop" 
    android:src="@drawable/my_graphical_element" >
</ImageView> 
```

预加载版本具有以下 XML（请注意缺少 src 属性）：

```
<ImageView
    android:id="@+id/imageViewMyGraphicalImageElement"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop">
</ImageView> 
```

以及来自预加载代码的片段：

```
sBitmap = bitmapBitmapFactory.decodeResource(context.getResources(), R.drawable.my_graphical_element, options); 
// 'sBitmap' is a Bitmap reference, while 'options' is BitmapFactory.Options 
```

最后是我设置的地方：

```
setContentView(R.layout.main);
...
ImageView imageViewMyGraphicalImageElement= (ImageView) findViewById(R.id.imageViewMyGraphicalImageElement);
imageViewMyGraphicalImageElement.setImageBitmap(sBitmap); 
```

问题：显然，基于 xml 的解决方案在调用 setContentView(...)**之前就**知道图像。预加载版本在调用**之后设置图像。**有什么区别吗？是否可以因此跳过系统完成的某些自动缩放或其他操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-09T08:36:16.510

我刚刚为此写了一篇文章。希望能够回答你的问题。

[https://plus.google.com/112740367348600290235/posts/VNAfFLDcKrw](https://plus.google.com/112740367348600290235/posts/VNAfFLDcKrw)

`ImageView`有 4 个 API 来指定图像。使用哪一个？有什么不同？

1.  setImageDrawable(Drawable drawable)
2.  setImageBitmap(位图 bm)
3.  setImageResource(int resId)
4.  setImageURI(URI URI)

`ImageView`，顾名思义，用于显示图像。但什么是图像？一个`Bitmap`是图像，不难理解，我们`setImageBitmap`为此目的使用。但是，在内部，`ImageView`has-a`Drawable`但不是 a `Bitmap`，这就是为什么`setImageDrawable`。当您在`setImageBitmap`内部调用 时，首先将位图包装到`BitmapDrawable`IS-A `Drawable`，然后调用`setImageDrawable`.

这是代码。

```
public void setImageBitmap(Bitmap bm) {
    setImageDrawable(new BitmapDrawable(mContext.getResources(), bm));
} 
```

那么，3 和 4 API 呢？

您应该已经知道，这是从文件路径、Uri 或资源文件创建位图的多种方法。

```
BitmapFactory.decodeFile(String pathName)
BitmapFactory.decodeStream(Inputstream)
BitmapFactory.decodeResource(Resource res, int id)  
BitmapFactory.decodeByteArray(byte[] data) 
```

意识到这一点，很容易理解`setImageResource`/`setImageUri`与`setImageBitmap`.

综上所述，`setImageDrawable`是其他 API 所依赖的原始函数。其他 3 个只是帮助您编写更少代码的方法。

此外，请务必记住，`ImageView`实际上 has-a`Drawable`不一定是 a `BitmapDrawable`！您可以将任何设置`Drawable`为图像视图。

除了`Drawable`通过 Java API 设置之外，您还可以使用 XML 属性来`Drawable`设置`ImageView`. 请参见下面的示例。请注意，该形状可以是图像文件（.png、.jpg、.bmp）或 xml 文件。

```
<ImageView
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:src="@drawable/shape"/> 
```

形状.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <gradient android:startColor="#FFFF0000" android:endColor="#80FF00FF" android:angle="270"/>
    <padding android:left="7dp" android:top="7dp android:right="7dp" android:bottom="7dp" />
    <corners android:radius="8dp" />
</shape> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T20:43:41.793

完全没有区别。您可以认为`ImageView`构造函数对`android:src`属性所做的所有事情都是 call `setImageResource`。

**更新：**实际上它使用`setImageDrawable`，这是`ImageView`构造函数获取属性的实际代码：

```
 Drawable d = a.getDrawable(com.android.internal.R.styleable.ImageView_src);
    if (d != null) {
        setImageDrawable(d);
    } 
```

参考：[ImageView.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ImageView.java)

# php - php，两个外部脚本上的全局变量

> ID：10972209
> 
> 赞同：0
> 
> 时间：2012-06-10T20:42:14.973
> 
> 标签：php

如何在两个外部脚本中传递全局变量？

```
<div>
<!-- INCLUDEPHP 1.php -->
</div>
<div>
<!-- INCLUDEPHP 2.php -->
</div> 
```

我曾尝试在`1.php`和 `2.phpp 上创建全局变量，但没有奏效。

**1.php：**

```
<?php
global $someVar;
$sql = ...;
$someVar= $db -> sql_query($sql);
?> 
```

**2.php：**

```
<?php
global $someVar;
echo "$someVar";
?> 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:47:50.877

我会尝试通过 PHP 包含脚本：

```
<div>
<?php require "1.php" ?>
</div>
<div>
<?php require "2.php" ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:03:29.787

如果两个包含都加载到同一个页面中，并且变量已经存在于全局范围内，那么您的所有函数都可以使用 global 语句访问它们。由于一切都已经是全局的，因此在全局范围内不需要该语句，只需要在函数内部。这也允许函数通过将变量强制转换到全局范围来共享变量。

但是，这有很多危险，我不会假装完全意识到，因此最好在大型复杂应用程序中谨慎使用全局范围，因为如果放宽命名约定，它们可能会变得非常不稳定。

基本上，我们正在研究，

```
function arrow() { global $a; $a = "arrow"; return $a; }
function sky() { global $b; $b = "sky"; return $b; }
echo "I shot an " . arrow() . " into the " . sky() . ".";
echo "I shot an $a into the $b."; 
```

这是孩子们的游戏，它展示了变量是多么暴露，坐在那里没有保护。现在另一个功能可以出现并将整个事情分开：

```
function whammo() { global $a, $b; $c = $a; $a = $b; $b = $c;}
echo "I shot an " . arrow() . " into the " . sky() . ".";
whammo();
echo "I shot an $a into the $b."; 
```

明白了吗？

您的解决方案可能在于某种闭包，其中包含需要此“全局”的所有功能。它会得到更好的保护。

# database - 如何将 Zookeeper 用作 Play Framework 的“数据库”而不是传统的 JDBC？

> ID：10972212
> 
> 赞同：1
> 
> 时间：2012-06-10T20:42:34.903
> 
> 标签：database, scala, model, playframework, apache-zookeeper

我在 scala 中使用 Play framework 2.0.1 来创建一个在模型中有基本内容但不是很复杂的应用程序。我希望将模型中的信息保存/请求/更新并从 zookeeper 实例中删除。

在不严重破坏游戏框架的情况下，我怎样才能最好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:49:05.810

简单的答案是告诉您 ZooKeeper 不打算用作通用数据存储/数据库；但是，我倾向于相信您确实在寻找类似 MongoDB 的东西。

查看[MongoDB 副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)和[选举/投票](http://www.mongodb.org/display/DOCS/Replica+Sets+-+Voting)。这应该给你想要的。比 ZooKeeper 更易于管理，并且对于一般应用程序数据存储需求更有用。

# macos - 移位选择和 emacs 24

> ID：10972215
> 
> 赞同：2
> 
> 时间：2012-06-10T20:42:57.407
> 
> 标签：macos, emacs, dot-emacs, emacs24

我使用 emacs 24 (OSX) 并且在换档选择时遇到问题。如果我用鼠标选择一个区域，文本会突出显示并自动保存到杀伤环上（我可以立即拉出它）。使用 shift-selection，文本会突出显示，但我必须手动保存文本 ( `M-w`) 才能拉出它。有没有什么方法可以让 shift-selection 突出显示文本并将其保存到 kill ring 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:12:27.653

默认情况下，用鼠标选择文本不会在杀伤环上放置任何内容（它会将其复制到 X 剪贴板）。

您可以通过多种方式自定义 Emacs 与剪贴板的交互方式。看：

`C-h``i``g` `(emacs) Cut and Paste` `RET`

> 有没有什么方法可以让 shift-selection 突出显示文本并将其保存到 kill ring 上？

我不确定是否有任何方法可以检测到您已停止选择内容，但您可能会建议`handle-shift-selection`设置一个临时`post-command-hook`运行自定义函数以将该区域放置在剪贴板中（并删除 post-command-hook） .

**编辑：**等等，你所描述的正是我在 Ubuntu 上的 Emacs 24.1 中发生的事情。

如果我在 Emacs 中移动选择一些文本，然后在任何应用程序中单击鼠标中键，我会粘贴所选文本。

运行时尝试测试`emacs -Q`

**编辑2：**啊，但你不是指鼠标，是吗？

这个怎么样？

```
(defvar my-shift-selection-in-progress nil)
(make-variable-buffer-local 'my-shift-selection-in-progress)

(defadvice handle-shift-selection
  (before my-shift-selection-to-kill-ring-advice)
  "Automatically copy shift-selected text to the kill ring.

If `interprogram-cut-function' is non-nil, also save the text for a window
system cut and paste.

See `my-shift-selection-to-kill-ring'."
  (when (and shift-select-mode
             this-command-keys-shift-translated
             (not my-shift-selection-in-progress))
    (add-hook 'post-command-hook 'my-shift-selection-to-kill-ring nil t)))

(ad-activate 'handle-shift-selection)

(defun my-shift-selection-to-kill-ring ()
  "Post-command callback for my-shift-selection-to-kill-ring-advice."
  (if this-command-keys-shift-translated
      (kill-new (filter-buffer-substring (region-beginning) (region-end))
                my-shift-selection-in-progress)
    (remove-hook 'post-command-hook 'my-shift-selection-to-kill-ring t))
  (setq my-shift-selection-in-progress this-command-keys-shift-translated)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:19:16.390

“从班次选择自动终止”的问题是确定班次选择何时结束（此时您最终可以执行终止）。

# android - ArrayAdapter 抛出 ArrayIndexOutOfBoundsException

> ID：10972217
> 
> 赞同：0
> 
> 时间：2012-06-10T20:43:15.810
> 
> 标签：android, arraylist, android-arrayadapter

使用自定义数组适配器时出现 ArrayOutOfBounds 异常。

我想知道是否有任何我忽略的编码错误。

这是错误日志：

```
06-10 20:21:53.254: E/AndroidRuntime(315): FATAL EXCEPTION: main
06-10 20:21:53.254: E/AndroidRuntime(315): java.lang.RuntimeException: Unable to start activity ComponentInfo{alex.android.galaxy.tab.latest/alex.android.galaxy.tab.latest.Basic_db_output}: java.lang.ArrayIndexOutOfBoundsException
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.os.Looper.loop(Looper.java:123)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-10 20:21:53.254: E/AndroidRuntime(315):  at java.lang.reflect.Method.invokeNative(Native Method)
06-10 20:21:53.254: E/AndroidRuntime(315):  at java.lang.reflect.Method.invoke(Method.java:521)
06-10 20:21:53.254: E/AndroidRuntime(315):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-10 20:21:53.254: E/AndroidRuntime(315):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-10 20:21:53.254: E/AndroidRuntime(315):  at dalvik.system.NativeStart.main(Native Method)
06-10 20:21:53.254: E/AndroidRuntime(315): Caused by: java.lang.ArrayIndexOutOfBoundsException
06-10 20:21:53.254: E/AndroidRuntime(315):  at alex.android.galaxy.tab.latest.Basic_db_output.onCreate(Basic_db_output.java:44)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-10 20:21:53.254: E/AndroidRuntime(315):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我的代码示例基于此：[如何使用 ArrayAdapter<myClass>](https://stackoverflow.com/questions/2265661/how-to-use-arrayadaptermyclass/2265712#2265712)。

```
ArrayList<Question> list = new ArrayList<Question>();

for(int i=1; i <= 3; i++)
{       
    path = getAssets().open("quiz"+i+".txt");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Reader reader = new ResultsReader(path);
    reader.read();

    String str = ((ResultsReader)reader).getInput();
    String data[] = str.split("<.>");

    Question q = new Question();

    q.question = data[0];
    q.answer = Integer.parseInt(data[1]);
    q.choice1 = data[2];
    q.choice2 = data[3];
    q.choice3 = data[4];
    list.add(q);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:02:17.617

当你这样做

```
 String data[] = str.split("<.>"); 
```

它将返回一个不确定长度的数组，除非您知道输入是正确的，否则当您执行以下操作时会遇到问题：

```
 q.question = data[0];
    q.answer = Integer.parseInt(data[1]);
    q.choice1 = data[2];
    q.choice2 = data[3];
    q.choice3 = data[4]; 
```

也许您应该考虑另一种不依赖于调用数组的显式索引的技术。

例如：

```
if(data.length == 4){
        q.question = data[0];
        q.answer = Integer.parseInt(data[1]);
        q.choice1 = data[2];
        q.choice2 = data[3];
        q.choice3 = data[4];
} else {
   Log.e("YourApp", "Data was not split from file correctly");
} 
```

或在使用拆分数据数组之前添加更多调试：

```
for(int i=0; i < data.length; i++){
   Log.d("YourApp", "DataReceived:"+data[i];
} 
```

**编辑**

哦，是的，问题是模拟器/你的手机不知道是什么

```
 C:/ 
```

是。

# php - 你好。我的 Uploadify 脚本看不到 $_SESSION

> ID：10972222
> 
> 赞同：-1
> 
> 时间：2012-06-10T20:44:05.467
> 
> 标签：php, jquery, uploadify

```
 function userSingin( )
    {

            $login = Common::getGLOBALS('userLogin');
        $pass  = Common::getGLOBALS('userPassword');

        $reg = false;

        $users = $this->db->get("SELECT userID, userLogin, userPassword FROM Users");

        foreach( $users as $_users )
        {
            if( $_users->userLogin == $login && $_users->userPassword == md5( $pass ) )
            {
                //$sess->Set('userHash', md5( $login.$pass.$salt ) );
                Session::Set('UID', $_users->userID );  // set userID
                $reg = true;
            }
        }

        echo $reg ? "ok" : "error";
    }

=================================================

    $(function() 
    {

        $('#file_upload').uploadify(
        {
            'fileSizeLimit'    : '1000KB',
            'queueSizeLimit'   : 1,
            'fileTypeDesc'     : 'Image Files',
            'fileTypeExts'     : '*.gif; *.jpg; *.png',
            'removeTimeout'    : 3,
            'swf'              : '/application/userData/js/uploadify/uploadify.swf',
            'uploader'         : '/ajax/uploadAvatar/',

            'onUploadError' : function(file, errorCode, errorMsg, errorString) {
            alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
            },

            'debug' : true
          });
    });

=================================================

    public function uploadAvatar()
    {

        //include_once("application/Tools/Resize.php");

        $targetFolder = '/application/userData/upload/avatars/'; 

        if ( !empty ( $_FILES ) ) 
        {
            $tempFile = $_FILES['Filedata']['tmp_name'];
            $fName    = $_FILES['Filedata']['name'];

            $exp      = explode( '.', $fName );
            $ext      = end( $exp );

            $newName  = md5( $_FILES['Filedata']['name']. rand( 1, PHP_INT_MAX ) );

            $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
            $targetFile = rtrim($targetPath,'/') . '/' . $newName.'.'.$ext;

            $fileTypes = array('jpg','jpeg','gif','png');
            $fileParts = pathinfo($_FILES['Filedata']['name']);

            if (in_array($fileParts['extension'],$fileTypes)) {
            move_uploaded_file($tempFile,$targetFile);
            echo 'file uploaded';
            } else {
            echo 'Invalid file type.';
            }
        }

        print_r( $_SESSION ); // empty...
    }

=================================================
```

在我使用`print_r( $_SESSION )`的时候在另一个文件中就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:51:04.470

这是我在做 Flex 时看到的一个问题，通过 Flash 上传似乎不使用 cookie（因此会丢失会话）。如果uploadify 使用flash 这是你的问题。

您可以通过设置一个标识您的用户的令牌来修复它，而不是上传到[http://example.com/upload.php](http://example.com/upload.php)您应该上传到[http://example.com/upload.php?token=azpodkazpoj1dzapdo](http://example.com/upload.php?token=azpodkazpoj1dzapdo)（您上传脚本必须实现一种机制来从令牌中查找和检查用户。

编辑：如怀疑重复的问题中所建议的，您可以使用 session_id 作为令牌

# c# - ASP.Net WebAPI RC ILogger

> ID：10972225
> 
> 赞同：3
> 
> 时间：2012-06-10T20:45:22.477
> 
> 标签：c#, asp.net-web-api

刚升级到webApi的RC，发现一大堆东西已经不是原来的样子了。

我们使用`ILogger`( [http://msdn.microsoft.com/en-us/library/system.web.http.common.ilogger(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.common.ilogger(v=vs.108).aspx) ) 接口从我们的 API 中记录事件/异常. 但是，升级后似乎不再存在。有谁知道这去了哪里/变成了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:49:58.517

使用新的 WebAPI，ILogger 接口已被删除，现在您应该使用**ITraceWriter**，如下所述：

**监视和诊断：**您可以通过提供 ITraceWriter 实现并使用依赖关系解析器将其配置为服务来启用跟踪。ILogger 接口已被删除。

[这](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)是官方文档，[这](http://blogs.msdn.com/b/roncain/archive/2012/04/12/tracing-in-asp-net-web-api.aspx)是从 ITraceWriter 开始的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T00:03:16.027

ILogger 接口已替换为更通用的跟踪机制。[您可以在此处](http://blogs.msdn.com/b/roncain/archive/2012/04/12/tracing-in-asp-net-web-api.aspx)查看有关新跟踪的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T01:08:39.793

您还可以查看我的[nlog webapi trace writer](https://github.com/dbettin/webapi.nlog)。它仅适用于后 RC 位，但它是一个简单的更改，以使其对抗 RC 下降。

# java - Java - 未显示带有 JTable 的 JScrollPane

> ID：10972228
> 
> 赞同：1
> 
> 时间：2012-06-10T20:46:05.200
> 
> 标签：java, swing, jtable, jscrollpane

我有一个 JPanel，我在其中添加了一个 JScrollPane（请参阅下面的课程）。我添加了一个 JTextField 来验证一切正常（而不是 JScrollPane），并且文本字段已添加到面板中。当我尝试添加我的 JScrollPane 时，没有显示任何内容（白色背景）。我该如何解决？

```
protected JPanel createContentPanel() {
    JPanel panel = new JPanel();
    panel.setLayout(new BorderLayout());

    final String[] columnNames = { "Test1", "Test2", "Test3" };
    final String[][] data = {
            { "foo1", "foo2", "foo3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" },
            { "bar1", "bar2", "bar3" }
    };

    ScrollableTable scrollableTablePane = new ScrollableTable(data, columnNames);
    panel.add(scrollableTablePane, BorderLayout.CENTER);
    return panel;
}

public class ScrollableTable extends JScrollPane {

    public ScrollableTable(String[][] aData, String[] aColumnNames) {
        super();

        TableModel model = getTableModel(aData, aColumnNames);
        JTable overviewTable = new JTable(model);
        overviewTable.setGridColor(new Color(240, 240, 240));
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
        overviewTable.setRowSorter(sorter);

        this.add(overviewTable);
    }

    private TableModel getTableModel(String[][] aData, String[] aColumnNames) {
        TableModel model = new DefaultTableModel(aData, aColumnNames) {
            public Class<?> getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        return model;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:51:33.617

要设置 JScrollPane 的显示组件，请使用[JScrollPane#setViewportView(Component)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)而不是 add(Component)。

```
public ScrollableTable(String[][] aData, String[] aColumnNames) {
    super();

    TableModel model = getTableModel(aData, aColumnNames);
    JTable overviewTable = new JTable(model);
    overviewTable.setGridColor(new Color(240, 240, 240));
    TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
    overviewTable.setRowSorter(sorter);

    this.setViewportView(overviewTable);
} 
```

# php - 所见即所得编辑器有问题

> ID：10972230
> 
> 赞同：-1
> 
> 时间：2012-06-10T20:46:33.253
> 
> 标签：php, html, ckeditor

嗨，我在保存编辑的页面时遇到问题。

WYSIWYG 编辑器称为 CkEditor。

这是我的管理员

```
<?php
session_start();
header("Cache-control: private");
require_once ('../include/back.php');
include_once("../ckeditor/ckeditor.php");?>
<html>
<head>
<title>ADMIN</title>
<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
</head>
<body>
<br>
<form action="../article.php" method="post" target="_blank">
<?php
$CKEditor->basePath = '/ckeditor/';
$CKEditor = new CKEditor();
$CKEditor->editor("editor1", $initialValue);
$initialValue = '<p>Words</p>';
?>
<input type="submit" value="Submit"/>
</form>
</body>
</html> 
```

这是我的文章页面的第二页：

```
<?php
session_start();
header("Cache-control: private");
include("include/back.php");
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
</head>
<body>
<div align="center">
<table>
<tr>
<td>
<?php
$editor_data = $_POST[ 'editor1' ];
echo $editor_data;
?>
</td>
</tr>
</table>
</body>
</html> 
```

我无法从 CKeditor 保存我的文章页面文件 (html)。当我输入内容并发布它时，CKeditor 可以工作，但是当我单击指向同一页面的菜单链接时它是空白的。

任何建议或解释将不胜感激。任何示例也将有所帮助。吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:11:22.047

您的文章页面是否仅使用以下代码来显示您在编辑器中输入的内容？

```
<?php
    $editor_data = $_POST[ 'editor1' ];
    echo $editor_data;
?> 
```

`$_POST`每个请求都会填充变量。它并不意味着存储超过 1 个请求的数据。您必须获取这些数据并将其保存为更持久的形式，例如写入数据库或文件。使用此代码，您可以看到您在编辑器中输入的内容，但只有在您发送时才能看到。一旦页面生成并发送到您的浏览器，文本将丢失。任何其他用户都不会仅仅因为他没有发送此数据而看到这一点。当您返回页面时，您也不会看到它。

# ruby-on-rails - 为什么 twitter-bootstrap-rails 生成的视图使用 model_class.human_attribute_name(:column) 而不仅仅是一个字符串？

> ID：10972232
> 
> 赞同：4
> 
> 时间：2012-06-10T20:46:58.203
> 
> 标签：ruby-on-rails, twitter-bootstrap, generator, twitter-bootstrap-rails

安装 twitter-bootstrap-rails 后，使用生成器：

```
rails g bootstrap:themed Model 
```

创建包含以下行的视图：

```
 <th><%= model_class.human_attribute_name(:comment_date) %></th>
  <th><%= model_class.human_attribute_name(:comment_time) %></th> 
```

默认的 rails 生成器只是直接插入人类可读的列名：

```
 <th>Comment date</th>
 <th>Comment time</th> 
```

这使得视图更清晰，并且在运行时似乎更有效。

twitter-bootstrap-rails 生成的视图有什么好处吗？

谢谢！

（PS，开发者网站离线，github和google+都不允许发送私信，github上的“问题”和google+帖子上的公开评论似乎都不适合这个问题，所以希望这里的人可能熟悉model_class.human_attribute_name() 的用例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:12:54.163

看看它的来源，你就会明白：

```
# File activemodel/lib/active_model/translation.rb, line 45
def human_attribute_name(attribute, options = {})
  defaults  = []
  parts     = attribute.to_s.split(".", 2)
  attribute = parts.pop
  namespace = parts.pop

  if namespace
    lookup_ancestors.each do |klass|
      defaults << :"#{self.i18n_scope}.attributes.#{klass.model_name.i18n_key}/#{namespace}.#{attribute}"
    end
    defaults << :"#{self.i18n_scope}.attributes.#{namespace}.#{attribute}"
  else
    lookup_ancestors.each do |klass|
      defaults << :"#{self.i18n_scope}.attributes.#{klass.model_name.i18n_key}.#{attribute}"
    end
  end

  defaults << :"attributes.#{attribute}"
  defaults << options.delete(:default) if options[:default]
  defaults << attribute.humanize

  options.reverse_merge! :count => 1, :default => defaults
  I18n.translate(defaults.shift, options)
end 
```

`human_attribute_name`在本地化属性名称方面做得很好。即使您正在构建仅使用英语的应用程序——谁知道呢，也许您的收件箱已经收到了一封来自您的客户的电子邮件，关于他扩展业务的计划，并且这种扩展将包括人们从右到左书写的国家。

## 这个怎么运作

假设您有具有属性的`Product`模型。`title`这样调用`human_attribute_name`：

```
Product.human_attribute_name 'title' 
```

`I18n.t`将使用以下参数调用（参见上面代码段中的最后一行）：

```
I18.t 'activerecord.attributes.product.title', {
  :count=>1, 
  :default=>[:"attributes.title", "Title"] 
} 
```

因此，您可以提供特定于某些模型和特定于某些属性名称的翻译。除非您提供任何这些翻译，否则您将获得通过`humanize`方法创建的属性的英文版本。

# javascript - jqm 忙时停止点击事件排队

> ID：10972238
> 
> 赞同：0
> 
> 时间：2012-06-10T20:48:08.157
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jQuery Mobile 和 PhoneGap 创建一个应用程序。

我在“点击”上“委托”了一个按钮来执行一些繁重的处理并显示一个加载微调器。如果用户继续点击我的应用程序，则这些点击会排队并在繁重的处理完成后由应用程序处理 - 并最终点击不需要的东西。

**我怎样才能防止这种情况？**

（据我了解， stopImmediatePropagation 无济于事，因为这些是新的用户事件。）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:38:34.513

要在整个页面上进行非活动点击，您可以使用透明 div 覆盖整个页面。虽然它可能被认为是一种边界黑客——这实际上会使用最少的 js 和 css！

需要注意的是，它不会给出页面已停用的任何视觉指示。

为此，可以使用半透明灰色作为叠加层，或者像我在下面所做的那样，显示加载消息。

首先，一个小的 CSS 讨论：
让 div 覆盖整个页面设置宽度和高度 100%。要正确定位它，请使用 position:absolute 并为透明背景使用 rgba background-color 属性（见下文）。您还应该声明一个 z-index（如果需要，可以增加）以确保它位于其他所有内容之上，并使用 -webkit-tap-highlight-color 属性删除 tap-callout。将显示设置为无，然后在举重时显示。

我做了一个[jsfiddle ，希望能解决问题](http://jsfiddle.net/RegHV/)。

在这里，我制作了一个 id 为“inactivator”的 div，它具有上面讨论的属性。我还制作了一个 ID 为“inactivate”的按钮，我已将 jQuery 的显示功能委托给该按钮。我还冒昧地添加了 jQuery Mobile 的默认加载消息以同时显示，只是为了提供应用程序思考的视觉指示（所以它不会被误认为是滞后）。

在这里，我添加了一个超时功能，以便加载消息和“inactivator”在 5 秒后隐藏。显然，在您的情况下，应该在完成“繁重处理”而不是五秒钟后触发相同的代码。

（新的附加答案，因为我没有正确理解这个问题，但旧答案仍然可能对其他人有帮助。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:21:47.050

我能想到的最简单的方法是在 javascript 函数的开头停用按钮，然后在合适的时候重新激活它：

```
$('#YourButton').addClass('ui-disabled'); 
```

在您的功能结束时（或每当您希望它再次激活时：

```
$('#YourButton').removeClass('ui-disabled'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:56:37.077

所以我花了一段时间才弄明白......你必须从委托函数中返回 FALSE 才能让父元素忽略该事件。下面的 return false 行解决了我的问题：

```
$(document).delegate("#finish", "tap", onFinish);

var onFinish = function() {
    $.mobile.loadingMessage = "Finishing...";
    $.mobile.showPageLoadingMsg();

    setTimeout(function(){  
        HEAVYPROCESSING();
        $.mobile.changePage($("#choosearticle"));
        }, 50);

    return false; // important - stops the two click fall through problem!
} 
```

# c++ - 在标头中声明任何与 iostream 相关的对象会在尝试初始化时引发错误

> ID：10972242
> 
> 赞同：2
> 
> 时间：2012-06-10T20:48:27.670
> 
> 标签：c++, iostream

我已经宣布两者

```
class myclass
{
private:
  stringbuf* mbuf;
  iostream* mios;
}; 
```

在我的类 .h 头文件中。但是，当我尝试像这样在构造函数中初始化它们时：

```
myclass::myclass()
{
  mbuf = new stringbuf();
  mios = new iostream(mbuf);

} 
```

它会引发以下错误：

```
invalid use of incomplete type 'std::stringbuf' 
```

然后当然iostream抱怨无法使用stringbuf

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:50:46.613

您是否包含了适当的标题，即`<sstream>`for`stringbuf`和`<iostream>`for `iostream`？

# javascript - 幻灯片放映在下载的站点中不起作用

> ID：10972246
> 
> 赞同：0
> 
> 时间：2012-06-10T20:49:51.477
> 
> 标签：javascript, slideshow

我已经建立了一个站点[http://ucemeche.weebly.com](http://ucemeche.weebly.com)，现在我想将它转移到其他服务器上。[http://Weebly.com](http://Weebly.com)提供了一个以 zip 格式下载整个站点的功能，我已经完成了。但问题是当我浏览下载的网站时，幻灯片、照片库等无法在实时网站中工作。也许它与java脚本有关。

为什么会这样？解决办法是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:54:48.930

检查javascripts的路径。您可能缺少一些脚本，或者您没有正确包含它们。

检查浏览器中的错误控制台。它很可能会告诉你哪里出了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T19:25:59.547

您只需更改 html 文件中图像的路径

路径将类似于：

```
"2\/1\/2\/5\/56254238\/3375189.png" 
```

将它们更改为：

```
"..\/folder name where your files are\/uploads\/2\/1\/2\/5\/56254238\/3375189.png" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T03:10:30.583

这是三年前的事了，所以也许这是一个迟到的答案。有一个托管文件 slideshow-jq.js。其中，有一个函数 largeURL(photo)。

将该 slideshow-jq.js 复制到 zip 的根目录中，然后编辑该文件：

`url = '/uploads/' + url.replace(/^\/uploads\//, '');`

删除上传前的 /。

现在，更新您的页面并查找此行： `<script src="http://cdn2.editmysite.com/js/site/main.js?buildTime=1234"></script><script type='text/javascript' src='http://cdn1.editmysite.com/editor/libraries/slideshow-jq.js?buildTime=1234'></script>`

或类似的东西。将 src 更改为本地文件，“./slideshow-jq.js”

这纠正了这个问题。

# ios - 比较重用标识符崩溃

> ID：10972250
> 
> 赞同：0
> 
> 时间：2012-06-10T20:50:47.537
> 
> 标签：ios, objective-c, uitableview

我需要为 UITableView 中的所有单元格设置自定义单元格高度。在这种方法中：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我试试这个：

```
if ([[tableView cellForRowAtIndexPath:indexPath] reuseIdentifier] == @"imageCell") 
```

因为我在情节提要中有 3 个不同的单元格设置了不同的标识符。但是我的应用程序在这里崩溃了`EXC_BAD_ACCESS`。

知道为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:54:32.127

你正在比较一个字符串，所以你应该使用`isEqualToString:`

```
if ([[[tableView cellForRowAtIndexPath:indexPath] reuseIdentifier] isEqualToString:@"imageCell"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:05:00.773

> (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath

您应该计算行的高度，而不是获取 tableView 的单元格。

在我看来，在 TableView 委托的生命周期中，第一步（在分配每个 UITableViewCell 之前），TableView 委托为每一行调用 heightForRowAtIndexPath （**但此时，未分配 UItableViewCell**）。在第二步中，TableView 调用

> > (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 创建 UitableView 单元格。

# php - Sqlite 3 插入和替换在超过 1 个唯一列上失败

> ID：10972256
> 
> 赞同：0
> 
> 时间：2012-06-10T20:51:29.057
> 
> 标签：php, mysql, sqlite

我正在使用一个表格来存储不同用户在不同投票中的投票。

表具有以下结构。

```
编号 | poll_id | 选择 | IP地址

id : 自动递增

poll_id : (STRING UNIQUE) 对特定投票是唯一的  

opt : (STRING) 用户选择的选项    

ip_address: (STRING UNIQUE) 用户的ip地址

```

这是我的查询

```
INSERT OR REPLACE INTO tbl_poll(id,poll_id,opt,ip_addr) VALUES (null,'$poll_id','$opt','$ip_addr') 
```

*`(Here $poll_id, $opt and $ip_addr are php variables which holds the respective values)`*

现在，场景是这样的，

用户 'A' 投票给 poll_id 'mypoll' 的选项 2。查询完美运行。（插入）

用户 'A' 改变主意并投票支持 poll_id 'mypoll' 的选项 5。查询完美运行。（替换）

但是，如果用户“A”投票支持 poll_id 'yourpoll' 的选项 4。 **查询失败（它进行了替换）**，但它应该插入一条带有 poll_id 'yourpoll' 的新记录

我认为，它只考虑`unqiue`约束`ip_address`而不考虑`poll_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:00:34.013

从您对所需功能的描述来看，您似乎想要`poll_id`并`ip_address`成为一个*独特的对*或*复合独特的*。

```
CREATE TABLE tbl_poll ( 
    id         INTEGER PRIMARY KEY AUTOINCREMENT,
    poll_id    STRING NOT NULL,
    ip_address STRING NOT NULL,
    opt        STRING NULL,
    CONSTRAINT 'unique_vote_per_poll_per_ip_address' UNIQUE ( poll_id, ip_address )  ON CONFLICT REPLACE 
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:02:09.673

不，这是正确的行为。您对 有一个`UNIQUE`约束`ip_address`，因此您可能没有两条相同的记录`ip_address`。把你的`UNIQUE`约束放在这对`(poll_id, ip_address)`上。

# facebook - FB 状态窗口中的错误 - iframe 版本

> ID：10972262
> 
> 赞同：0
> 
> 时间：2012-06-10T20:52:09.570
> 
> 标签：facebook, api, iframe

[问题的打印画面](http://www.brandys-ve-svete.cz/screen.jpg)

你好，我需要一些建议。正如您在图片中看到的，我的网站上有 iframe（宽度为 220 像素），并且框内的空间未完全使用。我可以在滚动条所在的右侧（红色箭头）看到边距。我需要将内容拉伸到盒子的整个宽度。（删除箭头之间的空格）我可以做点什么吗？这是一个FB错误吗？

THX 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:02:57.733

看起来“迷宫”这个词不会真正适合您的箭头所在的行 - 如果是这样，那么根本没有“错误”，它只是自动换行，这在 HTML 显示中很常见。

# segue - segue didSelectRowAtIndexPath 无法传递字符串

> ID：10972265
> 
> 赞同：0
> 
> 时间：2012-06-10T20:52:18.117
> 
> 标签：segue, didselectrowatindexpath

我正在尝试在情节提要的核心数据程序中的两个视图控制器之间传递一个字符串。我设置它的方式我希望只为一个部分推送下一个视图。因此使用“didSelectRowAtIndexPath”而不是“prepareForSegue”。下面是我的“didSelectRow…”代码“五”是被推送的 viewController 类。

```
- (void)tableView:(UITableView *)tableView
        didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (indexPath.section == 0)
    {
        five *five=[[five alloc]init];
        five.delegate = self;
        [self performSegueWithIdentifier:@"segue1" sender:self];
    }
} 
```

“二”是父视图。下面是在“五”类中创建的协议中使用的方法。“friendString”在“two”类中，“fiveString”在“five”类中。弹出视图时，字符串应该相同，然后我在“二”中的 UITextField 中使用“五”中添加的字符串。但是，弹出视图时它不会更新。

```
- (void)popFive:(five *)controller
{
    self.friendString=controller.fiveString;
    [self update];
    [self.tableView reloadData];
} 
```

I believe the problem is related to how the seque is done in "didSelectRow…" Any help or ideas will be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:20:21.827

我认为当使用“didSelectRow ...”作为转场时，您还必须使用“prepareForSegue”。当我添加它时，它似乎能够在弹出子视图时在两个视图之间传递字符串。我包括下面的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if (indexPath.section == 0)
{
    [self performSegueWithIdentifier:@"segue1" sender:self];
}

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{   

if ([segue.identifier isEqualToString:@"segue1"])
{
    five *five = segue.destinationViewController;
    five.delegate = self;

}   
} 
```

# php - 如何将html添加到php中的数组？

> ID：10972268
> 
> 赞同：1
> 
> 时间：2012-06-10T20:53:11.793
> 
> 标签：php, arrays, drupal

我试图在每个标签打印为数组元素之前添加一些 html 代码。  
**我的代码：**

```
 $term_links = array();

  foreach ($vars['node']->taxonomy as $term) 
  {
    $term_links[] = l($term->name, 'taxonomy/term/' . $term->tid,
      array(
        'attributes' => array(
          'title' => $term->description
    )));
  }

  $vars['node_terms'] = implode(', ', $term_links); 
```

目前，标签以逗号分隔打印。我想在每个标签元素之前添加一个小图像，`img src="tag.png"` **我该怎么做？**

**编辑 - 我当前的代码，仍然无法正常工作。**

```
 if (module_exists('taxonomy')) {

$img  = 'some html';
$text = $img . $term->name;
$path = 'taxonomy/term/' . $term->tid;

$term_links = array();
foreach ($vars['node']->taxonomy as $term) {

  $term_links[] = l($text, $path, array(
    'html' => TRUE,
      'attributes' => array(
        'title' => $term->description
    )));
 }
   $vars['node_terms'] = implode(', ', $term_links);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:56:55.567

Dupal 的 l() 函数有一个选项“html”，您可以将其设置为 TRUE 并使用 IMG + TITLE 作为标题。

这是示例：

```
$img  = '<img src="..." />';
$text = $img . $term->name;
$path = 'taxonomy/term/' . $term->tid;

$term_links[] = l($text, $path, array(
  'html'       => TRUE,
  'attributes' => array(
    'title' => $term->description
  )
)); 
```

# jquery - 在 JQuery Mobile 中为动态加载的内容应用主题样式

> ID：10972272
> 
> 赞同：2
> 
> 时间：2012-06-10T20:54:33.667
> 
> 标签：jquery, mobile, themes, accordion

我通过页面上的 Javascript 将部分动态添加到 JQM 手风琴可折叠集，然后尝试将内容从 HTML 文件添加到添加的部分。这部分确实有效，但插入的内容没有应用任何主题样式。我已经阅读了许多关于此的帖子，并尝试使用刷新和创建来尝试应用主题，但没有成功。

第一个问题是加载的 HTML 页面的 Head 中出现的内容是否重要？我发现我必须删除对 j​​query 和 jquerymobile js 文件的引用，否则这些部分的标题是在现有文件的顶部创建的。所以我所拥有的只是包含手风琴的页面中的相同样式。

其次，这是我为手风琴创建新部分的方法：

```
$("#NewRequestSection").after('<div id="MyWeatherSection" data-role="collapsible" data-theme="f" data-content-theme="a" data-iconpos="right" data-collapsed="false"><h3 id="WeatherHeader" style="font-size: 28pt;"><img height="70px" width="70px" align="center" style="margin-right: 15px;margin-top: -10px" src="/img/weather.png" />My Weather</h3><div id="WeatherData"></div></div>');

$("#AppsList").collapsibleset('refresh'); 
```

这部分再次起作用。新的标题出现在手风琴中就好了。

现在将内容添加到我使用的新部分：

```
 $.get('/apps/checkweather/currentweather.htm', function (data) {
        $('#WeatherData').append(data).trigger('create');
    }, 'html'); 
```

页面内容加载到该部分，但没有任何主题样式。（注意我正式尝试使用 load() 得到相同的结果。

我尝试向 WeatherData 及其父级 MyWeatherSection 甚至其父级 AppsList 添加刷新，但没有任何效果。

我在这里想念什么？

# objective-c - 为什么 NSOperations 和 sleep 不能正常工作？

> ID：10972273
> 
> 赞同：1
> 
> 时间：2012-06-10T20:54:45.677
> 
> 标签：objective-c, cocoa, concurrency, nsoperation, nsoperationqueue

在我的应用程序中，我使用操作来执行耗时的任务，因此我的用户界面不会冻结。为此，我使用 NSInvocationOperation。我想在实现代码以实际完成任务之前先测试整体架构，所以这就是我现在所拥有的：

```
// give the object data to process
- (void)processData:(NSObject*)dataToDoTask {

    ... // I store the data in this object

    NSInvocationOperation *newOperation =
    [[NSInvocationOperation alloc] initWithTarget:self
                                         selector:@selector(performTask)
                                           object:nil];

    [[NSOperationQueue mainQueue] addOperation:newOperation];

    ...

}

// process data stored in the object and return result
- (NSObject*)performTask {

    [NSThread sleepForTimeInterval:1]; // to emulate the delay
    return [NSString stringWithFormat:@"unimplemented hash for file %@", self.path];
} 
```

但是，睡眠并没有像我预期的那样工作：它没有延迟操作完成，而是冻结了应用程序。似乎我要么操作错误，要么睡眠不正确，但我不知道是哪个以及如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:10:15.163

那是因为您正在主线程上运行您的操作（与运行用户界面相同）。

如果您想同时运行您的操作，请创建一个新的操作队列：

```
NSOperationQueue * queue = [NSOperationQueue new];
[queue addOperation:newOperation]; 
```

# java - 基本转换：分数问题

> ID：10972276
> 
> 赞同：2
> 
> 时间：2012-06-10T20:54:57.523
> 
> 标签：java, hex, decimal, converter, number-systems

我编写了一个系统，能够将任何基数（2-36）转换为另一个整数基数，它可以将任何实数从基数 10 转换为任何其他基数（2-36）。

我的问题是将有理数/无理数从 10 以外的任何基数转换为另一个基数。

我使用以下算法进行小数点右侧的转换：

1) 取输入中小数点 (0.xxxxxx--->) 的右侧，并将其乘以要转换为的基数。

2）取大于一的数（点的左边），加到转换后的数的右边。

3）取乘积的右侧，在下一次重复中使用它作为乘数（它乘以基数）

4）重复直到满意或留下一个整数（右侧为0）。

这非常适合将任何浮点数从十进制转换为另一个基数，但显然您不能从非十进制的基数转换。

因此，我尝试将小数点右侧的初始值转换为以 10 为底，执行数学部分，然后在将其添加到输出值时将其转换回原始基数（之前已转换为新基数正在添加）。

不幸的是，这会返回小数点右侧的错误结果。因此，如果从不是以 10 为基数的基数转换，我的答案在左侧总是正确的，但在右侧是不正确的。

有没有人对如何使这项工作有任何想法？或者也许它不会？

**编辑**

或者，任何人都可以链接我/告诉我如何将有理的十六进制值转换为十进制吗？仅此一项就足以让我解决这个问题。

**解决方案**

对于将来阅读此问题的其他任何人，我发现了一个相当简单的解决此问题的方法。

您所要做的就是取小数点右侧的数字（无论它可能是什么基数）并将其转换为十进制（您可以[在此处](http://www.wikihow.com/Convert-from-Decimal-to-Hexadecimal)查看如何转换整数）。然后取该数字并除以其中的最大位值。例如：

```
A.C
C == 12 (dec)
12 / 16 = .75 (this is the fractional value in decimal) 
```

然后，您可以获取该小数并通过我上面讨论的算法运行它。

感谢大家在这个问题上的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:06:38.910

使用浮点意味着您不想执行准确的计算。

只有以 2、4、8、16 为基数编写的数字才能准确地用 Java[浮点值表示（](http://en.wikipedia.org/wiki/IEEE_754-2008)*不*考虑整数）。这是由于浮点表示的限制。

只有以 2, 4, 5, 8, 10, 16, 20, 25, 32,... 为基数的数字才能以十进制为基数准确打印。这是由于我们的[十进制数系统](http://en.wikipedia.org/wiki/Decimal)的限制。

因此，我希望您应该调整一些关于结果舍入的规则，并在整个算法中实施这些规则。确保您舍入而不是截断，否则即使`double`类型的精度足以满足您的目的，或者*可以*准确表示数字，通过浮点数也会给您不正确的结果。

如果您想以更高的精度执行计算，请查看`BigInteger`该类并专门以整数重新设计您的算法。或者，使用[库](https://stackoverflow.com/questions/474535/best-way-to-represent-a-fraction-in-java)来处理分数；这很有用，因为您的算法的输入总是可以准确地表示为分数。然而，最终它总是归结为定义结果舍入规则并正确实施它们。

**编辑**：

1.  正如我从评论中了解到的，您更喜欢在读取整个输入之前逐渐发出输出数字。这基本上是可能的，但是

    *   您需要保留一个区间，而不是单个数字，作为“累加器”；例如，如果到目前为止您已经阅读`0.1111`了三进制，那么您知道输出位于 and 之间`0.49382716`，`0.50617284`并且在此阶段您甚至无法发出小数点后的第一个十进制数字。这对于避免`0.4999999992`在最“理性”的输入上看到输出是必要的。

    *   当读取完整的输入时，“四舍五入”并根据区间的上限而不是下限发出输出更安全。三进制的这种方式`0.1111`将转换为十进制的 0.5。（如果您仅限于十六进制到十进制的转换，则可以忽略这一点。）

    *   跟踪输入达到的最大精度（间隔宽度的对数），并确保发出的输出数字不超过输入保证。

    *   使用可以安全处理所需的最大精度的区间端点（下限和上限）的内部表示。

    *   请记住，即使是非常流行的软件也偶尔会[错误](http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/)地了解该算法的细节，并避免在浮点数据类型中表示任何中间结果，**或者**将输入截断为可以安全表示的数字，如果它更长的话。

2.  您在问题中提到了无理数，但是无论使用什么基数，可以用有限（或周期性重复）扩展表示的每个数字都是有理数。

3.  在从十六进制到十进制的转换中，甚至可以始终准确地表示输出，这允许进行一些简化，例如无限期地等待下限和上限收敛。

# spring - Spring 集成有效负载表达式：带 args 的 SPEL 表达式

> ID：10972280
> 
> 赞同：0
> 
> 时间：2012-06-10T20:55:37.790
> 
> 标签：spring, spring-integration

我想在 spring 集成中有一个有效负载表达式来执行此操作：

```
#{T(java.util.Arrays).asList(#args[0],#args[1],#args[2])} 
```

我无法将 args 值作为 args。这样做的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T01:15:13.397

#{...} 语法用于 SpEL 表达式评估一次，同时初始化上下文。

在这种情况下，您只需要

```
payload-expression="T(java.util.Arrays).asList(#args[0],#args[1],#args[2])" 
```

# jsf - h:selectOneMenu 在循环中

> ID：10972284
> 
> 赞同：1
> 
> 时间：2012-06-10T20:55:59.313
> 
> 标签：jsf

我想记住 c:forEach 循环中多个 h:selectOneMenu 组件的值。现在只记得 h:selectOneMenu 的最后一个值。我不知道会出现多少 h:selectOneMenu。

```
<h:panelGrid 
                    id="wynik"
                    columns="2"
                    border="0" 
                    cellpadding="2" 
                    cellspacing="0" 
                    rowClasses="jsfcrud_odd_row,jsfcrud_even_row" 
                    rules="all" 
                    style="border:solid 1px">
                    <h:outputText id="ns" value="Numer stanowiska"/>
                    <h:outputText id="kontr" value="Kontroler"/>
                    <c:forEach 
                        var="stanowisko"
                        begin="1" 
                        end="#{stojakiController.selected.iloscstanowisk}"
                        step="1">
                        <h:column>
                            <h:outputText value="#{stanowisko}"/>
                        </h:column>
                        <h:column>
                            <h:selectOneMenu 
                                id="kontroler_#{stanowisko}" 
                                value="#{wyposazenieStojakaController.selected.kontroler}" 
                                title="#{bundle.CreateWyposazenieStojakaTitle_kontroler}" 
                                required="true" 
                                requiredMessage="#{bundle.CreateWyposazenieStojakaRequiredMessage_kontroler}">
                                <f:selectItems value="#{kontroleryController.itemsAvailableSelectOne}"/>
                            </h:selectOneMenu>
                        </h:column>
                    </c:forEach>
                </h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T00:22:04.020

这不是基于动态大小的集合呈现表格的正确方法。您将每一行的值绑定到**一个相同**的支持 bean 属性。每当每行需要设置值时，此属性都会被覆盖。这就是为什么你最终只得到最后一行的值。

您应该`<h:dataTable>`改用，而不是 a`<h:panelGrid>`和 a `<c:forEach>`。您应该准备一组具体的模型对象，而不仅仅是对象的大小。例如，

```
public class Item {

    private String value;

    // ...
} 
```

然后，在 backing bean 的（后）构造函数中，您应该准备尽可能多的内容。

```
public class Bean {

    private List<Item> items;

    @PostConstruct
    public void init() {
        items = new ArrayList<Item>();

        for (int i = 0; i < yourDesiredAmountOfItems; i++) {
            items.add(new Item());
        }
    }

    // ...
} 
```

这是一个基本的启动示例，您应该如何使用它：

```
<h:dataTable value="#{bean.items}" var="item">
    <h:column>
        <h:selectOneMenu value="#{item.value}">
            <f:selectItems value="#{bean.availableValues}" />
        </h:selectOneMenu>
    </h:column>
</h:dataTable> 
```

当您提交表单时，JSF 将在与该行关联的每个单独的项目对象中正确设置每一行的值。

# jquery - jQuery 灯箱和链接在布局中不起作用 - CSS 问题？

> ID：10972288
> 
> 赞同：0
> 
> 时间：2012-06-10T20:56:38.773
> 
> 标签：jquery

由于某种原因，链接和灯箱图像在此页面上不起作用：

[http://avisuals.web.fc2.com/pricing.html](http://avisuals.web.fc2.com/pricing.html)

链接将在底部页脚区域的内容框外有效，但在框内无效？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:00:43.420

这是因为您对盒子`z-index`施加了负面影响。`#content2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:01:02.187

`z-index: -1;`从文件`#content2`中的定义中删除`css`。

# git - 在 ubuntu 上商业使用 30 天后如何更改 SmartGit 的许可选项？

> ID：10972289
> 
> 赞同：122
> 
> 时间：2012-06-10T20:56:42.307
> 
> 标签：git, smartgit

在安装 smartgit 3.0.4 时，我检查了商业许可选项，因为我只是单击“下一步”按钮 :)（30 天试用期，然后您必须购买它）。今天是我使用 SG 的第 31 天，我无法更改我的许可选项（重新安装 smartgit 没有帮助），而且我无法在不付费的情况下使用 SG（我没有将其用于商业目的）。你知道如何解决吗？

我的 ubuntu 上没有这些文件：[http ://www.syntevo.com/smartgit/documentation.html?page=installation](http://www.syntevo.com/smartgit/documentation.html?page=installation)

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2013-01-09T04:54:59.790

我上网，我发现了这个：

更改许可证。首先，前往

视窗：`%APPDATA%\syntevo\SmartGit&lt;main-smartgit-version>`

Windows 便携式：`SmartGit\.settings\preferences.yml`

操作系统：`~/Library/Preferences/SmartGit/<main-smartgit-version>`

Unix/Linux：`~/.smartgit/<main-smartgit-version>`

并删除文件`settings.xml`。

如果您已多次更新，则可能还需要删除该`updates`文件夹。

它在 Windows 上帮助了我，希望它在其他系统上也能帮助你。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2019-10-14T23:11:49.600

从 19.1 版开始，它们已重命名文件名：

```
➜ SmartGit grep -rl 'listx' ./19.1
./19.1/preferences.yml
./19.1/.backup/preferences.yml 
```

可以删除它们以重置许可证设置。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2019-03-18T13:02:53.600

我使用linux，答案对我没有帮助。
我不得不删除该文件夹`~/.config/smartgit`以使其再次工作。这就是[文档所说的](http://www.syntevo.com/doc/display/SG/Installation+and+Files#InstallationandFiles-DefaultLocationofSmartGit%27sSettingsDirectorysettings-dir.default-location)

> SmartGit 设置目录的默认位置
> **Windows** %APPDATA%\syntevo\SmartGit\ (%APPDATA% 是在环境变量 APPDATA 中定义的路径)
> **Mac OS** ~/Library/Preferences/SmartGit/ (Finder 可能不会显示 ~/Libraries 目录默认情况下，但您可以从终端调用 open ~/Library)
> **Linux/Unix** ${XDG_CONFIG_HOME}/smartgit/ （如果未定义环境变量 XDG_CONFIG_HOME，则使用 ~/.config 代替）

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2020-05-08T11:15:03.470

对于**19.1 及以上版本，**转到指定目录并**删除**这些提到的文件：

1.  `C:\Users\UserName\AppData\Roaming\syntevo\SmartGit\20.1<smart-git-version>`

    *   **首选项.yml**
    *   **许可证文件**
2.  `C:\Users\UserName\AppData\Roaming\syntevo\SmartGit\20.1\.backup`

    *   **首选项.yml**

对于**以前的版本**，转到指定目录并**删除**提到的文件：

1.  `C:\Users\UserName\AppData\Roaming\syntevo\SmartGit\17<smart-git-version>`

    *   **设置.xml**

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-11-13T14:21:00.967

我自己在 Linux 上的解决方案（在 下）是从文件`~/.config/smartgit/19.1`中注释或删除行并重新打开程序。`listx``preferences.yml`

删除所有文件夹将使您重新配置所有内容（无用）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-10T19:52:46.387

了解您使用的是 linux 还是 windows 会很有帮助。在 linux 中，设置位于 ~/.smartgit/3。您可以尝试删除此文件夹。恕我直言，这在 Windows 中也值得一试。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-07-20T18:36:12.473

这是MAC PC的解决方案：

打开终端并输入以下命令以显示隐藏文件：

```
defaults write com.apple.finder AppleShowAllFiles YES 
```

之后使用查找器转到当前用户文件夹，然后您可以在其中看到隐藏类型的**库文件夹**

假设在我的情况下，用户名是“Delta”，所以文件夹路径是：

```
OS X: ~Delta/Library/Preferences/SmartGit/<main-smartgit-version> 
```

删除设置文件并将选项更改为非商业..

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-12-09T08:49:15.517

**对于 Linux 上的 19.1 以上版本，**

关闭 App 或 Smartgit 的任何窗口

去：

> /home/[用户名]/.config/smartgit/[当前或最新版本]

打开文件：

> 首选项.yml

搜索：

> "listx: {" 在这个文件中

你会发现这样的东西：

> listx：{ePP：1607503071922，eUT：-9223377036854775808，nRT：-9223377036854775808，eV：'20.1'，uid：emobf7q63s83}

所以现在你所需要的就是删除 {} 中的字符串，所以它会是这样的：

> 列表：{}

现在保存文件并启动 Smartgit。您将拥有所有存储库和其他首选项，并且您将被要求设置许可证类型。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-03-20T08:36:29.203

在 Mac 上：

*   首先转到`~/Library/Preferences/SmartGit/19.1`
*   第二个 goto`preferences.yml`文件，只是注释`listx`行
*   第三次开启智能git

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-03-02T10:30:59.583

我还在 ubuntu 上完成了第一次安装，并选择了默认的 30 天试用版而不是非商业版。

syntevo 网站上有一个博客[解决了这个问题](http://blog.syntevo.net/2012/11/27/1354013721080.html)。

解压 tar 文件后，我有一个名为 smartgithg-4_0_3 的目录。我将此文件夹移动到我的主目录并将其重命名为 smartgit。运行 ./bin/smartgithg.sh 后，创建了另一个名为 .smartgit 的文件夹（注意 . 前缀）。

我只是删除了 .smartgit 文件夹（包含所有 .xml 文件的目录树）并再次运行 ,/bin/smarthg.sh 脚本。重复整个安装过程。出现时选择非商业选项。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-01-16T11:15:39.163

通过导航到 %APPDATA%\syntevo\SmartGit\ 并删除所有 settings.xml，然后打开已安装的软件，可以正常工作

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-10-17T05:55:19.313

操作系统

```
cd ~/Library/Preferences/SmartGit/
sed -i '' '/listx/d' ./*/preferences.yml
rm */license 
```

Windows 可移植路径`preferences.yml`：

```
SmartGit\.settings\preferences.yml 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-24T07:48:52.553

最新版本的 SmartGit 包含安装文件夹下的设置。因此，要重置试用版，请转到安装文件夹，例如：

```
C:\Program Files\SmartGit 
```

并删除（重命名）`.settings`目录

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-23T13:16:08.197

适用于 Mac 的 2021 年新黑客：

*   首先转到 ~/Library/Preferences/SmartGit
*   第二删除你有什么版本我已经删除了整个20.1版本文件夹
*   第三次开启智能git

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-09-17T06:11:16.747

只需删除 settings.xml 并再次尝试设置 smartgitHg

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-25T21:53:58.823

我删除了整个 Config 文件夹，但保留了文件**repositories.yml repository-cache repository-grouping.yml**。运行 SmartGit 后，它创建了配置文件夹（我认为它使用了旧版本中的配置（以保存我的 git 凭据之类的东西）），然后我复制回了我的三个文件，我拥有了我所有的存储库，这是最重要的信息我需要。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-05T18:04:57.410

在过去的 13 年里，我一直在使用 Windows。我发现这个解决方案真的对我有用。我建议您按照以下步骤操作：

*   让我们从删除这个文件夹开始 `C:\Users\Your-name\AppData\Roaming\syntevo`

*   从控制面板彻底卸载smart git，卸载程序。

*   再次重新安装 smart git 并更改安装目录的默认位置。

*   在配置智能 git 时，请确保选择了非商业选项，这将帮助您终生使用最新版本和免费版本。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-16T17:55:15.130

对于 mac 用户：在新版本中没有 setting.xml，替代方法是

**使用终端导航到 SmartGit 首选项文件夹**

```
cd /Library/Preferences/SmartGit/ 
```

使用`ls`命令查看文件夹列表.. 只需删除使用命令找到的 SmartGit 版本文件夹，`rm -r <main-smartgit-version>`然后重新打开 SmartGit 应用程序。:)

# c++ - C++ 检查标头是自给自足的

> ID：10972292
> 
> 赞同：2
> 
> 时间：2012-06-10T20:57:09.427
> 
> 标签：c++, include, dependencies, header-files

是否有工具可以解析 C++ 项目并决定头文件是否自给自足：即，如果文件 Foo.cc（或 Foo.h）提到某个类 Bar（例如向量），那么它本身包含一个定义该类的头文件（定义 Bar 的文件，例如`<vector>`）？

编辑：我想澄清一下：如果头文件 Foo.h 提到向量并且其中一个包含已经包含的向量，编译器会很高兴。我不想要那个。如果 Foo.h 完全提到了向量，它应该直接包含它而不依赖于另一个标题。编译器能捕捉到这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T21:05:56.883

编译器将为您执行此操作。由于这个原因，许多 C++ 风格指南强烈建议所有 .cpp 文件都应包含相应的标头作为第一个实质性包含指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:31:52.017

我为此使用了一个脚本。这是一个简化版本：

```
#!/usr/bin/env bash
# hcheck: Check header file syntax (works on source files, too...)
if [ $# -eq 0 ]; then
    echo "Usage: $0 <filename>"
    exit 1
fi

for f in "$@" ; do
    case $f in
        *.c | *.cpp | *.cc | *.h | *.hh | *.hpp )
            echo "#include \"$f\"" > hcheck.cpp
            printf "\n\033[4mChecking $f\033[0m\n"
            make -s hcheck.o
            rm -f hcheck.o hcheck.cpp
            ;;
    esac
done 
```

当然，你需要有一个`Makefile`。如果您不想这样，则用`make`适当的`gcc`命令替换该行（不要忘记任何标志！）。如果您`Makefile`将对象放在当前目录以外的位置，您还需要对其进行调整。

我敢肯定，还有很多需要改进的地方。当我告诉人们这件事时，下意识的反应是“编译头文件是一个愚蠢的想法”，但它对我来说效果很好，可以用于没有源代码或源代码中没有首先包含的头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:36:07.687

减轻实现自给自足标头目标的负担的一种方法是确保在那里声明的任何类（通常）或自由函数（有时）都有非常具体的意图，如坚持单一责任原则。通过这样做，需要包含标头的依赖项将会减少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:36:09.903

我不知道有这样的工具。这个问题并不像看起来那么容易解决。例如，以下应包含哪些头文件才能自给自足？

```
#ifdef FOO
  std::vector<int> getVector();
#endif

  void doStuff(std::string); 
```

它可能需要也可能不需要包括`<vector>`. 这取决于是否`FOO`已定义，并且可能已定义或未定义，*具体取决于此文件之前包含的内容*。

通常，预处理器宏确实会干扰任何“孤立”读取标头的尝试。

# php - PHP Date 或 TimeStamp 函数检查同一天、同一周或一周以上的时间

> ID：10972294
> 
> 赞同：0
> 
> 时间：2012-06-10T20:57:38.237
> 
> 标签：php, date, time

对于 PHP，给出年份的函数。

```
 $date = date('n/j/Y', $time);
  echo $date; 
```

或表示为时间戳

```
 $time = strtotime($date);
   echo $time; 
```

基本上我希望我的帖子列表超过一周时的月/日/年。并列为星期一，星期二......一周中的一天，当帖子在一周内时。并且当发布是在同一天之内时，则表示几小时前或几分钟前。

我是否需要使用时间戳进行减法以查看经过的时间？它确实如何将其恢复为同一天或同一周内过去的时间？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:04:07.587

```
$currentTime = time();
if ($currentTime < strtotime('1 year ago', $currentTime) {
  echo "at least a year old";
} else if ($currentTime < strtotime('1 month ago', $currentTime) {
  echo "at least a month old (but not a year)";
} else if ($currentTime < strtotime('1 week ago', $currentTime) {
  echo "at least a week old (but not a month)";
} else if ($currentTime < strtotime('1 day ago', $currentTime) {
  echo "at least a day old (but not a week)";
} 
```

# mysql - Ruby on Rails Mysql on ubuntu

> ID：10972298
> 
> 赞同：1
> 
> 时间：2012-06-10T20:58:18.220
> 
> 标签：mysql, ruby-on-rails, ubuntu-11.10

我正在尝试在 Ubuntu 环境中使用 mysql 数据库开发 ruby​​ on rails 应用程序。我已经成功安装了rails和mysql。但是当我尝试生成模型时，它会报告消息

```
 rails g model person
      invoke  active_record
/home/meuser/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the mysql adapter: `gem install activerecord-mysql-adapter` (mysql is not part of the bundle. Add it to Gemfile.) (LoadError) 
```

然后我尝试安装activerecord-mysql-adapter：

```
meuser@ubuntu:~/myproject$ gem install activerecord-mysql-adapter
ERROR:  Could not find a valid gem 'activerecord-mysql-adapter' (>= 0) in any repository
ERROR:  Possible alternatives: activerecord-jdbcmysql-adapter, activerecord-jdbcmssql-adapter, activerecord-fb-adapter, activerecord-odbc-adapter, activerecord-jdbc-adapter
meuser@ubuntu:~/myproject$ 
```

由以下答案发起，我也尝试了这个：

```
meuser@ubuntu:~/myproject$ gem "mysql2", "< 0.3"
ERROR:  While executing gem ... (RuntimeError)
    Unknown command mysql2,
meuser@ubuntu:~/myproject$ 
```

和这个：

```
meuser@ubuntu:~/myproject$ gem 'mysql2'
ERROR:  While executing gem ... (RuntimeError)
    Unknown command mysql2
meuser@ubuntu:~/myproject$ 
```

和这个：

```
meuser@ubuntu:~/myproject$  gem install "mysql2" -v=2.8.17
ERROR:  Could not find a valid gem 'mysql2' (= 2.8.17) in any repository
ERROR:  Possible alternatives: mysql2
meuser@ubuntu:~/myproject$ 
```

和这个：

```
meuser@ubuntu:~/myproject$ sudo apt-get install libmysql-ruby libmysqlclient-dev
[sudo] password for meuser: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libmysqlclient-dev is already the newest version.
libmysql-ruby is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
meuser@ubuntu:~/myproject$ gem "mysql2", "< 0.3"
ERROR:  While executing gem ... (RuntimeError)
    Unknown command mysql2,
meuser@ubuntu:~/myproject$ 
```

这是我的 database.yml 文件

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  pool: 5
  database: myproject_db
  username: root
  password: somepassword
  host: localhost
  socket: /var/run/mysqld/mysqld.sock 
```

有谁知道这个问题的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:11:50.280

适配器 gem 被称为“mysql2”，你需要将它添加到你的 gemfile 中：

```
gem 'mysql2' 
```

然后运行`bundle`命令并编辑您的 database.yml 文件以指向正确的数据库：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: yourapp_development
  pool: 5
  username: root
  password:
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T21:09:14.043

尝试在版本 < 0.3 中安装 mysql2 gem，例如 0.2.8，这是常见问题。

在 Gemfile 类型中

```
gem "mysql2", "< 0.3" 
```

# ruby-on-rails - 在 Rails 中，使用 check_box_tag，如何在提交查询后保持复选框处于选中状态？

> ID：10972300
> 
> 赞同：3
> 
> 时间：2012-06-10T20:58:36.470
> 
> 标签：ruby-on-rails, ruby, activerecord, rails-models

好的，我知道这是针对 Saas 课程的，人们也一直在问与此相关的问题，但我花了很多时间尝试和阅读，但我被困住了。首先，当您有一个名为 Movie 的模型时，最好使用 Ratings 作为模型并将它们关联起来，还是将 Ratings 保留在一个浮动在空间中的数组中（！）。其次，这是我现在在控制器中的内容：

```
def index

@movies = Movie.where(params[:ratings].present? ? {:rating => (params[:ratings].keys)} :   {}).order(params[:sort])
@sort = params[:sort]
@ratings = Ratings.all

end 
```

现在，我决定创建一个 Ratings 模型，因为我认为它会更好。这是我的看法：

```
= form_tag movies_path, :method => :get do

Include:
- @ratings.each do |rating|
 = rating.rating
 = check_box_tag "ratings[#{rating.rating}]"
= submit_tag "Refresh" 
```

我尝试了与在以“ .include?(rating) ? true : "" 结尾的复选框标记中使用条件三元相关的所有内容，我只需要指导。提前谢谢！

**更新（控制器的方法）：**

这是我的控制器中读取此哈希的索引方法 - 为清楚起见。我为之前的模糊性道歉。

```
def index    
  @all_stores = Product.all_stores
  @selected_stores = params[:stores] || session[:stores] || {}

  if @selected_stores == {}
    @selected_stores = Hash[@all_stores.map {|store| [store, store]}]
  end
  if params[:stores] != session[:stores]
    # session[:stores] = @selected_stores
    session[:stores] = params[:stores]
    redirect_to :stores => @selected_stores and return
  end
  @products = Product.order("created_at desc").limit(150).find_all_by_store(@selected_stores.keys).group_by { |product| product.created_at.to_date}
. . . etc 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T22:05:16.607

几件事

1)`.order(params[:sort])`为您打开 sql 注入攻击，有人可能会通过将其放入查询字符串中删除您的所有用户

`http://localhost:3000/movies?sort=email%3B+DELETE+from+users+--`

请参阅[rails 3 activerecord order - 什么是正确的 sql 注入工作？](https://stackoverflow.com/questions/7771103/rails-3-activerecord-order-what-is-the-proper-sql-injection-work-around)，.where 不存在此问题，rails 将清理 where 方法的输入

2）次要的事情，AREL延迟对数据库的实际调用，直到您迭代集合，所以您可以“构建”查询，这种语法可能比使用三元运算符更容易理解？

```
@movies = Movie.order(xxxxxx)
@movies = @movies.where(:rating => params[:ratings].keys) if params[:ratings].present? 
```

3）对于您的收视率，就像 cdesrosiers 说常数很好，那么您的观点

```
Movie::RATINGS.each do |rating|
  check_box_tag "ratings[]", rating # <input type="checkbox" name="ratings[]" value="PG" /> 
```

**编辑：**保持选定的值

```
# controller
@selected_ratings = (params[:ratings].present? ? params[:ratings] : [])

# view
Movie::RATINGS.each do |rating|
  check_box_tag "ratings[]", rating, @selected_ratings.include?(rating)
  # <input type="checkbox" name="ratings[]" value="PG" checked="checked" /> 
```

请注意复选框命名中的 []，这将为您提供 params[:ratings] 作为控制器操作中的数组

```
@movies = @movies.where("rating IN (?)", params[:ratings]) if params[:ratings].present? and params[:ratings].any? 
```

一些链接

*   [http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)
*   [http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)

# ruby-on-rails - 如何在 ruby on rails 中显示选择字段值而不是它们关联的存储整数？

> ID：10972302
> 
> 赞同：0
> 
> 时间：2012-06-10T20:58:42.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

例如，我允许我的用户在表单中选择他们的性别和婚姻状况，然后发布该表单，以便他们的选择存储在数据库中。

**表单可能如下所示：**

```
<select id="profile_marital_status" name="profile[marital_status]"><option value=""> Select</option>
<option value="1">Single</option>
<option value="2" selected="selected">Dating</option>
<option value="3">In relationship</option>
<option value="4">Married</option>
<option value="5">Living Together</option>
<option value="6">Divorced</option>
<option value="7">Separated</option>
<option value="8">Widowed</option></select><br /> 
```

要访问它并在视图中显示存储的数据，我会这样做@profile.marital_status。问题是它将显示存储在数据库中的内容，这将是一个整数。

为了解决这个问题，我目前正在使用辅助方法：

```
def get_gender(number)
  if number == 1
    'Male'
  elsif number == 2
    'Female'
  end
end

def get_marital_status(number)
  if number == 1
    'Single'
  elsif number == 2
    'Dating'
  elsif number == 3
    'In relationship'
  elsif number == 4
    'Married'
  elsif number == 5
    'Living Together'
  elsif number == 6
    'Divorced'
  elsif number == 7
    'Separated'
  elsif number == 8
    'Widowed'
  end
end 
```

**然后在视图中：**

```
= get_gender(@profile.gender)
= get_marital_status(@profile.marital_status) 
```

但这似乎是错误的，因为当我进入需要显示用户注册国家/地区的阶段时，我看不到自己输入带有国家/地区列表的长 if 语句。

必须有一种更实用、更明智的方法来做到这一点。对于如何显示选择字段值（例如“男性”而不是存储在数据库中的值（例如 1 或“女性”2））的任何解决方案，我将不胜感激。

更新：

**在我的 ApplicationsHelper 中，我将国家/地区的完整列表存储在一个数组中：**

```
 COUNTRY_AND_ISO_CODE   = [
      ['Any', nil],
      ['United Kingdom', 826],
      ['United States', 840],
      ['-----------', ' '],
      ['Afghanistan', 4],
      ['Ãland Islands', 248],
      ['Albania', 8],
      ['Algeria', 12],
      ['American Samoa', 16],
      ['Andorra', 20],
      ['Angola', 24],
      ['Anguilla', 660],
      ['Antarctica', 10],
      ['Antigua and Barbuda', 28],
      ['Argentina', 32],
      ['Armenia', 51],
      ['Aruba', 533], 
```

**在我看来：**

```
= ApplicationHelper::COUNTRY_AND_ISO_CODE[@profile.country] 
```

**在我看来显示此结果：**

```
 ["Sudan", 729] 
```

我只需要弄清楚如何只提取国家名称，或者如何过滤除字符串之外的所有内容。

几个月前，我已经输入了国家名称及其 ISO 代码的完整列表，这样可以节省大量时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:10:34.793

首先，您的代码可以重构为使用`case`：

```
def get_gender(number)
  case number
  when 1 then 'Male'
  when 2 then 'Female'
  end
end

def get_marital_status(number)
  case number
  when 1 then 'Single'
  when 2 then 'Dating'
  when 3 then 'In relationship'
  when 4 then 'Married'
  when 5 then 'Living Together'
  when 6 then 'Divorced'
  when 7 then 'Separated'
  when 8 then 'Widowed'
  end
end 
```

其次，`<option>`标签的内容不随表单提交，所以在服务器上绝对没有办法访问它们。您有以下选择：

*   让它保持原样。
*   将存储在数据库中的值更改为实际的字符串值而不是数字，这样您就可以以数据库中的一些空间为代价来消除混淆。
*   非规范化字段，为值创建一个单独的表，因此存储的数字现在是另一个表中的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:48:49.443

这是我的解决方案。几个月前我创建了数组来处理用户配置文件详细信息的编辑，所以我利用了这些数组并使用数据库中存储的整数得到了我想要的结果。

**在我的 ApplicationsHelper 中，我将国家/地区的完整列表存储在一个数组中：**

```
 COUNTRY_AND_ISO_CODE   = [
      ['Any', nil],
      ['United Kingdom', 826],
      ['United States', 840],
      ['-----------', ' '],
      ['Afghanistan', 4],
      ['Ãland Islands', 248],
      ['Albania', 8],
      ['Algeria', 12],
      ['American Samoa', 16],
      ['Andorra', 20],
      ['Angola', 24],
      ['Anguilla', 660],
      ['Antarctica', 10],
      ['Antigua and Barbuda', 28],
      ['Argentina', 32],
      ['Armenia', 51],
      ['Aruba', 533], 
```

**在我看来：**

```
= ApplicationHelper::COUNTRY_AND_ISO_CODE[@profile.country].first 
```

**在我看来显示此结果：**

```
 United Kingdom 
```

# c++ - C++ 中的直接赋值运算符

> ID：10972303
> 
> 赞同：1
> 
> 时间：2012-06-10T20:58:46.363
> 
> 标签：c++, operator-overloading

我正在使用 C++ 中的运算符重载，特别是赋值运算符“=”。

所以，一次，我能够做到这一点：

```
MyClass var1;
var1 = "string"; 
```

但是，当我尝试这样做时，它给了我一个错误：

```
MyClass var2 = "string"; 
```

有人知道为什么吗？我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:00:38.273

第二个示例不是调用`operator=`，而是调用 的转换构造函数`const char []`，或者您将在内部使用它的任何东西，只要它可以从那个（例如`std::string`）转换，目前还不存在。您可以在 std''OrgnlDave 的答案中看到一个实现。它几乎与

```
MyClass var2 ("string"); 
```

但是，后者是显式的，而前者是隐式的。要查看差异，请创建一个构造函数并标记它`explicit`。这里的代码可以工作，但你的不行。例如，当您意外传递一个字符串而不是 a 时，这可以避免混淆`MyClass`，并且当它最初甚至不应该是 a 时，它会被隐式转换`MyClass`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:01:08.187

您需要为您的类创建一个构造函数，第二个示例是调用构造函数。

```
class MyClass {
  public:
    MyClass(const std::string& what) {  } // copy string
}; 
```

# android - 如何调试“DialogError：与服务器的连接不成功”错误？

> ID：10972305
> 
> 赞同：2
> 
> 时间：2012-06-10T20:58:52.960
> 
> 标签：android, facebook, facebook-authentication, facebook-android-sdk

很遗憾，这个问题被问了好几次，都没有正确回答。

许多人在尝试授权应用程序时出现此错误，人们不得不说的唯一提示是重新启动手机或删除缓存。

现在，这可能对几个人有用，但这并不是一个真正的解释，也不是一个严肃的解决方案。

网络上没有关于此错误的解释，所以我希望有人可以解释不同的错误编号，这样我就可以找出我的问题出在哪里，并在不同类型的错误上建立某种数据中心，因为没有人解释.

到目前为止我在主题和我的主题中发现的错误：

*   我的：**1358**或**891**似乎是随机的
*   749
*   417 - 这个错误在一个主题中被解释为：

> 错误 - 417 预期失败
> 
> 417 状态码表示服务器无法正确完成请求。发送到服务器的标头之一，即“Expect”标头，表示服务器无法满足的期望。

有人可以解释任何这些错误或任何一般提示吗？

对于我的问题，我正在使用文档中发布的授权方法的标准代码，

日志猫：

```
 06-10 23:48:11.872: D/Facebook-WebView(1358): Webview loading URL: https://m.facebook.com/dialog/oauth?type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&client_id=MYAPPID
06-10 23:48:11.884: W/webcore(1358): Can't get the viewWidth after the first layout
06-10 23:48:11.899: V/webview(1358): OnSizeChanged: Enter 
06-10 23:48:11.903: D/Facebook-authorize(1358): Login failed: com.facebook.android.DialogError: The connection to the server was unsuccessful
06-10 23:48:11.903: D/Facebook-WebView(1358): Webview loading URL: https://m.facebook.com/dialog/oauth?type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&client_id=MYAPPID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:39:01.570

我有同样的错误。

Facebook 应用程序（不是我正在开发的那个）似乎无法正常工作，更确切地说，它没有连接到互联网。

这就是我解决它的方法：

1.  我从**Settings->Applications->Manage applications->Facebook->Clear Data**清除了 Facebook 应用程序数据；
2.  打开 Facebook 应用并登录；
3.  打开我的应用程序并出现登录对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:39:37.777

在集成 facebook 身份验证时，我也遇到了类似的问题。问题是我的模拟器由于某些原因没有连接到互联网。

最后我通过以下步骤解决了这个问题：

在 Eclipse 中：

1.  右键单击Android项目
2.  转到运行配置-> 选择目标
3.  在底部，您可以找到“**附加模拟器命令行选项**”
4.  输入命令“ **-dns-server XXXX** ”（XXXX 是我的 DNS 服务器的 IP 地址）。

注意：我的环境是 Mac OS X 10.8 和 eclipse indigo..

参考： [如何将安卓模拟器连接到互联网](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)

感谢@Jeremy Kie

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:46:53.523

好吧，问题是我没有在设备上启用互联网连接，也没有注意到。

所以我猜错误 1358 和 891 meen 没有可用的连接。

# asp.net-mvc - MVC 逻辑应该去哪里控制器或视图模型

> ID：10972306
> 
> 赞同：6
> 
> 时间：2012-06-10T20:58:56.987
> 
> 标签：asp.net-mvc

我有一个 MVC 应用程序，我想在其中显示一个包含数据库信息的下拉列表。

下拉列表将使用汽车制造商表 Make 显示来自数据库 Cars 的信息。

所以在我看来，我会有类似的东西：

```
@model VectorCheck.ViewModels.CarsViewModel
...

@Html.DropDownListFor(modelItem => Model.MakeId, Model.Makes)
... 
```

所以我需要以某种方式获取视图模型的制作列表。

所以我可能有一些逻辑去说只有红色的汽车。

```
var redCars = _unitOfWork.Cars(x => x.Colour == "Red"); 
```

所以我的问题是将这个查询的逻辑放在哪里的最佳实践。它应该进入 viewModel 还是控制器。

我看到它的方式有两个选项。

选项 1：控制器。

```
public ActionResult Edit(int id)
        {
            var car = _unitOfWork.CarRepository.Get(id);

            var carMakes = _unitOfWork.CarMakeRepository.Where(x => x.Colour == "Red").Select(u => new SelectListItem { Value = u.CarMakeId.ToString(), Text = u.Name });

            return View("Edit", new InsertUpdateCarViewModel(car, carMakes));
        } 
```

视图模型

```
public Car Car { get; set; }
public IEnumerable<SelectListItem> CarMakes { get; set; }

InsertUpdateCarViewModel(Car car, IEnumerable<SelectListItem> carMakes)
{
   Car= car;
   CarMakes = carMakes;

} 
```

所以在这个例子中，我在控制器中获取 carMakes 并将它们提供给 viewModel，它只是一个容器。

Opon 2：视图模型

```
public ActionResult Edit(int id)
        {
            var car = _unitOfWork.CarRepository.Get(id);

            return View("Edit", new InsertUpdateCarViewModel(car));
        } 
```

视图模型

```
public Car Car { get; set; }
public IEnumerable<SelectListItem> CarMakes { get; set; }

InsertUpdateCarViewModel(Car car)
{
   Car= car;

   CarMakes = _unitOfWork.CarMakeRepository.Where(x => x.Colour == "Red").Select(u => new SelectListItem { Value = u.CarMakeId.ToString(), Text = u.Name });

} 
```

所以在这个选项中，我将逻辑放在视图模型中获取正确的汽车制造商。它不仅仅是一个容器。

所以我想知道的是这些方法中的哪一种是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:07:35.947

正如已经回答的那样，它是控制器。为了让你更难忘，我会这样说。不要让您的视图直接与数据库对话。View 仅询问/与控制器交谈。那么显然，视图向控制器发送请求，控制器将请求转发到数据库是有意义的。希望这对未来有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:01:58.113

在控制器中。ViewModel 不应该知道您正在使用的工作单元。此外，在这种情况下，如果视图模型不必依赖逻辑，它的可重用性会更高`x => x.Colour == "Red"`。尽管这可以转移到参数中，但总的来说，我相信您的模型（以及因此的视图）将在控制器中更易于重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:04:02.683

任何答案都是非常主观的，但我建议`_unitOfWork`在您的视图模型中拥有参考（或任何需要注入的依赖项）相当暴力分离关注点。

将其保存在控制器中 - 更清洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:01:37.273

您应该将逻辑添加到控制器。在 MVC 中，ViewModel 是一个包含视图中使用的属性的对象，其中没有业务逻辑。

# c - 在后台 C linux 中运行一个新的子进程

> ID：10972310
> 
> 赞同：0
> 
> 时间：2012-06-10T20:59:53.857
> 
> 标签：c, linux, process, background, fork

我正在尝试在后台运行一个新进程，以便可以继续使用父进程。

我用fork然后execl。我试图在 execl 命令中添加参数 & 但它不起作用：

```
execl("newproc","newproc","arg1","&",NULL); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T21:19:41.680

自从您使用`fork`. 子进程将继续与父进程并行运行（如果`exec`成功）。如果您关心子进程是否成功（并且您的代码应该），您最终应该调用`waitpid`以收集其退出状态。否则，您应该调用`fork` *两次*并让中间进程退出而无需`wait`为子进程退出，以便`init`采用孙进程。

正如@mah 所说，这`&`是不必要的。但是该行需要进行另一项更改；`execl`是一个可变参数函数，因此函数原型不负责将参数转换为正确的类型。因此，最后一个参数应该作为正确的类型传递——只需将其更改为`(char*)NULL`.

您提到您的代码不起作用。虽然这可能只是因为 spurious `&`，但也可能是因为第一个论点。该`execl`函数不搜索`$PATH`命名程序，因此除非`newproc`实际上在当前目录中，否则此`execl()`调用将返回。返回时`execl`，始终表明存在问题。解决此问题的最简单方法是使用`execlp()`而不是`execl()`. 另一种方法是指定绝对路径作为第一个参数。您甚至可以指定一个相对路径作为第一个参数，但这很少有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T21:06:08.427

`&`不是命令参数，它是 shell 用来知道在后台运行命令的标志。在这种情况下，您正在执行外壳的工作...删除`&`. 既然你说你已经调用`fork()`了，只要你只`execl()`在 fork 返回后在子进程中执行，你就已经在后台运行了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T21:06:16.463

问题是这`&`不是程序的命令行选项。相反，它只是将命令置于后台的特殊 shell 语法。后台程序的显着特点是它们没有连接到终端，并且终端不等待进程完成。正确的功能是`daemon()`。做一个`man daemon`阅读它是如何使用的。

# regex - 正则表达式应匹配链接文本和未链接文本

> ID：10972311
> 
> 赞同：0
> 
> 时间：2012-06-10T21:00:09.537
> 
> 标签：regex

我有这个正则表达式：

```
<li><i>(?:<a.*?>)?(.*)(?:<.*?>)?</i></li> 
```

现在，这应该与此文本匹配：

```
<li><i><a href="hello.htm">Hi there</a></i></li> 
```

或者没有`<a>`标签，像这样：

```
<li><i>42nd Street</i></li> 
```

没有`<a>`标签，正则表达式工作得很好，问题是，在第一个例子中，我得到了这个匹配：

```
Hi there</a> 
```

我读过关于忽略分组的文章，`(?:regex)`但我不知道为什么它坚持包含结束`</a>`标签什么正则表达式会忽略结束`</a>`标签，所以我只会在**那里得到你好**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:04:23.763

`(.*)`您正在捕获的 是贪婪的，并且在`(?:<.*?>)?`它之后是可选的，因此`(.*)`将始终包含`</a>`. 要解决此问题，请将其更改`.*`为`.*?`惰性（匹配尽可能少的字符：

```
<li><i>(?:<a.*?>)?(.*?)(?:<.*?>)?</i></li> 
```

[但不要使用正则表达式解析 HTML。](https://stackoverflow.com/a/1732454/505154)

# algorithm - 众所周知的二进制 (WKB) 到十进制纬度/经度

> ID：10972314
> 
> 赞同：2
> 
> 时间：2012-06-10T21:00:26.723
> 
> 标签：algorithm, gis, java

geoDB 中有一个表，其中包含众所周知的二进制 (WKB) 数据格式的字段。我想从这个二进制数据中以独立于 DB 的正常十进制格式获取纬度和经度（例如使用 Java）。这种转换是否存在任何库或代码示例？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:47:42.883

不确定您是否找到了解决方案，但我找到了一个免费的 Java 库。信息[在这里](http://www.vividsolutions.com/jcs/)和下载页面[在这里](http://www.vividsolutions.com/jts/download.htm)。

据我所知，它支持 WKB 和 WKT 以及其他一些。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:13:01.503

使用 AsText(Geometry) 函数从几何字段中选择数据。这为您提供了纹理表示中的几何对象。如果您必须在网页上绘图，请使用 AsSVG(Geometry) 并将数据作为 SVG

# c# - C# 用 n 个字节填充字符串并将其写出

> ID：10972319
> 
> 赞同：1
> 
> 时间：2012-06-10T21:00:50.017
> 
> 标签：c#

我正在使用`BinaryWriter`.
现在我正在写出一个将被填充到 256 个字节的字符串，用空字节来弥补剩余空间（例如：字符串“hello world”占用 11 个字节，所以我需要再写 245 个空字节） .

当前的方法是正常写出字符串，计算字符串的长度并从 256 中减去它以获得所需的空字节数，然后使用 for 循环写出所有这些空值。

但也许最好先构建我的空填充字符串，然后一次将其全部写出来。如何将空字节填充到长度为 n 的字符串？

我猜它们将是空字符而不是空字节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:04:22.077

尝试使用[PadRight](http://msdn.microsoft.com/en-us/library/36f2hz3a.aspx)功能：

```
string result = "Hello World".PadRight(256, '\0');
// TODO: write the resulting string using the binary writer 
```

# c++ - 敌人幽灵实例/非唯一对象

> ID：10972322
> 
> 赞同：0
> 
> 时间：2012-06-10T21:01:04.047
> 
> 标签：c++, directx-9

我正在用 C++ 开发一个简单的 2D 自上而下的塞尔达风格游戏，但是我无法让一个敌人类的多个实例生成。每当我生成多个敌人时，只有第一个会注册任何碰撞检测; 所有其他敌人似乎只是呈现在屏幕上的视觉“幽灵”。当第一个敌人死去时，唯一一个可以死的，那么所有其他“鬼魂”也随之消失。

我创建了一个敌人管理器类，它使用矢量列表来保存活动的敌人，检查每个人与传入的任何框的碰撞，并更新/渲染敌人。

```
class cEnemyMgr {
public:
std::vector<cEnemy*> mobList;

cEnemyMgr(){}
~cEnemyMgr(){
    for (int i=0; i < mobList.size(); i++) {
        mobList[i]->texture.Close();
            //delete mobList[i];
    } 
}

    void render() {
        for (int i=0; i < mobList.size(); i++) {
            mobList[i]->render();
        }
    }

    void update(float dt){
        for (int i=0; i < mobList.size(); i++) {
            if ( mobList[i]->hp <= 0 ){
                mobList[i]->die();
                mobList.pop_back();
            } else {
                mobList[i]->update(dt);
            }
        }
    }

    void spawnMob(int x, int y){
        cEnemy* pEnemy = new cMeleeEnemy();
        pEnemy->init(x, y);
        mobList.push_back(pEnemy);
    }

    cEnemy* checkCollisions(int x, int y, int wd, int ht){
        for (int i=0; i < mobList.size(); i++) {
            int left1, left2;
            int right1, right2;
            int top1, top2;
            int bottom1, bottom2;

            left1 = x;
            right1 = x + wd;
            top1 = y;
            bottom1 = y + ht;

            left2 = mobList[i]->pos.x;
            right2 = mobList[i]->pos.x + 64;
            top2 = mobList[i]->pos.y;       
            bottom2 = mobList[i]->pos.y + 64;

            if ( bottom1 < top2 ) { return NULL; }
            if ( top1 > bottom2 ) { return NULL; }
            if ( left1 > right2 ) { return NULL; }
            if ( right1 < left2 ) { return NULL; }

            return mobList[i];
        }
    }
}; 
```

敌人类本身非常基础。cEnemy 是基类，从中派生出 cMeleeEnemy。它具有标准的 hp、dmg 和移动变量，因此它可以在屏幕上爬行以尝试与玩家的化身碰撞并响应玩家的攻击。所有这一切都很好，只是当我尝试拥有多个敌人时，只有第一个生成的敌人可以正常工作，而其余的都是空壳，只是屏幕上的纹理。无论我是在同一个块中快速显式调用 spawnMob 还是使用计时器动态地将它们间隔开，都没有关系；结果是一样的。谁能指出我正确的方向？

--EDIT-- 这是enemy.h的代码：

```
#ifndef ENEMY_H
#define ENEMY_H

#include "texture.h"
#include "timer.h"

#define KEY_DOWN(vk_code) ((GetAsyncKeyState(vk_code) & 0x8000) ? 1 : 0)

class cEnemy {
public:
int hp;
int dmg;
D3DXVECTOR2 pos;
D3DXVECTOR2 fwd;
D3DXVECTOR2 vel;
D3DCOLOR color;
int speed;
float rotate;
bool hitStun;
float hitTime;
CTexture texture;

virtual void init(int x, int y) = 0;
virtual void update(float dt) = 0;
virtual void die() = 0;

void render(){
    texture.Blit(pos.x, pos.y, color, rotate);
}

void takeDamage(int dmg) {
    if (hitStun == false){
        extern CTimer Timer;        
        hitTime = Timer.GetElapsedTime();
        hp -= dmg;
        color = 0xFFFF0000;
        hitStun = true;
    }
}

void hitStunned(float duration) {
    extern CTimer Timer;
    float elapsedTime = Timer.GetElapsedTime();
    if ( elapsedTime - hitTime > duration ){
        color = 0xFFFFFFFF;
        hitStun = false;
    }
}

};

class cPlayer : public cEnemy {
public:
int facing;

void init(int x, int y);
void update(float dt);
void die();

};

class cMeleeEnemy : public cEnemy {
public:
cMeleeEnemy(){}
~cMeleeEnemy(){
    texture.Close();
}

void init(int x, int y);
void update(float dt);
void die();

};
#endif 
```

和敌人.cpp：

```
#include "enemy.h"

void cPlayer::update(float dt){
// Player Controls
if ( KEY_DOWN('W') ) {
    pos.y -= speed * dt;
    facing = 0;
} else if( KEY_DOWN('S') ) {
    pos.y += speed * dt;
    facing = 2;
}

if ( KEY_DOWN('A') ) {
    pos.x -= speed * dt;
    facing = 3;
} else if( KEY_DOWN('D') ) {
    pos.x += speed * dt;
    facing = 1;
}

// Hit Recovery
if ( hitStun == true ) {    
    hitStunned(1.0);
}
}

void cMeleeEnemy::update(float dt){
extern cPlayer player1;
extern int ScreenWd;
extern int ScreenHt;

D3DXVECTOR2 dir;
dir = player1.pos - pos;
D3DXVec2Normalize(&dir, &dir);
//fwd = (fwd * 0.2) + (dir * 0.8);
fwd = dir;
vel = vel + fwd * speed * dt;

pos = pos + vel * dt;

//keep em on screen
if ( pos.x < 0 ) { pos.x = 0; }
if ( pos.x > ScreenWd - 64 ) { pos.x = ScreenWd - 64; }
if ( pos.y < 0 ) { pos.y = 0; }
if ( pos.y > ScreenHt - 64 ) { pos.y = ScreenHt - 64; }

// Hit Recovery
if ( hitStun == true ) {    
    hitStunned(0.5);
}

}

void cMeleeEnemy::die(){
extern int score;
extern int numMobs;
score += 1;
numMobs -= 1;
//texture.Close();
}

void cPlayer::die(){
extern char gameState[256];
sprintf(gameState, "GAMEOVER");
}

void cMeleeEnemy::init(int x, int y){
hp = 6;
dmg = 1;
speed = 25;
fwd.x = 1;
fwd.y = 1;
vel.x = 0;
vel.y = 0;
pos.x = x;
pos.y = y;
rotate = 0.0;
color = 0xFFFFFFFF;
hitStun = false;
texture.Init("media/vader.bmp");
}

void cPlayer::init(int x, int y){
facing = 0;
hp = 10;
dmg = 2;
color = 0xFFFFFFFF;
speed = 100;
fwd.x = 1;
fwd.y = 1;
vel.x = 0;
vel.y = 0;
pos.x = x;
pos.y = y;
rotate = 0.0;
hitStun = false;
texture.Init("media/ben.bmp");
} 
```

如你所知，我还没有那么有经验。这是我在学校的第一个独立项目。我只能说我对应该在哪里关闭纹理和删除对象有点困惑。谢谢你们的时间，伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:14:34.007

在你的`checkCollisions`函数中，你 return `NULL`，或者在每个循环之后敌人向量的第一个索引位置的对象。

因此，当第一个重影没有命中时，该`checkCollisions`函数将返回`NULL`，而不是遍历向量中的每个后续重影。

要解决此问题，请将您的`checkCollisions`功能更改为以下内容：

```
cEnemy* checkCollisions(int x, int y, int wd, int ht){
    for (int i=0; i < mobList.size(); i++) {
        int left1, left2;
        int right1, right2;
        int top1, top2;
        int bottom1, bottom2;

        left1 = x;
        right1 = x + wd;
        top1 = y;
        bottom1 = y + ht;

        left2 = mobList[i]->pos.x;
        right2 = mobList[i]->pos.x + 64;
        top2 = mobList[i]->pos.y;       
        bottom2 = mobList[i]->pos.y + 64;

        if ( bottom1 < top2 ) { continue; }
        if ( top1 > bottom2 ) { continue; }
        if ( left1 > right2 ) { continue; }
        if ( right1 < left2 ) { continue; }

        return mobList[i];
    }

    return NULL;
} 
```

希望这可以帮助！

编辑：

请注意，当您从列表中删除一个敌人时，如果它的 HP 为 0 或更少，您正在使用`mobList.pop_back()`，但这会从向量中删除最后一个元素，您应该使用以下内容从列表中删除您想要的敌人：

```
std::remove_if( mobList.begin(), mobList.end() []( cEnemy* pEnemy )->bool
{
     if( pEnemy->hp <= 0 )
     {
         pEnemy->die();
         return true;
     }
     else
     {
         pEnemy->update();
         return false;
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:34:35.543

问题解决了！我替换了`pop_back()`with`mobList.erase()`方法。

```
void update(float dt){
        for (int i=0; i < mobList.size(); i++) {
            if ( mobList[i]->hp <= 0 ){
                mobList[i]->die();
                mobList.erase(mobList.begin() + i);
            } else {
                mobList[i]->update(dt);
            }
        }
    } 
```

谢谢大家的帮助，非常感谢！

# c++ - VS2010 C++ 解决方案最后构建状态

> ID：10972324
> 
> 赞同：-2
> 
> 时间：2012-06-10T21:01:18.130
> 
> 标签：c++, visual-studio-2010

解决方案 A 和 B 类似。解决方案 A 的工作进行到停止点并关闭。解决方案 B 的工作继续进行，并且开发了一个很好的补丁，如果在解决方案 A 中会很好。解决方案 B 已关闭。打开解决方案 A。

为什么即使在应用代码更改之前选择了调试 (F5) 也会生成完整的解决方案 A？

不应该存在最后构建的状态并且不应该重新构建吗？

是否有 VS2010 选项可以更改此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:23:46.963

这已作为 VS2010 SP1 的一部分提供。Enable Managed Incremental Build to On 设置纠正了这个问题。Microsoft 文档指的是程序集，当人们使用解决方案和项目来指代 VS2010 的工作部分时，会让人感到困惑。这是设置图形的链接。 [http://picpaste.com/Enable_Managed_Incremental_Build-NBbj3Fn1.JPG](http://picpaste.com/Enable_Managed_Incremental_Build-NBbj3Fn1.JPG)

# c# - 是否可以在 C# 中获取对字典项的引用？

> ID：10972325
> 
> 赞同：3
> 
> 时间：2012-06-10T21:01:37.210
> 
> 标签：c#, dictionary

我正在一个被调用数亿次的函数上实现缓存。缓存大小为数千万项。它目前是使用 实现的`Dictionary`，并且在其中查找需要大量时间。

是否可以在 中获取对整个对的引用`Dictionary`，而不仅仅是值，所以我可以检查一个值是否存在，如果它使用单个查找进行检查（并且可能更新它）？

目前，我有这样的事情：

```
int val;
if (cache.TryGetValue(key, out val))
    if (val < newVal) cache[key] = newVal;
    else return val;
else
    cache.Add(key, newVal); 
```

我想得到这个：

```
Pair pair = cache.GetPair(key);
if (pair != null)
    if (pair.Value < newVal) pair.Value = newVal;
    else return pair.Value;
else
    cache.Add(key, newVal); 
```

如果有其他数据结构允许这样做，我也很高兴听到它。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T21:40:23.477

这是受 Mare Infinitus 的回答启发的。假设您的`cache`变量现在是 a`Dictionary<string, int>`您可以将其更改为`Dictionary<string, MutableInt32>`这样`MutableInt32`写的位置：

```
// wraps an int that may change
class MutableInt32
{
  public int Value;
} 
```

然后你可以将你的代码更改为

```
MutableInt32 val;
if (cache.TryGetValue(key, out val))
  if (val.Value < newVal) val.Value = newVal;
  else ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T21:12:15.727

您的想法很好，因为它将*在*Dictionary 中减少一半的 hash-and-find-bucket 操作。我自己对这些东西进行了基准测试，而 Dictionary 并没有人们想象的那么快。

不幸的是，内置字典不支持这一点。甚至没有解决方法。

您可以实现自己的哈希表并自己执行此操作。撇开法律问题不谈，您可以从 Dictionary 的实现开始并添加 GetAndUpdateOrCreate 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T21:18:34.987

您当然可以将 Pairs 存储在字典中！

```
public class KeyValueTuple
{
    private string key;
    private int value;

    public KeyValueTuple(string key, int value)
    { 
        this.key = key;
        this.value = value;
    }
}

public class BigDataCache
{
    private Dictionary<string, KeyValueTuple> cache;

    public BigDataCache()
    {
        cache = new Dictionary<string, KeyValueTuple>();

        cache.Add("entry1", new KeyValueTuple("entry1", 1));
        cache.Add("entry2", new KeyValueTuple("entry2", 2));
        cache.Add("entry3", new KeyValueTuple("entry3", 3));
    }

    public KeyValueTuple GetTuple(string key)
    {
        KeyValueTuple value = null;

        if (cache.TryGetValue(key, out value))
        {
            return value;
        }

        return null;
    }
}

public void SomeMethod()
{
    BigDataCache d = new BigDataCache();

    var value1 = d.GetTuple("entry1");
    var value2 = d.GetTuple("entryNotValid");
} 
```

# c# - $.ajax 不工作

> ID：10972331
> 
> 赞同：0
> 
> 时间：2012-06-10T21:02:13.717
> 
> 标签：c#, asp.net, ajax, jquery

以前用过`$.post`，现在试试`$.ajax`，代码如下。我不知道为什么它不起作用。

每当我运行它时，我也不知道如何调试这个东西。我收到错误警报框

```
 $.ajax({ 
        type: 'POST',
        url: 'Handler1.ashx',
        data: { formula: "formulaId" },
        error: function (result) {
            alert('error');
        },
        success: function (result) {
            alert('success');
        }
    }); 
```

Handler1.ashx 在同一文件夹中

```
namespace RegistrationHTML.HTML
{
    public class Handler1 : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            Console.Out.WriteLine("hi");
            context.Response.ContentType = "text/plain";
            context.Response.Write("Hello World");

            Console.Out.WriteLine("hi");
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:05:14.900

尝试指定`dataType`：

```
$.ajax({ 
        type: 'POST',
        url: 'Handler1.ashx',
        data: { formula: "formulaId" },
        dataType: 'html', // or 'text' 
        error: function (result) {
            alert('error');
        },
        success: function (result) {
            alert('success');
        }
    }); 
```

# wpf - 如何定位工具提示底部中心

> ID：10972335
> 
> 赞同：11
> 
> 时间：2012-06-10T21:02:45.423
> 
> 标签：wpf

我正在尝试定位我的工具提示，使其位于目标对象的底部和中心。我可以将它定位在底部`ToolTipService.Postion="Bottom"`，但是如何将它定位在中心？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-10T21:30:57.600

我同意，可用于定位 a 的选项`ToolTip`有点有限。我认为您必须结合`Placement="Bottom"`使用`HorizontalOffset`才能获得底部/中心定位。

要将`ToolTip`相对居中，`PlacementTarget`您可以使用
`(PlacementTarget.ActualWidth / 2.0) - (ToolTip.ActualWidth / 2.0)`

*例子*

```
<Button Content="Test">
    <Button.ToolTip>
        <ToolTip Content="ToolTip Text"
                 Placement="Bottom">
            <ToolTip.HorizontalOffset>
                <MultiBinding Converter="{StaticResource CenterToolTipConverter}">
                    <Binding RelativeSource="{RelativeSource Self}" Path="PlacementTarget.ActualWidth"/>
                    <Binding RelativeSource="{RelativeSource Self}" Path="ActualWidth"/>
                </MultiBinding>
            </ToolTip.HorizontalOffset>
        </ToolTip>
    </Button.ToolTip>
</Button> 
```

*中心工具提示转换器*

```
public class CenterToolTipConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values.FirstOrDefault(v => v == DependencyProperty.UnsetValue) != null)
        {
            return double.NaN;
        }
        double placementTargetWidth = (double)values[0];
        double toolTipWidth = (double)values[1];
        return (placementTargetWidth / 2.0) - (toolTipWidth / 2.0);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

如果您需要将几个居中`ToolTips`，您可以使用`Style`类似

```
<Style x:Key="centeredToolTip" TargetType="ToolTip">
    <Setter Property="HorizontalOffset">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource CenterToolTipConverter}">
                <Binding RelativeSource="{RelativeSource Self}" Path="PlacementTarget.ActualWidth"/>
                <Binding RelativeSource="{RelativeSource Self}" Path="ActualWidth"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
</Style>

<!-- ... -->

<Button Content="Test">
    <Button.ToolTip>
        <ToolTip Style="{StaticResource centeredToolTip}"
                 Placement="Bottom"
                 Content="ToolTip Text"/>
    </Button.ToolTip>
</Button> 
```

# ruby-on-rails - 在多态关联中显示动作

> ID：10972339
> 
> 赞同：0
> 
> 时间：2012-06-10T21:03:29.103
> 
> 标签：ruby-on-rails

我有一个可以属于项目、任务或子任务的多态资源讨论。

在某一时刻，我希望重新路由以显示讨论控制器的操作。为此，我需要讨论 id（我从 params 获得）并且我需要知道父级是什么（我也从 params 获得）。

因此，要路由以显示操作，我必须有 3 个案例：

```
 project_discusison_path(@project, @discussion)
  task_discussion_path(@task, @discussion)
  subtask_discussion_path(@subtask, @discussion) 
```

如何在一个路径助手中编写这 3 个案例？（看起来像下面）

```
parent_discussion_path(@parent, @discussion) 
```

请记住，我可以找到并拥有所有变量。只有写路径才是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:13:14.603

如果您在 a--for instance- 中生成链接`link_to`，则可以使用以下数组语法：

```
link_to "Show Discussion", [@parent, @discussion]
```

`polymorphic_path`在幕后，这实现了与and`polymorphic_url`方法相同的事情：

```
polymorphic_url([@parent, @discussion])
```

# jquery - 单击按钮时jQuery事件加倍

> ID：10972353
> 
> 赞同：0
> 
> 时间：2012-06-10T21:04:32.517
> 
> 标签：jquery, events, scroll

我整天都在为这个问题苦苦挣扎。

我有一个 jQuery 按钮，单击该按钮时会在字段中淡入淡出。该字段是一个可滚动的表格，可向左滚动 3 次，向右滚动 3 次。

滚动长度与其容器大小（溢出：隐藏）有关，但是我遇到的问题是一切正常，除非我再次单击原始按钮。每次单击此按钮时，每个方向的滚动距离值都会加倍。几乎就像按钮使事件加倍一样。

$(文档).ready(函数(){

```
$('.pcode_btn').click(function(event){
    var pcode=$('.pcode').val();
    var pcode=$('.pcode2').val();
    if(pcode==""){
        //nothing entered
        alert("Please enter your clients postcode");
        return;
    }

    //show calender

    $('.calender_holder').fadeIn(500);
    $('.instr').text("Select a suitable time when your client is available for one of our agents to visit by selecting an available time-slot below.");
    //slide calender

    $('.next').click(function(event){
    if($('.date_holder').css('left') != '-1743px') {
        $(this).prop('disabled', true)    
        $('.date_holder').animate({left:'-=581px'}, 500, function() {
            $('.next').prop('disabled', false)    
            });
        }

        return false;
    });

    $('.prev').click(function(event){
    if($('.date_holder').css('left') != '0px') {
        $(this).prop('disabled', true)   
        $('.date_holder').animate({left:'+=581px'}, 500, function() {
            $('.prev').prop('disabled', false)    
        });
    }

    return false;
});

}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:07:22.427

您需要将`$('.next')`和`$('.prev')`单击绑定处理程序移出`$('.pcode_btn')`单击处理程序

# java - 通知java从哪里导入（lib）

> ID：10972354
> 
> 赞同：0
> 
> 时间：2012-06-10T21:04:45.273
> 
> 标签：java, compiler-construction, command-line, import, lwjgl

我在命令行中使用 java 并在 gedit 中进行编码，但在导入 lwjgl 时遇到问题。

我在 src/uk/co/gossfunkel 下有我的源代码，在 lib>jars 中有 lwjgl.jar，在 lib>natives 下有 natives。如何让编译器知道该`import org.lwjgl.*;`语句引用了 lib>jars 中的 org.lwjgl？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:09:20.907

```
javac -cp /path/to/lib/jars/lwjgl.jar ... 
```

对于 Unix。

```
javac -cp c:\path\to\lib\jars\lwjgl.jar ... 
```

对于 Windows。

有关更多信息，请参阅[http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/classpath.html](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/classpath.html)或[http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html)解释。

# html - 删除特定 rails .html.erb 文件中的标题渲染

> ID：10972355
> 
> 赞同：4
> 
> 时间：2012-06-10T21:04:48.137
> 
> 标签：html, ruby-on-rails

我在 layouts/application.html.erb 中的应用程序中普遍呈现标题。

我想让标题不出现在特定的 foo.html.erb 文件中。

取消渲染通用布局的语法是什么？

编辑：

布局的控制器是一个设计控制器，特别是会话控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:44:42.683

在您的控制器中，您可以将布局设置为 false（或其他布局），如果为 false，则您需要视图文件中的所有 html、head、body 标签

```
class BarController < ApplicationController
  def foo
    render :layout => false # render foo.html.erb with no layout
  end 
end 
```

请参阅 rails 指南中的第 2.2.11.2 节：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

**编辑：**包括设计布局覆盖

在 config/initializers/devise.rb

```
Devise::SessionsController.layout "bar"
Devise::RegistrationsController.layout "foo"
Devise::ConfirmationsController.layout false # never tried this, guessing it would work
Devise::UnlocksController.layout "bar"
Devise::PasswordsController.layout "foo" 
```

另请参阅 wiki 帖子 - [https://github.com/plataformatec/devise/wiki/How-To:-Create-custom-layouts](https://github.com/plataformatec/devise/wiki/How-To:-Create-custom-layouts)至少有另一种方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:09:45.057

假设呈现模板 foo.html.erb 的控制器和操作是“things#foo”，并且该操作的路径是 things_path。您可以将标题包装在条件标签中，如下所示

```
<% unless request.path == things_path %>
<% end %> 
```

. 有几种方法可以实现这一点，但这里有一种。

# css - CSS 用于居中、自动宽度的 div 元素，每行一个

> ID：10972356
> 
> 赞同：1
> 
> 时间：2012-06-10T21:04:53.153
> 
> 标签：css

似乎有大量的 CSS 问题可供搜索，但我还没有找到任何可以回答我的问题的解决方案，也没有任何解决方案能够解决问题。

我想要一堆 div，每行一个，在父容器内居中，并根据其文本内容具有自动宽度。

我使用 display: inline-block 管理的自动宽度部分，但最后我得到了彼此相邻的 div（尽可能多的可以放入父容器中）。

有什么帮助吗？谢谢！

编辑：另外，我考虑过使用 Table 路线，这是否是正确的做法（即单列多行的表）

编辑：一个例子总是让事情更清楚......

我有一个包含一系列 div 的列：

```
<div id="giant-column" style="width: 800px; margin: 0 auto;">
  <div class="column-element" style="margin: 0 auto; display: inline-block;">
    <div class="text" style="width: 100%; clear: both;"> ... </div>
    <div class="author" style="float: right;"> ... </div>
  </div>
  ...
</div> 
```

我希望每个“列元素”仅与“文本”一样宽，但在更大的列“巨型列”中居中。这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:18:08.653

```
div.column-element{
  margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:10:47.527

你有没有尝试过

```
margin:0 auto; 
```

在您的内部 div 中？

表格设计不是那么灵活，所以我们认为它不是一个好的解决方案。无表设计有很多不同的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:29:53.440

哈！想通了...我需要另一个 div 元素，它用 width: 100%; 包裹每一行。

```
<div id="giant-column" style="width: 800px; margin: 0 auto;">
  <div style="width: 100%;">
  <div class="column-element" style="margin: 0 auto; display: inline-block;">
    <div class="text" style="width: 100%; clear: both;"> ... </div>
    <div class="author" style="float: right;"> ... </div>
  </div>
  </div>
  ...
</div> 
```

# c# - Mono 2.10 中的 HttpApplicationState.Lock()

> ID：10972364
> 
> 赞同：0
> 
> 时间：2012-06-10T21:05:41.453
> 
> 标签：c#, asp.net, .net, mono, dotnetopenauth

我将 DotNetOpenAuth 与 Mono 2.10 结合使用。当 context.Application.Unlock() 被调用时，会抛出一个异常，表明从一[开始就没有获得锁](http://pastebin.com/xh51ntbi)。我已经修改了代码，如下所示。

我的问题是，代码是否具有相同的目的，Apache 下的 mono 是否甚至支持以这种方式锁定？

**原来的**

```
 context.Application.Lock();

                    try
                    {
                        if ((store = (IRelyingPartyApplicationStore)context.Application[ApplicationStoreKey]) == null)
                        {
                            context.Application[ApplicationStoreKey] = store = new StandardRelyingPartyApplicationStore();
                        }
                    }
                    finally
                    {
                        context.Application.UnLock();
                    } 
```

**我的修改**

```
 lock (app)
                {

                    try
                    {
                        if ((store = (IRelyingPartyApplicationStore)context.Application[ApplicationStoreKey]) == null)
                        {
                            context.Application[ApplicationStoreKey] = store = new StandardRelyingPartyApplicationStore();
                        }
                    }
                    finally
                    {
                        //context.Application.UnLock();
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:33:50.483

其实跟想的不`Application.Lock();`一样`lock(app)`

是锁定池上的`Application.Lock();`所有线程，`lock(app)`只能锁定当前池线程。

如果您对应用程序数据有疑问，请将它们保存在一个静态变量中，然后您就可以使用`lock()`, 并且它更快并且由微软建议。

有关更多详细信息，还请阅读类似的答案：[https ://stackoverflow.com/a/10964038/159270](https://stackoverflow.com/a/10964038/159270)

顺便说一句，这是`Application.Lock();`

```
public void Lock()
{
    this._lock.AcquireWrite();
}

internal virtual void AcquireWrite()
{
    lock (this)
    {
        while (this._lock != 0)
        {
            try
            {
                Monitor.Wait(this);
                continue;
            }
            catch (ThreadInterruptedException)
            {
                continue;
            }
        }
        this._lock = -1;
    }
} 
```

# arrays - 用鼠标单击删除数组及其内容 AS3 Flash CS5.5

> ID：10972366
> 
> 赞同：1
> 
> 时间：2012-06-10T21:05:54.200
> 
> 标签：arrays, actionscript-3, removechild

我一直在尝试这样做两个晚上，但没有任何快乐，如果可以，请帮助...

用飞镖和其他武器进行简单的投掷游戏，我想做的是在我更换武器时删除一个数组及其所有子项，

我确信有一个简单的代码片段可以毫不费力地删除所有子元素和数组，但我还没有弄清楚，如果你知道或可以提出任何建议，我将不胜感激。

类似“removeArrayAndAllInstances(balls);” 如果只是......此刻我有......（球是有问题的数组）

```
 for(var inter:int = balls.length - 1; inter > -1; inter--)
      {
        balls.splice(1);
        balls.splice(1, balls.length);
      } 
```

但是由于某种原因，这个讲解员工作，阵列和它的所有孩子都还在舞台上。

我也试过

```
balls[]; 
```

没运气...

请不要判断我的代码我是一个新手，因为我确信这是显而易见的，我知道它是一个令人作呕的混乱，抱歉（这是唯一对我有意义的方法）。

我尝试了很多东西，希望有人可以帮助

提前致谢.....

```
 var mouseTarget:MovieClip;
var balls:Array = new Array();
var ball:MovieClip = new dart();
var hammers:MovieClip = new hammer();
ball.x = 150;
ball.y = 50;

hammer_btn.addEventListener(MouseEvent.MOUSE_DOWN, hammerweapon);
dart_btn.addEventListener(MouseEvent.MOUSE_DOWN, dartweapon);

function removealldartsfromstage(e:MouseEvent):void
{
  for(var inter:int = balls.length - 1; inter > -1; inter--)
  {
    balls.splice(1);
    balls.splice(1, balls.length);
  }

    stage.removeEventListener(MouseEvent.MOUSE_UP, addDart);    
} 
function dartweapon(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_UP, addHammer);
    dart_btn.removeEventListener(MouseEvent.CLICK, dartweapon);
    stage.addEventListener(MouseEvent.MOUSE_UP, addDart);
    //removeChild(balls);

}
function hammerweapon(e:MouseEvent):void
{
    stage.removeEventListener(MouseEvent.MOUSE_UP, addDart);
    dart_btn.addEventListener(MouseEvent.MOUSE_DOWN, dartweapon);
    //stage.addEventListener(MouseEvent.MOUSE_UP, addDart);
    stage.addEventListener(MouseEvent.MOUSE_UP, addHammer);

}

function addHammer(e:MouseEvent):void
{
    var hammers = new hammer();
    addChild(hammers);
    removeChild(dart_btn);
    addChild(dart_btn);
    dart_btn.addEventListener(MouseEvent.CLICK, dartweapon);
    balls.splice(10);
}

function addDart(e:MouseEvent):void
{
    str.alpha = 0;
    var ball = new dart();
    addChild(ball);
    removeChild(hammer_btn);
    addChild(hammer_btn);
    ball.x = 150;
    ball.y = 50;
    balls.push(ball);
    trace(balls);
    addEventListener(Event.ENTER_FRAME, checkIfHitTest);
    hammer_btn.addEventListener(MouseEvent.MOUSE_DOWN, removealldartsfromstage);
    function checkIfHitTest(Event)
    {
        for (var i:int = 0; i<balls.length; i++)
        {
            if (balls[i].dart_point.hitTestObject(eyeleft))
            {
                trace("hitleftbullseye");
                ball.gotoAndStop("hitlefteyeframe");
                Event.currentTarget.removeEventListener(Event.type, checkIfHitTest);
                balls.splice(i, 1);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:44:20.983

球数组只是球参考的存储。它与已添加的舞台或 DisplayObjectContainer 完全无关。所以你必须单独删除它们。

这就是我要做的：

```
while(balls.length > 0)
{
    var ball:MovieClip = balls.pop();
    if (ball.parent) // Just to make sure you are referencing the correct container.
    {
        ball.parent.removeChild(ball);
    }
} 
```

我不能很好地遵循你的游戏逻辑。也就是说，您最好为单独的剪辑组创建容器，以便更轻松地管理它们。例如在创建阶段：

```
var ballContainer:Sprite = new Sprite();
addChild(ballContainer);
for (var i:int = 0; i < ballLimit; i++)
{
    var ball:Dart = new Dart();
    ballContainer.addChild(ball);
} 
```

这样，您可以一次清除所有子项：

```
function removeAllChildren(container:Sprite) // Or just DisplayObjectContainer
{
    while(container.numChildren > 0)
    {
        container.removeChild(container.getChildAt(0));
    }
} 
```

# php - 快速插入 250k 行

> ID：10972376
> 
> 赞同：5
> 
> 时间：2012-06-10T21:08:16.453
> 
> 标签：php, mysql

所以我试图在我的数据库中插入 250 000 行。因为这只是样本数据，我只需要查询 ax, y 变量，它确实会改变，因此 for 循环和只是简单地“水”的地形

但这需要永远。有谁知道我怎样才能更快地实现这一点？

```
ini_set('max_execution_time', 70000);

$conn = mysql_connect('localhost', 'root', '') or die(mysql_error());
mysql_select_db('hol', $conn) or die(mysql_error());

for ($y=0;$y<500;$y++) {
    for ($x=0;$x<500;$x++) {
        mysql_query("INSERT INTO map(x, y, terrain) VALUES($x, $y, 'water')");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T21:10:01.117

使用 MySQL LOAD DATA FROM INFILE 语句可能会做得更好。批量加载往往比构建大量插入语句字符串更快。将您的数据写入文件并执行一次 LOAD。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

插入/加载还取决于表上的索引数。仅在必要的列上创建索引。通过在数据加载到表中之后添加索引，您通常还可以获得更好的性能，这样您在添加数据时不会更新索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:10:15.123

```
INSERT INTO map (x, y, terrain) 
 VALUES ($x, $y, 'water'), ($x, $y, 'water') [etc] 
```

因此，您只需要 1 个查询。

当然，当您添加 400-500 个值时，将查询拆分为多个查询

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T21:15:03.933

您应该确保您没有在自动提交模式下运行那些 250.000（250.000 个事务）。

通过将它们全部发送到一个事务中，您将大大加快速度，因为 mysql 引擎不必调用其事务机制 250.000 次。

cf [PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

```
mysql_query("START TRANSACTION");
... your requests
mysql_query("COMMIT"); 
```

如果您不关心索引的状态，您还应该在开始事务之前删除表上的索引并在之后重新创建它们。这也将大大加快速度，因为引擎不需要检查每一行的唯一性、更新索引、..。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:30:14.220

显然，由于第一个语句只有 500 个值，因此插入值的方式并不那么重要，您可以使用循环来执行此操作。

```
INSERT INTO temp500 (value)
  VALUES (0), (1), (2), ... (499);
INSERT INTO map (x, y, terrain)
  SELECT x.value, y.value, 'water'
    FROM temp500 x, temp500 y; 
```

# zk - 加载数据并使用相同的操作进行导航

> ID：10972378
> 
> 赞同：0
> 
> 时间：2012-06-10T21:08:49.393
> 
> 标签：zk, zul

我是 zk6 框架的新手。我创建了一个视图模型类，我试图从一个 zul 导航并在另一个 zul 中加载一些数据：

```
public class SearchVM {
@Command
@NotifyChange({ "searchBean","slides" })
public void doSearch() {
        //load data (slides) from data base
        //navigate to another zul where i display my data
    }

} 
```

如果我留在同一个 zul 中，则会显示数据，但如果我导航到另一个 zul，我什么也得不到。我尝试使用`Executions.sendRedirect("/result.zul")`没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:36:35.027

不要进行浏览器重定向。使用 AJAX 显示结果。

所以在下面一个 zul 文件有两个区域，一个是默认隐藏的。当您单击该按钮时，它会隐藏第一个区域并显示第二个区域。

```
<zk>
<zscript>
boolean showFirstZone = true; 
</zscript>
<window visible="${showFirstZone}" id="firstZoneWindow">
    This is first zone. 

    <include src="/WEB-INF/search/search-input.zul"/>

    <button label="Switch To Results" onClick="secondZoneWindow.visible=true;firstZoneWindow.visible=false;" />

</window>

<window visible="${!showFirstZone}" id="secondZoneWindow" >
   This is second zone. 

   <include src="/WEB-INF/search/search-result.zul"/>

</window>
</zk> 
```

请注意，我将包含的 zul 文件放在 /WEB-INF 下，这样就无法从浏览器访问它们，这是个好主意。这样，只有定义系统桌面的入口页面位于站点的主文件夹中（例如，一个用于客户，一个用于员工，一个用于管理员），每个页面都可以重用隐藏在 /WEB-INF 下的包含片段。

理论：

使用 php/jsp，您可以让浏览器请求新页面并绘制它们，以便它们通过会话看到相关日期。ZK 是一个面向桌面的框架，您倾向于在其中构建“单页应用程序”，这意味着由 AJAX 更新的应用程序。执行浏览器重定向不是执行 AJAX 更新。您强制重新获取所有 JS 和 CSS 并重新评估 zul 文件，这比通过 AJAX 进行动态更新效率低得多。

如果您阅读[http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/UI%20Composing/Component-based%20UI](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/UI%20Composing/Component-based%20UI)，则表明当您打开一个新 URL 时，您正在创建一个新桌面。ZK 实际上将 body onunload javascript 处理程序放在它呈现的 html 页面上，告诉浏览器在用户导航到新 url 时发送最终 AJAX 事件以销毁现有桌面。因此，当您让用户离开您的第一个 zul 页面时，您实际上会破坏您的 ViewModel。这就是为什么您在浏览器转到的新网址上看不到任何数据的原因；这是一个全新的桌面，它将获得一个全新的 ViewModel，与用户离开的那个无关。

# c - C中结构内具有多个字段的自定义qsort比较器函数

> ID：10972380
> 
> 赞同：2
> 
> 时间：2012-06-10T21:09:02.967
> 
> 标签：c, struct, qsort

我正在尝试以特定的方式对结构进行排序。正如您在以下结构中看到的那样，字段按`product`名称排序。

```
 a   -   $13.00
 a.0|100   -   $3.00
 a.1|100   -   $6.00
 a.2|100   -   $4.00
       b   -   $25.00
 b.0|100   -   $2.00
 b.1|100   -   $10.00
 b.2|100   -   $13.00 
```

我想知道如何按`product`名称保留排序，但同时按`price`.

这是我到目前为止所拥有的：

```
#include <stdio.h> 
#include <stdlib.h> 
#include <string.h> 

struct st_ex { 
    char product[16];
    float price;
};

int struct_cmp_by_product(const void *a, const void *b) { 
    struct st_ex *ia = (struct st_ex *)a;
    struct st_ex *ib = (struct st_ex *)b;
    return strcmp(ia->product, ib->product);
} 

int main() { 
    struct st_ex structs[] = {
        {"b", 25}, 
        {"b.0|100", 2}, 
        {"b.1|100", 10},
        {"b.2|100", 13},
        {"a", 13},
        {"a.0|100", 3},
        {"a.1|100", 6},
        {"a.2|100", 4},
    };  
    size_t structs_len = sizeof(structs) / sizeof(struct st_ex);
    qsort(structs, structs_len, sizeof(struct st_ex), struct_cmp_by_product);    
    size_t i;
    for(i=0; i<structs_len; i++) 
        printf("%8s   -   $%.2f\n", structs[i].product, structs[i].price);
    return 0;
} 
```

**更新**：按价格排序，但按名称分组。例如，`b:25`>`a:13`

```
 b   -   $25.00
 b.2|100   -   $13.00
 b.1|100   -   $10.00
 b.0|100   -   $2.00
       a   -   $13.00
 a.1|100   -   $6.00
 a.2|100   -   $4.00
 a.0|100   -   $3.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:31:57.540

```
int struct_cmp_by_product(const void *a, const void *b) {
    struct st_ex *ia = (struct st_ex *)a;
    struct st_ex *ib = (struct st_ex *)b;
    int rc;
    size_t len_a, len_b, len;

    len_a = strcspn(ia->product, ".");
    len_b = strcspn(ib->product, ".");
    len = (len_a > len_b) ? len_a : len_b; /* assuming ascii */
    rc = strncmp(ia->product, ib->product, len);
    if (rc) return rc;

    if (ia->price > ab-price) rc = 1;
    else if (ia->price < ab-price) rc = -1;
    return rc;
} 
```

更新： strcmp() -->> strncmp + 计算大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:24:39.227

家庭作业？有人再用C写这种东西了吗？

想想你的目标是什么：如果产品名称不同，那么价格是多少没有区别，所以你返回名称比较结果。

只有产品名称相同时，价格才重要。

所以*有两个*问题需要解决。需要一个更具应用意识的替代品`strcmp(3)`，一个知道`b`, `b.0|100`, 并且`b.0|200`应该与产品“名称”同等比较的替代品。而且，当然，在相等的情况下，有必要添加价格比较。下面的代码替换了您的比较功能并已经过测试。`void *`顺便说一句，如果您使用纯 C 语言工作，则不需要进行转换。

```
int baseproductname(const char *a, const char *b) {
    for(;;) {
        int c = *a;
        int d = *b;
        if (c == '.')
            c = 0;
        if (d == '.')
            d = 0;
        if(c != d || !c || !d)
            return c - d;
        ++a;
        ++b;
    }
}

int productorder(const struct st_ex *a, const struct st_ex *b) {
    int n = baseproductname(a->product, b->product);
    printf("%s <=> %s is %d\n", a->product, b->product, n);
    if (n)
        return n;
    if (a->price > b->price)
        return -1;
    return a->price < b->price;
}

int struct_cmp_by_product(const void *a, const void *b) {
  return productorder(a, b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:25:22.193

最简单的方法是修改你的`struct_cmp_by_product`. 而不是做 a `strcmp`，比较产品名称（取决于您的产品名称是多长时间，您可能希望`strcmp`在成员的子字符串上使用`product`）。

然而，我更愿意`st_ex`通过保留两个成员来在类型中编码这种区别，当它们组合时给出实际的产品名称。

```
 struct st_ex {
      char product[ 4 ]; // product group
      char subgroup[ 12 ]; // sub group
      float price;
 }

 int struct_cmp_by_product(const void *a, const void *b) { 
    struct st_ex  const *ia = a; // do not cast away const-ness!
    struct st_ex const *ib = b;
    int x = strcmp(ia->product, ib->product);
    if (!x) {
        return ia->price > ib->price;
    }
    return x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T21:30:41.140

关键是能够识别产品名称。这当然取决于产品名称的格式。如果您在这里写的内容是准确的，那么它是指前面的单词（`.`如果有的话）。让我们一块一块地构造比较函数：

```
int struct_cmp_by_product(const void *a, const void *b) { 
    struct st_ex *ia = (struct st_ex *)a;
    struct st_ex *ib = (struct st_ex *)b; 
```

首先，我们必须找到`.`发生的位置：

```
 size_t len_a, len_b;
    char *a_dot, *b_dot;
    a_dot = strchr(ia->product, '.');
    b_dor = strchr(ib->product, '.');
    if (a_dot)
        len_a = a_dot - ia->product;
    else
        len_a = strlen(ia->product);
    if (b_dot)
        len_b = b_dot - ib->product;
    else
        len_b = strlen(ib->product); 
```

然后我们必须检查两个产品名称是否相等：

```
 int res; /* define above */
    if (len_a == len_b && strncmp(ia->product, ib->product, len_a) == 0)
    {
        /* then check for price */
    }
    else
        return strcmp(ia->product, ib->product); 
```

比较价格的部分简单地给出为：

```
 if (ia->price < ib->price)
            return -1;
        if (ia->price > ib->price)
            return 1;
        return 0; 
```

最后关闭功能：

```
} 
```

注意：我可能缺少错误检查或拼写错误，请确保您在使用之前了解代码。不要只是复制粘贴。

# javascript - 为什么这个变量在函数中传递时会发生变化？

> ID：10972383
> 
> 赞同：0
> 
> 时间：2012-06-10T21:09:23.120
> 
> 标签：javascript, jquery, validation

**Edit2** : 是的，发现问题了，ajax 调用实际上有一个错误，而且由于我的愚蠢，我没有意识到这两种方法 - 成功和错误都可以运行（我以为是一个或另一个)，因此每次都将 formComplete 设置为 false，因为出现错误。

感谢您提供的有关不使用全局变量名称作为函数参数的时间和提示。

**编辑：**这`formComplete`是设置的代码（console.log() 在整个过程中检查 formComplete）：

```
validate: function(field) {
            if(!field.val()) {
                formComplete = false;
                // formComplete is false here
                console.log(formComplete);
            }
            else {
                if(field.attr('name') === 'queryEmail') {
                    // Validate the email
                    if(DMOFFAT.helper.validateEmail(field.val()) === true){
                        // formComplete is either true or false here, depending on the last validation carried out
                        console.log(formComplete);
                        formComplete = true;
                        // formComplete is true here
                        console.log(formComplete);
                    }
                    else {
                        formComplete = false;
                        // formComplete is false here
                        console.log(formComplete);
                    }
                }
                else {
                    formComplete = true;
                    // formComplete is true here
                    console.log(formComplete);
                }

            }
        }, 
```

**问题：**为什么这个变量（formComplete）从真到假？

我已经为联系表单编写了一些基本的表单验证，以下是我的做法：

像这样定义字段：

```
var queryTypeField = $('#queryType'),
    queryMessageField = $('#queryMessage'),
    queryEmailField = $('#queryEmail'),
    queryNameField = $('#queryName'),
    submitButton = $('#submit'); 
```

像这样向这些添加一些事件处理程序（FWIW，DMOFFAT 变量只是一个包含不同代码模块的对象，例如contactForm =联系表单javascript等）：

```
 queryMessageField.on('blur', function() {
       DMOFFAT.contactForm.validate(queryMessageField);
    });

    queryNameField.on('blur', function() {
       DMOFFAT.contactForm.validate(queryNameField);
    });

    queryEmailField.on('blur', function() {
       DMOFFAT.contactForm.validate(queryEmailField);
    });       

    submitButton.on('click', function(evt) {
        evt.preventDefault();
        console.log('Click');
        console.log(formComplete);
        DMOFFAT.contactForm.send(formComplete);
    }); 
```

validate 函数只是设置`'formComplete'`为 true 或 false，具体取决于字段是否有效。

当我的字段都正确填写时，`formComplete = true`.

从上面代码的最后一行可以看出，我将`formComplete`（这是真的）传递给了我的发送函数。我的发送函数只是检查 的值`formComplete`，然后将数据发送到 php 脚本，或者打印错误，代码如下：

```
 send: function(formComplete) {
        // This is true when the form is filled in correctly
        console.log('In send formComplete is...' + formComplete);
        if(formComplete === true) {
            // Extract form values
            formData['queryMessage'] = queryMessage.value;
            formData['queryType'] = queryType.value;
            formData['queryName'] = queryName.value;
            formData['queryEmail'] = queryEmail.value;
           $.ajax({
                type: 'POST',
                async: true,
                url: '....',
                dataType: 'json',
                data: formData,
                success: function(data, status, xhr) {
                    DMOFFAT.contactForm.writeMessage(formComplete);
                },
                error: function(xhr, status, err) {
                    DMOFFAT.contactForm.writeMessage(formComplete);
                }
            });

        }
        else {
            this.writeMessage(formComplete);
        } 
```

现在，我知道`formComplete`正确填写表格时这是真的，因为我的 php 脚本会创建一个包含数据的 .txt 文件，如果它是假的，则不会创建此文件。

这意味着我们将`formComplete`off 的值发送给 writeMessage，它只是将一些 HTML 写入页面以显示提交是否成功，代码如下：

```
 // Disgusting spaghetti code
    writeMessage: function(formComplete) {
        // This is false now...
        console.log('In writeMessage formComplete is...' + formComplete);
        if(formComplete === true) {
            contactFormElement.html('<div class="success ui-message cf-message"><p><strong>Thank you</strong> for your query, we\'ll get back to you as soon as we can.</p></div>');
        }
        else {
            // Check if there's already an error, otherwise many will appear
            if(errorElement === '') {
                errorElement = '<div class="error ui-message cf-message"><p>' + this.config.errorMsg + '</p></div>';
                contactFormElement.prepend(errorElement);   
            }
        }
    } 
```

`formComplete`本身定义如下：

```
var formComplete; 
```

当我在 writeMessage 的第一行检查 formComplete 时，它​​现在是假的，但我不知道为什么......即使我`formComplete`在它传递给 writeMessage 之前明确设置为真，它仍然是假的。

TLDR：请告诉我我在哪里愚蠢:)

PS：我知道我可以使用预先构建的联系表单验证插件，但我想尝试自己构建一些简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:10:34.627

问题是，您正在`writeMessage()`从 AJAX 请求的回调函数中调用，因此解释器正在寻找执行时间的全局变量。无论如何，您可以简单地传递`true`到`writeMessage()`您的回调函数中，因为只有在以下情况下才会执行`formComplete`调用`true`-

# c# - 如何从 Visual Studio 的数据库中获取自动完成？

> ID：10972384
> 
> 赞同：0
> 
> 时间：2012-06-10T21:09:27.397
> 
> 标签：c#, c++

我正在尝试制作一个程序，它基本上是一个购物清单。目的是输入一些东西，而输入程序将从数据库中获取匹配的项目，您将能够选择一个项目并写入一个数量。稍后我想对此进行排序。

我的问题是我不知道如何制作这个自动完成的东西，我也不知道我要搜索什么，因为我确信它不只是被称为自动完成。

我在 Unity 中使用 C# 和带有控制台应用程序的 C++ 以及 Eclipse 中的一些 Java 编写了很多程序。但是我几乎从来没有在 Visual Studio 上做过任何事情，你可以在其中设计然后为每个项目编程。

[http://i.imgur.com/6WXDq.jpg](http://i.imgur.com/6WXDq.jpg) <- 这是我要制作的图片。

我不是要求任何人为我构建这个，我只需要知道我将要寻找什么来使第一件事起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:25:54.447

我想你需要这样的东西：

```
textBox1.AutoCompleteCustomSource = DataHelper.LoadAutoComplete();
textBox1.AutoCompleteMode = AutoCompleteMode.Suggest;
textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

[在此链接](http://ltuttini.blogspot.com/2009/09/c-autocomplete-combobox-o-textbox.html)中，有一个用西班牙语解释自动完成内容的示例。希望对您有所帮助！

# mysql - MySQL 月日期时间最大计数

> ID：10972388
> 
> 赞同：2
> 
> 时间：2012-06-10T21:09:46.010
> 
> 标签：mysql, count

我正在尝试查找日期时间行的最大计数。

也就是说，我试图在 DATETIME 信息列中显示最常出现的月份的名称。

这是我的代码：

```
Select MONTHNAME(a.AF_Zeit) as Monat
From abflug a
group by MONTH(a.AF_Zeit)
having count(AF_Zeit) = (select max(count(MONTH(AF_Zeit)))
                from abflug
                group by MONTH(AF_Zeit)) 
```

mySQL 返回消息：“#1111 - 组函数的使用无效”

我不明白！我听说那里还有其他可能得到这个，但我有点不得不用子选择来做。我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:37:17.583

我假设您正在尝试在 ABFLUG 表的 AF_ZEIT 列中显示最频繁出现的月份的名称。

你怎么做到这一点？让我们从概念上解决它。

首先，您需要一个显示 ABFLUG 表每一行的月份名称的虚拟表（如您所说的子选择）。

```
SELECT MONTHNAME(a.AF_Zeit) as Monat
  FROM ABFLUG A 
```

然后您需要计算这些项目（或者，您可以说，按月获取直方图）。这将做到这一点。这是一个较小的虚拟表。

```
SELECT COUNT(*) NNN, MONTHNAME(a.AF_Zeit) as Monat
  FROM ABFLUG A
 GROUP BY MONTHNAME(a.AF_Zeit) 
```

然后，您需要操作该表的行以降序排列它们，并显示第一个（最频繁的）行。

```
SELECT Z.Monat FROM (
  SELECT COUNT(*) NNN, MONTHNAME(a.AF_Zeit) as Monat
    FROM ABFLUG A
   GROUP BY MONTHNAME(a.AF_Zeit) 
  )Z
  ORDER BY Z.NNN
  LIMIT 1 
```

请注意，这其中的难点在于用虚拟表的说法实现概念上的清晰性。

# jquery - 如何将 hoverIntent 附加到嵌入式 svg 文档中的路径？

> ID：10972396
> 
> 赞同：0
> 
> 时间：2012-06-10T21:10:55.787
> 
> 标签：jquery, html, jquery-selectors, svg, hoverintent

我在这样的 html 页面中有一个 svg 对象

```
<object id="map" data="img/map_2008.svg" type="image/svg+xml" onload="displayStats();" ></object> 
```

带有我想附加 hoverIntent 的路径。然而 hoverIntent 需要使用 jQuery 选择器。我将如何将 hoverIntent 附加到 svg 文档中的所有路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:26:34.423

在页面加载时直接附加到 svg 效果不会很好，但是创造性地使用 .on() 事件注册和 svg 底层元素的选择器。

# javascript

```
$(function(){
$("#map").on({
  "mouseenter":function(event){},
  "mouseout":function(event){}},"svg element based selector",null);
}); 
```

# html

```
<object id="map" data="img/map_2008.svg" type="image/svg+xml" onload="displayStats();" >
  <svg>
   <element>
     <based><selector>hello</selector></based>
   </element>
  </svg>
</object> 
```

# javascript - 访问db数据类型错误

> ID：10972397
> 
> 赞同：2
> 
> 时间：2012-06-10T21:11:17.587
> 
> 标签：javascript, sql, ms-access

我正在尝试将一行插入到访问数据库（mdb，访问​​ 2000 AFAIK）中，如下所示：

```
conn.execute("INSERT INTO entries (userCol,typeCol,numitems,entrytime,worktime) VALUES ('mattk','Item 1',4,1339361723424,1339361723424)") 
```

我收到以下错误：

```
Message: Data type mismatch in criteria expression. 
```

变量 conn 是一个 adodb 连接对象。它在javascript中声明和初始化如下：

```
var conn = new ActiveXObject("ADODB.Connection");
conn.open('Provider=Microsoft.Jet.OLEDB.4.0;Data Source=' + source + ';User Id=admin;Password=;'); 
```

我已确认以下数据类型：

```
userCol: text
typeCol: text
numitems: integer
entrytime: long
worktime: long 
```

我只是无法理解可能导致这种情况的原因。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T21:15:34.130

MS-Access Long 数据类型可以保存从 -2,147,483,648 到 2,147,483,647（有符号）的值。

您正在尝试插入太大的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T21:23:11.990

[您可以在此链接](http://www.w3schools.com/sql/sql_datatypes.asp)中查看 db 引擎的数据类型。

根据此页面，您试图为长字段分配太大的值。您应该为这些字段选择更合适的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T21:16:05.590

MS-Access 中的 LONG 整数值的范围是 – 2,147,483,648 到 2,147,483,647。您的值超出此范围。

# javascript - Google Chrome 扩展 - content_scripts 与 background_page js 文件通信

> ID：10972399
> 
> 赞同：1
> 
> 时间：2012-06-10T21:11:25.347
> 
> 标签：javascript, google-chrome, google-chrome-extension

在我的 Google Chrome 扩展程序中，我有一个 content_script，我想与我的 background_page 进行通信。有谁知道如何做到这一点？

我找到了一些关于背景页面如何与 content_script 通信的教程，但是，正如我所说，我需要相反的情况发生。

我想运行一个自动脚本来每 24 小时清除一次缓存。我不能从 content_script 执行此操作，我必须从后台页面执行此操作。我现在可以让它工作的唯一方法是如果我绑定一个“按钮”，但正如我之前所说，我希望它每 24 小时自动运行一次。

顺便说一句-我已经知道内容脚本不能： 使用 chrome.* API（chrome.extension 的部分除外） 使用其扩展页面定义的变量或函数 使用网页或其他内容脚本定义的变量或函数

如您所见，列出的第一项是：chrome API，但我需要在我的 content_script 中使用 chrome API，所以希望有人能解决。请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:39:54.680

[**来自 Google 的消息传递文档**](http://code.google.com/chrome/extensions/messaging.html)

**内容脚本：**

```
chrome.extension.sendRequest({greeting: "hello"}, function(response) { //request
  console.log(response.farewell);           //receive response
}); 
```

**背景页面：**

```
chrome.extension.onRequest.addListener(     //listen to requests
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.greeting == "hello")
      sendResponse({farewell: "goodbye"});  //send response
  }); 
```

* * *

您还可以在内容脚本和背景页面之间建立长期连接：
[http ://code.google.com/chrome/extensions/messaging.html#connect](http://code.google.com/chrome/extensions/messaging.html#connect)

```
contentscript.js
================
var port = chrome.extension.connect({name: "knockknock"});
port.postMessage({joke: "Knock knock"});
port.onMessage.addListener(function(msg) {
      if (msg.question == "Who's there?")
    port.postMessage({answer: "Madame"});
  else if (msg.question == "Madame who?")
    port.postMessage({answer: "Madame... Bovary"});
});

background.html
===============
chrome.extension.onConnect.addListener(function(port) {
  console.assert(port.name == "knockknock");
  port.onMessage.addListener(function(msg) {
    if (msg.joke == "Knock knock")
      port.postMessage({question: "Who's there?"});
    else if (msg.answer == "Madame")
      port.postMessage({question: "Madame who?"});
    else if (msg.answer == "Madame... Bovary")
      port.postMessage({question: "I don't get it."});
  });
}); 
```

# c - 算法逻辑实现中的关联困难

> ID：10972402
> 
> 赞同：1
> 
> 时间：2012-06-10T21:12:04.200
> 
> 标签：c, algorithm, multidimensional-array, implementation

任务是：

*   有2个数组`A`（数值浮点型），`B`是一个字符数组。A 填充有随机数。
*   让`A[i]`表示与 B 数组中的第 i 个字符相关联的第 i 个值。也就是说，每个唯一的 Ai 都映射/关联到一个唯一的 Bi。因此，如果有相似的 Ai，那么它们中的每一个都将依次与 B 中的相同字符相关联。
*   现在，有一个`New_A`由随机数填充的新数组，这些随机数可能与 A 的随机数略有不同，或者少数数字可能完全相同。任务是根据以下假设创建一个字符数组 New_B：
*   我们找到最小的欧几里得距离或 和 之间的任何度量`New_A[j]`，`A[i]`使得给定 a `New_A[j]`，来自 B 的字符被分配 where `A[i] >=New_A[j]`( `New_A[i] >= A[j]`)。让表示条件成立`small_A`的最小值的索引 j 。`A[j]`
*   例如，假设与 A[2] 关联的字符是 'd' 并且 A[2]=12.1 的值和 New_A[7]=11.9 的值。因为， A[2]> New_A[7],New_A[7] 被映射/关联到最初与 A[2] 关联的字符，即字符 'd' ；该条件不成立的其余部分保持不变。因此，总体效果/目标是根据New_A和A将字符数组B的变体创建成新的字符数组New_B。

现在，这就是我卡住的地方。如何找到最小的欧几里得值，然后如何根据条件分配 B 的字符。此外，数组的数据类型不同，如何进行关联。二维数组的使用纯属猜测，不能保证我是正确的。

```
float A[10];
char B[10] = {'c','d','e','f','g','h','i','j','k','l'} ; 

for (i = 1; i <= 10; i++) {
  Val_A[i] = rand(); 
  Val_New[i] = rand();
  A[i] = Val_A[i]; 
  New_A[i][j] = Val_New[i]; 
}

max1 = New_A[0];
index1 = 0; 
for (i = 1; i < 10; i++) {
  if (A[i] > max1)
    extract_char = B[i];  
  New_A[i][j] = extract_char;  
  //assigning corresponding character to New_A, which was assigned earlier to A   
  index1 = i;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:38:12.447

首先，标量的欧几里得距离只是说“差异的绝对值”的一种奇特方式，例如 fabs(ab)

对于 New_A 中的每个元素“i”：

1.  在 A 中找到具有最小欧几里得距离的索引为“minA”的元素
2.  将 New_B[i] 设置为 B[minA]

第一步：

```
int findminA(float A[], int sizeA, float compare)
{
  int i;
  int minA=0;
  float best=abs(a[0]-compare);
  for(i=1;i<sizeA;++i) {
    if(fabs(A[i]-compare)<best) {
       best=fabs(A[i]-compare)
       minA=i;
  }
  return i;
} 
```

这将为您提供具有最小欧几里德距离的索引（对于 A 和 B）。

# android - 从“使用完成操作”对话框中过滤我自己的应用程序（由 startActivity 方法显示）

> ID：10972404
> 
> 赞同：1
> 
> 时间：2012-06-10T21:12:09.160
> 
> 标签：android, android-intent

我在 stackoverflow 中看到了 2 个关于此的问题，但没有一个问题足够清楚并且没有很好的代码示例。

如果有人能解释我如何实现我的目标并提供一个好的代码示例，我会非常感激。

如果从标题中无法理解我的问题，是我正在处理 android.intent.action.SENDTO 意图，但也以该意图启动和活动，当我已经在我的应用程序中时我不想看到我的应用程序例如点击一个按钮。

我听说过 queryIntentActivities 并成功地通过其 packageName 从列表中过滤了我的应用程序，但我不知道如何使用新修改的列表触发“使用完成操作”对话框。

我更喜欢使用默认的“使用完成操作”和“使此应用程序成为此操作的默认应用程序”的选项，但如果创建自定义对话框是唯一的选项，那么如果您还解释如何启用它，那就太好了自定义对话框中的选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:06:35.357

> 但我不知道如何使用新修改的列表触发“使用完成操作”对话框。

您必须为此创建自己的对话框（或以对话框为主题的活动）。标准的 Android 选择器对话框没有这样的过滤选项。

> 如果创建自定义对话框是唯一的选项，那么如果您还要解释如何在自定义对话框中启用此选项，那就太好了。

你不能。只有操作系统才能使应用程序成为此操作的默认值。

# datagrid - 不要在 Dojo DataGrid 中显示网格线和标题行

> ID：10972407
> 
> 赞同：0
> 
> 时间：2012-06-10T21:12:18.717
> 
> 标签：datagrid, dojo

我一直在使用该站点（ [http://dojotoolkit.org/documentation/tutorials/1.6/datagrid/](http://dojotoolkit.org/documentation/tutorials/1.6/datagrid/)）中的示例来呈现数据。但是，我不想在 Dojo Datagrid 中显示网格线和标题行。

有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:01:18.650

隐藏标题使用

```
 #YOURGRIDID.dojoxGridHeader  { display:none; } 
```

在提到的链接中，没有网格线。

# python - pandas：在 DataFrame 中组合两列

> ID：10972410
> 
> 赞同：23
> 
> 时间：2012-06-10T21:12:43.400
> 
> 标签：python, dataframe, pandas

我有一个`DataFrame`包含多列的熊猫：

```
Index: 239897 entries, 2012-05-11 15:20:00 to 2012-06-02 23:44:51
Data columns:
foo                   11516  non-null values
bar                   228381  non-null values
Time_UTC              239897  non-null values
dtstamp               239897  non-null values
dtypes: float64(4), object(1) 
```

where`foo`和`bar`are 包含相同数据但名称不同的列。有没有办法将组成的行移动`foo`到`bar`中，理想情况下同时保持 的名称`bar`？

最后，DataFrame 应显示为：

```
Index: 239897 entries, 2012-05-11 15:20:00 to 2012-06-02 23:44:51
Data columns:
bar                   239897  non-null values
Time_UTC              239897  non-null values
dtstamp               239897  non-null values
dtypes: float64(4), object(1) 
```

那就是组成 bar 的 NaN 值被替换为`foo`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-21T15:38:41.700

您可以直接使用fillna并将结果分配给列'bar'

```
df['bar'].fillna(df['foo'], inplace=True)
del df['foo'] 
```

一般示例：

```
import pandas as pd
#creating the table with two missing values
df1 = pd.DataFrame({'a':[1,2],'b':[3,4]}, index = [1,2])
df2 = pd.DataFrame({'b':[5,6]}, index = [3,4])
dftot = pd.concat((df1, df2))
print dftot
#creating the dataframe to fill the missing values
filldf = pd.DataFrame({'a':[7,7,7,7]})

#filling 
print dftot.fillna(filldf) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-10T21:38:40.860

尝试这个：

```
pandas.concat([df['foo'].dropna(), df['bar'].dropna()]).reindex_like(df) 
```

如果您希望该数据成为新列`bar`，只需将结果分配给`df['bar']`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-30T00:57:03.177

更现代的 pandas 版本（至少从 0.12 开始）具有 DataFrame 和 Series 对象的[`combine_first()`和`update()`](http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-together-values-within-series-or-dataframe-columns)方法。例如，如果您的 DataFrame 被调用`df`，您将执行以下操作：

```
df.bar.combine_first(df.foo) 
```

这只会改变列的 Nan 值`bar`以匹配`foo`列，并且会就地进行。`bar`要用 in覆盖非 Nan 值`foo`，您可以使用该`update()`方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-28T16:51:04.890

另一种选择，使用`.apply()`框架上的方法。您可以根据现有数据重新分配列...

```
import pandas as pd
import numpy as np

# get your data into a dataframe

# replace content in "bar" with "foo" if "bar" is null
df["bar"] = df.apply(lambda row: row["foo"] if row["bar"] == np.NaN else row["bar"], axis=1) 

# note: change 'np.NaN' with null values you have like an empty string 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-01T03:51:41.613

你也可以这样做`numpy`。

`df['bar'] = np.where(pd.isnull(df['bar']),df['foo'],df['bar'])`

# android - android在自定义视图上并排定义属性和自定义属性

> ID：10972418
> 
> 赞同：1
> 
> 时间：2012-06-10T21:13:31.123
> 
> 标签：android, android-custom-view

我创建了一个自定义视图以及相应的自定义属性。例如

```
<declare-styleable name="stripbar">
    <attr name="flowDirection" format="string"/>
</declare-styleable> 
```

和

```
public Stripbar(Context context, AttributeSet attrs)
{
super(context, attrs);

TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.stripbar);
CharSequence flowDirection = ta.getString(R.styleable.stripbar_flowDirection);

String text = attrs.getAttributeValue("android", "text"); 
} 
```

和

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:ns="http://schemas.android.com/apk/res/com.ns">

            <com.ns.Stripbar
                    android:id="@+id/aaa"
                    ns:flowDirection="RightToLeft"
                    android:text=”yoo hoo”/> 
```

我收到属性文本的空值。我也知道[这一点](https://stackoverflow.com/questions/7877172/how-do-you-get-android-tag-values-in-a-custom-view)，不知道如何解决这个问题。

为了澄清，我需要并排获取我的自定义属性值以及android预定义的属性值？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:56:57.177

问题是您`R.styleable.stripbar`实际上是一个仅包含您的`flowDirection`属性的整数数组。

要解决这个问题，您应该能够将您的替换`context.obtainStyledAttributes(attrs, R.styleable.stripbar);`为 `context.obtainStyledAttributes(attrs, new int[]{R.attr.flowDirection, android.R.attr.text});`

然后，您应该能够用 替换`ta.getString( R.styleable.stripbar_flowDirection )`并`ta.getString(0)`获取文本`ta.getString(1)`。

# android - 为什么我的数组列表只更改一个元素中的数据？

> ID：10972421
> 
> 赞同：1
> 
> 时间：2012-06-10T21:14:00.893
> 
> 标签：android, listview, arraylist, android-contacts, phone-number

我有 3 个数组列表。**最终目标是将列表视图中的所有电话号码更改为联系人姓名。**

**fetchContactNumbers()**返回我设备中所有电话号码 (31) 的列表。

**fetchContactNames()**返回我设备中所有联系人姓名 (31) 的列表。

**newList**中有 6 个电话号码。

我正在做的是根据 fetchContactNumbers() 的位置将 newList 中的数字更改为 fetchContactNames() 中的相应名称。因此，由于 fetchContactNumbers() 和 fetchContactNames() 的元素顺序正确，newList 将在 fetchContactNumbers() 中查找匹配项，索引该位置，然后使用 fetchContactnames() 中的该位置将 newList 中的数字设置为其代表名称。这是我为测试更清晰的图片而制作的示例：

**作为控制台应用程序测试的示例：http:** [//pastebin.com/pApHNkXa](http://pastebin.com/pApHNkXa)

这是我活动中的代码：

```
 // change displayed numbers into contact names
    for(int i = 0; i < newList.size(); i++){
        int index = fetchContactNumbers().indexOf(newList.get(i));
        if(fetchContactNumbers().contains(newList.get(i))){

            newList.set(i, this.fetchContactNames().get(index));
        }
    } 
```

从那里，newList 被传递到我的 CustomAdapter 类中以填充我的列表视图。

上述代码的问题（根据我的示例是正确的）是当我在我的应用程序中运行它时，**只有 newList.get(3) 更改为正确的名称。**

有谁知道为什么只有一个名字在改变而不是全部？我检查了 logcat，它显示相同的东西，没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:46:34.997

您可以按如下方式构建地图。如果您重视字母排序而不是效率，请使用 TreeMap 而不是 HashMap。

```
 Map<String,String> contacts = new HashMap<String,String>;
    List<String> numbers = fetchContactNumbers();
    List<String> names = fetchContactNames();

    for(int i = 0; i < numbers.size(); i++)
    {
        contacts.put(numbers.get(i),names.get(i));
    } 
```

确保您还导入了 HashMap 和 Map

`import java.util.HashMap;`

`import java.util.Map;`

然后只需重写您的 CustomAdapter 即可为 HashMap 工作。[下面](http://www4.ncsu.edu/~kaltofen/courses/Languages/JavaExamples/jgl3.1.0/doc/api/com.objectspace.jgl.examples.HashMapExamples.html)是一些关于如何使用 HashMap 的示例

# haskell - Haskell中无限列表中术语的延迟评估

> ID：10972429
> 
> 赞同：42
> 
> 时间：2012-06-10T21:15:33.057
> 
> 标签：haskell, lazy-evaluation

我对像下面这样的无限列表的运行时性能很好奇：

```
fibs = 1 : 1 : zipWith (+) fibs (tail fibs) 
```

这将创建斐波那契数列的无限列表。

我的问题是，如果我执行以下操作：

```
takeWhile (<5) fibs 
```

`fibs`评估列表中的每个术语多少次？似乎由于`takeWhile`检查列表中每个项目的谓词函数，`fibs`列表将多次评估每个术语。前 2 个学期免费提供。当`takeWhile`想要评估 `(<5)`第三个元素时，我们会得到：

```
1 : 1 : zipWith (+) [(1, 1), (1)] => 1 : 1 : 3 
```

现在，一旦`takeWhile`想要评估`(<5)`第 4 个元素：递归性质`fibs`将再次构造列表，如下所示：

```
1 : 1 : zipWith (+) [(1, 2), (2, 3)] => 1 : 1 : 3 : 5 
```

当我们想要评估第 4 个元素的值时，似乎需要再次计算第 3 个元素。此外，如果谓词 in`takeWhile`很大，则表明该函数正在执行更多所需的工作，因为它多次评估列表中的每个前面的元素。我的分析是正确的还是 Haskell 做了一些缓存来防止这里的多次评估？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-10T22:26:00.587

这是一个自引用的惰性数据结构，其中结构的“较晚”部分按名称引用较早的部分。

最初，该结构只是一个未计算的指针返回自身的计算。随着它的展开，价值在结构中被创造出来。稍后对结构中已计算部分的引用能够找到已经在那里等待它们的值。无需重新评估零件，也无需额外工作！

内存中的结构开始只是一个未计算的指针。一旦我们查看第一个值，它看起来像这样：

```
> take 2 fibs 
```

![在此处输入图像描述](../Images/93a21bb31ea799daa872bc10fa55edff.png)

（指向 cons 单元格的指针，指向 '1'，尾部保存第二个 '1'，以及指向函数的指针，该函数保存对 fibs 的引用和 fibs 的尾部。

再评估一个步骤会扩展结构，并滑动引用：

![在此处输入图像描述](../Images/6fc41bf32de89d3947626854ab09e16a.png)

所以我们展开结构，每次都会产生一个新的未评估尾部，这是一个闭包，包含对最后一步的第一个和第二个元素的引用。这个过程可以无限继续:)

而且因为我们通过名称引用先前的值，GHC 很乐意为我们将它们保留在内存中，因此每个项目只评估一次。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-10T21:38:37.063

插图：

```
module TraceFibs where

import Debug.Trace

fibs :: [Integer]
fibs = 0 : 1 : zipWith tadd fibs (tail fibs)
  where
    tadd x y = let s = x+y
               in trace ("Adding " ++ show x ++ " and " ++ show y
                                   ++ "to obtain " ++ show s)
                        s 
```

哪个生产

```
*TraceFibs> fibs !! 5
Adding 0 and 1 to obtain 1
Adding 1 and 1 to obtain 2
Adding 1 and 2 to obtain 3
Adding 2 and 3 to obtain 5
5
*TraceFibs> fibs !! 5
5
*TraceFibs> fibs !! 6
Adding 3 and 5 to obtain 8
8
*TraceFibs> fibs !! 16
Adding 5 and 8 to obtain 13
Adding 8 and 13 to obtain 21
Adding 13 and 21 to obtain 34
Adding 21 and 34 to obtain 55
Adding 34 and 55 to obtain 89
Adding 55 and 89 to obtain 144
Adding 89 and 144 to obtain 233
Adding 144 and 233 to obtain 377
Adding 233 and 377 to obtain 610
Adding 377 and 610 to obtain 987
987
*TraceFibs> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-10T21:31:33.267

当在 Haskell 中评估某些东西时，只要它被同名¹引用，它就会保持评估状态。

在下面的代码中，列表`l`只被评估一次（这可能很明显）：

```
let l = [1..10]
print l
print l -- None of the elements of the list are recomputed 
```

即使某些东西被部分评估，该部分仍然被评估：

```
let l = [1..10]
print $ take 5 l -- Evaluates l to [1, 2, 3, 4, 5, _]
print l          -- 1 to 5 is already evaluated; only evaluates 6..10 
```

* * *

在您的示例中，当`fibs`评估列表的元素时，它会保持评估状态。由于`zipWith`引用实际`fibs`列表的参数，这意味着压缩表达式将在计算`fibs`列表中的下一个元素时使用已经部分计算的列表。这意味着没有元素被评估两次。

¹这当然不是语言语义严格要求的，但在实践中总是如此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-10T22:39:31.627

这样想吧。该变量`fib`是指向惰性值的指针。（您可以将下面的惰性值视为一种数据结构，例如（不是真正的语法）`Lazy a = IORef (Unevaluated (IO a) | Evaluated a)`；即，它一开始是用 thunk 未评估的；然后当它被评估时，它“改变”为记住该值的东西。）因为递归表达式使用变量`fib`，它们有一个指向相同惰性值的指针（它们“共享”数据结构）。有人第一次评估`fib`时，它会运行 thunk 来获取值，并且会记住该值。而且因为递归表达式指向*相同*的惰性数据结构，所以当他们评估它时，他们已经看到了评估的值。当他们遍历惰性“无限列表”时，内存中只会有一个“部分列表”；`zipWith`将有两个指向“列表”的指针，它们只是指向同一“列表”的先前成员的指针，因为它以指向同一列表的指针开始。

请注意，这并不是真正的“记忆”；这只是引用相同变量的结果。函数结果一般没有“记忆”（以下将是低效的）：

```
fibs () = 0 : 1 : zipWith tadd (fibs ()) (tail (fibs ())) 
```

# php - PHP 函数返回意外值

> ID：10972433
> 
> 赞同：0
> 
> 时间：2012-06-10T06:36:35.563
> 
> 标签：php, arrays, function

好的，我是新来的，我整天都在努力解决这个问题，我有两个函数一个调用另一个，但我的函数只返回最后一个值，例如`29`当它应该返回多个值时。想知道如何解决这个问题，以便我的函数返回所有值。

这是我的PHP代码。

```
function parent_comments(){
    if(articles_parent_comments_info($_GET['article_id']) !== false){
        foreach(articles_parent_comments_info($_GET['article_id']) as $comment_info){
            $comment_id = filternum($comment_info['comment_id']);
            reply_comment_count($comment_id);
        }
    }
}

function reply_comment_count($parent_id){
    if(articles_reply_comments_info($_GET['article_id']) !== false){
        foreach(articles_reply_comments_info($_GET['article_id']) as $reply_info){
            $comment_id = filternum($reply_info['comment_id']);
            $reply_id = filternum($reply_info['parent_id']);

            if($parent_id === $reply_id){
                reply_comment_count($comment_id);
            }   
        }
    }

    return $comment_id;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:09:49.140

您使用递归返回您的`$comment_id`. 如果我了解您的需求，您希望将每个回复 ID 链接到一个文章 ID。

在`reply_comment_count`您返回时`$comment_id`，但由于它被递归使用并且您不保留返回的前一个 id，您只会得到最后一个。

如果你想获得很多`$comment_id`而不是只有一个，我建议你返回一个数组，`$comment_id`每次找到一个时你都会在其中推送。像这样的东西：

```
func parent_comments(){
    loop in articles to get comment_id {
         count_array = reply_comment_count(comment_id, count_array)
    }
}

func reply_comment_count(parent_id, count_array) {
    loop to get id linked to parent_id {
        if id is an article {
           count_array = reply_comment_count(id, count_array) #recursive call
        }
        else {
          count_comment = count comment linked
          count_array.push(count_comment)
        }
    }
    return count_array # when you return your count_array due to recursive call it will be filled with every count, and not only the last
} 
```

我希望这种伪语言对你来说很清楚。但是由于您只返回找到的最后一个计数，因此您将只有这个。

# android - RelativeLayout 文本视图重叠

> ID：10972436
> 
> 赞同：28
> 
> 时间：2012-06-10T21:16:44.077
> 
> 标签：android, android-layout

我有一个相当简单的 ListView 行：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/tournament_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:textSize="25dp" />

<TextView
    android:id="@+id/tournament_winner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:textSize="25dp" />

</RelativeLayout> 
```

当文本`"@+id/tournament_name"`很长时 - 它与来自的文本重叠，`"@+id/tournament_winner"`我不明白为什么。

我尝试使用`android:singleLine="false"`无济于事。我也尝试使用`android:inputType="textMultiLine"`文档说`android:singleLine="false"`已弃用，但随后我收到警告：`Attribute android:inputType should not be used with <TextView>: Change element type to <EditText> ?`所以这里也不好。

我也尝试过使用`android:ellipsize="end"`，但这不起作用。我认为这是因为左侧的文本`TextView ("@+id/tournament_name")`不够长，无法填满整个宽度`ListView`（此处没有播种代码）。

我确信如果我使用`android:layout_width="wrap_content"`两个 TextView 字段不应该重叠。

这是一个例子（见第二行）：

![在此处输入图像描述](../Images/7fa4230aa3d2693ab233d63a9d65f328.png)

任何进一步的想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-23T09:59:25.023

```
 android:layout_toLeftOf="@id/tournament_winner" in First TextView. 
```

也设置了`android:maxLines="1"`，`Fix width for tournament winner`因为当它变得很长时，锦标赛名称看不到......

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tournament_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/tournament_winner"
        android:maxLines="1"
        android:text="NAMEEEEEEEEEEEEEEEEEEEEEEEEEEE"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/tournament_winner"
        android:layout_width="wrap_content" android:layout_marginLeft="10dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="WINER"
        android:textSize="25dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-21T18:17:44.753

非常感谢您的回答 - 抱歉，我花了一些时间回复。我最终使用了您的`android:layout_toLeftOf="@+id/tournament_winner"`，但留下了单行和左侧的边距未使用，因为结果对我来说似乎很完美（希望其他设备也是如此）。

不过有一件事 - 在第一个文本视图（锦标赛名称）中，我必须使用`android:layout_toLeftOf="@+id/tournament_winner"`而不是`android:layout_toLeftOf="@id/tournament_winner"`- 注意添加的**+**。出于某种原因，我使用错误`android:layout_toLeftOf="@id/tournament_winner"`：*错误：找不到与给定名称匹配的资源...*所以似乎有可能并且需要在调用它时定义资源，因为系统之前不知道它它被定义了。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/tournament_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/tournament_winner"            
    android:layout_alignParentLeft="true"        
    android:textSize="25dp" />

<TextView
    android:id="@+id/tournament_winner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"         
    android:layout_alignParentRight="true"
    android:textSize="25dp" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-06-30T06:16:19.117

您可以使用单个文本视图代替两个，并在一个文本视图中简单地显示两个字符串！

# javascript - HTML5 Canvas Tileset 动画

> ID：10972437
> 
> 赞同：1
> 
> 时间：2012-06-10T21:16:58.077
> 
> 标签：javascript, html, canvas

如何在 HTML5 画布图像动画中做？

我现在有这个代码：http: [//jsfiddle.net/WnjB6/1/](http://jsfiddle.net/WnjB6/1/)

在这里我可以添加类似的动画 ->`Animation.add('stand', [0, 1, 2, 3, 4, 5]);`

但是如何播放这个动画呢？我的图像绘制功能是->`drawTile(canvasX, canvasY, tile, tileWidth, tileHeight);`

`Animation['stand']; return 0, 1, 2, 3, 4, 5`

当我运行 Animation.play('stand') 从 'stand' 数组运行动画时，我需要类似的东西。

我正在尝试像有一天那样做这件事，但没有更多的想法。:(

感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:41:13.263

给你！

[http://jsfiddle.net/WnjB6/5/](http://jsfiddle.net/WnjB6/5/)

我添加了跟踪简单动画所需的所有状态，还添加了一种使动画重复的方法。

您可能不想让动画重复，而是让它总是有一个“默认”动画循环运行并且动画开始会中断它。

如果您希望“站立”一直播放然后“攻击”或发生某些事情，然后在“攻击”完成后返回“站立”，这将很有用。但那是另一天！

# opencv - 从 OpenCV 中的 findHomography 中检测垃圾单应性？

> ID：10972438
> 
> 赞同：25
> 
> 时间：2012-06-10T21:17:07.413
> 
> 标签：opencv, computer-vision, homography

我正在使用`findHomography`点列表并将结果发送到`warpPerspective`.

问题是有时结果是完全垃圾，结果图像由奇怪的灰色矩形表示。

如何检测何时`findHomography`向我发送不良结果？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-11T13:39:39.943

您可以对输出执行几个健全性测试。在我的头顶上：

1.  计算单应性的行列式，看看它是否太接近于零而不舒适。
2.  更好的是，计算它的 SVD，并验证第一个奇异值与最后一个奇异值的比率是否正常（不太高）。任一结果都会告诉您矩阵是否接近奇异矩阵。
3.  计算图像角及其中心的图像（即当您将单应性应用于这些角和中心时获得的点），并验证它们是否有意义，即它们是否在图像画布内（如果您希望它们是)? 他们彼此分开了吗？
4.  使用单应性在 matlab/octave 中绘制您拟合单应性的输出（数据）点以及它们从输入点计算的值，并验证它们是否接近（即误差很低）。

导致垃圾结果的常见错误是输入和输出点列表的错误排序，这导致拟合例程使用错误的对应关系工作。检查您的索引是否正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-23T07:37:14.563

理解退化单应性情况是关键。例如，如果您的点共线或接近共线，则无法获得良好的单应性。此外，巨大的灰色方块可能表示极端缩放。这两种情况都可能源于最终单应性计算中的内点很少或映射错误。

为确保这种情况永远不会发生：
1\. 确保两幅图像中的点分布良好。
2.确保至少有10-30个对应关系（如果噪音很小，4个就足够了）。
3\. 确保点正确匹配并且变换是单应性的。

要找到不良的单应性，请将找到的 H 应用于您的原始点，并查看与您的预期点的分离，即`|x2-H*x1| < Tdist`，`Tdist`您的距离误差阈值在哪里。如果只有少数点满足此阈值，则您的单应性可能很差，并且您可能违反了上述要求之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T16:45:38.407

但这取决于您用来计算单应性的点对应...只要想一想您正在尝试找到将线映射到线（从一个平面到另一个平面）的转换，因此点对应的任何可能配置都不会给你一个创建漂亮图像的单应性。单应性甚至可能将一些点映射到无穷大。

# object - KnockoutJS - 可观察对象不起作用

> ID：10972439
> 
> 赞同：0
> 
> 时间：2012-06-10T21:17:11.947
> 
> 标签：object, knockout.js, observable

是否可以在可观察对象中绑定不存在的属性？因为在我映射它之后，我看不到结果。

[例子](http://jsfiddle.net/66Ton99/wF7xY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:58:52.443

我不知道一个干净的方式，但你可以这样做：

```
<div data-bind="text: data().field1 ? data().field1() : ''"></div>​ 
```

现在（出于某种原因，不太清楚为什么）你需要明确地传达 observable 的值已经改变并且视图应该被更新：

```
ko.mapping.fromJS(Data, {}, model.data);
model.data.valueHasMutated(); 
```

[http://jsfiddle.net/wF7xY/1/](http://jsfiddle.net/wF7xY/1/)

# css - 是否可以将 Facebook Like 按钮的样式设置为内联

> ID：10972441
> 
> 赞同：1
> 
> 时间：2012-06-10T21:17:52.360
> 
> 标签：css, facebook, facebook-like

我想`data-show-faces="true"`在我的 FB like 按钮上显示面孔（我想在与按钮相同的行中显示面孔，而不是在新行中。

有没有办法配置控件来做到这一点，或者在css中安全地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:22:58.853

据我所知，没有好的方法可以做到这一点。Facebook 控制在您使用时呈现的 iframe，`fb:like`并且出于隐私原因，他们不会向您提供喜欢该对象的用户（这些面孔是针对正在查看它们的用户进行个性化的）。

# android - Android：php POST 中的数组

> ID：10972442
> 
> 赞同：1
> 
> 时间：2012-06-10T21:18:07.023
> 
> 标签：android, arrays, http-post

我正在做一个应用程序，它使用一些 php 脚本与 mysql 数据库交互。我想知道是否可以从 android 活动在 php POST 中发送和排列？

这是我目前使用的代码：

```
 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("userID", String.valueOf(userID))); 
```

但我认为发送和数组会比一次发送一个 ID 要好得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:37:50.533

我会生成一个 JSON/XML 文档。您可以在 Android 平台上轻松生成特别是 JSON 对象。

有很多关于[在 Android 中生成 JSON](http://localtone.blogspot.com/2009/07/post-json-using-android-and-httpclient.html)和[在 PHP 中读取/解析 JSON 的](http://webhole.net/2009/08/31/how-to-read-json-data-with-php/)示例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:59:13.927

我在这里看到了部分解决方案：

[在此处输入链接描述](https://stackoverflow.com/questions/5281107/send-the-contents-of-android-arraylist-to-php)

在他的例子中，他只是做了一个这样的 for 循环：

```
 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

            //friendID is an array of friends ID   
    for (int i=0;i<friendID.length;i++){
        nameValuePairs.add(new BasicNameValuePair("userAsked[]", String.valueOf(friendID[i])));

    } 
```

问题是：如何在我的 php 文件中使用它？是不是就这么简单：

```
$asked[] = $_POST['userAsked[]']; 
```

似乎有点太容易了：s

# ruby-on-rails - Rails 加载完成后运行代码？

> ID：10972450
> 
> 赞同：9
> 
> 时间：2012-06-10T21:18:54.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我有一个需要每分钟执行一次的周期性任务（使用delayed_job）。如果系统中不存在这样的任务，我希望 Rails 在加载完成后立即自动将其排队。

在整个 Rails 引导流程结束时运行一些代码的好地方是什么？有人建议 config/environments/development.rb （或其他环境），但是当我从那里排队作业时，delayed_job 给了我 ActiveRecord 问题。

我查阅了[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)，似乎也没有明确的位置可以存放那种代码。

这种部署后设置是否可能在我的应用程序代码外部完成，可能通过 rake 或其他方式完成？有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T02:39:54.943

关于[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)，对不起，我们正在努力重写它。对于您的问题，我会`config.after_initialize`在您的 application.rb 中尝试

```
def after_initialize(&block)
  ActiveSupport.on_load(:after_initialize, :yield => true, &block)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T21:25:39.317

在初始化程序目录中添加您的代码。

[http://guides.rubyonrails.org/configuring.html#using-initializer-files](http://guides.rubyonrails.org/configuring.html#using-initializer-files)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T21:28:21.517

你真的有两个选择

1）将其添加到初始化程序目录中，这应该没问题。

2）将它添加到 application.rb 的最后，这不太干净，但此时它会准备好初始化程序之类的东西；p 所以如果 1）由于 AR 问题而失败，请执行 2）

# c - 内存中的哪些部分是可写的？

> ID：10972451
> 
> 赞同：3
> 
> 时间：2012-06-10T21:19:22.800
> 
> 标签：c, linux, elf

我正在运行一些 C 代码，在 Linux 上编译为 32 位 x86。我正在尝试访问一些内存。显然我可以写入`.bss`和写入`.data`堆栈。前段时间，[.ctors 和 .dtors 段曾经是可写](https://unix.stackexchange.com/questions/8062/dtors-looks-writable-but-attempts-to-write-segfault)的，但似乎它们已经消失了。

如果没有反复试验，我如何找出这些段映射到内存中的哪些部分？如何找出哪些地址映射到可写内存，哪些是可执行的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T02:45:43.927

> 如果没有反复试验，我如何找出这些段映射到内存中的哪些部分？

当您谈论`ELF`可执行文件时，节和段具有特定的含义，并且您上面的用法与该含义不一致。

ELF 部分在加载时无关紧要，只有（可加载）段才重要。

该`readelf -l a.out`命令准确地提供了从 ELF 部分到段的映射。例如

```
readelf -l /bin/date

Elf file type is EXEC (Executable file)
Entry point 0x8048c60
There are 6 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  PHDR           0x000034 0x08048034 0x08048034 0x000c0 0x000c0 R E 0x4
  INTERP         0x0000f4 0x080480f4 0x080480f4 0x00013 0x00013 R   0x1
      [Requesting program interpreter: /lib/ld-linux.so.2]
  LOAD           0x000000 0x08048000 0x08048000 0x05fe0 0x05fe0 R E 0x1000
  LOAD           0x006000 0x0804e000 0x0804e000 0x00208 0x00334 RW  0x1000
  DYNAMIC        0x006078 0x0804e078 0x0804e078 0x000c8 0x000c8 RW  0x4
  NOTE           0x000108 0x08048108 0x08048108 0x00020 0x00020 R   0x4

 Section to Segment mapping:
  Segment Sections...
   00
   01     .interp
   02     .interp .note.ABI-tag .hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata
   03     .data .eh_frame .dynamic .ctors .dtors .jcr .got .bss
   04     .dynamic
   05     .note.ABI-tag 
```

这告诉您`.ctors`映射到可写的段 3（此输出来自古代`UnitedLinux 1.0`分布）。

现在，`.ctors`被放入一个不同于 的段中`.data`，并在重定位后通过特殊`GNU_RELRO`段保护不写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:57:36.810

查看`/proc/$pid/maps`（或使用该`pmap`实用程序）。它会告诉你比你想知道的更多关于内存区域的信息。

# c# - 如何使用 NHibernate 查询键值集合？

> ID：10972456
> 
> 赞同：3
> 
> 时间：2012-06-10T21:21:06.653
> 
> 标签：c#, nhibernate, queryover

我有以下场景，一个**客户可以在几家****银行**拥有银行账户。**此关系在Customer**类中被描述为 IDictionary （使用*map*标签映射）：

```
public class Customer
{
    public virtual IDictionary<Bank, string> Banks
    {
        get { return _Banks; }
        set { _Banks = value; }
    }
    private IDictionary<Bank, string> _Banks = new Dictionary<Bank, string>();
} 
```

IDictionary 中的每个键代表**客户拥有帐户的****银行**，字符串值是与此问题无关的简单状态。

 **我想做的是一个 NHibernate 查询来检索在指定**Bank**中拥有帐户的所有**客户**。我在 Bank 类中尝试了这个（因此*this*关键字指的是银行）：

 ***```
IList<Customer> customers = session.QueryOver<Customer>()
                                   .Where(x => x.Banks.Keys.Contains(this))
                                   .List(); 
```

甚至认为上面的查询在我尝试运行时编译没有错误，我得到以下异常：

> System.Exception：无法识别的方法调用：System.Collections.Generic.ICollection`1[[Finance.Bank, Finance, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]:Boolean Contains(Finance.Bank)

那么我怎样才能正确地执行这种查询呢？谢谢！

PS：[这个 SO question](https://stackoverflow.com/questions/1330196/nhibernate-criteria-collection-contains)展示了如何为*ISet*集合执行此操作，并且[这个 SO question](https://stackoverflow.com/questions/2769351/nhibernate-query-against-the-key-field-of-a-dictionary-map)指出我尝试使用 ICriteria API 可能无法实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:09:30.687

经过更多研究后，我意识到**Contains**方法中包含的逻辑可能无法以通用方式轻松转换为 SQL，这就是我得到该异常的原因。

对于任何有兴趣的人，我想出了以下解决方法：

```
IList<Guid> customerIds = session.CreateSQLQuery(
            "SELECT Customer_ID FROM Banks WHERE Bank_ID = '" + this.ID + "'")
            .List<Guid>();

Guid[] array = new Guid[customerIds.Count];
customerIds.CopyTo(array, 0);

IList<Customer> customers = session.QueryOver<Customer>()
                .Where(Restrictions.In("ID", array)).List(); 
```

首先，它从给定**Bank_ID的关联表中获取所有****Customer_ID**。然后在第二个查询中使用所得的**Customer_ID**列表来检索**客户**对象。

 ******PS：这个解决方案适用于**SQL Server**，但是当我切换到**MySql**时，我不得不稍微改变它，因为它们以不同的方式表示[Guid 结构](http://msdn.microsoft.com/en-us/library/system.guid.aspx)。***********

# java - Java中PriorityQueue中的奇怪排序

> ID：10972459
> 
> 赞同：2
> 
> 时间：2012-06-10T21:21:20.523
> 
> 标签：java, collections, priority-queue

我正在尝试使用优先级队列来保持整数的有序列表。在一个简单的例子中：

```
PriorityQueue<Integer> queue = new PriorityQueue<>();
queue.offer(3000);
queue.offer(1999);
queue.offer(999);
for(Integer i : queue)
    System.out.println(i); 
```

这打印

```
999
3000
1999 
```

这不是我所期望的考虑自然 oding。

我只是想在不删除或添加队列（用作排序列表）的情况下进行迭代。我还能以简单的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T21:26:08.340

PriorityQueue 是一个为快速查找尾部或头部值而优化的集合，使用称为堆的部分有序树结构（在维基百科上查找）。如果你弹出元素，它们将被排序。如果要迭代，请改用 SortedSet，它还存储已排序的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T21:28:13.930

这是 PriorityQueue 的一个非常隐蔽的问题：引用[Api](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

> 方法 iterator() 中提供的 Iterator 不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用 Arrays.sort(pq.toArray())。

改为使用 Poll 来获取有序的头部

# prolog - XSB 无程序适用/2

> ID：10972462
> 
> 赞同：2
> 
> 时间：2012-06-10T21:22:00.897
> 
> 标签：prolog, xsb

我正试图进入 HiLog 并从一开始就被卡住了。即使归结为最教科书的例子：

```
:- hilog sum.
sum(X,Y,Z):-Z is X + Y.

:- import bagReduce/4 from aggregs.

f(_):- bagReduce([1,2],Res,sum,0). 
```

编译器 barfs ：

```
[Existence (No procedure usermod : apply / 2 exists)] 
```

当然缺少一些非常基本的东西（真的必须导入 apply 吗？如果是这样 - 从哪里开始？）

# windows-phone-7 - 防止 IE Mobile 自动缩放网页

> ID：10972466
> 
> 赞同：0
> 
> 时间：2012-06-10T21:22:28.323
> 
> 标签：windows-phone-7, media-queries, viewport, ie-mobile

我无法让 IE mobile 停止自动调整我的网站设计大小。我使用三个带有媒体查询的样式表在不同的设备屏幕上以不同的方式显示网站。我已经包含了元标记，因此它在 IE 移动设备上显示移动样式表，但它一直将视口设置为 320X480，而不是使用 480X800 的实际大小。如何强制它以实际屏幕尺寸显示，而不是缩放为更小的分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T13:14:33.603

就个人而言，我总是使用以下内容：

```
<meta name="mobileoptimized" content="0" /> 
```

这是一个非常有用的页面：http: [//msdn.microsoft.com/en-us/library/dd938878.aspx](http://msdn.microsoft.com/en-us/library/dd938878.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:35:30.350

出于兼容性原因，IE Mobile 将 width=device-width 解释为 width=320（纵向模式）和 width=480px（横向模式）。有关完整详细信息，请参阅[http://blogs.msdn.com/b/iemobile/archive/2010/11/22/the-ie-mobile-viewport-on-windows-phone-7.aspx](http://blogs.msdn.com/b/iemobile/archive/2010/11/22/the-ie-mobile-viewport-on-windows-phone-7.aspx)。

据我所知，强制 IE Mobile 以“实际屏幕尺寸”显示的唯一方法是将视口值硬编码为 width=480（纵向模式）。请注意，这可能会在其他浏览器中产生意想不到的副作用，甚至在您切换到横向模式时（缩放级别太小/太大）。

# php - 如何组合这个数组 PHP

> ID：10972467
> 
> 赞同：-3
> 
> 时间：2012-06-10T21:22:31.473
> 
> 标签：php, arrays

我想组合下面显示的三个数组，但我不知道该怎么做，我想取`companyCode`每个数组的 并使其成为一个数组。

我有一个这样的数组，

```
Array(
   [0] => Array(
             [companyCode] => SimpleXMLElement Object(
                            [0] => 'AD'
                     )
             [name] => SimpleXMLElement Object(
                            [0] => 'NYCT01'
                     )
             [vehicleRentalPrefType] => SimpleXMLElement Object(
                            [0] => 'ECAR'
                     )
             [rateAmount] => SimpleXMLElement Object(
                            [0] => '295.62'
                     )
         );
   [1] => Array(
             [companyCode] => SimpleXMLElement Object(
                            [0] => 'AD'
                     )
             [name] => SimpleXMLElement Object(
                            [0] => 'NYCT01'
                     )
             [vehicleRentalPrefType] => SimpleXMLElement Object(
                            [0] => 'SCAR'
                     )
             [rateAmount] => SimpleXMLElement Object(
                            [0] => '356.25'
                     )
   [2] => Array(
             [companyCode] => SimpleXMLElement Object(
                            [0] => 'AD'
                     )
             [name] => SimpleXMLElement Object(
                            [0] => 'NYCT01'
                     )
             [vehicleRentalPrefType] => SimpleXMLElement Object(
                            [0] => 'PCAR'
                     )
             [rateAmount] => SimpleXMLElement Object(
                            [0] => '562.36'
                     )
          )
) 
```

我要这个：

```
Array(
    [AD] => Array(
              [NYCT01] => Array(
                        [ECAR] => Array(
                                  [0] => '295.62'
                          )
                        [SCAR] => Array(
                                  [0] => '356.25'
                          )
                        [PCAR] => Array(
                                  [0] => '562.36'
                          )
                 )
        )
) 
```

我该怎么做，我试图做一些循环，但我没有得到任何结果，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:49:12.557

Here's a function I created to group arrays a couple of days ago:

**for PHP 5.3 and above**

```
class Fx
{
    public static function GroupBy(&$arr, $groupby, $valueFunctions = null)
    {
        $groupby = is_array($groupby) ? $groupby : array($groupby);
        $valueFunctions = is_array($valueFunctions) ? $valueFunctions : array($valueFunctions);

        $group1 = array();
        foreach($arr as $elem)
        {
            $group = is_callable($groupby[0]) ? $groupby[0]($elem) : $elem[$groupby[0]];
            $group1[$group][] = is_callable($valueFunctions[0]) ? $valueFunctions[0]($elem) : (is_null($valueFunctions[0]) ? $elem : $elem[$valueFunctions[0]]);
        }

        if(count($groupby) > 1)
        {
            $group2 = array();
            $gb_next = array_slice($groupby, 1);
            $vf_next = (count($valueFunctions) > 1) ? array_slice($valueFunctions, 1) : null;
            foreach($group1 as $group => $elems)
            {
                $group2[$group] = self::GroupBy($elems, $gb_next, $vf_next);
            }

            return $group2;
        }

        return $group1;
    }
} 
```

**>=5.3 example**

```
$new = Fx::GroupBy(
    $arr, 
    array(
        function($elem){ return (string)$elem['companyCode'][0]; },
        function($elem){ return (string)$elem['name'][0]; },
        function($elem){ return (string)$elem['vehicleRentalPrefType'][0]; }
    ),
    array(
        null,
        null,
        function($elem){ return (float)$elem['rateAmount'][0]; }
    )
);

print_r($new); 
```

**for PHP 5.2 and possibly under**

```
class Fx
{
    public static function GroupBy(&$arr, $groupby, $valueFunctions = null)
    {
        $groupby = is_array($groupby) ? $groupby : array($groupby);
        $valueFunctions = is_array($valueFunctions) ? $valueFunctions : array($valueFunctions);

        $group1 = array();
        foreach($arr as $elem)
        {
            $gbIsFunc = (substr($groupby[0], 0, 5) == 'func:');
            $gbFunc = substr($groupby[0], 5);

            $vIsFunc = (substr($valueFunctions[0], 0, 5) == 'func:');
            $vFunc = substr($valueFunctions[0], 5);

            $group = $gbIsFunc ? $gbFunc($elem) : $elem[$groupby[0]];
            $group1[$group][] = $vIsFunc ? $vFunc($elem) : (is_null($valueFunctions[0]) ? $elem : $elem[$valueFunctions[0]]);
        }
        if(count($groupby) > 1)
        {
            $group2 = array();
            $gb_next = array_slice($groupby, 1);
            $vf_next = (count($valueFunctions) > 1) ? array_slice($valueFunctions, 1) : null;
            foreach($group1 as $group => $elems)
            {
                $group2[$group] = self::GroupBy($elems, $gb_next, $vf_next);
            }

            return $group2;
        }

        return $group1;
    }
} 
```

**<=5.2 example**

```
function gbFunc1($elem){ return (string)$elem['companyCode'][0]; }
function gbFunc2($elem){ return (string)$elem['name'][0]; }
function gbFunc3($elem){ return (string)$elem['vehicleRentalPrefType'][0]; }
function vFunc3($elem){ return (float)$elem['rateAmount'][0]; }

$new = Fx::GroupBy($arr, array('func:gbFunc1', 'func:gbFunc2', 'func:gbFunc3'), array(null, null, 'func:vFunc3'));

print_r($new); 
```

# ios - 一个 uitextview 在点击并检测到链接时成为第一响应者

> ID：10972476
> 
> 赞同：3
> 
> 时间：2012-06-10T21:23:12.483
> 
> 标签：ios, xcode4

我正在尝试制作一个 UITextView 来检测链接并且当点击没有落在链接上时变得可编辑。

原生 iphone 笔记应用程序展示了这种行为，simplenote 也是如此。

此处概述了我找到的最接近的解决方案：http: [//blog.stevex.net/2012/05/editable-uitextview-with-links/](http://blog.stevex.net/2012/05/editable-uitextview-with-links/) 使用此代码：

```
// Add the tap gesture recogniser to the view.
- (void)configureTextView {
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self    action:@selector(textViewTapped:)];
textView.editable = NO;
textView.dataDetectorTypes = UIDataDetectorTypeLink;
[textView addGestureRecognizer:recognizer];
}

// Notification from the recogniser that the UITextView was tapped
- (void)textViewTapped:(UIGestureRecognizer *)recognizer {
UITextView *textView = (UITextView *)recognizer.view;
textView.editable = YES;
[textView becomeFirstResponder];
}

// UITextViewDelegate method
- (void)textViewDidEndEditing:(UITextView *)textView {
textView.editable = NO;
} 
```

这个解决方案的问题是它需要长按才能点击链接。

# performance - Lithium 中的 MongoDB 查询 - 我应该使用 `order` 还是 `$orderby`，还是没关系？

> ID：10972477
> 
> 赞同：2
> 
> 时间：2012-06-10T21:23:21.317
> 
> 标签：performance, mongodb, lithium

以下两个标准集在使用 Lithium 和 MongoDB 时给出了相同的结果。两者都同样易于阅读和写作。出于效率原因，我应该更喜欢一个，还是一个只是锂/MongoDB的语法糖？

```
$criteria = array(
    'fields' => array('_id', 'title', 'created', 'edited', 'username'),
    'order' => {'edited' => 'ASC'},
    'limit' => 3
); 
```

和

```
$criteria = array(
    '$orderby' => array('edited' => 'ASC'),
    'fields' => array('_id', 'title', 'created', 'edited', 'username'),
    'limit' => 3
); 
```

* * *

后续问题：我真的很难找出正确的语法来使用`order`and `$orderby`，而且总的来说，我发现 Lithium 的代码很难理解。对于如何最好地接近代码库以获得更好/更快的理解，您有什么建议吗？

PS：我意识到后续问题可能不是真正的 StackOverflow 风格 - 但在 SO 和其他地方还有其他帖子暗示了这个问题（例如[超越 CRUD 的锂应用程序](https://stackoverflow.com/questions/4667741/lithium-apps-that-go-beyond-crud)）。对此的任何投入都可能非常有价值！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:50:26.910

锂转换`'order'`为 MongoBD`sort()` *[源](https://github.com/UnionOfRAD/lithium/blob/master/data/source/MongoDb.php#L477)*

MongoDB 的`$orderby`指令相当于`sort()`在一个`find()` *[源之后调用](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24orderby)*

所以两者是等价的。
我将继续使用它，`order`因为它是与任何底层数据源交互的一致且统一的 API。

希望能帮助到你

# sql-server - SQL Server 2012 经典asp连接字符串

> ID：10972481
> 
> 赞同：2
> 
> 时间：2012-06-10T21:25:17.293
> 
> 标签：sql-server, asp-classic, connection-string

我有一个 SQL Server 2012 Express 安装，其中包含`BRD`我创建的一个名为的新数据库。我还在数据库中创建了一个测试表 ( `tempDemo`) 和一个测试存储过程 ( `getStList`) `BRD`。当我在查询窗口中运行存储过程时，它可以工作，所以我相信表和存储过程是合法的。SQL Server 设置为“SQL Server 和 Windows 身份验证模式”。

然后我尝试创建一个经典 ASP 页面，然后使用以下连接字符串连接到 SQL Server：

```
objConn.ConnectionString="Provider=SQLOLEDB;Server=XPSI7\SQLEXPRESS;Database=BRD;Integrated Security=SSPI;" 
```

这失败并显示以下消息：

> “Microsoft OLE DB Provider for SQL Server 错误 '80004005' 无法打开登录请求的数据库“BRD”。登录失败。”

当我将数据库改为`MASTER`而不是`BRD`ASP页面时不会出错。我只是通过打开它然后关闭它来测试连接字符串，但它似乎工作。

我查看了对象资源管理器中的安全设置`MASTER`，`BRD`但没有发现差异。我也查看`IIS_IUSRS`了文件夹，但也没有区别 - 不确定这是否有必要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:05:25.747

SQL Server 在服务器级别验证您的登录。然后它会尝试打开您要求连接的数据库。此时，您需要将数据库级用户映射到服务器级登录名，或者使用本身具有足够权限来使用数据库的服务器级登录名。

使用 SQL Server 身份验证演示这一点的简单（但不安全）方法：

```
USE master;
GO
CREATE LOGIN foo
  WITH PASSWORD = 'bar', CHECK_POLICY = OFF;
GO
USE BRD;
GO
CREATE USER foo FROM LOGIN foo;
GO
EXEC sp_addrolemember N'db_owner', N'foo';
GO 
```

现在在您的 ASP 连接字符串中，使用：

> objConn.ConnectionString = "提供者=SQLNCLI；数据源=XPSI7\SQLEXPRESS；初始目录=BRD；用户ID=foo；密码=bar；"

您还可以将您正在使用的任何登录名映射到数据库用户，只需执行以下操作：

```
USE BRD;
GO
CREATE USER [YourDomain\IIS_IUSRwhatever] 
  FROM LOGIN [YourDomain\IIS_IUSRwhatever];
GO 
```

这将授予他们访问数据库的权限，但由您决定授予哪些权限。这假设您允许匿名访问 Web 服务器；如果 IIS 具有挑战性并接受 Windows 身份验证，则您需要为将提交其凭据的用户执行上述操作。无论哪种情况，您都应该能够继续使用您现在拥有的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:55:07.650

尝试以下连接字符串：

```
strConnection = "Provider=SQLNCLI10;Server=server_name;Database=" & BD_REMOTE_INITIAL_CATALOG & ";Uid=" & BD_REMOTE_USER_ID & "; Pwd=*****;" 
```

# javascript - 使用 Javascript 突出显示相应的名称

> ID：10972489
> 
> 赞同：0
> 
> 时间：2012-06-10T21:26:06.723
> 
> 标签：javascript, select, colors, prompt

我有一个要在浏览器中显示的名称列表：

> 艾伦、本、辛迪、丹、艾伦、弗雷德。

我希望用户能够选择*male*或*female*。
然后，我希望具有该性别的人的姓名可以更改颜色或突出显示。

有没有办法用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:34:22.180

如果我理解正确，您可以执行以下操作：

```
// step 1 create list of names with classes
<ul>
  <li class="person male">Alan</li>
  <li class="person male">Ben</li>
  <li class="person female">Cindy</li>
</ul>

// step 2 create dropdown list of genders
<select id="my-dropdown-id" name="gender">
  <option value="male">Male</option>
  <option value="female">Female</option>
</select>

// step 3 simple jQuery script
<script type="text/javascript">
  $('#my-dropdown-id').change(function() {      
    $('.person').removeClass('selected');
    $('.' + this.value).addClass('selected');
  });
</script>

<style>
  .selected{
    background: yellow;
  }
</style> 
```

这是一个非常简单的解决方案，尽管我相信它至少在理论上实现了您的想法。

# extjs4 - Extjs 组合框总是显示选择的第一个元素

> ID：10972492
> 
> 赞同：0
> 
> 时间：2012-06-10T21:26:33.687
> 
> 标签：extjs4

我是 Extjs 的新手。当我尝试将组合框与通过 AJAX 调用填充的商店一起使用时，我遇到了这个问题。我希望组合框显示以在组合框中键入的字符开头的项目，但组合框始终显示列表中的第一项。这是我的代码，

```
Ext.define('fieldModel', {
        extend : 'Ext.data.Model',
        fields : [ {
            name : 'name'
        },{
            name : 'value'
        }]
    });
    {
                xtype: 'combobox',
                id: 'startField',
                name: 'startField',
                style: 'margin-right:10px;',
                width: 230,
                fieldLabel: 'Field',
                labelAlign: 'top',
                displayField: 'name',
                valueField: 'value',
                triggerAction:'query',
                minChars:2,
                //forceSelection:true,
                //enableKeyEvents:true,
                minListWidth:150,
                //allowBlank:false,
                queryMode: 'remote',
                typeAhead: true,
                //hideTrigger: true,
                store:new Ext.data.JsonStore({
                    model: 'fieldModel',
                    //autoLoad: true,
                    //sortOnLoad : true,
                    //sortRoot: 'data',
                    proxy : {
                        type : 'ajax',
                        url: requesturl + '?action=getDate&itemid='+ preItemId,
                        reader : {
                            type : 'json',
                            root : 'data',
                        }
                    },
                    listeners :{
                        load : function( store, records, successful, operation, eOpts){
                            Ext.getCmp('startField').getStore().sort('name', 'ASC');
                        }
                    }
                }), 
```

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:53:44.417

将您的侦听器更改为 keypress 或 keyup 事件

按键（Ext.form.field.Text this，Ext.EventObject e，Object eOpts）

此事件仅在`enableKeyEvents`设置为 true 时触发。

```
listeners :{
        keypress : function( text, event, eOpts){
           Ext.getCmp('startField').getStore().sort('name', 'ASC');
        }
   } 
```

# ajax - JSONP回调成功，但包含jQueryMobile时javascript未更新.html

> ID：10972494
> 
> 赞同：0
> 
> 时间：2012-06-10T21:26:40.687
> 
> 标签：ajax, jquery, jquery-mobile, cordova

我正在使用 jQuery Mobile 构建一个 PhoneGap 应用程序。我的 JSONP 跨域通信工作正常，但包含 jQuery Mobile 时出现问题。 ***没有它，一切都按预期工作，包括在内，它停止工作。***

我已将代码简化为最简单的形式 - 使用 JSONP 序列化数据、编码和调用 CrossDomain PHP 文件。执行成功函数。我认为这可能是糟糕的 JS，但“警报”有效并且没有 JS 错误。但是 $('#section1').html("SECTION 1 - " + data.message); 不更新。 ***注意：当我删除 jQM 时，一切正常！***

下面是它调用的 HTML 和 PHP 代码。就好像 jQueryMobile AJAX 调用正在干扰 .html 代码的更新。有任何想法吗？我难住了。

**Ajax4d.htm**

```
<html><head><title>First jQueryMobile Example</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

  <script>
     $(document).ready(function() {
         $("#foo").submit(function(event) {                
             event.preventDefault();
             var $form = $(this), 
                         $inputs = $form.find("input, select, button, textarea"),
                         serializedData = $form.serialize();
             var postData = serializedData;
             var urlStr = "http://www.fohost.co/testURLd.php?";

             alert (urlStr + encodeURI(postData));                    
             $.ajax({
                  url: urlStr,
                  data: encodeURI(postData),
                  dataType: "jsonp",
                  success: function(data){
                     alert("SUCCESS callback before HTML update: " + data.message);
                     $('#section1').html("SECTION 1 - " + data.message);
                     }
                  });
             });
         }); 
</script>
</head>

<body>
    <section id="register_page" data-role="page" data-theme="b">
        <div data-role="content">
            <form id="foo" method="get" action="">
                <fieldset data-role="fieldcontain">
                    <label for="username">Username:</label>
                    <input type="text" name="username" id="username" value="Chris" placeholder="Username"/>
                </fieldset>
                <fieldset class="ui-grid-a"><input type="submit" value="Send" /></fieldset>
            </form>
        </div>
        <div id="section1">SECTION</div>
    </section>
</body>
</html> 
```

**测试URLd.php**

```
<?php
header("content-type: application/json"); 

$user = $_GET['username'];

$rtnjsonobj->success = "true";
$rtnjsonobj->user = $user;
$rtnjsonobj->message = "Stored User: " . $user;

echo $_GET['callback']. '('. json_encode($rtnjsonobj) . ')';    
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:58:24.550

使用 pageinit 而不是准备好文档..检查此链接..

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

试试这个。。

```
$( document ).delegate("#register_page" ,"pageinit", function() {

     $("#foo").submit(function(event) {                
         event.preventDefault();
         var $form = $(this), 
                     $inputs = $form.find("input, select, button, textarea"),
                     serializedData = $form.serialize();
         var postData = serializedData;
         var urlStr = "http://www.fohost.co/testURLd.php?";

         alert (urlStr + encodeURI(postData));                    
         $.ajax({
              url: urlStr,
              data: encodeURI(postData),
              dataType: "jsonp",
              success: function(data){
                 alert("SUCCESS callback before HTML update: " + data.message);
                 $('#section1').html("SECTION 1 - " + data.message);
                 }
              });
         });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:13:02.767

当您使用该`submit()`方法但触发 ajax 调用时，您并没有禁止表单提交。

`return false;`在方法的末尾添加一个`$("#foo").submit`。这将禁止页面重新加载 onclick。

# function - 如何在 C/C++ 中从 dll 调用导出的函数？

> ID：10972499
> 
> 赞同：1
> 
> 时间：2012-06-10T21:27:44.330
> 
> 标签：function, dll, call, dllexport, function-address

我的目标是通过它的地址调用一些函数。我该怎么做？

我已经为这个目标做了下一个工作，但首先（1） - 我有访问冲突（不知道为什么），第二个我有一些调用函数的问题是带有 ESP 值的 ASM ......

第一个（访问冲突的问题）：

```
#include <iostream>
#include <Windows.h>

const DWORD_PTR offset = 0x00001a90;

typedef void (__stdcall *uef)(int);

int main(void)
{
    HMODULE hModule = LoadLibrary(L"C:\\Windows\\system32\\OpenAL32.dll");

    DWORD_PTR addr = (DWORD_PTR)hModule + offset;

    uef func = (uef)offset;
    func(0);

    return 0;
} 
```

第二个（运行时的问题与 ESP 值）：

```
#include <iostream>
#include <Windows.h>

typedef void (__stdcall *uef)(int);

int main(void)
{
    HMODULE hModule = LoadLibrary(L"C:\\Windows\\system32\\OpenAL32.dll");
    uef obj = NULL;

    if(hModule != NULL)
    {
        obj = reinterpret_cast<uef>(GetProcAddress(hModule, "alEnable"));
    }

    if(obj != NULL)
    {
        (*obj)(0);
    }

    if(hModule != NULL)
    {
        FreeLibrary(hModule);
    }

    return 0;
} 
```

我该如何解决这个问题？

附言

另一个主要问题是：

**如何在运行时动态计算函数地址以便下次调用？**

谢谢，

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:40:38.380

首先，硬编码地址偏移量（const DWORD_PTR offset = 0x00001a90）存在一个主要问题（因此存在访问冲突）。不要那样做！你怎么知道offset不会因为[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)而改变？

# c# - 如何以编程方式从 .NET 和 C# 中的 SAML 断言中的数字签名参数创建 X509 证书

> ID：10972503
> 
> 赞同：0
> 
> 时间：2012-06-10T21:28:26.387
> 
> 标签：c#, .net, saml, x509

我必须验证两个 SAML 2.0 断言签名。我可以解析出所有密钥和令牌参数，现在想使用 .NET CryptoUtils.VerifySignature() 或其他一些函数来验证签名。我有已签名的文本和作为 byte[] 数组的签名以及哈希 OID。我有 RSA 和 SAML 令牌参数，例如签名值、模数、指数等。我缺少的是要发送到 .NET VerifySignature() 例程的 x509 证书。我看不到如何从参数以编程方式创建证书。

我也很感谢任何关于库、c# 和 Java 的建议，它们将处理创建、解析、验证 SAML 2.0 令牌（请求和响应）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:40:26.800

在 C# 中，您可以使用...

`System.Security.Cryptography.Xml.SignedXml.CheckSignature(System.Security.Cryptography.X509Certificates.X509Certificate2 certificate, bool verifySignatureOnly)`

...验证签名。基本上，它会像这样工作：

```
 using System.Xml;
 using System.Security.Cryptography.X509Certificates;
 using System.Security.Cryptography.Xml;
 using System.Text;

 namespace MySamlDocumentExample
 {
     public class Saml20Transaction : SignedXml
     {
         public Saml20Transaction(XmlDocument doc) 
             : base (doc)
         {

         }
     }

     public class SamlVerifier
     {
         readonly XmlDocument _mySamlDocument = new XmlDocument();

         public SamlVerifier(string saml)
         {
             _mySamlDocument.LoadXml(saml);
         }

         public X509Certificate2 X509Certificate
         {
             get
             {
                 return new X509Certificate2(
                     Encoding.ASCII.GetBytes(X509CertificateString));
             }
         }

         public string X509CertificateString
         {
             get
             {
                 XmlNodeList xmlNodeList = _mySamlDocument.GetElementsByTagName("X509Certificate");
                 return xmlNodeList[0].InnerText;
             }
         }

         public bool ValidateSignature()
         {
             Saml20Transaction saml20Transaction = new Saml20Transaction(_mySamlDocument);
             XmlNodeList xmlNodeList = _mySamlDocument.GetElementsByTagName("Signature");
             saml20Transaction.LoadXml((XmlElement)xmlNodeList[0]);
             return saml20Transaction.CheckSignature(X509Certificate, true);
         }
     }
 } 
```

# java - EJB 3 编辑数据库记录

> ID：10972505
> 
> 赞同：3
> 
> 时间：2012-06-10T21:28:57.303
> 
> 标签：java, mysql, jakarta-ee, jpa, ejb

我在使用 EJB 和 JPA 更新数据库记录时遇到问题。持久性提供者：`org.eclipse.persistence.jpa.PersistenceProvider`

当我创建记录时，我使用这种方法：

```
public void create(T entity) {
    getEntityManager().persist(entity);
} 
```

一切正常。现在我想编辑同一条记录。例如，我有一个实体：

```
@Entity
@Table(name = "OPERATION")
public class Operation implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;

    @Column(name = "OPERATION_AUTHOR")
    private String operationAuthor;

    @Column(name = "OPERATION_TYPE")
    private String operationType;

    @Column(name = "OPERATION_STATUS")
    private String operationStatus;

    @Column(name = "CREATED")
    @Temporal(value = TemporalType.DATE)
    private Date created;

    @Column(name = "COMPLETED")
    @Temporal(value = TemporalType.DATE)
    private Date completed;  

    //Getters and setters
} 
```

例如，我只想更新`operationStatus`。我正在创建一个实体，为其设置相同的记录 id 和 new `operationStatus`。为了更新我使用这种方法：

```
public void edit(T entity) {
    getEntityManager().merge(entity);
} 
```

问题是当我更新记录时，状态会正确更新，但所有其他列的值都设置为`null`不像以前那样保留。我只想更新`operationStatus`，而其他值保持不变。使用 EJB 可以做到这一点吗？我应该改变什么来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:31:51.717

首先使用 Operation op = getEntityManager().find(Operation.class,id) 加载实体。然后执行 op.setOperationStatus(value)。就是这样，它将在会话刷新/关闭时更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T21:41:37.923

问题是调用 entityManager.merge(entity) 将使用填充 java 对象的完全相同的值更新 db 行（对应于您在对象上设置的 ID）（即，除了 status 和 id 之外的所有内容都为 null）。您需要从数据库中取出对象，然后对其进行更新。

更好的选择可能是以下方法：

```
/**
 * 
 * @param id - the ID of the entity to update
 * @param operationStatus - the status to apply
 */
public void setOperationStatus(long id, String operationStatus){
    Operation o = getEntityManager().find(Operation.class,id);
    o.setOperationStatus(operationStatus);
    getEntityManager().merge(entity);
} 
```

# ant - 基于 TLS 的 Apache Ant FTP 连接

> ID：10972506
> 
> 赞同：10
> 
> 时间：2012-06-10T21:29:17.613
> 
> 标签：ant, ftp, ssl

如何在 Apache Ant 中通过 TLS 连接到 FTP？Ftp 任务似乎不支持这一点。FTP over TLS 还有其他任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-16T09:59:49.847

FTPS尚未被业界广泛接受。首选 SFTP（SSH 的一部分）。FTPS 受到与 FTP 相同的限制，并引入了一个新限制：[防火墙不兼容](https://en.wikipedia.org/wiki/FTPS#Firewall_incompatibilities)。

这很可能是该`ftp`任务不支持它的原因。正如马丁克莱顿所建议`scp`的那样。

# ruby-on-rails - 使用现有用户架构设置 facebook 身份验证架构

> ID：10972507
> 
> 赞同：0
> 
> 时间：2012-06-10T21:29:28.650
> 
> 标签：ruby-on-rails, facebook, authentication, oauth

我想通过 OAuth 将 facebook 集成到我的应用程序中，但我已经设置了现有的用户模式。这是我当前的架构：

```
# Table name: users
#
#  id              :integer         not null, primary key
#  first_name      :string(255)
#  last_name       :string(255)
#  email           :string(255)
#  created_at      :datetime        not null
#  updated_at      :datetime        not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  admin           :boolean         default(FALSE)
# 
```

使用 rails 添加 facebook auth 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:52:45.263

您仍然有几种不同的方法可以做到这一点。

1.  使用人们登录 facebook 时使用的电子邮件在他们的 facebook 帐户和您的站点帐户之间建立连接。

2.  向您的用户数据库添加一个新列（称为 uid，键入字符串）。当您使用 oauth 时，将返回有关用户的信息哈希，包括该唯一标识符。[这是一个例子。](https://github.com/mkdynamic/omniauth-facebook#auth-hash)然后，您可以存储此 uid 以供以后用作登录方式。

无论这些实现选择如何，您都需要使用[omniauth](https://github.com/intridea/omniauth) gem 和[omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook) gem（您需要为每个提供者使用不同的gem）。有关更多信息，请参阅项目的 wiki。它真的很容易使用。在您的情况下，要使其正常工作，您所要做的就是将这 2 个 gem 添加到您的 Gemfile 中：

```
gem 'omniauth'
gem 'omniauth-facebook' 
```

然后创建一个文件来设置您的策略。约定将其命名为omniauth.rb：

```
# config/initializers/omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, FACEBOOK_KEY, FACEBOOK_SECRET
end 
```

要获取 API Key 和 API Secret，您需要创建一个 Facebook 应用程序来处理 oauth 连接。所以前往[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并创建它。然后不要忘记编辑这些设置：

```
Settings>Basic>Website>Site URL:
  http://localhost:3000/ for development/testing
  your_website_callback_url for production 
```

# javascript - 识别 Jquery 选择器

> ID：10972510
> 
> 赞同：0
> 
> 时间：2012-06-10T21:29:34.610
> 
> 标签：javascript, jquery, jquery-selectors

我是 javascript 和 jquery 的新手。

这个选择器是什么意思：“#LayoutColumn2 > div > div > div > ul”

Contect（它来自的函数）：

```
function loadNextTier(tierID, changedItemValue) {
    linkArray.length = 0;
$("#placeholderForLoad").load(changedItemValue + " #LayoutColumn2 > div > div > div > ul", function(){
    $("#placeholderForLoad li").each(function(){
        var itemName = $(this).children("a").text();
        var itemValue = $(this).children("a").attr("href");
        linkArray.push(itemValue+";"+itemName);
    });
    if (tierID == "tier1") {
        tierID = "tier2";
    }
    else if (tierID == "tier2"){
        tierID = "tier3";
    }
    else if (tierID == "tier3") {
        tierID = "tier4";
    }
    resetTiers(tierID);
    fillMyList(linkArray, tierID);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:33:04.780

它将匹配以下结构

```
<any_tag id="LayoutColumn2">
  <div>
    <div>
      <div>
        <ul> <-- matches this tag
          <li>
            <ul> <-- doesn't match. you only fetched children, not descendants 
```

`#LayoutColumn2 > div > div > div > ul`方法：

> 得到`<ul>`那个是 a 的孩子`<div>`，这是 a 的孩子`<div>`，这是 a 的孩子`<div>`，这是一个标签的孩子，其 id 为`LayoutColumn`。

顺便说一句，“*后代*”一词是指嵌套在某个元素中的任何元素（无论多深）。CSS 选择器，没有组合器，通常以后代为目标。

术语*child*或*children*是指*直接后代*元素或距离元素仅 1 级深的后代元素。这就是`>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:33:04.727

从右到左阅读：

`ul`里面`div`里面`div`里面`div`里面的元素`id 'LayoutColumn2'`

# jquery - 使用jquery自动打印

> ID：10972511
> 
> 赞同：9
> 
> 时间：2012-06-10T21:29:51.520
> 
> 标签：jquery, printing, datagridview, jquery-datatables

我有以下格式的数据：

**（虚拟条目）（id=posGridView）**

![在此处输入图像描述](../Images/0bfa4302c697a238500cf317dcba1b58.png)

当我处理销售时，会自动打印一张小收据，其中包含选定的列，而不是所有列。

由于此网格视图中的所有数据都可用，如何使用 jquery 以任何格式动态打印它？

**已编辑**

实际上我想从上面的网格视图中动态打印这种格式

![在此处输入图像描述](../Images/23442904c92e2b5162c2bc36bc3bd028.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-11T00:16:23.490

**印刷**

打印页面不需要 jQuery，您只需要 JavaScript 函数：`window.print();`.

如果需要打印特定内容，可以通过 CSS 隐藏其余部分（并格式化打印区域）：

```
<style media="screen">
  .noPrint{ display: block; }
  .yesPrint{ display: block !important; }
</style> 
<style media="print">
  .noPrint{ display: none; }
  .yesPrint{ display: block !important; }
</style> 
```

如您所见，通过设置样式标签的*媒体属性，您可以为普通视图（屏幕）和打印视图（打印）设置样式。*全文[在这里](http://www.codeproject.com/Articles/13246/Print-a-doument-with-CSS)。

**活力**

您可以为该过程添加某些动态，但请记住，它可以为用户*动态*，但在您的代码中，**您必须找到并附加打印的*事件***。该事件可能是点击锚点：

`<a href='javascript:window.print();'>Print</a>`

它可能是您页面的*onload*事件：

```
window.onload = function () {
    window.print();
} 
```

或者您可能需要注意的任何其他事件（请注意，现在我正在使用 jQuery）：

```
var doPrintPage;

function printPage(){
    window.print();
}

$(document).ready(function(){
    $('input').blur(function(){
        //3sec after the user leaves the input, printPage will fire
        doPrintPage = setTimeout('printPage();', 3000);
    });
    $('input').focus(function(){
        //But if another input gains focus printPage won't fire
        clearTimeout(doPrintPage);
    });
}); 
```

上面的代码非常简单：在用户离开输入 3 秒后，*printPage*将触发。如果输入在这三秒钟内获得焦点，则不会调用*printPage 。*我真的不认为这个精确的代码是你需要的，但我会指出如何模仿*dynamism*。这里可以看到[setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)和[clearTimeout](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)的定义。

**编辑：我几乎不建议您如上所述通过 CSS 隐藏您不需要的打印 html 并调用*window.print***。无论如何，我在这里添加一些代码来通过新页面进行操作。

**从全新的页面打印**

如果您想从与您显示的页面完全不同的页面打印*，*您可以请求该页面，在服务器端管理 html，然后告诉页面在加载后立即打印。至少有两种方法可以做到这一点。让我们一步一步看他们：

A) 第一个选择是将您的 GridView 发送到您的新页面并从那里打印。问题是您不能轻松地打开一个新页面来执行此操作，因此您必须从您的页面浏览到显示您的 html-to-print 的新页面。

A1）为此，您需要用一个表单包围您的 GridView：

```
<form runat="server">
<asp:GridView id="gridView" />
<asp:Button id="btnPrint" Text="Print" runat="server" OnClick="btnPrint_Click" />
</form> 
```

A2) 然后从 *btnPrint_Click* 你将调用你的“printPage.aspx”。请记住，如果您使用 JS/jQuery 更改了 GridView，则这些更改可能不可用（因为 .NET 可能读取隐藏状态变量而不是 GridView）。

B) 第二种方法是通过 JavaScript。但请记住，如果您想在新页面中编辑表格（因为您不会收到 GridView，您将收到 html），那么您将很难选择此选项。好消息是您可以轻松打开一个新页面：

B1）当然，你需要一个表格（注意它的目标和动作），比如：

```
<form id="myPageForm" name="myPageForm" target="_blank" action="printPage.aspx">
    <input type="hidden" name="htmlToPrint" id="htmlToPrint" />
    <input type="button" value="submit">Print</button>
</form> 
```

B2）然后您必须将数据传递给该锚点。在提交表单之前，使用您的表格数据设置输入：

```
$(document).ready(function(){
    $('#myPageForm').submit(function(){
        //Filling the hidden input
        var htmlToPrint = $(".posGridView").html(); //I'm using a class and not an ID 'cause .NET will change your GridView's ID when rendering you page
        $("#htmlToPrint").value(htmlToPrint);
        return true;
    });
}); 
```

在服务器端 (printPage.asx) 中获得数据后，您可以轻松地创建 HTML-to-print 并在该页面*onload*上调用 window.print() ，如上所述。

# jquery - 用于 ListView 的 JQuery Mobile 解析 JSON

> ID：10972513
> 
> 赞同：0
> 
> 时间：2012-06-10T21:29:55.107
> 
> 标签：jquery, json, listview, mobile

这个问题被问了很多，并且在过去的 3 天里经历了许多不同的“解决方案”，但我都无法开始工作。

我有一个巨大的 JSON 文件，大约 150k 条目，我想在 JQuery Mobile 中将其视为 ListVIew。（我将使用过滤器来实际使用数据）

我想出的最好的是这个

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/jqm-docs.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>

</head>

<body>
    <div data-role="page">
    <div data-role="content">
        <div id="output">
            <ul data-role="listview" data-inset="true" data-filter="true">

            </ul>
        </div>
    </div>
</div>

<script type="text/javascript">
        //simulating the JSON coming from the server
var json = '["City1","City2","City3"]';
//jQuery getJSON will do this step
var data = $.parseJSON(json);

//and this is your code
$.each(data, function (index, value) {
        $('#output').children('ul').append('<p>'+value+'</p>').listview('refresh');
});

</script> 

</body>
</html> 
```

如果我删除 .listview('refresh') 那么所有三个 JSON 条目都列在同一个 ListView 字段中。我显然希望他们分开。

谁能建议如何做到这一点？

感谢

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:56:39.800

为了首先使用[$.parseJSON](http://api.jquery.com/jQuery.parseJSON/)你需要有正确的[JSON 字符串格式](http://www.json.org/)

所以我猜你的变量

```
var json = '["City1","City2","City3"]'; 
```

应该看起来更像：

```
var json = '{"city":"City1"},{"city":"City2"},{"city":"City2"}'; 
```

然后在将其转换为 JSON 之前，您宁愿先拆分它

```
var jsonSplit = json.split(','); 
```

并将数组中的每个分隔部分转换为 JSON

```
var data = new Array(), i;
for(i in jsonSplit){
 if(jsonSplit[i].length){ //remove last empty element after .split()
  data[i] = $.parseJSON(jsonSplit[i]);
 }
} 
```

然后您可以`data`将其作为 javascript 对象进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:49:59.933

你缺少`li`元素。

```
$.each(data, function (index, value) {
        $('#output').children('ul').append('<li><p>'+value+'</p></li>').listview('refresh');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:05:21.150

```
$.each(data, function (index, value) {
        $('#output').children('ul').append('<li><p>'+value+'</p></li>').listview('refresh');
}); 
```

根据您在此处执行的操作删除 Listview(refresh)，您不需要每次都刷新。如果您通过说 php 动态添加它...您需要在最后刷新。

```
$.each(data, function (index, value) {
        $('#output').children('ul').append('<li><p>'+value+'</p></li>');
}); 
```

# c++ - 在 QPolygonF 中设置值

> ID：10972519
> 
> 赞同：1
> 
> 时间：2012-06-10T21:31:04.800
> 
> 标签：c++, qt

我正在尝试将 QPolygonF 对象中的值设置为某个值。例如：

```
QPolygonF *polygonPoints;
polygonPoints->resize(2);
polygonPoints[1] = QPointF(5.0,5.0); 
```

当我尝试编译时，我收到一条错误消息，指出没有找到采用“QPointF”类型的右手操作数的运算符。QPolygon 是从 QVector 继承的，所以我觉得这应该可以工作......上面的代码在我使用“<<”时有效，但我想修改多边形中的特定值，而不仅仅是附加值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:55:42.380

`QPolygonF`（以及所有其他 Qt 容器）最好在没有指针的情况下使用，否则您需要取消引用指针：

```
(*polygonPoints)[1] = QPointF(5.0,5.0); 
```

# jquery - 使用索引参数时拆分（）不显示

> ID：10972521
> 
> 赞同：0
> 
> 时间：2012-06-10T21:31:37.587
> 
> 标签：jquery, split

我有这个：

```
$('li').click(function() { 
    var currentSrc = $('img', this).attr('src').toString();
    var grabAlt = $('img', this).attr('alt').split('|');
    //alert(grabAlt[0]);
    $('.imgSample img').attr('src', currentSrc);
    $('.projectDescription').html('<p class="projectDescription">' + grabAlt[0].join('</p>')); 
    $('.projectTitle').html(grabAlt[1]); 
}); 
```

当我删除 [0] 和 [1] 时，我可以提醒任何一个，我认为是第一个值 [0]，确实替换了项目描述，但是尝试将每个值放在各自的位置根本不起作用.

相关html片段：

```
<section class="workArea">
    <div class="imgSample"><img src="images/samples/testImage2.png" alt="This first part will be a short description. | this second part will be the title."></div>
    <p class="projectDescription">This is to be replaced when an image is clicked on.</p>
    <h3 class="projectTitle">To be replaced</h3>
</section>
</div>

<nav>
    <ul class="print">
        <li class="liRounded"><img width="50" height="50" src="images/samples/image1.png" alt="Should replace the content in the paragraph. | Replace title copy."></li>

        <li class="liRounded"><img width="50" height="50" src="images/samples/image2.png" alt="Second. | Replace title 2."></li>

        <li class="liRounded"><img width="50" height="50" src="images/samples/image3.png" alt="third. | Replace title 3."></li>
    </ul>
</nav> 
```

是我的语法或用法在这里错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:06:56.533

你快到了，但不完全是：

```
$('li').click(function() { 

    var img = $('img', this).get(0);
    var src = img.src;  // no need for .attr
    var alt = img.alt;  //     ditto

    var grabAlt = alt.split('|');

    $('.imgSample img').attr('src', currentSrc);
    $('.projectDescription').text(grabAlt[0]);
    $('.projectTitle').text(grabAlt[1]); 
}); 
```

大多数情况下，您不需要`<p>`在`.projectDescription`元素中添加新的，您只需要更改其文本内容即可。

正如[@gdoron 所](https://stackoverflow.com/users/601179/gdoron)暗示的那样，`.join()`它并没有像你认为的那样做 - 它需要一个字符串*数组*，并将它们与给定的分隔符连接在一起。它*不*与. `grabAlt[0]`_`</p>`

# visual-c++ - 构建 boost.thread - 找不到 lib 文件

> ID：10972526
> 
> 赞同：0
> 
> 时间：2012-06-10T21:31:59.740
> 
> 标签：visual-c++, boost, boost-thread

我正在尝试为 Visual Studio 9.0 构建 boost.thread 库。我使用 bjam 来构建 lib 文件：

```
bjam toolset=msvc-9.0 variant=release threading=multi link=shared 
```

编译成功，我在 boost/stage/lib 下得到了大量的 .lib 和 .dll 文件。然后我在 Visual Studio 9.0 中添加了包含路径和上述 lib 路径。

但是当我尝试编译一些程序时，我总是得到以下错误：

```
libboost_thread-vc90-mt-s-1_49.lib cannot be opened. 
```

构建创建的 lib 文件有一个稍微不同的名称：

```
boost_thread-vc90-mt-1_49.lib 
```

我试图重命名我的文件以匹配预期的名称，但 Visual Studio 仍然找不到该文件。似乎搜索的文件名取决于项目选项“C/C++/代码生成/运行时库”。我需要“多线程/MT”选项。

我究竟做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:16:12.650

您正在尝试使用 CRT 静态链接，但动态链接 - 使用 Boost。这不是一个好主意，但如果你坚持，你应该定义 BOOST_ALL_DYN_LINK 宏。更好的选择是在项目选项中选择 /MD，或者在构建 boost 时设置“link=static”。

# jquery - jQuery/bgStretcher 淡入黑色而不是图像之间

> ID：10972527
> 
> 赞同：0
> 
> 时间：2012-06-10T21:32:10.767
> 
> 标签：jquery, fade

[http://lakefrontmotorlodge.co.nz/new/](http://lakefrontmotorlodge.co.nz/new/)

我试图让背景平滑地淡出，但在图像淡入之前它会淡入黑色。我知道及时加载图像可能存在问题，但即使所有图像都已加载并试图循环通过它仍然会在下一张图像之前褪色为黑色。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:16:56.553

我发现了问题。.css 已被篡改，恢复为原始文件，现在可以使用。

# php - 以下登录表单教程 - 不工作

> ID：10972528
> 
> 赞同：0
> 
> 时间：2012-06-10T21:32:38.617
> 
> 标签：php, symfony

在第 156-157 页的 symfony2 书籍中，有一个很好的教程，介绍了如何使用表单制作自己的登录系统。

当我按照这些步骤进行操作时，我遇到了“未找到“POST /login_check”的路由”错误消息。

安全性.yml：

```
secured_area:
    pattern:    ^/secured/
    form_login:
        login_path: /login
        check_path: /secured/login_check
    logout:
        path:   /secured/logout
        target: /login 
```

路由.yml：

```
login:
    pattern: /login
    defaults: { _controller: MySecurityBundle:Security:login }
login_check:
    pattern: /secured/login_check 
```

谁能告诉我为什么我的不起作用而 sensioLabs 显然起作用？

我能看到的唯一区别是我删除了 Acme 包并创建了一个新的安全包，按照教程复制粘贴所有文件（我认为 ACME 是一个演示包，对于安全等功能不是必需的？）。

我没有为 login_check 路由设置默认路由，因为教程在第 156 页上说“您不需要为 /login_check URL 实现控制器，因为防火墙会自动捕获并处理提交到此 URL 的任何表单。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:17:54.000

您不需要指定控制器，但您必须指定路由路径，在您的情况下是

```
pattern: /secured/login_check 
```

但是您正在提交表单`/login_check`，编辑您的表单操作以`/secure`将其包含或从 routing.yml 中删除

# c# - 无论如何都知道屏幕何时更新/刷新（可能是OpenGL或DirectX？）

> ID：10972533
> 
> 赞同：2
> 
> 时间：2012-06-10T21:33:38.513
> 
> 标签：c#, opengl, directx, vsync

我目前有一个我正在用c#（使用.NET）编写的应用程序，它要求我在用户看到屏幕上的图像时立即启动一个计时器，直到他们按下按键。

现在我意识到，考虑到显示器输入延迟和响应时间、键盘物理发送消息所需的时间、操作系统处理它等，这实际上是非常困难的。

但我正在尽我最大的努力将其减少到主要是一个恒定的错误（响应时间结果将用于将一个用户与下一个用户进行比较，因此恒定的错误并不是真正的问题）。然而令人讨厌的障碍是由显示器刷新率引起的变量，正如我在调用和完成我的 onPaint 消息时所收集的那样，这并不意味着图像*实际上*已被处理并从图形缓冲区发送？

不幸的是，时间限制和其他承诺实际上会限制我在 c# for windows 中继续这项任务。

所以我想知道是否可以在 OpenGL 或 DirectX 中处理所有绘图，或者如果可以在屏幕更新时仅使用 OpenGL 或 DirectX 创建事件，对我来说更好吗？

之前给我的另一个建议是关于垂直同步，如果我关闭它，图像一绘制就发送？而不是以与显示器刷新率同步的设定速率发送图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:01:30.073

您必须在单独的线程中渲染您的图形，以便：

*   使用垂直同步来精确计时，以有效显示您的图像。
*   获取用户输入的精确时间（因为用户界面与渲染循环不在同一个线程上。

初始化 Direct3D 以在渲染期间启用 VSync：

```
// DirectX example
presentParams.SwapEffect = SwapEffect.Discard;
presentParams.BackBufferCount = 1;
presentParams.PresentationInterval = PresentInterval.One;

device = new Device(... 
```

在单独的线程中执行渲染：

```
Thread renderThread = new Thread(RenderLoop);
renderThread.Start();

shouldDisplayImageEvent = new AutoResetEvent(); 
```

然后使用以下渲染循环：

```
void RenderLoop()
{
    while(applicationActive)
    {
          device.BeginScene();

        // Other rendering task

        if (shouldDisplayImageEvent.WaitOne(0))
        {
            // Render image
            // ...

            userResponseStopwatch = new Stopwatch();
            userResponseStopwatch.Start();
        }

        device.EndScene();

        device.Present();
    }
} 
```

然后处理用户输入：

```
void OnUserInput(object sender, EventArgs e)
{
    if (userResponseStopwatch != null)
    {
        userResponseStopwatch.Stop();

        float userResponseDuration = userResponseStopwatch.ElapsedMillisecond - 1000 / device.DisplayMode.RefreshRate - displayDeviceDelayConstant;
        userResponseStopwatch = null;
    }
} 
```

您现在使用*shouldDisplayImageEvent.Set()*事件触发器根据需要显示图像并启动秒表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:08:22.130

首先在您的应用程序空闲循环上启用 VSync：

```
// DirectX example
presentParams.SwapEffect = SwapEffect.Discard;
presentParams.BackBufferCount = 1;
presentParams.PresentationInterval = PresentInterval.One;

device = new Device(...

Application.Idle += new EventHandler(OnApplicationIdle);

// More on this here : http://blogs.msdn.com/tmiller/archive/2005/05/05/415008.aspx
internal void OnApplicationIdle(object sender, EventArgs e)
{
    Msg msg = new Msg();
    while (true)
    {
        if (PeekMessage(out msg, IntPtr.Zero, 0, 0, 0))
            break;
    }

    // Clearing render
    // ...

    if (displayImage)
    {
        // Render image
        // ...

        renderTime = DateTime.now();
    }
    device.Present();
} 
```

启用 vsync*后， device.Present 功能会阻塞直到下一帧同步，因此如果您计算 renderTime**和*用户输入时间之间*的*时间并移除显示设备延迟 + 16.67 毫秒，您应该得到用户响应延迟。

# android - 片段动画：setCustomAnimations 和 setTransitionStyle 的区别

> ID：10972540
> 
> 赞同：13
> 
> 时间：2012-06-10T21:35:37.000
> 
> 标签：android, android-fragments, android-animation

我想为两个片段之间的过渡制作动画，这要归功于`FragmentTransaction.replace()`. 我想在 XML 文件中指定我的自定义动画。

call`FragmentTransaction.setCustomAnimations()`和 和有什么不一样`FragmentTransaction.setTransitionStyle()`？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-27T20:59:53.780

[`setCustomAnimations(int, int, int, int)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations%28int,%20int,%20int,%20int%29)允许您直接指定动画资源。[`setTransitionStyle(int)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#setTransitionStyle%28int%29)另一方面，如果您使用，则必须使用[FragmentAnimation 样式](https://developer.android.com/reference/android/R.styleable.html#FragmentAnimation)和[`setTransition(int)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#setTransition%28int%29).

值得一提**的是，兼容性库忽略了** [`setTransitionStyle(int)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#setTransitionStyle%28int%29)，所以如果你使用它，你必须[`setCustomAnimations(int, int, int, int)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations%28int,%20int,%20int,%20int%29)确定使用它。

有关这方面的更多信息，请查看这篇[关于片段状态和片段动画的优秀文章](http://daniel-codes.blogspot.com/2012/06/fragment-transactions-reference.html)

# iphone - 在 MainWindows.xib 中用 UIViewController 替换 UINavigationController

> ID：10972541
> 
> 赞同：0
> 
> 时间：2012-06-10T21:35:38.477
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller, replace, homescreen

我是 iPhone 应用程序开发的新手。我想使用*基于视图的模板*制作一个简单的应用程序，该模板将有一个链接到应用程序不同模块的**主菜单（主屏幕） 。**模块本身将由`UINavigationController`或组成`UITabController`。

首先，我只是想创建和调试一个模块，所以我采用了 NavigationController`MainWndows.xib(appDelegate)`和`stacked(linked)`许多模块`ViewControllers`。

现在我需要在我放置**的应用程序开始时**`NavigationController`有主菜单。我现在很困惑该怎么办？我已经有了解决方案，将其`NavigationController`放在新的 xib 文件和**MainWindow.xib**`mainMenuViewController`文件中，并将导航模块作为模式访问。所以我的问题是，如果我的方法是正确的？我将如何访问这个模态控制器以将视图控制器推送到它上面？还是我想要的还有其他替代品..？

 **我希望我的问题很清楚......任何建议或链接都​​是可以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:39:23.233

我心里有了一个更好的主意。我将坚持使用 MainWindows.xib 中的 NavigationController。我将主菜单作为根视图控制器推送，同时隐藏其*导航栏*和*工具栏。*根据点击的按钮，我将在 NavigationController 上进一步推送适当的视图控制器。**

# facebook - 检测facebook评论何时加载？

> ID：10972546
> 
> 赞同：3
> 
> 时间：2012-06-10T21:36:41.447
> 
> 标签：facebook

我在用着：

```
<div class="fb-comments" data-href="https://www.WEBSITE.com" data-num-posts="5" data-width="655"></div> 
```

...对于 Facebook 评论，但显然加载所有评论需要几秒钟。

有没有办法让我检测到所有评论何时加载 - 也许某种回调会在完成时触发？

谢谢

# c - setlocale() 的默认值是什么意思？

> ID：10972547
> 
> 赞同：2
> 
> 时间：2012-06-10T21:36:53.370
> 
> 标签：c, linux, posix

setlocale() 的默认设置是什么意思？[setlocale()](http://pubs.opengroup.org/onlinepubs/7908799/xsh/setlocale.html)默认为“C”（“POSIX”）。但这究竟是什么意思？它的默认字符集和语言是哪个？是“en_US.utf8”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:43:18.780

从 N1570 开始：

> **7.11.1.1 setlocale 函数**
> 
> **3**语言环境的“C”值指定了 C 翻译的最小环境；区域设置的“”值指定特定于区域设置的本地环境。其他实现定义的字符串可以作为第二个参数传递给 setlocale。

此外，来自脚注 222：

> 222) ISO/IEC 9945-2 规定了可用于为 C 指定语言环境的语言环境和字符映射格式。

这给了您一个想法（因为脚注严格不是标准规范部分的一部分）“C”在这种情况下的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:34:25.137

语言环境“C”的字符集需要包含所有 7 位 ASCII 字符，排序顺序仅基于 ASCII 字符代码。不需要 ASCII 以外的其他字符。如果正在处理的文本包含该限制集之外的任何字符，则行为未定义。就语言而言， http: [//pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap07.html](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap07.html)中的所有标准定义都对应于美国英语。

# c# - C# system.format 异常

> ID：10972548
> 
> 赞同：0
> 
> 时间：2012-06-10T21:37:13.973
> 
> 标签：c#, sqlite

Flux 是我的 datagridview 中的一列。它需要以科学的指数格式显示。目前我在 sqlite 数据库中将它作为一个数字。

```
dataGridView1.Columns["Flux"].DefaultCellStyle.Format = "E2";
dataGridView1.Columns["Flux"].DefaultCellStyle.NullValue = null;
dataGridView1.Columns["Fluence"].DefaultCellStyle.Format = "E2";
dataGridView1.Columns["Fluence"].DefaultCellStyle.NullValue = null; 
```

当我尝试验证单元格时（仅允许数字）。

```
 if (Colname == "Neutron Flux")
        {
            double res1;
            if(!double.TryParse(dataGridView1["Neutron Flux", e.RowIndex].Value.ToString(),out res1))
            {
                e.Cancel = true;
            }

        } 
```

如果将单元格值从 2E+000 更改为 's'，则这是无效输入，因此 e.cancel = true。double.TryParse(dataGridView1["Neutron Flux", e.RowIndex] 取原始值 2E 而不是 's'。所以 if 条件结果为真。弹出相同的数据错误

感谢你

# xml - XML 验证，发现错误

> ID：10972549
> 
> 赞同：0
> 
> 时间：2012-06-10T21:37:19.807
> 
> 标签：xml, validation, blogger

我为博主设计了自己的模板，但是在下面的代码中我遇到了错误，我没有弄清楚必须改变什么，我知道 XML 上的某些标签与 HTML 不同。

```
<p>
    Cras justo odio, dapibus ac
    <a href="javascript:;" rel="tipsy" title="Example Tooltip">facilisis</a>
    in, egestas eget quam. Donec ullamcorper nulla non metus auctor fringilla. Nullam quis risus eget urna
    <a href="javascript:;" rel="tipsy" title="An even longer tooltip! <br/> With more stuff!">mollis ornare</a>
    vel eu leo.
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:49:48.393

尝试分别用`<`and`>`替换`title`属性中的`&lt;`and `&gt;`。

# javascript - Select sister elements of a table in jquery

> ID：10972554
> 
> 赞同：2
> 
> 时间：2012-06-10T21:37:59.713
> 
> 标签：javascript, jquery, html-table

I want to fill a td element by accessing other td s in the same row. How would I access them using jQuery?

In my situation, I have a table, and column 5 is populated by subtracting col 3 from col 4, and returning the result in col 5\. I started to do it with a nested loop, but realized, that if I used the .each() on each col 5 td, it would be achievable if I could identify col 3 and 4 using jQuery.

Here is the [fiddle](http://jsfiddle.net/chrisfrisina/t2SEF/).

The section to identify the elements is here:

```
$('section.techtable td:nth-child(5)').each(function() {
    $(this).append(strinToMonthNumber($(START JQUERY),$(END JQUERY)));
}) 
```

I think that I would have to access the parent of $(this), and then the (3rd and 4th) child element?

I am also trying to avoid using span or class attributes on the TH or TD elements.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:40:44.663

You can select one element (table cell in your case), and then use `jQuery.prev()` or `jQuery.next()` to select previous or next sibling element. In native DOM, you could use `previousSibling`/`nextSibling` (or `previousElementSibling`/`nextElementSibling` in modern browsers to skip non-element nodes) element properties for same purpose.

Based on your code example, something like this:

```
$('section.techtable td:nth-child(5)').each(function() {
    var cell5 = $(this),
        cell4 = cell5.prev(),
        cell3 = cell4.prev();

    cell5.append(strinToMonthNumber(cell3, cell4)));
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:46:10.410

Try this:

```
$('section.techtable tr').each(function() {
    var $cells = $(this).find("td");
    var val = strinToMonthNumber($cells.eq(2).text(),$cells.eq(3).text());
    $cells.eq(4).text(val);
}); 
```

Note that the cell indexes are of zero-origin, therefore one less than your 3/4/5\. If you already took zero-origin into account, then +1 in each case.

# ios - iOS：从 url 加载图像

> ID：10972555
> 
> 赞同：55
> 
> 时间：2012-06-10T21:38:03.503
> 
> 标签：ios, uiimageview, uiimage, nsurl

我需要从 url 加载图像并将其设置在 UIImageView 中；问题是我不知道图像的确切尺寸，那我怎样才能正确显示图像呢？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-10T21:40:17.903

只需使用 UIImage 的 size 属性即可，例如：

```
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[UIImage alloc] initWithData:data];
CGSize size = img.size; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-08T18:26:02.600

迅速：

```
var url = NSURL.URLWithString("http://www.example.com/picture.png")
var data = NSData(contentsOfURL : url)
var image = UIImage(data : data)
image.size // if you need it 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-07T15:32:46.757

快速关于使用选项：

```
var url:NSURL? = NSURL(string: imageString)
var data:NSData? = NSData(contentsOfURL : url!)
var image = UIImage(data : data!) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-18T11:33:53.060

> **在 SWIFT 3.0 中**

主线程必须始终保持空闲，以便为用户界面和用户交互提供服务。

```
class ViewController: UIViewController {

@IBOutlet weak var imageView: UIImageView!

private func fetchImage() {
    let imageURL = URL(string: "https://i.stack.imgur.com/9z6nS.png")
    var image: UIImage?
    if let url = imageURL {
        //All network operations has to run on different thread(not on main thread).
        DispatchQueue.global(qos: .userInitiated).async {
            let imageData = NSData(contentsOf: url)
            //All UI operations has to run on main thread.
            DispatchQueue.main.async {
                if imageData != nil {
                    image = UIImage(data: imageData as! Data)
                    self.imageView.image = image
                    self.imageView.sizeToFit()
                } else {
                    image = nil
                }
            }
        }
    }
}

override func viewDidLoad() {
    super.viewDidLoad()
    fetchImage()
}

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-23T11:49:14.270

要使用 Kingfisher 库下载异步图像，您可以按照此步骤操作，网址：[https](https://github.com/onevcat/Kingfisher) ://github.com/onevcat/Kingfisher ：

```
 func imageFromUrl(_ urlString: String) {
        if let url = URL(string: urlString) {
            ImageDownloader.default.downloadImage(with: url, options: [], progressBlock: nil) {
                (image, error, url, data) in
                DispatchQueue.main.async {
                    self.imageView.image = image
                }
            }
        }
    } 
```

您还可以使用默认 URLSession.shared.dataTask 下载图像

```
 func imageFromUrl(_ urlString: String) {
        if let url = URL(string: urlString) {
            let request = URLRequest(url: url)
            URLSession.shared.dataTask(with: request) {(data,response,error) in
                if let imageData = data as Data? {
                    if let img = UIImage(data: imageData){
                       DispatchQueue.main.async {
                       self.imageView.image = img
                       }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-26T16:20:32.523

Swift 安全代码版本：

```
private func loadImage(from url:URL) -> UIImage? {
    let imageData: Data

    do {
        imageData = try Data(contentsOf: url)
    } catch {
        return nil
    }

    return UIImage(data: imageData)
}

private func loadImage(from urlString:String) -> UIImage? {
    guard let url = URL(string: urlString) else {
        return nil
    }

    return self.loadImage(from: url)
} 
```

请记住，此代码会阻塞主线程，因此您应该在后台线程上运行它。例如：

```
DispatchQueue.global().async {
    let image = UIImage(fromFile: "http://xpto.com/image.png")

    // And then you should update UI on main thread.
    // If you have an UIImageView outlet you can update its image this way:
    DispatchQueue.main.async {
        imageView.image = image
        imageView.contentMode = .scaleAspectFit
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T14:26:00.393

SWIFT 5.0 + 后台获取

```
private func fetchImage(_ photoURL: URL?) {

    guard let imageURL = photoURL else { return  }

    DispatchQueue.global(qos: .userInitiated).async {
        do{
            let imageData: Data = try Data(contentsOf: imageURL)

            DispatchQueue.main.async {
                let image = UIImage(data: imageData)
                self.userImageView.image = image
                self.userImageView.sizeToFit()
                self.tableView.reloadData()
            }
        }catch{
            print("Unable to load data: \(error)")
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-27T20:27:01.213

显示从 json 或 url 下载的图像的一个常见错误是队列问题。所有与 UI 相关的事情都需要在**主队列**中完成，所以如果你忘记了这一点，即使是完美的代码（上面的答案很好）有时也不会显示你的图像。要调用 mainQueue，请使用如下代码，并注意调用 main queue 可能需要在被调用的 imageDisplay 函数中单独完成：

```
dispatch_async(dispatch_get_main_queue(), ^{

    self.nameLabel.text = self.pokemon.name;

    [self displayImage];  //CALLS FUNCTION
    self.abilitiesTextView.text = @"loves SwiftUI";
});

- (void)displayImage {            

    NSString *imageURLString = [NSString stringWithFormat: self.pokemon.sprite];
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:imageURLString]];
    dispatch_async(dispatch_get_main_queue(), ^{
        self.spriteImageView.image = [UIImage  imageWithData: imageData];
    });

    // NOTE: important for newer versions of XCode/Obj-C...
    //[imageData release];   With ARC ("automated release..."), release method is forbidden, it's already done for you.
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-26T17:39:08.600

如果您愿意，甚至可以将其移至`UIImage`扩展程序：

```
extension UIImage {

    //NOTE: This is not thread safe, please run it on a background thread.
    convenience init?(fromFile filePath:String) {
        guard let url = URL(string: filePath) else {
            return nil
        }

        self.init(fromURL: url)
    }

    //NOTE: This is not thread safe, please run it on a background thread.
    convenience init?(fromURL url:URL) {
        let imageData: Data

        do {
            imageData = try Data(contentsOf: url)
        } catch {
            return nil
        }

        self.init(data: imageData)
    }

} 
```

# c# - Html.BeginForm 与 html 属性 asp.net mvc4

> ID：10972558
> 
> 赞同：22
> 
> 时间：2012-06-10T21:39:04.083
> 
> 标签：c#, razor, asp.net-mvc-4

我有编辑操作`Html.BeginForm`。如何添加 HTML 属性？

我只知道一种方法：

```
@using (Html.BeginForm("Edit", "Clients", FormMethod.Post, new { @class="example"})) {

} 
```

但如果我使用这种方法，我无法传递当前 ID

是否可以在不修改操作 URL 的情况下向表单添加 HTML 属性？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-25T15:00:20.873

您需要的覆盖是：

```
@using( Html.BeginForm("Edit", "Clients", new { Id=Model.Id},
                       FormMethod.Post, new { @class = "example" } ) )
{
} 
```

*   像“id”这样的路由值作为第三个参数传递。
*   像“class”这样的 HTML 属性作为第五个参数传递。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd460542%28v=vs.108%29.aspx)文档。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-03-03T20:49:44.817

Action 和 Controller 参数也可以为 null 以使用默认操作：

```
Html.BeginForm( null, null, FormMethod.Post, new { id=”formname”, @class="formclass" }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T05:56:20.907

从 ControllerA 通过 ActionLink 调用

```
@using (Html.BeginForm("Create",
    "StudentPChoice",
    new { StudentPChoiceId = Model.StudentPChoiceId },
    FormMethod.Post))
{

} 
```

或者

```
@using (Html.BeginForm("Create",
    "ControllerB",
    new { ControllerBId = Model.ControllerAId },
    FormMethod.Post))
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-10T17:33:22.940

如果这可能对某些人有帮助，这对我有用：

```
@using (Html.BeginForm("RefreshData", "Home", FormMethod.Post, 
        new { Id = "timerangeId", @name = "timerange" }))
    {
        // form elements and input
    } 
```

在 Javascript 中：

```
document.getElementById("timerangeId").submit(); 
```

# javascript - Knock javascript 返回空值以保存函数

> ID：10972559
> 
> 赞同：0
> 
> 时间：2012-06-10T21:39:33.650
> 
> 标签：javascript, knockout.js

我是使用 Knockout 进行数据绑定和 MVC 的新手，我可以很好地检索在 Json 对象中返回的数据，但是当我尝试返回用户数据并且保存我的值的选择为空时。如果我分离删除 saveContent div 并将保存按钮控件放在 searchAudio div 中，则返回用户输入数据，但我需要返回用户选择和输入的所有表单数据。

```
<form action="AudioLookup" method="get" enctype="multipart/form-data">
   <div id="saveContent" data-bind="with: saveContent">
    <div id="allAudio" data-bind="with: $root.allAudio">
        <h3>Audio Playback</h3>
            <table>
                <thead>
                        <tr>
                            <th>Bind Audio</th>
                            <th>ID</th>
                            <th>Text</th>
                            <th>Url</th>
                            <th>File Name</th>
                            <th>Prompt Type</th>
                        </tr>
                </thead>
                <tbody data-bind="foreach: AudioResults">
                    <tr>
                        <td><input  type="radio" name="adgroup"/></td>
                        <td data-bind="text : _id"></td>
                          <td ><a href="http://customaudio.showings.com/"data-bind="text : Text"></a></td>
                          <td data-bind="text: aUrl"></td>
                          <td data-bind="text: fileName"></td>
                          <td data-bind="text: PromptType"></td>
                    </tr>
                </tbody>         
            </table>
         <button data-bind="click: getAllAudio">Get Audio</button>   
    </div>
    <br /> 
    <hr />
    <div id="searchAudio" data-bind="with: $root.searchAudio">
     <h3>Refine Audio Lookup</h3>
        <label for="CallCenterDLL">Choice Call Center: </label>
             <select id="CallCenterDLL" data-bind ="value: searchfields.CCCode" name="CallCenterT">
                <option value =""></option>
                <option value = "11">Kansas City</option>
                <option value = "6">Dallas</option>
                <option value = "7">Houston</option>
                <option value = "8">SanAntonio</option>
                <option value = "12">Charlotte</option>
                <option value = "9">Raleigh</option>
             </select>
        <div>
            <label for="RBgroup">Choice Prompt Type: </label>
            <br/>
            <input type="radio" name="RBgroup" value='3' data-bind ="checked: searchfields.searchType"/> Agent<br/>
            <input type="radio" name="RBgroup" value='4' data-bind ="checked: searchfields.searchType"/>Office<br/>
        </div> 
        <input type="text" name="serchTxt" placeholder="search string Here" data-bind="value: searchfields.searchVal" onblur="minleng(this.value,25);Minimum(this,3);" onkeypress="minleng(this.value,25)"  />
        <button data-bind="click: runQuery">Search Data</button>
           @* <div id="select-all" data-bind="with: $root.select-all"> *@
            <table>
                <thead>
                    <tr>
                        <th>
                        <input type="checkbox" name="select-all" id="select-all"/>Select All
                        </th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: dataResult">  
                    <tr>
                        <td><input data-bind="value: PK" class="selectedPK" type="checkbox" /></td>
                        <td data-bind="text: PKType"></td>
                        <td data-bind="text: DisplayVal"></td>
                    </tr>
                </tbody>
            </table>
            @*</div>*@  
     </div>
 <button data-bind="click: SaveQuery">Save Data</button>
  </div>
 </form> 

function saveViewModel() {
        var self = this;
        var SviewModel = function (CCCode, PK, PKType, SearchType, SearchVal, Text, fileName, aUrl) {
            self.searchfields.CCCode = ko.observable(CCCode);
            self.searchfields.searchType = ko.observable(SearchType);
            self.searchfields.searchVal = ko.observable(SearchVal);
            self.PK = ko.observable(PK);
            self.PKType = ko.observable(PKType);
            self.Text = ko.observable(Text);
            self.fileName = ko.observable(fileName);
            self.aUrl = ko.observable(aUrl);

        }

        self.state = ko.observable();
        self.dataResult = ko.observableArray();
        self.SaveQuery = function () {
            alert(ko.toJSON(SviewModel));
            $.ajax(
        {
            url: "/CallCenter/SaveQuery",
            contentType: "application/json",
            type: "POST",
            dataType: "json",
            data: ko.toJSON(self.dataResult),
            success: function (data) {
                self.SaveResult(data);
            }
        });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:46:01.107

你提醒：-

```
alert(ko.toJSON(SviewModel)); 
```

您发送的数据：-

```
data: ko.toJSON(self.dataResult), 
```

那就是 ：-

```
self.dataResult = ko.observableArray(); 
```

这似乎未使用....所以一切都为空也不足为奇

# java - 为什么Java方法返回null？

> ID：10972560
> 
> 赞同：0
> 
> 时间：2012-06-10T21:39:41.267
> 
> 标签：java, methods, arraylist, bluej

我正在尝试调试为什么我的 Java 方法返回 null。这是详细信息。

我们正在制作一个简单的卡片“游戏”，我在调用外部方法和创建一个新对象时遇到了麻烦。它是一副卡片……所以卡片有 1 个类，卡片组有 1 个类，游戏有 1 个类

这是我的代码进入的课程

```
 public class Game
 {
  private InputReader reader;
  private Deck deck;
  private ArrayList<Card> listCard;

/**
 * Constructor for objects of class Game
 */
public Game()
{
    deck = new Deck();
    reader = new InputReader()
    listCard = new ArrayList<Card>();
}

/**
 *
 */
public void dealCard()
{
   listCard.add(deck.takeCard());
}

}// End of Game class 
```

这是甲板类，我将从中获取方法

```
 import java.util.ArrayList;
 /**
  * Write a description of class Deck here.
  * 
  * @author  
  * @version 2012.05.31
  */
 public class Deck
{
private ArrayList<Card> redblue;

/**
 * Main constructor for objects of class Deck
 */
public Deck()
{
    redblue = new ArrayList<Card>();
}

   public Card takeCard()
{
      **return redblue.remove(0);**  /// this is the Index.pointer.exception
}

}
}// End of class 
```

所以我的问题是我试图从甲板上拉出第一张卡并将其添加到我的“手”中。所以我试图调用 dealCard() 调用 takeCard() ..takeCard() 工作正常但是当我尝试和如果通过 dealCard() 调用它会返回 null 并输出错误，因为我无法将 null 添加到 arrayList .. 我认为我的问题可能是外部方法调用没有使用正确的变量，我不知道

提前致谢

***已编辑。删除了不相关的方法和类..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:57:11.253

查看 Deck 的构造函数：

```
public Deck()
{
    redblue = new ArrayList<Card>();
} 
```

构造函数运行后，redBlue ArrayList 中有多少张卡片？

如果您尝试从该 ArrayList 中删除一张卡片，您认为会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:43:11.150

我认为您需要从您的主（游戏类）中发布更多代码，向我们展示您的套牌和卡片类的用法。现在唯一引起我注意的是：

```
public Card takeCard()
{
      **return redblue.remove(0);**  /// this is the Index.pointer.exception
} 
```

根据[这一点](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#remove%28int%29)，如果出现以下情况，可能会引发异常：

```
IndexOutOfBoundsException - if index out of range (index < 0 || index >= size()). 
```

你确定你的牌堆里装满了卡片吗？您可以在您的方法中添加检查。如果您的卡片列表为空，则 0 = 它的大小。

```
public void dealCard()
{
   Card card = deal.takeCard();

   if (card != null)
      listCard.add(deck.takeCard());
}

public Card takeCard()
{
    if ( !this.redblue.isEmpty() )
        return redblue.remove(0);

    return null;        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:53:23.930

不知何故，你的第一个元素

```
redblue 
```

一片空白。ArrayList 中允许空值。

我的猜测是，您在卡片组中填写的代码更多，并且您第一次添加`null`到卡片中`ArrayList`

在此处检查[`ArrayList`规范。](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T20:06:39.857

在我看来，redblue 实际上并没有任何东西！当你像这样初始化它时：

```
redblue = new ArrayList<Card>(); 
```

您只是在为 Cards 创建一个空容器，而不是实际将卡片放入其中。您可能想要做的是创建一个函数来为 redblue 生成卡片......类似......

```
public ArrayList<Card> createInitialDeck(){ 
  //Create an empty ArrayList
  //Do some code here to create new cards..
       //you might want to consider nested for loops if you're creating 13 cards of 4 different suits for example
       //while inside those for loop add each new card object to your array list

   //return arrayList;
} 
```

然后代替`redblue = new ArrayList<Card>();`你做`redblue = createInitialDeck();`.

# php - 如何在 Facebook 应用程序中获取用户的随机好友？

> ID：10972563
> 
> 赞同：-2
> 
> 时间：2012-06-10T21:39:59.573
> 
> 标签：php, facebook, facebook-graph-api, random

我有一个好友列表，显示所有用户的 facebook 好友。我真正想要的是一次只显示**一个**朋友，随机选择。有什么办法吗？

```
<?  
    foreach ($friends as $friend) 
    {
         echo "<img src='http://graph.facebook.com/" . $friend['id'] ."/picture'><br>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:49:43.587

```
<?
  $friend_count = count($friends);
  $random_friend_num = rand(0,$friend_count-1);
  $random_friend = $friends[$random_friend_num];
  echo "<img src='http://graph.facebook.com/" . $random_friend['id']  ."/picture'><br>";
?> 
```

该代码几乎是不言自明的..

*   获取好友数量
*   获取 0 到friendCount 范围内的随机数
*   粘贴随机好友

如果我的回答是您所需要的，请随时接受：）

# ffmpeg - ffmpeg -r 选项

> ID：10972569
> 
> 赞同：0
> 
> 时间：2012-06-10T21:40:51.747
> 
> 标签：ffmpeg

我正在尝试使用 ffmpeg（在 linux 下）为视频添加一个小标题。所以，我使用：

```
ffmpeg -i hk.avi -r 30000/1001 -metadata title="SOF" hk_titled.avi 
```

添加标题似乎有效，但是，问题是输出文件大约是输入文件文件大小的 1/3，我想知道这是为什么？这是以牺牲视频质量为代价的吗？我不确定..如何保持与输入文件相同的质量/大小？

我无法弄清楚的要点是使用 -r 选项。通过 ffmpeg 文档，似乎表明 -r 是每秒帧数（输入视频为 23.9fps）。目前，(30000/1001) 可以达到 29 fps，但我不确定是否应该使用这个值。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:47:23.183

ffmpeg 的默认设置在您编码时并不总是提供高质量的输出，但这取决于您的输出格式和可用的编码器。对于您的输出，ffmpeg 将使用默认的`-b 200k`or `-b:v 200k`。

但是，您可以告诉 ffmpeg 简单地复制输入流而无需重新编码，如果您只想添加或编辑元数据，建议您这样做。这些示例执行相同的操作，但根据您的 ffmpeg 版本使用不同的语法：

```
ffmpeg -i hk.avi -vcodec copy -acodec copy -metadata title="SOF" hk_titled.avi
ffmpeg -i hk.avi -c copy -metadata title="SOF" hk_titled.avi 
```

# html - 填充和边距导致我的 div 太宽

> ID：10972570
> 
> 赞同：2
> 
> 时间：2012-06-10T21:41:12.873
> 
> 标签：html, css, window, padding, margin

我有这个 div：

```
<!------ CONTENT ------>
<div id="content">
  <div class="top">
  I am cool<br />
  I am cool<br />
  I am cool<br />
  I am cool<br />
  </div>
</div>
<!------ /CONTENT ------> 
```

使用这个 CSS：

```
#content{
    height:auto;
    width:100%;
    background-color:#FF0000;
}

#content .top{
    margin:15px 35px 35px 35px;
    padding:20px;
    width:inherit;
    height:inherit;
    position:absolute;

    -moz-box-shadow: 5px 5px 10px rgba(0,0,0,.8), inset 2px 2px 2px rgba(0,0,0,.2), inset -2px -2px 3px rgba(255,255,255,.85);
    -webkit-box-shadow: 5px 5px 10px rgba(0,0,0,.8), inset 2px 2px 2px rgba(0,0,0,.2), inset -2px -2px 3px rgba(255,255,255,.85);
    box-shadow: 5px 5px 10px rgba(0,0,0,.8), inset 2px 2px 2px rgba(0,0,0,.2), inset -2px -2px 3px rgba(255,255,255,.85);

    -moz-border-radius: 5px;
    border-radius: 5px;
    background-color:rgba(224,224,224,.92);
} 
```

我认为这会使内容 div 与浏览器窗口一样宽，然后调整 .top div 的大小以适应其中，同时还具有填充和边距（不知道如何解释得足够好），但事实并非如此. 相反 .top 与屏幕一样宽，但由于边距，它会延伸到窗口外的某个位置，然后添加另一个边距，使其具有水平滚动条，如下所示：

![截屏](../Images/b9e88a23fa7edb294f94e998be76ddbf.png)

正如您所看到的，它应该更靠左，边距为 35，并且页面的末尾应该是页眉结束的地方。

我希望这很清楚，我从来没有解释过这样的事情，但我希望有人能在这里帮助我，这真的让我很烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:52:13.727

如果您忽略浮点数，则定位 absolute 及其同类：width:100% 指的是最近的封闭框。

我的猜测是你的内容周围有一个元素并不像你想象的那么广泛。

（在您的 CSS 中某处种植 *{border: 1px solid red} 以进行调试永远不会受到伤害；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:49:22.250

您的问题是`width`指定了*内部*容器宽度，并且`margin`添加`padding`了和。

我不明白你为什么在`position: absolute`这里使用。

这是否[符合](http://jsfiddle.net/dU8uU/)预期？

# ssh - 使用 ssh 密码的 Jenkins 配置

> ID：10972571
> 
> 赞同：2
> 
> 时间：2012-06-10T21:41:15.763
> 
> 标签：ssh, jenkins

我可以使用本地 git 存储库运行 jenkins 构建，但只能使用无密码 ssh 密钥。当我有密码时，我开始在构建中遇到权限问题。

我如何配置詹金斯使用密码？

- 我也是 ssh 的新手。这是我如何配置我的詹金斯（在 ubuntu 上）。

```
su jenkins
ssh-keygen ....
cat key.pub

su user_with_github_repo
cd ~/.ssh/
append jenkins key.pub to authorized_keys 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T12:37:19.413

您遇到的问题可能是由于 ssh 会以交互方式询问密码。我建议不要尝试在脚本中以非交互方式输入密码，因为这似乎在安全性方面几乎没有增加。

相反，您可以使用 ssh-agent 和 ssh-add 来解锁密钥并将其保存在内存中。ssh-add 将密钥添加到 ssh-agent，这是一个守护进程。您将在服务器启动时解锁密钥，然后 Jenkins 将能够使用存储在内存中的密钥进行身份验证。

为此，请在服务器启动时运行 ssh-agent 并将其输出（两个导出，SSH_AUTH_SOCK 和 SSH_AGENT_PID）捕获到文件中。它应该以 jenkins 用户身份运行。使用 ssh-add 解锁密钥。然后在您想要使用该密钥授权时获取输出文件，例如在您的 Jenkins 构建脚本中。瞧！

# awk - awk 将列转置为行并调整字段宽度

> ID：10972572
> 
> 赞同：0
> 
> 时间：2012-06-10T21:41:29.507
> 
> 标签：awk, printf, transpose

> **可能重复：**
> [每个文件后的 awk 换行符](https://stackoverflow.com/questions/10912722/awk-line-break-after-each-file)

想将多个文件的第一列转置为一行，字段宽度按照最长的单词填空，以逗号结尾。有人可以帮忙吗？

输入1

```
HELLO
WORLD
SOUTH is
WARM
NORTH is
COLD 
```

输入2

```
HELLO
WORLD
SOUTH
WARM
NORTH
COLD 
```

输出

```
HELLO   ,WORLD   ,SOUTH is ,WARM     ,NORTH is ,COLD     ,
HELLO ,WORLD ,SOUTH ,WARM  ,NORTH ,COLD  , 
```

# objective-c - Cocos2d，将精灵移动到触摸位置

> ID：10972575
> 
> 赞同：1
> 
> 时间：2012-06-10T21:42:55.887
> 
> 标签：objective-c, xcode, cocos2d-iphone

我和我的朋友被告知 Stackoverflow 是询问代码问题的地方。:)

我们对 Objective-C、Xcode 和 Cocos2d 还很陌生，并且正在尝试完成简单的任务以加深我们的知识。

查看下面的代码，我们制作了一个 Ant 对象并将其放置在屏幕上。我们现在想使用触摸位置将蚂蚁移动到用户触摸的位置。

我们不确定正确的方法是什么。目前我们远离创建类，所以将所有代码放在一个地方，但我们不知道如何让屏幕上的蚂蚁进入触摸位置。

任何人都可以帮忙吗？

```
 //
//  HelloWorldLayer.m
//  Timer
//
//  Created by Lion User on 06/06/2012.
//  Copyright __MyCompanyName__ 2012\. All rights reserved.
//

// Import the interfaces
#import "HelloWorldLayer.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    if( (self=[super initWithColor:ccc4(225, 225, 225, 255)])) {

        // enable touches
        self.isTouchEnabled=YES;

        // ask director the the window size
        CGSize size = [[CCDirector sharedDirector] winSize];

        // set time to zero
        myTime = currentTime;
        timeLabel = [CCLabelTTF labelWithString:@"00:00" fontName:@"Arial" fontSize:48];
        timeLabel.position = CGPointMake(size.width / 2, size.height);
        // set label color
        timeLabel.color = ccBLACK;
        // Adjust the label's anchorPoint's y position to make it align with the top.
        timeLabel.anchorPoint = CGPointMake(0.5f, 1.0f);
        // Add the time label
        [self addChild:timeLabel];

        // run create ant method
        [self createAnt];

        //update
        [self schedule:@selector(update:)];

    }
    return self;
}

-(void)update:(ccTime)dt{

    totalTime += dt;
    currentTime = (int)totalTime;
    if (myTime < currentTime)
    {
        myTime = currentTime;
        [timeLabel setString:[NSString stringWithFormat:@"%02d:%02d", myTime/60, myTime%60]];
    }

}

////* method for creating an ant and moving it*////
-(void)createAnt{

    ////*requirements for animation setup*////

    // create cache object to store spritesheet in
    CCSpriteFrameCache *cache=[CCSpriteFrameCache sharedSpriteFrameCache];
    // add the sprite list to the cache object
    [cache addSpriteFramesWithFile:@"antatlas.plist"];
    // create frame array to store the frames in
    NSMutableArray *framesArray=[NSMutableArray array];

    //loop through each frame
    for (int i=1; i<3; i++){
        // increment the name to include all frames in sprite sheet
        NSString *frameName=[NSString stringWithFormat:@"ant%d.png", i];
        // create frame object set it to the cache object and add the frameNames to the cache
        id frameObject=[cache spriteFrameByName:frameName];
        // add the frame object into the array
        [framesArray addObject:frameObject];

    }

    ////* setup the actions for running the animation*////

    // create animation object and pass the list of frames to it (it expects this as an array)
    id animObject=[CCAnimation animationWithFrames:framesArray delay:0.05];
    // setup action to run the animation do not return to frame 1
    id animationAction=[CCAnimate actionWithAnimation:animObject restoreOriginalFrame:NO];
    //loop the animation indefinitely
    animationAction = [CCRepeatForever actionWithAction:animationAction];
    // move ant action
    id moveAnt=[CCMoveTo actionWithDuration:3 position:ccp(60, 160)];

    // create sprite, set location and add to layer (starts with the name of the first frame in the animation
    CCSprite *ant=[CCSprite spriteWithSpriteFrameName:@"ant1.png"];
    ant.position=ccp(240, 160);
    [self addChild:ant];

    //run animation action
    [ant runAction: animationAction];
    // run move ant action
    [ant runAction:moveAnt];

}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch=[touches anyObject];
    CGPoint loc=[touch locationInView:[touch view]];
    loc=[[CCDirector sharedDirector]convertToGL:loc];
    NSLog(@"touch (%g,%g)",loc.x,loc.y);

    // Move ant to point that was pressed
    [ant runAction:[CCSequence actions:
    [CCMoveTo actionWithDuration:realMoveDuration position:loc],
    [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)],
     nil]];
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{

    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:01:14.940

好像你的蚂蚁是你的 createAnt 方法的本地。所以在 touchesBegan 语句中，它没有“看到”蚂蚁。转到您的头文件，并在@interface 中声明蚂蚁...

CCSprite *蚂蚁;

然后回到你的 createAnt 语句，你可以写...

ant=[CCSprite spriteWithSpriteFrameName:@"ant1.png"];

现在实现（ .m ）文件中的任何其他方法都会知道您在编写“ant”时的意思

希望能帮助到你！

# c++ - C++ CMake（添加非构建文件）

> ID：10972577
> 
> 赞同：36
> 
> 时间：2012-06-10T21:43:18.140
> 
> 标签：c++, cmake

我正在使用 cmake 来配置我的项目。我使用读取 CMakeLists.txt 的 qtcreator 可视化项目文件。我有一些文本文件（非代码：配置文件、日志、..），我想将它们添加到我的 cmake 项目中，而不用（当然）编译/链接它们。是否可以 ？主要目标是使用 qtcreator 在我的项目树中自动打开它们并编辑它们......感谢您的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-10T23:47:45.167

您应该能够将它们添加到您的源列表中，无论是适当的`add_executable`还是`add_library`调用，它们都会出现在 IDE 中。

我相信 CMake 使用文件的扩展名来确定它们是否是实际的源文件，所以如果你的文件有“.txt”或“.log”之类的扩展名，它们将不会被编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-01T10:37:13.297

嗨，我创建了这种功能：

```
cmake_minimum_required(VERSION 3.5)
# cmake_parse_arguments needs cmake 3.5

##
# This function always adds sources to target, but when "WHEN" condition is not meet
# source is excluded from build process.
# This doesn't break build, but source is always visible for the project, what is 
# very handy when working with muti-platform project with sources needed
# only for specific platform
#
# Usage:
#      target_optional_sources(WHEN <condition> 
#                              TARGET <target>
#                              <INTERFACE|PUBLIC|PRIVATE> [items2...]
#                              [<INTERFACE|PUBLIC|PRIVATE> [items2...] ...])
##
function(target_optional_sources)
    set(options OPTIONAL "")
    set(oneValueArgs WHEN TARGET)
    set(multiValueArgs PUBLIC PRIVATE INTERFACE)

    cmake_parse_arguments(target_optional_sources 
                          "${options}" "${oneValueArgs}" "${multiValueArgs}"
                          ${ARGN})

    target_sources(${target_optional_sources_TARGET}
                   PUBLIC ${target_optional_sources_PUBLIC}
                   PRIVATE ${target_optional_sources_PRIVATE}
                   INTERFACE ${target_optional_sources_INTERFACE})

    if (NOT ${target_optional_sources_WHEN})

        set_source_files_properties(${target_optional_sources_PUBLIC}
                                    PROPERTIES HEADER_FILE_ONLY TRUE)
        set_source_files_properties(${target_optional_sources_PRIVATE}
                                    PROPERTIES HEADER_FILE_ONLY TRUE)
        set_source_files_properties(${target_optional_sources_INTERFACE}
                                    PROPERTIES HEADER_FILE_ONLY TRUE)

    endif(NOT ${target_optional_sources_WHEN})

endfunction(target_optional_sources) 
```

一方面它可以按预期工作，~~另一方面，[报告了一些错误](https://stackoverflow.com/q/52589094/1387438)，所以仍在努力~~. 问题是我如何使用该功能而不是如何编写它。现在它完美地工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-05T09:45:21.690

您可以创建自定义目标以使这些文件出现在您的 IDE 中，而不是添加构建库或可执行文件不需要的文件：

```
add_custom_target(myapp-doc
    SOURCE readme.txt) 
```

# c++ - 一次发送一些字节

> ID：10972580
> 
> 赞同：-6
> 
> 时间：2012-06-10T21:43:41.123
> 
> 标签：c++, c

我试图找出从字符串 ech time 发送一些文本直到它到达字符串末尾的方法，例如：

`const char* the_string = "hello world, i'm happy to meet you all. Let be friends or maybe more, but nothing less`"

输出：你好世界

输出： ，我很高兴见到你们。

输出：成为朋友或者更多

输出：，但仅此而已

停止：不再发送字节。

问题我已经搜索了谷歌，但不理解示例，我花了 4 天时间试图找到一个好方法，也是一次发送 5 个字节，但如果有更少，然后发送它们直到你在末尾字符串。

请帮帮我，我会接受 C 或 C++ 方式，只要它有效且解释清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:37:11.020

根据评论中的讨论，我相信 OP 正在寻找的是一种能够通过套接字发送全部数据的方式。

使用 C++ 和模板，通过套接字发送任意数据*（就本代码示例而言，我将使用 WinSock）*相当简单。

*通用发送功能：*

```
template <typename T>
int                 SendData( const T& tDataBuffer, SOCKET sSock ) 
{
    // Make sure the class is trivially copyable:
    static_assert( std::is_pod<T>::value && !std::is_pointer<T>::value, "The object type must be trivially copyable" );

    char* chPtr = (char*)(&tDataBuffer);

    unsigned int iSent = 0;
    for( unsigned int iRemaining = sizeof(T); iRemaining > 0; iRemaining -= iSent )
    {
        iSent = send( sSock, chPtr, iRemaining, 0 );
        chPtr += iSent;

        if( iSent <= 0 )
        {
            return iSent;
        }
    }

    return 1;
} 
```

*指针重载：*

```
template <typename T>
int                 SendData( T* const &ptObj, unsigned int iSize, SOCKET sSock )
{
    // Make sure the class is trivially copyable:
    static_assert( std::is_pod<T>::value, "The object type must be trivially copyable" );

    char* chPtr = (char*)ptObj;

    unsigned int iSent = 0;
    for( unsigned int iRemaining = iSize; iRemaining > 0; iRemaining -= iSent )
    {
        iSent = send( sSock, chPtr, iRemaining, 0 );
        chPtr += iSent;

        if( iSent <= 0 )
        {
            return iSent;
        }
    }

    return 1;
} 
```

*专业化`std::string`：*

```
template <>
int                 SendData( const std::string& szString, SOCKET sSock )
{
    // Send the size first:
    int iResult = SendData( static_cast<unsigned int>(szString.length()) * sizeof(char) + sizeof('\0'), sSock );

    if( iResult <= 0 )
        return iResult;

    iResult = SendData(szString.c_str(), static_cast<unsigned int>(szString.length()) * sizeof(char) + sizeof('\0'), sSock);
    return iResult;
} 
```

使用这些功能的示例如下：

```
std::string szSample = "hello world, i'm happy to meet you all. Let be friends or maybe more, but nothing less";

// Note that this assumes that sSock has already been initialized and your connection has been established:
SendData( szSample, sSock ); 
```

希望这可以帮助你实现你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:48:44.507

在 c++ 中，您可以使用子字符串 (substr) 方法来选择要发送的字符串的一部分。在 c 中，您必须手动遍历字符，在达到零或发送所需的字节数时停止，或者将 char 数组的一部分复制到另一个以 0 结尾的数组并发送。

例如，您可以一次发送 10 个字符，如下所示：

```
string str = randomstaff.from(whereveryoulike);
for (int i = 0; i < str.size(); i += 10)
{
    destination << str.substr(i, i + 10 < str.size() ? i + 10 : str.size());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:33:02.240

这是 C 语言的解决方案。希望我理解您的问题。

```
void send_substr(
    const char * str,
    size_t len,
    const size_t bytes_at_a_time,
    void (*sender)(const char *)
    )
/*
   sender() must check the char * manually for
   null termination or call strlen()

   for Unicode just change all size_t to unsigned long
   and all const char * to const wchar_t * (POSIX)
   or LPCWSTR (Win32)
 */
{
  size_t i, index_to_end, tail;

  //for C99 (gcc)
  char ret[bytes_at_a_time];

  //for C89 (Visual C++)
  //char * ret = (char *) malloc(sizeof(char)*bytes_at_a_time);

  tail = len % bytes_at_a_time;
  index_to_end = len - tail;

  for(i = 0; i < index_to_end; i += bytes_at_a_time)
  {
    memcpy(ret, str+i, bytes_at_a_time);
    *(ret + bytes_at_a_time) = '\0';
    (*sender)(ret);
  }
  memcpy(ret, str+index_to_end, tail);
  *(ret + tail) = '\0';
  (*sender)(ret);
  //for C89
  //free(ret);
}

void print_substr(const char * substr)
{
  while(*substr != '\0')
  {
    putchar(*substr);
    substr++;
  }
  putchar('\n');
}

int main()
{
  char test[] = "hello world, i'm happy to meet you all."
    " Let be friends or maybe more, but nothing less";
  send_substr(test, sizeof(test)/sizeof(*test), 5, &print_substr);

  return 0;
} 
```

# php - 从表中选择日期并使用 php 以不同的格式显示它

> ID：10972584
> 
> 赞同：0
> 
> 时间：2012-06-10T21:44:39.483
> 
> 标签：php, mysql

大家好..我有一个表格，我以以下格式存储日期：'YYYY-mm-dd 00-00-00'。现在我想做一个选择语句并显示日期在我给出的日期之间的所有记录。像这样：

```
$c=mysql_query("SELECT * FROM useri where data_creare_user BETWEEN '2012-06-01' AND '20120-06-05' ");   

$d=mysql_fetch_array($c);

echo $d['nume']; 
```

我知道我必须以某种方式转换表格中的日期，但我似乎无法弄清楚。你能告诉我锄头根据该选择语句显示记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:57:19.557

如果您的`data_creare_user`列不是合适的时[态数据类型](http://dev.mysql.com/doc/en/datetime.html)数据类型，它应该是。然后：

```
SELECT *
FROM   useri
WHERE  DATE(data_creare_user) BETWEEN '2012-06-01' AND '2012-06-05' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:08:57.727

听起来您正在使用 VARCHAR 将日期保存为字符串。如果您可以更改架构，则最好使用 DATE 或 DATETIME 类型。也就是说，MySQL 提供了`STR_TO_DATE()`帮助解决此问题的功能。您的查询将类似于：

```
SELECT * FROM useri WHERE STR_TO_DATE(data_creare_user, '%Y-%m-%d %H-%i-%s') BETWEEN STR_TO_DATE('2012-06-01', '%Y-%m-%d') AND STR_TO_DATE('20120-06-05','%Y-%m-%d'); 
```

# java - 使用 JAR 的 Java 小程序？

> ID：10972586
> 
> 赞同：0
> 
> 时间：2012-06-10T21:44:53.963
> 
> 标签：java, jar, applet

我目前有一个正在开发的 Java 游戏。

它从 .jar 运行，其中包含所有图像文件。.jar 在工作目录中创建和访问文件。

我想知道是否有一种简单的方法可以将它作为 Java Applet 放在网页上。我目前在游戏中有 Applet 代码，但它所做的只是调用正常的 main 方法来创建 JFrame 并运行游戏。

我需要一种简单的方法从网页（最好是小程序）在客户端上运行它？有吗？

**请注意，我一开始并没有把它做成一个小程序。它目前是一个 .jar，带有一个 .bat 来运行它。我的“Applet”课程就是这么简单......**

```
package explorer.applet;

import java.applet.Applet;

import explorer.boot.Startup;

@SuppressWarnings("serial")
public class ExplorerApplet extends Applet{

public void init()
{
    Startup.wp = true;
    Startup.main(null);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:52:53.303

> 我想知道是否有一种简单的方法可以将其放在网页上..

当然。[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)`JFrame`从链接直接启动。

> ..作为Java Applet。

为什么？小程序更难部署和维护，并为最终用户提供不太满意的体验。

* * *

请注意，无论哪种方式，基本问题都是相同的。'如何访问应用程序资源？

这种资源访问将由`URL`. 有以下两种主要选择：

1.  将资源添加到 Jar 并使用`Class.getResource("/path/to/the.resource")`
2.  将资源“松散”放在主服务器上，并形成与小程序的代码库或文档库或 JNLP 的代码库（用于配置 JWS 启动的文件）相关的 URL。

* * *

> .jar在工作目录中**创建**和访问文件。
> 
> > 大约4MB，它们存储游戏信息。（这是一个 2D 世界游戏。）
> > 它们还必须是客户端，并且在“jar”运行的文件夹中。

这对于我想到的任何沙盒技术来说都太大了，但由于它是“静态” ¹资源 - 它们可以添加到运行时类路径上的 Jar 中，从而将被“下载”并提供给应用程序。'。

如上所述访问资源。

1.  我所说的“静态”只是指“不需要由用户或应用程序编辑或更改”，而不是像“高分”之类的东西，必须由应用程序在逻辑上编写。在游戏退出。仍然可以更新地图，您需要做的就是提供更新的 Jar，其余的由 Java 完成。

# jwplayer - jwplayer 播放链接视频

> ID：10972588
> 
> 赞同：0
> 
> 时间：2012-06-10T21:45:14.797
> 
> 标签：jwplayer

HTML/JS：

```
<html lang="en">
<head>
    <script type="text/javaScript" src="javascript/bootstrap/js/bootstrap.js"></script>
    <script type="text/javaScript" src="javascript/jquery/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="javascript/jwplayer/jwplayer.js"></script>
    <link rel="stylesheet" type="text/css" href="javascript/bootstrap/css/bootstrap.css">
</head> 
<body>
    <div class="container">
    <div class="row">
        <div class="span12 page-header ">
            <h1>
                Videos
            </h1>   
        </div>  
    </div>  
    <div class="row">
      <div class="span12" id="vid">
            video will go here.
      </div>

    </div>
</div>

<script>
    jwplayer("vid").setup({
        flashplayer: "javascript/jwplayer/player.swf",
        file: "d2rlstwcyqj5nz.cloudfront.net/01.03.12.mp4",
        height: 270,
        width: 480
    });
</script>
</body>
</html> 
```

如果我直接在浏览器中打开 d2rlstwcyqj5nz.cloudfront.net/01.03.12.mp4，则会下载视频。但是在上面的代码中，播放器没有找到视频。为什么？

![在此处输入图像描述](../Images/ee8dd06b8f66cc19c1c3d7240a5dd401.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T08:39:55.287

尝试包括`http://`在开头。

# powershell - 从当前目录获取子文件夹中文件的相对路径

> ID：10972589
> 
> 赞同：67
> 
> 时间：2012-06-10T21:45:25.963
> 
> 标签：powershell, powershell-2.0, powershell-ise

是否有任何直接的方法（通过使用 cmdlet 或 .NET 类）从给定路径仅获取子文件夹中文件的相对路径？

例如，当前文件夹是`C:\MyScript`，并且有一个用文件调用的子文件夹`Data`，`Test.txt`所以我想查看`Data\Test.txt`而不是`C:\MyScript\Data\Test.txt`

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-11T05:07:10.767

该`Resolve-Path`cmdlet 有一个`-Relative`参数，该参数将返回相对于当前目录的路径：

```
Set-Location C:\MyScript
$relativePath = Get-Item Data\Test.txt | Resolve-Path -Relative 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-13T23:48:08.213

如果目录不存在，或者基目录应该与当​​前工作目录不同，则有一个 .NET 方法`[IO.Path]::GetRelativePath(String from, String to)`。

# c# - SpicIE Hostinstance 空

> ID：10972591
> 
> 赞同：0
> 
> 时间：2012-06-10T21:45:38.830
> 
> 标签：c#, internet-explorer, nullreferenceexception

我一直在使用 .net4 版本的 SpicIE 开发 IE9 插件。在我的开发机器上，一切正常。在部署机器上进行测试时，我在尝试 HostInstance.BrowserRef.Navigate(URL) 时不断收到 NullReferenceException。我添加了一些日志记录，并且在两台机器上都报告为 null，但它在开发机器上没有问题。我知道有一次它在部署中起作用，但不知道是什么破坏了它。

相关代码如下：

从插件库：

```
public class KB_Toolbar : SpicIE.Host
{
    ...
    public static KB_Toolbar HostInstance;

    public KB_Toolbar() : base()
    {
        HostInstance = this;
    }

    public static void OpenURL(string URL)
    {
        if (HostInstance != null)
            HostInstance.BrowserRef.Navigate(URL);
    }
 } 
```

从工具栏类：

```
 private void MenuClick(object sender, EventArgs e)
    {
        var URL = vURL[(int)((ToolStripDropDownItem)sender).Tag];
        KB_Toolbar.OpenURL(URL);
    } 
```

如果我将 HostInstance != null 检查留在那里，它不会在任何一台机器上执行下一行。如果我删除它，它会在 dev 上毫无问题地执行，并在部署中抛出 NRE。我已经尝试了许多廉价的黑客来解决它，但没有运气。我一生都无法弄清楚这里发生了什么，尤其是它确实可以在开发机器上工作，而据说它是空的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:39:01.377

解决了。答案是 regasm 命令中缺少 /codebase 开关。

# c - 如何将已编译库的源路径链接到 Eclipse 中的不同位置？

> ID：10972593
> 
> 赞同：1
> 
> 时间：2012-06-10T21:46:15.460
> 
> 标签：c, eclipse, elf, eclipse-cdt, msp430

我已经安装了 msp430-gcc 编译器和相关工具，以便在家中使用 Eclipse 进行一些开源 msp430 开发。我正在运行 OS X Lion 的稍旧的 Macbook Pro 上进行开发，并使用 MacPorts 安装了这些工具。我正在运行带有 CDT 和 GCC 交叉编译器支持插件的 Eclipse 3.7.2。我有一个简单的空 main() 编写，可以很好地编译和链接。

ELF 解析器让我可以很好地查看 ELF 二进制文件的内容，除了一个组件；当我尝试在 crt0.S 中查看启动代码的内容时，它给了我一个空白文件。当我单击 ELF 的 crt0.S 组件时，Eclipse 窗口底部的文件名栏显示`"/opt/local/var/macports/build/_Volumes_work_mports_dports_cross_msp430-gcc/msp430-gcc/work/gcc-4.6.3/gcc/config/msp430/crt0.S"`. 这是有道理的，因为我的 MacPorts 安装了 msp430-gcc。`crt0.S`被归档到`/opt/local/lib/gcc/msp430/4.6.3/libcrt0.a on my machine.`

我想要做的是告诉 Eclipse 在其他地方查找库的源文件，这些库在我使用 msp430-gcc 工具链构建时自动链接。这大概包括`/opt/local/lib/gcc/msp430/4.6.3/`. 我首先下载了 mspgcc-20120406 的源代码（我的 MacPorts 安装中的版本）并将 gcc 补丁文件应用到一个空目录树。这创建了`gcc/config/msp430`目录，包括`crt0.S`和`crt0ivtbl.S`文件。

我没有运气完成的是告诉 Eclipse 查找`~/Developer/mspgcc-20120406/gcc-4.6.3/config/msp430/`而不是已经构建的`libcrt0.a`. 我试着玩弄`Project Preferences->Paths and Symbols->Source Location`窗户，但运气不佳。我通过这个网站和谷歌搜索，我想出的最接近的是[这个问题](https://stackoverflow.com/questions/6784543/how-to-attach-source-to-the-libraries-on-eclipse-cdt)，但它不像正确答案“闻起来”。

我想避免涉及将库源移动到我的项目中的解决方案。我宁愿有一个适用于多个项目的解决方案。

非常感谢所有帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:53:50.877

尝试检查 Eclipse**[链接资源](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/concepts-13.htm)**是否可以帮助您在此处从 Eclipse 项目中声明该外部目录。

> 链接资源是存储在项目位置之外的文件系统中的位置的文件和文件夹。这些特殊资源可用于将文件和文件夹添加到您的项目中，出于某种原因必须将其存储在项目之外的某个位置。例如，链接文件夹可用于将构建输出与源文件分开存储。

我发现如何定义该链接资源很有趣：

> 链接的资源目标路径可以定义为绝对路径，也可以定义为**相对于路径变量**。

![相对于路径变量的链接资源](../Images/f71f672621f2b3628f2f26003a9882a7.png)

由于您可以相对于（例如）您的 Eclipse*项目位置* `PROJECT_LOC`来定义它，因此您可以以不会在两个环境之间更改的方式设置您的资源。

# cocoa - 是否有任何面向开源代码的文本字段 Cocoa 类？

> ID：10972594
> 
> 赞同：2
> 
> 时间：2012-06-10T21:46:16.270
> 
> 标签：cocoa, textfield

我知道 Panic 在 Coda 中使用的[SubEthaEdit 引擎](http://www.codingmonkeys.de/subethaengine/)，但是有没有像样的开源 Cocoa 类来呈现面向代码的文本字段编辑器？

我想在我的 Mac 应用程序中提供一个功能，用户可以使用语法高亮和自动完成功能来编辑代码，我不想重新发明轮子或将所有时间都花在这方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:39:50.973

虽然我对这段代码没有直接经验，但它确实符合您的要求 - 代码编辑和语法突出显示：

认识[弗赖斯](https://github.com/jfmoy/Fraise/)！

# python - Python 的 DXT 压缩

> ID：10972595
> 
> 赞同：2
> 
> 时间：2012-06-10T21:46:28.820
> 
> 标签：python, image, compression, dxt

我目前正在使用图像，其中一些是 DXT 压缩的，我需要一种简单的方法来使用 Python 解压缩和压缩这些文件。不幸的是，我找不到任何为我做这件事的图书馆。

有谁知道一个好的 Python 的 DXT-Compression 库，或者一个压缩库的接口？

-- dav1d

**编辑：**

libsquish 是去这里的方式，但不幸的是 Python-Bindings 不起作用，所以这里是解决方案。

在 C++ 中创建一个 squish-Wrapper，它导出内部访问 libsquish 的函数：

```
#include <squish.h>

typedef unsigned char u8;

extern "C" {
    void CompressMasked( u8 const* rgba, int mask, void* block, int flags ) {
        squish::CompressMasked(rgba, mask, block, flags);
    }

    void Compress( u8 const* rgba, void* block, int flags ) {
        squish::Compress(rgba, block, flags);
    }

    void Decompress( u8* rgba, void const* block, int flags ) {
        squish::Decompress(rgba, block, flags);
    }

    int GetStorageRequirements( int width, int height, int flags ) {
        return squish::GetStorageRequirements(width, height, flags);
    }

    void CompressImage( u8 const* rgba, int width, int height, void* blocks, int flags ) {
        squish::CompressImage(rgba, width, height, blocks, flags);
    }

    void DecompressImage( u8* rgba, int width, int height, void const* blocks, int flags ) {
        squish::DecompressImage(rgba, width, height, blocks, flags);
    }
} 
```

创建一个动态库（windows 上的 dll，或者 linux 上的等等，我称之为`libsquishc.so`）并用`ctypes`.

我的方法（只导出我需要的功能）：

```
from ctypes import CDLL, c_int, byref, create_string_buffer
import os.path

libsquish_path = os.path.join(os.path.split(os.path.abspath(__file__))[0], 'libsquishc.so')
libsquish = CDLL(libsquish_path)

DXT1 = 1 << 0 
DXT3 = 1 << 1 
DXT5 = 1 << 2 

COLOR_ITERATIVE_CLUSTER_FIT = 1 << 8    
COLOR_CLUSTER_FIT = 1 << 3    
COLOR_RANGE_FIT = 1 << 4
WEIGHT_COLOR_BY_ALPHA = 1 << 7

GetStorageRequirements = libsquish.GetStorageRequirements
GetStorageRequirements.argtypes = [c_int, c_int, c_int]
GetStorageRequirements.restype = c_int

def compress_image(rgba, width, height, flags):
    rgba = create_string_buffer(rgba)

    c = GetStorageRequirements(width, height, flags)
    buffer = create_string_buffer(c)

    libsquish.Compress(byref(rgba), byref(buffer), c_int(flags))

    return buffer.raw

def decompress_image(block, width, height, flags):
    block = create_string_buffer(block)

    c = width*height*4
    rgba = create_string_buffer(c)

    libsquish.DecompressImage(byref(rgba), c_int(width), c_int(height), byref(block), c_int(flags))

    return rgba.raw 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:17:19.010

[libSquish](http://code.google.com/p/libsquish/)有[一个补丁来添加 Python 绑定](http://code.google.com/p/libsquish/issues/detail?id=17)。

**编辑：**安装过程似乎是

1.  下载[squish-1.11.zip](http://libsquish.googlecode.com/files/squish-1.11.zip)
2.  解压并编译 - 应该会生成一个 libsquish.a 文件
3.  下载并安装[Cython](http://cython.org)（听起来你这样做了）
4.  创建一个临时目录并“应用”补丁 - 它会丢弃一堆新文件，这些文件是绑定代码
5.  运行安装程序（sudo python setup.py install）

如果您这样做并且仍然有错误，那么也许您应该 (a) 分享实际的错误消息以便我们找出原因，或者 (b) 直接联系补丁作者 - mat (at) kivy.org

**Edit2：**编译错误足够短，我将在此处包含它：

```
running install
running build
running build_ext
skipping 'squish.c' Cython extension (up-to-date)
building 'squish' extension
gcc -pthread -fno-strict-aliasing -march=i686 -mtune=generic -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -D_FORTIFY_SOURCE=2 -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -D_FORTIFY_SOURCE=2 -fPIC -I.. -I/usr/include/python2.7 -c squish.c -o build/temp.linux-i686-2.7/squish.o
In file included from squish.c:274:0:
/usr/include/squish.h:32:1: error: unknown type name 'namespace'
/usr/include/squish.h:32:18: error: expected '=', ',', ';', 'asm' or '__attribute__' before '{' token
squish.c: In function '__pyx_pf_6squish_compressImage':
squish.c:790:22: error: 'squish' undeclared (first use in this function)
squish.c:790:22: note: each undeclared identifier is reported only once for each function it appears in
squish.c:790:28: error: expected ';' before ':' token
squish.c:866:10: error: expected expression before ':' token
squish.c: In function '__pyx_pf_6squish_2decompressImage':
squish.c:1202:10: error: expected expression before ':' token
error: command 'gcc' failed with exit status 1 
```

squish.h 的相关部分看起来像

```
#ifndef SQUISH_H
#define SQUISH_H

//! All squish API functions live in this namespace.
namespace squish {

// ----------------------------------------------------------------------------- 
```

看起来它被`namespace`关键字窒息了，我想说的是，当它应该编译为 C++ 时，它正在编译为 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:17:14.343

libsquish 有一些贡献的 python 绑定：[http](http://code.google.com/p/libsquish/issues/detail?id=17) ://code.google.com/p/libsquish/issues/detail?id=17但是我没有使用它们。

# grails - Grails：提交后刷新视图

> ID：10972598
> 
> 赞同：0
> 
> 时间：2012-06-10T21:47:02.847
> 
> 标签：grails, controller

我已经看到了类似问题的各种答案，但不适用于这种特定情况：

我有一个带有多个字段和一个提交按钮的 Grails gsp。我想在第一个字段中输入一个值，单击提交，然后让控制器将值返回到其余字段（包括原始输入字段）。我想通过简单的页面刷新（无 AJAX）来做到这一点，它不涉及数据库。我让它在两个相同但名称不同的 gsp 页面上运行良好。我只是调用第一个，输入值，然后让提交操作指向第二个。但我希望能够用一个 gsp 来做到这一点。我的控制器的简化版本如下所示：

```
class CalculatorController {

    def index = {
    redirect(action: "input")
    }

    def input= {}

    def calculateValues = {

        def inputString = params.enterValue
        def value2 = 'You entered something on the page'
        [field1: inputString, field2: value2]
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:18:43.823

如果您只想使用一个 gsp，则需要在同一个闭包中包含所有逻辑。测试参数是否传入并返回正确的 val

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:34:08.613

实际上，您不需要将所有逻辑都放在同一个闭包中。只需指定要在 calculateValues 中使用的视图模板...

```
def calculateValues = {
  def inputString = params.enterValue
  def value2 = 'You entered something on the page'
  render(view: 'input', model: [field1: inputString, field2: value2])
} 
```

通过使用 render 方法，您可以让多个控制器操作重用相同的 gsp 视图。

# sql - Sqlite 3：与group by和不与group by一起选择和计数

> ID：10972599
> 
> 赞同：3
> 
> 时间：2012-06-10T21:47:04.507
> 
> 标签：sql, sqlite

在这个问题之前 [Sqlite 3 Insert and Replace 在超过 1 个唯一列上失败](https://stackoverflow.com/questions/10972256/sqlite-3-insert-and-replace-fails-on-more-than-1-unique-column/10972316#comment14328588_10972316)

我有一个带有架构的表，

```
CREATE TABLE tbl_poll ( 
    id         INTEGER PRIMARY KEY AUTOINCREMENT,
    poll_id    STRING NOT NULL,
    ip_address STRING NOT NULL,
    opt        STRING NULL,
    CONSTRAINT 'unique_vote_per_poll_per_ip_address' UNIQUE ( poll_id, ip_address )  ON CONFLICT REPLACE 
); 
```

当我做，

```
select opt,count(opt) as count from tbl_poll where poll_id = 'jsfw' group by opt 
```

结果是

```
opt            count
0                4
2                2 
3                2 
```

*即4个用户选择了0个选项，2个和3个选项分别被2个和2个用户选择。*

有什么办法可以让我得到如下结果

```
 opt            count    percent
    0                4        0.5       
    2                2        0.25 
    3                2        0.25 
```

其中百分比 = 计数 / 总计数

如果我能得到总数，即 (4+2+2 = 8 )，那也可以解决我的问题。

我试过这个，

```
 select opt,count(opt) as count from tbl_poll where poll_id = 'jsfw' 
```

但它不起作用，因为没有列不一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:07:34.513

```
SELECT opt
     , COUNT(*) AS count
     , ROUND(CAST(COUNT(*) AS REAL)/total, 2) AS percent 
FROM tbl_poll 
  CROSS JOIN
    ( SELECT COUNT(*) AS total 
      FROM tbl_poll 
      WHERE poll_id = 'jsfw' 
    ) AS t
WHERE poll_id = 'jsfw' 
GROUP BY opt ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:01:33.797

如果您知道 opt 的所有可能值，则可以使用`CASE WHEN`语句：

```
SELECT COUNT(opt) as total, SUM(CASE WHEN opt = '0' OR opt IS NULL OR TRIM(opt) = '' THEN 1 ELSE 0 END) as total0, SUM(CASE WHEN opt = '1' THEN 1 ELSE 0 END) as total1, ... FROM tbl_poll WHERE poll_id = 'jsfw' 
```

这会给你：

```
total    total0    total1    ...
8        4         0         ... 
```

如果这不是一组封闭的选项，请告诉我。

语法如下：

```
CASE WHEN condition THEN result_for_true ELSE result_for_false END
CASE WHEN condition1 THEN result_for_1 WHEN condition2 THEN result_for_2 ELSE result_for_false_on_all END 
```

# javascript - 使用 D3 绘制具有不同 Y 比例的多个图

> ID：10972600
> 
> 赞同：0
> 
> 时间：2012-06-10T21:47:29.313
> 
> 标签：javascript, graph, d3.js, axes

我正在使用 d3 制作多条线图（参见功能示例[http://jsfiddle.net/hSrP7/](http://jsfiddle.net/hSrP7/)）。但是，我想为每个地块设置不同的 yscale。我尝试了如下语法，但没有成功：

```
var diseases = ['Maternal_Mortality', 'Child_Mortality', 'Malaria']

    var min = []
        min['Maternal_Mortality'] = .4
        min['Child_Mortality'] = .3
        min['Malaria'] = .1
    var max = []
        max['Maternal_Mortality'] = .7
        max['Child_Mortality'] = .6
        max['Malaria'] = .8

yscale = function(dis) {
       yval = d3.scale.linear().domain([min[dis], max[dis]).range([plotHeight -     
       bottomPadding, topPadding])
       return yval
}

var yaxes = d3.svg.axis()
        .scale(diseases.forEach(function(d) {return yscale(d)})) 
```

这是使用这种不起作用的语法的小提琴链接（http://jsfiddle.net/Hn5JX/）。有没有办法将不同的 yscales 传递给每个图？我实际使用的图表有更大的差异。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:18:22.540

你刚刚在你的javascript中有一个type-o。您忘记关闭传入 yscale 域的数组：

```
.domain([min[dis], max[dis])  // change to:
.domain([min[dis], max[dis]]) 
```

[http://jsfiddle.net/Hn5JX/2/](http://jsfiddle.net/Hn5JX/2/)

修复了小提琴并且它正在渲染，但如果你仍然没有看到你需要的东西，我会编辑答案。

# emacs - 在elisp中异步等待进程完成？

> ID：10972602
> 
> 赞同：3
> 
> 时间：2012-06-10T21:47:31.523
> 
> 标签：emacs, asynchronous, elisp

我希望能够异步等待进程，例如：

```
(start-file-process "my-process" "*my-process*" "do" "something")
(on-finish "my-process"
    (do-something-else)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T23:13:20.907

您想阅读有关 Process Sentinel 的信息：

`C-h``i``g` `(elisp) Sentinels` `RET`

# haskell - 地图上的非交换交集

> ID：10972608
> 
> 赞同：1
> 
> 时间：2012-06-10T21:48:44.897
> 
> 标签：haskell, map

如何定义函数，为第一个映射的每个键查找第二个映射的值，将一些函数应用于这两个值并生成第三个映射？

`∷ (α → Maybe β → γ) → Map k α → Map k β → Map k γ`

我玩了一些 , 和 的组合`unionWith`，`differenceWith`但`intersectionWith`坚持将它们与`lookup`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T21:53:59.877

是

```
foo :: (α → Maybe β → γ) → Map k α → Map k β → Map k γ
foo comb ma mb = Map.mapWithKey (\k a -> comb a (Map.lookup k mb)) ma 
```

你想要什么？

# java - 我们可以在非派生类中使用“super”关键字吗？

> ID：10972609
> 
> 赞同：-4
> 
> 时间：2012-06-10T21:48:44.973
> 
> 标签：java, super

我们可以在非派生类中使用 super 关键字吗？（Sun Certified Programmer for Java 2 第 7 章中有这样的代码）。在这里，它用于OfficeRoom 类，它不是子类。

```
1st question example code:
Building.Java

public class Building
{
long length;
long width;

OfficeRoom [] officeRooms; // The building has number of rooms

public Building (long len,long wid,OfficeRoom [] ors)
{
length = len;
width = wid;
officeRooms = ors;
}

public long area()
{
return length * width;
}
}

OfficeRoom.java

public class OfficeRoom
{
long length;
long width;

public Office(long len,wid)
{
super(len,wid)  //What is the job of super here?? It is not inside a subclass??
}

public long area()
{
return length * width;
}
} 
```

有可能还是书上写错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T21:49:43.130

一切都是从 Object 派生的，所以答案永远是*yes*，你可以使用 super() 只要它是构造函数的第一行代码。当然它不会做任何建设性的事情，但你仍然可以调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:42:48.710

1.  All classes are derived except for Object, and you aren't writing that. So the question is meaningless.

2.  No.

# android - 保存状态异常

> ID：10972611
> 
> 赞同：7
> 
> 时间：2012-06-10T21:49:09.013
> 
> 标签：android

我的应用程序出现以下异常。我相信当用户离开应用程序很长时间然后返回时会发生这种情况。我无法复制它，但它在我的崩溃日志中出现了很多。我不知道为什么会发生这种情况，因此非常感谢任何建议。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.MyActivity}: java.lang.ArrayIndexOutOfBoundsException: length=3; index=-1
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2202)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
at android.app.ActivityThread.access$600(ActivityThread.java:139)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4974)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ArrayIndexOutOfBoundsException: length=3; index=-1
at java.util.ArrayList.get(ArrayList.java:306)
at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1764)
at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:198)
at com.myapp.MyActivity.onCreate(MyActivity.java:235)
at android.app.Activity.performCreate(Activity.java:4538)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
... 11 more 
```

第 235 行如下：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    // line 235 
```

我的 onSaveInstanceState() 非常简单：

```
@Override
public void onSaveInstanceState(Bundle state) {
    super.onSaveInstanceState(state);

    state.putInt("id1", id1);
    state.putInt("id2", id2);
    state.putInt("id3", id3);
    state.putInt("id4", id4);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:24:29.873

I ran into this same problem, I believe it a bug with android. Take a look at this thread for a possible solution [http://code.google.com/p/android/issues/detail?id=22404](http://code.google.com/p/android/issues/detail?id=22404)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T12:36:45.667

我遇到了完全相同的问题，我遵循了肯尼链接中给出的建议：

我使用了以下内容：

```
FragmentManager.enableDebugLogging(true); 
```

这将在日志中显示所有调用`FragmentManager`（添加、删除、隐藏等）。

它让我看到了我的情况出了什么问题，我的应用程序中的一个片段有时没有正确保存在实例中，并且它的内容为空。

然后，当应用程序尝试从实例恢复此空片段时，崩溃发生了相同的错误日志。

在我的例子中，这个片段有点特别，是自动创建的。为了确保不再出现错误，我`FragmentManager`在退出`Activity`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T07:15:07.570

我遇到了同样的问题，发生方向变化，但它只发生在较旧的 Android 版本（4.0.4），较新的版本如 4.4.2 很好。我想和你分享我是如何修复它的。

正如 Kenny 和 Yoann 建议的那样，我使用了

```
FragmentManager.enableDebugLogging(true); 
```

并发现已经完成了太多的删除。我不得不`ft.remove(df)`从我的代码中删除，现在上面提到的两个版本都很好。这是我的代码：

```
if (savedInstanceState != null) {
    final FragmentTransaction ft = getFragmentManager().beginTransaction();
    final DialogFragment df = (DialogFragment) getFragmentManager().findFragmentByTag("tag");
    if (df != null) {
        df.dismiss();
        // ft.remove(df);
        frag = new MyDialogFragment();
        frag.show(getFragmentManager(), "tag");
    }
    ft.addToBackStack(null);
    ft.commit();
} 
```

为了完整起见，这就是我所做的`onSaveInstanceState(final Bundle outstate)`：

```
if (frag != null) {
    getFragmentManager().putFragment(outState, "tag", frag);
} 
```

# jquery - 在选择菜单失去焦点时触发事件

> ID：10972612
> 
> 赞同：1
> 
> 时间：2012-06-10T21:49:19.000
> 
> 标签：jquery

我有一个包含一堆行的表格，我希望在单击时用选择菜单替换单元格的内容。我正在考虑以下内容：

[http://jsfiddle.net/dRZmQ/1/](http://jsfiddle.net/dRZmQ/1/)

```
 $("#my-table tbody").on("click", "td.edit", function(){
    var $t=$(this),role=$t.text();
    $t.html($("#select-clone").clone(false).removeAttr('id'));
 }).on("change", "td.edit", function(){
    alert('change');
 }).on("blur", "td.edit", function(){
    alert('blur');
 }); 
```

上面的代码几乎可以工作，但由于某种原因，如果没有按下鼠标按钮，选择菜单就会关闭。

现在，当Select菜单失去焦点时，我希望触发一个事件，该事件将选择菜单替换为原始文本。我一直在玩模糊（），但没有得到它的工作。当更改选择菜单时，我希望触发一个可以保存数据的事件，然后再次将选择菜单替换为选定选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:46:22.607

## 1)

**要解决您的第一个问题**，您需要记住您正在将 a 附加`select`到带有`click`事件的元素！因此，每次您`click`在 上时，您都会在... 上`select`触发浏览器，这就是为什么您在选择过程中被迫保留的原因。`click``.edit``mousedown`

要修复它，只需添加一个`span`并将单击绑定到跨度，保持`select`附加到`.edit`：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/NAHXR/)示例！

**相关的 HTML**

```
<tbody>
  <tr><td>xxx</td><td class="edit"><span>yyy</span></td></tr>
  <tr><td>xxx</td><td class="edit"><span>yyy</span></td></tr>
  <tr><td>xxx</td><td class="edit"><span>yyy</span></td></tr>
</tbody> 
```

**查询**

```
$("#my-table td.edit").on("click", "span", function(){
  var $t    = $(this),
      $html = $t.parent(),
      role  = $t.text();

  $html.html($("#select-clone").clone(false).removeAttr('id'));
}); 
```

* * *

## 2)

要将选定的选项文本放置在您的 上`.edit`，您只需要将事件处理程序绑定到，并从选定的`change`中收集：`HTML``option`

请参阅此[工作小提琴](http://jsfiddle.net/zuul/NAHXR/3/)示例！

**jQuery**

```
$('.edit').on("change", "select", function() {
  var $t2 = $(this),
      val = $(this).find(':selected').html();

  $t2.parent().html(val);
}); 
```

* * *

## 3)

要让 step 01 e 02 循环，您需要将选定的值包装`option`到 a`span`中，以在用户单击文本时保持`click`事件触发：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/NAHXR/5/)示例！

**jQuery**

```
$('.edit').on("change", "select", function() {
  var $t2   = $(this),
      $span = $('<span>'),
      val   = $span.html($(this).find(':selected').html());

  $t2.parent().html(val);
}); 
```

# c# - 我应该使用什么 C# 数据存储？

> ID：10972613
> 
> 赞同：0
> 
> 时间：2012-06-10T21:49:20.003
> 
> 标签：c#

我正在尝试创建一个测试框架，但不确定最好使用什么来存储将在 XML 文件中提供的测试用例名称和数据。例如，我想测试打印机功能，使其具有构造函数、打开打印机连接、向打印机发送数据、关闭打印机连接。所以 XML 将是：

```
<Printer>
  <TestCaseName>"Printer_Construct"</TestCaseName>
    <Data1>"Printer1"</Data1>

  <TestCaseName>"Printer_OpenConnection"</TestCaseName>
    <Data1>"Printer1"</Data1>

  <TestCaseName>"Printer_PrintString"</TestCaseName>
    <Data1>"Printer1"</Data1>
    <Data2>"Printing my string"</Data2>

  <TestCaseName>"Printer_CloseConnection"</TestCaseName>
    <Data1>"Printer1"</Data1>
</Printer> 
```

这是我的测试框架想要的工作方式：

1-当测试操作员运行测试框架时，首先它将所有案例名称仅加载到listbox1中。它还不会加载测试用例数据。

2-当测试操作员选择要运行的特定测试用例时，它将将该测试用例加载到listbox2中。所以当它将测试用例加载到listbox2中时，它会显示测试用例名称和测试数据（data1和data2如上面的xml结构所示）。

3- 现在，只要测试操作员单击“运行”按钮，listbox2 中的测试用例就可以进行测试了。

那么如何存储测试用例数据呢？我应该将这些数据存储在内存中吗？如果是这样，我应该使用什么存储数据功能？如果不将这些数据存储在内存中，这是否意味着我每次访问测试用例数据时都必须读取 XML，所以这样做是一种好习惯吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:57:17.600

如果您在 XML 中定义测试用例，那么您可能会受益于在 XML 模式定义文件中定义其结构并使用[工具](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)从该文件生成内存数据结构以及反序列化器（自动读取器）`.xsd`。该工具将为您提供`C#`可以包含在程序中的文件。您会惊讶于使用这种表示是多么容易。

但是，在开始之前，虽然您的 XML 结构可能在这个非常简单的初始情况下工作，但它似乎不太易于维护。如果“数据”节点在逻辑上属于它们之前的“测试用例”节点，那么即使在 XML 结构中也应该如此，如下所示：

```
<Printer>
    <TestCaseName Name="Printer_Construct">
        <Data1>"Printer1"</Data1>
    </TestCaseName>

    <TestCaseName Name="Printer_PrintString">
        <Data1>"Printer1"</Data1>
        <Data2>"Printing my string"</Data2>
    </TestCaseName>
</Printer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:01:50.180

存储此类信息的位置很大程度上取决于您的界面是什么。

对于 Windows 应用程序（控制台或 winforms），您可以在第一次需要时将其存储在内存中并继续查找。

另一方面，如果它是一个 Web 界面，我强烈推荐内置的 .net Web 缓存。它非常高效，并且具有强大的缓存到期选项，例如能够在您更改文件时随时重新加载文件，否则会持续存在。

# apache - codeigniter 只加载主页

> ID：10972619
> 
> 赞同：0
> 
> 时间：2012-06-10T21:49:54.833
> 
> 标签：apache, codeigniter

Codeigniter 在本地运行良好。一旦我搬到我们的实际站点，它就停止了工作。这是我的 .htaccess 文件：

```
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ~username/folder1/folder2/index.php/$1 [L,QSA] 
```

它只加载控制器的 index 方法，找不到其他方法。此外，当我键入[http://domain.name/~username/folder1/folder2/ControllerClass](http://domain.name/~username/folder1/folder2/ControllerClass)时，不会调用 index 方法。我不知道该怎么做。我已经尝试过：[在 Codeigniter 中开发的站点只加载主页](https://stackoverflow.com/questions/4602474/site-developed-in-codeigniter-only-loads-home-page)，但它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:15:40.570

1.  确保您`$config['base_url']`在 config.php 中正确编辑。
2.  再次在里面`config.php`，设置`$config['index_page'] = '';`
3.  查看[http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)并确保您按照那里的规定做了所有事情。

# c# - windows phone DispatcherTimer 精度

> ID：10972620
> 
> 赞同：0
> 
> 时间：2012-06-10T21:49:57.063
> 
> 标签：c#, windows-phone-7

所以，我得到了一个应用程序（windows phone 7.5 over c#），它使用 DispatcherTimer 来模拟一个计时器。我已将间隔设置为 1 毫秒：

```
timer.Interval = new TimeSpan(0,0,0,0,1); 
```

然后我声明一个 TimeSpan 以便进行简单的倒计时：

```
TimeSpan countdown = TimeSpan.FromSeconds(10); 
```

在每个刻度上，我减去 1 毫秒：

```
countdown = countdown.Subtract(TimeSpan.FromMilliseconds(1)); 
```

在 Visual Studio 的 windows phone 模拟器 256/512 中，它的工作“没有问题”，但是当我在我的手机（LG Quantum）上运行它时，它似乎有精度问题。我已经将它与运行应用程序的 PC 屏幕进行了比较，它在手机上的运行速度较慢。我试图不在我的手机中以调试模式运行应用程序。有什么解决办法吗？或者我必须采取另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T21:54:04.807

在这里使用不同的方法会更好：

1.  启动计时器时记录当前时间

    ```
    DateTime startTime = DateTime.Now; 
    ```

2.  每次你的计时器滴答作响，重新计算倒计时

    ```
    TimeSpan countdown = DateTime.Now - startTime; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:58:43.377

经验告诉我，您只是想触发太多事件，让手机硬件无法处理。

来自 MSDN：

> DispatcherTimer 在每个 DispatcherTimer 循环的顶部重新评估。
> 
> 定时器不能保证在时间间隔发生时准确执行，但可以保证在时间间隔发生之前不会执行。

请记住，实际的电话硬件是单核的，因此尝试每秒精确捕获 1000 个事件并不是最好的方法。

要么增加滴答之间的时间并根据新的间隔增加，要么将计时器启动的时间从每个滴答的当前时间中减去。

# python - 在 django 中保存 tmp 文件

> ID：10972627
> 
> 赞同：3
> 
> 时间：2012-06-10T21:51:58.670
> 
> 标签：python, django

我想在 django 中保存一个 tmp 文件。该文件将立即删除，但我需要将其临时保存以进行传输。我尝试在我的应用程序中创建一个名为的文件夹`'tmp'`，但我收到一个权限错误，不允许我保存到 django 中的该目录。我可以在哪里以及如何最轻松地在 django 中保存临时文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:54:28.950

查看 Python[标准库 "tempfile"](http://docs.python.org/library/tempfile.html)。在那里你应该找到你需要的东西。

# javascript - 拖动鼠标关闭按钮时自定义 HTML 按钮不起作用

> ID：10972633
> 
> 赞同：0
> 
> 时间：2012-06-10T21:53:01.390
> 
> 标签：javascript, html, button, dom-events

我有一个 HTML 按钮，它包装了一个图像标签并定义了一个`onmouseup`和`onmousedown`处理程序。当按钮向下时，图像变为按下的图像，当它向上时，它变为向上的图像。问题是如果用户在按钮按下时将鼠标从按钮上拖开，`onmouseup`则永远不会调用该事件，因此图像会保持按下状态。这是正在发生的事情的一个例子。尝试单击按钮并将其拖出：http: [//jsfiddle.net/gsingh93/ubyV8/5/](http://jsfiddle.net/gsingh93/ubyV8/5/)

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:00:05.013

您必须`window`用作目标：

```
document.getElementsByTagName("button")[0].addEventListener("mousedown", function(){
    document.getElementById("image").src = "http://www.clogsmusic.com/padma/redCircle50x50.gif";
    window.onmouseup = function(){
        document.getElementById("image").src = "http://creativeenergyblog.files.wordpress.com/2008/05/blue-circle.jpg?w=50&h=50";
    }
}); 
```

**工作演示：http:** [//jsfiddle.net/DerekL/XTLJ6/](http://jsfiddle.net/DerekL/XTLJ6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:00:43.580

当鼠标离开按钮时调用 mouseUp()：

```
onmouseout="mouseUp();" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:08:06.120

好，我知道了！我摆脱了图像并将图像作为按钮的背景。我还实现了一个条件 onmouseout() 调用来处理您的问题。看一看。喜欢就点个赞吧！

[http://jsfiddle.net/ubyV8/19/](http://jsfiddle.net/ubyV8/19/)

# python - 如何在标准 python 控制台中访问 BPY？BPY 是 Blender-python 的东西

> ID：10972637
> 
> 赞同：14
> 
> 时间：2012-06-10T21:53:56.343
> 
> 标签：python, blender

作者[在](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-using-blender-s-new-bpy-python-api-4898905)17.20-17.50 点中提到，将来您可以使用标准 Python 解释器访问 BPY。它已经 1 岁了，那么如何使用标准 python 控制台访问 BPY？

> **试用 0：roundaround -解决方案不适用于 Blender 中的子进程**
> 
> ```
> subprocess.call(['vim', 'test.py'])
> # some editing of BPY -file with Vim (not working currently)
> subprocess.call(['python', 'test.py'])  
> # trying to execute the python -file (not working currently) 
> ```
> 
> **试验 1：不在 Blender 之外工作**
> 
> ```
> $ cat cubes.py 
> import bpy
> 
> mylayers = [False]*20
> mylayers[0] = True
> add_cube = bpy.ops.mesh.primitive_cube_add
> for index in range(0, 5):
>     add_cube(location=(index*3, 0, 0), layers=mylayers)
> $ python cubes.py 
> Traceback (most recent call last):
>   File "cubes.py", line 1, in <module>
>     import bpy
> ImportError: No module named bpy 
> ```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T14:03:49.757

根据[这些说明](http://wiki.blender.org/index.php/User:Ideasman42/BlenderAsPyModule)：

获取搅拌机源代码：

```
cd ~/src # or what you prefer
git clone http://git.blender.org/blender.git

cd blender
git submodule update --init --recursive
git submodule foreach git checkout master
git submodule foreach git pull --rebase origin master 
```

注意依赖关系，如有必要，请参见[此处](http://wiki.blender.org/index.php/Dev:Doc/Building_Blender/Linux/Ubuntu/CMake)^*并通过`bpy`目标进行编译：

```
cd ~/src/blender
make bpy 
```

`file INSTALL cannot set permissions on [...]`如果发生类似错误，（重新）以 root 身份运行后者

你的 python **3**现在应该能够`import bpy`.

* * *

^*对于 Debian-ish 系统运行

```
sudo apt-get install subversion build-essential gettext \
 libxi-dev libsndfile1-dev \
 libpng12-dev libjpeg-dev libfftw3-dev \
 libopenexr-dev libopenjpeg-dev \
 libopenal-dev libalut-dev libvorbis-dev \
 libglu1-mesa-dev libsdl1.2-dev libfreetype6-dev \
 libtiff4-dev libavdevice-dev \
 libavformat-dev libavutil-dev libavcodec-dev libjack-dev \
 libswscale-dev libx264-dev libmp3lame-dev python3.2-dev \
 libspnav-dev libtheora-dev libjack-dev libglew1.6-dev 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-21T01:42:01.007

如果这仍然相关，您可以像这样在搅拌机的上下文中运行脚本（`-b`使其无头，因此您可以在没有 X11 的渲染服务器上运行它）：

```
blender -b -P script.py 
```

有关更多选项，请参阅`blender --help`。

如果您想将搅拌机连接到 IPython 控制台，那么您可以通过 python 与搅拌机进行交互，您可以使用我刚刚编写的这个脚本：[https ://github.com/panzi/blender_ipython](https://github.com/panzi/blender_ipython)

启动笔记本：

```
./blender_ipython.py notebook 
```

启动 Qt 控制台：

```
./blender_ipython.py qtconsole 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T00:34:10.800

我使用eclipse在blender中开发。我发现一个很好的起点是 [http://airplanes3d.net/pydev-000_e.xml](http://airplanes3d.net/pydev-000_e.xml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T20:01:07.007

本文解释了如何将 blender 构建为 python 模块。

[http://wiki.blender.org/index.php/User%3aIdeasman42/BlenderAsPyModule](http://wiki.blender.org/index.php/User%3aIdeasman42/BlenderAsPyModule)

这种技术似乎不会将外部 python 会话连接到常规搅拌机进程，而是在 python 进程内运行搅拌机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T23:52:30.000

在您在该时间段发布的视频链接中，没有提到使用标准 python 解释器运行独立的搅拌机 python 脚本。您在视频中看到的是他们为 Blender 中内置的解释器打开了交互式控制台。

Blender 需要它自己的捆绑 python 环境，如果您要尝试使用标准 python 解释器运行脚本，则必须设置环境以包含 blender 包中的所有包。虽然它似乎甚至不可能，因为我认为 Blender 的 python 被修改了。

blender 可执行文件似乎允许您通过以下方式运行 python 脚本：
`/path/to/blender -P cubes.py`

您还可以通过以下方式从 bash shell 启动交互式控制台：
`/path/to/blender --python-console`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-20T02:52:22.747

有人创建了一个存根 API 生成器。他甚至在 Github 上为 Blender 版本 2.78、2.79、2.80 托管了生成的 bpy。在 IDE 中编写代码应该足够了，例如 PyCharm。我在生成的代码中发现了一些语法错误。你必须修复它们。也有一个文件。

[https://github.com/nutti/fake-bpy-module/tree/master/premade_modules/2.79](https://github.com/nutti/fake-bpy-module/tree/master/premade_modules/2.79)

如果 Nutti 的文档有点短，这里是安装说明的网站。

[https://b3d.interplanety.org/en/using-external-ide-pycharm-for-writing-blender-scripts/](https://b3d.interplanety.org/en/using-external-ide-pycharm-for-writing-blender-scripts/)

要运行代码，您必须使用 Blender 的 Python，正如其他答案已经指出的那样。

```
blender -b -P script.py 
```

对不起，关于链接唯一的答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-28T16:45:20.793

我是编程新手，但我找到了一个简单的解决方法，我使用 os. 我的程序看起来有点像这样。

```
import os
os.system("cd /home/") 
```

（那是我的搅拌机所在的地方）

然后我以与使用 cd 相同的方式使用终端命令。

[https://docs.blender.org/manual/en/dev/render/workflows/command_line.html](https://docs.blender.org/manual/en/dev/render/workflows/command_line.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-02T22:14:11.813

您可以在blender的文本编辑器中运行任何编写的脚本，并在blender的python控制台中对其进行调试，方法如下：

1.创建您的脚本文件并将您的代码放在那里。

2.  在搅拌机中打开控制台 python 并输入： `bpy.data.texts[INDEX_OF_YOUR_FILE].as_module()`。

    INDEX_OF_YOUR_FILE 是文本编辑器中文本列表下拉菜单中文件的索引。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-20T07:27:04.293

您可以使用搅拌机从命令行在后台运行/不运行 python 脚本。转到安装搅拌机的目录，在那里打开终端/cmd并输入以下命令 -

```
blender -b -P path/to/your/script.py 
```

该标志`-b`告诉搅拌机在后台运行。`-P`告诉使用搅拌机的 python 运行 python 脚本。如果要打开搅拌机的 GUI 并运行`py`脚本，请运行以下代码：

```
blender -P path/to/your/script.py 
```

作为子进程运行时，使用以下代码：

```
import subprocess
subprocess.run(['blender', '-b', '-P', 'path/to/your/script.py']) 
```

# postgresql - 如何创建返回多行的 PL/pgSQL 函数

> ID：10972644
> 
> 赞同：4
> 
> 时间：2012-06-10T21:54:46.810
> 
> 标签：postgresql, stored-procedures, plpgsql, return-type, postgresql-8.4

我正在尝试创建[一个 PL/pgSQL 函数](http://www.postgresql.org/docs/8.4/static/plpgsql.html)，它应该填充一个临时表，然后从中返回所有行（稍后将是一个连接），但我不知道要为其指定哪种返回类型：

```
create or replace function pref_daily_misere() returns void as $BODY$
        begin

        create temporary table temp_best (id varchar not null) on commit drop;
        insert into temp_best (id) select id from pref_money where
            yw = to_char(current_timestamp - interval '1 week', 'IYYY-IW')
            order by money desc limit 10;
        select id from temp_best;
        end;
$BODY$ language plpgsql; 
```

上面的陈述可以自己工作，但给我错误

```
# select pref_daily_misere();
ERROR:  query has no destination for result data
HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
CONTEXT:  PL/pgSQL function "pref_daily_misere" line 7 at SQL statement 
```

当我尝试在我的 PostgreSQL 8.4.11 数据库中调用它时。

这可能是因为我错误地指定了上面的**返回 void**，但我不知道要使用哪种返回类型，而省略返回类型是编译错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:29:22.697

您想使用`setof varchar`返回类型，然后`return query ...`在函数内部。来自[精美手册](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#AEN54103)：

> **39.6.1.2。返回下一个并返回查询**
> 
> ```
> RETURN NEXT expression;
> RETURN QUERY query;
> RETURN QUERY EXECUTE command-string [ USING expression [, ... ] ]; 
> ```
> 
> 当一个 PL/pgSQL 函数被声明为返回`SETOF` ***sometype***时，遵循的过程略有不同。在这种情况下，要返回的各个项目由一系列`RETURN NEXT`或`RETURN QUERY`命令指定，然后`RETURN`使用不带参数的最终命令来指示函数已完成执行。

我想你想要更像这样的东西：

```
create or replace function pref_daily_misere() returns setof varchar as $BODY$
begin
    create temporary table temp_best (id varchar not null) on commit drop;
    insert into temp_best (id)
    select id
    from pref_money
    where yw = to_char(current_timestamp - interval '1 week', 'IYYY-IW')
    order by money
    desc limit 10;
    return query select id from temp_best;
    return;
end;
$BODY$ language plpgsql; 
```

但是，临时表在这里毫无意义：

> **注意：**当前实现`RETURN NEXT`并`RETURN QUERY`在从函数返回之前存储整个结果集，如上所述。

所以 PostgreSQL 正在计算整个结果集并自己缓存它。你可以这样做：

```
create or replace function pref_daily_misere() returns setof varchar as $BODY$
begin
    return query
        select id
        from pref_money
        where yw = to_char(current_timestamp - interval '1 week', 'IYYY-IW')
        order by money
        desc limit 10;
    return;
end;
$BODY$ language plpgsql; 
```

我很确定临时表无论如何都会在你的函数结束时被删除，所以你应该摆脱它。

# azure - 获取 Azure 应用程序的验证码

> ID：10972648
> 
> 赞同：1
> 
> 时间：2012-06-10T21:55:30.977
> 
> 标签：azure, code-signing, whois, authenticode

我正在尝试为我们的在线申请获取验证码证书。我已经支付了证书的费用（通过 Comodo 的经销商 KSoftware）。他们坚持要求网站地址的 WHOIS 信息与公司名称/地址等相匹配。

这是问题所在，该应用程序托管在 Azure 中。当我查询我们网站地址的 WHOIS 记录时，它会返回 Microsoft 详细信息！

也许有人已经完成了对 Azure 应用程序进行签名的过程，或者知道我可以查看的任何好的参考资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:24:33.097

当您创建服务并将应用程序部署到 Windows Azure 时，它​​使用 DNS 名称运行，即 yourservicename.cloudapp.net。

但是，如果您有一个域名，即 yourdomainname.com，那么您肯定可以将您的域设置为您的用户来（或任何请求）的主要位置，然后所有请求将被重定向到 Windows Azure 站点 (*.cloudapp.网）。为此，您需要在 DNS 注册器中设置 CNAME 设置，以将所有请求从您的域发送到 Windows Azure 应用程序。@Smarx 在[这里解释了要遵循](http://blog.smarx.com/posts/custom-domain-names-in-windows-azure)的过程。

现在，当您使用 Authenticode 证书时，您的身份验证请求必须由您的原始域处理，yourdommainname.com 而不是您的 servicename.cloudapp.net。当您为您的站点 yourdomainname.com 设置 CNAME 后，您将获得正确的 WHOIS 信息，作为您的 domainname.com 注册商返回的信息，该信息将由 Authenticode 证书正确验证。

# c++ - 欧拉计划 11

> ID：10972654
> 
> 赞同：3
> 
> 时间：2012-06-10T21:56:37.037
> 
> 标签：c++

我正忙于 Project Euler，我正在尝试解决[问题 11](http://projecteuler.net/problem=11)，但答案似乎有问题。但我不明白为什么，代码似乎是正确的。

```
vector<vector<int> > grid;
    ifstream stream("/home/uauser/workspace/Project_euler/grid.txt");
    string line;
    char *tok;
    if (stream.is_open())
    {
        while(stream.good())
        {
            getline(stream, line);
            tok = strtok((char *)line.c_str(), " ");
            vector<int> row;
            while (tok != NULL)
            {
                int field;
                stringstream ss;
                ss << tok;
                ss >> field;
                row.push_back(field);

                tok = strtok(NULL, " ");
            }
            grid.push_back(row);
        }
        stream.close();
    }

    int product = 0;
    for(unsigned int i = 0; i < grid.size(); i++)
    {
        for(unsigned int j = 0; j < grid.at(i).size(); j++)
        {
            if( i < 17)
            {
                product = max(product, grid.at(i).at(j) * grid.at(i + 1).at(j) * grid.at(i + 2).at(j) * grid.at(i + 3).at(j));
            }
            if( j < 17)
            {
                product = max(product, grid.at(i).at(j) * grid.at(i).at(j+1)* grid.at(i).at(j+2) * grid.at(i).at(j + 3));
            }
            if((j < 17) && (i < 17) && (j >= 3) && (i >= 3))
            {
                product = max(product, grid.at(i).at(j) * grid.at(i-1).at(j+1) * grid.at(i-1).at(j+2) * grid.at(i -3).at(j+3));
                product = max(product, grid.at(i).at(j) * grid.at(i+1).at(j-1) * grid.at(i+1).at(j-2) * grid.at(i +3).at(j-3));
                product = max(product, grid.at(i).at(j) * grid.at(i+1).at(j+1) * grid.at(i+1).at(j+2) * grid.at(i + 3).at(j + 3));
                product = max(product, grid.at(i).at(j) * grid.at(i-1).at(j-1) * grid.at(i-1).at(j-2) * grid.at(i -3).at(j-3));
            }
            cout<<product<<endl;

        }
    }
    cout<<"The Product is: "<<product<<endl;
} 
```

播种代码读取的txt文件没有问题，但是当他需要找到最大值时只会得到错误的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:03:34.843

对角线的索引是错误的。例如：

```
... * grid.at(i-1).at(j+1) * grid.at(i-1).at(j+2) * grid.at(i -3).at(j+3)) 
```

中间部分应该有`i-2`而不是`i-1`。其他对角线的类似问题。

# events - CDI 事件继承

> ID：10972655
> 
> 赞同：1
> 
> 时间：2012-06-10T21:56:46.553
> 
> 标签：events, java-ee-6, cdi

有没有办法将类继承与 CDI 事件一起使用？

可以说我有这样的事情：

```
public class ParentEvent{}

public class ChildEvent extends ParentEvent{} 
```

和这样的：

```
public class Manager(){
    @Inject 
    private Event<ParrentEvent> event;

    public void foo(){
        event.fire(new ParentEvent());
    }

    public void bar(){
        event.fire(new ChildtEvent());
    }        
}

public class Observer{

      public void observesParent(@Observes ParentEvent event){
          //do something
      }

      public void observesChild(@Observes ChildEvent event){
          //do something
      }
} 
```

在这种情况下，ParentEvent 和 ChildEvent 都由 observesParent() 处理 - 由于 Manager 类中的事件属性类型。有没有办法用两种观察者方法观察 ChildEvent ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:36:25.020

CDI 的想法是将**限定符**与事件/观察者结合使用（而不是继承）。检查焊接文档中的[该章节](http://docs.jboss.org/weld/reference/latest/en-US/html/events.html)。所需的行为应该可以通过以下方式轻松实现：

```
public class Manager(){
    @Inject
    @Parent
    private Event<MyEvent> parentEvent;

    @Inject
    @Child
    private Event<MyEvent> childEvent; 

// ...

    public void foo(){
        event.fire(parentEvent);
    }

    public void bar(){
        event.fire(childEvent);
    }
}

public void observeChild(@Observes @Child MyEvent myEvent) { ... }
public void observeParent(@Observes @Parent MyEvent myEvent) { ... }
public void observeAll(@Observes MyEvent myEvent) { ... } 
```

这比使用继承要灵活得多……

# c# - 文件系统条目浏览器对话框 c#

> ID：10972657
> 
> 赞同：0
> 
> 时间：2012-06-10T21:57:08.503
> 
> 标签：c#, .net, winforms, forms, dialog

我正在使用 Windows.Forms 应用程序，我可以使用`OpenFileDialog`或从我的用户那里获取文件或目录`FolderBrowserDialog`。但我需要在一个独特的对话中得到两者。我尝试使用`OpenFileDialog`并`.multselect = true`选择文件和文件夹，但是在我访问`OpenFileDialog.FileNames`此属性的代码中，该属性只返回一个文件名，而不是一个选定的目录。

`System.IO.Directory`在调用`GetFileSystemEntries`中存在一个完全符合我要求的静态方法。但我需要一个对话框来做到这一点。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:53:19.833

```
private void button1_Click(object sender, EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                string[] files = openFileDialog1.FileNames;

                if (files != null && files.Length > 0)
                {
                    // returns the root directory
                    string folder = System.IO.Path.GetDirectoryName(files[0]);

                    // Obtain the file system entries in the directory path.
                    string[] directoryEntries =
                        System.IO.Directory.GetFileSystemEntries(folder); 
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:06:10.240

尝试 ：

```
string baseFolder = System.IO.Directory.GetParent(strToFile).ToString(); 
```

这将为您提供文件的文件夹名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:41:26.830

> 仅使用一个 dialog() 无法获取文件夹和文件。

*根据微软关于 c# 的文档，您必须使用不同的对话框来选择文件夹和文件*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T22:24:08.287

或使用 FileInfo！

```
FileInfo fi = new FileInfo(strToFile);
string fileFolder = fi.DirectoryName; 
```

# php - 有没有办法检查函数在调用时是否需要返回值

> ID：10972660
> 
> 赞同：1
> 
> 时间：2012-06-10T21:57:24.550
> 
> 标签：php

我想写一个条件，我想知道我的函数是否需要返回值，或者它可以作为过程执行。基本上它应该看起来像：

```
foo($x) {
    $x++;
    echo $x;
    if(is_return_needed()) {
        return $x;
    }
} 
```

其中 is_return_needed() 是需要返回值的条件。

以及它应该如何工作：

```
echo foo(50); // should print AND return 51
bar(foo(50)); // should print AND return 51 to bar() function
foo(50); // should only print the value, because the returned value will not be used 
```

请不要告诉我没有理由这样做。我知道我可以向函数发送一个额外的布尔参数，这将是条件，但有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:35:57.843

返回一个对象（或一个大字符串），PHP**不会**复制该对象/字符串。这意味着单独返回不会减慢您的申请速度。我找到了[一篇](http://porteightyeight.wordpress.com/2008/03/18/the-truth-about-php-variables/)解释得很好的文章。

如果函数可以完全避免构建这个大对象，它会变得更快。如果你在外面改变函数的结果，或者在返回之前改变它，它会变慢（那就必须做复制）。构建一个总是添加一小部分的长字符串非常昂贵，因为每次它都必须分配一个新的大内存块。

也就是说，我们必须查看您的代码才能了解您描述的减速。有时只返回结果是一个非常糟糕的建议，每个使用您的代码的开发人员都很难理解这种行为。如果您经常使用它，您的应用程序迟早会变得不稳定。[实际上，我发现返回混合类型的值](http://www.martinstoeckli.ch/php/php.html#mixedReturnType)甚至很危险，因为 PHP 经常这样做。

# django - 自定义 Django Admin：在父 Add_View 上添加多个默认内联

> ID：10972661
> 
> 赞同：3
> 
> 时间：2012-06-10T21:57:29.567
> 
> 标签：django, django-admin

我有一个管理模型，其中包含一些内联模型（完整类请参见下面的**ResourceUserAdmin**模型）：

```
 inlines = [ 
            ResourceLocationInlineAdmin ,
            ResourceCategoryInlineAdmin , 
            ResourceStageInlineAdmin ,
          ] 
```

当用户单击以创建新的**ResourceUserAdmin时，我希望****ResourceCategoryInlineAdmin** 类的内联获取初始值——请注意，这些关系不会保存到数据库中。我试图覆盖**add_view**函数的部分以获得我想要的，但我不知道如何将多个内联表单传递回父级。

关于如何实现这一目标的任何想法？

**楷模**

```
class ResourceUserAdmin( admin.ModelAdmin ):
    inlines = [ 
            ResourceLocationInlineAdmin ,
            ResourceCategoryInlineAdmin , 
            ResourceStageInlineAdmin ,
          ]

    list_display = ( 
                 'user' , 
                 'name' ,
                 'state' ,
                 'email' ,
                 'website' ,
                 'phone' ,
                 'logo_url_link',
    )

    search_fields = ( 'name' , 'email' , 'website'  )

    list_filter = ( 'name' , 'state' , 'email' , 'website' )

    ordering = ( 'name', )

     fields = ( 
             'user' , 
             'name' ,
             'state' ,
             'email' ,
             'website' ,
             'phone' ,
             'logo' ,
             'ideal_candidate',
    )
admin.site.register( ResourceUser, ResourceUserAdmin ) 
```

这是我想默认创建的内联模型：

```
class ResourceCategoryInlineAdmin( admin.StackedInline ):
    model = ResourceCategory
    extra = 0

class ResourceCategoryAdmin( admin.ModelAdmin ):
    list_display = ( 'user' ,
                     'category' , )

    ordering = ( 'user' , )
    fields = ( 'user' , 'category' )

    def formfield_for_foreignkey( self, db_field, *args, **kwargs ):
        if isinstance( db_field, models.ForeignKey ):
            if db_field.name == 'category':
                kwargs['widget'] = forms.RadioSelect()
        return super( ResourceCategoryAdmin, self).formfield_for_foreignkey( db_field, **kwargs )

admin.site.register( ResourceCategory, ResourceCategoryAdmin ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:40:43.383

这是一种解决方案，虽然不是我真正想要使用的选项。您可以通过覆盖整个**add_view**函数并为表单集中的每个表单设置初始属性来做到这一点（查找下面的覆盖注释）

```
def add_view(self, request, form_url='', extra_context=None):
    "The 'add' admin view for this model."
    model = self.model
    opts = model._meta

    if not self.has_add_permission(request):
        raise PermissionDenied

    ModelForm = self.get_form(request)
    formsets = []
    if request.method == 'POST':
        form = ModelForm(request.POST, request.FILES)
        if form.is_valid():
            new_object = self.save_form(request, form, change=False)
            form_validated = True
        else:
            form_validated = False
            new_object = self.model()
        prefixes = {}
        for FormSet, inline in zip(self.get_formsets(request), self.inline_instances):
            prefix = FormSet.get_default_prefix()
            prefixes[prefix] = prefixes.get(prefix, 0) + 1
            if prefixes[prefix] != 1:
                prefix = "%s-%s" % (prefix, prefixes[prefix])
            formset = FormSet(data=request.POST, files=request.FILES,
                              instance=new_object,
                              save_as_new="_saveasnew" in request.POST,
                              prefix=prefix, queryset=inline.queryset(request))
            formsets.append(formset)
        if all_valid(formsets) and form_validated:
            self.save_model(request, new_object, form, change=False)
            form.save_m2m()
            for formset in formsets:
                self.save_formset(request, form, formset, change=False)

            self.log_addition(request, new_object)
            return self.response_add(request, new_object)
    else:
        # Prepare the dict of initial data from the request.
        # We have to special-case M2Ms as a list of comma-separated PKs.
        initial = dict(request.GET.items())
        for k in initial:
            logger.info( "for k in initial, k = %s" % k )
            try:
                f = opts.get_field(k)
            except models.FieldDoesNotExist:
                continue
            if isinstance(f, models.ManyToManyField):
                initial[k] = initial[k].split(",")
        form = ModelForm(initial=initial)
        prefixes = {}
        for FormSet, inline in zip(self.get_formsets(request),
                                   self.inline_instances):
            prefix = FormSet.get_default_prefix()
            prefixes[prefix] = prefixes.get(prefix, 0) + 1
            if prefixes[prefix] != 1:
                prefix = "%s-%s" % (prefix, prefixes[prefix])

            formset = FormSet(instance=self.model(), prefix=prefix, queryset=inline.queryset(request))

            #
            #
            # override the inlines of my choice
            # to create initial values
            #
            #
            if inline.__class__.__name__ == 'ResourceCategoryInlineAdmin':
                for frm, category in zip( formset, Category.objects.all() ):
                   frm.fields['category'].initial = category

            formsets.append(formset)

    adminForm = helpers.AdminForm(form, list(self.get_fieldsets(request)),
        self.prepopulated_fields, self.get_readonly_fields(request),
        model_admin=self)
    media = self.media + adminForm.media

    inline_admin_formsets = []
    for inline, formset in zip(self.inline_instances, formsets):
        fieldsets = list(inline.get_fieldsets(request))
        readonly = list(inline.get_readonly_fields(request))
        inline_admin_formset = helpers.InlineAdminFormSet(inline, formset,
            fieldsets, readonly, model_admin=self)
        inline_admin_formsets.append(inline_admin_formset)
        media = media + inline_admin_formset.media

    context = {
        'title': _('Add %s') % force_unicode(opts.verbose_name),
        'adminform': adminForm,
        'is_popup': "_popup" in request.REQUEST,
        'show_delete': False,
        'media': mark_safe(media),
        'inline_admin_formsets': inline_admin_formsets,
        'errors': helpers.AdminErrorList(form, formsets),
        'root_path': self.admin_site.root_path,
        'app_label': opts.app_label,
    }
    context.update(extra_context or {})
    return self.render_change_form(request, context, form_url=form_url, add=True)
    #return super(ResourceUserAdmin, self).add_view(request, form_url=form_url, extra_context=extra_context) 
```

# c++ - c ++更改函数的变量参数

> ID：10972662
> 
> 赞同：3
> 
> 时间：2012-06-10T21:57:41.193
> 
> 标签：c++, function, variables, arguments

我想更改作为参数传递给此函数的变量：

```
bool verifyStudent(string id, string name, int grade, int points, string type) {
if(!verifyId(id)){
    cerr << "Please enter 8 charactes id! format: YYMMDDCC\n";
    cin >> id;
    return false;
} else
if(!verifyName(name)){
    cerr << "Please enter name to 35 characters!\n";
    cin >> name;
    return false;
} else
if(!verifyGrade(grade)){
    cerr << "Please enter class between 8 and 12!\n";
    cin >> grade;
    return false;
} else
if(!verifyPoints(points)){
    cerr << "Please enter points between 0 and 300!\n";
    cin >> points;
    return false;
} else
if(!verifyType(type)){
    cerr << "Please enter 1 charater type! format: R,r - regional, D,d - district, N,n - national, I,i - international\n";
    cin >> type;
    return false;
} else {
    return true;
} 
```

}

我应该如何访问给定的变量并在其他函数未验证时对其进行更改？

这是我调用函数的方式：

```
verifyStudent(iId, iName, iGrade, iPoints, iType); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T21:59:29.290

为了更改参数，您必须*参考*：

```
bool verifyStudent(string& id, string& name, int& grade, int& points, string& type) 
```

尽管我会说该功能的*verifyStudent*不如*verifyAndCorrectStudentIfNeeded*多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:03:21.097

引用：

> 因此，C++ 有两种参数传递机制，按值调用（如在 Java 中）和按引用调用。当一个参数通过引用传递时，该函数可以修改原来的。引用调用由参数类型后面的 & 表示。
> 
> 这是一个利用引用调用的典型函数 [...]
> 
> 无效交换（int＆a，int＆b）{ [...] }

[更多在这里-> A3.5。功能](http://horstmann.com/ccj2/ccjapp3.html)

# php - SQL 无限日历模式

> ID：10972669
> 
> 赞同：33
> 
> 时间：2012-06-10T21:58:47.863
> 
> 标签：php, mysql, codeigniter, calendar

我将创建一个基于 Mysql 的日历系统，您可以在其中拥有重复模式，让我们说每个星期一永远永远。它还必须涵盖静态/一次性事件。我想知道的是，哪种解决方案对我来说最合乎逻辑（也是最好的）。我有四种方法我想在其中选择。

## 方法#1

创建一个接受参数`from`和`to`. 该函数将创建一个临时表表，该表通过`INSERT ... SELECT`. 之后它将读取模式表并通过基于`from`和的周期填充临时表`to`。

从查询将更容易获取数据的角度来看，此解决方案似乎不错，并且它可以无限工作，因为您可以根据加载的月份重新填充表。我很好奇的是，无论何时这可能是一种滞后的方式。

## 方法#2

`JOIN`通过子查询和静态日历创建和加入给定的模式。

这似乎很烦人，因为查询会更大，而且可能根本不好（？）。

## 方法#3

基本上只是`INSERT`让我们提前一年说的模式。然后我想一个 cron 工作会重新填充以使其始终提前一年。

这是一种简单的方法，但感觉就像存储了很多不需要的数据，它并没有真正提供我所追求的无限。

## 方法#4（由 Veger 建议）

如果我理解正确，此方法将从另一个查询中获取模式并在执行时创建事件。这与我对方法 #1 的想法类似，我认为创建多行的简单模式。

但是，如果这将在 Mysql 之外实现，我将失去一些我所追求的数据库功能。

* * *

我希望你们能理解我的情况，如果你能给出建议并争论为什么它是最好的，或者给出另一种解决方案。

就我个人而言，我最喜欢方法#1，但我很好奇每次调用都重新填充日历表是否滞后。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T10:20:55.893

我以前做过这种日历。我发现最好的方法是按照计划 crons 的方式来处理它。因此，在数据库中，为分钟、小时、月中的日、月和周中的日创建一个字段。

对于 6 月和 8 月的每个星期五晚上 10:00 举行的活动，您的条目如下所示

```
Minute  Hour  DayOfMonth  Month  DayOfWeek
 0       22     *          6,8       5 
```

然后，您可以有一个字段将其标记为一次性事件，该事件将忽略此信息并仅使用开始日期和持续时间。对于最终重复结束的事件（比如每个周末 3 个月），您只需要添加一个结束日期字段。

这将允许您轻松选择它并减少需要存储的数据量。它也简化了您的查询。

我认为不需要创建临时表。要重新选择相关事件，您可以通过日历视图选择它们。如果您的日历视图按月显示，您的选择将类似于：

```
SELECT Events.* 
FROM Events 
WHERE (Month LIKE '%,'.$current_month.',%' OR Month = '*') 
    AND DATE(StartDate) >= "'.date('Y-m-d', $firstDayOfCurrentMonth).'" 
    AND DATE(EndDate) <= "'.date('Y-m-d', $lastDayOfCurrentMonth).'" 
```

显然，这应该在准备好的声明中。它还假设您在逗号分隔的月份列表中的第一个和最后一个值之前和之后都有一个逗号（即。`,2,4,6,`）。`Month`如果您愿意，您还可以在两者之间创建一个表和一个连接表。其余的可以在渲染日历时由 php 解析出来。

如果您显示日历的每周视图，您可以通过以下方式选择：

```
SELECT Events.* 
FROM Events 
WHERE (DayOfMonth IN ('.implode(',', $days_this_week).','*') 
    AND (Month LIKE '%,'.$current_month.',%' OR Month = '*')) 
    AND DATE(StartDate) >= "'.date('Y-m-d', $firstDayOfCurrentMonth).'" 
    AND DATE(EndDate) <= "'.date('Y-m-d', $lastDayOfCurrentMonth).'" 
```

我还没有测试过这些查询，所以可能有一些混乱的括号或其他东西。但这将是一般的想法。

因此，您可以为正在显示的每一天运行一个选择，也可以为视图选择所有内容（月、周等）并循环遍历每一天的事件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-10T22:32:25.090

I like Veger's solution best .. instead of populating multiple rows you can just populate the pattern. I suggest the `crontab` format .. it works so well anyway.

You can query all patterns for a given customer when they load the calendar and fill in events based on the pattern. Unless you have like thousands of patterns for a single user this should not be all that slow. It should also be faster than storing a large number of row events for long periods. You will have to select all patterns at once and do some preprocessing but once again, how many patterns do you expect per user? Even 1000 or so should be pretty fast.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T06:56:38.597

自从我还在 GW Basic 中编程时，我就有了这个想法；-) 不过，当时我选择了选项 #3，就是这样。回顾一下，以及其他一些回应，这将是我目前的解决方案。

**表结构**

```
start (datetime)
stop (datetime, nullable)
interval_unit ([hour, day, week, month, year?])
interval_every (1 = every <unit>, 2 every two <units>, etc.)
type ([positive (default), negative]) - will explain later 
```

可选字段：

```
title
duration 
```

该`type`字段确定如何处理事件：

1.  积极的; 正常治疗，它显示在日历中
2.  消极的; 这个事件取消了另一个（例如每周一但不是在 14 日）

**辅助查询**

此查询将缩小要显示的事件范围：

```
SELECT * FROM `events`
WHERE `start` >= :start AND (`stop` IS NULL OR `stop` < :stop) 
```

假设您仅按日期查询范围（没有时间组件），则 的值`:stop`应该比您的范围提前一天。

现在对于您希望处理的各种事件。

**单一事件**

```
start = '2012-06-15 09:00:00'
stop = '2012-06-15 09:00:00'
type = 'positive' 
```

*事件于 2012 年 6 月 15 日上午 9 点发生一次*

**有界重复事件**

```
start = '2012-06-15 05:00:00'
interval_unit = 'day'
interval_every = 1
stop = '2012-06-22 05:00:00'
type = 'positive' 
```

*从 2012 年 6 月 15 日开始，每天早上 5 点发生事件；最后一个活动是22日*

**无限重复事件**

```
start = '2012-06-15 13:00:00'
interval_unit = 'week'
interval_every = 2
stop = null
type = 'positive' 
```

*从 2012 年 6 月 15 日开始，每两周下午 1 点举行一次活动*

**重复事件有例外**

```
start = '2012-06-15 16:00:00'
interval_unit = 'week'
interval_every = 1
type = 'positive'
stop = null

start = '2012-06-22 16:00:00'
type = 'negative'
stop = '2012-06-22 16:00:00' 
```

*从 2012 年 6 月 22 日开始，每周都会在下午 4 点举行活动；但不是 22 日*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T19:59:43.077

最佳解决方案取决于您是希望支持标准合规性 (RFC5545) 还是仅在 MySQL 中工作。

取决于您的重复规则引擎需要的灵活性。如果您想要简单的规则（每月 1 日或每年 1 月，...），那么上面提供的解决方案已经详细说明。

但是，如果您希望您的应用程序提供与现有标准 (RFC5545) 的兼容性，这涉及更复杂的规则，您应该[在构建日历应用程序时查看此 SO 帖子，我应该在我的数据库中存储日期或重复规则吗？](https://stackoverflow.com/questions/4239871/when-building-a-calendar-app-should-i-store-dates-or-recurrence-rules-in-my-dat/10163834#10163834)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T00:11:42.877

我实际上正在寻找与此类似的东西，到目前为止我的解决方案（在纸上我还没有开始构造或编码）存储在 2 个表中：

1.  “事件”将获得第一次出现的日期、标题和描述（加上自动增量 ID）。

2.  “events_recursion”表将交叉引用前一个表（例如带有 event_id 字段），并且可以以两种可能的方式工作：

    2.A：按日期存储所有事件（即每次出现一个条目，因此如果您想保存“本月的每个星期五”则为 4 或“2012 年每个月的第一天”为 12）

    2.B：或从一个字段中第一个事件的日期+另一个字段中最后一次发生（或递归结束）的日期开始保存间隔（我会以秒为单位保存），例如

ID：2 EVENT_ID：1 INTERVAL：604800（如果我没记错的话是一周）END：1356912000（应该是今年年底）

然后，当您打开显示时间表的 php 时，它会检查该月内仍然处于活动状态的事件，并在两个表之间进行连接。

我会使用 2 个交叉引用的表而不是将所有表保存在一个表中的原因只是因为我的项目会看到非常疯狂的事件，例如“每个星期五和每个月的第三个星期一”（在这种情况下是事件表中有 1 个条目，第二个表中有 2 个具有相同的“event_id”字段。顺便说一句，我的项目是为音乐教师准备的，他们在严格的时间表上进行了一些小工作，一次决定 3 或 6 个月，真是一团糟）。

但正如我所说，我还没有开始，所以我期待看到你的解决方案。

PS：请原谅（并忘记）我的英语，首先不是我的语言，其次是深夜，我困了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T13:56:50.427

[也许从MySQL Events](http://www.sitepoint.com/how-to-create-mysql-events/)中查看一些很棒的想法

还有更多：
[http ://phpmaster.com/working-with-mysql-events/?utm_source=rss&utm_medium=rss&utm_campaign=phpmaster-working-with-mysql-events](http://phpmaster.com/working-with-mysql-events/?utm_source=rss&utm_medium=rss&utm_campaign=phpmaster-working-with-mysql-events)

[http://dev.mysql.com/doc/refman/5.5/en/create-event.html](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T12:56:53.757

我建议围绕这一行提出一些建议：将您的事件表拆分为 2，因为显然有 2 种不同类型的重复事件和静态事件，并且根据类型，它们将具有不同的属性。

然后对于给定的事件查找，您将运行 2 个查询，针对每个事件类型一个。对于静态事件表，您肯定需要（至少）一个日期时间字段，因此对给定月份的查找只需在条件中使用该字段（其中 event_date > FirstDayOfTheMonth 和 event_date < LastDayOfTheMonth ）。每周/每年视图的逻辑相同。

该结果集将与重复事件表中的第二个结果集相结合。可能的属性可能类似于 crontab 条目，使用星期几/每月几日作为 2 个主要变量。如果您正在查看月度视图，

```
select * from recurring_events where DayOfWeek in (1,2,3,4,5,6,7) or (DayOfMonth > 0 and DayOfMonth < @NumberOfDaysInThisMonth ) 
```

如果是每周/每年的视图，则再次类似。为了使接口更简单，使用存储过程和所有逻辑来确定“在日期 A 和日期 B 之间找到*一周中的哪几天”。*

拥有两个结果集后，您可以在客户端将它们聚合在一起，然后一起显示。这样做的好处是不需要“模拟/空记录”，也不需要预先填充的异步 cronjobs，查询很容易在运行中发生，如果性能*确实*下降，添加一个缓存层，特别是对于这样的系统自然缓存非常有意义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T11:35:34.483

我会按照我在这里解释的那样做。它将创建一个无限的压延机：

[PHP/MySQL：对数据库中的重复事件进行建模，但查询日期范围](https://stackoverflow.com/questions/13802146/php-mysql-model-repeating-events-in-a-database-but-query-for-date-ranges/13802789#13802789)

缺点是查询的时候会有一些计算。如果您需要一个高性能的网站，预加载数据将是您的最佳选择。您甚至不必预先加载日历中的所有事件，以便轻松更改单个事件中的值。但是从现在到......存储所有日期是明智的。

现在使用缓存值确实可以减少无限，但会提高速度。

遮阳篷的副本以方便访问：

我将创建一个只调用一个 col 的计数表，`id`并用 0 到 500 的数字填充该表。现在我们可以轻松地使用它来进行选择，而不是使用 while 循环。

```
Id
-------------------------------------
0
1
2
etc... 
```

然后我将事件存储在一个表中`Name as varchar`，`startdate as datetime`并且`repeats as int`

```
Name    | StartDate            |   Repeats
-------------------------------------
Meeting | 2012-12-10 00:00:00  |   7
Lunch   | 2012-12-10 00:00:00  |   1 
```

现在我们可以使用计数表来选择两个日期之间的所有日期：

```
SELECT DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY) as showdate
FROM `tally`
WHERE (DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY)<='2012-12-20 00:00:00')
ORDER BY Id ASC

ShowDate
-------------------------------------
2012-12-09 00:00:00
2012-12-10 00:00:00
2012-12-11 00:00:00
2012-12-12 00:00:00
2012-12-13 00:00:00
2012-12-14 00:00:00
2012-12-15 00:00:00
2012-12-16 00:00:00
2012-12-17 00:00:00
2012-12-18 00:00:00
2012-12-19 00:00:00
2012-12-20 00:00:00 
```

然后我们在事件表上加入它来计算开始日期和显示日期之间的差异。我们将结果除以`repeats`列，如果余数为`0`，则匹配。

所有组合变成：

```
SELECT E.Id, E.Name, E.StartDate, E.Repeats, A.ShowDate, DATEDIFF(E.StartDate, A.ShowDate) AS diff
FROM events AS E, (
    SELECT DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY) as showdate
    FROM `tally`
    WHERE (DATE_ADD('2012-12-09 00:00:00',INTERVAL Id DAY)<='2012-12-20 00:00:00')
    ORDER BY Id ASC
) a
WHERE MOD(DATEDIFF(E.StartDate, A.ShowDate), E.Repeats)=0
AND A.ShowDate>=E.StartDate 
```

这导致

```
Id  | Name       |StartDate             | Repeats   | ShowDate              | diff
---------------------------------------------------------------------------------
1   | Meeting    | 2012-12-10 00:00:00  | 7         | 2012-12-10 00:00:00   | 0
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-10 00:00:00   | 0
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-11 00:00:00   | -1
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-12 00:00:00   | -2
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-13 00:00:00   | -3
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-14 00:00:00   | -4
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-15 00:00:00   | -5
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-16 00:00:00   | -6
1   | Meeting    | 2012-12-10 00:00:00  | 7         | 2012-12-17 00:00:00   | -7
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-17 00:00:00   | -7
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-18 00:00:00   | -8
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-19 00:00:00   | -9
2   | Lunch      | 2012-12-10 00:00:00  | 1         | 2012-12-20 00:00:00   | -10 
```

现在你可以（而且应该！）加快速度。例如，通过直接将日期存储在表中，您可以直接选择所有日期，而不是使用带有 dateadd 的计数表。您可以缓存并且不必再次计算的每一件事都是好的。

# sql-server - SQL Server 2008 - 由于“与 FK 约束冲突”而无法插入

> ID：10972674
> 
> 赞同：1
> 
> 时间：2012-06-10T22:00:04.353
> 
> 标签：sql-server, foreign-keys, conflict, insert-into

我的查询如下：

```
insert into Orders
values
('20012', /*order num, pk*/
'6-10-2012', /*date, i wrote it in a different format, is that okay ?*/
'1000000012'/*customer id, fk*/
) 
```

错误：

```
The INSERT statement conflicted with the FOREIGN KEY constraint  
"FK_Orders_Customers".   
The conflict occurred in database "MyDB", table "dbo.Customers", column 'cust_id'.
The statement has been terminated. 
```

为什么我会收到此错误？我怎样才能在这个表中插入一些虚拟值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:03:50.143

您收到错误是因为“cust_id”列中的“客户”表中没有客户 ID 为 1000000012 的记录。首先将该记录插入“客户”表中，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:02:15.437

从错误消息中，听起来您的客户表中没有 ID 为“1000000012”的客户记录

# android - 安装任何新应用程序后切换小部件停止工作

> ID：10972677
> 
> 赞同：1
> 
> 时间：2012-06-10T22:00:10.670
> 
> 标签：android, android-widget

我正在设计一个切换小部件，用于静音和取消静音媒体音量。在我安装任何新应用程序之前它工作得很好......然后它就停止工作了。没有强制关闭或任何东西，当我按下它时它什么也不做。（如果我删除小部件并再次添加它，它将再次开始工作。）使用 log cat 我看不到任何与我的应用程序相关的消息。

我在下面发布了代码，但是如果您能从概念上告诉我，当我安装新应用程序时主屏幕会发生什么，以及基本上我可以在哪里进行故障排除，那也会有所帮助。

谢谢你的帮助。我已经在这几天了，只是想不通。我有现货 android 4.04 Galaxy Nexus。

```
public class JCrashWidget extends AppWidgetProvider {
public static String ACTION_WIDGET_RECEIVER = "com.JCrash.widget.ACTION_WIDGET_RECEIVER";
public static String ACTION_WIDGET_CONFIGURE = "com.JCrash.widget.ACTION_WIDGET_CONFIGURE";
private RemoteViews remoteViews = new RemoteViews("com.JCrash", R.layout.widgetstyle1 );

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){
    super.onUpdate(context, appWidgetManager, appWidgetIds);    

    Intent mediaClick = new Intent(context, JCrashWidget.class);
    mediaClick.setAction(ACTION_WIDGET_RECEIVER);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,  0, mediaClick, 0);       
    remoteViews.setOnClickPendingIntent(R.id.headphonesid, pendingIntent);

    appWidgetManager.updateAppWidget(appWidgetIds,remoteViews );
}

public void onReceive(Context context, Intent intent)
{
    super.onReceive(context, intent);

    AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
    ComponentName cn = new ComponentName(context, JCrashWidget.class);

    int cVol = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    SharedPreferences myPrefs = context.getSharedPreferences("myPrefs", Context.MODE_WORLD_WRITEABLE);
    SharedPreferences.Editor prefsEditor = myPrefs.edit();

        if (intent.getAction().equals(ACTION_WIDGET_RECEIVER)) {
            if (cVol == 0)
            {
                cVol = myPrefs.getInt("PREVIOUS_VOLUME", 0);
                    remoteViews.setImageViewResource(R.id.headphonesid,R.drawable.headphones);
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, cVol,
                    AudioManager.FLAG_SHOW_UI);
                    cVol = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
            }

            else 
            {
                prefsEditor.putInt("PREVIOUS_VOLUME", cVol);
                prefsEditor.commit();
                cVol = myPrefs.getInt("PREVIOUS_VOLUME", 0);

                remoteViews.setImageViewResource(R.id.headphonesid,R.drawable.headphones_off);
                audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, AudioManager.FLAG_SHOW_UI);

                cVol = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
            }
            AppWidgetManager.getInstance(context).updateAppWidget(cn, remoteViews);             
        }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:51:18.880

弄清楚了！我不得不在 OnReceive 方法和 OnUpdate 方法中再次设置 OnClickPendingIntent。我将创建一个函数来设置小部件的待处理意图，并从 OnReceive 和 OnUpdate 中调用它。

# asp.net - RequireJS 多页——使用优化器

> ID：10972678
> 
> 赞同：4
> 
> 时间：2012-06-10T22:00:10.940
> 
> 标签：asp.net, requirejs

我的 JavaScript 组织如下所述：[https](https://stackoverflow.com/a/10816983/83897) ://stackoverflow.com/a/10816983/83897 。

我有一个重 JavaScript 的 ASP.NET 应用程序，它有多个不同的页面（而不是单页应用程序）。每个页面都有不同的依赖关系，所以我有一个每页的 .js 文件（page1.js、page2.js 等）。每个都有一个 require() 调用，声明其依赖项：

```
require(['jquery', 'page1Module'], function($, module){
    // page1 specific stuff here
}); 
```

这工作正常。**我想知道的是**，RequireJS 构建过程如何工作？我想我想要一个每页的“构建”.js 文件（例如 page1-build.js、page2-build.js 等）？有没有我可以利用的现有软件？

该过程可能如下所示：

1.  将给定脚本的所有依赖项编译到临时目录中的一个 build.js 文件中。
2.  计算编译文件的 MD5 指纹。
3.  将该指纹与公共/资产中的可比较文件进行比较。
4.  创建一个内存中的 RequireJS 清单，将每个模块映射到已编译的文件。将此清单附加到已编译的文件中。
5.  不知何故让生产使用构建文件。

**编辑：**经过一番思考，我认为使用 node + r.js 的 RequireJS 优化将只是更大资产构建过程的一部分，其中资产构建依赖于其他一些第三方库。RequireJS 优化将仅用于某些 JavaScript 依赖项（即每个页面的 JavaScript 文件，包括找到的依赖项），可能在某些 XML 配置中指定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:23:09.697

您可以通过在构建配置文件中指定模块来创建多个优化文件：

```
{
   modules: [
     {
         name: "main"
     },
     {
        name: "page1",
        include: ["dep1", "shim2"],
        exclude: ["main"]
     }]
} 
```

每个条目将生成一个优化`.js`文件。

更多信息：[如何在多页项目中使用 RequireJS 构建配置文件 + r.js](https://stackoverflow.com/questions/11674824/how-to-use-requirejs-build-profile-r-js-in-a-mult-page-project/11730147#11730147)

# php - 使用 PHP 选择特定的信息

> ID：10972680
> 
> 赞同：0
> 
> 时间：2012-06-10T22:00:24.570
> 
> 标签：php, wordpress, image

我正在寻找使用 Wordpress 博客创建投资组合。在“博客文章”的摘要页面上，我希望有图像的缩略图，然后很明显，当您单击它们时，它们将转到该项目的完整列表。

我想我可以限制摘要页面上的帖子，只是为了显示描述中的一张图片。

我的想法如下：

```
Post name: Project

Description: <img class="thumbnail-image" /> <img /> <img /> <img /> <p></p> 
```

在摘要页面上，我希望循环仅在每个帖子中定位并显示具有“缩略图图像”类的图像，然后在单个帖子页面中，我将使用 CSS 隐藏缩略图图像。

我想知道的是php中是否有一种从描述中检测第一个图像元素并从描述中提取它以便我可以在摘要页面上显示它的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:12:34.903

最后我想通了：

```
$thumbnail = explode("<br/>", $post->post_content);
echo $thumbnail[0]; 
```

在我对 PHP 的有限了解（过去几天学到的）中，似乎`the_content()`更多地用于发布帖子内容的价值，并且`the_content()`代码中的任何提及都会发布其中包含的内容。要进一步定位和使用价值，您必须更具体，即`$post->post_content`（定位帖子的帖子内容）。

# c++ - 当像静态变量一样访问时，类的非静态成员的地址将地址打印为 1

> ID：10972686
> 
> 赞同：1
> 
> 时间：2012-06-10T22:01:25.247
> 
> 标签：c++, pointers, static-members

我在某个地方看到了一些代码和定义，比如

```
 class A {
       public:
              int a,b;
 };

 main() {
        A a;
        std::cout<<"Test output "<<&A::a<<" "<<&A::b<<std::endl;
 }

 Output
       1 1 
```

我不明白的是a和b不是A的静态成员，但是当它们像静态成员一样访问时会出错，但是当像静态成员一样访问它的地址时会打印1。它背后是否有特殊含义，因为我不知道为什么需要它以及为什么它会以这种方式工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:03:40.787

`&A::a`当`a`是一个*非静态成员*时，表达式返回一个*指向成员对象*的指针（如果是一个函数，则返回一个指向*成员函数的指针*`a`）。可以像这样使用它们：

```
A a;
a.a = 1;
a.b = 2;

int (A::*) some_int_member_of_a = &A::a;
std::cout << a.*some_int_member_of_a; // prints 1

a.*some_int_member_of_a = 5;
std::cout << a.*some_int_member_of_a; // now prints 5 
```

*没有为指向成员*值的指针定义流输出操作，但是从它们进行了转换，`bool`这就是在输出中打印的内容。

# android - 线程“LWJGL 应用程序”中的 libGDX 异常

> ID：10972688
> 
> 赞同：4
> 
> 时间：2012-06-10T22:01:44.467
> 
> 标签：android, libgdx

我一直在关注位于以下位置的设置教程：[libGDX setup tutorial](http://code.google.com/p/libgdx/wiki/ProjectSetupNew)。我不确定这里发生了什么。我终于可以在模拟器中部署该项目，但是，桌面版本不太好用。我已经获取了 gdx-backend-jogl.jar 和本机 jogl 的副本，但它似乎仍然给出了相同的错误。

我已经查看了以下线程，并认为我可以将 jogl jar 文件从 libgdx nightly latest 文件夹复制到 my-gdx-game-desktop 项目中的 libs 文件夹中---但这不起作用：[错误使用 LibGdx/Eclipse 在桌面上启动 Java 应用程序时](https://stackoverflow.com/questions/6091078/error-when-launching-java-app-on-desktop-using-libgdx-eclipse)

有没有人对我如何解决这个问题有任何想法？

***控制台转储***

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: OpenGL is not supported by the video driver.
        at com.badlogic.gdx.backends.lwjgl.LwjglGraphics.createDisplayPixelFormat(LwjglGraphics.java:198)
        at com.badlogic.gdx.backends.lwjgl.LwjglGraphics.setupDisplay(LwjglGraphics.java:160)
        at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:139)
        at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)
    Caused by: org.lwjgl.LWJGLException: Pixel format not accelerated
        at org.lwjgl.opengl.WindowsPeerInfo.nChoosePixelFormat(Native Method)
        at org.lwjgl.opengl.WindowsPeerInfo.choosePixelFormat(WindowsPeerInfo.java:52)
        at org.lwjgl.opengl.WindowsDisplay.createWindow(WindowsDisplay.java:214)
        at org.lwjgl.opengl.Display.createWindow(Display.java:306)
        at org.lwjgl.opengl.Display.create(Display.java:873)
        at org.lwjgl.opengl.Display.create(Display.java:782)
        at com.badlogic.gdx.backends.lwjgl.LwjglGraphics.createDisplayPixelFormat(LwjglGraphics.java:186)
        ... 3 more
    AL lib: ReleaseALC: 1 device not closed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:11:17.947

您缺少支持 OpenGL 的卡。Libgdx 在桌面上至少需要 OpenGL 1.5（对于 OpenGL ES 1.x 仿真，对于 OpenGL ES 2.0 仿真需要 2.1）。

安装最新的驱动程序，或者如果您的卡不支持 OpenGL，请换一张新卡。使用 10 年的显卡支持 OpenGL 1.5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-02T08:09:46.437

把这段代码

```
System.setProperty("org.lwjgl.opengl.Display.allowSoftwareOpenGL", "true"); 
```

这将解决你的问题..

# c# - 如何在 C#/Visual Studio 中包含源代码而不是库？

> ID：10972698
> 
> 赞同：5
> 
> 时间：2012-06-10T22:03:29.083
> 
> 标签：c#, json, windows-phone-7, json.net

我有很长的 Java 背景，对 C# 很陌生。我试图从 Windows phone 运行其中一个[入门工具包应用程序](http://code.msdn.microsoft.com/Windows-Phone-Starter-Kit-79e45e30#content)，但我收到了这个错误。

```
A first chance exception of type 'Newtonsoft.Json.JsonReaderException' occurred in Newtonsoft.Json.WindowsPhone.dll 
```

我发现很难调试它，因为我直接引用引用下指向 Newtonsoft.Json.WindowsPhone 的 dll 文件。在 Java 中，我会[搜索](http://json.codeplex.com/releases/view/89222)库并下载源代码以在调试期间进入确切位置。

如果可能的话，我将如何在 C# 中执行此操作（如我如何引用我的项目的库源以在运行时获取）？我使用 Visual Studio 2010 Express Edition 作为 IDE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T22:21:54.610

1.  下载您正在处理的第三方库
2.  将此库的项目添加到您的解决方案中
3.  在您的项目中，删除对 3rd 方库的引用
4.  将项目依赖项添加到您的项目中，使其依赖于您刚刚添加到解决方案中的 3rd 方库项目
5.  编译运行，愉快调试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:07:28.630

我最好的猜测是您应该下载[Json.NET](http://json.codeplex.com/)的最新版本，从项目的引用中删除已编译的库并添加对源代码项目的引用。（添加参考... > 项目 > 浏览...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T22:19:21.353

在调试器中停止程序后，您可以使用[模块窗口](http://msdn.microsoft.com/en-us/library/4c8f14c9.aspx)为 Json.NET 加载符号。显然，您的机器上需要有这些符号，以便您可以浏览它们。

如果做不到这一点，您可以切换到项目参考，并按照 Dan 的建议将 Json.NET 包含在您的解决方案中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T22:18:58.967

最简单的方法是下载他们的最新版本，然后在 Visual Studio 中右键单击您的解决方案并在添加菜单下选择现有项目指向库的项目文件，然后单击打开按钮。之后，您将能够在任何您想要的地方设置刹车点。

# css - CSS 通用兄弟不能与 :focus 一起使用？

> ID：10972704
> 
> 赞同：0
> 
> 时间：2012-06-10T22:03:53.970
> 
> 标签：css, focus

我想显示文本，当用户悬停此文本时，他应该看到一个输入表单而不是文本。当它被取消悬停时，它再次被文本替换。但是如果用户关注输入表单，输入表单应该保留，即使它没有悬停。

问题是，如果它未悬停但输入表单已聚焦，则输入表单和文本元素是可见的（应该隐藏文本元素）。

我正在使用这个 HTML 代码

```
<div class="editable">
  <span>hello</span>
  <input value="hello" />
</div> 
```

这个CSS：

```
.editable :last-child { display: none; }

.editable:hover > :first-child { display: none; }
.editable:hover > :last-child { display: block; }

.editable > :last-child:focus { display: block; }
.editable > :last-child:focus~:first-child { display: none; } // <- this doesn't work! 
```

JSfiddle在这里：http: [//jsfiddle.net/a8U3P/](http://jsfiddle.net/a8U3P/)

有人知道为什么这不起作用吗？

编辑：我试过 Firefox 13 和 Chromium

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:07:35.590

一般[同级组合](http://www.w3.org/TR/selectors/#general-sibling-combinators),`E ~ F`匹配一个`F`元素前面有一个`E`元素。“Preceded”表示该元素位于该`E`元素*之前*`F`。

您究竟如何期望第一个孩子在最后一个孩子*之前*？根据“第一个”和“最后一个”的定义，这永远不能匹配任何元素。

# zend-framework - Zend View Helper formMultiCheckbox，添加css类

> ID：10972707
> 
> 赞同：0
> 
> 时间：2012-06-10T22:04:26.413
> 
> 标签：zend-framework, zend-form, view-helpers

`<?php echo $this->formMultiCheckbox($this->form->options->getFullyQualifiedName(), $this->form->options->getValue(), null, array('1' => $this->form->options->getMultiOption('1'))); ?>`

我有这样的东西，我想给它添加一个 CSS 类。我怎么能用这个助手做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:32:30.727

使用第三个参数 ( `$attribs`) 传递类名：

```
<?php echo
$this->formMultiCheckbox($this->form->options->getFullyQualifiedName(), 
$this->form->options->getValue(), array('class' => 'myclass'), array('1' =>
$this->form->options->getMultiOption('1'))); ?> 
```

这会将 html 属性添加`class="myclass"`到复选框。

# java - 我的算法有问题吗？

> ID：10972711
> 
> 赞同：1
> 
> 时间：2012-06-10T22:04:55.183
> 
> 标签：java, actionlistener

我正在创建一个“addStudent”方法，它看起来像这样：

```
package gui;

import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.border.*;

import dataManager.DataManager;

public class test extends JFrame {
    private static boolean addHowManyStudentsSet=false;
    private static int addHowManyStudents=0;
    private static JFrame addStudentFrame = new JFrame("Add Student");
    private static JTextField newStudentName = new JTextField();
    private static JTextField newStudentID = new JTextField();
    private static JLabel label1 = new JLabel("");
    private static final JButton addButton = new JButton("ADD");
    private static JButton addStudent = new JButton("SET");
    private static JPanel addStudentPanel = new JPanel();
    /**
     * Constructor of the GUI, creating labels, buttons, and other stuff.  Then they are added onto the interface.
     */
    public test() {
        super("test");
        setSize(200, 200);
        setLocation(10, 10);
        final JPanel panel = new JPanel();

        addStudent.setBounds(10,60,80,25);
        panel.add(addStudent);
        add(panel);
        addStudent.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae){
                if(!addHowManyStudentsSet){
                    try{
                        addHowManyStudents=Integer.parseInt(JOptionPane.showInputDialog(panel, "Add how many students..."));
                        JOptionPane.showMessageDialog(panel,"Set, please click this button again");
                        addStudent.setText("ADD");
                        addHowManyStudentsSet=true;
                    }
                    catch(NumberFormatException ex){
                        JOptionPane.showMessageDialog(panel, "Please enter a number");
                    }
                }

                else{

                    addStudentPanel.setLayout(null);
                    label1.setText("    "+(addHowManyStudents-1)+" more students to add...");
                    label1.setFont(new Font("Segoe UI Light",Font.PLAIN,30));
                    label1.setBounds(5,20,400,25);
                    newStudentName.setBounds(270,100,140,30);
                    newStudentID.setBounds(270,150,140,30);
                    final JLabel label2 = new JLabel("New Student Name:");
                    final JLabel label3 = new JLabel("New Student Number:");
                    label2.setBounds(30,100,200,30);
                    label2.setFont(new Font("Segoe UI Light",Font.PLAIN,21));
                    label3.setBounds(30,150,200,30);
                    label3.setFont(new Font("Segoe UI Light",Font.PLAIN,21));
                    //      final JButton addButton = new JButton("ADD");
                    addButton.setBounds(330,220,80,25);
                    addStudentPanel.add(addButton);
                    addButton.addActionListener(new ActionListener(){
                        public void actionPerformed(ActionEvent ae){            
                            addStudent();
                            //      addStudentFrame.dispose();
                        }
                    });                 
                    addStudentPanel.add(label1);
                    addStudentPanel.add(label2);
                    addStudentPanel.add(label3);
                    addStudentPanel.add(newStudentName);
                    addStudentPanel.add(newStudentID);
                    addStudentFrame.add(addStudentPanel);
                    addStudentFrame.setVisible(true);
                    addStudentFrame.setLocation(40,40);
                    addStudentFrame.setSize(470,335);
                }

            }

        });
    }

    public static void main(String[] args) {
        JFrame f = new test(  );

        f.addWindowListener(new WindowAdapter(  ) {
            public void windowClosing(WindowEvent we) { 
                System.exit(0); }
        });
        f.setVisible(true);
    }

    private static void addStudent(){
        if(addHowManyStudents>0){
            addHowManyStudents--;           
            //          addButton.addActionListener(new ActionListener(){
            //              public void actionPerformed(ActionEvent ae){        
            System.out.println("add");
            //          //  JLabel label1 = new JLabel((StudentList.getHowManyStudentToAdd()-1)+"more students to add");
            try{
                String studentName = newStudentName.getText();
                long studentNum = Long.parseLong(newStudentID.getText());
                //          //  DataManager.addStudent(studentNum, studentName);
                System.out.println("Done: "+studentNum+", "+studentName);
            }
            catch(NumberFormatException ex){
                JOptionPane.showMessageDialog(addStudentFrame, "Student ID can only be numbers");
            }
            if(addHowManyStudents!=0){
                label1.setText("    "+(addHowManyStudents-1)+" more students to add...");

            }
            newStudentName.setText("");
            newStudentID.setText("");
            addStudent();
            //              }               
            //          });

        }
        else if(addHowManyStudents==0){
            JOptionPane.showMessageDialog(addStudentFrame,"Done!");
            addStudentFrame.dispose();
            addHowManyStudentsSet=false;
            addStudent.setText("SET");
        }
    }
} 
```

这实际上非常有趣，因为用户第一次单击“添加”按钮时，它只添加了一次学生（例如，如果您想添加 14 个学生，它第一次可以正常工作，并告诉您还有 13 个学生要添加。 )

但是，当用户第二次单击“添加”按钮时，它会添加两次学生（还有 11 个学生要添加）；它在第三次点击时增加了 8 次（要再添加 3 个学生），依此类推。

我不知道发生了什么，但它只是无法正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T22:07:13.527

每次调用时`addStudent()`，都将 ActionListener 添加到 JButton，这将导致 JButton 最终多次添加侦听器。这意味着当按钮被按下时，监听器将被调用多次，这是你真的不希望发生的事情。解决方案是不这样做。相反，只需在构造函数或 init 方法中将侦听器添加到 JButton 一次，然后将其保留。

# c++ - 编译期间未找到 C++ 函数

> ID：10972713
> 
> 赞同：1
> 
> 时间：2012-06-10T22:05:17.907
> 
> 标签：c++, hash

对于家庭作业：我应该创建随机字母键，将它们打印到文件中，然后使用下面代码中的函数“goodHash”将它们中的每一个散列到散列表中。

当我尝试运行下面的代码时，它说我的“goodHash”“找不到标识符”。我的代码有什么问题？

```
#include <iostream>
#include <vector>
#include <cstdlib>
#include "math.h"
#include <fstream>
#include <time.h>
using namespace std;

// "makeKey" function to create an alphabetical key 
// based on 8 randomized numbers 0 - 25.
string makeKey() {
    int k;
    string key = "";
    for (k = 0; k < 8; k++) {
        int keyNumber = (rand() % 25);
        if (keyNumber == 0)
            key.append("A");
        if (keyNumber == 1)
            key.append("B");
        if (keyNumber == 2)
            key.append("C");
        if (keyNumber == 3)
            key.append("D");
        if (keyNumber == 4)
            key.append("E");
        if (keyNumber == 5)
            key.append("F");
        if (keyNumber == 6)
            key.append("G");
        if (keyNumber == 7)
            key.append("H");
        if (keyNumber == 8)
            key.append("I");
        if (keyNumber == 9)
            key.append("J");
        if (keyNumber == 10)
            key.append("K");
        if (keyNumber == 11)
            key.append("L");
        if (keyNumber == 12)
            key.append("M");
        if (keyNumber == 13)
            key.append("N");
        if (keyNumber == 14)
            key.append("O");
        if (keyNumber == 15)
            key.append("P");
        if (keyNumber == 16)
            key.append("Q");
        if (keyNumber == 17)
            key.append("R");
        if (keyNumber == 18)
            key.append("S");
        if (keyNumber == 19)
            key.append("T");
        if (keyNumber == 20)
            key.append("U");
        if (keyNumber == 21)
            key.append("V");
        if (keyNumber == 22)
            key.append("W");
        if (keyNumber == 23)
            key.append("X");
        if (keyNumber == 24)
            key.append("Y");
        if (keyNumber == 25)
            key.append("Z");
    }
    return key;
}

// "makeFile" function to produce the desired text file.
// Note this only works as intended if you include the ".txt" extension,
// and that a file of the same name doesn't already exist.
void makeFile(string fileName, int n) {
    ofstream ourFile;
    ourFile.open(fileName);
    int k; // For use in below loop to compare with n.
    int l; // For use in the loop inside the below loop.
    string keyToPassTogoodHash = "";
    for (k = 1; k <= n; k++) {
        for (l = 0; l < 8; l++) {    // For-loop to write to the file ONE key
        ourFile << makeKey()[l];
        keyToPassTogoodHash += (makeKey()[l]);
        }
        ourFile << "  " << k << "\n";// Writes two spaces and the data value
        goodHash(keyToPassTogoodHash); // I think this has to do with the problem
        makeKey(); // Call again to make a new key.
    }
}

// Primary function to create our desired file!
void mainFunction(string fileName, int n) {
    makeKey();
    makeFile(fileName, n);
}

// Hash Table for Part 2
struct Node {
    int key;
    string value;
    Node* next;
}; 
const int hashTableSize = 10;
Node* hashTable[hashTableSize];

// "goodHash" function for Part 2
void goodHash(string key) {
    int x = 0;
    int y;
    int keyConvertedToNumber = 0;
    // For-loop to produce a numeric value based on the alphabetic key,
    // which is then hashed into hashTable using the hash function
    // declared below the loop (hashFunction).
    for (y = 0; y < 8; y++) {
        if (key[y] == 'A' || 'B' || 'C')
            x = 0;
        if (key[y] == 'D' || 'E' || 'F')
            x = 1;
        if (key[y] == 'G' || 'H' || 'I')
            x = 2;
        if (key[y] == 'J' || 'K' || 'L')
            x = 3;
        if (key[y] == 'M' || 'N' || 'O')
            x = 4;
        if (key[y] == 'P' || 'Q' || 'R')
            x = 5;
        if (key[y] == 'S' || 'T')
            x = 6;
        if (key[y] == 'U' || 'V')
            x = 7;
        if (key[y] == 'W' || 'X')
            x = 8;
        if (key[y] == 'Y' || 'Z')
            x = 9;
        keyConvertedToNumber = x + keyConvertedToNumber; 
    }
    int hashFunction = keyConvertedToNumber % hashTableSize;
    Node *temp;
    temp = new Node;
    temp->value = key;
    temp->next = hashTable[hashFunction];
    hashTable[hashFunction] = temp;
}

// First two lines are for Part 1, to call the functions key to Part 1.
int main() {
    srand ( time(NULL) );            // To make sure our randomization works.
    mainFunction("sandwich.txt", 5); // To test program
    cin.get();
    return 0;
} 
```

我意识到我的代码在某些部分很麻烦，但我是 C++ 的菜鸟，不知道如何做得更好。

我猜另一种方法是在将字母键写入文件之后，从文件中读取它们并在我这样做时散列每个键，但我不知道如何进行编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:11:18.750

如果你插入

```
void goodHash(string key); 
```

在“使用命名空间...”下的行中，它将起作用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:13:21.643

C++ 期望一切都按顺序声明，因此在声明之前没有使用任何内容。如果您需要在文件中引用高于其定义位置的函数，则需要在声明该函数的文件顶部附近有一个函数原型。*（因此，为所有*函数编写原型是一种标准做法。）

在文件顶部附近（在`#include`s 之后）只需添加

```
void goodHash(string key); 
```

* * *

定义

函数声明：声明函数名称和函数采用的类型的东西。

函数定义：指定函数实际代码的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T22:12:51.690

问题是，如果你想使用in ，你必须先声明`goodHash`或定义。否则，当编译时，它会看到令牌并且没有发现它的含义，这就是您收到编译时错误的原因。`goodHash``makeFile``goodHash``makeFile``makeFile``goodHash`

**编辑**： [这是关于前向声明的好资源](http://www.learncpp.com/cpp-tutorial/17-forward-declarations/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T23:11:03.257

您忘记了函数原型，只需将其添加到顶部：

```
void goodHash(string key); 
```

顺便说一句，你的 makeKey() 太长了，你可以试试这个：

```
string makeKey() {
    int k;
    string key = "";
    for (k = 0; k < 8; k++) {
        int keyNumber = (rand() % 25);
        char app[2];
        app[0] = keyNumber + 'A';
        app[1] = 0;
        key.append(app);
        }
    return key;
} 
```

# iphone - 以编程方式拨打电话后执行代码

> ID：10972718
> 
> 赞同：0
> 
> 时间：2012-06-10T22:06:26.900
> 
> 标签：iphone, objective-c, callback

打完电话后如何执行代码？我的应用使用以下代码拨打电话：

```
- (void)callTelURL:(NSURL *)url
{
    UIWebView  *webview = [[UIWebView alloc] init];
    [self.view addSubview:webview];

    [webview loadRequest:[NSURLRequest requestWithURL:url]]; 
    [webview release];
} 
```

我立即得到 applicationWillResignActive、applicationDidBecomeActive 和 applicationDidEnterBackground，但是一旦电话完成并且我回到我的应用程序中，我就再也没有得到 applicationWillEnterForeground 或 applicationDidBecomeActive。当我从通话中返回时，我可以做些什么来得到通知，以便我可以执行一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:09:00.870

如果您的应用在有呼叫时处于前台，然后呼叫被解除，您将不会收到对 applicationWillEnterForeground 的呼叫。

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

所以执行 applicationDidBecomeActive 中的代码，但前提是前面的调用是 applicationWillresignActive。

PS 仅仅因为您的应用程序获得了 applicationWillResignActive 然后 applicationDidBecomeActive 并不一定意味着您接到了电话，其他事情也可能导致这种情况。因此，如果您只想在电话引起此行为之后执行代码，则不能依赖它

# android - SQLiteOpenHelper getWritableDatabse() 失败，没有异常

> ID：10972719
> 
> 赞同：1
> 
> 时间：2012-06-10T22:06:42.063
> 
> 标签：android, sqlite, sqliteopenhelper

我有一个非常奇怪的问题。它只在几个设备上不时显示。似乎无法在我想要的时候重现它，但有过很多次，我想我知道我从哪里得到它。

所以我有一个`Loader`通过单例连接到 sqlite 的方法`SQLiteOpenHelper`：

```
try {
    Log.i(TAG, "Get details offline / db helper: "+DatabaseHelper.getInstance(getContext()));
    SQLiteDatabase db=DatabaseHelper.getInstance(this.getContext()).getWritableDatabase();
    Log.i(TAG, "Get details offline / db: "+db);
    //doing some work on the db...
} catch(SQLiteException e){
    e.printStackTrace();
    return null;
} catch(Exception e){
    e.printStackTrace();
    return null;
    //trying everything to grab some exception or whatever
} 
```

我`SQLIteOpenHelper`看起来像这样：

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    private static DatabaseHelper mInstance = null;
    private static Context mCxt;

    public static DatabaseHelper getInstance(Context cxt) {
        //using app context as suggested by CommonsWare
        Log.i("DBHELPER1", "cxt"+mCxt+" / instance: "+mInstance);
        if (mInstance == null) {
            mInstance = new DatabaseHelper(cxt.getApplicationContext());
        }
        Log.i("DBHELPER2", "cxt"+mCxt+" / instance: "+mInstance);
        mCxt = cxt;
        return mInstance;
    }

    //private constructor
    private DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        this.mCxt = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        //some tables created here
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        //upgrade code here
    }
} 
```

在大多数情况下，它确实非常有效。但有时我会收到类似这样的日志：

```
06-10 23:49:59.621: I/DBHELPER1(26499): cxtcom.myapp@407152c8 / instance: com.myapp.helpers.DatabaseHelper@40827560
06-10 23:49:59.631: I/DBHELPER2(26499): cxtcom.myapp@407152c8 / instance: com.myapp.helpers.DatabaseHelper@40827560
06-10 23:49:59.631: I/DetailsLoader(26499): Get event details offline / db helper: com.myapp.helpers.DatabaseHelper@40827560
06-10 23:49:59.631: I/DBHELPER1(26499): cxtcom.myapp@407152c8 / instance: com.myapp.helpers.DatabaseHelper@40827560
06-10 23:49:59.651: I/DBHELPER2(26499): cxtcom.myapp@407152c8 / instance: com.myapp.helpers.DatabaseHelper@40827560 
```

这条线`Log.i(TAG, "Get details offline / db: "+db);`永远不会被调用！没有例外，沉默。另外，带有 的线程`Loader`不再运行。

所以什么都没有：

```
SQLiteDatabase db=DatabaseHelper.getInstance(this.getContext()).getWritableDatabase(); 
```

被执行。

这条线上可能出现什么问题？

# java - 如何使用 getResource() 加载图像和一些 html 文件？

> ID：10972721
> 
> 赞同：0
> 
> 时间：2012-06-10T22:07:02.810
> 
> 标签：java, html, jar, embedded-resource, getresource

在 Eclipse 中，我在`src`文件夹中创建了一个项目。我在里面做了一个包，`res`里面放了所有的`html`/`gif`文件。

有人可以给我一行代码，用新位置更改按钮吗？

```
setIcon(new ImageIcon("Back24.gif")); 
```

`index.html`还可以提供一个使用与图标位于同一位置的 HTML 文件执行相同操作的示例吗？

```
htmlPane.setPage("file:\\" +path +"\\Contents.html"); 
```

我还想问一下，如果我创建一个包含所有这些资源文件的 jar，然后将该 jar 带到另一台 PC 上，它还会找到并加载这些资源吗？

# git - 如何在不中断的情况下将整个网站从测试区复制到虚拟主机

> ID：10972726
> 
> 赞同：1
> 
> 时间：2012-06-10T22:07:54.677
> 
> 标签：git, ssh, lamp, sftp, scp

我的虚拟主机服务器上没有可用的 git，我真的很想用它来跟踪我的网站开发。我想出的最佳解决方案是在家中安装我的 LAMP 进行本地开发，然后在我有工作版本时将所有文件 scp 到我的网络主机。

是否有一种程序/标准方法可以一次性对网站进行更改？这个想法是在复制（可能很大）文件集时不让用户看到混乱的过渡网页。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T22:15:17.880

用新代码库替换旧代码库的最简单方法是将所有代码库复制到与旧代码库相同级别的新目录中，然后重命名两个目录，如下所示：

```
// assuming your working copy is in ~/workingcopy
// and your webserver document root is in /path/to/webroot on server "webhost"
// copy all your files to /path/to/webroot.new:
scp -r ~/workingcopy webhost:/path/to/webroot.new
// then run on the server:
mv /path/to/webroot /path/to/webroot.old && mv /path/to/webroot.new /path/to/webroot 
```

之后，您可以备份或删除您的旧代码库，仍然存储为`/path/to/webroot.old`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:10:08.353

我会尝试使用 SSH，在 Windows 上使用 WinSCP。（如果你在窗户上）。在 linux 和 mac（我认为）上，您可以尝试使用 Putty。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:22:42.983

好吧，在这种情况下，即使您的虚拟主机中有 Git，也无法解决转换问题。

如果您在 Web 主机（例如 ssh）中拥有更多权限，则可以通过目录链接来实现（假设您在 LAMP 堆栈中）。您将新版本复制到一个新目录，而不是在完成复制后更改目录链接，所有内容都会一次更新。

# c# - 如何在网格中放置 XAML 用户控件

> ID：10972728
> 
> 赞同：6
> 
> 时间：2012-06-10T22:08:25.497
> 
> 标签：c#, xaml, windows-8, windows-runtime, microsoft-metro

我有以下 main.xaml 和用户控件。

我需要将用户控件多次放置在网格的第 2 行第 2 列，通过使用 Visual Studio，它不允许拖放用户控件，所以我想我必须通过代码来完成，我只是不知道如何

**主页.xaml**

```
<Grid HorizontalAlignment="Left" Height="768" VerticalAlignment="Top" Width="1366" x:Name="grid" Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="150"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="250"/>
        </Grid.ColumnDefinitions>
        <Border BorderBrush="White" BorderThickness="3" Grid.Column="1" Background="Red" CornerRadius="30"/>
        <TextBlock x:Name="txtCountry" Grid.Column="1" TextWrapping="Wrap"  FontSize="36" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        <TextBlock x:Name="txtTime" Grid.Row="1" TextWrapping="Wrap" FontSize="180" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid> 
```

**用户控制**

```
<UserControl
    x:Class="AlarmPro.TimeOnCity"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AlarmPro"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="150"
    d:DesignWidth="250">

    <Grid Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Border BorderBrush="#FFDE6A6A" BorderThickness="1" Grid.Row="0" Grid.Column="0" Background="#FFDC4646">
            <TextBlock TextWrapping="Wrap" Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16"/>
        </Border>
        <Border BorderBrush="Black" BorderThickness="1" Grid.Row="1" Background="#FFAE4F00">
            <TextBlock TextWrapping="Wrap" Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="36"/>
        </Border>

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T22:18:50.707

你的意思是这样吗？

```
 <my:UserControlName Grid.Column="2" Grid.Row="2" ... /> 
```

`<my:`在这种情况下，是 CLR 命名空间的别名`UserControl`。它定义在 XAML 的顶部，在`<Window>`or`<UserControl>`标记内，具体取决于上下文。

例如，

```
<Window ... 
    xmlns:my="clr-namespace:AssemblyName"
    ...
/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-27T04:41:58.500

主页.Xaml

```
<Page
    x:Class="UserControlExample.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UserControlExample"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid x:Name="MainContent" Background="Azure" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Hidden" 
                VerticalScrollBarVisibility="Hidden">                        
            <local:UserControl1 x:Name="MyHelloWorldUserControl" Grid.Row="1" />
        </ScrollViewer>
    </Grid>           
</Page> 
```

UserControl1.xaml

```
<UserControl
    x:Class="UserControlExample.UserControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UserControlExample"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid Background="Bisque">
        <StackPanel>
            <StackPanel Orientation="Horizontal" Height="81">
                <TextBlock Text="Your Name is" Foreground="Blue" FontSize="30" Margin="0,0,0,10"/>
                <TextBox x:Name="Input" Background="White" Width="225" />
             </StackPanel>
             <Button Content="Click Me" Foreground="Brown" FontSize="30" Click="Button_Click"/>
             <TextBlock x:Name="Output" FontSize="100"/>
         </StackPanel>
     </Grid>
 </UserControl> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T06:59:52.990

**MainPage.xaml**，我正在使用**命名空间**绑定登录用户控件： xmlns:UC="clr-namespace:Test.Views" ，因为我的用户控件位于名为“ **Views** ”的文件夹中。

```
<ScrollViewer>
<UC:Login BtnLoginClick="Login_BtnLoginClick"/>
</ScrollViewer> 
```

**登录.cs**

```
public partial class Login : UserControl    {

    public event EventHandler BtnLoginClick;

    public Login()
    {
        InitializeComponent();
    }

    private void btnLogin_Click(object sender, RoutedEventArgs e)
    {
        string userName = txtUserName.Text;
        string userPassword = txtUserPassword.Password.Trim();
        if (userName != null && userName != string.Empty && userPassword != null &&       userPassword != string.Empty)
        {
            if (this.BtnLoginClick != null)
            {
                this.BtnLoginClick(this, e);
            }
        }
        else
        {
            MessageBox.Show("Invalid username or password");
        }
    } 
```

}

最后，不要忘记使用 MainPage.xaml 中的事件处理程序来捕获来自 Login Usercontrol 的按钮单击事件以执行其他操作。

**主页.xaml**

```
<UC:Login BtnLoginClick="Login_BtnLoginClick"/> 
```

这里“BtnLoginClick”是一个在 Login.xaml[User Control] 中定义的事件处理程序。

当我创建“Login_BtnLoginClick”时，为此“BtnLoginClick”事件创建新事件。

**主页.cs**

```
private void Login_BtnLoginClick(object sender, EventArgs e)
{
Messagebox.Show("Event captured successfully");
////Here you can add your stuffs...     
} 
```

# sql - 将字段与值进行比较并返回布尔值

> ID：10972730
> 
> 赞同：11
> 
> 时间：2012-06-10T22:09:27.520
> 
> 标签：sql, postgresql, npgsql

我正在尝试将哈希检查从服务器应用程序移动到 PostgreSQL。换句话说，我需要调用对 PGSQL 的查询，它将查询中的字符串与字段中的字符串进行比较，并将相等比较的结果返回为 bool，但如果没有明确 SQL 的程序，我不知道如何做到这一点。

upd：我有字段**密码的表****用户**（当前为*text*，将来 - *bytea*）。我想写一些像

 ****```
select * from values ('WrittenPassword' = users.password) where username = 'someuser' , 
```

**它必须返回 true 或 false 作为相等比较的结果**。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-10T23:36:36.107

您可以使用[CASE](http://www.postgresql.org/docs/7.4/static/functions-conditional.html)语句根据条件返回某些值：

```
SELECT 
    (CASE WHEN password = 'WrittenPassword' THEN 1 ELSE 0 END) AS is_equal
FROM
    users
WHERE
    username = 'someuser' 
```****

# c# - C# 联合结构编组

> ID：10972740
> 
> 赞同：3
> 
> 时间：2012-06-10T22:12:19.413
> 
> 标签：c#, mono, marshalling, ioctl

我正在尝试将 Video4Linux 集成到我的托管应用程序中。事实上，我已经声明了所有必需的结构和相关的*ioctl*。在这个问题中，我提出了两个`ioctl`：`SetFormat`和`GetFormat`；虽然前者运行良好（就像我实际使用的其他十几个一样），但后者却让我有不好的记忆行为。

ioctl 实际上正在执行，`GetFormat`但是一旦应用程序访问 ioctl 参数（调试器或我的应用程序本身），它总是会因以下堆栈而崩溃：

```
System.NullReferenceException: ...
at System.String.mempy4(...) in <filename unknown>:0
at System.String.memcpy(...) in <filename unknown>:0
at Derm.Platform.Video4Linux.ControlGetFormat(...) in <...>
... 
```

我对[p/invoking ioctl](https://stackoverflow.com/questions/10387603/p-invoke-ioctl-system-call)进行了一些调查，但我再次无法理解为什么我的应用程序崩溃了。我怀疑这是因为结构内存布局，但我无法解释为什么`SetFormat`工作`GetFormat`而不工作（因为它们使用相同的参数）。

我必须 P/Invoke 一个`ioctl`接收/返回结构的例程`v4l2_format`：

```
struct v4l2_format {
        enum v4l2_buf_type type;
        union {
                struct v4l2_pix_format          pix;     /* V4L2_BUF_TYPE_VIDEO_CAPTURE */
                struct v4l2_pix_format_mplane   pix_mp;  /* V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE */
                struct v4l2_window              win;     /* V4L2_BUF_TYPE_VIDEO_OVERLAY */
                struct v4l2_vbi_format          vbi;     /* V4L2_BUF_TYPE_VBI_CAPTURE */
                struct v4l2_sliced_vbi_format   sliced;  /* V4L2_BUF_TYPE_SLICED_VBI_CAPTURE */
                __u8    raw_data[200];                   /* user-defined */
        } fmt;
};

struct v4l2_pix_format {
    __u32                   width;
    __u32                   height;
    __u32                   pixelformat;
    enum v4l2_field         field;
    __u32                   bytesperline;   /* for padding, zero if unused */
    __u32                   sizeimage;
    enum v4l2_colorspace    colorspace;
    __u32                   priv;           /* private data, depends on pixelformat */
}; 
```

我已经`v4l2_format`使用以下形式对结构进行了转换

```
[StructLayout(LayoutKind.Explicit, Pack = 4, CharSet = CharSet.Ansi)]
public struct Format
{
    public Format(BufferType bufferType)
    {
        Type = bufferType;
        Pixmap = new PixmapFormat();
        RawData = new byte[RawDataLength];
    }

    public Format(BufferType bufferType, PixmapFormat pixmapFormat)
    {
        Type = bufferType;
        Pixmap = pixmapFormat;
        RawData = new byte[RawDataLength];
    }

    [FieldOffset(0)]
    public BufferType Type;

    [FieldOffset(4)]
    public PixmapFormat Pixmap;

    [FieldOffset(4)]
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=RawDataLength)]
    public byte[] RawData;

    public const int RawDataLength = 200;
}

[StructLayout(LayoutKind.Sequential, Pack = 4)]
public struct PixmapFormat
{
    public PixmapFormat(uint width, uint height, PixelFormatCode pixelFormat)
    {
        Width = width;
        Height = height;
        PixelFormat = pixelFormat;
        Field = Video4Linux.BufferField.Any;
        BytesPerLine = 0;
        SizeImage = 0;
        Colorspace = Video4Linux.PixelColorspace.None;
        Private = 0;
    }

    public UInt32 Width;

    public UInt32 Height;

    public PixelFormatCode PixelFormat;

    public BufferField Field;

    public UInt32 BytesPerLine;

    public UInt32 SizeImage;

    public PixelColorspace Colorspace;

    public UInt32 Private;
} 
```

最后，这里是调用 ioctl 的方法：

```
public static void ControlGetFormat(IntPtr fd, BufferType pixmapType, out PixmapFormat pixmapFormat)
{
    if (fd == IntPtr.Zero)
        throw new ArgumentException("invalid file descriptor", "fd");

    Format format = new Format(pixmapType);

    int result = IoCtrlGetFormat(fd, GetFormat.ControlCode, ref format);

    if (result < 0)
        ThrowExceptionOnError();

    pixmapFormat = format.Pixmap;
}

private static readonly IoCtrlRequest GetFormat = new IoCtrlRequest(IoCtrlDirection.Read | IoCtrlDirection.Write, 'V', 4, typeof(Format));

[DllImport("libc", EntryPoint = "ioctl", SetLastError = true)]
private static extern int IoCtrlGetFormat(IntPtr fd, Int32 code, ref Format argument);

public static void ControlSetFormat(IntPtr fd, BufferType pixmapType, ref PixmapFormat pixmapFormat)
{
    if (fd == IntPtr.Zero)
        throw new ArgumentException("invalid file descriptor", "fd");

    PixmapFormat pixmapFormatCopy = pixmapFormat;
    Format format = new Format(pixmapType, pixmapFormatCopy);

    int result = IoCtrlSetFormat(fd, SetFormat.ControlCode, ref format);

    if (result < 0)
        ThrowExceptionOnError();

    pixmapFormat = format.Pixmap;
}

private static readonly IoCtrlRequest SetFormat = new IoCtrlRequest(IoCtrlDirection.Read | IoCtrlDirection.Write, 'V', 5, typeof(Format));

[DllImport("libc", EntryPoint = "ioctl", SetLastError = true)]
private static extern int IoCtrlSetFormat(IntPtr fd, Int32 code, ref Format argument); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:29:14.227

*通过将结构大小强制为实际大小（在我的情况下为204*）并删除数组字段`RawData`（如[David Heffernan](https://stackoverflow.com/users/505088/david-heffernan)所建议），已解决了该问题。

确实：

```
[StructLayout(LayoutKind.Explicit, Pack = 4, CharSet = CharSet.Ansi, Size = 204)]
public struct Format
{
    public Format(BufferType bufferType)
    {
        Type = bufferType;
        Pixmap = new PixmapFormat();
    }

    public Format(BufferType bufferType, PixmapFormat pixmapFormat)
    {
        Type = bufferType;
        Pixmap = pixmapFormat;
    }

    [FieldOffset(0)]
    public BufferType Type;

    [FieldOffset(4)]
    public PixmapFormat Pixmap;
} 
```

当然，`Marshal.SizeOf(typeof(Format)) == 204`。

# data-binding - 单选按钮的 knockout.js 布尔数据绑定问题

> ID：10972741
> 
> 赞同：2
> 
> 时间：2012-06-10T22:12:23.210
> 
> 标签：data-binding, knockout.js, boolean, observable

我目前正在执行以下操作以补偿布尔值不能很好地映射到单选按钮。由于字段是如何从 observables 中读取的，我被困在将 1 和 0 绑定到值（而不是 true 和 false）。Pref1/Pref2 的值来自服务器的真/假布尔值。这里的关键是我不仅要对单选按钮的选中值进行数据绑定以匹配对象中的真/假，而且我还希望将真/假的布尔值写回 GraduationClass 对象。我的补偿代码不仅丑陋，而且不可扩展。

```
<input type="radio" value="1" name="radioGroup" data-bind="checked: Pref1" />Yes
<input type="radio" value="0" name="radioGroup" data-bind="checked: Pref2" />No    
<a href="javascript:void(0);" data-bind="click: $root.saveGraduationClass ">Save</a>  

function SiteSettingsViewModel() {
    var self = this;
    this.saveGraduationClass = function(graduationClass) {
        // hack until i get a custom radio button binding
        if (graduationClass.Pref1() == 1) {
            graduationClass.Pref1(true);            
        } else {
            graduationClass.Pref1(false);            
        }  

        if (graduationClass.Pref2() == 1) {
            graduationClass.Pref2(true);
        } else {
            graduationClass.Pref2(false);
        }

        // ...ajax call to save graduationClass to the server
    }

function GraduationClass(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:46:15.590

这是来自 knockoutJs 网站的示例，它演示了如何使用具有“已选中”属性的单选按钮：

```
<p>Send me spam: <input type="checkbox" data-bind="checked: wantsSpam" /></p>
<div data-bind="visible: wantsSpam">
    Preferred flavor of spam:
    <div><input type="radio" name="flavorGroup" value="cherry" data-bind="checked: spamFlavor" /> Cherry</div>
    <div><input type="radio" name="flavorGroup" value="almond" data-bind="checked: spamFlavor" /> Almond</div>
    <div><input type="radio" name="flavorGroup" value="msg" data-bind="checked: spamFlavor" /> Monosodium Glutamate</div>
</div>

<script type="text/javascript">
    var viewModel = {
        wantsSpam: ko.observable(true),
        spamFlavor: ko.observable("almond") // Initially selects only the Almond radio button
    };

    // ... then later ...
    viewModel.spamFlavor("msg"); // Now only Monosodium Glutamate is checked
</script> 
```

但我不明白你为什么使用两个对象 - 一个单选按钮组“radioGroup”的“Pref1”和“Pref2”？在这种情况下，您只需使用一个对象，例如使用“spamFlavor”的示例。

因此，请更详细地描述您要绑定的内容：一个单选按钮按一个选定值分组，或其他内容。

您也可以使用计算的 observables 来计算不同的值，请参见[**示例**](http://jsfiddle.net/dmitry_zaets/r9jpN/7/)。

# jquery - FadeTo 和 SlideDown - Firefox 问题

> ID：10972749
> 
> 赞同：0
> 
> 时间：2012-06-10T22:14:19.180
> 
> 标签：jquery

我正在尝试添加数据，然后淡出旧 div 并向下滑动新 div。在 Chrome 中效果很好，但在 Firefix 中它会淡出旧 div 但不会滑下新 div。只有在浏览器中缓存数据时，它才会在 Firefox 浏览器中正确向下滑动。

任何人都可以看到我的代码有什么问题可能导致在 Firefox 中发生这种情况吗？非常感谢...

**HTML**

```
<div class="Output">
   <div class="block"></div>
</div> 
```

**JS**

```
$.ajax({
   url: "file.php",
   timeout: 3000,
   data: dataString,
   cache: false,
   success: function(myhtml){

      var new_div = $(myhtml).hide();
      $(".Output").prepend(new_div);

      $(".block").fadeTo("normal", 0.00, function(){

         $(".block2").hide().slideDown('normal', function() {
         });

      });       

   }
}); 
```

**文件.php**

```
<div class="block2"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:11:35.923

在`complete`回调中放置幻灯片和淡入淡出。

见这里：[http ://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

在你的情况下，是这样的：

```
$.ajax({
   url: "file.php",
   timeout: 3000,
   data: dataString,
   cache: false,
   success: function(myhtml){

      var new_div = $(myhtml).hide();
      $(".Output").prepend(new_div);

   },
   complete: function(){

         //you may need to check if the ajax result was actually a success here
         $(".block").fadeTo("normal", 0.00, function(){

            $(".block2").hide().slideDown('normal', function() {
            });

      });   
   }
}); 
```

# actionscript-3 - AS3/FLEX - 如何将 Sprite 图形转换为字节

> ID：10972753
> 
> 赞同：0
> 
> 时间：2012-06-10T22:14:37.683
> 
> 标签：actionscript-3, apache-flex, graphics, bytearray

我编写的应用程序可以让人们通过互联网一起绘画（使用 Adob​​e cirrus）。一切都很好，但是当我运行我的应用程序并在我的朋友连接之前画一些东西时，他看不到我画的东西。所以我正在寻找一种方法，它可以让我将我的画布转换为可以通过互联网发送的东西（对象）（我不能发送整个 Sprite，不可能在朋友的应用程序上复制它的图形，它是空的）。

所以让我们弄清楚这一点。主要问题是：如何将 Sprite 的图形转换为对象，这将让我将其转换回 Sprite 并复制其画布。

**解答：** 我使用“www.Flextras.com”帖子中的 DisplayConverter 库和他的 mod 将 Sprite 转换为 BitmapData，然后转换为 ByteArray，它可以工作。我无法在朋友的应用程序上接收 BitmapData，但它可以与 ByteArray 一起使用。

精灵 -> 位图数据 -> 字节数组；
字节数组 -> 位图数据 -> 精灵；

```
//TO SEND
var bitmapdata:BitmapData = DisplayConverter.spriteToBitmapData(palette);
var bytearr:ByteArray = bitmapdata.getPixels(bitmapdata.rect);

//TO RECEIVE
var bmd:BitmapData = new BitmapData(530,430);
bmd.setPixels(bmd.rect, bytearr);       

mysprite.graphics.beginBitmapFill(bmd);
mysprite.graphics.drawRect(0,0,530,430);
mysprite.graphics.endFill(); 
```

希望这会对某人有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:22:43.467

我认为您想将 Canvas 转换为 BitMap 或 BitMapData（并返回）。[Flex Canvas](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/containers/Canvas.html)扩展了Sprite，因此您可以使用这样的[库](http://www.natejc.com/source/com/natejc/utils/display/DisplayConverter.as)。要复制相关代码，这会将 Sprite 转换为 BitMap：

```
 public static function spriteToBitmap(sprite:Sprite, smoothing:Boolean = false):Bitmap
    {
        var bitmapData:BitmapData = new BitmapData(sprite.width, sprite.height, true, 0x00FFFFFF);
        bitmapData.draw(sprite);

        return new Bitmap(bitmapData, "auto", smoothing);

    } // END FUNCTION spriteToBitmap 
```

这会将位图转换为 Sprite：

```
 public static function bitmapToSprite(bitmap:Bitmap, smoothing:Boolean = false):Sprite
    {
        var sprite:Sprite = new Sprite();
        sprite.addChild( new Bitmap(bitmap.bitmapData.clone(), "auto", smoothing) );
        return sprite;

    } // END FUNCTION bitmapToSprite 
```

在我自己的开发中，我对这个库有一个 mod，它允许我获取 BitMapData 而不是实际的 BitMap。因此，这会将 Sprite 转换为 BitMapData：

```
 public static function spriteToBitmapData(sprite:Sprite):BitmapData
    {
        var bitmapData:BitmapData = new BitmapData(sprite.width, sprite.height, true, 0x00FFFFFF);
        bitmapData.draw(sprite);

        return bitmapData;

    } // END FUNCTION spriteToBitmapData 
```

这将获取 BitMapData 并将其转回 Sprite：

```
 public static function bitmapDataToSprite(bitmapData:BitmapData, smoothing:Boolean = false):Sprite
    {
        var sprite:Sprite = new Sprite();
        sprite.addChild( new Bitmap(bitmapData.clone(), "auto", smoothing) );
        return sprite;

    } // END FUNCTION bitmapToSprite 
```

您确实要记住，在将 BitMap 或 BitMapData 转换回 Sprite 时，您可能无法将其转换为 Canvas。有关将 BitMapData 发送到服务器的信息；看看[这个问题](https://stackoverflow.com/questions/762226/how-to-upload-a-bitmapdata-object-straight-to-my-server)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:43:47.580

更好的方法是，而不是直接使用像素，让用户手势创建数据，然后将该数据反映为画布上的绘图。将相同的数据传输给其他用户，他/她将获得相同的绘图。

# xml - 在 F# 中将文本添加到 XML 节点

> ID：10972755
> 
> 赞同：-1
> 
> 时间：2012-06-10T22:15:08.770
> 
> 标签：xml, text, f#, xmlnode

这是我的 XML：

```
<location>
  <hotspot name="name1" X="444" Y="518" />
  <hotspot name="name2" X="542" Y="452" /> 
  <hotspot name="name3" X="356" Y="15" />
</location> 
```

我想做的是：

```
<location>
  <hotspot name="name1" X="444" Y="518">
    <text>
      This is the text I want to add in
    </text>
  </hotspot>
  <hotspot name="name2" X="542" Y="452" /> 
  <hotspot name="name3" X="356" Y="15" />
</location> 
```

我无法添加文本，新节点没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:20:56.733

由于您用 标记了问题`XmlNode`，我假设您使用的是`XmlDocument`from 类型`System.Xml`（而不是更现代的 Linq to XML 类型`XDocument`）。

要添加带有一些正文文本的新节点，您可以创建一个新元素（具有所需名称），然后设置其`InnerText`value 属性以指定节点中的文本：

```
// Load XML document and find the parent node
let doc = XmlDocument()
doc.LoadXml("... your xml goes here ...")
let parent = doc.SelectSingleNode("/location/hotspot[@name='name1']")

// Create a new element and set its inner text
let newNode = doc.CreateElement("text")
newNode.InnerText <- "foo"
parent.AppendChild(newNode) 
```

您也可以通过在调用时指定属性来编写相同的内容，`CreateElement`如下所示：

```
doc.CreateElement("text", InnerText = "foo") |> nd.AppendChild 
```

# jquery - ASP.NET JSON 绑定数据与 RadiobuttonList

> ID：10972757
> 
> 赞同：0
> 
> 时间：2012-06-10T22:15:35.210
> 
> 标签：jquery, asp.net, json

我正在尝试将 JSON 数据绑定到客户端的 RadioButtonList 中。我知道如何做后面的代码，它工作正常。有人请提供更多详细信息，如何在 VB.NET 中绑定 JSON 数据 RadioButtionList。

```
rblregions.DataTextField = "Value"
rblregions.DataValueField = "Key"
rblregions.DataSource = items 
```

数据如下：`[regions:{regionID:US,regionName:USA}]`

主文件

```
<asp:RadioButtonList ID="rblregions" runat="server">

$.getJSON("Map/loadMySites.aspx?" + query,
    function (data) {
        if (data.regionid && data.region) {
            //I want to bind the data here with RadioButtonList
        }

    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:53:42.110

VB.NET 是服务器端。**你不能用 VB.NET 做客户端**。你应该用javascript来做。

单选按钮列表的 ASP.NET 标记通常会生成一个 HTML 表格。让我们假设它是这样的

```
<table id="rblregions"><tbody></tbody></table> 
```

假设你`JSON`从你的服务器页面得到这样的，

```
{
    "regions": [
        { "regionID": "US", "regionName": "USA" },
        { "regionID": "UK", "regionName": "United Kingdom" }
    ]
} 
```

你可以这样做

```
$.getJSON("Map/loadMySites.aspx?" + query,function(data){
    var rows="";
    $.each(data.regions,function(index,item){
        rows+="<tr><td>"+item.regionName+"</td></tr>";
    });    
    $("#rblregions> tbody:last").append(rows);    
}); 
```

这是一个 jsfiddle 示例[http://jsfiddle.net/LM6fF/10/](http://jsfiddle.net/LM6fF/10/)

如果您的单选按钮列表在另一个 asp.net 容器元素（前面板）内，则元素的 ID 将不像`rblregions`. 所以我建议你使用类名而不是 ID 作为 jQuery 选择器。

[jsonlint](http://jsonlint.com/)是一个很好的工具来验证你的 JSON。

# java - Eclipse中同一编辑器中的不同字体大小

> ID：10972758
> 
> 赞同：3
> 
> 时间：2012-06-10T22:15:48.353
> 
> 标签：java, eclipse, editor

有没有办法根据它是Java函数名还是关键字等来显示不同的字体/字体大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:04:25.710

如果没有其他人会说什么，那么我会说不，没有办法在单个文本编辑器中拥有不同的字体和大小。作为其内部配置的一部分，编辑器具有确定哪些文本是保留字、注释等的方法，并且编辑器框架能够根据该句法解析为文本着色。但是，不支持更改文本的字体或字体大小。

# jquery - DatePicker 仅显示某些日期

> ID：10972763
> 
> 赞同：1
> 
> 时间：2012-06-10T22:16:43.533
> 
> 标签：jquery, jquery-ui, datepicker

我正在尝试构建一个表格，学生可以在其中选择上课日期。仅在每月的特定日期上课。我在实现限制到某些日期的高级代码时遇到了麻烦。我要离开下面的这篇文章来帮助我。

[jQuery UI Datepicker 仅启用数组中的特定日期](https://stackoverflow.com/questions/7709320/jquery-ui-datepicker-enable-only-specific-days-in-array)

我开始创建一个带有简单输入文本框的表单。我把基本的 jquery 代码和弹出日历工作正常。

```
$(function() {
    $( "#date" ).datepicker();
}); 
```

之后，我替换了基本代码并复制了上面的代码，以便只选择某些日期。我尝试测试表单，如果单击输入框，则没有任何反应。我确实在 jfiddle 对其进行了测试，并且效果很好，所以我认为这一定是我实现它的方式或其他方式。

这是我尝试使用的代码：

```
<script>
    var availableDates = ["9-6-2012","14-6-2012","15-6-2012"];

    function available(date) {
        dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();
        if ($.inArray(dmy, availableDates) !== -1) {
            return [true, "","Available"];
        } else {
            return [false,"","unAvailable"];
        }
    }

    $('#date').datepicker({ beforeShowDay: available });​
</script> 
```

我试过把它放在头标签和身体标签中，但没有任何运气。我不是那么先进，所以任何帮助将不胜感激。谢谢。

jsFiddle 解决这个问题：http: [//jsfiddle.net/szYYY/2/](http://jsfiddle.net/szYYY/2/)。

# eclipse - 如何将 Maven 存储库 jar 添加到 Eclipse 构建路径？

> ID：10972770
> 
> 赞同：5
> 
> 时间：2012-06-10T22:18:07.107
> 
> 标签：eclipse, maven, m2eclipse, buildpath

从 Eclipse 中，我可以在 Maven 存储库视图中看到所有必要的 jar。但是对于丢失的 jar 文件，我有大约 100 个错误。所以我设置了 M2_REPO 环境变量。我已经从命令行运行了 mvn eclipse:eclipse 命令。当我运行这个命令时，一个 ear 包被添加到我的项目的一个子包中。例如我的项目名称是门户。子包是portal_ear。运行 mvn eclipse:eclipse 命令后的ear 添加到portal_ear 的目标文件夹中。所以我的问题是，因为我已经在存储库中有 jar，如何将它们添加到 eclipse 中的门户构建路径中？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:31:06.667

当您使用 M2Eclipse 时，您需要做的就是确保您的 Eclipse 项目是一个 Maven 项目。选择项目，点击“Convert > Convert to Maven project”或“Maven > Enable dependency management”。

不要手动添加库。此外，M2_REPO 库变量不再与 m2eclipse 一起使用，也不再运行“mvn eclipse:eclipse”命令。那是您无需再做的遗产。

您还可以使用“文件 > 导入 > Maven > 现有 Maven 项目”来导入您的项目，M2Eclipse 将正确设置项目的构建路径。

如果您有自定义 Maven 设置，例如 Enterprise Repository，您可能想告诉 M2Eclipse 在哪里可以找到您的 settings.xml 文件，如果您的用户主页中没有它，而是在 Maven 安装中（人们有时会这样做）。转到“窗口 > 首选项 > Maven > 用户设置”并选择正确的 settings.xml。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T23:42:41.040

从 eclipse 市场安装 m2e。您现在可以将现有的 Maven 项目导入您的工作区或转换现有的项目。

适用于 Eclipse 3.7

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T20:13:21.293

就我而言，我有一个部署在 Eclipse 中的现有项目。谢谢Mkyong：[http ://www.mkyong.com/spring-security/spring-security-hello-world-example/](http://www.mkyong.com/spring-security/spring-security-hello-world-example/)

但是当我需要为 Logout 标签支持添加 JSTL 时，我没有看到如何将刚刚拉入我的 repo 的 jstl.jar 文件作为另一个 M2_REPO/xyz 配置添加。相反，我只能像导入常规 .jar 文件一样导入它——这对我来说似乎不正确。

在阅读了一堆没有成功的帖子后，我决定看看是否可以绕过 Eclipse UI 并手动更新项目配置。从项目中，我在文本编辑器中打开 .classpath 并为 jar 文件添加了一个新条目：

```
<classpathentry kind="var" path="M2_REPO/javax/servlet/jstl/1.2/jstl-1.2.jar" sourcepath="M2_REPO/javax/servlet/jstl/1.2/jstl-1.2.jar">
    <attributes>
        <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
    </attributes>
</classpathentry> 
```

然后我刚刚在 Eclipse 中刷新了我的项目（不需要重新启动）并且......

*   我在 JSP 页面中遇到的 JSTL 构建错误消失了
*   JSTL 的构建路径条目与其他条目具有相同的 M2_REPO
*   部署的代码在 Tomcat 中运行良好

是的，有点小技巧，但我认为还是比较干净 - 干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-04T10:43:01.737

右键单击项目 --> Maven --> 更新项目...
对我来说，它的工作原理就是这样

# java - 从 Java 代码而不是 XML 运行选项卡

> ID：10972773
> 
> 赞同：0
> 
> 时间：2012-06-10T22:18:55.203
> 
> 标签：java, android, xml, view, tabs

我现在拥有的是 4 个选项卡，其中一个有自定义视图和一些小部件。为了让整个事情正常工作，我需要启动活动`Tab3Activity`，然后它才能正常运行（我知道这一点，因为我已将默认活动设置为清单中的活动），但我现在拥有的是从 xml 文件运行的选项卡。 ..这就是我所拥有的。

```
 th.setup();
        TabSpec specs = th.newTabSpec("tag0");
        specs.setContent(R.id.connecttionTab);
        specs.setIndicator("Connection Tab");
        th.addTab(specs);
        specs = th.newTabSpec("tag1");
        specs.setContent(R.id.tab1);
        specs.setIndicator("Zone Manager");
        th.addTab(specs);
        specs = th.newTabSpec("tag2");
        specs.setContent(R.id.tab2);
        specs.setIndicator("",res.getDrawable(R.drawable.ic_tab_vaccontrol));
        th.addTab(specs);
        specs = th.newTabSpec("tag3");
        specs.setContent(R.id.tab3);
        specs.setIndicator("Graphical Layout");
        th.addTab(specs); 
```

这是此选项卡正常工作需要启动的活动...

```
public class Tab3Activity extends Activity 
{
    private Tab3 mTab3;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab3);
        mTab3 = (Tab3) findViewById(R.id.tab3_display);
    }

    public void onAddZone(View view)
    {
        mTab3.addZone();
    }

} 
```

如何从诸如此类的 java 文件启动此选项卡，但其余部分仍从 XML 开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:16:33.140

您为要启动的活动分配一个意图到每个选项卡，如下所示：

```
Intent intent = new Intent().setClass(this, Tab3Activity.class);
TabSpec spec = tabHost.newTabSpec("Tab3").setIndicator("Tab3").setContent(intent);
tabHost.addTab(spec); 
```

这是我在有标签的主要活动中使用的。

# macos - 从 Interface Builder 中的表头中删除排序顺序？

> ID：10972775
> 
> 赞同：0
> 
> 时间：2012-06-10T22:19:18.493
> 
> 标签：macos, cocoa, interface-builder

我不小心单击了`NSTableView`Interface Builder (Xcode 4.3.2) 中的标题，这导致标题突出显示并显示特定列的搜索顺序指示器。我只是在保存并重新打开 xib 文件后才注意到这一点，所以我不能再撤消它了。

因此，`NSTableView`当我的应用程序启动时，已经有一个排序顺序，但我想留给用户来决定他是否想要对表格视图进行排序。

如何在 Interface Builder 中撤消此更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:45:33.077

我仍在使用 IB 3.2.6，但在这里可以暂时从表格列中删除排序键。之后您可以恢复它。

# ruby-on-rails - 使用质量分配的种子 has_many 关系

> ID：10972777
> 
> 赞同：1
> 
> 时间：2012-06-10T22:19:47.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, mass-assignment

这是我的两个模型：

```
class Article < ActiveRecord::Base
  attr_accessible :content
  has_many :comments
end

class Comment < ActiveRecord::Base
  attr_accessible :content
  belongs_to :article
end 
```

我正在尝试使用以下代码在 seed.rb 中播种数据库：

```
Article.create(
    [{
        content: "Hi! This is my first article!", 
        comments: [{content: "It sucks"}, {content: "Best article ever!"}]
    }], 
    without_protection: true) 
```

但是 rake db:seed 给了我以下错误信息：

```
rake aborted!
Comment(#28467560) expected, got Hash(#13868840)

Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

可以像这样播种数据库吗？

如果是，一个后续问题：我已经搜索了一些，似乎要进行这种（嵌套？）批量分配，我需要为我想要分配的属性添加“accepts_nested_attributes_for”。（对于 Comment 模型，可能类似于 'accepts_nested_attributes_for :article'）

有没有办法允许类似于'without_protection：true'？因为我只想在播种数据库时接受这种批量分配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T22:32:23.893

The reason you are seeing this error is that when you assign an associated model to another model (as in @article.comment = comment), it is expected that the right hand side be an actual object, not a hash of the object attributes.

If you want to create an article by passing in parameters for a comment, you need to include `accepts_nested_attributes_for :comments` in the article model and add `:comments_attributes` to the `attr_accesible` list.

This should allow for what you've written above.

I don't believe it is possible to have conditional mass-assignment as this might compromise security (from a design standpoint).

EDIT: You also need to change comments: `[{content: "It sucks"}, {content: "Best article ever!"}]` to `comments_attributes: [{content: "It sucks"}, {content: "Best article ever!"}]`

# php - 将 PHP 变量分配给 MySQL 数组

> ID：10972778
> 
> 赞同：-1
> 
> 时间：2012-06-10T22:20:01.557
> 
> 标签：php, mysql, arrays, variables, fetch

我知道有一个简单的答案，但我似乎无法把它放在一起。我在下面的代码中成功地从 MySQL 表中提取了一个数组，但我想为每个项目分配单独的 PHP 变量。

```
<?php
$con = mysql_connect("$hostname","$username","$password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("$database", $con);

$result = mysql_query("SELECT * FROM table WHERE state=1");

while($row = mysql_fetch_array($result))
  {
  $value=$row['id'];
  }

mysql_close($con);
?> 
```

当我运行这个循环时，我得到 id 的输出为 1、2、3、4、5、6、7。如何将单个 PHP 变量分配给这些值中的每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:22:48.203

您可以将变量放入数组中。

```
$values[] = $row['id']; 
```

然后将其引用为`$value[0]`, `$value[1]`...

还可以查看[列表](http://php.net/manual/en/function.list.php)，它允许您分配单个变量，就好像它们是一个数组一样。

# css - 返回一个 CSS 元素（用于边界检查）

> ID：10972784
> 
> 赞同：0
> 
> 时间：2012-06-10T22:20:41.680
> 
> 标签：css, html, adobe-edge

有没有办法返回一个 CSS 元素？

我使用 Adob​​e Edge 并在他们的代码选项卡中添加了一些我自己的代码，但为了创建边界，我需要跟踪 margin-top 或 margin-left。以下代码用于移动元素“woo”，但我不确定如何调用元素以添加类似“|| sym.$("woo").css({"margin-left">0px"} ) 到左移代码。

```
//Move RIGHT
if (e.which == 39) {
   sym.$("woo").css({"margin-left":"+=10px"});
}
//Move UP
else if (e.which == 38) {
    sym.$("woo").css({"margin-top":"-=10px"});
}
//Move Left
else if (e.which == 37) {
    sym.$("woo").css({"margin-left":"-=10px"});
}
//Move DOWN
else if (e.which == 40) {
    sym.$("woo").css({"margin-top":"+=10px"});
} 
```

编辑：

我将 Left if 语句更改为以下内容：

```
else if (e.which == 37 && ($("woo").css("margin-left")>0)) { 
```

它似乎在某种程度上起作用，除了现在它根本不会向左移动！我也尝试过 <0 以防我搞砸了一个标志，但它也不会让我将元素向左移动。

回答：

事实证明，返回值的语法与我想象的有点不同。要返回左边距而不是像我以前设置的那样使用破折号，我必须按照以下方式进行。

```
sym.$("woo").css('marginLeft') 
```

然后实际将其设为 int 并进行比较，我使用了它。

```
if(parseInt(sym.$("woo").css('marginTop'))>0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:22:02.827

您可以通过调用[`.css()`方法](http://api.jquery.com/css/)获取 CSS 属性的值：

```
$(...).css('margin-left') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T01:56:55.613

事实证明，返回值的语法与我想象的有点不同。要返回左边距而不是像我以前设置的那样使用破折号，我必须按照以下方式进行。

```
sym.$("woo").css('marginLeft') 
```

然后实际将其设为 int 并进行比较，我使用了它。

```
if(parseInt(sym.$("woo").css('marginTop'))>0) 
```

# python - 返回值应该是一个列表，但没有按预期返回？！- Python新手

> ID：10972787
> 
> 赞同：0
> 
> 时间：2012-06-10T22:20:59.880
> 
> 标签：python

这一定是一个非常简单的解决方案，在过去的一个小时里我一直没有想到。我尝试构建此测试函数，其中 test_cases 列表的返回值应与 test_case_answers 列表中的值匹配，但由于某种原因，测试用例 1 和测试用例 2 失败。当我打印测试用例的返回值时，它们会返回正确的答案，但由于某种原因，测试用例 1 和测试用例 2 返回 False。

```
import math

test_cases = [1, 9, -3]  
test_case_answers = [1, 3, 0]

def custom_sqrt(num):  
    for i in range(len(test_cases)):  
        if test_cases[i] >= 0:  
            return math.sqrt(test_cases[i])  
        else:  
            return 0

for i in range(len(test_cases)):  
    if custom_sqrt(test_cases[i]) != test_case_answers[i]:  
        print "Test Case #", i, "failed!"

custom_sqrt(test_cases) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:25:56.277

你循环的次数太多了。在`custom_sqrt`中，您尝试遍历所有测试用例，但您返回第一个测试用例的值，因此您永远不会到达其余部分。删除你的循环，`custom_sqrt`所以它只是：

```
def custom_sqrt(num):
    if num >= 0:
        return math.sqrt(num)
    else: 
        return 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:26:16.733

你的`custom_sqrt`函数需要一个整数列表，你给它一个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:36:35.350

将测试放在你的函数中可能不是一个好主意。完成后必须将其删除，然后该功能不再是您测试过的功能！

```
import math

def test_fn(fn, data):
    for inp, exp in data:
        outp = fn(inp)
        if outp == exp:
            print("  passed")
        else:
            print("*** FAILED: {}({}) returned {}, should be {}".format(fn.__name__, inp, outp, exp))

def custom_sqrt_a(num):
    try:
        return math.sqrt(num)
    except ValueError:
        return 0.

def custom_sqrt_b(num):
    if num < 0.:
        return 0.
    else:
        return math.sqrt(num)

custom_sqrt_test_data = [
    ( 1., 1.),
    ( 9., 3.),
    (-3., 0.)
]
test_fn(custom_sqrt_a, custom_sqrt_test_data)
test_fn(custom_sqrt_b, custom_sqrt_test_data) 
```

# java - 错误消息“无法解析或不是字段”

> ID：10972788
> 
> 赞同：0
> 
> 时间：2012-06-10T22:21:34.877
> 
> 标签：java, eclipse, interface

现在我正在研究责任链设计模式并使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)。

我正在尝试编译此代码，但出现编译错误“isLast 无法解析或不是字段”：

```
public class OverFive implements Discount {
    private Discount next; //
    public boolean isLast = false;

    public void setNext(Discount next, boolean Last) {
        this.next = next;
        this.next.isLast = Last; // Here is the error.
    }

    public double DoDiscount(Budget budget) {
        if (budget.getValue() > 500) {
            return budget.getValue() * 0.10;
        }
        if (this.next.isLast == false) {
            return next.DoDiscount(budget);
        }
        else {
            return 0;
        }
    }
} 
```

现在，这是界面：

```
public interface Discount {

    double DoDiscount(Orcamento orcamento);
        void setNext(Discount next, boolean Last);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:23:46.947

这里有一个建议：研究 Sun Java 编码标准并将它们牢记在心。在这个小代码示例中，您过于频繁地破坏它们。

Java 区分大小写：“折扣”与“折扣”不同；“dodiscount”与“DoDiscount”不同。

```
public interface Discount {

    double doDiscount(Orcamento orcamento);
    void setNext(Desconto next, boolean last);
    void setLast(boolean last);
} 
```

和实施：

```
public class OverFive implements Discount {
    private Desconto next;
    private boolean last = false;

    public void setLast(boolean last) {
        this.last = last;
    }

    public void setNext(Desconto next, boolean last) {
        this.next = next;
        this.setLast(last);
      }

    // this method is utter rubbish.  it won't compile.
    public double doDiscount(Orcamento budget){
        if (budget.getValue() > 500){
            return budget.getValue() * 0.10;
        }if (this.next.isLast == false){
            return next.discount(budget);
        }else{
            return 0;
        }   
    }
} 
```

我认为这段代码有点令人困惑。难怪你有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-06T02:04:22.463

我不确定这是否与上述问题相同，但我遇到了同样的错误。就我而言，我使用的是旧版本的 Eclipse，它显然不喜欢有一个与包同名的类。我通过给包一个不同的名称来解决这个问题。

# android - 如何在 TextView 上放置底部和左侧边框？

> ID：10972789
> 
> 赞同：2
> 
> 时间：2012-06-10T22:21:38.900
> 
> 标签：android

是否可以为文本视图绘制左边框和下边框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T23:12:04.247

您可以将 TextView 放在另一个布局中，其 XML 形状类似于以下：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
      <shape android:shape="rectangle">
            <solid android:color="@color/detailtable_border" />
        </shape>
   </item>

   <item android:left="1.5dp" android:right="1.5dp" android:bottom="2dp">
      <shape android:shape="rectangle">
        <solid android:color="@color/detailrow_bg_normal" />
      </shape>
   </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:45:57.483

您可以创建一个 9-path 作为您的 TextView 的 BG。那个 9-patch 将只有左边框和下边框，所以它会满足你的需要。您可以在此处阅读有关 9 补丁的更多信息：http: [//developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

您可以使用 SDK 上的 draw9patch 工具绘制自己的 9patch，或者从 Android 源代码中获取现有的 9patch，甚至从互联网上的其他地方获取，例如这个博客[http://android9patch.blogspot.co.il /](http://android9patch.blogspot.co.il/)其中也有一些关于如何创建 9 补丁的教程。

# java - apache openmeetings 与 JSP 的集成

> ID：10972790
> 
> 赞同：4
> 
> 时间：2012-06-10T22:21:45.370
> 
> 标签：java, jsp, video-conferencing, openmeetings

我想使用 apache openmeetings 构建一个 vido 会议解决方案，有人知道这样做的好教程吗？我也想将它与 JSP 集成。我在网上搜索，但似乎有一些资源。博客、书籍或文章被接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:22:50.793

你应该加入： http: [//incubator.apache.org/openmeetings/mail-lists.html](http://incubator.apache.org/openmeetings/mail-lists.html) 来讨论这个问题。

有一些例子：http: [//incubator.apache.org/openmeetings/SoapRestAPI.html](http://incubator.apache.org/openmeetings/SoapRestAPI.html) 我认为 Jira/Confluence 集成也使用 JSP/Servlets 来集成 Openmeetings。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T04:51:21.133

我没有任何相同的教程。但是您可以使用 REST API 通过 web 服务与 Openmeeting 连接。下面的问题本身会给你一些想法。[Apache Open Meeting 与 PHP 的集成](https://stackoverflow.com/questions/27258420/apache-open-meeting-integration-with-php/28446661#28446661)

# android - 选项卡中空 ListView 的消息 - Android

> ID：10972792
> 
> 赞同：3
> 
> 时间：2012-06-10T22:21:59.827
> 
> 标签：android, android-listview, android-tabhost, textview

我有一个带有列表视图和另一个活动的选项卡。那是我的代码：

```
TabHost tabHost = getTabHost();   
TabHost.TabSpec spec; 
Intent intent;

intent = new Intent().setClass(this, ListNoteActivity.class);
spec = tabHost.newTabSpec("list").setIndicator(getString(R.string.list), 
res.getDrawable(R.drawable.ic_tab_new)).setContent(intent);
tabHost.addTab(spec);

intent = new Intent().setClass(this, NewNoteActivity.class);
spec = tabHost.newTabSpec("view").setIndicator(getString(R.string.view),
res.getDrawable(R.drawable.ic_tab_new)).setContent(intent);
tabHost.addTab(spec);

tabHost.setCurrentTab(0); 
```

如果选项卡 0 中的列表为空，如何显示消息或 TextView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:46:33.710

在您的 ListActivity 中，将此布局设置为内容视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView android:id="@+id/android:list"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content">
    </ListView>

    <TextView android:id="@android:id/empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:text="No Items!"/>
</LinearLayout> 
```

如果列表视图为空，ListActivity 将自动显示文本视图。您的活动代码的其余部分保持不变。

# c++ - 对`_GetAdaptersAddresses@20'的未定义引用-但我包括了-liphlpapi

> ID：10972794
> 
> 赞同：9
> 
> 时间：2012-06-10T22:22:06.390
> 
> 标签：c++, c, winapi, gcc, cygwin

我正在使用`gcc`under编写一些代码，这些代码从我设置的高于所需的代码和我添加的链接器行`cygwin`中调用，但链接器仍然失败并显示以下消息：`GetAdaptersAddresses``iphlpapi.h``_WIN32_WINNT``0x0501``-liphlpapi`

```
gcc -liphlpapi build/obj/*.o -Wall -Wextra -o build/bin/asdf.exe src/asdf.cpp
/tmp/ccdjLPVY.o:asdf.cpp:(.text+0x153): undefined reference to `_GetAdaptersAddresses@20'
collect2: ld returned 1 exit status 
```

一些片段来自`asdf.cpp`：

```
#if _WIN32_WINNT < 0x0501
  #warning _WIN32_WINNT was set lower than 0x0501, fixing
  #undef _WIN32_WINNT
  #define _WIN32_WINNT 0x0501
#endif
#include <winsock2.h>
#include <iphlpapi.h> 
```

我知道他们在那里该死的：

```
strings /usr/i686-pc-mingw32/sys-root/mingw/lib/libiphlpapi.a  | sort | uniq | grep GetAdapters
__imp__GetAdaptersAddresses@20
__imp__GetAdaptersInfo@8
_GetAdaptersAddresses@20
_GetAdaptersInfo@8
GetAdaptersAddresses
GetAdaptersInfo

$strings /usr/lib/w32api/libiphlpapi.a  | sort | uniq | grep GetAdapters
__imp__GetAdaptersAddresses@20
__imp__GetAdaptersInfo@8
_GetAdaptersAddresses@20
_GetAdaptersInfo@8
GetAdaptersAddresses
GetAdaptersInfo 
```

有人看到我错过了什么吗？

## 编辑：回答

```
# Change the order, put the linker options last:
# Before:
gcc -liphlpapi build/obj/*.o -Wall -Wextra -o build/bin/asdf.exe src/asdf.cpp
# After:
gcc            build/obj/*.o -Wall -Wextra -o build/bin/asdf.exe src/asdf.cpp -liphlpapi 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T23:36:01.850

正如在[这个问题](https://stackoverflow.com/questions/10970356/undefined-reference-to-mysql-init)中所解释的，gcc 参数的顺序很重要。您需要将库包含移动到依赖它的对象之后。

所以`gcc build/obj/*.o -liphlpapi ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:00:08.660

尝试添加#pragma comment(lib, "Iphlpapi.lib")

# json - Groovy JsonBuilder：以随机顺序序列化的对象属性

> ID：10972795
> 
> 赞同：1
> 
> 时间：2012-06-10T22:22:17.970
> 
> 标签：json, groovy

我目前在使用 groovy JsonBuilder 时遇到问题：我尝试序列化的对象的属性以看似随机的顺序出现。

这是对象的类：

```
class Game {
    String title
    String gameImg2
    String description
} 
```

这是我一直在使用的代码：

```
def game = new Game(title: "a game", gameImg2: "an image", description: "desc")
def json = new JsonBuilder(game) 
```

由此我希望输出是：

```
{"title":"a game","gameImg2":"an image", "description":"desc"} 
```

但相反，我得到：

```
{"gameImg2":"gameImg","title":"hello","description":"desc"}. 
```

从[JsonBuilder 示例代码](http://groovy.codehaus.org/gapi/groovy/json/JsonBuilder.html)来看，似乎应该保持顺序，实际上，toJson 方法似乎迭代了 object.properties，它是一个 LinkedHashMap。我原以为这会按照它们在类中声明的顺序遍历属性。

我最好的猜测是，这与我对游戏对象的初始化有关 - 可以使用 Map 语法以某种方式分配属性，但同样，这似乎创建了一个应该保持顺序的 LinkedHashMap。

有没有人知道我在这里做错了什么或错误假设？任何线索都会有很大帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T22:55:52.047

问题是您正在将对象序列化为 JSON。该对象已声明转换为 Java 的字段。

在 Java 中，不可能（很容易）按照声明的顺序遍历字段，并且 JsonBuilder 代码绝对不会尝试允许这种行为。

查看 JsonBuilder 的源代码可以看到它使用了一个名为 JsonOutput.groovy 的类来序列化您传递给它的 Object，如下所示：

```
static String toJson(object) {
    if (object == null) {
        "null"
    } else if (object instanceof Collection ||
            object.class.isArray() ||
            object instanceof Iterator ||
            object instanceof Enumeration) {
        "[" + object.collect { toJson(it) }.join(',') + "]"
    } else if (object instanceof Enum) {
        '"' + object.name() + '"'
    } else {
        def properties = object.properties
        properties.remove('class')
        properties.remove('declaringClass')
        properties.remove('metaClass')
        toJson(properties)
    }
} 
```

如您所见，代码调用**返回**对象成员的对象的属性成员，字段的顺序取决于 JVM 而不是声明的顺序。

如果要保持顺序，则需要传入表示对象的映射或手动按顺序构建 JSON 对象。

另一种选择是编写自己的自定义构建器，这要复杂得多......

# asp.net - 在 PHP 中循环遍历数组以发布多个多部分表单数据

> ID：10972796
> 
> 赞同：2
> 
> 时间：2012-06-10T22:22:21.893
> 
> 标签：asp.net, post, loops, multipartform-data

我正在尝试在 asp Web 应用程序中编写一个函数，该函数将循环遍历多个上传表单中的文件列表并将它们一个一个发送。

这是可以在 ASP 中完成的事情吗？因为我已经阅读了一些关于如何将多个文件附加在一起的帖子，但没有看到关于循环文件的内容。我可以很容易地通过 HttpWebRequest 或使用套接字在 C# 中想象它，但在 php 中，我想已经有函数设计来处理它？

```
// This is false/pseudo-code :)

for (int index = 0; index < number_of_files; index++)
{
    postfile(file[index]);
} 
```

并且在每次迭代中，它应该发送一个多部分的表单数据 POST。

```
postfile(TheFileInfos) should make a POST like it:

POST /afs.aspx?fn=upload HTTP/1.1
[Header stuff]
Content-Type: multipart/form-data; boundary=----------Ef1Ef1cH2Ij5GI3ae0gL6KM7GI3GI3
[Header stuff]

------------Ef1Ef1cH2Ij5GI3ae0gL6KM7GI3GI3
Content-Disposition: form-data; name="Filename" myimage1.png
------------Ef1Ef1cH2Ij5GI3ae0gL6KM7GI3GI3
Content-Disposition: form-data; name="fileid"
58e21ede4ead43a5201206101806420000007667212251
------------Ef1Ef1cH2Ij5GI3ae0gL6KM7GI3GI3
Content-Disposition: form-data; name="Filedata"; filename="myimage1.png"
Content-Type: application/octet-stream
[Octet Stream] 
```

[编辑]

我会试试看：

```
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<form name="form1" enctype="multipart/form-data" method="post"     action="processFiles.php">
  <p>
  <?
  // start of dynamic form
  $uploadNeed = $_POST['uploadNeed'];
  for($x=0;$x<$uploadNeed;$x++){
      ?>
    <input name="uploadFile<? echo $x;?>" type="file" id="uploadFile<? echo $x;?>">
  </p>
  <?
  // end of for loop
  }
  ?>
  <p><input name="uploadNeed" type="hidden" value="<? echo $uploadNeed;?>">
    <input type="submit" name="Submit" value="Submit">
  </p>
</form>
</body>
    </html> 
```

# php - 忘记密码临时页面php

> ID：10972797
> 
> 赞同：-1
> 
> 时间：2012-06-10T22:22:36.327
> 
> 标签：php

正如我现在拥有的那样，任何用户都可以在 forgot.php 页面上键入电子邮件，如果电子邮件存在，则分配给该电子邮件密码的用户将被更改。我将如何更改我的代码，以便它向用户电子邮件发送一个链接，该链接指向他们更改密码的临时页面。我知道如何更改密码脚本，但如何创建指向临时页面的链接？

忘记了.php

```
echo "<div id='sign-parent-container'>
        <div class='form-title'>Forgotten Username/Password</div>
            <form action='/login' action='post' id='forgot-form'>
                <ul>
                <li>Type the email address you registered with, a link to a temporary page where you can change your password will be sent.</li>
                <li>
                    <ul>
                        <li><input type='text' name='email' value='Type Registered Email Here' class='signupfield-2' /><li>
                        <li style='display:none;'><span class='error'>This email doesn't exist</span></li>
                    </ul>
                </li>

                <li class='form-submit' data-type='forgot'><a>Request Password Change</a>
                <input type='hidden' name='forgot' value='1' /></li>
                </ul>
            </form>
        </div>"; 
```

/电子邮件

```
 $to = $email;
          $subject = "example - New Password Request.";
          $headers = "From: example.com";
          $server = "http://www.example.com";

          ini_set("SMTP",$server);
          $body="

          Hello $username,\r\r

          Your login details are below;\r\r

          Click the link below to change password:\r
          http://www.exmaple.com/temporarylink
           \n\n

          ";
          //function to send email

          mail($to, $subject, $body, $headers); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:06:41.260

首先，您需要在数据库中添加另一列，例如 passwordResetKey 当用户“忘记了我的密码”并输入他们的电子邮件时，不要更改密码，将 passwordResetKey 设置为随机生成的值。通过电子邮件发送电子邮件地址，其中包含指向重置页面的链接，其中包含电子邮件地址和密钥，例如 forgot.php?email=example@example.org&key=hsdf39SD

一旦用户更改密码，就会将 forgotPasswordKey 字段重置为空。

您可能还想添加一个日期字段，以便密码重置密钥仅在 24 小时左右有效。

# jquery - jquery中的三元符号是什么？

> ID：10972798
> 
> 赞同：5
> 
> 时间：2012-06-10T22:22:38.130
> 
> 标签：jquery

我正在尝试调试某人的代码，并遇到了这个：

```
$$$.ajax({
    url: ajax_url + param,
    context: $("#formDialog"),
    success: function(data) {
        this.html(data);
        BindPopupFormEvents(this, title, reload);
    }
}, $$$.ajax.PARTAIL_UPDATE, $mainWrapper);​ 
```

我们正在使用 jquery 库，但我以前从未见过三元符号，我不知道它是什么......有什么建议吗？

**编辑**

后来我发现了这个：

```
$$$.fn = $$$.prototype = {
    init: function(jQuery, test) {},
    CONST: CONST
};​ 
```

我们只使用 jquery 库，并且在大多数代码中使用单个美元符号。

你能用简单的英语解释一下三元符号的作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T22:23:18.873

它只是对象的别名`jQuery`，就像`$`. 就这样...

可以用手或用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)

例子：

```
var $$$ = jQuery.noConflict();
var bla = jQuery.noConflict(); 
```

现在两者`$$$`都是对象`bla`的别名`jQuery`。

> 许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

* * *

**编辑以反映您的编辑：**

虽然我只看到了一小部分代码，但`$$$.fn = $$$.prototype`看起来很傻，就像...`jQuery.fn`的别名一样`jQuery.prototype`

从源代码：

```
jQuery.fn = jQuery.prototype 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:25:15.747

`$$$`只是一个[另一个] JavaScript 标识符。

该属性`$$$`不是由 jQuery 定义的，但大概有人做了这样的事情*：*

```
$$$ = jQuery.noConflict(); 
```

也许是为了避免覆盖`$`另一个库中的 a 。虽然我发现它非常可怕并且会选择只绑定`$`到`jQuery`闭包中：

```
;(function myStuff ($, evil$) {
   // do stuff with $ (jQuery) and "the other $"
})(jQuery, $) // <-- keep us real 
```

# rest - .net 中的 oauth 1.0 实现示例

> ID：10972803
> 
> 赞同：0
> 
> 时间：2012-06-10T22:23:19.697
> 
> 标签：rest, oauth, azure, acs

我目前正在研究一种安全架构，以保护移动应用程序使用的基于休息的服务。我们目前正在使用 oAuth 2.0 和 windows azure ACS - 基本上从 ACS 获取 swt 并将其传递给 http 请求的授权标头中的 api。我知道 oAuth 2.0 对开发人员来说要简单得多，但令牌不如使用 oauth 1.0 协议那样安全。有人可以指出我如何在.net 中实现 oauth 1.0 的示例/教程的方向吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:13:37.517

根据我的经验，ACS 不支持 OAuth 1.0。它支持 OAuth 2.0 和 OAuth WRAP。推荐使用 OAuth 2.0。

> > 我知道 oAuth 2.0 对开发人员来说要简单得多，但令牌不如使用 oauth 1.0 协议那样安全。

我想知道你在哪里读到的 2.0 不如 1.0 安全。根据[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27)：

此规范**替换并废弃**了 RFC 5849 中描述的 OAuth 1.0 协议。

此致，

明旭。

# clojure - Clojure：将“扩展”可选参数传递给函数

> ID：10972805
> 
> 赞同：5
> 
> 时间：2012-06-10T22:23:29.280
> 
> 标签：clojure, arguments, sequence, keyword, optional

我是 Clojure 的新手，我一直坚持如何“扩展”函数的可选参数，以便可以将它们发送到另一个使用可选参数的函数（但希望这些参数作为关键字而不是关键字序列）。

我正在解析 xml，如果我硬编码值如下，我的函数有效，它会遍历 xml 并找到“标题”的值：

```
; zd was required like this
[clojure.data.zip.xml :as zd]
; ...
(defn get-node-value [parsed-xml & node-path]
  (zd/xml-> (zip/xml-zip parsed-xml) :item :title zd/text))

(get-node-value parsed-xml) 
```

我想要做的是使用'node-path'来传递任意数量的关键字，但是当写如下时，它以关键字序列的形式出现，因此会引发异常：

```
(defn get-node-value [parsed-xml & node-path]
  (zd/xml-> (zip/xml-zip parsed-xml) node-path zd/text))

(get-node-value parsed-xml :item :title)
; ClassCastException clojure.lang.ArraySeq cannot be cast to clojure.lang.IFn  clojure.data.zip/fixup-apply (zip.clj:73) 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T23:24:15.987

我认为您正在寻找申请（http://clojuredocs.org/clojure_core/clojure.core/apply）

```
(defn get-node-value [parsed-xml & node-path]
  (let [params (concat node-path [zd/text])]
    (apply zd/xml-> (zip/xml-zip parsed-xml) params))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T00:09:32.247

*也许*你想要：

```
(defn get-node-value [parsed-xml & node-path]
  (zd/xml-> (zip/xml-zip parsed-xml) ((apply comp (reverse node-path))) zd/text)) 
```

我无法测试上述内容，因此正在类比工作：

```
(-> {:a {:c 1}, :b 2} ((apply comp (reverse [:a :c]))))
1 
```

但是，如果 dAni 的解决方案有效，请忽略我！

# java - 骰子仿真 - 循环中的 onClickListener

> ID：10972806
> 
> 赞同：0
> 
> 时间：2012-06-10T22:23:44.080
> 
> 标签：java, android, loops, onclick

我正在为移动应用程序类开发 Yahtzee 程序，但遇到了一些麻烦。即使只按下一次 onClick()，我编写的循环也会运行循环（13 圈和 3 卷）。我已将它们移动到几个不同的订单中，但我似乎无法正确处理。有人可以指导我正确的方向，让 onClick 准确地记录转弯和滚动吗？

**代码**

```
import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;

public class Yahtzee4Activity extends Activity {
    /** Called when the activity is first created. */

    ImageButton dice1, dice2, dice3, dice4, dice5;
    Button roll, begin;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 
        PlayGame();        
    }

    public void PlayGame()  
    {  
        final Random rand = new Random(); 

        final int MAX_TURNS = 13;
        final int MAX_ROLLS = 3;

        dice1 = (ImageButton)findViewById(R.id.btndice1);  
        dice2 = (ImageButton)findViewById(R.id.btndice2); 
        dice3 = (ImageButton)findViewById(R.id.btndice3); 
        dice4 = (ImageButton)findViewById(R.id.btndice4); 
        dice5 = (ImageButton)findViewById(R.id.btndice5);

        final ImageButton[] dice = {dice1, dice2, dice3, dice4, dice5}; //array of buttons (dice)
        final int [] diceValue = new int [5];
        final boolean [] isHeld = {false, false, false, false, false};  // array of dice to be held (hold)

        roll = (Button)findViewById(R.id.btnroll);
        begin = (Button)findViewById(R.id.btnbegin);        

        roll.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v ) {   
                RollDice(dice, diceValue, isHeld, rand);    
            }
        });

        int turnNum = 0;
        for (int i = 0; i < MAX_TURNS; i++) {

            int rollNum = 0;
            for (int j = 0; j < MAX_ROLLS; j++) {                   
                rollNum++;
                roll.setText("Roll (" + (MAX_ROLLS - rollNum) + " Remaining)");
            }
            turnNum++;      
            ScoreDice();                
        }  
    }

    private void ScoreDice() {
        // TODO Auto-generated method stub

    }

    public int[] RollDice(ImageButton [] dice, int [] diceValue, boolean [] isHeld, Random rand)
    {
        for (int i = 0; i < dice.length; i++) {
            if (!isHeld[i]) {
                int rndInt = rand.nextInt(6) + 1; // Random number between 1 and 6          
                String imgName = "die" + rndInt;                    
                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
                diceValue[i] = rndInt;
                dice[i].setImageResource(id);  //Loops through the dice array and sets the appropriate dice images based on individual randoms
            } else {
                //do nothing                        
            }
        }
        return diceValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:59:30.597

它只是循环遍历所有的滚动和转弯，因为您没有告诉它不这样做。我建议将您的大部分代码移至 RollDice(...)。为了使下面的示例正常工作，您需要创建 rollNum、turnNum、MAX_TURNS、MAX_ROLLS 实例变量而不是局部变量，例如：

```
ImageButton dice1,dice2,dice3,dice4,dice5;
Button roll, begin;
private final int MAX_TURNS = 13;
private final int MAX_ROLLS = 3;
private int turnNum = 0;
private int rollNum = 0; 
```

然后从 PlayGame 中删除回合代码并将其放入 RollDice 中，如下所示：

```
public int[] RollDice(ImageButton [] dice, int [] diceValue, boolean [] isHeld, Random rand)
{
    for (int i = 0; i < dice.length; i++) {
        if (!isHeld[i]) {
            int rndInt = rand.nextInt(6) + 1; // Random number between 1 and 6          
            String imgName = "die" + rndInt;                    
            int id = getResources().getIdentifier(imgName, "drawable", getPackageName());   
            diceValue[i] = rndInt;
            dice[i].setImageResource(id);  //Loops through the dice array and sets the appropriate dice images based on individual randoms
        } else {
            //do nothing                        
        }
    }

    rollNum ++;
    if(rollNum >= MAX_ROLLS){
        //Turn is over
        turnNum ++;
        ScoreDice();
    else {
        roll.setText("Roll (" + (MAX_ROLLS - rollNum) + " Remaining)");
    }

    return diceValue;
} 
```

我认为值得指出的是，你的 java 代码风格可以做一些修改，例如，通常认为类名应该以大写字母开头，方法名应该以小写字母开头。完全取决于你的粗略，但如果你开始与其他程序员合作，你刚开始时的良好习惯将有助于进一步走下去

# java - 为 AI 路径存储节点坐标

> ID：10972811
> 
> 赞同：1
> 
> 时间：2012-06-10T22:24:33.850
> 
> 标签：java, game-ai

我目前正在开发一款游戏，但遇到了一些问题。

我正在研究一种算法，该算法将为游戏中的 AI 角色创建一条路径。这是一款自上而下的冒险游戏，AI 会在 50 x 50 的地图上选择一个随机位置，然后在考虑障碍物的情况下选择最短路径。

我最初有它是为了让 AI 使用 0-3 来确定如何移动。如果它是 0，它们向上移动，1，向右等。现在我正在尝试使用 A* 算法来创建移动列表。一旦他们到达，他们将选择一个新的目的地，这个过程将重复。

我遇到的问题是存储正方形。据我了解，您需要一个封闭列表和一个开放列表。我计划为这些使用链表，然后最终使用第三个链表来存储要遵循的路径。

问题是我需要同时存储 x 和 ay 坐标。我以为我可以为每个列表使用两个列表，但这似乎效率低下。

顺便说一句，我正在使用Java对其进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:32:45.293

无需为每个坐标设置列表，只需将 x 和 y 包装到一个类中。您可以使用[Point](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Point.html)类或自己存储 x 和 y 并实施比较以帮助您进行 A* 搜索。您还可以查看[Implementation of A Star (A*) Algorithm in Java](https://stackoverflow.com/questions/4624924/implementation-of-a-star-a-algorithm-in-java)

# php - PHP自定义错误问题

> ID：10972812
> 
> 赞同：-3
> 
> 时间：2012-06-10T22:24:37.827
> 
> 标签：php, scripting

目前，我有这个代码：

```
<?php
if (isset($_GET['s'])) {
    $itemid = $_GET['s'];
    $search = "$itemid";
    $query  = ucwords($search);
    echo "<title>Results for $query</title>";
    $string = file_get_contents('http://clubpenguincheatsnow.com/tools/newitemdatabase/items.php');
    if ($itemid == "") {
        echo "Please fill out the form.";
    } else {
        echo '<div id="content">';
        $string = explode('<br>', $string);
        foreach ($string as $row) {
            preg_match('/^(.+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);
            if (preg_match("/$query/i", "$matches[1]")) {
                echo "<a href='http://clubpenguincheatsnow.com/tools/newitemdatabase/info.php?id=$matches[2]'>";
                echo $matches[1];
                echo "</a><br>";
            }
        }
        echo '</div>';
    }
} else {
    echo "Item does not exist!";
}
?> 
```

如果“$matches[1]”里面什么都没有，我希望我的代码回显“项目不存在！” 我该怎么做呢？请帮忙！

我以前尝试过类似的`if ($matches[1]=="") { echo "Item does not exist!"; }`方法，但是没有用。这就是我得到的：

[http://img685.imageshack.us/img685/998/28990b2c12d0423292d3574.png](http://img685.imageshack.us/img685/998/28990b2c12d0423292d3574.png)

看看效果好吗？看看如果 $matches[1] 确实存在会发生什么：

[http://img528.imageshack.us/img528/3690/71472c9de6ec49118ee8d48.png](http://img528.imageshack.us/img528/3690/71472c9de6ec49118ee8d48.png)

它仍然出现！我怎样才能使我的代码只有在没有 $matches[1] 的情况下才回显错误？请帮我！

如果您想知道，这是我添加时的代码`if ($matches[1]=="") { echo "Item does not exist!"; }`：

```
<?php
if (isset($_GET['s'])) {
    $itemid = $_GET['s'];
    $search = "$itemid";
    $query  = ucwords($search);
    echo "<title>Results for $query</title>";
    $string = file_get_contents('http://clubpenguincheatsnow.com/tools/newitemdatabase/items.php');
    if ($itemid == "") {
        echo "Please fill out the form.";
    } else {
        echo '<div id="content">';
        $string = explode('<br>', $string);
        foreach ($string as $row) {
            preg_match('/^(.+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);
            if (preg_match("/$query/i", "$matches[1]")) {
                echo "<a href='http://clubpenguincheatsnow.com/tools/newitemdatabase/info.php?id=$matches[2]'>";
                echo $matches[1];
                echo "</a><br>";
            }
        }
        echo '</div>';
        if ($matches[1] == "") {
        echo "Item does not exist!";
        }
    }
} else {
    echo "Item does not exist!";
}
?> 
```

对我的问题的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:34:32.690

Look at PHP's [comparison operators](http://www.php.net/manual/en/types.comparisons.php)

```
if (empty($matches[1])) { echo "Item does not exist!"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:38:23.640

```
else { 
    echo "Item does not exist!"; 
} 
```

This "else" is in regards to `isset($_GET['s'])`. Is there a variable called `s` in your query string? If there isn't, then it's normal that you get the message.

Maybe you put that `else` block in the wrong place?

# spring - Valkyrie RCP 教程和指南

> ID：10972813
> 
> 赞同：1
> 
> 时间：2012-06-10T22:25:08.490
> 
> 标签：spring, rcp, spring-rcp

有人听说过 Valkyrie RCP，即当前 Spring 富客户端代码库的 Spring 3.0 端口吗？

我想尝试一下这个框架，因为我熟悉 Spring，但是我在互联网上没有找到任何关于它的教程，我在哪里可以找到一些文档和指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:57:19.803

[我在Valkyrie RPC@github](https://github.com/cmadsen/Valkyrie-RCP/)积极维护 Valkyrie RCP 。

[您可以在此处](http://cmadsen.github.com/Valkyrie-RCP/)找到 Valkyrie RPC 的文档，并且在存储库中有相当多的演示应用程序。

要快速开始使用 maven 生成这样的骨架项目：

```
mvn archetype:generate
-DarchetypeGroupId=org.valkyriercp
-DarchetypeArtifactId=valkyrie-rcp-archetype
-DarchetypeVersion=1.1-SNAPSHOT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:40:53.873

我认为 Valkyrie RCP 项目已经死了。但我不确定。

事实上，这里有这个项目的一个分支：[ndeverge](https://github.com/ndeverge/Valkyrie-RCP)。

有一些文档。

有人有关于这个项目的另一个消息。我也很感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:49:13.857

如果您对富客户端应用程序感兴趣，您可能想看看[Eclipse Scout](http://www.eclipse.org/scout/)。它基于 Java/Eclipse，可在 EPL 下使用。

Scout 主要致力于构建客户端服务器业务应用程序。通过将客户端 ui 模型与实际的 ui 呈现完全分离，您可以选择使用 SWT、Swing 或 Web 应用程序（基于 Eclipse RAP）运行您的应用程序。

有[视频教程](http://wiki.eclipse.org/Scout/Overview/Screencasts)、[wiki 教程](http://wiki.eclipse.org/Scout/Tutorial)和问题[论坛](http://www.eclipse.org/forums/index.php?t=thread&frm_id=174)。

玩得开心！

# c++ - 如何使用 boost::log::BOOST_TRIVIAL_LOG 更改默认格式？

> ID：10972818
> 
> 赞同：13
> 
> 时间：2012-06-10T22:25:33.860
> 
> 标签：c++, boost

boost::log 看起来非常强大。它为琐碎的日志记录提供了一个 BOOST_LOG_TRIVIAL 宏。但是如何更改默认格式？它默认打印时间戳，我不想要它。你有什么主意吗？似乎唯一的方法是先定义一个新的接收器并将其添加到核心，然后您可以在后端调用 set_format() 以防万一。但这不再是“微不足道的”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-04T15:27:49.760

Boost.Log 有一个默认的 sink，只要你不提供自己的 sink 就可以使用它。以下代码片段通过添加新接收器来更改控制台日志的格式。

```
#include <boost/log/trivial.hpp>
#include <boost/log/utility/setup/console.hpp>

int main()
{
    boost::log::add_console_log(std::cout, boost::log::keywords::format = ">> %Message%");
    BOOST_LOG_TRIVIAL(info) << "Hello world!";
} 
```

请注意，您必须将 log_setup 库添加到您的构建中，即执行

```
-lboost_log_setup -lboost_log 
```

库的顺序很重要的地方。

# matlab - MCR libmwi18n.so 文件丢失

> ID：10972819
> 
> 赞同：1
> 
> 时间：2012-06-10T22:25:40.117
> 
> 标签：matlab, shared-libraries, matlab-compiler, mcc

我刚刚安装了 Matlab MCR，并尝试运行一段代码：

```
./run_test.sh /usr/local/MATLAB/MATLAB_Compiler_Runtime/ 
```

我得到这个错误作为回报：

```
LD_LIBRARY_PATH is .:/usr/local/MATLAB/MATLAB_Compiler_Runtime//runtime/glnxa64:/usr/local/MATLAB/MATLAB_Compiler_Runtime//bin/glnxa64:/usr/local/MATLAB/MATLAB_Compiler_Runtime//sys/os/glnxa64:/usr/local/MATLAB/MATLAB_Compiler_Runtime//sys/java/jre/glnxa64/jre/lib/amd64/native_threads:/usr/local/MATLAB/MATLAB_Compiler_Runtime//sys/java/jre/glnxa64/jre/lib/amd64/server:/usr/local/MATLAB/MATLAB_Compiler_Runtime//sys/java/jre/glnxa64/jre/lib/amd64/client:/usr/local/MATLAB/MATLAB_Compiler_Runtime//sys/java/jre/glnxa64/jre/lib/amd64

./test: error while loading shared libraries: libmwi18n.so: cannot
 open shared object file: No such file or directory 
```

有谁知道为什么 libmwi18n.so 不见了？我怎样才能找到它/修复这个错误？

编辑：下面是 run_test.sh 的内容。它是使用 MCC 编译的，非常基础。

```
#!/bin/sh
# script for execution of deployed applications
#
# Sets up the MCR environment for the current $ARCH and executes
# the specified command.
#
exe_name=$0
exe_dir=`dirname "$0"`
echo "------------------------------------------"
if [ "x$1" = "x" ]; then
  echo Usage:
  echo    $0 \<deployedMCRroot\> args
else
  echo Setting up environment variables
  MCRROOT="$1"
  echo ---
  LD_LIBRARY_PATH=.:${MCRROOT}/runtime/glnxa64 ;
  LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRROOT}/bin/glnxa64 ;
  LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRROOT}/sys/os/glnxa64;
        MCRJRE=${MCRROOT}/sys/java/jre/glnxa64/jre/lib/amd64 ;
        LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/native_threads ;
        LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/server ;
        LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/client ;

       LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE} ;
  XAPPLRESDIR=${MCRROOT}/X11/app-defaults ;
  export LD_LIBRARY_PATH;
  export XAPPLRESDIR;
  echo LD_LIBRARY_PATH is ${LD_LIBRARY_PATH};
  shift 1
  args=
  while [ $# -gt 0 ]; do
      token=`echo "$1" | sed 's/ /\\\\ /g'`   # Add blackslash before each blank
      args="${args} ${token}"
      shift
  done
  "${exe_dir}"/test $args
fi
exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:48:39.193

路径不完整。命令需要是：

```
./run_test.sh /usr/local/MATLAB/MATLAB_Compiler_Runtime/v717/ 
```

# python - 在 IconView (PyGtk) 中重新排序

> ID：10972821
> 
> 赞同：0
> 
> 时间：2012-06-10T22:25:42.943
> 
> 标签：python, pygtk

使用 PyGtk 的 IconView，我可以通过调用将图标设置为可重新排序`gtk.IconView.set_reorderable(True)`。我的问题是检索新订单的最佳方式是什么？也就是说，我应该如何以新顺序访问每个元素的属性？各种迭代器？

我正在使用 gtk.ListStore 来存储数据。

我知道这听起来可能微不足道，但我几乎没有 Python 或 PyGtk（或一般的 GTK）方面的经验，所以我想知道正确的方法！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:37:20.573

所以，我现在明白了：事实证明，当项目被重新排序时`IconView`，`gtk.ListStore.reorder`或者类似的东西被调用。这意味着我需要做的就是使用`gtk.ListStore.get_iter()`或`gtk.ListStore.get_iter_first()`解决所有问题。

多么微不足道！我需要做的就是吃掉它似乎。

# ruby-on-rails-3 - 尝试在我的 Rails 3 应用程序中编写“积分”系统

> ID：10972822
> 
> 赞同：0
> 
> 时间：2012-06-10T22:25:43.380
> 
> 标签：ruby-on-rails-3, default-value, points

`Rails 3.2.3`

我正在尝试向我的 Rails 应用程序添加“点”功能。这个想法很简单，如果你点击`UP`你的积分会增加 1。如果你点击`DOWN`你的积分会减少 1。但由于某种原因，积分不会改变，我创建的每个新链接都会增加 10。

我的迁移文件中的点默认为 0（但它们从不显示为零）

```
t.column :points, :integer, :default => 0` 
```

这是我的视图代码的一部分

```
<td>
  <%= link_to "Up",
                    :url => { :action => 'modify_points',
                               :id => link.id,
                               :by => 1 }, 
                               :remote => true,
                    :update => "link" + link.id.to_s %>
</td>
<td>
  <%= link_to "Down",
                    :url => { :action => 'modify_points',
                              :id => link.id,
                              :by => -1 },
                              :remote => true,
                    :update => "link" + link.id.to_s %>

</td>

<td>
  <b> <a href="<%= link.url %>"> <%= link.description %> </a> </b>
  (<%= if link.url =~ /:\/\/([^\/]*)/ then $1 else "wrong URL" end %>) <br/>
  <span id="link"><%= link.id.to_s %><%= link.points %> </span>
  points posted <%= time_ago_in_words link.created_at %> ago
</td> 
```

这是我`modify_points`在 links_controller.rb 中的方法：

```
 def modify_points
      @link = Link.find(params[:id])
      @link.update_attribute :points, @link.points + params[:by].to_i if params[:by] =~ /[+|-]?1/
      render_text @link.points
    end 
```

现在，我第一个提交的链接有 10 分，我的第 2 个链接有 20 分，我的第 3 个链接有 30 分……等等……等等……而`UP`&`DOWN`链接什么也不做。为什么我看不到默认点值 0？方法中的正则表达式代码是否会`modify_points`导致这些错误？

****编辑：这是我按下 UP 链接时的 RAILS 服务器日志****

```
Processing by LinksController#submissions as HTML
   (0.1ms)  SELECT COUNT(*) FROM "links" 
  Link Load (0.3ms)  SELECT "links".* FROM "links" LIMIT 20 OFFSET 0
  Rendered links/submissions.html.erb within layouts/application (145.9ms)
Completed 200 OK in 435ms (Views: 316.5ms | ActiveRecord: 9.4ms)

Started GET "/assets/links.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:49 -0700
Served asset /links.css - 304 Not Modified (8ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:51
 -0700
Served asset /application.js - 304 Not Modified (9ms)

Started GET "/assets/defaults.js" for 127.0.0.1 at 2012-06-11 10:08:51 -0700
Served asset /defaults.js - 404 Not Found (3ms)

ActionController::RoutingError (No route matches [GET] "/assets/defaults.js"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

  Rendered /Users/accraze/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:51 -0700
Served asset /application.css - 304 Not Modified (4ms)

 Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:51 -0700
Served asset /jquery.js - 304 Not Modified (4ms)

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:51-0700
Served asset /scaffolds.css - 304 Not Modified (3ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:51-0700
Served asset /jquery_ujs.js - 304 Not Modified (3ms)

Started GET "/assets/links.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:51 -0700
Served asset /links.js - 304 Not Modified (2ms)

Started GET "/?remote=true&update=link4&url%5Baction%5D=modify_points&url%5Bby%5D=1&url%5Bid%5D=4" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Processing by LinksController#submissions as HTML
  Parameters: {"remote"=>"true", "update"=>"link4", "url"=>{"action"=>"modify_points", "by"=>"1", "id"=>"4"}}
   (0.2ms)  SELECT COUNT(*) FROM "links" 
  Link Load (0.2ms)  SELECT "links".* FROM "links" LIMIT 20 OFFSET 0
  Rendered links/submissions.html.erb within layouts/application (14.7ms)
Completed 200 OK in 21ms (Views: 20.4ms | ActiveRecord: 0.4ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Served asset /application.css - 304 Not Modified (0ms)

 Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:54-0700
Served asset /scaffolds.css - 304 Not Modified (0ms)

Started GET "/assets/links.css?body=1" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Served asset /links.css - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:54-0700
Served asset /application.js - 304 Not Modified (0ms)

Started GET "/assets/links.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Served asset /links.js - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/defaults.js" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
Served asset /defaults.js - 404 Not Found (4ms)

ActionController::RoutingError (No route matches [GET] "/assets/defaults.js"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /Users/accraze/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

  Rendered /Users/accraze/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/actionpa
ck-3.2.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb with
in rescues/layout (0.8ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-06-11 10:08:55-
0700
Served asset /jquery_ujs.js - 304 Not Modified (0ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:57:40.987

好吧，您的链接不符合您的要求 - 正如您从日志中看到的那样：

```
Processing by LinksController#submissions as HTML
Started GET "/?remote=true&update=link4&url%5Baction%5D=modify_points&url%5Bby%5D=1&url%5Bid%5D=4" for 127.0.0.1 at 2012-06-11 10:08:54 -0700
  Processing by LinksController#submissions as HTML
  Parameters: {"remote"=>"true", "update"=>"link4", "url"=>{"action"=>"modify_points", "by"=>"1", "id"=>"4"}} 
```

它将您的 :url 视为普通参数，并将其传递给 LinksController#submissions。您可能应该使用基于路由的助手？像这样的东西，取决于你的路线是什么样的：

```
<%= link_to('UP', link_modify_points_path(link, :by => 1), :remote => true) %> 
```

# mysql - 来自 2 个表的 MySQL 2 列

> ID：10972823
> 
> 赞同：0
> 
> 时间：2012-06-10T22:25:48.920
> 
> 标签：mysql

实际上，我认为应该没问题，但事实并非如此

```
SELECT animize_users.username, animize_profile.avatar 
FROM animize_users, animize_profile 
WHERE `animize_profile.userid` = 1 AND `animize_users.id` = 1 
LIMIT 0 , 1 
```

请不要告诉我把它放在一个单独的查询中 - 因为我不想打不必要的电话......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T22:41:52.860

如果不需要，只需完全删除引号，即

```
SELECT animize_users.username, animize_profile.avatar FROM animize_users au join animize_profile ap on ap.userid = au.id WHERE au.id = 1 
```

如果您对用户 ID 进行了正确的 PK，则用户不应重复，并且真正限制 1 只会影响您对个人资料的选择。我建议添加到 where 以确保您获得最合适的个人资料。

此外，如果“动画化”是您的产品，请不要在表格前加上它，这是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:29:49.887

在正确使用反引号的情况下尝试这种方式：

```
SELECT animize_users.username, animize_profile.avatar 
FROM animize_users, animize_profile 
WHERE `animize_profile`.`userid` = 1 AND `animize_users`.`id` = 1 
LIMIT 0 , 1 
```

# python - 如何从指定位置的二进制文件中读取一个且仅一个字节？

> ID：10972827
> 
> 赞同：3
> 
> 时间：2012-06-10T22:26:00.633
> 
> 标签：python, byte, binary-data, binaryfiles

我想知道是否有可能在 python 中一次读取一个给定位置的一个字节。我知道，但我想要返回我指定的字节并且只返回我指定的字节的东西。如果我写：，它会读取文件的前 10 个字节。`file.read(`*`any number`*`)``file.read(10)`

我怎么说*read byte 10 并且只返回 byte 10*？（这必须适用于所有大于一的数字）另外，请不要上课！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T22:28:56.687

使用 seek 和 read，如下所示应该允许您在给定位置读取一个字节：

```
f.seek(10)
f.read(1) 
```

# android - 如何使应用程序以全屏模式运行？

> ID：10972833
> 
> 赞同：3
> 
> 时间：2012-06-10T22:26:38.543
> 
> 标签：android, fullscreen, trigger.io, forge

我刚开始使用锻造，它摇摆不定（到目前为止）:)

使用 trigger.io (Forge) 如何使应用程序以全屏模式运行？

我还没有在文档中找到这样做的方法。

我知道我可以手动编辑 Android 清单以包含

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

但这并不是一个真正可行的解决方案。

trigger.io/forge 是否有一种简单的方法来指定全屏应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:17:02.837

你的意思是能够有效地隐藏状态栏？

我们对此有几个要求：我们正在将其作为一个故事进行跟踪，并计划在接下来的 3 周内完成 - 我会及时通知您！

**更新：**由于 v1.4 Trigger.io 有一个提供全屏选项的显示模块：http: [//docs.trigger.io/en/v1.4/modules/display.html](http://docs.trigger.io/en/v1.4/modules/display.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:15:50.667

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

# python - 为什么我不能写入在 python 中打开的文件？

> ID：10972843
> 
> 赞同：0
> 
> 时间：2012-06-10T22:28:50.057
> 
> 标签：python

我打开了 python 解释器并尝试写入我正在阅读的文件：

```
file = open("foo.txt")
lines = file.readlines()
for i in range(0, 3):
    file.write(lines[0]) 
```

但是，python 发出了一个错误，指出我在尝试执行时有一个错误的文件处理程序`file.write(lines[0])`。为什么我不能将文件的第一行写入文件本身？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T22:30:11.520

为了写入文件，需要以*写入*或*读/写*模式打开文件

```
file = open("foo.txt", "r+")  # reading and writing to file 
```

或者

```
file = open("foo.txt", "w")   # writing only to file 
```

如果您打开文件但未指定模式，则默认情况下它处于*读取*模式，因此您打开文件是为了“读取”，但正试图“写入”它。

有关更多信息，请参阅[阅读和编写文件](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)Python 文档。@Mizuho 还推荐了这个关于[Python File IO](http://www.tutorialspoint.com/python/python_files_io.htm)的页面，它对可用的各种模式进行了很好的总结。

# python - 我可以在分叉新进程之前初始化 tornado IOLoop.instance 吗？

> ID：10972845
> 
> 赞同：2
> 
> 时间：2012-06-10T22:28:54.833
> 
> 标签：python, multiprocessing, tornado

我可以初始化一个 IOLoop.instance 并派生使用 IOLoop.instance() 的新进程吗？就像是：

```
#some code which initializes IOLoop.instance()           (1)
storage - Storage()
...
def f(storage):
    """some ioloop worker, which uses IOLoop.instance()"""
    storage.db_client.send(some value)
    ...

p1 = Process(target=f, args=(storage,))
p2 = Process(target=f, args=(storage,)) 
```

IOLoop[文档](http://tornado.readthedocs.org/en/latest/ioloop.html)没有说明多线程使用 IOLoop，但[tornado.process.fork_processes 文档](http://tornado.readthedocs.org/en/latest/process.html#tornado.process.fork_processes)禁止在分叉之前初始化 IOLoop。

关键是 (1) 中的代码创建了`storage`由 function 使用的对象`f`。包含异步数据库客户端，`storage`假设使用与工作进程相同的 ioloop。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:25:00.190

在[询问](https://groups.google.com/forum/#!topic/python-tornado/XZdAtVnt3ng)tornado用户组后，我收到了答案，我不能在子进程中使用父进程创建的IOLoop。解决方案非常简单：

```
def f(storage):
    """some ioloop worker, which uses IOLoop.instance()"""
    # worker code starts here
    del IOLoop._instance

    # here we can safe use IOLoop
    IOLoop.instance().add_callback(...)
    storage.db_client.send(some value) 
```

# c# - 如何按位操作十六进制值？

> ID：10972850
> 
> 赞同：13
> 
> 时间：2012-06-10T22:29:28.743
> 
> 标签：c#, bitwise-operators, hex

我对按位运算符有一个非常基本的了解。但是，我不知道如何分配值。如果有人能指出我正确的方向，我将不胜感激。

我的十六进制地址：0xE0074000

十进制值：3758571520

二进制值：11100000000001110100000000000000

我正在尝试编写一个简单的微控制器并使用 Microsoft .Net 微框架中的注册访问类来使控制器做我想做的事情。

```
Register T2IR = new Register(0xE0074000);
T2IR.Write(1 << 22); 
```

在我上面的例子中，二进制表示中的位是如何移动的？我不明白如何将位管理分配给二进制形式的地址。

如果有人能指出我正确的方向，我会非常满意。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T22:39:14.950

一开始就忘记小数。你稍后会回到那个。

首先你需要看看 HEX 和 BINARY 之间的逻辑。

好的，对于一个字节，您有 8 位 (#7-0)

```
#7 = 0x80 = %1000 0000
#6 = 0x40 = %0100 0000
#5 = 0x20 = %0010 0000
#4 = 0x10 = %0001 0000

#3 = 0x08 = %0000 1000
#2 = 0x04 = %0000 0100
#1 = 0x02 = %0000 0010
#0 = 0x01 = %0000 0001 
```

当您以二进制形式读取时，以字节为单位，例如 %00001000

然后设置的位，是从右边开始的第 4 个位，即位 #3，其值为 08 十六进制（实际上也是十进制，但在计算十六进制/二进制时仍然忘记十进制）

现在，如果我们有二进制数 %10000000 这是打开的#7 位。十六进制值为 0x80

因此，您所要做的就是将它们总结为“半字节”（十六进制字节的每个部分都被一些极客称为半字节）

您可以在半字节中获得的最大值是（十进制）15 或 F 为 0x10 + 0x20 + 0x40 + 0x80 = 0xF0 = 二进制 %11110000

所以所有的灯都亮着（4位）在一个半字节中=十六进制的F（十进制的15位）

下半字节也是如此。

你看到图案了吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T23:50:36.753

请参阅@BerggreenDK 的回答，了解什么是转变。这里有一些关于十六进制的信息（同样的东西，只是不同的表示）：

换档是一个很容易理解的概念。寄存器的大小是固定的，任何不适合的位都会从末尾掉下来。所以，举个例子：

`int num = 0xffff << 16;`

你的十六进制变量现在是`0xffff0000`. 注意右端是如何用零填充的。现在，让我们再次转移它。

```
num = num << 8;
num = num >> 8; 
```

`num`现在是`0x00ff0000`。你不会拿回你的旧东西。这同样适用于右移。

技巧：左移 1 就像将数字乘以 2，右移 1 就像整数除以 2。

# php - simple php script

> ID：10972852
> 
> 赞同：0
> 
> 时间：2012-06-10T22:29:37.193
> 
> 标签：php

New to php and taking a class for it. Bought php6 and mysql 6 bible to get started. Of course the hello world script is the first you get and it doesn't show. It just reads part of my script and I'm not sure the problem. Link to test - [http://harden6615.com/](http://harden6615.com/)

I am using a hosted server I bought for class, but I have also check it using MAMP. I figured my script is wrong, but I have copied and pasted and still no Hello World. Any suggestions?

What I copied:

```
<?php
print("Hello, World<BR />\n");
phpinfo();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:33:03.507

Safe the file as **index.php** instead of **index.html**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:45:23.683

清单：

*   主机允许 PHP
*   文件具有**.php**扩展名
*   文件是用程序员的文本编辑器编辑的（不是 windows 下的 word/wordpad 或 Mac 下的 TextEdit），因为在保存文件时有些编码**<** , **>**符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:32:08.417

Well actually it isn't, try to use just `<?php phpinfo(); ?>` If this doesn't show anything - take a look at your webhost if he supports php...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T22:36:35.123

There are a few reasons why PHP may not be being executed.

The most basic error is saving the file as a `.html` file instead of `.php`. Make sure you use the correct extension on your file.

Next, make sure your webhost supports PHP. Most free hosts do not, so it's always a good idea to double-check.

There is nothing wrong with your code. If the above two solutions didn't help, try contacting your webhost and asking them why PHP isn't working for you.

# java - How to start a java thread from a Activity in android

> ID：10972853
> 
> 赞同：1
> 
> 时间：2012-06-10T22:29:41.603
> 
> 标签：java, android, multithreading

I wrote a network package for socket i/o which uses normal java threads, and I'm wondering if it is possible to use this package? I'm not manipulating anything on the UI of the Activity with these threads.

Or do I have to port those java threads to Android compatible ones? Because I always thought you can use normal java threads as long as they don't change views on the Activity.

How do you post code samples?

Got connecting working now testing if the Message Queues are working. Im using 2 LinkedBlockingQueue Input and Output. Reason why i need to use Threads. Now i just converted the Class that i use to encapsulate connection and SocketIO to a AsyncTask. This is for a school project where we need to control a vehicle over wifi with a Android app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:33:41.207

You can use Java threads on Android. In fact, they are no different, and the Android model does support the common `Thread` class. However, simply taking your old code, sticking some Android specific components on to it, and hoping for the best, is not advised. Instead, this would be a good place to use a `Service` to coordinate the background threads that line up with the UI. Services run devoid of the UI, but are in a separate component, to separate them logically from the rest of your app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T23:37:32.107

在你的网络 jar 库中，如果你使用 package 中的普通旧线程`java.lang`，你不需要做任何特别的事情，因为它从 API 级别 1 被移植到 Android 中。

如果您使用 package 中的类`java.util.concurrent`，则需要对网络 jar 库进行第二次尝试，因为某些类自 API 级别 1 以来未移植到 Android，因此可能不适用于所有 API 级别，例如[java.util.concurrent。](http://developer.android.com/reference/java/util/concurrent/BlockingDeque.html)从 API Level 9 开始引入[BlockingDeque 。](http://developer.android.com/reference/java/util/concurrent/BlockingDeque.html)

同样的情况也存在于 package`java.net`中，例如[java.net.IDN](http://developer.android.com/reference/java/net/IDN.html)是从 API Level 9 开始引入的。所以最好在网络 jar 库中检查它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:58:55.130

```
Threads from java works just fine with Android.. 
```

但是你必须记住一些事情。

1.  让非 UI 工作远离 UI 线程是一种很好的编程实践。但

    从 HoneyComb 它是一个规则。

2.  您可以使用 java 方式，通过将类扩展为`Thread class or implementing Runnable interface.`

3.  一旦你在 android 中创建了一个单独的线程，你就会从 UI 线程中删除，所以要返回在你需要使用的 ui 线程上显示非 ui 工作`Handler`，或者尝试使用`AsyncTask`（它同步 UI 和非Android中的用户界面）。

# android - How do I wait for two cursorloaders to return with data before starting third dependent on the return data?

> ID：10972857
> 
> 赞同：3
> 
> 时间：2012-06-10T22:30:09.257
> 
> 标签：android, sqlite, android-fragments, android-loadermanager, android-cursorloader

I have an android app using fragments and a content provider to access my local sqlite database. The Listviews often depend on several database queries such that their display is based on the query results. Assuming I have three cursorloaders, how do I ensure loader 1 and 2 have both completed before running loader 3?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:20:13.280

跟踪在计数器 ( `protected int loadersToRun,loadersCompleted=0;`) 中启动的每个加载器，并`onLoadFinished`调用它们的每个函数

```
public void checkLoadersFinished(){
    loadersCompleted++
    if(loadersCompleted==loadersToRun){
        //Start loader 3
        loadersCompleted=0;
    }
} 
```

如果您需要使事情动态地工作，可以通过在`onLoadFinished`and have that run中使用一组加载程序 ID 的默认情况来完成`checkLoadersFinished`。我们使用 Treeset 为每个加载器生成一个唯一 ID，以跟踪它们并在完成时将它们删除。

# parsing - 为什么在某些情况下我不能使用标记作为优先标记

> ID：10972858
> 
> 赞同：1
> 
> 时间：2012-06-10T22:30:11.487
> 
> 标签：parsing, bison, yacc, operator-precedence

假设此代码有效：

```
left '*'
left '+'

expr: expr '+' expr
    | expr '*' expr
    ; 
```

我想定义其他优先级标记，例如：

```
left MULTIPLY
left PLUS

expr: expr '+' expr %prec PLUS
    | expr '*' expr %prec MULTIPLY
    ; 
```

然而这实际上并不有效。

我想这两种形式应该是等价的，但是，它们不是。

这不是实际问题。我只是想知道这种现象的原因和原理。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-21T20:27:50.893

Yacc 优先级规则实际上并不是关于表达式的优先级，尽管它们可以用于此。相反，它们是一种明确解决移位/减少冲突（并且仅移位/减少冲突）的方法。

了解它是如何工作的需要了解 shift/reduce（自下而上）解析是如何工作的。基本思想是您从输入中读取标记符号并将这些标记推送（“移位”）到堆栈中。当堆栈顶部的符号与语法中某些规则的右侧匹配时，您可以“减少”规则，从堆栈中弹出符号并用规则左侧的单个符号替换它们。您重复此过程，移动标记并减少规则，直到您读取整个输入并将其减少为开始符号的单个实例，此时您已成功解析整个输入。

上面的基本问题（以及解析器生成器的整个机制正在解决的问题）是知道何时减少规则以及何时移动令牌（如果两者都可能的话）。解析器生成器（yacc 或 bison）构建了一个状态机，该状态机跟踪哪些符号已被移动，因此知道哪些“部分匹配”规则当前是可能的，并将移动限制为那些可以匹配更多此类规则的标记。如果所讨论的语法不是 LALR(1)，这将不起作用，因此在这种情况下，yacc/bsion 会报告 shift/reduce 或 reduce/reduce 冲突。

优先规则解决移位减少冲突的方式是通过为语法中的某些标记和规则分配优先级。每当要移动的令牌和要减少的规则之间存在移位/减少冲突时，并且两者都有优先级，它将执行具有更高优先级的那个。如果它们具有相同的优先级，那么它会查看与优先级关联的//标志——`%left`表示减少，表示移位，表示都不做并将其视为语法错误。`%right``%nonassoc``%left``%right``%nonassoc`

剩下的唯一棘手的一点是令牌和规则如何获得优先权。令牌从它们所在的`%left`//指令中获取它们`%right`，该`%nonassoc`指令也设置了顺序。规则从`%prec`指令或从其右侧最右侧的终端获得优先级。所以当你有：

```
%left '*'
%left '+'

expr: expr '+' expr
    | expr '*' expr
    ; 
```

您正在设置指令的优先级`'*'`和`'+'`使用`%left`指令，这两个规则从这些标记中获取优先级。

当你有：

```
%left MULTIPLY
%left PLUS

expr: expr '+' expr %prec PLUS
    | expr '*' expr %prec MULTIPLY
    ; 
```

您正在设置令牌的优先级，`MULTIPLY`然后`PLUS`显式设置规则以具有这些优先级。但是，您没有为令牌`'*'`和`'+'`. `'*'`因此，当两个规则之一与or之间存在移位/减少冲突时`'+'`，优先级不会解决它，因为令牌没有优先级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T23:29:18.333

你说你不是在试图解决一个具体的、实际的问题。从你的问题来看，我对你如何尝试使用优先标记有点困惑。

我想你会发现你不需要经常使用优先级标记。重写语法以明确说明优先级，通常对读者来说更简单、更清晰。要使乘法和除法的优先级高于加法和减法，您可以执行以下操作（示例改编自 John Levine, **lex & yacc** 2/e, 1992）：

```
%token NAME NUMBER

%%

stmt : NAME '=' expr
     | expr
     ;

expr : expr '+' term
     | expr '-' term
     | term
     ;

term : term '*' factor
     | term '/' factor
     | factor
     ;

factor : '(' expr ')'
       | '-' factor
       | NUMBER
       ; 
```

在您的示例中，`PLUS`并且`MULTIPLY`不是真正的令牌；您不能将它们与`'+'`and互换使用`'*'`。莱文称它们为伪代币。它们在那里将您的产品链接回您定义的优先级列表`%left`和`%nonassoc`声明。他给出了这个例子，说明`%prec`即使“-”标记的优先级较低，您也可以使用一元减高优先级：

```
%token NAME NUMBER
%left '-' '+'
%left '*' '/'
%nonassoc UMINUS

%%

stmt : NAME '=' expr
     | expr
     ;

expr : expr '+' expr
     | expr '-' expr
     | expr '*' expr
     | expr '/' expr
     | '-' expr %prec UMINUS
     | '(' expr ')'
     | NUMBER
     ; 
```

总而言之，我建议遵循我的第一个代码示例的模式，而不是第二个；使语法明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T14:13:50.173

Shift-reduce 冲突是尝试减少生产与转移令牌和移动到嵌套状态之间的冲突。当 Bison 解决冲突时，它不会比较两条规则并选择其中一条 - 它比较它想要减少的一条规则和你想要在其他规则中转移的令牌。如果您有两条规则要转换，这可能会更清楚：

```
expr: expr '+' expr
    | expr '*' expr
    | expr '*' '*' expr 
```

这一切令人困惑的原因是 Bison 为“减少”规则提供优先级的方式是将其与令牌（默认情况下规则中的最后一个终端或 prec 声明中的令牌）相关联，然后它使用优先级表将该令牌与您尝试转移的令牌进行比较。基本上，prec 声明仅对冲突的“减少”部分有意义，并且它们不计入转换部分。

看到这一点的一种方法是使用以下语法

```
command: IF '(' expr ')' command               %prec NOELSE
       : IF '(' expr ')' command ELSE command 
```

在此语法中，您需要在减少第一条规则或移动 ELSE 标记之间进行选择。您可以通过为 ')' 标记和 ELSE 标记提供优先权，或者通过使用 prec 声明并为 NOELSE 而不是 ')' 提供优先权来做到这一点。如果您尝试对第二个进行 prec 声明，它将被忽略，并且 Bison 将继续尝试在优先表中查找 ELSE 令牌的优先级。

# java - ClassCastException: ArrayList cannot be cast to String

> ID：10972860
> 
> 赞同：6
> 
> 时间：2012-06-10T22:30:12.520
> 
> 标签：java, string, casting, arraylist

I get this error:

> java.lang.ClassCastException: java.util.ArrayList cannot be cast to java.lang.String

This is the code:

```
public static List<String>produit_cart(ArrayList l)
{   
    List<String>re=new ArrayList();
    List<String>l4=new ArrayList();

    re=(List<String>) l.get(0);

    for(int i=1;i<l.size();i++)
    {
        l4=new ArrayList();

        for(int j=0;j<re.size();j++)
        {
            for(int k=0;k<((ArrayList)l.get(i)).size();k++)
            {
                l4.add(re.get(j) +
                        " " +
                        (String)((ArrayList)l.get(i)).get(k));

            }   
        }

        re=new ArrayList();
        for(int m=0;m<l4.size();m++)
        {
            re.add(l4.get(m));
        }   
    }

    return re;
} 
```

The problem is in this line:

```
l4.add(re.get(j)+" "+(String)((ArrayList)l.get(i)).get(k)); 
```

I tried to rewrite it as:

```
l4.add(re.get(j)+" "+((ArrayList)l.get(i)).get(k)); 
```

but it didn't work. What should I do ?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T22:33:13.760

You have a problem with your parentheses.

You want to call `get(i)` and `get(k)` on your `ArrayList`, then cast that to a `String`.

Your code casts the result of `l.get(i)` to a `String`, then tries to call `get(k)` on it.

... Actually, I can barely determine what your code does, because it is so difficult to read in its current state.

The following should work and also make your code much easier to follow:

```
ArrayList tempList = (ArrayList) l.get(i);
String tail = (String) tempList.get(k);
l4.add(re.get(j) + " " + tail; 
```

One thing that would **really** help would be to ensure that list `l` is a `list of string lists`. Then you wouldn't have to cast at all. You could achive that by using the following declaration (if at all possible):

```
List<ArrayList<String>> listL = new ArrayList<ArrayList<String>>(); 
```

* * *

Here are some suggestions of how you could re-write the above and make it much easier to follow:

```
public static List<String> produitCart(List<ArrayList<String>> listOfLists)
{   
    List<String> returnList = listOfLists.get(0);

    for (int i = 1; i < listOfLists.size(); i++) {

        List<String> listFour = new ArrayList<String>();

        for (int j = 0; j < returnList.size(); j++) {
            ArrayList<String> tempList = listOfLists.get(i);
            for (int k = 0; k < tempList.size(); k++) {
                listFour.add(returnList.get(j) + " " + tempList.get(k));
            }   
        }

        returnList = new ArrayList();

        for (int m = 0; m < listFour.size(); m++) {
            returnList.add(listFour.get(m));
        }   
    }

    return returnList;
} 
```

# c++ - 通过传递的指针段错误初始化 char 数组

> ID：10972861
> 
> 赞同：0
> 
> 时间：2012-06-10T22:30:24.393
> 
> 标签：c++, arrays

即，为什么以下工作：

```
 char* char_array(size_t size){
            return new char[size];
    }

    int main(){
            const char* foo = "foo";
            size_t len = strlen(foo);
            char* bar=char_array(len);
            memset(bar, 0, len+1);
    } 
```

但以下段错误：

```
 void char_array(char* out, size_t size){
            out= new char[size];
    }

    int main(){
            const char* foo = "foo";
            size_t len = strlen(foo);
            char* bar;
            char_array(bar, len);
            memset(bar, 0, len+1);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:37:19.320

将 'bar' 传递给 char_array 是在调用时传递*该指针的当前值的*副本- 所以 char_array 中的 'out' 指向与 'bar' 相同的东西，但它们是完全独立的变量，当 char_array返回新分配的值只是丢失了。

如果你想实际修改'bar'变量，你需要传递一个指针或对bar变量本身的引用，即

```
void char_array(char** out, size_t size) {
    *out = new char[size];
}

...
char_array(&bar, len); 
```

或者

```
void char_array(char*& out, size_t size) {
    out = new char[size];
}

...
char_array(bar, len);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:32:34.143

你不是在修改`out`，你需要通过引用传递指针：

```
void char_array(char*& out, size_t size)
//                   |
//           pass by reference 
```

现在你正在调用`memset`一个未初始化的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T22:42:31.187

```
 0 void char_array(char* out, size_t size)
 1 {
 2    out = new char[size];
 3 }

 5 int main()
 6 {
 7    const char* foo = "foo";
 8    size_t len = strlen(foo);
 9    char* bar;
10    char_array(bar, len);
11    memset(bar, 0, len+1);
12 } 
```

`char* bar`第 9 行没有初始化，所以声明了一个可以指向任何地方的指针变量。第 10 行调用 char_array，将垃圾指针值复制到`out`参数中。请注意，复制的是 bar 内的垃圾值 -`out`获取该值但与`bar`. 这个垃圾值永远不会被使用——它只是被`new`第 2 行返回的指针覆盖，然后在函数返回时被丢弃。

要允许`char_array`更改`bar`自身，请使用对指针的引用：

```
void char_array(char*& out, size_t size) { out = new ... } 
```

...或指向指针的指针...

```
void char_array(char** p_out, size_t size) { *p_out = new ... }

char_array(&bar, len); 
```

无论哪种方式都`char_array`知道在哪里`bar`修改它。

# php - 为什么 PHP（脚本）比 CGI（编译）提供更多的请求？

> ID：10972863
> 
> 赞同：4
> 
> 时间：2012-06-10T22:31:06.357
> 
> 标签：php, performance, request, cgi, benchmarking

我开发了以下 CGI 脚本并在 Apache 2 ( [http://localhost/test.chtml](http://localhost/test.chtml) ) 上运行。我在 PHP ( [http://localhost/verifica.php](http://localhost/verifica.php) ) 中做了同样的脚本。后来我使用 Apache Benchmark 工具执行了 Apache 基准测试。结果显示在图像中。

# 包括

```
#include <stdlib.h>
int main(void)
{

    printf("%s%c%c\n",
    "Content-Type:text/html;charset=iso-8859-1",13,10);
    printf("<TITLE>Multiplication results</TITLE>\n");
    printf("<H3>Multiplication results</H3>\n");

    return 0;
} 
```

![在此处输入图像描述](../Images/c785562a6274591c56096be46383cb97.png)

有人可以解释一下为什么 PHP 服务的请求比 CGI 脚本多吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:36:14.147

对独立 CGI 程序的调用会导致`fork`/ `exec`- 必须完全加载新程序。这不是很有效。

最初 PHP 以这种方式运行，但为了加快速度，`mod_php`开发了 PHP 解释器最终内置并在 Apache 服务器的进程空间内运行，它所要做的只是一些简单的解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:40:53.807

您在这里真正衡量的唯一事情是几乎没有操作的程序造成的开销。调用脚本或 cgi 所产生的开销取决于 Apache 服务器的配置方式。您可能将 php 用作模块，这意味着它实际上在 apache 进程中运行。对于 CGI，您可能使用的是常规风格，即为每个调用创建一个进程。

根据您实际想要测试/了解/评估的内容，您可能应该多次重新运行此测试，例如在 php 与 C cgi 中进行大量计算，使用 fastcgi 等等。另外，不要忘记检查像 APC 这样的代码缓存对 php 代码执行的影响，在某些情况下，差异是巨大的。

# java - Server Sent Events on Play framework using Java

> ID：10972872
> 
> 赞同：5
> 
> 时间：2012-06-10T22:32:39.960
> 
> 标签：java, playframework, server-sent-events

I am completely new Play framework and Scala. I am trying to push some events from the server to the browser using Html5 -server sent events and play framework.

I came across this example in Scala. I tried implementing action composition in java by extending play.mvc.Action.Simple. I am not sure how to set the response headers in the action composition.

[http://benquasmalltalk.blogspot.fr/2012/04/hub-interesting-but-undocumented.html](http://benquasmalltalk.blogspot.fr/2012/04/hub-interesting-but-undocumented.html)

The data I am sending is coming from a database and not an enumeration. Any pointers will be helpful

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T20:26:38.257

我通过使用 websocket 示例来做到这一点： [websocket-chat](https://github.com/playframework/Play20/tree/master/samples/java/websocket-chat)

对于动作复合（在java中），看看[这里](https://stackoverflow.com/questions/9629250/how-to-avoid-passing-parameters-everywhere-in-play2)

# c++ - C++ initialization list, Class in class (Aggregation)

> ID：10972880
> 
> 赞同：0
> 
> 时间：2012-06-10T22:34:13.710
> 
> 标签：c++, class, aggregation, initialization-list

I am writing a dish washer program, Dishwasher has a pump, motor, and an ID. Pump, motor, date, time are other small classes which Dishwasher will use. I checked with the debugger but when I create the Dishwasher class, my desired values aren't initialized. I think I am doing something wrong but what? :(

So the Dishwasher class is below :

```
class Dishwasher {
    Pump pump; // the pump inside the dishwasher
    Motor motor;// the motor inside the dishwasher

    char* washer_id;//011220001032 means first of December 2000 at 10:32h
    Time time_built;// Time variable, when the Dishwasher was built
    Date date_built;// Date variable, when the Dishwasher was built

    Time washing_time;      // a time object, like 1:15 h
public:
    Dishwasher(Pump, Motor, char*, float);
}; 
```

This is how I initialize the Class :

```
Dishwasher::Dishwasher(Pump p, Motor m, char *str, float f) 
    : pump(p), motor(m), max_load(f)
{
    washer_id = new char [(strlen(str)+1)];
    strcpy (washer_id,str);
    time_built.id2time(washer_id);
    date_built.id2date(washer_id);
} 
```

This is how I create the class:

```
Dishwasher siemens( 
        Pump(160, "011219991143"), 
        Motor(1300, "081220031201"), 
        "010720081032", 
        17.5); 
```

Here is the full code if you would like to see further, because I removed some unused things for better readability : [http://codepad.org/K4Bocuht](http://codepad.org/K4Bocuht)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T01:42:53.107

首先，我无法克服您使用 a`char*`来改变字符串的事实。因为大声哭泣，`std::string`. 这是处理字符串的标准化方式。它可以有效地摆脱你扔给它的任何东西。无论是字符串文字、char 数组、char* 还是另一个字符串。

其次，你的教授需要专业的帮助。用更原始的东西来教授“低级直觉”是一回事，但将这一点强加给应该学习 C++ 的学生显然是不好的做法。

现在，到手头的问题上。我将仅举顶级示例，即位于 Dishwasher 构造函数中的原始“裸”指针，`char* str`. 如您所知，这是一个*指针*，即指向类型的指针`char`。指针存储变量的内存地址（任何类型变量的第一个字节，它是内存中最低的可寻址单元）。

这种明显的差异非常重要。为什么？因为当您将指针分配给其他对象时，您并没有复制实际的对象，而只是复制了它的第一个字节的地址。所以，实际上，你只是得到两个指向同一个对象的指针。

毫无疑问，你是一个良好的记忆公民，你可能定义了一个析构函数来处理这个问题：

```
washer_id = new char [(strlen(str)+1)]; 
```

您基本上是在堆上分配 strlen(str)+1 字节，这是不受系统管理的，并且仍然在您有能力的手中。因此得名，堆。一堆东​​西，失去了对它的引用，你再也找不到它了，你可以把它全部扔掉（当程序从 main 返回时所有泄漏实际上会发生什么）。因此，您有责任在完成后告诉系统。你做了，定义了一个析构函数，就是这样。

# 一个大的，讨厌的，但...

但是……这个方案有问题。你有一个构造函数。和一个析构函数。管理资源分配和释放。但是复制呢？

```
Dishwasher siemens( 
        Pump(160, "011219991143"), 
        Motor(1300, "081220031201"), 
        "010720081032", 
        17.5); 
```

您可能知道编译器会尝试隐式创建一个基本的复制构造函数、一个复制赋值运算符（用于已经构造的对象）和一个析构函数。由于隐式生成的析构函数没有任何东西可以手动释放（我们讨论了动态内存和我们的责任），所以它是空的。

因为我们确实使用动态内存并分配不同大小的字节块来存储我们的文本，所以我们有一个析构函数（如您的较长代码所示）。这一切都很好，但我们仍然处理隐式生成的复制构造函数和复制变量的直接值的复制赋值运算符。由于指针是一个其值为内存地址的变量，因此隐式生成的复制构造函数或复制赋值运算符所做的只是复制该内存地址（这称为*浅拷贝*），它只是创建对唯一的奇异字节的另一个引用在内存中（以及连续块的其余部分）。

我们想要的是相反的，*深拷贝*，分配新内存并复制存储在传入指针内存地址的**实际对象**（或任何复合多字节类型、数组数据结构等）。这样，它们将指向不同的对象，这些对象的生命周期与封装对象的生命周期相关，**而不是从中复制的对象的生命周期**。

在上面的示例中观察到，您正在堆栈上创建临时对象，这些临时对象在构造函数运行时处于活动状态，之后它们被释放并调用它们的析构函数。

```
Dishwasher::Dishwasher(Pump p, Motor m, char *str, float f) 
    : pump(p), motor(m), max_load(f)
{
    washer_id = new char [(strlen(str)+1)];
    strcpy (washer_id,str);
    time_built.id2time(washer_id);
    date_built.id2date(washer_id);
} 
```

初始化列表还有一个额外的好处，即不将对象初始化为其默认值然后执行复制，因为您有幸直接调用复制构造函数（在这种情况下，它是由编译器隐式生成的）：

`pump(p)`基本上是调用 Pump::Pump(const Pump &) 并传入临时对象已初始化的值。您的 Pump 类包含一个 char*，它将第一个字节的地址保存到您推入临时对象的字符串文字中：`Pump(160, "011219991143")`。

复制构造函数获取临时对象并复制所有显式可用的数据，这意味着它只获取 char* 指针中包含的地址，而不是整个字符串。因此，您最终会从两个地方指向同一个对象。

由于临时对象存在于堆栈中，一旦构造函数完成处理它们，它们将被释放释放并调用它们的析构函数。这些析构函数实际上连同它们一起破坏了您在创建 Dishwasher 对象时放置的字符串。现在，Dishwasher 对象中的 Pump 对象拥有一个悬空指针，该指针指向在无尽内存深渊中丢失的对象的内存地址。

# 解决方案？

编写自己的复制构造函数和复制赋值运算符重载。以泵为例：

```
Pump(const Pump &pumpSrc) // copy constructor

Pump& operator=(const Pump &pumpSrc) // copy assignment operator overload 
```

做这`foreach`门课。

当然，除了你已经拥有的析构函数。这三个人是经验法则的主角，称为“**三法则**”。它指出，如果您必须显式声明它们中的任何一个，您*可能也*需要显式声明其余的。

基本上，规则的*可能*部分只是没有责任。当您进一步使用 C++ 时，对显式定义的需求实际上是非常明显的。例如，考虑你的类做什么是确定是否需要明确定义的所有内容的好方法。

示例：您的类依赖于指向一块内存的裸指针，而内存地址就是它所提取的全部内容。它是一个简单的类型变量，它只保存所讨论对象的第一个字节的内存地址。

为了防止在销毁对象时发生泄漏，您定义了一个析构函数来释放分配的内存。但是，您是否在对象之间复制数据？很有可能，正如你所见。有时您将创建一个临时对象，该对象将分配数据并将内存地址存储到您将复制其值的指针数据成员中。一段时间后，那个临时的肯定会在某个时候被销毁，你会丢失它的数据。您唯一剩下的就是带有无用且*危险*的内存地址的悬空指针。

**官方免责声明**：*为了防止我写一本关于这个主题的书，一些简化已经到位。此外，我总是试图专注于手头的问题，而不是 OP 的代码，这意味着我不对所采用的做法发表评论。代码可能很糟糕、很漂亮或介于两者之间。但我不会尝试改变代码或 OP，我只是尝试回答问题，有时会提出一些我认为从长远来看可能对 OP 有益的东西。是的，我们可以精确到地狱并限定一切......我们还可以使用皮亚诺公理来定义数字集和基本算术运算，然后我们大胆地尝试声明 2 + 3 = 3 + 2 = 5，同样乐趣。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:50:22.460

你违反了[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。您可以通过以下两种方式之一解决您的问题：

*   永远不要使用裸指针。在您的情况下，您可以通过`char*`在每个实例中替换为`std::string`.
*   实现一个复制构造函数和一个复制赋值运算符，每个都必须执行一个深拷贝和一个析构函数。

# cocos2d-iphone - Update text on CCLabelTFF end in bad access?

> ID：10972883
> 
> 赞同：1
> 
> 时间：2012-06-10T22:35:22.783
> 
> 标签：cocos2d-iphone, exc-bad-access

I'm doing a little game in Coco2D and I have a countdown clock *Note: As I am just trying to fix a bug, I am not working on cleanup so the timer can stop, etc.* Here is my code I'm using to setup the label and start the timer:

```
timer = [CCLabelTTF labelWithString:@"10.0000" fontName:@"Helvetica" fontSize:20]; 
        timerDisplay = timer;
        timerDisplay.position = ccp(277,310);
        [self addChild:timerDisplay];
        timeLeft = 10;

        timerObject = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES]; 
```

Note: timeLeft is a double

This is updateTimers's code:

```
 -(void)updateTimer {
         NSLog(@"Got Called!");

         timeLeft = timeLeft -0.1;
     [timer setString:[NSString stringWithFormat:@"%f",timeLeft]];
       timerDisplay = timer;
         timerDisplay.position = ccp(277,310);
         [self removeChild:timerDisplay cleanup:YES];
         //[self addChild:timerDisplay];  
       if (timeLeft <= 0) {
             [timerObject invalidate];
         }     

     } 
```

When I run this I toggle between crashing on this this: `[timer setString:[NSString stringWithFormat:@"%f",timeLeft]];` and in the green arrow thing it gives `Thread 1: EXEC_BAD_ACCESS (code=2, address=0x8)` and `0x197a7ff: movl 16(%edi), %esi` and in the green arrow thing it gives `Thread 1: EXEC_BAD_ACCESS (code=2, address=0x8)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:03:33.520

看起来您的“计时器”（恕我直言，不是一个很好的文本对象名称）正在自动释放，因为它是使用便捷方法初始化的。因此，当您的计时器触发时，它可能会尝试操纵已释放的对象。有两种方法可以解决它：a。自己分配和初始化对象，或者 b. 向其添加“保留”消息，例如：

```
[[CCLabelTTF labelWithString:@"10.0000" fontName:@"Helvetica" fontSize:20] retain]; 
```

在这两种情况下，您将负责在您的 dealloc 或类似方法中释放对象，当您完成它时：

```
[timer release]; 
```

# javascript - iPhone：通过“history.back(-1)”返回时，固定 div 会停留在页面中间

> ID：10972884
> 
> 赞同：1
> 
> 时间：2012-06-10T22:35:37.203
> 
> 标签：javascript, iphone, html, safari, css-position

使用 iPhone 的固定 div 有问题。我知道在 iOS 5 中`position:fixed`添加了 for 的功能。我的 div 位于屏幕的顶部，表现还不错，无论如何，滚动过程中存在一些错误。

但*真正*`javascript:history.back(-1)`让我生气的是——点击链接回到当前页面后这个 div 的位置。固定的 div 粘在屏幕中间。当我尝试滑动时，它会跳回正确的位置。

有什么办法可以治愈这个错误吗？

PS。`history:back`有时，通过函数返回后，div 是完全不可见的。它在滚动后显示。在我看来有点同样的问题。

```
<div class='rlm fixed rlm-zindex'>
  <a href='http://webiste.com/' target='_new'>
    <img src='banner-960.png' class='jqwatch' border=0 />
  </a>
</div> 
```

和 CSS：

```
div.rlm {
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: auto;
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: solid 1px;
        }

div.rlm img {
            width: 100%;
            left: 0;
            right: 0;
        }

.fixed { position: fixed; }
.rlm-zindex { z-index: 5; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:56:27.330

实际上它似乎[是](https://stackoverflow.com/questions/10282149/jquery-mobile-fixed-footer-ios-web-view-and-scrolltop-issue) [一个](https://github.com/scottjehl/Device-Bugs/issues/1) [Bug](https://stackoverflow.com/questions/8752220/mobile-safari-bug-on-fixed-positioned-button-after-scrolltop-programmatically-ch)！

[这里](https://stackoverflow.com/a/10439425/22470)有一个解决方案，但是您必须将 scrollto 更改为 onload 或类似...

# ruby-on-rails - Rails: has_many association with a table in another database and without foreign key

> ID：10972885
> 
> 赞同：2
> 
> 时间：2012-06-10T22:35:44.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

Here is my situation. I have model called Account. An account can have one or more contracts. The problem is that i'm dealing with a legacy application and each account's contracts are stored in a different database.

Example:

Account 1's contract are in account1_db.contracts. Account 2's contract are in account2_db.contracts.

The database name is a field stored in accounts table.

How can i make rails association work with this?

This is a legacy PHP application and i simply can't change it to store everything in one table. I need to make it work somehow.

I tried this, but it didn't worked:

```
has_many :contracts, :conditions => [lambda{ Contract.set_table_name(self.database + '.contracts'); return '1' }] 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:44:37.457

为什么不能选择数据库迁移？

你以错误的方式接近这个。您希望集成中的两个系统*松散耦合*。通过尝试将两者关联起来，您正在创建一系列相互依赖关系，这些依赖关系稍后会反过来背叛您。您尝试的方法会创建紧密耦合并降低内聚。

* * *

但是，要*直接*回答您的问题，请参见下文。再一次，我不*建议*实施我在下面所说的内容，但从技术上讲，这将是一个解决方案。

首先，rails 关联只能使用外键。事实上，*所有*的数据库关联都是这样工作的。没有外键就没有 ActiveRecord 关联方法，因为它违背了关联两个对象的含义。

所以你不会用 has_many 关联来完成它。相反，我只需在您的 Contract 模型上手动创建一个模拟 has_many 关联的函数。

```
class Account
    memoize :contracts

    def contracts
     # Load from other database in here
    end

    def contracts=
    # Push to other database in here
    end
end 
```

# php - 在 iframe 中向 PHP 脚本添加命令行参数

> ID：10972887
> 
> 赞同：0
> 
> 时间：2012-06-10T22:35:45.353
> 
> 标签：php, html

我正在开发一个显示 BART 火车时间的 Google Maps webapp，当您单击 BART 站上的图钉时，会弹出一个信息窗口，该窗口在运行的 iframe 中有一个 php 脚本，并显示从中解析的时间BART 的 XML 提要。

我想要做的是从 iframe 调用 PHP 脚本，就像现在一样，但是添加命令行参数（我不确定这样的事情是否可能）。到目前为止，这是我的代码。

```
 if(end.match(patt1))
           {    
             response.routes[0].legs[0].end_address="Colma BART station<br />"+"Upcoming trains<br />"+'<iframe src="bart1.php" frameborder="0"; width="200" scrolling="yes"    ></iframe>';
           } 
```

那么，除了“bart1.php”之外，我也可以将其更改为“bart1.php -a foo”之类的东西吗？谢谢，阿曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:41:15.207

使用`$_GET`数组。

一个例子： `http://www.webapp.com/test.php?stationnumber=4`

通过执行以下操作检索站号：

`$stationnumber = intval($_GET['stationnumber']);`（如果应该是数字输入，则存在intval）

# jquery - jQuery Cycle : Multiple Instances, detect end of each instance

> ID：10972889
> 
> 赞同：1
> 
> 时间：2012-06-10T22:36:17.493
> 
> 标签：jquery, cycle

I am using multiple instances of Cycle for a portfolio; Only one is shown and the others are hidden. Each Cycle is a project with multiple images.

The only thing I can't figure out is how to detect the end of the « current » Cycle instance.

with after: function, it is triggered for all instances at once, impossible to get « local » events.

Here is my code :

```
 $('.sldr_closeup').each(function() {
    var currId = $(this).attr('id');
    window['num_'+currId] = 0;
    $(this).cycle({
        timeout:0,
        speed:500,
        fx:'fade',
        next:'.nextimages',
        prev:'.previmages',
        fit:1,
        nowrap:1,
        autstop:0,
        after : function(c,n,o,f) {

            var currId = $(this).parent('div').attr('id');

            (f) ? window['num_'+currId] ++ : window['num_'+currId] --;
            if ((o.slideCount == window['num_'+currId] )) {

                alert(currId);
                $('.nextimages').stop().fadeTo(400,0,function(){
                    if(currId != $('.projectList .projet').last().find('a').attr('rel'))
                        $('.nextproject').stop().fadeTo(400,1);
                    $(this).hide();

                });
            }
        }
    }).cycle('pause');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:37:59.410

你有没有尝试过

`end:...,`

见这里：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# javascript - 使AJAX“获取”功能同步/如何获取结果？

> ID：10972892
> 
> 赞同：16
> 
> 时间：2012-06-10T22:36:51.200
> 
> 标签：javascript, jquery, ajax, get

我遇到了 $.get 函数的问题。url 包含 JSON

***我的代码：***

```
 xyz = null

    $.get('http://www.someurl.com/123=json', function(data) {
       var xyz = data.positions[0].latitude;
    });

alert(xyz);
//some more code using xyz variable 
```

我知道这`xyz`会提醒 null 结果，因为它`$.get`是**异步**的。

那么有什么办法可以在`xyz`外部使用这个get函数吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-10T22:40:33.007

`get`是捷径。您可以使用以下方法执行相同但同步的操作：

```
var xyz = null

$.ajax({ url: 'http://www.someurl.com/123=json', 
         async: false,
         dataType: 'json',
         success: function(data) {
              xyz = data.positions[0].latitude;
            }
        });

alert(xyz); 
```

不过，您必须`xyz`在 ajax 调用之前声明变量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T22:40:22.970

真正的答案是**NO**，但你可以使用这个：

```
function useXYZ(){
    alert(xyz);
}

xyz = null        

$.get('http://www.someurl.com/123=json', function(data) {
   xyz = data.positions[0].latitude;
   useXYZ();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T22:53:37.890

这是 Javascript 的常见问题。Javascript 代码必须以连续传递风格编写。它很烦人，但它是你可以转换而不用想太多的东西。

基本上，每当我们有类似的东西时

```
var x = someSyncFunction(a, b, c);
//do something with x
console.log(x); 
```

我们可以将其转换为异步代码，方法是将函数返回后的所有代码变成一个延续函数，并将 x 从一个变量变成延续回调的参数。

```
someAsyncFunction(a, b, c, function(x){
    //do something with x;
    console.log(x);
}); 
```

您必须注意它很容易编写令人困惑的代码。要记住的一个好技巧是你可以让你自己的函数也接收回调。这允许它们被不同的函数使用（就像返回值的普通同步辅助函数可以被不同的函数使用）

```
var getXyz = function(onResult){ //async functions that return do so via callbacks
                                 //you can also another callback for errors (kind of analogous to throw)
    $.get('http://www.someurl.com/123=json', function(data) {
       var xyz = data.positions[0].latitude;
        onResult(xyz); //instead of writing "return xyz", we pass x to the callback explicitely.
    });
};

getXyz(function(xyz){ //this would look like "var xyz = getXyz();" if it were sync code instead.
    console.log('got xyz');
}); 
```

这里的技巧是将函数中的所有返回语句更改为对回调函数的调用。认为好像异步函数从未返回，并且将值返回给某人的唯一方法是将该值传递给回调。

* * *

您可能会问为什么没有更简单的方法来完成所有这些工作。好吧，没有，除非您使用另一种语言而不是 Javascript（或者至少可以让您以同步风格编写异步代码但自动编译为常规 Javascript 的语言）

# git - 非 Git Github？

> ID：10972893
> 
> 赞同：-1
> 
> 时间：2012-06-10T22:37:06.457
> 
> 标签：git

这可能是一个非常奇怪的问题......但是有非 git Github 吗？

我想要一个发布我的项目和分享我的代码的地方（比如 Github），但我不想处理版本、提交等。我不喜欢在我的文件夹和我的 git repo 之间创建链接然后推送更改等。此外，我不想拥有本地副本来创建或添加文件；我可以在 Github 中编辑现有文件，但要创建或添加文件，我必须在本地进行，然后提交和推送。

我不确定这是否是最好的提问网站，但我想有人可能会有答案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:59:26.057

你试过[SourceForge](http://sourceforge.net/create/)了吗？

尽管如此，我还是鼓励你尝试更多的 Git。GitHub 中内置的社交网络方面值得学习。

# jquery - 触发另一个div时如何关闭切换的div

> ID：10972904
> 
> 赞同：0
> 
> 时间：2012-06-10T22:39:09.910
> 
> 标签：jquery

我正在为菜单项创建滑出面板，因此当单击一个按钮时，面板会滑出。我需要的是一种在单击另一个按钮打开另一个面板时关闭打开的面板的方法。这就是我所拥有的。

```
<script type="text/javascript">
  $(document).ready(function(){
$(".trigger").click(function(){
            $(this).prev('.panel').toggle("fast");
    $(this).toggleClass("active");
    return false;
});
  });
</script>
<div id="menu-filter">
 <div class="panel">
<-----content A----->
 </div>
 <a class="trigger" href="#">A</a>

 <div class="panel">
<-----content B----->
 </div>
 <a class="trigger" href="#">B</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:46:22.593

对我来说，这使得将每个面板/按钮包装在容器 div 中变得更容易一些

```
<div id="menu-filter">
  <div class="panel-container">
    <div class="panel">
      <-----content A----->
    </div>
    <a class="trigger" href="#">A</a>
  </div>
  <div class="panel-container">
    <div class="panel">
      <-----content B----->
    </div>
    <a class="trigger" href="#">B</a>
  </div>
</div> 
```

然后

```
$(".trigger").click(function(e) {
  e.preventDefault();

  // clicked button
  var $button = $(this);
  // get ref to panel, go up to parent container and back down to find panel
  var $panel = $(this).closest("panel-container").find("panel");

  if ($button.hasClass("active")) {
    // we hide the open panel for this button
    $panel.hide("fast");
    $button.removeClass("active");
  } else {
    // hide any open panels
    $('.panel').hide("fast");
    $('.trigger').removeClass("active");

    // show clicked
    $panel.toggle("fast");
    $button.toggleClass("active");
  }
}); 
```

使用最接近和查找可以允许标记稍后更改而不会破坏 javascript，但是如果您有 1000 个面板，它可能不会表现得那么好

此代码尚未经过测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:50:12.140

也许这会有所帮助：[http](http://api.jquery.com/toggle-event/) ://api.jquery.com/toggle-event/ ，你必须处理一些功能，以防你点击另一个按钮打开另一个面板

最好的

# ruby-on-rails - 如何初始化 rake 文件中的方法？

> ID：10972909
> 
> 赞同：0
> 
> 时间：2012-06-10T22:40:03.327
> 
> 标签：ruby-on-rails, ruby, object, initialization, rake

为可能是菜鸟的问题道歉：

我有一个 rake 任务，旨在从站点获取数据并将其保存为 RateData 对象。

```
rs.each do |market,url| 
  doc = Nokogiri::HTML(open(url))  
  doc.xpath("//table/tr").each do |item|  
    provider = "rs"
    market = market
    rate = item.xpath('td[1]').text.gsub!(/[^0-9\.]/, '')
    volume = item.xpath('td[2]').text.gsub(/[^k0-9\.]/, '')
    volume = volume.gsub(/\.(?=.k)/, '')
    volume = volume.gsub(/k/, '00')
    volume = volume.to_f
    rate = rate.to_f
    RateData.create(:provider => provider, :market => market, :rate => rate, :volume => volume, :bid_ask => 1)
  end
end 
```

RateData.create 方法位于 rate_data_controller 中，当我在 rails 控制台中调用它时可以访问它。我怎样才能使它在这个 rake 任务中可用？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:43:38.897

您需要将环境传递给任务

```
task :your_task, [] => :environment do 
```

或带参数

```
task :your_task, [:foo] => :environment do |task, args| 
```

# java - 如何从 sqlite db 创建 EER 模型

> ID：10972916
> 
> 赞同：11
> 
> 时间：2012-06-10T22:41:24.307
> 
> 标签：java, sqlite, entity-relationship, reverse-engineering, eer-model

我正在使用[sqlitejdbc 库](http://www.zentus.com/sqlitejdbc/)来使用 java 创建一个数据库。现在我需要从存储在文件中的现有 sqlite db 生成 eer 模型。过去我使用 MySqlWorkbench 从 mysql db 生成 eer，但我不知道如何在 sqlite db 上执行此操作。有人可以帮助我吗？谢谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T21:45:48.383

1.  **使用 SQLite 数据库浏览器打开 SQLite 文件**
2.  **导出到 SQL**
3.  **导入（使用插件）到 Workbench**

细节：

如果您有可用的 sqlite 文件，请使用免费的[SQLite Database Browser](http://sqlitebrowser.sourceforge.net/)打开它。这为您提供了几种检查数据库的方法：

*   查看表结构
*   查看表格内容
*   针对内容发出查询
*   和更多...

除此之外，您还可以选择 SQL 文件导出。转到 SQLite 数据库浏览器中的“文件 > 导出 > 数据库到 SQL 文件”选项。

创建 SQL 输出文件后，使用[MySQL Workbench 的 SQLite 导出插件](http://forums.mysql.com/read.php?155,262396)- 特别是如果您已经熟悉 MySQL 的 Workbench 工具。

# c++ - Winsock 非阻塞 send() 等待缓冲区。什么是正确的方法？

> ID：10972918
> 
> 赞同：1
> 
> 时间：2012-06-10T22:41:51.707
> 
> 标签：c++, buffer, winsock, send, nonblocking

我对何时需要将数据存储在等待缓冲区（等待 FD_WRITE 事件）有一些疑问。

这是我的发送功能（固定）：

```
bool MyClass::DataSend(char *buf, int len)
{
    if (len <=0 || m_Socket == INVALID_SOCKET) return false;

    if (m_SendBufferLen > 0)
    {
        if ((m_SendBufferLen + len) < MAX_BUFF_SIZE)
        {
            memcpy((m_SendBuffer + m_SendBufferLen), buf, len);
            m_SendBufferLen += len;
            return true;
        }
        else
        {
            // close the connection and log insuficient wait buffer size
            return false;
        }
    }

    int iResult;
    int nPosition = 0;
    int nLeft = len;

    while (true)
    {
        iResult = send(m_Socket, (char*)(buf + nPosition), nLeft, 0);

        if (iResult != SOCKET_ERROR)
        {
            if (iResult > 0)
            {
                nPosition   += iResult;
                nLeft       -= iResult;

            }
            else
            {
                // log 0 bytes sent
                break;
            }
        }
        else
        {
            if (WSAGetLastError() == WSAEWOULDBLOCK)
            {
                if ((m_SendBufferLen + nLeft) < MAX_BUFF_SIZE)
                {
                    // log data copied to the wait buffer
                    memcpy((m_SendBuffer + m_SendBufferLen), (buf + nPosition), nLeft);
                    m_SendBufferLen += nLeft;
                    return true;
                }
                else
                {
                    // close the connection and log insuficient wait buffer size
                    return false;
                }
            }
            else
            {
                // close the connection and log winsock error
                return false;
            }
        }

        if (nLeft <= 0) break;
    }

    return true;
} 
```

我的发送（FD_WRITE 事件）功能（已修复）：

```
bool MyClass::DataSendEvent()
{
    if (m_SendBufferLen < 1) return true;

    int iResult;
    int nPosition = 0;
    int nLeft = m_SendBufferLen;

    while (true)
    {
        iResult = send(m_Socket, (char*)(m_SendBuffer + nPosition), nLeft, 0);

        if (iResult != SOCKET_ERROR)
        {
            if (iResult > 0)
            {
                nPosition   += iResult;
                nLeft       -= iResult;
            }
            else
            {
                // log 0 bytes sent
                break;
            }
        }
        else
        {
            if (WSAGetLastError() == WSAEWOULDBLOCK)
            {
                if (nPosition > 0)
                {
                    memmove(m_SendBuffer, (m_SendBuffer + nPosition), (m_SendBufferLen - nPosition));
                    m_SendBufferLen -= nPosition;
                }

                break;
            }
            else
            {
                // close the connection and log winsock error
                return false;
            }
        }

        if (nLeft <= 0)
        {
            if (m_SendBufferLen == nPosition)
            {
                m_SendBufferLen = 0;
                break;
            }
            else
            {
                memmove(m_SendBuffer, (m_SendBuffer + nPosition), (m_SendBufferLen - nPosition));
                m_SendBufferLen -= nPosition;
                nPosition   = 0;
                nLeft       = m_SendBufferLen;
            }
        }
    }

    return true;
} 
```

我真的需要`if (nPosition > 0)`还是不需要？如何模拟这种情况？非阻塞模式下的 send() 发送的字节数是否可能少于请求的字节数？如果不是，为什么要使用 while() 循环？

*   这是最终代码（感谢@user315052）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:09:04.407

在你的 while 循环的顶部，你已经在 decrementing `nLeft`，所以你不需要从中减去`nPosition`。

```
iResult = send(m_Socket, (char*)(buf + nPosition), nLeft, 0); 
```

在您的第二个函数中，当您将未发送的字节移动到数组的开头时，您应该使用`memmove`，因为您有重叠的区域（您正在将一个区域复制`m_SendBuffer`到自身中）。重叠如下图所示，其中一些`A`' 将被复制到自身上。

```
m_SendBuffer: [XXXXAAAAAAAAAAAA]
mPosition: 4
nLeft: 12 
```

我有点困惑，为什么`DataSend()`要实现允许调用者继续成功调用它，即使`WSAEWOULDBLOCK`遇到 。我建议修改接口以返回一个结果，让调用者知道它应该停止发送，并等待恢复发送的指示。

你不需要`nPosition > 0`支票。

您可以通过让数据的接收者不读取任何内容来强制发生这种情况。

绝对有可能`send`在非阻塞模式下发送比请求更少的字节。

# python - Python按字段对文本文件进行排序

> ID：10972925
> 
> 赞同：2
> 
> 时间：2012-06-10T22:42:48.373
> 
> 标签：python, class, sorting, text-files

我在按某个字段对文本文件中的数据进行排序时遇到了一些问题。以后可能会通过多个字段。.txt 是几千行代码。我是 python 的新手，所以我的代码可能有点乱。例如，这是我要从中读取的文本文件：

```
stuff
123 1200 id-aaaa stuart@test.com
322 1812 id-wwww machine-switch@test.com
839 1750 id-wwww gary2-da@test.com
500 0545 id-aaaa abc123@test.com
525 1322 id-bbbb zyx321@test.com 
```

到目前为止，我的代码如下：

```
filelist = open("info.txt").readlines()
splitlist = list()

class data:
    def __init__(self, eventName, time, identity, domain):
        self.evenName = eventName
        self.time = time
        self.identity = identity
        self.domain = domain

for line in filelist:
    filelist = list.split(', ')
    splitlist.append(filelist)

for column in splitlist:
    if (len(column) > 1): #to skip the first line
        eventName = column[0].strip()
        time = column[1].strip()
        identity = column[2].strip()
        domain = column[3].strip() 
```

我想按身份逐行排序 .txt 文件，然后可能按时间排序。我看到这可以通过python教程中的类来完成，所以我正在尝试走这条路。请指教。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T22:49:38.557

```
with open("info.txt") as inf:
    data = []
    for line in inf:
        line = line.split()
        if len(line)==4:
            data.append(line)

data.sort(key=lambda s:(s[2],s[1])) 
```

如果你想变得更高级一点，

```
from collections import namedtuple
Input = namedtuple('Input', ('name', 'time', 'identity', 'domain'))

with open("info.txt") as inf:
    inf.next()  # skip header
    data = [Input(*(line.split()) for line in inf]

data.sort(key=lambda s:(s['identity'],s['time'])) 
```

如果您真的非常想使用一个类，请尝试：

```
import time

class Data(object):
    def __init__(self, event, time_, identity, domain):
        self.event = event
        self.time = time.strptime(time_, "%H%M")
        self.identity = identity
        self.domain = domain

with open("info.txt") as inf:
    data = []
    for line in inf:
        try:
            data.append(Data(*(line.split()))
        except TypeError:
            # wrong number of arguments (ie header or footer)
            pass

data.sort(key=lambda s:(s.identity,s.time)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:51:01.570

以下 Python 代码应将您想要的信息放在一起，然后对其进行排序。

```
rows = []
for line in open("info.txt"):
    line = line.split()
    if len(line) != 4:
        continue

    eventName, time, identity, domain = line

    # Add them in the order you want to sort by
    rows.append((identity, time, eventName, domain)) 

rows.sort() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:52:26.447

这是一个常见的错误，你所做的它在没有以正确的语法实际读取文件的情况下打开它，这是我的想法：

```
filelist = open("info.txt", "r")
print filelist
filelist.read() # reads the entire file
splitlist = list()

class data:
    def __init__(self, eventName, time, identity, domain):
        self.evenName = eventName
        self.time = time
        self.identity = identity
        self.domain = domain

for line in filelist:
    filelist = list.split(', ')
    splitlist.append(filelist)

for column in splitlist:
    if (len(column) > 1): #to skip the first line
        eventName = column[0].strip()
        time = column[1].strip()
        identity = column[2].strip()
        domain = column[3].strip() 
```

希望有效！来源：[http ://docs.python.org/tutorial/inputoutput.html](http://docs.python.org/tutorial/inputoutput.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T22:55:36.027

按 id 然后按日期排序：

```
text = ["123 1200 id-aaaa stuart@test.com",
        "322 1812 id-wwww machine-switch@test.com",
        "839 1750 id-wwww gary2-da@test.com",
        "500 0545 id-aaaa abc123@test.com",
        "525 1322 id-bbbb zyx321@test.com"]
text = [i.split() for i in text]
text.sort(key=lambda line: (line[2],line[1]))
text = [' '.join(i) for i in text]
print text
#Output:
['500 0545 id-aaaa abc123@test.com', 
'123 1200 id-aaaa stuart@test.com', 
'525 1322 id-bbbb zyx321@test.com', 
'839 1750 id-wwww gary2-da@test.com', 
'322 1812 id-wwww machine-switch@test.com'] 
```

# c++ - 我已经设法将一些代码从 msdn 移植到 MinGW 以从子应用程序捕获标准输出，但它不会退出，这里有什么问题？

> ID：10972928
> 
> 赞同：1
> 
> 时间：2012-06-10T22:42:59.900
> 
> 标签：c++, winapi, console, mingw

代码，抱歉它有点太长了，但我已经设法将它缩短到这样的大小，关键问题是（我认为）最后有这个奇怪的 for 循环。不，我不知道为什么循环头是空的，微软就是这样想的。

问题是代码永远等待来自子应用程序的更多数据。

具有完整算法的页面：http: [//msdn.microsoft.com/en-us/library/ms682499 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682499(VS.85).aspx)

（是的，我知道这是一团糟，但至少它是自我维持的一团糟。）

```
#include <iostream>
#include <stdio.h>
#include <windows.h>

using namespace std;

#define BUFSIZE 4096 

int main() { 
  SECURITY_ATTRIBUTES saAttr; 
  printf("\n->Start of parent execution.\n");
  // Set the bInheritHandle flag so pipe handles are inherited.
  saAttr.nLength = sizeof(SECURITY_ATTRIBUTES);
  saAttr.bInheritHandle = TRUE;
  saAttr.lpSecurityDescriptor = NULL;
  // Create a pipe for the child process's STDOUT.
  HANDLE g_hChildStd_OUT_Rd = NULL;
  HANDLE g_hChildStd_OUT_Wr = NULL;
  CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0);
  // Ensure the read handle to the pipe for STDOUT is not inherited.
  SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0);
  // Create a pipe for the child process's STDIN.
  HANDLE g_hChildStd_IN_Rd = NULL;
  HANDLE g_hChildStd_IN_Wr = NULL;
  CreatePipe(&g_hChildStd_IN_Rd, &g_hChildStd_IN_Wr, &saAttr, 0);
  // Ensure the write handle to the pipe for STDIN is not inherited.
  SetHandleInformation(g_hChildStd_IN_Wr, HANDLE_FLAG_INHERIT, 0);
  // Create the child process.
  // Create a child process that uses the previously created pipes for STDIN and STDOUT.
  char szCmdline[]="cmd /c dir";
  PROCESS_INFORMATION piProcInfo;
  STARTUPINFO siStartInfo;
  BOOL bCreateSuccess = FALSE;
  // Set up members of the PROCESS_INFORMATION structure.
  ZeroMemory( &piProcInfo, sizeof(PROCESS_INFORMATION) );
  // Set up members of the STARTUPINFO structure. 
  // This structure specifies the STDIN and STDOUT handles for redirection.
  ZeroMemory( &siStartInfo, sizeof(STARTUPINFO) );
  siStartInfo.cb = sizeof(STARTUPINFO); 
  siStartInfo.hStdError = g_hChildStd_OUT_Wr;
  siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
  siStartInfo.hStdInput = g_hChildStd_IN_Rd;
  siStartInfo.dwFlags |= STARTF_USESTDHANDLES;
  // Create the child process.
  bCreateSuccess = CreateProcess(NULL,
    szCmdline,     // command line
    NULL,          // process security attributes
    NULL,          // primary thread security attributes
    TRUE,          // handles are inherited
    0,             // creation flags
    NULL,          // use parent's environment
    NULL,          // use parent's current directory
    &siStartInfo,  // STARTUPINFO pointer
    &piProcInfo);  // receives PROCESS_INFORMATION

  DWORD dwRead, dwWritten; 
  CHAR chBuf[BUFSIZE];
  BOOL bWriteSuccess = FALSE;

  BOOL bReadSuccess = FALSE;
  HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
  for (;;) {
    bReadSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &dwRead, NULL);
    if( ! bReadSuccess || dwRead == 0 ) break; 
    bReadSuccess = WriteFile(hParentStdOut, chBuf, dwRead, &dwWritten, NULL);
    if (! bReadSuccess ) break;
  }

  printf("\n->End of parent execution.\n");

  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:26:13.227

从表面上看，您忘记了关闭父进程的句柄到您传递给子进程的管道的写端。由于管道仍有一个有效的写入句柄，系统无法检测到不再可能写入管道，您将无限等待子进程完成。

如果您只需要捕获孩子的标准输出，`_popen`可能会更容易做到这一点。

编辑：好的，一些古老的代码可以生成一个子进程，其所有三个标准流都指向连接到父进程的管道。对于这样一个简单的任务，这比它应有的时间要长得多，但这就是 Windows API 的生命*。*公平地说，它可能会更短，但它是 20 岁（左右）。那时的 API 和我编写代码的方式都不是现在的样子（尽管有些人可能不会认为我的新代码有任何改进）。

```
#define STRICT
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <stdio.h>
#include <ctype.h>
#include <io.h>
#include <fcntl.h>
#include <stdlib.h>

#include "spawn.h"

static void system_error(char const *name) {
// A function to retrieve, format, and print out a message from the
// last error.  The `name' that's passed should be in the form of a
// present tense noun (phrase) such as "opening file".
//
    char *ptr = NULL;
    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER |
        FORMAT_MESSAGE_FROM_SYSTEM,
        0,
        GetLastError(),
        0,
        (char *)&ptr,
        1024,
        NULL);

    fprintf(stderr, "%s\n", ptr);
    LocalFree(ptr);
}

static void InitializeInheritableSA(SECURITY_ATTRIBUTES *sa) {

    sa->nLength = sizeof *sa;
    sa->bInheritHandle = TRUE;
    sa->lpSecurityDescriptor = NULL;
}

static HANDLE OpenInheritableFile(char const *name) {
    SECURITY_ATTRIBUTES sa;
    HANDLE retval;

    InitializeInheritableSA(&sa);

    retval = CreateFile(
        name,
        GENERIC_READ,
        FILE_SHARE_READ | FILE_SHARE_WRITE,
        &sa,
        OPEN_EXISTING,
        FILE_ATTRIBUTE_NORMAL,
        0);

    if (INVALID_HANDLE_VALUE == retval) {
        char buffer[100];

        sprintf(buffer, "opening file %s", name);

        system_error(buffer);
        return retval;
    }
}

static HANDLE CreateInheritableFile(char const *name, int mode) {
    SECURITY_ATTRIBUTES sa;
    HANDLE retval;

    DWORD FSmode = mode ? OPEN_ALWAYS : CREATE_NEW;

    InitializeInheritableSA(&sa);

    retval = CreateFile(
        name,
        GENERIC_WRITE,
        FILE_SHARE_READ,
        &sa,
        FSmode,
        FILE_ATTRIBUTE_NORMAL,
        0);

    if (INVALID_HANDLE_VALUE == retval) {
        char buffer[100];

        sprintf(buffer, "creating file %s", name);

        system_error(buffer);
        return retval;
    }

    if ( mode == APPEND ) 
        SetFilePointer(retval, 0, 0, FILE_END);
}

enum inheritance { inherit_read = 1, inherit_write = 2 };

static BOOL CreateInheritablePipe(HANDLE *read, HANDLE *write, int inheritance) {

    SECURITY_ATTRIBUTES sa;

    InitializeInheritableSA(&sa);

    if ( !CreatePipe(read, write, &sa, 0)) {
        system_error("Creating pipe");
        return FALSE;
    }

    if (!inheritance & inherit_read)
        DuplicateHandle(
            GetCurrentProcess(),
            *read,
            GetCurrentProcess(),
            NULL,
            0,
            FALSE,
            DUPLICATE_SAME_ACCESS);

    if (!inheritance & inherit_write) 
        DuplicateHandle(
            GetCurrentProcess(),
            *write,
            GetCurrentProcess(),
            NULL,
            0,
            FALSE,
            DUPLICATE_SAME_ACCESS);

    return TRUE;
}

static BOOL find_image(char const *name, char *buffer) {
// Try to find an image file named by the user.
// First search for the exact file name in the current
// directory.  If that's found, look for same base name
// with ".com", ".exe" and ".bat" appended, in that order.
// If we can't find it in the current directory, repeat
// the entire process on directories specified in the
// PATH environment variable.
//
#define elements(array) (sizeof(array)/sizeof(array[0]))

    static char *extensions[] = {".com", ".exe", ".bat", ".cmd"};
    int i;
    char temp[FILENAME_MAX];

    if (-1 != access(name, 0)) {
        strcpy(buffer, name);
        return TRUE;
    }

    for (i=0; i<elements(extensions); i++) {
        strcpy(temp, name);
        strcat(temp, extensions[i]);
        if ( -1 != access(temp, 0)) {
            strcpy(buffer, temp);
            return TRUE;
        }
    }

    _searchenv(name, "PATH", buffer);
    if ( buffer[0] != '\0')
        return TRUE;

    for ( i=0; i<elements(extensions); i++) {
        strcpy(temp, name);
        strcat(temp, extensions[i]);
        _searchenv(temp, "PATH", buffer);
        if ( buffer[0] != '\0')
            return TRUE;
    }

    return FALSE;
}

static HANDLE DetachProcess(char const *name, HANDLE const *streams) {
    STARTUPINFO s;
    PROCESS_INFORMATION p;
    char buffer[FILENAME_MAX];

    memset(&s, 0, sizeof s);
    s.cb = sizeof(s);
    s.dwFlags = STARTF_USESTDHANDLES;
    s.hStdInput = streams[0];
    s.hStdOutput = streams[1];
    s.hStdError = streams[2];

    if ( !find_image(name, buffer)) {
        system_error("Finding Image file");
        return INVALID_HANDLE_VALUE;
    }

// Since we've redirected the standard input, output and error handles
// of the child process, we create it without a console of its own.
// (That's the `DETACHED_PROCESS' part of the call.)  Other
// possibilities include passing 0 so the child inherits our console,
// or passing CREATE_NEW_CONSOLE so the child gets a console of its
// own.
//
    if (!CreateProcess(
        NULL,
        buffer, NULL, NULL,
        TRUE,
        DETACHED_PROCESS,
        NULL, NULL,
        &s,
        &p))
    {
        system_error("Spawning program");
        return INVALID_HANDLE_VALUE;
    }

// Since we don't need the handle to the child's thread, close it to
// save some resources.
    CloseHandle(p.hThread);

    return p.hProcess;
}

static HANDLE StartStreamHandler(ThrdProc proc, HANDLE stream) {

    DWORD ignore;

    return CreateThread(
        NULL,
        0,
        proc,
        (void *)stream,
        0,
        &ignore);
}

HANDLE CreateDetachedProcess(char const *name, stream_info *streams) {
// This Creates a detached process.
// First parameter: name of process to start.
// Second parameter: names of files to redirect the standard input, output and error 
//  streams of the child to (in that order.)  Any file name that is NULL will be 
//  redirected to an anonymous pipe connected to the parent.
// Third Parameter: handles of the anonymous pipe(s) for the standard input, output
// and/or error streams of the new child process.
//
// Return value: a handle to the newly created process.
//

    HANDLE child_handles[3];
    HANDLE process;

    int i;

// First handle the child's standard input.  This is separate from the 
// standard output and standard error because it's going the opposite 
// direction.  Basically, we create either a handle to a file the child
// will use, or else a pipe so the child can communicate with us.
// 
    if ( streams[0].filename != NULL ) {
        streams[0].handle = NULL;
        child_handles[0] = OpenInheritableFile(streams[0].filename);
    }
    else
        CreateInheritablePipe(child_handles, &(streams[0].handle), inherit_read);

// Now handle the child's standard output and standard error streams.  These
// are separate from the code above simply because they go in the opposite 
// direction.
//
    for ( i=1; i<3; i++) 
        if ( streams[i].filename != NULL) {
            streams[i].handle = NULL;
            child_handles[i] = CreateInheritableFile(streams[i].filename, APPEND);
        }
        else 
            CreateInheritablePipe(&(streams[i].handle), child_handles+i, inherit_write);

// Now that we've set up the pipes and/or files the child's going to use,
// we're ready to actually start up the child process:
    process = DetachProcess(name, child_handles);
    if (INVALID_HANDLE_VALUE == process)
        return process;

// Now that we've started the child, we close our handles to its ends of the pipes.
// If one or more of these happens to a handle to a file instead, it doesn't really 
// need to be closed, but it doesn't hurt either.  However, with the child's standard
// output and standard error streams, it's CRUCIAL to close our handles if either is a
// handle to a pipe.  The system detects the end of data on a pipe when ALL handles to
// the write end of the pipe are closed -- if we still have an open handle to the
// write end of one of these pipes, we won't be able to detect when the child is done
// writing to the pipe.
//
    for ( i=0; i<3; i++) {
        CloseHandle(child_handles[i]);
        if ( streams[i].handler ) 
            streams[i].handle = 
                StartStreamHandler(streams[i].handler, streams[i].handle);
    }
    return process;
}

#ifdef TEST

#define buf_size 256

unsigned long __stdcall handle_error(void *pipe) {
// The control (and only) function for a thread handling the standard
// error from the child process.  We'll handle it by displaying a
// message box each time we receive data on the standard error stream.
//
    char buffer[buf_size];
    HANDLE child_error_rd = (HANDLE)pipe;
    unsigned bytes;

    while (ERROR_BROKEN_PIPE != GetLastError() &&
        ReadFile(child_error_rd, buffer, 256, &bytes, NULL))
    {
        buffer[bytes+1] = '\0';
        MessageBox(NULL, buffer, "Error", MB_OK);
    }
    return 0;
}

unsigned long __stdcall handle_output(void *pipe) {
// A similar thread function to handle standard output from the child
// process.  Nothing special is done with the output - it's simply
// displayed in our console.  However, just for fun it opens a C high-
// level FILE * for the handle, and uses fgets to read it.  As
// expected, fgets detects the broken pipe as the end of the file.
//
    char buffer[buf_size];
    int handle;
    FILE *file;

    handle = _open_osfhandle((long)pipe, _O_RDONLY | _O_BINARY);
    file = _fdopen(handle, "r");

    if ( NULL == file )
        return 1;

    while ( fgets(buffer, buf_size, file))
        printf("%s", buffer);

    return 0;
}

int main(int argc, char **argv) {

    stream_info streams[3];
    HANDLE handles[3];
    int i;

    if ( argc < 3 ) {
        fputs("Usage: spawn prog datafile"
            "\nwhich will spawn `prog' with its standard input set to"
            "\nread from `datafile'.  Then `prog's standard output"
            "\nwill be captured and printed.  If `prog' writes to its"
            "\nstandard error, that output will be displayed in a"
            "\nMessageBox.\n",
                stderr);
        return 1;
    }

    memset(streams, 0, sizeof(streams));

    streams[0].filename = argv[2];
    streams[1].handler = handle_output;
    streams[2].handler = handle_error;

    handles[0] = CreateDetachedProcess(argv[1], streams);
    handles[1] = streams[1].handle;
    handles[2] = streams[2].handle;

    WaitForMultipleObjects(3, handles, TRUE, INFINITE);

    for ( i=0; i<3; i++)
        CloseHandle(handles[i]);

    return 0;
}

#endif 
```

# objective-c - Cocoa 应用程序在断点打开和关闭时表现不同

> ID：10972930
> 
> 赞同：0
> 
> 时间：2012-06-10T22:43:12.070
> 
> 标签：objective-c, xcode, cocoa, debugging, nsoperation

**重要更新：**我发现我的大部分问题都是基于一个错误的前提（见下面我的回答）。通知实际上到达了接收者，他们到达那里的速度太快了。（虽然，它仍然没有解释为什么有断点和没有断点的行为是不同的。）

我正在开发计算给它的文件的哈希值的应用程序。计算发生在 SHHashComputer 中。它是一个抽象类（好吧，是抽象的，因为在 Objective C 中没有抽象类），它接受文件路径并创建一个 NSInvocationOperation。反过来，它调用方法 (void)computeAndSendHash，该方法使用保存在对象中的文件路径来计算哈希并将其作为通知发送。实际计算发生在子类需要覆盖的 (NSString*)computeHash 方法中。

这是 SHHashComputer.m：

```
- (NSString*)computeHash {

    return [NSString stringWithFormat:@"unimplemented hash for file %@", self.path];
}

- (void)computeAndSendHash {

    NSString *result = [self computeHash];
    NSString *notificationName = [NSString stringWithFormat:@"%@%@",
                                  gotResultNotification,
                                  self.hashType];
    [[NSNotificationCenter defaultCenter] postNotificationName:notificationName
                                                        object:result];
    self.operation = nil;

} 
```

这是 SHMD5Computer.m（SHHashComputer 的子类）：

```
- (NSString*)computeHash {

    return @"MD5 test"; // it actually doesn't matter what it returns

} 
```

我不会用通知的接收者来打扰你。让我们说，只要我在 SHMD5Computer.m 中注释掉 computeHash 方法，一切正常：接收到带有文本“未实现 ...”的通知并在 GUI 中显示。但如果我不这样做——那么它就会变得非常*有趣*。

如果我不设置任何断点，则通知**永远不会到来**。但是，如果我在 SHMD5Computer.h 中的 computeHash 声明处设置断点，**然后**单步执行，直到出现“self.operation = nil”行，**并**在该点继续执行，通知就会到达目的地。如果我不停在那里，调试器会突然切换到状态，就好像它没有调试任何东西一样，应用程序会冻结。

我不认为“WTF”是一个很好的问题形式，所以让我这样说：我错过了什么吗？我的代码有错误吗？什么会导致 xcode 中出现这种行为？我怎样才能解决这个问题？

（如果你想得到我所有的代码来重现它，我很乐意把它给你。）

**更多实验：**

1.  如果我在断点处停止后继续执行，应用程序在接收通知的代码中遇到 EXC_BAD_ACCESS 错误，在最后一行：

    ```
    id newResult = [newResultNotification object];

    if (newResult == nil)
        [NSException raise:@"No object"
                    format:@"Expected object with notification!"];
    else if (![newResult isKindOfClass:[NSString class]])
        [NSException raise:@"Not NSString"
                    format:@"Expected NSString object!"];
    else
        self.result = (NSString*) newResult;

    [self.textField setStringValue:self.result]; 
    ```

2.  当我试图重现之前的实验时，发生了更奇怪的事情。在我的调试设置中，我有两个哈希计算机对象：一个 SHMD5HashComputer（我们正在讨论）和一个 SHHashComputer（当然，它产生“未执行的”哈希）。在之前的所有实验中，只要app没有崩溃，通知表单SHHashComputer总是成功到达。但在这种情况下，**两个**通知都没有到达，应用程序也没有崩溃。（所有步骤与前一个完全相同）。

3.  正如 Josh Caswell 在评论中指出的那样，我没有正确使用通知。[如文档中所述，](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Posting.html)我应该将对象本身作为通知对象发送。我解决了这个问题，我得到了完全相同的结果。（这意味着我正确地修复了它，因为有时通知可以正常工作，而且这不是问题）。

**更多更新：**

我发送的通知应该到达 SHHashResultViewController。这就是我创建它并注册通知的方式：

```
- (id)initWithHashType:(NSString *)hashType {

    self = [self initWithNibName:@"SHHashResultView" bundle:[NSBundle mainBundle]];
    if (self) {
        [self setHashType:hashType];
    }

    return self;
}

- (void)setHashType:(NSString *)hashType {

    [self.label setStringValue:[NSString stringWithFormat:@"%@:", hashType]];

    _hashType = hashType;
    NSString *notificationName = [NSString stringWithFormat:@"%@%@",
                                  gotResultNotification,
                                  _hashType];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(gotResult:)
                                                 name:notificationName
                                               object:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T00:27:55.093

实际上，这个问题是基于一个错误的前提。我认为通知从未通过，因为我从未看到 GUI 中显示的信息；但是，我的错误出现在控制器代码中（未在此处发布），这使得 GUI 首先获得哈希计算结果，然后才获得有关新输入的信息的情况成为可能——这导致删除所有文本并激活进度动画。

# c# - Autofac - 自动注册错误：找不到带有“公共绑定标志”的构造函数

> ID：10972932
> 
> 赞同：15
> 
> 时间：2012-06-10T22:43:49.033
> 
> 标签：c#, asp.net-mvc, entity-framework, autofac

这是我的 Global.asax.cs

```
public void RegisterContainersUsingAutofac()
    {
        //http://elegantcode.com/2009/01/07/ioc-libraries-compared/
        //http://www.codeproject.com/Articles/25380/Dependency-Injection-with-Autofac
        //https://code.google.com/p/autofac/
        //http://api.autofac.org/
        var builder = new ContainerBuilder();
        builder.RegisterModelBinders(Assembly.GetExecutingAssembly());
        builder.RegisterModelBinderProvider();
        //builder.RegisterType<AuthenticationService>().As<IAuthenticationService>();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);

        //builder.RegisterAssemblyTypes(typeof(SecurityService).Assembly).
        //      Where(t => t.Name.EndsWith("Service")).AsImplementedInterfaces().InstancePerHttpRequest();
        builder.RegisterType(typeof(UnitOfWork)).As(typeof(IUnitOfWork)).InstancePerLifetimeScope()
            .OnRelease(x =>{((IUnitOfWork)x).Commit();});

        builder.RegisterAssemblyTypes(typeof(UserRepository).Assembly).Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces();
        builder.RegisterAssemblyTypes(typeof(SecurityService).Assembly).Where(t => t.Name.EndsWith("Service")).AsImplementedInterfaces();

        IContainer container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
    } 
```

而且我遇到以下错误：“公共绑定标志”无法找到“AppBase.Service.UserService”类型的构造函数。

我注册了我实现的存储库和服务接口，但我哪里出错了？它在以下中断。

这是我的用户服务

```
 public interface IUserService
{
    int Login(string userNameOrEmail, string password, out int errorcode, out int timeout);
    bool Register(string userName, string password, string email, string country, string language, out int errorCode);

    bool Register(User user, out int errorCode);
    bool ResetPassword(string username, string email, string oldPassword, string newPassword, out int errorCode);

    void DeleteUser(string userName);
}
public class UserService : IUserService
{
      private readonly IUserRepository userRepository;
     private UserService(IUserRepository _userRepository)
    {
        userRepository = _userRepository;

    }
    //other methods ...

} 
```

这是我的错误：

```
 [DependencyResolutionException: No constructors on type 'AppBase.Service.UserService' can be found with 'Public binding flags'.]
 Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) +261
 Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) +91
 Autofac.Core.Resolving.InstanceLookup.Execute() +135
 Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +434
 Autofac.Core.Resolving.InstanceLookup.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +61
 Autofac.Core.Activators.Reflection.<>c__DisplayClass2.<CanSupplyValue>b__0() +68
 Autofac.Core.Activators.Reflection.ConstructorParameterBinding.Instantiate() +201
             Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) +499
 Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) +91
 Autofac.Core.Resolving.InstanceLookup.Execute() +135
 Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +434
 Autofac.Core.Resolving.ResolveOperation.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +52
 Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +115
 Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +300
 Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) +103
 Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters) +218
 Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType, IEnumerable`1 parameters) +64
 Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType) +43
 Autofac.Integration.Mvc.AutofacDependencyResolver.GetService(Type serviceType) +49
 System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +51

 [InvalidOperationException: An error occurred when trying to create a controller of type 'AppBase.Web.Controllers.AccountController'. Make sure that the controller has a parameterless public constructor.]
 System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
 System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
 System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
 System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +232
 System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
 System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
 System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
  System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8968180
 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-10T23:32:14.090

我不确定为什么`UserService`有一个私有构造函数。是否有一个原因？

通过定义构造函数，`public UserService()`不再生成默认构造函数。

Autofac 只会注入到你现在没有的公共构造函数中。如果您将其更改为公开，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T02:50:29.610

@HackedByChinese 答案是正确的。

Re-sharper 建议我在我的服务层抽象中创建一个类。这也可以防止生成默认的公共构造函数。这让我有点烦恼，所以我认为它可能对其他人有帮助。

# forms - 使用地图列表以 symfony（推进）形式保存时无法执行插入语句

> ID：10972934
> 
> 赞同：0
> 
> 时间：2012-06-10T22:44:19.613
> 
> 标签：forms, symfony1, many-to-many, propel

在表单中的 doSave() 函数中，我试图保存文章类别（它是树中的一个节点），**然后分配给这个类别文章（多对多关系）**。我在`$this->saveWaArticleNewsCategoryMapList($con);`排队时遇到错误。（项目基于 symfony 1.4.16）。**将文章分配给现有类别时没有错误。**

```
public function doSave($con = null) {

$scope = $this->getValue('tree_scope');
$toEdit = $this->getObject();
if ($toEdit->isNew()) {
    $node = new ArticleCategory();
    $node->setBrandId($this->getValue('brand_id'));
    $node->setName($this->getValue('name'));
    $node->setTreeScope($scope);

    $root = ArticleCategoryQuery::create()->findRoot($scope);
    if ($root == null) {
        $root = new ArticleCategory();
        $root->setName('Root');
        $root->setTreeScopeIdValue($scope);
        $root->makeRoot();
        $root->save($con);

        $node->insertAsLastChildOf($root);
        $node->save($con);
        return;
    }
    $parent = ArticleCategoryQuery::create()->findPk($this->getValue('parent_id'));
    $node->insertAsLastChildOf($parent);
} else {
    $node = ArticleCategoryQuery::create()->findOneByArticleCategoryId($toEdit->getArticleCategoryId());
    $node->setBrandId($this->getValue('brand_id'));
    $node->setName($this->getValue('name'));
    if ($toEdit->getParent()->getArticleCategoryId() != $this->getValue('parent_id')) {
        $parent = ArticleCategoryQuery::create()->findPk($this->getValue('parent_id'));
        $node->moveToLastChildOf($parent);
    }
}
$node->save($con);
$this->saveArticleNewsCategoryMapList($con); <--Error
$this->saveArticleHelpCategoryMapList($con);
} 
```

错误：

```
Unable to execute INSERT statement [INSERT INTO `article_news_category_map` (`ARTICLE_ID`) VALUES (:p0)] [wrapped: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`projectname`.`article_news_category_map`, CONSTRAINT `article_news_category_map_FK_2` FOREIGN KEY (`category_id`) REFERENCES `article_category` (`article_category_id`) ON DELETE CASCADE)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:51:56.793

更新`ArticleCategoryId`对象解决了这个问题：

```
$node->save($con);
$this->getObject()->setArticleCategoryId($node->getArticleCategoryId());
... 
```

# java - Java，如何检查两个二维数组是否包含相同的值

> ID：10972938
> 
> 赞同：3
> 
> 时间：2012-06-10T22:44:49.780
> 
> 标签：java, arrays, multidimensional-array

我需要检查两个二维数组是否`[5][5]`包含相同的值，即使一个被洗牌。

如果两个数组包含相同的值，即使它们以不同的方式排列，我也需要该方法返回 true，例如：

*   1,2,3,4,5
*   6,7,8,9,10
*   11,12,13,14,15
*   16,17,18,19,20
*   21,22,23,24,25

和：

*   25,24,23,22,21
*   1,2,3,4,5,
*   7,8,9,10,6
*   20,19,18,17,16
*   15,14,13,12,11

当两者具有相同的值时，返回 true 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:28:51.623

这是我的解决方案。使用起来比较简单。

```
int[][] array1 = {
    {1,2,3,4,5},
    {6,7,8,9,10},
    {11,12,13,14,15},
    {16,17,18,19,20},
    {21,22,23,24,25}
};

int[][] array2 = {
    {25,24,23,22,21},
    {1,2,3,4,5},
    {7,8,9,10,6},
    {20,19,18,17,16},
    {15,14,13,12,11}
};

sort2D(array1);
sort2D(array2);

System.out.println(Arrays.deepEquals(array1, array2)); 
```

`true`在这种情况下打印。

该方法`sort2D`实现如下：

```
public static void sort2D(int[][] array) {
    for (int[] arr : array) {
        Arrays.sort(arr);
    }

    Arrays.sort(array, new Comparator<int[]>() {
        @Override
        public int compare(int[] o1, int[] o2) {
            return new BigInteger(Arrays.toString(o1).replaceAll("[\\[\\], ]", ""))
                .compareTo(new BigInteger(Arrays.toString(o2).replaceAll("[\\[\\], ]", "")));
        }
    });
} 
```

您可以通过预编译正则表达式来进一步优化它，但基本上，您应该明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:49:26.250

如果行中的数据是否相同无关紧要，但经过洗牌，我们可以将数组中的所有数字存储到单独的列表中，然后进行比较。

```
int[][] a1 = { { 1, 2 }, { 3, 4 } };
int[][] a2 = { { 4, 3 }, { 2, 1 } };

//lists to store arrays data
List<Integer> list1 = new ArrayList<Integer>();
List<Integer> list2 = new ArrayList<Integer>();

//lest place data from arrays to lists
for (int[] tmp:a1)
    for (int i:tmp)
        list1.add(i);

for (int[] tmp:a2)
    for (int i:tmp)
        list2.add(i);

//now we need to sort lists
Collections.sort(list1);
Collections.sort(list2);

//now we can compare lists on few ways

//1 by Arrays.equals using list.toArray() 
System.out.println(Arrays.equals(list1.toArray(), list2.toArray()));
//2 using String representation of List
System.out.println(list1.toString().equals(list2.toString()));
//3 using containsAll from List object
if (list1.containsAll(list2) && list2.containsAll(list1))
    System.out.println(true);
else 
    System.out.println(false);

//and many other probably better ways 
```

* * *

如果行也必须包含相同的数字（但可以像 [1,2] [2,1] 但不像 [1,2][1,3] 那样洗牌）你可以做这样的事情

```
// lets say i a1 and a2 are copies or original arrays 
int[][] a1 = { { 1, 2 }, { 3, 4 } };
int[][] a2 = { { 4, 3 }, { 2, 1 } };
System.out.println(Arrays.deepToString(a1));// [[1, 2], [3, 4]]
System.out.println(Arrays.deepToString(a2));// [[3, 4], [1, 2]]

// lets sort data in each row
for (int[] tmp : a1)
    Arrays.sort(tmp);
for (int[] tmp : a2)
    Arrays.sort(tmp);
System.out.println("========");
System.out.println(Arrays.deepToString(a1));// [[1, 2], [3, 4]]
System.out.println(Arrays.deepToString(a2));// [[3, 4], [1, 2]]

// Now I want to order rows by first stored number.
// To do that I will use Array.sort with this Comparator
Comparator<int[]> orderByFirsNumber = new Comparator<int[]>() {
    public int compare(int[] o1, int[] o2) {
        if (o1[0] > o2[0]) return 1;
        if (o1[0] < o2[0]) return -1;
        return 0;
    }
};

// lets sort rows by its first stored number
Arrays.sort(a1, orderByFirsNumber);
Arrays.sort(a2, orderByFirsNumber);

// i wonder how arrays look 
System.out.println("========");
System.out.println(Arrays.deepToString(a1));// [[1, 2], [3, 4]]
System.out.println(Arrays.deepToString(a2));// [[1, 2], [3, 4]]

System.out.println("Arrays.deepEquals(a1, a2)="
        + Arrays.deepEquals(a1, a2)); 
```

输出

```
[[1, 2], [3, 4]]
[[4, 3], [2, 1]]
========
[[1, 2], [3, 4]]
[[3, 4], [1, 2]]
========
[[1, 2], [3, 4]]
[[1, 2], [3, 4]]
Arrays.deepEquals(a1, a2)=true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T23:58:04.983

我建议你先对这些数组进行排序。如果您不希望值移动，您可以简单地创建现有数组的副本并使用这些副本。

这是我解决这个问题的代码：（它在不使用列表的情况下进行排序）

```
public class TwoDArraySort 
{
static int[][] arr1 = {{1,2,3,4,5}, {6,7,8,9,10}, {11,12,13,14,15}, {16,17,18,19,20}, {21,22,23,24,25}};
static int[][] arr2 = {{25,24,23,22,21}, {1,2,3,4,5}, {7,8,9,10,6}, {20,19,18,17,16}, {15,14,13,12,11}};

public static void main(String[]args) //The code below is meant to sort the second array
{
    int lowest;
    int switcher;
    int posX = -1;
    int posY = -1;

    for (int i=0; i<arr2.length; i++)
    {
        for (int z=0; z<arr2[i].length; z++)
        {
            lowest = arr2[i][z];

            for (int x=i; x<arr2.length; x++)
            {
                if (x == i)
                    for (int y=z; y<arr2[x].length; y++)
                    {
                        if (arr2[x][y] <= lowest)
                        {
                            lowest = arr2[x][y];
                            posX = x;
                            posY = y;
                        }
                    }
                else
                    for (int y=0; y<arr2[x].length; y++)
                    {
                        if (arr2[x][y] <= lowest)
                        {
                            lowest = arr2[x][y];
                            posX = x;
                            posY = y;
                        }
                    };
            }
            switcher = arr2[i][z];
            arr2[i][z] = arr2[posX][posY];
            arr2[posX][posY] = switcher; //Switches the lowest value to the first position that hasn't been changed already
        }
    }

    System.out.println(isSame(arr1, arr2)); //Calls the isSame method and print the returned boolean
}

//This method returns true if the arrays are the same
public static boolean isSame(int[][] arr1, int[][] arr2)
{
    for (int x=0; x<arr1.length; x++)
    {
        for (int y=0; y<arr1[x].length; y++)
        {
            if (arr1[x][y] != arr2[x][y])
            {
                return false;
            }
        }
    }

    return true;
}
} 
```

希望这可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:06:34.003

如果您需要一个非常有效的算法来确定列表/数组等价，其中两个列表/数组包含相同数量的项目但不一定以相同的顺序，请尝试以下算法。我从[这个](https://stackoverflow.com/q/50098/241294)堆栈溢出问题/答案中学到了它，这很棒！

```
boolean AreEquivalent(int[][] arrayOne, int[][] arrayTwo) {
  Dictionary<int, int> valueMap = new Dictionary<int, int>();

  // Add one for each occurrance of a given value in the first array
  for(int i=0; i<5; i++)
  for(int j=0; j<5; j++)
  {
    if (valueMap.containsKey(arrayOne[i][j]))
    {
      valueMap[arrayOne[i][j]]++;
    }
    else
    {
      valueMap[arrayOne[i][j]] = 1;
    }
  }

  // subtract one for each occurrance of a given value in the second array
  for(int i=0; i<5; i++)
  for(int j=0; j<5; j++)
  {
    if (valueMap.containsKey(arrayTwo[i][j]))
    {
      valueMap[arrayOne[i][j]]--;
    }
    else
    {
      // We can short circuit here because we have an item in the second
      // array that's not in the first array.
      return false;
    }
  }

  // now check the final tally, if not 0 the two arrays are not equivalent
  for (int tally: valueMap.values())
  {
    if (tally != 0)
    {
      return false;
    }
  }

  return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T23:49:52.470

这是 MaxMackie 建议的示例。我正在将数组转换为列表，因为要比较 2x 2d 数组，您需要 4 个周期，第一个数组需要 2 个，第二个需要 2 个。

```
// to list
ArrayList<Integer> list1 = new ArrayList<Integer>();
ArrayList<Integer> list2 = new ArrayList<Integer>();
for (int i = 0; i < 5; i++) {
    for (int j = 0; j < 5; j++) {
        list1.add(array1[i][j]);
        list2.add(array2[i][j]);
    }
}

// comparing
boolean isInBoth;
for (int i = 0; i < 25; i++) { // 1st list
    isInBoth = false;
    for (int j = 0; j < 25; j++) { // 2nd list
        if (!isInBoth) { // if not found number in 2nd array yet
            if (list1.get(i) == list2.get(j)) { // if numbers are equal
                isInBoth = true; 
            }
        }
    }

    if (!isInBoth) { // if number wasn't in both lists
        return; 
    }
}

if (isInBoth) {
    System.out.println("Arrays are equal");
} 
```

# javascript - element.style.display="" 不显示 div（还有一个父 div）

> ID：10972941
> 
> 赞同：0
> 
> 时间：2012-06-10T22:45:23.037
> 
> 标签：javascript, javascript-events

我想我可能缺乏对 div 关系的理解？

最终，目标是使“元素” div 在蓝色“父” div 的顶部向下滑动。

但是当前的重点是简单地使其显示（显示最初设置为“无”）。

我不确定为什么这不起作用...

```
 <style type="text/css">
#parent {
    height: 100px;
    width: 100px;
    background-color: blue;
}

#element {
    height: 50px;
    width: 50px;
    background-color: red;
    display: none;
}
</style>

  <body>
<div id="element"></div>
    <div id="parent" onclick="peekDown('element');"> </div>
  </body>

<script type="text/javascript">
//<![CDATA[
function peekDown(id) {
    var element = document.getElementById(id);
    element.style.display = "";
    console.log(element.style.display);
}
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:48:57.547

假设没有其他错误，以下：

```
function peekDown(id) {
    var element = document.getElementById(id);
    element.style.display = "";
    console.log(element.style.display);
} 
```

不能工作，因为虽然`element.style.display = '';`会取消设置在`display`属性中找到的`style`属性，但它*不会*取消设置或影响`display`样式表中设置的属性。

因此，您需要明确使用`display = 'block';`：

```
function peekDown(id) {
    var element = document.getElementById(id);
    element.style.display = "block";
    console.log(element.style.display);
} 
```

相反，您可以将元素`className`的 更改为`display`元素：

```
function peekDown(id) {
    var element = document.getElementById(id);
    element.className = "newClass";
    console.log(element.style.display);
} 
```

这依赖于明确的 CSS 声明`.newClass`：

```
.newClass {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:47:40.483

将`.style.display`属性设置为`""`删除该属性的任何内联样式（您的代码没有任何内联样式）并允许应用样式表中的规则。

改为修改`.className`属性`#element {}`并`#element.someDescriptiveClass {}`在您的样式表中包含 and 。

# heroku - 无法运行“git push heroku master”

> ID：10972943
> 
> 赞同：1
> 
> 时间：2012-06-10T22:45:27.637
> 
> 标签：heroku, playframework, sbt

我在 Windows 7 和 ubuntu 12.04 上试过。在这两种情况下，我都收到有关无法获取依赖项的错误。我正在遵循[http://www.playframework.org/documentation/2.0.1/ScalaTodoList](http://www.playframework.org/documentation/2.0.1/ScalaTodoList)和[http://www.playframework.org/documentation/2.0.1/JavaTodoList的说明](http://www.playframework.org/documentation/2.0.1/JavaTodoList)

```
 Getting net.java.dev.jna jna 3.2.3 ...
       downloading http://s3pository.heroku.com/maven-central/net/java/dev/jna/j
na/3.2.3/jna-3.2.3.jar ...

       :: problems summary ::
       :::: WARNINGS
                [FAILED     ] net.java.dev.jna#jna;3.2.3!jna.jar: The HTTP respo
nse code for http://s3pository.heroku.com/maven-central/net/java/dev/jna/jna/3.2
.3/jna-3.2.3.jar did not indicate a success. See log for more detail. (40ms)

                [FAILED     ] net.java.dev.jna#jna;3.2.3!jna.jar: The HTTP respo
nse code for http://s3pository.heroku.com/maven-central/net/java/dev/jna/jna/3.2
.3/jna-3.2.3.jar did not indicate a success. See log for more detail. (40ms)

        ==== heroku-central: tried

          http://s3pository.heroku.com/maven-central/net/java/dev/jna/jna/3.2.3/
jna-3.2.3.jar

                ::::::::::::::::::::::::::::::::::::::::::::::

                ::              FAILED DOWNLOADS            ::

                :: ^ see resolution messages for details  ^ ::

                ::::::::::::::::::::::::::::::::::::::::::::::

                :: net.java.dev.jna#jna;3.2.3!jna.jar

                ::::::::::::::::::::::::::::::::::::::::::::::

       :::: ERRORS
        SERVER ERROR: Gateway Timeout url=http://s3pository.heroku.com/maven-cen
tral/net/java/dev/jna/jna/3.2.3/jna-3.2.3.jar

       :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
       download failed: net.java.dev.jna#jna;3.2.3!jna.jar
       Error during sbt execution: Error retrieving required libraries
         (see /tmp/build_2alkkctoiqzvf/project/boot/update.log for complete log)

       Error: Could not retrieve jna 3.2.3
 !     Failed to build app with sbt
 !     Heroku push rejected, failed to compile Play 2.0 app

To git@heroku.com:falling-stone-8800.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:falling-stone-8800.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:26:16.563

今天（2012 年 6 月 10 日）这似乎是一个系统范围的错误。您的代码或部署方法很可能没有任何问题，它可能只是 Heroku 打嗝。由于同样的系统错误，我整个早上都无法将更改推送到我的（工作的）Java Play 2.0 应用程序。

我已经提交了一张罚单，并会敦促其他人也这样做。

# php - 使 1 项数组被视为一个数组

> ID：10972946
> 
> 赞同：0
> 
> 时间：2012-06-10T22:45:57.797
> 
> 标签：php, arrays

我目前正在开发一个 php 项目，我正在尝试使用 foreach 遍历一个数组。但是，有时数组可能只包含 1 个项目，因此当我尝试执行 foreach 时，它会失败，因为 1 个项目只是被视为普通变量。

有没有办法让 php 认为 1 项数组实际上是一个数组而不仅仅是一个变量，这样我就不会收到这个错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:49:18.257

`foreach`将适用于大小为 0,1 或更大的数组。我怀疑您的问题是，该变量实际上并不包含数组，而是一些标量值-在这种情况下，请使用类似

```
if (!is_array($var)) $var=array($var);
foreach ($var as $item) {
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:49:23.863

```
if(is_array($arr))
    $arr2=$arr
else
    $arr2=array($arr) 
```

然后你迭代`$arr2`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-10T22:49:00.970

我建议只使用标准 for 循环。无论数组的长度是多少，它都应该工作

```
for($i = 0, $l = count($myArray); $i < $l; $i+=1){
  //code in here
} 
```

但是您的阵列很可能开始出现问题。发布结构会有所帮助，或者您应该 var_dump 它以确保它确实是一个数组。

# visual-studio - Visual Studio 错误：无法加载 XmlPeek 任务的参数。必须设置 XmlContent 或 XmlInputPath 参数之一

> ID：10972952
> 
> 赞同：2
> 
> 时间：2012-06-10T22:46:58.407
> 
> 标签：visual-studio

我今天打开 VS 发现在我构建项目时出现了这个错误。自昨天以来我没有改变任何东西，当时它工作得很好。

`Unable to load arguments for the XmlPeek task. One of XmlContent or XmlInputPath arguments must be set.`

当然，这个错误没有与之关联的行或任何其他可能有用的东西......

该项目位于带有控制台输出的 .NET 4 Framework 中。

关于发生了什么的任何想法？我当然尝试用谷歌搜索，但我发现的少数回答与内容管道（本项目不使用）有关。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T12:00:34.163

如果我删除了游戏的内容项目，我会收到此错误。**通过将正确的内容引用添加到Content References**目录中已解决此问题。

我有两个项目（`proj1`和`proj2`），每个项目都有自己的内容项目（`proj1_content`和`proj2_content`）。我想为这两个项目创建一个共同的内容项目，因此我删除了这两个项目`proj1_content`并`proj2_content`创建了一个名为`common_content`. 之后，出现了提到的错误。解决方案是转到每个项目的**Content References**目录并**添加**指向`common_content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T15:45:35.873

由于硬件问题，我不得不放入新的 SSD 并重新安装 VS。除了我在 Winforms 项目中的 XNA 之外，我所有的项目都有效。相当大（12,000 行手写代码）真的不想尝试上面的“将其全部复制到新项目中”解决方案。以为我会尝试看看哪些版本有效。在我添加安装程序项目之前的所有版本都有效。实际上，我添加然后删除安装程序的版本已损坏。所以我不确定安装程序是如何（或是否）破坏它，但我发现主项目文件的一部分缺少条目，并且它也引用了 XNA（我所有的非 XNA 项目都构建得很好）。请注意，我已使用 <YourMainProjectName> 将我的项目名称替换为对您的项目名称的引用。如果您的项目是 joesgreatproject，则使用该文本代替 <YourMainProjectName>（不要包含 <> 符号）。我认为这只是因为 XNA 没有内容目录并且需要对其进行引用。

文件：<YourMainProjectName>.csproj

<ItemGroup>
   <ProjectReference Include="..\<YourMainProjectName>Content\<YourMainProjectName>Content.contentproj">
      <Name><YourMainProjectName>Content</Name> <XnaReferenceType>Content</XnaReferenceType>
   </ProjectReference>
</ItemGroup >

# javascript - Javascript OnPaste

> ID：10972954
> 
> 赞同：22
> 
> 时间：2012-06-10T22:47:14.277
> 
> 标签：javascript, input, copy-paste

我现在有这个：

`<input type="text" placeholder="Paste text" onPaste="alert(this.value);">`

这确实有效，除了它返回一个空白警报窗口。我没有任何价值。帮助？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-10T22:50:21.140

该`onpaste`事件在`input`'s`value`更改之前触发。你需要一些东西，比如[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)：

```
<input type="text" placeholder="Paste text" onPaste="var e=this; setTimeout(function(){alert(e.value);}, 4);">​ 
```

我将对全局变量的引用存储`this`在全局`this`变量中，因为在附加到窗口对象的超时函数的范围内无法访问。

我使用 4 毫秒作为超时，因为它是 HTML5 规范中的最小有效间隔/超时。**编辑：**如评论中所述，您也可以使用`0`毫秒作为 timeOut，它会自动重新计算为`4`. [**jsPerf 测试**](http://jsperf.com/smallest-timeout/8)。

[***小提琴***](http://jsfiddle.net/ult_combo/HzkCw/)

您也可以在`onpaste`事件传递中使用函数调用`this`作为参数，以防止 HTML 与 JS 混合过多。:)

这是一个更易于阅读的函数，您可以在多个输入中使用它：

```
function pasted(element) {
    setTimeout(function(){
        alert(element.value);
    }, 0); //or 4
}​ 
```

`onPaste="pasted(this)"`任何输入都可以简单地调用它。

[***小提琴***](http://jsfiddle.net/ult_combo/HzkCw/1/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-10T22:56:20.690

这是因为`onpaste`事件**在**内容粘贴到元素（[链接](http://help.dottoro.com/ljuimtmq.php)）之前触发，因此在您处理它时它还不存在。

现代浏览器支持在事件处理程序中获取剪贴板数据的方法。有关跨浏览器解决方案尝试，请参阅[JavaScript 在粘贴事件（跨浏览器）上获取剪贴板数据。](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)

此外，您始终可以通过在事件处理函数中启动一个计时器（10ms 应该足够）来解决您的问题，以便稍后检查您的输入值。

# django - Django：使用聚合显示基本民意调查应用程序的投票数

> ID：10972957
> 
> 赞同：0
> 
> 时间：2012-06-10T22:47:41.077
> 
> 标签：django, django-aggregation

我正在制作一个非常基本的投票应用程序。它与 Django 教程中的类似，但我选择将计票方面分解为它自己的模型（教程只是`vote`在每个模型旁边添加一个计数字段`answer`）。这是我的模型：

```
class PollQuestion(models.Model):
    question = models.CharField(max_length=75)

class PollAnswer(models.Model):
    poll = models.ForeignKey('PollQuestion')
    answer = models.CharField(max_length=75)

class PollVote(models.Model):
    poll = models.ForeignKey('PollQuestion')
    answer = models.ForeignKey('PollAnswer')
    date_voted = models.DateTimeField(auto_now_add=True)
    user_ip = models.CharField(max_length=75) 
```

我正在尝试显示给定民意调查的所有投票数。这是我的视图代码：

```
from django.db.models import Count
poll_votes = PollVote.objects.select_related('PollAnswer').filter(poll=poll_id).annotate(num_votes=Count('answer__id')) 
```

当我输出这个查询的结果时，每次投票我只得到一行（例如，我看到大约 40 个我的投票的“答案”，每个代表对 5 个实际`PollAnswer`s 之一的投票）。如果我查看 Django 提出的查询，它会为投票中的每一票运行类似这样的内容：

```
SELECT `poll_answers`.`id`, `poll_answers`.`poll_id`, `poll_answers`.`answer` 
FROM `poll_answers` 
WHERE `poll_answers`.`id` = 101 
```

谁能在这里戳我正确的方向？我觉得这应该很容易。

编辑：为了完整起见，这是我的模板代码。

```
<ul>
    {% for vote in votes %}
        {{ vote.answer }} ({{ votes.num_votes }})<br />
    {% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:08:44.940

尝试：

```
 poll_votes = PollVote.objects.filter(poll=poll_id).annotate(num_votes=Count('answer__id')) 
```

或者：

```
poll_votes = PollVote.objects.values('poll', 'answer__answer').filter(poll=poll_id).annotate(num_votes=Count('answer__id')) 
```

相关文档： [Django 官方文档](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/#values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:36:18.010

没关系，在找到一个[使用与我相同类型的模型的教程](http://techrangers.cdl.ucf.edu/a-simple-poll-manager-with-django/)后自己修复它。

基本上修复是在视图中：

```
p = get_object_or_404(PollQuestion, pk=poll_id)
choices = p.pollanswer_set.all() 
```

在模板中：

```
{% for choice in choices %}
    <p class="resultsList">{{choice.answer}} - {{choice.pollvote_set.count}}</p>
{% endfor %} 
```

# vb.net - VB 2005 直接内存访问

> ID：10972958
> 
> 赞同：0
> 
> 时间：2012-06-10T22:47:42.863
> 
> 标签：vb.net, visual-studio, memory

我想知道我是否可以在 Visual Basic 2005 Windows 应用程序的当前进程中直接读取或写入值。

就像`*(DWORD*)(0x123456) = 1;`在 C++ 中一样，会将值 1 写入地址 0x123456。

所以无论如何在VB中只使用内置函数而不使用ReadProcessMemory和WriteProcessMemory来做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:19:03.590

如果你真的确定你需要这样做，你应该特别研究[Marshal Class](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal%28v=vs.100%29.aspx)`Marshal.WriteByte`。

但我很确定`Marshal`会大量使用 Win32 API 函数，所以它是否真的“内置”是值得怀疑的。

# android - 保存并上传多张图片

> ID：10972959
> 
> 赞同：2
> 
> 时间：2012-06-10T22:47:49.983
> 
> 标签：android, file-upload, bitmap

我正在尝试上传不止一张从相机拍摄的图像。我通过以下方式调用相机`Intent`：

```
public void TakePicture(int actionCode)
    {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        try
        {
            photo[0] = createTemporaryFile("spot", ".jpg");
        }
        catch(Exception e)
        {
            Log.v("ERROR SD!!", "Can't create file to take picture!");
            Toast.makeText(this, "Please check SD card! Image shot is impossible!", 10000);
        }

        fileUri = Uri.fromFile(photo[0]);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    } 
```

然后我将它上传到 PHP 服务器：

```
public void UploadImg()
    {
         HttpURLConnection conn = null;
         DataOutputStream dos = null;
         DataInputStream inStream = null; 

         // String exsistingFileName = "/sdcard/prueba.png";  --> Used for local files!!

         String lineEnd = "\r\n";
         String twoHyphens = "--";
         String boundary =  "*****";

         int bytesRead, bytesAvailable, bufferSize;
         byte[] buffer;
         int maxBufferSize = 1*1024*1024;
         String urlString = "http://myUrl.com/uploadimg.php";

         try
         {
             FileInputStream fileInputStream = new FileInputStream(photo[0].toString());

             // Open a URL connection to the Servlet
             URL url = new URL(urlString);

             // Open a HTTP connection to the URL
             conn = (HttpURLConnection) url.openConnection();

             conn.setDoInput(true);
             conn.setDoOutput(true);
             conn.setUseCaches(false);
             conn.setRequestMethod("POST");
             conn.setRequestProperty("Connection", "Keep-Alive");
             conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

             dos = new DataOutputStream(conn.getOutputStream());
             dos.writeBytes(twoHyphens + boundary + lineEnd);
             dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + photo[0] +"\"" + lineEnd);
             dos.writeBytes(lineEnd);

             // Create a buffer of maximum size
             bytesAvailable = fileInputStream.available();
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             buffer = new byte[bufferSize];

             // Read file and write it into form...
             bytesRead = fileInputStream.read(buffer, 0, bufferSize);

             while (bytesRead > 0)
             {
                 dos.write(buffer, 0, bufferSize);
                 bytesAvailable = fileInputStream.available();
                 bufferSize = Math.min(bytesAvailable, maxBufferSize);
                 bytesRead = fileInputStream.read(buffer, 0, bufferSize);
             }

             // Send multipart form data necesssary after file data...
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

             // Close streams
             fileInputStream.close();
             dos.flush();
             dos.close();
         }
         catch (MalformedURLException ex) { Log.e("MediaPlayer", "error: " + ex.getMessage(), ex); }
         catch (IOException ioe) { Log.e("MediaPlayer", "error: " + ioe.getMessage(), ioe); }

      try {
            inStream = new DataInputStream (conn.getInputStream());
            String str;

            while ((str = inStream.readLine()) != null)
            {
                 System.out.println("Server Response" + str);
            }
            inStream.close();
        }
        catch (IOException ioex) { Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex); }
    } 
```

我保存了 3 个不同的图像`photo[0]`：`photo[1]`和`photo[2]`。问题是，例如，当我拍摄两张照片时，它只上传其中一张，并且带有`size = 0`.

在我的代码中，`UploadImg()`我只显示`photo[0]`，但在“真实”代码中，我`for loop`在第一个之后使用 a ，`try`以便上传所有拍摄的图像。

知道我在做什么错吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:27:55.737

我已经解决了我的问题！我做了以下事情：我没有保存`photo` `File`，而是将它保存在带有图像位置的字符串中。

```
if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                for (int u = 0; u <= 2; u++)
                {
                    if (savedImgs[u].equals(""))
                    {
                        // Saving important info to be used later
                        imgs = u + 1;
                        savedImgs[u] = photo.toString();
                        break;
                    }
                } ... 
```

然后，当将图像上传到服务器时，我会这样做`for loop`：

```
public void UploadImg()
    {
         HttpURLConnection conn = null;
         DataOutputStream dos = null;
         DataInputStream inStream = null; 

         // String exsistingFileName = "/sdcard/prueba.png";  --> Used for local files!!

         String lineEnd = "\r\n";
         String twoHyphens = "--";
         String boundary =  "*****";

         int bytesRead, bytesAvailable, bufferSize;
         byte[] buffer;
         int maxBufferSize = 1*1024*1024;
         String urlString = "http://myUrl.com/uploadimg.php";

         for (int n = 0; n < imgs; n++)
         {
            try
             {
                 FileInputStream fileInputStream = new FileInputStream(savedImgs[n]);

                 // Open a URL connection to the Servlet
                 URL url = new URL(urlString);

                 // Open a HTTP connection to the URL
                 conn = (HttpURLConnection) url.openConnection();

                 conn.setDoInput(true);
                 conn.setDoOutput(true);
                 conn.setUseCaches(false);
                 conn.setRequestMethod("POST");
                 conn.setRequestProperty("Connection", "Keep-Alive");
                 conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);

                 dos = new DataOutputStream(conn.getOutputStream());
                 dos.writeBytes(twoHyphens + boundary + lineEnd);
                 dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + savedImgs[n] +"\"" + lineEnd);
                 dos.writeBytes(lineEnd);

                 // Create a buffer of maximum size
                 bytesAvailable = fileInputStream.available();
                 bufferSize = Math.min(bytesAvailable, maxBufferSize);
                 buffer = new byte[bufferSize];

                 // Read file and write it into form...
                 bytesRead = fileInputStream.read(buffer, 0, bufferSize);

                 while (bytesRead > 0)
                 {
                     dos.write(buffer, 0, bufferSize);
                     bytesAvailable = fileInputStream.available();
                     bufferSize = Math.min(bytesAvailable, maxBufferSize);
                     bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                 }

                 // Send multipart form data necesssary after file data...
                 dos.writeBytes(lineEnd);
                 dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

                 // Close streams
                 fileInputStream.close();
                 dos.flush();
                 dos.close();
             }
             catch (MalformedURLException ex) { Log.e("MediaPlayer", "error: " + ex.getMessage(), ex); }
             catch (IOException ioe) { Log.e("MediaPlayer", "error: " + ioe.getMessage(), ioe); }

          try {
                inStream = new DataInputStream (conn.getInputStream());
                String str;

                while ((str = inStream.readLine()) != null)
                {
                     System.out.println("Server Response" + str);
                }
                inStream.close();
            }
            catch (IOException ioex) { Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex); } 
         }
    } 
```

# jquery - jQuery：添加 delay() 和 removeClass() 后代码停止工作

> ID：10972961
> 
> 赞同：2
> 
> 时间：2012-06-10T22:48:19.200
> 
> 标签：jquery

这是我的代码...

```
 $('nav ul li').hover(function() {

    $(this).addClass('hoverIn');

  },
  function() {

    $(this).addClass('hoverOut');

  }); 
```

效果很好。

但是当我添加 delay() 和 removeClass() 时它不起作用，如下...

```
 $('nav ul li').hover(function() {

    $(this).addClass('hoverIn').delay(800).removeClass('hoverIn');

  },
  function() {

    $(this).addClass('hoverOut').delay(800).removeClass('hoverOut');

  }); 
```

我在这里做错了吗？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:56:11.267

`.delay()`仅适用于使用动画队列的 jQuery 方法，因此不适用于`removeClass()`.

该`removeClass()`操作仍会执行，但会立即执行，而不是延迟时间之后。

所以，当你这样做时：

```
$(this).addClass('hoverIn').delay(800).removeClass('hoverIn'); 
```

这与以下内容相同：

```
$(this).addClass('hoverIn').removeClass('hoverIn'); 
```

这与什么都不做一样，因此您看不到效果。

* * *

你可以这样解决你的问题`setTimeout()`：

```
 $('nav ul li').hover(function() {
    var self = $(this).addClass('hoverIn');
    setTimeout(function() {self.removeClass('hoverIn');}, 800);
  }, function() {
    var self = $(this).addClass('hoverOut');
    setTimeout(function() {self.removeClass('hoverOut');}, 800);
  }); 
```

* * *

或者，使用通用函数，如下所示：

```
jQuery.fn.addClassTemporary = function(cls, t) {
    var self = this.addClass(cls);
    setTimeout(function() {self.removeClass(cls);}, t);
}

 $('nav ul li').hover(function() {
     $(this).addClassTemporary('hoverIn', 800);
 }, function() {
     $(this).addClassTemporary('hoverOut', 800);
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T23:09:32.697

正如其他人所提到的，`.removeClass()`它不是动画功能，因此不受任何排队效果的影响。

最简单的解决方案是使用`.queue()`将您的调用插入到动画队列中：

```
$(this).addClass('hoverIn').delay(800).queue(function() {
    $(this).removeClass('hoverIn').dequeue();
}); 
```

该`.dequeue()`调用对于确保任何其他排队操作仍然发生很重要。

请注意，使用动画队列还意味着您可以使用`.stop()`它来取消尚未发生的操作。使用计时器会使这变得*更加*复杂。

* * *

If you want to get really fancy, this plugin I just knocked out will allow you to add any *arbitrary* jQuery function into the animation queue:

```
(function($) {
    $.fn.queued = function() {
        var self = this;
        var func = arguments[0];
        var args = [].slice.call(arguments, 1);
        return this.queue(function() {
            $.fn[func].apply(self, args).dequeue();
        });
    }
}(jQuery)); 
```

with this, the line above would become:

```
$(this).addClass('hoverIn').delay(800).queued('removeClass', 'hoverIn'); 
```

demo at [http://jsfiddle.net/alnitak/h5nWw/](http://jsfiddle.net/alnitak/h5nWw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T23:00:04.420

jQuery .delay() 适用于动画队列，它不像 setTimeout 那样用作计时器...

为了您的目标，我可以建议您使用[hoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/Sq5qW/)示例！^(调整超时以满足您的需求)

**jQuery**

```
$("nav ul li").hoverIntent({    
    sensitivity: 1, // number = sensitivity threshold (must be 1 or higher)    
    interval: 10,   // number = milliseconds for onMouseOver polling interval    
    timeout: 800,   // number = milliseconds delay before onMouseOut    
    over:function(){
        $(this).removeClass("hoverOut").toggleClass("hoverIn");
    },
    out: function(){
        $(this).removeClass("hoverIn").toggleClass("hoverOut");
    }
}); 
```

# c# - 如何在代码中更新 WPF 中的动画或画布？

> ID：10972962
> 
> 赞同：0
> 
> 时间：2012-06-10T22:48:32.603
> 
> 标签：c#, wpf, xaml, data-binding, animation

我有一个关于 WPF 的问题。我全部用代码（C#）编写，没有 XAML。

*小程序说明：我从一个手机传感器变成价值观。在 wpf 程序中，我使用这些值在画布上的椭圆处制作不同的动画。*

我在服务器类中有一个 http 服务器，它获取值并将其写入变量。在我的 MainWindow() 中，我调用它，它为我的 DoubleAnimation 带来了 Duration：

```
 public MainWindow()
        {
            InitializeComponent();
            Canvas myPanel = new Canvas();
            ...
            Server server = new Server();
            server.GetData();
            float xxx ;
            xxx = server.duration;
            ... 
```

GetData() - 向服务器发出 http 请求，将响应写入可变持续时间。比我通过 server.duration 得到它；

它工作完美。

这是我的双重动画：

```
 DoubleAnimation anim = new DoubleAnimation();
        anim.Duration = new Duration(TimeSpan.FromSeconds(xxx));
        anim.From = 10;
        anim.To = 0;
        anim.AutoReverse = true;
        anim.RepeatBehavior = RepeatBehavior.Forever; 
```

在 MainWindow() 结束时，我将带有动画的对象添加到 Canvas：

```
myObject.BeginAnimation(Ellipse.OpacityProperty, anim);
        myPanel.Children.Add(myObject);
            this.Content = myPanel; 
```

它可以工作，但是当服务器带来新的持续时间值时，我需要更新我的持续时间。

**问题：**当我成为新的持续时间值时，如何使我的 DoubleAnimation 发生变化？

**换句话说问题：**如何循环 server.GetData(); 更新我的持续时间值？

**换句话说问题2：** Canvas 是否自动更新自己？如果是，它会在 MainWindow() 中调用自动 server.GetData()？

我将非常感谢任何示例和描述！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:25:21.853

这是我认为的解决方案。

```
var timer = new DispatcherTimer(...);
...
// Time interval of large value should be optimal, like 1 minute, 10 minute, etc.
...
timer.Tick += (o, a) => 
{            
        server.GetData();
        float xxx ;
        xxx = server.duration;
        ...

     DoubleAnimation anim = new DoubleAnimation();
        anim.Duration = new Duration(TimeSpan.FromSeconds(xxx));
        anim.From = 10;
        anim.To = 0;
        anim.AutoReverse = true;
        anim.RepeatBehavior = RepeatBehavior.Forever;

    myObject.BeginAnimation(Ellipse.OpacityProperty, anim);
}; 
```

...

# iphone - xCode 4.2.3 无法编译到 iOS 5.1.1 (9B208) 或 iOS 5.1.1 (9B206)

> ID：10972963
> 
> 赞同：2
> 
> 时间：2012-06-10T22:48:45.483
> 
> 标签：iphone, ios, ios5, xcode4.2, ios5.1

昨天经过大约一整晚的修补，我设法为 5.1.1 编译 那是在我最后一次绝望的尝试从 iOS 5.1.1 (9B208) 降级到 iOS 5.1.1 (9B206) 之后。

但是今天重启后我又回到了第一方。当我转到管理器并从顶部菜单中选择设备时，我会像以前一样收到以下文本：

> “xs iPhone”上的 iOS 版本与使用此 iOS SDK 安装支持开发的任何 iOS 版本不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。
> 
> 操作系统安装在 xs iPhone 5.1.1 (9B206)
> 
> Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2

让 xcode 和 iOS 结合起来必须如此复杂，我感到完全目瞪口呆。但是可以说我清理了xcode并重新安装了我的iphone。有没有一种安全的方法来编译最新的 IOS“当前 5.1.1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:55:33.377

正如其他人所指出的，您需要安装最新版本的 Xcode，即 4.3.2。

在最新的 iOS 更新和升级 Xcode 后，我们最近遇到了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:51:08.850

在将 Xcode 升级到最新版本之前，我遇到了类似的问题。升级应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:58:47.273

我遇到了类似的问题，我无法升级到 Xcode 4.3.x，因为我仍在运行 Snow Leopard，而 4.2 仍然是最新的 Xcode 版本。我按照这个答案中的步骤解决了这个问题

[https://stackoverflow.com/a/9621226/467813](https://stackoverflow.com/a/9621226/467813)

# php - PHP，杀死Windows进程？

> ID：10972968
> 
> 赞同：4
> 
> 时间：2012-06-10T22:49:37.327
> 
> 标签：php, windows, kill-process

有没有办法杀死一个 Windows 进程，比如说`calc.exe`，用 PHP 而不使用`exec`？

`exec`调用外部程序，除非必要，否则我会尽量避免使用该命令。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T22:56:01.843

有。

使用`W32api`PHP 扩展，它提供对 Win32 API 的访问 - 然后`TerminateProcess()`在获取进程句柄后使用 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T22:59:53.670

1.  在 PHP 源代码中定义新函数（纯 C）
2.  用定义的函数编译你的新 PHP 版本
3.  调用您在 PHP 源代码中定义的新函数

附言

通过这种方式，您可以使 PHP 能够使用 __asm { } 插入/添加一些内核代码，如果您想要的话......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:53:24.513

不，没有。PHP 对系统的访问很少，除了通过`exec`.

# java - 是否有 HashMap 连接元素

> ID：10972970
> 
> 赞同：4
> 
> 时间：2012-06-10T22:49:43.400
> 
> 标签：java, join, map, hashmap

是否有一个简单的函数用于将所有元素和键值连接到字符串

```
Map<String, String> m = new HashMap<String, String>();
m.put("lebron", "james");
m.put("kevin", "durant"); 
```

m.join(",") 应该产生："lebronjames,kevindurant"

我正在寻找使用 guava 或 apache common (StringUtils) Java libs 的更简单（不那么冗长）的解决方案，而不是遍历地图

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T23:10:18.637

使用**谷歌[番石榴库](http://code.google.com/p/guava-libraries/)**：

```
Map<String, String> m = new HashMap<String, String>(); 
m.put("lebron", "james");
m.put("kevin", "durant");

Joiner.MapJoiner joiner = Joiner.on(",").withKeyValueSeparator("");
System.out.println(joiner.join(m));  // return lebronjames,kevindurant 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T22:56:45.043

```
String mapString = m.toString();
String newStr = mapString.substring(1, mapString.length() - 1).replaceAll("=", ""); 
```

这依赖于[AbstractMap.toString()](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html#toString%28%29)的行为。我从来没有很舒服地依赖`toString`实现。

所以我更愿意迭代列表。而且实际上迭代也很简短：

```
for (String key : m.keySet())
   newStr += key + m.get(key) + ",";
newStr = newStr.substring(0, newStr.length() - 1); 
```

使用您喜欢的任何代码`StringBuffer`进行编辑。`StringBuilder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T02:40:13.953

在 Java 8 中，如果您使用`ConcurrentHashMap`

```
ConcurrentHashMap<String, String> m = new ConcurrentHashMap<>();
m.put("lebron", "james");
m.put("kevin", "durant");

String result = m.reduce(1, (k, v) -> (k + v), (r1, r2) -> r1 + "," + r2); 
```

# java - jpa 返回什么集合？

> ID：10972971
> 
> 赞同：1
> 
> 时间：2012-06-10T22:49:49.933
> 
> 标签：java, list, jpa, eclipselink

JPA（在这种情况下为 Eclipselink）是否总是返回 IndirectList 实体有一个列表？该列表可以吗？还是应该将其转换为另一个列表（可能是链表）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:42:47.020

# 分析

如果我们查看 EclipseLink 的[IndirectList 的 API](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/indirection/IndirectList.html)，它会说：

> 要使用 IndirectList：使用 IndirectList (jdk1.1) 或 Collection/List/Vector (jdk1.2) 类型声明适当的实例变量。
> 
> 当从数据库中读取包含域对象时，TopLink 将在实例变量中放置一个 IndirectList。将第一条消息发送到 IndirectList 后，从数据库中获取内容并恢复正常的 Collection/List/Vector 行为。

如果我们查看[IndirectList sources](http://grepcode.com/file/repo1.maven.org/maven2/toplink.essentials/toplink-essentials/2.1-60/oracle/toplink/essentials/indirection/IndirectList.java)，我们会看到，所有的工作都委托给它的原始集合，就像 API 说的那样。

# 答案

> JPA（在这种情况下为 Eclipselink）是否总是返回 IndirectList 实体有一个列表？

是的，它总是返回用 IndirectList 包装的指定集合。由于它将所有内部工作委托给包装的集合，因此它保留了它的工作方式。

> 该列表可以吗？还是应该将其转换为另一个列表（可能是链表）？

是的，可以使用 IndirectList。您无需转换，您只需定义所需的任何类型的集合，无需担心 IndirectList，因为它是透明管理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T08:04:36.857

由于`List`是一个接口，JPA 提供者可以自由地返回任何实现。EclipseLink 重新运行使用`IndirectList`a的`List`位置。这很好，因为它`IndirectList`是一个`List`.

为了记录或将来参考，使用 JPA 接口通常是最佳实践。

# android - 编写一个讨人喜欢的 Android GUI？

> ID：10972977
> 
> 赞同：1
> 
> 时间：2012-06-10T22:50:38.253
> 
> 标签：android, user-interface, text, graphics

我看到很多像 Pulse 这样的应用程序在 android 上有非常好的 UI：http: [//cdn3.digitaltrends.com/wp-content/uploads/2011/04/Pulse-android-625x515.jpg](http://cdn3.digitaltrends.com/wp-content/uploads/2011/04/Pulse-android-625x515.jpg)

我想制作一个类似于此的 UI：[http](http://wpuploads.appadvice.com/wp-content/uploads/2012/06/3030-642x481.png) ://wpuploads.appadvice.com/wp-content/uploads/2012/06/3030-642x481.png其中文本是可编辑/可选择/可复制的。基本上是一个实际的文本字段，我相信 Android 的画布不提供。我将如何在 Android 上创建这样的 UI。在我看来，Android 的正常 xml 布局通常最终会产生一些非常丑陋的东西，而 OpenGL 对于这种工作来说可能有点太高端了。有什么建议么。

我试着环顾论坛，找不到与这个问题真正相似的东西？而且我不是在寻找 GUI 构建器，而是在寻找更多实际开发 UI 的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:28:22.743

正如 Mark 所说，他们使用普通的 XML 布局。就个人而言，我从未看过它，因此我无法确定，但我也没有看到任何无法用它完成的“特别”。

关于第二个应用程序，我认为它可能比 Pulse 更简单。但是，它是高度定制的（可能是状态可绘制对象），并且您需要[`StateListDrawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)几个[9patch 图形](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)和您想要使用的自定义字体。

如果您不熟悉自定义控件的外观，我建议您开始查看上面的链接，当然还有 Google。

**最后一点：**设计一个好的 UI 很难，更不用说像上面那样或多或少从头开始的自定义 UI。Android UI 提供了您可以使用的默认外观... ICS 开箱即用要好得多，但仅此而已（至少它提供了默认工具来更改它）。如果您做不到，或者没有经验和/或技能，我建议您坚持默认设置或外包该工作。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T23:01:23.517

> 我试着环顾论坛，找不到与这个问题真正相似的东西？

那是因为你已经拒绝了答案。Pulse 是使用“Android 的正常 xml 布局”编写的，与游戏之外的大多数 Android 应用程序一样。

# c - 为我的 IRC 机器人处理 ident

> ID：10972980
> 
> 赞同：2
> 
> 时间：2012-06-10T22:51:00.680
> 
> 标签：c, irc, bots

我目前正在为学习目的在 C 中构建一个 IRC 机器人，用于学习目的。我在处理服务器发送给我的机器人的 ident 消息时遇到了一些麻烦。我知道我必须在端口 113 上侦听 ident 消息并发回 ident 响应。问题是我无法将创建的套接字绑定到端口 113 以侦听该消息。

我有什么方法可以绑定到端口 113 或解决此问题的其他方法吗？另外，我如何响应服务器发送的 ident 消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:34:33.513

绑定到低于 1024 的端口需要 Linux 上的 root 访问权限和 Windows 上的管理员权限。尝试以管理员用户身份运行，看看是否有帮助。如果仍然无法绑定，请检查 113 上没有其他服务正在运行：

```
# Windows
netstat -a | find "listening"
# Linux
netstat -lnptu 
```

同样，您可能需要以 root/admin 身份运行以查看正在使用的端口。

您可以在 RFC 上找到有关 Ident 的更多信息，[https://www.rfc-editor.org/rfc/rfc1413](https://www.rfc-editor.org/rfc/rfc1413)这实际上非常简洁。

此外，您可能不一定需要运行 Ident 服务来连接（尽管它是首选！），具体取决于网络。这将取决于您连接到的服务器，但请尝试等待服务器尝试的 Ident 查询失败并查看它的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:29:57.923

响应 ident 不是您的机器人所拥有的特权或责任。ident 协议的重点是让机器识别网络客户端正在运行的用户，以及客户端连接到的删除服务器；这是为了在发现客户滥用行为时确定责任方，以便可以追究滥用行为的用户而不是外壳盒的管理员的责任。

# javascript - Android股票浏览器中的双击行为

> ID：10972983
> 
> 赞同：1
> 
> 时间：2012-06-10T22:51:16.043
> 
> 标签：javascript, android

我这里有一个页面：

[http://lonbus.net](http://lonbus.net)

我通过包含以下行禁用了移动浏览器上的双击缩放：

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

这样做是因为当按下页面上的按钮时，很容易意外触发双击缩放。

这行得通。然而，在galaxy s2手机（可能是其他手机）上，双击现在似乎将整个页面向上移动或向左移动两个，在页面的一侧显示白条。关于为什么会发生这种情况的任何想法......以及是否有办法完全捕获双击事件并在浏览器中忽略它？

迄今为止的研究表明没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:21:17.247

要处理双击事件，请查看[这篇文章](http://mscerts.programming4.us/programming/coding%20javascript%20for%20mobile%20browsers%20%28part%2010%29%20-%20event%20handling.aspx)。

要取消事件，您可以使用以下代码：

```
function eventHandler(e) {
    if (!e) var e = window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation();
} 
```

# iphone - 将 UIImage 绘制到 CALayer.contents 中不会渲染图像数据

> ID：10972985
> 
> 赞同：5
> 
> 时间：2012-06-10T22:51:22.107
> 
> 标签：iphone, ios, graphics, core-animation, calayer

我正试图让图像出现在`CALayer.contents`. 这似乎很简单，但无论我做什么，我都无法渲染图像。渲染很好，`CALayer`因为我可以看到它的背景颜色和角半径，但图像不会加载。

![在此处输入图像描述](../Images/1bc6cf101bc1ee321100c19b9d6932b3.png)

您在这里看到的是一个`CAGradientLayer`应用了掩码的子类。内部正方形是我希望图像显示的地方，它被添加为子类的子层`CAGradientLayer`。

设置它的代码非常简单。在`init`：

```
self.imageLayer = [CALayer layer];
self.imageLayer.cornerRadius = kDefaultCornerRadius;
self.imageLayer.backgroundColor = [UIColor darkGrayColor].CGColor;
[self addSublayer:self.imageLayer]; 
```

然后稍后，我设置了图像：

```
- (void)setImage:(UIImage *)image {
    self.imageLayer.contents = (id)image.CGImage;
    [self.imageLayer setNeedsDisplay];
} 
```

最后，在`setFrame`：

```
CGFloat imageSize = self.bounds.size.width - 2*kDefaultMargin;
[self.imageLayer setBounds:CGRectMake(0.0, 0.0, imageSize, imageSize)];
[self.imageLayer setPosition:CGPointMake(self.bounds.size.width/2.0f, kDefaultMargin + imageSize/2.0f)];
[self.imageLayer setNeedsDisplay]; 
```

我已经知道或检查过的事情：

1.  该层显然是正确添加的，因为它是可见的。
2.  图像已添加并有效。`[UIImage imageNamed:@"info.png"]`正在代码中的其他地方使用，并实际显示和图像。1x 时为 16x16，2x 时为 32x32
3.  代码以正确的逻辑顺序调用：`init`, `setImage:`, `setFrame`;

这里发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T23:23:02.013

删除这一行：

```
[self.imageLayer setNeedsDisplay]; 
```

[`-setNeedsDisplay`](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004500-CH1-SW18)告诉图层它需要重绘其内容。由于您已经为图层提供了内容，因此您不希望 CA 丢弃该内容并要求更换。

# windows - 来自图像列表的 PNG 图像

> ID：10972986
> 
> 赞同：4
> 
> 时间：2012-06-10T22:51:46.543
> 
> 标签：windows, delphi, png, delphi-2010, delphi-xe6

如何从 a 中拍照`TImageList`并将其放入 a `TImage`（或将其返回为 a `TGraphic`）？

重要的一点是 a`TImageList`可以包含 32-bpp alpha 混合图像。目标是获取这些 alpha 混合图像之一并将其放置在`TImage`. 这意味着在某些时候我可能需要一个`TGraphic`. 虽然严格来说，我的问题是将**ImageList**中的图像放入**Image**。如果这可以在没有中间体的情况下完成，`TGraphic`那也很好。

# 我们想要什么？

我们想要一个函数的胆量：

```
procedure GetImageListImageIntoImage(SourceImageList: TCustomImageList; 
      ImageIndex: Integer; TargetImage: TImage);
begin
   //TODO: Figure this out.
   //Neither SourceImageList.GetIcon nor SourceImageList.GetBitmap preserve the alpha channel
end; 
```

还有另一个有用的中间辅助函数：

```
function ImageListGetGraphic(ImageList: TCustomImageList; ImageIndex: Integer): TGraphic;
var
//  ico: TIcon;
    bmp: TBitmap;
begin
    {Doesn't work; loses alpha channel. 
    Windows Icon format can support 32bpp alpha bitmaps. But it just doesn't work here
    ico := TIcon.Create;
    ImageList.GetIcon(ImageIndex, ico, dsTransparent, itImage);
    Result := ico;
    }

    {Doesn't work; loses alpha channel.
    Windows does support 32bpp alpha bitmaps. But it just doesn't work here
    bmp := TBitmap.Create;
    bmp.PixelFormat := pf32bit;
    Imagelist.GetBitmap(ImageIndex, bmp);
    Result := bmp;
    }
end; 
```

让我们将原始过程转换为：

```
procedure GetImageListImageIntoImage(SourceImageList: TCustomImageList; ImageIndex: Integer; TargetImage: TImage);
var
   g: TGraphic;
begin
   g := ImageListGetGraphic(SourceImageList, ImageIndex);
   TargetImage.Picture.Graphic := g; //Assignment of TGraphic does a copy
   g.Free;
end; 
```

我也有一些随机的东西：

```
Image1.Picture := TPicture(ImageList1.Components[0]); 
```

但这不会编译。

PS我有德尔福2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:59:09.113

```
ImageList1.GetBitmap(0, Image1.Picture.Bitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T17:38:00.807

Routine to get a transparent graphic out of an **ImageList**:

```
function ImageListGetGraphic(ImageList: TCustomImageList; ImageIndex: Integer): TGraphic;
var
    ico: HICON;
//  png: TPngImage;
//  icon: TIcon;
//  bmp: TBitmap;
    wicbmp: IWICBitmap;
    wi: TWicImage;
begin
{   //Works. Uses our own better Wic library.
    ico := ImageList_GetIcon(ImageList.Handle, ImageIndex, ILD_NORMAL);
    Result := TWicGraphic.FromHICON(ico);
    DestroyIcon(ico);}

    //Works, uses the built-in Delphi TWicImage (careful of VCL bugs)
    ico := ImageList_GetIcon(ImageList.Handle, ImageIndex, ILD_NORMAL);
    wi := TWICImage.Create; //Due to a bug in the VCL, you must construct the TWicImage before trying to access the Wic ImagingFactory
    OleCheck(TWicImage.ImagingFactory.CreateBitmapFromHICON(ico, wicbmp));
    wi.Handle := wicbmp;
    Result := wi;

{   //Doesn't work, loses alpha channel
    icon := TIcon.Create;
    ImageList.GetIcon(ImageIndex, icon, dsTransparent, itImage);
    Result := icon;
    }

{   //Doesn't work, loses alpha channel
    bmp := TBitmap.Create;
    bmp.PixelFormat := pf32bit;
    Imagelist.GetBitmap(ImageIndex, bmp);
    Result := bmp;
    }

{   //Fails: cannot assign a TIcon to a TPngImage
    icon := TIcon.Create;
    ImageList.GetIcon(ImageIndex, icon, ImgList.dsNormal, itImage);
    png := TPngImage.Create;
    png.Assign(icon);
    Result := png;
    icon.Free;
    }

{   //Working failure; doesn't support stretched drawing (e.g. TImage.Stretch = true)
    icon := TIcon.Create;
    ImageList.GetIcon(ImageIndex, icon, ImgList.dsNormal, itImage);
    Result := ico;
    }

end; 
```

Sample usage:

```
g: TGraphic;

g := ImageListGetGraphic(ImageList1, 7);
Image1.Picture.Graphic := g;
g.Free; 
```

> **Note**: Any code released into public domain. No attribution required.

# php - 浏览器关闭时保存会话数据

> ID：10972989
> 
> 赞同：0
> 
> 时间：2012-06-10T22:52:47.277
> 
> 标签：php, session, session-state

我想知道保存购物车的最佳方法是什么。即使用户关闭浏览器，我也希望购物车详细信息（它们是会话变量）保持不变。我会考虑在触发窗口关闭事件后立即将数据保存在表中，但我不确定 jquery unLoad 或 beforeUnload 事件是否是我需要的，因为它们似乎不适用于不同的浏览器。

我很感激任何让我走上正确道路的指示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T22:59:34.073

当浏览器关闭时，与其在浏览器中保留会话 cookie 不如说是。如果我理解正确，您正在使用会话（即 $_SESSION 变量），所以它应该相对容易。PHP 的函数[session_set_cookie_params](http://us2.php.net/manual/en/function.session-set-cookie-params.php)很可能是要走的路；还有一个选项`session.cookie_lifetime`（在[此处](http://us2.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)找到）可以进一步解释会话的 cookie 生命周期，即使您自己无法设置。

会话 cookie 的生命周期以秒为单位；因此，如果您将其设置为 60 秒并访问该站点，则会话 cookie 将仅持续 60 秒，然后丢弃 cookie，从而有效地破坏了会话。将生命周期设置为较高的数字以防止这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:56:10.433

由于会话数据是服务器端的，并且浏览器只有一个会话 ID，因此您需要做的就是使会话 ID 持续更长时间。

这是通过编辑`php.ini`设置来完成的，尤其是那些与会话 cookie 的生命周期有关的设置。如果是`0`，则在浏览器关闭时清除 cookie。

尝试将其设置为较高的数字。这将使会话持续存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T22:56:21.783

也许在数据发生变化时保存数据，而不是在浏览器关闭时保存。可以保存在数据库、本地存储或 Cookie 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T22:58:16.307

为什么不只是保留您的购物车数据呢。如果您在他们在网站上时需要它，而当他们离开时您仍然需要它，请坚持下去。当会话被放弃时可靠地恢复是很棘手的，因为它们可能会关闭机器或终止浏览器进程。应该保存对购物车的每一次更改，直到他们明确终止他们的购物车或与之关联的 cookie。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T23:02:31.983

您只需在数据更改后立即保存数据。为什么要等？有人将商品添加到购物车后，请立即保存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-10T23:02:33.200

jQuery unLoad 方法适用于任何地方。当您谈论表时，我假设您想将购物车存储在数据库中。因此，您必须对服务器进行同步 ajax 调用，以便 PHP 可以存储它并可能返回一个标识符，您应该将其放入 cookie 中。

问题是这个过程可能需要相对较长的时间（1-2s）。我只是提供一个保存按钮。

# javascript - 用于 Rails JSON API 的有用 nodejs 库

> ID：10972995
> 
> 赞同：0
> 
> 时间：2012-06-10T22:54:43.687
> 
> 标签：javascript, ruby-on-rails, json, node.js, titanium

我正在制作一个 Titanium 移动应用程序。

它与 Rails JSON API 有关系。

我必须为 Rails 模型对象制作一些模型对象。这太烦人了。（寻呼等）

我想知道将 javascript 模型类映射到 Rails 模型类的 javascript 库。（就像backbone.js中的模型）

我搜索了 npm 注册表，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:33:21.960

如果您没有设置 Backbone，您可以查看带有[映射插件的](http://knockoutjs.com/documentation/plugins-mapping.html)[Knockout.js](http://knockoutjs.com/)。虽然您仍然需要为每个模型创建类，但您不需要完全填充它们。我最近为此经常使用的一种模式：

```
function SubModel(data, parent){
   var self = this;
   ko.mapping.fromJS(data,{},this);

   //Various computed items and functions to work with this model
}

function Model(data, parent){
   var self = this;
   ko.mapping.fromJS(data,{
      subModel:{
         create: function(options){
            return new SubModel(options.data, self);
         }
      }
   }, this);
   //Various computed items and functions to work with this model
} 
```

然后，您从服务中获取 JSON，执行 a`new Model()`并将数据传递给它，然后 Knockout 将从 JS 中创建该类的所有各种属性。任何嵌套对象都可以以与映射相同的方式处理`SubModel`，直至任意深度。

此外，映射插件还包括一个`toJS`函数，允许您将已创建的模型重新序列化为`fromJS`JSON。

# c++ - 是否有更多的输出缓冲区？

> ID：10972997
> 
> 赞同：1
> 
> 时间：2012-06-10T22:54:59.787
> 
> 标签：c++, stream, iostream

是否有更多的输出缓冲区？如果是这样，是否`endl`只刷新与关联的输出缓冲区`cout`？如果只有一个缓冲区，那么是什么让这两个对象`cerr`不同`clog`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:02:51.767

`endl`刷新您将其流式传输到的任何流的输出缓冲区。例如：

```
cout << ... << endl;   // flushes the output buffer of 'cout'
cerr << ... << endl;   // flushes the output buffer of 'cerr'
ofstream file("filename");
file << ... << endl;   // flushes the output buffer of 'file' 
```

`cerr`和之间的唯一区别`clog`是`clog`默认情况下是缓冲的，而`cerr`不是。`std::unitbuf`您可以使用和`std::nounitbuf`操纵器为任何流打开或关闭缓冲。例如：

```
cerr << nounitbuf;   // cerr is now buffered
clog << unitbuf;     // clog is now unbuffered 
```

注意“unitbuf”的意思是“使缓冲区大小为1”，即关闭缓冲。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T23:51:13.793

C（及其起源的 UNIX 环境）中的 I/O 是通过数据“流”完成的，这些数据“流”是可以读取或写入（或两者兼而有之）的抽象字节序列，例如文件系统中的文件或设备，例如终端（或屏幕和键盘。）

C 标准库头文件`<stdio.h>`声明了一个类型，该类型`FILE`用作数据流的句柄。它还声明了`stdin`,`stdout`和`stderr`，`FILE*`分别表示标准输入流、标准输出流和标准错误流。

C++ 标准库定义了可用于`std::istream`与`std::ostream`数据流交互的类（统称为 iostreams）（术语有点混乱，因为 C++ iostreams 类有时简称为“流”，但同一个词也表示抽象数据`<stdio.h>`FILE` 引用的流。）

C++ 全局`std::istream`对象`std::cin`与标准输入流相关联（即与`stdin`所指的流相同），全局`std::ostream`对象`std::cout`与标准输出流相关联，而全局对象`std::cerr`和`std::clog`是不同的对象，但都与标准错误流相关联。

`cerr`和之间的区别在于`clog`，默认情况下`clog`使用一个 streambuf 将写入它的字符存储在内部缓冲区中，并且仅在缓冲区填满或显式刷新时将该数据写入标准错误流，而`cerr`'s streambuf 没有内部缓冲，所以一切都直接写入标准错误流。因为它们是单独的对象，所以它们具有单独的流缓冲区，具有不同的默认行为，但最终写入相同的标准错误流。

`std::endl`可以写入任何`std::ostream`，因此如果您写入`std::cout << std::endl`，它将刷新与 关联的流`cout`，这通常是标准输出流。如果您编写`std::clog << std::endl`它将刷新与 关联的流`clog`，这通常是标准错误流。

# ruby-on-rails - Rails HTTP Basic 检查是否经过身份验证？

> ID：10972998
> 
> 赞同：0
> 
> 时间：2012-06-10T22:55:17.143
> 
> 标签：ruby-on-rails, authentication, basic-authentication

我一直在谷歌上搜索这个并没有发现任何有用的东西：

假设您在 Rails 中使用 http 基本身份验证，是否有一种简单的方法可以检查用户是否经过身份验证？IE。一种您可以在视图中执行以下操作的方法：

```
- if http_basic_authenticated?
  # show admin menu 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:36:07.443

尝试这个：

```
class ApplicationController < ..

  before_filter :authenticate

  def authenticate
    authenticate_or_request_with_http_basic do |username, password|
      @authenticated = username == "foo" && password == "bar"
    end
  end

  def authenticated?
    @authenticated
  end
  helper_method :authenticated?

end 
```

您现在可以`authenticated`在您的视图中使用。

请写测试！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T01:53:33.423

使用可通过`ApplicationController`.

```
class ApplicationController < BaseController

...

  def authorize
    session[:authorized] = true
  end

  def http_basic_authenticated?
    session[:authorized]
  end

  def end_session
    session[:authorized] = nil
  end

end 
```

PS 我不是安全专家，所以我无法评论在生产环境中使用它的适用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:17:37.550

好吧，正如我所知，没有办法告诉视图请求**未通过身份验证**，您可以告诉视图它已通过**身份验证**，但为什么呢？让我们看看请求的过程：

1.  客户要求
2.  控制器
3.  看法

而在第二步中，特定控制器的方法，它是通过身份验证方法**之前过滤**的，也就是说，如果你可以进入第三步 - 视图，则请求必须经过**身份验证**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T12:58:29.367

从[官方代码](https://github.com/rails/rails/blob/25b14b4d3238d5474c60826ee1b359537af987ef/actionpack/lib/action_controller/metal/http_authentication.rb#L70)中，您可以提取片段以在 ApplicationController 继承的任何控制器中使用类似的内容：

```
class ApplicationController < BaseController
  ...
  protected # Only inherited controllers can call authorized?
  def authorized?
    request.authorization.present? && (request.authorization.split(' ', 2).first == 'Basic')
  end
...
end 
```