# StackOverflow 问答 10267000-10267999

# apache-flex - Flash Builder 本地主机工作 100% 远程主机只显示每个条目的对象标题

> ID：10267000
> 
> 赞同：0
> 
> 时间：2012-04-22T10:01:58.097
> 
> 标签：apache-flex, flash-builder, flash-builder4.5, flex4.6

我终于让我的 Flash Builder 来查看我的远程服务，但现在我有一个问题，我的远程信息应该是相同的，除了更多的条目，只显示标题为 [object Object] 我有一个环顾四周，我看看我是否在本地测试服务，它正在工作，因为它调用了响应名称“对象”和响应值“对象”下的所有信息

在我的本地主机配置中，这显示了我的对象项中的名称。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:59:43.583

[object Object] 是 Object 的 toString() 方法的结果。如果您收到此信息，则可能意味着您的自定义对象类型作为通用对象从远程 AMF 服务返回。很多事情可能是造成这种情况的原因。这里有几个要检查的：

1) 确保您的自定义对象类型已编译到应用程序中。如果对象从未明确使用过，Flex 编译器不会将其放入最终的 SWF。您可以通过创建一个假变量来做到这一点：

```
private var myUnusedObject : MyCustomObjectType; 
```

或者，我相信，有一个编译器标志可以强制将未使用的类编译到 SWF 中。

2) 您可能必须在您的服务器上添加一个正式的映射。这主要取决于您使用的服务器端技术。在 AS3 中，您将 RemoteAlias 元数据添加到类。在 ColdFusion 中，您在 cfcomponent 标签上使用别名标签。我相信在 WerbORB.NET 中，我必须在 XML 配置文件中添加映射 [但我已经有好几年没有这样做了]。我假设替代技术使用类似的方法。

3) 检查您的服务器代码的路径名是否区分大小写，并确保别名（在 2 中提到）匹配。

4) 在 ColdFusion AMF 中，您必须确保您的公共属性和类型匹配。它们在您的 AS3 类中的顺序必须与它们在远程 CFC 中的顺序相同。属性类型必须匹配。字符串到字符串；布尔到布尔等...我假设其他 AMF 实现也有类似的限制。

# javascript - 无法在jquery中拆分字符串

> ID：10267008
> 
> 赞同：1
> 
> 时间：2012-04-22T10:02:30.347
> 
> 标签：javascript, jquery

```
 <table border="0"  class="commentbox">
   <tr>
     <td>
          <div id="comment-f78d0b00-a008-473d-b647-a4a103ee3778"></div>
         <input type="button" class='btnReply' id="reply-f78d0b00-a008-473d-b647-a4a103ee3778" value="Reply"/>

     </td>
 </tr>
</table>

  $(".commentbox .btnReply").live("click", function () {
            //  $(this).hide();
            // i = 1;
            id = $(this).attr("id").split("-")[1]
            alert(id);
            var strDiv = 
             "<input type='text' class='txtCmnt' id='txtReply-" + id + "' /> 
        <input type='button' class='btnSave' value='Save' id='btnSave-" + id + "' /> ";
            $("#comment-" + id).append(strDiv);

        }); 
```

我希望 f78d0b00-a008-473d-b647-a4a103ee3778 在拆分后出现，而不是警报给 **f78d0b00**

我试图更改 id = comment_ f78d0b00-a008-473d-b647-a4a103ee3778 并拆分

```
id = $(this).attr("id").split("_")[1],but it doesnt work. 
```

**已编辑**

**输入**- 容器-f78d0b00-a008-473d-b647-a4a103ee3778

**拆分后的输出**f78d0b00-a008-473d-b647-a4a103ee3778

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:16:48.053

实现最终结果的一种稍微复杂的方法：

```
// splits the supplied string by the hyphen '-' character
var string = 'comment-f78d0b00-a008-473d-b647-a4a103ee3778'.split(/-/);
    // removes the zeroeth/first element from the string array
    string.shift();
    // joins the remaining elements from the string back together
var newString = string.join('-');
console.log(newString);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uWCgg/1/)。

* * *

**编辑**将上述内容转换为函数：

```
function splitString(haystack, needle){
    if (!needle || !haystack){
        return false;
    }
    var string = haystack.split(needle);
    string.shift();
    return string.join(needle);
}

// the first argument is the string you want to work on,
// the second is the character you want to split on
// f is the variable that will hold the new string
var f = splitString('comment-f78d0b00-a008-473d-b647-a4a103ee3778','-');
console.log(f);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uWCgg/2/)。

参考：

*   [`join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join).
*   [`shift()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/shift).
*   [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:12:27.550

如果字符串的格式不会改变，那么如何使用 substring 函数呢？

```
var str = "comment-f78d0b00-a008-473d-b647-a4a103ee3778";
var subStr = str.substring(str.indexOf("-") + 1);

alert(subStr); 
```

这将返回： f78d0b00-a008-473d-b647-a4a103ee3778 这里是相同的 jsfiddle [http://jsfiddle.net/M2Ywy/](http://jsfiddle.net/M2Ywy/)

如果它适合您，那么您的代码将如下所示

```
var id = $(this).attr("id");
var subStr = id.substring(str.indexOf("-") + 1);

alert(subStr);
var strDiv =
"<input type='text' class='txtCmnt' id='txtReply-" + id + "' /> <input type='button' class='btnSave' value='Save' id='btnSave-" + id + "' /> ";

$("#comment-" + subStr).append(strDiv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T10:16:28.933

## *[演示 jsFiddle](http://jsfiddle.net/TNrfJ/2/)*

这应该这样做：

```
 var id = '';
 var strDiv = '';
 $(".btnReply").live("click", function () {
            //  $(this).hide();
            // i = 1;
            id = $(this).prev('div').attr("id").split("comment-")[1];
            alert(id);
            strDiv = "<input type='text' class='txtCmnt' id='txtReply-"+ id +"' /><input type='button' class='btnSave' value='Save' id='btnSave-"+ id +"' />";
            $("div[id*="+id+"]").append(strDiv);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T11:00:52.890

你可以这样做，可能是更长的版本，但只有 3 行强。只是`split()`通过连字符的字符串`"-"`，然后拼接第一个索引，然后使用该`join()`方法重新加入整个字符串

示例：http: [//jsfiddle.net/eE48z/](http://jsfiddle.net/eE48z/)

```
$(document).ready(function(){
$(".commentbox .btnReply").click(function(){
var jid = $(this).attr("id").split("-");
jid.splice(0,1);
var id=jid.join("-");
alert(id);
var strDiv = "<input type='text' class='txtCmnt' id='txtReply-" + id + "' /><input type='button' class='btnSave' value='Save' id='btnSave-" + id + "' /> ";
        $("#comment-" + id).append(strDiv);
    });
}); 
```

# c# - 通过网络复制文件

> ID：10267017
> 
> 赞同：-1
> 
> 时间：2012-04-22T10:03:17.927
> 
> 标签：c#, networking, copy

我正在尝试使用 file.copy 将文件从本地 PC 复制到服务器。但 whitou 成功了。没有错误，但它没有显示在服务器上。我的许可没问题。

这就是我所做的。

```
 public static void UploadFiles(string path, string[] files, 
                         string[] uploadPlace, ObserverDelegate observerDelegete)
    {
        try
        {
            Directory.CreateDirectory(path);

            for (int i = 0; i < files.Count(); i++)
            {
                observerDelegete(files[i]);
                File.Copy(files[i], uploadPlace[i]);
            }
        }
        catch (UnauthorizedAccessException uoe) { }
        catch (FileNotFoundException fnfe) { }
        catch (Exception e) { }        
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T10:05:24.153

没有错误，因为您正在捕获并吞下*所有*可能的异常......

```
 catch (UnauthorizedAccessException uoe) { }
    catch (FileNotFoundException fnfe) { }
    catch (Exception e) { } 
```

这有效地掩盖了您作为程序员的错误。取出这些语句，重新编译代码，看看抛出了哪些异常。

这可能是权限或网络连接问题。Windows 足以让您确定。

# c# - 在 C# 中隐藏表单滚动条

> ID：10267023
> 
> 赞同：1
> 
> 时间：2012-04-22T10:04:06.257
> 
> 标签：c#, forms, scrollbar, hide

也许这不是一个新问题；但不幸的是我无法解决我的问题。

我的表单需要显示滚动条，但我不想一直使用滚动条。我想知道如何仅在特定条件下显示 ScrollBar。

例如：当表单超出工作区域边界时，我想设置特定的表单位置而不使用/显示滚动条。

因此我的问题是：如何在不使用滚动条的情况下水平移动表单？

**更新：**看来我的问题还不清楚。请找到以下条件：

1.  当表单边框小于页面时，表单需要 ScrollBar 功能。

2.  当窗体超出工作区边界时显示 ScrollBar。

我等待您的有用回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:17:21.997

您可以将 AutoScroll 设置为 false，然后以编程方式更新滚动值：

```
this.HorizontalScroll.Value = this.HorizontalScroll.Maximum; 
```

# java - JComboBox 上的 JScrollPane

> ID：10267032
> 
> 赞同：3
> 
> 时间：2012-04-22T10:05:49.250
> 
> 标签：java, swing, jscrollpane, jcombobox, scrollbars

我做了一个组合框，但有些元素比我的框宽。所以我尝试添加一个水平的滚动面板，我唯一能看到的是一个里面有一个组合框的滚动面板！当然，我做错了什么。所以这是我没有jscrollpane的代码。

```
 issuerdocumentJComboBox=new JComboBox<>(issuermodel);//the compo box
    issuerdocumentJComboBox.setBounds(430, 120, 100, 30);
    searchDocumentesJPanel.add(issuerdocumentJComboBox); 
```

如何向组合框添加水平滚动窗格？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T04:48:34.920

有可能的！！这是我写的一个小程序来展示我的解决方案：

```
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.ScrollPaneConstants;
import javax.swing.plaf.basic.BasicComboBoxEditor;

public class TestComboScroll {

    public static void main(String[] args) {
        JFrame frame = new JFrame("Scroll inside Combo");
        JComboBox combobox = new JComboBox();

        combobox.addItem("");
        combobox.addItem("Item1");
        combobox.addItem("Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2 Item2");
        combobox.addItem("Item3");

        combobox.setEditor(new MyEditor());
        combobox.setEditable(true);

        combobox.setPreferredSize(new Dimension(200, 50));
        frame.add(combobox);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    static class MyEditor extends BasicComboBoxEditor{
        JScrollPane scroller = new JScrollPane();
        //NOTE: editor is a JTextField defined in BasicComboBoxEditor

        public MyEditor(){
            super();
            scroller.setViewportView(editor); 
            scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        }

        /** Return a JScrollPane containing the JTextField instead of the JTextField **/
        @Override
        public Component getEditorComponent() {
            return scroller;
        }

        /** Override to create your own JTextField. **/
        @Override
        protected JTextField createEditorComponent() {
            JTextField editor = new JTextField();
            editor.setBorder(null);
            /*editor.setEditable(false); //If you want it not to be editable */
            return editor;
        }
    }
} 
```

方法是创建一个**自定义 ComboBoxEditor，在滚动窗格中显示 JTextField 编辑器**（更容易扩展 BasicComboBoxEditor）。然后重写该`getEditorComponent()`函数以返回滚动窗格而不是文本字段。

这两个覆盖函数在您调用时在内部调用`combobox.setEditor(new MyEditor())`，因此如果您看不到它正在使用，请不要担心。

这是程序的**屏幕截图**，显示了比组合框更宽的元素： ![截屏](../Images/69a23379762e61a36153166991b70380.png)

祝你好运！！:-)

# c# - KeyDown 事件未触发，KeyPreview 设置为 true

> ID：10267034
> 
> 赞同：3
> 
> 时间：2012-04-22T10:06:11.547
> 
> 标签：c#, .net, winforms, keydown, key-events

我正在构建一个小型表单应用程序，我刚刚启动它。但是我有这个问题：如果我在表单中放置一个控件，则 KeyDown 事件不会触发。我知道 KeyPreview 属性，并将其设置为 true。但这并没有帮助...... :(我也尝试将焦点设置为主要形式，也没有成功。

有什么想法吗？

编辑：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        KeyDown += new KeyEventHandler(Form1_KeyDown);
        this.KeyPreview = true;
    }

    void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Left: MessageBox.Show("Left");
                break;
            case Keys.Right: MessageBox.Show("Right");
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-17T10:41:32.273

我已经评论了我的解决方案，但我也将其作为答案发布，因此很容易找到。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    switch (keyData)
    {
        case Keys.Left:
            // left arrow key pressed
            return true;
        case Keys.Right:
            // right arrow key pressed
            return true;
        case Keys.Up:
            // up arrow key pressed
            return true;
        case Keys.Down:
            // down arrow key pressed
            return true;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:22:59.433

如果您在 WPF 上，您可以轻松捕获所需的事件，因为 WPF 使用[路由事件系统](http://msdn.microsoft.com/en-us/library/ms742806.aspx)来调度事件。在 winforms 中，我推荐以下两种方式之一：

## 1.使用[`Application.AddMessageFilter Method`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx)：

定义一个消息过滤器类：

```
public class KeyMessageFilter : IMessageFilter
{
    private enum KeyMessages
    {
        WM_KEYFIRST = 0x100,
        WM_KEYDOWN = 0x100,
        WM_KEYUP = 0x101,
        WM_CHAR = 0x102,
        WM_SYSKEYDOWN = 0x0104,
        WM_SYSKEYUP = 0x0105,
        WM_SYSCHAR = 0x0106,
    }

    [DllImport("user32.dll")]
    private static extern IntPtr GetParent(IntPtr hwnd);

    // We check the events agains this control to only handle
    // key event that happend inside this control.
    Control _control;

    public KeyMessageFilter()
    { }

    public KeyMessageFilter(Control c)
    {
        _control = c;
    }

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg == (int)KeyMessages.WM_KEYDOWN)
        {
            if (_control != null)
            {
                IntPtr hwnd = m.HWnd;
                IntPtr handle = _control.Handle;
                while (hwnd != IntPtr.Zero && handle != hwnd)
                {
                    hwnd = GetParent(hwnd);
                }
                if (hwnd == IntPtr.Zero) // Didn't found the window. We are not interested in the event.
                    return false;
            }
            Keys key = (Keys)m.WParam;
            switch (key)
            {
                case Keys.Left:
                    MessageBox.Show("Left");
                    return true;
                case Keys.Right:
                    MessageBox.Show("Right");
                    return true;
            }
        }
        return false;
    }
} 
```

所以你有一个类，Windows 窗体中的每条消息都通过它。你可以对事件做任何你想做的事情。如果[`PreFilterMessage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.prefiltermessage.aspx)方法返回 true，则意味着不应将事件分派给它的相应控件。

（请注意，`Keys`枚举中的值几乎与[虚拟键码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731.aspx)相同）

在此之前，您必须将其添加到应用程序的消息过滤器中：

```
public partial class Form1 : Form
{
    // We need an instance of the filter class
    KeyMessageFilter filter;

    public Form1()
    {
        InitializeComponent();

        filter = new KeyMessageFilter(panel1);
        // add the filter
        Application.AddMessageFilter(filter);
    }

    protected override void OnFormClosed(FormClosedEventArgs e)
    {
        base.OnFormClosed(e);

        // remove the filter
        Application.RemoveMessageFilter(filter);
    }
} 
```

该过滤器仅在`Form1`.

注意：这将捕获任何形式的事件！如果您希望它仅适用于一种表单，请将表单传递给过滤器类，并将其[`Handle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handle.aspx)属性与`m.HWnd`in进行比较`PreFilterMessage`

## 2\. 使用[Windows 挂钩](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589.aspx)：

这是一种更高级和更复杂（和低级）的方法。它需要更多的代码。我写了一个`HookManager`类，使这个过程非常简单。我将把课程发布到 github 并写一篇关于它的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:14:35.483

您观察到的行为的原因是特殊键（如 TAB、UP/DOWN/LEFT/RIGHT ARROW、PAGE UP/DOWN、HOME、END 等）通常被常用控件视为“输入键”。

例如，箭头键被 TabControl 视为“输入键”，因为这些键允许您更改选定的 TabPage。多行文本框也存在类似的行为，其中箭头键允许您移动文本光标。

我假设您拥有的 Rumba Mainframe 控件出于相同的原因做同样的事情。您可以尝试覆盖它并更改 IsInputKey 方法的实现或处理 PreviewKeyDown 事件并将 IsInputKey 属性设置为 true。

有关详细信息，请参阅[Control.IsInputKey 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.isinputkey%28v=vs.100%29.aspx)和[Control.PreviewKeyDown 事件的文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:12:08.170

方向键是一种特殊键，由 Controls 自动处理。因此，如果您想让他们引发 KeyDown 事件，您可以：

1) 在表单的每个控件中覆盖 isInputKey 方法

或者

2) 处理 PreviewKeyDown 事件并将 IsInputKey 属性设置为 true

更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)找到。

我知道 WonderCsabo 已经解决了他的问题，但其他人悬赏它，因为遇到了同样的问题并且没有选择答案。WonderCsabo 也请发布您的解决方案作为答案。

# sql-server - 选择 SQL Server 数据类型以获得最大速度

> ID：10267046
> 
> 赞同：4
> 
> 时间：2012-04-22T10:09:02.867
> 
> 标签：sql-server, database-design, types, sql-server-2008-r2

我正在设计一个需要优化以获得最大速度的数据库。

所有的数据库数据都是从我称之为输入数据库的东西中生成的（它包含我正在编辑的数据，主要是谷歌地图的一些折线、标记等）。

所以数据库不需要编辑，但它需要尽可能多地保存数据，以便快速向用户显示结果（穿过城镇的路线、自定义折线等）。

问题是：选择较小的数据类型，例如 smallint 而不是 int 会提高性能还是会影响性能？空间不是问题，经过一些快速计算，数据库不会超过 200mb，不会有超过 100.000 行的表（平均在 5.000 左右）。

我问这个是因为我在互联网上阅读了一些文章，有些人说较小的数据类型可以提高性能，另一些人说它会影响它，因为必须进行额外的处理。我知道，对于较小的数据库，结果可能并不明显，但我对每一点都很感兴趣，因为我期待许多请求会触发更多查询。

托管环境将是带有 SQL Server 2008 R2 的 Windows Server 2008 R2。

**编辑 1：**只是给你一个例子，因为我还没有合适的表格结构：我将有一张桌子，可以容纳公共交通线路（大约 200 条），由现实生活中的唯一数字标识，并且将在各种表中引用它，并且将在其上进行各种操作。这些引用表将保存最大量的数据。

因为线条有唯一的编号，所以我想到了 3 个设计示例：

1.  PK 是数据类型的行号：smallint

2.  PK 是数据类型的行号：int

3.  PK 有所不同（例如身份），行号存储在不同的字段中。

4.  只是为了争论，因为我在不进行优化的“输入数据库”上使用了它，所以 PK 是一个 GUID（16 字节）；如果你愿意，你可以比较一下这与其他人相比有多糟糕，如果真的是

所以请记住，PK 将在至少 15 个表中被引用，其中一些将有超过 50.000 行（其余的平均为 5.000，如上所述），这些行将受到不断的查询和操作，我我对我能得到的每一点速度都很感兴趣。

如果您需要，我可以更详细地说明这一点。谢谢

**编辑2：**我想到了另一个与此相关的问题，认为它适合这个讨论：

如果我从我的 .NET 应用程序内部使用本机 SQL 查询而不是使用 LINQ to SQL，我会**在这个特定场景中**看到任何性能改进吗？我知道 LINQ 进行了高度优化，并且在性能方面产生了非常好的查询，但仍然值得一问。再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:52:07.770

你能指出一些文章说更小的数据类型 = 更多的处理吗？请记住，即使使用 SSD，今天的大多数工作负载也是 I/O 绑定（或内存绑定）而不是 CPU 绑定。

特别是在要在许多表中引用 PK 的情况下，使用可能的最小数据类型将是有益的。在这种情况下，如果这是一个`SMALLINT`，那么这就是我将使用的（虽然你说大约有 200 个值，所以理论上你可以使用`TINYINT`一半大小并支持 0-255）。如果您不能 100% 确定总会有大约 200 个值，那么您需要谨慎行事。一旦您需要 256，您将不得不更改所有受影响表中的数据类型，这将是一件痛苦的事情。因此，有时会在适应未来增长和挤压当今绝对最大的性能之间进行权衡。如果你不确定你永远不会超过 255 或 32,000 个值，那么我可能只是一个`INT`. 除非你也不知道你永远不会超过 20 亿个值，在这种情况下你会使用`BIGINT`.

`INT`//之间的差异在磁盘空间上比在性能上更明显`SMALLINT`。`TINYINT`（如果您使用的是 Enterprise，磁盘空间和性能的差异可以使用数据压缩来抵消很多 - 特别是当您的`INT`值都适合`SMALLINT`/`TINYINT`时，尽管在后一种情况下它确实可以忽略不计，因为值是独特的。）另一方面，这些之间的差异`GUID`将在性能和磁盘空间方面更加明显。Marc 提供了一些来自 Kimberly 的很棒的链接；[我在 2003 年写了这篇文章](http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html)，虽然它有点过时，但它确实包含了今天仍然相关的大部分要点。

有时需要考虑的另一个权衡（尽管似乎不是在您的特定情况下）是值是否需要在多个系统中是唯一的。这是您可能需要牺牲一些性能以满足业务需求的地方。在很多情况下，人们会采取简单的方法并接受`GUID`. 但也有其他解决方案，例如身份范围、中央自定义序列生成器和 SQL Server 2012 中的新`SEQUENCE`对象。我在 2010 年 SQL Server 2012 的第一个公共测试版发布时[写过。`SEQUENCE`](https://sqlblog.org/2010/11/11/sql-server-v-next-denali-using-sequence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:15:42.023

我认为您将需要提供有关表结构和将对它们运行的​​示例查询的更多详细信息。根据您提供的信息，我相信选择较小的数据类型的影响只有几个百分点，我建议您更加关注您将拥有的索引。SQL Server 通过为您的查询和调优顾问工具提供执行计划，在建议创建哪些索引方面做得很好

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-07T19:19:24.733

我的一个建议是合并十进制数据类型，而不是使用字段组合。例如，我建议不要使用包含 Date (YYYYMMDD)、Store (SSSS) 和 Item (IIII) 的表，而是...YYYYMMDD.SSSSIIII。尤其是在使用相同的组合键查询多个表时，它极大地缩短了处理时间。

# java - 如何在 Java 中生成 xml？

> ID：10267047
> 
> 赞同：3
> 
> 时间：2012-04-22T10:09:02.933
> 
> 标签：java, xml, sax

请告诉我，如何在 Java 中生成 XML？我找不到任何使用 SAX 框架的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-13T13:37:04.640

试试[Xembly](https://github.com/yegor256/xembly)，这是一个小型开源库，它使用“流利”界面包装原生 Java DOM：

```
String xml = new Xembler(
  new Directives()
    .add("root")
    .add("order")
    .attr("id", "553")
    .set("$140.00")
).xml(); 
```

会产生：

```
<root>
  <order id="553">$140.00</order>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T10:14:03.520

SAX 是一个用 Java 解析现有 XML 文件的库。不是用 Java 创建新的 XML 文件。如果您想这样做，请使用 DOM4J 之类的库来创建 XML 树，然后将其写入文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T10:14:19.110

看到[这个](http://www.informit.com/library/content.aspx?b=STY_XML_21days&seqNum=221)，[这个](http://www.javazoom.net/services/newsletter/xmlgeneration.html)，[使用 SAX 和 Java 生成 XML](https://stackoverflow.com/questions/4898590/generating-xml-using-sax-and-java)和[这个](http://blogger.ziesemer.com/2007/06/xml-generation-in-java.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T10:24:11.647

如果您想轻松地将 java 对象映射/转换为 XML，您还可以使用[JAXB](http://docs.oracle.com/javaee/5/tutorial/doc/bnbay.html "JAXB")或[SimpleXML](http://simple.sourceforge.net/ "简单XML")或[XStream等库。](http://xstream.codehaus.org/ "Xstream")

假设我们有一个简单的实体/pojo - Item。pojo 类的属性可以通过简单的注释成为 XML 的元素或属性。

```
@Entity @Root public class Item {

@Attribute
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private Long id;

@Transient
@ManyToOne
private Order order;

@Element
private String product;

@Element
private double price;

@Element
private int quantity; } 
```

要从此项目生成 XML，代码可以很简单

```
Serializer serializer=new Persister();//SimpleXML serializer
    Item itemToSerializeToXml=new Item(2456L, "Head First Java", 250.00,10);//Object to be serialized
    StringWriter destinationXMLWriter=new StringWriter();//Destination of XML
    serializer.write(itemToSerializeToXml,destinationXMLWriter);//Call to serialize the POJO to XML
    System.out.println(destinationXMLWriter.toString()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T10:24:28.387

使用 dom4j，这里是**dom4j的快速入门**

[dom4j 指南](http://dom4j.sourceforge.net/dom4j-1.6.1/guide.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-19T16:10:23.127

[我在https://github.com/jmurty/java-xmlbuilder](https://github.com/jmurty/java-xmlbuilder)的 GitHub 上找到了一个不错的 XML 创建库。至少对于简单的文档真的很有用（我没有机会将它用于超过大约十几行的任何内容）。

这个库的好处是它的每个命令（即创建属性、创建元素等）都有 3 级缩写。例如，要将标签添加`<foo>`到文档中，您可以使用以下方法：

*   `.e("foo")`（单字母形式）
*   `.elem("foo"`（4个字母形式）
*   `.element("foo")`（完全拼写形式）

这允许在适当的情况下使用更长和更缩写的代码创建 XML，因此它非常适合各种编码风格。

# c++ - 如何将可变长度字符串从 RPC 服务器传递到客户端？

> ID：10267050
> 
> 赞同：5
> 
> 时间：2012-04-22T10:09:09.323
> 
> 标签：c++, winapi, rpc, idl

我正在用 C++ 实现一个 Windows 系统服务，它充当 RPC 服务器和一个相应的客户端。我正在使用普通的 Windows RPC 功能。

将字符串从 RPC 客户端传递到服务器很容易。只需像这样在 IDL 文件中声明函数参数：

```
[in, string] wchar_t* myString 
```

MIDL 将负责内存分配魔法。像一种享受一样工作。

返回修改后的客户端字符串也很容易：

```
[in, out, string] wchar_t* myString 
```

不过，这需要我在客户端正确调整字符串的大小。

**问题：**

我需要将字符串从服务器返回到客户端。我不知道客户端会有多大，所以客户端上的内存分配不是一个选项。

我*可以*分配一个非常大的内存量，比如 10K，对于服务器可能返回的每个字符串来说足够大。但这是对资源（内存、网络）的巨大浪费，我仍然无法确定服务器永远不需要返回更大的字符串。

**我尝试了什么：**

在许多其他事情中，我尝试了 Microsoft 的[strout](http://msdn.microsoft.com/en-us/library/aa373823%28VS.85%29.aspx)示例中使用的技术。第一次调用 RPC 函数时它工作正常，但第二次调用时服务器崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T22:31:06.027

MSDN 页面[Multiple Levels of Pointers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374188%28v=vs.85%29.aspx)让我走上了正轨。通过那里给出的示例和解释，我设法使其工作。精华部分如下：

IDL 文件：

```
error_status_t ReturnsString
(
   [out]                   long*     size,
   [out, size_is(, *size)] wchar_t** outString
); 
```

服务器功能：

```
error_status_t ReturnsString (long* size, wchar_t** outString)
{
   wstring outStringWString = L"Return this to caller";

   int stringSize = sizeof(wchar_t) * (outStringWString.size() + 1);
   *outString = (wchar_t*) midl_user_allocate (stringSize * 2);
   wcscpy_s (*outString, stringSize, outStringWString.c_str());

   *size = outStringWString.size() + 1;

   return ERROR_SUCCESS;
} 
```

我不知道为什么需要乘以 2 (stringSize * 2)，但确实如此。如果省略，您将立即获得堆损坏。

客户端代码：

```
wchar_t** versionRPC = (wchar_t**) midl_user_allocate (sizeof(wchar_t*));
*versionRPC = NULL;     // Required to create a unique pointer
long stringSize = 0;
DWORD retVal = ReturnsString (&stringSize, versionRPC);

// Copy the returned string
wstring stringFromServer (*rpcString);

MIDL_user_free (*rpcString);
MIDL_user_free (rpcString); 
```

# php - 将文件中的值存储到 mySQL 数据库中

> ID：10267051
> 
> 赞同：0
> 
> 时间：2012-04-22T10:09:09.943
> 
> 标签：php, mysql

所以我试图让这个网站接受文本文档给它的值并将它们放入 mySQL 数据库中。我在我的 php 中运行的代码没有给我任何语法错误，但是这些值没有添加到数据库表中。

```
 $upload = new mysqli('localhost', 'uMoviesRoot', $_POST['password1']);

if (mysqli_connect_errno()) {
 echo "There as an error.";
 }

 else {
 mysql_select_db("localhost");
 $file= fopen($_FILES['Upload']['tmp_name'], 'r');

 while(! feof($file)){

$line = fgetcsv($file, 999);
if ($line[0] == "movie") {
    mysql_query("INSERT INTO movies (movie, year) VALUES ($line[1], $line[2])");    
    $movieCount++;
    $lastMovie = $line[1];

} 
```

只是一些背景知识，我在 mySQL 中创建了表（使用 MySQL 工作台）并制作了一个名为 movies 的模式。有名为 actor（2 列）、directed_by（2 列）、directors（1 列）、movies（2 列）和 perform_in（3 列）的表。我只在代码中添加了其中一个，只是为了让它更短（因为所有的 if 都做同样的事情）。

这是我的 PHP 代码的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:13:10.553

你应该`mysql_select_db("movies");`，`localhost`是你的服务器地址而不是数据库名称。

**更新**（不是 testet，但这应该可以）：

```
$upload = new mysqli('localhost', 'uMoviesRoot', $_POST['password1']);

if (mysqli_connect_errno()) {
  echo "There as an error.";
} else {
  mysql_select_db("movies");
  $file= fopen($_FILES['Upload']['tmp_name'], 'r');

  while(! feof($file)){
    $line = fgetcsv($file, 999);
    if ($line[0] == "movie") {
      mysql_query("INSERT INTO movies (movie, year) VALUES ('$line[1]', '$line[2]')");    
      $movieCount++;
      $lastMovie = $line[1];
    }
  }
} 
```

您还可以输出[mysql_error](http://php.net/manual/de/function.mysql-error.php)以查看错误。

如果您有来自用户输入的值，则应该查看[Prepared Statements](http://php.net/manual/en/pdo.prepared-statements.php)以避免 SQL 注入等。

# c# - 在 C# Asp.net 中单击按钮更改网格视图页面

> ID：10267053
> 
> 赞同：0
> 
> 时间：2012-04-22T10:09:22.587
> 
> 标签：c#, asp.net

我有一个问题，我想在单击按钮时更改网格视图页面。表示在 C# 中单击按钮时的网格视图分页概念。我必须单击具有特定数字文本的按钮，然后这将显示与单击的按钮相对应的特定网格视图页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:12:17.370

您可以为此使用[PageIndex](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pageindex.aspx)属性。

# c++ - 使用 GLM 加载 obj 文件

> ID：10267054
> 
> 赞同：2
> 
> 时间：2012-04-22T10:09:30.913
> 
> 标签：c++, opengl, glsl

我在使用 GLM 库从 obj 文件中加载纹理坐标时遇到了一些困难

使用 OpenGL 3.3

[http://www.cs.manchester.ac.uk/ugt/COMP37111/glm/glm.h](http://www.cs.manchester.ac.uk/ugt/COMP37111/glm/glm.h) [http://www.cs.manchester.ac.uk/ugt/COMP37111/glm/glm.c](http://www.cs.manchester.ac.uk/ugt/COMP37111/glm/glm.c)

我的印象是 obj 文件将具有与纹理坐标相同数量的索引（不重复）顶点，然后“GLMtriangle：Struct”将包含索引纹理坐标数组“texcoords”的顶点“GLuint tindices [3]” . 但是，我发现的示例没有与顶点相同数量的纹理坐标。

使用上述理解，我尝试通过循环遍历每个 GLMtriangle 并将索引纹理坐标添加到数组中，将所有纹理坐标放入数组中。给我每个顶点的纹理坐标。

*基于 C++ 的伪代码。*

```
for (the number of GLMtriangles)

    t= (the GLMtriangle index ) 

    //vertex0
    rawTextCoords[t] = GLMmodel->texcoords [GLMtriangle.tindices[0]];
    rawTextCoords[t+1] = GLMmodel->texcoords [GLMtriangle.tindices[0]+1];
    //vertex1
    rawTextCoords[t+2] = GLMmodel->texcoords [GLMtriangle.tindices[1]];
    rawTextCoords[t+3] = GLMmodel->texcoords [GLMtriangle.tindices[1]+1];
    //vertex2 
    rawTextCoords[t+4] = GLMmodel->texcoords [GLMtriangle.tindices[2]];
    rawTextCoords[t+5] = GLMmodel->texcoords [GLMtriangle.tindices[2]+1];
od 
```

这是我目前的输出。

![glm问题](../Images/bb43f2a647e435e8b166573a3efd052a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:41:54.607

您的示例伪代码至少看起来不错。

疯狂的猜测：您没有将正确的值传递给`glTexCoordPointer()`（或`glVertexAttribPointer()`）。如果输入太快，很容易弄错`size`or值。`type`从你的伪代码`size`需要是 2。

# assembly - 使用班次高效 MIPS

> ID：10267058
> 
> 赞同：0
> 
> 时间：2012-04-22T10:10:12.600
> 
> 标签：assembly, mips

我有一个家庭作业，我必须在 MIPS 汇编中编写一个函数，并且该函数必须使用轮班并且必须是最有效的。

汇编代码在 C 上调用`func(n1,n2,n3,n4,n5);`

这是我的代码，它按预期工作。

```
01          .data
02          .text
03          .globl  func
04
05  func:
06      
07      lw      $8, 16($29)     
08      addi    $29,$29, -20        
09      sw      $31,0($29)      
10      
11      # f = 16x1 + 8x2 + 4x3 + 2x4 + x5 This is what the function do
12      
13      
14      li      $9,0        
15      li      $10,0       
16      li      $11,16  
17
18              # Load the five function parameter on function
19      sb      $4,4($29)
20      sb      $5,8($29)
21      sb      $6,12($29)
22      sb      $7,16($29)
23      sb      $8,20($29)
24
25      la      $25,4($29)
26  loop:
27      
28      lb      $24,0($25)
29      mul     $12,$11,$24     
30      add     $9,$9,$12       
31      
32      srl     $11,$11,1       
33      addi    $25,$25,4
34      #addi   $29,$29,1
35      
36      addi    $10,$10,1       
37      ble     $10,4,loop      
38
39      
40      move    $2,$9           
41  end:    
42      
43      lw      $31,0($29)
44      addi    $29,$29,20      
45      jr      $31 
```

所以我要问的是，这段代码可以使用班次最有效地完成吗？

我已经做了一个`srl`访问要乘以的值，但不知道是否使用移位我可以访问函数的 5 参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:15:36.733

*   即使代码正常工作，您实际上并没有在堆栈上分配足够的空间。您正在分配 20 个字节，但您正在使用`sb $8,20($29)`.

*   您不必按 0 对寄存器进行索引：如果您只是这样做，则偏移量隐式为 0 `sw $31,($29)`。

*   我不知道您的课程中的约定是什么，但我建议对重要的寄存器使用别名，例如`$ra`代替`$31`、`$sp`代替`$29`等。我发现它更具可读性。

*   最后是乘法！这里有一个提示：

    `x << y`是一样的`x * (2^y)`。`x << 4`是`x * 16`，`x << 3`是`x * 8`，等等。

    主方程中的系数是 2 的所有幂吗？是的。这是我的建议：从 4 开始循环计数器并倒数到 0。这样您可以使用循环计数器作为移位值，并且无需使用 11 美元。

# php - 对于 php flush - 如何禁用特定文件的 gzip？

> ID：10267061
> 
> 赞同：14
> 
> 时间：2012-04-22T10:10:51.197
> 
> 标签：php, apache, apache2

我有一个对 somefile.php 的 ajax 调用。我希望 php 脚本执行一个简单的任务，而不是将数据发送回用户，并且只执行非常耗时的任务。所以我需要在第一个简单任务之后刷新输出。它不起作用，可能是因为我启用了 gzip。

我绝对不想在所有虚拟主机上禁用 gzip，也不想在 somefile.php 所在的所有文件夹中禁用 gzip。我只想为这个特定文件禁用它。那可能吗？

编辑：

这是我在我的 apache conf 中包含的内容：

```
<FilesMatch \.php$>
    SetEnv no-gzip 1
</FilesMatch> 
```

这是我的 php 脚本：

```
<?php
$sucesss = @apache_setenv('no-gzip', 1);
@ini_set('zlib.output_compression', 0);
@ini_set('implicit_flush', 1);

ob_start();

for($i=0;$i<10;$i++)
{
    echo 'printing...';
    ob_flush();
    flush();

    sleep(1);
}
?> 
```

它不起作用。10 秒后我仍然可以看到所有输出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-15T13:23:37.310

我一直在寻找相同问题的解决方案。这对我有用，但不幸的是它似乎不是一个有效的标题。

```
<?
header("Content-Encoding: none");
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-21T22:35:03.077

`apache_setenv()`是正确的。请参阅文档。

[http://php.net/manual/en/function.apache-setenv.php#60530](http://php.net/manual/en/function.apache-setenv.php#60530)

```
apache_setenv('no-gzip', '1'); 
```

您的问题是您使用[`ob_start()`](http://php.net/manual/en/function.ob-start.php). 把它注释掉。

我了解到这`apache_setenv()`仅适用于 PHP Apache 模块。使用 FPM 时不可用。在这种情况下，您必须使用`.htaccess`关闭 GZip。一个例子是

[https://stackoverflow.com/a/36212238/148844](https://stackoverflow.com/a/36212238/148844)

```
RewriteRule ^dashboard/index - [E=no-gzip:1]
SetEnvIf REDIRECT_no-gzip 1 no-gzip 
```

`-`表示 NOOP，表示`E`设置变量，`1`是值。重定向后，变量被重命名并以`REDIRECT_`.

如果输出仍在缓冲中，请检查您是否正在通过代理或缓存。查看是否存在类似`Via: 1.1 varnish`或的标题`Via: 1.1 vegur`。他们也会缓冲响应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T16:39:36.427

把它放在 httpd.conf

```
# exclude certain page requests (e.g. for requesting getMyFile.php?action=getFile&id=3 as non-compressed)
SetEnvIfNoCase Request_URI getMyFile\.php$ no-gzip dont-vary 
```

# jquery - 在元素上分层渐变

> ID：10267079
> 
> 赞同：2
> 
> 时间：2012-04-22T10:13:24.140
> 
> 标签：jquery, css, progress-bar

所以我有这个来自 jQ UI 的小进度条。[http://jsfiddle.net/BnqaJ/](http://jsfiddle.net/BnqaJ/) 但是对于当前的渐变，我想添加这样的条纹。[http://jqueryui.com/demos/progressbar/#animated](http://jqueryui.com/demos/progressbar/#animated)但不是动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:03:43.793

也许您可以使用[`repeating-linear-gradient`](https://developer.mozilla.org/en/CSS/repeating-linear-gradient)创建覆盖进度条的 CSS 模式。看到这个jsfiddle：http: [//jsfiddle.net/joshdavenport/Qw6uv/2/](http://jsfiddle.net/joshdavenport/Qw6uv/2/)。改变渐变的角度似乎会阻止渐变随元素移动：http: [//jsfiddle.net/joshdavenport/Qw6uv/4/](http://jsfiddle.net/joshdavenport/Qw6uv/4/)

它优雅地降级，没有支持它就不会出现，而进度条保持不变。

请查看[此页面](https://developer.mozilla.org/en/CSS/repeating-linear-gradient)以获取更多信息和浏览器支持信息

# language-agnostic - 什么是 ADT？（抽象数据类型）

> ID：10267084
> 
> 赞同：57
> 
> 时间：2012-04-22T10:13:38.797
> 
> 标签：language-agnostic, terminology, abstract-data-type

我目前正在研究抽象数据类型（ADT），但我根本不明白这个概念。有人可以向我解释这实际上是什么吗？还有什么是collection、bag和List ADT？简单来说？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2015-06-29T10:27:16.933

抽象数据类型（ADT）是一种数据类型，其中只定义了行为而不是实现。

ADT 的对面是具体数据类型 (CDT)，其中包含 ADT 的实现。

**示例：**
`Array, List, Map, Queue, Set, Stack, Table, Tree, and Vector`是 ADT。这些 ADT 中的每一个都有许多实现，即 CDT。容器是所有 ADT 的高级 ADT。

**现实生活中的例子：**
书是抽象的（电话簿是一种实现）

![在此处输入图像描述](../Images/192834c02e38e2a86506a5b55c57a746.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-06T02:33:36.240

Abstact[数据类型](http://en.wikipedia.org/wiki/Abstract_data_type)Wikipedia 文章有很多话要说。

> 在计算机科学中，抽象数据类型（ADT）是具有相似行为的某一类数据结构的数学模型；或者对于具有相似语义的一种或多种编程语言的某些数据类型。抽象数据类型是间接定义的，仅由可能对其执行的操作以及对这些操作的影响（可能还有成本）的数学约束来定义。

稍微具体一点，可以拿 Java 的[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)接口为例。该接口根本没有明确定义任何行为，因为没有具体的`List`类。该接口仅定义了其他类（例如[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)和[`LinkedList`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)）必须实现的一组方法才能被视为`List`.

集合是另一种抽象数据类型**。**在 Java 的[`Collection`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)接口的情况下，它甚至比 更抽象`List`，因为

> `List`除了接口中指定的规定之外，该接口还对、、、和方法`Collection`的合同进行了附加规定。`iterator``add``remove``equals``hashCode`

**包**也称为[multiset](http://en.wikipedia.org/wiki/Multiset)。

> 在数学中，多重集（或袋子）的概念是集合概念的概括，其中成员被允许多次出现。例如，有一个唯一集合包含元素 a 和 b 而没有其他元素，但是有许多具有此属性的多重集，例如包含 a 的两个副本和 b 的一个副本的多重集或包含三个副本的多重集a和b。

在 Java 中，Bag 是一个实现了非常简单接口的集合。您只需要能够将项目添加到包中，检查其大小并迭代其中包含的项目。请参阅[Bag.java](http://algs4.cs.princeton.edu/13stacks/Bag.java.html)以获取示例实现（来自 Sedgewick & Wayne 的[算法第 4 版](http://algs4.cs.princeton.edu/10fundamentals/)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-25T21:10:45.413

真正抽象的数据类型描述了其实例的属性，而无需承诺它们的表示或特定操作。例如，抽象（数学）类型 Integer 是离散的、无限的、线性排序的实例集。具体类型为实例提供特定的表示并实现一组特定的操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-18T09:02:03.067

Brilliant wiki 上给出的最简单的解释之一：

> 抽象数据类型，通常缩写为 ADT，是一种根据数据结构的使用方式和提供的行为对数据结构进行分类的方法。它们没有指定数据结构必须如何在内存中实现或布局，而只是提供了一个最小的预期接口和一组行为。例如，堆栈是一种抽象数据类型，它指定具有 LIFO（后进先出）行为的线性数据结构。堆栈通常使用数组或链表来实现，但是使用二叉搜索树的不必要的复杂实现仍然是有效的实现。需要明确的是，说堆栈是数组是不正确的，反之亦然。数组可以用作堆栈。同样，可以使用数组来实现堆栈。
> 
> 由于抽象数据类型没有指定实现，这意味着谈论给定抽象数据类型的时间复杂度也是不正确的。关联数组可能有也可能没有 O(1) 平均搜索时间。由哈希表实现的关联数组确实具有 O(1) 平均搜索时间。
> 
> ADT 示例：List - 可以使用 Array 和 LinkedList、Queue、Deque、Stack、Associative array、Set 来实现。

[https://brilliant.org/wiki/abstract-data-types/?subtopic=types-and-data-structures&chapter=abstract-data-types](https://brilliant.org/wiki/abstract-data-types/?subtopic=types-and-data-structures&chapter=abstract-data-types)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-27T10:49:16.637

实际上抽象数据类型是：

*   逻辑上定义数据类型的概念或理论模型
*   指定数据集和可以对该数据执行的操作集
*   没有提及任何有关如何实施操作的内容
*   “作为一个想法而存在，但没有一个物理的想法”

例如，让我们看看一些抽象数据类型的规范，

1.  列表抽象数据类型：initialize()、get()、insert()、remove()等。
2.  堆栈抽象数据类型：push()、pop()、peek()、isEmpty()、isNull()等。
3.  队列抽象数据类型：enqueue()、dequeue()、size()、peek()等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-23T11:28:20.243

# **抽象数据类型 (ADT) 的表示法**

> 抽象数据类型可以定义为一个数学模型，其中定义了一组操作。一个简单的例子是整数的集合以及集合上定义的并集、交集的操作。
> 
> **ADT 是原始数据类型（整数、字符等）的**概括，它们封装了一种数据类型，即类型的定义和对该类型的所有操作都本地化到程序的一个部分。**它们在定义ADT**及其操作的部分之外被视为原始数据类型。
> 
> **ADT**的实现是将声明定义为该**ADT**的变量的声明的编程语言语句的翻译，以及该**ADT**的每个操作的该语言的过程。ADT 的实现选择了一个数据结构来表示**ADT**。
> 
> 指定数据类型的逻辑属性的一个有用工具是抽象数据类型。从根本上说，数据类型是值的集合和对这些值的一组操作。该集合和那些操作形成一个数学结构，可以使用特定的硬件和软件数据结构来实现。术语 **“抽象数据类型”**是指定义数据类型的基本数学概念。
> 
> 在将抽象数据类型定义为数学概念时，我们不关心空间或时间效率。这些是实施问题。事实上，**ADT**的定义根本不关心实现细节。甚至不可能在特定的硬件或使用特定的软件系统上实现特定的**ADT 。**例如，我们已经看到 **ADT** 整数不是普遍可实现的。
> 
> 为了说明**ADT**的概念和我的规范方法，请考虑对应于有理数的数学概念的**ADT RATIONAL 。**有理数是可以表示为两个整数的商的数。我们定义的有理数运算是从两个整数创建一个有理数、加法、乘法和相等性检验。以下是此**ADT**的初始规范。

```
 /* Value defination */

abstract typedef <integer, integer> RATIONAL;
condition RATIONAL [1]!=0;

                 /*Operator defination*/

abstract RATIONAL makerational (a,b)
int a,b;
preconditon b!=0;
postcondition makerational [0] =a;
              makerational [1] =b;
abstract RATIONAL add [a,b]
RATIONAL a,b;
postcondition add[1] = = a[1] * b[1]
              add[0] = a[0]*b[1]+b[0]*a[1]
abstract RATIONAL mult [a, b]
RATIONAL a,b;
postcondition mult[0] = = a[0]*b[a]
              mult[1] = = a[1]*b[1]
abstract equal (a,b)
RATIONAL a,b;
postcondition equal = = |a[0] * b[1] = = b[0] * a[1]; 
```

> **ADT**由两部分组成：-
> 
> **1) 价值定义**
> 
> **2) 操作定义**

### 1) 价值定义：-

> 值定义定义了 ADT 的值集合，由两部分组成：
> 
> **1) 定义条款**
> 
> **2) 条件条款**
> 
> 例如，**ADT** RATIONAL 的值定义声明一个 RATIONAL 值由两个整数组成，其中第二个不等于 0。
> 
> 关键字 abstract typedef 引入了一个值定义，关键字 condition 用于指定新定义的数据类型的任何条件。在此定义中，条件指定分母可能不为 0。定义子句是必需的，但条件可能并非对每个**ADT**都是必需的。

### 2) 运算符定义：-

> 每个运算符都被定义为具有三个部分的抽象连接。
> 
> **1)标题**
> 
> **2）可选的前提条件**
> 
> **3）可选的后置条件**
> 
> 例如，ADT RATIONAL 的运算符定义包括创建 (makerational)、加法 (add) 和乘法 (mult) 操作以及相等性测试 (equal)。让我们首先考虑乘法的规范，因为它是最简单的。它包含标题和后置条件，但没有前置条件。

```
abstract RATIONAL mult [a,b]
RATIONAL a,b;
postcondition mult[0] = a[0]*b[0]
              mult[1] = a[1]*b[1] 
```

> 这个定义的标题是前两行，就像一个 C 函数标题。关键字 abstract 表示它不是 C 函数，而是 ADT 运算符定义。
> 
> 后置条件指定操作的作用。在后置条件中，函数的名称（在本例中为 mult）用于表示操作的结果。因此，mult [0] 表示结果的分子，mult [1](https://i.stack.imgur.com/zy0mK.jpg)表示结果的分母。也就是说，它指定了在执行操作后哪些条件变为真。在此示例中，后置条件指定有理乘法结果的分子等于两个输入的分子的整数乘积，分母等于两个分母的整数乘积。

# 列表

> 在计算机科学中，列表或序列是一种抽象数据类型，表示可计数的有序值，其中相同的值可能出现多次。列表的实例是有限序列的数学概念的计算机表示；列表的（可能）无限模拟是流。列表是容器的基本示例，因为它们包含其他值。如果相同的值多次出现，则每次出现都被视为一个不同的项目
> 
> 名称列表也用于几个具体的数据结构，这些数据结构可以用来实现抽象列表，尤其是链表。

[![在此处输入图像描述](../Images/07c574aa8d5fee8e939c498d15106363.png)](https://i.stack.imgur.com/zy0mK.jpg)

列表的图像

# 包

> 袋子是对象的集合，您可以在其中继续向袋子中添加对象，但一旦添加到袋子中，您就无法删除它们。因此，使用 bag 数据结构，您可以收集所有对象，然后遍历它们。当你用 Java 编程时，你会正常打包。

[![包](../Images/ac38b20e3caa20d05d4e6d973b54343e.png)](https://i.stack.imgur.com/Dridm.jpg)

包的图像

# 收藏

> Java 意义上的集合是指实现 Collection 接口的任何类。一般意义上的集合只是一组对象。

[![在此处输入图像描述](../Images/c3559d1ec2928b4ab0fa0f8ebeef873d.png)](https://i.stack.imgur.com/7506n.jpg)

收藏图片

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-11T05:16:55.057

ADT 是一组完全独立于任何特定实现的数据值和相关操作。ADT 的优势在于实现对用户隐藏。仅声明接口。这意味着 ADT 有多种方式

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-21T14:51:47.263

摘要 数据类型是一个数学模块，包括具有各种操作的数据。实现细节是隐藏的，这就是它被称为抽象的原因。抽象允许您通过关注数据和操作的逻辑属性来组织任务的复杂性。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-16T19:14:32.457

在编程语言中，类型是一些数据和相关的操作。ADT 是用户定义的数据聚合和对这些数据的操作，其特点是**封装**，数据和操作在单个句法单元中表示或声明在列表中，并且**信息隐藏**，只有相关操作对ADT 的用户，ADT**接口**，与编程语言中的普通数据类型相同。这是一种抽象，因为数据的内部表示和操作的实现与 ADT 用户无关。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-23T11:58:01.500

> 在定义**抽象数据类型**之前，让我们考虑系统定义数据类型的不同视图。我们都知道，默认情况下，所有原始数据类型（int、float 等）都支持加减法等基本操作。系统提供原始数据类型的实现。对于用户定义的数据类型，我们还需要定义操作。当我们想要实际使用它们时，可以完成这些操作的实现。这意味着通常，用户定义的数据类型与其操作一起定义。
> 
> 为了简化解决问题的过程，我们将数据结构与其操作结合起来，我们称之为**“抽象数据类型”**。（ADT）。
> 
> 常用的**ADT**包括：链表、堆栈、队列、二叉树、字典、不相交集（联合和查找）、哈希表等。
> 
> **ADT**由两种类型组成：
> 
> **1\. 数据声明。**
> 
> **2\. 经营声明。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-08T14:14:21.160

简单的抽象数据类型不过是一组操作，一组数据用于在机器中有效地存储一些其他数据。不需要任何特定的类型声明。它只需要 ADT 的实现。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-12T02:08:16.940

抽象只为您提供信息（服务信息），但不提供实现。例如：当您从 ATM 机取款时，您只知道一件事，即将您的 ATM 卡放到机器上，单击取款选项，输入金额，如果有钱，您的钱就出来了。这只是您对 ATM 机的了解。但是你知道你是怎么收钱的吗？背后是什么业务逻辑？哪个数据库被调用？正在调用哪个位置的哪个服务器？不，您只知道服务信息，即您可以提款。这是一个抽象。

同样，ADT 为您提供数据类型的概述：它们是/可以存储什么以及您可以对这些数据类型执行哪些操作。但它没有提供如何实现它。这是 ADT。它只定义数据类型的逻辑形式。

另一个类比是：在汽车或自行车上，你只知道当你踩刹车时，你的车就会停下来。但是你知道踩刹车时自行车是怎么停下来的吗？？？不，意味着实现细节被隐藏了。您只知道踩下刹车时的作用，但不知道它是如何作用的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-31T04:07:24.627

**抽象数据类型**就像用户定义的数据类型，我们可以在不知道数据类型内部有什么以及如何对它们执行操作的情况下执行功能。由于信息未公开，因此其抽象化。例如。列表、数组、堆栈、队列。在 Stack 上，我们可以执行 Push、Pop 等功能，但我们不确定它是如何在幕后实现的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-14T13:31:21.410

为了解决问题，我们将数据结构与其操作相结合。ADT 由两部分组成：

1.  数据声明。
2.  操作声明。

常用的 ADT 是链表、堆栈、队列、优先级队列、树等。在定义 ADT 时，我们不需要担心实现细节。只有当我们想使用它们时，它们才会出现。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-02T18:23:50.573

抽象数据类型，有时缩写为 ADT，是对我们如何查看数据和允许的操作的逻辑描述，而不考虑它们将如何实现。这意味着我们只关心数据代表什么，而不关心它最终将如何构建。

[https://runestone.academy/runestone/books/published/pythonds/Introduction/WhyStudyDataStructuresandAbstractDataTypes.html](https://runestone.academy/runestone/books/published/pythonds/Introduction/WhyStudyDataStructuresandAbstractDataTypes.html)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-11T08:32:20.427

抽象数据类型是值的集合以及对这些值的任何类型的操作。例如，由于 String 不是原始数据类型，我们可以将其包含在抽象数据类型中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-06-01T17:37:51.777

**简而言之：**抽象数据类型是数据和对该数据进行操作的集合。这些操作既向程序的其余部分描述数据，又允许程序的其余部分更改数据。“抽象数据类型”中的“数据”一词使用松散。ADT 可能是一个图形窗口，其中包含影响它的所有操作、文件和文件操作、保险费率表及其上的操作，或其他东西。

*从代码完成 2 本书*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-05-14T23:17:26.903

ADT 是一种数据类型，其中数据的收集和操作对该数据起作用。它更多地关注概念而不是实现。这取决于您使用哪种语言使其在地球上可见示例：堆栈是 ADT 而数组不是堆栈是 ADT，因为我们可以通过多种语言实现它，Python c c ++ java等等，而Array是内置的数据类型

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-11-26T13:08:52.150

ADT 是一组对象和操作，在 ADT 的定义中没有任何地方提到如何实现这组操作。使用集合的程序员只需要知道如何以某种预先确定的方式实例化和访问数据，而不用关心集合实现的细节。换句话说，从用户的角度来看，集合是一种抽象，因此，在计算机科学中，一些集合被称为抽象数据类型 (ADT)。用户只关心学习它的界面，或者它执行的操作集......[更多](http://www.algorithmhub.online/2017/09/abstract-data-types-adts.html)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-08-13T19:34:33.957

术语数据类型是特定变量可以保存的数据类型——它可以是整数、字符、浮点数或任何范围的简单数据存储表示。但是，当我们构建面向对象的系统时，我们会使用其他数据类型，称为抽象数据类型，它表示更现实的实体。

例如：我们可能对表示“银行账户”数据类型感兴趣，它描述了程序中如何处理所有银行账户。抽象是关于降低复杂性，忽略不必要的细节。

# python - 带有 gevent 和请求异步模块的 ImportError

> ID：10267086
> 
> 赞同：4
> 
> 时间：2012-04-22T10:14:06.020
> 
> 标签：python, concurrency, gevent

我正在编写一个简单的脚本：

1.  加载一个大的 URL 列表
2.  [使用请求的异步](http://docs.python-requests.org/en/latest/user/advanced/#asynchronous-requests)模块获取每个发出并发 HTTP 请求的 URL 的内容
3.  使用 lxml 解析页面内容，以检查页面中是否存在链接
4.  如果页面上存在链接，则将有关页面的一些信息保存在 ZODB 数据库中

当我用 4 或 5 个 URL 测试脚本时效果很好，脚本结束时我只有以下消息：

```
 Exception KeyError: KeyError(45989520,) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored 
```

但是当我尝试检查大约 24000 个 URL 时，它在列表末尾失败（当还有大约 400 个 URL 需要检查时）并出现以下错误：

```
Traceback (most recent call last):
  File "check.py", line 95, in <module>
  File "/home/alex/code/.virtualenvs/linka/local/lib/python2.7/site-packages/requests/async.py", line 83, in map
  File "/home/alex/code/.virtualenvs/linka/local/lib/python2.7/site-packages/gevent-1.0b2-py2.7-linux-x86_64.egg/gevent/greenlet.py", line 405, in joinall
ImportError: No module named queue
Exception KeyError: KeyError(45989520,) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored 
```

[我尝试了pypi](http://pypi.python.org/pypi/gevent)上可用的 gevent 版本以及从[gevent repository](http://code.google.com/p/gevent/downloads/list)下载和安装最新版本（1.0b2）。

我不明白为什么会发生这种情况，以及为什么只有当我检查一堆 URL 时才会发生这种情况。有什么建议么？

这是整个脚本：

```
from requests import async, defaults
from lxml import html
from urlparse import urlsplit
from gevent import monkey
from BeautifulSoup import UnicodeDammit
from ZODB.FileStorage import FileStorage
from ZODB.DB import DB
import transaction
import persistent
import random

storage = FileStorage('Data.fs')
db = DB(storage)
connection = db.open()
root = connection.root()
monkey.patch_all()
defaults.defaults['base_headers']['User-Agent'] = "Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0"
defaults.defaults['max_retries'] = 10

def save_data(source, target, anchor):
    root[source] = persistent.mapping.PersistentMapping(dict(target=target, anchor=anchor))
    transaction.commit()

def decode_html(html_string):
    converted = UnicodeDammit(html_string, isHTML=True)
    if not converted.unicode:
        raise UnicodeDecodeError(
            "Failed to detect encoding, tried [%s]",
            ', '.join(converted.triedEncodings))
    # print converted.originalEncoding
    return converted.unicode

def find_link(html_doc, url):
    decoded = decode_html(html_doc)
    doc = html.document_fromstring(decoded.encode('utf-8'))
    for element, attribute, link, pos in doc.iterlinks():
        if attribute == "href" and link.startswith('http'):
            netloc = urlsplit(link).netloc
            if "example.org" in netloc:
                return (url, link, element.text_content().strip())
    else:
        return False

def check(response):
    if response.status_code == 200:
        html_doc = response.content
        result = find_link(html_doc, response.url)
        if result:
            source, target, anchor = result
            # print "Source: %s" % source
            # print "Target: %s" % target
            # print "Anchor: %s" % anchor
            # print
            save_data(source, target, anchor)
    global todo
    todo = todo -1
    print todo

def load_urls(fname):
    with open(fname) as fh:
        urls = set([url.strip() for url in fh.readlines()])
        urls = list(urls)
        random.shuffle(urls)
        return urls

if __name__ == "__main__":

    urls = load_urls('urls.txt')
    rs = []
    todo = len(urls)
    print "Ready to analyze %s pages" % len(urls)
    for url in urls:
        rs.append(async.get(url, hooks=dict(response=check), timeout=10.0))
    responses = async.map(rs, size=100)
    print "DONE." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:36:54.423

我不确定你的问题的根源是什么，但为什么你没有在文件顶部有 monkey.patch_all() ？

你能试着把

```
from gevent import monkey; monkey.patch_all() 
```

在你的主程序的顶部，看看它是否修复了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:08:16.100

再会。我认为它是开放的 python 错误，编号为 Issue1596321 [http://bugs.python.org/issue1596321](http://bugs.python.org/issue1596321)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:07:06.830

我是这么大的n00b，但无论如何，我可以尝试......！我想您可以尝试通过以下方式更改您的导入列表：

```
from requests import async, defaults
import requests
from lxml import html
from urlparse import urlsplit
from gevent import monkey
import gevent
from BeautifulSoup import UnicodeDammit
from ZODB.FileStorage import FileStorage
from ZODB.DB import DB
import transaction
import persistent
import random 
```

试试这个并告诉我它是否有效..我想这可以解决你的问题:)

# java - 在 java/rome 中读取 RSS 提要：无法访问 org.jdom.Document

> ID：10267087
> 
> 赞同：4
> 
> 时间：2012-04-22T10:14:12.693
> 
> 标签：java, rss, rome

我正在尝试在 java 中读取 RSS 提要我正在使用 ROME 来读取提要，但出现错误无法访问 org.jdom.Document 的 org.jdom.Document 类文件，未找到 SyndFeed feed = new SyndFeedInput().build(reader ); 1 个错误

我已将 jdom 添加到库中，但仍然出现错误。请指导我如何解决它。我的代码如下

```
import java.net.URL;
import java.util.Iterator;

import com.sun.syndication.feed.synd.SyndEntry;
import com.sun.syndication.feed.synd.SyndFeed;
import com.sun.syndication.io.SyndFeedInput;
import com.sun.syndication.io.XmlReader;

public class Reader {

  public static void main(String[] args) throws Exception {

    URL url  = new URL("http://viralpatel.net/blogs/feed");
    XmlReader reader = null;

    try {
      reader = new XmlReader(url);
      SyndFeed feed = new SyndFeedInput().build(reader);
      System.out.println("Feed Title: "+ feed.getAuthor());

      for (Iterator i = feed.getEntries().iterator(); i.hasNext();) {
        SyndEntry entry = (SyndEntry) i.next();
        System.out.println(entry.getTitle());
      }
    } finally {
      if (reader != null)
        reader.close();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:54:00.407

您使用的是哪个版本的 JDOM？在我看来，ROME 不适用于最新版本 2.0.0，但需要旧版本 1.[从此处](http://mirrors.ibiblio.org/pub/mirrors/maven2/jdom/jdom/1.0/jdom-1.0.jar)下载 JDOM jar 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-29T18:01:02.557

我建议浏览这个网页，在这里你会找到阅读和创建 RSS 源的工作代码

[http://www.vogella.com/articles/RSSFeed/article.html](http://www.vogella.com/articles/RSSFeed/article.html)

礼貌：-vogella.com

他没有使用 Rome 来获取 RSS 提要，而是使用一组自定义构建的类来帮助从 Web 服务器创建和获取 RSS 提要

# c# - 相机图片像素测量 - Windows Phone

> ID：10267097
> 
> 赞同：1
> 
> 时间：2012-04-22T10:15:09.227
> 
> 标签：c#, .net, windows-phone-7, windows-phone-7.1

有没有办法使用 WP 相机（准确地说是 Lumia 800）来测量物体像素。

即，如果我识别出形状（例如正方形），有没有办法以像素为单位测量宽度和高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:05:31.570

如果您已经知道形状所在的位置并且正在寻找更好/更快的图像编辑库，请使用[图像工具](http://imagetools.codeplex.com/releases/view/53740)。我过去曾使用它们来过滤除特定红色阴影之外的所有内容，从而使图像识别变得更加容易

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T11:51:12.510

不确定，但您可以使用[SLARToolkit](http://slartoolkit.codeplex.com/)来测量您需要的对象...

# html - 如果点击太多，Div 会变成蓝色

> ID：10267100
> 
> 赞同：2
> 
> 时间：2012-04-22T10:15:32.907
> 
> 标签：html

我有一个简单的 div，如果点击太多会变成蓝色：[JsFiddle](http://jsfiddle.net/YTKRS/1/)

在 Chrome 中更糟糕的是，整个 div（30x30px + 一些其他周围元素）变成蓝色。对此我能做些什么（除了使用 img）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T10:20:28.543

不好意思问了，这不就是你双击标出来的吗？“蓝色”突出显示效果将是所有浏览器中的正常行为......

如果你不想要这种行为，你应该通过应用样式来确保它是不可选择的：

```
-moz-user-select: none;
-webkit-user-select: none; 
```

**更新：**

对于 Internet Explorer，请在 div 上使用不可选择的标签：

```
<div class="right" unselectable="on">&raquo;</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T10:50:12.600

这个 CSS 可以解决问题：

```
div::selection {
  display:none;
 }​ 
```

它将选择（突出显示）设置为`display:none`，因此您看不到它。

# apache - Apache .htaccess 在请求用户身份验证之前重定向到 HTTPS

> ID：10267102
> 
> 赞同：30
> 
> 时间：2012-04-22T10:16:08.730
> 
> 标签：apache, .htaccess

这是我的 .htaccess：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

AuthUserFile /etc/hi
AuthName "hi"
AuthType Basic
require valid-user 
```

它要求使用 http 进行用户身份验证，这意味着密码将以纯文本形式发送。它将重定向到 https 版本并再次询问密码。

我该如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-10-02T05:45:00.560

如果您正在运行 Apache 2.4，您可以使用[配置部分](http://httpd.apache.org/docs/current/sections.html)来轻松解决这个问题。

例如...

```
# Redirect to HTTPS
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R,L]

# Authenticate users only when using HTTPS
# Enable for <v2.4
 # SSLRequireSSL
 # ErrorDocument 403 /secure-folder/
# Enable for >v2.4
<If "%{HTTPS} == 'on'">
    AuthType Basic
    AuthName "Special things"
    AuthUserFile /etc/blah.htpasswd
    # Prevent this 'Require' directive from overriding any merged previously
   <IfVersion >= 2.4>
      AuthMerging And
   </IfVersion>
    Require valid-user
# Enable for >v2.4
</If> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-11T03:46:09.753

我以这种方式绕过它。只允许非 SSL，因为它将被重定向，然后需要在 SSL 上进行一次身份验证...

```
SetEnvIf %{SERVER_PORT} ^80$ IS_NON_SSL

RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

AuthUserFile /etc/hi
AuthName "hi"
AuthType Basic
require valid-user
Allow from env=IS_NON_SSL 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-10T07:56:44.177

非常感谢，伊斯塔多！

我的 Apache 是 2.2 版（Synology NAS DSM 5.1），所以这两个不适用：

```
RewriteOptions Inherit
IfVersion 
```

将它们（以及版本> = 2.4的部分）取出后。整个事情开始为我工作。

关于这个主题有很多建议，我花了两天时间尝试一下。

但只有这个对我有用。

这是我所做的：

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

AuthType Basic
AuthName "private area"
AuthUserFile /path/to/file/.htdigest

Order Deny,Allow
Deny from all
Satisfy Any
Allow from env=!HTTPS
Require valid-user 
```

因此，它经过验证可以在 Apache 2.2、Synology DSM 5.1 上运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-19T09:06:38.943

检查的解决方案[https://stackoverflow.com/a/15940387/2311074](https://stackoverflow.com/a/15940387/2311074)在 Ubuntu 16.04 上的 Firefox 上工作，但在 Win 7 上的 Firefox 上不起作用。

如果您想保护您的文件夹[https://yourdomain.com/securefolder](https://yourdomain.com/securefolder) ，那么您需要在该文件夹中创建`.htaccess`具有以下内容的 a：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

SSLRequireSSL
ErrorDocument 403 https://yourdomain.com/securefolder
AuthType Basic
AuthName "Admin"
AuthUserFile /outside/your/www/folder/.htpasswd
Require user admin Admin 
```

它的工作方式是，当您通过`http://`而不是通过`https://`它调用网站时，会将您重定向到错误页面。诀窍是使用正确的链接`https://`作为默认错误页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-17T11:55:00.437

我们客户的 webapp 安装在他的 webuser 目录中。授权是在 mod_rewrite 规则（[https://serverfault.com/a/443185/253111](https://serverfault.com/a/443185/253111)）之前处理的，我们无法得到公认的答案，所以 mod_rewrite 似乎不是一个选项。

最终，我们明确要求 SSL，并通过 HTTPS 使用 webapp 的根作为 403 和 404 错误文档。因此，当一个人通过 HTTP（未经授权，因此是 403）或不存在的页面（404）访问任何页面时，他将被重定向到 ie。[https://DOMAIN.TLD/~WEBUSER/admin](https://DOMAIN.TLD/~WEBUSER/admin)。

这是 .htaccess 文件，评论中有一些额外的信息。

```
### INFO: Rewrites and redirects are handled after authorisation
### @link https://serverfault.com/a/443185/253111

### INFO: Log out of a HTPASSWD session
### This was not always possible, but Firefox and Chrome seem to end sessions
### when a new one is trying to be using ie.:
### https://logout:logout@DOMAIN.TLD/~WEBUSER/
### @link http://stackoverflow.com/a/1163884/328272

### FORCE SSL: Explicitly require the SSL certificate of a certain domain to
### disallow unsigned certificates, etc. ErrorDocument commands are used to
### redirect the user to an HTTPS URL.
### @link http://forum.powweb.com/showthread.php?t=61566
SSLOptions +StrictRequire
SSLRequireSSL
SSLRequire  %{HTTP_HOST} eq "DOMAIN.TLD"

### HTPASSWD AUTHENTICATION
AuthUserFile /var/www/vhosts/DOMAIN.TLD/web_users/WEBUSER/.htpasswd
AuthType Basic
AuthName "Hello"
Require valid-user

### ERROR DOCUMENTS: Redirect user in case of a 403 / 404.
ErrorDocument 403 https://DOMAIN.TLD/~WEBUSER/admin
ErrorDocument 404 https://DOMAIN.TLD/~WEBUSER/admin 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-17T09:41:20.653

我正在运行 Apache 2.2，但上述解决方案都不适合我。我在[这里](http://blog.jozjan.net/2008/02/htaccess-redirect-to-ssl-https-before.html)找到了适合我的解决方法。基本上，您需要设置 SSLRequireSSL 并在 ErrorDocument 中使用一些脚本语言将用户转发到 HTTPS。不幸的是，在我的情况下，这仅在访问服务器上的特定文件时有效，如果仅提供域，则它不起作用。这是我所做的：

```
AuthType Basic
AuthName "Password Protected Area"
AuthUserFile /my/path/to/.htpasswd
#Require valid-user

<FilesMatch "(^(?!ssl.php).*)">
        SSLRequireSSL
        ErrorDocument 403 /ssl.php
        Require valid-user
</FilesMatch> 
```

FileMatch 中的正则表达式告诉 apache 对除 ssl.php 之外的所有文件使用 SSLRequireSSL - 如果用户尝试在没有 SSL 的情况下访问，则将用户转发到 ssl.php。

我的 ssl.php 看起来像这样：

```
if(!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] == "" || $_SERVER['HTTPS'] == "off")
{
        $redirect = "https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
        header("HTTP/1.1 301 Moved Permanently");
        header("Location: $redirect");
        exit;
} 
```

现在会发生什么：

*   打开[http://example.com/some/file.php](http://example.com/some/file.php)转发到 [https://example.com/some/file.php](https://example.com/some/file.php)并询问用户名和密码。
*   打开[https://example.com/](https://example.com/)通过 https 连接并询问 u/p
*   打开[https://example.com/some/file.php](https://example.com/some/file.php)基本相同。
*   打开[http://example.com/](http://example.com/)转发到一些默认的 apache 服务器页面

最后一点是我不满意的，如果有人对此有解决方案，我会很高兴听到。我试图解决这个问题的事情：

*   将正则表达式更改为 (^$)|(^(?!ssl.php).*) 以显式匹配空字符串。不工作
*   添加了重写规则以将空字符串重写到 index.php。也不行。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-22T18:16:23.870

这是在我的一种配置中起作用的唯一解决方案：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

<If "%{SERVER_PORT} != '80'">
    AuthUserFile /etc/hi
    AuthName "hi"
    AuthType Basic
    require valid-user
</If> 
```

值得注意的是，这是针对我无法控制的 Apache 2.4（共享主机）。似乎`%{HTTPS}`未在此配置上定义变量，并且任何基于`SSLRequireSSL`生成 500 Internal Server Error 的解决方案。

* * *

（旁注：如果您在服务 HTTP 请求时更喜欢 403 Forbidden 而不是 301 Permanent Redirect，请`RewriteRule ^(.*)$ - [F,L]`改用）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-19T05:36:21.263

Molomby 的解决方案适用于 2.4 及更高版本，但不适用于当前的 Debian 版本 2.2.22。

Ben's / Chris Heald 的解决方案在 2.2.22 中也不适用于我，但这是由于不同的 order/satisfy 配置。这些设置已随 2.4 更改，并且该解决方案似乎与 2.4 及更高版本不兼容（重定向有效，但浏览器只是显示未经授权的错误而不要求提供凭据）。

以下是适用于 2.4 以下和以上版本的两种解决方案的组合：

```
RewriteEngine on
RewriteOptions Inherit # rewrite rules from parent directories
RewriteCond %{HTTPS} off
RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

AuthType Digest
AuthName "private area"
AuthDigestProvider file
AuthUserFile /path/to/file/.htdigest

<IfVersion < 2.4>
    Order Deny,Allow
    Deny from all
    Satisfy Any # reset this to 'All' in custom <Files> and <Directory> directives that block access
    Allow from env=!HTTPS
    Require valid-user
</IfVersion>
<IfVersion >= 2.4>
    <If "%{HTTPS} == 'on'">
        AuthMerging And
        Require valid-user
    </If>
</IfVersion> 
```

要求：mod_rewrite、mod_auth、mod_digest、mod_version

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-08T06:42:43.703

以上都不适合我，但确实如此。我唯一担心的是，如果在某些情况下不会触发身份验证，则允许某人在没有凭据的情况下进行访问。我不确定是否有，但也许你们聪明的人可能会说不同。

此代码使用 .htaccess 文件夹身份验证将非 www 重定向到 www 并将 http 重定向到 https。

这是您要保护的目录中的 htaccess 文件的内容：

```
RewriteEngine on
# ensure www.
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/foldername/$1 [L,R=301]
# ensure https
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{HTTPS} !=on [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}/foldername/$1 [L,R=301]

# Apache 2.4 If
<If "%{HTTPS} == 'on' && %{HTTP_HOST} =~ /www/">
AuthType Basic
AuthName "Protected folder"
AuthUserFile "/home/etc/.htpasswds/public_html/foldername/passwd"
require valid-user
</If> 
```

# android - 将新项目添加到列表视图

> ID：10267103
> 
> 赞同：0
> 
> 时间：2012-04-22T10:16:11.383
> 
> 标签：android, listview

我不太确定我的问题是否真的与此有关`listview`。有一个名为[Gleeo Time Tracker](https://play.google.com/store/apps/details?id=ch.gridvision.pbtm.androidtimerecorder)的应用程序，[这里](http://www.google.com.hk/imgres?q=gleeo%20time%20track&um=1&hl=zh-CN&newwindow=1&safe=strict&tbm=isch&tbnid=PUrX5ft8YVFxgM%3a&imgrefurl=http://www.anzhuo99.com/ruanjian/shenghuobibei/13098.html&docid=eVjMwaba6aL74M&imgurl=http://www.anzhuo99.com/jimi168/320x480/10/097/312/1314000333376.jpg&w=320&h=480&ei=19STT6-qFuG5iQf9-OygBA&zoom=1&iact=rc&dur=295&sig=102663670689591432708&page=1&tbnh=154&tbnw=103&start=0&ndsp=25&ved=1t:429,r:0,s:0,i:66&tx=61&ty=114&biw=1366&bih=673)有它的屏幕视图。当您按下符号`"+"`时，将创建一个新项目，您可以删除一个项目通过按。`"-"`更多是当我单击项目左侧的记录按钮时，背景会改变。

我的问题是，列表视图到底是什么？我怎样才能做到这一点？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:32:41.937

阅读开发人员文档中的列表视图，这是一个[示例](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:31:42.923

您想要做的是构建一个自定义 ListView。这是通过提供一个布局文件来完成的，例如

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent">

  <ImageView android:id="@+id/Plus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent" />

  <TextView android:id="@+id/Title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent" />

</LinearLayout> 
```

然后通过覆盖其 Adapter 的 getView() 方法将此布局应用于 ListView 的每一行，例如：

```
public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) MyActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);  
            }    
            ImageView plus = (ImageView) v.findViewById(R.id.plus);
            icon.setImageDrawable(BrowseActivity.this.getResources().getDrawable(R.drawable.plus));
            TextView title = (TextView) v.findViewById (R.id.Browse_FileName);

// add a listener to your button and you're done

            return v;
        } 
```

# java - 在java中检测Windows应用程序的文本字段

> ID：10267107
> 
> 赞同：1
> 
> 时间：2012-04-22T10:17:23.290
> 
> 标签：java, windows, textfield, touchscreen

一台在 Windows 操作系统中运行的带有触摸屏的计算机。我需要编写一个 java 代码来检测用户何时触摸文本字段，然后在不是文本字段时显示 Windows 屏幕键盘并隐藏屏幕键盘。

我已经完成了使用以下方法显示屏幕键盘的工作：

```
Runtime.getRuntime().exec("cmd /c C:\\Windows\\System32\\osk.exe"); 
```

但是我如何检测文本字段（另一个不是用java编写的应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:26:44.233

您不能这样做，但如果您使用 java.awt.Robot... 允许用户在其他应用程序中的文本字段周围绘制一个框以获取其坐标，然后在您的程序中记住它。或者，如果它们总是在同一个地方，你可以硬编码坐标。

一旦您知道坐标，您就可以监听鼠标输入，因此当触发 mousePressed 事件时，如果坐标在文本框中，则触发您的方法以显示屏幕键盘。

这可能不起作用，因为用户必须拥有特权并允许您的应用程序读取本机鼠标输入。

# c++ - 使用 VS2010 C++ / Boost 的正则表达式

> ID：10267108
> 
> 赞同：0
> 
> 时间：2012-04-22T10:17:24.160
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, boost-regex

我正在尝试在 C++ 中获取一个字符串并找到其中包含的项目名称和路径。该字符串具有以下格式：

```
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "OpenGL01", "OpenGL01\OpenGL01.vcxproj", "{65E58BFD-4339-44BA-BA9B-B2B8A5AC1FE1}" 
```

正则表达式是：

```
boost::regex expression("(Project\(\"\{.*\}\"\)) ?= ?(\".*\"), ?(\".*\"), ?(\"\{.*\}\")"); 
```

但是这一行会产生异常错误：

> kmCompile2010.exe 中 0x7512d36f 处未处理的异常：Microsoft C++ 异常：`boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::regex_error> >`内存位置 0x004ce13c..

这是完整的功能：

```
BOOL CSlnFile::ReadProjectsSolution()
{
    CString sLine;
    boost::regex expression("(Project\(\"\{.*\}\"\)) ?= ?(\".*\"), ?(\".*\"), ?(\"\{.*\}\")");

    BOOL bCheck = FALSE;

    SeekToBegin();

    while(ReadString(sLine) && !bCheck) {   
        // CString to char*
        CT2A temp(sLine);           // uses LPCTSTR conversion operator for CString and CT2A constructor
        const char* pszA = temp;    // uses LPSTR conversion operator for CT2A
        std::string strA(pszA);     // uses std::string constructor

        boost::smatch what;

        if (regex_match(strA, what, expression, boost::match_extra)) {
            // TODO
        }
    }

    return bCheck;
} 
```

我没有发现我的错误。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:51:07.110

我没有在 boost::regex 中尝试以下正则表达式，它在 perl 中有效：

```
\{([^}]+)\}"[^"]*"([^"]+)", "([^"]+)", "\{([^}]+) 
```

我在命令行上试过：

```
echo 'Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "OpenGL01", "OpenGL01\OpenGL01.vcxproj", "{65E58BFD-4339-44BA-BA9B-B2B8A5AC1FE1}"' | perl -ne 'my ($a, $b, $c, $d) = /\{([^}]+)\}"[^"]*"([^"]+)", "([^"]+)", "\{([^}]+)/; print "$a, $b, $c, $d"' 
```

# asp.net - 为 SSL 配置 IIS 7 时出错

> ID：10267110
> 
> 赞同：1
> 
> 时间：2012-04-22T10:17:52.180
> 
> 标签：asp.net, iis, ssl, iis-7, configure

我在 IIS 7 上为我的 ASP.NET 网站配置了 SSL。但是即使在证书友好名称中提供了与我的服务器相同的名称“localhost”之后，服务器证书与 URL 不匹配也会出现错误。

我还将服务器的名称更改为 ASP-DELL，即我的计算机名称，并使用该名称创建了一个证书，并将网站作为[http://ASP-DELL/HC/index.aspx](http://ASP-DELL/HC/index.aspx)启动，但它仍然在 Google 中显示铬合金：

![在此处输入图像描述](../Images/6cec2f1992225db7af9e19107f3f3a29.png)

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:56:48.253

我认为通过使用您的计算机名称添加网络域可以帮助解决它，因为我记得我经历过类似的情况。

你能把它从

[http://ASP-DELL/HC/index.aspx](http://ASP-DELL/HC/index.aspx)

到

[http://ASP-DELL.YourNetworkDomain/HC/index.aspx](http://ASP-DELL.YourNetworkDomain/HC/index.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:30:42.277

您的问题中缺少（或至少不清楚）的是您安装/购买/配置的证书的**通用名称**（不是友好名称）......

证书颁发给特定的通用名称/主机名，并且 url 必须专门匹配它。

在 SAN（主题替代名称）变得普遍之前，我记得曾经为“www”网站和“没有 www 的网站”购买 2 个证书的日子。这些天也有“通配符证书”。

它还不清楚您指的是什么类型的证书，自签名/测试还是您购买的东西？我认为证书提供商不会让您购买通用名称为“localhost”的证书（但我可能又错了）。

在生产中，证书**公用名将**等同于您的 DNS 完全限定 url -例如：

*   DNS：***www.google.com***
*   证书通用名称：***www.google.com***
    *   如果证书包含 SAN，则*默认值*可能*是*：***google.com***
    *   这意味着证书可以在有或没有“www”的情况下使用（否则它只**适用于 www.google.com**）

# javascript - 执行函数完成后调用 Javascript 函数

> ID：10267112
> 
> 赞同：0
> 
> 时间：2012-04-22T10:18:14.083
> 
> 标签：javascript, function

我正在研究谷歌地图 API。我不知道为什么在 index++ 之后调用下面的函数。据我所知，应该首先调用 ReverseGeocode()。取而代之的是，它首先递增，然后调用给我带来问题的函数。警告框在编写时显示，但在函数的最后一行执行后调用中间函数，即 (index++)。

```
 function placeMarker(location)
      {
          alert("iiii");
          ReverseGeocode(location.lat(),location.lng());
          alert("jjjk");
          index++;
      } 
```

这是我的 ReverseGeoCode

```
 function ReverseGeocode(lat,lng) {     
     var latlng = new google.maps.LatLng(lat, lng);
     geocoder.geocode({'latLng': latlng}, function(results, status)
  {
      if (status == google.maps.GeocoderStatus.OK) 
     {
           if (results[1])
      {

          places[index]=results[0].formatted_address;
          alert(places[index]+"index="+index);
          AddRow('table',results[0].formatted_address);
          document.getElementById("dataa").innerHTML+=results[0].formatted_address+"<br/>";
      }
  }
  else 
  {
    alert("Geocoder failed due to: " + status);
      }
    });
  } 
```

请解释。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:42:34.723

警报在您的回调函数中，它将在`geocoder.geocode`完成计算时执行。

`geocoder.geocode`似乎是异步的。通常，这意味着`geocoder.geocode`它会在其他地方开始缓慢地工作，而您的程序会继续在本地结束。稍后完成时`geocoder.geocode`，它将执行您提供的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:49:17.153

我认为这`geocoder.geocode`是异步的。稍后，当 的值`index`增加时，它会执行您的匿名函数。

```
function placeMarker(location)
 {
 alert("iiii")
 ReverseGeocode(location.lat(),location.lng(),index);
 alert("jjjk");
 index++; 
```

    }

```
function ReverseGeocode(lat,lng,index) {     
     var latlng = new google.maps.LatLng(lat, lng);
     geocoder.geocode({'latLng': latlng}, function(results, status)
  {
      if (status == google.maps.GeocoderStatus.OK) 
     {
           if (results[1])
      {

          places[index]=results[0].formatted_address;
          alert(places[index]+"index="+index);
          AddRow('table',results[0].formatted_address);
          document.getElementById("dataa").innerHTML+=results[0].formatted_address+"<br/>";
      }
  }
  else 
  {
    alert("Geocoder failed due to: " + status);
      }
    });
  } 
```

在这种情况下，`index`进入匿名函数的本地范围，因此不会被覆盖。

# javascript - HTML/JavaScript：计时器/秒表不重置（停止后）

> ID：10267117
> 
> 赞同：0
> 
> 时间：2012-04-22T10:19:26.873
> 
> 标签：javascript, html

```
<html>
    <head>
    <script language="JavaScript">
var c1 = 0;
var c2 = 0;
var c3 = 0;
var o1 = 0;
var o2 = 0;
var o3 = 0;
ID = window.setTimeout("start();", 100);

function start() {
    if (c1 == 59) {
        c1 = 00;;
        if (c2 == 59) {
            c2 = 00;
        }
        else c2++;
    }
    else c1++;

    if (c1 == 0 || c1 == 1 || c1 == 2 || c1 == 3 || c1 == 4 || c1 == 5 || c1 == 6 || c1 == 7 || c1 == 8 || c1 == 9) o1 = "0" + c1;
    else o1 = c1;
    if (c2 == 0 || c2 == 1 || c2 == 2 || c2 == 3 || c2 == 4 || c2 == 5 || c2 == 6 || c2 == 7 || c2 == 8 || c2 == 9) o2 = "0" + c2;
    else o2 = c2;
    if (c3 == 0 || c3 == 1 || c3 == 2 || c3 == 3 || c3 == 4 || c3 == 5 || c3 == 6 || c3 == 7 || c3 == 8 || c3 == 9) o3 = "0" + c3;
    else o3 = c3;

    document.forms[0].elements[0].value = o3 + ":" + o2 + ":" + o1;
    ID = window.setTimeout("start();", 100);
}​
</script>
    </head>
    <body>
        <form name="frm1">
            <input type="text" name="timer1">
            <input type="button" name="but1" value="start" onClick="c1=0; c2=0; c3=0; o1=0; o2=0; 

o3=0; start();">
            <input type=button name="but2" value="stop" onClick="window.clearTimeout(ID);">
        </form>
    </body>
</html>​ 
```

[现场演示在这里](http://jsfiddle.net/B4a54/)。

状态栏给出错误：对象不支持此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:22:34.290

[**固定小提琴**](http://jsfiddle.net/B4a54/6)

您应该传递函数引用。

从：

```
ID = window.setTimeout("start();", 100); 
```

至

```
ID = window.setTimeout(start, 100); 
```

* * *

请注意，这是一个非常“没有吸引力”的代码......

`if (c1 == 0 || c1 == 1 || c1 == 2 || c1 == 3 || c1 == 4 || c1 == 5 || c1 == 6 || c1 == 7 || c1 == 8 || c1 == 9)`

您可以简单地检查边界：

```
if (c1 >= 0 && c1 <= 9)
    o1="0"+c1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T10:45:50.060

您在 Internet Explorer 中收到错误，因为`start`浏览器本身或 jsFiddle 已经使用了一个变量。在你用它来定义函数之后，它由于某种原因变成了一个包含字符串的变量`"fileopen"`。

如果您将函数重命名为`start`其他名称，它会起作用：

[http://jsfiddle.net/Guffa/yqsmy/](http://jsfiddle.net/Guffa/yqsmy/)

无论如何，您应该为此使用间隔而不是超时：

Javascript：

```
var c1, c2, c3, ID = null;
startTimer();

function startTimer() {
    if (ID != null) {
        stopTimer();
    }
    c1 = 0;
    c2 = 0;
    c3 = 0;
    ID = window.setInterval(run, 100);
}

function stopTimer() {
    window.clearInterval(ID);
    ID = null;
}

function run() {
    c1++;
    if (c1 == 60) {
        c1 = 0;
        c2++;
        if (c2 == 60) {
            c2 = 0;
        }
    }

    var o1 = (c1 <= 9 ? "0" : "")  + c1;
    var o2 = (c2 <= 9 ? "0" : "")  + c2;
    var o3 = (c3 <= 9 ? "0" : "")  + c3;
    document.forms[0].elements[0].value = o3 + ":" + o2 + ":" + o1;
} 
```

HTML：

```
<form name="frm1">
  <input type="text" name="timer1">
  <input type="button" name="but1" value="start" onclick="startTimer();">
  <input type="button" name="but2" value="stop" onclick="stopTimer();">
</form> 
```

演示：http: [//jsfiddle.net/Guffa/B4a54/7/](http://jsfiddle.net/Guffa/B4a54/7/)

如果您希望计时器*准确*，您应该将开始时间保存在一个变量中，然后从当前时间中减去该时间以获得经过的时间，并且仅使用间隔来显示经过的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T10:49:41.790

改变这个

```
<input type="button" name="but1" value="start" onClick="c1=0; c2=0; c3=0; o1=0; o2=0; o3=0; start();"> 
```

对此

```
<input type="button" name="but1" value="start" onClick="c1=0; c2=0; c3=0; o1=0; o2=0; o3=0; window.clearTimeout(ID); ID=window.setTimeout('start();',100); start();"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T12:27:15.923

[这是一个改进的计时器示例](http://jsbin.com/akupuc/5/edit#source)

已经使用 jquery 完成了，但是没有任何库的情况下编写相同的内容不是问题。也解决了双击问题:)

您还可以更改 setInterval - 仅在计时器工作时调用它并在它停止时清除它。这一切都取决于你。

# android - Android，除了ZXing，还有其他第三方的二维码阅读库吗？

> ID：10267118
> 
> 赞同：1
> 
> 时间：2012-04-22T10:19:27.140
> 
> 标签：android, qr-code, zxing

在我的项目中，我需要阅读二维码。我知道如何使用 Intent 调用 Zxing，如果设备中没有安装，如何将用户引导到 android 市场以下载它。

根据要求，我不应该使用第三方应用程序，因此我决定将 zxing 库添加到我的项目中。另外，我知道我应该做什么以及如何将其添加为库。在发布 ADT 18 之前，我成功地将 zxing 作为库集成到我的其他应用程序中，但我真的很惊讶为什么在升级到 ADT 18 后我不能这样做。每次编译器说 Dalvik Machin 遇到错误 1；仅此而已。

我确定我设置正确但有问题。前两天我正在研究它，我确定有些问题我不知道是什么！

如果您知道我可以将其集成到我的应用程序中的其他 Or 库（.jar 格式），请告诉我。

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:48:22.263

你可以试试OBSQR

[https://bitbucket.org/trikita/obsqr](https://bitbucket.org/trikita/obsqr)

# actionscript-3 - 制表键带来麻烦。我怎样才能阻止这个

> ID：10267120
> 
> 赞同：0
> 
> 时间：2012-04-22T10:19:44.237
> 
> 标签：actionscript-3, flash-cs5

我在第 1 帧第 1 层有一个登录 MC。它包含 2 个输入文本用户名和密码，以及一个登录按钮。登录 MC 下方是菜单 MC（在第 1 帧，第 2 层）。Menu MC 包含一系列按钮（每个按钮加载一个子 swf）。当我发布并按 Tab 键时，位于菜单 MC 中的按钮也会被选中，这是我不想要的。我怎样才能阻止这个？我想要的是，只要我还没有登录，我应该无法通过 Tab 键选择 Menu MC 上的按钮。非常好的解决方案网站。每当我遇到任何编程问题时，我都会求助于 stackoverflow。提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:07:00.430

您可以控制是否选择影片剪辑的子项（或影片剪辑本身）时，使用`tabChildren`和`tabEnabled`属性按下制表符。例如：

```
// disable selection of menu children with tab
menuMc.tabChildren = false; 
```

祝你好运。

# python - IronPython、C# 和 XML - 打破缩进？

> ID：10267124
> 
> 赞同：1
> 
> 时间：2012-04-22T10:20:38.437
> 
> 标签：python, xml, ironpython, indentation

我们在 C# 上使用 IronPython，我在控制台和我们的应用程序上得到不同的结果。

此代码在 IronPython 控制台上运行良好：

```
str=[]
a = 1
b = 0
c = 1
if a==1:
   str.append('One')

if b==1:
   str.append('Two')

if c==1:
   str.append('Three')

out=','.join(str)
print out 
```

但是同样的代码在我们的应用程序上返回一个错误：

```
unexpected token 'if' 
```

我怀疑问题出在我的换行符上，因为包含 Python 代码的字符串是通过 XML (XML>C#>Python) 传递的：

```
<Set key="PythonCode" value="ipy:str=[]
a = 1
b = 0
c = 1
if a==1:
   str.append('One')

if b==1:
   str.append('Two')

if c==1:
   str.append('Three')

out=','.join(str)"/> 
```

其他命令返回预期结果，我的问题是缩进命令（条件、循环）。

由于我无法访问 C# 代码，因此我寻找一种编写单行代码的方法，或者任何其他不依赖缩进或换行符的方法。我试过这个：

```
<Set key="PythonCode" value="ipy:str=[];
a = 1;
b = 0;
c = 1;
if a==1: str.append('One');
if b==1: str.append('Two');
if c==1: str.append('Three');
out=','.join(str);"/> 
```

但是我又遇到了同样的错误，因为每个条件后面都应该有一个空行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:04:40.477

不保留 xml 中的非重要空格

[http://www.w3.org/TR/1998/REC-xml-19980210#AVNormalize](http://www.w3.org/TR/1998/REC-xml-19980210#AVNormalize)

> 在将属性的值传递给应用程序或检查其有效性之前，XML 处理器必须按如下方式对其进行规范化：(...) 空白字符（#x20、#xD、#xA、#x9）通过附加来处理#x20 到规范化的值，除了对于作为外部解析实体的一部分的“#xD#xA”序列或内部解析实体的文字实体值仅附加一个 #x20 (...) 如果声明的值不是 CDATA，则 XML 处理器必须通过丢弃任何前导和尾随空格 (#x20) 字符以及将空格 (#x20) 字符序列替换为单个空格 (#x20) 字符来进一步处理规范化的属性值.

如果要在 xml 标记中传输带有大量空白的文本，则需要将其包含在[cdata 部分](http://en.wikipedia.org/wiki/CDATA#CDATA_sections_in_XML)中：

```
<<Set key="PythonCode"><![CDATA[ 

YOUR CODE HERE

]]></Set> 
```

据我所知，您不能在属性字符串中使用 cdata 部分，因此您必须更改 xml 格式的该部分以将代码包含在标签中。

* * *

另一种解决方法是告诉您的 xml 导出器和 xml 导入器保留无关紧要的空白。

对于 c# 如何执行此操作取决于您使用哪种方法来解析 xml (XDocument, XmlDocument, ...)，例如

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.preservewhitespace(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.preservewhitespace(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/bb387014.aspx](http://msdn.microsoft.com/en-us/library/bb387014.aspx)

[http://msdn.microsoft.com/en-us/library/bb387103.aspx](http://msdn.microsoft.com/en-us/library/bb387103.aspx)

但是使用 cdata 绝对是更好的解决方案

* * *

你绝对不应该做的是使用[Whython – Python For People Who Hate Whitespace](http://writeonly.wordpress.com/2010/04/01/whython-python-for-people-who-hate-whitespace/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:42:51.963

似乎从 XML 中出来的代码没有换行符。
如果是这样，您运行 Python 代码的希望渺茫。

我不知道如何使 XML 表现不同。也许您可以在文本中嵌入一些内容，这些内容会转换为换行符（可能是`\n`或`<br>`）。

该`if`语句不能在没有换行符的情况下工作，即使是单行格式。这是因为单行不能有`:`两次。
对于此程序，您可以将`if`语句替换为`and`：

```
a==1 and str.append('One') 
```

这样，您的代码可以是单行的。
但是，如果您尝试更进一步，您会发现以这种方式进行编程非常困难。

# ruby-on-rails - Rails 3重定向

> ID：10267127
> 
> 赞同：0
> 
> 时间：2012-04-22T10:21:14.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

重定向如何在 Rails 中工作？我觉得这非常违反直觉和令人沮丧。

我在下面添加了视图文件`/views/mymodels/custom.html.erb`

我有空控制器方法：

```
def custom

end 
```

我在 routes.rb 中有以下内容：

```
 resources :mymodel do
    member do
      get 'custom'
    end
  end 
```

在我的控制器中，我尝试在通过以下方式创建模型时呈现自定义视图：

```
respond_to do |format|
  if @presentation.save
    redirect_to action: "custom"
    #format.html { redirect_to @mymodel, notice: 'Presentation was successfully created.'}
    #format.json { render json: @mymodel, status: :created, location: @mymodel } 
```

这会导致重定向呈现空白页面。但是浏览`/mymodels/[id]/custom`工作正常。我究竟做错了什么？为什么也`render :action => "custom"`不起作用？

编辑：

这有效：`format.html { render action: "upload" }`但为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:53:53.550

你为什么评论`format.html {...}`条款？用它：

代替：

```
 if @presentation.save
    redirect_to action: "custom"
    #format.html { redirect_to @mymodel, notice: 'Presentation was successfully created.'} 
```

写这个：

```
 if @presentation.save
    format.html { redirect_to action: "custom" } 
```

# php - Jquery Mobile：传递参数

> ID：10267128
> 
> 赞同：0
> 
> 时间：2012-04-22T10:21:24.237
> 
> 标签：php, jquery, jquery-mobile, parameters, parameter-passing

我正在通过制作一个基本的移动应用程序来试验 JQuery Mobile，但我遇到了将参数传递给其他页面的问题，无论它们是单独的 HTML 文件还是原始文件上的附加数据内容：页面。

我要做的就是从下拉列表中选择一个用户名，按一个按钮，然后进入下一页，将用户名放在标题中（例如登录为：用户名）。我研究了多种解决方案，例如 sessionStorage、PHP 会话、来自表单提交的 POST/GET，但它们似乎都不起作用。

我最接近我想要的是通过表单通过 POST 提交用户名，然后将其保存为 PHP 会话变量，该变量在下一页上显示用户名，但是当我导航到另一个页面时，它再次失败展示。

向前传递参数的最简单方法是什么？我怀疑由于 JQuery Mobile 的加载方法不包括标题中的 session_start() ，它在其他页面上不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:09:24.827

`$_SESSION`我在 jquerymobile 中的 php 也有问题，这里我有 4 页

1.  提交表单，保存在会话中
2.  开始会话，正确显示，点击链接
3.  开始会话，没有可显示的内容，点击链接
4.  开始会话，没有可显示的内容

但它都适用于 Internet Explorer 10。

我已经用自己的程序做了一些测试，使用`$_COOKIE`而不是`$_SESSION`. 现在它可以在每个带有 jquerymobile 的浏览器中正确运行

# jquery - html5 视频预加载器问题

> ID：10267130
> 
> 赞同：3
> 
> 时间：2012-04-22T10:21:37.270
> 
> 标签：jquery, html, video, preloader

我正在尝试为 html5 中的多个视频实现进度条预加载器。

此脚本将加载的单个视频的数量打印到 javascript 控制台中。

```
$('.videos video').on('progress', function(){

        video_id=$(this).attr('id');

        track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

        console.log('id: '+video_id+' - loaded: '+track_loaded);
}); 
```

似乎 javascript 在定义 http 请求之前启动，所以我随机收到一些错误类型：索引或大小为负数或大于允许的数量

及时，请求被执行并且错误不再记录，但我仍然在控制台中收到一个 js 错误。

这是使用 7 个视频的日志：

```
track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 2 - loaded: 0.013786587924260673
index.html?id=48 (riga 659)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 3 - loaded: 0.16078649017264499
index.html?id=48 (riga 659)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 2 - loaded: 0.07255091868406688
index.html?id=48 (riga 659)
id: 3 - loaded: 0.26668247728354455
index.html?id=48 (riga 659)
id: 4 - loaded: 0.034023975757908255
index.html?id=48 (riga 659)
id: 2 - loaded: 0.1380029751260965
index.html?id=48 (riga 659)
id: 3 - loaded: 0.35015135988644913
index.html?id=48 (riga 659)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 4 - loaded: 0.12001769993327845
index.html?id=48 (riga 659)
id: 2 - loaded: 0.22576573877362435
index.html?id=48 (riga 659)
id: 3 - loaded: 0.4388296947315865
index.html?id=48 (riga 659)
id: 4 - loaded: 0.22714545076155443
index.html?id=48 (riga 659)
id: 2 - loaded: 0.3168997882162283
index.html?id=48 (riga 659)
id: 3 - loaded: 0.5364553258101487
index.html?id=48 (riga 659)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 4 - loaded: 0.3736262708488382
index.html?id=48 (riga 659)
id: 2 - loaded: 0.3912871004993093
index.html?id=48 (riga 659)
id: 3 - loaded: 0.6229262584189355
index.html?id=48 (riga 659)
id: 5 - loaded: 0.09206320825645414
index.html?id=48 (riga 659)
id: 4 - loaded: 0.5244796611615865
index.html?id=48 (riga 659)
id: 2 - loaded: 0.4545190497364752
index.html?id=48 (riga 659)
id: 3 - loaded: 0.7033342169513136
index.html?id=48 (riga 659)
id: 5 - loaded: 0.2423348637305345
index.html?id=48 (riga 659)
id: 4 - loaded: 0.6571140088682328
index.html?id=48 (riga 659)
id: 2 - loaded: 0.5290708241980147
index.html?id=48 (riga 659)
id: 3 - loaded: 0.7850666087133332
index.html?id=48 (riga 659)
id: 5 - loaded: 0.36814371781995037
index.html?id=48 (riga 659)
id: 4 - loaded: 0.8086961608852251
index.html?id=48 (riga 659)
id: 4 - loaded: 1
index.html?id=48 (riga 659)
id: 3 - loaded: 0.8720378998901186
index.html?id=48 (riga 659)
id: 2 - loaded: 0.5983052841086022
index.html?id=48 (riga 659)
id: 5 - loaded: 0.7350861148492476
index.html?id=48 (riga 659)
id: 5 - loaded: 1
index.html?id=48 (riga 659)
id: 2 - loaded: 0.6853554286796958
index.html?id=48 (riga 659)
id: 3 - loaded: 0.9603336040161238
index.html?id=48 (riga 659)
id: 3 - loaded: 1
index.html?id=48 (riga 659)
Index or size is negative or greater than the allowed amount

track_loaded=$(this).get(0).buffered.end(0) / $(this).get(0).duration;

index.html?id=48 (riga 658)
id: 2 - loaded: 0.7597701450304093
index.html?id=48 (riga 659)
id: 7 - loaded: 0.16078649017264499
index.html?id=48 (riga 659)
id: 2 - loaded: 0.8834383564479372
index.html?id=48 (riga 659)
id: 7 - loaded: 0.2774545653146095
index.html?id=48 (riga 659)
id: 7 - loaded: 0.40604253952334807
index.html?id=48 (riga 659)
id: 2 - loaded: 0.9788207540541778
index.html?id=48 (riga 659)
id: 2 - loaded: 1
index.html?id=48 (riga 659)
id: 7 - loaded: 0.5112616067135821
index.html?id=48 (riga 659)
id: 7 - loaded: 0.6072096210159036
index.html?id=48 (riga 659)
id: 7 - loaded: 0.7684081485193699
index.html?id=48 (riga 659)
id: 7 - loaded: 0.9098284582545465
index.html?id=48 (riga 659)
id: 7 - loaded: 1
index.html?id=48 (riga 659)
id: 7 - loaded: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:43:12.603

您可以尝试检查媒体的状态并等待它准备好。请参阅[媒体就绪状态](http://developers.whatwg.org/the-iframe-element.html#ready-states)。

# python - wxPython 中的网格和 Sizer

> ID：10267132
> 
> 赞同：0
> 
> 时间：2012-04-22T10:22:06.453
> 
> 标签：python, user-interface, wxpython

因此，我在 wxPython 中遇到了 Grid 和 Sizer 的问题，如果我包含此表，格式似乎会以某种方式混乱，整个窗口似乎具有正确的大小，并且项目出现在正确的位置。

但是当这张桌子被包括在内时，我猜是面板的内部浅灰色？但是由于这个深灰色字段，表格下方的项目被隐藏了

删除 setcolsize 调用也不能解决它

感谢您的任何回复

```
 wx.Frame.__init__(self, parent, title=title)
    panel = wx.Panel(self)

    grid = wx.GridBagSizer(hgap=5, vgap=5)
    #  some other items comes before this
    # FileGrid
    fileF = wx.grid.Grid(panel)
    fileF.CreateGrid(2,3)
    fileF.SetColLabelSize(0)
    fileF.SetRowLabelSize(0)

    fileF.SetCellValue(0, 0, "Old")
    fileF.SetCellValue(0, 1, "New")
    fileF.SetCellValue(0, 2, "Update?")

    grid.Add(fileF, pos=(5,0))
    # FileGrid end

    runBtn = wx.Button(panel, wx.ID_APPLY, "Apply")
    self.Bind(wx.EVT_BUTTON, self.applyScRen, runBtn)
    grid.Add(runBtn, pos=(6,0))

    self.SetSizerAndFit(grid) 
```

![gui的图像，因为它是](../Images/c67bd3363f43e8163884132b6597074f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:06:08.410

您没有提供完整的帧结构，但这应该让您走上正轨。

将最后一行更改为：

```
panel.SetSizerAndFit(grid) 
```

这已经改善了情况。的容器`sizer`是 the `panel`，而它又包含在`frame`.

**编辑**

这个[pastebin](http://pastebin.com/VXT6kufH)有完整的工作版本。它会生成此图像，然后是我对您的代码所做的关键更改：

![wxPython框架截图](../Images/cfa47fd7d0eae9c4d8410a4842302ce9.png)

```
 #panel.CreateStatusBar()
    vSizer.Add(grid, 0, wx.ALL, 5)
    panel.SetSizerAndFit(grid)
    self.CreateStatusBar()
    self.SetInitialSize()
    self.Show(True) 
```

# asp.net - 使用 LONG url 重写 asp.net 电子商务网站的 URL

> ID：10267135
> 
> 赞同：0
> 
> 时间：2012-04-22T10:22:36.833
> 
> 标签：asp.net, url, url-rewriting

我有一个以 php 开始并已迁移到 asp.net 的电子商务网站。

我发现除非我对我的设计师非常具体，否则我想要发生的变化不会。

让我疯狂的一件事是非常长的网址。例如，来自以下层次结构的类别页面：孕妇和护理服装 - 孕妇裤和牛仔裤 - 孕妇牛仔裤返回 www.exampledomain.com/store/ 的 URL category/maternity%20and%20nursing%20clothing/maternity%20pants%20&%20jeans/maternity%20jeans.aspx！来吧！

设计师正在努力用连字符替换空格......当他在那里时，有没有一种方法可以让他让这些 url 对用户更友好？有没有办法跳过除了最终产品类别之外的所有内容？那么，www.exampledomain.com/maternity-jeans.aspx？

为了更容易，我应该删除层次结构并直接从主页获得最终类别吗？我不想这样做，因为有很多子类别，没有比这个例子更深的了。

任何建议都会受到热烈欢迎。正如我所说，如果我不对我的设计师说，这就是我想要的，这就是我认为你这样做的方式，我会被拒之门外——由于几个原因，我暂时被他们困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:05:03.887

我个人会使用包含最少字符的 URL 结构，例如：

[http://www.example.com/maternity-jeans](http://www.example.com/maternity-jeans)

这不仅干净，而且对 SEO 更有利，因为“商店”和“类别”之类的无用词越来越少。它的安全性也稍好一些，因为它不会让人明显看出您的站点是基于 ASP.NET 构建的。

为了实现这种 URL 结构，我通常会选择使用[Helicon ISAPI rewrite](http://www.helicontech.com/isapi_rewrite/)，如果您在专用服务器上，您可能可以使用免费版本，否则需要 99 美元的费用。

另一种选择是使用 IIS Url 重写，您需要运行 IIS 7 及更高版本才能使用这些。

我假设您有一个所有类别都加载的类别页面？对于下面的示例，我将其称为“category.aspx”。

下面的这 2 条规则将捕获类别的名称并将其作为“category.aspx”页面的查询字符串参数传递，然后您可以使用它来查询数据库并呈现页面。

螺旋ISAPI：

```
RewriteRule ^/(.*)$            /category.aspx?name=$1 [L] 
```

IIS 网址重写：

```
<rule name="Category" stopProcessing="true">
    <match url="(.*)" />
    <action type="Rewrite" url="category.aspx?name={R:1}" />
</rule> 
```

尽管上述 URL 结构是我的首选，但您可能必须考虑您网站上其他页面的 URL。上述规则将采用任何 URL 并假定它是一个类别，显然并非所有 URL 都是类别。

在这种情况下，您有几个选项，您可以包含一个唯一的单词或字符来标识它是一个类别，例如：

[http://www.example.com/c/maternity-jeans](http://www.example.com/c/maternity-jeans)

这会改变你的重写：

螺旋ISAPI：

```
RewriteRule ^/c/(.*)$            /category.aspx?name=$1 [L] 
```

IIS 网址重写：

```
<rule name="Category" stopProcessing="true">
    <match url="c/(.*)" />
    <action type="Rewrite" url="category.aspx?name={R:1}" />
</rule> 
```

或者，您可以通过网站上的脚本运行每个页面，该脚本会根据 URL 确定您正在查看的页面类型，然后呈现适当的内容。

这在很大程度上取决于您的网站目前的工作方式以及您是否准备好进行更改。

# c# - 更改应用程序栏中的按钮？

> ID：10267136
> 
> 赞同：0
> 
> 时间：2012-04-22T10:22:37.167
> 
> 标签：c#, windows-phone-7

我想在我的 WP7 应用程序中更改图标以及它们在代码中的作用。我已经在`MainPage`构造函数中尝试过，`MainPage_Loaded`但它说 ApplicationBar ( `x:Name`) 一直为空。

由于我使用相同的页面和不同的状态，我该如何更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:36:29.503

尝试删除该`x:Name`属性并使用[Page.ApplicationBar](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.applicationbar%28v=VS.92%29.aspx)访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:14:44.580

不幸的是，目前无法通过代码访问应用程序栏按钮。我遵循了官方 Mircosoft Training Kit for WP7 的一个示例来完成该任务。这是 XAML 和一些代码：

```
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar>
        <shell:ApplicationBarIconButton IconUri="/icons/appbar.pin.png" IsEnabled="True" Text="Anpinnen" x:Name="appPinPage" Click="appPinPage_Click" />
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

请注意，ApplicationBar 是 PhoneApplicationPage 的属性，因此您不必为分配给 PhoneApplicationPage 的 ApplicationBar 属性的 ApplicationBar 对象提供显式名称。这是上面的xaml代码中更改按钮图片的示例。该代码在 PhoneApplicationPage 的重写 OnNavigatedTo() 方法中调用。

```
 if (this.ViewModel.IsPinned())
        {
            ((ApplicationBarIconButton)this.ApplicationBar.Buttons[0]).Text = Resource1.txtUnpin;
            ((ApplicationBarIconButton)this.ApplicationBar.Buttons[0]).IconUri = new Uri("/icons/appbar.unpin.png", UriKind.Relative);
        }
        else
        {
            ((ApplicationBarIconButton)this.ApplicationBar.Buttons[0]).Text = Resource1.txtPin;
            ((ApplicationBarIconButton)this.ApplicationBar.Buttons[0]).IconUri = new Uri("/icons/appbar.pin.png", UriKind.Relative);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:47:47.020

不幸的是，[ApplicationBar](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.applicationbar%28v=vs.92%29.aspx)不是 Silverlight 控件（不继承自[UIElement](http://msdn.microsoft.com/en-us/library/system.windows.uielement%28v=vs.95%29.aspx)）；这意味着它不能通过其中`x:Name`的按钮访问，但您可以使用[ApplicationBar](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.applicationbar%28v=vs.92%29.aspx)属性在页面内访问它！

查看[此示例](http://msdn.microsoft.com/en-us/library/hh394038%28v=vs.92%29.aspx)以了解如何从页面后面的代码创建和访问 ApplicationBar。

如果您愿意使用 MVVM 架构，您应该检查[Cimbalino Windows Phone Toolkit](http://cimbalino.github.com/Cimbalino-Phone-Toolkit/)中的 ApplicationBarBehaviour ，它将为您节省大量工作！

# android - 如何在Android Fragment中使用achartengine返回带有图表的布局

> ID：10267137
> 
> 赞同：0
> 
> 时间：2012-04-22T10:22:37.900
> 
> 标签：android, android-layout, achartengine

我正在尝试从片段中的 onCreateView 返回带有图表和一些按钮的布局。我不知道如何将这两种观点合二为一。我只能返回没有图表的图表或布局：

```
 public class ChartFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        // LineGraph - class which draws the graph using achartengine
        final LineGraph lineGraph = new LineGraph();
        final GraphicalView chart = lineGraph.getGraphicalView(inflater.getContext());
        final View view = inflater.inflate(R.layout.chart, container, false);

        Button drawChartButton = (Button) view.findViewById(R.id.button_draw_chart);

        drawChartButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // update chart for new data
            }
        });

        return chart; //return the chart only
        // return view; // return layout but without the chart

    }

} 
```

在活动中，以下代码：

```
 Button chartButton = (Button) findViewById(R.id.button_draw_chart);
    chartButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        LinearLayout layout = (LinearLayout) findViewById(R.id.chart);
        LineGraph lineGrpah = new LineGraph();

        GraphicalView testChart = lineGrpah
            .getGraphicalView(SimpleApp.this);
        layout.addView(testChart, new LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            }
        }); 
```

和 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

   <LinearLayout
       android:id="@+id/chart"
       android:layout_width="600dp"
       android:layout_height="350dp"
       android:layout_margin="15dp" >

   </LinearLayout>

   <Button
       android:id="@+id/button_draw_chart"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/button_draw_chart" />

</LinearLayout> 
```

工作正常，但我不知道如何在片段中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:58:47.930

只需调整您在's方法`onCreateView()`中编写的代码，特别是：`chartButton``onClick()`

```
view.addView(chart, new LayoutParams(
        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        }
    }); 
```

然后返回`view`。

# c# - URL信息加密

> ID：10267138
> 
> 赞同：1
> 
> 时间：2012-04-22T10:22:49.577
> 
> 标签：c#, asp.net, encryption

目前我正在创建一个在线考试，我需要通过 URL 将一点点信息从一个页面传递到另一个页面。

目前我有这个：

```
Response.Redirect("Home.aspx?uName=" + txtUserName.Text); 
```

进入主页，其中包含用户用户名，然后被拾取并加载信息。但我想要做的是如何加密 UserName，这样用户就无法玩弄它，也无法猜测它是什么。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:27:26.127

不要使用那个。

改为使用`Session`。

如果你真的需要通过 URL ，那么加密（密码加密）数据并用`Base64`（编码为可传输字符）进行编码（不要忘记加密“+”号，因为 Base 64 确实使用它，但浏览器认为它是一个空格.. .)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T10:28:29.730

一个简单的解决方案是从这个问题中得到答案：[加密和解密字符串](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)并执行以下操作：

```
Response.Redirect("Home.aspx?uName=" + Server.UrlEncode(Crypto.EncryptStringAES(txtUserName.Text, "YourEncryptionKey")) 
```

然后在您的下一页上，只需反转该过程即可将值取回，如下所示：

```
var username = Crypto.EncryptStringAES(Request["uName"], "YourEncryptionKey") 
```

但我会问，你为什么要通过 url 传递用户名？使用会员提供商并简单地让用户登录不是更好吗？然后，您可以将任何相关信息存储在与该用户相关的数据库中。

# actionscript-3 - as3 中的错误 1061 hittestobject

> ID：10267139
> 
> 赞同：0
> 
> 时间：2012-04-22T10:22:51.290
> 
> 标签：actionscript-3, flash-builder, hittest

嘿，每个人都在做某事，但每次我测试运行时，我都会收到以下错误：

说明 资源路径 位置 类型

1180：调用可能未定义的方法 addChild。Deeltoets3.as /Deeltoets3/src 第 107 行 Flex 问题

1120：访问未定义的属性 blam。Deeltoets3.as /Deeltoets3/src 第 105 行 Flex 问题

1120：访问未定义的属性 blam。Deeltoets3.as /Deeltoets3/src 第 106 行 Flex 问题

1120：访问未定义的属性 blam。Deeltoets3.as /Deeltoets3/src 第 107 行 Flex 问题

1061: 通过静态类型 Class 的引用调用可能未定义的方法 hitTestObject。Deeltoets3.as /Deeltoets3/src 第 103 行 Flex 问题

这是代码，有谁知道我做错了什么？谢谢

```
package
{
    import figures.Blam;
    import figures.Muur;
    import figures.Sun;
    import figures.Vogel;

    import flash.display.Bitmap;
    import flash.display.Graphics;
    import flash.display.Sprite;
    import flash.display.Stage;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.media.Sound;
    import flash.net.URLRequest;

    public class Deeltoets3 extends Sprite
    {
        // Een afbeelding toevoegen 
        [Embed(source="fotos/sky.jpg")] 
        private var BackgroundPicture:Class; 
        private var background:Bitmap; 

        //maakt een variabele aan voor de vogel
        public var calimeroDeVogel:Vogel;

        //maakt een variabele aan voor de zon
        public var movingSun:Sun;

        //maakt een variabele aan voor de zon
        public var Gebouw:Muur;

        //maakt een variabele aan voor de crash
        public var blam:Blam;

        // maakt een variabele aan voor het achtergrond geluid
        public var achtergrondMuziek:Sound; 

        // Constructor functie
        public function Deeltoets3()
        {
            // De stage instelllen op niet meeschalen
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            // Toevoeging van het achtergondplaatje op de display list
            background = new BackgroundPicture();
            background.width = 1240;
            background.height = 800;
            addChild(background);

            // Toevoeging van het de vogel op de display list
            calimeroDeVogel = new Vogel();
            calimeroDeVogel.scaleX = 1;
            calimeroDeVogel.scaleY = 1;
            calimeroDeVogel.addEventListener(Event.ENTER_FRAME, onEnterFrame);
            addChild(calimeroDeVogel);

            // Toevoeging van de zon op de display list
            movingSun = new Sun();
            movingSun.scaleX = 1;
            movingSun.scaleY = 1;
            movingSun.addEventListener(Event.ENTER_FRAME, onEnterFrame);
            addChild(movingSun);

            // Toevoeging van de muur op de display list
            Gebouw = new Muur();
            Gebouw.scaleX = 1;
            Gebouw.scaleY = 1;
            Gebouw.addEventListener(Event.ENTER_FRAME, onEnterFrame);
            addChild(Gebouw);

            // het gedeelte voor de muziek
            // maakt een request aan genaamd jesseSong die zoekt naar het aangegeven mp3 bestand        
            achtergrondMuziek = new Sound; 
            URLRequest("music/chirp.mp3");
            achtergrondMuziek.play();
            achtergrondMuziek.addEventListener(Event.ENTER_FRAME, onEnterFrame);

        }

        // event toevoegen
        public function onEnterFrame(event:Event):void {
            calimeroDeVogel.x+=4;}

            if (calimeroDeVogel.hitTestObject(Gebouw))
            {
                blam = new Blam
                blam.x = 200;
                addChild(blam)
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:21:30.883

1.  `super()`你的构造函数中没有
2.  `calimeroDeVogel.x+=4;}`- **}**封装函数；把它放在你的**if之后**

# ruby - n ruby 迭代

> ID：10267142
> 
> 赞同：2
> 
> 时间：2012-04-22T10:23:20.630
> 
> 标签：ruby, iteration

我怎样才能创建一个不是按一个迭代而是按n迭代的循环？

在这个例子中，我如何读取五行，而下一次迭代读取其他五行，依此类推？

```
example = '<div id="post-editor" class="post-editor">

    <div class="wmd-container">
        <div id="wmd-button-bar" class="wmd-button-bar"></div>
        <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101"></textarea>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>

    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="7668dcce69f925d656bc4019c29fd061">
        <input id="author" name="author" type="text">
    </div>
</div>'

puts example 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:29:48.240

你可以做：

```
example.each_line.each_slice(5) { |lines| # do something with lines } 
```

# c# - 从所有线程获取所有窗口

> ID：10267143
> 
> 赞同：1
> 
> 时间：2012-04-22T10:23:22.847
> 
> 标签：c#, .net, wpf, multithreading, dispatcher

我在我的应用程序中开始一些线程，比如

```
 this.Thread = new Thread(() =>
  {
      System.Windows.Threading.Dispatcher.CurrentDispatcher.BeginInvoke(new Action(() =>
      {
         ...
         ...

      }));
      System.Windows.Threading.Dispatcher.Run();
                           }) { IsBackground = true, Name = Constants.SPECIAL_UI_THREAD_NAME};
  this.Thread.SetApartmentState(ApartmentState.STA);
  this.Thread.CurrentCulture = Thread.CurrentThread.CurrentCulture;
  this.Thread.CurrentUICulture = Thread.CurrentThread.CurrentUICulture;
  this.Thread.Start(); 
```

它们都有一个生成和显示的窗口。现在，当我在我的主线程中使用

> 应用程序.当前.Windows

我没有得到我的附加线程的窗口。

如何获取应用程序所有线程的所有窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:27:29.090

您不应该在应用程序的主线程以外的任何线程上创建窗口。相反，在主应用程序线程上创建所有窗口并使用其他线程（例如任务并行库）异步工作，以便主应用程序的线程（以及因此 UI）保持响应。

# android - Android - 捕获图像后更新文件夹显示

> ID：10267150
> 
> 赞同：1
> 
> 时间：2012-04-22T10:24:39.260
> 
> 标签：android, android-intent, android-widget, android-camera

我是安卓新手。现在，我正在使用以下方法进行图像捕获功能：

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE ); 
```

问题是我拍摄照片后，新拍摄的照片不会显示在图像显示页面上。

这里有谁知道哪里有代码可以帮助我刷新我的 android 或我需要执行的任何步骤，以便在我拍摄新照片后可以更新我的图像显示页面？

任何帮助将不胜感激，并首先感谢您。

更新的答案：我用这个，可能这可以帮助别人：

```
 mScanner = new MediaScannerConnection(
                Camera.this,
                new MediaScannerConnection.MediaScannerConnectionClient() {
                    public void onMediaScannerConnected() {
                        mScanner.scanFile(outputFileUri.getPath(), null /* mimeType */);
                    }

                    public void onScanCompleted(String path, Uri uri) {
                        //we can use the uri, to get the newly added image, but it will return path to full sized image
                        //e.g. content://media/external/images/media/7
                        //we can also update this path by replacing media by thumbnail to get the thumbnail
                        //because thumbnail path would be like content://media/external/images/thumbnail/7
                        //But the thumbnail is created after some delay by Android OS
                        //So you may not get the thumbnail. This is why I started new UI thread
                        //and it'll only run after the current thread completed.
                        if (path.equals(outputFileUri.getPath())) {
                            mScanner.disconnect();
                            //we need to create new UI thread because, we can't update our mail thread from here
                            //Both the thread will run one by one, see documentation of android  
                            Camera.this
                            .runOnUiThread(new Runnable() {
                                public void run() {

                                }
                            });
                        }
                    }
                });
        mScanner.connect(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T10:59:42.797

莎莉，你的意思是当你拍完照片后，当你查看你知道文件所在的目录时，你在画廊或文件管理器中看不到它？

如果是这样，您需要像这样运行媒体扫描仪：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, uri)); 
```

...其中 uri 是照片的 uri，因为您已经知道了，尽管如果这样更容易，您可以使用目录的 uri（虽然它更慢 - 如果目录包含许多文件或嵌套目录，可能会非常慢） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T10:28:52.003

您应该使用以下代码拍照::

```
Calendar cal = Calendar.getInstance();
File file = new File(Environment.getExternalStorageDirectory(),(cal.getTimeInMillis()+".jpg"));
if(!file.exists()){
try {
file.createNewFile();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
selectedImageUri = Uri.fromFile(file);
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT, selectedImageUri);
startActivityForResult(i, CAMERA_RESULT); 
```

在活动结果上，您可以使用这些代码:::

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
switch (requestCode) {
case CAMERA_RESULT:
if (resultCode == RESULT_OK) {
try {
Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContext().getContentResolver(), selectedImageUri);
imageView.setImageBitmap(bitmap);
} catch (FileNotFoundException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
break;
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T10:29:42.503

您可以通过以下方式刷新您的活动：

```
Intent myIntent = getIntent();
finish();
startActivity(myIntent); 
```

# html - HTML5 中的 ID 和类属性

> ID：10267151
> 
> 赞同：2
> 
> 时间：2012-04-22T10:24:48.203
> 
> 标签：html, class

“id 属性在 HTML5 中变得更加优雅”写在某些页面上。如果我使用 class 属性而不是 id，它是否符合 HTML5？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T10:34:52.917

我相信你在谈论[这篇文章](http://mathiasbynens.be/notes/html5-id-class)。嗯，并没有真正改变`class`——es 和`id`s 的使用方式与 HTML4 中的相同。

除了一件事：HTML4 规范说以下

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 (“-”)、下划线 (“_”) 、冒号（“:”）和句点（“.”）。

然而，在 HTML5 规范中，对`id`s 的要求不那么严格

> 该值在元素的主子树中的所有 ID 中必须是唯一的，并且必须包含至少一个字符。该值不得包含任何空格字符。

所以 HTML5`id`可以接受更多的字符，这就是[你所引用的文章](http://mathiasbynens.be/notes/html5-id-class)所说的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T10:27:15.167

这些属性仍然有两个不同的用途：

*   `class`可以包含多个类并且多个元素可以具有相同的类
*   `id`包含一个 ID，并且该 ID 只能用于**一个**元素。

[您引用的声明之所以存在，是因为在 HTML5 中取消](http://mathiasbynens.be/notes/html5-id-class)了对 ID 外观的一些限制——类从来没有这些限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T10:27:23.083

`ID`和之间的区别在于`class`必须`ID`在一页上是唯一的，但`class`可以多次使用。

两者都是有效的 HTML 5，您可以在此处验证您的页面：http: [//validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T10:28:36.373

在这方面，HTML5 并没有真正改变。ID 仍然是唯一的，并且类可以跨元素共享。不确定引用是指什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T10:27:16.243

`class`用于通用目的，`id`用于唯一标识目的。我的意思是， id 唯一标识一个元素，而 class 指定一个组元素具有相同类型的行为。我希望，它清除了`class`and的目的`id`。

# asp.net - 如何在 asp.net mvc3 中根据日期生成报告？

> ID：10267152
> 
> 赞同：0
> 
> 时间：2012-04-22T10:24:56.610
> 
> 标签：asp.net, asp.net-mvc-3

我想根据 asp.net mvc3 中的日期生成报告。我的模型包含日期作为属性。我正在使用以下代码获取开始日期和结束日期

```
<% using (Html.BeginForm("ReportGenerated", "CallingFeedback", FormMethod.Post)) { %>
<%: Html.ValidationSummary(true) %>
<fieldset>

    <div class="editor-label">
        <asp:Label Text= "Start_Date" runat="server"></asp:Label>
    </div>
    <div class="editor-field">
        <%: Html.TextBox("start_date") %>
    </div>
    <div class="editor-label">
        <asp:Label ID="Label1" Text= "End_Date" runat="server"></asp:Label>
    </div>
    <div class="editor-field">
        <%: Html.TextBox("end_date") %>

    </div>

    <p>
        <input type="submit" value="Generate Report" />
    </p>

</fieldset> 
```

控制器中用于报告生成的两种方法是：

```
 public ViewResult Report()
    {
        return View();
    } 
```

它用于通过使用上述视图从用户那里获取两个日期。

另一种方法是：

```
[HttpPost,ActionName("Report")]
    public ActionResult ReportGenerated(DateTime start_date, DateTime end_date)
    {
        var query = "SELECT * " + "FROM Calling_Feedback " + "WHERE calling_date BETWEEN start_date AND end_date ";
        return View(db.Calling_Feedbacks.SqlQuery(query).ToList());
    } 
```

用于显示报告。

总的来说，我想生成基本上包含开始日期和结束日期之间模型的所有属性的报告。模型的名称是 Calling_Feedback。还告诉我保存报告和打印报告的方法。

# c# - IF 块内的 ASP.net C# 变量声明

> ID：10267154
> 
> 赞同：0
> 
> 时间：2012-04-22T10:25:06.980
> 
> 标签：c#, .net, razor, scope, dynamic-typing

我尝试在 ASP.net C# 中使用以下代码：

```
@{
    var Host = Request.ServerVariables["HTTP_HOST"];
    if (Host.Contains("example.com")) {
        var Online = true;        
    }
    if (Online == true) {
        // Analytics Code
    }
} 
```

但它返回错误。

我发现该变量`Online`不能在外部使用，因为它的范围仅限于声明它的 IF 语句。

通过反复试验，我发现以下代码有效：

```
@{
    var Host = Request.ServerVariables["HTTP_HOST"];
    if (Host.Contains("example.com")) {
        Page.Online = true;        
    }
    if (Page.Online == true) {
        // Analytics Code
    }
} 
```

`}`为什么第二个片段可以工作，尽管它不应该因为变量范围预计将在IF 语句关闭时结束？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:39:03.743

**在线**是一个*变量*：

```
var Online = true; 
```

**页面**是一个*对象*。它实际上是一个内置对象，属于您正在操作的 Web 请求上下文。它也是一个*动态*对象，这意味着它没有固定的类型。它的类型是在运行时推断的。

```
Page.Online 
```

**Page.Online**本身并不是一个变量。它是属于 Page 的动态属性。动态对象的一个​​特点是您可以为它们分配任何东西，以及所有任何方法，编译器不会抱怨。它将解析延迟到运行时，从上下文中推断出它的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T10:26:55.190

因为在第二条语句中，它没有*声明*一个变量，而只是设置它的值。`Page.Online`可能是在自身的基类中声明和初始化的`Page`。

# flattr - 通过 API 扁平化 URL

> ID：10267157
> 
> 赞同：0
> 
> 时间：2012-04-22T10:25:34.017
> 
> 标签：flattr

我是 Instapaper 用户，我只是想编写一个脚本来获取我的“喜欢”文件夹 RSS-Feed，获取网页的链接并对其进行整理。

到目前为止，我一直在“提交”flattr - 是否有任何 API 等用于该任务，或者 flattr 是否必须始终“手动”完成？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:11:25.720

有一个 API 记录在[http://developers.flattr.net/](http://developers.flattr.net/)。您可以 flattr 网页的 URL 或 flattr ID（如果您知道的话）。您需要一个 OAuth2 访问令牌才能执行此操作，但文档说明了如何获取它。

# ruby-on-rails - 用于设置每月订阅的架构

> ID：10267159
> 
> 赞同：1
> 
> 时间：2012-04-22T10:26:12.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, schema, e-commerce, subscription

我有一个列出场地的应用程序。每个场地可以是免费的，也可以是付费的，因此具有不同的特权。我希望能够将高级升级链接到付款，但正在努力解决如何做到这一点。

我很确定我最终会使用 chargify 或 spreedly 进行付款，但架构应该是什么样的？

我认为每月订阅最好，所以我是否应该设置另一个订阅表并在每次创建或修改订阅时生成记录？因此，一个场所会有很多订阅，并且每个订阅记录在生成 28 天后都有一个带有开关的布尔过期字段是否明智？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:54:09.767

在[SaaS Rails 工具包](http://railskits.com/saas/)中，我拥有以下内容：

帐户（由子域加载） has_one 订阅 订阅有一个日期时间字段 next_renewal_at，每次成功计费时都会提前一个月设置。每次成功计费时都会创建 SubscriptionPayment (belongs_to Subscription)。

我不知道为什么您的 Venue 会有很多订阅，但基本上在我的方法中，每个订阅都有一个计费令牌（由 Stripe 提供），用于向信用卡收费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T13:52:02.013

使用条纹。它与 Rails 集成得非常好，并且具有令人难以置信的（和明智的）文档。Ryan Bates 在将 Stripe 与 Rails 集成方面也做了出色的 RailsCast，他的示例是按月订阅，因此您应该能够跟随。

[http://railscasts.com/episodes/288-billing-with-stripe](http://railscasts.com/episodes/288-billing-with-stripe)

# image - Visual Studio 修复 PictureBox 闪烁 (C++)

> ID：10267164
> 
> 赞同：0
> 
> 时间：2012-04-22T10:26:56.360
> 
> 标签：image, c++-cli, picturebox, flicker

我正在制作一个游戏，我必须在每个 Timer 滴答声上重绘大约 40 个对象。我有大约 7 个具有不同 Draw(Picturebox ^ pictureBox) 方法的类。如您所见，我为每个对象绘制方法传递了图片框指针。由于对象太多而且可能会更多，所以pictureBox 会闪烁，因为它会一个接一个地绘制每个对象。有没有简单的方法来解决闪烁？也许以某种方式准备图像，然后将其显示在 PictureBox 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:03:04.717

> 7 个具有不同 Draw(Picturebox ^ pictureBox) 方法的类

该签名很可能会产生闪烁。因为为了利用 PictureBox 内置的双缓冲，您*还*必须传递一个 Graphics 对象。您从 Paint 事件中获得的那个。您现在可能正在使用 CreateGraphics()，这是一个严重的闪烁错误。

正确的签名是 Draw(Graphics^ graphics) 并像这样使用：

```
private: 
    void pictureBox1_Paint(Object^ sender, PaintEventArgs^ e) {
        for each (GameObject^ obj in gameObjects) {
            obj->Draw(e->Graphics);
        }
    }

    void timer1_Tick(Object^sender, EventArgs^ e) {
        updateGame();               // move stuff around
        pictureBox1->Invalidate();  // redraw scene
    } 
```

假设您为 PictureBox 和 Timer 控件添加了事件处理程序。

# java - Maven插件；使用一个的输出作为另一个的输入

> ID：10267174
> 
> 赞同：3
> 
> 时间：2012-04-22T10:28:17.700
> 
> 标签：java, maven

我的问题是我编写了一个 Maven 插件来将工件部署到用户指定的位置。我现在正在尝试编写另一个 maven 插件来使用这个部署的工件，更改一些东西并再次压缩它。我想编写第二个插件，以便我使用第一个插件来获取部署位置的信息。我不知道如何从第一个插件访问这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:44:38.390

我同意@Barend 的观点，如果您有能力在部署之前进行更改，那可能是最好的策略。

如果你不能这样做，你可以遵循像 Maven 发布插件这样的插件策略。Maven 发布插件分两个阶段运行，第二次运行需要第一次运行的输出。他们通过在项目目录中保存临时属性文件来管理它，其中包含标签名称、SNAPSHOT 版本名称等信息。

您可以对插件使用相同的方法。请记住，您的插件将是一种事务性的，它期望另一个目标在它可以完成工作之前已经运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:00:07.493

在我看来，最简单的解决方法是颠倒插件运行的顺序。

首先运行插件 B，使用下面的已知位置`target/`修改工件，然后运行插件 A，将修改后的工件部署到配置的位置。

如果这不是选项，我建议您简单地复制配置值（以便两个插件都被告知其`<configuration>`元素中的新位置）。这使两个插件保持独立，这是 Maven 假设的。

最后一个选项是让插件 B 解析整个 POM 并从插件 A 的`<configuration>`元素中提取信息，但我真的不推荐这样做。如果你这样做，这两个插件会紧密地交织在一起，以至于它们实际上只是一个插件。这是糟糕的设计，违反了最小意外原则，并且可能会导致严重的配置问题。

# c++ - ncurses & curses - 编译器未定义的引用

> ID：10267178
> 
> 赞同：4
> 
> 时间：2012-04-22T10:28:51.337
> 
> 标签：c++, compiler-errors

好的，所以我最初一直在尝试使用一些据称仅适用于 Windows 的标头，我的错，但我已经走了，只是使用 curses.h 复制了我需要的东西。但是我仍然收到完全相同的错误。

```
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/josh/Projects/Testing grounds/kbhit'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/kbhit
gmake[2]: Entering directory `/home/josh/Projects/Testing grounds/kbhit'
mkdir -p build/Debug/GNU-Linux-x86
rm -f build/Debug/GNU-Linux-x86/main.o.d
g++    -c -g -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++     -o dist/Debug/GNU-Linux-x86/kbhit build/Debug/GNU-Linux-x86/main.o  
build/Debug/GNU-Linux-x86/main.o: In function `kbhit()':

/home/josh/Projects/Testing grounds/kbhit/main.cpp:20: undefined reference to `stdscr'
/home/josh/Projects/Testing grounds/kbhit/main.cpp:20: undefined reference to `wgetch'
/home/josh/Projects/Testing grounds/kbhit/main.cpp:23: undefined reference to `ungetch'
collect2: ld returned 1 exit status
gmake[2]: *** [dist/Debug/GNU-Linux-x86/kbhit] Error 1
gmake[2]: Leaving directory `/home/josh/Projects/Testing grounds/kbhit'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/home/josh/Projects/Testing grounds/kbhit'
gmake: *** [.build-impl] Error 2 
```

所以，我不能 100% 确定代码是否应该像我期望的那样工作。我只是想编译它来测试它。根据 curses.h 文档，如果没有键排队，getch 应该返回值 ERR。我真的不知道这里还需要什么，我认为我需要做的就是包含定义所在的标题。但这似乎还不够，我一定错过了一些东西。这是我要编译的简短测试

```
#include <cstdlib>
#include <iostream>
#include <curses.h>
#include <ncurses.h>

using namespace std;

bool kbhit()
{
  int ch = getch();
  if(ch != ERR)
  {
    ungetch(ch);
    return true;
  }
  return false;

}

int main() {

  while(!kbhit())
  {
    cout << "no input";
  }
  cout << "Mummy, it's over.";
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T10:32:05.683

您没有链接到 curses 库。您需要提供`-lncurses`在您的 makefile 中链接您的可执行文件的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T18:04:34.987

例子：

```
g++ -o myprogram myprogram.cpp -lncurses 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:12:13.900

另请注意 -lx 参数（其中 x 是您的库）应始终遵循源文件和目标文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T10:32:07.007

您还需要链接到库，而不仅仅是针对标头进行编译。添加`-lncurses`到链接命令。（另见`man ncurses`。）

# javascript - 始终将时间线设置器卡片聚焦在屏幕上

> ID：10267183
> 
> 赞同：9
> 
> 时间：2012-04-22T10:29:34.887
> 
> 标签：javascript, jquery, jquery-ui

我使用来自[GitHub Repo的](https://github.com/propublica/timeline-setter)[TimelineSetter 插件](http://propublica.github.com/timeline-setter/)。

问题是当一个 TS 项目大于时间线的一半时，插件不知道将激活卡放在哪里，因此它被隐藏了，因为它超出了时间线。好消息是，当您缩放并且卡片（TS-item）的大小小于时间线大小的一半时，一切正常。

此 jsFiddle 存储库中说明了上述问题的一个示例：

[示例 1](http://jsfiddle.net/Vpz2U/4/)

![在此处输入图像描述](../Images/1c2187f24b1fb78cec466152e7fcedda.png)

我试图解决这个问题，我使卡片的大小与时间线的大小相同，当卡片移动时，我不移动卡片而是移动卡片的箭头。`Zoom`不幸的是，这引入了该功能的其他问题。

[工作演示：缩放问题](http://jsfiddle.net/Vpz2U/10/)

有人可以指出我如何解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:28:37.437

我没有看太多代码，但在我看来，问题在于卡片获得了很多“左：”css 属性。

尝试取出左边：并移动指向时间线部分的黄色箭头。

# php - PHP：通过引用传递

> ID：10267185
> 
> 赞同：2
> 
> 时间：2012-04-22T10:29:40.767
> 
> 标签：php, pass-by-reference

通过引用传递：

```
<?php
$str = "test    \n";
trim(&$str);
echo "-" . "$str" . "-";
?> 
```

输出是：

```
-test
- 
```

但是当我这样做时

```
<?php
$str = "test    \n";
$str = trim($str);
echo "-" . "$str" . "-";
?> 
```

输出是：

```
-test- 
```

为什么我不能通过引用传递这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T10:32:22.810

因为`trim()`不期望引用，因此不会修改传递给它的字符串。仅当函数需要一个引用时才传递引用才有意义 - 然后您无法选择*不*传递引用，因为函数*定义*是否包含引用参数很重要。

您正在尝试做的事情是，长期以来，PHP中[不推荐使用调用时传递引用。](http://php.net/manual/en/language.references.pass.php)除此之外，即使它没有被弃用，它也只适用于实际修改参数的函数。

> 注意：函数调用上没有参考符号 - 仅在函数定义上。仅函数定义就足以通过引用正确传递参数。`&`从 PHP 5.3.0 开始，当您使用in时，您将收到一条警告说“调用时传递引用”已被弃用`foo(&$a);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T10:34:49.127

请看参考：

[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

如果您阅读手册，您会明白这`trim()`不是字符串的引用，而是其`string`自身的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T10:37:37.643

让我们检查一下[PHP 参考](http://php.net/manual/en/language.references.pass.php)对此有何评论：

> 注意：函数调用上没有参考符号 - 仅在函数定义上。仅函数定义就足以通过引用正确传递参数。从 PHP 5.3.0 开始，您将收到一条警告说“调用时传递引用”已被弃用...

看[`trim`](http://hu2.php.net/manual/en/function.trim.php)签名：

```
string trim ( string $str [, string $charlist ] ) 
```

没有什么`$str`是通过引用传递的。所以不会。函数`trim`只会使用您的输入来生成输出，但不会修改它 - 它无论如何都不能，因为`$str`它不是通过引用传递的。

# actionscript-3 - 将高分分数保存到手机

> ID：10267186
> 
> 赞同：0
> 
> 时间：2012-04-22T10:29:41.080
> 
> 标签：actionscript-3

我在 Air for Android 中创建了一个带有高分表的游戏，但我需要将分数保存到手机上。到目前为止，我在模拟器中有工作记分牌。我的代码如下：

```
import fl.data.DataProvider;

var scoreArray: Array = new Array();
dg_score.addColumn("Name");
dg_score.addColumn("Score");
tf_name.text = "Enter name here";

function addScore(evt:MouseEvent)
{
var scoreObj:Object = new Object();
scoreObj["Name"] = tf_name.text;
scoreObj["Score"] = counter.text;
//each time object is added, it is pushed to end of array 
scoreArray.push (scoreObj);
//sorted by the score column, in descending order
scoreArray.sortOn("Score", Array.NUMERIC | Array.DESCENDING);
dg_score.dataProvider = new DataProvider(scoreArray);

} 
```

有谁知道我会怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:44:10.540

您可以使用[SharedObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#includeExamplesSummary)类将数据保存到您的手机

```
var mySharedObject:SharedObject = SharedObject.getLocal("myScoresObject");
mySharedObject.data.name = name;
mySharedObject.data.score = score;
mySharedObject.flush(); 
```

一旦完成，最初`SharedObject.getLocal("myScoresObject");`将返回保存的分数。

# iphone - MKUserTrackingBarButtonItem 按钮不会将地图移回当前用户位置，而只是显示等待标志

> ID：10267190
> 
> 赞同：1
> 
> 时间：2012-04-22T10:30:02.757
> 
> 标签：iphone, objective-c, button, tracking

我试图弄清楚为什么轨迹栏按钮不会将地图移回用户当前位置。它只是变成等待的旋转轮（下图），地图也不会移动。谢谢。

![显示等待图像的轨迹栏按钮](../Images/20e0300d2c8515687142a75613274b67.png)

下面是我的部分代码。那里的坐标是针对市中心的，但我已经将模拟器的位置设置到了另一个地方，所以如果我点击轨迹栏按钮，我希望能移到那里。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self focusMap];
    self.mapView.showsUserLocation = YES;
}    
- (void) focusMap 
{
    CLLocationCoordinate2D coord = { -33.882365, 151.211025 };
    MKCoordinateSpan span = {0.005,0.005};
    MKCoordinateRegion region = {coord, span};
    [mapView setRegion: region animated: YES];

    MKUserTrackingBarButtonItem* trackerButton = [[MKUserTrackingBarButtonItem alloc] initWithMapView: self.mapView];
    self.navigationItem.rightBarButtonItem = trackerButton;
    [trackerButton release];

    mapView.zoomEnabled = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:14:01.567

You're in the simulator right? When you are using the simulator you need to simulate the GPS from Xcode by supplying a pre-defined GPX file or make one of your own. Look for a location arrow just above the debug window. Alternatively, within the Simulator you can choose Debug -> Location. To make a custom GPX file it has the following format:

```
<?xml version="1.0"?>
<gpx version="1.1" creator="Xcode"> 

    <wpt lat="59.90855" lon="10.721554">
         <name>Oslo, Norway</name>
    </wpt>

</gpx> 
```

# java - Java-Junit/ 未实现的测试代码

> ID：10267192
> 
> 赞同：2
> 
> 时间：2012-04-22T10:30:18.960
> 
> 标签：java, junit

我开始使用 Junit，我有一个非常基本的问题。

我想检查方法`rateTrans`。我还没有实现这个，但我想在实现之前编写测试。我知道这个方法会得到哪些参数。

于是我写了下一节课：

```
import org.junit.Assert.*;
import junit.framework.*;

public class testing extends TestCase {

    public void testAdd(){
    assertTrue(rateTrans("1223",1,2,3,4,"blabla"));
    assertTrue(rateTrans("1223",1,2,3,4,"")) ;
    assertFalse(rateTrans("1223",7,2,3,4,"blabla"));
    }
} 
```

它给了我下一个问题：`The method rateTrans(String, int, int, int, int, String) is undefined for the type testing`.

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T11:21:22.303

无论是在 TDD 环境中还是在 IDE 从接口生成类时，我首选的临时实现方式是抛出异常，例如[UnsupportedOperationException](http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html)：

```
boolean rateTrans(String firstStr, int firstInt, int secondInt, int thirdInt, int fourthInt, String secondStr) {
    // TODO: implement me!
    throw new UnsupportedOperationException("Not yet implemented");
} 
```

抛出异常而不是返回潜在的有效值（例如`null`, `false`, `0`,或类似值）的原因是`""`，`Collections.empyList()`很明显实际上没有有效的实现。否则，临时解决方案很可能被遗忘，人们开始使用它，假设它已正确实施。

编辑：添加参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T10:33:22.050

只需用一个空的主体和/或`null`作为返回值来实现它（好吧，在这种情况下`false`可能是一个不错的选择）：

```
protected boolean rateTrans(String, int, int, int, int, String) {
    // TODO: implement me!
    return false;
} 
```

恭喜，你正在做 TDD！一旦你实现了所有的测试，你就可以实现方法本身。在此之前，由于布尔返回值，一些测试可能是绿色的，而其他测试可能是红色的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:23:08.637

`UnsupportedOperationException`从您尚未提供实现的方法中抛出一个。这比返回任意值要好得多。即假或真

# c++ - QSqlField name() 方法返回“”

> ID：10267193
> 
> 赞同：16
> 
> 时间：2012-04-22T10:30:29.303
> 
> 标签：c++, sql, qt

我有一个类 ( `ServicesTableModel`)，它继承自`QSqlRelationalTableModel`. 在构造函数中，我有：

```
ServicesTableModel::ServicesTableModel( QWidget* parent, QSqlDatabase db )
: QSqlRelationalTableModel( parent, db )
{ 
    setTable( "servicios" );
    select();
    ...
} 
```

现在，如果我把线

```
qDebug() << primaryKey(); 
```

我得到的点在哪里

```
QSqlRecord( 1 ) 
" 0:" QSqlField("ser_id", int, required: no, generated: yes) 
```

这很有意义，但之后

```
qDebug() << primaryKey().name(); 
```

答案是

“”

所以我无法获得主键的名称。

该表是 sqlite，定义为

```
CREATE TABLE servicios (ser_id integer primary key, ... ) 
```

这很重要，因为我试图为与表中的行密切相关的对象泛化类，并且不必向构造函数提供主键名称似乎很自然。

我肯定做错了什么，或者我不明白该`name()_`方法的`QSqlField`作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T19:23:03.367

`primaryKey.name()`返回索引的名称。

在 SQL 中，可以命名索引，这与用于键的字段的名称无关。

一个索引可以作用于多个字段。每个字段名称都可以用`key.fieldName(i)`,来检索`0<i<key.count()`

# ios - iOS上的opencv cvGrabFrame帧速率？

> ID：10267197
> 
> 赞同：1
> 
> 时间：2012-04-22T10:31:22.310
> 
> 标签：ios, opencv

我正在使用 openCV 将视频分割成帧。为此，我需要 fps 和持续时间。当通过 cvGetCaptureProperty 询问时，这两个值都返回 1。

我做了一个 hack，我使用 AVURLAsset 来获取 fps 和持续时间，但是当我将它与 openCV 结合起来时，我只能得到部分视频。它似乎缺少帧。

这是我现在的代码：

```
while (cvGrabFrame(capture)) {
    frameCounter++;

    if (frameCounter % (int)(videoFPS / MyDesiredFramesPerSecond) == 0) {
      IplImage *frame = cvCloneImage(cvRetrieveFrame(capture));
      // Do Stuff     
    }

    if (frameCounter > duration*fps)
    break; // this is here because the loop never stops on its own
} 
```

如何在 iOS 上使用 openCV 获取视频的所有帧？(opencv 2.3.2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:43:54.057

根据[文档](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=retrieve#videocapture-retrieve)，您应该检查 cvRetrieveFrame() 返回的值，如果返回空指针，您就处于视频序列的末尾。然后在发生这种情况时打破循环，而不是依赖 FPS*frame_number 的准确性。

# java - 什么是本体导出器？

> ID：10267203
> 
> 赞同：0
> 
> 时间：2012-04-22T10:32:20.813
> 
> 标签：java, ontology, owl

什么是本体导出器？我在[ResearchCyc](http://research.cyc.com/)网站上看到了这个。它提到“一个本体导出器，可以轻松地将知识库的指定部分导出到 OWL 文件”。我在哪里可以找到这个？我想下载它..如果有人知道这个请告诉我链接。

如果有人知道如何将 OpenCyc 中的某些知识部分分离为 OWL 文件？请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:39:44.697

我读了该网站说它与 Cyc 下载捆绑在一起：

> Cyc 的最新版本包括：

您是否下载了 OpenCyc 以查看它是否存在？它可能需要您申请许可证。

# jquery - 使用 CSS 和 Jquery 设计定制

> ID：10267207
> 
> 赞同：0
> 
> 时间：2012-04-22T10:33:06.833
> 
> 标签：jquery, css, ruby-on-rails-3, devise

我正在将设计与我当前的应用程序一起使用，并且我已经自定义了 css，因此闪光警报/通知出现在我用 css 创建的框中。

我想做的是可以选择通过单击右上角的 x 来关闭 div 框。我做了一些阅读，可以看到使用 Jquery 可以实现这一点，但是我的 jquery 技能目前处于新手级别。

有没有人使用设计在 Rails 应用程序中完成此操作？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:28:50.643

您可以使用 jquery 组合一个简单的“关闭”功能。

试试这个。我认为它是你所追求的。

[http://jsfiddle.net/ollie/FNXVX/1/](http://jsfiddle.net/ollie/FNXVX/1/)

# c++ - *this 调用构造函数？

> ID：10267212
> 
> 赞同：8
> 
> 时间：2012-04-22T10:34:27.163
> 
> 标签：c++

对“this”指针的操作是否调用构造函数？

我有一个定义如下的构造函数

```
 Cents(int cents)
    {
            cout<<"in cents constructor\n";
            m_cents = cents;
    }

    friend Cents operator + (const Cents &c1, const Cents &c2)
    {           
            return Cents(c1.m_cents + c2.m_cents);
    }

    Cents operator ++ (int)
    {
            cout<<"In c++ function\n";
            Cents c(m_cents);
            *this = *this + 1 ;
            return c;
    } 
```

在主要功能中，我有……

```
 Cents c;
    cout<<"Before post incrementing\n";
    c++; //This part is calling the constructor thrice 
```

现在如果我正在做一些操作，比如`*this = *this + 1`. 它调用这个构造函数两次。

这里到底发生了什么。是否`*this`创建一个临时对象并将值分配给原始对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T10:39:48.453

不，**取消引用指针不会创建任何新对象**。

然而，如果你`operator+`只为你的类的实例定义，将会有一个**从构造的新实例** `1`，因为构造函数`Cents(int cents)`没有被标记为显式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T11:17:01.430

您在这里进行了大量的建设！

```
Cents c; 
```

这一行调用`Cents::Cents()`，它是由编译器合成的，可能不会做你想做的事。

然后你打电话：

```
Cents Cents::operator++(int) 
```

它返回一个对象并显式调用`Cents::Cents(int)`.

然后你做你好奇的任务，这会第二次调用`Cents::Cents(int)`第二个参数。

当你打电话时，`Cents operator+(const Cents&, const Cents&)`你明确地构造一个新的`Cents::Cents(int)`并返回它的副本......

然后你调用了 synthesised `Cents& Cents::operator=(const Cents&)`，它可能又不能做你想做的事。

典型的后增量运算符如下所示：

```
Cents& operator++(int)
{
    Cents rv = *this;

    ++m_cents;

    return rv;
} 
```

请注意它如何通过调用复制构造函数（而不是覆盖）返回类的值，就像它在递增之前一样，以及它如何单独递增类的成员。

# android - 我可以使用 gridview 元素，如一个图像，然后是字符串，然后是复选框，以及如何使用？

> ID：10267214
> 
> 赞同：1
> 
> 时间：2012-04-22T10:34:49.973
> 
> 标签：android, image, android-layout, gridview

我正在尝试开发一个 android 应用程序，我想在其中显示产品描述，如果用户想要该产品，他点击相应的复选框。为此，我认为 gridview 对许多元素都有好处。

我正在尝试这样做；

```
Image   String1    Checkbox
        String1alt
Image2  String2    Checkbox
        String2alt 
```

. . .

我怎样才能做这样的gridview？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:38:38.910

根据我的说法，您应该使用 listview 而不是使用 gridView。

请参阅此链接。

用复选框[链接列表视图](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

[链接1](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

[链接2](http://android.vexedlogic.com/2011/04/02/android-lists-listactivity-and-listview-ii-%E2%80%93-custom-adapter-and-list-item-view/)

[链接3](http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom)

# java - 将 JBoss 配置为每个 http 会话创建一个进程？

> ID：10267219
> 
> 赞同：0
> 
> 时间：2012-04-22T10:35:24.680
> 
> 标签：java, servlets, jboss, java-native-interface

在我正在开发的 Web 应用程序中，我使用了第三方 Java 库 (JPL)，它使用 JNI 连接到外部应用程序：Prolog 引擎。

对于我的问题的性质，我需要每个 http 会话有一个 Prolog 引擎。但据我所知，我使用的库只允许我使用每个 java VM 的一个 Prolog 引擎。

为了解决这个问题，我想出了尝试配置 JBoss 以在每个 http 会话中启动一个新进程（而不仅仅是一个新线程）的想法，这有点像 CGI，通常每个 http 请求启动一个进程。

通过这种方式，某些 servlet 可以使用所需的基于 JNI 的库，而不必担心其方面的同步问题，因为正如我所期望的（希望这不会错），它们每个都有一个独立的 Prolog 引擎，具有不同的状态（例如，不同的断言 Prolog 事实）。

可以以这种方式配置 JBoss（或其他 servlet 容器）吗？任何反馈或指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:39:23.873

据我所知，这是不可能的。但是查看文档[http://www.swi-prolog.org/packages/jpl/java_api/high-level_interface.html#Multi-Threaded%20Queries](http://www.swi-prolog.org/packages/jpl/java_api/high-level_interface.html#Multi-Threaded%20Queries)唯一的问题似乎是每个虚拟机只能有一个*打开的*查询.

# jquery-ui-dialog - jqueryui对话框事件：如何仅附加一次

> ID：10267224
> 
> 赞同：0
> 
> 时间：2012-04-22T10:37:19.687
> 
> 标签：jquery-ui-dialog

JqueryUI：每次关闭框时，下面的代码都会触发警报，但是我怎样才能做到这一点，所以它只执行一次而不是每次都执行此操作。

```
$("#box").dialog({
    close: function () {
            alert(999);
    }
}); 
```

这就是我在使用 jQueryUi 之前的做法：

```
$("#box").one("click", function () {
    alert(999);
    return false
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:44:34.823

根据[docs](http://jqueryui.com/demos/dialog/#event-close)，该`.close()`方法也有一个相应的事件：`dialogclose`. 所以你应该能够做到这一点：

```
$("#box").one("dialogclose",function() {
    alert(999);
}); 
```

# javascript - 异步加载网页

> ID：10267225
> 
> 赞同：4
> 
> 时间：2012-04-22T10:37:23.790
> 
> 标签：javascript, jquery, html, asynchronous

我有一个 HTML5 的 WebApp。

这是[链接](http://teckzone.in/fbinstant/)

我想异步加载整个网页。就像访问网页时一样，我想向用户显示加载图像，并且页面在后台以异步模式完全加载。我尝试异步加载脚本，但它并没有太大影响它的行为。

有没有办法做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:19:45.080

渲染一个只有加载图像作为背景设置的空主体......在头部你有一个脚本标签，它对dom准备好进行ajax调用并加载所需的内容......

编辑：所需的内容当然应该包含所需的所有其他标记和脚本标记......然后用响应更新正文

```
document.body.innerHTML = request.responseText; 
```

编辑 2：我建议用本机 javascript 编写该头脚本，因为您只需要小于 1kb 即可对定义的 url 进行干净（甚至跨浏览器 ajax 工作）调用......在您的 ajax 响应中，您可以确定什么都不会被覆盖或加载两次（如果加载库，可能还有 ajax 功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:38:41.333

尝试使用与 Tobias Krogh 建议的方法相同的方法。

但不是通过使用普通的旧 JS 将内容放入#main

```
document.body.innerHTML = request.responseText; 
```

使用 Jquery 使用 .html() 将内容放在正文中

```
$("body").html(request.responseText); 
```

编辑：并使用 JS 加载器加载 CSS 和 JS。可能[的 Lazyload](https://github.com/rgrove/lazyload)或[YepNope](http://yepnopejs.com/)，以异步加载它们。那应该做的工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:20:25.673

您可以通过在您的 css 中设置某种带有 loader 的覆盖层来做到这一点，该覆盖层是可见的（起初），稍后在您的页面完全加载后，使用 javascripting 删除覆盖层（淡出）...

像这样[http://jsfiddle.net/6Ldyd/](http://jsfiddle.net/6Ldyd/)

当然，您应该制作某种回调函数以在页面的最后一个元素加载后删除覆盖（或在加载最后一个元素后调用它的脚本）

# mysql - MySQL：如何使用 RFC112 格式对日期进行排序？

> ID：10267226
> 
> 赞同：1
> 
> 时间：2012-04-22T10:37:32.637
> 
> 标签：mysql, sql, date, format, sql-order-by

例如，我的表中有一个名为的列`date`，`post`我想将其排序为`ascending`.

在我的专栏中，我用*RCF112*格式`date`填充它，例如： .*`Sun, 22 APR 2012 5:21:22`*

 *首先我从这个命令开始：

```
SELECT * 
FROM  post 
ORDER BY date ASC 
```

但结果似乎不正确，因为它是根据其字符串排序的，例如。`Sun, 15 APR 2012`将比旧，因为`Wed,11 APR 2012`“Sun”以字母开头的“W”开头的“S”开头，所以“Sun, 15 APR 2012”首先出现。

如何更正此命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:50:13.393

您需要将字符串解析为日期时间才能正确排序。

使用您的格式，您可以尝试以下操作：

```
STR_TO_DATE('Sun, 22 APR 2012 5:21:22', '%a, %e %b %Y %h:%i:%S') 
```

创建日期`2012-04-22 05:21:22`。

因此，您的查询应如下所示：

```
SELECT * 
FROM  post 
ORDER BY 
  STR_TO_DATE(date, '%a, %e %b %Y %h:%i:%S')
ASC 
```

正如其他人可能已经建议的那样，您可以使用`datetime`字段类型并在选择中格式化日期（`date_format` [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date -format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format) ) 以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:53:53.217

```
SELECT * 
FROM  post 
ORDER BY STR_TO_DATE(datestr, '%a, %d %b %Y %T') ASC 
```*

# jquery - 使用 JQuery 使用 Java Webservice，只知道 WSDL 位置

> ID：10267230
> 
> 赞同：0
> 
> 时间：2012-04-22T10:37:57.237
> 
> 标签：jquery, web-services, jakarta-ee, wsdl

在过去，我已经成功地使用 jQuery 使用了 .Net Webservices。但是现在我正在尝试对 Java Webservices 做同样的事情，但我不知道怎么做。

在 Eclipse 中，我创建了一个新的动态 Web 项目，其中包括以下示例类：

```
public class MessagesService {

public int checkForMessages(String email, String password){

    return 42;
} 
```

在这个类中，我使用 Eclipse 集成指南创建了一个 Web 服务。它在 WebContent/wsdl 目录下为我创建了一个 WSDL 文件。现在我可以从浏览器中轻松访问 WSDL，输入：[http://localhost:8080/MyProject/wsdl/MessagesService.wsdl](http://localhost:8080/MyProject/wsdl/MessagesService.wsdl)

现在我想调用 checkForMessages 方法，我真的不知道在 URL 字段中输入什么：

```
 function CallService() {
        $.ajax({
            type: "GET",
            url: Url, 
```

你能帮我吗？

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:19:21.480

就像是：

```
$.ajax({
        type: "POST",
        url: pageUrl + "/MessagesService ",
        data: '{}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnSuccessCall,
        error: OnErrorCall
    }); 
```

看看[这里](http://dotnetguts.blogspot.com/2012/01/jquery-ajax-examples-by-calling-aspnet.html)或[这里](https://stackoverflow.com/a/485536/664479)的 ASP 版本

# android - 为什么这个光标是空的？

> ID：10267231
> 
> 赞同：8
> 
> 时间：2012-04-22T10:38:02.467
> 
> 标签：android, download, android-cursor, download-manager

我有例如按钮，当用户单击它时，我想通过 DownloadManager 查找下载历史记录，但问题是我的光标为空，它永远不会进入条件 if(c.moveToFirst())，它总是跳过这个条件.

```
DownloadManager downloadMgr = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
                DownloadManager.Query query = new DownloadManager.Query();
                query.setFilterByStatus(DownloadManager.STATUS_FAILED|DownloadManager.STATUS_PENDING|DownloadManager.STATUS_RUNNING|DownloadManager.STATUS_SUCCESSFUL);
                Cursor c = downloadMgr.query(query);
                if(c==null) {
                    //
                }
                else {
                    if(c.moveToFirst()) {
                        int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                        int status = c.getInt(columnIndex);
                        if(status == DownloadManager.STATUS_RUNNING){
                        //do something
                        }
                    }
                } 
```

我也尝试了这段代码（由 imran khan 编写）但仍然是同样的问题：

```
DownloadManager.Query query = null;
    Cursor c = null;
    DownloadManager downloadManager = null;
    downloadManager = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
    query = new DownloadManager.Query();
    query.setFilterByStatus(DownloadManager.STATUS_FAILED|DownloadManager.STATUS_PENDING|DownloadManager.STATUS_RUNNING|DownloadManager.STATUS_SUCCESSFUL);
    c = downloadManager.query(query);
    if(c.moveToFirst()) { 
    int status = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)); 
    switch(status) { 
    case DownloadManager.STATUS_PAUSED: 
    break; 
    case DownloadManager.STATUS_PENDING: 
    break; 
    case DownloadManager.STATUS_RUNNING: 
    break; 
    case DownloadManager.STATUS_SUCCESSFUL: 
    break; 
    case DownloadManager.STATUS_FAILED: 
    break; 
    }
} 
```

# localization - 为什么 CLDR 和 Windows 有不同的货币格式？

> ID：10267234
> 
> 赞同：1
> 
> 时间：2012-04-22T10:38:36.303
> 
> 标签：localization, internationalization, locale, currency, cldr

在国际化的世界中，CLDR（通用语言环境数据存储库）似乎是最终的数据库，据我所知，许多系统都从中派生出它们的语言环境数据。

但是，我比较了 CLDR 数据和 Windows 7 中的语言环境，并且货币格式在许多情况下都不同。

例如，语言环境“英语（加拿大）”中的加元格式如下：

*   `Windows: $1,235.00, -$1,235.00`
*   `CLDR...: $1,235.00, ($1,235.00)`

或者让我们以西班牙语（哥伦比亚）和哥伦比亚比索为例：

*   `Windows: $ 1.235,00, ($ 1.235,00)`
*   `CLDR...: $1.235,00, -$1.235,00`

注意负数和间距的变化。我应该怎么想？很可能还有更多这样的差异。两种格式规则都可以吗，还是会发生本地用户认为其中一个错误的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:11:05.337

尽管它与编程无关，但我会尝试回答您的问题。
我曾经在 CLDR 的内部邮件列表中询问（不正确的）波兰日期格式，并建议对其进行更改以提供法律（波兰标准）参考。***答案是 CLDR 试图遵循国家标准，但有时使用***常用格式可能是个好主意。

你的问题有两个答案：

*   要么定义的格式比国家标准规定的格式更常用
*   或者只是定义中有错误 - 浏览[CLDR 的错误跟踪系统](http://unicode.org/cldr/trac/)，也许有（或曾经）关于它的东西

至于微软，我相信他们正在努力遵循国家法规和标准。

# jquery - 如何使用 HTML/CSS/jQuery 编写复杂分数？

> ID：10267238
> 
> 赞同：3
> 
> 时间：2012-04-22T10:38:52.433
> 
> 标签：jquery, html, css, fractions

我希望能够使用 HTML/CSS/jQuery 编写分数（而不是使用 TeX 渲染器甚至 MathML）。目前有一个很好的解决方法来编写简单的分数，如果你只有**一个**用于分子和分母的术语，那么它就可以工作，但是一旦你开始使用多个术语，它看起来就相当糟糕。例如，使用：

> `<sup><font size=-2>x<sup>2</sup> + 3x + 5</font></sup>/<sub><font size=-2>2x</font></sub>`

产生...

^(x ² + 3x + 5) / [2x]

我想要的是一条漂亮的水平线来定义分数而不是反斜杠。我试过使用这样的`div`标签`border-bottom`，但输出仍然很糟糕：

```
 <div style="float:left;">Substitute 4 for 'x' in the equation: &nbsp;</div>
  <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">x<sup>2</sup> + 3x + 5</div>
    <div style="font-size:small;text-align:center;">2x</div>
  </div> 
```

产生...

![分数的 div 标签](../Images/a8d87a1b623680720ba54bc930b4975f.png)

我正在寻找的是一个 HTML/CSS/jQuery 分数......

*   **有一条横跨最长分子或**分母宽度的易于辨别的水平线；
*   与当前文本内联显示（它可能会稍微超过文本的行高，但我不希望它从接缝处爆裂）；和
*   （不是真的必要，但上面有一个漂亮的樱桃）斜体字母（不是数字或括号）。

这可以做到吗？如何？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T10:46:48.020

试试这个： http: [//www.mathjax.org/](http://www.mathjax.org/)

它在[https://mathoverflow.net/上使用过](https://mathoverflow.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T10:47:15.157

这就是[LaTeX](http://www.latex-project.org/)的用途。这是一个 jQuery 插件，它似乎有一个很好的实现：[http ://blog.dreasgrech.com/2009/12/jslatex-jquery-plugin-to-directly-embed.html](http://blog.dreasgrech.com/2009/12/jslatex-jquery-plugin-to-directly-embed.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T14:38:46.783

好的，我找到了一个更好的方法来做你正在做的事情。没有额外的 CSS，只是一些表格魔法。

```
<table><tr><td>
<div style="float:left;">Substitute 4 for 'x' in the equation: &nbsp;</div></td>
 <td> <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">x<sup>2</sup> + 3x + 5</div>
    <div style="font-size:small;text-align:center;">2x</div>
  </div></td>
</tr>
</table> 
```

表格自动居中对齐：D

如需更多文字，请添加更多`<td>`s。将文本`<td>`和数学`<td>`分开。`<tr>`为新行添加另一个。

```
<table><tr><td>
<div style="float:left;">Substitute 4 for 'x' in the equation: &nbsp;</div></td>
 <td> <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">x<sup>2</sup> + 3x + 5</div>
    <div style="font-size:small;text-align:center;">2x</div>
  </div></td>
<td>. If you feel bored, solve this as well:</td>
<td> <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">y<sup>2</sup> + 3x+5y<sup>5</sup> + 5</div>
    <div style="font-size:small;text-align:center;">1000</div>
  </div></td>
</tr>
<tr>
<td>
<div style="float:left;">Substitute 4 for 'x' in the equation: &nbsp;</div></td>
 <td> <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">x<sup>2</sup> + 3x + 5</div>
    <div style="font-size:small;text-align:center;">2x</div>
  </div></td>
<td>. If you feel bored, solve this as well:</td>
<td> <div style="float:left">
    <div style="border-bottom:1px solid;font-size:small;text-align:center;">y<sup>2</sup> + 3x+5y<sup>5</sup> + 5</div>
    <div style="font-size:small;text-align:center;">1000</div>
  </div></td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T10:55:36.933

我个人建议[MathJax](https://physics.stackexchange.com/a/22164/7433)。（它使用 HTmL/CSS）

但是，如果您不想使用 TeX 渲染器，那么您可能需要使用 Chrome Inspector 调查 MathJax 分数背后的 CSS。

转到我的[这个答案](https://physics.stackexchange.com/a/22164/7433)，`Ctrl`- `Shift`- `I`（在 Chrome 中），在分数上使用检查器放大镜。然后查看侧窗格中的 CSS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T11:22:12.397

[我做了一个快速的jsfiddle](http://jsfiddle.net/VFyuz/)

当您说`div`s 和`border`s 让它看起来很糟糕时，我不太确定您的意思，因为我的解决方案非常相似。

它只使用`span`s 和`border`s。

它并不完美：文本没有与中心对齐，但它是 TeX 渲染器的一个不错的快速替代方案。

# magento - 如何将自定义产品属性加载到报价项目中？

> ID：10267244
> 
> 赞同：2
> 
> 时间：2012-04-22T10:39:32.793
> 
> 标签：magento

我正在为 Magento 开发一种自定义运输方式。对于这种运输方式，我需要设置一个自定义产品属性 (airfreight_allowed)。运输方法检查是否所有产品的自定义属性都设置为 true。

我已经使用安装脚本添加了产品属性：

```
$installer->addAttribute('catalog_product', 'airfreight_allowed', array(
'input'         => 'select',
'source'        => 'eav/entity_attribute_source_boolean'
...
)); 
```

在运输模块中，我访问这样的报价项目：

```
foreach ($request->getAllItems() as $item) {   /* Mage_Shipping_Model_Rate_request */
    if($item->getAirfreightAllowed() != 1)
        return false; /* Airfreight not allowed */
} 
```

但报价项目不包含 airfreight_allowed 属性。如何将 airfreight_allowed 属性添加到报价项目？以及如何确保此属性包含相应产品属性的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T11:38:59.817

将此添加到模块的 config.xml 中：

```
<global>
  <sales>
     <quote>
        <item>
            <product_attributes>
                <airfreight_allowed />
            </product_attributes>
        </item>
    </quote>
  </sales>
</global> 
```

将属性的“用于产品列表”的属性设置为 true。

然后你可以像这样访问属性：

```
foreach ($request->getAllItems() as $item) {   
    if($item->getProduct()->getAirfreightAllowed() != 1)
        return false;
} 
```

# android - 在 Android 上，Wi-Fi 和 3G 互联网流量如何保存到内存中，以及何时被系统刷新或清除？

> ID：10267246
> 
> 赞同：3
> 
> 时间：2012-04-22T10:39:44.620
> 
> 标签：android, wifi, traffic

我需要了解 Wi-Fi 和 3G 互联网流量。我发现此交通数据保存到`/statistics/rx_bytes`, `/statistics/tx_bytes`,`/sys/class/net/`路径。
问题：如果我从这些路径中获取数据，这些数据是什么意思？这些数据是什么时候开始收集的：从 Wi-Fi 激活还是从手机开机？
系统何时清除或刷新这些 Wi-Fi 流量数据？（我的应用需要节省每日流量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:42:19.130

> 我发现这些流量数据保存在“/statistics/rx_bytes”、“/statistics/tx_bytes”、“/sys/class/net/”路径上。

不要使用这些，因为它们可能不存在于所有设备上。请使用[`TrafficStats`](http://developer.android.com/reference/android/net/TrafficStats.html)。

> 如果我从这些路径获取数据，这些数据是什么意思。

请阅读. [_](http://developer.android.com/reference/android/net/TrafficStats.html)[`TrafficStats`](http://developer.android.com/reference/android/net/TrafficStats.html)

> 当这些数据开始收集时：从激活的 WiFi 还是从打开的手机？

这是无证的，因此可能会有所不同。

> 系统何时清除或刷新此 wifi 流量数据？

这也是无证的，因此可能会有所不同。

# jndi - Apache Mahout 与 JNDI 连接到 MySQLJDBCDataModel

> ID：10267251
> 
> 赞同：0
> 
> 时间：2012-04-22T10:40:55.380
> 
> 标签：jndi, mahout

我正在尝试将 MySQL 数据库与 Apache Mahout 一起使用来获取基于数据库的数据。从我目前阅读的内容来看，似乎我必须使用像**tomcat**这样的网络服务器才能使用 JNDI 进行数据库连接。我想知道是否可以在网络服务器之外使用 JDNI。

简而言之，我可以在 Mahout 中使用 JNDI 而不使用网络服务器吗？

我知道创建基于桌面的推荐系统不值得。但就目前而言，我不想在网络服务器中运行我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:10:28.563

JNDI 是一种并非特定于 Tomcat 的技术，不是。它是一个目录服务，是 J2EE 的一部分，并且被大多数 J2EE 容器支持——比如 Tomcat，还有 JBoss 等。

我不太明白这个问题，因为您只会在应用程序或 Web 服务器（如 Tomcat）的上下文中使用 JNDI。但是您不想使用 Tomcat。那么为什么要使用JNDI呢？

当然，您不需要 JNDI 来使用 Mahout。只需将它传递给`DataSource`您配置的，而不是查找。

# ruby - 为什么我不能从模块中混合分配方法

> ID：10267252
> 
> 赞同：1
> 
> 时间：2012-04-22T10:41:19.250
> 
> 标签：ruby, class, module, mixins, assignment-operator

假设我有一个这样的模块：

```
module MyAssigments
  def dummy_assignment=(value)
    puts "it's not assigned #{value}"
  end
end 
```

和一个包含它的类，如下所示：

```
class MyClass
  include MyAssigments
  def x=(value)
     dummy_assignment=(value)
  end
end 
```

然后

```
o = MyClass.new
o.x="anything" 
```

屏幕上不打印任何东西，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:53:59.037

Ruby 在这里有一个语法/解析怪癖：使用 assginemnt 方法`self`必须明确限定，因此：

```
 def x=(value)
     self.dummy_assignment=value
  end 
```

如果没有该`self.`部分，ruby 假定它是对局部变量的赋值。

# python - 获取 ConfigObj 以引用字符串

> ID：10267253
> 
> 赞同：2
> 
> 时间：2012-04-22T10:41:27.720
> 
> 标签：python, configobj

如果我运行以下脚本：

```
from configobj import ConfigObj
config = ConfigObj()
config.filename = 'test.cfg'
config['keyword1'] = "the value"
config['keyword2'] = "'{0:s}'".format("the value")
config['keyword3'] = '"{0:s}"'.format("the value")
config.write() 
```

输出是：

```
keyword1 = the value
keyword2 = "'the value'"
keyword3 = '"the value"' 
```

有没有办法产生以下输出？

```
keyword1 = 'the value' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:17:33.173

你追求的是`unrepr=True`

```
config = ConfigObj(unrepr=True) 
```

然后，当您写回文件时，引号将被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:14:22.820

我从未使用过 ConfigObj 模块，但是从[文档](http://www.voidspace.org.uk/python/configobj.html#string-interpolation)看来，您可以通过在实例化 ConfigObj 时传递插值参数来实现这一点。

尝试：

`config = ConfigObj(interpolation = 'Template')`

或者

```
config = ConfigObj(interpolation = False) 
```

# css - 在 CSS 中取消样式锚标记

> ID：10267259
> 
> 赞同：5
> 
> 时间：2012-04-22T10:42:40.093
> 
> 标签：css

我希望从锚标签中删除所有标准样式的下划线、粗体和颜色，以便锚标签所做的只是链接而不是扰乱显示。

我尝试了以下方法，但我仍然将所有内容都以蓝色和粗体显示，这很痛苦。

```
a,
a:link,
a:visited,
a:hover,
a:active {
    color: inherit;
    text-decoration: inherit;
    font-weight: inherit;
} 
```

任何人都知道如何不仅通过替换替换来删除样式，而且实际上根本不让它为链接设置样式，这样样式就不会在锚中被打乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T10:59:40.513

该CSS应该可以工作。也许您的样式表没有被加载？例如，尝试使链接的字体大小明显变大`font-size:50px;`。

如果链接变大但颜色/文本装饰/字体重量仍然没有继承那么我不知道问题是什么但是如果链接保持相同大小那么你的问题在于将你的 css 链接到你的 html文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-09T20:22:20.437

@Drejon 的答案几乎是我想要的，但是明确设置颜色、文本装饰和字体粗细会导致`a`标签不从其父级获取这些值，这正是我想要的。这是我最终使用的：

```
a, a:link, a:visited, a:hover, a:active {
  color: inherit;
  text-decoration: inherit;
  font-weight: inherit;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T10:49:47.163

我不确定我是否理解。试试这是否有帮助：

```
a,
a:link,
a:visited,
a:hover,
a:active {
    color: #000000; /*color of your choosing*/
    text-decoration: none;
    font-weight: normal;
} 
```

# javascript - 使用 Babel CLI 提取器提取 Javascript gettext 消息

> ID：10267260
> 
> 赞同：7
> 
> 时间：2012-04-22T10:42:45.020
> 
> 标签：javascript, python, localization, gettext, python-babel

[这里](http://babel.edgewall.org/wiki/Documentation/messages.html)说明Babel 可以为 Python 和 Javascript 文件提取 gettext 消息。

> Babel 带有一些内置的提取器：python（从 Python 源文件中提取消息）、javascript 和 ignore（不提取任何内容）。

[此处](http://babel.edgewall.org/wiki/Documentation/cmdline.html)记录了命令行提取器- 但没有使用示例。

同样在上面的[同一个指针](http://babel.edgewall.org/wiki/Documentation/messages.html)中，提到了一个用于提取的配置文件，但没有太多扩展。

当我在带有 js 文件的目录上运行提取器的基本命令时，我只生成了 .PO 标头，但没有消息。

```
$ pybabel extract   /path/to/js-dir

# Translations template for PROJECT.
# Copyright (C) 2012 ORGANIZATION
# This file is distributed under the same license as the PROJECT project.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2012.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PROJECT VERSION\n"
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
"POT-Creation-Date: 2012-04-22 19:39+1000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 0.9.6\n"

$ 
```

这是我试图提取消息的 js 文件中的示例片段：

```
else if(data.status == "1"){
    var follow_html = gettext('Follow');
    object.attr("class", 'button follow');
    object.html(follow_html);
    var fav = getFavoriteNumber();
    fav.removeClass("my-favorite-number");
    if(data.count === 0){
        data.count = '';
        fav.text('');
    }else{
        var fmts = ngettext('%s follower', '%s followers', data.count);
        fav.text(interpolate(fmts, [data.count]));
    }
} 
```

I would appreciate it if someone can provide exact CLI options and config settings to make the extraction work, or a pointer to such.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:37:02.080

Create a file (`babel.cfg`) with the following content:

```
[javascript:*.js]
encoding = utf-8 
```

Then, do:

```
pybabel extract -F babel.cfg /path/to/js-dir 
```

That should be enough for you to have some message strings.

BTW, you can consult the help for the `extract` command by doing:

```
pybabel extract --help 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:28:08.160

I had a similar issue and was able to get around it by disabling default keywords with babel.

```
pybabel extract -k __ -F babel.cfg --no-default-keywords /path/to/js-dir 
```

You must specify at least one keyword in the command when you disable the defaults (-k [keyword]). I chose `-k __` because "__" was a pattern I was looking for.

Just use this command and replace the "__" after -k with one from your babel.cfg file.

Edit: this allows you to use your own keywords rather than gettext()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T09:36:00.190

You can create an object in as flask global and translate it with gettext

```
g.i18n = {
    'Casa' : lazy_gettext('Home'),
    'Auto' : lazy_gettext('Car'),
    'Persona' : lazy_gettext('Person')
} 
```

Then add it as a variable

```
<script>
    var i18n = {{ g.i18n | tojson }}
</script> 
```

and use it in JS:

```
var labelTranslate = {
                    Casa: i18n.Casa,
                    Persona: i18n.Persona,
                    Auto: i18n.Auto
                }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T13:19:28.203

You can actually use `gettext` directly in Javascript.

See: [jsgettext](http://jsgettext.sourceforge.net). It allows you to use the standard *gettext functions, including the one using contexts and/or plural forms.

It can read PO/MO files or you can import custom made JSON files instead.

See [this file](https://github.com/ZeWaren/flask-i18n-example/blob/master/static/js/scripts.js) of [this project](https://github.com/ZeWaren/flask-i18n-example) for a complete example.

# jquery - 使用 jQuery .slideToggle 时背景颜色的闪烁

> ID：10267265
> 
> 赞同：0
> 
> 时间：2012-04-22T10:43:04.930
> 
> 标签：jquery, slidetoggle

当我使用 jQuery 的 .slideToggle 时，我在 .primary-navigation 看到首选背景颜色的闪烁，但它不是持久的。它在动画期间显示首选背景颜色，但在动画完成时不会保持这种状态。我一直在挠头，但我无法弄清楚。有谁知道为什么会发生这种情况以及如何解决？这个问题出现在最新的 Chrome、FF 和 iOS Safari 中。

**编辑：这是一个解决问题的 jsFiddle：[jsFiddle](http://jsfiddle.net/jeredboxman/T67hH/)。感谢[scessor](https://stackoverflow.com/users/843985/scessor)的快速回复！**

**HTML：**

```
<header class="banner clearfix">
 <h1 class="alpha">Site Title</h1>
 <nav class="primary-navigation-wrapper">
   <ul class="primary-navigation">
     <li><a href="#" id="current-page">Blog</a></li>
     <li><a href="#">Archives</a></li>
     <li><a href="#">About</a></li>
     <li><a href="#">Contact</a></li>
   </ul>
 </nav>
</header> 
```

**CSS：**

```
.banner {
  background-color: blue;
}

.banner h1 {
  padding: 6px;
  float: left;
}

h1.js-toggle-navigation {
  float: right;
  padding: 6px;
  cursor: pointer;
}

.primary-navigation {
  clear: both;
  display: none;
  background-color: red;
}

.primary-navigation li {
  float: left;
  display: block;
}

.primary-navigation a {
  padding: 6px 0 6px 6px;
  display: block;
} 
```

**jQuery（1.7.2.）：**

```
<script type="text/javascript">
  jQuery(document).ready(function($){
    /* prepend menu icon */
    $('.primary-navigation-wrapper').prepend('<h1 class="js-toggle-navigation">Menu</h1>');

    /* toggle nav */
    $(".js-toggle-navigation").on("click", function(){
      $(".primary-navigation").slideToggle();
      $(this).toggleClass("active");
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:51:10.497

你必须结束`li`s 的浮动。`overflow: hidden;`例如，`ul`使用类*primary-navigation*添加一个 css ：

```
.primary-navigation {
  overflow: hidden;
  ...
} 
```

另请参阅[我的示例](http://jsfiddle.net/jRRm6/1/)。（仅对于示例我还添加了上边距，没有*菜单*按钮无法在结果标签导致的jsfiddle中单击。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:00:06.093

您`ul`只包含浮动元素，因此它的默认高度为 0。在正常（非动画）状态下，由于高度为零，背景不可见。在动画状态下，jQuery 为元素设置了显式高度，因此背景会显示出来。您应该在 CSS 中添加类`overflow: hidden`以`.primary-navigation`获得可见的背景。

# javascript - 是否可以根据坐标检查城市

> ID：10267266
> 
> 赞同：0
> 
> 时间：2012-04-22T10:43:12.273
> 
> 标签：javascript, google-maps, google-maps-api-3, gps

我不知道这是否我想要的实际上是可能的，但如果是的话我会很高兴:)
我有一个允许用户签入的移动应用程序。
当他这样做时，我需要将其坐标保存在数据库中。
但用户还必须选择他登记入住的城市。我需要这个，因为我必须按城市列出位置。
这里的问题是我不希望该用户在**London**登记并选择 city **Moscow**。这里的城市非常重要，因为我必须确定那个位置就在那个城市。
谷歌 api 中是否有能够检测当前用户所在城市的
东西或任何可以阻止用户犯这种愚蠢行为的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:55:53.207

是的，在谷歌地图 api 中你有反向地理编码[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# node.js - 使用 express.js 在 iframe 中发布请求

> ID：10267267
> 
> 赞同：0
> 
> 时间：2012-04-22T10:43:28.813
> 
> 标签：node.js, iframe, express

我正在使用 nodejs 和框架 express.js 来实现我的网站。

我在 url (/report/reportname) 上提交 POST 请求，reportname 是一个变量。

所以我这样做：

```
app.post('/report/:id', function(req, res){ 
res.send("test");
} 
```

在我的 index.html 中我这样做：（ ID= 一个变量）

```
<form action='/report/ID' method='POST' target='FOO'></form>

<iframe name='FOO'></iframe> 
```

当我点击提交时，它会在页面上重定向我`/report/ID`，我看到这个词：`test` 并且 iframe 没有刷新。

我能怎么做 ？（我必须使用`res.send(something);`）

谢谢 ！

# c - 如何判断可选参数是否已传递给函数 C

> ID：10267269
> 
> 赞同：3
> 
> 时间：2012-04-22T10:43:58.720
> 
> 标签：c, substring, variadic-functions, p99

编辑 3：对于代码本身，请一起检查第一个答案或这篇文章的结尾。

如标题中所述，我试图找到一种方法来判断可选参数是否已传递给函数。我想做的是几乎所有动态语言如何处理它们的子字符串函数。下面是我目前的，但它不起作用，因为我不知道如何判断是否/何时使用该东西。

```
char *substring(char *string,unsigned int start, ...){
    va_list args;
    int unsigned i=0;
    long end=-1;
    long long length=strlen(string);
    va_start(args,start);
    end=va_arg(args,int);
    va_end(args);
    if(end==-1){
        end=length;
    }
    char *to_string=malloc(end);
    strncpy(to_string,string+start,end);
    return to_string;
} 
```

基本上我希望仍然能够不包含我想要返回的字符串的长度，而只是让它走到字符串的末尾。但我似乎找不到办法做到这一点。由于也无法知道 C 中传递的参数数量，这让我失去了第一个想法。

编辑：这是当前代码的新方法。

```
#define substring(...) P99_CALL_DEFARG(substring, 3, __VA_ARGS__)
#define substring_defarg_2 (0)
char *substring(char *string,unsigned int start, int end){
    int unsigned i=0;
    int num=0;
    long long length=strlen(string);
    if(end==0){
        end=length;
    }
    char *to_string=malloc(length);
    strncpy(to_string,string+start,end);
    return to_string;
} 
```

然后在一个文件中我调用 test.c 看看它是否有效。

```
#include "functions.c"
int main(void){
    printf("str:%s",substring("hello world",3,2));
    printf("\nstr2:%s\n",substring("hello world",3));
return 0;
} 
```

functions.c 有一个包含 functions.h 的内容，其中包括所有需要的内容。这是 clang 输出（因为 clang 似乎通常会提供更多细节。

```
In file included from ./p99/p99.h:1307:
./p99/p99_generic.h:68:16: warning: '__error__' attribute ignored
__attribute__((__error__("Invalid choice in type generic expression")))
               ^
test.c:4:26: error: called object type 'int' is not a function or function
      pointer
    printf("\nstr2:%s\n",substring("hello world",3));
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from test.c:1:
In file included from ./functions.c:34:
In file included from ./functions.h:50:
./string.c:77:24: note: instantiated from:
#define substring(...) P99_CALL_DEFARG(substring, 3, __VA_ARGS__) 
```

GCC 只是说对象不是函数

编辑 2：请注意，将其设置为 -1 也不会改变它，它仍然会引发同样的事情。我使用的编译选项如下。

gcc -std=c99 -c test.c -o test -lm -Wall

Clang 是一回事（它是否适用是另一个问题。

**在这里回答**

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include "p99/p99.h"
#define substring(...) P99_CALL_DEFARG(substring, 3, __VA_ARGS__)
#define substring_defarg_2() (-1)
char *substring(char *string, size_t start, size_t len) {
  size_t length = strlen(string);
  if(len == SIZE_MAX){
    len = length - start;
  }
  char *to_string = malloc(len + 1);
  memcpy(to_string, string+start, len);
  to_string[len] = '\0';
  return to_string;
} 
```

您将需要从那里[获得 p99](http://p99.gforge.inria.fr/)。它是由选定的答案。只需放入您的源目录，您应该就可以了。还要总结他对许可证的回答。你可以随心所欲地使用它，但你基本上不能分叉它。因此，出于此目的，您可以在任何项目中自由使用它和字符串函数，无论是专有的还是开源的。

我唯一要问的是，你至少给这个线程一个链接，以便发生在它上面的其他人可以了解堆栈溢出，因为这就是我对在这里得到帮助的事情发表评论的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T10:51:54.077

在 C 中，没有可选参数这样的东西。此类情况的常见习语是要么具有两个功能；要么具有两个功能。`substr(char *, size_t start, size_t end)`and `substr_f(char *, size_t start)`or 有一个函数 where `end`，如果给定一个特殊的值，将具有特殊的含义（例如在这种情况下，可能是任何小于 start 的数字，或者只是 0）。

使用可变参数时，您需要在参数列表的末尾使用标记值（例如 NULL），或者将 argc（参数计数）作为较早的参数传入。

C 的运行时自省量非常低，这是一个特性，而不是一个错误。

**编辑：**在相关说明中，用于 C 中字符串长度和偏移量的正确类型是`size_t`. 它是唯一一种既保证足够大以处理任何字符串中的任何字符，又保证足够小不会在存储时浪费空间的整数类型。

还要注意它是未签名的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T12:16:00.493

除了具有可选参数的常见信念函数之外，可以在 C 中实现，但 va_arg 函数不是处理此类事情的正确工具。它可以通过 va_arg 宏实现，因为有一些方法可以捕获函数接收的参数数量。整个事情解释和实现起来有点乏味，但您可以使用[P99](http://p99.gforge.inria.fr)立即使用。

您必须将函数签名更改为类似

```
char *substring(char *string, unsigned int start, int end); 
```

并发明一个特殊代码，`end`如果它在调用端被省略，比如说`-1`. 然后用 P99 你可以做

```
#include "p99.h"

#define substring(...) P99_CALL_DEFARG(substring, 3, __VA_ARGS__)
#define substring_defarg_2() (-1) 
```

您看到您声明了一个“重载”您的函数的宏（是的，这是可能的，常见的 C 库实现一直使用它）并提供有关您的函数接收的参数数量的知识的替换（在这种情况下为 3 ）。对于您希望为其具有默认值的每个参数，您将声明第二种类型的宏，`_defarg_N`后缀`N`从`0`.

此类宏的声明不是很漂亮，但至少与 va_arg 函数的接口一样多地说明了正在发生的事情。收益在调用者（“用户”）方面。在那里你现在可以做类似的事情

```
substring("Hello", 2); 
substring("Holla", 2, 2); 
```

随心所欲。

（您需要一个为所有这些实现 C99 的编译器。）

* * *

**编辑：**如果您不想实现该约定`end`但想要拥有两个不同的功能，您甚至可以走得更远。您将实现这两​​个功能：

```
char *substring2(char *string, unsigned int start);
char *substring3(char *string, unsigned int start, unsigned int end); 
```

然后将宏定义为

```
#define substring(...)                \
 P99_IF_LT(P99_NARG(__VA_ARGS__, 3))  \
 (substring2(__VA_ARGS__))            \
 (substring3(__VA_ARGS__)) 
```

然后，这将确保预处理器通过查看它接收的参数数量来选择适当的函数调用。

* * *

**Edit2：**这里是一个更适合的`substring`函数版本：

*   使用对长度和类似内容在语义上正确的类型
*   第三个参数似乎是你的长度而不是字符串的结尾，相应地命名它
*   `strncpy`几乎从来都不是选择正确的函数，在某些情况下它不写终止`'\0'`字符。当您知道字符串的大小时，请使用`memcpy`.

* * *

```
char *substring(char *string, size_t start, size_t len) {
  size_t length = strlen(string);
  if(len == SIZE_MAX){
    len = length - start;
  }
  char *to_string = malloc(len + 1);
  memcpy(to_string, string+start, len);
  to_string[len] = '\0';
  return to_string;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T10:51:53.980

不幸的是，[你不能这样使用 va_arg](http://www.cplusplus.com/reference/clibrary/cstdarg/va_arg/)：

> 另请注意， va_arg 无法确定检索到的参数是否是传递给函数的最后一个参数（或者即使它是超出该列表末尾的元素）。该函数的设计方式应使参数的数量可以通过命名参数或已读取的附加参数的值以某种方式推断出来。

一个常见的“解决方法”是给另一个“重载”一个好记的名字，例如`right_substr`. 它看起来不会那么花哨，但它肯定会运行得更快。

如果您担心重复实现，您可以实现`left_substr`、`substring`和`right_substr`作为隐藏函数的包装器，该函数将`start`和`length`作为有符号整数，并将负数解释为缺失参数。在你的公共接口中使用这个“约定”可能不是一个好主意，但它可能在私有实现中工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T10:51:46.057

在标准 C 中，当使用可变参数原型 ( `...`) 时，无法*直接*判断传递了多少参数。

在幕后，诸如`printf()`etc 之类的函数假定基于格式字符串的参数数量。

其他采用可变数量指针的函数期望列表以 NULL 终止。

考虑使用其中一种技术。

# jquery - 带有时区支持的日历的 Jquery 插件

> ID：10267272
> 
> 赞同：0
> 
> 时间：2012-04-22T10:44:45.710
> 
> 标签：jquery, plugins, calendar

我需要显示日历以在日视图、周视图和月视图中创建时间表

我试图实现[jquery fullCalendar](http://arshaw.com/fullcalendar/)，一切都很好，但我无法为其设置默认日期参考。[jquery fullCalendar](http://arshaw.com/fullcalendar/)插件占用浏览器或用户系统时间。

是否有任何其他支持不同时区的 jquery 日历插件。应该有一个选项来设置默认日期时间。日历应以给定日期作为参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:11:02.863

Javascript是客户端语言。所以众所周知，总是在本地时区或用户的时区花时间。

虽然通过 hack，我们可以让 jquery fullCalendar 在不同的时区工作，但要跟踪时区将非常困难。这将不值得努力。始终在用户的时区显示 UI 是 Web 开发人员的标准做法。

# grails - 使用spring security core在引导程序中自动登录grails

> ID：10267275
> 
> 赞同：2
> 
> 时间：2012-04-22T10:45:49.307
> 
> 标签：grails, spring-security

在开发过程中，我发现自己经常不得不重新启动我的应用程序，这反过来又导致手动登录的额外步骤。

我以为我可以在引导程序中添加方法调用 springSercurityService.reauthenticate('myuser') 但是我没有成功

在应用程序启动后在控制器中做同样的事情工作正常，所以它只是在引导程序中它不起作用。我调试了代码，没有看到任何明显的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:11:06.437

我遇到了同样的问题，我解决它的方法是使用书签（或自定义浏览器“搜索引擎”），这使得重新登录变得非常容易。启用深度链接后，继续工作变得非常容易同一页。重新启动服务器后，只需刷新页面，它就会将您重定向到登录页面。只需激活小书签（或“搜索引擎”），它就会让您登录并将您重定向回您正在处理的页面。

我有一篇详细的[博客文章](http://naleid.com/blog/2011/11/29/speed-up-your-grails-spring-security-development-with-autologin-bookmarklet/)，展示了如何进行此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:27:16.893

如果只是为了避免在开发模式下登录，您可以设置interceptUrlMap 属性。该属性将允许您以不要求您登录的方式设置开发模式。

```
import grails.plugins.springsecurity.SecurityConfigType

grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap

environments {
    development {
        grails.plugins.springsecurity.interceptUrlMap = [
            '/**':              ['IS_AUTHENTICATED_ANONYMOUSLY']
        ]
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:12:17.963

另一种选择是添加一个 servlet 过滤器，如果环境是开发环境，它将以默认用户登录。

# android - 安卓列表项

> ID：10267278
> 
> 赞同：0
> 
> 时间：2012-04-22T10:46:01.117
> 
> 标签：android, android-layout, android-intent

我有一个带有图像和文本作为其项目的列表。我已经为 onlistitemclick 方法编写了代码，但是当我单击列表项时没有任何反应............在这个文件中，我在 drawable 中有图像资源- hdpi 文件夹和 xml 文件中的项目文本继承了代码：

```
//main.java
package abhi.tv;<br/>
import android.app.ListActivity;<br/>
import android.content.Context;<br/>
import android.os.Bundle;<br/>
import android.view.LayoutInflater;<br/>
import android.view.View;<br/>
import android.view.View.OnClickListener;<br/>
import android.view.ViewGroup;<br/>
import android.widget.AdapterView;<br/>
import android.widget.AdapterView.OnItemClickListener;<br/>
import android.widget.ArrayAdapter;<br/>
import android.widget.ImageView;<br/>
import android.widget.ListView;<br/>
import android.widget.TextView;<br/>
import android.widget.Toast;<br/>
public class IndiatvActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       MyAdapter ad=new MyAdapter(this,android.R.layout.simple_list_item_1,R.id.channel_name,getResources().getStringArray(R.array.channels));

       setListAdapter(ad);

    }

        private class MyAdapter extends ArrayAdapter<String> implements OnItemClickListener{

        public MyAdapter(Context context, int resource, int textViewResourceId,
                String[] strings) {
            super(context, resource, textViewResourceId, strings);
            // TODO Auto-generated constructor stub
        }

        public View getView(int position,View convertView,ViewGroup parent){
            LayoutInflater inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row=inflater.inflate(R.layout.list_item,parent,false);
            String chann[]=getResources().getStringArray(R.array.channels);
            ImageView iv=(ImageView) row.findViewById(R.id.logo);
            TextView tv=(TextView) row.findViewById(R.id.channel_name);
            tv.setText(chann[position]);
            if(chann[position].equalsIgnoreCase("star plus"))
                iv.setImageResource(R.drawable.star_plus);
            else if(chann[position].equalsIgnoreCase("sony tv"))
                iv.setImageResource(R.drawable.sony_tv);
            else if(chann[position].equalsIgnoreCase("sahara one"))
                iv.setImageResource(R.drawable.sahara_one);
            else if(chann[position].equalsIgnoreCase("zee tv"))
                iv.setImageResource(R.drawable.zee_tv);
            else if(chann[position].equalsIgnoreCase("colors"))
                iv.setImageResource(R.drawable.colors_tv);
            else if(chann[position].equalsIgnoreCase("mtv"))
                iv.setImageResource(R.drawable.mtv);
            else if(chann[position].equalsIgnoreCase("9x india"))
                iv.setImageResource(R.drawable.ninex);
            else if(chann[position].equalsIgnoreCase("star one"))
                iv.setImageResource(R.drawable.star_one);
            else if(chann[position].equalsIgnoreCase("sab tv"))
                iv.setImageResource(R.drawable.sab_tv);
            else if(chann[position].equalsIgnoreCase("ndtv imagine"))
                iv.setImageResource(R.drawable.ndtv_imagine);
            return row;
        }
        @Override
        public void onItemClick(AdapterView<?> l, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            //super.onItemClick(l, v, position, id);
            String chann[]=getResources().getStringArray(R.array.channels);
            Toast.makeText(IndiatvActivity.this,"hiiii xt", Toast.LENGTH_LONG);
            Toast.makeText(IndiatvActivity.this,"this message is of"+chann[position],Toast.LENGTH_SHORT).show();
            android.util.Log.d("abhi"," msg:item was clicked");

        }

        }

    }**

<br/>heres the xml code:<br/>
//list_item.xml<br/>
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusableInTouchMode="true"
    android:orientation="horizontal" android1:addStatesFromChildren="false">

    <ImageView
        android1:id="@+id/logo"
        android1:layout_width="100dp"
        android1:layout_height="100dp"
        android1:layout_alignParentLeft="true"
        android1:layout_alignParentTop="true"
        android1:adjustViewBounds="true"
        android1:clickable="true"
        android1:maxHeight="500dp"
        android1:maxWidth="500dp"
        android1:minHeight="500dp"
        android1:minWidth="500dp"
        android1:src="@drawable/colors_tv" />

    <TextView
        android1:id="@+id/channel_name"
        android1:layout_width="wrap_content"
        android1:layout_height="wrap_content"
        android1:layout_alignBottom="@+id/logo"
        android1:layout_marginLeft="15dp"
        android1:layout_toRightOf="@+id/logo"
        android1:text="Large Text"
        android1:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout>

<br/>
<br/>
<br/>
//main.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:54:59.613

这不会起作用，因为您使用了一个简单的列表适配器，要在列表视图中一起添加图像和文本，您必须定义自己的自定义适配器并使用它。

检查此[链接](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)以编写您自己的自定义适配器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:49:07.310

```
setOnItemClickListener() 
```

在不在适配器中的主要活动中，它将返回您特定的行

然后在您点击项目后......

# visual-studio - 如何断开由 T4 模板生成的代码与该模板的连接？

> ID：10267283
> 
> 赞同：3
> 
> 时间：2012-04-22T10:46:28.700
> 
> 标签：visual-studio, t4, visual-studio-2012

当我“运行”一个 T4 模板时，它为我生成的类文件都出现在模板下。如果文件不消失，我无法从项目中删除模板。我也无法将文件从模板“下”复制到项目根目录中，因为它们已经在项目根目录中。如何从创建它们的模板中解放这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:54:35.857

发挥创意：

1.  右键单击并打开包含文件夹。
2.  将生成的文件拖放到解决方案中的另一个位置。
3.  从 Visual Studio 中删除原始模板和文件。
4.  快速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:38:19.230

如果您想使用 T4 进行一次性代码生成，那么我建议使用[T4 脚手架](http://nuget.org/packages/T4Scaffolding)。这个工具最初是为了支持在[MVC3](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)中生成视图、控制器等，但你几乎可以在[任何东西](http://geekswithblogs.net/michelotti/archive/2011/07/14/leverage-t4scaffolding-for-wcf-web-api.aspx)上使用它。

# java - 大文件时的 Xpath 方法

> ID：10267284
> 
> 赞同：1
> 
> 时间：2012-04-22T10:46:29.813
> 
> 标签：java, xml, xpath

您现在将看到的类是在 Java 中通过 XPath 解析 XML 文档的经典方法：

```
public class Main {

    private Document createXMLDocument(String fileName) throws Exception {
        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        domFactory.setNamespaceAware(true);
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse(fileName);

        return doc;
    }

    private NodeList readXMLNodes(Document doc, String xpathExpression) throws Exception {
        XPath xpath = XPathFactory.newInstance().newXPath();
        XPathExpression expr = xpath.compile(xpathExpression);

        Object result = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) result;

        return nodes;
    }

    public static void main(String[] args) throws Exception {
        Main m = new Main();
        Document doc = m.createXMLDocument("tv.xml");
        NodeList nodes = m.readXMLNodes(doc, "//serie/eason/@id");
        int n = nodes.getLength();

        Map<Integer, List<String>> series = new HashMap<Integer, List<String>>();

        for (int i = 1; i <= n; i++) {
            nodes = m.readXMLNodes(doc, "//serie/eason[@id='" + i + "']/episode/text()");
            List<String> episodes = new ArrayList<String>();
            for (int j = 0; j < nodes.getLength(); j++) {
                episodes.add(nodes.item(j).getNodeValue());
            }
            series.put(i, episodes);
        }

        for (Map.Entry<Integer, List<String>> entry : series.entrySet()) {
            System.out.println("Season: " + entry.getKey());
            for (String ep : entry.getValue()) {
                System.out.println("Episodio: " + ep);
            }
            System.out.println("+------------------------------------+");
        }
    }
} 
```

在那里，我发现一些方法令人担心，以防 xml 文件很大。喜欢使用

```
Document doc = builder.parse(fileName);

return doc; 
```

或者

```
 Object result = expr.evaluate(doc, XPathConstants.NODESET);
  NodeList nodes = (NodeList) result;

  return nodes; 
```

我很担心，因为我需要处理的 xml 文档是由客户创建的，并且在里面你基本上可以有无限数量的描述电子邮件及其内容的记录（每个用户都有自己的个人电子邮件，所以里面有很多 html）。我知道这不是最聪明的方法，但它是一种可能性，并且在我到达这里之前它已经启动并运行。

我的问题是：如何使用 xpath`parse`和`evaluate`巨大的 xml 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:07:16.870

您可以使用 StAX 解析器。它将比 DOM 选项占用更少的内存。在[http://tutorials.jenkov.com/java-xml/stax.html上对 StAX 进行了很好的介绍](http://tutorials.jenkov.com/java-xml/stax.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:10:10.777

首先，XPath 不解析 XML。您的 createXMLDocument() 方法会执行此操作，生成已解析 XML 的树表示形式作为输出。然后使用 XPath 搜索树表示。

您真正需要的是在解析 XML 时动态搜索 XML 的内容。

一种方法是使用实​​现“文档投影”的 XQuery 系统（例如，Saxon-EE）。这将分析您的查询以查看需要文档的哪些部分，并且当您解析文档时，它将构建一个仅包含文档中实际需要的部分的树。

但是，如果查询与示例中的查询一样简单，那么将其编码为 SAX 应用程序并不难，其中诸如 startElement 和 endElement 之类的事件由 XML 解析器通知给应用程序，而无需构建记忆中的树。

# jquery - 在 JQuery.Deferred 对象之间传播事件

> ID：10267286
> 
> 赞同：4
> 
> 时间：2012-04-22T10:47:12.787
> 
> 标签：jquery, jquery-deferred

如何将一个 JQuery.Deferred() 对象上的所有事件传播到另一个对象？

有没有更好/更简单/更短的方法然后处理两者`.fail`并通过调用其他对象和？我假设我不必处理，因为当我调用 Reject 或 resolve 时会调用它。~~`.then`~~ `.done``.rejectWith``.resolveWith`~~`.done`~~ `.then`

我怀疑也许这可以使用`.pipe`，但我不知道如何。

更新：

注意：我还根据@Frédéric Hamidi 的评论修复了上面的一些文本。

我想要达到的目标如下：

我有一个 API 对服务器进行 ajax 调用，它们会返回 ajax 对象（它本身就是一个 $.Deferred）。

在某些时候，我需要处理没有可用网络的情况（这是针对在移动设备上运行的 phonegap 应用程序）。

我想做的是，在没有网络连接的情况下，我会显示一个对话框，提示用户修复网络问题并点击“重试”。

但在这种情况下，我不会调用 $.ajax，直到用户点击重试，所以我没有 $.Defferred 对象来返回调用 API 开始的函数。

所以我最终明白我可以创建一个新的 $.Defferred 并将其返回，然后在重试按钮的回调中调用 $.ajax 本身，将其设置为“中继”/将延迟事件传播到我刚刚返回的事件将其作为封闭的一部分进行钻孔。

但我不确定该怎么做。我与该`.pipe`方法的混淆是因为它的描述说它是：

> **过滤和/或链接 Deferreds**的实用方法。

我希望这使我的问题更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:28:40.120

如果我理解正确，您只希望延迟解决/拒绝并使用与您的 ajax 请求完全相同的值进行通知？如果是这样，假设您的 Deferred 对象被称为 defer，下面的代码就可以解决问题：

```
$.ajax( ... ).done( defer.resolve ).fail( defer.reject ).progress( defer.notify ); 
```

它之所以有效，是因为 defer.resolve、defer.reject 和 defer.notify 是词法绑定的：上下文（this）和值（参数）被正确传递，因此您只需将 ajax 承诺的状态有效地转发到新的 deferred 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T17:54:11.923

如果您有 2 个延迟对象 d1 和 d2，则可以使用以下命令从 d2 传播到 d1：`d2.then(d1.resolve,d1.reject,d1.notify)`

一个例子：http: [//jsfiddle.net/bgrossi/XTJEf/](http://jsfiddle.net/bgrossi/XTJEf/)

# java - 使用 tcpdump 记录失败的 HTTP 请求

> ID：10267288
> 
> 赞同：3
> 
> 时间：2012-04-22T10:47:20.747
> 
> 标签：java, tomcat, wireshark, tcpdump

我在 Tomcat 7.0.22 中运行 Java webapp，在生产环境中不时有 HTTP 请求导致`HTTP 500`（我的应用程序中出现意外异常）。为了在暂存环境中重现这些错误，我通常会运行`tcpdump`并记录所有 HTTP 流量，然后使用 WireShark 过滤数据包`http.response.code != 200 or 204 or 302`并在每个响应上运行“follow HTTP stream”，从而给我导致此错误的请求。然后我可以在暂存环境中使用 cURL 重新运行此请求。

我的问题是：

*   这个过程如何自动完成？
*   有没有办法用其他技术达到同样的效果（重现错误）？（可能`Filter`是Tomcat内部的一些）

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:12:10.920

有提供此类功能的工具。实际上他们做得更多：他们通常检测您的 java 代码，以便可以检测哪个模块对失败负责。

我个人正在为实施此类解决方案的名为[Correlsense的公司工作。](http://www.correlsense.com/)它是商业的，但您可以从免费分发的评估版开始，并且可以从我们的网站下载。或者，我可以让您查看看起来比[Correlsense](http://newrelic.com/)更好的 newrelic.com，尽管我个人没有使用它，但只是尝试了一下。

# javascript - 机械化卡在 Javascript 重定向页面上

> ID：10267289
> 
> 赞同：3
> 
> 时间：2012-04-22T10:47:24.727
> 
> 标签：javascript, ruby-on-rails-3, redirect, nokogiri, mechanize

我在我的 Ruby on Rails 应用程序中使用 Mechanize 和 Nokogiri 来抓取我们的本地打印机管理面板，以检索打印机生命周期中的打印页数。

我有以下 rake 任务：

```
# Logs into printer admin page and retrieved counts.
require 'rubygems'
require 'mechanize'
require 'logger'

# Create a new mechanize object
agent = Mechanize.new

# Load the printer admin page
page = agent.get("http://192.168.1.126/index.html?lang=1")

# Select the form with an action of index.cqi
form = agent.page.form_with(:action => "index.cgi")
form.radiobuttons_with(:id => '0x3fdb24153404')[1]

# Submit the form
page = form.submit form.buttons.first

pp page 
```

这将返回以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<script type="text/javascript">
<!--
window.onload=function(){setTimeout(function(){document.menu_link.submit();},0);}
//-->
</script>
</head>
<body>
<form name="menu_link" action="index.html" method="post" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="lang" value="1">
</form>
</body>
</html> 
```

我似乎无法在上面的页面上选择表单，并且脚本似乎停在该页面上并且没有遵循重定向。

是否有处理此类重定向的标准方法？也许暂停脚本直到重定向发生？它会允许重定向工作吗？

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:44:09.057

你有两个选择。任何一个：

1.  [手动提交表格](https://stackoverflow.com/questions/2558856/mechanize-javascript)
2.  使用[Watir](http://watir.com/)或[Selenium](http://seleniumhq.org/)

基本上 Mechanise 不会运行 javascript，因此您必须手动模拟 javascript 运行（选项 1）或自动化真正的浏览器来执行此操作（选项 2）

`POST`如果您只执行 a of而不是 get ，则选项 1 应该是双倍的`lang=1`，因为这就是表单所做的一切。

我猜是这样的：

```
page = agent.post('http://192.168.1.126/index.html', {
  "lang" => "1"
}) 
```

但我从未真正使用过机械化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:53:03.387

You should try to add follow on redirects like this

```
agent.follow_meta_refresh = true 
```

Also if this is javascript controlled behaviour then you are in bad position because mechanize can't follow this. He don't executes js. You will have to see in js how he does it and emulate same call in mechanize.

But i think all you need to do is just

```
agent.post <url> 
```

because he seems to be expecting post method.

There is hardcore alternative :) to use node-crawler in node.js [https://github.com/joshfire/node-crawler](https://github.com/joshfire/node-crawler) it can evaluate javascript from client page server side.

# android - API 11 之前的动画

> ID：10267291
> 
> 赞同：8
> 
> 时间：2012-04-22T10:47:47.733
> 
> 标签：android, animation

我刚刚发现 found`android.animation.ObjectAnimator`仅在 Android API 11 中引入。

有没有其他方法可以在较旧的 Android 手机上为对象设置动画？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-22T11:03:06.073

您可以使用 Jake Wharton 的 NineOldAndroids [1]，它是适用于 2.x Android 设备的 Honeycomb 新动画框架的向后移植。它非常易于使用，因为它模仿了您在 11 台以上设备上使用的相同 API。

[1] [http://nineoldandroids.com/](http://nineoldandroids.com/)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-04-22T10:56:00.660

`ObjectAnimator`确实是在Android 3.0（API Level 11）中引入的，在2.3.6上找不到。

[http://developer.android.com/reference/android/animation/ObjectAnimator.html](http://developer.android.com/reference/android/animation/ObjectAnimator.html)

# java - 适用于 Mac 的 Java jai-imageio 库的二进制文件在某处可用

> ID：10267294
> 
> 赞同：3
> 
> 时间：2012-04-22T10:48:42.740
> 
> 标签：java

用于 Mac 的 Java jai-imageio 库的二进制文件在某处可用吗？ [http://java.net/projects/jai-imageio](http://java.net/projects/jai-imageio)

还是有人设法为Mac编译它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:36:38.553

引用维基的一句话

> JAI 可直接从 Sun Microsystems 免费下载，用于 Windows、Solaris 和 Linux 平台。**Apple Inc.**从其网站为 Mac OS X v10.3 提供了 Mac OS X 版本的 API；Mac OS X v10.4**预装**了它。

通往 JAI 的道路`/System/Library/Java/Extensions`

# python - Tkinter Frame 容器颜色不可见

> ID：10267295
> 
> 赞同：0
> 
> 时间：2012-04-22T10:48:45.923
> 
> 标签：python, tkinter

为什么我看不到带有以下代码的红框？

```
import Tkinter

root = Tkinter.Tk()
root.geometry("220x300")

container_frame = Tkinter.Frame(background = "red", width = 100, height = 120)
container_frame.pack()

widget_button = Tkinter.Button(master = container_frame)
widget_button.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T12:57:34.737

您看不到它，因为您在按钮和框架之间没有填充。默认情况下，容器“缩小以适应”其内容。即使您向框架添加明确的宽度或高度，它也会缩小以完全适合其子项。

有几种方法可以实现您正在寻找的效果，但不清楚您到底想要什么效果。您可以关闭此“缩小以适应”行为（使用`container_frame.pack_propagate(False)`）。或者，您可以在小部件周围添加填充。或者，您可以将背景应用于框架的容器。或者您可以打包框架以填充其容器（主窗口），然后确保包含窗口足够大以暴露框架。

对于最后一个建议的示例，您可以将一行更改为：

```
container_frame.pack(side="top", fill="both", expand=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:00:42.967

如果您更改为：

```
widget_button.pack(padx=10, pady=10) 
```

调用 widget_button.pack(...) 时，您可以看到框架已调整大小

![在此处输入图像描述](../Images/2a0e3d6fa1073ffc4895643396cc52ec.png)

# perl - Perl 跨文件匹配数组

> ID：10267299
> 
> 赞同：-1
> 
> 时间：2012-04-22T10:49:41.350
> 
> 标签：perl

我有一个看起来像这样的文件。

在 Perl 代码中，我正在使用一个数组`@query = ('A+80', 'A+40', 'A+202', 'B+130', 'B+268', 'B+211', 'A+35');` 我想要做的是：对于数组的每个元素，扫描下面显示的文件中的行并打印出如下内容：

```
A+80 - HELIX

A+40 - SHEET

A+202 - HELIX

B+130 - HELIX

B+268 - SHEET

B+211 - SHEET

A+35 - LOOP 
```

此输出背后的逻辑是为数组中的每个条目提取第一部分，即 A 或 B，以及第二部分，即与第一部分关联的数字。考虑数组中的第一个条目：`A+80`. 在文件的第三行，数字 80 位于 78（第 6 列）和 90（第 9 列）之间，并且`A`在这两种情况下，第一个字母也是匹配的。因此程序为这个查询打印 HELIX。

考虑第二个元素：`A+40`. 第二部分，即数字位于这一行的范围内

```
SHEET    2   B 3 ARG A  37  VAL A  43  1 
```

即在第 7 列和第 10 列中列出的数字之间，并且字母表也匹配。因此，对于此条目，输出为：SHEET

对于其他情况，例如`B+211`. 下面给出的行匹配与其关联的数字和字母。

```
SHEET    2   B 3 ARG A  37  VAL A  43  1 
```

因此，此条目的输出为：SHEET

此外，对于其字母和数字与之关联的条目，与文件中的任何行都不匹配。代码输出：`A+35 - LOOP`

在 Perl 中执行此操作的有效方法是什么？由于我是 Perl 的初学者，因此我现在将每个条目拆分为连续的数组元素，即 for `@query`，并将字母和数字与行中的每个相关列进行匹配/比较。但不知何故无法获得所需的输出。

请帮忙...

```
HELIX    1   1 GLY A    9  GLN A   30  1                                  
HELIX    2   2 ASP A   47  ILE A   63  1                                  
HELIX    3   3 GLU A   78  GLU A   90  1                                  
HELIX    4   4 THR A  111  ALA A  117  1                                  
HELIX    5   5 PRO A  120  LYS A  122  5                                  
HELIX    6   6 SER A  129  ARG A  137  1                                  
HELIX    7   7 CYS A  147  THR A  159  1                                  
HELIX    8   8 GLY A  178  ASN A  188  1                                  
HELIX    9   9 LEU A  202  LYS A  208  1                                  
HELIX   10  10 GLY A  224  TRP A  226  5                                  
HELIX   11  11 TYR A  258  GLU A  263  1                                  
HELIX   12  12 VAL A  275  PHE A  294  1                                  
HELIX   13  13 GLY B    9  GLN B   30  1                                  
HELIX   14  14 ASP B   47  ILE B   63  1                                  
HELIX   15  15 GLU B   78  GLU B   90  1                                  
HELIX   16  16 THR B  111  ALA B  117  1                                  
HELIX   17  17 PRO B  120  LYS B  122  5                                  
HELIX   18  18 SER B  129  ARG B  137  1                                  
HELIX   19  19 CYS B  147  THR B  159  1                                  
HELIX   20  20 GLY B  178  TRP B  187  1                                  
HELIX   21  21 LEU B  202  LYS B  208  1                                  
HELIX   22  22 GLY B  224  TRP B  226  5                                  
HELIX   23  23 TYR B  258  GLU B  263  1                                  
HELIX   24  24 GLY B  276  PHE B  294  5                                  
SHEET    1   A 2 GLU A   5  LEU A   7  0                                        
SHEET    2   A 2 PHE A 267  THR A 269  1  
SHEET    1   B 3 LYS A  66  LEU A  72  0                                        
SHEET    2   B 3 ARG A  37  VAL A  43  1  
SHEET    3   B 3 GLY A  96  VAL A  99  1  
SHEET    1   C 4 THR A 191  CYS A 195  0                                        
SHEET    2   C 4 HIS A 167  VAL A 171  1  
SHEET    3   C 4 ILE A 211  VAL A 214  1  
SHEET    4   C 4 ILE A 232  ASP A 235  1             
SHEET    1   D 2 GLU B   5  LEU B   7  0                                        
SHEET    2   D 2 PHE B 267  THR B 269  1  
SHEET    1   E 3 LYS B  66  LEU B  72  0                                        
SHEET    2   E 3 ARG B  37  VAL B  43  1  
SHEET    3   E 3 GLY B  96  VAL B  99  1  
SHEET    1   F 4 THR B 191  CYS B 195  0                                        
SHEET    2   F 4 HIS B 167  VAL B 171  1  
SHEET    3   F 4 ILE B 211  VAL B 214  1  
SHEET    4   F 4 ILE B 232  ASP B 235  1  
SHEET    1   G 2 ASN B 239  PRO B 242  0                                        
SHEET    2   G 2 ARG B 250  VAL B 253 -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:05:49.257

下面的程序似乎可以满足您的需要。为方便起见，它使用文件句柄从源文件中读取数据`DATA`：您必须安排打开和读取适当的数据文件。

整个文件被读入内存以便直接访问。如果文件很大（例如，数百兆字节），那么这种方法可能不合适，您将不得不回来寻求更多帮助。

记录的长度各不相同，因此算法会相对于找到的第一个三字母字段来定位相关字段。

哈希`%categories`包含所有必需的文件数据。它由键字母（`A`或`B`此处）索引，每个元素的值是一个匿名哈希数组，其中包含每个记录所涵盖范围的`label`（第 1 列）、the和`letter`the 。`start``end`

构建输出很简单，并使用`map`和`grep`查找哈希中所有相关条目的“标签”。如果没有找到，`"LOOP"`则默认添加文本。

```
use strict;
use warnings;

my @query = qw/ A+80 A+40 A+202 B+130 B+268 B+211 A+35 /;

my %categories;

while (<DATA>) {
  next unless /\S/;
  my @data = split;
  my @indices = grep $data[$_] =~ /^[A-Z]{3}$/, 0 .. $#data;
  my %info;
  @info{qw/ label letter start end /} = @data[ 0, $indices[0]+1, $indices[0]+2, $indices[1]+2 ];
  push @{ $categories{$info{letter}} }, \%info;
}

for my $item (@query) {
  my ($letter, $value) = split /\+/, $item;
  my @matches = map $_->{label},
      grep { $value >= $_->{start} and $value <= $_->{end} }
      @{ $categories{$letter} };
  @matches = ('LOOP') unless @matches;
  warn qq(Multiple categories for query "$item") unless @matches == 1;
  printf "%s - %s\n", $item, $_ for @matches 
}

__DATA__
HELIX    1   1 GLY A    9  GLN A   30  1                                  
HELIX    2   2 ASP A   47  ILE A   63  1                                  
HELIX    3   3 GLU A   78  GLU A   90  1                                  
HELIX    4   4 THR A  111  ALA A  117  1                                  
HELIX    5   5 PRO A  120  LYS A  122  5                                  
HELIX    6   6 SER A  129  ARG A  137  1                                  
HELIX    7   7 CYS A  147  THR A  159  1                                  
HELIX    8   8 GLY A  178  ASN A  188  1                                  
HELIX    9   9 LEU A  202  LYS A  208  1                                  
HELIX   10  10 GLY A  224  TRP A  226  5                                  
HELIX   11  11 TYR A  258  GLU A  263  1                                  
HELIX   12  12 VAL A  275  PHE A  294  1                                  
HELIX   13  13 GLY B    9  GLN B   30  1                                  
HELIX   14  14 ASP B   47  ILE B   63  1                                  
HELIX   15  15 GLU B   78  GLU B   90  1                                  
HELIX   16  16 THR B  111  ALA B  117  1                                  
HELIX   17  17 PRO B  120  LYS B  122  5                                  
HELIX   18  18 SER B  129  ARG B  137  1                                  
HELIX   19  19 CYS B  147  THR B  159  1                                  
HELIX   20  20 GLY B  178  TRP B  187  1                                  
HELIX   21  21 LEU B  202  LYS B  208  1                                  
HELIX   22  22 GLY B  224  TRP B  226  5                                  
HELIX   23  23 TYR B  258  GLU B  263  1                                  
HELIX   24  24 GLY B  276  PHE B  294  5                                  
SHEET    1   A 2 GLU A   5  LEU A   7  0                                        
SHEET    2   A 2 PHE A 267  THR A 269  1  
SHEET    1   B 3 LYS A  66  LEU A  72  0                                        
SHEET    2   B 3 ARG A  37  VAL A  43  1  
SHEET    3   B 3 GLY A  96  VAL A  99  1  
SHEET    1   C 4 THR A 191  CYS A 195  0                                        
SHEET    2   C 4 HIS A 167  VAL A 171  1  
SHEET    3   C 4 ILE A 211  VAL A 214  1  
SHEET    4   C 4 ILE A 232  ASP A 235  1             
SHEET    1   D 2 GLU B   5  LEU B   7  0                                        
SHEET    2   D 2 PHE B 267  THR B 269  1  
SHEET    1   E 3 LYS B  66  LEU B  72  0                                        
SHEET    2   E 3 ARG B  37  VAL B  43  1  
SHEET    3   E 3 GLY B  96  VAL B  99  1  
SHEET    1   F 4 THR B 191  CYS B 195  0                                        
SHEET    2   F 4 HIS B 167  VAL B 171  1  
SHEET    3   F 4 ILE B 211  VAL B 214  1  
SHEET    4   F 4 ILE B 232  ASP B 235  1  
SHEET    1   G 2 ASN B 239  PRO B 242  0                                        
SHEET    2   G 2 ARG B 250  VAL B 253 -1 
```

***输出***

```
A+80 - HELIX
A+40 - SHEET
A+202 - HELIX
B+130 - HELIX
B+268 - SHEET
B+211 - SHEET
A+35 - LOOP 
```

# c - 弹性默认规则

> ID：10267307
> 
> 赞同：4
> 
> 时间：2012-04-22T10:50:25.707
> 
> 标签：c, tokenize, lex, flex-lexer

如何自定义 flex 的默认操作。我发现了类似 <*> 的东西，但是当我运行它时，它显示“flex 扫描仪卡住了”？还有 . rule 只添加一个规则，因此它也不起作用。我想要的是

```
comment               "/*"[^"*/"]*"*/"

%%
{comment}             return 1;
{default}             return 0; 
<<EOF>>               return -1; 
```

是否可以将匹配最长的行为更改为首先匹配？如果是这样，我会做这样的事情

```
default               (.|\n)* 
```

但是因为这几乎总是给出更长的匹配，所以它会隐藏评论规则。

编辑

我在手册中找到了 {-} 运算符，但是直接来自手册的这个例子给了我“无法识别的规则”：

[ac]{-}[bz]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T19:30:42.717

flex 默认规则匹配单个字符并将其打印在标准输出上。如果您不想要该操作，请编写一个匹配单个字符并执行其他操作的显式规则。

该模式`(.|\n)*`将整个输入文件作为单个标记匹配，所以这是一个非常糟糕的主意。您认为默认值应该是长匹配，但实际上您希望它尽可能短（但不能为空）。

默认规则的目的是在输入语言中的任何标记都不匹配时执行某些操作。当 lex 用于标记语言时，这种情况几乎总是错误的，因为这意味着输入以一个字符开头，而该字符不是该语言的任何有效标记的开头。

因此，“捕捉任何字符”规则被编码为错误恢复的一种形式。这个想法是丢弃坏字符（只有一个）并尝试从那个字符之后进行标记。这只是一个猜测，但它是一个很好的猜测，因为它是基于已知的：即输入中有一个坏字符。

恢复规则可能是错误的。例如，假设没有以 开头的语言标记`@`，而程序员想要编写字符串文字`"@abc"`。只是，她忘记开头`"`写了`@abc"`。正确的解决方法是插入缺少的`"`，而不是丢弃`@`. 但这需要在词法分析器中设置一套更聪明的规则。

无论如何，通常在丢弃坏字符时，您希望针对这种情况发出错误消息，例如“在第 42 行第 3 列跳过无效字符 '~`”。

当 lex 用于文本过滤时，将不匹配字符复制到标准输出的默认规则/操作很有用。然后，默认规则带来了正则表达式搜索的语义（与正则表达式匹配相反）：这个想法是在输入中搜索词法分析器的标记识别状态机的匹配项，同时打印该搜索跳过的所有材料。

例如，一个仅包含以下规则的 lex 规范：

```
 "foo" { printf("bar"); } 
```

将实现相当于

```
 sed -e 's/foo/bar/g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:42:27.663

为什么要加“。” 不做的伎俩？如果没有匹配的金额，您将无法执行操作。如果没有匹配，flex 不会做任何事情，所以要添加一个“默认”规则，只需让它匹配一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T05:49:03.420

如果尝试匹配规则的补码，我手动解决了问题。这很好用，因为在这种情况下涉及的匹配模式非常简单。

# bytecode-manipulation - 用于 cap 文件的字节码卡外验证器

> ID：10267315
> 
> 赞同：3
> 
> 时间：2012-04-22T10:51:54.603
> 
> 标签：bytecode-manipulation, javacard

我需要使用卡外字节码验证器验证 Java Card 程序（cap 文件）。我已经手动修改了 cap 文件中的信息，我想验证新的 cap 文件是否是好类型。

我尝试使用 com.sun.javacard.scriptgen.CAP.verifyCAP() 方法。我发送有效和无效的 cap 文件，但结果始终等于 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-16T13:41:56.430

我从不发布解决方案。那一天终于到了；）

下载 JavaCard SDK。它包含验证器的编译版本。例如 java_card_kit-2_2_1。

我的文件：

```
./
./java_card_kit-2_2_1/
./java2CAP.sh
./ValidApplet/
./ValidApplet/ValidApp.java
./verifyCAP.sh 
```

java2CAP.sh：

```
#!/bin/bash
export JC_HOME=./java_card_kit-2_2_1
export CLASSPATH=$JC_HOME/lib/apduio.jar:$JC_HOME/lib/apdutool.jar:$JC_HOME/lib/jcwde.jar:$JC_HOME/lib/converter.jar:$JC_HOME/lib/scriptgen.jar:$JC_HOME/lib/offcardverifier.jar:$JC_HOME/lib/api.jar:$JC_HOME/lib/capdump.jar:$JC_HOME/lib/:$JC_HOME/samples/classes:$CLASSPATH
PACKAGE=ValidApplet
CLASS=ValidApp
APPLET=$CLASS.java
PACKAGE_AID=0x46:0x56:0x55:0x4c:0x4e:0x54:0x45:0x53:0x54:0x53
APPLET_AID=0x46:0x56:0x55:0x4c:0x4e:0x54:0x45:0x53:0x54:0x53:0x41:0x70:0x70
javac -g -source 1.3 -target 1.1  $PACKAGE/$APPLET
java com.sun.javacard.converter.Converter -nobanner -out CAP -exportpath $JC_HOME/api_export_files -applet $APPLET_AID $CLASS $PACKAGE $PACKAGE_AID 1.0 -i 
```

验证CAP.sh：

```
#!/bin/bash
export JC_HOME=./java_card_kit-2_2_1
export CLASSPATH=$JC_HOME/lib/apduio.jar:$JC_HOME/lib/apdutool.jar:$JC_HOME/lib/jcwde.jar:$JC_HOME/lib/converter.jar:$JC_HOME/lib/scriptgen.jar:$JC_HOME/lib/offcardverifier.jar:$JC_HOME/lib/api.jar:$JC_HOME/lib/capdump.jar:$JC_HOME/lib/:$JC_HOME/samples/classes:$CLASSPATH

export CAPP_PATH=./ValidApplet/javacard
export CAPP_NAME=ValidApplet.cap

java -classpath $JC_HOME/lib/offcardverifier.jar com.sun.javacard.offcardverifier.Verifier $JC_HOME/api_export_files/javacard/framework/javacard/framework.exp $JC_HOME/api_export_files/java/lang/javacard/lang.exp $JC_HOME/api_export_files/javacard/security/javacard/security.exp $CAPP_PATH/$CAPP_NAME 
```

./ValidApplet/ValidApp.java：

```
package ValidApplet;

import javacard.framework.Applet;
import javacard.framework.APDU;
import javacard.framework.ISO7816;
import javacard.framework.ISOException;

public class ValidApp extends Applet //implements PIN
{
    final static byte TEST_CLA = (byte)0x77;

    public static class TestClassStatic {};

    protected ValidApp()
    {
        register();
    }

    public static void install(byte[] bArray, short bOffset, byte bLength)
    {
        new ValidApp();
    }

    public void process(APDU apdu)
    {
        byte buffer[] = apdu.getBuffer();

        try {
            if (buffer[ISO7816.OFFSET_CLA] == TEST_CLA) {
                test((byte)4, (short)2);
            } else {
                ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
            }
        } catch (ISOException e) {

        }
    }
} 
```

# javascript - WAV 文件仅在 ie 8 中的某些计算机上播放

> ID：10267316
> 
> 赞同：0
> 
> 时间：2012-04-22T10:52:12.383
> 
> 标签：javascript, html, internet-explorer-8, wav

我有一个带有 Javascript 的简单 HTML 文件，它调用一个函数来播放一个 wav 文件。这是非常基本的，在我的一台电脑上工作得很好。我按下键盘上的一个键，wav 文件播放得很好。我在另一台计算机上运行相同的文件，我收到一个 javascript 错误，上面写着：“未指定的错误”。似乎我要播放的文件不存在。我没有附加我的代码，因为它可以在另一台计算机上完美运行，所以我想这可能只是一个互联网选项问题？我找不到任何地方告诉我什么设置控制 wav 文件设置。

谢谢阅读。

```
<script type="text/javascript">
function play() { 

var myCurrentTraffic = document.getElementById('trafficItemBox').value;
var playTrafficItem = myCurrentTraffic + ".wav";

embed = document.createElement("embed"); 
embed.setAttribute("src", playTrafficItem); 
embed.setAttribute("hidden", true); 
embed.setAttribute("autostart", true); 
document.body.appendChild(embed); 
} 
</script>

</head>

<body>

<button onclick="play();">PLAY</button>

<input type="text" id="trafficItemBox" value="0"></input> 
```

这段代码似乎适用于我所有的计算机，所以现在我的情况有点不同。我有 2 个 wav 文件，“0.wav”和“1.wav”。我创建了一些其他代码，每次我按下“播放”键（我正在使用 ` 键）时，它都会将“trafficItemBox”值增加 1，这反过来又成为新的 wav 文件编号。所以文件开始播放 0.wav，然后将播放 1.wav 等等，一直到我的最终 wav 文件。

*现在*的问题是 document.body.appendChild(embed) 部分将焦点从我的网站上移开，所以我必须将鼠标重新单击到网站正文中才能再次获得焦点，以便我可以继续单击“ play”键播放下一个文件。我不知道如何将焦点带回文档，所以我可以连续单击“播放”键。谢谢！

# c++ - OpenCV从矩阵中获取条件基最大元素位置

> ID：10267319
> 
> 赞同：1
> 
> 时间：2012-04-22T10:53:01.193
> 
> 标签：c++, opencv, matrix, max

我检查了 minMaxLoc 但它只给出了矩阵的最大和最小位置。我需要找到最大或等于其他数字。例如 (abc >=7) 然后给出矩阵中适用此条件的所有位置。

Matlab 示例： [a,b] = find( heMap >= (max(max(heMap)) ) );

那么我怎样才能满足opencv中获得特定最大值或最小值的条件呢？好心的帮助

问候

目前我正在使用这种方式

```
double getMaxValue(Mat hemap)
{
MatConstIterator_<double> it = hemap.begin<double>(), it_end = hemap.end<double>();
double maxdata=0;

for(; it != it_end; ++it)
{
    if(*it>maxdata)
    {
        maxdata = *it;
    }
}

return maxdata;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:01:21.537

我不知道任何内置函数，就是这样做的。您可以将矩阵与为您提供布尔矩阵的元素进行比较。但我不知道有任何函数可以为您提供每个非零元素的位置，例如`find`.

但是循环遍历数组并自己进行比较非常简单：

```
int thresh = 50;
for(int y=0;y<matrix.rows; y++)
  for(int x=0;x<matrix.cols; x++)
    if( matrix.at<uchar>(y,x) >= thresh)
      printf(" (%d,%d) = %d\n",x,y, matrix.at<uchar>(y,x)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:05:43.347

我给你一个 2+1 步骤的解决方案：

1.  `minMaxLoc()`使用-> max_val获得最大值。

2.  用于`inRange(input, max_val, max_val, output_mask)`将所有最大元素变为白色。

3.  决定如何处理这些位置。
    比如说，您可以轻松检测热点、max-es 的大块或 max-es 的连接组件。（用扩张和腐蚀，然后在现场中心使用 floodFill，一个接一个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:42:52.137

函数怎么样`cv::compare`，它将每个像素与给定的数字进行比较，如果条件满足，则将输出数组设置为 255，否则为 0。

# mysql - 如何正确清理桌子

> ID：10267322
> 
> 赞同：1
> 
> 时间：2012-04-22T10:53:12.550
> 
> 标签：mysql

为了确定某个对象的使用频率，我使用了一个包含以下字段的表；

```
id - objectID - timestamp 
```

每次使用一个对象时，它的 ID 都会`time()`被添加进去。这使我可以确定一个对象在过去一小时/分钟/秒等中的使用频率。

一小时后，该行无用（我没有检查超过一小时）。但是，我的理解是简单地删除该行是不明智的，因为它可能会弄乱主键（auto_increment ID）。

所以我添加了一个名为“活动”的字段。在检查一个对象的使用频率之前，我循环遍历所有对象`WHERE active=1`，如果超过 1 小时，则将其设置为 0。我认为这不会给多个用户之间带来任何并发问题，但这会给我留下很多未使用的数据。

现在我在想，在插入新的使用数据之前，最好检查是否有一个字段，`active=0`而不是插入一个新行，用新数据更新那个字段，然后再次将 active 设置为 1。但是，这需要表锁定以防止多个客户端更新同一行。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:57:34.763

我从来没有听说过删除行会弄乱主键。

您是否可能试图确保`id`自动分配的值`auto_increment`与另一个表的匹配？这不是必需的 - 您可以简单地使用 an`INTEGER PRIMARY KEY`作为`id`列并显式分配值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T10:56:12.517

您可以执行匹配所有早于 1 小时的行的更新查询。

```
UPDATE table SET active=0 WHERE timestamp < now() - interval 1 hour 
```

# eventbrite - Eventbrite 日期处理有什么变化吗？

> ID：10267323
> 
> 赞同：0
> 
> 时间：2012-04-22T10:53:16.477
> 
> 标签：eventbrite

我有一个应用程序使用 API 方法 event_search 搜索 EventBrite 上的事件。

突然，使用日期的搜索停止工作，我从 API 得到的只是“处理查询时抛出的错误”——不是很有帮助。

如果我使用“本月”，则查询有效。如果我使用“下个月”，我会使用完全相同的查询得到错误。同样，“本周”有效，“下周”失败。

尽管 API 文档显示所有这些日期构造都是正确的，但还是会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:19:01.597

我验证了“下周”和“下个月”命名查询存在问题。但是，在执行基于日期范围的请求时，我无法重现您所描述的错误。

我建议您将完整的请求 URL 发送给[Eventbrite 的 API 支持团队](http://developer.eventbrite.com/contact-us/)。

# java - java中的声明式编程

> ID：10267325
> 
> 赞同：3
> 
> 时间：2012-04-22T10:53:52.100
> 
> 标签：java, declarative

我有一个关于声明式编程的问题，看看我对这个概念的理解程度。我有一个任务，说明我应该以“声明性方式”在 Java 中制作数独解谜器。查找这意味着什么，我发现了很多模棱两可的定义，说明程序应该以描述必须做什么而不是指定如何做的方式编写。环顾四周，我发现了一个有趣的例子，有人用列表来解释它，专门过滤列表的奇数。

命令式（称为函数）：

```
List resultList = new List()
foreach element in startlist
    do if element % 2 == 1
        do add element to resultList
        od
    od
return returnList 
```

声明式风格（调用上下文）：

```
newList = startList.filter(num -> num%2 ==1) 
```

所以在声明式风格中，指定了我们要保留哪些元素，但没有指定列表的制作方式。这被抽象到列表的 API 中。

那么我的简单问题是：这种方法是否意味着列表库不是声明性的，因为算法被移到那里？在这种情况下，术语“声明性”适用于调用该库的程序部分。因此，程序是不是不可能 100% 声明性的，因为（当然）某个地方需要一个算法来指定事情是如何完成的？如果我在这里错了，请纠正我，因为这将是我理解声明性概念的核心。

在任何情况下，我都在考虑将数独求解器编写为我自己的库（包含所有“命令式”逻辑，以“声明式”函数编程风格包装）和应采取的步骤规范的组合来解决数独，作为对这些库的调用。我还认为我可以使用命令模式作为包装器来将函数作为参数传递给 Java，以进一步使求解器类更具“声明性”。我已经对此进行了试验，并尝试了类似的方法`newList = startList.filter(new OddNumberCommand())`，使用`OddNumberCommand`具有该`execute`功能的命令，从列表中获取一个元素作为参数，如果要从结果列表中保留或丢弃该元素，则返回 true 或 false。

无论如何，这只是我的想法，我想求助于更好地理解这个概念的其他人的帮助，以确保我走的是正确的道路还是错误的道路。请让我知道我错在哪里以及推理中的正确之处，以便我可以学习正确使用声明式编程。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T11:15:54.383

正如评论者所说，您的示例比*声明式编程更具**功能*性编程，尽管两者在某些方面相似。在真正的声明式编程中，您将更加注重结果——您将指定如何处理列表中有趣的元素，而不是为了列表本身而转换列表。像[Jess](http://www.jessrules.com)这样的规则引擎是声明式编程系统的一个例子（免责声明，我是 Jess 的作者。）

 *回答您的一个简单问题：是的。所有函数式或声明式编程系统都涉及必须在运行程序的真实计算机上实现的运行时系统。由于真正的计算机始终是命令式冯诺依曼机器，因此必须以命令式方式编写运行时系统。因此，它是您的程序和硬件之间的额外抽象层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:11:41.693

从声明式编程的定义：

声明性语言的特点：

1.  基于系统的计算模型，其中直接根据输入数据的成分指定关系。
2.  由描述关系的定义或方程组组成，这些关系指定要计算的内容，而不是如何计算。
3.  变量的非破坏性赋值。
4.  使用的数据结构的显式表示。
5.  执行顺序无关紧要（没有副作用）。
6.  表达式/定义可以用作值。
7.  程序员不再负责控制。

声明式程序定义了逻辑（期望的目标或结果）而不是控制（我们如何实现期望的目标）。我们说声明性语言是目标导向或目标驱动的。

我认为在数独的情况下，关键是使用接口作为类之间的契约。这样，您可以在不破坏模型的情况下更改实现。*

# .net - Code First Fluent 映射的英文解释请

> ID：10267328
> 
> 赞同：1
> 
> 时间：2012-04-22T10:53:54.937
> 
> 标签：.net, entity-framework, entity-framework-4, ef-code-first

流式 API 的一个卖点（我知道一个小卖点）是流式调用链可以类似于自然语言，乍一看这一切看起来都很棒，但就像 Code First 流式映射 API 的情况一样， call 与英语相去甚远，我见过的所有文档总是在一个描述中描述整个调用链。

我正在寻找封面材料，例如像这样的流畅调用链：

```
modelBuilder.Entity<Status>().HasRequired(s => s.Login).WithMany(); 
```

“一个状态需要一个登录名，这个登录名可以有很多状态。”

如果我在阅读该链的方式上什至是正确的，但我相信读者知道我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:39:02.700

让我们稍微复杂一点，以充分描述映射的含义。假设您有这两个实体：

```
public class Status
{
    public int Id { get; set; }
    ...
    public virtual LoginInfo Login { get; set; }
}

public class LoginInfo
{
    public int Id { get; set; }
    ...
    // No navigation property to Status
} 
```

现在您编写映射语句：

```
modelBuilder.Entity<Status>().HasRequired(s => s.Login).WithMany(); 
```

这句话的翻译应该是这样的（我相信母语人士可以形成更好的解释）：

*实体`Status`已经映射`Login`了访问相关`LoginInfo`实体实例所需的导航属性，其中该实例可以与许多状态相关，但它不公开映射的导航属性来访问它们。*

原始流利的描述隐藏了关于的信息，`LoginInfo`因为这个通用参数`HasRequired`是自动推断的。

# c# - 模拟对象问题

> ID：10267333
> 
> 赞同：0
> 
> 时间：2012-04-22T10:54:17.513
> 
> 标签：c#, .net, mocking, rhino-mocks

我正在尝试进行以下嘲笑

```
var checkComponent = MockRepository.GenerateStub<IController>();

checkComponent.Stub(r => r.GetSelector().Select(new Position(3,6,1))).Return(true); 
```

我得到的 `r.GetSelector()`是返回null。

有没有办法让我试图创建嘲笑？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:04:38.137

> 我知道 r.GetSelector() 正在返回 null。

这是因为`checkComponent`（`r`在 Stub() 调用中）不是真正的实现，`IController`它基本上是实现`IController`接口的 RhinoMock 代理对象。

> 有没有一种方法可以让我尝试创建模拟？

您必须指定调用时应返回`GetSelector()`的内容，当您需要指定方法的期望时，请使用 Mock。

```
var componentMock = MockRepository.GenerateMock<IController>();
var selectorMock = MockRepository.GenerateMock<ISelector>();

// if you need - specify concrete arguments to return true
selectorMock.Expect(x => x.Select(null)).IgnoreArguments().Return(true).Repeat.Any();
componentMock.Expect(x => x.GetSelector()).Return(selectorMock).Repeat.Any(); 
```

# java - 用 JNA 替换 WndProc 失败并出现异常

> ID：10267336
> 
> 赞同：2
> 
> 时间：2012-04-22T10:54:31.850
> 
> 标签：java, windows, jna, wndproc

我尝试使用 JNA 在 Java 程序中捕获 Windows 消息，以注入我自己的 WndProc 方法。由于我只对几种消息类型感兴趣，因此我必须将这些消息转发到之前的 WndProc。在我的测试中（Java 1.7.0_03，64 位，在 Windows 7 上），只要我将鼠标移到创建的窗口上，这个转发似乎就会失败，给我以下异常：

```
com.sun.jna.LastErrorException: [2]The system cannot find the file specified.
    at com.sun.jna.Native.invokeLong(Native Method)
    at com.sun.jna.Function.invoke(Function.java:347)
    at com.sun.jna.Function.invoke(Function.java:276)
    at com.sun.jna.Library$Handler.invoke(Library.java:216)
    at $Proxy0.CallWindowProc(Unknown Source)
    at JnaWinEvents$1.callback(JnaWinEvents.java:102)
    at ... 
```

我认为这很奇怪，因为我尝试访问什么文件？我想某些内存访问出现了完全错误的情况...... :(

我正在使用最新版本的 JNA，3.4.0。我在此处或 Internet 上的其他地方找到的许多代码示例似乎使用 JNA 3.2.x（拆分为 jna.jar 和 platform.jar 之前的任何版本），其中 User32 定义了一些非常适合此类工作的方法。在较新版本的 JNA/platform 中，缺少这些方法。这就是为什么我自己定义大部分类型，只使用 jna.jar，而不是 platform.jar。以下是我用来测试的代码，它会生成异常。知道出了什么问题以及为什么会发生异常吗？

```
import javax.swing.*;
import com.sun.jna.*;
import com.sun.jna.win32.*;

public class JnaWinEvents extends JFrame {

public LONG_PTR prevWndProc = null; // so it won't get GC'ed
public User32.WNDPROC wndProcCallbackListener = null; // so it won't get GC'ed

public JnaWinEvents() {
    this.add(new JLabel("Hello StackExchange!"));
    this.pack();
    this.setVisible(true);
    setupEventsListener();
}

public static class LONG_PTR extends IntegerType {
    public LONG_PTR() {
        this(0);
    }
    public LONG_PTR(long value) {
        super(Pointer.SIZE, value);
    }
}

static class HANDLE extends PointerType implements NativeMapped {
}

public static class HWND extends HANDLE {
    public HWND() {
    }
}

public static class UINT_PTR extends IntegerType {
    public UINT_PTR() {
        super(Pointer.SIZE);
    }
    public UINT_PTR(long value) {
        super(Pointer.SIZE, value);
    }
    public Pointer toPointer() {
        return Pointer.createConstant(longValue());
    }
}

public static class WPARAM extends UINT_PTR {
    public WPARAM() {
        this(0);
    }
    public WPARAM(long value) {
        super(value);
    }
}

public static class LPARAM extends LONG_PTR {
    public LPARAM() {
        this(0);
    }
    public LPARAM(long value) {
        super(value);
    }
}

public static class LRESULT extends LONG_PTR {
    public LRESULT() {
        this(0);
    }
    public LRESULT(long value) {
        super(value);
    }
}

public interface User32 extends StdCallLibrary {
    static int GWL_WNDPROC = -4;

    User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class, W32APIOptions.DEFAULT_OPTIONS);

    interface WNDPROC extends StdCallCallback {
        LRESULT callback(HWND hWnd, int uMsg, WPARAM uParam, LPARAM lParam);
    }

    LONG_PTR GetWindowLongPtr(HWND hWnd, int nIndex) throws LastErrorException;

    LRESULT CallWindowProc(LONG_PTR proc, HWND hWnd, int uMsg, WPARAM uParam, LPARAM lParam) throws LastErrorException;

    LONG_PTR SetWindowLongPtr(HWND hWnd, int nIndex, WNDPROC wndProc) throws LastErrorException;
}

private void setupEventsListener() {
    HWND hWnd = new HWND();
    hWnd.setPointer(Native.getWindowPointer(this));
    this.prevWndProc = User32.INSTANCE.GetWindowLongPtr(hWnd, User32.GWL_WNDPROC);
    this.wndProcCallbackListener = new User32.WNDPROC()
    {
        @Override
        public LRESULT callback(HWND hWnd, int uMsg, WPARAM wParam, LPARAM lParam)
        {
            System.out.println(hWnd + "\t" + uMsg + "\t" + wParam + "\t" + lParam);

            //Call the window's actual WndProc so the events get processed.
            return User32.INSTANCE.CallWindowProc(prevWndProc, hWnd, uMsg, wParam, lParam);
        }

        @Override
        protected void finalize() throws Throwable {
            System.out.println("FINALIZE!!!!");
            super.finalize();
        }
    };

    //Set the WndProc function to use our callback listener instead of the window's one. 
    LONG_PTR result = User32.INSTANCE.SetWindowLongPtr(hWnd, User32.GWL_WNDPROC, wndProcCallbackListener);
    System.out.println("setting my window proc, result = " + result);
    System.out.println("old pointer = " + this.prevWndProc);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new JnaWinEvents();
        }
    });
}
} 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:18:29.810

问题在于接口定义。看[这里](http://code.google.com/p/jdeskbar/source/browse/appbar/src/main/java/jdesktop/appbar/win32/User32.java?r=0c5f8b79a364a7500dbc3550a42dac9ce071b393)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:25:14.577

我最近在 JNA 上遇到了一些问题（因为我试图按照基于旧版本的教程进行操作）。我只是建立了一个工作代码的骨架，我不会在这里发布它，因为它与你的非常相似。不同之处在于我使用的是platform.jar。你为什么不使用它？

编辑：抱歉耽搁了。您需要以这种方式定义回调过程（为您提供了StdCallBack）

```
public class WndProc implements StdCallCallback {
    public LRESULT callback(HWND hWnd, int uMsg, WPARAM wParam, LPARAM lParam) {
    }
} 
```

在某处声明它

```
private final WndProc procedure = new WndProc(); 
```

然后在适当的时候链接它。

```
user32.SetWindowLongPtr(window, com.sun.jna.platform.win32.WinUser.GWL_WNDPROC, procedure); 
```

您可能需要在自定义 User32 接口中声明 SetWindowLongPtr，该接口扩展了提供的接口。

# android - 安卓市场。Google Checkout 和银行帐户

> ID：10267339
> 
> 赞同：3
> 
> 时间：2012-04-22T10:55:05.250
> 
> 标签：android, google-checkout, google-play

请原谅这不是一个编程问题，但它仍然与软件开发有关，所以我希望它没问题。

为付费应用创建 Android 开发者帐户意味着注册一个 GoogleCheckout 帐户，这反过来意味着将其链接到来自这 31 个符合条件的国家之一的银行帐户。

有人可以为我澄清有关 Google Checkout 和与 GC 帐户相关联的银行的一些方面吗？所以这里有几个问题：

1.  如果我没记错的话，我在某个地方读到，您只能在每个月底结帐。我的问题是：Google 会自动将 GC 帐户中的钱汇入您的银行帐户吗？或者您可以根据需要将钱留在您的 GC 中，并手动选择何时以及将多少钱转入您的银行账户？

2.  如果您可以手动进行，那么您是否可以选择不将钱从 GC 帐户转入您的银行帐户，而是将其转入 PayPal 帐户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:04:13.013

1.  每个月的第二天都会自动转账。没有设置可以更改，也没有时间和金额，上个月的所有收入无论如何都会给你。

2.  谷歌坚持银行账户，没有Paypal，对不起。在您输入必要的信息后，Google 会通过（非常惊喜 =）向您的帐户**存入**1 美元并询问该存款的详细信息，进行特殊检查以确保它是您的帐户。

# asp.net-mvc - 无法显示我的 WebGrid 的列标题

> ID：10267340
> 
> 赞同：0
> 
> 时间：2012-04-22T10:55:31.303
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我有以下 WebGrid，只是不明白为什么我的列标题没有显示。我遵循了在线教程，它们看起来与以下内容相同：

```
 @grid.GetHtml(
    tableStyle: "grid",
    headerStyle: "gridhead",
    rowStyle: "gridRow",
    alternatingRowStyle: "gridRow",
    mode: WebGridPagerModes.All,
    columns: grid.Columns(
    grid.Column("Title","Title",format: @<text>@item.title</text>, style: "Title")
)) 
```

我的 CSS：

```
.grid
{
left:30px;
border-collapse:collapse;
color:Black;  
}

.gridhead
{
display:none;
background-color:Aqua;
} 
```

当我运行我的代码时，我只能看到电影的标题，但没有标题，甚至没有背景颜色。

编辑：

```
@grid.GetHtml(
    tableStyle: "grid",
    headerStyle: "gridhead",
    rowStyle: "gridRow",
    alternatingRowStyle: "gridRow",
    mode: WebGridPagerModes.All,
    columns: grid.Columns(
    grid.Column("Title","Title",format: @<text>@item.title</text>, style: "Title"),
    grid.Column("Rating","Rating",format: @<text>@item.rating</text>, style: "Rating")
)) 
```

我的 CSS：

```
.grid
{
left:30px;
border-collapse:collapse;
color:Black;  
}

.gridhead
{
display:block;
background-color:Aqua;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:08:40.593

`display:none;`从以下 css 角色中删除：

```
.gridhead
{
   display:none;
   background-color:Aqua;
} 
```

做了`display: block;`

# linux - 每月获取第一个和最后一个文件

> ID：10267346
> 
> 赞同：1
> 
> 时间：2012-04-22T10:56:09.707
> 
> 标签：linux, bash, sed, awk

基于这个问题[Group files and pipe to awk command](https://stackoverflow.com/questions/10262237/group-files-and-pipe-to-awk-command#comment13194691_10262237)

我有一组这样的文件：-

```
-rw-r--r-- 1 root root 497186 Apr 21 13:17 2012_03_25
-rw-r--r-- 1 root root 490558 Apr 21 13:17 2012_03_26
-rw-r--r-- 1 root root 488797 Apr 21 13:17 2012_03_27
-rw-r--r-- 1 root root 316290 Apr 21 13:17 2012_03_28
-rw-r--r-- 1 root root 490081 Apr 21 13:17 2012_03_29
-rw-r--r-- 1 root root 486621 Apr 21 13:17 2012_03_30
-rw-r--r-- 1 root root 490904 Apr 21 13:17 2012_03_31
-rw-r--r-- 1 root root 491788 Apr 21 13:17 2012_04_01
-rw-r--r-- 1 root root 488630 Apr 21 13:17 2012_04_02 
```

根据链接问题中的答案，我有一个包含以下代码的脚本，可以正常工作：-

```
DIR="/tmp/tmp"
for month in $(find "$DIR" -maxdepth 1 -type f | sed 's/.*\/\([0-9]\{4\}_[0-9]\{2\}\).*/\1/' | sort -u); do
  echo "Start awk command for files $month"
  power=$(awk -F, '{ x += $1 } END { print x/NR }' "$DIR/${month}"_[0-3][0-9])
  echo $power
done 
```

下面的命令本身会返回一个这样的列表：-

```
find /tmp/tmp -maxdepth 1 -type f | sed 's/.*\/\([0-9]\{4\}_[0-9]\{2\}\).*/\1/' | sort -u

2011_05
2011_06
2011_07
2011_08
2011_09
2011_10
2011_11
2011_12
2012_01
2012_02
2012_03
2012_04 
```

find 命令使用 GLOB 将一组文件传递给 AWK，以便作为批处理进行处理。

基于此，我希望能够运行以下剪切命令

```
head -1 FirstFile | date -d "`cut -d, -f7`" +%s

tail -1 LastFile | date -d "`cut -d, -f7`" +%s 
```

这些需要为每组的第一个和最后一个文件运行

因此，对于上面的 2012_03，需要为 2012_03_25 文件运行头部，而需要为 2012_03_31 运行尾部，因为这些是 3 月份集合中的第一个和最后一个文件。

所以基本上我需要能够获得每批的第一个和最后一个文件。

我希望我已经说得很清楚了，如果没有，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:18:54.350

```
DIR="/tmp/tmp"
for month in $(find "$DIR" -maxdepth 1 -type f | sed 's/.*\/\([0-9]\{4\}_[0-9]\{2\}\).*/\1/' | sort -u); do
      echo "Start awk command for files $month"
      IFS=, read start end power < <(awk -F, 'BEGIN{OFS = ","} NR == 1 {printf "%s,", $7} { x += $1; d = $7 } END { print d, x/NR }' "$DIR/${month}"_[0-3][0-9])
      echo $power
      date -d "$start" +%s
      date -d "$end" +%s
done 
```

以下是使用 here-doc 的方法，它应该适用于大多数 shell：

```
 read start end power <<EOF
$(awk -F, 'NR == 1 {printf "%s ", $7} { x += $1; d = $7 } END { print d, x/NR }' "$DIR/${month}"_[0-3][0-9]))
EOF 
```

# asp.net - ASP.NET - 在下载过程中移动文件

> ID：10267351
> 
> 赞同：1
> 
> 时间：2012-04-22T10:57:49.977
> 
> 标签：asp.net, multithreading, download, filesystems

场景中会发生什么：考虑 3 个时刻，T1 < T2 < T3。ASP.NET 应用程序首先受到在时间 T1 发送的请求 R1 的影响，该请求开始下载文件，并且下载通常会在时间 T3 完成。虽然下载仍在进行中，但在 T2 上，另一个请求会命中应用程序并尝试删除仍在下载的文件。会发生什么？哪个请求具有优先权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:03:46.697

如果正在下载文件，您将**无法**移动文件

它正在使用中。

它与线程优先级无关。

这是一个文件系统限制，可以胜过任何事情。

# android - 将图像顶部与 TextView 顶部对齐

> ID：10267352
> 
> 赞同：44
> 
> 时间：2012-04-22T10:58:28.523
> 
> 标签：android, android-layout, textview, drawable, vertical-alignment

我想创建一个布局，将图像的顶部与 TextView 的顶部对齐，如下所示：

```
---------  Text text text text text text text
| Image |  text text text text text text text
---------  text text text text text text text
           text text text text text text text
           text text text text text. 
```

我尝试通过设置`android:drawableLeft`我的图像来做到这一点，但这会使图像垂直居中：

```
 Text text text text text text text
---------  text text text text text text text
| Image |  text text text text text text text
---------  text text text text text text text
           text text text text text. 
```

这是否可能仅使用 TextView 或者我是否需要创建包含 TextView 和 ImageView 的 RelativeLayout？

这是我的 TextView 的 XML 布局，它给出了不正确的布局：

```
<TextView
    android:gravity="top"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/image"
    android:drawablePadding="8dp"
    android:text="@string/text" /> 
```

该`android:gravity="top"`属性似乎只影响文本，而不影响可绘制对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-03-06T19:57:29.487

您可以通过创建一个包装您的 Drawable 的自定义 Drawable 来将一个复合 Drawable 与顶部（或底部）对齐，然后通过覆盖方法来操作您的自定义 Drawable 的绘图`onDraw(Canvas)`。

下面的示例是最简单的示例。这会将图像与顶部对齐，但您也可以通过在 - 方法中实现所需的逻辑来使其与 TextView 的底部、左侧或右侧对齐`onDraw(Canvas)`。您可能还想在 中建立一个边距`onDraw(Canvas)`，以使您的设计实现像素完美。

示例用法：

```
GravityCompoundDrawable gravityDrawable = new GravityCompoundDrawable(innerDrawable);
// NOTE: next 2 lines are important!
innerDrawable.setBounds(0, 0, innerDrawable.getIntrinsicWidth(), innerDrawable.getIntrinsicHeight());
gravityDrawable.setBounds(0, 0, innerDrawable.getIntrinsicWidth(), innerDrawable.getIntrinsicHeight());
mTextView.setCompoundDrawables(gravityDrawable, null, null, null); 
```

示例代码：

```
public class GravityCompoundDrawable extends Drawable {

    // inner Drawable
    private final Drawable mDrawable;

    public GravityCompoundDrawable(Drawable drawable) {
        mDrawable = drawable;
    }

    @Override
    public int getIntrinsicWidth() {
        return mDrawable.getIntrinsicWidth();
    }

    @Override
    public int getIntrinsicHeight() {
        return mDrawable.getIntrinsicHeight();
    }

    @Override
    public void draw(Canvas canvas) {
        int halfCanvas= canvas.getHeight() / 2;
        int halfDrawable = mDrawable.getIntrinsicHeight() / 2;

        // align to top
        canvas.save();
        canvas.translate(0, -halfCanvas + halfDrawable);
        mDrawable.draw(canvas);
        canvas.restore();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T11:36:02.947

我认为，有一种比 3 个视图更简单、更快捷的方法。您需要为图标准备适当的 9patch，然后使用 FrameLayout。甚至可能只有**一个** `EditText`/`TextView`使用与背景相同的可绘制对象。[此答案](https://stackoverflow.com/a/17880082/657487)中描述了更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:26:01.977

尝试使用RelativeLayout......

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/imageView1"
        android:text="@string/text" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T05:33:09.710

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/imageView1"
        android:text="@string/text" />

</RelativeLayout> 
```

这样就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T08:05:24.837

使用`layout_alignTop`. 有了它，您可以将视图的顶部与另一个视图的顶部对齐

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/text" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/textView1"
        android:layout_toLeftOf="@id/textView1"
        android:src="@drawable/ic_launcher" />    

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-07T13:28:10.460

这对我有用：

```
class MyTextView @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null
) : AppCompatTextView(context, style) {
    private val leftDrawable = ContextCompat.getDrawable(context, R.drawable.checkmark)

    override fun onDraw(canvas: Canvas?) {
        super.onDraw(canvas)
        setBulletPoint(compoundDrawables[0], canvas)
    }

    private fun setBulletPoint(drawableLeft: Drawable?, canvas: Canvas?) {
        if (!TextUtils.isEmpty(text)) {
            leftDrawable?.let { drlft ->
                if (lineCount == 1) {
                    setCompoundDrawablesWithIntrinsicBounds(drlft, null, null, null)
                } else {
                    val buttonWidth = drlft.intrinsicWidth
                    val buttonHeight = drlft.intrinsicHeight
                    val topSpace = abs(buttonHeight - lineHeight) / 2

                    drlft.setBounds(0, topSpace, buttonWidth, topSpace + buttonHeight)
                    canvas?.apply {
                        save()
                        drlft.draw(canvas)
                        restore()
                    }
                }
            }
        }
    }
} 
```

# google-chrome - 如何检查 chrome 开发人员工具上的 jquery 代码？

> ID：10267354
> 
> 赞同：1
> 
> 时间：2012-04-22T10:58:58.320
> 
> 标签：google-chrome, google-chrome-devtools

我使用 Web 开发人员工具检查 html，然后查看附加到 html 元素的 css。事实证明，这是一个从其他网站学习的好过程（以及我自己的调试）

有没有办法检查javascript？那么当我选择元素时，能够看到与该元素相关的javascript吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:16:00.277

在[元素面板](https://developers.google.com/chrome-developer-tools/docs/elements)中，您可以找到与元素相关的所有信息，包括附加到它的事件。

您可以使用[元素面板中的控制台](https://developers.google.com/chrome-developer-tools/docs/console)来检查一个元素，使用 `dir(elementId)`该元素将具有给定 id 的对象转储为具有其属性的 JavaScript 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:01:43.997

您可以看到作为事件附加到页面上任何元素的 javascript 代码。在开发人员工具中，它位于元素选项卡中，每个元素都有“事件侦听器”——在那里您可以看到哪些事件以及哪些 javascript 将被捕获和执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T12:10:03.960

我遇到了同样的问题并且一直在徘徊，直到我找到了如何在 Chrome 上做到这一点：

**1.**打开检查器`Ctrl`++`Shift``i`

**2.**选择您要检查的元素

**3.**点击`Event Listeners`选项卡

**4.**单击您要检查的事件侦听器旁边的链接

**5.**点击`Pretty Print`（在窗口底部符号为 {}）

# clojure - Clojure：命名空间和-main

> ID：10267358
> 
> 赞同：4
> 
> 时间：2012-04-22T10:59:30.543
> 
> 标签：clojure, namespaces, scope, main, leiningen

我试图了解 -main 及其命名空间设置。-main 函数中的默认命名空间似乎是“用户”，但定义在同一文件中的主函数“上方”的函数可以被调用。他们被提及了吗？我正在运行它以找出：

```
(ns ack.doodle)

(defn fo [] "bar")

(defn -main [& args]
  (println (fo))                               ;; bar
  (println *ns*)                               ;; #<Namespace user>
  (println (get (ns-refers *ns*) 'sorted-map)) ;; #'clojure.core/sorted-map
  (println (get (ns-refers *ns*) 'fo))         ;; nil
  (println (get (ns-map *ns*) 'fo))            ;; nil
  (println (get (ns-publics *ns*) 'fo))        ;; nil
  (println (get (ns-interns *ns*) 'fo))        ;; nil
  (println (get (ns-aliases *ns*) 'fo))        ;; nil
  (println (ns-resolve *ns* 'fo)))             ;; nil 
```

调用 (fo) 成功，但显然符号 'fo 在当前命名空间 *ns* 中是未知的。这是怎么回事？

当我尝试将某些函数的名称以及一些参数作为命令行参数传递给 -main 时，这个问题就出现了。

### 重现步骤

*   将以上代码粘贴到文件 ./src/ack/doodle.clj
*   使用以下内容创建 ./project.clj：

    > (defproject ack "1" :main ack.doodle)

*   运行：

    > 来跑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:46:17.783

看起来 leiningen 通过从用户命名空间调用它来运行 (-main)，如下所示：(ack.doodle/-main)。因此 *ns* 绑定到用户命名空间。

尝试在项目根目录中运行 lein repl。然后运行 ​​(-main) 看看会发生什么。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:50:20.737

[我昨晚不是在#clojure 中](https://refheap.com/paste/2298)为你回答了这个问题吗？如果对答案有什么不满意的地方，你必须澄清你的问题。

# c# - C# 中的覆盖常量

> ID：10267363
> 
> 赞同：0
> 
> 时间：2012-04-22T10:59:58.787
> 
> 标签：c#

我在 c# 中有这样的课程：

```
public class Foo 
{
    public static readonly int SIZE = 2;
    private int[] array;

    public Foo
    {
        array = new int[SIZE];
    }

} 
```

和`Bar`类：

```
public class Bar : Foo
{
    public static readonly int SIZE = 4;

} 
```

我想要完成的是创建一个 Bar 实例，其数组大小取自覆盖`SIZE`值。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:02:12.047

你不能这样做。您可以使用虚拟方法：

```
public class Foo 
{
    protected virtual int GetSize(){return 2;};
    private int[] array;

    public Foo
    {
        array = new int[GetSize()];
    }
} 
```

也可以使用反射来查找静态字段`SIZE`，但我不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T11:04:26.693

您的 SIZE 常量是静态的，并且不会继承静态字段 - Foo.SIZE 和 Bar.SIZE 是两个彼此无关的不同常量。这就是为什么 Foo 的构造函数调用总是用 2 而不是 4 来初始化。

您可以做的是`protected virtual void Initialize()`在 Foo 中创建一个用 2 初始化数组的方法，并在 Bar 中覆盖它以用 4 初始化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:05:43.097

您不能继承静态字段；而是使用以下内容：

```
public class Foo
{
    protected virtual int SIZE
    {
        get
        {
            return 2;
        }
    }

    private int[] array;

    public Foo()
    {
        array = new int[SIZE];
    }
}

public class Bar : Foo
{
    protected override int SIZE
    {
        get
        {
            return 4;
        }
    }
} 
```

虚拟就像说“这是基类的默认值”；而 Override 改变了实现“Foo”的类的值。

# java - Rcaller 2.0 生成的绘图正在渲染和空输出，并且生成的文件（png）也是空的？

> ID：10267367
> 
> 赞同：2
> 
> 时间：2012-04-22T11:00:23.373
> 
> 标签：java, r, rcaller

Rcaller 2.0 生成的绘图呈现空输出，生成的文件 (png) 也是空的？发布我使用的代码的链接

[http://stdioe.blogspot.in/2011/07/rcaller-20-calling-r-from-java.html](http://stdioe.blogspot.in/2011/07/rcaller-20-calling-r-from-java.html)

我使用了上面指定链接中的代码，应用程序运行良好，但输出是一个空白控制台，没有绘制任何图表。它还会创建一个空的 png 文件。我是否遗漏了什么，或者是否有任何步骤可以消除我面临的问题。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:52:33.973

嗨，我得到了输出。

**解决方案：**我所做的工作是在我的 R 环境中安装 rjava。它解决了这个问题。

我认为即使您导入 rcaller jar 文件，也需要在您的 R 环境中安装 rjava。

我认为它是因为 R 调用者只会调用 R 环境，但您的 R 环境必须具有 rjava 才能完成其余的工作。

如果我错了，请纠正，欢迎更好的解释......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:55:15.983

rJava 和 RCaller 是独立的项目，您无需安装 rJava 即可使用 RCaller。

RCaller 只需要和使用 R Package Runiversal。类型

```
install.packages("Runiversal") 
```

在 R REPL 中并在运行 RCaller 之前按 enter。这就是你需要的。

如果生成的 R 代码无效，RCaller 将不会处理输出或生成的绘图。您还可以查看操作系统临时目录中生成的代码和输出文件。

# php - 从 Facebook 应用程序发布到 Facebook 页面而不登录到 Facebook

> ID：10267372
> 
> 赞同：2
> 
> 时间：2012-04-22T11:01:03.250
> 
> 标签：php, facebook, facebook-graph-api, login

我正在尝试使用 PHP发布到 Facebook**页面。**[我已经创建了一个 Facebook 应用程序，并且可以使用我在 facebook 用户墙中的每日自动发布中](https://stackoverflow.com/questions/7554956/daily-automatic-post-in-facebook-users-wall)找到的非常有用的代码发布到常规帐户**FEED**中。

总结一下：

```
$facebook = new Facebook(array('appId'  => 'xxxxxxxx',
                               'secret' => 'xxxxxxxxxxxxxx',));

$post = array('message'   => 'Message to user');

$post_id = $facebook->api("/$USER_ID/feed", "post", $post); 
```

任何 access_token 都不需要。我已从 PAGE（和常规帐户）授予我的应用程序以下权限：publish_stream,manage_pages

但是......这似乎不适用于 Facebook PAGE。我似乎无法从我的应用程序发布到它。我尝试了以下和其他组合，但 Facebook 没有返回任何错误消息，也没有发布：

```
$feed = '/MYPAGEID/feed';

$post_id = $facebook->api($feed, "post", $post); 
```

非常感激你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:08:27.630

在[Page 对象](http://developers.facebook.com/docs/reference/api/page/)的文档中它说：

> 要在发布到墙上时模拟页面（即作为页面发布，而不是当前用户），您必须使用具有 manage_pages 和 publish_stream 权限的 Page access_token

和

> 要以 Page 而非当前用户的身份执行以下操作，您必须使用 Page 的访问令牌，而不是通常用于读取 Graph API 对象的用户访问令牌。可以通过向具有 manage_pages 权限的 /USER_ID/accounts 发出 HTTP GET 来检索此访问令牌。这将返回用户具有管理权限的页面列表（包括应用程序配置页面），以及这些页面的 access_tokens。或者，您可以通过向具有 manage_pages 权限的 /PAGE_ID?fields=access_token 发出 HTTP GET 来获取单个特定页面的页面访问令牌，如上所述。除非另有说明，否则发布到页面还需要 publish_stream 权限。

此外，请务必查看[Authenticating as a Page](http://developers.facebook.com/docs/authentication/pages/)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:31:46.057

如果您想发布到您的页面，请务必从您的管理员帐户中获取正确的访问令牌。转到 Facebook 上的誓言页面生成正确的令牌。转到获取访问令牌，然后选择您想要的选项。

[http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)？

# objective-c - xcode 在一行中替换

> ID：10267373
> 
> 赞同：0
> 
> 时间：2012-04-22T11:01:27.913
> 
> 标签：objective-c, xcode, replace, nsstring

我想在文本出现之前替换一行中的所有空格，例如我有以下文本：

```
@"  Hello\n   world" 
```

我希望它看起来像这样：

```
@"Hello\nworld" 
```

你怎么能为每一行做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:08:10.733

您需要从字符串中修剪空格。检查[这个线程](https://stackoverflow.com/questions/5756256/objective-c-trim-spaces-from-end-of-a-string)。有一个解决方案。

# asp.net-mvc - 如何在MVC中将固定值插入表中

> ID：10267375
> 
> 赞同：0
> 
> 时间：2012-04-22T11:01:51.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想在表格中插入一个固定的日期。我怎样才能做到这一点 ？

```
 <div class="editor-label">
        Description :
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.Description, new { @class = "textboxes" })
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <div class="editor-label">
        Date :
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.Date, new { @class = "textboxes" }) /// I wanna be here a fixed date .
        @Html.ValidationMessageFor(model => model.Date)
    </div> 
```

我的控制器代码是：

```
public ActionResult Index(tblOrder tblorder)
        {
            if (ModelState.IsValid)
            {
                db.tblOrders.AddObject(tblorder);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewBag.fxBudjet = new SelectList(db.tblBudjets, "ID", "Budjet", tblorder.fxBudjet);
            ViewBag.fxServiceType = new SelectList(db.tblServiceTypes, "ID", "Service", tblorder.fxServiceType);
            ViewBag.fxStartTime = new SelectList(db.tblStartDates, "ID", "StartDate", tblorder.fxStartTime);
            return View(tblorder);
        } 
```

我需要更改我的控制器代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:05:12.657

```
@Html.DisplayTextFor(model => model.Date, new { @class = "textboxes" }) 
```

如果帖子中需要日期，您可以这样做

```
@Html.DisplayTextFor(model => model.Date, new { @class = "textboxes" })
@Html.HiddenFor(model => model.Date) 
```

或在 post 方法中，您可以使用 TryUpdateModel 并排除日期字段

**从您的更新中编辑**我会在控制器中设置模型的值，例如说您有一个班级年份，您想预填充年份值

```
 public ActionResult Create()
    {
        return View(new Year() { Value = DateTime.Now.Year });
    } 
```

再次，如果你想在帖子中使用它，你可以使用 hiddenfor 或者在帖子中重新生成它

如果仅在 post 方法中需要此字段，则更好的选择可能是创建没有该字段的视图模型，然后在 post 方法中具有一些映射逻辑

**编辑 2：**与 MVC 音乐商店一样，您确实应该有两种方法：获取和发布。我会假设它是为了创造。

```
[HttpGet]
public ActionResult Create()
{
    ViewBag.fxBudjet = new SelectList(db.tblBudjets, "ID", "Budjet");
    ViewBag.fxServiceType = new SelectList(db.tblServiceTypes, "ID", "Service");
    ViewBag.fxStartTime = new SelectList(db.tblStartDates, "ID", "StartDate");
    return View(new tblOrder() { Date = DateTime.Now });
}

[HttpPost]
public ActionResult Create(tblOrder tblorder)
{
    if (ModelState.IsValid)
    {
        db.tblOrders.AddObject(tblorder);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    ViewBag.fxBudjet = new SelectList(db.tblBudjets, "ID", "Budjet", tblorder.fxBudjet);
    ViewBag.fxServiceType = new SelectList(db.tblServiceTypes, "ID", "Service", tblorder.fxServiceType);
    ViewBag.fxStartTime = new SelectList(db.tblStartDates, "ID", "StartDate", tblorder.fxStartTime);
    return View(tblorder);
} 
```

然后在你看来像

```
@model tblOrder

@Html.BeginForm()
{
    @Html.DisplayTextFor(model => model.Date, new { @class = "textboxes" })
    @Html.HiddenFor(model => model.Date)
    ...other form stuff
    <input type="submit" value="Delete" />
} 
```

希望这能让您对如何修复代码有所了解

# nutch - Nutch 显示以下错误，该怎么办

> ID：10267376
> 
> 赞同：0
> 
> 时间：2012-04-22T11:02:09.467
> 
> 标签：nutch

```
enter code here

npun@nipun:~$ nutch crawl urls -dir crawl -depth 2 -topN 10
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/nutch/crawl/Crawl
Caused by: java.lang.ClassNotFoundException: org.apache.nutch.crawl.Crawl
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: org.apache.nutch.crawl.Crawl.  Program will exit. 
```

但是当我从终端运行 nutch 时，它显示

用法：nutch [-core] COMMAND
，其中 COMMAND 是其中之一：
为 Intranet 等爬取一步爬虫
等.....

请告诉我该怎么办

嘿 Tejasp 我做了你告诉我的，我改变了 NUTCH_HOME=/nutch/runtime/local/bin 也有 crawl.java 文件但是当我这样做的时候

```
 npun@nipun:~$ nutch crawl urls -dir crawl -depth 2 -topN 10
 [Fatal Error] nutch-site.xml:6:6: The processing instruction target matching "[xX]           [mM][lL]" is not allowed.
 Exception in thread "main" java.lang.RuntimeException: org.xml.sax.SAXParseException:     The processing instruction target matching "[xX][mM][lL]" is not allowed.
    at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1168)
at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1040)
at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:980)
at org.apache.hadoop.conf.Configuration.set(Configuration.java:405)
at org.apache.hadoop.conf.Configuration.setBoolean(Configuration.java:585)
at org.apache.hadoop.util.GenericOptionsParser.processGeneralOptions(GenericOptionsParser.java:290)
at org.apache.hadoop.util.GenericOptionsParser.parseGeneralOptions(GenericOptionsParser.java:375)
at org.apache.hadoop.util.GenericOptionsParser.<init>(GenericOptionsParser.java:153)
at org.apache.hadoop.util.GenericOptionsParser.<init>(GenericOptionsParser.java:138)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:59)
at org.apache.nutch.crawl.Crawl.main(Crawl.java:55)
    Caused by: org.xml.sax.SAXParseException: The processing instruction target matching "[xX][mM][lL]" is not allowed.
at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:180)
at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1079)
... 10 more 
```

它向我展示了这个结果现在是什么......？

我还检查了 nutch-site.xml 文件，我在其中进行了以下编辑

```
 <configuration>
 <property>
 <name>http.agent.name</name>
 <value>PARAM_TEST</value><!-- Your crawler name here -->
 </property>
 </configuration> 
```

先生，我照你说的做了，这次我用 'ant clean runtime' 编译了 nutch，nutch home 是

```
 NUTCH_HOME=/nutch/runtime/deploy/bin

    NUTCH_CONF_DIR=/nutch/runtime/local/conf 
```

现在当我运行相同的命令时，它给了我这个错误

```
 npun@nipun:~$ nutch crawl urls -dir crawl -depth 2 -topN 10
  Can't find Hadoop executable. Add HADOOP_HOME/bin to the path or run in local mode. 
```

我只想为我的最后一年项目创建一个可以从某些网站搜索某些东西的搜索引擎....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T09:31:16.373

似乎在 Nutch 版本 2.x 中，Crawl 类的名称已更改为 Crawler。我正在使用 Hadoop 运行 Nutch，所以我使用以下命令进行爬取：

```
hadoop jar apache-nutch-2.2.1.job org.apache.nutch.crawl.Crawler urls -solr http://<ip>:8983 -depth 2 
```

如果您单独使用 Nutch 进行爬网，则 nutch 脚本应引用新的类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:35:42.970

> 但是当我从终端运行 nutch 时，它显示

这将验证`NUTCH_HOME/bin/nutch`脚本是否存在于正确的位置。

请导出`NUTCH_HOME`并`NUTCH_CONF_DIR`

您要使用哪种模式的 nutch ？

1.  **本地模式**：作业在没有 hadoop 的情况下运行。你需要在 NUTCH_HOME/lib 中有 nutch jar。它以您使用的版本命名。例如。对于 nutch 版本 1.3，jar 名称是 nutch-1.3.jar。
2.  **hadoop 模式**：作业在 hadoop 集群上运行。您需要在 NUTCH_HOME 中有 nutch 作业文件。它以发布版本命名，例如。nutch-1.3.job

如果您碰巧有这些文件（对应于模式），则提取这些文件并查看其中是否确实存在 Crawl.class 文件。

如果 Crawl.class 文件不存在，则通过编译 nutch 源获取新的 jar/job 文件。

**编辑：**

1.  不要使用`ant jar`. 改为使用`ant clean runtime`。输出在`NUTCH_INSTALLATION_DIR/runtime/local`目录内生成。从那里运行 nutch。那将是你的`NUTCH_HOME`
2.  `JAVA_HOME, NUTCH_HOME and NUTCH_CONF_DIR`在运行之前导出所需的变量。
3.  我感觉 Crawl.class 文件不存在于 jar 中。请提取罐子并检查一下。仅供参考：提取 jar 文件的命令是`jar -xvf <filename>`
4.  如果在#2 之后，您看到 jar 中不存在该类文件，则查看您下载的 nutch 源代码是否具有 java 文件。IE。`nutch-1.x\src\java\org\apache\nutch\crawl\Crawl.java`如果不存在，请从互联网上获取并重建 nutch jar。
5.  如果在#2 之后，jar 文件有类文件并且您再次看到问题，那么环境有问题。尝试其他一些命令，例如[inject](http://wiki.apache.org/nutch/bin/nutch_inject)。在 hadoop.log 文件中查找一些错误。让我知道你看到了什么。

# ios - IOS：nsstring留一些空格

> ID：10267378
> 
> 赞同：2
> 
> 时间：2012-04-22T11:02:14.450
> 
> 标签：ios, xcode, nsstring, uitextfield

我有一个特殊的问题：

在一个 NSSTring 我有这个值“abcdef ghil”我想检查第一个字符是否是一个空格并删除它（用 stringbyreplacing ...？）和其他空间（从“f”到“g”）我想插入一个“——”

你能帮助我吗？

如果它可能有帮助；我从文本字段中获取此字符串...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T11:10:40.810

以下将执行您想要的操作，但需要注意的是它将修剪尾随空格以及前导空格，而不仅仅是单个前导或尾随空格字符。

```
NSString *original = @" abcdef ghil";
NSString *trimmed = [original stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSString *final = [trimmed stringByReplacingOccurrencesOfString:@" " 
                                                     withString:@"-"]; 
```

如果您只想删除前导空格，那么您可能应该查看上一个问题：[Cocoa - Trim allleading whitespace from NSString](https://stackoverflow.com/questions/3200521/cocoa-trim-all-leading-whitespace-from-nsstring)

**更新**：如果您真的只想删除字符串开头的一个空格，那么以下内容应该适合您：

```
NSString *original = @"  abcdef ghil";

NSString *trimmed = [original stringByReplacingOccurrencesOfString:@" "
                                                        withString:@"" 
                                                           options:0 
                                                             range:NSMakeRange(0, 1)];

NSString *final = [trimmed stringByReplacingOccurrencesOfString:@" " 
                                                     withString:@"-"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:12:44.260

要删除第一个空格，您可以使用：

```
- (NSString *)stringByReplacingCharactersInRange:(NSRange)range withString:(NSString *)replacement 
```

使用 NSMakeRange(0, 1) 创建的范围，即位置 0 和长度 1，您将用“”替换第一个“”。

使用此输出，您可以简单地执行以下操作：

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement 
```

有了这个，您将用“-”替换所有“”。

# actionscript-3 - 在 StageScaleMode.NO_SCALE 以外的模式下，有什么方法可以影响舞台的原始宽度？

> ID：10267379
> 
> 赞同：0
> 
> 时间：2012-04-22T11:02:23.017
> 
> 标签：actionscript-3, flash, dimensions, stage

舞台对象的 stageWidth 属性的文档指出：

> 如果在用户调整窗口大小时将 Stage.scaleMode 属性的值设置为 StageScaleMode.NO_SCALE，则舞台内容将保持其定义的大小，而 stageWidth 属性会更改以反映 SWF 文件占用的屏幕区域的新宽度大小。（*在其他缩放模式下，stageWidth 属性始终反映SWF 文件的**原始宽度***。）

但是有什么方法可以影响舞台的***原始宽度***，而无需重新编译 swf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:24:11.347

无法设置 stageWidth 和 stageHeight。它们基于 stagescalemode 和 html 容器。

或者可以说有一个有限的巨大画板，什么是 Flash 中的可显示区域（与 stageWidth 无关）。

如果你的 swf 有 StageScaleMode.NO_SCALE，它的 stageWidth 会告诉你它的容器的宽度。并且它总是会通过向你展示这个画板的或多或少来适应它的父 html 元素。但这不能直接由 as3 设置。为此，您需要 js。

如果您有任何缩放 swf 的 StageScaleMode。然后它变得混乱，因为有限的巨大画板被拉伸和扭曲以满足配件。as3中的一个像素不再意味着屏幕上的一个像素。但是该artbord的可见部分将始终是相同的。

# php - 在一封邮件中包含一些电子邮件

> ID：10267381
> 
> 赞同：1
> 
> 时间：2012-04-22T11:03:13.767
> 
> 标签：php, mysql, include, cron, send

我有一个分类网站，我正在制作一个 mod，当广告发布在他们订阅的类别和城市中时，它将向我的用户发送邮件。现在，我有一个问题。我已将此文件设置为每天使用 cronjob 运行一次。一天之内，我的网站每天发布 50 个广告，因此用户每天收到 50 封电子邮件。我想将所有 50 封电子邮件包含在一封邮件中，因此用户将收到 1 封电子邮件，但我不知道该怎么做。例如：每封电子邮件有一个链接，50 封电子邮件有 50 个链接。我希望用户只收到一封电子邮件，其中包含所有 50 个链接。我尝试了很多方法，但我做不到。每个建议都受到欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:18:39.703

这段代码太糟糕了，无法更改，编写新代码要简单得多。我可以建议您创建数组并将电子邮件信息放入其中，而不是立即发送。如果数组已包含具有相同电子邮件的项目，请不要添加新电子邮件，而是将信息添加到现有电子邮件。获取所有电子邮件后，遍历新数组并发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:46:07.107

只需将您的广告信息收集在一个数组中，您可以在其中将电子邮件设置为数组键。

```
$recipients = array();
while ($row = mysql_fetch_assoc($result)) {
  $email = $row["email"];
  if (!array_key_exists($email, $recipients)) {
    $recipients[$email] = array();
  }
  $recipients[$email][] = $row;
} 
```

在此之后，您有一个数组，每封电子邮件都有可变数量的 $row-entries。您只需使用 foreach 循环将这些条目添加到您的邮件模板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T12:07:29.723

由于您已经在为脚本运行 cronjob，只需设置一个适当的时间（清晨或晚上）并查询您存储分类广告中的帖子的数据库，选择最后 50 个帖子，将它们添加到电子邮件中并发送它们发送给注册的用户以接收最新的帖子电子邮件。看起来很简单，除非我误解了什么。

另外，我很好奇为什么（在上面的脚本中）你在每个小代码块之后跳进跳出 PHP。这很让人分心，坦率地说，我什至不想阅读代码。上面显示的内容没有任何理由离开 PHP - 除非这些都是您包含在此处显示的所有小片段。如果是这样，请忽略我的抱怨。

```
<?php } ?>
<?php } ?>
<?php } ?>
<?php } ?>
<?php } ?>
<?php } ?> 
```

/scratcheshead

# javascript - touchstart touch end on asp.net button not reading event

> ID：10267382
> 
> 赞同：1
> 
> 时间：2012-04-22T11:03:31.920
> 
> 标签：javascript, jquery, asp.net, touchstart

您好我正在尝试在移动 Safari 的移动 Web 应用程序中模拟悬停事件。基本上我有我的 asp.net 按钮：

```
<asp:Button ID="btnLogin" runat="server" CssClass="btn-login" /> 
```

现在使用 javasrcipt 我必须能够读取触摸开始和触摸结束事件：

```
 $('#coreContent_mainContent_Login_btnLogin').bind('touchstart touchend', function (e)   {
    e.preventDefault();
    $(this).toggleClass('btn-sign-up-hover');
}); 
```

然后我有这个 CSS 类，它正在与**btn-sign-up**切换：

```
.btn-sign-up {
   background: url(/images/sign-in-sprites.png) no-repeat -100px 0px;
   float: right;
   height: 20px;
   width: 104px;
   border: none;
   padding-bottom: 10px;
 }

.btn-sign-up-hover {
   background: url(/images/sign-in-sprites.png) no-repeat -100px -30px;
 } 
```

由于某种原因，课程没有改变......我的代码是错误的还是我的逻辑不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:40:45.870

两个问题：您是否使用了正确的选择器？您是否尝试过“视觉事件”来检查 jQuery 是否将事件添加到按钮？有时您可以使用 live() 而不是 bind() 来解决问题……试试看

# c# - 如何序列化委托

> ID：10267388
> 
> 赞同：5
> 
> 时间：2012-04-22T11:04:11.577
> 
> 标签：c#, serialization, delegates

让我们看一个网格填充的例子。

我们有**Column**类。它有一个委托**FormatCell**，它接受一些**Data**并将其转换为**string**。**FormatCell**委托在设计时是未知的——它可能由插件设置。

```
public class ColumnFormatter
{
    public Func<Data, string> FormatCell {get; set;}
    //...
} 
```

这是如何使用此类列的示例。

```
public class Table
{
    public List<Column> Columns;

    public List<List<string>> BuildTable(List<Data> dataRows)
    {
        var table = new List<List<string>>();

        foreach (var data in dataRows)
        {
            var line = new List<string>();                    
            foreach (var column in Columns)
            {
                line.Add(column.FormatCell(data));
            }

            table.Add(line);
        }

        return table;
    }
} 
```

现在每一列都应该保存它的状态。问题是如何序列化这个 FormatCell 委托？

PS我知道[这个问题](https://stackoverflow.com/questions/346111/is-it-possible-to-serialize-a-c-sharp-code-block)，但我的问题更具体。对于这种情况，也许有人有一个特定的可靠的磨合解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:27:48.157

为什么不直接使用继承？并且不要尝试序列化委托。像这样的东西：

```
[Serializable]
public abstract class ColumnFormatterBase
{
    public abstract string FormatCell(Data data);
}

[Serializable]
public class ColumnFormatter1: ColumnFormatterBase
{
    object SerializableProperty1 {get; set;}
    object SerializableProperty2 {get; set;}
    public override string FormatCell(Data data)
    {
        return // formatted result //;
    }
} 
```

即使 ColumnFormatterBase 的实现位于插件程序集中的某个位置，它也可以被序列化。

# php - PHP 文档鼠标悬停在 JetBrains PHPStorm 3.0

> ID：10267393
> 
> 赞同：5
> 
> 时间：2012-04-22T11:04:30.443
> 
> 标签：php, phpstorm

是否可以在 PHPStorm 3.0 中设置方法/类文档的鼠标悬停视图？

所以如果我开始输入一些方法名称，我会看到它的自动完成，但是任何地方都没有 PHP 文档？

```
/**
 * Some function.
 *
 * @param $status_code  Status code
 * @param null $message Message
 */
public function error($status_code, $message = NULL) {
    echo $status_code . " - " . $message;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-20T04:17:10.410

我知道标题上写着**3.0**，但是对于任何在寻找这个问题的人`PHPStorm 7`都可以通过**IDE Settings**`File > Settings`下的. 然后在**右窗格**中，向下滚动到**“其他”**子部分，并标记**在鼠标移动时显示快速文档****`Editor`**

 ******* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T11:23:19.310

显式代码完成是可能的：

![文件](../Images/13f2f8a16742f2529f6b189c0b3093cd.png)

但是，[尚不支持悬停文档](http://youtrack.jetbrains.net/issue/IDEABKL-5999)。******

# odata - Odata 服务 - 实体的数据未显示在浏览器中

> ID：10267396
> 
> 赞同：1
> 
> 时间：2012-04-22T11:05:03.893
> 
> 标签：odata

我是 Odata 服务的新手。我已成功包含 ADO.net 实体模型，并且在设计器类中，我已将 EntitySetRights 属性更改为 All。[使用 URL http://localhost:4245/WcfDataService1.svc](http://localhost:4245/WcfDataService1.svc)在浏览器中成功访问了 Web服务，但是当我尝试访问单个表（在我的情况下为“集合”）时，我没有显示属性。我得到的就是这个

收藏品

2012 年 4 月 22 日星期日凌晨 3 点 46 分 2012 年 4 月 22 日星期日凌晨 3 点 46 分

现在表中共有两条记录。请告诉我该怎么做才能将记录显示在浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:05:09.717

此行为取决于您使用的实际浏览器。如果是 IE，您将看到所谓的“提要视图”，因为有效负载是有效的 ATOM 提要。要查看底层原始 XML，请转到 Internet 选项 -> 内容 -> 提要和网页快讯设置，然后取消选中“打开提要阅读视图”。然后重新启动浏览器，您应该会看到来自服务的原始 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:58:01.197

我建议不要使用浏览器，而是使用 Fiddler 来测试 ad-hoc OData 请求。Fiddler 允许您操作请求标头以获取 Atom 或 JSON 中的响应，指定我们推荐的标头（如 MaxDataServiceVersion）等。

我写了一篇关于使用 Fiddler 访问 OData 的基本帖子；也许它会有所帮助： http: [//www.bitwhys.com/odata-101-constructing-http-requests-with-fiddler/](http://www.bitwhys.com/odata-101-constructing-http-requests-with-fiddler/)。

# hosting - 当 ip 关闭时，如何通过 denwer 托管

> ID：10267405
> 
> 赞同：0
> 
> 时间：2012-04-22T11:06:02.517
> 
> 标签：hosting

我通过我的 ip 地址 ipv4 重命名了我的文件夹，对于我和本地的其他人可以进入该站点，但非本地或其他国家的其他人无法进入我的服务器写入我的 ip，例如 http:http:// 192.168.0.102/ 我怎样才能打开我的denwer的访问权限？

http:http://192.168.0.102/ - 你能在这里输入并告诉我什么问题吗？为什么访问被拒绝？？，我怎么能看到是什么程序或计算机阻止了我的 ip？，如果我们有一个主计算机，我怎样才能访问我的 denwer 所在的位置？

对不起我的英语不好，但我需要帮助，谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:09:21.547

192.168.xx 是专用网络，如果不在局域网中，您将无法访问它们。

如果你想将你的本地服务器“打开”到互联网，你必须在你的路由器/防火墙中添加一个 NAT 规则。

然后，您将能够通过您的公共 IP 地址访问您的网络服务器。

# php - PHP5 中的 substr 函数

> ID：10267408
> 
> 赞同：0
> 
> 时间：2012-04-22T11:07:00.363
> 
> 标签：php

我正在开发一个应用程序，我需要使用下一个 PHP5 代码：

```
<?php

$Hurrengo_Hitza = 'word_3';

$Handiena_MarkID = 0;  
$Handiena_Hitzarentzat = -2;
$Hitza_Index = substr($Hurrengo_Hitza , 5);

    print $Handiena_MarkID . $Hitza_index . $Handiena_Hitzarentzat; 
```

我正在寻找`0 3 -2`的结果是，我得到的结果是`0-2`。哪个是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:10:39.563

这只是拼写错误和区分大小写的小例子。

```
print $Handiena_MarkID . $Hitza_index . $Handiena_Hitzarentzat; 
```

请注意，它说的是`$Hitza_index`而不是`$Hitza_Index`。由于 PHP 中的变量区分大小写，因此您需要将其更改为`$Hitza_Index`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:11:59.020

打印时 $Hitza_index 中有一个小写的 i，而分配时它是大写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:10:04.167

PHP 中的变量区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T11:10:05.710

尝试这个：

```
$Hitza_Index = substr($Hurrengo_Hitza, -1); 
```

# git - 如何探索 git@heroku 存储库？

> ID：10267409
> 
> 赞同：0
> 
> 时间：2012-04-22T11:07:53.510
> 
> 标签：git, heroku, github

我有一个托管@heroku 服务器的应用程序。他们将我的存储库显示为 **git@heroku.com:sharp-window-7156.git**。我在 github **https://github.com**上也有一个帐户。是否可以从 github 探索和编辑此存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:16:47.863

不，你不能用 Github 做到这一点。如果您使用基于 IDE 的 Git 工具，例如 Gitx 或 Tower，您应该能够浏览 heroku 存储库，否则您可以从 heroku 源中提取代码并在本地查看。

如果您练习良好的源代码控制/分支管理，尽管您通常可以确定 github 上的内容在 heroku 上。我通常总是将我的本地主分支维护为当前的“实时”代码并在分支中工作。当我很高兴上线时，分支会合并到 master 中，推送到 github 和 heroku。

# c# - 离线+在线数据库申请

> ID：10267414
> 
> 赞同：4
> 
> 时间：2012-04-22T11:08:56.490
> 
> 标签：c#, .net, asp.net-mvc, winforms, wcf

我正在为客户开发一个会计系统。此应用程序有一些特殊要求。我留下了特定于帐户的会计系统详细信息。我提到了那些让我感到困惑的观点。

该应用程序应在在线和离线环境中工作。如果用户正在工作并且突然应用程序脱机用户应该能够脱机工作。所有离线工作都存储在本地数据库中，并在下次应用程序连接到互联网时同步到中央数据库。这个应用程序有很多用户，所有用户都将同时处理相同的信息。

例如，如果一个用户输入了一个库存项目，那么另一个用户可能在那个时候也输入了相同的项目。应用程序应该能够验证正确的信息并禁止用户复制。

用户本地数据库必须在其他用户工作或不工作时随时更新。如果其他用户正在工作，则所有更新的信息都应该在本地数据库中可用，以确保用户离线时所有信息都得到更新。

问题是如何开发这种应用程序？有没有实现这个目标的标准方法？是否有任何标准或非标准模式来构建此类软件？

请注意，我正在使用 C# Dot Net 并打算为此应用程序使用 .NET Remoting 或 WCF 或 ASP.NET MVC。

任何形式的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:12:36.817

Tim McCarthy 的书[.NET Domain-Driven Design with C#: Problem - Design - Solution](https://rads.stackoverflow.com/amzn/click/com/0470147563)设计并实现了具有类似要求的系统。这有点过时了，但我认为会给你指明一个好的方向。（看第五页，他列出了本书设计的系统的要求，它们与你的相似。）

他使用 C#、WCF、Microsoft 的 Sync Framework、Smart Clients 等。他说，在本书印刷时，Visual Studio 不提供实体框架，因此他创建了自己的（这没关系，但我认为如果他能够包含 EF，这本书会好得多。）

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:32:06.357

我有两个答案给你。如果您在后端使用 Web API 或[Servicestack ，并在客户端使用 HTML5 和 upshotjs。](http://servicestack.net)这将为您将数据存储在浏览器中。

但是当您使用重要的帐户类型的东西时，我将使用富客户端类型的应用程序。后端将是相同的，但现在您将拥有两个数据库，一个在服务器上，另一个在客户端。用户将在客户端输入详细信息，但该数据将与服务器同步。为此，您也可以检查 NoSQL 选项。

如果需要更多详细信息，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T07:53:35.737

**概括：**

*   服务器端的 WCF
*   任何数据库和客户端框架都不错
*   客户端使用本地数据库，并且有后台进程来同步新数据并获得编辑权限。
*   服务器业务逻辑级别控制冲突并（自动）或通过通知客户端来解决它们。
*   在数据库级别解决冲突更好的情况很少。

**完整答案**

真的没有看到任何异国情调的插件有任何需要。

正如我所见，您正在使用服务器端同步构建客户端应用程序。WCF 将是非常好的选择，无论您使用什么应用程序框架都可以，即使它是 win8 Metro 应用程序）

当然会有2个数据库客户端和服务器端。您可以选择最适合您的应用程序需求的任何数据库。它可能是不同的服务器和客户端数据库。

客户端从服务器获取信息并使用 WCF API 将新数据（和数据更改请求）发布到服务器。

我建议让用户直接使用本地数据库并使用异步请求进行服务器同步。然后您的应用程序将运行更流畅，没有恼人的滞后。

所以你的应用程序有两个业务逻辑部分。一个与用户交互，提供并存储他的数据，另一个在后台同步所有数据。

数据冲突怎么办？我认为解决此类冲突的最佳方法是在您服务器的业务逻辑级别解决它们。在数据库级别解决冲突更好的情况很少。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T14:57:22.597

此链接[如何检测在线/离线浏览器...](https://stackoverflow.com/questions/3181080/how-to-detect-online-offline-event-cross-browser)可以帮助您检查浏览器在线/离线状态，以便您可以切换连接字符串。其余的东西可以作为正常的应用程序开发。

我正在考虑更改连接字符串，这是在在线和离线模式之间切换的最简单方法。但是你必须处理同步。

# haskell - 具有双重和通用编号的操作

> ID：10267415
> 
> 赞同：0
> 
> 时间：2012-04-22T11:09:07.580
> 
> 标签：haskell, numbers, polymorphism, double

我想编写一个函数，它对 double 和任何其他类型的支持乘法和加法的数字进行操作，结果产生 double 。下面的当然不能编译，因为 (*) 的类型是 t -> t -> t，所以不允许混合不同的类型：

```
f :: (Num a) => Double -> a -> a -> Double
f x a b = a*x + b 
```

我想要的是能够写出这样的东西：

```
f :: ...
f x a b = ... -- equivalent to a*x + b

f 1.0 (2 :: Int)    (3 :: Int)    -- returns 5.0
f 1.0 (2 :: Word32) (3 :: Word32) -- returns 5.0
f 1.0 (2 :: Float)  (3 :: Float)  -- returns 5.0 
```

我应该怎么做才能让它工作？或者也许我从根本上错了，不应该这样做？这很奇怪，但我在互联网上没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:27:17.950

在[RWH.chapter6](http://book.realworldhaskell.org/read/using-typeclasses.html#typeclasses.wellknown.numeric)中有一段很好的关于在某些数字类型之间转换数字的段落*（表 6.4）*。

```
f :: (Real a) => Double -> a -> a -> Double
f x a b = x * (cast a) + (cast b)
  where cast = fromRational . toRational 
```

似乎可行。

```
> f 1.0 (2 :: Int)    (3 :: Int)
5.0
it :: Double
> f 1.0 (2 :: Word32) (3 :: Word32)
5.0
it :: Double
> f 1.0 (2 :: Float)  (3 :: Float)
5.0
it :: Double 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:51:38.397

使用类型类的机制进行“重载”：

```
import Data.Word
import GHC.Float

class F a where f :: Double -> a -> a -> Double
instance F Int where f x a b = fromIntegral a * x + fromIntegral b
instance F Word32 where f x a b = fromIntegral a * x + fromIntegral b
instance F Float where f x a b = float2Double a * x + float2Double b

tests =
  [ f 1.0 (2 :: Int) (3 :: Int)
  , f 1.0 (2 :: Word32) (3 :: Word32)
  , f 1.0 (2 :: Float) (3 :: Float)
  ]
-- > tests
-- [5.0,5.0,5.0]
-- > :t it
-- it :: [Double] 
```

另见[http://www.haskell.org/haskellwiki/Converting_numbers](http://www.haskell.org/haskellwiki/Converting_numbers)。

# integration-testing - 集成测试中“P-path”和“MM-path”的定义是什么？

> ID：10267416
> 
> 赞同：0
> 
> 时间：2012-04-22T11:09:18.643
> 
> 标签：integration-testing

我在大学实验室工作有一个问题：集成测试中“P-path”和“MM-path”的定义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:17:18.810

**方法/消息路径：**

面向对象软件中的 MM-Path 是由消息链接的方法执行序列。

**原子系统功能 (ASF)**

原子系统函数 (ASF) 是一个以输入端口事件开始并以输出端口事件结束的 MM 路径

![在此处输入图像描述](../Images/d76271c26572eb45e182b4494f1d1632.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:04:55.440

P-path is `Procedure-path`，表示直接调用公共方法。MM-path is `Method-message path`，表示所有被调用的方法。

我没有找到文献资料，但我们的讲师说，这些定义来自`specificity in integration testing of object-oriented software`主题。

# url - Greasemonkey 脚本自动修改具有特定 id 值的 URL

> ID：10267423
> 
> 赞同：3
> 
> 时间：2012-04-22T11:10:14.897
> 
> 标签：url, replace, greasemonkey

我想将网址从“http://example.com/products/description/product123/index.html”更改为“http://example.com/f123456/products/description/product123/index.html”。对于来自特定站点的每个链接（只有一个），我需要像示例中那样更改它，在链接的基础之后添加一个代码，然后继续使用普通链接。

更具体地说，这里是我想用我的脚本修改的链接：[http](http://www.f64.ro/) ://www.f64.ro/是[http://www.f64.ro/f444618/](http://www.f64.ro/f444618/)每个链接、产品等.

我尝试了一些我发现的东西，但它不起作用，我不知道出了什么问题。

```
 // ==UserScript==
    // @name     F64.ro
    // @include  http://www.f64.ro/*
    // ==/UserScript==

    var targID      = "f444618/";
    var targLink    = document.querySelector ("#" + targID);
    targLink.href  += targID + "\/"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T12:47:14.760

stackoverflow 上有类似的问题，例如[How can you replace a link's target in Greasemonkey?](https://stackoverflow.com/q/2678615/33499) .

基于此，这里有一个示例，它将该站点上指向 stackoverflow.com 的所有链接修改为 www.stackoverflow.com。

```
// ==UserScript==
// @name           changeurl test
// @namespace      https://stackoverflow.com/
// @description    test for https://stackoverflow.com/q/10267423/33499
// @include        https://stackoverflow.com/*
// ==/UserScript==

var links,thisLink;
links = document.evaluate("//a[@href]",
    document,
    null,
    XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
    null);
for (var i=0;i<links.snapshotLength;i++) {
    var thisLink = links.snapshotItem(i);

    thisLink.href = thisLink.href.replace('https://stackoverflow.com/',
                                          'http://www.stackoverflow.com/');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T17:38:09.420

如果是固定数

```
// ==UserScript==
// @name           TESTE 2
// @namespace      TESTE 2
// @description    TESTE 2
// @include        http*://*stackoverflow*
// ==/UserScript==

for (var i=0,link; (link=document.links[i]); i++) {
    linkID = '/f444618'
    link.href = link.href.replace(location.hostname, location.hostname+linkID);
} 
```

如果数字从链接到链接发生变化，只需获取当前链接的 ID 并替换`linkID = 'f444618'`

# asp.net-mvc - 在具有 ASP.NET MVC 3 的类库中使用 MEF

> ID：10267426
> 
> 赞同：2
> 
> 时间：2012-04-22T11:11:02.473
> 
> 标签：asp.net-mvc, asp.net-mvc-3, plugins, mef, modular

我正在扩展基于 MVC 3 的解决方案。

基本上，该解决方案包含一个 MVC 3 项目以及一些用于管理业务/数据访问的类库项目。

我正在尝试使用 MEF 使应用程序基于插件。例如，我`UserManager`在 dll 项目中有一个类，我的插件定义如下：

```
[ImportMany]public List<IUserHooks> Plugins {get; set;}
foreach (var plugin in Plugins)
{
    Plugin.DoTheJob();
} 
```

如您所见，该类与 MVC 项目和控制器是分开的。该列表是我的`UserManager`班级定义的。

我知道最好的方法也是`UserManager`使用 MEF（可能在控制器的 ctor 中初始化它`public MainController(IUserManager UserManager)`），但由于我只想为解决方案添加插件支持，而不是从头开始编写，我更喜欢最快的快捷方式。

我应该如何定义我的 MEF`container`对象才能在我的类库中使用它。是否也有必要使用 MEF 制作 MVC 应用程序？我更喜欢对 MVC 应用程序进行最少修改的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:55:35.453

MVC3 已经支持服务位置。如果您不想重新定义某些基类，而只是想扩展，您可以添加一个`IDependencyResolver`使用 MEF 的实例。这样，您可以将其用作扩展应用程序的基础。我在[我的博客](http://www.fidelitydesign.net/?p=259)上写了一个例子。

使用 MVC3 的内置架构允许您`CompositionContainer`在启动时配置您的系统并将其暴露给基础架构的其余部分。

**但是**，现实情况是您可能不想在库中公开您的容器。事实上，您唯一应该做的就是简单地标记您的出口。使用 MEF 可以解决这个问题的原因是它包含在 .NET 4.0 的 BCL 中。通过不将您的类与 MEF 耦合（或者实际上，将您的类与服务定位器或控制反转容器耦合），它使您的代码更具可移植性、可测试性和解耦性。

# plugins - 在哪里可以找到 ReSharper 插件参考或文档？

> ID：10267428
> 
> 赞同：1
> 
> 时间：2012-04-22T11:11:32.510
> 
> 标签：plugins, sdk, resharper

我想开发一个开源的 resharper 6 插件，但我找不到对 API 的引用，resharper 至少可以说是一个巨大的产品，如果没有某种方向，找到如何做事几乎是不可能的。

我在哪里可以找到 API 文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:55:34.377

没有涵盖所有 Resharper 类和成员的公共参考文档。

如果您刚刚开始，那么我建议您下载 SDK 并查看包含的示例。[SDK](http://www.jetbrains.com/resharper/download/index.html)中有几个，它们应该可以帮助您开始开发一些 Resharper 插件功能。

您可以使用 VS 中的 Intellisense 和对象浏览器来*发现*要使用的类和方法，[插件开发指南](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)应该可以帮助您完成剩下的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:22:51.443

我不知道这是否是您提到的“业余”维基：

[http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)

您是根据封面来判断这本书，还是尝试了其中包含的信息并发现它需要？

在我看来，您可以通过单击蓝色方块中的主题来获得您寻求的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-08T05:45:39.217

[这是ReSharper 平台](https://www.jetbrains.com/help/resharper/sdk/Intro/ReSharperPlatform.html)的当前和公开的 ReSharper DevGuide 。“这是为 ReSharper 平台开发扩展的主要文档来源，该平台是 ReSharper 的一部分。

# php - Yii urlManager 和 jquery ajax GET 请求

> ID：10267433
> 
> 赞同：1
> 
> 时间：2012-04-22T11:11:55.260
> 
> 标签：php, ajax, yii

我在 urlmanager 中使用[seourlmanager](http://www.yiiframework.com/extension/seourlmanager/)类。
有一个带有 ajax 自动完成功能的字段使用[Multicomplete Extension](http://www.yiiframework.com/extension/multicomplete/)。
扩展发送 ajax 请求，例如“controller/action?term=searchterm”。
问题是url管理器（seourlmanager）无法处理get查询。
在 url manager 我有这个规则：

```
'controller/action/<term:.*>'=>'controller/action' 
```

如何调整 url 管理器以同时使用 Multicomplete Extension 和 seourlmanager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:30:19.723

尝试在您的配置文件中添加一个通用规则，如下所示：

```
'<controller:\w+>/<action:\w+>' => '<controller>/<action>', 
```

这将匹配`controller/action`带有或不带有附加查询参数的典型格式。

由于自动完成扩展使用`?term=searchterm`,`?term`不需要在规则中定义：

```
/controller/action?term=searchterm - CORRECT

/controller/action/term - INCORRECT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:51:11.237

我已更改 seourlmanager 类以在最后添加查询字符串：

```
protected $_query;  
public function init() {  
  ..  
  $this -> _query = (!empty($urlParts['query'])) ? $urlParts['query'] : '';  
  ..  
}  
protected function _connectUrlParts() {
  $scheme = $this -> _scheme . '://';

  $port = (!empty($this -> _port)) ? ':' . $this -> _port : '';
  if($this->_query=='')
    return $scheme . $this -> _host . $port . $this -> _path;
  else
    return $scheme . $this -> _host . $port . $this -> _path.'?'.$this->_query;
} 
```

# windows - 应用程序无法写入 %APPDATA%（但用户可以）

> ID：10267437
> 
> 赞同：5
> 
> 时间：2012-04-22T11:12:05.873
> 
> 标签：windows, winapi, visual-c++, appdata

我有一个应用程序需要在用户的 %APPDATA% 目录中创建其设置目录。为此，它使用类似于以下的代码：

```
std::string appDataBase = getenv("APPDATA");
std::string appDir = appDataBase + "\\MyDir";

std::cerr << "About to invoke _mkdir(" << appDir << ")" << std::endl;
int rv = _mkdir(appDir.c_str());
std::cerr << "_mkdir returned " << rv << ", errno = " << errno << std::endl; 
```

但是，当此代码运行时，`_mkdir`调用失败并`errno`设置为`EACCES`：

```
About to invoke _mkdir(C:\Users\mdm\AppData\Roaming\MyDir)
_mkdir returned -1, errno = 13 
```

我会假设这是一个简单的权限问题，除了 (1) 我可以在资源管理器中手动创建目录而没有任何权限问题，以及 (2) 如果我将完全相同的代码复制到项目中，则可以正常工作本身。

我已经对有关此问题的信息进行了广泛搜索，但只能找到有关一般权限问题的讨论，例如用户无法使用资源管理器访问/写入此文件夹。如果我以管理员身份运行我的应用程序中的代码，那么它的权限显然会发生一些奇怪的事情，但我不知道还要检查什么。我已使用 Process Explorer 检查并确认该应用程序正在使用我的用户帐户运行，该用户帐户对 %APPDATA% 目录具有完全写入权限，并且我已确保 %APPDATA% 树未设置为隐藏或只读。

是否可以在 Windows 应用程序上设置某种“有效用户 ID”或“有效权限”，这可能取决于构建配置或进程初始化中的某些内容？是否有任何其他因素会阻止特定应用程序写入 %APPDATA% 而其他用户进程可以？

**更新**

进一步的调查表明，行为上的差异与代码的内容无关，而*与可执行文件*在文件系统中的位置有关。我的应用程序是从`Development`我的用户目录中的文件夹内的源代码树构建的，并且`_mkdir`对该目录中的可执行文件的调用失败；但是，将 .exe 文件复制到新目录`C:\Development`可以使其正常工作（尽管移动现有`Development`目录不会）。简单的测试程序在里面`Documents\Visual Studio\Projects`，这似乎也是一个令人满意的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:40:12.917

Windows 有一组不同的（和大量的）用于更改安全上下文的函数。看[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663293%28v=vs.85%29.aspx)一些。

也许包含该代码的项目正在改变安全上下文？例如，如果程序作为公共访问服务器运行，我希望它会调用[`ImpersonateAnonymousToken()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378610%28v=vs.85%29.aspx).

# ios - 添加搜索栏后分页不起作用

> ID：10267445
> 
> 赞同：0
> 
> 时间：2012-04-22T11:13:06.367
> 
> 标签：ios, pagination, uitableview, uisearchbar

我有一个问题。我正在使用解析框架，我需要为我的 PFQueryTableViewController 添加一个搜索栏。我需要重写以下方法“节数”、“节中的行数”以及“索引路径处的行单元格”。

重写上述方法后，我发现即使启用了分页功能，“加载更多”标签也不会出现。只显示前 10 条（我设置每页 10 条）记录。我认为你应该有一些逻辑来获取总记录数，如果它大于 10，那么会出现更多的负载。那么我应该重写哪种方法才能使分页起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:28:10.500

如果您在节方法中超过了行数，则必须调用 super。

在我的代码中，我遇到了这个问题。我通过将代码如下解决

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    int rowCount = [super tableView:tableView numberOfRowsInSection:section];
    if (self.isEditing) {
        rowCount++;
    }
    return rowCount;
} 
```

# html - 相对容器问题内的firefox绝对位置

> ID：10267457
> 
> 赞同：29
> 
> 时间：2012-04-22T11:15:07.437
> 
> 标签：html, firefox, position

我正在使用表格来显示我的动态生成的数据，具体取决于用户输入，html 结构如下所示：

```
<table>
<tr>
    <td>.....</td>
    <td>.....</td>
    <td style="position:relative;"> //like this i set for all td in table
     <div style="position:absolute">//like this i set for all div in table
     <contents>
     </div>
   </td>
   <td>.....</td>
   <td>.....</td>
</tr>
</table> 
```

此处的 div 位于 body 的上角。上述所有这些样式均通过 javascript 应用，并且在 chrome、IE 中工作正常，但在 FF 中却没有，如下图所示。

![在此处输入图像描述](../Images/b1691cd6fce43829d232044297f1b25b.png)

如果我们将 div 的位置更改为绝对到相对，它将正确对齐，但我会在用户悬停 div 时制作悬停效果，因为位置很重要，并且此问题仅在 Firefox 中发生

为了您的快速参考，请查看 jquery [http://www.malsup.com/jquery/hoverpulse/](http://www.malsup.com/jquery/hoverpulse/)

我需要像这样必须在 FIREFOX 的表中实现，这意味着

*   **每个图像都放在一个 td 内**`//<td style="position:relative;">`

*   **如果用户将鼠标悬停在 td 上，图像应该会出现脉冲（缩放效果）。**

*   **当用户悬停时，它应该进入以前的状态。（正常大小）**

上面已经给出了表结构。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-22T11:18:40.950

表格单元格的定位是有问题的。通常的解决方案是保留`td`单独的样式，并`div`在其中放入您制作`position:relative`的 . 然后将内容放在该 div 中。

```
<td> <!-- no style at all -->
 <div style="position:relative;">
  <div style="position:absolute"> <!-- original div -->
   <contents>
  </div>
 </div>
</td> 
```

**编辑：**
我不知道你在追求哪种效果，但这里有一个 jsFiddle 演示了这个问题：http: [//jsfiddle.net/ygP7k/5/](http://jsfiddle.net/ygP7k/5/)
它有一个表格，每个表格单元格中几乎没有绝对定位的 div，即应该与右下角对齐。它适用于除 Mozilla 之外的所有浏览器。

但这里是一个更新的，我提到的额外的 div：http: [//jsfiddle.net/ygP7k/7/](http://jsfiddle.net/ygP7k/7/)
这工作完全相同，除了它也在 Firefox 中起作用。

你能用这个吗？这回答了你的问题了吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T07:52:11.397

我查看了**hoverplus jQuery 插件**，源文件显示了使用的方法：

```
// parent must be relatively positioned
this.parent().css({ position: 'relative' });

// pulsing element must be absolutely positioned
this.css({ position: 'absolute', top: 0, left: 0 }); 
```

由于这个插件的要求和您当前的设计需求，我建议使用**.transit() jQuery 插件**，它具有强大且易于使用的缩放功能，而无需此类要求。

我准备了两个**表格示例**，每个都有**9 个 Div**，正如您从标记中看到的那样，这再简单不过了！

[**带有表格中图像的缩放 Div 的 jsFiddle 演示**](http://jsfiddle.net/pRup7/)

在您查看我为您制作的**jsFiddle之后，您可以在**[此处](http://ricostacruz.com/jquery.transit/)的演示页面上看到所有**.transit()**插件功能。

**编辑：** jsFiddle 现在每个更新都需要 CSS 样式的`td`标记。`position:relative`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-19T21:40:41.000

我解决了添加的问题`display: block;`

```
.table td div {
  position:absolute;
  display:block;
} 
```

在你的情况下：

```
<table>
<tr>
    <td>.....</td>
    <td>.....</td>
    <td style="position:relative;"> <!-- like this i set for all td in table -->
     <div style="position:absolute; display:block"> <!-- like this i set for all div in table -->
     <contents>
     </div>
   </td>
   <td>.....</td>
   <td>.....</td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T07:56:26.473

您必须在表 1 中添加 2 个 div`position:relative`和 2nd with`position:absolute`

```
<td>
<div style="position:relative">
<div style="position:absolute">ddd</div>
</div>
</td> 
```

你的问题将得到解决检查小提琴

[http://jsfiddle.net/rizwanabbasi/2hyE8/1/](http://jsfiddle.net/rizwanabbasi/2hyE8/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T01:30:23.537

我有一个类似的问题。我将有问题的绝对 div 包装在一个绝对 div 中，从而解决了这个问题：

```
 <div class="thumbnail" style="..position:relative;..">  
        <div style="position:absolute;">
        <div class="thumbnail-heart" style="..position:absolute;..">
            <img src="../image.png" style="float:right;position:relative;..">
            ...
        </div>
        </div> 
```

# node.js - 如何在没有包装功能的情况下将 .coffee 构建到 .js 中

> ID：10267464
> 
> 赞同：2
> 
> 时间：2012-04-22T11:16:06.940
> 
> 标签：node.js, coffeescript, npm

我正在使用“coffee-script” npm 包：

```
var coffee = require('coffee-script');
var source = coffee.compile('target.js'); 
```

我已经在`source`变量中编译了js。但它也包含在自调用函数中。我不需要那个调用，我`Webmake`用于管理依赖项的 b/c，它包装每个文件.. 我将有 2 次调用。

```
"some.js": function (exports, module, require) {
  (function() {
    var n;
    n = 5;
    alert("hello world " + n);
  }).call(this);
} 
```

如您所见，我不需要咖啡脚本调用。PS我找不到任何关于`CoffeeScript.compile`作为第二个参数的选项的文档`.compile`。你能不能也给我提供这些信息。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T11:38:33.950

尝试将`{ bare: true }`其作为第二个参数添加到`compile`.

（不过，将代码包装两次不会造成任何伤害。这只是出于审美原因吗？）

# python - 显示和隐藏小部件

> ID：10267465
> 
> 赞同：25
> 
> 时间：2012-04-22T11:16:07.733
> 
> 标签：python, user-interface, tkinter

你如何在 Tkinter 中显示和隐藏小部件？我想要一个输入框，但不是一直显示它。有人可以向我展示在 tkinter 中显示和隐藏条目小部件和其他小部件的功能吗？我希望能够在没有多个帧的情况下做到这一点。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-22T12:50:10.187

[之前在 stackoverflow 上已经回答了这个问题](https://stackoverflow.com/q/3819354/7432)。简短的回答是，您可以使用[grid_remove](http://effbot.org/tkinterbook/grid.htm#Tkinter.Grid.grid_remove-method)如果之前通过网格添加小部件，它将导致小部件被删除。`grid_remove`记住小部件的位置，所以一个简单的`grid()`将它放回去而不必重新指定所有选项。

您还可以使用[pack_forget](http://effbot.org/tkinterbook/pack.htm#Tkinter.Pack.pack_forget-method)（如果使用 pack）和[grid_forget](http://effbot.org/tkinterbook/grid.htm#Tkinter.Grid.grid_forget-method)（如果使用 grid）。它们的工作方式与 grid_remove 类似，只是它们会导致忘记所有设置，这意味着您必须明确地将其放回屏幕上的正确位置。

另一种选择是利用小部件的堆叠顺序。您可以使用[lower](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.lower-method)方法将小部件隐藏在其兄弟之后，然后将其[提升](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.lift-method)到上方。有关示例，请参[见此答案。](https://stackoverflow.com/a/5928294/7432)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-14T19:47:19.010

我尝试了其他人发布的建议，发现我犯了一个简单的错误。您不能`.grid()`在声明要隐藏的小部件的同一行上调用。

为了澄清，我以前有这个：

```
self.helpExpansion = ttk.Label(self.helpMenu, text="Expansion Widget").grid(row=1, column=3, sticky=EW)
self.helpExpansion.grid_remove() 
```

但我得到了错误`AttributeError: 'NoneType' object has no attribute 'grid_remove'`。要修复它，我必须`.grid()`在新行上调用 ，如下所示：

```
self.helpExpansion = ttk.Label(self.helpMenu, text="Help Expansion")
self.helpExpansion.grid(row=1, column=3, sticky=EW)
self.helpExpansion.grid_remove() 
```

然后为了在显示和隐藏之间切换，我只是在调用`self.helpExpansion.grid()`（不需要函数参数）和`self.helpExpansion.grid_remove()`.

对我来说，它适用于两者`tk.Label`或`ttk.Label`. 我正在使用 Python `2.7.13`。希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-16T15:44:49.207

对于 TK 网格，我发现这两个辅助函数很有用。第一个将小部件的当前状态存储在项目内，然后将其删除。第二个将其添加回网格并恢复状态。

```
def grid_hide(widget):
  widget._grid_info = widget.grid_info()
  widget.grid_remove()

def grid_show(widget):
  widget.grid(**widget._grid_info) 
```

使用 Python 3.8 测试。

# php - 使用php将xml发布到rest api

> ID：10267471
> 
> 赞同：1
> 
> 时间：2012-04-22T11:16:57.770
> 
> 标签：php, xml, api, rest, post

我真的希望有人可以帮助我解决这个问题......

我需要使用 php 对 RESTful API 进行 xml POST，但我完全不知道从哪里开始。

我可以构建 xml，但是如何发布呢？我不能使用 cURL 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:01:08.953

您可以使用 file_get_contents()。`allow_url_fopen`必须在 php.ini 上设置。

```
$context = stream_context_create(array('http'=>array(
    'method' => 'POST'
    'content' => $myXMLBody
)));
$returnData = file_get_contents('http://example.com/restfulapi', false, $context); 
```

这是可能的，因为 PHP 使用自己的包装器抽象了流操作。为流操作函数（如 file_get_contents()）设置上下文允许您配置 PHP 如何处理它。

`method`除了和之外，还有更多参数`content`。您可以设置请求标头、代理、处理超时和一切。请参阅[手册](http://www.php.net/manual/en/context.http.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:01:34.073

几天前我遇到了同样的问题，最后有人想出了这个解决方案，但不要使用 $this->_request 来获取发布请求，因为它不适用于 xml，至少在我的情况下.

```
$service_url1 = 'http://localhost/restTest/respond/';
$curl1 = curl_init($service_url1);
curl_setopt($curl1, CURLOPT_RETURNTRANSFER, true);
$arr=array("key"=>$xml);
curl_setopt($curl1, CURLOPT_POST, 1);
curl_setopt($curl1, CURLOPT_POSTFIELDS,$arr);
echo $curl1_response = curl_exec($curl1);

curl_close($curl1); 
```

# objective-c - 下载时如何播放 QuickTime 电影？

> ID：10267475
> 
> 赞同：2
> 
> 时间：2012-04-22T11:17:11.217
> 
> 标签：objective-c, macos, cocoa, download, qtkit

我正在编写一个可以将不同来源的视频下载到本地硬盘的 mac 应用程序。到目前为止效果很好，但我希望允许用户在下载这些视频时播放这些视频。浏览 QTKit 的文档，我找不到任何方法可以让我将电影数据分段提供给`QTMovie`对象。

有没有办法使用 QTKit、AVFoundation 或其他一些系统框架来实现？我真的很想避免为此引入 ffmpeg 或其他第三方库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T02:23:55.983

问题在于 QuickTime 电影的工作方式。它们不是基于流的文件，因此一次提供一个块的信息通常没有用。相反，它们是基于原子的文件，并且允许原子以任何顺序出现。
根据 QuickTime 电影的创建方式，“moov”原子（提供重要信息并且是解释媒体数据所必需的）可以（并且通常是）位于文件的末尾。如果它在最后，则在完全下载之前无法播放电影。如果 moov 数据位于开头（例如，如果有人使用“准备 Internet”选项保存了电影），则 QuickTime 将能够立即开始播放文件。

只有像 MPG 传输流这样的格式是为流式传输或“渐进式下载”而设计的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:40:15.777

您可能应该使用 AV Foundation 框架而不是 QTKit。您要做的第一件事是阅读[AV Foundation Programming Guide](https://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)。尽管该指南主要提到了 iOS，但自 10.7 起，OS X 上就提供了 AV Foundation 功能。

# c# - 以编程方式触发嵌套控制事件

> ID：10267476
> 
> 赞同：2
> 
> 时间：2012-04-22T11:17:11.743
> 
> 标签：c#, wpf

我有一个奇怪的问题，不知道如何解决。我有 3 个 wpf 用户控件。说 GroupHolder、Group 和 Child。Child 是一个小型用户控件，其父级是 Group。GroupHolder 是 Group 的父级。

图解控制结构。

```
集团持有人
    |
    |
  团体
    |
    |
 |---------|----------------|
儿童 儿童 儿童

```

我正在以编程方式添加所有这些控件。我的问题是我必须将 Child 中触发的 click 事件路由到 GroupHolder。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:50:37.707

您可以简单地将事件定义为*冒泡*路由事件并在树的任何级别处理它。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms742806.aspx](http://msdn.microsoft.com/en-us/library/ms742806.aspx)

# android - 如何在活动之间进行调试？

> ID：10267481
> 
> 赞同：1
> 
> 时间：2012-04-22T11:18:09.233
> 
> 标签：android, debugging, android-activity

我在主类中有意调用其他活动

```
final Intent intent = new Intent(this, List.class);
intent.putExtra("email", email);
intent.putExtra("password", password);
**startActivity(intent);** 
```

我开始在 Intent 行上进行调试，但我无法通过其他活动

另一个是;

```
public class List extends Activity 
{ 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        **setContentView(R.layout.emaillist);**

        **final Bundle extras = getIntent().getExtras();**
        String email = extras.getString(MainActivity.email);
        String password = extras.getString(MainActivity.password);  
        listofmails(email , password );
    }

 public void epostaListeleme(String eposta, String sifre) 
    {
           ....
    } 
```

如何在调试时从 MainActivity 传递到 ListActivity？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:25:28.713

最好在其他活动上设置*断点。*为什么要调试我不明白的意图操作？

# netbeans - 为什么它没有达到断点？

> ID：10267482
> 
> 赞同：1
> 
> 时间：2012-04-22T11:18:12.947
> 
> 标签：netbeans, jsf-2, primefaces

我正在尝试放置 2 个 primeFaces panelGrid 框，一个用于现有用户，一个用于新用户。我注意到它停止达到我的断点，我无法弄清楚发生了什么。我开始从源代码中删减一些东西，直到它再次开始工作。

我发现了一件让我完全困惑的最奇怪的事情，如果有人能给我任何提示，我将不胜感激。支持 bean 主要有 getter 和 setter，只是检查登录的逻辑的最开始（在这个阶段基本上没有）。xhtml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Shalom Elias</title>
</h:head>
<h:body>
<h:form id="form">
    Shalom
    <h:panelGroup id="login" rendered="#{backing.renderPage(1)}">
        <p:panelGrid id="knownUser" columns="2">
            <f:facet name="header">
                Registered User
            </f:facet>

            <h:outputLabel for="zehut1" value="ID" />
            <p:inputText value="#{backing.buyer.tudatZehut1}" label="ID" id="zehut1" />

            <h:outputLabel for="pass1" value="Password" />
            <p:password value="#{backing.buyer.passWrd1}" label="Password" id="pass1" />

            <f:facet name="footer">
                <p:commandButton type="submit" value="Login" actionListener="#{backing.checkLogin}" />
            </f:facet>
        </p:panelGrid>
        <p:spacer height="2" />

        <p:panelGrid id="newUser" columns="4">
            <f:facet name="header">
                New User
            </f:facet>

            <p:inputText value="12345" />
        </p:panelGrid>
    </h:panelGroup>
    <h:panelGroup id="buyer" rendered="false">
        yet again
    </h:panelGroup>
</h:form>
</h:body>
</html> 
```

断点位于命令按钮的页脚部分的 panelGrid knownUser 中。我删除了所有原始代码并为 newUser panelGrid 留下了一个 inputText 框。这是踢球者：如果我将 value="12345" 作为初始值并按下命令按钮，它确实会达到断点。但是，如果我将 value="" 或 value 指向当前为空的支持 bean 值，它将不会达到断点。

由于目的是让现有用户登录，强迫他填写与他无关的信息是不可接受的。更重要的是，如果面板网格中的信息未连接到我正在按下的命令按钮，为什么无论如何它会有什么不同？我假设同时显示 2 个面板网格是合法的吗？无论如何，我将不胜感激有关可能出现问题的任何建议。

谢谢，伊兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:26:20.993

原因可能是验证或转换失败。那么你的听众将无法被联系到。在页面的某处放置一个`h:messages`标签，看看是否是这种情况。该标签将显示转换和验证错误。

# c# - c# windows app登录不使用SQL

> ID：10267484
> 
> 赞同：-1
> 
> 时间：2012-04-22T11:18:33.803
> 
> 标签：c#, sql, login

我正在编写需要登录的 ac# windows 应用程序，我打算使用我的网络服务器中的 sql 选择来简单地检查，但是如果你手动输入我不能的 IP 地址，我的虚拟主机似乎只允许远程 sql 访问为应用程序的每个用户做。

所以我的问题是，最好的解决方案是什么？我考虑过尝试对我网站上的页面进行 httprequest，然后可以检查使用 PHP 传递给它的登录详细信息并传回结果，但它需要是安全的，这看起来有点难以实现（我对 c# 相当陌生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:07:40.663

正如我在上面的评论中所说，仅出于安全原因，您永远不会希望使用该应用程序的任何用户访问您的 sql 服务器。我的建议是让客户端通过 SSL (https://) 连接到将检查使用 LINQ to SQL 提供的凭据的 ASP.NET 页面或 Web 服务。然后它可以向客户端发送通过/失败响应。

哦，为了上帝的爱和所有神圣的事物，[你的用户密码加盐和散列](http://goo.gl/NyucS)。

**注意：**如果您想使用此登录名来阻止用户在没有帐户/付款的情况下使用您的应用程序，上述所有方法都可以，但不足以阻止人们对应用程序进行逆向工程和破解（例如，欺骗它认为它已收到传递消息）。这种 DRM 完全是另一种游戏。

# haskell - 无法从此表达式派生（显示）

> ID：10267490
> 
> 赞同：5
> 
> 时间：2012-04-22T11:19:01.930
> 
> 标签：haskell

此代码不起作用

```
data Expression = Atom String
  | Sequence [Expression]
  deriving (show) 
```

我收到此错误：

```
$ runghc bug.hs
ghc: panic! (the 'impossible' happened)
  (GHC version 7.4.1 for x86_64-apple-darwin):
    nameModule show{tv a9J}

Please report this as a GHC bug:  http://www.haskell.org/ghc/reportabug 
```

我做错了什么，还是确实是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T11:51:38.890

类型类以大写字母开头，所以应该是`Show`，而不是`show`。虽然，GHC 应该给你一个像样的错误信息而不是恐慌，所以这部分[确实是一个错误](http://hackage.haskell.org/trac/ghc/ticket/5922)。

# php - 序列化数组或不序列化数组：如何存储调查

> ID：10267491
> 
> 赞同：1
> 
> 时间：2012-04-22T11:19:09.123
> 
> 标签：php, mysql, serialization

我正在构建一个调查构建系统，但不确定如何最好地存储数据。我可以看到我有两个选择：

1.  使用序列化数组，或
2.  将每个元素作为单独的行存储在相关表中

例如，通过使用第一个，我会将以下内容存储为序列化数组：

```
Array
(
    [name] => Survey
    [sections] => Array
        (
            [0] => Array
                (
                    [name] => Introduction
                    [pages] => Array
                        (
                            [0] => Array
                                (
                                    [text] => Please answer the following questions.
                                    [questions] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [text] => Are you male or female?
                                                    [answers] => Array
                                                        (
                                                            [0] => Male
                                                            [1] => Female
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

) 
```

我看到的好处是：

1.  它是集中式的，并且
2.  使用简单的查询可以很容易地在脚本中进行编辑，例如：

    ```
    UPDATE surveys SET data = '$serialized_array' 
    ```

我看到的主要缺点是：

1.  很难在脚本之外进行编辑（例如在使用 Navicat 时）

我还听说将数据存储为序列化数组是一种不好的做法。虽然我猜这完全取决于上下文（或者我从谁那里听到的都是错误的）。

通过使用第二个（将每个元素存储为相关表中的单独行），我将拥有这样的数据库结构：

**调查**

```
id name

1  Survey 
```

**部分**

```
id name         survey_id index

1  Introduction 1         0 
```

**页面**

```
id text                           section_id index

1  Please answer these questions. 1          0 
```

**问题**

```
id text                    page_id index

1  Are you male or female? 1       0 
```

**答案**

```
id text   question_id index

1  Male   1           0
2  Female 1           1 
```

我看到的好处是：

1.  有更好的内容分离，并且
2.  在脚本之外编辑更容易（例如在使用 Navicat 时）

我看到的主要缺点是：

1.  在脚本内部编辑更加困难（许多具有复杂逻辑的查询来处理重新排序的元素或重新构建的答案）

**我的问题是：**这两种方法中的哪一种（如果确实有的话）更适合手头的任务？我倾向于将数据存储为序列化数组，因为它似乎更易于构建且更易于控制。虽然我可以看到......*优雅*......将数据存储为相关表中的单独行。

如果它有任何相关性，那么在使用 JavaScript 构建调查的那一刻：使用（特别是）jQuery 添加、删除和重新排序 HTML 元素，然后以表格形式提交成品（`$_POST`数组是我的示例上面给出）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:23:38.077

以标准化形式存储数据可能是这里的方法。当您从用户那里收集答案时，通常是因为您想对结果进行一些分析。

例如，通过以标准化形式存储，很容易查看男性/女性响应者的百分比。

```
SELECT text, COUNT(*) AS count
FROM answers
WHERE question_id = 1
GROUP BY text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:40:03.463

我会问自己的问题是：

除了我现在想到的数据，我还会有其他用途吗？正如已经指出的那样，您可以将数据用于统计目的。

或者：还有其他人吗？！

只有在我正在构建某种“数据死胡同”的情况下，我才会使用序列化存储，即我知道数据将很少/永远不会再次被编辑。

或者，如果我知道将始终作为一个整体访问数据并且访问条目的某些部分几乎没有用处，我会进行序列化存储。

我的 2 美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:25:31.380

我会说方案一的适应性更强，方案二的效率更高，所以选择是在效率和适应性之间。效率是通过数据库传递变量来实现的，而不是解析序列化字符串的额外步骤。适应性，因为不同调查的数据结构可能不同，例如，无需实际修改数据库。此外，不需要定义数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T11:29:23.457

存储在数据库中比以序列化形式存储要好。此外，考虑将数据存储在可以在脚本之外轻松读取和编辑的配置文件中（json、yaml、ini 格式）。有一些简单的方法可以在 PHP 中读取和写入这些格式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-22T11:51:06.437

在我看来，最舒适的数据存储方式是在数据库中，原因如下：

1.  跨平台格式；
2.  SQL 是众所周知的标准；
3.  PHP + SQL 是一个非常好的组合；
4.  SQL数据库有统计；
5.  文学等形式的良好支持......

# php - 是否可以使用或在 codeigniter 表单验证中使用？

> ID：10267492
> 
> 赞同：5
> 
> 时间：2012-04-22T11:19:29.123
> 
> 标签：php, codeigniter, codeigniter-2

我有一个可以是十进制或数字的输入。我想使用这个规则：

```
$this->form_validation->set_rules('price', 'Price', 'decimal|numeric'); 
```

但我认为 form_validation 助手中的规则不适用于“或”语句。如果价格类似于“149.99”，则有效，但如果价格为“150”，则无效。

我是否遗漏了某些东西，或者是否可以使用类似的东西：

```
 $this->form_validation->set_rules('price', 'Price', 'decimal or numeric'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T11:48:05.823

CI，在验证时不允许混合数据类型。相反，创建您的自定义验证规则。

声明这样的规则

```
$this->form_validation->set_rules('price', 'Price', 'callback_decimal_numeric'); 
```

在控制器上创建方法后

```
 public function decimal_numeric($str)
    {
        if ($str <isdecimal&nummeric>) //Use your logic to check here
        {
            $this->form_validation->set_message('decimal_numeric', 'The %s field validation has failed');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:29:04.890

`The decimal rule requires a parameter to be passed`

[http://codeigniter.com/user_guide/libraries/form_validation.html#rulereference](http://codeigniter.com/user_guide/libraries/form_validation.html#rulereference)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-16T06:06:47.747

使用 ( **required|decimal** ) 这个例子:
`$this->form_validation->set_rules('lat', 'Latitude', 'required|decimal')`;

# imap - libcurl 和 imap

> ID：10267500
> 
> 赞同：10
> 
> 时间：2012-04-22T11:20:51.070
> 
> 标签：imap, libcurl

我注意到 libcurl 支持 IMAP，但在文档中没有找到任何内容，示例[http://curl.haxx.se/libcurl/c/imap.html](http://curl.haxx.se/libcurl/c/imap.html)很差。有谁知道如何在这个库中使用这个协议，如何下载邮件？问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-04T16:10:47.367

邮件列表中有一封很好的电子邮件，描述了此处的 IMAP 语法：http: [//curl.haxx.se/mail/lib-2013-03/0104.html](http://curl.haxx.se/mail/lib-2013-03/0104.html)

这是相关部分：

--url imap://mail.example.com/INBOX/;UID=1 - 选择用户的收件箱并获取消息 1

--url imap://mail.example.com/INBOX;UIDVALIDITY=50/;UID=2 - 选择用户的收件箱，检查邮箱的 UIDVALIDITY 是否为 50，如果是则获取消息 2

--url imap://mail.example.com/INBOX/;UID=3/;SECTION=TEXT - 选择用户的收件箱并获取消息 3，仅包含消息的文本部分

除了检索电子邮件之外，还可以将电子邮件传输到服务器。这是通过 IMAPs APPEND 命令实现的，并简单地利用 curl 的现有机制将数据上传到服务器：

--url imap://mail.example.com/OUTBOX -T email.txt

*   可以发出其他命令，例如： LIST 列出邮箱的子文件夹；检查以查看邮箱中存在哪些电子邮件；CREATE、RENAME 和 DELETE 操作子文件夹，STORE 更改电子邮件和其他的属性。一些例子如下：

--url imap://mail.example.com - 执行顶级文件夹列表

--url imap://mail.example.com/INBOX - 在用户的收件箱上执行文件夹列表

--url imap://mail.example.com -X "EXAMINE INBOX" - 在用户的收件箱上执行邮件列表

--url imap:// mail.example.com/INBOX -X "CREATE Sub-folder" - 在用户的收件箱中创建一个子文件夹

--url imap:// mail.example.com/INBOX -X "RENAME Sub-folder My-folder" - 将用户收件箱中的子文件夹重命名为 my-folder

--url imap:// mail.example.com/INBOX -X "DELETE Sub-folder" - 删除用户收件箱中的子文件夹

--url imap:// mail.example.com/INBOX -X "STORE 1 +Flags \Deleted" - 从用户的收件箱中删除消息 1

--url imap:// mail.example.com/INBOX -X "STORE 1 +Flags \Seen" - 将用户收件箱中的消息 1 标记为已读

除了使用 URL 语法来获取消息之外，还可以使用自定义请求机制来执行自定义 FETCH 操作。例如

--url imap://mail.example.com/INBOX -X "'FETCH 1 BODY[TEXT]" 将执行与

--url imap://mail.example.com/INBOX/;UID=1/;SECTION=TEXT

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T02:21:28.783

以下命令选择我的 Gmail 收件箱并发出问题`FETCH 1 BODY[TEXT]`以获取第一条（最旧的）邮件：

```
curl -v 'imaps://creaktive+gmail.com:dxdnbndeokykvkkd@imap.gmail.com:993/Inbox' 
```

我不太确定是否有一种简单的方法可以执行其他任务，例如列出邮箱或选择最新消息。

# mongodb - Mongo通过子对象查找项目

> ID：10267502
> 
> 赞同：1
> 
> 时间：2012-04-22T11:21:14.957
> 
> 标签：mongodb

Mongo通过子对象查找项目

```
 { "_id" : ObjectId("4f93aaddaca610f76b000000"),
   "count" : NumberLong(2),
   "items" : [
            {"count" : NumberLong(1),
             "options":{ "1":"track","2" : "track" } },

            {"count":NumberLong(2),
             "options":{"1":"as","2" : "sadf" } }
             ]
 } 
```

如何对子对象中的事物进行排序，例如限制每个请求的项目列表

我期望的结果是这个

```
 { "_id" : ObjectId("4f93aaddaca610f76b000000"),
   "count" : NumberLong(2),
   "items" : [
            {"count" : NumberLong(1),
             "options":{ "1":"track","2" : "track" } },
             ]
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:25:44.953

不，你不能那样做。现在查询嵌入式数组非常有限。有一天，我们将拥有[虚拟集合 (SERVER-142)](https://jira.mongodb.org/browse/SERVER-142)，我们将能够进行排序、跳过、限制和所有其他常见的事情。但现在我们有以下选择：

*   获取整个子数组并在应用程序中处理它；

*   将项目移动到它们自己的集合中（引用而不是嵌入）；

*   使用[聚合框架](http://www.mongodb.org/display/DOCS/Aggregation+Framework)（尚未发布）；

*   放弃这个想法。

# jsf - 数据表中没有显示数据

> ID：10267509
> 
> 赞同：0
> 
> 时间：2012-04-22T11:22:52.893
> 
> 标签：jsf, primefaces

当我尝试加载页面时，数据表为空。使用`<h:dataTable ... />`数据显示在行中。然而，经过进一步检查，列表实际上是写的......但它似乎直接在数据表的 value 属性中使用了列表的 toString() 。怎么了？

支持豆

```
@Named
@RequestScoped
public class QuestionTableBacking {

    @Inject
    private QuestionServiceLocal questionService;

    public List<Question> getAllQuestions() {
        return questionService.getAllQuestions();
    }
} 
```

小面文件

```
 <h:form>

           <p:dataTable value="#{questionTableBacking.allQuestions}" var="question" >
               <p:column>
                   <h:outputText value="#{question.description}" />
               </p:column>

               <p:column>
                   <h:link outcome="report" value="Rapporter" />
               </p:column>
           </p:dataTable>

        </h:form> 
```

这是我在萤火虫中看到的

```
<p:datatable value="[com.mycompany.myapp.domain.Question@7cf9175c, com.mycompany.myapp.domain.Question@456cd91d, com.mycompany.myapp.domain.Question@6d222286,..... var="question">
               <p:column>
               </p:column>

               <p:column><a href="/myapp/report.faces">Report</a>
               </p:column>
           </p:datatable> 
```

POM 文件（它们包含在正确的父元素中）

```
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.2</version>
    <scope>compile</scope>
</dependency>

<repository>
    <id>prime-repo</id>
    <name>PrimeFaces Maven Repository</name>
    <url>http://repository.primefaces.org</url>
    <layout>default</layout>
</repository> 
```

> 警告：此页面调用以前缀 p 声明的 XML 命名空间[http://primefaces.org/ui](http://primefaces.org/ui) ，但该命名空间不存在标记库。

完整文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://openfaces.org/">

<h:head>
    <title>Simple JSF Facelets page</title>
</h:head>

<h:body>

    <ui:composition template="templates/masterLayout.xhtml">
        <ui:define name="windowTitle">Question</ui:define>

        <ui:define name="content">
            <div id="page-intro">
                <h2>Titile</h2>

                <p>Blah blah</p>
            </div>

            <h:form>
                <div class="question-filter-container">
                    <o:inputTextFilter id="quesiton-filter" styleClass="input-text question-filter" for="question-table"
                                       expression="#{question.description}"
                                       promptText="" />
                </div>

                <o:dataTable value="#{questionTableBacking.allQuestions}" var="question" rowKey="#{question.id}"
                             id="question-table" pageSize="25" applyDefaultStyle="false"
                             cellspacing="0">
                    <f:facet name="below">
                        <o:dataTablePaginator id="paginator" pageNumberPrefix="Side" pageCountPreposition="av"
                                              styleClass="question-paginator" />
                    </f:facet>
                    <o:column>
                        <h:outputText value="#{question.description}" />
                    </o:column>
                    <o:column bodyClass="question-operations">
                        <h:link outcome="report" value="Report" />
                    </o:column>
                </o:dataTable>
            </h:form>

        </ui:define>
    </ui:composition>

</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:29:03.733

`#{question.description}`应该变成`String`当前迭代`question`对象`.description`属性中的值，这不是您在输出中看到的吗？如果是这样的话，那一切都好……

**编辑**

在查看您的问题更新后，您似乎还没有将 primefaces jar 添加到您的项目中......

您是否已将 xmlns:p="http://primefaces.org/ui 添加到您的 xhtml 文件中？

# java - Servlet：不同的 PrintWriter.print() 和 PrintWriter.println()

> ID：10267511
> 
> 赞同：-1
> 
> 时间：2012-04-22T11:23:13.270
> 
> 标签：java, servlets, printwriter

```
HttpServletResponse response;
PrintWriter out = response.getWriter();
out.print("Hello");
out.println("HelloWorld"); 
```

我的问题似乎很愚蠢，但是在 Servlet 中，我看到 print() 和 println() 都做同样的事情！

如果你想去另一行，你必须把`<br>`标签放在字符串的末尾。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T11:25:08.170

`println``\n`在打印的文本之后附加一个新行 ( )。新行不会在 HTML 中解释，因此您不会看到呈现的 HTML 的输出`println`和`print`呈现的 HTML 之间的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T11:25:27.230

他们不做同样的事情。`println`在字符串之后附加一个行尾标记。

浏览器不呈现行尾的事实是另一个问题。根据您输出的内容类型，它可能重要或不重要。

# jquery - 如果不显眼的验证无效则显示 div，如果在 MVC 3 中有效则隐藏它

> ID：10267515
> 
> 赞同：4
> 
> 时间：2012-04-22T11:23:49.650
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, unobtrusive-javascript, unobtrusive-validation

这是我的编辑视图的一部分：

```
<dt>
@Html.LabelFor(model => model.MainModel.StartDate)
</dt>
<dd>
@Html.TextBoxFor(model => model.MainModel.StartDate)
@Html.ValidationMessageFor(model => model.MainModel.StartDate)
    <div class="targetDiv"> My content </div>
</dd> 
```

所以你们都知道，当`StartDate`我的模型中的字段无效时，不显眼地显示错误消息，如果有效则隐藏它。现在我想在这个过程中添加另一个动作。`StartDate`如果值是无效的显示`"targetDiv" div`并且如果值是有效的，我需要`StartDate`隐藏它。你的建议是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T12:26:41.693

[您可以使用ModelState.IsValidField 方法](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.isvalidfield.aspx)检查字段有效性

```
<div class="targetDiv" @if (Html.ViewData.ModelState.IsValidField("StartDate"))
{
     <text>style="display:none"</text>         
}>
     My content 
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T12:25:06.960

您必须首先验证您的表单（假设它的 id 为 myForm 并且以下代码包含在保存按钮单击函数中）：

```
$("#myForm").validate();

if ($("#myForm").valid()) {
  $("#targetDiv").css("display", "none");
}
else {
    if ($("[id='MainModel.StartDate']").hasClass("input-validation-error") {
        //note the strange ID selector above, that's because it's got a . in :)
        $("#targetDiv").css("display", "block");
    }
    else {
        $("#targetDiv").css("display", "none");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:26:04.143

不显眼的验证会向您的验证元素添加一个 css 类，这就是它确定是否显示或隐藏验证消息的方式。这是一个例子：

```
<div class="editor-label">
            <label>Start date</label>
            <input class="text-box single-line" data-val="true" data-val-required="Must not be Empty" id="StartDate" name="StartDate" type="text" value="">
            <span class="field-validation-valid" data-valmsg-for="StartDate" data-valmsg-replace="true"></span>
</div>

<div class="targetDiv">Your div shown only if StartDate is invalid</div> 
```

这就是您的 html 在源代码中的外观。在 StartDate 输入中写入无效数据后，它看起来会略有不同，请注意添加到输入和 span 元素的类：

```
<div class="editor-label">
    <label>Start date</label>
    <input class="text-box single-line input-validation-error" data-val="true" data-val-required="Must not be Empty" id="StartDate" name="StartDate" type="text" value="">

    <span class="field-validation-error ui-state-error-icon ui-icon-alert" data-valmsg-for="StartDate" data-valmsg-replace="true"></span>
</div> 
```

您可以检查 span 元素是否具有**field-validation-error**类并显示您的*targetDiv*。我模仿了不显眼的验证的工作原理并提供了工作示例：

​</p>

```
$(function(){
    $('.targetDiv').hide(); //hide your div
    $('#StartDate').change(function() { //capture change event for your input StartDate
          $(this).addClass('input-validation-error'); //add unobtrusive css class for not valid
           $(this).next().removeClass('field-validation-valid').addClass('field-validation-error ui-state-error-icon ui-icon-alert'); //add unobtrusive css class for not valid on span                 
         if( $(this).next().hasClass('field-validation-error')) //check if span has a error class on it
         {
             $('.targetDiv').show();      //show your div    
         }
    });
});​ 
```

在现实世界的示例中，您只需要使用：

```
$('#StartDate').change(function() {             
         if( $(this).next().hasClass('field-validation-error'))
         {
             $('.targetDiv').show();          
         }
    }); 
```

这是 jsFiddle：http: [//jsfiddle.net/mgrcic/Zj6zS/](http://jsfiddle.net/mgrcic/Zj6zS/)

问候。

# android - Eclipse 中的传输初始化错误（尝试更新插件）

> ID：10267516
> 
> 赞同：3
> 
> 时间：2012-04-22T11:23:53.427
> 
> 标签：android, eclipse

我正在尝试在 Eclipse 中更新 Android ADT

帮助 -> 检查更新

这给了我以下错误消息： [http ://cl.ly/3Z1O3h1e3A1b2F3v091D](http://cl.ly/3Z1O3h1e3A1b2F3v091D)

正如您从错误消息中看到的那样，我什至尝试通过 zip 文件进行更新，这也给了我： **传输初始化错误。**

我的连接没有任何问题，因为我可以在 Eclipse 的内部浏览器中加载网页。如果我尝试使用存档文件或直接通过互联网进行更新，我会收到相同的错误消息...

这是文本中的错误消息：

```
Some sites could not be found.  See the error log for more detail.
Unable to read repository at jar:file:/C:/Users/njaal/Downloads/ADT-18.0.0.zip!/content.xml.
Transport initialization error.
Unable to read repository at https://dl-ssl.google.com/android/eclipse/content.xml.
Transport initialization error. 
```

编辑：这是在 windows 7 64 位下，Eclipse Indigo（适用于 Java 开发人员）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-08T15:21:55.840

不太确定根本原因，但是以**管理员身份运行 Eclipse**的建议为我解决了这个问题。

[![在此处输入图像描述](../Images/710019157cef6493548d0923c6919440.png)](https://i.stack.imgur.com/tx00w.jpg)

从 Eclipse 更新失败中被盗，[并显示消息“访问权限不足，无法应用此更新”](https://stackoverflow.com/questions/22963884/eclipse-update-failing-with-message-insufficient-access-privileges-to-apply-thi)

# c# - PowerShell - 检查解决方案配置调试/发布

> ID：10267517
> 
> 赞同：0
> 
> 时间：2012-04-22T11:23:55.110
> 
> 标签：c#, powershell

如何使用 PowerShell 从解决方案中检查发布设置（发布/调试）？

例如，我的解决方案是一个 SharePoint WSP 文件。

可以从解决方案中获取此信息吗？

# jquery - 点击打开自动完成

> ID：10267519
> 
> 赞同：2
> 
> 时间：2012-04-22T11:24:21.833
> 
> 标签：jquery, events, autocomplete

我正在使用 Jquery 自动完成：[自动完成](http://jqueryui.com/demos/autocomplete/)

我想用事件点击打开自动完成：

```
$(div).live('click', function(e){

...?????....

}); 
```

我该怎么做才能打开它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T11:38:27.523

从[搜索](http://jqueryui.com/demos/autocomplete/#method-search)方法的文档中：

> 可以使用空字符串和 minLength: 0 调用以显示所有项目。

所以，你的代码应该是：

```
$(div).live('click', function(e) {
  $(div).autocomplete("option", "minLength", 0).autocomplete("search", "");
}); 
```

# java - 扩展上的方法返回更改

> ID：10267522
> 
> 赞同：0
> 
> 时间：2012-04-22T11:25:10.637
> 
> 标签：java, oop

我有一个`ClassA`带有一些返回项目的方法的类：

```
class ClassA {
    ClassA item(...) {...}
    Vector<ClassA> list(...) {...}
} 
```

这些方法处理输入并动态生成这些项目。现在想象我扩展了这个类：

```
class ClassB extends ClassA {
    ...
} 
```

在任何情况下我都不会覆盖 item() 或 list() 方法，但我希望它们返回一个`ClassB`项目（或向量）而不在返回时进行强制转换（这是我现在当前的解决方案）。有什么办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:34:36.853

我将创建第三个类 (ClassC) 来保存您的 ClassA 或 ClassB 项目，它使用如下泛型类型进行参数化：

```
class ClassC<T extends ClassA> {
    T item(...) {...}
    Vector<T> list(...) {...}
} 
```

现在，您可以使用 ClassA 或 ClassB 类型实例化 ClassC，而不必担心类转换。

# java - Android，压缩图像

> ID：10267523
> 
> 赞同：3
> 
> 时间：2012-04-22T11:25:25.410
> 
> 标签：java, android, image, compression

我正在通过 wifi 或移动网络通过网络发送图像以存储在服务器中并再次检索。我已经这样做了，但是由于相机拍摄的图像的大小，它使我的应用程序变慢，只是要指出我正在打开画廊并从那里拍摄照片，而不是直接从应用程序拍摄照片。我注意到从相机和图库中拍摄的来自whatsapp 的图像已被压缩到大约。100kb。

目前我的代码获取一个文件并将其转换为字节然后发送它。这是获取文件并将其转换为字节的方法。

```
private void toBytes(String filePath){
    try{
        File file = new File(filePath);
        InputStream is = new BufferedInputStream(new FileInputStream(file));  
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        bytes = new byte[(int) filePath.length()];
        int bytes_read;
        while((bytes_read = is.read(bytes, 0, bytes.length)) != -1){
            buffer.write(bytes, 0, bytes_read);
        }
        is.close();               
        bytes = buffer.toByteArray();
    }catch(Exception err){
        Toast.makeText(getApplicationContext(), err.toString(), Toast.LENGTH_SHORT).show();
    }
} 
```

所以我的问题是我将如何在发送之前压缩我的图像？此外，我不需要图像来保留高像素数，因为当应用程序使用图像时，它只会占用设备屏幕的一半。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:34:52.480

`BitMap` [http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)类有一个`compress`方法。但是您可能需要缩放图像`createScaledBitmap`，这也可以在同一类中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:50:08.350

尝试使用以下方法：

```
 //decodes image and scales it to reduce memory consumption
    //NOTE: if the image has dimensions which exceed int width and int height
    //its dimensions will be altered.
    private Bitmap decodeToLowResImage(byte [] b, int width, int height) {
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new ByteArrayInputStream(b), null, o);

            //The new size we want to scale to
            final int REQUIRED_SIZE_WIDTH=(int)(width*0.7);
            final int REQUIRED_SIZE_HEIGHT=(int)(height*0.7);

            //Find the correct scale value. It should be the power of 2.
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE_WIDTH || height_tmp/2<REQUIRED_SIZE_HEIGHT)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new ByteArrayInputStream(b), null, o2);
        } catch (OutOfMemoryError e) {
        }
        return null;
    } 
```

# c - Valgrind 条件跳转或移动取决于未初始化的值

> ID：10267528
> 
> 赞同：-1
> 
> 时间：2012-04-22T11:25:39.633
> 
> 标签：c, gdb, valgrind

我正在编写一个程序来从 txt 文件中选择单词。编译标志：-std=gnu99 该程序有一些分段错误，我正在使用 GDB 和 Valgrind 进行调试。Valgrind 标志： --track-origins=yes --leak-check=full --show-reachable=yes 我对 Valgrind 错误消息有一些疑问

首先这里的代码解释

*   struct character：是包含所有以特定字母开头的单词的结构，例如 a 或 b 或 c，ecc。
*   include 函数：当你必须在特定结构中添加一个单词时，insert 函数会扫描单词数组以查看是否有该单词出现。如果是，它会增加字数。否则它会将单词添加到数组中。如果没有空间，该函数会增加数组空间。
*   主要是安静的线性。您可以看到字母表中每个字符的结构，您可以看到用于读取文本文件行的 while 循环。

```
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <errno.h>

struct character
{
    char **words;
    int *count;
    int arrayCounter;
};

/*
 * if finds in the array the word to add, then increase counter
 * if it does not find the word, it puts the word non la trova ce la mette nel primo slot che è NULL, quindi vuoto.
 * se non trova slot vuoti aumenta la dimensione degli array e poi torna al punto due.
 */
void insert(struct character *character, char *word)
{
    while(1){
    printf("inserting word %s\n", word);
    for(int i = 0; i < character->arrayCounter; i++)
    {
        printf("%d\n",i);
        if((character->words[i] != NULL) && (strcmp(character->words[i], word) == 0))
        {
            printf("Insert: I found a corrispondence of word in the array, now I increase the word counter in the struct\n");
            printf("Original word: %s word to compare %s\n", character->words[i], word);

            character->count[i] = character->count[i] + 1;
            printf("Word %s counter: %d\n", character->words[i], character->count[i]);
            return;
        }

    }

    ciclo:
    for(int i = 0; i < character->arrayCounter; i++)
    {
        printf("ciclo: %d\n", i);
        if(character->words[i] == NULL)
        {
            printf("Insert: ho trovato un posto vuoto nello slot %d e ci metto la word %s\n", i, word);
            character->words[i] = malloc((strlen(word) + 1) * sizeof(char));
            strcpy(character->words[i], word);
            character->count[i] = character->count[i] + 1;
            printf("Insert: controllo, la word è %s, il suo contatore è %d\n", character->words[i], character->count[i]);

            printf("\n\n\n\n");
            return;
        }
    }

    printf("!!!Increasing arrayCounter dimension, now it is %d\n", character->arrayCounter);
    character->words = realloc(character->words, (character->arrayCounter + 1) * sizeof(char*));
    character->count = realloc(character->count, (character->arrayCounter + 1) * sizeof(int));
    character->arrayCounter++;
    printf("!!!Dimension increase, arrayCounter is %d\n", character->arrayCounter);
    /*goto ciclo;*/}
}

int main()
{
    FILE *fileToRead;
    if((fileToRead = fopen("/home/caterpillar/Universita/workspace_Progetti/SO_ricercaParole/testo2.txt", "r")) == NULL)
    {
        printf("error in opening file\n" "%s\n", strerror(errno));
        exit(EXIT_FAILURE);

    }

    struct character a;
    memset(&a, 0, sizeof(a));
    a.arrayCounter = 1;
    a.words = malloc((a.arrayCounter)*sizeof(char*));
    a.count = calloc(a.arrayCounter,sizeof(int));

    struct character c;
    memset(&c, 0, sizeof(c));
    c.arrayCounter = 1;
    c.words = malloc((c.arrayCounter)*sizeof(char*));
    c.count = calloc(c.arrayCounter,sizeof(int));

    struct character e;
    memset(&e, 0, sizeof(e));
    e.arrayCounter = 1;
    e.words = malloc((e.arrayCounter)*sizeof(char*));
    e.count = calloc(e.arrayCounter,sizeof(int));

    struct character g;
    memset(&g, 0, sizeof(g));
    g.arrayCounter = 1;
    g.words = malloc((g.arrayCounter)*sizeof(char*));
    g.count = calloc(g.arrayCounter,sizeof(int));

    struct character i;
    memset(&i, 0, sizeof(i));
    i.arrayCounter = 1;
    i.words = malloc((i.arrayCounter)*sizeof(char*));
    i.count = calloc(i.arrayCounter,sizeof(int));

    struct character m;
    memset(&m, 0, sizeof(m));
    m.arrayCounter = 1;
    m.words = malloc((m.arrayCounter)*sizeof(char*));
    m.count = calloc(m.arrayCounter,sizeof(int));

    struct character o;
    memset(&o, 0, sizeof(o));
    o.arrayCounter = 1;
    o.words = malloc((o.arrayCounter)*sizeof(char*));
    o.count = calloc(o.arrayCounter,sizeof(int));

    struct character q;
    memset(&q, 0, sizeof(q));
    q.arrayCounter = 1;
    q.words = malloc((q.arrayCounter)*sizeof(char*));
    q.count = calloc(q.arrayCounter,sizeof(int));

    struct character s;
    memset(&s, 0, sizeof(s));
    s.arrayCounter = 1;
    s.words = malloc((s.arrayCounter)*sizeof(char*));
    s.count = calloc(s.arrayCounter,sizeof(int));

    struct character u;
    memset(&u, 0, sizeof(u));
    u.arrayCounter = 1;
    u.words = malloc((u.arrayCounter)*sizeof(char*));
    u.count = calloc(u.arrayCounter,sizeof(int));

    struct character z;
    memset(&z, 0, sizeof(z));
    z.arrayCounter = 1;
    z.words = malloc((z.arrayCounter)*sizeof(char*));
    z.count = calloc(z.arrayCounter,sizeof(int));

    struct character b;
    memset(&b, 0, sizeof(b));
    b.arrayCounter = 1;
    b.words = malloc((b.arrayCounter)*sizeof(char*));
    b.count = calloc(b.arrayCounter,sizeof(int));

    struct character d;
    memset(&d, 0, sizeof(d));
    d.arrayCounter = 1;
    d.words = malloc((d.arrayCounter)*sizeof(char*));
    d.count = calloc(d.arrayCounter,sizeof(int));

    struct character f;
    memset(&f, 0, sizeof(f));
    f.arrayCounter = 1;
    f.words = malloc((f.arrayCounter)*sizeof(char*));
    f.count = calloc(f.arrayCounter,sizeof(int));

    struct character h;
    memset(&h, 0, sizeof(h));
    h.arrayCounter = 1;
    h.words = malloc((h.arrayCounter)*sizeof(char*));
    h.count = calloc(h.arrayCounter,sizeof(int));

    struct character l;
    memset(&l, 0, sizeof(l));
    l.arrayCounter = 1;
    l.words = malloc((l.arrayCounter)*sizeof(char*));
    l.count = calloc(l.arrayCounter,sizeof(int));

    struct character n;
    memset(&n, 0, sizeof(n));
    n.arrayCounter = 1;
    n.words = malloc((n.arrayCounter)*sizeof(char*));
    n.count = calloc(n.arrayCounter,sizeof(int));

    struct character p;
    memset(&p, 0, sizeof(p));
    p.arrayCounter = 1;
    p.words = malloc((p.arrayCounter)*sizeof(char*));
    p.count = calloc(p.arrayCounter,sizeof(int));

    struct character r;
    memset(&r, 0, sizeof(r));
    r.arrayCounter = 1;
    r.words = malloc((r.arrayCounter)*sizeof(char*));
    r.count = calloc(r.arrayCounter,sizeof(int));

    struct character t;
    memset(&t, 0, sizeof(t));
    t.arrayCounter = 1;
    t.words = malloc((t.arrayCounter)*sizeof(char*));
    t.count = calloc(t.arrayCounter,sizeof(int));

    struct character v;
    memset(&v, 0, sizeof(v));
    v.arrayCounter = 1;
    v.words = malloc((v.arrayCounter)*sizeof(char*));
    v.count = calloc(v.arrayCounter,sizeof(int));

    char *line;
    line = malloc(5000*sizeof(char));
    ssize_t bytesRead = 0;
    ssize_t lineLength = 5000;
    //while(fgets(line, 5000, fileToRead) != (NULL))
    while((bytesRead = getline(&line, &lineLength, fileToRead)) != -1)
    {
        line[bytesRead + 1] = '\0';
        printf("linea è %s, strlen è %d\n", line, strlen(line));
        printf("tronco l'accapo\n");
        line[strlen(line) - 1] = '\0';
        printf("Nuova linea è %s, strlen è %d\n", line, strlen(line));
        char *buffer;
        buffer = strtok(line, " ");
        /*if(buffer =! NULL)
        {
            break;
        }*/
        if((buffer != NULL) && (buffer[0] == 'a'))
        {
            insert(&a, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'c'))
        {
            insert(&c, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'e'))
        {
            insert(&e, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'g'))
        {
            insert(&g, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'i'))
        {
            insert(&i, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'm'))
        {
            insert(&m, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'o'))
        {
            insert(&o, buffer);
        }
        if((buffer != NULL) && (buffer[0] == 'q'))
        {
            insert(&q, buffer);
        }
        if(((buffer != NULL) && buffer[0] == 's'))
        {
            insert(&s, buffer);
        }
        if(((buffer != NULL) && buffer[0] == 'u'))
        {
            insert(&u, buffer);
        }
        if(((buffer != NULL) && buffer[0] == 'z'))
        {
            insert(&z, buffer);
        }

        printf("***********************\n");
        for(int i = 0; (i < a.arrayCounter) && (a.words[i] != NULL); i++)
        {
            printf("Parola %s contatore %d\n", a.words[i], a.count[i]);
        }
        printf("***********************\n");
        //memset(buffer, NULL, 50*sizeof(char));
        while(1)
        {
            printf("while 1\n");
            buffer = strtok(NULL, " ");
            if(buffer == NULL)
            {
                printf("buffer is NULL, exiting from loop and going to next line\n");
                break;
            }

            if((buffer != NULL) && (buffer[0] == 'a'))
            {
                insert(&a, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'c'))
            {
                insert(&c, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'e'))
            {
                insert(&e, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'g'))
            {
                insert(&g, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'i'))
            {
                insert(&i, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'm'))
            {
                insert(&m, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'o'))
            {
                insert(&o, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'q'))
            {
                insert(&q, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 's'))
            {
                insert(&s, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'u'))
            {
                insert(&u, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'z'))
            {
                insert(&z, buffer);
            }

            if((buffer != NULL) && (buffer[0] == 'b'))
            {
                insert(&b, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'd'))
            {
                insert(&d, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'f'))
            {
                insert(&f, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'h'))
            {
                insert(&h, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'l'))
            {
                insert(&l, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'n'))
            {
                insert(&n, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'p'))
            {
                insert(&p, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'r'))
            {
                insert(&r, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 't'))
            {
                insert(&t, buffer);
            }
            if((buffer != NULL) && (buffer[0] == 'v'))
            {
                insert(&v, buffer);
            }

            //memset(buffer, NULL, 50*sizeof(char));
        }
    }
    printf("***********************\n");
    for(int ii = 0; (ii < c.arrayCounter) && (c.words[ii] != NULL); ii++)
    {
        printf("Word %s count %d\n", c.words[ii], c.count[ii]);
    }
    printf("***********************\n");

    printf("***********************\n");
    for(int ii = 0; (ii < e.arrayCounter) && (e.words[ii] != NULL); ii++)
    {
        printf("Word %s count %d\n", e.words[ii], e.count[ii]);
    }
    printf("***********************\n");
    /*
    for(int i = 0; i < 21; i++)
    {
        printf("!!!!!!!STAMPO PAROLE CHE INIZIANO CON LETTERA %s\n", arrayCaratteri[i]);
        printf("***********************\n");
        for(int ii = 0; (ii < arrayCaratteri[i].arrayCounter) && (arrayCaratteri[i].words[ii] != NULL); ii++)
        {
            printf("Parola %s contatore %d\n", arrayCaratteri[i].words[ii], arrayCaratteri[i].count[ii]);
        }
        printf("***********************\n");
    }*/
    fclose(fileToRead);  // close the file prior to exiting the routine
    free(a.words);
    free(a.count);
    free(b.words);
    free(b.count);
    free(c.words);
    free(c.count);
    free(d.words);
    free(d.count);
    free(e.words);
    free(e.count);
    free(f.words);
    free(f.count);
    free(g.words);
    free(g.count);
    free(h.words);
    free(h.count);
    free(i.words);
    free(i.count);
    free(l.words);
    free(l.count);
    free(m.words);
    free(m.count);
    free(n.words);
    free(n.count);
    free(o.words);
    free(o.count);
    free(p.words);
    free(p.count);
    free(q.words);
    free(q.count);
    free(r.words);
    free(r.count);
    free(s.words);
    free(s.count);
    free(t.words);
    free(t.count);
    free(u.words);
    free(u.count);
    free(v.words);
    free(v.count);
    free(z.words);
    free(z.count);

    printf("terminate successfully\n");
    return 0;
} 
```

这里有一些关于条件跳转的 Valgrind 错误消息，具体取决于初始化值：

```
[caterpillar@hostname Debug]$ valgrind --track-origins=yes 
--leak-check=full ./SO_ricercaParole 
==2791== Memcheck, a memory error detector 
==2791== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al. 
==2791== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info 
==2791== Command: ./SO_ricercaParole 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x8049520: main (parole.c:325) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048B17: main (parole.c:119) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x8049520: main (parole.c:325) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048B17: main (parole.c:119) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x80496E2: main (parole.c:364) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048E5C: main (parole.c:177) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80496E2: main (parole.c:364) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048E5C: main (parole.c:177) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048A5D: main (parole.c:107) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048A5D: main (parole.c:107) 
==2791== 
==2791== Use of uninitialised value of size 4 
==2791== at 0x4D9851AB: _itoa_word (_itoa.c:195) 
==2791== by 0x4D98A03B: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D9851B3: _itoa_word (_itoa.c:195) 
==2791== by 0x4D98A03B: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791==
at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D98A3FD: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D989D7D: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80494BC: main (parole.c:317) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x804982B: main (parole.c:392) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x804907E: main (parole.c:219) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791==
by 0x804982B: main (parole.c:392) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x804907E: main (parole.c:219) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x8049584: main (parole.c:333) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048BD1: main (parole.c:131) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x8049584: main (parole.c:333) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048BD1: main (parole.c:131) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x804976F: main (parole.c:376) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048F52: main (parole.c:195) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x804976F: main (parole.c:376) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048F52: main (parole.c:195) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048FE8: main (parole.c:207) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048FE8: main (parole.c:207) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x80494EE: main (parole.c:321) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048ABA: main (parole.c:113) 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80494EE: main (parole.c:321) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048ABA: main (parole.c:113) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791==
by 0x80497FC: main (parole.c:388) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8049033: main (parole.c:213) 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80497FC: main (parole.c:388) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8049033: main (parole.c:213) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791==
by 0x80492E6: main (parole.c:267) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048B74: main (parole.c:125) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x80492E6: main (parole.c:267) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048B74: main (parole.c:125) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80486E1: insert (parole.c:38) 
==2791== by 0x804964C: main (parole.c:349) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048D45: main (parole.c:155) 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x80487E0: insert (parole.c:54) 
==2791== by 0x804964C: main (parole.c:349) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236) 
==2791== by 0x8048D45: main (parole.c:155) 
==2791== Use of uninitialised value of size 4 
==2791== at 0x4D9851AB: _itoa_word (_itoa.c:195) 
==2791== by 0x4D98A03B: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791==
at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D9851B3: _itoa_word (_itoa.c:195) 
==2791== by 0x4D98A03B: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791==
at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D98A3FD: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== 
==2791== Conditional jump or move depends on uninitialised value(s) 
==2791== at 0x4D989D7D: vfprintf (vfprintf.c:1570) 
==2791== by 0x4D98FF8E: printf (printf.c:35) 
==2791== by 0x80497CD: main (parole.c:384) 
==2791== Uninitialised value was created by a heap allocation 
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525) 
==2791== by 0x804892F: insert (parole.c:69) 
==2791== by 0x80497CD: main (parole.c:384) 
```

为什么会有这样的消息？我初始化了所有结构和数组，ecc.ecc。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T11:43:08.130

```
character->words = realloc(character->words, (character->arrayCounter + 1) * sizeof(char*));
character->count = realloc(character->count, (character->arrayCounter + 1) * sizeof(int));
character->arrayCounter++; 
```

1.  你*永远不*应该使用构造`ptr = realloc(ptr,size);`If `realloc`returns `NULL`，指向的内存`ptr`被泄露，你无法再访问它。
2.  不要只增加一个元素的大小，这是低效且昂贵的。由于它也会导致内存碎片，因此它可能不会使用更少的内存而不是增加更大的数量，比如增加一个常数因子（将大小加倍，乘以 1.5 [并加一以确保大小确实增加]）。
3.  中的新存储`character->words`不一定包含`NULL`，它是未初始化的，原始`words`指针也是如此：`a.words = malloc((a.arrayCounter)*sizeof(char*));`。

可能 3\. 是 valgrind 报告的。

如果你有一个数组并索引到该数组中，而不是有一个以字符命名的结构，那么你的代码会*更*短，更易读，所以 eg对应于.`character``struct character e;``character_array['e' - 'a'];`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T11:33:24.727

从我可以看到你在节中

```
struct character a;
memset(&a, 0, sizeof(a));
a.arrayCounter = 1;
a.words = malloc((a.arrayCounter)*sizeof(char*));
a.count = calloc(a.arrayCounter,sizeof(int)); 
```

等`malloc`在你应该使用的时候使用`calloc`。然后，您稍后使用 的内容，`a.words`而无需先初始化内容。

**编辑：**另外，你的代码真的可以做一些清理工作。你所有的结构和混乱都可以很容易地用两个哈希表代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:42:02.170

valgrind 报告的问题（我不会涉及其他问题）是使用`malloc`and `realloc`。这些不会将它们的内存初始化为 0，只会这样做`calloc`。Valgrind 的消息告诉你这一点，例如：

```
==2791== Conditional jump or move depends on uninitialised value(s)
==2791== at 0x80486E1: insert (parole.c:38)
==2791== by 0x8049520: main (parole.c:325)
==2791== Uninitialised value was created by a heap allocation  <<< TELLING YOU THE CAUSE
==2791== at 0x4007D89: malloc (vg_replace_malloc.c:236)
==2791== by 0x8048B17: main (parole.c:119)                  <<< LOCATION IN CODE 
```

而且，当您修复这些错误时，由 引起的错误`realloc`将是剩下的错误。同样，他们会告诉您您需要知道的内容：

```
==2791== Use of uninitialised value of size 4
==2791== at 0x4D9851AB: _itoa_word (_itoa.c:195)
==2791== by 0x4D98A03B: vfprintf (vfprintf.c:1570)
==2791== by 0x4D98FF8E: printf (printf.c:35)
==2791== by 0x80494BC: main (parole.c:317)
==2791== Uninitialised value was created by a heap allocation
==2791== at 0x4007E73: realloc (vg_replace_malloc.c:525)
==2791== by 0x804892F: insert (parole.c:69)                <<< LOCATION IN CODE
==2791== by 0x80494BC: main (parole.c:317) 
```

# ios - 如何使用 UITableViewCellEditingStyleInsert 在单元格上显示 UIAccessoryView？

> ID：10267530
> 
> 赞同：2
> 
> 时间：2012-04-22T11:26:13.800
> 
> 标签：ios, xcode, uitableview, uiaccessoryview

我想使用附件披露指示器来通知用户点击单元格以更改时间。

我确实`UITableViewCellAccessoryDisclosureIndicator`在`cellForRowAtIndexPath`委托方法中将附件类型设置为，但披露指示器不可见，如下面的屏幕截图所示。

我怎样才能解决这个问题？

![在此处输入图像描述](../Images/10c319dadf139d66173055573bb41aeb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:28:08.910

我猜你已经找到了这个，但我认为你想要editingAccessoryType。

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW61](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW61)

# jquery - 自动化 jquery 滑块

> ID：10267531
> 
> 赞同：1
> 
> 时间：2012-04-22T11:26:15.677
> 
> 标签：jquery

我有这个例子：[点击！](http://jsfiddle.net/duhVf/)

使用以下 jquery：

```
$(".abox-1").click(function(){
    $("#box-2, #box-3").css({
        zIndex: "-999"
    });
    $("#box-1").css({
        zIndex: "999"
    });
    $("#box-1").stop().animate({
        top: "0%"
    }, 1000, "easeInOutExpo");
    $("#box-2, #box-3").stop().delay(1000).animate({
        top: "100%"
    });
});
$(".abox-2").click(function(){
    $("#box-2").css({
        zIndex: "999"
    });
    $("#box-2").stop().animate({
        top: "0%"
    }, 1000, "easeInOutExpo");
    $("#box-1, #box-3").css({
        zIndex: "-999"
    });
    $("#box-1, #box-3").stop().delay(1000).animate({
        top: "100%"
    });
});
$(".abox-3").click(function(){
    $("#box-1, #box-2").css({
        zIndex: "-999"
    });
    $("#box-3").css({
        zIndex: "999"
    });
    $("#box-3").stop().animate({
        top: "0%"
    }, 1000, "easeInOutExpo");
    $("#box-2, #box-1").stop().delay(1000).animate({
        top: "100%"
    });
}); 
```

但是，如您所见，这是非常丑陋的代码！并且占用大量空间。我怎样才能做出一个功能呢？或者我如何缩短代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:04:25.077

也许是这样的？

```
$(document).ready(function(){
    $('a[class^="abox"]').click(function() {
        if (this.className == 'abox') {
            $('div[id^=box-]').animate({top: '100%'}, 1000, "easeInOutExpo").css({zIndex: "-999"});
        }else{
            var thisbox = $('#'+this.className.replace('a', '')),
                otherbox = $('div[id^=box-]').not(thisbox);

            otherbox.css({zIndex: "-999"}).stop().delay(1000).animate({top: '100%'});
            thisbox.css({zIndex: "999"}).stop().animate({top: '0%'}, 1000, "easeInOutExpo");
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/duhVf/1/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:53:50.747

您应该将类​​更改`abox-i`为 id`aboxi`并使用以下代码：

```
function show_box(number) {
  for(var i = 1; i <= 3; i++) {
    if (i == number) { // we need to show this element
      $("#box-" + i).css({
        zIndex: "999"
      }).stop().animate({
        top: "0%"
      }, 1000, "easeInOutExpo");
    } else { // we need to hide this element
      $("#box-"+i).css({
        zIndex: "-999"
      }).stop().delay(1000).animate({
        top: "100%"
      });
    }
  }
}

$("#nav a").click(function() {
  var id = parseInt(this.id.substr(4));
  if (id > 0) show_box(id);   
}); 
```

[提琴手](http://jsfiddle.net/riateche/cFY6K/1/)

# jquery - 动态加载完成后，如何使用 jquery 添加类？

> ID：10267532
> 
> 赞同：3
> 
> 时间：2012-04-22T11:26:17.323
> 
> 标签：jquery

我需要向以`<a>`编程方式添加的类添加一个类。当我调用`addClass`它时没有添加它，这是我假设的，因为插件还没有完成安装所有它的点点滴滴，所以锚点还没有。

页面在[这里](http://nicolaelvin.com/community/)。它是顶部的登录栏。我想在登录和注册按钮中添加一个类，例如

```
jQuery('.bp-login a').addClass('simplemodal-login');
jQuery('.bp-signup a').addClass('simplemodal-register'); 
```

该部分的 HTML 是

```
<ul class="main-nav">
<li class="bp-login no-arrow">
    <a href="http://nicolaelvin.com/community/wp-login.php?redirect_to=http%3A%2F%2Fnicolaelvin.com%2Fcommunity">Log In
    </a>
</li>
<li class="bp-signup no-arrow">
     <a href="http://nicolaelvin.com/community/register/">Sign Up
     </a>
</li>
...</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:06:26.187

尝试：

```
jQuery(function() {

    var modal_check = setInterval(function(){

        if(jQuery('.simplemodal-login').length > 1){
            clearInterval(modal_check);
            jQuery('.bp-login a').addClass('simplemodal-login');
            jQuery('.bp-signup a').addClass('simplemodal-register');
        }

    },100);

});​ 
```

这会等到 dom 准备好，然后每 10 秒检查一次以查看模态插件是否已加载。加载插件后，它会停止间隔并添加类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T11:29:15.310

您应该等到 DOM 准备好。

```
$(function () {
  $(element).addClass('hello');
}); 
```

# java - 如何 Eclipse Maven 项目 Wicket-Spring-JPA-Hibernate

> ID：10267535
> 
> 赞同：0
> 
> 时间：2012-04-22T11:26:56.403
> 
> 标签：java, eclipse, m2eclipse, archetypes

我想使用 m2eclipse 插件在 Eclipse 中创建一个 Maven 项目，其中包括 Wicket、Spring、JPA 和 Hibernate。

最简单的方法是什么？我应该选择哪种原型？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:04:44.140

你知道 wicket-spring-hibernate-quickstart 原型吗？

[http://blog.iprofs.nl/2011/02/15/a-maven-quickstart-on-wicket-spring-and-hibernate/](http://blog.iprofs.nl/2011/02/15/a-maven-quickstart-on-wicket-spring-and-hibernate/)

您可以以此为起点，然后根据需要修改创建的文件，例如将各种框架升级到更高版本。

但是，如果您只想创建一个简单的 Web 应用程序，您也可以不使用原型。在 m2eclipse 中新建 Maven 项目时，只需选择“Create simple project (skip archetype selection)”选项并创建一个打包类型为“war”的简单 Maven 项目。之后，在 src/main/webapp 中创建 web.xml /WEB-INF 并将所有需要的依赖项（如 Wicket、Spring、Hibernate）添加到 pom.xml。在没有原型魔法的情况下创建这样的 Maven 项目可能需要更多时间（尽管它不应该那么多） ，但是您知道您的项目确实是按照您需要的方式设置的。

# c# - 如何使用 Ioc Unity 注入依赖属性

> ID：10267536
> 
> 赞同：13
> 
> 时间：2012-04-22T11:27:02.783
> 
> 标签：c#, inversion-of-control, unity-container, ioc-container, property-injection

我有以下课程：

```
public interface IServiceA
{
    string MethodA1();
}

public interface IServiceB
{
    string MethodB1();
}

public class ServiceA : IServiceA
{
    public IServiceB serviceB;

    public string MethodA1()
    {
        return "MethodA1() " +serviceB.MethodB1();
    }
}

public class ServiceB : IServiceB
{
    public string MethodB1()
    {
        return "MethodB1() ";
    }
} 
```

我使用 Unity for IoC，我的注册如下所示：

```
container.RegisterType<IServiceA, ServiceA>(); 
container.RegisterType<IServiceB, ServiceB>(); 
```

当我解决一个`ServiceA`实例时，`serviceB`将是`null`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T11:33:37.793

您在这里至少有两个选择：

您可以/应该使用构造函数注入，因为您需要一个构造函数：

```
public class ServiceA : IServiceA
{
    private IServiceB serviceB;

    public ServiceA(IServiceB serviceB)
    {
        this.serviceB = serviceB;
    }

    public string MethodA1()
    {
        return "MethodA1() " +serviceB.MethodB1();
    }
} 
```

或者 Unity 支持属性注入，因为您需要一个属性和`DependencyAttribute`：

```
public class ServiceA : IServiceA
{
    [Dependency]
    public IServiceB ServiceB { get; set; };

    public string MethodA1()
    {
        return "MethodA1() " +serviceB.MethodB1();
    }
} 
```

MSDN 站点[Unity 做什么？](http://msdn.microsoft.com/en-us/library/ff660864%28v=pandp.20%29.aspx)是 Unity 的一个很好的起点。

# iphone - 如何在 iOS 中使用硬编码的 Twitter 帐户的正确方法

> ID：10267540
> 
> 赞同：0
> 
> 时间：2012-04-22T11:27:22.833
> 
> 标签：iphone, objective-c, ios, ios5, twitter

问题的简短版本是这样的：iOS（使用 iOS5 twitter 框架或某些 3rd 方库）上是否有任何方法可以为其他平台执行此页面上描述的操作：[https ://dev.twitter.com/docs/auth /oauth/single-user-with-examples](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples)

例如，在 c# 中，可以使用以下使用 3rd 方库：

```
OAuthTokens tokens = new OAuthTokens();
tokens.ConsumerKey = "Consumer Key";
tokens.ConsumerSecret = "Consumer Secret";
tokens.AccessToken = "Access Key";
tokens.AccessTokenSecret = "Access Secret";

TwitterStatusCollection homeTimeline = TwitterStatus.GetHomeTimeline(tokens); 
```

这基本上是我需要的。

以下是有关我正在尝试做的一些附加信息，以防相关：

我想创建一个应用程序，它访问一个特定的 Twitter 帐户并显示其中一些推文。我当然可以访问这个帐户（因此只读访问很好）。
到目前为止，我还使用[https://dev.twitter.com/apps](https://dev.twitter.com/apps)站点创建了 twitter 应用程序。在那里，我生成了身份验证令牌和秘密，并获得了消费者密钥和秘密。现在我想在应用程序中使用它（我希望所有这些都是永久性的，除非我删除它们以便我可以在应用程序中对它们进行硬编码？）。

我遇到了这个 SO 问题：[Error created twitter ACAccount on iOS5: NSURLErrorDomain error -1012](https://stackoverflow.com/questions/8224835/error-creating-twitter-acaccount-on-ios5-nsurlerrordomain-error-1012)，这家伙可能想做类似的事情，建议使用这个： [https ://dev.twitter.com/docs/ios/migrating -tokens-core-accounts](https://dev.twitter.com/docs/ios/migrating-tokens-core-accounts)。对我来说它不起作用，我认为这不是做我需要的正确方法。

我越来越觉得我正在尝试以概念上糟糕的方式做一些简单的事情:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:09:51.527

查看我[对这个问题的回答，](https://stackoverflow.com/questions/11600621/iphone-twitter-api-get-users-followers-following/11601077#11601077)它向您展示了如何使用内置的 iOS 5 Twitter 框架对 Twitter 进行身份验证和请求。

# php - 这些 PHP 脚本在读取 JSON 时有什么问题？

> ID：10267543
> 
> 赞同：0
> 
> 时间：2012-04-22T11:28:10.710
> 
> 标签：php, json

这是我写的代码：

```
$result = $textProc->sentiment($text);
$json_a = json_decode($result, true);
echo $json_a[label]; 
```

其中 $result 存储 JSON 数据。

但是，它返回给我错误：

```
Warning: json_decode() expects parameter 1 to be string, object given in C:\xampp
\htdocs\ai\sentiment.php on line 9

Notice: Use of undefined constant label - assumed 'label' in C:\xampp\htdocs
\ai\sentiment.php on line 11 
```

解决方案：这是 var_dump($result) 的输出：

```
object(stdClass)#2 (2) { ["value"]=> float(0.63882080795918) ["sent"]=> int(1) } 
```

对不起，我应该先检查一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:31:16.567

> 注意：使用未定义的常量标签 - 在第 11 行的 C:\xampp\htdocs \ai\sentiment.php 中假定为“标签”

标签上`echo $json_a[label];`是指不存在的常数。

要引用关联数组中的元素，您必须执行以下操作。

```
echo $json_a['label']; 
```

* * *

> 警告：json_decode() 期望参数 1 是字符串，对象在第 9 行的 C:\xampp\htdocs\ai\sentiment.php 中给出

接下来， on `$result = $textProc->sentiment($text);`，该函数没有返回字符串。确保`var_dump($result)`它返回 json**字符串**格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:30:28.697

$result 不是字符串。尝试使用 找出字符串在对象中的存储位置`print_r($result)`。

# objective-c - 从 AppDelegate 更改选项卡和推送视图

> ID：10267544
> 
> 赞同：3
> 
> 时间：2012-04-22T11:28:20.693
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller, uitabbarcontroller

我的 AppDelegate 中有一个名为 handleLocalNotification 的方法，当我的应用收到通知时会触发该方法。我需要它切换到包含 UITableview 的 UITabBarController 中的选项卡 0。然后我需要它推送表格视图的正确行以显示通知发送的记录。所有控制器都是在情节提要中创建的，所以我在 AppDelegate 中没有对它们的引用。

我已添加到我的 AppDelegate.h：

```
@class MyListViewController;
@interface iS2MAppDelegate : UIResponder <UIApplicationDelegate> {

    MyListViewController *_listControl;

} 
```

为了测试，我只是把它放在 didFinishLaunchingWithOptions 方法中：

```
UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
    tabb.selectedIndex = 0;
    _listControl = [tabb.viewControllers objectAtIndex:0];
    [_listControl.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:4 inSection:0] animated:YES scrollPosition:UITableViewScrollPositionTop]; 
```

tabBarController 位有效，因为我可以让它加载到不同的选项卡上。最后两行导致它崩溃。我是否以正确的方式解决了这个问题？还是我需要使用不同的方法？崩溃原因是：

> UINavigationController tableView]：发送到实例的无法识别的选择器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T11:58:22.910

我建议使用`NSNotificationCenter`尝试这样做

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
  UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
  tabb.selectedIndex = 0;
 [[NSNotificationCenter defaultCenter] postNotificationName:@"localNotificationReceived" object:nil];
} 
```

在你的 viewController 中`viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectRows) name:@"localNotificationReceived" object:nil]; 
```

现在你可以使用你的 tableView 做你的事情了

```
-(void) selectRows
{
    [tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:4 inSection:0] animated:YES scrollPosition:UITableViewScrollPositionTop];
} 
```

**要以编程方式选择一个单元格，这可能会完成这项工作：**

```
NSIndexPath *selectedCellIndexPath = [NSIndexPath indexPathForRow:4 inSection:0];
[table selectRowAtIndexPath:selectedCellIndexPath 
                   animated:YES 
             scrollPosition:UITableViewScrollPositionTop];
[table.delegate tableView:table didSelectRowAtIndexPath:selectedCellIndexPath]; 
```

因为 selectRowAtIndexPath 不会触发表委托方法，所以您必须自己调用。

# extjs - this.store 未定义

> ID：10267546
> 
> 赞同：1
> 
> 时间：2012-04-22T11:28:31.370
> 
> 标签：extjs

我是 Ext 库的初学者，我正在尝试扩展一个网格面板并从我的一个新课程记录中引用它的存储：

```
Ext.define('App.ui.CategoryGridPanel', {
extend : 'Ext.grid.Panel',
initComponent : function() {
    var storeToUse = this.store;

    if (storeToUse == null) {
        storeToUse = Ext.data.StoreManager.lookup(StoreIDs.CategoryStore);
    }

    this.categoryRowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
        clicksToEdit : 2,
        store : storeToUse,
        listeners : {
            edit : function(editor, e) {
                this.store.sync();
            }
        }
    });

    Ext.apply(this, {
        store : storeToUse,
        height : 400,
        width : 300,
        plugins : [ this.categoryRowEditing ],
        columns : [ {
            header : 'Description',
            dataIndex : 'description',
            flex : 1,
            sortable : true,
            editor : 'textfield'
        } ],
        tbar : [ {
            xtype : 'button',
            text : 'New',
            handler : this.insertNewCategory
        } ]
    });

    this.callParent(arguments);
},
/**
 * Add new Category to grid.
 */
insertNewCategory : function() {
    var category = Ext.create(ModelNames.Category, {
        description : ''
    });

    this.store.insert(0, category);
    this.categoryRowEditing.startEdit(0, 0);
} 
```

});

方法inserNewCategory 总是抛出cannot call insert of undefined 在发出一些警报后我发现this.store 返回null。我检查了 Ext 示例代码，但我没有做任何不同的事情。

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:46:32.090

1.  检查您`this`在 insertNewCategory 方法中看到的内容。你会感到惊讶。我敢打赌-这将是您按下的按钮，因为您没有对此功能的范围做任何事情。

2.  阅读煎茶指南和演练。从您的代码示例中，很明显您以完全错误的方式使用它——您不需要做所有这些手动工作来分配和重新分配存储——这一切都由 ExtJs 自动处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:48:31.427

您的类别对象的创建似乎失败了：

```
var category = Ext.create(ModelNames.Category, {
    description : ''
}); 
```

我会在这一行之后休息一下，以确保您的“类别”对象已正确创建。

关于使用“this”，我建议您查看直接使用它的危险。许多情况可能会导致它超出您的预期。有关 javascript 陷阱的更多信息，请参见[此处](http://www.sitepoint.com/javascript-this-gotchas/)。

# java - 这个例子是否违反了好莱坞的原则“不要打电话给我们，我们打电话给你”

> ID：10267553
> 
> 赞同：2
> 
> 时间：2012-04-22T11:29:33.693
> 
> 标签：java, design-patterns, state-pattern

我是 headfirst 设计模式的读者，我注意到了这一点。

“好莱坞原则，不要叫我们，我们叫你”

这意味着高级组件告诉低级组件“不要打电话给我们，我们打电话给你”

高级组件是一个具有与其他低级组件一起定义的行为的类。

我的问题是……这个例子是否违反了不叫我们，我们叫你的原则？这也来自使用状态模式的书。

```
public class GumballMachine
{
    //other state instance here

    State NoQuarterState;
    State HasQuarterState;

    public GumballMachine(int numberGumballs)
    {
        NoQuarterState = new NoQuarterState(this);
        HasQuarterState = new HasQuarterState(this);    

        //other state objects here assigning to state instance      
    }

    public void insertQuarter() 
    {   
        state.insertQuarter();  
    }

    void setState(State state) 
    {   
        this.state = state; 
    }

    public State getHasQuarterState() 
    {   
        return hasQuarterState;
    }

    //more code here
} 
```

==================================================== ===================

```
public interface State
{
    //abstract methods
} 
```

==================================================== ===================

```
public class NoQuarterState implements State
{   
    GumballMachine gumballMachine;

    public NoQuarterState(GumballMachine gumballMachine)
    {
        this.gumballMachine = gumballMachine;
    }

    public void insertQuarter()
    {
        System.out.println("You inserted a quarter");
        gumballMachine.setState(gumballMachine.getHasQuarterState()); // change the state to HasQuarterState
    }
} 
```

因为在这个例子中**GumballMachine**需要**NoQuarterState**的**insertQuarterBehavior()**来作为它自己的**insertQuarterBehavior**，所以这意味着**GumballMachine**类是高级组件，而**NoquarterState**类是低级组件。但是看看**NoQuarterState**类，该类还依赖于**gumballMachine 的 setState()**和**getHasQuarterState()**的**insertQuarter() 行为**。

他们相互依赖。通函 - 依赖关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:46:57.447

您应该将 GumballMachine 视为州运作的环境。此模式要求状态能够获得对任何其他状态的引用并更改当前状态。这意味着这里是紧密耦合的，允许 GumballMachine 与状态级逻辑无关，但负责状态的生命周期及其共享的参考点。

原则和模式不是设计工作的最终目标。最后，您必须为手头的问题提出一个合适的解决方案，有时某些模式和原则并不适用。话虽如此，如果您发现自己确实违反了一项重要原则（例如松散耦合/紧密内聚），这表明某些事情可能是错误的，您至少应该问自己为什么会出现这种情况以及是否可以避免在你的问题的限制范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:55:28.267

首先，您应该阅读有关[State Pattern](http://en.wikipedia.org/wiki/State_pattern)的内容。
你发布的是一个相当简单的版本。在您发布的代码中，唯一`new`被调用的时间是在`Gumball`机器中，这实际上还不错，因为***状态***关联/属于`Gumball`机器，并且是实例化它们的中心和唯一位置。它也是添加/删除它们的唯一地方。所以具体类的实例化在代码中的一个地方。

这`NoQuarterState`与机器（以及任何其他机器）`associated`有关，这是有道理的，因为只有知道在其处理后要遵循的下一个正确状态是哪个，有效地使盒子根据每个状态的结果移动。这样，可以在不知道一种状态如何或在什么条件下跟随另一种状态的情况下发生变化。这被封装在具体实例中。 `Gumball``State``NoQuarterState``Gumball``Gumball``State``State`

事实上，`Gumball`唯一知道的`States`是它的各种代码`getters`和`setters`你的代码。它调用的唯一方法是属于`State`和不属于`NoQuarterState`等的方法。
因此，尽管这是一个可以改进的相当简化的示例（顺便说一句，不认为允许从书中复制粘贴示例），但它本身并不违反您所询问的原则，`Holywood`原则的核心思想是关于松散耦合，此代码不违反它恕我直言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:58:06.823

是的，它确实违反了好莱坞原则，正如你指出的原因。但正如同一本书所强调的，这些原则不是法律，而且经常被违反。例如，回调是对好莱坞原则的常见且有用的违反。

# android - 如何在录制时从（n Android）手机上传视频

> ID：10267554
> 
> 赞同：7
> 
> 时间：2012-04-22T11:29:54.960
> 
> 标签：android, video, video-streaming, mp4, video-encoding

我正在尝试编写一个应用程序，通过读取 .mp4 文件并在写入文件时上传字节来记录 Android 手机中的视频。问题是，据我所知，在视频录制完成并关闭视频文件之前，moov atom 和其他一些分类数据似乎没有写入文件。有没有办法处理视频文件并在服务器端添加这些元数据，假设要么

1.  完整的视频文件已上传（但没有 moov atom 或任何其他未在第一遍中写入的数据）
2.  只有部分视频已上传（例如前 10 秒），我想将其转换为包含已上传视频片段的有效 mp4 文件。

我看过像[http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system)之类的链接，但他们通过简单地说明来掩盖问题

> 所以接收到的流必须在录制完成后修复，或者原始视频/音频帧必须由服务器处理。

没有确切解释如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T17:23:19.160

正如您所注意到的，MP4 格式在这种情况下可能难以使用。我怀疑链接的博客文章没有详细介绍“修复”，因为它可能涉及很多。除了编写 mdat 框的缺失大小字段之外，您还需要生成 ftyp 和 moov 框。如果您真的需要一个端到端的 MP4 解决方案，[ISO 14496-12](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=51533)和[ISO](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=38538) 14496-14将比您想知道的更多地告诉您如何构建这些数据结构。

但是，您可能会发现更优雅的解决方案是使用实际上适合实时处理的格式。换句话说，在 Android 端，将视频流重新混合为实时格式并将其发送到服务器。在服务器端，您可以非常灵活地处理视频：您可以将整个视频重新混合回 MP4，您可以切片和切块，制作 10 秒的块，或其他任何方式。开源 Sipdroid 项目[包含一些](http://code.google.com/p/sipdroid/source/browse/trunk/src/org/sipdroid/sipua/ui/VideoCamera.java)演示如何将实时视频重新混合到 RTP 中的代码。（您可能更喜欢可靠的传输格式——RTP over TCP，或者其他的——原理是一样的。）

# c++ - c++ mysql存储preocedure多个out参数错误

> ID：10267558
> 
> 赞同：2
> 
> 时间：2012-04-22T11:30:47.370
> 
> 标签：c++, mysql

我使用 Freebsd 8.0 amd64,mysql-client-5.1.61, mysql-connector-c++-1.1.0, mysql-server-5.1.61 和 gcc 4.2.1 为什么这行得通

```
stmt->execute("CREATE PROCEDURE p(OUT retval VARCHAR(50)) BEGIN SELECT \"Ulf joined MySQL more than 5 years ago\" INTO retval; END;");

 pstmt.reset(con->prepareStatement("CALL p(@output)"));
 pstmt->execute();

 pstmt.reset(con->prepareStatement("SELECT @output AS _answer"));
 res.reset(pstmt->executeQuery());
 while (res->next())
     cout << "\t... _answer: " << res->getString("_answer") << endl; 
```

这不是

```
stmt->execute("CREATE PROCEDURE p(OUT retval VARCHAR(50),OUT retval1 VARCHAR(50)) BEGIN SELECT \"Ulf joined MySQL more than 5 years ago\" INTO retval;SELECT \"Ulf joined MySQL more than 5 years ago\" INTO retval1;  END;");
pstmt.reset(con->prepareStatement("CALL p(@out1,@out2)"));
pstmt->execute();

pstmt.reset(con->prepareStatement("SELECT @out1 AS vOut,@out2 as vOut2"));
res.reset(pstmt->executeQuery());
while (res->next())
   cout << res->getString("vOut1") << res->getString("vOut2") << endl; 
```

并返回`ERR: MySQLPreparedResultSet::getString: invalid 'columnIndex' (MySQL error code: 0, SQLState: )` 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:21:41.813

假设您逐字复制代码，我认为问题是由一个简单的错字引起的。在这一行：

```
pstmt.reset(con->prepareStatement("SELECT @out1 AS vOut,@out2 as vOut2")); 
```

您的参数的列名是`vOut`和`vOut2`。但在后一行：

```
cout << res->getString("vOut1") << res->getString("vOut2") << endl; 
```

您将它们称为`vOut1`和`vOut2`。没有名为 name 的列`vOut1`，因为您命名了它`vOut`，因此出现无效的列索引错误。

# javascript - 将数据保存到客户端文件

> ID：10267564
> 
> 赞同：1
> 
> 时间：2012-04-22T11:32:11.253
> 
> 标签：javascript, jquery, file-io, client-side

我正在编写一个 Web 应用程序，我正在使用 jQuery 从服务器获取一些数据。

我想将数据保存在客户端的文件中，我使用插件 JQuery.tWFile.js 进行了尝试，但得到以下异常

> 错误：来自的脚本`http://localhost`错误：来自UniversalXPConnect 权限

我怎样才能解决这个问题？还有其他更好的方法可以将我从服务器获取的数据保存在客户端文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:36:09.597

使用localStorage怎么样？[链接到 mdn 的存储可能性](https://developer.mozilla.org/en/DOM/Storage)

编辑：我认为它的限制较小，也绑定到当前域并且存在于浏览器会话中......只有清除缓存才会重置它afaik

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T03:26:14.420

该脚本失败，因为您的 Uri 是本地主机，这可能是一个环回 IP……但对于您的浏览器来说，它仍然是一个网站。只有在使用 file:// Uri 浏览本地文件时才允许写入本地文件。

如果您不能使用 file:// Uri，那么您将不得不接受 cookie 或 localStorage。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-29T22:29:52.237

如果你使用它应该可以工作`file:///path/to/file.html`

# iphone - 如何将数值附加到数组

> ID：10267568
> 
> 赞同：0
> 
> 时间：2012-04-22T11:32:39.580
> 
> 标签：iphone, ios, nsstring, nsarray

我有一些由空格分隔的文本@“”。我将此数组从名为 delegate.allSelectedVerseEnglish（数组名称）的 DB 显示到以下格式的文本视图中。

```
self.multiPageView.text=[delegate.allSelectedVerseEnglish componentsJoinedByString:@" "]; 
```

multipageview 是文本视图，我需要在这些空格之间放置数字。意味着我有 3 个由空格分隔的文本，例如：我的名字是 icoder 我的老是 20 我的热情是编码等等，我需要将此文本设置为1 我的名字是 icoder 2 我的老是 20 3 我的热情是编码等等，我怎么能这样。我已经正确地得到了文本但需要这个格式。数据库没有数字，我必须输入数字单独的文本之间。

有没有人知道如何实现这个..我希望你能理解我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:46:33.570

**更新**：我已将其重写为使用 NSMutableString，因为这不会像我的原始版本那样敲击自动释放池。

```
NSMutableString *combined = [NSMutableString string];
for(NSUInteger idx = 0; idx < [delegate.allSelectedVerseEnglish count]; idx++) {
    [combined appendFormat:@" %d %@", 
                            idx + 1, 
                            [delegate.allSelectedVerseEnglish objectAtIndex:idx]];
}

self.multiPageView.text = combined; 
```

# iphone - 将 UIButton 粘贴到 UIImageView 的 UIImage 中

> ID：10267571
> 
> 赞同：0
> 
> 时间：2012-04-22T11:33:24.663
> 
> 标签：iphone, ios, xcode

我有一个带有 UIButton 的 UIImageView，我希望能够通过电子邮件将其作为图像发送，但是当我从 UIImageView 中取出图像时，UIImageView 中的 UIButton 不会与 UIImageView 的图像“粘在一起”。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:32:58.253

您可以使用以下代码添加 UIButton 和 UIImageView 并获取所需的屏幕截图图像。您可能需要将 QuartzCore.framework 添加到您的项目和#import

获取带有其他 UI 元素的图像。

```
UIGraphicsBeginImageContext(CGSizeMake(320, 480)); // Here provide width and height of UIImageView
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];//Here use required view 
UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();//outputImage is your required image
UIGraphicsEndImageContext(); 
```

显示图像

```
UIImageView * screenShotView = [[UIImageView alloc] initWithImage:outputImage];
[screenShotView setFrame:CGRectMake(0, 0, 320, 480)];
[self.view addSubview:screenShotView]; 
```

# django - Django-CMS：默认页面中的 cmsplugin_blog

> ID：10267574
> 
> 赞同：1
> 
> 时间：2012-04-22T11:33:53.373
> 
> 标签：django, django-cms

我无法将 cmsplugin_blog 应用程序放在 django-cms 的第一页。

其中的问题是 URL 不显示页面名称，因此文章链接和国际化存在一些问题，否则不会显示。

当询问根目录时，是否可以让 django-cms 重定向到菜单中的第一页（比如说 /blog/）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:15:47.183

所有 Django CMS 页面都可以连接到应用程序模块，例如您的博客。查看 App Hooks 的文档：http: [//docs.django-cms.org/en/latest/extending_cms/extending_examples.html#my-first-app-apphook](http://docs.django-cms.org/en/latest/extending_cms/extending_examples.html#my-first-app-apphook)

为您的博客设置 cms_app.py 后，您应该能够在 CMS 页面更改视图的高级菜单中将您的博客应用程序设置为您的主页/首页的应用程序。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T17:37:42.933

尝试页面菜单的高级设置。应该有一个“重定向”字段，您可以在其中选择博客的根页面。为您的第一页执行此操作。

发生的情况是根页面被 http 重定向替换，浏览器将显示您的博客页面。

# mysql - mysql的alter语句

> ID：10267575
> 
> 赞同：0
> 
> 时间：2012-04-22T11:33:56.357
> 
> 标签：mysql, alter

这是我尝试连接两个表的 alter 语句：

```
ALTER TABLE my_contacts 
  CHANGE `profession` `profession_id`  INT NOT NULL, 
  ADD CONSTRAINT professions_profession_id_fk 
  FOREIGN KEY (profession_id) REFERENCES professions (profession_id) 
```

我有以下错误：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`contacts`.<result 2 when explaining filename '#sql-1ca_73'>, CONSTRAINT `professions_profession_id_fk` FOREIGN KEY (`profession_id`) REFERENCES `professions` (`profession_id`)) 
```

谁能指导我这是什么？我实际上正在学习如何自己编写 sql，因为我一直在使用工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:35:56.223

这是关系冲突。一个更容易解决的方法是

*   删除字段之间的关系
*   更改表格
*   再次添加关系时，修复您收到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:39:30.203

您的外键约束失败。

您尝试创建的外键强制 my_contacts 中的每个职业 ID 出现在您的职业表中。现在，情况并非如此。您应该在 my_contacts 中查找所有职业中没有职业 ID 的记录并首先修复这些记录。

# r - 主成分分析后如何拟合线性模型

> ID：10267578
> 
> 赞同：2
> 
> 时间：2012-04-22T11:34:09.243
> 
> 标签：r, statistics, data-mining

我对数据框的四列进行了 princomp 分析，发现第一个组件比其他三个组件重要得多。

现在我想仅使用第一个组件来拟合线性模型。如何获取仅由该组件组成的新数据？

我知道这涉及到一些矩阵乘法，但我不知道该怎么做。我用谷歌搜索和搜索，找不到任何可以理解的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:40:35.977

分数是使用主成分转换的数据。我认为`prcomp`并将`princomp`这些作为输出。然后只需选择第一列。查看`princomp`or `prcomp`( `?prcomp`, `?princomp`) 的文档，特别是 Value 部分（描述函数返回的内容）和示例部分。

# android - Android-将 byte[] 转换为具有 1,440,000 行的字符串

> ID：10267582
> 
> 赞同：0
> 
> 时间：2012-04-22T11:35:03.110
> 
> 标签：android, byte

下面是显示内存不足问题的 logcat 结果。

它可能与太大的 byte[] 数组有关。

* * *

04-17 22:21:38.773: W/dalvikvm(4963): threadid=1: 线程退出未捕获异常 (group=0x40a4d1f8) 04-17 22:21:38.781: E/AndroidRuntime(4963): 致命异常: main 04-17 22:21:38.781: E/AndroidRuntime(4963): java.lang.OutOfMemoryError 04-17 22:21:38.781: E/AndroidRuntime(4963): 在 java.nio.CharBuffer.put(CharBuffer.java: 509) 04-17 22:21:38.781: E/AndroidRuntime(4963): 在 java.nio.charset.CharsetDecoder.allocateMore(CharsetDecoder.java:238) 04-17 22:21:38.781: E/AndroidRuntime(4963) : 在 java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:195) 04-17 22:21:38.781: E/AndroidRuntime(4963): 在 java.nio.charset.Charset.decode(Charset.java:487 ) 04-17 22:21:38.781: E/AndroidRuntime(4963): 在 java.lang.String.(String.java:174) 04-17 22:21:38.781: E/AndroidRuntime(4963): 在 java. lang.String.(String.java:141)

## 04-17 22:21:38.781: E/AndroidRuntime(4963): atexam.militarymgrs.Draw_LOS.readFile(Draw_LOS.java:182)

Draw_LOS.java:182 如下。（字符串 s = 新字符串（dat）；）

- - - -源代码 - - - - - - -

```
public static ArrayList<String> readFile(String fileName) {
//map data access
String sdPath;
sdPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/";

File file = new File(sdPath+fileName);
//String[] k = new String[1440000];
//String line = "";

ArrayList<String> data = new ArrayList<String>();//consider using ArrayList<int>
try {
FileInputStream fis = new FileInputStream(file);
byte[] dat = new byte[fis.available()];
String s = new String(dat);
String[] k = s.split("[\\r\\n]+");
while(fis.read(dat) != -1) {;}
fis.close();

}
catch(FileNotFoundException fN) {
fN.printStackTrace();
}
catch(IOException e) {
System.out.println(e);
}
return data; 
} 
```

* * *

应该加载的文件如下

12 32 43 ...

如何使用 fileStream 在没有内存不足的情况下读取数据文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:17:47.097

尝试使用这个：

```
public static String toBinaryString(byte n) {
StringBuilder sb = new StringBuilder("00000000");
for (int bit = 0; bit < 8; bit++) {
if (((n >> bit) & 1) > 0) {
sb.setCharAt(7 - bit, '1');
}
}
return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:19:21.337

而不是玩弄字节，你最好尝试一种不同的方法，将字符串解析留给[字符串解析器](http://developer.android.com/reference/java/util/Scanner.html)并收集输出：

```
public static ArrayList<int> readFile(String fileName) {  // or ArrayList<short>
    String sdPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/";

    Scanner s = new Scanner(new FileInputStream(new File(sdPath + fileName)));

    ArrayList<int> data = new ArrayList<int>();

    while( s.hasNext() ) {
        data.add( s.nextInt() );
    }

    return data; 
} 
```

# r - 在 scale_fill_manual ggplot 调用中以编程方式指定颜色

> ID：10267583
> 
> 赞同：5
> 
> 时间：2012-04-22T11:35:06.677
> 
> 标签：r, ggplot2

我想根据特定列中给出的值为 ggplot2 平面图的背景着色。使用我已经问过的先前问题的答案，我能够将我需要的东西拼凑在一起。@joran 对[这个](https://stackoverflow.com/questions/9847559/conditionally-change-panel-background-with-facet-grid)问题的回答特别有用，因为它说明了创建单独的数据框以传递给 ggplot 的技术。

这一切都很好，给出了下图所示的输出： ![按区域着色的面](../Images/bead96bd623f54f83bb623999836a2a7.png)

这是我用来生成上述图的代码：

```
# User-defined variables go here

list_of_names <- c('aa','bb','cc','dd','ee','ff')
list_of_regions <- c('europe','north america','europe','asia','asia','japan')

# Libraries

require(ggplot2)
require(reshape)

# Create random data with meaningless column names
set.seed(123)
myrows <- 30
mydf <- data.frame(date = seq(as.Date('2012-01-01'), by = "day", length.out = myrows),
                   aa = runif(myrows, min=1, max=2),
                   bb = runif(myrows, min=1, max=2),
                   cc = runif(myrows, min=1, max=2),
                   dd = runif(myrows, min=1, max=2),
                   ee = runif(myrows, min=1, max=2),
                   ff = runif(myrows, min=1, max=2))

# Transform data frame from wide to long

mydf <- melt(mydf, id = c('date'))
mydf$region <- as.character("unassigned")

# Assign regional label

for (ii in seq_along(mydf$date)) {
    for (jj in seq_along(list_of_names)) {
        if(as.character(mydf[ii,2]) == list_of_names[jj]) {mydf$region[ii] <- as.character(list_of_regions[jj])}
    }
}

# Create data frame to pass to ggplot for facet colours
mysubset <- unique(mydf[,c('variable','region')])
mysubset$value <- median(mydf$value) # a dummy value but one within the range used in the data frame
mysubset$date <- as.Date(mydf$date[1]) # a dummy date within the range used

# ... And plot
p1 <- ggplot(mydf, aes(y = value, x = date, group = variable)) +
    geom_rect(data = mysubset, aes(fill = region), xmin = -Inf, xmax = Inf, ymin = -Inf, ymax = Inf, alpha = 0.3) +
    scale_fill_manual(values = c("japan" = "red", "north america" = "green", "asia" = "orange", "europe" = "blue")) +
    geom_line() +
    facet_wrap( ~ variable, ncol = 2)

print (p1) 
```

我正在研究的现实世界脚本旨在用于包含许多不同数据系列的许多不同组，因此该脚本将被重复多次，只有变量发生变化。

这使得清楚地访问用户定义的元素以进行编辑变得很重要，这就是为什么`list_of_names`和`list_of_regions`变量被放在文件开头的原因。（当然，最好根本不需要更改脚本，而是将这些列表定义为外部文件或将它们作为参数传递给脚本。）我试图通过使用这两个`for`循环来分配区域来概括解决方案. 我确实摆弄了一段时间，试图使用`apply`函数获得一个更以 R 为中心的解决方案，但无法让它工作，所以我放弃并坚持我所知道的。

但是，在我的代码中，`scale_fill_manual`调用需要显式传递变量来定义填充颜色，例如`'europe' = 'blue'`. 这些变量将根据我正在处理的数据而有所不同，因此对于当前形式的脚本，我需要为每组数据系列手动编辑脚本的 ggplot 部分。我知道这会很耗时，而且我强烈怀疑它也很容易出错。

**问：理想情况下，我希望能够以编程方式从与先前声明的颜色列表匹配的先前`scale_fill_manual`声明的值列表（在本例中为 from `list_of_regions`）中提取和定义调用所需的值，但我想不出实现这一目标的方法。你有什么想法？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T12:06:31.817

这有帮助吗？

```
cols <- rainbow(nrow(mtcars))
mtcars$car <- rownames(mtcars)

ggplot(mtcars, aes(mpg, disp, colour = car)) + geom_point() +
  scale_colour_manual(limits = mtcars$car, values = cols) +
  guides(colour = guide_legend(ncol = 3)) 
```

![在此处输入图像描述](../Images/d306b8b2aea5d06548c449383a2c153a.png)

# fancybox - Fancybox 内联只是不工作

> ID：10267587
> 
> 赞同：0
> 
> 时间：2012-04-22T11:36:03.717
> 
> 标签：fancybox, inline

(http://www.kamgar.nl/test)

```
<html>
<head>
    <title>Tester</title>

    <link rel="stylesheet" href="helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />

    <script type="text/javascript">
        $(document).ready(function() {
            $("#popups").fancybox({
                maxWidth    : 800,
                maxHeight   : 600,
                fitToView   : false,
                width       : '70%',
                height      : '70%',
                autoSize    : false,
                closeClick  : false,
                openEffect  : 'none',
                closeEffect : 'none'
            });
        });
    </script>

</head>
<body>

        <a id="popups" href="#servicesRecovery">Open</a>

        <div style="display:none;">
            <div id="servicesRecovery">Hello!</div>
        </div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.fancybox.pack.js"></script>
</body> 
```

...我什么都没有得到，没有错误，什么都没有，我做错了什么？！

有人请帮我解决这个问题，因为我马上就会秃顶！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:08:08.743

移动这些：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.fancybox.pack.js"></script> 
```

...**在**您的 fancybox 自定义脚本上方...或将您的 fancybox 自定义脚本移动到这些行**下方。**这只是一个问题或初始化顺序。

**编辑**：我刚刚检查了您的示例网站，您缺少正确的`DOCTYPE`和花式的 CSS 文件（您仅添加了 thumbs CSS 文件）

# terminal - 我怎样才能让 chmod -R 为我工作？（不允许操作）

> ID：10267588
> 
> 赞同：1
> 
> 时间：2012-04-22T11:36:09.117
> 
> 标签：terminal, osx-snow-leopard

当我尝试做类似的事情时：

```
chmod -R ug+rw files 
```

在包含现有内容的文件夹上，我得到：

chmod: Unable to change file mode on [fill in the blank]: 不允许操作。

它在我自己的计算机上的一个站点上（我是它的管理员）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:52:41.900

做`sudo chmod -R ug+rw files`。您必须是所有文件的所有者才能更改权限，除非您使用 root 权限进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T17:38:22.943

在我的 Mac 上，我发现我需要运行这个：

```
chflags -R nouchg /path/to/folder 
```

# php - SQL 语句给了我一个错误，虽然看起来很好

> ID：10267591
> 
> 赞同：1
> 
> 时间：2012-04-22T11:36:27.400
> 
> 标签：php, mysql, sql

以下是我的PHP代码

```
$till=2;
$tilll=$till + 5;

$result = mysql_query("SELECT * FROM test where id >=".$till."AND id <= ".$tilll) 
```

当我运行它时，我收到以下消息

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'id <= 7' 附近使用正确的语法

我不知道它有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T11:37:57.393

如果您尝试显示您的查询，我想您会看到错误。SQL 可能看起来像这样：

```
SELECT * FROM test where id >=2AND id <= 7 
```

您在 AND 之前缺少一个空格。尝试这个：

```
$result = mysql_query("... id >=".$till." AND id <= ".$tilll)
#                                        ^ extra space here 
```

您还需要用分号终止 PHP 语句。我假设您正在这样做并且只是忘记发布它，但最好仔细检查正确位置是否有分号。

我还建议您使用`BETWEEN`而不是`id >= ... AND id <= ...`，并为变量提供合理的名称：

```
$sql = "SELECT * FROM test WHERE id BETWEEN " . $min_id . " AND " . $max_id;
$result = mysql_query($sql);
if ($result) {
    # Read results.
} else {
    # Handle error.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:38:28.317

在 AND 之前缺少一个空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:42:59.860

对于调试这样的事情，首先将查询保存到字符串，然后在执行之前转储它是有意义的。

```
$query = "SELECT ...";
print "Query: '$query'";
$result = mysql_query($query); 
```

# java - servlet + ajax + jsp

> ID：10267592
> 
> 赞同：1
> 
> 时间：2012-04-22T11:36:31.127
> 
> 标签：java, ajax, jsp, servlets

嘿，在使用 Ajax 调用 servlet 后，我​​试图用一些文本填充在 jsp 文件中声明的文本字段。xmlhttp.responseText 包含 servlet 返回的文本，但带有消息 id 的输入没有填充该文本，我不知道为什么。有什么建议么？使用的代码如下。

```
function ajaxFunction() {
  if(xmlhttp) { 
   var txtname = document.getElementById("txtname");
    xmlhttp.open("POST","getname",true); //getname will be the servlet name
    xmlhttp.onreadystatechange  = handleServerResponse;
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xmlhttp.send("txtname=" + txtname.value); //Posting txtname to Servlet
  }
}

function handleServerResponse() {
    //alert(xmlhttp.readyState);//ok    
   if (xmlhttp.readyState == 4) {
       alert(xmlhttp.status);
     if(xmlhttp.status == 200) {
         alert(xmlhttp.responseText); // this is ok
         document.getElementById("message").innerHTML=xmlhttp.responseText; // doesn't work
       //document.myForm.message.innerHTML=xmlhttp.responseText; //neither
     }
     else {
        alert("Error during AJAX call. Please try again");
     }
   }
}
</script>

<body>
  <form name="myForm" method="POST" action="/ajjax/getname">
    <table>
      <tr>
        <td>Enter Name</td>
        <td><input type="text" name="txtname" id="txtname" /></td>
      </tr>
      <tr>
        <td colspan="2"><input type="button" value="Submit" onclick="ajaxFunction();" /></td>
      </tr>
    </table>
    <input type="text" name="message" id="message" />  
  </form>
</body>
</head> </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:40:23.417

试试这个：

```
document.getElementById("message").value = xmlhttp.responseText; 
```

`<input/>`字段具有`value`属性，`innerHtml`不起作用（至少按预期）。

# java - 如何访问我的 android 应用程序中的资产文件夹？

> ID：10267594
> 
> 赞同：4
> 
> 时间：2012-04-22T11:36:39.030
> 
> 标签：java, android, android-assets

我正在为一个朋友写一个小项目。记事卡应用程序。我的计划是将记事卡放在 xml 格式中，以便我可以轻松地导入和导出它们。我在 assets/xml/mynotecard.xml 文件夹中找到了 xml 文件，但我无法访问该文件。

每当我尝试解释 xml 文件（稍后将放在课堂上）时，我都会遇到异常：test.xml 不是文件。这是我的代码的摘录：

公共类 NotecardProActivity 扩展 Activity {

```
List<String> xmlFiles;
public ArrayList<File> xmlFileList;
XMLInterpreter horst;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   final AssetManager mgr = getAssets();

    displayFiles(mgr, "",0); 
     xmlFiles = displayFiles(mgr, "xml",0); 
     for (int e = 0; e<=xmlFiles.size()-1;e++)
     {
        Log.v("Inhalt List"+e+": ", xmlFiles.get(e));
     }     

    xmlFileList = new ArrayList<File>();
    for (int i = 0; i<=xmlFiles.size()-1;i++)
    {

        xmlFileList.add(new File("./assets/xml/"+xmlFiles.get(i)));
    }
    for (int i = 0; i<=xmlFileList.size()-1;i++)
    {
        Log.v("Name: ", xmlFileList.get(i).getName());
        Log.v("Filelocation: ",xmlFileList.get(i).getPath());
        Log.v("Filelocation: ",xmlFileList.get(i).getAbsolutePath());               
    }
    Log.v("DEBUG","XML FILE LISTE erfolgreich geschrieben!");

    //Alternative zum ausgelagerten XML INTERPRETER
    try
    {
    if(xmlFileList.get(0) == null){
        Log.v("Debug", "XMLFILE IS NULL");
    }
    else{
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(xmlFileList.get(0));
    doc.getDocumentElement().normalize();

    Log.v("Root element :", doc.getDocumentElement().getNodeName());
    NodeList nList = doc.getElementsByTagName("notecard");

    for (int temp = 0; temp < nList.getLength(); temp++) {

           Node nNode = nList.item(temp);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;    
              Log.v("GesetzesText: " , getTagValue("legal_text", eElement));
             // System.out.println("Kommentar : " + getTagValue("comment", eElement));                   
           }
        }
    }
    }
    catch (Exception e) {
        e.printStackTrace();
      }

    mgr.close();                
}

private List<String> displayFiles (AssetManager mgr, String path, int level) {
    List<String> abc = new ArrayList<String>();
    Log.v("Hello","enter displayFiles("+path+")");
   try {
       String list[] = mgr.list(path);
       abc.addAll(Arrays.asList(list));
        Log.v("Hello1","L"+level+": list:"+ Arrays.asList(list));

   } catch (IOException e) {
       Log.v("Fail","List error: can't list" + path);
   }
return abc; 
```

}

```
private String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

    Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
} 
```

}

如果你们能帮助我，那就太棒了:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:48:10.737

压缩您的 xml 文件夹（例如 xml.zip）并将其放入资产中。使用 AssetsManager 获取资产非常慢。此外，这样做您可以维护您的目录结构并将其复制到 sdcard 并在那里解压缩。这比获取目录中的每个文件要快得多。您可以使用这篇文章进行解压缩：[如何在 Android 中以编程方式解压缩文件？](https://stackoverflow.com/questions/3382996/how-to-unzip-files-programmatically-in-android). 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:40:47.333

资产应该在文件夹的根目录中......不能将文件放在子文件夹中。 **assets\file.suf**可以工作，而**assets\sub\file.suf**不能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:41:15.773

```
android.resource://packagename/assets/filename 
```

您可以使用上面的行来引用资产文件夹中的文件。只需替换包名和文件名即可。

**注意**文件名不能包含扩展名

更新：：

```
private List<String> getFiles(){
 AssetManager assetManager = getAssets();
    List<String> files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", e.getMessage());
    }
} 
```

# javascript - url-Encode vs Base64 编码（用法）？

> ID：10267597
> 
> 赞同：28
> 
> 时间：2012-04-22T11:36:58.580
> 
> 标签：javascript, asp.net, query-string, base64, encodeuricomponent

我在想...

*（除了base64的加号'+'在查询字符串中的问题-它被翻译成'空格'并且可以通过%2b解决）* :--->这是在查询字符串中传输数据的首选方式？

这两个功能都可以通过 JS 命令使用：

*   `btoa`
*   `encodeUriComponent`

所以我问自己（和你）：

**我什么时候**应该使用**什么**？（我一直使用 `encodeUriCompoonent`- 本能）。

定义不同的问题 - 但实现可能相似......

## 编辑

我想我找到了问的原因......（以及为什么以前没有人问过）

![在此处输入图像描述](../Images/0069064d65f3fd87562b2ab83729975c.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T11:46:20.237

**base64**用于传输二进制数据。*（在 IE 中不支持，不能编码空间字符。）*

**encodeURIComponent**只对特殊字符进行编码。

有趣的是，如果没有 encodeURIComponent，您将无法将 base64 应用于 unicode 字符串： [https ://developer.mozilla.org/en/DOM/window.btoa](https://developer.mozilla.org/en/DOM/window.btoa)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T11:53:17.437

答案完全取决于您的服务器端应用程序。

***'+'***不会被客户端转换为***'space'*** - 它会被一些服务器端应用程序自动转换为***'space'***，主要是出于向后兼容的原因（相反，一些服务器端应用程序会将***'+'***保留为***'+'***符合[RFC3986](http://www.faqs.org/rfcs/rfc3986)）。

就客户端而言 - `btoa()`and `encodeURIComponent()`(and `encodeURI()`and `escape()`) 只是根据不同的编码或转义算法将文本字符串编码为不同的抽象字符串 -通常使用**base64**`btoa()`编码产生最小的结果字符串，但[meze 的评论](https://stackoverflow.com/a/10267669/210865)re: unicode isworthing into帐户在这里。

 **需要注意的重要一点是您的服务器端应用程序（在您的情况下是一些基于 ASP.NET 的设置）然后用于将该字符串解码回其原始形式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T11:46:10.873

fwiw，每当我想在服务器和客户端之间传输任何可以是 unicode 的东西时，我都会使用 base64。urlencode 不能很好地处理所有 unicode 字符。它很快就会把所有的百分比符号弄得一团糟。

所以，简而言之：期待 unicode 输入/输出，总是 base64 传输。**

# android - 是否有最小宽度小于某个值的限定符？

> ID：10267598
> 
> 赞同：0
> 
> 时间：2012-04-22T11:37:00.293
> 
> 标签：android, android-layout

我正在开发一个应用程序，它对各种屏幕具有不同的布局和值文件，然后我遇到了一个问题：smallestWidth 限定符只检查设备 minimumWidth 是否大于指示值。

当我有以下文件夹结构时，这很麻烦：

```
res/layout-port-mdpi
res/layout-sw720dp
res/layout-sw720dp-port
res/layout-sw720dp-land 
```

在这种情况下，在`mdpi` `sw720` `port`设备上，Android 将使用`res/layout-port-mdpi`而不是`res/layout-sw720dp-port`我真正想要使用的。`res/layout-port-mdpi`适用于较小的手机。

有没有办法指示最小宽度小于**719dp**，或者我是否需要`res/layout-sw720dp-port-mdpi`为所有其他 dpi 创建和？听起来很愚蠢。

谢谢你的友好回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:35:36.943

> res/layout-port-mdpi 适用于较小的手机。

不它不是。它适用于具有中等密度屏幕的纵向设备。它对尺寸没有任何规定。

> 在这种情况下，在 mdpi sw720 端口设备上，Android 将使用 res/layout-port-mdpi 而不是我真正想要使用的 res/layout-sw720dp-port。

No.`-sw720dp`是比 is 更强的标准*，*`-mdpi`因此应该使用纵向`-sw720dp` *且* 纵向的设备。`-mdpi` *`res/layout-sw720dp-port`*

 *> 有没有办法表示 minimumWidth LESS 比 719dp

并不真地。`-swNNNdp`如果设备的值低于您使用的任何此类资源集，Android 将使用没有任何值的资源集。

> 我是否需要为所有其他 dpi 创建 res/layout-sw720dp-port-mdpi？

不。

例如，如果您的目标是让一些布局专门用于`-sw720dp`设备，而其他布局用于较小的设备，每种尺寸都有一些不同的横向布局，那么您的目录将是：

*   `res/layout-sw720dp-land/`对于`-sw720dp`横向设备
*   `res/layout-sw720dp/`适用`-sw720dp`于非横向设备
*   `res/layout-land/`适用于比`-sw720dp`横向放置的设备更小
*   `res/layout/`对于小于非`-sw720dp`横向的设备

拥有 中的每个布局之一`res/layout/`，并仅在需要时使用更多约束覆盖资源集中的这些布局。*

# java - 如何在 libgdx 中命名演员？

> ID：10267599
> 
> 赞同：1
> 
> 时间：2012-04-22T11:37:03.243
> 
> 标签：java, libgdx

演员在下面没有名字。在 libgdx 中，为每个演员分配名称的最佳方式是什么？

```
public class JewelsMainActivity implements ApplicationListener, InputProcessor {

private Vector2 point = new Vector2();
public TextureAtlas jewelsAtlas;
public Texture jewels;
private SpriteBatch batch;  
public Actor[][] actors = new Actor[10][10];
public Stage stage;
public int gridSize;

@Override
public void create() {
    stage = new Stage(800, 600, false);
    gridSize = 10;
    batch = new SpriteBatch();
    jewels = new Texture(Gdx.files.internal("assets/gems1.png"));
    jewelsAtlas = new TextureAtlas(Gdx.files.internal("assets/pack"));
    for (int z = 0; z < gridSize; z++) {
        for (int x = 0; x < gridSize; x++) {
                Random r = new Random();
                int j = r.nextInt(2)+1;
                actors[x][z] = new Image(jewelsAtlas.findRegion(""+j+""));
                actors[x][z].x = x*56; //each gem is 56*56 width / height
                actors[x][z].y = z*56; 
```

// 演员[x][z].name = "演员"+x+z; // 不能在上面使用它，因为它不允许....

```
 stage.addActor(actors[x][z]);

        }
    }
    Gdx.input.setInputProcessor(this);
}

@Override
public void render() {
      Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT); 
      batch.begin();
      stage.draw();
      batch.end();
}

@Override
public boolean touchDown(int x, int y, int pointer, int button) {
       stage.toStageCoordinates(Gdx.input.getX(), Gdx.input.getY(), point);
       Actor actor = stage.hit(point.x, point.y);
        if (actor != null){

            Gdx.app.log("name", actor.name); 
```

// actor.name 为空

```
 Gdx.app.log("hashCode", ""+actor.hashCode());
            ((Image)actor).color.set((float)Math.random(), (float)Math.random(), (float)Math.random(), 0.5f + 0.5f * (float)Math.random());
        }
    return false;
} 
```

……………………

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:05:38.410

该名称是最终的，因此必须在构造函数中定义。

你在哪里

`actors[x][z] = new Image(jewelsAtlas.findRegion(""+j+""));`

采用

`actors[x][z] = new Image(jewelsAtlas.findRegion(""+j+""), Scaling.none, Align.CENTER, "myawesomenewname");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T08:32:22.657

Actor.setUserObject(对象 obj); 或许也能派上用场。

例如actors[x][z].setUserObject("nameHere");

[http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#setUserObject-java.lang.Object-](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#setUserObject-java.lang.Object-)

# css - margin-left 基于当前元素的大小

> ID：10267600
> 
> 赞同：1
> 
> 时间：2012-04-22T11:37:22.530
> 
> 标签：css

是否可以将 margin-left 中的百分比设置为图像大小的百分比而不是包含元素？[这是一个例子。](http://jsfiddle.net/8MP73/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:11:57.817

此链接中提出了类似的问题：[CSS的值计算](https://stackoverflow.com/questions/527861/value-calculation-for-css)

同样，据我所知，CSS 不是一种能够在选择器之间或选择器的属性值之间实现复杂互操作性的语言。

因此，您可以选择的最佳方法可能是使用 JavaScript 或 jQuery 等 JavaScript 库，以便找出某个属性值的某个百分比究竟对应于什么。然后，您当然可以使用 JS/jQuery 动态地将相应的值分配给您想要的属性。

# javascript - 用于 Netbeans IDE 的 JQuery-Mobile 代码辅助（代码（自动）完成、代码提示）

> ID：10267603
> 
> 赞同：2
> 
> 时间：2012-04-22T11:38:12.157
> 
> 标签：javascript, netbeans, jquery-mobile, code-completion, code-hinting

Netbeans IDE 是否有任何代码辅助（代码完成、代码提示）功能或插件（不是用于文本输入字段（例如名称或状态）的自动完成，而是用于编码的代码辅助（！））？

据我所知，目前只有 Dreamweaver CS5.5 支持此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:21:27.847

我想我们可以在这里降低未答复率：

如果应用程序（Netbeans）要解析脚本以获取函数名称，那么您应该给它一个带有函数名称的文件，而不是[缩小](http://www.google.com/webhp?q=define%3aminified)/[混淆](http://www.google.com/webhp?q=define%3aobfuscated)的版本。

# actionscript-3 - 在 Actionscript 3 游戏中设置子弹的射速

> ID：10267604
> 
> 赞同：1
> 
> 时间：2012-04-22T11:38:12.453
> 
> 标签：actionscript-3, actionscript

我想在我制作的 Actionscript 3 游戏中限制子弹的射速。任何帮助将非常感激。下面是我的代码。

```
//shooting bullet
function shoot(Evt:MouseEvent)
{
    var sound2 = new bullet_shoot();
    sound2.play();
    if (bulletCounter < 5)
    {
        bulletCounter++;
    }
    else
    {
        bulletCounter = 0;
    }
    shootmc(bulletArray[bulletCounter]);
}

function shootmc(mc:MovieClip)
{
    mc.visible = true;
    mc.x = spaceman_mc.x;
    mc.y = spaceman_mc.y;
    mc.gotoAndPlay(2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:00:03.850

In `function shoot()`, set a delay/countdown variable which prevents shooting if larger than `0`. For example:

```
function shoot(Evt:MouseEvent) {
    if (shootDelay == 0) {

        // set shoot delay
        shootDelay = 10;

        // shoot logic
        var sound2 = new bullet_shoot();
        if (bulletCounter < 5) bulletCounter++;
        else bulletCounter = 0;
        shootmc(bulletArray[bulletCounter]);
    }
} 
```

Now, you must still ensure that `shootDelay` is decreased once per frame/update if it is larger than `0`, otherwise you would never be able to fire again. You can either call an `update()` method each frame, or subscribe to the `ENTER_FRAME` event and do your update in the corresponding event listener. A simple `update()` method would look like this:

```
public function update():void {
    if (shootDelay > 0) shootDelay --;
} 
```

Good luck.

# svn - SVN：在 Repo 浏览器中重命名，同时保持工作副本同步

> ID：10267605
> 
> 赞同：6
> 
> 时间：2012-04-22T11:38:13.700
> 
> 标签：svn, tortoisesvn

我已经在 repo 中重命名了一个分支，并且不小心继续使用相同的工作副本（在重命名之前从该分支签出）。当我后来尝试提交时，我注意到工作副本仍然以旧路径为目标。我想将更改提交到 repo 中的新路径，同时保留历史记录等...

SVN 有一个优雅的方式来解决这个问题吗？

我阅读了有关 Switch 和 Relocate 命令的信息，但我不确定它们中的任何一个是否完全适合我的问题（所描述的场景不同），而且我一直对在 SVN 中尝试命令感到有点害怕......有没有人有这些命令的经验？

我想我可以解决这个问题，例如，将重命名的项目签出到另一个工作副本，然后用更改覆盖它（除了 SVN 元数据之外）。我还可以编写一些脚本来查找所有出现的旧路径并将它们粗暴地更改为新路径，但我认为必须为此使用某种 SVN 命令。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T12:10:37.477

如果存储库 URL 更改，您需要**重新定位**您的工作副本。**switch**命令用于更改工作副本指向的分支。概念本身很清楚。

但是您谈论**项目**，我想这就是您面临的问题：您不会在 Subversion 文档中找到对项目的任何引用，因为这不是 Subversion 概念。

在 Subversion 中实现项目有两种基本方法：

1.  为每个项目创建一个存储库：

    *   `https://example.com/svn/foo/trunk`
    *   `https://example.com/svn/bar/trunk`
2.  在同一存储库中为每个项目创建一个分支：

    *   `https://example.com/svn/projects/foo/trunk`
    *   `https://example.com/svn/projects/bar/trunk`

因此，当您说“重命名项目”时，您的意思是“重命名存储库”（＃1）或“重命名分支”（＃2），解决方案是：

1.  `svn relocate`再次将您的工作副本与存储库链接
2.  将更改`svn update`带到您的工作副本（如果更改在工作副本目录树内）或`svn switch`更改您的工作副本指向的分支（如果您有效地删除了当前分支）。

**更新**：到目前为止，我的建议是你从头开始。重命名您当前的工作副本，签出一个新副本，然后使用 WinMerge 或 Kdiff3（或 TortoiseMerge）等常规文件比较工具重新应用待定更改。如果日志中不明显，那么尝试找出您所做的确切更改没有任何好处。

未来……你不需要背诵完整的 Subversion 书籍，但你应该了解基本概念，尤其是。当它们被证明是您日常工作中的一个问题时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:53:57.120

您是否尝试过使用 svn 开关..

```
switch --relocate OLDURL TO NEWURL 
```

这应该可以解决您的问题。

# java - Java SQL 查询内存泄漏

> ID：10267610
> 
> 赞同：0
> 
> 时间：2012-04-22T11:38:36.777
> 
> 标签：java, memory, heap-memory

我有一个应用程序迭代大量的结果集并从不同的表中查询每一行的附加信息。

大致的结构是这样的：

```
public void main(String[] args) {
    ResultSet result = database.connection.createStatement()
                           .executeQuery("SELECT * FROM entities");
    ArrayList<Entity> entities = new ArrayList<Entity>();
    while (result.next() {
        Entity entity = EntityFactory.createById(result.getInt("id"));
        entities.add(entity);
    }
}

// EntityFactory
public static Entity createById(int id) {
    StringBuilder sql = new StringBuilder("SELECT * FROM sampling_data WHERE id = ")
                            .append(id);
    ResultSet result = database.connection.createStatement()
                            .executeQuery(sql.toString());
    result.first();
    EntityData data = new EntityData(25);

    for (int sample = 1; sample <= 25; sample++) {
        String sample_R = new StringBuilder("sample_")
                              .append(sample).append("_R").toString();
        String sample_G = new StringBuilder("sample_")
                              .append(sample).append("_G").toString();
        String sample_B = new StringBuilder("sample_")
                              .append(sample).append("_B").toString();

        int r = resultSet.getInt(sample_R);
        int g = resultSet.getInt(sample_G);
        int b = resultSet.getInt(sample_B);

        data.add(r, g, b);
    }

    return new Entity(data);
} 
```

这会导致 OutOfMemoryException。

如何使循环（或整个方法）的内存效率更高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:32:10.210

从代码的一瞥中很难分辨，但我认为这与完全获取的行数过多有关。

你应该使用[setFetchSize(int rows)](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#setFetchSize%28int%29)在你`Statement`的行数合理（可能是 100 行）。

```
 private static int FETCH_SIZE = 100;
    ...
    Statement stmt = databaseConnection.createStatement()
    stmt.setFetchSize();
    ResultSet result = stmt.executeQuery("SELECT * FROM sampling_data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:33:36.330

> 似乎 getInt() 方法在循环中执行时会使用大量内存。

这是不正确的。没有什么特别`getInt()`的原因导致你的问题。

您的架构打破了关系数据库的第一个正常形式。看到`sample_1_R, sample_1_G, sample_1_B`也让我质疑你的其他决定。这显然是一种`1:m`关系。像 25 这样的幻数也是如此。

我想知道您为什么要使用 String builder 和 int 来做所有这些事情。我会将这些 RGB 值封装到一个有意义的对象中，例如`java.awt.Color`.

我们在这里谈论多少数据？

```
25*3*32*2500 ~ 5.7 MB 
```

这对于您的 2500 行来说并不多，每行都有 75 个整数值。从您的代码中不清楚的其他事情正在发生。

更新：

您`(n+1)`在此代码中犯了典型的查询错误。您获得所有实体，然后遍历它们以获取 RGB 值。我建议做一个 JOIN 并立即将它们全部带回来。这可能无法解释您的内存问题，但这是一个问题。

当您查询 RGB 值时，您会重复建立列名。这完全是浪费。使它们`static final String`成为数组中的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:45:06.603

最大的问题是（我认为）createById 没有关闭结果集和语句。此外，没有 nx1 查询是有意义的。

```
 try {
        Statement stmt = database.connection.createStatement();
        ResultSet result = stmt.executeQuery("SELECT * FROM sampling_data d"
            + " WHERE EXISTS(SELECT * FROM entities e WHERE e.id = d.id)");
        List<Entity> entities = new ArrayList<Entity>();
        while (result.next()) {
            Entity entity = EntityFactory.createById(result);
            entities.add(entity);
        }
        result.close();
        stmt.close();
    } catch (SQLException ex) {
        Logger.getLogger(Test1.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

和

```
// EntityFactory
public static Entity createById(ResultSet resultSet) {
    EntityData data = new EntityData(25);
    for (int sample = 1; sample <= 25; sample++) {
        String sample_R = new StringBuilder("sample_").append(sample).append("_R").toString();
        String sample_G = new StringBuilder("sample_").append(sample).append("_G").toString();
        String sample_B = new StringBuilder("sample_").append(sample).append("_B").toString();
        int r = resultSet.getInt(sample_R);
        int g = resultSet.getInt(sample_G);
        int b = resultSet.getInt(sample_B);

        data.add(r, g, b);
    }

    return new Entity(data);
} 
```

# c# - 反射找不到实现的方法

> ID：10267613
> 
> 赞同：2
> 
> 时间：2012-04-22T11:39:01.103
> 
> 标签：c#, reflection, windows-phone

我不明白为什么我对这条线有异常：

```
public void DoIt(object sender, MyEventArgs e) {
 //... other stuff
 Type type = sender.GetType(); 
 if (type.GetMethod(e.ActionName, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance) == null)
    throw new NotSupportedException("Method: " + e.ActionName + " not implemented");
 type.InvokeMember(e.ActionName, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.InvokeMethod | System.Reflection.BindingFlags.Instance, null, sender, e.Parameters.ToArray());

} 
```

我仍然收到有关未找到方法的错误，但我确定这是因为调用之前的 if 语句中的条件为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:53:14.960

实际上，这是一项[安全功能](http://forums.silverlight.net/t/31698.aspx/1)。我以前在 Silverlight 中遇到过这种情况——您根本*无法*反映该平台上的私有类成员。由于 Windows Phone 与 Silverlight 非常相似，我很确定同样的限制也适用于那里。

# php - 带有服务器主机变量的ErrorDocument 404？

> ID：10267618
> 
> 赞同：1
> 
> 时间：2012-04-22T11:39:52.467
> 
> 标签：php, configuration, http-status-code-404, apache

我有一个带有子域的网站。有两个不同的站点，一个可以在 domain.ph 或 www.domain.ph 访问，另一个有一个子域，假设它的 health.domain.ph

所以，两者都在同一个 apache 服务器上，但是对于每个域 404 错误应该以不同的方式处理......如果我们在主域出错，它应该向我们发送 domain.ph/404.php，但如果我们尝试打开非health.domain.ph 上的现有页面应该将我们发送到 health.domain.ph/404.php

我想将服务器变量添加到 ErrorDocument 404 %???% /404.php 到 httpd.conf，但我找不到任何东西......我可以在配置文件中使用任何变量吗？

# python - Python：从类中的其他类变量访问类变量 - 可能吗？

> ID：10267620
> 
> 赞同：0
> 
> 时间：2012-04-22T11:39:54.290
> 
> 标签：python, class-variables

是否可以在 python 中从同一类中的其他类变量中寻址类变量？

我的问题是：我正在尝试准备一些静态代码，如下所示：

```
class MyBaseObject:
  SIGNAL_NAME_1 = "signal-name-1"
  SIGNAL_NAME_2 = "signal-name-2"

  ALL_SIGNALS = {
    SIGNAL_NAME_1: ( signal-definition ),
    SIGNAL_NAME_2: ( signal-definition ) } 
```

我对上述问题的看法是，根据 python`SIGNAL_NAME_1`并且`_2`在创建 dict 时没有定义。访问它们`MyBaseObject.SIGNAL_NAME_1`也不起作用（*未知对象*）。

所以问题是 - 是否有可能在 python 中让类变量相互引用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:57:54.427

不，仅使用名称来引用其他类变量应该没有任何问题。`MyBaseObject`但是，在类定义完成之前，您不能将其称为未定义。

您发布的代码可以正常工作（如果`signal`和`definition`已定义），因此如果您收到有关未定义名称的投诉，这意味着您没有发布您使用的确切代码。尝试发布准确的代码和准确且完整的错误消息。

# android - ListView 所需的指针

> ID：10267621
> 
> 赞同：-2
> 
> 时间：2012-04-22T11:40:02.453
> 
> 标签：android, arraylist, android-listview, android-arrayadapter

我正在使用 a`ArrayAdapter`来显示通过 a 保存在数组中的数据`ListView`，我的代码编译得很好，但是当我调用下面的类时，会导致进程以`Sorry application has stopped`异常结束。

```
 public class Timetable extends Activity {

    private ListView timeTableView;
    private ArrayList <Module> Modules;
    private ArrayAdapter <Module> adaptModule;

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.view);

            timeTableView = (ListView) findViewById(R.id.timeTableView);

            adaptModule = new ArrayAdapter<Module>(this, android.R.layout.simple_list_item_1, Modules);
            timeTableView.setAdapter(adaptModule);
     }
    } 
```

这是我的`Add`课程，它处理创建数组并将项目添加到数组中：

```
public class Add extends Activity implements OnClickListener{

private EditText ModuleText;
private EditText RoomText;
private Spinner Day;
private Spinner Start;
private Spinner Duration;
private Spinner Session;
private ArrayList<Module> Modules;

/*
 * OnCreate method for add class
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add);

    // spinner for days
    Spinner day = (Spinner) findViewById(R.id.spinnerDay);
    ArrayAdapter<CharSequence> adapterDay = ArrayAdapter.createFromResource(
            this, R.array.days_array, android.R.layout.simple_spinner_item);
    adapterDay.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    day.setAdapter(adapterDay);

    // spinner for start time
    Spinner startTime = (Spinner) findViewById(R.id.spinnerStart);
    ArrayAdapter<CharSequence> adapterstart = ArrayAdapter.createFromResource(
            this, R.array.start_array, android.R.layout.simple_spinner_item);
    adapterstart.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    startTime.setAdapter(adapterstart);

    // spinner for duration
    Spinner duration = (Spinner) findViewById(R.id.spinnerDuration);
    ArrayAdapter<CharSequence> adapterduration = ArrayAdapter.createFromResource(
            this, R.array.duration_array, android.R.layout.simple_spinner_item);
    adapterduration.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    duration.setAdapter(adapterduration);

    // spinner for class type
    Spinner session = (Spinner) findViewById(R.id.spinnerSession);
    ArrayAdapter<CharSequence> adapterSession = ArrayAdapter.createFromResource(
            this, R.array.session_array, android.R.layout.simple_spinner_item);
    adapterSession.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    session.setAdapter(adapterSession);

    //create array
    Modules = new ArrayList<Module>();

    // ref to UI Widgets
    ModuleText = (EditText) findViewById(R.id.ModuleText);
    RoomText = (EditText) findViewById(R.id.RoomText);
    Day = (Spinner) findViewById(R.id.spinnerDay);
    Start = (Spinner) findViewById(R.id.spinnerStart);
    Duration = (Spinner) findViewById(R.id.spinnerDuration);
    Session = (Spinner) findViewById(R.id.spinnerSession);

    // buttons for this activity also includes listeners
    View addEntryButton = findViewById(R.id.addEntry_button);
    addEntryButton.setOnClickListener(this);
    View cancelEntryButton = findViewById(R.id.cancelEntry_button);
    cancelEntryButton.setOnClickListener(this);

}

/*
 * on click listeners for buttons
 * @see android.view.View.OnClickListener#onClick(android.view.View)
 */
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.cancelEntry_button:
        Intent i = new Intent(this, Home.class);
        startActivity(i);
        break;

    }
     switch (v.getId()) {
        case R.id.addEntry_button:
            Intent i = new Intent(this, Home.class);
            addModule();
            startActivity(i);
            break;
    }

    }

    /* 
     * Method for adding an entry into the table
     */
public void addModule() 
   {
    if(ModuleText !=null || RoomText !=null)
    {
    Modules.add(new Module(ModuleText.getText().toString(), RoomText.getText().toString(), Day.getSelectedItem().toString(), Start.getSelectedItem().toString(), Duration.getSelectedItem().toString(), Session.getSelectedItem().toString()));
    Toast.makeText(getApplicationContext(), "Timetable entry has been added succesfully", Toast.LENGTH_SHORT).show();
    }
    else
    {
        Toast.makeText(getApplicationContext(), "Error adding timetable entry, please check details and try again", Toast.LENGTH_SHORT).show();
    }

   }

} 
```

这是我`logcat`的例外：

```
04-22 11:52:46.290: E/AndroidRuntime(426): FATAL EXCEPTION: main
04-22 11:52:46.290: E/AndroidRuntime(426): java.lang.RuntimeException: Unable to start    activity ComponentInfo{org.assignment.timetable/org.assignment.timetable.Timetable}:   java.lang.NullPointerException
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-22 11:52:46.290: E/AndroidRuntime(426):  at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.os.Looper.loop(Looper.java:123)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-22 11:52:46.290: E/AndroidRuntime(426):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 11:52:46.290: E/AndroidRuntime(426):  at java.lang.reflect.Method.invoke(Method.java:521)
04-22 11:52:46.290: E/AndroidRuntime(426):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-22 11:52:46.290: E/AndroidRuntime(426):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-22 11:52:46.290: E/AndroidRuntime(426):  at dalvik.system.NativeStart.main(Native Method)
04-22 11:52:46.290: E/AndroidRuntime(426): Caused by: java.lang.NullPointerException
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.widget.ListView.setAdapter(ListView.java:436)
04-22 11:52:46.290: E/AndroidRuntime(426):  at org.assignment.timetable.Timetable.onCreate(Timetable.java:25)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-22 11:52:46.290: E/AndroidRuntime(426):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:41:29.520

你永远不会在你的类中初始化这个`Modules`字段，当你在适配器中使用它时，它会抛出你看到的那个。如果您在另一个活动中构建列表，然后尝试在活动中显示它，那么您必须从该活动（可能是活动）传递列表并在适配器中使用该列表。`Timetable``adaptModule``NullPointerException``Modules``Timetable``Modules``Add`

有多种方法可以将其`ArrayList`从一个活动传递到另一个活动，您可以在 Stackoverflow 上查看更多示例，例如：

[Android：如何将 ArrayList<object> 从一个活动传递到另一个活动](https://stackoverflow.com/questions/6433834/android-how-to-pass-arraylistobject-from-an-activity-to-another)

**添加了小例子：**

扩展的类`Application`：

```
/**
 * The class that extends Application, and where we will store our ArrayList
 */
public class MyApplication extends Application {

    /**
     * This will hold your Modules list so we can access it from evry activity
     */
    private ArrayList<Module> mModules;

    /**
     * We will call this method when we want to store the list of modules(for
     * example when we finish adding elements to it(in the Add activity) and we
     * are switching to the Timetable activity)
     */
    public void setModulesList(ArrayList<Module> data) {
        this.mModules = data;
    }

    /**
     * Retrieve the list of modules and work with it(for example to display it
     * in the Timetable activity)
     */
    public ArrayList<Module> getModulesList() {
        return mModules;
    }
} 
```

我们将元素添加到列表的活动`Modules`：

```
public class AddActivity extends Activity {

    // local list of modules on which, in this activity, we will add elements
    private ArrayList<Module> items = new ArrayList<Module>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // simple layout with one Button that will get us to the Timetable
        // activity
        Button b = new Button(this);
        b.setText("I've put something in the Modules arrayList so go to the new activity");
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // we are switching to the other activity so store the list of
                // modules in MyApplication
                ((MyApplication) getApplicationContext()).setModulesList(items);
                Intent i = new Intent(AddActivity.this, Timetable.class);
                startActivity(i);
            }
        });
        setContentView(b);
        // some dummy work, adding elements to the list of Modules.
        for (int i = 0; i < 12; i++) {
            items.add(new Module("Module " + i));
        }

    }
} 
```

我们将在其中显示`Modules`先前创建的列表的活动`AddActivity`：

```
public class Timetable extends ListActivity {

    // private field, that will hold a copy of the list from MyApplication
    private ArrayList<Module> mModules;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // retrieve the list of Modules from MyApplication
        mModules = ((MyApplication) getApplicationContext()).getModulesList();
        // it is possible to not have elements in the list at this time so just
        // create an
        // empty list so we don't throw exceptions
        if (mModules == null) {
            mModules = new ArrayList<Module>();
        }
        // set the adapter
        setListAdapter(new ArrayAdapter<Module>(this,
                android.R.layout.simple_list_item_1, mModules));
    }
} 
```

为了让我们`MyApplication`工作，我们必须在清单中注册它（请参阅应用程序元素和添加的`android:name`标签）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.luksprog.passit"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:name=".MyApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AddActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Timetable"
            android:label="@string/app_name" >
        </activity>
    </application>

</manifest> 
```

最后是`Module`课程：

```
/**
 * A small Module class. 
 *
 */
public class Module {

    String name;

    public Module(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        //This will show a nice string in the `ListView` 
        return "This is:" + name;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:53:39.823

在您的代码模块中没有初始化任何地方。私有 ArrayList 模块；

初始化它...

# prolog - 超级运行时问题（蛮力方法），Prolog

> ID：10267631
> 
> 赞同：3
> 
> 时间：2012-04-22T11:40:39.237
> 
> 标签：prolog, clpfd

我正在尝试根据事实制定时间表，事实以 course_meetings（主题，类型，组，描述）的形式，

我决定使用蛮力方法

我将生成所有可能的时间表，看看哪一个会通过所有约束，但是我生成的事实是 2.6，我该如何优化它，是否有更好的方法。例如。course_meetings（主题、类型、组、讲师、描述）。解决：-

```
findall([A,B,C,D,E],course_meetings(A,B,C,D,E),L),
permutation(L,L1),
%and apply constrains on it. 
```

我有 32 个这种格式的事实和排列它的 32!~= 2.6*10^32

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:17:49.763

Prolog 中设计了有限域上的约束来完全满足这种需求。无需为此使用 assert/rectract。参见例如[library(clpfd)](http://www.swi-prolog.org/man/clpfd.html)。为了让你熟悉，你可以看看[这个例子，一个“简单的学校时间表”](https://www.metalevel.at/simsttab/)和[CLP 入门](https://www.metalevel.at/prolog/clpfd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T12:15:07.873

尝试所有可能的排列似乎不是一个好主意。另一种方法可能是将您的约束表示为 clp(fd) 的有限域约束，并让约束求解器尝试比“尝试一切”更好的策略。

# php - MongoDB PHP 身份验证

> ID：10267634
> 
> 赞同：1
> 
> 时间：2012-04-22T11:40:50.593
> 
> 标签：php, authentication, mongodb

我是 MongoDB 的新手。我2个月前开始使用它。我决定测试一个网站的日志（用户行为）。起初没有用户名和密码。它就像一个魅力。我使用 RockMongo 进行管理。然后我创建了用户名和密码并重新启动了服务器。重新启动后，我的脚本无法将数据放入数据库。但是，当我更新 RockMongo 的设置时，它会出现问题，我可以通过 RockMongo 插入/更新。我在带有 PHP5 的 Ubuntu 10 上使用 MongoDB。我的代码如下所示：

```
 $m = new Mongo();
    $db = $m->testlogs;
    $db->authenticate('username', 'password'); 
```

我也不能使用外壳。尝试进行身份验证时出现以下错误：

“$err”：“未经授权的数据库：testlogs 锁定类型：-1 客户端：127.0.0.1”，“代码”：10057

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T16:01:28.897

您需要先连接到特定的数据库。仅访问 $m->testlogs 不会这样做。相反，您需要用作第一行：

```
$m = new Mongo('mongodb://localhost/testlogs'); 
```

并且您可以选择执行以下操作：

```
$m = new Mongo('mongodb://username:password@localhost/testlogs'); 
```

这允许您放弃 ->authenticate() 调用。[http://php.net/manual/en/mongodb.authenticate.php](http://php.net/manual/en/mongodb.authenticate.php)上的文档 还说：

> 通常，您应该优先使用 Mongo::__construct() 中内置的身份验证，而不是此方法。如果您在连接时进行身份验证，并且在会话期间连接断开并重新连接，您将被重新进行身份验证。如果您使用此方法手动进行身份验证并且连接断开，则您必须在重新连接后再次调用此方法。

# c# - 彗星性能问题

> ID：10267636
> 
> 赞同：1
> 
> 时间：2012-04-22T11:41:04.227
> 
> 标签：c#, javascript, wcf, comet, server-push

我正在研究如何在我的应用程序中实现 Comet。我知道对于每个请求，客户端和服务器之间应该有一个开放的连接。不假设在我的应用程序中我有 10 个请求（将数据从服务器推送到客户端），而我只有 10 个在线用户，现在我应该在客户端和服务器之间打开 100 个（10*10）连接。可以吗？它没有任何性能问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:58:40.047

With Comet or with web sockets, you would have one connection open between each user and each server. You can then send multiple requests across the one connection.

So, for 10 users, your server would have 10 connections (one for each user).

# r - 图例中的较长行（）

> ID：10267639
> 
> 赞同：8
> 
> 时间：2012-04-22T11:41:14.837
> 
> 标签：r, graph, plot, legend

我有一个

```
plot(1,1)
legend("bottomleft", c("A","B","C"), lwd=3, bty="n",lty=c(1,3,4)) 
```

是否可以使图例中的线条更长（请仅以 R 为基础）？当线条如此短时，似乎有点难以立即看到图例中的 lty=3 和 lty=4 的区别。增加 lwd 也无济于事。

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T11:46:14.943

您可以设置`seg.len`参数。

```
plot(1,1)
legend("bottomleft", 
  c("A","B","C"), 
  lwd=3, bty="n",lty=c(1,3,4),
  seg.len=5
) 
```

# javascript - 在没有会话的情况下将异常消息传递到错误页面 ASP.NET 的最佳实践

> ID：10267641
> 
> 赞同：2
> 
> 时间：2012-04-22T11:41:35.247
> 
> 标签：javascript, asp.net, json, azure, query-string

在我的 ASP.NET 应用程序中，我正在编写一个常见的错误页面，我想在其中显示以下内容：

1.  异常堆栈跟踪（适用于管理员）。
2.  错误消息（适用于所有）。
3.  事件 ID。

方法如下：

1.  定义了一个自定义类，如下所示，并使用 Session 将对象保存在 Global.asax
2.  在错误页面中检索该对象并显示错误。

    ```
    public class CustomErrorInfo
    {
        public string EventId { get; set; }
        public string ExceptionTrace { get; set; }
        public string ErrorMessage { get; set; }
        public string ContextInfo { get; set; }

        public override string ToString()
        {
            return (EventId + "\n" + ExceptionTrace + "\n" + ErrorMessage + "\n" + ContextInfo + "\n");
        }
    } 
    ```

Global.asax 文件：

```
void Application_Error(object sender, EventArgs e)
{
    var customErrorMessage = new  CustomErrorInfo();
    customErrorMessage.EventId = Guid.NewGuid().ToString();

    Exception exception = Server.GetLastError();

    customErrorMessage.ExceptionTrace = exception.ToString().Replace("\n","");

    customErrorMessage.ContextInfo = DateTime.Today.ToLongDateString();

    customErrorMessage.ErrorMessage = "An unhandled error.";

    Response.Redirect("WebForm1.aspx?MsgId=" + customErrorMessage.EventId + "&Msg=" + customErrorMessage.ErrorMessage +
        "&MsgTrace=" + customErrorMessage.ExceptionTrace + "&MsgContext=" + customErrorMessage.ContextInfo);

    // Code that runs when an unhandled error occurs

} 
```

但是我的是一个 Azure 应用程序，因此不推荐使用 Session 来保存异常信息等对象，因为在这种情况下不推荐。

因此寻找一种方法，我可以通过这种方法以最适合错误页面的方式传递自定义对象。

我正在寻找一些使用帮助：

*   JSON（使用查询字符串）
*   Javascript 或
*   在不使用会话上下文的情况下，我可以将自定义对象传递到错误页面的任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:46:21.980

使用 ELMAH 和 Windows Azure 表存储怎么样，请查看 Wades 博客，“在 Windows Azure 中使用 ELMAH 和表存储”：[http ://www.wadewegner.com/2011/08/using-elmah-in-windows-带有表存储的天蓝色/](http://www.wadewegner.com/2011/08/using-elmah-in-windows-azure-with-table-storage/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:19:39.330

您可以使用 Server.Transfer 将您带到错误页面。这允许您在内存中维护页面状态（[使用 HttpContext.Items 集合](http://odetocode.com/Articles/111.aspx)）。尽管在某些情况下您需要禁用输出缓存。[HttpContext.AllErrors](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.allerrors.aspx)列表已包含在请求期间引发的任何异常。

在 Azure 表中存储错误详细信息将是一个更好的解决方案，因为您将能够查询错误详细信息并根据到达表的新消息设置事件。这里可能的问题是，如果 Azure 表存储首先是异常的原因。

最好的解决方案是使用[Azure 诊断](http://msdn.microsoft.com/en-us/library/gg433048.aspx)收集您的事件。这些可以配置为定期自动传输到存储。

# css - :: 和 ~ 在 css 中的作用是什么？

> ID：10267643
> 
> 赞同：25
> 
> 时间：2012-04-22T11:41:57.653
> 
> 标签：css, pseudo-element, css-selectors

我正在查看一个人在 twitter 上制作的代码，它是这样的：

```
div::after {
-webkit-transform: rotate(2deg);
}

div ~ div {
-webkit-transform: rotate(0deg);
} 
```

它是什么 ？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-22T11:45:38.893

> 双冒号取代了 CSS3 中伪元素的单冒号选择器，以明确区分伪类和伪元素。为了向后兼容，单冒号语法对于 CSS3 之前的选择器是可以接受的。所以，:after 是一个伪类， ::after 是一个伪元素。

* * *

> 通用兄弟选择器在 CSS3 中可用，并且此选择器中使用的组合符是波浪号 (~)。
> 
> 选择器匹配给定元素的兄弟元素。如果它是 h2 元素的兄弟，则此示例将匹配 ap 元素：

[http://reference.sitepoint.com/css/generalsiblingselector](http://reference.sitepoint.com/css/generalsiblingselector)

[http://www.evotech.net/blog/2007/05/after-v-after-what-is-double-colon-notation/](http://www.evotech.net/blog/2007/05/after-v-after-what-is-double-colon-notation/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-22T11:54:15.027

波浪号 (~) 是兄弟姐妹选择器

```
h2 ~ p { color:red; } 
```

例如会使下面代码中的段落变为红色

```
<h2>Heading</h2>
<p>The selector above matches this paragraph.</p>
<p>The selector above matches this paragraph.</p> 
```

:: 用于`::before`和`::after`伪元素，它们与`content:`允许您在每个链接之前放置例如图标

```
a::before { content:url(link.png); } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-22T11:47:58.017

`::`用于CSS3 中的[伪元素](http://www.w3.org/TR/selectors/#pseudo-elements)。

`~`是 CSS3 中的通用[兄弟组合](http://www.w3.org/TR/selectors/#general-sibling-combinators)器，它用于选择跟在同一级别的另一个元素之后的元素。

# javascript - 延迟广告加载

> ID：10267646
> 
> 赞同：1
> 
> 时间：2012-04-22T11:42:18.880
> 
> 标签：javascript, iframe, ads

我们运营着一个相当大的网站，资金来自广告。

为了让我们的用户满意并保持良好的浏览体验，我们使用了一些 javascript 在页面底部加载广告，然后将它们移动到适当的位置。这是我们在标签关闭之前放置的代码：

```
<div id="topadloader" style="display:block;"><!--adcode here--></div>
    <script type="text/javascript">
    var loader = document.getElementById('topadloader');
    document.getElementById("topad").appendChild(loader);
    </script> 
```

然后，我们只需在希望显示广告的位置放置一个空 div：

```
<div id="topad"></div> 
```

这一切都很好，除了偶尔我们的一些广告使用 iframe 来定位文本位等。这些 iframe 被上面的代码破坏，导致我们的广告区显示空白广告。

我想知道我们是否可以做些什么来解决这个问题，以便 iframe 正常工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-25T02:06:23.187

我有一个愚蠢的想法，也许你应该尝试使用重定向代码？

我的意思是，就像在 iframe 中做一个重定向代码，这是有史以来最奇怪的想法，但如果你仔细想想……它可以工作！:P

# jquery - Twitter bootstrap-collapse：突出显示选定的折叠项

> ID：10267648
> 
> 赞同：1
> 
> 时间：2012-04-22T11:42:21.640
> 
> 标签：jquery, jquery-selectors, twitter-bootstrap, collapse

我想突出显示选定的折叠项。为了实现这一点，我使用 addClass() 方法为手风琴标题和手风琴组添加了新类（手风琴标题高亮和手风琴组高亮），但是有一个问题。

如果我在关闭时单击可折叠项目，它可以正常工作。但是，如果我单击打开的可折叠项目，它的手风琴标题背景颜色无法更改为原始颜色。

你可以在这里测试它：http: [//jsfiddle.net/uuZAK/](http://jsfiddle.net/uuZAK/)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:20:38.053

这里有两种情况您必须考虑：

1.  如果用户单击活动项目，则将其停用
2.  如果用户单击一个非活动项目，则停用所有项目，然后激活该项目。

您当前的解决方案无法检测哪个项目已经处于活动状态。您可以使用该`$.hasClass`功能检查您单击的项目是否已处于活动状态。

这是一个带有结果的分叉 jsFiddle：http: [//jsfiddle.net/Willyham/6v7Rn/](http://jsfiddle.net/Willyham/6v7Rn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:45:56.567

您可以绑定 on`hide`和`show`event of`accordion-body`来设置折叠项的状态。双击没有问题。

我重用了 Will Demaine 的代码。这是演示：http: [//jsfiddle.net/kXTc6/1/](http://jsfiddle.net/kXTc6/1/)

# testing - 使用监听器进行测试报告的具体步骤

> ID：10267658
> 
> 赞同：0
> 
> 时间：2012-04-22T11:44:04.070
> 
> 标签：testing, selenium-webdriver

我正在寻找通过使用 ITestListener 接口和 TestListenerAdapter 类方法来定制报告的具体步骤，以下两种方法。

以下资源在哪里更改？

```
@override
onTestfailure( ITestResult tr)
{
 log("Failed");
}

@override
onTestSuccess( ITestResult tr)
{
 log("Passed");
} 
```

1-测试类

```
public class Mytest()
{
 @Parameters({ "first-name" })  
 @Test 
 public void testSingleString(String firstName) {   
  System.out.println("Invoked testString " + firstName);  
  assert "xxx".equals(firstName);  
 } 
} 
```

2- testng.xml

```
<suite>
<listeners>
</listeners>
<parameter name="first-name"  value="xxx"/> 
<test name="MyTest">
<classes>  
<class name="example1.Mytest"/>  
</classes>  
</test> 
</suite> 
```

注意：我使用 Run As TestNg 运行我的 testng eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:51:03.480

您需要在 xml 中添加侦听器类。

```
<suite>
<listeners>
<listener class-name="packagename.classname.which contains ontestfailure and success"/>
</listeners>
<parameter name="first-name"  value="xxx"/> 
<test name="MyTest">
<classes>  
<class name="example1.Mytest"/>  
</classes>  
</test> 
</suite> 
```

# jquery-ui - jQuery自动完成无响应

> ID：10267661
> 
> 赞同：2
> 
> 时间：2012-04-22T11:45:34.257
> 
> 标签：jquery-ui, jquery, autocomplete, jquery-ui-autocomplete

我过去使用过 jQuery UI 的自动完成功能，但由于某种原因，我无法让它对 TextBox 做任何事情。没有脚本错误，要注册它，我正在使用：

```
jQuery('#textbox1').autocomplete('/Services/BillService.asmx/GetAllCategories',{
  search: function(event, ui) { alert(0); },
  create: function(event, ui) { alert(2); },
  open: function(event, ui) { alert(1); },
  focus: function(event, ui) { alert(3); }
}); 
```

然而，当我在文本框中选择/键入时，什么也没有发生。我拥有的 HTML 是：

```
<input type="text" class="marg10b" id="textbox1" name="textbox1"/> 
```

如果我在 firebug 中运行脚本，则匹配一个元素并且 i 是正确的元素，但有些东西阻止了它的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:53:12.870

我假设您使用的是 jQueryUI 的自动完成功能。如果是这种情况，您需要`source`在初始化插件时填充该选项：

```
jQuery('#textbox1').autocomplete({
    source: '/Services/BillService.asmx/GetAllCategories',
    /* other options */
}); 
```

# windows - RegOpenKeyEx 冗余参数？

> ID：10267663
> 
> 赞同：0
> 
> 时间：2012-04-22T11:45:57.283
> 
> 标签：windows, api

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx)

> ulOptions
> 
> ```
> This parameter is reserved and must be zero. 
> ```

放置这个形式参数的原因是什么，而它总是必须是相同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:52:52.470

该参数很可能意味着早期版本的操作系统，甚至可能是预发布的内部版本。但它控制的功能已被删除，或者从未公开发布。

一旦构建了使用该参数的二进制文件，MS 就不会想要更改函数的签名。这样做会破坏那些预先存在的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:00:29.787

[微软官方文档除了wine 代码](http://source.winehq.org/source/dlls/advapi32/registry.c#L438)之外什么也没说：`RegKeyOpenEx()`接受`REG_OPTION_OPEN_LINK`值 to `options`，在注册表项是链接的情况下，它会打开链接本身，而不是跟随链接并打开目标。

但是由于它不在官方文档中，我不建议使用它。由于 Micrsoft 没有提及它，因此他们没有正式支持它，并且可以免费（在实际限制内）阻止它在 Windows 更新或其他方式中工作。

微软可以自由地将他们喜欢的任何参数添加到他们的函数中，只是为了有一个参数供以后使用。它可以让他们不必创建新功能（尽管他们在这方面似乎做得不太好）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:53:30.930

微软只是提前计划，允许将来在不破坏 API 的情况下传递选项。

现在始终将其设置为零可以防止应用程序崩溃，以防它们将来更改 API 处理该参数的方式。该参数现在很可能被忽略，但是假设您开始将 42 传递给它，并且在下一版本的 windows 中，他们决定根据该参数实际更改行为。现在您的应用程序的行为有所不同。

故事的寓意：遵守文档所说的内容。

# javascript - 使用 ' [ ] ' 符号而不是点符号来访问 javascript 对象成员的原因是什么？

> ID：10267666
> 
> 赞同：2
> 
> 时间：2012-04-22T11:46:15.897
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 属性访问：点符号与括号？](https://stackoverflow.com/questions/4968406/javascript-property-access-dot-notation-vs-brackets)

我现在正在阅读一些开源 javascript 项目代码，我看到有时他们访问对象属性，`person.name`但有时他们访问`person['name']`。

对我来说，点符号相对于其他符号非常清楚。点表示法易于编写和阅读，但在源代码中我看到它们有时使用点表示法，有时 [] 大括号表示法，我试图理解它的原因是什么。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T11:49:31.857

首先它可以是动态的字符串：

```
 var key = 'name';
 person[key]; 
```

其次，它还支持其他不支持的符号

```
 var key = 'first-name';
 person[key]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T11:48:49.887

这是一个用例（具有不可能的属性名称）

```
var obj = {};
> undefined
obj['first name'] = 'Ivan';
> "Ivan"
obj['first name']
> "Ivan"
obj.first\ name
> SyntaxError: Unexpected token ILLEGAL
obj.first name
> SyntaxError: Unexpected identifier 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T11:48:49.000

这是使用方括号的一个很好的理由，我们将属性名称作为参数传递：

```
function showProperty(propertyName) {
    alert(person[propertyName]);
}

showProperty('name');
showProperty('age'); 
```

这是另一个很好的理由，我们可以访问 using dot-notation 的`'headers'`属性`request`，但我们*不能*访问 using dot-notation 的`'Content-Type'`属性`request.headers`，因为它包含一个`-`.

```
request.headers['Content-Type'] = 'text/html'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T11:48:18.607

在方法中使用这种表示法非常有用，例如，您将属性名称作为参数发送。

```
var Obj = function(){
    this.abc = function(){
        alert("abc!!!");
    };
    this.qqq = function(){
        alert("QQQ!!!");
    };
}

var showAlert = function(param){
    var myObj = new Obj();
    myObj[param]();
};

showAlert('abc'); 
```

# php - 使用推文 ID 获取推特回复

> ID：10267673
> 
> 赞同：0
> 
> 时间：2012-04-22T11:46:34.497
> 
> 标签：php, twitter

我正在开发一个应用程序，在这个应用程序中我想获得属于特定推文的“回复”。有什么方法可以通过 ID 获取指定推文的回复？

# xcode - xcode 获取文本视图的字体大小

> ID：10267674
> 
> 赞同：0
> 
> 时间：2012-04-22T11:46:56.910
> 
> 标签：xcode, textview, font-size

我想在按下按钮时增加文本视图的大小。

为此，我需要知道字体大小是什么。我怎么知道？

我会这样做：

```
CGFloat *newsize =  (// here the fontsize + 1);
textView.font = [UIFont fontWithName:@"Verdana" size:newsize]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T06:50:09.520

for(int i;i<[最大尺寸];i++) {

CGFloat *newsize = i; textView.font = [UIFont fontWithName:@"Verdana" size:i];

}

# iphone - 键盘隐藏 UITextField

> ID：10267675
> 
> 赞同：0
> 
> 时间：2012-04-22T11:47:18.873
> 
> 标签：iphone, ios5, xcode4.2

我有 10 个 UITextField' 占据了整个屏幕。当我想更改它们时，我将键盘放在半屏上，因此，我无法更改“隐藏”字段。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:52:55.303

您需要在调用键盘时向上移动框架。

```
- (void)keyboardWillShow:(NSNotification *)aNotification 
{
    self.frame = CGRectMake(0,-[size of keyboard],self.frame.size.width,self.frame.size.height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:22:21.563

[我从这里拿走了](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/32204-moving-uitextfield-when-keyboard-pops-up.html)：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField { 
    if (textField == textField1) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        textfield1.frame = CGRectMake(textfield1.frame.origin.x, (textfield1.frame.origin.y - 100.0), textfield1.frame.size.width, textfield1.frame.size.height);
        [UIView commitAnimations];
    } else if (textField == textField2) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        textfield2.frame = CGRectMake(textfield2.frame.origin.x, (textfield2.frame.origin.y - 100.0), textfield2.frame.size.width, textfield2.frame.size.height);
        [UIView commitAnimations];
    }
}
- (void)textFieldDidEndEditing:(UITextField *)textField {   
    if (textField == textField1) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        textfield1.frame = CGRectMake(textfield1.frame.origin.x, (textfield1.frame.origin.y + 100.0), textfield1.frame.size.width, textfield1.frame.size.height);
        [UIView commitAnimations];
    } else if (textField == textField2) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        textfield2.frame = CGRectMake(textfield2.frame.origin.x, (textfield2.frame.origin.y + 100.0), textfield2.frame.size.width, textfield2.frame.size.height);
        [UIView commitAnimations];
    } 
```

并在触摸：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

{ [文本域 resignFirstResponder]; }

希望能帮助你。
很高兴能帮助你。

# ios - CS193P 作业 3，提示 #5 - 型号是什么？

> ID：10267677
> 
> 赞同：6
> 
> 时间：2012-04-22T11:47:37.267
> 
> 标签：ios, objective-c, model-view-controller, cs193p

我正在学习斯坦福 2011 年秋季 iOS 课程： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

我正在分配#3： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%203_2.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%203_2.pdf)

总而言之，之前的任务要求构建一个常规计算器，现在这个任务要求我们将此计算器推送到导航控制器并创建从 CalculatorViewController 到 GraphViewController 的 segue，该连接将绘制存储在“CalculatorBrain”中的函数。这个 CalculatorBrain 是原始 CalculatorViewController 的模型。

提示#5 一直在谈论这样一个事实，即现在 GraphViewController 的模型与 CalculatorViewController 的模型不同，我无法理解他的意思。

我能够构建新 MVC 的唯一方法是在 GraphViewController 的 GraphView（视图）中创建一个协议，其中包含一个名为“dataSource”类型 ID 的对象。然后在 GraphViewController 中：采用该协议，实例化 GraphView 并将其自身设置为数据源：

```
-(void) setGraphView:(GraphView *)graphView
  {
  _graphView=graphView;   
  self.graphView.dataSource=self;
  } 
```

然后在原来的CalculatoViewController中，使用prepareForSegue将程序传递给GraphViewController：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if([segue.identifier isEqualToString:@"Graph"])
  {
    GraphViewController *myGraphViewController = segue.destinationViewController;
    myGraphViewController.myCalculator=self.myCalcBrain;
  }
} 
```

所以这似乎工作正常。所以如果这样的话，那就意味着 GraphViewController 的模型真的是他特别说的不是的原始计算器大脑！

我的意思是，在 segue 期间，我将来自原始 CalculatorViewController 的计算器模型实例分配给 Graphviewcontroller 计算器属性，然后使用协议将 Y 值从 GraphViewController 返回到 GraphView 意味着该模型GraphViewController 实际上只是原始的 CalculatorBrain 模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:00:07.600

我确实相信模型是“程序”，一个 NSArray 对象。它不能是程序的描述，因为没有简单的方法来计算给定 NSString 的“y”值。您必须将 NSString 重新解析为堆栈（NSArray）。因此，将模型作为 NSArray/程序不是更直接吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:45:42.147

我不想为你回答这个问题，因为这是你应该做的，但我相信你想多了，所以这就是他想让你意识到/做的事情：

您的模型将是一个新类，它继承自原始计算器的模型。这就是为什么他说你只需要从头开始创建视图和控制器。您还必须创建一个模型类，但许多必要的代码已经存在于旧的 calc 模型中，因此您只需继承它并添加必要的附加功能。

希望对您有所帮助，并且很高兴看到您正在使用这些课程。它们是一个很棒的免费工具！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T20:45:41.473

当我做那个任务的时候，我也为这个问题有点挣扎。我得出的结论（正确或错误）模型只是一个公式 - 这似乎是您得出的结论，虽然不是计算器大脑类，但与它密切相关！

**编辑：**

我刚刚回去查看了我的计算器程序（我目前正在做 flickr 作业，所以有一段时间没看它了）

查看基本计算器，模型是一个“calculatorbrain”对象

在作业的提示中它说

> 不要将此控制器的模型与您的 CalculatorViewController 的模型混淆。它们是不同的。不要过度思考这一点。您的新控制器模型近在咫尺！

我拥有的graphview控制器模型是一个程序。正如在calculatorbrain 中定义的程序一样——只是一个操作堆栈（NSArray）而不是calculatorbrain。我刚刚通过 segue 将当前程序传递到 graphview 控制器。

对我来说，它似乎符合提示的细节 - 当您查看图表时，程序就在手边，但它*与*计算器的模型不同。

提示并没有说它与模型无关。

但我也有点像 iOS n00b，所以这只是我的看法！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T08:12:31.293

该模型应该只是一个 NSString 描述您要绘制的“程序”。就像在计算器大脑返回给您的程序中一样！

```
id program = [self.dataSource.brain program]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T20:18:59.967

我的模型也是“程序”！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T23:33:08.857

@Lee Cjin Pheow，你是对的。随着我在这门课程中的进步，这一点变得更加明显。所以模型只是一个保存程序的 NSArray。我认为我的困惑是因为我做了一个 n00b 假设，即 MVC 中的模型必须是它自己的类/文件，因此我搜索了一个模型类/文件。随着我的进步，我看到教授有一个 MVC，其中模型实际上只是一个属性，例如，它位于控制器中。我只需要在我简单的头脑中保持黄色不要越线。

# php - PhpMyEdit 显示外语为？

> ID：10267679
> 
> 赞同：1
> 
> 时间：2012-04-22T11:47:55.207
> 
> 标签：php, mysql

我正在使用[PhpMyEdit](http://www.phpmyedit.org/)，它运行良好且出色。唯一的问题是在显示阿拉伯字符时，它显示为 ???? ？？？。我只有一列包含阿拉伯语文本，但对客户非常重要。

从阅读和之前的实验（有成功的结果）我知道我`mysql_query("set characer set cp1256");`
在 mysql 连接之后使用以确保支持阿拉伯语。表的排序规则也设置为 utf unicode。它在 php 中使用简单的 sql 显示时有效。

知道我能做些什么来解决这个问题吗？我也试过编辑

> phpMyEdit.class.php

但没有运气......谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:47:48.550

我只是深入研究了 API 代码，发现我必须在连接函数中添加这个：

```
 mysql_query("SET NAMES 'utf8'");
mysql_query('SET CHARACTER SET utf8'); 
```

在 phpclass.php 文件中。这使它工作。我还重新构建了表格以使所有字段均为 utf8。现在它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:05:06.920

这个问题是一个实例：[Save Arabic text into MySQL database](https://stackoverflow.com/questions/4152036/save-arabic-contain-into-mysql-database)

但是试试这个：

创建表时使用默认字符集为 utf-8

我告诉你如何：

```
CREATE TABLE arabic_cont (
id int not null auto_increment primary key,
arabic_data text
) DEFAULT CHARACTER SET utf8; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T18:44:15.780

sys_debug 的答案适用于 Drupal 7.29。添加行：

```
mysql_query("SET NAMES 'utf8'"); 
```

在phpMyEdit.class.php`function connect()`之前`return true;`用于显示非英文文本。

# yii - yii crud如何添加按钮触发模型功能

> ID：10267680
> 
> 赞同：3
> 
> 时间：2012-04-22T11:47:57.737
> 
> 标签：yii

如何在 crud _form 中为 actionUpdate 添加一个按钮？

所以我可以删除保存的文件，然后上传一个新的

我在模型中有这个功能

```
 public function deleteImage()
    { 
        unlink(Yii::app()->basePath.'/../uploads/'.$this->image);
    } 
```

那么如何用这样的按钮触发它呢？

```
<input type="button" value="delete image"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T13:38:45.050

在[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)中，控制器通常会处理来自用户的交互，因此用户不会直接访问模型，而是通过控制器进行。控制器拦截用户操作并通过调用模型来完成工作。因此最好不要直接调用模型函数，即使可以。

现在，要做你想做的事，我们可以在[控制器](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller)中创建一个函数（动作），然后调用模型的函数。

要在控制器中调用函数（动作），我们可以关联一个在单击按钮时将调用的 url，这可以通过使用[onclick 事件](http://www.w3schools.com/jsref/event_onclick.asp)来完成。我猜你不希望浏览器导航到一个新的 url，因此我们用 ajax 调用这个 url。

示例，1）在控制器中：

```
public function actionMyaction($id){
    $sampleMod=SampleModel::model()->findByPk($id);
    $sampleMod->deleteImage();
    Yii::app()->end();
} 
```

2) 在按钮视图中：而不是`<input type="button" value="delete image"/>`使用[CHtml 助手类的 ajaxButton](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxButton-detail)。

```
echo CHtml::ajaxButton('Delete Image',Yii::app()->createUrl('controllername/actionname',array('id'=>$id))); 
```

小心传球权`$id`。

# jquery - jQuery ajax 处理 401 未经授权

> ID：10267683
> 
> 赞同：25
> 
> 时间：2012-04-22T11:48:08.500
> 
> 标签：jquery, ajax, jquery-mobile

我正在使用 jQuery ajax 调用第三方网页。根据他们的页面，如果登录成功，他们会向我发送状态代码 200，如果登录不成功，则会向我发送 401。这是我的 jquery 代码示例。此代码在 IE 上运行良好，但在 Chrome 或 Firefox 上无法运行。可能是什么问题？

```
$.ajax({
  type: 'GET',
  url: hostURL + 'j_teo_security_check?callback=?',
  dataType: 'json',
  data: ({j_username : $("#inp_user_name").val(), j_password: $("#inp_user_pwd").val()}),
  statusCode: {
      401:function() { alert("401"); },
      404:function() { alert("404"); },
      200:function() { alert("200"); },
      201:function() { alert("201"); },
      202:function() { alert("202"); }
    },
    complete: function(httpObj, textStatus){
    alert(httpObj.status);
  },
  error: function(){
    alert("error");
  },
  async: false
}); 
```

我尝试了所有的函数error、success、complete和statusCode。他们都没有处理 401 错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T01:21:30.617

我可以如下修复它。

```
$(document).ready(function(){
        $("#cmdLogin").click(function(){             
             var request = $.ajax({
                url : hostURL + 'j_teo_security_check',
                data: ({j_username : $("#inp_user_name").val(), j_password: $("#inp_user_pwd").val()}),
                dataType : "jsonp",
                timeout : 5000
            });

            request.success(function() {
                loginSuccess();
            });

            request.error(function(httpObj, textStatus) {       
                if(httpObj.status==200)
                    loginSuccess();
                else
                    loginFail();
            });
        });
    }) 
```

我所做的是添加超时，因为 401 错误再也没有回来。由于即使状态代码为 200 并解析错误，它也会进入错误函数，我让它忽略错误中的状态 200。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T12:36:36.000

好的，看来您正在使用 jsonp，我认为这可能是 jsonp 的限制。看一看。

[http://forum.jquery.com/topic/jquery-ajax-with-datatype-jsonp-will-not-use-error-callback-if-request-fails](http://forum.jquery.com/topic/jquery-ajax-with-datatype-jsonp-will-not-use-error-callback-if-request-fails)

貌似上个帖子有解决办法。希望这可以帮助！

# javascript - 如果更改框更改，innerHTML 不会更改

> ID：10267695
> 
> 赞同：1
> 
> 时间：2012-04-22T11:50:32.320
> 
> 标签：javascript, html, dom

我有一个基本清单：

```
<select id = "opt">
  <option value="a">a</option>
  <option value="b">b</option>
  <option value="c">c</option>
</select> 
```

现在我必须更改 JS 中的选定项目。它完成了，然后我需要这个选择项的内容（`.innerHTML`）。但可悲的是，innerHTML 说什么都没有被选中……如何解决这个问题？

编辑：这是代码：

```
for (var count = 0; count < document.getElementById('opt').childNodes[0].options.length; count++)
{
 if (document.getElementById('opt').childNodes[0].options[count].value == 7) { document.getElementById('opt').childNodes[0].options[count].selected = true; break; }
}
var obj = document.getElementById('opt');
alert (obj.innerHTML); 
```

并且`alert()`只显示原始的 HTML 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:57:57.480

你可以这样做

```
var opt = document.getElementById("opt");
var listLength = opt.options.length;
for(var i =0; i< listLength; i++) {
   if(opt.options[i].selected) {
      opt.options[i].textContent = 'the change HTML';
   }
} 
```

### [演示](http://jsfiddle.net/pEnsg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T12:06:46.430

您可以完全不使用选项来执行此操作。

只解析元素的节点

```
for (var count = 0; count < document.getElementById('opt').childNodes.length; count++)
{
    if (document.getElementById('opt').childNodes[count].value == "c") {       
        document.getElementById('opt').childNodes[count].selected = true; break; 
    }
}
var obj = document.getElementById('opt');
alert (obj.innerHTML); 
```

这是你的工作 jsfiddle：http: [//jsfiddle.net/9Pg8n/1/](http://jsfiddle.net/9Pg8n/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:16:29.130

您可以从所选选项中读取文本和值，如下所示：

```
var elem=document.getElementById('opt');
var value=elem[elem.selectedIndex].value;
var text=elem[elem.selectedIndex].text; 
```

如果您确实需要所选元素的 HTML `option`：

```
var text=elem[elem.selectedIndex].outerHTML; 
```

如果你偷看`select`'s `innerHTML`，你可以在 IE 中看到`selected`属性，但其他浏览器似乎没有反映对属性的更改。这也代表`option.outerHTML`。

要解决此问题，您需要手动设置属性：

```
elem[elem.selectedIndex].setAttribute('selected','true'); 
```

但是，这对 IE 中的 -value 没有影响`innerHTML`，因此您会在其他浏览器中获得稍微不同的 HTML。

```
<OPTION selected ...> // IE
<OPTION selected="true"...> // Other browsers 
```

不幸的是，即使更改选定的元素，这个 set 属性仍然存在。所以使用后必须删除该属性：

```
elem[elem.selectedIndex].removeAttribute('selected'); 
```

但是...这会导致 Chrome 出现问题：它`-1`从`elem.selectedIndex`. 您必须`selectedIndex`在设置属性之前将 存储在变量中，然后再次设置正确的选择：

```
elem[stored_index].selected=true; 
```

# android - 如何在 webview 中显示页面顶部？

> ID：10267697
> 
> 赞同：1
> 
> 时间：2012-04-22T11:50:50.343
> 
> 标签：android, android-webview

我的意思是当我在 android webview 页面结束时，我如何显示页面顶部？认为我有一个按钮，当我单击它时，会在 webview 中显示页面顶部。谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T11:55:50.947

对于这个问题，我找到了更好的答案。事实证明，WebView 确实具有您所期望的 scrollTo()、getScrollX() 和 getScrollY() 方法。它们在文档中有点隐藏，因为它们是从 View 继承的（通过 AbsoluteLayout -> ViewGroup -> View）。这显然是一种比有些繁琐的 JavaScript 界面更好的方式来操纵 WebView 的滚动位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:59:28.603

我还没有尝试过，因为我还没有遇到这个问题，但也许你可以覆盖 onScroll 函数？

```
@Override
public void scrollTo(int x, int y){
    super(0,y);
} 
```

# jquery - jquery从其子id获取listitem id

> ID：10267698
> 
> 赞同：0
> 
> 时间：2012-04-22T11:50:58.937
> 
> 标签：jquery

```
<li id="l"><a href="#"><img id="i" /></a></li> 
```

我有图像 id，我想要 listitem id，我知道一种方法

```
$("#i").parent().parent().attr("id"); 
```

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:53:00.557

这有点简单：

```
$("#i").parents("li").attr("id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:52:57.110

尝试`closest`或`find`。

```
$("#i").closest('li').attr("id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T12:10:16.383

```
$("#i").closest('li')[0].id; 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

# asp.net - 将子过程作为参数传递给 VB.Net 2008 中的另一个子过程

> ID：10267702
> 
> 赞同：-1
> 
> 时间：2012-04-22T11:51:23.210
> 
> 标签：asp.net, vb.net, parameters, delegates

我有一点问题。我目前正在制作一个网页，每页都有几个下拉列表。下拉列表的目的是过滤 YUI 数据表中的信息，以及彼此的信息，例如。不同的地点会有不同的商品等。

我制作了一个通用函数来从数据库中读取选项 ID 和值，但是可以通过 3 种方式使用这些信息。目前，当页面加载时，我创建了一个加载下拉列表的 Asp:Placeholder。如果 Ajax 请求信息来更新选择框，我将连接一个 HTML 字符串服务器端并 response.write 它。但是现在我的客户要求查找下拉框中的列表是否太长，我正在使用 YUI 模态面板和 YUI 网格进行查找。我仍然想使用相同的数据获取子过程，但这次我想将数据作为 JSON 字符串发回。

目前我有布尔标志来表明它是页面初始加载以创建占位符，还是更新加载以创建 HTML 字符串，但我更愿意将“信息呈现/格式化”子过程作为参数传递，这消除了需要几个布尔标志。

我的代码

```
    公共共享子 LoadCoop（ByRef PlaceHolder 作为对象，ByVal SearchCriteria 作为字符串，ByVal 数据库作为字符串，ByVal InitialLoad 作为布尔值）
        将 SqlConnection 暗淡为新的 SqlConnection
        将 SqlCommand 调暗为新的 SqlCommand
        将 SqlParameter 调暗为新列表（SqlParameter 的）
        将 SqlReader 调暗为 SqlDataReader = 无
        将 FilterList 调暗为新列表（FilterObject 的）
        尝试
            SqlConnection = CreateDatabaseConnection(ConnectionString)
            AddSqlParameterToCollection(SqlParameter, "@SearchCriteria", SearchCriteria)
            AddSqlParameterToCollection（SqlParameter，“@Database”，数据库）
            SqlCommand = CreateSqlCommand("[proc_Dynamic_GetCoop]", SqlConnection, SqlParameter)
            SqlReader = SqlCommand.ExecuteReader
            If SqlReader.HasRows Then
                Do While SqlReader.Read
                    将 TempFilterObject 调暗为 FilterObject = 新的 FilterObject
                    TempFilterObject.ID = SqlReader("PSCM_COOP_ID")
                    TempFilterObject.Description = SqlReader("PSCM_COOP_ID")
                    FilterList.Add(TempFilterObject)
                环形
            万一
        如果 InitialLoad = True 那么
            CreateHTMLSelectContainer(PlaceHolder, FilterList, "Coop")
        别的
            CreateHTMLSelectString(FilterList, "Coop")
        万一
    抓住前任作为例外
        HttpContext.Current.Response.Write("ERROR - 加载合作过滤器时出错。请联系系统管理员寻求帮助。")
    最后
        If Not IsNothing(SqlReader) 则
            SqlReader.Close()
            SqlReader = 无
        万一
        If Not IsNothing(SqlCommand) Then
            SqlCommand.Dispose()
            SqlCommand = 无
        万一
        If Not IsNothing(SqlConnection) 则
            SqlConnection.Close()
            SqlConnection.Dispose()
            SqlConnection = 无
        万一
   结束尝试
结束子

公共共享子 CreateHTMLSelectContainer（ByRef PlaceHolder 作为对象，ByVal 过滤器列表作为列表（过滤器对象），ByVal ID 作为字符串）
            将 ReturnString 调暗为 String = ""
            对于FilterList中的每个Obj作为FilterObject
                ReturnString += "开始选项标签" & Obj.Description & "结束选项标签"
            下一个

            将容器变暗为新 HtmlGenericControl("select")
            Container.ID = "ddl" & ID
            Container.Attributes.Add("class", "filtering_fields_select")
            Container.InnerHtml = ReturnString
            PlaceHolder.Controls.Add（容器）
            如果 FilterList.Count > 20 则
                PlaceHolder.Controls.Add(New LiteralControl("查找图像到这里"))
            万一
        结束子

        Public Shared Sub CreateHTMLSelectString(ByVal FilterList As List(Of FilterObject), ByVal ID As String)
            Dim ReturnString As String = "打开选择标签"
            将 Obj 调暗为 FilterObject = 无
            对于 FilterList 中的每个 Obj
                ReturnString += "开始选项标签" & Obj.Description & "结束选项标签"
            下一个
            ReturnString += "关闭选择标签"
            如果 FilterList.Count > 20 则
                ReturnString += "查找图片放在这里"
            万一
            HttpContext.Current.Response.Write(ReturnString)
        结束子

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:54:07.327

delegate 关键字允许您声明一个表示函数的变量类型。然后可以在参数声明中使用它。使用 variable_name.Invoke(parameters...) 调用该函数。

所以是这样的：

```
' declares data type representing one of the possible functions
Public Delegate Sub CreateHTMLFunction(ByRef PlaceHolder As Object, ByVal FilterList As List(Of FilterObject), ByVal ID As String)

Public Shared Sub LoadCoop(ByRef PlaceHolder As Object, ByVal SearchCriteria As String, ByVal Database As String, ByVal HTMLFunction As CreateHTMLFunction)
    ' last param is function to call 
    ' snip
    HTMLFunction.Invoke(PlaceHolder, FilterList, "Coop")
End Sub

Public Sub CreateHTMLSelectContainer(ByRef PlaceHolder As Object, ByVal FilterList As List(Of FilterObject), ByVal ID As String)
    ' blah blah
End Sub

Public Sub CreateHTMLSelectString(ByRef PlaceHolder As Object, ByVal FilterList As List(Of FilterObject), ByVal ID As String)
    ' blah blah
End Sub 
```

从调用代码传递参数时，使用 AddressOf function_name：

```
 LoadCoop(..., ..., ..., Addressof CreateHTMLSelectContainer) 
```

但请注意，所有要传入的函数都需要具有完全相同的参数列表——它们必须与委托的定义完全匹配。因此，即使不使用，您也需要将 PlaceHolder 参数添加到 SelectString 函数中。

# java - Java Appengine：如何将转换后的图像存储回 blobstore

> ID：10267710
> 
> 赞同：0
> 
> 时间：2012-04-22T11:52:54.990
> 
> 标签：java, google-app-engine

我能够

- 将图像上传到 blobstore

- 转换此图像（在我的情况下重新缩放它）

但我似乎无法找出如何将转换后的图像存储回 Blobstore。

有任何想法吗？

BR,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:54:33.680

据我所知，这目前只是一个实验性功能。[您可以使用createNewBlobFile](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService#createNewBlobFile%28java.lang.String%29)创建一个“文件” 。

在此处获取更多信息：[将文件写入 Blobstore（实验性）](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。

# command-line - Perforce 命令行头修订文件

> ID：10267717
> 
> 赞同：2
> 
> 时间：2012-04-22T11:53:32.850
> 
> 标签：command-line, perforce

检查此工作区当前是否具有某个文件的最新版本的命令行语法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T11:58:57.373

命令：

```
p4 sync -n 
```

将预览同步操作。这将告诉您如果您使用实际命令将更新哪些文件。

命令：

```
p4 have [file] 
```

将告诉您当前拥有的文件的版本。这加上：

```
p4 fstat -T "headRev" [file] 
```

它告诉您头部修订号，将告诉您是否拥有最新版本。

值得注意的是，所有 Perforce 命令都有一个预览选项，告诉您它们*会*做什么。这使您可以验证您是否获得了正确的命令，而不必担心损坏您的工作区或仓库。

# php - 奇怪的php行为

> ID：10267719
> 
> 赞同：0
> 
> 时间：2012-04-22T11:53:49.270
> 
> 标签：php

我正忙着在我的网站上进行 URL 重写，突然发生了一些事情，我真的不知道它是如何发生的，也不知道这是如何发生的，以及如何禁止这种情况发生，可能是我尝试的 URL 重写规则中的一些小错误强制地址前面的 www 但是当我删除 www 时。然后按回车，它会出现一个他找不到的地址，因为他没有在 .nl 后面加上 /

不知何故，一个额外的 index.php 在两者之间得到了修复，并且以这种方式可以在没有任何 CSS 标记的情况下看到整个网站......

它是可重现的，只需像示例一样在中间添加额外的 index.php 即可看到和浏览整个网站，而无需 CSS 文件中的任何标记

[http://www.capoeiravelsen.nl/index.php/index.php?page=home]

这里实际发生了什么？为什么不以这种方式读取 CSS 文件。当然，用户不仅要修复额外的 index.php ，而且这会带来一种安全漏洞或错误或其他什么......

> [编辑]
> 
> 是的，这听起来很合乎逻辑，因为它无法获取 CSS 因为它在不同的目录或其他东西中查找，但仍然不知道它如何仍然可以获取所有其他文档，因为名为 index.php 的文件夹在任何文件中都不存在方法。
> 
> 它发生在这个重写规则中：
> 
> ```
>  RewriteCond %{HTTP_HOST} !^www\.         [NC]
>  RewriteCond %{HTTP_HOST} (.*)
>  RewriteRule (.*)         http://www.%1$1 [R=301,L] 
> ```
> 
> 我在地址中强制使用 www，但是当一些随机的疯狂用户想要删除 www 时。并按下回车就会出现奇怪的效果。
> 
> 然后请求将更改为： [http://www.capoeiravelsen.nlindex.php/?page=home] 浏览器说它当然找不到该页面
> 
> 没有注意到 .php 和 ? 之间的 / 我在 .nl 和 index.php 之间放了一个 / ，所以它会变成 [http://www.capoeiravelsen.nl/index.php/?page=home] 并按下回车键
> 
> 然后整个地址改为：[http://www.capoeiravelsen.nl/index.php/index.php?page=home]
> 
> 可以浏览网站但没有标记的地方...
> 
> 我通过将重写规则更改为：
> 
> ```
>  RewriteCond %{HTTP_HOST} !^www\.
>  RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
> ```
> 
> 当一些随机用户会删除 www. 并按下输入万维网没有发生任何疯狂的事情。只是再次被迫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:00:20.147

您正在相对链接 CSS

```
<link href="inc/stylesheet.css" rel="stylesheet" type="text/css"> 
```

当您访问 /index.php/index.php?page=home 时，浏览器会在其中查找 CSS 文件

```
/index.php/inc/stylesheet.css 
```

解决方案是：

1.  修复重写，使其不允许在 php 文件后使用“/”（这样操作系统会查找名为“index.php”的文件夹
2.  绝对链接CSS文件：即：

> [链接 href="/inc/stylesheet.css" rel="stylesheet" type="text/css" />

（将 [ 替换为 < :) ）

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:58:39.323

它将尝试从`/index.php/`您的 Web 服务器上的目录中获取 CSS 文件，而不是`/`像预期的那样。这不是安全漏洞

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T12:03:50.787

我不知道您的重写规则，因为您没有发布它们，但是缺少 CSS 的问题是因为您使用相对路径链接样式表和 HTML 中的其他文件，即：

```
<link href="inc/stylesheet.css" rel="stylesheet" type="text/css"> 
```

由于您的 URL`http://www.capoeiravelsen.nl/index.php/index.php?page=home`使浏览器请求位于 下的文件`http://www.capoeiravelsen.nl/index.php/inc/stylesheet.css`，因此服务器上当然不存在该文件。

一种解决方案是将 HTML 中的所有路径更改为绝对路径，即：

```
<link href="http://www.capoeiravelsen.nl/inc/stylesheet.css" rel="stylesheet" type="text/css"> 
```

# sql - 按存储过程SQL Server的不同参数搜索

> ID：10267723
> 
> 赞同：0
> 
> 时间：2012-04-22T11:54:26.860
> 
> 标签：sql, sql-server-2008, search, stored-procedures

我正在使用 SQL Server 2008，在我的数据库中，我有一个名为`Student`3 列的表`name, lastname, year`。

我想让用户有机会通过不同的属性从该数据库中搜索学生。我想编写一个存储过程，它有 3 个参数（的所有列`Student`）可以以不同的方式实现搜索。

如果我这样写程序：

```
Create Procedure ProcSearchStudents
@name nchar(20) = NULL,
@lastname nchar(20) = NULL,
@year int = NULL,
AS

if(@lastname = NULL)
BEGIN
Select * 
from Student
where  name = @name 
and year = @year
END

if(@name = NULL)
BEGIN
Select * 
from Student
where  lastname = @lastname 
and year = @year
END

if(@year = NULL)
BEGIN
Select * 
from Student
where  name = @name 
and lastname = @lastname
END

... 
...

GO 
```

我必须写`if()`声明 3！（阶乘）次。所以，如果我有 8 个属性，写这个几乎是不可能的。

有没有其他更好的方法可以做到这一点，或者一种引擎可以帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T12:01:00.037

有一个简单的解决方案：

```
select  *
from    Student
where   (@name is null or Name = @name)
        and (@lastname is null or LastName = @lastname)
        and (@year is null or Year = @year) 
```

虽然很简单，但这存在“参数嗅探”的问题。基本上，SQL Server 会根据您运行的第一个搜索为查询创建一个计划。这可以通过添加一个查询提示来解决，该提示强制 SQL Server 为每次搜索重新创建查询计划：

```
select  *
from    Student
where   (@name is null or Name = @name)
        and (@lastname is null or LastName = @lastname)
        and (@year is null or Year = @year)
option  (recompile) 
```

如果您执行大量查询，编译计划的开销可能会变得太高。在这种情况下，您必须求助于动态 SQL。但这是另一个问题的答案。

# java - h:selectBooleanCheckbox 中缺少属性

> ID：10267728
> 
> 赞同：0
> 
> 时间：2012-04-22T11:55:44.940
> 
> 标签：java, jsf, jsf-2

我有 ah:datatable 和复选框：

```
<div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                               <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                  

                </div> 
```

事实证明，当我从第一次加载 JSF 数据表时，分页不起作用并且行没有突出显示。我删除了这段代码：

```
 <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                               <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                            </h:column> 
```

一切正常。

你能告诉我这个标签中是否缺少任何属性`h:selectBooleanCheckbox`。我怎样才能纠正这个问题？

最良好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:59:31.240

不应该是`item.id`代替`dataItem.id`吗？

```
value="#{SessionsController.selectedIds[item.id]}" 
```

代替

```
value="#{SessionsController.selectedIds[dataItem.id]}" 
```

# android - Android：如何制作具有稳定 ID 的适配器？

> ID：10267731
> 
> 赞同：13
> 
> 时间：2012-04-22T11:56:20.693
> 
> 标签：android, listview, adapter

我已经从 BaseAdapter 扩展了我自己的自定义适配器以显示列表视图等等......

我希望它支持单选和多选，所以它必须有稳定的 id。我已经检查过`ADAPTER.hasStableIds()`，结果是错误的。

我已经重写了这种方法来尝试获取马厩 ID，但没有运气。

```
public long getItemId(int position) {
   return (long) getItem(position).hashCode();
} 
```

知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T12:09:06.133

覆盖[hasStableIds](http://developer.android.com/reference/android/widget/BaseAdapter.html#hasStableIds%28%29)以返回 true。

此外，适配器上的数据必须覆盖`hashCode()`或具有某种要返回的 id 字段`getItemId`。

# android - 使用 removeAllViews() 删除并使用 addView 恢复后，Android ListView 未收到 itemClick 事件

> ID：10267739
> 
> 赞同：0
> 
> 时间：2012-04-22T11:58:49.103
> 
> 标签：android, events, listview, onitemclicklistener, viewstack

我为我的 Android 应用程序实现了一个视图堆栈系统，它在推送新视图时会删除目标布局中的当前视图，将其存储在堆栈中，然后将新视图添加到布局中。

在我尝试存储然后恢复包含 ListView 的视图之前，它可以完美运行。这样做时，ListView 不会收到 itemClick 事件，尽管它会滚动。

栈系统的代码如下：

```
Stack<View> viewStack;

public View pushView(View v) {
    // 1\. Get reference to main content panel
    LinearLayout content = (LinearLayout) findViewById(R.id.contentPanel);
    View last = content.getChildAt(0);
    // Pushing old to stack
    viewStack.push(last);

    // 2\. Clear it
    content.removeAllViews();

    // 3\. Add new View
    content.addView(v);

    return last;
}

public View popView() {
    if (!viewStack.isEmpty()) {
        // 1\. Get reference to main content panel
        LinearLayout content = (LinearLayout) findViewById(R.id.contentPanel);
        View last = content.getChildAt(0);

        // 2\. Clear it
        content.removeAllViews();

        // 3\. Add last View
        content.addView(viewStack.pop());
        // Pushing old to stack
        return last;
    } else {
        return null;
    }
} 
```

奇怪的是，视图中包含 ListView（复选框和按钮）的其他项目确实会接收 clickEvents。我怀疑：1\. ListView 已失去焦点，因此它不会接收这些事件，或者 2\. ListView 已与 onItemClickListener 分离

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:35:56.310

如果您在 xml 文件中的布局中将“可点击”设置为“真”，则将其从各个位置删除。那你可以试试...

如果您在任何地方声明，那么只有。如果您声明“view_name.setClickable(true)”，则删除此行。如果您使用的是 ontouchlistener，那么还有一件事总是返回 false。实际上我遇到了类似的问题，我在 listview 行中使用 listview 和 imageview。我的 imageview 正在接收点击事件，但 listview 没有收到 onitemclick 事件，因为我在布局中将 imageview 设置为可点击。

# java - 我如何使抽象类与 JAXB 一起工作

> ID：10267743
> 
> 赞同：7
> 
> 时间：2012-04-22T11:59:21.240
> 
> 标签：java, xml, jaxb, abstract

亲爱的 Java 程序员，我使用了来自[http://www.vogella.com/articles/JAXB/article.html的示例](http://www.vogella.com/articles/JAXB/article.html)

用于我的 3 个类 UserStorage、User 和 UserTest 的 JAXB XML 使用

它工作正常，但它只是 unmarchialing

```
JAXBContext context = JAXBContext.newInstance(UserStorage.class);
                Marshaller m = context.createMarshaller();
                m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

the User class is ABSTRACT!, so it throws an 
```

> 线程“主”javax.xml.bind.UnmarshalException 中的异常：无法创建 platform.User 的实例 - 带有链接异常：com.sun.xml.internal.bind.v2.runtime 的 [java.lang.InstantiationException]。 unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:648) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:236) 在 com.sun.xml.internal.bind。 v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java:615) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.StructureLoader.startElement(StructureLoader.java:170) 在 com.sun.xml。 internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:487) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext。startElement(UnmarshallingContext.java:465) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:135) 在 com.sun.org.apache.xerces.internal.parsers。 AbstractSAXParser.startElement(AbstractSAXParser.java:501) 位于 com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400) 位于 com.sun.org.apache.xerces.internal.impl。 XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756) 在 com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648) 在 com.sun.org.apache.xerces.internal。 impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140) 在 com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl。scanDocument(XMLDocumentFragmentScannerImpl.java:511) 在 com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808) 在 com.sun.org.apache.xerces.internal.parsers.XML11Configuration。在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser 的 com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119) 解析 (XML11Configuration.java:737)。在 com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522) 在 com.sun.xml.internal.bind.v2.runtime 解析(AbstractSAXParser.java:1205)。 unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173) 在 javax.xml.bind.helpers.AbstractUnmarshallerImpl。unmarshal(AbstractUnmarshallerImpl.java:137) at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194) at platform.UserTest.main(UserTest.java:77) 原因：java.lang.InstantiationException at sun .reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at com.sun.xml.internal.bind.v2.ClassFactory.create0(ClassFactory.java :112) 在 com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext .java:609) ... 20 更多Platform.UserTest.main(UserTest.java:77) 处的 AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194) 原因：java.lang 处 sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30) 处的 java.lang.InstantiationException .reflect.Constructor.newInstance(Constructor.java:513) 在 com.sun.xml.internal.bind.v2.ClassFactory.create0(ClassFactory.java:112) 在 com.sun.xml.internal.bind.v2.runtime .ClassBeanInfoImpl.createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java:609) ... 20 更多Platform.UserTest.main(UserTest.java:77) 处的 AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194) 原因：java.lang 处 sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30) 处的 java.lang.InstantiationException .reflect.Constructor.newInstance(Constructor.java:513) 在 com.sun.xml.internal.bind.v2.ClassFactory.create0(ClassFactory.java:112) 在 com.sun.xml.internal.bind.v2.runtime .ClassBeanInfoImpl.createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java:609) ... 20 更多com.sun.xml.internal.bind.v2.ClassFactory.create0(ClassFactory.java:112) 的 java.lang.reflect.Constructor.newInstance(Constructor.java:513) 的 InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30)在 com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java: 609) ... 20 更多com.sun.xml.internal.bind.v2.ClassFactory.create0(ClassFactory.java:112) 的 java.lang.reflect.Constructor.newInstance(Constructor.java:513) 的 InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30)在 com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java: 609) ... 20 更多createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java:609) ... 20 更多createInstance(ClassBeanInfoImpl.java:231) 在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.createInstance(UnmarshallingContext.java:609) ... 20 更多

有什么解决方案吗，所以我可以将 User 类绑定到 XML，因为我可以使用用户详细信息保存 XML 文件，但是当我想检索它时，它说明 User 类是抽象的，我有一个管理员，经纪人，股东子类，但到目前为止，在我的用户测试类中，我只创建了 4 个管理员进行测试，谢谢并希望您能提供帮助。

```
import platform.UserStorage;
import platform.User;

public class UserTest {

private static final String USER_XML = "user2.xml";

public static void main(String[] args) throws JAXBException, IOException {

    ArrayList<User> userList = new ArrayList<User>();

    // create test users
            User user1 = new Admin();
            user1.setName("Dave");
            user1.setPass("1234");
            user1.setDeleted(true);
            user1.setBan(false);
            userList.add(user1);

            User user2 = new Admin();
            user2.setName("James");
            user2.setPass("1234");
            user2.setDeleted(true);
            user2.setBan(false);
            userList.add(user2);

            User user3 = new Admin();
            user3.setName("Mike");
            user3.setPass("1234");
            user3.setDeleted(true);
            user3.setBan(false);
            userList.add(user3);

            // create bookstore, assigning book
            UserStorage userstore = new UserStorage();
            userstore.setListName("Test List");
            userstore.setUserList(userList);

            // create JAXB context and instantiate marshaller
            JAXBContext context = JAXBContext.newInstance(UserStorage.class);
            Marshaller m = context.createMarshaller();
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            m.marshal(userstore, System.out);

            Writer w = null;
            try {
                w = new FileWriter(USER_XML);
                m.marshal(userstore, w);
            } finally {
                try {
                    w.close();
                } catch (Exception e) {
                }
            }

            // get variables from our xml file, created before
            System.out.println();
            System.out.println("Output from our XML File: ");
            Unmarshaller um = context.createUnmarshaller();
            UserStorage userstore2 = (UserStorage) um.unmarshal(new FileReader(
                    USER_XML));

            for (int i = 0; i < userstore2.getUsersList().toArray().length; i++) {
                System.out.println("User " + (i + 1) + ": "
                        + userstore2.getUsersList().get(i).getName() + " Pass "
                        + userstore2.getUsersList().get(i).getPass());
            }}  }

package platform;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

//If you want you can define the order in which the fields are written
//Optional

/**
 * @author dinesh.kaushish, james.wyche //updated XML properties.
 * 
 */
@XmlRootElement(name = "user")
@XmlType(propOrder = { "name", "pass", "deleted", "ban" }) 
```

..

```
public abstract class User implements UserInterface {

private String name;
private String pass;
private boolean deleted;
private boolean ban;

/**
 * @ author dinesh.kaushish
 * @param String username
 * return void
 */

public void setName(String name)
{
    this.name = name;
}

// If you like the variable name, e.g. "name", you can easily change this
    // name for your XML-Output:

/**
 * @author dinesh.kaushish
 * @param null
 * @return String user;
 */
@XmlElement(name = "user")
public String getName()
{
    return this.name;
}

/**
 * @author dinesh.kaushish
 * @param String pwd
 * @return void
 */
public void setPass(String pass)
{
    this.pass=pass;
}

/**
 * @author dinesh.kaushish
 * @param void
 * @return String password
 */
@XmlElement(name = "pass")
public String getPass()
{
    return pass;
}

/**
 * @author dinesh.kaushish
 * @param dFlag
 * @return void
 */
public void setDeleted(boolean deleted)
{
    this.deleted = deleted;
}

/**
 * @author dinesh.kaushish
 * @return boolean isDeleted
 */
@XmlElement(name = "deleted")
public boolean getDeleted()
{
    return deleted;
}

/**
 * @author dinesh.kaushish
 * @param bFlag
 */
public void setBan(boolean ban)
{
    this.ban = ban;
}

/**
 * @author dinesh.kaushish
 * @return Boolean isBanned
 */
@XmlElement(name = "ban")
public Boolean getBan()
{
    return ban;
}

public abstract void addUser();
public abstract void removeUser();
public abstract void verifyUser();
public abstract void passReset();
public abstract void faultReport();
public abstract void RequestsForAccess();
public abstract void UpdateDetails();
public abstract void BanUser();
public abstract void ChangePermissions();

    }

package platform;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.HashMap;

import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.events.XMLEvent;

import java.util.ArrayList;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;

/**
 * @author michael.wambeek, james.wyche //added JAXB support.
 *
 */
//This statement means that class "Bookstore.java" is the root-element of our example
@XmlRootElement(namespace = "platform")
public class UserStorage {

// XmLElementWrapper generates a wrapper element around XML representation
    @XmlElementWrapper(name = "userList")
    // XmlElement sets the name of the entities
    @XmlElement(name = "user")
private ArrayList<User> userList;
private String listName = ""; 
```

// 私有静态 UserStorage 实例；// james.wyche JAXB 代码结束。

```
public UserStorage(){

}

/**
 * @author michael.wambeek
 * 
 * Searches for a username and returns the password.
 * 
 * @param username The username to search for
 * @return The password of the correct username or null
 * @throws Exception
 */
public String findUser(String username) throws Exception{
    return search(username);
}

public boolean storeUser(String username, String password, UserType type){
    return true;
}

/**
 * @author james.wyche
 * @param userList
 */
public void setUserList(ArrayList<User> userList) {
    this.userList = userList;
}

/**
 * 
 * @return UserList
 */
public ArrayList<User> getUsersList() {
    return userList;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T12:28:59.327

为什么这会失败是因为 Jaxb 将尝试创建 User 的实例。这是抽象的，因此是失败的。

在您的抽象类上添加注释

```
@XmlTransient //Prevents the mapping of a JavaBean property/type to XML representation
@XmlSeeAlso({Admin.class, <other class>}) //Instructs JAXB to also bind other classes when binding this class 
```

查看每个的 javadoc（[XmlTransient](http://jaxb.java.net/nonav/2.2.5/docs/api/javax/xml/bind/annotation/XmlTransient.html)，[XmlSeeAlso](http://jaxb.java.net/nonav/2.2.5/docs/api/javax/xml/bind/annotation/XmlSeeAlso.html)）

这将阻止 jaxb 尝试初始化您的抽象类。

我发现这种方法的唯一缺点是会在创建的 xml 中添加额外的命名空间信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T12:29:31.840

您需要将[XmlSeeAlso](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlSeeAlso.html)注释添加到具有属性 Admin 的 User 类以及作为 User 类的子类的所有其他具体类。

```
@XmlSeeAlso({Admin.class}) 
```

PS，不要忘记将Xml标签@XmlRootElement添加到Admin类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T12:19:27.690

这是行不通的，因为 JAXB 在解组 xml 时必须创建类的新实例（对象）。如果 xml 中的标签绑定到抽象类，它就不能从该类实例化对象。您要么必须使 User 类非抽象，要么将 xml 标签绑定到 User 的具体子类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T14:38:18.027

您必须指定`concrete`每个元素的类型：

```
<user xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="Admin">
    ...
</user> 
```

# c++ - 提升共享内存映射重新附加

> ID：10267747
> 
> 赞同：1
> 
> 时间：2012-04-22T11:59:36.373
> 
> 标签：c++, boost, map, shared-memory

我的问题如下：

**为什么我的程序不能重新附加到共享内存映射？**

我在我的程序中执行以下操作（可能更容易使用 boost 页面中的示例，而这只是我程序中的一个小片段）：

**第一次，初始化它：**

```
m_sharedMemory = new managed_shared_memory(create_only, segmentName.c_str() , 1000000);
m_hashMap = m_sharedMemory->construct<MyHashMap>(segmentName.c_str())( 3, boost::hash<std::string>(), std::equal_to<std::string>() , m_sharedMemory->get_allocator<ValueType>()); 
```

**第二次“重新附加”**

```
m_sharedMemory = new managed_shared_memory(open_only, segmentName.c_str());
m_hashMap = m_sharedMemory->find<MyHashMap>(segmentName.c_str()).first; 
```

我的问题是，如果插入了 2 个项目，从 find 返回的对象上的 .second 调用将显示“1”，这实际上是错误的，它应该显示 2，在此之后如果我的程序试图在存储的地图中找到任何东西程序崩溃。有没有人已经这样做了。

如果我在初始程序运行中做同样的事情，那么从哈希中查找值是没有问题的。这仅在程序已初始化并且稍后程序重新启动并执行附加并尝试检索以前插入的值时才会发生。

谢谢您的帮助。

[Boost 快速参考地图示例](http://www.boost.org/doc/libs/1_41_0/doc/html/interprocess/quick_guide.html#interprocess.quick_guide.qg_interprocess_map)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:09:37.697

当我与这个图书馆的“制造者”交谈时，他告诉我只能在同一个过程中使用地图。

# android - 如何使用 GSON 在 android 中解析带有动态“key”的 JSON

> ID：10267749
> 
> 赞同：5
> 
> 时间：2012-04-22T11:59:46.963
> 
> 标签：android, gson

我一直在使用 GSON 库来解析所有 json 字符串并获取一个 JSON 对象。但是现在我需要解析的是这样的：

```
{
   "status":1,
   "info":[
      {
         "\u5a31\u4e50":"\u51b7\u76d8,\u9ad8\u811a\u676f,\u6211\u7684\u7cd6\u679c\u5c4b,\u670d\u52a1\u4e1a\u6d88\u8d39\u52b5"
      },
      {
         "\u7f8e\u5986":"\u4e2a\u62a4|\u5316\u5986#\u9762\u90e8\u62a4\u7406,\u4e2a\u4eba\u536b\u751f,\u8eab\u4f53\u62a4\u7406,\u9999\u6c34\u9999\u6c1b,\u6c90\u6d74|\u7f8e\u53d1\u7528\u54c1,\u5f69\u5986,\u7cbe\u6cb9SPA,\u773c\u90e8\u62a4\u7406,\u78e8\u7802\u53bb"
      },
      {
         "\u8863\u670d":"\u670d|\u9970|\u978b|\u5e3d#\u670d\u88c5,\u978b\u9774,\u5185\u8863,\u914d\u9970,\u536b\u8863,\u4f11\u95f2\u88e4,T\u6064,\u88d9\u5b50,\u886c\u886b,\u9488\u7ec7\u886b,\u5a74\u5e7c\u513f\u670d\u9970"
      }
   ],
   "total":3
} 
```

关键字段是动态的，所以我不知道如何编写模型类来读取它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T12:27:37.377

你希望你的模型类看起来如何？

`status`并且`total`可能会`int`，所以只有叶子`info`。

作为一个实验，只需添加一个字段`Object info`并查看 Gson 将如何将其设置为`ArrayList<LinkedHashMap<String, String>>`- 丑陋且难以通过键访问，但所有数据都在那里。鉴于这些信息，建模类的最快方法是：

```
class Something {
  int status;
  List<Map<String, String> info;
  int total;
} 
```

如果您可以控制 JSON 的生成方式，我建议将结构`info`从对象数组更改`[{a:b},{c:d},{e:f}]`为仅对象`{a:b,c:d,e:f}`。有了这个，您可以将其映射到 a`Map<String, String>`并具有所有好处，例如通过密钥访问，`keys()`并且`values()`：

```
class Something {
  int status;
  Map<String, String> info;
  int total;
} 
```

如果您想要后一个模型类而不更改 JSON 格式，则必须编写一个`TypeAdapter`（或者`JsonDeserializer`如果您只对解析 JSON 感兴趣，而不是从模型类生成它）。

这是一个 JsonDeserializer 帽子，它将您的原始`info`JSON 属性映射到一个普通的`Map<String, String>`.

```
class ArrayOfObjectsToMapDeserializer
    implements JsonDeserializer<Map<String, String>> {

  public Map<String, String> deserialize(JsonElement json, Type typeOfT,
      JsonDeserializationContext context) throws JsonParseException {
    Map<String, String> result = new HashMap<String, String>();

    JsonArray array = json.getAsJsonArray();
    for (JsonElement element : array) {
      JsonObject object = element.getAsJsonObject();
      // This does not check if the objects only have one property, so JSON
      // like [{a:b,c:d}{e:f}] will become a Map like {a:b,c:d,e:f} as well.
      for (Entry<String, JsonElement> entry : object.entrySet()) {
        String key = entry.getKey();
        String value = entry.getValue().getAsString();
        result.put(key, value);
      }
    }
    return result;
  }
} 
```

您需要注册此自定义`JsonDeserializer`，类似于：

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(
    new TypeToken<Map<String, String>>() {}.getType(),
    new ArrayOfObjectsToMapDeserializer());
Gson gson = builder.create(); 
```

请注意，`Map<String, String>`无论遇到什么类，这都会为任何类注册自定义反序列化器。如果您不想要这个，您还需要创建一个自定义`TypeAdapterFactory`并在返回和反序列化器实例之前检查声明类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-05T12:57:08.593

这里有一个解决方案，它不需要制作 JsonDeserializer。

您可以创建的只是地图中的 JsonElement`Map.Entry<String, JsonElement>`并使用 for 循环遍历条目

```
//parsing string response to json object
JsonObject jsonObject = (JsonObject) new JsonParser().parse(jsonString);
//getting root object
JsonObject dateWiseContent = jsonObject.get("rootObject").getAsJsonObject();

for (Map.Entry<String, JsonElement> entry : dateWiseContent.entrySet()) {      
    //this gets the dynamic keys
    String  dateKey = entry.getKey();

    //you can get any thing now json element,array,object according to json.

    JsonArray jsonArrayDates = entry.getValue().getAsJsonArray();
} 
```

[在这里](https://stackoverflow.com/a/43231533)阅读更多

# c# - HtmlTextWriter 不呈现

> ID：10267755
> 
> 赞同：1
> 
> 时间：2012-04-22T12:00:34.157
> 
> 标签：c#, asp.net, htmltextwriter

我正在使用 HtmlTextWriter 为我创建一些 HTML。我想测试我的页面是否真的有效，但它没有呈现 div。

使用系统；使用 System.Collections.Generic；使用 System.Web；使用 System.Web.UI；使用 System.Web.UI.WebControls；使用 System.IO；

```
public partial class web_content_notes_Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        /* Configuration Start */
        string thumb_directory = "img/thumbs";
        string orig_directory = "img/original";
        int stage_width = 600;
        int stage_height = 480;
        Random random = new Random();

        // array of allowed file type extensions
        string[] allowed_types = { "bmp", "gif", "png", "jpg", "jpeg", "doc", "xls" };

        /* Opening the thumbnail directory and looping through all the thumbs: */
        foreach (string file in Directory.GetFiles(thumb_directory))
        {
            string title = Path.GetFileNameWithoutExtension(file);
            if (allowed_types.Equals(Path.GetExtension(file)) == true)
            {
                int left = random.Next(0, stage_width);
                int top = random.Next(0, 400);
                int rotation = random.Next(-40, -40);

                if ((top > stage_height - 130) && (left > stage_width - 230))
                {
                    top -= 120 + 130;
                    left -= 230;
                }

            }

            //display the files in the directory in a label for testing
            Label1.Text = (file);

            StringWriter stringWriter = new StringWriter();

            // Put HtmlTextWriter in using block because it needs to call Dispose.
            using (HtmlTextWriter writer = new HtmlTextWriter(stringWriter))

                // The important part:
                writer.Write("<div>testing123</div>");

        }

    }
} 
```

我想将各种变量添加到 div 中。

我该怎么做呢？我记得在经典的 asp/vbscript 中，您必须在`<% code %>`不确定 ASP.NET / C# 中是否是这种情况下包装代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:02:48.573

> 我想测试我的页面是否真的有效，但它没有呈现 div。

好吧，不，它不会。看看你在做什么：

```
StringWriter stringWriter = new StringWriter();
using (HtmlTextWriter writer = new HtmlTextWriter(stringWriter))
    writer.Write("<div>testing123</div>"); 
```

所以，你正在写一个`StringWriter`. 然后你对那个字符串编写器什么都不做*：*文本在内存中，你让它被垃圾收集，基本上。

如果要写入`Page`的响应，则必须将结果写入`Page.Response`. 但是您应该决定是要控制请求的*整个*`Page`响应（在这种情况下可能不太合适）还是只控制一个控件，在这种情况下您可能应该将代码*放在自定义控件中*。

# javascript - 简化/编码 JSON 复合键

> ID：10267756
> 
> 赞同：2
> 
> 时间：2012-04-22T12:00:34.157
> 
> 标签：javascript, json, node.js, encoding, composite-key

我有一个**唯一的**复合键，它是一个简单的字符串化 JSON 结构与日期连接的混合体。这是一个看起来相当复杂的 ID。

`"{ foo: bar}Sun Apr 22 2012 12:58:01 GMT+0100 (BST)"`

我需要一个将这个字符串翻译成字符范围较少的东西的过程。最好只是字母数字。该过程不必是可逆的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:06:10.053

只需通过一些哈希函数运行它或对整个 id 字符串使用 Base64 编码。

```
 key = window.btoa( id ); 
```

[MDN 文档链接](https://developer.mozilla.org/en/DOM/window.btoa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:10:28.620

您可以使用一种技术来使用 unix 格式时间而不是`date.toString()`：

```
Math.floor(new Date().getTime()/1000) 
```

我试图找到一种巧妙地格式化日期的方法，但 javascript 没有[`strftime()`](http://www.google.com/url?sa=t&rct=j&q=strftime&source=web&cd=2&ved=0CDYQFjAB&url=http://www.cplusplus.com/strftime&ei=9vSTT82zEuSNiAeEq4SnBA&usg=AFQjCNF73iDG7nFsIrRCTA_UbuHGskIcTg&cad=rja)C/++ 中的任何东西，或者，嗯，几乎所有其他语言都没有。

# c# - 可扩展性和可用性

> ID：10267758
> 
> 赞同：2
> 
> 时间：2012-04-22T12:01:07.200
> 
> 标签：c#, scalability, high-availability

我对采用哪种方法以及最佳实践感到很困惑。假设我有一个 C# 应用程序，它执行以下操作：

从队列中发送电子邮件。要发送的电子邮件和所有内容都存储在数据库中。

现在，我知道如何使我的 C# 应用程序几乎可扩展，但我需要更进一步。

我想要某种形式的责任，即能够跨 X 服务器分配任务。因此，不仅仅是一台服务器完成所有处理，而是在服务器之间共享它。如果一台服务器出现故障，则负载将在其他服务器之间分担。我知道 NLB 会这样做，但我不是在这里寻找 NLB。

当然，您可以在 DB 表中添加某种列来指示应该分配哪个服务器来处理该记录，并且服务器上的每个应用程序都将具有某种与 DB 中的值匹配的 ID，并且它们只会拉他们自己的记录——但我认为这是廉价的、不好的做法和不切实际的。

由于潜在的死锁和其他可能的问题，我不会做数据库表行锁。

我也没有表示在这里使用“极端”线程，但是是的，每个项目都会有线程来处理或按线程对 x 数量的线程进行批处理。

在制作可扩展且具有高可用性的 C# 应用程序时，我应该如何处理以及您有什么建议？目标是拥有 X 个服务器，每个服务器都具有相同的应用程序，并且每个服务器都能够获取记录并处理它们，但具有在服务器之间共享的处理/项目级别，因此如果一个服务器或服务发生故障，另一个服务器或服务失败可以承担该负载，直到放回另一台服务器。

对不起，我缺乏理解或知识，但一直在思考这个问题，并且睡眠不足，试图想出一个好的强大的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:26:07.357

我会考虑批量处理工作，所以每个应用程序一次只拉回 x 条记录，将这些检索到的记录标记为表中的 bool 字段。我将修改 SELECT 语句以仅提取未标记为已完成/已完成的记录。在这种情况下，表锁可以在很短的时间内使用，以确保处理相同记录的应用程序没有重叠。

**编辑：**它不是很优雅，但您可以为每个条目设置一个日期戳和一个状态（而不是上面的 bool 字段）。然后，您可以运行定期代理作业，该作业运行 sproc 以重置任何状态为 In Progress 但已超过时间阈值但未设置为完成的记录的状态。稍后它们将准备好由另一个应用程序重新处理。

这可能不足以满足您的口味，但我敢打赌，企业中有很多应用程序同样简单且运行良好。最好的事情以最少的复杂性工作。

# php - 通过 PHP 更新/编辑数据库中的行

> ID：10267761
> 
> 赞同：0
> 
> 时间：2012-04-22T12:01:31.023
> 
> 标签：php, sql, database

我正在尝试制作一个脚本，以便可以编辑我数据库中的选定行。

虽然我没有运气。

有人可以解释一下我哪里出错了吗？

数据库信息：

ID

姓名

类型

由制成

已提交

文本

日期

键 1

关键 2

关键 3

关键 4

关键5

已检查

创建于

我想要真正允许人们编辑的唯一字段是名称和文本

等等我的edit_guides.php

```
$id = $_GET['id'];
$guides = mysql_escape_string(mysql_query("SELECT * FROM guides WHERE id = '$id'")); 
```

我有点不确定这个是否正确？

我不需要查看或任何东西？？？

然后对于表格：

```
 ECHO <<<END
<center>
    <FORM ACTION="edit_guide.pro.phpid=$id" enctype="multipart/form-data" METHOD=POST>
    <table width="446" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td colspan="2"><center>Edit a Guide</center></td>
      </tr>
      <tr>
        <td width="79">Made By:</td>
        <td width="367"><input type="text" name="madeby" value="$guides[username]"></td>
      </tr>
      <tr>
        <td>Name of Guide:</td>
        <td><input type="text" name="name" value="$guides[name]"></td>
      </tr>
    <tr>
        <td>Filed Under:</td>
        <td><select name=filedunder>
                   <option value=guides>Guides
            <option value=dailies>Dailies Guides

           <option value=gg#h>Game Guides # - H

            <option value=ggiq>Game Guides I - Q

            <option value=ggrz>Game Guides R - Z

            <option value=helpfulguides>Helpful Guides

            <option value=newbie>Newbie Guides
    </select></td>
      </tr>
       <tr>
        <td valign="top">Content:</td>
        <td><textarea  name="coding" cols="50" rows="35" value="">$guides[coding]</textarea></td>
      </tr>
      <tr>
        <td>Key Word 1</td>
        <td><input type="text" name="key1" value="None"></td>
      </tr>
        <tr>
        <td>Key Word 2</td>
        <td><input type="text" name="key2" value="None"></td>
      </tr>
        <tr>
        <td>Key Word 3</td>
        <td><input type="text" name="key3" value="None"></td>
      </tr>
        <tr>
        <td>Key Word 4</td>
        <td><input type="text" name="key4" value="None"></td>
      </tr>
        <tr>
        <td>Key Word 5</td>
        <td><input type="text" name="key5" value="None"></td>
      </tr>
        <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td colspan="2"><center><font size="-1"><i>
          <input type=submit name=Submit value="Edit">
        </i></font></center></td>
      </tr>
    </table></FORM> 
```

但是，这显示在页面上：

制作人：R

导游姓名：R

提起下：默认（指南）

内容：R

然后我的edit_guides.pro.php 虽然我仍然不确定这个页面是否有效，因为我还没有走那么远。

```
 $id=$_GET['id'];
    $madeby = $_POST['madeby'];
    $name = $_POST['name'];
    $coding = $_POST['coding'];
    $key1 = $_POST['key1'];
    $key2 = $_POST['key2'];
    $key3 = $_POST['key3'];
    $key4 = $_POST['key4'];
    $key5 = $_POST['key5'];
    $filedunder = 'guides';
    $filedunder2 = $_POST['filedunder'];

    if ((!$madeby) OR (!$name) OR (!$coding) OR (!$filedunder2) OR (!$key1) OR (!$key2) OR (!$key3) OR (!$key4) OR (!$key5))

    {

                   die(header("Location: $baseurl/staff/edit_guides.php?id=$id&error=Please+do+not+leave+any+info+blank."));

    }

    else

    {

mysql_query("UPDATE guides SET name = '$name' WHERE id = '$id'");
mysql_query("UPDATE guides SET fileunder = '$filedunder2' WHERE id = '$id'");
mysql_query("UPDATE guides SET coding = '$coding' WHERE id = '$id'");
mysql_query("UPDATE guides SET key1 = '$key1' WHERE id = '$id'");
mysql_query("UPDATE guides SET key2 = '$key2' WHERE id = '$id'");
mysql_query("UPDATE guides SET key3 = '$key3' WHERE id = '$id'");
mysql_query("UPDATE guides SET key4 = '$key4' WHERE id = '$id'");
mysql_query("UPDATE guides SET key5 = '$key5' WHERE id = '$id'");
        header("Location: $baseurl/staff/index1.php?error=The+news+has+been+updated+:)"); 
```

我现在遇到的主要问题是，它没有显示内容（文本）或数据库中的任何内容，只有字母 R，这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:12:14.980

从 mysql 数据库中执行选择

```
mysql_connect(...);
mysql_select_db($schemaName);
$result = mysql_query($sqlQuery);
$record = mysql_fetch_assoc($result);
mysql_free_result($record) 
```

并且您将在 $record 中获得记录（假设您的 $sqlQuery 返回一条记录）。

关于文章末尾的 SQL 查询集，您应该知道，将“header”字段更新七次只会导致将 $key5 变量值存储到 guides 表的 header 字段中，而其他先前的值将被丢弃。

其实我不明白最后一个 PHP 脚本的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:15:34.897

在您的第一个代码片段中，您正在转义查询的结果而不是查询本身。然后，您尝试访问结果而不首先使用`mysql_fetch_assoc`或类似功能读取结果。最后，你有一个巨大的 SQL 注入漏洞加上 8 个单独的查询，如果一个就足够了。网上有成千上万的 PHP+MySQL 教程，请考虑先阅读一些。

# php - 处理缺乏散列方法（不同的 php 版本 - 相同的代码）

> ID：10267762
> 
> 赞同：1
> 
> 时间：2012-04-22T12:01:52.097
> 
> 标签：php, codeigniter, hash, sha1, sha512

我正在开发一个 CMS 系统来运行我的客户网站，但我遇到了我试图避免的情况。该`hash()`函数需要 PHP >= 5.1.2，我显然不能假设所有客户端都运行它，因为我不会处理每个人的托管。

因此，我选择：

1.  仅坚持使用 SHA1 - 安全性较低
2.  在可用时使用 SHA512，否则使用 SHA1 - 在服务器升级时兼容性差
3.  仅使用 SHA512 - 强制客户端尽快升级（不好 - 并非总是可以）

我很感激所有的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:09:05.590

> hash() 函数需要 PHP >= 5.1.2，我显然不能假设所有客户端都运行它，因为我不会处理每个人的托管。

真的？！

*   PHP 5.2 自 2006 年 11 月发布
*   PHP 5.3 自 2009 年 6 月发布
*   PHP 5.4 已经发布了几个星期了

运行 PHP < 5.1.2 意味着它至少 (!) 6 年了，因此本身就是一个安全问题。哪种哈希算法或多或少安全的问题不再重要。

Regarding the question: `sha1()` (with salt) works fine for most use-cases, unless you write software for the CIA or such. The point is, that even salted `md5()`-hash isn't worth to get cracked on most sites.

> Using SHA512 only - forcing the client to upgrade ASAP (bad - not always they can)

When they deny to update a 6 years old software, they are doomed anyway...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:08:52.677

PHP 5.1.2[于 06 年发布](http://php.net/releases/index.php)。您可以放心地将其作为运行 CMS 的要求。如果您的一位客户使用 6 年的 PHP 版本 - 他会遇到比不兼容您的系统更糟糕的问题。就像您的 CMS 在 2006 年的主要浏览器 IE6 中无法很好地显示一样。

# iphone - MFMailComposeViewController 电子邮件地址无效？

> ID：10267766
> 
> 赞同：3
> 
> 时间：2012-04-22T12:02:58.930
> 
> 标签：iphone, objective-c, ios, email

我正在使用 MFMailComposeViewController，因此用户可以在应用程序中发送电子邮件。就像这样：

```
MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];

[mail setToRecipients:[NSArray arrayWithObject:emailString]];
mail.mailComposeDelegate = self;
[self presentModalViewController:mail animated:YES]; 
```

我注意到如果给它一个无效的电子邮件地址，它根本不会将它放入收件人字段中，我有没有采取行动来解决这种情况？或者覆盖这个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:41:33.530

首先尝试验证您的电子邮件地址。在下面使用此代码

```
 -(BOOL) NSStringIsValidEmail:(NSString *)checkString
    {
          NSString *stricterFilterString = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
          NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", stricterFilterString];
          return [emailTest evaluateWithObject:checkString];
    } 
```

将您的电子邮件字符串作为参数传递给 NSStringIsValidEmail: 方法。如果有效，它将返回 YES，否则返回 NO。

# iphone - 比较，从标签中获取字符串

> ID：10267768
> 
> 赞同：0
> 
> 时间：2012-04-22T12:03:09.100
> 
> 标签：iphone, ios, xcode, string, compare

我正在制作一个文字游戏，我终于想到了我的游戏中最重要的部分之一，即比较部分。

我得到了这个标签，当它启动时将不可见，该标签必须通过随机单词生成器在其中显示。例如这个词是：车库

现在，对于我的游戏，我必须将单词与输入进行比较，现在我已经使用 NSString 对整个单词进行了此操作，但我希望它比较每个字母。我希望能够表明，如果输入的第一个字母也有 G，比如garage。我想让它做点什么。

我想知道这是否可行以及您将使用哪些方法。我正在考虑制作 6 个字符串，因为我所有的随机单词都有 6 个字母，然后将单词分解为 6 ​​个字符串和输入，然后比较字符串？

希望有人有一些有用的提示或示例代码谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:15:16.757

hasPrefix 将让您判断一个字符串是否以另一个字符串开头。还有characterAtIndex。您可以使用它从每个字符串中获取一个字符并将其与另一个字符进行比较。

您可以编写一个采用整数索引并比较该索引处的两个字符串的方法：

```
- (BOOL) compareStringOne: (NSString *) stringOne 
  toStringTwo: (NSString *) stringTwo
  atIndex: (NSUInteger) index;
{
  if ([stringOne length] < index+1 || [stringTwo length] < index+1)
    return FALSE;
  return [stringOne characterAtIndex: index] == [stringTwo characterAtIndex: index];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:47:19.160

所以，假设你的字符串被猜到了......

```
NSString *stringToGuess = @"GARAGE"; 
```

你正在检查它是否以“GA”开头

```
NSString *myString = @"GA"; 
```

你可以用 hasPrefix 检查它：

```
if ([stringToGuess hasPrefix:myString]) {
    // <stringToGuess> starts with <myString>
} 
```

NSString 的文档描述了许多与字符串相关的简洁方法。

# wpf - 当项目不属于 ItemsSource 集合时，如何设置 ComboBox 的 SelectedItem？

> ID：10267769
> 
> 赞同：3
> 
> 时间：2012-04-22T12:03:45.203
> 
> 标签：wpf, colors, combobox, selecteditem

以下场景：

```
<ComboBox ItemsSource="{Binding Path=Names}"
          SelectedItem="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}">
</ComboBox> 
```

Names 是一个字符串集合，它可能会通过 ViewModel 中的代码进行更改。例如，姓名可以设置为男性姓名（John、Paul、George）或女性姓名（Mary、Jane、Karen）。

假设男性集合处于活动状态，并且用户选择“John”使其成为 SelectedItem。现在该系列更改为女性名称。默认情况下，SelectedItem 将设置为 Null，并且不再显示 John。相反，将显示一个空字符串。

我想要实现的是“John”仍然作为 SelectedItem 可见，尽管它不再在集合中。但是，由于它不是集合的一部分，我想将 SelectedItem 的颜色更改为红色。

我玩过 IsEditable 属性，但不喜欢 ComboBox 不断变化的外观。无论如何，用户不应该能够手动输入文本。

我尝试使用不同的模板和样式（例如 Template、ItemTemplate、ItemContainerStyle），但没有找到对我有利的方法。

是否可以按照我需要的方式设置提供的 ComboBox 的样式，还是必须创建自己的用户控件？

编辑：我找到了一个我可以忍受的解决方案。

```
<ComboBox IsEditable="True" IsReadOnly="True"
          ItemsSource="{Binding Path=Names}"
          Text="{Binding Path=Name}">
  <ComboBox.Style>
    <Style TargetType="{x:Type ComboBox}">
      <Style.Triggers>
        <DataTrigger Binding="{Binding Path=IsNameInCollection}" Value="False">
          <Setter Property="Foreground" Value="Red"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </ComboBox.Style>
  <ComboBox.ItemContainerStyle>
    <Style TargetType="{x:Type ComboBoxItem}">
      <Setter Property="Foreground" Value="Black"/>
    </Style>
  </ComboBox.ItemContainerStyle>
</ComboBox> 
```

在 ViewModel 中，我确保*Names*集合更改时*Name*属性不会更改。布尔属性*IsNameInCollection*将在*Name*属性或集合更改时更新。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:20:38.290

*注意：这不是一个真正可行的答案/解决方案，但只是一些您可能会认为值得考虑的想法：*

首先，`SelectedItem`如果集合发生变化（通过将其替换为新集合或清除并重新填充它），则将始终更改为 null。因此，当您绑定到`Name`某个对象的属性时，您能否防止该属性在内部被 null 覆盖？这样，ComboBox 中的值可能不会更改（也许您还需要 TwoWayBinding`Name`来使值保持不变；甚至触发更改事件，但这取决于一些测试）。

其次，渲染需要改变，所以最简单的方法是使用`ItemTemplate`和自定义`IValueConverter`实现来转换具有不同颜色/样式的特殊条目的信息。但这样做的缺点是，`ItemTemplate`通常将用于每个条目，包括当前选择的条目。

解决此问题的一种方法是使用`ItemTemplateSelector`此处描述的类似方法：http: [//www.wpftutorial.net/datatemplates.html](http://www.wpftutorial.net/datatemplates.html)（“如何使用 DataTemplateSelector 根据数据切换模板”部分）

另一种方法是使用容器而不是纯字符串。该容器还将保存一个布尔值来指示不同的渲染。该布尔值可以在`ItemTemplate`. 但在这种情况下，您需要包装所有字符串值。

第三，如果选择的值仍然是不在当前列表中的旧值，然后用户选择另一个值，ComboBox应该如何反应。一种逻辑是旧值消失了，但随后用户无法将其重新选择。如果它在列表中仍然可用，那么您必须以某种方式将其添加到当前值列表中，但将其标记为特殊值。在这两种情况下，您还需要一个逻辑，以便稍后检测是否选择了根据当前可用列表无效的值。

我希望这有助于找到一个可行的解决方案。***

# ruby-on-rails - validates_confirmation_of ：消息没有出现

> ID：10267771
> 
> 赞同：0
> 
> 时间：2012-04-22T12:04:04.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, validation

订阅者.rb

```
class Subscriber < ActiveRecord::Base
  validates_confirmation_of :email, :message => "Your emails don't match!"
end 
```

我的 Rails 应用程序中有这个。当我在没有匹配电子邮件的情况下创建新记录时，这是我的创建操作：

```
def create
  @subscriber = Subscriber.new(params[:subscriber])
  if @subscriber.save
    redirect_to root_path, :notice => "You've been subscribed!"
  else
    render 'new'
  end
end 
```

如何使错误消息显示在视图文件中？我在文档中没有看到任何内容说我需要在我的视图中添加一些内容，但消息没有显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:31:20.703

您实际上确实需要在视图中添加一些内容以显示消息。

Rails 通常会在您创建脚手架时为您执行此操作，但如果您需要为字段手动执行此操作，则需要在 HTML 模板中添加如下内容：

```
<%= f.error_messages_for :email_confirmation %> 
```

# asp.net - 无法加载类型错误

> ID：10267772
> 
> 赞同：2
> 
> 时间：2012-04-22T12:04:06.920
> 
> 标签：asp.net, facebook, facebook-c#-sdk

***大家好*****，**

***我正在尝试开发一个 facebook 游戏，但我对这个主题很陌生。当我在 Visual Studio 进行调试时，页面显示没有错误，但是当我将其发布到我的网站时，该错误页面出现了。***

```
Server Error in '/' Application.
Parser Error
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load type 'Xandra.index'.

Source Error: 
 Line 1:  <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="index.aspx.cs" Inherits="Xandra.index" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

Source File: /Apps/Web/Xandra/Index.aspx    Line: 1 

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

***我的源代码是：***

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Facebook;
using Facebook.Web;
using Facebook.Session;

namespace Xandra
{
    public partial class index : Facebook.Web.CanvasIFrameBasePage
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            CanvasSession fs = new Facebook.Session.FBMLCanvasSession(Config.APIKey, Config.Secret);
            base.RequireLogin = true;
        }

        protected void Button1_Click(object sender, EventArgs e)
        {

            long uid = (long)base.Api.Users.GetInfo().uid;
            Button1.Text = uid.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:28:20.723

您是否也部署了所有正确的程序集文件（/bin）？

# objective-c - __block 说明符如何工作？

> ID：10267774
> 
> 赞同：3
> 
> 时间：2012-04-22T12:04:19.880
> 
> 标签：objective-c, cocoa-touch, objective-c-blocks

我可以使用说明符在堆栈上指定一个变量`__block`，然后我可以在一个块中修改它。我只是想知道，幕后发生了什么？（如果该块在将来的某个时间执行，那么堆栈可能会被清除）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:54:57.753

当一个引用`__block`变量的块被复制时，该变量被移动到堆中。这意味着所有引用它的代码都必须通过间接的方式，基本上是一个指针，以便当它从堆栈移动到堆时，这些引用可以随之切换。

这[在此处](https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)记录。

# iphone - 如何在播放视频时允许 iPhone 自动锁定

> ID：10267776
> 
> 赞同：2
> 
> 时间：2012-04-22T12:04:34.373
> 
> 标签：iphone, ios, video, sdk, avplayer

如何让 iOS 设备在使用 AVFoundation 播放视频时调暗屏幕并自动锁定设备。使用 AVPlayer 播放视频默认禁用屏幕自动锁定。无论如何都可以在不暂停视频播放的情况下重新启用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:13:29.027

为什么你希望屏幕在播放视频时空闲？真正的答案是做不到。以下只是具有严重缺点的解决方法。

苹果允许我们使用的唯一方法是

```
[UIApplication sharedApplication].idleTimerDisabled 
```

您可以通过使用黑色的 UIView 并缓慢更改其 alpha 属性来以编程方式调暗屏幕，以创建屏幕空闲的错觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T09:36:17.593

我在我们使用 AVPlayer 在应用程序中显示视频背景的应用程序上工作。我们的解决方案是在一段空闲时间后停止视频。我的意思是在我们这边实现空闲计时器。然后向所有后台玩家发送消息以阻止他们。这是我知道的唯一好的解决方法。

# colors - 单击时更改 Textview 的颜色

> ID：10267778
> 
> 赞同：0
> 
> 时间：2012-04-22T12:04:41.333
> 
> 标签：colors, textview, android

我想在单击时更改我的文本视图的颜色。

实际上，我有这个 xml 代码。

```
<TextView
    android:id="@+id/textView1"
    android:autoLink="web"
    android:duplicateParentState="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button_modif"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/button_modif"
    android:text="Informations personnelles:"
    android:textColor="#00A9A9"
    android:textSize="7pt"
    android:textStyle="bold" /> 
```

我怎样才能实现我的目标？

提前致谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:26:18.993

你想改变什么？里面文字的颜色还是textview的背景颜色？

如果你想改变背景的颜色，你可以使用这个，

```
 tv.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            tv.setBackgroundColor(Color.WHITE);
        }
    }); 
```

但是如果你想改变它的文本颜色，使用这个，

```
tv.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            tv.setTextColor(Color.BLACK);
        }
    }); 
```

我希望它有所帮助。

# c# - 当前上下文中不存在名称“EVAL”

> ID：10267781
> 
> 赞同：7
> 
> 时间：2012-04-22T12:04:51.023
> 
> 标签：c#, asp.net

我在网格视图的标题中添加了一个按钮，但 Visual Studio 突出显示了这个错误：

> '名称 EVAL 在当前上下文中不存在'。

为什么会发生这种情况，如何解决？

```
 <asp:gridview  runat="server" >    
      <Columns>
         .....
         <asp:TemplateField>
             <ItemTemplate>
                  <asp:Literal runat="server" ID="litFamily" Text='<%# EVAL("CompanyAddress") %>'></asp:Literal>
                </ItemTemplate>
           </asp:TemplateField>
         ..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T06:31:53.210

使用任一

1.  `<%# DataBinder.Eval(Container.DataItem, "CompanyAddress")%>`
2.  `<%# Eval("CompanyAddress") %>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T08:31:36.667

使用“ **Eval** ”（E -> 大写字母，val > 小写字母）代替“ **EVAL** ”（所有大写字母）

# ruby-on-rails - 注册失败后重定向错误设计 2.0 和 rails 3.2.3

> ID：10267782
> 
> 赞同：0
> 
> 时间：2012-04-22T12:05:00.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, devise

我在**routes.rb**文件中有这个设计路线：

```
 app::Application.routes.draw do
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/  do
         devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", :registrations => "registrations" } do
         delete "/logout" => "devise/sessions#destroy"
         get "/login" => "devise/sessions#new"
         get "/sign_up" => "devise/registrations#new"
         get "/settings" => "devise/registrations#edit"
         get "/recover_password" =>  "devise/passwords#new"
         get "/confirm_account" =>  "devise/confirmations#new"
        end
      end
   match '*path', to: redirect("/#{I18n.default_locale}/%{path}")
   match '', to: redirect("/#{I18n.default_locale}")
 end 
```

我在项目中使用`http://localhost:3000/es`西班牙语和`http://localhost:3000/en`英语。

如果我去`http://localhost:3000/en/sign_up`并尝试创建一个新用户并失败，则重定向到`http://localhost:3000/en/users`

这种重定向是错误的，因为如果我尝试在我的切换语言中更改语言，我会在浏览器中重定向到 users#index 操作。

我需要重定向转到`http://localhost:3000/en/sign_up`或`http://localhost:3000/es/sign_up`

我已经覆盖了在**registrations_controller.rb**中**创建的设计操作**

 **```
class RegistrationsController < Devise::RegistrationsController

  def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with({}, :location => after_sign_up_fails_path_for(resource))
    end
  end

  private
  def after_sign_up_fails_path_for(resource)
   sign_up_path
  end

end 
```

**这里的问题是我看不到字段形式的错误。我的意思是该应用程序不会在表单字段中显示错误。devise_error_messages 为空。**

**我该如何解决这个问题？**

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:16:29.663

（我的回答错了——我改了）

我认为不是在失败时重定向：

```
respond_with({}, :location => after_sign_up_fails_path_for(resource)) 
```

您希望使用相同的失败资源留在同一页面上：

```
render :action => 'new' 
```

尽管原行应该具有相同的效果：

```
respond_with resource 
```**

# xcode - Core Audio - 基于远程 IO 的低延迟节拍器

> ID：10267784
> 
> 赞同：1
> 
> 时间：2012-04-22T12:05:22.517
> 
> 标签：xcode, core-audio, remoteio

我正在尝试使用 Core Audio 构建低延迟节拍器。

我想要实现的是使用远程 IO，它应该为我产生的每个音频包提供一个时间戳。然后我想用它来记住我何时开始播放并从开始时间戳中减去当前时间戳以获得当前位置。然后我想用它来根据需要为节拍器生成音频。

经过一番研究，我发现这将是创建低延迟节拍器的最佳方式。然而，尝试实现它并深入研究这个框架是相当艰巨的。如果有人知道我如何将它们组合在一起，或者甚至可以将我指向可以收集使其工作所需的信息的来源，我将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:07:35.963

忽略数据包时间戳，并计算样本。如果您将每个节拍器声音的起点定位为以已知采样率相隔精确数量的样本，则速度将精确到亚毫秒。每个数据包的时间戳解析精度要低得多。

# ruby-on-rails - 向rails 3中的多对多表添加另一个属性

> ID：10267786
> 
> 赞同：3
> 
> 时间：2012-04-22T12:05:46.620
> 
> 标签：ruby-on-rails, many-to-many, has-and-belongs-to-many

我目前正在使用 has_and_belongs_to_many 来实现多对多关系。但是，我想在 many_to_many 表中放入一个属性。

基本上我正在创建一个电子邮件系统。我有用户和对话。一个用户可以有很多对话，一个对话也可以有很多用户。但是，我正在尝试使其具有已读/未读属性来显示已读取的消息。由于会话可以有许多用户，因此将属性放在会话表中是不切实际的，因为这意味着会话被所有人阅读。所以我认为它在中间的桌子上效果最好。我想知道如何在中间表中访问该属性。如果属性被读取。我输入什么代码来访问它以及如何更新属性。如上所述，我正在使用 has_and_belongs_to_many

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T12:59:57.327

如果您想为您的[has-and-belongs-to-many 关联](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)添加其他属性，则必须为该关系构建一个模型类。[请参阅Rails 指南](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference)中关于它的详细描述。

在为自己阅读之后，当前版本的 Rails 已弃用它，所以你真的应该切换到[`has_many :through`](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association). 您的模型可能是（从 Rails 指南复制和更改，我不知道这是否`connection`是 m2n 关系的好名字）：

```
class User < ActiveRecord::Base
  has_many :connections
  has_many :conversations, :through => :connections
end

class Connection < ActiveRecord::Base
  belongs_to :user
  belongs_to :conversation
end

class Conversation < ActiveRecord::Base
  has_many :connections
  has_many :users, :through => :connections
end 
```

在那里，您可以向`connections`表中添加其他属性，并在代码中引用它们。

# joomla - 在 Joomla 中请求变量

> ID：10267793
> 
> 赞同：0
> 
> 时间：2012-04-22T12:06:39.197
> 
> 标签：joomla, joomla-extensions, joomla1.7

我是 Joomla 的新手。我正在尝试编写一个模块，该模块将从数据库中获取并显示内容。现在为了从数据库中获取内容，我需要获取当前文章的当前文章 ID 和类别 ID。

我可以使用 JRequest::getVar('id'); 获取带有文章标题附加的 ID；例如：16：abc-def-article-title。

我可以将 id 子串出来，但我认为会有更好的地方来实现它？而且我还需要获取类别 ID。

另外请让我知道如何查看 JRequest::getVar(') 包含的所有变量。非常感谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:16:00.953

首先，尝试通过方法提取文章ID `getInt()`：

```
JRequest::getInt('id', 0); 
```

那就更安全了`getVar()`。

然后，要获取类别 ID，您可以在模块文件中使用此代码：

```
jimport('joomla.application.component.model');
$articlesModel = JModel::getInstance('ContentModelArticle');

$articleId = JRequest::getInt('id', 0);
$article = $articlesModel->getItem($articleId);
$categoryId = $article->catid; 
```

使用 Joomla！内置模型而不是直接 SQL 查询是理解 Joomla 架构和编写将来易于维护的安全应用程序的最佳方式。

注意：代码示例实际上仅适用于 Joomla 2.5（可能适用于 1.6、1.7，但我不同意）。

# c++ - C++ - 邮件发件人

> ID：10267794
> 
> 赞同：0
> 
> 时间：2012-04-22T12:06:45.573
> 
> 标签：c++, email, function, sender

我想在 C++ 上创建一个邮件发件人（不是邮件客户端，例如 GMail）。在这个邮件中，我也希望能够更改标题。

我已经下载并安装了 POCO 库，这可能会有所帮助（我在类似的 anwser 上找到了它）。

例如，我想要的是如下命令：

```
e-mailsend(to,headers,subject,message);
// Or something like:
email.send(to,headers,subject,message); 
```

但是，如果可能的话，我想使用 C++ Mail 函数而不是系统函数（如 unix 中的 mail-utils）。

*如果您需要更多解释，请评论...*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:22:36.213

在您的评论中，您要求提供没有 SMTP 服务器的选项。

SMTP 需要 SMTP 服务器。选择是可以直接发送电子邮件（例如，通过端口 25 发送到 yahoo.com 上的 joe）或发送到将中继消息的 SMTP 服务器。

理想情况下，您需要在本地拥有自己的 SMTP 服务器（这样您的应用程序更简单，并且您的 SMTP 服务器在后台发送消息，处理重试、退回和连接错误）并使用信誉良好的 SMTP 服务或现有的电子邮件帐户。

1.  如果您想发送垃圾邮件，我强烈建议您不要这样做。

2.  如果你想发送少量的消息，这些消息会被期待这些消息的人打开，请使用普通帐户（Yahoo、GMail、Google Apps 等），如果你发现你的应用程序响应不够快，请安装 Postfix、Sendmail 或其他您喜欢的本地 SMTP 服务器。

3.  如果您想发送大量电子邮件，并且您确定这些邮件不会让您成为垃圾邮件发送者，请使用 SMTP 服务，例如 SendGrid（注意：它们还有一个 Web API，您可能会发现它比SMTP）。

根据您需要的上述哪一项，我肯定会通过 SMTP C++ 客户端（如 POCO）的建议来回答您的原始问题，并变得更简单。

# .net - .NET 中任何用于医疗诊断和数据挖掘的开源项目

> ID：10267796
> 
> 赞同：3
> 
> 时间：2012-04-22T12:06:55.650
> 
> 标签：.net, algorithm, artificial-intelligence

我在 .NET/C# 中找不到任何用于医疗诊断和数据挖掘的开源项目。有没有这样的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:26:42.063

我不熟悉这样的项目，我怀疑它是否存在（因为它非常具体）。[这](https://stackoverflow.com/questions/8014957/java-open-source-projects-for-medical-diagnose-data-mining)是一个关于开源 Java 医疗诊断程序的类似问题（+ 答案）。

# c# - 从 WPF 应用程序窗口隐藏 WPF 用户控件中的按钮

> ID：10267811
> 
> 赞同：0
> 
> 时间：2012-04-22T12:09:33.170
> 
> 标签：c#, wpf, user-controls

在 WPF 应用程序中，我在按钮所在的位置使用 WPF 用户控件。

对于应用程序，我想制作一个简单和高级版本，因此当 WPF 应用程序中的复选框设置为简单或高级模式时，应该显示/隐藏用户控件中的一些按钮。

我不想将复选框直接放在用户控件中，因为它在 WPF 应用程序上多次出现。

所以我的问题基本上是：如何从 WPF 应用程序中设置 WPF 用户控件中按钮的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:08:19.307

如果使用 MVVM，您可以让基本 ViewModel 公开一个布尔 IsAdvancedMode（您可以相应地设置），然后在按钮 UserControl 中使用 BooleanToVisibilityConverter ( [MSDN Link )。](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)

# entity-framework - 如何映射相同的两个实体之间的两个关系？

> ID：10267813
> 
> 赞同：0
> 
> 时间：2012-04-22T12:09:43.560
> 
> 标签：entity-framework, code-first, modeling, entity-model

一些关于如何正确描述这些关系的建议将是一个很好的开始。准确描述的事情是寻找解决方案的问题。我有实体用户和登录，其中登录基本上描述了一个用户的登录会话。因此，用户通常有许多登录实例。这种关系仅在登录端使用必需的单个用户导航属性进行描述，并且在用户端有一个隐含但未声明的登录集合。

然后，对于另一个关系，在 Login 的授权下创建了一个 User，因此在 User 侧描述了此关系，具有 Login 导航属性，并且在 Login 侧有一个隐含的但不是 User 集合。

除了使用 DB 工具之外，我没有做太多的 DB 建模，它们总是为我找到正确的关系，但是现在，我必须首先使用流利的映射为代码映射这些关系。我如何描述这两种关系，什么是主面和从属面，这里的多重性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:03:32.417

Code First 试图将可能是相同关系的两个方面联系起来。相反，当您有两个不同的单向关系时，您需要通过使用不带参数的 WithMany() 明确告诉 Code First 反向导航属性不存在来告诉 Code First：

```
public class User
{
    public int Id { get; set; }
    public int LoginId { get; set; }
    public virtual Login Login { get; set; }
}

public class Login
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public virtual User User { get; set; }
}

public class SomeContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Login> Logins{ get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasRequired(e => e.Login)
            .WithMany()
            .HasForeignKey(e => e.LoginId);

        modelBuilder.Entity<Login>()
            .HasRequired(e => e.User)
            .WithMany()
            .HasForeignKey(e => e.UserId);
    }
} 
```

# python - 理解python for循环中的范围

> ID：10267817
> 
> 赞同：2
> 
> 时间：2012-04-22T12:10:06.553
> 
> 标签：python

下面的程序正在查找给定范围内的素数。对于 noprimes 列表理解部分，为什么我们在范围内有 3 个参数？

```
noprimes = [j for i in range(2, 8) for j in range(i*2, 50, i)]
primes = [x for x in range(2, 50) if x not in noprimes]
print prime 
```

我在那里做什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T12:11:47.100

请参阅[文档](http://docs.python.org/library/functions.html#range)：

```
range([start], stop[, step]) 
```

当将其与`for(..; ..; ..)`循环进行比较时，例如在 C 中，三个参数的使用方式如下：

```
for(int i = start; i != stop; i += step) 
```

文档中也有很好的例子：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> range(1, 11)
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> range(0, 30, 5)
[0, 5, 10, 15, 20, 25]
>>> range(0, 10, 3)
[0, 3, 6, 9]
>>> range(0, -10, -1)
[0, -1, -2, -3, -4, -5, -6, -7, -8, -9]
>>> range(0)
[]
>>> range(1, 0)
[] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T12:12:26.110

对于`range()`，基本思想是它为您生成一系列项目。将此视为参考[http://docs.python.org/library/functions.html#range](http://docs.python.org/library/functions.html#range)：

```
 format: range([start], stop[, step]) 
```

同时这里有一些基本的解释，最简单的例子：

```
 range(5) 
```

将生成从 0（默认起始值​​）开始的范围内的数字，并以 1（默认值）为增量上升到但*不*包括 5，因此

```
 In [1]: range(5)
 Out[1]: [0, 1, 2, 3, 4] 
```

您可以为范围指定其他参数，例如起始值、结束值以及步长值。所以`range(startval, endval, stepval)`。请注意，`endval`它*不*包含在生成的序列中。

```
 range(0, 5, 1) 
```

相当于

```
 range(5) 
```

例如，要生成 0 到 20 之间的所有偶数，您可以这样做

```
 range(0, 21, 2) 
```

请注意，在 Python 3 之前会`range`生成一个列表并`xrange`按需生成数字序列。

在您的特定代码中使用列表理解和范围。通过暂时消除列表推导以获得更清晰的想法，可能更容易理解算法和 for 循环的作用。列表推导是一种强大而有效的构造，如果您打算保留原始代码，则绝对应该使用它。

```
#noprimes = [j for i in range(2, 8) for j in range(i*2, 50, i)]
noprimes = []
for i in range (2, 8):
   for j in range (i*2, 50, i):
      noprimes.append(j)

# primes = [x for x in range(2, 50) if x not in noprimes]
primes = []
for x in range(2, 50):
   if x not in noprimes:
      primes.append(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:22:17.063

基本上，您`i`在*非素数*中逐步生成`i`（任何倍数显然都是非素数）。`i`在`range(2,8)`ie中`[2, 3, 4, 5, 6, 7]`，因为对于 50 之前的素数，您只需要消除数字的倍数，直到`sqrt(50)`7（大约）。

如果嵌套列表理解令人困惑，请尝试将其分解为多个步骤以便于理解。

```
>>> [j for i in [2] for j in range(i*2, 50, i)]
[4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48]
>>> [j for i in [3] for j in range(i*2, 50, i)]
[6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48] 
```

顺便说一句，也可以在网上寻找更好的素数算法。这在算法上很差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T12:17:00.517

范围的三个参数由 ThiefMaster 解释。关于代码 - 代码对我来说看起来不错。唯一的问题似乎是`print prime`线路。也许你应该添加

```
for prime in primes :
   print prime 
```

# linux - 记录线程事件

> ID：10267821
> 
> 赞同：1
> 
> 时间：2012-04-22T12:10:29.100
> 
> 标签：linux, gcc, profiling, pthreads

假设我需要定期查看一个线程的状态，并在整个程序执行过程中记录它的状态。我不知道如何开始思考这个问题。任何指针（双关语？）？我在 Linux 上，使用`gcc`，`phreads`并且`C`可以访问所有常用的 Linux 工具。基本上，我想我问的是如何为线程构建一个简单的分析器，它会告诉我在程序执行期间线程处于某种或其他状态的时间。

我希望能够像 Threadscope 那样创建图表。X 轴是时间，Y 轴是核心/线程数，“颜色”是状态：绿色表示正在运行，橙色表示垃圾收集，依此类推。这现在更有意义了吗？

![螺纹镜图像](../Images/27d943721a9eba05e36ff0c61fedb442.png).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T15:32:56.573

对于 Linux 特定的解决方案，您可能想分别查看进程和线程统计信息`/proc/<pid>/stat`。`/proc/<pid>/task/<tid>/stat`查看`proc(5)`手册页以获取那里所有字段的完整描述（在线[http://man7.org/linux/man-pages/man5/proc.5.html](http://man7.org/linux/man-pages/man5/proc.5.html) - 搜索`/proc/[pid]/stat`）。`cutime`具体来说，至少`stime`是您感兴趣的领域。这些是单调递增的时间，因此您需要记住先前测量的值，以便能够生成在给定时间片内进程/线程中花费的时间，以便为您的图表生成数据。（这就是`top(1)`工作原理。）

然而，对于分析器来说，区分不同的状态会使问题变得更加复杂。分析器如何区分被分析的程序处于哪个状态？在我看来，被分析的程序线程需要以某种方式向分析器发出信号。您需要为这种状态共享提供某种量身定制的解决方案（除非您可以在不同的线程中运行不同的状态并以这种方式进行区分，我对此表示怀疑）。

如果状态转换是在一个地方完成的（例如，在您的示例中*进入 GC*并*离开 GC*），那么一种方法如下：

1.  被监视的线程将通过使用 POSIX 函数获得特殊状态的开始和结束时间`clock_gettime()`-`clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &tp)`您可以获得进程时间，并且`clock_gettime(CLOCK_THREAD_CPUTIME_ID, &tp)`可以获得线程时间（两者都是单调递增的）。
2.  线程可以使用某种 IPC 将这些时间传递给分析器程序。
3.  如果 profiler 应用程序知道进入和离开状态的线程时间，那么由于它知道测量切片变化时的线程时间值，它可以确定在报告时间片内报告的状态中花费了多少线程时间（当然，这里我们需要调整一个状态的开始时间，使其等于下一个报告时间片的开始）。
4.  整个进程在特定状态上花费的时间可以通过对该状态的线程时间求和来计算。

请注意，通过`/proc/<pid>/stat`or `/proc/<pid>/task/<tid>/stat`，测量精度不是很好（时钟滴答，通常以 10ms 为单位），但我不知道从进程/线程外部获取计时信息的其他方式。该函数`clock_gettime()`给出了非常准确的时间（名义上为纳秒精度，但请注意，至少在某些 MIPS 和 ARM 系统中，由于 Linux 内核中这些字段的准确计时器读取不存在实现，因此至少在某些 MIPS 和 ARM 系统中，精度与下面的`stat`文件一样差）。`/proc`您还需要进行一些实验以确保这两个计时源确实会给出相同的结果（通过从同一线程读取两个值）。你当然可以使用这些`/proc/.../stat`线程内部的文件，但是除非您在一个状态中花费大量时间，否则准确性不是很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T21:37:27.630

好吧，与由 haskell 编译器生成并由 Threadscope 处理的分析信息的直接匹配是使用 C 和 GCC 的**gprof**实用程序（它是 GNU binutils 的一部分）。

要使其与 pthread 一起正常工作，您需要每个线程触发一些计时器初始化函数。这可以在不使用以下 pthreads 包装库修改代码的情况下完成：http: [//sam.zoy.org/writings/programming/gprof.html](http://sam.zoy.org/writings/programming/gprof.html)。我最近没有处理过这个问题，可能是有些东西发生了变化，不再需要包装器了......

至于解释分析结果的 GUI，有 kprof (http://kprof.sourceforge.net)。不幸的是，AFAIK 它不会生成线程持续时间图，因为您必须使用 gprof 生成的文本信息来处理您自己的解决方案。

如果您对使用 GCC 提供的“标准”解决方案不挑剔，您可能想试试这个：[http](http://code.google.com/p/gperftools/?redir=1) ://code.google.com/p/gperftools/?redir=1 （没有亲自尝试，但是听到好的意见）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:02:42.130

看看[英特尔 VTune Amplifier XE](http://software.intel.com/en-us/articles/intel-vtune-amplifier-xe/)（以前的……英特尔线程分析器），看看它是否能满足您的需求。该工具和其他英特尔 Linux 开发工具可[免费用于非商业用途](http://software.intel.com/en-us/articles/non-commercial-software-download/)。

在视频[Using the Timeline in Intel VTune Amplifier XE 中](http://software.intel.com/en-us/articles/intel-vtune-amplifier-xe/)展示了多线程应用程序的时间线，9:20 演示者提到 *“...使用框架 API，您可以以编程方式标记代码中的某些事件或阶段。这些标记将出现在时间线上。”*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:58:35.113

*我认为构建一个简单的分析器*将相当困难，因为您必须考虑许多不同的因素，并且系统分析是一项固有的复杂任务，在分析多线程应用程序时更是如此。我能想到的最好的建议是查看已经存在的东西，例如[OProfile](http://oprofile.sourceforge.net/news/)。

OProfile 的一个优点是它是开源的，因此[源代码可用](http://oprofile.sourceforge.net/download/)。但除此之外，我怀疑询问如何构建分析应用程序可能超出了某人可以在 SO 问题中回答的范围，这可能就是为什么这个问题没有得到很多回应的原因。希望看一些示例可以帮助您入门，然后如果您有更集中的问题，您可能会得到一些更详细的答复。

# ruby-on-rails - 捆绑安装时出错

> ID：10267824
> 
> 赞同：0
> 
> 时间：2012-04-22T12:10:45.543
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ on rails 的新手，我正在关注第二版在线版 Michael Hartl 的[“Ruby on Rails 教程：通过示例学习 Rails”](https://rads.stackoverflow.com/amzn/click/com/0321743121)。

当我`bundle install`从我的 rails 应用程序运行时，它会显示如下错误

```
Gem::RemoteFetcher::FetchError: too many connection resets (http://cachefly.mirrors.rubygems.org/gems/rubyzip-0.9.7.gem)
An error occured while installing rubyzip (0.9.7), and Bundler cannot continue.
Make sure that `gem install rubyzip -v '0.9.7'` succeeds before bundling. 
```

我从昨天晚上开始尝试这些，但没有结果有人说这是我的互联网问题，但互联网工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:47:57.100

如果你搜索`ruby gem "too many connection resets"`，你会发现很多参考资料。该团队目前无法对其进行追踪。这些是原因：

*   尝试构建一个 gem 并将其推送到 GitHub。这是最近修复的，与您的情况无关。
*   [RubyGems.org](http://rubygems.org/)存在您无法修复的网络问题。你应该尝试稍后再做`bundle install`。
*   按照错误消息中的提示，通过执行以下操作安装第一个 ruby​​zip：`gem install rubyzip -v '0.9.7'`。成功后，继续`bundle install`（然后将使用您安装的 ruby​​zip）。

# ios5 - IOS - 在 PageViewController 中防止页面卷曲

> ID：10267825
> 
> 赞同：1
> 
> 时间：2012-04-22T12:11:12.077
> 
> 标签：ios5, uibarbuttonitem, uipageviewcontroller

我有一个显示图像的 UIPageViewController。我已经设置了一个机会来邮寄用户当前正在查看的所需图像。为此，如果用户点击屏幕的中心区域，则会出现一个标签栏，其中包含一个标题为“邮件”的栏按钮项目。按下此按钮时，图像将附加到邮件编辑器。但是我在这里有一个小问题：当我点击它时，条形按钮位于左边缘，页面卷曲发生并且我无法获得邮件编辑器 - 更准确地说，我无法点击按钮。按下此按钮时如何防止页面卷曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:08:27.253

有几种方法可以克服这个问题。第二种解决方案更容易实现。

第一个是访问为页面视图控制器定义的手势识别器（来自“gestureRecognizers”属性，它返回一个手势识别器数组），搜索“点击类型”手势，然后将它们分配给您的视图控制器. 该委托将实现该方法

```
手势识别器：应该接收触摸：
```

并检查是否在标签栏位置发生了点击，在这种情况下将返回 NO，因此不会触发手势。如果您仍然想要点击但它在标签栏区域之外，您的代表将返回 YES。

另一种可能性是定义一个新的点击手势识别器并将其分配给标签栏。在这种情况下，当您点击按钮（位于标签栏中）时，您分配给您的点击手势的目标选择器将被触发。显然，这个选择器不会做任何事情，因为它的目的只是为了避免传播到超出它的手势（这是默认行为）。

我认为我的回答从您的请求中来得太晚了，所以如果您找到了更好的解决方案，请发布！

# mysql - 如何计算包围一组mysql几何的边界框？

> ID：10267833
> 
> 赞同：2
> 
> 时间：2012-04-22T12:12:20.113
> 
> 标签：mysql, spatial, bounding-box

我有一个包含一组形状的 mysql 表。该表定义如下：

```
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| shapeid    | int(11)      | NO   | PRI | NULL    |       |
| AREA       | double       | YES  |     | NULL    |       |
| PERIMETER  | double       | YES  |     | NULL    |       |
| KENPROV_   | double       | YES  |     | NULL    |       |
| KENPROV_ID | double       | YES  |     | NULL    |       |
| PROV_NAME  | varchar(255) | YES  |     | NULL    |       |
| ogc_geom   | geometry     | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+ 
```

该表包含 24 个形状（记录）。每个形状在“ogc_geom”中都有定义该形状的多边形。

shapeid = 0 的“ogc_geom”示例如下：

```
POLYGON((33.99319839477539 -3.185349941253662,38.084800720214844 -3.185349941253662,38.084800720214844 5.022779941558838,33.99319839477539 5.022779941558838,33.99319839477539 -3.185349941253662)) 
```

如何计算包围所有形状的边界框？

# ruby-on-rails-3 - 在 Rails 3 中检查复选框时的远程 AJAX 调用

> ID：10267835
> 
> 赞同：0
> 
> 时间：2012-04-22T12:12:45.877
> 
> 标签：ruby-on-rails-3, jquery, checkbox

如果我在 Rails3 中有一个复选框，当用户更改它的值时如何执行远程 AJAX 调用。

这听起来像是一项简单的任务，但我找不到一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:12:50.890

您可以将更改事件上的复选框的值传递给表单，并使用 :remote => true 可以在 form_for.syntax 中使用 AJAX 更改复选框并提交表单是 **“:onchange =>”。 form.submit()**
我希望这会对你有所帮助。
谢谢。

# javascript - 将软件移植到 Panasonic Viera

> ID：10267837
> 
> 赞同：2
> 
> 时间：2012-04-22T12:13:15.910
> 
> 标签：javascript, html, television

我们正在将现有的 HTML/JavaScript/CSS 应用程序移植到 Panasonic 平台。在应用程序中，我们使用 JavaScript 生成 HTML 和 CSS 来设置应用程序的样式。

Panasonic Viera Connect 平台编程语言是 JavaScript，但是是“非浏览器 JavaScript 引擎”，这意味着除了引擎类之外，我们需要重写整个 UI 渲染部分，因为它们有自己的 API。

重写应用程序是唯一的方法吗？有没有其他人的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:29:11.577

重写应用程序是唯一的方法。过去 4 个月，我正在为中欧媒体企业开发视频库。

[http://developer.vieraconnect.com/](http://developer.vieraconnect.com/) - 这里是注册门户（免费或付费），带有一些起始示例和文档。

公司与 Panasonic 有小额交易，因此我可以访问 Panasonic 论坛，在那里我可以与 Panasonic 开发人员讨论问题。

Viera Connect Developers Application 是实现此目的的唯一方法。它可以在市场上买到。

您可以将应用程序源存储在本地网络中或联系松下。

但是你可以使用一些 JS 库（服务器 API 控制 :)

如果您需要更多信息，请与我们联系。

# mysql - MySQL中“LAST”聚合函数的建议解决方案

> ID：10267838
> 
> 赞同：2
> 
> 时间：2012-04-22T12:13:54.510
> 
> 标签：mysql

我有一个日志表，如下所示：

```
logs (_id_, client, metric, value); 
```

我正在尝试从 PHP 前端在 MySQL 中编写以下查询，以从日志表中获取信息。

```
SELECT client, LAST(value) AS value
FROM logs 
WHERE metric = 'free space'
GROUP BY client; 
```

当然，除非那`LAST`不是一个有效的聚合函数。

我提出的解决方案是这样的：

```
SELECT client, value 
FROM logs 
WHERE id IN (
   SELECT MAX(id) 
   FROM logs 
   WHERE metric = 'free space' 
   GROUP BY client); 
```

但是，对于一个 4,000 行的非常小的表，在我的开发机器上执行这个查询需要超过 60 秒。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:25:41.477

你应该通过加入来做到这一点

```
SELECT l.client, l.value 
  FROM logs l
  JOIN ( SELECT client, MAX(id) as id
           FROM logs 
          WHERE metric = 'free space' 
          GROUP BY client ) s
    ON l.id = s.id 
```

您还应该`id`为外部查询创建一个（如果可能的话是唯一的）索引，这使连接能够使用索引。如果优化非常重要，您可能还需要一个索引`client, id`，或者可能`id, client`，对于子选择，尽管这并不像您必须扫描整个表那么重要。

另请参阅[SQL JOIN 与 IN 性能？](https://stackoverflow.com/questions/1200295/sql-join-vs-in-performance)和[IN 与 JOIN 与大行集](https://stackoverflow.com/questions/1001543/in-vs-join-with-large-rowsets)讨论使用`in`or `join`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:06:14.403

此查询在执行 group by 操作后提供最新的行。还显示了另一个表的连接。

选择消息。* , `users`. 作为用户ID `id`，。 , . FROM 消息 LEFT JOIN ON 。= 。 WHERE messages.id IN (SELECT MAX(messages.id) FROM messages WHERE messages.receiver_id = 2 GROUP BY messages.sender_id);`users``first_name``users``last_name``users``users``id``messages``sender_id`

# php - 使用 php 纯文本和 html 发送电子邮件

> ID：10267840
> 
> 赞同：10
> 
> 时间：2012-04-22T12:14:34.370
> 
> 标签：php, email

我有以下电子邮件标题：

```
$random_hash = md5(date('r', time()));
    $headers = array ('From' => $from,
   'To' => $to,
    'Return-Path' => 'info@example.com',
   'Subject' => $subject,
     'Content-Type'=>'multipart/alternative'); 
```

我想在一封电子邮件中发送两个版本的电子邮件。一个文本和一个 html。

所以我这样做了：

```
ob_start(); ?>
 --PHP-alt-<?php echo $random_hash; ?>
    Content-Type: text/plain; charset="iso-8859-1" 
    Content-Transfer-Encoding: 7bit
    Copy and paste: http://example.com/app_dl.php?app_id=<?php echo $_GET[app_id]; ?> to download your $app_name app \r\n
     Want to get tons more hot apps for free! anywhere anytime? Download our app on http://example.com  \r\n
     example.com team;

--PHP-alt-<?php echo $random_hash; ?>  
    Content-Type: text/html; charset="iso-8859-1" 
    Content-Transfer-Encoding: 7bit
     <p><a href='http://example.com/app_dl.php?app_id=<?php echo $_GET[app_id]; ?>'>Click Here</a> to download your <?php echo $app_name_app; ?></p>
     <p>Want to get tons more hot apps for free! anywhere anytime? Download our app on <a href='http://example.com'>example.com</a></p>
     <br/>
     <p>example.com team</p>";

     <?php 
      $bodyHTML =ob_get_clean(); 
```

但它似乎效果不佳..我想知道为什么！？！？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-22T12:20:34.890

为了创建`multipart/alternative`消息，您需要指定 a`boundary`并按该边界分隔每个部分。一个好的边界字符串是消息部分本身极不可能出现的东西，例如由`sha1(uniqid())`. 例如：

```
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary=c4d5d00c4725d9ed0b3c8b

--c4d5d00c4725d9ed0b3c8b
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

part1

--c4d5d00c4725d9ed0b3c8b
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<b>part2</b>

--c4d5d00c4725d9ed0b3c8b-- 
```

这在[RFC 2046 第 5.1.4 节](https://www.rfc-editor.org/rfc/rfc2046#section-5.1.4)中指定。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-13T11:36:45.040

我发现使用 PHP_EOL 而不是 \r\n 似乎也可以。例如：

```
$headers = "Content-type: text/html; charset=UTF8" . PHP_EOL; 
```

# python - Python 逻辑或运算符表现奇怪

> ID：10267841
> 
> 赞同：1
> 
> 时间：2012-04-22T12:14:43.587
> 
> 标签：python, for-loop, arraylist, operators, boolean

我正在尝试`images`使用具有扩展名的文件`'.png'`或`'.jpg'`在`'jpeg'`单行 for 循环中填充一个名为的列表。我通过使用逻辑`or`运算符进行了尝试，但这只会导致一个空列表。

`images = [i for i in os.listdir('.') if i[-4:] == ('.png' or '.jpg' or 'jpeg')]`

如何检查文件的最后 4 个字符是否`'.png'`或`'.jpg'`是否`'jpeg'`是文件的最后 4 个字符，同时将其全部保存在一行 for 循环中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:45:39.723

其他答案已建议`in`在此处使用，但您可能更喜欢的另一种方法是使用该`str.endswith()`方法：

```
extensions = '.png', '.jpg', '.jpeg'
images = [i for i in os.listdir('.') if i.endswith(extensions)] 
```

这样做的好处是您不必在匹配项上捏造`.jpeg`：您可以检查任何长度的扩展名（甚至将列表存储在与其余代码分开的地方），而不必担心如果有更短的代码会破坏代码或比其他人更长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T12:16:40.373

使用`in`运算符：

```
images = [i for i in os.listdir('.') if i[-4:] in ('.png', '.jpg', 'jpeg')] 
```

更好的是，不要只检查最后 4 个字符，而是使用[`os.path.splitext()`](http://docs.python.org/library/os.path.html#os.path.splitext)：

```
images = [i for i in os.listdir('.') if os.path.splitext(i)[1] in ('.png', '.jpg', '.jpeg')] 
```

* * *

如果您想知道为什么您的代码不起作用：`('.png' or '.jpg' or 'jpeg') == '.png'`因为它是第一个不虚假的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T12:20:03.477

在您编写它时，python 评估`('.png' or '.jpg' or 'jpeg')`并与`i[-4:]`结果进行比较。

您可能想要的是@ThiefMaster 建议的：`in`操作员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T12:24:41.650

您可以[`fnmatch`](http://docs.python.org/library/fnmatch.html)为此目的使用该模块。

```
>>> extensions = ['*.jpg','*.png','*.jpeg']
>>> [file for file in os.listdir(".") for ext in extensions if fnmatch.fnmatch(file,ext)]
['1.png', '2.jpg', '3.jpeg'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T12:20:36.690

表达式（'.png' 或 '.jpg' 或 'jpeg'）实际上首先被评估为 '.png'，并且可能不会像您预期的那样表现。

您可以尝试：

```
images = [i for i in os.listdir('.') if i[-4:] in ('.png', '.jpg', 'jpeg')] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T12:33:45.797

Using`or`是一个布尔表达式，它检查表达式中的任何值是否为`True`.

```
i[-4:] == ('.png' or '.jpg' or 'jpeg') 
```

评估是否`i[-4:]`等于：

```
('.png' or '.jpg' or 'jpeg') 
```

它检查每个值是否存在，如果没有值则`True`返回第一个`True`值或最后一个`True`值。在这种情况下，它们都评估为`True`只有空字符串评估为表达式的结果。`False``'.png'`

你可以通过这样做来解决这个问题

```
[i for i in os.listdir('.') if i[-4:] in ('.png', '.jpg', 'jpeg')] 
```

或者更好的方法

```
[i for i in os.listdir('.') if os.path.splitext(i)[1] in ('.png','.jpg','.jpeg')] 
```

# appharbor - Appharbor 构建错误

> ID：10267842
> 
> 赞同：2
> 
> 时间：2012-04-22T12:14:44.960
> 
> 标签：appharbor

在尝试在 appharbor 上构建 MVC 应用程序时，我一直收到以下错误 -

> AfterBuild:
> C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe -v temp -p D:\temp\yjartxut.xdg\output_PublishedWebsites\groundstour ASPNETCOMPILER : 错误 ASPRUNTIME: 当前身份 (IP-0A7AA6EA\ apphb3308801b5493433) 没有对“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files”的写入权限。

我搜索了 appharbor 支持论坛，但找不到处理与上述错误类似的错误的线程，任何人都可以阐明错误或我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:52:07.127

这是一个 AppHarbor 问题，现在应该得到解决。

（免责声明，我是 AppHarbor 的联合创始人）

# c# - 我们有什么比 BlockingCollection 更好的异步执行方法呢？

> ID：10267850
> 
> 赞同：1
> 
> 时间：2012-04-22T12:16:06.937
> 
> 标签：c#, asynchronous, blockingcollection

我写了这样的例子来测量异步执行的 BlockingCollection 有多快

```
using System;
using System.Collections.Concurrent;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;

namespace TestBlockingCollection
{
    class Program
    {
        static void Main(string[] args)
        {
            BlockingCollection<int> blockingCollection = new BlockingCollection<int>();
            Stopwatch sw = Stopwatch.StartNew();

            Task.Factory.StartNew(() =>
            {
                int i = 0;
                while (true)
                {
                    Console.WriteLine("Adding " + i);
                    sw = Stopwatch.StartNew();
                    blockingCollection.Add(i++);
                    Thread.Sleep(1000);
                }
            });

            Task.Factory.StartNew(() =>
            {
                while (true)
                {
                    int i = blockingCollection.Take();
                    sw.Stop();
                    long microseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
                    Console.WriteLine("Received " + i + ". Spent " + microseconds + " microseconds.");
                }
            });

            while(true)
            {
                Thread.Sleep(1000);
            }
        }
    }
} 
```

结果令人失望：

```
Adding 0
Received 0\. Spent 19593 microseconds.
Adding 1
Received 1\. Spent 220 microseconds.
Adding 2
Received 2\. Spent 38 microseconds.
Adding 3
Received 3\. Spent 104 microseconds.
Adding 4
Received 4\. Spent 46 microseconds.
Adding 5
Received 5\. Spent 37 microseconds.
Adding 6
Received 6\. Spent 112 microseconds.
Adding 7
Received 7\. Spent 103 microseconds.
Adding 8
Received 8\. Spent 104 microseconds.
Adding 9
Received 9\. Spent 384 microseconds.
Adding 10
Received 10\. Spent 102 microseconds.
Adding 11
Received 11\. Spent 39 microseconds.
Adding 12
Received 12\. Spent 51 microseconds.
Adding 13
Received 13\. Spent 42 microseconds.
Adding 14
Received 14\. Spent 40 microseconds.
Adding 15
Received 15\. Spent 40 microseconds.
Adding 16
Received 16\. Spent 42 microseconds.
Adding 17
Received 17\. Spent 40 microseconds.
Adding 18
Received 18\. Spent 41 microseconds.
Adding 19
Received 19\. Spent 42 microseconds.
Adding 20
Received 20\. Spent 62 microseconds.
Adding 21
Received 21\. Spent 36 microseconds.
Adding 22
Received 22\. Spent 39 microseconds.
Adding 23
Received 23\. Spent 35 microseconds.
Adding 24
Received 24\. Spent 40 microseconds.
Adding 25
Received 25\. Spent 63 microseconds.
Adding 26
Received 26\. Spent 56 microseconds.
Adding 27
Received 27\. Spent 42 microseconds.
Adding 28
Received 28\. Spent 41 microseconds.
Adding 29
Received 29\. Spent 42 microseconds.
Adding 30
Received 30\. Spent 41 microseconds.
Adding 31
Received 31\. Spent 651 microseconds.
Adding 32
Received 32\. Spent 43 microseconds.
Adding 33
Received 33\. Spent 58 microseconds.
Adding 34
Received 34\. Spent 43 microseconds.
Adding 35
Received 35\. Spent 41 microseconds.
Adding 36
Received 36\. Spent 59 microseconds.
Adding 37
Received 37\. Spent 38 microseconds.
Adding 38
Received 38\. Spent 38 microseconds.
Adding 39
Received 39\. Spent 38 microseconds.
Adding 40
Received 40\. Spent 42 microseconds.
Adding 41
Received 41\. Spent 59 microseconds.
Adding 42
Received 42\. Spent 40 microseconds.
Adding 43
Received 43\. Spent 42 microseconds.
Adding 44
Received 44\. Spent 41 microseconds.
Adding 45
Received 45\. Spent 39 microseconds.
Adding 46
Received 46\. Spent 42 microseconds.
Adding 47
Received 47\. Spent 41 microseconds.
Adding 48
Received 48\. Spent 41 microseconds.
Adding 49
Received 49\. Spent 42 microseconds.
Adding 50
Received 50\. Spent 35 microseconds.
Adding 51
Received 51\. Spent 42 microseconds.
Adding 52
Received 52\. Spent 39 microseconds.
Adding 53
Received 53\. Spent 43 microseconds.
Adding 54
Received 54\. Spent 35 microseconds.
Adding 55
Received 55\. Spent 60 microseconds.
Adding 56
Received 56\. Spent 59 microseconds.
Adding 57
Received 57\. Spent 55 microseconds.
Adding 58
Received 58\. Spent 74 microseconds.
Adding 59
Received 59\. Spent 56 microseconds.
Adding 60
Received 60\. Spent 42 microseconds. 
```

平均而言，我花费了大约 50 微秒，但有时我花费了高达 600 微秒！

即使使用我的慢速 Pentium U5400，我希望它应该是几个常数，不超过 10 微秒，并且永远不会超过 10 微秒。

.NET 有什么更快的异步执行方法？在安排异步执行之后，我需要它尽快启动。这是对财务时间敏感的计算。

Blocking collection garantees order and garantees that items will be processing a one, so this question实际上包含两个问题

1.  如果我需要订单并且我需要按照物品出现的顺序处理物品，我们是否有更快的速度？即我需要先进先出查询。
2.  如果我不关心订单并且不关心项目是逐个处理还是并行处理，我们是否有更快的速度？

我想答案是：

1.  不，我必须使用 BlockingCollection 作为参考[，使用 BlockingCollection<T> 作为单生产者、单消费者 FIFO 查询是否很好？](https://stackoverflow.com/questions/10103072/is-it-good-to-use-blockingcollectiont-as-single-producer-single-consumer-fifo)

2.  我可能可以尝试代表？[http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:52:08.770

经过几个小时的实验，我认为这是阻碍了测量的方法。我将其更改为运行 10000，结果是：

> 100000 次迭代总计 214.0，平均 0.00214 毫秒

代码和你的差不多（下面供参考）；我确实做了一个发布版本

我尝试使用[屏障](http://msdn.microsoft.com/en-us/library/dd997287.aspx)，但速度较慢。我也尝试仅使用锁来完成此操作，但未能使其正常工作。

```
 static void Main(string[] args)
    {
        var barrier = new Barrier(2);
        var collection = new List<int>();
        var num_iterations = 100000;
        var iterations = num_iterations;
        var total_time_ms = 0.0M;

        Stopwatch sw = new Stopwatch();

        total_time_ms = 0.0M;
        iterations = num_iterations;

        var blockingCollection = new BlockingCollection<int>();

        Task.Factory.StartNew(() =>
        {
            int i = 0;

            while (iterations-- > 0)
            {
                sw.Restart();
                blockingCollection.Add(i++);
            }
        });

        Task.Factory.StartNew(() =>
        {
            var expected_value = 0;

            while (iterations > 0) // stop when performed certain number
            {
                int i = blockingCollection.Take();
                sw.Stop();
                long microseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
                total_time_ms += microseconds;
                if (i != expected_value)
                    Console.WriteLine(String.Format("** expected {0} got {1}", i, expected_value));
                expected_value++;
            }
        });
        while (iterations > 0)
        {
            Thread.Sleep(1000);
        }
        Console.WriteLine(String.Format("Total {0} for {1} iterations, average {2}", total_time_ms, num_iterations, total_time_ms / num_iterations)); 
```

我相信 BlockingCollection 是一个很好的集合。还有其他方法可以做到这一点，但这是一个复杂的领域，获得比这更快的东西的机会不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:37:39.543

首先，如果您真的关心微秒，也许您不应该使用 .Net（因为它的垃圾收集器会给您带来不可预知的延迟）或 Windows（因为它不是实时操作系统）。

要实际回答您的问题：

1.  我认为 50 微秒是一个非常小的时间，并且`BlockingCollection<T>`经过高度优化，所以我认为你不能更快地做到这一点。您也许可以使用自旋锁来做到这一点，但代价是浪费 CPU 时间什么都不做。

2.  异步调用委托几乎与使用[`ThreadPool.QueueUserWorkItem()`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx). 所以，是的，这可能是你能得到的最好的。尽管同步调用总是会更快。

# bash - echo -e 在终端中工作，但不在 bash 脚本中

> ID：10267852
> 
> 赞同：13
> 
> 时间：2012-04-22T12:16:30.947
> 
> 标签：bash, shell

我开发并维护了一个名为 Githug 的 ruby​​ gem，我正在尝试为它编写一个自动化测试脚本。Githug 基本上是操纵一个目录，将其放入工作 git 存储库的不同状态，您可以执行 git 命令来“解决”该级别。

其中一个级别要求您提供 git 配置详细信息，我正在执行以下操作：

```
#! /bin/sh
# ...snip
#level 4
FULL_NAME=$(git config --get user.name)
EMAIL=$(git config --get user.email)
echo -e "$FULL_NAME\n$EMAIL" | githug 
```

当我从 bash 脚本执行时，它 (echo -e) 不起作用。但是当我从终端运行它时它确实如此。

```
FULL_NAME=$(git config --get user.name)
EMAIL=$(git config --get user.email)
echo -e "$FULL_NAME\n$EMAIL" | githug
********************************************************************************
*                                    Githug                                    *
********************************************************************************
What is your name? What is your email?
Congratulations, you have solved the level 
```

为什么这在 bash 脚本中不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T12:19:16.393

错误的shebang：

```
#! /bin/sh 
```

当它应该是一个 bash 脚本时，使用

```
#! /bin/bash 
```

Bash 有一个内置的 echo，它与 /bin/echo 不是 100% 相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T20:01:13.420

如评论所述，[`printf`](http://wiki.bash-hackers.org/commands/builtin/printf)是[首选选项](https://unix.stackexchange.com/q/65803/7490)，如 Git 2.14.x/2.15 (Q4 2017) 中所示

```
printf '%s\n%s' "$FULL_NAME" "$EMAIL" 
```

请参阅[Torsten Bögershausen (](https://github.com/tboegi) [)的](https://github.com/tboegi)[提交 1a6d468](https://github.com/git/git/commit/1a6d46895d30459efe2d258c6e0a208f00f2b043)（2017 年 9 月 17 日） 。^(（由)^([Torsten Bögershausen 合并 --](https://github.com/tboegi)) ^([--](https://github.com/tboegi))^在^([提交 1a6d468](https://github.com/git/git/commit/1a6d46895d30459efe2d258c6e0a208f00f2b043))^(中，2017 年 9 月 21 日）)[`tboegi`](https://github.com/tboegi)
^([`tboegi`](https://github.com/tboegi))

> ## `test-lint`: `echo -e`(or `-E`) 不可移植
> 
> 一些实现`echo`支持 ' `-e`' 选项以启用对以下字符串的反斜杠解释。
> 另外，他们支持 ' `-E`' 来关闭它。
> 
> 然而，这些都不是可移植的，POSIX 甚至没有提到它们，而且许多实现不支持它们。
> 
> ' ' 的检查`-n`已在 中完成[`check-non-portable-shell.pl`](https://github.com/git/git/blob/20fed7cad40ed0b96232feb828129e3a2ee9860d/t/check-non-portable-shell.pl)，将其扩展到覆盖 ' `-n`'、' `-e`' 或 ' `-E`'。

# vb.net - 如何为 VB.NET 创建一个简单的日志命令？

> ID：10267856
> 
> 赞同：1
> 
> 时间：2012-04-22T12:17:39.483
> 
> 标签：vb.net

如果这个问题是最简单的问题，我深表歉意，但我什至不确定我应该使用哪些术语来搜索。我想要做的是创建一个“Sub”，当我在另一个 Sub 中调用它时它会做一些事情，但是我不确定如何相互传递变量。这就是我所拥有的；

```
Private Sub Log
        LogBox.AppendText(logstuff & vbNewLine)
End Sub

Private Sub Log_Click(sender As System.Object, e As System.EventArgs) Handles Log.Click
        Log("Some message here.")
End Sub 
```

我将如何进行这项工作？当然，`logstuff`它将被日志消息替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:22:49.997

语法是：

```
Private Sub Log( ByVal logstuff As String )
        LogBox.AppendText(logstuff & vbNewLine)
End Sub 
```

`ByVal`指定如何将参数传递给函数。这里它的意思是“按价值”。你也可以传递一些`ByRef`意味着“通过引用”的东西。这应该给你一些搜索 - 你会发现很多关于在 VB 中传递参数的教程，比如[这个](http://www.homeandlearn.co.uk/net/nets9p3.html)。

请注意，在大多数编辑器中，您可以`ByVal`在创建函数时省略 。编辑器会自动添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:23:52.400

您需要将参数传递给子。也许是这样的：

```
 Private sub Log(byval logstuff as string) 
   ...... 
```

# vps - Linode：一个linode可以有多个实例吗？

> ID：10267857
> 
> 赞同：3
> 
> 时间：2012-04-22T12:17:43.213
> 
> 标签：vps, linode

我以前没有广泛使用过vps。我想知道，如果我从 Linode 购买一个节点，我可以运行部署多个实例吗？类似于 Amazon EC2？还是我必须单独购买另一个 Linode？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:38:58.570

是的，你会的——你要为特定位置的有保证的资源付费，所以它是另一个 Linode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T11:37:23.407

我明白你想说什么，在单个 VPS linode 实例下，目前无法进行多个部署。

# c# - 我应该先将参数值分配给局部变量而不是直接使用它们吗？

> ID：10267858
> 
> 赞同：2
> 
> 时间：2012-04-22T12:17:46.913
> 
> 标签：c#

是否有任何理由将参数值分配给方法内的局部变量，以便在**不更改它们**的情况下使用这些值？即像下面这样：

```
private void MyMethod(string path)
{
    string myPath = path;
    StreamReader mystream = new StreamReader(myPath);
    ...
} 
```

或者我可以一直这样说吗（上面的代码是多余的，只是不干净）：

```
private void MyMethod(string path)
{
    StreamReader mystream = new StreamReader(path);
    ...
} 
```

我知道它是双向的，但我想确保在我的理解中没有遗漏任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:13:31.310

唯一需要执行此操作（本地分配）的情况是您在 foreach 循环中或使用 Linq。否则，您可能会遇到修改后的闭包问题。

这是来自 MSDN 博客的片段（以下所有内容均来自链接）。

[http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closure-over-the-loop-variable-considered-harmful.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

但我正在超越自己。这个片段的输出是什么？

```
var values = new List<int>() { 100, 110, 120 };
var funcs = new List<Func<int>>();
foreach(var v in values) 
  funcs.Add( ()=>v );
foreach(var f in funcs) 
  Console.WriteLine(f()); 
```

大多数人期望它是 100 / 110 / 120。实际上是 120 / 120 / 120。为什么？

因为 ()=>v 的意思是“返回变量 v 的当前值”，而不是“返回创建委托时返回的值 v”。闭包关闭变量，而不是值。并且当方法运行时，很明显分配给 v 的最后一个值是 120，所以它仍然具有该值。

这非常令人困惑。编写代码的正确方法是：

```
foreach(var v in values) 
{
  var v2 = v;
  funcs.Add( ()=>v2 );
} 
```

现在会发生什么？每次我们重新启动循环体时，我们都会在逻辑上创建一个全新的变量 v2。每个闭包都在不同的 v2 上关闭，该 v2 只分配一次，因此它始终保持正确的值。

基本上，问题的出现是因为我们指定 foreach 循环是一个语法糖

```
 {
    IEnumerator<int> e = ((IEnumerable<int>)values).GetEnumerator();
    try
    { 
      int m; // OUTSIDE THE ACTUAL LOOP
      while(e.MoveNext())
      {
        m = (int)(int)e.Current;
        funcs.Add(()=>m);
      }
    }
    finally
    { 
      if (e != null) ((IDisposable)e).Dispose();
    }
  } 
```

如果我们指定扩展是

```
try
{ 
  while(e.MoveNext())
  {
    int m; // INSIDE
    m = (int)(int)e.Current;
    funcs.Add(()=>m);
  } 
```

那么代码将按预期运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T12:23:33.120

这完全一样，唯一的区别是，在第一种情况下，您制作了引用的副本（当方法超出范围时，它无论如何都会被销毁，这会在执行结束时发生）。

为了更好的可读性，坚持第二种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:24:33.380

我更喜欢第二种选择。使用参数创建新变量是没有意义的。此外，从阅读的角度来看，从路径（您收到的路径）创建流比实例化“myPath”变量更有意义。

# servlets - 什么是完整的流程？

> ID：10267862
> 
> 赞同：0
> 
> 时间：2012-04-22T12:17:51.153
> 
> 标签：servlets

当我在阅读这本书时——O'Reilly Java Servlet Programming。有一句话看不懂，正文如下：

> 也可以允许 Servlet 作为对象实例在请求之间持续存在，与成熟的进程相比，它占用的内存要少得多。

我可以知道我怎么知道 Servlet 占用的内存是否比完整的进程少得多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:22:04.630

如果没有更多上下文，很难说出这个片段是什么，但我想这是 servlet 和[cgi](/questions/tagged/cgi "显示标记为“cgi”的问题")之间的比较。基本上，您可以在单个 JVM/servlet 容器中部署多个单例 servlet。这意味着一个 servlet（占用很少的内存）能够处理无限数量的请求（抛开硬件限制）。

使用 CGI，您必须为每个请求创建一个进程，这可能会导致更多延迟并提到高内存使用率。

# iphone - Cocos2d-X 中的 gles20 分支

> ID：10267864
> 
> 赞同：0
> 
> 时间：2012-04-22T12:19:02.807
> 
> 标签：iphone, xcode, cocos2d-iphone, cocos2d-x

我发现 Cocos2d-x 的*gles20*分支正在积极开发中。链接：[https ://github.com/cocos2d/cocos2d-x/tree/gles20](https://github.com/cocos2d/cocos2d-x/tree/gles20)

但是，当我检查源代码、安装包含脚本的 Xcode 模板并使用该模板创建一个简单的 iPhone 项目时，代码无法编译。

我调查了这些错误，发现一些应该位于*libs*文件夹中的文件（例如*kazmath*文件夹、*ccGLStateCache.cpp*和*ccGLStateCache.h* ）实际上丢失了。

 *这些丢失的文件很可能是由于 Cocos2d-x 模板未能将这些文件从原始源复制到新项目的位置造成的。

我的问题：

*   gles20分支准备好使用了吗*？*
*   如果是，我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:08:20.687

刚刚联系了 Cocos2d-X 的一位作者，答案是否定的，*gles20*分支还没有准备好使用。他们预计将在 2 周内发布 alpha 版本。（今天是 2012 年 4 月 23 日）。*

# python - 从文本文件中读取文件路径并修改它们中的每一个

> ID：10267866
> 
> 赞同：0
> 
> 时间：2012-04-22T12:19:16.923
> 
> 标签：python, filenames

我有一个包含 200 多个文件路径的文本文件 (filenames.txt)：

```
/home/chethan/purpose1/script1.txt
/home/chethan/purpose2/script2.txt
/home/chethan/purpose3/script3.txt
/home/chethan/purpose4/script4.txt 
```

在每个文件中存在的多行中，每个文件都包含一个文件名，如`Reference.txt`. 我的目标是用每个文件`.txt`中的*Reference.txt替换。*`.csv`作为Python的初学者，我参考了stackoverflow中关于类似案例的几个问题，并编写了以下代码。

我的代码：

```
#! /usr/bin/python
#filename modify_hob.py

import fileinput

    f = open('/home/chethan/filenames.txt', 'r')
    for i in f.readlines():
        for line in fileinput.FileInput(i.strip(),inplace=1):
            line = line.replace("txt","csv"),
            f.close()
    f.close() 
```

当我运行我的代码时，上面提到的 txt 文件（script1、script2..）的内容会被抹去，也就是说，它们里面不会有一行文本！我对这种行为感到困惑，无法找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:44:06.713

这应该让你去（未经测试）：

```
#! /usr/bin/python
#filename modify_hob.py

# Open the file with filenames list.
with open('filenames.txt') as list_f:

    # Iterate over the lines, each line represents a file name.
    for filename in list_f:

        # Rewrite its content.
        with open(filename) as f:
            content = f.read()
        with open(filename, 'w') as f:
            f.write(content.replace('.txt', '.csv')) 
```

在下面的代码中，`f`设置为打开文件对象，仅此`filename.txt`而已。这就是您在最后两行中要关闭的内容。

此外，您不会将任何内容写回文件，因此您不能期望您的更改会被写回磁盘。（除非`fileinput`模块做了一些我错过的黑魔法。）

# iphone - 有没有办法以编程方式打开任务栏？

> ID：10267870
> 
> 赞同：3
> 
> 时间：2012-04-22T12:19:47.173
> 
> 标签：iphone, ios

可以通过编程方式打开任务栏吗？我的意思是当你双击主页按钮时，你可以关闭后台应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:11:35.900

它被称为多任务栏.. 不，你不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:42:30.333

您不能让正在运行的应用程序退出到后台，让后台运行的应用程序到前台并以编程方式显示任务栏。

# javascript - 正则表达式排除某些标签

> ID：10267871
> 
> 赞同：2
> 
> 时间：2012-04-22T12:19:53.337
> 
> 标签：javascript, regex

只需要快速帮助来解决这个问题。

我想从字符串中删除所有 html 标签，但白名单（变量）中的标签除外。

到目前为止我的代码：

```
whitelist = 'p|br|ul|li|strike|em|strong|a', 
reqExp = new RegExp('<\/?[^>|' + whitelist + ']+\/?>'); 
```

现在的问题是它或多或少可以正常工作，但也不能删除，例如`b`，因为它与白名单之外`b`的匹配`br`。

我尝试了不同的方法，但没有找到正确的解决方案。我怎么能告诉正则表达式做类似的事情`/.WITHOUT(smth)/`（因此：匹配所有期望以下的一切）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:29:19.450

使用这个正则表达式：-

```
<(?!/?(p|br|ul|li|strike|em|strong|a)(>|\s))[^<]+?> 
```

## [现场演示](http://regexr.com?30npe)

有关更多信息，请参阅**[我之前的回答](https://stackoverflow.com/a/9553958/500725)**，它可以满足您的要求。

# matlab - 如何在 Matlab 中旋转二维散点图

> ID：10267878
> 
> 赞同：2
> 
> 时间：2012-04-22T12:20:44.833
> 
> 标签：matlab, rotation, scatter-plot

我使用以下命令创建了一个二维散点图：

```
h = scatter(handles.axsScatterPlot, sig2, sig1, 'x');
xlabel(['Signal ' num2str(sigNum2) ' Amplitude']);
ylabel(['Signal ' num2str(sigNum1) ' Amplitude']); 
```

我需要将散点图顺时针旋转 90 度。

使用`camroll(90)`工作，但轴标签都搞砸了。

我尝试过使用`rotate(h, [0 0 1], 90);`，`rotate(handles.axsScatterPlot, [0 0 1], 90);`但似乎都没有任何效果。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:54:14.913

***[view](http://www.mathworks.com/help/techdoc/ref/view.html)***或***[camva](http://www.mathworks.com/help/techdoc/ref/camva.html)***命令可以指定您的视角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T11:33:14.240

使用 camporbit(theta, phi) 而不是 camproll(theta)

# .htaccess - .htaccess - 404 错误

> ID：10267879
> 
> 赞同：1
> 
> 时间：2012-04-22T12:20:56.940
> 
> 标签：.htaccess

我希望 .htaccess 为不符合以下 url 模式标准的任何 url 返回错误 404。如何在 .htaccess 中执行此操作？

在 php 脚本中使用此代码生成上面的 url

```
$adscatcanonurl = "$script_url" . "/" . "{$vbasedir}$xcityid-$xcitynamealt/posts/$xcatid-$catname_inurl/". ("$xsubcatid"?"$xsubcatid-". RemoveBadURLChars($xsubcatname) :""); 
```

示例链接

[http://www.domain.com/17-Netherlands/posts/8-Real-Estate/](http://www.domain.com/17-Netherlands/posts/8-Real-Estate/)

假设脚本生成这样的链接 [http://www.domain.com/17-Netherlands/posts/8/](http://www.domain.com/17-Netherlands/posts/8/)

由于它与上述 url 模式不匹配，因此此类 url 应返回 404 页面而不是响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:28:35.907

您不需要强制 .htaccess 返回 404，如果没有匹配，它会自行执行。因此，您可以使用如下规则：

```
RewriteEngine On
# Don't match real files
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(\d+)-([a-zA-Z-]+)/posts/(\d+)-([a-zA-Z-]+)$ your_php_script.php?xcityid=$1&xcitynamealt=$2&xcatid=$3&xcatname_inurl=$4 [L,QSA] 
```

任何不是针对实际文件（css、js 等）且不匹配上述规则的请求都不会匹配*任何*规则，因此应该返回 404。

请注意，在规则中，我将 4 个组件映射到将在您的 PHP 中读取的内容`$_GET['xcityid']`，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:25:28.500

为什么不使用：ErrorDocument 404 /404page.html

[http://www.yourhtmlsource.com/sitemanagement/custom404error.html](http://www.yourhtmlsource.com/sitemanagement/custom404error.html)

# python - 如何在 App Engine 的后台任务中逐页生成 pdf 文档

> ID：10267885
> 
> 赞同：12
> 
> 时间：2012-04-22T12:22:31.563
> 
> 标签：python, google-app-engine, reportlab

我需要生成 100 多页的 PDF 文档。该过程需要处理大量数据，并且一次性生成需要更多时间和我可以提供的内存。

我尝试了几种不同的方法来破解我的方式：

*   带有 HTML 生成和转换的[xhtml2pdf](http://www.xhtml2pdf.com/)
*   [rportlab](http://www.reportlab.com/software/opensource/rl-toolkit/)生成一些页面和
*   用于合并的[pyPdf](http://pybrary.net/pyPdf/)

结果不同，我让它工作了，但它很慢并且占用的内存比它应该的要多（有时会达到实例软内存限制）。目前，我在不同的任务中生成一些部分，将每个部分存储在 blobstore 中，并将这些部分与 pyPdf 合并，但它会阻塞较大的文档。

我生成的文档并没有那么复杂，主要是表格和文本，没有内部引用，没有 TOC，没有任何应该了解文档其余部分的内容。我可以使用 platypus 进行布局，不需要花哨的文档外观或 HTML2PDF 转换。

目标是在数据存储允许的范围内尽可能快地生成文档。并行页面生成会很好，但不是必需的。

[我正在考虑使用blobstore 文件 api](https://developers.google.com/appengine/docs/python/blobstore/overview?hl=pl-PL#Writing_Files_to_the_Blobstore)逐页生成，其中每个任务将生成一个页面，最后一个任务将完成 blobstore 文件使其可读。但我似乎无法找到如何暂停生成、将部分 PDF 存储到流，然后他们使用该流恢复生成以在不同的任务中生成下一页。

所以我的问题是：

**GAE 如何生成大于几页的 PDF 文档，在任务请求之间拆分生成，然后将生成的文档存储在 blobstore 中？**

如果reportlab无法进行生成拆分，那么如何最小化合并不同PDF文档的占用空间，使其符合GAE任务请求设置的限制？

**更新：** 非常感谢转换 API 的替代品。

**2nd UPDATE Con** ​​version API 正在停用，所以现在不是一个选项。

**第三次更新** Pileline 或 MapReduce API 可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:32:56.303

看看新的转换 API：[https ://developers.google.com/appengine/docs/python/conversion/overview](https://developers.google.com/appengine/docs/python/conversion/overview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T07:57:23.403

我建议在应用引擎上安装 wkhtmltopdf。wkhtmltopdf 是一个将 html 渲染成 pdf 的命令行工具。

创建html文件，然后使用wkhtmltopdf将它们一一转换为pdf。

在 Windows 上你可以使用（在基于 linux 的系统下它是类似的）：

```
def create_pdf(in_html_file=None, out_pdf_file=None, quality=None):
    pathtowk = 'C:/wkhtmltopdf/bin/wkhtmltopdf.exe {0} {1} {2}'    

    if quality == 1: # super quality no compression
        args_str = '--encoding utf-8 --disable-smart-shrinking --no-pdf-compression --page-size A4 --zoom 1 -q -T 15.24mm -L 25.4mm -B 20.32mm  -R 33.02mm'
    elif quality == 2: # moderate quality some compression
        args_str = '--encoding utf-8 --disable-smart-shrinking --page-size A4 --zoom 1 -q -T 15.24mm -L 25.4mm -B 20.32mm  -R 33.02mm'
    else: # poor quality max compression
        args_str = '--encoding utf-8 --page-size A4 --zoom 1 -q -T 15.24mm -L 25.4mm -B 20.32mm  -R 33.02mm'

    os.system(pathtowk.format(args_str, in_html_file, out_pdf_file)) 
```

或者，您可以使用`subprocess.call(pathtowk.format(args_str, in_html_file, out_pdf_file))`执行 wkhtmltopdf （我认为这更好）。

转换过程完成后，使用 PyPdf2 将生成的 PDF 合并到单个文件中。

# iphone - SQLite 查询给我一个结果 1

> ID：10267888
> 
> 赞同：1
> 
> 时间：2012-04-22T12:22:57.360
> 
> 标签：iphone, objective-c, sqlite

大家好，我的查询一直得到结果 1，即使在 SQLite 查询浏览器上使用相同的语法

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"amstations" ofType:@"db"];
sqlite3 *database;
if(sqlite3_open([path UTF8String],&database) == !SQLITE_OK) {
    NSLog(@"DB Did not open");
}
else {
    NSString *theState = [states objectAtIndex:[thePickerView selectedRowInComponent:1]];

    NSString *sqlStatement;
    if ([pickView selectedRowInComponent:0] == 0)
    {
        sqlStatement = [NSString stringWithFormat:@"SELECT * FROM stations WHERE state like '%@ %'",theState];
    }
    else if ([pickView selectedRowInComponent:0] == 1)
    {
        sqlStatement = [NSString stringWithFormat:@"SELECT * FROM stations WHERE state like '%@ %' ORDER BY format",theState];
    }
    else if ([pickView selectedRowInComponent:0] == 2)
    {
        sqlStatement = (@"SELECT state, power || ' kW' power FROM ( SELECT state, Cast(Rtrim(power, 'kW') AS 'numeric') power FROM stations WHERE state LIKE '%CA%' ORDER BY power)");
    }
    else
    {
        sqlStatement = [NSString stringWithFormat:@"SELECT * FROM stations WHERE state like '%@ %' ORDER BY city",theState];
    }

    sqlite3_stmt *statement;
    int result = sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &statement, nil);
    NSLog(@"result: %i", result);

    if (sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &statement, nil) == SQLITE_OK) {
        NSLog(@"prepare succeeded");
        NSLog(@"%@",sqlStatement);
        city = [[NSMutableArray alloc] init]; 
```

如果我输入一个简单的查询，例如“SELECT * FROM station WHERE state LIKE 'CA'”，它就可以工作。

# asp.net-mvc-3 - 如何在页面级别启用跟踪（Razor 语法）

> ID：10267889
> 
> 赞同：3
> 
> 时间：2012-04-22T12:23:11.090
> 
> 标签：asp.net-mvc-3, razor

有没有办法使用剃刀语法在页面级别启用跟踪？

ASPX 语法：

```
<@Page trace="true" ... /> 
```

**更新：** 我对此感兴趣主要是因为我正在准备 MCTS 考试。我知道考试不包括 Razor，但我正在同时学习两种语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:04:10.300

通过推断，据我所知，答案是“您无法使用 Razor 控制页面级跟踪”，此[Stack Overflow](https://stackoverflow.com/questions/5790451/trace-warn-doesnt-output-trace-messages-in-mvc)有一些指向 Glimpse 的链接，可帮助您进行调试。

我对这是好是坏持中立态度，但很高兴能够看到一些原因。

# ruby-on-rails - Rails 3.1.3 中的事务代码是否良好且最优？

> ID：10267891
> 
> 赞同：2
> 
> 时间：2012-04-22T12:23:18.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, sqlite

我们在 out_logs 控制器中有以下代码，用于保存到 rails 3.1.3 应用程序的两个表中。为了确保这两个节省是在完成或没有完成的情况下完成的，使用了一个事务。

```
 @out_log.transaction do
    if @out_log.save && @part.save
      redirect_to part_path(@part), :notice => "Saved！"
    else
      flash.now[:error] = "Not saved！"
      render 'new'
    end   
  end 
```

该代码似乎有效。我们的问题是：

1.  上面的代码是交易的好习惯吗？
2.  事务循环中有redirect_to和render，这些redirect_to或render是否会增加事务循环的执行时间，从而导致数据库（我们使用sqlite3）锁定时间过长？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:02:33.817

首先：`redirect_to`或者`render`不要表现得像一个`return`声明。他们只是在当前正在准备的响应中分配一些标头。

关于交易：

```
if @out_log.save && @part.save 
```

上面的代码肯定会导致数据库中的状态不一致：如果第一个`save`成功而第二个不成功怎么办？甚至很难想象。

解决方案很简单：使用`save!`（末尾有感叹号）。这样，如果您的验证失败，您的整个事务将被回滚（将引发异常，而不是按原样`save!`返回）。`false``save`

# ruby - 如何大量下载gmail附件

> ID：10267895
> 
> 赞同：-7
> 
> 时间：2012-04-22T12:23:38.240
> 
> 标签：ruby, download, gmail, attachment

在 Ubuntu linux 上从多封电子邮件（很多）（最好通过发件人/标题过滤）自动下载 gmail 上的多个电子邮件附件的最佳方法是什么？我应该使用 firefox 附件还是 getmail4 可靠，还是应该尝试一些编程方式（我可以使用 Ruby，但不能使用许多其他语言）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:12:00.840

考虑以更具体的方式重新提出您的问题。我设法找到

[https://github.com/dcparker/ruby-gmail](https://github.com/dcparker/ruby-gmail)

和

[https://github.com/nu7hatch/gmail](https://github.com/nu7hatch/gmail)

这两个都允许您使用 ruby​​ 访问 gmail，进行搜索并下载电子邮件。

# android - ImageView onTouchListener 和 Gallery

> ID：10267896
> 
> 赞同：1
> 
> 时间：2012-04-22T12:23:38.967
> 
> 标签：android

我想添加`ImageView`捏合功能。所以我扩展了`ImageView`并实现了`OnTouchListener`接口。`ImageView`是可点击的。该功能可以正常工作，但是当我将自定义`ImageView`与`Gallery`小部件一起使用时，图库不会滑动。如果我将`focusable`and设置`clickable`为 false，则画廊滑动。我怎样才能让他们一起工作？

自定义 ImageView 的代码

```
 public class Custom6 extends ImageView implements OnTouchListener {

        public Custom6(Context context) {
            super(context);
            setClickable(true);
            setScaleType(ScaleType.MATRIX);
            setOnTouchListener(this);
        }

        public Custom6(Context context, AttributeSet attrs,
                int defStyle) {
            super(context, attrs, defStyle);
            setClickable(true);
            setScaleType(ScaleType.MATRIX);
            setOnTouchListener(this);
        }

        public Custom6(Context context, AttributeSet attrs) {
            super(context, attrs);
            setClickable(true);
            setScaleType(ScaleType.MATRIX);
            setOnTouchListener(this);
        }

       public boolean onTouch(View v, MotionEvent event) {
           return true;
       } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T13:08:22.970

在ontouch lister中返回false，然后尝试我希望它会起作用......

# directx-10 - 使用 MeshConvert 工具将 .obj 文件转换为 .sdkmesh

> ID：10267900
> 
> 赞同：3
> 
> 时间：2012-04-22T12:24:39.543
> 
> 标签：directx-10

DirectX SDK 提供了一个将 .x 或 .obj 文件转换为 .sdkmesh 的实用程序，称为 meshconvert 工具。

但是，我试了很多次，还是不行。

它显示此消息“无法加载指定的输入文件”（我输入了一个名为 samp.obj 的 .obj 文件并键入了“meshconvert /sdkmesh samp.obj”。）

谁能帮我解决它？

PS 我在 Windows 7 上并在 DirectXSDK 命令提示符下输入上述命令。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:18:52.603

我读过 MeshConvert.exe 列出的 .obj 文件类型是指 .x 的二进制形式，而不是流行的 Wavefront 对象模型格式。我仍在寻找一种方法来自己做到这一点。

# asp.net - 检测页面刷新/F5的简单方法

> ID：10267905
> 
> 赞同：-4
> 
> 时间：2012-04-22T12:25:28.157
> 
> 标签：asp.net, vb.net, refresh

我浪费了很多时间来搜索和寻找检测页面的最简单方法`refresh`以及用户按下`F5 button`浏览器的时间。

我看过网上提供的大部分样品，但没有一个能满足我的需求。

我将通过简单的步骤来解释我的问题：

1.  **我正在尝试使用`sessions`和加载一些图像并将它们存储到文件夹中。**

2.  **接下来我有一个按钮来处理图像上的一些操作。（这里我有一个回发，我试图检测回发并将它们保存到同一个文件夹。）**

3.  **现在，每当用户尝试访问`refresh`他的页面`manually`或单击`F5`浏览器上的按钮时，我的问题就出现了，我需要再次从文件夹中加载所有图像。**

所以我需要最简单的解决方案来检测这一点。

谁能帮我解决这个问题？

这是我的代码：

```
 If Page.IsPostBack Then
 //Here I am checking if the session is there or not.If it is already there I am adding images.
 Else
//Here I am creating a new session and adding images. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:36:42.887

我认为你可以这样做：

1.  如果这不是回发
2.  检查自定义会话是否存在？
3.  如果存在
4.  这是页面刷新而不是首次访问，也不是回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:29:15.767

在您的场景中，您可以检查图像是否在会话中。如果是，那么您知道这是一次刷新，您可以避免再次加载图像。

```
If Page.IsPostBack Then
    //Here I am checking if the session is there or not.If it is already there I am adding images.
Else If Session("Images") <> null
    //Here I am creating a new session and adding images. 
```

对不起我的VB，我不习惯它。

# android - JSONException：java.lang.String 类型的值无法转换为 JSONObject

> ID：10267910
> 
> 赞同：69
> 
> 时间：2012-04-22T12:26:28.870
> 
> 标签：android, json, parsing

我有一个 JSON 文件，其中包含 2 个 JSON 数组：一个数组用于路线，一个数组用于景点。

一条路线应该由用户导航到的几个景点组成。不幸的是，我收到了错误：

JSONException：java.lang.String 类型的值无法转换为 JSONObject

这是我的变量和解析 JSON 文件的代码：

```
private InputStream is = null;
private String json = "";
private JSONObject jObj = null;

try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    // hier habe ich das JSON-File als String
    json = sb.toString();
    Log.i("JSON Parser", json);
} catch (Exception e) {
    Log.e("Buffer Error", "Error converting result " + e.toString());
}

// try parse the string to a JSON object
try {
    jObj = new JSONObject(json);
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
}

// return JSON String
return jObj;
} 
```

Log.i("JSON 解析器", json); 向我展示了在生成的字符串的开头有一个奇怪的符号：![在此处输入图像描述](../Images/d3b34ab20b0e248b959e4da5e319052c.png)

但错误发生在这里：

```
try {
    jObj = new JSONObject(json);
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
} 
```

> 04-22 14:01:05.043: E/JSON Parser(5868): Error parsering data org.json.JSONException: Value //STRANGE SIGN HERE // of type java.lang.String 无法转换为 JSONObject

有人知道如何摆脱这些标志以创建 JSONObject 吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-18T04:45:53.503

原因是在编写字符串时添加了一些不需要的字符。临时解决方案是

```
return new JSONObject(json.substring(json.indexOf("{"), json.lastIndexOf("}") + 1)); 
```

但尝试删除源字符串上的隐藏字符。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-22T12:41:46.570

看到这个 [http://stleary.github.io/JSON-java/org/json/JSONObject.html#JSONObject-java.lang.String-](http://stleary.github.io/JSON-java/org/json/JSONObject.html#JSONObject-java.lang.String-)

JSON对象

```
public JSONObject(java.lang.String source)
           throws JSONException 
```

从源 JSON 文本字符串构造 JSONObject。这是最常用的 JSONObject 构造函数。

```
Parameters:
    source - `A string beginning with { (left brace) and ending with } (right brace).` 
Throws:
    JSONException - If there is a syntax error in the source string or a duplicated key. 
```

你尝试使用类似的东西：

```
new JSONObject("{your string}") 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-31T06:51:12.057

有几天同样的问题。**终于找到了解决办法**。PHP 服务器返回了一些您在 LOG 或 System.out 中看不到的看不见的字符。

所以解决方案是我尝试将我的 json String 一个一个子串起来，当我来到 substring(3) 时，错误就消失了。

顺便提一句。我在两边都使用了 UTF-8 编码。PHP端：`header('Content-type=application/json; charset=utf-8');`

JAVA端：`BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 8);`

所以一一尝试解决方案1,2,3,4...！希望对大家有帮助！

```
try {
            jObj = new JSONObject(json.substring(3));
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data [" + e.getMessage()+"] "+json);
        } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-24T14:15:00.880

这是 UTF-8 版本，有几个异常处理：

```
static InputStream is = null;
static JSONObject jObj = null;
static String json = null;
static HttpResponse httpResponse = null;

public JSONObject getJSONFromUrl(String url) {
    // Making HTTP request
    try {
        HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        HttpProtocolParams.setUseExpectContinue(params, true);
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient(params);
        HttpGet httpPost = new HttpGet( url);
        httpResponse = httpClient.execute( httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           
    } catch (UnsupportedEncodingException ee) {
        Log.i("UnsupportedEncodingException...", is.toString());
    } catch (ClientProtocolException e) {
        Log.i("ClientProtocolException...", is.toString());
    } catch (IOException e) {
        Log.i("IOException...", is.toString());
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "utf-8"), 8); //old charset iso-8859-1
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        reader.close();
        json = sb.toString();
        Log.i("StringBuilder...", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }
    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (Exception e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
        try {
            jObj = new JSONObject(json.substring(json.indexOf("{"), json.lastIndexOf("}") + 1));
        } catch (Exception e0) {
            Log.e("JSON Parser0", "Error parsing data [" + e0.getMessage()+"] "+json);
            Log.e("JSON Parser0", "Error parsing data " + e0.toString());
            try {
                jObj = new JSONObject(json.substring(1));
            } catch (Exception e1) {
                Log.e("JSON Parser1", "Error parsing data [" + e1.getMessage()+"] "+json);
                Log.e("JSON Parser1", "Error parsing data " + e1.toString());
                try {
                    jObj = new JSONObject(json.substring(2));
                } catch (Exception e2) {
                    Log.e("JSON Parser2", "Error parsing data [" + e2.getMessage()+"] "+json);
                    Log.e("JSON Parser2", "Error parsing data " + e2.toString());
                    try {
                        jObj = new JSONObject(json.substring(3));
                    } catch (Exception e3) {
                        Log.e("JSON Parser3", "Error parsing data [" + e3.getMessage()+"] "+json);
                        Log.e("JSON Parser3", "Error parsing data " + e3.toString());
                    }
                }
            }
        }
    }

    // return JSON String
    return jObj;

} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-07T03:23:33.837

这对我有用

```
json = json.replace("\\\"","'");
JSONObject jo = new JSONObject(json.substring(1,json.length()-1)); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-05-22T11:06:00.170

这是简单的方法（感谢 Gson）

```
JsonParser parser = new JsonParser();
String retVal = parser.parse(param).getAsString(); 
```

[https://gist.github.com/MustafaFerhan/25906d2be6ca109f61ce#file-evaluatejavascript-string-problem](https://gist.github.com/MustafaFerhan/25906d2be6ca109f61ce#file-evaluatejavascript-string-problem)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-23T22:45:48.450

我认为问题可能出在您尝试使用的字符集中。最好使用 UTF-8 而不是 iso-8859-1。

还要打开用于 InputStream 的任何文件，并确保没有意外插入任何特殊字符。有时您必须明确告诉您的编辑器显示隐藏/特殊字符。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-08T16:07:20.263

```
return response; 
```

之后得到我们需要解析的响应：

```
JSONObject myObj=new JSONObject(response); 
```

响应时不需要双引号。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-12-03T10:41:25.467

我做了这个改变，现在它对我有用。

```
//BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
BufferedReader reader = new BufferedReader(new InputStreamReader(is, HTTP.UTF_8), 8); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-16T09:19:28.460

json 字符串开头的 3 个字符对应于字节顺序掩码 (BOM)，它是一个字节序列，用于将文件标识为 UTF8 文件。

确保发送 json 的文件使用**utf8（无 bom）**编码。

（我在使用 TextWrangler 编辑器时遇到了同样的问题。使用*另存为 - **utf8（无 bom）***强制正确编码。）

希望能帮助到你。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-07-14T05:49:31.760

就我而言，问题来自`php`文件。它给出了不需要的字符。这就是出现`json parsing`问题的原因。

然后我粘贴我`php code`的`Notepad++`并`Encode in utf-8 without BOM` 从`Encoding`选项卡中选择并运行此代码-

我的问题消失了。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-24T18:15:56.077

在我的例子中，我的 Android 应用程序使用 Volley 向托管在 Microsoft Azure 上的 API 应用程序发出一个空主体的 POST 调用。

错误是：

```
JSONException: Value <p>iisnode of type java.lang.String cannot be converted to JSONObject 
```

这是关于我如何构建 Volley JSON 请求的片段：

```
final JSONObject emptyJsonObject = new JSONObject();
JsonObjectRequest request = new JsonObjectRequest(Request.Method.POST, url, emptyJsonObject, listener, errorListener); 
```

我通过创建`JSONObject`一个空的 JSON 对象来解决我的问题，如下所示：

```
final JSONObject emptyJsonObject = new JSONObject("{}"); 
```

我的解决方案与[这个较旧的答案一致](https://stackoverflow.com/a/10268019/3317381)。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-07T12:27:30.117

如果**Key 的值以****String**的形式*出现，* *并且您想将其转换为****JSONObject****，*

 ****首先将您的 key.value 放入 String 变量中，例如

```
 String data = yourResponse.yourKey; 
```

然后转换成 JSONArray

```
JSONObject myObj=new JSONObject(data); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-09T22:20:22.160

对我来说，我只需要使用**`getString()`**vs. `getJSONObject()`（后者抛出了那个错误）：

```
JSONObject jsonObject = new JSONObject(jsonString);
String valueIWanted = jsonObject.getString("access_token")) 
```****

# android - 如何在 android 中为 API 级别 7 获取蓝牙连接状态？

> ID：10267914
> 
> 赞同：2
> 
> 时间：2012-04-22T12:27:00.450
> 
> 标签：android

在我的 android 项目中，我的两台设备相互配对。我想通过蓝牙将文件从一台设备发送到另一台设备，当自动或手动接收到该文件时，该设备上的我的应用程序需要读取该文件并根据它执行一些操作。

我创建了一项服务，其 OnCreate 方法为 CONNECTION_STATE_CHANGED 注册了一个广播侦听器。此服务在我的主要活动的 OnCreate 方法中启动。所以即使我的应用程序不在前端，这个广播接收器也会读取文件并执行所需的操作。首先，这是正确的做法吗？如果是，请告诉我怎么做？

以下是我注册广播接收器的服务文件。当我运行此代码并接收文件时，没有调用广播接收器的 OnReceive。

```
package com.android;

import android.app.Service;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class FileReceiver extends Service {

    private static final String ACTION = "android.bluetooth.adapter.action.CONNECTION_STATE_CHANGED";

//    private BroadcastReceiver   BT_CONNECTION_BCAST_Receiver;
@Override
public IBinder onBind(Intent arg0) {
    return null;
}
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i("LocalService", "Received start id " + startId + ": " + intent);
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
}

@Override
public void onCreate() {
    super.onCreate();

    final IntentFilter theFilter = new IntentFilter();
    theFilter.addAction(ACTION);

    Log.i("LocalService", "On created ");

    // Registers the receiver so that your service will listen for broadcasts
    this.registerReceiver(this.btReceiver_Receiver, theFilter);
}

private final BroadcastReceiver btReceiver_Receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        // Do whatever you need it to do when it receives the broadcast
        // Example show a Toast message...
        String action = intent.getAction();
        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
        Log.i("BT_Connection", "Inside Receiver");

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            Log.i("BT_Connection", "Device Found");
         }

        if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) 
        {
            Log.i("BT_Connection", "On BT Connection");

        }

        Log.i("LocalService", "On Broadcast Receiver");

        showSuccessfulBroadcast();
    }
};
@Override
public void onDestroy() {
    super.onDestroy();
    Log.i("LocalService", "On Being Destroyed!!");

    // Do not forget to unregister the receiver!!!
    this.unregisterReceiver(this.btReceiver_Receiver);
}

private void showSuccessfulBroadcast() {
    Toast.makeText(this, "Broadcast Successful!!!", Toast.LENGTH_LONG).show();
}
} 
```

# c++ - 声明一个非常大的整数向量？

> ID：10267915
> 
> 赞同：6
> 
> 时间：2012-04-22T12:27:06.890
> 
> 标签：c++, vector

有没有办法在 C++ 中做到这一点而不会在运行时崩溃？

现在我宣布

```
vector<vector<int> > myvec(veclength); 
```

我怎样才能（正确地）将 veclength 提高到最高？即使在 10^7 时，当我应该有足够的计算机内存时它也会崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:58:53.113

这应该占用大约 250 MiB 的空间¹（或更少，取决于架构）所以内存绝对不是这里的问题，也不应该`max_size`是 10 ^(17) (≈ ^(2 ^(64)) ∕<sub>8 +8+8)。

我应该提到，我通过查看`std::vector`GCC 的 libstdc++ 和 LLVM 的 libc++ 中的实现以及在实时系统上进行测试来证实这些计算。计算值与实际实现 1:1 对应，并且 OP 的代码与`veclength = 10e7`.

因此，我得出结论，真正的原因在别处。

* * *

^(1))通过将每个单独向量的大小近似为三个 64 位整数来分别表示开始指针、大小和容量，并假设空向量的默认容量为 0。实际实现可能有所不同，但可能相差不大。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T12:37:51.077

根据我上面的评论，我想我可能会为您提供解决方案。

> 查看[max_size](http://cplusplus.com/reference/stl/vector/max_size)并测试您的机器上的 max_size 是多少。这里的关键是，随着向量元素大小的增加，向量大小限制会[减少](http://ntcoder.com/bab/2008/08/27/whats-the-size-limit-of-a-vector/)- 由于您有一个 int 向量向量，因此外部向量的大小可能非常有限。

这是一个人通过运行上述程序得到的结果。请注意，int （大小 4）的向量的最大大小为 1073741823，即**10^9**您使用向量> 将占用更多空间，从而显着减小最大大小**。**

```
Max elements that can be inserted into a vector having elements of size '1' is: 4294967295
Max elements that can be inserted into a vector having elements of size '4' is: 1073741823
Max elements that can be inserted into a vector having elements of size '8' is: 536870911
Max elements that can be inserted into a vector having elements of size '4' is: 1073741823 
```

如果您将数据结构更改`vector`为`vector<int>`指针，您将能够存储更多。我知道这可能会从根本上改变很多相应的功能和结构，但这就是`vector`.

* * *

它可能关注的对象： http: [//codepad.org/nAoPi7cV](http://codepad.org/nAoPi7cV)

```
int main()
{
   std::cout << "Max elements that can be inserted into a vector having elements of size '" 
             << sizeof( std::vector<int> ) << "' is: "
             << std::vector<std::vector<int> >().max_size() << std::endl;
} 
```

> 可以插入到具有大小为“4”的元素的向量中的最大元素为：1073741823
> 
> 可以插入到具有大小为“28”的元素的向量中的最大元素为：153391689

日志（153391689）〜= 8.2

所以它的 max_size 足够大，可以在键盘编译机上容纳 10^7。在较小的机器上，它可能不是。

* * *

另请注意，即使给出了这个最大大小，程序在构造时也会出现段错误：http: [//codepad.org/agKMMEjQ](http://codepad.org/agKMMEjQ)

```
int main()
{
   std::vector<std::vector<int> > myvec(153391689);
} 
```

> 分段故障

* * *

如果您将其进一步减小到提问者建议的大小 (10^7)，程序将再次崩溃：[http ://codepad.org/zMG0VCeg](http://codepad.org/zMG0VCeg)

```
std::vector<std::vector<int> > myvec(10000000); 
```

> std::bad_alloc: St9bad_alloc
> 
> 中止。

* * *

但是，如果您进一步减小尝试的大小，程序会运行得很愉快：[http ://codepad.org/sbMPppgx](http://codepad.org/sbMPppgx)

```
std::vector<std::vector<int> > myvec(100000);

std::cout << myvec.size(); 
```

> 100000

* * *

上面的程序非常简单，并且遇到了提问者指定的确切问题 - 因此问题不在其他地方 - 由于 std::vector 类而遇到限制。留下了键盘链接以便于参考，但在本地环境中测试时我得到了相同的数字。

# java - 将 SD 卡用于 inputStream (images) android 而不是内部存储器

> ID：10267918
> 
> 赞同：0
> 
> 时间：2012-04-22T12:27:29.603
> 
> 标签：java, android, bitmap, inputstream

我正在尝试（使用下面的方法）从互联网上获取图像并使用画布进行处理。但有时我遇到 outOfMemory 异常。所以我想知道是否有办法将 inputStream 直接加载到存储卡而不是内部存储器中。

```
private Bitmap LoadImageFromWebOperations(String url)
{   

   try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        bitmap = ((BitmapDrawable)d).getBitmap().copy(Config.ARGB_8888, true);
        return bitmap;
        }catch (Exception e) {
        System.out.println("Exc="+e);
        return null;
    }
} 
```

logcat 说异常是由于该行：

```
Drawable d = Drawable.createFromStream(is, "src name"); 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:34:52.770

我从 Fedor Vlasov 的惰性列表演示中获取了这段代码： [在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)。

首先，您需要创建一个函数来将输入流复制到文件输出流：

```
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
} 
```

然后得到一个缓存文件夹：

```
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"MyCacheDir");
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs(); 
```

然后加载您的位图：

```
 private Drawable getBitmap(String url) 
{
    String filename=URLEncoder.encode(url);
    File f= new File(cacheDir, filename);

    try {                        
        HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        CopyStream(is, os);
        os.close();            

        Bitmap bitmap = BitmapFactory.decodeStream(new FileInputStream(f));            
        return new BitmapDrawable(bitmap);
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
} 
```

# android - 如何在动态创建的水平和垂直布局中滚动？

> ID：10267921
> 
> 赞同：0
> 
> 时间：2012-04-22T12:28:06.187
> 
> 标签：android, android-layout, android-widget

我想了解如何在水平和垂直方向上滑动动态创建的布局。

这是创建布局的代码片段：

```
tableLayout = new TableLayout(this);
tableLayout.setGravity(Gravity.CENTER);

values = new EditText[10][10];

for (int i = 0; i < 10; i++) {

tableRow = new TableRow(this); 
tableRow.setGravity(Gravity.CENTER);

for (int j = 0; j < 10  ; j++) {
values[i][j] = new EditText(this);
values[i][j].setHint("r " + i + "c" +j);
values[i][j].setPadding(10, 10, 10, 10);
tableRow.addView(values[i][j]);
}

tableLayout.addView(tableRow);
}

setContentView(tableLayout); 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

</LinearLayout> 
```

我想滚动它。我希望你能帮忙谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:36:15.920

自定义垂直滚动视图：

```
package com.scrollable.view;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.ScrollView;

public class VScroll extends ScrollView {

    public VScroll(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public VScroll(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public VScroll(Context context) {
        super(context);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return false;
    }
} 
```

自定义 Horizo​​ntalScrollView：

```
package com.scrollable.view;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.HorizontalScrollView;

public class HScroll extends HorizontalScrollView {

    public HScroll(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public HScroll(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public HScroll(Context context) {
        super(context);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return false;
    }
} 
```

可滚动图像活动：

```
package com.scrollable.view;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.HorizontalScrollView;
import android.widget.ScrollView;

public class ScrollableImageActivity extends Activity {

    private float mx, my;
    private float curX, curY;

    private ScrollView vScroll;
    private HorizontalScrollView hScroll;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        vScroll = (ScrollView) findViewById(R.id.vScroll);
        hScroll = (HorizontalScrollView) findViewById(R.id.hScroll);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float curX, curY;

        switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                mx = event.getX();
                my = event.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                curX = event.getX();
                curY = event.getY();
                vScroll.scrollBy((int) (mx - curX), (int) (my - curY));
                hScroll.scrollBy((int) (mx - curX), (int) (my - curY));
                mx = curX;
                my = curY;
                break;
            case MotionEvent.ACTION_UP:
                curX = event.getX();
                curY = event.getY();
                vScroll.scrollBy((int) (mx - curX), (int) (my - curY));
                hScroll.scrollBy((int) (mx - curX), (int) (my - curY));
                break;
        }

        return true;
    }

} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.scrollable.view.VScroll android:layout_height="fill_parent"
        android:layout_width="fill_parent" android:id="@+id/vScroll">
        <com.scrollable.view.HScroll android:id="@+id/hScroll"
            android:layout_width="fill_parent" android:layout_height="fill_parent">
            <ImageView android:layout_width="fill_parent" android:layout_height="fill_parent" android:src="@drawable/bg"></ImageView>
        </com.scrollable.view.HScroll>
    </com.scrollable.view.VScroll>

</LinearLayout> 
```

有关更多详细信息，请参阅此[链接](https://stackoverflow.com/questions/2044775/scrollview-vertical-and-horizontal-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:30:32.643

我这样解决了：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.*;
import android.view.Gravity;

public class TableActivity extends Activity 
{ 
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        HorizontalScrollView HSC = new HorizontalScrollView(this);
        ScrollView VSC = new ScrollView(this);
        TableLayout tableLayout = new TableLayout(this);
        tableLayout.setGravity(Gravity.CENTER);
        EditText[][] values = new EditText[10][10];
        for (int i = 0; i < 15; i++) 
        { 
            TableRow tableRow = new TableRow(this);
            tableRow.setGravity(Gravity.CENTER);
            for (int j = 0; j < 15; j++) 
            { 
                values[i][j] = new EditText(this);
                values[i][j].setHint("r " + i + "c" +j);
                values[i][j].setPadding(10, 10, 10, 10);
                tableRow.addView(values[i][j]);
            }
            tableLayout.addView(tableRow);
        }
        VSC.addView(tableLayout);
        HSC.addView(VSC);
        setContentView(HSC);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T12:37:26.513

这是它的xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:scrollbars="vertical">

    <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="320px" android:layout_height="fill_parent">

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/linlay" android:layout_width="320px"
            android:layout_height="fill_parent" android:stretchColumns="1"
            android:background="#000000"/>

    </HorizontalScrollView>

</ScrollView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T12:39:28.713

在你的 xml 中尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView 
        android:scrollbars="horizontal" 
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent">
        <HorizontalScrollView 
            android:id="@+id/horizontalView" 
            android:layout_height="wrap_content"
            android:scrollbars="horizontal|vertical" 
            android:layout_width="wrap_content">

              //put here your child layout that you want to scroll(don't forget that the scrollview should have just one child)

       </HorizontalScrollView>

    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T19:50:43.557

[有点晚了，但你可以在这里](https://github.com/myntra/droid-uiscrollview)查看我从 android 的水平和垂直滚动视图中组合在一起的这个库

# elasticsearch - 使用 Elasticsearch 自定义脚本字段检查参数数组中是否存在 id

> ID：10267922
> 
> 赞同：1
> 
> 时间：2012-04-22T12:28:15.350
> 
> 标签：elasticsearch, tire, mvel

如果文档的 id 存在于作为参数发送的数组中，是否可以添加一个布尔值的自定义脚本字段并返回 true？

像这样的东西[https://gist.github.com/2437370](https://gist.github.com/2437370)

使用 mvel 执行此操作的正确方法是什么？

**更新：** 无法按照 Imotov 的回答中指定的方式工作。

映射：

种类：

`:sort=>{:_script=>{:script=>"return friends_visits_ids.contains(_fields._id.value)", :type=>"string", :params=>{:friends_visits_ids=>["4f8d425366eaa71471000011"]}, :order=>"asc"}}}`

`place: { properties: { _id: { index: "not_analyzed", store: "yes" }, } }`

我没有收到任何错误，只是文档没有正确排序。

**更新 2**

哦，我确实在文件上得到了这个：

`"sort"=>["false"]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:56:13.407

你走在正确的轨道上。如果此列表很大，则将 id 列表存储在地图中而不是数组中可能会更有效。

```
"sort" : {
  "_script" : {
    "script" : "return friends_visits_ids.containsKey(_fields._id.value)",
    "type" : "string",
    "params": {
      "friends_visits_ids": { "1" : {}, "2" : {}, "4" : {}}
    }
  }
} 
```

确保[id 字段已存储](http://www.elasticsearch.org/guide/reference/mapping/id-field.html)。否则 _fields._id.value 将为所有记录返回 null。

# c# - 如何停止动态添加的标签重叠

> ID：10267923
> 
> 赞同：0
> 
> 时间：2012-04-22T12:28:19.780
> 
> 标签：c#, winforms

好吧，我尝试创建彼此相邻的标签，但根据用户输入，它可以与旁边的标签重叠。我想知道他们的某种属性是否不会让标签重叠。我尝试`AutoSize = true`了方法，但我没有运气

信息是从 xml 文件中读取的 - 它们水平重叠

```
if (textReader.Name == "test")
{
   textReader.Read();
   XmlNodeType nType = textReader.NodeType;

   if (nType == XmlNodeType.Text)
   {
      Label l = new Label();

      System.Drawing.Point l1 = new System.Drawing.Point(15, 48 + a);
      l.Location = l1;
      l.Text = textReader.Value.ToString();
      l.Size = new Size(200, 50);

      tabPage2.Controls.Add(l);
      a += 35;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:52:10.250

您可以`AutoSize`根据文本调整宽度和高度并`MaximumSize`自动换行，如果宽度超过 200，剩余的文本将进入下一行。

```
l.AutoSize = true;
l.MaximumSize = new Size(200, 50); 
```

# c# - 需要了解重载的构造函数

> ID：10267924
> 
> 赞同：1
> 
> 时间：2012-04-22T12:28:23.163
> 
> 标签：c#

我学习 C#，我试图理解重载的构造函数，它是如何工作的，以及像链调用一样使用它们的意义？为什么不只有一个具有所有必要参数的构造函数？下面我有一些我正在处理的任务的帮助代码，我需要一些帮助来理解所有这些构造函数的要点。一些帮助！谢谢！

```
 public class Email
{
    //private email
    private string m_personal;
    //work mail
    private string m_work;

    public Email()
    {
    }

    public Email(string workMail) : this(workMail, string.Empty)
    {
    }

    public Email(string workMail, string personalMail)
    {
        m_work = workMail;
        m_personal = personalMail;
    }

    public string Personal
    {
        //private mail
        get { return m_personal; }

        set { m_personal = value; }
    }

    public string Work
    {
        get { return m_work; }

        set { m_work = value; }
    }

    public string GetToStringItemsHeadings
    {
        get { return string.Format("{0,-20} {1, -20}", "Office Email", "Private Email"); }
    }

    public override string ToString()
    {
        string strOut = string.Format("{0,-20} {1, -20}", m_work, m_personal);
        return strOut;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T12:36:24.983

> 为什么不只有一个具有所有必要参数的构造函数？

如果您班级的用户只对某些参数感兴趣怎么办？使用您的示例，如果有人没有个人电子邮件怎么办？他们应该通过`null`还是`string.Empty`？这种类型级别的知识最好由类型本身来处理。

通过仅使用工作电子邮件公开额外的构造函数，您实际上是在告诉您的班级消费者*“没有个人电子邮件？别担心，我会处理它”*。

最重要的是，链接定义自然有助于避免代码冗余。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T12:41:08.707

这不是关于`Constructors`。所有类型的重载函数都简化了库的使用。当我们编写一个类时，我们将把所有的复杂性封装在一个黑盒子中，这对于一些已知的`best Practices`. 一个很好的例子是`.NET`您可以轻松使用的库（记住那些重载的函数/构造函数）。

这没有对错之分，我们使用重载函数使使用更简单，因此在不需要时无需传递空参数。

其次，我们调用具有最多参数的函数由下一个具有较少参数的函数嵌套到 reduce `Redundancy`。我的意思是避免在所有版本的函数中复制/粘贴相同的代码。

我认为由于该模式被广泛接受和使用，下一代`.NET`将以某种方式隐藏这个冗余版本，我们只需使用最多参数编写函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:33:09.803

关键是要避免重复代码，因为它将帮助您避免这种情况：

```
public Email(string workMail)
{
    m_work = workMail;
    m_personal = string.Empty;
}

public Email(string workMail, string personalMail)
{
    m_work = workMail;
    m_personal = personalMail;
} 
```

考虑到您的构造函数可以做的不仅仅是分配字段。

这个怎么运作？您可以尝试、调试和学习。我不确定，但我认为它会首先调用重载的，然后调用构造函数的代码。在您的场景中，调用 Email(string workMail) 将首先调用 Email(string workMail, string personalMail)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T12:37:34.590

查看：

1.  [http://www.c-sharpcorner.com/UploadFile/vishnuprasad2005/HowuseCSharpConstructors11302005015338AM/HowuseCSharpConstructors.aspx](http://www.c-sharpcorner.com/UploadFile/vishnuprasad2005/HowuseCSharpConstructors11302005015338AM/HowuseCSharpConstructors.aspx)

2.  [http://blog.degree.no/2012/03/calling-an-overloaded-constructor-from-another-constructor-c/](http://blog.degree.no/2012/03/calling-an-overloaded-constructor-from-another-constructor-c/)

3.  [http://weblogs.asp.net/scottcate/archive/2005/11/23/431412.aspx](http://weblogs.asp.net/scottcate/archive/2005/11/23/431412.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T12:40:10.253

我会说第二个构造函数主要是为了方便而提供的，以便在没有个人邮件地址的情况下更容易地使用该类。然后类的用户只需要指定工作地址，类本身将通过为该字段设置合理的默认值来处理不存在的个人地址。如果缺少该参数，则该类的用户将负责填充 string.Empty 用于丢失的个人邮件地址。

构造函数被实现为对另一个构造函数的调用，以避免代码重复。它也可以写成

```
public Email(string workMail)
{
    m_work = workMail;
    m_personal = string.Empty;
} 
```

但是调用双参数构造函数的现有实现是更简洁的解决方案，因为它遵循“不要重复自己”的原则。

# java - 如何检查java中的游标类型？

> ID：10267929
> 
> 赞同：0
> 
> 时间：2012-04-22T12:28:59.933
> 
> 标签：java, windows, cursor

在 Windows 操作系统中是否可以检查光标类型？

如果是，那么我如何确定光标类型是否为文本光标，使用java？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:39:52.187

我相信你可以使用java的[Cursor](http://docs.oracle.com/javase/7/docs/api/java/awt/Cursor.html)类来获取游标的类型。

查看[Cursor.getName()](http://docs.oracle.com/javase/7/docs/api/java/awt/Cursor.html#getName%28%29)的任务。

示例代码：

```
Cursor cursor = Cursor.getDefaultCursor();
System.out.println(cursor.getName());
System.out.println(cursor.getType()); 
```

输出 =`Default Cursor 0`

如果你看一下[Cursor.java](http://www.docjar.com/html/api/java/awt/Cursor.java.html)。它提到

```
/**
   52        * The default cursor type (gets set if no cursor is defined).
   53        */
   54       public static final int     DEFAULT_CURSOR                  = 0; 
```

所以，我相信你必须在你的java代码中手动提到游标类型。

# android - Android：ProgressDialog 不旋转

> ID：10267930
> 
> 赞同：0
> 
> 时间：2012-04-22T12:29:01.350
> 
> 标签：android, multithreading, progressdialog

我在让 ProgressDialog 轮旋转时遇到问题。这是我的代码：

```
final ProgressDialog dialog = ProgressDialog.show(this, "", "Loading...", true, false);
Thread thread=new Thread(new Runnable(){
    public void run(){
    runOnUiThread(new Runnable(){
        @Override
        public void run() {
            if(dialog.isShowing())
                // starts a foreground service, does database stuff, 
                // sets up a spinner with values
                dialog.dismiss();
            }

        });
    }
});

thread.start(); 
```

一切都按计划进行，我得到了 ProgressDialog，在后台发生了一些事情，一旦设置，ProgressDialog 就会消失 - 唯一的问题是 ProgressDialog 中的动画没有旋转，几乎使它变得无用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:23:22.137

您在此处省略的代码

```
 // starts a foreground service, does database stuff, 
        // sets up a spinner with values 
```

必须做一些阻塞 UI 线程的事情。只需将它们放在`runOnUiThread()`方法之外。

```
Thread thread=new Thread(new Runnable(){
    public void run(){
        // starts a foreground service, does database stuff, 
        // sets up a spinner with values
        runOnUiThread(new Runnable(){
            @Override
            public void run() {
            if(dialog.isShowing())
                dialog.dismiss();
            }

        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T11:20:38.603

因为您将处理对话框放在错误的区域，例如我的错误：我有两个活动：**MainActivity**和**ShowingActivity**， MainActivity 将在新意图转移到 ShowingActivity 后显示处理对话框， ShowingActivity 将从服务器获取一些数据（它将是在这里屏蔽）。当我在 MainActivity 中调用 ProcessingDialog 时，它显示但没有旋转，因为我的 Intent 移动到 ShowingActivity 并且它阻止了 Ui，因为从服务器获取数据的操作必须等待几秒钟。所以我修复了它： 1/ 在 MainActivity 调用中：

```
final Intent working = new Intent(getApplicationContext(),
                    WorkingActivity.class);
final ProgressDialog ringProgressDialog = ProgressDialog.show(
                    MainActivity.this, "Please wait ...", "Connecting ...",
                    true);
ringProgressDialog.setCancelable(false);
new Thread(new Runnable() {
                        @Override
                        public void run() {
                            //Menthod need time to load:
                                    getDatafromServer();
                             if (BookListFragment.isLoaded) {
                                ringProgressDialog.dismiss();
                                startActivity(working);
                                return;
                             }
}); 
```

因此它不会阻塞 Ui，因为 MainActivity 在获取 DATA 后仍在运行。在 ShowingActivity 中我将使用这个 DATA（因为我设置 DATA 是一个静态字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T02:32:31.543

使用处理程序 android 的 ProgressDialog 示例

```
 final ProgressDialog dialog = ProgressDialog.show(this, "Title",
            "Message", true);

    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            dialog.dismiss();
        }
    };
    Thread t = new Thread() {
        public void run() {
            // write process code here.

            handler.sendEmptyMessage(0);
        }
    };
    t.start(); 
```

修复问题：ProgressDialog 不起作用

# android - 在我的 TextView 中使用 HTML

> ID：10267933
> 
> 赞同：0
> 
> 时间：2012-04-22T12:29:24.180
> 
> 标签：android, html, textview

我想在我的 TextView （子和上标）中使用 HTML。问题是，我只想在编写 UI 元素时使用 XML：我不想使用`HTML.fromHtml(...);`.

我的资源中的字符串是以下代码：

```
...
<string name="buttonY1"><![CDATA[<html><i>Y</i><sup>2</sup></html>]]></string>
... 
```

XML 代码是：

```
...
<TextView android:text="@string/buttonY1"
                      android:textSize="20sp"
                      android:gravity="center_horizontal"></TextView>
... 
```

当我调试我的应用程序时，文本显示纯文本（标签仍在其中），而不是解析的 HTML。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:38:50.227

简单地删除 CDATA 部分，只包括标签，例如：

```
<string name="lorem_short"><sub>Lorem</sub> ipsum dolor <sup>sit</sup> amet, consetetur sadipscing elitr</string> 
```

# javascript - 是否可以防止引导轮播在鼠标悬停时暂停并继续自动循环？

> ID：10267934
> 
> 赞同：54
> 
> 时间：2012-04-22T12:29:28.330
> 
> 标签：javascript, hover, twitter-bootstrap

是否可以防止引导轮播暂停鼠标悬停行为并继续自动循环浏览项目？

文档只提到了 的默认行为`pause: "hover"`，如果我将 pause 参数更改为其他任何参数，则轮播将完全停止工作，因此我不确定如何禁用此默认行为。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-04T00:08:10.700

我发现值`"false"`将导致轮播在鼠标悬停期间继续循环：

```
$('.carousel').carousel({
    pause: "false"
}); 
```

我正在使用 Twitter Bootstrap v2.0.2

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-11-14T04:17:43.600

您也可以将其添加到 div .carousel 而不是使用 javascript。

添加延迟时间：

`data-interval="3000"`

添加是否在悬停时暂停，选项是`true`和`false`

`data-pause="false"`

示例是：

`<div id="carousel" class="carousel" data-ride="carousel" data-interval="3000" data-pause="false">`

这对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-20T11:52:21.500

```
$('.carousel').carousel({
        pause: 'none'
    }) 
```

引导 v3.3.4

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-11T18:05:49.150

Bootstrap 4删除悬停时的暂停

```
$('.carousel').carousel({
    interval: 2000,
    cycle: true,
    pause: "null"
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-16T17:20:45.380

对于仍在访问此线程的任何人，在 4.1.3 的最新版本中，请使用不带引号的**null 。**在以前的 v.4 版本中可能需要引号，但现在不是这样：

```
$('.carousel').carousel({
    interval: 2000,
    cycle: true,
    pause: null
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-25T13:13:35.070

在引导程序 4 中：

> 数据暂停=“假”

例如：`<div class="carousel slide" id="carousel" data-pause="false" data-ride="carousel">`

此设置可防止暂停。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-11T05:53:20.863

我发现这种循环和暂停取决于两件事。

1.  当鼠标进入时（**mouseenter - 暂停滑动**）
2.  当鼠标离开时（**mouseleave - 恢复滑动**）

只需更改 js/bootstrap.js 文件中的以下代码行以允许连续滑动。

`.on('mouseenter', $.proxy(this.pause, this))` 到

`.on('mouseenter', $.proxy(this.**cycle**, this))`

# php - Memcached 键：需要一些说明

> ID：10267938
> 
> 赞同：1
> 
> 时间：2012-04-22T12:29:53.337
> 
> 标签：php, get, memcached, set

我已经阅读了许多关于 Memcached 的指南，但是，有几件事我还不清楚：

1）我看过很多例子，看起来或多或少是这样的：

```
$sql = "SELECT `name` FROM `users` WHERE `id` = 1;";
$memcache->set(md5($sql), $sql, false, 60);
$memcache->get(md5($sql)); 
```

但是，由于我对 Memcache 的了解有限，我在这里看到了一个严重的缺陷：我不能使用相同的方法来存储带有`INSERT/UPDATE`请求的数据，因为从技术上讲，这会导致不同的哈希值

作为一个解决方案，我想我可以使用这样的东西：创建一个可以执行以下操作的类/函数：

```
class db {
 function insert($sql, $ttl, $key) { // $key would be the name of the key I would manually generate for each query. To maintain uniqueness for each user where needed, could be user_id_keyname
  $memcache->set($key, $sql, false, $ttl);
  mysql_query($sql);
 }

function sel($sql, $ttl, $key) {
  if ($memcache->get($key)) then return $memcache->get($key);
  else {
   $memcache->set($key, $sql, false, $ttl);
   return mysql_query($sql);
  } 
```

这可能是解决我的问题的正确方法吗？真的很想看到对代码的任何评论。} }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T13:35:20.737

为什么要缓存`INSERT`/`UPDATE`查询的结果？使用`SELECT`查询的 md5 哈希并没有错，因为您不需要任何其他信息来唯一标识结果集。您只想缓存`SELECT`查询的结果，这样您就不必一直从数据库中检索数据。当您更新数据时，您不想丢失它，因此您必须将查询发送到数据库。

您的示例中还有另一个问题。您实际上并没有在缓存中存储任何查询结果。您只存储无用的 SQL 查询。

# jquery - 加入方法在jquery中不起作用

> ID：10267939
> 
> 赞同：0
> 
> 时间：2012-04-22T12:30:03.193
> 
> 标签：jquery

[JSFiddle](http://jsfiddle.net/JPPHm/5/)

```
$(".commentbox").on("click",".btnSave",function(){

         var id = $(this).attr("id").split("-");
            alert(id);
            id.shift();
            alert(id);
            var newString = id.join('-');
            alert(newString);

   });       
});​ 
```

输入是`btnSave-88eC4B8D2-8F96-4EB5-B42E-08C540D7F171`

输出 ：`88eC4B8D2,8F96-4EB5,B42E,08C540D7F171`

虽然它适用于`btnReply`按钮为什么请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:57:28.127

这是一个技巧问题吗？:)

* * *

问题在于这行代码

```
<input type='button' class='btnSave' value='Save' id='btnSave-" + id + "' /> " 
```

这里传递的 id 实际上是`id="btnSave-88C4B8D2,8F96,4EB5,B42E,08C540D7F171"`因为 id 是一个数组，并且该数组被转换为逗号分隔的字符串，因为您将其设置为字符串属性。现在你在那个字符串上调用 split(-)，它给你“btnSave”和“88C4B8D2,8F96,4EB5,B42E,08C540D7F171”。现在您`shift`删除 btnSave 留下单个成员“88C4B8D2,8F96,4EB5,B42E,08C540D7F171”，然后在该单个字符串上调用 join("-") ，这根本不会改变任何事情。因此，您所要做的就是像这样更改上面显示的内容

```
<input type='button' class='btnSave' value='Save' id='btnSave-" + newString + "' /> " 
```

在这里小提琴：http: [//jsfiddle.net/naveen/XHr6e/](http://jsfiddle.net/naveen/XHr6e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:35:46.287

我遇到的奇怪问题之一，但逃避 `-`解决了问题。

```
var newString = id.join('\-'); 
```

用法：[演示](http://jsfiddle.net/XSDWP/)

```
$(".commentbox").on("click",".btnSave",function(){
        var id = $(this).attr("id").split("-");
        id.shift();
        var newString = id.join('\-');
        alert(newString);
   });       
});​ 
```

# ios - 在 iOS 上运行 QML 或 Qt

> ID：10267940
> 
> 赞同：2
> 
> 时间：2012-04-22T12:30:09.250
> 
> 标签：ios, qt, qml, lighthouse

我们已经在网上搜索了这个问题，但找不到正确的答案。

众所周知，lighthouse 项目用于将 Qt 程序移植到 IOS，但没有关于在 Mac 上使用或编译它的文档。在这件事上有什么建议吗？

项目 qt-iphone 正在进行另一项工作，在 mac 中编译时，我们收到错误“似乎您没有“make”或“gmake””，我们在网上找不到有关修复它的解决方案。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:03:01.623

[http://www.mediator-software.com/](http://www.mediator-software.com/)

几天前刚刚发布的最新sdk，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T18:54:41.197

Qt 现在从 Qt 5.2 开始原生[支持这一点。](http://doc.qt.io/qt-5/ios-support.html)

# mongodb - 在 MongoDB 中，我们可以省去传统的用户 ID 吗？

> ID：10267943
> 
> 赞同：0
> 
> 时间：2012-04-22T12:30:48.410
> 
> 标签：mongodb

一个经典的关系数据库会有一个像 USER_ID 这样的字段，它通常是一个自动递增的数字。MongoDB 有一个文档 ID，类似于以下内容

> 4f90e98277f6426c0a000001

这可以完全取代 USER_ID 吗？我想我基本上要问的是，在搜索、插入和索引方面，它是否与自动递增数字一样快？如果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:32:45.733

由于主键是 ObjectID 而不是整数，因此您不太可能遇到性能问题。您很快就会受到数据大小的影响。我不会担心的。

ObjectID 带来了几个好处：

*   它是全球唯一的（您可以在应用程序中创建新的 id 而无需查阅数据库）；
*   分片支持（无需在分片之间同步自增序列）；
*   `created_at`随着时间单调增加（并且包括实际时间戳，因此如果您只想按插入时间排序，则不必有单独的字段）；

# c++ - 一个使用函子作为谓词的 C++ STL 程序

> ID：10267944
> 
> 赞同：7
> 
> 时间：2012-04-22T12:31:04.520
> 
> 标签：c++, generics, stl

在下面的 C++ STL 程序中，我定义了一个函子 Nth，如果它在第 n 次被撤销，它返回 true。然后我将它转换为通用算法**remove_if**，我得到了一些奇怪的东西。

编码：

```
#include <iostream>
#include <list>
#include <algorithm>
#include "print.hpp"

using namespace std;

class Nth{
private:
    int nth,ncount;
public:
    Nth(int n):nth(n),ncount(0){}

    bool operator()(int)
    {
        return ++ncount == nth;
    }
};

int main()
{
    list<int> col;
    for (int i = 1;i <=9 ;++i)
    {
        col.push_back(i);
    }

    PRINT_ELEMENTS(col,"col : ");

    list<int>::iterator pos;
    pos = remove_if(col.begin(),col.end(),
        Nth(3));

    col.erase(pos,col.end());

    PRINT_ELEMENTS(col,"nth removed : ");
} 
```

打印.hpp：

```
#include <iostream>

template <class T>
inline void PRINT_ELEMENTS (const T& coll, const char* optcstr="")
{
    typename T::const_iterator pos;

    std::cout << optcstr;
    for (pos=coll.begin(); pos!=coll.end(); ++pos) {
        std::cout << *pos << ' ';
    }
    std::cout << std::endl;
} 
```

我在 Microsoft Visual Studio 2008 中运行它，我得到了结果： ![在此处输入图像描述](../Images/5cb88359f3a860c27df6fd706f832130.png) 它删除了我不想要的元素 3 和 6。我以为只有 3 会被删除。有人可以为我翻译吗？非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T12:44:50.797

来自 C++ 标准库：Nicolai M. Josuttis 的教程和参考

发生这种情况是因为算法的通常实现在算法期间在内部复制谓词：

```
template <class ForwIter, class Predicate>
   ForwIter std::remove_if(ForwIter beg, ForwIter end,
                           Predicate op)
   {
       beg = find_if(beg, end, op);
       if (beg == end) {
           return beg;
       }
       else {
       ForwIter next = beg;
           return remove_copy_if(++next, end, beg, op);
       }
   } 
```

该算法使用 find_if() 来查找应删除的第一个元素。但是，它然后使用传递的谓词 op 的副本来处理剩余的元素（如果有）。在这里，再次使用原始状态的第 N 个元素，它还删除了剩余元素中的第三个元素，实际上是第六个元素。

此行为不是错误。该标准没有指定算法在内部复制谓词的频率。因此，为了获得 C++ 标准库的保证行为，您不应传递行为取决于复制或调用频率的函数对象。因此，如果您为两个参数调用一元谓词并且两个参数相等，则谓词应该始终产生相同的结果。也就是说，谓词不应因调用而改变其状态，并且谓词的副本应具有与原始状态相同的状态。为确保不会因为函数调用而改变谓词的状态，应将 operator() 声明为常量成员函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T12:42:06.900

不要`std::remove_if`在`std::list`. 相反，使用列表的成员函数：

```
col.remove_if(Nth(3)); 
```

通用算法重新排列元素的值，以便您可以安全地从末尾擦除，但对于列表，成员算法直接删除不需要的*节点*而不接触任何其他元素。

*更新。*正如所指出的，这实际上并不能保证解决您的问题，因为您的谓词不允许具有内部按值状态。试试这个：

```
struct Nth
{
    const int n;
    int & counter;
    Nth(int N, int & c) : n(N), counter(c) { }
    bool operator()(int) const { return ++counter == N; }
};

{
    int counter = 0;
    cols.remove_if(Nth(3, counter));
} 
```

这个新谓词是可复制的，并充当（外部）计数器变量的引用包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:17:13.203

我阅读了《The Standard C++ Library》，找到了另一种解决方案。那就是：重新实现函数remove_if：

```
template <class ForwIter,class Predicate>
ForwIter remove_if_re(ForwIter begin,ForwIter end,Predicate op)
{
    while(begin != end && !op(*begin))
        ++begin;
    if(begin == end)
        return begin;
    else{
        ForwIter next = begin;
        return remove_copy_if(++next,end,begin,op);
    }
} 
```

它确实有效。

但是我有点好奇。这个实现不使用传递的谓词操作的副本来处理剩余的元素吗？？？

我是学习 STL 的新手。我会感谢您耐心的回答。

非常感谢。

# android - 如何创建一个覆盖画布并将触摸事件传播到主屏幕？

> ID：10267945
> 
> 赞同：2
> 
> 时间：2012-04-22T12:31:10.743
> 
> 标签：android

对于我的一生，我无法弄清楚关于这个话题的任何事情。也许我只是在搜索时没有使用正确的关键字。

我要做的是创建一个覆盖透明画布，它基本上会将所有触摸事件传递到 Android 主屏幕，实际上，使手机完全可用。

如果我不明白，请查看 Android Market 上的“透明屏幕”应用程序。这正是我想做的。在手机可以正常使用的情况下，相机预览屏幕始终在顶部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:09:24.860

知道了！只需在活动中使用它：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE); 
```

它创建了一个点击活动。

# node.js - 是否有类似 Perl 的用于 node.js 的 Catalyst 路由？

> ID：10267948
> 
> 赞同：1
> 
> 时间：2012-04-22T12:31:34.367
> 
> 标签：node.js, perl, routing, catalyst, dispatch

Perl 的 Catalyst 框架具有[出色的 URL 调度/路由机制](http://www.catalyzed.org/2009/05/chained-the-awesomesauce.html)，允许将方法链接在一起以模块化路由。

通过严格应用科学方法，我确定这比我当前项目的 Rails 式布线好 1942.49 倍。我目前正在使用 node.js 编写一些东西。

是否有使用催化剂式调度（尤其是“链接”）的节点框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:38:52.570

如果您使用的是 express，您可能会使用中间件[http://expressjs.com/guide.html#middleware](http://expressjs.com/guide.html#middleware)并连接以模拟模拟解决方案。[https://github.com/senchalabs/connect](https://github.com/senchalabs/connect)

我希望这对这个问题有所帮助:)。

# hash - md5 "%02x" fprintf

> ID：10267950
> 
> 赞同：0
> 
> 时间：2012-04-22T12:31:52.130
> 
> 标签：hash, md5, printf

我必须计算文件的 md5 哈希值。我成功地找到了库来做这件事，他们在屏幕上打印散列。我必须在 txt 文件上打印哈希，但我有一些问题。它只打印 00 而不是所有 32 位哈希。这是打印功能。我只添加了打开文件并在其上打印的行，其余的函数来自库并且工作正常，因为在屏幕上以正确的方式打印了哈希。

似乎是 fprintf 和 %02x" 的某种问题。谢谢。

```
static void MDPrint (mdContext)
MD5_CTX *mdContext;
{
  int i;
  FILE *fp;
  if((fp=fopen("userDatabase.txt", "ab"))==NULL) printf("Error while opening the file..\n");
  else {
    for (i = 0; i < 16; i++)
            printf ("%02x", mdContext->digest[i]);
            fprintf(fp, "%02x", mdContext->digest[i]);
    }
fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:35:22.547

你的问题就在这里；

```
for (i = 0; i < 16; i++)
    printf ("%02x", mdContext->digest[i]);
    fprintf(fp, "%02x", mdContext->digest[i]); 
```

由于没有花括号，因此只有 printf 行会在循环内。您需要添加大括号以使两行都在循环内；

```
for (i = 0; i < 16; i++)
{
    printf ("%02x", mdContext->digest[i]);
    fprintf(fp, "%02x", mdContext->digest[i]);
} 
```

# android - Android 使用特定浏览器启动特定 url

> ID：10267952
> 
> 赞同：4
> 
> 时间：2012-04-22T12:31:55.177
> 
> 标签：android, uri, shortcut

通过图标启动特定浏览器是使用 ACTION_MAIN 完成的。使用默认浏览器启动特定 url 是通过 ACTION_VIEW 完成的。

如果要在特定浏览器中打开特定 url 怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T12:54:02.413

如果知道浏览器的包名和类名，可以使用Intent.setClassName(String packageName, String className)。好像：

```
Intent i=new Intent(ACTION_VIEW, url);
i.setClassName("com.test.browser","BrowserActivity");
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-08T06:39:59.070

您甚至可以通过其包名称调用特定浏览器。
像这样;

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("https://www.google.co.com"));
intent.setPackage("org.mozilla.firefox");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-22T12:34:02.173

我认为这是一个*设置*。您转到应用程序管理器并转到您最喜欢的浏览器。然后在选项它应该显示你是你的默认值。

*顺便说一句，我不是 Android 开发人员...*

# kernel - 如何获取有关计算机设备的信息？

> ID：10267954
> 
> 赞同：1
> 
> 时间：2012-04-21T15:37:47.970
> 
> 标签：kernel, libraries

我一直在寻找获取系统信息的方法，例如总内存、处理器数量、硬盘可用空间等。向内核询问该信息，我如何在不使用 .system 调用的情况下从 c++ 中做到这一点或 system_info 结构，也许是通过 kernel.dlls？.. 我发现了很多信息，但使用系统调用，我需要获取系统信息但不使用创建的库，更像是创建我自己的向内核询问该信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:23:07.343

我知道您说“没有`SYSTEM_INFO`结构”，但我认为[GetSystemInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724381%28v=vs.85%29.aspx)正是您想要的。

从在 MSDN 上[获取硬件信息：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724423%28v=vs.85%29.aspx)

```
 #include <windows.h>
    #include <stdio.h>
    #pragma comment(lib, "user32.lib")

    void main()
    {
       SYSTEM_INFO siSysInfo;

       // Copy the hardware information to the SYSTEM_INFO structure. 

       GetSystemInfo(&siSysInfo); 

       // Display the contents of the SYSTEM_INFO structure. 

       printf("Hardware information: \n");  
       printf("  OEM ID: %u\n", siSysInfo.dwOemId);
       printf("  Number of processors: %u\n", 
          siSysInfo.dwNumberOfProcessors); 
       printf("  Page size: %u\n", siSysInfo.dwPageSize); 
       printf("  Processor type: %u\n", siSysInfo.dwProcessorType); 
       printf("  Minimum application address: %lx\n", 
          siSysInfo.lpMinimumApplicationAddress); 
       printf("  Maximum application address: %lx\n", 
          siSysInfo.lpMaximumApplicationAddress); 
       printf("  Active processor mask: %u\n", 
          siSysInfo.dwActiveProcessorMask); 
    } 
```

文档`GetSystemInfo`特别表明它在`Kernel32.dll`- 我认为降压在这里停止。

# c# - 在 Timer.Elapsed 事件上更新 MainWindow

> ID：10267956
> 
> 赞同：1
> 
> 时间：2012-04-22T12:32:42.927
> 
> 标签：c#, wpf

我正在编写一个家庭 WPF 应用程序，它以配置的时间间隔从服务器获取文件。

这是一个基本窗口，带有几个标签。我有以下

*   开始时间（反映“开始”事件被击中的日期时间
*   持续时间（反映应用程序运行的时间）
*   速度（文件的下载速度）

我想每秒更新主窗口上的持续时间，所以我有以下代码来执行此操作（在单独的类“RunDownloader.cs”中）。

```
 private void StartTickTimer()
    {
        const double interval = 1000;

        if (_tickTimer == null)
        {
            _tickTimer = new Timer
            {
                Interval = interval
            };
            _tickTimer.Elapsed += _ticktimer_Elapsed;
        }

        _tickTimer.Start();
    } 
```

在 _ticktimer_Elapsed 我调用主窗口中的一个方法 _mainWindow.UpdateTicker();

这将执行以下操作。

```
 public void UpdateTicker()
    {
        var timeStarted = lblTimeStarted.Content.ToString();
        DateTime startTime = DateTime.Parse(timeStarted);
        TimeSpan span = DateTime.Now.Subtract(startTime);

        //ToDo: Output time taken here!
        //lblTimeElapsed.Content =
    } 
```

我有两个问题。

1.  调用 lblTimeStarted.Content.ToString(); 时出现以下异常；在 UpdateTicker()

    ```
     "The calling thread cannot access this object because a different thread owns it." 
    ```

2.  我不太清楚，如何正确显示来自 TimeSpan 的 lblTimeElapsed.Content 的持续时间

提前感谢您的任何答案。:D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T12:45:06.333

在 WPF 中，您不能从 UI 线程以外的线程更新 UI 对象（在 UI 线程上创建）。
为了从其他线程（例如计时器线程）更新 UI 控件，您需要使用 Dispatcher 在 UI 线程上运行更新代码。
这个[问题/答案](https://stackoverflow.com/questions/7839296/using-the-c-sharp-dispatcher/7839424#7839424)可能对您有所帮助，或者您可以通过谷歌搜索“WPF Dispatcher”找到大量信息。
一个示例调度程序调用 - lamda 代码将被发布以在 UI 线程上运行：

```
Dispatcher.BeginInvoke(new Action(() =>
{
    text_box.AppendText(formated_msg);
    text_box.ScrollToEnd();
})); 
```

或者，您可以用[DispatchTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)替换现有计时器- 与您使用的计时器不同，它确保计时器回调位于 UI 线程上：

> 使用 DispatcherTimer 而不是 System.Timers.Timer 的原因是 DispatcherTimer 与 Dispatcher 在同一线程上运行，并且可以在 DispatcherTimer 上设置 DispatcherPriority。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:56:07.363

1.  您的计时器在其自己的线程上运行并`UpdateTicker()`从那里调用该方法。但是，包括 WPF 在内的大多数 UI 框架都禁止从创建相应控件的线程以外的线程访问 UI 控件（后者通常称为“UI 线程”）。您在这里有两个主要选择：

    *   使用`DispatcherTimer`. 这将在您的 UI 线程上运行并避免任何线程问题，但是由于您的`UpdateTicker()`代码也在此线程上运行，因此您的 UI 将在您进行处理时无响应。这可能是也可能不是问题；如果您所做的只是几个字段/属性更改，那很好。
    *   在您的计时器回调中，使用`this.Dispatcher.Invoke()`或`this.Dispatcher.BeginInvoke()`在其他处理完成后调用您的 UI 更新方法（例如：）`this.Dispatcher.Invoke((Action) UpdateTicker)`。这将“碰撞”对 UI 更新的适当线程的调用，同时保持数据处理的异步性。换句话说，这是一种更有效的方法。
2.  该`TimeSpan`结构有一个`ToString()`接受格式化的方法；或者，如果这不方便，它有几个可用于显示目的的辅助属性（ `Days`、`Hours`、`Minutes`、`TotalDays`、`TotalHours`等）。`TotalMinutes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:07:19.697

你可以这样做：在主窗口中：

```
public void ChangeTime(string time)
        {
            lblsb.Content = time;
        } 
```

在 RunDownloader 中：

```
class RunDownloader
    {
        Timer _tickTimer;
        MainWindow window;

        public RunDownloader(MainWindow window)
        {
            this.window = window;
        }

        private delegate void MyDel(string str);

        public void StartTickTimer()
        {
            const double interval = 1000;

            if (_tickTimer == null)
            {
                _tickTimer = new Timer
                {
                    Interval = interval
                };
                _tickTimer.Elapsed += (object sender, ElapsedEventArgs e) =>
                    {
                        window.Dispatcher.BeginInvoke(new MyDel(window.ChangeTime), DateTime.Now.ToLongDateString());
                    };
            }

            _tickTimer.Start();
        }

    } 
```

# python - Python转换风格：功能内部还是功能外？

> ID：10267958
> 
> 赞同：7
> 
> 时间：2012-04-22T12:32:57.230
> 
> 标签：python, styles

我有一个希望对数字类型进行操作的函数。我正在读取要从文件中操作的数字，所以当我读取它们时它们是字符串，而不是数字。让我的函数能够容忍其他类型（下面的选项（A）），还是在调用函数（下面的选项（B））之前转换为数字更好？

```
# Option (A)
def numeric_operation(arg):
    i = int(arg)
    # do something numeric with i

# Option (B)
def numeric_operation(arg):
    # expect caller to call numeric_operation(int(arg))
    # do something numeric with arg 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T12:37:42.533

如果您的函数希望对数字数据进行操作，那么您最好允许 Python 在`TypeError` 它没有收到并且出现问题时抛出 a。我会说，在外面进行转换并处理异常。

```
def numeric_operation(arg):
   # Do numeric things

try: 
  numeric_operation("abc")
except TypeError:
  print("That was supposed to be numeric.") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T12:40:23.543

我会拆分这些操作。有一个函数从文件中读取数字，并让该函数返回实数或数组。执行数字运算的函数不必在每次调用它们时都处理转换，并且您不必为每个函数实现它。可能会有例外，例如接受数字的数字函数、数字列表和数组等。

当您将所有内容放在一起时，您将看不到任何字符串。你为什么要？您提到的文件中没有真正的字符串。这些是编码为字符串的数字，因此只需相应地读取它们并将转换隐藏在从文件中导入数据的函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:37:51.473

这在很大程度上取决于您的用例。您的函数名称表明这是一个严格的*数学*运算，在这种情况下，接受字符串可能没有意义。这基本上是一个关于[关注点分离的问题](http://en.wikipedia.org/wiki/Separation_of_concerns)；如果你的函数做数学，它也不应该*做*转换。所以在这种情况下，我建议先转换，然后只将数字类型传递给函数。

但是，如果这是一个执行大量 I/O 的函数，例如，调用传入的任何内容可能是完全合理的——甚至更可取`int`的。如果你的函数正在对你的数据进行一些奇怪的转换为了让最终用户可以展示它，或者为了转换用户输入，这些转换应该尽可能地封装和组合在一起，这样他们所做的工作就不会“渗入”其他功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T13:03:10.760

**不要做任何事。**

Python 已经有一个很好的错误处理机制，如果你试图用一个字符串做一些数字的事情，它会抛出，而你所做的任何事情都只会隐藏你期望得到的错误。

```
>>> def foo(i):
...     return i+1
...
>>> foo(3)
4
>>> foo("hello")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in foo
TypeError: Can't convert 'int' object to str implicitly 
```

# php - Web 应用程序无法在 IE 上运行

> ID：10267962
> 
> 赞同：0
> 
> 时间：2012-04-22T12:33:39.137
> 
> 标签：php, ajax, internet-explorer, jquery, twitter-bootstrap

我将 jQuery 形式的 AJAX 用于我的客户端脚本和 twitter 引导程序用于布局，也将 php 用于我的服务器端脚本。

但问题是该应用程序在除 Internet Explorer 之外的所有其他 Web 浏览器上运行良好，有没有人知道为什么会发生这种情况，我什至无法在 IE 中打开下拉菜单，我已经尝试了版本 8 和 9。

这是我对服务器的 jquery 调用的基本示例

```
function check_module() {
var option = $('#modules option:selected').attr('value');
$.post('modulesDropDown_1.php', 'option='+option,
    function(data){
        var obj = jQuery.parseJSON(data);
        console.log(obj);
        var name = $("#modules option:selected").text();
        $("#moduleCode").html(obj.allInfo.code);
});
return false;
} 
```

我的代码中有很多这些，我调用服务器并将其作为json返回给客户端......例如，我有一个下拉列表，它会在选择第一个下拉列表时立即填充另一个下拉列表（AJAX），但是第二个下拉菜单应该根据该值更新页面，但它在 IE 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:41:15.463

旧版本的 IE 使用不同的机制来创建 AJAX 请求。尝试这样的事情：

```
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
} 
```

虽然因为它不能在 IE 8 和 9 上运行，所以可能无法解决它。查看一段代码会有所帮助。

[（来自http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)的示例）

# java - 打开 https URL 时出错：未设置 keyCertSign 位

> ID：10267968
> 
> 赞同：6
> 
> 时间：2012-04-22T12:34:19.730
> 
> 标签：java, ssl, groovy

我正在使用以下代码调用远程 https URL：

```
 def inputStream = new URL("https://somewebsite.com").openStream() 
```

这在我的本地机器上效果很好，但是当我部署到服务器时，我得到以下异常：

```
java.security.cert.CertPathValidatorException: CA key usage check failed: keyCertSign bit is not set 
```

这个错误的原因是什么，什么可以解释它在一台机器上而不是另一台机器上工作？

* * *

更新

* * *

我正在生产中运行 Ubuntu 服务器并在本地 Mac 上开发。我尝试访问的站点（我们称之为 peopleware.com）具有以下证书信息：

1.  AddTrust 外部 CA 根
2.  UTN-USERFirst-Hardware
3.  peopleware.com

我尝试从浏览器中保存 .cer 文件并将它们安装到 /etc/ssl/certs/java/castore 的密钥库中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:10:52.000

我假设您正在谈论来自 UTN-USERFirst-Hardware 的证书：

```
-----BEGIN CERTIFICATE----- 
MIIEdDCCA1ygAwIBAgIQRL4Mi1AAJLQR0zYq/mUK/TANBgkqhkiG9w0BAQUFADCB
lzELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExha2Ug
Q2l0eTEeMBwGA1UEChMVVGhlIFVTRVJUUlVTVCBOZXR3b3JrMSEwHwYDVQQLExho
dHRwOi8vd3d3LnVzZXJ0cnVzdC5jb20xHzAdBgNVBAMTFlVUTi1VU0VSRmlyc3Qt
SGFyZHdhcmUwHhcNOTkwNzA5MTgxMDQyWhcNMTkwNzA5MTgxOTIyWjCBlzELMAkG
A1UEBhMCVVMxCzAJBgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExha2UgQ2l0eTEe
MBwGA1UEChMVVGhlIFVTRVJUUlVTVCBOZXR3b3JrMSEwHwYDVQQLExhodHRwOi8v
d3d3LnVzZXJ0cnVzdC5jb20xHzAdBgNVBAMTFlVUTi1VU0VSRmlyc3QtSGFyZHdh
cmUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCx98M4P7Sof885glFn
0G2f0v9Y8+efK+wNiVSZuTiZFvfgIXlIwrthdBKWHTxqctU8EGc6Oe0rE81m65UJ
M6Rsl7HoxuzBdXmcRl6Nq9Bq/bkqVRcQVLMZ8Jr28bFdtqdt++BxF2uiiPsA3/4a
MXcMmgF6sTLjKwEHOG7DpV4jvEWbe1DByTCP2+UretNb+zNAHqDVmBe8i4fDidNd
oI6yqqr2jmmIBsX6iSHzCJ1pLgkzmykNRg+MzEk0sGlRvfkGzWitZky8PqxhvQqI
DsjfPe58BEydCl5rkdbux+0ojatNh4lz0G6k0B4WixThdkQDf2Os5M1JnMWS9Ksy
oUhbAgMBAAGjgbkwgbYwCwYDVR0PBAQDAgHGMA8GA1UdEwEB/wQFMAMBAf8wHQYD
VR0OBBYEFKFyXyYbKJhDlV0HN9WFlp1L0sNFMEQGA1UdHwQ9MDswOaA3oDWGM2h0
dHA6Ly9jcmwudXNlcnRydXN0LmNvbS9VVE4tVVNFUkZpcnN0LUhhcmR3YXJlLmNy
bDAxBgNVHSUEKjAoBggrBgEFBQcDAQYIKwYBBQUHAwUGCCsGAQUFBwMGBggrBgEF
BQcDBzANBgkqhkiG9w0BAQUFAAOCAQEARxkP3nTGmZev/K0oXnWO6y1n7k57K9cM
//bey1WiCuFMVGWTYGufEpytXoMs61quwOQt9ABjHbjAbPLPSbtNk28Gpgoiskli
CE7/yMgUsogWXecB5BKV5UU0s4tpvc+0hY91UZ59Ojg6FEgSxvunOxqNDYJAB+gE
CJChicsZUN/KHAG8HQQZexB2lzvukJDKxA4fFm517zP4029bHpbj4HR3dHuKom4t
3XbWOTCC8KucUvIqx69JXn7HaOWCgchqJ/kniCrVWFCVH/A7HFe7fRQ5YiuayZSS
KqMiDP+JJn1fIytH1xUdqWqeUQ0qUZ6B+dQ7XnASfxAynB67nfhmqA== 
-----END CERTIFICATE----- 
```

在人类可读的版本中：

```
Version: 3 (0x2)
Serial Number:
    44:be:0c:8b:50:00:24:b4:11:d3:36:2a:fe:65:0a:fd
Signature Algorithm: sha1WithRSAEncryption
Issuer: C=US, ST=UT, L=Salt Lake City, O=The USERTRUST Network, OU=http://www.usertrust.com, CN=UTN-USERFirst-Hardware
Validity
    Not Before: Jul  9 18:10:42 1999 GMT
    Not After : Jul  9 18:19:22 2019 GMT
Subject: C=US, ST=UT, L=Salt Lake City, O=The USERTRUST Network, OU=http://www.usertrust.com, CN=UTN-USERFirst-Hardware
Subject Public Key Info:
    [...]
X509v3 extensions:
    X509v3 Key Usage: 
        Digital Signature, Non Repudiation, Certificate Sign, CRL Sign
    X509v3 Basic Constraints: critical
        CA:TRUE
    X509v3 Subject Key Identifier: 
        A1:72:5F:26:1B:28:98:43:95:5D:07:37:D5:85:96:9D:4B:D2:C3:45
    X509v3 CRL Distribution Points: 

        Full Name:
          URI:http://crl.usertrust.com/UTN-USERFirst-Hardware.crl

    X509v3 Extended Key Usage: 
        TLS Web Server Authentication, IPSec End System, IPSec Tunnel, IPSec User 
```

本质上，我们这里有一个 CA 证书，其中包含`X509v3 Key Usage`和`X509v3 Extended Key Usage`.

但是，[RFC 3280 对扩展密钥使用扩展有以下说明](https://www.rfc-editor.org/rfc/rfc3280#section-4.2.1.13)：

> 一般来说，这个扩展只会出现在终端实体证书中。

这对于 CA 证书来说并不是很好，但后来，同一部分也这样说：

> 如果证书同时包含密钥使用扩展和扩展密钥使用扩展，则必须独立处理这两个扩展，并且证书必须仅用于与这两个扩展一致的目的。如果没有与两个扩展一致的目的，则证书不得用于任何目的。

此 RFC 中此证书中唯一的扩展密钥使用扩展是*TLS Web 服务器身份验证*：

```
 id-kp-serverAuth             OBJECT IDENTIFIER ::= { id-kp 1 }
   -- TLS WWW server authentication
   -- Key usage bits that may be consistent: digitalSignature,
   -- keyEncipherment or keyAgreement 
```

当然，这与`keyCertSign`RFC 3280（和 RFC 5280）不一致。（我也怀疑任何 IPSec 扩展都兼容`keyCertSign`）。这使得该证书无法颁发证书（对于 CA 证书不是很有用）。

我会使用此证书联系网站，要求他们联系他们的 CA（UTN-USERFirst-Hardware，显然是 Comodo）并要求他们解决这个问题。我必须说，靠这些 RFC 赚钱的人看起来并不好。

当然，这可能需要一段时间，并且不会解决您眼前的问题。

我想我已经在其他中间 CA 证书中看到了这个主题 DN（UTN-USERFirst-Hardware），所以上面的那个可能不是你正在使用的那个。

您可能能够做的（假设您能够手动验证服务器证书本身，尽管存在这些问题）是使用一个`SSLContext`并且`TrustManager`特别限制使用该证书，用于此连接。这可能会阻止证书路径算法尝试查找颁发者证书并陷入此问题。

**编辑：**

以下是有关此解决方法的更多详细信息（仍应确保您的连接安全）。

*   用 Firefox 连接到这个网站。
*   单击蓝色/绿色条并选择“更多信息...”
*   安全 -> 查看证书 -> 详细信息
*   从顶部的列表中选择服务器证书，然后选择“导出...”
*   在某处相同的 PEM 文件。

用于`keytool`创建新的密钥库（选择信任该证书并选择合理的密码）：

```
keytool -importcert -keystore example.jks -file example.pem 
```

然后，使用这个 Java 代码，移植到 Groovy 应该不会太难：

```
TrustManagerFactory tmf = TrustManagerFactory
    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
KeyStore ks = KeyStore.getInstance("JKS");
FileInputStream fis = new FileInputStream("/.../example.jks");
ks.load(fis, null);
// or ks.load(fis, "thepassword".toCharArray());
fis.close();

tmf.init(ks);

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(null, tmf.getTrustManagers(), null);

URL url = new URL("https://somewebsite.com");
HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
conn.setSSLSocketFactory(sslContext.getSocketFactory());

InputStream is = conn.getInputStream(); 
```

# windows-phone-7 - Windows Phone 7 应用栏，全局事件

> ID：10267969
> 
> 赞同：4
> 
> 时间：2012-04-22T12:34:19.740
> 
> 标签：windows-phone-7

我正在玩 windows phone 并考虑编写我的第一个 windows phone 7 应用程序。我为我的日常工作编写了 Windows 6.5 和 c# 代码。

到目前为止，一切进展顺利。相当简单，对于我遇到的大多数问题，都有一个教程。

我的问题是我已经实现了应用程序栏，并在许多视图上使用它。为了保持我的代码干燥，我不愿意在每个页面上创建事件。这会浪费开发人员的时间。

有没有解决的办法？我应该创建一个基类并从中继承吗？是 Xaml 模板吗？我应该把它吸起来并复制代码吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T13:35:01.303

如果要创建和重用 ApplicationBar，可以在 App.xaml 中创建为资源，并为 App.xaml.cs 文件和页面上的按钮的 Click 事件创建 EventHandler，只需引用该资源。

仅基于代码创建 ApplicationBar 的其他选项，在这种情况下，您可以在任何页面上调用全局函数来创建栏。

就个人而言，我会继续使用纯代码选项！

# haskell - 是否可以在 cabal 项目中编译“仅一个文件”？

> ID：10267970
> 
> 赞同：3
> 
> 时间：2012-04-22T12:34:55.767
> 
> 标签：haskell, ghc, cabal

在基于 JVM 的程序中，您可以将文件编译为 .class 文件并能够再次运行二进制文件，而不必编译所有文件。

有可能在haskell中做到吗？是否必须编译和链接项目中的所有文件？如果是，为什么？

如果没有二进制文件，你只是在安装一个库怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T12:49:37.240

对于 GHC，您可以更改和重新编译单个模块，而无需根据该模块重新编译模块，前提是公开的接口没有更改。GHC 的`--make`模式（从 ghc-7.* 开始默认）检查是否需要重新编译，并且只重新编译那些无法确定不需要的模块。

如果您有一个 cabal 包并且`cabal build`在更改了一个模块之后，您可以从编译器输出中看到它通常不会重新编译包中的所有模块，只有更改的模块和 [也许] 依赖于它的模块。

如果您构建一个可执行文件，当然必须重新链接它，但许多旧的目标文件可以重用。

如果你建立一个库，当然必须重建库档案，但许多旧的目标文件可以重复使用。

# java - Android状态栏通知未加载

> ID：10267971
> 
> 赞同：0
> 
> 时间：2012-04-22T12:35:09.907
> 
> 标签：java, android

我希望这个问题只是与模拟器有关，基本上我有一个设置计时器的服务，只要 timertask 运行以下代码应该执行：

```
 String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager)getSystemService(ns);

        int icon = R.drawable.androidapplogo;
        CharSequence tickerText = "Ticker Text";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);
        Context context = getApplicationContext();
        CharSequence contentTitle = "My Notification";
        CharSequence contentText = "Hello World!";          

        //Do i need this?
        Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(ctx, 0, notificationIntent, 0);         

        notification.setLatestEventInfo(context, contentTitle, contentText, null);
        mNotificationManager.notify(1, notification); 
```

我遇到的问题是，当通知被调用时，它会出现在状态栏中，但是当我点击图标时，它只有一个蓝色圆圈。我没有安卓手机，所以我猜这意味着它试图加载一些东西。

顺便说一句，我几乎从这里提升了代码：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

所以我的问题有两个方面： - 发生了什么，是否无法加载某些内容？- 关于如何修复它的任何想法，或者是否值得寻找一种新的通知形式

编辑：对不起，伙计们，发现问题是您需要向下拖动通知窗口-我很少使用 android x)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:12:41.067

```
package com.androidtest.notification;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SimpleNotification extends Activity {

    private NotificationManager mNotificationManager;
    private int SIMPLE_NOTFICATION_ID;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        final Notification notifyDetails = new Notification(R.drawable.android,
                "New Alert, Click Me!", System.currentTimeMillis());

        Button start = (Button) findViewById(R.id.notifyButton);
        Button cancel = (Button) findViewById(R.id.cancelButton);

        start.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Context context = getApplicationContext();
                CharSequence contentTitle = "TITLES....";
                CharSequence contentText = "TEXT FOR DETAIL";
                Intent notifyIntent = new Intent(
                        android.content.Intent.ACTION_VIEW, Uri
                                .parse("CONTACT NO / OR ANY OTHER ACTION WHICH YOU WANT ON NOTIfic. ICON TAP"));
                PendingIntent intent = PendingIntent.getActivity(
                        SimpleNotification.this, 0, notifyIntent,
                        android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

                notifyDetails.setLatestEventInfo(context, contentTitle,
                        contentText, intent);
                mNotificationManager.notify(SIMPLE_NOTFICATION_ID,
                        notifyDetails);
            }
        });

        cancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                mNotificationManager.cancel(SIMPLE_NOTFICATION_ID);
            }
        });
    }
} 
```

XML 测试文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <Button
        android:id="@+id/notifyButton"
        android:text="@string/notify"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
    ></Button>
    <Button
        android:id="@+id/cancelButton"
        android:text="@string/cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"      
    ></Button>
</LinearLayout> 
```

待定意图调用通知点击的某些意图..gve ans frm whtevr 我了解您的任务，如果代码有任何问题，请发表评论...

# android - 当继续从横向移动到纵向并将值从一个活动发送到另一个活动时，应用程序关闭

> ID：10267979
> 
> 赞同：0
> 
> 时间：2012-04-22T12:36:30.567
> 
> 标签：android, tabview, landscape-portrait

当我不断从横向移动到纵向时，我的应用程序会突然关闭而没有任何通知，反之亦然，从一个活动向另一个活动发送值时，我也会遇到同样的错误。这是我从 LogCat 得到的一些错误：

> 从不断移动的风景和肖像中记录

```
04-22 20:23:31.110: E/dalvikvm-heap(6275): 5891496-byte external allocation too large for this process.
04-22 20:23:31.120: E/dalvikvm(6275): Out of memory: Heap Size=5639KB, Allocated=3205KB, Bitmap Size=22062KB, Limit=32768KB
04-22 20:23:31.120: E/dalvikvm(6275): Trim info: Footprint=5639KB, Allowed Footprint=5639KB, Trimmed=496KB
04-22 20:23:31.120: E/GraphicsJNI(6275): VM won't let us allocate 5891496 bytes 
```

> 记录不断从一个活动发送值到另一个活动

```
04-22 21:57:04.497: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 19K, 47% free 2901K/5379K, external 1151K/1663K, paused 24ms
04-22 21:57:04.647: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 85K, 45% free 2960K/5379K, external 2320K/2875K, paused 24ms
04-22 21:57:04.807: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 2K, 45% free 2960K/5379K, external 8073K/10082K, paused 23ms
04-22 21:57:04.927: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4053a410
04-22 21:57:04.937: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@405316d0
04-22 21:57:04.937: D/WindowManagerImpl(9570): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40515820
04-22 21:57:05.227: D/WindowManagerImpl(9570): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40522768
04-22 21:57:06.158: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:06.158: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:06.238: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4054e1f0
04-22 21:57:06.529: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:06.529: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:06.549: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40559870
04-22 21:57:07.019: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 83K, 45% free 3035K/5447K, external 13863K/15875K, paused 25ms
04-22 21:57:07.129: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:07.129: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:07.149: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40552178
04-22 21:57:07.289: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:07.289: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:07.369: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 34K, 44% free 3058K/5447K, external 12711K/14759K, paused 26ms
04-22 21:57:07.600: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40534f78
04-22 21:57:08.050: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:08.050: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:08.050: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4053da60
04-22 21:57:08.421: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:08.421: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:08.431: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4055caf0
04-22 21:57:08.771: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:08.771: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:08.841: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 55K, 44% free 3092K/5447K, external 18465K/18465K, paused 24ms
04-22 21:57:09.091: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40530708
04-22 21:57:09.201: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 9K, 44% free 3093K/5447K, external 24218K/24218K, paused 24ms
04-22 21:57:09.321: D/dalvikvm(9570): GC_FOR_MALLOC freed <1K, 44% free 3092K/5447K, external 24218K/24218K, paused 17ms
04-22 21:57:09.341: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:09.341: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:09.351: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4055df78
04-22 21:57:09.542: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:09.542: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:09.542: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40566488
04-22 21:57:09.692: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 70K, 44% free 3098K/5511K, external 24218K/24218K, paused 30ms
04-22 21:57:09.812: D/dalvikvm(9570): GC_FOR_MALLOC freed 5K, 44% free 3093K/5511K, external 24218K/24218K, paused 17ms
04-22 21:57:09.872: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:09.872: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:09.882: D/ATRecorder(9570): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4054bd48
04-22 21:57:10.312: D/View(9570): onTouchEvent: viewFlags: 0x18004081
04-22 21:57:10.312: D/View(9570): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-22 21:57:10.412: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed 51K, 44% free 3099K/5511K, external 24218K/24218K, paused 24ms
04-22 21:57:10.533: D/dalvikvm(9570): GC_FOR_MALLOC freed 3K, 44% free 3096K/5511K, external 24218K/24218K, paused 17ms
04-22 21:57:10.613: D/dalvikvm(9570): GC_EXTERNAL_ALLOC freed <1K, 44% free 3097K/5511K, external 24218K/24218K, paused 28ms
04-22 21:57:10.613: E/dalvikvm-heap(9570): 5891496-byte external allocation too large for this process.
04-22 21:57:10.613: E/dalvikvm(9570): Out of memory: Heap Size=5511KB, Allocated=3097KB, Bitmap Size=24218KB, Limit=32768KB
04-22 21:57:10.613: E/dalvikvm(9570): Trim info: Footprint=5511KB, Allowed Footprint=5511KB, Trimmed=448KB
04-22 21:57:10.613: E/GraphicsJNI(9570): VM won't let us allocate 5891496 bytes 
```

这是我发送值时的代码：result.java

```
public class result extends Activity {
      public static String destination = ""; 
```

搜索.java

```
public void setButtonClickListener() {
    Button searchButton = (Button)findViewById(R.id.buttonSearch);
    searchButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
              result.destination = textView.getText().toString();
              TabHost tabHost =  (TabHost) getParent().findViewById(android.R.id.tabhost);
              tabHost.setCurrentTab(0);
        }
        });
} 
```

我的应用程序正在使用具有三种不同活动的选项卡视图。我还使用 .jpg 作为背景，标签内有一个图像视图。我已经阅读了[External allocation too large for this process in Android 的](https://stackoverflow.com/q/4193917/1346016)答案，但我并没有完全理解。有人能以更简单的方式告诉我如何处理吗？或者我应该在哪里寻找答案？

> 对于发送值内存问题，我认为可能的问题在于标签之间的移动，因为当我继续在标签之间移动时，也会出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:39:28.710

在清单文件中为活动添加这些行:::

```
<activity
        android:configChanges="keyboardHidden|orientation"
        android:name=".Activity"> 
```

# javascript - 如何从多维数组中填充列表框（组合框）？

> ID：10267982
> 
> 赞同：0
> 
> 时间：2012-04-22T12:36:47.950
> 
> 标签：javascript, arrays

我是 JavaScript 的学生，今晚我们有一个作业要交。我一直在工作，并重新工作，代码。

本质上，我正在努力从多维数组中填充列表框（组合框）。

我创建了一个多维数组并且它可以工作（我将结果发送到警报框）。

```
var concertArray = [
        ["Billy Joel", "99", "equal.png"],
        ["Bryan Adams", "89", "higher.png"],
        ["Brian Adams", "25", "lower.png"]

        ]; 
```

但是，我不知道如何将此数组填充到选择列表框（组合框）中。

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:15:27.647

使用本准则。

```
<html>

    <head>
     <script type="text/javascript">
        var concertArray = [
            ["Billy Joel", "99", "equal.png"],
            ["Bryan Adams", "89", "higher.png"],
            ["Brian Adams", "25", "lower.png"]
            ];

            function populate(){

                for(i=0;i<concertArray.length;i++){
                    var select = document.getElementById("test");
                    select.options[select.options.length] = new Option(concertArray[i][0], concertArray[i][1]);
                }

            }
        </script>
        </head>

    <body onload="populate();">
        <select id="test">
        </select>
    </body>     
</html> 
```

这将帮助你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:42:52.313

从数组中提取要添加到组合框中的数据，然后`jquery append`将它们添加到选择标签中。

```
<select id="test">
</select> 
```

遍历数组并将要添加的数据存储在变量中，例如 var data，然后：

```
$('#test').append('<option value="'+data+'">'+data+'</option'); 
```

# php - 由 innerJoin/leftJoin 返回的五行/记录/数组作为一行/记录/数组 - php

> ID：10267985
> 
> 赞同：0
> 
> 时间：2012-04-22T12:37:26.793
> 
> 标签：php, left-join, inner-join

我有表：课程和表：会话。А 课程可能有多个会话（例如 5 个会话）。我必须做什么（也许在 PHP 中）才能将这 5 条记录和会话转换为一个记录/数组？我试过 array_merge() 和 array_merge recursively()，但没有成功。

如果您需要我收到的确切数据/行/记录/数组，我会发布它们。

谢谢。

编辑：

```
public function getCourses($dateFrom, $dateTo)
{
$select = $this->_dbTableCourseTimetables->select()->setIntegrityCheck(false); 
$select->from(array('a' => 'course_timetables'), 'a.id_course_timetables'); 
$select->where('b.start_time >= ?', $dateFrom);
$select->where('b.end_time <= ?', $dateTo);
$select->where('b.isActive >= ?', 'yes');
$select->joinInner(array('b' => 'course_sessions'), 'a.id_course_timetables =  b.id_course_timetables', 'b.id_course_sessions');
echo $select;
return $this->_dbTableCourseTimetables->fetchAll($select)->toArray();
} 
```

这是我的 Zend 查询，它产生以下 SQL：

`SELECT a.id_course_timetables, b.id_course_sessions FROM course_timetables AS a INNER JOIN course_sessions AS b ON a.id_course_timetables = b.id_course_timetables WHERE (b.start_time >= '1332745200') AND (b.end_time <= '1333350000') AND (b.isActive >= 'yes')`

如果我执行它。它返回：

```
id_course | id_course_sessions
--------- ----------------- 
303       533 
303       534  
303       532 
304       535 
```

当我遍历 foreach() 时，它呈现给我四个项目。我其实想要两个项目，因为课程只有两个。希望这是有道理的。谢谢。

PS多么令人难以置信的编辑器....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:43:50.290

你可以做这样的实现。

```
$array = array();

foreach($your_Result_array as $k => $v) {
      if (empty($array[$k])) {
        $array[$k] = array($v);
      } else {
        array_push($array[$k], array($v));
      }
}

var_dump($array);

//Your array will be like [303] => array(534, 532, 533), [304] = array(535) 
```

希望这可以帮助

# php - 使用 ZVAL_STRING 避免 PHP 引擎崩溃

> ID：10267990
> 
> 赞同：0
> 
> 时间：2012-04-22T12:38:09.257
> 
> 标签：php, c, windows, linux

在扩展中，如何避免我自己分配zval字符串时php引擎崩溃？

```
..
// will do implicitly ZVAL_STRING("tmp", "/tmp", 0); 
// 
SET_VAR_STRING("tmp", "/tmp");
..

php_embed_shutdown(TSRMLS_C);   // GPF !! 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:54:22.183

将其更改为：

```
SET_VAR_STRING("tmp", estrdup("/tmp")); 
```

# c# - 创建期间的 C# ActiveX 错误

> ID：10267991
> 
> 赞同：0
> 
> 时间：2012-04-22T12:38:10.673
> 
> 标签：c#, activex

我遇到了以下问题：

我有一个 ActiveX 控件，在开发机器上它按预期工作，当尝试在其他机器上创建它时，我收到以下错误

```
Error: The system cannot find the file specified. 
```

我正在使用以下行来创建它：

```
 var activeX = new ActiveXObject("ScannerViewerControl.ScannerViewer"); 
```

我使用 installshield 进行部署，并标记了 .NET Com Interop。

我能够在 HKEY_CLASSES_ROOT 下的 .dll 的注册表路径中找到。

我错过了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:40:26.727

您可能缺少客户端计算机上的 active-x DLL 的依赖项。根据您安装的 VS 版本，您可能有一个名为 depends 的工具，您可以将其指向 DLL 并查看所需的依赖项。

# vb.net - 如何使用图片框使用 vb.net 在 sql server 数据库中存储和检索图像

> ID：10267993
> 
> 赞同：0
> 
> 时间：2012-04-22T12:38:33.420
> 
> 标签：vb.net

有人可以告诉我使用 vb.net 在 SQL Server 数据库中存储和检索图像的最简单技术。

一个非常重要的考虑要求：

嗯，vb.net 中的应用程序似乎有一个可以由 LAN 计算机访问的数据库，因此 SQL Server 2005 数据库允许远程计算机在其他计算机应用程序从服务器请求数据库时共享其数据库。

因此，每台其他计算机都必须在 SQL Server 2005 中存储和检索图像。例如，comp1 必须将获取的图像存储到服务器中并像 tableadapter 一样检索它。

我正在使用绑定和表适配器将详细信息存储在数据库中并从数据库中检索信息。如果您有代码或任何对我有用的东西，请在此处发布...

如果有局域网计算机也共享 SQL Server 数据库，请与我分享如何通过 vb.net 存储图像和检索 SQL Server。

拜托，如果有人知道这方面的知识，我将不胜感激。

我全心全意地请求您考虑我的问题。

此致，

侯赛内尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:57:54.003

让我们有一个包含图像的表格（而不是您可以使用所需大小的最大值）：

```
CREATE TABLE dbo.STORED_IMAGES
     (
     ID int NOT NULL  IDENTITY (1, 1),
     Img varbinary(MAX) NULL
     ) 
```

存储图像：

```
Dim CMD As New SqlClient.SqlCommand("insert into STORED_IMAGES(Img) values(@Img)",cn)
CMD.Parameters.Add("@Img", SqlDbType.VarBinary, Integer.MaxValue).Value = ReadFile(Path) 
```

读取文件功能：

```
Private Function ReadFile(sPath As String) As Byte()
        Dim data As Byte() = Nothing
        Dim fInfo As New IO.FileInfo(sPath)
        Dim numBytes As Long = fInfo.Length
        Using fStream As New IO.FileStream(sPath, IO.FileMode.Open, IO.FileAccess.Read)
            Dim br As New IO.BinaryReader(fStream)
            data = br.ReadBytes(CInt(numBytes))
        End Using
        Return data
    End Function 
```

从数据库获取文件：

```
Dim fcmd As New SqlCommand("select Img from STORED_IMAGES where ID=@ID", cn)
fcmd.Parameters.Add("@ID", SqlDbType.Int).Value = 3 'e.g.
Dim bytes As Byte() = fcmd.ExecuteScalar 
```

我想使用表格适配器，您的数据表将包含字节（）类型的列。