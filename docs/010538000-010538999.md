# StackOverflow 问答 10538000-10538999

# php - if 语句不适用于数据库

> ID：10538000
> 
> 赞同：-3
> 
> 时间：2012-05-10T16:05:18.363
> 
> 标签：php

为什么这段代码不起作用？

```
$welcome = mysql_query("SELECT welcome FROM users WHERE id = '" . $_SESSION['user']['id'] . "'");

if($welcome == '0')
{
echo 'register is 0';
}
else
{
echo 'register is 1';
} 
```

`$_SESSION['user']['id']`顺便说一句，返回为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:09:33.550

MySQL 成功返回[资源](http://www.php.net/manual/en/language.types.resource.php)，错误返回 false，而不是查询中的值。尝试这个：

```
$welcome = mysql_query("SELECT welcome FROM users WHERE id = '" . $_SESSION['user']['id'] . "'");
$row = mysql_fetch_assoc($welcome);
if($row['welcome']== '0')
{
echo 'register is 0';
}
else
{
echo 'register is 1';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:10:33.837

你不应该这样构建你的查询，因为你不会受到 SQL 注入攻击的保护。

```
$query = sprintf("SELECT welcome FROM users WHERE id = %d", $_SESSION['user']['id']);
// Perform Query
$result = mysql_query($query); 
```

一旦完成，您就需要从结果中获取，您不能只查询它。

```
if(!$result)
  echo "Error"; // Deal with it
$row = mysql_fetch_assoc($result);
echo $row['welcome'];
mysql_free_result($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:54:04.940

根据 MySQL 文档，如果 select 语句成功，则返回资源，如果语句失败，则返回“false”。
尽管有更好、更安全的方法来实现您想要完成的目标，但您的陈述可以简单地修改为：

```
如果（$欢迎 === 假）
{
  echo '寄存器为 0';
}
别的
{
  echo '寄存器为 1';
}

```

这会起作用，但正如我之前所说，整个代码需要更新到更安全的版本。

# jquery - 拖放javascript mvc

> ID：10538002
> 
> 赞同：1
> 
> 时间：2012-05-10T16:05:27.970
> 
> 标签：jquery, javascriptmvc

我正在尝试在 javascriptmvc 中创建拖放树，我使用 $.Drag 和 $.Drop JQueryMX 特殊事件。我制作了一个拖放控制器，如果我将所有事件（draginit，dragmove，dropinit，dropend，...）放在我的 init 方法中没有问题，但我有很多事件，我需要听拖动-drop 类似 taht 的事件：

```
".draggable draginit":function(event,drag){
   // drag init treatements 
},
".droppable dropinit":function(event,drop,drag){
  // drop init treatements 
} 
```

我可以用本地事件来做到这一点，比如（点击，鼠标悬停，...）

```
".class click":function(event){
// 
} 
```

有人有这方面的经验吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:17:38.203

您可能需要将事件添加到控制器的[静态 listensTo 数组](http://javascriptmvc.com/docs.html#&who=jQuery.Controller.static.listensTo)中。

```
$.Controller('TabPanel',{
  listensTo : ['draginit']
},{
  '.draggable draginit' : function(){
  }
}); 
```

如果由于某种原因这不起作用，您可以为事件添加自定义[处理器](http://javascriptmvc.com/docs.html#!jQuery.Controller.static.processors)。

# objective-c - 使用 NSPredicate 过滤 NSMutableArray

> ID：10538004
> 
> 赞同：0
> 
> 时间：2012-05-10T16:05:31.077
> 
> 标签：objective-c, cocoa, core-data, nsdate, nspredicate

我从核心数据中获取记录并填充`NSMutableArray`它们，现在我想用下面的代码过滤它们但不能正常工作。我应该怎么做？

```
[array filterUsingPredicate:[NSPredicate predicateWithFormat:@"date==%@",date1 ]];
//date = a field with format NSDate in core data
//date1 = NSDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:09:09.437

你为什么不在你的 NSFetchRequest 中使用谓词并保持 NSArray 只填充你需要的记录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:58:29.450

也许是因为您输入了带有时间的日期，并且当您想要过滤数组时`date1`，时间`date1`不等于您存储在核心数据中的日期

查看此代码并输入没有时间的日期

```
NSDate *dateTime=[NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
NSDateComponents *components = [[NSDateComponents alloc] init];
components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                         fromDate:dateTime];
NSDate *dateOnly = [calendar dateFromComponents:components]; 
```

# java - 为什么在类声明中“扩展”在“实现”之前

> ID：10538010
> 
> 赞同：49
> 
> 时间：2012-05-10T16:05:49.060
> 
> 标签：java, extends, implements

为什么必须`implement`总是写`extend`在类声明之后？例如：

```
public class Register extends ActionSupport implements ModelDriven 
```

为什么不能：

```
public class Register implements ModelDriven extends ActionSupport 
```

后者会产生编译时错误。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-05-10T16:13:01.753

当 Java 编译器将类转换为字节码时，它必须首先查找父类。那是因为类的底层实现是指向父类的字节码——它包含相关的方法和字段。然后它添加指向子类函数代码的指针——其中一些是由'implements'关键字强制执行的。

因为父类必须是可编译的，所以如果编译器预先知道该类是什么会更容易。此外，您只能扩展一个类，但可以实现任意数量的接口。如果可以在任意数量的实现指令中混合使用 extends 关键字，则编译时间会增加。编译器希望尽快失败以减少开发时间，因此这种选择是合乎逻辑的。此外，出于同样的原因，它可以帮助您清楚地思考课程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T16:07:34.073

可能是为了使编译器的工作更容易。这只是一个约定。能够重新排列这些东西没有任何优势。

这就像在问为什么 Java 函数不是以`public int (int a, int b)add{ return a+b; }`.

# c# - C# XNA 4.0 矩形旋转碰撞

> ID：10538018
> 
> 赞同：0
> 
> 时间：2012-05-10T16:06:19.470
> 
> 标签：c#, xna, collision

我可以轻松地旋转我的精灵，但是如何旋转我的矩形以进行碰撞（考虑使用分离轴定理，但我不知道如何应用它）帮助或示例将不胜感激:)

**游戏1类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace CombatTank
{

public class Game1 : Microsoft.Xna.Framework.Game
{
    //Declare Graphic Manager & Spritebatch
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    //Declare Player 1
    theBody player1TankBody;

    //Declare Player 2
    theBody player2TankBody;

    //Save Player 1 Position
    Vector2 savedPlayer1TankBodyPosition;

    //Save Player 2 Position
    Vector2 savedPlayer2TankBodyPosition;

    //Declare Keyboard States
    KeyboardState currentkeyboardState;
    KeyboardState previousKeyboardState;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        //TankBody Position Player 1
        Vector2 player1TankBodyPosition = new Vector2(200, 200);
        Vector2 player2TankBodyPosition = new Vector2(400, 200);

        //TankBody Scale 
        float player1TankBodyScale = 1.0F;
        float player2TankBodyScale = 1.0F;

        //TankBody Rotation
        float player1TankBodyRotation = 0.0F;
        float player2TankBodyRotation = 0.0F;

        //TankBody Color
        Color player1TankBodyColor = Color.Red;
        Color player2TankBodyColor = Color.Blue;

        //Create Tank
        player1TankBody = new theBody(player1TankBodyPosition,player1TankBodyScale, player1TankBodyRotation, player1TankBodyColor);
        player2TankBody = new theBody(player2TankBodyPosition, player2TankBodyScale, player2TankBodyRotation, player2TankBodyColor);

        base.Initialize();
    }

    protected override void LoadContent()
    {
        //Create New SpriteBatch
        spriteBatch = new SpriteBatch(GraphicsDevice);

        //Load The Player 1 TankBody Texture
        Texture2D player1SpriteTankBody = Content.Load<Texture2D>("TankBody");
        player1TankBody.LoadContent(Content,"TankBody");

        //Extract Collision Data For Player 1
        player1TankBody.TankBodyTextureData = new Color[player1TankBody.Texture.Width * player1TankBody.Texture.Height];
        player1TankBody.Texture.GetData(player1TankBody.TankBodyTextureData);

        //Load The Player 2 TankBody Texture
        Texture2D player2SpriteTankBody = Content.Load<Texture2D>("TankBody");
        player2TankBody.LoadContent(Content, "TankBody");

        //Extract Collision Data For Player 2
        player2TankBody.TankBodyTextureData = new Color[player2TankBody.Texture.Width * player2TankBody.Texture.Height];
        player2TankBody.Texture.GetData(player2TankBody.TankBodyTextureData);

    }

    protected override void UnloadContent()
    {

    }

    protected override void Update(GameTime gameTime)
    {
        //Save Player 1 Postion
        savedPlayer1TankBodyPosition.X = player1TankBody.Position.X;
        savedPlayer1TankBodyPosition.Y = player1TankBody.Position.Y;

        //Save Player 2 Position
        savedPlayer2TankBodyPosition.X = player2TankBody.Position.X;
        savedPlayer2TankBodyPosition.Y = player2TankBody.Position.Y;

        //Updates Player 1
        UpdatePlayer1(gameTime);

        //Update Player 2
        UpdatePlayer2(gameTime);

        //Collision Player 1
        CollisionPlayer1(gameTime);

        //Collision Player 2
        CollisionPlayer2(gameTime);

        base.Update(gameTime);
    }

    private void UpdatePlayer1(GameTime gameTime)
    {
        //Save the previous state of the keyboard
        previousKeyboardState = currentkeyboardState;

        //Read the current state of the keyboard
        currentkeyboardState = Keyboard.GetState();

        //TankBody Movement
        if (currentkeyboardState.IsKeyDown(Keys.W))
        {
            //Move Tank Forward
            player1TankBody.Position.X -= 5 * (float)Math.Cos(player1TankBody.Rotation);
            player1TankBody.Position.Y -= 5 * (float)Math.Sin(player1TankBody.Rotation);
        }
        if (currentkeyboardState.IsKeyDown(Keys.S))
        {
            //Move Tank Backwards
            player1TankBody.Position.X += 5 * (float)Math.Cos(player1TankBody.Rotation);
            player1TankBody.Position.Y += 5 * (float)Math.Sin(player1TankBody.Rotation);

        }
        if (currentkeyboardState.IsKeyDown(Keys.A))
        {
            player1TankBody.Rotation -= 0.03f;
        }
        if (currentkeyboardState.IsKeyDown(Keys.D))
        {
            player1TankBody.Rotation += 0.03f;
        }

    }

    private void UpdatePlayer2(GameTime gameTime)
    {
        //Save the previous state of the keyboard
        previousKeyboardState = currentkeyboardState;

        //Read the current state of the keyboard
        currentkeyboardState = Keyboard.GetState();

        //TankBody Movement
        if (currentkeyboardState.IsKeyDown(Keys.Up))
        {
            //Move Tank Forward
            player2TankBody.Position.X -= 5 * (float)Math.Cos(player2TankBody.Rotation);
            player2TankBody.Position.Y -= 5 * (float)Math.Sin(player2TankBody.Rotation);
        }
        if (currentkeyboardState.IsKeyDown(Keys.Down))
        {
            //Move Tank Backward
            player2TankBody.Position.X += 5 * (float)Math.Cos(player2TankBody.Rotation);
            player2TankBody.Position.Y += 5 * (float)Math.Sin(player2TankBody.Rotation);
        }
        if (currentkeyboardState.IsKeyDown(Keys.Left))
        {
            player2TankBody.Rotation -= 0.03f;
        }
        if (currentkeyboardState.IsKeyDown(Keys.Right))
        {
            player2TankBody.Rotation += 0.03f;
        }

    }

    private void CollisionPlayer1(GameTime gameTime)
    {

        if (IntersectPixels(player1TankBody.BoundingBox, player1TankBody.TankBodyTextureData, player2TankBody.BoundingBox, player2TankBody.TankBodyTextureData))
        {
            player1TankBody.Position.X = savedPlayer1TankBodyPosition.X;
            player1TankBody.Position.Y = savedPlayer1TankBodyPosition.Y;

        }

    }

    private void CollisionPlayer2(GameTime gameTime)
    {
        if (IntersectPixels(player2TankBody.BoundingBox, player2TankBody.TankBodyTextureData, player1TankBody.BoundingBox, player1TankBody.TankBodyTextureData))
        {
            player2TankBody.Position.X = savedPlayer2TankBodyPosition.X;
            player2TankBody.Position.Y = savedPlayer2TankBodyPosition.Y;

        }
    }

    static bool IntersectPixels(Rectangle rectangleA, Color[] dataA, Rectangle rectangleB, Color[] dataB)
    {
        //Find top Bound of the Rectangle
        int top = Math.Max(rectangleA.Top, rectangleB.Top);
        int bottom = Math.Min(rectangleA.Bottom, rectangleB.Bottom);
        int left = Math.Max(rectangleA.Left, rectangleB.Left);
        int right = Math.Min(rectangleA.Right, rectangleB.Right);

        for (int y = top; y < bottom; y++)
        {
            for (int x = left; x < right; x++)
            {
                //Get Color of both Pixels
                Color colorA = dataA[(x - rectangleA.Left) + (y - rectangleA.Top) * rectangleA.Width];
                Color colorB = dataB[(x - rectangleB.Left) + (y - rectangleB.Top) * rectangleB.Width];

                //Both pixel are not completely Transparent
                if (colorA.A != 0 && colorB.B != 0)
                {
                    //Then an intersection is found 
                    return true;
                }

            }

        }

        //No Intersection
        return false;
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();

        player1TankBody.Draw(spriteBatch);
        player2TankBody.Draw(spriteBatch);

        spriteBatch.End();

        base.Draw(gameTime);
    }
}
} 
```

**身体类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Storage;
using Microsoft.Xna.Framework.Content;

namespace CombatTank
{
class theBody
{
    //TankBody Texture
    private Texture2D texture;
    public Texture2D Texture
    {
        get
        { 
            return texture; 
        }
    }

    //TankBody Height
    private float height;
    public float Height
    {
        get
        {
            return height;
        }
    }

    //TankBody Width
    private float width;
    private float Width
    {
        get
        {
            return width;
        }

    }

    //TankBody Position
    public Vector2 Position;

    //TankBody Origin
    public Vector2 Origin;

    //TankBody Rotation
    public float Rotation = 0.0F;

    //TankBody Color
    public Color Color = Color.White;

    //TankBody Scale
    public float Scale = 1F;

    //TankBody BoundingBox
    public Rectangle BoundingBox
    {
        get
        {
            return new Rectangle((int)Position.X, (int)Position.Y, (int)texture.Width, (int)texture.Height);
        }
    }

    //TankBody color Data(Used For Pixel Collision)
    public Color[] TankBodyTextureData;

    //TankBody Constructor
    public theBody(Vector2 position,float scale,float rotation, Color color)
    {
        Position = position;
        Scale = scale;
        Rotation = rotation;
        Color = color;
    }

    //LoadContent
    public void LoadContent(ContentManager contentManager, string assetname)
    {
        texture = contentManager.Load<Texture2D>(assetname);
        Origin = new Vector2(Texture.Width / 2, Texture.Height / 2);
    }

    //Draw
    public virtual void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, Position, null, Color, Rotation, Origin, Scale, SpriteEffects.None, 0);
    }

    //Update
    public void Update(GameTime gameTime)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:42:21.083

除非这是学习如何编写物理引擎的实践，否则我建议使用免费的 2D 碰撞/物理库而不是重新发明轮子；我想到了[Box2D 。](http://code.google.com/p/box2dx/)

刚刚注意到您正在尝试根据透明度在它们的纹理之间进行逐像素碰撞。现代游戏（即使是非常小的游戏）基于凸面进行碰撞和物理处理，这使您可以获得更复杂的影响结果（如果两个像素命中，那么正常情况是什么？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T22:04:54.153

I understand in your question that you are using AABBs, and now you are trying to rotate the sprites, so now you need to rotate the AABB (That is, a OBB).

If Im not wrong and that is your case, one approach is what you suggested: SAT. But another approach is to use AABBs:

Note that an OBB its only an AABB defined in its own coordinate system (The optimal coordinate system that fits the AABB better to the object). You have two OOBBs (A and B), so you have two AABBs in two coordinate systems.

Get the AABB of **B**, and compute its AABB in the coordinate system of **A** (We can call this new AABB ***"C"***). Check **C** and the AABB of **A** collision. Now do the same in reverse order (**A**'s AABB in coordinate system of **B** (We call this new AABB ***"D"***), and check collision with **B**'s AABB).

If the two checks gets collision, the OBBs are in collision. See the picture:

![enter image description here](../Images/bcebda8387925d561ff52fb4b2a24004.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T23:49:58.773

我还没有看过你的代码，但是这里有一个很好的[教程](http://gamedev.tutsplus.com/tutorials/implementation/collision-detection-with-the-separating-axis-theorem/)，它用示例代码解释了 SAT。它不是 C#，但很容易转换；）

# ios - 如何使用 IOS 调试器检查子视图属性

> ID：10538022
> 
> 赞同：0
> 
> 时间：2012-05-10T16:06:30.063
> 
> 标签：ios, debugging

Xcode 中的调试器窗口向您显示当前范围内的局部变量的值（例如，如果您是单步执行）。但是假设我想检查子视图中的属性（例如，一个 UIScrollView 实例/属性，如 self.scrollview.zoomScale）？

我尝试在调试器窗口中的“self”变量下进行目测，但找不到实例化的 UIScrollView。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:29:11.580

在调试窗口中尝试以下操作：

```
po self.scrollview.zoomScale 
```

或者在你的情况下：

```
p self.scrollview.zoomScale 
```

如果什么都没有，只需`NSLog`输出 zoomScale 的值。

# php - 在 PHP 中将 MySql 数据库记录转换为 XML

> ID：10538027
> 
> 赞同：0
> 
> 时间：2012-05-10T16:06:44.913
> 
> 标签：php, mysql

我的 PHP 脚本正在调用 MySQL 并获取大量记录。PHP 中是否有将 SQL 数据库记录转换为 XML 的函数/库？就像是`myDBRecords.ToXML()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:46:50.537

您可能想要类似[XML_Serializer](http://pear.php.net/package/XML_Serializer)的东西。它将采用几乎任何 PHP 数据结构并返回一些 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:20:51.677

命令行允许做

```
shell> mysql --xml -uroot -e "SHOW VARIABLES LIKE 'version%'" 
```

我不知道是否可以在 SELECT 语句上复制此行为

更多信息在：

[http://dev.mysql.com/doc/refman/5.0/en/mysql-command-options.html#option_mysql_xml](http://dev.mysql.com/doc/refman/5.0/en/mysql-command-options.html#option_mysql_xml)

其他方法是使用自定义类，例如：

[http://px.sklar.com/code.html/id=229](http://px.sklar.com/code.html/id=229)

# git - 完成后如何取消对 GitHub 的推送

> ID：10538028
> 
> 赞同：0
> 
> 时间：2012-05-10T16:06:47.563
> 
> 标签：git, github, push

对于有 Git 经验的人来说，这可能是一个简单的问题，但是当我在谷歌上搜索这些词时，我总是会得到关于推送到 GitHub 问题的*页面。*我有完全相反的问题：我推了我不应该推的东西。

我在 GitHub 上创建了一个开源项目的公共存储库，创建了它的本地克隆，对其进行了处理，然后将我的更改提交并推送到我在 GitHub 上的分支存储库中。

不知何故，GitHub 上的差异完全搞砸了，让我增加了 700 行和删除了 700 行（可能是因为缩进），所以我想取消我所做的推送，再次进行更改，注意缩进，然后再次提交并推送*复制到我的分叉存储库的原始版本*。

我不会用我做过的数十次试验以及我设法获得的各种结果来打扰你。问题是：如果你有这个问题，你会怎么解决？

谢谢杜乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:09:49.217

如果您的本地存储库处于正确状态（可能是交互式 rebase 以删除有问题的提交？），您应该能够强制推送到 GitHub：

`git push -f origin <branchname>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:09:39.357

只需`git push --force origin`从本地存储库的正确状态开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:16:59.940

如果您不列出提交，我无法给您确切的行。但是你使用强制推动改变回来。

`git push -f origin oldcomitSHA1:branchname`

哦，顺便说一句，你之后所做的所有事情都会让事情变得更糟。不要问我怎么知道的。

# sqlalchemy - py2app的SQLAlchemy mysql方言错误

> ID：10538032
> 
> 赞同：1
> 
> 时间：2012-05-10T16:06:52.213
> 
> 标签：sqlalchemy, pyqt, py2app

通过 py2app 后，我无法让 SQLAlchemy 与我编译的应用程序一起工作。我已经在 Windows 中使用 py2exe 成功完成了这项工作。以下是我的设置文件：

```
APP = ['Blah.py']
DATA_FILES = []
OPTIONS = {'argv_emulation': True,
           'includes': ['sip',
                        'PyQt4._qt',
                        'sqlalchemy.dialects.mysql',
                        'MySQLdb',
                        "gzip"]
           }

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

这似乎是正确的方法，因为我已经看到人们将它用于 sqlite，但是在编译后尝试运行应用程序时我仍然收到此错误：

`sqlalchemy.exc.ArgumentError: Could not determine dialect for 'mysql+mysqldb'`

我最近一直在尝试使用 PyInstaller 并且几乎被困在同一个地方，尽管有一个不同的错误，如下所示：

```
 Traceback (most recent call last):
   File "<string>", line 96, in <module>
   File "/Users/tom/Downloads/pyinstaller-pyinstaller-2145d84/PyInstaller/loader/iu.py", line 386, in importHook
     mod = _self_doimport(nm, ctx, fqname)
   File "/Users/tom/Downloads/pyinstaller-pyinstaller-2145d84/PyInstaller/loader/iu.py", line 480, in doimport
     exec co in mod.__dict__
   File "build/bdist.macosx-10.7-intel/egg/MySQLdb/__init__.py", line 19, in <module>
   File "/Users/tom/Downloads/pyinstaller-pyinstaller-2145d84/PyInstaller/loader/iu.py", line 386, in importHook
     mod = _self_doimport(nm, ctx, fqname)
   File "/Users/tom/Downloads/pyinstaller-pyinstaller-2145d84/PyInstaller/loader/iu.py", line 480, in doimport
     exec co in mod.__dict__
   File "build/bdist.macosx-10.7-intel/egg/_mysql.py", line 7, in <module>
   File "build/bdist.macosx-10.7-intel/egg/_mysql.py", line 4, in __bootstrap__
   File "OSX_Installer/Jango/build/pyi.darwin/Jango/out00-PYZ.pyz/pkg_resources", line 882, in resource_filename
   File "OSX_Installer/Jango/build/pyi.darwin/Jango/out00-PYZ.pyz/pkg_resources", line 1352, in get_resource_filename
   File "OSX_Installer/Jango/build/pyi.darwin/Jango/out00-PYZ.pyz/pkg_resources", line 1363, in _extract_resource
 KeyError: '_mysql/_mysql.so' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:28:11.563

您可能还需要`_mysql`包含本机 mysql 绑定。此外，此绑定需要在目标系统上安装二进制 mysql 库。

[如果您使用纯 python mysql 库，例如pymysql](http://www.pymysql.org/)或[MySQL Connector/Python](https://launchpad.net/myconnpy)（两者都[受 sqlalchemy 支持](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#module-sqlalchemy.dialects.mysql.pymysql)），您的应用程序可能会更便携

# c# - 在函数中合并 Delegate 函数没有意义

> ID：10538033
> 
> 赞同：0
> 
> 时间：2012-05-10T16:06:55.783
> 
> 标签：c#, delegates, pinvoke

我为我的 C# 应用程序找到了一个更简单的 NAudio 版本的开源代码。哪个对我来说更好，因为我要做的就是从扬声器中播放一个简短的声音，以测试它们是否已插入并正常工作，而且我还想听麦克风。该项目本身看起来还不错，但我觉得可以将其重构为更小的夹头。我发现的另一件事是 WaveOutBuffer.cs 和 WaveInBuffer.cs 文件非常相似。所以我开始制作一个抽象类 WaveBuffer。这将包含将传递的所有类似函数和变量。我遇到的麻烦如下。另一个文件 WaveNative.cs 中有委托。我对代表和活动非常陌生，所以我知道它有可能非常重要。但我不喜欢它的设置方式。所以我会发布每个文件中的内容以及它是如何使用的，然后展示我一直在努力工作的内容。也许在我们所有的思想之间，我们可以整合和重构它以使其更有效:)

所以首先。

**WaveNative.cs**

```
//callbacks
public delegate void WaveDelegate(IntPtr hdrvr, int uMsg, int dwUser, ref WaveHdr wavhdr, int dwParam2); 
```

**WaveInBuffer.cs / WaveOutBuffer.cs**

```
 internal static void WaveInProc(IntPtr hdrvr, int uMsg, int dwUser, ref WaveNative.WaveHdr wavhdr, int dwParam2)
    {
        if (uMsg == WaveNative.MM_WIM_DATA)
        {
            try
            {
                GCHandle h = (GCHandle)wavhdr.dwUser;
                WaveInBuffer buf = (WaveInBuffer)h.Target;
                buf.OnCompleted();
            }
            catch
            {
            }
        }
    }
//WaveOutBuffer.cs version
    internal static void WaveOutProc(IntPtr hdrvr, int uMsg, int dwUser, ref WaveNative.WaveHdr wavhdr, int dwParam2)
    {
        if (uMsg == WaveNative.MM_WOM_DONE)
        {
            try
            {
                GCHandle h = (GCHandle)wavhdr.dwUser;
                WaveOutBuffer buf = (WaveOutBuffer)h.Target;
                buf.OnCompleted();
            }
            catch
            {
            }
        }
    } 
```

**WaveInRecorder.cs / WaveOutRecorder**

```
private WaveNative.WaveDelegate m_BufferProc = new WaveNative.WaveDelegate(WaveInBuffer.WaveInProc);
private WaveNative.WaveDelegate m_BufferProc = new WaveNative.WaveDelegate(WaveOutBuffer.WaveOutProc); 
```

最后，它们用于 PInvoke 调用，如下所示

```
 [DllImport(mmdll)]
    public static extern int waveOutOpen(out IntPtr hWaveOut, int uDeviceID, WaveFormat lpFormat, WaveDelegate dwCallback, int dwInstance, int dwFlags);
    [DllImport(mmdll)]
    public static extern int waveInOpen(out IntPtr phwi, int uDeviceID, WaveFormat lpFormat, WaveDelegate dwCallback, int dwInstance, int dwFlags); 
```

我已经在 WaveBuffer 的抽象版本中整合了大多数其他内容，例如 HeaderData、标题的大小、IntPtr 数据、GCHandle HeaderHandle 和 HeaderDataHandle。WaitFor 命令、OnCompleteCommand、bool Busy 和 AutoResetEvent。不确定它的用途，但它的用途，但它在每个文件中使用相同，所以我只是将它移过来。感谢您的耐心和阅读本主题。

**编辑**

很抱歉造成混乱，我太专注于寻找所有这些东西，我忘了问我想问什么。基本上，问题是如何将这两个功能几乎完全相同的功能结合起来？这个 Delegate 如何从 WaveNative 工作，以便我可以在 WaveInBuffer/WaveOutBuffer 中创建一个新实例，这意味着同样的事情。我只是假设我必须总是从另一个调用一个，或者只调用基类一个。至于 m_BufferedProc 我将发布整个代码，因为我很难理解。请注意，我发布的这段代码不是我自己的。这里是

```
public class WaveInRecorder : IDisposable
{
    private IntPtr m_WaveIn;
    private WaveInBuffer m_Buffers; // linked list
    private WaveInBuffer m_CurrentBuffer;
    private Thread m_Thread;
    private BufferDoneEventHandler m_DoneProc;
    private bool m_Finished;

    private WaveNative.WaveDelegate m_BufferProc = new WaveNative.WaveDelegate(WaveInBuffer.WaveInProc);

    public static int DeviceCount
    {
        get { return WaveNative.waveInGetNumDevs(); }
    }

    public WaveInRecorder(int device, WaveFormat format, int bufferSize, int bufferCount, BufferDoneEventHandler doneProc)
    {
        m_DoneProc = doneProc;
        WaveInHelper.Try(WaveNative.waveInOpen(out m_WaveIn, device, format, m_BufferProc, 0, WaveNative.CALLBACK_FUNCTION));
        AllocateBuffers(bufferSize, bufferCount);
        for (int i = 0; i < bufferCount; i++)
        {
            SelectNextBuffer();
            m_CurrentBuffer.Record();
        }
        WaveInHelper.Try(WaveNative.waveInStart(m_WaveIn));
        m_Thread = new Thread(new ThreadStart(ThreadProc));
        m_Thread.Start();
    }
    ~WaveInRecorder()
    {
        Dispose();
    }
    public void Dispose()
    {
        if (m_Thread != null)
            try
            {
                m_Finished = true;
                if (m_WaveIn != IntPtr.Zero)
                    WaveNative.waveInReset(m_WaveIn);
                WaitForAllBuffers();
                m_Thread.Join();
                m_DoneProc = null;
                FreeBuffers();
                if (m_WaveIn != IntPtr.Zero)
                    WaveNative.waveInClose(m_WaveIn);
            }
            finally
            {
                m_Thread = null;
                m_WaveIn = IntPtr.Zero;
            }
        GC.SuppressFinalize(this);
    }
    private void ThreadProc()
    {
        while (!m_Finished)
        {
            Advance();
            if (m_DoneProc != null && !m_Finished)
                m_DoneProc(m_CurrentBuffer.Data, m_CurrentBuffer.Size);
            m_CurrentBuffer.Record();
        }
    }
    private void AllocateBuffers(int bufferSize, int bufferCount)
    {
        FreeBuffers();
        if (bufferCount > 0)
        {
            m_Buffers = new WaveInBuffer(m_WaveIn, bufferSize);
            WaveInBuffer Prev = m_Buffers;
            try
            {
                for (int i = 1; i < bufferCount; i++)
                {
                    WaveInBuffer Buf = new WaveInBuffer(m_WaveIn, bufferSize);
                    Prev.NextBuffer = Buf;
                    Prev = Buf;
                }
            }
            finally
            {
                Prev.NextBuffer = m_Buffers;
            }
        }
    }
    private void FreeBuffers()
    {
        m_CurrentBuffer = null;
        if (m_Buffers != null)
        {
            WaveInBuffer First = m_Buffers;
            m_Buffers = null;

            WaveInBuffer Current = First;
            do
            {
                WaveInBuffer Next = Current.NextBuffer;
                Current.Dispose();
                Current = Next;
            } while(Current != First);
        }
    }
    private void Advance()
    {
        SelectNextBuffer();
        m_CurrentBuffer.WaitFor();
    }
    private void SelectNextBuffer()
    {
        m_CurrentBuffer = m_CurrentBuffer == null ? m_Buffers : m_CurrentBuffer.NextBuffer;
    }
    private void WaitForAllBuffers()
    {
        WaveInBuffer Buf = m_Buffers;
        while (Buf.NextBuffer != m_Buffers)
        {
            Buf.WaitFor();
            Buf = Buf.NextBuffer;
        }
    } 
```

请注意，该代码不是我的，而是 Ianier Munoz 的。我正在开发一个类似的版本，您可以在[http://code.google.com/p/adli/source/browse/#svn%2Ftrunk%2FAspects%2FCustom%2FAudio浏览我从中提取的代码](http://code.google.com/p/adli/source/browse/#svn%2Ftrunk%2FAspects%2FCustom%2FAudio)

我如何使用它（此处未完全实现）

[http://code.google.com/p/adli/source/browse/trunk/Aspects/Panels/Main%20Panels/AudioBrightnessPanel.cs](http://code.google.com/p/adli/source/browse/trunk/Aspects/Panels/Main%20Panels/AudioBrightnessPanel.cs)

看看我的麦克风测试的动作监听器。

再次为混乱感到抱歉，我将尽量不要再次发布没有问题的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:01:21.630

好吧，如果块是互斥的，这意味着将两个块合并在一起很容易……（我删除了空的 catch 块，因为它是邪恶的）

```
internal static void WaveProc(IntPtr hdrvr, int uMsg, int dwUser, ref WaveNative.WaveHdr wavhdr, int dwParam2)
{
    GCHandle h = (GCHandle)wavhdr.dwUser;
    if (uMsg == WaveNative.MM_WIM_DATA)
    {
         WaveInBuffer buf = (WaveInBuffer)h.Target;
         buf.OnCompleted();
    }
    if (uMsg == WaveNative.MM_WOM_DONE)
    {
         WaveOutBuffer buf = (WaveOutBuffer)h.Target;
         buf.OnCompleted();
    }
} 
```

`private WaveNative.WaveDelegate m_BufferProc = new WaveNative.WaveDelegate(WaveInBuffer.WaveProc);`

# dns - 如何使安装在 VPS 主机上的 Wamp 服务器可以通过域名访问？

> ID：10538035
> 
> 赞同：0
> 
> 时间：2012-05-10T16:07:01.730
> 
> 标签：dns, wampserver, vps

我有一个带有 Windows Server 2003 的 VPS 托管服务器，我在该服务器上安装了 WAMP 服务器，它正在工作，我可以通过 localhost 访问它并毫无问题地修改它的内容。我还有一个域名，比如“domain-name.com”。我的问题是如何通过在浏览器中输入我拥有的域名来使其在互联网上访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:12:40.200

这是一个非常开放的问题，但这里有：

您必须设置指向您的服务器的 DNS 记录。您的域名注册商可能会自己提供 DNS 服务。如果他们没有，并且只允许您设置名称服务器，请查看[http://dns.he.net](http://dns.he.net)（免费的 DNS 托管服务）。在后一种情况下，不要忘记将域名注册商面板中的域名服务器配置为 HE DNS 服务器（ns1.he.net - ns5.he.net）！

您必须添加的记录如下：

*   www.domain-name.com 的 A 记录，指向您的 IP
*   domain-name.com 的 CNAME 记录（通常在 DNS 面板中表示为 @），指向 www.domain-name.com
*   如果您希望在您的域/服务器上使用电子邮件服务，可以选择 MX 和 SPF/TXT 记录（这是一个完全独立的主题，尤其是 SPF 记录可能会很棘手）

此外，虽然这不是问题的一部分 -**请不要将 WAMP 用于公共/生产服务器。**WAMP 是为开发服务器设置而设计的，它将被配置为这样。如果你真的不能自己设置 HTTPd+PHP+MySQL 设置，那么至少看看 XAMPP，它更适合实时服务器。

# list - Prolog 转换并将术语（原子）分离到一个列表中

> ID：10538037
> 
> 赞同：2
> 
> 时间：2012-05-10T16:07:17.207
> 
> 标签：list, prolog

我有一个像这样的术语（更准确地说是一个原子）：
`name1(value1),name2(value2)`
我希望有一个像这样的“真实”列表：
`[name1(value1), name2(value2)]`
或者像这样的分隔术语：
`name1(value1)`以及`name2(value2)`
关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:39:24.607

关于什么：

```
ands((A,B)) --> !, ands(A), ands(B).
ands(X)     --> [X]. 
```

例子：

```
?- phrase(ands((a,b,c,d)), Ls).
Ls = [a, b, c, d]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T22:19:12.587

简单：对于您的列表`[H|T]`with`T=[]`和`H`作为其头元素的复合术语， have `H=','(A,B), List=[A,B]`。

你甚至可以只写`H=(A,B), List=[A,B].`- 括号在这里是强制性的。

IOW 您所说的数据项只是一个普通的复合项，以“，”作为其函子。如果您事先不知道这些术语的结构，可以使用 `=../2' 进行检查：

```
H =.. [Functor | Arguments]. 
```

（我看到你从@mat 那里得到了同样的建议）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:14:38.973

在 Prolog 中，我们使用模式匹配对 list' 元素应用不同的处理：

```
change_list([], []).  % end of recursion
change_list([(T1,T2)|Ri], [T1,T2|Ro]) :-  % recursive step doing required transformation
  !, change_list(Ri, Ro).
change_list([E|Ri], [E|Ro]) :-  % catch all rule: copy elem
  change_list(Ri, Ro). 
```

# javascript - 如何将 Javascript 中的 unix 时间戳转换为这种日期格式？

> ID：10538039
> 
> 赞同：0
> 
> 时间：2012-05-10T16:07:18.130
> 
> 标签：javascript, date, time

我目前有一个用 PHP 格式化的日期，如下所示`date('D d F g:i A Y', $l2['available'])`，它以这种格式输出日期：`Tue 15 May 5:45 PM 2012`

我想在 Javascript/jQuery 中实现相同的格式。

到目前为止，我已经这样做了：

```
var lessonTime = new Date(data.lessons[i].available * 1000);
lessonTime.toDateString(); 
```

这导致以下日期：

```
Thu Mar 22 2012 
```

有没有办法像使用 PHP 日期函数一样控制格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T18:36:24.753

我写了[moment.js](http://momentjs.com)，它非常擅长日期操作和格式化。

```
moment().format('ddd D MMM h:mm A YYYY'); 
```

它也比 Date.js 更快更小，并且不会修改`Date.prototype`通常被认为不安全的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:14:28.467

JavaScript 中几乎没有原生日期格式，无法与 PHP 格式功能相媲美。有一些库可以帮助解决这个问题：

*   [Date.js](http://www.datejs.com/)扩展[`Date.toString()`](http://code.google.com/p/datejs/wiki/APIDocumentation#toString)以接受格式化参数

*   jQuery 有一个[dateFormat 插件](http://archive.plugins.jquery.com/project/jquery-dateFormat)

*   [D3.js](http://d3js.org/)[支持时间格式化](https://github.com/mbostock/d3/wiki/Time-Formatting)——即使你不使用整个库，你也可以单独使用时间[格式化程序](https://github.com/mbostock/d3/blob/master/src/time/format.js)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:13:31.853

[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

```
var now = new Date();
dateFormat(now, "ddd dd mmm h:MM TT yyyy"); 
```

编码

```
/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

var dateFormat = function () {
    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
        timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
        timezoneClip = /[^-+\dA-Z]/g,
        pad = function (val, len) {
            val = String(val);
            len = len || 2;
            while (val.length < len) val = "0" + val;
            return val;
        };

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc) {
        var dF = dateFormat;

        // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
        if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
        }

        // Passing date through Date applies Date.parse, if necessary
        date = date ? new Date(date) : new Date;
        if (isNaN(date)) throw SyntaxError("invalid date");

        mask = String(dF.masks[mask] || mask || dF.masks["default"]);

        // Allow setting the utc argument via the mask
        if (mask.slice(0, 4) == "UTC:") {
            mask = mask.slice(4);
            utc = true;
        }

        var _ = utc ? "getUTC" : "get",
            d = date[_ + "Date"](),
            D = date[_ + "Day"](),
            m = date[_ + "Month"](),
            y = date[_ + "FullYear"](),
            H = date[_ + "Hours"](),
            M = date[_ + "Minutes"](),
            s = date[_ + "Seconds"](),
            L = date[_ + "Milliseconds"](),
            o = utc ? 0 : date.getTimezoneOffset(),
            flags = {
                d:    d,
                dd:   pad(d),
                ddd:  dF.i18n.dayNames[D],
                dddd: dF.i18n.dayNames[D + 7],
                m:    m + 1,
                mm:   pad(m + 1),
                mmm:  dF.i18n.monthNames[m],
                mmmm: dF.i18n.monthNames[m + 12],
                yy:   String(y).slice(2),
                yyyy: y,
                h:    H % 12 || 12,
                hh:   pad(H % 12 || 12),
                H:    H,
                HH:   pad(H),
                M:    M,
                MM:   pad(M),
                s:    s,
                ss:   pad(s),
                l:    pad(L, 3),
                L:    pad(L > 99 ? Math.round(L / 10) : L),
                t:    H < 12 ? "a"  : "p",
                tt:   H < 12 ? "am" : "pm",
                T:    H < 12 ? "A"  : "P",
                TT:   H < 12 ? "AM" : "PM",
                Z:    utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                o:    (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
                S:    ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
            };

        return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
        });
    };
}();

// Some common format strings
dateFormat.masks = {
    "default":      "ddd mmm dd yyyy HH:MM:ss",
    shortDate:      "m/d/yy",
    mediumDate:     "mmm d, yyyy",
    longDate:       "mmmm d, yyyy",
    fullDate:       "dddd, mmmm d, yyyy",
    shortTime:      "h:MM TT",
    mediumTime:     "h:MM:ss TT",
    longTime:       "h:MM:ss TT Z",
    isoDate:        "yyyy-mm-dd",
    isoTime:        "HH:MM:ss",
    isoDateTime:    "yyyy-mm-dd'T'HH:MM:ss",
    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
};

// Internationalization strings
dateFormat.i18n = {
    dayNames: [
        "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
        "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    ],
    monthNames: [
        "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ]
};

// For convenience...
Date.prototype.format = function (mask, utc) {
    return dateFormat(this, mask, utc);
}; 
```

# java - 学生阵列菜单

> ID：10538042
> 
> 赞同：1
> 
> 时间：2012-05-10T16:07:23.180
> 
> 标签：java, arrays, sorting

我正在编写一个菜单以将名称存储到一个数组中，然后提供添加/删除学生以及搜索特定学生的选项，但我似乎无法找到如何设置数组以便我可以在其他中使用它选项，例如，我的代码只允许我在使用选项 1 时输入名称，但是当我选择选项 3 在数组中搜索名称时，它不会将这些名称保留在数组中，它只是显示为 null对于阵列中的每个插槽。

我遇到的另一个问题是关于如何删除学生，显然如果名字在数组的末尾会很容易，但是如果名字在中间怎么办，我怎么能删除名字，shift所有其他名称都放在一个插槽中，以便阵列中没有间隙？

```
import java.util.Scanner;

public class Lab10Ex2 {

    public static void main(String[] args) {
        int choice = 0;
        int[] stringArray = {};

        do{         

        String[] stringarray = new String[20];

            System.out.println("----------------MENU---------------");
            System.out.println();
            System.out.println("1\. Add Students");
            System.out.println("2\. Delete Students");
            System.out.println("3\. Search for student");
            System.out.println("4\. Print all Students");
            System.out.println("5\. exit");

            Scanner scanchoice = new Scanner(System.in);
            choice = scanchoice.nextInt();

            if (choice ==1){

                    Scanner scannames = new Scanner(System.in);

                System.out.println("Please enter the student names into the array");

                int i = 0;

                for(i = 0; i<stringarray.length; i++){

                    String temp =scannames.nextLine();

                    stringarray[i]=temp.toLowerCase();

                    if(i==(stringarray.length-1)){
                        System.out.println("successfully filled up array fully");
                        System.out.println();
                    }
                }
            }

            if(choice==2){

            }

            if(choice==3){

                for(int p = 0; p<stringarray.length; p++){

                                    System.out.println(stringarray[p]);

                }
                                int x=0;
                                Scanner scannames1 = new Scanner(System.in);

                                System.out.println("Enter name of student you want to search for: ");
                                System.out.println();
                                String search=scannames1.nextLine();
                                String searchName=search.toLowerCase();

                                for(int p=0;p<20;p++){
                                    if(searchName.equals(stringarray[p])){
                                        x=1;

                                        }
                                    else{
                                        x=0;
                                    }
                                }

                                if(x==1){
                                    System.out.println("We have a match in our database for "+ searchName);
                                }
                                else if (x==0){
                                    System.out.println("No match for "+ searchName);
                                }
                            }

                            if (choice ==4){
                                System.out.println("List of names:");

                                for(int p = 0; p<stringarray.length; p++){
                                    System.out.println(stringarray[p]);
                                }
                            }
        }while(choice!=5);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:16:24.380

```
 int choice = 0;
    int[] stringArray = {};

    do{         

        String[] stringarray = new String[20]; 
```

删除该`int[] stringArray`行（您不会在任何地方引用它）。

向上移动`String[] stringarray`，在循环外。

至于删除，您要么必须自己编写代码（将已删除项目的所有内容移到数组中的上一级），要么使用 Java 提供的集合类之一（而不是本机数组），它会为您处理删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:19:16.127

```
do{         

    String[] stringarray = new String[20]; 
```

在 Do { ... } 循环的每次迭代中，您都在重新创建 stringarray 变量，从而将其清除。如果您将其移到循环之外，您的学生条目将被保留。

至于删除，如果您不需要使用字符串数组，我建议使用 ArrayList。它将允许您轻松删除特定条目，而无需担心其他条目。否则，是的，最简单的做法是将所有其他条目向下移动一个插槽以避免间隙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:34:01.733

这是更正后的代码：

```
import java.util.Scanner;

public class Lab10Ex2 {

/**
 * @param args
 */
public static void main(String[] args) {
    int choice = 0;
    int[] stringArray = {};
    String[] stringarray = new String[20];

    do{         

        System.out.println("----------------MENU---------------");

        System.out.println();
        System.out.println("1\. Add Students");
        System.out.println("2\. Delete Students");
        System.out.println("3\. Search for student");
        System.out.println("4\. Print all Students");
        System.out.println("5\. exit");

        Scanner scanchoice = new Scanner(System.in);
        choice = scanchoice.nextInt();

        if (choice ==1){

            Scanner scannames = new Scanner(System.in);

            System.out.println("Please enter the student names into the array");
            System.out.println();

            int i = 0;

            for(i = 0; i<stringarray.length; i++){

                String temp =scannames.nextLine();

                stringarray[i]=temp.toLowerCase();

                if(i==(stringarray.length-1)){
                    System.out.println("successfully filled up array fully");
                    System.out.println();
                }

            }

        }

        if(choice==2){

        }

        if(choice==3){

            for(int p = 0; p<stringarray.length; p++){

                System.out.println(stringarray[p]);

            }
            int x=0;
            Scanner scannames1 = new Scanner(System.in);

            System.out.println("Enter name of student you want to search for: ");
            System.out.println();
            String search=scannames1.nextLine();
            String searchName=search.toLowerCase();

            for(int p = 0; p < stringarray.length ;p++){
                if(searchName.equals(stringarray[p])){
                    x=1;
                    break;
                }
                else{
                    x=0;
                }
            }

            if(x==1){
                System.out.println("We have a match in our database for "+ searchName);
            }
            else if (x==0){
                System.out.println("No match for "+ searchName);
            }
        }

        if (choice ==4){
            System.out.println("List of names:");

            for(int p = 0; p<stringarray.length; p++){

                System.out.println(stringarray[p]);
                System.out.println();

            }

        }

    }while(choice!=5);

}

} 
```

你做错的事情：

1.  在 do while 循环中实例化数组。
2.  如果在数组中找到搜索实体，则不会跳出循环。

如果要避免删除后在数组中浪费空间，请使用 ArrayList。如果你用简单的数组绑定到这个，你可以这样做：

> 将 null 放在您从中删除的索引处。创建一个与原始数组大小相同且所有 null 值的临时数组。将原始数组中的所有元素复制到临时数组中，但跳过为空的元素。将原始数组指向新数组。

并避免硬编码数组长度！

# objective-c - 如何在文件名中使用十六进制计数进行编程加载？

> ID：10538043
> 
> 赞同：2
> 
> 时间：2012-05-10T16:07:28.130
> 
> 标签：objective-c, c, hex

我有几个包含 12 个 .caf 文件的目录，并且正在以编程方式加载它们：

```
NSString *soundToPlay = [NSString stringWithFormat:@"sounds/%d/%d_%d.caf", type, note, timbre]; 
```

例如，如果我想在其中一个值中从`9`to递增`10`，突然间我的字符串是一个额外的字符，这使得以后使用类似`NSMakeRange`. 我想将所有这些`%d`s 保留为一个字符。

我想做的是使用数字 0-9 命名我的文件，然后继续使用 A、B、C 而不是 10、11、12。这将使所有内容保持单字符。我希望有一种简单的方法来做这种事情，仍然允许像增量、+/-和模数这样的东西。如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:11:36.630

`X`是十六进制格式说明符：

```
[NSString stringWithFormat:@"sounds/%X/%X_%X.caf", type, note, timbre] 
```

或者，您始终可以使用两位数。这将允许从超过 16 个案例中进行选择：

```
[NSString stringWithFormat:@"sounds/%02d/%02d_%02d.caf", type, note, timbre] 
```

# javascript - 从 Javascript 中的多个 HTML 标记中提取和替换内容

> ID：10538044
> 
> 赞同：0
> 
> 时间：2012-05-10T16:07:29.860
> 
> 标签：javascript, html, regex

我正在开发使用 Ajax 请求加载 HTML 页面的 javascript 新插件，从页面中提取所有脚本，然后在加载所有内容后执行它。为此，我正在尝试类似的方法：

```
var scripts = '',
    domResponse = $('<div/>').append(HTMLresponse
        .replace(/<\s*script\s*([^>]*)>((.|\n)*)<\s*\/\s*script>/i, function($0,$1,$2){
            scripts += $2;
            return '';
        }));
// Then I load the content and I execute scripts 
```

当我尝试使用包含单个脚本标记的页面时，它可以正常工作，但是如果我尝试使用如下页面：

```
<script>
   // Some javascript
</script>

<!-- SOME HTML -->

<script>
   // Another script
</script> 
```

domResponse 为空，脚本包含第一个 <script> 和最后一个 </script> 之间的文本。

有什么解决方案可以让它正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:10:43.227

如果我了解您要做什么，这会起作用吗？

```
var scriptElements = document.getElementsByTagName("script");
var scripts = "";

for(var i = 0; len = scriptElements.length; i < len; i++) {
    scripts += scriptElements[i].innerHTML;
    scriptElements[i].innerHTML = "";
}

// load content and execute scripts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:12:09.783

像其他人一样，我建议不要将正则表达式用于任何与 HTML 相关的内容。

但是，忽略这一点，我仍然可以回答您的问题。你的问题是你正在使用一个贪婪的量词，即，它*尽可能多地*`(.|\n)*`“吃” ，只要它以 . 结尾。你想要的是一个*非贪婪的量词*，像这样：*`</script>`*

 **```
<\s*script\s*([^>]*)>((.|\n)*?)<\s*\/\s*script> 
```

见这里：[http](http://rubular.com/r/U2vvOW6XfZ) ://rubular.com/r/U2vvOW6XfZ 。

请注意，如果脚本标记中的任何属性包含`>`; ，则正则表达式将中断。如果脚本出于某种原因`</script>`在其中包含 a （可能在评论中）；如果页面通常注释掉了一个脚本；等等。这就是为什么使用解析器要好得多的原因。**

# android - 将android背景设置为中心裁剪，但右对齐？

> ID：10538045
> 
> 赞同：3
> 
> 时间：2012-05-10T16:07:30.530
> 
> 标签：android, image

我有一个背景图像，我想 1）填充垂直空间，无论图像的宽度是否大于父级的宽度，以及 2）将图像的右边缘与父级的右边缘对齐。

目前 scaleType="centerCrop" 给我 (1) 但不是 (2); 它水平居中图像。有谁知道如何让它右对齐？谢谢！

编辑：尝试将 android:layout_alignParentRight="true" 添加到相对布局和图像视图中，但没有效果。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true"
android:layout_gravity="center" >

    <ImageView android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:scaleType="centerCrop"
    android:src="@drawable/bg"/>

    <LinearLayout
    android:id="@+id/fg"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:14:06.720

您可以使用

```
 android:layout_alignParentRight="true" 
```

对于图像视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:15:57.083

添加这些属性

```
 android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"

    <ImageView
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:scaleType="centerCrop"
        android:src="@drawable/backg_carbon" >
    </ImageView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T14:24:35.833

我认为您的问题是 viewbounds 没有调整到实际图像的大小并由于某种原因填满了宽度。最好的办法是检查设置 `android:adjustViewBounds`为 true 是否有帮助（当然重力向右）。

```
<ImageView android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:adjustViewBounds="true"          //This is the added line.
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:scaleType="centerCrop"
    android:src="@drawable/bg"/> 
```

# css - 仅使用 CSS 的简单水平内容滑块/滚动条？

> ID：10538048
> 
> 赞同：0
> 
> 时间：2012-05-10T16:07:46.100
> 
> 标签：css

**单击此链接可查看我关于该主题的概念图：http:** [//i45.tinypic.com/k33c0i.jpg](http://i45.tinypic.com/k33c0i.jpg)

你好！是否可以在没有默认滚动条的情况下为溢出内容做这样的自定义“滑块”？实际过渡如何进行并不重要（可以像我关心的常规水平滚动条一样工作，只是没有丑陋的默认灰色按钮/栏）。最好我想只用 CSS 来做，但如果不是，我也会考虑其他方法来做。或者我只是简单地为剩余的图像创建另一个页面。

[http://www.visioville.fi/en/](http://www.visioville.fi/en/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:11:36.747

您可以通过设置摆脱滚动条

```
overflow:hidden 
```

在 CSS 中，它将“剪辑”DIV 内容。

我不认为有一种纯 CSS 方式来滚动它。[使用jQuery.ScrollTo](http://demos.flesler.com/jquery/scrollTo/)很容易做到这一点- 只需将 hover() 或 click() 事件绑定到您的箭头图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:24:53.267

看看这个网站，相信对你会有一些用处。这是我过去使用的：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

# c - 如何在 C 中查找计算机中已安装驱动程序的名称？

> ID：10538050
> 
> 赞同：1
> 
> 时间：2012-05-10T16:07:51.983
> 
> 标签：c, winapi, drivers

我正在尝试编写一个代码，可以在 C 中（通过 winapi）获取我的 Windows 计算机中已安装驱动程序的名称？

我对C真的很陌生，我不知道我能做什么？你能帮我解决这种情况吗？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:10:03.090

您需要设置 API。从这篇文章开始：[如何使用 SetupDi 调用枚举硬件设备](http://support.microsoft.com/kb/259695)

# sql - 计算包含字母/数字的行数

> ID：10538051
> 
> 赞同：3
> 
> 时间：2012-05-10T16:07:54.643
> 
> 标签：sql, postgresql, count, aggregate-functions

我想要实现的目标很简单，但是有点难以解释，我不知道它是否真的可以在 postgres 中实现。我处于相当基本的水平。`SELECT, FROM, WHERE, LEFT JOIN ON, HAVING`等基本的东西。

我正在尝试计算包含特定字母/数字的行数，并根据字母/数字显示该计数。

即有多少行有包含“a/A”的条目（不区分大小写）

我要查询的表是电影名称列表。我要做的就是对“az”和“0-9”进行分组和计数，然后输出总数。我可以按顺序运行 36 个查询：

```
SELECT filmname FROM films WHERE filmname ilike '%a%'
SELECT filmname FROM films WHERE filmname ilike '%b%'
SELECT filmname FROM films WHERE filmname ilike '%c%' 
```

然后在结果上运行 pg_num_rows 以找到我需要的数字，依此类推。

我知道喜欢是多么强烈，而且我更喜欢，所以我宁愿避免这种情况。尽管数据（如下）在数据中有大写和小写，但我希望结果集不区分大小写。即“盯着山羊的男人” a/A、t/T 和 s/S 不会计算两次结果集。如果它使查询更简单或更易于构建，我可以将表复制到辅助工作表，其中所有数据都是 strtolower 并处理查询的该组数据。

另一种选择可能是

`SELECT sum(length(regexp_replace(filmname, '[^X|^x]', '', 'g'))) FROM films;`

每个字母组合，但同样是 36 个查询、36 个数据集，如果我可以在单个查询中获取数据，我更愿意。

这是我的一组 14 部电影的简短数据集（实际上包含 275 行）

```
District 9
Surrogates
The Invention Of Lying
Pandorum
UP
The Soloist
Cloudy With A Chance Of Meatballs
The Imaginarium of Doctor Parnassus
Cirque du Freak: The Vampires Assistant
Zombieland
9
The Men Who Stare At Goats
A Christmas Carol
Paranormal Activity 
```

如果我手动将每个字母和数字排列在一列中，然后通过在该列中给它一个 x 来注册该字母是否出现在电影标题中，然后将它们计数以产生总数，我会在下面得到类似的结果。x 的每个垂直列都是该电影名称中的字母列表，无论该字母出现多少次或其大小写。

上述短集的结果是：

```
A  x x  xxxx xxx  9 
B       x  x      2 
C x     xxx   xx  6
D x  x  xxxx      6
E  xx  xxxxx x    8
F   x   xxx       4 
G  xx    x   x    4
H   x  xxxx  xx   7
I x x  xxxxx  xx  9
J                 0
K         x       0
L   x  xx  x  xx  6
M    x  xxxx xxx  8
N   xx  xxxx x x  8
O  xxx xxx x xxx  10
P    xx  xx    x  5
Q         x       1
R xx x   xx  xxx  7
S xx   xxxx  xx   8
T xxx  xxxx  xxx  10
U  x xx xxx       6
V   x     x    x  3
W       x    x    2
X                 0 
Y   x   x      x  3
Z          x      1 
0                 0  
1                 0  
2                 0 
3                 0
4                 0
5                 0
6                 0
7                 0
8                 0
9 x         x     1 
```

在上面的例子中，每一列都是一个“电影名” 正如你所看到的，第 5 列只标记了一个“u”和一个“p”，而第 11 列只标记了一个“9”。最后一列是每个字母的计数。

我想以某种方式构建一个查询，它给我结果行：A 9、B 2、C 6、D 6、E 8 等，考虑到从我的电影列中提取的每个行条目。如果该字母没有出现在任何行中，我想要一个零。

我不知道这是否可能，或者是否在 php 中系统地进行 36 个查询是唯一的可能性。

在当前数据集中有 275 个条目，并且每月增长约 8.33 个（每年 100 个）。我预测到 2019 年它将达到大约 1000 行，届时我无疑将使用一个完全不同的系统，因此我不必担心使用庞大的数据集来拖网。

目前最长的标题是 50 个字符的“Percy Jackson & the Olympians: The Lightning Thief”（是的，我知道这部电影很糟糕；-），最短的是 1，“9”。

我正在运行 9.0.0 版的 Postgres。

抱歉，如果我以多种方式多次说过同一件事，我正在尝试获取尽可能多的信息，以便您知道我想要实现的目标。

如果您需要任何澄清或更大的数据集进行测试，请询问，我会根据需要进行编辑。

非常欢迎提出建议。

*编辑 1*

**欧文**感谢您的编辑/标签/建议。同意他们所有人。

修复了**Erwin**建议的丢失的“9”错字。我的手动转录错误。

**kgrittn**，感谢您的建议，但我无法从 9.0.0 更新版本。我已询问我的提供商是否会尝试更新。

*回复*

感谢您的出色回复**欧文**

抱歉延迟回复，但我一直在努力让您的查询正常工作并学习新关键字以理解您创建的查询。

我调整了查询​​以适应我的表结构，但结果集与预期不符（全为零），所以我直接复制了你的行并得到了相同的结果。

虽然两种情况下的结果集都列出了所有 36 行以及相应的字母/数字，但所有行都显示为零作为计数 (ct)。

我试图解构查询以查看它可能在哪里崩溃。

的结果

```
SELECT DISTINCT id, unnest(string_to_array(lower(film), NULL)) AS letter
FROM  films 
```

是“未找到行”。也许它应该从更广泛的查询中提取出来，我不确定。

当我删除 unnest 函数时，结果是 14 行都带有“NULL”

如果我调整功能

```
COALESCE(y.ct, 0) to COALESCE(y.ct, 4)<br /> 
```

然后我的数据集对每个字母都以 4 响应，而不是前面解释的零。

简要阅读 COALESCE 后，“4”是替代值，我猜测 y.ct 为 NULL 并被第二个值替代（这是为了覆盖序列中字母不匹配的行，即如果没有电影包含一个'q'然后'q'列将有一个零值而不是NULL？）

我尝试使用的数据库是 SQL_ASCII，我想知道这是否是个问题，但我在一个运行 UTF-8 的 8.4.0 版本上得到了相同的结果。

如果我犯了一个明显的错误，但我无法返回我需要的数据集，我深表歉意。

有什么想法吗？

再次感谢您的详细回复和您的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:33:32.623

这个查询应该做的工作：

测试用例：

```
CREATE TEMP TABLE films (id serial, film text);
INSERT INTO films (film) VALUES
 ('District 9')
,('Surrogates')
,('The Invention Of Lying')
,('Pandorum')
,('UP')
,('The Soloist')
,('Cloudy With A Chance Of Meatballs')
,('The Imaginarium of Doctor Parnassus')
,('Cirque du Freak: The Vampires Assistant')
,('Zombieland')
,('9')
,('The Men Who Stare At Goats')
,('A Christmas Carol')
,('Paranormal Activity'); 
```

询问：

```
SELECT l.letter, COALESCE(y.ct, 0) AS ct
FROM  (
    SELECT chr(generate_series(97, 122)) AS letter  -- a-z in UTF8!
    UNION ALL
    SELECT generate_series(0, 9)::text              -- 0-9
    ) l
LEFT JOIN (
    SELECT letter, count(id) AS ct
    FROM  (
        SELECT DISTINCT  -- count film once per letter
               id, unnest(string_to_array(lower(film), NULL)) AS letter
        FROM   films
        ) x
    GROUP  BY 1
    ) y  USING (letter)
ORDER  BY 1; 
```

*   这需要 PostgreSQL **9.1**！考虑[发行说明](http://www.postgresql.org/docs/current/interactive/release-9-1.html)：

> 更改 string_to_array() 以便 NULL 分隔符将字符串拆分为字符 (Pavel Stehule)
> 
> 以前，这返回一个空值。

*   您可以使用[`regexp_split_to_table(lower(film), '')`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER), 而不是[`unnest(string_to_array(lower(film), NULL))`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)（在 9.1 之前的版本中工作！），但它通常会慢一些，并且长字符串会降低性能。

*   我`generate_series()`用来生成`[a-z0-9]`单独的行。并且 LEFT JOIN 到查询中，因此每个字母都在结果中表示。

*   用于`DISTINCT`计算每部电影一次。

*   永远不用担心 1000 行。这是现代硬件上现代 PostgreSQL 的小菜一碟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:23:44.367

类似 Erwins 的方法，但从长远来看可能更舒服：

为您感兴趣的每个角色创建一个表格：

```
CREATE TABLE char (name char (1), id serial);
INSERT INTO char (name) VALUES ('a');
INSERT INTO char (name) VALUES ('b');
INSERT INTO char (name) VALUES ('c'); 
```

然后对其值进行分组很容易：

```
SELECT char.name, COUNT(*) 
  FROM char, film 
  WHERE film.name ILIKE '%' || char.name || '%' 
  GROUP BY char.name 
  ORDER BY char.name; 
```

不用担心 ILIKE。

我对使用关键字“char”作为表格标题并不是 100% 满意，但到目前为止还没有遇到过不好的经历。另一方面，它是自然名称。也许如果你把它翻译成另一种语言——比如德语中的“zeichen”，你就可以避免歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:45:59.013

这将在一行中为您提供结果，每个匹配的字母和数字有一列。

```
SELECT
  SUM(CASE WHEN POSITION('a' IN filmname) > 0 THEN 1 ELSE 0 END) AS "A",
  SUM(CASE WHEN POSITION('b' IN filmname) > 0 THEN 1 ELSE 0 END) AS "B",
  SUM(CASE WHEN POSITION('c' IN filmname) > 0 THEN 1 ELSE 0 END) AS "C",
  ...
  SUM(CASE WHEN POSITION('z' IN filmname) > 0 THEN 1 ELSE 0 END) AS "Z",
  SUM(CASE WHEN POSITION('0' IN filmname) > 0 THEN 1 ELSE 0 END) AS "0",
  SUM(CASE WHEN POSITION('1' IN filmname) > 0 THEN 1 ELSE 0 END) AS "1",
  ...
  SUM(CASE WHEN POSITION('9' IN filmname) > 0 THEN 1 ELSE 0 END) AS "9"
FROM films; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T16:27:36.917

下面是一个相当简单的解决方案，它只需要一次表扫描。

```
SELECT 
    'a', SUM( (title ILIKE '%a%')::integer),
    'b', SUM( (title ILIKE '%b%')::integer),
    'c', SUM( (title ILIKE '%c%')::integer)
FROM film 
```

我留下了另外 33 个字符作为你的打字练习:)

BTW 1000 行对于 postgresql 数据库来说很小。当数据库大于服务器中的内存时，它开始变大。

编辑：有一个更好的主意

```
SELECT chars.c, COUNT(title)
FROM (VALUES ('a'), ('b'), ('c')) as chars(c)
    LEFT JOIN film ON title ILIKE ('%' || chars.c || '%')
GROUP BY chars.c
ORDER BY chars.c 
```

您还可以将 (VALUES ('a'), ('b'), ('c')) as chars(c) 部分替换为对包含您感兴趣的字符列表的表的引用。

# ruby-on-rails - ActiveRecord 关系

> ID：10538052
> 
> 赞同：0
> 
> 时间：2012-05-10T16:07:59.047
> 
> 标签：ruby-on-rails, activerecord

我有 3 个模型：

`Group`

`Feed`

`FeedItem`

一个组有很多提要，提要有很多提要项

无论如何，我可以从组中获取组 FeedItems 中的所有提要吗？

我猜是这样的`group.feeds.feed_items`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:17:07.170

我认为您正在寻找的是[通过](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)关联。将以下行添加到您的`Group`模型中

```
has_many :feed_items, :through => :feeds 
```

之后，您可以通过以下方式访问`FeedItems`组中的所有内容`group.feed_items`

# ipad - 覆盖内容后的 NSDictionary 内存泄漏

> ID：10538057
> 
> 赞同：0
> 
> 时间：2012-05-10T16:08:12.573
> 
> 标签：ipad, memory

试图追踪内存泄漏。我将其追溯到一个合成的 NSDictionary，该 NSDictionary 用于存储在启动时从文档文件夹中读取的 plist 数据。第一次运行，没有泄漏。但后来在应用程序中，我进行了一个网络调用，覆盖了 NSDictonary 对象，这就是我看到泄漏的地方。

更新运行良好，但在仪器中，我在覆盖 NSDictionary 时看到了泄漏。

在将合成的 NSDictionary 设置为新内容之前，我已经尝试了标准版本和 nil 。不知道接下来要尝试什么。

通常在这里找到我正在寻找的答案。但这让我难过。

```
NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];

Hubplist = (NSDictionary *)[NSPropertyListSerialization
                                      propertyListWithData:plistXML
                                      options:NSPropertyListImmutable
                                      format:&format
                                      error:NULL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:27:39.430

如果你在任何地方保留或分配了 Hubplist，你需要在覆盖它之前释放它。

```
NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];

[Hubplist release];
Hubplist = nil;
Hubplist = (NSDictionary *)[NSPropertyListSerialization
                                      propertyListWithData:plistXML
                                      options:NSPropertyListImmutable
                                      format:&format
                                      error:NULL];
// Also make sure to retain it if needed
[Hubplist retain]; 
```

# java - 模拟 jdbc 数据源的困难

> ID：10538060
> 
> 赞同：1
> 
> 时间：2012-05-10T16:08:18.870
> 
> 标签：java, mocking, easymock, powermock

我想模拟一个 Datasource 和 InitialContext 以连接到容器外的数据库。这是我想使用模拟的逻辑：

```
 Connection con = null;
        Context context = new InitialContext();
        DataSource datasource = (DataSource) context.lookup("jdbc/chu");
        con = datasource.getConnection(); 
```

这就是我进行的方式

```
 // create the Connection
        connection = createMyConnection();//connection i construct manually 
        // Mock the Datasource
        DataSource datasourceMock = EasyMock.createMock(DataSource.class);
        EasyMock.expect(datasourceMock.getConnection())
                                      .andReturn(connection).anyTimes();
        // Mock the context
        Context contextMock = EasyMock.createMock(InitialContext.class);
        EasyMock.expect((DataSource)contextMock.lookup("jdbc/chu"))
                                     .andReturn(datasourceMock)
                                     .anyTimes();
PowerMock.expectNew(InitialContext.class).andReturn((InitialContext)contextMock);

        // run the mock
        PowerMock.replayAll(); 
```

**问题：**模拟不适用于 DataSource 它始终为空，但是 InitialContext 的模拟正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:40:04.440

我认为你需要使用`PowerMock.createMock`而不是`EasyMock.createMock`如果你想`PowerMock.replayAll`工作。

# jquery - jQuery 插件可链接性

> ID：10538061
> 
> 赞同：1
> 
> 时间：2012-05-10T16:08:22.073
> 
> 标签：jquery, jquery-plugins

我正在编写一个jQuery插件，主要目的是获取一个选择元素并基于它创建一个新组件，到目前为止我只想用一个空的div替换选择：

```
(function($){
    $.fancySelect = {version:'1.0'};
    var methods = {
        init: function(options){
            return this.each(function(){                
                var div = $('<div></div>');
                $(this).replaceWith(div);
            });
        }
    };
    $.fn.fancySelect = function(method){
        if (methods[method]){//call a method
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else {
             return methods.init.apply( this, arguments );
        }
    }
})(jQuery); 
```

为了测试，我做了一个简单的选择：

```
<select id="sss"></select> 
```

当我打电话时：

```
$('#sss').fancySelect(); 
```

选择正确地替换为空的 Div，这没关系。
但是现在，在测试可链性时，我尝试：

```
$('#sss').fancySelect().append('<span>new text</span>'); 
```

但是我的新 div 仍然是空的
所以我尝试了：

```
console.log($('#sss').fancySelect()); 
```

在萤火虫上，我得到：

```
[select#sss] 
```

意味着插件正在返回旧的选择。

我试图添加

```
return $(this); 
```

后

```
$(this).replaceWith(div); 
```

在我的插件代码中，但没有任何改变！

你能告诉我我应该怎么做才能让我的插件返回新创建的 Div 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:12:21.010

当您 return 时[`this.each`](http://api.jquery.com/each/)，您将返回原始的 jQuery 选择，即使您替换了这些元素，它也没有改变。而不是使用`each`，使用[`map`](http://api.jquery.com/map/)来调整返回的内容：

```
return this.map(function(){                
    var div = $('<div></div>');
    $(this).replaceWith(div);
    return div;
}); 
```

# java - 带有 Tinder/Whack 的 XMPP 代理服务器

> ID：10538064
> 
> 赞同：3
> 
> 时间：2012-05-10T16:08:39.640
> 
> 标签：java, xmpp, smack, whack

我正在寻找为 XMPP 创建一个绝对最低限度的代理服务器：允许客户端成功连接到它（握手）。之后，我想捕获发送给它的节并执行传递，将节路由到实际的 XMPP 服务，这将是 OpenFire。

但我首先需要那个初始代理来代表“连接”的客户。我正在考虑使用 Tinder 和 Whack。这些库是否包含我需要的功能，还是我需要从头开始？

我将使用Java。

请不要为我的需要推荐轻量级 XMPP 服务器，不幸的是，这必须按照上面概述的方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:54:01.270

您可能想查看[ConnectionManager](http://www.igniterealtime.org/projects/openfire/connection_manager.jsp)是否适合您的需要。

至于自己做，Tinder 可能会有所帮助，但我认为 Whack 没有任何用处，因为您没有构建组件。

# fat - 如何计算脂肪

> ID：10538071
> 
> 赞同：5
> 
> 时间：2012-05-10T16:08:57.113
> 
> 标签：fat

我正在学习 FAT 文件系统以及如何计算 FAT 大小。现在，我有这个问题：

假设磁盘大小为 32 MB，块大小为 1 KB。计算FAT16的大小。

现在，我知道要计算它，我们会将每个条目的位数乘以块数。所以第一步是计算块数 = (32MB)/(1KB) = 2^15 = 32 KB 块。

然后，我们将其代入第一个等式，得到 = 2^16 * 2^15 = 2^19在[http://pcnineoneone.com/howto/fat1.html](http://pcnineoneone.com/howto/fat1.html)中计算）。

但是，我得到的答案更进一步，将 2^19 除以 (8*1024) ，这基本上给出了 64KB 的答案。这是为什么？我已经搜索了几个小时，但什么也没找到。

有人可以解释为什么我们要执行将 2^19 除以 (8*1024) 的额外步骤吗？哦，另一个问题表明块大小为 2KB，因此它将最终结果除以 (8*1024*1024) ... 8 和 1024 来自哪里？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-24T17:44:46.220

您正在使用 FAT16。簇用 16 位表示，这意味着 16/8=2 字节。要以字节为单位，结果应除以 8。要以千字节为单位，您应将结果除以 8*1024

# python - 矩阵（绘图）- Python

> ID：10538073
> 
> 赞同：0
> 
> 时间：2012-05-10T16:09:05.343
> 
> 标签：python, matrix

我有 5 个矩阵 c

```
for w in range(len(nR)):
    c = dot(U2, nR[w]) 
```

输出：

```
c[1 2]  
c[3 4]  
c[2 5]  
c[4 1]  
c[2 2] 
```

注：c 是两个矩阵 U2 和 nR 的点积

我尝试分配

```
import matplotlib.pyplot as plt    
    x = c[0]  
    y = c[1]  
    plt.scatter(x,y)  
    plt.show() 
```

但只绘制了一个点。我试图做 for 循环，但似乎不起作用。

请指导我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:21:30.453

假设`c`是您的坐标列表：

```
c = [(1, 2), (3, 4), (2, 5), (4, 1), (2, 2)] 
```

然后你做：

```
import matplotlib.pyplot as plt
x=[i[0] for i in c]
y=[i[1] for i in c]
plt.scatter(x,y)
plt.show() 
```

该列表`x`包含您的 x 值，并`y`包含您的 y 值。

# jquery - 如何在rails中的购物车中添加一些ajax？

> ID：10538078
> 
> 赞同：0
> 
> 时间：2012-05-10T16:09:16.270
> 
> 标签：jquery, ruby-on-rails, ajax

我只想简单地说：当输入值改变时，我会把这个值放在数据库中。我想添加一些ajax。我想这样做：当我更改输入值（focusout）时，我调用了一些方法，使用 get-parametr，我的方法如下所示：

```
def update_quantity
    @cart = current_cart
    @line_item = LineItem.find(params[:id])
    respond_to do |format|
      if @line_item.update_attribute(:quantity, params[:quantity]) #&& @cart.id == params[:cart]
        format.html { redirect_to(@line_item, :notice => 'Line item was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @line_item.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

这是测试工作，所以它可能有一些不好的解决方案，我的观点是这样的：

```
%p
    = line_item.art_name
    = line_item.ART_ID
    = line_item.art_code
    &times
    .cart-quantity
        = line_item.quantity        
        %input{ :class => "quantity", :value => line_item.quantity }
        = link_to "обновить", :controller => "line_items", :action => "update_quantity", :id => line_item.id, :quantity => line_item.quantity, :cart => @cart.id    
    = line_item.total_price 
```

如您所见，我想：当输入焦点消失时，我得到新的隐藏链接，并调用它，它调用了上面写的方法。我需要做什么？要创建什么文件，在哪里创建，以及如何做到这一点？想要一些ajax）

我只想简单地说：当输入值改变时，我会把这个值放在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:35:29.033

您不需要隐藏链接来完成此操作。使用 html 元素的 onblur 字段：

```
:javascript
  function updateQuantity() {
    $.ajax({
       url: "/line_items/update_quantity",
       type: "POST",
       data: {id: $(this).attr('id'), quantity: $(this).attr('quantity'), cart: $(this).attr('cart_id')} 
    })
  }

%input.quantity{:value => line_item.quantity, :onblur => updateQuantity(); :id => line_item.id, :quantity => line_item.quantity, :cart => @cart.id} 
```

在这个例子中，我内联了 javascript，它应该真正进入你的 application.js document.ready() 块

```
$(document).ready(function() {
  $(".quantity").onfocusout(function() {
     $.ajax({
           url: "/line_items/update_quantity",
           type: "POST",
           data: {id: $(this).attr('id'), quantity: $(this).attr('quantity'), cart: $(this).attr('cart_id')} 
        })
  })
}) 
```

# java - 调用方法打印（数组和循环）

> ID：10538079
> 
> 赞同：1
> 
> 时间：2012-05-10T16:09:28.827
> 
> 标签：java, arrays, driver, permutation

```
public class Encryption {
private static final int[] encrypt = {2, 9, 3, 4, 6, 8, 1, 0};
private static final int[] decrypt = new int[8];
private static final int minLength = 10;

String encrypt (String password)    {
    if(password.length()<minLength) {
        return password;

    }   else {
        char[] passArray = password.toCharArray();

        for (int i = 0; i < encrypt.length; i++)    {
            passArray[i] = (char) (passArray[i]);
            }
            return String.valueOf(passArray);
    }
}

String decrypt (String password)    {
    if (password.length()<minLength)    {
        return password;

    }   else {
        char[] arrayDecrypted = password.toCharArray();
        for (int i = 0; i < arrayDecrypted.length; i++) {
            arrayDecrypted[i] = (char) (arrayDecrypted[i]);
        }
        return String.valueOf(arrayDecrypted);
    }
} 
```

//------------------------------------------------ --------------------------

```
import csci130.*;

public class Driver {
public static void main(String args[]){

Encryption pass = new Encryption();

System.out.println("Please enter a password");
String name = KeyboardReader.readLine();

System.out.println("Encrypted Password:  " + pass.encrypt(name));
System.out.println("Decrypted Password:  " + pass.decrypt(name));

  }
} 
```

当我尝试调用我的方法 Encrypt and Decrypt 并让用户输入密码时，它会编译，但只打印出我输入的内容。它假设改变输入的密码以更改索引，而不是在解密时将其更改回来。以上是两个不同的类加密和驱动程序。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:15:53.740

如果您的密码短于 10，您`encrypt()`将按原样返回。

否则，它会遍历您的密码字符并执行以下操作：

`passArray[i] = (char) (passArray[i]);`

我认为很明显这条线没有效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:15:23.810

在您的加密方法中，您为什么要这样做？

```
passArray[i] = (char) (passArray[i]); 
```

你的意图是什么？（提示提示..）

# c++ - 在 C++ 中使用重复的宏

> ID：10538084
> 
> 赞同：3
> 
> 时间：2012-05-10T16:09:44.313
> 
> 标签：c++, c, macros

假设我有这样的宏 `#define MY_MACRO(n) xxxxxxxxx // some code`

然后我想多次使用它

```
MY_MACRO(0)
MY_MACRO(1)
MY_MACRO(2)
MY_MACRO(3)
...
MY_MACRO(100) 
```

有更好的方法吗？（我必须使用宏）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:10:58.773

您可以使用迭代。您可以使用 boost 的预处理器库或编写自己的。祝后者好运……这很复杂。预处理器元编程是一项棘手的工作。

使用 boost 预处理器，您可以执行以下操作：

```
#define MY_MACRO_N(Z,N,D) MY_MACRO(N)

BOOST_PP_REPEAT(101, MY_MACRO_N, ~) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:19:32.287

你可以这样做：

```
int i;
for (i = 0; i <= 100; i++)
    MY_MACRO(i); 
```

通过使用此循环，可能会以( to )`MY_MACRO(n)`的当前值调用 101 次。`i``0``100`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:49:16.750

忘记所有~~受过高等教育的 teoreticians~~批评家，他们只是说**永远永远**不敢使用宏！

宏确实是必要的邪恶。是的，*有时*还有其他选择，例如模板、多态和其他东西。但**并非总是**可以在没有宏用户的情况下摆脱重复。

而且，以我的拙见，宏是比无限次重写相同的东西更好的选择。

现在关于你的问题。如果您的宏计算为一个其参数可能是运行时参数的表达式 - 您可以使用循环。

如果您的宏需要编译时已知常量 - 您可以考虑使用模板（如果适用）。

如果您的宏需要一个数值常量的**表达式**- 没有其他选择。

我只能建议您不要实际重复您的宏 100 次，而是可以做一些技巧，例如：

```
#define MACRO_IX10(m, i) \
    m(i##0) \
    m(i##1) \
    m(i##2) \
    m(i##3) \
    m(i##4) \
    m(i##5) \
    m(i##6) \
    m(i##7) \
    m(i##8) \
    m(i##9)

#define MACRO_IX100(m) \
    MACRO_IX10(m, ) \
    MACRO_IX10(m, 1) \
    MACRO_IX10(m, 2) \
    MACRO_IX10(m, 3) \
    MACRO_IX10(m, 4) \
    MACRO_IX10(m, 5) \
    MACRO_IX10(m, 6) \
    MACRO_IX10(m, 7) \
    MACRO_IX10(m, 8) \
    MACRO_IX10(m, 9) 
```

然后你可以这样做：

```
MACRO_IX100(MYMACRO) 
```

这相当于使用适当的表达式调用您的宏 100 次。

# android - Android - 如何隐藏 ActionBarCombat

> ID：10538095
> 
> 赞同：0
> 
> 时间：2012-05-10T16:10:06.800
> 
> 标签：android, android-layout

我利用 ActionBarCombat 在不同的操作系统版本中拥有一个兼容的 ActionBar。一切正常，但我想让操作栏只显示在平板电脑上。

根据`Build.VERSION.SDK_INT`设备屏幕尺寸 ( `size >=7 inch`)，我确定该设备是平板电脑。

```
public class BaseActivity extends Activity {
//........
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB
                    && isTablet()) {

                Log.d(Constants.LOG_TAG, "OK - display ActionBar");
                ActionBarHelper.createInstance(this);

            } else {
                Log.d(Constants.LOG_TAG, "Do not display ActionBar: SDK_INT: "
                        + Build.VERSION.SDK_INT); //
            }
//......
} 
```

问题是，如果设备不是平板电脑，（所以`ActionBarHelper.createInstance(this);`没有被调用，操作栏仍然显示。我不知道为什么？

然而我注意到一件事。如果我在图形模式下打开 main.xml 布局文件，我会看到操作栏显示在顶部，但是当我在源模式下打开布局文件时，没有。

你知道如何隐藏 ActionBarCombat 吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:25:55.310

您可能可以创建`ActionBarHelperDummy`扩展`ActionBarHelper`. 这`ActionBarHelperDummy`对于它继承自的每个抽象函数都无济于事`ActionBarHelper`。

这样，您将拥有一个扩展的具体类`ActionBarHelper`并且什么都不做。

然后`ActionBarHelper.createInstance()`你会回来`ActionBarHelperDummy`以防万一`Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB`

# ms-access - 删除记录并移动上一个不起作用

> ID：10538098
> 
> 赞同：1
> 
> 时间：2012-05-10T16:10:21.120
> 
> 标签：ms-access, vba

我正在尝试删除一条记录，然后移至已删除记录之前的记录。但我无法让它工作，现在我得到了

> 运行时错误 2046 命令或操作“DeleteReord”现在不可用。

我在这里做错了什么？我该如何处理？

```
 Private Sub Command24_Click()
On Error GoTo Err_Command24_Click

If Me![dbo_HR_Trainings Subform].Form.Recordset.RecordCount > 0 Then
        MsgBox "You cannot delete a category that has members.", vbOKOnly
        GoTo Exit_Command24_Click
Else

        Select Case MsgBox("Are you sure you want to delete this category?", vbYesNo, "Are you sure?")
                Case vbYes
                        DoCmd.RunCommand acCmdSelectRecord
                        DoCmd.RunCommand acCmdDeleteRecord

                        DoCmd.GoToRecord , , acPrevious
                Case Else
        End Select
End If

Exit_Command24_Click:
    Exit Sub

Err_Command24_Click:
    MsgBox Err.Description
    Resume Exit_Command24_Click

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:29:25.730

好像你在调试模式下得到错误。不要在 DoCmd 命令上设置断点。这将**永远**失败。

如果不是这种情况，那么您可以在这里找到一种可能的方法来使用书签来完成您想要的事情：http: [//www.granite.ab.ca/access/positioning_on_a_continuous_form.htm](http://www.granite.ab.ca/access/positioning_on_a_continuous_form.htm)

请注意，该示例适用于连续形式，但您可以理解。

# active-directory - 我在哪里可以找到 LDAP 活动目录消息列表及其含义？

> ID：10538099
> 
> 赞同：11
> 
> 时间：2012-05-10T16:10:22.027
> 
> 标签：active-directory, ldap, distinguishedname

我收到错误消息：

> LDAPException：无效凭据 (49) 无效凭据
> LDAPException：服务器消息：80090308：LdapErr：DSID-0C0903A9，注释：AcceptSecurityContext 错误，数据 52e，v1db1
> LDAPException：匹配的 DN：

列出的列表在哪里：

*   服务器消息：80090308 和含义？
*   LdapErr：DSID-0C0903A9和含义？
*   数据 52e、v1db1 和含义？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T13:03:01.050

即使我还没有 LDAP 代码源，这确实会对您有所帮助：

LDAP 错误代码 49

症状 用户无法登录。atlassian-confluence.log 中出现以下内容：javax.naming.AuthenticationException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903A9, comment: AcceptSecurityContext error, data 701, v1db0]

原因 这个问题可能有很多原因。请检查错误代码（上例中为 701）并与下表中的描述相匹配：

错误代码说明

525 未找到用户

52e 无效凭据

530 此时不允许登录

531 不允许在此工作站登录

532 密码过期（记得检查 osuser.xml 中设置的用户）

533 帐号被禁用

701账号过期

773 用户必须重设密码

775 用户帐户被锁定

在上面的示例中，错误代码是 701（帐户已过期）。

发表于[https://confluence.atlassian.com/display/CONFKB/User+directory+sync+fails+with+LDAP+Error+Code+49](https://confluence.atlassian.com/display/CONFKB/User+directory+sync+fails+with+LDAP+Error+Code+49)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:19:35.443

我不知道具体的清单。第一个数字 (49) 是标准的 Windows 错误代码。您可以使用此工具[http://www.microsoft.com/en-us/download/details.aspx?id=985](http://www.microsoft.com/en-us/download/details.aspx?id=985)来查找它们。忽略“交换”部分。

服务器消息也是一个错误代码 - 与上述相同的工具。

DSID 是指向 AD 源代码中的文件和行号的指针，因此，如果不访问它，它就没有用处。最后，最后两个花絮只是 AD 本身的内部数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T05:33:28.097

“数据”的“52e”表示无效凭据。您的用户名似乎正确，但密码未正确验证。（请参阅上面 Jorge 分享的链接和详细信息）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T20:37:29.410

我用正确的大写/小写解决了我的问题：MYCOMPANY\myuser（因为我用 javascript 做，我不得不使用 MYCOMPANY\\myuser

# android - 当传递 2 个相同的 Parcable 类时，1 为空

> ID：10538103
> 
> 赞同：0
> 
> 时间：2012-05-10T16:10:30.303
> 
> 标签：android, parcelable

我有一个奇怪的问题。我正在尝试将 2 个 parcable 课程从一项活动传递到另一项活动。我以完全相同的方式定义它们，但它们是空的。

可解析类：

```
class Friends implements Parcelable {
private ArrayList<Integer> ids = new ArrayList<Integer>();

private ArrayList<String> names = new ArrayList<String>();
private ArrayList<Bitmap> images = new ArrayList<Bitmap>();

public void addId(Integer id)
{
    ids.add(id);
}
public void addName(String name){
    names.add(name); 
}

public void addImage(Bitmap img){
    images.add(img);
}
public ArrayList<Integer> getIds() {
    return ids;
}

public ArrayList<String> getNames() {
    return names;
}
public ArrayList<Bitmap> getImages() {
    return images;
}
@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeList(ids);
    dest.writeList(names);
    dest.writeList(images);

}
  public static final Parcelable.Creator<Friends> CREATOR = new Parcelable.Creator<Friends>() {
        public Friends createFromParcel(Parcel in) {
            return new Friends(in);
        }
        public Friends[] newArray(int size) {
            return new Friends[size];
        }
    };
public Friends(Parcel in){
 in.readList(ids, null);
 in.readList(names, null);
 in.readList(images, null);
}
public Friends(Integer id, String name, Bitmap img) {
    ids.add(id);
    names.add(name);
    images.add(img);
}
public Friends(){

} 
```

发送部分：

```
 for(Integer position : selectedIds)
      {

            String name = a.getItem(position).getFriendName();
            int id = a.getItem(position).getFriendId();
            Bitmap img = a.getItem(position).getFriendImage();
            Log.e("ID",String.valueOf(id));
            selectedFriends.addId(new Integer(id));
            selectedFriends.addName(name);
            selectedFriends.addImage(img);

      }
      for(int position=0;position<list.getCount(); position++)
      {
            String name = a.getItem(position).getFriendName();
            int id = a.getItem(position).getFriendId();
            Bitmap img = a.getItem(position).getFriendImage();
            Log.e("All IDs",String.valueOf(id));
            allFriends.addId(new Integer(id));
            allFriends.addName(name);
            allFriends.addImage(img);
      }
      b.putParcelable("selecet_friends", selectedFriends);
      b.putParcelable("all_friends", allFriends);
      data.putExtras(b); 
```

两个循环都在运行（我可以看到日志），所有你看不到的变量都被正确初始化，一切都很好。

**Reciving 部分：** 我将两者都定义为 null ：

```
 private Friends selectedFriends = null;
private Friends allFriends = null; 
```

并像这样处理 onResult ：

```
 Log.e("Result","yessss");
            Friends all_friends = (Friends)data.getParcelableExtra("all_friends");
            Friends selected_friends = (Friends)data.getParcelableExtra("selected_friends");
            allFriends = all_friends;
            selectedFriends = selected_friends;
            if(selectedFriends != null){
                Log.e("is null","No");
            }
            if(allFriends != null){
                Log.e("is all null","No");
            } 
```

有谁知道当 allFriends 不是时 selectedFriends 为何为空？

**编辑：** 只是一个想法，但也许是因为我将 2 个 parcables 放在一个 Bundle 上？只是我只是添加了 2 个捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:20:05.877

在发送方法中，您在此行中有错字：

```
b.putParcelable("selecet_friends", selectedFriends); 
```

试试这个：

```
b.putParcelable("selected_friends", selectedFriends); 
```

此外，您应该为键使用更具体的名称。putExtras() 的文档说：

> *向意图添加一组扩展数据。键必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称*

# typo3 - optionSplit，匹配中间项

> ID：10538105
> 
> 赞同：1
> 
> 时间：2012-05-10T16:10:35.570
> 
> 标签：typo3, typoscript

是否可以匹配中间项。像这样：

```
a a ... b ... c c 
```

中间元素得到 b 其余的 a 和 c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:38:38.567

这只有在`a`元素和`c`元素的数量是恒定的情况下才有效，即。

```
a || a  |*|  b  |*|  c||c 
```

这代表 2*a, many b, 2*c

也许更好的解决方案是创建小的扩展，您可以在其中使用任何可用的匹配技术？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:56:23.223

我没有尝试过，但也许：

```
a |*| a || b || c |*| c 
```

# css - 边框：在 IE8 中无效，但在 IE7 中无效？

> ID：10538111
> 
> 赞同：0
> 
> 时间：2012-05-10T16:11:08.557
> 
> 标签：css, internet-explorer-8, internet-explorer-7, border

我有带有 1px 填充的文本输入，有时我会在其上放置 1 px 边框。我希望所有文本输入都填充相同的垂直空间，无论是否有边框。为了实现这一点，我创建了一个“没有边框，但像你一样填充空间”的类，边框：none 和 2px 的填充：

```
.BorderInputNone {
 border: none;
 padding: 2px;
} 
```

这在 IE8 中有效，但在 IE7 中，输入周围有可见的边框。

**编辑：我通过使用边框修复它：透明。**

```
.BorderInputNone {
border: 1px solid transparent;
padding: 1px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:36:42.110

使用`border: 0px;`它似乎更兼容跨浏览器。

[在这里](https://stackoverflow.com/questions/2922909/should-i-use-border-none-or-border-0)检查这个问题

这是修复 IE7 的示例：

[http://jsfiddle.net/Z7Uee/](http://jsfiddle.net/Z7Uee/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:53:10.800

我通过使用边框修复它：透明。

```
.BorderInputNone {
border: 1px solid transparent;
padding: 1px;
} 
```

# node.js - 如何从用户控制台输入中删除新行

> ID：10538114
> 
> 赞同：13
> 
> 时间：2012-05-10T16:11:11.713
> 
> 标签：node.js, networking, input

如何从 Node.js 的用户输入中删除新行？

编码：

```
var net = require("net");

var clientData = null;

var server = net.createServer(function(client) {
    client.on("connect", function() {
        client.write("Enter something: ");
    });
    client.on("data", function(data) {
        var clientData = data;
        if (clientData != null) {
            client.write("You entered " + "'" + clientData + "'" + ". Some more text.");
        }
    });
});

server.listen(4444); 
```

假设我在控制台中输入“Test”，然后返回以下内容：

```
You entered 'Test
'. Some more text. 
```

我希望这样的输出出现在单行中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T17:08:03.560

你只需要去掉尾随的新行。

您可以像这样剪切最后一个字符：

```
clientData.slice(0, clientData.length - 1) 
```

或者您可以使用正则表达式：

```
clientData.replace(/\n$/, '') 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-11T07:32:35.600

在 Windows 中，您可能有 \r\n 。因此，在核心中，它通常是这样完成的：

```
clientData.replace(/(\n|\r)+$/, '') 
```

顺便说一句，`clientData.trim()`功能也可能有用。

# jquery - jQuery Mobile 导航在 SSL 上损坏

> ID：10538115
> 
> 赞同：0
> 
> 时间：2012-05-10T16:11:15.270
> 
> 标签：jquery, ssl, jquery-mobile, asp.net-mvc-4

我在 MVC4 移动网页中使用 JQuery Mobile。当我第一次连接到该站点并尝试转到我的登录页面时，我收到一个错误。相同的代码在桌面版本的相同连接上工作。当我第一次访问桌面上的登录页面（并确认未签名的证书）时，我可以毫无问题地在移动版本上导航。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:31:26.697

我相信当您第一次请求非安全页面时，您的服务器会将您重定向到安全页面。jQuery Mobile 不能很好地处理重定向，因此最好的办法是关闭该特定页面的 AJAX 链接 - 将“data-ajax='false'”属性添加到将您带到登录页面的链接。

# c# - 如何为图形对象创建/分配属性？

> ID：10538116
> 
> 赞同：0
> 
> 时间：2012-05-10T16:11:17.673
> 
> 标签：c#, .net, wpf, xaml

目前，我正在编写一个简单的绘图应用程序，它在画布上绘制线条、椭圆等。然而，这只是开始，我需要允许最终用户更改每个图形对象的属性。假设线条具有应该更改的颜色属性或协调参数。

补充几点：

1.  WPF 应用程序
2.  C＃
3.  用于存储信息的 XML

如果专家给我一些想法并指出如何为对象创建/分配属性，我将不胜感激。

提前致谢。

ak

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:17:14.830

您可以创建[`Shape`](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx#inheritanceContinued)类的实例并使用这些对象的属性来设置颜色等内容。您需要创建允许用户执行此操作的界面。您可以使用[`XamlWriter`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx)和[`XamlReader`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader)类来序列化您的信息。

# linux - 您服务器上的 centOS 当前连接用户

> ID：10538118
> 
> 赞同：0
> 
> 时间：2012-05-10T16:11:33.087
> 
> 标签：linux, centos

我托管在一个装有 CentOS 的 Linux 机器上，我在那里运行一个网络服务器。我想知道如何实时显示正在查看我的网站的实时用户，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:19:39.183

> 我想知道如何实时显示正在查看我的网站的实时用户，可以吗？

嗯，是的，它是，但这取决于您是否要求用户进行身份验证，以便您知道哪些用户特别连接。这更像是一个编程问题，而不是操作系统问题或 Apache 问题。

您可以编写一个简单的脚本，例如，告诉您有多少到端口 80 的活动连接，但这并不表示您有多少唯一用户，或者特别是谁在访问您的网站等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:19:50.557

*如果*您正在编写自己的 Web 应用程序，并且*如果*您要求用户进行身份验证，并且*如果*您为用户被视为“活跃”的时间设定了阈值，那么当然，您可以添加代码以显示当前使用您网站的人员列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T15:19:40.843

我怀疑您正在尝试查看网络上的活动连接列表。

您可以通过运行`netstat -n -A inet`命令来执行此操作。

此列表也可能包含内部连接，包括 Web 服务器、电子邮件、mysql 和任何所需的连接。

但是，最好的方法是按照上面的建议进行应用程序端活动用户列表。

# xml - 如何使用 XSLT 生成多个 HTML 页面？

> ID：10538123
> 
> 赞同：1
> 
> 时间：2012-05-10T16:11:59.117
> 
> 标签：xml, xslt

我有这个 XML 文件。我如何使用这个单一的 XML 文件将它们拆分为多个单独的页面，并使用它们各自的节点进行导航？有人可以给我一个起点吗？

**文件**

```
<Colors>
   <Color>
       <description>
           <p>This page is red.</p>
       </description>
   </Color>
   <Color>
       <description>
           <p>This page is blue.</p>
       </description>
   </Color>
   <Color>
       <description>
           <p>This page is green.</p>
       </description>
   </Color>
<Colors> 
```

**输出：**

```
<html>
    <head></head>
    <body>
    This page is red.
    </body>
</html>

<html>
    <head></head>
    <body>
    This page is blue.
    </body>
</html>

<html>
    <head></head>
    <body>
    This page is green.
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:00:53.843

[`xsl:result-document`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-result-document)可用于从单个样式表输出多个已处理的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:38:42.360

XSLT 1.0 还是 2.0？

恐怕在 1.0 中没有多个输出关键字 - 你必须在外部做一些事情 - 例如带有参数的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output indent="yes" method="html" />

  <xsl:param name="n" select="1"/>

  <xsl:template match="Color">
    <xsl:value-of select="."/>
  </xsl:template>

  <xsl:template match="/Colors">
    <html>
      <head></head>
      <body>
        <xsl:apply-templates select="Color[$n]"/>
      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

并使用不同的参数值重复调用它（在上面的示例中`n`=`Color`要使用的元素的数量 - 1、2、3 等）

在 XSLT 2.0 中看到[这个](http://www.xmlplease.com/xmltraining/xslt-by-example/examples/result-document_1.html)例子

# django - 表单在使用 ajax、django 提交时抛出内部服务器错误

> ID：10538124
> 
> 赞同：0
> 
> 时间：2012-05-10T16:11:59.180
> 
> 标签：django, forms, submit, internal-server-error

我有一个表单，当我用数据提交它时引发内部服务器错误

它说这是由于完整性错误：

```
IntegrityError at /cookbook/createrecipe/

(1048, "Column 'original_cookbook_id' cannot be null") 
```

奇怪的是我没有列 original_cookbook_id - 我所拥有的是 original_cookbook，它是食谱模型的外键

这是给出错误的视图：

```
def createrecipe(request):
        print "entering createrecipeview"
        if request.method == 'POST':
            print "form is a post"
            form = RecipeForm(request.POST)
            print form.errors
            if form.is_valid():
                print "form is valid"
                form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})// this is where the error is being thrown
                form.save()

                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                'form': form,
                })

                data = {
                'replace': True,
                'form': t.render(c),
                'success': True,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain')
            else:
                print "form is invalid"
                form = RecipeForm(request.POST)
                t = loader.get_template('cookbook/create_form.html')
                c = RequestContext(request, {
                    'form':form,
                })

                data ={
                    'form': t.render(c),
                    'success': False,
                }

                json = simplejson.dumps(data)
                return HttpResponse(json, mimetype='text/plain') 
```

我想我可能以错误的方式声明 original_cookbook

其他任何人都有将_id附加到外键的经验/知道我如何能够解决这个问题

多谢

凯蒂

**更新**

这是我的javascript函数

```
<script type="text/javascript"> 

$(document).ready(function(){

    function hijack() {
        var form = $('form#createrecipeform');
        form.each (function(){
            this.reset();
            });
        form.submit(function(e) {
            e.preventDefault();
            console.log('ajax form submission function called successfully.');
            //form = $(this);
            console.log(form)
            var serialized_form = form.serialize();
            $.ajax({ type: "POST", 
                url: $(this).attr('action'),
                data: serialized_form, 
                success: (function(data) { 
                    console.log('ajax success function called successfully.');
                    data = $.parseJSON(data);
                    if (data.success) {
                        console.log('success');
                        //right now it is logging success to 
                        //console but nothing else is happening
                        //what else should happen on data success?
                    } else {        
                        console.log('failure');
                        var newForm = data.form;
                        form.replaceWith(newForm);
                        hijack();
                    }
                })
            });
            return false;
        });
    };

    hijack();

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:28:46.993

你确实有一个`original_cookbook_id`领域。这就是外键的 pk 存储在表中的位置。Django 自动附加该`_id`位。所有错误意味着该字段设置为 NOT NULL，并且您没有提供值`original_cookbook`来填充它。

**更新**

本身并没有什么“错误”，但有几点需要注意。首先，initial 只设置出现在表单中的初始值（很明显）。但是，如果它稍后被用户或其他操作设置为空，它仍然是空的，即`initial`对最终发布的数据没有真正的影响。

您没有发布您的 javascript，因此我无法说明您是如何提交表单的，但这也可能是一个问题。如果您没有与 AJAX 帖子的其余部分一起提交该字段，无论出于何种原因，实际字段可能设置或不设置都无关紧要。

# javascript - 带有 jQ uery 可编辑插件的 Backbone.View

> ID：10538125
> 
> 赞同：0
> 
> 时间：2012-05-10T16:12:09.373
> 
> 标签：javascript, jquery, symfony, backbone.js

我正在尝试在我的 Backbone.View 对象中使用 jQuery 可编辑插件`Symfony2`。

当我`dblclick`在 DOM 元素上执行`class`时，`editable`它会按照我的意愿输入输入元素。
然后，当我执行时，`keypress`我遇到了三个问题：

1.  找不到“POST / [object Object]”的路由 404 Not Found - NotFoundHttpException
2.  模型的键条目“名称”变为空字符串。
3.  观点不变

我的目标是更改主干模型，然后自动更改视图。

```
var MyView = Backbone.View.extend({
        events: {
            "dblclick .editable": "edit",
            "keypress .editable": "updateOnEnter"
        },
       edit: function edit () 
        {
            $(this.el).find(".editable").editable({type:'input'}); // it works
        },

        updateOnEnter: function updateOnEnter (e) 
        {
            if (e.keyCode == 13) {
                this.close();
            }
        },

        close: function close () 
        {
            this._model.set({
                name: $(this.el).find(".editable").text() 
            });
        }
}); 
```

# javascript - JavaScript - 强制行在 Chrome 的循环中执行？

> ID：10538128
> 
> 赞同：1
> 
> 时间：2012-05-10T16:12:21.697
> 
> 标签：javascript

我有一个while循环：

`x = true;
while (x == true) {
   document.images['id'].src = arr[i];
   i = i+1;
   x = confirm('do you want to see more?')
}` 

这向我显示了每张图像，然后询问我是否想在 Firefox 和 ie 上查看更多内容，但在 chrome 和 safari 中，它仅在我离开循环后才显示图像。我知道这很有效，但我想知道是否有办法在我进行时强制执行循环内的行？

感谢您的输入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:14:27.610

您可以添加一系列 setTimeout 而不是循环来强制 javascript 用户线程停止，从而让浏览器刷新绘图。

```
var i = 0; // define outside showNextImage to be properly captured by it.
var showNextImage = function() {
    document.images['id'].src = arr[i]; 
    i = i+1; 
    x = confirm('do you want to see more?');
    if (true) setTimeout(showNextImage, 10);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:15:30.370

两个答案：

1.  不要使用`confirm`
2.  如果你真的要使用`confirm`，请在更新图像之后但之前向浏览器屈服。`confirm`

### 1.不要使用`confirm`

最好的方法是根本不使用`confirm`；它已经过时了，正如您发现的那样，它在不同浏览器上的行为在是否显示页面更改方面略有不同。

相反，我会使用现有的 350,124 个“对话框”库中的任何一个（[jQuery UI](http://jqueryui.com)有一个不错的库，但同样有***很多***），它们异步工作，因此您肯定会看到页面更改。你的循环会变成一个异步函数，但是一旦你习惯了它们并没有那么棘手，而且在用户体验方面的好处是巨大的。

```
function chooseImage(arr, completionCallback) {
    var i = 0, imgElement = document.images['id'];

    ask();

    function ask() {
        imgElement.src = arr[i];
        showDialog(gotAnswer); // the nature of "show dialog" will depend on which one you use
    }

    function gotAnswer() {
        if (userSaidYes) { // Again, depends on the library you're using
            completionCallback(i); // Tell the calling code which one they picked
        }
        else {
            // Is there another?
            ++i;
            if (i >= arr.length) {
                // No, tell the user
                /* left as exercise */

                // Tell calling code none was chosen
                completionCallback(-1); // Using -1 as a flag for none
            }
            else {
                // Yes, ask about it
                ask();
            }
        }
    }
} 
```

### 2.使用`confirm`但屈服

问题在于，`confirm`当浏览器向用户询问问题时，事情会戛然而止。当确认窗口处于活动状态时（如您所见），您对页面所做的更改可能不会显示。

如果你真的想使用`confirm`，你仍然可以这样做，只需先简单地返回浏览器，以便它有时间显示页面更改。**但是请注意**，如果图像需要很长时间才能下载，这仍然不能保证。

```
function chooseImage(arr, completionCallback) {
    var i = 0, imgElement = document.images['id'];

    showAndHandOff();

    function showAndHandOff() {
        imgElement.src = arr[i];
        setTimeout(ask, 0);
    }

    function ask() {
        if (confirm('do you want to see more?')) {
            ++i;
            if (i >= arr.length) {
                alert("Sorry, there aren't any more.");
                completionCallback(-1);
            }
            else {
                showAndHandOff();
            }
        }
        else {
            completionCallback(i);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:24:00.983

例如：

```
var x = true,  
  i = 0,  
  fn = function() {  
    document.images['id'].src = arr[i];  

    x = confirm('do you want to see more?');  
    if ( x ) {  
      i = i+1;  
      setTimeout(fn, 0)  
    }  
  };  
fn(); 
```

# python - 如何在python中制作我自己的映射类型

> ID：10538130
> 
> 赞同：1
> 
> 时间：2012-05-10T16:12:23.297
> 
> 标签：python, mapping

我创建了一个`MyClass`包含大量模拟数据的类。类对具有相似结构的不同模拟的模拟结果进行分组。可以使用`MyClass.get(foo)`方法检索结果。它返回一个带有模拟ID/数组对的字典，数组是`foo`每个模拟的值。

现在我想在我的类中实现一个方法，将任何函数应用于`foo`. 它应该返回一个带有simulationID/function(foo) 对的字典。

对于不需要额外参数的函数，我发现以下解决方案非常令人满意（总是欢迎评论:-)）：

```
def apply(self, function, variable):
    result={}
    for k,v in self.get(variable).items():
        result[k] = function(v)
    return result 
```

但是，对于需要额外参数的函数，我看不到如何以优雅的方式进行操作。一个典型的操作是将`foo`with`bar`作为 x 值的积分，例如`np.trapz(foo, x=bar)`，其中`foo`和`bar`都可以用`MyClass.get(...)`

我在想这个方向：

```
def apply(self, function_call):
    """
    function_call should be a string with the complete expression to evaluate
    eg: MyClass.apply('np.trapz(QHeat, time)')

    """
    result={}
    for SID in self.simulations:
        result[SID] = eval(function_call, locals=...)

    return result 
```

问题是我不知道如何传递本地映射对象。或者，也许我看错了方向。预先感谢您的帮助。

罗尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:37:05.337

你有两种方法。首先是使用[functools.partial](http://file:///usr/share/doc/python2.7-doc/html/library/functools.html#functools.partial)：

```
foo = self.get('foo')
bar = self.get('bar')
callable = functools.partial(func, foo, x=bar)
self.apply(callable, variable) 
```

第二种方法是使用部分使用的相同技术，您可以定义一个接受任意参数列表的函数：

```
def apply(self, function, variable, *args, **kwds):
    result={}
    for k,v in self.get(variable).items():
        result[k] = function(v, *args, **kwds)
    return result 
```

请注意，在这两种情况下，函数签名都保持不变。我不知道我会选择哪一个，也许是第一个案例，但我不知道你正在研究的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:09:34.857

我试图按照我猜测的方式重新创建类结构（的相关部分），它是在你身边设置的（如果你可以提供一个简化的代码示例供人们玩/测试，它总是很方便）。

我认为您正在尝试做的是将变量名称转换为从类中获得的变量，然后在传入的函数中使用这些变量。除此之外，由于每个变量实际上是一个带有键 (SID) 的值字典，因此您希望结果是一个结果字典，并将函数应用于每个参数。

```
class test:
    def get(self, name):
        if name == "valA":
            return {"1":"valA1", "2":"valA2", "3":"valA3"}
        elif name ==  "valB":
            return {"1":"valB1", "2":"valB2", "3":"valB3"}
    def apply(self, function, **kwargs):
        arg_dict = {fun_arg: self.get(sim_args) for fun_arg, sim_args in kwargs.items()}
        result = {}
        for SID in arg_dict[kwargs.keys()[0]]:
            fun_kwargs = {fun_arg: sim_dict[SID] for fun_arg, sim_dict in arg_dict.items()} 
            result[SID] = function(**fun_kwargs)
        return result

def joinstrings(string_a, string_b):
    return string_a+string_b

my_test = test()
result = my_test.apply(joinstrings, string_a="valA", string_b="valB")
print result 
```

因此，apply 方法获取一个参数字典，获取每个参数的类特定数据，并使用这些 (arg_dict) 创建一个新的参数字典。

SID 键是从此 arg_dict 获得的，并且对于其中的每一个，都会计算一个函数结果并将其添加到结果字典中。

结果是：

```
{'1': 'valA1valB1', '3': 'valA3valB3', '2': 'valA2valB2'} 
```

可以通过多种方式更改代码，但我认为这将是最易读的。当然可以加入字典而不是使用第一个元素中的 SID 等。

# csv - 科学数据

> ID：10538136
> 
> 赞同：1
> 
> 时间：2012-05-10T16:12:52.713
> 
> 标签：csv, wolfram-mathematica

我想从损坏的 CSV 文件中导入数据。它包含科学数字，是一个包含大约 300000 行和 27 列的大数据集。当我使用导入它时，

```
Import["data.csv","HeaderLines"->1] 
```

数据格式为字符串。所以我将其更改为数据表格式

```
StringSplit[ToString[data[[#]]], ";"] & /@ 
 Range[Dimensions[
    Import["data.csv"]][[1]]] 
```

我需要使用第一列来分析数据。但问题是这一行是字符串类型的科学数字！！我想把它改成数字。我使用了这个命令：

```
 ToExpression[Internal`StringToDouble[fdata[[All, 1]][[#]]]] & /@ 
  Range[291407]; 
```

但是这样做需要几个小时！你知道我怎样才能做到这一点而不浪费时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:39:14.180

您可以尝试以下方法：

```
(* read the first 5 rows *)
d = ReadList["data.csv", Table[Number, {27}], 5]

(* read the rows 100 to 150 *)
s = OpenRead["data.csv"];
Skip[s, Record, 99]
d = ReadList[s, Table[Number, {27}], 51]
Close[s] 
```

并将`d[[All,1]]`为您提供第一列。

# wordpress - 使用什么 CMS？

> ID：10538138
> 
> 赞同：0
> 
> 时间：2012-05-10T16:12:57.113
> 
> 标签：wordpress, drupal, joomla, content-management-system

我们目前正在建立一个交易聚合网站。它从交易网站收集交易并按类别呈现。我们网站上展示的每笔交易都包含一张照片、描述、位置、价格和交易商店的网址。付款直接到交易网站，因此，我们的网站只是一个没有内页的交易查看器。我们决定在现有的 cms 引擎上构建它，以拥有所有功能，例如管理、搜索等。您会为它推荐什么 cms？Wordpress、Joomla 还是什么？任何其他信息表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:02:27.590

Drupal 是我的选择。它对我的情况非常有用。我使用商务人员的模块。就我而言，以下是基础知识：

1.  意见
2.  视图模式（不同于视图）
3.  Commerce 我已经用了 3 个月了，没有任何问题。他们最近还发布了过期购物车，因此您无需对其进行编程，只需对其进行自定义即可。如果您不需要非常复杂的东西，他们还有一个简单的模块商业库存。
4.  如果您想使用最少的模板，请查看显示套件。

Drupal 的好处是自定义事物是多么容易。我也在 Joomla 工作过。但我觉得 Drupal 在某些方面更灵活。我喜欢 Drupal 的一个功能（不确定其他人是否有）是，当有安全更新或任何更新时，它会在您的站点中显示通知。

您可以找到有关这些模块的更多信息并了解它们是如何工作的。这是我最喜欢的链接：

**商务模块**

1.  [演示](http://demo.commerceguys.com/dc/)
2.  [商务模块视频](http://vimeo.com/channels/commerceguys)

**意见**

*   [查看简单介绍](http://lin-clark.com/blog/intro-drupal-7-intro-views-pt-1)

**视图模式**

*   [查看模式 drupalconf](http://blip.tv/drupalcondenver/view-modes-the-many-faces-of-your-content-6039335)

**展示套件**

*   [伦敦展示套房会议](http://london2011.drupal.org/category/tags/display-suite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:17:11.577

德鲁巴。这就是它的设计目的，并且该 CMS 的在线资源比其他任何资源都多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:17:38.340

Drupal 是您最好的开源选择。大量支持和 [相对] 无痛部署。如果您想要更多定制，请查看 Refinery (Ruby on Rails) 之类的东西。

# php - 在配置文件中加载模型以从数据库中提取配置并存储在 $config 数组中

> ID：10538141
> 
> 赞同：1
> 
> 时间：2012-05-10T16:13:13.647
> 
> 标签：php, codeigniter, codeigniter-2

我正在改装现有网站以使用 codeigniter。当前系统使用以下格式的 XML 将导航配置存储在单个表格单元格中：

```
<NAVIGATION>
  <item1>
    <id>1</id>
    <name>Home</name>
    <link></link>
    <parent>0</parent>
    <target>_self</target>
    <rel>follow</rel>
    <menu>main</menu>
  </item1>
  <item2>
    <id>2</id>
    <name>Some Page</name>
    <link>some-page</link>
    <parent>0</parent>
    <target></target>
    <rel>follow</rel>
    <menu>main</menu>
  </item2>
</NAVIGATION> 
```

我不确定最初的开发者的想法是什么，但出于无法解释的原因，我想暂时保持这种格式。

我创建了一个导航模型，该模型从数据库中提取此 XML 并将其转换为数组。

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Navigation_model extends CI_Model
{

    function __construct()
    {
        parent::__construct();  
    }

    function get_navigation()
    {
        $this->db->select('pages.block');
        $this->db->from('pages');
        $this->db->join('style','style.styleID = pages.styleID','left');
        $this->db->where('style.name','data');
        $this->db->where('pages.locID',$this->config->item('splitID'));
        $this->db->like('pages.block','<NAVIGATION>');
        $navigation_query = $this->db->get();
        $navigation_row = $navigation_query->row_array();
        return xml2array($navigation_row['block']);
    }
}

/* End of file navigation_model.php */
/* Location: ./application/model/navigation_model.php */ 
```

我要做的是将这个模型加载到一个名为 navigation.php 的配置文件中，并将导航数组加载到全局 $config 数组中。我尝试了自动加载模型和在 navigation.php 中加载，但无济于事。

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$this->load->model('Navigation_model');
var_dump($this->Navigation_model->get_navigation());

/* End of file navigation.php */
/* Location: ./application/config/navigation.php */ 
```

我不断收到以下错误：

> 严重性：通知
> 
> 消息：未定义的属性：CI_Config::$load
> 
> 文件名：config/navigation.php
> 
> 行号：3

我怎样才能最好地完成我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:33:48.843

另一种选择是在您的配置文件 config/navigation.php 中执行此操作

```
 $CI =& get_instance();
 $CI->load->model('navigation');
 $config = $CI->navigation->get_navigation(); 
```

这样，您将能够像访问任何其他配置一样访问导航配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:22:25.093

我可以考虑两种选择来实现这一点。

**1.扩展CI_Controller**

通过这种方式，您可以创建一个扩展基本控制器功能的类，自动加载模型并为子类提供获取菜单的方法。

```
class MY_Controller extends CI_Controller {

    protected $navigation; 

    function __construct() {
        parent::__construct();
        $this->load_config();
    }

    protected function load_config() {
      $this->load->model('Navigation_model');
      $this->navigation = $this->Navigation_model->get_navigation();
    }
} 
```

**2\. 提供导航助手**

借助助手，您可以轻松获取您可能需要的所有位置的导航内容。

navigation_helper.php

```
function get_navigation() {
    $ci =& get_instance();
    $ci->load->model('Navigation_model');
    return $ci->Navigation_model->get_navigation(); 
} 
```

在你的控制器中：

```
function index() {
    $this->load->helper('navigation'); //or autoload...
    $nav = get_navigation();
} 
```

# java - 聊天应用安卓

> ID：10538146
> 
> 赞同：0
> 
> 时间：2012-05-10T16:13:34.383
> 
> 标签：java, android, xml, chat

我正在开发一个允许用户聊天的 android 应用程序我创建了一个界面及其聊天代码..

但我不知道如何为每个联系人共享此界面以及如何显示他的对话？

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:16:45.053

您可能需要详细说明以获得更好的答案。尽量做到具体。即，您打算使用什么技术来建立两个聊天者之间的联系？

SDK中有一个很好的例子，它实现了一个蓝牙聊天客户端

[http://developer.android.com/resources/samples/BluetoothChat/index.html](http://developer.android.com/resources/samples/BluetoothChat/index.html)

如果我是你，我肯定会深入研究。即使您不希望通过蓝牙建立连接，它也应该让您了解如何将传入和传出的聊天消息连接到屏幕上的视图

# objective-c - 以编程方式设置 UITableViewController 的显式大小

> ID：10538148
> 
> 赞同：0
> 
> 时间：2012-05-10T16:13:39.543
> 
> 标签：objective-c, ios, xcode, frame

我希望能够根据内容设置我的表格视图的大小。我认为我可以在 prepareForSegue 中执行此操作，因为如果在我的 rootViewController 中按下按钮，我的 tableview 会显示为弹出框。所以我正在尝试设置显式大小，就像我可以在情节提要中做的那样，但我想以编程方式进行。我试过self.tableview.frame.size，但它得到一个错误，说它不可分配？

```
if([[segue identifier] isEqualToString:@"tagView1"])
{
    TagTableViewController *tvc = [segue destinationViewController];
    tvc.tableView.frame = CGRectMake(tvc.tableView.frame.origin.x, tvc.tableView.frame.origin.y , 100, 100);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:53:52.290

在 TVC 中`viewDidLoad`：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.clearsSelectionOnViewWillAppear = NO;
    // Change to what you need
    self.contentSizeForViewInPopover = CGSizeMake(150.0, 250.0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:19:15.820

你必须设置整个`frame`. 如果您想`origin`保持不变，请执行以下操作：

```
self.tableview.frame = CGRectMake(self.tableview.frame.origin.x, self.tableview.frame.origin.y, __width__, __height__); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T10:44:47.470

尝试在 TVC 的 vieDidAppear: 中设置表格的大小。

像：

-(void)viewDidAppear:(BOOL)动画{

```
[super viewDidAppear:animated];

[self.tableView setFrame:CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.frame.size.width, self.tableView.frame.size.height - 50)]; 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T16:16:15.853

尝试`self.tableview.frame = (CGRect){self.tableview.frame.origin, newSize};`

与 相同`self.tableview.frame = CGRectMake(self.tableview.frame.origin.x, self.tableview.frame.origin.y, newSize.width, newSize.height);`，只是更短。

您不应该直接设置大小，因为在这种情况下不会通知观察视图框架的其他对象。

# json - JSON 字符串，以数组开头

> ID：10538149
> 
> 赞同：0
> 
> 时间：2012-05-10T16:13:47.657
> 
> 标签：json

我有以下字符串：

```
[{"result": True}]
[{"result": False}, {"info": "Describing error}] 
```

这个字符串是正确的 JSON 字符串吗？或者我应该使用 smth。像这样：

```
{"result": False, "info": "error"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:19:16.007

第一个将解析为带有一个 Dictionary 的数组

第二个将解析为具有两个字典的数组（顺便说一句，您缺少字符串上的结束引号）

第三个将解析为字典。

这完全取决于您希望/需要如何使用 JSON 响应。这三个都可以吃，就看你的情况了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:19:19.780

第一个是有效的 JSON 字符串（具有一个元素的数组）。第二个缺少报价，但在修复后它是有效的。

# excel - 在 Excel VBA 中填充多个图形

> ID：10538150
> 
> 赞同：1
> 
> 时间：2012-05-10T16:13:51.260
> 
> 标签：excel, vba

我有一个 Excel 宏，它从 .csv 文件填充图表，其值从单元格开始`A1`，`B1`在 x 和 y 轴上。现在，当我添加多个值范围为`A3`,的 .csv 文件时`B3`，它会引发错误，指出单元格为空。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:10:42.027

换行

```
Plot_y = Range("C1", Selection.End(xlDown)).Rows.Count
Plot_x = Range("D1", Selection.End(xlDown)).Rows.Count 
```

到

```
Plot_y = Range("C" & Rows.Count).End(xlUp).Row
Plot_x = Range("D" & Rows.Count).End(xlUp).Row 
```

然后再试一次。

# python - 如何使用 MySQL executemany 更新 Python 中的列表列表？

> ID：10538153
> 
> 赞同：1
> 
> 时间：2012-05-10T16:14:02.230
> 
> 标签：python, mysql, list, executemany

我有一个列表列表：`myList = [[123, 345], [23, 45], [54, 34]]`

我想做这样的事情：

```
cursor.executemany("update tablename set flag = 'yes' where id = %s and officeid = %s", myList) 
```

我搜索了这个并没有找到解决方案。如果它永远不会实现，那么在不必遍历列表中的所有元素的情况下，有什么更好的更新语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:18:11.477

```
update tablename set flag = 'yes' 
WHERE (id,officeid) IN ((123,345), (23,45), (54,34)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:28:18.990

```
myTuples = tuple(map(tuple, myList))

cursor.execute("update tablename set flag = 'yes' \
where (id, officeid) in " + str(myTuples)) 
```

# session - 具有两个模型会话的 Cakephp 身份验证组件

> ID：10538159
> 
> 赞同：13
> 
> 时间：2012-05-10T16:14:10.123
> 
> 标签：session, cakephp, authentication, cookies, cakephp-2.0

我有两个 cakephp2 应用程序在同一个数据库上运行，但是有不同的 Auth 表和不同的 $this->Auth->userModel 值。身份验证运行良好，一个应用程序的用户无法登录另一个应用程序。

但是.. 由于应用程序使用相同的 CAKEPHP 会话 cookie，会发生这种情况：当来自应用程序“一”的用户登录时，它可以访问应用程序“二”中的任何 Auth 保护操作！

我可能会使用不同的用户角色和 cookie 名称。但是，为什么 Auth 组件在检查会话时忽略 Auth->userModel 设置？有没有办法将其配置为在这种情况下正常工作？

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T14:44:23.960

如果没有另外配置，AuthComponent 会将经过身份验证的用户记录写入`Auth.User`CakePHP 2 中的会话密钥。[但可以更改：](http://api13.cakephp.org/class/auth-component)

> **AuthComponent::sessionKey**
> 
> 存储当前用户记录的会话密钥名称。如果未指定，它将是“Auth.User”。

（在 CakePHP 1.3[中这是不同](http://api13.cakephp.org/class/auth-component)`Auth.{$userModel name}`的：）

因此，如果您的应用程序共享一个会话，他们这样做，如果 cookie 名称和`Security.salt`匹配，登录记录将被共享。

解决这个问题有两种可能：

### 分开登录

只需`AuthComponent::sessionKey`为您的两个模型设置不同的值。这将允许他们单独保留登录用户

### 分开会话

为两个应用程序配置不同的 Cookie 名称和 Salts，因此它们的会话不能相互覆盖。这可能是更清洁的解决方案，因为它还涵盖了其他会话密钥被双重使用的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T04:05:27.030

我有一个类似的问题，这就是为什么我在这个问题上开始赏金。基本上，我有一个应用程序的面向公众的部分，它允许用户从一个表登录，而应用程序的一个管理部分允许管理员使用不同的表登录。我的 AppController 看起来像这样：

```
public $components = array(
    'Session',
    'Auth' => array(
        'autoRedirect' => false,
        'authenticate' => array(
            'Form' => array(
                'userModel' => 'User'
            )
        ),
        'loginAction' => array('controller' => 'users', 'action' => 'login'),
        'loginRedirect' => array('controller' => 'users', 'action' => 'overview'),
        'logoutRedirect' => array('controller' => 'users', 'action' => 'loggedout')
    )
); 
```

我有另一个 AdminController 我有这个：

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'CustomForm' => array(
                'userModel' => 'Admin'
            )
        ),
        'loginAction' => array('controller' => 'admin', 'action' => 'login'),
        'loginRedirect' => array('controller' => 'admin', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
    )
); 
```

但正如在这个问题中提到的，来自两者的会话不会相处并相互覆盖。克服这个问题的最佳方法是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:52:41.207

使用 MyDatabaseSession 之类的东西扩展 Model/Datasource/Session/DatabaseSession.php 会话处理程序并覆盖写入和读取方法。也许只需复制两种方法的现有代码并添加类似

'app_id' => 配置::read('App.appId')

到 read() 条件并在 write 方法中执行相同的操作。并且不要忘记将该字段添加到您的会话数据库架构中并[配置会话以使用您的处理程序](http://book.cakephp.org/2.0/en/development/sessions.html#built-in-session-handlers-configuration)。

```
<?php
App::uses('DatabaseSession', 'Model/Datasource/Session');
class ExtendedDatabaseSession extends DatabaseSession  {

    public function read($id) {
        $row = $this->_model->find('first', array(
                'conditions' => array(
                    'app_id' => Configure::read('App.appId'),
                    $this->_model->primaryKey => $id)));

        if (empty($row[$this->_model->alias]['data'])) {
            return false;
        }

        return $row[$this->_model->alias]['data'];
    }

    public function write($id, $data) {
        if (!$id) {
            return false;
        }
        $expires = time() + $this->_timeout;
        $record = compact('id', 'data', 'expires');
        $record[$this->_model->primaryKey] = $id;
        $record['app_id'] = Configure::read('App.appId');
        return $this->_model->save($record);
    }
} 
```

我不知道你的应用程序，所以你是否将应用程序 ID 写入配置数据取决于你，引导程序或 beforeFilter() 可能。我认为您应该在会话初始化之前添加它，否则您需要重新启动会话或其他东西。我把它留给你看正确的观点。:)

# sql-server - Convert SSMS .rpt output file to .txt/.csv

> ID：10538162
> 
> 赞同：59
> 
> 时间：2012-05-10T16:14:17.470
> 
> 标签：sql-server, sql-server-2005, character-encoding, ssms, rpt

I want to export my big SSMS (SQL Server Management Studio) query result (2.5m lines, 9 fields) as .csv or comma-delimited .txt (with headings). (MS SQL Server 2005 Management Studio.)

So that I can then either read it line-by-line into VBA program (to do certain calculations on the data) or do queries on it in Excel (e.g. with Microsoft Query). The calculations are complicated and I prefer to do it somewhere else than SSMS.

If I choose ‘query result to text’ in SSMS and a small answer (few lines e.g. up to 200k) I could of course simply copy and paste to a text editor. For my large answer here I could of course copy and paste 200k or so lines at a time, 10 times, into a text editor like Ultra-Edit. (When I try all 2.5m at once, I get a memory warning inside SSMS.) But for the future I’d like a more elegant solution.

For ‘query result to file’, SSMS writes to an .rpt file always. (When you right-click in the results window and choose ‘save as’, it gives a memory error just like above.)

--> So it looks like my only option is to have SSMS output its result to a file i.e. .rpt and then afterwards, convert the .rpt to .txt.

I assume this .rpt is a Crystal Reports file? Or isn't it. I don’t have Crystal Reports on my PC, so I cannot use that to convert the file.

When opening the .rpt in Ultra-Edit it looks fine. However in Microsoft Query in Excel, the headings doesn’t want to show.

When I simply read & write the .rpt using VBA, the file halves in size. (330meg to 180meg). In Microsoft Query the headings do show now (though the first field name has a funny leading character, which has happened to me before in other totally different situations). I do seem to be able to do meaningful pivot tables on it in Excel.

However when I open this new file in Ultra-Edit, it shows Chinese characters! Could there still be some funny characters in it somewhere?

--> Is there perhaps a free (and simple/ safe) converter app available somewhere. Or should I just trust that this .txt is fine for reading into my VBA program.

Thanks

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2015-07-17T15:26:54.130

Simple way: In SQL Server Management Studio, go to the "Query" menu & select "Query Options…" > Results > Text > Change "Output Format" to "Comma Delimited". Now, run your query to export to a file, and once done rename the file from `.rpt` to `.csv` and it will open in Excel :).

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-03-15T17:43:43.750

Here is my solution.

*   Use Microsoft SQL Server Management Studio
*   Configure it to save Tab delimited .rpt files: Go to '**Query**' > '**Query Options**' > '**Results**' > '**Text**' > '**Output Format**' and choose '**Tab delimited**' (press OK)

[![enter image description here](../Images/5e80c057c6dc40205703e3dd5fab3e8c.png)](https://i.stack.imgur.com/NwfAf.png)

*   Now, when you create a report, use the '**Save With Encoding...**' menu, and select '**Unicode**' (by default, it's 'UTF8')

[![enter image description here](../Images/c7271ac9fbe9bf823c0ff58892039613.png)](https://i.stack.imgur.com/xyR4n.png)

*   You can now open the file with Excel, and everything will be in columns, with no escaping nor foreign characters issues (note the file may be bigger due to unicode encoding).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-15T09:47:14.277

Well with the help of a friend I found my solution: Rpt files are plain text files generated in MS SQL Server Management Studio, but with UCS-2 Little Endian encoding instead of ANSI.

--> In Ultra-Edit the option ‘file, conversion options, **unicode to ASCII**’ did the trick. The text file reduces from 330meg to 180 meg, Microsoft Query in Excel can now see the columns, and VBA can read the file & process lines*.

P.s. Another alternative would have been to use MS Access (which can handle big results) and connect with ODBC to the database. However then I would have to use Jet-SQL which has fewer commands than the T-SQL of MS SQL Server Management Studio. Apparently one can create a new file as .adp in MS Access 2007 and then use T-SQL to a SQL Server back end. But in MS Access 2010 (on my PC) this option seems not to exist anymore.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-09T02:48:41.617

You can use [BCP](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

Open a command prompt, then type this:

```
SET Q="select * from user1.dbo.table1"
BCP.EXE %Q% queryout query.out -S ServerName -T -c -t 
```

*   You can use `-U -P` (instead of `-T`) for SQL Authentication.
*   Your app have a problem with UNICODE. You can force a code page using `-C {code page}`. If in doubt, try 850.

*   `-t` will force tab as field delimiter, you can change it for comma `-t,`

The nice thing is you can call this directly from your VBA running shell command.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-15T13:05:11.943

This is the recommended way I see you can do it.

* * *

[My Source](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/4aa2e8cb-9c03-451d-8f78-0bf38f8edf81/) (Answer from DavidAir)

Pick "results to grid" then then right-click on the grid and select "Save Results As..." This will save a CSV.

Actually, there is a problem with that if some values contain commas - the resulting CSV is not properly escaped. The RPT file is actually quite nice as it contains fixed-width columns. If you have Excel, a relatively easy way of converting the result to CSV is to open the RPT file in Excel. This will bring up the text import wizard and Excel would do a pretty good job at guessing the columns. Go through the wizard and then save the results as CSV.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-20T17:06:55.167

I recommend using the "SQL Server Import and Export Wizard" for a couple reasons:

*   The output file will not have a status message at the bottom like a .rpt file does (ie. "(100 rows affected)") which may mess up your data import
*   Ability to specify custom row and column delimiters of a length greater than 1 character
*   Ability to specify custom source to destination mapping (ie. column FirstName can be mapped to first_name in the CSV)
*   Ability to perform a direct transfer to any other database accessible from the SSMS machine
*   Ability to explicitly select your file encoding and locale

It can be accessed by right-clicking on your database in the management studio (you must right-click the database and not the table) and selecting Tasks > Export Data.

[![Selecting the data export tool from the SSMS object explorer](../Images/abc94c6249b40925f16399631fb94820.png)](https://i.stack.imgur.com/v4vKz.jpg)

When asked for data source you can select the "SQL Server Native Client" and when asked to select a destination you can select "Flat File Destination".

You are then asked to specify a table or query to use.

You can find more info about the tool here:

[https://docs.microsoft.com/en-us/sql/integration-services/import-export-data/start-the-sql-server-import-and-export-wizard?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/integration-services/import-export-data/start-the-sql-server-import-and-export-wizard?view=sql-server-2017)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-15T11:42:53.603

In my case, I execute a query on SSMS (before that press CTRL+SHIFT+F) the result open a window to save it as an rpt file, I couldn´t read it (no Crystal Report install in my computer) so...next time I runned the query I saved it as (all files) set with extension *.txt, and that´s it I was able to read it as text file.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-18T17:09:22.130

First get your data in .rpt file by using any of above method.

Default .rpt with fixed space column. (262MB)

Comma delimited with Unicode. (52MB) **- I used this.**

Change file extension to .csv.

Open/Import it in excel and verify data. File type is 'Text Unicode'.

Save it as **CSV (Comma Delimited)**, which **reduced size to 25 MB**.

# layout - JQuery Mobile - 优化单选按钮组的布局 - 不同大小的设备

> ID：10538163
> 
> 赞同：0
> 
> 时间：2012-05-10T16:14:17.610
> 
> 标签：layout, jquery-mobile, formatting

我们正在测试针对手机大小设备和平板电脑的应用程序的 jquery mobile。在应用程序的一部分中，会询问一组或多组可能的答案（每组可以有 1 个单选按钮作为答案）。

在小型设备（电话）上，可以使用每个组的多个单选按钮垂直完成应答组）并且 UI 很好，尽管需要滚动。

然而，在有更多房地产的平板电脑上，我们希望有一个包含 2 列或更多列单选按钮的组，并根据可用房地产将它们水平放置并溢出到新的“行”，以优化可用房地产并最小化或最好消除滚动，当然也不要像 jquery mobile 那样让单选按钮在更广泛的区域疯狂伸展。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:36:03.417

我昨天正在阅读同样的问题。您必须使用**`media`**查询来制作**响应式 CSS**。

[**这是来自IBM**](http://www.ibm.com/developerworks/web/library/mo-jquery-responsive-design/index.html)的出色指南[](http://www.ibm.com/developerworks/web/library/mo-jquery-responsive-design/index.html)

 **希望能帮助到你！（如果它好，也给我打分:)）**

# c# - Socket.Connect 抛出和我无法捕捉到的错误

> ID：10538170
> 
> 赞同：1
> 
> 时间：2012-05-10T16:14:50.450
> 
> 标签：c#, .net, sockets, tcp

如果这已在 SO 上得到回答，我深表歉意。我看了但没找到。我的情况是我的客户可以通过本地网络或通过 Verizon 调制解调器远程连接到他们的 TCP 服务器。（我正在使用 .NET 3.5 - C#）

当我从其中任何一个连接时，一切都很好。但是如果我不小心在“错误”的网络上（例如：我在星巴克并登录到他们的无线网络。我忘记了，以为我在 Verizon 卡上，所以，现在我尝试登录）服务器拒绝联系。美好的。但是我的 Try/Catch 没有捕获任何东西......它只是退出例程（如果我通过线程池调用它）或者如果我直接调用它会挂起。

这是代码（失败： m_clientSocket.Connect(ipEnd) ）：

```
tcpConnectionObject passedTCPObject = (tcpConnectionObject) obj;
if (checkNetStat(passedTCPObject) == false)
{
     updateStatus(false);
     return;
}

try
{
     m_clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
     IPAddress ip = IPAddress.Parse(passedTCPObject.ipString);
     int iPortNo = System.Convert.ToInt16(passedTCPObject.portString);
     IPEndPoint ipEnd = new IPEndPoint(ip, iPortNo);

     m_clientSocket.Connect(ipEnd);
     if (m_clientSocket.Connected)
     {
          updateStatus(true);
          //Wait for data asynchronously 
          WaitForData();
     }
}
catch (SocketException e)
{
     updateStatus(false);
     return;
}
catch (Exception e)
{
     updateStatus(false);
     return;
}

updateStatus(true);
return ; 
```

我使用线程池从 Winform 调用它：

```
tcpConnectionObject passObject = new tcpConnectionObject(serverIP, serverPORT);
        ThreadPool.QueueUserWorkItem(new WaitCallback(SRVR_CONNECT.connectToTCP), passObject); 
```

这在表单的 SHOW() 方法中调用。当我这样做时，我的表单会显示，但状态永远不会改变（它应该是任何结果）如果我在上面放置一个调试器，并开始逐步执​​行，我会到达 Socket.Connect()并且调试器只是退出了方法，我的表单就显示出来了。我从来没有击中过我的任何球。

我已经尝试了 Socket 可以生成的所有错误，但它从来没有捕获任何东西。当我运行调试器时，只要我点击该行，它就会退出我的方法，但没有可以捕获的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:17:19.300

它退出您的方法，因为您的 catch 块中有一个 return 语句。您是在告诉它显式返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:18:46.093

如果您确实在异步等待（正如您在评论中所述），那么您可能在实际获得异常之前退出 try/catch 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T03:12:04.407

好的，我认为彼得是在正确的轨道上。似乎调试器只是跳过了我的 Connect 行并在等待 Socket.Connect() 完成时移至下一行（如果这有意义吗？）

这是有效代码的更改...我将数据包创建和回调定义移出“WaitForData”并改用beginConnect方法。然后我可以设置一个超时，这让我知道它失败了——所以代码变成了这样：

```
 try
       {
           m_clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
           // Cet the remote IP address
           IPAddress ip = IPAddress.Parse(passedTCPObject.ipString);
           int iPortNo = System.Convert.ToInt16(passedTCPObject.portString);
           // Create the end point 
           ipEnd = new IPEndPoint(ip, iPortNo);

           Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
           SocketPacket theSocPkt = new SocketPacket();
           if (m_pfnCallBack == null)
           {
               m_pfnCallBack = new AsyncCallback(OnDataReceived);
           }
           // Give It 5 Seconds to connect
           IAsyncResult result = socket.BeginConnect(ipEnd, m_pfnCallBack, theSocPkt);
           bool success = result.AsyncWaitHandle.WaitOne(5000, true);

           if (!success)
           {
               socket.Close();
               throw new ApplicationException("Server Refused Connection");
           }
           // Success
           updateStatus(true);
       }
       catch (SocketException e)
       {
           updateStatus(false);
           return;
       }
       catch (Exception e)
       {
           updateStatus(false);
           return;
       } 
```

# asp.net-mvc - 如何将我的模型类与 MVC 3 中的现有数据库联系起来？

> ID：10538174
> 
> 赞同：0
> 
> 时间：2012-05-10T16:15:13.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我已经在 Models 文件夹中编写了我的类，并且我已经有一个数据库，其中包含 SQL Express 中的数据。我想做的只是将两者联系在一起。我该怎么做呢？我所看到的只是代码优先（类创建数据库/表），但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:24:56.590

正如 Andrew Barber 在他的评论中指出的那样，如果您的模型中的类与数据库中的表不完全相同，那么使用 Code First 的 EF 是可行的方法。即使结构与当前版本的 EF 不兼容，也可以在使用视图和存储过程等方面为您提供很多帮助。

Scott Guthrie 有一篇很棒的[博客文章](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx)可以帮助您入门。

# facebook - 哪些用户帖子通过 Facebook 图表可见？

> ID：10538176
> 
> 赞同：1
> 
> 时间：2012-05-10T16:15:26.270
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我正在提出如下请求：

[https://graph.facebook.com/USER_ID/posts?access_token=TOKEN](https://graph.facebook.com/USER_ID/posts?access_token=TOKEN)

当 TOKEN 来自 Graph API Explorer（从[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)以我自己的用户帐户登录）时，我会看到大多数用户的一些帖子。

当 TOKEN 是我自己的应用程序和我自己的用户帐户的用户令牌时，由客户端流程 [*] 产生，我`{ "data": [] }`几乎可以看到每个人。

什么可能导致差异？据我所知，这两个令牌被赋予了相同的权限（我从[https://graph.facebook.com/me/permissions?access_token=TOKEN](https://graph.facebook.com/me/permissions?access_token=TOKEN)获得了两个令牌的相同回报）。

我能想到的是，我正在寻找的帖子的用户不是我的应用程序的用户，但也许每个人都神奇地成为了 API Explorer 的用户。但是我想看到的关于他们的信息对我来说是可见的，无论是在他们的用户页面上，还是从使用 API Explorer 令牌的 Graph 中，所以这肯定不是安全限制：*我*可以获得一个向我显示我的信息的令牌想要，但我的应用程序不能。因此：

*   为什么我在使用我的应用程序时看不到帖子？
*   我该怎么办？
*   我们目前的理论是 API 浏览器具有访问公共数据的特权，而其他应用程序无法获得。真的是这样吗，或者我可以用我的应用程序做些什么来查看公共数据`/posts`？

[*] 使用 URL：[https ://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=manage_pages,read_stream,read_requests,user_location,user_activities&response_type =令牌](https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=manage_pages,read_stream,read_requests,user_location,user_activities&response_type=token)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:49:13.883

我明白你在说什么，我自己测试过，我得到了同样的结果。这是我认为正在发生的事情，但这只是一个猜测。

从我刚刚测试的结果来看，使用图形浏览器应用程序时返回的数据是用户的公共数据，比如新朋友和公共帖子。如果我去 facebook 中的用户个人资料，我可以看到相同的确切数据。

为什么您的应用程序没有获得该公共数据？好吧，Facebook 为某些应用程序授予特殊权限，而对于他们的应用程序图形浏览器来说，认为他们这样做并不牵强。为了测试这个理论，我删除了我对图形浏览器的所有权限，并试图获取不是我朋友的用户的帖子，实际上我得到了相同的结果。当我用“我/帖子”测试它时，我得到了我的帖子，而不仅仅是公开的帖子。如果您从自己的应用程序中删除权限，那么即使您的帖子也会返回*data: []*。

您的应用程序只能获取登录用户及其朋友的数据。

# pdf - 使用 Ghostscript 转换带注释的 PDF 但没有注释

> ID：10538182
> 
> 赞同：0
> 
> 时间：2012-05-10T16:15:37.333
> 
> 标签：pdf, comments, ghostscript

绅士们，

我正在使用 GhostScript for Windows 的命令行版本将 PDF 转换为 PNG 图像。但是我注意到注释（例如注释、形状、附加文件——用户可以放在原始 PDF 之上的任何内容）也被转换并出现在图像输出中。有什么方法可以让 Ghostscript 忽略 PDF 中的注释？

感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T20:44:02.760

我有同样的问题。我在 GhostScript 中找到了一个关闭注释打印的设置（在他们的文档中称为注释）。 [http://www.ghostscript.com/doc/current/Use.htm](http://www.ghostscript.com/doc/current/Use.htm)

开关是`-dShowAnnots=false`区分大小写的。例如，要将文件转换为 PNG（这也是我想要做的），您可以使用以下内容：

```
gswin64c -sDEVICE=png16m -sOutputFile="OutFile.png" -r300 -dShowAnnots=false "InputFile.pdf" 
```

使用这种命令行格式正是我想要的：源 PDF 的第一页以 300 DPI 转换为不透明的真彩色 PNG 格式，没有来自 PDF 的任何注释。

# mysql - MySQL：将分区添加到现有表（包含数据）？

> ID：10538183
> 
> 赞同：4
> 
> 时间：2012-05-10T16:15:37.530
> 
> 标签：mysql

我有一张有 100 万条记录的表。因为我的查询将基于一列（32 个常量）邮寄。我正在尝试添加 32 个分区使用类型列表。

我的应用程序无法停止，同时会插入一些记录？我可以在表中添加分区吗？会不会影响我的申请。例如在分区期间锁定一些行。

我在网上搜索，但没有找到太多关于将分区添加到现有表的故事的资料？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-20T02:52:13.167

在不影响应用程序的情况下进行此类表迁移的常用方法是执行以下步骤：

1.  创建一个包含您需要的修订的重复表（在您的情况下是分区）
2.  在原始表上设置触发器以插入到重复的表中（这将在短时间内充当复制的一种形式）
3.  以不会妨碍您的应用程序的速度开始从原始表迁移到新表（例如一次 1000 行）
4.  迁移完成后，您的表将完美同步，此时您可以修改应用程序以开始使用新表进行读写。
5.  一旦您对使用新表的应用程序正常运行感到满意，请删除旧表。
6.  迁移完成，喝啤酒。

# c# - 是否有 Winforms 的虚拟键盘组件/库之类的东西？

> ID：10538185
> 
> 赞同：0
> 
> 时间：2012-05-10T16:15:45.923
> 
> 标签：c#, winforms

WPF 可能有一个，但不确定 WinForms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:30:55.217

我不确定 C# 中有什么东西，但是有一个很好的库来模拟键盘输入。因此，您可以尝试使用它（[Windows 输入模拟器](http://inputsimulator.codeplex.com/)）并开发自己的虚拟键盘。

使用起来非常简单，例如：

```
//Simulate Shift
public void btn_Shift(object sender, EventArgs e)
{
   InputSimulator.SimulateKeyPress(VirtualKeyCode.SHIFT);
} 
```

# javascript - DOM 对象是什么类型的对象？

> ID：10538188
> 
> 赞同：2
> 
> 时间：2012-05-10T16:16:01.103
> 
> 标签：javascript, dom

DOM 对象是常规的 Javascript 对象吗？如果不是，它们是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:19:40.710

> DOM 对象是更规范的 Javascript 对象吗？如果不是，它们是什么？

不，它们是“宿主对象”。它们不一定遵循与原生 JavaScript 对象相同的规则。

它们在某种意义上是对象，但它们是由宿主环境添加的，不是 ECMAScript 规范的一部分。

例如，我不相信有什么要求他们接受 expando 属性。或者在函数的情况下，我不知道它们是否需要具有可访问和可扩展的`prototype`属性。

此外，函数可能有也可能没有典型的方法`Function.prototype`，比如`.call()`和`.apply()`。

这些规则比 ECMAScript 规范定义的对象的规则要宽松得多，因此您不必在所有情况下都依赖相同的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:33:54.297

[以下是来自Mozilla 开发网络](https://developer.mozilla.org/en/DOM/About_the_Document_Object_Model)的 Documnet 对象模型 (DOM) 的描述：

> 文档对象模型是 HTML 和 XML 文档的 API。它提供文档的结构表示，使您能够修改其内容和视觉呈现。本质上，它将网页连接到脚本或编程语言。
> 
> Web 开发人员可用于操作和创建网页的所有属性、方法和事件都组织成对象（例如，表示文档本身的文档对象、表示 HTML 表格元素的表格对象等） . 在最新的 Web 浏览器中，可以通过脚本语言访问这些对象。
> 
> DOM 最常与 JavaScript 结合使用。也就是说，代码是用 JavaScript 编写的，但它使用 DOM 来访问网页及其元素。但是，DOM 被设计为独立于任何特定的编程语言，从而使文档的结构表示可从单一、一致的 API 获得。尽管我们在整个站点中都专注于 JavaScript，但可以为任何语言构建 DOM 的实现。
> 
> 万维网联盟为 DOM 建立了一个标准，称为 W3C DOM。既然最重要的浏览器正确地实现了它，它应该能够支持强大的跨浏览器应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:18:52.210

对，他们是：

```
> typeof document.body
"object"
> document.body instanceof Object
true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T16:18:02.123

它们是类型[`HTMLElement`](https://developer.mozilla.org/en/DOM/HTMLElement)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T16:19:32.803

DOM 是一个 API，因此一组预定义的“对象”附加到窗口“命名空间”。它可以是 HTMLElement，但不仅是它们，它们不是 javascript 核心的一部分。所以有 javascript 核心和 DOM ，你可以有其他的 API。

# html - 使用 Jquery 横向 Html 元素直到特定属性（id）

> ID：10538189
> 
> 赞同：1
> 
> 时间：2012-05-10T16:16:03.833
> 
> 标签：html, dom, jquery

我正在使用 Jquery 1.7.2。

我想在鼠标悬停在我页面中的任何 html 元素上时使用 Jquery 横向 Html 元素直到特定属性（id）。

我们有 parents() 函数，但问题是如何在具有 id 属性的父元素上选择停止

```
$("*", document.body).click(function (e) {
  e.stopPropagation();
  var domEl = $(this).get(0);      
      var parentEls = $(domEl).parents()
        .map(function () { 
              return this.tagName; 
            })
        .get().join(", "); 
```

$("b").append(" **" + parentEls + "** "); });

这是代码，但我正在获取所有元素直到根，但我想停在标签中具有属性 id 的壁橱元素上

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:17:50.157

只需使用[最接近的](http://api.jquery.com/closest/)：

```
$(this).closest('#the-id'); 
```

* * *

除非您只是寻找具有任何 id 属性的最接近的，否则将是：

```
$(this).closest('[id]'); 
```

* * *

编辑：看到你更新的问题后，这应该是你想要的：

```
$(document).click(function(e) {
    e.preventDefault();
    var parents = $(e.target).parentsUntil('[id]')
        .map(function() { return this.tagName; }).get().join(',');
    console.log(parents);
}); 
```

*请注意，这种方法无需*选择并将单击事件绑定到 DOM 中的每个节点即可完成您想要的操作，这是一种相当笨拙的方法。

* * *

编辑（再次）：看起来您可能想包含带有 id 属性的标签（上面的解决方案是所有内容，但不包括该标签）。为此，解决方案非常相似：

```
$(document).click(function(e) {
    e.preventDefault();
    var $parents = $(e.target).parentsUntil('[id]');
    var tagNames = $parents.add($parents.parent())
        .map(function() { return this.tagName; }).get().join(',');
    console.log(tagNames);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:26:32.283

看起来您想要将层次结构从单击的元素映射到文档根。在这种情况下，您可以将[parents()](http://api.jquery.com/parents/)应用于[event.target](http://api.jquery.com/event.target/)：

```
$(document).click(function(e) {
    e.preventDefault();
    var parentEls = $(e.target).parents().map(function() { 
        return this.tagName; 
    }).get().join(", ");
}); 
```

Note that, as jmar777, you should also change your selector: `"*"` adds an event handler to *all* the elements, which is probably not what you want. Bind a single handler to `document` instead to take advantage of event bubbling.

# android - 按姓名获取联系电子邮件

> ID：10538195
> 
> 赞同：0
> 
> 时间：2012-05-10T16:16:32.587
> 
> 标签：android, cursor, contacts

我一直在尝试通过其名称获取联系电子邮件，但遇到了一些困难。这是我尝试这样做的方法：

```
 Cursor emailCur = cr.query(
            ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
            ContactsContract.CommonDataKinds.Email.DISPLAY_NAME + " = ?",
            new String[] { contactName }, null);
    while (emailCur.moveToNext()) {
        String email = emailCur
                .getString(emailCur
                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
        String emailType = emailCur
                .getString(emailCur
                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));
                }
    emailCur.close(); 
```

我经常遇到异常，我做错了什么？

现在我的光标循环的迭代为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:02:23.627

查询电子邮件地址类似于电话号码。必须执行查询才能从数据库中获取电子邮件地址。查询存储在 ContactsContract.CommonDataKinds.Email.CONTENT_URI 中的 URI 以查询电子邮件地址表。

```
 Cursor emailCur = cr.query( 
    ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
    null,
    ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
    new String[]{id}, null); 
while (emailCur.moveToNext()) { 
    // This would allow you get several email addresses
        // if the email addresses were stored in an array
    String email = emailCur.getString(
                  emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
    String emailType = emailCur.getString(
                  emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 
} 
emailCur.close(); 
```

与电话查询一样，电子邮件表的字段名称也存储在 ContactsContract.CommonDataKinds 下。电子邮件查询是在 ContactsContract.CommonDataKinds.Email.CONTENT_URI 中的 URI 上执行的，并且 WHERE 子句必须与 ContactsContract.CommonDataKinds.Email.CONTACT_ID 字段匹配。由于可以通过光标中返回的记录循环存储多个电子邮件地址。

更多教程[在这里](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:28:29.070

我认为您需要在调用 while(...) 循环之前调用 emailCur.moveToFirst() 。

不确定你的是否可行，但我总是像这样构造我的光标循环：

```
while(!emailCur.isAfterLast())
{
    //Do stuff with cursor

    emailCur.moveToNext();
} 
```

编辑：另外，当您说您正在通过显示名称查找联系人的电子邮件时，您是指联系人的姓名（例如 John Smith），还是电子邮件地址的显示名称？在上面的循环中，您正在执行后者。

编辑#2：这是一个关于如何获取所有联系人的电子邮件地址（以及电话和地址）的教程。您需要对其稍作修改，以便第一部分仅返回您指定的显示名称的联系人。根据联系人的_ID返回电子邮件地址的部分仍然需要完成。

[http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)

仅获取与您传入的显示名称匹配的联系人 ID 的修改将与您最初发布的内容*非常*相似，除了您查询的 URI 和您与显示名称匹配的数据类型 (它现在将变为：）`ContactsContract.Contacts.DISPLAY_NAME`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-29T10:49:28.553

从 name:: 获取电子邮件

```
 public String getEmail(String name, Context context){

    String email = null;
    String selection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " like'%" +
            name + "%'";
    final String[] projection = new String[]{Email.DATA, // use
            // Email.ADDRESS
            // for API-Level
            // 11+
            Email.TYPE};
    Cursor c = context.getContentResolver().query
            (Email.CONTENT_URI,
                    projection, selection, null, null);
    if (c != null && c.moveToFirst()) {
        email = c.getString(0);
        c.close();
    }
    if (email == null)
        email = "Unsaved";

    Log.d(TAG, "email: " + email);
    return email;
} 
```

# java - 为什么这个java代码不起作用？简单的计算器

> ID：10538197
> 
> 赞同：-2
> 
> 时间：2012-05-10T16:16:39.373
> 
> 标签：java

这是一个只使用 + 和 - 的简单算术运算计算器。逻辑部分很简单，但我很尴尬地说代码不起作用。输入的数字未知。例如：“4/2”或“42+34”都应该可以接受。我对字符串及其功能不太满意，所以请帮忙。谢谢！:)

```
/*
 *Calculator with only + and - 
 */
import java.util.Scanner;

class Calculator {
    public static String strng;

    public static void main(String[]args){
        Calculator calc = new Calculator();
        calc.Calculator();
    }

    public void Calculator()
    {
        int op1=0,op2=0,flag=0,index=0;
        String Operator=null;
        System.out.println("java calculator");
        Scanner sc=new Scanner(System.in);

        strng= sc.nextLine();

        if(strng.indexOf("+")>0) {
            Operator = "+";
            index=strng.indexOf("+");
            if(strng.lastIndexOf("+")!=index){
              Operator="++";
              flag=1;
            }
        }
        else if(strng.indexOf("-")>0) {
            Operator="-";
            index=strng.indexOf("-");
            if(strng.lastIndexOf("-")!=index){
              Operator="--";
              flag=1;
            }
        } else if(strng.indexOf("*")>0) {
            Operator="*";
            index=strng.indexOf("*");
        } else if(strng.indexOf("/")>0) {
            Operator="/";
            index=strng.indexOf("/");
        } 

        if((index>0)&&(flag==0)) {
           op1=Integer.parseInt(strng.substring(0,index-1));
           op2=Integer.parseInt(strng.substring(index+1));
           Operation(Operator,op1,op2);
        }

        if(flag==1) {
           op1=Integer.parseInt(strng.substring(0,index-1));
           op2=Integer.parseInt(strng.substring(index+2)); 
           Operation(Operator,op1,op2);
        } else { //to separate the operator and operands string functions.
           System.out.println("Invalid choice");
        }
     }  

     public void Operation(String Operator, int operand1, int operand2) {
        if(Operator.equals("+")){ Add(operand1,operand2); }
        if(Operator.equals("-")){ Subtract(operand1,operand2); }
        if(Operator.equals("*")){ Multiply(operand1,operand2); }
        if(Operator.equals("/")){ Divide(operand1,operand2); }
        if(Operator.equals("++")){ Increment(operand1); }
        if(Operator.equals("--")){
            Decrement(operand1);
        } else {
            System.out.println("Invalid entry");
        }
    } 

    void Add(int op1, int op2) {
        System.out.println(strng+"="+(op1+op2));
    }

    void Subtract(int op1, int op2) {
        System.out.println(strng+"="+(op1-op2));
    }  

    void Increment(int op1) {
        System.out.println(strng+"="+(op1+1));
    }

    void Decrement(int op1) {
        System.out.println(strng+"="+(op1-1));
    }

    void Multiply(int op1, int op2) {
        int ans=0;
        int  x = op1<op2?op1:op2;
        int y = op1>op2?op1:op2;
        for(int i=1;i<=x;i++){
            ans=ans+y;
        } 
        System.out.println(strng+"="+ans);
    }

    void Divide(int op1, int op2) {
        int count=0,rem=op1;

        while(rem>=op2){
            rem=rem-op2;
            count=count+1;
        } 
        System.out.println(strng+"="+count); //return rem for modulo operand
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:20:02.317

我对您在字符串中查找符号的方式感到不舒服。我建议您查看[`String.split(String regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)，这将允许您拆分符号和数字。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T16:19:19.807

您正在调用构造函数...构造函数不支持 void .. 希望对您有所帮助

# c# - 如何在不刷新 WebForms 页面的情况下在服务器上触发事件

> ID：10538199
> 
> 赞同：1
> 
> 时间：2012-05-10T16:16:48.003
> 
> 标签：c#, javascript, jquery, asp.net, webforms

正如它在标题中所说，我想要一个按钮/链接，当单击它时，它会向数据库中的表添加一个数字，但会保持在同一页面上而不刷新页面。如果它在点击后说“谢谢”也很好。

我在想我可以使用某种 JavaScript 来完成它。

我正在使用 C# 和 aspx。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:17:31.337

是的，您可以使用 AJAX 回发来做到这一点。

使用 jquery：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

根据您的服务器端框架，您的后端方法的设置可能略有不同。[这是一个使用 webforms 的示例](http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET)。

您也可以更新调用的`success`or`complete`回调方法`ajax`以更新 DOM 或`alert('Thanks')`完成行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:06:30.230

绝对去 jQuery ajax。查看这篇[文章](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)，它对在 asp.net 中使用 jquery ajax 提供了非常好的见解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:21:04.663

将按钮和标签放在带有`ChildrenAsTriggers=true`. 添加一个按钮，在其`OnClick`方法中，只需将行插入表格并适当地设置标签的文本。

# excel - Excel中是否有类似于Ruby的Split Method的函数？

> ID：10538200
> 
> 赞同：3
> 
> 时间：2012-05-10T16:16:56.813
> 
> 标签：excel, vba

给定以下字符串：

```
"Data 1998 1999 2000 2001 2002 2003 2004 2005 2006" 
```

我希望能够获取字符串并将数据放在 Excel 电子表格中的 10 个单独的列中。我正在开发一个用户定义的函数，但它还没有完全工作。

有没有人已经解决了这个问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:25:33.270

1.  突出显示具有要拆分的字符串的范围
2.  转到数据选项卡
3.  选择文本到列
4.  将分隔符设置为空格

您也可以使用公式：[http ://www.excelforum.com/excel-general/591897-text-to-columns-but-using-a-formula.html](http://www.excelforum.com/excel-general/591897-text-to-columns-but-using-a-formula.html)

或使用发布的代码 creamyegg。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:22:50.773

简单的答案是肯定的。`Split()`您可以使用一个 VBA函数来返回一个变量数组。下面会将您的示例字符串放在`A1:I1`活动工作表的单元格中：

```
Dim varArray As Variant

varArray = Split("Data 1998 1999 2000 2001 2002 2003 2004 2005 2006", " ")

ActiveSheet.Range(Cells(1, 1), Cells(1, UBound(varArray))).Value = varArray 
```

# regex - 正则表达式无限循环仅在 perl 中，为什么？

> ID：10538201
> 
> 赞同：0
> 
> 时间：2012-05-10T16:16:59.200
> 
> 标签：regex, perl, loops, path, regex-group

我有一个正则表达式来测试 CSV 单元格是否包含正确的文件路径：

**编辑**CSV 列出了脚本运行时尚不存在的文件路径（我不能使用 -e），并且文件路径可以包括 * 或 %variable% 或 {$variable}。

```
my $FILENAME_REGEXP = '^(|"|""")(?:[a-zA-Z]:[\\\/])?[\\\/]{0,2}(?:(?:[\w\s\.\*-]+|\{\$\w+}|%\w+%)[\\\/]{0,2})*\1$'; 
```

由于 CSV 单元格有时包含双引号的包装，有时文件名本身需要用双引号括起来，我做了这个分组 (|"|""") ... \1

然后使用这个函数：

```
sub ValidateUNCPath{
    my $input = shift;
    if ($input !~ /$FILENAME_REGEXP/){
        return;
    } 
    else{
        return "This is a Valid File Path.";
    }

} 
```

我正在尝试测试这个短语是否与我的正则表达式匹配（它不应该匹配）：

```
"""c:\my\dir\lord" 
```

但是我亲爱的 Perl 在以下情况下会进入无限循环：

```
ValidateUNCPath('"""c:\my\dir\lord"'); 
```

**编辑**实际上它循环这个：

```
ValidateUNCPath('"""\aaaaaaaaa\bbbbbbb\ccccccc\Netwxn00.map"'); 
```

我在[http://regexpal.com](http://regexpal.com)中确保我的正则表达式正确捕获了那些非对称的 """ ..." 包装双引号，但 Perl 有自己的想法:(

我什至尝试了 /g 和 /o 标志

```
/$FILENAME_REGEXP/go 
```

但它仍然挂起。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:52:54.113

首先，您发布的任何内容都不会导致无限循环，因此，如果您得到一个，它不是来自这部分代码。

当我尝试您的子例程时，它会为所有看起来不像路径的字符串返回 true，例如：

```
.....
This is a Valid File Path.
.*.*
This is a Valid File Path.
-
This is a Valid File Path. 
```

这是因为您的正则表达式相当松散。

```
^(|"|""")                  # can match the empty string
(?:[a-zA-Z]:[\\\/])?       # same, matches 0-1 times
[\\\/]{0,2}                # same, matches 0-2 times
(?:(?:[\w\s\.\*-]+|\{\$\w+}|%\w+%)[\\\/]?)+\1$  # only this is not optional 
```

由于实际上只有最后一部分必须匹配任何内容，因此您允许各种字符串，主要是在第一个字符类中：`[\w\s\.\*-]`

在我个人看来，当你开始依赖看起来像你的正则表达式时，你做错了。除非你精通正则表达式，并希望没有人会被迫修复它。

为什么不直接删除引号？此外，如果您的系统中存在此路径，则有一种更简单的方法来检查它是否有效：[`-e $path`](http://perldoc.perl.org/functions/-X.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:08:42.357

**更新**

编辑：通过反复试验，以下分组子表达式`[\w\s.*-]+`导致回溯问题

```
 (?:
        (?:
             [\w\s.*-]+
          |  \{\$\w+\}
          |  %\w+%
        )
        [\\\/]?
    )+ 
```

修复 #1，展开方法

```
'
 ^
    (                          # Nothing
      |"                       # Or, "
      |"""                     # Or, """
    )
                      # Here to end, there is no provision for quotes (")
    (?:               # If there are no balanced quotes, this will fail !!
        [a-zA-Z]
        :
        [\\\/]
    )?
    [\\\/]{0,2}

    (?:
        [\w\s.*-]
      |  \{\$\w+\}
      |  %\w+%
    )+
    (?:
        [\\\/]
        (?:
            [\w\s.*-]
          |  \{\$\w+\}
          |  %\w+%
        )+
    )*
    [\\\/]?
    \1
 $
' 
```

修复 #2，独立子表达式

```
'
 ^
    (                          # Nothing
      |"                       # Or, "
      |"""                     # Or, """
    )
                      # Here to end, there is no provision for quotes (")
    (?:               # If there are no balanced quotes, this will fail !!
        [a-zA-Z]
        :
        [\\\/]
    )?
    [\\\/]{0,2}

    (?>
       (?:
           (?:
                [\w\s.*-]+
             |  \{\$\w+\}
             |  %\w+%
           )
           [\\\/]?
       )+
    )
    \1
 $
' 
```

修复 #3，删除 + 量词（或添加 +？）

```
'
 ^
    (                          # Nothing
      |"                       # Or, "
      |"""                     # Or, """
    )
                      # Here to end, there is no provision for quotes (")
    (?:               # If there are no balanced quotes, this will fail !!
        [a-zA-Z]
        :
        [\\\/]
    )?
    [\\\/]{0,2}

    (?:
        (?:
             [\w\s.*-] 
          |  \{\$\w+\}
          |  %\w+%
        )
        [\\\/]?
    )+
    \1
 $
' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T18:34:48.243

如果正则表达式引擎很幼稚，

```
('y') x 20 =~ /^.*.*.*.*.*x/ 
```

需要很长时间才能失败，因为它必须尝试

```
20 * 20 * 20 * 20 * 20 = 3,200,000 possible matches. 
```

您的模式具有类似的结构，这意味着它有许多组件与您输入的各种子字符串匹配。

现在，Perl 的正则表达式引擎经过*高度*优化，远非天真。在上面的模式中，它会从寻找开始`x`，然后非常非常快地退出。不幸的是，它不会或不能同样优化您的模式。

你的模式是一团糟。我什至不会尝试猜测它应该匹配什么。您会发现，一旦切换到正确的模式，这个问题就会自行解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T00:21:10.327

感谢 sln 这是我的固定正则表达式：

```
my $FILENAME_REGEXP = '^(|"|""")(?:[a-zA-Z]:[\\\/])?[\\\/]{0,2}(?:(?:[\w\s.-]++|\{\$\w+\}|%\w+%)[\\\/]{0,2})*\*?[\w.-]*\1$'; 
```

（我也不允许在目录中使用 * char，并且只允许在（最后一个）文件名中使用单个 *）

# facebook - ie的后退按钮被facebook api干扰

> ID：10538208
> 
> 赞同：4
> 
> 时间：2012-05-10T16:17:24.883
> 
> 标签：facebook, internet-explorer

我正在为我的网站使用 Facebook 'like' api，但 IE 上有一个错误（在 IE8 上测试，并在 IE9 上报告）。

每当我点击后退按钮时，它都会将以下两个网址插入“最近的页面”：

[https://s-static.ak.facebook.com/connec](https://s-static.ak.facebook.com/connec)

[http://static.ak.facebook.com/connect/x](http://static.ak.facebook.com/connect/x)

并且每次触发后退按钮时，都会“插入”这对中的一个。例如：

*   第一个：打开页面**A**
*   2nd：进入**B页**
*   第三：进入**C页**
*   第四：点击后退按钮或退格按钮
*   5th：现在我在页面**B**上，但现在将有两个“插入”到后退按钮的 url，加上假设现在能够让我回到页面**C**的前进按钮是空白/清除所以赢了'无法使用前进按钮“返回”到页面**C**

提前感谢您的帮助，Chi

# android - 通过 CakePHP Auth 对 Android 用户进行身份验证

> ID：10538210
> 
> 赞同：0
> 
> 时间：2012-05-10T16:17:29.153
> 
> 标签：android, api, cakephp, authentication, cakephp-1.3

我知道这是一个一般性问题，这里的细节更好，但我不知道要问什么细节。

首先，这里的社区中是否有人有构建和通过使用 Cake Auth 组件的 CakePHP 站点进行身份验证的 Android 应用程序的经验？

我目前正在浏览本教程[Android Login and Registration with PHP、MySQL 和 SQLite](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)，我能够让它做一些事情。尝试从我的应用程序登录时，我收到“不正确的用户名/密码”，这意味着我正在连接到我的 Cake 应用程序，但无法进一步。

如果您会在说明和文件中注意到它处理 $salt 的值，该值在他们告诉您创建的数据库中具有特定值。使用 Cake，您已经有一个与 Auth 相关联的 users 表，并且 $salt 值被所有用户使用，而不是特定的。关于如何解决这个问题的任何想法？？？这就是我认为我的故障的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:47:12.373

配置一个登录操作，该操作采用您的登录活动发送的已发布登录表单，如果登录成功，该操作会将您重定向到 XML 视图或 json 视图，在您的 android 应用程序中，您解析结果并欢迎用户。听起来不错：-）

# android - 本机调试器崩溃：错误的文件描述符

> ID：10538211
> 
> 赞同：2
> 
> 时间：2012-05-10T16:17:30.400
> 
> 标签：android, debugging

我正在尝试在 Android 项目中调试 C++ 本机代码，但是，在尝试设置调试器几天后，我得到了 gdb 抛出的这个奇怪且非常令人恼火的错误消息：

远程连接错误：文件描述符错误。

我在互联网上搜索有同样错误的人。有一些，但没有一个解决他们的问题......

详细地说，这是我如何设置我的 Android 项目：

*   我在我的电脑上下载并安装了 JDK，并设置了 JAVA_HOME 变量
*   下载了最新的android ndk（r8），最新的android sdk
*   安装了cygwin，带有c++、gcc、gdb、make...
*   为 Java 开发人员安装了 eclipse Indigo，以及以下软件包：CDT、ADT、Sequoyah

我创建了一个新的 android 项目，添加了本机支持，并在 .mk 文件中设置了以下几行（我认为其中一些行可能已被删除，但我想确定......）：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_CFLAGS    := -Wall -Werror -DANDROID_NDK -g
LOCAL_CPPFLAGS  := -Wall -Werror -DANDROID_NDK -g
LOCAL_LDLIBS    := -lm -llog -g -ggdb -O1
APP_OPTIM   := debug
LOCAL_MODULE    := native
LOCAL_SRC_FILES := native.cpp
include $(BUILD_SHARED_LIBRARY) 
```

我在 Project->Properties->Builders->New->Program 中添加了一个新的构建器：

```
- Location: selection the ndk-build program, in your NDK directory
- Working Directory: Select the jni folder in your solution 
```

我在Project->Properties->C/C++ Build中去掉了命令行，以避免调用make命令产生的错误信息

我在 GNU C 和 GNU C++ 部分的“C/C++ General”部分中添加了 android ndk 的路径包括 (ANDROID_NDK_ROOT\platforms\android-14\arch-arm\usr\include)

我创建了一个新的“C/C++ 应用程序”调试器，其中：选择了“使用标准创建进程启动器”

```
in the "Main" tab   

PATH_TO_MY_PROJECT\obj\local\armeabi\app_process in the "C/C++ Application" field
Name of my project in the "Project" field 
```

我将构建配置设置为默认值。

在“调试器”选项卡中

```
 gdbserver in the debugger combobox

in the main subtab:

    GDB Debugger field:     PATH_TO_NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gdb.exe
    GDB Command file:   PATH_TO_MY_PROJECT/obj/local/armeabi/gdb2.setup (I copied gdb.setup in gdb2.setup, and removed the last line as explained in most tutorials on the internet)

in the connection subtab:   
Type: TCP 
Host name: localhost
Port number: 5039 (the same as the one used by ndk-gdb) 
```

我在清单中添加了 android:debuggable="true" 行（除了 .mk 文件中的所有调试标志）

很抱歉这么长的解释，但这会让你对我的配置有一个完整的了解。我可能做了一些其他的设置，但我认为最重要的设置在这里解释。我在 Windows 7 64 上，我尝试了多种设备（模拟器、acer/asus 平板电脑、htc 智能手机......），其中一些已经扎根，但它仍然崩溃。

我希望有人能够帮助我，我必须将整个项目移植到 android...

如果有人让这个调试器工作，我会很高兴了解你的配置！

提前感谢=）

# actionscript-3 - 游戏开发中的 HTML 与 ActionScript3？

> ID：10538213
> 
> 赞同：2
> 
> 时间：2012-05-10T16:17:33.863
> 
> 标签：actionscript-3, flash, html, canvas

我开发了一款休闲游戏，在一些 Flash 游戏网站上大受欢迎，我正在权衡将其添加到 Facebook 的利弊。我没有很强的编码背景——我在开发游戏时学习了 AS3——所以我不确定嵌入 Flash 文件是否适合 facebook 游戏。如果我想最终启用应用内购买，有什么理由我可能不想使用 Flash？Flash 是否会使游戏更容易被作弊？还有其他原因我可能想要使用 HTML5 或其他编码语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:45:45.317

HTM5 不是一种编码语言，但 JavaScript 用于对 HTML5 Canvas 元素进行编程，这是您需要考虑的。

互联网上有*很多*Canvas 与 Flash 的帖子，我建议您搜索并阅读它们。我没有理由重复说过一百次的话。

在 Facebook 上嵌入 Flash 并没有什么问题，尽管通常的 iOS 人群将无法看到它。

我个人建议学习 Canvas，它的级别比 Flash 低很多，但完全可行。闪存的未来可能会变得更小，并且您已经通过使用它来淘汰至少一个人群（iPad/手机/Pod/iOS）。

所以底线是 Flash 更容易，至少现在是这样，但 HTML5 Canvas 是这里的未来。

有许多 Canvas 书籍涵盖了简单的游戏开发，并且已经有一些库可以使游戏创建更容易（ImpactJS、Game Closure 等。我建议搜索并仔细查看当前最流行的库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:56:12.713

如果您实际上已经将游戏全部编码并在 AS3 中运行，那么将其切换到另一种语言几乎是浪费时间。很多 Facebook 游戏都是 Flash，如果您想针对 iOS，您可以随时将其打包为 AIR 应用程序。

不过，对于未来的项目，我同意看看 HTML5 技术是谨慎的做法。

# c - 托管 Flash 不会加载 swf 资源（xml、图像等）

> ID：10538218
> 
> 赞同：4
> 
> 时间：2012-05-10T16:17:40.557
> 
> 标签：c, gtk, adobe, flash, npapi

起初，我试图在我的 unix 机器上用 gtk2 实现一个 swf 阅读器。工作，我可以呈现简单的 swf 文件。现在，我正在尝试使用 xml 配置、添加图像等向我的 flash 文件添加配置。失败，不会通过 geturlnotify()。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>
#include <string.h>
#include <unistd.h>
#include <ctype.h>

#include <gtk/gtk.h> 
#include <gdk/gdkx.h>
#include "npupp.h"

#define FLASH_PLUGIN_SO "./libflashplayer.so"

void *flash_plugin_handle;

NPNetscapeFuncs browserFuncs;
NPPluginFuncs   pluginFuncs;

GtkWidget *main_window;

char* fileName = NULL;
NPStream *       stream;
const char * uagent = "Axt/1.0";

//Default window size
int WINDOW_XSIZE = 800;
int WINDOW_YSIZE = 600;

//Default child window position (flash player)
int xPosition = 0;
int yPosition = 0;

NPError (*iNP_Initialize)(NPNetscapeFuncs* bFuncs, NPPluginFuncs* pFuncs);
NPError (*iNP_Shutdown)();
char*   (*iNP_GetMIMEDescription)();

void* loadFlashPluginSo() {
  void *handle;

  handle = dlopen(FLASH_PLUGIN_SO, RTLD_LAZY | RTLD_LOCAL);
  if(!handle) {
    fprintf(stderr, "[-] error loading libflashplayer.so: %s\n", dlerror());
    exit(1);
  } 
  fprintf(stderr,"[+] loaded libflashplayer.so\n");
  return handle;
}

void* loadSymbol(void *handle, const char *name) {
  char *error;
  void *ret;

  ret = dlsym(handle, name);

  if((error = dlerror()) != NULL) {
    fprintf(stderr, "[-] error loading symbol %s: %s\n", name, error);
    exit(1);
  } else {
    fprintf(stderr,"[+] loaded symbol %s, address: %p\n", name, ret);
  }
  return ret;
}

void loadNPEntryPoints(void *handle) {
  iNP_Initialize=loadSymbol(handle, "NP_Initialize");
  iNP_Shutdown=loadSymbol(handle, "NP_Shutdown");
  iNP_GetMIMEDescription = loadSymbol(handle,"NP_GetMIMEDescription");
}

void printPluginEntrypoints(NPPluginFuncs* pFuncs) {
  fprintf(stderr,"[*] NPP struct:\n");
  fprintf(stderr,"\t- NPP_size:                 %8d\n",pFuncs->size);
  fprintf(stderr,"\t- NPP_version:              %8d\n",pFuncs->version);
  fprintf(stderr,"\t- NPP_NewProcPtr:           %p\n", pFuncs->newp);
  fprintf(stderr,"\t- NPP_DestroyProcPtr:       %p\n", pFuncs->destroy);
  fprintf(stderr,"\t- NPP_SetWindowProcPtr:     %p\n", pFuncs->setwindow);
  fprintf(stderr,"\t- NPP_NewStreamProcPtr:     %p\n", pFuncs->newstream);
  fprintf(stderr,"\t- NPP_DestroyStreamProcPtr: %p\n", pFuncs->destroystream);
  fprintf(stderr,"\t- NPP_StreamAsFileProcPtr:  %p\n", pFuncs->asfile);
  fprintf(stderr,"\t- NPP_WriteReadyProcPtr:    %p\n", pFuncs->writeready);
  fprintf(stderr,"\t- NPP_WriteProcPtr:         %p\n", pFuncs->write);
  fprintf(stderr,"\t- NPP_PrintProcPtr:         %p\n", pFuncs->print);
  fprintf(stderr,"\t- NPP_HandleEventProcPtr:   %p\n", pFuncs->event);
  fprintf(stderr,"\t- NPP_URLNotifyProcPtr:     %p\n", pFuncs->urlnotify);
  fprintf(stderr,"\t- javaClass:                %p\n", pFuncs->javaClass);
  fprintf(stderr,"\t- NPP_GetValueProcPtr:      %p\n", pFuncs->getvalue);
  fprintf(stderr,"\t- NPP_SetValueProcPtr:      %p\n", pFuncs->setvalue);
}

NPError NPN_GetValueProc(NPP instance, NPNVariable variable, void *ret_value) {
    fprintf(stderr,"[D] NPN_GetValueProc instance:%p, variable:%d, abi_mask:%d\n", instance, variable, 0);

    switch (variable) {
    case NPNVSupportsXEmbedBool:
      *((int*)ret_value)= PR_TRUE;
      break;
    //Unix and solaris fix
    case NPNVToolkit:
      *((int*)ret_value)= NPNVGtk2;
      break;
    case NPNVnetscapeWindow:
      *((int*)ret_value)= PR_TRUE;
      break;
    default:
      *((int*)ret_value)=PR_FALSE;
      break;
    }
    return NPERR_NO_ERROR;
}

const char* NPN_UserAgentProc(NPP instance) {
    fprintf(stderr,"[D] NPN_UserAgentProc instance:%p\n", instance);
    return uagent;
}

NPError NPN_GetURLProc(NPP instance, const char* url, const char* window) {
    fprintf(stderr,"[D] NPN_GetURLProcPtr:%p, url: %s, window: %s\n", instance, url, window);
    return NPERR_NO_ERROR;
}

NPIdentifier NPN_GetStringIdentifierProc(const NPUTF8* name) {
    return (NPIdentifier)0x41424344; //Unique
}

static 
gboolean plug_removed_cb (GtkWidget *widget, gpointer data) {
    fprintf(stderr,"[!] plug_removed_cb\n");
    return TRUE;
}

static void
socket_unrealize_cb(GtkWidget *widget, gpointer data) {
    fprintf(stderr, "[!] socket_unrealize_cb\n");
}

static NPWindow *
npwindow_construct (GtkWidget *widget) {
  NPWindow *npwindow;
  NPSetWindowCallbackStruct *ws_info = NULL;

  GdkWindow *parent_win = widget->window;

  GtkWidget *socketWidget = gtk_socket_new();

  gtk_widget_set_parent_window(socketWidget, parent_win);
  gtk_widget_set_uposition(socketWidget, xPosition, yPosition);

  g_signal_connect(socketWidget, "plug_removed", G_CALLBACK(plug_removed_cb), NULL);
  g_signal_connect(socketWidget, "unrealize", G_CALLBACK(socket_unrealize_cb), NULL);
  g_signal_connect(socketWidget, "destroy", G_CALLBACK(gtk_widget_destroyed), &socketWidget);

  gpointer user_data = NULL;
  gdk_window_get_user_data(parent_win, &user_data);

  GtkContainer *container = GTK_CONTAINER(user_data);
  gtk_container_add(container, socketWidget);
  gtk_widget_realize(socketWidget);

  GtkAllocation new_allocation;
  new_allocation.x = 0;
  new_allocation.y = 0;
  new_allocation.width = WINDOW_XSIZE;
  new_allocation.height = WINDOW_YSIZE;
  gtk_widget_size_allocate(socketWidget, &new_allocation);

  gtk_widget_show(socketWidget);
  gdk_flush();

  GdkNativeWindow ww = gtk_socket_get_id(GTK_SOCKET(socketWidget));
  GdkWindow *w = gdk_window_lookup(ww); 

  npwindow = malloc (sizeof (NPWindow));
  npwindow->window = (void*)(unsigned long)ww;
  npwindow->x = 0;
  npwindow->y = 0;
  npwindow->width  = WINDOW_XSIZE;
  npwindow->height = WINDOW_YSIZE;

  ws_info = malloc(sizeof (NPSetWindowCallbackStruct));
  ws_info->type = NP_SETWINDOW;
  ws_info->display = GDK_WINDOW_XDISPLAY(w);
  ws_info->colormap = GDK_COLORMAP_XCOLORMAP(gdk_drawable_get_colormap(w));
  GdkVisual* gdkVisual = gdk_drawable_get_visual(w);
  ws_info->visual = GDK_VISUAL_XVISUAL(gdkVisual);
  ws_info->depth = gdkVisual->depth;

  npwindow->ws_info = ws_info;
  npwindow->type = NPWindowTypeWindow;

  return npwindow;
}

static NPStream *
npstream_construct() {
    NPStream *stream = malloc(sizeof(NPStream));
    stream->url=fileName;
    stream->notifyData = 0x00000000;

    fprintf(stderr,"[D] NPN_StreamConstructed: %p\n", stream);

    return stream;
}

bool NPN_GetPropertyProc(NPP npp, NPObject *obj, NPIdentifier propertyName, NPVariant *result) {
    fprintf(stderr,"[D] NPN_GetPropertyProc: %p\n", result);
    result->type = NPVariantType_Object;
    result->value.objectValue= (NPObject*)1;
    return TRUE;
}

bool NPN_InvokeProc(NPP npp, NPObject* obj, NPIdentifier methodName, const NPVariant *args, uint32_t argCount, NPVariant *result) {
    fprintf(stderr,"[D] NPN_InvokeProc: %p\n", result);
    result->type= NPVariantType_String;
    result->value.stringValue.utf8characters=fileName;
    result->value.stringValue.utf8length=strlen(fileName);
    return TRUE;
}

void NPN_ReleaseVariantValueProc(NPVariant *variant) {
}

void NPN_ReleaseObjectProc(NPObject *obj) {
}

NPObject*  NPN_CreateObjectProc(NPP npp, NPClass *aClass) {
    return (NPObject*)1;
}

NPObject*  NPN_RetainObjectProc(NPObject *obj) {
    return (NPObject*)1;
}

NPError NPN_GetURLNotifyProc(NPP instance, const char* url, const char* window, void* notifyData) {
    fprintf(stderr,"[D] NPN_GetURLNotifyProc:%p, url: %s, window: %s\n", instance, url, window);
    return 0;
}

NPN_GetURL, NPN_GetURLNotify, and NPP_URLNotify

void initNPNetscapeFuncs(NPNetscapeFuncs *bFuncs) {
  int i=0;

  for(i=1; i<sizeof(*bFuncs)/sizeof(ssize_t); i++)
    *(((ssize_t*)bFuncs)+i)=i+1000;

  bFuncs->geturl=NPN_GetURLProc;
  bFuncs->getvalue=NPN_GetValueProc;
  bFuncs->uagent=NPN_UserAgentProc;
  bFuncs->getproperty=NPN_GetPropertyProc;
  bFuncs->getstringidentifier=NPN_GetStringIdentifierProc;
  bFuncs->invoke=NPN_InvokeProc;
  bFuncs->releasevariantvalue=NPN_ReleaseVariantValueProc;
  bFuncs->releaseobject=NPN_ReleaseObjectProc;
  bFuncs->createobject=NPN_CreateObjectProc;
  bFuncs->retainobject=NPN_RetainObjectProc;
  bFuncs->geturlnotify=NPN_GetURLNotifyProc;
  bFuncs->size= sizeof(bFuncs);
  bFuncs->version= (NP_VERSION_MAJOR << 8) | NP_VERSION_MINOR;;
}

static void destroy(GtkWidget *widget, gpointer data) {
    gtk_main_quit ();
}

static void checkError(const char* str, NPError err) {
  if(err == NPERR_NO_ERROR)
    fprintf(stderr, "[+] %s: success\n", str);
  else
    fprintf(stderr, "[-] %s: failed (%d)\n", str, err);
    fflush(NULL);
}

int main(int argc, char **argv) 
{
  int c;
  extern char *optarg;

  while ((c = getopt(argc, argv, "f:w:h:x:y:")) != EOF){
    switch (c) {
      case 'f':
        fileName = optarg;
        fprintf (stderr, "[+] Filename: %s\n", optarg);
        break;
      case 'w':
        WINDOW_XSIZE = atoi(optarg);
        fprintf (stderr, "[+] WINDOW_XSIZE: %s\n", optarg);
        break;
      case 'h':
        WINDOW_YSIZE = atoi(optarg);
        fprintf (stderr, "[+] WINDOW_YSIZE: %s\n", optarg);
        break;
      case 'x':
        xPosition = atoi(optarg);
        fprintf (stderr, "[+] Position in x: %s\n", optarg);
        break;
      case 'y':
        yPosition = atoi(optarg);
        fprintf (stderr, "[+] Position in y: %s\n", optarg);
        break;
      case '?':
        if (optopt == 'f' | optopt == 'w' | optopt == 'h')
          fprintf (stderr, "[-] Option -%c requires an argument.\n", optopt);
        else if (isprint (optopt))
          fprintf (stderr, "[-] Unknown option `-%c'.\n", optopt);
        else
          fprintf (stderr,"[-] Unknown option character `\\x%x'.\n", optopt);
          exit(-1);
      default:
        fprintf(stderr,"[-] Usage: %s -f <swffile> -x <xsize> -y <ysize>\n", argv[0]);
        exit(-1);
    }
  }

  gtk_init (&argc, &argv);
  main_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_usize (main_window, WINDOW_XSIZE, WINDOW_YSIZE);
  gtk_widget_set_uposition (main_window, xPosition, yPosition);
  g_signal_connect (G_OBJECT (main_window), "destroy", G_CALLBACK (destroy), NULL);
  gtk_widget_realize(main_window);
  gtk_widget_show_all(main_window);
  fprintf(stderr,"[+] created GTK widget\n");

  flash_plugin_handle = loadFlashPluginSo();

  loadNPEntryPoints(flash_plugin_handle);
  fprintf(stderr,"[+] initialized flash plugin entry points\n");

  initNPNetscapeFuncs(&browserFuncs);
  fprintf(stderr,"[+] initialized browser functions\n");

  checkError("NP_Initialize", iNP_Initialize(&browserFuncs, &pluginFuncs));

  printPluginEntrypoints(&pluginFuncs);

  NPWindow *npwin = npwindow_construct(main_window);
  fprintf(stderr,"[+] created NPWindow widget\n");

  NPP_t *instancep = malloc(sizeof(NPP_t));
  memset(instancep,0,sizeof(sizeof(NPP_t)));
  NPP instance     = instancep;

  NPSavedData* saved = malloc(sizeof(NPSavedData));
  memset(saved,0,sizeof(sizeof(NPSavedData)));

  stream = npstream_construct();
  uint16_t stype;

  char *xargv[]= {"quality", "bgcolor", "width", "height", "allowScriptAccess", "loop" };
  char *xargm[]= {"high", "#000000", "1360", "768", "always", "false" };

  checkError("NPN_New", pluginFuncs.newp("application/x-shockwave-flash", instance, NP_EMBED, 0, xargv, xargm, saved));
  checkError("NPN_SetWindow", pluginFuncs.setwindow(instance, npwin));
  checkError("NPN_NewStream", pluginFuncs.newstream(instance, "application/x-shockwave-flash", stream, 0,  &stype));

  FILE *pp;

  char buffer[8192];
  pp = fopen(fileName,"rb");

  int len;

  while((len=fread(buffer, 1, sizeof(buffer), pp)) != 0) {
    pluginFuncs.writeready(instance, stream);
    pluginFuncs.write(instance, stream, 0, len, buffer);
  }

  fclose(pp);

  checkError("NPN_DestroyStream",pluginFuncs.destroystream(instance, stream, NPRES_DONE));

  free(stream);

  gtk_main ();

  checkError("NPN_Destroy",pluginFuncs.destroy(instance, &saved));

  checkError("NP_Shutdown", iNP_Shutdown());

  dlclose(flash_plugin_handle);
  return 0;
} 
```

如果我加载没有 xml 的 swf。有用。当我对我的 xml 进行配置时。它停止。

这是我得到的输出：

```
~/test-flash$ ./test-flash -f xml_sample.swf -w 400 -h 600 -x 15 -y 15
[+] Filename: xml_sample.swf
[+] WINDOW_XSIZE: 400
[+] WINDOW_YSIZE: 600
[+] Position in x: 15
[+] Position in y: 15
[+] created GTK widget
[+] loaded libflashplayer.so
[+] loaded symbol NP_Initialize, address: 0x7ff03fb634d0
[+] loaded symbol NP_Shutdown, address: 0x7ff03fb634c0
[+] loaded symbol NP_GetMIMEDescription, address: 0x7ff03fb63870
[+] initialized flash plugin entry points
[+] initialized browser functions
[+] NP_Initialize: success
[*] NPP struct:
        - NPP_size:                        0
        - NPP_version:                     0
        - NPP_NewProcPtr:           0x7ff03fb63990
        - NPP_DestroyProcPtr:       0x7ff03fb63980
        - NPP_SetWindowProcPtr:     0x7ff03fb63970
        - NPP_NewStreamProcPtr:     0x7ff03fb63960
        - NPP_DestroyStreamProcPtr: 0x7ff03fb63910
        - NPP_StreamAsFileProcPtr:  0x7ff03fb63920
        - NPP_WriteReadyProcPtr:    0x7ff03fb63950
        - NPP_WriteProcPtr:         0x7ff03fb63940
        - NPP_PrintProcPtr:         0x7ff03fb63900
        - NPP_HandleEventProcPtr:   0x7ff03fb638f0
        - NPP_URLNotifyProcPtr:     0x7ff03fb63930
        - javaClass:                (nil)
        - NPP_GetValueProcPtr:      0x7ff03fb63860
        - NPP_SetValueProcPtr:      (nil)
[+] created NPWindow widget
[D] NPN_StreamConstructed: 0x25ce5e0
[D] NPN_GetValueProc instance:0x25cc720, variable:14, abi_mask:0
[D] NPN_GetValueProc instance:0x25cc720, variable:268435469, abi_mask:0
[D] NPN_UserAgentProc instance:(nil)
[D] NPN_GetValueProc instance:0x25cc720, variable:15, abi_mask:0
[D] NPN_GetValueProc instance:0x25cc720, variable:15, abi_mask:0
[D] NPN_GetValueProc instance:0x25cc720, variable:18, abi_mask:0
[+] NPN_New: success
[D] NPN_GetValueProc instance:0x25cc720, variable:14, abi_mask:0
[+] NPN_SetWindow: success
[D] NPN_GetURLNotifyProc:0x25cc720, url: javascript:top.location+"__flashplugin_unique__", window: (null)
[D] NPN_GetValueProc instance:0x25cc720, variable:15, abi_mask:0
[+] NPN_NewStream: success
Lenght: 455
[D] NPN_UserAgentProc instance:0x25cc720
[+] NPN_DestroyStream: success
[D] NPN_GetURLNotifyProc:0x25cc720, url: sample.xml, window: (null) 
```

谢谢！

编辑：

我试过这样的事情（代码在 NPN_GetURLNotifyProc 函数中）。但是，我的应用程序冻结在我的 geturlnotifyproc 内......

```
NPStream s;
uint16 stype;
memset(&s,0,sizeof(NPStream));
s.url = strdup(url);
fprintf(stderr, "URL: %s\n", s.url);
checkError("NPN_NewStream", pluginFuncs.newstream(instance,"text/html",&s,0,&stype));    
    writeStream(instance, &pluginFuncs, &s);
pluginFuncs.urlnotify(instance,url,NPRES_DONE,notifyData);
checkError("NPN_DestroyStream", pluginFuncs.destroystream(instance,&s,NPRES_DONE));
            free((void*)s.url); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:11:09.463

我忘了将通知添加到我的流中...

```
NPError NPN_GetURLNotifyProc(NPP instance, const char* url, const char* target, void* notifyData) {
    fprintf(stderr,"[D] NPN_GetURLNotifyProc:%p, url: %s, window: %s, data: %p\n", instance, url, target, notifyData);
    NPStream s;
    uint16 stype;

    memset(&s,0,sizeof(NPStream));
    s.url = strdup(url);
    s.notifyData = notifyData;

    fprintf(stderr, "NPP: %p URL: %s\n", instance, url);

    checkError("NPN_NewStream", pluginFuncs.newstream(instance,"text/html",&s,0,&stype));    
    writeStream(instance, &pluginFuncs, &s);

    checkError("NPN_DestroyStream", pluginFuncs.destroystream(instance,&s,NPRES_DONE));
    free((void*)s.url);
    pluginFuncs.urlnotify(instance, url, NPRES_DONE, notifyData);
    return 0;
} 
```

**我现在有一个独立的 gtk 应用程序，它可以运行已编译的 flash (swf)。** 希望它对将来的人有所帮助。我建议做一个插件来读取另一个插件（又名嗅探器），以真正知道调用哪个函数（“以及事情是如何工作的”）以获得一个体面的日志文件。

# sql - 奇怪的 SSRS 2008 问题

> ID：10538224
> 
> 赞同：0
> 
> 时间：2012-05-10T16:18:07.053
> 
> 标签：sql, sql-server, reporting-services, ssrs-2008

我对 SSRS 2008 有一个奇怪的问题，我想知道是否有人可以解释一下。我已将公司域用户添加到“主页”文件夹并将它们设置为“浏览器”，但是普通用户（即没有管理员权限的用户）可以访问管理员可以访问的所有内容，即站点设置、安全性等。这显然是我们绝对不希望发生的。任何想法，是否有一些我缺少的配置或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:17:42.040

检查浏览器角色下勾选的任务，看看您是否勾选了不适用于该角色的权限。

安全 > 角色 > 浏览器 .. 属性。

应该只（勾选）查看报告、查看资源、查看文件夹、管理个人订阅、查看模型

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:03:14.557

好吧，一个典型的 Microsoft 解决问题的方法，我从我的 SQL Server 实例中卸载了 Reporting Services，然后重新安装并重新配置了所有内容，一切都得到了修复：)

# c# - C# 控制台应用程序将图形生成为位图

> ID：10538225
> 
> 赞同：1
> 
> 时间：2012-05-10T16:18:09.247
> 
> 标签：c#, charts, bitmap

我正在寻找一种从控制台应用程序（或 NT 服务）中生成图形并导出到位图的方法。这是一个后端进程，因此图表永远不会显示。刚刚保存到文件。需要完全线程安全，因为我的控制台将并行执行多次。

第三方组件很好，但免费更好：D

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:34:17.710

如果您熟悉 GDI+，您可以在内存位图上绘制任何您想要的内容并将其保存到文件中。只要您不引用同一个文件或在多个线程中传递相同的源数据引用，就应该没问题。下面是一个简短示例，说明如何以程序方式生成位图，您可以将其包装在控制台应用程序、Windows 服务、Web 服务等中：

```
 Image bmp = new Bitmap(intWidth, intHeight);
    Graphics g = Graphics.FromImage(bmp);
    Rectangle r = new Rectangle(0, 0, intWidth, intHeight);

    g.DrawEllipse(Pens.Red, g.VisibleClipBounds);

    bmp.Save(strFileNameWithPath); 
```

就生成图表而言，这将在很大程度上取决于您的数学技能有多好、源数据的结构以及您想要制作什么样的图表。肯定有一些图书馆已经这样做了（想到 Telerik），但我是一种“自己动手”的编码器。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:22:05.437

MS 图表组件 - 免费：

[http://archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:22:28.697

使用 excel 互操作程序集。非常适合图表，并且非常易于使用。您还可以对图表进行许多自定义和修改。

简单教程：

[http://www.dotnetperls.com/excel-chart](http://www.dotnetperls.com/excel-chart)

这是您应该需要的程序集文件。

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel(v=office.11).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T16:24:32.143

一般来说，我们希望您尝试一些事情并在遇到麻烦时提出问题。

也就是说，假设您想自己渲染图表（即不使用预制的图表包），我会看看[Bitmap 类](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)和 Graphics 类，特别是[Graphics.FromImage](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage)。位图是图像的内存表示，Graphics 类为您提供了绘制它的方法。

# android - 在 Android 中记录文件访问

> ID：10538228
> 
> 赞同：0
> 
> 时间：2012-05-10T16:18:15.737
> 
> 标签：android, security, logging

我在尝试为 Android 创建自定义文件访问记录器时遇到麻烦。我检查[了 FileObsever](http://developer.android.com/reference/android/os/FileObserver.html)，但我需要获取有权访问某个文件列表的进程的 PID（USERID 也很有用）。

我也尝试了不同的选择，但没有成功。

是否可以使用 PID 访问某些文件进行记录？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:21:08.097

有一些关于将 PID 报告添加到 Linux inotify() 机制的讨论（这可能是 FileObserver 的基础），但我没有从最初的搜索中发现它是否真的被合并并因此被 Android 继承 - 如果它是的，它可能只适用于具有管理权限的监视器的外国 UID。

您可以尝试使用 FileObserver，然后通过扫描 /proc 以查找 fd 来模仿 lsof，无论您在 Android 上被允许这样做的程度（有限？）。然而，这会给您带来竞争条件问题 - 在您看到“谁做的”之前，文件可能会再次关闭。

如果您真的想这样做，您可能需要一个自定义 ROM - 您可以应用任何必要的补丁来进行 inotify 并为您的安全应用程序授予权限，或者（如果您更喜欢那样）禁用报告的权限检查。

我对补丁的发现 - 当前合并状态未知：

[http://lwn.net/Articles/307536/](http://lwn.net/Articles/307536/)

直接使用 inotify() 的介绍（没有 PID 报告）：

[http://www.linuxjournal.com/article/8478?page=0,0](http://www.linuxjournal.com/article/8478?page=0,0)

# .htaccess - 需要帮助将 htaccess 转换为 ISAPI_Rewrite

> ID：10538230
> 
> 赞同：0
> 
> 时间：2012-05-10T16:18:32.413
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, isapi-rewrite

有谁可以帮我将这些规则转换为 [ISAPI_Rewrite]。谢谢。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
RewriteCond %{REQUEST_FILENAME} -d [NC,OR]
RewriteCond %{REQUEST_FILENAME} -l [NC]
RewriteRule .* - [L]

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:21:20.050

不幸的是，指令 RewriteCond %{REQUEST_FILENAME} -f 是版本 3 中的一项新功能，版本 2 不支持。唯一的解决方法 - 列出所有真实文件夹，如 (?: folder1|folder2|folder3|etc)。

1）不要忘记将以下内容放在配置文件的顶部：

```
[ISAPI_Rewrite] 
```

2）第二条规则应该可以正常工作。也许你需要做：

```
RewriteRule ^/(.+)$ index.php?url=$1 [I,L] 
```

# ios - iOS - 带有故事板的 UISplitViewController - 多个主视图和多个详细视图

> ID：10538231
> 
> 赞同：7
> 
> 时间：2012-05-10T16:18:33.503
> 
> 标签：ios, ipad, uiviewcontroller, storyboard, uisplitviewcontroller

我正在尝试使用 UISplitViewController 和情节提要组合一个 iPad 应用程序。主视图从一个导航控制器开始，该控制器链接到一个包含 6 个菜单选项的表格视图。表格中的每个单元格都将不同的表格视图控制器推送到导航堆栈上。这对于主视图工作正常。每个主视图都有一个表格列表，单击该列表时需要在详细信息窗格中显示不同的视图控制器。我目前已经使用设置为“替换”和“详细信息拆分”的 segue 来完成此操作，这在第一次单击一行时起作用，但是一旦您单击主视图中的另一行或旋转设备，应用程序就会崩溃使用 EXC_BAD_ACCESS。

我相当确定我的问题与如何为 UISplitViewController 设置委托有关。当我有多个主 VC 和多个详细 VC 时，我对如何使用它感到困惑。委托代码应该放在哪里 - 主代码还是详细信息？我是否必须在每个视图控制器中实现 UISplitViewControllerDelegate 协议事件？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T04:10:19.197

如果拆分视图控制器委托是已被替换的详细视图控制器，这就是崩溃的原因。被替换的细节视图控制器正在被释放，因此拆分视图控制器委托不再是对有效对象的引用。

您可以在 prepareForSegue:sender: 中更新委托。例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"MySegue"]) {
        UIViewController *destinationViewController = [segue destinationViewController];
        if ([destinationViewController conformsToProtocol:@protocol(UISplitViewControllerDelegate)]) {
            self.splitViewController.delegate = destinationViewController;
        }
        else {
            self.splitViewController.delegate = nil;
        }
    }
} 
```

您为委托使用的视图控制器取决于您的视图控制器层次结构。在最简单的情况下，分配给 splitVC 细节的任何视图控制器都可能需要成为委托。您可能希望将它们全部基于处理共享拆分视图控制器委托逻辑的通用超类。

# excel - 如何在没有循环引用的情况下自动汇总excel中的整列？

> ID：10538236
> 
> 赞同：1
> 
> 时间：2012-05-10T16:19:00.243
> 
> 标签：excel, sum, formula, circular-reference

![在此处输入图像描述](../Images/bbcb5ed991680a88f2ef16f27178cf2f.png)

我想在红色圆圈单元格（**C19**）中有所有 C 列的总和。我尝试在公式 ( `=SUM(C1:C50)`) 中使用 C1 到 C50。我使用 C1:C50 而不是 C1:C18 因为如果我在最终总和之前添加一些行，我希望这些行包含在最终总和中。

所以2个问题：

1) 如何在没有 C1 （这是一个日期）和没有 C19 的情况下对所有 C 列求和（以不引起循环引用，因为这是应该仅对先前值求和并显示的单元格？

2）如果有一个公式，如果我添加更多行（假设我添加另一行并且最终总和更改为 C20），它会自动更新吗？然后 C19 也应该添加到总和中。

PS：图像显示了 B 列的公式，因为我将在所有列中使用相同的公式，我只是询问了 C，因为我有一个工作总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-13T19:58:32.163

我喜欢做以下事情：

*   在我要跳过的行中的字段（即 A1）中，输入将该行唯一描述为标题/跳过行的文本（即“标题跳过”）
*   在我想要求和的列（即 B:B）中，没有循环引用，输入一个“SUMIF”公式，使用标题文本作为要跳过的 IF 的一部分。=SUMIF(A:A, "<>标题跳过", B:B)

例如

```
[   ][      A      ][                 B                 ]
[ 1 ][ header-skip ][ =SUMIF(A:A, "<>header-skip", B:B) ]
[ 2 ][             ][                9.5                ]
[ 3 ][             ][                7.5                ]
[ 4 ][             ][               25.0                ] 
```

您的第 1 行公式现在应该正确显示“42”而没有任何循环引用。与使用偏移量、索引和间接等相比，这对我来说更容易记住并且放入工作表中更快。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:07:49.877

如果您使用`=SUBTOTAL(9, range)`，则计算的总数不会用于以后的小计。换句话说，如果您在 C19（或 C 列中的其他单元格）中有小计，那么最后的小计（例如 C50）将忽略该范围内的小计（`=SUBTOTAL(9,C2:C49)`）。通过这种方式，您不必担心从您希望求和的范围中省略某些单元格引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T16:37:02.357

> 1) 如何在没有 C1 （这是一个日期）和没有 C19 的情况下对所有 C 列求和（以不引起循环引用，因为这是应该仅对先前值求和并显示的单元格？

```
=SUM(C2:C18,C20:C50) 
```

> 2）如果有一个公式，如果我添加更多行（假设我添加另一行并且最终总和更改为 C20），它会自动更新吗？然后C19也应该加到总和中

如果您要使用上述公式在第 2 行和第 18 行之间插入一行，Excel 将自动将其更改为 `=SUM(C2:C19,C21:C51)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T17:00:54.890

不知道您是否仍然感兴趣，但是：有一种变通方法可以解决，但不会给您循环引用。

这是我自己的电子表格中的一个示例：“=SUM(M1:OFFSET(M13,-1,0,1,1))”

通常，您会将一组数据与“=SUM(M1:M19)”相加。

但是，如果您想这样做并且仍然能够添加行，则需要合并一个 OFFSET 公式。OFFSET 定位您的参考单元格，然后向上或向下移动您告诉它的单元格数量。

例如，我的（上图）找到 M13 然后向上移动一个单元格（-1），结果是 1 个单元格高 1 个单元格宽（1,1）。

# git - Git push：分支上的更改并不总是触发 Jenkins 运行

> ID：10538238
> 
> 赞同：3
> 
> 时间：2012-05-10T16:19:06.600
> 
> 标签：git, jenkins

我有 3 个 Git 分支，master、br2 和 br3。我有 3 个 Jenkins 工作；每个人都克隆相同的 repo，但签出不同的分支。我的理解是，在 post-receive 钩子中使用以下命令（[http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/](http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/) ）它应该触发 Jenkins 为完成推送的分支启动工作。

卷曲[http://smfosbuild:8080/git/notifyCommit?url=git@vfilvgit2:scmtest.git](http://smfosbuild:8080/git/notifyCommit?url=git@vfilvgit2:scmtest.git)

在 br2 上进行更改并推送，正确的 Jenkins 作业将开始。但是推动对 master 或 br3 所做的更改不会导致关联作业启动。

我还激活了电子邮件触发器，并且我收到了所有推送的电子邮件，指示正确的分支。因此，接收后挂钩正在获取有关已更改分支的正确信息。有什么想法是我上面的命令不正确，还是我的 Jenkins 配置中缺少某些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:30:26.163

好吧，为了调查这个问题，我必须查看您的 GIT 和 Jenkins 安装。但与此同时，我可以建议一条更简单的道路：

在项目配置中，您可以将任何构建设置为通过常规 HTTP 调用远程触发（作业 ->*配置*->*构建触发器*->*远程触发构建（例如，从脚本）*）。这不会验证任何存储库信息，而是无论如何都执行构建。这实际上很有帮助，因为您描述的方法也给我们带来了很多麻烦。所以，把这个放在`post-receive`钩子里，我们只是像这样调用带有作业名称的 URL：

```
JENKINS_URL/job/Our$20Project%20-%20${BRANCH_NAME}/build?token=TOKEN_NAME 
```

显然，分支名称是分支的名称。

后来，当我接手该构建时，我进行了更改，只对所有分支使用一个项目，并将分支名称作为参数传递。分支被添加到构建名称中（我们不再使用数字）并且它更容易和更灵活的解决方案。但它并不适合所有人。

如果你愿意，我可以为你提供一个源代码`post-receive`，但是它真的很容易编写——我们是基于Git 源中可用的[post-receive-email制作的。](https://github.com/git/git/blob/master/contrib/hooks/post-receive-email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:51:52.043

您是否知道，即使您使用 Kohsuke 博客文章中描述的通知方法，您也需要为该作业配置轮询？轮询间隔可以很长，例如“@daily”，但它必须存在，因为通知仅用于触发立即轮询。

此外，您的工作需要使用 git 存储库“git@vfilvgit2:scmtest.git”。请仔细检查您没有使用 ssh://git@vfilvgit2/scmtest.git。

# php - 如何从此字符串创建多维 PHP 数组？

> ID：10538246
> 
> 赞同：1
> 
> 时间：2012-05-10T16:19:22.497
> 
> 标签：php, arrays, multidimensional-array

我有一个字符串，我想从中分离并制作一个多维数组。字符串如下所示：

```
$string = "item-size:large,color:blue,material:cotton,item-size:medium,color:red,material:silk,"; 
```

不幸的是，我无法控制字符串的组合方式，这就是我尝试制作这个数组的原因。

我的目标是制作这样的数组：

```
$item[1]['color'] // = blue
$item[2]['material'] // = silk 
```

所以，这就是我所做的：

```
$item = array();

$i=0; // I know this is messy
$eachitem = explode("item-",$string);
array_shift($eachitem); // get rid of the first empty item  

foreach ($eachitem as $values) {

    $i++; // Again, very messy
    $eachvalue = explode(",",$values);
    array_pop($eachvalue); // get rid of the last comma before each new item

    foreach ($eachvalue as $key => $value) {

        $item[$i][$key] = $value;

    }

} 
```

我显然对此感到迷茫……有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:23:23.363

你很接近，这就是我的做法：

```
$string = "item-size:large,color:blue,material:cotton,item-size:medium,color:red,material:silk,";
$substr = explode("item-", $string);
$items = array();
foreach ($substr as $string) {
    $subitems = array();
    $pairs = explode(",", $string);
    foreach ($pairs as $pair) {
        list($key, $value) = explode(":", $pair, 2);
        $subitems[$key] = $value;
    }
    $items[] = $subitems;
}
var_dump($items); 
```

在这里使用`list`很棒:) 请注意，您需要额外的计数限制器，`explode`否则如果有更多数据，您可能会丢失数据`:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:27:57.337

```
$array = array();
$string = explode(',', $string);
foreach($string as $part):
   $part = trim($part);
   if(strlen($part) < 3) continue;
   $part = explode(':', $part);
   $array[$part[0]] = $part[1];
endforeach; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:29:59.210

你大部分时间都在。只需将您的内部替换`foreach`为

```
foreach ($eachvalue as $value) {
    $properties = explode(':', $value);
    $item[$i][$properties[0]] = $properties[1];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:16:48.830

```
$string = "item-size:large,color:blue,material:cotton,item-size:medium,color:red,material:silk,";
$num_attr = 3;

$item = array();
$i=$x=0;
foreach(explode(',', trim($string,',')) as $attr)
{
    list($key, $value) = explode(':', $attr);
    $item[$x+=($i%$num_attr==0?1:0)][$key] = $value;
    $i++;
} 
```

将 $num_attr 设置为字符串中项目属性的数量（如果它们增长/缩小，这将允许在未来进行调整）。foreach 内的修剪正在删除任何“空”数据，例如最后一个逗号（如果出现的话，它也会删除一个空的第一个逗号）。看起来很疯狂的 $item[$x+=($i%$num_attr==0?1:0)] 正在采用计数器的模数/属性数，当它为 0 时，这意味着我们处于新产品线，所以我们将 1 添加到填充项目编号索引的 x，如果模数返回一个数字，那么我们知道我们在同一个产品上，所以我们添加 0，这不会更改项目索引，以便将属性添加到同一个项目。

# eclipse - 为什么从 Eclipse 中使用 EGit 插件克隆远程存储库会导致两个本地存储库？

> ID：10538247
> 
> 赞同：1
> 
> 时间：2012-05-10T16:19:27.520
> 
> 标签：eclipse, git, duplicates, clone, egit

当通过 EGit-Plugin 从 eclipse 中导入远程项目时，它首先询问我一个 url，然后询问我应该克隆存储库的路径。

1.  我的 Eclipse 工作区位于`/home/me/Development/eclipse/workspace`.
2.  我告诉 EGit 将远程存储库克隆到`/home/me/Repositories/git/myproject`.

我注意到 eclipse 将存储库克隆到 1 和 2。

我在 eclipse 中做了一点改动，意识到只有 2 中的本地存储库受到影响。工作区 (1) 中的本地存储库不受影响。

我是否以某种方式错误配置了我的 IDE，或者这是故意的？

# sql - 使用 IN 子句将 SQL 脚本转换为 LINQ

> ID：10538252
> 
> 赞同：1
> 
> 时间：2012-05-10T16:19:37.980
> 
> 标签：sql, linq

我正在尝试研究如何将下面的脚本从 SQL 转换为 LINQ。欢迎任何帮助。

```
SELECT *
FROM
    [tableName]
WHERE
[MyDate] IN
    (SELECT
        MAX([MyDate])
   FROM
      [tableName]
   GROUP BY
      [MyID]) 
```

我找不到“IN”子句部分的等效项。这个论坛上存在一些问题，但没有一个涉及选择日期时间。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:22:21.960

您可以使用“.Contains(..)”函数：例如

```
var itemQuery = from cartItems in db.SalesOrderDetails
              where cartItems.SalesOrderID == 75144
              select cartItems.ProductID;

var myProducts = from p in db.Products
                where itemQuery.Contains(p.ProductID)
                select p; 
```

虽然看起来像 2 次往返，但由于 LINQ 仅在 IEnumerable 被触发时构造查询，因此您应该获得合理的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:30:49.757

我认为`Any()`这是您正在寻找的：

```
var result = tableName.Where(x => 
                (from t in tableName
                group t by t.MyID into g
                where g.Max(y => y.MyDate) == x.MyDate
                select 1).Any()) 
```

# perl - 在 Perl 中，使用 RC4 时我无法取回加密文本

> ID：10538253
> 
> 赞同：2
> 
> 时间：2012-05-10T16:19:39.207
> 
> 标签：perl, encryption, unpack, rc4-cipher

我有一个带有 RC4 加密凭据的文件，负责将此类凭据写入文件的代码如下：

```
sub dummyFunction() {
    # Useless stuff for the scope of the problem
    # ...
    my $dbHost = "localhost";
    my $passphrase = "123"; # For example purposes, logic is different.
    my $cipher = Crypt::RC4->new($passphrase);
    return unpack('H*',$cipher->RC4($dbHost));
} 
```

所以那段代码会返回类似：`3F9FDCE3891C6B8851` 但如果我尝试以下操作：

```
sub anotherDummyFunction() {
    my $ciphered_text = &dummyFunction();
    my $passphrase = "123";
    my $cipher = Crypt::RC4->new($passphrase);
    print $cipher->RC4(pack('H*',$ciphered_text));
} 
```

我期待看到`localhost`，但相反，我得到了一堆字节，那么我将如何取回原始文本？

我已经用我的密码和我的十六进制编码字符串在线检查了 RC4 解密器，并且在线 RC4 解密器确实返回`localhost`，所以我确信加密的字符串是正确的。

谢谢！

**PS**：上面的例子在一个孤立的环境中工作，但是当涉及到我的脚本时它没有。我无法取回原始字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:45:48.907

如果有人再次遇到这种情况：

如果你有类似的东西：

* * *

**测试PL**

* * *

```
 #!/usr/bin/perl
 use strict;
 use warnings;
 use Crypt::RC4;

 my $cipher = Crypt::RC4->new("passphrase123");
 print unpack('H*',$cipher->RC4("encrypt-me"))."\n";
 print unpack('H*',$cipher->RC4("encrypt-me"))."\n"; 
```

你会注意到你最终会得到两个不同的编码字符串：

```
 ./test.pl
 25d2aa557cccc3951074
 1e87a5db7830a0b1cabd 
```

为了避免这种行为，我做了：

`undef $cipher`

就在尝试加密另一个字符串之前，然后再次实例化该对象。

如果你试试这个：

```
 my $cipher = Crypt::RC4->new("passphrase123");
 print unpack('H*',$cipher->RC4("encrypt-me"))."\n";
 undef($cipher);
 $cipher = Crypt::RC4->new("passphrase123");
 print unpack('H*',$cipher->RC4("encrypt-me"))."\n"; 
```

你会得到相同的字符串：

```
./test.pl
25d2aa557cccc3951074
25d2aa557cccc3951074 
```

这也可以包装在子过程中，以避免一遍又一遍地定义和取消定义对象。

```
sub encryptString()
{
    my ($string,$passphrase) = @_;
    my $cipher = Crypt::RC4->new($passphrase);
    return unpack('H*',$cipher->RC4($string));
} 
```

# sql-server - SQL Server 2005 事务复制性能

> ID：10538267
> 
> 赞同：2
> 
> 时间：2012-05-10T16:20:41.693
> 
> 标签：sql-server, performance, replication, transactional-replication

有人知道事务复制如何影响发布者数据库的性能吗？我想使用订阅者作为生成在线报告和统计数据的基础（使用事务复制复制数据），但我不知道它如何降低源数据库的性能（或不降低）。

源服务器：SQL 2005 Standard、VMWare、4 CPU（16 核）、16 GB RAM

目标服务器：SQL 2005 Standard、VMWare、1 个 CPU（4 核）、8 GB RAM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:51:29.590

嗯……是的，不是的。事务复制是异步的，因此不会因为发布而降低性能。但是，根据您现在需要在服务器上节省多少额外的马力，日志阅读器可能会让您处于领先地位。另请注意，何时可以通过事务复制从事务日志更改中清除日志记录的语义，因此在此要小心。

# git - 我在 GIT 的哪个标签

> ID：10538270
> 
> 赞同：1
> 
> 时间：2012-05-10T16:20:44.800
> 
> 标签：git, github, git-checkout

我是 GIT 的新手。上周我检查了我的代码到一个标签。我忘记了标签名称，显然代码有问题，所以我想知道我从哪个标签签出。我怎么能找到那个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:23:26.500

您可以使用该`git describe`命令查找与当前提交关联的“最近”标签：

```
git describe --tags 
```

例如，在示例存储库中，这给了我：

```
testtag-2-g25a38be 
```

这意味着我处于提交状态`g25a38be`，这是标记之外的两次提交`testtag`。

# html - 浏览器没有动画大div

> ID：10538271
> 
> 赞同：0
> 
> 时间：2012-05-10T16:20:45.657
> 
> 标签：html

我有一个页面（类似于原始页面的虚构页面）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="jquery.js"></script>

<script>
$(document).ready(function(){
$("img").attr("width","180");
$("div").click(function(){$(this).slideToggle();
});});
</script><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>
<div style="position:absolute;top:0px;bottom:0px;left:0px;right:0px;"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"><img src="img.jpg"></div>
<body>
</body>
</html> 
```

这不是动画，看起来就像它挂在浏览器中一样，它正在为小号制作动画。图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:28:08.663

在这里工作正常[http://jsfiddle.net/JSpu5/](http://jsfiddle.net/JSpu5/)或[http://jsfiddle.net/JSpu5/1/](http://jsfiddle.net/JSpu5/1/)

```
$("div").click(function(){$(this).slideToggle();}); 
```

如果您单击 div 它会为幻灯片设置动画，但是您将无法再看到该 div。想一个更好的逻辑来做动画，也许用一个按钮。

确保正确包含 JQuery js 文件。试试这个方法

```
<script src="http://code.jquery.com/jquery-1.7.2.js" /> 
```

**编辑：**

这里有一张图片[http://jsfiddle.net/JSpu5/2/](http://jsfiddle.net/JSpu5/2/)

# dart - 无法在 Dart 中解析类名“InvocationMirror”

> ID：10538275
> 
> 赞同：1
> 
> 时间：2012-05-10T16:21:09.493
> 
> 标签：dart, dart-mirrors

我一直在尝试使用 Dart 的`noSuchMethod()`，但是这段代码

```
noSuchMethod(InvocationMirror invocation) {
  // ...
} 
```

导致以下错误：`cannot resolve class name 'InvocationMirror' from 'MyClass'`

看起来没有像 InvocationMirror 这样的类。它可能是没有它的旧版本的飞镖吗？我拥有的是今天刚下载的来自 SDK for Mac 的稳定版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:59:29.180

您正在观察规范和实现之间的不一致（这不足为奇，其中有很多）。你可以使用`noSuchMethod`，至少在 Dart VM 上（不知道 dart2js），但它看起来像这样`noSuchMethod(String name, List arguments)`：未来，当反射最终来到 Dart 时，它会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:33:09.443

您目前不能使用**InvocationMirror**类，因为基于镜像的反射尚未在 Dart 中实现（如[本文](http://www.dartlang.org/articles/emulating-functions/)所述）。

# progress-4gl - Progress-4GL 写入日志文件

> ID：10538279
> 
> 赞同：1
> 
> 时间：2012-05-10T16:21:31.303
> 
> 标签：progress-4gl, openedge

运行progress-4gl 程序时，我可以使用日志管理器写入日志文件。但是，在写出消息语句时，它们仅在我使用消息视图作为警报框时才会出现。IE：

```
log-manager:logfile-name = "queue.p"
message "this will not appear".
message "this will appear" view-as alert-box. 
```

将在日志文件中显示为：

[12/05/10@09:03:21.154-0700] P-11993170 T-000001 1 4GL -- 这将出现

有什么办法可以强制日志管理器写出**不**包括视图作为警报框的消息语句？我们的遗留代码到处都使用消息语句，我宁愿不必通过所有相关的库来更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:12:10.770

我担心无法将消息（没有“VIEW-AS ALERT-BOX”）发送到客户端日志文件。

进度帮助说：“OpenEdge 将所有 ABL VIEW-AS ALERT-BOX 消息写入日志文件”。（LOG-ENTRY-TYPES 属性 > 4GLMessages）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T03:34:35.970

您是否正在考虑类似 LOG-MANAGER:WRITE-MESSAGE( ) 方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T11:32:34.860

在这种情况下，您应该使用批处理启动参数。**-b** 然后将不显示任何消息（错误除外）。

```
prowin32.exe -p c:\test.p -b 
```

您可以定义记录的消息应该在哪里。那么也不会显示错误。例如：

```
prowin32.exe -p c:\test.p -b > c:\Test.txt 
```

# c++ - 指针集合和添加对象

> ID：10538281
> 
> 赞同：0
> 
> 时间：2012-05-10T16:21:40.313
> 
> 标签：c++, arrays, pointers, collections

我在将新对象指针添加到指针集合时遇到了问题。我看不出我做错了什么以及为什么会出现此错误。我不确定我应该如何初始化指针数组。

```
studenci.cpp: In constructor `Studenci::Studenci()':
studenci.cpp:10: error: expected identifier before '*' token
studenci.cpp:10: error: expected `;' before "Student" 
```

**主文件**

```
#include <iostream>
#include "student.h"
#include "studenci.h"

using namespace std;

int main(int argc, char *argv[])
{

Studenci *s = new Studenci(3); //My collection

Student *s1 = new Student("s1","Adam", "Smyk", "82736372821", "s1020", 22, 1, true);  //First object
Student *s2 = new Student("s2","Arnold", "Smyk", "82736372823", "s1021", 22, 1, true);
Student *s3 = new Student("s3","Arnold", "Smyk", "82736372822", "s1031", 24, 1, false);

s1->show();
s2->show();
s3->show(); //Showing content

s->add(s1); //I think here is a problem with adding new pointers 
    s->add(s2)->add(s3);

    return 0;
} 
```

**Studenci.cpp**

```
#include "student.h"
#include "studenci.h"
#include <iostream>
using namespace std;

Studenci::Studenci()
{
        m_tab = new *Student[m_number];  //Is it correct ? 
        m_counter = 0; 
}

void Studenci::add(Student* st)
{
    if( m_counter < m_number){

    m_tab[m_counter] = new Student(*st);  
    m_counter++;
}else
        cout<<"Full!"<<endl;    //error, no more space
} 
```

**学生.h**

```
class Studenci{

    public:
    Studenci(); //default

    Studenci(int number):m_number(number)
    {} 
    public:
        int m_number;
        int m_counter;
        Student **m_tab; 

    //Function of adding
    void add(Student* st);

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:24:46.653

在`*`你`new *Student[m_number]`是在错误的位置。您正在创建一个指针数组，`Student`并且指针符号必须在之后`Student`

```
m_tab = new Student*[m_number]; 
```

# c# - 如何在 WPF 中关注 RTB 时显示等待光标

> ID：10538285
> 
> 赞同：0
> 
> 时间：2012-05-10T16:22:12.240
> 
> 标签：c#, wpf, textbox, cursor

所以现在发生的事情如下。当我专注于 WPF 应用程序中的富文本框时，我似乎无法将光标从 Carat 更改（或者“I”文本选择光标是什么）。

这是一个问题，因为当用户按下 Ctrl+S 时，我希望程序保存，并且我希望显示**Cursor.Wait**光标。如果我专注于任何其他控件（Treeview、stackPanel、Menu），除了 RTB 之外的所有控件，这都有效。

它只是以这种方式构建而无法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:12:08.473

[FrameworkElement.ForceCursor 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.forcecursor.aspx)设置为`True`将覆盖子元素建立的光标首选项：

```
<StackPanel ForceCursor="True" Cursor="Wait">
    <RichTextBox />
</StackPanel> 
```

现在`RichTextBox`将显示`StackPanel`光标。

# reporting-services - #在报表生成器中对数字求和时出错？

> ID：10538287
> 
> 赞同：10
> 
> 时间：2012-05-10T16:22:19.103
> 
> 标签：reporting-services, reportbuilder, reportbuilder3.0

我试图在一个分组中总结一些数字，有时`#error`会出现 a 而不是实际数字。我知道除以 0 或数据集中有空值时可能会发生这种情况，但在数据集中，我只看到有效数字。这些数字不足以导致溢出，我确信表达式是正确的，因为`#error`只有特定的参数组合才会出现。

我看到这条`#error`消息还有其他原因吗？

要清楚，公式是`=Sum(Fields!Number.Value)`

**编辑：**任何聚合函数也会导致此消息。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T19:26:25.630

有时 SSRS 决定从数据集返回的数字字段是文本。那么很多 VB 函数都会失败。

看看将数字转换为小数是否可以解决问题：

```
=SUM(CDEC(Fields!Number.Value)) 
```

# c++ - noreturn 的意义何在？

> ID：10538291
> 
> 赞同：220
> 
> 时间：2012-05-10T16:22:25.517
> 
> 标签：c++, c++11, attributes, noreturn

[[dcl.attr.noreturn]](http://eel.is/c++draft/dcl.attr.noreturn)提供以下示例：

```
[[ noreturn ]] void f() {
    throw "error";
    // OK
} 
```

但我不明白这是什么意思`[[noreturn]]`，因为函数的返回类型已经是`void`。

那么，`noreturn`属性的意义何在？它应该如何使用？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-05-10T16:27:07.230

noreturn 属性应该用于不返回给调用者的函数。这并不意味着 void 函数（确实返回给调用者 - 它们只是不返​​回值），而是在函数完成后控制流不会返回到调用函数的函数（例如退出应用程序的函数，永远循环或抛出异常，如您的示例）。

编译器可以使用它来进行一些优化并生成更好的警告。例如，如果`f`具有 noreturn 属性，编译器可能会`g()`在您编写`f(); g();`. 同样，编译器会知道在调用`f()`.

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-05-10T16:25:51.367

`noreturn`不会告诉编译器该函数不返回任何值。它告诉编译器*控制流不会返回给调用者*。这允许编译器进行各种优化——它不需要保存和恢复调用周围的任何易失状态，它可以死代码消除任何否则会跟随调用的代码，等等。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-05-10T16:25:22.410

这意味着该功能将无法完成。调用后控制流将永远不会命中语句`f()`：

```
void g() {
   f();
   // unreachable:
   std::cout << "No! That's impossible" << std::endl;
} 
```

编译器/优化器可以以不同的方式使用这些信息。编译器可以添加上面代码不可访问的警告，并且它可以`g()`以不同的方式修改实际代码，例如支持延续。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-11-22T22:23:54.207

以前的答案正确解释了 noreturn 是什么，但没有**解释**它为什么存在。我不认为“优化”注释是主要目的：不返回的函数很少见，通常不需要优化。相反，我认为 noreturn 存在的主要理由是避免误报警告。例如，考虑以下代码：

```
int f(bool b){
    if (b) {
        return 7;
    } else {
        abort();
    }
 } 
```

如果 abort() 没有被标记为“noreturn”，编译器可能已经警告过这段代码的路径，其中 f 没有按预期返回整数。但是因为 abort() 被标记为 no return，所以它知道代码是正确的。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-01-08T17:47:02.863

从理论上讲，类型`void`是其他语言中所说的`unit`或`top`. 它的逻辑等价物是*True*。任何值都可以合法地转换为`void`（每种类型都是 的子类型`void`）。将其视为“宇宙”集合；*世界上的所有*值都没有共同的操作，因此对 type 的值没有有效的操作`void`。换一种说法，告诉你某物属于宇宙集不会给你任何信息——你已经知道了。所以以下是合理的：

```
(void)5;
(void)foo(17); // whatever foo(17) does 
```

但下面的任务不是：

```
void raise();
void f(int y) {
    int x = y!=0 ? 100/y : raise(); // raise() returns void, so what should x be?
    cout << x << endl;
} 
```

`[[noreturn]]`另一方面，有时称为,`empty`或并且是*False*的逻辑等价物。它根本没有值，并且这种类型的表达式可以转换为任何类型（即它的子类型）。这是空集。请注意，如果有人告诉您“表达式 foo() 的值属于空集”，它会*提供大量*信息——它告诉您该表达式永远不会完成其正常执行；它会中止、抛出或挂起。它与 完全相反。`Nothing``Bottom``Bot`**`void`**

 **所以以下没有意义（伪C++，因为`noreturn`不是一流的C++类型）

```
void foo();
(noreturn)5; // obviously a lie; the expression 5 does "return"
(noreturn)foo(); // foo() returns void, and therefore returns 
```

但是下面的赋值是完全合法的，因为`throw`编译器理解为不返回：

```
void f(int y) {
    int x = y!=0 ? 100/y : throw exception();
    cout << x << endl;
} 
```

在完美的世界中，您可以将`noreturn`其用作上述函数的返回值`raise()`：

```
noreturn raise() { throw exception(); }
...
int x = y!=0 ? 100/y : raise(); 
```

遗憾的是，C++ 不允许这样做，可能是出于实际原因。相反，它使您能够使用`[[ noreturn ]]`有助于指导编译器优化和警告的属性。**

# c++ - O(n^log n) 碰撞检测算法

> ID：10538294
> 
> 赞同：2
> 
> 时间：2012-05-10T16:22:31.210
> 
> 标签：c++, algorithm, collision-detection, time-complexity

我正在构建一个游戏引擎，我想知道：有没有时间复杂度为 O(N^log N) 的碰撞检测算法？

我还没有编写任何编码，但我只能想到一个 O(N^2) 算法（即：2 个 for 循环遍历对象列表以查看是否存在冲突）。

任何建议和帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:35:14.373

空间分区可以创建 O(n log(n)) 解决方案。根据对象的确切结构和性质，您将需要不同的空间分区算法，但最常见的是八叉树和 BSP。

基本上，空间分区的想法是按对象占据的空间对对象进行分组。节点 Y 中的对象永远不会与节点 X 中的对象发生碰撞（除非 X 是 Y 的子节点，反之亦然）。然后，您将对象划分为进入哪些节点。我自己实现了一个八叉树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:27:45.670

您可以通过将对象分类到空间区域来最小化检查次数。（检查 0,0 附近的对象和 1000,1000 附近的对象之间的碰撞是没有意义的）

显而易见的解决方案是将您的空间连续分成两半并使用树（[BSP](http://en.wikipedia.org/wiki/Binary_space_partitioning)）结构。尽管这对稀疏的物体云最有效，否则您会一直检查边界附近的物体是否碰到边界另一侧的物体

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T16:29:54.123

我假设你有一个有限的交互长度，即当两个对象有一定的距离时，没有更多的交互。如果是这样，您通常会将您的空间划分为适当大小的域（例如，每个方向的交互长度）。现在，要将相互作用应用于粒子，您需要做的就是通过它自己的域和最近的相邻域，因为所有其他粒子都保证比相互作用长度更远。当然，您必须在粒子更新时检查是否跨越了任何域边界，并相应地调整域成员。考虑到由于交互对数的减少而带来的巨大性能改进，这种额外的簿记是没有问题的。对于更多技巧，我建议一本关于数值 N-Body-Simulation 的科学书籍。

当然，每个域都有自己的位于该域中的粒子列表。在模拟中拥有粒子的中央列表并遍历所有条目以检查每个条目是否在当前域或相邻域中是没有用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T17:04:13.557

我将八叉树用于 3D 中的位置，这可能是非常不均匀分布的。树（重新）构建通常非常快，bot O(N log(N))。然后可以在 O(K) 中找到给定粒子的所有碰撞，其中 K 是每个粒子的碰撞次数，特别是没有因子 log(N)。因此，要在树构建之后找到所有碰撞，则需要 O(K*N)。

# sql - 如何生成按计数（*）排序的详细信息而不是摘要报告？

> ID：10538296
> 
> 赞同：0
> 
> 时间：2012-05-10T16:22:34.610
> 
> 标签：sql, count, oracle11g

甲骨文 11g：

我希望结果按最高计数列出，然后是 ch_id。当我使用**group by**来获取计数时，我会放松细节的粒度。有我可以使用的分析函数吗？

```
 SALES
 ch_id desc customer
 =========================
 ANAR  Anari   BOB
 SWIS  Swiss   JOE
 SWIS  Swiss   AMY
 BRUN  Brunost SAM
 BRUN  Brunost ANN
 BRUN  Brunost ROB     

Desired Results
count ch_id customer
===========================================
3   BRUN   ANN
3   BRUN   ROB
3   BRUN   SAM
2   SWIS   AMY
2   SWIS   JOE
1   ANAR   BOB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:26:13.533

使用分析计数（*）：

```
select * from
(
select count(*) over (partition by ch_id) cnt, 
       ch_id, customer
from sales
)
order by cnt desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:27:31.037

```
select total, ch_id, customer
from sales s
inner join (select count(*) total, ch_id from sales group by ch_id) b
on b.ch_id = s.chi_id
order by total, ch_id 
```

好的 - 同时发生的另一篇文章，使用分区，是甲骨文更好的解决方案。但是无论数据库如何，这个都有效。

# php - 如何在 iframe 中显示受保护的 html 页面

> ID：10538301
> 
> 赞同：1
> 
> 时间：2012-05-10T16:23:20.850
> 
> 标签：php, html, iframe

我的网络服务器根目录之外有一堆资源。这个资源主要是html文件，有相关的css和js。我正在尝试在当前页面中使用它们，看起来我应该为此使用 iframe。

问题是我在这样的 iframe 中加载了 html，但它没有任何样式显示。我检查了萤火虫并正确包含了css，但没有应用定义的属性。

你能帮助我吗？提前致谢 ：）

**更新了更多信息**

我在 apache 的公用文件夹之外的文件夹中有一个资源列表

/usr/resources/resource1.html

此 html 文件使用位于同一不可访问文件夹中的 css 和 js 的相对路由：/usr/resources/css/style.css

我通过一个 php 脚本（使用 readfile）提供这个 html 文件。我在菜单中有一个资源列表，当用户单击资源名称时，我使用 jQuery 更改 iframe src 属性以刷新它，正如我所说，我看到加载了 html（也加载了所有 css）但样式不适用。我有点卡在这里：S

**解决方案** 我找到了一个解决方案，问题是 finfo_file 没有正确返回 js 和 html 文件的标头（它为两者都返回了文本/纯文本），因此它们没有应用于 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:53:07.827

只是在这里添加了这个，以防它可以帮助某人：

问题是 finfo_file 没有正确返回 js 和 html 文件的标头（它返回了两者的文本/纯文本），因此它们没有应用于 iframe。当我解决这个问题时，一切都按预期工作。

问候

# java - 使用 PHP 通知正在运行的 Java 进程

> ID：10538304
> 
> 赞同：1
> 
> 时间：2012-05-10T16:23:26.290
> 
> 标签：java, php

> **可能重复：**
> [我如何在 PHP 和 Java 程序之间进行通信？](https://stackoverflow.com/questions/3350231/how-can-i-communicate-between-php-and-a-java-program)

我目前正在编写一个需要实时处理事件的网络服务。所以我认为编写一个在后台运行并处理所有事件的java程序将是一个很好的方法。

所以 Web 应用程序的前端是用 PHP 编写的。用户创建了一个新事件，我想要的是，该 PHP 脚本通知正在运行的 java 进程有关该事件。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:30:25.653

通过将其设为 Web 服务提供者，您可以直接从 PHP 代码向 Java 应用程序发送 Web 服务请求。

除了网络服务之外，还有更多的选择：

*   [PHP Java 桥接器](http://php-java-bridge.sourceforge.net/pjb/)
*   [节约](http://wiki.apache.org/thrift/)
*   从 PHP 向 Java 发送低级套接字 (TCP/IP) 消息

这里还有一个[关于使用 Thrift 将 Java 与 PHP 集成的很好的教程](http://gauravasthana.blogspot.com/2010/12/using-thrift-with-java-and-php.html)

# ios - 从 Safari 上的应用程序打开 PDF

> ID：10538308
> 
> 赞同：0
> 
> 时间：2012-05-10T16:23:37.963
> 
> 标签：ios, iphone, objective-c, ios4

我正在尝试在 Safari 上的应用程序包中打开 PDF 文件。我可以使用 iBooks 或其他 PDF 阅读器等应用程序打开此 PDF。但是我不能让它用 safari 打开它。有什么方法可以实现这一目标吗？我试过 OpenURL 但这不起作用？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:32:36.310

为什么不在uiwebview中打开？

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(10, 10, 200, 200)];

NSURL *targetURL = [NSURL URLWithString:@"http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebView_Class/UIWebView_Class.pdf"];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request];

[self.view addSubview:webView];
[webView release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:53:54.227

由于 iOS 应用程序是沙盒的，因此您无法在 Safari 中打开它。现在可用的解决方案是使用 UIWebView 打开 PDF 或将其发送到另一个可以处理 PDF 文件的应用程序。

# objective-c - 保存一组自定义对象，每个对象都包含一组自定义对象，最好的方法是什么？

> ID：10538309
> 
> 赞同：1
> 
> 时间：2012-05-10T16:23:48.213
> 
> 标签：objective-c, ios, core-data, nsuserdefaults

我很难决定哪种方法是保存我的应用数据的最佳方法。

这是一个食谱应用程序。

我有一个类别类对象数组，其中包含类别标题的 NSString 变量和 Recipe 类对象的 NSMutable 数组（其中包含 3 个 NSString 变量）。

这是我的应用模型的半可视化表示：

类别数组包含：

*   类别对象 1--> 包含字符串标题和配方对象的可变数组
*   类别对象 2--> 包含字符串标题和配方对象的可变数组

...

等等

用户能够创建新配方，并且配方对象存储在选定的类别对象中。

在应用程序加载时，会创建 x 数量的类别（取决于 numberOfCategories int 的值）。当然，在重新启动时，我想将食谱恢复到适当的类别对象。

希望这不会太令人困惑——我采用 NSUserDefaults 方式并执行 NSCoding 事情来编码/解码我的自定义对象，但发现它令人困惑，因为我有一个包含自定义对象数组的自定义对象数组。

如果这是将我的项目转换为使用 Core Data 的最佳途径，我愿意接受这个想法——但对于我的应用程序的简单性来说，这似乎也过于复杂（使用类别等预先填充我的 SQLite 数据库）。

如果您需要进一步说明，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:48:00.180

使用核心数据。听起来您至少需要两个独立的实体并在它们之间建立关系（Recipe 和 RecipeObject）。NSUserdefaults 非常适合存储需要持久化的少量数据，但对您的用例来说并不是很好。

另外，请查看[MagicalRecord](https://github.com/magicalpanda/magicalrecord)和[MOGenerator](http://rentzsch.github.com/mogenerator/)。这两个开源库都使使用 CD 变得更加有趣和高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:28:36.247

我建议您将对象序列化为 XML，这是存储分层数据的好方法。

# vb.net - 如何知道我的应用程序在 VB.NET 中失去了焦点

> ID：10538310
> 
> 赞同：0
> 
> 时间：2012-05-10T16:23:51.240
> 
> 标签：vb.net

我正在使用 VB.NET 来构建我的应用程序。在我的应用程序中有很多表格。它不使用 MDI 父窗体，但我使用另一个简单的窗口窗体（我将其命名为 frmMain），我认为它是我的 MDI 父窗体。当 frmMain 加载时，windowState = Maximized。当我打开一个表单（例如：我将其命名为 frmCustomer）时，我认为它是我的子表单，并在它加载时设置它的属性（frmCustomer.TopMost=True），因此它始终位于顶部。但是当我更改为打开另一个应用程序时，例如 Ms. Word 或 Mozilla Firefox ...... frmCustomer 仍然在顶部。我的问题是；我怎么知道我的 frmMain 失去了焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:30:39.177

如果您希望表单位于主表单之前，而不是其他应用程序，更简单的解决方案是将主表单设置为子表单的所有者。例如：

```
childForm.Show(parentForm) 
```

或者

```
childForm.Owner = parentForm 
```

# iphone - 动态重新创建图像视图、标签和按钮

> ID：10538317
> 
> 赞同：0
> 
> 时间：2012-05-10T16:24:36.693
> 
> 标签：iphone, objective-c

我开始开发一个 iphone 应用程序，因为我不像大多数人那样有经验，所以我不知道如何动态地重新创建图像视图、标签和按钮。基本上会有一个存储一些数据的数组。但是数组的大小会有所不同，因此我无法在情节提要上制作静态 VC。我想使用以下模板，然后数组应使用此模板根据需要多次重新创建它：

[http://www.dropinsight.eu/screenshot1.png](http://www.dropinsight.eu/screenshot1.png)

提前感谢您可以给我的任何帮助。

干杯

最大限度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:30:00.880

您可以考虑将您的图像视图、标签和按钮放在`UITableView`.

不要`UIViewController`在情节提要中使用a ，而是使用`UITableViewController`. 这将是 tableView 的数据源和委托，可用于创建`UITableViewCell`s。根据您的示例，每个单元格都可以包含一个 imageView、文本和 2 个按钮

有关更多详细信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:28:47.713

如果我正确解释了您的问题，您希望有某种项目列表，它可以详细显示每个项目的信息。

我会看一下 UITableView，它是一个用于显示多行数据的类，您可以修改其行为以显示与您在此处描述的视图不同的视图。

Xcode 有几个 iOS 应用程序模板，其中一个是带有 tableview 的应用程序。我建议打开一个示例项目并阅读这样的教程：[http ://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:02:52.613

关于使用 UITableView 将数组中的每个条目显示为单元格的先前答案是您想要的方式。要回答有关“动态创建”每个项目的问题，您需要像这样在 cellForRowAtIndexPath 中创建每个 UI 元素：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(x,y,w,h)];
[imageView setTag:1];
[cell addSubview:imageView];
[imageView release];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(x,y,w,h)];
[label setFont:[UIFont systemFontOfSize:X]];
[label setTag:2];
[cell addSubview:label];
[label release];

UIButton *button1 = [[UIButton alloc] initWithFrame:CGRectMake(x,y,w,h)];
[button1 setImage:[UIImage imageNamed:@"ABC"] forState:UIControlStateNormal];
[button1 addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchUpInside];
[button1 setTag:3];
[cell addSubview:button1];
[button1 release];

etc 
```

然后在您的 willDisplayCell 方法中，您将设置为每一行更改的任何 UI 项的内容，如下所示：

```
UIImageView *imageView = (UIIamgeView *)[cell viewWithTag:1;
UILabel *label = (UILabel *)[cell viewWithTag:2];

[imageView setImage:[UIImage imageNamed:@"XYZ"]];
[label setText:@"XYZ"]; 
```

# mobile - 带有 SwitchItem 的 SmartGWT 移动记录

> ID：10538319
> 
> 赞同：0
> 
> 时间：2012-05-10T16:24:41.140
> 
> 标签：mobile, smartgwt

我对 SmartGWT 比较陌生，并且正在尝试弄清楚如何拥有一个 RecordList，其中每条记录都能够附加一个 SwitchItem。所以基本上创建一个可选项目列表，但这些项目上也会有一个 SwitchItem 来启用/禁用某些行为。

关于我如何做到这一点的任何想法？

查看 Record 和 RecordList 似乎 Record 扩展了 HashMap 并且没有像我想要的那样做任何花哨的事情......但我想知道是否可以使用一些创建 SwitchItem 的 html 字符串来设置“description”属性......是这么走？如果是这样......最好的方法是如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:13:22.237

使用 setShowRecordComponents() 和 createRecordComponent()。可以在核心 SmartGWT 文档中找到有关这些工作的文档：

[http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setShowRecordComponents%28java.lang.Boolean%29](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setShowRecordComponents%28java.lang.Boolean%29)

尚不支持“回收”模式。正在创建一个示例。

# java - Axis 中的数组序列化

> ID：10538321
> 
> 赞同：0
> 
> 时间：2012-05-10T16:24:43.147
> 
> 标签：java, soap, axis

我在调用 Web 服务时遇到了一个奇怪的问题。我的存根生成类似于格式 2 的肥皂消息，但是服务器期望类似于下面格式 1 的内容。在轴 1.3 中的数组序列化中，以下格式的含义是什么。

arrayItemType 下面是正在序列化的对象类型，arrayItemName 是该对象的名称。

1)

```
 <arrayItemName>
  <arrayItemType></arrayItemType>
  <arrayItemType></arrayItemType>
 </arrayItemName> 
```

2)

```
<arrayItemName>
</arrayItemName>
<arrayItemName>
</arrayItemName> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:36:33.973

问题是您的 WSDL 文件是什么样式？SOAP 文档取决于 WSDL 文件中使用的样式。

第一种格式是包装样式，因为元素被包装在：

`<arrayItemName> ... </arrayItemName>`

所以我猜如果你的存根生成像格式 2 这样的肥皂消息，它会使用 rpc/encoded 或任何其他 WSDL 样式，除了包装的样式。因此，我建议您始终对 wsdl 文件使用**文档/文字包装**样式，并且在使用不同的堆栈等生成客户端时会出现任何问题。

您可以在此处找到有关 WSDL 样式的有用信息：http: [//www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)

# mongodb - MongoDB - 将一个集合映射到第二个集合

> ID：10538323
> 
> 赞同：0
> 
> 时间：2012-05-10T16:24:47.167
> 
> 标签：mongodb, mapreduce

我有两个收藏：

*   订单：{_id、OrderId、参数、[默认为空***摘要***]等}
*   批处理：{_id、OrderId、Phase1 {Planned、Done}、Phase2 {Planned、Done} 等}

订单有 0..n 个批次（“生产批次”）。（我使用 _id 和“OrderId”，因为来自外部系统。）

我正在“Batch”上做 map-reduce。

结果是：

```
{
_id: ORDER_ID, 
value: {
    Phase1: {Planned: 100, Done: 60},
    Phase2: {Planned: 60, Done: 20}
} 
```

在集合“order_summary”中。

如何将此结果插入集合“订单”（确切地说：Order.Summary）？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:33:19.490

Map-Reduce 是关于*聚合*而不是关于*修改*。基于 Map-Reduce 操作结果的进一步操作取决于您和您的代码，完全超出了 MR 的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:07:53.317

它并不是真正为此目的而设计的，但是您是否尝试过使用 finalize 函数来为您执行此操作？否则，执行此工作的正常位置是在 map-reduce 完成时运行的客户端代码中。

# c# - c#使用JQuery调用服务器端方法

> ID：10538324
> 
> 赞同：1
> 
> 时间：2012-05-10T16:24:50.087
> 
> 标签：c#, jquery, asp.net

当用户关闭浏览器时，我试图在我的 aspx.cs 中调用服务器方法来删除目录中的所有文件。

```
[WebMethod]
    public static void fileDelete()
    {

        string[] uploadedFiles = Directory.GetFiles(@"C:\Users\Lambo\Documents\Visual Studio 2010\Projects\test\test\testPdfIn");
        foreach (string uploaded in uploadedFiles)
        {
            File.Delete(uploaded);
        }
    } 
```

==================================================== =====================

编辑

我已经尝试过 POST 方法，但它似乎仍然不起作用。我也改了网址。

在客户端我使用这个：

```
 $(function () {
        $(window).unload(function () {
            alert("Files have been deleted")
             jQuery.ajax({ type: 'POST', url: "http://localhost:19642/success.aspx/fileDelete", async: true });
        });
    }); 
```

但是它似乎没有工作。代码在某种程度上是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:34:46.540

要调查 AJAX 调用的失败，请使用 HTTP 调试器（如[Fiddler](http://www.fiddler2.com/fiddler2/)）来查看发出了哪些请求以及收到了哪些响应。

我的猜测是您的网址是错误的，并且对错误的文件提出了请求。考虑制作绝对（或至少服务器相对）url。

# xcode - Xcode iPhone SDK - 在应用启动时显示 gif 图像

> ID：10538328
> 
> 赞同：1
> 
> 时间：2012-05-10T16:25:00.673
> 
> 标签：xcode, ios5, gif

我目前有一个从应用程序启动时播放的 gif 转换而来的 mp4 视频，但使用视频会停止播放音乐并且连接的播放设备有问题。

无论如何，我真正想要的是在应用启动时显示我的 gif。但我似乎无法让 gif “播放”它只显示一帧，我如何让它播放整个 gif？

我当前的代码：

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// Show Animation;
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Launch" ofType:@"mp4"]];
LaunchPlayer = [[MPMoviePlayerViewController alloc] 
                                                 initWithContentURL:url];
LaunchPlayer.view.frame = self.view.bounds;
LaunchPlayer.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
LaunchPlayer.moviePlayer.controlStyle = MPMovieControlStyleNone;
LaunchPlayer.view.tag = 1;
[self.view addSubview:LaunchPlayer.view];
[LaunchPlayer.moviePlayer play];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(LaunchFinish) 
                                             name:@"MPMoviePlayerPlaybackDidFinishNotification"
                                           object:nil];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T19:46:30.880

虽然我看不出您发布的代码与使用 .gif 有什么关系，但您仍然坚持第一帧，因为 iOS 不会运行动画 .gif。但是，您可以将动画的每一帧导出为单独的图像并像这样为它们设置动画。

```
-(void) viewDidLoad
{

imageView.animationImages = [NSArray arrayWithObjects:    
                                    [UIImage imageNamed:@"myImageFrame1.gif"],
                                    [UIImage imageNamed:@"myImageFrame2.gif"],
                                    [UIImage imageNamed:@"myImageFrame3.gif"],
                                    [UIImage imageNamed:@"myImageFrame4.gif"], nil];

    imageView.animationDuration = 2.0; 
    imageView.animationRepeatCount = 0; 
    [imageView startAnimating]; 

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-07T11:50:58.410

在我这里的小例子中。我使用了一个名为 webView 的 UIWEBVIEW，并将 spin-loader.gif 添加为资源。只要添加了图像，我就可以将其放在项目中的任何位置。这显示了 gif 并使其具有动画效果。希望这可以帮助。

```
NSString *pathImg = [[NSBundle mainBundle] pathForResource:@"spinning-loader" ofType:@"gif"];
NSString* webViewContent = [NSString stringWithFormat:
                            @"<html><body><img style='width:85;height:85;' src=\"file://%@\" /></body></html>", pathImg];
[webView loadHTMLString:webViewContent baseURL:nil];

webView.scrollView.bounces = NO;
webView.scrollView.scrollEnabled = NO;
webView.opaque=FALSE;
[webView setBackgroundColor:[UIColor clearColor]]; 
```

# python - python configparser静默挂起

> ID：10538329
> 
> 赞同：0
> 
> 时间：2012-05-10T16:25:01.020
> 
> 标签：python, configparser

我有一种感觉，我很愚蠢。鉴于此 ini 文件：

```
[main]
source1 = ./testing/sdir1
sync1 = ./testing/sydir1
archive1 = ./testing/adir1
source2 = ./testing/sdir2
sync2 = ./testing/sydir2
archive2 = ./testing/adir2
[logging]
log_dir = .
log_file = pixelsync.log
log_level = DEBUG 
```

以下代码挂起：

```
import ConfigParser

CONFIG_FILE = 'pixelsync.ini'

def parse_config() :
    """read details from the config file"""
    global CONFIG_FILE
    config = ConfigParser.SafeConfigParser()
    config.read(CONFIG_FILE)
    index = 1
    while True :
        if config.has_option('main', 'source' + str(index)) and \
                    config.has_option('main', 'sync' + str(index)) and \
                    config.has_option('main', 'archive' + str(index)) :

            result = ( config.get('main', 'source' + str(index)),
                       config.get('main', 'sync' + str(index)),
                       config.get('main', 'archive' + str(index)))
            index += 1
        else :
            if index == 1 :
                print "could not setup any trios from the config file. exiting."
                sys.exit(1)
    return result

if __name__ == '__main__' :
    options = parse_config() 
```

它挂在“if”子句上。

如果我将“if”子句替换为：

```
if config.has_option('main', 'source1' ) and \
                    config.has_option('main', 'sync1' ) and \
                    config.has_option('main', 'archive1' ) : 
```

它没有挂起。（不做我想做的事，因为我需要遍历任意数量的三组，但它不会静默挂起。

ubuntu 12.04（精确）上的 Python v2.7.3，32 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:27:43.783

你的程序挂起的原因是它永远不会跳出循环——它会永远持续下去。而不是简单地设置`result`，你需要`return`它。（另一种方法是设置它，然后使用它`break`跳出循环并返回，但这有点迂回。最好直接返回它。

请注意，这样做`while True:`和计数不是很 Pythonic，首选的方法是使用[`itertools.count()`](http://docs.python.org/dev/library/itertools.html#itertools.count).

例如：

```
import itertools

...

for index in itertools.count(1):
    ... 
```

请注意，这表明存在设计缺陷。您可能想知道自己是否永远不会得到合适的结果。无限循环通常很糟糕。

# sql - SQL：如何根据另一个表中的类别显示一个表中的项目，并计算每个类别中的项目总数

> ID：10538337
> 
> 赞同：0
> 
> 时间：2012-05-10T16:25:26.310
> 
> 标签：sql, database, delphi-xe2

我有两个表，一个类别表和一个项目表。类别表具有以下字段：

```
 project_No
   cat_ID
   cat_Description 
```

项目表具有以下字段：

```
 project_No
  cat_ID
  item_Id
  item_description
  item_Qty
  item_cost 
```

现在我需要编写一个查询来显示每个类别的所有项目，但我还想计算每个类别中的项目数量

现在输出必须首先列出该类别中的项目之前的类别，然后列出该类别中的所有项目，并给出该类别中项目的总数，然后是另一个类别和项目，例如

```
 Beverages
     Coffee          $1.50     4
     Tea             $2.50     4
     Total Items               2        
  Tin Food
      Peas             $0.50   10
      Meatballs        $1      20
      total items              2 
```

我需要编写这个 SQL 并将它放在我在 Delphi 中的 TADOQuery 组件中

请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:35:01.240

选择 category_table.Cat_Description, item_table.Item_Desctiption, SUM(Item_table.Item_Cost) as Total_Cost, SUM(item_Table.Item_Qty) as Total_Qty From Items_table join Category_Table on items_Table.Cat_Id = Category_Table.Cat_Id and items_Table.Project_no = Category_table.Project_no

这会给你结果：

饮料咖啡 $1.50 4 饮料茶 $2.50 4 罐装豌豆 $0.50 10 罐装肉丸 $1.00 20

我总结了您的费用，但如果您只想列出费用，请从选项中删除总和。

# bash - 重定向期望标准输入产生调用

> ID：10538343
> 
> 赞同：3
> 
> 时间：2012-05-10T16:25:57.133
> 
> 标签：bash, redirect, pipe, stdin, expect

有没有办法重定向发送到期望的标准输入，以便将其馈送到期望内的生成调用？在下面的示例中，我将 expect 嵌入到一个 shell 函数中，我想通过 heredoc 将另一个 shell 脚本传送到该函数中，并通过将输出捕获到 shell 变量来抑制输出。

```
 psshstdin() {
      local user=$1 pass=$2 hosts=$3
      out=$(expect -c '
      set timeout 15
      spawn pssh -i -h '"$hosts"' -p 100 -l '"$user"' -A -o ./ -x-oStrictHostKeyChecking=no <EXPECT_STDIN_HERE
      expect "assword:" { send '\""$pass\r\""' }
      interact
    '<<EOF
    echo "hello"
    echo "world"
    EOF
    )
    } 
```

**解决方案：**我不得不在这里发布这个，因为我没有足够的声望点来这么快地回答我自己的问题。

我能够通过尝试在[这个问题](https://stackoverflow.com/questions/10237872/expect-redirect-stdin)中应用的相同技术来解决它。我认为该解决方案最初并不适用，但确实如此。工作代码如下所示。

```
psshstdin() {
  local user=$1 pass=$2 hosts=$3
out=$(expect -c '
set timeout 30
spawn pssh -I -h '"$hosts"' -p 100 -l '"$user"' -A -o ./ -x-oStrictHostKeyChecking=no
while {[gets stdin line] != -1} {
  send "$line\n"
}
send \004
expect "assword:" { send '\""$pass\r\""' }
expect {
  "END_TOKEN_OF_SCRIPT" {
    exit 0
  }
  default {
    exit 1
  }
}'<&0)
} 
```

我可以这样称呼它：

```
psshstdin myusername mypassword ssh_hosts_file<<EOF
echo "hello"
echo "world"
EOF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:37:40.920

您可以使用以下命令将标准输入捕获到变量中`stdin=$(cat -)`

更新：让期望收集标准输入：

未经测试，但也许：

```
psshstdin() {
  local user=$1 pass=$2 hosts=$3
  out=$(expect -c '
    set stdin [read stdin]
    puts "debug: sending the following stdin to pssh:\n$stdin\n--END--"
    set timeout 15
    spawn echo "$stdin" | pssh -i -h '"$hosts"' -p 100 -l '"$user"' -A -o ./ -x-oStrictHostKeyChecking=no
    expect "assword:" { send "'"$pass"'\r" }
    interact
  '<<EOF
echo "hello"
echo "world"
EOF
)
} 
```

# extjs4.1 - 将组合框上的数组存储从 4.07 升级到 4.1

> ID：10538344
> 
> 赞同：0
> 
> 时间：2012-05-10T16:26:04.343
> 
> 标签：extjs4.1

以下配置适用于 4.07 但不适用于 4.1。

在 4.1 上，我可以看到我的组合有 3 个项目。它只是不读取 displayField 和 valueField。

我正在使用 mvc 架构。

在我看来

```
{
xtype: 'combobox',
id: 'ProofRequired',
name: 'ProofRequired',
fieldLabel: 'Proof Required',
displayField: 'Name',
store: 'ProofRequired',
triggerAction: 'all',
queryMode: 'local',
valueField: 'Id'
}, 
```

在我的 app.js

```
stores: [ 'VarnishType'], 
```

和我的商店

```
Ext.define('Mis.store.ProofRequired', {    extend: 'Ext.data.Store',

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            storeId: 'ProofRequired',
            clearOnPageLoad: false,
            data: [
                {
                    Id: '1',
                    Name: 'Digital'
                },
                {
                    Id : '2',
                    Name : 'PDF'
                },
                {
                    Id : '3',
                    Name : 'Other'
                }
            ],
            proxy: {
                type: 'ajax',
                reader: {
                    type: 'array'
                }
            },
            fields: [
                {
                    Id: 'Id',
                    Name: 'Name'
                }
            ]
        }, cfg)]);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:22:51.107

以下对我有用。我100%确定为什么。我相信我需要在字段名称周围加上引号。

```
Ext.define('Mis.store.ProofRequired', {
extend: 'Ext.data.Store',

constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
    me.callParent([Ext.apply({
        autoLoad: true,
        storeId: 'ProofRequired',
        clearOnPageLoad: false,
        fields: ['Id', 'Name'],
        data : [
            {"Id":"1", "Name":"Digital"},
            {"Id":"2", "Name":"PDF"},
            {"Id":"3", "Name":"Other"}
        ],
        proxy: {
            type: 'ajax',
            reader: {
                type: 'array'
            }
        }
    }, cfg)]);
} 
```

});

# java - Spring @Transactional 注释被忽略

> ID：10538345
> 
> 赞同：6
> 
> 时间：2012-05-10T16:26:11.083
> 
> 标签：java, spring, jdbc, transactions, annotations

我的 @Transactionnal 注释似乎被忽略了。我对 Spring 容器的初始化没有错误。看起来我的方法没有被 Spring TX 框架代理。在执行我的服务方法期间，JDBCTemplate 会抛出预期的 RuntimeException。问题是 JDBC 连接没有回滚并且更改被保留。堆栈跟踪没有显示应该包装我的服务方法的代理的任何迹象。

编辑：添加了控制器的代码

编辑 2：添加了服务的接口

这是我的服务接口。

```
public interface ApplicationsService {
    public Application getApplicationById(int id);

    public void createApplication(Application application);

    public void createInstance(Application application);

    public Map<Integer, Application> getUserApplications(String username);

    public Application newApplication(String email);
} 
```

这是我的服务。

```
@Service
public class ApplicationsServiceImpl implements ApplicationsService {
    ...
    @Transactional
    public void createApplication(Application application){
        // Persisting the application.
        applicationDAO.createApplication(application);
        application.setId(
            applicationDAO.findApplicationId(application.getName(), application.getAccount().getEmail())
        );

        // Creating the physical instance.
        createInstance(application);
    }
    ...
} 
```

Spring Controller 负责方法调用。

```
@Controller
@RequestMapping("/applications")
public class ApplicationsController {
    ...
    @Autowired
    private ApplicationsService applicationsService;
    ...

    @RequestMapping(method=RequestMethod.POST)
    public String saveApplication(
        @Valid Application application, 
        BindingResult bindingResult, 
        Principal principal
    ){  
        application.setAccount(this.accountService.getAccount(principal.getName()));
        this.applicationsService.createApplication(application);

        return "application/creatingApplication";
    }
    ...
} 
```

这是我的 Spring 事务配置

```
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="    http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd

                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"
>
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="DADataSource"/>
    </bean>

    <tx:annotation-driven />
</beans> 
```

在 createApplication 的执行过程中，JDBCTemplate 会启动一个 RuntimeException，并且不会回滚事务。

```
GRAVE: Servlet.service() for servlet [DACloudWeb] in context with path [/DACloudWeb] threw exception [Request processing failed; 
nested exception is org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [INSERT INTO instances (  serverId,   appId,  lastDeployment ) VALUES (   ?,?,? ) ]; SQL state [HY000]; error code [1364]; Field 'status' doesn't have a default value; nested exception is java.sql.SQLException: Field 'status' doesn't have a default value] with root cause
    java.sql.SQLException: Field 'status' doesn't have a default value
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2427)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2345)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2330)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
        at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:818)
        at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587)
        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:868)
        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:876)
        at com.cspinformatique.dacloudWeb.applications.dao.InstanceJDBCDAO.createInstance(InstanceJDBCDAO.java:50)
        at com.cspinformatique.dacloudWeb.applications.service.InstanceService.createInstance(InstanceService.java:42)
        at com.cspinformatique.dacloudWeb.applications.service.ApplicationsService.createInstance(ApplicationsService.java:63)
        at com.cspinformatique.dacloudWeb.applications.service.ApplicationsService.createApplication(ApplicationsService.java:52)
        at com.cspinformatique.dacloudWeb.applications.controller.ApplicationsController.saveApplication(ApplicationsController.java:64)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T15:13:40.473

我的猜测是，您已经将服务 bean 放在属于调度程序 servlet 的上下文中，其中应该只有控制器 bean，然后您已经在根上下文中声明了事务 bean。基于注释的事务自动代理仅适用于单个上下文，因此您在另一个（错误）上下文中的服务 bean 不会受到影响。请参阅[我对“为什么 DispatcherServlet 创建另一个应用程序上下文？”的回答。](https://stackoverflow.com/questions/7833767/why-dispatcherservlet-creates-another-application-context/7836031#7836031)以获得更完整的问题描述。根本问题是您不了解 Spring MVC 应用程序中的上下文是如何组织的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:14:03.683

您需要为`@Transactional`注释定义一个接口才能工作：

```
public interface ApplicationsService {
    public void createApplication(Application application);
} 
```

具体类：

```
@Service
public class ApplicationsServiceImpl {
    @Transactional
    public void createApplication(Application application) {
        // ...
    }
} 
```

或者，根据 Kevin Welker 的评论，如果不需要接口（尽管您可能应该编写接口），您可以配置 use `proxy-target-class`：

```
<tx:annotation-driven proxy-target-class="true" /> 
```

**编辑**

你的消息`SQLException`是：

```
Field 'status' doesn't have a default value 
```

所以也许你正在传递`null`你应该提供价值的地方？或者，检查[这篇文章](https://stackoverflow.com/a/846663/320220)是否有一些与此错误相关的怪异之处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T13:48:19.477

经过三天的调试，终于找到了我的注解被忽略的原因。

位于子上下文文件中的`<tx:annotation-driven/>`指令无权访问由其父 Spring 上下文创建的 bean。

我不得不将它移到`myapp-servlet.xml`我的请求调度程序使用的地方。

现在，它工作正常。

# jquery - 双击时jQuery UI Datepicker不会关闭

> ID：10538351
> 
> 赞同：3
> 
> 时间：2012-05-10T16:26:37.197
> 
> 标签：jquery, jquery-ui

# [演示](http://jsfiddle.net/mnbayazit/bC4PH/1/)

在 Ubuntu、Chrome Mac 等上的 Chrome 18 中重现。

只需双击该链接，然后选择一个日期。日期选择器变得无法关闭。我该如何解决？

我想在再次显示之前检查日历当前是否打开，但我[看不到该日历的属性](http://jqueryui.com/demos/datepicker/)。

# HTML

```
<a href="#">double click me</a><input/>​ 
```

# JS

```
$('input').datepicker();
$('a').click(function() {
    $('input').datepicker('show');
});​ 
```

* * *

这似乎是默认淡入淡出动画的问题。如果在淡入淡出完成之前打开它两次，就会出现问题。设置`duration`为`0`解决问题，但我有点喜欢淡入淡出动画。

* * *

我提交了一份[错误报告](http://bugs.jqueryui.com/ticket/8311)。这实际上是[一个骗局](http://bugs.jqueryui.com/ticket/8174)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:40:51.513

```
$('input').datepicker();
$status = true;
$('a').click(function() {
    if ($status){
        $('input').datepicker('show');
            $status = false;
    }
    else{
    $('input').datepicker('hide');
        $status = true;
    }    
}); 
```

这可能会如你所愿

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:39:10.577

也许是这样的？

```
$('a').dblclick(function() {
    if ($('input').datepicker('widget').is(':visible')) {
        $('input').datepicker('hide');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T08:15:33.367

这是通过[Ticket #8174](http://bugs.jqueryui.com/ticket/8174)修复的。如果您遇到此问题，请尝试升级到更新版本的 jQuery UI。

# php - 访问非 Kohana 的 php 文件

> ID：10538352
> 
> 赞同：1
> 
> 时间：2012-05-10T16:26:48.167
> 
> 标签：php, .htaccess, kohana

我有一个在 web 根目录中运行的 Kohana 应用程序，一切正常。但是当我尝试使用非 kohana PHP 代码将子文件夹添加到根目录时，我无法访问它。Kohana 仍然试图找到文件的路径..

例子：

*   public_html
    *   应用
    *   模块
    *   子文件夹
        *   索引.php
        *   测试.html

如果我尝试访问 /subfolder，我会收到以下错误：

类 controller_subfolder 不存在

但是，如果我尝试访问 /subfolder/test.html 它工作正常。

我的 .htaccess 文件是默认的：

> ```
> # Turn on URL rewriting
> RewriteEngine On
> 
> # Installation directory
> RewriteBase /
> 
> # Protect hidden files from being viewed
> <Files .*>
>   Order Deny,Allow
>   Deny From All
> </Files>
> 
> # Protect application and system files from being viewed
> RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]
> 
> # Allow any files or directories that exist to be displayed directly
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> # Rewrite all other URLs to index.php/URL
> RewriteRule .* index.php/$0 [PT] 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:19:10.433

也许 apache 未配置为在 DirectoryIndex 中提供 index.php？

看看[@http://httpd.apache.org/docs/2.0/mod/mod_dir.html](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)

# actionscript-3 - 闪光色彩空间

> ID：10538353
> 
> 赞同：0
> 
> 时间：2012-05-10T16:26:49.363
> 
> 标签：actionscript-3, flash, psd

在 Flash 中导入时，我的 (eciRGB) 图片看起来有点绿色。我发现（但我并不完全确定）闪光灯使用 sRGB 色彩空间。在另一个论坛中，我发现 Flash 不使用颜色配置文件，无论我选择哪一个，我都必须将我的图片导出到网络上。

我有很多帧的动画，所以最舒服的方法是将 psd 直接导入到库中。如果我想要正确的颜色，那错了吗？

# enums - 为什么我的 C++Builder 的“枚举”不能与 RTTI 一起正常工作

> ID：10538354
> 
> 赞同：0
> 
> 时间：2012-05-10T16:26:49.550
> 
> 标签：enums, c++builder, rtti

> **可能重复：**
> [为什么我会收到枚举类型的“类型没有类型信息”错误](https://stackoverflow.com/questions/1420562/why-do-i-get-type-has-no-typeinfo-error-with-an-enum-type)

我有一个具有如下属性的组件：-

```
enum class Foo {VAL0, VAL1, VAL2, VAL4 =4};

class TDummy : public TComponent
{
...
  Foo f;
  TDummy() : f(Foo:VAL2) {};

__published: 
  __property Foo foo{ read = f, write = f};
} 
```

但是，安装后，IDE 对象检查器不会为我提供“foo”选项的下拉列表，而只会显示一个带有值“2”的编辑字段。

如何让 IDE 显示“VAL2”而不是“2”，并显示选项 VAL0/VAL1/VAL2 等的下拉列表。/？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:29:03.217

这是因为枚举值不连续。将枚举声明从

```
enum class Foo {VAL0, VAL1, VAL2, VAL4 =4}; 
```

...至...

```
enum class Foo {VAL0, VAL1, VAL2, VAL3, VAL4}; 
```

并且该属性将在对象检查器中正常工作。当然，现在可以选择VAL3，这并不理想。

Delphi 不支持非连续枚举，因此 RTTI 无法表示一组非连续值。

# java - 使用 RequestDispatcher 调用 servlet doGet() 方法

> ID：10538359
> 
> 赞同：0
> 
> 时间：2012-05-10T16:26:57.450
> 
> 标签：java, servlets, requestdispatcher

怎么可能调用`doGet()`方法`RequestDispatcher`？

`RequestDispatcher rd = sc.getRequestDispatcher("/CartServlet");
rd.forward(request, response);`

此代码调用`doPost()`为默认操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:35:37.130

它调用`doPost()`是因为您的原始请求使用了 POST 方法。通常 servlet 不能相互“调用”。他们只能转发或重定向请求。在这两种情况下，都使用原始请求中使用的相同 HTTP 方法。

如果您想调用`doGet()`其他 servlet，那么是时候重构您的应用程序了，即将实现的逻辑分离`doGet()`，将其放到其他类中，然后从两个 servlet 中调用该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-15T02:48:05.767

查看下面的链接，使用**HttpURLConnection**通过 POST 或 GET 方法在内部发送请求。很长一段时间以来，我一直觉得有必要这样做。

[Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)

# php - PHP ActiveRecord 添加下划线

> ID：10538360
> 
> 赞同：1
> 
> 时间：2012-05-10T16:27:03.800
> 
> 标签：php, mysql, codeigniter, activerecord

我正在尝试在 Codeigniter 中使用 PHP ActiveRecord。

我有一个这样的模型：

```
<?php class tblAdmins extends ActiveRecord\Model {} 
```

在我的控制器中，我有这个：

```
class Welcome extends CI_Controller {

        function __construct() {
        parent::__construct();
        $this->load->spark('php-activerecord/0.0.2');
    }

    /**
     * Index Page for this controller.
     *
     * Maps to the following URL
     *      http://example.com/index.php/welcome
     *  - or -  
     *      http://example.com/index.php/welcome/index
     *  - or -
     * Since this controller is set as the default controller in 
     * config/routes.php, it's displayed at http://example.com/
     *
     * So any other public methods not prefixed with an underscore will
     * map to /index.php/welcome/<method_name>
     * @see http://codeigniter.com/user_guide/general/urls.html
     */
    public function index()
    {
         $name = tblAdmins::find_by_username('myname');
        /*$this->load->view('welcome_message');*/
    }
}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

在 CodeIgniter 中打开页面时出现此错误：

> 致命错误：C:\xampp\htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\ 中未捕获的异常 'ActiveRecord\DatabaseException' 与消息 '42S02、1146、表'CampusRecMobile.tbl_admins' 不存在' php-activerecord\lib\Connection.php:313 堆栈跟踪：#0 C:\xampp\htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\adapters\MysqlAdapter.php(25 ): ActiveRecord\Connection->query('SHOW COLUMNS FR...') #1 C:\xampp\htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\Connection.php (254): ActiveRecord\MysqlAdapter->query_column_info(' `tbl_admins`') #2 C:\xampp\htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\Table.php(370): ActiveRecord\Connection->columns('`tbl_admins`') #3 C:\xampp\htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\Cache.php(67): ActiveRecord{closure}() #4 C:\xampp \htdocs\codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\Table.php(370): ActiveRecord\Cache::get('get_meta_data-`.. 在 C:\xampp\htdocs \codeigniter\sparks\php-activerecord\0.0.2\vendor\php-activerecord\lib\Connection.php 在第 313 行

而不是寻找 CampusRecMobile。*tblAdmins*它正在寻找 CampusRecMobile.tbl_admins （这不是一个表）。我怎样才能摆脱这个下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:49:02.170

您可以告诉 AR 模型使用哪个表

```
static $table_name = "tblAdmins"; 
```

# facebook - 在用户自己的时间线上发布类似 Facebook 的操作

> ID：10538362
> 
> 赞同：0
> 
> 时间：2012-05-10T16:27:06.090
> 
> 标签：facebook, facebook-like

我有一个照片库应用程序。用户喜欢或评论任何照片。但我不想在他们自己的时间线上发布用户的喜欢或评论操作。有办法吗？

# android - 在运行时更改 ListView 中的行项字体

> ID：10538368
> 
> 赞同：3
> 
> 时间：2012-05-10T16:27:28.433
> 
> 标签：android, android-listview, android-arrayadapter

我创建了一个`ListView`带有自定义数组适配器的`MyObject`. 的一个实例`MyObject`包含 a`String`和 a `boolean`。当我想象我的`ListView`所有项目以粗体显示时，如果您点击其中一个项目，您将开始一个新的`Activity`. 我想要做的是，每次您按下并返回到那个`ListView`时，您都会看到您单击的项目而不是粗体。这是我的习惯`ArrayAdapter`：

```
public class MyAdapter extends ArrayAdapter<MyObject> {
private final Context context;
private final ArrayList<MyObject> values;

public MyAdapter(Context context, ArrayList<MyObject> values) {
    super(context, R.layout.my_item, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
    if(convertView == null){
        convertView = inflater.inflate(R.layout.my_item, parent, false);
    }
    TextView textView = (TextView) convertView.findViewById(R.id.itemName);
    textView.setText(values.get(position).getMyObjectName());
    if(values.get(position).isSetted()){
        textView.setTypeface(null, 0);
    }
    return convertView;
} 
```

}

在我的`Activity`我放：

```
 @Override
protected void onResume() {
    super.onResume();
    adapter.notifyDataSetChanged();
} 
```

并且代码确实有效，但是有一个问题：当您点击某些项目后，当您返回时，其他未点击的项目变得不加粗！这是随机发生的！为什么会这样？

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    String item = objList.get(position).getMyObjectName();
    objList.get(position).setSetted(true);

    to_ans.putExtra("ItemName", item);
    startActivity(to_ans);

} 
```

项目的`boolean`价值最初都设置在`false`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:58:32.753

如果是，您将希望恢复为默认**粗体**样式（将可能回收的默认样式恢复为默认样式（对于不是时的情况），可能设置为不加粗体）：`isSetted()``false``View``convertView``null`

```
if(values.get(position).isSetted()){
    textView.setTypeface(null);
} else {
    textView.setTypeface(Typeface.BOLD);
} 
```

# javascript - Javascript 在 .swf 文件中点击？

> ID：10538373
> 
> 赞同：0
> 
> 时间：2012-05-10T16:27:34.183
> 
> 标签：javascript, click, flash

首先，有可能吗？

其次，在JS中制作类似坐标的东西。例如，300 margin-top，500 margin-left；使用与笔记本电脑点击中的普通鼠标轨迹相同的效果和值进行点击。

最后，我不是指 onclick=""、onmousedown="" 等。我所说的是用户点击的动作/效果。

谢谢。PS：如果JS不能做到这一点，另一种方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:33:00.517

.swf 对象主要是 javascript 的黑盒。在某些情况下，您可以“收听”某些内容（在某种程度上，例如播放/停止视频等）。但这并不是所有浏览器/版本的 100%，还取决于 .swf 对象的方式调用）。但是使用 javascript 无法在 .swf 中“监听”一般“动作”。根据您想要做的事情，您可以有效地获得相同的东西..有时...例如，检测某人单击的 .swf 对象内的位置...如果您在对象上添加一个不可见的 html 层，您可以查找某些内容，例如点击次数甚至位置（在某些情况下）。

但总的来说，唯一真正准确的方法是在 .swf 对象本身中添加跟踪/侦听功能（这意味着您需要访问 .fla 源文件才能添加并重新编译到 .swf）。为此，您使用 ActionScript（Flash 的脚本语言）。但是，如果您需要将信息传递给 js，则可以从 .swf 对象中进行外部 js 调用。但同样，这涉及将代码放入 .swf

# codeigniter - 多个where条件codeigniter

> ID：10538376
> 
> 赞同：32
> 
> 时间：2012-05-10T16:27:40.053
> 
> 标签：codeigniter

如何将此查询转换为活动记录？

```
"UPDATE table_user 
 SET email = '$email', last_ip = '$last_ip' 
 where username = '$username' and status = '$status'"; 
```

我试图将上面的查询转换为：

```
$data = array('email' => $email, 'last_ip' => $ip);
$this->db->where('username',$username);
$this->db->update('table_user',$data); 
```

如何使用 where 子句状态？

```
# must i write db->where two times like this?
$this->db->where('username',$username);
$this->db->where('status',$status); 
```

我也试过这个：

```
$this->db->where('username',$username,'status',$status); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-10T16:31:50.550

您可以使用数组并传递数组。

```
Associative array method:
$array = array('name' => $name, 'title' => $title, 'status' => $status);

$this->db->where($array); 

// Produces: WHERE name = 'Joe' AND title = 'boss' AND status = 'active' 
```

**或者，如果您想做除 = 比较之外的其他事情**

```
$array = array('name !=' => $name, 'id <' => $id, 'date >' => $date);

$this->db->where($array); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-10T16:33:30.440

是的，多次调用 where() 是实现此目的的一种完全有效的方法。

```
$this->db->where('username',$username);
$this->db->where('status',$status); 
```

[http://www.codeigniter.com/user_guide/database/query_builder.html](http://www.codeigniter.com/user_guide/database/query_builder.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-03T10:46:28.487

你可以试试这个功能多用途

```
function ManageData($table_name='',$condition=array(),$udata=array(),$is_insert=false){
$resultArr = array();
$ci = & get_instance();
if($condition && count($condition))
    $ci->db->where($condition);
if($is_insert)
{
    $ci->db->insert($table_name,$udata);
    return 0;
}
else
{
    $ci->db->update($table_name,$udata);
    return 1;
} 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-08T06:38:59.810

`$wherecond = "( ( ( username ='" . $username . "' OR status='" . $status . "') AND (id='" . $id . "') ) )"; $this->db->where($wherecond);`

> 如果要一次添加 AND 和 OR 条件。这会奏效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T08:59:18.203

试试这个

```
$data = array(
               'email' =>$email,
               'last_ip' => $last_ip
            );

$where = array('username ' => $username , 'status ' => $status);
$this->db->where($where);
$this->db->update('table_user ', $data); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-12T17:45:52.580

这个答案已经晚了，但我认为也许仍然可以提供帮助，我尝试了上述两种方法，使用两个 where 条件和带有数组的方法，这些都不适合我我做了几次测试并且条件从未被执行，所以我做了一个解决方法，这是我的代码：

```
public function validateLogin($email, $password){
        $password = md5($password);
        $this->db->select("userID,email,password");
        $query = $this->db->get_where("users", array("email" => $email));
        $p = $query->row_array();

        if($query->num_rows() == 1 && $password == $p['password']){  
            return $query->row();
        }

    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-27T08:31:55.657

您可以同时使用使用数组，例如：

```
$array = array('tlb_account.crid' =>$value , 'tlb_request.sign'=> 'FALSE' ); 
```

并直接分配如下：

```
$this->db->where('tlb_account.crid' =>$value , 'tlb_request.sign'=> 'FALSE'); 
```

我希望能帮助你。

# ruby-on-rails - 我的模型什么时候应该属于另一个模型？

> ID：10538378
> 
> 赞同：0
> 
> 时间：2012-05-10T16:27:45.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不确定我是否可以通过我的协会完成我想要的。

这是我想要在我的应用程序中的场景：

用户将选择一个商店。然后在该商店内，用户选择产品，然后可以为该产品添加新价格。

```
class Business < ActiveRecord::Base
  has_many :stores
end

class Store < ActiveRecord::Base
  belongs_to :business
  has_many :prices
end 

class User < ActiveRecord::Base
  has_many :prices, :dependent => :destroy
  has_many :products, :through => :prices
end

class Price < ActiveRecord::Base
  belongs_to :user
  belongs_to :product
  belongs_to :store
end

class Product < ActiveRecord::Base
  has_many :prices
  has_many :users, :through => :prices
end 
```

我不确定这是否正确，因为产品不属于商店（`integer store_id`在表格中）。

我需要做什么才能使这种情况得以解决？这是正确的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:46:32.133

对于您正在尝试做的事情，这是一个很好且正确的设计。

如果产品属于一家商店，那么该产品只能在一家商店。由于商店可能有许多产品，并且产品可能在许多商店出售，因此您需要另一个表来引用产品和商店。

# jquery - Twitter bootstrap collapsable 不适用于 jquery .html() 加载的内容

> ID：10538383
> 
> 赞同：2
> 
> 时间：2012-05-10T16:28:03.673
> 
> 标签：jquery, html, twitter-bootstrap

编辑：通过链接正确版本的 jquery 来解决我有一个用 django 构建的 web 应用程序。我有使用 jquery 显示结果而不刷新页面的搜索页面。我想在搜索结果上使用可折叠，但它不起作用。这是代码，/query 呈现 results.html。搜索.html：

```
{% extends "base.html" %}
{% block nav3 %}class="active"{% endblock %}
{% block container %}
<script type="text/javascript">
$(document).ready(function() {
    $("#exec").click(function() {
            var dataString = 'arg1='+ $("input#arg1").val() + '&rel=' + $("input#rel").val() + '&arg2=' + $("input#arg2").val();  
            //alert (dataString);return false;  
            $.ajax({  
                type: "GET",  
                url: "/query",  
                data: dataString,  
                success: function(data) {  
                    $(".res").html(data)
                }  
            });  
            return false; 
  });
});

</script>
<form class="form-horizontal">
    <fieldset>
          <legend>Search Relations</legend>
            <div class="control-group">
                <label class="control-label">   Argument1 </label>
                <div class="controls"><input id="arg1" name="arg1" size="30" type="text"/><br /></div>
                <label class="control-label">   Relation </label>
                    <div class="controls"><input id="rel" name="rel" size="30" type="text" /><br /></div>
                    <label class="control-label">   Argument2 </label>
                    <div class="controls"><input id="arg2" name="arg2" size="30" type="text"/><br /></div>
                </div>
                <div class="control-group">
                    <div class="controls"><button id="exec" class="btn btn-primary"> Search </button></div>
                </div>

    </fieldset>
</form>
<div class="res"></div>
{% endblock %} 
```

结果.html：

```
{% if selected %}

<div class="accordion" id="accordion2">
        {% for rel in selected %}
            <div class="accordion-group">
              <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" data-target=".res#collapse{{ rel.id }}">
                  {{ rel.arg1 }} / {{ rel.rel }} / {{ rel.arg2 }}
                </a>
              </div>
              <div id="collapse{{ rel.id }}" class="accordion-body collapse">
                <div class="accordion-inner">
                  {{ rel.sentence }}
                </div>
              </div>
            </div>
        {% endfor %}
        {% else %}
                    <p>No matching relations are are available.</p>
</div>
{% endif %} 
```

当我将生成的 html 复制到另一个文件时，可折叠工作，但与 .html() 一起使用时它不起作用。所有必要的文件都已链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:31:03.623

加载新内容后，您将不得不再次调用折叠函数。所以...

```
$.ajax({  
    type: "GET",  
    url: "/query",  
    data: dataString,  
    success: function(data) {  
        $(".res").html(data).collapse();
    }  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:32:53.903

您需要通过 javascript 手动启用它：

```
$(document).ready(function() {
    $("#exec").click(function() {
            var dataString = 'arg1='+ $("input#arg1").val() + '&rel=' + $("input#rel").val() + '&arg2=' + $("input#arg2").val();  
            //alert (dataString);return false;  
            $.ajax({  
                type: "GET",  
                url: "/query",  
                data: dataString,  
                success: function(data) {  
                    $(".res").html(data).collapse(); // add collapse!
                }  
            });  
            return false; 
  });
}); 
```

# c++ - c++ cout uncasted memory (void)

> ID：10538385
> 
> 赞同：2
> 
> 时间：2012-05-10T16:28:08.010
> 
> 标签：c++, casting, cout

这是场景；

```
// I have created a buffer
void *buffer = operator new(100)

/* later some data from a different buffer is put into the buffer at this pointer
by a function in an external header so I don't know what it's putting in there */

cout << buffer; 
```

我想打印出在这个指针处放入缓冲区的数据，看看里面有什么。我想把它打印为原始 ASCII，我知道那里会有一些不可打印的字符，但我也知道一些清晰的文字被推到那里。

根据我在 Internet 上阅读的内容，`cout`无法打印出未转换的数据，例如 a `void`，而不是`int`or `char`。但是，编译器不会让我使用`(char)`例如动态转换它。我应该创建一个单独的变量，将值转换为指针然后`cout`该变量，还是有一种方法可以直接保存在另一个变量上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:38:55.337

执行以下操作：

```
// C++11
std::array<char,100> buf;
// use std::vector<char> for a large or dynamic buffer size

// buf.data() will return a raw pointer suitable for functions
//   expecting a void* or char*
// buf.size() returns the size of the buffer

for (char c : buf)
    std::cout << (isprint(c) ? c : '.'); 
```

* * *

```
// C++98
std::vector<char> buf(100);

// The expression `buf.empty() ? NULL : &buf[0]`
//   evaluates to a pointer suitable for functions expecting void* or char*

// The following struct needs to have external linkage
struct print_transform {
    char operator() (char c) { return isprint(c) ? c : '.'; }
};

std::transform(buf.begin(), buf.end(),
               std::ostream_iterator<char>(std::cout, ""),
               print_transform()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:39:34.780

如果你想逐个字节地去，你可以使用一个 unsigned char 并迭代它。

```
unsigned char* currByte = new unsigned char[100];
for(int i = 0; i < 100; ++i)
{
    printf("| %02X |", currByte[i]);
} 
```

这不是一个非常现代（甚至是非常“C++”）的答案，但它会为您将其打印为十六进制值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:33:08.787

做这个：

```
char* buffer = new char[100];

std::cout << buffer; 
// at some point
delete[] buffer; 
```

`void*`您只需要在某些情况下，主要用于与 C 接口的互操作，但这绝对不是需要 a 的情况`void*`，它基本上会丢失所有类型信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T16:34:36.400

您需要将其转换为`char*`: `reinterpret_cast<char*>(buffer)`。问题是它`void*`代表任何东西，所以只打印指针；当您将其转换为 时`char*`，内存的内容将被解释为 C 风格的字符串

注意：使用`reinterpret_cast<>`而不是 C 样式`(char *)`来使您的意图清晰并避免以后出现微妙且难以发现的错误

注意：当然你可能会得到一个段错误，好像数据确实不是 C 风格的字符串，可能会访问与缓冲区无关的内存

更新：您可以将内存分配给一个`char*`缓冲区，它也可以解决您的问题：您仍然可以调用您的第 3 方函数（`char*`隐式可转换为`void*`，我认为这是第 3 方函数的参数类型）并且您没有根本不需要铸造。您最好的选择是将内存清零并限制 3rd 方函数将超过 99*`sizeof(char)`字节复制到缓冲区中，以保留结尾的`'\0'`C 样式字符串终止符

# javascript - Phonegap SYNTAX_ERR 上的 SQLITE 查询错误

> ID：10538388
> 
> 赞同：4
> 
> 时间：2012-05-10T16:28:15.700
> 
> 标签：javascript, ios, sqlite, cordova

我正在尝试使用带有 IOS5 的电话间隙 [cordova 1.7.0] 上的 SQLITE 创建一个数据库。当我增加数据数量时，查询失败并输出错误。我遵循了存储[API](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#SQLTransaction)步骤，所以我不知道是什么问题。我试图增加数据库大小，但它仍然没有工作。

这是我的代码：

```
function populateDB(tx) {
tx.executeSql('DROP TABLE IF EXISTS SESSION');
tx.executeSql('CREATE TABLE IF NOT EXISTS SESSION (id unique, dayId, subject, Seq)');
tx.executeSql('INSERT INTO SESSION (id unique, dayId, subject, Seq) VALUES (1, 4, "English", 1)');
tx.executeSql('INSERT INTO SESSION (id unique, dayId, subject, Seq) VALUES (2, 1, "Math", 3)');
tx.executeSql('INSERT INTO SESSION (id unique, dayId, subject, Seq) VALUES (3, 2, "Social", 5)');
tx.executeSql('INSERT INTO SESSION (id unique, dayId, subject, Seq) VALUES (4, 6, "Science", 7)');
console.log('finished filling');
 }

function queryDB(tx) {
tx.executeSql('SELECT * FROM SESSION', [], querySuccess, errorCB); //It doesn't come here
}

function querySuccess(tx, results) {
// Doesn't come here too
var len = results.rows.length;
console.log("DEMO table: " + len + " rows found.");
for (var i=0; i<len; i++){
    console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).dayId);
 }
}

function errorCB(err) {
console.log('error x'); //Fails here
console.log("Error processing SQL: "+err.code);
}

function errorQB(err) {
console.log(' Query error x');
console.log("Error processing SQL: "+err.code);
}

function successCB() {
var db = window.openDatabase("TimeTable", "1.0", "TimeTable" , 1000000);
cosole.log('start of success');
db.transaction(queryDB, errorQB);
console.log('success transaction'); //Didn't Success
}
function onDeviceReady() {
var db = window.openDatabase("TimeTable", "1.0", "TimeTable", 1000000);
db.transaction(populateDB, errorCB, successCB);
} 
```

这是我的日志：

```
 [INFO] Error processing SQL: 5 //SYNTAX_ERR 
```

你知道问题是什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:49:33.263

我知道我做错了什么：

```
tx.executeSql('INSERT INTO SESSION (id ***unique***, dayId, subject, Seq) VALUES (1, 4, "English", 1)'); 
```

我也不应该在插入语句中编写类型......所以当我删除它时，它工作正常。

# android - 等待当前位置 - GPS - Android Dev

> ID：10538389
> 
> 赞同：1
> 
> 时间：2012-05-10T16:28:17.823
> 
> 标签：android, gps

我必须等待才能获得当前位置，就像您在 Google 地图中并请求您的位置时一样。如果它无法获取任何位置，则通知错误并且什么也不做。

我在这里和网上阅读了答案，但都说我必须使用`getLastKnownLocation`方法，但我不需要这个，我只需要当前位置。如果没有，我什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:00:11.160

从昨天开始阅读：[GPS Android - 仅获取一次定位](https://stackoverflow.com/q/10524381/1267661)

但这是获取当前位置的方法：

```
public class Example extends Activity implements LocationListener {
    LocationManager mLocationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

        Location location = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(location != null && location.getTime() > Calendar.getInstance().getTimeInMillis() - 2 * 60 * 1000) {
            // Do something with the recent location fix 
            //  if it is less than two minutes old,
            //  otherwise wait for the update below
        }
    }

    public void onLocationChanged(Location location) {
        if (location != null) {
            Log.v("Location Changed", location.getLatitude() + " and " + location.getLongitude());
            // You need to call this whenever you are done:
            // mLocationManager.removeUpdates(this);
        }
    }

    // Required functions    
    public void onProviderDisabled(String arg0) {}
    public void onProviderEnabled(String arg0) {}
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}
} 
```

# c# - 修改 Linq 结果

> ID：10538395
> 
> 赞同：2
> 
> 时间：2012-05-10T16:28:43.453
> 
> 标签：c#, linq

很基本的问题。如何修改 Linq 结果？

为了进一步说明，我从数据库中的一个订单表中选择了一个订单列表。我需要在 web 表单上的 gridview 中显示结果。首先，我需要修改一些结果。例如，当“订单”字段有值时，应将“报价”字段更改为空白。我可能不得不对结果进行更精细的操作。过去，可以循环遍历数组并修改它们，但今天的编程似乎不希望发生循环。目前结果似乎是只读的，好像我需要修改列表做错了什么。

```
protected void fillGridView()
{
    using (CqsDataDataContext cqsDC = new CqsDataDataContext())
    {
        var orderlist = from x in cqsDC.MasterQuoteRecs
                        where x.CustomerNumber == accountNumber && x.DateCreated > DateTime.Now.AddDays(howfar)
                        orderby x.DateCreated descending
                        select new
                        {
                            customer = x.customername,
                            order = x.OrderReserveNumber,
                            quote = x.Quote,
                            date = Convert.ToDateTime(x.DateCreated).ToShortDateString(),
                            project = x.ProjectName,
                            total = x.Cost,
                            status = x.QuoteStatus
                        };

        // I would like to loop thru list and make changes to it here

        GridView1.DataSource = orderlist;
        GridView1.DataBind();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:36:08.880

你最终得到一个`IQueryable<anonymoustype>`与你当前的查询。由于它们是匿名类型，因此它们是只读的，无论如何都无法更改。

您最好的选择，特别是如果您打算进行数据库查询中无法完成的更复杂的操作，是使用类来代替。您还需要`ToList()`在查询末尾添加 a ，以便最终得到 a `List<YourClass>`，然后可以像往常一样循环遍历它并更改对象。

因此，创建一个具有所有属性的类，例如`MasterQuote`，并在查询中使用它：

```
var query = from x in cqsDC.MasterQuoteRecs
                where x.CustomerNumber == accountNumber && x.DateCreated > DateTime.Now.AddDays(howfar)
                orderby x.DateCreated descending
                select new MasterQuote
                {
                    Customer = x.customername,
                    Order = x.OrderReserveNumber,
                    Quote = x.Quote,
                    Date = Convert.ToDateTime(x.DateCreated).ToShortDateString(),
                    Project = x.ProjectName,
                    Total = x.Cost,
                    Status = x.QuoteStatus
                };

var orderList = query.ToList();

foreach (var item in orderList)
{
    if (item.OrderReserveNumber > 0)
    {
        item.Quote = "";
    }
} 
```

你的`MasterQuote`课程看起来像：

```
public class MasterQuote
{
    public string Customer { get; set; }
    public int Order { get; set; }
    // and so on
} 
```

当然，对于您给定的示例，您可能可以在查询中完成 Quote 操作，如[seth 所述](https://stackoverflow.com/a/10538473/59111)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:38:32.610

取决于更改的实际复杂程度，但是您提到的更改可以通过静态类上的简单方法来完成。

您可以将 linq 语句链接在一起，并为引号列执行相当于 sql case 的操作。

OrderList 似乎不太可能不实现 IEnumerable 所以如果所有的 linq 变得太乱，foreach 就可以完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:32:53.187

只需使用三元运算符。

```
select new
{
    customer = x.customername,
    order = x.OrderReserveNumber,
    quote = x.OrderReserveNumber != null ? string.Empty : x.Quote,
    date = Convert.ToDateTime(x.DateCreated).ToShortDateString(),
    project = x.ProjectName,
    total = x.Cost,
    status = x.QuoteStatus
}; 
```

# javascript - Node.js / npm - 无论如何判断一个包是否是纯 JS？

> ID：10538396
> 
> 赞同：6
> 
> 时间：2012-05-10T16:28:44.793
> 
> 标签：javascript, node.js, dependencies, npm

我注意到，在尝试使用 npm 安装看似简单的节点包（例如，[神经](https://github.com/gjritter/nerve)，一个“微框架”）时，我经常遇到某种形式的依赖问题。[经过一番挖掘，我找到了bcrypt](https://github.com/ncb000gt/node.bcrypt.js)模块的神经问题，该模块显然是用 C/C++ 编写的，并且必须在包管理器下载后进行编译。

不幸的是，如果您希望它在 Windows 上运行，答案似乎是（来自 bcrypt 问题线程之一）“安装 Linux VM”。所以今天早些时候我就这样做了，并开始遇到其他依赖项（尽管安装了 GCC，但在考虑构建之前，您需要安装[某些未命名的 apt 包](https://stackoverflow.com/questions/3329355/node-js-could-not-configure-a-cxx-compiler-ubuntu)），然后最终看到另一个 C 编译器错误（关于某些包或我认为其他找不到“Arrays.c”），我实际上放弃了，并从神经转为表达。具有讽刺意味的是，在 Linux 和 Windows 上使用 npm 进行更大、更复杂的快速安装没有任何问题。

所以，我的问题是：是否有任何可用的过滤器/依赖项跟踪可让您查看包是否具有除节点核心之外的其他依赖项？因为对我来说，node 的魅力是“Javascript 中的一切”，而这种东西非常令人不快地消除了这种错觉。事实上，尽管我在使用 C/C++ 方面所做的工作已经超过了我的时间，但现在每当我看到需要“制作”某些东西时，我通常都会尖叫着朝另一个方向跑去。:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-07-01T13:14:14.960

第一个解决方案不会告诉您依赖项是否使包不纯。搜索 gyp 生成的输出要好得多：

```
find node_modules/ | grep binding.gyp || echo pure 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T03:11:07.243

请注意 package.json 中的“脚本”字段。

如果它包含类似

```
 "scripts": {
    "install": "make build",
 } 
```

和根目录中的 Makefile，包很可能有一些必须编译和构建的本机模块。许多软件包包含一个仅用于编译测试的 Makefile。

对包文档的检查并不排除必须编译和构建某些依赖项的可能性。这意味着对 package.json 中的每个依赖项、它们的依赖项等重复此过程。

也就是说，许多模块已更新为安装，无需在 Windows 上构建，仅此而已。然而，这不能保证所有的包。

使用 Linux VM 似乎是最好的选择。[在 Window 上开发 Node.js 应用程序](http://erickrdch.com/2012/04/developing-node-js-applications-on-windows.html)为您提供了有关安装 VM、Node.js 和 Express 的分步说明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:57:24.017

Node 不是“所有 javascript”，因为扩展节点核心的一种方法是编写 c/c++ 插件。

所以 Node 更像是一个使用 V8 围绕 c/c++ 模块的 javascript 包装器。

例如，您如何用纯 javascript 编写高效的数据库驱动程序？这将是可能的，但速度很慢。

至于过滤器，由作者来记录他的包。没有自动过滤器。

# maven - Maven 突然接收权限被拒绝

> ID：10538401
> 
> 赞同：8
> 
> 时间：2012-05-10T16:28:49.710
> 
> 标签：maven

我已经使用 Maven 几个月来使用 Artifactory 构建项目的依赖项。我今天早上从我们的 VCS (GIT) 中检查了所有最新代码并进行编译，但 Maven 无法连接。我可以通过 telnet 和网络浏览器到达该位置。但我尝试没有任何帮助。

此外，我有 Maven 试图在我的本地 .m2 存储库中下载的 jar，但 Intellij（Maven 插件）中的项目告诉我它无法解决依赖关系。

任何建议、想法等将不胜感激。

```
Downloading: http://salgs2cm01:8081/artifactory/libs-release/com/isomorphic/smartgwt-power/3.0.p20120509/smartgwt-power-3.0.p20120509.pom
May 10, 2012 9:21:44 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Permission denied: connect
May 10, 2012 9:21:44 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 10, 2012 9:21:44 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Permission denied: connect
May 10, 2012 9:21:44 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T22:42:36.273

事实证明，就我而言，这是一个 IPV6 问题。在我的 Windows 7 环境中，我必须添加`MAVEN_OPTS`一个值为`-Djava.net.preferIPv4Stack=true`（您必须重新启动命令行）的环境变量。

我希望这有帮助！

# sql - 使用 DBMS_JOB 在 Oracle 中创建作业

> ID：10538406
> 
> 赞同：2
> 
> 时间：2012-05-10T16:29:15.683
> 
> 标签：sql, oracle, dbms-job

我正在尝试创建一个将在每个圣诞节运行特定程序的工作。这是我已经走了多远：

```
declare
   jobno number;
begin
   dbms_job.submit( jobno,
                   'BEGIN GiveCoins; END;',
                    to_date('12/25', 'MM/DD'),
                    'sysdate + ?');
end;
/ 
```

但是，我似乎找不到一种简单的方法来将时间间隔更改为每年，并且通常对如何进行此操作感到非常困惑，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T16:32:26.633

你想要类似的东西

```
declare
   jobno number;
begin
   dbms_job.submit( jobno,
                   'BEGIN GiveCoins; END;',
                    to_date('12/25/2012', 'MM/DD/YYYY'),
                    'add_months(trunc(sysdate),12)');
end;
/ 
```

这将在 2012 年圣诞节的午夜首次运行该作业，之后每 12 个月运行一次。

# git - 从 Mercurial 存储库创建快速导出包

> ID：10538411
> 
> 赞同：8
> 
> 时间：2012-05-10T16:29:28.180
> 
> 标签：git, version-control, mercurial, plasticscm

我正在尝试找到快速导出 hg 存储库并将结果转储到快速导出兼容格式文件的方法。

基本上，我想做与 Git 或 Plastic SCM 相同的事情：

```
git fast-export --all -C --tag-of-filtered-object=drop --signed-tags=strip > Repository.fast-exported

cm fast-export MyProject@PlasticSCMServer:8087 Repository.fast-exported 
```

我知道我可以使用 hg-fast-export.py 工具（[http://hedonismbot.wordpress.com/2008/10/16/hg-fast-export-convert将快速导出/快速导入直接导入 Git -mercurial-repositories-to-git-repositories/](http://hedonismbot.wordpress.com/2008/10/16/hg-fast-export-convert-mercurial-repositories-to-git-repositories/)）但我想知道是否可以创建转储文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T19:43:55.757

你看过[这个项目](http://repo.or.cz/w/fast-export.git)吗？该`fast-export.sh`脚本通过将`hg-fast-export.py`python 脚本的输出输入到`git fast-import`. 如果您想保存转储文件，您可以简单地运行相同的命令并将输出定向到文件。

# php - 将 50 多个安装升级到 PHP 5.3

> ID：10538419
> 
> 赞同：11
> 
> 时间：2012-05-10T16:30:11.160
> 
> 标签：php, compatibility, backwards-compatibility

作为网页设计师，我们在 2011 年过得很好，有超过 50 个（不同的）cms 和其他 php 5.2 驱动的应用程序。有些还对核心进行了自定义。有人如何将如此数量的应用程序升级到 php 5.3？

php 的开发者有没有想过这个问题？许多（流行的）功能只是贬值了，给像我们这样的人带来了很多工作。

我真的不知道如何最好地进行

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T16:54:16.403

# 简短的回答

### 这取决于。

迁移策略将受到源本身的质量和内容以及架构和工作流程的影响。没有“灵丹妙药”可以*让它发挥作用*。

# 更长的答案

### 应该怎么做

您会自动升级所有[临时站点](http://en.wikipedia.org/wiki/Staging_site)，运行所有[单元测试](http://en.wikipedia.org/wiki/Unit_testing)，如果它们都通过，则运行[验收测试](http://en.wikipedia.org/wiki/Acceptance_testing)。修复出现的问题，直到您通过所有测试。然后让您的 QA 人员确保一切都 100% 正常。整个过程主要由您的[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)系统/框架运行。

当所有工作都在暂存环境中运行时，您关闭每个站点进行维护，将更新的代码部署到生产环境，升级服务器的软件，然后恢复站点。

### 你将如何（很可能）必须这样做

由于您的软件都没有任何单元/验收测试，没有最新的规范，甚至没有持续集成系统的概念，您将不得不以艰难的方式去做：

```
'step 1' take a survey of different servers setups on which your projects 
         are deployed (if you have all project on single box with 
         virtual-hosts, you can skip this bit )
'step 2' find somewhere a computer, which can temporary act as local server
<foreach setup>

    'step 3' install/configure this temporary server to be exactly like 
             the "setup"
    <foreach project on that setup>

        'step 4' BACKUP ALL THE STUFF
        'step 5' copy the latest source and DB from the production server
        'step 6' upgrade the software
        'step 7' see what has *blown* up and fix what you can find    
        'step 8' pass to the QA team 
        'step 9' store the source

    </endforeach project>
    'step 10' take the server with this configuration down for maintenance
    'step 11' upgrade software on the server
    'step 12' deploy all the projects from this server 
    'step 13' prayer (optional)

<endforeach setup> 
```

这是有点“简短”的版本。基本上你必须逐个服务器，在本地克隆它，然后升级，修补项目。然后升级每台服务器并安装补丁版本。和希望。

### 你应该升级吗？

> [**客户不会为此付费。**]

由于您有大约 50 个不同的项目，您将不得不调查它是否值得花费时间和金钱。经过这样的分析，您可能会发现将大多数项目标记为*“遗留”*并将服务器升级到最新的 5.2.x对企业来说更有意义。然后别管它。

当然，即使您决定不升级大多数项目，也会有一些项目需要升级。特别是具有持续合同的项目，可为公司带来稳定的收入来源。

我建议开始升级那些摇钱树项目，因为无论如何你都必须这样做。然后根据这种经验，您可以计算其余“投资组合”的成本。

### 下次呢？

PHP 5.4 已经发布（在上次编辑时，5.5 已经发布）。大多数公司到今年年底都会面临一个问题：*“是时候开始使用 5.4 了吗？”* . 有的早一点，有的晚一点。您使用的框架和 CMS 也有更新的趋势。

**底线：**您的公司整体应该开始研究简化此流程的方法。

那么当你升级到 PHP 5.5 并且`mysql_*`函数开始显示`E_DEPRECATE`警告时呢？请参阅文档中的**红框**[`mysql_affected_rows()`](http://docs.php.net/manual/en/function.mysql-affected-rows.php)。这不是一次性的事情。

投资实施更好的部署策略（涉及单元测试和持续集成）可能是明智的。

* * *

[`<rant>`]

> [php 的开发者有没有想过这个问题？许多（流行的）功能只是贬值了，给像我们这样的人带来了很多工作。]

[已弃用的功能和功能已在文档中标记为多年。例如，`ereg()`不应该使用引用传递对象的通知，自从我开始学习 PHP 以来就一直存在。弃用警告将主要影响 PHP4 代码库（在这种情况下，您的问题有点虚伪）。]

[我看不出社区多年来接受的强制做法是如何“导致大量工作”的。]

[`</rant>`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:38:11.233

首先，将程序存储在通过包管理系统（yum、apt-get 等）安装的包（RPM、DEB 等）中，并正确设置依赖信息。

然后通过一个适当的发布链和一个集成步骤来测试升级依赖项时代码是否中断。诸如 Jenkins 之类的 CI 服务器可以运行您的自动化测试并为您构建包。

如果有问题，它们会很快出现，您可以着手修复它们。使用您通常的内部流程来确定优先级和修复错误（请注意，值得关注的是在给定包中作为一个批次的依赖升级引入的所有错误，而不是通过并行处理十几个程序来分散工作）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:54:55.490

显然，您应该遵循建议的升​​级做法；其他答案正在提供它们。

有流程和程序步骤要采取；我没有具体的建议，事实上[tereško](https://stackoverflow.com/users/727208/teresko)的回答非常好恕我直言

但是如果代码库本身必须更改，您可以选择：

*   您可以手动完成所有操作（这似乎是隐含的假设）。这不是令人惊讶的建议。
*   您可能能够自动应用更改。

纯手动方法要求您发现所有类型的不兼容性（语言更改、框架更改、基础架构替换……），弄清楚如何普遍修复它们，然后在适当的情况下应用每种修复类型。最后一部分真的很昂贵，因为它需要你检查每一行代码，如果有问题就修复它。

自动更改无助于发现问题或解决方案的一般工作。但是一旦你弄清楚如何解决问题，它可能有助于在所有必要的地方应用该解决方案。

每个问题需要的是一种“如果你在代码中看到这个，就把它改成那个”。这种非正式的想法可以打包为*程序转换*，用于修改代码的正式规则。

我的公司提供了一个工具，即[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)，它是一个程序转换引擎。它可以使用特定语言的前端分析和转换多种计算机源代码；它有一个适合此任务的[PHP 前端（解析器/prettyprinter） 。](http://www.semanticdesigns.com/Products/FrontEnds/PHPFrontEnd.html)DMS 就是为此类任务而设计的，这就是为什么它的部分名称是“软件再造工具包”。我们已经将它用于[更棘手的再造任务](http://www.semdesigns.com/Products/Services/NorthropGrummanB2.html)。

所以想法是将所需的更改打包为程序转换，并使用像 DMS 这样的工具来应用它们。编写修复代码中问题的规则将是一项艰巨的任务，但一旦完成，DMS 就可以可靠地应用这些规则。因此，您投资于前几个系统（以调整和验证规则）以使更新最后 48 奇数有效。

这不是灵丹妙药。你不能总是很容易地为你想要的东西写一个转换。但是，当您要进行大量更改并且希望在整个代码中进行更改时，使用工具尽可能多*地可靠*地完成比手动完成所有事情要好得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T16:33:20.067

我想这个列表： http: [//php.net/manual/en/migration53.incompatible.php](http://php.net/manual/en/migration53.incompatible.php)是您所需要担心的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T16:34:30.207

最好的方法是遵循[PHP 5.3 迁移指南](http://php.net/manual/en/migration53.php) （然后是[PHP 5.4](http://php.net/manual/en/migration54.php)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T02:34:25.350

如果您正在使用像 cherokee 这样的替代 Web 服务器，您可以使用 PHP 的并行安装。如果由于操作系统中的安装限制而无法这样做，您可以随时使用 chrooted 环境并更改 php 解释器的端口。

如果我必须更新 php 版本，我会在页面中添加第二个域，例如使用新 php 版本的 updated.domain.com。普通用户看不出区别。但不幸的是，这只有在您使用相对路径并且文件中没有硬编码域时才有效。

# sharepoint-2010 - 我的新 HttpModule 的 Init() 方法何时会触发？

> ID：10538420
> 
> 赞同：0
> 
> 时间：2012-05-10T16:30:12.983
> 
> 标签：sharepoint-2010, httpmodule, init, feature-receivers

在我的站点范围功能的功能接收器中使用事件处理程序，我将我的 HttpHandler 添加到我的配置中（我是新手，所以代码有点脱节，因为我在这里和那里找到了它）。

```
public override void FeatureActivated(SPFeatureReceiverProperties properties) {
    var site = (SPSite)properties.Feature.Parent;
    var webApp = site.WebApplication;
    if (!webApp.IsAdministrationWebApplication) {
        var modification = new SPWebConfigModification("add[@name='SharePointNinjectHttpModule']", "configuration/system.web/httpModules");
        modification.Owner = "addSharePointNinjectHttpModule";
        modification.Sequence = 0;
        modification.Type = SPWebConfigModification.SPWebConfigModificationType.EnsureChildNode;
        modification.Value = @"<add name=""SharePointNinjectHttpModule"" type=""Foo.Bar.SharePointNinjectHttpModule,Foo.Bar, Version=1.0.0.0, Culture=neutral, PublicKeyToken=****************"" />";
        webApp.WebConfigModifications.Add(modification);
        try {
            webApp.WebService.ApplyWebConfigModifications();
            webApp.Update();
        }
        catch (SecurityException e) {
            // todo ApplyWebConfigModifications throws "Access Denied" SecurityException when activating via Site Settings
        }
    }
}

public override void FeatureDeactivating(SPFeatureReceiverProperties properties) {
    var site = (SPSite)properties.Feature.Parent;
    var webApp = site.WebApplication;
    if (!webApp.IsAdministrationWebApplication) {
        var oCollection = webApp.WebConfigModifications;
        var iStartCount = oCollection.Count;
        for (int c = iStartCount - 1; c >= 0; c--) {
            SPWebConfigModification oModification = oCollection[c];
            if (oModification.Owner == "addSharePointNinjectHttpModule") {
                oCollection.Remove(oModification);
            }
        }

        if (iStartCount > oCollection.Count) {
            try {
                webApp.WebService.ApplyWebConfigModifications();
                webApp.Update();
            }
            catch (SecurityException e) {
                // todo ApplyWebConfigModifications throws "Access Denied" SecurityException when deactivating via Site Settings
            }
        }
    }
} 
```

当功能不活动时，我的 SharePoint 实例的 web.config httpModules 部分：

```
<httpModules>
</httpModules> 
```

当它是：

```
<httpModules>
  <add name="SharePointNinjectHttpModule" type="Foo.Bar.SharePointNinjectHttpModule,Foo.Bar, Version=1.0.0.0, Culture=neutral, PublicKeyToken=****************" />
</httpModules> 
```

所以*看起来*功能接收器事件处理程序正在做他们的工作（也许我错过了一些东西？）。

这是HttpModule：

```
using System;
using System.Web;
using Foo.Bar.Models;
using Ninject;

namespace Foo.Bar {
    public class SharePointNinjectHttpModule : IHttpModule {
        public void Init(HttpApplication context) {
            if (Kernel == null) {
                Kernel = new StandardKernel();
                Kernel.Bind<IRepository>().To<Repository>();
            }
        }

        public static IKernel Kernel { get; private set; }

        public void Dispose() {}

        private static IKernel GetKernel() {
            IKernel result = new StandardKernel();
            result.Bind<IRepository>().To<Repository>();
            return result;
        }

    }
} 
```

我的 HttpModule 的 Init() 方法永远不会触发。我*应该*期待它什么时候触发，为什么没有发生呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:25:43.973

对 FeatureActivated() 的以下更改解决了我遇到的问题：

```
var modification = new SPWebConfigModification("add[@name='SharePointNinjectHttpModule']", "configuration/system.webServer/modules"); 
```

我在 web.config 的错误部分中注入了模块。

原文：configuration/system.web/httpModules
更改：configuration/system.webServer/modules

完成上述更改后，我正确添加了 httpModule

一旦我正确添加了 httpModule，我的 Init() 就会立即触发。

# asp.net - 为什么总是使用 jquery 和 asp.net 显示 ajax 加载器图像

> ID：10538421
> 
> 赞同：1
> 
> 时间：2012-05-10T16:30:18.413
> 
> 标签：asp.net, ajax, jquery, updatepanel

在我的 ajax_loader 图像下面使用 asp.net 代码不能正常工作并且总是显示..

```
 <asp:ScriptManager ID="MainScriptManager" runat="server" />
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <asp:Label runat="server" ID="lblname">
                        Name</asp:Label><br />
                    <asp:TextBox runat="server" ID="txbname"></asp:TextBox><br />
                    <asp:Label ID="lblemail" runat="server">
                        Email</asp:Label><br />
                    <asp:TextBox runat="server" ID="txbemail" /><br />
                    <asp:Label runat="server" ID="lblsugg">
                        Suggestion</asp:Label><br />
                    <asp:TextBox runat="server" Rows="3" Columns="20" ID="txbsugg" TextMode="MultiLine"></asp:TextBox>
                    <asp:Button runat="server" ID="btnsubmit" OnClick="btnsubmit_onclick" Text="submit" />
                    <asp:Label runat="server" ID="lblresultmsg"></asp:Label>
                </ContentTemplate>
            </asp:UpdatePanel>

            <div id="loading">
                <p>
                    <img src="Images/ajax-loader.gif" />
                    Please Wait</p>
            </div> 
```

和jQuery代码

```
 $("#loading").ajaxStart(function() {
        $(this).show();
    }).ajaxStop(function() {
        $(this).hide();
    }); 
```

有什么建议么 ！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:34:26.633

`ajaxStart`并且`ajaxStop`仅适用于jQuery发送的ajax请求，如果您使用其他库或`UpdatePanel`，它不会帮助您。
**仅限 jQuery。**

> 每当要发送 Ajax 请求时**{With jQuery-gdoron}**，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有进行中，jQuery 会触发 ajaxStart 事件。此时会执行已使用 .ajaxStart() 方法注册的所有处理程序。

将触发`ajaxStart`and的 jQuery ajax 请求示例`ajaxStop`：

```
$.ajax({
        url: 'foo',
        ...
        ...
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:45:32.613

您可以通过将以下代码添加到常见的 js 包含来创建一种通用的方法来处理此问题。这是一个快速而肮脏的例子：

注意：确保通过调用`SetupGlobalAjaxHandlers`页面加载来初始化它。

```
function SetupGlobalAjaxHandlers()
{
    var prm = Sys.WebForms.PageRequestManager.getInstance(); 
    prm.add_initializeRequest(InitializeRequest); 
    prm.add_endRequest(EndRequest);
}

function InitializeRequest(sender, args) 
{ 
    if(typeof(OnPageInitRequest) != "undefined")
        OnPageInitRequest();
} 

function EndRequest(sender, args) 
{ 
    if(typeof(OnPageEndRequest) != "undefined")
        OnPageEndRequest();
} 
```

然后，在任何包含 js 文件的页面中，您都可以选择实现`OnPageInitiRequest()`and`OnPageEndRequest()`方法。在那里，您可以显示/隐藏您的加载指示器。

不过，我确实建议您在免费获得显示/隐藏逻辑时使用[UpdateProgress控件。](http://msdn.microsoft.com/en-us/library/bb386421.aspx)

这种技术为您开辟了一些可能性，例如，如果您想在发生部分回发时禁用控件。

# c++ - 用户注销节点时 Jenkins 构建失败

> ID：10538423
> 
> 赞同：1
> 
> 时间：2012-05-10T16:30:30.160
> 
> 标签：c++, windows, visual-studio-2008, jenkins

有时，由 Jenkins (1.461) 完成的构建会在中间的某个随机位置停止。这些构建是对 Visual Studio 2008 SP1 的 devenv.com 的手动脚本调用，主要用于 C++ 代码。Visual Studio 不会发出错误消息；devenv 日志中的最后一条消息是正在构建的一些随机文件。由于依赖于某些构建输出的构建后 Windows 批处理命令，Jenkins 构建失败。这种情况很少发生（大约 15 个构建中的 1 个）。Jenkins 的错误日志在构建失败时没有显示任何异常。令人惊讶的是，它说构建成功，尽管它在其他任何地方都显示它失败。

这个问题是孤立给詹金斯的。在开发人员的办公桌上运行的相同构建脚本从未以这种方式失败。

Jenkins 节点是 32 位 Windows XP 机器。它们都有充足的可用磁盘空间。Jenkins 被配置为每个节点一次只运行一项作业。事件日志显示在构建停止时没有发生明显的坏事（例如，Visual Studio 崩溃）。

有没有人有任何想法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:43:56.880

我不记得自己曾经遇到过 jenkins 的这个问题，但是我在 MSVC 2008 中经常遇到链接器崩溃。这对我来说几乎每天都会发生。如果是链接器崩溃，那么这可能是一种解释。（也许没有记录链接器崩溃？）

编辑：我们在 32 位 Win7 上使用 MSVC2008 SP1。我们在构建 c++ 解决方案时使用 MSBuild 3.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:38:46.883

我们最终将随机构建失败与 Jenkins 节点上的注销事件相关联。这导致了这个[JVM 错误/功能](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=a07bcaf1fa874dffffffff9c37f3e77930740?bug_id=6871190)（Oracle Java 错误 ID 6871190），其中 Windows 中的注销事件会导致信号处理程序终止 JVM。您可以通过将 -Xrs 选项传递给 JVM 来禁用此行为（可能还有其他缺点），但该选项不会自动传播到子 Java 进程。

我们通过 -Xrs 来启动 Jenkins 本身，而 Jenkins 服务本身通过注销来生存。当前的假设是 Jenkins 构建过程的某些部分是通过另一个未使用 -Xrs 调用的 Java 子进程启动的。

# iis - 当 IIS 看到 URL 中设置的单词时会发生什么？

> ID：10538424
> 
> 赞同：2
> 
> 时间：2012-05-10T16:30:34.687
> 
> 标签：iis, asp-classic

有一个奇怪的问题 - 我们有一个页面使用查询字符串来获取一些信息，这个查询字符串恰好包含单词`set`。发生这种情况时，页面会返回 406 错误 ( `Client browser does not accept the MIME type of the requested page.`)

URL 看起来像`example.com/folder/file.asp?variable=sunset boulevard`. 如果我将空间更改为`%20`它仍然返回 406。

在我运行 IIS 5.x 的本地机器上不会发生这种情况，在我们运行 IIS 7.x 的测试服务器上不会发生这种情况，只有在我们通过 SSL 运行 IIS 7.x 的生产服务器上才会发生。但是请注意，我的本地计算机上通过 SSL 的自签名证书仍然不会产生错误。

所以我的问题是，`set`URL 中的关键字告诉 IIS 做什么，有没有一种简单的方法可以避免它发生？如果可能的话，我想避免将空间更改为不同的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:06:18.130

您的服务器是否安装了额外的过滤器？闻起来像是旨在防止某些类型攻击的积极过滤器的工作。

# c# - C# 字典到 .csv

> ID：10538425
> 
> 赞同：18
> 
> 时间：2012-05-10T16:30:36.230
> 
> 标签：c#, file, csv

我有 C# `Dictionary`，我想从中创建一个`.csv`文件。例如我有这本字典：

```
Dictionary<string, string> data = new Dictionary<string, string>();
data.Add("0", "0.15646E3");
data.Add("1", "0.45655E2");
data.Add("2", "0.46466E1");
data.Add("3", "0.45615E0"); 
```

我想要这个`.csv`文件输出：

```
0;0.15646E3;
1;0.45655E2;
2;0.46466E1;
3;0.45615E0; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-10T16:35:38.893

也许是最简单的：

```
String csv = String.Join(
    Environment.NewLine,
    data.Select(d => $"{d.Key};{d.Value};")
);
System.IO.File.WriteAllText(pathToCsv, csv); 
```

您`using LINQ`至少需要添加和使用 .NET 3.5

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T16:32:55.603

尝试以下

```
using (var writer = new StreamWriter(@"the\path\to\my.csv")) {
  foreach (var pair in data) {
    writer.WriteLine("{0};{1};", pair.Key, pair.Value);
  }
} 
```

注意：如果键或值元素可以包含`;`. 如果是这样，您将需要添加一个转义机制来处理它

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T16:38:35.613

```
 File.WriteAllLines(@"pathtocsv.csv", data.Select(x => x.Key + ";" + x.Value + ";"))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T22:50:32.097

我的字典类似于上面提出的问题中的字典（由 user1387150 提出），除了 VALUE 部分是一个数组（双精度数，即双精度 []）。

调整上面 Jared 的解决方案，允许将 a`Dictionary<string, double[]>`写入 csv，如下所示：

```
 using (var writer = new StreamWriter(@"C:\path\test.csv"))
    {
        foreach (var pair in data)
        {
            writer.WriteLine("{0},{1};", pair.Key, String.Join(",", pair.Value.Select(x => x.ToString()).ToArray()));
        }
    } 
```

# azure - 在 Azure 上运行 Socket.io 并回退到 FlashSockets

> ID：10538427
> 
> 赞同：0
> 
> 时间：2012-05-10T16:30:40.677
> 
> 标签：azure, socket.io

我正在尝试在 Azure 上运行 socket.io，并在 IE9 中回退到 FlashSockets。该应用程序在 FF 和 Chrome 中使用 websockets，但是当 Socket.IO 尝试在 IE9 中使用 Flash 后备时，我收到以下错误。

> [WebSocket] 无法连接到 > > ws://example.cloudapp.net:80/socket.io/1/flashsocket/19127550151689645722 (SecurityError) 的 Web Socket 服务器 确保服务器正在运行并且 Flash 套接字策略文件已正确放置

Socket.io 正在服务器上运行，因为我可以访问 /socket.io/socket.io.js 客户端文件。IE9 也成功地抓取了它应该请求的 SWF 文件。

我通过错误消息假设问题与端口不可用有关。我无法使用端口：10843 访问 crossdomain.xml 文件，这是 Socket.io 的默认端口，我想我会在哪里找到它。这一切也可以在 Azure 模拟器中本地运行。任何有关如何在 Azure 中配置端口或如何查找/测试 crossdomain.xml 文件的指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:39:37.887

如果问题只是端口 10843 未打开，我认为您需要做的就是添加`<InputEndpoint protocol="tcp" port="10843" />`到您的`.csdef`文件中。

# jquery - 如何从 JSON 中获取地理坐标？推特 API

> ID：10538428
> 
> 赞同：0
> 
> 时间：2012-05-10T16:30:47.307
> 
> 标签：jquery, json, multidimensional-array, twitter

这是 JSON 输出的内容

```
{
  "created_at": "Wed, 09 May 2012 22:13:32 +0000",
  "from_user": "EastCClothing",
  "from_user_id": 119699125,
  "from_user_id_str": "119699125",
  "from_user_name": "Tester23",
  "geo": {
    "coordinates": [
      54.9742,
      -1.5974
    ],
    "type": "Point"
  },
  "id": 200347799861198850,
  "id_str": "200347799861198849",
  "iso_language_code": "pt",
  "metadata": {
    "result_type": "recent"
  },
  "profile_image_url": "http://a0.twimg.com/sticky/default_profile_images/default_profile_0_normal.png",
  "profile_image_url_https": "https://si0.twimg.com/sticky/default_profile_images/default_profile_0_normal.png",
  "source": "&lt;a href=&quot;http://twitter.com/download/android&quot; rel=&quot;nofollow&quot;&gt;Twitter for Android&lt;/a&gt;",
  "text": "#CM0655 GEO",
  "to_user": null,
  "to_user_id": 0,
  "to_user_id_str": "0",
  "to_user_name": null
}, 
```

我想要做的是获取坐标，以便我可以将它们与谷歌地图 api 一起使用，我可以访问所有其他详细信息，但无法通过我预期的 'json.results [ i].geo.coordinates'。这是我的 jQuery

```
$(function(){
    function searchTweets() {
        var url='http://search.twitter.com/search.json?callback=?&q=cm0655';
        $.getJSON(url,function(json){

            var output = [];

            for (var i = 0, len = json.results.length; i < len; i++) {

               output.push('<p id="tweet"><img id="tweetImage" src="' + json.results[i].profile_image_url + '" width="48" height="48" /><span id="tweetText">' + '<a href="http://twitter.com/' + json.results[i].from_user + '">' + json.results[i].from_user + "</a> " + json.results[i].text + "<br />" + json.results[i].created_at + '</p>' + json.results[i].geo.coordinates + '</span>');
            }

            $("div.twitter2").html(output.join('')).slideDown('slow');
        });
    }

    var timer = setInterval(searchTweets, 20000);

    searchTweets();

}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:29:59.613

我想我会添加 $.each 方法，以防万一有人走上这条路。

```
 // The code below uses the Twitter API found here https://dev.twitter.com/docs to search for the latest mention of CM0655 (module code).

    var twitterURL = "http://search.twitter.com/search.json?q=%23CM0655";
    function twitterSearch() { // Create the weather function   
        $.ajax({
        url: twitterURL, //http request string for the weather service
        dataType: "jsonp",                                                                                                  
        success: function(JSON) {                      // If successful parse the JSON data
            $('#twitterSearch').html("");
            $.each(JSON.results, function(i,tweet){
                    var tweeterID  = tweet.from_user_id;
                    var dateFormat = tweet.created_at;
                    var newDate    = dateFormat.replace('+0000', '');
                    var title      = 'title="Tweeted from"';
                    var id         = tweet.id;
                    var locData    = tweet.geo;
                    getCordsData(locData);
                    $('#twitterSearch').append('<li id="tweet' + id + '" class="mainP tweet"><img class="tweetImage" src="'+ tweet.profile_image_url +'" height="20" width="20" /> <a class="tweetLink" href="http://twitter.com/' + tweet.from_user + '" target="_blank">' + tweet.from_user + '</a> on the ' + newDate + ' <br /> tweeted<span id="tweetTextColor">: ' + tweet.text + '</span></li>');
            });
        //alert("Ajax text");
        setTimeout(twitterSearch, 10000);
        }
        }); // End of ajax
     } // End of function

    function getCordsData(data){
        if(data == null){
            data = "No location data found!";
            alert(data);
        }else{
            var long = data['coordinates'][0];
            var lat = data['coordinates'][1];
            alert("long:" + long + "Lat:" + lat);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:20:36.290

抱歉之前的失败我找到了一个解决方案你需要做的是检查 results.geo 是否是一个对象然后循环如果不排除它或将它设置为其他我已经完成的

免责声明 这不是最好的解决方案，但它可以让您了解如何解决问题。希望能帮助到你！

```
$(function() {
    function searchTweets() {
        var url = 'http://search.twitter.com/search.json?callback=?&q=from:Eastcclothing';
        $.getJSON(url, function(json) {

            console.log(json);
            var output = [];

            for (var i = 0, len = json.results.length; i < len; i++) {

                if ($.isPlainObject(json.results[i].geo)) {
                    output.push('<p id="tweet"><img id="tweetImage" src="' + json.results[i].profile_image_url + '" width="48" height="48" /><span id="tweetText">' + '<a href="http://twitter.com/' + json.results[i].from_user + '">' + json.results[i].from_user + "</a> " + json.results[i].text + "<br />" + json.results[i].created_at + '</p>' + json.results[i].geo.coordinates + '</span>');
                } else {
                    output.push('<p id="tweet"><img id="tweetImage" src="' + json.results[i].profile_image_url + '" width="48" height="48" /><span id="tweetText">' + '<a href="http://twitter.com/' + json.results[i].from_user + '">' + json.results[i].from_user + "</a> " + json.results[i].text + "<br />" + json.results[i].created_at + '</p>' + json.results[i].geo + '</span>');
                }
            }

            $("div.twitter2").html(output.join('')).slideDown('slow');
        });
    }

    var timer = setInterval(searchTweets, 20000);

    searchTweets();

});​ 
```

也可以帮助继承一个有效的 jsfiddle [http://jsfiddle.net/th3fallen/jc2Kf/](http://jsfiddle.net/th3fallen/jc2Kf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:41:55.810

我认为您遇到了问题，因为您试图将数组与字符串连接起来，您可能需要做的是：

```
...+"["+json.results[i].geo.coordinates[0]+","+json.results[i].geo.coordinates[1]+"]"+... 
```

而不仅仅是

```
...+json.results[i].geo.coordinates+... 
```

* * *

或试试这个：

```
if (json.results[i].geo) console.log('<p id="tweet"><img id="tweetImage" src="' + json.results[i].profile_image_url + '" width="48" height="48" /><span id="tweetText">' + '<a href="http://twitter.com/' + json.results[i].from_user + '">' + json.results[i].from_user + "</a> " + json.results[i].text + "<br />" + json.results[i].created_at + '</p>' + "["+json.results[i].geo.coordinates[0]+","+json.results[i].geo.coordinates[1]+"]" + '</span>'); 
```

甚至：

```
if (json.results[i].geo) console.log($('<p id="tweet"><img id="tweetImage" src="' + json.results[i].profile_image_url + '" width="48" height="48" /><span id="tweetText">' + '<a href="http://twitter.com/' + json.results[i].from_user + '">' + json.results[i].from_user + "</a> " + json.results[i].text + "<br />" + json.results[i].created_at + '</p>' + "["+json.results[i].geo.coordinates[0]+","+json.results[i].geo.coordinates[1]+"]" + '</span>')); 
```

并确保 html 看起来正确。

我注意到的另一个问题是您在`</span>`标签之前关闭`</p>`标签，这是无效的 html。我不认为这是你的问题（可能是？），但你应该解决它。

# javascript - 谷歌地图地理编码和初始化顺序

> ID：10538434
> 
> 赞同：0
> 
> 时间：2012-05-10T16:30:58.820
> 
> 标签：javascript, google-maps, geocoding

所以我最近遇到了一个问题，也许你们可以帮忙。

因此，首先，我创建了网站和一个标记，并且我正在尝试检索中心点以对地址进行反向地理编码。

我的代码如下：

```
function ReverseGeocode(lat, lng)
{
    var latlng = new google.maps.LatLng(lat, lng);
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({"latLng": latlng}, function(results, status)
    {
        if (status != google.maps.GeocoderStatus.OK)
        {
            alert("Geocoding has failed due to "+ status);
        }
        address = results[0].formatted_address;
    });
} 
```

我在这里遇到的问题是，当我尝试将“地址”传回时（地址现在是一个全局变量），我得到的只是“未定义”。

这是我试图将其传回的代码： sendString += '&lat=' + lat; sendString += '&lng=' + lon; ReverseGeocode(center.lat(), center.lng()); 警报（“”+地址）；

```
sendString += '&address=' + address 
var currentLang = "en"
sendString += '&phone=' + document.getElementById("number").value;
sendString += '&email=' + document.getElementById("email").value;
sendString += ($("prefsms").checked)?'&contactMethod=sms':'&contactMethod=email';
sendString += '&serviceType=' + document.getElementById("serviceType").value;
sendString += '&language=' + currentLang;
alert(""+sendString); 
```

在我的警报框中，我得到的只是“未定义”。然而，如果我将另一个警报框添加到 ReverseGeocode 函数中，我将在警报框中获取地址，但这发生在外部函数中的警报框之后。

关于发生了什么的任何想法？我原以为 ReverseGeocode 函数中的警报框会先出现，而不是相反。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:50:44.253

正如 Heitor Chang 所说，地理编码是异步的 - 所以当你尝试返回地址时，它会返回到你作为回调传递给`geocoder.geocode()`. 使困惑？看到这个：

```
function ReverseGeocode(lat, lng)
{
    var latlng = new google.maps.LatLng(lat, lng);
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({"latLng": latlng}, function(results, status)
    {
        if (status != google.maps.GeocoderStatus.OK)
        {
            alert("Geocoding has failed due to "+ status);
        }
        return results[0].formatted_address; // this is how you might've been returning (i am just assuming since you didn't provide any code that returns address.
    });
} 
```

现在您可以看到它返回到您传递给的函数`geocoder.geocode()`

你应该做的是使用回调 - 你在这里传递一个，可能没有意识到它 - 接受一个回调作为 ReverseGeocode 函数的第三个参数，当你得到结果为 OK 时，调用回调并返回地址。就是这样：

```
function ReverseGeocode(lat, lng, cb)  // cb - callback, a function that takes the address as an argument.
{
    var latlng = new google.maps.LatLng(lat, lng);
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({"latLng": latlng}, function(results, status)
    {
        if (status != google.maps.GeocoderStatus.OK)
        {
            alert("Geocoding has failed due to "+ status);
        }
        cb(results[0].formatted_address); // call the callback passing to it the address and we're done.
    });
} 
```

如何使用它？这边走：

```
ReverseGeocode( LAT, LNG, function(address) {
    // do something with the address here. This will be called as soon as google returns the address.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:37:34.693

（反向）地理编码是异步的，这意味着请求会发送到 Google 服务器，您的脚本会继续运行，并且`result is OK`当 Google 发回其回复时，块内的代码会执行。整体执行不一定按照命令的顺序编写。

要使用`address`代码的值，必须包含在返回状态正常的代码块中。

# ember.js - Ember.js 文本字段更改事件

> ID：10538439
> 
> 赞同：2
> 
> 时间：2012-05-10T16:31:08.320
> 
> 标签：ember.js

我刚开始学习 ember.js 为什么这段代码[http://jsfiddle.net/alexchetv/RVNzP/](http://jsfiddle.net/alexchetv/RVNzP/)不能正常工作—— App.MyTextField.change() 执行只有在 MyTextField 失去焦点后才会触发？ 具有相同功能的[替代代码按预期工作。](http://jsfiddle.net/alexchetv/mkrvJ/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T16:51:42.817

请记住，您的 Ember.Views 上的处理程序（更改、选择、单击等）绑定到正常的 HTML DOM 事件。“onchange”仅在输入字段失去焦点并发生更改时才被调用，而不是在任何时候修改值时调用。如果您想收到有关显示值更改的通知，您应该观察“值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:59:49.173

[这是一个有效的解决方案](http://jsfiddle.net/RVNzP/35/)。

我所做的是让 formDirty 成为一个计算值，它会根据输入的变化重新计算。Ember 与原生的“更改”事件不同，它会在每次击键（复制/粘贴事件等）时更新 Input 的值。
Ember 的绑定确保 peopleController 始终使用输入值更新，因此也更新计算字段 formDirty。

请注意，如果添加更多输入，则必须告诉计算属性侦听其事件，例如

```
formDirty: function() {
    return !Ember.empty(this.get('fName')) && !Ember.empty(this.get('lName'));;
}.property('lName', 'fName').cacheable() // <- dependencies 
```

cacheable() 仅用于性能考虑，这意味着在依赖关系更改之前不会再次计算。

# rally - 使用 Rally REST API，我如何获取用户故事的非 API（网站）URL？

> ID：10538441
> 
> 赞同：6
> 
> 时间：2012-05-10T16:31:12.190
> 
> 标签：rally, agile-central

我正在使用 Rally REST API 将来自 Rally 的用户故事数据集成到另一个应用程序中。我从 Rally 检索用户故事数据没有问题，但是，我想为其他应用程序的用户提供一个超链接，以便单击以转到 Rally GUI 中的该用户故事（不使用任何 API）。

例如，使用 REST API 的用户故事的 URL 类似于：

```
https://www.rallydev.com/slm/webservice/1.30/hierarchicalrequirement/{ID} 
```

而用户用于在 Rally 中查看该故事的 URL 类似于：

```
https://www.rallydev.com/#/{ProjectID}d/detail/userstory/{ID} 
```

有没有办法从 REST API 获取用户故事的 GUI URL（Rally 的最终用户将使用的 URL）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:56:05.173

ProjectID 实际上是可选的，因此您也将通过如下链接进入详细信息页面：[https ://rally1.rallydev.com/#/detail/userstory/12345](https://rally1.rallydev.com/#/detail/userstory/12345)

但是，不保证此 url 格式不会更改。在新的 App SDK 2.0 中，我们将提供某种版本化的实用程序，用于为项目构建详细链接以解决此问题...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:50:00.277

如果您执行 GET，例如：

```
 https://rally1.rallydev.com/slm/webservice/1.30/hierarchicalrequirement/{ID}.js?fetch=Project,ObjectID 
```

您将得到如下结果：

```
{"HierarchicalRequirement": {"_rallyAPIMajor": "1", "_rallyAPIMinor": "30", "_ref": "https://rally1.rallydev.com/slm/webservice/1.30/hierarchicalrequirement/<<STORYID>>.js", "_objectVersion": "129", "_refObjectName": "Story Name", "ObjectID": <<STORYID>>, "Project": {"_rallyAPIMajor": "1", "_rallyAPIMinor": "30", "_ref": "https://rally1.rallydev.com/slm/webservice/1.30/project/<<STORYID>>.js", "_objectVersion": "2", "_refObjectName": "Project Name", "ObjectID": <<PROJECTID>>, "_type": "Project"}, "Errors": [], "Warnings": []}} 
```

然后，您可以从响应中提取 STORYID 和 PROJECTID。然后，您可以使用响应中的 Project ObjectID 和 Story ObjectID 将所需的 URL 拼接在一起：

[https://rally1.rallydev.com/#/](https://rally1.rallydev.com/#/) {ProjectID}d/detail/userstory/{ID}

# multidimensional-array - 在 systemverilog 中搜索打包+解包数组的替代方法

> ID：10538442
> 
> 赞同：1
> 
> 时间：2012-05-10T16:31:15.370
> 
> 标签：multidimensional-array, verilog, system-verilog

我有这种奇怪的情况，我目前正在这样做：

```
if (!this.randomize(delay) with {delay inside {strm};}) 
...... 
```

在哪里

```
rand bit [2:0] delay;
bit [15:0] strm [bit [15:0]]; 
```

现在我希望这个延迟从 0->....->7->0 等循环进入，但它应该满足它应该存在于 strm 中的条件。所以我想要类似的东西

```
while (delay not in strm) begin
delay+=1;
end 
```

除了遍历每个索引（2 ^ 16-1）之外，还有其他方法可以查找它是否存在于这个打包+解包数组中？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:40:11.377

如果您不知道，您将声明`strm`为关联数组（也称为哈希），其中键和数据都是 16 位值。

如果您想`strm`成为 16 位值的固定大小 2^16 条目数组，则声明为：

`bit[15:0] strm [2**16];`

使用关联数组，您可以使用它`array.exists(key)`来确定键是否在数组中。但这似乎不是您想要做的。

使用解包数组，您可以使用`inside`运算符来测试集合成员资格。但是我的模拟器（Incisive）在随机调用之外不喜欢这种用法。所以你可能需要自己搜索。但是，如果您先对其进行排序，则不必迭代整个数组。你可以用`array.sort()`.

我还要指出，您正在某种 16 位值数组中寻找 3 位值。这真的没有意义，所以你可能想澄清你的问题。

# c - 你知道计算 Unix 时间和日期的 C 宏吗？

> ID：10538444
> 
> 赞同：3
> 
> 时间：2012-05-10T16:31:23.327
> 
> 标签：c, static, unix-timestamp

我想知道是否有人知道/有一个 C 宏来从硬编码的日期和时间计算静态 Unix 时间，如下所示：

```
time_t t = UNIX_TIMESTAMP(2012, 5, 10, 9, 26, 13); 
```

我正在研究这个，因为我想要一个数字静态时间戳。这将在整个软件中完成数百次，每次都有不同的日期，我想确保它很快，因为它每秒会运行数百次。多次转换日期肯定会减慢速度（即调用 mktime() 比在适当位置编译静态数字要慢，对吧？）

[进行了更新以尝试使本段更清晰，2012 年 11 月 23 日]

**更新**

我想通过有关正在使用的流程的更多信息来澄清这个问题。当我的服务器收到请求时，对于每个请求，它都会启动一个新进程。该过程会不断使用新插件进行更新，并且此类更新通常需要数据库更新。这些必须只运行一次。要知道是否需要更新，我想使用 Unix 日期（这比使用计数器更好，因为计数器更有可能偶尔中断。）

因此，插件将接收更新信号并调用其 on_update() 函数。在那里我想做这样的事情：

```
void some_plugin::on_update(time_t last_update)
{
  if(last_update < UNIX_TIMESTAMP(2010, 3, 22, 20, 9, 26)) {
    ...run update...
  }
  if(last_update < UNIX_TIMESTAMP(2012, 5, 10, 9, 26, 13)) {
    ...run update...
  }
  // as many test as required...
} 
```

如您所见，如果我每次都必须计算 unix 时间戳，这可能代表每个进程有数千次调用，如果您每秒收到 100 次点击 x 1000 次调用，那么当您可以让编译器计算这些数字时，您浪费了 100,000 次调用在编译时一次。

将值放在静态变量中没有意义，因为此代码将在每个进程运行时运行一次。

请注意，last_update 变量会根据被点击的网站而变化（它来自数据库。）

**代码**

好的，我现在得到了代码：

```
// helper (Days in February)
#define _SNAP_UNIX_TIMESTAMP_FDAY(year) \
    (((year) % 400) == 0 ? 29LL : \
        (((year) % 100) == 0 ? 28LL : \
            (((year) % 4) == 0 ? 29LL : \
                28LL)))

// helper (Days in the year)
#define _SNAP_UNIX_TIMESTAMP_YDAY(year, month, day) \
    ( \
        /* January */    static_cast<qint64>(day) \
        /* February */ + ((month) >=  2 ? 31LL : 0LL) \
        /* March */    + ((month) >=  3 ? _SNAP_UNIX_TIMESTAMP_FDAY(year) : 0LL) \
        /* April */    + ((month) >=  4 ? 31LL : 0LL) \
        /* May */      + ((month) >=  5 ? 30LL : 0LL) \
        /* June */     + ((month) >=  6 ? 31LL : 0LL) \
        /* July */     + ((month) >=  7 ? 30LL : 0LL) \
        /* August */   + ((month) >=  8 ? 31LL : 0LL) \
        /* September */+ ((month) >=  9 ? 31LL : 0LL) \
        /* October */  + ((month) >= 10 ? 30LL : 0LL) \
        /* November */ + ((month) >= 11 ? 31LL : 0LL) \
        /* December */ + ((month) >= 12 ? 30LL : 0LL) \
    )

#define SNAP_UNIX_TIMESTAMP(year, month, day, hour, minute, second) \
    ( /* time */ static_cast<qint64>(second) \
                + static_cast<qint64>(minute) * 60LL \
                + static_cast<qint64>(hour) * 3600LL \
    + /* year day (month + day) */ (_SNAP_UNIX_TIMESTAMP_YDAY(year, month, day) - 1) * 86400LL \
    + /* year */ (static_cast<qint64>(year) - 1970LL) * 31536000LL \
                + ((static_cast<qint64>(year) - 1969LL) / 4LL) * 86400LL \
                - ((static_cast<qint64>(year) - 1901LL) / 100LL) * 86400LL \
                + ((static_cast<qint64>(year) - 1601LL) / 400LL) * 86400LL ) 
```

警告：不要使用这些宏来动态计算日期。它比 mktime() 慢。话虽如此，如果您有一个硬编码的日期，那么编译器将在编译时计算 time_t 值。编译速度较慢，但​​一遍又一遍地执行速度更快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:56:30.943

公式在 POSIX 中：

```
tm_sec + tm_min*60 + tm_hour*3600 + tm_yday*86400 +
    (tm_year-70)*31536000 + ((tm_year-69)/4)*86400 -
    ((tm_year-1)/100)*86400 + ((tm_year+299)/400)*86400 
```

来源：XBD 纪元以来的 4.15 秒 [http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:41:19.267

如果您测量它*实际上*太慢了，那么这是一个实用的简单解决方案：

```
void myfun() {
  static time_t t = 0;
  if (t == 0)
    t = slow_unix_timestamp(2012, 5, 10, 9, 26, 13);
} 
```

现在只计算一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:44:48.267

不是宏，但时间戳只会初始化一次，后续调用`get_timestamp()`将简单地成为内存访问。您在运行时支付初始化费用，但只`get_timestamp()`调用第一次，因为您知道您可以在程序的早期初始化它并允许后续调用有效地“免费”。

```
time_t initialize_timestamp(int y, int m, int d, int h, int min, s)
{
   tm t;
   t.tm_year = y - 1900;
   t.tm_mon = m;
   t.tm.mday = d;
   t.tm_hour = h;
   t.tm_min = min;
   t.tm_sec = s;

   return mktime(&t);
}

time_t get_static_timestamp()
{
   static time_t ts = initialize_timestamp(2012, 5, 10, 9, 26, 13);
   return ts;
} 
```

# mysql - 如何在 MS SQL 中为具有相同数据的两列编写 ms sql 代码

> ID：10538447
> 
> 赞同：0
> 
> 时间：2012-05-10T16:31:31.597
> 
> 标签：mysql, ms-access-2010, django-mssql

这里有两个表。

```
Table1
SchoolID   Teacher_name   comm_yr
01          John            1990
02          Heley           1995
03         George          1994
04          Chris           1998
05          Mary            1993

Table2
School_ID   Student_name
01        Heley
02        Chris
03        Chris
04        Mary
05        Heley 
```

我想列出每个学生作为学生的年份和每个学生作为老师的年份。

```
 SELECT Teacher_name, comm_yr As Teacher_comm_yr, comm_yr As Student_comm_yr
FROM Table1 INNER JOIN Table2
WHERE comm_yr (SELECT comm_yr As Teacher_comm_yr From Table1
Where teacher_name=student_name); 
```

表显示

```
Teacher_name    Teacher_comm_yr  Student_comm_yr
John                   1990 1990
Heley                 1995  1995
George                 1994 1994
Chris                  1998 1998
Mary                    1993    1993 
```

但我想要的是

```
Teacher_name    Teacher_comm_yr Student_comm_yr
John               1990 
Heley               1995     1990
George              1994    
Chris               1998      1995
Chris               1998     1994
Mary                1993     1998 
```

但我只能在同一年执行你能帮忙吗..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:23:44.970

一些笔记。

```
SELECT 
  t1.Teacher_name, 
  t2.Student_name, 
  t1.comm_yr AS Teacher_comm_yr, 
  t1.comm_yr AS Student_comm_yr
FROM Table1 AS t1 
LEFT JOIN Table2 AS t2 
ON t2.student_name = t1.teacher_name; 
```

根据您的数据，我不明白 Chris 是从哪里得到 1995 年的。

那么怎么样：

```
SELECT t.SchoolID,
       t.Teacher_name,
       t.comm_yr,
       q.SchoolID,
       q.Teacher_name,
       q.Student_name,
       q.comm_yr
FROM   table11 t
       LEFT JOIN (SELECT a.SchoolID,
                         a.Teacher_name,
                         b.Student_name,
                         a.comm_yr
                  FROM   table11 AS a
                         INNER JOIN table22 AS b
                           ON a.SchoolID = b.School_ID) AS q
         ON t.Teacher_name = q.Student_name; 
```

我已经包含了比必要更多的字段（列）来测试这个想法。

# objective-c - 运行一次方法后应用程序崩溃

> ID：10538448
> 
> 赞同：0
> 
> 时间：2012-05-10T16:31:32.657
> 
> 标签：objective-c, c, cocoa

可能是一个愚蠢的错误，但我只需要知道为什么我的应用程序在按下按钮后会关闭。它会在一两秒钟内给出所需的答案，然后关闭。为什么？然后它带我到这个：

```
1{
2    @autoreleasepool {
3        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
4    }
5} 
```

第 3 行以绿色阴影显示，右侧显示“线程 1：信号 SIGBART”。

这是代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    //dismiss the keyboard
    [textField resignFirstResponder];
    return YES;

}

@synthesize go;
@synthesize start;
@synthesize calc;
@synthesize answer;
@synthesize input;
@synthesize count;

- (void)updateTipTotals
{

    int fuzzy = [input.text intValue];

    //handle divide by 0
    if (fuzzy %3 == 0 && fuzzy % 7 == 0) {
        answer.text = @"Fuzzy Ducky";
    }else {
        if (fuzzy% 7 == 0) {
            answer.text = @"Ducky";
        }
        else {
            if (fuzzy % 3 == 0) {
                answer.text = @"Fuzzy";
            }else {
                answer.text = input.text;
            }
        }
    }

}

-(IBAction)calcTouchDown:(id)sender{

    [self updateTipTotals];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //this informs the text fields the controller is their delegate
    input.delegate = self;
    start.delegate = self; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:35:16.430

运行前尝试在 Xcode 中设置异常断点。然后它应该突出显示实际导致崩溃的代码行。

![在此处输入图像描述](../Images/493dc84740eb7e464bc209494a4a2b13.png)

![在此处输入图像描述](../Images/c82966fe9fdb2afa2d22e2b44bbdbd72.png)

# jquery - fancybox 结合 jQuery-Mobile 可以在桌面浏览器上工作，但不能在移动设备上工作？

> ID：10538451
> 
> 赞同：1
> 
> 时间：2012-05-10T16:31:49.067
> 
> 标签：jquery, jquery-mobile, fancybox, overlay

我正在开发一个可以在移动设备（Android、iPhone 等）和台式计算机上轻松使用的私人网页 - 包含一些 jQuery-PlugIns 但没什么特别的。我到处使用每个组件的最新可用版本！

首先，fancybox 即使在台式计算机上也存在开箱即用的 jQueryMobile 问题。由于我桌面上的调试可能性，可以在几个小时后定位、分析和修复问题。

之后一切似乎都很好，我将项目发布到移动设备上，并意识到fancybox 的行为很奇怪。

我总是得到

> 无法加载请求的内容。请稍后再试。

单击fancyBox-超链接时。所以我同时隔离了这个问题：它与 jQueryMobile & fancybox 有关。

我发布了两个测试页，您可以在其中研究布局：

1.  一个简单的**不工作的** [页面](http://www.pixelfinger.de/testfb/test1.html)，只有一个使用 jQueryMobile**和**fancyBox的超链接
2.  **相同但工作** 的[页面](http://www.pixelfinger.de/testfb/test2.html)，但没有 jQueryMobile（只有 fancyBox）

**奇怪的是，两者都在台式电脑和不同的浏览器上工作，而只有第二个在我的安卓手机上工作**。因此，这也使我无法调试它（不知道怎么做！）。

另一方面，我不能在不丢失页面的移动设备功能的情况下放弃 jQueryMobile，可以吗？

有谁知道这个问题是关于什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:12:25.103

我有同样的问题，使用最新的 JQM 构建工作 [http://jsfiddle.net/PH9qM/show/](http://jsfiddle.net/PH9qM/show/)

# regex - 如何使用正则表达式在记事本++中的模式之前和之后插入？

> ID：10538454
> 
> 赞同：1
> 
> 时间：2012-05-10T16:31:58.677
> 
> 标签：regex, notepad++

我有一个很大的 txt 文件，有很多字符串，比如“string-I-want-to-change”，现在我需要将它们全部更改为：

```
string-insert-before-string-I-want-to-change-string-insert-after 
```

我的意思是，找到一个模式，在模式之前和之后插入一些东西，但只是保留模式。我尝试了很多方法，他们只是用我想要插入的字符串替换了模式。

我尝试了这里的方法 [Using RegEX To Prefix And Append In Notepad++](https://stackoverflow.com/questions/283608/using-regex-to-prefix-and-append-in-notepad)

和这里

[正则表达式在数字前后添加字符](https://stackoverflow.com/questions/8624018/regular-expression-to-add-characters-before-and-after-numbers)

但它们似乎不适用于我的 notepad++ 版本，我使用的是最新版本 6.1.2

有人请帮助我:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:25:08.070

这对你有用。

`find : (string-i-want-to-change)`

`replace : string-in-front-of-it-\1-string-after-it`

测试字符串：

`other-strings-came-in-front-of-it-string-i-want-to-change-and-it-continues-like-that`

输出 ：

`other-strings-came-in-front-of-it-string-in-front-of-it-string-i-want-to-change-string-after-it-and-it-continues-like-that`

# scala - 如何迭代 playframework 2 scala 应用程序中的路由？

> ID：10538455
> 
> 赞同：3
> 
> 时间：2012-05-10T16:32:02.033
> 
> 标签：scala, routes, playframework-2.0

playframework 2 scala 中 play.mvc.Router.routes 的等价物是什么？

在 playframework 1.x 中，我可以迭代控制器中的可用路由：

```
for(Route route:Router.routes){
    ...
} 
```

我将如何使用 playframework 2 scala 做到这一点？

未找到的[开发模式模板](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/defaultpages/devNotFound.scala.html)似乎能够遍历它们，但我需要在控制器中执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T18:11:47.733

Play 2.0 无法做到这一点。

路由被定义为`PartialFunction[RequestHeader, Handler]`，没有办法知道这个函数的域。

尽管如此，如*not found*模板所示，您可以检索有关应用程序路由的一些信息：Play 2.0 路由器生成一个`documentation`字段，返回应用程序的每个路由、其 HTTP 方法（`GET`、`PUT`等）、其路径模式和最后是写入`conf/routes`文件中的调用。

路由器会生成一个`Routes`对象，该对象在您的 Play 应用程序启动时加载，您可以按如下方式访问它：

```
for {
  routes <- play.api.Play.current.routes.toList
  (method, pattern, call) <- routes.documentation
} yield {
  …
} 
```

# asp.net-mvc - MVC：设置名称属性 w/Helper

> ID：10538456
> 
> 赞同：1
> 
> 时间：2012-05-10T16:32:09.053
> 
> 标签：asp.net-mvc

我在 MVC3 应用程序中遇到一种情况，我希望能够在一些由帮助程序（DropDownList）生成的 html 上设置 name 属性。

看来这是不可能的。显然，助手会默默地覆盖您为传递给助手的 html 属性对象中的 name 属性指定的任何值。

在我浪费太多时间尝试与现有助手一起工作之前，我想确认一下。

而且，顺便说一句，如果设计上不可能……我认为这是 MVC 框架中的一个愚蠢的限制。是的，我知道分配错误的名称属性会破坏自动模型绑定。但是当我需要的时候，我应该能够做到这一点。毕竟，我总是可以使用我选择的任何名称属性来编写原始 html。帮手应该提供帮助，而不是束手无策。

**编辑讨论编辑器模板是否维护导航上下文**

Darin，我正在使用编辑器模板（我通常使用术语“部分”，因为编辑器模板是一种特殊的部分视图）。

编辑器模板*确实*修改了 HtmlFieldPrefix - 这就是我注意到我遇到问题的方式:)。我正在使用这样的电话：

```
// call in higher level partial - context is 'eae'
@Html.EditorFor(m => m.Value)
...
// inside editor template for typeof(Value) context is 'eae:Value' 
```

需要这种上下文转换来保持默认绑定机制正常工作。我使用了一种不同的方法，我希望上下文在整个调用链中保持固定（即，当执行深入到更深的部分时，我希望上下文保持不变）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:36:39.753

这是设计使然。HTML 帮助程序不允许您覆盖该`name`属性。它们根据您的视图模型生成名称，以便在提交表单时，默认模型绑定器能够根据完善的约定正确绑定值。

> 而且，顺便说一句，如果设计上不可能……我认为这是 MVC 框架中的一个愚蠢的限制。

您可以在 MS Connect 上打开一张票，并希望这可以在框架的未来版本中改变。在此之前，您还可以编写自己的自定义帮助程序，允许您在需要此类功能的情况下覆盖 name 属性。就个人而言，到目前为止我从来没有需要它，但我相信你有正当的理由。另一种可能性是在服务器上编写自定义模型绑定器。

# ios - renderInContext: 可以保持圆角半径和阴影吗？

> ID：10538460
> 
> 赞同：5
> 
> 时间：2012-05-10T16:32:25.557
> 
> 标签：ios, uilabel, image-rendering

我有一个带有圆角和阴影的自定义 UILabel。我正在使用 CALayer 上的属性来实现这一点。接下来，我尝试使用 renderInContext: 将其保存为 UIImage。圆角保持不变，但出现黑色背景和松散的阴影。

![渲染图像](../Images/2d1609ced9ac9c4678464609cc4f9a54.png)

关于将 UILabel 渲染为图像但保持阴影和圆角的任何想法？

这是我用来呈现标签的代码：

```
UIGraphicsBeginImageContextWithOptions(label.bounds.size, YES, 0);
[label.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:51:31.913

您可以通过将 UIGraphicsBeginImageContextWithOptions 中的第二个参数更改为“NO”来获得圆角。

# php - 用户权限树：如何到达那里？

> ID：10538463
> 
> 赞同：4
> 
> 时间：2012-05-10T16:32:30.097
> 
> 标签：php, mysql, security, permissions, encapsulation

我正在实施一个产品库存管理网站，女巫有很多层次的权限。它有一个拥有各种权限的管理员，然后是 2、3、4 级等......将拥有更少的权限。但特定用户可以拥有特殊权限，例如创建用户或读取有关其他用户的信息。

考虑以下场景：

```
 * admin inserted user1, user2 and user3.
 * user1 inserted user4 and user5 under his supervision.
 * user1 edited user4's permission so: user4 can see all user5's
   activity, but user5 cannot see user4's activity.
 * user5 inserted user6 and user7 and can see all their activity, but
   user4 cant!
 * user2 is in the same "level" and user1 and user3, but he cant see
   their sublevels activity. 
```

如何使这个权限树隐含在我的数据库中？

权限树的图形方案：

![在此处输入图像描述](../Images/3e00b671363f49f17089caa6ff7629af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:47:24.833

首先，用户表将是 {id, username, password, ..., owner}，owner 是创建帐户的用户 id 这将创建一个用户树。

然后你需要一个 {userid, updatepriviledgeid, deleteuserid, updateuserid, viewid, ..., wholetree, ...} 形式的 ACL 表，每个条目都用于主表中的用户 ID（这不是主键) 其余的，例如 updatepriviledgeid 将意味着该用户可以更新用户信息。每条记录都有一个关联的 wholetreeupdtae 作为布尔值，用于简化用户是否有权访问整个树

# objective-c - 在 Objective-C 中删除动态创建的对象时，我应该将什么设置为 nil？

> ID：10538468
> 
> 赞同：0
> 
> 时间：2012-05-10T16:32:42.827
> 
> 标签：objective-c, ios, memory, uiview, null

简单的问题警报，但我想确定我不是愚蠢的。

在我的 iPad 应用程序中，我动态创建了一个 UIView，并用 UIButtons、UIImageViews、有时是 MPMoviePlayerController、有时是 UIImageView 和一些 UIImages 作为动画填充它。

一段时间后，我将视图从屏幕上移除并丢弃。

问题是： **我应该将这些对象中的任何一个设置为零吗？**

我在分配后释放所有内容，并且没有任何泄漏。但是我的应用程序在内存不足后最终崩溃了。我建立的这些观点中的每一个似乎都潜伏在记忆中的某个地方。

任何帮助，非常感谢。

邓克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:37:17.567

没有代码或不知道您是否使用 ARC 很难评论（猜测不是，因为您说“释放”）。

1.  进行分析并修复它标记的每个问题。它非常善于告诉你你是否正确地保留/释放
2.  使用泄漏仪器查找泄漏
3.  如果您没有更多泄漏，但仍然崩溃，请打开 Zombies 并确保您不会过早发布任何内容

将变量设置为 nil 不会释放内存。如果你有一个`@property`用 声明的`(retain)`，自动生成的设置器将使它，因此将属性设置为 nil 将释放旧值。

`dealloc`任何具有属性的类都需要对作为指向保留对象的指针的所有属性执行此操作。对于 UIViewControllers，您还希望在`viewDidUnload`IBOutlet 属性中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:36:02.733

当您使用 ARC 时，当您添加`UIView`另一个的 as 子视图时`UIView`，保留计数会增加。在您“removeFromSuperview”时，它会减少并被释放。在非 Arc 环境中，在分配它并将其添加到 UIView 后，retain 将为 2，但随后您释放它，因此它将回到 1。因此，它们之间始终存在平衡。要检查发生了什么，**您应该使用 Instruments**来查明问题。

* * *

只有当您拥有 iVar 的 @property（用于保留）时，“nil”才有意义。这是为什么？因为它将释放旧值并将新值设置为传递的值（在本例中为 nil）。你可能认为这个问题是相关的，`UIViews`但可能是别的东西。这就是为什么我建议你使用 Instruments。

# dotnetnuke - 将 DotNetNuke 从本地移动到主机

> ID：10538469
> 
> 赞同：1
> 
> 时间：2012-05-10T16:32:46.367
> 
> 标签：dotnetnuke

我已经在我的本地驱动器上安装了 DotNetNuke 5.6，现在我想将它移动到主机以运行网站。我应该执行哪些步骤来运行我的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T04:04:53.420

如果您没有对本地主机上的站点进行任何操作，那么让您的主机为您安装一个干净的 DotNetNuke 副本可能是最简单的。许多主机会为您执行此操作或提供自动化工具以通过其控制面板进行安装。

为了帮助您移动 DotNetNuke 站点，我们确实需要更多详细信息才能提供完整的答案（您的托管公司应该能够为您提供指导），但基础是：

```
1a. If you are just using SQL Express on the local host and plan to
use it under SQL Express on the host as well, you'll just need to
FTP up the DB files along with all the other files. 
1b. If you'll be
running the DB under a full SQL Server: Backup your database on your
localhost, copy the DB backup to your host, and restore the database
to the database server provided by the host.
2\. Create a blank website on the host.
3\. FTP all site files from your localhost to the root directory of your new website. 
4\. Make sure the Network Service account has Full Access permissions to the root directory and all sub-directories.
5\. If you're using a full SQL Server, you'll need to update connection strings in the web.config to point to the restored DB and
ensure you're using a user/login with read/write rights to the DB.
6\. Browse to the site. 
```

那应该这样做。

# java - 在 AlertDialog 中更改字体

> ID：10538482
> 
> 赞同：5
> 
> 时间：2012-05-10T16:33:16.820
> 
> 标签：java, android, android-alertdialog

有人可以建议一种方法来更改动态创建的 AlertDialog（在标题和正文中）中的字体吗？我尝试了很多方法，但都没有奏效。代码是：

```
public void onClick(View v) {

    new AlertDialog.Builder( c )
    .setTitle( data.eqselect )
    //  .set 
    .setIcon(R.drawable.icon)
    .setMessage(Threads.myData[0] )
    .setNegativeButton( "Close", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            Log.d( "AlertDialog", "Negative" );
        }
    } )
    .show();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T16:42:07.603

您应该从布局中设置自定义视图，而不是设置警报对话框的文本。在你这样做之前，修改你的视图的字体。

```
TextView mycontent = (TextView) findViewById(R.id.yourid);
         mycontent.setTypeface(Typeface.createFromAsset(getAssets(), "font.ttf") 
```

并设置您的警报对话框的视图，`.setView(mycontent)`而不是调用`setMessage()` 虽然据我所知这不会改变您的标题。

**更新** 我看到你无法理解我在说什么，所以这里有一个完整的例子

```
TextView content = new TextView(this);
         content.setText("on another font");
         content.setTypeface(Typeface.SANS_SERIF);

//Use the first example, if your using a xml generated view

     AlertDialog.Builder myalert = new AlertDialog.Builder(this);
         myalert.setTitle("Your title");
         myalert.setView(content);
         myalert.setNeutralButton("Close dialog", null);
         myalert.setCancelable(true);
         myalert.show(); 
```

这是使用我们刚刚创建的 TextView，它不会有边距等。如果您使用一种易于创建的布局文件形式，则可以自定义所有这些设置，尽管您可以在此示例中以代码形式执行此操作。

当然，用您想要的字体替换字体。xml 中的示例 TextView 可能是：

```
<TextView
        android:id="@+id/yourid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:text="your content" /> 
```

# c# - 在函数完成时显示加载动画

> ID：10538492
> 
> 赞同：0
> 
> 时间：2012-05-10T16:33:54.980
> 
> 标签：c#, javascript, asp.net

我的 .aspx.cs 代码中有一个函数，它需要很长时间才能完成处理，直到我想显示一个很酷的加载动画。
我查看了一些早期的帖子，但要么这些帖子对我不起作用，要么有特定于页面加载场景的解决方案（在函数完成时不加载）。

我想正确的方法是在 main 函数启动之前触发一个 Javascript startLoader() 函数（这需要很长时间），然后从 .aspx.cs 本身调用一个 stopLoader() 以在功能结束。有什么建议如何实施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:39:17.317

如果你真的想做，那么唯一的办法就是webworkers。您可能已经听说过它们，或者如果没有，我强烈建议您看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:40:11.467

是的，在按钮的 OnCliencClick 上触发 startLoader() 或您用来触发服务器端事件的任何元素，并在进程结束时从服务器端调用 stopLoader()。像这样的东西：

```
//rest of the server-side code above ...
Page.ClientScript.RegisterStartupScript(this.GetType(), "someKey", "stopLoader();", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:06:51.047

如果您不介意浏览器在此期间没有响应，那么最简单的方法是使用动画 gif：

*   [活动指标](http://mentalized.net/activity-indicators/)
*   [ajaxload.info](http://www.ajaxload.info/#preview)
*   [网页脚本实验室](http://www.webscriptlab.com/)

诀窍是在开始处理时显示图像，并在完成时隐藏它。您可以在 img 中显示它，并使用 jQuery 或任何您想要显示/隐藏它的东西。

如果您需要浏览器保持响应，请使用 Web Workers。但请注意，一些较旧的浏览器不支持它。[请参阅此参考](https://developer.mozilla.org/En/Using_web_workers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:40:51.673

是的，我已经在 ASP.NET Web From（不是 ASP.NET MVC 解决方案）中完成了这项工作。您需要提供 OnSubmit 客户端事件处理程序。它基本上分为三个部分：Javascript，HTML Div，以及后面的一行代码：

Javascript：

```
 function ShowLoading(e) {
        // var divBg = document.createElement('div');
        var divBg = document.getElementById('blockScreen');
        var divLoad = document.createElement('div');
        var img = document.createElement('img');

        img.src = 'images/ajax-loader.gif';
        divLoad.setAttribute("class", "blockScreenLoader");
        divLoad.appendChild(img);

        divBg.appendChild(divLoad);

        document.getElementById('blockScreen').style.display = 'block';

        // These 2 lines cancel form submission, so only use if needed.
        //window.event.cancelBubble= true;
        //e.stopPropagation();
    }

    function HideLoading() {
        //alert('hideloading');
        document.getElementById("form1").onsubmit = null;
        document.getElementById('blockScreen').style.display = 'none';
        //alert('done');
    } 
```

添加以下DIV

```
 <div id="blockScreen" class="blockScreen" style="display:none">&nbsp;</div> 
```

最后，在后面的代码中将以下内容添加到 Page_Load 中。

```
 Page.ClientScript.RegisterOnSubmitStatement(this.GetType(), "submit", "ShowLoading()"); 
```

现在，您所有的页面回发基本上都必须调用 onsubmit 事件。它将在页面回发完成之前显示动画。

# ruby-on-rails - Rails 日志消息：缓存：[POST /action] 无效，通过

> ID：10538501
> 
> 赞同：8
> 
> 时间：2012-05-10T16:34:31.080
> 
> 标签：ruby-on-rails

我正在使用 jruby 和 trinidad 运行 rails 3，并且不断看到这些日志消息：

```
INFO http-bio-3001-exec-15 jruby.rack - cache: [POST /something] invalidate, pass 
```

这到底是什么意思？此外，控制器中的代码也永远不会运行。这是缓存的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T01:29:49.117

每当 Rails 收到一个 POST 请求时，它都会执行一些安全检查以确保该请求是“有效的”。检查是通过解析[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)真实性令牌来执行的，这些令牌必须与 POST 请求中的表单一起提交。

如果您无法编辑向您的 rails 应用程序发出请求的表单，您可以跳过逐个控制器的检查：

```
class Foo < ApplicationController
    skip_before_filter :verify_authenticity_token 
```

或者您也可以为控制器中的特定方法选择这样做：

```
class Foo < ApplicationController
    skip_before_filter :verify_authenticity_token, :only => [:create] 
```

你可以[在这里阅读](http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T18:14:03.450

缓存：[POST /something] 无效，通过

这表示发出了一个 POST 请求并且无效，通过意味着缓存不能用于这种类型的请求。您将获得无效，通过任何更改请求（POST、PUT、DELETE 等）

# android - 在android中读取特定联系人

> ID：10538504
> 
> 赞同：0
> 
> 时间：2012-05-10T16:34:43.187
> 
> 标签：android

我想从联系人中读取特定联系人，比如“john”，并显示该特定联系人（工作、手机、家庭）中的所有电话号码。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:15:03.347

这也可能有帮助：

[http://developer.android.com/reference/android/provider/ContactsContract.Data.html](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)

见查询部分；它有这个代码：

### 查找给定联系人的给定类型的所有数据

```
Cursor c = getContentResolver().query(Data.CONTENT_URI,
      new String[] {Data._ID, Phone.NUMBER, Phone.TYPE, Phone.LABEL},
      Data.CONTACT_ID + "=?" + " AND "
              + Data.MIMETYPE + "='" + Phone.CONTENT_ITEM_TYPE + "'",
      new String[] {String.valueOf(contactId)}, null); 
```

# thumbnails - 存储多个头像

> ID：10538506
> 
> 赞同：0
> 
> 时间：2012-05-10T16:34:45.430
> 
> 标签：thumbnails, storage, avatars

我想制作更大的应用程序，为每个注册用户存储多个头像（同一图像的不同大小）。
我应该将原始图像和调整大小的头像存储在同一目录中（small_avatar 和 big_avatar 存储在同一目录中）还是应该将不同大小的图像保存在匹配的目录中（small_avatar 进入 small_avatar 目录，big_avatar 进入 big_avatar 目录等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:49:46.703

我不认为会有任何区别，但是如果您尝试检查一些世界上最大的网站，您会发现它们都保存在同一个目录中，只是前缀不同。我的猜测是节省了一些加载时间，但我严重怀疑它对用户或服务器是否重要。

# c# - 两个日期之间的天、小时、分钟、秒

> ID：10538507
> 
> 赞同：58
> 
> 时间：2012-05-10T16:34:46.200
> 
> 标签：c#, .net, datetime

我有两个约会，一个比另一个少。我想创建一个这样的字符串

“0天0小时23分18秒”

表示两个日期之间的差异。我怎样才能得到这个字符串的这些元素？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-05-10T16:36:26.790

[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)是您需要的对象：

```
TimeSpan span = (DateTime.Now - DateTime.Now);

String.Format("{0} days, {1} hours, {2} minutes, {3} seconds", 
    span.Days, span.Hours, span.Minutes, span.Seconds); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-10T16:36:20.593

当你[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)从另一个中减去一个时，你会得到一个[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)实例，它公开了这些值。

```
TimeSpan diff = DateTime.Now - DateTime.Today;
string formatted = string.Format(
                       CultureInfo.CurrentCulture, 
                       "{0} days, {1} hours, {2} minutes, {3} seconds", 
                       diff.Days, 
                       diff.Hours, 
                       diff.Minutes, 
                       diff.Seconds); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T16:39:12.030

使用时间跨度

```
DateTime startTime = DateTime.Now;

DateTime endTime = DateTime.Now.AddSeconds( 75 );

TimeSpan span = endTime.Subtract ( startTime );
Console.WriteLine( "Time Difference (seconds): " + span.Seconds );
Console.WriteLine( "Time Difference (minutes): " + span.Minutes );
Console.WriteLine( "Time Difference (hours): " + span.Hours );
Console.WriteLine( "Time Difference (days): " + span.Days );

String yourString = string.Format("{0} days, {1} hours, {2} minues, {3} seconds",
    span.Days, span.Hours, span.Minutes, span.Seconds); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-10T16:46:21.527

使用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)类，当您减去日期时会得到该类。

您可以使用[标准](http://msdn.microsoft.com/en-us/library/ee372286.aspx)或[自定义](http://msdn.microsoft.com/en-us/library/ee372287.aspx)格式字符串格式化输出。

> “0天0小时23分18秒”

可以有类似的东西：

```
TimeSpan ts = DateTime.Now - DateTime.Today;
Console.WriteLine(
   string.Format("{0:%d} days, {0:%h} hours, {0:%m} minutes, {0:%s} seconds", ts)
); 
```

IMO，它更干净，更容易使用`string.Format`，而不必转义格式字符串中的单词（如果您刚刚使用过，则需要`.ToString`）或手动构建它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-12T00:11:53.510

不要忘记，如果您希望此计算可移植，则需要将其存储为 UTC，然后在显示时将其转换为本地时间。作为一般规则，将日期存储为 UTC 并转换为本地时间以进行演示。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-10T16:36:29.803

您是否尝试过使用

```
TimeSpan() 
```

那当然可以做你想做的事

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-10T16:40:26.857

这样的事情怎么样？

```
 TimeSpan diff = dateTimeNew - dateTimeOld;
    string output = string.Format("{0} days, {1} hours, {2} minues, {3} seconds", diff.Days, diff.Hours, diff.Minutes, diff.Seconds);
    Console.WriteLine(output); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-10T16:40:32.107

```
 DateTime myDay = DateTime.Now;
    DateTime otherDate = DateTime.Now.AddYears(1);
    var test = otherDate.Subtract(myDay);
    Console.WriteLine("Days:" + test.Days + "Hours:" + test.Hours +"Minutes" +  test.Minutes +"Seconds" + test.Seconds); 
```

这里的测试是 TimeStamp 类型

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-03-22T12:16:49.533

```
TimeSpan diffTime = dateTimeNew -PreviousDate;
int days=diffTime.Days;
int hours=diffTime.Hours;
int minutes=diffTime.Minutes;
int seconds=diffTime.Seconds; 
```

# java - JNA Macosx 加载 libXY.so 而不是 libXY.dylib

> ID：10538509
> 
> 赞同：0
> 
> 时间：2012-05-10T16:34:51.283
> 
> 标签：java, macos, jna, dylib

我正在尝试通过 JNA 加载共享对象库

该文件名为 libLIBNAME.so 我的代码如下所示：

```
Native.loadLibrary("LIBNAME", SomeInterface.class); 
```

但每次我执行它，我得到

> 无法加载库“LIBNAME”：dlopen（libLIBNAME.dylib，9）：找不到图像

我如何告诉 JNA 加载 xxx.so 而不是 xxx.dylib？

我还尝试通过仅传递参数将 .so 文件包装在 .dylib 中，但显然没有运气

设置从 libLIBNAME.so 到 libLIBNAME.dylib 的符号链接会导致：

> 无法加载库“LIBNAME”：dlopen(/path..../libLIBNAME.dylib, 9)：找不到合适的图像。确实找到了：/path..../libLIBNAME.dylib：未知文件类型，前八个字节：0x62 0x6F 0x6F 0x6B 0x00 0x00 0x00 0x00

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:31:14.487

顾名思义，`Native.loadLibrary()`需要一个在其运行的平台上本地的库——为另一个平台编译的库不适合。我不确定你的库文件是什么类型的文件，但 dyld 报告的前几个字节（62 6f 6f 6b = "book"？）表明它绝对不是 Mac OS X dylib。

# php - 获取满足条件php的条目总数

> ID：10538510
> 
> 赞同：1
> 
> 时间：2012-05-10T16:34:58.177
> 
> 标签：php, mysql, sql, count

我有一个数据库，其中包含不同地区的渔业。我正在使用以下命令：

```
 $sql ="SELECT region FROM table WHERE region='Fife'";
    $res = mysql_query($sql) or die(mysql_error());
    while($row = mysql_fetch_assoc($res)){
        $total = array ($sql);
        echo count($total); 
```

这给了我 (111111111111111) 作为输出。但是我正在寻找它返回（15）。目前只有 15 个与“Fife”匹配的条目

谁能建议我如何改进我的代码以获得所需的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:36:59.690

使用 MySQL 的[`count()`](http://www.tizag.com/mysqlTutorial/mysqlcount.php)：

```
$sql ="SELECT count(*) AS total FROM table WHERE region='Fife'";
$res = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_assoc($res);
echo $row['total']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:37:58.910

```
$sql ="SELECT region FROM table WHERE region='Fife'";
    $res = mysql_query($sql) or die(mysql_error());
$total = array();
while($row = mysql_fetch_assoc($res)){
$total[] = array ($sql);
}
echo count($total); 
```

如果你想保留记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:38:37.427

您实际上可以在 SQL 中进行计数，这要快得多。

```
$sql ="SELECT COUNT (*) FROM table WHERE region='Fife'";
$c = mysql_query($sql) or die(mysql_error());
print $c; 
```

# netty - 支持 httpstaticfileserverhandler 示例中的“Transfer-Encoding:chunked”

> ID：10538517
> 
> 赞同：2
> 
> 时间：2012-05-10T16:35:28.087
> 
> 标签：netty

我需要能够使用分块编码来模拟 http 响应。Netty 是能够在高负载下模拟强大可扩展性的明显选择。但是，当响应标头包含标头时

`Transfer-Encoding: chunked`

请求客户端收到响应标头，但从未收到任何内容。

从演示响应 HTTPS 的 Netty 示例中，我将其稍微更改为

```
 if (ch.getPipeline().get(SslHandler.class) != null || response.getHeader("Transfer-Encoding").equals("chunked")) 
 {
    writeFuture = ch.write(new ChunkedFile(raf, 0, fileLength, 8192));
 } else {
    use FileRegion ....
 }

 if (!isKeepAlive(req)) {
   outboundFuture.addListener(ChannelFutureListener.CLOSE);
 } 
```

因此，我希望 chunkedFile 由 ChunkedWriteHandler 处理，并且响应可以毫无问题地发送，但我可能会忽略一些东西。

管道匹配 netty 示例中的处理程序和顺序

```
 pipeline.addLast("decoder", new HttpRequestDecoder());
 pipeline.addLast("aggregator", new HttpChunkAggregator(65536));
 pipeline.addLast("encoder", new HttpResponseEncoder());
 pipeline.addLast("chunkedWriter", new ChunkedWriteHandler());

 pipeline.addLast("handler", new Handler()); 
```

网络堆栈跟踪：

```
java.io.IOException: An existing connection was forcibly closed by the remote host
    at sun.nio.ch.SocketDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:33)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:72)
    at sun.nio.ch.IOUtil.write(IOUtil.java:28)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
    at org.jboss.netty.channel.socket.nio.SocketSendBufferPool$PooledSendBuffer.transferTo(SocketSendBufferPool.java:241)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.write0(AbstractNioWorker.java:476)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:426)
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:127)
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:63)
    at org.jboss.netty.channel.Channels.write(Channels.java:733)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:276)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleDownstream(ChunkedWriteHandler.java:120)
    at org.jboss.netty.channel.Channels.write(Channels.java:712)
    at org.jboss.netty.channel.Channels.write(Channels.java:679)
    at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:245)
    at nettyexample.Handler.messageReceived(Handler.java:93)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:141)
    at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:111)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndFireMessageReceived(ReplayingDecoder.java:600)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:584)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:445)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
java.nio.channels.ClosedChannelException
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.discard(ChunkedWriteHandler.java:168)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:287)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleDownstream(ChunkedWriteHandler.java:120)
    at org.jboss.netty.channel.Channels.write(Channels.java:712)
    at org.jboss.netty.channel.Channels.write(Channels.java:679)
    at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:245)
    at nettyexample.Handler.messageReceived(Handler.java:93)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:141)
    at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:111)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndFireMessageReceived(ReplayingDecoder.java:600)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:584)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:445)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T02:17:47.370

看看这个线程：[如何正确使用 ChunkedStream](https://stackoverflow.com/questions/9027322/how-to-use-chunkedstream-properly)

引用回复...

*发送任意分块数据时，必须先发送一个新的 DefaultHttpResponse（仅限一次）：*

```
HttpResponse res = new DefaultHttpResponse();
res.setChunked(true);
res.setHeader(Names.TRANSFER_ENCODING, Values.CHUNKED);
channel.write(res); 
```

*然后，只要您想使用任意块写入通道，请调用：*

```
HttpChunk chunk = new DefaultHttpChunk(ChannelBuffers.wrappedBuffer(str.getBytes(CharsetUtil.UTF_8)));
channel.write(chunk); 
```

确保你有`setChunked`对象`HttpResponse`。

# wolfram-mathematica - 如何安排 Mathematica 笔记本每天在同一时间运行？

> ID：10538521
> 
> 赞同：1
> 
> 时间：2012-05-10T16:35:39.693
> 
> 标签：wolfram-mathematica, mathematical-optimization

我必须每天运行一个笔记本（以获取数据仓库的数据）。目前我手动启动它。所以，在周末，我没有得到数据。这就是为什么我正在寻找一种每天自动运行笔记本的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:21:42.443

如果在类 UNIX 操作系统上，您可以将笔记本的内容转换为[Mathematica 脚本并使用](http://reference.wolfram.com/mathematica/tutorial/MathematicaScripts.html)[cron](http://en.wikipedia.org/wiki/Cron)安排它定期运行。

另一种不太推荐的方法是在 Mathematica 中进行调度。就像是：

```
Do[
    If[
        MemberQ[{"Monday", ...}, DateString["DayName"]], 
        runMyProgram[]
    ]; 
    Pause[3600*24],
    {30}
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:56:43.163

如果您只需要运行 Mathematica 并编写输出，您可以使用以下过程并使用 Windows 计划任务（设置为“每日”）调用它。示例中的一些文件位置是为简单起见而指定的，即一个位于 Mathematica 目录本身中，但不一定要添加更多路径细节（取决于系统）。

[mathematica 从命令行启动前端和评估笔记本](https://stackoverflow.com/questions/7423179/mathematica-start-front-end-and-eval-notebook-from-command-line/7428340#7428340)

如果您的笔记本设计为交互式运行并将其内容保存在同一个笔记本中，您可以使用以下帖子中的方法，其中更简单的方法具有生成“未捕获的抛出”警告的无害副作用，（原因这在帖子中有解释）。

[由 JLink 或 UseFrontEnd 生成的未捕获抛出](https://stackoverflow.com/questions/7626491/uncaught-throw-generated-by-jlink-or-usefrontend)

# php - 显示来自 php 文件的图像（存储在 mysql db 中）

> ID：10538523
> 
> 赞同：0
> 
> 时间：2012-05-10T16:35:39.987
> 
> 标签：php, mysql

我正在尝试显示存储在 mysql 数据库中的图像。我这样存储它：

```
if (isset($_SESSION['mod']) && (isset($_GET['upload'])) ) {
    if (isset($_FILES['image'])  && $_FILES['image']['size'] > 0) { 

    $con = mysql_connect("localhost", "root");
    mysql_select_db("psi", $con);

      // Temporary file name stored on the server
      $tmpName  = $_FILES['image']['tmp_name'];  

      // Read the file 
      $fp      = fopen($tmpName, 'r');
      $data = fread($fp, filesize($tmpName));
      $data = addslashes($data);
      fclose($fp);

      //now i use <tmpName> as an actual name of file
      $tmpName  = $_FILES['image']['name'];  
      if (isset($_GET['name']))
        $tmpName = $_GET['name'];

        $uname = $_SESSION['uname'];
        $idObj = mysql_query("SELECT id_object AS id FROM tobject WHERE uname = '$uname'");
        $idObj = mysql_fetch_assoc($idObj);
        $idObj = $idObj['id'];

      // Create the query and insert
      // into our database.
      $query = "INSERT INTO slike ";
      $query .= "VALUES ('', '$idObj', '$data', '$tmpName')";
      $results = mysql_query($query, $con);

      // Print results
      print "Thank you, your file has been uploaded.";

}
else {
   print "No image selected/uploaded";
} 
```

}

我想这没关系..它确实在db中存储了一些东西（适当的大小），但我看不到它是手动的..所以，当我尝试用这段代码获取它时：

```
else if (isset($_GET['idSlike'])) {
$idSlike = $_GET['idSlike'];

    $con = mysql_connect("localhost", "root");
    mysql_select_db("psi", $con);

$res = mysql_query("SELECT slika FROM slike WHERE id_slika = '$idSlike'");
if (!$res) {
    die("greska: " . mysql_error());
};

$slika = mysql_fetch_array($res);
$slika = $slika['slika'];
header('Content-Type: ' . $slika['mimetype']);
echo $slika;
} 
```

> 注意：从数据库存储和获取图像都在同一个文件（image.php）中......

我什么也没得到...我尝试用以下方式显示它：

```
<img src="image.php?idSlike=10"/> 
```

> 我对 id 进行了硬编码，但它们存在于 db 中

我也试过

```
echo "<img src=\"image.php?idSlike=13\">"; 
```

通过另一个 php 文件，但我得到的只是一个空图像（带有正确的 src）

我正在使用 xampp (mysql 5.5.16; PHP 5.3.8) ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:37:24.137

在您的开发环境中打开通知和警告：

```
ini_set("display_errors", 1);
error_reporting(E_ALL); 
```

您正在做一些毫无意义的事情（如果您允许，PHP 会告诉您）：

```
$slika = mysql_fetch_array($res);
$slika = $slika['slika'];
header('Content-Type: ' . $slika['mimetype']); // <-- $slika is a string not an array
echo $slika; // <-- if $slika is an array here, you can not echo is like this 
```

# css - 删除由标签名称设置的 CSS

> ID：10538524
> 
> 赞同：0
> 
> 时间：2012-05-10T16:35:44.777
> 
> 标签：css, tags, twitter-bootstrap

我有这个：

```
input[type=button]{ a LOT of stuff } /* File 1 */
.btn {what I actually want to use} /* Twitter bootstrap */

<input type="button" class="btn"> 
```

但是输入从 File1 而不是 TB 获取样式。如何忽略第一个样式？

**编辑以获得更多解释：**我要添加的类来自 Twitter Bootstrap CSS。我不想改变所有地方 .btn 及其变体（.btn-primary、.btn:hover、.btn-primary:hover），几乎有 200 个，每个都有很多项目。在每一行中添加 !important 是我想要避免的。我想告诉我的 html 整个文件很重要。

**编辑#2：** Maaaaaaaaaybe 我找到了答案：[http](http://thingsinjars.com/post/360/scoped-style/) ://thingsinjars.com/post/360/scoped-style/也许吧，因为我现在要测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:39:30.810

除了 danp 的回答，ID 会比 class 有更大的优先级。因此，您可以尝试将其更改为：

```
<input type="button" id="btn">

#btn {
/*css rules*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:37:34.213

CSS 是分层的 - 请记住，最明确定义的规则是使用什么。

IE：如果您的按钮在几个 div 中，那么您定义包括父层次结构在内的样式，并且由于更具体，这就是应用的规则。

```
.btn {
   // base rules
   width: 80px;
   color: black;
}

.parent .block .user-form .btn {
   // my rules defined here will override anything set in .btn, and also pick up the base styles
   width: 100px;

} 
```

因此，.parent、.block 等中的 .btn 将是 100 像素宽，但具有基本规则中定义的黑色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:39:20.117

加强层次结构。例如：

```
div .btn {}

body .btn {}

.container .btn {} 
```

等等

请记住，您仍然必须覆盖以前设置的任何您根本不想要的规则。

希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T16:39:35.597

您是否尝试过：.btn { color: #ff0000 !important; }

# java - CDI 的实例或 Guice 提供者的 Spring 等效项是什么

> ID：10538528
> 
> 赞同：21
> 
> 时间：2012-05-10T16:35:57.557
> 
> 标签：java, spring, guice, cdi

在 CDI 中，您可以定义一个对象，该对象将为您提供特定类型的项目，使用：

```
@注入
实例<MyObject> myObjectInstance;
//...
MyObject myObjectInstance.get();

```

同样在 Guice 你可以这样做：

```
@注入
提供者<MyObject> myObjectInstance;
//...
MyObject myObjectInstance.get();

```

我想知道 Spring 中是否有类似的构造，或者您必须使用`ApplicationContext`才能获得参考？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T08:48:56.703

因此，经过大量挖掘后，我发现 Spring 支持 JSR-330。这个 JSR 定义了一个简单的 API——整个规范实际上就是这个 API——标准化了几个依赖注入接口、注释和行为。

与 Spring 不同`FactoryBean`，该`javax.inject.Provider`接口在获取 bean 引用时不会抛出异常。此外，您仍然需要在某个地方定义这个 FactoryBean（读取 XML 或`@Configuration`类，这是次优的）。

由于一个错误，在当前的 Spring 3.1.1 中`javax.inject.Provider` *，* . 它*确实*在 Spring 3.1.0 中工作。

为了使用它，您只需包含`javax.inject` `jar`- 如果您使用 maven，您可以：

```
 <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency> 
```

Spring 会检测到它，从那一刻起，您可以简单地：

```
@Inject
Provider<MyObject> myObjectInstance;
//...
MyObject myObjectInstance.get(); 
```

就像在 Guice 示例中一样，因为它是相同的 API。

尽管我之前对 Konstantin 发表过评论，但 Spring*确实*自己创建了 Provider。（我正在针对 Spring 3.1.1 对其进行测试并遇到这个[Spring Provider 回归问题](https://jira.springsource.org/browse/SPR-9388 "Spring Provider 回归问题")）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:43:47.893

听起来像一个[FactoryBean](http://blog.springsource.org/2011/08/09/whats-a-factorybean/)

# node.js - Mongoose：在填充的文档中搜索具有指定 id 的文档

> ID：10538532
> 
> 赞同：0
> 
> 时间：2012-05-10T16:36:07.037
> 
> 标签：node.js, search, document, mongoose, populate

在 Mongoose 我有两个模式，它们使用 Mongoose [populate](http://mongoosejs.com/docs/populate.html)链接：

```
var SystemSchema = new Schema({
    name                    : {type : String, trim : true}
    , hosts                 : [{ type: ObjectId, ref: 'Host' }]
});

var HostSchema = new Schema({
    name                    : {type : String, trim : true}
}); 
```

我的问题：我有一个主机的给定 ObjectId，现在想查看哪些系统确实引用了该主机。

我这样做是因为我通常只访问 SystemsSchema 并想要填充主机，但有人问我是否也可以检查主机的系统。现在我试图简单地搜索而不是从主机填充到系统，但我有点卡住了。

我的尝试之一是搜索位置，但这没有成功：

```
System.where('hosts').in(['4fabca804c9d76ac0b000022']).run(function(err, hosts) {
        console.log(hosts);
    }); 
```

有没有办法像这样搜索？请不要告诉我简单地将 HostSchema 作为子文档放到 SystemSchema 中，这只是一个简化的示例。

提前致谢！

最好的问候， 乌利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:18:38.883

我想你错过了`.populate`

```
 System
    .find({ hosts : '4fabca804c9d76ac0b000022' })
    .populate('hosts')
    .run(function(err, systems) {
         console.log(systems);
    }); 
```

# sql - JOIN 两个 SELECT 语句结果

> ID：10538539
> 
> 赞同：236
> 
> 时间：2012-05-10T16:36:35.320
> 
> 标签：sql, select, join, group-by

是否可以在一个语句中加入 2 个 sql`SELECT`语句的结果？我有一个任务数据库，其中每条记录都是一个单独的任务，有截止日期（和 a `PALT`，这只是`INT`从开始到截止日期 的天数。`Age`也是`INT`天数。）

我想要一个表格，其中包含表格中的每个人，他们拥有的任务数量以及他们拥有的任务数量`LATE`（如果有的话）。

我可以轻松地在单独的表中获取这些数据，如下所示：

```
SELECT ks, COUNT(*) AS '# Tasks' FROM Table GROUP BY ks 
```

返回数据如：

```
ks        # Tasks
person1   7
person2   3 
```

然后我有：

```
SELECT ks, COUNT(*) AS '# Late' FROM Table WHERE Age > Palt GROUP BY ks 
```

返回：

```
ks        # Late
person1   1
person2   1 
```

我想加入这两个`select`语句的结果（由`KS`）

我试图避免使用临时表，但如果这是唯一可行的方法，我想了解更多关于以这种方式使用临时表的信息。

我也尝试做一些`count()`满足条件的行，但我也不知道该怎么做。如果可能的话，那也行。

附录：抱歉，我希望我的结果包含`KS`、`Tasks`和列`Late`

```
KS        # Tasks   # Late
person1   7         1
person2   3         1
person3   2         0  (or null) 
```

此外，我希望一个人即使没有迟到的任务也能出现。

`SUM(CASE WHEN Age > Palt THEN 1 ELSE 0 END) Late`
效果很好，感谢您的回答！

两个 select 语句也可以，使用 a`LEFT JOIN`来加入它们也可以，我现在明白了如何以`select`这种方式加入多个 s

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2012-05-10T16:40:20.333

```
SELECT t1.ks, t1.[# Tasks], COALESCE(t2.[# Late], 0) AS [# Late]
FROM 
    (SELECT ks, COUNT(*) AS '# Tasks' FROM Table GROUP BY ks) t1
LEFT JOIN
    (SELECT ks, COUNT(*) AS '# Late' FROM Table WHERE Age > Palt GROUP BY ks) t2
ON (t1.ks = t2.ks); 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-05-10T16:40:35.943

尝试这样的事情：

```
SELECT 
* 
FROM
(SELECT ks, COUNT(*) AS '# Tasks' FROM Table GROUP BY ks) t1 
INNER JOIN
(SELECT ks, COUNT(*) AS '# Late' FROM Table WHERE Age > Palt GROUP BY ks) t2
ON t1.ks = t2.ks 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-05-10T16:40:48.077

使用`UNION`：

```
SELECT ks, COUNT(*) AS '# Tasks' FROM Table GROUP BY ks
UNION
SELECT ks, COUNT(*) AS '# Late' FROM Table WHERE Age > Palt GROUP BY ks 
```

或者`UNION ALL`，如果您想要重复：

```
SELECT ks, COUNT(*) AS '# Tasks' FROM Table GROUP BY ks
UNION ALL
SELECT ks, COUNT(*) AS '# Late' FROM Table WHERE Age > Palt GROUP BY ks 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-10T16:42:35.083

如果 Age 和 Palt 是同一个表中的列，则可以对所有任务进行计数（*）并仅对迟到的任务求和，如下所示：

```
select ks,
       count(*) tasks,
       sum(case when Age > Palt then 1 end) late
  from Table
 group by ks 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-05-10T16:38:49.420

您可以`UNION ALL`为此使用关键字。

这是在 T-SQL [http://msdn.microsoft.com/en-us/library/ms180026.aspx中执行此操作的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms180026.aspx)

UNION ALL - 合并结果集

UNION - 执行类似 Set Union 的操作并且不输出重复值

对于一个例子的区别： http: [//sql-plsql.blogspot.in/2010/05/difference-between-union-union-all.html](http://sql-plsql.blogspot.in/2010/05/difference-between-union-union-all.html)

# jquery - 在 jquery 中找不到颜色选择器方法

> ID：10538541
> 
> 赞同：0
> 
> 时间：2012-05-10T16:36:39.707
> 
> 标签：jquery, jquery-ui

我有一个添加 div 的 jquery 项目...我想让这些 div 作为颜色选择器...所以我想使用 websanova-wColorPicker jquery 库..但是在将它与我的代码集成之后。我在 chrome 中收到一个错误，即找不到颜色选择器方法..

一旦我删除了添加 div 的 jquery 代码..颜色选择器工作..因此我得出的结论是它是因为冲突，因为我尝试了另一个颜色选择器库以及相同的错误...我使用jquery ui也是

```
Uncaught TypeError: Object [object Object] has no method 'wColorPicker' i.html:83
jQuery.click.show i.html:83
f.event.dispatch jquery.1.7.1.min.js:3
f.event.add.h.handle.i jquery.1.7.1.min.js:3 
```

所以这是我的问题..我如何使用 Websanova 颜色选择器创建动态 div，即。每个 div 都是一个颜色选择器..help。

代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Websanova Color Picker</title>
    <link href="css/index.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="./inc/jquery.1.7.1.min.js"></script>
    <link rel="Stylesheet" type="text/css" href="./wColorPicker.css" />
    <script type="text/javascript" src="./wColorPicker.js"></script>

</head>
<body>
        <div id="wColorPicker7" class="hoverBox"></div>
        <script type="text/javascript">

        $("#wColorPicker7").wColorPicker({onSelect:function(color){/*do something*/}, mode: 'click', effect: 'fade', color: 'yellow'});

    $(window).load(function(){

    jQuery("#coldwn").click(function(event){
    var showOptions = function()
    {
        $(this).css("background-image", "url(images/us.png)");
    };
    var showOptionso = function()
    {
        $(this).css("background-image", "url(images/ua.png)");
    };
    var cc = function()
    {
      var letters = '0123456789ABCDEF'.split('');
    var c = '#';
    for (var i = 0; i < 6; i++ ) {
        c += letters[Math.round(Math.random() * 15)];
    }

        $(this).css("background-color", c );
    };
w=document.getElementById('coldwn').offsetWidth;

var x = event.pageX;
        var p=(x-403)*100/w;
        var per=p.toFixed(0);

    xa = document.getElementById('coldwn').offsetTop;
    var x = event.pageX,
        y = event.pageY;
    var $mystub=jQuery("<div>").addClass("node").attr('id', x+'o').css({position: "absolute",left:x,top:xa,width:"16px",height:"20px"}).hover(showOptions,showOptionso);
    var $mystuba=jQuery("<div>").addClass("color").attr('id', x+'i').css({position: "absolute",top:"7px",width:"16px",height : "14px",value:p,autocomplete:"off"}).click(cc);
    $mystub.append($mystuba);
    $('#coldwn').append($mystub);

$("#"+x+"i").wColorPicker({onSelect:function(color){/*do something*/}, mode: 'click', effect: 'fade', color: 'yellow'});
    $("#"+x+"o").draggable({ containment: "#coldwn", scroll: false,axis: "x",
    start: function() {      },
      drag: function(event, ui) {
        var x = event.pageX;
        var p=(x-403)*100/w;
        var per=p.toFixed(0);
        $('textarea').val(per);

    //    -webkit-linear-gradient(bottom, rgb(40,51,157) 32%, rgb(68,77,189) 66%, rgb(105,138,14) 77%);
      },
      stop: function() {
        var x = event.pageX;
       var p=(x-403)*100/w;
        var per=p.toFixed(0);
        alert(per);   

         }  });

    });

    });
function d()
{

var i=20;
var str="";

alert($('#coldwn').children("div").size());

$('.node').children("div").each(function()
{
var kid = $(this);
var cr = $(this).css("background-color");
str+=cr+" "+i+"%,";
console.log(str);
i+=20;
console.log(kid.attr('id'),cr);
}).sort();

str+="rgb(105,138,14) 100%)";
alert(str);
$('#mainarea').css("background-image","-webkit-linear-gradient(bottom, "+str );

console.log("background-image","-webkit-linear-gradient(bottom, "+str);
 // $('#mainarea').css("background-image","-webkit-linear-gradient(bottom, rgb(40,51,157) 32%, rgb(68,77,189) 66%, rgb(105,138,14) 77%)" );

}
        </script>
    <p>
      <span id="u70">CSS GRADIENTS</span>
    </p>
    <p>
      &nbsp;
    </p>
    <div id="wrap">
      <div id="topop" class="topop"></div>
      <div id="mainarea" class="maingrad"></div>
      <div id="coldwn" class="col"></div>
    </div><br>
    <div id="wColorPicker7" class="hoverBox"></div>

</body>
</html> 
```

注意：jquery 中的代码创建 divs..我想成为颜色选择器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-13T14:24:12.750

得到它..jquery 导入覆盖..彼此...确保没有重复

# vb.net - 未设置对象变量或 With 块变量。VB.NET

> ID：10538543
> 
> 赞同：0
> 
> 时间：2012-05-10T16:36:40.110
> 
> 标签：vb.net

我需要您的帮助来验证导致此错误的原因。

这是堆栈跟踪：

```
[NullReferenceException: Object variable or With block variable not set.]
Microsoft.VisualBasic.CompilerServices.Container..ctor(Object Instance) +498372
   Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateCall(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack, Boolean IgnoreReturn) +112
   MicrositioAmece.EAN_Individual.Uno_a_Uno(String iNombreGenerico, String iMarca, String iContenido, String iUnidadMedida, String iVariante) in C:\Users\vflores\Documents\MicrositioAmeceDevelopment\EAN_Individual.aspx.vb:292
   MicrositioAmece.EAN_Individual.btnEnviar_Click(Object sender, EventArgs e) in C:\Users\vflores\Documents\MicrositioAmeceDevelopment\EAN_Individual.aspx.vb:96
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +111
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

这是代码：

```
 Function Uno_a_Uno(ByVal iNombreGenerico As String, ByVal iMarca As String, ByVal iContenido As String, ByVal iUnidadMedida As String, ByVal iVariante As String)
    Uno_a_Uno = False
    If iNombreGenerico = "" Or iMarca = "" Or iContenido = "" Or iUnidadMedida = "" Or iVariante = "" Then
        Uno_a_Uno = False
        Exit Function
    End If

    Dim objSiebelApp, blogStat
    Dim oSiebApp, strCnxn, logstat
    Dim oBusObj, oBusComp, bHayRegistro
    Dim oBusCompEAN13, oBusCompEAN13Detalle
    Dim oBCPickNumContacto, oNumContacto
    Dim oBCPickTipoCodigo, oTipoCodigo
        '______________Conecta a Siebel
    oSiebApp = CreateObject("SiebelDataControl.SiebelDataControl.1")
    strCnxn = Replace(ConfigurationSettings.AppSettings("ConnSiebel"), "'", Chr(34))
    Dim us As String = ConfigurationSettings.AppSettings("usrSiebel")
    Dim pw As String = ConfigurationSettings.AppSettings("pwSiebel")
    logstat = oSiebApp.Login(strCnxn, us, pw)
    If Not logstat Then
        strCnxn = Replace(ConfigurationSettings.AppSettings("ConnSiebel"), "'", Chr(34))
        logstat = oSiebApp.Login(strCnxn, us, pw)
        If Not logstat Then
            'lblError.Text = "Error al conectar: " & CStr(logstat1) & " Desc: " & oSiebApp1.GetLastErrText & "numErr: " & oSiebApp1.GetLastErrCode
            lblError.Text = "<br /><div class='Aviso_Error'><span class='Aviso_contenido'>" & _
                    "Error al Conectar con la base de datos, por favor intentelo más tarde." & _
                    "</span></div><br />"
        End If
        Exit Function
    End If
    oBusObj = oSiebApp.GetBusObject("Account")
    oBusComp = oBusObj.GetBusComp("Account")
    oBusComp.ActivateField("CSN")
    oBusComp.ActivateField("Name")
    oBusComp.SetViewMode(3)
    oBusComp.ClearToQuery()
        oBusComp.SetSearchExpr("[CSN] LIKE " + User.Identity.Name) '140418") '
    oBusComp.ExecuteQuery(1)
    bHayRegistro = oBusComp.FirstRecord
    If bHayRegistro Then
        oBusCompEAN13 = oBusObj.GetBusComp("Codigos EAN13 Completos")
        Call oBusCompEAN13.NewRecord(1)
        'oBusCompEAN13.SetFieldValue("Campo", "Valor")
        'Pick List Contacto
        oBCPickNumContacto = oBusCompEAN13.GetPicklistBusComp("Num Contacto")
        oBCPickNumContacto.ActivateField("Numero de contacto")
        oBCPickNumContacto.SetViewMode(3)
        oBCPickNumContacto.ClearToQuery()
        'oBCPick.SetSearchSpec("ACA SERÍA EL TIPO DE CONTACTO", "RESPONSABLE DE CODIGOS")
        oBCPickNumContacto.ExecuteQuery(1)
        If oBCPickNumContacto.FirstRecord() Then
            oBCPickNumContacto.Pick()
        End If

        'Pick List Tipo de Código
        oBCPickTipoCodigo = oBusCompEAN13.GetPicklistBusComp("Tipo de Codigo (MOSTRAR)")
        oBCPickTipoCodigo.ActivateField("Numero de contacto")
        oBCPickTipoCodigo.SetViewMode(3)
        oBCPickTipoCodigo.ClearToQuery()
        oBCPickTipoCodigo.SetSearchSpec("Tipo de Codigo", "R")
        oBCPickTipoCodigo.ExecuteQuery(1)
        If oBCPickTipoCodigo.FirstRecord() Then
            oBCPickTipoCodigo.Pick()
        End If

        oBusCompEAN13.InvokeMethod("NuevoCodigo", "Null")
        sCodigoCompleto = oBusCompEAN13.GetFieldValue("Codigo Completo")
        If (oBusCompEAN13.WriteRecord() = False) Then
            'lblError.Text = "No fue posible asignar el código individual:" & CStr(logstat) & " Desc: " & oSiebApp.GetLastErrText & "numErr: " & oSiebApp.GetLastErrCode
            lblError.Text = "<br /><div class='Aviso_Error'><span class='Aviso_contenido'>" & _
                "No fue posible asignar el código, por favor intentelo más tarde." & _
                "</span></div><br />"
            Exit Function
        Else
            oBusCompEAN13Detalle = oBusObj.GetBusComp("Detalle EAN13")
            Call oBusCompEAN13Detalle.NewRecord(1)
            oBusCompEAN13Detalle.SetFieldValue("Nombre Generico", iNombreGenerico)
            oBusCompEAN13Detalle.SetFieldValue("Marca Producto", iMarca)
            oBusCompEAN13Detalle.SetFieldValue("Contenido Neto Producto", iContenido)
            oBusCompEAN13Detalle.SetFieldValue("Unidad Medida Cont Neto", iUnidadMedida)
            oBusCompEAN13Detalle.SetFieldValue("Tipo Producto", iVariante)
            If (oBusCompEAN13Detalle.WriteRecord() = False) Then
                'lblError.Text = "No fue posible guardar el detalle del código individual, sin embargo el código fue asignado: " & sCodigoCompleto '& CStr(logstat) & " Desc: " & oSiebApp.GetLastErrText & "numErr: " & oSiebApp.GetLastErrCode
                lblError.Text = "<br /><div class='Aviso_Error'><span class='Aviso_contenido'>" & _
                    "No fue posible guardar el detalle del código individual, sin embargo el código fue asignado: " & sCodigoCompleto & _
                    "</span></div><br />"
                Exit Function
            Else
                Uno_a_Uno = True
            End If
        End If
        End If
        'limpio los objetos
        Call oSiebApp.LogOff()
        objSiebelApp = Nothing
        blogStat = Nothing
        oSiebApp = Nothing
        strCnxn = Nothing
        logstat = Nothing
        oBusObj = Nothing
        oBusComp = Nothing
        bHayRegistro = Nothing
        oBusCompEAN13 = Nothing
        oBusCompEAN13Detalle = Nothing
        oBCPickNumContacto = Nothing
        oNumContacto = Nothing
        oBCPickTipoCodigo = Nothing
        oTipoCodigo = Nothing
    Return Uno_a_Uno
End Function 
```

如您所见，第 292 行 Uno_a_Uno 函数返回了错误。我已经搜索过，但我无法解决它造成的。

非常感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:18:43.743

或者 OBCPickNumContacto 什么都没有，这意味着您之前对
oBusCompEAN13.GetPicklistBusComp("Num Contacto") 的调用由于某种原因而失败，或者，
ActivateField 可能在内部失败。

# c# - 对象的通用接口创建取决于某种类型

> ID：10538545
> 
> 赞同：-1
> 
> 时间：2012-05-10T16:36:45.760
> 
> 标签：c#, oop

您好，我有一个关于以正确方式使用基因的问题。

请看我的代码，我需要一个建议，是否可以通过其他方式创建基本搜索。我想从 Conc2Search 和 Conc1Search 类中删除 ISearcher impementation。

```
class Program
{
    static void Main(string[] args)
    {
         var res1 = SearchCreator.GetSearch(1).Search();
         Console.WriteLine("GenetalSearch count:{0}", res1.Count());

         var res2 = SearchCreator.GetSearch(2).Search();
         Console.WriteLine("Conc1Search count:{0}", res2.Count());

         var res3 = SearchCreator.GetSearch(3).Search();
         Console.WriteLine("Conc2Search count:{0}", res3.Count());
    }

    public class SearchCreator
    {           
         public static ISearcher<Base> GetSearch(int type)
         {
             switch (type)
             {
                 case 1: return new GenetalSearch();
                 case 2: return new Conc1Search();
                 case 3: return new Conc2Search();
             }
             return null;
         }
    }
}

public class Base
{

}

public class Conc1 : Base
{

}

public class Conc2 : Base
{

}

public interface ISearcher<out T> where T : Base
{
    IEnumerable<T> Search();
}

public class GenetalSearch : ISearcher<Base>
{
    public IEnumerable<Base> Search()
    {
         var list = new List<Base> {new Base(), new Base(), new Base()};
         return list;
    }
}

public class Conc1Search : ISearcher<Conc1>, ISearcher<Base>
{
     public IEnumerable<Conc1> Search()
     {
         var list = new List<Conc1>() { new Conc1(), new Conc1(), new Conc1(), new Conc1()};
         return list;
     }

     IEnumerable<Base> ISearcher<Base>.Search()
     {
         return Search();
     }
}

public class Conc2Search : ISearcher<Conc2>, ISearcher<Base>
{
     public IEnumerable<Conc2> Search()
     {
         var list = new List<Conc2>() { new Conc2(), new Conc2(), new Conc2(), new Conc2(), new Conc2() };
         return list;
     }

     IEnumerable<Base> ISearcher<Base>.Search()
     {
         return Search();
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:08:25.137

关于什么：

```
public interface ISearcher<T>
{
    IEnumerable<T> Search();
}

public class GeneralSearch<T> : ISearcher<T> where T : new()
{
    public static IEnumerable<T> Search()
    {
        var list = new List<T> { new T(), new T(), new T() };
        return list;
    }
} 
```

然后例如：

```
IEnumerable<myClass> test = GeneralSearch<myClass>.Search(); 
```

# php - 我该如何解决这个 php 错误？

> ID：10538561
> 
> 赞同：0
> 
> 时间：2012-05-10T16:37:48.910
> 
> 标签：php

> 致命错误：在第 63 行调用非对象上的成员函数 hooks_dp3rsSidebar()

这就是第 63 行的内容：

```
return $this->registry->output->getTemplate( 'referrals' )->hooks_dp3rsSidebar( $this->referralsSystemLibrary->getTopXReferrers() ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:43:17.077

通常这种错误是使用`->`或`::`访问非对象元素的属性或方法的结果。

在您的情况下，这似乎`$this->registry->output->getTemplate( 'referrals' )`不是一个对象，因为`getTemplate( 'referrals' )`不返回一个对象。

触发错误的原因可能`$this->registry->output->getTemplate( 'referrals' )`是 null、布尔值、整数或字符串值，无法通过`->`or访问`::`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:42:58.580

> 在您的皮肤模板中查找该模板 hooks_dp3rsSidebar 。如果它在那里，请尝试为引用重建 html，并可能运行 recache all。

[http://forumcore.net/topic/3396-solved-error-referrals-system/](http://forumcore.net/topic/3396-solved-error-referrals-system/)

# c++ - 在opengl c ++中切换相机的视图

> ID：10538564
> 
> 赞同：-1
> 
> 时间：2012-05-10T16:38:06.647
> 
> 标签：c++, opengl

我想控制 2 个摄像头，每个摄像头都有不同的模型视图矩阵。

但我无法保存和恢复矩阵。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:45:46.013

为什么不能救他们？这应该可以让您保存和恢复矩阵。或者只是使用推/弹出。

```
float matrix[16];
glGetFloatf(GL_MODELVIEW_MATRIX, &matrix); //save
glLoadMatrixf(&matrix); //restore 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:39:55.380

每个相机类都应该有自己的模型视图矩阵。您可以从 OpenGL 获取当前模型视图矩阵（正如 Tim 所解释的那样），或者您可以使用一些自定义库进行数学运算。

核心 OpenGL（3.3 及更高版本）和 OpenGL ES 2.0 需要自定义数学库

尽量不要坚持使用“旧”OpenGL 中的数学库

# hyperlink - 单击超链接时如何将 IE URL 添加到超链接

> ID：10538565
> 
> 赞同：0
> 
> 时间：2012-05-10T16:38:06.980
> 
> 标签：hyperlink

你能告诉我点击超链接时如何添加 IE 标签 URL，即链接 + IE URL 标签。?

请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:40:00.017

我将假设您希望您的链接在新选项卡中打开。

您可以通过指定具有值的`target`属性来执行此操作。`_blank`

```
<a href="mypage.html" target="_blank">Click me</a> 
```

# html - 是否可以在 CSS 中禁用字体平滑？

> ID：10538570
> 
> 赞同：17
> 
> 时间：2012-05-10T16:38:18.893
> 
> 标签：html, css, fonts, stylesheet, font-smoothing

我想要一些小字体看起来没有平滑。是否可以使用 HTML/CSS 禁用字体平滑？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T16:44:34.563

是的，这是可能的，但并非适用于所有浏览器。

```
font-smooth: auto | never | always | <absolute-size> | length | initial | inherit
-webkit-font-smoothing : none | subpixel-antialiased | antialiased 
```

对于您的情况：

```
font-smooth: never;
-webkit-font-smoothing : none; 
```

**UPD(for Chrome)**： [在 Windows 上的 Chrome 中强制字体平滑](http://bashelton.com/2011/03/force-font-smoothing-in-chrome-on-windows-hack/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T16:41:45.443

是的，虽然我不能说哪些浏览器会注意到你！

你可以写

```
<p style="font-smooth:never;"> 
```

得到你想要的效果。

* * *

**编辑**

我确定我几个月前就用过这个，但我在 Mozilla 网络上阅读过

> 虽然出现在 CSS3 字体的早期（2002 年）草案中，但 font-smooth 已从本规范中删除，目前不在标准轨道上。

对不起！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:41:07.910

尝试`font-smooth: never;`

[http://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm](http://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-16T14:23:45.130

我也在找这个。我最终在另一个 stackoverflow 线程（[如何为 SVG 文本中获取“crispEdges”？](https://stackoverflow.com/questions/35434315/how-to-get-crispedges-for-svg-text)）上找到了一个解决方案来禁用 SVG 的文本平滑（禁用抗锯齿），但这个解决方案也适用于常规 HTML 元素。

诀窍是使用 SVG 过滤器，然后您可以将其添加到任何 HTML 元素中以使任何内容变得清晰。

1.  首先我们需要定义过滤器，这样我们就可以在 CSS 中使用它。

```
<svg class="offscreen" width="0" height="0" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <filter id="crispify">
            <feComponentTransfer>
                <feFuncA type="discrete" tableValues="0 1"/>
            </feComponentTransfer>
        </filter>
    </defs>
</svg> 
```

2.  将过滤器添加到仅包含文本的 HTML 元素。如果它有背景颜色或其他东西，它就不起作用。

```
p {
    filter: url(#crispify);
} 
```

3.  额外的东西：你可能想要隐藏 SVG 元素，所以将它添加到 CSS 中。

```
.offscreen {
    position: absolute;
    left: -100000px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
} 
```

4.  另一件事：如果白色看起来很奇怪，请将颜色更改为黑色并使用另一个过滤器将其反转，因此您的代码如下所示：

```
p {
  filter: url(#crispify) invert(1);
} 
```

5.  请注意，这对于设计为清晰的字体（如像素字体）来说是最好的。我也不知道这是否适用于所有浏览器，但它确实适用于 Chrome、Edge 和 Firefox。

# javascript - 使用 Jquery 的 Rails App：只允许选择一个复选框（haml）

> ID：10538583
> 
> 赞同：1
> 
> 时间：2012-05-10T16:39:04.370
> 
> 标签：javascript, jquery, ruby-on-rails, checkbox, haml

我有一个信用卡选项（选中该框时，您可以从 American Express、Mastercard、Discover 或 Visa 中进行选择）。如果您取消单击它，它会被隐藏。

支票选项也是如此：如果您单击它，它会显示将支票发送到的地址，如果您取消点击它就会消失。

所以前两个功能按预期工作。现在我希望能够做到，所以你不能同时点击支票和信用卡。第三个功能有什么问题？一位朋友建议我的 HAML 中有太多 div（有关内容，请参阅要点[https://gist.github.com/2654244](https://gist.github.com/2654244)）。

是的，我知道我应该使用单选按钮 :) 稍后会更改。

```
= content_for :javascripts do
  :javascript
      $(function(){
        $("#cc_checkbox").click(function(){
        if($(this).children("input").is(':checked')){
          $(this).next().show();
          }
        else{
        $(this).next().hide();
        }
      });
     })

     $(function(){
       $("#check_checkbox").click(function(){
       if($(this).children("input").is(':checked')){
     $(this).next().show();
     }
  else{
     $(this).next().hide();
     }
   });
 })

     $(function() {
       var $paymentSplit = $('input.paymentSplit');
         $paymentSplit.click(function() {
           $paymentSplit.removeAttr('checked');
           $(this).attr('checked', true);
         });
      }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:49:57.093

使它们成为单选按钮而不是复选框。任何时候只能选择一个同名的单选按钮。

# javascript - 返回并重新加载页面 - 一键式

> ID：10538585
> 
> 赞同：4
> 
> 时间：2012-05-10T16:39:11.287
> 
> 标签：javascript, reload, back, page-refresh

我需要返回上一页并刷新它。我使用 history.go(-1) 但上一页上的表单没有重新加载。

感谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-10T12:46:26.830

截至 2014 年 6 月 10 日，我测试了最新的 Chrome 35、FireFox 29 和 IE 11。当我执行 location.history.back() 时，只有 Firefox 没有重新加载。所以我将 location.history.back() 替换为

```
location.href = document.referrer 
```

所以我的后退按钮现在是这样工作的：

```
<a href="#" onclick="location.href = document.referrer; return false;">Back</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T16:45:25.530

如果您重新打开页面，它应该会自动刷新。您可能可以通过`document.referrer` Hope that help 获取引用页面的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T18:47:17.127

我想我发明了一种方法。通过向 url 添加一个随机参数，我们强制浏览器刷新...

```
var backLocation = document.referrer;
if (backLocation) {
    if (backLocation.indexOf("?") > -1) {
        backLocation += "&randomParam=" + new Date().getTime();
    } else {
        backLocation += "?randomParam=" + new Date().getTime();
    }
    window.location.assign(backLocation);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T16:42:25.927

在上一页使用以下

```
 <% Response.AddHeader "Pragma", "no-cache" %>
  <% Response.Expires = -1 %> 
```

在 asp 的情况下

另外检查[这个](http://lab.artlung.com/anti-cache/)

# c# - 在句点后浮动到至少一位数字的字符串

> ID：10538587
> 
> 赞同：5
> 
> 时间：2012-05-10T16:39:14.640
> 
> 标签：c#

如何将浮点数格式化为字符串：

1 => "1.0"

1.12345 => "1.12345"

代替：

```
 String.Format("{0:0.0}", 123.0); // Limit amount of digits 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T16:46:29.417

位数有*最大限制吗？*

您可以改为使用：

```
String.Format("{0:0.0#####}", floatVal) 
```

您可以将其扩展`#`到您想要/认为合理的任何内容。在`.`格式说明符之后，a`0`表示应*始终*显示小数精度位，而`#`表示如果存在则应显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:58:45.390

```
float f = 1.45783f;
string result = f.ToString("f2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:06:38.507

toString() 可以采用 IFormatProvider，它允许您将各种数据类型格式化为其他格式。

```
float f = 1.45783f;
string result = f.ToString("f2"); 
```

# apache - 使用重写清理 URL

> ID：10538588
> 
> 赞同：1
> 
> 时间：2012-05-10T16:39:15.913
> 
> 标签：apache, .htaccess, url-rewriting, clean-urls

我要实现

```
mysite.com/photo.php?id=l0el2rwbFj7kGG3 
```

变得

```
mysite.com/photo/l0el2rwbFj7kGG3 
```

我正在使用的重写是

```
RewriteEngine On
RewriteRule ^photo/([a-zA-Z0-9]+) photo.php?id=$1 [L,NC] 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:47:40.450

你做对了（几乎）。只需通过以下方式更改您的代码：

```
RewriteRule ^photo/(.+)$ photo.php?id=$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:45:10.710

试试这个更简单的：

```
RewriteEngine on
RewriteRule ^photo/(.*)$ photo.php?id=$1 
```

# php - 按给定天数计算日期时间

> ID：10538591
> 
> 赞同：-2
> 
> 时间：2012-05-10T16:39:22.887
> 
> 标签：php, sql

我有一个表单，用户必须输入示例用户输入 2 天的天数，它将扣除 2 天。结果将如下所示

```
Current Date: 2012-02-10 
Last date: 2012-02-08 
```

每个持续时间的时间将在晚上 11:59 设置一次。因为从这个计算中我必须从 sql 中找到与持续时间匹配的数据...

```
Current Date: 2012-02-10 
Last date: 2012-02-08
List data xyz from the date is 30 times 
```

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:40:55.103

这？

```
$now = $_SERVER["REQUEST_TIME"];
$2daysago = $now - 60 * 60 * 24 * 2;
echo date("Y-m-d H:i:s", $2daysago); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:00:27.293

您可以使用类似`echo date("Y-m-d 23:59:59",strtotime("-2 days"));`Just make that "2" 用户输入的变量，并确保他们使用整数。不确定这是否是您要查找的内容或很难说的其他问题。

# objective-c - 应用程序在 iPad 3 上崩溃，但在 iPad 2 上没有 - 崩溃日志

> ID：10538597
> 
> 赞同：0
> 
> 时间：2012-05-10T16:39:44.493
> 
> 标签：objective-c, xcode, ipad, crash

我有一个在 iPad2 上完美运行的应用程序，但由于在 iPad 3 上崩溃而被 Apple 拒绝。

我已经对崩溃日志进行了符号化，并将崩溃范围缩小到以下方法。

```
-(void)mergeTwoVideos {

//AVExport (oddly) has a problem with file name already existing - therefore check if file already exists and delete if needed.
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writablePath = [documentsDirectory stringByAppendingPathComponent:@"FinishedVideo.mov"];

if([fileManager fileExistsAtPath:writablePath]){ 
    NSLog(@"Problem - file already exists");
    [fileManager removeItemAtPath:writablePath error:NULL];
}
else{ 
    NSLog(@"No Problem - New File");
}

//Instantiate AVMutable Composition.

CMTime nextClipStartTime = kCMTimeZero;

AVURLAsset* a_videoAsset = [AVURLAsset URLAssetWithURL: [assetURLArray objectForKey:kIntroVideo] options:nil];

AVMutableComposition* mixComposition = [AVMutableComposition composition];

CMTimeRange a_timeRange = CMTimeRangeMake(kCMTimeZero,a_videoAsset.duration);
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
AVMutableCompositionTrack *compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

[a_compositionVideoTrack insertTimeRange:a_timeRange ofTrack:[[a_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

nextClipStartTime = CMTimeAdd(nextClipStartTime, a_timeRange.duration);

AVURLAsset* b_videoAsset = [AVURLAsset URLAssetWithURL: [assetURLArray objectForKey:kMainVideo] options:nil];

CMTimeRange b_timeRange = CMTimeRangeMake(kCMTimeZero, b_videoAsset.duration);
[a_compositionVideoTrack insertTimeRange:b_timeRange ofTrack:[[b_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];
[compositionAudioTrack insertTimeRange:b_timeRange ofTrack:[[b_videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];

nextClipStartTime = CMTimeAdd(nextClipStartTime, b_videoAsset.duration);

AVURLAsset* c_videoAsset = [AVURLAsset URLAssetWithURL: [assetURLArray objectForKey:kIntroVideo] options:nil];
CMTimeRange c_timeRange = CMTimeRangeMake(kCMTimeZero, c_videoAsset.duration);
[a_compositionVideoTrack insertTimeRange:c_timeRange ofTrack:[[c_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetMediumQuality];

NSString *exportVideoPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/FinishedVideo.mov"];

NSURL *exportURL = [NSURL fileURLWithPath:exportVideoPath];
exportSession.outputURL = exportURL;
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;

[exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status) {
        case AVAssetExportSessionStatusFailed:{
            NSLog (@"FAIL");
            break;
        }
        case AVAssetExportSessionStatusCompleted: {
            NSLog (@"SUCCESS");
            [exportSession release];
            [self finishMergingProcess];
}
};
 }]; 
```

}

符号化的崩溃日志如下：

```
Thread 4 name:  Dispatch queue: com.apple.root.default-priority
Thread 4 Crashed:
0   libsystem_kernel.dylib          0x36d4832c __pthread_kill + 8
1   libsystem_c.dylib               0x3173a208 pthread_kill + 48
2   libsystem_c.dylib               0x31733298 abort + 88
3   libc++abi.dylib                 0x36c10f64 abort_message + 40
4   libc++abi.dylib                 0x36c0e346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x3682b350 _objc_terminate + 140
6   libc++abi.dylib                 0x36c0e3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x36c0e44a std::terminate() + 14
8   libc++abi.dylib                 0x36c0f798 __cxa_throw + 116
9   libobjc.A.dylib                 0x3682b290 objc_exception_throw + 88
10  CoreFoundation                  0x31f1f9d4 -[__NSArrayM objectAtIndex:] + 264
11  AppName                         0x00023d6e -[ViewController mergeTwoVideos]     (ViewController.m:746)
12  libdispatch.dylib               0x31eb4c52 _dispatch_call_block_and_release + 6
13  libdispatch.dylib               0x31eb7810 _dispatch_worker_thread2 + 252
14  libsystem_c.dylib               0x316f5df4 _pthread_wqthread + 288
15  libsystem_c.dylib               0x316f5cc8 start_wqthread + 0 
```

任何人都可以提供有关导致 iPad 3 崩溃的原因的任何见解吗？令人沮丧的是我没有 iPad3 来测试自己，所以感谢任何帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:20:40.730

您正试图通过索引从数组没有那么多元素的 NSArray 中获取对象。

鉴于`objectAtIndex:0`您没有首先检查数组是空的还是 nil 的调用次数，其中任何一个都可能是问题所在。

考虑到您在代码中没有验证以确保 URL 正确，资产正在加载，或者资产的点点滴滴是预期的，那么该代码中有几十个潜在的故障点。

您需要修改代码以使其始终处于防御状态；检查 nil，检查空数组，检查加载 URL 失败等...

# css - 默认网页宽度 - 1024 像素还是 980 像素？

> ID：10538599
> 
> 赞同：26
> 
> 时间：2012-05-10T16:39:58.867
> 
> 标签：css, responsive-design

在开发 Web 应用程序时，过去的选择是`800px`或`1024px`适应用户的监视器。我一直在研究响应式网页设计和流畅的设计，似乎很多都定义了`980px`宽度。随着智能手机和平板电脑的加入，并考虑到其他可能的视口

是新`980px`的**事实标准**吗？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-25T22:11:22.030

我的设计主要使用 978px 宽度。进阶。978px ：可以除以 2,3。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-10T16:46:44.630

980 不是“事实上的标准”，您通常会看到大多数人的目标尺寸略小于 1024 像素宽，以考虑浏览器 chrome，例如滚动条等。

通常人们的目标宽度在 960 到 990 像素之间。人们经常使用网格系统（如 960.gs），它对默认宽度应该是多少有意见。

另请注意，就在最近，最常见的屏幕尺寸现在平均比 1024 像素宽大很多，排名在 1366 像素宽。请参阅[http://techcrunch.com/2012/04/11/move-over-1024x768-the-most-popular-screen-resolution-on-the-web-is-now-1366x768/](http://techcrunch.com/2012/04/11/move-over-1024x768-the-most-popular-screen-resolution-on-the-web-is-now-1366x768/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T16:47:46.033

如果不是，我可以看到事情朝着那个方向发展。

我正在为我工​​作的公司重做网​​站，他们聘请的设计师使用了 960 像素宽度的布局。还有一个 960px 网格系统似乎越来越流行（[http://960.gs/](http://960.gs/)）。

我已经有几年没有上网了，但从我读到的东西来看，960/980 似乎是正确的。对于移动设备，我脑海中一直有 320 像素，960 可以被它整除。960 也可以被 2、3、4、5 和 6 整除。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-16T15:15:58.037

这是一个开放式问题，因为屏幕尺寸一直在变化，而两年前可能正确的东西现在可能已经过时了。

我目前使用 Twitter Bootstrap 3，它使用流体网格系统，设计用于从移动/非常小的尺寸一直到现在可用的巨大宽屏显示器。

目前，BS3 中的上限默认值为 1200 像素，在考虑到网格元素的边距和填充后，它转换为 1144 像素的容器宽度。

根据我的经验，现代设计师正在为桌面设计大约 1366 像素的宽度。我最近实施的所有设计都是 1366 像素。

另请注意，您可以大量自定义 BS3 网格。例如，我们将在我们的网站/设计中使用 32 列网格和 4px 排水沟。

最终，需要根据您的网站分析和访问者通常使用的屏幕尺寸来决定页面宽度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-21T08:05:57.083

即使这个问题没有正确或错误的答案，但我个人更喜欢 960px 宽度。因为所有现代显示器都支持至少 1024 × 768 像素分辨率。960 可被 2、3、4、5、6、8、10、12、15、16、20、24、30、32、40、48、60、64、80、96、120、160、192 整除， 240、320 和 480。这使其成为一个高度灵活的基数。

请参阅这篇文章，显示美国和英国最流行的屏幕分辨率 2013-2014：http: [//www.hobo-web.co.uk/best-screen-size/](http://www.hobo-web.co.uk/best-screen-size/)

# jquery-ui-datepicker - 将事件添加到 Datepicker 下一个和上一个按钮

> ID：10538603
> 
> 赞同：0
> 
> 时间：2012-05-10T16:40:20.187
> 
> 标签：jquery-ui-datepicker, jquery

我编写了这个简单的代码来将事件附加到我的一个 div 中。但这些事件似乎从未被解雇。这是我的代码：

```
$(function() {
    $(".ui-datepicker-prev").hover(function () {
      alert('H');
    });

    $(".ui-datepicker-prev").click(function () {
      alert('C');
    });

    $(".ui-datepicker-prev").mouseover(function () {
      alert('MO');
    });
}); 
```

PS我想将事件添加到jQuery DatePicker的下一个和上一个按钮

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T16:41:14.750

根据您更新的问题，我假设您选择的元素是在 DOM 准备好之后创建的，在这种情况下，您很可能希望使用事件委托。例如，

```
$(document).delegate('.ui-datepicker-prev', 'hover', function() {
    alert('H');
});

$(document).delegate('.ui-datepicker-prev', 'click', function() {
    alert('C');
});

$(document).delegate('.ui-datepicker-prev', 'mouseover', function() {
    alert('MO');
}); 
```

请注意，委派悬停和鼠标悬停事件非常昂贵，因此您可能需要重新考虑这一点。另一种方法是直接绑定到元素（就像您在示例中尝试的那样），但要等到确定元素存在之后再这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:50:34.740

如果您正在创建新元素，请尝试使用 live()

```
$("#todayBtn").live("hover", function(){
  alert('H');
}); 
```

还可以将您的代码包装在 DOM 中

```
$(document).ready(function() {
  // Your code
}); 
```

# ajax - MVC 3：在_Layout视图上更改用户jQueryUi对话框，如何处理？

> ID：10538606
> 
> 赞同：0
> 
> 时间：2012-05-10T16:40:25.523
> 
> 标签：ajax, asp.net-mvc, jquery-ui, jquery-ui-dialog

我正在尝试在我的网站上实现一个管理员功能，该功能允许管理员通过输入用户名来模拟用户（以查看他们看到的内容）。

现在，我在 _Layout 主视图的 _LogOn 部分视图中将此设置作为 jQueryUi 对话框，因为这将在每个页面上。但是，由于一些我以前从未处理过的问题，我不确定此时该做什么。

1）我需要检查输入的用户名是否存在，如果不存在，它应该在对话框的表单中显示一条消息。

2）提交后我需要重新加载整个页面（因此显示的内容会因新用户更新而改变）。

3) 页面重新加载后，该框应再次打开。对话框表单提交后。

所以我不知道如何实现这一点，因为部分没有控制器，我也不知道如何根据提交是否来自该特定表单来重新出现 jquery 框，也不知道如何在部分不是时获取错误消息t 基于模型。然后我考虑制作表单 AJAX，但我也不知道该怎么做，因为最终必须重新加载整个页面才能更新显示。

除了默认代码之外，对 _LogOn 部分的补充：

```
if (SessionUtil.IsSiteAdmin)
{
    <button id="impersonate" style="position: relative; right: 20px; float: left; top: -30px;">Impersonate</button>
    <div id="impersonate-user" title="Admin User Impersonation">
        @using (Html.BeginForm())
        {
            <p>Currently Impersonating: 
                @if (SessionUtil.User.Id != SessionUtil.UserAbsolute.Id)
                {
                    <text>
                    @SessionUtil.User.FirstName @SessionUtil.User.LastName (@SessionUtil.User.NetId)
                    </text>
                }
                else
                {
                    <text>None</text>
                }
            </p>
            <p>@Html.ActionLink("Stop Impersonating", "StopImpersonating", "Shared", new { area = "", @class = "ui-button ui-widget ui-state-default ui-corner-all" })</p>
            <div>
                <div id="ValidationSummary">
                @Html.ValidationSummary(true)
                </div>
                <fieldset>
                    <div class="editor-label">
                        @Html.Label("Username to Impersonate")
                    </div>
                    <div class="editor-field">
                        @Html.TextBox("Username")
                    </div>

                    <p>
                        <input type="submit" value="Impersonate"/>
                    </p>
                </fieldset>
            </div>
        }
    </div>
} 
```

JS：

```
 <script type="text/javascript">
        $("#impersonate-user").dialog({
            autoOpen: false,
            modal: false,
            width: 400,
            height: 505,
            closeOnEscape: true,
            resizable: false,
            draggable: true
        });
        $("#impersonate")
            .button()
            .click(function () {
                $("#impersonate-user").dialog("open");
                $('.ui-dialog :button, .ui-dialog a').blur();
            });
    </script> 
```

有人可以告诉我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:48:41.347

我建议使用 ajax 进行名称查找，如果找不到则显示错误消息。无需重新加载页面失败。

看起来您正在使用 jQuery，所以对于 #1 和 #2：

```
$.ajax({
     url: actionUrl,
     data: { username: username },
     success: function() {
         window.location = window.location // I think this will refresh the page
     },
     error: function(error) {
         alert('username not found');  // do what you have to do
     }
}); 
```

What I would do for your case is have an action that you call with the above Ajax. If the username exists, it sets some flags in session, e.g.: `Session["IsImpersonating"] = true` and then you could have a block in your page that checks the session, and shows the dialog again:

```
@if ((bool)Session["IsImpersonating"]) // null check omitted
{
     <script>
           $(function() {
                 $("#myDialog").dialog();
           });
     </script>
} 
```

FYI, to run an action with a partial, I think you just have to do the following:

```
@Html.Action("MyAction", "MyController") 
```

This will make a call back to the server, just as if you did a regular page load, and plop the HTML for whatever view it returns onto the page.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:20:50.773

I would suggest implementing a custom IIdentity, that can replace the current user id when you want to impersonate someone. It would return the normal user when User.Current.Name is called, or the impersonated user when User.Current.Name is used.

This is a bit more work on the front side, but then you never have to worry about it in any of your pages.. it just works like normal. In addition, you won't have to change any of your logic in the main app.

# java - 我正在使用带有是或否选项的 dialog.ask...我希望它在弹出时自动突出显示“是”而不是“否”，如何？

> ID：10538610
> 
> 赞同：0
> 
> 时间：2012-05-10T16:40:40.750
> 
> 标签：java, blackberry, dialog

我希望弹出对话框，自动突出显示“是”而不是“否”，以防人们不阅读并单击。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:07:33.937

`Dialog.ask()`有几个可用的重载版本，它们有一个`defaultChoice`参数，例如：

```
Dialog.ask(Dialog.D_YES_NO, "Continue?", Dialog.YES); 
```

# netbeans - 将 J2ME 应用程序部署到手机的身份验证失败

> ID：10538611
> 
> 赞同：2
> 
> 时间：2012-05-10T16:40:44.437
> 
> 标签：netbeans, java-me, midp, wma

我有一个使用 J2ME 发送 SMS 的应用程序，我生成了一个 JAR 文件和一个签名的 JAD 文件，我可以使用 JAR 文件安装和运行我的应用程序，但是我收到“不受信任的 midlet”消息，我无法发送短信，当我尝试时，我得到了这个异常：`wma : open denied`。

当我尝试使用 JAD 文件安装应用程序时，我收到错误消息“身份验证失败”，该文件是使用 netbeans 创建的，这是它的内容：

```
MIDlet-1: smsapp,/res/smsapp.png,ptfs.smsapp
MIDlet-Certificate-1-1: MIIBmzCCAQSgAwIBAgIET6fZJzANBgkqh.....
MIDlet-Jar-RSA-SHA1: Pd68O3nDyskfRQHeAo......
MIDlet-Jar-Size: 765890
MIDlet-Jar-URL: smsapp.jar
MIDlet-Name: smsapp
MIDlet-Permissions: javax.wireless.messaging.sms.send
MIDlet-Vendor: Vendor
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

这是我发送短信的代码：

```
MessageConnection mc;
String addr = "sms://6666";
try{
   mc = (MessageConnection)Connector.open(addr);
}catch(Exception e){
   return;
}
try{
   TextMessage textmessage = (TextMessage)mc.newMessage(MessageConnection.TEXT_MESSAGE);
   textmessage.setAddress(addr);
   textmessage.setPayloadText(smsContent.getText());
   mc.send(textmessage);
}catch(Exception e){
   return;
}
try{
   if(mc != null)
       mc.close();
}catch(Exception e){
} 
```

我正在使用 LG VU 手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:44:09.550

与其使用 NetBeans 对其进行签名，不如使用免费服务 @ [http://www.j2start.com/p/sign-your-midlet.html](http://www.j2start.com/p/sign-your-midlet.html)，您可以使用电话接受的证书对其进行签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T22:10:43.247

我一直在说，请有人向詹姆斯·高斯林开枪！无论如何，除此之外，我遇到了很多这样的问题，不幸的是，这些问题从来没有简单的方法来解决。

一个真正的 MIDlet 通常会有 3-4 个证书。你的只有 1。在早期版本的 Symbian 上存在一个已知问题，允许你在手机上安装自己的定制证书，但如果你的目标是现实世界的设备，则应该避免这种情况。N/B：签名时，请确保删除第 4 个证书，因为这会使旧手机型号出错。P / S：同样使用一组试验和错误，一些请求的权限应该标记为“可选”。

下面是一个工作签名的 JAD 文件示例来指导您。

```
MIDlet-1: MetaDataControlMIDlet, , MetaDataControlMIDlet
MIDlet-2: RootMIDlet, , RootMIDlet
MIDlet-Certificate-1-1: MIIEEDCCAvigAwIBAgIQfFf6YfgWywo3cTLbwbgOuzANBgkqhkiG9w0BAQUFADBKMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMVGhhd3RlLCBJbmMuMSQwIgYDVQQDExtUaGF3dGUgQ29kZSBTaWduaW5nIENBIC0gRzIwHhcNMTMwOTI1MDAwMDAwWhcNMTUwOTE2MjM1OTU5WjBmMQswCQYDVQQGEwJHSDEOMAwGA1UECBMFQWNjcmExEzARBgNVBAcUCkVhc3QtTGVnb24xGDAWBgNVBAoUD1NheWEgTW9iaWxlIEx0ZDEYMBYGA1UEAxQPU2F5YSBNb2JpbGUgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0zB2+fbxSIZYMK0MkXc7XweHwlCWLPrQVexa7B/XuN6d8l/7ob3DZVlDx7Dk5F+qw6uoJFGu+oCvIXGMNeDLz4ND0aZ47wOO0q6f7X4AvHuO8SAfV7fKoty/Lza2Qcl2dlu2LMqnfk5M0tYVGqhzWyQjKfpGqHWX7i6BiKFfsSkhy55y8byN+fpVC5GqgYjqtDjQ3nDpqAwsOBUld5WeChLpvSIq8GVIY7H8uahkyqWnGtJCP6UmjJHcNkNS2ERF34txIdH7gfqRRQsombMusdInVlgj3RUF+R6qE5JZdllMv7g0IScKgbbHIvzbMEGgfwiCx702q4+a6hn7wTD4twIDAQABo4HVMIHSMAwGA1UdEwEB/wQCMAAwOwYDVR0fBDQwMjAwoC6gLIYqaHR0cDovL2NzLWcyLWNybC50aGF3dGUuY29tL1RoYXd0ZUNTRzIuY3JsMB8GA1UdJQQYMBYGCCsGAQUFBwMDBgorBgEEAYI3AgEWMB0GA1UdBAQWMBQwDjAMBgorBgEEAYI3AgEWAwIHgDAyBggrBgEFBQcBAQQmMCQwIgYIKwYBBQUHMAGGFmh0dHA6Ly9vY3NwLnRoYXd0ZS5jb20wEQYJYIZIAYb4QgEBBAQDAgQQMA0GCSqGSIb3DQEBBQUAA4IBAQBlOuYbX2Xd73J3uP4q0GohRqBGAu7GW7A/TvwIVni7u0WYRDfV3fS8QWUUVC+0KGfShswQ8sdUR7l0KtVF+qA5FGWpsS3N+nhH14FjyjQh8kiyDh74GmOvfeCmbN+5N5PEL6qGdD3PHkVvr6VVcXx0GpDF3cVjtpSY6jUGLU7mBQqu1j7zS1TzAUZANIhAwtMXcMMqitT3oMJTIqJdWJGxcvmPQXp3pxPj+rDv8xB++yD8E0q/2C/FUpe8RcYQNfH9P7Bw2tFpvosn5EBJfLW7/iPmQ5ln1OagJRl8+pa3heewn4ycjL8JcnhLBFcVFK6OsetZ+GvoXr0sX9exeYyw
MIDlet-Certificate-1-2: MIIEnDCCA4SgAwIBAgIQR5dNeHOlvKsNL7NwGS/OXjANBgkqhkiG9w0BAQUFADCBqTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDHRoYXd0ZSwgSW5jLjEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjE4MDYGA1UECxMvKGMpIDIwMDYgdGhhd3RlLCBJbmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAMTFnRoYXd0ZSBQcmltYXJ5IFJvb3QgQ0EwHhcNMTAwMjA4MDAwMDAwWhcNMjAwMjA3MjM1OTU5WjBKMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMVGhhd3RlLCBJbmMuMSQwIgYDVQQDExtUaGF3dGUgQ29kZSBTaWduaW5nIENBIC0gRzIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC3i891W58l2n45sJPbONOpI9CC+ukkflwLjoP45npZ5qPFmKeZ0kT/AKalOQSK2imI6tui8xyZFSbCsfT84QxHqQkRBgogkrnHoASMXJQZq1slLB1ifnANzmFs3SuCyc5dSF/3wr68QSMeTyld10+89MUq/GPmfCZOmad5QZ4QSnp5ycaG94aV0ibOPBgq1nzOr82tu/eCLHAmN0XlD0cixgEovS6DXGqkR8Hn0NhrgUY/IRf1B8VDWqZnLLh7YBG1g+71dApycUQ9WP7oGqs4w1nbf244fXbHcmmYNpZX02Yc0lSRBC5UGbDcPbUiXobVKn4g313merFl/sUCTjEtAgMBAAGjggEcMIIBGDASBgNVHRMBAf8ECDAGAQH/AgEAMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQQ0EuY3JsMA4GA1UdDwEB/wQEAwIBBjAyBggrBgEFBQcBAQQmMCQwIgYIKwYBBQUHMAGGFmh0dHA6Ly9vY3NwLnRoYXd0ZS5jb20wHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMDMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFWZXJpU2lnbk1QS0ktMi0xMDAdBgNVHQ4EFgQU1A1lP3q9NMb+R+dMDcC98t4Vq3EwHwYDVR0jBBgwFoAUe1tFz6/Oy3r9MZIaarbzRutXSFAwDQYJKoZIhvcNAQEFBQADggEBAFb+U1zhx568p+1+U21qFEtRjEBegF+qpOgv7zjIBMnKPs/fOlhOsNS2Y8UpV/oCBZpFTWjbKhvUND2fAMNay5VJpW7hsMX8QU1BSm/Td8jXOI3kGd4Y8x8VZYNtRQxT+QqaLqVdv28ygRiSGWpVAK1jHFIGflXZKWiuSnwYmnmIayMj2Cc4KimHdsr7x7ZiIx/telZM3ZwyW/U9DEYYlTsqI2iDZEHZAG0PGSQVaHK9xXFnbqxM25DrUaUaYgfQvmoARzxyL+xPYT5zhc5aCre6wBwTdeMiOSjdbR0JRp1PuuhAgZHGpM6UchsBzypuFWeVia59t7fN+Qo9dbZrPCU=
MIDlet-Certificate-1-3: MIIERTCCA66gAwIBAgIQM2VQCHmtc+IwueAdDX+skTANBgkqhkiG9w0BAQUFADCBzjELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMR0wGwYDVQQKExRUaGF3dGUgQ29uc3VsdGluZyBjYzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjEhMB8GA1UEAxMYVGhhd3RlIFByZW1pdW0gU2VydmVyIENBMSgwJgYJKoZIhvcNAQkBFhlwcmVtaXVtLXNlcnZlckB0aGF3dGUuY29tMB4XDTA2MTExNzAwMDAwMFoXDTIwMTIzMDIzNTk1OVowgakxCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwx0aGF3dGUsIEluYy4xKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xODA2BgNVBAsTLyhjKSAyMDA2IHRoYXd0ZSwgSW5jLiAtIEZvciBhdXRob3JpemVkIHVzZSBvbmx5MR8wHQYDVQQDExZ0aGF3dGUgUHJpbWFyeSBSb290IENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArKDw+4BZ1JzHpM+doVlzCRBFDA0sbmjxbFtIaElZN/wLMxnCd3/MEC2VNBzm600JpxzSuMmXNgK3idQkXwbAzESUlI0CYm/rWt0RjSiaXISQEHoNvXRmL2o4oOLVVETrHQefB7pv7un9Tgsp9T6EoAHxnKv4HH6JpOih2HFlDaNRe+680iJgDblbnd+6/FFbC6+Ysuku6QToYofeK8jXTsFMZB7dz4dYukpPymgHHRydSsbVL5HMfHFyHMXAZ+sy/cmSXJTahcCbv1N9Kwn0jJ2RH5dqUsveCTakd9h7h1BE1T5uKWn7OUkmHgmlgHtALevoJ4XJ/mH9fuZ8lx3VnQIDAQABo4HCMIG/MA8GA1UdEwEB/wQFMAMBAf8wOwYDVR0gBDQwMjAwBgRVHSAAMCgwJgYIKwYBBQUHAgEWGmh0dHBzOi8vd3d3LnRoYXd0ZS5jb20vY3BzMA4GA1UdDwEB/wQEAwIBBjAdBgNVHQ4EFgQUe1tFz6/Oy3r9MZIaarbzRutXSFAwQAYDVR0fBDkwNzA1oDOgMYYvaHR0cDovL2NybC50aGF3dGUuY29tL1RoYXd0ZVByZW1pdW1TZXJ2ZXJDQS5jcmwwDQYJKoZIhvcNAQEFBQADgYEAhKhMyT4qvJrizI8LsiV3xGGJiWNa1KMVQNT7Xj+0Q+pjFytrmXSeCajd1FYVLnp5MV9jllMbNNkV6k9tcMq+9oKp7dqFd8x2HGqBCiHYQZl/Xi6Cweiq95OBBaqStB+3msAHF/XLxrRMDtdW3HEgdDjWdMbWj2uvi42gbCkLYeA=
MIDlet-Certificate-1-4: MIIDJzCCApCgAwIBAgIBATANBgkqhkiG9w0BAQQFADCBzjELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMR0wGwYDVQQKExRUaGF3dGUgQ29uc3VsdGluZyBjYzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjEhMB8GA1UEAxMYVGhhd3RlIFByZW1pdW0gU2VydmVyIENBMSgwJgYJKoZIhvcNAQkBFhlwcmVtaXVtLXNlcnZlckB0aGF3dGUuY29tMB4XDTk2MDgwMTAwMDAwMFoXDTIwMTIzMTIzNTk1OVowgc4xCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEdMBsGA1UEChMUVGhhd3RlIENvbnN1bHRpbmcgY2MxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xITAfBgNVBAMTGFRoYXd0ZSBQcmVtaXVtIFNlcnZlciBDQTEoMCYGCSqGSIb3DQEJARYZcHJlbWl1bS1zZXJ2ZXJAdGhhd3RlLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA0jY2aovXwlue2oFBYo847kkEVdbQ7xwblRZH7xhINTpS9CtqBo87L+pW46+GjZ4X9560ZXUCTe/LCaIhUdib0GfQug2SBhRz1JPLlyoAnFxODLz6FVL88kRu2hFKbgifLy3j+ao6hnO2RlNYyIkFvYMRuHM/qgeN9EJN50CdHDcCAwEAAaMTMBEwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQQFAAOBgQAmSCwWwlj66BZ0DKqqX1Q/8tfJeGBeXm43YyJ3Nn6yF8Q0ufUIhfzJATj/Tb7yFkJD57taRvvBxhEf8UqwKEbJw8RCfbz6q1lu1bdRiBHjpIUZa4JMpAwSremkrj/xw0llmozFyD4lt5SZu5IycQfwhl7tUCemDaYj+bvLpgcUQg==
MIDlet-Jar-RSA-SHA1: g06Q83fr8h4hhqazd3jOThNORFlhWVo3lu+VzRv8aaEtQrMYkvZXR6fsKyNm7yR5+XaLYQ03F9yDMCOu2ZdAyScwmfzmnhtMLzT9cKJ8rq8hvYH4K9Q9j0iTUijnUJ7mEpWbJTYVQ858Ln6yyJerwk8hKAi++tsdlMwLv3gmq3W/QrnEDmT8vexBtBjhWOJTxkaNp89vb9gfa3bCg4pOYsEYoOLrHglXBkt0dy/IEnkxpUaCihBf7S+rUaZo0Y+Q8/qqadRl8khkzhpDyONSXzT4QKogA3nC0nAh4wKh3DTgxeSzZax57+QESCAfRaDExH2Oksu+ULVpgckoq+7Kmw==
MIDlet-Jar-Size: 9772
MIDlet-Jar-URL: SoundByte.jar
MIDlet-Name: SoundByte
MIDlet-Permissions: javax.microedition.io.Connector.comm, javax.microedition.io.Connector.file.read, javax.microedition.io.Connector.file.write, javax.microedition.media.control.RecordControl
MIDlet-Permissions-Opt: javax.microedition.content.ContentHandler
MIDlet-Vendor: Vendor
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

# php - 如何正确使用 pear 和 pear2 包？

> ID：10538615
> 
> 赞同：1
> 
> 时间：2012-05-10T16:40:55.587
> 
> 标签：php, pear, pyrus

我已经在我的项目中设置了我的 pear 安装：

> php pyrus.phar mypear c:\apache24\htdocs\my-project\vendor

但它会创建以下文件夹结构：

```
.configsnapshots
docs
downloads
php <---------- Here is where pyrus is installing pear + pear2 packages
tests
.pear2registry 
```

然后，我是否应该将 \my-project\vendor\php 添加到我的 include_path 并只需要这些类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:00:28.873

PEAR 包不仅提供 PHP 代码，还提供单元测试、文档和数据文件（例如条形码或 figlets 的字体文件）。您看到的目录结构就是这种分离的结果。

所以是的，将`php`目录添加到您的包含路径并开始需要文件。您也可以简单地使用与[PSR-0](http://www.php-fig.org/psr/0/)兼容的自动装载机。

# php - 这个变量 echo 怎么会变成 16？

> ID：10538621
> 
> 赞同：0
> 
> 时间：2012-05-10T16:41:10.380
> 
> 标签：php

```
$body = "Artist: " + $artist + "Size: " + $size + "Time: " + $time + "Concept: " + $concept + "Time: " + $time + "Mod: " + $mod + "Details: " + $details; 
```

当我尝试回显这个变量时，所有出来的都是“16”。

你们能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:42:01.623

PHP 中的连接运算符`.`不是`+`

```
$body = "Artist: " . $artist . "Size: " . $size . "Time: " . $time . "Concept: " . $concept . "Time: " . $time . "Mod: " . $mod . "Details: " . $details; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:42:04.617

在 PHP 中，连接运算符是`.`，不是`+`

所以：

```
$body = "Artist: " . $artist . "Size: " . $size . "Time: " . $time . "Concept: " . $concept ."Time: " . $time . "Mod: " . $mod . "Details: " . $details; 
```

# ruby-on-rails - 哪个 rails 版本（在 rails 3.xx 中）与 rails 2.3.11 项目的升级更相关

> ID：10538628
> 
> 赞同：-1
> 
> 时间：2012-05-10T16:41:40.937
> 
> 标签：ruby-on-rails

我有一个 rails 2.3.11 项目，这个项目有 assm、act_as_version、act_as_tree、gruff....等大约 25 个插件。这个项目有 153 个模型和大约 130 个控制器，我必须在 rails 3.xx 中升级我的项目

我必须使用哪个版本的 rails 3.xx 来升级我的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:46:27.813

无论您想要哪个版本......如果您需要 Rails 3.2 提供的某些服务，请执行此操作。如果您只需要 Rails 3.1 提供的服务（如资产管道），请使用它。或者只是使用 3.0 来保持简单。请记住，版本越高，您必须进行的更改就越多。

BTW 153 型号和 130 控制器？这听起来像是出了什么大问题。

# objective-c - CTFontCopyFamilyName() 导致泄漏

> ID：10538633
> 
> 赞同：0
> 
> 时间：2012-05-10T16:42:04.273
> 
> 标签：objective-c, memory-leaks, core-text

我正在开发一个使用 Core Text 的程序......并且我在以下代码行中有泄漏：

```
NSString *familyName = (NSString*)CTFontCopyFamilyName(font); 
```

当我写作时，`CFRelease((CFStringRef)familyName);`我得到了错误的访问异常。当我写`[familyName release];`我有同样的问题。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:57:46.590

采用 -

```
NSString *familyName = [(NSString*)CTFontCopyFamilyName(font) autorelease]; 
```

# java - 更新 JDialog 时焦点丢失

> ID：10538641
> 
> 赞同：0
> 
> 时间：2012-05-10T16:42:35.787
> 
> 标签：java, swing, focus

我有：

*   a `JTable`，嵌入在 a 中`JScrollPane`，包含项目列表
*   a `JPanel`，嵌入在 a`JDialog`中，显示与所选项目相关的信息

代码按预期工作（信息得到更新），除了每次更改选择时`JTable`失去焦点和获得焦点。`JDialog`所以我添加了一个`table.requestFocusInWindow`但`JTable`仍然失去焦点，尽管调用返回 true。

如何确保`JDialog`更新但`JTable`不会失去焦点？

ps：我的最终目标是能够使用箭头（向上/向下）浏览表格并在 JDialog 中查看信息更新 - 目前，我需要单击行来执行此操作。

**EDIT**
See below a SSCCE that replicates my issue (the content of the JDialog changes when selection is changed but the focus is lost).

```
public class TestTable extends JTable {

    public static JFrame f = new JFrame();
    public static JTextField text = new JTextField();
    public static JDialog dialog;

    public static void main(String[] args) {
        f.setSize(300, 300);
        f.setLocation(300, 300);
        f.setResizable(false);
        showPopup();
        final JScrollPane jScrollPane = new JScrollPane();
        jScrollPane.getViewport().add(new TestTable());
        f.add(jScrollPane);
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public TestTable() {
        super();
        setModel(new TestTableModel());
        getSelectionModel().addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                ListSelectionModel lsm = (ListSelectionModel) e.getSource();
                int row = lsm.getAnchorSelectionIndex();

                Object item = getModel().getValueAt(row, 0);

                text.setText(item.toString());
                dialog.setVisible(true);
                TestTable.this.requestFocusInWindow(); //DOES NOT DO ANYTHING
            }
        });
        setCellSelectionEnabled(false);
    }

    public class TestTableModel extends DefaultTableModel {

        public TestTableModel() {
            super(new String[]{"DATA"}, 3);
            setValueAt(Double.valueOf(-0.1), 0, 0);
            setValueAt(Double.valueOf(+0.1), 1, 0);
            setValueAt(Double.valueOf(0), 2, 0);
        }
    }

    private static void showPopup() {
        dialog = new JDialog(f, "Title");
        dialog.setContentPane(text);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.pack();
        dialog.setLocationRelativeTo(null);
        dialog.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:21:16.423

您的对话框中必须有一些东西可以即时抓住焦点，因为我已经尝试过使用 JLabel 并且它不会引起任何问题。如果您需要解决这个问题，您可以随时调用`toFront()`您的 JTable 父框架。如果它对您的情况没有帮助，请尝试编辑此[SSCCE](http://sscce.org)以重现您的问题。

请参阅此代码（评论标签上的 grabFocus 以说服自己在对话框中有一些东西可以抓住焦点）：

```
import java.awt.Component;
import java.util.Vector;

import javax.swing.FocusManager;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;

public class Test {

    public static class MyTableModel extends DefaultTableModel {
        private int count;

        public MyTableModel() {
            addColumn("Test");
        }

        public void insertNewRow() {
            Vector<String> rowData = createNewRowData();
            insertRow(0, rowData);
        }

        private Vector<String> createNewRowData() {
            Vector<String> data = new Vector<String>(1);
            data.add("Hello-" + count++);
            return data;
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }

    public void initUI() {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final MyTableModel model = new MyTableModel();
        final JTable table = new JTable(model);
        for (int i = 0; i < 100; i++) {
            model.insertNewRow();
        }
        final JLabel label = new JLabel();
        JDialog dialog = new JDialog(frame, false);
        dialog.add(label);
        dialog.setSize(300, 50);
        dialog.setLocation(400, 0);
        dialog.setVisible(true);
        table.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                final Component focused = FocusManager.getCurrentManager().getFocusOwner();
                int index = table.getSelectionModel().getLeadSelectionIndex();
                if (index > -1) {
                    Object valueAt = model.getValueAt(index, 0);
                    label.setText("Current row selected is: " + valueAt);
                } else {
                    label.setText("No selection");
                }
                label.grabFocus();
                if (focused != null) {
                    SwingUtilities.invokeLater(new Runnable() {

                        @Override
                        public void run() {
                            frame.toFront();
                        }
                    });
                }
            }
        });
        final JScrollPane scroll = new JScrollPane(table);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        frame.add(scroll);
        frame.pack();
        frame.setVisible(true);

    }
} 
```

# python - 无法使用 httplib2 提交没有文件的多部分表单

> ID：10538647
> 
> 赞同：1
> 
> 时间：2012-05-10T16:43:27.440
> 
> 标签：python, web-scraping, python-2.7, urllib2, httplib2

我需要编写一个脚本，通过选择“蛋白质结构（转到步骤 2b）”自动在[http://iedb.ebi.ac.uk/tools/ElliPro/iedb_input](http://iedb.ebi.ac.uk/tools/ElliPro/iedb_input)提交表单，然后在名为“pdbId”的文本字段，无需上传任何文件。我写了以下脚本，但它给了我相同的页面而没有发生任何提交。怎么了 ？

```
 import httplib2

 http = httplib2.Http()

url = 'http://iedb.ebi.ac.uk/tools/ElliPro/iedb_input'   
body = { 'pdbFile' : '', 'protein_type':'structure','pdbId':'5LYM' }
headers = {'Content-type': 'application/x-www-form-urlencoded','User-Agent':'Mozilla/5.0 (X11; Linux i686; rv:7.0.1) Gecko/20100101 Firefox/7.0.1'}
response, content = http.request(url, 'POST', headers=headers, body=urllib.urlencode(body))
print content 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:33:26.417

我终于用机械化了，它奏效了！

```
 from mechanize import Browser, _http
 br = Browser()
 br.set_handle_robots(False)
 br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

 br.open('http://iedb.ebi.ac.uk/tools/ElliPro/iedb_input')
 br.select_form(name='predictionForm')
 br.form['protein_type'] = ['structure',]
 br.form['pdbId'] = '5LYM'
 submit_response = br.submit(name='Submit', label='Submit')
 print submit_response.read() 
```

# android - 区分滑动并在android中单击（如果是滑动则将事件传递给其他视图）

> ID：10538648
> 
> 赞同：4
> 
> 时间：2012-05-10T16:43:42.370
> 
> 标签：android, onclick, scrollview, gesture, swipe

嗨，我有一个覆盖（线性布局），它位于另一个视图（scrollview）的顶部，现在我希望用户仍然能够通过滚动视图上下滚动，但是每当他们点击时，覆盖应该拦截点击事件和做点别的。如果它是滑动，或者实际上不是单击，则覆盖应该忽略并将事件传递给它后面的视图。

我试图将 onClick 绑定到覆盖，但它无法告诉点击/点击和滑动，即滑动触发覆盖的 onClick，点击/点击也触发相同的 onClick 事件，换句话说，用户不能向下滚动...有人可以帮忙吗？

1.  有没有办法可以将事件传递给其他人，即在这种情况下滚动视图，以便它可以向下滚动？

# c# - 在 C#.Net Windows 应用程序中使用 WSO2 数据服务

> ID：10538650
> 
> 赞同：0
> 
> 时间：2012-05-10T16:43:50.727
> 
> 标签：c#, .net, wso2, webservice-client, wso2dss

我正在尝试将在“WSO2 数据服务服务器”上创建的服务消耗到本地 .NET 客户端（Windows 应用程序）中。我能够与服务通信（我能够列出这些服务提供的操作）。但是当我尝试调用方法应用程序时会引发以下错误。

命名空间“XYZ”中的 XML 元素“ABCD”引用了一个方法和一个类型。使用 WebMethodAttribute 更改方法的消息名称或使用 XmlRootAttribute 更改类型的根元素。

我刚刚通过Visual Studio添加了对Windows应用程序的服务引用并尝试了调用方法

任何人都可以逐步解决上述问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:47:03.783

除了为结果集提供不同的名称之外，还有其他解决方案吗？

如果我在 Web 服务中有 3 个方法并且所有方法都导出相同

然后我觉得将它们重命名为Customers1、Customers2和Customers3对我来说很不自然

这是我的示例，它在 .NET 中导致问题，因为有 3 个方法都返回 Entries->Entry

```
<data name="ws_getSubnoCCInfo" serviceNamespace="com.test.ws">
   <config id="tro">
      <property name="driverClassName">oracle.jdbc.driver.OracleDriver</property>
      <property name="url">jdbc:oracle:thin:xxx/yyy@10.10.10.10:1521/DB</property>
      <property name="username">xxx</property>
      <property name="password">yyy</property>
   </config>
   <query id="subnoHasCCSQL" useConfig="tro">
      <sql>select case when count(*) &gt; 0 then 'OK' else 'NOK' end hasCC  from ccinfo where subno = :subno</sql>
      <result element="Entries" rowName="Entry">
         <element column="hasCC" name="hasCC" xsdType="string"/>
      </result>
      <param name="subno" sqlType="STRING"/>
   </query>
   <query id="idNoHasCCSQL" useConfig="tro">
      <sql>select case when count(*) &gt; 0 then 'OK' else 'NOK' end hasCC from ccinfo cc, tabs.crm_departement ui where cc.contrno = ui.contrno and ui.id_no = :id_no</sql>
      <result element="Entries" rowName="Entry">
         <element column="hasCC" name="hasCC" xsdType="string"/>
      </result>
      <param name="id_no" sqlType="STRING"/>
   </query>
   <query id="contrnoHasCCSQL" useConfig="tro">
      <sql>select case when count(*) &gt; 0 then 'OK' else 'NOK' end hasCC from ccinfo cc where contrno = :contrno</sql>
      <result element="Entries" rowName="Entry">
         <element column="hasCC" name="hasCC" xsdType="string"/>
      </result>
      <param name="contrno" sqlType="STRING"/>
   </query>
   <operation name="subnoHasCC">
      <call-query href="subnoHasCCSQL">
         <with-param name="subno" query-param="subno"/>
      </call-query>
   </operation>
   <operation name="idNoHasCC">
      <call-query href="idNoHasCCSQL">
         <with-param name="id_no" query-param="id_no"/>
      </call-query>
   </operation>
   <operation name="contrnoHasCC">
      <call-query href="contrnoHasCCSQL">
         <with-param name="contrno" query-param="contrno"/>
      </call-query>
   </operation>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:34:51.407

当您对数据服务配置中的操作和元素使用相同的名称时，就会发生这种情况。当您添加服务引用时，代理在 VS 中创建，无法区分类型和方法。您能否尝试在数据服务配置中为操作和其他 XML 属性提供不同的名称？如果它仍然不起作用，请发布您的数据服务配置。

# objective-c - 返回按钮背景图像的问题

> ID：10538653
> 
> 赞同：0
> 
> 时间：2012-05-10T16:43:55.007
> 
> 标签：objective-c, ios5

我已经在 appDelegate 中实现了这段代码，以便定制导航栏后退按钮背景图像：

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
    if (version >= 5.0)
    {
        // iPhone 5.0 code here
        UIImage *buttonImage = [[UIImage imageNamed:@"btn_backesp.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(1, 10, 1, 10)];
        [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

    }

    return YES; 
```

但是我得到了这个错误，似乎两个后退按钮重叠，自定义与默认一个。我试图隐藏左栏按钮项目，然后都隐藏。

![在此处输入图像描述](../Images/b7eca25c4747a7137bb43ab84f486721.png)

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:56:33.663

使用下面的代码设置返回按钮图像，效果很好

```
UIButton *backBtn     = [UIButton buttonWithType:UIButtonTypeCustom];  
UIImage *backBtnImage = [UIImage imageNamed:@"btn_backesp.png"]  ;  
[backBtn setBackgroundImage:backBtnImage forState:UIControlStateNormal];  
[backBtn addTarget:self action:@selector(goback) forControlEvents:UIControlEventTouchUpInside];  
backBtn.frame = CGRectMake(0, 0, 54, 30);  
UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn] ;  
self.navigationItem.leftBarButtonItem = cancelButton; 
```

回退方法：-

```
- (void)goback
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# java - 这个 jar 构建缺少什么？

> ID：10538656
> 
> 赞同：1
> 
> 时间：2012-05-10T16:44:03.507
> 
> 标签：java, netbeans-7

好吧，这让我感到困惑：

我一直在使用 Netbeans 进行一些简单的编码来编译和运行一些 Java 程序，现在我已经掌握了窍门，我尝试构建一个 jar 文件并在 Netbeans 之外打开它，但我被击中了面对这个错误：

```
Error: Could not find or load main class C:\Users\n\Desktop\DirectoryLi
st_1\DirectoryList_1\build\classes\directorylist\DirectoryList_1.jar 
```

我不确定是如何/为什么会发生这种情况，因为我可以运行程序，该程序会生成一个包含一些信息的文本文件，当我在 Netbeans 中运行它时完全没问题，排除了什么？什么地方出了错？

这是编译jar的日志：

谢谢您的帮助！

```
init:
deps-clean:
Updating property file: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build\built-clean.properties
Deleting directory C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build
clean:
init:
deps-jar:
Created dir: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build
Updating property file: C:\Users\Maxunknown\Desktop\DirectoryList_1\DirectoryList_1\build\built-jar.properties
Created dir: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build\classes
Created dir: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build\empty
Created dir: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build\generated-sources\ap-source-output
Compiling 1 source file to C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build\classes
compile:
Created dir: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\dist
Copying 1 file to C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\build
Nothing to copy.
Building jar: C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\dist\DirectoryList_1.jar
To run this application from the command line without Ant, try:
java -jar "C:\Users\n\Desktop\DirectoryList_1\DirectoryList_1\dist\DirectoryList_1.jar"
jar:
BUILD SUCCESSFUL (total time: 0 seconds) 
```

非常混乱且应该组织得更好的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package directorylist;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintWriter;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 * This program lists the files in a directory specified by the user. The user
 * is asked to type in a directory name. If the name entered by the user is not
 * a directory, a message is printed and the program ends.
 */
public class DirectoryList {

    public static void main(String[] args) {
        try {
//            String directoryName;             // Directory name entered by the user.
//            Scanner scanner;                  // scanner reads from standard input.
//            scanner = new Scanner(System.in); // scanner reads from standard input.
//
//            System.out.print("Enter a directory name: ");
//            directoryName = scanner.nextLine().trim();

            String indent = "";
            String userHome = System.getProperty("user.home");
            String fileSeparator = System.getProperty("file.separator");

            File log = new File(userHome + fileSeparator + "log.txt");
            FileOutputStream stream;
            stream = new FileOutputStream(log);
            PrintWriter out = new PrintWriter(stream);

//            System.out.println(userHome);
//            System.out.println(fileSeparator);

            for (int i = 0; i < userHome.length(); i++) {
                if (userHome.charAt(i) == fileSeparator.charAt(0)) {
                    userHome = userHome.substring(0, i + 1);
                }
            }

            System.out.println("Files in directory \"" + userHome + "\"");
            out.println("Files in directory \"" + userHome + "\"");
            directoryListV2(userHome, 1, out);
        } // end main()
        catch (FileNotFoundException ex) {
            Logger.getLogger(DirectoryList.class.getName()).log(Level.SEVERE, null, ex);
        }
    } // end main()

    public static void directoryListV2(String directoryName, int directoryLevel, PrintWriter out) {

        File directory;        // File object referring to the directory.
        String[] files;        // Array of file names in the directory.
        directory = new File(directoryName);
        String fileSeparator = System.getProperty("file.separator");
        String indent = "";

        for (int i = 0; i < directoryLevel; i++) {
            indent += "  ";
        }

        if (directory.isDirectory() == false) {
            if (directory.exists() == false) {
                System.out.println("There is no such directory!");
                out.println("There is no such directory!");
            } else {
                System.out.println("That file is not a directory.");
                out.println("That file is not a directory.");
            }
        } else {
            files = directory.list();
//            System.out.println("Files in directory \"" + directory + "\":");
//            out.println("Files in directory \"" + directory + "\":");

            if (files != null) {
                for (int i = 0; i < files.length; i++) {
                    if (isDirectory(directoryName + fileSeparator + files[i] + fileSeparator)) {
                        System.out.println(indent + directoryName + fileSeparator + files[i] + fileSeparator);
                        out.println(indent + directoryName + fileSeparator + files[i] + fileSeparator);

                        directoryListV2(directoryName + fileSeparator + files[i], directoryLevel + 1, out);
                    } else {
                        System.out.println(indent + files[i]);
                        out.println(indent + files[i]);
                    }
                }
            }
        }
        out.flush();
    }

    private static boolean isDirectory(String directoryName) {
        File directory;

        directory = new File(directoryName);
        if (directory.isDirectory() == true) {
            if (directory.exists() == true) {
                return true;
            }
        }
        return false;
    }
} // end class DirectoryList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:42:05.463

问题是您的 jar 中的主类未加载。

为此，您必须在 jar 中为 Main 类创建一个清单条目。

[您可以在此处](http://csdl.ics.hawaii.edu/~johnson/613f99/modules/04/jar-files.html)找到有关创建可执行 jar 的最佳教程

其他资源也可以在[这里](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html.3)找到，这是 Sun 创建可执行 jar 的主要指南。

希望这对你有用。

享受 ！！

# php - 添加斜杠可以安全地防止数组中的 xss？

> ID：10538658
> 
> 赞同：4
> 
> 时间：2012-05-10T16:44:25.940
> 
> 标签：php, javascript, arrays, xss

今天遇到了一些代码，它有一个 javascript 数组，用 php 制作，只使用 php 的 addlashes() 来清理。起初**我以为这是一个简单的 XSS 漏洞，但我一直没能看到它的缺陷**。这是我正在谈论的一个例子：

foo.php

```
$itemList = "[";

foreach ($array as $item) 
{
    $itemList .= "'".addslashes($item)."',";
}

$itemList = "'']"; 
```

bar.html

```
<script>
    var a = <?php echo $itemList; ?>
</script> 
```

显然类似的东西`']; alert("xss"); b=['`不会有效，因为它会变成`\']; alert(\"xss\"); b=[\'`. **那么这真的安全吗，而且我的代码气味不存在？**

`

`

**编辑：**

有人可以告诉我这*怎么*行吗？我知道这不是最佳实践，并且不会在我的代码中使用它，但是如果我想重写代码，我需要**证明**来说服其他人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:48:20.713

不，不，不，不，不，**不**。

为正确的工作使用正确的功能。

`addslashes`不是**任何**上下文的转义函数，它只是添加斜杠。

如果您要打印到 HTML 使用`htmlentities`（或`htmlspecialchars`如果适用）。

如果要打印到 JavaScript，请使用`json_encode`.

如果您正在构建 MySQL 查询，请使用`mysql_real_escape_string`

等等

* * *

`addslashes`使用代替时滥用的机会`json_encode`是例如字符串： `"</script><iframe src=hxxp://phising.mywebsite.com>"`

这将结束脚本并插入来自不可信且可能有害的域的 iframe。

# python - Python win32gui 滚动 Internet Explorer/Firefox/Web 浏览器窗口

> ID：10538663
> 
> 赞同：3
> 
> 时间：2012-05-10T16:45:02.103
> 
> 标签：python, win32gui

我已经通过向它发送向上/向下键和/或向下/向上键来使其工作，但我想要一种更原生的方式来做到这一点，特别是滚动 X 量。

我试过这些：

```
win32gui.PostMessage(self.find_scrollable(), win32con.WM_MOUSEWHEEL, win32con.WHEEL_DELTA * 3)

win32gui.PostMessage(self.find_scrollable(), win32con.WM_VSCROLL, win32con.SB_LINEDOWN) 
```

没有成功。

但是这些工作：

```
 win32gui.PostMessage(window, win32con.WM_KEYDOWN, key)
    win32gui.PostMessage(window, win32con.WM_KEYUP, key) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:01:14.710

您可能想尝试 PyWinauto。它会给你更多的工具来使用。

# php - php中的日期变量

> ID：10538664
> 
> 赞同：-1
> 
> 时间：2012-05-10T16:45:02.790
> 
> 标签：php, datetime

我编写了一个代码，用于将存储在三个不同变量中的日期、月份和年份变量附加到一个数组中，并使用 implode 函数将其更改为适当的日期格式；但这并没有按预期显示输出。代码如下：

```
$year = 2012;
$month1 = $_POST["month1"];
$date = $_POST["date"];
$array[] = "{$year}{$month1}{$date}";   
$imp = implode('/',$array);
echo $imp; 
```

这里`$date`并`$month1`取自表单....输出显示为`20121220`但不是`2012/12/20`。

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T16:47:09.233

```
$array[] = "{$year}{$month1}{$date}"; 
```

是数组的有效构造，但它不是您想要的构造。它创建一个包含一个元素的数组，该元素由一个字符串组成。

使用您的 implode 函数，您希望将几个不同的元素内爆为一个，因此日期的每个部分都应该是一个元素。像这样：

```
$array = array($year, $month1, $date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:47:30.257

您没有将每个项目都放在一个数组中。您正在创建一个字符串。说一个数组就是这样做的：

```
$arr = array($year, $month1, $date); 
```

但是，为什么不只是做

```
$result = "{$year}/{$month1}/{$date}"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T16:49:12.150

只需使用[`sprintf()`](http://php.net/manual/en/function.sprintf.php)

```
$result = sprintf("%04d/%02d/%02d", $year, $month, $date); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T16:47:53.537

你`$array`的设置不符合你的预期。尝试：

```
$array = array($year, $month1, $date);
$imp = implode('/',$array);
echo $imp; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T16:48:13.707

你有没有尝试过..

```
$array = array($year,$month1,$date);   
$imp = implode('/',$array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T16:50:32.787

`$array[] = "{$year}{$month1}{$date}";`有几个问题：

1) 数组表示如下：

```
array($year, $month1, $date); 
```

2) 数组的分配没有`[]`

所以你想说

```
$array = array($year, $month1, $date); 
```

# java - UN MARSHALING XML to JAVA object for Restful Service 使用 JAXRS

> ID：10538665
> 
> 赞同：0
> 
> 时间：2012-05-10T16:45:07.823
> 
> 标签：java, xml, rest, jax-rs, unmarshalling

我正在尝试基于用户上传的 XML 文件来实现布尔返回（真/假）。例如，我有一个元素方向，指示它包含的数据类型。所以我有兴趣取消编组数据并返回布尔值。

第 1 步：对 POST 方法感兴趣，将使用[POSTMAN](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm) chrome 应用程序进行测试。

第 2 步：Contents 对象保存所有用于取消编组和编组的内容

包验证器.服务；

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

// Created the Contents object to hold everything for un marshaling and marshaling

@XmlRootElement( name = "contents" )
public class Contents
{
    @XmlElement
    String portalarea;

    @XmlElement
    String portalsubarea;

    @XmlElement
    String direction;

    public String getportalarea()
    {
        return portalarea;
    }

    public String getportalsubarea()
    {
        return portalsubarea;
    }

    public String getdirection()
    {
        return direction;
    }

} 
```

第 3 步：具有用于接收请求的验证类并取消编组 XML 以返回布尔值。

```
package validatorService;

import java.io.InputStream;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.Unmarshaller;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

@Path ("/valid")
public class ValidatorService
{
    boolean n_value = false;
    boolean r_value = false;

    @POST
    @Produces( MediaType.TEXT_PLAIN )
    @Consumes( "application/xml" )
    public String validate( String xmlContent )
    {
        HttpClient httpclient = new DefaultHttpClient();

        try
        {
            if ( xmlContent != null )
            {
                if ( xmlContent.startsWith( "https" ) )
                {
                    HttpGet xmlGet = new HttpGet( xmlContent );

                    HttpResponse response = httpclient.execute( xmlGet );
                    int responseStatus = response.getStatusLine().getStatusCode();
                    // String responseMessage = response.getStatusLine().getReasonPhrase();

                    if ( responseStatus == 200 )
                    {
                        HttpEntity responseEntity = response.getEntity();
                        InputStream inStream = responseEntity.getContent();

                        Contents direction = unmarshalingContent( inStream, xmlContent );

                        if ( direction.equals( "N" ) )
                        {
                            n_value = true;

                        }
                        else if ( direction.equals( "R" ) )
                        {
                            r_value = true;

                    }
                    else
                    {
                        System.out.println( "Response Error : " + responseStatus ); // Should be
                                                                                    // handled
                                                                                    // properly
                    }

                }
                else
                {
                    System.out.println( " 'https' Format Error" ); // Should be handled properly
                }

                return "success";
            }

        }
        catch ( Exception e )
        {
            e.printStackTrace();
            System.out.println( " Error caught at catch " + e ); // Should be handled properly for
                                                                 // all exception
        }
        finally
        {
            httpclient.getConnectionManager().shutdown();
        }

        return null;
    }

    public Contents unmarshalingContent( InputStream inputStream, String resourceClass ) throws Exception
    {
        System.out.println( " welcome " );

        if ( resourceClass == "xmlContent" )
        {
            JAXBContext jc = JAXBContext.newInstance( "com.acme.bar" );
            Unmarshaller u = jc.createUnmarshaller();

            XMLInputFactory inputFactory = XMLInputFactory.newInstance();
            XMLStreamReader xReader = inputFactory.createXMLStreamReader( inputStream );

            JAXBElement<Contents> jaxBElement = (JAXBElement<Contents>) u.unmarshal( xReader, Contents.class );

            Contents portalArea = (Contents) jaxBElement.getValue();
            Contents portalSubarea = (Contents) jaxBElement.getValue();
            Contents direction = (Contents) jaxBElement.getValue();

            return direction;
        }
        throw new Exception( "Invalid resource request" );

    }
} 
```

我是 RESTful 服务的新手，我阅读了一些文档，并根据说明尝试完成给定的任务。因此，非常感谢任何帮助、更正、指导和代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:17:54.573

它可以简单得多。您无需手动进行 XML 到 Java 对象的转换。JAX-RS 提供程序会自动执行此操作。

```
@POST
@Produces( MediaType.TEXT_PLAIN )
@Consumes( "application/xml" )
public Response validate(Contents con){ //con will be initialized by JAX-RS
  //validate your XML converted to object con
  boolean validation_ok = ...
  if(validation_ok){
     return Response.ok("true").build();
  }else{
     return Response.ok("false").build();
  }
} 
```

# python - 带有 lxml 的 xml 文件中的属性类型

> ID：10538666
> 
> 赞同：2
> 
> 时间：2012-05-10T16:45:10.077
> 
> 标签：python, types, attributes, xsd, lxml

我使用 python 和 lxml 读取 xml 文件，这些文件是针对 xsd 文件进行验证的。我想找出属性的 xs:type 。

到目前为止我的代码：XSD

```
...      
<xs:complexType name="io" >
  <xs:attribute name="number" type="xs:decimal" use="optional" default="5.9"/>
</xs:complexType>
... 
```

XML

```
...
<io number="1.1">
... 
```

然后是 Python 代码：

```
with open(self.xmlSchemaFilename) as schema:
     xmlschema_doc = objectify.parse(schema)
self.xmlschema = etree.XMLSchema(xmlschema_doc)
parser = etree.XMLParser(schema = self.xmlschema,
               attribute_defaults = True, remove_blank_text=True)
with open(self.xmlFilename) as myfile:
    tree = objectify.parse(myfile, parser)  
    #this correctly asserts the type from the xsd
root = tree.getroot()
self.xmlRoot = objectify.fromstring(etree.tostring(root))
self.xmlschema.assertValid(self.xmlRoot) 
```

现在我可以通过访问所有子节点的类型

```
type(self.xmlRoot.child) 
```

它从 xsd 返回正确的类型并得到类似的东西

```
<type 'lxml.objectify.IntElement'> 
```

但对于属性，我通过

```
self.xmlRoot.child.attrib['number'] 
```

无论 xsd 规范如何，类型始终为 str。我如何获得属性的类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:29:06.427

我不认为这是可能的。我不介意被证明是错误的，但是很难看出 lxml 如何提供有关属性类型的信息。

API 具有“类型化”的[`lxml.objectify`](http://lxml.de/objectify.html)元素类（例如`IntElement`），但没有表示属性的类。在 lxml（和 ElementTree；lxml 所基于）中，属性是元素的属性，当您请求属性值时，您会得到字符串。

# python - virtualenv 可以从另一个继承吗？

> ID：10538675
> 
> 赞同：20
> 
> 时间：2012-05-10T16:45:56.957
> 
> 标签：python, virtualenv

我想以`virtualenv`另一个为起点创建一个，这可能吗？

我必须牢记用例：

1.  假设我有两个`virtualenv`用于生产，一个用于开发。开发环境需要与生产环境相同的包，但它需要其他我在生产环境中不需要的包。我不想两次安装常用软件包。

2.  例如，我想试验一个包的开发版本`matplotlib`。软件包的开发版本与稳定版本的要求相同。所以我创建了一个`virtualenv`调用`matplotib_stable`和安装的要求和稳定版本。然后我创建了第二个`virtualenv`调用`matplotlib_dev`并`matplotlib_stable`用作起点（针对`matplotlib`要求），然后我安装了开发版本。

[如何使用 pip 从本地缓存安装？](https://stackoverflow.com/questions/4806448/how-do-i-install-from-a-local-cache-with-pip)似乎解决了下载包的问题，​​但我认为它不涉及修改`sys.path`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T17:30:37.760

一种解决方案是使用`virtualenvwrapper`'[`add2virtualenv`](http://www.doughellmann.com/docs/virtualenvwrapper/command_ref.html#add2virtualenv)命令。这个

> 将指定目录添加到当前活动 virtualenv 的 Python 路径。

因此，如果我有两个`virtualenv`,`ENV1`和`ENV2`, 并且我想`ENV2`访问 中的包`ENV1`，那么我需要：

1.  激活`ENV2`：

    `workon ENV2`

2.  使用添加`ENV1`的站点包目录`add2virtualenv`：

    `add2virtualenv $WORKON_HOME/ENV1/lib/python2.6/site-packages`

以上假设`$WORKON_HOME`是您的 virtualenv 目录的位置，并且您使用的是 python2.6，因此显然要相应地调整它们。

虽然这提供了对包的访问，但它不会调整 shell 路径。换句话说，`bin`使用此方法无法访问安装到目录的脚本。

# c# - 如何将 XML 写入加密文件？

> ID：10538676
> 
> 赞同：3
> 
> 时间：2012-05-10T16:45:57.657
> 
> 标签：c#, xml, encryption

我需要将 XML 数据写入加密文件。我可以读/写加密文件，但我无法弄清楚如何跳过文件输入部分并从 MemoryStream 对象中执行。

这就是我到目前为止所拥有的。基本上我只需要得到一个 Byte[] 来执行我的标准加密。

我很欣赏很棒的意见。我将很快对此进行测试。

编辑：测试后，当我尝试关闭 memorystream 对象时，出现“无法访问关闭的流”异常。

```
MemoryStream ms = new MemoryStream();
XmlTextWriter xmlwriter = new XmlTextWriter(ms,Encoding.ASCII);
FileStream EncryptedFileStream = new FileStream(file, FileMode.Create, FileAccess.Write);

DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
DES.Key = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");
DES.IV = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");

ICryptoTransform desEncrypt = DES.CreateEncryptor();
CryptoStream cryptostream = new CryptoStream(EncryptedFileStream, desEncrypt, CryptoStreamMode.Write);

//create xml document

byte[] bytearray = new byte[ms.Length];
ms.Read(bytearray, 0, bytearray.Length);

cryptostream.Write(bytearray, 0, bytearray.Length);

cryptostream.Close();
ms.Close();
EncryptedFileStream.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:51:27.600

写入 MemoryStream 并使用 MemoryStream.ToArray()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:52:37.420

没有像 StreamWriter 这样的东西，它在构造函数中不接受任何内容。写入以您的真实目标流为目标的 CryptoStream。

编辑：你说“我的标准加密”。您是使用标准的 .NET 加密还是使用自定义方法推出自己的算法？此解决方案可能依赖于您将其修改为 ICryptoTransform 实现。

# gwt - 是否有可用于 GWT 的 Shoveler 小部件？

> ID：10538679
> 
> 赞同：1
> 
> 时间：2012-05-10T16:46:01.057
> 
> 标签：gwt

我想知道是否有人知道 GWT 的开源 Shoveler 小部件，[就像 YUI 库中的](http://yuilibrary.com/gallery/show/shoveler). 例如，请参阅[http://gregthebusker.com/yui/shoveler/testShoveler.html](http://gregthebusker.com/yui/shoveler/testShoveler.html)

谢谢，

卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:51:21.367

这相当于 JQuery 中的图像滑块，在 GWT 中没有这样的小部件。您可能必须使用基本小部件自己制作。

# mysql - 聚合 MySQL 数据，正在使用 group by，但它并没有完全符合我的要求

> ID：10538681
> 
> 赞同：2
> 
> 时间：2012-05-10T16:46:04.630
> 
> 标签：mysql, database, aggregate

我有一个 iOS 游戏的社区驱动数据库。我正在尝试汇总社区收集的数据，它看起来像这样：

```
+--------+--------+--------------+
| color1 | color2 | result_color |
+--------+--------+--------------+
| red    | blue   | purple       |
| blue   | red    | purple       |
| red    | blue   | purple       |
| yellow | blue   | green        |
+--------+--------+--------------+ 
```

目前，我正在运行以下查询：

```
select
    count(*) as count,
    `Mixes`.*
from
    `mixes` AS `Mixes`
where
    `result_color` = 'purple'
group_by
    color1,
    color2
order by
    `count` desc 
```

产生以下输出：

```
+-------+--------+--------+--------------+
| count | color1 | color2 | result_color |
+-------+--------+--------+--------------+
| 2     | red    | blue   | purple       |
| 1     | blue   | red    | purple       |
+-------+--------+--------+--------------+ 
```

但是，我希望它产生以下输出，因为在混合颜色时，首先混合哪种颜色并不重要：

```
+-------+--------+--------+--------------+
| count | color1 | color2 | result_color |
+-------+--------+--------+--------------+
| 3     | red    | blue   | purple       |
+-------+--------+--------+--------------+ 
```

所以，我的问题是，如何在 2 列上聚合数据，以便当 color1 为红色且 color2 为蓝色时，聚合函数将其视为与 color1 为蓝色且 color2 为红色时相同？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:01:27.743

如果您只有两个颜色列，您可以简单地使用 CASE 表达式对它们进行排序：

```
SELECT
  COUNT(*) AS `count`,
  CASE WHEN color1 < color2 THEN color1 ELSE color2 END AS color1,
  CASE WHEN color1 >= color2 THEN color1 ELSE color2 END AS color2,
  resultcolor
FROM mixes
WHERE resultcolor = 'purple'
GROUP BY
  CASE WHEN color1 < color2 THEN color1 ELSE color2 END,
  CASE WHEN color1 >= color2 THEN color2 ELSE color1 END,
  resultcolor
ORDER BY `count`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:27:20.133

尝试这个

```
SELECT COUNT(*) AS `Count`, M.*
FROM
(SELECT
  CASE WHEN color1 < color2 THEN color1 ELSE color2 END AS color1,
  CASE WHEN color1 > color2 THEN color1 ELSE color2 END AS color2,
  result_color
FROM mixes
WHERE result_color = 'purple') M
GROUP BY M.color1, M.color2
ORDER BY
    `Count` DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:55:35.460

这是我想到的逻辑，您需要实现它..

您基本上有一个内部选择查询，它选择所需的最终选择列，加上一个称为颜色的新自定义列，它基本上是一个连接，`color1`但`color2`添加了逻辑，即字典顺序较小的字符串总是与较大的字符串连接，这可以是在 SQL 中使用 switch/if 语句完成。

因此，您的自定义`color`列将看起来像`bluered`两行。

现在你有一个按这个自定义列分组的外部查询，你应该得到你想要的输出。

比较和选择的SQL应该如下：

```
SELECT CASE WHEN STRCMP(color1,color2)<=0 THEN color2+''+color1 ELSE color1+''+color2 END
FROM Mixes
WHERE result_color='purple' 
```

希望有效。如果我对自己感觉良好，我可能会尝试编写整个 SQL 查询。

另外，当您可以按 result_color 将其分组时，我也不明白按两种颜色分组的原因，但我尝试按照您的要求回答您的问题（可能是您有原因）

# windows - 具有 npm 的 Windows 上的 unix 权限

> ID：10538682
> 
> 赞同：2
> 
> 时间：2012-05-10T16:46:06.097
> 
> 标签：windows, node.js, unix, file-permissions, npm

我在 windows 上写了一个 node.js 模块并使用 npm 发布它。我的一个用户使用 linux 并给了我这个反馈：

> 您的 npm 包中目录的权限不正确。它们不包括用户的执行权限。这需要使用管理员权限 (sudo) 进行安装，这不是一个好主意。

在 Windows 上使用 npm 时如何授予这些权限？

# javascript - 尝试使用 jQuery.load() 上传 http:// 文件

> ID：10538690
> 
> 赞同：0
> 
> 时间：2012-05-10T16:46:41.787
> 
> 标签：javascript, jquery

我正在尝试使用 jquery.load() 方法将 html 页面从服务器加载到同一服务器上的另一个页面中。这是代码：

```
<div id="mydiv">
<script type="text/javascript" >
 $('#mydiv').load('http://www.myurl.com/ns/pagename.html');
</script>
</div> 
```

它没有加载...我在本地对其进行了测试，将其加载到其他页面上并且很好...html页面本身也可以正常工作...我做错了什么？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:48:24.677

尝试：

```
<div id="mydiv"></div>  
<script type="text/javascript">
    $('#mydiv').load('/ns/pagename.html body');
</script> 
```

在将 div 添加到 DOM 后发出请求，请求相对 URL 并仅获取正文。

# python - 如何使用 Python 将大小参数发送到 openCV 2.4 中的 CreateVideoWriter 函数

> ID：10538694
> 
> 赞同：1
> 
> 时间：2012-05-10T16:46:45.987
> 
> 标签：python, opencv, tuples

据我了解，在 openCV 2.4 中忽略了 cvSize 类型，可以改用 Python 元组。当我尝试使用 CreateVideoWriter 函数时：

```
import cv2 as cv
writer = cv.CreateVideoWriter('movie', cv.CV_FOURCC('M', 'J', 'P', 'G'), fps, (width,    height)) 
```

我收到此错误：TypeError: CvSize argument 'frame_size' 需要两个整数。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:48:56.580

您正在将 cv2 功能（不需要 CvSize）与 cv 函数 cv.CreateVideowriter()

而是使用：

```
import cv2
cv2.VideoWriter('movie',cv2.cv.CV_FOURCC('M', 'J', 'P', 'G'),fps,(width,height)) 
```

# vb.net - vb.net 为我的每个私有变量

> ID：10538698
> 
> 赞同：3
> 
> 时间：2012-05-10T16:47:01.277
> 
> 标签：vb.net, for-loop

我在 VB.net 中工作，我想创建一个通用的 ToString。有没有办法在“我”中做一个“为每个人”。

样本

```
 Public Property Var1() As String {... get ... set ...}
 Public Property Var2() As String {... get ... set ...}
 Public Property Var2() As String {... get ... set ...}

 Public Overrides Function ToString() As String
     dim str as stringbuilder
     for each item in Me
        str.append(item.tostring())
     next
     return str
 End Function 
```

我的问题的原因是因为我的一些变量可以为空（无）。所以有了这样的泛型，我可以做到

```
if item isnot nothing then
    str.append(item.tostring())
end if 
```

也许有更好的方法？？？

保护你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:02:10.957

这可以通过使用反射来实现`GetFields`。干得好：

```
Public Class [MyClass]
    Private a As String
    Private b As String

    Public Sub New(a As String, b As String)
        Me.a = a
        Me.b = b
    End Sub

    Public Overrides Function ToString() As String
        Dim sb = New StringBuilder()
        For Each item In [GetType]().GetFields(BindingFlags.NonPublic Or BindingFlags.Instance)
             sb.Append(item.Name) _
               .Append("=") _
               .Append(item.GetValue(Me)) _
               .Append(" ")
        Next
        Return sb.ToString()
    End Function 
```

如果要显示属性，请使用`GetProperties`

# maven - 如何使用 Maven 将 tarball 打包到 tarball 中

> ID：10538701
> 
> 赞同：0
> 
> 时间：2012-05-10T16:47:19.920
> 
> 标签：maven, tar, maven-assembly-plugin

所以有一些文件夹我想单独压缩成 tar.gz 文件，然后统一压缩成 tar.gz 文件。有没有办法在 Maven 中做到这一点？

编辑：我知道 Maven 的程序集插件。据我所知，如果你有类似的东西：

```
<assembly>
  <id>src</id>
  <formats>
     <format>tar.gz</format>
  </formats>
  <fileSets>
    <fileSet>
      <directory>src</directory>
    </fileSet>
  </fileSets>
</assembly> 
```

它只会在项目 tar 文件中包含“src”文件夹。我想知道的是，在将 src 文件夹添加到项目的 tar 文件之前，您将如何创建它的 tar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:54:41.850

您需要使用 bin 描述符创建一个[Maven 程序集，如此处所示。](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html)

这里也有关于[创建 tar 文件的参考](https://stackoverflow.com/questions/10097170/maven-assembly-plugin-not-creating-tar-files-with-directory-entries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:26:34.800

tar 本身只是一个文件，它是其他 tar 可以引用的资源。如果您的构建试图为一个目的创建一个 tar，然后是一个包含该 tar 的程序集，我建议创建一个您从执行递归的 maven 构建运行的 ant 脚本。

如果您在某处机器上有一个 tar 并且您只想包含它，则程序集可以添加该文件。

# mysql - 如何使用 REGEX 清理标点符号、空格和字母

> ID：10538704
> 
> 赞同：0
> 
> 时间：2012-05-10T16:47:22.477
> 
> 标签：mysql, regex, replace

我有一些电话号码的例子，如下所示：

```
0810-093-485-58
0811.4845.5677
0812 567 6788 2
08138475967079/0813845765998
0814749345875 NEW
64739845985
0815756867967 (G) / 022 845 769
00816956865090
0817637698578 
```

我尝试使用replace和regexp，如下：

```
select replace (number, '','') as phone_number
from details
where number not regexp '[[:punct:] A-Za-z]' and number not regexp '^ [1-9]' 
```

这些语法仅适用于结果：

```
0817637698578 
```

**我的意思**是我想**清理**那些标点符号、空格和包含的字母：

```
081009348558
081148455677
08125676788 2
08138475967079
0814749345875
0815756867967
0816956865090
0817637698578 
```

因此，结果不仅是一个，而是所有电话号码，只是非数字被清除。语法呢？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:00:08.960

您的`where`子句排除了所有包含字母、空格或标点符号的数字，因此无论如何您将看到的都是格式正确的数字。也不`replace (number, '','')`会对字符串进行任何更改。

没有正则表达式`replace`函数就没有很好的方法可以做到这一点，正则表达式函数可用作用户定义的函数，但不是本机函数。看[`PREG_REPLACE`这里](http://www.mysqludf.org/lib_mysqludf_preg/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:04:59.197

为什么不在发布到数据库的代码中这样做呢？regexp 在大多数语言中比在 SQL 中要容易得多，而且您还有一个额外的好处，那就是不会在数据库服务器上增加更多负载。

粗略的对这个问题没有帮助。您是否考虑过使用用户定义的函数？例如这个包[https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)？

# c# - Non-Blocking IO是如何实现的？

> ID：10538708
> 
> 赞同：18
> 
> 时间：2012-05-10T16:47:42.743
> 
> 标签：c#, java, sockets, nonblocking

在 Java 或 C# 或其他一些语言中，有非阻塞 IO 工具，例如用于套接字。

所以我可以将我的回调函数提供给非阻塞 IO，一旦非阻塞 IO 接收到任何东西，它就会调用我的回调。

我想知道它们是如何实现的。如果我在幕后创建非阻塞 IO，Java 或 C# 是否只是为它们创建后台线程？或者底层的操作系统对它们有原生支持？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T16:51:26.080

在 Windows 上，底层操作系统支持非阻塞 I/O，微软的 CLR 就利用了这一点。其他 CLR 实现（单声道）可能也可以，但我不确定。在 Microsoft CLR 上执行异步 I/O 时，挂起的异步 I/O 操作和等待这些 I/O 操作完成的线程（或至少托管线程）之间没有一对一的关联。

有关Win32 层详细信息的一些详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365683(v=vs.85).aspx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365683(v=vs.85).aspx)还有关于 I/O 完成端口的信息：http: [//msdn.microsoft.com/en-us/library/aa365198 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365198(VS.85).aspx)

我的理解是这样的：

1.  我在某个应用程序线程上开始异步 I/O 操作。
2.  如果还没有，将创建一个队列（嗯，实际上是一个称为 I/O 完成端口的内核级构造，它与我的应用程序内核空间中的一个队列相关联）。在 .NET 世界中，一个专门指定的线程称为 I/O 完成端口线程将开始等待该队列上的 I/O 完成通知。这里要注意的重要一点是，我可以发出任意数量的异步 I/O 请求，而无需增加 I/O 完成端口的数量。
3.  当 I/O 完成时，操作系统将通过将 I/O 完成消息排入队列来通知应用程序。然后，I/O 完成端口线程将通过在我的 .NET 应用程序中调用 I/O 完成回调来处理该消息。同时，如果其他 I/O 完成，它的结果将排在当前处理结果的后面。

上述注意事项：

1.  我确信我错了一部分，但我相信它的整体要点是正确的。Eric 或其他人可以进来纠正我的错误。

2.  在 .NET 中有多个 I/O 完成端口线程。我不知道如何在各种 I/O 完成端口之间分配异步 I/O 请求。这可能是一个操作系统特性（其中 I/O 可能会在应用程序打开的任何端口上返回）。

对于 Java，我确信它取决于 JVM 实现和特定的操作系统。我对它的了解几乎不足以推测除此之外。

[编辑：历史更新，这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198(v=vs.85).aspx)有更多细节

# javascript - 如何将 addClass 应用于父级的父级？

> ID：10538709
> 
> 赞同：0
> 
> 时间：2012-05-10T16:47:43.063
> 
> 标签：javascript, jquery, twitter-bootstrap

我在用着 ：

```
$parent.addClass('error'); 
```

但我想将无效类添加到“父级的父级”。有没有办法编写它，或者是指定这个“祖父母”的确切 ID 或类别的唯一解决方案？

这是我的html：

```
<div class="control-group">
    <label class="control-label" for="">Label</label>
    <div class="controls">
        <input id="1" type="text">
    </div>
</div>

<div class="control-group error">
    <label class="control-label" for="">Label</label>
    <div class="controls">
        <input id="2" type="text">
    </div>
</div> 
```

我有很多 .control-group 类，所以我只想在重点类上添加错误类，所以我不能这样做：

```
$(".control-group").addClass("error"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:49:45.907

您可以使用`.parent()`，例如：

```
$(this).parent().parent().addClass('error'); 
```

但是，如果您改用以下代码，您将在标记中留有一些灵活性`.closest()`：

```
$(this).closest('.control-group').addClass('error'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:50:38.163

我很确定你可以使用`$parent.parent().addClass...`

我建议查看 jQuery 文档，因为它包含许多类似这样的有用功能。[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T16:52:30.477

像这样的东西： $("select-grandchild-here").parent().parent().addClass("error");

# python - 如何卸载使用 easy_install 安装的软件包的非活动版本

> ID：10538712
> 
> 赞同：3
> 
> 时间：2012-05-10T16:47:50.320
> 
> 标签：python, package, pip, easy-install

我发现`pip`我的 OS X 上安装了两个版本，我想删除旧版本（也被标记为“非活动” `yolk -l`）。

在另一篇[SO](https://stackoverflow.com/questions/1231688/how-do-i-remove-packages-installed-with-pythons-easy-install)帖子中，我发现您可以使用`pip uninstall`命令卸载软件包。但就我而言，我只想删除旧版本的软件包，而保持活动版本不变。我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:11:09.103

要删除您的非活动版本，您应该从 easy-install.pth 文件中删除它，并删除该软件包的 egg 目录。我没有 OS X，但在我的 ubuntu 中，easy-install.pth 位于“/usr/local/lib/python2.7/dist-packages/easy-install.pth”中，egg 目录位于“/ usr/local/lib/python2.7/dist-packages/”。

# c# - 从不同的域中删除 Cookie

> ID：10538714
> 
> 赞同：0
> 
> 时间：2012-05-10T16:47:54.253
> 
> 标签：c#, wpf, cookies, webautomation

我正在开发一个网络自动化工具。在运行该工具后，一旦相关网站创建了 cookie，如果我再次尝试运行它会破坏自动化。因此，我想在自动化开始之前删除 cookie。我无权访问实际创建 cookie 的域。这可能吗？我知道如何操作 cookie，但是当您尝试从其他网站访问 cookie 时，所有这些逻辑都会失败。

此外，如果可以避免的话，我不想创建 WebBrowser 控件。我正在尝试使用 httpWebRequests 做所有事情，以使其看起来更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:20:02.603

如果您的测试环境在 Windows 系统上运行（听起来确实如此），您可以使用 pInvoke 来操作缓存。需要以下四种方法。不幸的是，代码归我工作的公司所有，而不是我，所以我不能在这里全部粘贴。它涉及使用“FindFirstUrlCacheEntry”和“FindNextUrlCacheEntry”迭代缓存中的条目。检查缓存条目，看它是否是 cookie，是否属于您感兴趣的域，如果是，您可以将其删除。

```
[DllImport (@"wininet", SetLastError = true, CharSet = CharSet.Auto)]
private static extern IntPtr FindFirstUrlCacheEntry ([MarshalAs (UnmanagedType.LPTStr)] string searchPattern, IntPtr ptrCacheEntryInfo, ref int cacheEntryInfoSize);

[DllImport (@"wininet", SetLastError = true, CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
private static extern bool FindNextUrlCacheEntry (IntPtr ptrCacheHandler, IntPtr ptrCacheEntryInfo, ref int cacheEntryInfoSize);

[DllImport (@"wininet", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
private static extern bool FindCloseUrlCache (IntPtr ptrCacheEntryInfo);

[DllImport ("wininet.dll", SetLastError = true, CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
private static extern bool DeleteUrlCacheEntry (IntPtr lpszUrlName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:57:41.647

您应该无法使用来自 X 以外的其他地方的 http 请求删除网站 X 放置的 cookie。

你有两种可能性：

*   您使用自动化工具自动从浏览器 UI 中删除 cookie。
*   您通过更改与本地缓存中的 x 域相关的 ip（或通过其他方式）来伪造网站 X。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:58:35.470

我最终只是清除了所有的 cookie。服务器的设置方式应该不多，所以这真的不是问题。遍历每个 cookie 是它对我有用的唯一方法。当我尝试删除文件夹时，我收到有关我的权限级别的错误。

```
 private void ClearCookies()
    {
        string[] theCookies = System.IO.Directory.GetFiles(Environment.GetFolderPath(Environment.SpecialFolder.Cookies));

        foreach (string currentFile in theCookies)
        {
            try
            {
                System.IO.File.Delete(currentFile);
            }
            catch (Exception ex) { }
        }
    } 
```

# android - 使用 ICS 上传 Android 文件

> ID：10538716
> 
> 赞同：0
> 
> 时间：2012-05-10T16:48:01.883
> 
> 标签：android

直到 Android 3.0 我可以使用以下代码将文件上传到我的服务器： 使用 ICS，使用 httpurlconnection.getinputstream 时代码返回 filenotfoundexception 有人建议使用 HTTPPOST 转换此代码，但老实说我不知道​​该怎么做。

有什么建议吗？

```
public class FileUpload extends AsyncTask<Void, Integer, Void> {

    @Override
    protected void onProgressUpdate(Integer... progress) {
        dialog.setProgress(progress[0]);
    }

    private ProgressDialog dialog;
    private String reponse_data;
    private String file_path;
    private JobInstance localJob;
    private Context localContext;
    private CharSequence testo;
    private HttpURLConnection connection;

    // can use UI thread here
    protected void onPreExecute() {
        dialog = new ProgressDialog(localContext);
        dialog.setMessage("Uploading...");
        dialog.setIndeterminate(false);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setProgress(0);
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {

        try {
            File file = new File(file_path);
            FileInputStream fileInputStream = new FileInputStream(file);
            byte[] bytes = new byte[(int) file.length()];
            fileInputStream.read(bytes);
            fileInputStream.close();

            URL url = new URL("https://myserver.com/functionUpload?lang=it-IT");
            connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "audio/x-flac; rate=16000");
            connection.setRequestProperty("Content-Length", String.valueOf(bytes.length));

            if(Build.VERSION.SDK_INT < 11){
                connection.setDoOutput(true);
            }

            //connection.connect();     
            OutputStream outputStream = connection.getOutputStream();

            int bufferLength = 1024;
            for (int i = 0; i < bytes.length; i += bufferLength) {
                int progress = (int) ((i / (float) bytes.length) * 100);
                publishProgress(progress);
                if (bytes.length - i >= bufferLength) {
                    outputStream.write(bytes, i, bufferLength);
                } else {
                    outputStream.write(bytes, i, bytes.length - i);
                }
                outputStream.flush();
            }

            publishProgress(100);

            outputStream.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            int risp = connection.getResponseCode();
                DataInputStream inStream = new DataInputStream ( connection.getInputStream() );
            String str;
            while (( str = inStream.readLine()) != null){
                Log.e("Debug","Server Response "+str);
                reponse_data=str;

                    JSONObject jObject = new JSONObject(reponse_data);
                    JSONArray menuObject = jObject.getJSONArray("hypotheses");
                    testo = menuObject.getJSONObject(0).getString("utterance").toString();
            }
            inStream.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;

    }

    @Override
    protected void onPostExecute(Void result) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }
        Toast.makeText(localContext, testo, Toast.LENGTH_LONG).show();
    }

    public void executeBefore(Context context, JobInstance j) {
        localContext = context;
        dialog = new ProgressDialog(localContext);
        localJob = j;
        this.file_path = localJob.getFinalfileposition().getAbsolutePath();
        this.execute();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:57:42.960

我的内容长度”应该是“内容长度”，我还修复了问题中的代码。

# python - 将表达式作为参数传递：关键字不能是表达式

> ID：10538717
> 
> 赞同：2
> 
> 时间：2012-05-10T16:48:02.117
> 
> 标签：python, python-2.7

这是我的行动：

```
>>> def show(d):
        print d
... 
>>> test = {"result": True}
>>> show(test)
{'result': True}
>>> show(test["info"]="Some info")
  File "<console>", line 1
SyntaxError: keyword can't be an expression 
```

为什么我不能将表达式作为参数传递给函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T16:54:54.490

该`=`符号向 Python 表明这是一个关键字参数，而不是位置参数。由于左边的部分`=`是一个表达式`test["info"]`，你会得到错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T16:58:18.687

不允许在 Python 表达式中赋值的原因是其他语言中常见的、难以发现的错误，由以下结构引起：

```
if (x = 0) {
    // error handling
}
else {
    // code that only works for nonzero x
} 
```

**来源**：[http ://docs.python.org/faq/design.html#why-can-ti-use-an-assignment-in-an-expression](http://docs.python.org/faq/design.html#why-can-t-i-use-an-assignment-in-an-expression)

[![在此处输入图像描述](../Images/2187611cadc8d05318e5886c1408e844.png)](https://i.stack.imgur.com/Zf0gJ.jpg)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T17:09:36.790

我认为您想要做的是将它作为 glob 类型传递。

```
show(*test) 
```

这样做你必须匹配你的 arg 签名所以 test 必须被定义为

```
test = {'d' : True} 
```

或表演必须是

```
def show(result): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T16:50:57.680

因为一般来说没有意义。你想从中得到什么？赋值不返回值。

让我们考虑几种可能性：

*   表达式应该作为函数传递——你应该使用 lambda，或者创建一个实际的函数。
*   该表达式应该返回一个布尔值以表示成功 - Python 会在失败时引发异常，而是检查那些异常。
*   表达式应该给出`None`- 这没有任何价值。

无论哪种方式，您尝试做的事情都没有意义。

# jquery - jQuery Mobile pageinit/pagecreate 未触发

> ID：10538718
> 
> 赞同：18
> 
> 时间：2012-05-10T16:48:04.457
> 
> 标签：jquery, jquery-mobile

我有 5 页 - 为方便起见，可以说：

*   一个.html
*   二.html
*   三.html
*   四.html
*   五.html

当我加载每个单独的页面时，两者`pageinit`都`pagecreate`正确触发。

问题：

当我从 one.html 转到 two.html 时，`pageinit`两者`pagecreate`都会触发，但是当我返回 one.html（从 two.html）时，`pageinit`不要`pagecreate`触发。

为什么会这样，我怎么能总是触发`pageinit`和`pagecreate`页面加载，以及浏览每个页面？

更新：

对于我拥有的每一页：

```
<div data-role="page" id="page-name">

 // content
</div> 
```

为了测试事情发生时的顺序，我这样做：

```
$(document).on('pagecreate','[data-role=page]', function(){
  console.log('PAGECREATE');
});
$(document).on('pageinit','[data-role=page]', function(){
  console.log('PAGEINIT');
});
$(document).on('pagebeforeshow','[data-role=page]', function(){
  console.log('PAGEBEFORESHOW');
});
$(document).on('pageshow','[data-role=page]', function(){
  console.log('PAGESHOW');
}); 
```

如何使用 pagechange 始终调用`pageinit`and`pagecreate`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T22:04:52.783

您正在检查错误的事件，pageinit 和 pageshow 是您应该关注的。

**pageinit**每次第一次加载页面时触发，jQM 将页面缓存在 DOM/内存中，因此当您从 two.html 导航回 one.html 时，pageinit 不会触发（它已经初始化）

**pageshow**每次显示页面时都会触发，这是您从 two.html 导航回 one.html 时需要寻找的内容

你可以一起编写很多干净的代码，使用 pageinit 进行初始化、配置等，并将你的 DOM 更新到初始状态。如果页面上有动态数据可能会在视图之间发生变化，请在 pageshow 中处理

这是我们在生产环境中使用的大型网站的一个很好的设计：

1.  将实时事件绑定到所有页面/对话框 pageinit 和 pageshow 事件中的某些包含在每个页面上：

    `$(document).on('pageinit pageshow', 'div:jqmData(role="page"), div:jqmData(role="dialog")', function(event){`

2.  我用名称引用每个页面：`<div data-role="page" data-mypage="employeelist">` 在这个现场活动中，您基本上可以为每个页面“名称”设置一个 switch 语句，然后检查 event.type 的 pageinit/pageshow 或两者，并将您的代码放在那里，然后每次页面created/shown 这个事件将被触发，它知道是哪个页面触发了它，然后调用相应的代码

3.  现在，无论用户进入您网站的哪个入口点，所有页面的所有处理程序都已加载。您可能已经知道，当您导航到一个页面时，它只会拉入`<script/>`div[data-role="page"] - 忽略 中的任何 JS，`<head/>`在每个页面上放置单独的 JS 是一团糟，应该避免我相信的任何大型网站

4.  尽量不要在你的 jQuery 中使用一揽子选择器，例如`$('div.myClass')`因为这将搜索你的所有 DOM，其中可能有多个 jQM 页面。幸运的是，在上面提到的 pageinit/pageshow 的实时事件处理程序中，`this`指的是当前页面。在其中进行所有 DOM 搜索，例如，`$(this).find('div.myClass')`这可确保您仅抓取当前页面中的元素。（当然这不是 ids 关心的问题）。*注意在 pageshow 事件中你也可以使用`$.mobile.activePage`，但这在 pageinit 中不可用，所以我不使用它来保持一致性*

我最终有太多的代码，所以我构建了一个处理程序对象，其中每个页面的 js 都包含在一个单独的 js 文件中，并且可以使用实时事件注册处理程序

缺点是整个站点的所有 js 都加载在用户到达的第一页上，但即使是比 jQuery 或 jQM 小的大型站点也会缩小，所以这不应该是一个问题。*但如果你的网站真的很大，我想你可以看看 RequireJS。*

一个优点是每次用户导航到新页面时，您不再通过 AJAX 为每个页面加载所有 JS。**如果您的所有 JS 在入口处可用，您现在可以放置调试器语句并更轻松地进行调试！**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:54:30.400

我相信`pageinit`并且`pagecreate`都只在页面第一次初始化和在 DOM 中创建时分别调用一次。

您可能想查看`pagechange`事件[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T20:12:47.683

您需要彻底阅读 jQuery Mobile 事件文档：http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

上面的链接可以很好地了解每个事件何时触发，以下是页面中的几个示例：

> **页面初始化**
> 
> 在初始化发生后，在正在初始化的页面上触发。我们建议绑定到此事件而不是 DOM ready()，因为无论是直接加载页面还是将内容作为 Ajax 导航系统的一部分拉入另一个页面，这都会起作用。

.

> **页面显示**
> 
> 过渡动画完成后在“toPage”上触发。此事件的回调将接收一个数据对象作为其第二个参数。该数据对象具有以下属性： prevPage (object) 一个 jQuery 集合对象，其中包含我们刚刚转换的页面 DOM 元素。请注意，在应用程序启动期间转换第一页时，此集合为空。

要实际回答您的问题，请不要使用`pageinit`，请使用`pageshow`。`pageshow`在页面的初始显示时触发（就`pageinit`在元素上触发事件之后），但也会在后续访问页面时触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T20:06:27.920

If you want to call some function each time before loading a page then you can use pagebeforeshow i.e.

```
 $("#YourPageID").on('pagebeforeshow ', function() {
        //YourFunctionCall();
    }); 
```

as well as you can try binding your pageinit with page id but page init is called only once while inserting your page in DOM. [http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

```
 $("#YourPageID").on('pageinit', function() {
        //YourFunctionCall();
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:11:58.530

检查此代码：

```
$( document ).delegate("#pageid", "pageinit", function() {  
    console.log('PAGEINIT');    
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T02:11:25.810

以下工作正常

```
<div data-role="page" id="signupForm">
    ...
    ...
<script type="text/javascript" src="test.js"></script>
</div> 
```

test.js 可能包含以下代码

```
// test.js starts here

$('#signupForm').on('pageinit', function(){
    // your code goes here
    ...
    ...

 });
// test.js ends here 
```

在您的登录表单中，您可能有 signupForm 的链接，并且**data-ajax="false"**应该包含在链接到 signupForm 的 href 标记中。

快乐编码

库普拉姆

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-20T08:37:13.793

If it is an ajax request to this page, the script should be written into body or else it doen't work at all for ajax.

```
<!DOCTYPE html>
<html>
  <head>
..........
  </head>
  <body>
    <div data-role="page" data-control-title="Detail" id="self_edit_page" data-theme="e">
...........
  </div>
  <script type="text/javascript" language="javascript" >
  $('#self_edit_page').bind("pagebeforeshow",function(event)
.......
  </script>
   </div>
  </body>
</html> 
```

# javascript - 如何在 Javascript/JQUery 中将返回的 JSON 对象整形为数组？

> ID：10538723
> 
> 赞同：1
> 
> 时间：2012-05-10T16:48:27.403
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在以这种格式从 API 获取 JSON 对象：

```
[{"Id":1,"Name":"A","ParentId":0},
{"Id":2,"Name":"B","ParentId":1},
{"Id":3,"Name":"C","ParentId":2}] 
```

我想把它转换成这种格式

```
['Mike', null, 'The President'],
          ['Alice', 'Mike', null],
          ['Bob', 'Jim', 'Bob Sponge'],
          ['Carol', 'Bob', null] 
```

所以我可以像这样将它传递给google api中的函数

```
var data = google.visualization.arrayToDataTable(<<DATA>>); 
```

我怎么做？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:01:39.587

你可能不希望从“Id”中得到“Mike”，所以这应该如何工作有点难以理解，我不确定我是否真的得到了这个问题，但你尝试过吗：

```
var myData = $​.makeArray(myObject)​; 
```

[jQuery makeArray()](http://api.jquery.com/jQuery.makeArray/)

# jquery - 如何在jquery datepicker中允许字母输入

> ID：10538732
> 
> 赞同：0
> 
> 时间：2012-05-10T16:49:16.157
> 
> 标签：jquery, datepicker

我的问题是如何在 jquery datepicker 中允许字母输入。我想允许用户输入字母输入（可以是没有限制的任何内容）和日期选择器选择选项。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:56:37.247

尝试这个

```
$('#date').datepicker({
    constrainInput: false
}); 
```

# c# - 如何获取某些 html 的所有图像 src

> ID：10538737
> 
> 赞同：4
> 
> 时间：2012-05-10T16:49:41.027
> 
> 标签：c#, regex, image

我用这个

```
string matchString = Regex.Match(sometext, "<img.+?src=[\"'](.+?)[\"'].+?>", RegexOptions.IgnoreCase).Groups[1].Value; 
```

获取图像 src。

但是我怎样才能得到我能找到的所有 src 呢？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T16:58:53.877

您应该使用 Regex.Matches 而不是 Match，并且您应该添加 Multiline 选项，我相信：

```
foreach (Match m in Regex.Matches(sometext, "<img.+?src=[\"'](.+?)[\"'].+?>", RegexOptions.IgnoreCase | RegexOptions.Multiline))
{
    string src = m.Groups[1].Value;
    // add src to some array
} 
```

# html - 从 Web 服务器发送消息到登录的客户端

> ID：10538745
> 
> 赞同：0
> 
> 时间：2012-05-10T16:50:02.100
> 
> 标签：html, jakarta-ee, servlets, client-server

我有一个 Java Servlet 作为控制器和 html 页面作为视图。在应用程序中，我有两种登录类型。1) 管理员 2) 操作员。

当 Operator 发送一些请求时，如果 Admin 已登录，则需要将消息发送给 Admin。

我能够将消息发布到 Servlet。但是从 Servlet（服务器），我如何向管理员（即客户端）发送消息。请求会话时，我们是否需要存储一些位置并使用它来发送消息？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:52:17.857

在 servlet 中使用`response.getWriter().println("ABC");`将输出写入客户端

# sql - TIMESTAMP 和 SYSDATE

> ID：10538747
> 
> 赞同：5
> 
> 时间：2012-05-10T16:50:11.540
> 
> 标签：sql, oracle, date, time

TIMESTAMP 类型的字段进入最后**n**小时是否是一种简单的比较方法？我可以根据日期和时间进行计算，但有没有可能像

```
timestamp > SYSDATE - 1 
```

(SYSDATE - 1) 是昨天，据了解，这将检查时间戳是否在过去 24 小时内。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T17:14:01.687

如果您需要查找最近 n 小时内的记录，则从当前时间中减去一个时间间隔。对于 Oracle，间隔的数量必须用单引号括起来。您可以使用许多时间间隔（小时、分钟、秒、日、年、月）。

```
timestampfield > current_timestamp - interval '1' hour 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:01:31.777

您也可以添加/减去非整数，例如：

```
SELECT SYSDATE - 0.5 FROM dual; 
```

表示现在之前的 12 小时。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T17:01:08.740

你可以使用喜欢

```
timestamp > to_timestamp(sysdate-1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T16:58:09.873

你可以这样做：

时间戳 > 强制转换（sysdate-1 作为时间戳）

# sql - 将数据附加到广告数据库服务器中的备注字段

> ID：10538753
> 
> 赞同：1
> 
> 时间：2012-05-10T16:50:58.183
> 
> 标签：sql, advantage-database-server

我需要定期将数据附加到字段。我是一个简化的示例，我有 2 个字段，一个定义为备注字段，另一个声明为 cicharacter 大小 255，我正在使用 SQL

```
UPDATE tableName Set memoField = (CASE WHEN memoField is null THEN 'hello' 
                                     ELSE memoField+CHAR(10)+'hello' END),  
                     textField = (CASE WHEN textField is null THEN 'hello' 
                                     ELSE textField+';'+'hello' END) 
```

备注字段更新/附加工作正常，但 textField 仅在该字段之前为空（null）时才有效。如果文本字段已经有数据，我会收到一条错误消息，指示数据丢失，并且没有附加数据

好的，我最终花了足够长的时间来寻找“解决方案”......

```
UPDATE tableName Set textField = (CASE WHEN textField is null THEN 'hello' 
                                   ELSE substring(textField,1,length(textfield))+';hello' END) 
```

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:42:36.620

正如@Gordon 在评论中指出的那样， char 字段末尾有空格，这将被视为字符串的一部分。这可能很明显，但如果 char 字段的大小为 10，并且包含值“Hi”，则`textField + ";Hello"`长度为 16 个字符：

```
012345678901234567890
Hi        ;Hello 
```

子字符串/长度组合的替代方案是`rtrim`，它删除了尾随空格：

```
UPDATE tableName Set textField = (CASE WHEN textField is null THEN 'hello' 
                                   ELSE rtrim(textField)+';hello' END) 
```

# rest - @Autowired 注释无法与 spring 一起正常工作

> ID：10538755
> 
> 赞同：0
> 
> 时间：2012-05-10T16:51:12.427
> 
> 标签：rest, maven, autowired

我的 Maven 项目有一个 Restful 设计，一个带有用户类的域层，一个带有 CRUD 功能的服务的数据层和一个带有控制器类的 Web 层。但是当我运行该项目时，我收到以下错误：

```
javax.servlet.ServletException: Servlet.init() for servlet appServlet threw exception
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
........
java.lang.Thread.run(Thread.java:680)   

root cause

   org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of autowired dependencies failed; nested              
   exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: ........service.UserService org.
   bk.samples.mvc.UserController.userService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [se. 
   datalayer.guards.service.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency 
   annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
   org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) ..........

root cause

org.springframework.beans.factory.BeanCreationException: Could not autowire field: .........service.UserService 
org.bk.samples.mvc.UserController.userService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type 
[se.datalayer.guards.service.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency 
annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}   ..........

root cause

org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [.........service.UserService] found for dependency: 
expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: 
{@org.springframework.beans.factory.annotation.Autowired(required=true)}
    org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793) ....... 
```

然后我删除了`@Autowired`注释，但得到以下错误：

```
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
        org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
        org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

    root cause

    java.lang.NullPointerException
        org.bk.samples.mvc.UserController.allUsers(UserController.java:32)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method).......... 
```

我的`userController`课是：

```
@Controller
@RequestMapping(value="/")
public class UserController
{
    @Autowired
    UserService userService;

    @RequestMapping(value="/users", method=RequestMethod.GET)
    public ModelAndView allUsers()
    {

    ModelAndView mvd= new ModelAndView();
    Collection<User> allUsers= new ArrayList<User>();
    allUsers= userService.findAllUsers();
    System.out.println(allUsers);
    mvd.addObject("allUsers", allUsers);
    return mvd;   
    }
} 
```

我不知道是什么导致了问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:58:17.557

它与 Maven 无关。您的 Spring 配置有问题。它告诉您您没有定义 UserService 类型的 Spring bean，因此它无法创建您的控制器 bean，因为它依赖于 UserService（通过 @Autowired 注释表示）。您可能想看一下[Spring 容器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)和/或[Spring MVC 框架](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:00:06.813

很可能您的 webapp 中的 spring 配置错误，与 maven 无关。无论您在哪里引导 spring，您都可能包含您的 webapp 配置，但不包含您的数据层 spring bean。

# python - 使用图像作为 matplotlib 轴标签？

> ID：10538762
> 
> 赞同：2
> 
> 时间：2012-05-10T16:51:38.763
> 
> 标签：python, image, graph, matplotlib, axis-labels

我想使用图像而不是字符串作为 matplotlib 中条形图的轴标签。是否有类似的功能可以对下面的标签功能做类似的事情？

```
ax1.set_xticklabels(('< 1 wk', '1-2 wks', '>2 wks ago')) 
```

# asp.net-mvc-3 - 带有用于排序的字符串变量的 LINQ

> ID：10538766
> 
> 赞同：0
> 
> 时间：2012-05-10T16:51:51.600
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我正在尝试从我的实体框架数据库上下文中将新数据返回到 jTable。我希望能够对这些数据进行排序，但我没有任何运气。我将一个变量传递给我的 linq 查询的 orderby 语句，但不管我做什么 - 它不会排序。如果我输入该字符串的值，它会起作用 - 所以我想知道是否可以将字符串变量添加到 linq 查询中？从我在这里看到的其他内容来看，这似乎是一个常见问题。

我在 VS 2010、.net 4.0、MVC 3 中，我已经添加并尝试让 Dynamic Linq 工作并使用 System.Data.Entity 添加它；

```
 [HttpPost]
    public JsonResult WineList(string jtSorting = null, int ProducerID = 0)
    {
        try
        {

            jtSorting = "wine." + jtSorting.Replace("ASC", "ascending").Replace("DESC", "descending");

            List<Wine> wines = db.Wines.Where(w => w.Active == true).Where(w => w.ProducerID == ProducerID).ToList(); 

            //have to do this so we don't get circular references between producers and wines

            var q = (from w in wines
                    let wine = new
                    {
                        WineID = w.WineID,
                        Producer = w.Producer.Name,
                        VarType = w.VarType.Name,
                        Vintage = w.Vintage.Name,
                        Name = w.ShortName,
                        App = w.App.Name
                    }
                    orderby(jtSorting)
                    select wine);

            //var x = from w in q
            //        orderby jtSorting
            //        select w;

            return Json(new { Result = "OK", Records = q });

        }
        catch (Exception ex)
        {

            return Json(new { Result = "ERROR", Message = ex.Message });
        }

    } 
```

如果有人有更好的方法来处理 jtable，我也愿意！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:00:10.433

您想要动态排序，在哪里传递一个字段和一个订单？

[IEnumerable<T> 上的动态 LINQ OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:04:23.280

1：我认为即使传递一个布尔值也比传递一个字符串来指示 orderby 更好，比如

```
 bool isDesc 
```

2：

```
var wines = db.Wines.Where(w => w.Active && w.ProducerID == producerID);
if(isDesc)
{ 
    wines = wines.OrderByDesc(w=>w.XXX);
}
else 
{
    wines = wines.OrderBy(w=>w.XXX);
}

var list = wines.ToList(); 
```

3：使用[AutoMapper](http://automapper.codeplex.com/)将您的对象从一种类型映射到另一种类型会更好，除非您真的想匿名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:03:36.567

我也在一个项目中使用jTable。[Ricci Gian Maria在这里](http://www.codewrecks.com/blog/index.php/2012/03/23/order-by-a-property-expressed-as-string-in-a-linq-query/)很好地总结了这个“OrderBy”问题。

> 上述问题的解决方案其实很简单，你应该只开始思考 OrderBy LINQ 操作符是如何工作的，它基本上接受一个表达排序标准的 lambda，对于一个客户对象，它可以是 OrderBy( c=> c.顾客姓名）。将属性表示为字符串的问题是 OrderBy 方法接受一个表达式。

[Adam Anderson 的博客](http://aonnull.blogspot.com/2010/08/dynamic-sql-like-linq-orderby-extension.html)建立在 Nick 提供的示例之上。他有一个很好的 OrderByHelper 示例，可以将 jtSorting 字符串转换为表达式。使用 OrderByHelper，您可以扩展 OrderBy 方法以接受 jtSorting 作为输入。将代码从他的页面复制到一个包含 System.Linq.Expressions 和 System.Reflection 的新类中。一旦 OrderyHelper 成为您项目的一部分，您就可以开始将 jtSorting 作为 OrderBy 参数传递。然后，您的代码将简化为...

```
List<Wine> wines = db.Wines.OrderBy(jtSorting).Where(w => w.Active == true).Where(w => w.ProducerID == ProducerID).ToList(); 
```

希望这可以帮助！

# razor - 如何使 Telerik Combobox 显示模型中与 SelectList 中的值对应的字段中的值？

> ID：10538770
> 
> 赞同：0
> 
> 时间：2012-05-10T16:52:28.950
> 
> 标签：razor, telerik-mvc, asp.net-mvc-3-areas

我正在使用 Telerik MVC 控件（组合框），并且无法从模型中获取值以在视图加载时突出显示为选中状态。

```
 <tr>
            <td class="editor-label">
               @Html.LabelFor(model => model.CategoryDescription)
            </td>
            <td class="editor-field">
                @Html.DisplayFor(model => model.CategoryDescription)
            </td>
            <td>
                @(Html.Telerik().ComboBoxFor(model => model.CategoryDescription)
                                    .BindTo((SelectList)(Model.CategoryDescriptionList))//(SelectList)(ViewBag.CategoriesList))
                                    .HtmlAttributes(new { style = "width:350px; white-space:nowrap;" })
                                    .HighlightFirstMatch(true)
                                    .Filterable(filtering => filtering.FilterMode(AutoCompleteFilterMode.Contains))
                                    .ClientEvents(events => events.OnClose("ComboBox_OnClose"))
                  )
                @Html.ValidationMessageFor(model => model.CategoryDescription)
            </td>
        </tr> 
```

我希望 Model.CategoryDe​​scription 中的值在页面加载时作为所选条目显示在组合框中。所以问题是如何做到这一点。

回答。当我在模型中构建 selectList 并将其位置用于控件时，我能够在控件上设置 SelectedIndex。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:56:42.197

当我在模型中构建 selectList 并将其位置用于控件时，我能够在控件上设置 SelectedIndex。

# java - 调用泛型成员的成员函数

> ID：10538774
> 
> 赞同：2
> 
> 时间：2012-05-10T16:52:55.190
> 
> 标签：java, generics, inheritance

我有一个超类（GraphNode）和子类（AStarNode）。两者都可以是另一个类的成员，这就是为什么我将使用它的类变成泛型类（GraphEdge）的原因。

在这个类中，我想调用超类的一些成员函数，但编译器抱怨：

```
The method addEdge(GraphEdge<T>) is undefined for the type T 
```

我该如何解决这个问题，或者我的方法还可以吗？

下面是一些更好地描述场景的代码：

```
public class GraphNode {
   protected Graph graph;

   public GraphEdge addEdge(){
   //some code
   }
}

public class AStarNode extends GraphNode {
   protected GraphEdge predecessor;
}

//The from and to properties can be either AStarNode or GraphNode
public class GraphEdge<T> extends Entity {
   protected T from;
   protected T to;

   public someMethod(){
       from.addEdge(this);
   } 

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:06:10.630

您的 GraphEdge 类使用可以是任何东西的泛型类型，而不仅仅是 GraphNode。声明应该是

```
public class GraphEdge<T extends GraphNode> extends Entity {
   protected T from;
   protected T to;
} 
```

此外，由于 GraphEdge 是一个泛型类型，你不应该将它用作 AStarNode 中的原始类型：

```
public class AStarNode extends GraphNode {
    protected GraphEdge<PutSomeTypeHere> predecessor;
} 
```

# javascript - 刷新 JSON

> ID：10538777
> 
> 赞同：0
> 
> 时间：2012-05-10T16:53:24.737
> 
> 标签：javascript, json, twitter

我正在使用以下代码来检索包含某个哈希标签的简单推文列表：

```
$(document).ready(function tweetList() {
$.getJSON(
    'http://search.twitter.com/search.json?callback=?&rpp=20&q=web',
    function(data) {
        $.each(data, function(i, tweets) {
            for (var num = 0, len = tweets.length; num < len; num++) {
                if (tweets[num].text !== undefined) {
                    var tim = new Date(tweets[num].created_at);
                    var author = tweets[num].from_user;
                    $('ul#tweets').append('<li><b>' + tim.toString().substring(0, 24) + ':</b> ' + tweets[num].text + author + '</li>');   
                }
            }
        });
        setInterval(tweetList, 5000);
    }
);
});</script>

<ul id="tweets"></ul> 
```

如您所见，我正在尝试刷新列表，但问题是通过刷新函数，列表会随着刷新的数据而不断增长。

我知道这是因为我使用的是 .append，但是当我使用 .html 时，不会填充整个推文列表。

有可能解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:55:51.100

在插入新数据之前，您需要删除以前的数据。

写之前`$.each`：

```
$('ul#tweets').html(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:07:55.900

我猜你想删除旧推文，但不是全部。这：

```
$('ul#tweets').html('') 
```

将在您更新之前删除所有旧推文，但这将允许您保留任意数量的推文（由 numToKeep 设置）；

```
var numToKeep=10;
var currSize = $('ul#tweets li').size();
var extras = numToKeep - currSize;
$('ul#tweets li').each(function(count,el){
   if (count < numToKeep) {
      $(el).remove();
   }
}); 
```

由于 count 是基于 0 的，这应该删除旧的推文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:08:59.377

使用 jQuery 的[empty()](http://api.jquery.com/empty/)

```
$('#tweets').empty();
$.each(data, function(i, tweets) { 
```

# c# - 如何让quartz.net 加载不同的sql 驱动程序版本

> ID：10538779
> 
> 赞同：0
> 
> 时间：2012-05-10T16:53:32.227
> 
> 标签：c#, quartz.net

quartz.net 的 nuget 包被编译为专门加载 sqlite v1.74

sqlite 的 nuget 包是 1.80 版

我知道我可以重新编译石英库，但我不想（而且我找不到 sqlite 1.74）所以我想知道是否有办法告诉 CLR 忽略版本要求

该库不是清单引用，它是通过 Type.GetType 加载的

注意quartz.net 人，只给出库名称，而不是版本和签名，那么这个问题就不会出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:30:17.857

简单的答案

```
 <dependentAssembly>
    <assemblyIdentity name="System.Data.SQLite" publicKeyToken="db937bc2d44ff139" />
    <bindingRedirect oldVersion="1.0.74.0" newVersion="1.0.80.0" />
  </dependentAssembly> 
```

# c# - Visual C# windows 窗体不断检查和更新值？

> ID：10538782
> 
> 赞同：0
> 
> 时间：2012-05-10T16:53:57.373
> 
> 标签：c#, visual-studio, checkbox

我正在为大学做一个项目，并创建了一个带有简单午餐菜单的面板。菜单的每个项目（如果由复选框呈现）。我想要发生的是每次选中或取消选中新项目时都会更改总数。这是我迄今为止尝试使用的代码，但是当我运行它时它似乎冻结了程序。我尝试使用 while 循环来不断检查复选框是选中还是未选中。

有一个面板，里面有复选框，面板底部有一个标签。

在使用 while 循环检查每个复选框的选中状态并相应地更新标签文本方面，我是否处于正确的行列？

```
private void plBistro_Paint(object sender, PaintEventArgs e)
        {
            //create a variable to hold the total
            double bistotal = 0.0;

            while(bistotal != 99){
                //check if they chose a ham sandwich
                if(cbHamSandwich.Checked == true){

                    //if they did add 1.20 to the value of bistotal
                    bistotal = bistotal + 1.20;
                }

            string bistotalString = Convert.ToString(bistotal);

            lblBistroTotal.Text = bistotalString;
        }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:56:50.257

您对此采取了错误的方法。复选框应引发事件，事件处理程序应负责维护总数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:57:18.743

是的，这将导致无限循环，更改标签将导致重绘...

为 CheckBox.CheckChanged 事件添加一个处理程序并在其中执行您想要的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T17:03:57.900

您的代码中有一个无限循环，而且 Paint 事件不是进行此计算的地方。你想要更多类似的东西：

```
private void cbHamSandwich_CheckChanged (object sender, EventArgs e)
{
    CalcTotal();
}

private void CalcTotal()
{
    double bistotal = 0.0;

    if(cbHamSandwich.Checked == true)
    {
        //if they did add 1.20 to the value of bistotal
        bistotal = bistotal + 1.20;
    } 

    // more selected values to add to total

    lblBistroTotal.Text = bistotal.ToString("c");
} 
```

`CheckChanged`为需要更改总价的每个选项添加事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:00:27.307

我猜这里发生的事情是在 UI 线程上访问或设置某些内容（访问 cbHamSandwich 或在 lblBistroTotal 上设置文本）每次设置时都会触发一个新的绘制事件，因此是一个无限循环。您可能应该在计时器中执行此更新，或侦听其他 UI 事件。

**编辑：** 现在我看起来更近了，似乎 while 循环本身也是一个基本问题。您基本上是说，当检查复选框时，您想将总数一直升至至少99（而总数不是99，如果检查了复选框，请继续添加）。但是一旦达到99，它**就会**跳出那个循环。这不是你最关键的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:02:10.773

你想给你的复选框 onchanged handlers..类似：

```
private void chkBox_CheckedChanged(object sender, System.EventArgs e) {
  if (sender is CheckBox) { 
    CheckBox checkbox = sender as CheckBox;

    //do you checkbox accounting here
    if (checkbox.Checked){
      //blah
    }else{
      //blah
    }
  }
}

// elsewhere..assign event handler
chkBox.CheckedChanged += new EventHandler(chkBox_CheckedChanged); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T17:03:12.330

CheckedChanged 和 CheckStateChanged 事件将被触发。像这样使用它：

```
private void cbHamSandwich_CheckedChanged(object sender, EventArgs e)
{
    //Verify(Check) the Checked property of the Checkbox and
    //Your Code Goes Here
} 
```

并且 ：

```
private void cbHamSandwich_CheckStateChanged(object sender, EventArgs e)
{
    //Verify(Check) the CheckState property of the Checkbox and
    //Your Code Goes Here
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T17:04:34.087

如前所述，在绘制事件中处理它并不是您真正想要做的。我的建议是将您的代码放在所有复选框都连接到的事件处理程序中。显然，比“checkBox2_CheckStateChanged”更合适的名称会更好，但您可以随意命名函数，真的。

![设置两个控件使用相同的事件处理程序](../Images/af24a3683600fd8ffb4255dae7d643b1.png)

编辑：或者您可以为每个复选框创建一个 CheckChanged 事件处理程序并调用一个函数来计算您的总数。

# workflow - 是否可以在单个工作流程中分配许多资产？

> ID：10538783
> 
> 赞同：0
> 
> 时间：2012-05-10T16:54:00.243
> 
> 标签：workflow, liferay

我正在使用 Liferay 的工作流程开发一个招聘项目。假设我有一个组织有以下资产：CV，第一轮测试结果，第二轮测试结果；第三轮测试结果。以及招聘工作流程定义。是否可以在工作流定义中实现 4 个资产？以及如何做到这一点，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:34:48.680

你能提供更多信息吗？“是否可以在工作流定义中实现 4 个资产？” 不是很清楚。

在 liferay 中，您可以为每个资产设置一个工作流定义（更多资产可以具有相同的定义）。这是你想要的吗？还是您希望资产以某种方式连接？

# android - 如何在android上设置语音识别中的语言？

> ID：10538791
> 
> 赞同：23
> 
> 时间：2012-05-10T16:54:31.523
> 
> 标签：android, speech-recognition

我一直在研究android中的语音识别API，发现当语言设置改变时语音结果会有所不同，有没有办法以编程方式设置它？还是有意在语音语言设置屏幕上午餐？还是什么？注意：我尝试额外使用此意图：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en-US"); 
```

但它无效

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-11T09:17:27.100

正如pargat所说，这将做到：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, "en-US"); 
```

`RecognizerIntent.ACTION_GET_LANGUAGE_DETAILS`此外，您的应用可以通过发送有序广播来查询支持的语言列表，如下所示：

```
 Intent detailsIntent =  new Intent(RecognizerIntent.ACTION_GET_LANGUAGE_DETAILS);
    sendOrderedBroadcast(
            detailsIntent, null, new LanguageDetailsChecker(), null, Activity.RESULT_OK, null, null); 
```

其中 LanguageDetailsChecker 是这样的：

```
public class LanguageDetailsChecker extends BroadcastReceiver
{
    private List<String> supportedLanguages;

    private String languagePreference;

    @Override
    public void onReceive(Context context, Intent intent)
    {
        Bundle results = getResultExtras(true);
        if (results.containsKey(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE))
        {
            languagePreference =
                    results.getString(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE);
        }
        if (results.containsKey(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES))
        {
            supportedLanguages =
                    results.getStringArrayList(
                            RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES);
        }
    }
} 
```

有关完整代码，请查看此 github 项目： [https ://github.com/gast-lib](https://github.com/gast-lib)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-16T09:49:46.900

这将起作用：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, "en_US"); 
```

您必须使用“en_US”而不是“en-US”。前者是Java语言环境标签的正确格式。

建议您使用

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.US.toString()); 
```

避免记住这些细节。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-11-01T10:48:50.893

没有解决方案，只有一个hackaround...

```
intent.putExtra("android.speech.extra.EXTRA_ADDITIONAL_LANGUAGES", new String[]{"en"}); 
```

[在这里查看](https://productforums.google.com/forum/#!msg/websearch/PUjEPmdSzSE/xMOgMoOvic8J)完整的故事。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-10T17:45:43.290

你有没有试过这个：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, "en-US"); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-07-21T04:25:26.570

通过添加以下所有 3 个附加功能，我终于让我的应用程序将语音识别结果限制为指定的语言输入（交给它，例如，日语的“ja”或法语的“fr”）：

```
String languagePref = "de";//or, whatever iso code...
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, languagePref);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, languagePref); 
intent.putExtra(RecognizerIntent.EXTRA_ONLY_RETURN_LANGUAGE_PREFERENCE, languagePref); 
```

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-29T10:36:08.600

**此代码用于设置语音识别中的语言**

```
 String languagePref = "te-IN";//this is for telugu

     //kannada --->  "kn-IN"
     //tamil--->  "ta-IN".....

            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, languagePref); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-08T19:18:08.320

我试着用

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault()); 
```

但它对我不起作用（没有采用系统语言）。像这样帮助这里：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault().toString()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-28T18:15:28.520

我使用了这段代码：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US"); 
```

希望您现在可以运行您的应用程序。

# css - 使用 CSS3 设置复选框标签的样式

> ID：10538792
> 
> 赞同：2
> 
> 时间：2012-05-10T16:54:35.157
> 
> 标签：css, label, stylesheet

我已经使用 CSS3 设置了一个复选框的样式，这可以正常工作（通过隐藏复选框并在其上放置/样式化标签）。现在我找到了一些 CSS3 创建的图标，我想将它们用于我的复选框。由于复选框是使用 CSS3 设置样式的，我认为使用 CSS3 为复选框创建的图标会很简单。

嗯......我认为这很容易，但我没有成功。

CSS3 创建的图标是声音图标。一种是“声音开启”，一种是“声音关闭”。现在我希望在选中复选框时使用“声音开启”图标，而在未选中复选框时使用“声音关闭”。

请看我的小提琴：http: [//jsfiddle.net/mauricederegt/TRtvx/](http://jsfiddle.net/mauricederegt/TRtvx/)

**这是我尝试过的：**

基本上`input:checked + label:before`应该有`.volume-on:before`风格。这有效，我在按钮 div 中看到了“声波”。不幸的是，我再也看不到图标的其余部分（圆锥）。

我想要的甚至可能吗？以及如何做到这一点？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:22:32.923

您可以使用 CSS Sprites 来实现这一点 - 基本上您将显示单个图像的不同部分，充当两个图像。看看这个很棒的教程：[http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

# oracle - 如何在 Oracle Application Express 中自动将表导出为 CSV？

> ID：10538796
> 
> 赞同：0
> 
> 时间：2012-05-10T16:54:59.627
> 
> 标签：oracle, oracle-apex

我想将我的 Oracle Application Express 中的视图自动导出（比如每小时）作为 CSV 文件存储在 Apex 服务器上。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:02:55.527

我不认为这是一个特定于 APEX 的问题。真正的问题是：如何在**Oracle**中自动将数据导出为 CSV 文件。这可以使用[UTL_FILE 包](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#BABGGEDF)来创建文件，并使用[DBMS_SCHEDULER](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sched.htm#CIHHBGGI)或[DBMS_JOB](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_job.htm#BABHCBFD)包* 以每小时运行一次 UTL_FILE 过程来完成。

（* DBMS_SCHEDULER 是官方首选的方法，但 DBMS_JOB 使用起来要简单得多。）

# php - PHP & SWF - 幻灯片不显示

> ID：10538799
> 
> 赞同：1
> 
> 时间：2012-05-10T16:55:27.873
> 
> 标签：php, flash

我正在尝试显示幻灯片。slide_auto.php与我的**slideS_img**文件夹**位于同一目录中**

 **这是我的 slide_auto.php 文件：

```
<?php
$file_dir="slideS_img"; //change this to a folder name
$show_titles=false; //change to false if you don't want to see the captions
$omit_chars=0; //how many characters to cut off the title's front
$link_to_image=false; //do you want to display links?

print '<?xml version="1.0" encoding="iso-8859-1"?>
<slideshow  displayTime="5" 
            transitionSpeed=".7"
            ...more code...
            >';

            $dir=opendir($file_dir);
        $xml_string= array();
            while ($file=readdir($dir))
            {
                if(substr($file, -3) == "jpg" || substr($file, -4) == "jpeg" ){
                $tmp_str = '<image img="'.$file_dir.'/'.$file.'" ';
                if($show_titles){
                    $file_title=substr($file, $omit_chars, strpos($file, ".")-$omit_chars);
                    $tmp_str .= 'caption="'.$file_title.'" ';

                }

                if($link_to_image){
                    $link_title=substr($file, $omit_chars, strpos($file, ".")-$omit_chars);
                    $tmp_str .= 'link="'.$file_dir.'/'.$file.'" target="_blank"';

                }

                    $tmp_str .=" />";
                    array_push($xml_string, $tmp_str);
                }

            }
            sort($xml_string);
            for($i=0; $i<count($xml_string); $i++){
            print $xml_string[$i];
            }
closedir($dir);
print '</slideshow>';
?> 
```

amd 我的 slideshowpage.php：

```
<?php
require_once('slideshow/slide_auto.php')
?>

<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
</head>

<body>
<div align="center">
<br />
<br />
<br />
<div id="flashcontent">
  This text is replaced by the Flash movie.
</div>

<script type="text/javascript">
   swfobject.embedSWF("slideshow.swf?file=slideshow/slide_auto.php", "gallery", "100%", "100%", "7", "#333333");
   so.write("flashcontent");
</script>
</div>
</body>
</html> 
```

我收到一条错误**消息警告：opendir(slideS_img) [function.opendir]: failed to open dir: No such file or directory in /[path]/slideshow/slide_auto.php on line 62**

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:01:16.527

包含的文件假定您从中包含它们的文件的工作目录。您的父幻灯片页面脚本在（比如说）

```
 /home/sites/example.com/html 
```

这将成为幻灯片脚本的工作目录。所以 opendir 实际上是按照

```
 /home/sites/example.com/html/slideS_img 
```

代替

```
 /home/sites/example.com/html/slideshow/slideS_image 
```

您必须修改 opendir 调用以使用更具体的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:48:55.883

Marc 在他的解决方案中实际上是正确的。如果我可以尝试详细说明一下，当您包含 slide_auto.php 时，您可以认为发生了以下情况：

1.  PHP 插入文件 slide_auto.php 中的文本，其中包含命令。
2.  所以，当 $file_dir="slideS_img"; 出现它会尝试在 slideshowpage.php 下找到目录，**而不是 slide_auto.php**。

这失败了，因为实际的图像文件夹在目录**slideshow**中。

如果您直接（或在 Flash 应用程序中）调用 slide_auto.php，那么它的目录是幻灯片，您应该能够获取 XML 而不会出现任何进一步的错误。**

# objective-c - 将 C 字符串与 [NSString stringWithFormat:] 一起使用后，我可以释放它吗？

> ID：10538802
> 
> 赞同：1
> 
> 时间：2012-05-10T16:55:41.230
> 
> 标签：objective-c, c, nsstring

`[NSString stringWithFormat:]`将 C 字符串传递给with后，我可以释放它`%s`吗？例如：

```
char *str = malloc(...);
// ... populate str ...
NSString *message = [NSString stringWithFormat:@"[%s]", str];
free(str); // should this be here, or after I'm done with message? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T17:04:51.487

您可以在创建 NSString 后立即安全地释放 char 缓冲区。NSStrings 总是复制传递给它们的数据。这保证了它们的不变性。

# javascript - 我可以将 JavaScript 数据从 PHP 发送到 Html 吗？

> ID：10538803
> 
> 赞同：0
> 
> 时间：2012-05-10T16:55:44.830
> 
> 标签：javascript, jquery, html

是否可以从 PHP 发送可以使用 jQuery**数据**函数检索的数据？
我知道如何发送属性和属性，但我想发送数据对象。

换句话说，我应该如何渲染一个 div 来使用 jQuery 获取数据？

```
<div id="div" <!-- Whet should I put here??-->></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:59:51.143

尝试：

```
<div id="unique-id" data-hello="<?php echo "world" ?>"></div>

alert($('#unique-id').data('hello')); // world 
```

查看：[http ://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

你也可以：

```
var php_data = <?php json_encode(array('hello', 'world')); ?>;

alert(php_data); // hello,world 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:57:23.173

是的你可以。但是为什么要写在div里呢？将 PHP 对象编码为 JSON 并将其直接打印到`<script>`标签内的 JavaScript 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:00:29.927

是的你可以，

```
<div id="div" data-test="test1"></div>
alert($('#div').data('test'));// will show 'test1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T16:59:04.957

根据您在 div 中写入数据的位置，我认为您想使用 div 上的属性

像这样 ：

```
<div id="my_div" data-my-attribue="value"></div> 
```

然后你可以在 jQuery 中输入这个值

```
$('#my_div').attr('data-my-attribue'); 
```

（这在 html 5 中有效）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T16:59:56.357

```
<div id="myId" data-nameitwhateveryoulike="add your data here">Blah blah</div> 
```

您可以随意命名数据属性，只需在其前面加上“data-”，如上所示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T17:01:54.263

您可以使用输入类型隐藏字段从 php 发送和检索数据，但最佳做法是使用 ajax。

```
<input type='hidden' value='myvalue' id='mykey'/>

<script>
 var mykey = document.getElementById("mykey").value;
</script> 
```

# iphone - 一个用于多个字段的 UIDatePicker - 设置日期时的 EXC_BAD_ACCESS

> ID：10538807
> 
> 赞同：0
> 
> 时间：2012-05-10T16:56:02.070
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uidatepicker

我有一个 UIDatePicker 视图，用于许多不同的日期值。

它失败的一个示例用例是：

1.  用户调出日期选择器并更改日期。
2.  用户尝试再次调出日期选择器并崩溃。

如果用户打开日期选择器，但关闭它而不更改日期，那很好，然后用户可以再次打开日期选择器。

就在日期选择器打开之前，我运行以下代码：

```
datePicker.datePickerMode = UIDatePickerModeTime;
datePicker.date = current.time;
[datePicker removeTarget:nil action:NULL forControlEvents:UIControlEventValueChanged];
[datePicker addTarget:self action:@selector(currentTimeChanged:) forControlEvents:UIControlEventValueChanged];
[app.window addSubview:datePickerContainerView]; 
```

`currentTimeChanged`简单地调用`current.time = datePicker.date`

我曾尝试在启用僵尸的情况下运行，也尝试使用仪器运行，但由于某种原因，它没有返回任何东西。编辑：我应该澄清，“任何东西”，我的意思是仪器中没有出现“检测到僵尸”消息，应用程序只是崩溃回到跳板。

根据调试器，错误发生在`datePicker setDate`，更具体地说`CFNumberGetValue`- 如果这意味着什么......

更新：这个问题只发生在模拟器中 - 当我在我的设备上运行它时它很好。我可以把它归结为只是模拟器吗？

# twilio - Twilio REST API 错误 - “验证”

> ID：10538810
> 
> 赞同：12
> 
> 时间：2012-05-10T16:56:17.137
> 
> 标签：twilio, phone-call, twilio-api

当我尝试使用[Twilio REST API](https://www.twilio.com/docs/api/rest)发出呼叫时出现以下错误。

[https://www.twilio.com/docs/api/rest](https://www.twilio.com/docs/api/rest)

```
HTTP/1.1 401 Unauthorized 
Server: nginx 
Date: Thu, 10 May 2012 16:50:48 GMT 
Content-Type: application/xml 
Connection: close 
WWW-Authenticate: Basic realm="Twilio API" 
Etag: 
Last-Modified: 
Content-Length: 233 

401 Authenticate 20003 
http://www.twilio.com/docs/errors/20003 
```

我用谷歌搜索，但一无所获。有人有这个问题吗？

我在 API 调用上发布的是：-

```
$url = 'https://api.twilio.com/2010-04-01/Accounts/ACdxxxxxxx/Calls';

From => +1415xxxxxx 
To => +1646xxxxx
Url => http://173.201.xx.xx/Test/Twilio/twilio_test.php 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-11-17T21:16:56.523

这个错误似乎有几个原因。我发现当我的帐户资金已用完时，我收到“验证”错误。当我添加资金时，它再次运行没有任何问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T18:12:42.060

*（这里是 Twilio 员工。）*

401 错误通常与您应该进行身份验证但没有或可能发生错误有关。

您能否提供用于拨打电话的完整代码片段？您是在使用我们的示例片段之一还是其​​他东西？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T18:14:40.173

您的 Sid 和 Token 一定是错误的。检查你的配置文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-13T22:20:29.327

同样的问题也发生在我身上。我提出了一些成功的 API 请求并在我的应用程序中达到了一个停止点，我决定发布到 GitHub。片刻之后，我尝试运行我的应用程序，当我发出 Twilio API 请求时，我的服务器崩溃了；控制台说我需要进行身份验证。事实证明，我没有将我`.env`的添加到 GitHub，`.gitIgnore`并且我在不知不觉中将我的 accountSid 发布到了 GitHub。Twilio 感觉到了这一点，并立即暂停了我的 accountSid。我正在等待他们为我生成一个新的 accountSid。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T21:44:46.103

只是添加一个更新的回复。当我创建一个仅用于 SMS 的新 Twilio 帐户时遇到了这个问题。我的帐户被暂停，这导致了这个问题。

我用于创建帐户的电子邮件地址不是我监控的，但他们向我发送了一封电子邮件，询问有关我的预期用途以及我计划如何允许用户选择加入和选择退出的详细信息。由于我没有回复，因此该帐户已被暂停。

# javascript - 使用原型向 JScrollPane 添加新方法

> ID：10538811
> 
> 赞同：0
> 
> 时间：2012-05-10T16:56:22.943
> 
> 标签：javascript, jquery, prototype, jscrollpane

我包括一些库

```
 <script type="text/javascript" src="js/jquery-1.7.2.js"></script>

  <!-- the mousewheel plugin - optional to provide mousewheel support -->
  <script type="text/javascript" src="js/jquery.mousewheel.js"></script>

  <!-- the jScrollPane script -->
  <script type="text/javascript" src="js/jquery.jscrollpane.js"></script> 
```

然后想添加一个新方法

```
<script type="text/javascript"> 
    JScrollPane.prototype.putClientProperty = function(propertyName, elementId){

    ...
    };
</script> 
```

并接收：*JScrollPane is undefined*。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:00:25.997

您收到错误是因为 JScrollPane 不是窗口/全局对象的属性，而是添加到`jquery.prototype`/ `jquery.fn`。所以，你应该使用：

```
jquery.fn.JScrollPane.prototype.putClientProperty = function(propertyName, elementId){

...
}; 
```

# java - 压缩：在 Java / Scala 中以指定的比特率保存 JPEG 图像

> ID：10538820
> 
> 赞同：3
> 
> 时间：2012-05-10T16:57:02.457
> 
> 标签：java, scala, compression, jpeg

我有兴趣保存 JPEG 图像，以便我可以指定用于以压缩形式对所有像素进行编码的总位数。例如，如果我有一个大小为 1024 x 1024 的 4 通道图像，则对未压缩的位进行编码将需要 4 * 8 * 1024 * 1024 位。使用压缩，可以使用显着更少的位。我想指定压缩形式的位数。

一种迭代解决方案是对 JPEG 压缩质量参数进行二分搜索。我希望在 Java 或 Scala 中有一个直接的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:31:04.440

正如@Chris 所说，JPEG 没有捷径可走。但是 - 我意识到这是一个很长的镜头 - 如果您愿意使用 JPEG2000 而不是 JPEG，则可以直接指定压缩率。如果您查看此[JJ2000 库中的](http://code.google.com/p/jj2000/)[Encoder](http://code.google.com/p/jj2000/source/browse/trunk/src/main/java/jj2000/j2k/encoder/Encoder.java)类，您将了解如何修复编码图像的比特率。

不幸的是，由于对 JPEG2000 的支持远没有 JPEG 广泛，我担心这对您可能没有多大用处。

# .net - 查询修订时的错误请求

> ID：10538821
> 
> 赞同：0
> 
> 时间：2012-05-10T16:57:04.097
> 
> 标签：.net, google-docs, google-docs-api

我正在尝试按照[这篇文章](https://stackoverflow.com/questions/9770896/how-to-publish-google-docs-in-net/10200031#10200031)中的说明进行操作，但我无法使其工作。

RevisionQuery 的构造函数接受一个字符串，但 entry.RevisionDocument 是一个 Uri。我刚刚使用了 .ToString()，但现在出现错误 - 远程服务器返回错误：(400) Bad Request - 当我尝试执行查询时 (RevisionFeed revisions = service.Query(revisionQuery))。Uri 设置为[http://docs.google.com/feeds/default/private/full/document](http://docs.google.com/feeds/default/private/full/document) :{id}/revisions。这是从文档中获取修订的正确 Uri 吗？当我在浏览器中访问 url 时，我得到了同样的错误。

我相信我已经使用正确的凭据设置了我的服务，但我确信我只是缺少一些小东西。任何帮助将不胜感激。我有许多需要发布的文档，而手动完成它们会很痛苦。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:51:17.457

属性 entry.RevisionDocument 实际上是一个字符串：

[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/src/documents3/documententry.cs#373](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/src/documents3/documententry.cs#373)

它可以在 RevisionQuery 构造函数中使用，如[https://developers.google.com/google-apps/documents-list/#managing_revisions_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#managing_revisions_of_documents_and_files)中的文档所示，以及以下代码段：

```
RevisionQuery revisionQuery = new RevisionQuery(entry.RevisionDocument);
RevisionFeed revisions = service.Query(revisionQuery); 
```

# objective-c - 在情节提要中，如何为视图控制器的子视图分配不同的委托/控制器 m 文件？

> ID：10538831
> 
> 赞同：0
> 
> 时间：2012-05-10T16:57:43.923
> 
> 标签：objective-c, ios, xcode, uistoryboard

在我的故事板中，我有一个嵌套在视图控制器场景中的视图（UIScrollView 的一个子类，称为 AQGridView）。我想为 AQGridView 分配一个控制器委托和数据源，它们在单独的 .m 和 .h 文件中定义，而不是父视图控制器。我该怎么做呢？Storyboard 只允许我将连接器拖到 AQGridView 的父视图控制器。

**编辑：** 我试过在父视图控制器中做这样的事情（其中 myGrid 是指向 AQGridView 的 IBOutlet 并且 myGridController 是父视图控制器的属性）：

```
- (void)awakeFromNib
{
  // note: kzMyGridController is a subclass of AQGridViewController
  myGridController = [[kzMyGridController alloc] init];
  myGrid.delegate = myGridController;
  myGrid.dataSource = myGridController;
} 
```

但它似乎没有工作，因为没有调用它的委托方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:01:19.770

如果 StoryBoard 不允许您使用，只需在代码上执行即可。这更有意义，因为它实际上迫使您拥有一个对象（委托）并在需要时设置它。

* * *

它应该是：

```
- (void)awakeFromNib
{
  // note: kzMyGridController is a subclass of AQGridViewController
  myGridController = [[kzMyGridController alloc] init];
  myGrid.delegate = myGridController;
  myGrid.dataSource = myGridController;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:59:50.013

答案是我必须在 AQGridView 上调用 reloadData。视图是在其委托之前创建的，因此它的初始数据获取方法在没有接收器的情况下触发。

# sql - 在 Oracle DB 中选择不返回 Date 类型的预期结果

> ID：10538834
> 
> 赞同：1
> 
> 时间：2012-05-10T16:57:51.947
> 
> 标签：sql, database, date, plsql, oracle-sqldeveloper

表 my_table 是：

```
CREATE TABLE MY_TABLE(
ID        NUMBER  NOT NULL,
MY_DATE   DATE    NOT NULL); 
```

键入以下查询：

```
select sysdate from dual 
```

结果是：

```
10-MAG-12 21:22:32 
```

请注意，mag = may。

现在，如果我输入这个查询：

```
select *
from my_table
where my_date <= sysdate 
```

结果是：

```
9918    10-MAG-12 20:00:00
9915    10-MAG-12 21:00:00
9952    10-MAG-12 22:00:00
9951    10-MAG-12 23:00:00 
```

请注意，在 my_table 我只有这 4 条记录。为什么我看到所有记录而不是第一条和第二条记录？谢谢。

我使用 Oracle SQL Developer。

编辑：请注意，当我使用 PL/SQL 插入记录时，我输入如下内容：

```
nCount NUMBER;
myDate DATE;
stringDate VARCHAR2(255);
BEGIN
nCount := 0;
stringDate := substr(to_char(trunc(sysdate)),0,9);
myDate := to_date(stringDate || ' 20:00:00','dd-mm-yyyy hh24:mi:ss');
for t in (a cursor) loop
   insert into MY_TABLE(ID,MY_DATE)
   values (9918,myDate+(nCount/1440));
   nCount := nCount + 60;
end loop;
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:25:51.647

我怀疑存储在表中的数据没有 2012 年。它可能有 0012 年（两千年前）。

运行查询时会看到什么

```
SELECT id, to_char( my_date, 'dd-mm-yyyy hh24:mi:ss' )
  FROM my_table 
```

我预计年份将是 0012 而不是 2012。原因是您用于插入数据的代码在不使用显式格式掩码的情况下错误地将日期转换为字符串，然后将字符串转换回日期使用恰好与会话不匹配的显式格式掩码`NLS_DATE_FORMAT`。一般来说，如果您发现自己将日期转换为字符串并返回日期，那么您可能做错了什么。如果您将代码更改为简单地进行日期操作，它将更高效、更健壮且不易出错。

```
DECLARE
  nCount NUMBER;
  myDate DATE;
BEGIN
  nCount := 0;
  myDate := trunc(sysdate) + interval '20' hour;
  for t in (a cursor) loop
     insert into MY_TABLE(ID,MY_DATE)
       values (9918,myDate+(nCount/1440));
     nCount := nCount + 60;
  end loop;
END; 
```

了解原始代码出错的原因

```
stringDate := substr(to_char(trunc(sysdate)),0,9); 
```

这`SYSDATE`会将其截断到当天的午夜。到现在为止还挺好。`TO_CHAR`然后，它在没有显式格式掩码的情况下调用。这会导致 Oracle 使用会话的`NLS_DATE_FORMAT`，这意味着具有不同设置的不同用户将获得不同的结果。如果您的会话`NLS_DATE_FORMAT`恰好是“dd-mon-rr hh24:mi:ss”，我根据您发布的查询结果猜测，这将意味着该字符串有一个两位数的年份。您`SUBSTR`似乎假设输出只有两位数的年份（如果您有不同的年份`NLS_DATE_FORMAT`，您`SUBSTR`将产生不同的错误，例如可能会从 2012 年的一年中删除 12 年，留下只有 20 年的年份）。

```
myDate := to_date(stringDate || ' 20:00:00','dd-mm-yyyy hh24:mi:ss'); 
```

Assuming `stringDate` is something like `10-MAG-12`, this next line generates a string `10-MAG-12 20:00:00` and then tries to convert it to a date using the format mask `dd-mm-yyyy hh24:mi:ss`. This assumes that the string has a 4-digit year so when it only finds 2-digits, it assumes that you meant the year 12, not the year 2012.

# wpf - WPF 数据网格样式

> ID：10538835
> 
> 赞同：0
> 
> 时间：2012-05-10T16:57:51.880
> 
> 标签：wpf, datagrid

![在此处输入图像描述](../Images/1082b38c3cad4b00f129394dcffeb3e1.png)

请让我知道如何仅删除最后一列的垂直网格线。

谢谢迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:53:27.960

用星号标记最后一列的宽度

```
<DataGridTextColumn .... Width="*" 
```

这样，您当前的最后一列（填充）将不会出现，而是您在 XAML 文件中声明的真正的最后一列将延伸到网格中可见区域的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:28:17.717

我假设 AutoGenerateColumn=True。如果是这样，请使用生成列时调用的 AutoGeneratingColumn 事件，这意味着要添加到 xaml 中的属性将是 AutoGeneratingColumn=DataGrid_AutoGeneratingColumn

处理程序代码将是这样的

```
private void DataGrid_AutoGeneratingColumn(object sender, Microsoft.Windows.Controls.DataGridAutoGeneratingColumnEventArgs e) 
    {
        if (e.PropertyName == "+") //or whatever it is
            {
                e.Cancel = false;
                e.Column.Visibility = Visibility.Collapsed;
            }
    } 
```

**根据评论更新**

这只是一个简单的例子。尝试像这样设置单元格样式

在xml中添加

```
<Style x:Key="noborder" TargetType="{x:Type dg:DataGridCell}">
            <Setter Property="BorderThickness" Value="0"/>
</Style> 
```

在事件处理程序中添加

```
e.Column.CellStyle = this.Resources["noborder"] as Style; 
```

您可以使用不同的样式属性以使其正确

# ruby-on-rails - Rails - 将引号保留在助手中

> ID：10538842
> 
> 赞同：1
> 
> 时间：2012-05-10T16:58:11.600
> 
> 标签：ruby-on-rails

尝试四处寻找无济于事。我想在我的助手的字符串输出中保持引号与我在haml文件中使用escape_javascript调用助手时完全相同

帮手

```
def popOver_javascript_for_feedback_index(feedbacks)
  js = ""
  feedbacks.each do |fb|
    js += "$('span[rel=\"fb#{fb.id}\"]').popover();"
  end
  js += ""
end 
```

哈姆

```
:javascript
  $(document).ready(function() {
    #{escape_javascript popOver_javascript_for_feedback_index(@feedbacks)}
  }); 
```

在我得到的输出中

```
$(document).ready(function(){
  $(\'span[rel=\"fb1\"]\').popover();
} 
```

当我真的想要

```
$(document).ready(function(){
  $('span[rel="fb1"]').popover();
} 
```

徒劳地尝试了h（），raw（），html_safe的变体......我在这里错过了什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:47:01.340

删除 escape_javascript。！！！！

# configuration - 如何接受来自其他计算机的 ipython 连接？

> ID：10538846
> 
> 赞同：56
> 
> 时间：2012-05-10T16:58:24.973
> 
> 标签：configuration, ipython

我在 Ubuntu 12.04 上运行 ipython 0.12.1。您可以通过运行以下命令在浏览器中使用笔记本界面运行它：

```
ipython notebook --pylab 
```

配置文件可以在`~/.config/ipython/profile_default/`. 似乎每个内核的连接参数都放在`~/.config/ipython/profile_default/security/kernel-4e424cf4-ba44-441a-824c-c6bce727e585.json`. 这是该文件的内容（新文件在您启动新内核时创建）：

```
{
  "stdin_port": 54204, 
  "ip": "127.0.0.1", 
  "hb_port": 58090, 
  "key": "2a105dd9-26c5-40c6-901f-a72254d59876", 
  "shell_port": 52155, 
  "iopub_port": 42228
} 
```

这是不言自明的，但是如何设置具有永久配置的服务器，以便可以使用 LAN 中其他计算机的笔记本接口？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-10T21:11:33.380

如果您使用的是旧版本的笔记本电脑，以下内容仍然适用。对于新版本，请参阅下面的其他答案。

* * *

[IPython 文档的相关部分](http://ipython.org/ipython-doc/dev/notebook/public_server.html#running-a-public-notebook-server)

Notebook 服务器默认侦听 localhost。如果您希望它对 LAN 上的所有机器可见，只需指示它侦听所有接口：

```
ipython notebook --ip='*' 
```

或对其他机器可见的特定 IP：

```
ipython notebook --ip=192.168.0.123 
```

根据您的环境，在侦听外部接口时[启用 HTTPS 和密码可能是个好主意。](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#security)

如果您计划大量公开服务，那么创建 IPython 配置文件（例如`ipython profile create nbserver`）并相应地编辑配置也是一个好主意，因此您需要做的就是：

```
ipython notebook --profile nbserver 
```

加载所有 ip/port/ssl/password 设置。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-02-09T22:30:01.770

### 接受的答案/信息适用于旧版本。如何启用对新的 jupyter notebook 的远程访问？我得到了你的保障

首先，如果您还没有配置文件，请生成一个配置文件：

```
jupyter notebook --generate-config 
```

请注意此命令的输出，因为它会告诉您`jupyter_notebook_config.py`文件的生成位置。或者，如果您已经拥有它，它会询问您是否要使用默认配置覆盖它。编辑以下行：

```
## The IP address the notebook server will listen on.
c.NotebookApp.ip = '0.0.0.0' # Any ip 
```

为了增加安全性，请输入 python/IPython shell：

```
from notebook.auth import passwd; passwd() 
```

您将被要求输入并确认密码字符串。复制字符串的内容，其格式应为 type:salt:hashed-password。查找并编辑以下行：

```
## Hashed password to use for web authentication.
#  
#  To generate, type in a python/IPython shell:
#  
#    from notebook.auth import passwd; passwd()
#  
#  The string should be of the form type:salt:hashed-password.
c.NotebookApp.password = 'type:salt:the-hashed-password-you-have-generated'

## Forces users to use a password for the Notebook server. This is useful in a
#  multi user environment, for instance when everybody in the LAN can access each
#  other's machine through ssh.
#  
#  In such a case, server the notebook server on localhost is not secure since
#  any user can connect to the notebook server via ssh.
c.NotebookApp.password_required = True

## Set the Access-Control-Allow-Origin header
#  
#  Use '*' to allow any origin to access your server.
#  
#  Takes precedence over allow_origin_pat.
c.NotebookApp.allow_origin = '*' 
```

（重新）启动你的 jupyter notebook，瞧！

# actionscript-2 - 在 AS2 中运行时取消 setInterval 延迟

> ID：10538847
> 
> 赞同：0
> 
> 时间：2012-05-10T16:58:26.003
> 
> 标签：actionscript-2, flash-cs4

这可能吗？我有一个文件，当用户在另一个元素上扮演角色时，会在其中启动影片剪辑。为了让用户体验更愉快，这会在使用 setInterval 延迟 3 秒后发生。如果用户在 3 秒结束之前滚下元素，有没有办法停止和重置这个时间？

```
var xTimer = setInterval(wait, 3000);
function wait(){
    show('all');
    play('all');
    clearInterval(xTimer);
} 
```

上面是我用来设置延迟的代码，下面是我假设会中断和重置计时器的代码。

```
invisBtn.onRollOut = function(){
  rollover_mc.gotoAndStop(1);
  stop();
  clearInterval(xTimer());
  trace('off');
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:55:21.993

First, the setInterval & clearInterval functions use a Number variable to work.

setInterval() returns a Number variable, and clearInterval() takes that Number in parameter to remove the previous started interval. Here you seem to keep the interval ID inside a function variable instead of a Number one.

Thus, `clearInterval(xTimer());` should in reality be `clearInterval(xTimer)`; (without the parenthesis after xTimer).

And secondly, so you can use it in the invisBtn.onRollOut function, just be sure that the xTimer variable is scoped correctly (not inside a function where the invisBtn.onRollOut isn't also), and not on different keyframes of the timeline (timeline keyframes in Flash tends to forget the code you've written on it as soon as the reading head passes onto a new keyframe of the layer which has the code on it).

Feel free to ask more details if you need !

# javascript - ExternalInterface.callback 不起作用

> ID：10538851
> 
> 赞同：0
> 
> 时间：2012-05-10T16:58:31.027
> 
> 标签：javascript, facebook, actionscript-3, facebook-graph-api, externalinterface

我正在尝试做一个运行 .swf 离子画布页面的 Facebook 应用程序。我需要获取 Facebook 用户 id，我尝试使用 AS3 Facebook Graph Api，但它没有用，所以我一直试图通过调用`FB.getUserID();`获取 id 并通过获取 Flash 电影公开获得的 id并使用**ExternalInterface**类调用其中的方法。我尝试在 swf 内的文本字段中跟踪它，但它不起作用，我的意思是 id 永远不会到达 Flash 电影。

这是我的 Javascript 代码：

```
 <div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
var swf = null;

      FB.init({ appId: 'APP_ID',            
            status: true, 
            cookie: true,
            xfbml: true,
            oauth: true});

    FB.Canvas.setAutoResize(false);
    FB.Canvas.setSize({ height: 720, width: 600 });
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
    var uid = "";

   FB.Event.subscribe('auth.statusChange', function(response) {
          if (response.authResponse) {
                 uid = FB.getUserID();
                 console.log('User Id = '+ uid);
          }
          else
          {
              FB.login();
          }
   });

    // Call a flash function exposed with External Interface.
       document.getElementById("chimpInvader").setUID(uid);

   // Custom Facebook Calls.
   // Call getAccessToken() from flash using External Interface,
    function getAccessToken(){
       FB.login(function(response) 
       {
           if (response.authResponse) 
           {
             var access_token =   FB.getAuthResponse()['accessToken'];
             //Log your access token so you can be sure the javascript is worjking,.
             console.log('Access Token = '+ access_token);

              swf = document.getElementById("chimpInvader");

              // Call a flash function exposed with External Interface.
              swf.setAccessToken(access_token);
           }
           else 
           {           
             console.log('User cancelled login or did not fully authorize.');

           }
     }, {scope: ''});

   }
   var movieName = "chimpInvader";
    // Get Swf 
    function getSwf(movieName) {
         if (navigator.appName.indexOf("Microsoft") != -1) {
             return window[movieName];
         } else {
             return document[movieName];
         }
     }

</script> 
```

这是我在 .as 文件中的 AS3 代码，该文件在 .swf 运行时被调用：

```
package
{
    import flash.display.MovieClip;
    import flash.events.ProgressEvent;
    import flash.display.Loader;
    import flash.net.URLRequest;
    import flash.events.Event;
    import flash.external.ExternalInterface;

    public class PreloaderMc extends MovieClip
    {
        public static var user_id: String = ""; 
        function PreloaderMc():void
        {
            var mLoader = new Loader();             
            ExternalInterface.addCallback("setUID", getFId);            
            var mRequest:URLRequest = new URLRequest ("chimpInvader.swf");
            mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, oncomplete);
            mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,loading);
            mLoader.load(mRequest);
        }
        function getFId(uid):void
        {
            user_id = uid.toString();
            txtId.text = "Method Called!";
            trace("Getting id");
        }

        function oncomplete(e:Event)
        {
            addChild(e.currentTarget.content);
        }
        function loading(evt:ProgressEvent)
        {
            var porcentaje:Number = (evt.bytesLoaded/evt.bytesTotal)*100;
            trace (porcentaje);
            preloadertext.text = String(Math.round(porcentaje));
        }
    }
} 
```

我非常感谢我在这件事上能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:13:50.283

您的 swf 文件是否与您的画布页面在同一个域下？您是否使用 https 访问 swf 文件？如果没有，您可能会遇到跨站点脚本问题。几周前我遇到了同样的问题。我花了 1 天时间来解决我的跨站点脚本问题。

# c# - 来自另一个项目的 MVC3 DefaultModelBinder.ResourceClassKey 命名空间

> ID：10538854
> 
> 赞同：2
> 
> 时间：2012-05-10T16:58:34.763
> 
> 标签：c#, asp.net-mvc-3, resources

如何在“DefaultModelBinder.ResourceClassKey”中分配另一个项目的命名空间。

基于[这个](https://stackoverflow.com/a/3156814/138071)我回答，我可以解决同样的问题，但在我的解决方案中，我在另一个项目中有资源文件。

我用这里的代码进行探测，但我不太理解

```
DefaultModelBinder.ResourceClassKey = "MySolution.Common.Resources.Mensajes"; 
```

谢谢你。

# algorithm - 十进制表示：分区十进制和压缩十进制之间的不同用途

> ID：10538857
> 
> 赞同：0
> 
> 时间：2012-05-10T16:58:48.010
> 
> 标签：algorithm, decimal, presentation

我正在学习计算机科学课程，当我阅读这些定义时，我明白了。但我不知道两个演示文稿有什么不同的目的以及为什么。这里对我的书所说的目的进行了一些简短的解释：

```
Zone decimal : hightly compatible with text data.
Packed decimal : faster computing speed. 
```

我想知道的是：

1）在区域十进制表示中，有一个重复每个数字的区域部分。为什么 ？我认为这是没有目的的:(

2）为什么他们说区域十进制与文本数据兼容以及为什么压缩十进制更快。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:18:20.170

首先-您在哪里学习CS？这些术语来自 1960 年代，更常见的名称是 BCD（[二进制编码十进制](http://en.wikipedia.org/wiki/Binary-coded_decimal)）

区域十进制对每个数字使用整个字节。这意味着您可以像打印文本一样打印一个数字（每个“字符”存储一个数字 0-9），但由于只有 10 个数字，一个字节可以保存 256 个不同的值，这有点浪费。

压缩十进制使用 4 位可以存储 16 个不同值的事实。因此，您可以在一个字节中存储两个数字（前 4 位和后 4 位）。这仍然有点浪费，因为您只使用了一半的容量。但是只需移位和掩码操作即可轻松提取两位数。

如今，您几乎唯一能看到 BCD 的地方是在一些低级硬件中，您想在根本不使用微处理器的情况下读取/x-mit 一个数字。仅在晶体管中制作 BCD 计数器很容易

但是，如果您想做任何数学运算，则必须像在纸上一样对每个数字进行长乘法-或者转换为常规整数并再次返回

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:27:00.020

这两种表示形式都失宠了，可能是因为它们没有直接得到 C 的支持，因此所有的系统都是 Unix 的后代。

压缩十进制在两个方面具有优势：由于占用的空间更少，它可以更快地脱离总线并进入处理器，并且许多 CISC 指令集都有专门的算术指令。引用[http://en.wikipedia.org/wiki/Packed_decimal#Packed_BCD](http://en.wikipedia.org/wiki/Packed_decimal#Packed_BCD)：

> 压缩 BCD [二进制编码的十进制] 在 COBOL 编程语言中支持为“COMPUTATIONAL-3”（许多其他编译器供应商采用的 IBM 扩展）或“PACKED-DECIMAL”（1985 COBOL 标准的一部分）数据类型。除了 IBM System/360 和更高版本的兼容大型机之外，压缩 BCD 是在 Digital Equipment Corporation 的原始 VAX 处理器的本机指令集中实现的，并且是 Burroughs Corporation 中型系统系列大型机的本机格式（源自 1950 年代 Electrodata 200系列）。

分区十进制 (http://en.wikipedia.org/wiki/Zoned_decimal#Zoned_decimal) 在穿孔卡片上的字符和它们在内存中的表示之间有一个简单的映射，这也许可以解释你的教科书声称它“与文本数据高度兼容。 " 正如 Wikipedia 文章所暗示的，它是 IBM 大型机圈子中更多使用的术语。在 minis 上，我们倾向于将其称为普通的旧十进制数据，即 PIC 9 数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T04:04:32.540

自然环境中的“分区十进制”旨在与 EBCDIC 字符集兼容。

ASCII 将数字表示为 x'3x' -- x'39' 显示为字符“0”到“9”。

EBCDIC 字符集（起源于[Hollerith 穿孔卡片](http://en.wikipedia.org/wiki/Punched_card)）使用类似但不同的方案，其中 x'F0' 显示为字符“0”，而 x'F9' 显示为字符 '9'。

穿孔卡片的固定长度为 80 个字符，在许多情况下，其中 10 或 12 个字符被记录类型标识符和序列号吃掉（如果您将一堆卡片掉在地板上，这非常重要！）。所以空间非常宝贵。不是在每个数字旁边输入“+”或“-”字符，而是在卡的顶部附近使用“打孔”额外的孔来表示正数或负数，从而节省一个字节。

这些打孔字符在 EBCDIC 中被编码为 x"D0' 到 x'D9" 用于 -0 到 -9 和 x'C0' 到 x'C9' 用于 +0 到 +9，通常在数字的最后一位。

因此，“分区十进制”格式。每个字节的前四位是区域，后四位“数字”到 -42 被编码为 x'F4D2'。这更像是一种约定，因为计算机无法使用这种格式做任何事情。因此，在进行任何计算之前，需要将其编码为“打包”格式。这很简单 'X'F4D2' -> x'042D' 主要是抓取最后一个区域，然后从每个字节中提取“数字”四位，然后可以将其转换为二进制。

在设计 IBM 大型机时，最大的用户群是银行、保险公司和公用事业公司。那里的大部分处理都遵循这种模式。

*   读打孔卡。
*   读磁带记录。
*   将每月付款添加到余额中
*   在磁带上存储新余额
*   打印新余额

大多数计算涉及货币金额，并且大部分结果会立即显示。很明显，如果机器可以直接对压缩十进制值进行算术运算，您就可以避免几个昂贵的“转换为二进制”和“转换为十进制”指令。作为奖励，它可以轻松地将小数点放在正确的位置并执行任何小数四舍五入。因此，大量工作用于实现本机压缩十进制指令（零、加、减、乘、除、移位和舍入等）。

This has been the preferred currency format for IBM mainframes ever since.

For many years developers on other platforms poured scorn on the mainframers for using such an archaic format, and, only recently began to realize how difficult it was to do fixed point decimal arithmetic to the standards accountants and tax collectors expect. Thanks to the efforts of [Mike_Cowlishaw](http://en.wikipedia.org/wiki/Mike_Cowlishaw) and others the rest of the world has caught up with the venerable IBM 360 and Java programmers can now calculate sales tax correctly using the BigDecimal library which is based on a variation on the old packed decimal format.

# c# - C# Linq XML API

> ID：10538860
> 
> 赞同：0
> 
> 时间：2012-05-10T16:59:01.460
> 
> 标签：c#, xml, linq, windows-phone-7

我正在尝试将 Formula 1 API 用于 WP7 应用程序。我找不到选择正确节点和元素的正确方法。什么是正确的方法？这是 xml：ergast.com/api/f1/2012/drivers

**DriversPage.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

using System.Xml.Linq;

namespace Formule1
{
public partial class DriversPage : PhoneApplicationPage
{
    const string URL = "http://ergast.com/api/f1/2012/";

    public DriversPage()
    {
        InitializeComponent();
        GetDrivers();
    }

    private void GetDrivers()
    {
        string resource = "drivers";            
        WebClient webclient = new WebClient();        
        webclient.DownloadStringCompleted += new        DownloadStringCompletedEventHandler(webclient_DownloadStringCompleted);          
        webclient.DownloadStringAsync(new Uri(URL + resource));
    }

    private void webclient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            return;
        }
        // xml-resultaat parsen
        XDocument xmlEntries = XDocument.Parse(e.Result);                    

        List<Driver> drivers = new List<Driver>();

            drivers = (from element in xmlEntries.Root.Element("DriverTable").Descendants("Driver")
                      select new Driver(element.Attribute("driverId").Value)).ToList<Driver>();

            DriverListBox.ItemsSource = drivers;

    }
  }
} 
```

**API**

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="http://ergast.com/schemas/mrd-1.2.xsl"?>
<MRData xmlns="http://ergast.com/mrd/1.2" series="f1" url="http://ergast.com/api/f1/2012/drivers" limit="30" offset="0" total="24">
        <DriverTable season="2012">
                <Driver driverId="alonso" url="http://en.wikipedia.org/wiki/Fernando_Alonso">
                        <GivenName>Fernando</GivenName>
                        <FamilyName>Alonso</FamilyName>
                        <DateOfBirth>1981-07-29</DateOfBirth>
                        <Nationality>Spanish</Nationality>
                </Driver>
                <Driver driverId="button" url="http://en.wikipedia.org/wiki/Jenson_Button">
                        <GivenName>Jenson</GivenName>
                        <FamilyName>Button</FamilyName>
                        <DateOfBirth>1980-01-19</DateOfBirth>
                        <Nationality>British</Nationality>
                </Driver>
                <Driver driverId="rosa" url="http://en.wikipedia.org/wiki/Pedro_de_la_Rosa">
                        <GivenName>Pedro</GivenName>
                        <FamilyName>de la Rosa</FamilyName>
                        <DateOfBirth>1971-02-24</DateOfBirth>
                        <Nationality>Spanish</Nationality>
                </Driver>
                <Driver driverId="resta" url="http://en.wikipedia.org/wiki/Paul_di_Resta">
                        <GivenName>Paul</GivenName>
                        <FamilyName>di Resta</FamilyName>
                        <DateOfBirth>1986-04-16</DateOfBirth>
                        <Nationality>Scottish</Nationality>
                </Driver>
                <Driver driverId="glock" url="http://en.wikipedia.org/wiki/Timo_Glock">
                        <GivenName>Timo</GivenName>
                        <FamilyName>Glock</FamilyName>
                        <DateOfBirth>1982-03-18</DateOfBirth>
                        <Nationality>German</Nationality>
                </Driver>
                <Driver driverId="grosjean" url="http://en.wikipedia.org/wiki/Romain_Grosjean">
                        <GivenName>Romain</GivenName>
                        <FamilyName>Grosjean</FamilyName>
                        <DateOfBirth>1986-04-17</DateOfBirth>
                        <Nationality>French</Nationality>
                </Driver>
                <Driver driverId="hamilton" url="http://en.wikipedia.org/wiki/Lewis_Hamilton">
                        <GivenName>Lewis</GivenName>
                        <FamilyName>Hamilton</FamilyName>
                        <DateOfBirth>1985-01-07</DateOfBirth>
                        <Nationality>British</Nationality>
                </Driver>
                <Driver driverId="hulkenberg" url="http://en.wikipedia.org/wiki/Nico_H%C3%BClkenberg">
                        <GivenName>Nico</GivenName>
                        <FamilyName>Hülkenberg</FamilyName>
                        <DateOfBirth>1987-08-19</DateOfBirth>
                        <Nationality>German</Nationality>
                </Driver>
                <Driver driverId="karthikeyan" url="http://en.wikipedia.org/wiki/Narain_Karthikeyan">
                        <GivenName>Narain</GivenName>
                        <FamilyName>Karthikeyan</FamilyName>
                        <DateOfBirth>1977-01-14</DateOfBirth>
                        <Nationality>Indian</Nationality>
                </Driver>
                <Driver driverId="kobayashi" url="http://en.wikipedia.org/wiki/Kamui_Kobayashi">
                        <GivenName>Kamui</GivenName>
                        <FamilyName>Kobayashi</FamilyName>
                        <DateOfBirth>1986-09-13</DateOfBirth>
                        <Nationality>Japanese</Nationality>
                </Driver>
                <Driver driverId="kovalainen" url="http://en.wikipedia.org/wiki/Heikki_Kovalainen">
                        <GivenName>Heikki</GivenName>
                        <FamilyName>Kovalainen</FamilyName>
                        <DateOfBirth>1981-10-19</DateOfBirth>
                        <Nationality>Finnish</Nationality>
                </Driver>
                <Driver driverId="maldonado" url="http://en.wikipedia.org/wiki/Pastor_Maldonado">
                        <GivenName>Pastor</GivenName>
                        <FamilyName>Maldonado</FamilyName>
                        <DateOfBirth>1985-03-09</DateOfBirth>
                        <Nationality>Venezuelan</Nationality>
                </Driver>
                <Driver driverId="massa" url="http://en.wikipedia.org/wiki/Felipe_Massa">
                        <GivenName>Felipe</GivenName>
                        <FamilyName>Massa</FamilyName>
                        <DateOfBirth>1981-04-25</DateOfBirth>
                        <Nationality>Brazilian</Nationality>
                </Driver>
                <Driver driverId="perez" url="http://en.wikipedia.org/wiki/Sergio_P%C3%A9rez">
                        <GivenName>Sergio</GivenName>
                        <FamilyName>Pérez</FamilyName>
                        <DateOfBirth>1990-01-26</DateOfBirth>
                        <Nationality>Mexican</Nationality>
                </Driver>
                <Driver driverId="petrov" url="http://en.wikipedia.org/wiki/Vitaly_Petrov">
                        <GivenName>Vitaly</GivenName>
                        <FamilyName>Petrov</FamilyName>
                        <DateOfBirth>1984-09-08</DateOfBirth>
                        <Nationality>Russian</Nationality>
                </Driver>
                <Driver driverId="pic" url="http://en.wikipedia.org/wiki/Charles_Pic">
                        <GivenName>Charles</GivenName>
                        <FamilyName>Pic</FamilyName>
                        <DateOfBirth>1990-02-15</DateOfBirth>
                        <Nationality>French</Nationality>
                </Driver>
                <Driver driverId="raikkonen" url="http://en.wikipedia.org/wiki/Kimi_R%C3%A4ikk%C3%B6nen">
                        <GivenName>Kimi</GivenName>
                        <FamilyName>Räikkönen</FamilyName>
                        <DateOfBirth>1979-10-17</DateOfBirth>
                        <Nationality>Finnish</Nationality>
                </Driver>
                <Driver driverId="ricciardo" url="http://en.wikipedia.org/wiki/Daniel_Ricciardo">
                        <GivenName>Daniel</GivenName>
                        <FamilyName>Ricciardo</FamilyName>
                        <DateOfBirth>1989-07-01</DateOfBirth>
                        <Nationality>Australian</Nationality>
                </Driver>
                <Driver driverId="rosberg" url="http://en.wikipedia.org/wiki/Nico_Rosberg">
                        <GivenName>Nico</GivenName>
                        <FamilyName>Rosberg</FamilyName>
                        <DateOfBirth>1985-06-27</DateOfBirth>
                        <Nationality>German</Nationality>
                </Driver>
                <Driver driverId="michael_schumacher" url="http://en.wikipedia.org/wiki/Michael_Schumacher">
                        <GivenName>Michael</GivenName>
                        <FamilyName>Schumacher</FamilyName>
                        <DateOfBirth>1969-01-03</DateOfBirth>
                        <Nationality>German</Nationality>
                </Driver>
                <Driver driverId="bruno_senna" url="http://en.wikipedia.org/wiki/Bruno_Senna">
                        <GivenName>Bruno</GivenName>
                        <FamilyName>Senna</FamilyName>
                        <DateOfBirth>1983-10-15</DateOfBirth>
                        <Nationality>Brazilian</Nationality>
                </Driver>
                <Driver driverId="vergne" url="http://en.wikipedia.org/wiki/Jean-%C3%89ric_Vergne">
                        <GivenName>Jean-Éric</GivenName>
                        <FamilyName>Vergne</FamilyName>
                        <DateOfBirth>1990-04-25</DateOfBirth>
                        <Nationality>French</Nationality>
                </Driver>
                <Driver driverId="vettel" url="http://en.wikipedia.org/wiki/Sebastian_Vettel">
                        <GivenName>Sebastian</GivenName>
                        <FamilyName>Vettel</FamilyName>
                        <DateOfBirth>1987-07-03</DateOfBirth>
                        <Nationality>German</Nationality>
                </Driver>
                <Driver driverId="webber" url="http://en.wikipedia.org/wiki/Mark_Webber">
                        <GivenName>Mark</GivenName>
                        <FamilyName>Webber</FamilyName>
                        <DateOfBirth>1976-08-27</DateOfBirth>
                        <Nationality>Australian</Nationality>
                </Driver>
        </DriverTable>
</MRData> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:13:02.713

我认为它是导致问题的命名空间。你可以这样尝试：

```
drivers = (from element in xmlEntries.Descendants()
           where element.Name.LocalName == "Driver"
           select new Driver(element.Attribute("driverId").Value)).ToList<Driver>(); 
```

编辑：或命名空间：

```
var ns = xmlEntries.Root.Name.Namespace;
drivers = (from element in xmlEntries.Root.Element(ns + "DriverTable").Descendants(ns + "Driver")
           select new Driver(element.Attribute("driverId").Value)).ToList<Driver>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:27:19.760

尝试这个

```
 private void webclient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            return;
        }        
        XDocument xmlEntries = XDocument.Parse(e.Result); 
        IEnumerable<Driver> list = from item in feed.Descendants("channel").Elements("Driver")
                                       select new Driver
                                       {
                                           Name = (string)item.Attribute("driverId")                                              
                                       };
        ObservableCollection<Driver>() collection = new ObservableCollection<Driver>();
        foreach (Driver d in list)
        {
            collection.Add(d);
        }

        DriverListBox.ItemsSource = collection;
    } 
```

# windows - Perl system() EXE 权限？

> ID：10538861
> 
> 赞同：2
> 
> 时间：2012-05-10T16:59:02.597
> 
> 标签：windows, perl, cmd, atmel, avrdude

我对在 Windows 上运行 Perl 有点陌生，并且在尝试运行`avrdude.exe`将 HEX 文件上传到 Atmel 微控制器时遇到了一些系统命令问题。这些是我用来执行命令的 Perl 命令：

```
$AVR_CMD = "\"".$AVR_DUDE."\"" . " -C" . "\"".$AVR_DUDE_CONF."\""; 
$AVR_CMD .= " -v -v -v -v -patmega2560 -cstk500v2"; 
$AVR_CMD .= " -P\\\\.\\".$PORT;
$AVR_CMD .= " -b115200 -D -Uflash:w:". "\"".$HEX_FILE."\"". ":i";

system($AVR_CMD); 
```

现在，我正在打印最终命令以确保它是好的，而且看起来是这样。但是，在实际执行中似乎存在某种权限问题。当我将打印的命令复制并粘贴到 Windows 终端时，结果如下：

```
avrdude.exe: Version 5.11, compiled on Sep  2 2011 at 19:38:36
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2009 Joerg Wunsch

         System wide configuration file is BLOCKED FOR SO

         Using Port                    : \\.\COM4
         Using Programmer              : stk500v2
         Overriding Baud Rate          : 115200
avrdude.exe: Send: . [1b] . [01] . [00] . [01] . [0e] . [01] . [14] 
```

这显然是使用正确的参数运行的 avrdude。但是，当我使用 运行此命令时`system()`，我会收到以下输出：

```
avrdude.exe: Version 5.11, compiled on Sep  2 2011 at 19:38:36
         Copyright (c) 2000-2005 Brian Dean, http://www.bdmicro.com/
         Copyright (c) 2007-2009 Joerg Wunsch

         System wide configuration file is BLOCKED FOR SO

         Using Port                    : \\.\COM4
         Using Programmer              : stk500v2
         Overriding Baud Rate          : 115200
avrdude.exe: ser_open(): can't open device "\\.\COM4": Access is denied.
avrdude.exe done.  Thank you. 
```

这让我相信在 CMD 中运行命令和通过`system()`. 如果有人可以对此提供一些见解或给我任何解决此问题的提示，将不胜感激。预先感谢。

编辑：我编写了一个 Perl 脚本，在向 Atmel 发送硬重置后调用 avrdude.org（基于[此](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1201441300)线程中的一些代码）：

```
#!/usr/bin/perl -w
use Win32::SerialPort qw( :STAT 0.19 );
use FindBin qw($Bin);

#Do port reset
foreach (@ARGV)
{
    if ($_ =~ /-P\\\\\.\\(.*)/)
    {
        print "Found -P argument - ";
        print ("Resetting DTR on " . $1 . "\n");
        $P1 = new Win32::SerialPort ($1);
        $P1->pulse_dtr_on(1000);    
        last;
    }
}

select(undef, undef, undef, 0.1);
print ("Executing avrdude\n");
system($Bin . "/avrdude.org " . join(" ", @ARGV)); 
```

但是，这仍然存在同样的问题。如果 Perl`system()`调用和通过命令行运行具有相同的权限，那为什么我可以在命令行中执行命令，但是当我从 Perl 调用相同的 EXE 时，COM4 访问受到限制？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:24:14.677

[`system`](http://perldoc.perl.org/functions/system.html)可以像你一样接受一个字符串参数，或者一个参数列表。在后一种（推荐的）情况下，shell 会为您处理引用。所以，只需列出参数并传递它。像这样的东西：

```
my @args = ($AVR_DUDE, " -C", $AVR_DUDE_CONF, 
           qw(-v -v -v -v -patmega2560 -cstk500v2), "-P\\.\.$PORT", 
           qw(-b115200 -D -Uflash:w:), $HEX_FILE, ":i");
system(@args); 
```

请注意，您不需要将变量放在双引号之外。您可以使用其他引用方法来避免转义引号。例如：

```
"\"" 
```

可以写成以下任何一种形式：

```
'"'
qw(")
q(")
qq(")
q#"#   # etc 
```

有关详细信息，请参阅[perldoc perlop](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:15:50.487

我怀疑您的问题可能在于引用命令行的参数。

我试图模拟您的环境，因为您没有显示所有变量的内容：

```
use strict;
use warnings;

my $AVR_DUDE = 'avrdude.exe';
my $AVR_DUDE_CONF = 'my-conf';
my $PORT = 'COM4';
my $HEX_FILE = 'file.hex';

my $AVR_CMD;
$AVR_CMD = "\"".$AVR_DUDE."\"" . " -C" . "\"".$AVR_DUDE_CONF."\""; 
$AVR_CMD .= " -v -v -v -v -patmega2560 -cstk500v2"; 
$AVR_CMD .= " -P\\\\.\\".$PORT;
$AVR_CMD .= " -b115200 -D -Uflash:w:". "\"".$HEX_FILE."\"". ":i";

print "$AVR_CMD\n"; 
```

这是输出：

```
"avrdude.exe" -C"my-conf" -v -v -v -v -patmega2560 -cstk500v2 -P\\.\COM4 -b115200 -D -Uflash:w:"file.hex":i 
```

当您将它粘贴到 Cmd 中时，该命令是否有效？

如果不是，您将不得不修复引用。我怀疑这`-C"my-conf"`可能是错误的。尝试`-C "my-conf"`或`"-Cmy-conf"`。

# c# - 具有多个用户的 C# UDP 服务器

> ID：10538862
> 
> 赞同：5
> 
> 时间：2012-05-10T16:59:04.317
> 
> 标签：c#, udp

考虑代码：

```
class UPDServer {

    //start listener
    public void start() {
        UdpClient listener = new UdpClient(this._porta);
        IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, 10000);

        State s = new State();
        s.listener = listener;
        s.ipEndPoint = ipEndPoint;

        // begin to listen again
        listener.BeginReceive(new AsyncCallback(ReceiveCallback), s);

   }

 //receive data
   public void ReceiveCallback(IAsyncResult ar)
   {
      // we got data
      State s = (State)(ar.AsyncState);

      Byte[] received = e.escuta.EndReceive(ar, ref e.ipEndPoint);
      string text = ""; = Encoding.ASCII.GetString(received);
      // ... do somenthing with text

      // begin to listen again
      s.listener.BeginReceive(new AsyncCallback(ReceiveCallback), e);
   }
} 
```

在上面的代码中，EndReceive 和下一个 BeginReceive 之间有一个时间跨度，没有人在听，我*认为*如果在这个时间跨度内有消息，它将丢失。

好吧，我想有某种缓冲区，但即使缓冲区在没有人收听消息的时间跨度内填满，消息也会丢失。

我记得有人说这可以通过在同一端点多次调用 BeginReceive 来解决，所以我尝试了这个：

```
 for( int x = 0; x < 5;x++) {
      escuta.BeginReceive(new AsyncCallback(ReceiveCallback), e);
   } 
```

奇怪的是，在同一个套接字上调用 begin receive 不会引发错误，但每次收到一条消息时，所有五个 beginReceive 都会触发并且所有五个都收到相同的消息。

有没有办法改进代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:17:15.790

首先，不能保证在使用 UDP 时您将获得所有数据，因此无论如何您都必须使您的代码/协议容错。

除非您的处理非常密集并且您期望大量数据涌入您可能不需要做不同的事情。只需添加一些错误检测代码，这样您就会知道您的代码是否无法应对。

但是，如果您需要保持接收循环快速，当您接收到数据时，请将其复制到队列中以供另一个线程处理，以便您可以再次快速开始读取。或者在某些情况下，您可以编写最终接收，以便在多个数据包背靠背进入时处理重入。

# django - Django haystack，搜索中某些字段的优先级

> ID：10538864
> 
> 赞同：6
> 
> 时间：2012-05-10T16:59:09.150
> 
> 标签：django, search, django-haystack, whoosh

我有一个这样的模型：

```
class MyModel(models.Model):
    desc1 = models.TextField(blank=True, default="")
    desc2 = models.TextField(blank=True, default="") 
```

我想在这个模型的字段上搜索字符串。假设 MyModel 的这些实例：

```
1: desc1="ABc?", desc2="asdasd you"
2: desc1="Hello, How are you?", desc2="Thank you!"
3: desc1="ABc?", desc2="ajdf" 
```

当我搜索“你”时，它应该向我显示第一个和第二个实例。最后，我需要显示 desc1 中“你”的结果高于其他结果。例如，在此示例中，第二个应该高于第一个。

我已经使用 haystack 进行搜索并为此创建了一个模板。但我无法解决优先级问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:23:03.057

当您说“优先级”时，您的真正意思是“排序”，用搜索的术语来说。

Django Haystack 可以按字段匹配排序，但它可以按“分数”排序，它使用算法来确定排序顺序。您可以通过“提升”来影响分数的权重——参见 [http://django-haystack.readthedocs.org/en/latest/boost.html](http://django-haystack.readthedocs.org/en/latest/boost.html)

此外，您应该考虑在 search_indexes.py 中添加仅用于加权的额外字段。您不需要在 Django 模型字段和索引之间进行一对一的映射。就像是

```
class MyModelIndex(QueuedSearchIndex):
    desc1 = indexes.CharField()
    desc2 = indexes.CharField()
    otherWeightedField = indexes.CharField()

    def prepare_otherWeightedField(self,obj)
        # fill the extra field with extra stuff to help you sort, based on processing values from other fields 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-06T15:32:05.623

我使用这种方法。

```
from types import ListType
from haystack import indexes

class DocumentField(indexes.SearchField):
    """An index field that combines and weights other fields because Haystack
    does not provide for weighted searching. This field makes use of other
    existing field classes for DRY."""

    def __init__(self, *args, **kwargs):
        self.fields = kwargs.pop("fields", None)
        super(DocumentField, self).__init__(*args, **kwargs)
        self.document = True
        self.use_template = False

    def prepare(self, obj):
        values = []

        for field_instance in self.fields.values():
            v = field_instance.prepare(obj)
            if not v:
                continue
            if not isinstance(v, ListType):
                v = [v]
            # Apply boost
            v = v * int(field_instance.boost * 10)
            values.extend(v)

        return "\n".join(values)

class MyModelIndex(indexes.SearchIndex, indexes.Indexable):
    text = DocumentField(fields=dict(
        desc1 = indexes.CharField(model_attr="desc1", boost=1.0),
        desc2 = indexes.CharField(model_attr="desc2", boost=0.7)
    ))

    def get_model(self):
        return MyModel 
```

# java - 在 Tomcat 7 中加载我的 ServletContextListener

> ID：10538867
> 
> 赞同：3
> 
> 时间：2012-05-10T16:59:14.937
> 
> 标签：java, tomcat7

Tomcat 新手并在 Eclipse 环境中运行 Tomcat 7。

我遵循了创建[课程的教程](http://tomcat-configure.blogspot.com/2009/01/tomcat-context-listener-example.html)`ServletContextListener`。我的问题是，简单地说，我如何在 Tomcat 中加载和运行它？我可以使用注释吗？我需要编辑一个xml文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:01:15.330

[Javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)来救援：

> 为了接收这些通知事件，必须在 Web 应用程序的部署描述符中声明实现类，使用 WebListener 进行注释，或者通过 ServletContext 上定义的 addListener 方法之一进行注册。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:06:27.523

作为 web.xml 中的示例：

```
<listener>
    <listener-class>fully qualified class name of your listener class</listener-class>
</listener> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T20:57:44.967

当您从 Apache Tomcat 网站下载 Tomcat 7.0 时，您将获得一个包含示例应用程序的版本。有一些 Servlet 3.0 特性的源代码和配置，比如注解。

看看这些例子——它们很有用。

# java - 在数字处拆分字符串并在java中写入输出文件

> ID：10538869
> 
> 赞同：0
> 
> 时间：2012-05-10T16:59:22.270
> 
> 标签：java

我有一个带有字符串的文本文件，如下所示

```
1.dfaf 2.agdagdag 3.dgdfg 4.sdfsasd 5.dfdf 6.gdg7.fadgd8.dsgg9.fgdsf 10.trete 
```

我知道从文件中读取它并写入新文件的逻辑

但我想知道将其拆分为数字并在输出文件中写入新行的逻辑

喜欢

```
1.dfaf
2\. agdagdag
3\. dgdfg 
```

ETC...

如何得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:06:22.120

如果您只想写入而不存储新字符串，则可以使用以下操作。只需用换行符替换空格字符！因此，新创建的字符串将采用您希望将其写入文件的确切格式。

```
 String orignalString = readFromFile(...); // implement this
  String stringToWriteToFile = originalString.replace(" ","\n"); // so you replace the space with a \n
  writeToFile(stringToWriteToFile); // implement this 
```

这**仅**在字符串始终由单个空格分隔时才有效。

注意：如果这是家庭作业，每个人都会使用 String.split()。因此，您可能会因创新和使用 String.replace() 而获得一些额外积分。我自己做的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:14:27.330

您应该使用 split 函数并使分隔符成为正则表达式（空格后跟 1 位数字）

这个应该做...

```
String[] arr = "1.dfaf 2.agdagdag 3.dgdfg 4.sdfsasd 5.dfdf 6.gdg 7.fadgd 8.dsgg 9.fgdsf 10.trete".split(" ");
for(int i = 0; i < arr.length; i++) {
    System.out.println(arr[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:06:38.363

您可以使用[String.split()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法来执行此操作：

```
String[] result = "1.dfaf 2.agdagdag 3.dgdfg 4.sdfsasd 5.dfdf 6.gdg7.fadgd8.dsgg9.fgdsf 10.trete".split("\\s");
for (int x = 0; x < result.length; x++) {
    System.out.println(result[x]);
} 
```

您也可以使用[StringTokenizer](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)来执行此操作，但似乎不鼓励这样做。

这是你的意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:02:13.693

尝试 String.split [http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String) )

您需要学习一些正则表达式才能使用它，但是正则表达式是一个非常值得学习的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:25:26.390

也许这可能会有所帮助：

*   获得字符串后，查找与 匹配的所有子字符串`\d+\.[a-z]+`。为此，您需要`java.util.regex.Matcher`和/或`java.util.regex.Pattern`. 您可以在[测试工具（Java™ 教程 > 基本类 > 正则表达式）](http://docs.oracle.com/javase/tutorial/essential/regex/test_harness.html)中找到一个示例。看方法`matcher.find()`和`matcher.group()`。
*   然后，如果要在数字和文本之间插入空格，则必须用`.`with分隔每个子字符串。`split`

我希望这会有所帮助。祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T17:05:23.873

[`String.split(Sting regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)将是一个很好的起点。此外，正则表达式将是解决您的问题的必要附加部分。

# javascript - Twitter Bootstrap 选项卡：在悬停时显示，在鼠标输出时隐藏

> ID：10538874
> 
> 赞同：2
> 
> 时间：2012-05-10T16:59:56.387
> 
> 标签：javascript, jquery, css, hover, twitter-bootstrap

我改变了 bootstrab.js （只是用悬停替换了点击）：

```
 $(function () {
    $('body').on('hover.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
      e.preventDefault()
      $(this).tab('show')
    })
  }) 
```

现在，当您没有将鼠标悬停在选项卡或内容上时，我希望内容选项卡关闭。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:17:03.633

更新：类似于下面的内容

```
var timer;

$('tab_element').hover(
    function(){ //hover
        // clear timer first
        clearTimeout(timer);
        // then show the content
    },
    function(){ //unhovered, 1000 milliseconds
        // set a timer to call the hide function
        timer = setTimeout("hide_function", 1000);
    }
);

$('content_tab_here').bind('mouseleave', function(){
    // hide it, you can set a timer here too if you want
}); 
```

这是关于计时器的文档[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp) 这里有很多选项，但这会让你开始，我使用的 jquery 是老派，所以如果你使用最新版本的 jquery 你可以相应地更改代码。我不想为你写出所有东西，因为那样你就不会学习，而且我没有那么多时间，因为我在工作。祝你好运。

# matlab - 为什么图表有刻度线和细线？

> ID：10538875
> 
> 赞同：0
> 
> 时间：2012-05-10T16:59:58.743
> 
> 标签：matlab, graph

我有以下代码：

```
RdmMatrix = vertcat(Round_deviation_mean {:});
rslMatrix = vertcat(roundsumlive {:});
correctsMatrix=vertcat(corrects{:});
A = [ RdmMatrix(:,1), rslMatrix(:,1) ];

figure(88);
bar([RdmMatrix(:,1) rslMatrix(:,1)], 0.05, 'stack');
legend('Correct', 'Functioning');
xlabel('Run');
ylabel('Sensor Count');
hold on; 
```

我不确定我是否理解以下内容，有人可以帮忙吗？！

[我的代码的输出](http://i.stack.imgur.com/IPoPj.jpg)

```
the data of round deviation mean are zeros

here are data from 65 to 100 of round sumlive 
```

23.000 17.000 31.000 31.000 23.000 31.000 31.000 23.000 21.000 21.000 23.000 31.000 31.000 31.000 31.000 31.000 16.000 16.00015.000
13.000 12.0001010000
37.000 37.000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:57:33.397

最好的选择是通过取平均值来减少运行次数。

# html - 如何将文本保留在 div 中，始终在中间？

> ID：10538881
> 
> 赞同：9
> 
> 时间：2012-05-10T17:00:19.193
> 
> 标签：html, css

我试图让文本保持在可调整大小的 DIV 的中间。这是示例：

CSS

```
#rightmenu {
  position: absolute;
  z-index: 999999;
  right: 0;
  height: 60%;
  text-align: center;
} 
```

HTML

```
<div id="rightmenu">This text should be center aligned and in the middle of the resizable rightmenu</div> 
```

我试图创建一个类来包含自动上带有“margin-top 和 margin-bottom”的文本，但不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T17:33:30.350

如果你不关心 IE7 支持，你可以这样做：

HTML：

```
<div id=wrap>
  <div id=inside>
    Content, content, content.
  </div> 
</div> 
```

CSS：

```
#wrap {
    /* Your styling. */
    position: absolute;
    z-index: 999999;
    right: 0;
    height: 60%;
    text-align: center;

    /* Solution part I. */
    display: table;
}

/* Solution part II. */
#inside {
    width: 100%;
    height: 100%;
    display: table-cell;
    vertical-align: middle;
} 
```

代码：[http ://tinkerbin.com/ETMVplub](http://tinkerbin.com/ETMVplub)

如果你对 JavaScript 没问题，你可以试试这个 jQuery 插件：[http](http://centratissimo.musings.it/) ://centratissimo.musings.it/但由于它似乎也不支持 IE7，所以 CSS 解决方案可能更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-15T00:22:11.907

[Flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)以流畅的方式对齐元素，真正改变了游戏规则。将您的容器元素定义为`display: flex`，然后对齐您将使用的内部孩子`justify-content: center; align-items: center;`

```
.container {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}
.parent {
    height: 500px;
    width: 500px;
    position: relative;
}

<div class="parent">
    <div class="container">
        <p>Hello</p>
        <p>World</p>
    </div>
</div> 
```

您会注意到“Hello”和“World”都将在`.container`元素内垂直和水平居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:44:44.757

替换`height: 60%;`为`padding: 30% 0;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:42:54.963

如果你想让文本在 div 中水平居中，'text-align:center;' 是你的朋友。如果你想让它垂直居中；将内容包装在内部 div 中，然后对该内部 div 使用 'margin: auto'。当然，你必须给内部 div 一个宽度；否则，水平中心将不起作用。
如果表是一个选项，'valign="middle"' 也适用于表（否则不鼓励）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:01:39.143

**检查是否需要：**

```
<html>

<head>
  <style type="text/css">
    div {
      height: 100px;
      width: 100px;
      background: #ccc;
      text-align: center;
    }

    p {
      line-height: 100px;
    }

  </style>
</head>

<body>
  <div>
    <p>centered</p>
  </div>
</body>

</html> 
```

# .net - 具有冲突文件名的自定义 App.config 部分

> ID：10538882
> 
> 赞同：0
> 
> 时间：2012-05-10T17:00:21.660
> 
> 标签：.net, app-config, .net-assembly

该项目有一个名为 MyNamespace.MyConfig 的自定义配置节类。该类存储在 C# 库 MyNamespace.MyAssembly.dll 中。

该项目还有一个控制台应用程序。客户端希望它以与 dll 相同的方式被调用，即 MyNamespace.MyAssembly.exe。

App.config 文件具有以下定义：

```
 <section name="myConfigSection" type="MyNamespace.MyConfig, MyNamespace.MyAssembly"/> 
```

现在的问题是应用程序没有找到 MyConfig 类，因为它正在寻找错误的程序集 - 在 exe 文件中。

第一个想法是更具体地了解程序集的名称，因此 ConfigurationManager 知道它应该查看 dll 而不是 exe：

```
 <section name="myConfigSection" type="MyNamespace.MyConfig, MyNamespace.MyAssembly.dll"/> 
```

不幸的是，这没有帮助，应用程序说，它找不到名为 MyNamespace.MyAssembly.dll 的程序集。

使其工作的唯一方法是将应用程序程序集重命名为 MyNamespace.MyAssembly.Console，但客户端不同意这一点。

**如何告诉 ConfigurationManager 它应该在 MyNamespace.MyAssembly.dll 而不是 MyNamespace.MyAssembly.exe 中查找我的 MyNamespace.MyConfig 类？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:51:01.653

不幸的是，在这种情况下，无法指示 .NET 首先搜索 .dll。即使有一个像这样的程序集的全名

```
<section name="myConfigSection" type="MyNamespace.MyConfig, MyNamespace.MyAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=...."/> 
```

它仍然会首先检查当前的 exe，因为它们共享相同的程序集名称。我建议在不更改项目名称的情况下为您的配置项目使用不同的输出程序集名称。

![在此处输入图像描述](../Images/8d7a72cc1c2e0e1bce31200d2a969b72.png)

然后使用

```
<section name="myConfigSection" type="MyNamespace.MyConfig, MyNamespace.MyAssemblyConfig /> 
```

在 app.config 中。

# objective-c - UIWebView shouldStartLoadWithRequest — 获取锚文本

> ID：10538894
> 
> 赞同：3
> 
> 时间：2012-05-10T17:00:54.950
> 
> 标签：objective-c, uiwebview

我有一个 UIWebView 和一个 shouldStartLoadWithRequest 方法。在 web 视图中，可能有一个类似这样`<a href="http://whatever/whateverelse">This is the title</a>`的链接：当点击链接时，我需要取出`This is the title`。有没有办法从传递的 NSURLRequest 中得到这个？

# mysql - 薛定谔 MySQL 表：存在，但不存在

> ID：10538908
> 
> 赞同：125
> 
> 时间：2012-05-10T17:01:40.787
> 
> 标签：mysql

我遇到了最奇怪的错误。

有时，在创建或更改表时，我会收到“表已存在”错误。但是，DROP TABLE 返回“#1051 - 未知表”。所以我得到了一张我无法创建、无法删除的表格。

当我尝试删除数据库时，mysqld 崩溃。有时它有助于创建另一个具有不同名称的数据库，有时则没有。

我使用一个有大约 50 个表的数据库，都是 InnoDB。不同的表会出现此问题。

我在 Windows、Fedora 和 Ubuntu、MySQL 5.1 和 5.5 上遇到过这种情况。同样的行为，当使用 PDO、PHPMyAdmin 或命令行时。我使用 MySQL Workbench 来管理我的模式 - 我看到了一些相关的错误（结束线和东西），但是它们都与我无关。

不，它不是一个视图，它是一个表。所有名称都是小写的。

我尝试了所有我能用谷歌搜索的东西——刷新表，将 .frm 文件从 db 移动到 db，读取 mysql 日志，除了重新安装整个该死的东西之外没有任何帮助。

“显示表”没有显示任何内容，“描述”表说“表不存在”，没有 .frm 文件，但“创建表”仍然以错误结束（“如果不存在则创建表”也是如此）和删除数据库崩溃 mysql

相关但无益的问题：

*   [Mysql 1050 错误“表已存在”，实际上它不存在](https://stackoverflow.com/questions/3302476/mysql-1050-error-table-already-exists-when-in-fact-it-does-not)

*   [MySQL表不存在错误，但它确实存在](https://stackoverflow.com/questions/4260546/mysql-table-does-not-exist-error-but-it-does-exist)

编辑：

```
mysql> use askyou;
Database changed

mysql> show tables;
Empty set (0.00 sec)

mysql> create table users_has_friends (id int primary key);
ERROR 1050 (42S01): Table '`askyou`.`users_has_friends`' already exists

mysql> drop table users_has_friends;
ERROR 1051 (42S02): Unknown table 'users_has_friends' 
```

这样，都一样：表不存在，但不能创建；

```
mysql> drop database askyou;
ERROR 2013 (HY000): Lost connection to MySQL server during query 
```

名称更改，这不是我遇到问题的唯一表/数据库

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-16T16:28:20.440

当数据目录中缺少数据文件但表定义文件存在或反之亦然时，我已经看到了这个问题。如果您使用的是 innodb_file_per_table，请检查数据目录以确保您拥有`.frm`相关表的文件和 .ibd 文件。如果是 MISAM，应该有一个`.frm`,`.MYI`和一个`.MYD`文件。

该问题通常可以通过手动删除孤立文件来解决。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-28T01:13:45.703

在这里进行疯狂的猜测，但似乎 innodb 仍然在表空间中为您的表提供了一个条目，可能在`ibdata`. 如果您**确实**不需要**任何**数据，或者您有备份，请尝试以下操作：

1.  删除所有模式（不包括 mysql）
2.  关闭数据库
3.  确保数据目录中的所有文件夹都已正确删除（同样，不包括 mysql）
4.  删除 ibdata 和日志文件
5.  重新启动数据库。它应该从头开始重新创建表空间和日志。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-08T08:56:30.910

事实证明，修复很容易。至少我的工作对我有用。在另一个 MySQL 实例上创建一个表“zzz”，其中 zzz 是问题表名。（即，如果表被称为 schrodinger，则用它代替 zzz，无论写什么。） 表的定义是什么并不重要。这是一个临时假人；将 zzz.frm 文件复制到该表所在的服务器上的数据库目录，确保该文件的文件所有权和权限仍然正确。在 MySQL 上，您现在可以执行“显示表；”，并且表 zzz 将在那里。mysql> 删除表 zzz；...现在应该可以工作了。如有必要，清除目录中的所有 zzz.MYD 或 ZZZ.MYI 文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-04T16:36:59.003

我怀疑这是对这里问题案例的直接回答，但这是我在我的 OS X Lion 系统上解决**这个确切感知问题的方法。**

我经常为我安排的一些分析作业创建/删除表。在某些时候，我开始在我的脚本中途遇到表已经存在错误。服务器重新启动通常可以解决问题，但这对解决方案来说太烦人了。

然后我在本地错误日志文件中注意到这一行：

```
[Warning] Setting lower_case_table_names=2 because file system for /usr/local/mysql/data/ is case insensitive 
```

这给了我一个想法，如果我的表包含大写字母，MySQL 会被愚弄，以为它们仍然存在，即使我删除了它们。事实证明是这样的，并且切换到只使用小写字母作为表名使问题消失了。

在我的案例中，这可能是一些错误配置的结果，但希望这个错误案例能帮助人们减少浪费时间来寻找解决方案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-12T10:16:44.953

这是一个老问题，但我刚刚遇到了同样的问题，顶部链接的一个相关问题[的答案](https://stackoverflow.com/a/4251489/2987829)正是我所需要的，而且远没有删除文件、表、关闭服务器等那么激烈。

```
mysqladmin -uxxxxxx -pyyyyy flush-tables 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-26T14:13:25.737

如果库存中有此错误 1051，而您只想删除数据库并再次导入，请执行此步骤，一切都会好起来的....

在 Unix 环境中作为**根**：

*   **rm -rf /var/lib/mysql/YOUR_DATABASE;**
*   可选-> mysql_upgrade --force
*   **mysqlcheck -uUSER -pPASS YOUR_DATABASE**
*   **mysqladmin -uUSER -pPASS 删除 YOUR_DATABASE**
*   **mysqladmin -uUSER -pPASS 创建 YOUR_DATABASE**
*   **mysql -uUSER -pPASS YOUR_DATABASE < IMPORT_FILE**

问候，克里斯图斯

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-27T15:24:36.517

在我的情况下，问题是通过将 mysql 数据目录的所有权更改为运行应用程序的用户来解决的。（在我的例子中，它是一个运行 Jetty 网络服务器的 Java 应用程序。）

即使mysql正在运行并且其他应用程序可以正常使用它，这个应用程序也有问题。更改数据目录所有权并重置用户密码后，一切正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-29T08:16:26.023

我遇到了这个问题，希望删除 IBD 文件会有所帮助，但没有任何区别。MySQL 只重新创建了一个新的 IBD 文件。就我而言，在同一个 MySQL 实例中的其他数据库中实际上有类似的表。由于 FRM 文件丢失，我从另一个数据库中的类似表中复制了 FRM 文件，重新启动 MySQL 并且该表正常工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-29T15:51:07.970

我在一张特定的桌子上遇到了这个问题。阅读可能的解决方案，我做了一些步骤，例如：

*   搜索孤儿文件：不存在任何人；
*   execute: `show full tables in database;`: 没看到有问题的；
*   执行`describe table;`：：返回`table doesn't exist`；
*   执行`SELECT * FROM information_schema.TABLES WHERE TABLE_NAME='table';`：：返回`Empty set`；
*   通过 phpMyAdmin 手动搜索上面的查询：不存在；

而且，在这些步骤之后，我再次检查`show tables;`和... vualá！有问题的桌子不见了。我可以毫无问题地创建它并使用相同的有问题的名称删除它，而且我什至不必重新启动服务器！诡异的...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-19T01:55:57.790

我在创建表并将其删除后遇到此错误，然后想再次创建它。在我的例子中，我有一个独立的转储文件，所以我删除了我的架构，重新创建它并使用转储文件导入表和数据。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-16T14:29:21.380

它发生在我们的站点上（但很少发生），通常是在运行某些执行大量重建的脚本时发生“事件”。事件包括网络中断或电源问题。
在极少数情况下我会为此做些什么 - 我使用严厉的方法：

*   我需要简单地摆脱并重建特定的表。我通常认为这是可以的，因为正在构建表格。（如果您需要恢复数据，您的情况可能会有所不同）
*   作为管理员，进入 mysql 安装（在 Windows 上它可能是“...program files/mysql/MySQL Server xx/data/<schemaname>
*   在 <schemaname> 文件夹中找到具有表名的违规文件 - 并将其删除。
*   检查孤立的临时文件并删除它们。#...frm 文件，如果它们碰巧在那里。
*   MySQL 会让你再次创建表

很长一段时间（几年），我在几个不同的数据库上遇到过这个问题。这是一个障碍，因为相互矛盾的信息。我第一次按照其他答案中的描述对删除/重建/重命名数据库进行了修改，并设法让事情顺利进行，但这样做肯定需要更长的时间。对我来说幸运的是，正在重建的引用表总是发生 - DROP'd 和 CREATEd - 通常在早上。很少遇到问题，但后来意识到这是一个特殊的古怪案例。（我会重申：如果您需要恢复数据，请查看其他解决方案。）

*   它不是属于另一个用户或另一个数据库中的表
*   这不是大写/小写的问题，我全部使用小写，但这是一个有趣的问题！
*   看到“它肯定是 <there/not-there/some-other-user-table-case> 而你只是没有做对”的变化的反应更加令人沮丧 :)
*   该表格未显示在“显示表格”中
*   该表是（一直是/曾经是）INNODB 表。
*   尝试*DROP*该表给出了该表不存在的错误消息。
*   但试图*创建*表给出了表已经存在的错误消息。
*   使用 mysql 5.0 或 5.1
*   *REPAIR*对这个问题无效

# php - PHP SimpleHTMLDomParser + 查找孤独的字符串

> ID：10538911
> 
> 赞同：0
> 
> 时间：2012-05-10T17:02:05.253
> 
> 标签：php, html, html-parsing, simple-html-dom

我正在使用[SimpleHTMLDomParser](http://simplehtmldom.sourceforge.net/manual.htm)浏览 html 代码并找到各种东西。到目前为止一切正常，但有一个问题：

如何找到没有 ID、没有类和唯一父元素的字符串？

就我而言，我从从 div 中提取内容开始：

```
$descrs    = $html->find('.show_synopsis');

foreach($descrs as $descr) { 

    echo($descr->innertext);

} 
```

这看起来像：

```
<div class="show_synopsis">

    Lorem ipsum dolor sit amet, consetetur sadipscing elitr. <b>Source:</b> LORES.

</div> 
```

现在，是否可以`LORES`从上面的示例中查找和删除？

由于`LORES`是一个变量并且可以改变，我想知道是否可以简单地总是找到旁边的单词`<b>Source:</b>`？

我尝试了几种不同的方法，但到目前为止都没有奏效。我试图从[这篇文章](https://stackoverflow.com/questions/5465690/php-simple-html-dom-parser-find-string)中调整解决方案，但无法根据我的需要调整它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:41:36.773

试试这个：

```
echo preg_replace('/(.?)<b>.*Source:.*<\/b>.*\./', '$1', $descr->innertext); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:06:24.090

你不能只替换你正在回显的字符串中的 LORES 吗？

```
echo str_replace('LORES', '', $descr->innertext); 
```

# oracle - 您将如何以编程方式从 oracle 数据库中检索特定的错误代码？

> ID：10538916
> 
> 赞同：1
> 
> 时间：2012-05-10T17:02:21.133
> 
> 标签：oracle, plsql, oracle11g

场景：
我希望为 DUP_VAL_ON_INDEX 错误代码定义一个常量：

```
GCN_DUP_VAL_ON_INDEX        CONSTANT NUMBER := -1; 
```

但是，我想以编程方式设置值：

```
GCN_DUP_VAL_ON_INDEX        CONSTANT NUMBER := DUP_VAL_ON_INDEX.ERRCODE; 
```

有没有办法在不创建这样的自定义函数的情况下做到这一点？：

```
CREATE OR REPLACE FUNCTION GET_DUP_VAL_ERR_CODE
RETURN INTEGER
IS
BEGIN
   raise dup_val_on_index;
EXCEPTION
   WHEN OTHERS THEN
      RETURN SQLCODE;
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:15:59.087

可能不是。

查看`SYS.STANDARD`包 - 它是所有异常、SQL 函数和其他所有“预定义”的实际定义的地方。

非常简单：

```
DUP_VAL_ON_INDEX exception;
    pragma EXCEPTION_INIT(DUP_VAL_ON_INDEX, '-0001'); 
```

# tfs - 项目 $/MyTeamProject/Main 已存在

> ID：10538917
> 
> 赞同：1
> 
> 时间：2012-05-10T17:02:23.373
> 
> 标签：tfs

因此，我一直在忙于创建和删除（通过 TfsDeleteProject 读取销毁），为我很快必须在生产中做的事情做准备。

当我尝试重新创建具有相同名称的示例团队项目时，我没有问题，但是当我尝试重新创建相同的结构（即创建主文件夹）时，我在这篇文章的标题中收到错误：

```
"The item $/MyTeamProject/Main already exists." 
```

我曾尝试删除团队项目，清除本地 tfs 缓存并重新打开 VS，但每次尝试创建主文件夹时都会出现错误。

所以有些东西不会被删除。有任何想法吗？

编辑：我还想指出，我也删除了本地系统上的物理文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:55:17.763

不完全直观，因为我清除了本地 tfs 缓存（多次）但是......

在我最近重复上述步骤（精神错乱的定义）之后，我决定对团队项目进行获取最新信息。

然后我能够重新创建主文件夹。

# backbone.js - 在 Backbone 中过滤一个集合与多个集合？

> ID：10538918
> 
> 赞同：6
> 
> 时间：2012-05-10T17:02:28.647
> 
> 标签：backbone.js

什么时候过滤一个集合与在 Backbone 中拥有多个集合比较合适？

例如，考虑一个音乐库应用程序。它将有一个用于显示流派的视图和另一个用于显示所选流派的音乐的视图。

你宁愿用所有的音乐制作一个庞大的收藏然后过滤它还是几个较小的？

只有一个集合可以让您添加用于按其他属性过滤的功能，但假设您有大量音乐：如果用户只需要一种类型，您如何防止在应用程序启动时将其全部加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:48:18.767

我认为最简单的方法是拥有一个通用的唯一集合，该集合智能地`fetch`已经被来自服务器*的流派*数据过滤：

```
// code simplified and no tested
var SongsCollection = Backbone.Collection.extend({
  model: Song,
  url: function() {
    return '/songs/' + this.genre;
  },
  initialize: function( opts ){
    this.genre = opts.genre;
  }
});

var mySongsCollection = new SongsCollection({ genre: "rock" });
mySongsCollection.fetch(); 
```

每当用户更改所选类型时，您必须使此集合从服务器*重新获取数据：*

```
mySongsCollection.genre = "punk";
mySongsCollection.fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:09:32.547

这主要是一种设计选择，但我的投票是选择一种松散地反映存储集合的数据库的方案。

如果您可能将数据存储在 SQL 数据库中，那么您很可能没有单独的表`songs`和`genres`。您可能会通过`genre_id`歌曲表中的列连接它们，或者（如果歌曲可以有多个流派）根据单独的`song_genres`连接表来连接它们。因此，您可能需要单独的集合来代表流派和其中的歌曲。在这种情况下，**[骨干关系](https://github.com/PaulUithol/Backbone-relational)**可能是非常有用的工具，可以帮助它们保持直截了当。

如果您将信息存储在任何类型的关系/键值/文档存储中，则直接将流派与歌曲一起存储并进行相应过滤可能是有意义的。在这种情况下，您最终可能会以这样一种方式存储您的文档键/查询，以便您可以直接（例如，通过`songs`）或通过流派（例如，`genre:genre_id/songs`）访问歌曲。如果这是您要走的路，那么简单地创建一个庞大的歌曲集合并计划在应用程序和数据库环境中设置相应的过滤器可能会更方便。

# http-headers - 我如何识别当有人从 Google+ 链接到我的网站时创建的网络请求？

> ID：10538919
> 
> 赞同：2
> 
> 时间：2012-05-10T17:02:38.523
> 
> 标签：http-headers, user-agent, google-plus

为遵守有关 cookie 的新欧盟法规，我们必须在我们网站的多个位置实施 cookie“警告”横幅。当用户尝试在 Facebook、Google+、bit.ly 等网站上链接/嵌入我们网站的内容时，我们现在看到了问题 - 嵌入的页面缩略图显示的是 cookie 通知横幅，而不是实际页面的预览。

这些网站中的大多数使用独特的用户代理字符串，因此我们可以轻松识别他们的传入请求并禁用 cookie 横幅 - 但 Google+ 似乎将自己标识为

```
Mozilla/5.0 (Windows NT 6.1; rv:6.0) Gecko/20110814 Firefox/6.0 
```

这使得区分 Google+ 自动请求和来自“真实”用户的浏览流量变得非常困难。有什么办法可以识别这些请求吗？我可以寻找的自定义 HTTP 标头还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T06:11:20.403

G+ 已经有了它的用户代理。它包含文本：Google (+ [https://developers.google.com/+/web/snippet/](https://developers.google.com/+/web/snippet/) )。

参考：[https ://developers.google.com/+/web/snippet/#faq-snippet-useragent](https://developers.google.com/+/web/snippet/#faq-snippet-useragent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:15:19.657

没有任何 HTTP 标头可用于检测 +1 按钮页面提取器，但有一个[功能请求要求](http://code.google.com/p/google-plus-platform/issues/detail?id=178)它指定独特的用户代理。与此同时，我不会依赖它。

但是，您可以使用其他方式来配置显示在 Google+ 上的内容片段。如果您向页面添加结构化标记（例如 schema.org 或 OpenGraph），+1 按钮将从这些标记中提取代码段。Google+ 提供了一个[配置工具和文档](https://developers.google.com/+/plugins/snippet/)来帮助您设计您的标记。

如果您添加 schema.org 标记，它可能看起来像这样：

```
<body itemscope itemtype="http://schema.org/Product">
  <h1 itemprop="name">Shiny Trinket</h1>
  <img itemprop="image" src="http://example.com/trinket.jpg" />
  <p itemprop="description">Shiny trinkets are shiny.</p>
</body> 
```

# ruby - 迭代一个数组：知道你什么时候在最后一个元素上？

> ID：10538921
> 
> 赞同：0
> 
> 时间：2012-05-10T17:02:43.950
> 
> 标签：ruby

我需要迭代一个数组并且需要知道我什么时候在数组的最后一个元素上。

现在我已经这样做了：

```
my_object.my_array.each_with_index do |obj, i|
  i == my_object.my_array.size - 1 ? do_this : do_that
end 
```

有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:45:01.077

```
my_object.my_array[0...-1].each { |obj| do_this(obj) }
do_that(my_object.my_array.last) 
```

# c# - C# 风格：Lambda、_ => 或 x =>？

> ID：10538924
> 
> 赞同：28
> 
> 时间：2012-05-10T17:02:53.227
> 
> 标签：c#, coding-style, lambda

在 C# 中使用它们之前，我已经在其他语言中使用过 lambda 表达式，因此我养成了使用`_`简单 lambda 形式的习惯，`Func<T, TResult>,`特别是对于简单的 lambda，其中主体只是表示返回值的表达式（谓词等） ..)。但是，在 C# 中，我经常看到使用单个字母来代替`_`这些相同类型的 lambda 表达式，例如`x,y,z,i,j,k`. 字母方法对我来说似乎很奇怪，因为这些字母在常见用法中已经具有另一个典型含义，即 for 循环变量。`_`在我看来，通常更容易阅读。单字母样式真的是 C# 中 lambda 的既定样式吗？

例子：

我习惯写的：

```
var ages = people.Select(_ => _.Age); 
```

我看到的是写的：

```
var ages = people.Select(x => x.Age); // choice of 'x' is not consistent 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-10T17:04:41.157

许多 C# 开发人员在使用参数*时*`_`使用字母或其他短名称来指示不会使用该参数。

 *其他资源：

*   [`_`关于使用而不是的有趣讨论`()`](http://charlieflowers.wordpress.com/2009/04/02/nice-c-idiom-for-parameterless-lambdas/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-10T17:08:28.160

这是一个变量名，所以我认为名称应该传达它需要传达的信息。`_`传达什么信息？

为此，`x`传达了什么信息？

我可能会这样写你的例子：

```
var ages = people.Select(p => p.Age); 
```

这个想法是，我觉得`p`至少在整个声明的上下文中*暗示*`people`它是一个记录。你可以更进一步：

```
var ages = people.Select(person => person.Age); 
```

现在*，这*向读者传达了该变量实际上是什么。当然，对于这么小的声明，可以说它是矫枉过正的。我不这么认为，但这是一个偏好问题。（不仅是您的偏好，还有任何必须支持此代码的人的偏好。）

对于更大的、多行的、复杂的 lambda 表达式，名称变得更加重要。离变量含义的上下文越远，变量的名称就越需要携带该上下文。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-10T17:20:21.993

lambda 函数与任何其他方法有何不同。如果有人要使用以下方法发布代码：

```
public static int getAge(Person _)
{
  return _.Age;
} 
```

或者

```
public static int getAge(Person x)
{
  return x.Age;
} 
```

你打算说什么？

在我看来，为 lambda 选择参数的名称应该与任何其他方法的参数一样有意义。我可能会偶尔为标识函数设置例外，`x => x`因为在这种情况下，变量不需要表示任何含义，它实际上可以是任何东西，但是在我脑海中对所有内容使用下划线或单个字母只会使代码的可读性大大降低. （很多人吹捧 LINQ/Lambdas 的优点是可读性，如果你混淆所有变量，它就会被打败。）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-10T17:06:29.077

或者您可以使用有意义的名称，例如

```
var ages = people.Select(person => person.Age); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T07:35:14.957

在 C# 中，`_`用于类（属性）变量，`_`不用于局部变量。因此，最好为局部变量和类变量使用有意义的名称。

前任：

```
var personList = (from person in people  where person.Age > 18  select person).ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T17:05:10.223

命名 lambda 变量没有“既定”风格。但是，下划线通常表示某种实例成员变量，这意味着与普通变量名称相比，您的样式可能与其他命名标准冲突。

**长话短说**- 做对你有用的事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T17:12:47.830

你可以给它一个名字是有原因的——因为有时你可以有多个输入并且需要区分它们：

```
Func<int,int,int> product = (num1, num2) => (num1 * num2);  // takes in two ints, and returns one int
int x = product(2, 3); 
```*

# css - 较少的设置不起作用

> ID：10538928
> 
> 赞同：1
> 
> 时间：2012-05-10T17:03:12.580
> 
> 标签：css, less

我尝试安装较少，但它不工作。

Firebug 报告此错误：

```
Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) 
```

我的代码：

```
<link type="text/css" href="http://static.mydomain.com/css/colors.less" rel="stylesheet/less" />
<script type="text/javascript" src="http://static.mydomain.com/js/less-1.2.2.min.js" ></script> 
```

.less 文件的标题：

```
Accept-Ranges   bytes
Connection  Keep-Alive
Content-Length  889
Content-Type    text/css
Date    Thu, 10 May 2012 16:56:51 GMT
Etag    "5cbb93-379-4bedaed496200"
Keep-Alive  timeout=5, max=100
Last-Modified   Mon, 30 Apr 2012 00:56:40 GMT
Server  Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6 
```

及其内容：

```
#overflow {
  .a { color: #111111 - #444444; } // #000000
  .b { color: #eee + #fff; } // #ffffff
  .c { color: #aaa * 3; } // #ffffff
  .d { color: #00ee00 + #009900; } // #00ff00
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:19:31.230

好的，我找到了。刚刚将它放入您的 httpd.conf apache 文件中：

```
Header set Access-Control-Allow-Origin "*" 
```

# php - php编码问题htmlentities

> ID：10538929
> 
> 赞同：1
> 
> 时间：2012-05-10T17:03:23.363
> 
> 标签：php, encoding

我有用户输入并使用 htmlentities() 来转换所有实体。但是，似乎有一些错误。当我输入

```
ääää öööö üüüü ääää 
```

我明白了

```
&Atilde;&curren;&Atilde;&curren;&Atilde;&curren;&Atilde;&curren; &Atilde;&para;&Atilde;&para;&Atilde;&para;&Atilde;&para; &Atilde;&frac14;&Atilde;&frac14;&Atilde;&frac14;&Atilde;&frac14; &Atilde;&curren;&Atilde;&curren;&Atilde;&curren;&Atilde;&curren; 
```

看起来像这样

Ã¤Ã¤Ã¤Ã¤ Ã¶Ã¶Ã¶Ã¶ Ã¼Ã¼Ã¼Ã¼ Ã¤Ã¤Ã¤Ã¤

我究竟做错了什么？代码真的只有这样：

```
$post=htmlentities($post); 
```

编辑 1

这是我用于格式化目的的更多代码（其中有一些有用的功能）：

```
 //Secure with htmlentities (mysql_real_escape_string() comes later)
    $post=htmlentities($post);

    //Strip obsolete white spaces
    $post = preg_replace("/ +/", " ", $post);

    //Detect links
    $pattern_url='~(?>[a-z+]{2,}://|www\.)(?:[a-z0-9]+(?:\.[a-z0-9]+)?@)?(?:(?:[a-z](?:[a-z0-9]|(?<!-)-)*[a-z0-9])(?:\.[a-z](?:[a-z0-9]|(?<!-)-)*[a-z0-9])+|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?:/[^\\/:?*"<>|\n]*[a-z0-9])*/?(?:\?[a-z0-9_.%]+(?:=[a-z0-9_.%:/+-]*)?(?:&[a-z0-9_.%]+(?:=[a-z0-9_.%:/+-]*)?)*)?(?:#[a-z0-9_%.]+)?~i';
    preg_match_all($pattern_url, $post, $matches); 
    for ($i=0; $i < count($matches[0]); $i++)
    {
        if(substr($matches[0][$i],0,4)=='www.')
        $post = str_replace($matches[0][$i],'http://'.$matches[0][$i],$post);
    }
    $post = preg_replace($pattern_url,'<a target="_blank" href="\\0">\\0</a>',$post);

    //Keep line breaks (more than one will be stripped above)
    $post=nl2br($post);

    //Remove more than one linebreak
    $post=preg_replace("/(<br\s*\/?>\s*)+/", "<br/>", $post);

    //Secure with mysql_real_escape_string()
    $post=mysql_real_escape_string($post); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:23:47.920

您必须手动指定编码 ( `UTF-8`) [`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)：

```
echo htmlentities("ääää öööö üüüü ääää", null, "UTF-8"); 
```

输出：

```
ääää öööö üüüü ääää 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:34:55.480

重要的是 htmlentities 的第三个参数与使用帖子的字符集匹配。我想，你没有提交 utf8，因为它是 htmlentities 中的默认值

在 PHP 中

```
 $post = htmlentities ( $post, ENT_COMPAT, 'ISO-8859-1')  // or whatever 
```

通知

```
 <form action="your.php" accept-charset="ISO-8859-1"> 
```

无论如何，实际上我建议您使用 utf8

# c# - 无论如何要加快这个功能？

> ID：10538931
> 
> 赞同：3
> 
> 时间：2012-05-10T17:03:27.727
> 
> 标签：c#, xna

我在 XNA 中有一个体素（我的世界风格）引擎，世界被分成块，当一个立方体被修改时，我通过扫描所有立方体并检查面是否可见来重新创建顶点缓冲区。这通常以很好的速度工作，但是当立方体以某种方式排列时（这样顶点缓冲区会大得多），它可以接管一个帧来生成新的块。在最糟糕的配置中（显示最多可能的顶点），它可能需要长达 100 毫秒。以下部分代码代表 100 次中的大约 80-90 毫秒，当块更新时它运行了 131,072 次，在最坏的可能配置下它创建了 32,768 个立方体，而在所有其他运行中它创建了 0 个顶点。

我也在使用 i5 2500k，所以这在旧系统上可能真的很糟糕。

无论如何我都想不出提高速度，而且我对编程很陌生，所以我想我会在这里发布一些建议？谢谢。

```
public void GenerateCubeGeometryAtPosition(int x, int y, int z, byte id)
{
    //We check if there's a cube in the six directions around the cube
    //if there's no cube ot the cube is transparent we add the vertices to the vertex list
    //if the cube is on the outside of the chunk we check the cube in the chunk next to it assuming it's loaded

    //if we have to build part of the cube we make a new vertex
    //first 3 bytes in the vertex are the position relative to the chunk
    //4th byte is for normals, we check it in the shader to figure out the normal
    //the next 2 bytes in the properties are for the texture positons on the texture atlas
    //last 2 bytes are for other properties of the vertex like light/shade etc

    //Check up and down
    if (y > YSize - 2)
    {
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, 1 + z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[3]));
    }
    else if (Blocks[x, y + 1, z] == 0 || GlobalWorld.Blocks[Blocks[x, y + 1, z]].Transparent)
    {
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, 1 + z, 0f), GlobalWorld.Blocks[id].VertexPropertiesTop[3]));

    }
    if (y != 0 && (Blocks[x, y - 1, z] == 0 || GlobalWorld.Blocks[Blocks[x, y - 1, z]].Transparent))
    {
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, z, 1f), GlobalWorld.Blocks[id].VertexPropertiesBottom[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, 1 + z, 1f), GlobalWorld.Blocks[id].VertexPropertiesBottom[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, z, 1f), GlobalWorld.Blocks[id].VertexPropertiesBottom[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, 1 + z, 1f), GlobalWorld.Blocks[id].VertexPropertiesBottom[3]));
    }

    //check Right and Left of the cube and the adjacent chunk at the edges
    if (x == 0)
    {
        if (this.RightChunk != -1 && (GlobalWorld.LoadedChunks[this.RightChunk].Blocks[XSize - 1, y, z] == 0 || GlobalWorld.Blocks[GlobalWorld.LoadedChunks[this.RightChunk].Blocks[XSize - 1, y, z]].Transparent))
        {
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[0]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[1]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, 1 + z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[2]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[3]));
        }
    }
    else if (Blocks[x - 1, y, z] == 0 || GlobalWorld.Blocks[Blocks[x - 1, y, z]].Transparent)
    {
        //right
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, 1 + z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 3f), GlobalWorld.Blocks[id].VertexPropertiesRight[3]));
    }
    if (x > XSize - 2)
    {
        if (this.LeftChunk != -1 && (GlobalWorld.LoadedChunks[this.LeftChunk].Blocks[0, y, z] == 0 || GlobalWorld.Blocks[GlobalWorld.LoadedChunks[this.LeftChunk].Blocks[0, y, z]].Transparent))
        {
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[0]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, 1 + z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[1]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, 1 + y, z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[2]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, 1 + y, 1 + z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[3]));
        }
    }
    else if (Blocks[x + 1, y, z] == 0 || GlobalWorld.Blocks[Blocks[x + 1, y, z]].Transparent)
    {
        //left
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, 1 + z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, 1 + y, z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, 1 + y, 1 + z, 2f), GlobalWorld.Blocks[id].VertexPropertiesLeft[3]));
    }

    //check Back and Front of the cube and the adjacent chunk at the edges
    if (z == 0)
    {
        if (this.BackChunk != -1 && (GlobalWorld.LoadedChunks[this.BackChunk].Blocks[x, y, ZSize - 1] == 0 || GlobalWorld.Blocks[GlobalWorld.LoadedChunks[this.BackChunk].Blocks[x, y, ZSize - 1]].Transparent))
        {
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[0]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[1]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[2]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[3]));
        }
    }
    else if (Blocks[x, y, z - 1] == 0 || GlobalWorld.Blocks[Blocks[x, y, z - 1]].Transparent)
    {
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, z, 5f), GlobalWorld.Blocks[id].VertexPropertiesBack[3]));
    }
    if (z > ZSize - 2)
    {
        if (this.ForwardChunk != -1 && (GlobalWorld.LoadedChunks[this.ForwardChunk].Blocks[x, y, 0] == 0 || GlobalWorld.Blocks[GlobalWorld.LoadedChunks[this.ForwardChunk].Blocks[x, y, 0]].Transparent))
        {
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[0]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[1]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[2]));
            ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[3]));
        }
    }
    else if (Blocks[x, y, z + 1] == 0 || GlobalWorld.Blocks[Blocks[x, y, z + 1]].Transparent)
    {
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[0]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(x, y + 1, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[1]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[2]));
        ChunkVertices.Add(new VertexPositionNormalSmall(new Byte4(1 + x, y + 1, 1 + z, 4f), GlobalWorld.Blocks[id].VertexPropertiesFront[3]));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:55:21.417

我看不出这段代码有任何明显的缓慢原因。如果小的代码更改似乎没有给你必要的加速，我会尝试不同的实现。

如果我理解正确，当一个块发生变化时，您可以为整个 64x64x32 (= 131072) 块重建顶点缓冲区。假设一个块中的块一次只更改几个，在预定位置拥有一个包含所有立方体所有边的持久顶点缓冲区可能会快得多。当一个立方体面的状态发生变化时，您只需要改变顶点缓冲区中的四个值，而不是从头开始创建整个顶点缓冲区。

例如，您可以在 (5, 6, 7) 处拥有从`GetCubeFaceStartIndex(5, 6, 7, CubeFaceType.Top)`.

```
enum CubeFaceType { Top, Bottom, Left, Right, Front, Back }

int GetCubeFaceStartIndex(int x, int y, int z, CubeFaceType face)
{
    return 4 * ((int)cubeFace + 6 * (x + CHUNK_WIDTH * (y + CHUNK_HEIGHT * z));
} 
```

要删除一个面（当块被删除时），您可以将四个顶点设置为相同的值，例如`new VertexPositionNormalSmall(Vector4.Zero, DummyProperties)`. 请注意，顶点共享相同位置的三角形在屏幕上不可见。

如果您需要添加面或更改其属性，您将执行您之前所做的，仅直接在由立方体和面的位置确定的索引处。

这种实现当然需要更大的顶点缓冲区。如果您的块大小为 64x64x32 立方体，则顶点缓冲区的长度需要为 64*64*64*6*4 = 3145728 个顶点，这可能不切实际。可能需要减小块的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:39:57.980

1.  在“典型”配置中，隐藏顶点//显示顶点比率是多少？因为，由于图形卡无论如何都不会显示隐藏的顶点，因此删除边缘可能比将它们扔到图形卡上要花费更多时间。

2.  在同样的想法中，也许只在立方体级别处理可能会很有趣：如果一个立方体完全在其他立方体内，则不要添加顶点，如果不添加所有立方体顶点而不进行检查。这取决于隐藏/显示的顶点比率。

3.  我猜你注意到如果一个立方体被深深地隐藏了，我的意思是：只被隐藏的立方体包围，它会被你的算法显示出来。但要利用这一点，我只看到一个复杂的算法，比如 3D 绘画......嗯......

4.  如果您知道发生的每个更改（只有一个块打开或关闭），您可能会通过仅更新顶点列表的一部分而不是每次都构建来大大加快速度。如果 One block 为 ON，请注意不需要重新构建所有块：只需添加新立方体的顶点，显示就可以了。但是顶点列表将包含您可能希望在某个时间清除的未显示顶点... :-) 如果一个块关闭，它将显示周围立方体的一些顶点，但仅在隐藏块周围的有限区域内. 所以有点像 vvnurmi 建议的那样，有一个 (Cube side) --> (Vertex start and end index) 字典会很方便。因此，您可以擦除给定的立方体。

# php - 删除键“”警告的重复条目“”

> ID：10538932
> 
> 赞同：1
> 
> 时间：2012-05-10T17:03:33.640
> 
> 标签：php, mysql

我为 mysql 数据库行设置了唯一键，因此不会在表单提交中插入重复条目。这很好用，但如果有重复的条目，则页面不会加载。相反，用户会收到警告：`Duplicate entry ''' for key ''`

即使有重复的键，我该如何关闭该错误并加载页面，同时仍然使用行上的唯一键？我尝试将错误报告设置为关闭，但这不起作用。

```
mysql_query("INSERT INTO user
(formemail,UserIP,Timestamp,LP) VALUES('$email','$userip',NOW(),'$lp') ") 
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:07:08.147

您需要更改 SQL 插入以使用[INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)，以便一开始就不会生成错误。

不要试图隐藏症状，治疗问题。

另外，我必须指出[mysql 库已被弃用](http://us.php.net/manual/en/intro.mysql.php)，不应用于新代码，您至少应该使用[mysqli](http://www.php.net/mysqli)或最好使用[PDO](http://www.php.net/pdo)。如果您有兴趣学习，这里有一个很好[的 PDO 教程。](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# macos - 将钥匙串添加到搜索列表？

> ID：10538942
> 
> 赞同：12
> 
> 时间：2012-05-10T17:04:25.823
> 
> 标签：macos, keychain

我需要将一个 .keychain 文件添加到我的钥匙串搜索列表中以获取一些自动构建工具。目前我正在使用`security list-keychains`命令：

```
list-keychains [-h] [-d user|system|common|dynamic] [-s [keychain...]]
        Display or manipulate the keychain search list. 
```

此命令让您设置整个钥匙串搜索列表，但它不提供简单添加另一个钥匙串的方法。所以添加钥匙串变成了一个两步的过程。

1.  运行 list-keychains 并解析输出
2.  然后做类似的事情`list-keychains -s ${existing_chains} ${new_keychain}`

虽然这可行，但它似乎过于复杂并引入了竞争条件。

此外，它似乎`open my.keychain`会将其添加到搜索列表中，但我倾向于避免`open`在脚本或无头环境中使用命令。

是否有更简单或更好的方法将钥匙串添加到搜索列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-04-04T00:29:36.407

上述@mles 解决方案的单行版本：

`security list-keychains -d user -s $(security list-keychains -d user | sed -e s/\"//g) <new keychain>`

在输出中直接管道的问题`security list-keychains -d user`是它用引号包围结果。解决方案用于`sed`剥离它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-23T15:07:43.240

现在是 2017 年，在 macOS 10.12.4 上`security create-keychain`仍然没有将新的钥匙串添加到搜索列表中。这是我逐步添加和销毁临时钥匙串的脚本：

```
#!/bin/bash -e

uuid="$(uuidgen)"

echo "New Keychain name: $uuid"

keychains=$(security list-keychains -d user)

keychainNames=();

for keychain in $keychains
do
  basename=$(basename "$keychain")
  keychainName=${basename::${#basename}-4}
  keychainNames+=("$keychainName")
done

echo "User keychains on this machine: ${keychainNames[@]}";

read -p "Enter to create keychain"
security -v create-keychain -p test123 $uuid

read -p "Enter to add keychain to searchlist"
security -v list-keychains -s "${keychainNames[@]}" $uuid

read -p "Enter to unlock keychain"
security -v unlock-keychain -p test123 $uuid

read -p "Enter to import certificate"
security -v import build-assets/certficate.p12 -k $uuid -P certificate_password

read -p "Enter to delete keychain"
security -v delete-keychain $uuid 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T18:04:30.653

您正在使用哪些自动化工具？我在 Tomcat 下使用 Jenkins 为 iPhone 构建时遇到了类似的问题。我尝试在 shell 脚本中添加钥匙串，但事实证明它充其量是非常脆弱的。

最后，我通过将构建过程切换为通过 LaunchAgents 而不是 LaunchDemons 来解决这个问题。这样，构建工具在用户上下文中运行，事情变得更加可靠。

这对你来说有可能吗？如果是这样，我可以提供更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T14:27:12.517

我知道没有更好的方法 - 但似乎可能`create-keychain`会做你想做的事：

`security create-keychain -h`

返回：

```
Usage: create-keychain [-P] [-p password] [keychains...]
    -p  Use "password" as the password for the keychains being created
    -P  Prompt the user for a password using the SecurityAgent
Use of the -p option is insecure
        Create keychains and add them to the search list. 
```

# ejb - 带有@EJB 的@Stateless bean 保证是唯一的ejb 实例？

> ID：10538945
> 
> 赞同：2
> 
> 时间：2012-05-10T17:04:39.833
> 
> 标签：ejb, unique, ejb-3.1, stateless

我想知道...假设我在 ejb 3.1 中有两个无状态 bean：

1.  @无状态类1

    @EJB MyUniqueInstanceBean uniqueBean1;

2.

```
@Stateless
Class2

@EJB MyUniqueInstanceBean uniqueBean2; 
```

uniqueBean1 和 uniqueBean2 是否保证是 MyUniqueInstanceBean 的唯一实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:59:43.320

如果 MyUniqueInstanceBean 是*无状态*的，则对 uniquebean1 的调用不在您手中，而 uniquebean2 实际上对同一实例的调用。在 EJB 3.1 规范中，这是用下面的话来说明的：

> 因为无状态会话 bean 的所有实例都是等效的，所以容器可以选择将客户端调用的方法委托给任何可用的实例。这意味着，例如，容器可以将来自同一事务中的同一客户端的请求委托给不同的实例，并且容器可以将来自多个事务的请求交错到同一实例。

如果 MyUniqueInstanceBean 是*Stateful*，则保证 uniquebean1 和 uniquebean2 不引用同一个实例。再次来自规范：

> 当客户端通过依赖注入或 JNDI 查找获得对有状态会话 bean 实例的引用时，或者当客户端在会话 bean 的主接口上调用 create 方法时，会话 bean 实例的生命就开始了。这会导致容器在会话 bean 类上调用 newInstance 以创建新的会话 bean 实例。

如果您使用的是*Singleton*，那么两者都引用同一个实例，因为只有一个实例：

> 单例会话 bean 是每个应用程序实例化一次的会话 bean 组件。在容器分布在许多虚拟机上的情况下，每个应用程序将为每个 JVM 提供一个 Singleton 的 bean 实例。

# android - android应用程序中的标题栏仍然出现

> ID：10538956
> 
> 赞同：1
> 
> 时间：2012-05-10T17:05:28.127
> 
> 标签：android, android-layout, eclipse-adt

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="sditm.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:label="@string/app_name"
        android:name=".SditmActivity" 
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="page1"></activity>
    <activity android:name="aboutActivity"></activity>
    <activity android:name="admissionActivity"></activity>
    <activity android:name="extraActivity"></activity>
    <activity android:name="mapsActivity"></activity>        
    <activity android:name="facultyloginActivity"></activity>
    <activity android:name="retriveActivity"></activity>
</application> 
```

这就是我在这里输入的 androidmanifest.xml 代码，`android:theme="@android:style/Theme.NoTitleBar"` 但是当我运行应用程序时，它仍然显示出来。

谁能告诉我如何摆脱它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:22:25.067

如果您想从带有应用程序标签的应用程序中的所有活动中删除标题栏，您传递的主题属性`android:theme="@android:style/Theme.NoTitleBar"`将仅从活动中删除标题栏`SditmActivity``android:theme="@android:style/Theme.NoTitleBar"`

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T09:51:04.287

另一种选择是更改 Theme.base 样式。打开 res/values/styles.xml 并复制：

```
<style name="Theme.Base" parent="android:Theme">
    <item name="windowActionBar">false</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFullscreen">true</item>
</style> 
```

然后放

```
 android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Base" 
```

在 androidmanifest.xml 中应用 minSdkVersion < 11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T22:03:59.780

我花了一段时间才意识到带有 的各个`activity`标签`AndroidManifest`都有自己的主题需要替换或删除，上面的实际答案让我意识到，b/c 我已经在做其他所有事情了。

# vb6 - 在 VB6 中实现队列

> ID：10538957
> 
> 赞同：0
> 
> 时间：2012-05-10T17:05:45.653
> 
> 标签：vb6, queue

```
Dim n, front, rear As Integer
Dim x As Integer
Dim arr() As Integer

Public Function init()
  n = InputBox("Enter size :")
  ReDim arr(n) As Integer
  front = 0
  rear = -1
End Function

Public Function insert(x As Integer)
  If rear = n-1 Then
    MsgBox "queue FULL !!!", vbOKOnly, "QUEUE"
  Else
    rear = rear + 1
    arr(rear) = x
    MsgBox x, vbOKOnly, "INSERTED"
  End If
End Function

Public Function delete() As Integer
  If rear + 1 = front Then
    MsgBox "queue Empty !!!", vbOKOnly, "QUEUE"
  Else
    x = arr(front)
    front = front + 1
    Return x
  End If
End Function

Private Sub inser_Click()
  If rear < n Then
    x = InputBox("Enter element :")
    Call insert(x)
  Else
    MsgBox "queue FULL !!!", vbOKOnly, "QUEUE"
  End If
End Sub

Private Sub del_Click()
  x = delete()
  MsgBox x, vbOKOnly, "DELETED"
End Sub

Private Sub Exit_Click()
  End
End Sub

Private Sub Form_Load()
  Call init
End Sub 
```

这是我在 VB6 中的代码。我在显示“预期编译器错误：语句结束”`insert`的行中出现函数错误`Return x`

另一个错误是，每当我尝试删除队列的元素时，它都会显示“0 DELETED”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:18:33.447

您正在尝试使用 Return 语句从函数返回值，这在 VB6 中无效。在 VB6 中，您通过将返回值分配给函数的名称来返回函数的值。

因此，对于您的`delete`功能，您可以这样写：

```
Public Function delete() As Integer
    If rear + 1 = front Then
        MsgBox "queue Empty !!!", vbOKOnly, "QUEUE"
    Else
        x = arr(front)
        front = front + 1
        delete = x    ' <-- returning x here.
    End If
End Function 
```

看看你的其他函数，它们根本没有明确返回值。

看看[这个](http://www.vb6.us/tutorials/understanding-subroutines-and-functions-vb)可能会有所帮助，它概述了 Subs 和 Functions 在 VB6 中的工作方式。

# css - 图像大小调整 HTML5

> ID：10538958
> 
> 赞同：1
> 
> 时间：2012-05-10T17:05:55.947
> 
> 标签：css, html

所以我有一些图像，我想在我的 HTML5 代码中占据全屏。我将它们的高度和宽度设置为 100%，我认为应该调整大小。

如果我将图像放置在 3240x480 中，它们非常适合我的手机，但在 iPad 上，拉伸高度似乎适合但宽度似乎保持在 320。

如果我放置在 768x1004 的图像中，它们非常适合 iPad，但在手机上它们会显示得很大。我以为 100% 会重新缩放，但我想我错了。

所以我尝试将 768x1004 的图像设置为 width="window.innerWidth"。这在手机上很好地缩小了它，除了它仍然延伸到屏幕的边界之外。至于 iPad，它会将宽度缩小一些，因此现在图像和屏幕墙之间存在间隙。

任何想法如何获得干净简单的自动调整大小以适应屏幕，最好仅使用 1 张图像。或者我将如何设置它以便有多个图像，如果它使用的是 iPad，它会放入 iPad 尺寸的图像，否则如果使用的是手机，它会放入手机尺寸的图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:02:49.060

我很确定，如果不真正破坏图片的质量，您就不能调整图像大小。但我知道您可以使用脚本将您的用户重定向到适合他们屏幕的站点。请参阅此站点[http://www.dynamicdrive.com/dynamicindex9/info3.htm](http://www.dynamicdrive.com/dynamicindex9/info3.htm)或谷歌“屏幕重定向”，您的眼前出现了几个替代方案！:))

# windows - 多次粘贴

> ID：10538963
> 
> 赞同：0
> 
> 时间：2012-05-10T17:06:25.150
> 
> 标签：windows, batch-file, cmd

有没有办法将某些内容复制到剪贴板然后将其复制 X 次？我需要粘贴一些我复制了 295 次的文本。我找到了一个批处理文件，它复制了一个文件 X 次，但我需要从剪贴板中粘贴一些原始文本 295 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:50:57.390

有许多命令行实用程序允许您从剪贴板粘贴文本，技术上将剪贴板文本内容写入`stdout`. 您可以在 Raymond Chen 博客***新旧事物*** [http://blogs.msdn.com/oldnewthing/archive/2009/11/10/9919908.aspx中找到这样的实用程序](http://blogs.msdn.com/oldnewthing/archive/2009/11/10/9919908.aspx)

我使用自己的`CLIPTEXT`程序。这是一个非常简单的 5 行 pascal，这里是源代码。我相信您可以得到这个想法并将其翻译成任何其他语言。

```
program cliptext;
uses clipbrd;
begin
  writeln(clipboard.asText);  
end. 
```

然后，在您的批处理文件中，您可以以这种方式使用文本。

```
for /f "tokens=*" %%c in ('cliptext') do set text="%%c"
for /L %%a in (1,1,295) do echo dosomething !text! 
```

# java - 关于序列化数组列表对象

> ID：10538969
> 
> 赞同：-1
> 
> 时间：2012-05-10T17:06:44.777
> 
> 标签：java

我有一个要序列化的数组列表，请告知我将如何做到这一点..

```
 ArrayList list=new ArrayList();
      list.add("Ram");
      list.add("Sachin");
      list.add("Dinesh");
      list.add(1,"Ravi");
      list.add("Dinesh");
      list.add("Anupam");
      System.out.println("There are "+list.size()+" elements in the list.");
      System.out.println("Content of list are : ");
      Iterator itr=list.iterator();
      while(itr.hasNext())
      System.out.println(itr.next());
     } 
```

}

我想使用序列化机制，以便可以将其保存在文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:12:20.187

这很简单。`ArrayList`和`String`（存储在列表中）都实现了接口`Serializable`，因此您可以使用标准的 java 机制进行序列化：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("myfile"));
oos.writeObject(list);
............
oos.fluch();
oos.close(); 
```

在此示例中，我使用 ObjectOutputStream 包装了 FileOutputStream，但显然您可以使用任何其他有效负载流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:18:52.773

您必须创建自己的方法来序列化和反序列化对象。以下是执行此操作的有用方法。

```
public static Object deserializeBytes(byte[] bytes) throws IOException, ClassNotFoundException
{
    ByteArrayInputStream bytesIn = new ByteArrayInputStream(bytes);
    ObjectInputStream ois = new ObjectInputStream(bytesIn);
    Object obj = ois.readObject();
    ois.close();
    return obj;
}

public static byte[] serializeObject(Object obj) throws IOException
{
    ByteArrayOutputStream bytesOut = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bytesOut);
    oos.writeObject(obj);
    oos.flush();
    byte[] bytes = bytesOut.toByteArray();
    bytesOut.close();
    oos.close();
    return bytes;
} 
```

# javascript - JCrop 调整图像大小不裁剪 - Javascript

> ID：10538970
> 
> 赞同：2
> 
> 时间：2012-05-10T17:06:47.520
> 
> 标签：javascript, jquery, web, jcrop

我正在尝试使用 JCrop 裁剪图像。然而结果是令人沮丧的错误，我不知道为什么。我有一个图片上传器，当有人在图片中选择时，javascript 会更改页面上已有图片的来源以匹配新上传的图片。然后我有这个代码：

```
$('#myForm').ajaxForm({
    dataType: 'json',
    success: function (result) {
        $("#image-editor-preview img")
            .attr("src", "/Profiles/AvatarWorker/" + _id + "?random=" + Math.random())
                        .Jcrop({
                            aspectRatio: 1,
                            setSelect: [100, 100, 50, 50],
                            minSize: [160, 160],
                            maxSize: [160, 160],
                            onChange: setCoords,
                            onSelect: setCoords
                        });
    }
});

var x = 0, y = 0, w = 0, h = 0;
function setCoords(c) {
    x = c.x;
    y = c.y;
    w = c.w;
    h = c.h;
}; 
```

然而，这就是发生的事情：

![在此处输入图像描述](../Images/4959ebe802e7c44cec77a3df73a6af87.png)

我已经尝试了很多方法来解决这个问题，但最终结果总是一样的。有人有想法么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:34:49.473

我有同样的问题，但我发现，为什么会这样。

在我的 css 文件中，我有以下代码：

```
img {
    width:  100%;
    height: auto;
    border: none;
} 
```

当我从此定义中删除宽度和高度时，插件开始正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T17:03:17.970

我能够弄清楚。事实证明，twitter bootstrap modal 中的 JCrop 的 JCrop 框的宽度存在问题。twitter 引导模式覆盖了 JCrop css 中的 CSS。不得不修改 JCrop 中的 CSS 以防止这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:08:50.550

根据 Jcrop 文档，它实际上并没有进行裁剪。它只创建一个图像裁剪 UI。然后，它取决于进行实际裁剪的服务器；请参阅[http://deepliquid.com/content/Jcrop_Implementation_Theory.html](http://deepliquid.com/content/Jcrop_Implementation_Theory.html)。所以看起来插件正在做它设计的事情。正如他们所展示的，现在剩下的事情就让你自己在服务器上做。

# java - 在 Android 中使用 sharedpreferences 传递 Java 对象

> ID：10538972
> 
> 赞同：1
> 
> 时间：2012-05-10T17:06:58.037
> 
> 标签：java, android, sharedpreferences

我可以使用 Android 的 sharedpreferences 在不同的活动之间传递 Java 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:09:15.150

“捆绑”可能是最好的方法：

*   [http://bimbim.in/post/2010/09/27/Android-Passing-object-from-one-activity-to-another.aspx](http://bimbim.in/post/2010/09/27/Android-Passing-object-from-one-activity-to-another.aspx)

> Intent 和 Bundle 是用于将对象从一个活动转移到另一个活动的两个类。您可以创建捆绑对象并将它们放入意图

如果你想在你的 Bundle 中传递一个“对象”，那么该对象必须实现“Parcelable”：

*   [如何通过捆绑发送对象](https://stackoverflow.com/questions/4249897/how-to-send-objects-through-bundle)

*   [http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

另一种选择是使用全局状态：

*   [http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:09:14.213

不。为此，我建议将 Application 类的实现创建为单例，并在那里保留对您的对象的引用。

阅读评论后编辑：请记住，尽管单例有很多缺点，并且只有在其他解决方案不足时才应使用。

# java - JSF2 我可以通过 FacesContext 以某种方式访问 selectOneMenu 值吗？

> ID：10538973
> 
> 赞同：0
> 
> 时间：2012-05-10T17:06:58.023
> 
> 标签：java, jsf

是否可以通过 FacesContext 访问 selectOneMenu 中的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:27:22.783

HTML 输入元素的值通常作为 HTTP 请求参数提交，输入字段名称为请求参数名称。因此，如果您知道 JSF 生成的 HTML 输入字段名称，那么您将能够从请求参数映射中获取它。

例如

```
<h:form id="formId">
    <h:selectOneMenu id="menuId">
        ... 
```

和

```
String menuValue = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("formId:menuId");
// ... 
```

然而，这种方法的有用性是非常值得怀疑的。`value`您通常通过组件的属性直接将输入值绑定到支持 bean 属性，`UIInput`以便 JSF 将完成收集请求参数、转换/验证它们和更新模型值的所有工作。

# rubygems - Puppet：在没有预装 Rubygem 的机器上安装 Rubygem-package

> ID：10538975
> 
> 赞同：4
> 
> 时间：2012-05-10T17:07:12.420
> 
> 标签：rubygems, configuration-management, puppet

在一个干净的 Debian 系统上——没有安装 Rubygem——我想安装一个带有 Puppet 的 Rubygem 包（版本 2.7.13）。所以这个包有“gem”作为包提供者。

到目前为止，这是我的清单（我保持简单）：

```
# test.pp
Package { ensure => 'installed' } 

package { 
  'rubygems' : 
    name => 'rubygems',
}

package {
  'libldap-ruby1.8' :
    name => 'libldap-ruby1.8',
}

package { 'libldap2-dev' : 
   name => 'libldap2-dev', 
}

package { 'libsasl2-dev' : 
  name => 'libsasl2-dev', 
}

package { 'libsasl2-modules-ldap' : 
  name => 'libsasl2-modules-ldap', 
}

# My Rubygem, with Provider type 'gem'
package { 
  'ruby-ldap' : 
    name => 'ruby-ldap',
    provider => 'gem',
}

Package [ 'rubygems' ] -> Package [ 'ruby-ldap' ] 
Package [ 'libldap2-dev' ] -> Package [ 'ruby-ldap' ]
Package [ 'libsasl2-modules-ldap' ] -> Package [ 'ruby-ldap' ] 
```

当我测试这个清单（使用`puppet apply --noop test.pp`）时，我得到以下输出：

```
err: /Stage[main]//Package[ruby-ldap]: Provider gem is not functional on this host 
```

我在网上挖掘并找到了一些关于 Puppet+Rubygems 的信息（例如[this](https://groups.google.com/forum/?fromgroups#!topic/puppet-users/7DdudbY90cY)），但这些信息都没有帮助我解决我的问题，因为没有一个提供了一些代码的真正解决方案。

我还尝试使用类和阶段（在 gem 安装之前的阶段中进行 ruby​​gem 安装），但我总是得到`Provider gem`-error（但也许我只是以错误的方式使用了阶段）。

谁能给我一个工作清单，在没有 Rubygems 的系统上安装 ruby​​gems 和任何 ruby​​gem，或者至少提供如何到达那里的最终提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:17:15.140

虽然我的问题应该用 Puppet 2.7.8 解决（我使用的是 2.7.13） - 看到[这个问题](http://projects.puppetlabs.com/issues/6907)- 我很确定我在 2.7.13 中遇到了这个问题。

我在另一台安装了 2.7.14 的机器上重新尝试了这个，我可以成功地安装 Rubygem 和带有 Puppet 的 Rubygem 包。

# node.js - 为什么我的 makefile 没有设置 NODE_ENV？

> ID：10538978
> 
> 赞同：4
> 
> 时间：2012-05-10T17:07:27.347
> 
> 标签：node.js, makefile, environment-variables

这是我的 Makefile：

```
start:
    make start-prod

start-dev:
    @NODE_ENV=development
    make start-bare

start-prod:
    @NODE_ENV=production
    make start-bare

start-bare:
    node src/bootstrap

test:
    @NODE_ENV=test
    mocha --ignore-leaks $(shell find ./test -name \*test.js)

.PHONY: start start-dev start-prod start-bare test 
```

当我运行`make start-dev`然后`process.env.NODE_ENV`等于`undefined`。为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T17:11:03.853

在 makefile 目标中，每一行都是一个单独的 shell 实例，因此在其中设置环境变量不会转移到另一个。相反，请执行以下操作：

```
start-prod:
    @NODE_ENV=production \
      make start-bare 
```

或者

```
start-prod:
    @NODE_ENV=production make start-bare 
```

# oracle - 如何将存储为 clob 的图像文件转换为 blob 并将其插入到不同的表中？

> ID：10538980
> 
> 赞同：0
> 
> 时间：2012-05-10T17:07:34.713
> 
> 标签：oracle, blob, postgresql, clob

使用甲骨文

如何将存储为 clob 的图像文件转换为 blob 并将其插入到不同的表中？

我已经有代码将 blob 图像拉出并显示在我的网站上，但我无法弄清楚如何获取 clob 并将其转换为 blob，因此我也可以将其放入我需要的新方案和表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:49:09.883

Oracle 提供了一个名为 DBMS_LOB 的内置包来处理大多数 LOB 操作，该包中的方法之一是 DBMS_LOB.CONVERTTOBLOB [http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lob.htm#i1020355](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lob.htm#i1020355)

请注意，有时您需要指定 CHARSET。

您可以在这里查看示例：http: [//arjudba.blogspot.com/2008/04/convert-clob-to-blob.html](http://arjudba.blogspot.com/2008/04/convert-clob-to-blob.html)

如果这没有帮助，您可以随时使用 UTL_RAW

# python - 有一个类作为一个字典吗？

> ID：10538984
> 
> 赞同：0
> 
> 时间：2012-05-10T17:07:49.003
> 
> 标签：python, python-3.x

我有一个这样定义的类：

```
class GameState:

    def __init__(self, state=None):
        if state is None:
            self.fps = 60
            self.speed = 1
            self.bounciness = 0.9
            self.current_level = None

            self.next_frame_time = 0
            self.init_time = 0
            self.real_time = 0
            self.game_time = 0

            self.game_events = []
            self.real_events = []
        else:
            # THIS being the key line:
            self.__dict__.update(**state) 
```

是否有我可以定义的接口，这样它就可以工作（即 ** 运算符在我的类上工作）：

```
>>> a = GameState()
>>> b = GameState(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: update() argument after ** must be a mapping, not GameState 
```

本质上，我想`b`采用`a`.

我不认为它会起作用，但我尝试定义`__getitem__`没有任何运气。

**编辑**：我想避免使用 b's `__dict__`，因为我还希望能够将字典作为参数传递，并可能在其他地方的 GameState 对象上使用 ** 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:16:35.460

让 GameState 从 dict 继承：

```
class GameState(dict) 
```

并像这样重写 __setattr 函数：

```
def __setattr__(self,name,value) :
    self.__dict__[name] = value
    self[name] = value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:20:01.937

为了`**obj`工作，你必须实现（或继承）`__getitem__()`and`keys()`方法。

```
def __getitem__(self, item):
    return self.__dict__[item] # you maybe should return a copy
def keys(self):
    return self.__dict__.keys() # you could filter those 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:09:52.463

您可以通过在创建 b 时用a 的字典更新 b 的**字典来做到这一点。**试试这个：

```
class GameState:

    def __init__(self, state=None):
        if state is None:
            self.fps = 60
            self.speed = 1
            self.bounciness = 0.9
            self.current_level = None

            self.next_frame_time = 0
            self.init_time = 0
            self.real_time = 0
            self.game_time = 0

            self.game_events = []
            self.real_events = []
        else:
            if type(state) is dict:
                self.__dict__.update(**state)
            else:
                self.__dict__.update(**state.__dict__)

a = GameState() 
b = GameState(a) 
```

您可能想要创建 dict 的深层副本，因为您有一个列表对象作为属性的一部分。这更安全，因为没有对象共享。

# c++ - 一个 C++ 客户端无法加载我们新注册的 COM 注册的 .NET .dll，另一个可以正常工作

> ID：10538990
> 
> 赞同：1
> 
> 时间：2012-05-10T17:08:25.120
> 
> 标签：c++, .net, com, regsvr32, regasm

我们有一个客户通过 COM 访问的旧 C/C++ .dll。

我们已经尝试用 i .NET 编写的新 .dll 替换旧的 .dll。

客户无法重新编译他们的客户端，因此旧的 .dll 可以简单地通过 COM 取消注册/注册新（使用 regsvr32 / regasm）替换，这一点很重要。

我们相信我们已经构建了具有与旧 COM 接口相同的 COM 接口的 .NET .dll；GUID、名称、dispid 等都匹配。我们已经通过编写自己的 C++ 测试应用程序验证了这一点，当我们取消注册旧的 .dll / 注册新的 .dll 时，它会继续工作。

问题是客户的客户端无法启动。

奇怪的是，如果我们保留旧的 .dll 注册（例如，两个 .dll 都已注册）它可以工作；客户的应用程序启动并调用我们新的 .dll 中的方法。但是，一旦我们取消注册旧的 .dll，应用程序就无法再次启动。

我们尝试了不同的方法来注册新的.dll；将 regasm 与 /codebase 选项、/tbl 等一起使用。

如果我使用 OLE/COM 查看器进行检查，我可以看到新旧 .dll 之间的一些细微差别，例如类型库“名称”不同。但我想既然我们自己的 C++ 测试客户端可以与任何一个 .dll 一起使用，那么 COM 接口是否足够相似？

请问，有人知道吗？一个 C++ 客户端如何加载我们的新 .dll 而另一个失败？如果我们让旧的 .dll 与新的 .dll 并行注册，为什么两者都可以工作？有什么解释为什么两个 C++ 客户端的行为不同吗？

* * *

更新：客户端中的错误消息说：

## “运行时失败：CLSIDFromProgID。检查 [myDll].dll 是否已注册。”

亲切的问候 PT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:01:00.290

有很多可能性。首先，确保您正在注册新 DLL 的类型库。旧的可能是作为 DllRegisterServer 的一部分，但 AFAIK，.Net DLL 没有。使用 REGTLB.exe 注册它。

还要检查两个 DLL 中的线程模型是否相同。

如果这些都没有帮助，我建议您继续，直到 OLEVIEW 说它们是相同的 - 您永远不知道客户在做什么与您的不同。

# html - 哪些 MIME 类型用于 HTML/网页

> ID：10538993
> 
> 赞同：2
> 
> 时间：2012-05-10T17:08:43.577
> 
> 标签：html, http-headers, mime-types, mime

哪些 MIME 类型用于网页（无论是 HTML/XHTML/HTML5 等）？

我只需要一个 MIME 类型列表，它们用于为浏览器提供网页而不是文件（PDF、Word、图像、ZIP 档案等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:15:00.140

*   HTML：`text/html`

*   MHTML：`multipart/related`
*   XHTML：`application/xhtml+xml`

*   CSS：`text/css`

*   JavaScript：`application/javascript`

*   JSON：`application/json`
*   Internet Explorer 的行为 ( *.htc* )：`text/x-component`

# android - 如何让我的 Android TODO 显示在 Eclipse 的任务中？

> ID：10538994
> 
> 赞同：4
> 
> 时间：2012-05-10T17:08:51.857
> 
> 标签：android, eclipse, eclipse-indigo, todo, tasklist

我的 .java 文件中有 // TODO，它们被检测到并标记为任务 ![正确检测](../Images/dd234f6ea71984af04f553cc9c76d67c.png)

但它们未在任务列表中列出。 ![但未列出](../Images/2209d97433d8c98f6ca07b5c2c7d40a2.png) 如何让它们显示在任务列表中？如果它们在任务列表中，那么从一个任务跳到另一个任务会变得非常容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:15:04.117

`Windows -> Preferences`在 Eclipse 中转到，然后导航到`Java -> Compiler -> Task Tags`. 验证 是否`TODO`作为指示 Java 注释中的任务的标记列出。

如果配置正确，则在 Tasks 视图中打开下拉菜单并选择`Configure contents...`以确认 Java 任务被列为要在 Tasks 视图中显示的内容之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:30:57.100

我只需要保存项目 ( `Ctrl`+ `S`) 并显示任务:) 我认为这些任务以某种方式绑定到保存功能。因为当您编译或构建时，它会先保存:)

# c++ - 如何摆脱丑陋的记录

> ID：10538995
> 
> 赞同：0
> 
> 时间：2012-05-10T17:08:55.680
> 
> 标签：c++, oop, pointers, syntax, operator-overloading

```
class c {
    private:
        int n[10];
    public:
        c();
        ~c();
        int operator()(int i) { return n[i];};
};

class cc {
    private:

    public:
        c *mass;
        cc();
        ~cc();
        c& operator*() const {return *mass;};
};
int somfunc() {
    c *c1 = new c();

    cc * cc1 = new cc();

    (*cc1->mass)(1);

    delete c1;
} 
```

我有一个指向类 cc 到类 c 的指针。

有没有办法摆脱这样的记录：

```
(*cc1->mass)(1); 
```

并写一些这样的想法：

```
cc1->mass(1); 
```

不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:15:29.873

总是可以这样做：

```
class cc {
    private:
        c *_mass;

    public:
        c& mass() const {return *_mass;};
}; 
```

现在..

```
cc1->mass()(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:50:37.580

如果`mass`是一个对象，而不是一个指针，你可以使用你想要的语法：

```
class cc {
  private:

  public:
    c mass;
    cc();
    ~cc();
    const c& operator*() const {return mass;};
};

…

    cc1->mass(1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:55:22.193

当我看到标签“c++”和“运算符重载”时，我的心灵警报开启了。

C++ 运算符重载很复杂，一些运算符如“()”或“->”使其更加困难。

我建议，在重载运算符之前，创建一个具有相同目的的全局函数或方法，测试它是否有效，然后用运算符替换它。

全局好友函数示例：

```
class c {
    private:
        int n[10];      

    public:
        c();
        ~c();

        // int operator()(int i) { return n[i]; } 

        // there is a friend global function, that when receives a "c" object,
        // as a parameter, or declares a "c" object, as a local variable,
        // this function, will have access to the "public" members of "c" objects,
        // the "thisref" will be removed, when turned into a method
        friend int c_subscript(c thisref, int i) ;
};

int c_subscript(c* thisref, int i)
{
  return c->n[i];
}

int main()
{
  c* objC() = new c();
  // do something with "objcC"

  int x = c_subscript(objC, 3);
  // do something with "x"

  return 0;
} // int main(...) 
```

局部函数（“方法”）示例：

```
class c {
    private:
        int n[10];      

    public:
        c();
        ~c();

        // int operator()(int i) { return n[i]; }

        int subscript(int i) ;
};

int c::subscript(int i)
{
  return this.n[i];
}

int main()
{
  c* objC() = new c();
  // do something with "objcC"

  int x = c->subscript(objC, 3);
  // do something with "x"

  return 0;
} // int main(...) 
```

并且，最后使用重载运算符：

```
class c {
    private:
        int n[10];      

    public:
        c();
        ~c();   

        int subscript(int i) ;

        int operator()(int i) { return this.subscript(i); }
};

int c::subscript(int i)
{
  return this.n[i];
}

int main()
{
  c* objC() = new c();
  // do something with "objcC"

  int x = c->subscript(3);
  // do something with "x"

  int x = c(3);
  // do something with "x"

  return 0;
} // int main(...) 
```

请注意，在最后一个示例中，我使用唯一标识符保留方法。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:11:41.140

你可以用

```
(*(*cc1))(1) 
```

因为`operator()`应用于对象，而不是指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:12:24.243

您可以使用

```
(**cc1)(1); 
```

或者

```
cc1->mass->operator()(1); 
```

# testng - TestNG TestListener - 如何在 TestListener beforeInvocation 方法中达到 testmethod 参数

> ID：10538996
> 
> 赞同：0
> 
> 时间：2012-05-10T17:08:57.337
> 
> 标签：testng

xml 文件中的参数在`<include>`标签内设置，如下所示：

```
<suite name="Suite">
  <listeners>
    <listener class-name="..MyTestListener"/>
  </listeners>
  <classes>
    <class name="Foo">
      <methods>
        <include name="myTest">
          <parameter name="parameter1"  value="parameterValue"/>
        </include>
.. 
```

当然，如果参数标记在包含标记之外，我可以在 beforeInvocation 方法中到达测试参数，例如：`method.getTestMethod().getXmlTest().getParameter("parameter1")`。但是在这种情况下，参数必须绑定到测试方法，并且我得到 null 作为 getParameter 方法的返回值。

谢谢， 斯特里斯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:19:19.373

我找到了我的问题的答案。IInvokedMethodListener beforeInvocation 方法有 ITestResult 参数，它有 getParameters 和 setParameters 方法。或者 IHookable 接口允许你处理 testMethod 的输入参数，并回调 testMethod。

兄弟，斯特里斯蒂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:54:51.930

根据[此处](http://testng.org/testng-1.0.dtd.php)的 dtd ，可以在级别`<suite>`或`<test>`级别定义参数。在级别定义的参数会覆盖 中的同名参数`<suite>`。因此，不能在类级别关联参数。

此外，a `<test>`in testng 表示一组类，例如[here](http://testng.org/doc/documentation-main.html#testng-xml)。如果有帮助，您可能可以参考[testng 文档的部分](http://testng.org/doc/documentation-main.html#introduction)，其中解释了 testng xml 命名法。标签中的参数`<test>`，可以被它下的所有类引用。

# python - 在 Python 中嵌套同一生成器的实例

> ID：10538998
> 
> 赞同：4
> 
> 时间：2012-05-10T17:09:02.043
> 
> 标签：python, generator, nested-loops

假设我有一台发电机：

```
def mygen():
    for i in range(10):
        yield i 
```

这正如我所期望的那样工作：`i`和的所有组合`j`

```
for i in mygen():
    for j in mygen():
        print i, j 
```

我认为这些是不同的例子。为什么它们不充当不同的实例？

```
g1 = mygen()
g2 = mygen()

for i in g1:
    for j in g2:
        print i, j 
```

如果我尝试`g1.next()`，我会收到一个错误，因为没有剩余数据。

我正在运行 Python 2.7.1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T17:10:37.770

第一次迭代`g2`会消耗它，因此当您尝试在随后的时间迭代它时没有任何剩余。

```
g1 = mygen()
for i in g1:
    g2 = mygen()
    for j in g2:
        print i, j 
```

# mysql - 选择里面DataFlow，MySQL源

> ID：10538999
> 
> 赞同：0
> 
> 时间：2012-05-10T17:09:02.637
> 
> 标签：mysql, ssis

我复制一个表，MySQL (ado net) -> SQL (ole db)。起初我完全复制了它，但由于它包含数百万个字段，而我只需要其中的一半，我想只复制我需要的内容，而不是复制整个表。

问题是我找不到使它起作用的正确句子。这是完整副本的图片，因此您可以查看它在源代码中的显示方式。

![在此处输入图像描述](../Images/a80f7b22990d6ed392971f2964321cc3.png)

因此，我尝试使用**SQL Command**而不是**Table 或 View**。选择 field1, field2 from "" where field1 = 'AA' 但它不起作用。我对“”感到困惑。那是我缺少的一些 MySQL 吗？