# StackOverflow 问答 11274000-11274999

# java - 如何从 Java 中的字符串中获取整数？

> ID：11274000
> 
> 赞同：1
> 
> 时间：2012-06-30T12:14:53.137
> 
> 标签：java

我正在使用以下内容：

```
int i = Integer.parseInt(args[2]); 
```

还有其他方法可以从字符串中获取整数吗？如果这个数字真的很小，那么 Byte 和 Char 对象是否提供类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:18:15.953

是的。有：

```
Byte.parseByte(s); -- parses a Byte from a String
Short.parseShort(s); -- parses a Short from a String 
```

对于更大的数字，有：

```
Long.parseLong(s);
-- Float is an imprecise representation of a floating point number using 32 bits
Float.parseFloat(s);
-- Double is an imprecise representation of a floating point number using 64 bits
Double.parseDouble(s);
-- BigIntegers is an integer of arbitrary size as is accurate
new BigInteger(s);
-- BigDecimal is a floating point number of arbitrary size as is accurate
new BigDecimal(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:18:04.047

是的，您可以使用[Short.parseShort(String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Short.html#parseShort%28java.lang.String%29)和[Byte.parseByte(String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Byte.html#parseByte%28java.lang.String%29)包装方法来解析较小的整数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:27:35.700

从 a 获取整数的其他方法`String`：

```
 String value = "2";

    int i = Integer.valueOf(value);
    System.out.println("i = " + i);
    Scanner scanner = new Scanner(value);
    i = scanner.nextInt();
    System.out.println("i = " + i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T12:46:51.933

您还应该将其包装在 try catch 块中，这样如果您尝试将非整数值传递给它，您的代码就不会崩溃。

# c# - 正则表达式匹配以下字符 AZ 、 az 、 0-9 、 ? ！美元，'。

> ID：11274004
> 
> 赞同：-1
> 
> 时间：2012-06-30T12:15:43.690
> 
> 标签：c#, regex, windows-phone-7.1

我希望用户只允许在 TextBox 中键入以下字符 AZ 、 az 、 0-9 、 ? ！美元，'。在 Silverlight Windows Phone 中...我们可以通过 RegEx 表达式来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:18:40.600

是的，如果你只需要一个正则表达式，那么：

```
/^[a-zA-Z0-9\?\!\$,\.]*$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:30:13.760

如果字符串与给定条件不匹配，RegEx 将返回 NULL 值。您必须在 keyUp 事件上处理 key 事件，而不是使用 RegEx。

```
function validate()
{
var keyCode=event.keyCode;
if((keyCode>=48 && keyCode<=57) && (keyCode>=65 && keyCode<=90)){

   //if keyCode is in 0-9,a-z ....do whatever you want...

}else{
    //else it will terminate the last character from text box
   var x =document.getElementById("inp");
   x.value=x.value.substring(0,x.value.length-1);
}
}

<input type="text" id="inp" onkeyup="validate()" /> 
```

# c# - 如何在 Windows Phone 中的列表框项中查找组件？

> ID：11274012
> 
> 赞同：-3
> 
> 时间：2012-06-30T12:17:35.130
> 
> 标签：c#, windows-phone

我需要从列表框项中检索组件。不是来自点击或选择更改的事件。有没有一种简单的方法可以实现这一目标？如果我没记错的话，在Android中你可以写：

```
layoutRoot.findViewById(R.id.name); 
```

在 Windows Phone 上是否有类似的方法可以做到这一点？

* * *

更新：这是我到目前为止尝试过的，但不起作用：

当我拥有 ListBoxItem 时，Daniela 在选项 5 中所说的似乎有效。因此，当我在 ListBoxItem 上有一个 Tap 事件时，这可以正常工作：

```
private void ListBoxItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    ListBoxItem item = sender as ListBoxItem;
    // I can now retrieve a component inside the ListBoxItem
    TextBox textBox = item.FindName("myTextBox") as TextBox;
} 
```

但是我想在不从 ListBoxItem 触发任何事件时执行此操作。JoonasL 所说的看起来像是我可以使用的东西，但我无法让它发挥作用。

```
// will not compile ( Cannot implicitly convert type 'object' to... )
ListBoxItem item = x.Items[0];

// if cast the value will be null
ListBoxItem item = x.Items[0] as ListBoxItem;

// will return the object used to populate that ListBoxItem, not the actual ListBoxItem.
// item will have a ItemViewModel object.
List<ItemViewModel> list = ....
this.myListBox.ItemsSource = list;
var item = x.Items[0] 
```

在 Google 上搜索时，我发现了一些可以用来在 ListBoxItem 中查找组件的东西，但我认为应该有更简单的方法。他们在这里使用[VisualTreeHelper](http://www.windowsphonegeek.com/tips/how-to-access-a-control-placed-inside-listbox-itemtemplate-in-wp7)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T20:10:26.077

编辑：将名称添加到您的 lisbox (x:Name="something") 将所有项目转换为列表或选择一个项目并将项目转换为正确的类型。例子：

```
 private void Button_Click(object sender, RoutedEventArgs e)
{
  var list = yourListbox.Items;
  var itemCastAsCorrectObjectInstance = (ItemViewModel)list.FirstOrDefault();
  textblock.Text = itemCastAsCorrectObjectInstance.LineOne;
} 
```

ItemViewModel 是我们创建的一个类，ItemViewModel 的列表用作列表框的 itemssource。

[这是我为您制作的应用示例](http://www.irisclasson.com/wp-content/uploads/2012/06/WP7App1.zip)

有几种方法可以做到这一点（一些示例是 WPF，但代码非常相似，这只是为了给您一个大致的想法）

1.  在代码中创建列表框并检索项目，如我的 JoonasL 提供的示例中所示

    ```
     private void GetUserRecommendations()
    {
        var obj = _helper.GetList<Recommendations>(@"http://localhost:1613/Home/GetAllRecommendations");

        _items.Clear();

        foreach (var item in obj)
        {
            _items.Add(item);
        }

        itemListView.ItemsSource = _items;
    } 
    ```

2.  在更改的事件（或绑定到列表框的其他事件）上检索选定的项目

    ```
     void ItemView_ItemClick(object sender, ItemClickEventArgs e)
    {
        var itemProperty = ((ListBoxItem) e.ClickedItem).SomeProperty;
    } 
    ```

3.  为列表框提供名称并通过引用代码中的名称来访问项目

    var item = itemListView.SelectedItem as SomeClass;

4.  通过绑定到另一个元素来访问所选项目（仅限 XAML）

    ```
    <Border Margin="10" BorderBrush="Silver" BorderThickness="3" Padding="8">
    <DockPanel>
      <TextBlock>Choose a Color:</TextBlock>
      <ComboBox Name="myComboBox" SelectedIndex="0">
        <ComboBoxItem>Green</ComboBoxItem>
        <ComboBoxItem>Blue</ComboBoxItem>
        <ComboBoxItem>Red</ComboBoxItem>
      </ComboBox>
      <Canvas>
        <Canvas.Background>
          <Binding ElementName="myComboBox" Path="SelectedItem.Content"/>
        </Canvas.Background>
      </Canvas>
    </DockPanel> 
    ```

5.  搜索 layoutroot

var myTextBlock = (TextBlock)this.FindName("myTextBlock");

或者可能是这样的：

```
 private void Somepage_Loaded(object sender, RoutedEventArgs e)
{
    if (SomeCondition())
    {
        var children = (sender as Panel).Children;
        var child = (from Control child in children
                 where child.Name == "NameTextBox"
                 select child).First();
        child.Focus();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T18:25:21.813

RadDataBoundListBox 有一个名为 ItemTap 的事件（不确定普通的 ListBox），但我的解决方案是这样的：

```
private void FocusTextBox(object sender, ListBoxItemTapEventArgs e)
{           
                txtBox = e.Item.FindChildByType<TextBox>();

                var item = itemListView.SelectedItem as PanoramaApp1.//Your Selected Item Type Here;

                //Do Something With item Here

                itemListView.SelectedItem = null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:47:24.827

```
ListBox x = new ListBox();
ListBoxItem item = x.Items[0]; 
```

还是你想要别的东西？

# c# - 如何通过 StreamWriter 更改文件中的某些文本

> ID：11274013
> 
> 赞同：1
> 
> 时间：2012-06-30T12:17:44.173
> 
> 标签：c#, winforms, filestream

我正在尝试更改 .CSV 文件中的一些文本。

```
StreamReader sReader = new StreamReader(path1);
while (sReader.Peek() != -1)
{
    rowValue = sReader.ReadLine();
    if (rowValue == "25")
    {
         sWriter = new StreamWriter(path1);
         rowValue = "27";
         sWriter.WriteLine(rowValue);
    }
} 
```

没啥事儿。请问正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:26:29.980

我不相信你能做你想做的事……更新一行。如果它完全起作用，则将值附加`27`到文件的末尾。

查看[`ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)和[`WriteAllLines`](http://msdn.microsoft.com/en-us/library/92e05ft3.aspx)方法。您需要读取整个文件，更改要更改的行，然后将其写回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:26:43.150

好吧，如果要读取的文件不是很大，您可以尝试读取内存中的所有内容并写回

```
string[] lines = File.ReadAllLines(path1);
using(StreamWrite sw = new StreamWriter(path1))
{
    foreach(string line in lines)
    {
        string lineOut = line;
        if (line == "25") 
           lineOut = "27"; 
        sw.WriteLine(lineOut);
    }
    sw.Flush();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T12:32:46.607

您可以使用 System.IO.File.ReadAllLines 和 System.IO.File.WriteAllLines 轻松完成此任务

```
string[] lines = File.ReadAllLines(path1);

for(int i = 0; i < lines.Length; i++)
{
  if(lines[i] == "25") lines[i] = "27";
}

File.WriteAllLines(path1, lines); 
```

# database - 数据库规范化和用户定义的数据存储

> ID：11274019
> 
> 赞同：1
> 
> 时间：2012-06-30T12:18:37.637
> 
> 标签：database, django, postgresql, database-design

我希望让我的 Web 应用程序的用户定义他们自己的产品属性，然后为这些产品输入数据。我发现这种技术被称为`n(th) normal form`.

以下是我目前正在考虑部署的数据库结构，并且想知道在完整性和可扩展性方面的正面和负面影响（以及您能想到的任何其他*-ity ）*

![原图](../Images/b6cc15ea18e785446d79a3fa4c5aec15.png)

**编辑** *（对不起，这就是我的意思）*

![新图表](../Images/6fc9151af6b04993b1928ba6f950bf15.png)

在过去的 15 分钟里，我一直在盯着它看，我知道（红色箭头所在的位置）会导致重复，因此您必须进行完整性检查。但我只是不明白我想要的其他东西怎么做。

*产品数量不超过 10 个。变量数量不超过 200（每个产品最多 20 个）。产品实例的数量不会超过 100,000，因此最大大小`pVariable_data`不会超过 200 万*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:36:35.060

这种模型称为数据库中的数据库，并不好。尽管有时不可能首先检查您是否真的需要它，并且您的数据库确实是适合这项工作的数据库。

使用 PostgreSQL，您可以使用：[http](http://www.postgresql.org/docs/8.4/static/hstore.html) ://www.postgresql.org/docs/8.4/static/hstore.html ，这是针对此类问题的标准化解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:40:19.317

假设 pVariable 更像是一种 pVariable 类型，请删除对 product_fk 的引用。这意味着您需要在该表中为每个产品记录创建一个新条目。也许尝试这样的事情：

```
Product(id, active, allow_new)

pVariable_type(id, name) 

pVariable_data(id, product_fk, pvariable_fk, non_typed_value, bool, int, etc) 
```

我将使用 non_typed_value 作为您的文本值，并且（除非您保留流）将记录与键入的值一起写入该字段。这意味着将记录的值保留两次（并且在更新等方面更加痛苦），但它将使查询和报告（您只需要显示其值的任何内容）更容易。

注意：将所有产品共有的任何东西都拉出来并将它们放在产品表中也是一种想法。例如，所有产品很可能都有名称、建议价格等。

# ruby-on-rails-3 - Rails 3资产管道js错误？

> ID：11274021
> 
> 赞同：0
> 
> 时间：2012-06-30T12:18:41.433
> 
> 标签：ruby-on-rails-3, asset-pipeline

我有所有的javascript文件`app/assets/javascripts`

一些 javascript 文件

*   应用程序.js
*   效果.js
*   rails.js
*   原型.js
*   scriptaculous.js

预编译资产 时，它在 public/assets 中`rake assets:precompile` 创建`application.js`

但是 application.js 文件只包含了存在的内容`app/assets/javascript/application.js`，不包括其他 js 文件的内容（efect、prototype）。

如果我像这样将 javascript 文件添加到 config.assets.precompile

```
config.assets.precompile += %w( rails.js menu.js ) 
```

这为每个 in 创建单独的 js 文件 `public/assets`

在我的 production.rb 文件中

```
# Disable Rails's static asset server (Apache or nginx will already do this)

config.serve_static_assets = true

# Compress JavaScripts and CSS
config.assets.compress = true 
```

我需要将所有 javascript 文件合并到单个文件中。

我正在使用原型。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:36:08.130

在`application.js`您必须包含要组合的文件时，将其添加到开头：

```
//= require effect
//= require rails
//= require prototype
//= require scriptaculous 
```

或者如果它们都在同一个文件夹中

```
//= require_tree . 
```

然后在您的应用程序中，您必须仅包含 application.js 的标签，而不是每个标签。

# c# - 安装 .NET 4 Prerequisite Elevated 但应用程序 MSI perUser

> ID：11274023
> 
> 赞同：2
> 
> 时间：2012-06-30T12:19:07.277
> 
> 标签：c#, .net, wix, windows-installer, dotnetinstaller

*使用 dotNetInstaller 2.1.528*

![msi 始终使用 administrator_required 提升](../Images/74edafae229346ec3eb94898b8e306d8.png)

### 提升先决条件和 MSI

如以下链接中所述，使用 dotNetInstaller 引导程序时：在“运行时”部分下，将“administrator_required”设置为“True”，这将允许 dotNetInstaller 提升组件

*   因此，当 administrator_required 为真时，安装 .NET 4 先决条件开始工作，即使用户没有使用“以管理员身份运行”运行安装程序。

*   但现在 msi 也以提升的权限运行！即使它是为每个用户/非提升安装而构建的，并且运行 msi 直接安装它也没有任何提升（使用 WiX 构建）。

dotNetInstaller：安装时的 UAC 提升 [http://code.dblock.org/dotnetinstaller-uac-elevation-on-install](http://code.dblock.org/dotnetinstaller-uac-elevation-on-install)

配置 dotNetInstaller 2.0 以安装自定义先决条件，然后以提升的权限运行自定义 exe。 [http://geekswithblogs.net/JaydPage/archive/2011/03/31/configuring-dotnetinstaler-2.0-to-install-custom-prerequisites-and-then-run.aspx](http://geekswithblogs.net/JaydPage/archive/2011/03/31/configuring-dotnetinstaler-2.0-to-install-custom-prerequisites-and-then-run.aspx)

### 如何仅提升先决条件而不提升 MSI？

我的 .msi 是每个用户而不是每台机器，如果已经安装了 .NET 4 先决条件，则根本不需要提升。

*   并且（每个用户）msi 的不必要提升具有需要提升以进行卸载的进一步影响。

*   如何实现选择性 - 提升 .NET 4 安装程序，而不是应用程序 msi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:30:55.927

先决条件应在安装时自行提升。没有办法让这个过程以某种方式降低自身或产生一个低于自身高度的孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:57:56.573

事实证明，目前不支持选择性提升先决条件，[答案在于在 dotNetInstaller 源代码中开发该功能](https://groups.google.com/forum/?fromgroups=#!topic/dotnetinstaller/9D5icjlrPv0)......

# linux - 对于arm Linux，用户空间的线程可以访问内核空间的虚拟地址吗？

> ID：11274030
> 
> 赞同：1
> 
> 时间：2012-06-30T12:20:05.933
> 
> 标签：linux, linux-kernel, arm

虚拟内存分为两部分。传统上，0~3GB 用于用户空间，3GB~4GB 用于内核空间。

我的问题：

用户空间的线程可以访问内核空间的内存吗？

对于 ARM 数据表，访问属性由域访问控制寄存器负责。但是在内核源代码中，用户空间虚拟内存的页表项中的域值与内核空间的页表项相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:34:26.433

事实上，您的应用程序可能会访问页面 0xFFFF0000，因为它包含 swi-handler 和其他几个用户空间助手。所以不，3/1 分割并不神奇，内核非常容易管理。

通常内核会将所有超过 3GB 的内存设置为只能由内核域本身访问。如果驱动程序需要在用户和内核空间之间共享内存，它通常会提供一个 mmap 接口，然后创建一个别名映射，因此您有两个虚拟地址用于同一个物理地址。这只适用于 VIPT-Cache 系统或大量仔细的显式缓存刷新。如果您不希望这样，您可以破解内核以使用户空间可以访问 3G 拆分之上的一块内存。但随后所有用户空间应用程序将共享此内存。我已经为 armv5 系统上的特殊应用程序做过一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:19:10.767

用户空间代码获取内核内存？唯一允许这样做的内核是 DOS 及其古老的朋友。但回到问题上来，看看这个示例 C 代码：

```
char c=42;
*c=42; 
```

我们取一个字节 (a `char`) 并为其分配数值 42。然后我们*取消引用*这个非指针，它可能会尝试访问虚拟内存的第 42 个字节，这几乎绝对不是你的内存，并且，为了这个例子，内核内存。猜猜当你运行它时会发生什么（如果你设法将编译器放在枪口下）：

```
Segmentation fault 
```

Linux 像任何现代操作系统一样具有内存保护。如果您尝试访问另一个进程的内存，您的进程将在它可以做任何事情之前被终止（虽然我不太确定调试器会发生其他事情）。即使该内存是另一个 Userland 进程的内存，您仍然会被终止。我几乎可以肯定`root`程序无法访问其他程序内存或内核内存。访问内核内存的唯一方法是成为内核的一部分，或者间接通过内核的合作。

# excel - 单独 Excel 工作表中特定数据的总和

> ID：11274033
> 
> 赞同：7
> 
> 时间：2012-06-30T12:20:58.263
> 
> 标签：excel, excel-formula

我在 2 张单独的表格中有以下数据：
**Sheet1**：

```
 A   B   C   D
a   ff  dd  ff  ee
b   12  10  10  12 
```

**表2：**

```
 A   B   C   D
a   ge  ff  ff  ee
b   11  13  14  10 
```

现在我想写一个公式来总结第 2 行中包含`ff`直接在上面的所有值（即第 1 行）

在上面的示例中，我想添加 (Cell Sheet1[A, b], Sheet1[C, b], Sheet2[B, b], Sheet2[C, b]) 等于 49。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T13:45:06.423

对于 2 张纸，我会接受 brettdj 的建议，但是，一般来说，您可以像这样在多张纸上执行 SUMIF：

`=SUMPRODUCT(SUMIF(INDIRECT("'"&sheetlist&"'!A1:D1"),"ff",INDIRECT("'"&sheetlist&"'!A2:D2")))`

where sheetlist is a named range containing all the sheet names

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-30T12:52:17.363

这是一个典型的工作`SUMIF`。由于`SUMIF`本机不是跨多个工作表工作的 3D 函数，因此您需要一个公式，例如这个公式（在 Sheet1 上输入），将两个工作表的总数结合起来

`=SUMIF(A1:D1,"ff",A2:D2)+SUMIF(Sheet2!A1:D1,"ff",Sheet2!A2:D2)`

*请注意，这个问题最好在超级用户上问，因为它不是编程*

# macros - 网络浏览器的最佳宏工具

> ID：11274034
> 
> 赞同：0
> 
> 时间：2012-06-30T12:21:46.243
> 
> 标签：macros, firefox-addon, phpmyadmin, browser

我需要自动化一些网络浏览器操作。基本上我需要通过 phpMyAdmin 导入一些 SQL 查询的结果（我不能直接执行 SQl，因为我的提供程序不允许它，我也尝试使用 CURL 或 WGet，但我无法让它工作）。无论如何，因为它总是相同的文件，但我可以使用宏。我想使用 Vimperator/pentadactyl 但它不起作用，因为我需要宏来记录文件选择等....

那么什么是最好的（更流行的）插件来完成这项工作。我在考虑 Selenium，但我见过其他插件可以做到这一点。

或者，允许远程执行 SQL 的完整 CLI 版本也将是惊人的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T12:32:15.237

您可以对 Web 进行自动化测试，以完成替换宏的工作。以我的知识宏使用 vbscript。一些支持宏的程序是 Access、Excel、mapics(as400)。

# java - 使用 jqwicket 的幻灯片动画

> ID：11274037
> 
> 赞同：0
> 
> 时间：2012-06-30T12:22:24.137
> 
> 标签：java, jquery, wicket

我有一些使用 jqwicket 的基本知识。这很简单，但我在实现这个幻灯片动画时遇到了问题：http: [//jsfiddle.net/steweb/rWbFw/](http://jsfiddle.net/steweb/rWbFw/)

动画是简单的部分，但我不知道如何包含用于调整大小的自定义函数：

```
var utils = {
maskWidth : $('#mask').width(),
currIndex : 0,
setWidths : function(){
    //setting maskWidth
    utils.maskWidth = $('#mask').width();

    //setting wrapper width 
    $('#wrapper').css('width',$('.full').length * utils.maskWidth);

    //setting 'full div' width
    $('.full').each(function(index){
        $(this).css('width',utils.maskWidth);
    });

    //setting curr wrapper margin (for window resize)
    $('#wrapper').css('margin-left',-(utils.currIndex*utils.maskWidth));

} 
```

任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:17:13.227

您需要将 JavaScript 添加到`<head>`标签中。创建一个`Behavior`并覆盖它的`renderHead(Component, IHeaderResponse)`.

`IHeaderResponse`有几种方便的附加到头部的方法

# python - os.getcwd() 与 os.path.abspath(os.path.dirname(__file__))

> ID：11274040
> 
> 赞同：44
> 
> 时间：2012-06-30T12:22:52.633
> 
> 标签：python, django

我正在使用 os 模块在我的 Django 项目`settings.py`文件中具有相对路径。变量 SITE_ROOT 设置为`settings.py`文件的当前工作目录，然后用于引用`static/media`也位于同一目录中的所有目录。

这是我的问题：

```
print os.getcwd()
print os.path.abspath(os.path.dirname(__file__)) 
```

在 settings.py 中，上述语句都有相同的输出。但我的模板只有在我使用时才会加载`SITE_ROOT = os.path.abspath(os.path.dirname(__file__))`

Django 在这里寻找模板：

```
TEMPLATE_DIRS = (
    os.path.join(SITE_ROOT, 'templates'),
) 
```

SITE_ROOT 设置为`os.getcwd()`似乎使 Django 在文件上方的目录中查找模板文件`settings.py`夹

我可以很容易地不使用`os.getcwd()`并且我的网站运行良好，但我很好奇这里可能发生了什么:)

有人知道吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-30T12:53:41.473

正如 mouad 所说，`os.getcwd()`不会给你你所期望的。

`os.getcwd()`不仅仅是返回当前工作目录。它在您的环境中默认为 $PWD。这不是脚本所在的位置，而是您*执行*脚本时所在的位置。

正在`/home/user`做`python manage.py`，`os.getcwd()`会回来`/home/user` 正在`/home/`做`python user/manage.py`，`os.getcwd()`会回来`/home`

但它仍然不会总是正确的，因为可以使用`os.chdir()`. 换句话说，就像做一样`cd`。它也会改变`os.getcwd()`.

另一方面。`__file__`是模块文件的路径。所以你必须使用它来确保有一个相对于你的模块的路径，而不是可能改变的当前工作目录。

正如 ShawnFumo 所说，`__file__`可能并不总是绝对的。为了更好地了解它的工作原理，您可以检查该答案：[Python`__file__`属性](https://stackoverflow.com/questions/7116889/python-file-attribute-absolute-or-relative)。此外，从 Python3.4 开始，`__file__`应该始终是绝对路径。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-30T12:54:07.587

该命令`os.path.abspath(os.path.dirname(__file__))`返回存储代码文件的目录，但`os.getcwd()`会为您提供当前工作目录，默认情况下该目录是执行代码的位置，后者可以使用该`os.chdir()`命令进行更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T12:30:12.850

`os.getcwd()`不会为您提供位于的路径，**而是**`settings.py`为您提供执行脚本（在您的情况下`manage.py`）的路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T12:28:55.203

如果您显示的两个语句确实具有相同的输出，那么任何一个都应该工作。所以要么：1）它们有细微的不同，例如，一个有斜杠，另一个没有，或者2）你在一个环境中测试并在另一个环境中运行。

# c++ - 从 BaseClass* 到 DerivedClass* 的无效转换

> ID：11274043
> 
> 赞同：3
> 
> 时间：2012-06-30T12:23:13.507
> 
> 标签：c++, inheritance, c++11

我正在尝试使用工厂方法返回派生类，但返回类型是基类类型。根据我的理解，我认为继承可以让我这样做，显然我错了。

WeightExercise 和 CardioExercise 都来自于运动。

我可以投射对象，但我认为我的设计意味着我不必这样做。有人可以指出我的错误吗？

主要的

```
ExerciseFactory ExerciseFactoryObj;
WeightExercise *WeightExerciseObj = ExerciseFactoryObj.createExercise(menuselection); 
```

工厂类

```
class ExerciseFactory
{
public:
ExerciseFactory();
~ExerciseFactory();
Exercise* createExercise(int exercisetype);

private:
static WeightExercise* createWeightExercise() { return new WeightExercise(); }
static CardioExercise* createCardioExercise() { return new CardioExercise(); }
}; 
```

工厂实施

```
Exercise* ExerciseFactory::createExercise(int exercisetype)
{
if ( 1 == exercisetype )
{
    return this->createWeightExercise();
}
else if ( 2 == exercisetype )
{
    return this->createCardioExercise();
}
else
{
    cout << "Error: No exercise type match" << endl;
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T12:25:46.643

您可以将从工厂返回的 Derived 类分配给基类 one ：

```
ExerciseFactory ExerciseFactoryObj;
Exercice *WeightExerciseObj = ExerciseFactoryObj.createExercise(menuselection); 
```

**编辑：**

如果您确实需要访问 WeightExerciceObject 元素，请使用：

```
WeightExerciceObject * weight = dynamic_cast<WeightExerciceObject *>(ExerciseFactoryObj.createExercise(menuselection)); 
```

如果类不是确切的类，这将返回 NULL。您需要检查 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:27:31.957

在 main 方法中，这是：

```
WeightExercise *WeightExerciseObj = ExerciseFactoryObj.createExercise(menuselection); 
```

应该是这个

```
Exercise *WeightExerciseObj = ExerciseFactoryObj.createExercise(menuselection); 
```

您不能使用 WeightExercise，因为您不知道返回的是什么特定类型的锻炼，它可能是 CardioExercise 或 WeightExercise，或者您还不知道的其他未来类型。

# php - 更新数据源时更新 GUI

> ID：11274045
> 
> 赞同：0
> 
> 时间：2012-06-30T12:23:31.157
> 
> 标签：php, database

我想在更新数据源时更新我的​​ PHP GUI 视图（数据源可以是数据库）。我很难理解如何在不为用户重新加载整个视图的情况下做到这一点。

我试图实现的是：

显示用户视图，从手持设备调用站点上的脚本并且脚本更新数据源，当数据源更新时，使用更新的数据更新用户视图而不重新加载。

PHP/JS 可以做到这一点，我将如何实现这一点？我不需要任何代码，只需要一步一步的解释，也许需要使用什么技术。

感谢任何引导我解决这个问题的建议。

最好的祝福，

加布里埃尔·保尔森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:38:09.427

发生任何事件时使用 ajax 刷新数据。使用 ajax 不会重新加载页面。使用 ajax 非常简单。Googel、gmail 和许多其他使用这样的 ajax。十分钟内学习 w3school [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:29:24.530

应该可以只用 php 来完成，告诉页面以一定的时间间隔更新自己。

我会这样做的方式是使用带有 ajax 和定时事件的 javascript。对服务器的 ajax 调用事件触发，服务器返回任何新信息。

如果您是 ajax 新手，您可能希望使用一个库来使事情更容易处理。我个人最喜欢的是prototype.js，尽管目前它似乎有点“即将淘汰”，例如jquery 可能是一个更好的选择。

# php - Ajax-jquery 警告 404

> ID：11274051
> 
> 赞同：0
> 
> 时间：2012-06-30T12:25:51.637
> 
> 标签：php, jquery, ajax, smarty

我正在使用 Jquery 发出一些 ajax 请求：

```
$('#my-btn').click(function() {ldelim}
    var comment = $('#textarea').val();
    var m = {$id};
    var data = {ldelim}
          comment: $('#textarea').val(),
          m: {$id}
        {rdelim};

        $.post('index.php?page=page',data,function(callback_data){ldelim}

        var content = $('div.my-btn').html();
        $('div .comments').append(content);
                ...
        alert(callback_data);
{rdelim});
{rdelim}); 
```

（那个 {rdelim} 或 {$id} 的原因是我正在使用模板引擎 Smarty。）

我的 php 代码的处理工作得很好：bdd 已正确实现，但回调的警报发送一个“404”，阻止我从我的 php 代码中回显数据编号。（当我在我的 php 代码中调用 echo($data) 时，我收到 $data+404 的警报）。

有人有想法吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:31:14.267

jQuery 的回调`.post()`仅用于成功（HTTP 状态代码 2XX）响应。要对 404 进行回调，您需要使用`.ajax()`：

```
$.ajax({
    type: 'POST',
    url: 'index.php?page=page',
    data: data,
    success: function(callback_data) {
        // ...
    },
    error: function(jqXHR, textStatus, errorThrown) {
        // ...
    }
}); 
```

请参阅[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)与[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# ios - 无法为 UIBarButtonItem 设置图像

> ID：11274052
> 
> 赞同：9
> 
> 时间：2012-06-30T12:25:59.283
> 
> 标签：ios, objective-c, iphone, uitableview, uibarbuttonitem

我正在尝试为我的 UIBarButtonItem 设置图像，但我无法做到这一点。我尝试了两次，在第一种情况下，我将图像放在正确的位置，但是当我单击按钮时没有任何反应（它应该弹出一个新窗口，但没有任何效果）。有一段我用过的代码：

```
UIImage *faceImage = [UIImage imageNamed:@"plus_button.png"];
    UIButton *face = [UIButton buttonWithType:UIButtonTypeCustom];
    face.bounds = CGRectMake( 0, 0, faceImage.size.width, faceImage.size.height );
    [face setImage:faceImage forState:UIControlStateNormal];
   UIBarButtonItem *faceBtn = [[[UIBarButtonItem alloc] initWithCustomView:face]initWithImage:faceImage style:UIBarButtonItemStylePlain target:self action:@selector(addProduct:)];

    self.navigationItem.leftBarButtonItem = faceBtn; 
```

在第二种情况下，我在按钮上设置了图像，新窗口按原样出现，但不仅有我想要的自定义图像，而且还显示“边框”，看起来图像被放在默认按钮的中心。显然，我只想要我的形象，而不是边界，只想要我的形象。我在第二种情况下使用了一段代码：

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc]initWithImage:faceImage style:UIBarStyleDefault target:self action:@selector(addProduct:)];

    self.navigationItem.leftBarButtonItem = addButton; 
```

请帮我解决问题，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T13:12:46.260

试试这个...改变它的方法，根据你的图像

```
UIButton *button1=[UIButton buttonWithType:UIButtonTypeCustom];
[button1 setFrame:CGRectMake(10.0, 2.0, 45.0, 40.0)];
[button1 addTarget:self action:@selector(showLeft:) forControlEvents:UIControlEventTouchUpInside];
[button1 setImage:[UIImage imageNamed:@"left-arrow-button.png"] forState:UIControlStateNormal];
UIBarButtonItem *button = [[UIBarButtonItem alloc]initWithCustomView:button1];
self.navigationItem.leftBarButtonItem = button; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-15T15:20:39.243

或者......只需编写两行 iOS 8 Swift 代码。（甚至可能在 iOS 7 中工作）

```
 let doneButtonAsLeftArrow = UIBarButtonItem(image: UIImage(named: "LeftArrow24x24.png"), style: .Plain, target: self, action: "doneButtonPushed")
    navigationItem.leftBarButtonItem = doneButtonAsLeftArrow 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T12:32:02.093

我已经修改了您的代码并测试了条形按钮中显示的图像。请自行尝试。如果您在这方面遇到任何问题，请告诉我。

```
 UIImage *faceImage = [UIImage imageNamed:@"Badge.png"];
    UIButton *face = [UIButton buttonWithType:UIButtonTypeCustom];
    face.bounds = CGRectMake( 0, 0, faceImage.size.width, faceImage.size.height );
    [face addTarget:self action:@selector(showAlerts) forControlEvents:UIControlEventTouchUpInside];
    [face setImage:faceImage forState:UIControlStateNormal];
    UIBarButtonItem *faceBtn = [[UIBarButtonItem alloc] initWithCustomView:face];    
    self.navigationItem.leftBarButtonItem = faceBtn; 
```

编辑：我在答案中添加了一行。我刚刚在日志中打印了一条消息“嗨”。这是工作。你能试试吗？

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-23T04:20:37.633

任何人都接受的答案的 Swift 版本

```
var settingsButton = UIButton.buttonWithType(UIButtonType.Custom) as UIButton
settingsButton.frame = CGRect(origin: CGPointZero, size: CGSize(width: 36, height: 36))
settingsButton.setImage(image, forState: UIControlState.Normal)
settingsButton.addTarget(self, action: "buttonActionHere:", forControlEvents: UIControlEvents.TouchUpInside)

let rightBarButtonItem = UIBarButtonItem(customView: settingsButton)
navigationItem.setRightBarButtonItem(rightBarButtonItem, animated: true) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T12:33:06.513

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc]initWithImage:faceImage style: UIButtonTypeCustom target:self action:@selector(addProduct:)];

    self.navigationItem.leftBarButtonItem = addButton; 
```

您正在创建一个默认按钮，您需要创建一个`UIButtonTypeCustom`类型按钮...

# android - 更改 Listview 项目项目文本颜色

> ID：11274055
> 
> 赞同：4
> 
> 时间：2012-06-30T12:26:05.513
> 
> 标签：android

嗨，我正在使用 listview，它有多个动态添加的项目。我想改变 listitem 的文本颜色任何想法

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
       android:layout_height="wrap_content"
       android:background="#659EC7">

    <ImageView android:id="@+id/icon" android:layout_width="72px"
        android:layout_height="wrap_content"
                android:layout_marginTop="5px" />

    <TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
        android:orientation="vertical" 
                android:paddingTop="5px" 
                android:paddingBottom="5px">

        <TextView android:id="@+id/item1" android:layout_width="match_parent"
            android:layout_height="wrap_content" 
                         android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView android:id="@+id/item2" android:layout_width="match_parent"
            android:layout_height="wrap_content" 
                       android:textAppearance="?android:attr/textAppearanceSmall"
            android:paddingTop="30px" />
            <View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/darker_gray"/>

    </TwoLineListItem>

</LinearLayout> 
```

我正在使用 2linelistIem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:36:02.247

使用这种技术来动态改变颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/black" /> <!-- focused -->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/black" /> <!-- focused and pressed-->
    <item android:state_pressed="true" android:drawable="@color/green" /> <!-- pressed -->
    <item android:drawable="@color/black" /> <!-- default -->
</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:41:24.410

这是我编写和使用的代码：它为所有其他状态保留了 android 样式。它只是用您想要的颜色覆盖透明状态：

[具有自定义背景的列表视图的可绘制图层列表](https://stackoverflow.com/questions/7108451/listview-item-with-list-selector-background-as-layerlist-drawable)

正如您在我的问题中看到的那样，聚焦状态存在一个小错误，但它仍然是我见过的最好的解决方案：D

# javascript - 从浏览器使用 Google 搜索 API

> ID：11274056
> 
> 赞同：1
> 
> 时间：2012-06-30T12:26:13.477
> 
> 标签：javascript, ajax, search

是否有任何好的客户端 JS 库可以访问 Google 的搜索 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:31:14.057

我找到了一个很好的例子，如何在客户端使用[谷歌自定义搜索 API 。](https://developers.google.com/custom-search/v1/getting_started#data-json)从文档：

```
<html>
  <head>
    <title>JSON/Atom Custom Search API Example</title>
  </head>
  <body>
    <div id="content"></div>
    <script>
      function hndlr(response) {
      for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        // in production code, item.htmlTitle should have the HTML entities escaped.
        document.getElementById("content").innerHTML += "<br>" + item.htmlTitle;
      }
    }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key=YOUR-KEY&cx=017576662512468239146:omuauf_lfve&q=cars&callback=hndlr">
    </script>
  </body>
</html> 
```

您必须将您的 API 密钥定义为

> 你的钥匙

和您的查询词，如

> q=汽车

脚本 src 属性中的参数，结果将通过定义的 javascript 函数“hndlr()”加载到“内容”div 中，该函数是来自 Google API 的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:29:05.427

尝试谷歌搜索 API [https://developers.google.com/web-search/](https://developers.google.com/web-search/)

# protocol-buffers - 将协议缓冲区集成到 WAF

> ID：11274070
> 
> 赞同：8
> 
> 时间：2012-06-30T12:27:54.383
> 
> 标签：protocol-buffers, waf

我设法`.proto`像这样编译我的文件：

```
def build(bld):
    bld(rule='protoc --cpp_out=. -I.. ${SRC}', source='a.proto b.proto', name='genproto') 
```

似乎工作得很好，当我对源文件进行更改时，它们会被重新编译等等。但结果将是调用的文件`build/a.pb.cc`，`build/b.pb.cc`我需要将其包含到我的主程序源列表中。当然我知道如何从我的协议缓冲区文件名手动构造它们，但我不认为这是要走的路。谁能给我一个提示？

最好的问候，菲利普

**更新**

在 IRC 人员的耐心帮助下，我设法构建了一个工具，如下所示。

```
#!/usr/bin/env python
# encoding: utf-8
# Philipp Bender, 2012

from waflib.Task import Task
from waflib.TaskGen import extension 

"""
A simple tool to integrate protocol buffers into your build system.

    def configure(conf):
        conf.load('compiler_cxx cxx protoc_cxx')

    def build(bld):
    bld.program(source = "main.cpp file1.proto proto/file2.proto", 
            target = "executable") 

"""

class protoc(Task):
    run_str = '${PROTOC} ${SRC} --cpp_out=. -I..'
    color = 'BLUE'
    ext_out = ['.h', 'pb.cc']

@extension('.proto')
def process_protoc(self, node):
    cpp_node = node.change_ext('.pb.cc')
    hpp_node = node.change_ext('.pb.h')
    self.create_task('protoc', node, [cpp_node, hpp_node])
    self.source.append(cpp_node)
    self.env.append_value('INCLUDES', ['.'] )

    self.use = self.to_list(getattr(self, 'use', '')) + ['PROTOBUF']

def configure(conf):
    conf.check_cfg(package="protobuf", uselib_store="PROTOBUF", 
            args=['--cflags', '--libs'])
    conf.find_program('protoc', var='PROTOC') 
```

您还可以在 bugtracker 中找到它：

[https://code.google.com/p/waf/issues/detail?id=1184](https://code.google.com/p/waf/issues/detail?id=1184)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T23:11:47.287

这种处理记录在 Waf 书中（查找“idl”）。

但是我很确定 protobuf 工具会受到社区的欢迎，所以我建议您尝试创建一个并将其提交给 bug tracker 或 IRC 以供审查。这样，您将有更少的维护负担，更短的 wscript。

我希望使用这样的工具：

```
bld(
 name="protobufs",
 features="protoc cxx",
 source=["protobuf/a.proto", "protobuf/b.proto"],
 includes=["protobuf", "..."],
)

bld(
 target="test",
 features="cxx cxxprogram",
 source="test.cpp",
 use="protobufs", # uses the generated C++ code, links to -lprotobuf
) 
```

或类似的东西。

# python - 在提交期间删除错误查询

> ID：11274072
> 
> 赞同：2
> 
> 时间：2012-06-30T12:28:07.973
> 
> 标签：python, postgresql, sqlalchemy

我有 postgresql db，我正在更新大约 100000 条记录。我使用 session.merge() 插入/更新每条记录，并在每 1000 条记录后进行一次提交。

```
i=0
for record in records:
    i+=1
    session.merge(record)
    if i%1000 == 0:
        session.commit() 
```

这段代码工作正常。在我的数据库中，我有一个带有 UNIQUE 字段的表，并且我插入了一些重复的记录。发生这种情况时会引发错误，说明该字段不是唯一的。由于我一次插入 1000 条记录，回滚不会帮助我跳过这些记录。有什么办法可以跳过重复记录的 session.merge() （当然除了解析所有记录以找到重复记录）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:00:07.177

我想您已经知道这一点，但让我们从一条教条开始：您指定该字段必须是唯一的，因此您必须让数据库检查唯一性或处理错误，以免发生这种情况。

检查唯一性：

```
if value not in database:
    session.add(value)
session.commit() 
```

不检查唯一性并捕获异常。

```
try:
    session.add(value)
    session.commit()
except IntegrityError:
    session.rollback() 
```

第一个有竞争条件。我倾向于使用第二种模式。

现在，回到你的实际问题，如果你想确保数据库中列的唯一性，那么显然你将不得不让数据库自己确保加载值的实际唯一性，或者让数据库给你一个错误，你处理它。

这显然比将 100k 个对象添加到会话中并仅提交它们要慢得多，但这就是数据库的工作方式。

您可能需要考虑在尝试加载数据库之前对正在加载的数据进行按摩，以确保唯一性。这样，当你加载它时，你就不需要检查唯一性了。例如，如果您从 csv 或文本文件加载，则使用命令行工具非常容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:02:05.413

您可以使用 SAVEPOINT 进行“部分回滚”，SQLAlchemy 通过 begin_nested() 公开它。你可以这样做：

```
for i, record in enumerate(records):
    try:
        with session.begin_nested():
            session.merge(record)
    except:
        print "Skipped record %s" % record
    if not i % 1000:
        session.commit() 
```

以上注意事项：

1.  在 python 中，我们*从*不做“i = i+1”的事情。使用`enumerate()`.
2.  `with session.begin_nested():`同说`begin_nested()`，则`commit()`若无例外，或`rollback()`若有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:47:43.133

您可能需要考虑按照 PostgreSQL 文档中的[这个示例的方式编写一个函数。](http://www.postgresql.org/docs/9.1/interactive/plpgsql-control-structures.html#PLPGSQL-UPSERT-EXAMPLE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T06:06:23.217

这是最适合我的选项，因为具有重复唯一键的记录数量很少。

```
def update_exception(records, i, failed_records):
    failed_records.append(records[i]['pk'])
    session.rollback()
    start_range = int(round(i/1000,0) * 1000)
    for index in range(start_range, i+1):
        if records[index]['pk'] not in failed_records:
            ins_obj = Model()
            try:
                session.merge(ins_obj)
            except:
                failed_records.append(json_data[table_name][index-1]['pk'])
                pass 
```

说，如果我在 2375 遇到错误，我将 2375 记录的主键“pk”存储在 failed_records 中，然后我从 2000 重新提交到 2375。这似乎比一个一个提交要快得多。

# node.js - Nodester 上 expressjs 的问题

> ID：11274074
> 
> 赞同：0
> 
> 时间：2012-06-30T12:28:42.993
> 
> 标签：node.js, express, nodester

我刚开始使用 nodester 作为 nodejs 应用程序 paas，我遇到了几个问题。

让我澄清一下，我的本地机器运行节点 0.7，而在 nodester 上我使用的是节点 0.6.17

以下代码在我的 server.js 文件中，由平台执行：

```
app.get('/static', function(req,res) {
  res.sendfile('views/myFile.html',function(error){
    if(err)
      res.send('An error has occurred');
  });
});
app.get('/', function(req,res){
  res.render('index.jade');
}); 
```

其余代码是 Express.js 生成的代码，特别是配置是

```
app.set('views', __dirname + '/views');
  app.use(express.static(__dirname + '/public'));
  app.set('view engine', 'jade');
  app.set('view options', {layout: 'layout.jade'}); //added by me but with no results 
```

如果我在本地机器上运行此配置，一切正常，'/' 路由完美地将 index.jade 视图发送到正确的 layout.jade 视图中。'/static' 路由发送 index.html 没有问题。

但是，如果我在 nodester 上运行此代码（在编辑 package.json 并要求节点 0.6 之后），我会得到不同的结果：

1.  '/' 路由不会渲染 layout.jade，而只会渲染 index.jade。这很奇怪，因为我刚刚编辑了由 express 生成的 layout.jade 文件！

2.  '/static' 路由只是抛出一个错误，我可以用回调来捕获它。所以没有发送html文件。

我哪里错了？我可能错过了一些东西..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:35:49.517

## 回答2

在 nodester 中，节点进程可能从不同的目录运行，从而`process.cwd()`不等于您的应用程序的根目录。

要解决此问题，请使用以下代码

```
app.get('/static', function(req,res) {
  res.sendfile(__dirname + '/views/myFile.html',function(error){
    if(err)
      res.send('An error has occurred');
  });
}); 
```

## 回答 1

与上述类似的问题。所以，请检查并告诉我。

# php - 无法从源安装 php 扩展

> ID：11274078
> 
> 赞同：0
> 
> 时间：2012-06-30T12:29:22.057
> 
> 标签：php

我从源代码安装了 php 5.3.10，它运行良好。但是当我尝试从源包安装扩展时`xdebug`，`mongo`我在运行后得到以下输出`phpize`

```
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions 
```

请注意，这些只是警告而不是失败。所以我继续使用`./configure`，然后`make`再使用`make install`。一条消息是这样来的

```
Installing shared extensions:     /usr/local/lib/php/extensions/debug-zts-20090626/ 
```

我检查了上面的目录并且扩展的共享对象（.so）在那里。所以我添加了我的路径`php.ini`并重新启动了apache。**但是没有安装扩展。**

我用谷歌搜索，发现警告是因为`phpize` 路径不正确。我检查了这个 `phpize --help`，它显示了路径`/usr/local/bin/phpize`

php-config 版本也是 5.3.10 `php-config -v`，它显示`version 5.3.10`

出了什么问题，这些警告是什么意思？

**编辑：** 当我尝试安装这些扩展时，`pecl`我可以成功安装它们，我可以看到它们安装在输出中`phpinfo()`

但我`mcrypt`不能通过 pecl 安装，所以我需要一些安装扩展的方法`phpize`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T12:18:59.850

我知道这是一个老问题，但要解决这个问题，只需运行`./configure`带有选项的命令`"--with-php-config"`。

```
./configure --with-php-config=/usr/bin/php-config 
```

# php - 前端 UI 以加快加载速度

> ID：11274079
> 
> 赞同：0
> 
> 时间：2012-06-30T12:29:24.210
> 
> 标签：php, javascript, css, user-interface

我在 MySQL 数据库中有数据，我想在我的网站上显示这些数据。

数据可以在表格中表示，可以排序过滤等。

还需要一个搜索选项。（如自动完成）

我在 GWT 上制作了 UI，这对于排序等来说非常快。

但是对于开始我的 Webhosting 是 Hostgator 上的共享托管（所以不能运行 GWT）我应该使用哪个框架来获得漂亮和快速的 UI。我读过关于 twitter bootstrap 的信息，但它可以处理过滤、排序等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:27:22.973

Bootstrap 是一个响应式框架，用于在客户端开发用户界面。

任何排序或过滤都可以通过使用客户端 JavaScript 框架（如 jQuery）或使用 PHP、Asp.Net 等的服务器端来完成。

# php - Uploadify，详细说明使用 PHP 脚本上传的文件（服务器端）

> ID：11274084
> 
> 赞同：1
> 
> 时间：2012-06-30T12:29:32.240
> 
> 标签：php, ajax, post, uploadify

[我使用官方文档](http://www.uploadify.com/documentation/uploadify/implementing-uploadify/)实现了 Uploadify 。

它工作得很好，但我想详细说明使用 PHP 脚本（服务器端）上传的文件，并使用 HTML 表单将某些内容返回到页面。有命中吗？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:01:02.787

作为默认的 uploadify 将文件发送到 uploadify.php ，上传的文件将被移动到您想要的路径。您还可以在 uploadify.php 中添加一些额外的功能来编辑文件……例如缩小上传的图片或创建缩略图。

编辑：如何从 uploadify.php 接收东西

这是我的做法：

首先你需要从uploadify.php 输出一些东西，所以在php 的底部添加这样的东西：

```
echo "Hello World"; 
```

现在在您的带有 javascript 的 html 代码中，响应位于“ [onUploadSuccess](http://www.uploadify.com/documentation/uploadify/onuploadsuccess/) ”中，这是我的一个项目的 javascript (jQuery) 源代码。您需要编辑它/更改路径，以便它适合您。

```
$('#file_upload1').uploadify({
 'multi'    : false,
'formData'      : {'f' : dat},
    'swf'      : './js/uploadify/uploadify.swf',
    'uploader' : './uploadify.php',
 'onUploadSuccess' : function(file, data, response) {
        alert(response);
    }
}); 
```

上传后，您将收到一条警报，其中将显示您从 uploadify.php 的输出 - 您可以将警报替换为其他功能以将响应嵌入您的站点。（有关更多信息，请参阅 jQuery [html](http://api.jquery.com/html/)函数）

# java - 如何使用 Lucene 索引和搜索结构文本文件？

> ID：11274087
> 
> 赞同：0
> 
> 时间：2012-06-30T12:29:41.307
> 
> 标签：java, lucene, indexing

这是我第一次使用 Lucene，我有一个这样的文本文件：

```
id,name,address,hobby
1,namm1,address1,football
2,namm2,address2,football
3,namm3,address3,football
4,namm4,address4,football
5,namm5,address5,football
6,namm6,address6,basketball
7,namm7,address7,basketball
8,namm8,address1,football
9,namm9,address8,swimming
... 
```

上面的文件是一个包含 1,000,000 行的文本文件。现在我想从文件中找到地址为`address1`，爱好为`football`的记录，然后将记录放入另一个文件中，如下所示：

```
1,namm1,address1,football
8,namm8,address1,football
... 
```

第一个文件非常大，所以一个接一个的查找记录会很慢。我想用 Lucene 为第一个文件建立一个索引（根据地址和爱好）。然后我可以快速找到地址为`address1`，爱好为的记录，并将其`football`放入一个新文件中。我从来没有用 Lucene 编程过。谁能给我一个类似的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:06:59.610

I don't think he needs to write an analyzer at all, he can just use java code to parse each line an put each value in the appropriate field, using one of the many built in analyzers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:51:47.303

这很简单。当您使用 Lucene 索引文件时，您可以定义自己的“分析器”。简而言之，分析器从源中提取信息并将其放入 lucene“文档”的“字段”中。

当您搜索某些内容时，您可以定义 Lucene 应该考虑哪些字段。

因此，您的解决方案是编写一个分析器，将每一列放入一个字段中。在查询中使用`MultiFieldQueryParser`and 指定字段名称。对于您的示例，查询将是

```
address:address1 hobby:football 
```

# iphone - 将贝宝移动快速结账与 iOS 集成

> ID：11274090
> 
> 赞同：2
> 
> 时间：2012-06-30T12:30:39.067
> 
> 标签：iphone, ios, xcode, ios5, paypal

嗨，我正在创建一个通过贝宝网关完成购物车和付款的应用程序。我尝试阅读贝宝库下的一些文档..但我找不到它...有人知道简单的教程或任何示例代码吗用于在我的应用程序中集成贝宝网关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:34:46.127

您可以直接访问 www.x.com 在开发人员菜单下选择 MPL 库，这是在您的应用程序中集成 paypal 的简单方法。随附的文档将为您提供逐步集成的信息。按照简单的付款方式，将有帮助..我希望这个答案能帮助你......

# iphone - Facebook FQL 子查询

> ID：11274099
> 
> 赞同：0
> 
> 时间：2012-06-30T12:32:06.983
> 
> 标签：iphone, sql, facebook-fql

我使用以下查询来获取我已接受邀请的所有事件：

```
NSString *eventQuery = @"SELECT eid, name, creator FROM event WHERE eid IN 
( SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='attending' )"; 
```

这很好用，但现在我也想知道创建者的名字。由于创建者字段只是创建者的用户标识，因此我必须执行另一个子查询。

有人可以帮我弄这个吗？

非常感谢您的参与！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:46:57.830

您需要发出 FQL 多查询来获取此信息。我不确定你是如何在 Objective C 中做到这一点的，但 FQL 语法是：

```
{ 
   "user_events":
      "SELECT eid, name, creator FROM event WHERE eid IN 
        (SELECT eid FROM event_member WHERE uid=me() and rsvp_status='attending')",
   "event_creators":
       "SELECT name, id FROM profile WHERE id IN 
         (SELECT creator FROM #user_events)"   
 } 
```

您没有返回“可能”事件的原始问题是因为`rsvp_status='maybe'`不正确。`rsvp_status='unsure'`是正确的语法。

# php - 如何根据下拉选择在 div 标签内加载图像

> ID：11274101
> 
> 赞同：0
> 
> 时间：2012-06-30T12:32:18.190
> 
> 标签：php, ajax, yii

我想根据下拉选择在 div 标签内加载图像，我使用了 Yii 的内置 AJAX 功能来做到这一点。这是我到目前为止所做的代码，

视图中的下拉菜单：-

```
echo $form->dropDownList($model2,'name[0]', CHtml::listData(Stationery::model()-    >findAll('category_id = 54'), 'category_id', 'name'), array('empty'=>'--Please Select--'),
            array(
                 //'options'=>array($selected=>array('selected'=>'selected')),
                 'ajax'=>array(
                 'type'=>'POST',
                 'dataType'=>'json',
                 'url'=>CController::createUrl('order/echoeimage'),
                 //'imageUrl'=>Yii::app()->theme->baseUrl.'/images/storlocator_banner.png',
                 'data'=>array('position'=>'js: $(this).val()'),
                 //'update'=>'#img',
                 'success'=>'function(data) {
                     $("#img").html(data.total);
                 }',
                )));
<div id="img">

 </div> 
```

控制器功能：-

```
 public function actionEchoeimage()
               {
                     /*Here goes your code to load the image*/
                       //$path = Yii::app()->theme->baseUrl."/images/storlocator_banner.png";
                      // echo CHtml::image($path); 

                       echo CJSON::encode(array(
                                'total'=>"value",
                                ));

               } 
```

它没有按预期工作！那么如何使它工作？

# android - STREAM_RING 的 Android setStreamVolume 在 RINGING 时并不总是有效

> ID：11274105
> 
> 赞同：2
> 
> 时间：2012-06-30T12:33:37.933
> 
> 标签：android, volume, android-audiomanager

我正在尝试做这个简单的应用程序，它允许手机在接收 Android 4 (ICS) 下的通知时响铃但不播放声音。为此，我将铃声/通知流设置为 0（静音）。接到电话时，我将铃声音量设置为最大（pe 7），然后在空闲时将其调回 0（静音）。

为此，我使用了这个简单的代码。

```
public class ReceiverClass extends BroadcastReceiver
{   
   @Override public void onReceive(Context context, Intent intent)
   {      
      if ("android.intent.action.PHONE_STATE".equals(intent.getAction()))
      {  String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);      
         AudioManager amanager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

         if (TelephonyManager.EXTRA_STATE_IDLE.equals(state))
         {  amanager.setStreamVolume(AudioManager.STREAM_RING, 0, 0);           
         }
         else if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
         {  amanager.setStreamVolume(AudioManager.STREAM_RING, 7, 0);           
         }        
      }
   }  
} 
```

问题是它有时有效，有时无效。我找不到理由。我给自己打了十次电话，铃声可能是 6 次。其他 4 次被静音。奇怪的？？

我知道我的应用程序可能需要“太长时间”才能将 setStreamVolume 调用为 7，所以这可能是有时会准时（和声音）有时为时已晚（所以它不响）的方式，因为调用已经以 0 开始体积。那么，有没有办法重启铃声呢？有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:20:54.913

我必须说你应该尝试给你的广播接收器高优先级。可以像下面这样完成

```
 <intent-filter android:priority="1000">
   <action android:name="android.intent.action.PHONE_STATE" />
 </intent-filter> 
```

参考链接>> [最高优先级](http://developer.android.com/reference/android/content/IntentFilter.html#SYSTEM_HIGH_PRIORITY)

它可以/可能解决您的问题。

# scala - 具有另一个类的自我类型的类有意义吗？

> ID：11274106
> 
> 赞同：6
> 
> 时间：2012-06-30T12:33:45.180
> 
> 标签：scala, self-type

```
scala> class A
defined class A

scala> class B {this: A => }
defined class B

scala> new B
<console>:10: error: class B cannot be instantiated because it does not conform
to its self-type B with A
             new B
             ^ 
```

Class`B`将 self 类型设置为 class `A`，因此 class `B`（或其子类）必须扩展 class`A`以创建`B`. 但这有可能吗，因为一个子类`B`只能扩展一个类（这是 class `B`）？

所以这让我想到一个问题，在任何情况下将一个类的 self 类型声明给另一个类是否有意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T12:50:18.540

你的观察是正确的，这个定义不能导致具体的实现，因为你不能混合两个类，只有特征。所以简短的回答是“不”，两者都应该是一个特征。

Stackoverflow 上有几个关于自我类型的问题。这些是两个有用的：

*   [什么是 Scala 惯用的： trait TraitA extends TraitB 或 trait TraitA { self: TraitB => }](https://stackoverflow.com/questions/7250374/what-is-more-scala-idiomatic-trait-traita-extends-traitb-or-trait-traita-self)
*   [特征继承和自我类型注释之间的区别](https://stackoverflow.com/questions/2224932/difference-between-trait-inheritance-and-self-type-annotation)

在第二个问题中，Ben Lings 给出了一个很好的答案，他引用了[Spiros Tzavellas](http://www.tzavellas.com/techblog/2009/12/07/using-self-types-for-trait-composition/)博客中的以下段落：

> 总之，如果我们想将方法实现移动到 trait 中，那么我们就有可能用支持具体方法实现并且与 trait 的主要职责无关的抽象方法污染这些 trait 的接口。解决这个问题的方法是将这些抽象方法移动到其他特征中，并使用自类型注释和多重继承将这些特征组合在一起。

例如，如果`A`（假设它现在是一个特征而不是一个类！）是一个记录器。您不想`B`公开公开混入`A`. 因此，您将使用 self 类型而不是 mixin。在实现中，`B`您可以调用日志记录 API，但从外部看是不可见的。

* * *

另一方面，您可以使用以下形式的组合：

```
trait B {
    protected def logger: A
} 
```

现在的不同是

*   `B``logger`想使用其功能时必须参考
*   的子类型`B`可以访问`logger`
*   `B`并且`A`不要在命名空间中竞争（例如，可以有同名的方法而不会发生冲突）

我想说自类型是 Scala 的一个相当外围的特性，在很多情况下您不需要它们，并且您可以选择这样的选项来实现几乎相同的目标，而无需自类型。

# c# - 转换复杂表达式 ,bool> 到表达式 ,布尔>

> ID：11274108
> 
> 赞同：0
> 
> 时间：2012-06-30T12:34:02.837
> 
> 标签：c#, architecture, expression, n-tier-architecture

我的框架中有 DTOmodel。BLL 和 View 根本看不到 EntiyModel。我想在图层之间传输和转换复杂表达式。

这是BLL中的一个方法，像这样......

```
//// BLL(Service)
Public PersonDTO getAll(Expression<Func<PersonDTO, bool>> whereCondition)
{

   return _repository.getAll(whereCondition);

}

// DLL(Repository)

Public PersonDTO getAll(Expression<Func<PersonDTO, bool>> whereCondition)
{

   Expression<Func<Person, bool>> NewCondition = ?/ How Convert DTOwhereCondition ???

   return DataContext.Persons(NewCondition);

} 
```

///// 我想像这样在 PersonDTO 上创建复杂的表达式：

```
var persons = serive.getPersons(i => i.PersonDetailsDTO.Count == 3); 
```

///// 我的课程

```
 public class Person
       {
        public Int32 Id { get; set; }
        public String FirstName { get; set; }
        public String LastName { get; set; }
        public List<PersonDetail> PersonDetails { get; set; }
       }

    public class PersonDTO
      {
        public Int32 Id { get; set; }
        public String FirstName { get; set; }
        public String LastName { get; set; }
        public List<PersonDetailDTO> PersonDetailsDTO { get; set; }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:01:31.367

这是最基本的解决方案。如果您需要更多功能，也许您可​​以从那里开始工作。到目前为止，它允许选择性地提供一个委托来解析映射的属性名称，但属性类型必须相同。

用法：

```
var mappedExpression =
    ExpressionMapper<Person>.MapFrom(originalDtoExpression, null);

// or:

var mappedExpression =
    ExpressionMapper<Person>.MapFrom(originalDtoExpression,
            entityPropertyName => someMapper.ResolveDtoPropertyName(entityPropertyName)); 
```

执行：

```
public class ExpressionMapper<TTarget> : ExpressionVisitor
{
    protected ExpressionMapper(Type sourceType, Func<string, string> resolveTargetMemberNameFunc)
    {
        this.SourceType = sourceType;
        this.ResolveTargetMemberNameFunc = resolveTargetMemberNameFunc ?? (cur => cur);
    }

    public Func<string, string> ResolveTargetMemberNameFunc { get; private set; }

    public Type SourceType { get; private set; }

    public static Expression MapFrom<TSource>(Expression sourceExpression, Func<string, string> resolveTargetMemberNameFunc)
    {
        return new ExpressionMapper<TTarget>(typeof(TSource), resolveTargetMemberNameFunc).Visit(sourceExpression);
    }

    public static Expression<Func<TTarget, bool>> MapFrom<TSource>(Expression<Func<TSource, bool>> sourcePredicateExpression, Func<string, string> resolveTargetMemberNameFunc)
    {
        return Expression.Lambda<Func<TTarget, bool>>(
                MapFrom<TSource>(sourcePredicateExpression.Body, resolveTargetMemberNameFunc),
                Expression.Parameter(typeof(TTarget), sourcePredicateExpression.Parameters[0].Name));
    }

    protected override Expression VisitMember(MemberExpression node)
    {
        var sourceMemberName = node.Member.Name;
        var targetNode = this.Visit(node.Expression);
        var targetMemberName = this.ResolveTargetMemberNameFunc(sourceMemberName);
        var targetMember = targetNode.Type.GetMember(targetMemberName).FirstOrDefault();

        if (targetMember == null)
        {
            throw new NotSupportedException(String.Format("The source type '{0}' cannot be mapped to the target type '{1}', because that target type has no member '{2}'.", node.Expression.Type.Name, targetNode.Type.Name, targetMemberName));
        }

        return Expression.MakeMemberAccess(targetNode, targetMember);
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        if (node.Type == this.SourceType)
        {
            return Expression.Parameter(typeof(TTarget), node.Name);
        }

        return node;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T05:09:01.460

我使用 AutoMapper 将使用 DTO 的表达式转换为实体。表达式映射是 AutoMapper.Extensions.ExpressionMapping 包的一部分。当您调用 AddAutoMapper（它本身是 IServiceCollection 的扩展方法）时，您基本上必须调用 AddExpressionMapping

# c++ - 如何在类中声明和初始化静态常量字符串？

> ID：11274113
> 
> 赞同：0
> 
> 时间：2012-06-30T12:36:02.237
> 
> 标签：c++, string, initialization, constants, declaration

我正在为 c++ 类编写一个 Yatzy 程序。我们应该使用 std::cout 打印不同骰子的值。我想要做的就是保存一个常量字符串，然后只保存那个常量来打印骰子，而不是使用：

```
std::cout << "-------\n|     |\n|  *  |\n|     |\n-------\n" 
```

我想要一个具有该值的常量字符串并执行以下操作：

```
std::cout << theConstantString; 
```

通用编程再次获胜！

```
-------
|     |
|  *  |
|     |
------- 
```

我的解决方案对我来说似乎不是最理想的。这是相关代码：

YatzyIO.h

```
class YatzyIO
{
    private:

    // Define die constants
    static const std::string dieOnePrint;
    static const std::string dieTwoPrint;
    static const std::string dieThreePrint;
    static const std::string dieFourPrint;
    static const std::string dieFivePrint;
    static const std::string dieSixPrint;

    void dieOne();
    void dieTwo();
    void dieThree();
    void dieFour();
    void dieFive();
    void dieSix(); 
```

};
（那里的代码比那个多，我只是删掉了任何不相关的东西，我认为无论如何我都应该这样做）

现在，在 YatzyIO.cpp 中任何函数的实现之外：

```
const std::string YatzyIO::dieOnePrint = "-------\n|     |\n|  *  |\n|     |\n-------\n";
const std::string YatzyIO::dieTwoPrint = "-------\n|  *  |\n|     |\n|  *  |\n-------\n";
const std::string YatzyIO::dieThreePrint = "-------\n| *   |\n|  *  |\n|   * |\n-------\n";
const std::string YatzyIO::dieFourPrint = "-------\n| * * |\n|     |\n| * * |\n-------\n";
const std::string YatzyIO::dieFivePrint = "-------\n| * * |\n|  *  |\n| * * |\n-------\n";
const std::string YatzyIO::dieSixPrint = "-------\n| * * |\n| * * |\n| * * |\n-------\n"; 
```

最后在 YatzyIO.ccp 我有这些功能：

```
void YatzyIO::dieOne()
{
    //output die side 1
    std::cout << dieOnePrint;
} 
```

（每个骰子+1，看起来很相似）

到目前为止，这只是我完成的 3 个实验中的第 2 个，第三个用数组替换了这些常量。我在实验 1 中评分，其中也包含此代码，我的老师说（我在这里翻译，因为我是瑞典语，所以无论翻译中丢失了什么，我很抱歉！）：

“你最好使用成员变量来保存不同的骰子输出。我建议你将不同的行（形成不同的输出）保存在你的成员变量中。”

他什么意思？有更好的方法吗？我无法在头文件中初始化非整数常量。我尝试了很多不同的方式，因为老实说，我的解决方案对我来说似乎不是那么理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:14:59.853

您的老师可能建议所有不同的输出实际上是一小部分线条的组合，您可以只维护这些线条并根据需要组合解决方案，而不是维护整个骰子图像。

例如`-------\n`作为每个不同组合的上下边框出现，`| * * |\n`可以用来生成4、5、6的上下线，也可以是6的中间元素。`| * |\n`可以是1、3的中间线, 5 并且您将需要一个空行来表示 1 的顶部和底部行，以及 2 和 4 中的中间行......您可以将它们存储为成员，然后根据这些图元生成骰子图。

例如，要绘制 6，您需要执行以下操作：

```
std::cout << line        // -------
          << two_dots    // | * * |
          << two_dots    // | * * |
          << two_dots    // | * * |
          << line;       // ------- 
```

这样，您只需要存储 4 个基元而不是所有完整的骰子值。

# ios - XCode/Storyboard:创建模态视图

> ID：11274116
> 
> 赞同：0
> 
> 时间：2012-06-30T12:36:17.363
> 
> 标签：ios, xcode4, modalviewcontroller

我正在阅读苹果开发者库，并想使用像苹果在图片中显示的子菜单：

![在此处输入图像描述](../Images/532747dc7aa2e41e839352661fc423a6.png)

第一个问题：那是模态视图吗？如果是的话，如何创造这样的东西？这个子菜单有它自己的控制器和视图，还是上面视图中声明的所有内容？我正在使用故事板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:39:21.960

不，这是一个`UIActionSheet`，它没有 nib 文件或类文件，你可以这样使用它

```
UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Title" 
                                                   delegate:self 
                                          cancelButtonTitle:@"cancel"
                                     destructiveButtonTitle:nil
                                          otherButtonTitles: nil];
[sheet showInView:self.view];

//Function gets called when user taps on a button
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{

} 
```

# ios - 在 UITextField 之外的任何地方关闭触摸键盘

> ID：11274119
> 
> 赞同：27
> 
> 时间：2012-06-30T12:36:47.657
> 
> 标签：ios, cocoa-touch, uitextfield

我正在开发一个 iPad 应用程序，该应用程序具有大量`UIViewControllers`, `UITableViews`（带有`accessoryViews`of的单元格`UITextFields`）等。其中许多`UIViewControllers`出现在导航层次结构中。

有许多不同的地方`UITextFields`出现，包括 as `UITableViewCell` `accessoryViews`。

我想设计一种有效的策略来在用户触摸`UITextField`当前正在编辑的外部时关闭键盘。我搜索了键盘关闭技术，但尚未找到解释一般键盘关闭策略如何工作的答案。

例如，我喜欢这种方法，将以下代码添加到任何 ViewController 中：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"* * * * * * * * *ViewControllerBase touchesBegan");

    [self.view endEditing:YES]; // dismiss the keyboard

    [super touchesBegan:touches withEvent:event];
} 
```

...但是这种技术不能处理例如触摸发生在`UITableView`正在显示的 a 内的情况。因此，我需要添加一些代码以在触摸`endEditing`a 时调用`UITableView`等等。这意味着我的应用程序将大量撒上大量代码，以在`UIElements`触摸其他各种键盘时关闭键盘。

我想我可以尝试找出需要拦截触摸和关闭键盘的所有不同位置，但在我看来，可能有更好的设计模式来处理 iOS 键盘关闭事件。

任何人都可以分享他们在这件事上的经验，并推荐一种特定的技术来通用处理整个应用程序中的键盘关闭吗？

非常感谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-30T18:39:13.660

您的视图层次结构位于`UIWindow`. `UIWindow`负责在其方法中将触摸事件转发到正确的视图`sendEvent:`。让我们创建一个`UIWindow`to override的子类`sendEvent:`。

```
@interface MyWindow : UIWindow
@end 
```

该窗口将需要对当前第一响应者的引用（如果有的话）。您可能还决定使用`UITextView`，因此我们将观察来自文本字段和文本视图的通知。

```
@implementation MyWindow {
    UIView *currentFirstResponder_;
}

- (void)startObservingFirstResponder {
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(observeBeginEditing:) name:UITextFieldTextDidBeginEditingNotification object:nil];
    [center addObserver:self selector:@selector(observeEndEditing:) name:UITextFieldTextDidEndEditingNotification object:nil];
    [center addObserver:self selector:@selector(observeBeginEditing:) name:UITextViewTextDidBeginEditingNotification object:nil];
    [center addObserver:self selector:@selector(observeEndEditing:) name:UITextViewTextDidEndEditingNotification object:nil];
}

- (void)stopObservingFirstResponder {
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center removeObserver:self name:UITextFieldTextDidBeginEditingNotification object:nil];
    [center removeObserver:self name:UITextFieldTextDidEndEditingNotification object:nil];
    [center removeObserver:self name:UITextViewTextDidBeginEditingNotification object:nil];
    [center removeObserver:self name:UITextViewTextDidEndEditingNotification object:nil];
}

- (void)observeBeginEditing:(NSNotification *)note {
    currentFirstResponder_ = note.object;
}

- (void)observeEndEditing:(NSNotification *)note {
    if (currentFirstResponder_ == note.object) {
        currentFirstResponder_ = nil;
    }
} 
```

窗口将在初始化时开始观察通知，并在释放时停止：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        [self commonInit];
    }
    return self;
}

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        [self commonInit];
    }
    return self;
}

- (void)commonInit {
    [self startObservingFirstResponder];
}

- (void)dealloc {
    [self stopObservingFirstResponder];
} 
```

我们将覆盖`sendEvent:`以根据事件“调整”第一响应者，然后调用 super`sendEvent:`以正常发送事件。

```
- (void)sendEvent:(UIEvent *)event {
    [self adjustFirstResponderForEvent:event];
    [super sendEvent:event];
} 
```

如果没有第一响应者，我们不需要对第一响应者做任何事情。如果有第一响应者，并且它包含一个触摸，我们不想强迫它辞职。（记住，可以同时有多个触摸！）如果有第一响应者，并且新的触摸出现在另一个可以成为第一响应者的视图中，系统会自动正确处理，所以我们也想忽略这种情况。但是如果有一个第一响应者，并且它不包含任何触摸，并且一个新的触摸出现在一个*不能*成为第一响应者的视图中，我们想让第一响应者辞职。

```
- (void)adjustFirstResponderForEvent:(UIEvent *)event {
    if (currentFirstResponder_
        && ![self eventContainsTouchInFirstResponder:event]
        && [self eventContainsNewTouchInNonresponder:event]) {
        [currentFirstResponder_ resignFirstResponder];
    }
} 
```

在第一响应者中报告事件是否包含触摸很容易：

```
- (BOOL)eventContainsTouchInFirstResponder:(UIEvent *)event {
    for (UITouch *touch in [event touchesForWindow:self]) {
        if (touch.view == currentFirstResponder_)
            return YES;
    }
    return NO;
} 
```

在无法成为第一响应者的视图中报告事件是否包含新触摸几乎同样简单：

```
- (BOOL)eventContainsNewTouchInNonresponder:(UIEvent *)event {
    for (UITouch *touch in [event touchesForWindow:self]) {
        if (touch.phase == UITouchPhaseBegan && ![touch.view canBecomeFirstResponder])
            return YES;
    }
    return NO;
}

@end 
```

一旦你实现了这个类，你需要改变你的应用程序来使用它而不是`UIWindow`.

如果您正在创建`UIWindow`in `application:didFinishLaunchingWithOptions:`，则需要`#import "MyWindow.h"`在您的顶部`AppDelegate.m`，然后更改`application:didFinishLaunchingWithOptions:`为创建 a`MyWindow`而不是 a `UIWindow`。

如果您要`UIWindow`在 nib 中创建，则需要将窗口的自定义类设置为`MyWindow`在 nib 中。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-21T07:30:59.327

这是一种更简单有效的处理方法。这适用于视图控制器中的任何 UITextField。你甚至可以将它添加到你的基本视图控制器（如果你有的话），它会像一个魅力一样工作。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];

    if (![[touch view] isKindOfClass:[UITextField class]]) {
        [self.view endEditing:YES];
    }
    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T12:59:02.780

我通常使用以下

第一的：

在您的实现文件中包含以下扩展名，`findFirstResponder`将帮助您找到第一个响应者

```
@implementation UIView (FindFirstResponder)
- (UIView*)findFirstResponder
{
    if (self.isFirstResponder) {
        return self;     
    }
    for (UIView *subView in self.subviews) {
        UIView *responder = [subView findFirstResponder];
        if (responder)
            return responder;
    }

    return nil;
}
@end 
```

然后在您的视图控制器中`viewDidLoad`添加以下内容

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(keyboardDidShow:) 
                   name:UIKeyboardDidShowNotification 
                 object:nil];

    [center addObserver:self selector:@selector(keyboardDidHide:) 
                   name:UIKeyboardWillHideNotification 
                 object:nil];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

通知功能将是这样的

```
- (void) keyboardDidShow:(NSNotification*)notification
{    
    UIButton *button = [[UIButton alloc] init];

    CGRect rect = self.view.bounds;

    button.frame = rect;
    button.backgroundColor = [UIColor blackColor];
    button.tag = 111;
    UIView *currentResponer = [self.view findFirstResponder];
    [button addTarget:currentResponer action:@selector(resignFirstResponder) forControlEvents:UIControlEventTouchUpInside];

    [self.view insertSubview:button belowSubview:currentResponer];
}

- (void) keyboardDidHide:(NSNotification*)notification
{
    [[self.view viewWithTag:111] removeFromSuperview];
} 
```

当键盘显示时，我`UIButton`在当前第一响应者下方添加一个，此按钮操作将隐藏键盘，

这里的一个限制是`UITextField`必须存在，`self.view`但是您可以通过一些修改来适应这种技术以满足您的需要，希望它可以帮助您

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T13:41:46.713

我实际上真的很喜欢 Omar 的技术——它工作得很好——但我在我的例子中添加了几行。

```
- (void)keyboardDidShow:(NSNotification*)notification
{
    UIButton *button = [[UIButton alloc] init];

    CGRect rect = self.view.bounds;

    button.frame = rect;
    button.backgroundColor = [UIColor blackColor];

    [button setAlpha:0.5f];
    button.tag = 111;
    UIView *currentResponder = [self.view findFirstResponder];

    [self.view bringSubviewToFront:currentResponder];

    if (currentResponder == _descriptionTextView) [_descriptionTextView setTextColor:[UIColor whiteColor]];

    [button addTarget:currentResponder action:@selector(resignFirstResponder) forControlEvents:UIControlEventTouchUpInside];

    [self.view insertSubview:button belowSubview:currentResponder];
} 
```

我在他的解决方案中添加了三行（见上文）：

1.  将按钮的 alpha 设置为 0.6，这样我就可以看到它后面的一些 viewController。
2.  将 currentResponder 放在前面，这样我的其他视图都不会出现在按钮前面。
3.  切换我的 UITextView 的颜色，使文本更清晰（我的 UITextView 具有清晰的背景，因此文本显示不清晰）。

无论如何，只有微小的变化，但希望这些有所帮助。谢谢奥马尔。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-07T16:01:58.350

为了辞去当前的第一响应者，我尝试使用 endEditing，但在设置第一响应者之后遇到了一些问题。然后我使用了一段时间的递归方法在 UIView 类别方法中找到第一个响应者：

```
- (UIView *)getFirstResponder {

    if (self.isFirstResponder) {
        return self;
    }

    for (UIView *subView in self.subviews) {
        UIView *firstResponder = [subView getFirstResponder];

        if (firstResponder != nil) {
            return firstResponder;
        }
    }

    return nil;
} 
```

一旦响应者返回，我就可以调用 resignFirstResponder 了。

就在今天，我的一个工作伙伴在这里向我展示了一个更好的方法：http: [//overooped.com/post/28510603744/i-had-completely-forgotten-about-nil-targeted](http://overooped.com/post/28510603744/i-had-completely-forgotten-about-nil-targeted)

只需调用这个：

```
[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil]; 
```

很棒的一个班轮！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-13T07:22:49.413

在斯威夫特 3

```
override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {

    self.view.endEditing(true)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-30T13:30:15.710

可能是我不明白你想要什么，但`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`方法可以帮助你解除键盘

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-16T18:45:06.500

向文本字段控件添加“textFieldDidChange”通知方法。

> [textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingDidEnd];

为我工作

# javascript - 单击时突出显示表中所有具有相同数据的行

> ID：11274123
> 
> 赞同：1
> 
> 时间：2012-06-30T12:37:20.803
> 
> 标签：javascript, row, highlight, click

我想在单击相同数据的位置时突出显示所有行，例如。单击 1b 时 -> 突出显示行：2 和 4。单击 Bev 时 -> 突出显示行：3 和 4

再次单击-> 行高亮消失。

顺便提一句。请注意，悬停效果也适用于行跨度。

```
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <style type="text/css">
    table {border-collapse:collapse; border: 1px solid black;}
    td {padding: 5px; border: 1px solid black;}
    tr:hover, .hover {background: #eee;}
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script type="text/javascript">
    $(function() {      
      var maximumCells = 0;
      var amountOfCells = 0;
      var foundCells;      
      $("tr").each(function() {
        foundCells = $(this).find("td");
        amountOfCells = foundCells.length;
        if (amountOfCells > maximumCells) maximumCells = amountOfCells;
      });      
      $("td").hover(function() {        
        $el = $(this);        
        if ($el.siblings("td").length < (maximumCells-1)) {
            $el.parent().prev().find("td[rowspan]").addClass("hover");
        }        
      }, function() {       
        $el.parent().prev().find("td[rowspan]").removeClass("hover");        
      });      
    });
  </script>
</head>
<body>
  <table>
    <tr>
      <th>lesson</th>
      <th>class</th>
      <th>absent</th>
      <th>substitute</th>
    </tr>
    <tr>
      <td>1</td>
      <td>---</td>
      <td>---</td>
      <td>---</td>
    </tr>
    <tr>
      <td rowspan="2">2</td>
      <td>1b</td>
      <td>John</td>
      <td>Max</td>
    </tr>
    <tr>
      <td>3a</td>
      <td>Bev</td>
      <td>Abbi</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1b</td>
      <td>Bev</td>
      <td>Robbie</td>
    </tr>
  </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:00:26.817

```
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <style type="text/css">
    table {border-collapse:collapse; border: 1px solid black;}
    td {padding: 5px; border: 1px solid black;}
    tr:hover, .hover {background: #eee;}
    ​.yellow{
        background-color:yellow;
    }​
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script type="text/javascript">
      $(function() {      
      var maximumCells = 0;
      var amountOfCells = 0;
      var foundCells;      
      $("tr").each(function() {
        foundCells = $(this).find("td");
        amountOfCells = foundCells.length;
        if (amountOfCells > maximumCells) maximumCells = amountOfCells;
      });      
      $("td").hover(function() {        
        $el = $(this);        
        if ($el.siblings("td").length < (maximumCells-1)) {
            $el.parent().prev().find("td[rowspan]").addClass("hover");
        }        
      }, function() {       
        $el.parent().prev().find("td[rowspan]").removeClass("hover");        
      });      
    });
    $("td").click(function(){
    clickedElement = $(this);
    $("tr").each(function() {

        tr = $(this);
        $(this).find("td").each(function() {
            if(!$(this).hasClass("yellow") && $(this).html()==$(clickedElement).html()){
                $(this).addClass("yellow");}            
            else if($(this).hasClass("yellow") && $(this).html()==$(clickedElement).html()){
                $(this).removeClass("yellow");}

        });

    });

    });
    ​
  </script>
</head>
<body>
  <table>
    <tr>
      <th>lesson</th>
      <th>class</th>
      <th>absent</th>
      <th>substitute</th>
    </tr>
    <tr>
      <td>1</td>
      <td>---</td>
      <td>---</td>
      <td>---</td>
    </tr>
    <tr>
      <td rowspan="2">2</td>
      <td>1b</td>
      <td>John</td>
      <td>Max</td>
    </tr>
    <tr>
      <td>3a</td>
      <td>Bev</td>
      <td>Abbi</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1b</td>
      <td>Bev</td>
      <td>Robbie</td>
    </tr>
  </table>
</body>
</html>​ 
```

测试：http: [//jsfiddle.net/4vLTP/](http://jsfiddle.net/4vLTP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:22:25.027

我有这样的事情：

[http://jsfiddle.net/DamianS1987/G2trb/](http://jsfiddle.net/DamianS1987/G2trb/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T15:26:04.030

现在试试。[http://jsfiddle.net/DamianS1987/G2trb/](http://jsfiddle.net/DamianS1987/G2trb/)

# ruby-on-rails - 在 Rails 中使用带有 .html.erb 文件的 rake notes

> ID：11274125
> 
> 赞同：6
> 
> 时间：2012-06-30T12:37:28.047
> 
> 标签：ruby-on-rails

我开始使用 Rails (3.2.3)，最近发现了 rake notes 功能。

这适用于 .rb 文件，注释如下：

```
 # TODO ... 
```

根据[文档](http://guides.rubyonrails.org/command_line.html#notes)，它也适用于 .erb 文件。我曾尝试在 .html.erb 视图文件中使用它，如下所示：

```
 <!-- TODO ... --> 
```

但这不起作用。应该是？关于可能出现问题的任何想法？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T15:20:20.697

你这样做：

```
<% #TODO ... %> 
```

`rake notes`仅检测 Ruby 注释，因此只需将 Ruby 注释粘贴到您的 Erb 视图中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:59:46.970

当我使用 <% 和 # 之间有一个空格时，它会破坏 Rails 2.3 版代码周围的其他 HTML 元素。但是，您应该能够使用 <%#（没有空格），这是在 erb 中进行评论的正确方法，请查看：[http ://en.wikipedia.org/wiki/ERuby](http://en.wikipedia.org/wiki/ERuby)

还

"*啊啊。明白了。我试过 <%= #TODO ...%>。非常感谢。您能否对 '=' 的含义提供任何见解（即 <%= ... %> 与 <% ... %>? – 德里克·希尔 6 月 30 日 23:25* “

**回复上述问题：**

<%=..%> 之间的内容被解释为 Ruby 代码并执行，执行结果被转换为字符串并打印在输出中，代替 <%=..%>。而 <%..%> 之间的内容被解释为 Ruby 代码并执行，输出中不显示任何结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T07:15:51.807

TextMate（适用于 Mac）包括检测 HTML 注释（）等语言的 TODO 包

# mysql - 插入到选择不起作用

> ID：11274126
> 
> 赞同：1
> 
> 时间：2012-06-30T12:37:28.260
> 
> 标签：mysql, sql, select, insert

```
INSERT INTO `competitions` (`name`) VALUES SELECT `name` FROM `competitions` 
```

产生以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“SELECT `name`FROM ”附近使用正确的语法`competitions`

我可能忽略了一些微不足道的事情，但我真的看不出我在这里做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:40:09.293

正确的语法是

```
INSERT INTO `competitions` (`name`) SELECT `name` FROM `competitions` 
```

参考： [INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T12:40:14.237

`VALUES`从您的查询中删除！

该语句的语法是：

```
INSERT INTO tbl_temp2 (fld_id)
    SELECT tbl_temp1.fld_order_id
    FROM tbl_temp1 WHERE tbl_temp1.fld_order_id > 100; 
```

正确的语法是：

```
INSERT INTO `competitions` (`name`)
    SELECT `name` FROM `competitions` 
```

# ftp - 无法关闭输出流

> ID：11274130
> 
> 赞同：3
> 
> 时间：2012-06-30T12:38:25.387
> 
> 标签：ftp, aptana, aptana3, ftps

新手在这里。我昨天下载并安装了 Aptana Studio 3，我不断从我的 MAC（Lion 10.7.4）上传到我的远程服务器（win 2008 R3 服务器）上收到以下消息：**无法关闭输出流**我只找到一个参考并尝试了补救没有任何运气。FTPS 可以使用其他程序正常工作。

# ruby-on-rails - Rails time_zone_select 下拉菜单显示 GMT 而不是 UTC

> ID：11274132
> 
> 赞同：2
> 
> 时间：2012-06-30T12:38:39.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

我用 time:time 和 time_zone:string 创建了一个模型。具体来说，我使用以下方法创建：

```
rails generate scaffold Alarm time:time time_zone:string 
```

我创建了一个如下表格：

```
<%= form_for(@alarm) do |f| %>
  <div class="field">
    <%= f.label :time %><br />
    <%= f.time_select :time %>
  </div>
  <div class="field">
    <%= f.label :time_zone %><br />
    <%= f.time_zone_select :time_zone,
        ActiveSupport::TimeZone.us_zones,
        default: "Pacific Time (US & Canada)" %>
  </div>
<% end %> 
```

当我看到表格时，time_zone_select 显示一个下拉列表，其中包含 GMT 而非 UTC 的时区（例如“(GMT-08:00) 太平洋时间”）。

我认为默认情况下，时区以 UTC 显示。如何改为以 UTC（例如（UTC-08:00）太平洋时间）显示？

这是一个新项目，我没有接触任何配置文件。

我正在使用 ruby​​-1.9.3-p0、rails 3.2.6 和 pg 0.13.2。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:16:53.820

时间以 UTC 格式存储，但以您当地的时区显示。

要在视图中将时间恢复为 UTC，请使用以下方法：

```
local_to_utc(time, dst=true) 
```

[http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local_to_utc](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local_to_utc)

或者在你的全局更改它`application.rb`：

```
config.active_record.default_timezone = "UTC" 
```

这决定了在从数据库中提取日期和时间时是使用 Time.local（如果设置为 :local）还是 Time.utc（如果设置为 :utc）。Rails 的默认值为 :utc，尽管 Active Record 在 Rails 外部使用时默认为 :local。

# ruby-on-rails-3 - 如何使用带有私有 API 密钥的 Rails shopify_app gem？

> ID：11274135
> 
> 赞同：2
> 
> 时间：2012-06-30T12:39:06.797
> 
> 标签：ruby-on-rails-3, shopify

我正在尝试使用带有私有 API 密钥的 Rails *shopify_app* gem。gem 的文档提到可以做到这一点，但没有说明如何做到这一点。这些说明仅适用于 Shopify 合作伙伴帐户。

对于私有 api 密钥，似乎无法指定*返回 url*。这会导致以下响应片段被发回：

```
{"error":"invalid_request","error_description":"The redirect_uri and application url must have matching hosts"} 
```

我环顾四周，但无法找到解决方案。似乎这应该在 Shopify API wiki 上得到更好的记录。我很感激这方面的任何帮助。

干杯，

-托梅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:16:34.690

您是否尝试请求许可？您应该能够使用为私钥生成的密码作为访问令牌，因为已经授予权限。

# c# - 字典的替代品

> ID：11274138
> 
> 赞同：4
> 
> 时间：2012-06-30T12:39:39.880
> 
> 标签：c#, dictionary

我的应用程序要求我打印 N 次值 X。

所以，我可以这样做：

```
Dictionary<int, string> toPrint = new Dictionary<int, string>();
toPrint.Add(2, "Hello World"); 
```

...稍后我可以使用此信息打印 2 页，均带有文本值“Hello World”。

我遇到的问题是 Dictionary 真的希望第一个值是键：

```
Dictionary<TKey, TValue> 
```

因此，如果我想添加 2 个带有文本值“Hello World”的页面，然后再添加 2 个带有“Goodbye World”的页面，我有一个问题 - 它们的 TKey 值都是 2，这会导致运行时错误（“一个项目已经添加了相同的密钥”）。

会导致错误的逻辑：

```
Dictionary<int, string> toPrint = new Dictionary<int, string>();
toPrint.Add(2, "Hello World");
toPrint.Add(2, "Goodbye World"); 
```

我仍然需要这个概念/逻辑来工作，但由于 Key 的原因，我显然不能使用 Dictionary 类型。

有没有人有任何解决方法的想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T12:42:55.250

我认为 Tuple 非常适合这项工作。

```
List<Tuple<int, string>> toPrint = new List<Tuple<int, string>>();
toPrint.Add(new Tuple<int, string>(2, "Hello World"); 
toPrint.Add(new Tuple<int, string>(2, "Goodbye World"); 
```

而且...您可以轻松地将其包装到一个自包含的类中。

```
public class PrintJobs
{
  // ctor logic here

  private readonly List<Tuple<int, string>> _printJobs = new List<Tuple<int, string>>();

  public void AddJob(string value, int count = 1) // default to 1 copy
  {
    this._printJobs.Add(new Tuple<int, string>(count, value));
  }

  public void PrintAllJobs()
  {
    foreach(var j in this._printJobs)
    {
      // print job
    }
  }
} 
```

}

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-30T12:43:50.173

在这种情况下使用 List<T> 就足够了

```
class PrintJob
{
    public int printRepeat {get; set;}
    public string printText {get; set;}
    // If required, you could add more fields
}

List<PrintJob> printJobs = new List<PrintJob>()
{
    new PrintJob{printRepeat = 2, printText = "Hello World"},
    new PrintJob{printRepeat = 2, printText = "Goodbye World"}
}

foreach(PrintJob p in printJobs)
    // do the work 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T12:52:06.150

您可以使用字典，但键应该是字符串，而不是 int；毕竟这是独一无二的！

也就是说，您没有进行查找，因此字典是不合适的。不过，在这种情况下，史蒂夫的回答可能是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T12:51:16.840

好吧，我相信你在这里有几个选择......

1.）在您的场景中，字符串本身似乎是关键，因此您可以颠倒参数的顺序

```
new Dictionary<string, int> () 
```

2.) 如果对您的情况有意义，请使用元组甚至自定义类/结构。元组 Chris 的用法已经向您展示过，所以我将向您展示我想到的“类解决方案”。

```
public class MyClass
{
    public string MyTextToPrint { get;set; }
    public string NumberOfPrints { get;set; }
    // any other variables you may need
} 
```

然后只需创建这些类的列表，其工作方式与元组几乎相同，它只是一种更标准化的方式，因为您可能在其他地方也需要相同的功能，或者可能想要进一步操作数据。

# configuration - 在 Ubuntu 11.10 上安装码头

> ID：11274140
> 
> 赞同：0
> 
> 时间：2012-06-30T12:40:03.030
> 
> 标签：configuration, jetty, ubuntu-11.10

我已经在 Ubuntu 服务器 11.10 上安装了 Jetty。当我启动 Jetty 时，我没有收到任何错误，一切都开始正常。控制台输出为：

```
 sudo /etc/init.d/jetty restart
 * Stopping Jetty servlet engine (was reachable on http://jetway:8080/). jetty
 * Jetty servlet engine stopped. jetty
   ...done.
 * Starting Jetty servlet engine. jetty
 * Jetty servlet engine started, reachable on http://jetway:8080/. jetty
   ...done. 
```

这是 /etc/init.d/jetty 的截断版本

```
NO_START=0
VERBOSE=yes
JETTY_USER=jetty
JETTY_HOST=0.0.0.0
JETTY_PORT=8080
JAVA_HOME="/usr/lib/jvm/java-7-oracle" 
```

当我尝试访问默认的码头 index.html 时，我的浏览器超时。我的错误文件不包含任何错误。我还下载了 jamwiki 的战争并将其放入 /webapps 文件夹。日志文件指出它正在初始化，但我也看不到它。我什至没有看到错误页面，它只是 Safari 的超时页面。我假设我缺少一些配置或设置错误，但我不知道在哪里看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:11:04.380

有一个fw去或类似的东西？

尝试在该机器上使用来自 localhost 的 wget 以查看是否响应

确保不是 JETTY_HOST 没有从该配置中获取更新，如果是这种情况，请编辑 jetty.xml 文件并更改相关连接器上的主机

# mysql - 带有条件限制和顺序的 cakephp 查询

> ID：11274146
> 
> 赞同：5
> 
> 时间：2012-06-30T12:40:40.990
> 
> 标签：mysql, cakephp, mysql-error-1064

我想使用`created`表中的字段检索 cakephp 中的最后 3 个注册用户`Users`。

在我的控制器中，我有：

```
$this->User->recursive = 1;
    $this->set('users',
        $this->User->find('all',
             array('conditions'=> array(
                  'limit' => 3,
                  'order' => array(
                  'created' => 'asc'
                  )
             )
         )
    )
); 
```

上面的代码在运行时返回此错误：

```
Syntax error or access violation: 1064 You have an error in your SQL 
syntax; check the manual that corresponds to your MySQL server 
version for the right syntax to use near 'order = ('asc')' at line 
```

我必须怎么做才能解决错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T12:53:56.760

尝试这样的事情：

```
$this->set('users', $this->User->find('all', array(
    'limit' => 3,
    'order' => 'User.created DESC',
    'recursive' => 1,
))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-29T06:52:20.900

**保持您的订单并限制条件数组之外，然后它将顺利运行。**

使用这种格式：

```
array(
'conditions' => array('Model.field' => $thisValue), //array of conditions
'recursive' => 1, //int
'fields' => array('Model.field1', 'DISTINCT Model.field2'),
'order' => array('Model.created', 'Model.field3 DESC'),
'group' => array('Model.field'), //fields to GROUP BY
'limit' => n, //int
'page' => n, //int
'offset' => n, //int
'callbacks' => true //other possible values are false, 'before', 'after'
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-15T11:19:17.777

您也可以通过以下 sql 查询轻松选择您的数据：

```
$sql = "SELECT * FROM users where recursive =1 order by created desc limit 0,3";
$users = $this->users->query($sql);

$this->set(compact('users')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T12:51:08.530

请尝试如下代码：

```
 $this->set('users', $this->User->find('all', array(
                                        'order' => 'created ASC',
                                        'limit' => 3  )
            )); 
```

CakePHP 的查找条件请参考[此链接](http://www.devdaily.com/php/cakephp-find-conditions-cakephp-find-all-list-count)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-07T07:07:54.613

当您首先限制数据时，您应该订购`DESC or ASC`. 另一种工作正常的简单方法

```
$this->set('datas',
    $this->Your_Model_Name->find('all',
        array (
            'conditions'    => array('Site_id' => $site_name),   //conditions here
            'fields'        => array('Date_time','Ac_1_Status','Tempin'),
            'order'         => array('id' => 'desc'),  // id desc or asc
            'limit'         => 15
        )
    )
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-12T08:41:18.203

```
$dashreport =  $this->Task->find('all', array('conditions' => 
                array('Task.throttle' => "Report", 'Task.status' => Null, 'Task.userid' => $this->Session->read('userid')),'order'=>array('Task.id DESC')
                ,'limit'=> 4)); 
```

# iphone - 放置自定义状态栏

> ID：11274147
> 
> 赞同：0
> 
> 时间：2012-06-30T12:40:59.743
> 
> 标签：iphone, ipad

![在此处输入图像描述](../Images/9c45ffd83549979219bef2d7473aace4.png)

您好，我想将自定义状态栏放在 iphone 的通知窗口中。苹果会允许这样做吗
？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:54:50.443

如果我理解正确，您想在通知中心放置一个小部件，如天气小部件......

目前，Apple 没有为此提供 API。您只能发布[通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)以显示在那里（如果用户以这种方式配置）。

# php - CakePHP 树行为问题 - 第一个条目

> ID：11274148
> 
> 赞同：1
> 
> 时间：2012-06-30T12:41:03.603
> 
> 标签：php, cakephp, tree, cakephp-2.2

我在 CakePHP 中启动树行为问题时遇到问题。`lft`我已经用,`rght`和`parent_id`列设置了表格。

我正在添加第一个条目，其他人可以在该`parent_id`列中引用该条目。但是，引用不能按我的意愿工作。

第一个条目按预期添加到数据库中。如果我不指定`parent_id`该列将`NULL`作为数据库值。和列也越来越`lft`有价值。我不确定这是否是它应该做的。`rght``NULL`

当我尝试在初始条目之后添加新条目时，保存将失败。

我试图在第一个条目上设置`lft`and`rght`列`1, 1`，`1, 2`但没有任何运气。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:59:59.243

您绝对不想设置 lft 和 rght。这些由框架处理。您是否让它们默认`null`为文档指定的？

我总是`parent_id`在使用树行为时设置，然后 CakePHP 会根据父 ID 自动处理树结构。如果您需要在分支内移动项目，则可以使用该行为的其他功能来执行此操作。

尝试设置`parent_id`然后保存。如果这不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T18:11:34.193

这很有趣，但这是 Cake php 中未记录的部分。文档说：树的顶部元素需要将 parent_id 设置为“null”。但是当您在编辑时保存元素时，重新排序不起作用，因为重新排序寻找孩子时有一个有趣的条件：

```
 if ($id === null && $Model->id) {
        $id = $Model->id;
    } elseif (!$id) {
        $id = null;
    } 
```

在 TreeBehavior 线 300 周围。

所以如果你用 id=>null 调用 reorder 并且你有一个 $Model->id ，那么实际的树项将只被重新排序。这是错误的，我想重新排序我的整个树，因为我已经更改了顶级类别项目的订单字段！我认为这是一种错误。

您必须将 id=>'' 设置为空，然后整个树将被重新排序。这就是你想要的。当您编辑顶部树项目并想要重新排序时，您必须使用 id=>'' 调用重新排序

```
 if(!empty($this->data['WebshopCategory']['parent_id'])){
            $this->reorder ( array('id' => $this->data['WebshopCategory']['parent_id'], 'field' => 'ordered', 'order' => 'ASC', 'verify' => true) );
        }else{
            $this->reorder ( array('id'=>'', 'field' => 'ordered', 'order' => 'ASC', 'verify' => true) );
        } 
```

它将重新排序整个树。注意：有很多树项目保存会变慢，所以你必须检查你的订单字段是否被更改。

# java - javacv 项目在 32 位和 64 位操作系统上的运行方式是否不同？

> ID：11274154
> 
> 赞同：2
> 
> 时间：2012-06-30T12:41:36.637
> 
> 标签：java, netbeans, opencv, javacv

我是 JavaCV API 的新手，它用作访问 OpenCV 的接口。我想知道执行使用*Netbeans*开发的同一个项目是否有一些差异（我知道应该有不同的jar文件应该添加到项目中）。

因为我使用*Netbeans*开发了一个项目，当我在 32 位机器上运行该应用程序时，它运行良好，但是当我尝试在 64 位操作系统上运行它时，有时它不会给出正确的输出。

请问有人能解释一下原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:16:44.253

项目可能会受到 CPU 速度的影响。我有几个项目发生过这种情况，通常是图形密集型项目。解决方案将取决于项目本身。“64 位机器更新。64 位机器具有更宽的数据路径、更宽的寄存器，以及 32 位机器不支持的大量功能（只是因为它们更新）。

# linux - 无法在 Linux 上的 Eclipse 中设置“部件标题字体”

> ID：11274159
> 
> 赞同：8
> 
> 时间：2012-06-30T12:42:23.870
> 
> 标签：linux, eclipse, font-size

Eclipse 中的每种字体看起来都很棒，但是选项卡的标题比我想要的要大。我尝试更改它，但 Eclipse 无法识别更改。要进行更改，我导航到 Preferences-> General-> Appearance-> Font and Colors。我编辑了“零件标题字体”，但即使预览没问题，更改也不会保留。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T14:40:30.470

如果您在使用 GTK for eclipse 的 Linux 上，您可以更改文件 ${ECLIPSE_PATH}/plugin/org.eclipse.platform_${version}/css/e4_default_gtk.css。如果您在其他操作系统上，您还可以找到相应的 css 文件。

寻找

```
.MPartStack {
    font-size: 11;
    swt-simple: false;
    swt-mru-visible: false;
} 
```

将字体大小更改为 9 或您想要的其他大小。重启eclipse后，视图标题栏字体大小会改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T00:12:01.427

首先解决方案：

我按照Eclipse 的 ArchLinux wiki 页面底部的[这个建议](https://wiki.archlinux.org/index.php/Eclipse#Eclipse_4.2.0_not_respecting_dark.2Fcustom_gtk_themes_resulting_in_white_background)为自己“解决”了这个问题，并从 /usr/share/eclipse/plugins/org.eclipse.platform_{版本号}/ 中删除所有 .css 文件css/

这让我的 GTK 主题可以完全控制并设置所有颜色和字体大小，这正是我想要的。

如果您想深入研究此问题的根本原因，请参阅以下链接：

*   [错误 344234 - DBCS4.1 无法优先更改视图标题字体](https://bugs.eclipse.org/bugs/show_bug.cgi?id=344234)
*   [更改 Eclipse “零件标题字体”（4.2 版）](http://www.xyzhou.com/it-lives/change-eclipse-part-title-font-version-4-2.html)
*   [Eclipse4/CSS](http://wiki.eclipse.org/Eclipse4/CSS)

最后一页可能有点混乱。最重要的是，他们已经转移到一个全新的主题系统，并且由于我可能永远无法理解的原因而留下了破碎的选项。

有关更多信息，只需谷歌“ [theming eclipse 4 with css](http://www.google.com/search?btnG=1&pws=0&q=theming%20eclipse%204%20with%20css) ”。

# php - 桌面应用程序 - PHP、HTML、MYSQL

> ID：11274160
> 
> 赞同：1
> 
> 时间：2012-06-30T12:42:35.017
> 
> 标签：php, xcode, titanium, desktop

我使用 PHP、HTML、CSS 和 MySQL 数据库编写了一个基于 Web 的程序。我现在想将其转换为适用于 Windows 和 Apple 的独立桌面应用程序。

我做了很多研究，并建议使用“Titanium”SDK，但是即使它包含 PHP，它也非常有限。特别是我不能`<?php ?>`在 html 文件中使用来显示 PHP 变量，`echo`不支持 PHP，而且似乎全局变量存在问题。虽然这些看起来很小，但它需要大量的重新编程，其中一些我不确定我是否可以重新实现对程序至关重要的功能。

有谁知道一个程序，类似于 XCode/Titanium 等，我可以将基于 Web 的程序捆绑在一起，作为 Windows 和 Apple 的独立桌面应用程序分发。我很高兴使用 SQLite 作为数据库，因为我已经在 Xcode 中使用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:50:09.983

[如果你只用锤子...](http://en.wikipedia.org/wiki/Law_of_the_instrument)

PHP 绝非用于构建桌面应用程序。它旨在处理请求/响应范例，例如 Web 服务器的范例。

理论上，您可以编写一个 PHP 命令行脚本，并让一个单独的 GUI 应用程序向 PHP 脚本发出命令行指令，但这样的解决方案会很混乱、很笨拙，并且需要您的用户安装 PHP。

最后，有一整套语言和开发平台更适合这项任务。C 及其所有变体、Java、.NET（用于 Windows 应用程序）.​​..

如果要开发桌面应用程序，请使用适合开发桌面应用程序的工具。另外，请参阅[这个问题](https://stackoverflow.com/questions/40870/why-dont-people-use-php-for-desktop-applications)。

# core-data - Core Data 版本控制/迁移失败并出现可可错误 134190

> ID：11274164
> 
> 赞同：3
> 
> 时间：2012-06-30T12:43:05.487
> 
> 标签：core-data

核心数据无法推断出映射模型？！
NSMappingModel *mappingModel = [NSMappingModel inferredMappingModelForSourceModel:sourceModel destinationModel:destinationModel error:&error];

错误报告 Domain=NSCocoaErrorDomain Code=134190 “无法完成操作。（Cocoa 错误 134190。）” UserInfo=0x6b9df80 {原因=源和目标属性类型不兼容，实体=事件，属性=内容}

* * *

Xcode 4.3.3 (core data (sqlite))
这个项目已经被设置来测试不同配置的版本控制，在一个设置了 NSURLIsExcludedFromBackupKey 的数据库和另一个存储在 /Documents 中的用户生成内容的数据库中包含非用户生成的内容文件夹。

我有一个版本化的核心数据模型，其中 version1 有一个配置（默认），因此在数据库文件和以下形式的 2 个实体上。

**配置**
默认事件，SubEvent
**事件**
内容 - NSString event_id - NSInteger16 subEvents - to-Many 关系目标 subEvent

**SubEvent**
content - NSString subEvent_id - NSInteger16 event - to-One 关系目标事件

Version2 更改如下
**配置**
默认事件，SubEvent
Backup - SubEvent
NoBackup Event
**事件**
内容 - Transformable CipherStringTransformer
event_id - NSInteger16 subEvents - Fetched Property - event_id = $FETCH_SOURCE.event_id

**子事件内容 - NSString **subEvent_id**
- NSInteger16 事件 - 获取的属性 - event_id = $FETCH_SOURCE.event_id**

 *** * *

如果我在 source-/destinationMode 中打印相应的属性，它们看起来像这样。

```
 po [[[[sourceModel entitiesByName] valueForKey:@"Event"] propertiesByName] valueForKey:@"content"]  
(id)(<NSAttributeDescription: 0x6b9ae30>),  
name content, isOptional 1, isTransient 0, entity Event, renamingIdentifier content, validation predicates (),  
warnings (),  
versionHashModifier (null)  
userInfo {},  
attributeType 700 , attributeValueClassName NSString, defaultValue (null)  

(lldb) po [[[[destinationModel entitiesByName] valueForKey:@"Event"] propertiesByName] valueForKey:@"content"]  
(id)(<NSAttributeDescription: 0x6e656b0>),  
name content, isOptional 1, isTransient 0, entity Event, renamingIdentifier content,  
validation predicates (),  
warnings (),  
versionHashModifier (null)  
userInfo {},  
attributeType 1800 , attributeValueClassName CipherTextTransformer, defaultValue (null) 
```

如果我只有从 NSString 到 Transformable 的切换，我将是 LightWeightMigration 没有任何拦截，但使用新配置是不可能的。**

# delphi - 如何在 Indy 中创建一个创建文件下载的页面？

> ID：11274165
> 
> 赞同：2
> 
> 时间：2012-06-30T12:43:28.753
> 
> 标签：delphi, indy

我有一个 Indy 服务器，当 URL 请求一个文件时让它发送一个文件是微不足道的，而且似乎总是能正常工作。

但我也在尝试设置第二种情况，如下所示：

`http://example.com/getFile.html?filename=myImage.png`

（这适用于动态生成的内容，因此请求静态文件不起作用。）我正在使用自定义 Indy 客户端并调用`TIdHTTP.Get`以检索所有这些文件，在第二个用例中，它似乎遵循此算法：

```
Roll 1D4\.  If you rolled 2 or higher, download correctly.
Otherwise, roll 1D6 against this table of Indy exceptions and
raise one of them.
If a random exception is raised, it MUST NOT be caught inside
of Indy code. 
```

到目前为止，常见的似乎是`EIdHTTPProtocolException`、`EIdClosedSocket`和`EIdNotConnected`，但我也见过其他一些。设置一个异常处理程序来捕获这些并重试下载有时会起作用，有时它只是引发更多异常，再次看似随机，背后没有确定性原则。

*使用静态下载用例永远不会*发生这种情况的事实告诉我，在第二个用例中可能有一些奇怪的事情发生在我的代码没有正确解释的情况下。

代码真的很简单。在客户端：

```
procedure TdmConnection.GetFile(const URL: string; stream: TStream);

  procedure Retry;
  begin
     sleep(100);
     stream.Size := 0; //clear any aborted partial download
     http.Get(URL, stream);
  end;

begin
   try
      http.Get(URL, stream);
   except
      on EIdClosedSocket do
        Retry;
      on EIdNotConnected do
        Retry;
      on EIdHTTPProtocolException do
        Retry;
   end;
end; 
```

在服务器端，请求运行一个生成文件的脚本（正确；我已经验证了该部分）并告诉 Indy 服务器将其作为 HTTP 响应返回。我尝试简单地打开 a`TFileStream`并将其分配给`Response.ContentStream`，并且尝试在对象上调用该`ServeFile`方法，`Response`但最终我仍然在客户端遇到相同的错误。服务器代码的相关部分如下所示：

```
 if lServeFile <> '' then begin //variable set by the script
     if lServeFile = '***' then
        response.ResponseNo := 404
     else begin
       response.ResponseNo := 200;
       response.ServeFile(AContext, lServeFile);
     end;
  end; 
```

任何有经验的 Indy 用户都知道我做错了什么吗？使用 Delphi XE 附带的库存 Indy 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T00:32:13.770

没关系，问题不在印地。经过进一步调试，我最终发现有两个线程都在使用 IdHTTP 组件，有时它们同时使用它。保证每个线程都有自己的 IdHTTP 解决了这个问题。

# iphone - 在 ios4.2 中解锁 iPhone 时，推送通知警报来应用程序无法打开

> ID：11274168
> 
> 赞同：0
> 
> 时间：2012-06-30T12:43:57.880
> 
> 标签：iphone, push-notification, push

我的应用程序以 UIAlertViews 的形式发送推送通知。当设备未锁定时，UIAlertViews 会出现两个按钮，如果用户点击右侧按钮，我的应用程序就会启动。

我注意到的是，如果设备被黑屏以节省电力并且用户点击主页按钮并且我的应用程序有一个推送通知警报，只有 OK 按钮在那里等待他，如果他滑动解锁设备我的警报正在 ios4.2 中关闭。

我们可以控制这个不关闭警报，而是让用户通过两个按钮关闭或查看来选择他的操作。

或 **编辑： ios4.2 和 ios5 中的默认行为是什么？**

如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:03:28.407

恐怕这是不可能的，这是苹果设计通知的方式，当设备被锁定时，用户无法选择关闭或打开应用程序

iOs5 有通知中心，在锁屏界面，用户可以滑动收到的通知，打开发送通知的应用

# android - 没有为库项目的 R.string 找到类定义

> ID：11274170
> 
> 赞同：0
> 
> 时间：2012-06-30T12:44:33.173
> 
> 标签：android

基本上，我有一个 android 项目，我将其用作另一个 android 项目中的库。问题是，当我运行我的普通 android 项目时，在运行时执行以下行：-

```
editor.putString(res.getString(R.string.pref_key_srate), "" + AudioParameters.suggestSampleRate()); // line in library project 
```

我得到了崩溃

```
06-30 13:23:25.878: E/AndroidRuntime(3325): java.lang.NoClassDefFoundError: org.puredata.android.service.R$string 
```

表示在另一个项目中作为库运行时找不到 R 文件。现在我不想用字符串文字替换所有 R.string 引用，而是希望它在运行时识别库的 R 文件。

知道如何解决这个问题吗？提前致谢

# jquery - 浏览器加载时自动加载 JS 通知

> ID：11274171
> 
> 赞同：0
> 
> 时间：2012-06-30T12:44:33.707
> 
> 标签：jquery

我已经从[这里](https://github.com/mickeyren/jquery-notifications)下载了这个多通知脚本。我想将此脚本用作用户在登录时通知的通知。但不是点击方法。我怎样才能改变并取得成功。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:50:42.430

如果我正确理解了您的问题，我认为您想在页面加载后立即加载/调用某些函数/执行某些代码。如果是，请使用 $(document).ready()。像这样的东西，

```
$(document).ready(/* your code */); 
```

PFB 链接了解更多详情，

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# android - 像在 ICS 中一样在 android 2.x 中创建下拉菜单的最佳方式

> ID：11274174
> 
> 赞同：14
> 
> 时间：2012-06-30T12:45:04.273
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich, drop-down-menu, popupmenu

我想创建带有下拉菜单的按钮，例如 ICS 上的 ActionBar 中的溢出菜单按钮。我有问题，因为 android 2.x 中没有 PopupMenu。使用 Spinner 的第二种方式，但它不适合我，因为 Spinner 总是在我的自定义背景或我选择的项目上显示第一个项目。我怎样才能实现它？一般来说，我想要 ContextMenu 但很少和位置点击视图。谢谢。

它看起来像这样： ![右上角的溢出菜单](../Images/29ee29f73cd896b5d3f9c73bd874efd5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T13:23:22.710

如果您的目的是重新创建一个操作栏，您可以查看[ActionBarSherlock](http://actionbarsherlock.com/)项目，该项目支持这些功能。

如果您希望能够在应用程序的任何位置弹出这样的菜单，您可以阅读[ActionBarSherlock](http://actionbarsherlock.com/)项目源代码中的[MenuPopupHelper](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/internal/view/menu/MenuPopupHelper.java)类实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T05:01:42.067

我将[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)用于此类事情。它比 PopupMenu 更有效，您只需给它一个菜单并使用`OnMenuItemClickListener.onMenuItemClick()`. 使用 PopupWindow，您可以提供内容视图并在较低级别处理点击。

尽管如此，它还是可以毫不费力地完成工作。该`showAsDropDown()`方法允许您根据需要将弹出窗口锚定到另一个视图（将其适当地定位为下拉菜单或弹出菜单）。它从 API 级别 1 开始就已经存在，并且在我所有的测试设备上都非常适合我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:02:51.287

您的要求的替代方法可能是，您创建一个列表视图，将其放置在您的按钮下并将其默认设置为不可见，当您单击按钮时，您可以切换列表视图的可见性....例如

```
button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (LISTVIEW.isShown()) {
                    LISTVIEW.setVisibility(View.INVISIBLE);
                } else {
                    LISTVIEW.setVisibility(View.VISIBLE);
                } 
```

让我知道这是否有帮助...

# django - 在Django中获取模型实例的值为NULL后如何防止代码显示错误？

> ID：11274178
> 
> 赞同：0
> 
> 时间：2012-06-30T12:46:11.297
> 
> 标签：django, django-models, django-forms

我正在编写我的views.py，我需要在其中通过以下代码获取模型实例：

```
model_instance = AlertCount.objects.get(user=request.user.username) 
```

但在第一次运行之后`python manage.py syncdb`。table 的字段最初是`empty`. 所以它显示了这个错误

```
DoesNotExist: AlertCount matching query does not exist 
```

这应该是显而易见的。`0`但是根据我的views.py方法，如果发生此错误，事件将在将所有字段传递给此模型实例后继续执行该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:52:29.843

如果我理解正确，你想做这样的事情：

```
try:
  model_instance = AlertCount.objects.get(user=request.user.username)
  # Set your local fields here
except AlertCount.DoesNotExist:
  #Set your local fields here to zero 
```

# php - PHP write Program for whatever Database

> ID：11274179
> 
> 赞同：1
> 
> 时间：2012-06-30T12:46:13.560
> 
> 标签：php, mysql, sql, postgresql, database-abstraction

one question about PHP Development. I am building up some Form Fields for Calculations. Jquery Calculates and sends the Integer Values to a PHP Script via ajax. This Scripts selects some values from a Database, calculates and returns the values to the form field.

Now the question. I am used to Mysql thus I´m using the PHP Mysql functions to select the values. Later the Datasource should be a Postgres SQL. Whats the best programming way to get independent from the datasource. Is there a kind of design pattern to use for this issue?

regards,

Tony

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:47:45.840

The Design Pattern you are looking for is [Query Object](http://martinfowler.com/eaaCatalog/queryObject.html):

> **An object that represents a database query.**
> 
> SQL can be an involved language, and many developers aren't particularly familiar with it. Furthermore, you need to know what the database schema looks like to form queries. You can avoid this by creating specialized finder methods that hide the SQL inside parameterized methods, but that makes it difficult to form more ad hoc queries. It also leads to duplication in the SQL statements should the database schema change.
> 
> A Query Object is an [interpreter](https://en.wikipedia.org/wiki/Interpreter_pattern) [Gang of Four], that is, a structure of objects that can form itself into a SQL query. You can create this query by referring to classes and fields rather than tables and columns. In this way those who write the queries can do so independently of the database schema and changes to the schema can be localized in a single place.

When you use a Query Object, there will be no SQL on the public API at all. The transformation of the Query Object into your DB vendor's appropriate SQL will happen under the hood. This will involve writing appropriate Adapters and is not limited to SQL Databases then.

* * *

A **alternative** would be to use something like [`Zend_Db_Select`](http://zendframework.com/manual/en/zend.db.select.html), which is an internal DSL for creating SQL queries.

Example from ZF Reference Guide:

```
$select = $db->select()
    ->from( ...specify table and columns... )
    ->where( ...specify search criteria... )
    ->order( ...specify sorting criteria... ); 
```

**But** while `Zend_Db_Select` (and [PDO](http://php.net/manual/en/book.pdo.php) mentioned elsewhere) abstract access to the used DB system to some degree, they still require you to know SQL and table structures. Unlike Query Object, using a DB abstraction layer like this **does not guarantee portability**.

Depending on what arguments you put into these methods, you may end up with Queries that wont be portable anymore, e.g. [when you use a specific DB vendor's dialect or functions in the queries.](https://encrypted.google.com/search?q=postgresql%20vs%20mysql)

So which to pick depends on your queries. If you know you only have standard queries, don't use Query Object because it is much more effort to implement. Use Query Object if you want maximum independence from the data source.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T12:56:39.177

It sounds like you're looking for [PDO](http://php.net/manual/en/book.pdo.php), the standard SQL abstraction layer for PHP.

# javascript - Javascript警报无法从后面的代码中运行

> ID：11274180
> 
> 赞同：0
> 
> 时间：2012-06-30T12:46:18.573
> 
> 标签：javascript, asp.net, vb.net

我正在从 asp.net(vb) 中的代码隐藏生成一个 javascript 警报框。

编码：

```
 Catch ex As Exception
                MesgBox("Error in uploading file due to following exception" & vbNewLine & ex.ToString)
                trans.Rollback()
            Finally
                conn.Close()
            End Try 
```

消息框功能如下：

```
Private Sub MesgBox(ByVal sMessage As String)
    Dim msgedtble As String = sMessage.Replace("\", "\\")
    msgedtble = msgedtble.Replace(vbNewLine, "\n")
    Page.ClientScript.RegisterStartupScript(Me.GetType,
 "myScripts",
 "<script language='javascript'>alert('" & msgedtble & "');</script>")

End Sub 
```

现在，当抛出异常时，以下脚本将附加在客户端 html 的 form 标记中：

```
 <script language='javascript'>alert('Error in uploading file due to following exception\nSystem.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'IX_AccountMaster'. Cannot insert duplicate key in object 'dbo.AccountMaster'.\nThe statement has been terminated.\n   at System.Data.Common.DbDataAdapter.UpdatedRowStatusErrors(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount)\n   at System.Data.Common.DbDataAdapter.UpdatedRowStatus(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount)\n   at System.Data.Common.DbDataAdapter.Update(DataRow[] dataRows, DataTableMapping tableMapping)\n   at System.Data.Common.DbDataAdapter.UpdateFromDataTable(DataTable dataTable, DataTableMapping tableMapping)\n   at System.Data.Common.DbDataAdapter.Update(DataTable dataTable)\n   at UploadAccountMasterXl.Button1_Click(Object sender, EventArgs e) in C:\\Users\\ssaa\\Documents\\Visual Studio 2010\\WebSites\\Dpp2012\\UploadAccountMasterXl.aspx.vb:line 57');</script> 
```

为什么这没有出现在我的浏览器（Firefox）中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:19:05.570

添加`Imports System.Web.Script.Serialization`到文件的顶部，然后试试这个：

```
Private Sub MesgBox(ByVal sMessage As String)
    Dim serializer as New JavaScriptSerializer()
    Dim msgedtble As String = serializer.Serialize(sMessage)
    Page.ClientScript.RegisterStartupScript(Me.GetType, "myScripts",
        "<script type='text/javascript'>alert(" & msgedtble & ");</script>")
End Sub 
```

Using JavaScriptSerializer should take care of the linebreaks, single quotes, and everything else we haven't already thought of.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:48:52.097

JavaScript 不允许字符串常量跨越换行符。

在您的服务器端代码中，您将不得不将错误消息中的换行符替换为“\n”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T13:12:41.977

要继续 Pointy 给出的答案，您的消息包含`'`您需要转义的字符。

试试这个...

```
 msgedtble = msgedtble.Replace(vbNewLine, "\n").Replace("'","\'") 
```

`type='text/javascript'`拥有而不是`language='javascript'`......虽然这不是绝对必要的，但它也更好。

# java - 在 Android 上使用 SQLite 插入 50 万条记录

> ID：11274182
> 
> 赞同：1
> 
> 时间：2012-06-30T12:46:43.373
> 
> 标签：java, android, sqlite

我正在制作一个逐行读取文件并将记录插入数据库的应用程序。记录的数量大约是一百万。问题是整个过程大约需要两个小时。

我能做些什么来加快这个过程？

```
public long insertTable(int id,String word) {
    ContentValues wordValues = new ContentValues();
    wordValues.put(COLUMN_D, id);
    wordValues.put(COLUMN_WORD, word);
    return this.sqliteDBInstance.insert(TABLE_ENGLISH, null, wordValues);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:50:33.353

将您的 sql 语句封装在 a 中**`Transaction`**，它将以惊人的速度加快数据库操作。因为在使用 SQLite Transaction 时，整个操作只创建一个**日志文件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:50:36.723

我建议使用[OrmLite](http://ormlite.com/) 使用 sqlite 让生活更美好 希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:21:34.450

使用[InsertHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)和一个事务。InsertHelper 非常有效，因为它使用已编译的语句并且可以避免创建对象。在数据库事务中执行此操作，它会快 500 倍。

# symfony - 访问未映射到对象的表单的“集合字段”中的额外字段

> ID：11274184
> 
> 赞同：1
> 
> 时间：2012-06-30T12:47:10.943
> 
> 标签：symfony

我正在使用`symfony2`.

我有一个表单，其中包含一个`From Type`带有 name的集合`OptionType`。像这样的东西：

```
$form = $this->createFormBuilder($defaultData)
    ->add('short_title', 'text')
    ->add('options', 'collection', array('type' => new OptionType(),'allow_add' => true, 'allow_delete' => true, 'by_reference' => false))
    ... 
```

`OptionType`根据定义，映射到`Option`类的对象。

现在我需要添加一个`OptionType`不是`Option`类成员的额外字段。对于这种情况，我将此行添加到以下`buildForm`功能`OptionType`：

```
$builder->add('optionImage', 'file', array('property_path' => false)); 
```

它有效，但是，问题是我如何访问这个新领域的数据？

如果这个额外的字段直接添加到表单中，答案是：

```
$form->get('optionImage')->getData(); 
```

但在这里我有一个集合，`From Type`这个代码不起作用。

答案之一是“不要映射`OptionType`到`Option`（使用没有类的表单）并取回提交的数据数组，并自己处理这些数据”；但由于某种原因，我不想使用这个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:03:31.810

尝试这个：

```
$form['options'][0]['optionImage']->getData(); 
```

其中 0 是集合中的偏移量

# android - IllegalStateException “适配器的内容已更改，但 ListView 没有收到通知”

> ID：11274185
> 
> 赞同：0
> 
> 时间：2012-06-30T12:47:12.677
> 
> 标签：android, android-listview, android-cursoradapter

我`ListView`和`SimpleCursorAdapter`

**我得到的错误**：-

> java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在 ListView(2131361944, class android.widget.ListView) 和 Adapter(class com.pocketpharmacist.adapter.DrugClassesListAdapter)]

**什么时候：-**

在我`Fragment`的中，我启用了使用适配器的过滤，并过滤了我得到的列表`EditText`。

现在，1）当我开始输入过滤器的文本时，**虚拟键盘就活了**，它开始用**列表过滤**

2）但是，当我隐藏键盘时，真正的过滤就会活跃起来。如果我在**keybord 活动的情况下****单击 listItem**它会给我上面的错误，这很明显，因为数据没有反映到 UI

 **在深入了解之后，我知道**例如**我想在列表中**搜索 ABCDE**我现在在 Edittext 中输入了 ABC，当我添加 D 时，它会显示 ABC 的过滤器，现在如果我添加**E**，它会再次**显示**过滤器对于**ABCD**，**Buuut** Data 最初是在后台更改的。这是错误的原因。

但我无法弄清楚如何解决这个问题

notifyDataSetChangedhas 没有效果，请帮帮我，任何提示或想法都可以

听到是我的代码

方法来自`TextWatcher`

```
public void afterTextChanged(Editable s) {
    searchAdapter.getFilter().filter(s.toString());
    searchAdapter.notifyDataSetChanged();
    drugListView.requestLayout();       
} 
```

Logcat如下

```
06-30 18:14:54.299: E/AndroidRuntime(6922): FATAL EXCEPTION: main
06-30 18:14:54.299: E/AndroidRuntime(6922): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131361944, class android.widget.ListView) with Adapter(class com.pocketpharmacist.adapter.DrugClassesListAdapter)]
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.widget.ListView.layoutChildren(ListView.java:1555)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.widget.AbsListView$CheckForTap.run(AbsListView.java:2840)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.os.Handler.handleCallback(Handler.java:587)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.os.Looper.loop(Looper.java:132)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at android.app.ActivityThread.main(ActivityThread.java:4028)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at java.lang.reflect.Method.invokeNative(Native Method)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at java.lang.reflect.Method.invoke(Method.java:491)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
06-30 18:14:54.299: E/AndroidRuntime(6922):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:54:15.130

我改变了过滤的方法而不是写

```
public void afterTextChanged(Editable s) {
    searchAdapter.getFilter().filter(s.toString());
    searchAdapter.notifyDataSetChanged();
    drugListView.requestLayout();       
} 
```

我已经更改了它并开始使用[FilterListener](http://developer.android.com/reference/android/widget/Filter.html#filter%28java.lang.CharSequence,%20android.widget.Filter.FilterListener%29) 并调用`notifyDataSetChanged`该方法，现在一切都像魅力一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:57:29.110

适配器是 UI 的一部分，因此您需要确保它不是从后台线程请求的，而不是从 UI 线程请求它。请访问[vogella.com](http://www.vogella.com/articles/AndroidListView/article.html)并搜索适配器。本网站教程将正确指导您。**

# c# - 如何更新数据库中建议的状态？

> ID：11274187
> 
> 赞同：0
> 
> 时间：2012-06-30T12:47:18.633
> 
> 标签：c#, asp.net

我正在为我的公司开发一个基于网络的安全建议计划，员工可以在其中提交他们拥有的任何安全建议。现在，我正在研究这个系统的管理部分。管理员将能够查看表格中列出的所有安全建议。在表格的最后一列中，将列出状态。当管理员单击其中一个建议的状态时，将出现一个新的弹出窗口 (asp.net ajax ModalPopUpExtender)，其中列出所有可能的状态，例如：已执行、已批准...等。当管理员选择其中一种状态，建议的状态将在数据库中更新。我写了代码，但它仍然没有更新建议的状态，**所以你能帮我修改它吗？**

**ASP.NET 代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                        AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ID" 
                        width="900px" CssClass="mGrid" 
                        DataSourceID="SqlDataSource1" 
                        OnRowDataBound="GridView1_RowDataBound">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" CssClass="alt" />
            <HeaderStyle Font-Bold = "True" ForeColor="Black" Height="20px"/> 
            <Columns>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                <asp:BoundField DataField="Description" HeaderText="Description" 
                    SortExpression="Description" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Username" HeaderText="Username" 
                    SortExpression="Username" />
                <asp:BoundField DataField="DivisionShortcut" HeaderText="DivisionShortcut" 
                    SortExpression="DivisionShortcut" />
                <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type" />

                <%-- This to make status be opened and edited through the Ajax ModalPopUp Window --%>
                <asp:TemplateField HeaderText="Status">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                        OnClick="lnkSuggestionStatus_Click">
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:HyperLinkField HeaderText="Status" 
                    SortExpression="Status" />--%>
            </Columns>
            <RowStyle HorizontalAlign="Center" />
        </asp:GridView>

        <asp:Button runat="server" ID="btnModalPopUp" style="display:none" />

        <AjaxToolkit:ModalPopUpExtender ID="modalPopUpExtender1"
                                        runat="server" 
                                        TargetControlID="btnModalPopUp" 
                                        PopupControlID="pnlPopUp" 
                                        BackgroundCssClass="popUpStyle"
                                        PopupDragHandleControlID="panelDragHandle" 
                                        OkControlID="OKButton">
        </AjaxToolkit:ModalPopUpExtender>

        <asp:Panel runat="server" ID="pnlPopUp">

                    <asp:RadioButtonList ID="StatusList" runat="server" RepeatColumns="1" RepeatDirection="Vertical"
                                            RepeatLayout="Table" TextAlign="Left" DataSourceID="SuggestionStatusDataSource"
                                            DataTextField="Status" DataValueField="ID">
                        <asp:ListItem id="option1" runat="server" Value="ACTIONED" />
                        <asp:ListItem id="option2" runat="server" Value="APPROVED" />
                        <asp:ListItem id="option3" runat="server" Value="PENDING" />
                        <asp:ListItem id="option4" runat="server" Value="TRANSFERRED" />
                    </asp:RadioButtonList>
                    <asp:SqlDataSource ID="SuggestionStatusDataSource" runat="server"
                                        ConnectionString="<%$ ConnectionStrings:testConnectionString %>"
                                        SelectCommand="SELECT * FROM [SafetySuggestionsStatus]"></asp:SqlDataSource>

                    <asp:Button ID="confirmButton" runat="server" Text="Confirm" 
                                OnClientClick="javascript:return confirm('Are you sure you want to send an email notification about the safety suggestion to the owner?')" 
                                OnClick="btnSendStatus_Click" />

            <asp:Button ID="OKButton" runat="server" Text="Close" />
        </asp:Panel>
        </ContentTemplate>
        </asp:UpdatePanel> 
```

**代码隐藏：**

```
public void btnSendStatus_Click(object sender, EventArgs e) {
        var statusID = StatusList.SelectedValue;

        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=psspdbTest;Integrated Security=True";
        //For updating the status of the safety suggestion
        string updateCommand = "UPDATE SafetySuggestionsStatus SET ID= @statusID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            //using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            using (SqlCommand cmd = new SqlCommand(updateCommand, conn))
            {

                cmd.Parameters.AddWithValue("@ID", statusID);
                cmd.ExecuteNonQuery();
            }
        }

        SendSuggestionStatusToUser(statusID);
    } 
```

**更新：**

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name...
    SafetySuggestionsLog: ID, Title, Description, Username, StatusID
    SafetySuggestionsStatus: ID, Status 
```

我收到以下错误： ![在此处输入图像描述](../Images/a31240e62ca1debf29ef61cf29793033.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:15:59.160

看这条线

```
 cmd.Parameters.AddWithValue("@ID", statusID); 
```

由于您的更新查询没有声明@ID 而是@statusID，它应该是

```
 cmd.Parameters.AddWithValue("@statusID", statusID); 
```

# java - 数据从 DB 服务器推送到 Web 服务器

> ID：11274189
> 
> 赞同：0
> 
> 时间：2012-06-30T12:47:54.250
> 
> 标签：java, mysql, sql-server, database, web-applications

我们在 Web 应用程序中使用 mysqlserver 来跟踪我们当前和未来的工作状态。目前，我们的应用服务器 [tomcat] 实例会定期向 DB 服务器发送查询以查找最新的作业状态。您能否告诉我是否有办法将更新的作业状态从 mysql 服务器推送到 Web 服务器，而不是通过 Web 服务器轮询来查找更新的状态？请建议是否有其他更好的方法来避免这种轮询机制。另外，请让我知道是否有任何支持数据推送的数据库服务器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:43:29.267

我在 SQL Server 方面没有太多经验，但我认为以下讨论和示例会对您有所帮助。

1.  [从 sql 存储过程调用 Web 服务，这可能吗？](http://www.linkedin.com/groups/Calling-Web-Services-from-sql-43315.S.49081669)
2.  [从 SQL Server 2005 调用 Web 服务](http://blog.hoegaerden.be/2008/11/11/calling-a-web-service-from-sql-server-2005/)

可以根据您的要求使用第二个参考的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:15:18.657

回复：其他数据库服务器。在 SQL Server 中实现消息传递的方式有多种。您可以创建一个按计划查询作业状态的服务器作业。此外，[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893%28v=sql.105%29.aspx) 可能很有用。最后，在 .Net 应用程序中，您可以使用[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)在查询结果更改时收到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:46:17.833

MySQL 没有内置任何功能来执行此操作。更新数据库的代码也通知 Web 服务器怎么样？或者您可以通知更新两者的服务。

# delphi - delphi 如何反序列化子属性？

> ID：11274192
> 
> 赞同：4
> 
> 时间：2012-06-30T12:48:03.750
> 
> 标签：delphi, serialization

从两天前开始，我开始从头开始制作我自己的简单类，源自`TObject`，没什么特别的。我还需要在文件中写入/读取它们，所以经过一番搜索，因为我还没有学习序列化的所有细节，也没有完全掌握它们，所以我从[这里](http://delphi.about.com/od/windowsshellapi/a/reader-writer.htm)借用了序列化方法。当我测试它时，它工作得很好。然后我添加了另一个类作为属性（这就是我说 sup-property 时所指的：类的属性，它是我的类中的一个属性......这很令人困惑，它需要一个正确的名称），遵循中的建议[这个](https://stackoverflow.com/questions/3725037/how-do-i-code-a-property-with-sub-properties)所以关于如何实际做到这一点的问题。现在写入文件似乎不会引发任何错误，然后我又不确定子属性是否正确写入或者它只是垃圾。然而，读回来确实会导致

> 带有消息“无效属性类型：TSomething”的异常类 EPropertyConvertError

由于我只是在学习这个，我不确定是什么问题。我确实有一些疯狂的猜测，其中之一是`TSomething = Class`可能必须拥有自己的序列化方法？在那种情况下，这将如何运作（因为即使我不相信这个假设）？另一个是我从*delphi.about.com*借来的代码不能处理这些类型的属性？如果是这样，我该如何改进它？如果我的猜测都不是正确的，那么如何做到这一点呢？（而且我正在使用 DelphiXE2。）

根据要求编码：

```
TSomething = Class
protected
  fNumber: integer;
  fLine: string;
public
  procedure Assign(Source: TObject);
published
  property Number: integer read fNumber write fNumber;
  property Line: string read fLine write fLine;
End;

TOther = Class
public
  procedure LoadFromStream(const Stream: TMemoryStream);
  procedure SaveToStream(const Stream: TMemoryStream);
  constructor Create; virtual;
  destructor Destroy; override;
protected
  fSomething: TSomething;
  procedure SetfSmth(AValue: TSomething);
published
  property Something: TSomething read fSomething write SetfSomething;
end; 
```

方法的实现是从上面提供的两个链接中借用的，我认为没有必要重新输入，除非要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:23:39.777

要序列化 ​​TSomething，它必须是子组件。为此，您必须更改一件事：不要从 TObject 派生这两个类，而是从 TComponent 派生。然后在你调用的 TSomething 构造函数中

```
Self.SetSubComponent(True); 
```

最后，由于您的类是 TComponent，您将不再需要从*delphi.about中获取的内容，因为可以使用***WriteComponent** / ReadComponent 在 TStream 中直接序列化**TComponent**

您会发现选择正确的后代时该过程更容易。这里的选择是逻辑：如果你想序列化然后使用 TComponent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:21:36.520

我认为你应该跟进你的想法，给它自己的 TSomething 类序列化方法。

下面是一个示例，使用 XML 进行序列化：

```
TSomething = class(TPersistent)
protected
  FNumber: Integer;
  FLine: String;
public
  procedure WriteToXmlNode(XmlNode: IXmlNode);
  procedure ReadFromXmlNode(XmlNode: IXmlNode);
published
  property Number: Integer read FNumber write FNumber;
  property Line: String read FLine write FLine;
end;

TOther = class(TPersistent)
protected
  FSomething: TSomething;
public
  procedure WriteToXmlNode(XmlNode: IXmlNode);
  procedure ReadFromXmlNode(XmlNode: IXmlNode);
published
  property Something: TSomething read FSomething write FSomething;
end; 
```

换句话说，让每个类都知道如何将自己序列化为 XML。

TOther 的 write 方法将如下所示：

```
procedure TOther.WriteToXmlNode(XmlNode: IXmlNode)
var
  ChildNode: IXmlNode;
begin
  // Write something
  ChildNode := XmlNode.AddChild('Something');
  Something.WriteToXmlNode(ChildNode);       
end; 
```

读取方法将如下所示：

```
procedure TOther.ReadFromXmlNode(XmlNode: IXmlNode)
var
  ChildNode: IXmlNode;
begin
  // Read
  ChildNode := XmlNode.ChildNodes.First;
  while Assigned(ChildNode) do
  begin
    // Read something
    if ChildNode.NodeName = 'Something' then
      Something.ReadFromXmlNode(ChildNode);

    // Next child node
    ChildNode := ChildNode.NextSibling;
  end;
end; 
```

这就是它的一般要点。

我认为您将在示例中使用类似的方法，即使您不选择序列化为 XML。

**编辑**：在你的问题中你想要什么有点不清楚。如果您正在编写组件，并且希望在设计时使用它们时正确序列化组件的属性，那么这不是要走的路。我描述的方法是在运行时序列化任意对象。

# java - 动态网格将 Extjs 中的值提交到 java

> ID：11274193
> 
> 赞同：0
> 
> 时间：2012-06-30T12:48:16.400
> 
> 标签：java, spring, extjs

我将开发这样的功能，将网格数据提交给 java

1）我有 6 个单选按钮，单击单选按钮网格在每个网格中加载了不同的列数（每个网格中的列数不同）

2）我想提交选定的网格数据并处理进一步的过程

任何人都知道如何实现这一点，请提前帮助我。

马尤尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:50:33.480

您应该阅读文档，尤其是示例：

[http://docs.sencha.com/ext-js/4-1/#!/example/writer/writer.html](http://docs.sencha.com/ext-js/4-1/#!/example/writer/writer.html)

# android - 在不同的活动中释放唤醒锁到它被获取的地方

> ID：11274196
> 
> 赞同：2
> 
> 时间：2012-06-30T12:48:43.287
> 
> 标签：android, release, wakelock

我的应用程序中有两个活动。第一个活动获取一个唤醒锁，即使该活动被销毁，该唤醒锁仍然存在。此活动还设置了一个警报，该警报将启动第二个活动。我希望第二个活动释放第一个活动获得的唤醒锁。

所以基本上：

第一个活动获得唤醒锁>>第一个活动被销毁>>唤醒锁仍然获得>> canender（警报）打开一个新活动（第二个活动）>>第二个活动释放唤醒锁？？

问题是如何在与获取唤醒锁的位置不同的活动中释放唤醒锁？

这是我在第一个活动中用于获取唤醒锁的代码：

```
 WakeLock wl;
    PowerManager pM = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wl = pM.newWakeLock(PowerManager.FULL_WAKE_LOCK, "wakeLock");
   wl.acquire(); 
```

有什么代码可以用来在第二个活动中释放唤醒锁吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T14:55:54.887

将唤醒锁存储在两个活动都可以访问的静态变量中。像这样：

```
class Globals {
    public static WakeLock wakelock;
} 
```

在您的第一个活动中：

```
PowerManager pM = (PowerManager)getSystemService(Context.POWER_SERVICE);
WakeLock wl = pM.newWakeLock(PowerManager.FULL_WAKE_LOCK, "wakeLock");
wl.acquire();
Globals.wakelock = wl; // Save in a place where it won't go 
```

  // 当这个 Activity 完成时离开

在您的第二个活动中：

```
if (Globals.wakelock != null) {
    Globals.wakelock.release();
    Globals.wakelock = null; // We don't have a wake lock any more
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:11:07.297

```
public class WakeLockManager extends BroadcastReceiver {

    private static WakeLock mWakeLock;
    private String LCLT;

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Consts.WAKELOCK_INTENT)) {
            Log.v("wakelock", "GOT THE wakelock INTENT");
            boolean on = intent.getExtras().getBoolean("on");
            if (mWakeLock == null) {
                PowerManager pm = (PowerManager) context
                        .getSystemService(Context.POWER_SERVICE);
                mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                        "Breeze WakeLock");
            }
            if (on) {
                if (!mWakeLock.isHeld()) {
                    mWakeLock.acquire();
                    Log.v("wakelock", "acquiring wakelock");
                }
            } else {
                if (mWakeLock.isHeld()) {
                    Log.v("wakelock", "releasing wakelock");
                    mWakeLock.release();
                }
                mWakeLock = null;
            }
        }
    }
} 
```

look at the above code ..put it in a separate class file and and in your manifest define it for some custom intent .... now this class will respond to a custom intent ...just broadcast that intent and you can turn the wakelock on or off in your entire app since the wakelock is static..like this :

```
public static void setWakeup(boolean status) {
    Intent wakelock_Intent = new Intent(CUSTOM_INTENT);
    wakelock_Intent.putExtra("on", status);
    getActivityReference().sendBroadcast(wakelock_Intent);
} 
```

the above would be defined in a service ..
then we can call this method from anywhere since its static to alter the cpu wakelock

# jquery - 是否有一种正确的方法来遍历 jquery 中的多个选择器

> ID：11274200
> 
> 赞同：2
> 
> 时间：2012-06-30T12:49:01.803
> 
> 标签：jquery

假设我有一个`.on()`选择多个 id 的功能

```
 $("#i, #am, #your, #father").on("click" , function(event){
    //iterate over the selectors and return tagname
       alert ( $("#i").prop("tagName")  );
       alert ( $("#am").prop("tagName") );
       alert ( $("#your").prop("tagName") );
       alert ( $("#father").prop("tagName") );
    } 
```

我能想到的唯一方法是分别提醒每个人。有没有一种已知的方法来处理`$("#i, #am, #your, #father")`数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:50:05.397

请试试这个：

有趣的阅​​读：[jQuery：'$(this)' 和 'this' 之间有什么区别？](https://stackoverflow.com/questions/1051782/jquery-this-vs-this)

也可以点击任何这些链接`ids`，您可以使用它`$(this)`来获取道具`tagName`

此外，如果您想知道如何将所有这些绑定到 on var，请参见此处：`$foo`示例：http: [//jsfiddle.net/6hwLS/5/](http://jsfiddle.net/6hwLS/5/)

希望这可以帮助，

```
$("#i, #am, #your, #father").on("click" , function(event){
//iterate over the selectors and return tagname
   alert($(this).prop("tagName")  );

} 
```

**进一步**你也可以这样做

```
var $foo = $("#i, #am, #your, #father");

$foo.on("click", function(event) {
    //iterate over the selectors and return tagname
    alert($(this).prop("tagName"));

}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:00:52.383

像这样的东西？

```
var $groupSelection = $('#i, #am, #your, #father');

$groupSelection.on('click', function(e){
   $groupSelection.each(function(){
      alert( $(this).prop('tagName') );
   });
}); 
```

**演示在** [http://jsfiddle.net/ZHpFa/](http://jsfiddle.net/ZHpFa/)

# android - 在 android 中使用 svg

> ID：11274208
> 
> 赞同：2
> 
> 时间：2012-06-30T12:50:20.230
> 
> 标签：android, graphics

我不知道 svg 图像和形状在 android 中的正确用法。但实际上我的问题是：我想使用 svg 图像作为我在 xml 中提到的组件的背景，并且想将 onCreate() 中的 svg 图片绑定到例如 editText。我已经看到如何将它用于布局，但不知道 editText 怎么样。在我使用此代码（如下）之后，svg 图像无法缩放和调整背景图像的大小。大小保持默认。

```
 mBodyText = (EditText) findViewById(R.id.content);
     SVG svg=SVGParser.getSVGFromResource(getResources(), R.drawable.notepad);
     Drawable picDrawable=svg.createPictureDrawable();
    mBodyText.setBackgroundDrawable(picDrawable); 
```

我也使用 Draw 方法，但仍然没有。

感谢大家阅读

# html - 背景图像如何在我的 chrome 和 firefox 中不起作用

> ID：11274212
> 
> 赞同：0
> 
> 时间：2012-06-30T12:50:37.567
> 
> 标签：html, css

我正在用 html 制作一个 html 页面。我将它们集成在 aspx 页面中并尝试运行它们 vs/webmatrix。

它不工作。当我检查图像位置并将它们复制粘贴到浏览器中时，它可以工作，但实际上它没有显示。只有 Ie9 给我看这个。

```
<div class="ads-head-wrap">
                        <h2>Favorite Stores</h2>
                    </div>

.ads-head-wrap {
background: url("../images/ads-head.png") no-repeat scroll 0 0 transparent;
width: 233px;
height: 51px;
} 
```

有人知道我的情况到底出了什么问题。

* * *

更新 ：-

我发现安装在 Firefox 和 chrome 上的插件会阻止图像，因为他们认为这是广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:20:26.937

在不工作的浏览器上使用 DOM 检查器，关闭所有其他影响“ads-head-wrap”的样式。这可能表明您的问题出在哪里。我怀疑还有另一条规则会影响这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:40:41.773

重命名您的图像文件，对于某些广告拦截插件和防火墙来说，**广告**可能是一个敏感词。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-30T13:00:32.317

我认为代码没有问题。可能背景图片源路径不正确。请检查或提供该页面的链接，以便我们检查并确定问题。

谢谢，

# java - PXE 引导安装操作系统并使用程序获取其成功的操作系统安装状态

> ID：11274213
> 
> 赞同：0
> 
> 时间：2012-06-30T12:50:39.600
> 
> 标签：java

所以，这是我的情况，我有一台机器（比如 M）要使用 PXE 引导来引导，并在该机器上安装一个操作系统（比如 CentOS）。M 不会连接任何显示器或键盘。

PXE 引导服务器也在 CentOS 机器上运行（比如 B）

我将如何编写位于机器 B 中的程序（bash 脚本、Java 程序）并获取机器 M 已成功完成操作系统安装的状态/通知。

请注意，我无法手动检查操作系统是否已完成安装。我需要自动化这个过程。

如果你们能提出最好和最有效的方法，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:14:05.187

我的建议是让服务器与网络服务器/网络服务对话，说安装完成，并传递值来识别它是哪台机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T20:59:51.337

我最近在使用 debian PXE 安装程序时遇到了这个问题。

我将主机设置为从网络启动。我用机器的 system-uuid 发送一个 POST 请求来识别它并告诉服务器它需要安装。当服务器收到此请求时，它会创建一个特定的 pxelinux.cfg 文件，然后将 uuid 作为文件名，确保特定主机使用特殊参数获取 debian 安装。

我有一个作为模板的预置文件，它是针对每台机器呈现的。在 debian 安装期间，有机会运行一个后期命令，我使用它从服务器下载脚本并在目标环境中执行它。此脚本发送另一个 POST 请求，通知服务器第一阶段安装已完成，并且还为第二安装阶段安装脚本。然后，服务器会删除特定的 pxeconfig 文件。默认的pxeconfig文件会默认十秒后从硬盘启动，所以当主机再次从网络启动时，默认是从硬盘启动，继续安装。

你可以在这里查看代码： [https ://github.com/umeboshi2/paella](https://github.com/umeboshi2/paella)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:31:48.193

一个足够简单的方法是在安装完成后使用 NFS 从 M 访问 B 上的目录（取决于安装方法——对于 kickstart，使用安装后脚本）。在某个目录中创建一个文件作为安装已完成的标志。在机器“B”上，您可以使用`inotify`功能来检测完成情况（通过`inotifywait`shell 脚本或`libinotify`其他方式）。

如果 NFS 由于某种原因被禁止，您应该能够使用`scp`或`sshfs`相当容易地使用。最复杂的部分是复制生成的密钥。

# php - 在 Javascript 和 AJAX POST 之后使用 PHP 函数刷新浏览器

> ID：11274216
> 
> 赞同：0
> 
> 时间：2012-06-30T12:51:18.507
> 
> 标签：php, javascript, ajax, post, browser

我的 Javascript 允许用户登录到第 3 方系统，返回一系列用户详细信息。这完美地工作:)

我使用 JSON 和 AJAX 将其发布到 PHP 脚本。这也有效。

PHP 脚本询问我的 mySQL 数据库，返回各种详细信息。这也有效！

但是，我只能在 Safari 的 Web Inspector 中查看 mySQL 输出。我想我需要让 PHP 脚本“刷新”浏览器以显示输出，但找不到该怎么做。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:01:06.720

您需要使用 JavaScript 来执行此操作。

当您的 ajax 返回时，您需要将其加载到您的页面中。在您的成功处理程序中更新一个 DOM 元素以包含您感兴趣的用户详细信息。

使用 jQuery：（而且非常初级）

**HTML：**

```
...
<div id="userLoginDetails"></div>
... 
```

**JS：**

```
$.post('ajax/login.php', { username: 'john doe', password: 'blah' }, function(data) {
  $('#userLoginDetails').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:53:21.590

您可以使用此代码从 PHP 推送控件：

```
<?php
    header('Content-type: text/javascript');
    die('location.href=location.href;');
?> 
```

甚至通过 JavaScript，在 AJAX 加载之后，`success`您可以在函数中包含以下内容：

```
success: function() {
    // Other Codes
    location.href=location.href
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:26:38.457

一分钱掉了。我所需要的只是 AJAX “成功”功能——Duh。感谢你的帮助。

```
 $.ajax({        
    type: "POST",
    url: "AddEdit_Interests.php",
    data: { interestsArray : result },
    success: function(data) {
         $("#lengthQuestion").fadeOut('slow'); 
         document.write(data);
    }
 }); 
```

# .net - 测试 .NET Windows Forms (VB) 应用程序

> ID：11274221
> 
> 赞同：3
> 
> 时间：2012-06-30T12:53:11.363
> 
> 标签：.net, testing, automated-tests

我们有一个 .NET 应用程序（VB / VS2010），该项目已经运行了大约 2 年。没有任何基于测试方法的开发方法，例如没有单元测试等。由于各种时间和金钱限制，事后我们将无法做到这一点。

到目前为止，测试是手动完成的，正如您所料，这会有点耗时。

该应用程序本身基于 .NET 4.0，用 VB 编写，基于 WinForms 和一些第三方 Forms 组件。

我们真正需要的是一个自动化测试工具。该应用程序由大约 100 个不同的屏幕组成。还实现了一个高级授权概念，即 GUI 元素有时会变灰或不可见，这取决于用户的权限。

这里有人可以推荐一个好的测试方法或一个好的测试工具吗？理想情况下，测试工具不会非常昂贵，尽管这显然是相对的。理想情况下，欢迎任何建议，并有优点和缺点。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:00:52.990

如果您有专门的自动化测试 QA 并具有足够的编程技能，我的建议是使用**Selenium** (http://seleniumhq.org/)。基本上它提供测试记录，但我的建议是编写功能 UI 测试以便可重用。这是项目自动化测试的良好开端。您提到的与根据用户权限或控件的不可见性禁用某些控件相关的所有验证都可以包含在 Selenium 自动化测试用例中。我将它与 Java 一起使用，但正如您在手册中看到的那样，它可以与其他一些编程语言一起使用。

我在实践中使用的其他工具是**Rational Functional Tester**，但由于 Selenium 是免费的，RFT 不是。它是一个基于 Eclipse 的 IDE，允许您开发 Java 自动化测试脚本。适用于大多数浏览器。还有一个测试记录功能，但我不再推荐它。RFT 的好处是您不需要从头开始您的项目，但您有一个文件和工件组织的示例方式。RFT 中有一些细节会花费您一些时间进行调查。

其他非常简单和现代的 UI 自动化测试方法是**Sikuli** (http://sikuli.org/)。这种方法使您能够在屏幕上搜索模式（图像），对这些模式执行操作和验证。

Of course much more important is how you organize your automation then what technology for automation you use. My suggestion is to start with the basic flows of your application and to cover the scenarios which take time for manual execution first. Prioritized your tests and start automation from the most important. Those which cover the significant business cases.

# imageresizer - VirtualFolder 插件似乎在 Resizer 3.2.2 中不起作用

> ID：11274222
> 
> 赞同：1
> 
> 时间：2012-06-30T12:53:15.857
> 
> 标签：imageresizer

当我`http://localhost:15312/images/test.png?width=100`在 Visual Studio Web 服务器（我也尝试过 Webmatrix）中调用 url 时，我得到：

```
Source may only be an instance of string, VirtualFile, IVirtualBitmapFile, HttpPostedFile, HttpPostedFileBase, Bitmap, Image, or Stream.
Parameter name: source 
```

/resizer.debug 的输出：

```
Image resizer diagnostic sheet      2012-06-30 12:51:10

2 Issues detected:

(Warning):  NoCache is only for development usage, and cannot scale to production use.
            Add DiskCache or CloudFront for production use

(Warning):  Potentially incompatible ImageResizer assemblies were detected.
            Please make sure all ImageResizer assemblies are from the same version. Compatibility issues are possible if you mix plugins from different releases.
            1.0.0 assemblies: ImageResizerTest
            3.2.2 assemblies: ImageResizer, ImageResizer.Mvc

You are not using any paid bundles.

Registered plugins:

ImageResizer.Plugins.Basic.DefaultEncoder
ImageResizer.Plugins.Basic.NoCache
ImageResizer.Plugins.Basic.ClientCache
ImageResizer.Plugins.Basic.Diagnostic
ImageResizer.Plugins.Basic.SizeLimiting
ImageResizer.Plugins.MvcRoutingShim.MvcRoutingShimPlugin
ImageResizer.Plugins.Basic.VirtualFolder

Configuration:

<resizer>
<diagnostics enableFor="AllHosts" />
<plugins>
<add name="MvcRoutingShim" />
<add name="VirtualFolder" virtualPath="~/images" physicalPath="Media/Images" vpp="false" />
</plugins>
</resizer>

Accepted querystring keys:

quality, format, thumbnail, maxwidth, maxheight, width, height, w, h, scale, stretch, crop, cropxunits, cropyunits, page, bgcolor, rotate, flip, sourceFlip, sFlip, sRotate, borderWidth, borderColor, paddingWidth, paddingColor, ignoreicc, frame, useresizingpipeline, cache, process, margin, anchor, dpi, mode, zoom, 

Accepted file extensions:

bmp, gif, exif, png, tif, tiff, tff, jpg, jpeg, jpe, jif, jfif, jfi, 

Environment information:

Running Microsoft Windows NT 6.1.7601 Service Pack 1 and CLR 4.0.30319.269
Trust level: Unrestricted
OS bitness: x86 !! Warning, running as 32-bit on a 64-bit OS(AMD64). This will limit ram usage !!
Executing assembly: C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\WebDev.WebServer40.exe
IntegratedPipeline: False

Loaded assemblies:

mscorlib                                 Assembly: 4.0.0.0         File: 4.0.30319.269   Info: 4.0.30319.269
System.Web                               Assembly: 4.0.0.0         File: 4.0.30319.272   Info: 4.0.30319.272
System                                   Assembly: 4.0.0.0         File: 4.0.30319.269   Info: 4.0.30319.269
System.Core                              Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
System.Configuration                     Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Xml                               Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
System.Runtime.Caching                   Assembly: 4.0.0.0         File: 4.0.30319.237   Info: 4.0.30319.237
Microsoft.Build.Utilities.v4.0           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.RegularExpressions            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Microsoft.Build.Framework                Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Data                              Assembly: 4.0.0.0         File: 4.0.30319.237   Info: 4.0.30319.237
Microsoft.JScript                        Assembly: 10.0.0.0        File: 10.0.30319.1    Info: 10.0.30319.1
CppCodeProvider                          Assembly: 10.0.0.0        File: 10.0.30319.1    Info: 10.0.30319.1
System.Web.WebPages.Razor                Assembly: 2.0.0.0         File: 2.0.20505.0    
System.Web.WebPages                      Assembly: 2.0.0.0         File: 2.0.20505.0    
System.Web.Http.WebHost                  Assembly: 4.0.0.0         File: 4.0.20505.0    
System.Web.Mvc                           Assembly: 4.0.0.0         File: 4.0.20505.0    
System.Web.WebPages.Deployment           Assembly: 2.0.0.0         File: 2.0.20505.0    
System.Web.WebPages.Deployment           Assembly: 1.0.0.0         File: 1.0.20105.407  
Microsoft.Web.Infrastructure             Assembly: 1.0.0.0         File: 1.0.20105.407  
System.Xml.Linq                          Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
App_global.asax.104g7ahn                 Assembly: 0.0.0.0        
ImageResizerTest                         Assembly: 1.0.0.0         File: 1.0.0.0        
WebDev.WebHost40                         Assembly: 10.0.0.0        File: 10.0.40219.1    Info: 10.0.40219.1
System.Web.Http                          Assembly: 4.0.0.0         File: 4.0.20505.0    
System.Web.Mobile                        Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ServiceModel.Activation           Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
System.ServiceModel                      Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
System.Runtime.DurableInstancing         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
SMDiagnostics                            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Extensions                    Assembly: 4.0.0.0         File: 4.0.30319.272   Info: 4.0.30319.272
Microsoft.CSharp                         Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Services                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Drawing                           Assembly: 4.0.0.0         File: 4.0.30319.282   Info: 4.0.30319.282
System.EnterpriseServices                Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.IdentityModel                     Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Runtime.Serialization             Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ServiceModel.Web                  Assembly: 4.0.0.0         File: 4.0.30319.233   Info: 4.0.30319.233
System.Activities                        Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ServiceModel.Activities           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.WorkflowServices                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Data.DataSetExtensions            Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.ComponentModel.DataAnnotations    Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.DynamicData                   Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.ApplicationServices           Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
ImageResizer                             Assembly: 3.2.2.0         File: 3.2.2.0         Info: 3-2-beta-2  Commit: 3704dd6
ImageResizer.Mvc                         Assembly: 3.2.2.0         File: 3.2.2.0         Info: 3-2-beta-2  Commit: 3704dd6
Newtonsoft.Json                          Assembly: 4.5.0.0         File: 4.5.1.14720    
System.Net.Http                          Assembly: 2.0.0.0         File: 1.0.0.0        
System.Net.Http.Formatting               Assembly: 4.0.0.0         File: 4.0.20505.0    
System.Net.Http.WebRequest               Assembly: 2.0.0.0         File: 1.0.0.0        
System.Web.Helpers                       Assembly: 2.0.0.0         File: 2.0.20505.0    
System.Web.Razor                         Assembly: 2.0.0.0         File: 2.0.20505.0    
System.Web.Routing                       Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Web.Abstractions                  Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
Anonymously Hosted DynamicMethods Assembly Assembly: 0.0.0.0        
System.Xaml.Hosting                      Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1
System.Xaml                              Assembly: 4.0.0.0         File: 4.0.30319.1     Info: 4.0.30319.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T23:07:15.450

**感谢您报告此错误！**

此错误主要影响为 VirtualFolder 安装更改了 vpp="false" 的用户，但也影响了 UNC 路径和某些其他情况下的用户。

**它已在[版本 3.2.3 (changelog)](http://imageresizing.net/releases/3-2-beta-3)**中修复。

您可以[在此处找到最新的下载](http://imageresizing.net/download)。

# c# - 光标停留在我在 VS 文本编辑器中单击的位置

> ID：11274224
> 
> 赞同：16
> 
> 时间：2012-06-30T12:53:21.637
> 
> 标签：c#, visual-studio-2010

抱歉提问，但我在互联网上的任何地方都找不到答案。我自己也找不到答案。这是问题：

以前，当我单击 VS 文本编辑器中的任意位置时，光标移动到语句的末尾，就在“;”之后。但现在它停留在我点击屏幕的地方，真的很烦人。我该如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-30T12:57:05.853

这称为**虚拟空间**，可以在 Visual Studio 的选项对话框中进行更改。

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms165328(v=vs.100).aspx)文章：

> 在代码旁边放置注释
> 
> *   在选项对话框中，展开文本编辑器，然后单击您的开发语言的常规节点。
>     
>     
> *   在设置下，选择启用虚拟空间。
>     
>     
> 
> 选择此选项并清除自动换行后，您可以单击代码编辑器中行尾以外的任意位置并键入。

要恢复到您所追求的行为，您需要在语言级别或所有语言**取消选中** *启用虚拟空间：*

[![显示未选中的虚拟空间设置的 Visual Studio 选项对话框](../Images/fec303acefe7c287586fd3911e9428e8.png)](https://i.stack.imgur.com/bRaPr.png)

[这里](http://msdn.microsoft.com/en-us/library/z01zks9a%28v=vs.100%29.aspx)还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T17:16:32.850

在 Visual Studio 2019 中，您必须选中`Tools - Options -Text Editor - All Languages - Scroll Bars`then check`Show caret position`选项。

[![在此处输入图像描述](../Images/74de9119da3e63213dab829a889ed01c.png)](https://i.stack.imgur.com/0582R.jpg)

# android - Android WebView - 从缓存中加载图像

> ID：11274225
> 
> 赞同：0
> 
> 时间：2012-06-30T12:53:28.150
> 
> 标签：android, caching, webview

当我访问包含图像的网站并且它们不显示其格式时，我的 webview 会在 SD 卡上保存大量缓存。当我尝试打开它们时，默认的 Android 文件管理器会显示“找不到文件类型”。然后我将其中一些（主要是大尺寸的）的格式更改为.jpg和宾果游戏，它们是我在网页上看到的图像。

Punchline：我想打开该站点中保存为缓存的图像，在另一个活动中，我是否必须继续并将所有缓存文件重命名为 .jpg 然后调用它们，或者有其他方法可以做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:30:24.443

您可以使用[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)打开这些图像文件。你可以试试：

```
- decodeFile(String pathName) 
```

如果它给扩展带来了一些问题，请尝试`decodeStream (InputStream is)`，它会收到一个`InputStream`并且它应该可以工作。

* * *

您可以使用 File 列出文件夹：

```
File f = new File(Environment
          .getExternalStorageDirectory()
          .getAbsolutePath());

File[] files = f.listFiles();
for (File file : files){
   //Do something with this file
} 
```

# c# - 根据 bool 选择隐藏或显示工具提示

> ID：11274227
> 
> 赞同：1
> 
> 时间：2012-06-30T12:53:55.137
> 
> 标签：c#, tooltip

所以我想我在这里犯了一个愚蠢的错误。在许多控件的第一个中，我需要`tooltip`在 a 为真时显示一个气球，或者在 a为假`bool`时不显示它们。`bool`我知道这`ShowAlways`不是我需要修改的，我已经尝试了各种解决方案。有没有人发现问题？由`bool`帮助菜单条项目中的选中下拉项目设置。

它将以正确显示的应用程序打开，但只要我检查该选项以显示它，它就会始终显示在那里。

```
public void changeBalloonProperties(bool boolSet)
        {
            ToolTip helpDeskInfoButtonToolTip = new ToolTip();
            if (boolSet)
            {
                helpDeskInfoButtonToolTip.ToolTipTitle = "HelpDesk Information Button";
                helpDeskInfoButtonToolTip.UseFading = true;
                helpDeskInfoButtonToolTip.UseAnimation = true;
                helpDeskInfoButtonToolTip.IsBalloon = true;
                helpDeskInfoButtonToolTip.ShowAlways = true;
                helpDeskInfoButtonToolTip.AutoPopDelay = 5000;
                helpDeskInfoButtonToolTip.InitialDelay = 1000;
                helpDeskInfoButtonToolTip.ReshowDelay = 500;
                helpDeskInfoButtonToolTip.SetToolTip(helpDeskButton, "Click to launch HelpDesk user info page in default browser.");
            }
            else
            {
                helpDeskInfoButtonToolTip.RemoveAll();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:14:36.790

每次`changeBalloonProperties`调用 时，您都会创建一个新的 ToolTip 实例，因此代码不会删除与`helpDeskButton`. 尝试将 ToolTip 声明移到您的`changeBalloonProperties`方法之外，以便将相同的 ToolTip 对象与`RemoveAll()`.

另请注意，您可以使用相同的 ToolTip 对象为多个控件添加标题（如此处的示例所示[）](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.settooltip)，并且最好将`helpDeskInfoButtonToolTip.Active = false`它们设置为一次全部禁用，而不是每次都设置和删除标题（和其他属性）切换。

# java - 在 twitter api 请求中获取错误代码消息（java）

> ID：11274229
> 
> 赞同：1
> 
> 时间：2012-06-30T12:53:57.230
> 
> 标签：java, json, api, twitter

我正在尝试通过以下方式使用 twitter api：

```
String urlAdd = "https://api.twitter.com/1/following/ids.json?user_id=1000123";
URL url = new URL(urlAdd);
URLConnection urlConnection = url.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream())); 
```

getInputStream 输入流抛出 IOException，这是因为我已达到请求限制。我希望能够区分请求限制错误和其他错误。Twitter 以 json 格式返回错误消息，但由于抛出异常，我无法阅读它。

关于如何获取错误消息的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:38:00.607

我找到了一种方法：

```
String urlAdd = "https://api.twitter.com/1/following/ids.json?user_id=1000123";
URL url = new URL(urlAdd);
URLConnection urlConnection = url.openConnection();
HttpURLConnection httpConn = (HttpURLConnection)urlConnection;
InputStream is;
if (httpConn.getResponseCode() >= 400) {
    is = httpConn.getErrorStream();
} else {
    is = httpConn.getInputStream();
}
BufferedReader in = new BufferedReader(new InputStreamReader(is)); 
```

# asp.net-mvc - 如何在 MVC 应用程序中使用 RavenDb 实现身份验证和授权？

> ID：11274231
> 
> 赞同：6
> 
> 时间：2012-06-30T12:54:05.460
> 
> 标签：asp.net-mvc, authentication, authorization, ravendb

虽然我已经习惯于将标准 ASP.Net Membership Provider 用于新的 MVC Web 应用程序，但我最近对使用 RavenDb 很感兴趣，但我仍然不相信我掌握了实现的最佳实践用户认证和角色授权。

我在 AccountController 中替换了我的 Register 和 Logon 方法的代码如下所示：

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
    using (IDocumentSession Session = DataDocumentStore.Instance.OpenSession())
    {
        Session.Store(new AuthenticationUser
        {
            Name = Email,
            Id = String.Format("Raven/Users/{0}", Name),
            AllowedDatabases = new[] { "*" }
        }.SetPassword(Password));
        Session.SaveChanges();
        FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
        // ...etc. etc.

    [HttpPost]
    public JsonResult JsonLogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            using (IDocumentSession Session = DataDocumentStore.Instance.OpenSession())
            {
                book Ok = Session.Load<AuthenticationUser>(String.Format("Raven/Users/{0}", Username)).ValidatePassword(Password);
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                // etc... 
```

我已经看到许多人在类似的帖子或问题中引用的 RavenDb Membership Provider 代码，但似乎也有一些人认为这太过分了，并利用低效的 API 进行数据存储不需要其中提供的大部分内容。

那么 RavenDb 身份验证（不是 OAuth，而是表单身份验证）的最佳架构/设计策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:42:05.530

我认为这个问题有几个部分。首先，从 MVC 项目的角度来看，您确实想要使用与 AuthorizationAttribute 一起使用的东西。这实际上不需要使用 MembershipProvider 本身，而是将适当的 IPrincipal 填充到 HttpContext.Current.User 中，因为这就是这些属性用来授权事物的方式。

从 HTTP 的角度来看，利用现有的表单身份验证基础设施也很有意义——它解决了您真正不应该自己解决的大多数棘手的安全问题，并且在处理您提供的内容方面非常灵活。

从那里您可以了解问题的要点——您希望如何从数据角度支持您的身份验证系统。我认为这是一个非常战术性的调用——某些应用程序可能只使用 MembershipProvider 样式模型是有意义的。但是，如果我有一个非常以用户为中心的应用程序，我在其中存储了大量用户数据，我可能会考虑根据我的要求推出自定义用户商店。如果您使用的是身份验证捆绑包，您也可以在某种程度上关注它。但我认为目前还没有硬性规定——做对你的应用有意义的事情。

您不应该做的一件事是像上面那样使用 AuthenticationUser ——这适用于数据库系统用户。在 SQL Server 术语中，这就像让您的应用程序中的每个用户都成为 SQL 用户，然后针对该用户进行身份验证。这就是一些旧的 Intranet 产品过去的工作方式，但现在世界已经过去了。

# java - 浮点数到大小数

> ID：11274247
> 
> 赞同：0
> 
> 时间：2012-06-30T12:57:29.880
> 
> 标签：java

我必须编写一个具有以下要求的程序：

1.  我有一个浮点类型的变量，比如 float a = 3333.333f;

2.  我有一个 int 类型的变量，比如 int b = 9999;

当我在计算器中执行 a*b 时，结果将是 33329996.667

将小数四舍五入到 2 位后，我想在 java 中将该值打印为 33329996.67。我尝试了 long、double、float、big decimal，但无法成功。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:26:01.700

`float`只有 7 位精度，因此对于超过 7 位的结果，它不是一个好的选择。`double`精度高达 16 位，是更好的选择。

```
double a = 3333.333;
int b = 9999;
System.out.printf("%.2f", a * b); 
```

印刷

```
33329996.67 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:07:30.893

要确定逗号后的位数，您必须应用一个小技巧：

首先将逗号右移以获得您想要的位数，然后使用 Math.ceil(float f) 剪切整个数字，然后将逗号移回左侧。

这将说明：

```
float f = 33329996.667;

float f2 = Math.ceil((f * 100)) / 100; 
```

f2 现在的值为 33329996.67。

希望这可以帮助。

编辑：对于格式化看看[这里](https://stackoverflow.com/questions/2944822/format-double-value-in-scientific-notation)

# wix - 具有管理员权限的 Windows 安装程序

> ID：11274248
> 
> 赞同：1
> 
> 时间：2012-06-30T12:57:33.927
> 
> 标签：wix, windows-installer, wix3.5, administrator

我使用 Wix 工具集 3.5 并且很想知道是否有任何 Windows 安装程序只为管理员安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:17:44.193

此外，除了@Wim 的回答和评论之外，您还可以尝试根据 WiX 标志创建您的安装程序的逻辑`Privileged`。它将帮助您仅为管理员用户安装一些功能（甚至组件）（此标志检查当前用户是否具有管理员权限）。这个标志的使用很简单：

```
 <Component Id="" Guid="">Priveleged</Component> 
```

在这种情况下，组件将仅在当前用户具有管理员权限时安装。希望会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:52:55.440

可以有多个用户具有管理权限，因此我将为所有用户安装并设置应用程序以在启动时需要管理员权限。一种方法是使用应用程序清单：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

# jquery - 在 IE 中没有调用 ajax 成功事件的可能原因是什么？

> ID：11274251
> 
> 赞同：0
> 
> 时间：2012-06-30T12:58:39.107
> 
> 标签：jquery, ajax, twitter

我在 IE 中遇到了一个问题，在 twitter 中成功发布链接后，没有调用 AJAX 成功事件。我有这个代码：

```
jQuery(document).ready(function () {
    jQuery('#tbookmarklet').twitterbutton({
    url: myshareUrl,
    title: myTitle,
    layout: 'none',
    ontweet:function(response){
        jQuery.ajax({
        url: tCallbackUrl,
        type: 'get', 
        error: function() {
            alert('sorry, it fails');
        },
        success: function() {
            alert('tweet success');
        }
        });
    },  
});
 jQuery.ajax({ url: 'https://platform.twitter.com/widgets.js', dataType: 'script', cache:true});
}); 
```

没有办法提醒成功消息，它也没有落入错误事件中，所以我无法真正找出问题所在。这仅发生在 IE 中，不会发生在其他浏览器（如 firefox 或 chrome）上，但链接已在 twitter 中成功发布。

我已经在网上阅读了使用该`complete`事件的内容，但是即使 ajax 处理失败，它仍然会执行您在完整事件中指定的功能，因此使用完整不是一个好主意。

我的代码有什么问题？我需要做什么才能轻松确定它的可能原因。

谢谢。

我必须更新我的问题：

正如 Furqan 建议的那样，使用 crossDomain: true。我已将我的代码更新为：

```
 jQuery.ajax({ 
    url: 'https://platform.twitter.com/widgets.js', 
    dataType: 'jsonp', 
    crossDomain:true,   
    CallbackName: 'SocialMedia'
    }); 
```

而不是这个：

```
jQuery.ajax({ 
       url: 'https://platform.twitter.com/widgets.js', 
       dataType: 'script', 
       cache:true
}); 
```

但它仍然不能解决我的问题。经过进一步调查，我发现 ontweet 事件并没有真正在 IE 中触发。可能是什么原因？有人遇到过这个问题吗？

在我的 IE 网络分析器中，我得到了这个结果：

[http://pastebin.com/fxxCyTSE](http://pastebin.com/fxxCyTSE)

但是，它发布到了推特上。我的问题是当它重定向回我的网站（从 twitter 到我的网站）时，`success`事件没有被调用，因为`ontweet`事件也没有被触发。

对此有任何想法吗？

关于这个问题的更新：

经过进一步研究，我发现 Twitter 代码确实存在错误。IE 中不会触发推文事件。

我发现与该问题相关的链接：

[https://dev.twitter.com/discussions/671](https://dev.twitter.com/discussions/671)

[https://dev.twitter.com/discussions/3884](https://dev.twitter.com/discussions/3884)

[https://dev.twitter.com/discussions/1640](https://dev.twitter.com/discussions/1640)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:20:21.917

您在 IE 上的问题是推文末尾的额外逗号：

```
 },   
}); 
```

应该

```
 } 
}); 
```

IE 不喜欢多余的逗号

# assembly - 内联汇编错误：注册后出现垃圾 `-4(%ebp)'

> ID：11274256
> 
> 赞同：1
> 
> 时间：2012-06-30T12:59:26.173
> 
> 标签：assembly, linux-kernel, kernel, inline-assembly

在我的以下代码注册错误后，GCC 告诉垃圾 `-4(%ebp)'：

```
 static __inline__ int xchg_asm(int* lock, int val)
    {
        int ret;

        __asm__ __volatile__(
                    LOCK "movl %1,%%eax;  xchg (%1),%2  ; movl %%eax %0"
                    :"=m" (ret)
                    :"d"(lock), "c"(val));
        return ret;
    } 
```

我看不到如何修改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T13:27:58.370

这条线不见了

> LOCK "movl %1,%%eax; xchg (%1),%2 ; movl %%eax %0"

在最后一个参数之前缺少一个分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:05:10.990

`gas`（gcc 使用的 GNU 汇编程序）期望换行符作为行尾，而不是分号。您是否尝试使用`"\n"`而不是`";"`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:06:06.353

尝试在每个 asm 指令后添加 '\n'：

```
 __asm__ __volatile__(
                LOCK "movl %1,%%eax \n  xchg (%1),%2 \n movl %%eax, %0 \n"
                :"=m" (ret)
                :"d"(lock), "c"(val));
    return ret;
} 
```

如果出现此类错误，请将源代码编译为汇编文件 - 使用`-S`GCC 选项并检查 gas 报告的行。

# nhibernate - 如何在多数据库 FluentNhibernate 应用程序中将实体限制为特定数据库

> ID：11274258
> 
> 赞同：0
> 
> 时间：2012-06-30T12:59:48.067
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我已经 [使用多个数据库配置了 Fluent NHibernate 应用程序](https://stackoverflow.com/q/11225101/1444246)。当我运行应用程序时，我看到会话正在所有数据库中创建相同的表。我尝试通过在 Mapping 类中使用以下代码行来限制创建

`Schema("Monkey") <- in monkey ClassMap`

`Schema("Banana") <- in Banana ClassMap`

生成的 SQL 查询：

```
 if exists (select * from dbo.sysobjects where id = object_id(N'Banana.[Banan
a]') and OBJECTPROPERTY(id, N'IsUserTable') = 1) drop table Banana.[Banana]

    if exists (select * from dbo.sysobjects where id = object_id(N'Monkey.[Monke
y]') and OBJECTPROPERTY(id, N'IsUserTable') = 1) drop table Monkey.[Monkey]

    create table Banana.[Banana] (
        Id INT IDENTITY NOT NULL,
       Color NVARCHAR(255) null,
       primary key (Id)
    ) 
```

在以上这一点上，调试器发现了一个错误：

> 指定的模式名称“Banana”要么不存在，要么您没有使用它的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:33:10.250

仅将相关表添加到每个数据库的 sessionfactory。我会根据命名空间将它们分开：“BananaDbMaps”和“MonkeyDbMaps”

```
foreach (var dataBase in dataBases)
{
    var model = new PersistenceModel();
    foreach (var type in Assembly.GetExecutingAssembly().GetExportedTypes())
    {
        if (!type.IsInterface && !type.IsAbstract && type.IsSubclassOf(typeof(IMappingProvider)) && type.Namespace.EndsWith(dataBase.Key + "DbMaps"))
        {
            model.Add(type);
        }
    }
    config = Fluently.Configure()
        .Database(MsSqlConfiguration.MsSql2008.ConnectionString(dataBase.Value))
        .Mappings(m => m.UsePersistenceModel(model))
        .BuildConfiguration();
   _allFactories.Add(dataBase.Key, config.BuildSessionFactory());
} 
```

# java - 将二进制数据上传到 jax-rs (REST) 服务的最高性能协议

> ID：11274261
> 
> 赞同：2
> 
> 时间：2012-06-30T13:00:20.267
> 
> 标签：java, javascript, json, jax-rs

**环境**

我的应用程序（战争）有一个 JavaScript 前端和一个 Java REST 服务。

要上传的文件将在前端生成，但不是直接由用户交互生成——这*不是*用户自己上传文件的用例。因此，有必要从 JavaScript 代码启动上传。

当我上传二进制数据时，我需要能够发送关于二进制数据的元数据（由应用程序的其他部分生成）——这就是为什么我需要某种协议而不是仅仅上传文件的原因。

**问题**

我无法确定上传文件的最佳做法是什么，主要是关于所使用的协议。

我遇到了以下协议：

*   json
*   xml
*   proctol 缓冲区（通过[protobuf.js](http://code.google.com/p/protobuf-js)）

然而，像往常一样，互联网上有很多不同的信息，这些信息并没有给我一个连贯的画面：

*   关于可靠性，互联网似乎说你最好使用`multipart/mixed`类型来传输数据，而不是纯`application/octet-stream`类型。
*   json 本身并不支持二进制数据，显然，Base64 具有很高的处理开销。
*   它是一个 JavaScript 前端，因此首选 json。
*   当然，我可以使用 protobuf.js，但我更愿意使用前沿技术而不是前沿技术。

我的优先事项是：

*   1 到 10 兆字节的文件的可靠数据传输。
*   高性能和高效的数据传输。
*   可读代码/架构

简而言之，**鉴于我在后端使用 Java REST 服务，上述 3 种格式中的哪一种最适合这些要求？**

（如果我使用 Java REST 服务（而不是 servlet）来上传文件这一事实将是最大的减速，这也是一个很好的答案！）

**编辑**：添加评论要求的信息 - 谢谢！

# menu - Joomla 2.5.6 管理菜单问题

> ID：11274262
> 
> 赞同：0
> 
> 时间：2012-06-30T13:00:28.850
> 
> 标签：menu, components, admin, joomla2.5

曾经使用过一些 Joomla，但最终接管了一个以前由其他人管理的网站。它最近从 1.6 更新到 2.5.6 并且还不错，但是我发现了一些问题，尤其是在管理菜单中。

1.  扩展管理器缺少“更新”、“发现”等子菜单 - 有没有人有办法解决这个问题？！

2.  目录结构中不存在几个组件（管理员或组件），但在管理员的组件菜单中列出，因此如果我尝试重新安装它们，它将不会添加菜单选项...（获取错误说菜单项已经存在）。有谁知道如何从管理员清除菜单选项，以便我可以正确重新安装组件？

它有点乱，但我没有时间在这个网站上从头开始，因为它已经高度定制了！

非常感谢任何帮助-正如我所说，我对 joomla 已经足够熟悉了，但是从头开始设置而不会造成混乱！

非常感谢克莱尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:30:12.810

对于问题 #2，您需要使用 phpmyadmin 或类似工具，并从 xxxx_extensions 表中删除有问题的组件。xxxx 是在安装过程中创建的随机 3、4 或 5 个字符的字符串。

还要检查 xxxx_menu 表中这些组件的菜单项。通常管理菜单项出现在“菜单”菜单中。

警告！手动编辑 SQL 表时要格外小心。如果您犯了一个错误，您可以完全摧毁您的网站。切勿使用该工具进行“丢弃”或“清空”。

至于问题#1，我还没有看到这种行为。你试过更新吗？或在您当前的网站上重新加载 Joomla？（如果您这样做，请务必备份您的网站！我们使用 Akeeba 备份来执行此操作）

# excel - 连接长字符串以上传到网站

> ID：11274268
> 
> 赞同：0
> 
> 时间：2012-06-30T13:00:58.923
> 
> 标签：excel, concatenation

我们在excel上使用了concatenate函数在excel上添加了一串文本。我们正在尝试组合大约 10 个字段，总共 300 个字符。concatenate 函数适用于 excel，一旦我们粘贴值以删除公式，就会创建正确的文本字符串。但是，当我们尝试将此信息用作 CSV、制表符分隔的文件以导入我们的网络商店时，就会出现问题，无法识别连接文本。当我们检查单元格的格式时，字符显示为一堆############，而不是文本，我相信这就是它不允许我们导入的原因文件。小文本字符串有效，但长字符串无效。我们必须使用打开的计算电子表格来连接，但是这有同样的问题。我们已将文件保存在 UT8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:50:41.937

如果要保存为 csv，则不应检查单元格。你应该有一个文本文件来检查。您也不需要将公式粘贴为值，因为在另存为文本文件后不会保留任何公式。

使用连接公式准备好 Excel 文件后，将工作表另存为制表符分隔的 .txt 或逗号分隔的 .csv。

在记事本中打开它以验证这些值是否仍然是您期望的值，而不是##### 字符。

那时，您的导入应该可以工作。

# c# - C#：接受树对象参数的线程

> ID：11274275
> 
> 赞同：0
> 
> 时间：2012-06-30T13:01:47.273
> 
> 标签：c#, multithreading, object

> **可能重复：**
> [具有多个参数的线程](https://stackoverflow.com/questions/831009/thread-with-multiple-parameters)

我知道如何使用以下代码调用具有 1 个对象的线程：

```
 Thread t = new Thread(o => { CALL((string)o); });
                t.Start(i.ToString()); 
```

但是如果我想调用一个需要 3 个对象参数的方法呢？怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:08:20.313

您可以将其`new object[] { param1, param2, ... , paramN }`作为对象传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:59:29.880

或者，除了数组之外，您还可以传递一个[Tuple](http://msdn.microsoft.com/en-us/library/dd383822.aspx)。更强的类型，至少对于所关注的值而言。

# java - 如何提高 Kabeja 生成的图像的质量？

> ID：11274276
> 
> 赞同：1
> 
> 时间：2012-06-30T13:01:51.737
> 
> 标签：java, image, dxf

我正在使用[kabeja](http://kabeja.sourceforge.net/)包开发一个项目，我能够使用它从 DXF 文件生成图像，我需要知道如何使用 kabeja 包来提高生成的图像质量。请有人解释如何存档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:04:52.767

生成图片时可以设置页面大小、长度和宽度

```
<property name="paper" value="A3"/>
<property name="width" value="420mm"/>
<property name="height" value="297mm"/> 
```

参考 kabeja-0.4\blocks\svg\conf\process.xml 并相应地设置参数。

# macos - 在 Mac OS X 中调整 NSWindows 大小和固定比例

> ID：11274277
> 
> 赞同：5
> 
> 时间：2012-06-30T13:02:04.410
> 
> 标签：macos, scale, nsview, nswindow, resize

当用户在 Mac OS X 中调整 NSWindow 元素的大小时，我正在考虑制作一个具有固定比例的窗口。

我最初尝试过：

```
- (NSSize)windowWillResize:(NSWindow *)sender toSize:(NSSize)frameSize
{
    NSSize windowSize = frameSize;
    windowSize.width = windowSize.height*1.6;

    return windowSize;
} 
```

哪个做基本工作，除此之外，只有当用户从底部或角落拖动窗口时才有效，而不是从侧面拖动。

于是我又看了看，发现如下：

```
[_window setAspectRatio:NSMakeSize(1.6, 1)]; 
```

（我把它放在 applicationDidFinishLaunching 中：）

这最初看起来像是要完成这项工作，但是当您调整窗口大小时，它最初会跳转，然后正常工作。

此外，当窗口放大时，我的图形接缝看起来很模糊，即使它们的质量大于窗口大小。

基本上，我希望是否有人对新的 Mac OS X 开发人员在更改窗口大小方面有任何提示和技巧。对于 iOS，我从来不必担心这个问题，我想在为更大的屏幕尺寸重新设计应用程序 UI 之前解决这个问题。

谢谢！

# macos - 用于确定规格的终端命令

> ID：11274279
> 
> 赞同：3
> 
> 时间：2012-06-30T13:02:20.030
> 
> 标签：macos

我意识到您可以通过检查桌面上的“关于此 Mac”功能轻松确定 Mac 规格。但如果可能的话，我想通过终端来做。那么你如何去做呢？如果有任何综合资源，您可以推荐给我指点！

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T13:30:42.550

你要找的是`system_profiler`命令。

为所有创建`plist`包含系统信息`SPDataTypes`：

```
system_profiler -xml 
```

创建`plist`包含特定信息`SPDataType`：

```
system_profiler -xml SPHardwareRAIDDataType 
```

名单`SPDataTypes`：

```
SPParallelATADataType
SPApplicationsDataType
SPAudioDataType
SPBluetoothDataType
SPCardReaderDataType
SPComponentDataType
SPDeveloperToolsDataType
SPDiagnosticsDataType
SPDiscBurningDataType
SPEthernetDataType
SPExtensionsDataType
SPFibreChannelDataType
SPFireWireDataType
SPFirewallDataType
SPFontsDataType
SPFrameworksDataType
SPDisplaysDataType
SPHardwareDataType
SPHardwareRAIDDataType
SPNetworkLocationDataType
SPLogsDataType
SPManagedClientDataType
SPMemoryDataType
SPModemDataType
SPNetworkDataType
SPPCIDataType
SPParallelSCSIDataType
SPPowerDataType
SPPrefPaneDataType
SPPrintersSoftwareDataType
SPPrintersDataType
SPConfigurationProfileDataType
SPSASDataType
SPSerialATADataType
SPSoftwareDataType
SPStartupItemDataType
SPSyncServicesDataType
SPThunderboltDataType
SPUSBDataType
SPUniversalAccessDataType
SPNetworkVolumeDataType
SPWWANDataType
SPAirPortDataType 
```

有关如何使用`system_profiler`运行的更多详细信息：

```
man system_profiler 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T20:24:51.803

正如@Anne 发布的那样，`system_profiler`它很有用，但如果您需要更多详细信息，例如 CPU 型号、系列、步进、功能（例如 SSSE3），请尝试

```
sysctl 
```

每行输出都包含完整的类别层次结构，因此您可以将结果向下搜索到您要查找的内容，例如。查看 CPU 详细信息：

```
sysctl | grep machdep.cpu 
```

在线或在终端中查看[手册页：](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/sysctl.8.html)

```
man sysctl 
```

# vb.net - 对.net复选框的误解

> ID：11274280
> 
> 赞同：0
> 
> 时间：2012-06-30T13:02:31.467
> 
> 标签：vb.net

情况如下：

我的表单是 tabcontrol，而在第一个选项卡中，autoscroll property=true 是复杂的 GUI，其中第一个控件是复选框。我使用带有默认主题的 Windows 7，当复选框被聚焦时我无论如何都看不到。而且，这个控件的关键事件根本不起作用，所以当我按下 key.Up 焦点会自动跳转到我的 gui 上的最后一个控件，我想在复选框处停止焦点。但是 e.keycode = keys.Up 在复选框的 keydown 事件下从未被触发，因此我无法将 e.handled 设置为 true。

我做错了什么还是 .net 复选框有“内置问题”？在此复选框上，tabindex 设置为 0，tabstop 设置为 true。

# java - 如何在整个应用程序中使用对象？

> ID：11274281
> 
> 赞同：-4
> 
> 时间：2012-06-30T13:02:35.193
> 
> 标签：java, spring, jakarta-ee, spring-mvc

为了更好地解决这个问题：

我制作了一个 Java EE (Spring MVC) 应用程序。

我们的问题：要使一个对象和该对象使用整个应用程序（服务器启动到服务器停止），并且该对象具有至少 20-25 个类 bean。并且这个对象在会话范围内使用（这意味着用户登录到注销）。并且这个对象具有所有用户。我们的应用程序有 10000-50000 个用户。

那么我可以在会话中存储对象吗？或者我可以将对象存储在服务器内存中（使用 MAP 变量制作 bean 并使用@autowaired）或者你有更好的主意，给我..

谢谢，卡姆莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:11:43.117

这个会话范围还是应用范围？如果是应用程序范围，我会查看内存缓存以及可能基于磁盘的备份（hazelcast/redis/ehcache）。您可以根据需要从缓存中删除数据。

# javascript - 导入 JSON 并转换为数组

> ID：11274282
> 
> 赞同：0
> 
> 时间：2012-06-30T13:02:58.860
> 
> 标签：javascript, jquery, json

我尝试了很多东西，但没有任何效果。我正在使用 jQuery。

所以我要做的是真正导入[http://jacce.dyndns.org/game/resources/game/map.php](http://jacce.dyndns.org/game/resources/game/map.php)（到目前为止我成功使用$.getJSON），将其转换为数组然后将其放入一个全局变量。

我真的不知道如何做最后两件事（嗯，我知道如何创建全局变量，但不知道如何在 jQuery 函数中创建）。那么，有什么帮助吗？

编辑：这是 JSON：

```
{
    "-5": {
        "-5": {
            "id": "1",
            "colour": ""
        },
        "-4": {
            "id": "2",
            "colour": ""
        },
        "-3": {
            "id": "3",
            "colour": ""
        },
        "-2": {
            "id": "4",
            "colour": ""
        },
        "-1": {
            "id": "5",
            "colour": ""
        },
        "1": {
            "id": "6",
            "colour": ""
        },
        "2": {
            "id": "7",
            "colour": ""
        },
        "3": {
            "id": "8",
            "colour": ""
        },
        "4": {
            "id": "9",
            "colour": ""
        },
        "5": {
            "id": "10",
            "colour": ""
        }
    },
    "-4": {
        "-5": {
            "id": "11",
            "colour": " fill=\"#A90000\""
        },
        "-4": {
            "id": "12",
            "colour": ""
        },
        "-3": {
            "id": "13",
            "colour": ""
        },
        "-2": {
            "id": "14",
            "colour": ""
        },
        "-1": {
            "id": "15",
            "colour": ""
        },
        "1": {
            "id": "16",
            "colour": ""
        },
        "2": {
            "id": "17",
            "colour": ""
        },
        "3": {
            "id": "18",
            "colour": ""
        },
        "4": {
            "id": "19",
            "colour": " fill=\"#A90000\""
        },
        "5": {
            "id": "20",
            "colour": ""
        }
    },
    "-3": {
        "-5": {
            "id": "21",
            "colour": ""
        },
        "-4": {
            "id": "22",
            "colour": ""
        },
        "-3": {
            "id": "23",
            "colour": ""
        },
        "-2": {
            "id": "24",
            "colour": ""
        },
        "-1": {
            "id": "25",
            "colour": ""
        },
        "1": {
            "id": "26",
            "colour": ""
        },
        "2": {
            "id": "27",
            "colour": ""
        },
        "3": {
            "id": "28",
            "colour": ""
        },
        "4": {
            "id": "29",
            "colour": " fill=\"#A90000\""
        },
        "5": {
            "id": "30",
            "colour": ""
        }
    },
    "-2": {
        "-5": {
            "id": "31",
            "colour": ""
        },
        "-4": {
            "id": "32",
            "colour": ""
        },
        "-3": {
            "id": "33",
            "colour": ""
        },
        "-2": {
            "id": "34",
            "colour": ""
        },
        "-1": {
            "id": "35",
            "colour": ""
        },
        "1": {
            "id": "36",
            "colour": ""
        },
        "2": {
            "id": "37",
            "colour": ""
        },
        "3": {
            "id": "38",
            "colour": ""
        },
        "4": {
            "id": "39",
            "colour": ""
        },
        "5": {
            "id": "40",
            "colour": ""
        }
    },
    "-1": {
        "-5": {
            "id": "41",
            "colour": ""
        },
        "-4": {
            "id": "42",
            "colour": ""
        },
        "-3": {
            "id": "43",
            "colour": " fill=\"#A90000\""
        },
        "-2": {
            "id": "44",
            "colour": ""
        },
        "-1": {
            "id": "45",
            "colour": ""
        },
        "1": {
            "id": "46",
            "colour": ""
        },
        "2": {
            "id": "47",
            "colour": ""
        },
        "3": {
            "id": "48",
            "colour": ""
        },
        "4": {
            "id": "49",
            "colour": ""
        },
        "5": {
            "id": "50",
            "colour": ""
        }
    },
    "1": {
        "-5": {
            "id": "51",
            "colour": " fill=\"#A90000\""
        },
        "-4": {
            "id": "52",
            "colour": ""
        },
        "-3": {
            "id": "53",
            "colour": ""
        },
        "-2": {
            "id": "54",
            "colour": " fill=\"#A90000\""
        },
        "-1": {
            "id": "55",
            "colour": ""
        },
        "1": {
            "id": "56",
            "colour": ""
        },
        "2": {
            "id": "57",
            "colour": ""
        },
        "3": {
            "id": "58",
            "colour": ""
        },
        "4": {
            "id": "59",
            "colour": ""
        },
        "5": {
            "id": "60",
            "colour": ""
        }
    },
    "2": {
        "-5": {
            "id": "61",
            "colour": ""
        },
        "-4": {
            "id": "62",
            "colour": ""
        },
        "-3": {
            "id": "63",
            "colour": ""
        },
        "-2": {
            "id": "64",
            "colour": ""
        },
        "-1": {
            "id": "65",
            "colour": ""
        },
        "1": {
            "id": "66",
            "colour": ""
        },
        "2": {
            "id": "67",
            "colour": ""
        },
        "3": {
            "id": "68",
            "colour": ""
        },
        "4": {
            "id": "69",
            "colour": ""
        },
        "5": {
            "id": "70",
            "colour": ""
        }
    },
    "3": {
        "-5": {
            "id": "71",
            "colour": ""
        },
        "-4": {
            "id": "72",
            "colour": " fill=\"#000D81\""
        },
        "-3": {
            "id": "73",
            "colour": ""
        },
        "-2": {
            "id": "74",
            "colour": ""
        },
        "-1": {
            "id": "75",
            "colour": ""
        },
        "1": {
            "id": "76",
            "colour": ""
        },
        "2": {
            "id": "77",
            "colour": ""
        },
        "3": {
            "id": "78",
            "colour": ""
        },
        "4": {
            "id": "79",
            "colour": ""
        },
        "5": {
            "id": "80",
            "colour": " fill=\"#A90000\""
        }
    },
    "4": {
        "-5": {
            "id": "81",
            "colour": ""
        },
        "-4": {
            "id": "82",
            "colour": ""
        },
        "-3": {
            "id": "83",
            "colour": ""
        },
        "-2": {
            "id": "84",
            "colour": ""
        },
        "-1": {
            "id": "85",
            "colour": ""
        },
        "1": {
            "id": "86",
            "colour": " fill=\"#A90000\""
        },
        "2": {
            "id": "87",
            "colour": ""
        },
        "3": {
            "id": "88",
            "colour": ""
        },
        "4": {
            "id": "89",
            "colour": ""
        },
        "5": {
            "id": "90",
            "colour": ""
        }
    },
    "5": {
        "-5": {
            "id": "91",
            "colour": ""
        },
        "-4": {
            "id": "92",
            "colour": ""
        },
        "-3": {
            "id": "93",
            "colour": " fill=\"#A90000\""
        },
        "-2": {
            "id": "94",
            "colour": ""
        },
        "-1": {
            "id": "95",
            "colour": ""
        },
        "1": {
            "id": "96",
            "colour": ""
        },
        "2": {
            "id": "97",
            "colour": ""
        },
        "3": {
            "id": "98",
            "colour": ""
        },
        "4": {
            "id": "99",
            "colour": ""
        },
        "5": {
            "id": "100",
            "colour": ""
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:18:32.857

我把这个答案放在了，因为我认为 OP 混淆了数组和对象。

这将起作用：

```
var t;

$.getJSON('/url', {param: someparam}, function(data){
    t = data;
}); 
```

data var 表示字符串化的 JSON 输出，您基本上只需将输出传递给全局定义的 var...done。

它会将您的 JSON 全部输出到一个对象中。你不能有一个数组，因为负数在 JS 中不算作 int 数组键。

但这将允许您执行以下操作：

```
$.each(t, function(){
    console.log($(this));
}); 
```

把你的“行”拿出来。

或者像：

```
t['-3']; 
```

要了解数组和对象之间的这种区别，请阅读此处：[http ://www.hunlock.com/blogs/Mastering_Javascript_Arrays](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays)

还有另一个链接：[数组和对象有什么区别？](https://stackoverflow.com/questions/874205/what-is-the-difference-between-an-array-and-an-object)

# validation - 在 PHP 中使用标头签名进行文件验证

> ID：11274283
> 
> 赞同：2
> 
> 时间：2012-06-30T13:03:22.247
> 
> 标签：validation, file-upload, php-5.3

假设我有一个文件 a.png。在 php 中，我们将使用扩展名和 mime 类型对其进行验证。

在表单中，我进行了上述验证，因此只有 png 文件会上传。如果我将 xyz.pdf 制作为 a.png 它将有效。

我想验证带有头签名的文件，就像在.NET中一样。

此外，如果图像损坏，则在上传时也会显示消息图像已损坏，无法上传。

在 PHP 中我们必须使用 exif_imagetype 吗？仅用于图像，视频，音频或任何文件之类的文件如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:35:56.017

您可以确定它的 MIME 类型。PHP mime_content_type 可以解决这个问题，但它在 PHP 5.3 中已被弃用。您可以在其中使用 file_info_file 。

查看此链接以获得更详细的说明：

[http://www.php.net/manual/en/function.mime-content-type.php](http://www.php.net/manual/en/function.mime-content-type.php) http://us2.php.net/manual/en/function.finfo-file.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:09:05.720

对于 php 中的 png 图像，您还可以使用[createimagefrompng](http://php.net/manual/function.imagecreatefrompng.php) 如果它不是有效的 png 图像文件，它会返回 FALSE。

# c# - 理解代码 - lambda 表达式

> ID：11274287
> 
> 赞同：0
> 
> 时间：2012-06-30T13:03:41.980
> 
> 标签：c#

我正在查看这个 eratosthenes 筛子的代码，但我仍然无法理解“i”变量是如何增加的，因为我对 lambda 表达式的了解有限，并且文档对我没有多大帮助。谁能解释一下？

```
int cur = 1, total = 1000;
var pc = Enumerable.Range(2, total).ToList();

while(cur <= Math.Sqrt(total))
{
    cur = pc.First(i => i > cur);
    pc.RemoveAll(i => i != cur && i % cur == 0);
}

Console.WriteLine(pc.Max()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:09:54.250

它实际上并没有增加。在此代码中的两个 lambda 表达式中，`i`都用作当前处理值的临时占位符。即，

```
cur = pc.First(i => i > cur); 
```

表示“取第一个大于from 的*值*并将其分配给”。`cur``pc``cur`

```
pc.RemoveAll(i => i != cur && i % cur == 0); 
```

意思是“取所有不等于并且除以零提示的*值*并将它们从 pc 中删除”。`cur``cur`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:08:50.003

变量 cur 在 while 循环中更新：

```
cur = pc.First(i => i > cur); 
```

i 只是返回第一次出现 i > cur 的谓词的一部分。换句话说，在这些情况下，它是一个局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:12:27.670

它不是 i 而是 cur 变量，它控制何时退出循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T13:15:10.930

它不会增加，它依赖于 pc 删除成员，直到不满足 while 条件。

把它想象成两者之间的区别

```
index = 1000;
while (index > 0)
{
    pc.Remove(index);
    index--;
} 
```

和

```
while (pc.Count > 0)
{
   pc.Remove(0);
} 
```

# package - 为什么我的 debian postinst 脚本没有运行？

> ID：11274290
> 
> 赞同：7
> 
> 时间：2012-06-30T13:04:21.807
> 
> 标签：package, debian, dpkg

[我使用fpm](https://github.com/jordansissel/fpm/wiki)制作了`.deb`我的应用程序：

```
fpm -s dir -t deb -n myapp -v 9 -a all -x "*.git" -x "*.bak" -x "*.orig" \
--after-remove debian/postrm  --after-install debian/postinst \
--description "Automated build." -d mysql-client -d python-virtualenv home 
```

除其他外，该`postinst`脚本应该为应用程序创建一个用户：

```
#!/bin/sh

    set -e

    APP_NAME=myapp

    case "$1" in
        configure)
            virtualenv /home/$APP_NAME/local
            #supervisorctl start $APP_NAME
        ;;

    # http://www.debian.org/doc/manuals/securing-debian-howto/ch9.en.html#s-bpp-lower-privs
       install|upgrade)

       # If the package has default file it could be sourced, so that
       # the local admin can overwrite the defaults

       [ -f "/etc/default/$APP_NAME" ] && . /etc/default/$APP_NAME

       # Sane defaults:

       [ -z "$SERVER_HOME" ] && SERVER_HOME=/home/$APP_NAME
       [ -z "$SERVER_USER" ] && SERVER_USER=$APP_NAME
       [ -z "$SERVER_NAME" ] && SERVER_NAME=""
       [ -z "$SERVER_GROUP" ] && SERVER_GROUP=$APP_NAME

       # Groups that the user will be added to, if undefined, then none.
       ADDGROUP=""

       # create user to avoid running server as root
       # 1\. create group if not existing
       if ! getent group | grep -q "^$SERVER_GROUP:" ; then
          echo -n "Adding group $SERVER_GROUP.."
          addgroup --quiet --system $SERVER_GROUP 2>/dev/null ||true
          echo "..done"
       fi
       # 2\. create homedir if not existing
       test -d $SERVER_HOME || mkdir $SERVER_HOME
       # 3\. create user if not existing
       if ! getent passwd | grep -q "^$SERVER_USER:"; then
         echo -n "Adding system user $SERVER_USER.."
         adduser --quiet \
                 --system \
                 --ingroup $SERVER_GROUP \
                 --no-create-home \
                 --disabled-password \
                 $SERVER_USER 2>/dev/null || true
         echo "..done"
       fi

       # … and a bunch of other stuff. 
```

似乎`postinst`脚本是用 调用的`configure`，但不是用调用的，`install`我试图理解为什么。在`/var/log/dpkg.log`中，我看到了我期望的行：

```
2012-06-30 13:28:36 configure myapp 9 9
2012-06-30 13:28:36 status unpacked myapp 9
2012-06-30 13:28:36 status half-configured myapp 9
2012-06-30 13:28:43 status installed myapp 9 
```

我检查了`/etc/default/myapp`不存在。该文件`/var/lib/dpkg/info/myapp.postinst`存在，如果我使用`install`第一个参数手动运行它，它会按预期工作。

为什么`postinst`脚本没有运行`install`？我能做些什么来进一步调试呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T05:05:05.640

我认为您复制的示例脚本是完全错误的。`postinst`不应该用任何`install`或`upgrade`参数调用，永远。dpkg 格式的权威定义是 Debian Policy Manual。当前版本`postinst`在[第 6 章](http://www.debian.org/doc/debian-policy/ch-maintainerscripts.html)中进行了描述， 并且仅列出了`configure`、`abort-upgrade`、`abort-remove`、 `abort-remove`和`abort-deconfigure`作为可能的第一个参数。

我对我的回答没有完全的信心，因为你的坏例子仍然在 debian.org 上，很难相信这样的错误会漏掉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-20T09:10:43.590

我相信艾伦库里提供的答案是不正确的，至少在 2015 年及以后。您的包的构建方式或文件中的错误导致您的问题
一定有一些错误。您可以通过在命令行中添加 (debug) 选项来 调试您的安装，即：`postinst`
`-D`

```
sudo dpkg -D2 -i yourpackage_name_1.0.0_all.deb 
```

`-D2`应该解决这类问题

作为记录，调试级别如下：

```
 Number   Description
               1   Generally helpful progress information
               2   Invocation and status of maintainer scripts
              10   Output for each file processed
             100   Lots of output for each file processed
              20   Output for each configuration file
             200   Lots of output for each configuration file
              40   Dependencies and conflicts
             400   Lots of dependencies/conflicts output
           10000   Trigger activation and processing
           20000   Lots of output regarding triggers
           40000   Silly amounts of output regarding triggers
            1000   Lots of drivel about e.g. the dpkg/info dir
            2000   Insane amounts of drivel 
```

该`install`命令调用该`configure`选项，根据我的经验，该`postinst`脚本将始终运行。可能会让您感到困惑的一件事是`postrm`“旧”版本的脚本，如果升级包，将**在**您当前的包`preinst`脚本之后运行，如果您没有意识到发生了什么，这可能会造成严重破坏。
从 dpkg 手册页： 安装包括以下步骤：

```
 1\. Extract the control files of the new package.

          2\.  If  another version of the same package was installed before
          the new installation, execute prerm script of the old package.

          3\. Run preinst script, if provided by the package.

          4\. Unpack the new files, and at the same time back  up  the  old
          files, so that if something goes wrong, they can be restored.

          5\.  If  another version of the same package was installed before
          the new installation, execute the postrm script of the old pack‐
          age.  Note that this script is executed after the preinst script
          of the new package, because new files are written  at  the  same
          time old files are removed.

          6\.  Configure the package. 

          Configuring consists of the following steps:

          1\.  Unpack  the  conffiles, and at the same time back up the old
          conffiles, so that they can be restored if something goes wrong.

          2\. Run postinst script, if provided by the package. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-29T15:22:54.923

这是一个已经解决的老问题，但在我看来，公认的解决方案并不完全正确，我认为有必要为像我一样遇到同样问题的人提供信息。

[第 6.5 章](https://www.debian.org/doc/debian-policy/ch-maintainerscripts.html)详细介绍了调用 preinst 和 postinst 文件的所有参数

在[https://wiki.debian.org/MaintainerScripts](https://wiki.debian.org/MaintainerScripts)有详细的安装和卸载流程。

观察在以下情况下会发生什么：

apt-get install package - 它运行**preinst install**然后**postinst configure**

apt-get remove package - 执行 postrm remove 并且包将被设置为“ **Config Files** ”

要使包实际处于“**未安装**”状态，必须使用它：

apt-get 清除包

这是我们下次安装软件包时能够运行**preinst install**和**postinst configure**的唯一方法。

# google-apps-script - 如何为使用 Google Script 开发的 Google 电子表格发布自定义函数

> ID：11274292
> 
> 赞同：1
> 
> 时间：2012-06-30T13:04:25.070
> 
> 标签：google-apps-script, google-sheets, add-on, custom-function

如果我听起来很幼稚，请原谅我，我确实在 Google Script 网站上阅读了一些教程。

我最近意识到使用 Google Script 使用自定义函数扩展 Google 电子表格功能。

我了解该脚本与在 Google Docs 中打开并使用工具菜单插入自定义函数代码的特定电子表格相关联。电子表格就像自定义函数代码的容器一样工作

我无法理解的问题是这些函数是如何发布的，以及最终用户如何发现自定义函数的可用性，以便他们可以将这些自定义函数插入到他们创建的电子表格中

有没有办法将一组自定义函数放在一起像函数库一样工作，或者我们是否必须创建单独的函数并发布每个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:01:34.090

正如您所提到的，自定义函数的可用性仅限于最近编写自定义函数的电子表格。

您现在可以创建函数库，并使其可供其他电子表格通过脚本 ID 使用 - 文档中的更多详细信息[https://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:36:19.470

如果您将脚本发布到[脚本库](https://developers.google.com/apps-script/publishing_gallery)，其他用户可以发现并安装它。他们将在电子表格中安装脚本源的副本。

# sql - firebird 的 sql 代码无法编译

> ID：11274296
> 
> 赞同：2
> 
> 时间：2012-06-30T13:05:25.813
> 
> 标签：sql, firebird

我在尝试使用 Firebird 包中的 isql 工具创建简单数据库时遇到奇怪的错误。

用于创建表的相同代码适用于具有其他名称的其他表。我试过在字段和表名周围加引号和不加引号，都没有成功。

它是 Firebird 2.5 服务器版本。

我试图执行的代码：

```
SET SQL DIALECT 3;
SET NAMES UTF8;
CREATE DATABASE 'localhost:C:\fuzzdb.fdb' user 'SYSDBA' password 'masterkey'
DEFAULT CHARACTER SET UTF8;

CREATE TABLE RULES (
RULE_ID INTEGER NOT NULL,
IF_FUZZY SMALLINT,
CONSTRAINT PK_RULE_ID
PRIMARY KEY (RULE_ID),
);

CREATE TABLE VARS (
VAR_ID INTEGER NOT NULL,
VRULE_ID INTEGER,
INPOUTP SMALLINT,
RANGE_STRT INTEGER,
RANGE_END INTEGER,
VAR_NAME VARCHAR(40),
FUZ_SET INTEGER,
CONSTRAINT PK_VAR_ID
PRIMARY KEY (VAR_ID)
);

CREATE TABLE FUZZSETS (
FS_ID INTEGER NOT NULL,
FS_NAME VARCHAR(40),
INPOUTP SMALLINT,
PAR1 FLOAT,
PAR2 FLOAT,
PAR3 FLOAT,
PAR4 FLOAT,
PAR5_HEDGE INTEGER,
FUZ_SET INTEGER,
CONSTRAINT PK_FS_ID
  PRIMARY KEY (FS_ID)
);

CREATE TABLE FRULES (
FRULE_ID INTEGER NOT NULL,
RULE_ID INTEGER,
VAR_ID INTEGER,
FS_ID INTEGER,
INPOUTP SMALLINT,  
CONSTRAINT PK_FRULE_ID
PRIMARY KEY (FRULE_ID)
);

CREATE TABLE LINK_RV (
LINK_RULES INTEGER,
LINK_VARS INTEGER,
CONSTRAINT FK_LINK_RV
PRIMARY KEY (LINK_RULES, LINK_VARS)
);

CREATE TABLE LINK_VARFS (
LINK_VRS INTEGER,
LINK_FS INTEGER,
CONSTRAINT FK_LINK_VARFS
PRIMARY KEY (LINK_VRS, LINK_FS)
);

CREATE TABLE LINK_RLVR (
LINK_RULE INTEGER NOT NULL,
LINK_VR INTEGER NOT NULL,
CONSTRAINT FK_LINK_RLVR
PRIMARY KEY (LINK_RULE, LINK_VR)
);

CREATE TABLE LINK_FRL_RL (      
LINK_FRULE INTEGER NOT NULL,
LINK_RULE INTEGER NOT NULL,
CONSTRAINT FK_LINK_FRL_RL
PRIMARY KEY (LINK_FRULE, LINK_RULE)
);

CREATE TABLE LINK_FRL_VAR (
LINK_FRULE INTEGER NOT NULL,
LINK_VAR INTEGER NOT NULL,
CONSTRAINT FK_LINK_FRL_VAR
PRIMARY KEY (LINK_FRULE, LINK_VAR)
);

CREATE TABLE LINK_FRL_FS (
LINK_FSRULE INTEGER NOT NULL,
LINK_FS INTEGER NOT NULL,
CONSTRAINT FK_LINK_FRL_FS
PRIMARY KEY (LINK_FRULE, LINK_FS)
);

ALTER TABLE LINK_FRL_FS
ADD CONSTRAINT FK_LINK_FSRULE
FOREIGN KEY(LINK_FSRULE)
REFERENCES FRULES(FRULE_ID);

ALTER TABLE LINK_FRL_FS
ADD CONSTRAINT FK_LINK_FS
FOREIGN KEY(LINK_FS)
REFERENCES FUZZSETS(FS_ID);

ALTER TABLE LINK_FRL_VAR
ADD CONSTRAINT FK_LINK_FRULE
FOREIGN KEY(LINK_FRULE)
REFERENCES FRULES(FRULE_ID);

ALTER TABLE LINK_FRL_VAR
ADD CONSTRAINT FK_LINK_VAR
FOREIGN KEY(LINK_VAR)
REFERENCES FUZZSETS(VAR_ID);

ALTER TABLE LINK_FRL_RL
ADD CONSTRAINT FK_LINK_FRULE
FOREIGN KEY(LINK_FRULE)
REFERENCES FRULES(FRULE_ID);

ALTER TABLE LINK_FRL_RL
ADD CONSTRAINT FK_LINK_RULE
FOREIGN KEY(LINK_RULE)
REFERENCES RULES(RULE_ID);

CREATE GENERATOR GEN_RULE_ID;
CREATE GENERATOR GEN_VAR_ID;
CREATE GENERATOR GEN_FS_ID;
CREATE GENERATOR GEN_FRULE_ID;

SET TERM ^ ;

CREATE TRIGGER BI_RULES FOR RULES
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
IF (NEW.RULE_ID IS NULL) THEN
  NEW.RULE_ID = GEN_ID(GEN_RULE_ID, 1);
END^

CREATE TRIGGER BI_VARS FOR VARS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
IF (NEW.VAR_ID IS NULL) THEN
  NEW.VAR_ID = GEN_ID(GEN_VAR_ID, 1);
END^

CREATE TRIGGER BI_FUZZSETS FOR FUZZSETS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
IF (NEW.FS_ID IS NULL) THEN
  NEW.FS_ID = GEN_ID(GEN_FS_ID, 1);
END^

CREATE TRIGGER BI_FRULES FOR FRULES
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
IF (NEW.FRULE_ID IS NULL) THEN
  NEW.FRULE_ID = GEN_ID(GEN_FRULE_ID, 1);
END^

SET TERM ; ^
COMMIT; 
```

* * *

isql 命令的输出：

```
Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLSTATE = 42000
Dynamic SQL Error
-SQL error code = -104
-Token unknown - line 6, column 3
-)
At line 10 in file c:\fdb.sql
Statement failed, SQLSTATE = 42000
unsuccessful metadata update
-Unknown columns in index FK_LINK_FRL_FS
After line 82 in file c:\fdb.sql
Statement failed, SQLSTATE = 42S02
Dynamic SQL Error
-SQL error code = -204
-Table unknown
-LINK_FRL_FS
-At line 1, column 13.
After line 89 in file c:\fdb.sql
Statement failed, SQLSTATE = 42S02
Dynamic SQL Error
-SQL error code = -204
-Table unknown
-LINK_FRL_FS
-At line 1, column 13.
After line 94 in file c:\fdb.sql
Statement failed, SQLSTATE = 42000
unsuccessful metadata update
-could not find UNIQUE or PRIMARY KEY constraint in table FUZZSETS with specifie
d columns
After line 104 in file c:\fdb.sql
Statement failed, SQLSTATE = 42S11
unsuccessful metadata update
-Index FK_LINK_FRULE already exists
After line 109 in file c:\fdb.sql
Statement failed, SQLSTATE = 42000
unsuccessful metadata update
-Table RULES not found
After line 114 in file c:\fdb.sql
Statement failed, SQLSTATE = 42S02
Dynamic SQL Error
-SQL error code = -204
-Table unknown
-RULES
-At line 1, column 29
At line 130 in file c:\fdb.sql 
```

* * *

我不明白为什么无法创建第一个表“规则”，尽管命令与其他表相似。即使没有所有触发器和外键（更改表..），我也至少得到了最后一个错误。它说“索引 FK_LINK_FRL_FS 中的未知列”，但没有提及其他类似的索引表。

我刚开始使用数据库，可能是我错过或混合了一些东西，但我尝试编译太多更改但仍然出现错误。我在这里找到了或多或少相似的代码

[http://sergworks.wordpress.com/category/firebird/](http://sergworks.wordpress.com/category/firebird/)

我能够毫无问题地编译它。有人可以指出我正确的方向或以另一种方式展示它是如何完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:24:54.037

PK 约束末尾有一个不必要的逗号：

```
CONSTRAINT PK_RULE_ID
PRIMARY KEY (RULE_ID), 
```

因此，解析器 expexts 字段或约束的定义，但它找到“）”。删除逗号，你应该没问题。

# python - 如何配置不需要 sudo 的虚拟环境？

> ID：11274297
> 
> 赞同：2
> 
> 时间：2012-06-30T13:05:59.123
> 
> 标签：python, pip, easy-install

在我的 Ubuntu 12.04 机器上，安装 pip 要求每次尝试安装时都要求我提供 sudo 权限。我将如何覆盖它，因为这对于我的工作环境来说很糟糕，无法在全局而不是在 venv 内安装东西？

注意：我没有使用 sudo 设置 venv。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:13:28.363

感谢@MartijnPieters，我找到了一种解决方法：

跑步

```
~/.virtualenvs/myapp/bin/pip install -r requirements.txt 
```

而不仅仅是

```
pip install -r requirements.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:10:13.500

您是否激活了虚拟环境？跑：

```
. bin/activate 
```

在你的壳里。然后本地`pip`安装将接管系统一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T00:18:10.230

确保您使用最新版本的 virtualenv 本身，在撰写本文时最新版本是 1.7.2。旧版本需要使用 -E 开关，才能安装到虚拟环境中。

# c++ - STL for_each 不适用于 Xcode 中的地图

> ID：11274303
> 
> 赞同：0
> 
> 时间：2012-06-30T13:08:11.347
> 
> 标签：c++, xcode, stl, functor

我以前很少使用 STL，但我开始使用这个霍夫曼压缩项目。除了“for_each”函数之外，一切似乎都有效，除了函数参数之外，它不会。由于我通常不使用 xcode（我通常使用 eclipse cdt），我不确定问题出在我的代码还是 xcode。

这是 Huff.h 文件

```
class Huff {
private:
    typedef pair<char, int> c_pair;
    vector<Node> nodes;
    vector<Code> code;
    string content;
    void copy_to(c_pair c);
public:
    Huff(string);
    ~Huff();

    string compress();
    bool set_content();
    string get_content();
    string get_compress();
}; 
```

这是 Huff.cpp 文件中不起作用的部分。

```
//---Compress---

void Huff::copy_to(c_pair c){
    Node n(c.second, c.first, NULL, NULL);
    nodes.push_back(n);
}
string Huff::compress(){
    map<char, int> freq;
    for(int i = 0; i < content.length(); i++)
        freq[content[i]]++;
    for_each(freq.begin(), freq.end(), copy_to); //I've also tried this->copy_to
    return "110";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:13:07.213

```
for_each(freq.begin(), freq.end(), copy_to); //I've also tried this->copy_to 
```

`copy_to`是不能传递给的成员函数`std::for_each`。

您需要的是一个不需要隐式的可调用实体`this`：这样的实体可以是*仿函数*或*自由函数*，在 C++11 中，也可以是*lambda*。

如果您可以使用 lambda 解决方案，它将非常简单：

```
for_each(freq.begin(), 
         freq.end(), 
         [this](c_pair & c) { this->copy_to(c); } ); 
```

在此处了解 lambda 表达式：

*   [什么是 C++11 中的 lambda 表达式？](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:21:36.443

正如所指出的，您不能以这种方式使用成员函数`for_each`。

C++03 的替代方法是使用`mem_fun`和`bind1st`构建一个函数对象：

```
std::for_each(freq.begin(), freq.end(), 
              std::bind1st(std::mem_fun(&Huff::copy_to), this)); 
```

或使用[Boost.Bind](http://www.boost.org/libs/bind/)：

```
std::for_each(freq.begin(), freq.end(), 
              boost::bind(&Huff::copy_to, this, _1)); 
```

# c# - 确定哪个参数导致异常的最简单方法是什么？

> ID：11274304
> 
> 赞同：1
> 
> 时间：2012-06-30T13:08:12.790
> 
> 标签：c#, sql-server

我有一个 C# 函数，它通过一个带有 100 多个参数的存储过程将数据持久化到 SQL 服务器。（是的，我知道，这可能不是一个好的设计，而是遗留代码，我们不要在这里讨论。）;-)

由于某种原因，这段代码现在出现了这个错误：

```
System.Data.SqlClient.SqlException was unhandled
  Message=Error converting data type int to tinyint. 
```

现在，我首先查看了参数和变量对，没有明显的罪魁祸首。（参数有很多数据类型，不仅仅是tinyint）

那么确定流氓变量的最快方法是什么？有没有人知道主动处理这个问题的好方法，通过让 c# 端在运行时根据参数验证变量 - 或者以某种方式扩展错误消息以准确判断哪个参数失败？

在这个阶段实施 ORM 不是一个选项。

* * *

编辑：我已经开始编写一个函数`CheckParameters`，该函数最初将遍历参数并简单地列出参数和相应的值。我认为它可以通过不同数据类型的实际知识来扩展，但现在我只想帮助找到错误的变量。

结构如下：

```
 try
        {
            cmdStat.ExecuteNonQuery();
        }
        catch(SqlException)
        {
         CheckParameters(cmdStat.Parameters);   
         //re-throw 
        } 

        private void CheckParameters(SqlParameterCollection parameterCollection)
        {
          foreach (SqlParameter parameter in parameterCollection)
          {
            Trace.Write("{0}, {1}, {2}, {3}", parameter.ParameterName, parameter.DbType, parameter.SqlDbType, parameter.Value);
          }            
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:15:01.753

我要做的是用存根替换 proc。

然后我将二进制切掉一半的参数，使其足够长以应对 int。如果错误消失了，我只会将二进制切开一半，然后再次检查。如果错误没有消失，那么我会做另一半。

我怀疑最多需要不到 10 次尝试才能找到它。

# msbuild - 在机器上没有安装 4.5 运行时构建 4.5 代码？

> ID：11274305
> 
> 赞同：3
> 
> 时间：2012-06-30T13:08:30.777
> 
> 标签：msbuild, build-automation, .net-4.5

我们有一个在 .Net 4.0 下运行的大型复杂系统。我们想开始介绍为 .Net 4.5 编写的代码，但（还）不能假设 .Net 4.5 安装在所有开发人员机器、构建机器和测试实验室上。因此，我正在寻找一种方法来使用磁盘上可用的程序集在仅安装了 .Net 4.0 的机器上编译 MSBuild 中的某些项目。

根据文档，这似乎是可能的。4.5 参考程序集在 msbuild 环境中可用，我一直在试验[TargetFrameworkVersion、FrameworkPathOverride 和 TargetFrameworkMoniker](http://msdn.microsoft.com/en-us/library/bb629394.aspx)属性，但到目前为止没有成功。

任何提示、建议或工作示例都会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:20:44.067

To build a .NET Framework 4.5 application, you must also have the .NET Framework 4.5 reference assemblies.

**Installation**

The .NET Framework 4.5 replaces the common language runtime (CLR), targets, tasks, and tools of the .NET Framework 4 without renaming them. Essentially, it creates a modified and improved .NET Framework 4.

# javascript - 在 PHp 中创建屏幕/浏览器内容输出的 PDF 文件

> ID：11274306
> 
> 赞同：1
> 
> 时间：2012-06-30T13:08:35.217
> 
> 标签：javascript, pdf, screenshot

我正在使用谷歌地图，我正在使用标记创建路线。现在我单击某个按钮（Javascript），我需要将屏幕截图以 pdf 格式保存到某个目录。

我在网上搜索过，但找不到任何令人满意的解决方案。

# ios - 在 iOS 的 Phonegap 应用程序中使用 Admob 的正确方法

> ID：11274309
> 
> 赞同：1
> 
> 时间：2012-06-30T13:08:55.450
> 
> 标签：ios, xcode, cordova, admob

我已经使用 Phonegap (Cordova 1.8.1) 构建了一个 iOS 应用程序，现在我正在尝试将 admob 广告添加到我的应用程序中。如您所知，AdMob 现在不允许选择“智能手机网络”，所以我可以简单地在 index.html 中实现 JavaScript 代码还是我需要使用 Admob iOS SDK？（或者只是使用 Google AdSense？？）

笔记：

`We are simplifying our suite of products by transitioning AdMob mobile web publishers to Google AdSense. Starting May 1, 2012 support for mobile web sites on AdMob will be discontinued and you must have a Google AdSense account to monetize mobile web sites. More information is available here.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:38:05.327

我相信根据他们的服务条款，您必须集成 iOS SDK，因为您仍在发布本机应用程序。

使用 iOS SDK 集成 AdMob 广告非常简单。在其中`(void)webViewDidFinishLoad:(UIWebView *)theWebView`，您可以添加一个 GADBannerView 并按照[此处](https://developers.google.com/mobile-ads-sdk/docs/ios/fundamentals)列出的集成说明进行操作。

要记住的一个重要警告是，您必须减小广告的大小`UIWebView`才能为广告腾出空间。确保`MainViewController`是您的 RootViewController。

# opencl - Opencl中的非方阵乘法

> ID：11274311
> 
> 赞同：0
> 
> 时间：2012-06-30T13:09:27.057
> 
> 标签：opencl, matrix-multiplication, pyopencl

我想用 2 个非方阵 (2000,100), (100,100) 进行矩阵乘法，我尝试像 Nvidia 示例中那样使用块子矩阵，但结果错误，我在这里找到了解决方法。 [CUDA 中的非方阵乘法](https://stackoverflow.com/questions/5460504/non-square-matrix-multiplication-in-cuda) 它使用零填充，所以我将块大小更改为 16，但这是一个错误的工作组大小，我使用 pyopencl 并且不能使用 Blas 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:06:31.170

迄今为止，我在 AFDS 2011 上看到的关于该主题的最佳演示之一。

[PDF 演示文稿。](http://developer.amd.com/afds/assets/presentations/2909_1_final.pdf)

[视频流）](http://developer.amd.com/afds/pages/OLD/video.aspx#/Dev_AFDS_Reb_2909)

[视频（下载）](http://videos.amddevmedia.com/afds/2909_1_RE.mov)

他们的矩阵很大——Linpack 大小——而且不是正方形的。您可以将其主 GPU 内核的块大小从 1024 缩小到更小的值（32,64,128？），以更好地解决您的问题，甚至可能适合您硬件上的 LDS。演示者使用 CPU 来处理 GPU 未触及的不规则尺寸区域。

# c# - 如何停止多次运行的进程

> ID：11274318
> 
> 赞同：4
> 
> 时间：2012-06-30T13:10:46.620
> 
> 标签：c#, winforms

我正在开发我的 Windows 窗体应用程序。我使用以下代码在按钮单击事件上启动计算器进程：

```
System.Diagnostics.Process.Start("calc.exe"); 
```

如果我再次单击该按钮，则会启动另一个计算器进程。那么如何阻止该进程多次运行呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:17:59.583

简单...禁用按钮，直到进程终止。当然，你也可以加入某种逻辑：

```
if(!myProcess.HasExited)
{
  alert("You've already started the calculator app.");
}
else
{
  // start the process
} 
```

就个人而言，我喜欢前者。只需设置一个事件处理程序并设置：

```
Process.EnableRaisingEvents = true; 
```

将引发事件处理程序，让您的 proggy 知道计算器应用程序何时退出，以便它可以重新启用按钮。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enableraisingevents.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enableraisingevents.aspx)

```
try
{
    myProcess.EnableRaisingEvents = true;
    myProcess.Exited += new EventHandler(myProcess_Exited);
    myProcess.Start();
    // disable button
}
catch()
{
    // enable button
}

private void myProcess_Exited(object sender, System.EventArgs e)
{
    // enable button
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T09:41:00.157

让它变得简单，创建一个函数来检查是否有任何进程正在运行：

```
public bool IsProcessOpen(string name)
{
foreach (Process process in Process.GetProcesses())
{
if (process.ProcessName.Contains(name))
{
return true;
}
}
return false;
} 
```

现在在您要检查进程的地方使用此功能：

```
if (!IsProcessOpen("calc"))
 System.Diagnostics.Process.Start("calc.exe"); 
```

**更新**

较新版本的 Windows 中的计算器进程已替换为**Calculator.exe**您尝试使用**calc.exe**检查进程是否存在总是会失败，您需要同时检查 calc 和计算器。这是屏幕截图 [![更新](../Images/39eaa1868407f661de30d2eb1b138a9e.png)](https://i.stack.imgur.com/hakpx.png)

**代码**

```
 //If calc.exe or Calculator.exe not exist then start the calculator 
if (!IsProcessOpen("calc")|| !IsProcessOpen("Calculator"))
System.Diagnostics.Process.Start("calc.exe"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T13:30:29.123

您可以使用 Process.GetProcessesByName() 来发现任何名为“calc.exe”的正在运行的进程。然而，这是不可靠的，进程名称不是明确的。可能有一个完全不同的进程具有相同的 .exe 名称。

一种明智的方法是启动流程并使用 Process.Exited 事件对其进行跟踪。像这样：

```
 Process calc;

    private void button1_Click(object sender, EventArgs e) {
        if (calc != null) return;
        calc = new Process();
        calc.StartInfo = new ProcessStartInfo("calc.exe");
        calc.EnableRaisingEvents = true;
        calc.Exited += new EventHandler(calc_Exited);
        calc.SynchronizingObject = this;
        calc.Start();
        button1.Enabled = false;
    }

    void calc_Exited(object sender, EventArgs e) {
        calc.Exited -= calc_Exited;
        calc = null;
        button1.Enabled = true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T06:21:48.210

通常，当您这样做时，您希望将控制权转移到应用程序的第一个实例，以便它可以自行激活。否则启动应用程序的人不知道发生了什么，并且会继续启动它。

您可以通过在应用程序启动时创建 Mutex 来实现这一点，如下所示：

```
 bool mine = false;
 Mutex mutex = new Mutex(true, "Something to identify this", out mine);
 if (!mine)
   // Application is already running 
```

如果应用程序第二次启动，则 Mutex 将已经存在，然后您可以使用 SendMessage 到初始应用程序以使其自行激活。

这是如何完成的一个例子是[here](http://www.codeproject.com/Articles/25901/Singleton-application-in-C-with-redirection-of-arg)。

# google-drive-api - Google Docs API：文档资源 ID 是否会更改？

> ID：11274319
> 
> 赞同：2
> 
> 时间：2012-06-30T13:10:49.823
> 
> 标签：google-drive-api, google-docs-api

构建一个所有链接都基于文档中的资源 ID 的类似网站的环境是否明智？文件 ID 过去是否曾经改变过，将来可以/会改变吗？

上周我们很惊讶地看到一个集合，其中一些文档 ID 似乎发生了变化，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:32:19.070

id 是条目的唯一、永久标识符，因此它永远不应更改。

# iphone - 为 Facebook 集成而错误配置的 iOS 应用

> ID：11274323
> 
> 赞同：2
> 
> 时间：2012-06-30T13:11:39.590
> 
> 标签：iphone, ios, facebook

我正在使用 facebook-iphone-sdk 框架将我的 iPhone 应用程序集成到 FB。问题是当我单击按钮时，它会出现错误“您正在使用的应用程序配置错误以进行 Facebook 集成。请下载该应用程序的最新版本。”

我只能与 FB 连接一次。第一次它工作得很好，我也能够将一些数据发布到我的墙上，但后来它不起作用，并且发生了上述错误。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:38:06.140

Bundle ID 区分大小写，因此请注意这一点。

例如 com.myapp.MyApp 与 com.myapp.myapp 不同

这发生在我身上并给出了同样的错误信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:22:22.247

可能您正在使用已弃用的 facebook API ...请使用新的 FBGraph API 进行 facebook 集成 ....

[如何从当前应用程序通过邮件、推特和脸书分享或发布？](https://stackoverflow.com/questions/10860652/how-to-share-or-post-by-mail-from-current-app/10862865#10862865)

这不仅仅是关于电子邮件......在这里你会找到 facebook 集成的教程和示例代码......！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:56:51.430

可能的解决方案：

1) 仔细检查您是否在代码中输入了正确的 facebook 应用程序 ID，并且您在第一次使其工作时没有以某种方式覆盖它。

2) 检查在 facebook 开发人员资料中您是否设置了所有正确的东西（他们有关于如何正确设置的不错的文档）。

3) 检查您使用的是最新版本的 SDK for fb。

4) 考虑使用 iOS6 的内置 Facebook，因为您可能不会在 iOS 6 出现之前发布您的应用程序。

5）如果一切都失败了，重新开始并从头到尾按照说明进行操作。检查并重新检查您设置的所有内容，并仔细扫描小错别字或其他东西。这可能是您忽略的某个地方的一个小错误。

6）如果您需要更具体的帮助，请发布代码。错误消息不足以推断您的问题是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T04:32:10.200

只需从 facebook 仪表板中删除您的应用程序，再次创建它，然后更改 App-Info.plist 中的 facebookID，在键 FacebookAppId 和 URL 类型数组键中。我做到了，我的应用程序运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T13:20:22.107

删除 facebook 应用程序，强制在 safari 中执行登录..

# security - Symfony2 ROLE_ADMIN 用于来自特定 IP 的请求

> ID：11274325
> 
> 赞同：1
> 
> 时间：2012-06-30T13:11:47.140
> 
> 标签：security, symfony

我在 symfony2 应用程序中使用安全组件。

我有一个案例，我需要为来自某个 IP 的流量分配 ROLE_ADMIN。我正在考虑使用匿名身份验证并稍后通过服务为匿名用户分配“ROLE_ADMIN”角色。我觉得这行不通，因为从安全上下文中我可以获得一个用户，但这只是字符串“anon”而不是完整的用户实体对象。无法分配角色。

也许有人可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:55:17.787

我有一个解决方案，最初我想将角色 ROLE_ADMIN 分配给匿名用户，这是不可能的。我创建了一个自定义安全侦听器 + 工厂，它可以工作，但您可以简单地从服务或控制器为安全上下文分配一个新令牌。

```
 $token = new \Symfony\Component\Security\Core\Authentication\Token\AnonymousToken('admin', 'admin', array('ROLE_ADMIN'));
    $this->get('security.context')->setToken($token); 
```

# c# - 为什么我不能在VS 2010的布局工具栏上使用增加/减少水平间距按钮？

> ID：11274326
> 
> 赞同：3
> 
> 时间：2012-06-30T13:11:56.713
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio, visual-web-developer

我正在尝试通过遵循一些简单的教程（在视频中使用 Web Developer 2005）来学习 ASP.NET/C#，并且我正在尝试在设计器画布上拖出一个标签和一个按钮并使用控件对齐它们在布局工具栏上，但它们被禁用。我不知道为什么。我正在使用绝对定位来放置它们。难道我做错了什么？

![在此处输入图像描述](../Images/35a9971fb9e69008d6110af7631837ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:58:57.517

确保未选择主窗口以及 2 个控件

# asp.net - 无法让 IIS 中的处理程序工作

> ID：11274327
> 
> 赞同：2
> 
> 时间：2012-06-30T13:12:26.603
> 
> 标签：asp.net, iis, deployment, web-deployment

我对IIS配置一无所知。

我正在运行一个基于 Blogengine.net ( [http://dotnetblogengine.net/](http://dotnetblogengine.net/) ) 的博客，我将它升级到 2.6 (从 2.0)，并被我的服务提供商移动到支持 .NET 4 的新服务器上。

问题是所有 http 处理程序都不起作用。除了 web.config，我无法直接控制 Web 服务器。我的服务提供商的支持人员为我[生成了一个日志，](http://ronnebybloggen.se/iis_log.rar)当从处理程序请求某些内容时，它提供了比 404 更多的详细信息。它说 HANDLER_PRECONTITION_NOT_MATCH 我怀疑这可能是这个问题的原因。

正如我所说，我对这样的配置一无所知，站点在 IIS7.5 Express 上运行时在本地工作，但在使用标准开发服务器时似乎存在同样的问题。我的网站已经好几天没有工作了，我已经没有选择了，该怎么办！

我的 web.config 中的一个片段（与 blogengine.net 下载中的片段完全一样）：

```
<handlers accessPolicy="Read, Write, Script, Execute">
  <add name="FileHandler" verb="*" path="file.axd" type="BlogEngine.Core.Web.HttpHandlers.FileHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="ImageHandler" verb="*" path="image.axd" type="BlogEngine.Core.Web.HttpHandlers.ImageHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Syndication" verb="*" path="syndication.axd" type="BlogEngine.Core.Web.HttpHandlers.SyndicationHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Sitemap" verb="*" path="sitemap.axd" type="BlogEngine.Core.Web.HttpHandlers.SiteMap, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Trackback" verb="*" path="trackback.axd" type="BlogEngine.Core.Web.HttpHandlers.TrackbackHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Pingback" verb="*" path="pingback.axd" type="BlogEngine.Core.Web.HttpHandlers.PingbackHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="OpenSearch" verb="*" path="opensearch.axd" type="BlogEngine.Core.Web.HttpHandlers.OpenSearchHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="MetaWeblog" verb="*" path="metaweblog.axd" type="BlogEngine.Core.API.MetaWeblog.MetaWeblogHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="RSD" verb="*" path="rsd.axd" type="BlogEngine.Core.Web.HttpHandlers.RsdHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <!--<add name="CssHandler" verb="*" path="css.axd" type="BlogEngine.Core.Web.HttpHandlers.CssHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>-->
  <add name="WebResource" path="*.js.axd" verb="*" type="BlogEngine.Core.Web.HttpHandlers.JavaScriptHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Resource" verb="*" path="*.res.axd" type="BlogEngine.Core.Web.HttpHandlers.ResourceHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Rating" verb="*" path="rating.axd" type="BlogEngine.Core.Web.HttpHandlers.RatingHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Opml" verb="*" path="opml.axd" type="BlogEngine.Core.Web.HttpHandlers.OpmlHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="BlogML" verb="*" path="blogml.axd" type="BlogEngine.Core.Web.HttpHandlers.BlogMLExportHandler, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="SIOC" verb="*" path="sioc.axd" type="BlogEngine.Core.Web.HttpHandlers.Sioc, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Apml" verb="*" path="apml.axd" type="BlogEngine.Core.Web.HttpHandlers.Apml, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Foaf" verb="*" path="foaf*.axd" type="BlogEngine.Core.Web.HttpHandlers.Foaf, BlogEngine.Core" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
  <add name="Html" path="*.htm" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode"/>
  <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</handlers> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:00:21.257

我终于解决了这个问题！我的服务提供商设置中的“池模式”设置为经典。我将其更改为“集成”，所有问题都消失了:-)

# android - 返回键后为活动充值

> ID：11274329
> 
> 赞同：0
> 
> 时间：2012-06-30T13:12:29.847
> 
> 标签：android, android-activity

我有 3 项活动
-scelta
-checkin
-instarghe

表格 scelta 和 checkin 我可以去 instarghe。我希望当我从签入进入 instarghe 时，如果我使用后退按钮，签入活动将重新执行。
示例：
checkin-->instarghe-->返回按钮-->我第二次执行checkin
scelta-->instarghe-->返回按钮-->正常返回scelta
怎么办？

我写了这段代码：

```
protected void onRestart(){
    //popolamento dello spinnero
    String risposta=postTarghe();
    Spinner spinner = (Spinner) findViewById(R.id.spnTarghe);
    final String targhe[]=risposta.split("/");
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this,
            android.R.layout.simple_spinner_item,
            targhe
            );
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View v, int position,long id) {
            sTarga=targhe[position];
            Log.d(TAG,"questa è la posizione selezionata: "+position);
            Log.d(TAG,"questa è la targa: "+sTarga);
        }
        public void onNothingSelected(AdapterView<?> parentView) {
                // your code here
        }
    });
}; 
```

但是当我尝试时，应用程序崩溃了。这是日志猫：

> java.lang.RuntimeException：无法恢复活动 {com.homelinux.agnese/com.homelinux.agnese.entrata}：android.app.SuperNotCalledException：活动 {com.homelinux.agnese/com.homelinux.agnese.entrata} 没有调用 super.onRestart() 原因：android.app.SuperNotCalledException: Activity {com.homelinux.agnese/com.homelinux.agnese.entrata} 没有调用 super.onRestart()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:59:31.113

首先：请在您的问题中发布您的代码，而不是作为答案！

第二：

```
protected void onRestart(){
    /****************
    * You forgot following line
    ****************/
    super.onRestart();
    /***************/
    //popolamento dello spinnero
    String risposta=postTarghe();
    Spinner spinner = (Spinner) findViewById(R.id.spnTarghe);
    final String targhe[]=risposta.split("/");
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this,
            android.R.layout.simple_spinner_item,
            targhe
            );
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View v, int position,long id) {
            sTarga=targhe[position];
            Log.d(TAG,"questa è la posizione selezionata: "+position);
            Log.d(TAG,"questa è la targa: "+sTarga);
        }
        public void onNothingSelected(AdapterView<?> parentView) {
                // your code here
        }
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:18:51.613

在签入中使用`onRestart()`并在此处使用重新执行逻辑。可能这会解决你的问题。

`onRestart()`在覆盖的版本中调用超类`onRestart()`

# mysql - 按小时或按天对记录进行分组，并在mysql中用零或空填充空白

> ID：11274335
> 
> 赞同：6
> 
> 时间：2012-06-30T13:13:23.740
> 
> 标签：mysql, sql, oracle, group-by, hour

我写了一个查询，每小时计算记录：

```
select TO_CHAR(copied_timestamp, 'YYYY-MM-DD HH24'),count(*) from req group by
TO_CHAR(copied_timestamp, 'YYYY-MM-DD HH24'); 
```

结果是：

```
2012-02-22 13    2280
2012-02-22 15    1250
2012-02-22 16    1245
2012-02-22 19    1258 
```

但我需要这样的结果：

```
2012-02-22 13    2280
2012-02-22 14    0
2012-02-22 15    1250
2012-02-22 16    1245
2012-02-22 17    0
2012-02-22 18    0
2012-02-22 19    1258 
```

我也有这些按天和月分组的查询！

```
select TO_CHAR(copied_timestamp, 'YYYY-MM-DD'),count(*)  from req
group by TO_CHAR(copied_timestamp, 'YYYY-MM-DD');

select TO_CHAR(copied_timestamp, 'YYYY-MM'),count(*)  from req
group by TO_CHAR(copied_timestamp, 'YYYY-MM'); 
```

我也需要用零或空来填充它们的空白。非常感谢任何帮助。

注意：在 oracle using 中有这个问题的答案，`CONNECT BY`但我需要 Mysql 中的答案，因为 Mysql 不支持`CONNECT BY`. [链接在这里](https://stackoverflow.com/questions/10798905/grouping-records-hour-by-hour-or-day-by-day-and-filling-gaps-with-zero-or-null)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:51:52.110

生成一个单`dates_hours`列表，其中包含合理范围内的所有日期和时间（例如，从 1900 到 2200）。然后`LEFT JOIN`从这个表到你当前的查询。

为了使这项技术正确执行，您可能需要向表中添加一个索引列，其中包含转换后的时间戳（`copied_timestamp`转换为`DATETIME`，四舍五入为小时）

```
SELECT date_hour, count(req.converted_timestamp)
FROM
    dates_hours 
    LEFT JOIN req ON req.converted_timestamp = dates_hours.date_hour
WHERE date_hour
    BETWEEN (SELECT MIN(req.converted_timestamp) FROM req)
    AND (SELECT MAX(req.converted_timestamp) FROM req)
GROUP BY date_hour 
```

要生成`dates_hours`表格：

```
CREATE TABLE dates_hours (date_hour DATETIME PRIMARY KEY);

DELIMITER $$$
CREATE PROCEDURE generate_dates_hours (to_date DATETIME)
BEGIN

    DECLARE start_date DATETIME;
    DECLARE inc INT;

    SELECT MAX(date_hour) INTO start_date FROM dates_hours;
    IF start_date IS NULL THEN
        SET start_date = '1900-01-01';
    END IF;
    SET inc = 1;
    WHILE start_date + INTERVAL inc HOUR  <= to_date DO
        INSERT INTO dates_hours VALUE (start_date + INTERVAL inc HOUR);
        SET inc = inc +1;
    END WHILE;

END $$$
DELIMITER ;

CALL generate_dates_hours('2200-01-01'); 
```

好的，现在我正在校对自己，我意识到这是一个非常牵强的解决方案。我希望有人想出一个更优雅的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:37:55.390

我创建了一个名为 TBL_NUMBERS 的表

```
CREATE TABLE `TBL_NUMBER` (`n` int(11) NOT NULL) 
```

并插入从 1 到 1000 的记录。现在我可以使用此查询生成任何类型的日期范围：

```
SELECT '2012-06-21' + INTERVAL n-1 [DAY | HOUR | MINUTE] or as dateRange
 FROM TBL_NUMBER
WHERE '2012-06-21' + INTERVAL n-1 [DAY | HOUR | MINUTE] <= '2012-06-23'; 
```

然后我可以用我的结果加入这个表来填补日期空白。如果我需要超过 1000 个日期范围，我可以在其中插入更多记录`TBL_NUMBER`

如果您有更好的主意，我很想知道；）

# c++ - D3DXIntersect Ray 坐标错误？

> ID：11274336
> 
> 赞同：1
> 
> 时间：2012-06-30T13:13:35.463
> 
> 标签：c++, matrix, directx

我已经使用 D3DXIntersect() 来选择带有十字准线的网格，但是我无法使用它来检测与地面的碰撞。我想直接射出一条射线，这样我就可以获得到低多边形网格的相应三角形的距离，但是每当调用测试时，我的 BOOL “命中”都会返回 false。

由于我不必将屏幕坐标转换为射线，因此我从射线在世界空间中的位置开始，将其转换为模型空间，然后调用 D3DXIntersect()。

```
....
//when I want to check collision with the mesh..
D3DXVECTOR3 origin, direction;

//divide the camera location by the scale of the mesh.
origin = D3DXVECTOR3(gCamera->pos().x / meshScale,
 gCamera->pos().y / meshScale, gCamera->pos().z / meshScale); 
direction = D3DXVECTOR3(0.0f, -10.0f, 0.0f);  //Tried -1.0 originally

//get the inverse of the mesh's world matrix
D3DXMATRIX inverseWorld;
D3DXMatrixInverse(&inverseWorld, 0, &meshWorld);

//transform the Ray using the inverse matrix
D3DXVec3TransformCoord(&origin, &origin, &inverseWorld);
D3DXVec3TransformNormal(&direction, &direction, &inverseWorld);

//Intersection Test
BOOL hit = 0;
DWORD faceIndex = -1;
float u = 0.0f;
float v = 0.0f;
float dist = 0.0f;
ID3DXBUFFER* allHits = 0;
DWORD numHits = 0;
HR(D3DXIntersect(mMesh, &origin, &direction, &hit,
&faceIndex, &u, &v, &dist, &allHits, &numHits));

if( hit )
{

   //execute code to prove this line executed...
   //change camera position
}
else
{
   //show me the test happened and there wasn't a hit
} 
```

我最初并没有将原点除以网格比例，但是在谷歌搜索如何补偿缩放的网格之后，我发现了一个以这种方式编写的示例。如果这是一个错误，请告诉我，但即使没有在常规尺寸的网格上使用比例和测试，我仍然没有受到射线的影响。

有没有人看到任何让我无法获得成功的错误？也许我没有正确转换光线？在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:13:18.000

I just figured it out. Turns out it was an easy mistake. My mesh's world matrix was simply the translation matrix and not the world matrix, i.e. the translation matrix and scaling matrix multiplied together. For anyone else struggling with this technique, just make sure your matrices are correct and the above code should work.

# javascript - Firefox 和 Jquery/Javascript 表单提交

> ID：11274337
> 
> 赞同：0
> 
> 时间：2012-06-30T13:13:44.573
> 
> 标签：javascript, jquery, firefox, twitter-bootstrap

我在 Firefox 中遇到问题，我试图让一个表单提交按钮在有人点击它时显示“正在加载”（以防止用户由于网站速度慢而多次提交点击它两次/三次）。

我有这个 jquery 代码：

```
$(document).ready(function(){
     $('.submitButton').click(function() {
        document.aform.submit();
        $('.buttonSpan').html('<button class="btn btn-primary disabled">Loading...</button>');

     });
}); 
```

Chrome 正确执行它，但 Firefox*只*更改 span 周围的 HTML，但*不*提交表单。*当我单击按钮两次*时，Firefox 提交。如果我删除 .html() 更改的行，它也可以毫无问题地提交。

以下是供参考的表单代码：

```
<form name="aform" action="index.php" enctype="multipart/form-data" method="post">
    ...form data
    <span class="buttonSpan">
         <button class="btn btn-primary submitButton" name="submit"/>Submit</button>
    </span>
</form> 
```

Firefox 是否优先考虑 html 更改并忽略其他所有内容？再一次，这在 Chrome 中运行良好，但 firefox 真的要了我的命！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:20:12.140

在大多数情况下，最好使用`submit`表单上的事件而不是提交按钮的单击事件。（如果您通过按 Enter 按钮提交表单怎么办？）

```
$(function(){
     $('form[name=aform]').submit(function() {
        $('.buttonSpan', this).html('<button class="btn btn-primary disabled">Loading...</button>');

     });
}); 
```

使用它时，您需要修复提交按钮的 html，如下所述。

否则我建议找到与提交按钮相关的表单：

```
$(function(){
     $('.submitButton').click(function() {
         $(this).closest("form").submit()
        .find('.buttonSpan').html('<button class="btn btn-primary disabled">Loading...</button>');

     });
}); 
```

定义提交按钮的*正确*方法是这样的：

```
<input type="submit" class="btn btn-primary submitButton" value="Submit" name="submit"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:43:26.147

对我有用，但在单击处理程序期间从文档中删除按钮似乎可能会导致不一致的行为：提交表单的默认操作是否适用于在单击时或在单击后事件拥有它的表单-时间默认动作触发（无形式）？

避免这种歧义 - 不要通过用新标记替换按钮来破坏按钮。相反，改变它：

```
<button type="submit" class="btn btn-primary submitButton" name="submit">Submit</button>

$('.submitButton').click(function() {
    $(this).text('Loading...');
    $(this).removeClass('submitButton');
    $(this).addClass('disabled');
}); 
```

请注意，（a）您不需要调用`form.submit()`，因为无论如何这是提交按钮的默认操作；（b）正如 Munter 所说，`document.namedElement`是不好的形式，（c）正如 d_inevitable 所说，挂钩`form.onsubmit`几乎总是比做更好的事情`button.onclick`- 尽管如果你只是特别担心鼠标点击，可能不在这里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T13:18:29.067

`document.aform`不建议像在其中那样按名称访问 dom 元素。

由于您已经在表单中拥有按钮，因此您应该使用按钮`.form`属性。

所以像

```
button.onclick = 函数 () {
    this.form.submit();
}

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T13:21:35.420

尝试这个：

```
$(document).ready(function(){
     $('.submitButton').click(function() {
        $('.buttonSpan').html('<button class="btn btn-primary disabled">Loading...</button>');
        $('form').submit();
     });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T13:34:54.263

这是一个工作示例：在 FF [http://jsfiddle.net/JV68U/上测试](http://jsfiddle.net/JV68U/)

# android - 在 Android 中更改 EditText UI

> ID：11274340
> 
> 赞同：0
> 
> 时间：2012-06-30T13:13:57.850
> 
> 标签：android

我想更改 android 中的所有 EditText UI。例如，我想更改 On Focus、On Blur 和 ... 样式。我该怎么做？实际上我读了一些片段，但我不明白他们在做什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:25:32.663

1-为不同的状态创建选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_window_focused="false" android:state_enabled="true" android:drawable="@drawable/textfield_default" />
  <item android:state_window_focused="false" android:state_enabled="false" android:drawable="@drawable/textfield_disabled" />
  <item android:state_pressed="true" android:drawable="@drawable/textfield_pressed" />
  <item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/textfield_selected" />
  <item android:state_enabled="true" android:drawable="@drawable/textfield_default" />
  <item android:state_focused="true" android:drawable="@drawable/textfield_disabled_selected" />
  <item android:drawable="@drawable/textfield_disabled" />
</selector> 
```

2- 要应用自定义可绘制 xml，请使用 EditText 的 android:backgroung 属性

```
android:background="@drawable/yourXml" 
```

[http://www.androidworks.com/changeing-the-android-edittext-ui-widget](http://www.androidworks.com/changing-the-android-edittext-ui-widget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:34:23.580

如果您想在某些事件（例如 onFocus、onPressed）发生时更改 EditText 的外观，那么您将需要 Selector。

**选择器**是一个可绘制的，并以xml文件的形式实现，选择器文件中的元素将引用特定的状态。每个元素映射到一个特定的状态。

要更改 UI 组件的外观和感觉，可以使用**背景、src 属性等**。

而这个链接正是需要的那个。

```
 http://developer.android.com/guide/topics/ui/themes.html 
```

# android - 录制音频时出现Android SIGSEGV错误

> ID：11274341
> 
> 赞同：1
> 
> 时间：2012-06-30T13:13:58.810
> 
> 标签：android, audio, segmentation-fault

我需要你的帮助。我正在尝试使用 Androids AudioRecord 类录制一些音频。大多数时候这工作得很好，但有时我会收到一个**SIGSEGV**错误。

这是在录制音频时在单独的线程中运行的代码：

```
private void startRecording() {
    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING, bufferSize);

    recorder.startRecording();

    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {
            writeAudioDataToFile();
        }
    }, "AudioRecorder Thread");

    recordingThread.start();
}

private void writeAudioDataToFile() {
    byte data[] = new byte[bufferSize];
    String filename = getTempFilename();
    FileOutputStream os = null;

    try {
        os = new FileOutputStream(filename);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    int read = 0;

    if (null != os) {
        while (isRecording) {
            read = recorder.read(data, 0, bufferSize);

            if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                try {
                    os.write(data);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        try {
            os.close();
            os.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这就是我在录制停止时所做的事情：

```
public void stopRecording() {
    if (null != recorder) {
        isRecording = false;
        mRecordingBlocked = true;
        mProgressDialog = RecorderDialog.newInstance();
        mProgressDialog.show(getFragmentManager(), "progressDialog");

        recorder.stop();
        recorder.release();

        recorder = null;
        recordingThread = null;

        new Thread(new Runnable() {
            @Override
            public void run() {
                String fileName = getFilename();
                copyWaveFile(getTempFilename(), fileName);

                final TelephonyManager tm = (TelephonyManager) getActivity().getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

                final String tmDevice, tmSerial, androidId;
                tmDevice = "" + tm.getDeviceId();
                tmSerial = "" + tm.getSimSerialNumber();
                androidId = "" + android.provider.Settings.Secure.getString(getActivity().getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);

                UUID deviceUuid = new UUID(androidId.hashCode(), ((long) tmDevice.hashCode() << 32) | tmSerial.hashCode());
                String deviceId = deviceUuid.toString();
                App.db.insertEntry(deviceId, "Song title", fileName);

                deleteTempFile();

                if (cbox_overdub.isChecked()) {
                    phrases.add(playAudio(fileName, true));
                }
            }
        }).start();
    }

}

private void copyWaveFile(String inFilename, String outFilename) {
    FileInputStream in;
    FileOutputStream out;
    long totalAudioLen = 0;
    long totalDataLen;
    long longSampleRate = RECORDER_SAMPLERATE;
    int channels = 2;
    long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8;

    try {
        AppLog.logString("begin copyWaveFile try{}");
        File file = new File(inFilename);
        in = new FileInputStream(file);
        byte[] bytes = new byte[(int) file.length()];
        totalAudioLen = in.getChannel().size();
        totalDataLen = totalAudioLen + 36;
        in.read(bytes);
        in.close();

        out = new FileOutputStream(outFilename);
        AppLog.logString("fos created");

        WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                longSampleRate, channels, byteRate);
        AppLog.logString("wave header written");

        int bufferLength = 1024;
        publishProgress(0);
        for (int i = 0; i < bytes.length; i += bufferLength) {
            int progress = (int) ((i / (float) bytes.length) * 100);
            publishProgress(progress);
            if (bytes.length - i >= bufferLength) {
                out.write(bytes, i, bufferLength);
            } else {
                out.write(bytes, i, bytes.length - i);
            }
        }
        publishProgress(100);
        AppLog.logString("progress complete");
        mRecordingBlocked = false;
        mProgressDialog.dismiss();

        out.close();
        out.flush();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

似乎此错误发生在 AudioRecord 的实例已停止之后。然后我将临时 temp_record.wav（SD 卡）的内容复制到目标（SD 卡），并设置适当的波形文件头。

我无法从以下调试信息中筛选出任何有用的信息。我希望有人有一个想法。谢谢！

**这是 Logcat 的输出：**

```
06-30 14:47:53.311: INFO/DEBUG(9381): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
06-30 14:47:53.311: INFO/DEBUG(9381): Build fingerprint: 'otorola/RTGB/umts_milestone2:2.3.4/MILS2_U6_4.1-22/1317097892:user/release-keys'
06-30 14:47:53.311: INFO/DEBUG(9381): pid: 9459, tid: 9525  >>> de.intermeco.android.apps.ilaugh <<<
06-30 14:47:53.311: INFO/DEBUG(9381): signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 4640e000
06-30 14:47:53.311: INFO/DEBUG(9381): r0 4640e000  r1 00000000  r2 fffffd49  r3 4670da18
06-30 14:47:53.311: INFO/DEBUG(9381): r4 4640e000  r5 4640e000  r6 fffffd49  r7 4670da18
06-30 14:47:53.311: INFO/DEBUG(9381): r8 a904cf6a  r9 0000000a  10 a904cfad  fp a904cff0
06-30 14:47:53.311: INFO/DEBUG(9381): ip a9060074  sp 4670d9e0  lr afd11704  pc afd113dc  cpsr 20000050
06-30 14:47:53.311: INFO/DEBUG(9381): d0  6472656767756265  d1  0037fff00020000c
06-30 14:47:53.311: INFO/DEBUG(9381): d2  fff5ffd8fff5ffdb  d3  ffe0ffd8ffd9ffd8
06-30 14:47:53.311: INFO/DEBUG(9381): d4  fff2ffe50008ffd4  d5  ffdafffafff20000
06-30 14:47:53.311: INFO/DEBUG(9381): d6  fff40003ffcf0003  d7  ffe30013ffe1fffd
06-30 14:47:53.311: INFO/DEBUG(9381): d8  0000000000989680  d9  0000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d10 0000000000000000  d11 0000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d12 0000000000000000  d13 0000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d14 0000000000000000  d15 0000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d16 000000c24003a7e0  d17 4000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d18 3ff0000000000000  d19 0000000000000000
06-30 14:47:53.311: INFO/DEBUG(9381): d20 b96377ce858a5d48  d21 3929f5135cb87c55
06-30 14:47:53.311: INFO/DEBUG(9381): d22 3e21ee9ebdb4b1c4  d23 bda8fae9be8838d4
06-30 14:47:53.319: INFO/DEBUG(9381): d24 0000000000000000  d25 0000000000000000
06-30 14:47:53.319: INFO/DEBUG(9381): d26 0000000000000000  d27 ffffffffffffffff
06-30 14:47:53.319: INFO/DEBUG(9381): d28 0100010001000100  d29 0100010001000100
06-30 14:47:53.319: INFO/DEBUG(9381): d30 4086800000000000  d31 3ff0000000000000
06-30 14:47:53.319: INFO/DEBUG(9381): scr 60000010
06-30 14:47:53.483: INFO/DEBUG(9381): #00  pc 000113dc  /system/lib/libc.so (pthread_mutex_lock)
06-30 14:47:53.483: INFO/DEBUG(9381): #01  pc 00011700  /system/lib/libc.so (__pthread_cond_timedwait_relative)
06-30 14:47:53.483: INFO/DEBUG(9381): #02  pc 0002d658  /system/lib/libmedia.so
06-30 14:47:53.483: INFO/DEBUG(9381): code around pc:
06-30 14:47:53.483: INFO/DEBUG(9381): afd113bc e3a02001 ebfffe82 e1a00005 e8bd87f0
06-30 14:47:53.483: INFO/DEBUG(9381): afd113cc 00036024 e92d47f0 e2504000 0a000019
06-30 14:47:53.483: INFO/DEBUG(9381): afd113dc e5946000 e5947000 e2166903 1a000017
06-30 14:47:53.483: INFO/DEBUG(9381): afd113ec e5945000 e1a02004 e2055a02 e1a00005
06-30 14:47:53.483: INFO/DEBUG(9381): afd113fc e3851001 ebffed7f e3500000 13856002
06-30 14:47:53.483: INFO/DEBUG(9381): code around lr:
06-30 14:47:53.483: INFO/DEBUG(9381): afd116e4 e1a03007 e1a02006 e2011001 e1a00004
06-30 14:47:53.483: INFO/DEBUG(9381): afd116f4 ebfffd9a e1a04000 e1a00005 ebffff32
06-30 14:47:53.483: INFO/DEBUG(9381): afd11704 e374006e 03a0006e 13a00000 e8bd81f0
06-30 14:47:53.483: INFO/DEBUG(9381): afd11714 e304cdd3 e3043240 e92d4010 e341c062
06-30 14:47:53.483: INFO/DEBUG(9381): afd11724 e1a0e002 e24dd008 e340300f e1a0200d
06-30 14:47:53.483: INFO/DEBUG(9381): stack:
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9a0  04000804
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9a4  00000001
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9a8  001c6b58
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9ac  00000262
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9b0  0000ee6b
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9b4  afd0fe34  /system/lib/libc.so
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9b8  001edbb0
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9bc  afd13bc1  /system/lib/libc.so
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9c0  001b0470
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9c4  001c6b58
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9c8  00000241
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9cc  3b9aca00
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9d0  00000000
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9d4  00989680
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9d8  df002777
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9dc  e3a070ad
06-30 14:47:53.483: INFO/DEBUG(9381): #00 4670d9e0  00000000
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9e4  4640e000
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9e8  fffffd49
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9ec  4670da18
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9f0  a904cf6a  /system/lib/libmedia.so
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9f4  0000000a
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9f8  a904cfad  /system/lib/libmedia.so
06-30 14:47:53.483: INFO/DEBUG(9381): 4670d9fc  afd11704  /system/lib/libc.so
06-30 14:47:53.483: INFO/DEBUG(9381): #01 4670da00  4640e000
06-30 14:47:53.483: INFO/DEBUG(9381): 4670da04  4640e004
06-30 14:47:53.483: INFO/DEBUG(9381): 4670da08  4670da98
06-30 14:47:53.483: INFO/DEBUG(9381): 4670da0c  000000c8
06-30 14:47:53.483: INFO/DEBUG(9381): 4670da10  a904cf6a  /system/lib/libmedia.so
06-30 14:47:53.483: INFO/DEBUG(9381): 4670da14  a902d65b  /system/lib/libmedia.so 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:51:58.307

感谢您再次指出 SIGSEV，因为我不知道它的含义，所以我读了一点。现在我愿意 :) 我同意 CommonsWare 的观点，即您应该通知固件的制造商/修改者。但我也认为它不会在有用的时间跨度内进一步帮助你。也许我们会找到一种方法来修改您的代码，从而不再引发错误。

通常，您的代码看起来相当不错。我认为不完全安全和正确的是您停止录音机的方式。

1.  我不使用 isRecording 标志，而是使用 isCancelled 标志。所以你记录 while(!isCancelled)。当您想停止录制时，只需将 isCancelled 设置为 true 并调用 recorder.stop()。
2.  录音停止后，您可以在录音机线程中的 writeAudioDataToFile() 之后立即调用您的逻辑来显示进度对话框和复制文件。我不会为这些事情使用额外的线程，因为我们仍在录音机线程中并且您的 UI 没有被阻塞。
3.  何时调用 recorder.release()，它会释放内存......文档“释放原生 AudioRecord 资源”。我不知道这是否对问题有影响。在您提供的当前代码中，您调用 recorder.release() 而理论上记录器可以读取（不知道该类是否是线程安全的）。也许您也可以在复制所有文件后尝试调用它，即使我认为在记录器真正停止并且您的输出流关闭后应该没问题。

希望我能帮上一点忙，你能找到办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:11:22.720

谢谢你的建议。我稍微重建了代码，现在它似乎可以工作了。至少我大约一天没有收到错误（比以前长：D）。

我更改了 writeAudioDataToFile() 方法，因此现在发布等也在那里完成（在 stopRecording() 方法中将 isRecording 设置为 false 之后）。我也不再创建第二个线程，而是处理 RecorderThread 中的所有事情。

所以这似乎对我有用：

```
private void writeAudioDataToFile() {
    byte data[] = new byte[bufferSize];
    String filename = getTempFilename();
    FileOutputStream os = null;

    try {
        os = new FileOutputStream(filename);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    int read = 0;

    if (null != os) {
        while (isRecording) {
            read = recorder.read(data, 0, bufferSize);

            if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                try {
                    os.write(data);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        try {
            os.close();
            os.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }

        recorder.stop();
        recorder.release();
        recorder = null;

        String fileName = getFilename();
        copyWaveFile(getTempFilename(), fileName);

        final TelephonyManager tm = (TelephonyManager) getActivity().getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

        final String tmDevice, tmSerial, androidId;
        tmDevice = "" + tm.getDeviceId();
        tmSerial = "" + tm.getSimSerialNumber();
        androidId = "" + android.provider.Settings.Secure.getString(getActivity().getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);

        UUID deviceUuid = new UUID(androidId.hashCode(), ((long) tmDevice.hashCode() << 32) | tmSerial.hashCode());
        String deviceId = deviceUuid.toString();
        App.db.insertEntry(deviceId, "Song title", fileName);

        deleteTempFile();

        if (cbox_overdub.isChecked()) {
            phrases.add(playAudio(fileName, true));
        }
    }
}

public void stopRecording() {
    if (null != recorder) {
        Toast.makeText(getActivity(), "Stop Recording", Toast.LENGTH_SHORT).show();
        ((ImageView) getActivity().findViewById(R.id.btnMic)).setImageDrawable(getActivity().getResources().getDrawable(R.drawable.btn_mic));
        isRecording = false;
        mRecordingBlocked = true;

        mProgressDialog = RecorderDialog.newInstance();
        mProgressDialog.show(getFragmentManager(), "progressDialog");
    }
}

private void publishProgress(int progress) {
    ProgressDialog pd = ((ProgressDialog) mProgressDialog.getDialog());
    if (pd != null) pd.setProgress(progress);
} 
```

现在谢谢你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:24:26.727

`SIGSEGV`Java 代码中不应该出现A。除非这是您的 JNI 代码，否则这将表明固件存在缺陷。

如果您正在运行修改后的固件，请将此信息传递给固件修改者。

如果您正在运行设备随附的原始固件，并且这只发生在一台设备上，您可以尝试联系设备制造商。

如果您在多个具有原始固件的设备上看到此问题，并且您可以创建一个重现错误的示例项目，请[在 Android 问题跟踪器](http://b.android.com)上发布项目和堆栈跟踪，假设该问题尚未在此处报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T07:11:12.370

该文档指出：

> 为了接收与这些侦听器相关的相应回调，应用程序需要**在运行 Looper 的线程上创建 MediaRecorder 对象**（默认情况下，主 UI 线程已经运行了 Looper）。

确保在 UI 线程上创建记录器。也许也可以在 UI 线程上调用它的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-26T21:22:15.443

以上解决方案都不适合我。相反，我在 AudioRecord 的构造函数中增加了缓冲区。

最小缓冲区大小建议在 1k 到 4k 之间，具体取决于参数和设备。看来我的算法太慢了，无法在缓冲区满之前从缓冲区中读取数据，所以我得到了 segv（老实说，我只是在猜测后果）。

在我将缓冲区的值提高到两倍于我需要来自 AudioRecord 的数据之后，它就像一个魅力。

```
 bufferSize = AudioRecord.getMinBufferSize(sampleAudioBitRate,
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);

            if (bufferSize < sampleSize * 2)
                bufferSize = sampleSize * 2;

            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioBitRate,
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);
            if (audioRecord.getState() != AudioRecord.STATE_INITIALIZED) {
                Log.w(TAG, "audioRecord not initialized");
                return;
            } 
```

# drupal - 具有多个登录源的 Drupal 7？

> ID：11274342
> 
> 赞同：2
> 
> 时间：2012-06-30T13:14:05.550
> 
> 标签：drupal, login, module

我只是 Drupal 的新手，但我想让我的网站通过外部登录源进行身份验证。我的意思是，不要使用当前的 Drupal 数据库登录。然后使用一个或多个外部数据库。

为了更清楚一点：

*   用户登录验证不会使用现有的 Drupal 数据库。
*   然后它将使用外部数据库
*   外部数据库将是一个或多个（如果在一个外部数据库上找不到用户，则在另一个源上再次找到。）

我一直在尝试破解 Drupal 登录，但由于结构足够复杂，我还做不到。请问有什么解决方案或建议吗？

*   需要修改哪些文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T14:50:33.017

您不应该为此完全放弃 Drupal 的用户系统，而应该使用您自己的身份验证对其进行尾随。其工作方式是 1) 收集用户凭据，2) 针对您的自定义源进行身份验证，以及 3) 注册/登录外部用户。

## 收集凭据

收集用户凭据的一种方法是劫持用户登录表单。您可以通过实现[`hook_form_alter()`](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_form_alter/7)和添加自己的验证回调来做到这一点。

```
function mymodule_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'user_login') {
    $form['#validate'][] = array('mymodule_user_login_validate');
    $form['#validate'][] = array('mymodule_user_login_submit');
  }
} 
```

登录表单看起来完全一样，但它会将用户名和密码发送到您的回调。

`user_login_name_validate()`和`user_login_final_validate()`回调是 user.module 的默认[验证器](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_login_default_validators/7)。它们提供用户阻止功能和蛮力保护，但可以随意将它们排除在外。

## 验证

发送登录表单后，您将获取凭据并针对您的自定义来源进行身份验证。

```
function mymodule_user_login_validate($form, &$form_state) {
  mymodule_authenticate(
    $form_state['values']['name'],
    $form_state['values']['name']
  );
} 
```

如果凭据没有签出，您可以打电话[`form_set_error()`](http://api.drupal.org/api/drupal/includes%21form.inc/function/form_set_error/7)通知用户出了什么问题。这样做还可以确保不会执行进一步的验证或提交回调。

## 外部用户

因此，如果没有引发错误，则 Drupal 将继续运行您的提交回调。然后我们可以运行[`user_external_login_register()`](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_external_login_register/7)以将我们的外部用户创建为 Drupal 用户。

```
function mymodule_user_login_submit($form, &$form_state) {
  user_external_login_register($form_state['values']['name'], 'mymodule');
} 
```

顾名思义，这个功能也会让用户登录。应该就是这样！

## 有一个模块

很可能已经有一个模块可以用于您想要做的事情。在开始你自己的之前总是去搜索[现有的贡献模块！](http://drupal.org/project/modules)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T06:05:18.153

```
define('DRUPAL_ROOT',  'full/path/to/drupal');
$drupal_url  = 'http://site.com';
drupal_external_load($drupal_path, $drupal_url);

if ( !($user->uid > 0) ) {
  drupal_external_login('user', 'pass');  
} else {
  print 'user is already logged';
}

function drupal_external_load($drupal_url) {

  global $base_url;

  // set drupal base_url (if not set set in settings.php)
  // because it's used in session name
  $base_url = $drupal_url;

  // save current path
  $current_path = getcwd();

  // move to drupal path, because it uses relative path for its includes    
  chdir(DRUPAL_ROOT);

  require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
  drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

  // to use the drupal global user var (instead of session hack)
  // drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);
  // return the current path
  chdir($current_path);
}

// load a drupal user into the user obj
function drupal_external_userload($user_info = array()) {

  // Dynamically compose a SQL query:
  $query = array();
  $params = array();

  if (is_numeric($user_info)) {

    $user_info = array('uid' => $user_info);
  }
  elseif (!is_array($user_info)) {

    return FALSE;
  }

  foreach ($user_info as $key => $value) {

    if ($key == 'uid' || $key == 'status') {

      $query[] = "$key = %d";
      $params[] = $value;
    }
    else if ($key == 'pass') {

      $query[] = "pass = '%s'";
      $params[] = md5($value);
    }
    else {

      $query[]= "LOWER($key) = LOWER('%s')";
      $params[] = $value;
    }
  }

  $result = db_query('SELECT * FROM {users} u WHERE '. implode(' AND ', $query), $params);

  if ($user = db_fetch_object($result)) {

    $user = drupal_unpack($user);
    $user->roles = array();

    if ($user->uid) {

      $user->roles[DRUPAL_AUTHENTICATED_RID] = 'authenticated user';
    }
    else {

      $user->roles[DRUPAL_ANONYMOUS_RID] = 'anonymous user';
    }

    $result = db_query('SELECT r.rid, r.name FROM {role} r INNER JOIN {users_roles} ur ON 

ur.rid = r.rid WHERE ur.uid = %d', $user->uid);

    while ($role = db_fetch_object($result)) {

      $user->roles[$role->rid] = $role->name;
    }

    //user_module_invoke('load', $user_info, $user);
  }
  else {

    $user = FALSE;
  }
  return $user;
}

// don't send any headers before calling this
function drupal_external_login($username, $password) {

  global $user;

  if ( $user->uid > 0 ) {

    if ( $user->name != $username ) {

      drupal_external_logout();

    } else {

      return true;
    }
  }

  require DRUPAL_ROOT. '/includes/password.inc' ;

  $account = user_load_by_name($username);

  if ( user_check_password($password, $account) ) {

    $user = $account;
    drupal_session_regenerate();
    return true;
  }
  return false;
}

function drupal_external_logout() {

  global $user;
  session_destroy();
  $user = drupal_anonymous_user();
} 
```

# haskell - do符号中的函数错误

> ID：11274343
> 
> 赞同：1
> 
> 时间：2012-06-30T13:15:01.207
> 
> 标签：haskell, logic

我有这样的功能来解决一些逻辑谜题

iloczyny 是具有这种结构`[((0,0),(0,1),[5,0])...]` `[((cords1),(cords2),[Num1,Num2])..]`
`kandydaci`的列表，是我的解决方案的所有可能候选者的`pola`列表，并且是我的矩阵中所有可能坐标的列表。
我想选择一个候选人并将其与可能的候选人进行比较，`iloczyny`如果元素相等，我想从中删除坐标`pola`并再次调用函数。

```
 zbieraj iloczyny kandydaci pola = do
      element <- kandydaci
      (a,b,[c,d]) <- iloczyny
      guard (element == (c_n' [c,d]) && (elem a pola) && (elem b pola))
      nowa <- skasuj a b pola
      rk <- delete element kandydaci -- here is erorr 
      Couldn't match type `Integer' with `[Integer]'
      In the second argument of `zbieraj', namely `rk'
      reszta <- zbieraj iloczyny rk nowa
      return ([a,b] ++ reszta) 
```

skasuj 看起来就像`skasuj a b lista = delete b (delete a lista)` 我不熟悉haskell 并且看不出有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:20:55.697

首先，请为您的函数编写类型签名。这将产生更好的错误消息，并帮助读者更好地理解您的代码。

然而，错误在于

```
nowa <- skasuj a b pola
rk <- delete element kandydaci -- here is erorr 
```

使用一元绑定`x <- monadAction`，但它们应该是普通`let`绑定

```
let nowa = skasuj a b pola
    rk = delete element kandydaci 
```

该函数的编译版本（具有适当的定义`c_n'`）是

```
zbieraj iloczyny kandydaci pola = do
      element <- kandydaci
      (a,b,[c,d]) <- iloczyny
      guard (element == (c_n' [c,d]) && (elem a pola) && (elem b pola))
      let nowa = skasuj a b pola
          rk = delete element kandydaci
      reszta <- zbieraj iloczyny rk nowa
      return ([a,b] ++ reszta) 
```

# php - 在 PHP 中将 long int 转换为字符串

> ID：11274346
> 
> 赞同：1
> 
> 时间：2012-06-30T13:15:36.493
> 
> 标签：php, flash-media-server

我将 FMS 与 PHP 一起使用，我需要客户端的 ID 以便在某些时候断开某些用户的连接。因此，我从 FMS 检索客户的 ID，但 FMS 将 ID 作为长整数发送，例如`4702111234508538223`.

这是我的问题；我需要将此数字转换为类似`oAACAAAA`PHP 中的数字。是否有任何捷径或某种图书馆可以做到这一点？否则我必须[将此 AS3 库](http://code.google.com/p/lodgamebox/source/browse/trunk/com/lordofduct/util/LongInt.as) 转换为 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:30:02.033

这个函数将类似的东西转换`"4702111234525315439"`成类似的东西`"oAADAAAA"`：

```
function convert_id_to_str($id)
{
   if (strspn($id, '0123456789') != strlen($id)) {
      return false;
   }
   $str = '';
   if (PHP_INT_SIZE >= 8) {
      while ($id) {
         $str .= chr($id & 255);
         $id >>= 8;
      }
   } else {
      while ($id) {
         $str .= chr(bcmod($id, '256'));
         $id   =     bcdiv($id, '256', 0);
      }
   }
   return $str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T15:40:13.687

您可以使用[BC Math](http://fr2.php.net/manual/en/ref.bc.php)或[GMP](http://fr2.php.net/manual/en/book.gmp.php) PHP 功能来确保在支持 32 位和 64 位 PHP 的服务器上处理 64 位数字，然后[`pack`](http://www.php.net/manual/en/function.pack.php)将结果转换为格式化字符串，例如：

```
$id = "4702111234508538223";

$hi = bcdiv($id, pow(2, 32));
$lo = bcsub($id, bcmul($hi, pow(2, 32)));

var_dump(pack("LL", $lo, $hi)); 
```

退货`string(8) "oAACAAAA"`。代码是*爆炸*的，但也可以很容易地转换为单行代码或函数。使用大数字扩展确保与 32 位平台的兼容性，但如果您确定托管 PHP 解释器的平台具有 64 位功能，您可以使用

```
pack("LL", $id, $id / pow(2, 32)); 
```

# php - 在 PHP 的 heredoc 中使用变量（SQL 实践）

> ID：11274354
> 
> 赞同：43
> 
> 时间：2012-06-30T13:16:45.210
> 
> 标签：php, sql, variables, heredoc

我是 PHP/SQL 的新手，我正在尝试在 heredoc 中使用一个变量，因为我需要输出大量文本。我只包含了第一句话，因为它足以说明问题）。

我的问题是，在 heredoc 中，变量（见下文：`$data['game_name]`和`$data['game_owner']`）不被识别为变量，而是作为纯文本。我该如何解决这个问题？

```
<?php
    try
    {
        // I am connecting the the database base mysql 'test'
        $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
        $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '', $pdo_options);

        // Then I read the data in the database 'video_dame'
        $response = $bdd->query('SELECT * FROM video_game');

        // Pour qu'elle soit visible à l'écran, on affiche
        // chaque entrée une à une
        while ($data = $response->fetch())
        {

            echo <<<'EX'
            <p>Game: $data['game_name']<br/>
            the owner of the game is $data['game_owner']
            </p>
            EX;

        }
        // I end the SQL request
        $response->closeCursor();
    }
    catch (Exception $e)
    {
        die('Error: ' . $e->getMessage());
    }
?> 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-30T13:21:25.947

您的 heredoc 需要稍作修改（因为它实际上是 Nowdoc！）：

```
 echo <<<EX
    <p>Game: {$data['game_name']}<br/>
    the owner of the game is {$data['game_owner']}
    </p>
EX; 
```

*   Heredoc 标识符（与 nowdoc 不同）不能被引用。`'EX'`需要成为`EX`。
*   heredoc 终止符*不能*有任何前面的空格。从文档中：

    > 需要注意的是，带有结束标识符的行不能包含其他字符，可能除了分号 (;)。

    您将Nowdoc 与heredoc 混淆了。

*   字符串中的复杂数据类型必须被包围，`{}`才能将它们解析为变量。例如，`$data['game_name']`应该是`{$data['game_name']}`。

你在这里混淆了heredoc和nowdoc。您想使用**heredoc**而*不是*Nowdoc，因为您的字符串中有变量。Heredocs 是“扩展的”双引号字符串，而 nowdocs 更类似于单引号字符串，因为变量不在 nowdoc 字符串中解析，而是在 heredoc 中。

*   更多关于 heredoc[的信息](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。
*   更多关于 Nowdoc[的信息](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)。

请更仔细地阅读这些文档。

# objective-c - Objective-C：getter 和 setter 中的 + 和 - 有什么区别？

> ID：11274356
> 
> 赞同：-1
> 
> 时间：2012-06-30T13:17:08.023
> 
> 标签：objective-c, setter, getter

使用有什么区别：

```
+ (id) myMethod;

// Rather than
- (id) myMethod; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:27:14.180

使用 a`+`将方法声明为类方法，或者可以直接在类上调用的方法，其中类*是*对象。所以当你有这个时：

```
@implementation Foo
+(NSString*)method1 {
  return @"Foo";
}
-(NSString*)method2 {
  return @"Foo";
}
@end 
```

这些方法以不同的方式调用：

```
[Foo method1];  //=> @"Foo"
Foo* f=[[Foo alloc] init];
[f method2];    //=> @"Foo" 
```

需要注意的另一件事是类方法无法访问实例，这意味着它们无法访问任何类型的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:19:19.367

@Linuxios 几乎总结了类和实例方法的概念。但是，由于您在标题中提到了 getter 和 setter，我想指出，在 Objective-C 中，您可以使用属性而不是编写自己的访问器方法。例如，

在头文件中，您将拥有如下内容：

```
@interface MyObject : NSObject
@property (nonatomic,retain) NSSet* mySet;
@end 
```

在 m 文件中，您将拥有如下内容：

```
@implement MyObject
@synthesize mySet;
@end 
```

要访问另一个类中的集合，您可以这样做：

```
myObject.mySet; // assuming myObject is an instance of the MyObject class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:20:25.963

第一个是类方法（不需要实例）第二个是实例变量（附加到特定实例）。

这个答案很好地解释了这些方法：

[Objective C 中的方法语法](https://stackoverflow.com/questions/683211/method-syntax-in-objective-c)

```
[MyObject myMethod]; // did not have to create an instance

MyObject* myNewObject = [[MyObject alloc] init] autorelease];
[myNewObject myMethod]; // had to create an instance 
```

# javascript - 为可见的 Three.js 形状调整相机

> ID：11274358
> 
> 赞同：6
> 
> 时间：2012-06-30T13:17:14.883
> 
> 标签：javascript, three.js

我有一个相机正在查看的 CubeGeometry，我希望相机缩放，以便立方体完全可见，但不会更大。

我最初的尝试是将立方体顶点转换为相机坐标系，

```
function toScreenXY(position, camera) {
  var pos = position.clone();
  var projScreenMat = new THREE.Matrix4();
  projScreenMat.multiply(camera.projectionMatrix, camera.matrixWorldInverse);
  projScreenMat.multiplyVector3( pos );

  return pos;
}
function ScaleInView() {
  camera.fov = 0.0;
  for (var i=0; i<8; i++) {
    proj2d = toScreenXY(cube.geometry.vertices[i],camera);
    angle = 57.296 * Math.max(Math.atan(proj2d.x/proj2d.z), Math.atan(proj2d.y/proj2d.z));
    camera.fov = Math.max(camera.fov,angle);
  }
  camera.updateProjectionMatrix();
} 
```

我认为这会起作用，但有时它太小，有时又太大（取决于相机的位置）。

我还需要为正交相机执行此操作。

**编辑：** 当立方体面向相机时，我知道如何执行此操作，我正在寻找一种方法，当相机移动到任意（r，theta，phi）位置（球极坐标；r 实际上是为我的目的而保持不变）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T01:27:24.920

**透视相机**。如果相机居中并正面观察立方体，则定义

`dist`=从相机到立方体*正面的距离（重要！）*

和

`height`= 立方体的高度。

如果您将相机视野设置如下

```
fov = 2 * Math.atan( height / ( 2 * dist ) ) * ( 180 / Math.PI ); 
```

那么立方体高度将匹配可见高度。

**正交相机**。如果相机居中并正面观察立方体，则定义

`aspect`= 窗口的纵横比（即宽度/高度）

和

`height`= 立方体的高度。

然后以这种方式构建您的相机：

```
camera = new THREE.OrthographicCamera( -aspect * height/2, aspect * height/2, height/2, -height/2, near, far ); 
```

立方体高度将匹配可见高度。

在任何一种情况下，如果相机没有居中，或者以其他方式查看立方体，那么问题就会更加复杂。

另外，如果窗口比高度窄，那么宽度就是制约因素，问题就比较复杂了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T04:51:39.273

乘以 camera.matrixWorldInverse 会给出相机坐标中的向量，但重要的是不应用透视。

```
function toCameraCoords(position) {
  return camera.matrixWorldInverse.multiplyVector3(position.clone());
} 
```

然后我们可以找到适合场景中所有盒子角的最小角度。arctan(Dx / Dz) 给出角度 BCD，其中 B 是相机正在查看的位置，C 是相机的位置，D 是您希望在相机坐标中可见的对象的位置。

在我的情况下，以下确保立方体边界框完全可见。

```
function ScaleInView() {
  var tmp_fov = 0.0;

  for (var i=0; i<8; i++) {
    proj2d = toCameraCoords(boundbox.geometry.vertices[i]);

    angle = 114.59 * Math.max( // 2 * (Pi / 180)
      Math.abs(Math.atan(proj2d.x/proj2d.z) / camera.aspect),
      Math.abs(Math.atan(proj2d.y/proj2d.z))
    );
    tmp_fov = Math.max(tmp_fov, angle);
 }

 camera.fov = tmp_fov + 5; // An extra 5 degrees keeps all lines visible
 camera.updateProjectionMatrix();
} 
```

# c# - 设置时未设置 TextBox.Text 属性？

> ID：11274359
> 
> 赞同：1
> 
> 时间：2012-06-30T13:17:21.413
> 
> 标签：c#, winforms

这是最奇怪的事情，因为它在某些代码中对我有用，而不是其他代码。以下代码位于子类 TextBox 的类中（注意：我不知道这是否重要，但我将 Text 属性子类化以从私有字段 _realText 设置/获取）

在下面的代码中，第一个 base.Text = this.RealText 工作正常！！！我们还将它设置在该方法 MaskData() 中，并且它有效！！！！那么为什么它在 if(!field.isSecure) 部分中不起作用呢？（查看日志以了解我的意思）。我尝试在 base.Text=temp 之后添加 Invalidate()、Update() 但这没有帮助。

代码：

```
 private void SetupTextInBox()
    {
        if (isInManualMode)
        {
            this.ReadOnly = false;
            base.Text = this.RealText;
        }
        else
        {
            this.ReadOnly = true;
            if (!field.IsSecure)
            {
                string temp = this.RealText;
                log.Info("This field is not secure so show it. field=" + field.Variable + " real='" + temp+"'");
                base.Text = temp;
                log.Info("text value='" + base.Text+"'");
                return;
            }
            else
            {
                MaskData();
            }
        }
    } 
```

日志

```
2012-06-30 07:15:51,468 [1] INFO  AlpineAccess.Plugins.SecureTalkPlugin.SecureTextControl (null) - This field is not secure so show it. field=1.acc real='2222' 
2012-06-30 07:15:51,468 [1] INFO  AlpineAccess.Plugins.SecureTalkPlugin.SecureTextControl (null) - text value='' 
```

编辑：请注意，此方法总是从同一个线程调用。它来自服务器通知，告诉我们在其他地方的电话上已按下音调，然后该线程调用 BeginInvoke 将其放入 GUI/控制线程或诸如此类的东西。

上述方法上游的代码是

```
 public void AppendDTMFDigit(string digit)
    {
        log.Info("specified="+field.MaxSpecified+" someone appending dtmf digit on field=" + field.Variable+" fieldMax="+field.Max+" len="+RealText.Length);
        if (field.MaxSpecified && this.RealText.Length >= field.Max)
            return; //shortcut out since we can't exceed max digits

        BeginInvoke(new MethodInvoker(delegate()
        {
            this.RealText = this.RealText + digit;
            log.Info("new realtext=" + this.RealText);
            SetupTextInBox();
        }
        )); 
    } 
```

更多信息：如果我将所有客户端代码更改为停止使用 Text 属性并使用 RealText 属性，然后停止覆盖 Text 属性，则它可以正常工作。（显然我不希望这样，因为现在我不能只是从我的控件更改为 TextBox 并轻松返回，而无需更改大量引用 RealText 属性的客户端代码......呃，可能不得不忍受这一点。 ...似乎是某种奇怪的错误。

更多信息：让调试器进入其中，这很奇怪。

2 很奇怪的事情。

1.  它进入了getter，而不是setter？？？
2.  它进入 MY Text 属性而不是 TextBox 的 Text 属性。

grrrrr，为什么会...听起来像一个主要错误，对吗？我的意思是，base.Text 应该引用超类的基础，对吗？– Dean Hiller 刚刚编辑

添加 Text 方法属性代码

```
 public override string Text
    {
        get
        {
            return RealText;
        }
        set
        {
            if (value == null)
                throw new ArgumentException("Not allowed to set RealText to null.  Set to empty string instead");
            RealText = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:43:19.967

除非您注释掉 Text 属性，否则此用户控件的完整源代码在这里（您必须使用 RealText 属性并将其公开给客户端，因为 base.Text 似乎无法正常工作）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using log4net;
using IntraNext.Win32.Config;

namespace AlpineAccess.Plugins.SecureTalkPlugin
{

    public partial class SecureTextBox : TextBox
    {
        private static readonly ILog log = LogManager.GetLogger(typeof(SecureTextControl));

        private static readonly Color COLOR_FOCUSED = Color.Yellow;
        private static readonly Color COLOR_FOCUSED_MANUALMODE = Color.PaleGreen;

        private FocusEvent focusListener;
        private Field field;
        private bool isInManualMode;
        private EventHandler textChanged;
        private string RealText;

        public SecureTextBox()
        {
            InitializeComponent();
            RealText = "";
        }

        internal void Initialize(Field field, FocusEvent focusList, EventHandler textChanged)
        {
            this.focusListener = focusList;
            this.textChanged = textChanged;
            this.field = field;

            this.Enter += new EventHandler(SecureTextBox_Enter);
            this.Leave += new EventHandler(SecureTextBox_Leave);
            this.TextChanged += new EventHandler(SecureTextBox_TextChanged);

            MenuItem mnuItemNew = new MenuItem();
            mnuItemNew.Text = "&Clear";

            //THIS textbox HAS a context menu ALREADY BUT here we assign a new context menu to
            //our text box to replace the old one which had cut, paste etc. that we don't want
            //the agent using...
            this.ContextMenu = new ContextMenu();
            this.ContextMenu.MenuItems.Add(mnuItemNew);

            mnuItemNew.Click += new EventHandler(clear_Click);

            SwitchModes();
        }

        void SecureTextBox_TextChanged(object sender, EventArgs e)
        {
            if(isInManualMode) //make sure if in manual mode, we keep changes up to date in realText field
                RealText = Text;
            textChanged(sender, e);
        }

        void clear_Click(object sender, EventArgs e)
        {
            ClearAll();
        }

        internal void SetManualMode(bool inManual)
        {
            if (isInManualMode == inManual)
                return; //we don't care if there is no change so return;

            isInManualMode = inManual;
            SwitchModes();
        }

        void SecureTextBox_Leave(object sender, EventArgs e)
        {
            log.Info("exiting=" + field.Variable);
            focusListener(field.Variable, false, this.RealText);
            BeginInvoke(new MethodInvoker(delegate()
            {
                ChangeBackground();
            }
            ));            
        }

        void SecureTextBox_Enter(object sender, EventArgs e)
        {
            log.Info("entering=" + field.Variable );
            focusListener(field.Variable, true, this.RealText);
            BeginInvoke(new MethodInvoker(delegate()
            {
                ChangeBackground();
            }
            ));
        }

        private void SwitchModes()
        {
            SetupTextInBox();
            ChangeBackground();
        }

        private void SetupTextInBox()
        {
            if (isInManualMode)
            {
                this.ReadOnly = false;
                base.Text = RealText;
            }
            else if (!field.IsSecure)
            {
                this.ReadOnly = true;
                string temp = RealText;
                base.Text = temp;
                Invalidate();
                log.Info("txt=" + base.Text + " temp=" + temp);
            }
            else //not manual mode and IsSecure so mask it and make it readonly
            {
                this.ReadOnly = true;
                MaskData();
            }
        }

        private void MaskData()
        {
            log.Debug("mask=" + this.field.NumBeginDigitsToMaskSpecified + " num=" + field.NumBeginDigitsToMask + " txtLen=" + RealText.Length);
            int numDigitsToMask = RealText.Length;
            if (this.field.NumBeginDigitsToMaskSpecified && this.field.NumBeginDigitsToMask < RealText.Length)
            {
                int numDigits = this.field.NumBeginDigitsToMask;
                string maskedPart = "".PadLeft(numDigits, '●');
                string unmasked = RealText.Substring(numDigits);
                string full = maskedPart + unmasked;
                base.Text = full;
            }
            else
            {
                log.Debug("masking all digits");
                base.Text = "".PadLeft(RealText.Length, '●');
            }
        }

        private void ChangeBackground()
        {
            if (isInManualMode)
                SetManualModeColor();
            else
                SetNonManualModeColor();
        }

        private void SetNonManualModeColor()
        {
            if (this.Focused)
                this.BackColor = COLOR_FOCUSED;
            else
                this.BackColor = Control.DefaultBackColor;
        }

        private void SetManualModeColor()
        {
            if (this.Focused)
                this.BackColor = COLOR_FOCUSED_MANUALMODE;
            else
                this.BackColor = Control.DefaultBackColor;
        }

        public void AppendDTMFDigit(string digit)
        {
            log.Info("manualmode="+isInManualMode+" specified=" + field.MaxSpecified + " someone appending dtmf digit on field=" + field.Variable + " fieldMax=" + field.Max + " len=" + RealText.Length);

            if (isInManualMode)
                return;
            else if (field.MaxSpecified && RealText.Length >= field.Max)
                return; //shortcut out since we can't exceed max digits

            BeginInvoke(new MethodInvoker(delegate()
            {
                RealText = RealText + digit;
                SetupTextInBox();
            }
            )); 
        }

        internal void ClearAll()
        {
            log.Info("Cleared textbox for =" + field.Variable);
            base.Text = "";
            RealText = "";
            SetError("");
        }

        public override string Text
        {
            get
            {
                return RealText;
            }
            set
            {
                if (value == null)
                    throw new ArgumentException("Not allowed to set RealText to null.  Set to empty string instead");
                RealText = value;
            }
        }

        /**
         * Set to "" to clear the error or set anything to make valid
         */
        public void SetError(string error)
        {
            if (!this.IsHandleCreated)
                return;

            SecureTextBox box = this;
            //set to "" to clear the error
            BeginInvoke(new MethodInvoker(delegate()
            {
                errorProvider1.SetError(box, error);
            }));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T21:30:17.570

好的，您已经覆盖了 Text - 您的其中一行上有 THIS：

```
RealText = Text; 
```

这将调用最派生的“文本”属性（因为您没有指定基数）并将在当前控件上调用您覆盖的“文本”

这意味着您正在将 RealText 设置为自身

例如

```
 void SecureTextBox_TextChanged(object sender, EventArgs e)
 {
     if (isInManualMode) //make sure if in manual mode, we keep changes up to date in realText field
     RealText = Text; <---- **THIS CALLS THE OVERIDDEN 'Text' BELOW**

     ... snip 
```

来电

```
public override string Text 
{
    get { return RealText; }
} 
```

这有点……疯了！

你的意思是：

```
 void SecureTextBox_TextChanged(object sender, EventArgs e)
 {
     if (isInManualMode) //make sure if in manual mode, we keep changes up to date in realText field
     RealText = base.Text; <--- THIS? 
```

仔细检查您的代码，我敢打赌这是您的问题之一

此外，稍微更改您的命名约定可能会很有用......例如，我倾向于对私有/受保护字段使用下划线

```
private string _realText; 
```

而不是用于属性的大写字母

```
private string RealText; 
```

通常不公开公共字段，通常使用属性，但是当我这样做时，我倾向于使用与属性相同的大小写

这样可以更容易区分代码中的属性和字段，并使调试更容易

# drupal - 如何使用 CSV 数据将产品导入 UberCart 3？

> ID：11274371
> 
> 赞同：3
> 
> 时间：2012-06-30T13:19:24.387
> 
> 标签：drupal, module, feed, ubercart

我正在使用 D7 和 UC3，我尝试通过 Feeds 模块使用 CSV 数据一次导入许多产品。问题是 Feeds 在目标列中没有*产品信息*字段（如 SKU、价格等），因此我无法上传所有必要的数据。那么，有什么方法可以通过 Feed（或其他方式）从产品信息中访问这些字段。提前致谢！

这是我无法通过 Feed 上传的数据：

![那是我无法通过 Feed 上传的数据](../Images/1356a5078e0b7cc10421ca53f9310ae2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:05:28.763

下载 zip 文件并从以下 url 解压缩到您的模块文件夹： [https ://drupal.org/node/1802908](https://drupal.org/node/1802908)

寻求帮助： [http ://drupal.org/node/1797778](http://drupal.org/node/1797778)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:39:10.930

问题解决了。找到了一个 D7 模块，它在列表中添加了所有 UberCart 属性：

[http://drupal.org/node/1187096](http://drupal.org/node/1187096)

# c# - 如何使用 C# 中的 filehelpers 或其他库从单个文本文件中读取两个实体

> ID：11274372
> 
> 赞同：0
> 
> 时间：2012-06-30T13:19:27.720
> 
> 标签：c#, asp.net-mvc, filehelpers

文本文件包含订单和订单详细信息行。订单标题的第一行。之后有可变数量的详细信息行。在详细信息之后有一个空白行，然后是下一个订单等。对于订单行，第一个字段是订单号。对于详细信息行，第一个字段始终为 1。

```
128502 02.01.2012 20120 02.01.2012
1   Wine    0   1300
1   Meat    5,8333  5,83

128503 02.01.2012 20123 02.01.2012  
1   Wine    20  130
1   Meat    1,33    283,23
1   Cow 2,333   333,23

.... 
```

该文件需要读入实体列表：

```
class Order {
  public string Number; // order number from first field, primary key 
  public string Date;
  ... other fields  
}

class OrderDetails {
  public string Number; // order number from previous line , foreign key to Order
  public string ProductName;
  ... other fields  
} 
```

（取而代之的是 Number 自定义整数 id 列也可以用于关系）

如何使用 FileHelpers 库或其他方式在 C# ASP.NET MVC2 中读取此类文件？

**更新**

样本

[http://www.filehelpers.com/example_multirecords.html](http://www.filehelpers.com/example_multirecords.html)

引用自

[带有 FileHelpers 的多个 CSV 结构](https://stackoverflow.com/questions/8797079/multiple-csv-strutures-with-filehelpers)

显示如何读取两个表。如何在这些表之间创建关系：在读取外键到订单列时，应将其添加到详细信息表中。如何实现这一点，从上一个订单行获取最后一个订单号并将其添加到详细记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:52:29.830

好吧，您可以一口气使用蛮力。读入整个文件Split 上的空白就好。从每个拆分的第一行创建一个订单 从其余部分创建详细信息。

如果文件很大，那么您最多可以读取每个空白行，然后按上述方法进行处理。

另一种可能有一些优势的解决方案。

通过编辑详细信息行并从其实际订单行添加订单号的过程运行文件。然后另一个将订单和细节拆分为两个单独的文件。然后处理订单和细节，而不必担心所有这些同上和两个结构。

第四个解决方案，是给提出这种格式的人一个很好的打击，以鼓励他们正确地做到这一点......

对此没有魔术棒的解决方案，文件格式完全不适合将数据有效地传递给可能明智地存储它的东西。

# java - 如何让 GUI java 变得漂亮？

> ID：11274373
> 
> 赞同：9
> 
> 时间：2012-06-30T13:19:38.477
> 
> 标签：java, user-interface

我很难用java制作一个漂亮的GUI。您可能知道默认的外观和感觉并不吸引人，这就是为什么我想问一下是否有现有的机制或工具可以做到这一点，谢谢。

编辑：

我想开发图表应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:26:47.727

这取决于您使用的框架。如果您使用的是 Swing，则可以使用[**Java Look and Feel**](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。那里有一些非常好的，但这是我从简单的谷歌搜索中找到[**的链接。**](http://geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/)我喜欢 Sea Glass 的 :)[**这**](http://dlemmermann.wordpress.com/2011/05/10/the-best-swing-look-feel-bizlaf/)看起来也很有信息量，可能会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:26:31.370

尝试搜索**Swing Synth**，也许这就是你想要的。

# iphone - iPhone UITableView 使用 Cell ImageView 滚动缓慢

> ID：11274377
> 
> 赞同：0
> 
> 时间：2012-06-30T13:20:13.340
> 
> 标签：iphone, uitableview, uiimageview

当我为每个单元格设置图像时，我的应用程序滚动非常缓慢。我尝试过使用 SDImageWeb 项目，但它的滚动速度仍然很慢，并且单元格上的所有图像视图最终都会被拉伸。这是我在行单元格中的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

}

RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

//root path of image...used to check if image exists for this article
NSString *substring = @"http://316apps.com/ipreachersblog/wp";
NSRange textRange = [entry.articleImage rangeOfString:substring];

if(textRange.location != NSNotFound){
    NSString *thearticleImage = entry.articleImage;
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"(?i)\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))" options:NSRegularExpressionCaseInsensitive error:NULL];
    NSString *someString = thearticleImage;
    NSString *oneurl = [someString substringWithRange:[expression rangeOfFirstMatchInString:someString options:NSMatchingCompleted range:NSMakeRange(0, [someString length])]];
    NSURL *picimage = [NSURL URLWithString:oneurl];
    UIFont *cellFont = [UIFont fontWithName:@"ArialRoundedMTBold" size:15];

    UIFont *cellFont2 = [UIFont fontWithName:@"ArialRoundedMTBold" size:12];    
    NSData * urlData = [NSData dataWithContentsOfURL: picimage];
    UIImage * imageweb = [UIImage imageWithData: urlData];
    CGSize newSize = CGSizeMake(69, 69);
    UIGraphicsBeginImageContext( newSize );
    [imageweb drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    CALayer * l = [cell.imageView layer];
    [l setMasksToBounds:YES];
    [l setCornerRadius:11];
    [l setBorderWidth:2.0];
    [l setBorderColor:[[UIColor blackColor] CGColor]];
    cell.textLabel.text = entry.articleTitle; 

    cell.textLabel.font = cellFont;
    cell.detailTextLabel.font = cellFont2;
    cell.imageView.image = newImage;
    cell.imageView.contentMode = UIViewContentModeScaleAspectFill;

}
else    {
 //loads when no featured image present

}

return cell;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:29:45.540

问题就在这里

```
NSURL *picimage = [NSURL URLWithString:oneurl];
UIFont *cellFont = [UIFont fontWithName:@"ArialRoundedMTBold" size:15];

UIFont *cellFont2 = [UIFont fontWithName:@"ArialRoundedMTBold" size:12];    
NSData * urlData = [NSData dataWithContentsOfURL: picimage];
UIImage * imageweb = [UIImage imageWithData: urlData];
CGSize newSize = CGSizeMake(69, 69);
UIGraphicsBeginImageContext( newSize );
[imageweb drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CALayer * l = [cell.imageView layer];
[l setMasksToBounds:YES];
[l setCornerRadius:11];
[l setBorderWidth:2.0];
[l setBorderColor:[[UIColor blackColor] CGColor]]; 
```

每次滚动视图时，3 个单元格正在下载图像。在这里您正在调整不推荐的图像大小

您需要像这样在延迟加载中设置图像

```
[cell.imageView setImageWithURL:picimage placeholderImage:[UIImage imageNamed:@"loadingPicture.png"]]; 
```

一切都会被这个照顾。你可以通过导入这个`SDImageCache`类来获得它，它将在这个示例代码中可用在[这里](https://github.com/sumanthk2006/SDWebImage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:22:54.043

您正在从远程源下载图像，因此每次加载新单元格时，图像都会被下载，这会降低您的应用程序速度，苹果有一个关于[如何异步加载图像的示例项目](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

# javascript - 在 do-while 循环中使用 continue

> ID：11274379
> 
> 赞同：16
> 
> 时间：2012-06-30T13:20:15.400
> 
> 标签：javascript, loops, iteration, do-while, continue

[MDN 声明：](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Statements#continue_Statement)

> 当您`continue`不带标签使用时，它会终止最里面的封闭`while`, `do-while`or`for`语句的当前迭代，并在下一次迭代中继续执行循环。

我不确定为什么下面的代码不能按我的预期工作。

```
do {
  continue;
} while(false); 
```

即使`while`条件是`false`，我希望它永远运行，因为它会`continue`跳转到块的开头，然后立即`continue`再次执行，等等。但是，不知何故，循环在一次迭代后终止。看起来`continue`被忽略了。

循环`continue`中如何工作？`do-while`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T13:27:08.860

看看这个 jsFiddle：http: [//jsfiddle.net/YdpJ2/3/](http://jsfiddle.net/YdpJ2/3/)

```
var getFalse = function() {
  alert("Called getFalse!");
  return false;
};

do {
  continue;
  alert("Past the continue? That's impossible.");
} while( getFalse() );​ 
```

它似乎达到了继续，然后退出该迭代以运行检查条件。由于条件为假，因此终止。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-30T13:23:41.000

`continue`不跳过检查`while(false)`，而只是忽略括号内的其余代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-30T13:23:02.157

Continue 停止执行块中的其余代码并直接跳转到循环的下一次迭代。

既然你在做`while(false)`，就没有下一次迭代

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-30T13:23:51.297

`continue`不会再次从当前迭代开始，而是跳到下一个迭代（如 MDN 引用中所述）。

由于一个`false`条件，没有下一次迭代 - 所以整个循环完成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-30T13:22:51.287

在 continue 之后，循环条件被评估，因为它是 false，循环将终止。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-30T13:40:20.710

> 我希望它永远运行，因为 continue 跳转到块的开头

`continue`不会跳转到块的开头，它会跳转到块的末尾。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-08T18:56:58.163

## 用于`while(true)`获得无限循环。

如果你替换`while(false)`为`while(true)`，你会得到一个无限循环。

```
do {
  continue;
} while(true); 
```

`continue`跳到块的末尾，在 do-while 循环中，将执行条件语句。

在您的情况下，您的条件是错误的，因此它终止了循环。如果那个条件是`true`，它将在循环的开始处继续。

# oop - 替代（或改进）遭受 LSP 违规的状态模式

> ID：11274381
> 
> 赞同：3
> 
> 时间：2012-06-30T13:20:26.693
> 
> 标签：oop, design-patterns, liskov-substitution-principle, state-pattern

对于我们目前正在构建的发票系统，我很难理解基于状态的功能。该系统将支持发票的计算、人工审批、打印和存档。

起初我认为我们应该使用[状态模式](http://en.wikipedia.org/wiki/State_pattern)来对此进行建模。发票将是上下文，它将打印、归档等委托给其当前分配的状态。

但这显然是个坏主意，因为不同的状态（创建、批准、打印、存档）不应该支持相同的操作。例如，您不应该能够打印以前未经批准的发票。为不受支持的操作抛出异常将违反 LSP。[我在这里](http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/)找到了这个问题的一般描述。

有没有人有想法，如何适当地实施这个？

* * *

PS：我知道这听起来像是一些蹩脚的家庭作业，但事实并非如此；我需要这个用于现实世界的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:46:03.793

您基本上是在创建应用程序状态的工作流，在每个状态下，发票上的可用操作都会发生变化。状态模式似乎不合适，但是如果您还创建了一些`boolean canPrint()`必须在调用之前使用的操作，您仍然可以使用它`print()`。`print()`将有一个允许在`canPrint()`返回时抛出异常的合同`false`。这样，子类就不会破坏该契约。另一种选择是有一个`boolean tryPrint()`，它只会在可以打印的情况下打印，并返回是否打印。

但是，如果状态主要支持非重叠操作，那么状态模式可能不是解决方案。退后一步，寻找更好的方法，而不是试图让特定的模式适应你的问题。一种方法是为每个“状态”创建一个具有必要操作的单独类：like `CreatedInvoice`、`ApprovedInvoice`等。这些类只有它们支持的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:37:31.067

[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)可能会对您有所帮助。

添加方式部分并修复链接。

可以有 Calculator、Approver、Printer 和 Archiver 类，它们是处理程序类。这些可以从父抽象类覆盖 processRequest()。Invoice 可以是传递给每个处理程序的 processRequest() 方法的类。在这里使用该模式的优点是可以动态添加较新的处理程序，并且可以轻松更改具有处理程序序列的链链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:21:03.960

状态模式是否真的适合你的情况并不确定，但如果不是，Liskov 不是原因。抛出某种“当前状态下的无效操作”异常可以在状态接口中定义为可能且有效，然后这样做的子类不会违反 LSP。

[GoF 设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)一书中用于状态模式的经典示例是 TCPConnection，它肯定具有在所有状态下都不支持或不明智的操作。例如，您不能在关闭的连接上传输。

# php - 如何使用 PHP 在每个星期四向文本文件中添加一行文本？

> ID：11274382
> 
> 赞同：0
> 
> 时间：2012-06-30T13:20:49.067
> 
> 标签：php

我有一个文本文件，其中包含最新的 minecraft 快照列表，然后显示在我的个人网站上，问题是我必须每个星期四手动添加快照名称，我找不到任何方法来自动化这个过程。

文本文件的布局如下：

12w26a;

12w25a;

12w24a;

'12' 代表当前年份，'w' 仅代表周，'26' 表示它是多少数字快照，'a' 并不重要，但必须在那里。

我在网上找到了一些 PHP 来自动化这个过程，但显然它不再有效

[http://pastebin.com/LP3WKCiZ](http://pastebin.com/LP3WKCiZ)

任何帮助将非常感激。:)

编辑：这是上述代码的现场演示（不知道为什么它不工作，因为 Mojang 已经回到只使用 jar 文件） [http://langkid1.me/pre/](http://langkid1.me/pre/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:37:31.937

创建一个读取文本文件内容的 php 页面，然后通过 file_exists() 函数检查是否存在另一个快照，如果存在，则应更新维护列表的文本文件。

现在创建一个脚本，其中包含指向 php 页面的 curl 命令。

```
#!/bin/sh
curl http://localhost/update.php 
```

最后，您只需要设置一个 cron 作业来每周四运行脚本。

```
0 0 * * 4 sh /path/script.sh 
```

希望这可以帮助。:)

# php - 数据库驱动的 PHP - CSS 下拉菜单

> ID：11274390
> 
> 赞同：1
> 
> 时间：2012-06-30T13:21:43.157
> 
> 标签：php, database, drop-down-menu, database-driven

我创建了一个 php 文件来检索每个用户对他们的数据库数据的权限。代码将其显示为下拉框。下面的代码用于检索和显示它。

```
//session_start();
include('db.php');
//include('../CheckSession.php');

$userid=$_SESSION['UserID'];
echo'<ul class="dropdown"><li><a href="index.php">Home</a></li>';

$sql = "select privilege.privilege_catagory from privilege inner join user_privilege on privilege.privilege_id=user_privilege.privilege_id where user_privilege.UserID=$userid group by privilege.privilege_catagory ";
$result= mysql_query($sql) or die(mysql_error());
$num_row=mysql_num_rows($result);
if($num_row!=0)
{
    while($rb=mysql_fetch_array($result))
    {
        $p_cat=$rb['privilege_catagory'];
        echo'<li><a href="#">'.$p_cat.'</a>';

        $sql2 = "SELECT privilege.url_Location,privilege.option_Name FROM privilege inner join user_privilege on privilege.privilege_id=user_privilege.privilege_id WHERE privilege.privilege_catagory='$p_cat' AND user_privilege.UserID=$userid" ;
                //$sql2 = "SELECT privilege.url_Location,privilege.option_Name FROM privilege inner join user_privilege on privilege.privilege_id=user_privilege.privilege_id  WHERE user_privilege.UserID =$userid";
        $result2= mysql_query($sql2) or die(mysql_error());
        $num_row2=mysql_num_rows($result2);
        if($num_row2!=0)
        {
            echo'<ul class="sub_menu">';
            while($rb2=mysql_fetch_array($result2))
            {
                echo'<li><a href="'.$rb2['url_Location'].'">'.$rb2['option_Name'].'</a></li>';
            }
                echo'</ul>';
         }
         echo'</li> ';
    }

    mysql_free_result($result);      
} 
else
{

}
echo'</ul>';
?> 
```

Db 表如下：- `privilege_id`, `privilege_name`, `privilege_catagory`, `url_Location`, `option_Name`（这是在下拉菜单中显示的内容）

我在 index.page 中包含了这个 php 页面。那里一切正常。但是当页面重定向到任何其他页面时，下拉的 url 与当前 url 连接，例如，当我重定向到 localhost/demo/index.php 到 localhost/demo/Admission/NewAdmission.php 它可以工作

但是当我从那里点击主页（'index.php'是url值）时，它会转到：localhost/demo/Admission/index.php！

有趣的。但我遇到了严重的麻烦。所有的关注都受到热烈欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:33:16.880

尝试在 href 中提供您网站的基本网址。

```
echo'<li><a href="'.$base_url.$rb2['url_Location'].'">'.$rb2['option_Name'].'</a></li>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:49:57.870

原因是您在 href 属性中使用了相对链接。如果你使用

```
<a href="new.php">Links</a>
```

你在一个带有 url 'http://sample/demo/index.php' 的页面上，然后你点击'Links'，你的新 URL 将是 'http://sample.com/demo/index.phpnew .php'！！！您可以通过使用绝对网址（如`<a href="http://sample.com/demo/new.php">Links</a`>）来避免这种情况。您应该在 PHP 中使用一个常量或变量，它可以存储您网站的基本 URL，然后在所有链接中回显它，这样如果您更改网站的域，您不必转到每个链接并更改域名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T17:08:17.320

感谢大家的支持。对不起，伙计们，我让代码工作了。通过将 php 的 navigator php 文件放在其他文件夹中，这实际上是一个逻辑错误。我将“Useraccount.php”{下拉代码}放在主文件夹中，并为所有链接制作了“../”。

再次感谢大家。

# perl - Perl 需要正确的 grep 运算符来匹配变量的值

> ID：11274391
> 
> 赞同：2
> 
> 时间：2012-06-30T13:22:06.397
> 
> 标签：perl, grep

我想看看我的数组中是否有重复的项目，有超过 16.000 个，所以会自动化它可能有其他方法，但我从这个开始，嗯，除非有一个简单的命令，否则我想完成它。我正在做的是从一个数组移动并推送到另一个数组，这样，检查目标数组以查看它是否“在数组中”（就像 PHP 中有这样的命令）。

所以，我得到了这个子例程，它适用于文字，但不适用于变量。这是因为'eq'或我应该需要的任何东西。'sourcefile' 将包含目标数组的一个或多个单词。

```
// Here I just fetch my file

    $listamails = <STDIN>;
    # Remove the newlines filename
    chomp $listamails;
    # open the file, or exit
    unless ( open(MAILS, $listamails) ) {

    print "Cannot open file \"$listamails\"\n\n";
    exit;
    }
    # Read the list of mails from the file, and store it
    # into the array variable @sourcefile
    @sourcefile = <MAILS>;
    # Close the handle - we've read all the data into @sourcefile now.
    close MAILS;

    my @destination = ('hi', 'bye');

    sub in_array
    {
       my ($destination,$search_for) = @_;
       return grep {$search_for eq $_} @$destination;
    }

    for($i = 0; $i <=100; $i ++)

    {
      $elemento = shift @sourcefile;
      if(in_array(\@destination, $elemento))
      {
        print  "it is";
      }
      else
      {
        print "it aint there";
      }
    } 
```

好吧，如果我没有在其中包含 $elemento，而是在其中放置了一个“hi”，它确实可以工作，并且我还打印了 $elemento 的值，它也是“hi”，但是当我放置变量时，它不起作用，并且那是因为'eq'，但我不知道还能放什么。如果我输入 == 它会抱怨 'hi' 不是数值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:39:54.090

当您想要不同的值时，请考虑哈希。

```
my %seen;
@seen{ @array } = (); 

if (keys %seen == @array) {
    print "\@array has no duplicate values\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T16:39:11.747

不清楚你想要什么。如果您的第一句话是唯一重要的（“我想看看我的数组中是否有重复的项目”），那么您可以使用：

```
my %seen;
if (grep ++$seen{$_} >= 2, @array) {
   say "Has duplicates";
} 
```

你说你有一个大数组，所以一旦找到重复项就停止可能会更快。

```
my %seen;
for (@array) {
   if (++$seen{$_} == 2) {
      say "Has duplicates";
      last;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:11:32.233

正如[eugene y](https://stackoverflow.com/a/11274497/18914)所说，哈希绝对是这里的必经之路。这是您发布到基于哈希的方法的代码的直接翻译（在此过程中添加了更多的 Perlishness）：

```
my @destination = ('hi', 'bye');
my %in_array = map { $_ => 1 } @destination;

for my $i (0 .. 100) {
  $elemento = shift @sourcefile;
  if(exists $in_array{$elemento})
  {
    print  "it is";
  }
  else
  {
    print "it aint there";
  }
} 
```

此外，如果您的意思是检查 的所有元素`@sourcefile`（而不是测试前 101 个元素）`@destination`，您应该将该`for`行替换为

```
while (@sourcefile) { 
```

另外，不要忘记`chomp`从文件中读取的任何值！从文件中读取的行在它们的末尾有一个换行符（`\r\n`或`\n`在初始问题的评论中提到），这将导致两者`eq`和哈希查找都报告否则匹配的值是不同的。这很可能是您的代码一开始就无法正常工作的原因，而改用 use`sort`或 hash 也无法解决这个问题。首先`chomp`您的输入使其工作，然后使用`sort`或散列以使其高效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T13:41:39.127

顺便说一句，在大量项目中查找重复项时，使用基于**排序**的策略要快得多。对项目进行排序后，所有重复项将彼此相邻，因此要判断某项是否重复，您只需将其与前一个进行比较即可：

```
@sorted = sort @sourcefile;
for (my $i = 1; $i < @sorted; ++$i) {   # Start at 1 because we'll check the previous one
    print "$sorted[$i] is a duplicate!\n" if $sorted[$i] eq $sorted[$i - 1];
} 
```

如果有多个欺骗，这将打印多个欺骗消息，但您可以清理它。

# iphone - 如何在 iphone 中多次调用的方法中只推送一次视图

> ID：11274392
> 
> 赞同：0
> 
> 时间：2012-06-30T13:22:21.997
> 
> 标签：iphone, pushviewcontroller

```
 - (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message
{
       ChatViewController *chatView;
       if(contactView==nil)
       {                
       chatView=[[ChatViewController alloc] initWithNibName:@"ChatViewController" bundle:nil];
        }   
       [self.navigationController pushViewController:chatView animated:YES];
       [messageDelegate newMessageReceived:m]; 
} 
```

上面的委托方法为每个传入的消息调用。当它调用时，它会转到一个新的 UIViewController。我的问题是一个视图推送了多个 tinmes，所以会发生错误。我该如何在 iphone 中修复这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:26:04.883

在推送视图控制器之前添加此代码段

```
BOOL viewControllerAlreadyPushed = NO;
for (UIViewController *controller in self.navigationController.viewControllers) {
    if ([controller isKindOfClass:[ChatViewController class]]) {
        viewControllerAlreadyPushed = YES;
    }
}

if(!viewControllerAlreadyPushed) //if not pushed, push it
{
    ChatViewController *chatView;
    if(contactView==nil)
    {                
        chatView=[[ChatViewController alloc] initWithNibName:@"ChatViewController" bundle:nil];
    }   
    [self.navigationController pushViewController:chatView animated:YES];
    [messageDelegate newMessageReceived:m]; 
} 
```

# ruby - Ruby Thin/Rack 奇怪的多字节字符行为

> ID：11274401
> 
> 赞同：2
> 
> 时间：2012-06-30T13:23:33.557
> 
> 标签：ruby, encoding, utf-8, rack, thin

**问题被重新写了。**

我正在开发一个简单的 Web 框架，并且遇到了来自我正在使用的 Rack 或 Thin 服务器的奇怪行为。

我试图尽可能简化**config.ru**文件，以获得以下重现奇怪问题的代码：

```
app = Proc.new do |env|
    content = "<p>عربي</p>"
    headers = {'Content-Type' => 'html/text; charset=utf-8', 'Content-Length' => content.length.to_s}
    [200, headers, [content]]
end

run app 
```

上面的代码是一个正常的 Rack 进程，内容是一个 HTML 段落，其中包含四个字母的阿拉伯单词。现在，运行 Thin server: `thin start`，我正在等待网页的来源是：

```
<p>عربي</p> 
```

虽然它变成了：

```
<p>عربي 
```

只有，没有结束标签。如果我插入一个英文单词而不是阿拉伯语单词，则服务器可以正常工作，因此我断定问题与阿拉伯语的编码或多字节字符有关。

我正在使用 Ruby 1.9.2。文件的编码是 UTF-8。如果我只是`puts "<p>عربي</p>"`在没有机架或瘦服务器的控制台中尝试，Ruby 效果很好。

因此，问题只是在使用 Rack and Thin + 消失的字符数 == 文本中的阿拉伯字符数时，阿拉伯文本之后的一些字符消失了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T15:55:13.203

有`'Content-Length' => content.bytesize.to_s`改善吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T13:31:56.610

好吧，你必须告诉 Ruby 字符串中包含阿拉伯语。使用`force_encoding`任何编码支持这些阿拉伯字符的方法：

```
str.force_encoding("nameOfArabicEncoding") 
```

# c# - TextBlock 中的绑定在 WPF 中不起作用

> ID：11274402
> 
> 赞同：1
> 
> 时间：2012-06-30T13:23:35.400
> 
> 标签：c#, wpf, data-binding, textblock

我想动态更改`TextBlock`我的类中的文本。

**XAML 代码**：

```
<TextBlock Name="Footer_text"  Text=""/> 
```

**C#**：

```
string footerMainMenuText = "Setting";
Binding  set = new Binding("");
set.Mode = BindingMode.OneWay;
set.Source = footerMainMenuText;
Footer_text.DataContext = footerMainMenuText;
Footer_text.SetBinding(TextBlock.TextProperty, set); 
```

我检查了最后一行，并且`Footer_text.Text`设置正确。( `Footer_text.Text="Setting"`)，但`TextBlock`在我的应用程序中没有显示“设置”。这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:29:22.773

如果您正在绑定 - 为什么不直接在 XAML 中进行呢？看看你的代码，这有点毫无意义——你还不如去

```
Footer_text.Text = "Setting"; 
```

理想情况下，您应该在 XAML 中执行此操作，或者至少为其提供绑定的内容

```
<TextBlock Text="{Binding SomeProperty}" /> 
```

我不知道你为什么要将它自己的“字符串”绑定到任何东西......你有一个需要绑定到 text 属性的对象吗？

也使用

```
Binding("") 
```

那有什么作用？一条空白路径？不确定绑定目标会在那里......你试过了吗

```
Binding() 
```

反而？

编辑：

另外，您的绑定未更新控件的原因可能是因为您尚未绑定到实现 INotifyPropertyChanged 或类似接口的对象。控件需要知道值何时发生变化，所以我想绑定到“字符串”不会在 TextBlock 发生变化时给出正确的通知

编辑2：

这是绑定工作的一个快速示例：

我的窗口类 Window.cs：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
        <TextBlock x:Name="txtName" Text="{Binding Name}"></TextBlock>
            <Button Click="Button_Click">Click me 1</Button>
            <Button Click="Button_Click_1">Click me 2</Button>
        </StackPanel>
    </Grid>
</Window> 
```

Window.xaml.cs 中的代码

```
public partial class MainWindow : Window
{
    SomeObjectClass obj = new SomeObjectClass();
    public MainWindow()
    {
        InitializeComponent();

        txtName.DataContext = obj;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        obj.Name = "Hello World";
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        obj.Name = "Goobye World";
    }
} 
```

要绑定的对象（使用 INotifyPropertyChanged）

```
class SomeObjectClass : INotifyPropertyChanged
{
    private string _name = "hello";
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
            OnPropertyChanged("Name");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string PropertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }
} 
```

单击按钮会更改 SomeObject.Name，但会更新文本框。

# json - 使用 HTML 5 和 JSON 进行“Run Anywhere”开发时的 SEO 友好 URL

> ID：11274405
> 
> 赞同：0
> 
> 时间：2012-06-30T13:23:58.600
> 
> 标签：json, html, seo, friendly-url

我刚刚开始一个 WORA 项目：前端：HTML5 / JSON；后端：.NET MVC API。

我正在寻找一些关于如何开发的指针，以便该网站具有 SEO 友好的 URL。

显然，如果前端是 .NET，因为您可以在 web.config 中使用 Global.ASAX 或 Rewrite，这很好，但如果前端是简单的 HTML5 和 JSON 以允许部署为移动 Web 和本机应用程序，那么结构必须在 javascript 或 HTML 中生成。

有没有关于如何做到这一点的教程/文章？

在此先感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:54:50.470

您有权访问这些`.htaccess`文件吗？（没有双关语的意思）。

您也可以在那里使用重写规则来处理干净的 url。一个例子是[here](http://www.hotscripts.com/forums/web-servers/36500-create-clean-url-htaccess-rewrite-engine.html)。

# asp.net - 在 facebook 用户墙上发布用户在网站上进行一些交互

> ID：11274408
> 
> 赞同：-1
> 
> 时间：2012-06-30T13:25:02.497
> 
> 标签：asp.net, facebook, facebook-c#-sdk

里面有一个拍卖网站，要求是每次用户在拍卖中出价。如果用户允许我们代表他们发帖，该操作将发布在他们的 Facebook 墙上。这是可能的吗？我必须知道什么才能做到这一点。我对 facebook 应用程序开发不太了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:48:32.633

我不知道`facebook-c#-sdk`（如您标记的那样），但为此需要遵循这些步骤

1.  使用具有[user_status](http://developers.facebook.com/docs/authentication/permissions/)权限的[facebook OAuth 2.0](http://developers.facebook.com/docs/authentication/server-side/)对用户进行身份验证
2.  并且您需要使用[所需的参数调用状态 api](https://developers.facebook.com/docs/reference/api/status/)

谷歌搜索后，我找到了一个使用 facebook-c#-sdk 更新状态的小解决方案

```
FacebookClient fbClient = new FacebookClient(accessToken);  
parameters = new Dictionary<string, object> { 
    { "message", "this is my test message" }
};
fbClient.Post("me/feed", parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:55:27.743

上面的答案是一个可能的解决方案，但有点笨拙。

利用 Open Graph Actions 会更好。

你的出发点是阅读：

[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

当然，这并不像 FB 建议的那么简单，文档也很粗略，但是对于根据您的要求进行自动化的“无摩擦”操作，这是要遵循的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:28:12.433

我为此创建了一个视频教程和示例源代码。

视频/代码： http: [//www.markhagan.me/Samples/Grant-Access-And-Post-As-Facebook-User-ASPNet](http://www.markhagan.me/Samples/Grant-Access-And-Post-As-Facebook-User-ASPNet)

如果你不想去我的网站，这里是源代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using Facebook;

namespace FBO
{
    public partial class facebooksync : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            CheckAuthorization();
        }

        private void CheckAuthorization()
        {
            string app_id = "374961455917802";
            string app_secret = "9153b340ee604f7917fd57c7ab08b3fa";
            string scope = "publish_stream,manage_pages";

            if (Request["code"] == null)
            {
                Response.Redirect(string.Format(
                    "https://graph.facebook.com/oauth/authorize?client_id={0}&redirect_uri={1}&scope={2}",
                    app_id, Request.Url.AbsoluteUri, scope));
            }
            else
            {
                Dictionary<string, string> tokens = new Dictionary<string, string>();

                string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&scope={2}&code={3}&client_secret={4}",
                    app_id, Request.Url.AbsoluteUri, scope, Request["code"].ToString(), app_secret);

                HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

                using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
                {
                    StreamReader reader = new StreamReader(response.GetResponseStream());

                    string vals = reader.ReadToEnd();

                    foreach (string token in vals.Split('&'))
                    {
                        //meh.aspx?token1=steve&token2=jake&...
                        tokens.Add(token.Substring(0, token.IndexOf("=")),
                            token.Substring(token.IndexOf("=") + 1, token.Length - token.IndexOf("=") - 1));
                    }
                }

                string access_token = tokens["access_token"];

                var client = new FacebookClient(access_token);

                client.Post("/me/feed", new { message = "markhagan.me video tutorial" });
            }
        }
    }
} 
```

# wcf - 如何使用后台工作线程制作 WCF 服务？

> ID：11274411
> 
> 赞同：2
> 
> 时间：2012-06-30T13:25:26.320
> 
> 标签：wcf, backgroundworker

我有一个 WCF 服务，所有客户端都连接到该服务以获取通知\提醒（使用他们实现的 CALLBACK 接口）。目前 WCF 服务是自托管的，但计划是将其托管在 Windows 服务中。

WCF 服务具有“发布”、“订阅”和“取消订阅”操作。

我需要有某种**后台工作线程**[每 XXX 分钟] 不断地轮询 SQL 服务器数据库表，并查找某些“提醒”行。一旦找到它们 - 它应该通知所有连接的客户端。

我想到了两种方法来实现这一点。

.

***方法一：***

有一个单独的 EXE 项目（不希望它成为控制台，那么它应该是什么 - Windows 服务？）将启动并运行后台线程。后台线程将作为其客户端之一连接到“提醒”服务。后台线程将轮询数据库，一旦它找到一些东西 - 它会向 WCF 服务发送一条“发布”消息，这将使 WCF 服务向所有订阅的客户端发送提醒。

.

***方法乙：***

以某种方式使后台线程***在***WCF 服务项目中运行，当它在数据库中检测到新的提醒行时，以某种方式使其向 WCF 服务“发出信号”，然后 WCF 服务将把该信息发送给所有订阅的客户端.

.

哪种方法更好？还有其他建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T13:38:40.733

如果这是一个长期运行的过程，Windows 服务是完美的解决方案。您的主 Win 服务线程将轮询数据库，将结果排队到某种供应商/消费者线程安全集合中。

您可以在 win 服务中托管 WCF 服务，然后该服务可以使用（删除）队列中的任何结果并根据请求将它们传递回客户端（对 WCF 的调用将进入它们自己的线程）

这是一个非常常见的架构，并且不难实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:10:06.943

**方法一：**

如果您要创建两个单独的主机（即，一个用于 WCF 服务，一个用于“轮询”服务），那么您实际上只有一个选项可以让它们正常工作。

Windows 服务通信非常有限（没有服务端点的帮助，例如 WCF）。因此，如果您要在 Windows 服务中托管“轮询”服务，则无论如何都必须将其与 WCF 服务相结合。

然后将这两个服务一起托管在一个 Windows 服务中并通过手动实例化 WCF 主机并将“轮询”服务传递给构造函数是可行的。

```
protected override void OnStart(string[] args)
{
    //...

    // This would be you "polling" service that would start a background thread to poll the db.
    var notificationHost = new PollingService();
    // This is your WCF service which you will be "self hosted".
    var serviceHost = new WcfService(notificationHost);

    new ServiceHost(serviceHost).Open();
    //...
} 
```

这远非理想，因为您需要通过两个服务之间的事件进行通信，而且您的 WCF 服务必须在单例模式下运行才能手动实例化工作......所以这让你......

**方法B：**

如果您要在 WCF 服务中托管“轮询”服务，您将遇到许多问题。

1.  您需要了解创建的“轮询”服务实例的数量。如果您的 WCF 服务已配置为为每个会话实例化，您可能会得到太多的“轮询”服务，而这最终可能会杀死您的数据库/服务器。
2.  为避免第一个问题，您可能需要设置单例 WCF 服务，这可能会在不久的将来导致扩展问题，即一个 WCF 服务实例不足以处理连接请求的数量。

**方法C：**

鉴于方法 A 和 B 的缺点，最好的解决方案是托管两个独立的 WCF 服务。

1.  这是您订阅/取消订阅/发布的常规服务。
2.  这是您的带有订阅/取消订阅的轮询单例服务。

这个想法是，您的常规服务在收到订阅者后将打开与您的轮询服务的新连接或使用现有连接（取决于您如何配置会话）并等待回复。您的轮询服务是一项长期运行的 WCF 服务，它轮询您的数据库并将通知发布给其订阅者（即其他 WCF 主机）。

**优点：**

1.  您可以放心，只有一项投票服务。
2.  您可以扩展您的解决方案以在 IIS 中托管常规服务并在 Windows 服务中托管轮询服务。
3.  两个服务之间的通信限制最小，并且不需要事件。
4.  通过它们的接口相互依赖地测试每个服务。
5.  服务之间的低耦合和高内聚（这就是我们想要的！）。

**缺点：**

1.  更多的服务意味着更多的接口和合约需要维护。
2.  更高的复杂性。

# python - 确定 Pyramid 中的用户语言

> ID：11274420
> 
> 赞同：13
> 
> 时间：2012-06-30T13:26:32.730
> 
> 标签：python, localization, pyramid

我想为我的项目进行国际化。我按照官方文档中的描述进行了操作，但是本地化仍然不起作用。这是我尝试获取用户语言环境的方法：

```
def get_locale_name(request):
    """ Return the :term:`locale name` associated with the current
    request (possibly cached)."""
    locale_name = getattr(request, 'locale_name', None)
    if locale_name is None:
       locale_name = negotiate_locale_name(request)
       request.locale_name = locale_name
   return locale_name 
```

但是`request`没有属性“local_name”，但它有“Accept-Language”，所以当函数`get_local_name`在请求中找不到“local_name”时，它会调用另一个函数：

```
def negotiate_locale_name(request):
    """ Negotiate and return the :term:`locale name` associated with
    the current request (never cached)."""
    try:
        registry = request.registry
    except AttributeError:
        registry = get_current_registry()
    negotiator = registry.queryUtility(ILocaleNegotiator,
                                       default=default_locale_negotiator)
    locale_name = negotiator(request)

   if locale_name is None:
        settings = registry.settings or {}
        locale_name = settings.get('default_locale_name', 'en')

   return locale_name 
```

我怎么能看到`negotiator`尝试从全局环境中获取本地，但如果它不能从配置中执行它的设置值。而且我不明白为什么 Pyramid 不能直接从请求的“Accept-Language”字段中获取语言环境？

而且，我怎样才能正确确定语言环境？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T13:52:35.570

Pyramid 并没有规定应该如何协商语言环境。将您的站点语言基于“Accept-Language”标题可能会导致问题，因为大多数用户不知道如何设置他们首选的浏览器语言。确保您的用户可以轻松切换语言并使用 cookie 存储该偏好以供将来访问。

您需要[`_LOCALE_`在请求上设置一个键](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/i18n.html#the-default-locale-negotiator)（例如，通过事件处理程序），或者提供您自己的[自定义语言环境 negotiator](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/i18n.html#using-a-custom-locale-negotiator)。

这是一个使用[`NewRequest`事件](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/events.html#pyramid.events.NewRequest)和[`accept_language`header](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/request.html#pyramid.request.Request.accept_language)的示例，它是[webob`Accept`类](http://docs.webob.org/en/latest/modules/webob.html#module-webob.acceptparse)的一个实例：

```
from pyramid.events import NewRequest
from pyramid.events import subscriber

@subscriber(NewRequest)
def setAcceptedLanguagesLocale(event):
    if not event.request.accept_language:
        return
    accepted = event.request.accept_language
    event.request._LOCALE_ = accepted.best_match(('en', 'fr', 'de'), 'en') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:44:31.537

请注意，`request._LOCALE_`仅因为默认情况下语言环境协商器是[`default_locale_negotiator`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/i18n.html?awesome#pyramid.i18n.default_locale_negotiator). 如果您有非常复杂的检查，例如，如果 cookie 不存在，您必须从数据库中获取用户，那么 NewRequest 处理程序对于不需要任何翻译的请求确实有开销。对于他们，您还可以使用自定义语言环境协商器，例如：

```
def my_locale_negotiator(request):
    if not hasattr(request, '_LOCALE_'):
        request._LOCALE_ = request.accept_language.best_match(
            ('en', 'fr', 'de'), 'en')

    return request._LOCALE_

from pyramid.config import Configurator
config = Configurator()
config.set_locale_negotiator(my_locale_negotiator) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T08:18:26.150

从金字塔 1.5 开始，您可以使用这些请求属性来访问当前语言环境：

`request.localizer`的一个实例[`Localizer`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/i18n.html#pyramid.i18n.Localizer)

[`request.locale`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/request.html#pyramid.request.Request.locale_name)如同`request.localizer.locale_name`

# android - 使用地理编码器反向地址

> ID：11274422
> 
> 赞同：0
> 
> 时间：2012-06-30T13:26:47.280
> 
> 标签：android, google-maps, reverse-geocoding

我正在尝试获取特定地理点的地址，但是当我尝试使用 try 并捕获它时失败了。这是我的代码

```
 srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6)); 

        Geocoder geocoder=new Geocoder(getBaseContext(), Locale.getDefault());
        try
        {
            List<Address> addresses=geocoder.getFromLocation(srcGeoPoint.getLatitudeE6()/1E6,
                    srcGeoPoint.getLongitudeE6()/1E6,1);
            String add="";
            if(addresses.size()>0)
            {
                for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                        i++)
                      add += addresses.get(0).getAddressLine(i) + "\n";
            }
            tv.setText(add);
        }
        catch(IOException e)
        {
            e.printStackTrace();
        } 
```

它在这一行失败 **List addresses=geocoder.getFromLocation(srcGeoPoint.getLatitudeE6()/1E6, srcGeoPoint.getLongitudeE6()/1E6,1);** 有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:17:47.550

地理编码器在模拟器中不起作用，如下所述： [Does geocoder.getFromLocationName not work on emulators?](https://stackoverflow.com/questions/9397836/does-geocoder-getfromlocationname-not-work-on-emulators)

我自己也实现了，它确实不在模拟器中，而是在设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:49:48.117

我还没有批准答案的权力，但 Diego 是 100% 正确的，地理编码器在模拟器上不起作用，如果你想调试它，你必须使用真实设备。相信我，直到我发现出了什么问题，我才用了最长的时间把头撞在墙上。所以帮自己一个忙，这样你就不会受到脑震荡，只需使用真实的设备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:21:04.803

您可以将这些转换为双打：

```
srcGeoPoint.getLatitudeE6()/1E6
srcGeoPoint.getLongitudeE6()/1E6 
```

完整代码：

```
List addresses=geocoder.getFromLocation((double) (srcGeoPoint.getLatitudeE6()/1E6), (double) (srcGeoPoint.getLongitudeE6()/1E6),1); 
```

# javascript - 用户离开网页时如何显示模态窗口？

> ID：11274431
> 
> 赞同：0
> 
> 时间：2012-06-30T13:27:35.167
> 
> 标签：javascript

我有一种情况，我必须阻止用户离开网页，当用户点击 X 图标或离开页面时，一旦用户点击我必须打开的图像，我必须显示一个带有报价（图像）的模式窗口具有报价表的特价页面。

如何实现这一点 -

1.  防止离开页面？
2.  如何为每次点击模态窗口图像生成一个新的随机 url，这样就没有人可以复制报价页面 Url 并转发给其他用户？

我在谷歌搜索防止用户离开并找到下面的代码，但我不知道如何正确使用它。任何方向将不胜感激。

```
var warning = false;
window.onbeforeunload = function() { 
  if (warning) {
    return 'You have unsaved changes.';
  }
} 
```

此网址上的等：[JavaScript：离开或导航离开页面之前的确认/警告](http://www.kavoir.com/2010/04/javascript-confirmation-warning-before-leaving-or-navigating-away-from-a-page.html)

请帮帮我，我是 php 世界的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:40:27.257

您只能显示一个简单的浏览器生成的对话（与您链接的示例类似），任何更复杂的对话都是不可能的。

此外，除非您试图阻止某人离开页面而不保存他们的工作，否则您只会让您的用户感到不安和疏远。您真的不应该尝试对访问者强制使用某种模式。他们都有自己的浏览方式，如果你试图强迫他们进入不同的模式，他们只会反感。

# c# - 访问列表自定义类中的项目

> ID：11274432
> 
> 赞同：2
> 
> 时间：2012-06-30T13:27:35.833
> 
> 标签：c#

好的，我有这个代码：

```
URLs.Add(new URL(str.URL, str.Title, browser)); 
```

这是 URL 类：

```
public class URL
{
    string url;
    string title;
    string browser;
    public URL(string url, string title, string browser)
    {
        this.url = url;
        this.title = title;
        this.browser = browser;
    }
} 
```

现在，我如何访问 URL 标题..？
即，URLs[0] 的属性...？当我打印 URLs[0].ToString 时，它只给了我 Namespace.URL。
如何打印 URL 类中的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:33:45.680

升级你的类以公开公共属性：

```
 public class URL 
    { 
        public string Url { get; set; } 
        public string Title { get; set; } 
        public string Browser { get; set; } 
        public URL(string url, string title, string browser) 
        { 
            this.Url = url; 
            this.Title = title; 
            this.Browser = browser; 
        } 
    } 
```

然后像这样访问您的属性：

```
foreach(var url in URLs)
{
  Console.WriteLine(url.Title);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:31:27.063

有几件事——默认情况下，一个类的所有成员都是私有的——这意味着外部调用者无法访问它们。如果您希望它们可用，请将它们标记为公开：

```
public string url; 
```

然后你可以这样做：

```
URLs[0].url; 
```

如果您希望简单地输出结构，可以通过添加如下方法来覆盖 ToString：

```
public override string ToString()
{
    return string.format("{0} {1} {2}", url, title, browser);
} 
```

然后只需调用：

```
URLs[0].ToString(); 
```

# iphone - 如何在目标 c iphone sdk 中解析 .obf 文件？有人知道吗？

> ID：11274436
> 
> 赞同：0
> 
> 时间：2012-06-30T13:28:43.343
> 
> 标签：iphone, objective-c, parsing

我想使用 Objective-C (iOS SDK) 解析 .obf 文件？有没有人有这方面的经验？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:36:08.147

这是一种协议缓冲区格式。规范在这里：[http ://code.google.com/p/osmand/source/browse/DataExtractionOSM/src/osmand_odb.proto](http://code.google.com/p/osmand/source/browse/DataExtractionOSM/src/osmand_odb.proto)

您可能想要使用 Objective-C 协议缓冲区编译器和库：[http ://code.google.com/p/metasyntactic/wiki/ProtocolBuffers](http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers)

# r - as.character(NA) 的 R 值

> ID：11274437
> 
> 赞同：4
> 
> 时间：2012-06-30T13:29:16.067
> 
> 标签：r, virtual-machine, na

有人知道 as.character(NA) 的内部价值吗？有人将如何在解释器级别表示 NA 字符串？换句话说，想要实现 R VM 的人将如何做到这一点？

我查看了 R 的源代码，但找不到 NA_STRING 的自我解释定义，这似乎是 NA 字符串值的底层表示。

提前感谢所有建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T14:36:00.450

根据`Rinternals.h`，`NA_STRING`是 a `CHARSXP`，它是“标量字符串类型（仅限内部）”。

# node.js - 使用 socket.io nodejs 提供自定义静态文件

> ID：11274439
> 
> 赞同：3
> 
> 时间：2012-06-30T13:29:38.030
> 
> 标签：node.js, static, socket.io, share

我尝试在使用以下代码（app.js）的服务器和客户端之间共享我的代码：

```
var io = require('socket.io').listen(8000), 
  Static = require('socket.io').Static; 

io.configure(function () {
  var _static = new Static(io); 

  // some methods to add my custom files 

  _static.add('\public\test.js');
  io.set('static', _static);
}); 
```

我的文件结构如下所示：

1.  根
    *   应用程序.js
    *   上市
        *   测试.js

当我输入“http://localhost:8000/public.test.js”时浏览器下载默认文件“Welcome to socket.io”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T21:09:46.000

这个问题相当古老，但这是当前的方法（对于 v0.9）：

```
var io = require('socket.io').listen(8000);
io.static.add('/path/for/request.js', {file: 'path/to/file.js'}); 
```

请注意，资源的路径是相对于 socket.io 路径的，因此请求 URI 将类似于：

```
http://localhost:8000/socket.io/path/for/request.js 
```

如果您看到类似 的错误`Protocol version not supported`，则表示您的请求 URI 可能具有管理器不支持的扩展名。以下是添加该支持的方法：

```
io.static.add('/path/for/request.foo', {
  mime: {
    type: 'application/javascript',
    encoding: 'utf8',
    gzip: true
  },
  file: 'path/to/file.js'
}); 
```

文档指向[他们自己的静态库](https://github.com/LearnBoost/socket.io/blob/0.9.14/lib/static.js#L108)以实现工作。

# postgresql - 检查postgresql中是否存在一行

> ID：11274451
> 
> 赞同：19
> 
> 时间：2012-06-30T13:30:45.960
> 
> 标签：postgresql

我在 SO 中看到了很多关于此的帖子。但我无法得到答案。我想查询以检查表中是否存在特定行。如果它存在，它应该返回一个**字符串**true 并自行停止搜索，如果不返回 false。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-30T17:21:56.060

```
select
  case when exists (select true from table_name where table_column=?)
    then 'true'
    else 'false'
  end; 
```

但最好只返回布尔值而不是字符串：

```
select exists (select true from table_name where table_column=?); 
```

* * *

## 回答 #2

> 赞同：-17
> 
> 时间：2012-06-30T13:49:40.337

剧透：

```
-- EXPLAIN ANALYZE
WITH magic AS (
        WITH lousy AS ( SELECT * FROM one  WHERE num = -1)
        SELECT 'True'::text AS truth
        WHERE EXISTS  (SELECT * FROM lousy)
        UNION ALL
        SELECT 'False'::text AS truth
        WHERE NOT EXISTS (SELECT * FROM lousy)
        )
SELECT *
FROM magic
        ; 
```

# c++ - 从多个来源创建静态库

> ID：11274456
> 
> 赞同：3
> 
> 时间：2012-06-30T13:31:50.330
> 
> 标签：c++, linux, makefile

我正在尝试创建一个 Makefile，除其他外，它会输出一些 library1.a，之后我将重用它来创建可执行文件。现在这是我的困境：我想让这个过程通用，这样我就不必每次添加一些文件时都编辑 Makefile。这是我的想法：

```
#Declare phony targets
.PHONY: all clean build_utils

#Compiler
CXX = g++

#Flags
CXXFLAGS = -Wall -Wextra -Wconversion -Werror -pedantic -std=c++0x -O2

#Directories
OUTPUT_DIR = _output/linux
INTERMEDIATE_DIR = _intermediate/linux
UTILS_DIR = utils

all: $(OUTPUT_DIR)/libUtils.a

$(OUTPUT_DIR)/libUtils.a:
    ar rcs $@ $(INTERMEDIATE_DIR)/utils/$(patsubst %.cpp, %.o, $(wildcard $(UTILS_DIR)/ *.cpp))

#create .o files in %INTERMEDIATE_DIR/utils
build_utils: $(UTILS_DIR)/ *.cpp $(UTILS_DIR)/ *.h
    $(CXX) -c $(CXXFLAGS) $^ -o ## What must be placed here? ## 
```

因此，基本上，我希望在临时目录中创建所有目标文件，然后将其存档`libUtils.a`，但我不知道如何要求编译器根据输入文件输出多个目标文件。基本上，我的标准规定，对于每个 .cpp 文件，我都应该获得一个目标文件，但我不确定如何执行此操作。我不想为每个 .o 文件创建一个单独的目标，因为它太乱了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:40:31.007

您可以使用如下通配符规则分别编译每个 C++ 源文件：

```
%.o: %.cpp
     $(CXX) $< $(CXXFLAGS) $@ 
```

`-c -o`在你的末尾添加后`CXXFLAGS`。`patsubst`然后在某处捕获表达式的结果，例如：

```
OBJECTS = $(patsubst %.cpp, %.o, $(wildcard $(UTILS_DIR)/*.cpp)) 
```

...并让`$(OUTPUT_DIR)/libUtils.a`规则依赖于`$(OBJECTS)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T18:11:00.120

所以，经过几个小时的挖掘，这就是我想出的：

```
#Build object files
$(INTERMEDIATE_DIR)/$(UTILS_DIR)/%.o: $(UTILS_DIR)/%.cpp $(UTILS_DIR)/%.h
    mkdir -p $(INTERMEDIATE_DIR)/$(UTILS_DIR)
    $(CXX) $< $(LIBCXXFLAGS) -o $@

$(INTERMEDIATE_DIR)/$(FUNCTIONS_DIR)/%.o: $(FUNCTIONS_DIR)/%.cpp $(FUNCTIONS_DIR)/%.h
    mkdir -p $(INTERMEDIATE_DIR)/$(FUNCTIONS_DIR)
    $(CXX) $< $(LIBCXXFLAGS) -o $@

#create the library archives
$(OUTPUT_DIR)/libUtils.a: $(patsubst %.cpp, $(INTERMEDIATE_DIR)/%.o, $(wildcard $(UTILS_DIR)/ *.cpp))
    ar rcs $@ $^
$(OUTPUT_DIR)/libFunctions.a: $(patsubst %.cpp, $(INTERMEDIATE_DIR)/%.o, $(wildcard $(FUNCTIONS_DIR)/ *.cpp))
    ar rcs $@ $^

#Builds the libraries
libs: $(OUTPUT_DIR)/libUtils.a $(OUTPUT_DIR)/libFunctions.a

#Main target
all: libs 
```

关于它的好处是我不必每次添加文件时都对其进行编辑。我认为它可以比这更抽象，通过一个单一的通用目标来构建目标文件，但这似乎有点太多了。

PS：感谢[Martin](https://stackoverflow.com/a/11274505/1174378)给了我一个关于使用什么的好主意！:)

LE：似乎很难说服 SO 不要尝试进行语法高亮。`<pre></pre>`在处理`/*`...时，即使是标签也无济于事

# mysql - MySQL JOIN 通过比较发布日期和评论日期来提取最新帖子

> ID：11274458
> 
> 赞同：1
> 
> 时间：2012-06-30T13:32:02.953
> 
> 标签：mysql, group-by

好吧，我有两张表 community 和 community_comments。community 是存储主题标题和主题的其他详细信息的表。community_details 是存储主题/线程的所有帖子或评论的表。

我需要根据主题的评论日期以及原始主题/主题的日期提取最新的五个主题。

现在可能有一些线程还没有任何评论，但比一些有评论的线程更新。我需要正确地把它们拉起来。

我尝试了诸如

```
SELECT MAX(community_comments.id), `community`.*
FROM (`community`)
LEFT JOIN `community_comments` ON `community`.`id`=`community_comments`.`community_id`
WHERE `community`.`type` = 1
GROUP BY `community_comments`.`id`
ORDER BY `community_comments`.`date_posted` DESC
LIMIT 5 
```

这会多次拉起同一个线程，而这

```
SELECT MAX(community_comments.id), `community`.*
FROM (`community`)
LEFT JOIN `community_comments` ON `community`.`id`=`community_comments`.`community_id`
WHERE `community`.`type` = 1
GROUP BY `community_comments`.`community_id`
ORDER BY `community_comments`.`date_posted` DESC
LIMIT 5 
```

拉出独特的线程，但没有拉出正确的最新线程。

社区的表结构是：

```
CREATE TABLE `community` (   
  `id` varchar(12) character set utf8 NOT NULL,   
  `title` varchar(255) character set utf8 NOT NULL,   
  `content` text character set utf8 NOT NULL,   
  `author` varchar(13) character set utf8 NOT NULL,   
  `category` int(10) unsigned NOT NULL,   
  `type` tinyint(1) unsigned NOT NULL default '1' COMMENT '1 = Forum; 2 = Site Help; 3 = Local & Global',   
  `location` varchar(100) character set utf8 NOT NULL,   
  `country` int(10) unsigned NOT NULL,   
  `date_posted` datetime NOT NULL,   
  PRIMARY KEY  (`id`)   
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

community_comments 的表结构是：

```
CREATE TABLE `community_comments` (   
  `id` varchar(12) character set utf8 NOT NULL,   
  `community_id` varchar(12) character set utf8 NOT NULL,   
  `content` text character set utf8 NOT NULL,   
  `member_id` varchar(13) character set utf8 NOT NULL,   
  `type` tinyint(1) unsigned NOT NULL default '1' COMMENT '1 = Forum; 2 = Site Help; 3 =  Local & Global',   
  `quoted` varchar(12) character set utf8 NOT NULL COMMENT 'Id number of the comment that is being quoted',   
  `date_posted` datetime NOT NULL,   
  PRIMARY KEY  (`id`)   
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:54:26.023

因此，如果我理解正确，您需要包含 5 个最新 community_comments 的社区字段。您想使用 SQL Group By 来实现这一点。

```
SELECT c.*, MAX(com.date_posted) as last_post
FROM community c
LEFT OUTER JOIN community_comments com
ON com.community_id = c.id
GROUP BY c.id
ORDER BY MAX(com.date_posted) DESC
LIMIT 5 
```

如果您不想显示没有评论的社区，您可以将左外连接替换为内连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:45:13.157

```
SELECT c.*, IFNULL(MAX(com.date_posted),c.date_posted) as last_post 
            FROM community c 
            LEFT OUTER JOIN community_comments com 
            ON com.community_id = c.id 
            GROUP BY c.id 
            ORDER BY last_post DESC 
            LIMIT 5 ; 
```

# tcp - ns-3 wlan grid TCP 不工作，而 UDP 是

> ID：11274459
> 
> 赞同：2
> 
> 时间：2012-06-30T13:32:06.907
> 
> 标签：tcp, wifi, network-protocols, ns-3

我正在尝试在 ns-3 中设置多跳 AdHoc 802.11g 网络。
首先，我使用了示例“wifi-simple-adhoc-grid.cc”。

该示例使用 UDP，但我想使用 TCP。所以我换了

```
TypeId tid = ns3::UdpSocketFactory::GetTypeId();
Ptr<Socket> recvSink = Socket::CreateSocket (c.Get (sinkNode), tid);
InetSocketAddress local = InetSocketAddress (Ipv4Address::GetAny (), 80);
recvSink->Bind (local);
recvSink->SetRecvCallback (MakeCallback (&ReceivePacket)); 
```

至

```
TypeId tid = ns3::TcpSocketFactory::GetTypeId();
Ptr<Socket> recvSink = Socket::CreateSocket (c.Get (sinkNode), tid);
InetSocketAddress local = InetSocketAddress (Ipv4Address::GetAny (), 80);
recvSink->Bind (local);
recvSink->SetRecvCallback (MakeCallback (&ReceivePacket));

Ptr<Socket> source = Socket::CreateSocket (c.Get (sourceNode), tid);
InetSocketAddress remote = InetSocketAddress (i.GetAddress (sinkNode, 0), 80); 
```

发送数据包是没有问题的，但是 ReceivePacket 永远不会被调用，这意味着套接字 Sink 没有接收到数据包。

整个代码：[https ://gist.github.com/3023757](https://gist.github.com/3023757)

[路由输出](https://gist.github.com/3023751)：

```
Ptr<OutputStreamWrapper> routingStream = Create<OutputStreamWrapper> 
("wifi-multihop.routes", std::ios::out) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T08:15:01.000

您可以调用 SetRevCallback 函数您的 SetAcceptCallback 函数。

明确地说，

```
recvSink->SetAcceptCallback (MakeNullCallback<bool, Ptr<Socket>,const Address &> (),MakeCallback(&accept)); 
```

在接受函数中

```
void accept(Ptr<Socket> socket,const ns3::Address& from)
{

    std::cout<<"Connection accepted"<< std::endl;
    socket->SetRecvCallback (MakeCallback (&ReceivePacket));

} 
```

# jquery - 将 LI 移除/添加到 UL 单次重绘

> ID：11274460
> 
> 赞同：0
> 
> 时间：2012-06-30T13:32:08.530
> 
> 标签：jquery

我是 JQuery/Javascript 的新手。有一个 JSON 对象，其中包含我要添加到无序列表的字符串数组。首先我需要从 中删除所有现有的`li`子`ul`元素，然后我想将我的字符串数组的每个元素添加为`li`- 但我认为同时添加它们以避免重绘闪烁很重要？

无论如何，我不知道该怎么做。我看到了一些零碎的例子，并创建了以下代码，但它有问题。它似乎删除了所有`li`孩子，它会添加一个`li`，但它会一直覆盖最后`li`添加的。

```
var features = product.Attributes.Features
$('ul.feature').children('li').each(function () { $(this).remove(); });
if (features) {
    var li = $('<li></li>');
    for (var feature in features) {
        $('ul.feature').append(li);
        $(li).text(features[feature]);
    }
} 
```

`var features`是一个数组。我尝试使用`if (features.Length > 0) {`但`Length`总是`undefined`在我这样做时显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:39:21.420

删除所有李：

```
$('ul.feature').find('li').remove(); 
```

加个李：

```
var liText = "Li Text";
$('ul.feature').append('<li>'+liText+'</li>'); 
```

# vim - 将vim语法高亮导出到latex

> ID：11274461
> 
> 赞同：0
> 
> 时间：2012-06-30T13:32:13.170
> 
> 标签：vim, latex

我想利用 vim 的语法高亮功能来高亮乳胶中的代码（任何语言）（使用 xcolor 包）。因此，我想知道是否可以让 vim 脚本导出有关缓冲区中突出显示文本的 vim 内部信息。显然，知道每个突出显示的实体的开始、结束和颜色就足够了。乳胶代码或其他语言（如 html）的生成将是显而易见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:39:33.323

你可以使用我的[formatvim](http://www.vim.org/scripts/script.php?script_id=3113)插件：它可以导出为 latex-xcolor 格式

```
Format format latex-xcolor 
```

. 如果您对结果不满意（它完全未经测试，我几乎从未使用过此选项），请随时发送补丁，可以在[此处查看](http://formatvim.hg.sourceforge.net/hgweb/formatvim/formatvim/file/5d58c4424e9a/plugin/format.vim#l752)带有格式规范的字典，创建自己的格式所需的一切都在[文档](http://vimpluginloader.sourceforge.net/doc/format.txt.html)中。

注意：如果您需要导出到任何其他语言，您只需要根据我的插件为其编写规范即可。这是一个将`latex-xcolor-clone`格式添加到我的插件的代码：

```
scriptencoding utf-8
execute frawor#Setup('0.0', {'plugin/format': '3.0'})
let s:texescape=
            \'substitute('.
            \   'substitute(@@@, ''\v[\\\[\]{}&$_\^%#]'', '.
            \              '''\=''''\char''''.char2nr(submatch(0))."{}"'', '.
            \              '"g"),'.
            \'" ", ''\\enskip{}'', "g")'
let s:texstylestart=
            \'((@inverse@)?'.
            \   '(''\colorbox[HTML]{''.'.
            \    '((@fgcolor@!=#"")?'.
            \       '(toupper(@fgcolor@[1:])):'.
            \       '(toupper(@_fgcolor@[1:])))."}{".'.
            \   '''\textcolor[HTML]{''.'.
            \    '((@bgcolor@!=#"")?'.
            \       '(toupper(@bgcolor@[1:])):'.
            \       '(toupper(@_bgcolor@[1:])))."}{"):'.
            \   '(((@bgcolor@!=#"")?'.
            \       '(''\colorbox[HTML]{''.toupper(@bgcolor@[1:])."}{"):'.
            \       '("")).'.
            \    '''\textcolor[HTML]{''.'.
            \    '((@fgcolor@!=#"")?'.
            \       '(toupper(@fgcolor@[1:])):'.
            \       '(toupper(@_fgcolor@[1:])))."}{"))'
let s:texstyleend=
            \'repeat("}", '.
            \   '((@inverse@)?'.
            \       '(2):'.
            \       '((@bgcolor@!=#"")+1)))'
let s:format={
            \'begin':        '\documentclass[a4paper,12pt]{article}'.
            \                '\usepackage[utf8]{inputenc}'.
            \                '\usepackage[HTML]{xcolor}'.
            \                '\pagecolor[HTML]{%''toupper(@_bgcolor@[1:])''%}'.
            \                '\color[HTML]{%''toupper(@_fgcolor@[1:])''%}'.
            \                '\begin{document}{\ttfamily\noindent',
            \'line':         '%>'.s:texstylestart.".".
            \                     s:texescape.".".
            \                     s:texstyleend,
            \'lineend':      '\\',
            \'end':          '}\end{document}',
            \'strescape':    s:texescape,
        \}
call s:_f.format.add('latex-xcolor-clone', s:format) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:29:40.023

该`:TOhtml`命令内置在 Vim 中。很明显，它生成的是 HTML，而不是 Latex。

# java - 移动时获取地图中心位置

> ID：11274463
> 
> 赞同：0
> 
> 时间：2012-06-30T13:33:06.570
> 
> 标签：java, android, android-mapview, android-maps

我想在用户在地图上移动时获取地图的中心坐标。我必须根据地图的当前位置（当前中心）重新填充地图叠加层。是否有一些听众可以收听地图平移或地图移动？我知道有一种`myMapView.getMapCenter()`方法，但是我必须从侦听器中调用它，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:04:02.433

您可能希望以某种方式处理 UI 上的触摸事件，就像本文中的答案[一样](https://stackoverflow.com/questions/1773717/android-maps-how-to-determine-map-center-after-a-drag-has-been-completed)。

# asp.net - 如何在 Epplus 中使用条件格式？

> ID：11274465
> 
> 赞同：1
> 
> 时间：2012-06-30T13:33:22.823
> 
> 标签：asp.net, excel, epplus

我想为空值设置条件格式，我该如何在 asp.net 中做到这一点？

截屏 ：

![在此处输入图像描述](../Images/20fe9303f6989a2268b047011a2b9f11.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:33:28.717

EPPlus 的 3.1 beta 版本支持条件格式。它可以从[epplus.codeplex.com](http://epplus.codeplex.com)或通过 nuget 下载（使用 -pre 标志）。查看示例项目（epplus.codeplex.com 上的“下载”）以获取有关如何使用它的详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:21:45.387

EPPlus 中没有对条件格式的原生支持，但您可以通过自己修改 XML 代码来添加它。看看这里的源代码：http: [//epplus.codeplex.com/discussions/348196/](http://epplus.codeplex.com/discussions/348196/)

# jquery - 如何在它上面放置一个元素（在 jQuery 对话框中）？

> ID：11274466
> 
> 赞同：2
> 
> 时间：2012-06-30T13:33:32.093
> 
> 标签：jquery, jquery-ui, validation, jquery-plugins

我正在使用 jQuery 对话框弹出一个 div（要填写的用户表单）。我正在使用下面的插件进行验证。

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

我现在的问题是我的字段靠近对话框的边缘，并且当错误工具提示（例如“必填字段”）弹出时，它会在对话框内溢出。我想要的是让它漂浮在对话框的顶部。

这是一张图片。

![错误](../Images/68ffe06b9afeacc36ee88bf14197b75b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:58:52.267

尝试使用旧版本的插件 ex:2.5。在该版本中，消息的容器被附加到文档的正文而不是表单，因此消息始终可见。我不知道他们为什么改变这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:35:55.837

您可以从提供`overflow:visible`对话框容器开始（具有滚动条的容器 - 使用浏览器的 Inspect Element 功能来查找它是哪一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:42:27.037

为工具提示提供更高的 z-index。

例如，如果您的对话框有一个 z-index: 1000; 给出工具提示 z-index:2000;

# .htaccess - 带有多个应用程序的codeigniter htaccess

> ID：11274479
> 
> 赞同：2
> 
> 时间：2012-06-30T13:37:03.997
> 
> 标签：.htaccess, codeigniter

我正在使用代码点火器。我有前端应用程序和后端应用程序，例如

/系统/

/应用/

```
 /front/

   /admin/

index.php

admin.php

.htaccess 
```

我想要我的网址，例如[http://example.com/news/article1](http://example.com/news/article1)（对于网站） [http://example.com/news/admin](http://example.com/news/admin)（对于管理员）

在 .htaccess 我写过

```
RewriteEngine On
# If the user types just "admin".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/admin$ admin\.php [L,QSA]

# If the user enter in any admin section, like "admin/section".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/admin\/(.*)$ admin\.php/$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d    
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

前端工作正常，但是当我输入 mydomain.com/admin 时，它会抛出 404 not found 错误。请帮我。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:22:04.160

我对 .htaccess 不是很好，但是从[CI 网站](http://codeigniter.com/user_guide/general/urls.html)，您可以将它用于您的 .htaccess 规则

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

然后使用[路由](http://codeigniter.com/user_guide/general/routing.html)重写您的网址。比尝试在 .htaccess 文件中执行此操作要容易得多

# java - 休眠：分离父母和所有孩子

> ID：11274485
> 
> 赞同：1
> 
> 时间：2012-06-30T13:38:01.313
> 
> 标签：java, hibernate, orm

我有一个像这样的对象树：

Foo->(Many)Bar->Baz

我想让它们都是瞬态的，但在 Foo 上调用 detach 只会分离 Foo。我也不想清除会话，因为会话中可能还有其他需要保留的内容。

有没有办法不用爬满树？或者在加载 Foo 的原始查询中是否有办法说不应该附加任何返回的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:58:15.543

Hiberante 的分离方法就是这样做的：

```
public void detach(Object entity) {
    try {
        getSession().evict( entity );
    }
    catch ( HibernateException he ) {
        throw convert( he );
    }
} 
```

它或多或少像：您已经拥有该对象，因此，让我们将其从会话中逐出，使其分离。你可以做的是`EVICT`在这个属性上级联，所以当`Foo`被驱逐时也会被`Bar`驱逐，所以也是如此`Baz`。为了避免`LazyInitializationException`您需要保修，它们都已加载（也许`FetchType EAGER`？）

* * *

对于 3.5，您有 CascadeType `DETACH`，可用于此目的：[http ://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/CascadeType.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/CascadeType.html)

# django - 在 ElasticSearch + Django-Haystack 中使用多个位置字段

> ID：11274488
> 
> 赞同：3
> 
> 时间：2012-06-30T13:38:24.570
> 
> 标签：django, elasticsearch, django-haystack

我正在使用 django-haystack 和 ElasticSearch 来索引商店。

到目前为止，每家商店都有一个经纬度坐标对；我们必须更改它以表示一家商店可以将产品运送到非常不同的地区（分离）我已经添加了多达十个位置（纬度，经度对）给他们。

使用一个位置字段时，一切正常，我得到了正确的结果。现在，对于多个位置字段，对于同一个用户和商店坐标，我无法获得任何结果，甚至是以前的结果。

我的索引如下：

```
class StoreIndex(indexes.SearchIndex,indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True,
                         template_name='search/indexes/store/store_text.txt')
    location0 = indexes.LocationField()
    location1 = indexes.LocationField()   
    location2 = indexes.LocationField()
    location3 = indexes.LocationField()
    location4 = indexes.LocationField()
    location5 = indexes.LocationField()
    location6 = indexes.LocationField()
    location7 = indexes.LocationField()
    location8 = indexes.LocationField()
    location9 = indexes.LocationField()

    def get_model(self):
        return Store

    def prepare_location0(self, obj):
        # If you're just storing the floats...
        return "%s,%s" % (obj.latitude, obj.longitude)

    # .....   up to prepare_location9
    def prepare_location9(self, obj):
        # If you're just storing the floats...
        return "%s,%s" % (obj.latitude_9, obj.longitude_9) 
```

这是建立我的索引的正确方法吗？

从 elasticsearch 我得到这个映射信息：

```
curl -XGET http://localhost:9200/stores/_mapping?pretty=True
{
  "stores" : {
    "modelresult" : {
      "properties" : {
    "django_id" : {
      "type" : "string"
    },
    "location0" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location1" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location2" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location3" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location4" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location5" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location6" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location7" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location8" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "location9" : {
      "type" : "geo_point",
      "store" : "yes"
    },
    "text" : {
      "type" : "string",
      "analyzer" : "snowball",
      "store" : "yes",
      "term_vector" : "with_positions_offsets"
    }
  }
  } 
 }
} 
```

然后，我尝试这样查询：

```
sqs0 = SearchQuerySet().dwithin('location0', usuario, max_dist).distance('location0',usuario).using('stores') 
```

在哪里：

**usuario** 是一个 Point 实例，表示用户试图在他的位置附近找到商店，并且

**max_dist**是一个 D 实例。

如果我直接查询，使用 curl 我也没有结果。

这是使用带有多个位置字段的 curl 进行查询的结果：

```
$ curl -XGET http://localhost:9200/stores/modelresult/_search?pretty=true -d '{  "query" : { "match_all": {} },  "filter" : {"geo_distance" : { "distance" : "6km", "location0" : { "lat" : -23.5,  "lon" : -46.6 } } } } '
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
  "total" : 0,
  "max_score" : null,
  "hits" : [ ]
  }
} 
```

如果从 StoreIndex 类中注释掉字段 location1-9 一切正常，但如果我让它们获取多个位置点，我不会得到相同查询（用户位置）的结果。这发生在相同的查询中，在 django 中直接使用 curl。也就是说，如果我只有一个位置（比如 location0），两个查询都会返回正确的结果。对于更多位置（location0-9），两个查询都没有给出任何结果。

以下是仅使用一个位置字段直接使用 curl 进行查询的结果：

```
 $ curl -XGET http://localhost:9200/stores/modelresult/_search?pretty=true -d '{     "query" : { "match_all": {} },  "filter" : {"geo_distance" : { "distance" : "6km", "location0" : { "lat" : -23.5,  "lon" : -46.6 } } } } '
{
"took" : 3,
"timed_out" : false,
"_shards" : {
  "total" : 5,
  "successful" : 5,
  "failed" : 0
 },
"hits" : {
  "total" : 9,
  "max_score" : 1.0,
  "hits" : [ {
    "_index" : "stores",
    "_type" : "modelresult",
    "_id" : "store.store.110",
    "_score" : 1.0, "_source" : {"django_ct": "store.store", "text": "RESULT OF THE SEARCH \n\n", "django_id": "110", "id": "store.store.110", "location0": "-23.4487554,-46.58912"}
  },
  lot's of results here
   ]
  }
 } 
```

当然，我会在 StoreIndex 发生任何更改后重新构建索引。

关于如何使用 elasticsearch 和 django 获得多个位置字段的任何帮助？

PS.：我已经在 Django-Haystack 和 ElasticSearch Google Groups 上交叉发布了这个问题。

[https://groups.google.com/d/topic/elasticsearch/85fg7vdCBBU/discussion](https://groups.google.com/d/topic/elasticsearch/85fg7vdCBBU/discussion)

[https://groups.google.com/d/topic/django-haystack/m2A3_SF8-ls/discussion](https://groups.google.com/d/topic/django-haystack/m2A3_SF8-ls/discussion)

提前致谢

马里奥

# c# - Linq 查询结果到 List 集合

> ID：11274490
> 
> 赞同：2
> 
> 时间：2012-06-30T13:39:08.213
> 
> 标签：c#, linq

我使用下面的代码从两个表中获取记录，但我希望将结果放在列表中。我使用了下面的代码，但是出现了这个错误：

> 无法将类型隐式转换 `System.Collections.Generic.List<AnonymousType#1>`为 `System.Collections.Generic.List<QuickRoutes.DAL.Route>`

```
public List<Route> GetAllForUser(Guid userId)
{
    // var result = new List<Route>();
    aspnetdbDataContext aspdb = new aspnetdbDataContext();
    List<Route> result  = (from r in aspdb.Routes
                where r.UserId == userId
                join t in aspdb.TrackPoints on r.RouteId equals t.RouteFK
                select t.TrackPointId,t.RouteFK,t.TrackTime,t.Longitude,t.Latitude,t.Elevation, r.SourceName).ToList();
    return result;
} 
```

**编辑：**

我想将我的查询与此类匹配：

```
namespace QuickRoutes.Entities
{
    public enum RouteType
    {
        Route, Waypoints, Track
    }

    public sealed class Route
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime Time { get; set; }
        public List<TrackPoint> TrackPoints { get; set; }
        public Guid UserId { get; set; }
        public string GpxData { get; set; }
        public RouteType RouteType { get; set; }

        public Route(int id)
        {
            Id = id;
            TrackPoints = new List<TrackPoint>();
        }
...... 
```

但是如果我将我的代码更改为这个，它也不起作用

```
List<Route> result = (from r in aspdb.RouteLinqs
                                  where r.UserId == userId
                                  join t in aspdb.TrackPointlinqs on r.RouteId equals t.RouteFK
                                  select r).ToList(); 
```

老实说，我想将这个用 SQL 编写的函数更改为 LINQ，有更好的想法吗？

```
namespace QuickRoutes.Entities
{
    public enum RouteType
    {
        Route, Waypoints, Track
    }

    public sealed class Route
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime Time { get; set; }
        public List<TrackPoint> TrackPoints { get; set; }
        public Guid UserId { get; set; }
        public string GpxData { get; set; }
        public RouteType RouteType { get; set; }

        public Route(int id)
        {
            Id = id;
            TrackPoints = new List<TrackPoint>();
        }
...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:01:40.063

这是因为您的投影（您正在选择的内容）与`Route`（您要返回的内容）不同；

如果您希望返回`Route`更改您的选择：

```
select r 
```

如果你想返回你的连接投影，你必须创建一个新类型，并返回：

例如：

```
public class RouteTrack
{
    public TrackPointId ...
    public RouteFK ...
    public TrackTime ...
} 
```

并从您的方法中返回 a `List<RouteTrack>`，并将您的选择更改为：

```
select new RouteTrack { TrackPointId = t.TrackPointId .... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:48:18.293

我也遇到过同样的情况。这里的问题是您正在创建一个匿名类型，其中包含来自 Route 和 aspdb.TrackPoints 的字段。

因此，您不能将其转换为 List。

这是一个映射问题。要解决此问题，您需要创建一个新的自定义类，其中包含您从查询中获得的所有字段/属性。

假设您创建了一个自定义类，例如 RouteMapper，然后使用类似的代码进行映射

```
select new RouterMapper
{
     RouteMapper.TrackPointId = t.TrackPointId, RouteMapper.RouteFK=t.RouteFK,    RouteMapper.SourceName = r.SourceName
} 
```

这样现在您返回 List<RouteMapper>。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:04:46.380

由于您的查询从两个不同的表中选择属性，因此它显然不再返回`Route`type 的对象，而是返回一种新的对象类型（匿名类型）。

如果你想返回这个新类型，你需要显式定义它，然后使用这个类型返回数据。

```
public class MyClass
{
    public MyClass(int trackPointId, DateTime trackTime, ...)
    {
        TrackPointId = trackPointId;
        TrackTime = trackTime;
        ...
    }

    public int TrackPointId { get; set; }
    public DateTime TrackTime { get; set }
    ...
}

List<MyClass> result  = (from r in aspdb.Routes
              where r.UserId == userId
              join t in aspdb.TrackPoints on r.RouteId equals t.RouteFK
              select new MyClass(t.TrackPointId,t.RouteFK,t.TrackTime,t.Longitude,t.Latitude,t.Elevation, r.SourceName); 
```

# java - Box2D有重力影响不同的质量

> ID：11274492
> 
> 赞同：1
> 
> 时间：2012-06-30T13:39:36.067
> 
> 标签：java, android, box2d, physics, libgdx

如果我给物体不同的密度/质量，它们仍然以相同的速度下降。我知道在没有空气阻力的地方，质量不会影响下落速度。

但是，我如何在逻辑上使气球和砖块以不同的速度下落？我能想到的最接近的方法是使用 setGravityScale 来设置这一切..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T16:01:51.253

在box2d中模拟空气减速效果的最佳方法是使用“阻尼”。

见： http: [//www.box2d.org/manual.html](http://www.box2d.org/manual.html)

“阻尼用于降低物体的世界速度。阻尼与摩擦不同，因为摩擦只发生在接触中。阻尼不能替代摩擦，两种效果应该一起使用。”

“阻尼参数应该在 0 到无穷大之间，0 表示没有阻尼，无穷大表示完全阻尼。通常你会使用 0 到 0.1 之间的阻尼值。我一般不使用线性阻尼，因为它会使物体看起来很漂浮。”

bodyDef.linearDamping = 0.0f;

bodyDef.angularDamping = 0.01f;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:59:44.090

一种选择是禁用重力并自己应用每帧所需的加速度。这就是我在比赛中所走的路线。Box2d 的内置重力可以用于快速模拟，但它不是很可定制。

禁用重力后，您必须决定将哪个加速度公式应用于您的对象。有几种不同的流体阻力模型（查看维基百科），因此您必须进行试验并选择看起来最好的模型。

# android - 我如何在服务器上写入 json 文件

> ID：11274500
> 
> 赞同：0
> 
> 时间：2012-06-30T13:40:12.480
> 
> 标签：android, json, networking

我的本地主机上有 JSON 文件，我想通过代码更新它，请问有什么帮助吗？我的本地主机上有 list.JSON 我想删除其中的所有数据并在其中写入新数据并在服务器上更新它？

```
can any one tell me how i do that ?
///////////////////////////////////////////////
//////////////////////////////////////////////
///////////////////////////////////////////////
///////////////////////////////////////////
///////////////////////////////////////
 //////////////////////////////////
   ///////////////////////////
         //////////////////// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:55:30.297

[如何使用 Android 通过 Request 发送 JSON 对象？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

```
 1- crate a page on server which takes this json and update it and take it's url 

2- take the input from user 
3- put it in a bean/model (wrap in object form as per structure )
4- crate the json from object (can use libraries like GSON for this
5- use post method to push json to srver 
```

# java - 在 Java 中，“this”可以通过哪些方式逃脱？

> ID：11274507
> 
> 赞同：5
> 
> 时间：2012-06-30T13:40:44.330
> 
> 标签：java, synchronization, this

Stack Overflow 上有一个关于为什么[在构造函数中启动线程不是一个好主意的问题](https://stackoverflow.com/questions/5623285/java-why-not-to-start-a-thread-in-the-constructor-how-to-terminate)。我意识到这种事情的结果将是“this”可以逃脱。我还读到，出于同样的原因，[从构造函数发布 EventListener](http://www.ibm.com/developerworks/java/library/j-jtp07265/index.html)也是一个坏主意。我应该注意哪些其他模式可以让“this”逃脱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:52:25.400

从构造函数调用对象的任何实例方法都会泄漏`this`到该方法。只要该方法在您的控制之下（不可公开覆盖），这可能没问题，并且您确保不会`this`进一步泄漏。使用`this`作为任何方法的参数当然是更明确的变体，当你说`x.addEventListener(this)`. 一种可能更阴险的，因为不太明显，泄漏 a 的方法`this`是不将`this`其自身用作参数，而是使用内部/本地/匿名类的实例，例如

```
public class Main 
{
  private class MyListener extends MouseAdapter { ...}

  public Main() {
    class Listener1 extends MouseAdapter { ... }
    someSwingComponent.addMouseListener(new MyListener()); // inner class
    someSwingComponent.addMouseListener(new Listener1()); // local class
    someSwingComponent.addFocusListener(new FocusAdapter() { ... }); // anonymous
  }
} 
```

在所有这些情况下`this`，将是作为方法参数传递的对象的封闭实例。另一方面，如果您声明一个`static`嵌套类，它将**没有**封闭的实例。

# web-services - 我可以强制 Jersey 框架在创建 WADL 时只扫描一个包吗？

> ID：11274510
> 
> 赞同：1
> 
> 时间：2012-06-30T13:41:13.243
> 
> 标签：web-services, spring, rest, jersey

我有一个项目，我将 Web 服务保存在两个单独的包中。一个包包含面向客户的 Web 服务，另一个包包含内部使用的 Web 服务。我希望 jersey 只扫描面向客户的包裹并生成 WADL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:58:57.067

一般来说，我无法找到通过配置拆分 wadl 生成逻辑的任何方法。但这是你可以执行的 hack。有一个名为 GenerateWadlTask​​.java 的类，它基本上完成了球衣的 wadl 生成逻辑。您可以在自定义应用程序 wadl 生成任务中扩展此类并根据您的逻辑使用它。对于代码示例，只需下载球衣服务器源 jar 并查看类。逻辑很简单。

希望这有帮助。

**编辑：- 有一个名为 enunicate [http://enunciate.codehaus.org/](http://enunciate.codehaus.org/)的 maven 插件 ，这将使您的生活变得轻松。**

# module - 在 Playframework 中制作模块

> ID：11274513
> 
> 赞同：0
> 
> 时间：2012-06-30T13:41:57.677
> 
> 标签：module, playframework, playframework-1.x

我正在使用 Playframework 1.2.4，并且我创建了一个项目，我想将其变成一个模块，因为我在许多项目中都使用了这个类。此类仅称为 TJUser，您可以在其中创建和删除用户等。

我创建了一个空项目 play new testproject 然后我在项目中创建了一个模块 cd testproject play new-module user

然后我将我的用户类和视图复制到 user/app/controller/user 中，并将我的视图复制到 user/app/vies/user 中，模型也是如此。我还从项目中复制了路由文件并将其放在 user/conf

我制作的项目有效。但我无法让我的模块运行。我不知道接下来的步骤。

希望有人可以提供帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:53:21.457

我写了一篇关于使用模块的博客文章。[http://playframework.wordpress.com/2011/02/27/play-modules/](http://playframework.wordpress.com/2011/02/27/play-modules/)

希望它可以帮助您解决您的问题。

# unit-testing - 如何在我的项目中包含 unittest.dart？

> ID：11274518
> 
> 赞同：2
> 
> 时间：2012-06-30T13:43:05.940
> 
> 标签：unit-testing, dart

我知道我不能像其他核心库一样导入它：

```
#import('dart:unittest'); 
```

我在[单元测试文章](http://www.dartlang.org/articles/dart-unit-tests/)中看到它们包括它：

```
#import('DART_SDK_PATH/lib/unittest/unittest.dart'); 
```

所以我试了一下：

```
#import('C:/Users/Phlox/Documents/dart/dart-sdk/lib/unittest/unittest.dart'); 
```

没运气。我也尝试过没有运气的相对路径。我只收到错误消息：“找不到引用的源：C:/Users/Phlox/Documents/dart/dart-sdk/lib/unittest/unittest.dart”。然后我遇到了一些提到的线程：

**pubspec.yaml**（添加到与主 dart 文件相同的文件夹中）

依赖项：

单元测试：

sdk：单元测试

**安装包**

pub install --sdkdir="/path/to/dart-sdk"

**输入**

```
#import("package:unittest/unittest.dart"); 
```

但紧随其后的是新闻

> 看起来这只适用于带有符号链接的平台（即默认情况下不是 Windows）。

有什么我没有尝试过的东西可能有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:15:57.710

如果这是直接在 Web 浏览器中运行的测试（而不是在命令行上），则尝试直接从托管源导入：

```
#import("http://dart.googlecode.com/svn/branches/bleeding_edge/dart/lib/unittest/unittest.dart"); 
```

# c# - 将复杂类型的字典绑定到 RadioButtonList

> ID：11274523
> 
> 赞同：3
> 
> 时间：2012-06-30T13:44:31.687
> 
> 标签：c#, asp.net, webforms

我不确定这是否可行，但是我有一个复杂类型的字典，我想将它绑定到 RadioButtonList/CheckBoxList 控件：

```
public class ComplexType
{
   public String Name { get; set; }
   public String FormattedName { get; set; }
   public String Description { get; set; }
}
var listOfMyTypes = new Dictionary<int, ComplexType>();

var myType = new ComplexType { Name = "Name", Description = "Description", FormattedName = "Name|Description" };
var myType1 = new ComplexType { Name = "Name2", Description = "Description2", FormattedName = "Name|Description2" };

listOfMyTypes.Add(1, myType);
listOfMyTypes.Add(2, myType1);

m_dropDownlist.DataTextField = "Value"; //What do I put here to render "Name"
m_dropDownlist.DataValueField = "Key";
m_dropDownlist.DataSource = listOfMyTypes;
m_dropDownlist.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:50:49.427

尝试`Dictionary.Values`像这样绑定到：

```
m_dropDownlist.DataTextField = "Name"
m_dropDownlist.DataValueField = "Description";
m_dropDownlist.DataSource = listOfMyTypes.Values;
m_dropDownlist.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:47:25.477

您将 TextField 设置为要显示的属性。您将 ValueField 设置为要发布的属性。最后，绑定到字典的值。我正在寻找 DropDownList 的“模板”版本，但没有找到。所以，如果你需要字典的钥匙，你可能不得不用艰难的方式来做——循环/添加。

```
m_dropDownlist.DataTextField = "FormattedName"; //What do I put here to render "Name" 
m_dropDownlist.DataValueField = "Name"; 
m_dropDownlist.DataSource = listOfMyTypes.Values; 
m_dropDownlist.DataBind(); 
```

* * *

我确实找到了另一种方法。您可以在您的课程中覆盖“ToString()”：

```
public class ComplexType      
{      
   public String Name { get; set; }      
   public String FormattedName { get; set; }      
   public String Description { get; set; } 
   public override string ToString()
   {
      return this.Name;
   }     
} 
```

然后正常绑定：

```
m_dropDownlist.DataTextField = "Value"; //What do I put here to render "Name" 
m_dropDownlist.DataValueField = "Key"; 
m_dropDownlist.DataSource = listOfMyTypes; 
m_dropDownlist.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:34:20.140

你可以写

`m_dropDownlist.DataTextField = "Value.Name";`

# solr - 未经授权的数据导入调度程序调用

> ID：11274525
> 
> 赞同：0
> 
> 时间：2012-06-30T13:44:48.247
> 
> 标签：solr, dataimporthandler

我正在尝试为 solr 设置一个 dataimport-scheduler，一切正常，并且每 30 分钟调用一次 deltaimport url，唯一的问题是我使用 jetty 并在 jetty.xml 中激活了身份验证，因此 dataimport_scheduler 得到：

```
<index update process> Response message                        Unauthorized 
```

（在日志文件中看到），我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:04:38.713

`DataImportScheduler`需要通过 http 访问您的 solr/dataimport url 。您在日志文件中看到的错误是因为您添加了身份验证。据我所知，`DataImportScheduler`不支持开箱即用的身份验证，但应该很容易将其添加到代码中。

不幸的是，它不使用`http-client`，我猜这会使事情变得更容易和灵活一些，但是您可以查看[此](https://stackoverflow.com/questions/496651/connecting-to-remote-url-which-requires-authentication-using-java)答案以了解如何将 http 基本身份验证添加到通过`HttpURLConnection`该类进行的 http 调用。

# spring - 如何使用 PropertyPlaceholderConfigurer 从另一个 xml 文件中的 pom 文件中读取？

> ID：11274526
> 
> 赞同：1
> 
> 时间：2012-06-30T13:44:51.307
> 
> 标签：spring, maven, applicationcontext

我想使用**PropertyPlaceholderConfigurer从****applicationContext.xml**文件中的 pom 文件中读取，如下所示：

```
<context:component-scan base-package="${project.groupId}"/> 
```

考虑到**pom 文件**具有以下内容：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myapp</groupId> 
```

这是**PropertyPlaceholderConfigurer** 配置：

```
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:oauth_consumer.properties</value>
                <value>classpath:application.properties</value>
            </list>
        </property>

    </bean> 
```

问题：PropertyPlaceholderConfigurer 无法替换 applicationContext.xml 中的值。

请告知如何让它发挥作用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:55:15.057

发现问题，applicationContext 在**src/main/webapp/WEB-INF**下，但它必须在**src/main/resources**下才能工作。

# javascript - Backbone.js：model.isNew() == true，但 model.save() 导致 POST 请求而不是 PUT

> ID：11274527
> 
> 赞同：0
> 
> 时间：2012-06-30T13:44:59.047
> 
> 标签：javascript, backbone.js

这是一个简单的例子：http: [//jsfiddle.net/2YE29/3/](http://jsfiddle.net/2YE29/3/)

我做错了什么？

已解决：好吧，我对这篇[文章](http://www.slideshare.net/oisin/simple-rest-services-with-sinatra)感到困惑（第 8 页）。POST 适用于 Backbone 中的 CREATE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:51:12.980

如果您阅读[文档，](http://documentcloud.github.com/backbone/#Sync)这是预期的行为。

> > 默认同步处理程序将 CRUD 映射到 REST，如下所示：
> > 
> > **创建→发布/收集**
> > 
> > 更新 → PUT /collection/id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:57:14.620

我发现您的代码没有任何问题。model.isNew() 返回 true 表示您的记录尚未创建，因此发送 POST 请求。但是，如果 model.isNew() 返回 false，则意味着您的模型/记录已经存在，因此将发送 PUT 请求。

# layout - 如何在 gtk 中检测容器上的鼠标单击或按钮按下事件？

> ID：11274531
> 
> 赞同：0
> 
> 时间：2012-06-30T13:45:33.853
> 
> 标签：layout, gtk, mouse, signals, containers

我试过这个，但没有检测到信号。有谁知道如何做到这一点，或者至少有一些指向参考的指针。谢谢。

```
fixed = gtk_fixed_new();
    g_signal_connect(G_OBJECT(fixed), "button-press-event", G_CALLBACK(fixed_clicked), NULL);

void fixed_clicked(GtkWidget *widget, gpointer data)
{
  gtk_statusbar_push(GTK_STATUSBAR(statusBar), 0, "I cliked the fixed layout" ); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:58:38.520

您需要将容器放在 中`event_box`，否则它不会检测到事件，因为它没有自己的窗口。

# scala - 在具体类中使用抽象类型？

> ID：11274533
> 
> 赞同：4
> 
> 时间：2012-06-30T13:45:50.810
> 
> 标签：scala, abstract-type

```
scala> class A { type T <: String; def f(a: T) = println("foo")}
defined class A

scala> (new A).f("bar")
<console>:9: error: type mismatch;
found   : java.lang.String("bar")
required: _1.T where val _1: A
             (new A).f("bar")
                       ^ 
```

类`A`具有抽象类型`T`，但不是抽象类。创建`A`（如图所示）的对象不定义 type `T`。

我的第一个想法是，我可以将任何类型作为`T`String 的子类传递，但我不是。那么对象中实际上是什么类型`T`，我可以通过什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T14:16:34.850

正如您所说，`T`in`A`是抽象的；因此，您将找不到任何可以放入 method 的值`f`，*直到您拥有*`A`实际修复的子类型`T`。

```
(new A { type T = String }).f("bar") 
```

这个想法是可以对类型进行逐次细化：

```
trait Var[A] { def get: A; def set(v: A): Unit }

trait Sys {
  type V[A] <: Var[A]

  def swap[A](x: V[A], y: V[A]): Unit = {
    val tmp = x.get
    x.set(y.get)
    y.set(tmp)
  }
}

trait HistVar[A] extends Var[A] { def created: java.util.Date }

trait HistSys extends Sys {
  type V[A] <: HistVar[A]

  def newest[A](x: V[A], y: V[A]): A =
    if (x.created after y.created) x.get else y.get
} 
```

但是当然你的问题是好的——你没有理由想要一个类型参数不固定的类的具体实例化。我想不出一个有意义的案例。（当然，如果不涉及 type ，您仍然可以拥有可访问的功能`T`）

* * *

进一步搜索发现以下，准重复，[SO问题](https://stackoverflow.com/questions/2115678/concrete-classes-with-abstract-type-members)。您可以在此处找到对[Scala 票证](https://issues.scala-lang.org/browse/SI-1753)的引用，该票证将其概述为“功能”——仍然没有显示此“功能”实际上有用的情况:)

# android - 报警应用Android

> ID：11274534
> 
> 赞同：1
> 
> 时间：2012-06-30T13:45:53.013
> 
> 标签：android, android-alarms

我正在尝试制作警报应用程序，并在网上找到了此代码。但是当我将它复制到 eclipse 中时，它在 startAlert 方法上给出了一个错误，并说“void 是变量 startAlert 的无效类型”。

```
package tanvi.alarm;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        public void startAlert(View view) {
            EditText text = (EditText) findViewById(R.id.editText1);
            int i = Integer.parseInt(text.getText().toString());
            Intent intent = new Intent(this, MyBroadcastReceiver.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                    + (i * 1000), pendingIntent);
            Toast.makeText(this, "Alarm set in " + i + " seconds",
                    Toast.LENGTH_LONG).show();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:47:34.230

功能`startAlert`应该在`onCreate`..之外

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
          startAlert(view ); //<--------- no need to pass view if function is on same activity 
    }

    public void startAlert(View view) {
                EditText text = (EditText) findViewById(R.id.editText1);
                int i = Integer.parseInt(text.getText().toString());
                Intent intent = new Intent(this, MyBroadcastReceiver.class);
                PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);
                AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
                alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                        + (i * 1000), pendingIntent);
                Toast.makeText(this, "Alarm set in " + i + " seconds",
                        Toast.LENGTH_LONG).show();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:48:08.737

您应该将函数放在`onCreate()`方法下，然后在方法内调用它`onCreate()`。

# c# - 2D Passes.apply() XNA 4.0

> ID：11274535
> 
> 赞同：2
> 
> 时间：2012-06-30T13:46:00.723
> 
> 标签：c#, xna, xna-4.0, hlsl

我目前正在为我的 XNA 游戏的效果文件学习语言“HLSL”。然而; 我遇到了将效果应用于我的 SpriteBatch 的问题。

我的效果文件看起来像这样，并使渲染的纹理变为白色。:]

```
float4 PSFunction(float2 coord : TEXCOORD0) : COLOR0
{
    return float4(0, 0, 0, 1); // Return a white pixel
}

technique Sample
{
    pass pass0
    {
        PixelShader = compile ps_2_0 PSFunction();
    }
} 
```

当我使用以下参数开始我的 SpriteBatch 时，它正在正常工作：

```
SpriteBatch.Begin(0, null, null, null, null, SampleEffect); 
```

然而; SpriteBatch.Begin 方法不接受多重效果。因此我试图做

```
SampleEffect.CurrentTechnique.Passes[0].Apply(); 
```

打电话之前

```
SpriteBatch.Begin(); 
```

但是什么也没发生，因此我尝试了几种不同的方法。如

```
SampleEffect.CurrentTechnique.Passes["pass0"].Apply(); 
```

但它仍然没有工作。因此，我使用 object.ReferenceEquals 函数验证了效果已附加到正确的 GraphicsDevice，但它等于正确的 graphicsDevice。我究竟做错了什么？如何将多个效果附加到我的 SpriteBatch？

在此先感谢，拉斯穆斯：]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:16:03.273

您不能同时使用多个效果通道进行绘制。相反，您需要多次绘制相同的东西，将结果组合在一起。

例如，想象一下模拟具有 3 种效果的照明：环境光、漫反射光和镜面反射光。这些中的每一个都将由一个效果通道表示。您将按顺序渲染它们，将结果*相加*组合在一起（就像光相加一样）。

如果要组合多个效果，则需要手动指定它们的组合方式。您通常会通过循环遍历您想要使用的效果通道来执行此操作，并一次应用一个，在每次迭代时绘制您的场景。

# c++ - 如何使用 BlueZ 获取 RSSI？

> ID：11274539
> 
> 赞同：5
> 
> 时间：2012-06-30T13:46:30.820
> 
> 标签：c++, c, bluetooth, hci

我目前正在构建一个小型实用程序来通过蓝牙和我的电脑找到我的手机。为此，我试图让 RSSI 来评估两个设备之间的距离。如何在 C/C++ 中使用 Bluez 获取 RSSI？

是否有用于此的 hci 命令，如果有，是否有 HCI 命令列表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-16T20:42:19.193

有没有对你有用的实用程序。如果您没有尝试安装所有 bluez 库，请尝试使用 bluetoothctl。

您只需要开始扫描，它就会为您提供所有设备的 rssi。

如果需要查看代码。您还可以在 git 代码中搜索[https://git.kernel.org/cgit/bluetooth/bluez.git/tree/](https://git.kernel.org/cgit/bluetooth/bluez.git/tree/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T04:20:17.233

You can do hcitool rssi but for this device should be connected And if you are bluez then it provides propertychanged signal for rssi value for this you can check docs/device-api.txt file

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T05:26:40.633

这个怎么样，取自 RPi [http://www.raspberrypi.org/phpBB3/viewtopic.php?t=57893&p=435887](http://www.raspberrypi.org/phpBB3/viewtopic.php?t=57893&p=435887)？

# logic - 当他想更改他帐户的电子邮件地址时，我应该将验证链接发送到他的旧电子邮件帐户吗？

> ID：11274540
> 
> 赞同：0
> 
> 时间：2012-06-30T13:46:32.107
> 
> 标签：logic

当用户想要更改他的帐户电子邮件地址时，我应该将验证链接发送到他的旧电子邮件帐户吗？

我应该因为担心黑客在成功入侵后更改她的电子邮件地址。

我不应该因为他想要更改电子邮件地址的原因是因为他无法登录他的旧电子邮件帐户。

这个冲突有什么解决办法吗？应该还是不应该？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:16:10.280

这是一个合理的问题，但在这种情况下，您可以将**验证链接发送到新帐户**并将**更改电子邮件地址的信息发送到旧帐户**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:52:23.837

您的担心是对的，另外旧的电子邮件帐户可能由于忘记密码等其他原因而无法访问。因此向旧电子邮件地址发送验证不是一个好主意。但是要将验证电子邮件发送到新地址，用户应该通过密码或使用任何验证来识别自己。

# loops - 球拍中的 for 循环似乎对我不起作用

> ID：11274541
> 
> 赞同：2
> 
> 时间：2012-06-30T13:46:49.970
> 
> 标签：loops, for-loop, scheme, racket

我对球拍完全陌生。我正在尝试编写简单的 for 循环，但 DrRacket 不断抛出错误“for：此函数未定义”。

```
(for ([i '(1 2 3)])
    (display i)) 
```

即使是这个简单的代码（取自 Racket 文档）也不适合我。我需要声明一些库还是...？我已经阅读了文档，但没有发现任何关于它的提及。

任何帮助将非常感激。

（我使用的是高级学生语言）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:50:51.877

使用球拍语言：

```
#lang racket
(for ([i '(1 2 3)]) (display i))

Welcome to DrRacket, version 5.2.1 [3m].
Language: racket [custom]; memory limit: 128 MB.
123
> 
```

# django - Python 2.7 Django/MySQL 问题

> ID：11274543
> 
> 赞同：0
> 
> 时间：2012-06-30T13:47:04.967
> 
> 标签：django, xampp, python-2.7

我在 Windows 7 上将 Django 与 Python 2.7 一起使用，我安装了 XAMPP 并使用其中包含的 PHPMyAdmin MySQL 创建了一个要在 Django 中使用的数据库，但是当我使用“python manage.py syncdb”命令时，我得到了这个错误：

```
Traceback (most recent call last):
  File "iFriends\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from
_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 261, in fetch_comman
d
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 69, in load_command_
class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 8, in <module
>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "C:\Python27\lib\site-packages\django\core\management\sql.py", line 6, in <module>
    from django.db import models
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\db\backends\mysql\base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

我已经检查了主机、用户名、密码，这些都是正确的，我真的很想使用 Django，所以如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:53:42.190

您需要为 Windows 安装 mysql lib。

[http://www.codegood.com/archives/4](http://www.codegood.com/archives/4)

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)

[http://www.codegood.com/archives/129](http://www.codegood.com/archives/129)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:50:39.537

你需要一个依赖

```
easy_install mysql-python 
```

# javascript - 检查是否设置了多个变量的最佳方法是什么？

> ID：11274546
> 
> 赞同：0
> 
> 时间：2012-06-30T13:47:29.730
> 
> 标签：javascript, variables, error-handling

这更像是一个一般实践问题。

我正在使用的语言是 Javascript。我有一个函数正在获取一个包含许多变量的对象（好的，只有 10 个变量）。确保此函数获取所有必需的变量并且它们都已设置的最佳方法是什么？

我知道，我知道，为什么不直接使用`if`语句。这是 if 语句的一大块！随着我成长为一名程序员，我知道这可能不是最好的方法。我实际上正在寻找捷径。*您*将如何检查大量变量的存在值和非空白值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:55:41.810

这是处理验证的一种非常简洁的方法，我通常在检查表单输入中的必填字段时使用它。

```
var theObj = { /* object loaded from server */ }

function checkTheObj(testObj)
{
  var requiredKeys = ['key1', 'key2', 'key3'];
  for(var keyPos = 0; keyPos < requiredKeys.length; keyPos++)
  {
    if(typeof(testObj[requiredKeys[keyPos]]) == 'undefined')
    {
      return false;
    }
  }
  return true;
}

if(checkTheObj(theObj))
{
  //do stuff
} 
```

您当然可以调整它以返回或抛出异常，告诉第一个缺失的字段（或使用内部数组返回所有缺失字段的列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:02:38.157

```
function objectHas(obj, properties) {
    var len = properties.length
    for (var i=0; i<len; i++) {
        if (i in properties) {
            if((!obj.hasOwnProperty(properties[i])) || (!obj.propertyIsEnumerable(properties[i]))) {
                return false;
            }
        }
    }
    return true;
} 
```

用法：

```
if(objectHas(user, ["email", "password", "phone"])) {
    console.log("awesome");
} 
```

这很简单，但可以完成工作。

编辑：在理想的世界中，您可以扩展 Object 原型以获得更简洁的语法，例如*if(object.has(["a", "b", "c"]))*，但显然扩展 Object 原型是[化身邪恶](https://stackoverflow.com/questions/10695506/adding-function-to-object-prototype-causes-function-to-show-up-in-all-for-x-in)的，所以一个功能必须做:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T16:05:12.280

首先，您需要提高对这些语言的理解并学习正确的术语。

1.  [根本没有名为“Javascript”的（单一）语言。](http://PointedEars.de/es-matrix) 您在这里隐式使用*了几种*语言（取决于运行时环境），所有这些都是 ECMAScript 实现，*其中一种*是[Netscape/Mozilla *JavaScript*（在基于 Mozilla 的软件中，如 Firefox）](https://developer.mozilla.org/en/JavaScript)。
2.  一个对象没有变量，它有*属性*（*不是*：键）。全局代码、函数代码、`eval`代码可以有变量；这是一个*不同*（但相似）的概念。
3.  该函数没有获取对象，而是将对象的*引用**作为参数*传递给它。

作为程序员，你应该已经知道可以循环执行重复性任务；[ECMAScript 实现中的](https://developer.mozilla.org/en/JavaScript/Guide/Statements#Loop_Statements)相关语句是[`for`、`for`-`in`和`while``do`](https://developer.mozilla.org/en/JavaScript/Guide/Statements#Loop_Statements). 因此，您不必*编写*多个`if`语句。

您可以通过两种方式访问[​​对象的属性，其中](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)*属性名称*`property`是：

 *1.  点符号：`obj.property`
2.  括号符号：`obj["property"]`

如果属性名称是标识符，即如果它遵循某些命名规则，则第二个等效于第一个。如果属性名称不是标识符或者它是变量，则必须使用第二个。这也表明*所有*属性*名称*都是字符串值。因此，您可以将属性的名称存储为变量或另一个属性的值，然后在属性访问器中访问该变量或属性。在下文中，属性名称 ( `property`) 存储在变量中并从变量中使用：

```
var propertyName = "property";
obj[propertyName] 
```

将其与循环结合使用，您可以迭代对象的某些属性。不幸的是，到目前为止提出的解决方案在两个方面存在缺陷： A `for`-`in`语句仅迭代对象的*可枚举*属性，并且它以*任意*顺序进行。此外，它还迭代可枚举的*继承*属性（这就是为什么一种解决方案需要`hasOwnProperty()`调用的原因）。

*以定义的顺序*仅迭代对象的某些属性的简单、可靠且有效的方法如下所示：

```
var propertyNames = ['name1', 'name2', 'name3'];
for (var i = 0, len = propertyNames.length; i < len; ++i)
{
  /* … */ myObject[propertyNames[i]] /* … */
} 
```

这是因为`propertyNames`引用了一个`Array`实例，它封装了一个数组数据结构。数组的元素是具有从 0 到 65535 (2 ^(32) -1)`Array`的整数索引的实例的属性。因为索引不是标识符（它们以十进制数字开头），所以您必须使用括号属性访问器语法（有些人误解了这一点并将所有 ECMAScript 对象称为“数组”，甚至称它们为“关联数组”和“数组操作员”）。因此，在每次迭代中计算数组元素的值，每次增加 1。结果，在每个循环中访问具有该名称的属性。^(`[…]``propertyNames[i]``i``myObject[propertyNames[i]]`)

现在，要确定该属性是否已设置，您需要定义它的含义。访问不存在的属性会产生`undefined`值（而不是错误）。但是，现有属性也可以将`undefined`值作为其值。

如果“未设置”意味着该对象没有该属性（但可以继承它），那么您应该使用`hasOwnProperty()`Mahn 解决方案中使用的方法。

如果“未设置”意味着对象没有属性并且不继承它，那么您应该使用`in`运算符，前提是该对象[不是](http://ecma-international.org/ecma-262/5.1/#sec-11.8.7)*宿主*[对象](http://ecma-international.org/ecma-262/5.1/#sec-4.3.8)（因为没有为[它们指定](http://ecma-international.org/ecma-262/5.1/#sec-8.12)[运算符](http://ecma-international.org/ecma-262/5.1/#sec-11.8.7)）：[`in`](http://ecma-international.org/ecma-262/5.1/#sec-11.8.7)

```
if (propertyNames[i] in obj) 
```

如果“未设置”意味着对象具有或继承了该属性，但该属性具有`undefined`值，或者该对象既没有也没有继承该属性，那么您应该使用`typeof`Bob Davies 和 aetaur 解决方案中使用的运算符（但后一种方法使用[`Array.prototype.every()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)的兼容性较差；该方法在 ECMAScript 版本 5 之前未指定，并且在 IE/JScript < 9 中不可用）。

ECMAScript 版本 5.x 有第三个选项，该[`Object.keys()`方法](http://ecma-international.org/ecma-262/5.1/#sec-15.2.3.14)（尽管它的名称）返回对实例的引用，该`Array`实例包含参数的所有非继承属性的名称：

```
var propertyNames = Object.keys(obj);

/* continue as described above */ 
```

`Object.keys()`如果它不是内置的，最好模拟它，因为这个算法经常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T14:09:48.340

`variableNameList`如果（所需变量名称列表）中的所有变量都设置在 object 中，则此表达式返回 true `o`：

```
variableNameList.every(function(varName){ return typeof o[varName] !== 'undefined'; }); 
```

您可以使用下划线`_.all`函数代替 native `every`，并使用下划线`_.isUndefined`代替`typeof ...`.*

# asp.net-mvc-3 - ASP.NET MVC 3 RAZOR：如何在另一个控制器操作中获取查询字符串的值？

> ID：11274548
> 
> 赞同：0
> 
> 时间：2012-06-30T13:47:35.453
> 
> 标签：asp.net-mvc-3, razor, controller, query-string

这是索引视图：

```
<script type="text/jscript" language="javascript">
    $(document).ready(function () {
        $("#tabs").tabs();
    });
</script>
<div class="demo">
        <div id="tabs">
        <ul>
            <li><a href="/CarDetails/Overview">Overview</a></li>
            <li><a href="/CarDetails/Specification?Id=" + '@ViewBag.versionId'>Specifications</a></li>
        </ul>
        <div>
        </div>
        <div>
        </div>
    </div>
</div> 
```

* * *

```
 public class CarDetailsController : Controller
    {
        public ActionResult Index(int? versionID)
        {
            ViewBag.versionId = versionID;
            return View();
        }

        public ActionResult Specification(int Id)
        {
            return PartialView(CarDetails.GetCarModelVersionDetailsByConfigGrpId(Id));
        }

    } 
```

* * *

上面的控制器被调用

```
@Html.ActionLink(item.VersionName, "Index", "CarDetails", new { versionID = item.ModelVersionId },null) 
```

我需要在**CarDetailsControl的****Specification**操作中查询 versionID 值。

 **但它变成了空的。

请指导我。

谢谢，

@保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:06:20.440

更改为 `<li><a href="/CarDetails/Specification?versionID=@ViewBag.versionId" >Specifications</a></li>` 解决了我的问题。**

# asp.net - 如何在 ASP.NET 中从另一个 Web 应用程序访问一个 Web 应用程序

> ID：11274549
> 
> 赞同：0
> 
> 时间：2012-06-30T13:47:37.537
> 
> 标签：asp.net, iis

我有 3 个项目的解决方案。一个是网站，另一个是服务。我想通过网站页面的 AJAX 访问服务项目的页面，但我没有这样做，因为它只运行一个项目。

如何做呢？

**请避免诸如“您尝试过什么？”之类的回答。因为这是与特定代码无关的一般问题。**

我正在使用 Visual Studio Express 2012 内置的 IIS Express。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:15:18.947

您可以通过指定多个启动项目来做到这一点。
选择解决方案的属性，转到`Common Properties`-> `Startup Project`。
选择`Multiple Startup Projects`并选择您需要的那些。您还可以调整起始顺序。

话虽如此，即使 Visual Studio 是否处于调试模式，IIs Express 也可以提供 Web 应用程序，因此这不是绝对必要的。

*注意：我面前没有 Express SKU，因此不能保证这可能。如果不是，那么答案是不可能的。*

# c# - 无法将类型“string”隐式转换为“int”

> ID：11274555
> 
> 赞同：0
> 
> 时间：2012-06-30T13:48:19.010
> 
> 标签：c#, asp.net, .net, visual-studio-2010, sockets

我在 C# 中不断收到调试错误“无法将类型'string'隐式转换为'int'”。

这是我的代码片段：

```
private void button2_Click(object sender, EventArgs e) //button to start takedown
        {
            byte[] packetData = System.Text.ASCIIEncoding.ASCII.GetBytes("<Packet OF Data Here>");
            string IP = "127.0.0.1";
            int port = "80";

            IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), port);

            Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            client.SendTo(packetData, ep);
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T10:04:05.427

如果可能的话：

```
int port = 80; 
```

如果你不能有一个 int 变量，你将不得不解析它：

```
int port = Int32.Parse("80"); 
```

例如

```
string a = "80";
int port = Int32.Parse(a); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-30T13:49:20.760

这是错误：

```
int port = "80"; 
```

将其转换为

```
int port=80; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T13:49:22.357

您必须在此处转换`string`为`int`：

```
int port = "80"; // can't assign string to int 
```

只需将其作为 int 传递：

```
int port = 80; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T18:02:25.377

在您的情况下，其他所有人的答案是端口需要是“int”类型而不是“string”类型是正确的。但是，如果您确实有来自用户输入的字符串，并且需要将其转换回 int [Int32.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse)或[Int32.Parse](http://msdn.microsoft.com/en-us/library/system.int32.parse)就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T13:51:05.773

```
int port = "80"; 
```

不正确，因为`int`需要一个整数，而不是字符串。通过使用语音标记，您提供`80`的是字符串，而不是整数。只需删除语音标记，以便将变量分配为整数。

```
int port = 80; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T10:55:50.110

你不能像你所做的那样在 "" 中提到整数`int port = "80";`

正确的版本应该是 `int port = 80;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-10T16:37:57.637

更改
int端口=“80”；
到
**var**端口 = "80";

并且
IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), port);
到
IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), **Convert.ToInt32(port)** );

# jquery - jquery td 点击事件

> ID：11274556
> 
> 赞同：0
> 
> 时间：2012-06-30T13:48:23.957
> 
> 标签：jquery

我正在尝试通过 jquery 在表格上的 td 单元格上触发单击事件。我已经为不同表中的行实现了它，没有任何问题。作为参考，该表是一个月历，单击一个正方形将拉出当天的数据。

我无法触发该事件，因此我将代码简化为基础并将其放在自己的页面上，以确保没有任何干扰。css 中的表类是 table.calendar，代码如下：

```
 $('table.calendar').delegate('td','click',function () {
        alert('Success');
        var href = $(this).find("a").attr("href");
        if (href) {
            window.location = href;
        }
    }); 
```

我也将它作为 .calendar 尝试过，但没有成功。我已经确认该课程在桌子上是正确的，并且没有其他课程。我正在使用`jquery 1.6`.

知道为什么事件没有触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:02:18.007

尝试将您的代码包装在一个就绪回调中：

```
jQuery(function($) {
    $('table.calendar').delegate('td','click',function () {
            alert('Success');
            var href = $(this).find("a").attr("href");
            if (href) {
                window.location = href;
            }
        });
}); 
```

如果这不起作用，则很有可能您`table.calender`被异步添加。然后尝试：

```
$(document).deligate('table.calendar td', 'click', function() {
    alert("Success!");
}); 
```

或者

```
$("table.calendar td").live('click', function() {
    alert("Success!");
}); 
```

如果这不起作用，则您没有任何类`calender`包含任何`td`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:34:14.747

这是原始代码。请注意，我使用的是 VS2010，所以一些代码来自那里。

```
<form method="post" action="WebForm1.aspx" id="form1"> 
```

//

```
<script type="text/javascript">

    jQuery(function ($) {

        $('table.calendar').delegate('td', 'click', function () {

            alert('Success');

            var href = $(this).find("a").attr("href");

            if (href) {

                window.location = href;

            }

        });

    }); 
```

```
<div>

<table id="tblCalendar" class="calendar" rules="all" border="1" style="width:70%;float:right;border-width:2px;border-color:Gray">

<tr style="border-width:2px;border-style:solid;">

    <th><a id="LinkBack" href="javascript:__doPostBack(&#39;LinkBack&#39;,&#39;&#39;)" style="font-size:Large;"><<</a></th><th align="center" colspan="1"><span id="CalendarTitle" style="font-size:Large;"></span></th><th align="center"><a id="LinkForward" href="javascript:__doPostBack(&#39;LinkForward&#39;,&#39;&#39;)" style="font-size:Large;">>></a></th>

</tr><tr>

    <td class="Regular">3</td><td>4</td><td>5</td>

</tr> 
```

```
</div>

</form> 
```

# php - PHP没有将一些值插入MySQL数据库

> ID：11274561
> 
> 赞同：1
> 
> 时间：2012-06-30T13:49:35.830
> 
> 标签：php, mysql

我有一个 HTML 表单，它将值提交到以下 PHP 文件，该文件将它们插入 MySQL 数据库：

```
<?php
  $con = mysql_connect("*","*","*");
  if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

  mysql_select_db("*", $con);

  $sql="INSERT INTO scores (hometeam, awayteam, result)
  VALUES
  ('" . mysql_real_escape_string($_POST['hometeam']) . "',
   '" . mysql_real_escape_string($_POST['awayteam']) . "',
   '" . mysql_real_escape_string($_POST['result']) . "')";

  if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
  echo "1 record added";

  mysql_close($con);
?> 
```

有时 HTML 表单中的输入字段会留空，在这种情况下，我不希望将任何内容插入数据库。我希望该值保持*NULL*。在我这样填写表格的那一刻：

主队：蓝队
客队：[空白]
结果：获胜

以下内容被插入到我的数据库中：

主队：蓝队
客队：' '
结果：获胜

我想要插入/不插入的是：

主队：蓝队
客队：*NULL*
结果：获胜

我已经寻找了几个小时的解决方案。任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:04:36.927

好吧，它只会插入最终值，因为您正在执行 $sql 并且 $sql 的最后一个值是`"INSERT INTO scores (result) VALUES ('$_POST[result]')";`您通过放置相同的变量名来覆盖以前的值。

`(!empty($_POST[hometeam]))`如果字段有时可以为空，也请删除 !empty 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:05:15.273

您每次都在覆盖您的 SQL 语句。因为您的“结果”字段不为空，您将 SQL 语句设置为：

```
"INSERT INTO scores (result) VALUES ('$_POST[result]')" 
```

这是唯一正在执行的语句 - 您的其他值将被忽略，因为它们不是该语句的一部分。

您需要做的是首先设置变量：

```
$hometeam = isset($_POST['hometeam']) ? $_POST['hometeam'] : NULL;
$awayteam = isset($_POST['awayteam']) ? $_POST['awayteam'] : NULL;
$result = isset($_POST['result']) ? $_POST['result'] : NULL; 
```

然后，您可以进行数据库交互：

```
$sql = "INSERT INTO scores hometeam, awayteam, result VALUES $hometeam, $awayteam, $result";
if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
}
echo "1 record added";

mysql_close($con); 
```

我应该说我没有在这方面包含任何安全性 - 您应该查看 PDO 或准备好的语句以确保您的数据库不对 SQL 注入开放。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:03:02.900

我认为在您的 html 表单中声明输入字段的名称存在一些问题。确保 $_POST[hometeam] 必须与表单中的输入名称相同

示例：在您的表单中

```
<input type="text" name="hometeam" value="" /> 
```

在你的 PHP

```
 if (!empty($_POST[hometeam])) {
  $sql="INSERT INTO scores (hometeam) VALUES ('$_POST[hometeam]')";
 } 
```

此外，在将其添加到数据库之前，请在您的帖子值中使用 addlashes 或 mysql_real_escape_string。

看看下面这个链接：

[http://php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T14:03:38.580

首先，这段代码有一个巨大的安全漏洞，它没有清理你的输入。用户可以插入他们喜欢的任何内容，并且无需任何检查即可在数据库上执行。这是不好的。 **至少**，您应该使用 mysql_real_escape_string() 之类的东西，即使这并不是最适合这项工作的东西（例如 Google PHP + PDO）。

其次，您实际上是在使用一个变量执行一个查询。如果设置了 $_POST['result']，则 $sql 将始终是最后一个值。您可能想要做的是像这样进行查询：

```
$query = 'INSERT INTO scores ('.$fields.') VALUES ('.$values.')'; 
```

并使用您的 if(!empty( .. )) 代码构造 $fields 和 $values 变量。

但是要重申**清理您的输入**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T14:05:51.840

3 insert into 语句将插入 3 条记录，未指定的字段保留为 null 或默认值。您必须使用 1 insert into 语句，例如：

```
 <?php
  $con = mysql_connect("*","*","*");
  if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

  mysql_select_db("*", $con);
  @$sql="INSERT INTO scores (hometeam,awayteam,result) VALUES ('{$_POST[hometeam]}','{$_POST[awayteam]}','{$_POST[result]}')";

  if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
  echo "1 record added";

  mysql_close($con);
?> 
```

在这里，未指定的值将作为空字符串出现，如果这是一个问题，首先使用 ifs 将它们分配给 3 个单独的变量（例如将空值设置为 null），然后使用它们

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T14:02:48.767

```
if (!empty($_POST['hometeam'])) {
  $sql="INSERT INTO scores (hometeam) VALUES ('" . $_POST['hometeam'] . "')";
} 
```

注意“hometeam”部分周围的单引号。您还应该使用`mysql_real_escape_string($_POST['hometeam'])`.

请记住，这将为每个调用创建多达 3 行，如果您想要有类似分数的行（主队、客队、结果），您需要以不同的方式构建查询（即单个查询而不是 3 个单独的查询）。

# php - 如何通过链接从数据库中获取id

> ID：11274567
> 
> 赞同：1
> 
> 时间：2012-06-30T13:50:17.013
> 
> 标签：php, codeigniter

我想链接员工的名字.....当我点击任何名字然后显示他的详细信息......我创建这个代码..bt一些错误**“试图获取非对象的属性”** ......请帮助我......

**1.控制器**

```
function abc($id = 0)    
{
     $this->load->model('emp_model');
     $data['rows'] = $this->emp_model->get();
     $this->load->view('personal_emp',$data);
} 
```

**2.型号**

```
function get($id)
{
    $this->load->database();   
    return $this->db->get_where('employee',array('id'=>$id))->row_array();        
} 
```

**3.views**

```
<table border="1" height="200" width="200" bordercolor="#003366" align="center">

<tr>
    <th>ID</th></td>
    <th>NAME</th>
    <th>Fathet Name</th>
    <th>Dob</th>
    <th>Qualification</th>
    <th>Identity Type</th><th>Identity No</th>
    <th>Gender</th>
    <th>Email</th>
    <th colspan='2'>Action</th>
</tr>
<?php foreach($rows as $r)
{
  echo "<tr>";
  echo "<td>". $r->id ."</td>";
  echo "<td>". $r->name ."</td>";
  echo "<td>". $r->father_name ."</td>";
  echo "<td>". $r->dob ."</td>";
  echo "<td>". $r->qualification ."</td>";
  echo "<td>". $r->identity_type ."</td>";
  echo "<td>". $r->identity_no ."</td>";
  echo "<td>". $r->gender ."</td>";
  echo "<td>". $r->email ."</td>";
  echo "<td>". anchor('employee/input/'.$r->id,'Edit') ."</td>";    
  echo "<td>". anchor('employee/del/'.$r->id,'Delete') ."</td>";
  echo "</tr>"; 
  echo "<br>"; 
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:02:54.733

对于初学者，您需要为变量命名，在这种情况下，即数组键。然后你需要调用正确的方法。不是`general()`但是`get()`。

```
function abc($id = 0)    
{
     $this->load->model('emp_model');
     $data['rows'] = $this->emp_model->get();
     $this->load->view('personal_emp',$data);
} 
```

对方法稍作修改

```
function get($id)
{
   $this->load->database();   
   return $this->db->get_where('employee',array('id'=>$id))->result();        
} 
```

希望这可以帮助。玩得开心！

# php - 如何屏蔽 URL 之类的 cloudapp，以便用户可以在“他们的”服务器上炫耀我们的数据

> ID：11274568
> 
> 赞同：0
> 
> 时间：2012-06-30T13:50:20.973
> 
> 标签：php

我计划构建一个网络应用程序，用户可以在其中展示他们的数据。我希望我们的用户能够在他们自己的网站上展示它，就像 cloudapp 一样。您可以设置自己的域名，但仍使用应用程序的托管服务。

所以我的服务是`http://example.com/showoff`，但我希望用户可以选择使用`http://showoff.example.net`他们的数据。

我打算用 PHP 来做，但如果涉及到构建这种服务，我愿意征求建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:53:15.917

他们必须将 showoff.usersite.com 的 DNS 条目指向您的服务器。您可以从 $_SERVER 变量中读取它，然后就可以了！将另一个域指向您的站点并尝试：print_R($_SERVER)，您将看到指向您的域名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:10:06.310

假设您的域是“showoff.com”，他们的域是“acme.com”

您有两个基本选项：“showoff.acme.com”或“acme.showoff.com”。我已经做到了这两种方式。

对于“showoff.acme.com”：

*   客户需要在其 DNS 中设置指向 showoff.com 的 CNAME 条目。*向客户解释如何做到这一点并非易事，并且除非您拥有一个小而高薪的客户群，否则没有太大的商业意义。*
*   您需要配置一个 Apache 虚拟主机来回答所有域的所有请求（不仅仅是 showoff.com）
*   除非您为每个单独的客户配置虚拟主机和 IP 和证书，否则您不能使用 SSL。（好痛！）

对于“acme.showoff.com”：

*   您需要一个[通配符 DNS 记录](http://en.wikipedia.org/wiki/Wildcard_DNS_record)来将 *.showoff.com 指向您服务器的 IP（这是否容易取决于您的 DNS 提供商）；如果您无法执行此操作，则需要为每个客户创建 DNS 记录。
*   您需要配置一个 Apache 虚拟主机来回答对 *.showoff.com 的所有请求
*   您可以为 *.showoff.com使用[通配符 SSL 证书](http://en.wikipedia.org/wiki/Wildcard_SSL_certificate)

在这两种情况下，您都可以在您的 PHP 中找出使用`$_SERVER['HTTP_HOST']`. 您将需要根据您的已识别域数据库检查这一点，以确定要显示的客户数据。

如您所见，大部分工作都在 DNS 和 Apache 中；使用 PHP 还是其他语言并不重要。

# c# - nullreferenceexception 未处理 NAudio MP3 流

> ID：11274573
> 
> 赞同：0
> 
> 时间：2012-06-30T13:51:05.450
> 
> 标签：c#, streaming, mp3, naudio

我正在使用 Naudios Demo 应用程序来演示一下。我发现当我播放一些 mp3 文件时，最后 om 声音/mp3 我得到了一个

> 错误 nullreferenceexception 未处理 nullreferenceexception 对象引用未设置为对象的实例

在文件 Mp3FrameDecompressor.cs

```
using System;
using System.Collections.Generic;
using System.Text;
using NAudio.Wave;
using NAudio.Wave.Compression;
using System.Diagnostics;

namespace NAudio.Wave
{
    /// <summary>
    /// MP3 Frame Decompressor using ACM
    /// </summary>
    public class AcmMp3FrameDecompressor : IDisposable, IMp3FrameDecompressor
    {
        private AcmStream conversionStream;
        private WaveFormat pcmFormat;

        /// <summary>
        /// Creates a new ACM frame decompressor
        /// </summary>
        /// <param name="sourceFormat">The MP3 source format</param>
        public AcmMp3FrameDecompressor(WaveFormat sourceFormat)
        {
            this.pcmFormat = AcmStream.SuggestPcmFormat(sourceFormat);
            conversionStream = new AcmStream(sourceFormat, pcmFormat);
        }

        /// <summary>
        /// Output format (PCM)
        /// </summary>
        public WaveFormat OutputFormat { get { return pcmFormat; } }

        /// <summary>
        /// Decompresses a frame
        /// </summary>
        /// <param name="frame">The MP3 frame</param>
        /// <param name="dest">destination buffer</param>
        /// <param name="destOffset">Offset within destination buffer</param>
        /// <returns>Bytes written into destination buffer</returns>
        public int DecompressFrame(Mp3Frame frame, byte[] dest, int destOffset)
        {
            Array.Copy(frame.RawData, conversionStream.SourceBuffer, frame.FrameLength);
            int sourceBytesConverted = 0;
            int converted = conversionStream.Convert(frame.FrameLength, out sourceBytesConverted);
            if (sourceBytesConverted != frame.FrameLength)
            {
                throw new InvalidOperationException(String.Format("Couldn't convert the whole MP3 frame (converted {0}/{1})",
                    sourceBytesConverted, frame.FrameLength));
            }
            Array.Copy(conversionStream.DestBuffer, 0, dest, destOffset, converted);
            return converted;
        }

        /// <summary>
        /// Disposes of this MP3 frame decompressor
        /// </summary>
        public void Dispose()
        {
            if (this.conversionStream != null)
            {
                this.conversionStream.Dispose();
                this.conversionStream = null;
            }
        }
    }
} 
```

这是我使用的表格

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using NAudio.Wave;
using System.Net;
using System.Threading;
using System.Net.Sockets;
using System.IO;
using System.Diagnostics;
using System.ComponentModel.Composition;

namespace NAudioDemo
{
    public partial class MP3StreamingPanel : Form
    {
        public MP3StreamingPanel()
        {
            InitializeComponent();
            this.volumeSlider1.VolumeChanged += new EventHandler(volumeSlider1_VolumeChanged);
            this.Disposed += this.MP3StreamingPanel_Disposing;
        }

        enum StreamingPlaybackState
        {
            Stopped,
            Playing,
            Buffering,
            Paused
        }

        void volumeSlider1_VolumeChanged(object sender, EventArgs e)
        {
            if (this.volumeProvider != null)
            {
                this.volumeProvider.Volume = this.volumeSlider1.Volume;
            }
        }

        private BufferedWaveProvider bufferedWaveProvider;
        private IWavePlayer waveOut;
        private volatile StreamingPlaybackState playbackState;
        private volatile bool fullyDownloaded;
        private HttpWebRequest webRequest;
        private VolumeWaveProvider16 volumeProvider;

        delegate void ShowErrorDelegate(string message);

        private void ShowError(string message)
        {
            if (this.InvokeRequired)
            {
                this.BeginInvoke(new ShowErrorDelegate(ShowError), message);
            }
            else
            {
                MessageBox.Show(message);
            }
        }

        private void StreamMP3(object state)
        {
            this.fullyDownloaded = false;
            string url = (string)state;
            webRequest = (HttpWebRequest)WebRequest.Create(url);
            HttpWebResponse resp = null;
            try
            {
                resp = (HttpWebResponse)webRequest.GetResponse();
            }
            catch(WebException e)
            {
                if (e.Status != WebExceptionStatus.RequestCanceled)
                {
                    ShowError(e.Message);
                }
                return;
            }
            byte[] buffer = new byte[16384 * 4]; // needs to be big enough to hold a decompressed frame

            IMp3FrameDecompressor decompressor = null;
            try
            {
                using (var responseStream = resp.GetResponseStream())
                {
                    var readFullyStream = new ReadFullyStream(responseStream);
                    do
                    {
                        if (bufferedWaveProvider != null && bufferedWaveProvider.BufferLength - bufferedWaveProvider.BufferedBytes < bufferedWaveProvider.WaveFormat.AverageBytesPerSecond / 4)
                        {
                            Debug.WriteLine("Buffer getting full, taking a break");
                            Thread.Sleep(500);
                        }
                        else
                        {
                            Mp3Frame frame = null;
                            try
                            {
                                frame = Mp3Frame.LoadFromStream(readFullyStream);
                            }
                            catch (EndOfStreamException)
                            {
                                this.fullyDownloaded = true;
                                // reached the end of the MP3 file / stream
                                break;
                            }
                            catch (WebException)
                            {
                                // probably we have aborted download from the GUI thread
                                break;
                            }
                            if (decompressor == null)
                            {
                                // don't think these details matter too much - just help ACM select the right codec
                                // however, the buffered provider doesn't know what sample rate it is working at
                                // until we have a frame
                                WaveFormat waveFormat = new Mp3WaveFormat(frame.SampleRate, frame.ChannelMode == ChannelMode.Mono ? 1 : 2, frame.FrameLength, frame.BitRate);
                                decompressor = new AcmMp3FrameDecompressor(waveFormat);
                                this.bufferedWaveProvider = new BufferedWaveProvider(decompressor.OutputFormat);
                                this.bufferedWaveProvider.BufferDuration = TimeSpan.FromSeconds(20); // allow us to get well ahead of ourselves
                                //this.bufferedWaveProvider.BufferedDuration = 250;
                            }
                            int decompressed = decompressor.DecompressFrame(frame, buffer, 0);
                            //Debug.WriteLine(String.Format("Decompressed a frame {0}", decompressed));
                            bufferedWaveProvider.AddSamples(buffer, 0, decompressed);
                        }

                    } while (playbackState != StreamingPlaybackState.Stopped);
                    Debug.WriteLine("Exiting");
                    // was doing this in a finally block, but for some reason
                    // we are hanging on response stream .Dispose so never get there
                    decompressor.Dispose();
                }
            }
            finally
            {
                if (decompressor != null)
                {
                    decompressor.Dispose();
                }
            }
        }

        private void buttonPlay_Click(object sender, EventArgs e)
        {
            if (playbackState == StreamingPlaybackState.Stopped)
            {
                playbackState = StreamingPlaybackState.Buffering;
                this.bufferedWaveProvider = null;
                ThreadPool.QueueUserWorkItem(new WaitCallback(StreamMP3), textBoxStreamingUrl.Text);
                timer1.Enabled = true;
            }
            else if (playbackState == StreamingPlaybackState.Paused)
            {
                playbackState = StreamingPlaybackState.Buffering;
            }
        }

        private void StopPlayback()
        {
            if (playbackState != StreamingPlaybackState.Stopped)
            {
                if (!fullyDownloaded)
                {
                    webRequest.Abort();
                }
                this.playbackState = StreamingPlaybackState.Stopped;
                if (waveOut != null)
                { 
                    waveOut.Stop();
                    waveOut.Dispose();
                    waveOut = null;
                }
                timer1.Enabled = false;
                // n.b. streaming thread may not yet have exited
                Thread.Sleep(500);
                ShowBufferState(0);
            }
        }

        private void ShowBufferState(double totalSeconds)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (playbackState != StreamingPlaybackState.Stopped)
            {
                if (this.waveOut == null && this.bufferedWaveProvider != null)
                {
                    Debug.WriteLine("Creating WaveOut Device");
                    this.waveOut = CreateWaveOut();
                    waveOut.PlaybackStopped += waveOut_PlaybackStopped;
                    this.volumeProvider = new VolumeWaveProvider16(bufferedWaveProvider);
                    this.volumeProvider.Volume = this.volumeSlider1.Volume;
                    waveOut.Init(volumeProvider);
                    progressBarBuffer.Maximum = (int)bufferedWaveProvider.BufferDuration.TotalMilliseconds;
                }
                else if (bufferedWaveProvider != null)
                {
                    var bufferedSeconds = bufferedWaveProvider.BufferedDuration.TotalSeconds;
                    ShowBufferState(bufferedSeconds);
                    // make it stutter less if we buffer up a decent amount before playing
                    if (bufferedSeconds < 0.5 && this.playbackState == StreamingPlaybackState.Playing && !this.fullyDownloaded)
                    {
                        this.playbackState = StreamingPlaybackState.Buffering;
                        waveOut.Pause();
                        Debug.WriteLine(String.Format("Paused to buffer, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                    }
                    else if (bufferedSeconds > 1 && this.playbackState == StreamingPlaybackState.Buffering)
                    {
                        waveOut.Play();
                        Debug.WriteLine(String.Format("Started playing, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                        this.playbackState = StreamingPlaybackState.Playing;
                    }
                    else if (this.fullyDownloaded && bufferedSeconds == 0)
                    {
                        Debug.WriteLine("Reached end of stream");
                        StopPlayback();
                    }
                }

            }
        }

        private IWavePlayer CreateWaveOut()
        {
            return new WaveOut();
            //return new DirectSoundOut();
        }

        private void MP3StreamingPanel_Disposing(object sender, EventArgs e)
        {
            StopPlayback();
        }

        private void buttonPause_Click(object sender, EventArgs e)
        {
            if (playbackState == StreamingPlaybackState.Playing || playbackState == StreamingPlaybackState.Buffering)
            {
                waveOut.Pause();
                Debug.WriteLine(String.Format("User requested Pause, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                playbackState = StreamingPlaybackState.Paused;
            }
        }

        private void buttonStop_Click(object sender, EventArgs e)
        {
            StopPlayback();
        }

        private void waveOut_PlaybackStopped(object sender, StoppedEventArgs e)
        {
            Debug.WriteLine("Playback Stopped");
            if (e.Exception != null)
            {
                MessageBox.Show(String.Format("Playback Error {0}", e.Exception.Message));
            }
        }
    }

    [Export(typeof(INAudioDemoPlugin))]
    public class MP3StreamingPanelPlugin : INAudioDemoPlugin
    {
        public string Name
        {
            get { return "MP3 Streaming"; }
        }

        public Control CreatePanel()
        {
            return new MP3StreamingPanel();
        }
    }
} 
```

我在这条线上得到了错误

```
Array.Copy(frame.RawData, conversionStream.SourceBuffer, frame.FrameLength); 
```

# boost - Boost asio 读取未知字节数

> ID：11274577
> 
> 赞同：1
> 
> 时间：2012-06-30T13:51:19.900
> 
> 标签：boost, asynchronous, boost-asio

我有2个案例：

1.  客户端连接，不发送字节并等待服务器响应。
2.  客户端连接，发送超过 1 个字节并等待服务器响应。

接下来是问题：在第一种情况下，我不应该读取任何字节并获得一些服务器响应。在第二种情况下，我应该至少读取 1 个字节，然后我才会得到服务器响应。如果我尝试读取至少 0 个字节，如下所示：

```
async_read(sock, boost::asio::buffer(data),
            boost::asio::transfer_at_least(0),
            boost::bind(&server::read, this,
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred)); 
```

在第二种情况下，我永远不会得到正确的服务器响应。

但是，如果我读取至少 1 个字节，则此 async_read 操作将永远不会结束。

那么，我该如何处理这种情况呢？

更新 1：我仍在寻找不使用时间限制的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:56:55.747

你希望这如何工作？第一种和第二种情况的反应是否不同？如果它确实发生了变化，您将无法可靠地执行此操作，因为存在竞争条件，您应该修复协议。如果它没有变化，服务器应该只发送响应。

这个问题的解决方案不是asio问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:38:36.713

这就是我所做的

```
 while (ec != boost::asio::error::eof) {

        vector<char>socketBuffer(messageSize);

        size_t buffersize = socket->read_some(
                                    boost::asio::buffer(socketBuffer),ec);

        if (buffersize > 0) {

            cout << "received" << endl;

            for (unsigned int i=0; i < buffersize; ++i) {

                cout << socketBuffer.at(i);
            }

            cout << "" << endl;
        }

        socketBuffer.clear();

    }

    if(!ec){
        cout<<"error "<<ec.message()<<endl;
    }
    socket->close(); 
```

这是我的一小段代码，我希望它可以帮助您读取一定数量的数据并将其附加到字节向量中，如果您愿意，稍后再进行处理。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T04:51:56.947

我想你需要使用客户端发送的数据在情况 2 中做出正确的服务器响应，并且可能在情况 1 中做出默认响应。因此，客户端在连接后应该发送数据多长时间没有时间限制服务器？也许你应该在服务器接受连接后启动一个计时器等待特殊的有限时间。如果服务器及时收到数据，是情况2。如果时间到了，那么情况1。

# opencv - 视频中的 OCR？使用 OCR 处理 openCV 或图像？

> ID：11274579
> 
> 赞同：5
> 
> 时间：2012-06-30T13:51:35.490
> 
> 标签：opencv, computer-vision, ocr

我必须编写一个程序，从司机前面的汽车屏幕上拍摄的视频中进行 OCR，所以它只对数字进行 OCR。我正在尝试找到实现它的方法。我正在考虑使用 openCV，但作为替代方案，我正在考虑使用 OCR 程序从视频中获取帧并找到数字。但是许多 OCR 程序无法正确识别数字（也许 OCR 需要培训？）。所以我想使用计算机视觉库来完成工作。

您认为实现这个简单程序的最佳方式是什么？

我认为使用具有匹配模板的计算机视觉库会很好，但也许 OCR 可以帮助我。例如，有一些程序可以进行车牌识别。

所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T14:36:28.037

你可以通过谷歌搜索找到很多。

查看此链接：[OpenCV-Python 中的简单数字识别 OCR](https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python)

它演示了使用 OpenCV kNN 的简单 OCR。代码用 Python 编写，但函数是标准函数，因此移植到其他语言不会有任何困难。

其他一些相关链接是：

1.  [**OpenCV 中的基本 OCR**](http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)：OpenCV C++ 中的代码，仍然使用 kNN。
2.  **官方数字识别 OCR 示例**：目前的 OpenCV Python 示例有一些用于数字识别 OCR 的示例，我认为其中一个也是用于视频的（我还没有尝试过）。你可以检查一下。[链接 1](https://github.com/opencv/opencv/blob/master/samples/python/digits.py) [链接 2](https://github.com/opencv/opencv/blob/master/samples/python/digits_video.py)

# php - SQL where 子句不起作用

> ID：11274580
> 
> 赞同：1
> 
> 时间：2012-06-30T13:51:40.727
> 
> 标签：php, mysql, sql

我又来了，有问题。这是我的代码：

```
$sql = "SELECT * FROM paginas WHERE subpagina='0'"; 
$q = $con->prepare($sql);
$q->execute();
$q->setFetchMode(PDO::FETCH_ASSOC);
$row = $q->fetch();

if (count($row) != "0")
{
    echo '<ul>';
    while($row = $q->fetch())
    {
       echo '<li><a href="?page='. $row['ID'] . '">' . $row['pagina'] .'</a></li>';
    }
    echo '</ul>';   
} 
```

问题是，数据库中的所有记录`subpagina = 0`都会在页面上回显。但是，如果我在数据库中使用另一个像 3 这样的字符串，并且在这段代码中，它就不起作用。

我做了一些类似的事情`var_dump $row`，`var_dump(erroinfo())`但它只会返回`FALSE`。

我希望你能帮助我。

编辑：这是我的数据结构：

```
CREATE TABLE IF NOT EXISTS `paginas` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `pagina_link` varchar(150) NOT NULL,
  `content` varchar(10000) NOT NULL,
  `pagina` varchar(100) NOT NULL,
  `reactie` varchar(1) NOT NULL,
  `subpagina` varchar(11) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=39 ; 
```

EDIT2：这是数据

```
INSERT INTO `paginas` (`ID`, `pagina_link`, `content`, `pagina`, `reactie`, `subpagina`) VALUES
(32, '?pagina=Home', '<h1>Welkom!</h1><div>Dit is een demo van het cms combora! Je mag hier op uittesten. Je kan inloggen met als gebruikersnaam demo en paswoord demo. Gelieve deze pagina niet te verwijderen.</div><div><br></div> <a href="?pagina=Home&foto=2&l=j"><img width="250px" height="250px;" src="fotos/foto2.jpg"></a>', 'Home', '1', '0'),
(33, '?pagina=test1', '<br>dslmlmqdhfkqsjdf', 'test1', '1', '0'),
(34, '?pagina=test2', '<br>', 'test2', '0', '0'),
(35, '?pagina=Nice', 'fasdfdsfadsf<br>', 'Nice', '1', '0'),
(36, '?pagina=Foto viewer ', 'Deze pagina is een test van de zelfgemaakt foto viewer:<div><br></div>\r\n<a href=\\"?foto=1&amp;l=j\\"><img width=\\"250px\\" height=\\"250px;\\" src=\\"1.jpg\\"></a>\r\n<a href=\\"?foto=2&amp;l=j\\"><img width=\\"250px\\" height=\\"250px;\\" src=\\"2.jpg\\"></a>\r\n<a href=\\"?foto=3&amp;l=j\\"><img width=\\"250px\\" height=\\"250px;\\" src=\\"3.jpg\\"></a><div><br></div>', 'Foto viewer ', '1', '0'),
(38, 'sdkjfqsdfj', 'sdjmkqjfdmlkqsfdlmkqjsdflkjdlmskfjqslmdkfj', 'test56', '1', '2\r\n'); 
```

我不确定你是否提到了这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:55:50.607

你提到它是一个字符串。尝试

```
$sql = "SELECT * FROM paginas WHERE subpagina='0'"; 
```

摆弄了一组有限的桌子。添加了一些数据，上面的 SELECT 就可以了。所以这不是问题。您确定您有其他字符串而不是`'0'`该`subpagina`字段吗？

看到这个[sqlfiddle](http://sqlfiddle.com/#!2/05d5c/2)

您可以尝试的另一件事是

您的数据中没有 subagine = 3 这样的东西。只有 0 和 2 存在

```
$row = $q->fetchAll(); 
print_r($row);
/* print_r shows Array only */
/* loop the array and print the values */
foreach($row as $key => $value)
{
   echo $key + " " + $value + "\r\n";
} 
```

**编辑**

只是现在才看到它：您`fetch()`对其进行评估`$row`并检查计数。然后你用 anohter 开始 while 循环，`fetch()`这将得到结果的 NEXT 行。第一个总是因为第一个而被跳过`fetch()`

使用这样的东西：

```
$rows = $q->fetchAll(); 

echo '<ul>';
foreach($rows as $value)
{
   echo '<li><a href="?page='. $value['ID'] . '">' . $value['pagina'] .'</a></li>';
}
echo '</ul>'; 
```

如果您不想要空`<ul>`标签，则应`count($rows) > 0`在 echo/foreach/echo 之前检查是否

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:26:43.267

在您发布的数据中，我看到它`subpagina`实际上是一个`VARCHAR`字段，而不是数字字段，它的值为`2\r\n`. 您可以通过多种方式解决此问题：

*   `SELECT ... WHERE subpagina LIKE '2%'`匹配字符串`2`后跟其他任何内容
*   修复数据并删除多余的`\r\n`
*   最好的方法是，如果数据确实是数字，则将其`INTEGER`设为`VARCHAR`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:25:51.903

我不知道您为什么要使用字符串来存储似乎是整数的内容，但是您遇到的问题是`'2\r\n'`!== `2`。

如果你想找到`'2\r\n'`，你需要寻找那个或使用一个`LIKE`条件。

# c++ - boost::hash/std::tr1::hash 没有为复制的 const char* 返回相同的哈希值

> ID：11274583
> 
> 赞同：2
> 
> 时间：2012-06-30T13:52:29.440
> 
> 标签：c++, boost, hash

我有以下代码：

```
#include <cstring>
#include <boost/functional/hash.hpp>
#include <iostream>

int main(int argc, char **argv)
{
    const char *str1 = "teststring";

    // copy string
    size_t len = strlen(str1);
    char *str2 = new char[len+1];
    strcpy(str2, str1);

    // hash strings
    std::cout << "str1: " << str1 << "; " << boost::hash<const char*>()(str1) << std::endl;
    std::cout << "str2: " << str2 << "; " << boost::hash<const char*>()(str2) << std::endl;

    delete[] str2;

    return 0;
} 
```

我总是得到相同的 str1 哈希（如预期的那样）。但是 str2 不同 - 事实上，每次我运行程序时它都会返回不同的哈希值。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:59:11.250

正如 Linuxios 所建议的，它对指针值进行哈希处理，而不是对字符串进行哈希处理。我用这段代码做了一个快速测试：

```
char str1[] = "teststring";
std::cout << "str1: " << str1 << "; " << boost::hash<const char*>()(str1) << std::endl;
str1[3] = 'x';
std::cout << "str1: " << str1 << "; " << boost::hash<const char*>()(str1) << std::endl; 
```

这是输出。请注意，字符串不同，但由于指针相同，因此哈希匹配。

```
str1: teststring; 158326806782903
str1: tesxstring; 158326806782903 
```

您需要做的唯一更改是告诉 boost 它正在对 a 进行哈希`std::string`处理，它会为您提供匹配的哈希值。您的基础数据可以保留`char*`。

```
std::cout << "str1: " << str1 << "; " << boost::hash<std::string>()(str1) << std::endl;
std::cout << "str2: " << str2 << "; " << boost::hash<std::string>()(str2) << std::endl; 
```

结果：

```
str1: teststring; 10813257313199645213
str2: teststring; 10813257313199645213 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T08:05:04.663

如果您实际上想要字符串的哈希而不是指针，那么您可以使用`boost::hash_range`函数或使用 hash_combine 的自定义循环并编写自己的哈希函数对象。 `boost::hash<std::basic_string<...> >`使用`hash_range`,`has_range`依次使用`hash_combine`.

例如这样的：

```
struct CStringHash : public std::unary_function<char const*, std::size_t> {
    std::size_t operator()(char const* v) const {
        std::size_t seed = 0;
        for (; *v; ++v) {
            boost::hash_combine(seed, *v);
        }
        return seed;
    }
}; 
```

# php - 更改数字/日期并添加 + 一周。不使用 date() - 在 PHP 中

> ID：11274585
> 
> 赞同：1
> 
> 时间：2012-06-30T13:52:33.683
> 
> 标签：php, database, date, time

我有：

PHP 代码：`$date = date("F j, Y, g:i a");`并将其发送到我的数据库

我用

```
$date = $gg['date']; 
```

从我的数据库中获取日期当我`echo $date`->`June 30, 2012, 3:45 pm`

时间已经在 mail.php 的数据库中设置，并且在 ordertracking.php 中我得到了那个时间，并想增加一周的时间。

所以我想增加一周的时间：`$date = $gg['date'];`

```
 $connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

$ordertracking = mysql_query("SELECT * FROM `ordertracking` WHERE orderid='$orderid'");
while($gg=mysql_fetch_array($ordertracking))
{
    $progress = $gg['progress'];
    $date = $gg['date'];
}

mysql_close($connection) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:58:25.553

使用`DateTime` `modify()`方法

```
$dt = DateTime::createFromFormat("F j, Y, g:i a", $date);
$dt->modify('+1 week');
echo $dt->format("F j, Y, g:i a"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:01:49.473

这里有一些简单的解决方案）

```
$date = date( 'F j, Y, g:i a' );
echo date( 'F j, Y, g:i a', strtotime( $date ) + 7 * 24 * 60 * 60 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:01:53.807

如果你想使用 strtotime 方法，你会做

```
$date = date('F j, Y, g:i a', strtotime('2012-06-30 3:45 pm +1 week')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T14:04:15.027

你可以试试这个：

```
$date = 'June 30, 2012, 3:45 pm';

$new_date = date("F j, Y, g:i a",strtotime(date("F j, Y, g:i a", strtotime($date)) . " +1 week")); 
```

希望这可以帮助。

# php - 如何将点击事件和 ID 分配给 twitter bootstrap 中的多个按钮？

> ID：11274587
> 
> 赞同：1
> 
> 时间：2012-06-30T13:52:55.523
> 
> 标签：php, jquery, twitter-bootstrap

我目前有多个下拉按钮，用于需要绑定到 onClick 事件的几个表行。我遇到的问题是从每个按钮中捕获信息。这是我的测试代码的样子：

```
<table class="table table-bordered">
    <tbody>
    <tr>
      <td><img src="/photos/files/5/m/131309a4fb918110ed1061e90a715eca.jpeg"/></td><td><div class="btn-group">
      <a class="btn btn-primary" href="#"><i class="icon-user icon-white"></i> User</a>
      <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
      <ul class="dropdown-menu">
        <li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
        <li><a href="#"><i class="icon-trash"></i> Delete</a></li>
      </ul>
    </div>
    </tr>
    <tr>
      <td><img src="/photos/files/5/m/b19102d8ba1158e2a139ffa84e8e8540.jpeg"/></td><td><div class="btn-group">
      <a class="btn btn-primary" href="#"><i class="icon-user icon-white"></i> User</a>
      <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
      <ul class="dropdown-menu">
        <li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
        <li><a href="#"><i class="icon-trash"></i> Delete</a></li>
      </ul>
    </div></tr>    
    </tbody>
</table> 
```

当前的javascript：

```
$('.btn').click(function(e) {
    e.preventDefault();
    ???
}); 
```

如何捕获和处理来自多个按钮的每个单击事件？我假设我需要为每个按钮添加一个唯一的 ID，但是如何为每个按钮项捕获 onclick 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:58:09.360

在函数内部，您可以使用它`this`来引用原因中的对象。

```
 $(".btn").click(function () {
     //here you can check which button did it
              if ($(this).attr('class')=='icon-pencil')
                //do sth
              else 
      //do sth else
    }); 
```

检查 jquery 文档。

# php - JavaScript 检查新内容，例如通知

> ID：11274588
> 
> 赞同：2
> 
> 时间：2012-06-30T13:53:06.740
> 
> 标签：php, jquery, cakephp

我会尽力解释这一点。但基本上在网站上，当您有一些动态内容（例如消息、通知等）时……您希望在消息到达后立即将这些信息呈现给用户。例如，向用户发送了一条新消息，在您的网站标题中显示一个带有计数的气泡。

这些天你几乎在每个网站上都能看到这些东西，我不确定实现这种功能的最佳方式。

我最初的想法是编写一些 ajax 调用，然后将其包装在一个`setInterval`调用中，以便每 30 秒左右请求一次。这里明显的问题是 a) 您必须等待 30 秒才能收到请求，并且 b) 您可能在一天内向服务器请求数百次而没有实际显示的新内容。

我的第二个想法是使用 EventListeners，因为它们似乎更理想，因为据我了解，它们仅在服务器告诉它某些内容时才发出请求。但我不是 100% 确定如何构建这样的东西。任何人都可以举出一个简单的例子或指出一些可以作为这样的基础的东西吗？

所以要澄清我想要做什么：

当发生新的事情（例如发送消息或创建通知）时，这将发送一个事件，事件侦听器拾取并更新页面上的某些内容，显示带有信息的小弹出窗口或更新气泡，例如`Messages (2)`

我将使用 CakePHP 和 jQuery 来实现它。所以任何具体的事情都会很棒......希望有人可以帮助我。

本质上，我是在询问 EventListener 与 setInterval 以及它如何与 ajax 调用一起工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:45:55.453

正如 Alex Ball 所建议的，您应该研究 COMET 编程技术，并查看这个问题的答案[Simple comet example using php and jquery](https://stackoverflow.com/questions/1320542/simple-comet-example-using-php-and-jquery)。没有真正的“简单”答案来实现您所要求的有效技术，但最有效的方法是使用 iframe。使用 iframe 将允许您与服务器（PHP 端）建立持久连接。在这里您将能够检查新消息（查询新消息），如果有，返回您的数据。您的 ajax 调用（成功函数）将处理此数据，然后再发回服务器。如果没有，那么您将不得不循环。同样，有效的 COMET 编程技术实施起来并不简单。不过，这里有一些有用的例子： [http://www.webreference.com/programming/javascript/rg30/index.html](http://www.webreference.com/programming/javascript/rg30/index.html)， [http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)， setInerval 对聊天无效，也许是通知。

COMET 技术并非特定于 CakePHP。

# java - 自定义 JavaFX 2.1 的 ProgressIndicator

> ID：11274589
> 
> 赞同：1
> 
> 时间：2012-06-30T13:53:10.203
> 
> 标签：java, css, styles, javafx

如何从 JavaFX 2.1 自定义 ProgressIndicator？我试图找到一些示例，但找不到任何示例？我想将颜色从默认的蓝色更改为黑色（但保持渐变效果），并从完成时删除“完成”文本。

我查看了 Javafx CSS 参考指南，但不知道如何设置节点子结构的样式。对于下一个示例：我尝试过

```
.progress-indicator .indicator { -fx-background-color: #000000; } 
```

但似乎不起作用。ProgressIndicator 的 JavaFX css 参考

```
Style class: progress-indicator

The ProgressBar control has all the properties of Region and Node.

Substructure

indicator — Region
progress — Region
tick — Region 
```

# python - 使用py2exe构建python时导入错误

> ID：11274596
> 
> 赞同：3
> 
> 时间：2012-06-30T13:53:33.277
> 
> 标签：python, py2exe

我正在尝试制作一个小脚本来远程管理 Windows 计算机（目前只关闭）。我使用的方法涉及[webapp2](http://webapp-improved.appspot.com/)服务器。我想将我的第一次尝试编译成 .exe。我遇到的问题是，成功编译后我去运行它并返回错误：

```
Traceback (most recent call last):
 File "web2.py", line 2, in <module>
 File "webapp2.pyc", line 25, in <module>
 File "webob\__init__.pyc", line 1, in <module>
 File "webob\datetime_utils.pyc", line 10, in <module>
ImportError: No module named email.utils 
```

我也用 cx_Freeze 试过这个，结果相似。我在[使用 py2exe 捆绑时遵循了导入错误中](https://stackoverflow.com/questions/6786473/import-error-while-bundling-using-py2exe)给出的建议，但无济于事。

万一它有任何用处是我的代码：

```
import cgi
import webapp2
import os
import socket

def ip():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.connect(('google.com', 0))
    return s.getsockname()[0]

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""
          <html>
            <body>
              <form action="/shutdown" method="link">
                <div><input type="submit" value="Shutdown"></div>
              </form>
            </body>
          </html>""")

class shutdown(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('<html><body>Shutting down...<pre>')
        self.response.out.write('</pre></body></html>')
        os.system("shutdown -p -f")

app = webapp2.WSGIApplication([('/', MainPage),
                              ('/shutdown', shutdown)],
                              debug=True)
def main():
    from paste import httpserver
    httpserver.serve(app, host=ip(), port='80')

if __name__ == '__main__':
    main() 
```

先感谢您。

编辑：

我发现使用 modulefinder 有很多模块没有被导入。但是，我不知道这是在正常运行时发生还是仅在导入时发生。

[http://pastebin.com/s0U9WHJ6](http://pastebin.com/s0U9WHJ6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:24:10.870

我发现问题在于我假设 py2exe 会像解释器一样导入 webob。事实上，我需要将 webob 文件夹放在我正在构建的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:02:52.377

我不确定，但您可以尝试在 setup.py 中专门包含 email.utils，方法是在导入 py2exe 的脚本中的 setup 函数调用中添加以下参数：

```
options={"py2exe": {'includes': ["email.utils"]}} 
```

那，或者您可以在导入 webapp2 之前尝试专门导入它，例如第 1 行：

```
import email.utils
import cgi
import webapp2 
```

如果这表明它找不到不同的模块，请尝试将模块添加到包含列表中：

```
options={"py2exe": {'includes': ["email.utils", "othermodulename"]}} 
```

或专门再次导入它。希望这可以帮助！:-)

# android - 操作栏夏洛克不工作

> ID：11274599
> 
> 赞同：5
> 
> 时间：2012-06-30T13:54:02.593
> 
> 标签：android, actionbarsherlock

我在开始使用 ActionBarSherlock 时遇到问题。我下载了 4.1.0 版本并按照以下教程进行安装。

[http://www.youtube.com/watch?v=4GJ6yY1lNNY](http://www.youtube.com/watch?v=4GJ6yY1lNNY)

我面临的问题是每当我创建一个新项目并将 ActionbarSherlock 的库项目添加到其中时。我收到以下错误。

```
Description Resource    Path    Location    Type
The container 'Android Dependencies' references non existing library 'C:\Work\JakeWharton-ActionBarSherlock-4.1.0-0-g9598f2b\JakeWharton-ActionBarSherlock-88fc341\library\bin\com_actionbarsherlock.jar'   myapp       Build path  Build Path Problem 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:31:06.610

我刚刚遇到了同样的问题：请求了一个 .jar 文件，但不存在。此外，该文件不存在也没关系，因为我们想使用 Android-Library Project 而不是包含的 jar-library。

如果缺少导入（.jar 或库项目）将是问题的根源，Aqif Hamid 描述的步骤非常好。但我发现此错误的原因是您必须将两个项目（AndroidBar Sherlock 和您自己的 Android 项目）设置为**Java 合规级别 1.6**

为此，请进入 Project Properties => Java Compiler 并将级别设置为 1.6 当然，您必须在计算机上安装 JDK 1.6...

希望这对你也有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T22:22:30.807

它唯一对我有用的是在 Java Compiler Tab Compilance Level --> 1.7（它是 1.6）的 Properties 中选择。之后是 Android 工具，修复项目属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:04:05.757

执行以下操作：

*   就像你有`bin`，`res`文件夹。右键单击您的项目并添加一个名为“libs”的文件夹（如果 libs 文件夹不存在）。
*   然后将您的文件复制粘贴`com_actionbarsherlock.jar`到此`libs`文件夹中。
*   右键单击您的`com_actionbarsherlock.jar`文件，然后单击`Add to Build Path`。
*   现在清理并构建您的项目。你应该很高兴。

**编辑：**

要将项目添加为库，请执行以下操作：

*   确保您的项目列表中有您的库项目并且它是打开的。
*   右键单击要在其中添加库项目的项目，然后选择`Porperties`.
*   单击`Android`属性窗口，现在向下滚动，您将在底部看到库部分。那里按下`Add`按钮。
*   现在将打开一个窗口，您将在其中看到库项目列表。选择您需要的项目并按`Ok`。现在该库项目必须带有绿色勾号。
*   按`Apply`和`Ok`按钮。
*   你现在应该可以走了。

问候， 阿基夫·哈米德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T20:14:59.293

我的理解是，您不能通过将 jar 添加到您的 lib 目录（或仅包含该 jar）来将 ActionBarSherlock 包含到您的项目中。您必须为 ActionBarSherlock 创建一个 android 项目，然后将其作为库链接：

1.  在 Eclipse 中创建 ActionBarSherlock 项目
2.  右键单击您的项目并转到属性
3.  `Android`在左侧窗格中选择
4.  然后在右侧窗格的底部，您可以`Add...`看到您在步骤 1 中创建的 ActionBarSherlock 项目。

如果你好奇为什么 jar 方法不起作用，我会[在这个线程中给你 Jake 的回复](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/a9BZ-ugABDA) （尽管此时已经有一个半月了）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T14:04:28.283

1 - 创建一个 libs 文件夹（与清单平行）并将 jar 放入其中

您的项目 -> 右键单击​​ -> 属性 -> Java 构建路径 -> 库 -> 添加 Jar -> yourjar.jar

如果您遇到一些问题，此[视频可能会很有用。](http://www.youtube.com/watch?v=eY_uqi_qIz0)

[http://mobile.tutsplus.com/tutorials/android/jar-for-android/](http://mobile.tutsplus.com/tutorials/android/jar-for-android/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T00:55:25.143

使用 Android 工具选项添加兼容库为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-01T01:33:53.897

清理你的 actionbarsherlock 项目。它会在重新构建时为您生成 .jar 文件。

# sql - 必须声明标量变量@tempTbl

> ID：11274605
> 
> 赞同：1
> 
> 时间：2012-06-30T13:54:32.137
> 
> 标签：sql, sql-server-2005

即使我已经尝试过其他帖子建议的仍然相同的错误，我也会收到此错误，但是当我运行 select 它工作正常...任何帮助将不胜感激

```
 ALTER PROCEDURE UpdateCustomers

    @XML AS XML

AS 
DECLARE @tempTbl TABLE(
     tblID INT ,
     Customer_name NVARCHAR(30),
     Customer_Code NVARCHAR(10)

)

INSERT INTO @tempTbl(tblID, Customer_name, Customer_Code)
SELECT
    Item.element.value('@tblID', 'int'),
    Item.element.value('@Customer_name', 'nvarchar(30)'),
    Item.element.value('@Customer_Code', 'nvarchar(10)')

FROM
    @xml.nodes('/root/item') AS Item(element)

--SELECT * FROM @tempTbl---it runs ok

UPDATE dbo.Customers
 SET
                     dbo.Customers.Customer_name =  @tempTbl.Customer_name, 
                     dbo.Customers.Customer_Code = @tempTbl.Customer_Code
from dbo.Customers
                inner join @tempTbl
                    on Customers.tblID =@tempTbl.tblID 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T13:57:01.637

尝试在 UPDATE 中为表变量设置别名

例如

```
UPDATE dbo.Customers
SET
                 dbo.Customers.Customer_name =  tmp.Customer_name, 
                 dbo.Customers.Customer_Code = tmp.Customer_Code
from dbo.Customers
            inner join @tempTbl tmp
                on Customers.tblID = tmp.tblID 
```

# haskell - 如何在haskell selenium webdriver中使用runSession：Test.WebDriver？

> ID：11274606
> 
> 赞同：3
> 
> 时间：2012-06-30T13:54:36.170
> 
> 标签：haskell, selenium, webdriver, monads

我是 Haskell 的新手（尽管我在阅读 LYAH 之后）。我不知道应该怎么做才能使用 selenium webdriver（[hackage 上的 webdriver 链接](http://hackage.haskell.org/package/webdriver)）。我很确定我应该运行这些功能之一

```
runWD :: WDSession -> WD a -> IO aSource
runSession :: WDSession -> Capabilities -> WD a -> IO aSource
withSession :: WDSession -> WD a -> WD aSource 
```

但我不明白如何获得这个定义为的 WD 结构：

```
WD (StateT WDSession IO a)   
Instances:
Monad WD     
Functor WD   
Applicative WD   
MonadCatchIO WD  
MonadIO WD   
WebDriver WD     
SessionState WD  
MonadBase IO WD  
MonadBaseControl IO WD 
```

我还想知道这个 WD 结构的目的是什么？

代码示例或指示我应该阅读有关 Haskell 的内容以了解这里发生的事情对我非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:19:06.343

参考页说那`WD`是

> WebDriver 服务器的一元接口。这个 monad 是一个简单、严格的 IO 层，在顺序命令之间线程化会话信息

所以你可以做这样的事情：

```
foo = runWD defaultSession $ do
    liftIO $ putStrLn "Hello WD"
    somethingElse
    ... 
```

# android - 单击一次按钮会被多次单击

> ID：11274608
> 
> 赞同：1
> 
> 时间：2012-06-30T13:55:10.967
> 
> 标签：android, button, onclick

我单击一个**按钮**一次，但它似乎被`onClick()`多次触发。我试过`mybutton.setClickable(false);`in `onClick()`，但它似乎不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:58:35.007

[防止小部件在短时间内被多次点击](https://stackoverflow.com/questions/4653963/prevent-a-widget-from-getting-clicked-multiple-times-in-a-short-span)

..

```
Button send = (Button) findViewById(R.id.send);
        send.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {
                if (mAllowSave) {
                    mAllowSave = false;
                    //
                }
            }
        }); 
```

并在您需要按钮处于活动状态时将 mAllowSave 设置为 true，或者可以使用 send.postDelay 再次激活它...

所以将这些行也放在 onClick 中，这样您的按钮将在比上一次单击的 1/2 秒后处于活动状态

```
send.postDelayed(new Runnable() {
        @Override
        public void run() {
            mAllowSave = true;

        }
    },  500); 
```

# php - 设计wordpress主题

> ID：11274611
> 
> 赞同：0
> 
> 时间：2012-06-30T13:55:32.323
> 
> 标签：php, mysql, wordpress

所以我只是想知道，在您将网站修改为 wordpress 网站之前，您网站的 css 在类名和 id 方面是否必须与 wordpress css 相同？就像我的意思一样，我给帖子区域的 div 赋予了与 wordpress 的类不同的类，即 post 和相同的帖子标题、日期等。如果是，如何实现？我一直在关注儿童主题，但不确定我是否走在正确的轨道上。任何建议的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:11:55.740

Wordpress 没有自己的 CSS 类。您可以制作自己的课程。你可以从这里开始：`http://www.youtube.com/watch?v=JkkooyPMB3I`然后继续接下来的部分。

# css - CSS 流体设计框未正确对齐

> ID：11274617
> 
> 赞同：0
> 
> 时间：2012-06-30T13:56:18.237
> 
> 标签：css

嗨，我正在尝试创建我的第一个流体响应布局，但我遇到了一个小问题，在右边我有一个比它旁边的盒子长的容器，所以我试图在间隙中安装一个盒子，你可以看到在这里：[http](http://www.security-vacancies.net/test/fluid_test.html) ://www.security-vacancies.net/test/fluid_test.html我正在尝试将紫色盒子和灰色盒子放在一起，但它会在新的线路上重新开始。

这是我的两个盒子的代码。

```
 #job_seach {
clear: none;
float: left;
margin-left: 2.0408%;
width: 28.5714%;
display: block;
background-color:#CCC;
 }
 #lates_jobs {
clear: both;
float: left;
margin-left: 0;
width: 40.3877%;
display: block;
background-color:#909;
    } 
```

任何建议将不胜感激谢谢。

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:03:41.607

紫色框没有空间跟随灰色框（沿着灰色框），这就是为什么它要换行。如果你想让它跟随你，你将不得不为它腾出空间。如果你想挤进去，尝试减小其他 div 和紫色框的大小。

# javascript - 在 MVC3 控制器操作中获取 javascript 推送对象数组

> ID：11274618
> 
> 赞同：2
> 
> 时间：2012-06-30T13:56:28.470
> 
> 标签：javascript, asp.net-mvc-3

这是我的 JavaScript 代码：

```
var bankOptions = {};
    var playerOptions = [];
    bankOptions["BankTotalAmount"] = $("#totalBankAmountID").val();
    bankOptions["SinglePlayerAmount"] = $("#singlePlayerAmountID").val();
    while (_playerNumber != 0) {

        if (_playerNumber == 1) {
            var player1Option = {};
            player1Option["Name"] = $("#p" + _playerNumber + "Name").val();
            player1Option["Color"] = $("#p" + _playerNumber + "Color").val();

            playerOptions.push(player1Option);
        }

        if (_playerNumber == 2) {
            var player2Option = {};
            player2Option["Name"] = $("#p" + _playerNumber + "Name").val();
            player2Option["Color"] = $("#p" + _playerNumber + "Color").val();

            playerOptions.push(player2Option);
        }

        if (_playerNumber == 3) {
            var player3Option = {};
            player3Option["Name"] = $("#p" + _playerNumber + "Name").val();
            player3Option["Color"] = $("#p" + _playerNumber + "Color").val();

            playerOptions.push(player3Option);
        }

        if (_playerNumber == 4) {
            var player4Option = {};
            player4Option["Name"] = $("#p" + _playerNumber + "Name").val();
            player4Option["Color"] = $("#p" + _playerNumber + "Color").val();

            playerOptions.push(player4Option);
        }

        _playerNumber--;
    }
    alert(playerOptions);
    $.ajax({
        url: "/StartOption/setOptions/",
        contentType: 'application/json',
        data: JSON.stringify({ bankOptions: bankOptions, playerOptions: playerOptions }),
        type: "POST",
        timeout: 10000,
        success: function (result) {

        }
    }); 
```

我有这个控制器类

```
public class StartOptionController : Controller
    {
        private MonopolyDB db = new MonopolyDB();

        //
        // GET: /StartOption/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult setOptions(BankOptions bankOptions, Playeroptions[] playerOptions)
        {
            //int length = (int)playerOptions.GetType().InvokeMember("length", BindingFlags.GetProperty, null, playerOptions, null);
            BankAccount bankaccount = new BankAccount();
            bankaccount.ID = 1;
            bankaccount.TotalAmmount = bankOptions.BankTotalAmount;
            db.BankAccount_Table.Add(bankaccount);
            db.SaveChanges();

            //Here i want to get each (player1Option, player2Option...) object array from that playerOptions object array

            //return RedirectToAction("Index");

            return View();
        }

    }
    public class BankOptions
    {
        public int BankTotalAmount { get; set; }
        public int SinglePlayerAmount { get; set; }
    }
    public class Playeroptions
    {
        public string Name { get; set; }
        public string Color { get; set; }
    } 
```

我的问题是如何在 setOptions 操作中获取我推入 playerOptions 对象数组的那些对象数组？

就像我想从 playerOptions 对象数组中将每个玩家信息保存在我的数据库中一样，我在我的 javascript 代码中推送每个玩家信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:44:06.430

好吧，首先要让它变得容易，我想建议改变你的行动标志

从

```
public ActionResult setOptions(BankOptions bankOptions, Playeroptions[] playerOptions) 
```

到

```
public ActionResult setOptions(BankOptions bankOptions, List<PlayerOptions> playerOptions) 
```

这样就可以轻松处理数组的每个元素，框架序列化这个对象没有问题。

现在回答你的问题，你可以像这样迭代数组

```
 [HttpPost]
    public ActionResult setOptions(BankOptions bankOptions, Playeroptions[] playerOptions)
    {
        //int length = (int)playerOptions.GetType().InvokeMember("length", BindingFlags.GetProperty, null, playerOptions, null);
        BankAccount bankaccount = new BankAccount();
        bankaccount.ID = 1;
        bankaccount.TotalAmmount = bankOptions.BankTotalAmount;
        db.BankAccount_Table.Add(bankaccount);
        db.SaveChanges();

        //Here i want to get each (player1Option, player2Option...) object array from that playerOptions object array
        for ( int i = 0 ; i< playerOptions.Length, i++)
        {
            playerOptions[i]; //<-- this give's the specific element
        }

        //return RedirectToAction("Index");

        return View();
    } 
```

不过，如果您遵循我的建议并更改您的操作符号，您可以像这样迭代您的代码

```
 [HttpPost]
    public ActionResult setOptions(BankOptions bankOptions, List<PlayerOptions> playerOptions)
    {
        //int length = (int)playerOptions.GetType().InvokeMember("length", BindingFlags.GetProperty, null, playerOptions, null);
        BankAccount bankaccount = new BankAccount();
        bankaccount.ID = 1;
        bankaccount.TotalAmmount = bankOptions.BankTotalAmount;
        db.BankAccount_Table.Add(bankaccount);
        db.SaveChanges();

        //Here i want to get each (player1Option, player2Option...) object array from that playerOptions object array
        foreach( var item in playerOptions){
             item //<--- in this variable you have the element PlayerOption
        }

        //return RedirectToAction("Index");

        return View();
    } 
```

# ravendb - 将所有索引定义从单个文件推送到 RavenDB

> ID：11274620
> 
> 赞同：0
> 
> 时间：2012-06-30T13:56:57.817
> 
> 标签：ravendb, disaster-recovery

在 RavenDB 中，curl 命令会`ravenServer.com/databases/myApp/indexes` 返回数据库所有索引定义的漂亮列表。

对于我的灾难恢复方案，是否有一个 http 命令可以将它们全部恢复。还是我必须解析每一个并发出文档中概述的命令？

我的应用程序正在使用`HttpApi`而不是使用 .Net 来创建索引，或者我会一直推送它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:52:55.437

不，您必须一次创建一个。请注意，您可以使用 smuggler 工具，它会为您执行此操作。它是 RavenDB 附带的命令行应用程序。

# iphone - Xcode 3 和 Xcode 4，有什么区别？

> ID：11274626
> 
> 赞同：0
> 
> 时间：2012-06-30T13:57:27.317
> 
> 标签：iphone, ios, xcode, xcode4

我想开始为苹果 iPhone 和 iPad 开发游戏，但我有一些相关的问题。我有运行 MAC OS X Leopard 10.5.5 的 mac。因此，Leopard 10.5.5 唯一支持的 Xcode 版本是 Xcode 3，所以我想知道：

可以开始在 Xcode 3 中开发吗？它适用于所有 iPhone 和 iPad 版本吗？还是我必须购买运行 Lion 的新 mac 才能安装 Xcode 4 并在其上开发 App？

使用 Xcode 3 的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:54:25.093

> 可以开始在 Xcode 3 中开发吗？

没关系，但是在 Xcode 3 中，您无法利用 Xcode 4 中的许多新功能，例如 ARC 和故事板。此外，Xcode 3 不支持最新版本的 Objective-C；它支持 Objective-C 2.0，它缺少许多随着 iOS 6 发布而引入的新功能。

> 它适用于所有 iPhone 和 iPad 版本吗？

不可以。使用 Xcode 3，您只能为旧设备开发应用程序，我相信每个 iOS 版本都低于 4.0（不确定）。

> 还是我必须购买运行 Lion 的新 mac 才能安装 Xcode 4 并在其上开发 App？

我建议您购买运行 Lion 的新 mac 来安装 Xcode 4，以便及时了解 Objective-C 和 Xcode 的最新功能，以免在竞争开发者使用手机的最新功能时落后创造更好的全方位用户体验。

> 使用 Xcode 3 的缺点是什么？

*   在 Xcode 3 中，Xcode 和 Interface Builder 是分开的，与 Xcode 4 相反，它们是集成的。
*   Xcode 3 不支持故事板，这大大简化了界面设计过程。
*   Xcode 3 不支持 ARC，这大大简化了内存管理。
*   Xcode 4 有一个名为 Assistant Editor 的新功能，它补充了您正在处理的文件。例如，如果您正在处理名为“MyClass”的类的头文件，则助手编辑器将显示实现文件。
*   Xcode 4 比 Xcode 3 有更好的自动完成功能；它支持新的“Fix-It”功能，不仅可以指出代码中的错误，还可以提供修复这些错误的解决方案。
*   Xcode 4 与 Git 一起提供强大的源代码控制管理。

有关 Xcode 3 和 Xcode 4 之间差异的更多信息，请参见此处：http: [//developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Introduction/Introduction.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:59:47.083

您必须将 xcode 更新为 4，因为您将无法使用 iOS5 功能，而且要将您的应用程序分发到 Appstore，您需要更新版本的 xcode

# sql - sql where 子句与 case & like

> ID：11274632
> 
> 赞同：0
> 
> 时间：2012-06-30T13:58:23.930
> 
> 标签：sql, mysqli

块引用

```
DECLARE @Symbol nvarchar(50);
DECLARE @EnDate1 Datetime;
DECLARE @StDate1 Datetime;
SET @Symbol = 'RIM12f'
SET @EnDate1 = '05/08/2012 9:00'
SET @StDate1 = '05 / 07 / 2012 12 : 00'
SELECT  *
FROM   Siri
WHERE (DATEADD(D, 0, DATEDIFF(D, 0, Date)) BETWEEN @StDate1 AND @EnDate1)
  AND  CASE Symbol = WHEN @Symbol = 'ALL'
                     THEN Symbol
                     ELSE Symbol LIKE LEFT(@Symbol, len(@Symbol) - 3) + '%'
       END 
```

它不一样，但它可以与 else @Symbol 一起使用，但我需要所有符号，如 LEFT(@Symbol, len(@Symbol) - 3) + '%' if @Symbol 不是所有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:16:49.847

修改你的案例表达式：

```
 Symbol LIKE CASE @Symbol WHEN 'ALL'
                     THEN Symbol
                     ELSE LEFT(@Symbol, len(@Symbol) - 3) + '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:17:21.900

```
DECLARE @Symbol nvarchar(50); 
DECLARE @LikeSymbol nvarchar(50); 

DECLARE @EnDate1 Datetime; 
DECLARE @StDate1 Datetime; 
SET @Symbol = 'RIM12f' 
SET @EnDate1 = '05/08/2012 9:00' 
SET @StDate1 = '05 / 07 / 2012 12 : 00' 
SET @LikeSymbol = LEFT(@Symbol, length(@Symbol) - 3) + '%'
SELECT  * 
FROM   Siri 
WHERE (DATEADD(D, 0, DATEDIFF(D, 0, Date)) BETWEEN @StDate1 AND @EnDate1) 
AND (
(@Symbol = 'All')
OR
(Symbol Like @LikeSymbol)
) 
```

猜测是您查询的意图还远不清楚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:29:52.330

你不能`CASE`同时拥有`=`和嵌套`LIKE`..你可以使用 LIKE 或使用`OR`和`AND`构造..（如建议的@Tony Hopkinson）

这是修改后的案例：

```
Symbol like CASE WHEN @Symbol = 'ALL'
                     THEN Symbol
                     ELSE LEFT(@Symbol, len(@Symbol) - 3) + '%'
END 
```

# javascript - jQuery on(); 功能

> ID：11274634
> 
> 赞同：5
> 
> 时间：2012-06-30T13:58:26.507
> 
> 标签：javascript, jquery

我正在学习 Backbone，并且在 on() 函数上遇到了一些问题。但实际上这是一个非常基本的 JavaScript 问题。

为什么下面的第一行代码有效，而第二行无效？使用第二行，渲染函数永远不会被触发。注意括号。

**作品**

```
this.collection.on( 'reset', this.render, this ); 
```

**失败**

```
this.collection.on( 'reset', this.render(), this ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T14:00:15.973

`this.render()`执行函数（因此在您的情况下，您正在传递从此函数返回的数据），而`this.render`处理程序是函数。

# c# - 无法获取元素

> ID：11274637
> 
> 赞同：2
> 
> 时间：2012-06-30T13:58:38.300
> 
> 标签：c#, xml, linq

我的 .XML 数据库如下所示：

```
<root>
    <Lemma>
        <Lemma.LemmaSign>cat</Lemma.LemmaSign> 
        <Lemma.PartOfSpeech>(noun)</Lemma.PartOfSpeech> 
        <Lemma.UsageLabel>(kt)</Lemma.UsageLabel>
        <Sense>
            <TE>
                <TE.TE> animal</TE.TE>
            </TE>
            <Pronunciation>/ 
                <Pronunciation.Pronunciation>[coot]</Pronunciation.Pronunciation>/
            </Pronunciation>
            :
            <Example>
                <Example.Example> it's a cat</Example.Example>
                <Example.Translation> it's animal</Example.Translation>
                |
            </Example>
        </Sense>
    </Lemma>
</root> 
```

这就是我的代码：

```
var elements = XElement.Load("objects.xml");
var query1 = from query in elements.Descendants("Lemma")
            let null_LemmaSign = query.Element("Lemma.LemmaSign")
            let null_TE = query.Element("TE.TE")
            where wyszuk == query.Element("Lemma.LemmaSign").Value
            select new
            {
              word = null_LemmaSign == null ? "none" : null_LemmaSign.Value,
              te = null_TE == null ? "none" : null_TE.Value,
            };

foreach (var e in query1)
{
 MessageBox.Show(e.word.ToString() + " - " + e.te.ToString());
} 
```

问题是输出看起来像： cat - none 并且应该是 cat - animal

如何从我的 .xml 中获取 TE.TE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:05:03.007

您的代码假定它`<TE.TE>`是 的直接子代`<Lemma>`，但事实并非如此。相反，`<TE.TE>`是 的孩子`<TE>`， 是 的孩子`<Sense>`， 是 的孩子`<Lemma>`。你的代码应该像这样改编：

```
let null_TE = query.Element("Sense").Element("TE").Element("TE.TE") 
```

为简单起见，您可以按照 jimmy_keen 的建议使用`Descendants`：

```
let null_TE = query.Descendants("TE.TE").FirstOrDefault() 
```

# wordpress - 子页面列出时未显示页脚

> ID：11274639
> 
> 赞同：0
> 
> 时间：2012-06-30T13:59:21.153
> 
> 标签：wordpress

我创建了一个自定义页面模板，并在使用此代码时不显示这些“带有缩略图的子页面列表”代码页脚。

```
 <!------------------section-container------------------>
 <div id="section-container">
 <?php
 $pages = get_pages('child_of='.$post->ID.'&parent='.$post->ID.'&sort_column
  =menu_order&sort_order=asc');
   foreach($pages as $page)
  { ?>
    <div class="section-page">
  <div class="section-thumb"><a href="<?php echo get_page_link($page->ID) ?>" title="                            
   <?php echo $page->post_title ?>">
   <?php echo get_the_post_thumbnail($page->ID, array(150,100)); ?></a>
   </div>
   </div><!--section-text-->
    </div><!--section-page-->
   <?php } ?>
   </div>
     <!------------------section-container------------------> 
```

示例：[http ://www.behance.in/our-work/](http://www.behance.in/our-work/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:10:34.157

您是否还包括`<?php get_footer(); ?>`在您的自定义模板中？

也许您在包含自定义代码时粘贴了它？

如果要包含 header.php、sidebar.php 和 footer.php，Wordpress 模板需要显式调用 get_header、get_sidebar 和 get_footer。

# java - 为什么我的 Android 应用程序播放后显示“无法播放视频”？

> ID：11274640
> 
> 赞同：5
> 
> 时间：2012-06-30T13:59:25.677
> 
> 标签：java, android, mp4, android-videoview

我有一个简单的应用程序，它以在 VideoView 中播放 mp4 视频的启动屏幕活动开始。视频完成后，我正在尝试通过 OnCompletionListener 开始一个新活动。

当我启动应用程序时，视频完美运行；按预期播放声音和音频。视频播放完毕后，应用程序会显示一个标题为“无法播放视频”的对话框，并在按下“确定”按钮后正常继续。当我将音频添加到使用 Adob​​e After Effects 创建的 mp4 时，似乎只会出现此问题。我使用了完全相同的视频减去音轨，它不会抛出这个错误。我假设文件的编码很好，因为它在显示对话框之前完全播放。

这是我的代码：

```
public class Splash extends Activity {

 @Override  
 public void onCreate(Bundle savedInstanceState) {  

     super.onCreate(savedInstanceState);
     setContentView(R.layout.splash);

     Uri video = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.audio_intro); 

     VideoView videoview = (VideoView) findViewById(R.id.splash_view);
     videoview.setKeepScreenOn(true);  
     videoview.setVideoURI(video);

     videoview.setOnCompletionListener(new OnCompletionListener() {  
           public void onCompletion(MediaPlayer mp) {  
                 Intent intent = new Intent(Splash.this, Menu.class);
                 startActivity(intent);
                 finish();
           }
     });

     videoview.requestFocus();
     videoview.start();
 }

} 
```

这是 LogCat 显示的内容：

```
06-30 14:49:33.095: V/MediaPlayer-JNI(21544): native_setup
06-30 14:49:33.095: V/MediaPlayer(21544): constructor
06-30 14:49:33.095: V/MediaPlayer(21544): setListener
06-30 14:49:33.095: I/MediaPlayer(21544): path is null
06-30 14:49:33.095: V/MediaPlayer-JNI(21544): setDataSourceFD: fd 54
06-30 14:49:33.095: V/MediaPlayer(21544): setDataSource(54, 2521, 173889)
06-30 14:49:33.110: V/MediaPlayer(21544): setVideoSurfaceTexture
06-30 14:49:33.110: V/MediaPlayer-JNI(21544): setAudioStreamType: 3
06-30 14:49:33.110: V/MediaPlayer(21544): MediaPlayer::setAudioStreamType
06-30 14:49:33.110: V/MediaPlayer(21544): setVideoSurfaceTexture
06-30 14:49:33.110: V/MediaPlayer(21544): prepareAsync
06-30 14:49:33.140: V/MediaPlayer(21544): message received msg=5, ext1=480, ext2=270
06-30 14:49:33.140: V/MediaPlayer(21544): New video size 480 x 270
06-30 14:49:33.140: V/MediaPlayer(21544): callback application
06-30 14:49:33.140: V/MediaPlayer(21544): back from callback
06-30 14:49:33.140: V/MediaPlayer(21544): message received msg=1, ext1=0, ext2=0
06-30 14:49:33.140: V/MediaPlayer(21544): prepared
06-30 14:49:33.140: V/MediaPlayer(21544): callback application
06-30 14:49:33.140: V/MediaPlayer(21544): back from callback
06-30 14:49:33.145: I/MediaPlayer(21544): mOnVideoSizeChangedListener. Send MEDIA_SET_VIDEO_SIZE message.
06-30 14:49:33.145: V/MediaPlayer(21544): getVideoWidth
06-30 14:49:33.145: V/MediaPlayer-JNI(21544): getVideoWidth: 480
06-30 14:49:33.145: V/MediaPlayer(21544): getVideoHeight
06-30 14:49:33.145: V/MediaPlayer-JNI(21544): getVideoHeight: 270
06-30 14:49:33.145: I/MediaPlayer(21544): mOnPreparedListener. Send MEDIA_PREPARED message.
06-30 14:49:33.145: D/MediaPlayer(21544): getMetadata
06-30 14:49:33.145: V/MediaPlayer(21544): getVideoWidth
06-30 14:49:33.145: V/MediaPlayer-JNI(21544): getVideoWidth: 480
06-30 14:49:33.145: V/MediaPlayer(21544): getVideoHeight
06-30 14:49:33.145: V/MediaPlayer-JNI(21544): getVideoHeight: 270
06-30 14:49:33.170: I/MediaPlayer(21544): sendBroadcast android.media.IMediaPlayer.videoexist
06-30 14:49:33.170: V/MediaPlayer-JNI(21544): start
06-30 14:49:33.170: V/MediaPlayer(21544): start
06-30 14:49:37.915: V/MediaPlayer(21544): message received msg=100, ext1=1, ext2=-1007
06-30 14:49:37.915: E/MediaPlayer(21544): error (1, -1007)
06-30 14:49:37.915: V/MediaPlayer(21544): callback application
06-30 14:49:37.915: V/MediaPlayer(21544): back from callback
06-30 14:49:37.915: E/MediaPlayer(21544): Error (1,-1007)
06-30 14:49:37.915: D/VideoView(21544): Error: 1,-1007 
```

我希望有人可以帮助我，因为我已经尝试了很多方法来解决这个问题，但似乎在任何地方都找不到类似的问题被提及/解决。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T14:27:12.177

只是一个想法：我建议尝试使用视频转换器将视频转换，例如[http://www.wondershare.com/pro/media-converter.html](http://www.wondershare.com/pro/media-converter.html)，（从 mp4）再次转换为 mp4，以确保您将音频（和视频）获取到 Android 支持的标准，如[http://developer.android.com/guide/appendix/media-formats.html#core](http://developer.android.com/guide/appendix/media-formats.html#core)中所列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:43:05.877

另一个随机猜测，在完成侦听器中完成您的活动之前调用 videoview.stopPlayback :)

编辑：对话框出现在您的完成侦听器之前还是之后？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T18:00:38.267

(1, -1007) 错误表示：MEDIA_ERROR_UNKNOWN - “文件或网络相关的操作错误。”

这可能来自损坏的文件

另请参阅 android.media.MediaPlayer.OnErrorListener#onError [http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html#onError的 javadoc](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html#onError)

```
@param what the type of error that has occurred:
MEDIA_ERROR_UNKNOWN
MEDIA_ERROR_SERVER_DIED

@param extra an extra code, specific to the error. Typically implementation dependent.
MEDIA_ERROR_IO
MEDIA_ERROR_MALFORMED
MEDIA_ERROR_UNSUPPORTED
MEDIA_ERROR_TIMED_OUT 
```

# java - 同步线程执行顺序的变化

> ID：11274643
> 
> 赞同：0
> 
> 时间：2012-06-30T13:59:37.520
> 
> 标签：java, multithreading, synchronization

我正在执行一个[java 同步示例](http://www.tutorialspoint.com/java/java_thread_synchronization.htm)：

**线程调用代码：**

```
Caller ob1 = new Caller(target, "Hello");
Caller ob2 = new Caller(target, "Synchronized");
Caller ob3 = new Caller(target, "World"); 
```

**输出：**

```
[你好]
[世界]
[同步​​]

```

为什么“Synchronized”会最后打印，尽管它是在 2nd 中调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:04:16.550

执行顺序无法保证。这是JVM的自由裁量权。

调用 Thread 实例的 start() 方法并不能保证它会在方法调用之后立即运行。

# sql - T-SQL 获取两个日期之间的价格

> ID：11274651
> 
> 赞同：1
> 
> 时间：2012-06-30T14:00:41.373
> 
> 标签：sql, tsql, datetime, duplicate-data

我正在制作一个小型数据库交易系统，但我遇到了重复问题，我不确定如何解决。基本上，我有一张价格表，其中包含设定价格的日期时间，我也有一张表，其中包含进行交易的时间。我想根据交易日期时间获得正确的价格。

```
USE [a_trading_system]
GO

/****** Object:  Table [dbo].[Trade]    Script Date: 06/30/2012 14:49:44 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[Trade](
[trade_id] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
[trade_volume] [int] NOT NULL,
[trade_action] [varchar](5) NOT NULL,
[trade_date] [datetime] NOT NULL,
[timestap] [timestamp] NOT NULL,
[trader_id] [int] NOT NULL,
[exch_ticker] [varchar](8) NOT NULL,
CONSTRAINT [PK_Trades] PRIMARY KEY CLUSTERED 
(
[trade_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Trade]  WITH CHECK ADD  CONSTRAINT [FK_Trade_Contract] FOREIGN   KEY([exch_ticker])
REFERENCES [dbo].[Contract] ([exch_ticker])
GO

ALTER TABLE [dbo].[Trade] CHECK CONSTRAINT [FK_Trade_Contract]
GO

ALTER TABLE [dbo].[Trade]  WITH CHECK ADD  CONSTRAINT [FK_Trade_Trader] FOREIGN   KEY([trader_id])
REFERENCES [dbo].[Trader] ([trader_id])
GO

ALTER TABLE [dbo].[Trade] CHECK CONSTRAINT [FK_Trade_Trader]
GO

ALTER TABLE [dbo].[Trade] ADD  CONSTRAINT [DF_Trades_trade_id]  DEFAULT (newid()) FOR [trade_id]
GO

USE [a_trading_system]
GO

/****** Object:  Table [dbo].[Contract]    Script Date: 06/30/2012 14:56:19 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[Contract](
[exch_ticker] [varchar](8) NOT NULL,
[exch_name] [varchar](50) NULL,
[portfolio_id] [varchar](8) NOT NULL,
[region_cd] [varchar](5) NULL,
 CONSTRAINT [PK_Contract] PRIMARY KEY CLUSTERED 
(
[exch_ticker] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Contract]  WITH CHECK ADD  CONSTRAINT [FK_Contract_portfolio]    FOREIGN KEY([portfolio_id])
REFERENCES [dbo].[portfolio] ([portfolio_id])
GO

ALTER TABLE [dbo].[Contract] CHECK CONSTRAINT [FK_Contract_portfolio]
GO

ALTER TABLE [dbo].[Contract]  WITH CHECK ADD  CONSTRAINT [FK_Contract_region] FOREIGN   KEY([region_cd])
REFERENCES [dbo].[Region] ([region_cd])
GO

ALTER TABLE [dbo].[Contract] CHECK CONSTRAINT [FK_Contract_region]
GO

USE [a_trading_system]
GO

/****** Object:  Table [dbo].[price_details]    Script Date: 06/30/2012 14:58:37 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[price_details](
[price_id] [int] IDENTITY(1,1) NOT NULL,
[exch_ticker] [varchar](8) NOT NULL,
[price_set_date] [datetime] NOT NULL,
[buy_price] [decimal](7, 2) NOT NULL,
[sell_price] [decimal](7, 2) NOT NULL,
 CONSTRAINT [PK_price_detail] PRIMARY KEY CLUSTERED 
(
[price_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[price_details]  WITH CHECK ADD  CONSTRAINT    [FK_price_details_Contract] FOREIGN KEY([exch_ticker])
REFERENCES [dbo].[Contract] ([exch_ticker])
GO

ALTER TABLE [dbo].[price_details] CHECK CONSTRAINT [FK_price_details_Contract]
GO 
```

**看法**

```
USE [a_trading_system]
GO

/****** Object:  View [dbo].[V_all_uk]    Script Date: 06/30/2012 14:39:18 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER VIEW [dbo].[V_all_uk]
AS

SELECT distinct
co.exch_ticker,
--co.region_cd, 
po.portfolio_type, 
r.region_name, 
r.currency,
t.trade_id,
t.trade_volume,
t.trade_action,
t.trade_date,
pr.buy_price,

--(select distinct pr.buy_price from price_details pr
--where pr.price_set_date <= t.trade_date or  pr.price_set_date >= t.trade_date) as    price_details,

--MIN(t.trade_date) as trade_date,
--pr.buy_price,
--pr.sell_price,

--pr.price_set_date, --This is the cause of duplication
--pr.price_set_time,case when t.trade_date IS NOT NULL then 

--case 
--when t.trade_action = 'Buy' then 
--t.trade_volume * max(pr.buy_price)
--else
--case when trade_action = 'Sell' then
--t.trade_volume * max(pr.sell_price)
--end 
--end as 'trade_value' ,
tr.trader_name,
tr.trader_address, 
tr.phone
FROM dbo.Contract as co 
INNER JOIN dbo.Portfolio as po ON co.portfolio_id = po.portfolio_id 
INNER JOIN dbo.region as r ON co.region_cd = r.region_cd 
INNER JOIN dbo.Trade as t ON co.exch_ticker = t.exch_ticker 
INNER JOIN dbo.trader as tr ON t.trader_id = tr.trader_id
inner join dbo.price_details as pr on pr.exch_ticker = t.exch_ticker

where r.region_cd = 'UK'

--group by 

--co.exch_ticker,
--co.region_cd, 
--po.portfolio_type, 
--r.region_name, 
--r.currency,
--t.trade_id,
--t.trade_volume,
--t.trade_action,
--pr.buy_price,
--pr.sell_price,
--tr.trader_name,
--tr.trader_address, 
--tr.phone

GO 
```

如果您还需要查看数据，这些是三个主要表，因为我通常不会在此网站上发布 SQL 问题。

**解释**

如果价格设置为 12:20，价格为 100，则 12:40 价格为 80。这是两个日期范围。因此，如果我在 12:30 买入，那么我将以 100 的价格买入，因为那是最后的价格。我也在视图中进行连接，以便查看所有数据。我现在会发布。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:43:16.783

要获取特定交易日期之前的最新价格：

```
select buy_price, sell_price
  from price_details
  where exch_ticker = @exch_ticker and price_set_date =
    ( select max( price_set_date )
        from price_details
        where exch_ticker = @exch_ticker and price_set_date <= @trade_date ) 
```

您可能想在`exch_ticker`/ `trade_date`(desc) 上添加一个索引到`price_details`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:28:52.600

以下假设 SQL Server 2005 或更高版本。

这个想法是首先加入`Trade`并`price_details`过滤掉时间大于相应交易时间的价格：

```
SELECT ...
FROM dbo.Trade t
  INNER JOIN dbo.price_details pr ON pr.exch_ticker = t.exch_ticker 
```

以上将为您设置一行，其中每笔交易都获得了截至交易时间的所有价格。现在只需对价格进行排名并获得最新的价格：

```
WITH trade_prices AS (
  SELECT
    t.*,                -- actually you might want to review the list
    pr.price_set_date,  -- of columns being pulled from the two tables
    pr.buy_price,
    pr.sell_price,
    rnk = ROW_NUMBER() OVER (PARTITION BY t.trade_id ORDER BY pr.price_set_date DESC)
  FROM dbo.Trade t
    INNER JOIN dbo.price_details pr ON pr.exch_ticker = t.exch_ticker
)
SELECT *
FROM trade_prices
WHERE rnk = 1 
```

要将其合并到您的视图中，您只需：

1）添加`trade_prices`CTE，

2) 将两个连接 to`Trade`和 to替换为 to`price_details`的连接`trade_prices`，

3）将`trade_prices.rnk = 1`条件添加到`WHERE`子句中。

当然，该`trader`表现在将被连接到`trade_prices`而不是 to `Trade`。而且您还需要将表别名`pr`和`t`视图的选择列表中更改为您选择分配给`trade_prices`.

# iphone - 使用 AVCaptureVideoDataOutput 和 AVCaptureAudioDataOutput 时的性能问题

> ID：11274652
> 
> 赞同：7
> 
> 时间：2012-06-30T14:00:44.447
> 
> 标签：iphone, ios, avcapturesession, avassetwriter

当我使用 AVCaptureVideoDataOutput 和 AVCaptureAudioDataOutput 录制音频+视频时，我遇到了延迟问题。有时视频会阻塞几毫秒，有时音频与视频不同步。

我插入了一些日志并观察到，首先我在 captureOutput 回调中得到了很多视频缓冲区，一段时间后我得到了音频缓冲区（有时我根本没有收到音频缓冲区，并且生成的视频没有声音）。如果我注释处理视频缓冲区的代码，我会毫无问题地获得音频缓冲区。

这是我正在使用的代码：

```
-(void)initMovieOutput:(AVCaptureSession *)captureSessionLocal
{   
    AVCaptureVideoDataOutput *dataOutput = [[AVCaptureVideoDataOutput alloc] init];
    self._videoOutput = dataOutput;
    [dataOutput release];

    self._videoOutput.alwaysDiscardsLateVideoFrames = NO;
    self._videoOutput.videoSettings = [NSDictionary dictionaryWithObject: [NSNumber numberWithInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange]
                                                             forKey:(id)kCVPixelBufferPixelFormatTypeKey
                                  ];     
    AVCaptureAudioDataOutput *audioOutput =  [[AVCaptureAudioDataOutput alloc] init];
    self._audioOutput = audioOutput;
    [audioOutput release];

    [captureSessionLocal addOutput:self._videoOutput];
    [captureSessionLocal addOutput:self._audioOutput];

    // Setup the queue
    dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
    [self._videoOutput setSampleBufferDelegate:self queue:queue];
    [self._audioOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);
} 
```

在这里我设置了作家：

```
-(BOOL) setupWriter:(NSURL *)videoURL session:(AVCaptureSession *)captureSessionLocal
{
    NSError *error = nil;
    self._videoWriter = [[AVAssetWriter alloc] initWithURL:videoURL fileType:AVFileTypeQuickTimeMovie
                                                         error:&error];
    NSParameterAssert(self._videoWriter);

    // Add video input  
    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:640], AVVideoWidthKey,
                                   [NSNumber numberWithInt:480], AVVideoHeightKey,
                                   nil];

    self._videoWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo
                                                                         outputSettings:videoSettings];

    NSParameterAssert(self._videoWriterInput);
    self._videoWriterInput.expectsMediaDataInRealTime = YES;
    self._videoWriterInput.transform = [self returnOrientation];

    // Add the audio input
    AudioChannelLayout acl;
    bzero( &acl, sizeof(acl));
    acl.mChannelLayoutTag = kAudioChannelLayoutTag_Mono;

    NSDictionary* audioOutputSettings = nil;          
    // Both type of audio inputs causes output video file to be corrupted.

        // should work on any device requires more space
        audioOutputSettings = [ NSDictionary dictionaryWithObjectsAndKeys:                       
                               [ NSNumber numberWithInt: kAudioFormatAppleLossless ], AVFormatIDKey,
                               [ NSNumber numberWithInt: 16 ], AVEncoderBitDepthHintKey,
                               [ NSNumber numberWithFloat: 44100.0 ], AVSampleRateKey,
                               [ NSNumber numberWithInt: 1 ], AVNumberOfChannelsKey,                                      
                               [ NSData dataWithBytes: &acl length: sizeof( acl ) ], AVChannelLayoutKey,
                               nil ];

    self._audioWriterInput = [AVAssetWriterInput 
                                        assetWriterInputWithMediaType: AVMediaTypeAudio 
                                        outputSettings: audioOutputSettings ];

    self._audioWriterInput.expectsMediaDataInRealTime = YES;    

    // add input
    [self._videoWriter addInput:_videoWriterInput];
    [self._videoWriter addInput:_audioWriterInput];

    return YES;
} 
```

这是回调：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{

    if( !CMSampleBufferDataIsReady(sampleBuffer) )
    {
        NSLog( @"sample buffer is not ready. Skipping sample" );
        return;
    }
    if( _videoWriter.status !=  AVAssetWriterStatusCompleted )
    {
        if( _videoWriter.status != AVAssetWriterStatusWriting  )
        {               
            CMTime lastSampleTime = CMSampleBufferGetPresentationTimeStamp(sampleBuffer); 
            [_videoWriter startWriting];
            [_videoWriter startSessionAtSourceTime:lastSampleTime];
        }

        if( captureOutput == _videoOutput )
        {
            if( [self._videoWriterInput isReadyForMoreMediaData] )
            {

            [self newVideoSample:sampleBuffer];

            }
        }
        else if( captureOutput == _audioOutput )
        {
            if( [self._audioWriterInput isReadyForMoreMediaData] )
            {

                 [self newAudioSample:sampleBuffer];

            }
        }
    }

}

-(void) newAudioSample:(CMSampleBufferRef)sampleBuffer
{

        if( _videoWriter.status > AVAssetWriterStatusWriting )
        {

            [self NSLogPrint:[NSString stringWithFormat:@"Audio:Warning: writer status is %d", _videoWriter.status]];
            if( _videoWriter.status == AVAssetWriterStatusFailed )
                [self NSLogPrint:[NSString stringWithFormat:@"Audio:Error: %@", _videoWriter.error]];
            return;
        }

        if( ![_audioWriterInput appendSampleBuffer:sampleBuffer] )
            [self NSLogPrint:[NSString stringWithFormat:@"Unable to write to audio input"]];

}

-(void) newVideoSample:(CMSampleBufferRef)sampleBuffer
{
    if( _videoWriter.status > AVAssetWriterStatusWriting )
    {
        [self NSLogPrint:[NSString stringWithFormat:@"Video:Warning: writer status is %d", _videoWriter.status]];
        if( _videoWriter.status == AVAssetWriterStatusFailed )
            [self NSLogPrint:[NSString stringWithFormat:@"Video:Error: %@", _videoWriter.error]];
        return;
    }

    if( ![_videoWriterInput appendSampleBuffer:sampleBuffer] )
        [self NSLogPrint:[NSString stringWithFormat:@"Unable to write to video input"]];
} 
```

我的代码有问题，为什么视频滞后？（我在 Iphone 4 ios 4.2.1 上测试它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T01:02:17.427

看起来您正在使用串行队列。音频输出队列紧随视频输出队列之后。考虑使用并发队列。

# java - 在任何情况下我应该更喜欢“易失性”而不是排他同步？

> ID：11274653
> 
> 赞同：2
> 
> 时间：2012-06-30T14:01:32.167
> 
> 标签：java, multithreading, synchronization

我知道在 Java 中使用 volatile 关键字我们会得到某种弱同步（它允许可见性更新但不提供实际锁定）。在实现并发程序时，是否有任何情况下 volatile 应优先于实际锁定。SO上有一个有点类似的问题，它说[volatile 作为同步机制](https://stackoverflow.com/questions/5953392/volatile-as-a-synchronization-mechanism)，但被标记为 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:16:10.113

如果共享状态包含在单个字段中，并且您不使用任何 get-and-set 构造（`i++`例如）来分配它，那么 volatile 就足够了。不过，大多数 volatile 用法都可以通过使用 AtomicXxx 类型来代替（它提供原子的 get-and-set 操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:26:22.763

简而言之，您应该更愿意在不需要的地方避免使用锁，因为锁会使您的程序陷入死锁，并通过从代码的关键部分排除并发性来降低性能。所以，只要情况允许，就一定要依靠`volatile`；如果您还需要像比较和交换这样的原子两步操作，请使用`AtomicReference`. 回退到`synchronized`仅适用于这是唯一选择的场景。例如，如果你需要延迟初始化一个重对象，你需要锁来防止双重初始化——但同样，不要获取已经初始化的实例（[双重检查习惯用法](https://stackoverflow.com/a/3580658/1103872)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:32:06.403

Volatile 保证所有线程都会看到任何其他线程对变量的最后一次写入，仅此而已。不涉及同步。如果您同步实例变量的读取和写入方法，那么您不必使该变量易失（所有线程都会看到最近的写入）。

# drupal - Drupal 7登录代码文件？

> ID：11274655
> 
> 赞同：0
> 
> 时间：2012-06-30T14:01:39.910
> 
> 标签：drupal, login, drupal-7, customization

嗨，我是 Drupal 的新手，正在尝试修改 drupal 登录以进行一些自定义。到目前为止，Drupal 结构对我来说还很复杂，我只需要知道：

*   登录程序的主要文件是什么？

是否可以像这样自定义登录，而不采用新的`module`创建方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:36:49.377

这取决于您所说的定制是什么意思。如果您想更改页面的外观和感觉，可以使用一些自定义主题来实现。[http://drupal.org/documentation/theme](http://drupal.org/documentation/theme)

如果你想做一些常见的事情，比如允许人们使用 OpenID 登录，那么通常有一个现有的 3rd 方模块，你可以通过谷歌搜索你需要的东西。

但是如果你想做一些比这更自定义的事情，那么你可能需要创建一个自定义模块，并使用[hook_form_alter()](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_form_alter/7)和[Form API](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)来添加/自定义字段、添加自定义验证或提交处理程序，诸如此类.

# windows-phone-7 - 在后台录制音频

> ID：11274657
> 
> 赞同：0
> 
> 时间：2012-06-30T14:01:49.003
> 
> 标签：windows-phone-7

我想知道是否有人知道在后台（**Silverlight** ，而不是 XNA ）的新**Windows Phone 7**上从设备的**麦克风****捕获音频**或任何代码来做到这一点？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:58:18.750

即使在 Silverlight 应用程序中，也可以通过`Microsoft.Xna.*`命名空间中的库访问麦克风。
后台任务不支持使用此类命名空间。请参阅[http://msdn.microsoft.com/en-us/library/hh202962(v=vs.92](http://msdn.microsoft.com/en-us/library/hh202962(v=vs.92) )

这是不可能的，并且会破坏不允许应用程序执行用户不知道的事情的安全原则。******

# mysql - NGNX、Passenger、Rails“连接到上游时资源暂时不可用”

> ID：11274660
> 
> 赞同：0
> 
> 时间：2012-06-30T14:01:56.050
> 
> 标签：mysql, ruby-on-rails-3, nginx, passenger, linode

Ruby 1.8.7, rails 3.0.1 应用程序运行良好一年多，一周没有更新。但是，突然转到应用程序返回 503 错误。数据库连接在另一个 Linode 上 - 它运行良好，我可以从问题服务器手动连接到 mysql db，这就是 nginx 访问日志所说的：

```
2012/06/30 03:20:00 [error] 2277#0: *509 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:20:12 [error] 2277#0: *511 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:20:24 [error] 2277#0: *513 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:20:36 [error] 2277#0: *515 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:20:48 [error] 2277#0: *517 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:21:00 [error] 2277#0: *519 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:21:12 [error] 2277#0: *521 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:21:24 [error] 2277#0: *523 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*"
2012/06/30 03:21:35 [error] 2277#0: *525 connect() to unix:/passenger_helper_server failed (11: Resource temporarily unavailable) while connecting to upstream, client: 192.168.255.12, server: disco, request: "GET / HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "*.*.*.*" 
```

Linode 说一切都运行良好 - 有什么想法可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:38:02.633

OK looks like there was an Amazon outage which took down our redis database:

[http://www.theregister.co.uk/2012/06/30/amazon_cloud_storm_outage/](http://www.theregister.co.uk/2012/06/30/amazon_cloud_storm_outage/)

# javascript - 如何在用户单击网页中的任何位置时收到通知

> ID：11274665
> 
> 赞同：2
> 
> 时间：2012-06-30T14:02:39.657
> 
> 标签：javascript, google-chrome-extension

我想构建一个类似于[Chrome dictionary](https://chrome.google.com/webstore/detail/mgijmajocgfcbeboacabfgobmjgjcoja)的扩展。当用户左键单击任何选项卡上的网页时，应通知我的扩展程序。

我搜索了整个 chrome.* API，但没有找到那种事件。还尝试使用此查询进行谷歌搜索：“*如何在用户单击 chrome api 中的网页时获得通知*”。未能得到任何结果。

这在 chrome api 中是否被禁止？我发现 [扩展无法收听选项卡和导航按钮](http://code.google.com/chrome/extensions/faq.html#faq-interact-chrome)，但据我了解，这与我的问题无关。

任何关于如何完成这项工作的建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:12:23.180

You'll need to attach a content script to all pages

[Google Chrome Extensions: Content Scripts](http://code.google.com/chrome/extensions/content_scripts.html)

In that script attach a listener to the document to catch all clicks (like @Jashwant said) then pass a message back to your extension to perform some behaviour:

[Google Chrome Extensions: Message Passing](http://code.google.com/chrome/extensions/messaging.html)

# php - WordPress 自定义帖子 URL 查询

> ID：11274668
> 
> 赞同：1
> 
> 时间：2012-06-30T14:03:03.740
> 
> 标签：php, wordpress

我已经在网上搜索了几个星期，脑子里嗡嗡作响，但无济于事。

我在 WordPress (v3.4) 上有一个产品数据库，我正在尝试使用 URL 查询使其可搜索。

理想情况下，这是我想要的场景：

*   域/产品 - 显示所有产品
*   domain/products?tax1=term1 - 按分类过滤产品
*   domain/products?tax1=term1&tax2=term2 - 过滤我的多个
    分类法。

post_type 称为“产品”，我目前有一个名为 products 的页面，并为其分配了一个页面模板。但是，每当我尝试使用 WordPress URL 查询时，都会将我重定向到类似 URL 的新闻帖子（例如 domain/2011/10/01/products-are-cool）。

如何创建这些过滤器并让它们正确显示结果？

更新：我想出了一个非常适合我的解决方案。

```
if(isset($_GET)) $options = $_GET;

if (!empty($options)) {
$posts = new WP_Query( array(
'post_type' => 'product',                       
'orderby' => 'title',                       
'order' => 'asc',                       
'paged' => $paged,                      
'tax1' => $options['tax1'],                 
'tax2' => $options['tax2'],
)); 
```

然后用于`add_query_arg($termslug,$term->slug)`将分类法附加到 URL 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:15:08.093

您有一些冲突的 URI 结构规则。您可以在 htaccess 中添加一行来解决此特定页面的问题。将它放在 WordPress 生成的规则之前，但在`RewriteEngine On`子句之后。

```
RewriteRule    /products /?page=33 [L,QSA] 
```

显然**33**是​​页面ID。[L] 指令意味着这是要执行的最后一次重写，应该直接转到新的 URI。[QSA] 应将任何查询附加`products?had=here`到新的 URI `?page=33&had=here`。

我会指出`Redirect`和之间的区别`Rewrite`：

*   重定向会向您发送回复，说明您的 URI 由于某种原因（临时/永久等）已被重定向：
    *   `http-request get /products?tax=tax1`=>
    *   `http-response 301 (moved permanently to:) /?page=33&tax=tax1`=>
    *   `http-request get /?page=33&tax=tax1`
*   在浏览器的地址栏中可以看到重定向；
*   重定向被搜索爬虫索引；

*   重写不会向您发送回复，提及您的 URI 已被重写；

*   重写在您网站的地址栏中不可见；
*   重写在应用程序端 (WordPress) 的行为就像应用程序收到了重写的 URI（WordPress 不知道地址何时被重写）；

基本上，我建议的解决方案向访问者/浏览器显示`/products?tax=tax1`地址，同时向 WordPress 显示重写的地址`/?page=33&tax=tax1`。

`.htaccess` *在其他 WordPress 重写之前*执行此操作并使用 [L] 停止执行任何后续重写，可以避免 WordPress 分析 URI 的内部机制。

WordPress 的内部机制会尝试找出 URI 指向的类别/页面/帖子。但是您的 URI 方案不是最佳的（如果您有同名的类别和页面，WordPress 会选择其中之一，不一定是正确的）。

下面的函数需要放在你的模板代码的functions.php中。或者在插件中。

```
function custom_search_query( $request ) {
    $query = new WP_Query();  // the query isn't run if we don't pass any query vars
    $query->parse_query($request);

    $request['post_type'] = 'product';

    // this is the actual manipulation; do whatever you need here
    if(isset($_GET))
        $options = $_GET;
    if (!empty($options)) {
        $i = 0;
        $request['tax_query'] = array(); // resetting any previously selected meta_queries that might "linger" and cause weird behaviour.
        // CAREFUL HERE ^ might not be desired behaviour

        foreach($options AS $key => $value) {
            $request['tax_query'][$i]['taxonomy'] = $key;
            $request['tax_query'][$i]['terms'] = array($value);
            $request['tax_query'][$i]['operator'] = 'IN';
            $i++;
        }
    }

    return($request);
}
add_filter( 'request', 'custom_search_query' ); 
```

它不对用户输入进行验证，（wordpress 可能会做一些，但如果你这样做会更好）。

# asp.net - 如何在 asp.net 的 datalist 控件中对行进行分组？

> ID：11274669
> 
> 赞同：1
> 
> 时间：2012-06-30T14:03:36.843
> 
> 标签：asp.net, datalist, asp.net-controls

例如，在我的数据库中有 96 行，我想要将行按四分组（结果表将有 3 列和 8 行）。前任

![在此处输入图像描述](../Images/9a3c57ba3094a3470e557993186c95de.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:15:18.473

如果您可以摆脱 DataList 以外的控件，您可能会轻松得多。例如，您可以使用这样的`Table`服务器控件：

`<asp:Table ID="tblGrouped" runat="server"></asp:Table>`

然后在代码中：

```
protected void LoadData() {
    var items = MyDataSource.GetMyItems();

    TableRow tr = null;
    TableCell tc = null;

    for (int i = 0; i < items.Count; i++) {
        if (i % 12 == 0) {
            tr = new TableRow();
            tc = new TableCell();
            tc.Text = items[i].MyProperty;
            tr.Cells.Add(tc);
            tblGrouped.Rows.Add(tr);
        } else if (i % 4 == 0) {
            tc = new TableCell();
            tc.Text = items[i].MyProperty;
            tr.Cells.Add(tc);
        } else {
            tc.Text += "<br />" + items[i].MyProperty;
        }
    }
} 
```

# android - android在editText上应用功能

> ID：11274681
> 
> 赞同：1
> 
> 时间：2012-06-30T14:04:20.727
> 
> 标签：android

我有一个 EditText，对于用户在此 editText 中键入的每个字母，我想在 EditText 中的整个文本上应用一个函数，该函数是因为我用阿拉伯语写作，而阿拉伯语字母看起来不好，但是当我使用`Farsi class`它时变得很好，我会给你一个简单的例子，如果用户想输入 21，我想应用函数`output=3*editText.getText();` ，所以当他输入 1 时，我将应用这个函数，所以会出现在 editText 上的结果是：

```
output = 3*1 = 3 
```

当他输入 2 时，我想显示`12*3 = 36`

编辑

```
06-30 12:30:38.547: E/AndroidRuntime(276): FATAL EXCEPTION: main
06-30 12:30:38.547: E/AndroidRuntime(276): java.lang.StackOverflowError
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.text.DynamicLayout.reflow(DynamicLayout.java:261)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.text.DynamicLayout.<init>(DynamicLayout.java:150)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.makeNewLayout(TextView.java:4851)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.checkForRelayout(TextView.java:5348)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2688)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2691)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2556)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.EditText.setText(EditText.java:75)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.setText(TextView.java:2531)
06-30 12:30:38.547: E/AndroidRuntime(276):  at com.localizedbasedcompetition.AnswerQuestion$3.onTextChanged(AnswerQuestion.java:149)
06-30 12:30:38.547: E/AndroidRuntime(276):  at android.widget.TextView.sendOnTextChang 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:08:11.527

您必须像这样使用[addTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)和[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)：

```
tv = (TextView) findViewById(R.id.tv);
textMessage = (EditText) findViewById(R.id.tvMessage);
textMessage.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {
        //do your function here
    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}
    public void onTextChanged(CharSequence s, int start, int before, int count){}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:10:00.790

```
EditText editText = (EditText)findViewById(R.id.editText);
    editText.addTextChangedListener(new TextWatcher() {
        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        try
        {
         String s1 = editText.Text.ToString();
         byte[] b = s.getBytes("UTF-8");
         String s2 = new String(b, "UTF-8");
          editText.Text=(s2);
        }
        catch(Exception e)
        {}
        } 
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:07:32.933

```
fileNameEditText.setOnKeyListener(new View.OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        return false;
    }
}); 
```

为您的视图设置一个关键的侦听器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T14:10:26.723

检查这个：[TextView.OnEditorActionListener](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html) editText.setOnEditorActionListener(yourListener)

编辑：哦，我正在快速回答。当然，告诉使用 TextWatcher 的答案是正确的方法。

# c++ - 带有模板叶类的奇怪重复模板

> ID：11274688
> 
> 赞同：1
> 
> 时间：2012-06-30T14:05:18.527
> 
> 标签：c++, oop, polymorphism, crtp, static-polymorphism

我正在考虑为我的应用程序使用奇怪的重复模板模式。但是，我希望这些类对用户定义的类型进行操作。我想了解是否可以创建类似于下图所示的结构：

```
template <class T_leaftype>
class BaseTrajectoryPoint {
};

template <class MyType>
class MyTrajectoryPoint: public BaseTrajectoryPoint<MyTrajectoryPoint> {
    private:    
        MyType A;
}; 
```

上面的代码编译失败，出现以下错误：

> '模板类 BaseTrajectoryPoint' 的模板参数列表中参数 1 的类型/值不匹配</p>

有没有其他解决问题的方法？我想使用静态多态性，但我更愿意在基类中定义所有可能的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T14:06:53.260

```
template <class T_leaftype>
class BaseTrajectoryPoint {
};

template <class MyType>
class MyTrajectoryPoint: public BaseTrajectoryPoint<MyTrajectoryPoint<MyType> > {
    private:    
        MyType A;
}; 
```

`MyTrajectoryPoint`不是类型，而是模板；当您将它作为模板参数传递时，它被视为`template<typename> class T>`，而不是`template<class T>`- 后者是您的基类所期望的。但是`MyTrajectoryPoint<MyType>`命名一个类型，因此您可以将其用作基类的模板参数。

当然，您可以更改`BaseTrajectoryPoint`to的声明`template<template<class> class T_leaftype>`，但是您*必须*使用类模板作为模板参数，而不是完整的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:32:32.550

我们的朋友 Griwes 说的是对的，虽然如果你知道每个将继承 BaseTrajectoryPoint 的类都是一个模板类，你可以这样做：

```
template<template < class > class TLeaf> // << This means: It is expected a template class as parameter
class BaseTrajectoryPoint{
};

template <class MyType>
class MyTrajectoryPoint: public BaseTrajectoryPoint<MyTrajectoryPoint> >{
    private:
        MyType A;
}; 
```

# regex - 应用带有条件匹配的 Groovy RegEx

> ID：11274690
> 
> 赞同：1
> 
> 时间：2012-06-30T14:05:39.087
> 
> 标签：regex, groovy

使用 Groovy 和正则表达式如何转换：

```
String shopping = "SHOPPING LIST(TOMATOES, TEA, LENTIL SOUP: packets=2) for Saturday" 
```

打印出来

```
Shopping for Saturday
TOMATOES
TEA
LENTIL SOUP (2 packets) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:02:59.700

我不是正则表达式大师，所以我找不到一个正则表达式来进行转换[`replaceAll`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#replaceAll%28java.util.regex.Pattern,%20java.lang.String%29)（我认为应该可以这样做）。这虽然有效：

```
def shopping = "SHOPPING LIST(TOMATOES, TEA, LENTIL SOUP: packets=2) for Saturday"

def (list, day) = (shopping =~ /SHOPPING LIST\((.*)\) for (\w+)/)[0][1,2]
println "Shopping for $day\n" + 
        list.replaceAll(/: packets=(\d+)/, ' ($1 packets)')
            .replaceAll(', ', '\n') 
```

首先，它分别捕获字符串`"TOMATOES, TEA: packets=50, LENTIL SOUP: packets=2"`和`"Saturday"`变量。然后它处理字符串以将其转换为所需的输出，替换出现并用逗号分割列表（相当于）。`list``day``list``"packets="``.replaceAll(', ', '\n')``.split(', ').join('\n')`

需要注意的一点是，如果`shopping`字符串与第一个正则表达式不匹配，它将抛出尝试访问第一个匹配项 ( `[0]`) 的异常。您可以通过以下方式避免这种情况：

```
(shopping =~ /SHOPPING LIST\((.*)\) for (\w+)/).each { match, list, day ->
    println "Shopping for $day\n" + 
            list.replaceAll(/: packets=(\d+)/, ' ($1 packets)')
                .replaceAll(', ', '\n')
} 
```

如果第一个正则表达式不匹配，则不会打印任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T00:56:39.303

我喜欢在`find`这类情况下使用 String 方法，我认为它比`=~`语法更清晰：

```
String shopping = "SHOPPING LIST(TOMATOES, TEA, LENTIL SOUP: packets=2) for Saturday"

def expected = """Shopping for Saturday
TOMATOES
TEA
LENTIL SOUP (2 packets)"""

def regex = /SHOPPING LIST\((.*)\) for (.+)/

assert expected == shopping.find(regex) { full, items, day ->
    List<String> formattedItems = items.split(", ").collect { it.replaceAll(/: packets=(\d+)/, ' ($1 packets)') }
    "Shopping for $day\n" + formattedItems.join("\n")
} 
```

# php - 如何使用 php jquery 和 ajax 从 mysql 中检索多个值？

> ID：11274694
> 
> 赞同：-1
> 
> 时间：2012-06-30T14:05:52.273
> 
> 标签：php, javascript, html, jquery

我正在尝试一些新的东西，它使用 PHP 和 Ajax 与 MySQL 数据库一起工作，以便在加载时将多个数据检索到 HTML 页面。

HTML：

```
 <div id="name">Mark</div>
 <br/>
 <input id="realcost" value=""></input>
 <p id="size"></p>
 <div id="#desc">description</div> 
```

查询：

```
function get() {
$.getJSON('data.php', {
    name: $("#name").text()
}, function(data) {
    $("input#realcost").val(data.cost);
    $("p#size").text(data.size);
    $("#desc").text(data.details);
    'json'
});
}
get(); 
```

它的作用是从名称中获取文本，将其传递给 data.php 并检索值 #realcost、#size 和 #desc

PHP：

```
 <?php
 mysql_connect( "localhost", "username", "password");
 $name = mysqul_real_escape_string ($_POST['name']);
 $cost = mysql_qery ("SELECT cost FROM list.itemlist WHERE name='$name'");
 $size = mysql_qery ("SELECT size FROM list.itemlist WHERE name='$name'");
 $details = mysql_qery ("SELECT details FROM list.itemlist WHERE name='$name'");
 echo json_encode(array("cost" => $cost, "size" => $size, "details" => $details));

 ?> 
```

不知道为什么我无法将数据检索到这些感觉中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:12:30.397

该代码有很多错误，很难看出从哪里开始。

但是假设您在 php 文件中修复了语法错误，您实际上需要在进行 sql 查询后检索行，例如`$name_row = mysql_fetch_assoc($name);`.

我建议切换到 PDO 或 mysqli。

当然，您只需一次查询即可获得所有信息……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:17:58.067

试试这个

```
<?php
 mysql_connect( "localhost", "username", "password");
 $name = mysql_real_escape_string ($_POST['name']);
$query = "SELECT cost, size, details FROM list.itemlist where name='$name'");
$row = mysql_fetch_assoc(mysql_query($query));

 echo json_encode(array("cost" => $row['cost'], "size" => $row['size'], "details" => $row['details']));

 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:11:42.170

因为您使用的是错误的函数 'mysql_qery'。

看到这个：

```
ini_set("display_errors", true);
mysql_connect( "localhost", "username", "password");
$name = mysql_real_escape_string ($_POST['name']);
$cost = mysql_query ("SELECT cost FROM list.itemlist WHERE name='$name'");
$size = mysql_query ("SELECT size FROM list.itemlist WHERE name='$name'");
$details = mysql_query ("SELECT details FROM list.itemlist WHERE name='$name'");
echo json_encode(array("cost" => $cost, "size" => $size, "details" => $details)); 
```

使用此行来确保显示错误：

```
ini_set("display_errors", true); 
```

然后使用 firebug（Mozilla firefox 的插件）查看 php 文件的输出并检查错误。

您在获取数据时遇到了一些错误。
看到这个功能，也许有帮助......：

```
function getAllDATA($user, $pass, $host, $name = '')
{
    $conn = mysql_connect($user, $pass, $host);

    if (!$conn)
        return false;

    //@mysql_query("SET NAMES 'utf8' "); if you are using utf8 data

    $dbName = "DatabaseName");
    if (!mysql_select_db($dbname))
        return false;

    $data = array();

    $q = "SELECT cost FROM list.itemlist WHERE name='$name'";

    //echo $q;

    $result = mysql_query($q);

    //echo mysql_error();

    while($row = mysql_fetch_assoc($result))
        $data[] = $row;

    mysql_close($conn);

    self::$data = $data;

    return $data;
} 
```

# jsf - 登录时受限页面上的 JSF ServletFilter 限制

> ID：11274696
> 
> 赞同：0
> 
> 时间：2012-06-30T14:06:03.877
> 
> 标签：jsf, servlets, web.xml

每次调用“com.shadibandhan.Restricted”文件夹中的文件（图像和 xhtml）时，我都会调用这个 servlet 过滤器 servlet。

我正在使用 JSF，所以还有**Faces Servlet**。

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SbServlet</servlet-name>
        <servlet-class>com.shadibandhan.ControllerLayer.SbServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>    
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SbServlet</servlet-name>
        <url-pattern>/SbServlet</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <filter>
        <filter-name>SessionFilter</filter-name>
        <filter-class>
            com.shadibandhan.ControllerLayer.SessionFilter
        </filter-class>
        <init-param>
            <param-name>avoid-urls</param-name>
            <param-value></param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>/faces/com.shadibandhan.Restricted/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
        <init-param>
            <param-name>thresholdSize</param-name>
            <param-value>4096</param-value> <!-- 4 Mb -->
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
</web-app> 
```

这是我的名为 SessionFilter 的 Servlet 过滤器

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.shadibandhan.ControllerLayer;

import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;
import javax.servlet.*;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 *
 * @author MUDASSIR
 */
public class SessionFilter implements Filter {

    private ArrayList<String> urlList;

    @Override
    public void init(FilterConfig config) throws ServletException {

        System.out.println("****************************************");
        System.out.println("***Session Filter Servlet initialized***");
        System.out.println("****************************************");
        String urls = config.getInitParameter("avoid-urls");
        System.out.println("The urls to avoid are = " + urls);
        StringTokenizer token = new StringTokenizer(urls, ",");

        urlList = new ArrayList<String>();

        while (token.hasMoreTokens()) {
            urlList.add(token.nextToken());

        }
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

        System.out.println("This is the doFilter method");

        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        String servletPath = request.getRequestURI();
        String contextPath = request.getContextPath();
        String remoteHost = request.getRemoteHost();
        String url = contextPath + servletPath;
        System.out.println("-----------------> Servlet path is = " + servletPath);
        System.out.println("-----------------> Context path is " + contextPath);
        System.out.println("-----------------> URL is " + url);
        System.out.println("-----------------> Remote Host is " + remoteHost);
        boolean allowedRequest = false;

        if (urlList.contains(servletPath)) {
            allowedRequest = true;
        }

        if (!allowedRequest) {
            HttpSession session = request.getSession(false);
            if (null == session) {

                System.out.println("Session is not present");
                response.sendRedirect(contextPath);
                return;

            } if (null != session) {
                //String loggedIn = (String) session.getAttribute("sb_logged_in");
                System.out.println("Session is present");
                System.out.println("\nSession no. is = " + session.getId());

                if (session.getAttribute("logged-in") == "true") {
                    System.out.println("Session logged-in attribute is true, " + session.getAttribute("sessionUsername") + " is logged in.");

                    //ServletContext context = request.getServletContext();

                    RequestDispatcher dispatcher = request.getRequestDispatcher(servletPath);
                    dispatcher.forward(request, response);
                } else {
                    System.out.println("Session logged-in attribute is not true");
                    response.sendRedirect(contextPath);
                    return;
                }
            }
        }

        chain.doFilter(req, res);
    }

    @Override
    public void destroy() {
    }
} 
```

之前，我使用 request.getServletPath()。现在，我正在使用 request.getRequestURI() 来获取用户想要去的路径。

但它没有打开页面。当我尝试访问受限制的页面时，会调用 sessionfilter，它会给我这个错误。

```
type Status report

message /ShadiBandhan/ShadiBandhan/faces/com.shadibandhan.Restricted/home.xhtml

description The requested resource (/ShadiBandhan/ShadiBandhan/faces/com.shadibandhan.Restricted/home.xhtml) is not available. 
```

我之前问过这个问题，但标题不同，这使得它不清楚。 [登录时索引页面上的 JSF ServletFilter 限制](https://stackoverflow.com/questions/11014039/jsf-servletfilter-restriction-on-index-page-when-logged-in)

**注意**这是两次添加上下文。我不知道为什么。任何人都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:46:28.420

已经包含上下文路径，这`getRequestURI()`就是您在最终 URL 中看到它两次的原因。要获取没有上下文路径的请求 URI，请将其子串如下：

```
String contextRelativeURI = request.getRequestURI().substring(request.getContextPath().length()); 
```

顺便说一句，在那次通话`return`之后有一个缺失的陈述。`forward()`

# c# - 如何使用 C# Stack 对象保存日期时间值并计算平均值

> ID：11274706
> 
> 赞同：1
> 
> 时间：2012-06-30T14:07:36.550
> 
> 标签：c#, stack

首先概述我正在尝试做的事情：

每次用户按键时，我都会记录当前时间，一旦我有超过 5 条记录，我需要计算按键之间的平均时间（同时只保留最后 5 - 10 次按键）。

当我第一次坐下来研究这个问题时，我想，很简单，我将使用一个堆栈并简单地将其保持在少于 10 个项目。

问题：

*   如何确保堆栈中最多只有十个值？（日期时间类型）
*   如何找到存储在堆栈中的每个日期时间之间的平均时间？

谢谢

担

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T14:10:29.000

不要使用堆栈，而是使用容量有限的队列。这可以通过以下方式实现：

```
public class CappedQueue<T> : IEnumerable<T> {

    private readonly m_Capacity;
    private Queue<T> m_InnerQueue;
    public CappedQueue<T>(int capacity) {
        m_Capacity = capacity;
        m_InnerQueue = new Queue<T>(capacity);
    }

    // Wrap required methods 
    public void Enqueue(T item){
        if(m_InnerQueue.Count()) == capacity) {
            m_InnerQueue.Dequeue() ;                
        }

        m_InnerQueue.Enqueue(item);
    }

    public IEnumerator<T> GetEnumerator()
    {
        return m_InnerQueue.GetEnumerator();
    }
}

public class Test {
    public void Foo()
    {
        var queue = new CappedQueue<DateTime>(5);

        queue.Enqueue(DateTime.Now); // each time the user press the key
        queue.Enqueue(DateTime.Now); // each time the user press the key
        queue.Enqueue(DateTime.Now); // each time the user press the key

        TimeSpan diff = (queue.Last() / queue.Fisrt())/queue.Count();
    }
    public void Foo2()
    {
        var queue = new CappedQueue<int>(5);

        queue.Enqueue(10);
        queue.Enqueue(20);
        queue.Enqueue(30);

        var average = queue.Average(x=>x);
    }
} 
```

# events - 在 C++/CLI 中将非静态委托属性函数作为参数传递

> ID：11274711
> 
> 赞同：0
> 
> 时间：2012-06-30T14:08:13.860
> 
> 标签：events, properties, static, delegates, c++-cli

我在 C++ 中创建了一个用于语音识别的接口类，我正在使用 Julius API。[http://julius.sourceforge.jp/en_index.php?q=index-en.html](http://julius.sourceforge.jp/en_index.php?q=index-en.html)。

好吧，我的班级有一些事件，这些事件将由 Julius API 触发。Julius API 具有带有此签名的函数调用 callback_add：

`int callback_add (Recog *recog, int code, void(*func)(Recog *recog, void *data), void data)`

我使用一些“代理”函数来调用事件并将这些函数传递给 callback_add。

如果属性事件是静态的，它可以正常工作，但如果是非静态的，则在代理函数内部无法识别该属性。

困难是因为我必须使用 callback_add 函数并且不能修改它。

这是具有 2 个事件（静态和非静态）的类的摘要

**标题**

```
#ifndef FALAENGINE_H_
#define FALAENGINE_H_

#pragma once

extern "C"{
#include <julius/julius.h>
}

namespace FalaAPI {

    public ref class FalaEngine
    {
    public:
        FalaEngine();
        ~FalaEngine();

        // Events
        delegate void OnRecognizedDele(FalaAPI::RecoResult^ result);
        static property OnRecognizedDele^ OnRecognized;

        delegate void OnEngineStartDele();
        property OnEngineStartDele^ OnEngineStart;

    private:
        Recog *recog;
        Jconf *jconf;
    };
}

#endif /* FALAENGINE_H_*/ 
```

**来源**

```
#include "stdafx.h"

using System::String;
using System::Console;

#include "FalaEngine.h"
#include <windows.h>

namespace FalaAPI{
    void StartOnEngineStart()(Recog *recog, void * dummy){
        if(FalaEngine::OnEngineStart->GetInvocationList()->Length > 0)
            FalaEngine::OnEngineStart->Invoke();
    }

    void StartOnRecognized()(Recog *recog, void * dummy){
        if(FalaEngine::OnRecognized->GetInvocationList()->Length > 0)
            FalaEngine::OnRecognized->Invoke();
    }

    FalaEngine::FalaEngine(){
        recog = j_recog_new();
        jconf = j_jconf_new();

        //Julius callback Functions
        callback_add(recog, CALLBACK_EVENT_PROCESS_ONLINE, StartOnEngineStart, NULL);

        callback_add(recog, CALLBACK_RESULT, StartOnRecognized, NULL);
    }
} 
```

问题发生在 StartOnEngineStart 函数内部：

错误 C2227：“->GetInvocationList”左侧必须指向类/结构/联合/通用类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:27:23.323

一个非静态成员分别存在于每个实例中。您还没有指定哪个实例包含您要检查的委托，您只指定了一个类（并且可能有很多实例）。

尝试使用`dummy`参数来传递您的实例。但要小心，因为垃圾收集器会移动对象，除非你已经固定它们，所以简单地传递地址是行不通的。您需要创建并传递 a `GCHandle`。（注意不要泄露 GCHandle，否则你的对象永远不会被释放）

* * *

像这样的东西应该是有效的：

```
ref class FalaEngine;

struct EngineHandle
{
    gcroot<FalaEngine^> handle;
    EngineHandle(FalaEngine^ engine) : handle(engine) {}
};

public ref class FalaEngine
{
    clr_scoped_ptr<EngineHandle> callback_ptr;
public:
    FalaEngine();
    ~FalaEngine();

    // Events
    delegate void OnRecognizedDele(FalaAPI::RecoResult^ result);
    property OnRecognizedDele^ OnRecognized;

    delegate void OnEngineStartDele();
    property OnEngineStartDele^ OnEngineStart;

private:
    Recog *recog;
    Jconf *jconf;
};

void StartOnEngineStart(Recog *recog, void * dummy)
{
    FalaEngine^ that = static_cast<EngineHandle*>(dummy)->handle;
    that->OnEngineStart(); // C++/CLI already checks if the invocation list is empty
}

void StartOnRecognized(Recog *recog, void * dummy)
{
    FalaEngine^ that = static_cast<EngineHandle*>(dummy)->handle;
    that->OnRecognized(recog->get_result());
}

FalaEngine::FalaEngine()
    : callback_ptr(new EngineHandle(this))
{
    recog = j_recog_new();
    jconf = j_jconf_new();

    //Julius callback Functions
    callback_add(recog, CALLBACK_EVENT_PROCESS_ONLINE, StartOnEngineStart, callback_ptr.get());

    callback_add(recog, CALLBACK_RESULT, StartOnRecognized, callback_ptr.get());

} 
```

[课堂在`clr_scoped_ptr`这里。](https://codereview.stackexchange.com/questions/1695/scoped-ptr-for-c-cli-ensure-managed-object-properly-frees-owned-native-object) 许可证要求并不多，但如果您使用它，请确保遵循它们。

# iphone - 较旧的 iOS 设备能否运行使用较新版本的 iOS SDK 构建的应用程序？

> ID：11274714
> 
> 赞同：0
> 
> 时间：2012-06-30T14:09:02.407
> 
> 标签：iphone, xcode, sdk

如果我在 XCode 中使用（默认）iOS 5.1 SDK 构建应用程序并将其分发到应用程序商店，那么拥有 iPhone 3G 的用户是否能够下载并运行该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:10:42.487

这取决于您在应用程序中包含哪些功能：如果您使用仅在 iOS5 中可用的功能，例如`UIPageController`，那么不，他们将无法运行它。但是，如果您不使用 iOS 5 的任何功能，那么它很可能是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:44:25.117

好的，让我比 Omar 更正确地回答你：

在 XCode 中，您可以定义用于编译应用程序的 SDK（应始终是“最新的”SDK，当前为 5.1）和您的应用程序将使用/at 运行的最低操作系统版本。从定义的最低操作系统版本开始，您应该始终在所有（主要）操作系统版本上测试您的应用程序。您可以在代码中对当前的 iOS 版本做出反应，并根据当前版本使用不同的功能，如下所示：

```
if ([UIDevice systemVersionValue] >= 4.2f) {
 // code for OSes at least as new as 4.2
} else {
  // code for older OSs
} 
```

如果您希望您的应用获得最大的曝光率，您应该尝试支持 Apple 仍支持的所有 iOS 版本。目前，这是 iOS 4.0 和更新版本，AFAIK。鉴于 iOS 用户的更新率非常高，所有旧的东西都没有多大意义。

# android - Save bitmap to file function

> ID：11274715
> 
> 赞同：44
> 
> 时间：2012-06-30T14:09:10.947
> 
> 标签：android, file-io, android-intent, bitmap, android-file

I'm trying to save a bitmap to file and a specific directly using a function I've created. It's not working. It crashes after bitmap.compress part (before here3).

```
 File dir = new File(filepath);

    if(!dir.exists())dir.mkdirs();

    File file = new File(Environment.getExternalStorageDirectory() + filepath, side + ".png");
    FileOutputStream fOut = new FileOutputStream(file);

    bitmap.compress(Bitmap.CompressFormat.PNG, 85, fOut);
    fOut.flush();
    fOut.close();

    System.out.println(filepath);

    bitmap.recycle();
    System.gc(); 
```

* * *

Error log:

```
06-29 00:16:38.089: D/AndroidRuntime(3260): Shutting down VM
06-29 00:16:38.089: W/dalvikvm(3260): threadid=1: thread exiting with uncaught exception (group=0xb587f4f0)
06-29 00:16:38.089: E/AndroidRuntime(3260): FATAL EXCEPTION: main
06-29 00:16:38.089: E/AndroidRuntime(3260): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=Intent { act=android.intent.action.VIEW dat=content://org.openintents.filemanager/mimetype//mnt/sdcard/download/02977_awreckedboatintheocean_1280x1024.jpg }} to activity {com.polygonattraction.testbirds/com.polygonattraction.testbirds.functions.SelectImageSource}: java.lang.IllegalStateException: Can't compress a recycled bitmap
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.os.Looper.loop(Looper.java:130)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at java.lang.reflect.Method.invoke(Method.java:507)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at dalvik.system.NativeStart.main(Native Method)
06-29 00:16:38.089: E/AndroidRuntime(3260): Caused by: java.lang.IllegalStateException: Can't compress a recycled bitmap
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.graphics.Bitmap.checkRecycled(Bitmap.java:180)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.graphics.Bitmap.compress(Bitmap.java:581)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at com.polygonattraction.testbirds.functions.Functions.SaveToFile(Functions.java:144)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at com.polygonattraction.testbirds.functions.SelectImageSource.onActivityResult(SelectImageSource.java:113)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
06-29 00:16:38.089: E/AndroidRuntime(3260):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2528) 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-30T14:22:02.370

1.  您需要适当的权限`manifest.xml`：

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
    ```

2.  `out.flush()`检查`out`不为空..

3.  ```
    String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() + 
                                "/PhysicsSketchpad";
    File dir = new File(file_path);
    if(!dir.exists())
        dir.mkdirs();
    File file = new File(dir, "sketchpad" + pad.t_id + ".png");
    FileOutputStream fOut = new FileOutputStream(file);

    bmp.compress(Bitmap.CompressFormat.PNG, 85, fOut);
    fOut.flush();
    fOut.close(); 
    ```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-08-25T17:44:15.593

在科特林：

```
private fun File.writeBitmap(bitmap: Bitmap, format: Bitmap.CompressFormat, quality: Int) {
    outputStream().use { out ->
        bitmap.compress(format, quality, out)
        out.flush()
    }
} 
```

用法示例：

```
File(exportDir, "map.png").writeBitmap(bitmap, Bitmap.CompressFormat.PNG, 85) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-11T01:48:20.793

两个例子对我有用，供你参考。

```
Bitmap bitmap = Utils.decodeBase64(base64);
try {
    File file = new File(filePath);
    FileOutputStream fOut = new FileOutputStream(file);
    bitmap.compress(Bitmap.CompressFormat.PNG, 85, fOut);
    fOut.flush();
    fOut.close();
}
catch (Exception e) {
    e.printStackTrace();
    LOG.i(null, "Save file error!");
    return false;
} 
```

和这个

```
Bitmap savePic = Utils.decodeBase64(base64);
File file = new File(filePath);
File path = new File(file.getParent());

if (savePic != null) {
    try {
        // build directory
        if (file.getParent() != null && !path.isDirectory()) {
            path.mkdirs();
        }
        // output image to file
        FileOutputStream fos = new FileOutputStream(filePath);
        savePic.compress(Bitmap.CompressFormat.PNG, 90, fos);
        fos.close();
        ret = true;
    } catch (Exception e) {
        e.printStackTrace();
    }
} else {
    LOG.i(TAG, "savePicture image parsing error");
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-24T07:06:13.900

这是可以帮助您的功能

```
private void saveBitmap(Bitmap bitmap,String path){
        if(bitmap!=null){
            try {
                FileOutputStream outputStream = null;
                try {
                    outputStream = new FileOutputStream(path); //here is set your file path where you want to save or also here you can set file object directly

                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream); // bitmap is your Bitmap instance, if you want to compress it you can compress reduce percentage
                    // PNG is a lossless format, the compression factor (100) is ignored
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    try {
                        if (outputStream != null) {
                            outputStream.close();
                        }
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }    
        }
    } 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2018-07-05T07:45:26.620

## 实现直接保存位图和加载位图。在 mfc 类上快速轻松

```
void CMRSMATH1Dlg::Loadit(TCHAR *destination, CDC &memdc)
{
CImage img;
PBITMAPINFO bmi;
BITMAPINFOHEADER Info;
BITMAPFILEHEADER bFileHeader;
CBitmap bm;     
CFile file2;
file2.Open(destination, CFile::modeRead | CFile::typeBinary);
file2.Read(&bFileHeader, sizeof(BITMAPFILEHEADER));
file2.Read(&Info, sizeof(BITMAPINFOHEADER));    
BYTE ch;
int width = Info.biWidth;
int height = Info.biHeight;
if (height < 0)height = -height;
int size1 = width*height * 3;
int size2 = ((width * 24 + 31) / 32) * 4 * height;
int widthnew = (size2 - size1) / height;
BYTE * buffer = (BYTE *)GlobalAlloc(GPTR, size2);
//////////////////////////
HGDIOBJ old;
unsigned char alpha = 0;    
int z = 0;  
z = 0;
int gap = (size2 - size1) / height;
for (int y = 0;y < height;y++)
{
    for (int x = 0;x < width*3;x++)
    {
        file2.Read(&ch, 1);
        buffer[z] = ch;
        z++;
    }
    for (int z1 = 0;z1 <gap;z1++)
    {
        file2.Read(&ch,1);
    }
}
bm.CreateCompatibleBitmap(&memdc, width, height);
bm.SetBitmapBits(size1,buffer);
old = memdc.SelectObject(&bm);   
///////////////////////////  
 //bm.SetBitmapBits(size1, buffer);     
 GetDC()->BitBlt(1, 95, width, height, &memdc, 0, 0, SRCCOPY);
 memdc.SelectObject(&old);
 bm.DeleteObject();
 GlobalFree(buffer);     
 file2.Close();
 }
 void CMRSMATH1Dlg::saveit(CBitmap &bit1, CDC &memdc, TCHAR *destination)
  {     
BITMAP bm;
PBITMAPINFO bmi;
BITMAPINFOHEADER Info;
BITMAPFILEHEADER bFileHeader;
CFile file1;
            CSize size = bit1.GetBitmap(&bm);
 int z = 0;  
 BYTE ch = 0;
 size.cx = bm.bmWidth;
 size.cy = bm.bmHeight;
 int width = size.cx;    
 int size1 = (size.cx)*(size.cy);
 int size2 = size1 * 3;  
 size1 = ((size.cx * 24 + 31) / 32) *4* size.cy;     
 BYTE * buffer = (BYTE *)GlobalAlloc(GPTR, size2);               
 bFileHeader.bfType = 'B' + ('M' << 8); 
 bFileHeader.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);
 bFileHeader.bfSize = bFileHeader.bfOffBits + size1;
 bFileHeader.bfReserved1 = 0;
 bFileHeader.bfReserved2 = 0;   
 Info.biSize = sizeof(BITMAPINFOHEADER);
 Info.biPlanes = 1;
 Info.biBitCount = 24;//bm.bmBitsPixel;//bitsperpixel///////////////////32
 Info.biCompression = BI_RGB;
 Info.biWidth =bm.bmWidth;
 Info.biHeight =-bm.bmHeight;///reverse pic if negative height
 Info.biSizeImage =size1;
 Info.biClrImportant = 0;
 if (bm.bmBitsPixel <= 8)
 {
     Info.biClrUsed = 1 << bm.bmBitsPixel;
 }else
 Info.biClrUsed = 0;
 Info.biXPelsPerMeter = 0;
 Info.biYPelsPerMeter = 0;
 bit1.GetBitmapBits(size2, buffer);      
 file1.Open(destination, CFile::modeCreate | CFile::modeWrite |CFile::typeBinary,0);
 file1.Write(&bFileHeader, sizeof(BITMAPFILEHEADER));
 file1.Write(&Info, sizeof(BITMAPINFOHEADER));
 unsigned char alpha = 0;    
 for (int y = 0;y<size.cy;y++)
 {
     for (int x = 0;x<size.cx;x++)
     {
         //for reverse picture below
         //z = (((size.cy - 1 - y)*size.cx) + (x)) * 3;          
     z = (((y)*size.cx) + (x)) * 3;
     file1.Write(&buffer[z], 1);
     file1.Write(&buffer[z + 1], 1);
     file1.Write(&buffer[z + 2], 1);
     }               
     for (int z = 0;z < (size1 - size2) / size.cy;z++)
     {
         file1.Write(&alpha, 1);
     }
 }   
 GlobalFree(buffer);     
 file1.Close();  
 file1.m_hFile = NULL;
        } 
```

# android - 如何从资产中将 sqlite db 放在 sdcard 上

> ID：11274722
> 
> 赞同：0
> 
> 时间：2012-06-30T14:10:04.830
> 
> 标签：android, sqlite, sd-card

一旦将 sqlite db 复制到 data/data/packagename/database 文件夹，我有 7mb 的应用程序会消耗 25mb。这在我节俭的模拟器上太大了，可能会冒犯用户。

有没有办法将 sqlite db 直接放到 sdcard 上？还是整个应用程序等？要求用户在安装后强制它通过似乎太晚了，我自己无法托管 dayabase。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:19:34.670

> 有没有办法将 sqlite db 直接放到 sdcard 上？

您可能可以制作一个模型[`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)来处理这个问题。默认情况下，它将数据库放置在内部存储的正常位置。不幸的是，现在，要进行这种更改需要一些不平凡的手术，尽管我刚刚提交[了一个功能请求](https://github.com/jgilfelt/android-sqlite-asset-helper/issues/4)以使其更容易一些。

> 还是整个应用程序等？

您可以[使用`android:installLocation="preferExternal"`](http://developer.android.com/guide/topics/data/install-location.html)，尽管它可能不被尊重。而且，这不会影响您的数据库—— `getFilesDir()`、`getDatabaseDir()`和 kin 始终在内部存储中。

另请注意，这只是 Android 1.x/2.x 设备的问题。比这更新的所有东西都应该考虑将内部和外部存储放在一个分区上，因此它们共享空间。

# grails - Grails extension in SpringSource Tool Suite errors

> ID：11274723
> 
> 赞同：0
> 
> 时间：2012-06-30T14:10:06.420
> 
> 标签：grails, groovy, grails-plugin, sts-springsourcetoolsuite, springsource

I recently installed SpringSource Tool Suite. And I want to start working with Grails projects. So, I went to the Dashboard -> Extension, where I saw two extensions: Grails (current production release) and Grails Support as in the image below.

![enter image description here](../Images/5a331fb029fbf712397a516e51e08864.png)

But when I try to install them, I get the following errors :

```
Problems occurred while performing installation: Operation details
Operation details
Cannot complete the install because one or more required items could not be found.
Software currently installed: Shared profile 1.0.0.1340820181092 (SharedProfile_com.springsource.sts.ide 1.0.0.1340820181092)
Missing requirement: Shared profile 1.0.0.1340820181092 (SharedProfile_com.springsource.sts.ide 1.0.0.1340820181092) requires 'org.maven.ide.eclipse [1.0.100.20110804-1717]' but it could not be found 
```

What can I do to resolve this error ? Or are there any other options I can follow to install Grails extension?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:27:42.270

我会切换到最近宣布的新“Groovy/Grails Tool Suite”（参见[http://www.springsource.org/node/3582](http://www.springsource.org/node/3582)）。转到[http://www.springsource.org/downloads/sts](http://www.springsource.org/downloads/sts)的标准下载页面，然后单击“Other Downloads >”。在“里程碑版本 - Groovy/Grails Tool Suite 3.0.0.M2”下下载适用于您操作系统的版本。

这是一个测试版/里程碑版本，但自从它发布以来我一直在使用它，并且到目前为止它与最终版本一样稳定。这很方便，因为除了最新的 Grails (2.0.4) 之外，已经为您配置了 Groovy-Eclipse 插件和 Grails 支持。您需要从标准 STS 获得的任何其他插件始终可以使用标准安装/更新过程进行安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:45:39.617

从 Windows 内存中删除相应的应用程序消除了问题（SpringSource 工具套件中的 Grails 扩展错误）。双重运行应用程序（早期和新的）也可能是 GGS 或 STS 有时无法保存 .groovy 文件（有或没有错误消息）的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:46:41.593

是的，@BurtBeckwith 说了什么。你应该搬到新的GGTS。

但是，为了解决您的特定问题，您将 STS 安装到只读目录（或 C:\Program 文件中）。您需要在其他地方重新安装它。

Eclipse p2 安装程序无法将功能补丁安装到只读目录中。Groovy-Eclipse 附带了一个特性补丁来扩展 JDT 编译器。我相信这个问题在上周发布的 Eclipse (4.2) 的 Juno 版本中得到了解决。

# c# - Add picture boxes dynamically in row

> ID：11274727
> 
> 赞同：0
> 
> 时间：2012-06-30T14:10:37.097
> 
> 标签：c#, winforms

I am trying to show images in a row..For this I am trying to add picture boxes dynamically. Image location is stored in databses. my code is as

```
int iCtr = 0;
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            PictureBox picture = new PictureBox
            {
                Name = "pictureBox"+i,
                Size = new Size(316, 320),
                Location = new Point(1, iCtr * 1100 + 1),
                Visible = true
            };
           // string fname = dt.Rows[2]["FileName"].ToString();
            picture.ImageLocation = dt.Rows[i]["FileName"].ToString();
            //@"..\Images\80knhk00003.jpg";
            pnlDisplayImage.Controls.Add(picture);
            iCtr++;
        } 
```

where dt is datable.

with this I can see only last image but not all images. Even last image is very small and complete image is not shown.(i.e. I can view only one corner of actual image).

How can I give size to image so that it can be viewed completely? And how can I display images in row?

Please help Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:50:53.670

你可以试试这样的东西吗？要获得缩放，请参阅[PictureBoxSizeMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)。

```
List<PictureBox> pictureBoxList = new List<PictureBox>();

for (int i = 0; i < dt.Rows.Count; i++)
{
    PictureBox picture = new PictureBox
    {
        Name = "pictureBox" + i,
        Size = new Size(316, 320),
        Location = new Point(i * 316, 1),
        BorderStyle = BorderStyle.FixedSingle,
        SizeMode = PictureBoxSizeMode.Zoom
    };
    picture.ImageLocation = dt.Rows[i]["FileName"].ToString();
    pictureBoxList.Add(picture);
}

foreach (PictureBox p in pictureBoxList)
{
    pnlDisplayImage.Controls.Add(p);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T14:28:36.523

而不是 Image 属性，将 BackGroundImage 属性设置为您的图片位置，然后将 BackGroundImageLayout 设置为值“Stretch”，然后您将看到完整的图像。

# scala - Is it possible to override a type field?

> ID：11274729
> 
> 赞同：19
> 
> 时间：2012-06-30T14:10:58.057
> 
> 标签：scala, types

```
scala> class C
defined class C

scala> class subC extends C
defined class subC

scala> class A { type T = C}
defined class A

scala> class subA extends A { override type T = subC}
<console>:10: error: overriding type T in class A, which equals C;
 type T has incompatible type
      class subA extends A { override type T = subC}
                                           ^ 
```

In the example above, I get an error message, that I can not override the type field in class `A` ( even if the chosen type `subC` extends the class `C`).

Is overriding a type field possible at all ? And if yes, what is wrong with the example above ?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T14:33:00.650

你不会说关于类型的“覆盖”，而是*缩小*它们的界限。

1.  `type T`...没有界限
2.  `type T <: C`...`T`是`C`或子类型`C`（称为*上限*）
3.  `type T >: C`...`T`是`C`或超类型`C`（称为*下界*）
4.  `type T = C`...`T`正是`C`（类型别名）

因此，如果`T`是 trait 的类型成员`A`，并且`SubA`是 的子类型`A`，在情况 (2)`SubA`中可能会缩小`T`到更特定的子类型`C`，而在情况 (3) 中可能会缩小到更高的超类型`C`。案例（1）没有对 施加任何限制`SubA`，而案例（4）可以说`T`是“最终的”。

* * *

这会对`T`in的可用性产生影响——`A`无论它可能显示为方法参数的类型还是方法的返回类型。

例子：

```
trait C { def foo = () }
trait SubC extends C { def bar = () }

trait MayNarrow1 {
  type T <: C  // allows contravariant positions in MayNarrow1
  def m(t: T): Unit = t.foo  // ...like this
}

object Narrowed1 extends MayNarrow1 {
   type T = SubC
}

object Narrowed2 extends MayNarrow1 {
  type T = SubC
  override def m(t: T): Unit = t.bar
} 
```

可以定义方法`m`in`MayNarrow1`因为 type`T`出现在*逆变位置*（作为方法参数的类型），因此即使`T`在子类型中缩小它仍然有效`MayNarrow1`（方法体可以将`t`其视为 type `C`）。

相反，`type T = C`不可避免地修复`T`，这有点对应于制作方法`final`。通过修复`T`，它可以用于*协变位置*（作为方法的返回类型）：

```
trait Fixed extends MayNarrow1 {
  type T = C   // make that T <: C to see that it won't compile
  final def test: T = new C {}
} 
```

您现在可以很容易地看到必须禁止进一步“覆盖” `T`：

```
trait Impossible extends Fixed {
  override type T = SubC

  test.bar  // oops...
} 
```

* * *

为了完整起见，下面是不太常见的下限情况：

```
trait MayNarrow2 {
  type T >: SubC  // allows covariant positions in MayNarrow2
  def test: T = new SubC {}
}

object Narrowed3 extends MayNarrow2 {
  type T = C
  test.foo
}

object Narrowed4 extends MayNarrow2 {
  type T = C
  override def test: T = new C {}
} 
```

# xcode - Unable to call a method

> ID：11274730
> 
> 赞同：1
> 
> 时间：2012-06-30T14:11:03.750
> 
> 标签：xcode, methods, uiimage

I am trying to call the method below using [self changeColor]; and getting

> "No visible interface for @MyClassViewController declares the selector "changeColor"

I did declare it like that on both .h and .m:

```
@interface changeColor 

- (UIImage *) changeColor:(UIImage *)image;

@end 
```

What I am doing wrong? Please help

-------------Code-------------

```
- (UIImage *) changeColor:(UIImage *)image 

{
    UIGraphicsBeginImageContext(image.size);

    CGRect contextRect;
    contextRect.origin.x = 0.0f;
    contextRect.origin.y = 0.0f;
    contextRect.size = [image size];
    // Retrieve source image and begin image context
    CGSize itemImageSize = [image size];
    CGPoint itemImagePosition; 
    itemImagePosition.x = ceilf((contextRect.size.width - itemImageSize.width) / 2);
    itemImagePosition.y = ceilf((contextRect.size.height - itemImageSize.height) );

    UIGraphicsBeginImageContext(contextRect.size);

    CGContextRef c = UIGraphicsGetCurrentContext();
    // Setup shadow
    // Setup transparency layer and clip to mask
    CGContextBeginTransparencyLayer(c, NULL);
    CGContextScaleCTM(c, 1.0, -1.0);
    CGContextClipToMask(c, CGRectMake(itemImagePosition.x, -itemImagePosition.y, itemImageSize.width, -itemImageSize.height), [image CGImage]);

    CGContextSetRGBFillColor(c, 0, 0, 1, 1);

    NSLog(@"--------- METHOD DETECTED");//>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> TEST
    /*
    switch (row)

    {   
        case 0:
            CGContextSetRGBFillColor(c, 0, 0, 1, 1);
            break;

        default:
            CGContextSetRGBFillColor(c, 1, 0, 0., 1);
            break;
    }   
    */

    contextRect.size.height = -contextRect.size.height;
    contextRect.size.height -= 15;
    // Fill and end the transparency layer
    CGContextFillRect(c, contextRect);
    CGContextEndTransparencyLayer(c);

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:16:24.397

问题是`[self changeColor];`。 `changeColor`和`changeColor:`是两个不同的东西。如果将其定义为采用一个参数，则必须以这种方式调用它。

# c# - Dynamic generate column mvvm

> ID：11274731
> 
> 赞同：20
> 
> 时间：2012-06-30T14:11:19.973
> 
> 标签：c#, wpf, mvvm, binding

I try to make a ListView with dynamic generation of column. I use mvvm patern. How i can implement this? In this momemt I have only static columns.

```
<ListView ItemsSource="{Binding ProblemProducts}"
                  Grid.Row="1" Grid.RowSpan="4" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.Column="4">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Spisujący" DisplayMemberBinding="{Binding _spisujacy}" Width="auto"/>
                    <GridViewColumn Header="Miejsce składowania" DisplayMemberBinding="{Binding MiejsceSkladowania}" Width="auto"/>
                    <GridViewColumn Header="Typ spisu" DisplayMemberBinding="{Binding _typSpisu}" Width="auto"/>
                    <GridViewColumn Header="Kod" DisplayMemberBinding="{Binding Kod}" width="auto"/>
                </GridView>
            </ListView.View>
        </ListView> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-30T22:34:45.050

您可以`GridView`使用转换器动态创建适当的列。这是工作示例：

![应用程序屏幕截图](../Images/80c98c0103cb065973ab9917b1354fd7.png)

主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:WpfApplication1="clr-namespace:WpfApplication1" 
        mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        d:DesignHeight="189" d:DesignWidth="312" Width="300" Height="300">
    <Window.Resources>
        <WpfApplication1:ConfigToDynamicGridViewConverter x:Key="ConfigToDynamicGridViewConverter" />
    </Window.Resources>
    <ListView ItemsSource="{Binding Products}" View="{Binding ColumnConfig, Converter={StaticResource ConfigToDynamicGridViewConverter}}"/>    
</Window> 
```

主窗口.xaml.cs

```
using System.Collections.Generic;
using System.Windows;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new ViewModel();
        }
    }

    public class ViewModel
    {
        public ColumnConfig ColumnConfig { get; set; }
        public IEnumerable<Product> Products { get; set; }

        public ViewModel()
        {
            Products = new List<Product> { new Product { Name = "Some product", Attributes = "Very cool product" }, new Product { Name = "Other product", Attributes = "Not so cool one" } };
            ColumnConfig = new ColumnConfig { Columns = new List<Column> { new Column { Header = "Name", DataField = "Name" }, new Column { Header = "Attributes", DataField = "Attributes" } } };
        }
    }

    public class ColumnConfig
    {
        public IEnumerable<Column> Columns { get; set; }
    }

    public class Column
    {
        public string Header { get; set; }
        public string DataField { get; set; }
    }

    public class Product
    {
        public string Name { get; set; }
        public string Attributes { get; set; }
    }
} 
```

ConfigToDynamicGridViewConverter.cs

```
using System;
using System.Globalization;
using System.Windows.Controls;
using System.Windows.Data;

namespace WpfApplication1
{
    public class ConfigToDynamicGridViewConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var config = value as ColumnConfig;
            if (config != null)
            {
                var gridView = new GridView();
                foreach (var column in config.Columns)
                {
                    var binding = new Binding(column.DataField);
                    gridView.Columns.Add(new GridViewColumn {Header = column.Header, DisplayMemberBinding = binding});
                }
                return gridView;
            }
            return Binding.DoNothing;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T08:41:03.133

感谢谢尔盖，一个了不起的答案。

我以稍微不同的形式使用它，因为我需要添加具有非文本数据类型的列。

因此，对 Sergei 答案的以下修改允许您在数据值上使用 ContentControl 包装器。然后将根据为每个单元格中的值定义的 DataTemplate 来呈现它们。

如果使用 ContentControlDataField 而不是 TextDataField（最初是 DataField），则该列将被包装：

```
 public class ConfigToDynamicGridViewConverter : IValueConverter {
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        var config = value as ColumnConfig;
        if (config != null) {
            var grdiView = new GridView();
            foreach (var column in config.Columns) {
                bool cc = !string.IsNullOrEmpty(column.ContentControlDataField);
                var binding = new Binding(cc ? column.ContentControlDataField : column.TextDataField);
                if (cc) {
                    var template = new DataTemplate();
                    var fact = new FrameworkElementFactory(typeof(ContentControl));
                    fact.SetBinding(ContentControl.ContentProperty, binding);
                    template.VisualTree = fact;
                    grdiView.Columns.Add(new GridViewColumn {Header = column.Header, CellTemplate = template});
                } else
                    grdiView.Columns.Add(new GridViewColumn {Header = column.Header, DisplayMemberBinding = binding});
            }
            return grdiView;
        }
        return Binding.DoNothing;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        throw new NotSupportedException();
    }
}

public class ColumnConfig {
    public IEnumerable<Column> Columns { get; set; }
}

public class Column {
    public string Header { get; set; }
    public string TextDataField { get; set; }
    public string ContentControlDataField { get; set; }
} 
```

# ios - Custom PhoneGap slash screen

> ID：11274733
> 
> 赞同：1
> 
> 时间：2012-06-30T14:11:28.063
> 
> 标签：ios, xcode, cordova, phonegap-plugins

Is it possible to replace the splash screen for iOS and Android with a custom one?

As far as I know there are 2 splash screens in iOS PhoneGap:

*   The "normal" iOS splash screen
*   The PhoneGap splash screen (same image with a spinner)

Would it be possible to:

*   replace the "normal" iOS splash on runtime as it is possible with normal xCode Projects
*   replace the "spinner" splash screen (I couldn´t figure out if that´s the phonegap-plugins / iPhone / SplashScreen code or not)

It seems that the normal xCode ways of doing things get overwritten. I´m a bit confused by that as I´m new to PhoneGap.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T14:58:06.563

是的，你可以这样做。

1.  制作 640×960px(name:Default@2x~iphone.png) 和 320×480px(name:Default~iphone.png) 的自定义图像

2.  转到[命名您的项目]/资源/splash

3.  替换它们..

# jquery - Getting Error #2060 on localhost (jPlayer.swf)

> ID：11274734
> 
> 赞同：0
> 
> 时间：2012-06-30T14:11:30.030
> 
> 标签：jquery, actionscript-3, localhost, jplayer

My problem is:

*   [This fiddle](https://stackoverflow.com/questions/8786563/jplayer-and-shoutcast-configuration) is working for me.
*   But when I copy-paste the same code (includeing correct paths to jquery, jplayer and Jplayer.swf) I am getting an error:

# ActionScript Error #2060

```
SecurityError: Error #2060: Naruszenie obszaru izolowanego: element wywołujący ExternalInterface http://www.jplayer.org/latest/js/Jplayer.swf nie może uzyskać dostępu do null.
    at flash.external::ExternalInterface$/_evalJS()
    at flash.external::ExternalInterface$/call()
    at Jplayer/init()
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick() 
```

Why would the same code work on a remote server (like jsfiddle) but a local file throws an error?

How can I run this code on my local machine?

# This is how test.html looks like:

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Play a Shoutcast stream - jsFiddle demo</title>

  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
  <script type='text/javascript' src="http://www.jplayer.org/latest/js/jquery.jplayer.min.js"></script>

  <script type='text/javascript'>//<![CDATA[ 
  $(function(){
    $("#jquery_jplayer_1").jPlayer({
        swfPath: "Jplayer.swf",
        ready: function () {
            $(this).jPlayer("setMedia", { mp3: "http://94.23.108.1:8018/;stream/1" });
        },
        supplied: "mp3"
    });
  });//]]>  

  </script>
</head>
<body>
  <div id="jquery_jplayer_1" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar">
            </div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value">
          </div>
        </div>
        <div class="jp-current-time">
        </div>
        <div class="jp-duration">
        </div>
        <ul class="jp-toggles">
          <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
          <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
        </ul>
      </div>
      <div class="jp-title">
        <ul>
          <li>Testing</li>
        </ul>
      </div>
      <div class="jp-no-solution">
        <span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
      </div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:59:47.027

阅读[这篇文章后](http://www.judahfrangipane.com/blog/2007/01/01/securityerror-error-2060-security-sandbox-violation-externalinterface-caller/)，我发现解决方案是：

> **预览**
> 
> ```
> http://localhost
> ```
> 
> **代替
> 
> ```
> 文件：//
> ```** 您可以通过更改以下内容在 localhost 而不是文件系统上查看这些文件，

# python - Pyglet: How to let sprite instances of same class share coordinates?

> ID：11274738
> 
> 赞同：0
> 
> 时间：2012-06-30T14:11:46.910
> 
> 标签：python, class, pyglet

How do you make this code work: Just have pyglet installed and change `assassin1.png`,`assassin2.png` and `assassin3.png` with the name of images stored in the directory where you saved this code to a file.

```
import pyglet

def sprite_type(type_ = "standing"):
    if type_ == "moving-forward":
        moving_forward_image_list = [pyglet.image.load('assassin2.png'), pyglet.image.load('assassin3.png')]
        moving_forward_animation = pyglet.image.Animation.from_image_sequence(moving_forward_image_list, 0.3) 
        return moving_forward_animation
    if type_ == "standing":
        standing_animation = pyglet.image.load("assassin1.png")
        return standing_animation

class Assassin(pyglet.sprite.Sprite):        
    def __init__(self, batch, img):
        pyglet.sprite.Sprite.__init__(self, img, x = 50, y = 30)

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player_dict = {"standing": Assassin(batch = self.batch_draw, img = sprite_type()), "moving-forward": Assassin(batch = self.batch_draw, img = sprite_type(type_ = "moving-forward"))}
        self.player = self.player_dict["standing"]
        self.fps_display = pyglet.clock.ClockDisplay()
        self.keys_held = []      
        self.schedule = pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 

    def on_draw(self):
        self.clear()
        self.fps_display.draw()
        self.batch_draw.draw()
        self.player.draw()  

    def on_key_press(self, symbol, modifiers):
        self.keys_held.append(symbol)
        if symbol == pyglet.window.key.RIGHT:
            self.player = self.player_dict["moving-forward"]
            print "The 'RIGHT' key was pressed"

    def on_key_release(self, symbol, modifiers):
        self.keys_held.pop(self.keys_held.index(symbol))
        self.player = self.player_dict["standing"]

    def update(self, interval):
        if pyglet.window.key.RIGHT in self.keys_held:
            self.player.x += 50 * interval

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

This code displays `assassin1.png` while no key is held at position (50 30), when the right key is held the character moves forward and every 0.3 seconds the 2 images `assassin2.png` and `assassin3.png` are switched as to give the illusion of a walking character. Also the fps are shown.

**Currently when you release the key the character will return to the original position (50, 30). When you press the key again the character moves from the position where the walking character stopped last.**

**I understand why this happens because the walking animation character and the standing character are two different instances of the same class. I first thought using class variables I would be able to store the position. But I can't seem to come up with a working solution. Does anyone have any ideas what I could do?**

## Edit 1 (@Hugh Bothwell)

```
import pyglet

def sprite_type(type_ = "standing"):
    if type_ == "moving-forward":
        moving_forward_image_list = [pyglet.image.load('assassin2.png'), pyglet.image.load('assassin3.png')]
        moving_forward_animation = pyglet.image.Animation.from_image_sequence(moving_forward_image_list, 0.3) 
        return moving_forward_animation
    if type_ == "standing":
        standing_animation = pyglet.image.load("assassin1.png")
        return standing_animation

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img):
        pyglet.sprite.Sprite.__init__(self, img, x = 50, y = 30)

    def stand(self, batch, img):
        self.batch = batch
        self.img = img

    def move(self, batch, img):
        self.batch = batch
        self.img = img      

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player = Assassin(batch = self.batch_draw, img = sprite_type())
        self.fps_display = pyglet.clock.ClockDisplay()
        self.keys_held = []      
        self.schedule = pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 

    def on_draw(self): 
        self.clear()         
        self.fps_display.draw()
        self.batch_draw.draw()
        self.player.draw()  

    def on_key_press(self, symbol, modifiers):
        self.keys_held.append(symbol)
        if symbol == pyglet.window.key.RIGHT:
            self.player.move(batch = self.batch_draw, img = sprite_type("moving-forward"))
            # if I put the following line here instead:
            #self.player = self.player.move(batch = self.batch_draw, img = sprite_type("moving-forward"))
            # I get this error when pressing the <right-direction> key:
            #self.player.draw(), AttributeError: 'NoneType' object has no attribute 'draw'
            print "The 'RIGHT' key was pressed"

    def on_key_release(self, symbol, modifiers):
        self.keys_held.pop(self.keys_held.index(symbol))
        self.player.stand(batch = self.batch_draw, img = sprite_type("standing"))

    def update(self, interval):
        if pyglet.window.key.RIGHT in self.keys_held:
            self.player.x += 50 * interval

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:41:17.383

您需要一个具有运动状态的角色，而不是站立角色和行走角色。

# c++ - 将两个整数值连接成一个 char 数组

> ID：11274740
> 
> 赞同：0
> 
> 时间：2012-06-30T14:12:13.853
> 
> 标签：c++

我试图提取两个 (int32_t) 值，并将它们放在一个 char 数组中。

```
int32_t version = getVersion();

if (version < 0)
{
    return;
}
else
{
    //first part of number needs to be shifted right
    int32_t major = (((version) >>16) & 0xFFFF);
    int32_t minor = ((version) & 0xFFFF);

    // need to concatenate these two values, and place a "." between them

    setVersion(...);//requires a char array, should for example be "1.1"
} 
```

谁能给我任何建议以最好的方式做到这一点？请不要使用 std::strings 。我更喜欢 char 数组。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:15:18.770

你可以雇佣`strstream`

```
char v[255] = {};
{
  std::strstream vs(v, 254);
  vs << major << '.' << minor;
}
setVersion(v); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:16:38.287

这是另一种方法。

```
snprintf(charArray, sizeof(charArray), "%d.%d", major, minor);

// Please check the correctness for format specifier and verify the return 
// value too. 
```

如果您在 Windows 平台上，请使用`_snprintf_s`.

# php - float numbers validation in form

> ID：11274744
> 
> 赞同：2
> 
> 时间：2012-06-30T14:12:42.807
> 
> 标签：php, floating-point, zend-form, zend-framework2

I am trying to have a form with float number validation. when validation works it won't let me click the submit button and will show the proper error message.

I am using zend framework 2 and in my Form I want to retrieve alcohol volume.

I'm trying to use the following code:

```
$this->add($factory->createElement(array(
            'name' => 'alcohol_vol',
            'attributes' => array(
                    'label' => 'alcohol vol%:',
                    'filters'    => array('Float'),
                    'type'  => 'text',
                    'required'   => true,
            ),
    ))); 
```

this doesn't do anything actually. it will pass validation if i enter regular text.

I also tried changing the type to 'Number' from 'text' but then it won't allow me to use floating number. it will allow only none-float numbers :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:31:09.923

ZF2 中没有“Float”过滤器，我想您可能想要的是“Float”验证器，Float Validator 可以像这样添加到 ZF2 表单中：

```
$this->add($factory->createElement(array(
        'name' => 'alcohol_vol',
        'attributes' => array(
                'label' => 'alcohol vol%:',
                'type'  => 'text',
        ),
)));
$factory = new Zend\InputFilter\Factory();

$this->setInputFilter($factory->createInputFilter(array(
    'alcohol_vol' =>     array(
        'name' => 'alcohol_vol',
        'required' => true,
        'validators' => array(
            array(
                'name' => 'Float',
            ),
        ),
    ),
))); 
```

然后你应该在控制器中验证表单，上面的验证器仍然应该设置为表单。如果输入不是浮动的，则输入元素将具有无效消息：

```
$form->setData($userInputData);
if (!$form->isValid()) {
  $inputFilter = $form->getInputFilter();
  $invalids = $inputFilter->getInvalidInput();
  var_dump($invalids);
  // output: 'abc' does not appear to be a float
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:22:27.103

我认为您可以使用此过滤器

`new Zend\I18n\Filter\NumberFormat("en_US", NumberFormatter::TYPE_DOUBLE);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T19:33:15.413

我推荐 Zend\I18n\Validator\Float 类。示例用法：

```
$floatInput = new Input('myFloatField');
$floatInput->getValidatorChain()
           ->attach(new \Zend\I18n\Validator\Float()); 
```

看：

*   [http://framework.zend.com/manual/2.3/en/modules/zend.input-filter.intro.html](http://framework.zend.com/manual/2.3/en/modules/zend.input-filter.intro.html)
*   [http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html#validating-digits](http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html#validating-digits)

# ruby-on-rails - undefined method `schema_cache' for Mongo::Connection

> ID：11274746
> 
> 赞同：0
> 
> 时间：2012-06-30T14:13:20.330
> 
> 标签：ruby-on-rails, mongodb, devise

Trying to *add* Mongodb to an existing app. And I'm getting this error. Not sure how to resolve it let alone understand it.

This comes from me trying to load up the homepage, and Devise is also making a call as so :

```
 1: .grid_24
  2:   .center-stuff
  3:     - if user_signed_in?
  4:       = link_to 'Begin Lesson', esson_path, class: 'button-green'
  5:     - else
  6:       %p Welcome :) 
```

**The error**

```
ActionView::Template::Error (undefined method `schema_cache' for #<Mongo::Connection:0x007f89a7247dd0>): 
```

**My user.rb file**

```
class User < ActiveRecord::Base
  include MongoMapper::Document 
```

**my initializer**

```
require 'mongo_mapper'
MongoMapper.connection = Mongo::Connection.new
MongoMapper.database = "ai_project-#{Rails.env}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:25:32.253

用户模型不应扩展 ActiveRecord。

删除`< ActiveRecord::Base`，你应该很高兴

# php - 我需要在两个不同标签之间使用的每个变量都使用“全局”吗？

> ID：11274747
> 
> 赞同：-1
> 
> 时间：2012-06-30T14:13:27.167
> 
> 标签：php, variables, global

例如：

```
<?php $foo = 'blah'; ?>

<?php echo $foo; ?> 
```

我需要在第二个`global $foo;`之前放一个吗？`echo``<?php ?>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:15:14.443

不，这将按原样正常工作。仅当在函数/类中访问变量或不在声明它的直接范围内访问变量时，才需要使用 global。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:15:48.703

不，你没有。如果您在包含的文件中使用变量，您实际上甚至不必使用 global 关键字。

例如：

文件1.php

```
<?php
$foo = 'a variable';
include 'file2.php';
?> 
```

文件2.php

```
<?php
// here you can use the $foo variable, as it was declared before the inclusion
echo $foo;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T14:26:32.353

在正常情况下，“global”关键字的唯一用途是在函数的范围内以及在函数的局部范围内使用全局变量。例如：

```
<?php
    $globalVariable = 2;
    function myFunction()
    {
        global $globalVariable;

        return $globalVariable;
    }
?> 
```

但是，允许在函数外部使用 global 关键字，因为您可以在函数内部包含文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T14:27:22.703

不，您不需要这样做。只有在更改变量范围时才需要
使用关键字。`global`PHP手册中有一章描述了变量范围和`global`关键字。本讲座将帮助您理解主题：[PHP 手册中的变量范围](http://php.net/language.variables.scope.php)。

# utf-8 - 以 utf8 格式恢复变音符号 - Linux

> ID：11274748
> 
> 赞同：1
> 
> 时间：2012-06-30T14:13:29.937
> 
> 标签：utf-8, text-files, restore, diacritics

我有几个文本文件，里面全是这样的句子：“Mais, tu n'as pas fait tes devoirs ?!” -\u00c9l\u00e8ve：“本非”

有没有一种快速的方法（脚本或实用程序）可以恢复 utf8 格式的所有变音符号？（预期结果：Élève：“Ben non”）

我可以使用 sed 手动完成，但由于我的文本文件包含几种语言特有的变音符号，这将花费太多时间。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:53:13.073

我找到了...

```
python -c "print (open('filetoconvert.txt','rb').read().decode('unicode-escape').encode('utf-8'))" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:29:18.520

如果您安装了 Java JDK，则会调用一个实用程序`native2ascii`来将文件与 unicode 转义符进行转换。例如：

```
native2ascii -reverse filetoconvert.txt > converted.txt 
```

# mysql - 删除与正则表达式匹配的所有行中的某些字符？

> ID：11274750
> 
> 赞同：0
> 
> 时间：2012-06-30T14:13:42.040
> 
> 标签：mysql, sql, regex, replace

我想改变

```
{foo, {bar}, foobar} 
```

至

```
{foo, bar, foobar} 
```

在所有匹配的行中`'{.*{'`。即删除所有花括号 { 和 } 除了最外面的一对。

这样做

```
mysql -h $H -u $U -p$P $DB -B -e "SELECT id FROM t WHERE col REGEXP '{.*{'" > bad.txt 
```

选择需要此替换的所有行。我如何快速进行这种替换？

### 编辑：

我可以这样做吗

```
update table set column = REPLACE(column,'{',''); 
```

然后恢复出最多的一对

```
update table set column = REPLACE(column,'^','{');

update table set column = REPLACE(column,'$','}'); 
```

### 我收到错误

```
mysql> EXPLAIN UPDATE t SET col=REPLACE(REPLACE(REPLACE(REPLACE(col,'{{','{'),'}}','}'), ', {', ', '), '}, ', ', ');
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE t SET col=REPLACE(REPLACE(REPLACE(REPLACE(' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:24:18.147

我确信有一种更详细的方法可以一步完成，但快速的“n 脏”方法是删除所有 {}，并在完成后包装整个集合。

```
UPDATE table
SET column = CONCAT('{', REPLACE(REPLACE(column,'{',''),'}',''), '}')
WHERE column REGEXP '{.*{' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:11:18.370

不幸的是，MySQL 不支持正则表达式中的反向引用（允许用括号对子表达式进行分组并在同一表达式中调用它们匹配的值）。您可以将 SELECT 查询的结果导出到文本文件（例如 CSV 格式）中，替换所有出现的

```
{(.*){(.*)}(.*)} 
```

和：

```
\1\2\3 
```

使用支持 Perl 正则表达式语法的文本编辑器，然后用修改后的行替换原始行。

注意这个查询：

```
UPDATE table
SET column = CONCAT('{', REPLACE(REPLACE(column,'{',''),'}',''), '}')
WHERE column REGEXP '{.*{' 
```

只有在保证整个文本被一对大括号包裹的情况下才有效！

# java - Spring - Spring-WS 带有带有附件的 SOAP 或带有 JAXB 作为数据绑定器的 MTOM

> ID：11274752
> 
> 赞同：2
> 
> 时间：2012-06-30T14:14:46.837
> 
> 标签：java, spring, soap, jaxb, spring-ws

我有一个 Spring-WS Web 服务，我希望能够将二进制数据发送回客户端。我的意图是将 SOAP 响应格式化为使用 MTOM 或带有附件的 Soap。响应将是一个 JAXB 对象。

我已经设置了 Spring-WS 环境并且可以使用 JAXB 发送和接收请求。然而，我正在努力设置二进制附件响应，因为网络上的大多数教程和信息主要与客户端发送附件有关，而我对服务器将附件发送回客户端感兴趣。

两个问题：

*   将二进制数据返回给客户端的推荐方法是什么？带有附件、MTOM 的 SOAP 还是只是简单地将 base64 编码的数据作为 xml 标记返回？

*   是否有任何示例显示如何配置 Spring-WS 以使用两种方法中的任何一种返回二进制附件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:04:28.943

1) Mtom 显然是通过soap 发送文件的事实标准，所以我建议这样做。

2) 如果您查看 spring-ws 发行版（不是来自 maven）附带的 mtom 示例，您将看到所需设置的 90%。一个区别是您的附件的预期内容类型，您应该将其设置为 application/octet-stream

现在您在服务器上的代码将如下所示

```
try {
        dataHandler = new DataHandler(new File("/tmp/test.exe").toURL());
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    return new JaxbObjectResponse("id", dataHandler); 
```

您的架构定义看起来像这样。

```
<xsd:element name="JaxbObjectResponse">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="id" type="xsd:string" />
            <xsd:element name="file" type="xsd:base64Binary" xmime:expectedContentTypes="application/octet-stream" />
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

# javascript - SDK 2.0：更改日期字段行大小而不会丢失编辑

> ID：11274753
> 
> 赞同：1
> 
> 时间：2012-06-30T14:14:59.047
> 
> 标签：javascript, extjs, rally

我正在使用 2.0 SDK 为投资组合项目创建一个集会网格，包括“PlannedEndDate”字段。这真的很好，因为如果有人想编辑该字段，它会显示一个日历编辑器。

但我想让 PlannedEndDate 小于标准宽度。但是，当我这样做时，我失去了不错的编辑功能和其他默认设置。如何更改宽度，但又不丢失所有其他不错的默认值？

我正在更改 columnCfgs 从：

```
PlandEndDate, 
```

到：

```
{ dataIndex: 'PlannedEndDate', width: 35, text:'Planned End' } 
```

我需要使用一些花哨的 xtype 或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:31:05.683

如果您将此添加到您的 PlannedEndDate 列配置中，它应该可以工作：

```
editor: {
    xtype: 'rallydatefield',
    format: Rally.util.DateTime.getUserExtDateFormat(),
    validateOnChange: false
} 
```

我们希望围绕网格中列的处理方式进行一些重构，以使这样的事情更容易。

# php - 如何将订单插入数据库，然后重定向到 Paypal

> ID：11274756
> 
> 赞同：1
> 
> 时间：2012-06-30T14:15:14.763
> 
> 标签：php, mysql, button, paypal, e-commerce

编辑：

让我重新表述我的问题。我试图在重定向到贝宝之前将订单插入 mysql 数据库。现在，我必须分两步完成。按下将重定向到存储订单的另一个页面的按钮，然后重定向到包含 Paypal Checkout 按钮的另一个页面。

贝宝按钮本身就是一个带有隐藏输入的表单。我想知道是否有办法一步到位。即当我按下paypal 按钮时，它会在重定向到paypal 之前将我的订单输入到mysql 数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T16:05:48.347

是的，您可以发出一个`header()`更新`Location:`

```
header('Location: https://www.paypal.com/cgi-bin/webscr?' . http_build_query($vars)); 
```

`$vars`所有必要的变量在哪里：

```
 $vars = array(
            'cmd' => '_xclick',
            'business' => $paypal_email,
            'lc' => 'GB',
            'item_name' => $item_name,
            'item_number' => $item_number,
            'amount' => number_format($amount, 2),
            'notify_url' => $notify_url,
            'return' => $return_url,
            'currency_code' => 'USD',
            'button_subtype' => 'goods',
            'no_note' => 0,
            'tax_rate' => 0,
    ); 
```

这将导致浏览器在没有页面加载的情况下重定向到 PayPal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:03:26.770

在您的选择付款页面中，当点击提交时，将订单保存在您的订单表中，但将状态设置为 0 或未完成。然后，创建一个可用于在 paypal 中返回 url 的另一个文件。你可以称之为confirmation.php。在其中编写一个代码，将状态更新为 1，这意味着付款成功，现在可以处理订单了。

在您的贝宝连接脚本中，将返回 url 设置为 Confirmation.php 以便执行更新状态。

差不多就是这样。

# iphone - 更新包含预填充数据库的应用程序

> ID：11274761
> 
> 赞同：0
> 
> 时间：2012-06-30T14:15:37.773
> 
> 标签：iphone, objective-c, ipad, core-data

我有一个应用程序正在使用一个包含大约 3.000 条记录的相当大的数据库。以前我在第一次启动应用程序时已经加载了数据库，但是我现在拥有的记录数量我正在实施一个预填充的数据库以节省时间。

我的问题是从应用商店更新应用到设备时会发生什么，应用会知道数据库有更新版本并加载新数据库，还是继续使用应用中已经处于活动状态的数据库？

我在我的应用程序中使用此代码来使用预填充的核心数据数据库：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
  if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
}

NSString *storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"database.sqlite"];

/*
 Set up the store.
 For the sake of illustration, provide a pre-populated default store.
 */
NSFileManager *fileManager = [NSFileManager defaultManager];
// If the expected store doesn't exist, copy the default store.
if (![fileManager fileExistsAtPath:storePath]) {
    NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"sqlite"];
    if (defaultStorePath) {
        [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
    }
}

NSURL *storeUrl = [NSURL fileURLWithPath:storePath];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]; 
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

NSError *error;
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
    // Update to handle the error appropriately.
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    exit(-1);  // Fail
}    

return persistentStoreCoordinator; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:47:27.020

假设您当前在应用商店中的应用是 1.0 版。这个应用程序在首次启动时下载了一个数据库。现在，您将发布一个新版本 1.1，它将在应用程序本身中捆绑数据库。

当现有应用程序 (1.0) 的用户升级到 1.1 时，发生的事情完全在您的控制之下。实际上，1.1 版可以在第一次启动时检查数据库是否存在于 1.0 版安装它的用户目录中。如果它在那里，那么版本 1.1 知道它应该通过从资源目录复制它来升级数据库。

实际上，无论如何都必须将数据库复制到用户目录，因此通过检查您可以确保不会删除任何用户数据。

通常，您可能会在 中存储版本号`NSUserDefaults`，以便您的应用程序的每个未来版本都有办法知道它是否是升级或新安装（如果版本号存在，那么它是从该特定版本升级，否则是新安装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:18:25.727

当您更新应用程序时，已经创建的文件仍然存在，因此您的应用程序的旧版本仍将使用您在旧版本中创建的旧数据库

# java - 在学习 RESTful WebServices 之前有什么先决条件吗？

> ID：11274762
> 
> 赞同：1
> 
> 时间：2012-06-30T14:15:40.183
> 
> 标签：java, web-services

我对 Java 中的 Web 服务一无所知，最终我需要在 Java 中做一些 REST 工作，而且我想在本周开始学习它 d :) 所以我的问题是我需要先学习 Java Web 服务之前我可以学习 REST Web 服务吗？我首先需要学习的知识的先决条件是什么？以及您建议的资源。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:57:14.090

Java Web 服务的东西与 REST 服务只有很小的关系。

两者都是 Web 的“远程服务”，因此它们具有相同的问题：对象表示、安全性、错误处理等。

但是您不需要学习 WS-* 的复杂性，例如服务定义 (WSDL)、SOAP... 和一大堆东西。

当您想要“自动”将对象转换为 XML 或 JSON 时，Java 中 REST 和 WS 之间的小关系就出现了。因为基于[JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)的 Java REST 框架可以通过使用 JAXB（Java XML 绑定）来做到这一点，这是一种在 Java WS 框架中也使用的对象转换框架。但是您也不需要使用该对象转换的东西。

一些与 JAX-RS 兼容的框架（如[Apache CXF](http://cxf.apache.org/)）也可用于执行 JAX-WS（Web 服务的 Java 标准 API）。但请注意，像 CXF 这样的通用服务框架必须处理您不需要学习的其他复杂性（例如对不同传输的支持）。

你首先需要学习什么？

*   Java Servlet：您不需要成为 servlet 方面的专家，但是 REST 服务安装在 Java servlet 基础架构上，并且有关它的知识会有所帮助。

*   依赖注入 (DI)：当您开始使用 REST 资源访问数据库或其他服务时，您需要传递一些协作对象来执行此操作。大多数框架通过使用 DI 解决了这个问题。例如，大多数 JAX-RS 框架都可以与 Spring 或 Guice 一起使用。

    **提示：**我发现很多人使用 Spring 或 Guice，因为......教程表明这是正确的方法。但是他们不知道要解决什么，并以复杂的不可维护的东西结束。我的建议是，在使用任何 DI 框架之前，首先要了解它们背​​后的概念。

*   （可选）一点点 JavaScript 和 AJAX。如果您计划从网页使用 REST 服务，最好了解如何使用它们。

**已编辑：**提及 Apache CXF，并使用术语 JAX-RS 而不是特定实现的 Jersey。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:48:45.517

理查德森的书在这里有一个很好的总结：[http](http://martinfowler.com/articles/richardsonMaturityModel.html) ://martinfowler.com/articles/richardsonMaturityModel.html ，

# assembly - NASM 生成的列表文件中操作码中的括号是什么意思？

> ID：11274778
> 
> 赞同：4
> 
> 时间：2012-06-30T14:16:47.673
> 
> 标签：assembly, nasm, opcode, instructions

查看由 NASM 生成的列表文件时，我看到有三种操作码：

1.  没有括号。
2.  带圆括号。
3.  带方括号。

他们是什么意思？什么时候使用它们？

这是一个展示上述所有内容的列表文件示例：

```
 1                                  section .text
 2                                      extern printf
 3                                      extern fgets
 4 00000000 313233                  str3:   db "123"
 5                                  main:
 6 00000003 68[00000000]                push    str1
 7 00000008 68[09000000]                push    str2
 8 0000000D 68[00000000]                push    str3
 9 00000012 E8(00000000)                call    func1
10 00000017 E8(04000000)                call    func2
11 0000001C E80B000000                  call    func3
12 00000021 E8(00000000)                call    printf
13 00000026 E8(00000000)                call    fgets
14 0000002B C3                          ret
15                                  
16 0000002C 90                      func3:  nop
17 0000002D C3                          ret
18                                  
19                                  
20                                  section .text1
21 00000000 90                      func1:  nop
22 00000001 90                          nop
23 00000002 90                          nop
24 00000003 C3                          ret
25                                  
26 00000004 90                      func2:  nop
27 00000005 90                          nop
28 00000006 90                          nop
29 00000007 C3                          ret
30                                  
31                                  
32                                  section .data
33                                  
34 00000000 313233343536373839      str1:   db "123456789"
35 00000009 313233343536373839      str2:   db "123456789" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T16:12:12.650

他们显示了在链接时将应用重定位的位置。

`[nnnnnnnn]`显示绝对重定位（当链接器执行重定位时，某些节的基地址将被添加到偏移量）。例如，一旦二进制文件完全链接，`push str2`指令中的那些字节将被更改为包含`.data`+的基地址`0x09`。

`(nnnnnnnn)`显示 PC 相对重定位（用于调用和分支，其中最终值必须相对于下一条指令的地址）。例如，指令中的字节将使用 的最终地址和下一条指令 ( )的地址`call func2`之间的差异进行更新。`func2``call func3`

指令本身没有括号，`call func3`因为在这种情况下不需要重定位 -`call`指令需要一个相对地址，但`func3`在同一段内，所以相对地址是已知的（下面的指令是 at `.text + 0x21`，并且`func3`是 at `.text + 0x2c`，所以相对地址`0xb`与 ) 的最终地址无关`.text`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T16:17:30.237

括号和方括号表示其中的指令字节部分取决于引用对象的位置，该位置尚不完全清楚（可能由操作系统中的链接器和/或程序加载器设置或更改）。

在这里，函数的地址是未知的，因为它们没有在这个文件中定义，所以括号中的全是零：

```
12 00000021 E8(00000000)                call    printf
13 00000026 E8(00000000)                call    fgets 
```

这里，`func3`相对于地址的地址`call func3`是已知的（距离是2Ch-21h=0Bh）并且不会改变，所以它是固定的，没有括号或括号：

```
11 0000001C E80B000000                  call    func3
12 00000021 ...
...
16 0000002C 90                      func3:  nop 
```

这里，在`str2`组装时部分地址是已知的，因为它可能会在链接时更改，因为它取决于部分之间的距离，因此有括号：

```
 7 00000008 68[09000000]                push    str2 
```

顺便说一句，我无法区分括号和括号之间的区别，也许是代码与数据。NASM 文档可能是检查它的好地方。如果那里没有描述，有可用的 NASM 源代码，你也可以做更多的“测试”。

# javascript - JavaScript - 比较两个时间戳

> ID：11274782
> 
> 赞同：0
> 
> 时间：2012-06-30T14:17:23.773
> 
> 标签：javascript

我尝试像这样比较两个时间戳：

```
var nowDate = new Date();
var givenDate = new Date(parseInt(year), parseInt(month), parseInt(day), parseInt(hour), parseInt(minute), 0);
var nd_timestamp = nowDate.getTime();
var gd_timestamp = givenDate.getTime();

if (nd_timestamp > gd_timestamp) {
    alert("yes");   
} 
```

但它不能正常工作。如果我查看 nd_timestamp 和 gd_timestamp 一切看起来都很好，但是 if 子句不起作用。如果我删除 parseInt(year)... 并输入 Date(2012, 04, 20, 0, 0, 0)，则 if 子句正在工作。

变量年，月等来自一个函数，但如果我用警报（年）等调试它，一切都很好。通过表格给出的日期小于实际日期。

有人知道为什么它不能使用变量吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:20:31.573

您应该检查传递给`Date`构造函数的值的有效性，其中包括*明确*指定`10`所有调用的第二个参数[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)以避免令人讨厌的意外。

关于第二个参数，文档说

> 虽然此参数是可选的，但始终指定它以消除读者混淆并保证可预测的行为。当未指定基数时，不同的实现会产生不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:33:44.833

您必须从 Month 中取 1，因为由于某种原因它是从零开始的，这与其他的不同。

# ajax - 使用 jquery $.post 在 Wordpress 自定义元框中添加“添加另一个”选项

> ID：11274788
> 
> 赞同：1
> 
> 时间：2012-06-30T14:18:10.403
> 
> 标签：ajax, wordpress

我正在创建一个带有自定义帖子类型的 wordpress 插件，并在该帖子中键入自定义元框。

在元框中，我有一个让用户输入的表单：日期、媒体、标题。

表格如下所示：

```
$mc_date = get_post_meta($_GET['post'],'mc_date',true);
$mc_media = get_post_meta($_GET['post'],'mc_media',true);
$mc_title = get_post_meta($_GET['post'],'mc_title',true);

echo '<form id="add_media_form">';
echo '<table>';
echo    '<tr>';
echo        '<td>Date</td><td>Media</td><td>Title</td>';
echo    '</tr>';
echo  '<tr>';
echo        '<td><input type="text" name="mc_date" value="'.$mc_date.'" class="datepicker"/></td>';
echo        '<td><input type="text" name="mc_media" value="'.$mc_media.'" /></td>';
echo        '<td><input type="text" name="mc_title" value="'.$mc_title.'" /></td>';
echo        '<td><a href="#" class="add_new_media" rel="'.WP_PLUGIN_URL.'/mc"><img src="'.WP_PLUGIN_URL.'/mc/plus.png" /></a></td>';
echo  '</tr>';
echo '</table>';
echo '</form>';
echo '<div class="addmedianotify"></div>'; 
```

jQuery：

```
jQuery('.add_new_media').click(function(e){
    var plug = jQuery(this).attr('rel');
    e.preventDefault();
    jQuery.post(plug + '/ajax_add_media.php',jQuery('#add_media_form').serialize(),function(data){
        jQuery('.addmedianotify').html('<span>'+data+'</span>');
    });
}); 
```

我想要做的是，当用户单击“add_new_media”链接/图像时，会出现一组新的日期、媒体和标题文本框。

我主要担心的是，命名这些动态输入的诀窍是什么。并保存和检索其中的自定义数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T21:35:51.770

因为当用户单击“更新”时页面仍会更新，所以您需要能够将字段保存在 save_post 和 ajax 中。为此使用 ajax 可能不是最好的方法，因为您需要两次保存该数据，从而为自己做更多的工作。我会放弃 ajax 并简单地使用一个[html 数组](http://www.thefutureoftheweb.com/blog/use-arrays-with-html-form-inputs)，这样您就可以添加字段并在用户单击“更新”时进行一次提交。要根据用户需要添加新行，我只需克隆您的 tr 并将其附加到单击事件中的表中。就像是...

PHP 和 HTML

```
<a href="#" class="add_new_media"><img src="'.WP_PLUGIN_URL.'/mc/plus.png" /></a>
<table>
    <tr>
        <td>Date</td>
        <td>Media</td>
        <td>Title</td>
        <td></td>
    </tr>
    <?php
    //$mcs will be a multi-dimensional array with this method
    $mcs = get_post_meta($post->ID,'mcs',true);

    //Loop through each set of saved mc data (date, media, and title per item) and output inputs so the saved values can be edited and resaved. 
    foreach ($mcs as $mc) : ?>
    <tr>
        <td><input type="text" name="mc[][date]" value="<?php echo $mc['date'] ?>" class="datepicker"/></td>
        <td><input type="text" name="mc[][media]" value="<?php echo $mc['media'] ?>" /></td>
        <td><input type="text" name="mc[][title]" value="<?php echo $mc['title'] ?>" /></td>
        <td><a href="#" class="remove">Remove</a></td>
    </tr>
    <?php endforeach ?>
</table> 
```

Javascript

```
<script>
    (function($){
        //Grab the first 
        $('.add_new_media').click(function(e) {
            //Use the first tr as a cookiecutter and add another cookie to the bowl :) 
            $('table tr:first-child')
                .clone()
                .appendTo($('table'))
                .find('input')
                    .val('')
        }
        $('.remove').click(function(){
            $(this).parent().parent().remove()
        })
    })(jQuery)
</script> 
```

表单提交时的 PHP

```
<?php
    if ($_POST) : 

        //$_POST['mc'] is a multi-dimensional array of all the date/media/title input rows
        print_r($_POST['mc']);
        /*
            ..would look something like
            Array (
                [0] => Array (
                    'date' => 'some value',
                    'media' => 'some value',
                    'title' => 'some value'
                ),
                [1] => Array ( ... ),
                [2] => Array ( ... ) ... and so on
            )
        */

        //RUN INPUT VALIDATION!!

        //Update the list
        update_post_meta($post->ID, 'mcs', $_POST['mc']);
    endif;
?> 
```

# jquery - 加载和动画巨大的图像

> ID：11274792
> 
> 赞同：0
> 
> 时间：2012-06-30T14:18:53.540
> 
> 标签：jquery, jquery-animate

我有一些巨大的图像尺寸，它是动画的，向左滚动。表现非常糟糕。我希望一开始只有 2 张图片。然后用户单击左箭头或右箭头我需要显示加载器图像然后拉图像。那可能吗？如何？请告诉是否还有其他方法可以做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:28:05.770

我认为这不是您要寻找的答案，但我认为您应该只使用简单的动画（淡入淡出或其他），为什么？，因为动画的性能很大程度上取决于浏览器和电脑（或device) 运行浏览器，浏览器的版本，我曾经浪费很多时间试图修复所有浏览器上的所有性能问题。

# msr - 哪些型号特定的寄存器控制 Ivy Bridge Xeon 上的 RAM 纠错？

> ID：11274797
> 
> 赞同：-1
> 
> 时间：2012-06-30T14:20:03.670
> 
> 标签：msr

如何确定 Ivy Bridge 系统上的纠错功能是否有效？（需要 Xeon 12xx-v2 CPU 和 ECC UDIMM 的组合）。

理想情况下，这种方法也可以在没有必要硬件的系统上运行（并返回 ECC 已禁用），并在硬件存在时检查内存控制器配置。但就我的目的而言，我只需要它在一个绝对具有 ECC 功能的 CPU 和 RAM 的系统上工作。

通常我会使用诸如 MemTest86+ 之类的现有工具来检查这一点，但它尚未更新以支持 Ivy Bridge。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T23:14:05.407

在 IVB 处理器上，ECC 在芯片组 (CSR) 中控制，而不是通过 MSR。

具体来说，在 IVB 上，它位于总线 1、设备 15 和 29 中，偏移量为 0x7C 位 2。这应该由 BIOS/MRC 在平台启动期间根据 DIMM 中报告 DIMM 是 ECC 的 SPD 信息进行编程能够（以及其他设置）。

# ios5 - 在 iOS 5 中的 UITableViewCell 中就地编辑文本？

> ID：11274800
> 
> 赞同：0
> 
> 时间：2012-06-30T14:20:49.723
> 
> 标签：ios5, uitextfield, nstableviewcell

我知道这个问题之前已经回答过了，下面的答案看起来还不错。

[https://stackoverflow.com/a/4124023/1098059](https://stackoverflow.com/a/4124023/1098059)

但是，大多数答案都可以追溯到 iOS 5 之前。对于 iOS 5 中的新静态表格，插入文本字段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:44:28.170

如果表格具有静态内容（行数和节数是恒定的），最简单的方法是在情节提要或 xib 中添加标签、文本字段等。

# android - 如何在 OpenGL Android 中镜像纹理位图？

> ID：11274803
> 
> 赞同：1
> 
> 时间：2012-06-30T14:21:33.677
> 
> 标签：android, opengl-es, bitmap, textures, mirror

当我将纹理应用到形状时，我一直看到它是镜像的。GLU.gluLookAt 设置为向上 5 个单位，所以它是 GLU.gluLookAt(gl, 0, 0, 5, 0, 0, 0, 0, 2, 0);。如果它向下 5 个单位，x 轴就会反转，这将是一个更大的问题。

你能告诉我如何将正在加载的位图镜像为纹理吗？我想保持轴的位置和绘制的形状，我只想自动镜像位图。

你能告诉我怎么做吗？也许给我一个在 x 轴上镜像位图的代码序列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T15:04:39.697

您应该能够反转您正在使用的纹理映射坐标。对于水平镜像，反转`u`值。对于垂直，反向`v`。

# ruby-on-rails - 如何在同一页面上呈现相同的表单？

> ID：11274804
> 
> 赞同：0
> 
> 时间：2012-06-30T14:21:39.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我很想知道这是怎么做到的。假设我有一个简单的`Product`模型，并且想在一个页面上单击一个链接并通过 AJAX 添加一个产品表单。我比弹出其他产品表单，完成第一个并提交它并对其他产品做同样的事情。

这是我将使用的代码。

* * *

在索引页面上，您可以通过链接添加产品表单，创建它并在列表中查看它。

**产品/index.html.erb**

```
<h1>Products</h1>

<%= link_to "Product", new_product_path, :remote => true %>

<div id="product_form">
  <%= render 'form' %>
</div>

<ul id="products">
  <%= render :partial => @products.reverse %>
</ul> 
```

**产品/_form.html.erb**

```
<%= form_for(@product, :remote => true) do |f| %>
    <%= f.text_field :name %>
    <%= f.text_field :price %>
  <%= f.submit %>
<% end %> 
```

**产品/_product.html.erb**

```
<%= content_tag_for(:li, product) do %>
  <p><%= product.name</p>
  <p><%= product.price %></p>
<% end %> 
```

**产品控制器**

```
def index
  @products = Product.all
  @product = Product.new
end

def create
  @product = Product.new(params[:product])

  respond_to do |format|
    if @product.save
      format.html { redirect_to products_url }
      format.js
    else
      format.html { render action: "index" }
      format.js
    end
  end
end 
```

当它被创建时，它应该在`_product`部分中显示产品。

**产品/create.js.erb**

```
$('#products').prepend('<%= escape_javascript(render(@product)) %>'); 
```

单击该链接将使产品表单出现在`<div id="product_form">`

**产品/new.js.erb**

```
$("#product-form").html("<%= escape_javascript(render(:partial => 'products/form', locals: { product: @product })) %>"); 
```

现在这会生成一个产品表单，但我想知道在同一页面上呈现其他产品表单背后的代码逻辑。这将如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:07:37.437

通常我使用代表产品集合的第二个对象来执行此操作。如果它符合您的业务逻辑（例如 ProductCategory 或 ShoppingCart）或带有保存每个相关产品的保存方法的简单 ActiveModel“产品”，则它可以是一个活动记录。

[Active Presenter](https://github.com/jamesgolick/active_presenter)可以为您提供有关此机制的更多详细信息，但我不会使用该 gem，因为它的活动性非常低。

# javascript - 骨干渲染返回这个

> ID：11274806
> 
> 赞同：24
> 
> 时间：2012-06-30T14:22:03.740
> 
> 标签：javascript, backbone.js

我试图找出一些“模式”来建立一个骨干项目。在下面的示例中，在“render”函数中，作者返回了一个“this”的实例。

为什么是这样？它是特定于示例的，还是 Backbone 常见的？我不明白为什么要在“渲染”函数中返回“this”。

**例子**

[http://backbonefu.com/2011/08/filtering-a-collection-in-backbone-js/](http://backbonefu.com/2011/08/filtering-a-collection-in-backbone-js/)

[在 Backbone 渲染方法中调用 jQuery 插件](https://stackoverflow.com/questions/7107904/calling-a-jquery-plugin-in-a-backbone-render-method)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-30T14:37:38.717

这只是一种常见做法，因此您可以调用`render()`并链接另一个方法调用。

*View*不会在页面中插入其 HTML 内容是一种常见的模式，并且这项工作是由首先实例化*View*的实例完成的。

那么你必须在实例化视图的代码中编写如下内容：

```
var myView = new MyView({ model: myModel });
myView.render();
$(myDOMElement).html( myView.el ); 
```

但是如果`render()`返回 View 本身，你可以像这样编写上面的代码：

```
var myView = new MyView({ model: myModel });
$(myDOMElement).html( myView.render().el ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-30T14:39:10.230

返回的意思`this`，是为了提供***链接的可能性***。

例如，让我们假设：

```
 var obj = {
      prop1 : 0,
      method1 : function(){
      },
      method2 : function(){
      }
 };
 //Then you could do something like:
 obj.method1();
 obj.method2();
 obj.prop1 = 1; 
```

`obj`您需要单独执行所有操作。

现在考虑：

```
 var obj = {
      prop1 : 0,
      method1 : function(){
          return this;
      },
      method2 : function(){
          return this;
      }
 };
 //Now you could do these
 obj.method1().prop1 = 1;
 obj.method1().method2().method1(); 
```

# jquery - 使用 FormWizard 尝试为相关问题创建书签

> ID：11274807
> 
> 赞同：0
> 
> 时间：2012-06-30T14:22:09.010
> 
> 标签：jquery, formwizard

下午/上午

我使用有 10 个问题的 Jquery formwizard

1.  第一个问题
2.  第二个问题
3.  第三题等一直到第10题

我试图在侧面创建一个书签，这样用户就可以从问题中来回跳转，而不必按下下一个/上一个按钮，但是我在尝试让它工作时遇到了一个小问题......

以下是表单向导的布局方式我没有发布所有 10 个问题，因为我不想阻塞此页面，但请参阅以下 3 个问题

 `````
<a href="#" id="lnk3" style="color:Black">Go to Question 3</a>
      <div id="feedbackform">
            <fieldset class="sectionwrap" id="Q1">
                <legend>Question 1</legend>
                <p>
                    Which one of this five words means the same as <strong>TIRED</strong>? Write the number in the Answer
                    Square.</p>
                <ol>
                    <li>LATE</li>
                    <li>CLIMB</li>
                    <li>HEAVY</li>
                    <li>WEARY</li>
                    <li>SLOW</li>
                </ol>
                <p style="margin-left:-5%">
                    <asp:TextBox ID="Q1Answer" runat="server" class="TextBox" />
                </p>
            </fieldset>
            <fieldset class="sectionwrap" id="Q2">
                <legend>Question 2</legend>
                <p>
                    One of these numbers is wrong, because is does not follow the regular order of the
                    other numbers in the row.<br />
                    <br />
                    Write the number which is wrong in the Answer Square</p>
                <p style="margin-left: 32%">
                    <strong>2 4 6 8 10 11 14 16</strong>
                </p>
                <div class="WhiteSpace">
                </div>
                <p style="margin-left: -5%">
                    <asp:TextBox ID="Q2Answer" runat="server" class="TextBox" />
                </p>
            </fieldset>
            <fieldset class="sectionwrap" id="Q3">
                <legend>Question 3</legend>
                <p>
                    LID is related to BOX as CORK is related to......?<br />
                    <br />
                    Write the number of the correct word in the Answer Square.
                </p>
                <ol>
                    <li>WATER</li>
                    <li>LIFE BELT</li>
                    <li>BOTTLE</li>
                    <li>TREE</li>
                    <li>FLOAT</li>
                </ol>
                <p style="margin-left: -5%">
                    <asp:TextBox ID="Q3Answer" runat="server" class="TextBox" />
                </p>
            </fieldset>
    </div> 
````  `如您所见，当用户单击此我试图让表单向导转到问题 3 时，我在顶部有一个 id 为 lnk3 的 href。

这是我的 Jquery，我在其中捕获链接的点击

 `````
 $("a[ID='lnk3']").live('click', function()
   {
     $('#feedbackform>Fieldset>ID=Q3');

    }); 
````  `但可悲的是它不起作用？请记住，formwizard 是一个插件，我确定您已经尝试过创建了一个 JSFiddle，但遗憾的是我无法在其上安装 formwizard 插件，您可以在此处查看 formqizard 的示例[http://www.dynamicdrive.com/动态索引16/formwizard.htm](http://www.dynamicdrive.com/dynamicindex16/formwizard.htm)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:25:07.380

元素可以通过ID直接选择，不推荐使用use`on`代替，`live`可以试试`offset`and `scrollTop`；

```
$("#lnk3").on('click', function(e){
   e.preventDefault();
   var t = $('#Q3').offset().top;
   $(window).scrollTop(t)
}); 
```````

# jquery-mobile - 在 jquerymobile 中提交后关闭对话框

> ID：11274812
> 
> 赞同：1
> 
> 时间：2012-06-30T14:22:53.007
> 
> 标签：jquery-mobile

我有一个文件列表，在每个 li 元素的末尾我有一个按钮，看起来像

```
<a href="/urlToDialogView/" data-rel="dialog"><div class="settingsBtn"></div></a> 
```

在对话框中，我得到了一个表格。A 想提交一些数据然后关闭对话框。老实说，我认为我遗漏了一些简单的东西，提交工作但我不想在 php 端加载任何 html 数据，我只想关闭对话框。

我完成了这个但启用了 ajaxform 插件并手动处理它：

```
$(document).delegate("#myDialog", "pageinit", function() {
    $('#myForm').submit(function() { 
        $(this).ajaxSubmit({
        success: function() {
            $('.ui-dialog').dialog('close');        
        }
        }); 
        return false; 
    }); 
}); 
```

但这似乎是一个错误的解决方案。我没有ajax加载器图片，jquery移动框架有ajax处理的一切，但是没找到怎么关闭对话框=(

我会很感激任何帮助，谢谢。

# javascript - 提交前带有中间 Web 服务调用的 HTML 表单

> ID：11274813
> 
> 赞同：1
> 
> 时间：2012-06-30T14:22:58.313
> 
> 标签：javascript, jquery, html, ajax

我有一个 HTML 表单来更新提交给 Java servlet 的帐户中的地址。

问题是，表单不应该接受自由流动的地址文本。相反，用户应该输入邮政编码/门牌号/街道名称，然后点击搜索按钮。

此搜索需要转到 Web 服务，执行身份验证并获取与搜索条件匹配的有效地址列表。

这个地址列表应该以相同的形式显示给用户（取消隐藏隐藏元素或使用模式对话框），以便用户可以选择他的地址。

只有在选择了有效地址后，用户才能点击表单提交按钮，将数据发送回 servlet。

我不确定如何让这 2 个按钮在表单中执行不同的操作。我对 JavaScript 非常陌生，非常感谢任何指针或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:43:02.420

为您的 Web 服务构建基于搜索结果（基本字符串）的值的输出。将此数据放入 JSON 语句或只是一个 javascript 数组。

返回看起来像这样的东西。['SearchResult1', 'SearchResult2', 'SearchRESult3']

在您的搜索框中。绑定更改或模糊的功能。

```
$('#SearchBox').bind('change', function(){

   var val = $(this).val();
   //Please reference the Jquery Ajax function as im typing this from memory and i always mix one or two things up :).
   $.ajax({
     "type" : "post",
     "url"     : "yoururlhere",
     "data"    : { "search":val },
     success   : function(dataset){

        //When it comes back here check to see if its valid data etc etc

        //After you validate you can populate a picklist on the page with the values.  Or do anything you want with the values like this

        for(x in dataset){
           $('#DocumentElement').append('<p>'+ dataset[x] +'</p>');
        }

     }
   });

}); 
```

这应该让你开始。之后，您可以在回调上做更多的事情，或者以更适合您的方式修改 dom :)。

# ruby-on-rails - Rails：小控件，实现模型内部的所有逻辑

> ID：11274816
> 
> 赞同：0
> 
> 时间：2012-06-30T14:23:38.427
> 
> 标签：ruby-on-rails, ruby

我在控制器中编写了这段代码：

```
def list
  @codes = Code.order("created_at")
  @languages = Language.order('name').collect {|l| [l.name, l.coderay]} 
```

`@codes`是一个帖子数组。每个代码都有`language`字段`cpp`或`text`字符串。它包含 coderay 令牌。
`@languages`是格式的编程语言数组`['C++', 'cpp'], ['Plain Text', 'text']`。
换句话说，格式`Language`是`:name, :coderay`. 我只在视图中使用它来制作选择框。所以我使用 :coderay 作为主键，但是 ruby`:id`​​ 为这个模型添加了自己的 PK。并且这些模型没有关联。

IDE 给我写了这个警告：

> 控制器操作应该调用一个模型方法而不是初始 find 或 new
> 如果控制器操作在初始 .find 或 .new 之后包含多个模型方法调用，则此检查会发出警告。建议您在模型类内部实现所有业务逻辑，并使用单一方法访问它

解决此问题的最佳解决方案是什么？
1）在and之间添加1-to-m链接`Codes`并`Language`进行`:coderay`PK。
2) 忽略此警告
3) 移至`Language.order('name').collect {|l| [l.name, l.coderay]}`查看。

我认为最好的解决方案是（1），我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:27:00.847

如果您只需要一次选择，则 3 在这种情况下是最好的

```
select("post", "person_id", Person.all.collect {|p| [ p.name, p.id ] }, { :include_blank => true }) 
```

Rails 文档中的示例

并且不要创建您的业务逻辑不需要的关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:37:42.540

`Language`您可以实施选项 1 以在您的和之间添加一对一的链接，`Code`方法是使用属于并设置外键。

代码.rb

```
belongs_to :language, foreign_key: 'coderay', primary_key: 'language' 
```

语言.rb

```
has_many :codes, foreign_key: 'coderay', primary_key: 'language' 
```

但是，如果您想为选择框加载静态数据，我通常更喜欢从控制器中的 before_filter 执行此操作并将其传递给视图。

您可能还喜欢`decent_exposure`宝石。- [https://github.com/voxdolo/decent_exposure](https://github.com/voxdolo/decent_exposure)

# php - 带有 mySQL 数据库的多用户 PHP 应用程序 - 不同的用户相同的表？

> ID：11274820
> 
> 赞同：1
> 
> 时间：2012-06-30T14:24:13.607
> 
> 标签：php, mysql, sql, database

只是一个简单的问题 - 我正在编写一个严重依赖 SQL 数据库的 PHP 应用程序。我有点担心很多用户都访问同一个数据库会导致错误。如果是这样，我该如何克服这个，可以做些什么？

我不确定最终有多少用户会使用它，不是数百个，而是可能 5 个或 10 个甚至 20 个。即便如此，他们也不太可能同时更新，但仍然如此。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:37:25.613

[MySQL 事务](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-transactions.html)是您正在寻找的。
然后是 PHP [PDO 扩展](http://php.net/manual/en/book.pdo.php)及其[事务管理](http://www.php.net/manual/en/pdo.transactions.php)。

# c# - 如何为 UDP 数据包发送者启用自定义 IP 地址？

> ID：11274827
> 
> 赞同：1
> 
> 时间：2012-06-30T14:25:18.260
> 
> 标签：c#, .net, windows, visual-studio-2010, sockets

所以我正在制作一个小的 UDP 数据包发送者，但我有一个问题。我已经设置好了，当用户点击“按钮 2”时，他们会自动向我指定的 IP 发送一个数据包。我怎样才能使用户可以将自己的IP地址放入其中并成为数据包发送到的IP？这是我到目前为止的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Net.Sockets;
using System.Net;
using System.IO;

namespace ProjectTakedown
{
    public partial class Form1 : Form
    {
        public Form1() //where the IP should be entered
        {
            InitializeComponent();
        }

        private void button2_Click(object sender, EventArgs e) //button to start takedown
        {
            byte[] packetData = System.Text.ASCIIEncoding.ASCII.GetBytes("<Packet OF Data Here>");
            string IP = "127.0.0.1";
            int port = 80;

            IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), port);

            Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            client.SendTo(packetData, ep);
        }

        private void Stop_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

另外，我如何获得停止按钮来停止该过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:29:31.500

您可以`TextBox`在 GUI 上有一个允许用户输入表示 IP 地址的字符串，当单击按钮时，您可以获取内容并使用它们发送数据包：

```
private void button2_Click(object sender, EventArgs e) //button to start takedown
{
     byte[] packetData = System.Text.ASCIIEncoding.ASCII.GetBytes("<Packet OF Data Here>");
     string IP = textBox1.Text; // take input by user
     int port = 80;

     IPEndPoint ep = new IPEndPoint(IPAddress.Parse(IP), port);

     Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
     client.SendTo(packetData, ep);
} 
```

# ruby-on-rails-3 - will_paginate - 按字母数字列出？

> ID：11274828
> 
> 赞同：0
> 
> 时间：2012-06-30T14:25:24.593
> 
> 标签：ruby-on-rails-3, will-paginate

谁能推荐如何使用 will_paginate gem 按字母数字对列表进行分页？

有这个插件： [http ://sermoa.wordpress.com/2010/08/25/rails-alphabetical-pagination/](http://sermoa.wordpress.com/2010/08/25/rails-alphabetical-pagination/)

但我希望能够使用 will_paginate 的方法

谢谢！

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:40:20.540

我只是在我的模型中添加了这个：

```
default_scope order: 'users.name ASC' 
```

尽管您也可以在控制器中执行此操作：

```
@users = User.page(params[:page]).order(:name) 
```

与 kaminari 一起工作，我想，will_paginate

# c# - 如何在asp.net mvc中创建域指定的cookie

> ID：11274830
> 
> 赞同：1
> 
> 时间：2012-06-30T14:25:31.240
> 
> 标签：c#, asp.net-mvc-3, cookies, subdomain, cookieless

我在我的网站上创建了一个 www 域（一个永久重定向到 www.* 的域）。我还为我的资源（JS、CSS 等）创建了一个子域（称为 static.domain）。但是我在主域 (www.domain.com) 上的 cookie 也被发送到 static.domain.com 如何设置 cookie 路径以仅在 www 中启用？提前致谢。

# r - 在 r 中创建共同作者网络

> ID：11274835
> 
> 赞同：1
> 
> 时间：2012-06-30T14:26:10.983
> 
> 标签：r, dataframe, igraph

我想使用 igraph 创建一个共同作者网络。

我的数据组织在一个 data.frame 中，如下所示：

```
DF1 <- cbind(Papers =  paste('Paper', 1:5, sep = ''),
             Author1 = c('A', 'D', 'C', 'C', 'C'),
             Author2 = c('B', 'C', 'F', NA, 'F'),
             Author3 = c('C', 'E', NA, NA, 'D')) 
```

我想创建一个如下所示的边缘列表：

```
 Vertex1 Vertex2
        A       B
        D       C
        C       F
        C       F
        A       C
        D       E
        C       D
        B       C
        C       E
        F       D 
```

无论如何在R中这样做（例如igraph）

以下函数可以解决问题，但对于大型数据集（超过 5,000 篇论文），运行时间太长

```
Fun_DFtoEdgeList <- function (Inputdataframe)
{

  ## This function create an edge list to create a network
  ## Input : Dataframe with UNIQUE VALUES !!!!

  ResEdgeList <- data.frame(Vertex1 = c('--'), Vertex2 = c('--'))

  for (i in 1 : (ncol(Inputdataframe)-1))
  {
    for (j in 2: (ncol(Inputdataframe)))
    {
      if (i !=j)     
      {
        #print(paste(i, j, sep ='--'))

        ToAppend <- data.frame(cbind(Inputdataframe[,i], Inputdataframe[,j]))
        names(ToAppend) <- names(ResEdgeList)
        #print(ToAppend)

        ResEdgeList <- rbind(ResEdgeList, ToAppend)
      }
    }

  }

  ResEdgeList <- data.frame(ResEdgeList[-1,], stringsAsFactors = FALSE)
  ResEdgeList<- subset(ResEdgeList, (is.na(Vertex1) == FALSE ) & (is.na(Vertex2) == FALSE ))  
  ResEdgeList
}

Fun_DFtoEdgeList (DF1[,-1]) 
```

`` 任何帮助表示赞赏。（我之前曾在不同的标题下发布过这个问题，但被告知我不够清楚）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:30:56.980

您的代码不会生成您提供的数据，因为它正在遍历“Paper”列。它也会被证明很慢，因为每次您附加到现有对象时，R 都必须获取整个对象的另一个副本……当您迭代地执行此操作时，事情会变得缓慢。查看您的输出，我认为这是您想要的：

```
#First, creat all combos of the columns you want. I don't think you want to include the "Paper" column?

x <- combn(2:4,2)
#-----
     [,1] [,2] [,3]
[1,]    2    2    3
[2,]    3    4    4

#next use apply to go through each pair:
apply(x, 2, function(z) data.frame(Vertex1 = DF1[, z[1]], Vertex2 = DF1[, z[2]]))
#-----
[[1]]
  Vertex1 Vertex2
1       A       B
2       D       C
3       C       F
4       C    <NA>
5       C       F
....
#So use do.call to rbind them together:

out <- do.call("rbind", 
        apply(x, 2, function(z) data.frame(Vertex1 = DF1[, z[1]], Vertex2 = DF1[, z[2]])))

#Finally, filter out the rows with NA:
out[complete.cases(out),]
#-----
   Vertex1 Vertex2
1        A       B
2        D       C
3        C       F
5        C       F
6        A       C
7        D       E
10       C       D
11       B       C
12       C       E
15       F       D 
```

最后，看看这如何扩展到更大的问题：

```
#Just over a million papers
zz <- matrix(sample(letters, 1000002, TRUE), ncol = 3)
x <- combn(1:3, 2)
system.time(do.call("rbind", 
                    apply(x, 2, function(z) data.frame(Vertex1 = zz[, z[1]], Vertex2 = zz[, z[2]]))))
#-----
user  system elapsed 
  1.332   0.144   1.482 
```

1.5秒对我来说似乎很合理？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:37:09.523

可能有更好的方法来做到这一点，但是 try `combn`，它会产生所有独特的组合：

```
DF1 <- cbind(Papers =  paste('Paper', 1:5, sep = ''),
             Author1 = c('A', 'D', 'C', 'C', 'C'),
             Author2 = c('B', 'C', 'F', NA, 'F'),
             Author3 = c('C', 'E', NA, NA, 'D'))

require(igraph)
l=apply(DF1[,-1],MARGIN=1,function(x) na.omit(data.frame(t(combn(x,m=2)))))
df=do.call(rbind,l)
g=graph.data.frame(df,directed=F)
plot(g) 
```

# php - 过滤数组对象 (PHP)

> ID：11274846
> 
> 赞同：4
> 
> 时间：2012-06-30T14:26:53.727
> 
> 标签：php, array-filter, arrayobject

我有我的数据**`ArrayObject`**，只是代表一个数组。我需要**过滤**数据，功能**`array_filter()`**会很好用。但是，它不能**用作**`ArrayObject`参数。最好的治疗方法是什么？是否有任何标准功能可以为我处理过滤？

例子：

```
$my_data = ArrayObject(array(1,2,3));
$result = array_object_filter($my_data, function($item) { return $item !== 2; }); 
```

有什么`array_object_filter`功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T14:36:46.440

你将它导出到一个实际的数组，然后创建一个新的数组对象怎么样？

```
$my_data = new ArrayObject(array(1,2,3));
$result = new ArrayObject( 
    array_filter( (array) $my_data, function($item) { 
         return $item !== 2; 
    })
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-29T07:42:22.470

如何继承 ArrayObject 并向其添加新方法：

```
/**
 * Filters elements using a callback function.
 *
 * @param callable $callback The callback function to use
 *
 * @return self
 */
public function filter(/* callable */ $callback = null)
{
    $this->exchangeArray(array_filter($this->getArrayCopy(), $callback));
    return $this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:30:58.097

这个怎么样：

```
$my_data = new ArrayObject(array(1,2,3));
$callback = function($item) { return $item !== 2; };
$result = new ArrayObject;
foreach ($my_data as $k => $item) if ($callback($item)) $result[$k] = $item; 
```

或者，您可以自己定义一个 array_object_filter() 函数：

```
function array_object_filter($array, $callback) {
    $result = new ArrayObject;
    foreach ($array as $k => $item) if ($callback($item)) $result[$k] = $item;
    return $result;
} 
```

# node.js - 在 Mac OSX 10.5 上运行 Node.js 或 NPM 时出现“进程内存不足”

> ID：11274848
> 
> 赞同：5
> 
> 时间：2012-06-30T14:27:03.897
> 
> 标签：node.js, npm, osx-leopard, webstorm

我对 Mac 和 Node.js 都是全新的，如果这个有点基础，很抱歉。

我正在运行 Mac OS X 10.5 (Leopard)，并且刚刚安装了最新版本的 Node.js（已发布版本，不是从源代码构建的）。

每当我尝试运行 Node 或进行 NPM 安装时，都会收到以下错误消息：

```
FATAL ERROR: CodeRange::GetNextAllocationBlock Allocation failed - process out of memory 
```

有谁知道问题是什么？如果没有，下一步将如何解决这个问题？

**编辑：**事实证明，如果我多次运行这些命令，它们最终会起作用。所以我的解决方法是不断重复命令，直到我成功。这总比没有好，但仍然不能接受。需要执行这些工具的 WebStorm 等软件不知道这种解决方法，并且总是失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:19:54.473

在 OSX 10.6 之前的任何版本上运行 Node 的分布式构建时，似乎会出现此问题。

如果您没有升级操作系统的选项，您可以自己手动构建二进制文件。

[http://therobotsbrain.blogspot.com.au/2012/03/installing-nodejs-on-os-x-105.html](http://therobotsbrain.blogspot.com.au/2012/03/installing-nodejs-on-os-x-105.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T18:29:27.957

我正在运行 X.5.8，节点 0.10.13 给了我这个错误消息。我尝试了一些早期版本的节点，0.10.3 可以工作，而 0.10.4 会收到错误消息。这是 x86 版本，x64 似乎在 0.3 时崩溃，但在 0.0 时工作。哦等等，比这更复杂。当我在 /usr/local/bin 中对应用程序进行符号链接时，似乎有所不同，它崩溃了。更频繁。尝试几个不同的，看看哪些适合你。

我真的需要买一台新的笔记本电脑。

在这里下载：[http ://nodejs.org/dist/](http://nodejs.org/dist/)

# php - Twig：更新位于代码前面的变量

> ID：11274849
> 
> 赞同：2
> 
> 时间：2012-06-30T14:27:08.347
> 
> 标签：php, symfony, twig

我需要在页面顶部显示一个值，在页面中间运行一些 Twig 循环后需要更新该值。

这是一个例子：

```
<div>Total Amount: {{ totalAmount }}</div>
{% for product in products %}
    {% set totalAmount = totalAmount + product.amount %}
{% endfor %} 
```

我可以在 Symfony 控制器中计算值，但出于某些原因，我更喜欢在 Twig 模板中执行此操作。

Twig 可以实现上述目标吗？我确定 Twig 代码是按顺序执行的，我可能必须找到不同的解决方案。但我想看看是否有人有任何建议。

谢谢，

JB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T20:04:29.420

使用块。

在您的主模板（布局）中：

```
<div>Total Amount: {% block totalAmount %}{% endblock %}</div> 
```

在您的子模板中：

```
{% for product in products %}
    {% set totalAmount = totalAmount + product.amount %}
{% endfor %}

{% block totalAmount %}{{ totalAmount }}{% endblock %} 
```

# algorithm - 使用不同大小的元组查找最近的邻居

> ID：11274851
> 
> 赞同：0
> 
> 时间：2012-06-30T14:27:12.570
> 
> 标签：algorithm, search, variables, tuples, dimensions

我目前正在研究语音识别。我必须将未知声音的特征（就频率而言）与我们知道的其他声音特征进行比较。
具体来说，我们确定了声音频谱中的“峰值”（=共振峰），它们是该声音特有的（即特征化的）。我们将这些峰值的频率存储为元组。我们记住已知声音的元组。它们有数千（如果不是数十万）。
对于要识别的每个新声音，我们将该声音的元组与已知声音的元组进行比较。这需要做很多比较！

我需要找到一种方法来快速比较这些元组。

我已经查过了，发现这是一个**最近邻搜索**问题。 **但是我不认为我可以使用这些算法。**

实际上，元组可以具有不同数量的组件。这些分量只是频率（以 kHz 为单位）。它可以是 (1 ; 2) 或 (1 ; 2.4 ; 4 ; 5 ; 6 ; 7 ; 7.1 ; 11 ; 12.1; 13) （最多 20 个分量）。

**所以我的问题是：**我没有具有相同“维度”的元组的数据集，我怎样才能找到最近的邻居？

据我了解，为了应用最近邻算法，必须具有*相同维度的元组*。

谢谢你读我。
祝你今天过得愉快！

**编辑：**
我不仅需要找到最近**的**邻居，我实际上还需要找到与我的参考点的距离小于 D 的**所有邻居点。**

**EDIT2：**
@random_hacker：不，他们没有。您可以将元组的元素与另一个元组的元素进行比较，前提是这两个元素之间的差异小于阈值。

**EDIT3：**
你是绝对正确的mathias，我只是输入了一些“随机”的东西。事实上，元组的元素是按频率排序（升序）的，而且元组的每个频率实际上只出现一次。所以 (4 ; 2) 是错误的，应该是 (2 ; 4) 而 (2 ; 2 ; 4) 不存在，它是 (2;4) （不再重复）

# cuda - CUDA 共享内存是否也被缓存

> ID：11274853
> 
> 赞同：2
> 
> 时间：2012-06-30T14:27:17.867
> 
> 标签：cuda, gpu, shared-memory, cpu-cache

在我的 CUDA 应用程序中，我将数据从设备内存复制到共享内存。该数据是否也缓存在 L1 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T14:32:50.653

默认情况下，来自全局内存的所有内存加载都缓存在 L1 中。全局内存加载的目标位置对 L1 缓存没有影响（无论是寄存器，还是共享内存或线程本地内存）。共享内存本身显然没有被缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:54:57.353

这只是为了扩展@talonmies 所说的内容。

复制是低级别的两个独立操作，加载和存储。如果加载和存储访问全局内存，则加载和存储都可以缓存在 L1 和 L2 中。

由于副本的加载部分来自全局内存，因此默认情况下它将同时缓存在 L1 和 L2 中。因此，除非编译器检测到从全局内存复制到共享内存的特殊情况并使用非缓存加载，否则您最终会得到两个可以在相同延迟下访问的数据副本，因为共享内存和 L1 缓存是使用相同的物理片上存储器。

来自 CUDA C 编程指南 4.2：

> 每个多处理器都有一个 L1 缓存，所有多处理器共享一个 L2 缓存，这两者都用于缓存对本地或全局内存的访问，包括临时寄存器溢出。缓存行为（例如，读取是否缓存在 L1 和 L2 中或仅在 L2 中）可以使用加载或存储指令的修饰符在每次访问的基础上进行部分配置。

我找不到有关如何从 CUDA C 修改此行为的任何信息。

# java - 从数组中提取信息

> ID：11274856
> 
> 赞同：0
> 
> 时间：2012-06-30T14:27:38.150
> 
> 标签：java, string, arraylist, hashmap

我有一个像`String[] selectedJobs = {"job,1","job,2", "Job2,1", "job3,1"};`

我想提取信息，例如

```
Job -> 1,2

Job2 -> 1

Job3 -> 1

Map<String, List<String>> jobs = new HashMap<String, List<String>>(); 
```

我想**将每个作业与相应的整数列表存储在 map 中**。

这个怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:31:24.467

1.  在 "," -> "job", "1" 上拆分第一个字符串
2.  检查地图中有一个“工作”键，如果没有创建它并为该键放置一个新的数组列表
3.  将“1”添加到数组列表
4.  环形

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:30:57.330

你试过什么？该算法不应该很棘手：遍历您的数组，为每个字符串拆分“，”，并将其放入您描述的 HashMap 中。

# c# - 提取矩形坐标

> ID：11274860
> 
> 赞同：1
> 
> 时间：2012-06-30T14:28:36.007
> 
> 标签：c#, image-processing, aforge

我编写了一个代码来从图像中定位矩形（我可以在图像本身上绘制矩形）。我现在要做的是获取图像上矩形对象的坐标。我正在使用 Rectangle 类来获取矩形信息。有没有办法我可以做到这一点？

这是我使用的代码

```
private void ProcessBW(Bitmap bitmap)
{
BlobCounter blobCounter = new BlobCounter();

blobCounter.FilterBlobs = true;
//blobCounter.MinHeight = 6;
//blobCounter.MinWidth = 6;

blobCounter.ProcessImage(bitmap);

// create Image Object using rear image byte[]
System.Drawing.Image imageR = (System.Drawing.Image)bitmap;

// Derive BitMap object using Image instance, so that you can avoid the issue
//"a graphics object cannot be created from an image that has an indexed pixel format"
Bitmap img = new Bitmap(new Bitmap(imageR));

Rectangle[] rects = blobCounter.GetObjectsRectangles();
//Graphics object to draw
Pen pen = new Pen(Color.Red, 2);
Graphics g = Graphics.FromImage(img);                  

foreach (Rectangle rect in rects)
{
    g.DrawRectangle(pen, rect);
}
pictureBox1.Image = img;
pen.Dispose();
g.Dispose();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:40:18.997

我设法检索了矩形的坐标。这对我来说很愚蠢，而且我对 C# 还是很陌生。矩形类提供了诸如 x、y、宽度和高度组件之类的方法，这些组件可以为我提供矩形的位置

# google-app-engine - 开发人员 appengine 使用 users.create_logout_url(self.request.uri) 抛出 404 Not Found 错误

> ID：11274863
> 
> 赞同：1
> 
> 时间：2012-06-30T14:28:53.790
> 
> 标签：google-app-engine, http-status-code-404, logout

此语句可能引发 404 错误似乎不合逻辑。有任何想法吗？

```
users.create_logout_url(self.request.uri)

INFO     2012-06-30 16:20:47,374 dev_appserver.py:2952] "GET /('/_ah/login?continue=http%3A//localhost%3A8082/%3FID%3DtestBSchott&action=Logout',) HTTP/1.1" 404 - 
```

新信息如下。

```
key = db.Key.from_path("PQ", ID_id)
person = PQ.get(key)
if person: #person's ID DOES exist already
    if user and user == person.user: #user is owner and may revise the existing page
        choices = ' '.join(person.choices)
        url = users.create_logout_url(self.request.uri),
        template_values = {'ID_id':person.key(),
                'p': person,
                'choices': choices,
                'url': url 
                }
        logging.info("7 url %s" % url )
        logging.info("7 template_values %s" % template_values )
        path = os.path.join(TEMPLATE_DIR, 'add_person.html')
        self.response.out.write(template.render(path, template_values)) 
```

我没有在上面的 template_values 中显示所有变量；只是关键的。但是从下面的日志中，您可以看到 url 的值在 template_values 中已更改为您诊断出的讨厌的元组。我的问题是为什么以及我能做什么？

```
INFO     2012-06-30 19:10:38,479 views.py:209] 7 url /_ah/login?continue=http%3A//localhost%3A8082/%3FID%3DtestBSchott&action=Logout
INFO     2012-06-30 19:10:38,479 views.py:210] 7 template_values {'month': 9, 'year': 2012, 'years': [2012, 2013, 2014], 'day': 3, 'url': ('/_ah/login?continue=http%3A//localhost%3A8082/%3FID%3DtestBSchott&action=Logout',), 'months': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], 'ID_id': datastore_types.Key.from_path(u'PQ', u'testBSchott', _app=u'dev~youpoll'), 'days': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31], 'choices': u'Less Same More', 'p': <models.PQ object at 0x10bd6bf10>, 'nowyear': (2012,)}
INFO     2012-06-30 19:10:38,479 views.py:212] 6 path /Users/brian/googleapps/YouPoll/templates/add_person.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:05:25.340

感谢您的日志。获取的 URL 不正确：

```
/('/_ah/login?continue=http%3A//localhost%3A8082/%3FID%3DtestBSchott&action=Logout',) 
```

这是一个“/”，后跟一个带有一个项目的 python 元组，这是正确的 URL。你对 create_logout_url 调用的结果做了什么？尝试直接记录调用结果；如果它是一个元组，那是应用程序引擎中的一个错误，但我的猜测是你稍后会以某种方式将它放入一个元组中。

# haskell - “导入合格的 Data.List”语句中的“合格”是什么意思？

> ID：11274864
> 
> 赞同：55
> 
> 时间：2012-06-30T14:28:58.210
> 
> 标签：haskell

我明白了`import Data.List`。

但是`qualified`声明中的意思是什么`import qualified Data.List`？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-30T14:30:38.453

合格的导入使导入的实体仅以合格的形式可用，例如

```
import qualified Data.List

result :: [Int]
result = Data.List.sort [3,1,2,4] 
```

使用 just `import Data.List`，实体以合格形式和不合格形式提供。通常，只做一个合格的导入会导致名字太长，所以你

```
import qualified Data.List as L

result :: [Int]
result = L.sort [3,1,2,4] 
```

合格的导入允许使用从多个模块导入的同名函数，例如`map`from`Prelude`和`map`from `Data.Map`。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-30T14:32:43.040

如果您执行非限定导入（默认），您可以仅通过名称引用任何导入的内容。

如果您进行了合格的导入，则必须在名称前加上导入它的模块。

例如，

```
import Data.List (sort) 
```

这是不合格的进口。您现在可以说`sort`或`Data.List.sort`。

```
import qualified Data.List (sort) 
```

这是一个合格的进口。现在`sort`本身是行不通的，你不得不说`Data.List.sort`。

因为那很长，通常你会说类似

```
import qualified Data.List (sort) as LS 
```

现在你可以写了`LS.sort`，它更短。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-30T14:32:18.470

关键字`qualified`表示导入模块中的符号不​​会导入到非限定（无前缀）命名空间中。它们仅以其完整的限定名称可用。例如，`foldr'`有非限定名`foldr'`和限定名`Data.List.foldr'`。

一种使用合格的导入来防止命名空间污染。也可以使用`import qualified Foo as Bar`, 导入自，`Foo`但名称好像导入源自`Bar`. 例如，如果您键入`import qualified Data.List as L`，则可以使用`foldr'`as `L.foldr'`。

# java - EmployeeStore 的搜索方法。使用哈希映射

> ID：11274868
> 
> 赞同：0
> 
> 时间：2012-06-30T14:29:20.450
> 
> 标签：java, search, hashmap, store

我目前正在申请存储员工详细信息，例如姓名、身份证和电子邮件地址。我正在使用 HashMap 执行此操作。我目前在使用 searchByName、id 和电子邮件地址方法时遇到困难。我将如何去写一个？

这是我的代码：

```
//Imports.
import java.util.Scanner;
//********************************************************************  
public class MainApp
{
    private static Scanner keyboard = new Scanner(System.in);

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
        Store.print();
   }
}

//Imports.
import java.util.HashMap;
//********************************************************************
public class EmployeeStore 
{
    HashMap<String, Employee> map;

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee employee)
    {

        map.put(employee.getEmployeeName(), employee);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Clear the Hashmap : Employee.
    public void clear()
    {
        map.clear();
    }
    //********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for (Employee employee : map.values())
        {
            System.out.println("Employee Name:\t" + employee.getEmployeeName());
            System.out.println("Employee Id:\t" + employee.getEmployeeId());
            System.out.println("E-mail:\t"+ employee.getEmployeeEmail());
        }

    }
    public Employee get(String name){
        return map.get(name);
    }

//********************************************************************  
//********************************************************************

}

//Imports:

//********************************************************************
//Employee Class.
public class Employee
{
//Variables.
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//********************************************************************  
//Constructor.
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//********************************************************************
//Getters.
    public String getEmployeeEmail() {
        return employeeEmail;
    }
    public void setEmployeeEmail(String employeeEmail) {
        this.employeeEmail = employeeEmail;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public int getEmployeeId() {
        return employeeId;
    }
//********************************************************************
//toString method.
    public String toString() {
        return "Employee [employeeName=" + employeeName + ", employeeId="
                + employeeId + ", employeeEmail=" + employeeEmail + "]";
    }
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:41:50.403

在您的 EmployeeStore 中，您可以添加您提到的各种方法：

1.  searchByName 很容易实现，因为这是你的地图的关键，所以一个简单`map.get(name)`的就可以了
2.  对于其他 2 个，您有 2 个选项：
    *   为每种类型的搜索创建一个映射（因此您将并行维护 3 个映射，其中一个键是名称，一个键是电子邮件，一个键是 id）。每张地图都将包含相同的员工。您可以像 1 中那样实现搜索。这更快但使用更多内存
    *   遍历地图 ( `for(Employee e : map.values()) {...}`) 的值并检查每个员工的电子邮件是否与搜索的值匹配

# c# - Devexpress SearchlookUpEdit 搜索模式

> ID：11274869
> 
> 赞同：0
> 
> 时间：2012-06-30T14:29:26.887
> 
> 标签：c#, .net, devexpress

我正在使用 Devexpress SearchLookUpEdit V 11.2。对于搜索模式，如果我写例如 (Value01 Value02) 它的工作方式类似于以下 sql 代码：

```
WHERE MyField LIKE %Value01% OR MyField LIKE %Value02% 
```

但我想做的是这样的：（AND，不是 OR）

```
WHERE MyField LIKE %Value01% AND MyField LIKE %Value02% 
```

我没有找到要设置的属性或类似的东西，所以我写了一个扩展方法来过滤我的数据，但为此，我应该处理（在查找面板中键入）的事件。在哪里做？这是过滤我的数据的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:17:54.957

因此，我为产生这种行为所做的事情如下：使用`PopupContainerEdit`,`PopupContainerControl`和 a创建用户控件`GridControl`：

![用户控制：自定义查找编辑](../Images/6e35c41db4424f468512efd4a3ab776c.png)

我还通过执行我的搜索方法处理了我的 PopupContainerEdit 的 EditValueChanged 事件，并且为了控制何时应该执行搜索算法，我使用了`System.Windows.Forms.Timer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T05:06:04.067

有一个搜索模式选项，例如包含，以...开头。转到属性更改 popupfilterMode。

# android - 使用广播接收器的短信过滤器

> ID：11274870
> 
> 赞同：1
> 
> 时间：2012-06-30T14:29:28.787
> 
> 标签：android, sms, broadcastreceiver

我试图从收件箱中隐藏一些消息，然后转身并将其放置在一个新数据库中....我的代码为 SmsFilter.java 如下

```
public class SmsFilter extends BroadcastReceiver{

SQLiteDatabase mydb,messagedb;
String number;
ArrayList<String> private_num = new ArrayList<String>();

@Override
public void onReceive(Context context, Intent intent) {

//private named database contains numbers those which i wish to hide

    mydb=context.openOrCreateDatabase("private", 0,null);
    mydb.execSQL("CREATE TABLE IF NOT EXISTS tab1(num INT(13))");

    Cursor  cur=mydb.rawQuery("select * from tab1", null);
    while(cur.moveToNext())
    {
        number=cur.getString(cur.getColumnIndex("num"));

        private_num.add(number);
    }

    if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
        Bundle extras = intent.getExtras();

        if (extras != null) {

            Object[] pdus = (Object[])extras.get("pdus");

            if (pdus.length < 1) return;

            StringBuilder sb = new StringBuilder();
            String sender = null;

            for (int i = 0; i < pdus.length; i++) {

                SmsMessage message = SmsMessage.createFromPdu((byte[]) pdus[i]);

                if (sender == null) sender = message.getOriginatingAddress();

                String text = message.getMessageBody();
                if (text != null) sb.append(text);

            }
            for(int i=0;i<private_num.size();i++)
            {
                if (sender.equals(private_num.get(i))) {

             // create a new database and insert messages

                    messagedb=context.openOrCreateDatabase("message",0, null);
                    messagedb.execSQL("CREATE TABLE IF NOT EXISTS tab2(sender INT(13),body varchar)");
                    mydb.execSQL("INSERT INTO tab2 VALUES('"+sender+"','"+sb+"')");

                    abortBroadcast();
                }

            }

        }
    }

}} 
```

也表现如下

```
<uses-permission android:name="android.permission.RECEIVE_SMS"/>

<receiver android:name=".SmsFilter">

            <intent-filter android:priority="1">

                <action android:name="android.provider.Telephony.SMS_RECEIVED" />

            </intent-filter>

    </receiver> 
```

但是我无法通过这个接收器隐藏我的消息....这是什么原因？......任何人帮助我......我有麻烦......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:32:56.113

将优先级增加到可能的最高整数..that **"intent-filter android:priority="2^32-1"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-15T10:32:39.640

更改您的代码：

```
<receiver android:name=".SmsFilter">

        <intent-filter android:priority="100">

            <action android:name="android.provider.Telephony.SMS_RECEIVED" />

        </intent-filter>

</receiver> 
```

# javascript - jquery .click() 事件不起作用

> ID：11274872
> 
> 赞同：0
> 
> 时间：2012-06-30T14:29:51.057
> 
> 标签：javascript, jquery

这是我的jQuery代码：

```
$(function(){
$.post("/person/keywords/get/", function(data){
    for(i=0; i<data.length; i++)
    {
        count = count + 1;
        $(".keywords-set").append('<div class="keyword-item"><span class="keyword" id="keyword-'+count+'">'+data[i]+'</span><textarea class="comment" id="comment-'+count+'"></textarea></div>');
    }
});

$(".keyword-sets").on('click', "[id^=keyword]", function(event) {
    event.preventDefault();
    alert("yes");
});
}) 
```

在页面加载时，我从服务器获取一些数据，然后将其附加到 html。click 事件不适用于附加的 html 项目。对于我通过 .post() 请求从服务器获得的所有项目，我都遇到了这个问题。

这是我完整的 HTML 和 jQuery 代码：

[https://gist.github.com/3023937](https://gist.github.com/3023937)

还有一件事，我认为问题发生在在 html 中使用 jQuery 代码（而不是作为外部文件）。我在另一个项目中有这种类似类型的代码，我在外部文件中有 jquery 代码，它可以正常工作。为什么会这样？

PS如果您需要更多详细信息，我可以给您。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:32:19.053

这段代码：

```
$(".keyword-sets") 
```

说“集合”复数，但我在其他任何地方都看不到那个符号。也许你的意思是：

```
$(".keyword-set").on("click", ... 
```

*编辑*——哎呀“.keywords-set”...

# database - 如何跟踪股票投资组合中不断变化的项目？

> ID：11274875
> 
> 赞同：0
> 
> 时间：2012-06-30T14:30:10.817
> 
> 标签：database, algorithm, finance, financial

我有一个系统，人们可以在其中挑选一些股票并评估他们的投资组合，但我每天都无法以有效的方式做到这一点，因为我正在为没有任何变化的日子创建条目（想想看就像我正在衡量价值并进行版本控制，以便我可以跟踪投资组合设计方式的变化）。

这是一个例子（每天的投资组合，带有股票名称和权重）：

```
Day1:
ibm = 10%
microsoft = 50%
google = 40%

day5:
ibm = 20%
microsoft = 20%
google = 40%
cisco = 20% 
```

我可以在第 1 天测量投资组合的价值，并了解我需要在第 5 天（当它发生变化时）再次测量它，但是如何在不重新创建第 1 天在数据库中的条目的情况下测量第 2-4 天？

我现在的方法（我不喜欢）是在我的数据库中创建一个临时条目，用于当有人更改投资组合时，然后在一天结束时我计算值，如果有一个临时条目我会使用它我使用最近几天的数据创建了一个新条目（用于第 2-4 天）。问题是因为数据通常不会改变，所以我创建的条目基本上是重复的。问题是：我的股票数据都是每天的。我还考虑过投资组合，如果它在 3 天内没有更新，以找到每只股票最近 3 天的回报，但我不确定是否有更好的解决方案。

有任何想法吗？我认为这是一个直截了当的问题，但我只是看不到一种有效的方法。

注意：在财务方面，它被称为创建资产净值，大多数公司这样做的效率很低，但这是因为这个过程是在 50 年前创建的，并且没有改变。我认为这个问题与版本控制非常相似，但我似乎无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:45:38.257

在存储方面最有意义的是只存储：

UserId - StockId1 - 23% - 2012-06-25 UserId - StockId2 - 11% - 2012-06-26 UserId - StockId1 - 20% - 2012-06-30

所以你看到股票 1 在 30 日下跌。现在，如果您想知道 28 日的 StockId1 百分比，您只需选择：

```
SELECT * 
FROM stocks 
WHERE datecolumn<=DATE(2012-06-28) 
ORDER BY datecolumn DESC LIMIT 0,1 
```

如果它什么也没给你，你就没有它，否则你把最后一个位置拿回来。

顺便提一句。例如，如果您需要一张股票 1 的图表，您可以将联接与一张充满日期的表格相对应。然后，您可以轻松地填补空白。

例如在这里找到这篇文章：

```
UPDATE mytable
SET number = (@n := COALESCE(number, @n))
ORDER BY date; 
```

[SQL QUERY 用前一个已知值中的值替换行中的 NULL 值](https://stackoverflow.com/questions/1345065/sql-query-replace-null-value-in-a-row-with-a-value-from-the-previous-known-value)

# java - 如何在 Weebly 上找到上传文件的路径？

> ID：11274881
> 
> 赞同：2
> 
> 时间：2012-06-30T14:30:38.803
> 
> 标签：java, html, path, applet

我正在尝试使用 Weebly 制作自己的网站。我想包含我制作的 Java Applet，因此我必须在网站上使用 HTML 片段。在片段中，我必须包含我上传的 Applet 的路径才能运行。我怎样才能得到这个路径，因为我不知道上传文件后文件的最终位置。我在一篇文章中看到每个用户每次上传都会获得一个非常具体的路径，但他们是如何发现这一点的？有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-01T06:27:15.610

Weebly 默认为其子域站点提供控制内容的能力，因此当您通过代码编辑器（Weebly 主 -> 设计 -> 编辑 Html/CSS -> 添加新文件）将任何内容上传到 weebly 时，默认地址为

```
yoursubdomain.weebly.com/files/theme/filename.extension 
```

例如，如果我的文件名是 social-grey 并且是 png 扩展名并且我的子域是天才骑士 ( [http://geniusknight.weebly.com](http://geniusknight.weebly.com) ) 那么链接将是：

```
geniusknight.weebly.com/files/theme/social-grey.png 
```

同样，对于名称为 test 的 Javascript 扩展，将是

```
http://geniusknight.weebly.com/files/theme/test.js 
```

并确保在源代码中使用完整的 url 而不是像 test.js 这样的短 URL，因为这在子域站点中对 weebly 不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:50:01.483

不知道你是否还需要这个问题的答案......上传文件到你的网站的路径（通过设计选项卡，然后“编辑 HTML/CSS”菜单是“/files/theme/yourfilename.js”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T18:57:47.403

转到设计 > 编辑 HTML/CSS > 资产文件夹。

转到您要引用的图像或文件并获取 URL。

例如[http://www.weebly.com/editor/uploads/3/4/0/9/34091/custom_themes/647127941726820885/files/homelogos/codehs.jpg](http://www.weebly.com/editor/uploads/3/4/0/9/34091/custom_themes/647127941726820885/files/homelogos/codehs.jpg)

要使用相对路径而不是绝对路径，请删除 /uploads 之前的所有内容...

例如/uploads/3/4/0/9/34091/custom_themes/647127941726820885/files/homelogos/codehs.jpg

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T15:12:03.343

转到`Weebly`然后设计和编辑`html`。

左键单击预先存在的`.png`图像，然后在同一窗口中右键单击弹出的图像并转到在新选项卡中打开图像。

在新选项卡中，您将在地址栏中看到地址。它看起来像这样......

`weebly.com/uploads/6/9/2/1/12851110/custom_themes/138585217722419571/files/yilogo.rar?1407684265479`

您可以删除该`?1407684265479`位以直接`url`获取您的文件！！！！

`weebly.com/uploads/6/9/2/1/12851110/custom_themes/138585217722419571/files/yilogo.rar`

然后在这种情况下将该文件名替换`yilogo.rar`为您刚刚上传或希望从现有集合中使用的文件。例如

`weebly.com/uploads/6/9/2/1/12851110/custom_themes/138585217722419571/files/flags.exe`

# php - 使用用户提交的内容重新填充 textarea（使用 ASCII 代码并且在某些字符之前没有附加的正斜杠）

> ID：11274886
> 
> 赞同：0
> 
> 时间：2012-06-30T14:31:39.350
> 
> 标签：php, forms

我有一个文本区域，我需要能够接收包括 / 和 ' 在内的字符以及 ASCII 中的特殊字符。它做得很好，并通过 POST 方法将数据发送到 php 页面。

然后我简单地重新填充文本区域

```
<?php echo isset($F_Text) ? $F_Text : '' ?> 
```

在 textarea 标签之间 ($F_Name = $_POST["F_Name"])，目的是让用户可以更改他们输入的内容并重新提交。

但是每次重新填充表单时都会出现两个问题。在 ' 等字符之前添加正斜杠，并且 ASCII 字符作为符号而不是代码打印出来。这基本上破坏了页面的其余部分（提交继续由一些 javascript 处理）。

我想不出任何方法来保持 ASCII 代码就是这样，代码，而不是符号。

另外，我刚刚注意到所有 $ 符号也丢失了，我可以理解，但我需要它们留下来！

我需要表单来准确显示用户最初输入的内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:34:01.203

你可以试试：

```
<?php echo isset($F_Text) ? htmlentities(stripslashes($F_Text)) : '' ?> 
```

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:36:43.677

我的猜测是，您首先必须打开[魔术引号](http://www.php.net/manual/en/security.magicquotes.what.php)，然后使用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)以避免变量弄乱您的 html，然后确保所有内容都在 utf8 中，以便保留所有特殊字符（取决于您认为 ASCII 字符.. .)。

您的 php echo 语句将是：

```
<?php echo isset($F_Text) ? htmlspecialchars($F_Text) : '' ?> 
```

# mysql - 测量实际的 MySQL 查询时间

> ID：11274892
> 
> 赞同：81
> 
> 时间：2012-06-30T14:32:26.143
> 
> 标签：mysql, optimization

如何测量查询的执行时间而不测量它等待锁定释放等的时间？我唯一的想法是不断测量相同的查询并记录最快的时间。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-06-30T15:00:07.313

启动分析器

```
SET profiling = 1; 
```

然后执行您的查询。

和

```
SHOW PROFILES; 
```

您会看到探查器具有统计信息的查询列表。最后，您选择要检查的查询

```
SHOW PROFILE FOR QUERY 1; 
```

或您查询的任何数字。

你得到的是一个列表，其中确切地在查询期间花费了多少时间。

手册中的更多信息[。](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-09-18T03:26:24.490

接受的答案变得无效......

`SHOW PROFILE[S]`**自 MySQL 5.6.7 起已弃用，**并将在未来的 MySQL 版本中删除。改用性能模式；见[http://dev.mysql.com/doc/refman/5.6/en/performance-schema-query-profiling.html](http://dev.mysql.com/doc/refman/5.6/en/performance-schema-query-profiling.html)

# jquery - JQuery：如何将 css 应用于 .wrap 元素？

> ID：11274896
> 
> 赞同：0
> 
> 时间：2012-06-30T14:32:46.190
> 
> 标签：jquery, jquery-selectors

到目前为止我的代码：

```
$(".lorem img:not(.full-img)").each(function() { 
    $(this).addClass("inline-img");
    var imgWidth = $(this).prop('width');
    var imgHeight = $(this).prop('height');
    var imgFloat = $(this).prop('float');

    $(this).wrap('<div class="inline-img-wrap" />'); 
        if ($(this).prop("title")!='') {
            $('<p class="inline-img-caption">').text($(this).prop('title')).insertAfter($(this)); 
        }
}); 
```

我正在文本正文中搜索图像，将它们的值作为标题附加在下面，并将`title`两者都包装在. 这很好用。`img``p``div.inline-img-wrap`

我需要帮助的是将样式应用`img`到新的包装 div 上。您可以看到我为此创建了 var，但无法将它们应用到工作中。`$this`将始终应用于图像，并且`<div class="inline-img-wrap" style="width:'+imgWidth+'">`不起作用。

所有建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:47:34.660

尝试使用`data`属性和`css`方法：

```
<img data-class='something'  src=''/>; 
```

```
 $(".lorem img:not(.full-img)").each(function() { 
    $(this).addClass("inline-img");
    var imgWidth = $(this).css('width');
    var imgHeight = $(this).css('height');
    var imgFloat = $(this).css('float');

    $(this).wrap('<div class="inline-img-wrap + " " + $(this).data('class') + " />'); 
        if ($(this).prop("title")!='') {
            $('<p class="inline-img-caption">').text($(this).prop('title')).insertAfter($(this)); 
        }

    $("." + $(this).data('class')).css({"width": imgWidth, `height`: imgHeight, `float`: imgFloat})
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:36:08.810

我说得对吗，您需要检索新创建的包装元素？

```
var $wrap = $(this).wrap('<div class="inline-img-wrap" />').parent();
if ($(this).prop("title")!='') {
    $('<p class="inline-img-caption">').text($(this).prop('title')).appendTo($wrap); 
}
// do any other manipulations with $wrap 
```

PS 作为旁注：缓存你的 jQuery 对象 - 你不断地调用 $(this) 这是次优的

# html - 没有单位的 CSS 属性的后备

> ID：11274904
> 
> 赞同：14
> 
> 时间：2012-06-30T14:33:34.077
> 
> 标签：html, css, cross-browser, w3c

考虑 CSS 属性缺少单位（px、em、pt、%）的场景：

```
<body>
    <div 
        style=  "width:170;
                border:1 dotted PaleGreen;
                background-color:MistyRose">
        The quick brown
    </div>
</body> 
```

**问题：**

1.  为什么会回退到px？像素总是首选单位吗？W3C 工作草案或建议中是否定义了任何规则？
2.  是否有规则强制 UA 回退到首选单位？
3.  给定上面的例子，以下哪一项是正确的行为：
    *   Internet Explorer：在 Quirks 模式下 (IE6,5,4..) 宽度和边框宽度用于回退到 px。由于 IE7（直到现在，IE10RP），如果缺少单元，它会忽略整个规则。因此，这两条规则都被忽略了。
    *   Firefox 13：在上面的示例中，宽度回退到 px，但忽略了边框宽度。
    *   Chrome 19、Opera 12、Safari 5.1.2：宽度和边框宽度都回退到 px。

注意：在 Microsoft-Connect 上，他们说：

> 您报告的问题是设计使然。标准模式下的 IE10 会忽略没有符合 CSS 标准的单位的宽度或高度。*该单元不是可选的。*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-30T15:05:35.660

我在您的 HTML 中没有看到 doctype 声明，所以我只能假设您的测试页面正在以 quirks 模式呈现。

1.  > 为什么会回退到px？像素总是首选单位吗？W3C 工作草案或建议中是否定义了任何规则？

    它只会退回到`px`怪癖模式（我相信仅适用于某些属性）。是的，`px`是首选的后备单元。这可以追溯到旧的 HTML`width`和`height`接受像素长度作为无单位数字的属性。

2.  > 是否有规则强制 UA 回退到首选单位？

    不，因此您观察到的行为不一致。但是，在标准模式下，UA 需要忽略没有单位的长度值；如您引用的 Microsoft Connect 中所述，该单元不是可选的。

    [在 CSS2.1](http://www.w3.org/TR/CSS21/syndata.html#length-units)中，所有非零长度值都必须有单位。

3.  > 给定上面的例子，以下哪一项是正确的行为：
    > 
    > *   Internet Explorer：在 Quirks 模式下 (IE6,5,4..) 宽度和边框宽度用于回退到 px。由于 IE7（直到现在，IE10RP），如果缺少单元，它会忽略整个规则。因此，这两条规则都被忽略了。
    > *   Firefox 13：在上面的示例中，宽度回退到 px，但忽略了边框宽度。
    > *   Chrome 19、Opera 12、Safari 5.1.2：宽度和边框宽度都回退到 px。

    同样，基于您的页面处于怪异模式的假设，我只能说，虽然规范提到了怪异行为，但规范中没有定义这种怪异行为的具体细节（无论是明显的还是不-很明显的原因）。

    我猜微软改变了 IE7+ 中的 quirks-mode 行为以反映无单位值的标准行为，因为 quirks 模式存在于**所有浏览器**中（IE < 6 除外）并且由相同的不正确文档类型或缺少文档类型触发。不过，据我所知，标准模式下的行为并没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:39:51.683

1.  `px`是最常用的单位，所以通常浏览器使用他们的“常识”，`px`如果没有指定单位，它是网页设计中最常用的单位。
2.  不，没有这样的规则。浏览器只使用设计中最常用的单元。
3.  理想的行为应该是`px`在不忽略其他样式的情况下使用并继续前进，但是没有这样的规则，因此当您看到不同的浏览器时，它们实际上正在实现不同的东西，它们实际上正在实现自己的逻辑来应对此类错误，在这种情况下没有可遵循的规则. 这取决于浏览器的功能。

你永远不应该依赖浏览器来纠正你的错误。始终依靠自己获得更好的*跨浏览器兼容性*

# android - 在 Android 应用程序中播放 RTSP 流

> ID：11274906
> 
> 赞同：36
> 
> 时间：2012-06-30T14:33:37.750
> 
> 标签：android, streaming, live, rtsp, wowza

我正在尝试开发一个基于 Android 的应用程序，它可以从实时流中播放视频。这个直播流是使用[Wowza Media Server](https://en.wikipedia.org/wiki/Wowza_Streaming_Engine)制作的。

网址是：

```
rtsp://tv.hindiworldtv.com:1935/live/getpun 
```

我在 ecliplse 中尝试了以下代码：

```
package com.kalloh.wpa;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.net.Uri;
import android.os.Bundle;
import android.view.Window;
import android.widget.MediaController;
import android.widget.VideoView;

public class a extends Activity {

    VideoView videoView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        //Create a VideoView widget in the layout file
        //use setContentView method to set content of the activity to the layout file which contains videoView
        this.setContentView(R.layout.videoplayer);

        videoView = (VideoView)this.findViewById(R.id.videoView);

        //add controls to a MediaPlayer like play, pause.
        MediaController mc = new MediaController(this);
        videoView.setMediaController(mc);

        //Set the path of Video or URI
        videoView.setVideoURI(Uri.parse("rtsp://tv.hindiworldtv.com:1935/live/getpnj"));
        //

        //Set the focus
        videoView.requestFocus();
    }
} 
```

起初，它不起作用。

现在它开始工作，但在 20 到 30 秒后停止。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-10T15:51:34.860

使用[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)是一个很好的解决方案，但是我们也可以使用`native player`来播放 RTSP。这是一个例子：

```
if (movieurl.startsWith("rtsp://")) {
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(movieurl));
    startActivity(intent);
} 
```

请记住，您的媒体必须使用[**Android 支持的媒体格式**](http://developer.android.com/guide/appendix/media-formats.html)（[编解码器](http://en.wikipedia.org/wiki/Codec)）创建。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-05T13:10:13.987

我在 ICS 4.x 中也遇到了同样的问题。此外，您可以检查您的流[URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)是否正常工作。

[还要使用此示例 URL](http://www.wowza.com/html/mobile.html)检查您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:18:10.620

我对 Galaxy Note N7000 (ICS 4.0.3) 和 VLC 2.0.2 有同样的问题 - 视频在 60 秒后消失。但是当我转向 VLC 媒体播放器 1.1.4 时，一切正常！

所以有时它取决于媒体服务器。您可以从 YouTube 尝试 RTSP（访问 m.youtube.com，然后右键单击一些视频 -> 复制位置链接 -> 这就是您需要的 RTSP 链接）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-13T10:03:07.810

我搜索并尝试了很多代码来在Android上播放RTSP最后，我找到了这个库。[希望这对使用 Vlc](https://github.com/pedroSG94/vlc-example-streamplayer)寻找这种 RTSP 播放器的 人有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-24T12:55:25.667

I was reading and researching about this subject for about a whole month and I used the *VLC library* to play *RTSP* streams from the camera although it works fine the problem with this library was the latency it had. I needed a library to play the stream in real-time so we were testing *Gstreamer* on Linux and Nvidia board it works fine with no latency and I managed to rebuild the *Gstreamer* library on my application and it works fine and it is so powerful. [The Gstreamer Library](https://gstreamer.freedesktop.org/documentation/tutorials/android/index.html?gi-language=c)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-11T06:58:06.527

我找到了解决方案。传输应在 Android 的首选设置范围内。有关更多详细信息，请参阅*[支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)*。

# python - Selenium：为什么我的 get_cookies() 方法在 Python 中返回了一个列表？

> ID：11274908
> 
> 赞同：12
> 
> 时间：2012-06-30T14:33:45.240
> 
> 标签：python, selenium-webdriver

下面是我的脚本：

```
# -*- coding: UTF-8 -*-
from selenium import webdriver

driver = webdriver.Firefox()

driver.get("http://www.google.com")

all_cookies = driver.get_cookies()

print all_cookies 
```

* * *

打印结果是：

```
>>> 
[{u'domain': u'.google.com.hk', u'name': u'PREF', u'value': u'ID=999c3b8cf82fb5bc:U=7d4d0968915e2147:FF=2:LD=zh-CN:NW=1:TM=1341066316:LM=1341066316:S=kDqT8587qbZJj1_B', u'expiry': 1404138316, u'path': u'/', u'secure': False}, {u'domain': u'.google.com.hk', u'name': u'NID', u'value': u'61=AbRSUZokdEP3hN79nLdNOWwlF7itUX9-pmFAIBb-ysJqvoi1NBsmOa2wV7ldWgXpYBd_OsPnMxaAPiRsJyCpVbCN882MWNn6DwNm9eD6PTKU2gfDfqrj2EJr6CNVUhI6', u'expiry': 1356877516, u'path': u'/', u'secure': False}]
>>> 
```

返回的是一个列表，但它应该是一个字典。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T21:15:29.140

Cookie 包含的信息比简单的名称和值信息多得多，例如过期日期、域等。因此，简单的键/值对是不够的。如果您只对名称及其对应的值感兴趣，那么我会做类似于以下的事情来构建您自己的字典：

```
# -*- coding: UTF-8 -*-
from selenium import webdriver

driver = webdriver.Firefox()
driver.get("http://www.google.com")
cookies_list = driver.get_cookies()
cookies_dict = {}
for cookie in cookies_list:
    cookies_dict[cookie['name']] = cookie['value']

print(cookies_dict) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T14:42:40.557

我知道这会`get_cookies()`返回一个**字典列表**，每个字典都包含找到的每个 cookie 的属性：

[http://selenium-python.readthedocs.io/navigating.html#cookies](http://selenium-python.readthedocs.io/navigating.html#cookies)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-06T03:40:20.797

因为您要求所有 cookie，`driver.get_cookies()`所以它会返回一个字典列表，其中包含每个存储的 cookie 的 (key, value) 对。相反，如果您对使用名称标识的特定 cookie 感兴趣，`name`则可以按名称请求该特定 cookie，`driver.get_cookie(name)`如果找到则返回 cookie，否则返回 None。

IE

```
driver.get_cookies() #returns list of cookie dictionaries
driver.get_cookie(name) # returns a cookie dictionary of specified cookie 
```

# grails - 整数枚举和 g:select

> ID：11274909
> 
> 赞同：0
> 
> 时间：2012-06-30T14:33:51.050
> 
> 标签：grails, groovy

我有一个这样的枚举：

```
public enum MyEnum {
  Apple (1)
  Microsoft (2)
  IBM (4)
  Intel (8)

  int company

  MyEnum(int company) {
    this.company = company
  }
} 
```

我希望 ag:select 框看起来像这样（整数值在 value 属性中很重要）：

```
<select>
  <option value="1">Apple</option>
  <option value="2">Microsoft</option>
  <option value="4">IBM</option>
  <option value="8">Intel</option>
</select> 
```

好的，使用 g:select 没问题：

```
<g:select name="myenum" from="${MyEnum?.values()*.company}" /> 
```

但是当我尝试保存表单时，我总是得到：java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为属性 myenum 所需的类型 [MyEnum]：找不到匹配的编辑器或转换策略

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:42:02.380

尝试：

```
public enum MyEnum {
  Apple (1)
  Microsoft (2)
  IBM (4)
  Intel (8)

  int company

  MyEnum(int company) {
    this.company = company
  }

  String toString() { return company }
  String getKey() { name() }
} 
```

然后修改标签

```
<g:select name="myenum" from="${MyEnum?.values()*.company}" optionKey="key" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:32:52.297

现在我使用带有 inList 约束的简单整数而不是枚举。它不一样，但解决了我的问题。

```
class MyDomain {
    int company
    static constraints = {
        company(inList: [1, 2, 4, 8])
    }
} 
```

形式为：<g:select valueMessagePrefix="company" name="company" from="${MyDomain.constraints.company.inList}" value="${myDomainInstance?.company}"/>

现在我需要使用 i18n 文件（messages.properties）：

```
company.1=Apple
company.2=Microsoft
company.4=IBM
company.8=Intel 
```

# android - 在 if 语句中从 EditText 获取字符串值

> ID：11274911
> 
> 赞同：-4
> 
> 时间：2012-06-30T14:34:01.620
> 
> 标签：android, if-statement, android-edittext

我想做以下事项：当检查**复选框时，将出现****TextView**，然后用户可以放置任何他需要的东西，但问题是我无法在**edittext**中获取文本以将它放在一个**字符串**变量中，因为它需要进入 if 语句时的初始值为“nothing”。有什么帮助吗？

我是这个网站的新手，这是我正在谈论的代码部分

```
 SendSMS.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked == true) {
                sendText.setVisibility(0);
                smstext = sendText.getText().toString();
            } else if (isChecked == false) {
                sendText.setVisibility(8);
                smstext = "";
            }

        }
    }); 
```

这里..检查sendms到true后会出现edittext（sendText）

. . . . . .

在这里，当用户输入任何文本时，我需要将其放入要存储在数据库中的字符串（短信）中，抱歉出现错误

```
 break;
    case R.id.SaveImage:
        String x = EventName.getText().toString();
        if (x.contentEquals("")) {
            Toast.makeText(getApplicationContext(), "Enter a Title",
                    Toast.LENGTH_SHORT).show();
        } else {

            Intent i = new Intent(getApplicationContext(), Swipe.class);
            startActivity(i);
            Toast.makeText(getApplicationContext(), "Event saved",
                    Toast.LENGTH_SHORT).show();
            String typename = type;
            String name = EventName.getText().toString();
            String location = EventLocation.getText().toString();
            String dateFrom = DateFrom.getText().toString();
            String dateTo = EbDate.getText().toString();
            String timeFrom = mPickTime.getText().toString();
            String timeTo = EbTime.getText().toString();
            String duration = durationresult.getText().toString();
            String alarm = alarmresult.getText().toString();
            String repeat = repeatresult.getText().toString();
            String audios = Audios;
            String sms = smstext;
            String call = calltext;
            mySQLiteAdapter.insert(name, location, dateFrom, dateTo,
                    timeFrom, timeTo, duration, alarm, repeat, typename,
                    audios, sms, call);

            updateList();
            // reset form
            EventName.setText(null);
            EventLocation.setText(null);

            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:16:06.353

似乎您设置 smstext 的唯一时间是复选框的值更改时。用户只能在该文本框可见时输入文本，因此当复选框的值发生更改时，从逻辑上讲，文本框为空，而 smstext 将始终为空。

你有没有尝试过这样的事情：

```
case R.id.SaveImage:
        ...
        String sms = sendText.getText().toString();
        ... 
```

# php - 多级继承替换

> ID：11274913
> 
> 赞同：8
> 
> 时间：2012-06-30T14:34:44.570
> 
> 标签：php, oop

我想编写一个模块（特定于框架），它将包装和扩展 Facebook PHP-sdk（[https://github.com/facebook/php-sdk/](https://github.com/facebook/php-sdk/)）。我的问题是 - 如何以一种好的方式组织课程。

所以进入细节 - Facebook PHP-sdk 由两个类组成：

*   BaseFacebook - 包含 sdk 所做的所有事情的抽象类
*   Facebook - 扩展 BaseFacebook，并使用默认会话使用实现父抽象持久性相关方法

现在我要添加一些功能：

*   Facebook 类替换，与框架会话类集成
*   运行 api 调用的速记方法，我主要使用（通过 BaseFacebook::api()），
*   授权方法，所以我不必每次都重写这个逻辑，
*   配置，从框架类中吸取，作为参数传递
*   缓存，与框架缓存模块集成

我知道有些地方出了问题，因为我有太多看起来不太正常的继承。将所有内容包装在一个“复杂扩展”类中似乎也太多了。我想我应该很少有工作在一起的类 - 但我遇到了这样的问题：如果缓存类没有真正扩展和覆盖 BaseFacebook::api() 方法 - 速记和身份验证类将无法使用缓存。

也许某种模式就在这里？您将如何组织这些类及其依赖项？

**编辑 04.07.2012**

与主题相关的代码位：

Facebook PHP-sdk 的基类是这样的：

```
abstract class BaseFacebook {

    // ... some methods

    public function api(/* polymorphic */) 
    {
        // ... method, that makes api calls
    }

    public function getUser()
    {
        // ... tries to get user id from session
    }

    // ... other methods

    abstract protected function setPersistentData($key, $value);

    abstract protected function getPersistentData($key, $default = false);

    // ... few more abstract methods

} 
```

Normaly Facebook 类对其进行了扩展，并引入了这些抽象方法。我用我的替代品代替了它 - Facebook_Session 类：

```
class Facebook_Session extends BaseFacebook {

    protected function setPersistentData($key, $value)
    {
        // ... method body
    }

    protected function getPersistentData($key, $default = false)
    {
        // ... method body
    }

    // ... implementation of other abstract functions from BaseFacebook
} 
```

好的，然后我使用速记方法和配置变量对此进行更多扩展：

```
class Facebook_Custom extends Facebook_Session {

    public function __construct()
    {
        // ... call parent's constructor with parameters from framework config
    }

    public function api_batch()
    {
        // ... a wrapper for parent's api() method
        return $this->api('/?batch=' . json_encode($calls), 'POST');
    }

    public function redirect_to_auth_dialog()
    {
        // method body
    }

    // ... more methods like this, for common queries / authorization

} 
```

我不确定，如果这对于单个类（授权/速记方法/配置）来说不是太多。然后是另一个扩展层——缓存：

```
class Facebook_Cache extends Facebook_Custom {

    public function api()
    {
        $cache_file_identifier = $this->getUser();

        if(/* cache_file_identifier is not null
              and found a valid file with cached query result */)
        {
            // return the result
        }
        else
        {
            try {
                // call Facebook_Custom::api, cache and return the result
            } catch(FacebookApiException $e) {
                // if Access Token is expired force refreshing it
                parent::redirect_to_auth_dialog();
            }
        }

    }

    // .. some other stuff related to caching

} 
```

现在这非常有效。Facebook_Cache 的新实例为我提供了所有功能。Facebook_Custom 中的速记方法使用缓存，因为 Facebook_Cache 覆盖了 api() 方法。但这是困扰我的事情：

*   我认为这是太多的继承。
*   这一切都非常紧密 - 就像看看我如何必须指定 'Facebook_Custom::api' 而不是 'parent:api'，以避免 Facebook_Cache 类扩展上的 api() 方法循环。
*   整体混乱和丑陋。

再说一遍，这可行，但我只是在询问以更清洁和更智能的方式执行此操作的模式/方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:55:03.980

确实是继承太多了。看起来像是[外观](http://en.wikipedia.org/wiki/Facade_pattern)设计模式的工作。使用组合而不是继承来获得更大的灵活性。将您使用的任何方法委托给适当的对象。

例如，如果任何底层类发生更改，您只需更改方法以适应更改，而不必担心覆盖任何父方法。

通常是的，将多个职责分配给一个类并不是一个好主意。在这里，类的职责是代表一个外部 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T12:36:42.673

我已经为 yahoo sdk 做了一些类似的事情，让我说一下，试一试 :)

让我们假设 Facebook 是 sdk 中用于所有结束方法调用的类。您可以创建一个新类（在您的框架允许的情况下）并将该类的变量分配给 Facebook Class 的实例。

对 Facebook 的所有方法使用 __call() 并将您的自定义方法放在包装类中。对于它包装的所有未定义方法，它将转到 Facebook 类，并且根本不涉及继承。它对我有用。希望能帮助到你 ：）

```
 Class MyWrapper
    {
       protected $facebook;
       public function __construct()
       {
          $this->facebook = new FaceBook();
       }

       public function __call($method,$args)
       {
          return $this->facebook->$method($args);
       }

       ///define  Your methods //////////

      ///////////////////////////////////
    }

    $t = new MyWrap;
    $t->api(); // Whatever !!!! 
```

编辑：

您不需要为多个类创建多个包装器以下可以完成，您只需要在方法调用时注意，必须为保存包装类的实例的变量名添加后缀。

```
 Class MyWrapper
    {
       protected $facebook;
       protected $facebookCache;
       public function __construct()
       {
          $this->facebook = new FaceBook();
          $this->facebookCache = new FacebookCache();
       }

       public function __call($method,$args)
       {
          $method = explode('_',$method);
          $instance_name = $method[0];
          $method_name = $method[1];
          return $this->$instance_name->$method_name($args);
       }

       ///define  Your methods //////////

      ///////////////////////////////////
    }

    $t = new MyWrap;
    $t->facebook_api(); // Whatever !!!!
    $t->facebookCache_cache(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T10:52:49.817

缓存等辅助功能通常作为装饰器实现（我看到你已经在另一条评论中提到过）。装饰器最适合使用接口，所以我将从创建一个开始：

```
interface FacebookService {
  public function api();
  public function getUser();
} 
```

保持简单，不要在外部添加任何你不需要的东西（例如`setPersistentData`）。然后将现有`BaseFacebook`类包装在新界面中：

```
class FacebookAdapter implements FacebookService {
  private $fb;

  function __construct(BaseFacebook $fb) {
    $this->fb = $fb;
  }

  public function api() {
    // retain variable arguments
    return call_user_func_array(array($fb, 'api'), func_get_args());
  }

  public function getUser() {
    return $fb->getUser();
  }
} 
```

现在很容易编写缓存装饰器：

```
class CachingFacebookService implements FacebookService {
  private $fb;

  function __construct(FacebookService $fb) {
    $this->fb = $fb;
  }

  public function api() {
    // put caching logic here and maybe call $fb->api
  }

  public function getUser() {
    return $fb->getUser();
  }
} 
```

进而：

```
$baseFb = new Facebook_Session();
$fb = new FacebookAdapter($baseFb);
$cachingFb = new CachingFacebookService($fb); 
```

两者都`$fb`公开`$cachingFb`相同的`FacebookService`接口——因此您可以选择是否要缓存，其余代码根本不会改变。

至于你的`Facebook_Custom`类，它现在只是一堆辅助方法；您应该将其分解为一个或多个独立的类，这些类包装`FacebookService`并提供特定的功能。一些示例用例：

```
$x = new FacebookAuthWrapper($fb);
$x->redirect_to_auth_dialog();

$x = new FacebookBatchWrapper($fb);
$x->api_batch(...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T17:07:06.787

我认为在这种情况下存储库设计模式会更好。虽然我不是来自 php 但根据 oops 它应该可以解决您的问题..

# gcc - 在 Windows 上静态链接 GCC 库（libgcc 和 libstdc）

> ID：11274917
> 
> 赞同：2
> 
> 时间：2012-06-30T14:35:54.870
> 
> 标签：gcc, static, linker, libraries

我正在使用 Mingw 环境、GCC 编译器和 Code::Blocks IDE 来创建一个可以在不同 Windows 版本上运行的应用程序，而无需安装任何其他软件。所以，我使用的是最新版本的 GCC。

我在 Windows 7 上创建了 EXE，它运行良好。我将它移到 Windows XP 上（最近安装，没有 .NET，没有 C++ 可再发行组件，没有 gcc dll，它要求我提供 libgcc_s_dw2-1.dll 和 libstdc++-6.dll。在XP 计算机。使用旧版本的 GCC 不会发生这种情况。

因此，我将这两个库复制到与可执行文件相同的文件夹中。现在，它也适用于 XP。

我想要的是静态链接两个库。我向 GCC 添加了 -static 选项，但看起来我没有静态库，只有动态库，所以我想知道是否有人可以告诉我可以从哪里下载它们以及如何链接它们。

非常感谢！

# python - 将 Python 属性划分为类别

> ID：11274918
> 
> 赞同：2
> 
> 时间：2012-06-30T14:35:59.623
> 
> 标签：python, properties

我有一个包含大量属性的类。更具体地说，该类代表我的路由器。我想将其属性划分为类别，这意味着为了检索 LAN ip 和 WAN ip，我不必键入：

```
router.wan_ip
router.lan_ip 
```

但改为输入：

```
router.wan.ip
router.lan.ip 
```

这些属性是动态的，在调用它们的函数时会被检索到。我目前的实现：

```
class Category(object):
    def __init__(self, parent):
        self._parent = parent

class Lan(Category):
    @property
    def ip(self):
        self._parent._get_property("lanip")

class Wan(Category):
    @property
    def ip(self):
        self._parent._get_property("wanip")

class Router(object):
    def __init__(self, ):
        self.lan = Lan(self)
        self.wan = Wan(self)

    def _get_property(self, property_name):
        # Some code here 
```

但如果有更好的方法，我会更伤心

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:20:33.523

你可能想多了这个结构，但如果你想要对象......

`Wan`并且`Lan`不应该存在。您可以为该类传递一个前缀，`Category`以便它搜索`...ip`. 该`_get_property`方法可以用字典代替。如果您需要即时计算值，您可以创建一个`dict`要调用的函数。

```
class Category(object):
    def __init__(self, parent, prefix):
        self.parent = parent
        self.prefix = prefix
    @property
    def ip(self):
        self.parent.data[self.prefix + "ip"]

class Router(object):
    def __init__(self, data):
        self.lan = Category(self, 'lan')
        self.wan = Category(self, 'wan')
        self.data = data 
```

顺便说一句，这个程序根本不需要任何类。好像你只需要字典。如果需要，您可以创建一个函数来构建这些字典

```
router = {'wan': {'ip': '1.2.3.4'}, 'lan': {'ip': '2.3.4.5'}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:17:22.253

您可以使用[`__getattr__`](http://docs.python.org/reference/datamodel.html#object.__getattr__)它来访问该名称实际上并不存在的属性，方法是检查属性的名称并将其映射到实际属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T02:47:41.407

我认为您可以将描述符 [1] 用于唯一的 Category 类。

[1] [http://docs.python.org/reference/datamodel.html#descriptors](http://docs.python.org/reference/datamodel.html#descriptors)

# machine-learning - WEKA 输出额外信息

> ID：11274931
> 
> 赞同：0
> 
> 时间：2012-06-30T14:37:45.410
> 
> 标签：machine-learning, weka

我为 WEKA 编写了一个自定义分类器，它需要提供除了实例的预测类之外的信息。具体来说，它是一个列表，描述了训练实例的每个子集对预测类的影响有多大。

该`additionalMeasureProducer`界面将无法工作，因为我需要向 GUI 打印一个字符串。我希望用户能够选择输出此信息。我曾希望“分类器评估选项”对话框中的“输出模型”选项可以解决问题，但 WEKA 最终会`toString()`在分类发生之前调用我的分类器方法。我认为这是一个错误，因为我的分类器在`weka.classifiers.lazy`包中，这意味着在将要分类的实例提供给它之前不会构建它。

有谁知道如何向自定义 WEKA 分类器添加更多 GUI 输出功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:09:45.707

好吧，我能找到正确执行此操作的唯一方法是实现一个`weka.classifiers.evaluation.output.prediction.AbstractOutput`只能与我的分类器一起使用的特殊功能。我用`globalInfo()`, 和指定了它`getDisplay()`，我的`doPrintClassification`方法是这样开始的：

```
@Override
protected void doPrintClassification(Classifier classifier, Instance inst,
        int index) throws Exception {
    if (!(classifier instanceof MyClassifier))
        throw new IllegalArgumentException(
                "This output can only be used with the MyClassifier classifier");

    MyClassifier mc = (MyClassifier) classifier; 
```

这样我就能够调用正确的方法来获取分类器的信息。为 CSV、HTML 和纯文本编写所有内容太多了，所以我只是让用户选择从我的自定义输出类中获取特殊信息，并从其他输出类中获取常规信息（如果他们需要特定格式）。

# java - Spring框架和tomcat - 如何启用文件夹的以下符号链接？

> ID：11274933
> 
> 赞同：3
> 
> 时间：2012-06-30T14:37:51.760
> 
> 标签：java, spring, spring-mvc, tomcat6, symlink

我有一个用 Java + spring 框架编写的网络应用程序。使用的应用服务器是 tomcat。假设 Web 应用程序名称是“sample-webapp”。如果我像这样在 sample-webapp/resources/ 下创建一个符号链接-

> ls -l
> 
> .../sample-webapp/resources/temp-csv-location -> /tmp/csv-location

这里的“temp-csv-location”是一个符号链接。

现在，如果我在 jsp 页面中引用此目录中的文件，例如

```
<a href="http://localhost:8080/sample-webapp/resources/temp-csv-location/test.csv">Click</a> 
```

它给了我一个 404 错误。我确认 test.csv 文件存在于 /tmp/csv-location/ 中。我也确认了权限。在普通的 tomcat 用法中，我们可以在 context.xml 中添加“allowLinking=true”。

有没有办法在spring框架中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:57:41.553

对于您的问题，另一种通用的解决方案是编写一个 Servlet 来处理所有计算您的起始路径的请求，然后 Servlet 将通过解析其路径来处理文件的提供。

要设置 Servlet，您必须将其放入您的 web.xml

```
<filter>
    <filter-name>csvFileDownloadServlet</filter-name>
    <filter-class>edu.sharif.resource.CSVFileDownloadServlet</filter-class>
</filter>
<filter-mapping>
    <filter-name>csvFileDownloadServlet</filter-name>
    <url-pattern>/resources/temp-csv-location/*</url-pattern>
</filter-mapping> 
```

然后你应该编写 edu.sharif.resource.CSVFileDownloadServlet 类。你可以通过简单的搜索找到这个问题的几个实现，例如：

*   [在 Internet Explorer 中通过 HTTPS 使用 ServletOutputStream 从 Servlet 返回 CSV 文件](https://stackoverflow.com/questions/899858/returning-csv-file-from-servlet-using-servletoutputstream-over-https-in-internet)
*   [http://www.coderanch.com/t/366358/Servlets/java/File-download-servlet](http://www.coderanch.com/t/366358/Servlets/java/File-download-servlet)
*   [http://www.dzone.com/snippets/example-file-download-servlet](http://www.dzone.com/snippets/example-file-download-servlet)

# php - 将 JavaScript 变量传递给 PHP 会话

> ID：11274934
> 
> 赞同：0
> 
> 时间：2012-06-30T14:38:08.830
> 
> 标签：php, javascript

为什么我在屏幕上没有打印（m1、m2 或 m3）？

即如何将 JavaScript var 传递给 PHP Session。

```
<?php session_start(); ?>

<html>
<head>

<script type="text/javascript">
function disp_text()
   {
      var p = document.myform.mylist.value;
      <?php $_SESSION['color'] ?> = p;
      <?php echo $_SESSION['color'] ?>;
   }
</script>

</head>
<body>

<FORM NAME="myform">
<SELECT NAME="mylist" onChange="disp_text()">
<OPTION VALUE="m1">Red
<OPTION VALUE="m2">Blue
<OPTION VALUE="m3">Green
</SELECT>
</FORM> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T14:40:29.360

还有一个值得考虑的... JavaScript 运行在用户的计算机上，PHP 运行在服务器上。查看页面源代码（右键单击，查看源代码），您将确切地看到它为什么不起作用：

```
<script type="text/javascript">
function disp_text()
   {
      var p = document.myform.mylist.value;
      = p;
      ;
   }
</script> 
```

将 JS 变量导入 PHP 的唯一方法是通过一个表单（我松散地使用它来包含 AJAX）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T15:36:05.127

尝试这个

```
<html>
<head>
<script type="text/javascript">
function disp_text()
   {
      var e = document.getElementsByName("mylist")[0];
      var p = e.options[e.selectedIndex].value;
      sessionStorage.color = p;
      document.write(p);
   }
</script>
</head>
<body>
<FORM NAME="myform">
<SELECT NAME="mylist" onChange="disp_text()">
<OPTION VALUE="m1">Red</OPTION>
<OPTION VALUE="m2">Blue</OPTION>
<OPTION VALUE="m3">Green</OPTION>
</SELECT>
</FORM>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-29T21:58:39.087

索引.php：

```
<script type="text/javascript">
    var time = "OK then, let's do this!";
    sessionStorage.setItem("time", time);
    window.location.href = "test.php";
</script> 
```

测试.php

```
<script type="text/javascript">
    var time = sessionStorage.getItem("time");
    console.log(time);
    <?php $abc = "<script>document.write(time)</script>"?> 
</script>

<?php
    echo $abc;
?> 
```

# networking - 如果我有本地 ipv4 地址，我可以从网络外部使用它来跨 NAT 通话吗

> ID：11274939
> 
> 赞同：0
> 
> 时间：2012-06-30T14:38:36.927
> 
> 标签：networking, ipv6, nat, ipv4

我有一个应用程序，我希望 NAT 后面的网络内的设备调用公共网络，为服务器提供本地地址，稍后，比如说 10 或 20 分钟后，我希望服务器能够联系网络内的设备。

如果我提供其实际的当前本地地址，是否有防火墙/路由器等普遍支持的协议将我定向到本地节点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:09:54.997

不，没有这样的协议。而且，在多个NAT的情况下，本地节点只能知道最内层NAT后面的地址，而服务器只能知道最外层NAT之外的公共地址，所以你没有办法通过多个NAT映射，甚至不知道路径中存在多少。

如果本地节点想从服务器接收任何东西，它必须启动并保持与服务器的开放连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:12:57.063

不，没有用于映射 IP 地址的协议，尽管您可以使用[端口映射/端口转发](http://en.wikipedia.org/wiki/Port_forwarding)将特定端口映射到 IP 地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T16:28:28.637

这就是[UPNP](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)旨在解决的问题。请注意，仍然存在挑战——网络设备需要支持它并且需要启用该功能。许多网络管理员出于充分的理由不会启用它。

# php - PHP - 从链接本身而不是 GET 参数获取信息？

> ID：11274940
> 
> 赞同：1
> 
> 时间：2012-06-30T14:38:52.933
> 
> 标签：php, mod-rewrite, url-rewriting

考虑一个 URL 的情况：

```
www.example.com/softwares/download.php?f=firefox&v=13 
```

它看起来不如 URL：

```
www.example.com/softwares/firefox/download?v=13 
```

或与以下相同`download.php`：

```
www.example.com/softwares/chrome/download?v=20 
```

如何在 PHP 中实现这种类型的 URL 过滤？

我想在这里介绍几点：

1.  我在这里不需要文件夹层次结构，例如拥有不同的文件夹`/firefox/`和不同的文件夹`/chrome/`
2.  所有产品可能只有两个 PHP 文件（*如我所愿*）：`/software/software-info.php`和`/software/download.php`（已经到[这里](http://www.zubrag.com/scripts/download.php/)）。
3.  我能够在 PHP 中从数据库中放置和获取信息，但只想为不同的产品提供不同的链接。

我是一名 Java Web 开发人员，您必须`Filters`从链接的一部分获取信息并相应地重定向请求。

我是 PHP 编程的新手，如果这个问题已经被问过或很明显，请原谅我并提供那个问题链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:42:29.777

理想情况下，您应该使用 url 重写（.htaccess 中的 mod-rewrite）。您的访问者导航到：

```
www.example.com/softwares/firefox/download?v=13 
```

甚至

```
www.example.com/softwares/firefox/13/ 
```

但是您的服务器会将其理解为：

```
www.example.com/softwares/download.php?f=firefox&v=13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:43:26.147

您可以使用 htaccess 文件进行 URL 重写。从本质上讲，这将允许您获取 /software/ 之后的 url 段，并将它们传递给由软件脚本控制的 ass 参数。

还有一堆使用“路由”的 PHP 框架。它们基于与 URL 重写类似的原理。我推荐 Codeigniter 作为一个很好的起点——它是一个简单的框架，包含大量文档和教程。

祝你好运！

# c# - 是否有理由进行详细的布尔评估？

> ID：11274943
> 
> 赞同：0
> 
> 时间：2012-06-30T14:39:14.363
> 
> 标签：c#, algorithm, boolean, return-value

> **可能重复：**
> [布尔类型](https://stackoverflow.com/questions/752335/boolean-types)

有时您想有条件地将布尔值设置为 true 或 false，否则只是不理会它。但是很多时候，您确实希望根据这个和/或那个的状态将其设置为真或假。我经常想知道为什么在后一种情况下，大多数人似乎都在编写这样的代码（甚至在书中）：

```
if ((location < Platypi.Length) && (Platypi[location] != null))
{
  return true;
}
else
{
  return false;
} 
```

当这将同样清晰和简洁时：

```
return ((location < Platypi.Length) && (Platypi[location] != null)); 
```

冗长真的是首选方法吗？对我来说，它几乎是一种代码味道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T14:41:19.683

不，除了明确地明确代码流之外，没有理由这样做。就个人而言，我会写成：

```
return location < Platypi.Length && Platypi[location] != null; 
```

不过，因为我发现它和扩展版一样容易理解。不过，有些人可能会被它抛弃。

或者，这可能只是人们偶尔犯的错误。

# css - 更改 rails 中 datetime_select 字段的大小

> ID：11274944
> 
> 赞同：0
> 
> 时间：2012-06-30T14:39:21.560
> 
> 标签：css, ruby-on-rails, datetime-select

我尝试使用 size 和 width 和 height 更改 datetime_select 的大小，但它们似乎不起作用，而它们却只包含一个数字？

```
<%= f.datetime_select :start_time, :order => [:day, :month, :year, :hour,:minute] , start_year: Time.now.year,:size => 5 %> 
```

对此有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:40:01.067

尝试这个：

```
<%= f.datetime_select :start_time, 
    { :order => [:day, :month, :year, :hour,:minute], :start_year => Time.now.year }, 
    :size => 5 %> 
```

# algorithm - 生成重复对列表的算法

> ID：11274946
> 
> 赞同：1
> 
> 时间：2012-06-30T14:39:25.330
> 
> 标签：algorithm, optimization, combinatorics

> 给定以下格式的文本文件，每行是一个最多包含 50 个名称的列表。编写一个程序会产生一组名称对的列表，它们一起出现在至少五十个不同的列表中。
> 
> ```
> Tyra,Miranda,Naomi,Adriana,Kate,Elle,Heidi
> Daniela,Miranda,Irina,Alessandra,Gisele,Adriana 
> ```
> 
> 在上面的示例中，Miranda 和 Adriana 一起出现了两次，但每隔一对只出现一次。它应该返回“Miranda,Adriana\n”。近似解可能会返回以高概率出现至少 50 次的列表。

我正在考虑以下解决方案：

1.  `Map <Pair,Integer>`读取文件后生成pairToCountMap。

2.  遍历地图，并打印计数 >= 50

有一个更好的方法吗？该文件可能非常大，我不确定近似解决方案是什么意思。任何链接或资源将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:07:46.230

首先让我们假设名称的长度是有限的，所以对它们的操作是常数时间。

如果它适合记忆，你的答案应该是可以接受的。如果每`N`行都有`m`名称，那么您的解决方案应该`O(N*m*m)`完成。

如果该数据集不适合内存，您可以将这些对写入文件，使用合并排序对该文件进行排序，然后扫描以计算对。这个的运行时间是`O(N*m*log(N*m))`，但由于磁盘访问速度的细节在实践中会运行得更快。

如果你有一个分布式集群，那么你可以使用 MapReduce。它的运行与上一个解决方案非常相似。

至于统计方法，我的猜测是它们意味着遍历文件列表以查找每个名称的频率，以及其中具有不同名称数量的行数。如果我们假设每一行都是随机的名称组合，使用统计数据我们可以估计任何一对常见名称之间有多少交叉点。这将在文件的长度上大致呈线性关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:52:49.130

您可以为每个名称获取它出现的行号列表（使用哈希表来存储名称），然后为每对名称获取相应行索引的交集的大小（在两个递增序列的情况下这是线性时间）。假设名称的长度受常数限制。因此，如果您有`N`名称和`M`行，那么构建列表就像`O(MN)`最后阶段是`O(N^2 M)`.

# security - PHP 5：使用 cURL 下载文件安全吗？

> ID：11274958
> 
> 赞同：-1
> 
> 时间：2012-06-30T14:42:02.087
> 
> 标签：security, curl, codeigniter-2, php-5.2

我正在开发一个允许文件上传的项目，下载文件然后强制用户下载文件。

问题是，我一直在使用 file_get_contents，它工作正常，除了禁用 allow_url_fopen 时，我想提供一个解决方法。

在其他情况下，我遇到了这个问题，我使用了 cURL，效果很好，但我想知道以这种方式使用它是否安全？

如果 cURL 对此用途不佳，那么还有什么其他方法可以成为获取文件数据以供下载的好方法？

只是为了把它扔进去，我正在使用 CodeIgniter 2，如果这有什么不同的话。

谢谢

编辑：要清楚我的问题，文件将始终是本地的，并且位于 php 代码所在的服务器上，此脚本永远不会下载远程数据，这就是为什么 cURL 看起来不好使用，但 file_get_contents 也不是一个选项由于前面解释的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:58:35.723

我想通了，我忘记了 fopen 和 fread。

这解决了我的问题。

# java - 图像包位置

> ID：11274962
> 
> 赞同：0
> 
> 时间：2012-06-30T14:42:29.057
> 
> 标签：java, gwt, gwt-designer

我需要将我的 Image Bundle（从 ClientBundle 派生）放在哪里，以便 GWT Designer 找到它们？

我尝试`add`在 Image Bundle Palette 中进行操作，但 GWT Designer 找不到我的包。

我如何实现这一目标？

GWT SDK 2.5.0RC1，Eclipse Helios (3.6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:25:03.067

“ImageBundle Palette”显然是关于`com.google.gwt.user.client.ui.ImageBundle`s 的，而不是关于`com.google.gwt.resources.client.ClientBundle`.

请参阅[https://developers.google.com/web-toolkit/tools/gwtdesigner/palettes/gwt_palette](https://developers.google.com/web-toolkit/tools/gwtdesigner/palettes/gwt_palette)和[https://developers.google.com/web-toolkit/tools/gwtdesigner/features/gwt/image_bundles](https://developers.google.com/web-toolkit/tools/gwtdesigner/features/gwt/image_bundles)

# scala - Scala：使用具有表示类型的类型成员制作具体的特征类

> ID：11274964
> 
> 赞同：0
> 
> 时间：2012-06-30T14:42:38.873
> 
> 标签：scala

这是上一个问题的后续[问题](https://stackoverflow.com/questions/11236122/)，其中我有一个类型 member 的特征`Garage`，`CarType`它本身有一个 type member `FuelType`，我需要一个函数`refuel`，它可以将 的实例`CarType`作为第一个参数，并将第一个参数的实例`FuelType`作为第二个论点。

下面的两个特征的答案是给出`Car`一个表示类型`C <: Car[C]`。我现在遇到的问题是我无法弄清楚如何在实现的具体类上定义类型参数`Garage`，例如`ConcreteGarage`下面。

```
trait Fuel

trait Garage {
  type CarType <: Car[CarType]
  def cars: Seq[CarType]

  def copy(cars: Seq[CarType]): Garage

  def refuel(car: CarType, fuel: CarType#FuelType): Garage = copy(
    cars.map {
      case `car` => car.refuel(fuel)
      case other => other
    })
}

trait Car[C <: Car[C]] {
  type FuelType <: Fuel
  def fuel: FuelType

  def copy(fuel: C#FuelType): C

  def refuel(fuel: C#FuelType): C = copy(fuel)
}

class ConcreteGarage(val cars: Seq[ConcreteGarage#CarType]) extends Garage {
  type CarType = Car[CarType] // Nope
  //type CarType = Car[Any] // Nope
  //type CarType = Car[Nothing] // Nope
  //type CarType = Car[Car] // Nope
  //type CarType <: Car[CarType] // Nope
  def copy(cars: Seq[CarType]) = new ConcreteGarage(cars)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:05:47.497

*这就是为什么我说要小心在你的余生中*必须携带另一个类型参数的丑陋:)

```
class ConcreteGarage[C <: Car[C]](val cars: Seq[C]) extends Garage {
  type CarType = C
  def copy(cars: Seq[C]) = new ConcreteGarage(cars)
} 
```

当然，如果你有一个*特定*的车库，它就更简单了。

```
case class Benzin(litres: Int) extends Fuel
case class Mustang(fuel: Benzin) extends Car[Mustang] {
   type FuelType = Benzin
   def copy(fuel: Benzin) = Mustang(fuel)
}
case class MustangGarage(cars: Seq[Mustang]) extends Garage {
   type CarType = Mustang
   def copy(cars: Seq[Mustang]) = MustangGarage(cars)
}

val m = Mustang(Benzin(0))
val g0 = MustangGarage(Seq(m))
val g1 = g0.refuel(m, Benzin(45)) 
```

# jakarta-ee - 如何使用 tomcat7-maven-plugin 部署到远程服务器

> ID：11274968
> 
> 赞同：4
> 
> 时间：2012-06-30T14:42:48.230
> 
> 标签：jakarta-ee, tomcat, maven, maven-tomcat-plugin

我想使用 tomcat7-maven-plugin 将war文件从我的本地机器部署到远程服务器，这是我到目前为止的配置：

```
<plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0-beta-1</version>
                <configuration>
                  <server>pb</server>
                  <url>http://mydomain.com:8080/manager/html</url>
                </configuration>
            </plugin> 
```

我需要更多配置吗？我用什么命令来部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:08:19.890

我必须将以下内容添加到**settings.xml**：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <servers>
  <server>
        <id>pb</id>
        <username>myuser</username>
        <password>mypass</password>
  </server>
  </servers>

</settings> 
```

并使用命令`mvn tomcat7:deploy`

# firefox - 如何强制 Firefox 就我的应用使用 IndexedDB 请求用户许可？

> ID：11274969
> 
> 赞同：1
> 
> 时间：2012-06-30T14:42:50.460
> 
> 标签：firefox, permissions, indexeddb

[我在这里](http://pfa-kadet.doweb.ro)制作了一个原型应用程序，可以在我的机器上运行（FF 13.0.1）。为了进行更多测试，我尝试查看用户第一次访问它时的行为。所以我打开了一个虚拟机并运行它。问题是我没有收到浏览器关于我的应用程序的本地数据库使用情况的任何许可请求，因此我的应用程序没有按预期运行。然而，当我在寻找一些明确的权限设置时，firefox 询问了我想给我的应用程序访问本地数据库使用的 id。在那之后，我的应用程序工作了。

那么，如何强制 Firefox 向用户询问有关我的应用程序使用 IndexedDB 的权限？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:44:57.547

In Chrome, you're asked permissions when IndexedDB installs for the first time on a host (origin, port and protocol matching), but this is apparently not the default behavior in Firefox.

According to [this helpful Mozilla support ticket](http://support.mozilla.org/en-US/questions/818987#answer-180011), [there seem to be two types of permissions](https://bugzilla.mozilla.org/show_bug.cgi?id=757678) in FF: "indexedDB" and "indexedDB-unlimited." Only the latter comes into play; the user doesn't have to grant permission until the 50mb ceiling is reached.

The ticket describes expected behavior as allowing IDB by default and not seeing a prompt:

> Expected - app should finish loading and allow indexed DB by default without a prompt

If you'd like to control permissioning consistently in a cross browser way, I suggest you take matters in your own hand as the spec does not proffer a way that browsers should be going about this and we can see Chrome and Mozilla teams already disagree.

For example, store a "1" in `localStore` when the user grants permission and a "0" when she denies it. Refuse to open a database for someone with a "0" and prompt for permissions for those with an "undefined" as a flag.

# .net - 使用自己的类型为 AttachedProperty 设置值

> ID：11274970
> 
> 赞同：0
> 
> 时间：2012-06-30T14:42:59.527
> 
> 标签：.net, wpf, .net-4.0, attached-properties

我创建了一个类

```
public class ContextMenuSetting {
    public bool ContextMenuAllowed { get; set; }
    public string GridKey { get; set; }
} 
```

还有一个 AttachedProperty，例如：

```
public static readonly DependencyProperty ContextMenuSettingsProperty = DependencyProperty.RegisterAttached("ContextMenuSettings", typeof(ContextMenuSetting), typeof(BarItemLink), null);

public static void SetContextMenuSettings(this BarItemLink target, ContextMenuSetting contextMenuSetting) {
    target.SetValue(ContextMenuSettingsProperty, contextMenuSetting);
}

public static ContextMenuSetting GetContextMenuSettings(this DependencyObject target) {
    return (ContextMenuSetting)target.GetValue(ContextMenuSettingsProperty);
} 
```

我现在在 xaml 中使用了 BarItemLink：

```
<dxb:BarItemLink BarItemName="newActivity"  /> 
```

有人可以帮助我，我现在如何为 BarButtonLink 的 AttachedProperty ContextMenuSettings 设置一个值？

**编辑 - 更新解决方案：**

在 Charleh 的帮助下，我找到了解决方案：

```
<dxb:BarItemLink BarItemName="newActivity">
   <pcce:BarItemLinkExtensions.ContextMenuSettings >
       <pcce:ContextMenuSettings ContextMenuAllowed="True" GridKey="hallo"/>
   </pcce:BarItemLinkExtensions.ContextMenuSettings>
</dxb:BarItemLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:53:35.730

您是否在 XAML 中包含了 ContextMenuSetting 类命名空间？

```
xmlns:ctxmenu="SomeNameSpace"

<dxb:BarItemLink BarItemName="blah" ctxmenu:ContextMenuSetting.ContextMenuSettings="blah" /> 
```

编辑：如果要设置自定义类型，可以使用 TypeConverter （如果要输入字符串值）或使用扩展语法

```
<dxb:BarItemLink BarItemName="blah">
   <ctxMenu:ContextMenuSetting.ContextMenuSettings SomeProperty="SomeValue" />
</dxb:BarItemLink> 
```

或者 TypeConverter 如果你想这样做：

```
<dxb:BarItemLink BarItemName="blah" ctxmenu:ContextMenuSetting.ContextMenuSettings="blah" /> 
```

它将解释字符串值“blah”并使用 TypeConverter 在代码中创建正确的类型

[http://msdn.microsoft.com/en-us/library/aa970913.aspx](http://msdn.microsoft.com/en-us/library/aa970913.aspx)

# c++ - 是 c++ std::map 订购？

> ID：11274978
> 
> 赞同：23
> 
> 时间：2012-06-30T14:43:42.597
> 
> 标签：c++

STL 地图是有序的吗？

具体来说，我需要知道是否订购了 std::map 。因此，如果我对其进行迭代，它将首先使用第一个插入字符串进行迭代。

那么下面会一致地迭代A，C然后B吗？

```
std::map<string,string> str_map;

str_map.insert(std::make_pair("A","Data"));
str_map.insert(std::make_pair("C","Data"));
str_map.insert(std::make_pair("B","Data")); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-30T14:45:20.293

> STL 地图是有序的吗？

是的， a`std::map<K,V>`是根据键排序的`K`，[`std::less<K>`](http://en.cppreference.com/w/cpp/utility/functional/less)默认情况下用于比较对象。

> 所以如果我迭代它，它会先用第一个插入字符串迭代？

不，它将根据排序顺序进行迭代，而不是您插入元素的顺序。在 的情况下`std::string`，它按字典顺序（字母顺序）排序。

如果要根据插入顺序进行迭代，最好使用序列容器，例如 a`std::vector`或 a `std::list`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T14:47:55.347

`std::map`s 使用给定类型`operator<`或使用自定义比较函数/仿函数（如果将其作为参数提供给构造函数）进行排序。

所以不，当你遍历地图时，你得到的第一个项目不会是你第一个插入的项目——它将是按字母顺序排在第一位的项目。

当然，对于您的示例代码没有什么影响，因为“A”是您插入的第一个键，也是按字母顺序排列的第一个键。

# c# - 从 C# 资源中获取位图数组

> ID：11274979
> 
> 赞同：0
> 
> 时间：2012-06-30T14:43:44.287
> 
> 标签：c#, bitmap

我做了一个闪屏程序，它从一个文件夹中加载图片并定期更改图像，所以效果是 - 心跳。但我想不是从文件夹加载这些图像，而是从程序集中的资源加载。我不知道如何加载这个位图数组，你能帮我吗？这是我的代码：

```
private static string imagefile;
    private static int selected = 0;
    private static int begin;
    private static int end = 0;
   // private static string path = SplashDemo.Properties.Resources.ResourceManager.GetStream();
    private static string path = "C:/Users/Desktop/Desktop/New folder";
    private static string[] folderFile = null;

    [STAThread ( )]
    private static void Main ( )
    {

        Splasher.Splash = new SplashScreen ( );
        Splasher.ShowSplash ( );
     // TIMER
        System.Timers.Timer timer = new System.Timers.Timer();
        timer.Interval = 50;
        timer.Enabled = true;
        timer.AutoReset = true;
        timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Tick);
    // END TIMER

    // GET ASSEMBLY FILS
        System.Reflection.Assembly thisExe;
        thisExe = System.Reflection.Assembly.GetExecutingAssembly();
        string[] resources = thisExe.GetManifestResourceNames();
      // Bitmap[] image = new Bitmap[string];
      // Bitmap[] imagew = new Bitmap[10];
      // Bitmap image = new Bitmap(file);
     //  string[] embeddedResources = Assembly.GetExecutingAssembly().GetManifestResourceNames();
      // END GET ASSEMBLY FILS

        // GET DIRECTORY FILES
        string[] part1 = null, part2 = null, part3 = null;
        part1 = Directory.GetFiles(path, "*.png");
        part2 = Directory.GetFiles(path, "*.jpeg");
        part3 = Directory.GetFiles(path, "*.bmp");
        folderFile = new string[part1.Length + part2.Length + part3.Length];
        Array.Copy(part1, 0, folderFile, 0, part1.Length);
        Array.Copy(part2, 0, folderFile, part1.Length, part2.Length);
        Array.Copy(part3, 0, folderFile, part1.Length + part2.Length, part3.Length);
        bool beating = true;
        selected = 0;
        begin = 0;
        end = folderFile.Length;
        while (beating == true)
        {
            ImageListener.Instance.ReceiveImage(string.Format(@"{0}", imagefile));
        }

    }

    public static void timer_Tick(object sender, EventArgs e)
    {
        ChangeImage();
    }

    public static void ChangeImage()
    {
        if (selected == folderFile.Length - 1)
        {
            selected = 0;
            imagefile = (folderFile[selected]);
        }
        else
        {
            selected = selected + 1;
            imagefile = (folderFile[selected]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:57:12.227

1.  将图像添加到您的项目中
2.  右键单击图像 - 单击属性
3.  在属性窗口中，将 Build Action 设置为 Embedded Resource

例如，如果您添加的图片在 assembly中调用`MyPictureName.jpg`的文件夹中调用，您将执行以下操作：`Resources``MyAssemblyName`

```
var stream = Assembly.GetExecutingAssembly()
    .GetManifestResourceStream("MyAssemblyName.Resources.MypictureName.jpg");

pictureBox1.Image = new Bitmap(stream); 
```

# mule - Mule 3.2 流程和 cxf:jaxws-service

> ID：11274980
> 
> 赞同：0
> 
> 时间：2012-06-30T14:43:44.440
> 
> 标签：mule

我对 mule 比较陌生，并试图定义一个 mule 流，该流通过基于肥皂的 Web 服务获取请求 XML。XML 基于复杂的模式，我使用 WSDL2Java 生成了类

收到请求后 cxf:jaxws-service 执行方法 submitOrder(SubmitOrderRequest 参数)。执行此方法后，我想将请求 XML 转换为稍微不同的格式。然后需要将此 XML 转发到另一个 Web 服务。问题是来自 ServiceImpl 的 mule 消息包含 SubmitOrderResponse，而我仍然想处理 SubmitOrderRequest。

```
<flow name="testService">
    <http:inbound-endpoint address="http://localhost:62005/test"
        exchange-pattern="request-response">
        <cxf:jaxws-service serviceClass="com.test.ServicePortType" />
    </http:inbound-endpoint>
    <component class="com.test.ServiceImpl" />
    <!--  transformer ref="MVIRequestTransformer" / -->
    <!--  xm:object-to-xml-transformer / -->
    <!-- logger message="XML payload is #[payload]" level="INFO" / -->
    <!-- SEND TRASNFORMED MESSAGE TO ANOTHER SERVICE -->
</flow>

@WebService(endpointInterface = "com.pennmutual.services.mvi.MVIServicePort")
public class ServiceImpl implements ServicePortType {
    ...
    @Override
    public SubmitOrderResponse submitOrder(SubmitOrderRequest parameters) {
    ...
    }
...
} 
```

我的选择是什么。我可以想到以下几点—— 1\. 将请求对象放在上下文中的某个位置，稍后将其检索以进行处理。2.将submitOrder的返回类型改为Object，返回SubmitOrderRequest而不是SubmitOrderResponse。

请建议处理这种情况的最佳方法。我正在使用骡子 3.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:40:25.457

我认为有两种优雅的方法可以做到这一点（不包括涉及更改 web 服务接口的方法）

将请求存储到会话变量中，然后将其恢复。这是您的流程的样子：

```
<flow name="testService">
<http:inbound-endpoint address="http://localhost:62005/test" exchange-pattern="request-response">
<cxf:jaxws-service serviceClass="com.test.ServicePortType" />
</http:inbound-endpoint>
<message-properties-transformer scope="session">
<add-message-property value="payload" key="originalPayload" />
</message-properties-transformer>
<component class="com.test.ServiceImpl" />
</flow> 
```

在组件周围使用丰富器将返回的值存储到变量中，这样它就不会成为流的有效负载。以下示例说明如何实现此目的

```
<flow name="Echo" doc:name="Echo">
<http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="6090" path="echo" encoding="UTF-8" />
<cxf:jaxws-service serviceClass="org.mule.example.echo.Echo" />
<enricher target="#[variable:echo]">
<component class="org.mule.example.echo.Echo" />
</enricher>
<logger level="ERROR" message="#[variable:echo]"/>
</flow> 
```

[您可以在此处](http://www.mulesoft.org/documentation-3.2/display/MULE3USER/Message+Enricher)找到有关浓缩器的更多信息

# asp.net - 检查会话即将结束，然后向用户显示警报

> ID：11274981
> 
> 赞同：0
> 
> 时间：2012-06-30T14:43:52.367
> 
> 标签：asp.net, session, session-timeout

我们可以检查是否将用户会话设置到 IIS 中，是否即将在几秒钟内到期，如果是，那么我们可以向用户显示任何警报或通知吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:01:47.593

您可以将会话超时设置为某个值，例如 30 分钟。使用 javascript 代码来检测用户不活动或空闲时间。

如果用户在 20 分钟内处于非活动状态，您可以向他显示弹出窗口或指向用户的链接，说您是否要继续会话。如果用户单击该链接，他的会话将继续，否则他将被重定向到注销页面。

[检测空闲时间](http://paulirish.com/2009/jquery-idletimer-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:03:18.080

这篇文章有非常清晰和很好的例子：[Alert-Session-Time-out-in-ASP-Net](http://www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net)

有如何提醒用户、重定向到主页或延长会话的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T14:47:11.900

您不能做的是知道“如果会话即将在某一秒内到期”，但是您可以做的是在会话结束时将用户重定向到某个页面。将此添加到您的 Global.asax

```
protected void Session_End(object sender, EventArgs e)
        {
           Response.Redirect("sessionend.aspx");//Youe page which greets the user the session is over
        } 
```

# mobile - 这种架构对于跨平台/浏览器兼容的仪表板是否有效？

> ID：11274984
> 
> 赞同：1
> 
> 时间：2012-06-30T14:44:17.030
> 
> 标签：mobile, architecture, dashboard

我正在为我的公司研究仪表板的架构，以消除我们现在拥有的具有树视图菜单并使用 SQL Reporting Services 报告查看器控件的笨重报告 UI。

我正在考虑在客户端使用 ASP.NET MVC 4 服务器端和 Telerik Kendo UI 来处理数据表、图表和图形。对于数据访问，我将使用 ADOMD.NET 从 SSAS 多维数据集中检索数据。

这样做的原因是我对轻量级、快速且在 Android 平板电脑、iPad、Firefox、Safari 和 IE 9、iPhone、Android 手机等上运行同样良好的东西感兴趣。

对于轻量级、跨平台兼容的公司仪表板来说，这会是一种有效的架构吗？对于 MSFT 环境，是否有更好的替代方案可以满足我的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:26:17.980

我正在使用 ASP.NET MVC3/4 和 Telerik Kendo UI 开发一个非常相似的项目。

请参阅[这篇文章](https://stackoverflow.com/questions/5349071/best-option-to-retrieve-anaylysis-services-ssas-cube-data-dynamically-in-asp-n)，了解使用第三方实体框架提供程序的最简单方法。从技术上讲，这意味着您所要做的就是将从[SSAS Entity Framework Provider](http://www.agiledesignllc.com/products)获得的数据源序列化为JSON，然后将其提供给 Kendo UI 控件，然后您就可以开展业务了。

# html - 选项的背景图片

> ID：11274985
> 
> 赞同：1
> 
> 时间：2012-06-30T14:44:25.427
> 
> 标签：html, css

我想要一个`<select>`元素，每个元素都`<option>`标有一个图标。

我可以`<select size="5">`通过将背景图像应用于`<select>`每个图标与一个选项一致的背景图像来实现这一点，但这在很大程度上取决于`<option>`可预测的高度（不是）。

我可以将单独的背景颜色应用于不同的选项，那么为什么不使用背景图像呢？

实际上，这个问题可以扩展到涵盖“哪些样式属性可以和不能用于`<option>`标签？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:57:32.273

你不能在浏览器中可靠地设置这样的元素样式；其中一些将允许您插入背景等，有些则不允许。

如果您想要保证跨浏览器兼容性，唯一的方法是使用自定义小部件而不是`<select>`元素。

如果您对有限的兼容性没问题，请说明您的目标浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:55:02.660

不幸的是，您不能将图像添加到选项标签，因为它们只支持文本。实现所需效果的唯一方法是使用 javascript/jquery 进行自己的“选择”

# facebook - 我可以使用 facebook open graph api 找到谁来我的网站吗

> ID：11274986
> 
> 赞同：-1
> 
> 时间：2012-06-30T14:44:29.103
> 
> 标签：facebook, web, facebook-opengraph

在我的网站中，如果我使用开放图形 API，我可以跟踪谁进入我的网站（我的意思是说这个人的 Facebook 个人资料 ID）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:43:54.757

不，你不能。如果他首先连接到您的应用程序，您只能获取实际用户。

# git - 无法使用 netbeans 将主分支推送到 git 存储库

> ID：11274989
> 
> 赞同：10
> 
> 时间：2012-06-30T14:45:24.670
> 
> 标签：git, netbeans, branch, push

我刚刚安装了 netbeans 并通过 ssh 连接到我的 git 存储库。

除了推送主分支外，一切正常。每次我在主分支上提交一些更改并尝试推送分支时，我都会得到这个弹出窗口：

```
There were errors during the push.
Open output to see more details. 
```

细节是

```
==[IDE]== Jun 30, 2012 4:29:42 PM Pushing finished.
==[IDE]== Jun 30, 2012 4:32:38 PM Pushing
git push ssh://50.57.180.187:22/var/www/netbeans +refs/heads/master:refs/heads/master
Remote Repository Updates
Branch : master
Old Id : cc6de40b3236047b0212e318f9977a7b75395177
New Id : fe8f3af403524ba5731fdf1e0b8773c4ef223840
Result : REJECTED_OTHER_REASON

Local Repository Updates
Branch : origin/master
Old Id : cc6de40b3236047b0212e318f9977a7b75395177
New Id : fe8f3af403524ba5731fdf1e0b8773c4ef223840
Result : NOT_ATTEMPTED

==[IDE]== Jun 30, 2012 4:32:43 PM Pushing finished. 
```

但是对于其他分支，一切都很好。难道我做错了什么？

编辑：远程回购不是裸露的，更多信息[在这里](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:02:01.367

您必须尝试推送新提交以替换已推送的现有提交（“重写历史”）

您需要在[NetBeans 的 git push 向导对话框中](http://netbeans.org/kb/docs/ide/git.html#push)`git push --force`执行或选择类似的选项（如果支持）。 并且假设“ ”在远程仓库上被授权（[并非总是如此](http://forum.assembla.com/forums/2/topics/3201)）。 如果其他人已经从远程仓库中撤出，重写其历史通常不是一个好主意。
`push --force`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:09:21.827

看起来问题是您的 git 存储库不是裸露的。

要验证你可以尝试在命令行上通过 git 推送，它会给出更详细的解释。

问题可能是 master 当前已在远程存储库中签出。为了能够推送 master 分支，您可以尝试在远程存储库中检出除 master 之外的其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T13:45:30.660

我在通过netbeans（在mac上）推送时遇到了同样的问题，这是由另一种情况引起的：

在本地创建分支时，我（意外地）使用德语变音符号 (ü,ä,ö) 作为分支的名称。在我尝试将其推送到远程存储库之前，本地工作正常。

我的解决方法：在本地创建另一个名称中没有变音符号的分支，将错误命名的分支合并到其中，将新分支推送到远程仓库。

希望这可以帮助某人在搜索解决方案时节省时间。

# javascript - 为什么这个 URL 不属于同源策略？

> ID：11274991
> 
> 赞同：2
> 
> 时间：2012-06-30T14:45:41.853
> 
> 标签：javascript, jquery, json, cross-domain, jsonp

我对 JSON-P 的了解（来自[JSON-P VS JSON](https://stackoverflow.com/a/2887218/778687)和[维基百科](http://en.wikipedia.org/wiki/JSONP)）是 - 发明 JSON-P 是为了克服[浏览器的同源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)并从另一个域加载 JSON 对象。stackoverflow 上有一篇[文章](https://stackoverflow.com/a/2686406/778687)展示了 JSON-P 调用的工作原理。看起来，如果我`?callback=?`从 URL 中删除，JSON-P 请求就像普通的 JSON 调用一样，因此被同源策略拒绝。[这个活生生的例子](http://jsfiddle.net/4HXyJ/)证明了这一点。

现在我有另一个 URL：`https://graph.facebook.com/100001612121705.json` 我使用以下方法从中加载数据（[访问此处查看实时示例](http://jsfiddle.net/yq9Bb/1/)）：

```
$(document).ready(function() {
    $.getJSON("https://graph.facebook.com/100001612121705", null,
    function(data) {
        $.each(data, function(key, val) { 
            alert(key + ' is ' + val);
        });
    });
});​ 
```

请注意，我没有将`?callback?`与我的 URL 一起使用，并且此请求仍然能够从另一个域获取 JSON 数据！这对我来说非常令人惊讶。谁能解释一下为什么这个请求没有被同源规则拒绝？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T14:51:26.360

这是因为 HTTP 响应包含此标头：

```
Access-Control-Allow-Origin: * 
```

这`*`意味着任何来源都可以通过 XHR (Ajax) 检索给定的资源。

因此，如果您的 Web 服务器上有资源，并且希望通过 XHR 使其可用而不管来源，只需将上述标头添加到 HTTP 响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T14:53:20.510

Facebook 的服务器发出一个标头

```
Access-Control-Allow-Origin: * 
```

此标头由浏览器在调用的第一阶段检索并解析，它表明任何引用者（原始页面）都可以从该 url 加载数据。从而绕过同源策略限制。

有关标准的信息在这里：

[跨域资源共享](http://www.w3.org/TR/cors/)

# java - 如何获得物品

> ID：11274993
> 
> 赞同：0
> 
> 时间：2012-06-30T14:45:54.080
> 
> 标签：java, jsp, el

JSP标签代码为：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ attribute name="items" required="true" %>
${items[0]} 
```

JSP代码是：

```
<%@ taglib prefix="t" tagdir="/WEB-INF/tags"%>
<t:input items="${form.items}"></t:input> 
```

也许我忘记了属性的类型或其他？为什么在 JSP 和 JSP 标签中访问值的方式不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:45:34.153

属性的默认类型是`java.lang.String`。如果您期望其他内容，请指定期望的类型：

```
<%@ attribute name="items" required="java.util.Collection" %> 
```

或者

```
<%@ attribute name="items" required="java.lang.Object" %> 
```

例如。

# asp.net-mvc-3 - 如何将teleriks datepicker 值传递给控制器 ？

> ID：11274994
> 
> 赞同：1
> 
> 时间：2012-06-30T14:46:02.350
> 
> 标签：asp.net-mvc-3, controller, telerik, telerik-datepicker

这是我的代码：

我需要将数据传递给控制器​​。

```
@{
DateTime today = DateTime.Now; //current date
DateTime firstDay = today.AddDays(-(today.Day - 1)); //first day

today = today.AddMonths(1);
DateTime lastDay = today.AddDays(-(today.Day)); //last day
}
//@using (Html.BeginForm())
//{
//<fieldset>
    <br /><br />
    <h2>Please select date range for the report</h2>
    <table>
        <tr>
            <td>Begin Date</td>
            <td>
                @(Html.Telerik().DatePicker()
                    .Name("BeginDate")
                .ShowButton(true)
                .Value(firstDay)
                )
            </td>
        </tr>

        <tr>
            <td>End Date</td>
            <td>
                @(Html.Telerik().DatePicker()
                            .Name("EndDate")
                .ShowButton(true)
                        .Value(lastDay)
                )
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <input type="submit" value="Show Report" />
            </td>
        </tr>

    </table>
//</fieldset> 
```

//}

datepicker 没有绑​​定到模型，我需要我正在使用的网格数据的值。（telerik 网格 ajax）

我还想阻止用户输入大于 BeginDate 的 Enddate

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T02:45:45.573

您可以向控制器发送一个 ajax 请求，传递日期选择器的值。获得结果后，将网格绑定到结果。

```
<input type="button" value="Display Grid" class="button" onclick="displayGrid()" title="Display grid using selected dates."/>

function displayGrid() {
  var grid = $('#Grid').data('tGrid');
  var beginDate = document.getElementById('BeginDate').value;
  var endDate = document.getElementById('EndDate').value;
  $.ajax(
  {
    type: 'POST',
    url: '/Home/NameOfActionMethod/',
    dataType: 'json',
    data: { bdate: beginDate, edate: endDate },
    success: function (result) {
      grid.dataBind(result);
    },
    error: function (req, status, error) {
      alert("Sorry! Error. " + status + error);
    }
  });
} 
```