# StackOverflow 问答 10062000-10062999

# python - 适用于 Python 2.7 (Ubuntu) 的 MySQLdb

> ID：10062002
> 
> 赞同：17
> 
> 时间：2012-04-08T10:07:29.353
> 
> 标签：python, mysql, ubuntu, mysql-python

在我安装 MySQLdb 之后

```
sudo apt-get install python-mysqldb 
```

我在使用 Python 2.6 时可以导入和使用它，但不是 2.7。（ImportError：没有名为 MySQLdb 的模块）

我认为 apt-get install MySQLdb 在 2.6 版中，但我不知道如何让 python 2.7 使用它。请帮我。非常感谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-08T10:15:19.597

如果你想在系统范围内安装 python2.7，你应该使用 easy_install-2.7。为 python 2.7安装[setuptools](http://pypi.python.org/pypi/setuptools)（或[分发），然后输入：](http://pypi.python.org/pypi/distribute)

> easy_install-2.7 mysql-python

**更新：**

要不就

> sudo apt-get install python2.7-mysqldb

请注意，如果不添加 sudo，您将无法进行更改。

# c# - 在 .NET 中使用 RSA 加密数据

> ID：10062004
> 
> 赞同：0
> 
> 时间：2012-04-08T10:07:49.447
> 
> 标签：c#, .net, vb.net, cryptography, rsa

我有一个`DER`作为`sha1RSA`. `Signature Algorithm`我必须使用它加密一些数据。

谁能告诉我如何加载`DER`文件并使用其中的`RSA`公钥加密我在 .NET 中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:15:59.523

DER 或可分辨编码规则是一种对数据对象（例如 X.509 证书）进行编码以进行数字签名或对其签名进行验证的方法。

X.509 证书仅包含公钥。你需要私钥来解密！

通常，私钥在受密码保护的 .PFX 文件中进行交换。

- 编辑 -

对不起，我误读了你的问题。是的，您可以使用 X.509 证书的公钥进行加密。您可以使用 System.Security.Cryptography.X509Certificates.X509Certificate2.Import 方法加载 .der。

然后转换公共并加密，例如：

```
rsa = (RSACryptoServiceProvider) certificate.PublicKey.Key;
encryptedText = rsa.Encrypt(msg, true); 
```

# git - 在 netbean 上使用 git 插件

> ID：10062005
> 
> 赞同：1
> 
> 时间：2012-04-08T10:07:52.790
> 
> 标签：git, netbeans, assembla

我在尝试从 assembla 克隆 PRIVATE 存储库时遇到问题。如果我使用命令行工具，它工作正常。但是从netbean IDE内部，它不起作用。我提供的设置截图如下：

![在此处输入图像描述](../Images/9deb44b73d3576893d62c943363def8d.png)

谁能帮我找出我做错了什么？谢谢。

# java - 最小化累积浮点算术误差

> ID：10062008
> 
> 赞同：3
> 
> 时间：2012-04-08T10:08:36.870
> 
> 标签：java, math, vector

我在 3D 空间中有一个 2D 凸多边形和一个测量多边形面积的函数。

```
public double area() {
    if (vertices.size() >= 3) {
        double area = 0;
        Vector3 origin = vertices.get(0);
        Vector3 prev = vertices.get(1).clone();
        prev.sub(origin);
        for (int i = 2; i < vertices.size(); i++) {
            Vector3 current = vertices.get(i).clone();
            current.sub(origin);
            Vector3 cross = prev.cross(current);
            area += cross.magnitude();
            prev = current;
        }
        area /= 2;
        return area;
    } else {
        return 0;
    }
} 
```

为了测试这个方法是否适用于多边形的所有方向，我让我的程序在每次迭代时将它旋转一点并计算面积。像这样...

```
Face f = poly.getFaces().get(0);
        for (int i = 0; i < f.size(); i++) {
            Vector3 v = f.getVertex(i);
            v.rotate(0.1f, 0.2f, 0.3f);
        }
        if (blah % 1000 == 0)
            System.out.println(blah + ":\t" + f.area()); 
```

使用 20x20 正方形进行测试时，我的方法似乎是正确的。然而，rotate 方法（Vector3 类中的一种方法）似乎会在多边形中每个顶点的位置引入一些误差，从而影响面积计算。这是 Vector3.rotate() 方法

```
public void rotate(double xAngle, double yAngle, double zAngle) {
    double oldY = y;
    double oldZ = z;
    y = oldY * Math.cos(xAngle) - oldZ * Math.sin(xAngle);
    z = oldY * Math.sin(xAngle) + oldZ * Math.cos(xAngle);

    oldZ = z;
    double oldX = x;
    z = oldZ * Math.cos(yAngle) - oldX * Math.sin(yAngle);
    x = oldZ * Math.sin(yAngle) + oldX * Math.cos(yAngle);

    oldX = x;
    oldY = y;
    x = oldX * Math.cos(zAngle) - oldY * Math.sin(zAngle);
    y = oldX * Math.sin(zAngle) + oldY * Math.cos(zAngle);
} 
```

这是我的程序的输出，格式为“迭代：区域”：

```
0:  400.0
1000:   399.9999999999981
2000:   399.99999999999744
3000:   399.9999999999959
4000:   399.9999999999924
5000:   399.9999999999912
6000:   399.99999999999187
7000:   399.9999999999892
8000:   399.9999999999868
9000:   399.99999999998664
10000:  399.99999999998386
11000:  399.99999999998283
12000:  399.99999999998215
13000:  399.9999999999805
14000:  399.99999999998016
15000:  399.99999999997897
16000:  399.9999999999782
17000:  399.99999999997715
18000:  399.99999999997726
19000:  399.9999999999769
20000:  399.99999999997584 
```

由于这最终打算用于物理引擎，因此我想知道如何将累积误差最小化，因为 Vector3.rotate() 方法将定期使用。

谢谢！

几个奇怪的笔记：

*   误差与旋转量成正比。IE。每次迭代更大的旋转 -> 每次迭代更大的错误。

*   将双精度值传递给旋转函数比传递浮点数时出错更多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T11:28:17.450

重复的浮点触发操作总是会产生*一些*累积错误——这就是它们的工作方式。要处理它，您基本上有两种选择：

1.  忽略它。请注意，在您的示例中，经过 20,000 次迭代（！），该区域仍然精确到小数点后 13 位。这还不错，考虑到[双打只能存储大约 16 位小数以](http://en.wikipedia.org/wiki/Double-precision_floating-point_format).

    实际上，绘制图表时，正方形的面积似乎或多或少呈线性下降：
    ![阴谋](../Images/4d91e3c3e8c6ae410484c0cd4a630315.png)
    这是有道理的，假设您的近似[旋转矩阵的有效](http://en.wikipedia.org/wiki/Rotation_matrix)[行列式](http://en.wikipedia.org/wiki/Determinant)约为 1 − 3.417825 × 10 ^(-18)，这在正常范围内双精度浮点误差范围一。如果是这种情况，您的正方形面积将继续以*非常*缓慢的指数衰减到零，因此您需要大约^(*~~20 亿 (2 × 10 ⁹ )~~7.3 × 10 ^(14)次迭代，使面积降至 399。假设每秒迭代 100 次，大约是~~七个半月~~23万年。*)

     **编辑：当我第一次计算该区域达到 399 需要多长时间时，似乎我犯了一个错误，并且以某种方式设法将衰减​​率高估了大约 400,000 倍（！）。我已经纠正了上面的错误。** 
**   如果你仍然觉得你不想要任何累积错误，答案很简单：不要迭代浮点旋转。相反，让您的对象将其当前方向存储在成员变量中，并使用该信息始终将对象从其原始方向旋转到当前方向。

    这在 2D 中很简单，因为您只需要存储一个角度。在 3D 中，我建议存储一个[四元数](http://en.wikipedia.org/wiki/Quaternion)或一个矩阵，并偶尔重新调整它，使其范数/行列式保持大约 1（并且，如果您使用矩阵来表示刚体的方向，它仍然近似[正交](http://en.wikipedia.org/wiki/Orthogonal_matrix)）。

    当然，这种方法不会消除对象*方向*的累积误差，但重新缩放确实可以确保对象的体积、面积和/或形状不会受到影响。* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:26:44.867

你说有累积误差，但我不相信有（注意你的输出并不总是下降），其余的错误只是由于浮点数的舍入和精度损失。

我确实在大学（在 java 中）研究了一个 2d 物理引擎，发现 double 更精确（当然是看到[oracles 数据类型大小](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

简而言之，您将永远无法摆脱这种行为，您只需要接受精度的限制

编辑：

现在我看看你的 .area 函数，由于

```
+= cross.magnitude 
```

但我不得不说整个函数看起来有点奇怪。为什么需要知道之前的顶点来计算当前面积？*

# security - webservice sessionless-authentication like amazon s3 is more strong with rsa?

> ID：10062009
> 
> 赞同：0
> 
> 时间：2012-04-08T10:08:38.743
> 
> 标签：security, openssl, rsa

我已经实现了一个 web 服务身份验证，它的工作原理与 amazon s3 几乎相同。

身份验证是无会话的。它是这样工作的：

*   在每个请求中发送一个`Date`HTTP Header
*   发送一个 HMAC_SHA1 的 secretKey+date-header+some-parts-of-the-body 的内容（伪代码`hmac_sha1(secretKey+dateHeader+substr(body,0,100))`：）
*   后端也知道 secretKey（20 个字符的随机密钥）。
*   后端也通过相同的 HMAC_SHA1 检查请求，如果值相等，则请求被“证明”并将被执行。

所以。我认为这几乎是亚马逊所做的。

但是不做对称（HMAC_SHA1）而不是做“请求的部分”的非对称加密（RSA）的想法呢？

我想避免在我的后端使用 secretKey。最好只将公钥放在后端。

*   你认为这是个好主意吗？
*   它会让系统“更强大”吗？
*   使用 RSA 加密的最大尺寸是多少？1000 字节？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:17:49.227

使用 RSA 执行此操作，您将在客户端拥有公钥，在服务器端（也称为后端）拥有私钥。你总是会在某个地方得到一些秘密密钥......

如果您担心安全性：

*   列出所有潜在的风险情景（技术和其他）
*   检查每种情况的可能性有多大
*   如果该特定情况成为现实，请检查“成本”是多少
*   审核您当前的安全基础设施

然后继续处理最有问题的点（即最高“成本”和/或“最高”概率）。

# php - 在 Joomla 中创建自定义表单

> ID：10062010
> 
> 赞同：0
> 
> 时间：2012-04-08T10:09:00.387
> 
> 标签：php, joomla1.5, joomla-extensions

我正在为 Joomla 1.5 编写一个组件。其中需要一个表格，实际上需要三个表格。

我已经搜索并看了很多，但找不到从哪里开始，所以我应该能够在前端显示表格。表单将根据用户信息显示在前端。每一个都会有一些不同。

我如何对表格进行编程？我知道组件是如何编写的，但对表单如何集成到组件中感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:17:31.677

在这里你可以找到一个关于创建 Joomla 组件的好教程[http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1](http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1)

可能您必须为每个表单创建 3 个视图。

# objective-c - IOS 5.1 使用 TableView

> ID：10062011
> 
> 赞同：0
> 
> 时间：2012-04-08T10:09:12.307
> 
> 标签：objective-c, xcode4, ipad

我正在尝试将 MasterDetail 视图与 Xcode 一起使用。在给定的 UITableView 中，我将内容类型更改为静态内容并添加了三列。但是，如果我现在在 iPad 模拟器中运行这个项目，这个表格单元格/行不会显示：/ ...我还需要做什么才能使这个单元格可见？是否有一个简单的教程如何设置带有静态内容的 UITableView？

谢谢和问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:43:50.920

检查这个。它真的会帮助你:)

CS193p 第 10 讲 pdf 文件： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%2010.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%2010.pdf)

视频：[http ://www.youtube.com/watch?v=OaiGn-W4bwU](http://www.youtube.com/watch?v=OaiGn-W4bwU)

Vocabulous（查看视频，这是演示的代码）： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Vocabulous.zip](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Vocabulous.zip)

# android - 样式化 ActionbarSherlock：操作项的 textColor

> ID：10062012
> 
> 赞同：4
> 
> 时间：2012-04-08T10:09:17.393
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的应用程序中更改了操作栏的背景，为了使文本再次可读，我必须更改文本的颜色。我在标题/副标题和选项卡文本方面取得了成功，但我在操作项的文本上苦苦挣扎——无论我尝试什么，它们都保持白色。有人对如何做到这一点有提示吗？溢出图标也是白色的，在木质背景上看起来不太好 - 这是使用下面的东西的一个*非常*好的理由吗？我不太确定不这样做的原因是什么，但由于我没有大型设备测试公园，我最好确定一下；-)

```
<!-- the following can be used to style the overflow menu button
     only do this if you have an *extremely* good reason to!! -->
<!--<style name="MyOverflowButton" parent="Widget.Sherlock.ActionButton.Overflow">
    <item name="android:src">@drawable/ic_menu_view</item>
    <item name="android:background">@drawable/action_button_background</item>
</style>--> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T13:12:17.663

我也为此苦苦挣扎，但更改操作项文本颜色的解决方案是：

```
<style name="My.Theme" parent="Theme.Sherlock.Light">
    <item name="android:actionMenuTextColor">@android:color/white</item>
</style> 
```

这里的关键是在一般主题中使用此属性，而不是在操作栏样式中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T13:06:54.930

尝试从`android:theme="@style/Theme.Sherlock.Light"`你的清单开始，然后改变你的风格。浅色主题以深色动作项目为特色。或者只是查看浅色主题以了解如何更改它们。

# jsp - 如何使用 Sencha touch 2 从 jsp 页面检索数据到我的商店？

> ID：10062022
> 
> 赞同：0
> 
> 时间：2012-04-08T10:13:17.333
> 
> 标签：jsp, sencha-touch-2

我想在我的列表中显示从 JSP 页面检索到的数据。我不知道该怎么做。这是我的 JSP 页面。也请更正 JSP 页面。

```
**category_List.jsp**

  %@page import="java.sql.*, java.util.*" %>
<% 
response.setContentType("application/json");

String result = "{\"root\"[{\"category_name\": \"Model number\"}]}";
response.getWriter().print(result);
response.getWriter().flush();
%> 
```

和我的煎茶代码

```
Ext.define('Sample.view.Blog',{
           extend:'Ext.navigation.View',
           xtype:'bloglist',
           config:{
               title:'Blog',
               iconCls:'star',
               scrollable:true,
               styleHtmlContent: true,
               items:{
                   xtype: 'list',
                   itemTpl: '{category_name}',
                   store:{
                       autoLoad: true,
                       fields: ['category_name'],
                       proxy:{
                           type: 'jsonp',
                           url: 'http://192.168.0.8:8080/new/category_list.jsp',
                           reader:{
                               type: 'json',
                                rootProperty: 'root'
                           }
                       }
                   }   
               }
           }
           }); 
```

我无法在列表中显示类别名称。谁能帮帮我吗。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:33:22.123

尝试以下方法，看看是否有帮助。

1.  `root`您的 JSP 文件在该行的节点之后缺少一个 : `String result`。将该行更改为

    ```
    String result = "{\"root:\"[{\"category_name\": \"Model number\"}]}"; 
    ```

    目前，您的 JSP 文件未提供正确的 JSON 文档，这就是您在列表中看不到结果的原因。

2.  确保 JSP 文件提供正确的 JSON 文档。如果文档不是以开头`[`和结尾，`]`则应将其添加到上述行的开头和结尾。

3.  将商店代理更改为：

    ```
    proxy:{
       type: 'ajax',
       url: 'http://192.168.0.8:8080/new/category_list.jsp',
       reader:{
           type: 'json',
           rootProperty: 'root'
       }
    } 
    ```

# php - 获取用户的用户名 - MyBB

> ID：10062024
> 
> 赞同：0
> 
> 时间：2012-04-08T10:13:43.333
> 
> 标签：php, forum, mybb

我想知道如何获取用户的用户名。我想要做的是这样显示它：
`<a href="{$mybb->settings['bburl']}/usercp.php?action=profile">Username here</a>`
我试过这个：
`{$mybb->user['name']}'`
但那是不成功的，我似乎在谷歌上找不到任何东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:27:13.477

我对 MyBB 没有那么丰富的经验，但经过一些研究，我发现了一些不同的方法。

```
$user = get_user($uid);
echo $user['username']; 
```

或者

```
global $db;
$qry = $db->query("SELECT uid FROM ".TABLE_PREFIX."users WHERE username = '".$usernamevar."'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T07:19:03.593

尝试将其放入您的模板中。

```
{$mybb->user['username']} 
```

无需对已存在的变量使用 PHP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T22:25:30.470

我认为你可以像这样组合所有这些。

```
<?php
define("IN_MYBB", 1);
require ('global.php'); // be sure that u r running this php-code in the same
                        // directory of global.php, or else change the path.
if($mybb->user['uid'] > 0)
{
    $uid  = $mybb->user['uid'];
    $user = get_user($uid);
    $name = $user['username'];
}
    // custom else here: in case of not logged-in user
?>
<a href="{$mybb->settings['bburl']}/usercp.php?action=profile"><?echo $name?></a> 
```

# opencv - 如何确定 cv::Mat 的人类可读类型？

> ID：10062027
> 
> 赞同：3
> 
> 时间：2012-04-08T10:14:35.323
> 
> 标签：opencv

我目前的问题是我想知道从视频文件中`cv::Mat`抓取的 -frames的类型。`cv::VideoCapture`文档没有具体说明（通常情况下，所以即使我在这种特殊情况下忽略了它，获得解决一般问题的答案仍然会有所帮助）。

当然，我可以打开相应的 OpenCV 头文件并通过`CV_64FC2`, ... 宏找到与 Mat 的`type()`. 但我有点厌倦了。必须有更简单的方法。

没有任何功能可以让我将 Mat 翻译`type()`成人类可读的格式吗？像这样：

```
cv::Mat myMatWithUnknownType;

// Some code modifying myMatWithUnknownType.
// ...

std::string readableType = myMatWithUnknownType.typeString();
std::cout << readableType; // Prints "CV_64FC3". 
```

你怎么处理那件事呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:25:08.030

首先，来自相机的格式只有一种：`CV_8UC3`. 这在 OpenCV 中是硬编码的，任何视频格式在发送给用户之前都会转换为此。所以

```
capture >> frame; 
```

将始终返回每通道 8 位的 RGB 图像。

现在，对于其他类型，您可以编写您的函数，但要注意 OpenCV 支持的类型并不多：一个 Mat 可以是1 到 512 个通道的`char`, `uchar`, `short`, `ushort`, `int`, `uint`, `float`,类型`double`（根据最新的文档.) 所以写你自己`type_to_string()`的并不难。

# c++ - 同时拥有点和点运算符有什么意义？

> ID：10062028
> 
> 赞同：3
> 
> 时间：2012-04-08T10:14:47.117
> 
> 标签：c++, pointers, syntax

我知道指向 (->) 和点 (.) 运算符之间的区别，但我不明白为什么需要两个棱角？不使用指针而只使用点运算符不是很容易吗？来自[http://www.programcreek.com/2011/01/an-example-of-c-dot-and-arrow-usage/](http://www.programcreek.com/2011/01/an-example-of-c-dot-and-arrow-usage/)

```
 #include <iostream>

    using namespace std;

    class Car
    {
    public:
int number;

void Create() 
{
    cout << "Car created, number is:  " << number << "\n" ;
}
    };

    int main() {
Car x;
// declares x to be a Car object value,
// initialized using the default constructor
// this very different with Java syntax Car x = new Car();
x.number = 123;
x.Create();

Car *y; // declare y as a pointer which points to a Car object
y = &x; // assign x's address to the pointer y
(*y).Create(); // *y is object
y->Create();

y->number = 456; // this is equal to (*y).number = 456;
y->Create();
    } 
```

为什么要费心使用指针？只需像 X 一样创建 Y，它的工作原理是一样的。如果您说您需要动态分配内存的指针，那么为什么还要使用点运算符呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T10:33:00.397

我认为你混合了两个不同的问题。

首先，`->`运营商是不必要的，是的。`x->y`等价于`(*x).y`，但`->`操作符更容易输入，所以基本上只是为了方便。

第二部分是是否使用指针。你是对的，通常你不应该这样做。默认情况下，只需在那时和那里创建您的对象，并直接引用它们：

```
Foo bar;
bar.baz(): 
```

但是在很多情况下仍然需要指针。对象需要能够引用其他对象。引用可以做到这一点，但不能重新安装。一旦初始化，它将始终指向同一个对象。

可以更新指针以指向不同的对象。

链表、树数据结构和无数其他东西都依赖于能够指向其他对象的对象。

所以是的，我们需要指针。但我们*不需要*操作员`->`。我们只是使用它，因为它很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T10:24:43.687

一种。它只是更容易在语义上理解代码，而无需查看类型或使用特殊符号（如`m_pszMyName`. 您可以立即告诉阅读代码什么是指针，什么是值。

湾。想想 shared_ptr 和覆盖运算符的情况。`shared_ptr<T>->get()`表示除 之外的东西`shared_ptr<T>.get()`。第一个是指向对象中的函数，第二个是 shared_ptr 类本身的函数。这只是一个例子，但你明白这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T11:05:34.600

从您的链接：

> 下面的例子应该是一个很好的例子。

这实际上有点*令人困惑*。为什么你会在堆栈 ( `Car x;`) 上创建一个对象，然后创建一个指向它的指针以使用它访问它`->`？

而不是试图回答隐含的问题“我们为什么需要指针？” 我将尝试消除该示例可能引起的任何混淆。

在您的评论中，您说：

> 我想知道创建不同的对象之间是否存在差异。

在这个例子中，只有一个对象，`Car`在**堆栈**​​上由创建`Car x;`（完整地说，堆栈上还有一个`Car`指针，由创建`Car *y;`）。它们在退出时超出范围`main()`，因此它们的内存被清理。

但是还有另一种创建对象的方法，我猜你已经根据你的评论知道了，这是用来在**堆上**`new`初始化它们的：。堆上的对象永远不会超出范围，因此您可以在调用的函数退出后继续使用它们，但您必须使用显式清理它们以防止内存泄漏。**`Car *z = new Car;``new``delete`**

 **就这样，一个指向对象的指针更现实的使用：返回值`new`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T10:29:20.777

> 不使用指针而只使用点运算符不是很容易吗？

C/C++ 与其他高阶语言一样，不会用一些糖衣语法封装指针。指针是自然产生的，下面的列表并不详尽

1.  从堆中分配内存。静态数据分配，或在堆栈中分配存储总是不可行的。所有权转移、空间限制和程序的动态性质都会产生开销。
2.  读取和写入文件。
3.  迭代对象，包括 C-Type 字符串。您可以使用数组访问语法，但安全性差异很小，并且当您传递给函数时数组会退化为指针（大小信息丢失）。

从 C++ 的角度来看，以上所有内容都可以封装到对象中。

1.  通过 iotream 文件 IO
2.  通过智能指针的指针（一些来自 C++98，一些来自 C++11 或 eve boost）
3.  STL 类型对象的迭代器。
4.  使用参考

尽管如此，即使在您没有明确看到它们的语言中，指针也存在。它们只是被封装到更高阶的对象中。

这在一定程度上解释了为什么我们不能超越指针思考，你可能感兴趣的下一部分是语法。为什么我们完全需要`ptr->somemember`而不是`(*ptr).somemember`. 它只是重复使用的简写。C/C++ 程序员已经习惯了它，到目前为止，我还没有看到使用多余语法的单个程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T11:09:44.393

-> 只是简写。考虑一个代表树节点的类：

```
struct node {
    int data;
    node* left;
    node* right;
}; 
```

成员`left`是指向节点左孩子的指针。假设我们有一个指向某个节点的指针`p`，现在我们要获取指向 p 的左孩子的左孩子的右孩子的指针，使用 dot 我们必须写`(*(*(*p).left).left).right`，难以阅读且容易出错，使用 ->我们可以简单地写`p->left->left->right`，很清楚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T11:22:53.267

C++中同时存在`->`and`.`运算符是受 C 语言的直接影响。C 区分了通过指针访问对象和访问在当前作用域中声明的对象。

在 C++ 中，引用是访问本地范围对象的自然扩展。

不知道 C 的创造者有没有考虑到这一点，但我一直把它当作一个小的优化指南。查看一段代码，您可以看到`->`它将在运行时计算最终地址，而`.`运算符将在编译时计算地址。这甚至在访问结构成员时也有效。考虑以下几点：`myptr->mMember.mValue`从 mMember 到 mValue 的偏移量可以在编译时计算，而指针的最终地址计算必须在运行时计算。我承认，就目前的优化而言，这是一个次要的考虑，并且在 C++ 中的引用不再可能这样做，但在 20 年前，这是需要牢记的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T11:59:54.320

是的，你总是可以使用`(*x).member`而不是`x->member`，但是你真的想要 when`x`是一个复杂的表达式吗？

将相关的东西（`*`在`.`这种情况下）放在很远的地方会使源代码的可读性降低，因此`->`“在一个地方”只是一种更好的语法。

* * *

至于需要指针的*概念*，主要有2个原因：

## 1\. 对象生命周期

有两种分配对象的方法

*   在堆栈上。
*   在动态内存中。

堆栈随着执行流程进入和退出函数而缠绕和展开，因此堆栈对象的生命周期不可避免地与我们在创建它的函数中停留的时间有关。

如果您需要一个比创建它的函数寿命更长的对象，则需要在动态内存中创建它，识别此类对象的*唯一*方法是通过其内存地址，也就是。指针。

## 2.对象共享

是否有**多个**其他对象需要访问该对象？如果是，那么这些其他对象没有办法引用共享对象，*除了*持有它的地址。

即使您只有一个其他对象，但它们的生命周期不同，“生命周期”的原因也适用。**如果**只有一个其他对象**并且**它们的生命周期匹配，则将其设为字段。**

# javascript - 带有多个视频的 Youtube javascript API (& ASP)

> ID：10062029
> 
> 赞同：1
> 
> 时间：2012-04-08T10:15:07.800
> 
> 标签：javascript, asp.net, embed, youtube-api

我已经让 ASP 在我的页面上生成嵌入代码，如下所示：

```
Table1.Rows(0).Cells(0).Text = "<object style=""height: 390px; width: 640px"" id=""ytplayer_object_left"">" & _
        "<param name=""movie"" value=""https://www.youtube.com/v/UASyS-jUKKI?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer_left"">" & _
        "<param name=""allowfullscreen"" value=""true"">" & _
        "<param name=""allowscriptaccess"" value=""always"">" & _
        "<embed src=""https://www.youtube.com/v/UASyS-jUKKI?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer_left"" type=""application/x-shockwave-flash"" allowfullscreen=""true"" allowscriptaccess=""always"" width=""425"" height=""344"" id=""ytplayer_left""></object>"

    Table1.Rows(0).Cells(2).Text = "<object style=""height: 390px; width: 640px"" id=""ytplayer_object_right"">" & _
        "<param name=""movie"" value=""https://www.youtube.com/v/uasys-jukki?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer_right"">" & _
        "<param name=""allowfullscreen"" value=""true"">" & _
        "<param name=""allowscriptaccess"" value=""always"">" & _
        "<embed src=""https://www.youtube.com/v/uasys-jukki?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer_right"" type=""application/x-shockwave-flash"" allowfullscreen=""true"" allowscriptaccess=""always"" width=""425"" height=""344"" id=""ytplayer_right""></object>" 
```

我已确保两者的 ID 不同，并且两者都正确调用了 onYouTubePlayerReady(id)（返回“ytplayer_left”和“ytplayer_right”）。但是，我无法将每个视频作为不同的 javascript 变量，因此我可以独立播放/暂停它们。

这是我尝试过的代码：

```
var vid_left;
    var vid_right;
    function onYouTubePlayerReady(id) {
        alert(id);
        if (id = 'ytplayer_right') {
            vid_right = document.getelementbyId(id);
            alert(vid_right);
        }

        if(id = 'ytplayer_left') {
            vid_left = document.getelementbyId(id);
            alert(vid_left);
        } 
```

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:27:57.523

两个问题：

*   使用[`document.getElementById`](https://developer.mozilla.org/en/DOM/document.getElementById)（带大写字母）。
*   用于`==`比较变量，**而****不是** `=`.

代码：

```
var vid_left, vid_right;
function onYouTubePlayerReady(id) {
    alert(id);
    if (id == 'ytplayer_right') {
        vid_right = document.getElementById(id);
        alert(vid_right);
    } else if(id == 'ytplayer_left') {
        vid_left = document.getElementById(id);
        alert(vid_left);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:32:27.827

我不确定您是否可以使用 getElementById 获取标签。尝试：

```
var object = document.getElementById(objectID)

var embed = object.getElementsByTagName('embed')[0]; 
```

# cocoa - OSX - 服务不显示本地化的菜单标题字符串

> ID：10062034
> 
> 赞同：1
> 
> 时间：2012-04-08T10:15:40.173
> 
> 标签：cocoa, service, osx-lion

我有一个 Cocoa 应用程序。这与 OSX 服务菜单挂钩。我创建了三个`ServicesMenu.strings`用于本地化服务菜单标题的`en.lproj`和`zh-Hans.lproj`。*问题是 OSX 似乎确实在使用本地化文本。*`hi-IN.lproj`

 *## Info.plist（相关部分）

```
<key>NSServices</key>
<array>
    <dict>
        <key>NSKeyEquivalent</key>
        <key>NSMenuItem</key>
        <dict>
            <key>default</key>
            <string>CreateHere</string>
        </dict>
        <key>NSMessage</key>
        <string>createHere</string>
        <key>NSPortName</key>
        <string>CreateHereFilesService</string>
        <key>NSRequiredContext</key>
        <dict>
            <key>NSApplicationIdentifier</key>
            <string>com.apple.finder</string>
        </dict>
        <key>NSSendFileTypes</key>
        <array>
            <string>public.folder</string>
        </array>
        <key>NSUserData</key>
        <string>create</string>
    </dict>
</array> 
```

## ServicesMenu.strings (en.lproj)

```
/* 
  ServicesMenu.strings
*/

/* default */
"CreateHere" = "Create File Here"; 
```

*在服务菜单上，我可以看到选项`CreateHere`而不是`Create File Here`.*

# 更新

如果这有帮助。这是输出`/System/Library/CoreServices/pbs -dump_pboard`

```
{
    CFPrincipalLocalizations =     (
        English
    );
    CFVendedServices =     (
                {
            NSBundleIdentifier = "com.applegrew.apple.service.CreateHereFiles";
            NSBundlePath = "/Users/applegrew/Library/Services/CreateHereFiles.app";
            NSMenuItem =             {
                default = CreateHere;
            };
            NSMessage = createHere;
            NSPortName = CreateHereFilesService;
            NSRequiredContext =             {
                NSApplicationIdentifier = "com.apple.finder";
            };
            NSSendFileTypes =             (
                "public.folder"
            );
            NSUUID = <199fd7c0 cdd146fb 9a564a93 231b23f9>;
            NSUserData = create;
        }
    );
    CFVersion = 2;
} 
```

*不像其他服务（上面未显示）`NSMenuItem`没有任何条目`English`。*这与我没有`English.lproj`，而是我有有什么关系`en.lproj`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:36:06.260

今天在向我的应用程序添加服务时遇到了同样的问题。

除本地化外，一切正常。

通过运行以下命令修复了该问题：

```
/System/Library/CoreServices/pbs -flush

/System/Library/CoreServices/pbs -update 
```

### 根据English.lproj

> 这与我没有任何English.lproj，而是我有en.lproj 有什么关系吗？

English.lproj 已过时，请改用 en.lproj。来自苹果文档：

> 对于语言名称，您可以使用 ISO 639-1 或 ISO 639-2 约定。ISO 639-1 规范使用两个字母的代码来识别语言，是识别语言的首选方式。

查看国际化编程主题（语言和区域设置指定 → 语言指定）了解更多信息。

[https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html#//apple_ref/doc/uid/20002144-SW1](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html#//apple_ref/doc/uid/20002144-SW1)*

# php - mySQL 中的触发器和过程问题

> ID：10062035
> 
> 赞同：0
> 
> 时间：2012-04-08T10:15:53.123
> 
> 标签：php, mysql, triggers, procedures

当系统将新记录插入我的一个数据库表时，我想运行一个特定的脚本（名为 proc.php 文件，见下文）。（我读到我需要这个 UDF 库，我已经在我的服务器上安装了它并且它工作正常）

为此我写了一个触发器和一个程序

触发代码：

```
DELIMITER $$

USE `db_name`$$

DROP TRIGGER /*!50032 IF EXISTS */ `trigger`$$

CREATE /*!50017 DEFINER = 'root'@'localhost' */ TRIGGER `trigger` AFTER INSERT ON `billing` 
FOR EACH ROW 
BEGIN
    CALL `db_name`.`udf_proc`(NEW.user_id);
END;
$$

DELIMITER ; 
```

程序代码：

```
DELIMITER $$

CREATE /*[DEFINER = { user | CURRENT_USER }]*/ PROCEDURE `db_name`.`udf_proc`(userId INT)
BEGIN
    DECLARE cmd CHAR(255);
    DECLARE result CHAR(255);

    SET cmd = CONCAT('php -f "/var/www/html/proj/proc.php" ',userId);
    SET result = sys_eval(cmd);
END$$

DELIMITER; 
```

当我尝试手动插入新记录时，什么也没有发生，我不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:24:48.923

您确定 MySQL 具有`/var/www/html/proj/proc.php`运行 php 脚本的权限吗？

你检查过 MySQL 日志吗？

```
/var/logs/mysql.log
/var/logs/mysql.err 
```

# ruby-on-rails - rails 3.1 partial_updates 似乎不适用于密码

> ID：10062045
> 
> 赞同：0
> 
> 时间：2012-04-08T10:18:57.373
> 
> 标签：ruby-on-rails, passwords

我有一个带有密码属性的用户模型，它被保存为密码摘要。我想要做的是将编辑用户页面和编辑密码页面分开，这样管理员每次需要更改其他内容时都不需要输入密码。为此，我做了一个额外的动作/视图。

我的问题是，当我更新用户信息时，即使表单中没有密码字段，我也会收到密码验证错误。这使我得出的结论是 partial_updates 不适用于密码属性（因为我已经在控制台中测试过它已启用，并且确实如此）

这是我做错了什么，还是我应该以不同的方式处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:51:45.410

只有在更改密码时才需要验证密码。如果未更改，`password`则应跳过该字段的验证。

Railscasts.com[第 41 集](http://railscasts.com/episodes/41-conditional-validations)向您展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:27:24.980

类似于@normalocity 提到的railscasts 方法，但不需要在控制器中设置伪属性，我们这样做（本质上取自restful_authentication）：

```
attr_accessor :password

validates :password,
          :length => { :minimum => 8 },
          :confirmation => true,
          :presence => true,
          :if => :password_required?

def password_required?
  password_digest.blank? || !password.blank?
end 
```

基本上，我们假设如果`password_digest`还没有设置（对于新记录），或者如果`password`已经设置了伪属性，那么这意味着密码正在被更改并且必须运行验证。所以我们不需要`updating_password`像在 railscasts 剧集中那样设置伪属性。

# java - EJB 2.1 实体如何获取列表而不是集合？

> ID：10062046
> 
> 赞同：0
> 
> 时间：2012-04-08T10:19:15.960
> 
> 标签：java, jakarta-ee, ejb

我正在使用 ejb 2.1 BMP，JBoss 7.1因为我需要 使用 SQL 语句中的 ORDER BY 从数据库
中获取按某些字段排序的列表（这取决于用户选择） 。 主页界面：

```
public interface AliveHome {  
    ...  
    Collection<Alive> findAllConstraint(...) [exceptions];  
    ...
} 
```

当我将返回类型更改为 List 时，我得到异常：

java.lang.ClassCastException：java.util.HashSet 无法转换为 java.util.List $Proxy13.findAllConstraint（未知来源）

但我需要 List（因为使用 HashSet，ORDER BY 没有意义）
如何获取 List？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:21:46.243

哈希集是无序的，因此您无法自动从中获取有序列表。您需要遍历哈希集，将项目添加到列表中，然后根据需要对该列表进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:32:24.373

JBoss 7 没有解决方案。我只安装了 JBoss 6
，它适用于返回类型 List ！=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:41:10.007

您是否尝试过使用`LinkedHashSet`? 我认为这至少在 EJB3 中有效。

# java - 子列表实现

> ID：10062049
> 
> 赞同：0
> 
> 时间：2012-04-08T10:19:30.363
> 
> 标签：java, linked-list

我正在实现我自己的 LinkedList 类。

对于 sublist(int a,int b function) 方法，mycode 不能正常工作。如果对 sublist 进行任何更改，它也应该在此方法之后根据 (a 和 b 索引)(我成功)返回列表的子列表列表必须生效（不成功）。例如，如果我执行 `(list.sublist(1,4)).clear`:list 元素从 1 到 4 也应该清除。我的代码是：

```
public List<E> subList(int arg0, int arg1) {

    ArrayList<E> ar = new ArrayList<E>(); 

    ListIterator myiter=listIterator(arg0);

    int k = arg1 - arg0 + 1;
    int i;

    for(i = 0; i < k; ++i) {
        ar.add((E) myiter.next());
    }

    List <E> sublist=new GITLinkedList(ar);
    return sublist;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:31:13.873

你为什么不返回一个扩展`List`并覆盖一些内部方法的类来欺骗其他类认为它只是一个子集。

例如，在您的子列表方法中，您可能会这样做......

```
public List<E> subList(int startPosition, int endPosition) {
    return new SmallerList(this,startPosition,endPosition);
} 
```

并创建一个`SmallerList`像这样的类...

```
public class SmallerList extends List {

    List parentList = null;
    int startPosition = 0;
    int endPosition = 0;

    public SmallerList(List parentList, int startPosition, int endPosition){
        this.parentList = parentList;
        this.startPosition = startPosition;
        this.endPosition = endPosition;
    }

    // overwrite some directly to appear smaller
    public int size(){
        return endPosition-startPosition;
    }

    // overwrite others to make adjustments to the correct position in the parentList
    public void add(int index, Object object){
        parentList.add(index+startPosition,object);
    }

    // overwrite others to only search between startPosition and endPosition
    public boolean contains (Object object){
        for (int i=startPosition;i<endPosition;i++){
            if (parentList.get(i).equals(object)){
                return true;
            }
        }
        return false;
    }

    // etc. for all other methods of List.
} 
```

使用这种方法，所有方法仍然作用于底层`parentList`，但是任何对`SmallerList`诸如`add()`, `get()`, `contains()`, `size()`, 的查询都被欺骗认为它们只在一个较小的`List`

# jquery - jQuery 和 last-child 在 IE8 中不起作用

> ID：10062062
> 
> 赞同：1
> 
> 时间：2012-04-08T10:21:46.803
> 
> 标签：jquery

我正在为此撕毁我的头发 - 它让我发疯，因为它应该如此简单。

在我的网站中，我使用从 twitter 提要的最后一个元素中`:last-child`删除：`border-bottom`

```
ul#twitter li:last-child {
    border: none;
} 
```

这在 Firefox / Chrome 中运行良好，但不适用于不支持 last-child 的 IE8。所以，我转向 jQUery 并将其放入我的`<head>`

```
<!--[if IE 8]>
    <script type="text/javascript">
        $(document).ready(function(){  
            $('ul#twitter li:last-child').css('border','none !important');
        });
    </script>
<![endif]--> 
```

这没有效果？我尝试过使用外部文件，使其不是特定于 IE8 的，无论是否准备好文档...我还尝试在 Firebug 中测试选择器以确保我的 jQuery 是正确的并且一切正常？有任何想法吗？

[网站在这里](http://bit.ly/tG5F34)

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:32:08.733

您的代码很好，问题发生是因为您`jQuery`在页面底部包含库，但您在顶部运行 IE8 脚本。

jQuery 尚未加载，因此您的脚本失败（*并且还会引发错误，**`'$' is undefined`***）

在 jQuery 包含之后移动代码，您应该已设置好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:25:58.203

尝试使用`:last`而不是`:last-child`：

```
$('ul#twitter li:last').css(...) 
```

作为参考，`:last-child`查找集合中的最后一个子元素 - 因此在您的情况下，将`li`查找`ul#twitter`.

`:last``li`只查找集合中的最后一个元素，因此您将匹配`ul#twitter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T10:29:21.983

也许最好使用

```
$('ul#twitter li').last(); 
```

或者

```
$('ul#twitter li:last'); 
```

作为您的选择器

# java - 从索引中找出文件的 SHA1

> ID：10062069
> 
> 赞同：4
> 
> 时间：2012-04-08T10:22:29.013
> 
> 标签：java, git, jgit

**短篇故事：**

就像标题所说，如何使用 JGit 从签出文件的索引中获取 SHA1 或哈希？

**很长的故事：**

我正在编写一个 GUI 应用程序并使用 JGit 来修改一个文件。因此，用户可以打开一个窗口，该窗口在一个漂亮的表格中包含该文件的所有修订。

用户可以进行更改并提交。此外，用户可以及时返回并从表中选择较旧的版本进行处理。

这个工作流程非常简单。我在内部对 JGit 所做的是我只使用一个分支（主分支）。HEAD 总是指向这个分支，这个分支的尖端总是最新的提交。当用户选择较旧的修订版时，我只需实例化`CheckoutCommand`类，使用设置文件路径`addPath()`并使用分支*master*使用`setName()`.

以上导致 HEAD 指向 master 分支，而 master 分支又指向最新版本（不是用户选择的版本）。但是索引和工作目录本身现在处于用户选择的修订版中。

所以，最后，我希望能够向用户展示表中的哪些修订当前已签出或激活，或者您想要调用的任何内容。此修订将在下面的屏幕截图中突出显示。但我不能为此目的使用主分支的尖端。我需要以某种方式从索引中获取 SHA1。

[发布](https://stackoverflow.com/questions/460297/git-finding-the-sha1-of-an-individual-file-in-the-index)了一个问题，这正是我想要的，但在 JGit 的上下文中（问题的作者使用 git）。

![代表版本的表格](../Images/f44b61e74d56d4447adc5f8b75ec6a6d.png)

**编辑：**经过多一点分析后，我发现我可以使用 JGit`DirCache`来访问索引的内容。因此，使用`DirCache`类我可以在索引中获取文件的 SHA1，就像在这个[问题](https://stackoverflow.com/questions/460297/git-finding-the-sha1-of-an-individual-file-in-the-index)中一样。但是现在我看到这个散列与我签出的修订散列不同。意思是，我不能使用这种方法来确定表中的哪个修订被签出。

那么，有没有其他方法可以使用我描述的工作流程来确定用户选择进行哪些修订？甚至，也许有人可以提出不同的方法。

我目前解决这个问题的方法是使用 JGit `AddNoteCommand`。当用户签出修订版时，我将简单地在此修订版中添加一个带有一些“键：值”的注释。该键将指示修订是否已签出。有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:01:51.563

所以首先，很抱歉这么说，但我认为做你所做的事情既危险又不直观。Git 是为使用分支而构建的。我认为您所做的称为分离头操作，尽管 JGit 允许您做很多事情，但不推荐这样做。但如果你非常小心，你可以继续。

其次，Dircache（以前的 Index）对象对我来说非常神秘，我认为（虽然我不太确定）JGit 团队仍在研究它。

最后，要实际回答这个问题：我认为您应该使用 LogCommand 及其 addPath(...) 方法。您将获得一个 RevCommit 列表，您可以从中确定 SHA1。我不完全记得你是如何获得 SHA1 的，我认为当你有一个 Ref 对象时你应该调用 getName() 。我猜你会在 StackOverflow 上找到它。

但是，我建议根据您获得的 SHA1 使用分支（取决于您要在提交时执行的操作）：您从刚刚找到的 SHA1 创建一个分支，并且可以安全地执行您想要的任何操作。然后，如果您不想提交任何内容，则要么销毁分支，要么稍后将其合并。

# php - 是否可以用 PHP 中的文本替换表达式？

> ID：10062072
> 
> 赞同：-2
> 
> 时间：2012-04-08T10:22:55.037
> 
> 标签：php

例如，可以替换

```
{'a1b2,left'} 
```

和

```
<img src="a1b2" class="left"/> 
```

在 PHP 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:28:37.060

是的...

```
$str = preg_replace('/\{\'(.*?),(.*?)\'\}/', '<img src="$1" class="$2"/>', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:30:23.693

是的你可以。

```
//strip unwanted characters.
$string = preg_replace("/[{'}]/", "", $string);
//convert string to array
$string = explode(',', $string); 
<img src="<?php echo $string[0]; ?>" class="<?php echo $string[1]; ?>"/> 
```

# magento - 找不到控制器 - Magento

> ID：10062073
> 
> 赞同：1
> 
> 时间：2012-04-08T10:23:09.657
> 
> 标签：magento, controller

如果这是一个新手问题，我是 Magento 的新手。我有一个模块 Foo_Bar。在控制器文件夹中，我有另一个名为“目录”的文件夹。在里面，我有我的 CategoryController.php。

这是我的`CategoryController.php`：

```
class Foo_Bar_Catalog_CategoryController extends Mage_Core_Controller_Front_Action
{
    public function viewAction()
    {
        echo 'It worked!';
    }
} 
```

我的 config.xml 如下：

```
<config>
    <frontend>
        <routers>
            <foo_bar>
                <use>standard</use>
                <args>
                    <module>Foo_Bar</module>
                    <frontName>foo</frontName>
                </args>
            </foo_bar>
        </routers>
    </frontend>
</config> 
```

我的模块肯定已启用，并且显示在配置管理器中。

问题是当我去[http://magento.localhost.com/magento/foo/catalog/category/view](http://magento.localhost.com/magento/foo/catalog/category/view)时，我得到'抱歉页面找不到'。当我将控制器放在“控制器”文件夹中（不在目录下）并重命名控制器的类名时， http: [//magento.localhost.com/magento/foo/category/view](http://magento.localhost.com/magento/foo/category/view)有效。

该问题似乎与控制器文件夹中有一个文件夹有关。这种方法有什么问题？

非常感谢！

Krt_马耳他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:56:29.843

你试过这个网址吗：http: [//magento.localhost.com/magento/foo/catalog_category/view/](http://magento.localhost.com/magento/foo/catalog_category/view/)？

# ruby-on-rails-3 - ruby - heroku：找不到命令

> ID：10062074
> 
> 赞同：3
> 
> 时间：2012-04-08T10:23:35.273
> 
> 标签：ruby-on-rails-3, macos, heroku, rbenv

这个问题之前已经发布过，但答案没有奏效。我应该 proberley 提到我对 ruby​​ 完全陌生。我在做教程时遇到了错误，
步骤如下：

`[first_app (master)]$ gem install heroku`

我明白了

```
Successfully installed heroku-2.24.0 
```

但是当我尝试

`[first_app (master)]$ heroku keys:add`

我明白了

```
-bash: heroku: command not found 
```

然后我尝试了一堆卸载 gem 更新包重新安装它，但这并没有帮助

```
$ bundle exec heroku 
```

`/Users/vng/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb:147:in` ``block in replace_gem': heroku is not part of the bundle. Add it to Gemfile. (Gem::LoadError) from /Users/vng/.rbenv/versions/1.9.3-p125/bin/heroku:18:in`'`

```
echo $PATH 
```

`/Users/vng/.rbenv/shims:/Users/vng/.rbenv/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin`

我的宝石环境

> RubyGems 环境：
> - RUBYGEMS 版本：1.8.11
> - RUBY 版本：1.9.3（2012-02-16 补丁级别 125）[x86_64-darwin11.3.0]
> - 安装目录：/Users/vng/.rbenv/versions/1.9.3 -p125/lib/ruby/gems/1.9.1
> - RUBY 可执行文件：/Users/vng/.rbenv/versions/1.9.3-p125/bin/ruby
> - 可执行目录：/Users/vng/.rbenv/versions/1.9 .3-p125/bin
> - RUBYGEMS 平台：
> - ruby
> ​​ - x86_64-darwin-11
> - GEM 路径：
> - /Users/vng/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1
> - /用户/vng/.gem/ruby/1.9.1
> - GEM 配置：
> - :update_sources => true
> - :verbose => true
> - :benchmark => 假
> - :backtrace => 假
> - :bulk_threshold => 1000
> - 远程源：
> - [http://rubygems.org/](http://rubygems.org/)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T16:39:13.443

当您安装具有二进制文件（可执行文件）的 gem 时，您必须运行

```
rbenv rehash 
```

将可执行文件添加到您的路径。

# ios - 如何在 iOS 中实现加载屏幕或多线程？

> ID：10062078
> 
> 赞同：0
> 
> 时间：2012-04-08T10:24:32.517
> 
> 标签：ios, multithreading, loading

我有一个登录屏幕。用户输入凭据后，单击“登录”以登录。现在在登录的后台会加载一些东西，所以显示下一个视图需要大约 3 秒。

如何解决这 3 秒内屏幕不卡顿？

我的想法是通过加载屏幕（iPhone 应用程序的典型）来解决这个问题，或者将单击的按钮设置为“尝试登录...”，因此用户不仅在想“我的点击是否有效，还是我应该再次点击” ...我希望它可以理解...

怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:36:22.600

我建议使用 MBProgressHUD，如果你想像“加载”那样显示一个带有标签的指示器，并禁用视图上的用户操作，它也易于使用并且具有良好/简单的界面。

你可以在这个[链接上找到它](https://github.com/jdg/MBProgressHUD)

# objective-c - 一个支持多种语言的 objc 语法高亮库？

> ID：10062083
> 
> 赞同：7
> 
> 时间：2012-04-08T10:25:16.837
> 
> 标签：objective-c, cocoa, syntax-highlighting

我来自 ruby​​ 和 python 世界，我们有许多库可以语法高亮来自多种语言的任意代码。我正在 objc 生态系统中寻找类似的东西，但我似乎找不到这样的东西，有可用的吗？

Ruby 中的等效库是Python 的[CodeRay](http://coderay.rubychan.de/)和[Pygments](http://pygments.org/)，

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T13:21:27.980

栏杆，

我自己已经寻找了很长一段时间来寻找一个漂亮而强大的 Cocoa Syntax Highlighter，并且由于我目前正在自己​​构建一个面向代码的文本编辑器，这将是该项目的主要部分。

所以，我发现有很多 Objective-C/Cocoa 友好的语法高亮库/组件。对于初学者（即相对基本的东西），我建议您看一下：

*   [OkudaKit](http://parsekit.com/okudakit/)（使用 CSS 进行样式设置）
*   [Uli Kusterer](http://www.zathras.de/angelweb/sourcecode.htm)的 UKSyntaxColoredTextDocument（相当不错的尝试）

* * *

但是，如果您真的需要**功能强大、经过良好测试且仍然对 Cocoa 友好的**东西，我绝对建议您尝试[**使用 Scintilla 组件（用于 Cocoa）**](https://launchpad.net/scintilla-cocoa)。代码很棒，社区（在[Scintilla-Interest](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCUQFjAA&url=http://groups.google.com/group/scintilla-interest&ei=TpCBT4iPNIPdsgas9aS6AQ&usg=AFQjCNEAUtMk9KokAPyua5vcCKzPY259Yg&sig2=NVJELyhD5njArOQ_eUJe2Q) Group）很乐意帮助您解决可能遇到的任何问题。

**简单来说 ：**

我目前正在使用一个即将发布的大项目，它对我来说工作得很好。

* * *

## 闪烁

> **Scintilla**是一个提供文本编辑功能的免费库，重点是源代码编辑的高级功能。SciTE（跨平台）、Geany、Notepad++ (Windows) 和 Notepad2 (Windows) 是基于 Scintilla 的独立编辑器的示例。

**使用中的闪烁编辑组件*(SciTe)***

![闪烁编辑组件](../Images/a0a03ff02de8809f03c296e06c5e3950.png)

**特征**

> 除了**语法高亮**之外，Scintilla 还支持许多使代码编辑更容易的功能。高亮方法允许使用**不同的字体、颜色、样式和背景颜色**，并且不限于固定宽度的字体。该控件支持错误 **指示器**、页边距中的**行号**以及代码断点等**行标记。**可以添加其他功能，例如**代码折叠**和 **自动完成。**

* * *

*   **下载 Scintilla**（主项目中已经集成了 Cocoa 支持）：[http ://www.scintilla.org/SciTEDownload.html](http://www.scintilla.org/SciTEDownload.html)
*   **示例项目**（将 Scintilla 与 Cocoa 集成）： [http ://bazaar.launchpad.net/~mike-lischke/scintilla-cocoa/trunk/files/head:/cocoa/ScintillaTest/](http://bazaar.launchpad.net/~mike-lischke/scintilla-cocoa/trunk/files/head:/cocoa/ScintillaTest/)
*   如需**完整**的文档，请查看：[Scintilla 文档](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDAQFjAA&url=http://www.scintilla.org/ScintillaDoc.html&ei=n5CBT8XbIofZsgbfudXVBA&usg=AFQjCNFrOGa6WnUeYKmwQzJ6U3ZLHHGxEQ&sig2=XIBwiZ2xJN9IO6ktDqOcmg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T23:43:11.617

[草莓](https://github.com/mugginsoft/Fragaria "草莓")可能对未来的参考有用。

# asp.net - ASP.NET 引用来自 .aspx 文件的控件

> ID：10062084
> 
> 赞同：0
> 
> 时间：2012-04-08T10:25:47.113
> 
> 标签：asp.net

我有以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">

<body style="height: 1336px">
<input type="hidden" id="loadingtime"/>
.
.
.
.
</body>
</html> 
```

Code.cs 文件是：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Diagnostics;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        string s = "";
        HiddenField t = (HiddenField)Page.FindControl("loadingtime");
        s = t.Value;
        Response.Write("<script language='javascript'>alert('It took : " + s + "')</script>");
    }
} 
```

我收到错误任何想法？

编辑：当我检索加载时间的值时，上述问题已成功解决，该值为空字符串。任何人都可以解决这个问题吗？ ![在此处输入图像描述](../Images/5479d8462a7859f6eccf0f8a14309993.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:29:37.620

您的输入应该具有 runat="server" 使其能够被 ASP.NET 运行时解析，即

```
<input type="hidden" runat="server" id="loadingtime"/> 
```

然后，您可以像通常在后面的代码中使用的那样引用控件：

```
HiddenField t = (HiddenField)loadingtime; 
```

只要它没有包装在另一个服务器控件中，例如 asp:repeater，在这种情况下，您需要使用遍历控件层次结构的替代方法

# ruby-on-rails - 检测通过 App（即 Twitter）浏览到 rails 站点的 iOS 设备

> ID：10062088
> 
> 赞同：0
> 
> 时间：2012-04-08T10:26:03.820
> 
> 标签：ruby-on-rails, ios, mobile, user-agent

在通过 Safari 浏览器浏览时，我正在使用这段正常工作的代码来检测 iOS 设备：

```
def mobile_user_agent?
@mobile_user_agent ||= ( request.env["HTTP_USER_AGENT"] && request.env["HTTP_USER_AGENT"]   [/(Mobile\/.+Safari)/] )
end 
```

但它不会检测到用户通过设备上的应用程序浏览器访问该站点。主要是推特。

我相信这是 Twitter 用户的 UA，那么您如何适应这个（以及其他应用程序？）

```
"Mozilla/5.0 (iPhone; CPU iPhone OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9A405" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:10:00.073

我要做的是将正则表达式更改为类似

```
/(Mobile\/.+Safari)|(AppleWebKit\/.+Mobile)/ 
```

# ios - IOS中的日期时间/字符串格式

> ID：10062090
> 
> 赞同：4
> 
> 时间：2012-04-08T10:26:48.397
> 
> 标签：ios, datetime, nsstring

我有一个 NSString，它是这段代码中的日期和时间：“YYYY-MM-DD HH:mm:SS”，我想像德国风格一样使用它：“DD.MM.YYY HH:mm:DD”

怎么解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T12:24:07.823

将一个日期字符串转换为另一种格式的示例：

NSString *currentDateString = @"04-08-2012 08:16:00";

```
NSLog(@"currentDateString: %@", currentDateString);

NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];

[dateFormater setDateFormat:@"MM-DD-yyyy HH:mm:ss"];
NSDate *currentDate = [dateFormater dateFromString:currentDateString];
NSLog(@"currentDate: %@", currentDate);

[dateFormater setDateFormat:@"yyyy-MM-DD HH:mm:ss"];
NSString *convertedDateString = [dateFormater stringFromDate:currentDate];
NSLog(@"convertedDateString: %@", convertedDateString);

[dateFormater setDateFormat:@"DD.MM.yyy HH:mm:DD"];
NSString *germanDateString = [dateFormater stringFromDate:currentDate];
NSLog(@"germanDateString: %@", germanDateString); 
```

NSLog 输出：
currentDateString：04-08-2012 08:16:00
currentDate：2012-04-01 12:16:00 +0000 convertDateString
：2012-04-92 08:16:00
GermanDateString：92.04.2012 08:16： 92

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T11:14:06.900

```
NSString* input = @"2012-04-08 13:05:49";

NSString* year  = [input substringWithRange: NSMakeRange( 0, 4)];
NSString* month = [input substringWithRange: NSMakeRange( 5, 2)];
NSString* day   = [input substringWithRange: NSMakeRange( 8, 2)];
NSString* time  = [input substringWithRange: NSMakeRange(11, 8)];

NSString* output = [NSString stringWithFormat:@"%@.%@.%@ %@",day,month,year,time]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:08:02.037

使用 NSDateFormatter 将其转换为 NSDate 对象，然后使用格式化程序导出字符串。遵循有关 dateFromString 和 stringFromDate 的文档。

# vba - 使用 Excel 创建请假系统？

> ID：10062091
> 
> 赞同：0
> 
> 时间：2012-04-08T10:26:56.247
> 
> 标签：vba, excel, system, excel-2003

我对 Excel VBA 完全陌生。我正在使用 Microsoft 2003 excel。

我的上级要求我创建一个休假管理系统，以跟踪员工的休假天数，并从那里向她、她的秘书和员工发送一封关于批准或拒绝状态的电子邮件.

我确实尝试了一些 VBA 的代码。但我不知道邮件发送功能是如何工作的？我把附件发出去吗？或者当我在代码中输入一些值时，它会自动发送整个附件？我真的迷路了，谢谢！

```
Sub Mail_sheets()
Dim MyArr As Variant
Dim last As Long
Dim shname As Long
Dim a As Integer
Dim Arr() As String
Dim N As Integer
Dim strdate As String
For a = 1 To 253 Step 3
    If ThisWorkbook.Sheets("mail").Cells(1, a).Value = "" Then
        Exit Sub
    End
    Application.ScreenUpdating = False
    last = ThisWorkbook.Sheets("mail").Cells(Rows.Count, _
        a).End(xlUp).Row
    N = 0
    For shname = 1 To last
        N = N + 1
        ReDim Preserve Arr(1 To N)
        Arr(N) = ThisWorkbook.Sheets("mail").Cells(shname, a).Value
    Next shname
    ThisWorkbook.Sheets(Arr).Copy
    strdate = Format(Date, "dd-mm-yy") & " " & _
        Format(Time, "h-mm-ss")
    ActiveWorkbook.SaveAs "Part of " & ThisWorkbook.Name _
        & " " & strdate & ".xls"
    With ThisWorkbook.Sheets("mail")
        MyArr = .Range(.Cells(1, a + 1), .Cells(Rows.Count, _
            a + 1).End(xlUp))
    End With
    ActiveWorkbook.SendMail MyArr, ThisWorkbook.Sheets("mail").Cells(1, a + 2).Value
    ActiveWorkbook.ChangeFileAccess xlReadOnly
    Kill ActiveWorkbook.FullName
    ActiveWorkbook.Close False
    Application.ScreenUpdating = True
Next a
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:22:29.817

这是一个关于如何实现您想要的示例的示例。**请根据您的实际需要进行修改。**

> > > 我确实尝试了一些 VBA 的代码。但我不知道邮件发送功能是如何工作的？我把附件发出去吗？

您无需将整个工作簿作为附件发送。您可以发送一封简单的电子邮件，说明请假是被批准还是被拒绝。如果您需要支持拒绝或批准请假的原因，则可以将相关单元格粘贴到电子邮件中。请参阅此示例。

我假设您的工作表看起来像这样。

![在此处输入图像描述](../Images/41a79f83e4bbb0501a068245f69a9303.png)

现在假设员工`Siddharth`想请假。正如我们在快照中看到的，员工有`0`余额。因此，请假请求将被拒绝，并将向相关人员/部门发送邮件

运行代码时，它会要求您输入员工姓名

![在此处输入图像描述](../Images/a8c39b2a429e1b2d22f94b6ebb24c12a.png)

然后发送相关邮件。

![在此处输入图像描述](../Images/e8b9edf24e266b38b358eaa8831c8091.png)

**代码**

```
Option Explicit

'~~> To Field in Email
Const strTo As String = "aaa@aaa.com"
'~~> CC field in email. If you do not want to CC then change "bbb@bbb.com" to ""
Const strCC As String = "bbb@bbb.com"

'~~> This is what goes in the body
Const strBody1 As String = "Dear XYZ,"
Const strBody2 As String = "This is in reference to leave request for employee "

Const strBodyApp As String = "The employee has sufficient leave balance and can take the leave"
Const strBodyNotApp As String = "The employee doesn't have sufficient leave balance and hence cannot take the leave"
Const strByeBye  As String = "Thanks and Regards"
Const sender As String = "ABC"

Sub Sample()
    Dim ws As Worksheet
    Dim aCell As Range
    Dim Ret
    Dim Bal As Long
    Dim Rw As Long

    Ret = Application.InputBox("Please enter the name of the employee who wants to take a leave")

    If Ret = "" Then Exit Sub

    Set ws = Sheets("Sheet3")

    Set aCell = ws.Columns(2).Find(What:=Ret, LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        Bal = aCell.Offset(, 5).Value
        Rw = aCell.Row

        If Bal > 0 Then
            Approved Ret, True, Rw
        Else
            Approved Ret, False, Rw
        End If
    Else
        MsgBox "The employee " & Ret & " was not found"
    End If
End Sub

Sub Approved(EmpName, app As Boolean, lRow As Long)
    Dim msg As String
    Dim rng As Range
    Dim OutApp As Object
    Dim OutMail As Object

    If app = True Then
        msg = "<p class=MsoNormal>" & strBody1 & "<o:p></o:p></p>" & vbNewLine & _
               "<p class=MsoNormal><o:p>&nbsp;</o:p></p>" & vbNewLine & _
               "<p class=MsoNormal>" & strBody2 & EmpName & ". " & strBodyApp & _
               "<span style='mso-fareast-font-family:""Times New Roman""'><o:p></o:p></span></p>"
    Else
        msg = "<p class=MsoNormal>" & strBody1 & "<o:p></o:p></p>" & vbNewLine & _
               "<p class=MsoNormal><o:p>&nbsp;</o:p></p>" & vbNewLine & _
               "<p class=MsoNormal>" & strBody2 & EmpName & ". " & strBodyNotApp & _
               "<span style='mso-fareast-font-family:""Times New Roman""'><o:p></o:p></span></p>"
    End If

    Set rng = Sheets("Sheet3").Range("A1:F1" & ",A" & lRow & ":F" & lRow)

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    On Error Resume Next
    With OutMail
        .To = strTo
        .CC = strCC
        .BCC = ""
        .Subject = "Leave Status"

        .HTMLBody = msg & _
                    RangetoHTML(rng) & _
                    "<p class=MsoNormal><span style='mso-fareast-font-family:""Times New Roman""'>" & strByeBye & "<o:p></o:p></span></p>" & _
                    "<p class=MsoNormal><span style='mso-fareast-font-family:""Times New Roman""'><o:p>&nbsp;</o:p></span></p>" & _
                    "<p class=MsoNormal><span style='mso-fareast-font-family:""Times New Roman""'>" & sender & "<o:p></o:p></span></p>"

        .Display   '.Send 'To send the email
    End With
    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing
End Sub

'~~> Taken from http://www.rondebruin.nl/mail/folder3/mail4.htm
Function RangetoHTML(rng As Range)
' Changed by Ron de Bruin 28-Oct-2006
' Working in Office 2000-2010
    Dim fso As Object
    Dim ts As Object
    Dim TempFile As String
    Dim TempWB As Workbook

    TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

    'Copy the range and create a new workbook to past the data in
    rng.Copy
    Set TempWB = Workbooks.Add(1)
    With TempWB.Sheets(1)
        .Cells(1).PasteSpecial Paste:=8
        .Cells(1).PasteSpecial xlPasteValues, , False, False
        .Cells(1).PasteSpecial xlPasteFormats, , False, False
        .Cells(1).Select
        Application.CutCopyMode = False
        On Error Resume Next
        .DrawingObjects.Visible = True
        .DrawingObjects.Delete
        On Error GoTo 0
    End With

    'Publish the sheet to a htm file
    With TempWB.PublishObjects.Add( _
         SourceType:=xlSourceRange, _
         fileName:=TempFile, _
         Sheet:=TempWB.Sheets(1).Name, _
         Source:=TempWB.Sheets(1).UsedRange.Address, _
         HtmlType:=xlHtmlStatic)
        .Publish (True)
    End With

    'Read all data from the htm file into RangetoHTML
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
    RangetoHTML = ts.ReadAll
    ts.Close
    RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                          "align=left x:publishsource=")

    'Close TempWB
    TempWB.Close savechanges:=False

    'Delete the htm file we used in this function
    Kill TempFile

    Set ts = Nothing
    Set fso = Nothing
    Set TempWB = Nothing
End Function 
```

**免责声明**：由于上面的代码是一个基本的例子，我没有

1）包括错误处理（你应该）

2）使用基本的东西作为`Application.ScreenUpdating`

**示例文件**：此链接将在接下来的 7 天内有效。我已经上传了一个示例文件供您使用:)

[http://wikisend.com/download/562482/Sample.xls](http://wikisend.com/download/562482/Sample.xls)

高温高压

# python - 当用户只有 API 令牌时如何使用 urllib2？

> ID：10062092
> 
> 赞同：0
> 
> 时间：2012-04-08T10:26:57.800
> 
> 标签：python, urllib2

我将如何转换这个 curl 命令：

```
curl -v -u 82xxxxxxxxxxxx63e6:api_token -X GET https://www.toggl.com/api/v6/time_entries.json 
```

进入urllib2？

我找到了这个教程：[http ://www.voidspace.org.uk/python/articles/authentication.shtml](http://www.voidspace.org.uk/python/articles/authentication.shtml)

但他们使用密码和用户名。我只能使用 API 令牌。

谢谢你。

另见这个问题：

[Urllib2 引发 403 错误，而 curl 中的相同请求工作正常](https://stackoverflow.com/questions/10062433/urllib2-raises-403-error-while-the-same-request-in-curl-works-fine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:21:10.147

众所周知，urllib2 在身份验证方面会耗费大量时间。为了挽救一些小猫的生命，您应该使用[http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)

# oop - 如何为不同的对象设计一个界面以在构建器设计模式中使用它们？

> ID：10062093
> 
> 赞同：1
> 
> 时间：2012-04-08T10:27:07.673
> 
> 标签：oop, design-patterns

我至少有两个不同的类，如下所示：

```
//NOTE : these two classes have getter and setter also
class Artist {

String artistName;
String artistWebsite;
String artistDbpedia;
String artistImage;
List<String> astistAlbumsName;
List<String> astistAlbumsUrl;
}

class Venu {
String VenuName;
String VenuWebsite;
String VenuDbpdia;
String VenuImage;
String VenuDescription;
List<String> venuFans;
} 
```

我想要一个生产者类来获取一个 xml 文件作为输入并检测 xml 的类型（venu/artist），然后开始根据输入创建一个产品对象。

问题 ：

我想创建一个接口来聚合上述两个类之间的相似性，所以我的接口是：

```
interface Model {
public String getImage();
public String getName();
public String getWebsite();
public String getdbpedia();
} 
```

然后我可以在我的构建器类和以上两个类中实现这个接口，但是那些不同的方法呢？

比如getVenuFans / getArtistAlbumName / etc....？

**我怎样才能从我的制片人那里打电话给他们？**

这是我的建设者：

```
Class Builder implements Model {
public String getImage(){}
public String getName(){}
public String getWebsite(){}
public String getdbpedia(){}
} 
```

这可以是我的制片人：

```
Class Producer {
public Producer()
{
Builder b = null;
//assume Venu and Artist implements Model
b = (Builder) new Venu();
//I don't have access to getVenuFans()!

b = (Builder) new Artist();
//I don't have access to getArtistAlbumsName() / etc...

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:40:07.367

您无权访问这些方法，因为您将对象强制转换为 Builder，而 Builder 没有这些方法。

我明白你在做什么，但我认为它不会奏效。例如，getVenueFans（我假设您的意思是场地）仅适用于 Venue 类。尝试将其抽象为其他非 Venue 类将实现的接口是没有意义的。

我认为您所拥有的很好：您已将常用方法抽象为接口。要调用 Venue 和 Artist 上的方法，消费代码需要将对象转换为适当的类型，然后调用其上的方法。这并不像你想象的那么糟糕。消费代码*知道*它正在处理什么类型（否则，它为什么会尝试调用 getVenueFans？），所以这就是直接强制转换和调用方法的意义所在。

# svn - ubuntu 上的 svn：SSLhandshake 失败

> ID：10062095
> 
> 赞同：1
> 
> 时间：2012-04-08T10:27:19.740
> 
> 标签：svn, ubuntu

`svn: OPTIONS of 'https://comp20006.eng.unimelb.edu.au/svn/pochen': SSL handshake failed: Secure connection truncated (https://comp20006.eng.unimelb.edu.au)`

大家好，感谢您查看这个问题。

当我试图从我的大学服务器上查看我的东西时，我使用的是 ubuntu 11.10。那会是ubuntu或服务器或任何其他可能的问题吗？我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:32:00.843

一个美好的早晨，我发现我的 svn update 或 svn up 无法正常工作并且完全空白？:P

这是我为使我的 svn 站起来所做的... :)

```
 1\. sudo apt-get install libneon27

  2\. cd /usr/lib

  3\. sudo rm libneon-gnutls.so.27

  4\. and create a soft link 
       sudo ln -s /usr/lib/libneon.so.27 libneon-gnutls.so.27 
```

最后我开始摇滚了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:21:44.697

尝试检查您的连接

```
openssl s_client -connect mysvnserver.org:443 
```

这将为您提供有关握手的每个步骤的信息日志，并且 --debug 选项将显示更多详细信息。它会抱怨证书无效、时间不好或只有过时的算法。

当然，请确保您甚至可以 ping 通它，并且由于某种原因 https 没有被防火墙关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:35:49.850

我使用以下说明使其在 12.04 中工作：

[http://www.yeap.de/blog2.0/archives/260-Subversion-Certificate-Problems-with-Ubuntu-Precise-Pangolin.html](http://www.yeap.de/blog2.0/archives/260-Subversion-Certificate-Problems-with-Ubuntu-Precise-Pangolin.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T08:48:24.433

就我而言，这是[多个虚拟主机](https://www.digicert.com/ssl-support/apache-multiple-ssl-certificates-using-sni.htm)在同一台机器上使用 SSL 的问题。它导致 SVN 使用与预期不同的 SSL 证书。我所做的是将 subversion.conf 文件重命名为 00-subversion.conf （Apache 2.4 风格...）。这使得 Apache 首先使用 Subversion 证书，然后使用其他应用程序的其他证书（这没关系 - 与某些 SVN 客户端不同，现代浏览器对此没有问题）。

# java - Wicket 人类可读的 URL

> ID：10062096
> 
> 赞同：0
> 
> 时间：2012-04-08T10:27:39.087
> 
> 标签：java, html, url, wicket

在 ASP.NET MVC 之后开始学习 Wicket，对管理其 URL 感到有些困惑。这是代码：

**应用**：

```
package com.test.wicketapp1;

import org.apache.wicket.protocol.http.WebApplication;

public class WicketApplication extends WebApplication {
    public WicketApplication() {
        mountPage("/page1", HomePage.class);
        mountPage("/page2", Page2.class);       
    }

    @Override public Class<HomePage> getHomePage() {
        return HomePage.class;
    }
} 
```

**主页**：

```
package com.test.wicketapp1;

import java.io.IOException;

import org.apache.wicket.request.mapper.parameter.PageParameters;
import org.apache.wicket.markup.html.link.BookmarkablePageLink;
import org.apache.wicket.markup.html.WebPage;

public class HomePage extends WebPage {
    private static final long serialVersionUID = 1L;

    public HomePage(final PageParameters parameters) throws IOException {
        BookmarkablePageLink<Page2> bookmarkablePageLink = new BookmarkablePageLink<Page2>("gopage2link", Page2.class);
        add(bookmarkablePageLink);
    }
} 
```

**主页标记**：

```
<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
    <head>
        <title>Apache Wicket Quickstart</title> 
    </head>
    <body>
        <a href="#" wicket:id="gopage2link">go page 2</a>
    </body>
</html> 
```

我想要的很简单。我预计会有 2 个 url：HomePage.class 的“/page1”和 Page2.class 的“/page2”，然后我的 HomePage 有一个导航到 Page2 的链接，当 HomePage 呈现时，该链接应该有一个 URL “/第2页”。

当我运行应用程序并转到主页时，它呈现如下：

```
<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
    <head>
        <title>Apache Wicket Quickstart</title> 
    </head>
    <body>
        <a href="./wicket/bookmarkable/com.test.wicketapp1.Page2" wicket:id="gopage2link">go page 2</a>
    </body>
</html> 
```

我希望有类似的东西：

```
<a href="/page2" wicket:id="gopage2link">go page 2</a> 
```

反而。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:36:37.530

问题是 - 我应该使用 app 的`init`方法而不是 ctor 来定义映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T22:45:00.190

看看这个。它可能会有所帮助

[https://cwiki.apache.org/WICKET/request-mapping.html](https://cwiki.apache.org/WICKET/request-mapping.html)

# c++ - Doxygen：如何创建文档一章（用于 pdf）以及它在 html 中的外观？

> ID：10062097
> 
> 赞同：1
> 
> 时间：2012-04-08T10:27:49.623
> 
> 标签：c++, documentation, doxygen, documentation-generation

所以我有我的这个[小项目，](http://code.google.com/p/cloudobserver/)我做了它，以便我的一些服务器自动生成[PDF](http://195.19.243.13/documentation/cloud_observer_cpp_docs.pdf)格式和[HTML](http://195.19.243.13/documentation/html/)的 doxygen 文档。当我查看pdf时，我看到：

![在此处输入图像描述](../Images/2f965d73f44bd4da4e68560707ed1a9b.png)

当我查看 HTML 时，我看到：

![在此处输入图像描述](../Images/a44ce742e54688b14119ab0901f677db.png)

这意味着创建了我[在这里](http://code.google.com/p/cloudobserver/source/browse/trunk/CloudServer/src/main.cpp?r=2215)定义的主页`/*! @mainpage CF Cloud Observer Server ...`。

我想知道如何创建一个在主文档页面（`CF Cloud Observer Server`章节）之后开始并且不会成为其中一部分的章节（比如之前调用`CF CO Tutorials`的教程）？`CF Cloud Observer Server chapter``Module Documentation`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:16:22.350

您可以使用该`\page`命令创建任意数量的附加页面。例如：

```
/**
 * \page tutorials CF CO Tutorials
 * A page containing Tutorial information.
 */ 
```

*如果*您确实想为某个部分创建子页面，您也可以这样做。在这种情况下，您可以使用以下命令指定父页面中的子页面`\subpage`，例如：

```
/**
 * \page tutorials CF CO Tutorials
 * A page containing Tutorial information.
 *
 * \subpage tutorial1
 */

/**
 * \page tutorial1 Tutorial 1
 * A subpage covering Tutorial 1
 */ 
```

在这种情况下，`Tutorial 1`现在将显示为 的子页面`CF CO Tutorials`。

[您可以在此处](http://www.doxygen.nl/manual/commands.html)找到有关`\page`,`\subpage`命令以及相关`\section`和`\subsection`命令的更多信息。

# android - Android：如何根据 XML 中的屏幕密度访问不同的布局

> ID：10062100
> 
> 赞同：2
> 
> 时间：2012-04-08T10:28:20.810
> 
> 标签：android, android-layout

我想知道如何根据屏幕的密度来读取不同的 XML 布局文件。

现在，当我输入一个布局文件并将其设置为具有几个按钮并将它们设置为特定位置时，当我在模拟器中更改为另一个屏幕密度时，位置会发生变化。这就是我所理解的应该发生的事情-但是如何让程序根据密度使用不同的布局？

我一直在阅读android dev。有关如何为不同屏幕开发的页面，但我没有得到那里的示例。

我一直在尺寸上使用 dp/dip，所以不需要建议 =)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:33:08.230

您可以通过为每个标准屏幕尺寸创建布局来做到这一点，

你可以在[这里](http://developer.android.com/guide/practices/screens_support.html#range)找到如何做。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

这意味着您应该在 res 文件夹中创建名为 ("layout", "layout-small","layout-large","layout-xlarge","layout-xlarge-land") 的子目录。

而不是为每个具有相同名称的主xml。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T10:35:18.043

通过将布局 XML 文件放在不同的文件夹中，您可以让 Android 根据屏幕密度加载正确的文件。例如，如果您的布局被称为“main.xml”：

*   将文件放在 /res/layout-ldpi/main.xml 将意味着它仅用于低密度（或更高）
*   将文件放在 /res/layout-mdpi/main.xml 将意味着它仅用于中等密度（或以上）
*   将文件放在 /res/layout-hdpi/main.xml 将意味着它仅用于高密度（或更高）
*   将文件放在 /res/layout-xhdpi/main.xml 将意味着它仅用于超高密度

你可以对所有资源做同样的事情——drawables、strings、dimension等（例如drawable-mdpi或values-en [仅用于英语语言环境的值]）。[您可以在http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)找到该系统支持的不同设备设置的完整列表（表 2：配置限定符名称）

# mongodb - 猫鼬通过 id 和电子邮件查找

> ID：10062102
> 
> 赞同：2
> 
> 时间：2012-04-08T10:28:41.503
> 
> 标签：mongodb, mongoose

所以我需要通过 id 或电子邮件进行查找。输入可以是作为十六进制字符串的 objectId 或有效的电子邮件。

现在一个简单的

```
User.find({'$or': [{email: req.body.user}, {_id: req.body.user}]}, function(err, user){}) 
```

通过电子邮件搜索时抛出错误，因为电子邮件无法返回有效的 objectId。

我该如何克服呢？我知道一种可能的方法是首先检测输入是否是电子邮件，然后像这样查询它，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:30:44.130

实际上，这是最好的方法。在您的应用程序中首先检测您有什么样的输入。如果是`ObjectId`- 查询`_id`。如果是电子邮件 - 通过 查询`email`。

# php - 用php更改mysql触发器中的值？

> ID：10062103
> 
> 赞同：1
> 
> 时间：2012-04-08T10:28:53.820
> 
> 标签：php, triggers, mysql

我已经`financialTrack`在 mysql 中创建了表，以记录表中插入的行`financial`，然后创建此触发器来执行此操作：

```
CREATE TRIGGER INS_after_financ 
AFTER INSERT ON `financial` FOR EACH ROW
BEGIN
INSERT INTO `financialTrack` (user, changedValue) VALUES (NEW.user, NEW.Value);
END; 
```

这些是我的表格结构：

```
TABLE NAME:  financial
+--------------+--------------+-------+-------+
| Column       | Type         | Null  | AI    |
+--------------+--------------+-------+-------+
| id           | int(10)      | FALSE | TRUE  |
| user         | VARCHAR(40)  | FALSE |       |
| Value        | BIGINT(12)   | FALSE |       |
+--------------+--------------+-------+-------+

TABLE NAME:  financialTrack
+--------------+--------------+-------+-----------------+
| Column       | Type         | Null  |   Def.Value     |
+--------------+--------------+-------+-----------------+
| user         | VARCHAR(40)  | FALSE |                 |
| changedValue | BIGINT(12)   | FALSE |                 |
| ts           | timestamp    | FALSE |CURRENT_TIMESTAMP|
+--------------+--------------+-------+-----------------+ 
```

你有什么建议用脚本填写表格中的`user`字段并从表格中删除用户列吗？`financialTrack``PHP``financial`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:51:02.337

有几种方法可以完成这项任务，但本讲座肯定会帮助您学习使用 PHP 处理数据库查询的基础知识：http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)。

PDO 扩展目前非常流行，并且比其他原生`mysql`和`mysqli`扩展更受欢迎。`PDO`通过在 stackoverflow 上搜索，您将找到一些其他有用的信息。

# zeromq - 使用 ZMQ 从多个客户端拉取请求

> ID：10062104
> 
> 赞同：3
> 
> 时间：2012-04-08T10:29:06.580
> 
> 标签：zeromq, pyzmq

我有几个工人在等着做一些工作。我看到在 PULL/PUSH 模式中，我需要为工作人员提供客户端的 IP 地址（使用 tcp 协议），以便它可以监听来自那里的请求。但是，在我的情况下，我也希望有很多客户端，它们来自不同的 IP 请求......所以基本上我没有一个静态 IP 可以将工作人员绑定到 PULL 。我使用了错误的模式还是有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:25:01.357

您应该考虑使用路由器经销商模式。您的路由器在两端绑定，并且具有静态 IP。它从连接到它的多个客户端中提取并推送到另一端的工作人员。您可以使用 ROUTER/DEALER 套接字类型来实现这一点，或者只是使用使用 PUSH/PULL 套接字的额外网桥将客户端连接到工作人员。

# algorithm - 找出图中的最大边数

> ID：10062109
> 
> 赞同：8
> 
> 时间：2012-04-08T10:29:24.763
> 
> 标签：algorithm, graph, edge-detection

> 无向图有 'n' 个顶点和 0 条边。我们可以绘制的最大边数是多少，以使图形保持断开连接。

我已经做了一个解决方案，我们可以排除一个顶点，并且可以找到无向图的n-1个顶点之间的最大边数，以便该图仍然保持断开状态。

对于 n 个顶点，它是 n(n-1)/2，对于 n-1 个顶点，它是 (n-1)(n-2)/2。能有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T11:18:11.873

您可以使用分析解决此问题。接受你的想法并概括它。您将 n 个顶点分成两组，大小分别为`x`和`n-x`。现在边数是 的函数`x`，表示为

```
 f(x)= x(x-1)/2 + (n-x)(n-x-1)/2
  f(x) = 1/2(2x^2 - 2nx +n^2 - n) 
```

最大化此功能的值是您想要的分区大小。如果您进行计算，您会发现它从 减少`x=0`到`x=n/2`，然后增加到`x=n`。由于 x = 0 或 x = n 表示已收集图表，因此您取下一个最大值，即`x=1`。所以你的直觉是最佳的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T10:35:58.387

你的解决方案应该是最好的解决方案。

因为任何添加的新边都必须在一端有第 n 个顶点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T10:56:32.030

如果图可以有多条边，n>=3 的答案是无穷大。
如果它还可以包含自环，则答案是 n>=2 的无穷大，

如果这些都不成立，那么您的解决方案是正确的。

# design-patterns - 装饰图案；在两个抽象类下装饰具体组件

> ID：10062111
> 
> 赞同：2
> 
> 时间：2012-04-08T10:29:54.567
> 
> 标签：design-patterns

编辑：我可以使用 Actionscript 3.0 和/或 Java

我对装饰器类有点问题。我希望能够装饰抽象类的子类的子类。

澄清; 我有`abstract weapon class`,`abstract sword class`扩展。然后，最后 a`concrete long sword class`扩展它。我希望能够装饰`long sword class`.

```
 Weapon <-------------Enchant "Decorator
                                     /\                  /   \
                                    /  \        "+3 damage"|"Paralyze"
                                   /    \                  V
"Abstract Components":       Sword    |    Axe    "Concrete Decorators" 
                              / \         /    \
                             /   \       /      \
"Concrete Components": LongSword|Short RedAxe| WarAxe "Apply Decorators Here" 
```

目前我读过的所有关于设计模式的书都涉及“一层”装饰，例如：

```
 Weapon <-------------Enchant "Decorator
                                         /\                  /   \
                                        /  \        "+3 damage"|"Paralyze"
                                       /    \                  V
  "Concrete components already":    Sword | Axe      "Concrete Decorators" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:51:29.550

```
public abstract class weapon
{
list WeaponDecorator decorators;
hit()
{for each decorator in decorators {
 decorator.hit();}}
}

public abstract class axe : weapon
{hit()}

public class broadaxe : axe
{hit(){
parent.hit();    
implementation;}}

public class WeaponDecorator : weapon
{hit(){
 implement freeze()
}} 
```

如果我理解您的图表正确，这应该是伪代码的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:05:31.403

在 Java、C++ 和（我认为）C# 等静态语言中，您不能为类创建装饰器并使用它来装饰该类的子类。好吧，你可以，但效果是隐藏子类的功能。

我想您想要的是能够混合搭配装饰器，其中每个装饰器都可以用于对象的类或其祖先之一。

在 perl 和 ruby​​ 等动态语言中，您可以定义或重新定义单个对象的*单个方法*，理论上您可以使用它来对子类进行修饰。

假设您受到静态语言的限制，我的建议是：对于您想要的每种附魔，创建一个修饰符基类或接口，然后为每个附魔创建具体类。然后在每个对象中，列出每个类/接口的修饰符，并根据需要遍历它们，例如计算伤害。

最接近的类似模式是策略或模板方法。

我已将您的问题翻译为“如何实现暗黑破坏神游戏中使用的物品修改系统？”。有很多问题需要考虑——保存和恢复状态，以及修饰符之间的交互，只是我现在想到的两个。

# javascript - 在发票中自动计算价格

> ID：10062112
> 
> 赞同：0
> 
> 时间：2012-04-08T10:30:10.567
> 
> 标签：javascript

我正在制作发票系统，我想自动计算价格文本框。我在发票中有一张随机行表。我如何通过价格文本框上的 js 函数来做到这一点。

```
<SCRIPT language="javascript">
var rowCount =0;
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.name = "chk[]";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        element2.name = "item[]";
        element2.required = "required";
        cell3.appendChild(element2);

        var cell4 = row.insertCell(3);
        var element3 = document.createElement("input");
        element3.type = "text";
        element3.name = "qty[]";
        cell4.appendChild(element3);

        var cell5 = row.insertCell(4);
        var element4 = document.createElement("input");
        element4.type = "text";
        element4.name = "cost[]";
        cell5.appendChild(element4);

        var cell5 = row.insertCell(4);
        var element4 = document.createElement("input");
        element4.type = "text";
        element4.name = "price[]";
        cell5.appendChild(element4);

    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

</SCRIPT> 
```

这里是身体

```
 <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

            <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />
        <form action="" method="post" enctype="multipart/form-data">
        invoice:<INPUT type="text" name="invoice id"/>

            <TABLE id="dataTable" width="350px" border="1" style="border-collapse:collapse;">
        <TR>
        <TH>Select</TH>
        <TH>Sr. No.</TH>
        <TH>Item</TH>
        <TH>Cost</TH>
        <TH>Qty</TH>
        <TH formula="cost*qty"summary="sum">Price</TH>
        </TR>
                <TR>
                    <TD><INPUT type="checkbox" name="chk[]"/></TD>
                    <TD> 1 </TD>
                    <TD> <INPUT type="text" name="item[] "/> </TD>
                    <TD> <INPUT type="text" name="qty[]"/> </TD>
                    <TD> <INPUT type="text" name="cost[]" /> </TD>
                    <TD> <INPUT type="text" name="price[]" /> </TD>
                </TR>

            </TABLE>
        <input type="submit" />
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:42:54.893

[演示](http://jsfiddle.net/mplungjan/jDfFU/)

根据标题单元格，您的成本和数量在错误的单元格中！！！

```
 <TD> <INPUT type="text" id="qty1" name="qty[]"/> </TD>
 <TD> <INPUT type="text" id="cost1" name="cost[]" /> </TD>
 <TD> <INPUT type="text" id="price1" name="price[]" /> </TD> 
```

新代码：

```
function calc(idx) {

  var price = parseFloat(document.getElementById("cost"+idx).value)*
              parseFloat(document.getElementById("qty"+idx).value);
  //  alert(idx+":"+price);  
  document.getElementById("price"+idx).value= isNaN(price)?"0.00":price.toFixed(2)
}

window.onload=function() {
  document.getElementsByName("qty[]")[0].onkeyup=function() {calc(1)};
  document.getElementsByName("cost[]")[0].onkeyup=function() {calc(1)};
}

var rowCount =0;
function addRow(tableID) {
        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.name = "chk[]";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount;

        var cell3 = row.insertCell(2);
        var element3 = document.createElement("input");
        element3.type = "text";
        element3.name = "item[]";
        element3.required = "required";
        cell3.appendChild(element3);

        var cell4 = row.insertCell(3);
        var element4 = document.createElement("input");
        element4.type = "text";
        element4.name = "qty[]";
        element4.id = "qty"+rowCount;
        element4.onkeyup=function() {calc(rowCount);}
        cell4.appendChild(element4);

        var cell5 = row.insertCell(4);
        var element5 = document.createElement("input");
        element5.type = "text";
        element5.name = "cost[]";
        element5.id = "cost"+rowCount;
        element5.onkeyup=function() {calc(rowCount);}
        cell5.appendChild(element5);

        var cell6 = row.insertCell(5);
        var element6 = document.createElement("input");
        element6.type = "text";
        element6.name = "price[]";
        element6.id = "price"+rowCount
        cell6.appendChild(element6);

    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    } 
```

这是一个总数 - 如果您将 calc 剪切并粘贴到我执行 calc(i) 的位置，您实际上可以用这个替换 calc

```
function totalIt() {
  var qtys = document.getElementsByName("qty[]");
  var total=0;
  for (var i=1;i<=qtys.length;i++) {
    calc(i);  
    var price = parseFloat(document.getElementById("price"+i).value);
    total += isNaN(price)?0:price;
  }
  document.getElementById("total").value=isNaN(total)?"0.00":total.toFixed(2);                        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:51:07.060

```
<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

        <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />
    <form action="" method="post" enctype="multipart/form-data">
    invoice:<INPUT type="text" name="invoice id"/>

        <TABLE id="dataTable" width="350px" border="1" style="border-collapse:collapse;">
    <TR>
    <TH>Select</TH>
    <TH>Sr. No.</TH>
    <TH>Item</TH>
    <TH>Cost</TH>
    <TH>Qty</TH>
    <TH formula="cost*qty"summary="sum">Price</TH>
    </TR>

        </TABLE>
    <input type="submit" /> 
```

和脚本：

```
 <SCRIPT language="javascript">
 var rowCount =0;
function calculatePrice(qtyElement, costElement, priceElement) {
        priceElement.value = qtyElement.value * costElement.value;
}

function addRow(tableID) {

    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.type = "checkbox";
    element1.name = "chk[]";
    cell1.appendChild(element1);

    var cell2 = row.insertCell(1);
    cell2.innerHTML = rowCount;

    var cell3 = row.insertCell(2);
    var element2 = document.createElement("input");
    element2.type = "text";
    element2.name = "item[]";
    element2.required = "required";
    cell3.appendChild(element2);

    var cell4 = row.insertCell(3);
    var element3 = document.createElement("input");
    element3.type = "text";
    element3.name = "qty[]";
    element3.onchange = function(){
         calculatePrice(this, this.parentElement.parentElement.childNodes[4].childNodes[0], this.parentElement.parentElement.childNodes[5].childNodes[0]);
    };
    cell4.appendChild(element3);

    var cell5 = row.insertCell(4);
    var element4 = document.createElement("input");
    element4.type = "text";
    element4.name = "cost[]";
    element4.onchange = function(){
            calculatePrice(this.parentElement.parentElement.childNodes[3].childNodes[0], this, this.parentElement.parentElement.childNodes[5].childNodes[0]);
    };
    cell5.appendChild(element4);

    var cell6 = row.insertCell(5);
    var element5 = document.createElement("input");
    element5.type = "text";
    element5.name = "price[]";
    cell6.appendChild(element5);

}

function deleteRow(tableID) {
    try {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;

    for(var i=0; i<rowCount; i++) {
        var row = table.rows[i];
        var chkbox = row.cells[0].childNodes[0];
        if(null != chkbox && true == chkbox.checked) {
            table.deleteRow(i);
            rowCount--;
            i--;
        }

    }
    }catch(e) {
        alert(e);
    }
}
addRow('dataTable');
</SCRIPT> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T10:56:37.563

只需将计算绑定到例如一个键事件。您也应该通过 JS 创建第一个发票行。

```
function addRow(tableID) {

    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.type = "checkbox";
    element1.name = "chk[]";
    cell1.appendChild(element1);

    var cell2 = row.insertCell(1);
    cell2.innerHTML = rowCount;

    var cell3 = row.insertCell(2);
    var element2 = document.createElement("input");
    element2.type = "text";
    element2.name = "item[]";
    element2.required = "required";
    cell3.appendChild(element2);

    var cell4 = row.insertCell(3);
    var element3 = document.createElement("input");
    element3.type = "text";
    element3.name = "qty[]";
    cell4.appendChild(element3);

    var cell5 = row.insertCell(4);
    var element4 = document.createElement("input");
    element4.type = "text";
    element4.name = "cost[]";
    cell5.appendChild(element4);

    var cell5 = row.insertCell(5);
    var element5 = document.createElement("input");
    element5.type = "text";
    element5.name = "price[]";
    cell5.appendChild(element5);

    var calcPrice = function() {
        try {
            element5.value = element3.value * element4.value;
        } catch(e) {

        }
    }

    element3.onkeyup = calcPrice;
    element4.onkeyup = calcPrice;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T10:43:03.503

您可以在某些输入字段中触发 onchange 事件时调用的函数内部实现计算（一行的最后一行或下一行的第一行计算前一行的价格）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-26T11:54:30.903

```
<script type="text/javascript">

    $(function(){

        //add new row 
        $('.add').click(function(){

                    var tr = '<tr>'+
                           '<td><input type="text" name="product_name[]" class="form-control product_name"></td>'+
                           '<td><input type="text" name="quantity[]" class="form-control quantity"></td>'+
                           '<td><input type="text" name="price[]" class="form-control price"></td>'+
                           '<td><input type="text" name="amount[]" class="form-control amount"></td>'+
                           '<td><input type="button"  class="btn btn-danger remove" value="Remove"></td>'+
                      '</tr>';
          $('.details').append(tr);
        });
        // end 

        // total amount 
        $('.details').delegate('.quantity,.price','keyup',function(){
            var tr = $(this).parent().parent();
            var price = tr.find('.price').val();
            var qty   = tr.find('.quantity').val();
            var amount = price * qty;
            tr.find('.amount').val(amount);
            total();
        });

        // end 

        // delete row 
        $('.details').delegate('.remove','click',function(){
                var con = confirm("Do you want to remove it ?");
                if(con)
                {
                    $(this).parent().parent().remove();
                    total();
                }

        });
        // end 

        //get pay
        $('.pay').change(function(){
            var subtotal = $('.subtotal').val()-0;
            var get      = $(this).val()-0;
            $('.return').val(get - subtotal);
        });
        // end 
    });
</script>

          <script type="text/javascript">

             // for updating the tax while writing the price .

               function changeTax(){

                  var price = document.getElementById("price").value;
                  var q = document.getElementById("quantity").value;

                  var np = Number(price);

                 var tax =  (0.15 * np)*q;

                  <!-- how to diferenciate  concatinate anad plus sign-->
                    document.getElementById("amount").value = q * np;

                  var amount = document.getElementById("amount").value;
                  document.getElementById("tax").value = tax;
                  document.getElementById("subtotal").value = Number(tax) + Number(amount);
               }
          </script>
                     <script>
    $(function() {

     });
     </script> 
```

# winapi - SHGetFolderPath

> ID：10062113
> 
> 赞同：3
> 
> 时间：2012-04-08T10:30:17.157
> 
> 标签：winapi, visual-c++

此代码适用于 Windows 7，但不适用于 Windows XP（仅输出启动文件夹路径的一部分）

```
#include <iostream>
#include <shlobj.h>

using namespace std;
int main()
{
    wchar_t startupFolder[1024];
    HRESULT hr = SHGetFolderPath(0, CSIDL_STARTUP, 0, 0, startupFolder);
    if (SUCCEEDED(hr))
        wcout << L"Startup folder = " << startupFolder << endl;
    else
        cout << "Error when getting startup folder\n";
    getchar();
    return 0;
} 
```

输出为：启动文件夹 = C:\Documents and Settings\Admin\ <- 光标在这里。不提供换行符。我也有俄罗斯window xp。我认为这是 unicode 问题。

当我使用 wprintf 我得到： C:\Documents and Settings\Admin\???????? ......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T11:27:02.967

问题是您的 XP 控制台使用的字体不包含您尝试输出的俄语字符的字形。Windows 7 附带并默认在其控制台中使用的字体确实具有更广泛的 Unicode 代码点覆盖范围。您需要将控制台配置为使用包含所需字形的字体。

# java - 遍历java中哪种对象类型最快

> ID：10062114
> 
> 赞同：-1
> 
> 时间：2012-04-08T10:30:20.303
> 
> 标签：java, collections

我想知道哪些 Java 集合类型的遍历速度最快。我最感兴趣的收藏是...

1.  大批
2.  链表
3.  队列
4.  优先链表
5.  哈希映射

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:25:55.640

实际上在 Collection 接口的具体类中，遍历**数组**会很快。这是因为您知道它使用元素的索引进行遍历。由于它遵循索引模式，因此遍历索引使我们的遍历速度更快。为什么不是其他人？让我一一解释..

1\. **LinkedList** : LinkedList 遵循插入顺序。如果您遍历数据并搜索元素，则对于每个元素，它将从头开始搜索。所以遍历变得很慢。

2.**队列**：LinkedList和PriorityQueue是Qu​​eue的两个具体类。优先级队列的元素根据其自然顺序排序，或者由队列构建时提供的 Comparator 排序，具体取决于使用的构造函数。不保证以任何特定顺序遍历优先级队列的元素。如果需要有序遍历，考虑使用 Arrays.sort(pq.toArray())。因此，如果您在没有明确排序的情况下进行遍历，则它对于遍历提供的遍历变得无用。

3\. **HashMap**：如果使用 Map 而不是 Collection ，这里不能保证遍历，因为它适用于关键元素的 hashcode。所以这里再次遍历变得无用。您可以通过提供元素的键值来直接搜索元素。

4\. **PriorityLinkedList**：Java API 中不存在此类。

# php - 制定 url php / html 的问题

> ID：10062124
> 
> 赞同：0
> 
> 时间：2012-04-08T10:32:01.790
> 
> 标签：php, html, url

我正在尝试制定指向我目录中另一个页面的链接。它可以在 php 代码或 html 中完成。但是由于某些奇怪的原因，并且仅在此页面上，每次我生成新页面的 url 时，生成的 url 都是我所在的页面 + 我想去的 url。

例如，如果我在 mysite.php 上并制定了一个指向 purchase.php 的链接，那么生成的 url 是 mysite.php/purchase.php

有谁知道这可能是为什么？

```
<h1>Success</h1>
<a href="page.php">Link text</a>
<?php
   ...
   ...
?> 
```

这基本上就是我所拥有的所有回声，你好！. 会发生什么，如果我目前在 home.php 上面的 url 变成`path/home.php/page.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:37:48.510

`/purchase.php`您应该为而不是创建 url `purchase.php`。[您可以在此处](http://www.boogiejack.com/server_paths.html)阅读更多关于有什么区别的信息。

# iphone - 创建用于自定义视图的基类并让其他（UIViews）从该类继承

> ID：10062134
> 
> 赞同：0
> 
> 时间：2012-04-08T10:33:47.047
> 
> 标签：iphone, objective-c, uiview, uiviewcontroller

我读了这篇文章，但我无法让它工作：[更改背景颜色...](https://stackoverflow.com/questions/10017616/change-the-background-color-of-all-the-viewcontrollers-iphone)

我喜欢为`UIView`我的所有视图自定义创建一个基类，例如背景图案、按钮颜色、标签栏颜色等。

这是我尝试过的：

*   创建了一个新的`Single View Application`
*   `UIViewController`自定义方法中的视图`-viewDidLoad`
*   创建了一个新的子类`UIViewController`
*   在 IB 我创建了一个新`UIViewController`对象
*   在 IB (Identity Insp.) 中，我将`UIViewController`类设置为我之前创建的子类

这不是正确的方法吗？我在想新创建的`UIViewController`类将继承我的第一个类的所有自定义，`UIViewController`因为我对那个类进行了子类化。

第二个问题是如何为某些对象使用基类而不是整个视图？例如，如何让`UIButtons`我的应用程序中的所有内容都继承我在一个类中定义的所有行为？

希望你能帮忙。

祝大家复活节快乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:27:31.407

我相信您想自定义您的视图，但是我不清楚具体的方式和时间..所以我只会给出通用方法，它会给您如何做到这一点的总体思路..

首先创建一个`UIView`say的子类，`BaseView`其中包含要自定义的属性，现在在viewController的viewDidLoad方法中创建一个对象`BaseView`并根据需要自定义这个对象。一旦完成，只需将viewController的self.view属性设置为这个新的创建`BaseView`对象然后释放`BaseView`对象..希望这对您有所帮助...

编辑：根据评论..首先创建一个`BaseViewController`子类`UIViewController`......在`viewDidLoad`这个类的自定义你的视图使用`self.view`

其次，现在您要在您的视图控制器中使用的视图控制器`tabController`应该将其子类`BaseViewController`化……只是不要忘记在此视图控制器中`[super viewDidLoad];`调用了`viewDidLoad`。

这是我能提供的最好的.. :) 让我知道它是否适合你。

# javascript - Node.js + CoffeeScript - 模块/类混淆

> ID：10062135
> 
> 赞同：0
> 
> 时间：2012-04-08T10:34:01.663
> 
> 标签：javascript, node.js, coffeescript

我了解如何在标准 Javascript 中将 Protoype 与 Node.js 和模块一起使用，但在 CoffeeScript 中将它们等同起来时遇到了困难。

假设我有一个名为`mymodule.coffee`：

```
Module = {}

class MyModule

  constructor: (parameter) ->

    Module = this
    Module.parameter = parameter

  standardFunction = (parameter) ->

    return parameter

  callbackFunction = (parameter, callback) ->

    callback parameter

exports.MyModule = MyModule 
```

我`test.coffee`在同一目录中调用了另一个文件，我通过 运行该文件，但在尝试访问该类时`coffee test.coffee`出错：`TypeError: Object #<MyModule> has no method 'standardFunction'``MyModule`

```
myModule = require 'mymodule'
myModule = new myModule.MyModule 'parameter'

console.log myModule.standardFunction 'parameter'

myModule.callbackFunction 'parameter', (response) ->

  console.log 'Response: ' + response 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:07:54.133

您的语法有误：

```
standardFunction = (parameter) ->
    return parameter 
```

应该

```
standardFunction : (parameter) ->
    return parameter 
```

（`:`而不是`=`）第一个转换为

```
standardFunction = function(parameter) {
    return parameter;
} 
```

它没有给你任何东西（与阶级无关），而第二个

```
MyModule.prototype.standardFunction = function(parameter) {
    return parameter;
} 
```

这就是你想要的。

顺便说一句，您可以像这样在构造函数中使用 CoffeeScript：

```
constructor: (parameter) ->
    @parameter = parameter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:09:43.440

只是为了更简洁一点：

构造函数：(@param)->

上面的代码将转换为 this.param = param

# iphone - 在 tabbaritem 中使用普通或视网膜图像

> ID：10062141
> 
> 赞同：0
> 
> 时间：2012-04-08T10:35:02.287
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, uitabbaritem

由于我无法提供我的故事板的屏幕截图，我将尝试解释：

我有一个标签栏控制器，它有两个视图控制器。每个视图控制器都是一个导航控制器。我将情节提要中第一个 tabbaritem 的图像设置为情节提要本身中的非视网膜图像。当我在模拟器中运行时，它不会获取图像的 @2x 版本。我知道还有其他类似的问题，但我已经尝试了所有答案，但它们不起作用。如何告诉 iOS 根据代码中的设备获取非视网膜或视网膜图像。我不想明确地告诉它。它应该自动完成，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:42:16.323

检查您的文件名。文件名必须与添加的完全相同`@2x`，但在文件类型扩展名之前。在 Storyboard 中，您只需选择简单的一个。

```
image.png  
image@2x.png 
```

还要检查视网膜图像是否确实与目标相关联。如果有疑问，请将其删除并重新添加。

# ruby-on-rails - Ruby on rails 集成和功能测试之间的区别

> ID：10062149
> 
> 赞同：9
> 
> 时间：2012-04-08T10:37:38.837
> 
> 标签：ruby-on-rails

我想知道，如果我使用集成测试，是否需要功能测试？那么验收测试呢？我很难理解，如果我可以坚持集成测试然后忘记功能测试？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T08:24:37.810

来自官方 Rails 指南：

> 在 Rails 中，测试**控制器的各种动作**是编写功能测试的一种形式。

[http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers](http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers)

> 集成测试用于测试**我们应用程序的各个部分**如何交互。

[http://guides.rubyonrails.org/testing.html#integration-testing](http://guides.rubyonrails.org/testing.html#integration-testing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T13:06:09.910

快速回答：集成测试本质上是功能测试的一个子集，而验收测试是功能测试的一种形式。

我建议阅读[有关该主题的](http://en.wikipedia.org/wiki/Acceptance_testing)[维基百科](http://en.wikipedia.org/wiki/Functional_testing) [文章](http://en.wikipedia.org/wiki/Integration_testing) 。请记住，可以对各种测试的定义持保留态度。

# .net - RaisePropertyChanged 不起作用

> ID：10062153
> 
> 赞同：2
> 
> 时间：2012-04-08T10:38:11.497
> 
> 标签：.net, wpf, mvvm

我有一个按钮，其内容与 ViewModel 的名为 Test 的属性绑定。

```
<Button Content="{Binding Test, Mode=TwoWay}"  
            Name="button1"Click="button1_Click" /> 
```

单击按钮时，我正在更改其内容

```
private void button1_Click(object sender, System.Windows.RoutedEventArgs e)
{
    button1.Content = "Yellow";
} 
```

但是在属性设置器中，我想覆盖正在设置的内容并设置我自己的内容。以下是相同的代码：

```
string _test;
public string Test
{
    get
    {
        return _test;
    }
    set
    {
        _test = "Something" + System.DateTime.Now.ToString();
        RaisePropertyChanged(() => Test);
    }
} 
```

现在的问题是按钮的内容被设置为“黄色”而不是它应该是“某事......”

如果我同时将此属性与文本框绑定，则该值将以正确的方式显示。

**注意：**这只是一个例子，我的问题的重点是raisepropertychanged。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:51:59.057

这是一个非常奇怪的二传手，你真的不应该做这样的事情。如果我设置`Test = "Yellow"`，我希望它是`Yellow`，而不是完全不同的东西。您应该将更新属性的代码放入一个单独的方法中，并从您的事件处理程序中调用：

```
string _test;
public string Test
{
    get
    {
        return _test;
    }
    private set
    {
        _test = value;
        RaisePropertyChanged(() => Test);
    }
}

public void UpdateTest()
{
    Test = "Something" + System.DateTime.Now.ToString();
}

private void button1_Click(object sender, System.Windows.RoutedEventArgs e)
{
    UpdateTest();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:06:35.727

我怀疑你的

```
button1.Content = "Yellow"; 
```

正在删除与您的 ViewModel 的绑定。

您不应该`button1`直接在视图中设置内容，而是设置 ViewModel 的内容，这将相应地更新视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:04:30.853

谢谢大家的回答。我发现当您在非调试模式下运行它时它可以工作。但是在回调的情况下，即使在非调试模式下也不会工作。

我终于得到了文章[http://info.titodotnet.com/2011/08/silverlight-dependency-property-clr.html中提到的解决方案](http://info.titodotnet.com/2011/08/silverlight-dependency-property-clr.html)

干杯!

# javascript - 在 Windows 7 上运行 Node.js“hello world”时连接中止

> ID：10062154
> 
> 赞同：0
> 
> 时间：2012-04-08T10:38:17.207
> 
> 标签：javascript, windows, node.js, windows-firewall, netstat

# 已回答/已修复：

哎呀！10000分给jiw！

我正在尝试使用 Node.js 开始一个爱好项目。所以我开始了：

*   安装节点 0.6.14
*   从 Eclipse 的主页复制粘贴“hello world”程序
*   保存为 Main.js
*   启动（节点 Main.js）
*   打开[http://127.0.0.1/1337](http://127.0.0.1/1337)
*   然后我得到这个：

    Firefox 无法与位于 127.0.0.1 的服务器建立连接。

代码：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

1.  Firebug 输出：中止 - 127.0.0.1
2.  Windows 防火墙已禁用 - 结果相同。
3.  检查 netstat：netstat -na | findstr 1337：TCP 127.0.0.1:1337 0.0.0.0:0 监听
4.  检查节点是否正在运行 - 它是。
5.  更改了端口 - 结果相同。
6.  试图查找节点服务器日志 - 似乎找不到任何日志。

有任何想法吗？现在我有点困惑“Hello world”不起作用（！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:41:37.007

我不知道如何结束这个问题，所以我会回答自己。jimw 的评论就是答案 - 我试图访问错误的端口，因为我输入了**localhost/1337**而不是**localhost:1337**，我只是瞎了眼。
非常感谢 ;）

# c++ - 静态数据成员数组绑定的评估范围

> ID：10062156
> 
> 赞同：3
> 
> 时间：2012-04-08T10:38:28.857
> 
> 标签：c++, arrays

我打算向 GCC 提交一个错误，但后来意识到如果我对标准的解释是正确的，那是核心语言缺陷，而不是编译器错误。

当数组类型的静态数据成员在类范围之外定义时，在类范围内查找数组绑定中的标识符。

§9.4.2 [class.static.data] 说“静态数据成员定义中的初始化表达式在其类 (3.3.7) 的范围内”，但没有说明声明符本身。这似乎是声明器中唯一的名称查找上下文。

§8.4.2 [dcl.array] 没有提到数组绑定的范围，因此默认情况下，表达式在封闭范围内进行评估，即命名空间。

```
class X {
  static int const size = some_complicated_metafunction<>::value;
  static int arr[ size ];
};

// "size" should be qualified as "X::size", which is an access violation.
int X::arr[ size ] = {}; 
```

问题是，如果数组绑定没有在类范围内评估，则无法访问私有类成员，并且`some_complicated_metafunction<>`必须重新指定。数组绑定需要与初始化程序相同的范围，原因与初始化程序基本相同。（虽然没有那么强大，因为常量表达式总是可以重新计算，这与私有对象的地址不同。）

我是否遗漏了某些东西或 DR 是否正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T11:35:35.853

我认为成员定义中绑定的数组在类范围内。标准 3.3.7/1：

> 以下规则描述了类中声明的名称范围。
> 
> ...
> 
> 5) 延伸到或超过类定义结尾的声明的潜在范围也延伸到由其成员定义定义的区域，即使成员是在类外部的词法定义的（这包括静态数据成员定义、嵌套类定义、成员函数定义（包括成员函数体和此类定义的声明部分的任何部分，其**跟在 declarator-id**之后，包括参数声明子句和任何默认参数（8.3.6）......

这里的声明者 ID 是`X::arr`.

# c# - 如何选择列表的前 3 项<>

> ID：10062157
> 
> 赞同：3
> 
> 时间：2012-04-08T10:38:37.430
> 
> 标签：c#, linq

我正在使用此代码获取所有新闻：

```
List<aspnet_News> allNews = context.aspnet_News.OrderByDescending(i => i.NewsId).ToList(); 
```

如何选择此列表的前 3 项并绑定到 Datalist，请帮助，谢谢...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T10:41:52.567

您可以使用[Take()](http://msdn.microsoft.com/en-us/library/bb300906.aspx)方法

```
List<aspnet_News> allNews = context.aspnet_News.OrderByDescending(i => i.NewsId)
                                               .Take(3)  // Takes the first 3 items
                                               .ToList(); 
```

它还将处理列表包含少于 3 个项目并仅获取它们的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T10:41:38.353

使用方法 Take()，如果需要，也可以使用 Skip()。

[如何在 C# 中获取列表的前 N ​​个元素？](https://stackoverflow.com/questions/319973/how-to-get-first-n-elements-of-a-list-in-c)

# c - 对语言环境和编码感到困惑

> ID：10062159
> 
> 赞同：0
> 
> 时间：2012-04-08T10:38:52.300
> 
> 标签：c, linux, ubuntu

下面是我的语言环境集。

```
LANG=en_US.UTF-8
LC_CTYPE=zh_CN.UTF-8
LC_NUMERIC=en_US.UTF-8
LC_TIME=en_US.UTF-8
LC_COLLATE=en_US.UTF-8
LC_MONETARY=en_US.UTF-8
LC_MESSAGES=en_US.UTF-8
LC_PAPER=en_US.UTF-8
LC_NAME=en_US.UTF-8
LC_ADDRESS=en_US.UTF-8
LC_TELEPHONE=en_US.UTF-8
LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=en_US.UTF-8
LC_ALL= 
```

如果我将 LC_CTYPE 更改为 en_US.UTF-8 那么我无法在终端或其他应用程序中输入中文字符。为什么？LC_TYPE 中前缀 en_US 或 zh_CN 的作用是什么？

如果我想输入中文单词，那么我设置 LC_CTYPE=zh_CN，如果我想输入另一种语言（假设它是 X）单词，那么我设置 LC_CTYPE=X。但是如果我想同时输入中文和X，那我该怎么办呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:47:51.370

`LC_CTYPE`适用于字符的分类和转换，以及多字节和宽字符。

`zh`是中文的 ISO 代码。`zh_CN`是“简体中文”的一个子类型，`zh`代表“简体中文”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T17:19:28.703

请注意，您可以为每个 bash 会话导出语言环境，因此如果您设置 LANG 等并在同一脚本中启动 X 会话 - 该语言将被整个 X 会话接受。例如，以下脚本启动德语的 VNC 会话，它独立于系统语言。您可以在此处为所需的输入布局添加所需的环境变量，并为每个 X 会话获取所需的结果。

```
#!/bin/bash
export LANG=de_DE.UTF-8
export LANGUAGE=de_DE:de
vnc4server -depth 16 -geometry 1024x768 :1
vncconfig -iconic -nowin -display :1 & 
```

# c++ - 在 Mac OS X .framework 中包含 GLEW 的正确方法是什么？

> ID：10062160
> 
> 赞同：1
> 
> 时间：2012-04-08T10:39:20.727
> 
> 标签：c++, macos, gcc, sdl, glew

可能是一个非常简单的问题，但它让我难住了。

我有一个基于 SDL/OpenGL/GLEW 的静态库，可以在 Windows 上编译 (gcc/g++) 和链接。在 OS X 上，相同的代码库无法编译，声称它找不到 GL_NUM_EXTENSIONS 和 ::glGetStringi() 的声明 - 这是因为我在混合中加入了 GLEW（只有 SDL 和 OpenGL，它构建得很好OS X 也是）。

```
// globals.h
#include <glew.h>
#include <SDL/SDL.h>

// graphics.h
#include "globals.h"

bool HasGLExtension(const char* pName);

// graphics.cpp
#include <string>
#include "graphics.cpp"

bool HasGLExtension(const char* pName)
{
  GLint numExtensions;
  ::glGetIntegerv(GL_NUM_EXTENSIONS, &numExtensions); // error
  for (int i = 0; i < numExtensions; ++i)
  {
    if (strcmp(pName, (char*)::glGetStringi(GL_EXTENSIONS, i)) == 0) // error
    {
      return true;
    }
  }
  return false;
} 
```

*   作为框架构建的依赖库位于/Library/Frameworks。
*   使用了 -DGLEW_STATIC -DSDL_NO_GLEXT 编译标志（在 Windows 上需要 - 即使我删除它们，问题仍然存在）。
*   甚至自动完成确认 glew.h 的位置存在（当然，这不是我得到的错误——它是符号）。
*   包括 SDL/SDL_opengl.h 只会导致声明冲突。
*   glew.h 中存在有问题的定义

我缺少什么明显的东西？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-12-25T23:42:27.003

不要这样做。对于 1，易于设置和 2，开箱即用和 3，其许可几乎没有负担的东西，请使用[glLoadGen](https://bitbucket.org/alfonse/glloadgen/wiki/Home)。

# sql-server - 如何在VB中显示来自SQL Server的查询结果？

> ID：10062167
> 
> 赞同：4
> 
> 时间：2012-04-08T10:41:28.090
> 
> 标签：sql-server, vb.net, visual-studio, ado.net

我正在尝试在 VB 中显示来自 SQL 服务器的查询结果。我编写了以下代码，但不知道如何“仅显示结果”；

```
 Public Function ConnectToSQL() As String
        Dim con As New SqlConnection
Try
            con.ConnectionString = "Data Source=(local);Initial Catalog=TestDatabase;Persist Security Info=True;User ID=sa;Password=afm"
            Dim cmd As New SqlCommand("SELECT username FROM users WHERE username='user'", con)
            con.Open()
            Console.WriteLine("Connection Opened")

            ' Execute Query
            Dim reader As SqlDataReader = cmd.ExecuteReader()
            While reader.Read()
                Console.WriteLine(String.Format("{0}, {1}", _
                   reader(0), reader(1)))

            End While
        Catch ex As Exception
            MessageBox.Show("Error while connecting to SQL Server." & ex.Message)
        Finally
            con.Close() 'Whether there is error or not. Close the connection.
        End Try
        Return reader
    End Function 
```

谁能指导一下？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T00:09:10.923

我纠正了一些事情，现在你的功能对我来说很好：

```
Public Function ConnectToSQL() As String
    Dim con As New SqlConnection
    Dim reader As SqlDataReader
    Try
        con.ConnectionString = "Data Source=(local);Initial Catalog=TestDatabase;Persist Security Info=True;User ID=sa;Password=afm"
        Dim cmd As New SqlCommand("SELECT username, WindowsLogin FROM users WHERE username='user'", con)
        con.Open()
        Console.WriteLine("Connection Opened")

        ' Execute Query    '
        reader = cmd.ExecuteReader()
        While reader.Read()
            Console.WriteLine(String.Format("{0}, {1}", _
               reader(0), reader(1)))
            'NOTE: (^^) You are trying to read 2 columns here, but you only        '
            '   SELECT-ed one (username) originally...                             '
            ' , Also, you can call the columns by name(string), not just by number '

        End While
    Catch ex As Exception
        MessageBox.Show("Error while connecting to SQL Server." & ex.Message)
    Finally
        con.Close() 'Whether there is error or not. Close the connection.    '
    End Try
    'Return reader { note: reader is not valid after it is closed }          '
    Return "done"
End Function 
```

如果您有任何问题，请告诉我。

# php - 如何为 jquery ui 自动完成将输入编码为 json？

> ID：10062180
> 
> 赞同：-4
> 
> 时间：2012-04-08T10:43:04.613
> 
> 标签：php, json, jquery-ui, jquery-ui-autocomplete

我已经能够实现自动完成，只是我想做的是使用php的json_encode函数。

这是我当前的代码：

```
<?php

$host = "localhost"; 
$user = "root"; 
$password = ""; 
$db = "isproj2"; 

// open connection 
$connection = mysql_connect($host, $user, $password) or die ("Unable to connect!"); 

// select database 
mysql_select_db($db) or die ("Unable to select database!"); 
$text = mysql_real_escape_string($_GET['term']);

$query = "Select SupplierName, SupplierID from tbl_supplier where SupplierName LIKE '%$text%'";
$result = mysql_query($query);
$json = '[';
$first = true;
while($row = mysql_fetch_array($result))
{
    if (!$first) { $json .=  ','; } else { $first = false; }
    $json .= '{"label":"'.$row['SupplierName'].'","value":"'.$row['SupplierID'].'" }';
}
$json .= ']';
echo $json;
?> 
```

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:45:52.553

```
$result = mysql_query($query);
$data = array();
while ($row = mysql_fetch_array($result)) {
    $data[] = array('label' => $row['SupplierName'], 'value' => $row['SupplierID']);
}
echo json_encode($data); 
```

# java - Spring AOP：“找不到元素'aop：config'的声明”

> ID：10062186
> 
> 赞同：10
> 
> 时间：2012-04-08T10:44:17.743
> 
> 标签：java, spring, aspectj, spring-aop

我已经看到已经提出了这个问题的几个实例。但是，我有信心满足这些解决方案中列出的标准。即我很确定我的类路径上有所需的jar + 我的模式位置地址按顺序排列。

一种解决方案提到该问题可能是由于在类路径上有另一个 XML 解析器。我的类路径中确实有 dom4j，但我已将其删除以进行测试，但问题仍然存在。

这是我的类路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="test"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/mysql-connector-java-5.1.18-bin.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/jaxen-1.1.3.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.aop-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.asm-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.aspects-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.beans-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.context.support-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.context-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.core-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.expression-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.instrument.tomcat-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.instrument-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.jdbc-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.jms-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.orm-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.oxm-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.test-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.transaction-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.web.portlet-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.web.servlet-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.web.struts-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/org.springframework.web-3.1.0.RC1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/log4j-1.2.16.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/commons-logging-1.1.1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/spring-mvc-airline/WebContent/WEB-INF/lib/junit-4.9b2.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/mybatis-3.1.0-SNAPSHOT.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/mybatis-spring-1.1.0.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/lambdaj-2.4.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/cglib-2.2.2.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/aspectj-1.6.12.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/aspectjrt-1.5.4.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/dom4j-1.6.1.jar"/>
    <classpathentry kind="lib" path="C:/Users/user/workspace/rugby-project/lib/spring-aop-3.0.3.RELEASE.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

这是我的xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="timer" class="ie.ucd.dec.al.rugby.aop.Timer" />

    <aop:config>
        <aop:aspect ref="timer">
            <aop:pointcut id="migrationManager_migrate"
                expression="execution(* ie.ucd.dec.al.rugby.data.migrate.MigrationManager.migrateAllXmlFilesInDirectory())" />

            <aop:around pointcut-ref="migrationManager_migrate"
                method="timeJob()" />
        </aop:aspect>

    </aop:config>

</beans> 
```

最后，这是我的堆栈跟踪：

```
Exception in thread "main"
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 15 in XML document from class path resource [spring-aop.xml] is invalid; nested exception is
org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'aop:config'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at ie.ucd.dec.al.rugby.data.migrate.MigrationRunner.main(MigrationRunner.java:10)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'aop:config'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(UnknownSource)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at 
```

希望有人可以提供帮助。

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-08T10:57:03.900

项目的顺序`xsi:schemaLocation`是错误的，每个命名空间 URI 后面应该跟着它的 XSD 位置：

```
xsi:schemaLocation="
     http://www.springframework.org/schema/beans             
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd          
     http://www.springframework.org/schema/aop         
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd" 
```

# ios - CABasicAnimation 如何获取当前的旋转角度

> ID：10062187
> 
> 赞同：8
> 
> 时间：2012-04-08T10:44:24.143
> 
> 标签：ios, xcode4, rotation, caanimation, cabasicanimation

我对 CABasicAnimation 有一些问题。它类似于那个帖子：[CAB​​asicAnimation 旋转返回原始位置](https://stackoverflow.com/questions/7683526/cabasicanimation-rotate-returns-to-original-position)

所以，我有在 touchMove 中旋转的 uiimageview。在执行“惯性动画”的 touchEnd 调用方法中：

```
-(void)animationRotation: (float)beginValue
{
     CABasicAnimation *anim;
     anim = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
     anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
     anim.duration = 0.5;
     anim.repeatCount = 1;

     anim.fillMode = kCAFillModeForwards;
     anim.fromValue = [NSNumber numberWithFloat:beginValue];
     [anim setDelegate:self];    

     anim.toValue = [NSNumber numberWithFloat:(360*M_PI/180 + beginValue)];
     [appleView.layer addAnimation:anim forKey:@"transform"];

     CGAffineTransform rot = CGAffineTransformMakeRotation(360*M_PI/180 + beginValue);
     appleView.transform = rot;
} 
```

这个动画效果很好，但是如果我在 animationRotation 结束之前调用 touchBegan，旋转角度就是 beginValue。我需要当前的旋转角度。作为一个实验，我声明了方法

```
 -(vod) animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
 {
      NSLog(@"Animation finished!");
 } 
```

它似乎工作。但我不知道如何在animationDidStop 中为我的UIImageView 获取角度或CGAffineTransform 的值。甚至有可能做到吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T13:48:16.050

您应该使用presentationLayer 方法在飞行动画期间获取图层属性。

所以你的代码应该是这样的，

```
 #define RADIANS_TO_DEGREES(__ANGLE__) ((__ANGLE__) / (float)M_PI * 180.0f)

    -(void)animationRotation: (float)beginValue
    {
         CABasicAnimation *anim;
         anim = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
         anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
         anim.duration = 0.5;
         anim.repeatCount = 1;

         anim.fillMode = kCAFillModeForwards;
         anim.fromValue = [NSNumber numberWithFloat:beginValue];
         [anim setDelegate:self];    

    //get current layer angle during animation in flight
         CALayer *currentLayer = (CALayer *)[appleView.layer presentationLayer];     
         float currentAngle = [(NSNumber *)[currentLayer valueForKeyPath:@"transform.rotation.z"] floatValue];   
         currentAngle = roundf(RADIANS_TO_DEGREES(currentAngle));        

         NSLog(@"current angle: %f",currentAngle);

         anim.toValue = [NSNumber numberWithFloat:(360*M_PI/180 + beginValue)];
         [appleView.layer addAnimation:anim forKey:@"transform"];

         CGAffineTransform rot = CGAffineTransformMakeRotation(360*M_PI/180 + beginValue);
         appleView.transform = rot;
    } 
```

# php - 仅循环通过 ForEach 多维数组 5 次

> ID：10062189
> 
> 赞同：1
> 
> 时间：2012-04-08T10:44:29.330
> 
> 标签：php, joomla, multidimensional-array

我有一个简单的问题，我也根本找不到答案。我有一个来自我的 Joomla 的多维数组，它目前显示我网站上的所有博客文章。我只想显示最近的 5 个。

这是代码：

```
<?php 
foreach($list as $item) { 
?>

<li>
    <a href="<?php echo $item->link; ?>" class="latestnews<?php echo $params->get('moduleclass_sfx'); ?>">
        <?php echo $item->text; ?></a>
</li>

}
?> 
```

我看过一些类似的帖子，但似乎没有一个能满足我的要求。希望对受过训练的人来说是一个简单的。请在我休息日帮助我！:-)

新手:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T10:46:04.330

您可以使用`array_slice()`切掉前 5 个，假设它们是按从最新到最旧的顺序排列的。

```
<?php 
foreach(array_slice($list, 0, 5) as $item) { 
?> 
```

如果它们的顺序相反，请使用`array_slice($list, -5)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:47:25.097

要么你`array_slice()`只使用你需要的数组的一部分，要么你可以在你的循环中使用一个计数器，[`break`](http://php.net/manual/en/control-structures.break.php)当你达到你想要的数字时。

如`array_slice()`另一个答案所示，我将给您一个使用计数器和中断的示例：

```
<?php 
$i = 0;
foreach($list as $item) {

if ($i > 4)
  break;

$i++;
?>

<li>
    <a href="<?php echo $item->link; ?>" class="latestnews<?php echo $params->get('moduleclass_sfx'); ?>">
        <?php echo $item->text; ?></a>
</li>

<? } ?> 
```

# android - 从快照启动的android模拟器中没有声音

> ID：10062190
> 
> 赞同：1
> 
> 时间：2012-04-08T10:44:30.447
> 
> 标签：android, android-emulator, android-camera

我有两个安卓模拟器。假设 emulator1 和 emulator2。这两个模拟器都更新了 Google API 2.1。Emulator1 总是在擦除之前的用户数据后启动。但是 emulator2 是从快照启动的（我在第一次创建 emulator2 并始终使用相同的快照时拍摄了快照）。问题是我正在运行一个可以在两个模拟器中播放音频的应用程序。在两个模拟器中，音频正在播放（我可以从进度条中看到），但声音仅来自 emulator1。在 emulator2 中，进度条在移动，但没有声音。我创建了许多模拟器，例如 emulator2（从快照启动），但没有声音出现。但是当我使用像 emulator1 这样的新模拟器时，声音总是会出现。

我正在使用模拟器快照快速启动模拟器。建议我为此提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:52:41.587

[快照介绍网站](http://tools.android.com/recent/emulatorsnapshots)上的一句重要的话：

> 这没有像我们希望的那样经过全面测试，但对我们很有用，所以我们认为它足够可靠，可以分享。

这可能是快照功能中的错误。

为什么你仍然使用快照？只是为了更快的启动？由于您无需重新启动模拟器即可安装新版本的应用程序，因此我看不到使用快照的真正好处。特别是当该功能未经过全面测试时。

# c# - com 类工厂的错误

> ID：10062194
> 
> 赞同：0
> 
> 时间：2012-04-08T10:45:18.917
> 
> 标签：c#, .net, wia

请大家帮我解决这个问题，我在 .NET Frame Work 4.0 上使用 C# 创建了一个项目，并使用了 WIA（Windows 图像采集），它工作成功。当我在另一台 PC 上运行 .exe 文件时，我收到一条消息：

“检索带有 clsid{E1C5D730-7e97-4D8A-9E42-BBAE87C205} 的组件的 com 类工厂失败，原因是以下错误 80040154”即使两者都是 32 位，也可能导致此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:10:25.890

尝试将 wiaaut.dll 复制到与 exe 相同的位置。这可能不是一个长期的解决方案，但至少它会告诉您问题是否在于尝试查找 WIA 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:53:14.970

很可能机器上没有安装WIA；堆栈跟踪将有助于缩小错误范围。

我知道在 Windows 2008 服务器上默认没有安装 WIA。您可以通过使用服务器管理器安装桌面体验功能来安装它。

另一台电脑的配置是什么？

# gwt - GWT 编辑器 onPropertyChange

> ID：10062207
> 
> 赞同：1
> 
> 时间：2012-04-08T10:48:45.690
> 
> 标签：gwt, gwt-editors

如何使用 ValueAwareEditor.onPropertyChange？这个功能已经实现了吗？编辑器属性更改时不会调用它。

此外，我看不出是否在 GWT 代码中的任何地方调用了此方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:56:19.360

似乎实现者 (`OptionalFieldEditor`和`ListEditor`) 目前都为这个方法提供了一个空的覆盖，所以显然没有——这个功能还没有实现。

# ios - 访问其他类的核心数据数据库

> ID：10062208
> 
> 赞同：1
> 
> 时间：2012-04-08T10:48:45.433
> 
> 标签：ios, core-data, nsmanagedobjectcontext, nsfetchedresultscontroller

我有一个从 AppDelegate 开始的核心数据数据库，我会这样做：

```
MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];

masterViewController.managedObjectContext = self.managedObjectContext; 
```

所以通过这种方式我可以访问主视图中的数据库，然后我想访问其他类中的核心数据，我这样做：

```
id delegateContext = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [delegateContext managedObjectContext]; 
```

但是当我添加并访问信息时，当我尝试访问数据库的信息时，我在代码的各个部分都有一些错误的 Exc 访问和其他错误，所以我认为我可能以错误的方式使用了核心数据，以访问其他类的信息。

也许我必须释放委托上下文？...我没有在我使用过的任何类中释放它，如果我释放了它，我在哪里做？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:37:49.663

问题是您正在使用类型的 delegateContext`id`而不是`NSManagedObjectContext`并将其分配给`*context`这两行。

```
id delegateContext = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [delegateContext managedObjectContext]; 
```

每当您需要保存或访问时添加这些行怎么样`managedObjectContext`，检查它`nil`是否`YES`复制它`Appdelegate`。

```
 if (managedObjectContext == nil) 
 { 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    NSLog(@"After managedObjectContext: %@",  managedObjectContext);
 } 
```

只需尝试删除这两行并添加上面我建议的条件即可。应该管用。

> **更新 1：正如您所问的，我提到了创建** **Appdelegate 实例以访问全局属性的步骤。**

```
 #import "AppDelegate.h" 
```

`@implementation`创建实例后`Appdelegate`

```
 AppDelegate *app; 
```

在`viewDidLoad`方法...

```
 app=(AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

# php - javascript没有从php输出响应

> ID：10062210
> 
> 赞同：-1
> 
> 时间：2012-04-08T10:49:38.897
> 
> 标签：php, javascript, ajax, xmlhttprequest, blogger

我有一个简单的投票系统来处理 2 个 php 文件。但是，它不适用于博主（prolly 因为现在 1 个文件是 HTML）

更具体地说，投票结果在我的数据库中注册。它只是无法输出响应。

这是我的代码：

```
<div id="poll" style="width:200px;overflow:hidden;text-align:center;">
Do you like this poll?

<div style="text-align:left;width:180px;margin:0 auto;">
<input type="radio" name="poll" id="poll1" checked>Yes, it`s great
<input type="radio" name="poll" id="poll2">Yes...
<input type="radio" name="poll" id="poll3">Not bad...
<input type="radio" name="poll" id="poll4">No!
</div>
<input type="button" value="Vote!" onClick="vote();"/>
</div>

<script type="text/javascript">
function vote(){
for(var i=1;i<=4;i++){
if(document.getElementById('poll' + i).checked){
//Check which one has been checked
var sendto = 'http://myhostingadd.com/vote.php?vote=' + i;
}
}
// Call the vote.php file
if(window.XMLHttpRequest){
xmlhttp = new XMLHttpRequest;
xmlhttp.open("GET",sendto,false);
xmlhttp.send(null);
}
else{
xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
xmlhttp.open("GET",sendto,false);
xmlhttp.send();
}
//Output the response
document.getElementById('poll').innerHTML = xmlhttp.responseText;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:54:48.410

您的**sendto**变量在 for 循环中本地声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:04:21.160

[我相信这与innerhtml not working on blogger](https://stackoverflow.com/questions/10064773/innerhtml-not-working-on-blogger)是同一个问题，它不工作的原因是因为 XMLHttpRequest 的目标必须在同一个域上。一旦代码被移植到 Blogger，它就会中断。（关于另一个问题的完整答案）

# android - 我在哪里可以获得完整的功能声明离线帮助文件 android..？

> ID：10062213
> 
> 赞同：0
> 
> 时间：2012-04-08T10:50:18.530
> 
> 标签：android

我正在寻找 android 的离线帮助文件。我曾经在 Eclipse IDE 上工作。在那里我找不到任何有用的 android 帮助主题。

我知道 android 网站本身提供了一个很好的教程。但不能一直在线。这就是为什么我正在寻找一个离线帮助文件。

我用谷歌搜索找到任何此类文件，尤其是 HTML 帮助文件。但我没有得到任何这样的东西。

谁能帮我找到那个..？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:57:14.710

使用 Android SDK Manager 安装“Android SDK 文档”包。它将被下载到`SDK_PATH/docs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:57:37.790

如果您指的是您可以在他们的网站上阅读的同一个 Android 文档，则它与您下载的 sdk 一起提供。如果您在 sdk 安装过程中选中了该选项，那么这些示例也会随 sdk 一起提供。

# c# - 如何从嵌套母版页中的内容页访问主母版页中的控件

> ID：10062217
> 
> 赞同：5
> 
> 时间：2012-04-08T10:50:31.547
> 
> 标签：c#, asp.net, c#-4.0, master-pages

我有 2 个嵌套的母版页。这是主母版页代码，例如：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPageMaster.master.cs" Inherits="MasterPageMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtMasterPageMaster" ClientIDMode="Static" runat="server"></asp:TextBox>
    <div style="background-color:Aqua;height:40px;">
    Some Text
    </div>
    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder>
</div>
</form> 
```

和嵌套母版页：

```
<%@ Master Language="C#" MasterPageFile="~/MasterPageMaster.master" AutoEventWireup="true"
CodeFile="MasterPageNested.master.cs" Inherits="MasterPageNested" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <asp:Panel runat="server" ID="panelMain" BackColor="lightyellow">
    <h2>
        Child master</h2>
    <asp:Panel runat="server" ID="panel1" BackColor="lightblue">
        <p>
            This is child master content.</p>
        <asp:ContentPlaceHolder ID="ChildContent1" runat="server" />
    </asp:Panel>
    <asp:Panel runat="server" ID="panel2" BackColor="pink">
        <p>
            This is child master content.</p>
        <asp:ContentPlaceHolder ID="ChildContent2" runat="server" />
    </asp:Panel>
    <br />
</asp:Panel>
</asp:Content> 
```

我创建了一个基于这个嵌套母版页的页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPageNested.master" AutoEventWireup="true" CodeFile="PageMasterPageNested.aspx.cs" Inherits="PageMasterPageNested" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ChildContent1" Runat="Server">
</asp:Content>
    <asp:Content ID="Content2" ContentPlaceHolderID="ChildContent2" Runat="Server">
    <asp:Button ID="Button1" runat="server" Text="Button" Height="66px" 
    onclick="Button1_Click" Width="196px" />
</asp:Content> 
```

我想点击`Button1`获取主主页的文本。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T11:03:05.050

在 PageMasterPageNested.aspx 中：

```
TextBox txtBox = this.Master.Master.FindControl("txtMasterPageMaster") as TextBox; 
```

应该管用。试试看。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T00:07:48.617

这在任何情况下都有效。特别是如果您不知道或不关心您嵌套了多少母版页。希望能帮助到你 ：）

```
MasterPage tmp = this.Master;
while (tmp.Master != null)
{
    tmp = tmp.Master;
}

var control = tmp.FindControl("form1"); 
```

# asp.net-mvc-3 - 使用 ASP.NET MVC3 Razor 进行本地化

> ID：10062219
> 
> 赞同：6
> 
> 时间：2012-04-08T10:50:43.367
> 
> 标签：asp.net-mvc-3, razor, multilingual

我正在尝试使用 mvc3 Razor 创建具有本地化功能的网站，但我不知道该怎么做。有人可以告诉我该怎么做吗？

# javascript - 如果相同的功能已经在运行，什么也不做

> ID：10062221
> 
> 赞同：3
> 
> 时间：2012-04-08T10:51:18.387
> 
> 标签：javascript

我有一个每 3 秒运行一次的 javascript 函数，如果该函数的前一个实例已经在运行，有什么方法可以不执行任何操作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T10:55:32.970

我假设您正在运行繁重的功能，`setInterval`并且如果前一个未完成，则希望跳过一个刻度。

然后，而不是

```
function yourfoo() {
   // code
}

setInterval(yourfoo, 3000); 
```

做：

```
function yourfoo() {
   // code
   setTimeout(yourfoo, 3000);
}

setTimeout(yourfoo, 3000); 
```

这保证了在前一个呼叫完成之前不会安排下一个呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:54:46.247

是的。

这是默认完成的。

它被称为 JavaScript 是单线程的。

两个函数不能同时运行。

您可能使用`setInterval`which 将在内部缓冲函数调用，直到任何当前正在运行的代码完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T10:59:20.153

您可以定义一个布尔标志来指示函数在更高范围内的运行状态，并相应地打开或关闭它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T11:25:18.357

JavaScript 是单线程的，这意味着在给定时间只会执行一个 JavaScript 块。因此，即使计时器触发，代码的执行也会排队等待下一个可用时刻。重要的是要知道，如果您使用 setInterval，则只有一个“触发”间隔将排队，而所有其他间隔将被丢弃，直到队列中不再有此类间隔。

这是 jQuery 的父亲 John Resig 对它的工作原理的一个很好的解释：http: [//ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

您可以重写代码以使用 setTimeout，因为这样可以保证代码的下一次执行只会在至少等待规定的毫秒数后才会发生（如果执行被阻止，可能会更长）。如果代码需要很长时间才能完成，则使用 setInterval 阻塞可能会导致代码的背靠背执行。

所以，做这样的事情来防止背靠背执行：

```
var nrOfMillisecondsToWait = 200;
setTimeout(function() {
  .. your code here
}, nrOfMillisecondsToWait); 
```

# javascript - jQuery 更改事件在 $(document).ready() 上手动触发时返回 null；

> ID：10062234
> 
> 赞同：0
> 
> 时间：2012-04-08T10:53:54.213
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我目前正在编写一个 JQuery 插件，它将 JSON Web 服务中的颜色加载到下拉列表中。

下拉列表背景颜色根据所选值更改。在大多数情况下，它正在工作。在任何常规更改上它按预期工作，我遇到的问题是我正在使用的初始页面加载`triggerHandler("change");`并且它触发但我似乎从页面加载的下拉列表中的所选值上收到未定义的错误所以它没有'不触发下拉列表的颜色变化

我的代码是：

```
$.fn.bindColorsList = function (options) {

    var defColor = options.defaultColor;
    var svcUrl = options.svcurl;
    //var f_target = options.filterTarget;
    var $this = this;

    $.ajax({
        url: options.svcurl,
        dataType: 'json',
        /*data: { filter: src_filt },*/
        success: function (fonts) { fillcolors(fonts, $this) },
        error: function () { appendError(f_target, "colors failed to load from server") }

    });

    this.on("change", function (event) {
        log($(event.target).attr("id") + " change detected");

        //change ddl dropdown color to reflect selected item ;
        var hcolor = $this.find('option:selected').attr("name");

        $this.attr("style", "background-color:" + hcolor);

    });

function fillcolors(colors, target) {

    $(target).empty();
    $.each(colors, function (i, color) {
        $(target).append("<option name='"+color.HexValue+"' value='" + color.Name + "' style='background-color:"+color.HexValue+"'>"+color.Name+"</option>");
    });
};

//in a seperate file
    $(document).ready(function () {

        $("#dd-font-color").bindColorsList({ svcurl: "/home/colors"});
        $("#dd-back-color").bindColorsList({ svcurl: "/home/colors" });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:45:48.203

您正在执行一个 AJAX 请求来填充您的下拉列表，顺便说一下，这是一个异步请求。在这种情况下，您需要在`success`AJAX 请求的回调中触发事件。

```
var $this = this;

// Bind the onchange event
$this.on("change", function (event) {
  ..
});

// Populate using AJAX
$.ajax({
  ...
  success: function (fonts) {
    // Populate the values
    fillcolors(fonts, $this);
    // Trigger the event
    $this.trigger("change");
  },
  ...
}); 
```

就是这样。

# java - N个列表的排列

> ID：10062244
> 
> 赞同：0
> 
> 时间：2012-04-08T10:55:10.023
> 
> 标签：java, list, permutation

我需要 N 个列表中的所有排列，直到程序开始我才知道 N，这是我的 SSCCE（我已经实现了建议给我的算法，但它有一些错误）。

首先，创建 Place 类：

```
public class Place {
public List<Integer> tokens ;

//constructor
public Place() {

  this.tokens = new ArrayList<Integer>();  
}

} 
```

然后测试类：

```
public class TestyParmutace {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here

        List<Place> places = new ArrayList<Place>();

        Place place1 = new Place();
        place1.tokens.add(1);
        place1.tokens.add(2);
        place1.tokens.add(3);
        places.add(place1); //add place to the list

        Place place2 = new Place();
        place2.tokens.add(3);
        place2.tokens.add(4);
        place2.tokens.add(5);
        places.add(place2); //add place to the list

        Place place3 = new Place();
        place3.tokens.add(6);
        place3.tokens.add(7);
        place3.tokens.add(8);
        places.add(place3); //add place to the list

        //so we have
        //P1 = {1,2,3}
        //P2 = {3,4,5}
        //P3 = {6,7,8}

        List<Integer> tokens = new ArrayList<Integer>();

        Func(places,0,tokens);

    }

    /**
     * 
     * @param places list of places
     * @param index index of current place
     * @param tokens list of tokens
     * @return true if we passed guard, false if we did not
     */

    public static boolean Func( List<Place> places, int index, List<Integer> tokens) 

    {

        if (index >= places.size())
            {

                // if control reaches here, it means that we've recursed through a particular combination
                // ( consisting of exactly 1 token from each place ), and there are no more "places" left

                String outputTokens = "";
                for (int i = 0; i< tokens.size(); i++) {

                    outputTokens+= tokens.get(i) +",";
                }
                System.out.println("Tokens: "+outputTokens);

                if (tokens.get(0) == 4 && tokens.get(1) == 5 && tokens.get(2) == 10) {
                    System.out.println("we passed the guard with 3,5,8");
                    return true;
                }

                else {
                    tokens.remove(tokens.get(tokens.size()-1));
                    return false;
                }

            }

        Place p = places.get(index);

        for (int i = 0; i< p.tokens.size(); i++)
            {

                tokens.add(p.tokens.get(i));
                //System.out.println("Pridali sme token:" + p.tokens.get(i));

                if ( Func( places, index+1, tokens ) ) return true;

            }
        if (tokens.size()>0)
            tokens.remove(tokens.get(0));

        return false;

    }
} 
```

这是这段代码的输出：

```
Tokens: 1,3,6,
Tokens: 1,3,7,
Tokens: 1,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8,
Tokens: 2,3,6,
Tokens: 2,3,7,
Tokens: 2,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8,
Tokens: 3,3,6,
Tokens: 3,3,7,
Tokens: 3,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8, 
```

所以，你看，有些组合是正确的（1,3,6），有些是不正确的（4,5,8），有些是完全缺失的（2,4,8,..）如何解决这个问题？地方的数量和地方的令牌数量可能会有所不同，我只使用了 3 个地方，因为有 2 个地方可以工作，但是更多的地方它是错误的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T11:35:24.633

你的算法几乎是正确的。我认为`true`当`false`你得到`true`. 我修改了你的方法`Func`：

```
public static void Func( List<Place> places, int index, Deque<Integer> tokens) {
    if (index == places.size()) {
        // if control reaches here, it means that we've recursed through a particular combination
        // ( consisting of exactly 1 token from each place ), and there are no more "places" left
        String outputTokens = "";
        for (int token : tokens) {
            outputTokens += token + ",";
        }
        System.out.println("Tokens: "+outputTokens);
    } else {
        Place p = places.get(index);
        for (int token : p.tokens) {
            tokens.addLast(token);
            Func(places, index+1, tokens);
            token.removeLast();
        }
    }
} 
```

我使用[Deque](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)是因为它提供了方便`removeLast`的方法来删除最后添加的令牌。您可以`LinkedList`作为`Deque`.

**更新**

```
List<List<Integer>> combinations;

// Instead of printing result:
List<Integer> copy = new ArrayList<Integer>(tokens);
combinations.add(copy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:33:34.373

您正在尝试设置交叉产品，而不是真正的排列。所以你需要做

```
 for(Integer token1 : place1.tokens){
    for(Integer token2 : place2.tokens){
       for(Integer token3 : place3.tokens){
            //crossValue = (token1, token2, token3);
        }
    }
 } 
```

现在，如果您想拥有所有排列，例如 for `[1,3,6,]`also have `[1,6,3]`, `[3,6,1]`, etcc.. 您需要一个函数，该函数在给定列表或数组的情况下输出排列，请参阅 [排列的排列](https://stackoverflow.com/questions/2920315/permutation-of-array)

# python - 在 Python 中解析日期字符串

> ID：10062251
> 
> 赞同：4
> 
> 时间：2012-04-08T10:55:41.793
> 
> 标签：python, string

如何重写以下子句：

```
if u'января' in date_category['title']:
    month = 1
elif u'февраля' in date_category['title']:
    month = 2
elif u'марта' in date_category['title']:
    month = 3
elif u'апреля' in date_category['title']:
    month = 4
elif u'мая' in date_category['title']:
    month = 5
elif u'июня' in date_category['title']:
    month = 6
elif u'июля' in date_category['title']:
    month = 7
elif u'августа' in date_category['title']:
    month = 8
elif u'сентября' in date_category['title']:
    month = 9
elif u'октября' in date_category['title']:
    month = 10
elif u'ноября' in date_category['title']:
    month = 11
elif u'декабря' in date_category['title']:
    month = 12 
```

它只是看起来很丑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T11:03:13.007

`datetime`要解决此问题，请使用 python模块解析您的日期信息。它支持语言环境，并将解决这个问题。如果属格形式确实是问题，那么只需将这些形式映射到与格，然后映射回输出。

要回答您的实际问题-

考虑您正在将数据与整数配对。如果您可以将数据转换为 format `(month, integer)`，则可以用数据驱动您的代码。

```
for (n, month) in enumerate(u'января, feb, mar, apri, may, jun, jul, aug, sep, oct, nov, декабря'.split(', '), 1):# the parameter 1 specifies to start counting from 1\. h/t @san4ez
    if month in date_category['title']: return n 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T11:06:07.833

获取俄罗斯国际化的系统支持：[在 Python 中使用的操作系统语言环境支持](https://stackoverflow.com/questions/1259971/os-locale-support-for-use-in-python)

使用`locale`模块设置语言环境：[如何在 Python 中获取 unicode 月份名称？](https://stackoverflow.com/questions/1821204/how-to-get-unicode-month-name-in-python)

用途`strptime`：[在 python 中处理国际日期](https://stackoverflow.com/questions/1299377/handling-international-dates-in-python)

演示：[语言环境问题](https://stackoverflow.com/questions/9829099/locale-troubles)

* * *

或者，只需执行以下操作：

```
months = ['Jan', 'Feb', 'Mar', ...]
monthToNumber = dict((name,i+1) for i,name in enumerate(months))

monthToNumber[date_category['title']] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T11:05:16.617

```
months = (u'января', u'февраля', u'марта', u'апреля', u'мая', u'июня', u'июля', u'августа', u'сентября', u'октября', u'ноября', u'декабря')
month = next(i for i,name in enumerate(months,1) if name in date_category['title']) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T11:19:50.237

您还可以使用 list 中的 index 函数来获取月份到月份数的映射

```
months = (u'января', u'февраля', u'марта', u'апреля', u'мая', u'июня', u'июля', u'августа', u'сентября', u'октября', u'ноября', u'декабря')
month = months.index(date_category['title'])+1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T12:31:52.237

创建月份的字典，并带有相应的索引：

```
months = [u'января', u'февраля', u'марта', u'апреля', u'мая', u'июня', u'июля', u'августа', u'сентября', u'октября', u'ноября', u'декабря'] 
```

然后你可以简单地做：

```
month = max(enumerate((date_category['title'].find(month) for month in months), start = 1), key = lambda x: x[1])[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T11:02:08.793

只需创建一个哈希数组，将您的字符串映射到相应的月份编号，然后您可以简单地遍历它，检查键在哪里`in date_category['title']`，并且在所有情况下，将月份设置为相应的值。祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T12:17:20.723

这里有一些更反常的东西，因为我喜欢证明说“应该只有一种方法”是徒劳的：

```
pattern = re.compile(u'(января)|(февраля)|(марта)|(апреля)|(мая)|(июня)|(июля)|(августа)|(сентября)|(октября)|(ноября)|(декабря)')

month = map(bool, x.search(date_category['title']).groups()).index(True) + 1 
```

# android - JAR 文件 C:\Program Files (x86)Android\android-sdk\android15\android.jar

> ID：10062252
> 
> 赞同：0
> 
> 时间：2012-04-08T10:55:44.750
> 
> 标签：android, eclipse, debugging

没有来源附件。您可以通过单击下面的附加源来附加源。

我应该怎么办。我在网上找到了不同的解决方案。但很高兴找到最佳解决方案。请帮忙问候卡兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:05:33.523

如果你使用 Eclipse ，你可以在[Adt-addons上找到 Android Sources Plugin](http://code.google.com/p/adt-addons/)

[在 ADT >=8.0.0 中，您可以通过使用http://adt-addons.googlecode.com/svn/trunk/source/com.android.ide](http://adt-addons.googlecode.com/svn/trunk/source/com.android.ide.eclipse.source.update/)安装 Android 源代码功能，将 Android 源代码添加到所有项目的 Android 容器中。 [eclipse.source.update/](http://adt-addons.googlecode.com/svn/trunk/source/com.android.ide.eclipse.source.update/)更新站点 安装 Android 源代码功能后，所有现有项目以及针对 Android 4.0.1、2.3.4、2.3、2.2、2.1、2.0.1、1.6 和 1.5 的新创建项目将附加源jar。

它可能没有 Android API Level 15，可能他们很快就会更新

# haskell - 什么是类型量词？

> ID：10062253
> 
> 赞同：23
> 
> 时间：2012-04-08T10:55:58.127
> 
> 标签：haskell, types, ocaml, existential-type, parametric-polymorphism

许多静态类型语言具有参数多态性。例如在 C# 中可以定义：

```
T Foo<T>(T x){ return x; } 
```

在呼叫站点中，您可以执行以下操作：

```
int y = Foo<int>(3); 
```

这些类型有时也写成这样：

```
Foo :: forall T. T -> T 
```

我听说有人说“forall 就像类型级别的 lambda 抽象”。所以 Foo 是一个函数，它接受一个类型（例如 int）并产生一个值（例如一个 int -> int 类型的函数）。许多语言推断类型参数，以便您可以编写`Foo(3)`而不是`Foo<int>(3)`.

假设我们有一个`f`类型为 的对象`forall T. T -> T`。我们可以对这个对象做的首先是`Q`通过写给它一个类型`f<Q>`。然后我们返回一个 type 的值`Q -> Q`。但是，某些`f`' 是无效的。例如这个`f`：

```
f<int> = (x => x+1)
f<T> = (x => x) 
```

因此，如果我们“调用” `f<int>`，那么我们会返回一个带有 type 的值，`int -> int`一般来说，如果我们“调用” `f<Q>`，那么我们会返回一个带有 type 的值`Q -> Q`，所以这很好。但是，通常认为这`f`不是 type 的有效事物，因为根据您传递的类型`forall T. T -> T`，它会做*不同的事情。*forall 的想法是明确*不允许*这样做。另外，如果 forall 是类型级别的 lambda，那么存在什么？（即存在量化）。由于这些原因，似乎 forall 和 exists 并不是真正的“类型级别的 lambda”。但那它们是什么？我意识到这个问题相当模糊，但有人可以帮我解决这个问题吗？

* * *

> > > 一个可能的解释如下：
> > > 
> > > 如果我们看逻辑，量词和 lambda 是两个不同的东西。量化表达式的一个例子是：
> > > 
> > > ```
> > > forall n in Integers: P(n) 
> > > ```
> > > 
> > > 所以有两部分要考虑：一个用于量化的集合（例如整数）和一个谓词（例如 P）。Forall 可以看作是一个高阶函数：
> > > 
> > > ```
> > > forall n in Integers: P(n) == forall(Integers,P) 
> > > ```
> > > 
> > > 带类型：
> > > 
> > > ```
> > > forall :: Set<T> -> (T -> bool) -> bool 
> > > ```
> > > 
> > > Exists 具有相同的类型。Forall 就像一个无限合取，其中 S[n] 是集合 S 的第 n 个元素：
> > > 
> > > ```
> > > forall(S,P) = P(S[0]) ∧ P(S[1]) ∧ P(S[2]) ... 
> > > ```
> > > 
> > > Exists 就像一个无限析取：
> > > 
> > > ```
> > > exists(S,P) = P(S[0]) ∨ P(S[1]) ∨ P(S[2]) ... 
> > > ```
> > > 
> > > 如果我们对类型进行类比，我们可以说∧的类型类比是计算交集类型∩，∨的类比类型是计算并集类型∪。然后我们可以定义 forall 和存在于类型上，如下所示：
> > > 
> > > ```
> > > forall(S,P) = P(S[0]) ∩ P(S[1]) ∩ P(S[2]) ...
> > > exists(S,P) = P(S[0]) ∪ P(S[1]) ∪ P(S[2]) ... 
> > > ```
> > > 
> > > 所以forall是一个无限的交集，exists是一个无限的并集。他们的类型是：
> > > 
> > > ```
> > > forall, exists :: Set<T> -> (T -> Type) -> Type 
> > > ```
> > > 
> > > 例如多态恒等函数的类型。这`Types`是所有类型的集合，`->`是函数的类型构造函数，`=>`是 lambda 抽象：
> > > 
> > > ```
> > > forall(Types, t => (t -> t)) 
> > > ```
> > > 
> > > 现在类型的东西`forall T:Type. T -> T`是一个*值*，而不是从类型到值的函数。它是一个值，其类型是所有类型 T -> T 的交​​集，其中 T 涵盖所有类型。当我们*使用*这样的值时，我们不必将其应用于类型。相反，我们使用子类型判断：
> > > 
> > > ```
> > > id :: forall T:Type. T -> T
> > > id = (x => x)
> > > 
> > > id2 = id :: int -> int 
> > > ```
> > > 
> > > 这向下转换`id`为有 type `int -> int`。这是有效的，因为`int -> int`也出现在无限交集。
> > > 
> > > 我认为这很好用，它清楚地解释了 forall 是什么以及它与 lambda 的不同之处，但这个模型与我在 ML、F#、C# 等语言中看到的不兼容。例如在 F# 中你`id<int>`可以获取整数上的标识函数，这在此模型中没有意义：id 是值上的函数，而不是返回值上的函数的类型上的函数。

* * *

有类型理论知识的人可以解释一下到底什么是 forall 和存在的吗？“forall 在类型级别上是 lambda”在多大程度上是真的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T13:05:24.927

让我分别解决你的问题。

*   调用 forall “类型级别的 lambda”是不准确的，原因有两个。首先，它是lambda*的类型*，而不是 lambda 本身。其次，lambda 存在于术语级别，即使它对类型进行抽象（类型级别的 lambda 也存在，它们提供通常称为泛型类型的东西）。

*   通用量化并不一定意味着所有实例的“相同行为”。那是一种称为“参数性”的特定属性，可能存在也可能不存在。普通的多态 lambda 演算是参数的，因为您根本无法表达任何非参数行为。但是，如果您添加诸如 typecase（也称为内涵类型分析）或检查型强制转换之类的结构作为其较弱的形式，那么您将失去参数化。参数化意味着很好的属性，例如它允许在没有任何类型的运行时表示的情况下实现语言。并且它引发了非常强大的推理原理，例如参见 Wadler 的论文“Theorems for free！”。但这是一种权衡，有时您希望按类型分派。

*   存在类型本质上表示类型（所谓的见证）和术语（有时称为*包*）的对。一种常见的查看方式是抽象数据类型的实现。这是一个简单的例子：

    包 ( *Int* , (λ *x* . *x* , λ *x* . *x* )) : ∃ *T* . ( *Int* → *T* ) × ( *T* → *Int* )

    这是一个简单的 ADT，其表示形式为*Int*并且仅提供两个操作（作为嵌套元组），用于将 int 转换为抽象类型*T*的输入和输出。例如，这是模块类型理论的基础。

*   总之，通用量化提供客户端数据抽象，而存在类型双重提供实现者端数据抽象。

*   作为补充说明，在所谓的*lambda cube*中，forall 和 arrow 被推广到 Π 型的统一概念（其中 T1→T2 = Π(x:T1).T2 和 ∀AT = Π(A:*) .T) 并且同样存在，并且元组可以推广到 Σ 类型（其中 T1×T2 = Σ(x:T1).T2 和 ∃AT = Σ(A:*).T）。这里，类型 * 是“类型的类型”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T16:29:16.040

一些评论来补充两个已经很好的答案。

首先，不能说它`forall`是类型级别的 lambda，因为在类型级别已经存在 lambda 的概念，并且它不同于`forall`. 它出现在系统 F_omega 中，它是具有类型级计算的 System F 的扩展，例如有助于解释 ML 模块系统（[F-ing 模块](http://www.mpi-sws.org/~rossberg/papers/Rossberg,%20Russo,%20Dreyer%20-%20F-ing%20Modules.pdf)，作者 Andreas Rossberg、Claudio Russo 和 Derek Dreyer，2010）。

在 System F_omega 的（语法）中，您可以编写例如：

```
type prod =
  lambda (a : *). lambda (b : *).
    forall (c : *). (a -> b -> c) -> c 
```

这是“类型构造器”的定义`prod`，例如`prod a b`是产品类型的教堂编码类型`(a, b)`。如果在类型级别有计算，那么如果要确保终止类型检查，则需要控制它（否则您可以定义 type `(lambda t. t t) (lambda t. t t)`。这是通过使用“类型级别的类型系统”或*kind* system. `prod`would be of kind `* -> * -> *`. 只有 kind 的类型`*`可以被值所占据，更高种类的类型只能在类型级别应用。`lambda (c : k) . ....`是一个类型级别的抽象，不能是值的类型，并且可以以任何形式存在`k -> ...`，同时`forall (c : k) . ....`对某种类型的多态值进行分类`c : k`并且必须是地面种类`*`。

`forall`其次， System F 的 和 Martin-Löf 型理论的 Pi 型之间有一个重要的区别。在 System F 中，多态值*对所有类型执行相同的操作*。作为第一个近似值，您可以说 type 的值`forall a . a -> a`将（隐式）将 type`t`作为输入并返回 type 的值`t -> t`。但这表明在这个过程中可能会发生一些计算，但事实并非如此。从道德上讲，当您将 type 的值实例`forall a. a -> a`化为 type 的值时`t -> t`，该值不会*改变*。有三种（相关的）思考方式：

*   System F 量化有类型擦除，你可以忘记类型，你仍然会知道程序的动态语义是什么。当我们使用 ML 类型推断将多态抽象和实例化隐含在我们的程序中时，如果您将“程序”视为将要运行的动态对象，我们并没有真正让推理引擎“填补我们程序中的漏洞”和计算。

*   A`forall a . foo`不是“`foo`为每种类型生成一个实例”的东西，而是“在未知类型中泛型”`a`的单一类型。`foo``a`

*   您可以将全称量化解释为无限合取，但有一个*统一*条件，即所有合取都具有相同的结构，特别是它们的证明都是相似的。

相比之下，Martin-Löf 类型理论中的 Pi 类型实际上更像是接受某物并返回某物的函数类型。这就是为什么它们不仅可以很容易地用于依赖于*类型*，而且还可以依赖于*术语*（依赖类型）的原因之一。

一旦您担心这些形式理论的合理性，这将具有非常重要的意义。系统 F 是*不可预测*的（一个 forall-quantified 类型可以量化所有类型，包括它自己），它仍然是合理的原因是这种全称量化的统一性。虽然从程序员的角度来看，引入非参数结构是合理的（我们仍然可以在一般非参数语言中推理参数性），但它很快就会破坏底层静态推理系统的逻辑一致性。Martin-Löf*谓词*理论更容易证明正确并以正确的方式扩展。

有关系统 F 的这种统一性/通用性方面的高级描述，请参阅 Fruchart 和 Longo 的 97 文章[Carnap 对 Impredicative Definitions and the Genericity Theorem 的评论](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.32.1911)。有关在存在非参数构造的情况下系统 F 故障的更多技术研究，请参见Robert Harper 和 John Mitchell (1999)[的 Girard's J 算子的参数化和变体。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.5163)最后，从语言设计的角度来看，关于如何放弃*全局*参数化以引入非参数结构但仍然能够在本地讨论参数化的描述，请参见George Neis、Derek Dreyer 和 Andreas Rossberg 的[Non-Parametric Parametricity](http://www.mpi-sws.org/~rossberg/papers/Neis,%20Dreyer,%20Rossberg%20-%20Non-Parametric%20Parametricity%20%5BJFP%5D.pdf)， 2011 年。

这种关于“计算抽象”和“统一抽象”之间区别的讨论已经被大量关于表示变量绑定器的工作所恢复。绑定结构感觉像是一种抽象（并且可以通过 HOAS 风格的 lambda 抽象来建模），但具有统一的结构，使其更像是一个数据骨架，而不是一系列结果。这已经被大量讨论，例如在 LF 社区中，“十二”中的“代表性箭头”，Licata&Harper 作品中的“积极箭头”等。

最近有几个人在研究“无关性”的相关概念（lambda-abstractions，结果“不依赖于”参数），但仍然不完全清楚这与参数多态性的关系有多密切。一个例子是 Nathan Mishra-Linger 与 Tim Sheard 的工作（例如[，纯类型系统中的擦除和多态性](http://web.cecs.pdx.edu/~sheard/papers/FossacsErasure08.pdf)）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-08T13:34:50.013

> 如果 forall 是 lambda ...，那么存在什么

为什么，当然是元组！

在[Martin-Löf 类型理论中](http://en.wikipedia.org/wiki/Intuitionistic_type_theory)，您有 Π 类型，对应于函数/普遍量化和 Σ-类型，对应于元组/存在量化。

它们的类型与您提出的非常相似（我在这里使用[Agda](http://wiki.portal.chalmers.se/agda/pmwiki.php)表示法）：

```
Π : (A : Set) -> (A -> Set) -> Set
Σ : (A : Set) -> (A -> Set) -> Set 
```

事实上，Π 是无限积，Σ 是无限和。请注意，它们不是“交叉”和“联合”，正如您所建议的那样，因为如果不另外定义类型相交的位置，您将无法做到这一点。（一种类型的哪些值对应于另一种类型的哪些值）

从这两种类型的构造函数中，您可以拥有所有正常的、多态的和依赖的函数，正常的和依赖的元组，以及存在和普遍量化的语句：

```
-- Normal function, corresponding to "Integer -> Integer" in Haskell
factorial : Π ℕ (λ _ → ℕ)

-- Polymorphic function corresponding to "forall a . a -> a"
id : Π Set (λ A -> Π A (λ _ → A))

-- A universally-quantified logical statement: all natural numbers n are equal to themselves
refl : Π ℕ (λ n → n ≡ n)

-- (Integer, Integer)
twoNats : Σ ℕ (λ _ → ℕ)

-- exists a. Show a => a
someShowable : Σ Set (λ A → Σ A (λ _ → Showable A))

-- There are prime numbers
aPrime : Σ ℕ IsPrime 
```

但是，这根本不涉及参数性，AFAIK 参数性和 Martin-Löf 类型理论是独立的。

对于参数化，人们通常参考[Philip Wadler 的工作](http://homepages.inf.ed.ac.uk/wadler/topics/parametricity.html)。

# ios - Airplay：在外部窗口上镜像子视图

> ID：10062254
> 
> 赞同：9
> 
> 时间：2012-04-08T10:56:08.117
> 
> 标签：ios, uiview, external, mirroring, airplay

关于airplay的设计/建筑问题。我在 AppDelegate 中设置了一个外部显示器：

```
UIScreen *externalScreen = UIScreen.screens.lastObject;
self.externalWindow = [[UIWindow alloc] initWithFrame:externalScreenFrame];
self.externalWindow.screen = externalScreen;
self.externalWindow.backgroundColor = [UIColor redColor]; 
```

工作正常，电视以红色显示空白屏幕。现在我有一个带有一堆子视图的 ViewController，并且应该在设备*和*外部屏幕上显示一个视图。如果我在 ViewController.m 中尝试这个：

```
[_appDelegate.externalWindow addSubview:self.deviceAndTVView]; 
```

deviceAndTVView 将仅显示在外部屏幕上，不再显示在设备上。我需要的是在设备上安装 deviceAndTVView，在触摸/用户交互时更新自身，并将这些更新镜像到外部屏幕上。

哪条是实现这一目标的正确途径？

谢谢阅读！米

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T00:18:15.627

称为 AirPlay 镜像的技术名称并不好。它实际上以两种模式运行，一种是将整个 iOS 设备镜像到 AirPlay 设备，另一种模式是连接镜像 AirPlay 设备后，开发人员可以使用两个 UIWindow/UIScreen。

您使用的是后一种模式，通常称为“镜像”，但实际上您有一个完全独立的窗口/屏幕要管理，应该有更好的术语来指代这种操作模式。

您在上面描述的操作基本上是**将**UIView 从设备窗口移动到 AirPlay 窗口，并且它的工作方式完全符合预期！

没有技术方法可以让您在这两个窗口上显示 UIView 的**单个实例**——它将存在于一个 UIView 层次结构或另一个层次结构中，但不能同时存在于两者中。换句话说，如果你想在两个屏幕上显示相同的东西，你需要创建同一个 UIView 的**两个实例**，并将它们分别添加到两个窗口中，然后随着它们的变化同时更新它们。

虽然这可能不是您所期望的超级方便的“镜像”，但这可能是一件好事，因为您的 UIView 在设备上的纵横比可能与在 AirPlay 设备上的不同。通过有两个不同的视图，显示相同的内容，您可以调整 AirPlay 视图的大小，以充分利用设备的可用分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:34:07.907

我可以想到几种方法来做到这一点。您是否考虑过为此使用 KVO？本地和外部视图都可以观察驱动其内容的任何模型或控制器。

# css - 为什么我的内容显示在 div 之外？

> ID：10062255
> 
> 赞同：11
> 
> 时间：2012-04-08T10:56:14.763
> 
> 标签：css, html

我有一个包含内容的“泡沫”，效果很好。现在，我想显示一个计数（2 行），它应该始终位于该 div 的右下角，在它里面。我尝试了很多东西，但由于某种原因，它总是与 div 重叠并在外面显示。我究竟做错了什么？

```
<style type="text/css">
body{
background-color:#f3f3f3;
}
.commentbox{
background-color: #ffffff;
width: 200px;
border-color: #D1D1D1;
border-radius: 4px;
border-style: solid;
border-width: 1px; 
padding-bottom: 9px;
padding-left: 9px;
padding-right: 9px;
padding-top: 9px;
position:relative;
}
.count{
float:right;
text-align:right;
}
</style>

<div class="commentbox">
<div class="title">Some several lines long long long long content text goes here 
</div>
<div class="count">123<br>456</div>
</div> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-08T11:00:24.477

你是浮动的`.count`，所以它不会影响它的父容器的高度。

`overflow: hidden`在父级 ( ) 上设置`.commentbox`或使用[其他包含浮点数的技术](https://web.archive.org/web/20130707085000/http://www.ejeliot.com/blog/59)之一来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T11:04:22.090

你真的需要`float: right;`吗`.count`？我认为`text-align`对于所需的布局应该足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T10:59:45.540

由于您已经`position:relative`在父 div 上使用。试试这个：

```
.count {
   position:absolute;
   right:0;
   bottom:10px;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T11:03:45.660

可能您必须在“计数” div 之后添加一个清除。

```
<style type="text/css">
body{
background-color:#f3f3f3;
}
.commentbox{
background-color: #ffffff;
width: 200px;
border-color: #D1D1D1;
border-radius: 4px;
border-style: solid;
border-width: 1px; 
padding-bottom: 9px;
padding-left: 9px;
padding-right: 9px;
padding-top: 9px;
position:relative;
}
.count{
float:right;
text-align:right;
}
</style>

<div class="commentbox">
<div class="title">Some several lines long long long long content text goes here 
</div>
<div class="count">123<br>456</div>
<div style="clear: both"></div>
</div> 
```

# intellij-idea - IntelliJ Idea：配置工件以包含不同的 web.xml 和 application.properties

> ID：10062257
> 
> 赞同：0
> 
> 时间：2012-04-08T10:56:19.580
> 
> 标签：intellij-idea, web.xml

IntelliJ Idea 有没有办法创建两种工件 - 用于**开发**和**生产**，它们将包含不同的文件集。

我希望能够把不同的`application.properties`和`web.xml`他们两个创建不同的 WAR 文件。

当然，我可以创建一些 ant 或 maven 构建，但直接使用 Idea 会更简单。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:18:24.723

是的，您可以根据需要创建任意数量的工件，在[工件设置中](http://www.jetbrains.com/idea/webhelp/configuring-artifacts.html)您可以配置要打包的文件和位置，因此可以使用来自不同位置的文件。

# android - 使用在 res 文件夹中创建的地图

> ID：10062261
> 
> 赞同：0
> 
> 时间：2012-04-08T10:56:46.010
> 
> 标签：android

这可能是一个非常愚蠢的问题，但是我无法解决它。我不知道我做错了什么或者我应该怎么做，我检查了一些 tuts 但我无法解决它。所以我在 res 中创建了名为 menu 的新文件夹，并在那里创建了名为 xyz.xml 的新文件。现在我想用下面的 R.menu.item 在活动中调用它......但是当我只写 R. 它不显示菜单作为选项。我可以调用任何默认的地图，例如布局等，但我创建的地图我不能调用它们。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:08:25.940

如果您创建的菜单文件名为 xyz.xml，那么在您的代码中您应该将其用作：

```
R.menu.xyz 
```

另外，您指的是正确的R吗？有一个 R 类用于 Android 框架资源 (android.R)，然后有一个特定的 R 类用于您的项目资源。为确保您使用的是正确的名称空间，您可以使用完全限定的名称空间，例如 yourprojectsnamespace.R。

有关 Android 菜单的更多信息，请参阅[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)。

# java - java运行时环境检测到致命错误....不明白为什么？

> ID：10062262
> 
> 赞同：2
> 
> 时间：2012-04-08T10:56:46.050
> 
> 标签：java, swing, jdbc, oracle10g

我的代码如下。它是一个将叶子添加到数据库的程序。我得到了 java 运行时环境检测到致命错误，我不明白为什么。我是Java新手，所以对此我很困惑。谁能告诉我为什么会这样？我也在放错误文件。我也尝试理解这一点，但找不到错误所在的位置。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.lang.String;
import java.io.*;
import java.sql.*;

public class AddLeave extends JFrame implements ActionListener
{

JFrame frame;
JPanel panel,panel1;
JLabel empid,name1,name2,department,designation;
JTextField txtempid,txtname1,txtname2,txtdepartment,txtdesignation;
JButton find,ok,cancel;
String txtname1_1 = "";
String  txtname2_1 = "";
String  txtdepartment_1 = "";
String  txtdesignation_1 = "";
String  txtempid1="";   
Connection conn;

public AddLeave()
{
    frame=new JFrame("ADD LEAVE");
    frame.setLayout(new BorderLayout());
    panel=new JPanel();
    panel.setLayout(new GridLayout(5,2,5,5));
    panel.setBackground(Color.RED);

    panel1=new JPanel();
    //panel1.setLayout(new GridLayout(1,3,10,10));
    panel1.setBackground(Color.GREEN);

    empid=new JLabel("Employee Id:");
    name1=new JLabel("First Name:");
    name2=new JLabel("Last Name:");
    department=new JLabel("Department:");
    designation=new JLabel("Designation:");

    txtempid = new JTextField();
    txtname1 = new JTextField();
    txtname1.setEditable(false);
    txtname2 = new JTextField();
    txtname2.setEditable(false);
    txtdepartment = new JTextField();
    txtdesignation = new JTextField();
    txtdesignation.setEditable(false);

    find=new JButton("FIND");
    find.addActionListener(this);
    ok=new JButton("OK");
    ok.addActionListener(this);
    cancel=new JButton("CANCEL");
    cancel.addActionListener(this);

    panel.add(empid);
    panel.add(txtempid);
    panel.add(name1);
    panel.add(txtname1);
    panel.add(name2);
    panel.add(txtname2);
    panel.add(department);
    panel.add(txtdepartment);
    panel.add(designation);
    panel.add(txtdesignation);

    panel1.add(find);
    panel1.add(ok);
    panel1.add(cancel);

    frame.add(panel,BorderLayout.CENTER);
    frame.add(panel1,BorderLayout.SOUTH);
    frame.setVisible(true);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    connect();
}

public void connect()
{
    try
    {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
             conn=DriverManager.getConnection("jdbc:odbc:demo","system","scott");

    }
    catch(Exception e)
    {
    System.out.println("Error : "+e);
    }
}

public void actionPerformed(ActionEvent event)
{
    Object source= event.getSource();
    if(source.equals(find))
    {
        find();
    }

    if(source.equals(ok))
    {
        System.out.println("Leave added");
    }
    if(source.equals(cancel))
    {
        System.out.println("Canceled");
    }
}

public void find()
{

    txtempid1=txtempid.getText();
    try
    {

        if(txtempid1.isEmpty())
        {
            JOptionPane.showMessageDialog(null,"ID REQUIRED!!!","warning",JOptionPane.WARNING_MESSAGE);

        }
        else
        {
            Statement stmt = conn.createStatement();
            String query = "SELECT * FROM demo WHERE empid='"+txtempid1+"'";
            ResultSet rs = stmt.executeQuery(query);
            int foundrec = 0;
            while (rs.next())
            {
                        txtname1_1 = rs.getString(2);
                txtname2_1 = rs.getString(3);
                txtdesignation_1 = rs.getString(4); 
                foundrec =foundrec+ 1;
            }
            if(foundrec==1)
            {
                JOptionPane.showMessageDialog(null,"**Record Found**"," Message",JOptionPane.PLAIN_MESSAGE);
                txtname1.setText(txtname1_1);
                txtname2.setText(txtname2_1); 
                txtdesignation.setText(txtdesignation_1); 

            }
            else
            {
            JOptionPane.showMessageDialog(null,"!!!!EMPLOYEE DOES NOT EXIST!!!!"," ERROR",JOptionPane.ERROR_MESSAGE);
            }
        }
        conn.close();   
    }
    catch(Exception e)
    {
        System.out.println("Error : "+e);
    }

}

public static void main(String[] args)
{
    new AddLeave();
}
} 
```

这是错误文件

```
    #
    # Java 运行时环境检测到一个致命错误：
    #
    # EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x7c901010, pid=3052, tid=3732
    #
    # JRE 版本：6.0_31-b05
    # Java VM：Java HotSpot(TM) Client VM（20.6-b01混合模式，共享windows-x86）
    # 有问题的框架：
    #C [ntdll.dll+0x1010]
    #
    # 如果您想提交错误报告，请访问：
    # http://java.sun.com/webapps/bugreport/crash.jsp
    # 崩溃发生在 Java 虚拟机之外的本地代码中。
    # 查看有问题的框架以了解报告错误的位置。
    #

    -  -  -  -  -  -  - - 线  -  -  -  -  -  -  - -

    当前线程 (0x03054400): JavaThread "AWT-EventQueue-0" [_thread_in_native, id=3732, stack(0x03250000,0x032a0000)]

    siginfo：ExceptionCode=0xc0000005，读取地址0x00000018

    寄存器：
    EAX=0x00000004，EBX=0x329ab298，ECX=0x7ffad000，EDX=0x00000004
    ESP=0x0329ea48，EBP=0x0329ea60，ESI=0x00000000，EDI=0x03401590
    EIP=0x7c901010，EFLAGS=0x00010246

    栈顶：（sp=0x0329ea48）
    0x0329ea48: 74355a16 00000004 034015b4 7432139f
    0x0329ea58: 034015b4 03401590 0329ea70 74322c5d
    0x0329ea68: 034015b4 03054528 0329ea84 74325fa0
    0x0329ea78: 03401590 74350000 0329f1ac 0329eaa0
    0x0329ea88: 7432740e 03401590 0329eac0 00000003
    0x0329ea98: 0312cd28 03054528 0329eab8 6d36124e
    0x0329eaa8: 03401590 0329eac0 03054400 329ab298
    0x0329eab8: 0329eb04 00919fc7 00000000 0329eb20

    说明：（pc=0x7c901010）
    0x7c900ff0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    0x7c901000：90 90 90 90 90 64 8b 0d 18 00 00 00 8b 54 24 04
    0x7c901010：83 7a 14 00 75 4f f0 ff 42 04 75 19 8b 41 24 89
    0x7c901020：42 0c c7 42 08 01 00 00 00 33 c0 c2 04 00 8d a4

    注册到内存映射：

    EAX=0x00000004 是一个未知值
    EBX=0x329ab298 是一个循环
    {方法}
     - 类：{其他类}
    ECX=0x7ffad000 是未知值
    EDX=0x00000004 是一个未知值
    ESP=0x0329ea48 指向线程堆栈：0x03054400
    EBP=0x0329ea60 指向线程堆栈：0x03054400
    ESI=0x00000000 是未知值
    EDI=0x03401590 是未知值

    堆栈：[0x03250000,0x032a0000]，sp=0x0329ea48，可用空间=314k
    本机帧：（J=编译的 Java 代码，j=解释的，Vv=VM 代码，C=本机代码）
    C [ntdll.dll+0x1010] RtlEnterCriticalSection+0xb
    C [ODBC32.dll+0x2c5d] MpHeapAlloc+0x452
    C [ODBC32.dll+0x5fa0] SQLSetStmtAttrW+0xfeb
    C [ODBC32.dll+0x740e] SQLAllocStmt+0x21
    C [JdbcOdbc.dll+0x124e] Java_sun_jdbc_odbc_JdbcOdbc_allocStmt+0x28
    j sun.jdbc.odbc.JdbcOdbc.allocStmt(J[B)J+0
    j sun.jdbc.odbc.JdbcOdbc.SQLAllocStmt(J)J+47
    j sun.jdbc.odbc.JdbcOdbcConnection.createStatement(II)Ljava/sql/Statement;+27
    j sun.jdbc.odbc.JdbcOdbcConnection.createStatement()Ljava/sql/Statement;+7
    j AddLeave.find()V+37
    j AddLeave.actionPerformed(Ljava/awt/event/ActionEvent;)V+17
    j javax.swing.AbstractButton.fireActionPerformed(Ljava/awt/event/ActionEvent;)V+84
    j javax.swing.AbstractButton$Handler.actionPerformed(Ljava/awt/event/ActionEvent;)V+5
    j javax.swing.DefaultButtonModel.fireActionPerformed(Ljava/awt/event/ActionEvent;)V+35
    j javax.swing.DefaultButtonModel.setPressed(Z)V+117
    j javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Ljava/awt/event/MouseEvent;)V+35
    j java.awt.Component.processMouseEvent(Ljava/awt/event/MouseEvent;)V+64
    j javax.swing.JComponent.processMouseEvent(Ljava/awt/event/MouseEvent;)V+23
    j java.awt.Component.processEvent(Ljava/awt/AWTEvent;)V+81
    j java.awt.Container.processEvent(Ljava/awt/AWTEvent;)V+18
    j java.awt.Component.dispatchEventImpl(Ljava/awt/AWTEvent;)V+570
    j java.awt.Container.dispatchEventImpl(Ljava/awt/AWTEvent;)V+42
    j java.awt.Component.dispatchEvent(Ljava/awt/AWTEvent;)V+2
    j java.awt.LightweightDispatcher.retargetMouseEvent(Ljava/awt/Component;ILjava/awt/event/Mous eEvent;)V+320
    j java.awt.LightweightDispatcher.processMouseEvent(Ljava/awt/event/MouseEvent;)Z+139
    j java.awt.LightweightDispatcher.dispatchEvent(Ljava/awt/AWTEvent;)Z+50
    j java.awt.Container.dispatchEventImpl(Ljava/awt/AWTEvent;)V+12
    j java.awt.Window.dispatchEventImpl(Ljava/awt/AWTEvent;)V+65
    j java.awt.Component.dispatchEvent(Ljava/awt/AWTEvent;)V+2
    j java.awt.EventQueue.dispatchEventImpl(Ljava/awt/AWTEvent;Ljava/lang/Object;)V+41
    j java.awt.EventQueue.access$000(Ljava/awt/EventQueue;Ljava/awt/AWTEvent;Ljava/lang/Object;)V+3
    j java.awt.EventQueue$1.run()Ljava/lang/Void;+12
    j java.awt.EventQueue$1.run()Ljava/lang/Object;+1
    v ~StubRoutines::call_stub
    V [jvm.dll+0xfac3b]
    V [jvm.dll+0x18c3a1]
    V [jvm.dll+0xfacbd]
    V [jvm.dll+0xbb654]
    C [java.dll+0x102f] Java_java_security_AccessController_doPrivileged__Ljava_security_PrivilegedAction_2Ljava_security_AccessControlContext_2+0x17
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/security/AccessControlContext;)Ljava/lang/Objec t;+28
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+6
    j java.awt.EventQueue$2.run()Ljava/lang/Void;+11
    j java.awt.EventQueue$2.run()Ljava/lang/Object;+1
    v ~StubRoutines::call_stub
    V [jvm.dll+0xfac3b]
    V [jvm.dll+0x18c3a1]
    V [jvm.dll+0xfacbd]
    V [jvm.dll+0xbb654]
    C [java.dll+0x102f] Java_java_security_AccessController_doPrivileged__Ljava_security_PrivilegedAction_2Ljava_se curity_AccessControlContext_2+0x17
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/security/AccessControlContext;)Ljava/lang/Object;+28
    j java.awt.EventQueue.dispatchEvent(Ljava/awt/AWTEvent;)V+73
    j java.awt.EventDispatchThread.pumpOneEventForFilters(I)Z+204
    j java.awt.EventDispatchThread.pumpEventsForFilter(ILjava/awt/Conditional;Ljava/awt/EventFilter;)V+30
    j java.awt.EventDispatchThread.pumpEventsForHierarchy(ILjava/awt/Conditional;Ljava/awt/Component;)V+11
    j java.awt.EventDispatchThread.pumpEvents(ILjava/awt/Conditional;)V+4
    j java.awt.EventDispatchThread.pumpEvents(Ljava/awt/Conditional;)V+3
    j java.awt.EventDispatchThread.run()V+9
    v ~StubRoutines::call_stub
    V [jvm.dll+0xfac3b]
    V [jvm.dll+0x18c3a1]
    V [jvm.dll+0xfade1]
    V [jvm.dll+0xfae3b]
    V [jvm.dll+0xb5569]
    V [jvm.dll+0x118f14]
    V [jvm.dll+0x140ffc]
    C [msvcr71.dll+0x9565] endthreadex+0xa0
    C [kernel32.dll+0xb50b] GetModuleFileNameA+0x1b4

    Java 框架：（J=编译的 Java 代码，j=解释的，Vv=VM 代码）
    j sun.jdbc.odbc.JdbcOdbc.allocStmt(J[B)J+0
    j sun.jdbc.odbc.JdbcOdbc.SQLAllocStmt(J)J+47
    j sun.jdbc.odbc.JdbcOdbcConnection.createStatement(II)Ljava/sql/Statement;+27
    j sun.jdbc.odbc.JdbcOdbcConnection.createStatement()Ljava/sql/Statement;+7
    j AddLeave.find()V+37
    j AddLeave.actionPerformed(Ljava/awt/event/ActionEvent;)V+17
    j javax.swing.AbstractButton.fireActionPerformed(Ljava/awt/event/ActionEvent;)V+84
    j javax.swing.AbstractButton$Handler.actionPerformed(Ljava/awt/event/ActionEvent;)V+5
    j javax.swing.DefaultButtonModel.fireActionPerformed(Ljava/awt/event/ActionEvent;)V+35
    j javax.swing.DefaultButtonModel.setPressed(Z)V+117
    j javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Ljava/awt/event/MouseEvent;)V+35
    j java.awt.Component.processMouseEvent(Ljava/awt/event/MouseEvent;)V+64
    j javax.swing.JComponent.processMouseEvent(Ljava/awt/event/MouseEvent;)V+23
    j java.awt.Component.processEvent(Ljava/awt/AWTEvent;)V+81
    j java.awt.Container.processEvent(Ljava/awt/AWTEvent;)V+18
    j java.awt.Component.dispatchEventImpl(Ljava/awt/AWTEvent;)V+570
    j java.awt.Container.dispatchEventImpl(Ljava/awt/AWTEvent;)V+42
    j java.awt.Component.dispatchEvent(Ljava/awt/AWTEvent;)V+2
    j java.awt.LightweightDispatcher.retargetMouseEvent(Ljava/awt/Component;ILjava/awt/event/MouseEvent;)V+320
    j java.awt.LightweightDispatcher.processMouseEvent(Ljava/awt/event/MouseEvent;)Z+139
    j java.awt.LightweightDispatcher.dispatchEvent(Ljava/awt/AWTEvent;)Z+50
    j java.awt.Container.dispatchEventImpl(Ljava/awt/AWTEvent;)V+12
    j java.awt.Window.dispatchEventImpl(Ljava/awt/AWTEvent;)V+65
    j java.awt.Component.dispatchEvent(Ljava/awt/AWTEvent;)V+2
    j java.awt.EventQueue.dispatchEventImpl(Ljava/awt/AWTEvent;Ljava/lang/Object;)V+41
    j java.awt.EventQueue.access$000(Ljava/awt/EventQueue;Ljava/awt/AWTEvent;Ljava/lang/Object;)V+3
    j java.awt.EventQueue$1.run()Ljava/lang/Void;+12
    j java.awt.EventQueue$1.run()Ljava/lang/Object;+1
    v ~StubRoutines::call_stub
    j java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+0
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/security/AccessControlContext;)Ljava/lang/Object;+28
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+6
    j java.awt.EventQueue$2.run()Ljava/lang/Void;+11
    j java.awt.EventQueue$2.run()Ljava/lang/Object;+1
    v ~StubRoutines::call_stub
    j java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+0
    j java.security.AccessControlContext$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/security/AccessControlContext;)Ljava/lang/Object;+28
    j java.awt.EventQueue.dispatchEvent(Ljava/awt/AWTEvent;)V+73
    j java.awt.EventDispatchThread.pumpOneEventForFilters(I)Z+204
    j java.awt.EventDispatchThread.pumpEventsForFilter(ILjava/awt/Conditional;Ljava/awt/EventFilter;)V+30
    j java.awt.EventDispatchThread.pumpEventsForHierarchy(ILjava/awt/Conditional;Ljava/awt/Component;)V+11
    j java.awt.EventDispatchThread.pumpEvents(ILjava/awt/Conditional;)V+4
    j java.awt.EventDispatchThread.pumpEvents(Ljava/awt/Conditional;)V+3
    j java.awt.EventDispatchThread.run()V+9
    v ~StubRoutines::call_stub

    -  -  -  -  -  -  - - 过程  -  -  -  -  -  -  - -

    Java 线程：（=> 当前线程）
      0x0312dc00 JavaThread "TimerQueue" 守护进程 [_thread_blocked, id=3508, stack(0x03540000,0x03590000)]
      0x002a6400 JavaThread "DestroyJavaVM" [_thread_blocked, id=3588, stack(0x008c0000,0x00910000)]
     0x0308f400 JavaThread“D3D 屏幕更新程序”守护进程 [_thread_blocked, id=3808, stack(0x03370000,0x033c0000)]
    => 0x03054400 JavaThread "AWT-EventQueue-0" [_thread_in_native, id=3732, stack(0x03250000,0x032a0000)]
      0x02b8f800 JavaThread "AWT-Windows" 守护进程 [_thread_in_native, id=380, stack(0x02f90000,0x02fe0000)]
      0x02b8e400 JavaThread "AWT-Shutdown" [_thread_blocked, id=3368, stack(0x02f40000,0x02f90000)]
      0x02b8cc00 JavaThread "Java2D Disposer" 守护进程 [_thread_blocked, id=972, stack(0x02ef0000,0x02f40000)]
      0x02b48800 JavaThread“低内存检测器”守护进程 [_thread_blocked, id=1524, stack(0x02dc0000,0x02e10000)]
      0x02b43400 JavaThread "C1 CompilerThread0" 守护进程 [_thread_blocked, id=3272, stack(0x02d70000,0x02dc0000)]
      0x02b41000 JavaThread“附加侦听器”守护进程 [_thread_blocked, id=1364, stack(0x02d20000,0x02d70000)]
      0x02b3f800 JavaThread“信号调度程序”守护进程 [_thread_blocked, id=2804, stack(0x02cd0000,0x02d20000)]
      0x02b38400 JavaThread“终结器”守护进程 [_thread_blocked, id=3164, stack(0x02c80000,0x02cd0000)]
      0x02b36c00 JavaThread“引用处理程序”守护进程 [_thread_blocked, id=1656, stack(0x02c30000,0x02c80000)]

     其他主题：
      0x02afa000 VMThread [堆栈：0x02be0000,0x02c30000] [id=1988]
      0x02b4b400 WatcherThread [堆栈：0x02e10000,0x02e60000] [id=956]

     VM 状态：不在安全点（正常执行）

     VM Mutex/Monitor 当前由一个线程拥有：无

     堆
    def 新一代总 4928K，使用 2084K [0x22970000, 0x22ec0000, 0x27ec0000)
    伊甸园空间 4416K, 47% 已使用 [0x22970000, 0x22b791d8, 0x22dc0000)
    从空间 512K, 0% 使用 [0x22dc0000, 0x22dc0000, 0x22e40000)
     到空间 512K, 0% 已使用 [0x22e40000, 0x22e40000, 0x22ec0000)
    终身代总计 10944K，已使用 0K [0x27ec0000, 0x28970000, 0x32970000)
     空间 10944K, 0% 已使用 [0x27ec0000, 0x27ec0000, 0x27ec0200, 0x28970000)
     压缩 perm gen 总计 12288K，使用 764K [0x32970000, 0x33570000, 0x36970000)
     空间 12288K，已使用 6% [0x32970000, 0x32a2f0f0, 0x32a2f200, 0x33570000)
     ro 空间 10240K, 51% 已使用 [0x36970000, 0x36e9e318, 0x36e9e400, 0x37370000)
     rw 空间 12288K, 55% 已使用 [0x37370000, 0x37a0a088, 0x37a0a200, 0x37f70000)

    代码缓存 [0x00910000, 0x009b0000, 0x02910000)
     total_blobs=316 nmethods=92 适配器=160 free_code_cache=32927040 maximum_free_block=0

    动态库：
    0x00400000 - 0x00425000 C:\WINDOWS\system32\java.exe
    0x7c900000 - 0x7c9b0000 C:\WINDOWS\system32\ntdll.dll
    0x7c800000 - 0x7c8f4000 C:\WINDOWS\system32\kernel32.dll
    0x77dd0000 - 0x77e6b000 C:\WINDOWS\system32\ADVAPI32.dll
    0x77e70000 - 0x77f01000 C:\WINDOWS\system32\RPCRT4.dll
    0x7c340000 - 0x7c396000 C:\Program Files\Java\jre6\bin\msvcr71.dll
    0x6d7f0000 - 0x6da9f000 C:\Program Files\Java\jre6\bin\client\jvm.dll
    0x77d40000 - 0x77dd0000 C:\WINDOWS\system32\USER32.dll
     0x77f10000 - 0x77f56000 C:\WINDOWS\system32\GDI32.dll
    0x76b40000 - 0x76b6d000 C:\WINDOWS\system32\WINMM.dll
    0x6d7a0000 - 0x6d7ac000 C:\Program Files\Java\jre6\bin\verify.dll
    0x6d320000 - 0x6d33f000 C:\Program Files\Java\jre6\bin\java.dll
    0x6d7e0000 - 0x6d7ef000 C:\Program Files\Java\jre6\bin\zip.dll
    0x6d000000 - 0x6d14c000 C:\Program Files\Java\jre6\bin\awt.dll
     0x73000000 - 0x73026000 C:\WINDOWS\system32\WINSPOOL.DRV
    0x77c10000 - 0x77c68000 C:\WINDOWS\system32\msvcrt.dll
    0x76390000 - 0x763ad000 C:\WINDOWS\system32\IMM32.dll
    0x774e0000 - 0x7761c000 C:\WINDOWS\system32\ole32.dll
    0x773d0000 - 0x774d2000 C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.2180_x-ww_a84f1ff9\COMCTL32.dll
    0x77f60000 - 0x77fd6000 C:\WINDOWS\system32\SHLWAPI.dll
    0x5ad70000 - 0x5ada8000 C:\WINDOWS\system32\uxtheme.dll
    0x6d230000 - 0x6d27f000 C:\Program Files\Java\jre6\bin\fontmanager.dll
    0x74720000 - 0x7476b000 C:\WINDOWS\system32\MSCTF.dll
    0x4fdd0000 - 0x4ff76000 C:\WINDOWS\system32\d3d9.dll
    0x03020000 - 0x03026000 C:\WINDOWS\system32\d3d8thk.dll
    0x77c00000 - 0x77c08000 C:\WINDOWS\system32\VERSION.dll
    0x7c9c0000 - 0x7d1d4000 C:\WINDOWS\system32\shell32.dll
    0x6d600000 - 0x6d613000 C:\Program Files\Java\jre6\bin\net.dll
    0x71ab0000 - 0x71ac7000 C:\WINDOWS\system32\WS2_32.dll
     0x71aa0000 - 0x71aa8000 C:\WINDOWS\system32\WS2HELP.dll
    0x6d620000 - 0x6d629000 C:\Program Files\Java\jre6\bin\nio.dll
    0x77120000 - 0x771ac000 C:\WINDOWS\system32\OLEAUT32.DLL
    0x6d360000 - 0x6d36d000 C:\Program Files\Java\jre6\bin\JdbcOdbc.dll
    0x74320000 - 0x7435d000 C:\WINDOWS\system32\ODBC32.dll
    0x763b0000 - 0x763f9000 C:\WINDOWS\system32\comdlg32.dll
    0x20000000 - 0x20017000 C:\WINDOWS\system32\odbcint.dll
    0x032e0000 - 0x032e5000 C:\WINDOWS\system32\msorc32r.dll
    0x10000000 - 0x10061000 C:\oracle\app\oracle\product\10.2.0\server\bin\oci.dll
    0x76bf0000 - 0x76bfb000 C:\WINDOWS\system32\PSAPI.DLL
    0x61c20000 - 0x61e73000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\ORACLIENT10.DLL
     0x60870000 - 0x60956000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oracore10.dll
     0x60a80000 - 0x60b46000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranls10.dll
    0x63690000 - 0x636a8000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraunls10.dll
    0x60eb0000 - 0x60eb7000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orauts.dll
    0x636b0000 - 0x636b6000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oravsn10.dll
     0x60fa0000 - 0x61092000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oracommon10.dll
    0x60300000 - 0x60858000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orageneric10.dll
    0x63430000 - 0x63457000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orasnls10.dll
    0x035a0000 - 0x0372c000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraxml10.dll
    0x03730000 - 0x03741000 C:\WINDOWS\system32\MSVCIRT.dll
    0x60960000 - 0x60a6d000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oran10.dll
    0x62740000 - 0x6277d000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranl10.dll
    0x62790000 - 0x627a7000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranldap10.dll
    0x627f0000 - 0x628f9000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orannzsbb10.dll
    0x62530000 - 0x62583000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraldapclnt10.dll
    0x62670000 - 0x6268b000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orancrypt10.dll
    0x71ad0000 - 0x71ad9000 C:\WINDOWS\system32\WSOCK32.dll
    0x62920000 - 0x6296c000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranro10.dll
    0x626b0000 - 0x626b7000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranhost10.dll
    0x62660000 - 0x62666000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orancds10.dll
    0x629c0000 - 0x629c8000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orantns10.dll
    0x60b50000 - 0x60ea9000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orapls10.dll
    0x63420000 - 0x63429000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraslax10.dll
    0x63080000 - 0x63284000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraplp10.dll
    0x61ed0000 - 0x61f5b000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orahasgen10.dll
    0x62ab0000 - 0x62b1a000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraocr10.dll
    0x62b20000 - 0x62b60000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oraocrb10.dll
    0x5b860000 - 0x5b8b4000 C:\WINDOWS\system32\NETAPI32.dll
    0x62980000 - 0x62990000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orantcp10.dll
    0x63520000 - 0x635ba000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\orasql10.dll
    0x5fe80000 - 0x5fe9b000 C:\WINDOWS\system32\odbccp32.dll
    0x77fe0000 - 0x77ff1000 C:\WINDOWS\system32\Secur32.dll
    0x62650000 - 0x62659000 C:\oraclexe\app\oracle\product\10.2.0\server\bin\oranbeq10.dll
    0x71f80000 - 0x71f84000 C:\WINDOWS\system32\security.dll
    0x77c70000 - 0x77c93000 C:\WINDOWS\system32\msv1_0.dll
     0x76d60000 - 0x76d79000 C:\WINDOWS\system32\iphlpapi.dll

    虚拟机参数：
     java_command: AddLeave
     启动器类型：SUN_STANDARD

     环境变量：
     类路径=。
   PATH=C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WIN DOWS\System32\Wbem;C:\Program Files\Java \jdk1.6.0\bin;C:\Program Files\Common Files\Nero\Lib\
    用户名=苏南达
    操作系统=Windows_NT
    PROCESSOR_IDENTIFIER=x86 Family 6 Model 15 Stepping 13, GenuineIntel

    -  -  -  -  -  -  - - 系统  -  -  -  -  -  -  - -

     操作系统：Windows XP Build 2600 Service Pack 2

     CPU：共 2 个（每个 cpu 2 个内核，每个内核 1 个线程）系列 6 型号 15 步进 13、cmov、cx8、fxsr、mmx、sse、sse2、sse3、ssse3

    内存：4k 页，物理 1045684k（346004k 空闲），交换 2517544k（1203440k 空闲）

    vm_info：适用于 windows-x86 JRE (1.6.0_31-b05) 的 Java HotSpot(TM) 客户端 VM (20.6-b01)，由“java_re”和 MS VC++ 7.1 (VS2003) 于 2012 年 2 月 3 日 18:44:09 构建

    时间：2012年4月8日星期日15:46:59
    经过时间：9秒

```

“Demo”是数据库的名称，它有 4 列，即 empid,Fname,Lname,designation。该程序的工作原理是，当我输入员工 ID 时，它会从数据库中检索剩余数据。由于我没有添加部门 ID 列，因此我没有从数据库中获取该列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:26:35.673

您应该使用适合您的 Oracle 数据库版本的[Oracle JDBC 驱动程序；](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)这些通常是纯 Java。[JDBC-ODBC 桥驱动程序](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/bridge.doc.html)有很大的限制，包括 JNI 依赖性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:07:37.233

*当 JNI（ Java 本地接口*）代码出现问题时，我通常会看到这些错误，即这里，可能是 JDBC（*Java 数据库连接*）驱动程序`ODBC32.dll`。您确定为您的平台使用正确版本的 JDBC 驱动程序吗？尤其要检查您在 32 位操作系统（*操作系统*）上使用的是 32 位版本，而不是 64 位版本（反之亦然）。

`The crash happened outside the Java Virtual Machine in native code.`

# ios - 减少 iOS 后台位置电池使用量

> ID：10062264
> 
> 赞同：19
> 
> 时间：2012-04-08T10:57:07.490
> 
> 标签：ios, background, gps, location, power-management

我正在开发一个理想情况下需要在后台运行定位服务的 iOS 应用程序。我已经测试了重要的位置，但这还不够准确。准确的位置是完美的，但这会消耗太多的电池寿命以使应用程序可行。

为了解决这个电池问题，我想我找到了一个使用`NSTimer`inside的解决方案`UIApplication:beginBackgroundTaskWithExpirationHandler:`。这会打开位置然后立即再次关闭，这会触发位置更新并重置`backgroundTimeRemaining`.

但是，即使该位置每 9 分钟仅打开一秒钟，此解决方案仍会消耗大量电池 - 每 3-4 小时消耗 15%-20%。除了这个计时器之外，该应用程序没有在后台运行任何其他东西。我什至尝试在进入后台时释放所有视图，以确保没有任何东西坐着消耗电池。

检查仪器内部，我发现该应用程序在此等待状态下使用了 0.0% 的 CPU 和 14 MB 内存。在这一点上，我有点不知所措，特别是因为与 24/7 运行相比，每 540 秒运行 GPS 1 秒并不能显着减少电池消耗。

我已经开始编译以下问题，这可能会导致问题，我希望有人有答案或想法......

*   以这种方式运行应用程序是否会阻止手机进入某种低功耗模式？

*   启动 GPS 会消耗大量电力吗？

*   GPS 关闭后是否还会继续运行一段时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:17:29.693

是的，WWDC 2011 Session 312“iOS Performance and Power Optimization with Instruments”在大约 45 分钟的时间里涵盖了这一点。

当您使用完 GPS 后，它可以保持活动状态长达 10 秒，并且活动的无线电会唤醒设备并在活动时防止设备“休眠”。

您将能够使用 Instruments 中的“能量诊断”模板看到这一点。

# iphone - 初始化视图控制器

> ID：10062269
> 
> 赞同：2
> 
> 时间：2012-04-08T10:58:50.033
> 
> 标签：iphone, ios

> 当一个视图控制器第一次被实例化时，它通常会创建或加载它在其生命周期内需要的对象。它不应创建与显示内容相关的视图或对象。它应该专注于实现其他关键行为所需的数据对象和对象。

以上来自iOS参考：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10)

该文档继续描述了使用 Storyboard 的视图加载序列。

我的问题是：

1

由于视图控制器将与包含视图对象的 nib 文件相关联；而且它的“viewDidLoad”方法似乎是为在加载时配置视图对象而设计的。那么文档的建议应该如何：

“不应创建与显示内容相关的视图或对象”

被解释？

2

问题 1 是否与我们是否使用 Storyboard 相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:27:41.647

您引用的声明与移动设备限制和设计效率有很大关系。它与情节提要特别无关。

通过“实例化”，文档意味着`-(id)init;`调用。发生这种情况时，控制器“准备关键数据，但不创建视图”。这意味着控制器评估 xib 文件，并在初始化时构造视图的内部分层表示。此步骤仅涉及 RAM 和 CPU。

视图控制器仅在将其推入导航控制器或视图转换动画（即`viewDidLoad`启动时）时创建视图。这是因为视图很昂贵。它涉及 GPU 和视频 RAM。视频 RAM 比 RAM 更受限制，当不需要显示时仅创建视图（VRAM 中的后台缓冲区）效率不高。

如果您查看您的项目，您应该会发现一些视图控制器正在初始化但不需要立即显示。如果没有这样的设计，VRAM 将无缘无故地快速耗尽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:20:41.717

不确定我的问题是否正确，但这是我的解释：

1.  `init`化和视图创建是两个独立的步骤。假设我有一个带有表格的视图控制器，`IBOutlet`它应该显示存储在核心数据中的配方列表。在我的初始化方法中，我会从 CoreData 获取数据并将其存储在数组或获取的结果控制器中。我不需要表格，因此我对属性不做任何事情（如果还没有视图，则`self.view`调用它）。`viewDidLoad`在`viewDidLoad`我调用`[tableView reloadData]`重绘单元格时，它们会显示来自控制器初始化程序中创建的控制器的数据。

2.  我不认为它是相关的，但故事板应该只是你的视图控制器的脚手架，用单个文件替换单独的笔尖。

# file - 如何在 Java/JavaFX 中定位文件（路径）

> ID：10062270
> 
> 赞同：2
> 
> 时间：2012-04-08T10:59:09.910
> 
> 标签：file, path, media, javafx-2

这可能是一个简单的，但我似乎无法让它工作。我正在用 JavaFX 制作视频播放器，但我不知道如何定位要播放的文件（我不知道正确的语法）。预先感谢您的帮助。这是我正在尝试运行的代码示例>

```
 Media media = new Media("trailers/trailer.mp4");
    MediaPlayer player = new MediaPlayer(media);
    MediaView view = new MediaView(player); 
```

顺便说一句，该文件位于项目文件夹中，然后是预告片/预告片.mp4。哦，我正在运行 Windows。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T03:36:08.790

1 如果媒体源文件在同一个项目包中，请使用此选项。

```
 Media media = new Media("trailer.mp4"); 
```

2 如果媒体源文件在同一个项目子包中，请使用这个[项目主包中名称为“trailers”的包]

```
 Media media = new Media("trailers/trailer.mp4"); 
```

3 如果媒体源文件位于其他位置[使用完整路径]，请使用此选项。

```
 Media media = new Media("file:///e:/trailers/trailer.mp4"); 
```

或者

```
 Media media = new Media("file:///E:/trailers/trailer.mp4"); 
```

注意：应使用 3 个斜杠，即“file:///”以避免错误“MediaException: MEDIA_INACCESSIBLE: e/E”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T20:59:33.200

将您的文件放入源文件夹并将其作为资源加载：

```
Media media = new Media(getClass().getResource("trailer.mp4")); 
```

或使用完整路径

```
Media media = new Media("file://c:/trailers/trailer.mp4")); 
```

另外，请注意 JavaFX 2.0 仅支持 FLV 编解码器。对于 mp4（使用 H.264 编解码器），您需要使用 JavaFX 2.1 或更高版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-24T07:42:21.773

如果要从项目包中加载媒体：

```
File file=new File("trailer.mp4");
Media media=new Media(file.toURI().toString()) 
```

# c# - 具有 Observable.FromAsyncPattern 的状态对象

> ID：10062274
> 
> 赞同：0
> 
> 时间：2012-04-08T10:59:49.593
> 
> 标签：c#, asynchronous, system.reactive

我正在使用 Rx 框架来执行异步请求，这一切正常，但是我需要能够在请求/响应之间传递一个状态对象，因为一旦我处理了响应，我需要知道一些额外的信息仅在发出请求时才知道，因此我想以某种方式传入状态对象。

目前我正在使用一种方法：

```
 public void ProcessGetRequest(WebRequest request, Action<WebResponse> handle, Action<Exception> error, int delaySeconds = 0)
        {
            request.Method = "GET";

            Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse)().Delay(new TimeSpan(0, 0, delaySeconds)).ObserveOnDispatcher().SubscribeOnDispatcher().Subscribe(handle, error);
        } 
```

在 request.BeginGetResponse 方法上，我知道您可以传递一个状态对象，并通过返回的 IAsyncResult 对象访问该状态对象，但无法在上面的 Rx / Observable 框架中找到一种方法。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T01:23:52.303

这应该很简单。通过闭包传递状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:23:16.063

最终做的如下：

```
 public void ProcessGetRequest<T>(WebRequest request, Action<WebResponse,T> handle, Action<Exception,T> error, T state, int delaySeconds = 0)
        {
            request.Method = "GET";

            Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse)().Delay(new TimeSpan(0, 0, delaySeconds)).ObserveOnDispatcher().SubscribeOnDispatcher().Subscribe(x=>handle(x,state),y=>error(y,state));
        } 
```

# actionscript-3 - 使用 Stage3D 渲染不同对象时使用顶点缓冲区的最佳方法是什么

> ID：10062275
> 
> 赞同：4
> 
> 时间：2012-04-08T10:59:59.283
> 
> 标签：actionscript-3, flash, stage3d

我有一组简单的二维对象，主要由两个三角形组成。尽管对象非常简单，但每个对象都是使用模板操作绘制的，因此每个对象都需要自己`drawTriangles()`调用。

存储和处理这些对象及其顶点和索引缓冲区的最佳方法是什么？

我可以想到几种不同的方法：

1.  在启动时创建一个大的顶点和索引缓冲区并将每个对象添加到其中，例如：

    ```
    public function initialize():void{
        for each(object in objectList){
            vertexData.push(object.vertices);
            indexData.push(triangle1, triangle2);
        }

        indices  = context3D.createIndexBuffer( numTriangles * 3 );
        vertices = context3D.createVertexBuffer( numVertices, dataPerVertex );
        indices.uploadFromVector( indexData, 0, numIndices );
        vertices.uploadFromVector( vertexData, 0, numVertices );
    } 
    ```

    在所有对象的渲染循环期间，检查哪些对象在屏幕上可见并更新它们的顶点。然后重新上传整个顶点缓冲区。然后循环遍历可见对象并使用单独调用绘制每个对象的三角形`drawTriangles()`

    ```
    public function onRender():void{
        for each(object in objectList){
            if(object.visibleOnScreen)
                object.updateVertexData();
        }

        vertices.uploadFromVector( vertexData, 0, numVertices );

        for each(object in objectsOnScreen){
            drawTriangles(indices, object.vertexDataOffset, object.numTriangles);
        }
    } 
    ```

2.  除了仅在需要时重新上传每个对象的顶点数据之外，您还可以执行类似于数字 1 的操作：

    ```
    public function onRender():void{
        for each(object in objectList){
            if(object.visibleOnScreen){
                if(object.hasChanged)
                    vertices.uploadFromVector( vertexData, object.vertexDataOffset, object.numTriangles );
                drawTriangles(indices, object.vertexDataOffset, object.numTriangles);
            }
        }
    } 
    ```

3.  您还可以创建一个新的顶点缓冲区，该缓冲区仅包含每帧上的可见对象：

    ```
    public function onRender():void{
        for each(object in objectList){
            if(object.visibleOnScreen){
                vertexData.push(object.vertices);
                indexData.push(triangle1, triangle2);
            }
        }

        indices  = context3D.createIndexBuffer( numTriangles * 3 );
        vertices = context3D.createVertexBuffer( numVertices, dataPerVertex );
        indices.uploadFromVector( indexData, 0, numIndices );
        vertices.uploadFromVector( vertexData, 0, numVertices );

        for each(object in objectsOnScreen){
            drawTriangles(indices, object.vertexDataOffset, object.numTriangles);
        }
    } 
    ```

4.  另一种选择是为每个对象创建单独的顶点缓冲区：

    ```
    public function initialize():void{
        for each(object in objectList){
            object.indices  = context3D.createIndexBuffer( object.numTriangles * 3 );
            object.vertices = context3D.createVertexBuffer( object.numVertices, dataPerVertex );
        }
    }

    public function onRender():void{
        for each(object in objectList){
            if(object.visibleOnScreen){
                if(object.hasChanged)
                    object.vertices.uploadFromVector( object.vertexData, 0, object.numTriangles );
                drawTriangles(indices, 0, object.numTriangles);
            }
        }
    } 
    ```

我可以想象选项 1 会很慢，因为每个帧都需要上传整个顶点缓冲区。
选项 2 的优点是它只需要上传已更改但可能会遭受多次调用的顶点数据`uploadFromVector`。

## 更新

我看过 Starling 框架源代码，特别是`QuadBatch`类： http:
[//gamua.com/starling/](http://gamua.com/starling/)
[https://github.com/PrimaryFeather/Starling-Framework](https://github.com/PrimaryFeather/Starling-Framework)

似乎所有顶点都是事先手动转换的，并且每帧都会重建和上传整个顶点缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T17:38:28.010

无论如何，您都需要在每一帧上上传数据，因为 Stage3D 需要知道在哪里绘制什么。最终优化从减少绘图调用开始。您可以通过对未更改的数据使用 byteArray 而不是对已更改的数据使用 Vector 来加速数据的上传。上传向量较慢但设置向量数据较快，上传字节数组较快但设置字节数组数据较慢（因此仅用于缓存数据）。您也不需要每次都创建索引和顶点缓冲区。以舒适的长度创建它们一次，仅当长度变得太小时才创建新的。所有这一切都应该很好地加速一切，但绘制调用的数量仍然会减慢一切（在 25 次以上的绘制调用之后，你应该开始看到不利的一面）。

# html - html form button link to url

> ID：10062281
> 
> 赞同：1
> 
> 时间：2012-04-08T11:01:42.257
> 
> 标签：html

I have a simple search form with a box and a button.

```
<form action = "/search/" method = "get">
<input id = "search_box" type ="text" name = "location" value placeholder = "Where are you?" />
<input id = "search_button" type="submit" value = 'Go' />
</form> 
```

This sends me to `/search/?location=whatever`

How do I get this to send me to `/search/whatever` instead? - i.e. no GET data, just an URL.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:14:09.083

You cannot rewrite the form post methods like that. A way to do this efficiently is through a `.htaccess` at the root.

```
RewriteEngine On
RewriteRule ^search\/?location=(.*)$ search/$1 
```

This changes `/search/?location=whatever` to `/search/whatever`

Or, If you are looking for a complicated JS solution. Here is one using jQuery

```
$("form").submit(function() {
    var search = $("#search_box").val(); //get the element
    $(this).attr("action", $(this).attr("action")+search);  //attach to the post url
    $("#search_id").remove();  //remove the element, so it doesnot get sent
    console.log($(this).attr('action')); //check the console, if the action was changed and yes it was
    //return false; //continues the post to the new url if commented
}); 
```

### [Demo](http://jsfiddle.net/Starx/rdJrJ/)

# sql - 查询以确定 Backup Exec 是否正在执行备份

> ID：10062284
> 
> 赞同：0
> 
> 时间：2012-04-08T11:02:04.850
> 
> 标签：sql, sql-server, backup

有谁知道确定备份执行人员是否正在备份的任何策略？我们无权访问该程序以确定它是否负责，但正在接收失败备份的警报。如果您运行`select * from dbo.backupmediaset`for System 数据库，它通常会返回正在使用的软件，但 Backup Exec 仍会返回 SQL Server。

backupmediaset 策略也不适用于任何用户数据库，因为它仅包含在 msdb 系统数据库中。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:41:09.530

您是否尝试过使用 dbo.backupset 而不是 dbo.backupmediaset？

```
SELECT TOP 20 database_name,
              type,
              backup_start_date, 
              backup_finish_date,
              compressed_backup_size,
              backup_size
FROM   msdb.dbo.backupset
ORDER  BY backup_set_id DESC; 
```

这就是我使用的，dbo.backupset 表应该有你的 SQL 服务器上运行过的所有备份的历史记录，除非有人手动清除该表，这经常被忽略。

我的博客上的更多详细信息：http: [//stevestedman.com/2012/01/latest-backups/](http://stevestedman.com/2012/01/latest-backups/)

我希望这有帮助。祝你有美好的一天！

# actionscript-3 - Flash 错误 1084：“语法错误”

> ID：10062287
> 
> 赞同：1
> 
> 时间：2012-04-08T11:02:42.227
> 
> 标签：actionscript-3, flash

嗨，我在使用 actioncropt 3.0 时在 Flash 中收到两条错误消息

```
"Topbar,Layer 'Action Layer',Frame 1,line 12 1084: syntax error: expection semicolon before add.
"Topbar,Layer 'Action Layer',Frame 1,line 12 1084: syntax error: expection rightbrace before semicolon 
```

这是我的代码，任何人都可以对实际发生的事情有所了解，感谢并帮助纠正问题。

```
clip = Number(random(7)) + 1;
while (Number(clip) <= 7)
{
   clip = Number(clip) + 1;
   Scale = Number(random(80)) + 1;
   setProperty("/star", _x, Number(random(800)) + 10);
   setProperty("/star", _rotation, Number(random(330)) + 50);
   setProperty("/star", _xscale, Scale);
   setProperty("/star", _yscale, Scale);
   setProperty("/star", _y, Number(random(800)) + 50);
   n = Number(n) + 1;
   bn = "star" add n;
   duplicateMovieClip("star", bn, n);
   set(bn add ":n", n);
} // end while
clip = "0"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:16:47.587

我不知道你从哪里得到这个语法：

```
bn = "star" add n; 
```

但我想你的意思是

```
bn = "star" + n; 
```

这就是导致错误消息的原因。

我也很惊讶您没有收到比这更多的错误消息，因为从 AS3 开始，两者`setProperty`都已`duplicateMovieClip`被弃用。此外，所有以前以下划线开头的属性（_x、_y 等）都已重命名。

也许在继续之前阅读 ActionScript 3 的变化是明智的 - 否则您将很难过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:32:10.363

您的代码在 AS2 中，转到您的发布设置并将您的脚本更改为 AS2，下面是您的脚本的编辑。

```
clip = Number(random(7)) + 1;
 while (Number(clip) <= 7)
 {
 clip = Number(clip) + 1;
 Scale = Number(random(80)) + 1;
 setProperty("/star", _x, Number(random(800)) + 10);
 setProperty("/star", _rotation, Number(random(330)) + 50);
 setProperty("/star", _xscale, Scale);
 setProperty("/star", _yscale, Scale);
 setProperty("/star", _y, Number(random(800)) + 50);
 n = Number(n) + 1;
 bn = "star" + n;
 duplicateMovieClip("star", bn, n);
 set(bn + ":n", n);
 } // end while
 clip = "0"; 
```

如前所述，我认为您应该转到 Adob​​e Docs 以检查它们对 AS2/AS3 的更改，它们有很多更改，包括不允许将代码或 sdcripts 直接放置在符号和按钮上，属性名称也已更改：例如：

```
_root // can no longer be targeted in this syntax
_xscale = scaleX // the underscores have been removed
                 // and the property names have been changed 
```

希望它可以帮助你。

# perl - 如何在 Perl 中通过 SSH 获取在远程机器上执行的命令的 STDERR 和 STDOUT？

> ID：10062288
> 
> 赞同：0
> 
> 时间：2012-04-08T11:02:46.037
> 
> 标签：perl, expect

我必须通过通过 Expect 模块执行的 SSH 连接到远程机器。如果可能，我必须单独访问`STDERR`/`STDOUT`并查看输出。我可以重定向脚本的输出，例如

```
$command = "ssh <script> 2>/tmp/stderr.output"
$exp = Expect->spawn($command) or die "Cannot spawn\n";;
my @command1= $exp->expect(5); 
```

但后来我必须再次远程连接才能检查`stderr.output`。有没有一种方法可以期望单独返回`STDERR`/ `STDOUT`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:03:12.827

您可能需要考虑使用[Net::OpenSSH](http://search.cpan.org/perldoc/Net%3a%3aOpenSSH)，它提供了一种`capture2`方法：

> `($output, $errput) = $ssh->capture2(\%opts, @cmd)`
> 
> 捕获发送到远程计算机`stdout`和远程计算机`stderr`上的输出`@cmd`。

# android - Android url 连接

> ID：10062289
> 
> 赞同：1
> 
> 时间：2012-04-08T11:02:56.063
> 
> 标签：android, url

我在询问将 url 与值连接的正确方法！这是我的示例**“http://10.0.2.2/myFolder/page.php?value1=!!&value2=!!,+value1,+value2”** 我希望你能理解我在说什么，因为我是 Android 新手谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:19:26.960

另一个答案几乎是正确的，但您应该对键和值进行 URL 编码：

```
String uri = "http://" + address + "/myFolder/page.php?" + URLEncoder.encode(value1) + "=" + URLEncoder.encode(value2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:26:47.990

您可以使用[stringbuilder](http://developer.android.com/reference/java/lang/StringBuilder.html)并附加要添加的尽可能多的行和值

在你的情况下同样明智

```
StringBuilder sb = ("http://").append(address).append("/myfolder/page.php?").append(value1).append("=").append(value2); 
```

然后使用以下

```
sb.toString(); 
```

希望这可能对你有所帮助。我在我的一个项目中使用了它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:17:16.230

Jamal，您是否尝试连接字符串：“http://10.0.2.2/myFolder/page.php?value1=!!&value2=!!,+value1,+value2”？

如果是这样，请尝试以下操作：

```
String uri = "http://" + address + "/myFolder/page.php?" + value1 + "=" + value2; 
```

希望这可以帮助

# maven-3 - Neo4 示例不起作用 - 找不到类

> ID：10062290
> 
> 赞同：0
> 
> 时间：2012-04-08T11:03:03.027
> 
> 标签：maven-3, neo4j

我从教程部分复制并粘贴了一个简单的 neo4j 示例，但目前我收到了以下消息：

```
[INFO] Surefire report directory: /home/kama/ws-git/neo4jexample/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
Configuring TestNG with: org.apache.maven.surefire.testng.conf.TestNGMapConfigurator@17bd6a1
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.995 sec <<< FAILURE!

Results :

Failed tests:   firstTest(com.soebes.tutorials.Neo4JAppTest): com/soebes/tutorials/neo4jexample/RelationTypes

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0 
```

详细的错误信息：

```
java.lang.NoClassDefFoundError: com/soebes/tutorials/neo4jexample/RelationTypes
    at com.soebes.tutorials.neo4jexample.Neo4JApp.createDb(Neo4JApp.java:44)
    at com.soebes.tutorials.neo4jexample.Neo4JApp.main(Neo4JApp.java:25)
    at com.soebes.tutorials.Neo4JAppTest.firstTest(Neo4JAppTest.java:14)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:691)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:883)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1208)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:758)
    at org.testng.TestRunner.run(TestRunner.java:613)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1137)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1062)
    at org.testng.TestNG.run(TestNG.java:974)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:76)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:161)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:101)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:115)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: java.lang.ClassNotFoundException: com.soebes.tutorials.neo4jexample.RelationTypes
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

它的源代码如下所示：

```
public class Neo4JApp {

    private String greeting;

    private GraphDatabaseService graphDb;
    private Node firstNode;
    private Node secondNode;
    private Relationship relationship;

    public static void main(final String[] args) {
    Neo4JApp hello = new Neo4JApp();
    hello.createDb(args[0]);
    hello.removeData();
    hello.shutDown();
    }

    void createDb(String path) {
    clearDb(path);

    graphDb = new EmbeddedGraphDatabase(path);
    registerShutdownHook(graphDb);

    Transaction tx = graphDb.beginTx();
    try {

        firstNode = graphDb.createNode();
        firstNode.setProperty("message", "Hello, ");
        secondNode = graphDb.createNode();
        secondNode.setProperty("message", "World!");

        relationship = firstNode.createRelationshipTo(secondNode, RelationTypes.KNOWS);
        relationship.setProperty("message", "brave Neo4j ");

        System.out.print(firstNode.getProperty("message"));
        System.out.print(relationship.getProperty("message"));
        System.out.print(secondNode.getProperty("message"));

        greeting = ((String) firstNode.getProperty("message"))
            + ((String) relationship.getProperty("message"))
            + ((String) secondNode.getProperty("message"));

        tx.success();
    } finally {
        tx.finish();
    }
    }

    private void clearDb(String path) {
    try {
        FileUtils.deleteRecursively(new File(path));
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    }

    void removeData() {
    Transaction tx = graphDb.beginTx();
    try {
        firstNode.getSingleRelationship(RelationTypes.KNOWS, Direction.OUTGOING).delete();
        firstNode.delete();
        secondNode.delete();

        tx.success();
    } finally {
        tx.finish();
    }
    }

    void shutDown() {
    System.out.println();
    System.out.println("Shutting down database ...");
    graphDb.shutdown();
    }

    private static void registerShutdownHook(final GraphDatabaseService graphDb) {
    // Registers a shutdown hook for the Neo4j instance so that it
    // shuts down nicely when the VM exits (even if you "Ctrl-C" the
    // running example before it's completed)
    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
        graphDb.shutdown();
        }
    });
    } 
```

使用的类 RelationTypes 如下所示：

```
public enum RelationTypes implements RelationshipType {
    KNOWS, 
    WHOKNOWS,
} 
```

该项目可以在[github](https://github.com/khmarbaise/neo4jexample)上找到。

目前我没有看到问题？... RelationTypes 定义在正确的位置...可能有人对我有提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:23:06.343

问题是单元测试的目录不允许成为目标文件夹本身。它必须是目标下的单独文件夹。

# java - JAVA：用户启动计算机时打开应用程序

> ID：10062293
> 
> 赞同：1
> 
> 时间：2012-04-08T11:03:11.327
> 
> 标签：java, swing, checkbox

我有一个应用程序，它的目的是在用户第一次运行他们的计算机时运行。

但是，我想在应用程序上创建一个复选框，以在系统启动时启用/禁用应用程序加载。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:29:27.040

这个问题已经在 SO 前段时间讨论过：

[在 Windows 启动时自动启动 Java 应用程序的代码](https://stackoverflow.com/questions/1025807/code-for-auto-starting-a-java-application-on-windows-startup)

[java桌面应用程序的自动启动？](https://stackoverflow.com/questions/979451/auto-startup-for-java-desktop-application)

但是，也许更简单的解决方案是创建一个批处理文件，就像第一个链接中建议的那样，在用户登录时运行您的应用程序。

如果您想通过复选框启用/禁用启动，我想到的第一个也是最简单的解决方案是：您可以创建一个由复选框侦听器调用的方法，该方法编辑批处理文件并启用/禁用使用的行在批处理文件中运行应用程序。

如果您有 Windows 7，请阅读[本](http://www.sevenforums.com/tutorials/1401-startup-programs-change.html)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:09:44.167

我建议你在windows下创建一个服务。我的建议是[http://winrun4j.sourceforge.net/](http://winrun4j.sourceforge.net/)

# c++ - 指向基的指针总是<=指向派生类的指针吗？

> ID：10062299
> 
> 赞同：10
> 
> 时间：2012-04-08T11:03:54.977
> 
> 标签：c++, inheritance, casting

我想知道 C++ 标准是否保证*单*继承使对象向上“增长”，即给定 a`class Base`和 a `class Derived: public Base`，以及一个指针`Derived* ptr`，其结果在`dynamic_cast<Base*>(ptr)`数值上总是小于或等于`ptr`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T11:09:41.927

不，内存布局是实现细节。

话虽这么说，假设没有虚函数，我不知道任何实际上没有这样做的实现。如果您在中*引入*虚函数`Derived`（但在中没有），则*可以*（取决于实现）将`Base`虚表指针放在字段之前（使大于）。*`Base``Base*``Derived*`*

 *### 澄清：

上面的示例是特定于 Visual C++ 的。您可以使用以下代码检查它：

```
class Base {
    int X;
};

class Derived : public Base {
    virtual void f() {
    }
    int Y;
};

int main() {

    Derived d;
    Derived* d_ptr = &d;
    Base* b_ptr = dynamic_cast<Base*>(d_ptr); // static_cast would be enough BTW.

    bool base_smaller_or_equal = (ptrdiff_t)b_ptr <= (ptrdiff_t)d_ptr;

    return 0;

} 
```

将`base_smaller_or_equal`在`false`Visual C++ 下。从@enobayram 的评论来看，它应该`true`在 GCC 之下。

在任何情况下，**它都是一个实现细节**，不能依赖。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T11:55:27.883

不。

但是，现在还没有必要恐慌。这类问题虽然在标准 C++ 中没有完全解决，但编译器将遵循的 ABI 文档回答了此类问题。许多编译器，例如 gcc、Clang 或 icc（但*不是*VC++）都遵循[Itanium ABI](http://sourcery.mentor.com/public/cxx-abi/abi.html)。

在 Itanium ABI 中，只要您有单个非虚继承并且 Base 类有虚方法，那么 Derived 和 Base 将始终具有相同的地址。

话虽如此，这是您实际上不必担心的实现。您可以完美地编写符合 C++ 标准的代码，并且仍然可以管理您的用例。问题是 C++ 允许您将任何指针转换为`void*`和`char*`（后者作为非混叠的特定例外）并返回。您唯一需要担心的是，当您将 a`Base*`转换为 a时，`void*`您需要将其转换回 a`Base*`而不是 a `Derived*`。也就是说，你输入的类型和你返回的类型应该匹配。

然而，要（确定地）知道对象的大小要困难得多。这需要应用`sizeof`到对象的当前动态类型并且没有工具来获取它`virtually`。

我的建议是实际检测您的基类：

```
class Base {
public:
  char const* address() const { return (char const*)dynamic_cast<void const*>(this); }
  size_t offset() const { return this->address() - (char const*)this; }

  virtual size_t size() const { return sizeof(Base); } // to be overriden

  virtual ~Base() {}
}; 
```

这有助于获取您需要的所有信息（[参见演示](http://ideone.com/eqYiZ)）。请注意，使用 Itanium ABI`offset()`将始终返回`0`，但至少您没有在这里*假设*。*

# java - 是否有一些标准有效的方法来记录写入 Java 流的数据

> ID：10062300
> 
> 赞同：0
> 
> 时间：2012-04-08T11:04:14.727
> 
> 标签：java, xml, xmpp

我正在编写小型 XMPP 客户端作为大学项目。

为了生成有效的 XML 标记，我使用标准库中的 XMLStreamWriter。
出于调试目的，我想查看它写入输出流的所有内容，即通过打开的套接字将其发送到世界并将其记录到标准错误。我发现的一种可能的解决方案是创建 Writer 类的子类来构造新的 XMLStreamWriter。

类似于以下代码：

```
public XMPPWriter(final Writer out) throws XMLStreamException {
    XMLOutputFactory factory = XMLOutputFactory.newInstance();
    factory.setProperty(XMLOutputFactory.IS_REPAIRING_NAMESPACES, true);
    this.writer = factory.createXMLStreamWriter(new Writer() {

        @Override
        public void flush() throws IOException {
            System.err.println("");
            out.flush();
        }

        @Override
        public void write(char[] cbuf, int off, int len) throws IOException {
            System.err.write(String.valueOf(cbuf, off, len).getBytes());
            out.write(cbuf, off, len);
        }

        @Override
        public void close() throws IOException {
            out.close();
        }
    });
} 
```

当然，这是最简单的情况，可以通过多种方式改进此解决方案。但我想知道是否有任何标准的众所周知的方式来进行这种记录？

# php - 以字符串形式访问类中的成员 PHP

> ID：10062302
> 
> 赞同：-2
> 
> 时间：2012-04-08T11:04:29.440
> 
> 标签：php

在 PHP 中，我们可以执行以下操作吗？

```
class a{
    public $id;
} 
```

我们可以用这样的东西访问这个字段吗？

```
$x='id';
$aObj=new a();
$aObj->$x=1;//or $aObj->"id"=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:11:14.383

是的，你可以，但不鼓励。

要使用类似的东西，`$aObj->"id"=1`只需将名称放入括号中

`$aObj->{"id"} = 1;`

如果您问为什么不鼓励这样做，那很容易：它是不可预测的，无法维护的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:09:48.863

这应该是可能的：

```
class a {
    public $id;

    function getId() {
        return $this->id;
    }
}

$x = 'id';
$aObj = new a();
$aObj->$x = 500;

echo $aObj->id, " ", $aObj->getId(); 
```

给出：（`500 500`用 PHP 5.3 测试）

# html - PartialViews - 在编辑器/显示模板中不使用 Shared Site.css - ASP.NET MVC 3

> ID：10062304
> 
> 赞同：0
> 
> 时间：2012-04-08T11:04:50.203
> 
> 标签：html, css, asp.net-mvc-3, razor, partial-views

我在我的开源项目中使用[JQuery UI 选项卡功能。](http://jqueryui.com/demos/tabs/)我这样做是为了学习 MVC3（以及其他各种技术）。现在我已经完成了所有工作。问题是我在每个选项卡中的部分视图都有相关 CRUD 功能的链接。我已将这些 CRUD 视图设置为显示和编辑器模板。它没有获取`_Layout.cshtml`对 Site.css 的引用。

**编辑开始**

我在“添加视图”脚手架功能中发现，当您单击“*创建为部分视图*”框时，母版页功能会消失，即变灰，但在 Razor 中，我认为如果这是空的，它会使用`_viewstart`加载的文件布局？

**编辑结束**

这是我的带有 JQuery UI 选项卡逻辑的**Dashboard.cshtml代码：**

```
 <script type="text/javascript">
    $(document).ready(function() {
        $("#tabs").tabs();
        getContentTab (1);
    });

    function getContentTab(index) {
        var url='@Url.Content("~/SiteAdmin/AjaxGetTab")/' + index;
        var targetDiv = "#tabs-" + index;
        var ajaxLoading = "<img id='ajax-loader' src='@Url.Content("~/Content")/ajax-     loader.gif' align='left' height='28' width='28'>";

        $(targetDiv).html("<p>" + ajaxLoading + " Loading...</p>"); 
        $.ajax({
          type: 'get',
          url: url,
          cache: false,
          success: function(result) {
            $(targetDiv).html(result);
          }
        });           

    } 
```

```
 <div id="tabs">
        <ul>
            <li><a href="#tabs-1" onclick="getContentTab(1);">Transaction Type</a>  </li>
            <li><a href="#tabs-2" onclick="getContentTab(2);">Direction Type</a></li>
            <li><a href="#tabs-3" onclick="getContentTab(3);">User Type</a></li>
            <li><a href="#tabs-4" onclick="getContentTab(4);">Currency Type</a></li>
        </ul>
        <div id="tabs-1">

        </div>
        <div id="tabs-2">

        </div>
        <div id="tabs-3">

        </div>
        <div id="tabs-4">

        </div>
    </div> 
```

如果您需要知道我如何决定创建选项卡和创建列表对象，这是我的 AjaxGetTab 操作方法：

```
 /// <summary>
    /// AJAX action method to obtain the correct Tab to use.
    /// </summary>
    /// <param name="index">Tab number</param>
    /// <returns>Partial View</returns>
    public ActionResult AjaxGetTab(int id)
    {
        string partialViewName = string.Empty;
        object model = null;

        //--Decide which view and model to pass back.
        switch (id)
        {
            case 1:
                partialViewName = "_TransactionType";
                model = db.TransactionTypes.ToList();
                break;
            case 2:
                partialViewName = "_DirectionType";
                model = db.DirectionTypes.ToList();
                break;
            case 3:
                partialViewName = "_UserType";
                model = db.UserTypes.ToList();
                break;
            case 4:
                partialViewName = "_CurrencyType";
                model = db.CurrencyTypes.ToList();
                break;
            case 5:
                partialViewName = "_tabError";
                break;

        }

        return PartialView(partialViewName,model);
    } 
```

目前我正在研究**TransactionType**所以这里是`_TransctionType.cshtml`代码`PartialView`：

```
@model IEnumerable<Accounts.Models.TransactionType>
<p>
@Html.ActionLink("Create New", "CreateTransactionType")
</p>
<table>
<tr>
    <th>
        Record Status
    </th>
    <th>
        Description
    </th>
    <th>
        Created Date
    </th>
    <th>
        Amended Date
    </th>
    <th></th>
</tr>
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.RecordStatus)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Description)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CreatedDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.AmendedDate)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.id }) |
        @Html.ActionLink("Details", "Details", new { id=item.id }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.id })
    </td>
</tr> 
```

}

现在“编辑”和删除`ActionLink`有一个`EditorTemplate`，详细信息有一个`DisplayTemplate`文件夹，其中包含所需的**TransactionType.cshtml**它`_Layout`没有应用 Site.css 的这些视图。以下是“编辑”代码库中的示例代码：

**_EditTransactionType.cshtml**：

```
@model Accounts.Models.TransactionType
@using (Html.BeginForm())
{
    @Html.EditorForModel()

    <p>
        <input type="submit" value="Save" />
    </p>

 } 
```

这是位于*/Views/SiteAdmin/EditorTemplate的***TransactionType.cshtml**：

 *```
 @model Accounts.Models.TransactionType
    <fieldset>
    <legend>Transaction Type</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.RecordStatus)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.RecordStatus)
        @Html.ValidationMessageFor(model => model.RecordStatus)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>
    </fieldset> 
```

现在我可以在每个模板中添加对 Site.css 的引用，但是有没有更简洁的方法呢？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:36:31.733

_ViewStart 仅适用于渲染的视图，这取决于您如何渲染视图。EG 使用 RenderPartial 或从控制器返回 PartialView 仅返回您所定位的 PartialView 的内容（和嵌套部分）。

如果 _LayoutFile 应用于每个视图和每个局部视图，那么您最终会得到如下页面：

```
<html>
  <head />

  <body>      
    <html>
      <head />     
      <body>
        <!-- Actual Partial View Content -->
      </body>
    </html>    
  </body>
</html> 
```

渲染页面时，所有 _layout、要渲染的视图、任何部分视图和任何嵌套部分或编辑器/显示模板都被构建到单个页面中并返回给客户端，因此 _Layout 引用的任何样式表master 将应用于这个现在扁平的（部分）视图层次结构。

您是否检查了输出 HTML 以确保符合预期？视图可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:47:30.500

我真的不明白为什么您使用 jqueryui 选项卡如此复杂地添加 onclick 然后添加开关等。

```
 <div id="tabs">
        <ul>
            <li><a href="@Url.Action("TransactionType", "YourController")"><span>Transaction Type</span></a></li>
            <li><a href="@Url.Action("DirectionType", "YourController")"><span>Direction Type</span></a></li>
            <li><a href="@Url.Action("UserType", "YourController")"><span>User Type</span></a></li>
            <li><a href="@Url.Action("CurrencyType", "YourController")"><span>Currency Type</span></a></li>
       </ul>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#tabs').tabs({
            spinner: '<img src="../../Content/Images/tabsppinner.gif" alt="" /> @Loading...'
        }); 
    });
</script> 
```

然后，您将只有一个控制器，其中包含为每个选项卡定义的操作。*

# c# - 如果http服务器没有启用目录列表，有什么简单的方法可以在web服务器中列出目录的内容？

> ID：10062306
> 
> 赞同：0
> 
> 时间：2012-04-08T11:05:00.290
> 
> 标签：c#, http

如果未启用目录列表，例如 IIS、apache 或 Njinx，如果在浏览器中输入的正则表达式与目录中的项目匹配，您仍然可以访问资源 - 即 index.html、mypic.jpg 等。因此可以列出内容一个目录未设置为通过尝试所有不同的正则表达式并列出有效匹配项来列出所有内容。还有比这更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:11:26.207

如果没有某种帮助（通过 Web 服务器、管理界面（即 WMI）或在 Web 中运行的 Web 服务），您可能无法以快速可靠的方式获得目录列表。是你的网站吗？如果是这样，我会选择网络服务。

# c# - 应用程序不退出

> ID：10062314
> 
> 赞同：0
> 
> 时间：2012-04-08T11:05:46.937
> 
> 标签：c#, wpf, serial-port, dispatcher

为什么应用程序仍在工作，当我关闭它时。
我猜这是由于从串口读取数据引起的。

串行端口号从 ComboBox 中选择。
函数 WriteData 根据来自串行端口的数据更新复选框。
这是摘录：

```
 // Choosing of communication port from ComboBox
    private void comboBoxCommunication_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (serialPort.IsOpen)
        {
            serialPort.DataReceived -= new System.IO.Ports.SerialDataReceivedEventHandler(Recieve);
            serialPort.Close();
        }
        try
        {
            ComboBoxItem cbi = (ComboBoxItem)comboBoxKomunikacia.SelectedItem;
            portCommunication = cbi.Content.ToString();
            serialPort.PortName = portCommunication;
            serialPort.DataReceived += new System.IO.Ports.SerialDataReceivedEventHandler(Recieve);
            serialPort.BaudRate = 2400;
            serialPort.Open();
            serialPort.DiscardInBuffer();
        }
        catch (IOException ex)
        {
            MessageBox.Show(ex.ToString(), "Error!", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    }

    // Close the window
    private void Window_Closed(object sender, EventArgs e)
    {
        if (serialPort.IsOpen)
        {                
            serialPort.DataReceived -= new System.IO.Ports.SerialDataReceivedEventHandler(Recieve);                
            serialPort.Close();
        }
    }

    // Data reading
    private delegate void UpdateUiTextDelegate(char text);
    private void Recieve(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        if (serialPort.IsOpen)
        {
            try
            {
                serialPort.DiscardInBuffer();
                char c = (char)serialPort.ReadChar();
                Dispatcher.Invoke(DispatcherPriority.Send,
                    new UpdateUiTextDelegate(WriteData), c);                    
            }
            catch(IOException ex)
            {
                MessageBox.Show(ex.ToString(), "Error!", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    }

    // Update of checkboxes
    private void WriteData(char c) { ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:23:18.340

您的代码很可能会导致死锁，从而在 Close() 调用上阻塞您的程序。问题陈述是 Dispatcher.Invoke() 调用。在 UI 线程调度调用之前，该调用无法完成。当您调用 Close() 并且 DataReceived 事件正忙于执行时，就会发生死锁。Close() 调用无法完成，因为事件正在运行。事件处理程序无法完成，因为 Invoke() 无法完成，因为 UI 线程没有空闲，它卡在 Close() 调用中。死锁城。

这*尤其*可能发生在您的代码中，因为它有一个错误。您在 DataReceived 中调用 DiscardInBuffer()。这会丢弃接收到的数据，因此下一次 ReadChar() 调用将阻塞一段时间，等待接收更多数据，如果设备不再发送任何内容，可能会永远阻塞。

通过删除 DiscardInBuffer() 调用并改用 Dispatcher.BeginInvoke() 来解决此问题。

# javascript - 遍历对象哈希表

> ID：10062317
> 
> 赞同：51
> 
> 时间：2012-04-08T11:06:15.650
> 
> 标签：javascript, hashtable

我正在尝试使用哈希表，因此我可以选择存储在数组/对象中的特定对象。但是，我在循环对象时遇到问题。

```
var pins= {};
pins[6] = '6';
pins[7] = '7';
pins[8] = '8';

$('#result3').append('<div>Size: ' + Object.size(pins) + '</div>');
for(var i = 0; i < Object.size(pins); i++) {
    $('#result3').append('<div>' + pins[i] + '</div>');
} 
```

**JSFiddle**：http: [//jsfiddle.net/7TrSU/](http://jsfiddle.net/7TrSU/)

正如您所看到的`TEST 3`，使用 object`pin`来存储数据，我`undefined`在遍历 object 时得到了`pin`。

循环的正确方法是什么`pin`？

**编辑**

如果`pin[6] = '6'`我制作 pin[6] = 一个对象而不是 just ，并且我想遍历它们的所有`id`属性，会发生什么？我正在做的实际代码片段......

```
for(var i = 0; i < json.length; i++) {
    markerId = json[i].listing_id

    // Place markers on map
    var latLng = new google.maps.LatLng(json[i].lat, json[i].lng);
    var marker = new google.maps.Marker({
                listing_id: markerId,
                position: latLng,
                icon: base_url + 'images/template/markers/listing.png',
    });

    markers[markerId] = marker;
}

for(var marker in markers) {
    console.log('marker ID: ' + marker.listing_id);
    mc.addMarker(marker);
} 
```

`console.log`上面返回未定义，如果我这样做，`console.log(marker)`我会得到`marker.listing_id`. 对不起，我越来越糊涂了！

我设法让它工作，`$.each(markers, function(i, marker){});`但为什么`for..in`上述不起作用？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-08T11:10:01.990

```
var hash = {}
hash[key] = value

Object.keys(hash).forEach(function (key) { 
    var value = hash[key]
    // iteration code
}) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-04-08T11:09:33.730

不要使用`for(i=0; i<size; i++)`循环。相反，使用：

1.  [`Object.keys(pins)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)获取属性列表，并遍历它，或者
2.  将 a`for ( key_name in pins)`与[`Object.hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)（排除继承属性）结合使用以遍历属性。

第三个测试用例的问题是它读取键 0、1 和 2 的值（而不是 6、7、8）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-08T11:10:11.803

由于您使用的是 jQuery：

```
jQuery.each(pins, function (name, value) {
    $('#result3').append('<div>' + name + "=" + value + '</div>');
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-08T11:52:53.463

```
function iterate(obj){
    var keys = Object.keys(obj);
    for(i in keys){
        doSomething(obj[keys[i]].id);
    }
} 
```

这会遍历`id`任何对象中的所有字段

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-08T11:11:12.800

尝试这个：

```
for (var pin in pins) {
    $('#result3').append('<div>' + pin + '</div>');
} 
```

[**示例小提琴**](http://jsfiddle.net/7TrSU/1/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-08T11:09:54.550

以`pin`6 到 8 开头，但 for 循环从 0 到 3（对象的长度）循环。您需要从 6 循环到`6 + the_size_of_the_object`. 像这样的东西：

```
for(var i = 6, len = 6 + Object.size(pins); i < len; i++) {
  $('#result3').append('<div>' + pins[i] + '</div>');
} 
```

* * *

或者类似的东西，这就是我喜欢的：

```
for( var i = 5; pin = pins[++i]; ) {
  $('#result3').append('<div>' + pin + '</div>');
} 
```

# c# - DataBinding 不适用于继承的 DependencyProperty

> ID：10062319
> 
> 赞同：0
> 
> 时间：2012-04-08T11:06:55.767
> 
> 标签：c#, .net, wpf, xaml

我有一个基类和另一个从基类继承的类。基类有一个 DependencyProperty（比如“MyDPProperty”）：

```
public int MyDPProperty
 { 
   get { return (int)GetValue(MyDPPropertyProperty); } 
   set { SetValue(MyDPPropertyProperty, value); } 
 } 
public static readonly DependencyProperty MyDPPropertyProperty =DependencyProperty.Register("MyDPProperty", typeof(int), typeof(ownerclass), new UIPropertyMetadata(0)); 
```

在 Window 的构造函数中，我写道：

```
SomeWpfWindow.DataContext = new ChildClass(); 
```

在我的 Window 的 XAML 代码中，我有：

```
<TextBox x:Name="txt"
        Text="{Binding Path=MyDPProperty, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" /> 
```

现在，绑定不起作用，尽管当我在它后面的代码中绑定它时：

```
SomeWpfWindow.txt.SetBinding(TextBox.TextProperty
                        , new Binding("MyDPProperty")
                        {
                            Source = InstanceOfChildClass,
                            UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged,
                            Mode = BindingMode.TwoWay
                        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:04:51.127

您正在后面的代码中绑定一个属性。您可以为窗口命名（例如 Name="winName"）并在绑定中定义 ElementName：

```
 x:Name="txt" Text="{Binding ElementName=winName, Path=MyDPProperty, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" /> 
```

还有其他方法，例如您可以添加一个静态资源。此链接可能会有所帮助：

[http://blog.jayway.com/2011/05/17/bind-from-xaml-to-property-defined-in-code-behind/](http://blog.jayway.com/2011/05/17/bind-from-xaml-to-property-defined-in-code-behind/)

# python - 如何仅使用 virtualenv 引导脚本在虚拟环境中安装 python 包？

> ID：10062320
> 
> 赞同：4
> 
> 时间：2012-04-08T11:07:07.357
> 
> 标签：python, deployment, virtualenv

我想创建一个引导脚本来设置本地环境并在其中安装所有要求。我一直在尝试使用 virtualenv.create_bootstrap_script，如他们的[文档](http://pypi.python.org/pypi/virtualenv)中所述。

```
import virtualenv
s = virtualenv.create_bootstrap_script('''
import subprocess
def after_install(options, home_dir):
  subprocess.call(['pip', 'install', 'django'])
''')
open('bootstrap.py','w').write(s) 
```

运行生成的 bootstrap.py 时，它会正确设置虚拟环境，但随后会尝试全局安装 Django。

如何编写仅在此本地虚拟环境中安装 Django 的引导脚本。它必须在 Windows 和 Linux 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:05:09.243

您可以通过以下方式强制 pip 安装到您的 virtualenv 中：

```
subprocess.call(['pip', 'install', '-E', home_dir, 'django']) 
```

此外，将您的依赖项存储在 requirements.txt 文件中是一个很好且有用的约定，对于 django 1.3，它将是：

```
django==1.3 
```

然后在你的`after_install`：

```
subprocess.call(['pip', 'install', '-E', home_dir, '-r', path_to_req_txt]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:05:15.757

适用于 Windows 和 Linux 的解决方案。它使用 pip，刚刚由引导脚本安装。

```
import virtualenv
s = '''
import subprocess, os
def after_install(options, home_dir):
  if os.name == 'posix':
    subprocess.call([os.path.join(home_dir, 'bin', 'pip'), 'install', '-r', 'requirements.txt'])
  else:
    subprocess.call([os.path.join(home_dir, 'Scripts', 'pip.exe'), 'install', '-r', 'requirements.txt'])
'''
script = virtualenv.create_bootstrap_script(s, python_version='2.7')
f = open('bootstrap.py','w')
f.write(script)
f.close() 
```

只需将您的要求放入 中`requirements.txt`，每个包对应一行：

```
django
django-registration==1.4.3 
```

请参阅：[Pip - 需求文件](http://www.pip-installer.org/en/latest/requirements.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:18:37.093

您需要将完全限定的路径传递给`pip`您的 virtualenv 中的脚本。

`subprocess.call([join(home_dir, 'bin', 'pip'),'install','django'])`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-19T22:02:08.080

对我有用的是从新创建的**环境访问****pip**。

 **```
pip = os.path.join(home_dir, 'bin', 'pip') 
```

之后，我尝试像以前一样安装**django 。**

```
subprocess.call([pip, 'install', 'django']) 
```

记住**os**导入：

```
import os, subprocess 
```

希望对你有效。**

# asp.net - Google OpenId：未找到 OpenID 端点（间歇性）

> ID：10062322
> 
> 赞同：9
> 
> 时间：2012-04-08T11:07:13.930
> 
> 标签：asp.net, openid, dotnetopenauth, google-openid

通常使用 Google OpenId 可以正常工作，每天数千次，然后它会开始间歇性出错并超时一个小时左右（一些请求会验证但不是全部）。重复验证最终会起作用。

错误消息是：

```
Event code: 200000 
Event message: No OpenID endpoint found. : https://www.google.com/accounts/o8/id 

Sequence contains no elements 
```

添加 log4net 产生：

```
DotNetOpenAuth.Yadis:
Error while performing discovery on: "https://www.google.com/accounts/o8/id": 
DotNetOpenAuth.Messaging.ProtocolException:
 Error occurred while sending a direct message or getting the response. 
 ---> System.Net.WebException: The operation has timed out     
  at System.Net.HttpWebRequest.GetResponse()    
  at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse
     (HttpWebRequest request, DirectWebRequestOptions options) 
     in  c:\...\Dot...Core\Messaging\StandardWebRequestHandler.cs:line 127    
 --- End of inner exception stack trace ---     
  at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse
     (HttpWebRequest request, DirectWebRequestOptions options) 
     in c:\...\Dot...Core\Messaging\StandardWebRequestHandler.cs:line 175
  at DotNetOpenAuth.Messaging.UntrustedWebRequestHandler.GetResponse
     (HttpWebRequest request, DirectWebRequestOptions options)
     in c:\...\Dot...Core\Messaging\UntrustedWebRequestHandler.cs:line 250
  at DotNetOpenAuth.Yadis.Yadis.Request
     (IDirectWebRequestHandler requestHandler,
       Uri uri, Boolean requireSsl, String[] acceptTypes) 
     in c:\...\Dot...OpenId\Yadis\Yadis.cs:line 172
  at DotNetOpenAuth.Yadis.Yadis.Discover
     (IDirectWebRequestHandler requestHandler, UriIdentifier uri, Boolean requireSsl)
     in c:\...\DotNetOpenAuth.OpenId\Yadis\Yadis.cs:line 63
  at DotNetOpenAuth.OpenId.UriDiscoveryService.Discover
     (Identifier identifier, IDirectWebRequestHandler requestHandler, 
           Boolean& abortDiscoveryChain) 
     in c:\...\DotNet...OpenId\OpenId\UriDiscoveryService.cs:line 51
  at DotNetOpenAuth.OpenId.IdentifierDiscoveryServices.Discover
     (Identifier identifier) 
     in c:\...\Dot...OpenId\OpenId\IdentifierDiscoveryServices.cs:line 58
  at DotNetOpenAuth.OpenId.RelyingParty.AuthenticationRequest.Create
     (Identifier userSuppliedIdentifier, OpenIdRelyingParty relyingParty,
       Realm realm, Uri returnToUrl, Boolean createNewAssociationsAsNeeded) 
     in ...OpenId.RelyingParty\OpenId\RelyingParty\AuthenticationRequest.cs:line 364 
```

和

```
DotNetOpenAuth.Http WebException: 
 Timeout from https://www.google.com/accounts/o8/id, no response available. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:26:12.420

听起来您需要修复网络延迟。谷歌似乎不太可能成为这里的瓶颈。

您可能还希望增加 HTTP 超时以降低失败率。完整的选项集可[在此处](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Configuration)获得。具体来说，您可能正在寻找：

```
<untrustedWebRequest
            timeout="00:00:10"
            readWriteTimeout="00:00:01.500" /> 
```

查看配置链接以查看其所在的上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T18:39:26.610

我们最近遇到了同样的问题。在阅读了几个不同的场景并完成了跟踪步骤后，我终于得出结论，正如我在其他地方看到的那样，这个问题可能是由 DNS 服务器问题引起的。在我们的案例中，我们有一台已使用超过 18 个月的生产服务器，最近才开始遇到与上述相同的问题，但在这台服务器上非常一致。另一个网络上的另一台服务器和我们的开发计算机没有任何问题。

长话短说，我将生产服务器的主 DNS 更改为 Google 的公共 DNS 8.8.8.8，它立即开始工作。在此之前，我已经手动刷新了生产服务器上的 DNS 缓存（没有正面结果），因此我相信 DNS 服务器（由我们的托管中心提供）有一个错误的缓存条目，最终导致了问题。

希望这可以帮助遇到这种情况的其他人。

# iphone - 谷歌位置搜索地图 API 没有给出完整的结果 iPhone

> ID：10062323
> 
> 赞同：0
> 
> 时间：2012-04-08T11:07:29.027
> 
> 标签：iphone, google-maps, map

我正在使用此链接 [http://maps.googleapis.com/maps/api/geocode/xml?address=wawa&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=wawa&sensor=false) 但它不返回任何结果，因为谷歌地图应用程序在“wawa”搜索中返回大约 8 个结果。你能告诉我哪个是最好的API，它以经度和纬度的形式给出与谷歌地图应用程序相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:20:41.537

前段时间我给出了一个答案，它解释了从 api 获得响应的整个过程......

你可以参考[这里](https://stackoverflow.com/a/9565060/919545)

# redis - Redis Sorted Sets：如何获得第一个相交元素？

> ID：10062327
> 
> 赞同：3
> 
> 时间：2012-04-08T11:07:50.837
> 
> 标签：redis

我在 Redis 中有许多大型排序集（5m-25m），我想获得出现在这些集合组合中的第一个元素。例如，我有 20 套，想拿套 1、5、7 和 12，只得到这些套的第一个交集。

似乎 ZINTERSTORE 后跟“ZRANGE foo 0 0”会做更多我需要的工作，因为它会计算**所有**交叉点然后返回第一个交叉点。是否有不需要计算所有交叉点的替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:46:39.177

尽管我建议这样做，但没有直接的本地替代方案：

创建一个**哈希**，其成员是您的元素。每次添加到您的排序集之一时，增加相关成员（使用`HINCRBY`）。当然，只有在您检查该元素在您尝试添加的排序集中不存在之后，您才会进行增量。

这样，您可以快速知道哪些元素出现在 4 个集合中。

**更新：现在我重新考虑它，查询您的哈希以查找值为 4 (** *O(n)* )的项目可能太昂贵了。另一种选择是创建另一个排序集，它的成员是你的元素，它们的分数会增加（正如我之前描述的，但是使用[`ZINCRBY`](http://redis.io/commands/zincrby)），你可以快速拉出分数为 4 的所有元素（使用[`ZRANGEBYSCORE`](http://redis.io/commands/zrangebyscore)）。

# sql - 序列与身份

> ID：10062328
> 
> 赞同：93
> 
> 时间：2012-04-08T11:07:56.950
> 
> 标签：sql, sql-server, tsql, sql-server-2012

SQL Server 2012`Sequence`作为一项新功能引入，与 Oracle 和 Postgres 中的相同。序列在哪里比身份更受欢迎？为什么我们需要序列？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-08T11:23:17.803

我想你会在[这里找到你的答案](http://www.sql-server-performance.com/2011/sequence-sql-server-2011/)

> 使用列的标识属性，您可以轻松生成自动递增的数字（通常用作主键）。使用序列，它将是一个不同的对象，您可以在插入时附加到表列。与identity 不同，列值的下一个数字将从内存而不是磁盘中检索——这使得Sequence 比Identity 快得多。我们将在接下来的示例中看到这一点。

[在](http://newtech.about.com/od/databasemanagement/a/Sql-Server-2011-Denali.htm)这里：

> 序列：SQL Server 社区多年来一直在请求序列，它包含在此版本中。序列是一个用户定义的对象，它生成一个数字的序列。这是使用序列的示例。

以及[这里](http://www.kodyaz.com/sql-server-2012/number-of-sequences-in-sql-server-2012-using-sequence-objects.aspx)：

> SQL Server 序列对象生成数字序列，就像 sql 表中的标识列一样。但是序号的优点是序号对象不受单个sql表的限制。

在 msdn 上，您还可以阅读有关用法以及我们需要它的原因的更多信息（[此处](http://msdn.microsoft.com/en-us/library/ff878058.aspx)）：

> 序列是用户定义的模式绑定对象，它根据创建序列的规范生成数值序列。数值序列以定义的时间间隔以升序或降序生成，并可按要求循环（重复）。与标识列不同，序列不与表关联。应用程序引用一个序列对象来接收它的下一个值。序列和表格之间的关系由应用程序控制。用户应用程序可以引用序列对象并跨多个行和表协调值键。
> 
> 使用 CREATE SEQUENCE 语句独立于表创建序列。选项使您能够控制增量、最大值和最小值、起点、自动重新启动功能和缓存以提高性能。有关选项的信息，请参阅创建序列。
> 
> 与插入行时生成的标识列值不同，应用程序可以在插入行之前通过调用 NEXT VALUE FOR 函数获取下一个序列号。在调用 NEXT VALUE FOR 时分配序列号，即使该编号从未插入到表中。NEXT VALUE FOR 函数可用作表定义中列的默认值。使用 sp_sequence_get_range 一次获取多个序列号的范围。
> 
> 序列可以定义为任何整数数据类型。如果未指定数据类型，则序列默认为 bigint。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-01T06:54:20.637

序列和标识都用于生成自动编号，但主要区别在于标识是依赖于表的，而序列独立于表。

如果您有一个需要全局维护自动编号的场景（在多个表中），您还需要在特定编号之后重新启动间隔并且您还需要缓存它以提高性能，这里是我们需要序列而不是身份。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-06T11:47:45.733

尽管序列比标识列提供了更多的灵活性，但我没有发现它们有任何性能优势。

我发现使用标识的性能始终比使用序列进行批量插入快 3 倍。

我插入了大约 150 万行，性能是：

*   14 秒识别
*   序列 45 秒

我通过表默认值将行插入到使用序列对象的表中：

`NEXT VALUE for <seq> for <col_name>`

并尝试在 select 语句中指定序列值：

```
SELECT NEXT VALUE for <seq>, <other columns> from <table> 
```

两者都比身份方法慢相同的因素。我使用了序列的默认缓存选项。

Arion 的第一个链接中引用的文章显示了逐行插入的性能，10,000 次插入的身份和序列之间的差异为 16.6 秒到 14.3 秒。

缓存选项对性能有很大影响，但对于更大的卷（+1M 行），标识更快

根据 utly4life 的评论，请参阅此[链接以进行深入分析。](http://byobi.com/blog/2012/09/sequence-vs-identity-performance-comparison/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-25T14:57:03.780

我知道这有点老了，但想添加一个让我印象深刻的观察。

我从身份切换到序列以按顺序排列索引。后来我发现该序列不会随着复制而转移。由于序列不同步，我在两个数据库之间设置复制后开始出现密钥冲突。只是在你做出决定之前需要注意的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-17T23:29:00.160

我发现序列的最佳用途不是替换标识列，而是创建“订单号”类型的字段。

换句话说，订单号向最终用户公开，并且可能附带业务规则。您希望它是唯一的，但仅使用标识列也不是真正正确的。

例如，不同的订单类型可能需要不同的顺序，因此您可能有一个互联网订单的顺序，而不是内部订单。

换句话说，不要将序列视为身份的简单替代品，将其视为在身份不符合业务需求的情况下有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-22T02:10:00.847

最近有点需要考虑身份与序列的问题。如果您可能想保持身份没有间隙，似乎 MSFT 现在建议序列。我们遇到了身份存在巨大差距的问题，但基于此突出显示的声明将解释我们的问题，即 SQL 缓存了身份，并且在重新启动后我们丢失了这些数字。

[https://docs.microsoft.com/en-us/sql/t-sql/statements/create-table-transact-sql-identity-property?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/statements/create-table-transact-sql-identity-property?view=sql-server-2017)

服务器重新启动或其他故障后的连续值 - SQL Server 可能出于性能原因缓存标识值，并且在数据库故障或服务器重新启动期间，某些分配的值可能会丢失。这可能会导致插入时标识值出现间隙。如果间隙不可接受，则应用程序应使用自己的机制来生成键值。使用带有 NOCACHE 选项的序列生成器可以将间隙限制为从未提交的事务。

# lwuit - 在 LWUIT 中从内部隐藏对话框

> ID：10062330
> 
> 赞同：0
> 
> 时间：2012-04-08T11:08:09.657
> 
> 标签：lwuit, lwuit-dialog

我`Dialog`用两个按钮创建了一个是，否，然后我向它们添加了动作侦听器，我的问题是我不想隐藏`Dialog`我创建的按钮

代码看起来像：

```
dialog = new Dialog(title);
        dialog.setDialogType(Dialog.TYPE_CONFIRMATION);

        ta = new TextArea(text);
        ta.getStyle().setBorder(Border.createEmpty());
        ta.setEditable(false);
        yesCommand = new Button("YES");
        noCommand = new Button("NO");

        yesCommand.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                LGBMainMidlet.getLGBMidlet().notifyDestroyed();
            }
        });

        noCommand.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                Logger.Log("Bye Bye");
                dialog = null;
                System.gc();
            }
        });

        dialog.addComponent(ta);
        dialog.addComponent(yesCommand);
        dialog.addComponent(noCommand);
        dialog.show(); 
```

代码对我不起作用，谁能告诉我是什么问题？

BN 我用过`dialog.dispose()`，但它退出了整个应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:05:32.890

最好使用 dialog.setTimeout(1000); 数字显示对话框等待的时间限制，以毫秒为单位。因此，通过这样做，您可以自动退出对话框表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:16:03.510

`Dialog.dispose()`不退出整个应用程序，它只是关闭对话框。如果您的应用程序中没有任何内容，那么您在处理对话框时可能什么也看不到。

# spring - 带有 Spring Social 框架和 Jersey 的 Maven 项目

> ID：10062332
> 
> 赞同：2
> 
> 时间：2012-04-08T11:08:28.813
> 
> 标签：spring, jersey, spring-social

我想实现一个使用与 Jersey 集成的 Spring 社交框架的 Maven 项目。但它有一些依赖性问题。

我想是因为我在球衣春天错过了一些排斥。有人可以帮助我吗？

pom.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.springframework.social.samples</groupId>
<artifactId>world-rank</artifactId>
<name>World Rank</name>
<packaging>war</packaging>
<version>1.0.0</version>
<properties>
    <java-version>1.6</java-version>
    <org.springframework.social-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social-version>
    <org.springframework.social.facebook-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social.facebook-version>
    <org.springframework.social.twitter-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social.twitter-version>
    <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
    <org.springframework.security-version>3.1.0.RELEASE</org.springframework.security-version>
    <org.slf4j-version>1.6.1</org.slf4j-version>
</properties>
<dependencies>
    <!-- Jersey -->

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>

    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.security-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.security-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.security-version}</version>
    </dependency>       
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-core</artifactId>
        <version>${org.springframework.social-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-facebook</artifactId>
        <version>${org.springframework.social.facebook-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-twitter</artifactId>
        <version>${org.springframework.social.twitter-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-web</artifactId>
        <version>${org.springframework.social-version}</version>
    </dependency>

    <!-- Jersey + Spring -->

    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>1.8</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Apache Http Client -->
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.1.2</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>           
    </dependency>

    <!-- JSR 303 with Hibernate Validator -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.1.0.Final</version>
    </dependency>

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.3.159</version>
    </dependency>

    <!-- CGLIB, only required and used for @Configuration usage -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- Apache Tiles -->
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-el</artifactId>
        <version>2.2.2</version>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>jstl-api</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>jstl-impl</artifactId>
        <version>1.2</version>
    </dependency>
</dependencies>
<repositories>
    <repository>
        <id>org.springframework.maven.release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
        <releases><enabled>true</enabled></releases>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>
    <!-- For testing against latest Spring snapshots -->
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases><enabled>false</enabled></releases>
        <snapshots><enabled>true</enabled></snapshots>
    </repository>
    <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>
</repositories>
<build>
    <resources>
        <resource>
            <directory>src/main/java</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <warName>spring-social-popup</warName>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
        </plugin>
    </plugins>
</build> 
```

错误消息是：错误：org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建文件 [/Users/yousilin/workspace/9323 中定义的名称为“webMvcConfig”的 bean 时出错/target/classes/org/springframework/social/popup/config/WebMvcConfig.class]：bean初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [org/springframework/transaction/annotation/ProxyTransactionManagementConfiguration.class] 中定义名称为 'org.springframework.transaction.config.internalTransactionAdvisor' 的创建 bean 时出错：实例化豆失败；嵌套异常是 org.springframework.beans.factory.BeanDefinitionStoreException: 工厂方法 [public org.springframework.transaction.interceptor. BeanFactoryTransactionAttributeSourceAdvisor org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.transactionAdvisor()] 抛出异常；嵌套异常是 java.lang.NoSuchMethodError: org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor.setAdvice(Lorg/aopalliance/aop/Advice;)V 相关原因：org.springframework.beans.factory.BeanCreationException: Error created bean with name '在类路径资源[org/springframework/social/popup/config/SocialConfig.class]中定义的BeanDefinition中定义的connectionFactoryLocator'：bean的初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名称为 'org.springframework.transaction.config.internalTransactionAdvisor' 的 bean 时出错 在类路径资源 [org/springframework/transaction/annotation/ProxyTransactionManagementConfiguration.class] 中定义：bean 的实例化失败；嵌套异常是 org.springframework.beans.factory.BeanDefinitionStoreException: 工厂方法 [public org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.transactionAdvisor()] 抛出异常；嵌套异常是 java.lang.NoSuchMethodError: org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor.setAdvice(Lorg/aopalliance/aop/Advice;)V 工厂方法 [public org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.transactionAdvisor()] 抛出异常；嵌套异常是 java.lang.NoSuchMethodError: org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor.setAdvice(Lorg/aopalliance/aop/Advice;)V 工厂方法 [public org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.transactionAdvisor()] 抛出异常；嵌套异常是 java.lang.NoSuchMethodError: org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor.setAdvice(Lorg/aopalliance/aop/Advice;)V

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T11:01:19.757

我遇到了同样的问题，就我而言，添加 AOP 依赖项有所帮助。我想 Spring 安全性的某些部分需要它。

尝试添加：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency> 
```

# jquery - 子类化 ui.autocomplete jquery

> ID：10062333
> 
> 赞同：0
> 
> 时间：2012-04-08T11:08:38.580
> 
> 标签：jquery, autocomplete, subclass

我像这样扩展查询 UI 小部件 autcomplete：

[http://jsbin.com/icota4/15/edit](http://jsbin.com/icota4/15/edit)

但是我无法成功使用方法更改，选择...而不在 html 中声明它们，新小部件的所有使用都是相同的，所以我想在 javascript 中声明函数。

（如果我没有在 html 中声明它们，则使用 ui 自动完成，代码使用 ui 小部件中的功能）

因此，当我在控制台中选择项目时，我必须看到： ici 和变量文本的值，但没有附加任何内容。

我怎样才能解决我的问题。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:23:58.173

我在_create中成功地改变了这样的方法：

```
this.element.live('change', function() {

    if (self.options.blur_clear_input) {
        clear_input(false);
    } else {
        var text = $("#autocomplete_input").val();
        if (self.options.multiple || self.options.token_alone) {
            self._create_token(text);
        } else {
            $('#autocomplete_input_true').val(text);
        }
    }
}); 
```

但是我尝试对 select 做同样的事情，但它不起作用。有人知道问题出在哪里吗？

# java - JavaFX CSS 效果帮助（截图）

> ID：10062335
> 
> 赞同：0
> 
> 时间：2012-04-08T11:09:18.403
> 
> 标签：java, css, effects, javafx-2

我不知道如何使用 css (-fx-... :...) 将这种效果应用于 javaFX 2 中的文本字段；

![在此处输入图像描述](../Images/dc0cd8dd52a36fc58b0fca4d8e278647.png)

我需要类似屏幕截图中的内容。我有一个具有该背景的面板，我需要将文本字段变暗一点（它看起来像一个内部阴影）。

我尝试在面板上使用较小的不透明度，在文本输入上使用高不透明度，但无法正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:38:10.863

运行此示例应用程序：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.TextField;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;

public class StyleDemo extends Application {

    @Override
    public void start(Stage primaryStage) {
        TextField txt = new TextField("text");
        txt.setLayoutY(150);
        txt.setPrefHeight(50);
        txt.setStyle("-fx-background-color: rgb(0,0,0,0.11); -fx-text-fill: white; -fx-font-size: 28; -fx-font-weight: bold");

        Pane root = new Pane();
        root.setStyle("-fx-background-image: url(\"http://i.stack.imgur.com/ThghN.png\"); -fx-background-repeat: stretch; -fx-background-size: 300 250;");
        root.getChildren().add(txt);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

要为文本字段提供内部阴影效果，请查看此链接：
[http ://docs.oracle.com/javafx/2.0/api/javafx/scene/doc-files/cssref.html#typeeffect](http://docs.oracle.com/javafx/2.0/api/javafx/scene/doc-files/cssref.html#typeeffect)

# jquery - 如何从 jQuery 调用 servlet 并将该值分配给页面加载时的文本框或下拉列表？

> ID：10062350
> 
> 赞同：0
> 
> 时间：2012-04-08T11:11:27.970
> 
> 标签：jquery, mysql, servlets, textbox

我是新的 jQuery，这是我第一次尝试它。当使用 jQuery 函数加载 JSP 页面时，我正在尝试使用 servlet 从数据库中获取文本框值。这是我在 JSP 代码中的函数：

```
<script src="/jquery.js"></script>
<script type="text/javascript">
    function serial() {
        alert("serial");
        get(
            'Serialno',
            function(nexts) {
                $('#serialno').val(nexts);
                alert(nexts);
            }
        );
    }
</script> 
```

html代码的正文部分

```
<body onload="serial();">
    <form action="get" name="billdet" >
        Serial Number:   
        <input type="text" disabled="disabled" name="serialno" /><br>
    </form>
</body> 
```

和我`doGet()`在 servlet 类中的方法。

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
    response.setContentType("text/html");
    response.getWriter().write(nexts);
    //PrintWriter out=response.getWriter();
    System.out.println(nexts);
} 
```

# javascript - 与 JS 客户端同步服务器秒数

> ID：10062353
> 
> 赞同：1
> 
> 时间：2012-04-08T11:13:09.773
> 
> 标签：javascript, jquery, cron

我想根据服务器的时间驱动一个 setTimeout 循环，仅几秒钟。

因此，当服务器上的秒数为 30 时，某些功能会在所有客户端上运行。至关重要的是它们不会与服务器完全不同步，因为每隔 45 秒就会有一个 CRON 作业在服务器上运行，这对于系统正常运行很重要。

如果客户端与服务器有几秒钟的关系，这是可以的，客户端不需要相互同步。

我正在使用 Jquery 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:29:13.720

使用 node.js 和 Socket.io

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', tick);

function tick(socket){
    socket.emit("tick");
    setTimeout(function(){tick(socket)}, 30000);
} 
```

客户：

```
var socket = io.connect('http://serveraddr');
socket.on('tick', function (data) {
    doSomething()
}); 
```

这使用 Socket.io 为服务器直接控制客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:21:13.530

在这种情况下，您可以使用[长轮询。](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)客户端向服务器发送请求，服务器在一段时间后发送响应。在回调时，您可以执行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:24:26.010

当客户端第一次加载时，它会询问服务器时间。或者您可以将当前服务器时间渲染到 JS 中。

然后客户端获取当前本地时间，计算两者之间的增量并使用该增量计算任何给定时刻的当前服务器时间。当然，这种方法假定两个时钟不会偏离太多（它们确实不应该）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T11:25:26.730

根据您的解决方案（AJAX、页面重新加载等），您可以在下次调用完成时将秒数传递给客户端。这可以包含在对客户呼叫的每个响应中。

例如，客户端调用服务器，服务器响应 56 秒，客户端在 56 秒内执行下一次调用。

# asp.net - 如何在 html 中使用 C# 代码？

> ID：10062357
> 
> 赞同：0
> 
> 时间：2012-04-08T11:14:18.337
> 
> 标签：asp.net, html

我在我的 html 中使用此代码：

```
<a href="<%# ((bool)Eval("IsLinkToOther")) ? Eval("NewsLink") : ../News.aspx?NewsId=Eval("NewsId") %>"><%# Eval("Title") %></a> 
```

或这个：

```
<a <%if(((bool)Eval("IsLinkToOther")))
   { %>
     href="<%#Eval("NewsLink")%>"                               
<% } %>
 <%else
   {%>
     href="../News.aspx?NewsId=<%#Eval("NewsId")%>"
<% } %> ><%# Eval("Title") %></a> 
```

但它不起作用，我如何使用它们，请帮助，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:24:01.140

您是否尝试过添加

```
runat="server" 
```

属性到您的 HTML 标签？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:18:22.523

纯 HTML 在客户端上呈现和解释。C# 通常用于服务器端（例如在 aspx 文件中）。

因此，要运行它，您必须从支持 ASP.NET 的服务器（例如启用了 ASP.NET 的 IIS）为其提供服务。

如果您正在寻找客户端功能，您应该使用 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:17:06.043

**恕我直言，除非绝对必要**，否则不要这样做。将表示层与代码隐藏混合在一起是一个非常糟糕的习惯。

在我看来，正确的方法是利用您使用 asp.net 的事实。

页面.aspx

```
<asp:HyperLink ID="myLink" NavigateUrl="" runat="server" /> 
```

页面.aspx.cs

```
myLink.NavigateUrl = SomeClass.IsLinkToOther ? SomeClass.NewsLink : "~/News.aspx?NewsId=" + SomeClass.NewsId; 
```

# java - 在数据库中存储带有换行符的 TextArea 数据并以相同的格式显示带有换行符

> ID：10062358
> 
> 赞同：1
> 
> 时间：2012-04-08T11:14:28.853
> 
> 标签：java, database, jsp, textarea, line-breaks

我有一个带有 textarea HTML 组件的 JSP 页面。当用户在 textarea 中输入时按下回车键并转到下一行，当他单击保存按钮时，它将文本区域中的数据保存到数据库中。但是当我加载数据库的内容时，换行符消失了。方法：

你好
世界

显示像

你好世界

我尝试了这里给出的方法[如何用 <br /> 标签替换字符串中的所有换行符？](https://stackoverflow.com/questions/784539/replace-all-line-break-in-a-string-with-br-tag-in-javascript) 但它不工作。我也试过这个[如何将用户输入的换行符从 TextArea 保存到数据库？](https://stackoverflow.com/questions/498461/how-to-save-user-entered-line-breaks-from-a-textarea-to-a-database)但我没有使用 PHP，这里给出的另一种语言用“<br />”替换“\n”的解决方案也不起作用。请问有人知道怎么做吗？

我试过这段代码：

```
String a=req.getParameter("topicdes").toString();
a.replaceAll("\n","<br />"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T11:33:11.010

replaceAll 方法返回一个新字符串。您的变量 a 永远不会被修改。

解决您的问题：`a = a.replaceAll("\n","<br />");`

在这种方法中，阅读[javadoc](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-)可以节省时间。

问候。

# javascript - 在 IndexedDB 中使用有序列表

> ID：10062364
> 
> 赞同：1
> 
> 时间：2012-04-08T11:15:26.577
> 
> 标签：javascript, database-design, web-sql, sortedlist, indexeddb

我正在尝试通过创建一个简单的记事本应用程序来学习 IndexedDB 的基础知识。我在这种环境中使用有序列表时遇到了困难。

我不确定如何实现的功能是有一个有序的笔记列表。

我第一次尝试在 WebSQL 中实现记事本应用程序，我发现选择这样的笔记很容易：

```
select * from notes order by position 
```

在指定位置插入注释时，我首先做了......

```
update notes set position = position + 1 where position >= insert_position 
```

...移动每个音符以在位置为新音符腾出空间`insert_position`。

但我看到 WebSQL 实际上已被弃用。

在 IndexedDB 中实现这样的功能有哪些可能性？我不完全了解如何在 IndexedDB 等环境中创建有序列表，因为像上面这样的快速查询不适用。

附带说明一下，我知道可以在 IndexedDB 中存储一个数组，但是我每次都会使用一条记录。我宁愿寻找一种方法来以某种方式拥有所有记录的有序列表（每个记录代表一个注释），并能够更新排序（如上面的移位查询）。

有人可以对有序列表的 IndexedDB 方式有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T23:29:56.520

与许多事情一样，有几种方法可以解决这个问题。

如果您正在创建一个根据创建时间排序笔记的应用程序，它就像使用自动递增键一样简单（此标志在`objectStore`创建时指定）。请注意，一个将具有 1 的`id`(aka `primaryKey`)，第二个是 2，依此类推。这将使用 default `keyPath`，因此您可以打开游标而无需创建索引。

要按可能更改的内容（例如按时修改）对注释进行排序，您将在该字段上创建一个索引，并确保指定它的时间`adding`或`putting`对象。您将打开一个具有下限的游标，例如`0`（按字典顺序排列的键意味着这在所有字符串之前）并保持上限打开。然后，您将光标在每一行上逐个触发`onsuccess`处理程序，直到您用尽光标并返回 null in `event. target.result`。

听起来您可能正在寻找诸如“位置”和订单之类的字段。如上所述，使用常规索引和游标完全可以做到这一点。一个建议是让`position`field 成为浮点数而不是整数，因为前者可以更新顺序而无需更改任何其他行 ( `position n = ( ( position 1 + position 2 ) / 2 )`)。

# java - 解析（字符串）方程的解释器和数据结构

> ID：10062366
> 
> 赞同：1
> 
> 时间：2012-04-08T11:15:36.700
> 
> 标签：java, math, data-structures, interpreter, equation

我正在寻找可以处理以下字符串的 Java 解释器和/或数据结构：

```
x^2+y^2+z^2 = 1" 
```

`+`并通过, `-`,定界符解释它，`=`然后用其他操作如`^`.

这都是为了一个 3D 绘图项目，所以我也在寻找一种工具，可以隔离这种字符串/数据结构中的一个变量。

如果您知道这样的结构/解释器/工具，或者对如何实现它有任何想法，我很想听听您的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:54:05.093

可以使用[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)解析这样的表达式。解析器可以直接编写，或者如果语法变得复杂，可以使用解析器生成器，例如[antlr](http://www.antlr.org/)。表达式可以转换为抽象语法树，或者在解析时进行评估。

# c# - Regex stops after first line matched

> ID：10062367
> 
> 赞同：0
> 
> 时间：2012-04-08T11:15:42.063
> 
> 标签：c#, regex

Ok so I have a regex and I need it to find matches in a multiline string. This is the string I am using:

```
Device Identifier:        disk0
Device Node:              /dev/disk0
Part of Whole:            disk0
Device / Media Name:      OCZ-VERTEX2 Media 

Volume Name:              Not applicable (no file system)

Mounted:                  Not applicable (no file system)

File System:              None

Content (IOContent):      GUID_partition_scheme
OS Can Be Installed:      No
Media Type:               Generic
Protocol:                 SATA
SMART Status:             Verified

Total Size:               240.1 GB (240057409536 Bytes) (exactly 468862128 512-Byte-Blocks)
Volume Free Space:        Not applicable (no file system)
Device Block Size:        512 Bytes

Read-Only Media:          No
Read-Only Volume:         Not applicable (no file system)
Ejectable:                No

Whole:                    Yes
Internal:                 Yes
Solid State:              Yes
OS 9 Drivers:             No
Low Level Format:         Not supported 
```

Basically I need to separate each line into two groups with the colon as the separator. The regex I am using is:

```
@"([A-Za-z0-9\(\) \-\/]+):([A-Za-z0-9\(\) \-\/]+).*" 
```

It does work but only picks up the first line and separates it into the two groups like I want but it stops at that point. I have tried the Multiline option but it doesn't make any difference.

I must admit I am new to the regex world.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:31:06.123

The following example seems to work, and also uses named groups to make comprehension of the regular expression a bit easier.

```
 var rgx = new System.Text.RegularExpressions.Regex(@"(?<Key>[^:\r\n]+):([\s]*)(?<Value>[^\r\n]*)");
    foreach (var match in rgx.Matches(str).Cast<Match>())
    {
        Console.WriteLine("{0}: {1}", match.Groups["Key"].Value, match.Groups["Value"].Value);
    } 
```

For fun, this converts the whole thing to an easy to use dictionary:

```
var dictionary = rgx.Matches(str).Cast<Match>().ToDictionary(match => match.Groups["Key"].Value, match => match.Groups["Value"].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:26:56.730

The problem with your Regex is the last .*. It matches the \r\n and so the whole rest string is matched.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:29:10.893

I would suggest using `String.Split` instead. Assuming all your keys are unique:

```
string[] lines = str.Split(new char[] { '\r', '\n'} , 
    StringSplitOptions.RemoveEmptyEntries);

Dictionary<string, string> dict = lines.ToDictionary(
    line => line.Split(':').First(), 
    line => line.Split(new char[] { ':' }, 2).Last().Trim()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T11:31:46.043

If you are using the regex option SingleLine then the `.*` while match the entire remaining string and so there is only one match.

SingleLine tells the regex parser to additionally accept line feeds (ie `\n`) when doing a match on `.`

Do you even need the .* at all?

Alternative you could use

```
^([A-Za-z0-9\(\) \-\/]+):([A-Za-z0-9\(\) \-\/]+)$ 
```

Aslong as you use it with the regex option MultiLine to make ^$ match start and end of lines rather than string.

# c++ - 覆盖类的不同返回值

> ID：10062373
> 
> 赞同：0
> 
> 时间：2012-04-08T11:16:39.333
> 
> 标签：c++, class, inheritance, polymorphism, overriding

> **可能重复：**
> [C++ 虚函数返回类型](https://stackoverflow.com/questions/4665117/c-virtual-function-return-type)

我在这里有一个简单但令人困惑的问题。重写方法的返回值类型与基类中定义的抽象方法不同是否合法？我这样做了，编译器没有抱怨......有人可以解释一下吗？

```
class MyBaseClass
{
    int value;

public:
    virtual int getValue() = 0;
};

class MyClass : public MyBaseClass
{
    double value;

public:
    virtual double getValue(); // here!!! return is double, not int
};

double MyClass::getValue()
{
   return this->value;
} 
```

编译器完全接受了类似的东西（MSVC und MinGW）......谁能解释一下这在多大程度上是合法的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:28:56.840

返回类型允许不同，但仅限于限制性的方式，并且您的代码是非法的。允许覆盖的返回类型不同的唯一方法是，如果基的返回类型是指针或引用，则它可以是协变的。换句话说：如果基类返回一个指针或对基类的引用，则允许覆盖分别返回对基类派生类的指针或引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:55:42.873

你压倒一切吗？看起来你已经写了一个方法，没有别的。

# wpf - 从十六进制颜色值创建 SolidColorBrush

> ID：10062376
> 
> 赞同：142
> 
> 时间：2012-04-08T11:16:49.497
> 
> 标签：wpf

我想从 #ffaacc 等十六进制值创建 SolidColorBrush。我怎样才能做到这一点？

在 MSDN 上，我得到：

```
SolidColorBrush mySolidColorBrush = new SolidColorBrush();
mySolidColorBrush.Color = Color.FromArgb(255, 0, 0, 255); 
```

所以我写了（考虑到我的方法接收颜色为`#ffaacc`）：

```
Color.FromRgb(
  Convert.ToInt32(color.Substring(1, 2), 16), 
  Convert.ToInt32(color.Substring(3, 2), 16), 
  Convert.ToInt32(color.Substring(5, 2), 16)); 
```

但这给出了错误

`The best overloaded method match for 'System.Windows.Media.Color.FromRgb(byte, byte, byte)' has some invalid arguments`

还有3个错误：`Cannot convert int to byte.`

但是 MSDN 示例是如何工作的呢？

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-05-22T21:09:01.587

试试这个：

```
(SolidColorBrush)new BrushConverter().ConvertFrom("#ffaacc"); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-05-24T19:35:27.100

我一直在使用：

```
new SolidColorBrush((Color)ColorConverter.ConvertFromString("#ffaacc")); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-08T11:50:07.383

[如何使用 .NET 从十六进制颜色代码中获取颜色？](https://stackoverflow.com/questions/2109756/how-to-get-color-from-hex-color-code-using-net)

我认为这就是你所追求的，希望它能回答你的问题。

要使您的代码正常工作，请使用 Convert.ToByte 而不是 Convert.ToInt...

```
string colour = "#ffaacc";

Color.FromRgb(
Convert.ToByte(colour.Substring(1,2),16),
Convert.ToByte(colour.Substring(3,2),16),
Convert.ToByte(colour.Substring(5,2),16)); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-08T19:28:56.780

```
using System.Windows.Media;

byte R = Convert.ToByte(color.Substring(1, 2), 16);
byte G = Convert.ToByte(color.Substring(3, 2), 16);
byte B = Convert.ToByte(color.Substring(5, 2), 16);
SolidColorBrush scb = new SolidColorBrush(Color.FromRgb(R, G, B));
//applying the brush to the background of the existing Button btn:
btn.Background = scb; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-08-18T09:54:46.580

如果您不想每次都处理转换的痛苦，只需创建一个扩展方法。

```
public static class Extensions
{
    public static SolidColorBrush ToBrush(this string HexColorString)
    {
        return (SolidColorBrush)(new BrushConverter().ConvertFrom(HexColorString));
    }    
} 
```

然后像这样使用：`BackColor = "#FFADD8E6".ToBrush()`

或者，如果您可以提供一种方法来做同样的事情。

```
public SolidColorBrush BrushFromHex(string hexColorString)
{
    return (SolidColorBrush)(new BrushConverter().ConvertFrom(hexColorString));
}

BackColor = BrushFromHex("#FFADD8E6"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-15T11:09:14.283

vb.net版

```
Me.Background = CType(New BrushConverter().ConvertFrom("#ffaacc"), SolidColorBrush) 
```

# java - 我可以通过可执行名称来处理进程吗？

> ID：10062377
> 
> 赞同：0
> 
> 时间：2012-04-08T11:16:53.437
> 
> 标签：java, jna, user32, kernel32

我正在使用 JNA 来使用 user32.dll 和 kernel32.dll 。如果我指定`title`进程的，我有可以给我句柄的示例代码。

```
hWnd = User32.FindWindowA(null, "Call of Duty®: Modern Warfare® 3 Multiplayer"); 
```

我真的不想通过`Title`. 有没有采用exe名称的方法？像这样：

```
hWnd = User32.FindWindowByExecutable ( "iw5mp.exe" ); 
```

因此，如果此进程未运行，它将返回 0，否则将返回句柄。

此外，当使用 JNA 时，eclipse 显然无法自动建议 User32 或 Kernel32 dll 中存在的方法。那么，在这种情况下你会怎么做。只是谷歌可能的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-12T18:42:50.347

在 Java 9 中，多亏了[JEP 102](http://openjdk.java.net/jeps/102)，可以使用新[`ProcessHandle`](http://download.java.net/java/jdk9/docs/api/java/lang/ProcessHandle.html)接口获取给定可执行名称的进程句柄：

```
Optional<ProcessHandle> findByExactCommand(String command) {
    return ProcessHandle.allProcesses().filter(process -> {
        Optional<String> cmd = process.info().command();
        return cmd.isPresent() && cmd.get().equals(command);
    }).findFirst();
} 
```

[从字面上回答标题中的问题，忽略 JNA 方面，但阅读评论似乎是 OP 所追求的：]

> 我认为 java 中没有类似 Process.GetProcesses 的东西

好吧，现在有；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T13:15:20.277

作为第二个参数传递给 FindWindow() 的字符串不是进程的标题。它是某个窗口的标题。FindWindow() 返回的值是（惊喜！）窗口句柄，而不是进程句柄。

如果您要查找的窗口标题可能会更改，我建议您按类名（FindWindow 的第一个参数）搜索窗口，而第二个参数为空。

Windows 应用程序窗口的类别可能由 Microsoft Spy++ 或类似软件确定。

# spring - 春天的窗户范围？

> ID：10062387
> 
> 赞同：0
> 
> 时间：2012-04-08T11:18:11.143
> 
> 标签：spring, inversion-of-control, applicationcontext

我想知道弹簧范围相当于窗口范围吗？根据这里的文档 [http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html)

我找不到任何东西，所以如果有自定义范围等价物，谁能告诉我，谢谢。

编辑：JSF 中的窗口范围示例

[http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=popup](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=popup)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T16:56:13.970

一种可能的方法是拥有一个包含所有窗口会话的会话范围 bean，以及一个通过该会话范围 bean 访问相应 bean 的窗口自定义范围。

所需的类是：

## 窗口会话

```
public class WindowSession {
    private Map<String, Map<String,Object>> scopeMap = new HashMap<String, Map<String,Object>>();
    private Map<String, Boolean> validSessions = new HashMap<String, Boolean>();

    public WindowSession() {
        super();
    }

    public Map<String, Map<String, Object>> getScopeMap() {
        return scopeMap;
    }

    public void setScopeMap(Map<String, Map<String, Object>> scopeMap) {
        this.scopeMap = scopeMap;
    }

    public Map<String, Boolean> getValidSessions() {
        return validSessions;
    }

    public void setValidSessions(Map<String, Boolean> validSessions) {
        this.validSessions = validSessions;
    }

} 
```

## WindowIdContext

```
@Service
@Scope(value="request", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class WindowIdContext {

    public static final String DEFAULT_SESSION_ID = "";

    private String id = DEFAULT_SESSION_ID;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getQueryParamWithSessionId() {
        if (DEFAULT_SESSION_ID.equals(id)) {
            return "";
        }
        return "?" + WindowScope.WINDOW_ID_PARAM + "=" + id;
    }
} 
```

## 窗口会话上下文

```
@Service
@Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class WindowSessionContext {

    private static SecureRandom random = new SecureRandom();

    private WindowSession windowSession = new WindowSession();

    @Autowired
    private WindowIdContext windowIdContext;

    public WindowSessionContext() {
        windowSession.getValidSessions().put(WindowIdContext.DEFAULT_SESSION_ID, false);
    }

    public Object getObject(String name, ObjectFactory<?> objectFactory) {
        String sessionId = windowIdContext.getId();
        synchronized(this) {
            if (!windowSession.getValidSessions().containsKey(sessionId)) {
                windowSession.getValidSessions().put(sessionId, false);
            }
            Map<String,Object> sessionMap = windowSession.getScopeMap().get(sessionId);
            if (sessionMap == null) {
                sessionMap = new HashMap<String,Object>();
                windowSession.getScopeMap().put(sessionId, sessionMap);
            }
            Object object = sessionMap.get(name);
            if (object == null) {
                object = objectFactory.getObject();
                sessionMap.put(name, object);
            }
            return object;
        }
    }

    public Object removeObject(String name) {
        String sessionId = windowIdContext.getId();
        synchronized(this) {
            Map<String,Object> sessionMap = windowSession.getScopeMap().get(sessionId);
            if (sessionMap == null) {
                return null;
            }
            Object object = sessionMap.remove(name);
            return object;
        }
    }

    public String addSession() {
        synchronized(this) {
            String sessionId;
            do {
                sessionId = new BigInteger(130, random).toString(32);
            } while (windowSession.getValidSessions().containsKey(sessionId));
            windowSession.getValidSessions().put(sessionId, false);
            return sessionId;
        }
    }

    public void removeSession() {
        String sessionId = windowIdContext.getId();
        synchronized(this) {
            windowSession.getScopeMap().remove(sessionId);
            windowSession.getValidSessions().remove(sessionId);
        }
    }

    public boolean isSessionValid(String sessionId) {
        Boolean inUse = windowSession.getValidSessions().get(sessionId);
        return inUse != null;
    }

    public boolean isSessionInUse(String sessionId) {
        Boolean inUse = windowSession.getValidSessions().get(sessionId);
        return inUse == true;
    }

    public synchronized boolean invalidateSession(String sessionId) {
        Boolean valid = windowSession.getValidSessions().get(sessionId);
        if (valid == null) {
            return false;
        }
        if (sessionId.equals(WindowIdContext.DEFAULT_SESSION_ID)) {
            windowSession.getValidSessions().put(sessionId, false);
        } else {
            windowSession.getValidSessions().remove(sessionId);
        }
        windowSession.getScopeMap().remove(sessionId);
        for (Entry<String,Boolean> validSession : windowSession.getValidSessions().entrySet()) {
            if (validSession.getValue() == true) {
                return false;
            }
        }
        return true;
    }

    public synchronized void setSessionInUse(String sessionId) {
        windowSession.getValidSessions().put(sessionId, true);
    }

    public int getCount() {
        return windowSession.getValidSessions().size();
    }
} 
```

## 视窗镜

```
public class WindowScope implements Scope {

    private final int scope;
    private static final int WINDOW_SCOPE = 40;
    public static final String NAME = "window";
    public static final String WINDOW_ID_PARAM = "windowid";

    private ServletContext servletContext = null;

    public WindowScope(ServletContext sc) {
        servletContext = sc;
        this.scope = WINDOW_SCOPE;
    }

    @Override
    public Object get(String name, ObjectFactory<?> objectFactory) {
        ApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);
        WindowSessionContext windowSessionContext = applicationContext.getBean(WindowSessionContext.class);
        return windowSessionContext.getObject(name, objectFactory);
    }

    @Override
    public Object remove(String name) {
        ApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);
        WindowSessionContext windowSessionContext = applicationContext.getBean(WindowSessionContext.class);
        return windowSessionContext.removeObject(name);
    }

    @Override
    public String getConversationId() {
        return RequestContextHolder.currentRequestAttributes().getSessionId();
    }

    @Override
    public void registerDestructionCallback(String arg0, Runnable arg1) {
    }

    @Override
    public Object resolveContextualObject(String key) {
        return null;
    }

    protected int getScope() {
        return this.scope;
    }

} 
```

## WindowScopeFilter

```
@Component("windowScopeFilter")
public class WindowScopeFilter implements Filter {

    @Autowired
    private WindowSessionContext windowSessionContext;

    @Autowired
    private WindowIdContext windowIdContext;

    public void destroy() {
    }

    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpRequest = (HttpServletRequest)request;
        HttpServletResponse httpResponse = (HttpServletResponse)response;
        String sessionId = httpRequest.getParameter(WindowScope.WINDOW_ID_PARAM);
        if (sessionId != null) {
            if (windowSessionContext.isSessionValid(sessionId)) {
                windowIdContext.setId(sessionId);
            } else {
                httpResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED);
            }
        } else {
            windowSessionContext.setSessionInUse(WindowIdContext.DEFAULT_SESSION_ID);
        }
        chain.doFilter(request, response);
    }

    public void init(FilterConfig config) throws ServletException {
    }

} 
```

## WindowScopeListener

```
@Component
public class WindowScopeListener implements ApplicationListener<ContextRefreshedEvent> {

    @Override
    public void onApplicationEvent(ContextRefreshedEvent event) {
        WebApplicationContext applicationContext = (WebApplicationContext)event.getApplicationContext();
        Scope windowScope = new WindowScope(applicationContext.getServletContext());
        ConfigurableBeanFactory beanFactory = (ConfigurableBeanFactory)applicationContext.getAutowireCapableBeanFactory();
        beanFactory.registerScope("window", windowScope);
    }

} 
```

带有完整源代码的源代码：http: [//notwithoutmycode.com/post/window/scope/in/spring](http://notwithoutmycode.com/post/window/scope/in/spring)

# mongodb - Symfony2 Mongodb 学说错误 spl_object_hash()

> ID：10062391
> 
> 赞同：0
> 
> 时间：2012-04-08T11:18:24.533
> 
> 标签：mongodb, symfony, doctrine-orm

我明白了

警告：spl_object_hash() 期望参数 1 是对象，布尔值在 /Path/vendor/doctrine-mongodb-odm/lib/Doctrine/ODM/MongoDB/UnitOfWork.php 第 1504 行中给出

当我尝试执行 $dm->flush(); 时出错 我坚持这样的对象

```
$eve = new Event();
$eve->setEvent($event); 
```

这`$event`是使用 setEvent() 函数转换为对象的数组。

事件类如下所示。

```
 <?php
namespace CE\MainBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document(collection="events")
 * @MongoDB\Index(keys={"coordinates"="2d"})
 */
Class Event{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     * @MongoDB\Index(unique=true,order="asc")
     */
    protected $eid;

    /**
     * @MongoDB\Int
     */    
    protected $start_time;

    /**
     * @MongoDB\Int
     */    
    protected $end_time;

    /**
     * @MongoDB\String
     */
    protected $title;

    /**
     * @MongoDB\String
     */
    protected $description;

    /**
     * @MongoDB\String
     */
    protected $host;

    /**
     * @MongoDB\String
     */
    protected $location;

    /**
     * @MongoDB\String
     */
    protected $pic_square;

    /** 
     * @MongoDB\EmbedOne(targetDocument="Coordinates") 
     */
    protected $coordinates=array(); 

    /**
     * @MongoDB\Int
     * @MongoDB\Index(order="asc")
     */
    protected $city_id;

    /**
     * @MongoDB\String
     */
    protected $city_name;

    /**
     * @MongoDB\String
     */
    protected $country;

    /**
     * @MongoDB\String
     */
    protected $timezone;

    /**
     * @MongoDB\String
     */
    protected $owner;

    /**
     * @MongoDB\Collection
     * @MongoDB\Index(order="asc")
     */
    protected $tags = array();

    /** 
     * @MongoDB\EmbedOne(targetDocument="Event_status") 
     */
    protected $event_status = array();

    /**
     * Get id
     *
     * @return id $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set eid
     *
     * @param string $eid
     */
    public function setEid($eid)
    {
        $this->eid = $eid;
    }

    /**
     * Get eid
     *
     * @return string $eid
     */
    public function getEid()
    {
        return $this->eid;
    }

    /**
     * Set start_time
     *
     * @param int $startTime
     */
    public function setStartTime($startTime)
    {
        $this->start_time = $startTime;
    }

    /**
     * Get start_time
     *
     * @return int $startTime
     */
    public function getStartTime()
    {
        return $this->start_time;
    }

    /**
     * Set end_time
     *
     * @param int $endTime
     */
    public function setEndTime($endTime)
    {
        $this->end_time = $endTime;
    }

    /**
     * Get end_time
     *
     * @return int $endTime
     */
    public function getEndTime()
    {
        return $this->end_time;
    }

    /**
     * Set title
     *
     * @param string $title
     */
    public function setTitle($title)
    {
        $this->title = $title;
    }

    /**
     * Get title
     *
     * @return string $title
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set description
     *
     * @param string $description
     */
    public function setDescription($description)
    {
        $this->description = $description;
    }

    /**
     * Get description
     *
     * @return string $description
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set host
     *
     * @param string $host
     */
    public function setHost($host)
    {
        $this->host = $host;
    }

    /**
     * Get host
     *
     * @return string $host
     */
    public function getHost()
    {
        return $this->host;
    }

    /**
     * Set location
     *
     * @param string $location
     */
    public function setLocation($location)
    {
        $this->location = $location;
    }

    /**
     * Get location
     *
     * @return string $location
     */
    public function getLocation()
    {
        return $this->location;
    }

    /**
     * Set pic_square
     *
     * @param string $picSquare
     */
    public function setPicSquare($picSquare)
    {
        $this->pic_square = $picSquare;
    }

    /**
     * Get pic_square
     *
     * @return string $picSquare
     */
    public function getPicSquare()
    {
        return $this->pic_square;
    }

    /**
     * Set coordinates
     *
     * @param CE\MainBundle\Document\coordinates $coordinates
     */
    public function setCoordinates(\CE\MainBundle\Document\Coordinates $coordinates)
    {
        $this->coordinates = $coordinates;
    }

    /**
     * Get coordinates
     *
     * @return CE\MainBundle\Document\coordinates $coordinates
     */
    public function getCoordinates()
    {
        return $this->coordinates;
    }

    /**
     * Set city_id
     *
     * @param int $cityId
     */
    public function setCityId($cityId)
    {
        $this->city_id = $cityId;
    }

    /**
     * Get city_id
     *
     * @return int $cityId
     */
    public function getCityId()
    {
        return $this->city_id;
    }

    /**
     * Set city_name
     *
     * @param string $cityName
     */
    public function setCityName($cityName)
    {
        $this->city_name = $cityName;
    }

    /**
     * Get city_name
     *
     * @return string $cityName
     */
    public function getCityName()
    {
        return $this->city_name;
    }

    /**
     * Set country
     *
     * @param string $country
     */
    public function setCountry($country)
    {
        $this->country = $country;
    }

    /**
     * Get country
     *
     * @return string $country
     */
    public function getCountry()
    {
        return $this->country;
    }

    /**
     * Set timezone
     *
     * @param string $timezone
     */
    public function setTimezone($timezone)
    {
        $this->timezone = $timezone;
    }

    /**
     * Get timezone
     *
     * @return string $timezone
     */
    public function getTimezone()
    {
        return $this->timezone;
    }

    /**
     * Set owner
     *
     * @param int $owner
     */
    public function setOwner($owner)
    {
        $this->owner = $owner;
    }

    /**
     * Get owner
     *
     * @return int $owner
     */
    public function getOwner()
    {
        return $this->owner;
    }

    /**
     * Set tags
     *
     * @param collection $tags
     */
    public function setTags($tags)
    {
        $this->tags = $tags;
    }

    /**
     * Get tags
     *
     * @return collection $tags
     */
    public function getTags()
    {
        return $this->tags;
    }

    /**
     * Set event_status
     *
     * @param CE\MainBundle\Document\event_status $eventStatus
     */
    public function setEventStatus(\CE\MainBundle\Document\Event_status $eventStatus)
    {
        $this->event_status = $eventStatus;
    }

    /**
     * Get event_status
     *
     * @return CE\MainBundle\Document\event_status $eventStatus
     */
    public function getEventStatus()
    {
        return $this->event_status;
    }

    public function setEvent($event){
        $this->eid = $event['eid'];
        $this->start_time = $event['start_time'];
        $this->end_time = $event['end_time'];
        $this->description = $event['description'];
        $this->host = $event['host'];
        $this->location = $event['location'];
        $this->pic_square = $event['pic_square'];
        $this->city_id = (int)$event['city_id'];
        $this->city_name = $event['city_name'];
        $this->country = $event['country'];
        $this->timezone = $event['timezone'];
        $this->owner = $event['owner'];
        $this->title = $event['title'];
        $this->tags = $event['tags'];
        $loc=new Coordinates();
        $loc->setLongitude($event['coordinates']['longitude']);
        $loc->setLatitude($event['coordinates']['latitude']);
        $this->coordinates = $loc;
        $stat = new Event_status();
        $stat->setAttendCount($event['event_status']['attend_count']);
        $stat->setAttendList($event['event_status']['attend_list']);
        $stat->setClickCount($event['event_status']['click_count']);
        $this->event_status = $stat;
    }
}

/** 
 * @MongoDB\EmbeddedDocument 
 */
Class Coordinates{
    /**
     * @MongoDB\Float
     */
    protected $longitude;

    /**
     * @MongoDB\Float
     */
    protected $latitude;

    /**
     * Set longitude
     *
     * @param float $longitude
     */
    public function setLongitude($longitude)
    {
        $this->longitude = $longitude;
    }

    /**
     * Get longitude
     *
     * @return float $longitude
     */
    public function getLongitude()
    {
        return $this->longitude;
    }

    /**
     * Set latitude
     *
     * @param float $latitude
     */
    public function setLatitude($latitude)
    {
        $this->latitude = $latitude;
    }

    /**
     * Get latitude
     *
     * @return float $latitude
     */
    public function getLatitude()
    {
        return $this->latitude;
    }
}

/** 
 * @MongoDB\EmbeddedDocument 
 */
Class Event_status{
    /**
     * @MongoDB\Int
     */
    protected $attend_count;

    /**
     * @MongoDB\Int
     * @MongoDB\Index(order="desc")
     */
    protected $click_count;

    /**
     * @MongoDB\Collection
     */
    protected $attend_list = array();   

    /**
     * Set attend_count
     *
     * @param int $attendCount
     */
    public function setAttendCount($attendCount)
    {
        $this->attend_count = $attendCount;
    }

    /**
     * Get attend_count
     *
     * @return int $attendCount
     */
    public function getAttendCount()
    {
        return $this->attend_count;
    }

    /**
     * Set click_count
     *
     * @param int $clickCount
     */
    public function setClickCount($clickCount)
    {
        $this->click_count = $clickCount;
    }

    /**
     * Get click_count
     *
     * @return int $clickCount
     */
    public function getClickCount()
    {
        return $this->click_count;
    }

    public function incClickCount($i){
        $this->click_count = $this->click_count + $i;
    }

    /**
     * Set attend_list
     *
     * @param collection $attendList
     */
    public function setAttendList($attendList)
    {
        $this->attend_list = $attendList;
    }

    /**
     * Get attend_list
     *
     * @return collection $attendList
     */
    public function getAttendList()
    {
        return $this->attend_list;
    }
} 
```

我正在尝试坚持以下对象

```
 object(CE\MainBundle\Document\Event)#302 (17) {
    ["id":protected]=>
  NULL
  ["eid":protected]=>
  string(15) "116189838391483"
  ["start_time":protected]=>
  int(1356069600)
  ["end_time":protected]=>
  int(1356080400)
  ["title":protected]=>
  string(38) "Sex on December 20, 2012  Just In Case"
  ["description":protected]=>
  string(322) "Spread the word 
Maps : http://maps.google.nl/maps?f=q&source=s_q&hl=nl&q=Vondelpark,+1071+AA+Oud-Zuid,+Amsterd%C3%A3,+Amsterdam,+Noord-Holland&sll=52.469397,5.509644&sspn=5.134105,16.907959&ie=UTF8&geocode=FR_rHgMdG0pKAA&split=0&hq=&hnear=1071+AA+Amsterdam,+Noord-Holland&ll=52.360231,4.873273&spn=0.010051,0.033023&z=16
"
  ["host":protected]=>
  string(19) "Sébastien Carvalho"
  ["location":protected]=>
  string(21) "Amsterdam, VondelPark"
  ["pic_square":protected]=>
  string(89) "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/71137_116189838391483_7509117_q.jpg"
  ["coordinates":protected]=>
  object(CE\MainBundle\Document\Coordinates)#344 (2) {
    ["longitude":protected]=>
    float(4.88969)
    ["latitude":protected]=>
    float(52.37403)
  }
  ["city_id":protected]=>
  int(2759794)
  ["city_name":protected]=>
  string(9) "Amsterdam"
  ["country":protected]=>
  string(11) "Netherlands"
  ["timezone":protected]=>
  string(16) "Europe/Amsterdam"
  ["owner":protected]=>
  string(10) "1345873725"
  ["tags":protected]=>
  array(39) {
    [0]=>
    string(3) "sex"
    [1]=>
    string(6) "decemb"
    [2]=>
    string(4) "just"
    [3]=>
    string(4) "case"
    [4]=>
    string(6) "spread"
    [5]=>
    string(4) "word"
    [6]=>
    string(3) "map"
    [7]=>
    string(1) ":"
    [8]=>
    string(5) "http:"
    [9]=>
    string(5) "googl"
    [10]=>
    string(2) "nl"
    [11]=>
    string(1) "f"
    [12]=>
    string(1) "q"
    [13]=>
    string(5) "sourc"
    [14]=>
    string(0) ""
    [15]=>
    string(2) "hl"
    [16]=>
    string(10) "vondelpark"
    [17]=>
    string(2) "aa"
    [18]=>
    string(3) "oud"
    [19]=>
    string(4) "zuid"
    [20]=>
    string(7) "amsterd"
    [21]=>
    string(2) "c3"
    [22]=>
    string(2) "a3"
    [23]=>
    string(9) "amsterdam"
    [24]=>
    string(5) "noord"
    [25]=>
    string(7) "holland"
    [26]=>
    string(3) "sll"
    [27]=>
    string(4) "sspn"
    [28]=>
    string(2) "ie"
    [29]=>
    string(4) "utf8"
    [30]=>
    string(6) "geocod"
    [31]=>
    string(2) "fr"
    [32]=>
    string(11) "rhgmdg0pkaa"
    [33]=>
    string(5) "split"
    [34]=>
    string(2) "hq"
    [35]=>
    string(5) "hnear"
    [36]=>
    string(2) "ll"
    [37]=>
    string(3) "spn"
    [38]=>
    string(1) "z"
  }
  ["event_status":protected]=>
  object(CE\MainBundle\Document\Event_status)#305 (3) {
    ["attend_count":protected]=>
    int(0)
    ["click_count":protected]=>
    int(0)
    ["attend_list":protected]=>
    array(0) {
    }
  }
} 
```

请告诉我错误在哪里？

# java - eclipse 无法从 java 源代码生成设计视图

> ID：10062397
> 
> 赞同：1
> 
> 时间：2012-04-08T11:19:14.687
> 
> 标签：java, eclipse, swt

我有以下情况

我有一个 swt 类，它在一个项目中显示一个简单的窗口。在这个项目中，我可以分别查看设计视图和代码视图。现在在另一个项目中，我正在复制和粘贴我在以前的项目中开发的类（同时使用相同的 IDE）。因此，它无法显示 swt 类的设计视图。

问题的另一种情况是，当在一台机器上设计一个 swt 类时，如果我使用外部媒体从另一台机器将该项目导入到我的 IDE 中，那么它也无法向我显示 swt 类的设计器视图。

我怎么解决这个问题？这个问题有没有标准的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:16:35.347

好吧，有一天熟悉了eclipse之后，我才知道我们可以`Open With -> GWT Designer`在eclipse中查看SWT表单的设计部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:26:21.187

也许这是一个愚蠢的问题，但是您是否尝试过右键单击并使用可视化编辑器打开，或者类似的东西？

或者，也许您只复制非可视类中的代码......

# .net - XAML中如何基于绑定选择画笔

> ID：10062402
> 
> 赞同：1
> 
> 时间：2012-04-08T11:19:56.400
> 
> 标签：.net, wpf, xaml, binding, resources

我在 Application.xaml 中定义了数百个画笔。这些是项目中多个用户控件的共享资源。它们都有图案键：ch_YSD、ch_HJU、ch_IYO...

我尝试在数据模板中使用这些画笔。在数据模板中，我可以访问画笔键的可变部分，即在数据模板中，我可以将 YSD、HJU、IYO 等作为字符串。

如何从 xaml 绑定到特定的画笔资源？

目前我有这样的解决方案：在样式中使用数据触发器根据绑定的字符串（键的可变部分）将所需的属性设置为指定的画笔。我对这个解决方案不满意，因为 Application.xaml 中的画笔列表会经常增加。

我不确定是否应该使用后面的代码，因为我想在 Application.xaml 中使用共享资源的内存节省优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:59:18.030

这是一种看似简单，但实际上没有完美解决方案的任务（或者我没有找到）。第一种方法是使用值转换器。但它不起作用！我们需要设置转换器无法正确完成的资源引用。所以，我认为正确的方法是依附行为。但是您应该了解限制：只能将资源应用于一个属性。也许您可以根据您的要求避免此限制。

附加行为允许您将具有指定名称的资源引用到指定的依赖属性：

```
public static class BrushResourceKeyBehavior
{
    #region ResourceKey Property

    public static readonly DependencyProperty ResourceKeyProperty = DependencyProperty.RegisterAttached(
        "ResourceKey", typeof(object), typeof(BrushResourceKeyBehavior),
        new FrameworkPropertyMetadata(OnResourceKeyChanged));

    public static object GetResourceKey(DependencyObject dependencyObject)
    {
        return dependencyObject.GetValue(ResourceKeyProperty);
    }

    public static void SetSource(DependencyObject dependencyObject, object value)
    {
        dependencyObject.SetValue(ResourceKeyProperty, value);
    }

    #endregion

    #region TargetProperty Property

    public static readonly DependencyProperty TargetPropertyProperty = DependencyProperty.RegisterAttached(
        "TargetProperty", typeof(DependencyProperty), typeof(BrushResourceKeyBehavior),
        new FrameworkPropertyMetadata(OnTargetPropertyChanged));

    public static DependencyProperty GetTargetProperty(DependencyObject dependencyObject)
    {
        return (DependencyProperty)dependencyObject.GetValue(TargetPropertyProperty);
    }

    public static void SetTargetProperty(DependencyObject dependencyObject, DependencyProperty value)
    {
        dependencyObject.SetValue(TargetPropertyProperty, value);
    }

    #endregion

    private static void OnResourceKeyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        var targetProperty = GetTargetProperty(dependencyObject);
        if (targetProperty != null)
        {
            if (e.NewValue == null)
            {
                dependencyObject.ClearValue(targetProperty);
            }
            else
            {
                SetResourceReference(dependencyObject, targetProperty);
            }
        }
    }

    private static void OnTargetPropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        var oldValue = e.OldValue as DependencyProperty;
        var newValue = e.NewValue as DependencyProperty;

        if (oldValue != null)
        {
            dependencyObject.ClearValue(oldValue);
        }

        if (newValue != null)
        {
            SetResourceReference(dependencyObject, newValue);
        }
    }

    private static void SetResourceReference(DependencyObject dependencyObject, DependencyProperty targetProperty)
    {
        var fe = dependencyObject as FrameworkElement;
        if (fe != null)
        {
            fe.SetResourceReference(targetProperty, String.Format("ch_{0}", GetResourceKey(fe)));
        }
        else
        {
            var fce = dependencyObject as FrameworkContentElement;
            if (fce != null)
            {
                fce.SetResourceReference(targetProperty, String.Format("ch_{0}", GetResourceKey(fce)));
            }
        }
    }
} 
```

行为可以在 XAML 中使用，如下所示：

```
<ItemsControl>
    <Border local:BrushResourceKeyBehavior.Source="YSD"
            local:BrushResourceKeyBehavior.TargetProperty="Border.Background"
            Height="20"/>
    <Border local:BrushResourceKeyBehavior.Source="HJU"
            local:BrushResourceKeyBehavior.TargetProperty="Border.Background"
            Height="20"/>
    <Border local:BrushResourceKeyBehavior.Source="IYO"
            local:BrushResourceKeyBehavior.TargetProperty="Border.Background"
            Height="20"/>
</ItemsControl> 
```

上面的代码等价于：

```
<ItemsControl>
    <Border Background="{DynamicResource ch_YSD}"
            Height="20"/>
    <Border Background="{DynamicResource ch_HJU}"
            Height="20"/>
    <Border Background="{DynamicResource ch_IYO}"
            Height="20"/>
</ItemsControl> 
```

# php - PHP中的图像按钮无法正常工作

> ID：10062403
> 
> 赞同：0
> 
> 时间：2012-04-08T11:20:10.087
> 
> 标签：php

我的 PHP 页面上有一个图像按钮。单击此按钮时，我需要执行一段代码。我正在尝试以下。

```
<?php 
    if(isset($_POST['btnSubmit']))
    {
        echo "Do some stuff.";  
    }
?>

<input type="image" name="btnSubmit" id="btnSubmit" src="images/btnsubmit.gif"> 
```

当我单击按钮`btnSubmit`时，`if`条件应被评估为 true，并且正文中的消息`if`应回显到网页，但当我单击此按钮时，条件永远不会满足。

当我将按钮类型更改为 时`type='submit'`，它可以工作。`type='image'`我无论如何都需要使用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T11:22:39.627

它不会评估为真，因为输入没有价值。

```
<input type="image" name="btnSubmit" id="btnSubmit" src="images/btnsubmit.gif" value="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:46:57.370

您需要为此使用 JS .. 这是一个粗略的代码：

```
<input type="image" name="btnSubmit" id="btnSubmit" src="images/btnsubmit.gif" onClick="javascript:document.myform.submit()"> 
```

希望这可以帮助..

# ruby-on-rails - 带有嵌套资源的简单 Acts_as_tree

> ID：10062407
> 
> 赞同：0
> 
> 时间：2012-04-08T11:20:29.037
> 
> 标签：ruby-on-rails, nested-routes, acts-as-tree

使用 Rails 3.1.1 和 gemacts_as_tree。我已经用谷歌搜索了这个问题并在 SO 上检查了类似的问题（答案太旧或不相关）。

我有一个名为 article 的模型，其路线今天看起来像：

```
 resources :articles, :path => '', :only => :show 
  resources :articles, :path => 'articles', :except => :show 
```

我有三篇文章：“书”、“第 1 章”和“第 2 章”。book 是第 1 章和第 2 章的父级。

今天，我每篇文章的路径是：host.com/book、host.com/chapter1 和 host.com/chapter2。我希望 url 路径是 host.com/book/chapter1 和 host.com/book/chapter2 ，即嵌套路由。

如何以干净简单的方式创建它？

基本上，我想要一个路径，它将是 host.com/:parent_id/:parent_id/:id 和 N 个 :parent_id。几乎是如何路由 Wordpress 文章的。

我不相信路由 globber 是解决方案，但我可能错了。host.com/:id 和 host.com/foo/bar/:id 似乎给出了相同的结果，这将导致重复的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:47:15.903

### 一个）

如果您有路由解决方案并且唯一的问题是您担心重复的内容问题，您可以考虑添加`<link rel="canonical" href="...">`到从这些请求生成的页面中。不过，它并不是万无一失的，因为谷歌认为这是一个建议。

不确定路由 globbers 解决方案是否会负责生成具有父 ID 的 URL。

### 二）

您不需要父 ID 来执行路由，对吗？您只想将它​​们包含在 URL 中并像使用 URL 一样路由这些请求，对`example.com/chapter1`吗？

如果您考虑的解​​决方案不是纯粹在 Rails 级别，那么重写这些请求的 URL 以使其在 Rails 处理之前`/:parent_id/:parent_id/:id`成为可能呢？`/:id`如果有一个静态前缀，那会更容易，比如`/articles/:parent_id/:parent_id/:id`.

我想您需要编写一些帮助程序来生成带有父 ID 的 URL，以链接到这些资源。

### 重复内容

无论哪种方式，您都需要生成包含父 ID 的 URL，因此如果您仅使用这些 URL 链接到这些资源，则可能不太可能出现重复内容问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:09:37.667

您有三个“文章”...“书”、“章节 1”和“章节 2”都代表相同的“资源”，名为“文章”。不能嵌套相同的“资源”。如果您需要嵌套路由，则必须分别定义父资源和子资源。以下代码spinet可能会对您有所帮助

```
class Book < ActiveRecord::Base
  has_many :chapter
  accepts_nested_attributes_for :chapters
end    

class Chapter < ActiveRecord::Base
  belongs_to :book
  acts_as_tree :parent_id
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:56:19.330

```
match '*p1/*p2/*p3/.../*pn' => 'articles#show' 
```

... 不是文字，只需定义最多 n 个所需的参数。

```
URL:
host.com/book/chapter1
params[:p1] = 'book'
params[:p2] = 'chapter1'
params[:p3] = nil

URL:
host.com/book/chapter1/section2/sentence4
params[:p1] = 'book'
params[:p2] = 'chapter1'
params[:p3] = 'section2'
params[:p4] = 'sentence4'
params[:p5] = nil 
```

那必须是您的最后一条路线。

我认为这也会使任何包罗万象的路由无法运行，但它们现在在 Rails 3 的默认 routes.rb 中被注释掉，如果你使用它们，你必须手动指定通常由旧式包罗万象路由处理的所有路由.

而且，如果您有一个名为articles 的控制器，那么您永远不可能拥有与所有控制器相同的标题为“articles”的书，为了安全起见，您可能必须重命名所有控制器，即articles 变为X_articles。那时你永远不可能有一本名为 X_articles 的书，等等……

完全未经测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T19:13:08.583

你想要做的是将 Rails 用于它不适合的东西。无论您在这里得到什么答案，它要么不是 RESTful、DRY，要么与 Active Record 一起使用没有意义。考虑重新构建您的想法，或者将您的应用程序带到另一个平台，如果还不算太晚的话。

*   支持我的声明的来源：[https ://stackoverflow.com/a/174287/628859](https://stackoverflow.com/a/174287/628859)

# python - 将列表扩展 n 的最小方法

> ID：10062408
> 
> 赞同：10
> 
> 时间：2012-04-08T11:20:38.303
> 
> 标签：python, list

我想扩展一个列表

```
[1,2,3,4] 
```

由*n*

例如对于 n = 2：

```
[1,1,2,2,3,3,4,4] 
```

我正在寻找在没有任何额外库的情况下实现这一目标的最小方法。它很容易做一个循环并将每个项目 n 次附加到一个新列表中......但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T11:25:45.387

```
>>> l = [1,2,3,4]
>>> [it for it in l for _ in range(2)]
[1, 1, 2, 2, 3, 3, 4, 4] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T11:22:45.433

[`itertools` *^([文档])*](http://docs.python.org/library/itertools.html)救援：

```
expanded = list(chain(*izip(*tee(l, n)))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T11:38:09.250

我在评论中注意到了这一点，但在答案中更容易解释，所以我可以给出完整的代码示例。请注意，这更像是对其他人的伴侣回答，而不是其本身的完整回答。它只是针对特定情况的修改。

如果您需要对可变对象执行此操作，请使用此处介绍的其他方法遇到障碍：

```
>>> l = [1,2,3,[4]]
>>> test = [it for it in l for _ in range(2)]
>>> test
[1, 1, 2, 2, 3, 3, [4], [4]]
>>> test[6].append(5)
>>> test
[1, 1, 2, 2, 3, 3, [4, 5], [4, 5]] 
```

[`copy.deepcopy()`](http://docs.python.org/library/copy.html#copy.deepcopy)因此，如果你想避免这种行为，你需要使用。

```
>>> import copy
>>> l = [1,2,3,[4]]
>>> test = [copy.deepcopy(it) for it in l for _ in range(2)]
>>> test
[1, 1, 2, 2, 3, 3, [4], [4]]
>>> test[6].append(5)
>>> test
[1, 1, 2, 2, 3, 3, [4, 5], [4]] 
```

当然，这仅对列表中的可变对象是必需的，并且仅当您希望它们在创建新列表后发生更改时才需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T11:30:36.573

```
>>> from itertools import chain, tee
>>> x = [1, 2, 3, 4]
>>> n = 2
>>> list(chain.from_iterable(zip(*tee(x, n))))
[1, 1, 2, 2, 3, 3, 4, 4] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-08T11:37:47.973

```
sum([[x]*2 for x in l],[]) 
```

`l`你的清单在哪里

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T20:19:20.963

由于问题的作者在评论中回答“尽可能最小的方式”是指代码的最小长度，因此我敢于发布以下解决方案：

```
>>> sorted([1,2,3,4]*2)
[1, 1, 2, 2, 3, 3, 4, 4] 
```

它的长度是 19。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T06:19:23.423

```
>>> from itertools import repeat, chain
>>> seq = [1, 2, 3, 4]
>>> list(chain.from_iterable(repeat(x, 2) for x in seq))
[1, 1, 2, 2, 3, 3, 4, 4] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T06:21:28.463

```
>>> from itertools import chain
>>> seq = [1, 2, 3, 4]
>>> list(chain.from_iterable(zip(*[seq]*2)))
[1, 1, 2, 2, 3, 3, 4, 4]
>>> list(chain.from_iterable(zip(*[seq]*6)))
[1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4] 
```

# python - 扭曲的 self.transport.write() - Python - 附加输出

> ID：10062413
> 
> 赞同：1
> 
> 时间：2012-04-08T11:21:07.663
> 
> 标签：python, xcode, twisted

我正在使用 Twisted python 向我的客户端应用程序（iPhone 应用程序）发送回复。回复确实发给了客户端，但我在客户端收到了附加的输出字符串

这是我发送给我的客户的地方 -

```
for name in clientname:
                print "name in clientName array is"+name
                self.sendClientName(name)

def sendClientName(self , name):
    self.transport.write(name)
    print "client name sent to client app" 
```

在客户端，我收到连接的字符串 -

即：如果我在客户端名称数组中有以下内容 - Jack,Rocky 我在客户端收到以下字符串

“JackRocky” --- 我想将名称保存在数组中，所以这是一个问题。

为什么服务器不一一发送名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:06:44.007

对于 TCP 连接，不能保证两次写入将转换为另一端的两次读取，因为连接被认为是一个连续的字节流，并且缓冲可以在任何地方发生。这意味着您应该发送带有某种元素分隔符的数组。如果您在客户端和服务器上都有一个用于通用协议的序列化/反序列化库，通常最容易使用它。一个流行的例子是 JSON（Python 有一个 json 模块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:18:59.863

我在服务器脚本中的代码是错误的，没有向客户端应用程序发送适当的消息，只需要更正一个循环，现在一切正常。

# css - 使用 HTML5 时是否可以设置下拉建议的样式 ?

> ID：10062414
> 
> 赞同：31
> 
> 时间：2012-04-08T11:21:09.337
> 
> 标签：css, html, html-datalist

看这里： http: [//jsfiddle.net/zemar](http://jsfiddle.net/zemar) （必须使用Firefox或Opera才能看到）

当您单击 时`select`，下拉菜单的样式会匹配，但如果您开始从文本框中的数据列表中键入一个术语，则出现的建议没有样式，因此它与其余部分不匹配造型。

是否可以设置下拉菜单的样式？

```
* {margin:0; padding:0; font-family: arial, sans-serif; font-size: 40px; font-weight: bold; color: #444;}
body {height:100%; background:#F4F3EF;}
.select select, .input input {background: transparent; width: 220px; overflow:hidden; height: 65px; padding-left: 5px;
    padding-bottom: 5px; -webkit-appearance: none; -moz-appearance:none; appearance:none; border:none; cursor:pointer;}
.select select {padding-top: 5px;}
.select, .input {float:left; width: 220px; height: 65px; margin-right: 20px; overflow: hidden; background: #ddd;
    border: 1px solid #ccc;}
```

```
 <div class="select">
    <select id="count">
            <option value="1">A</option>
            <option value="2">A pair of</option>
            <option value="3">A few</option>
            <option value="4">Four</option>
    </select>
    </div>
    <div class="input">
        <input type="text" id="query" list="ingredients" placeholder="lamb"></input>
        <datalist id="ingredients">
            <option value="lamb">
            <option value="beef">
            <option value="chicken">
            <option value="fish">
            <option value="vegetarian">
        </datalist>
    </div>
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-09-27T10:45:40.940

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-24T16:12:39.250

据我所知，您无法设置`<datalist>`标签的样式。我推荐使用 JQuery 扩展自动完成。所以你需要在你的 html 文档中包含 JQuery。这是由 Google 托管的链接：请参阅[此处](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script`

注意：您可以通过将其包含在文档末尾并使用来获得更好的性能`$(document).ready();`

例如：

HTML：

```
<input type='text' id='input'> 
```

Javascript：

```
$(document).ready(function() {
    var arrayOfOptions = [
        "Option 1",
        "Option 2",
        "etc"
    ];

    $("#input").autocomplete({source: arrayOfOptions});
}); 
```

注意：未经测试的代码！

来源：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

您可以设置此样式，类似于设置导航的样式。以下是一些您可以设置样式的类：

```
.ui-autocomplete span.hl_results {background-color: #ffff66;}
.ui-autocomplete-loading {} //the object while it's loading (in the event of Ajax, in this case would not need this one
.ui-autocomplete {
    max-height: 250px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 5px;
}

.ui-autocomplete li {font-size: 16px;}
html .ui-autocomplete {
    height: 250px;
} 
```

# php - 带分页的 Codeigniter 搜索

> ID：10062418
> 
> 赞同：0
> 
> 时间：2012-04-08T11:21:22.907
> 
> 标签：php, jquery, ajax

我已经实现了分页搜索。控制器功能`公共功能搜索（）{

```
 if($_POST)
    {
        $search_name=$this->input->post('search_name');
        $config['base_url'] = 'search';
        $config['total_rows'] = 15;//$this->registration_model->record_count();
        $config['per_page'] = 4;
        $config["uri_segment"] = 3;
        $config['use_page_numbers'] = TRUE;
        $this->pagination->initialize($config);
        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $data['result']=$this->institute_model->search_result($config["per_page"],$page,$search_name);
        $data['links'] = $this->pagination->create_links();
        $this->load->view('institute/search',$data);
    }
}` 
```

和模型功能代码是

```
public function search_result($limit,$start,$search_name)
{
    $this->db->limit($limit, $start);
    $this->db->select('user_id');
    $this->db->where('category',1);
    $this->db->like('first_name',$search_name);
    $query = $this->db->get('registration');
    if ($query->num_rows() > 0) {

        foreach ($query->result() as $row) {

            $data[] = $row;

        }

        return $data;

    }

    return false;

} 
```

我正在从具有 userid 和 fname 等的注册表中搜索。搜索基于用户名。它对我有用，但是当我在分页上单击第 2 页时，它会转到`http://localhost/mypro/index.php/institute/search/2`并变为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:33:05.203

使用插件[Jquery 分页](https://github.com/neotohin/CodeIgniter-Ajax-pagination-Library)

在加载视图之前添加 jquery。

```
//Define model function with limit
public function modelFunction($limit=0)
    {
        $this->db->select("....col_name....");
            //....................
            //.........
        $this->db->limit(10,$limit)->order_by('id', 'desc');
        return $this->db->get()->result_array();

    }

//Define controller function with limit
function controllerFunction($limit = 0)
    {
        $config['base_url'] = path_to_controllerFunction
        $config['total_rows'] = call_to_total_count_function;
        $config['per_page'] = 10;
        $data["total"] = call_to_total_count_function;
        $config['use_page_numbers'] = TRUE;
        $data["per_page"] = 10;
        $config['full_tag_open'] = "<div class = 'pagination'>";
        $config['full_tag_close'] = "</div>";
        //$config['additional_param']  = 'serialize_form()';
        $config['div'] = '#div_to_load_result'; /* Here #content is the CSS selector for target DIV */
        //$config['js_rebind'] = "alert('it works !!'); "; /* if you want to bind extra js code */
        $this->load->library('table');
        $this->jquery_pagination->initialize($config);
        $html  =  $this->jquery_pagination->create_links();
        $html .= '<br>';
        //$this->table->function = 'htmlspecialchars';
        //$this->table->set_heading('Delivery','image','time','delivery','old');
        $html .= $this->table->generate($this->modelname->modelFunction( $limit ));

        echo $html;
    }

        // first time loading result in controller
function index()
    {
        $config['base_url'] = controllerFunction
        $config['total_rows'] = total_number_of_result;
        $config['per_page'] = 10;
        $data["total"] = total_number_of_result
        $data["per_page"] = 10;
        $config['use_page_numbers'] = TRUE;
        $config['full_tag_open'] = "<div class = 'pagination'>";
        $config['full_tag_close'] = "</div>";
        //$config['additional_param']  = 'serialize_form()';
        $config['div'] = '#div_to_load_result'; /* Here #content is the CSS selector for target DIV */
        //$config['js_rebind'] = "alert('it works !!'); "; /* if you want to bind extra js code */
        $this->load->library('table');
        $this->jquery_pagination->initialize($config);
        $data['html'] =  $this->jquery_pagination->create_links().'<br>'.$this->table->generate($this->modelname->modelFunction());

        $this->theme->view(path_of_view, $data);
    }
// now in view  add following line 
<div id="div_to_load_result"><?php echo $html; ?></div> 
```

# c++ - Direct2D 拒绝在窗口上绘制位图，静默失败

> ID：10062419
> 
> 赞同：4
> 
> 时间：2012-04-08T11:21:26.027
> 
> 标签：c++, winapi, user-interface, embedded-resource, direct2d

我正在尝试使用 Direct2D 将 128x128 位图绘制到窗口上。但是，什么都没有显示，`EndDraw()`也没有返回任何错误。

这是我的`WM_PAINT`代码：

```
case WM_PAINT:
        D2D1_RECT_F testd2dbuttonrect;

        mainwRT->BeginDraw();
        mainwRT->SetTransform( D2D1::Matrix3x2F::Identity() );

        testd2dbutton.pd2drectgm->GetRect( &testd2dbuttonrect );
        mainwRT->FillRectangle( &testd2dbuttonrect, pSolidBrush );

        //This is where I'm trying to draw my bitmap
        mainwRT->FillRectangle( D2D1::RectF(0.0f,0.0f,127.0f,127.0f), pBgndBrush );

        errmsg = mainwRT->EndDraw();
        if( !SUCCEEDED(errmsg) )
            printf("EndDraw() error: %d\r\n", errmsg );
        break; 
```

我怀疑这可能是因为我从 Visual Studio 资源加载的位图数据是垃圾，但我无法知道，因为没有任何失败并给出错误消息。这是我用来`ID2D1Bitmap`从资源加载的代码：

```
int LoadBitmapFromResource( IWICImagingFactory *pImageFactory, ID2D1RenderTarget *pRT, int resID, ID2D1Bitmap **ppD2DBitmap )
{
    int errmsg;

    HBITMAP hbitmap;
    WICBitmapAlphaChannelOption wicalpha;
    IWICBitmap *pwicbitmap;
    IWICBitmapSource *pconvertedwicbitmap;
    IWICFormatConverter *pConverter;

    ID2D1Factory *d2dfactory;
    D2D1_BITMAP_PROPERTIES d2dbp;
    D2D1_PIXEL_FORMAT d2dpf;
    FLOAT dpiX;
    FLOAT dpiY;

    hbitmap = LoadBitmap( GetModuleHandle(NULL), MAKEINTRESOURCEW(resID) );
    wicalpha = WICBitmapUseAlpha;

    errmsg = pImageFactory->CreateBitmapFromHBITMAP( hbitmap, NULL, wicalpha, &pwicbitmap );
    if( !SUCCEEDED(errmsg) )
    {
        printf("LoadBitmapFromResource::CreateBitmapFromHBITMAP() error: %x\r\n", errmsg );
        return errmsg;
    }

    errmsg = pImageFactory->CreateFormatConverter( &pConverter );
    if( !SUCCEEDED(errmsg) )
    {
        printf("LoadBitmapFromResource::CreateFormatConverter() error: %x\r\n", errmsg );
        return errmsg;
    }

    d2dpf.format = DXGI_FORMAT_B8G8R8A8_UNORM;
    d2dpf.alphaMode = D2D1_ALPHA_MODE_PREMULTIPLIED;
    pRT->GetFactory( &d2dfactory );
    d2dfactory->GetDesktopDpi( &dpiX, &dpiY );
    d2dbp.pixelFormat = d2dpf;
    d2dbp.dpiX = dpiX;
    d2dbp.dpiY = dpiY;

    pConverter->Initialize( pwicbitmap, GUID_WICPixelFormat32bppPBGRA, WICBitmapDitherTypeNone, NULL, 0.0f, WICBitmapPaletteTypeMedianCut );
    if( !SUCCEEDED(errmsg) )
    {
        printf("LoadBitmapFromResource::Initialize() error: %x\r\n", errmsg );
        return errmsg;
    }

    errmsg = WICConvertBitmapSource( GUID_WICPixelFormat32bppPBGRA, pwicbitmap, &pconvertedwicbitmap );
    if( !SUCCEEDED(errmsg) )
    {
        printf("LoadBitmapFromResource::WICConvertBitmapSource() error: %x\r\n", errmsg );
        return errmsg;
    }

    errmsg = pRT->CreateBitmapFromWicBitmap( pconvertedwicbitmap, &d2dbp, ppD2DBitmap );
    if( !SUCCEEDED(errmsg) )
    {
        printf("LoadBitmapFromResource::CreateBitmapFromWicBitmap() error: %x\r\n", errmsg );
        return errmsg;
    }

    pConverter->Release();
    pwicbitmap->Release();
    DeleteObject( hbitmap );

    return 0;
} 
```

我在 Visual Studio 2010 中使用 C++ 和本机 WinAPI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:38:00.643

我认为您仍然必须在 WM_PAINT 中使用经典的 BeginPaint()，然后进行 D2D 渲染，然后调用 EndPaint()。这就是我的代码所做的，我认为这也是 MSDN 示例代码小工具所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T22:56:11.177

从资源加载位图时我遇到了同样的问题，而 D2D 在运行 CreateBitmapFromWicBitmap 时遇到了问题。在我的同事的帮助下，关键问题是使用 WICBitmapIgnoreAlpha，因为位图没有 Alpha（至少我的资源中的 BITMAP 没有 Alpha）。

即使你不需要转换器，只需简单的代码

```
hbitmap = LoadBitmap(GetModuleHandle(NULL), MAKEINTRESOURCE(resID) );
if (hbitmap==0)
{
    SafeRelease(&pImageFactory);
    return nullptr;
}

hr = pImageFactory->CreateBitmapFromHBITMAP( hbitmap, NULL, wicalpha, &pwicbitmap );
if( !SUCCEEDED(hr) )
{
    DeleteObject( hbitmap );
    SafeRelease(&pImageFactory);
    return nullptr;
}
ID2D1Bitmap* ppD2DBitmap=nullptr;
hr = pRT->CreateBitmapFromWicBitmap( pwicbitmap, &ppD2DBitmap ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:46:43.947

调试的方法是使用各种 API 锁调用来获取指向图像数据的指针，然后通过调试器或 printf 检查图像数据，以验证数据是否符合您的预期。

HBITMAP 和 D2D 表面有不同的 Lock 调用，但可以使用相同的想法。您应该能够缩小获取不良数据的范围。

# bash - 将多字参数传递给 bash 函数

> ID：10062420
> 
> 赞同：16
> 
> 时间：2012-04-08T11:21:27.553
> 
> 标签：bash, parameters, word, split

在 bash 脚本函数中，我需要使用脚本的命令行参数以及另一个参数列表。所以我试图将两个参数列表传递给一个函数，问题是多字参数被拆分。

```
function params()
{
    for PARAM in $1; do
        echo "$PARAM"
    done

    echo .

    for ITEM in $2; do
        echo "$ITEM"
    done
}

PARAMS="$@"
ITEMS="x y 'z t'"
params "$PARAMS" "$ITEMS" 
```

调用脚本给了我

```
myscript.sh a b 'c d'
a
b
c
d
.
x
y
'z
t' 
```

由于有两个列表，它们必须作为一个整体传递给函数，问题是，如何迭代元素，同时尊重用单引号 'c d' 和 'z t' 括起来的多词项？

我拥有的解决方法（见下文）使用 BASH_ARGV，因此我只需将一个列表传递给函数。但是，我想更好地了解正在发生的事情以及完成上述工作需要什么。

```
function params()
{
    for PARAM in "${BASH_ARGV[@]}"; do
        echo "$PARAM"
    done

    echo .

    for ITEM in "$@"; do
        echo "$ITEM"
    done
}

params x y 'z t' 
```

调用脚本给了我

```
myscript.sh a b 'c d'
c d
b
a
.
x
y
z t 
```

...这就是我需要的（除了第一个列表被颠倒了，但我猜这是可以容忍的）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T12:25:40.677

```
function params()
{
   arg=("$@")

   for ((i=1;i<=$1;i++)) ;do
       echo "${arg[i]}"
   done

   echo .

   for ((;i<=$#-$1+2;i++)) ;do
       echo "${arg[i]}"
   done
}

items=(w x 'z t')
params $# "$@" "${items[@]}" 
```

假设您使用 args 调用脚本`a b 'c d'`，则输出为：

```
a
b
c d
.
x
y
z t 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:42:50.880

Peter.O 上面的答案很好用，这是一个附录，有一个例子。

我需要一个可以接受多字参数的函数或脚本，然后将其用于搜索正在运行的进程列表并杀死与其中一个参数匹配的进程。下面的脚本就是这样做的。该函数`kill_processes_that_match_arguments`只需要一个`for`循环，因为我只需要遍历该函数的所有参数集。经测试可以工作。

```
#!/bin/bash

function kill_processes_that_match_arguments()
{
    arg=("$@")
    unset PIDS_TO_BE_KILLED

    for ((i=0;i<$#;i++))
    do
        unset MORE_PIDS_TO_KILL
        MORE_PIDS_TO_KILL=$( ps gaux | grep "${arg[i]}" | grep -v 'grep' | awk '{ print $2 }' )
        if [[ $MORE_PIDS_TO_KILL ]]; then
            PIDS_TO_BE_KILLED="$MORE_PIDS_TO_KILL $PIDS_TO_BE_KILLED"
        fi
    done

    if [[ $PIDS_TO_BE_KILLED ]]; then
        kill -SIGKILL $PIDS_TO_BE_KILLED
        echo 'Killed processes:' $PIDS_TO_BE_KILLED
    else
        echo 'No processes were killed.'
    fi
}

KILL_THESE_PROCESSES=('a.single.word.argument' 'a multi-word argument' '/some/other/argument' 'yet another')
kill_processes_that_match_arguments "${KILL_THESE_PROCESSES[@]}" 
```

# javascript - 用于创建一对多对象的控制器和视图，包括“容器”和无限数量的“内容”对象？

> ID：10062422
> 
> 赞同：0
> 
> 时间：2012-04-08T11:21:37.917
> 
> 标签：javascript, ajax, model-view-controller, spring-mvc, one-to-many

用户将能够编写一些文档。这些文档将由章节组成（一对多关系）。

通常我会通过创建单独的视图来创建章节和文档来做到这一点。

如何实现允许编辑“复合”视图的网页？我可以在哪里编辑文档详细信息，还可以创建章节，而无需访问不同的页面？另外我怎样才能确保我通过章节用户安排的顺序（通过自由上下移动章节）？

（对不起，如果这个问题已经被问及回答，但我什至不知道如何搜索它：| 因为我不知道“AJAX”之外的正确关键字，所以也欢迎帮助命名我的要求！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:28:52.943

基于 REST 原则的后端服务器应用程序可以很好地与 Ajax 客户端实现配合使用。

例如，您的网址可能是：

```
/book/1
/book/1/chapters
/book/1/chapter/1 
```

您可以对其进行设置，以便在 /book/1/chapters 的 POST 中添加一章。对同一 URL 的 GET 将返回所有章节。/book/1/chapter/1/ 上的 GET 只会返回第 1 章。 /book/1/chapter/1/ 上的 PUT 将更新现有章节。这是一个“RESTful”架构：

[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

这是一个有趣的介绍：[http ://tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)

这是一个很大的主题，但是如果您创建了正确的后端服务器架构，您会发现您的工作会轻松很多。希望这有助于回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:59:03.313

好的部分解决方案。只需谷歌嵌套表单 Ruby on Rails。大量示例，全部在 ajax 中，都很简单。

# javascript - innerHTML 不接收他的 cookie 标题

> ID：10062424
> 
> 赞同：0
> 
> 时间：2012-04-08T11:22:06.133
> 
> 标签：javascript, jquery, cookies

我有两个文件，一个名为“TitleLinkCookie.html”的文件，当我单击某个链接时，会创建一个名为“NewTitle”的cookie。在我们的例子中，值为 innerHTML，“Hello world php 1”/2/3.and 运行良好。第二个文件名为“showCodePhp.html”，它需要接收 cookie 标题并将其显示在 h3 标签 id="TitleField"、innerHTML 中，由于某种原因它无法按我的意愿工作。谢谢你的帮助。

TitleLinkCookie.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<META NAME="Description" CONTENT="Guide,Tutorial">
    <meta name="keywords" content="HTML,CSS,JavaScript, jQuery,Html5,Framework,php,photoshop,design" />
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<title>Link guide</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<STYLE type="text/css">
   a { color:red; margin:5px; cursor:pointer; }
  a:hover { background:yellow; }?
 </STYLE>
<script type="text/javascript">
        $(document).ready(function() {
        $('a').each(function() {
                        $(this).click(function() {
                            var   varibaleTitle=$(this).html(); 
                                    setCookie(varibaleTitle);
                        });
  });
  function setCookie(varibaleTitle){
      var expireDate = new Date();
        expireDate.setMonth(expireDate.getMonth()+1);
     var NewTitle = varibaleTitle;
      document.cookie = "NewTitle=" + NewTitle + ";path=/;expires=" + expireDate.toGMTString();
    alert(varibaleTitle)};//end function setCookie
   });// document ready
</script>
</head>
<body >
<p><a id="link1" href="showCodePhp.html" >Hello world php 1</a></p>
<p><a id="link2" href="showCodePhp.html" >Hello world php 2</a></p>
<p><a id="link3" href="showCodePhp.html" >Hello world php 3</a></p>
</body >
</html> 
```

showCodePhp.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Hello World</title>
    <!--<script src="http://www.centerwow.com/gotemp/gotemptics.js" type="text/javascript"></script>-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreDefault.css"/>
    <script type="text/javascript">SyntaxHighlighter.all();</script>
    <script type="text/javascript">
        $(document).ready(function() {
        function reedCookie() {
         var str =document.cookie.split("=")[1];
         var str2 = document.getElementById("TitleField").innerHTML;         
         if (document.cookie != "") {
            str2 = "Your Title is : " + str;
        }//end reedCookie
        });// document ready
    </script>
</head>
<body style="background: white; font-family: Helvetica">
<p><a href="http://www.centerwow.com/guide/guide.html">Back to Home</a></p>
<p><h3 id="TitleField"></h3>Title : </p>
<pre class="brush: php;">
<?
// Hello world in PHP
 print("Hello World");
?>
</pre>
<body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:29:17.990

您说您需要更改 HTML 元素“TitleField”的 innerHTML，但实际上您没有设置它！

我修改了您的脚本以将其设置如下：

```
<script type="text/javascript">
    $(document).ready(function() {
    function reedCookie() {
     var str =document.cookie.split("=")[1];
     var str2 = document.getElementById("TitleField").innerHTML;         
     if (document.cookie != "") {
        $("#TitleField").html("Title :"+ str );
    }//end reedCookie
    });// document ready
</script> 
```

# c# - 使用 WMI 远程卸载应用程序是否必须使用凭据？

> ID：10062427
> 
> 赞同：0
> 
> 时间：2012-04-08T11:22:25.387
> 
> 标签：c#

我想使用 c# 从客户端远程卸载应用程序。在 stocoverflow 的所有示例中，WMI 与凭据一起使用。我的客户没有用户名和密码，那么我仍然可以在没有凭据的情况下使用 WMI 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:09:55.147

大多数远程控制类型的软件都需要帐户上的用户名和密码作为安全预防措施。

我建议使用用于此目的的受密码保护的帐户设置客户端 PC，同时他们也可以保留其非密码帐户来登录和做其他事情。

向外界开放某些东西会带来安全风险，凭据是您至少可以做的。

# php - 使用 PHP 抓取推文

> ID：10062429
> 
> 赞同：3
> 
> 时间：2012-04-08T11:22:41.510
> 
> 标签：php, twitter, web-crawler

我正在尝试从 Twitter 获取推文。我所拥有的是一个用户列表，我想从中获取他们的推文并将它们存储在我的数据库中。我想知道我是否要使用 Twitter API，或者是否有任何简单的代码可以实现这一点。

根据[https://dev.twitter.com/docs/twitter-libraries#php，PHP](https://dev.twitter.com/docs/twitter-libraries#php)中有五个库。我想知道哪一个适合我使用？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:31:09.990

有了 Twitter，它再简单不过了。只需`file_get_contents()`这个 URL： http: [//twitter.com/statuses/user_timeline.json](http://twitter.com/statuses/user_timeline.json?screen_name=USERNAME&count=10) ?screen_name=USERNAME&count= 10，您将获得包含 USERNAME 的 10 条最新推文的 JSON。

```
$tweets = json_decode(file_get_contents('http://twitter.com/statuses/user_timeline.json?screen_name=USERNAME&count=10'));

var_dump($tweets); 
```

# list - 如何将 List(List[String]) 转换为 Map[String, Int]？

> ID：10062431
> 
> 赞同：1
> 
> 时间：2012-04-08T11:22:49.193
> 
> 标签：list, scala, map

我有一个`List(List("aba, 4"), List("baa, 2"))`，我想把它转换成一张地图：

```
val map : Map[String, Int] = Map("aba" -> 4, "baa" -> 2) 
```

归档这个的最好方法是什么？

更新：

我进行数据库查询以检索数据： val (_, myData) = DB.runQuery(...)

这会返回一对，但我只对第二部分感兴趣，这给了我：

```
myData: List[List[String]] = List(List(Hello, 19), List(World, 14), List(Foo, 13), List(Bar, 13), List(Bar, 12), List(Baz, 12), List(Baz, 11), ...) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T13:42:38.537

```
scala> val pat = """\((.*),\s*(.*)\)""".r
pat: scala.util.matching.Regex = \((.*),\s*(.*)\)

scala> list.flatten.map{case pat(k, v) => k -> v.toInt }.toMap
res1: scala.collection.immutable.Map[String,Int] = Map(aba -> 4, baa -> 2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T13:01:02.097

另一个采取：

```
List(List("aba, 4"), List("baa, 2")).
  flatten.par.collect(
    _.split(",").toList match {
      case k :: v :: Nil => (k, v.trim.toInt) 
  }).toMap 
```

与其他答案的区别：

*   用于`.par`并行创建对，这使我们能够从多个内核中获利。
*   `collect`与 a一起使用`PartialFunction`以忽略不属于“key, value”形式的字符串

编辑：`.par`不会[破坏](https://stackoverflow.com/questions/6651444/will-scalas-parallel-collections-guarantee-ordering)之前作为答案状态的订单。只有列表处理的执行顺序不能保证，所以函数应该没有副作用（或者副作用不应该关心排序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T11:26:32.190

我的看法：

```
List(List("aba, 4"), List("baa, 2")) map {_.head} map {itemList => itemList split ",\\s*"} map {itemArr => (itemArr(0), itemArr(1).toInt)} toMap 
```

在步骤：

```
List(List("aba, 4"), List("baa, 2")).
  map(_.head).                                    //List("aba, 4", "baa, 2")
  map(itemList => itemList split ",\\s*").        //List(Array("aba", "4"), Array("baa", "2"))
  map(itemArr => (itemArr(0), itemArr(1).toInt)). //List(("aba", 4), ("baa", 2))
  toMap                                           //Map("aba" -> 4, "baa" -> 2) 
```

您的输入数据结构有点尴尬，所以我认为您无法进一步优化/缩短它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T12:27:59.900

```
List(List("aba, 4"), List("baa, 2")).
  flatten.     //get rid of those weird inner Lists
  map {s=> 
    //split into key and value
    //Array extractor guarantees we get exactly 2 matches
    val Array(k,v) = s.split(","); 
    //make a tuple out of the splits
    (k, v.trim.toInt)}.
  toMap  // turns an collection of tuples into a map 
```

# django - Urllib2 引发 403 错误，而 curl 中的相同请求工作正常

> ID：10062433
> 
> 赞同：0
> 
> 时间：2012-04-08T11:23:01.390
> 
> 标签：django, api, urllib2

我将如何转换这个 curl 命令：

```
curl -v -d email=onlinecrapbox@gmail.com -d password=mypassword -X POST https://www.toggl.com/api/v6/sessions.json 
```

进入urllib2？

为什么这不起作用：

```
url=       'https://www.toggl.com/api/v6/sessions.json'
username = 'onlinecrapbox@gmail.com'
password = 'mypassword'

passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
passman.add_password(None, url, username, password)

authhandler = urllib2.HTTPBasicAuthHandler(passman)

opener = urllib2.build_opener(authhandler)

urllib2.install_opener(opener)
pagehandle = urllib2.urlopen(url) 
```

它给了我这个错误：

```
Traceback (most recent call last):
  File "/Users/jorrit/virtualenvs/tiddle/tiddle/troggle/tests.py", line 16, in test_get_troggle_connection
    get_projects()
  File "/Users/jorrit/virtualenvs/tiddle/tiddle/troggle/views.py", line 29, in get_projects
    pagehandle = urllib2.urlopen(url)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 403: Forbidden 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:41:26.117

使用 requests 包，代码将是：

```
import requests

url = 'https://www.toggl.com/api/v6/sessions.json'
payload = {'email': 'onlinecrapbox@gmail.com',
           'password': 'mypassword'}

r = requests.post(url, data=payload) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:32:46.370

因为你的 urllib 代码做的不是你的 curl 命令。试试这个：

```
import urllib
import urllib2

url = 'https://www.toggl.com/api/v6/sessions.json'
values = {'email': 'onlinecrapbox@gmail.com',
          'password': 'mypassword'}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read() 
```

# matlab - 导入excel输出声音？

> ID：10062434
> 
> 赞同：1
> 
> 时间：2012-04-08T11:23:11.363
> 
> 标签：matlab, math, matlab-deployment

我对 Matlab 有疑问 - 我需要执行以下操作：

*   第 1 步：收发音频（Dave '、'Nick'、'Joe'、'Roy'.....）另存为 .wav
*   第 2 步：使用 matlab 从 .xls excel 中读取文件。（姓名列表）
*   第 3 步：使用表单数据第 2 步。输出。wav 或声音（电脑自动读取列表）

例如，您能为我展示一段 MATLAB 代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:43:21.943

所以我假设你有一些 wav 文件（'Dave.wav'、'Nick.wav'、'Roy.wav' 等）。您有一个 excel 文件：Dave、Roy、Dave、Nick

并且您希望 matlab 播放（在此示例中），Dave.wav，然后是 Roy.wav，然后是 Dave.wav，然后是 Nick.wav。

首先，您需要阅读 xls 文件。我很难让 Matlab 进入；原则上，您可以转到文件->导入数据，选择文件，然后在下一个屏幕上单击“生成代码”，它将为您提供导入此类数据的功能。如果它给您一个错误，也许您可​​以将 excel 文件另存为 .csv，然后重复相同的过程。

一旦你有了一个函数`importfile`，你可以这样做：

```
importfile('filename'); 
```

并且数据将出现在一个变量中（可能与文件名相同 - 从现在开始我将其称为“数据”）。然后：

```
for i=1:numel(data)
  s = wavread([data{i} '.wav']);
  player = audioplayer(s, 22050);
  play(player); 
end 
```

# heroku - Heroku 的 db:pull/push 似乎忽略了序列？

> ID：10062435
> 
> 赞同：1
> 
> 时间：2012-04-08T11:23:12.297
> 
> 标签：heroku, playframework, sequences

我一直在为可能的宠物项目使用新的 Play 框架 2.0。在将测试应用程序部署到 Heroku 之后，我想执行一些检查，以了解如何管理将存储到 Heroku 的 postgresql 数据库中的数据。

我偶然发现了 db:pull 和 db:push 命令。显然，转储我的开发环境的数据库并用它覆盖我的生产环境的数据库（反之亦然）应该很容易。然而，在测试时我注意到它似乎忽略了我的序列？它应该只复制表及其数据吗？我的架构是这样的：

```
CREATE SEQUENCE task_id_seq;
CREATE TABLE task (
id integer NOT NULL DEFAULT nextval('task_id_seq'),
label varchar(255)
); 
```

所以我的 'task_id_seq'-SEQUENCE 由于某种原因没有被提取。我从 prod 到 dev 都尝试过，反之亦然，他们都遗漏了我的 SEQUENCES。我希望我忽略了什么......？

提前致谢！

**编辑：**我尝试使用 pgbackups 来生成和放置转储，并且它运行良好。

# c# - 将 numpad 键输入转换为他的 int 值

> ID：10062440
> 
> 赞同：1
> 
> 时间：2012-04-08T11:24:49.810
> 
> 标签：c#, xna, keyboard

我需要获取键输入，如果它是数字键盘 1-9 之一，则获取它的 int 值。

例如，如果按下 NumPad9，我需要获取值 9。

我已经研究了一个小时，似乎无法解决它。

这是我到目前为止所做的：

```
class Input
{
    private int[] Key = { 7, 8, 9, 4, 5, 6, 1, 2, 3 };
    private Position[] Values;
    public Input()
    {
        Values = new Position[9];
        int index = 0;
        for (int i = 0; i < 3; i++)
            for (int j = 0; j < 3; j++)
                Values[index++] = new Position(i, j);

    }
    public Position GetPos(int Key)
    {
        return Values[Key];
    }
    /*public Position ReadInput(KeyboardState Keyboard)
    {
     * Here is the function that I need to call, how can I check efficiently if one of the
     * Numpads 1-9 is pressed?
     * return GetPos(IntegerValue);
    }*/
} 
```

Position 类型只包含 Row 和 Col int 值。

另外，如何检查是否只按下了一个键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:32:06.083

我不确定您需要什么，但应该与此类似...

```
bool TryReadInput(out int Value)
{
    int Min = (int) Keys.D0;
    int Max = (int) Keys.D9;
    for (int k = Min; k<=Max; k++)
    {
         if (current_kb_state.IsKeyDown( (Keys) k) 
           && previous_kb_state.IsKeyUp( (Keys) k))
         { 
             value = k - Min;
             return true;
         }   
    }
    value = -1;
    return false;
} 
```

如果您需要 col 和 row 值：

```
col = (key+1) / 3;
row = (key+1) % 3; 
```

# c# - Firebug 页面速度警告：启用压缩

> ID：10062442
> 
> 赞同：0
> 
> 时间：2012-04-08T11:25:16.927
> 
> 标签：c#, asp.net, asp.net-mvc, compression, asp.net-mvc-4

我正在做一些挑剔的 seo，我担心萤火虫显示我的捆绑和缩小的 css 文件没有被压缩，我正在使用动作过滤器来附加 gzip 标头，但我不知道为什么它不适用于缩小/捆绑的 css和 js 文件？

这是过滤器：

```
 public class CompressFilter : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            HttpRequestBase request = filterContext.HttpContext.Request;

            string acceptEncoding = request.Headers["Accept-Encoding"];

            if (string.IsNullOrEmpty(acceptEncoding)) return;

            acceptEncoding = acceptEncoding.ToUpperInvariant();

            HttpResponseBase response = filterContext.HttpContext.Response;

            if (acceptEncoding.Contains("GZIP"))
            {
                response.AppendHeader("Content-encoding", "gzip");
                response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
            }
            else if (acceptEncoding.Contains("DEFLATE"))
            {
                response.AppendHeader("Content-encoding", "deflate");
                response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
            }

            response.AppendHeader("Connection", "keep-alive");
        }
    } 
```

我在 Application_Start() 中注册它，所以我不必在每个控制器上都这样做：

```
GlobalFilters.Filters.Add(new CompressFilter());

RegisterGlobalFilters(GlobalFilters.Filters); 
```

我什至在配置中有这个：

```
<urlCompression doStaticCompression="true" doDynamicCompression="true" /> 
```

标题对于视图是正确的，但对于 css 和 js 是正确的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:08:06.553

如果您不使用 IIS 7 压缩，则不需要 CompressFilter，urlCompression 设置就足够了。如果您的 css 是通过 ScriptResourceHandler 提供的，那么您也应该为此设置压缩（请注意，在此示例中启用了缓存）：

```
<configuration>
  ...
  <system.web.extensions>
    <scripting>
      <scriptResourceHandler enableCompression="true" enableCaching="true"/>
    </scripting>
  </system.web.extensions>
  ...
</configuration> 
```

请注意，ISA 代理服务器默认会从 Accept-Encoding 请求标头中去除 gzip，因此 ISA 可以扫描内容中的恶意数据，也许其他一些代理/防火墙软件也会这样做。

# java - JApplet 无法连接到互联网问题 - 如何使信任？

> ID：10062444
> 
> 赞同：1
> 
> 时间：2012-04-08T11:25:19.030
> 
> 标签：java, swing, applet, httpurlconnection, japplet

我有一个用作 JApplet 的应用程序。它可以访问互联网，但我发现它无法正常工作的问题是因为它显然不受信任。

我怎样才能使应用程序受信任:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:27:14.223

使小程序受信任的唯一方法是签署所有罐子。

如果您没有官方证书，您可以创建自己的证书，然后用户需要接受该证书。

使用 JDK 中的“keytool”进行这些操作。

# .net - 下载由视觉设置项目构建的 setup.exe 时出现警告

> ID：10062451
> 
> 赞同：1
> 
> 时间：2012-04-08T11:26:08.480
> 
> 标签：.net, security, installation, setup-project

我已经使用可视化设置项目为我的 C# WPF 应用程序构建了一个安装程序。

我在一个网站上分享了我的项目。但是当我下载安装程序时，我收到一个警告（实际上看起来像可怕的错误或病毒），应用程序 (setup.exe) 可能会损害我的计算机，如果运行它，天启将在不久的将来到来。

我知道我的安装程序没有由 MS 证书签名，但我知道其他没有证书且未显示警告的第 3 方应用程序安装程序（例如 notepad++）。

您对我的问题有什么建议或解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:04:53.080

您可能是 SmartScreen 的受害者。[这篇博](http://blogs.msdn.com/b/ie/archive/2011/03/22/smartscreen-174-application-reputation-building-reputation.aspx)文更详细地解释了它，以及如何建立声誉：

> 还根据用于签署文件的数字证书为数字签名的下载生成声誉。数字证书允许跨多个文件将信誉分配给单个身份（数字证书）。如果您没有签署您的程序，则将为您分发的每个文件独立建立声誉。相反，签名的程序可能会继承您的数字证书的声誉。

[我最近被这个问题困扰了，在 Windows 8 Consumer Preview SmartScreen 中阻止了我正在开发的 ClickOnce 应用程序，无法在*没有警告*的情况下运行。我猜他们还在努力...]

# c# - Wpf 应用程序变量不变

> ID：10062457
> 
> 赞同：0
> 
> 时间：2012-04-08T11:26:58.970
> 
> 标签：c#, wpf, properties

在我的应用程序中，几乎所有页面都需要一些变量，所以我在 Application.xaml 中声明了它们

```
<sys:String x:key="First">First</sys:String> 
```

并在一页上更改代码中的值，例如

```
Resources["First"] = "This is First"; 
```

当我调用变量时在第二页上

```
String f = (string)this.TryFindResource("First");
MessageBox.Show(f); 
```

输出是“第一”而不是“这是第一”。我也试过喜欢。

```
Application.Current.Properties["First"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:27:31.477

对于这种情况，您需要使用 Binding。

如果您希望该值全局可用，请将其设为静态，然后像这样访问它：

```
<TextBlock Text="{x:Static local:MyGlobalClass.First}" /> 
```

# java - OSX 上的 Java 应用程序：任何许可约定

> ID：10062466
> 
> 赞同：-1
> 
> 时间：2012-04-08T11:28:13.143
> 
> 标签：java, macos, licensing

出于担心有人会否决这个问题，因为盗版是无法预防的，我想明确表示我建立的系统只是为了阻止盗版，我提出这个问题是为了确保它尽可能少地引起烦恼.

目前，我的系统使用 MAC 地址、CPU 类型和 HDD 序列的组合来创建*硬件指纹*（不是问题）。我一生都在使用 Windows，对于在 OS X 上安装（和“卸载”）应用程序的简单性一直很天真。目前，我将此*硬件指纹*存储在一个位置`~/Library/Application Support`（因此不需要管理员密码）因为我打算使用卸载程序删除应用程序。我知道一些 Mac 应用程序使用卸载程序，但我个人不想干预作为惯例的简单拖放过程。

我将实现检查在线数据库的功能，查看运行该软件的机器的*指纹是否与在许可软件时与串行密钥绑定的**指纹*相对应（如果用户有互联网连接）。不过，这仍然需要一种方法来存储使用的序列号，我希望我的用户能够在没有互联网连接的情况下运行该软件。

有没有人在这个领域有任何经验，或者对我如何在仍然实施我的许可系统的同时仍然允许使用拖放来安装和删除我的软件有任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:35:13.903

无需存储硬件指纹，只需在需要时计算即可。

我不知道 Preferences API 在这种情况下是否适合您，否则可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:42:18.940

我不认为这实际上是正确的，也没有共同的答案。我还认为我可能已经过火并提出了错误的问题，因为在[我最近提出的问题](https://stackoverflow.com/questions/10127714/writing-inside-mac-application-package-folder-with-java)中，我得到了我正在寻找的信息。所以，我真正想要/需要的答案：

（事实证明）可以将文件留在`Application Support`(and `Preferences`) 中。有些人甚至认为这是可取的。所以我要将许可证文件和配置文件存储在 的子目录中`~/Application Support`，让我的用户决定将他们的“数据库目录”放在哪里。这样每个人都赢了（嗯，几乎）！

仅供参考，*问题不在于我所拥有的，而在于它的去向（文件明智）*。

# routing - 测试路由时，我可以在 MSpec 测试名称中包含 URL 字符吗？

> ID：10062477
> 
> 赞同：3
> 
> 时间：2012-04-08T11:30:20.380
> 
> 标签：routing, bdd, mspec

如何使用 MSpec 表示以下场景？：

```
Scenario: Navigation to homepage
   When I navigate to /Guestbook
   Then I should be on the guestbook page 
```

SpecFlow 使这类事情变得更容易，因为我们可以将参数传递到我们的规范中：

```
[When(@"I navigate to (.*)")]
public void WhenINavigateTo(string relativeUrl)
{
} 
```

使用 MSpec，上下文/规范来自类的名称，因此我不能使用任何特殊字符（例如 url 中使用的字符）。

我想要实现的是这样的输出：

```
Browsing the site, When I navigate to /guestbook
¯ should go to the guestbook page
Browsing the site, When I navigate to /news/article-slug
¯ should go to the news article with matching slug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:28:07.440

SpecFlow 主要用于系统级示例，而 MSpec 通常用于类级示例。

对于 URL 行为和更多技术细节，我倾向于使用类级别的示例，AKA 单元测试。MSpec 非常适合这个。例如，这描述了一个提供 URL 的 Navigator 类：

> 我的 Navigator 类应该提供易读且令人难忘的 url
> 
> 给定一篇带有 slug cat-in-a-tree 的文章
> 当我们向导航器询问 url
> 时，它应该是可读的。

然后，您可以在该示例中检查您的实际 URL。

在更高的层次上，尝试根据您的系统提供给用户的功能来考虑场景。如果我是用户，我为什么要关心我是否可以将特定 URL 用于留言簿？为什么我首先要去留言簿？SpecFlow 更适合这个级别。

> 我的留言簿应该会显示谁已登录
> 
> 鉴于键盘猫最近签署了我
> 的留言簿当我去留言簿时
> ，我应该在列表中看到键盘猫的名字。

现在您可以让场景导航到留言簿，但在场景的步骤中保留用户*如何*导航到留言簿的详细信息。您还可以看到，该场景并没有说明您使用的是网页、Windows 应用程序、手机还是实体书——它只是关于您提供的功能。通常，像这样的更高级别的场景将更容易维护，并帮助您的整个团队专注于您为用户提供的价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:26:23.767

在上下文或 MSpec 中的规范中并没有真正使用特殊字符的方法，以前从未需要过它。我认为你是我见过的唯一一个有令人信服的理由在他们的规范中有一个真正的 url 路径的人。通常你会避免这种情况，但如果 SEO 专家正在阅读你的规格报告，那么我可以看到。您可能想尝试不同的工具或向 MSpec 提交一个补丁，以添加对可以覆盖上下文或规范的字符串名称的属性的支持。

# c - 发送和接收缓冲区大小不同时的麻烦

> ID：10062480
> 
> 赞同：2
> 
> 时间：2012-04-08T11:30:52.680
> 
> 标签：c, sockets, send, recv

我是有关套接字编程的初学者，当我使用不同的缓冲区大小为发送者和接收者通过套接字发送数据时遇到问题。我必须制作2个基本程序，说话者和听众。必须将所有传入标准输入的内容发送出去，通过套接字发送，接收方必须打印数据。问题是当我为发送方和接收方使用不同的缓冲区大小时，接收方打印的数据不完整或乱序。我不明白为什么？

以下是最相关的一段代码：

听众：

```
#define BUFFERSIZE 20

...

while((numbytes = recv(new_fd, buf, BUFFERSIZE - 1, 0)) > 0) {
    buf[numbytes] = 0;
    printf("%s", buf);
}
perror("recv"); 
```

说话者：

```
#define BUFFERSIZE 10 
```

...

```
while(fgets(buffer, BUFFERSIZE , stdin) != NULL)
{
    printf("%s", buffer);
    if ((numbytes = send(sockfd, buffer, sizeof buffer, 0)) == -1) {
        perror("talker: sendto");
        exit(1);
    }
    printf("\n");
} 
```

例如，使用此测试文件：

```
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz
abcdefghijklmnopqrstuvwxyz 
```

它会打印

```
➜  ./listener                                        
abcdefghijklmnopqrabcdefghiiz
recv: Success
abcdefghijklmnopqrr 
```

我做错了什么？

谢谢你的工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:00:33.933

Since you are only transmitting strings, you should not always send the complete buffer, but only the "length of the string", i.e. use `strlen(buffer)` instead of `sizeof buffer`. Then the strange behavior should be gone.

```
if ((numbytes = send(sockfd, buffer, strlen(buffer), 0)) == -1) {
... 
```

# android - AsyncTask 从我的 doInBackground 中返回一个 Bundle

> ID：10062486
> 
> 赞同：0
> 
> 时间：2012-04-08T11:31:52.360
> 
> 标签：android

我有一个 AsyncTask 类，它将在我的`doInBackground`方法中返回一个 Bundle。这个包包含一个字符串和一个整数，我这样做：

```
protected Bundle doInBackground(Void... b) {

    Bundle info = new Bundle(); 

    info.putString("km", distanceInKm);
    info.putInt("time", totalTime); 

    return info;
 } 
```

因此，在我的 onPostExecute 中，我必须获取这两个变量才能开始需要这些变量的新活动。

所以这是我的代码：

```
protected void onPostExecute(Bundle extraInfo) {

    String km; 
    int time;

    km = extraInfo.getString("km");
    time = extraInfo.getInt("time"); 
} 
```

当我调试代码并在我从`doInBackground`方法返回的位置放置一个断点时，Bundle`info`确实包含正确的信息，如下所示：

```
Bundle[{time=20, km=15.6 }] 
```

但是当我尝试在我的`onPostExecute`方法中检索信息时，该值仅是例如：`"time" or "km"`

我怎样才能完成这项任务？提前致谢..

# c# - Amazon S3 中的重复文件

> ID：10062490
> 
> 赞同：7
> 
> 时间：2012-04-08T11:32:43.310
> 
> 标签：c#, amazon-s3

我正在尝试将一个文件从一个存储桶复制到另一个存储桶，但我无法缝合以查看目标存储桶上的新文件。

我**完全没有错误**...

**要求：**

![在此处输入图像描述](../Images/6f202dd90d0b511a9dbe8b9778241d8c.png)

**回复：**

```
<?xml version="1.0" encoding="UTF-8"?>
<CopyObjectResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <LastModified>2012-04-08T11:26:36.000Z</LastModified
    <ETag>&quot;a5f9084078981b64737b57dbf1735fcf&quot;</ETag>
</CopyObjectResult> 
```

但是我一直在检查 S3 上的*上次修改日期*，我找不到有关这个新文件的任何信息，或者我可以直接访问它

> [http://jk-v20.s3.amazonaws.com/PublicFiles/3ff28e21-4801-47c6-a6d0-e370706d303f_Content_Favicon.ico](http://jk-v20.s3.amazonaws.com/PublicFiles/3ff28e21-4801-47c6-a6d0-e370706d303f_Content_Favicon.ico)

我究竟做错了什么？

* * *

方法：

```
public void DuplicateFileInCloud(string original, string destination)
{
    try
    {
        CopyObjectRequest request = new CopyObjectRequest();

        if (original.StartsWith("http"))
        {
            // could be from other bucket, URL will show all data
            // example: http://jk-v30.s3.amazonaws.com/PredefinedFiles/Favicons/002.ico
            string bucket = getBucketNameFromUrl(original), // jk-v30
                    key = getKeyFromUrl(original);          // PredefinedFiles/Favicons/002.ico

            request.WithSourceBucket(bucket);
            request.WithSourceKey(key);
        }
        else
        {
            // same bucket: copy/paste operation
            request.WithSourceBucket(this.bucketName);
            request.WithSourceKey(original);
        }

        request.WithDestinationBucket(this.bucketName);
        request.WithDestinationKey(destination);
        request.CannedACL = S3CannedACL.PublicRead;

        using (AmazonS3 client = Amazon.AWSClientFactory.CreateAmazonS3Client(this.accessKey, this.secretAccessKey))
        {
            S3Response response = client.CopyObject(request);
            response.Dispose();
        }
    }
    catch (AmazonS3Exception s3Exception)
    {
        throw s3Exception;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T21:49:55.287

[http://jk-v20.s3.amazonaws.com//PublicFiles/3ff28e21-4801-47c6-a6d0-e370706d303f_Content_Favicon.ico](http://jk-v20.s3.amazonaws.com//PublicFiles/3ff28e21-4801-47c6-a6d0-e370706d303f_Content_Favicon.ico)

是文件所在的位置。（注意双斜线。// ..）如果您点击此网址，您会看到 ico 文件。所以它与前导斜杠有关，它可以由您的工具集自动添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:38:51.727

你可以发布请求（带有标题），用提琴手之类的东西捕获吗？

[文档](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadUploadPartCopy.html)表明源路径应该以斜杠开头（即完全限定），您尝试过吗？

```
x-amz-copy-source: /source_bucket/sourceObject 
```

也许框架会为您做到这一点，但您的目的地有一个前导斜线，所以也许......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:30:17.933

代码看起来正确，我在我的工作应用程序中使用了类似的东西。

在您的 s3 存储桶上启用服务器访问日志记录以了解幕后发生的事情可能会有所帮助 - [http://docs.amazonwebservices.com/AmazonS3/latest/dev/ServerLogs.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ServerLogs.html)。

# xml - 使用 linq 将字符串分组到 xml

> ID：10062495
> 
> 赞同：0
> 
> 时间：2012-04-08T11:33:23.840
> 
> 标签：xml, linq, group-by

我有一些这样的字符串：

```
04:51 05:09 05:29_ 05:49 06:09 06:29 06:49_ 07:09 07:25 07:40 07:55 08:10_ 08:25 08:40 08:55 09:10 09:25_ 09:40 09:55 10:10 10:25 10:40_ 10:55 11:10 11:25 11:40 11:55_ 12:10 12:25 12:40 12:55 13:10_ 13:25 13:40 13:55 14:10 14:25_ 14:40 14:55 15:10 15:25 15:40_ 15:55 16:10 16:25 16:40 16:55_ 17:10 17:29# 17:49# 18:09# 18:29#_ 18:49# 19:09# 19:29# 19:49#_ 20:09# 20:29# 20:49# 21:09#_ 21:29# 21:49# 22:09# 22:29#_ 22:51# 23:12# 
```

我需要按小时对上面的字符串进行分组以获得这样的xml：

```
<departure hour="04">
<min>51</min>
</departure>
<departure hour="05">
<min>09 29_ 49</min>
</departure>

etc. 
```

我已经尝试了一些针对 linq 的分组，但到目前为止还没有什么令人满意的...

好的，现在我有这样的拆分：

```
 var dep = parts[2].Split(' ').Select(p => new XElement("departure",    new XAttribute("hour", p.Split(':')[0]), new XElement("min",p.Split(':')[1]))); 
```

例如，这给了我这样的东西：

```
<departure hour="04">
      <min>49</min>
    </departure>
    <departure hour="05">
      <min>07</min>
    </departure>
    <departure hour="05">
      <min>27_</min>
    </departure>
    <departure hour="05">
      <min>47</min>
    </departure> 
```

问题是分组代码...

编辑：

我设法写了这样的东西：

```
 var depGrouped = from grouped in dep
                  group grouped by new {h = (string)grouped.Attribute("hour")} into g 
                  select new XElement("departure", new XAttribute("hour", g.Key.h), new XElement("min", g)); 
```

但它产生的并不完全符合我的预期，例如：

```
<departure hour="05">
    <min>
      <departure hour="05">
        <min>04</min>
      </departure>
      <departure hour="05">
        <min>24</min>
      </departure>
      <departure hour="05">
        <min>44</min>
      </departure>
    </min>
  </departure>
  <departure hour="06">
    <min>
      <departure hour="06">
        <min>06_</min>
      </departure>
      <departure hour="06">
        <min>24</min>
      </departure>
      <departure hour="06">
        <min>44</min>
      </departure>
      <departure hour="06">
        <min>58</min>
      </departure>
    </min>
  </departure> 
```

您能帮我从输出中排除一些信息以匹配帖子顶部的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:29:01.913

试试这个，在 LINQPad 中对我有用。

```
var s = "04:51 05:09 05:29_ 05:49 06:09 06:29 06:49_ 07:09 07:25 07:40 07:55 08:10_ 08:25 08:40 08:55 09:10 09:25_ 09:40 09:55 10:10 10:25 10:40_ 10:55 11:10 11:25 11:40 11:55_ 12:10 12:25 12:40 12:55 13:10_ 13:25 13:40 13:55 14:10 14:25_ 14:40 14:55 15:10 15:25 15:40_ 15:55 16:10 16:25 16:40 16:55_ 17:10 17:29# 17:49# 18:09# 18:29#_ 18:49# 19:09# 19:29# 19:49#_ 20:09# 20:29# 20:49# 21:09#_ 21:29# 21:49# 22:09# 22:29#_ 22:51# 23:12#";

var times = s.Split(new char[]{' '}).Select (x => x.Trim());

var byHour = times.Select (
     t => t.Split(new char[]{':'})).Select(t => new {hour=t[0], minutes=t[1]});

var grouped = byHour.GroupBy (h => h.hour).Select (
    h => new {hour=h.Key, minutes=string.Join(" ", h.Select (x => x.minutes))});

var xml = grouped.Select (a => 
    new XElement("departure", 
    new XAttribute("hour", a.hour),
    new XElement("min", a.minutes)
    ));

xml.Dump(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:02:33.513

我现在没有机会尝试这个，但想法很简单：

```
var dep = from p in parts[2].Split(' ')
          let p_parts = p.Split(':')
          let hour = p_parts[0]
          let min = p_parts[1]
          group p by hour into g
          select new XElement("departure",
                              new XAttribute("hour", g.Key),
                              (from m in g select new XElement("min", m.min)); 
```

# java - 执行查询时出现异常

> ID：10062496
> 
> 赞同：3
> 
> 时间：2012-04-08T11:33:26.007
> 
> 标签：java, semantic-web, jena, dbpedia

我正在尝试通过其远程 sparql 端点查询 Dbpedia 数据集。到目前为止，我已经设法连接到端点并执行正常查询。但是当我执行以下查询时，我得到了一些结果，然后是一个我不知道的异常。有人可以帮忙吗。查询和异常如下。

```
SELECT DISTINCT ?p ?o WHERE 
{ ?p ?x <http://dbpedia.org/resource/Nepal>.
  ?p <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?o. } 
```

例外情况如下

```
16:51:30 WARN  XMLInputStAX$ResultSetStAX :: StAX error: XMLStreamException: Unexpected EOF; was expecting a close tag for element <result>
 at [row,col {unknown-source}]: [2068,3]
com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element <result>
 at [row,col {unknown-source}]: [2068,3]
        at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:686)
        at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2730)
        at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1019)
        at com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.getOneSolution(XMLInputStAX.java:410)
        at com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.hasNext(XMLInputStAX.java:217)
        at sat.Algorithm.incomingLink(Algorithm.java:128)
        at sat.Main.main(Main.java:20)
2 [main] WARN com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX  - StAX error: XMLStreamException: Unexpected EOF; was expecting a close tag for element <result>
 at [row,col {unknown-source}]: [2068,3].......... 
```

这是否与结果量太大而耶拿无法处理有关？个人不确定，因为每次执行成功显示的结果数量似乎都不同。所以有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:36:50.070

尝试使用 LIMIT 和 OFFSET 等投影来控制结果集的大小。DPBEDIA 默认限制为 10,000，尽管取决于分配给 JVM 的内存量，这应该不是问题。我认为它使用的是 Jena ARQ API'S 和 sparqlService 方法。像这样的东西：

```
QueryExecution qe = QueryExecutionFactory.sparqlService("http://dbpedia.org/sparql", "SELECT DISTINCT ?p ?o WHERE { ?p ?x <http://dbpedia.org/resource/Nepal>. ?p <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?o. }");
ResultSet queryResults = qe.execSelect(); 
```

# javascript - 给定一个偏移量，我如何在 javascript 中将当前时间转换为 UTC 时间

> ID：10062500
> 
> 赞同：0
> 
> 时间：2012-04-08T11:33:34.727
> 
> 标签：javascript

```
a = new Date();
Sun Apr 08 2012 16:58:03 GMT+0530 (IST) 
```

有什么办法可以得到当前的 UTC 时间？我想在数学上得到一个补偿：

```
b = a.getTimezoneOffset()
-330 
```

然后减去，得到值：

```
c = a - b
1333884483552 
```

但是再看`c`就`a`很难了。所以问题是： **如何在 javascript 中获取当前的 UTC 时间？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T11:38:33.800

首先，`Date`JavaScript 中的对象是时区无关的。它只存储自纪元以来的毫秒数。此外，它**总是**使用浏览器时区`toString()`和`get*()`方法。您不能`Date`在不同的时区创建实例。

因此只需使用`getUTC*()`一系列方法：

```
new Date().getUTCHours()
new Date().getUTCMinutes()
//... 
```

以获取 UTC 时间。

最后但同样重要的是 - 您的代码已损坏。`a`变量表示`Date`并在此处转换为毫秒：`c = a - b`. 然而`b`等于`a.getTimezoneOffset()`。时区偏移量以*分钟*为单位。您正在从毫秒中减去分钟...

# 也可以看看

*   [烦人的javascript时区调整问题](https://stackoverflow.com/questions/7629286)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:40:51.167

`toUTCString`如果需要字符串，可以使用该函数。

```
new Date().toUTCString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:38:14.020

有一个名为**jstimezonedetect**的插件，您可以使用它来检测时区。你可以在[这里找到](https://bitbucket.org/pellepim/jstimezonedetect)

或使用日期的 UTC 方法，如

```
var now = new Date(); 
var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),  now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()); 
```

### [演示](http://jsfiddle.net/Starx/XzL26/)

> **输出**
> 
> 日期 {Sun Apr 08 2012 18:31:50 GMT+0545（尼泊尔标准时间）}
> 
> 日期 {Sun Apr 08 2012 12:46:50 GMT+0545（尼泊尔标准时间）}

# sql-server - 一对一连接在 SQL Server 中不够快

> ID：10062501
> 
> 赞同：0
> 
> 时间：2012-04-08T11:34:03.910
> 
> 标签：sql-server, performance, entity-framework

我的 EF 模型中有一个 TPT 继承。哪里有一个“主”抽象类型，几个类型从中继承，包括“订单”。有 1700000 个订单，但是 master 有更多的行对应于其他类型。

我们有一个奇怪的案例，其中选择 50 个订单比选择相同的 50 个订单要慢，但其中包括一些其他相关实体。它回溯到非常简单的查询所在的数据库

```
select top 50 * from SAM.Master m 
join SAL.[Order] o on o.OrderMasterID = m.MasterID
order by MasterID desc 
```

需要一秒钟以上。（是的，在我们的例子中，一秒钟实际上太多了）。但这可以通过

1.  移除`order by`（大约快两倍）
2.  按升序排序（聚集索引是升序的，不能是其他的）
3.  添加`option(loop join)`（非常快）
4.  使用左外连接
5.  添加`Where FormTypeID = 1`（主表中的鉴别器列，所有订单为 1）（快两倍）

实际上产生相同结果的唯一解决方案是 3 和 5，但是使用 Entity Framework 是不可能的（我们不能向查询添加提示）并且 5 不够快

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:08:15.143

您可以使用[计划指南](http://technet.microsoft.com/en-us/library/ms190417%28v=sql.105%29.aspx)来获得您想要的行为。有关示例，请参阅[在计划指南中使用查询提示。](http://msdn.microsoft.com/en-US/library/bb677261%28v=sql.105%29.aspx)该示例需要实际的语句文本（EF 生成的 T-SQL），但您可以通过使用[`sp_create_plan_guide_from_handle`](http://msdn.microsoft.com/en-us/library/bb964726%28v=sql.105%29.aspx).

在您的下一个项目中，避免将[类表继承](http://martinfowler.com/eaaCatalog/classTableInheritance.html)与每个实体派生自的基础`Master`对象一起使用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:46:50.293

如果要强制查询提示。我认为您最好的呼声是创建一个存储过程并使用查询提示（[在此处](https://stackoverflow.com/questions/3038289/linq-joins-performance)查看更多信息）。或者也许你可以做这样的事情：

```
var items = dc.ExecuteQuery<ToSomeObject>("YourQueryWithHints").ToList(); 
```

# facebook - Facebook 登录显示为文本

> ID：10062504
> 
> 赞同：0
> 
> 时间：2012-04-08T11:34:35.313
> 
> 标签：facebook

我想为我的网站创建一个 Facebook 登录。[我使用了来自Facebook 参考](https://developers.facebook.com/docs/reference/plugins/login/)的相同代码。但登录按钮仅显示为“使用 Facebook 登录”文本。任何人都可以帮忙吗？

我的代码是：

```
<html>
    <head>
      <title>My Facebook Login Page</title>
    </head>
    <body>
      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '394261217260358',
            status     : true, 
            cookie     : true,
            xfbml      : true,
            oauth      : true
          });
        };
        (function(d){
           var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           d.getElementsByTagName('head')[0].appendChild(js);
         }(document));
      </script>
      login with facebook
      <fb:login-button show-faces="false" perms="publish_stream,email,user_location,offline_access" width="200" max-rows="1">login</fb:login-button>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:04:37.087

把这条线

```
<fb:login-button show-faces="false" perms="publish_stream,email,user_location,offline_access" width="200" max-rows="1">login</fb:login-button> 
```

上下`<script>`，`<div id="fb-root"></div>`它应该工作

# iphone - 适用于 ios 的移动地图集创建器

> ID：10062508
> 
> 赞同：0
> 
> 时间：2012-04-08T11:35:17.723
> 
> 标签：iphone, ios, mapkit, mkmapview

我正在尝试在[这里](http://mobac.sourceforge.net/)使用此应用程序来创建将与 mapkit 一起使用的离线地图图块和数据。

我认为这可能是一个漫长的过程，但我到处寻找，试图让这个离线地图操作发挥作用，但我无法休息。

任何帮助提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T16:40:03.287

您现在可以在 iOS 版 Google Maps 2.0 中缓存地图以供离线使用。请参阅[https://support.google.com/gmm/answer/3273567?hl=en&rd=1](https://support.google.com/gmm/answer/3273567?hl=en&rd=1)

如果您真的想使用 Mobile Atlas Creator (MOBAC)，您可以创建地图或“地图集”，将其传输到 iOS，然后导入到[Galileo](http://galileo-app.com/)中。地图导入功能在 Galileo 中提供 7 天免费试用。

[请参阅http://mobac.sourceforge.net/quickstart/](http://mobac.sourceforge.net/quickstart/)和[http://galileo-app.com/manual.html#offline_maps](http://galileo-app.com/manual.html#offline_maps)顶部的“使用 MOBAC”选项卡

根据您要查找的地图类型，您也许可以找到专门用于您目的的应用程序，这样您就可以跳过 MOBAC。例如，对于离线地形图，[http](http://topomapsapp.com/) ://topomapsapp.com/ 使用 USGS 24k。

# c# - c#asp.net 中的一个 Web 应用程序可以有两个虚拟路径吗？

> ID：10062511
> 
> 赞同：0
> 
> 时间：2012-04-08T11:35:39.173
> 
> 标签：c#, asp.net

c#asp.net中的一个Web应用程序是否可以有两个或多个虚拟路径？

例如[http://localhost/test1/web.aspx](http://localhost/test1/web.aspx)和[http://localhost/test2/web.aspx](http://localhost/test2/web.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:38:28.583

您可以在 iis 中打开 2 个网站，这些网站将使用来自同一目录但具有不同 URL 的相同文件。

您也可以使用 ROUTING 模块，该模块可以读取 url 并通过字符串模式将其从一个重定向到另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:43:29.823

是IIS，可以创建两个不同的虚拟站点映射到同一个物理目录。这是你想要的吗？

每个站点都将运行自己的 Web 代码副本。

# wordpress - 在不访问 /wp-admin/install.php 的情况下使用 bash shell 安装 WordPress？

> ID：10062513
> 
> 赞同：9
> 
> 时间：2012-04-08T11:36:51.223
> 
> 标签：wordpress, bash, installation, automation

我编写了这个小 BASH 脚本，它创建一个文件夹、解压缩 Wordpress 并为一个站点创建一个数据库。

最后一步实际上是安装 Wordpress，这通常涉及将浏览器指向 install.php 并在 GUI 中填写表格。

我想从 BASH shell 执行此操作，但不知道如何调用 wp_install() 并将其传递给它需要的参数：

-admin_email
-admin_password
-weblog_title
-user_name

（install.php 中的第 85 行）

这是一个类似的问题，[但在python中](https://stackoverflow.com/questions/5732384/automate-wordpress-install-from-python)

```
#!/bin/bash

#ask for the site name
echo "Site Name:"
read name
# make site directory under splogs
mkdir /var/www/splogs/$name
dirname="/var/www/splogs/$name"
#import wordpress from dropbox
cp -r  ~/Dropbox/Web/Resources/Wordpress/Core $dirname
cd $dirname
#unwrap the double wrap
mv Core/* ./ 
rm -r Core
mv wp-config-sample.php wp-config.php 
sed -i 's/database_name_here/'$name'/g' ./wp-config.php
sed -i 's/username_here/root/g' ./wp-config.php
sed -i 's/password_here/mypassword/g' ./wp-config.php
cp -r ~/Dropbox/Web/Resources/Wordpress/Themes/responsive $dirname/wp-content/t$
cd $dirname

CMD="create database $name"
mysql -uroot -pmypass -e "$CMD" 
```

如何更改脚本以自动运行安装程序而无需打开浏览器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T01:58:55.017

查看[wp-cli](https://github.com/wp-cli/wp-cli)，基于Drupal 的[Drush](http://drush.ws)。

```
wp core install --url=url --title=site-title [--admin_name=username] --admin_email=email --admin_password=password 
```

所有命令：

```
wp core [download|config|install|install_network|version|update|update_db]
wp db [create|drop|optimize|repair|connect|cli|query|export|import]
wp eval-file
wp eval
wp export [validate_arguments]
wp generate [posts|users]
wp home
wp option [add|update|delete|get]
wp plugin [activate|deactivate|toggle|path|update|uninstall|delete|status|install]
wp post-meta [get|delete|add|update]
wp post [create|update|delete]
wp theme [activate|path|delete|status|install|update]
wp transient [get|set|delete|type]
wp user-meta [get|delete|add|update]
wp user [list|delete|create|update] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T16:14:44.050

我遇到了和你一样的问题。我尝试了维克多的方法，但效果不佳。我做了一些编辑，现在可以使用了！您必须在脚本中添加 php 标签才能使代码正常工作，否则它只会回显到终端。

我的脚本直接调用upgrade.php 的wp_install 函数，完全绕过install.php（无需编辑其他文件）。

我将我的脚本命名为 script.sh，使其可执行，将其放到 wp-admin 目录中，然后从终端运行它。

```
#!/usr/bin/php
<?php

function get_args()
{
        $args = array();
        for ($i=1; $i<count($_SERVER['argv']); $i++)
        {
                $arg = $_SERVER['argv'][$i];
                if ($arg{0} == '-' && $arg{1} != '-')
                {
                        for ($j=1; $j < strlen($arg); $j++)
                        {
                                $key = $arg{$j};
                                $value = $_SERVER['argv'][$i+1]{0} != '-' ? preg_replace(array('/^["\']/', '/["\']$/'), '', $_SERVER['argv'][++$i]) : true;
                                $args[$key] = $value;
                        }
                }
                else
                        $args[] = $arg;
        }

        return $args;
}

// read commandline arguments
$opt = get_args();

define( 'WP_INSTALLING', true );

/** Load WordPress Bootstrap */
require_once( dirname( dirname( __FILE__ ) ) . '/wp-load.php' );

/** Load WordPress Administration Upgrade API */
require_once( dirname( __FILE__ ) . '/includes/upgrade.php' );

/** Load wpdb */
require_once(dirname(dirname(__FILE__)) . '/wp-includes/wp-db.php');

$result = wp_install($opt[0], $opt[1], $opt[2], false, '', $opt[3]);
?> 
```

我这样调用文件：`# ./script.sh SiteName UserName email@address.com Password`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T11:25:10.847

也许您需要稍微修改一下 Wordpress 原始安装程序。

首先，创建一个包装 php CLI 脚本，假设它的名称是`wrapper.sh`：

```
#!/usr/bin/php -qC

function get_args()
{
        $args = array();
        for ($i=1; $i<count($_SERVER['argv']); $i++)
        {
                $arg = $_SERVER['argv'][$i];
                if ($arg{0} == '-' && $arg{1} != '-')
                {
                        for ($j=1; $j < strlen($arg); $j++)
                        {
                                $key = $arg{$j};
                                $value = $_SERVER['argv'][$i+1]{0} != '-' ? preg_replace(array('/^["\']/', '/["\']$/'), '', $_SERVER['argv'][++$i]) : true;
                                $args[$key] = $value;
                        }
                }
                else
                        $args[] = $arg;
        }

        return $args;
}

// read commandline arguments
$opt = get_args();

require "install.php"; 
```

这将允许您从命令行调用脚本，并将参数直接传递给 $opt 数字数组。

然后，您可以按照您定义的严格顺序传递所需的变量，例如：

`./wrapper.sh <admin_email> <admin_password> <weblog_title> <user_name>`

在`install.php`您需要更改前面提到的变量的定义，如下所示：

```
global $opt;

$admin_email = $opt[0];
$admin_password = $opt[1];
$weblog_title = $opt[2];
$user_name = $opt[3]; 
```

然后让安装脚本完成它的工作。

这是一种未经测试的方法，并且对您需要的任何修改都非常开放。它主要是使用包装器 php/cli 脚本来定义所需变量的指南，而无需通过 HTTP REQUEST / 查询字符串发送它们。也许这是完成事情的一种奇怪的方式，所以请随时提供任何建设性/破坏性的反馈:-)

# chef-infra - 厨师服务器将无法启动 - 在 16011 中启动厨师服务器失败

> ID：10062514
> 
> 赞同：3
> 
> 时间：2012-04-08T11:37:02.193
> 
> 标签：chef-infra

olr如何处理以下问题？

```
/etc/init.d/chef-server-webui start
 * Starting chef-server-webui
 ~ In 15468
  ...fail!

root@li409-115:/etc/init.d# /etc/init.d/chef-server start
 * Starting chef-server
 ~ In 16011
  ...fail! 
```

/var/log/chef/server.log 或 server-webui.log 中的日志文件中没有任何内容

开始厨师客户和 solr 工作。

那么……如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T09:08:08.777

解决方法：

1.  确保 chef-server-webui 服务已停止：sudo /etc/init.d/chef-server-webui stop

2.  手动启动 Web UI 进程（它将记录到控制台，而不是日志文件）：sudo /usr/sbin/chef-server-webui

3.  当进程启动时（“成功绑定到端口 4040”），使用 Ctrl-C 停止它

4.  启动 chef-server-webui 服务：sudo /etc/init.d/chef-server-webui start

该服务现在应该启动并登录到 /var/log/chef/server-webui.log。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T05:45:57.743

我查看了这个链接，它对我[有用 https://tickets.opscode.com/browse/CHEF-3204](https://tickets.opscode.com/browse/CHEF-3204) 我在我的厨师服务器 VM（ubuntu 12.04）上执行了以下命令。您可能需要 sudo su。我认为我的问题是 couchdb 没有运行。请注意顺序很重要

*   /etc/init.d/couchdb 停止
*   /etc/init.d/couchdb 启动
*   /etc/init.d/rabbitmq-server 停止
*   /etc/init.d/rabbitmq-server 启动
*   /etc/init.d/chef-solr 停止
*   /etc/init.d/chef-solr 开始
*   /etc/init.d/chef-expander 停止
*   /etc/init.d/chef-expander 开始
*   /etc/init.d/chef-server 停止
*   /etc/init.d/chef-server 启动
*   /etc/init.d/chef-server-webui 停止
*   /etc/init.d/chef-server-webui 启动

# algorithm - 拓扑排序是否试图对顶点或边进行排序？

> ID：10062515
> 
> 赞同：7
> 
> 时间：2012-04-08T11:37:20.820
> 
> 标签：algorithm, data-structures, graph, depth-first-search, topological-sort

祝大家复活节快乐。

我目前正在学习拓扑排序，并且有一个关于拓扑排序试图真正排序的问题。

[算法设计手册](http://www.algorist.com/)是这样描述拓扑排序的：

> 拓扑排序是有向无环图（DAG）上最重要的操作。**它对一条线上的顶点进行排序，使得所有有向边都从左到右。**

这个大胆的部分让我感到困惑。那么拓扑排序是对顶点排序还是对所有有向边排序呢？

让我们举一个书中也有的例子。

![有向无环图](../Images/268126265df456cd7ee64a52be5d8fa9.png)

所以对于上面的DAG，我们可以得到一个拓扑排序（G、A、B、C、F、E、D）。

我可以理解这种类型。不仅顶点被排序，边也被排序，即G->A->B->C->F->E->D，这符合上面ADM书的描述：`all directed edges go from left to right`

**但是如果我删除 B->C 的边缘呢？**结果图仍然是 DAG，但拓扑排序仍然是 (G, A, B, C, F, E, D) 吗？

如果是，那么我认为边缘没有排序，因为 A->B->C 不再存在，而是 A->B 和 A->C。那么，这种情况下仍然是有效的拓扑排序吗？即使 A 是 B 和 C 的父级，我们还能认为 (G, A, B, C, F, E, D) 是有效排序吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T11:44:26.190

您可以将其视为元素的排序。

让 v1,v2,...,vn 成为元素。并让一条边`(vi,vj)`表示`vi<vj`。拓扑排序保证排序后：对于每一个`vi`，对于每一个`vj`这样的`i < j`，`vj`不大于`vi`

或者用其他表示法：假设`(vi,vj)`表示`vj`依赖于`vi`，拓扑排序保证每个元素“不依赖”排序中出现在它之后的任何元素。

> 那么拓扑排序是对顶点排序还是对所有有向边排序呢？

拓扑排序是对顶点进行排序，而不是对边进行排序。它使用边作为对顶点进行排序的约束。

> 但是如果我删除 B->C 的边缘呢？

是的，您添加的每条边，只需添加一个约束。请注意，拓扑排序可能有不止一个可行的解决方案[例如，对于没有边的图，任何排列都是可行的解决方案]。消除约束，使任何以前的解决方案，“解决一个更难的问题”仍然可行。

> 即使 A 是 B 和 C 的父级，我们还能认为 (G, A, B, C, F, E, D) 是有效排序吗？

没有问题！A在拓扑排序中出现在B，C之前，所以没有问题是他们的父亲。

希望这让它更清楚一点。

# vhdl - VHDL 中的 if 语句

> ID：10062518
> 
> 赞同：2
> 
> 时间：2012-04-08T11:37:55.017
> 
> 标签：vhdl

我对 VHDL 中的 if 语句有疑问，请参见下面的示例；-)

```
 signal SEQ : bit_vector(5 downto 0); 
signal output: bit; 
    -------

     if(SEQ = "000001") and (CNT_RESULT = "111111") then 
       output<= '1';
      CNT_RESET <= '0';
      else output<='0';
    end if; 
```

我得到：if 语句是非法的，并且“输出”有多个来源。有任何想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T12:08:22.477

我认为该`if`语句不在进程内？您只能`if`在进程内使用语句。对于进程之外的类似功能，您可以使用`when`：

```
output <= '1' when (SEQ = "000001") and (CNT_RESULT = "111111") else
          '0';

CNT_RESET <= '0' when (SEQ = "000001") and (CNT_RESULT = "111111") else
             '1'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T07:38:46.667

您可能正在架构主体（这是一个并发区域）中使用 IF 语句。那是违法的。您需要在它周围放置一个进程，以便它位于顺序区域中（代码未经测试！）：

```
 process(seq, CNT_RESULT)
     if(SEQ = "000001") and (CNT_RESULT = "111111") then 
       output<= '1';
      CNT_RESET <= '0';
      else output<='0';
    end if;
  end process; 
```

# c++ - boost:spirit::qi 解析器使用多种语法和 phoenix::construct

> ID：10062524
> 
> 赞同：2
> 
> 时间：2012-04-08T11:38:56.720
> 
> 标签：c++, parsing, boost-spirit-qi

我在编写使用另一种 Qi 语法的 Qi 语法时遇到问题。[此处](https://stackoverflow.com/questions/9678440/is-it-possible-to-re-use-boostspiritqi-grammar-in-another-grammar-definition)提出了类似的问题，但我也在尝试使用 phoenix::construct 并遇到编译困难。

这是我正在尝试做的简化版本。我意识到这个例子可能很容易用`BOOST_FUSION_ADAPT_STRUCT`.

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_container.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <cstdlib>
#include <iostream>

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

// grammar for real numbers
template <typename Iterator>
struct Real : qi::grammar<Iterator, long double()>
{
    qi::rule<Iterator, long double()> r;
    Real() : Real::base_type(r)
    {
        r %= qi::long_double;
    }
};

// grammar for complex numbers of the form a+bi
template <typename Iterator>
struct Complex : qi::grammar<Iterator, std::complex<long double>()>
{
    qi::rule<Iterator, std::complex<long double>()> r;
    Real<Iterator> real;
    Complex() : Complex::base_type(r)
    {
        r = real [qi::_a = qi::_1] >> (qi::lit("+") | qi::lit("-")) 
            >> real [qi::_b = qi::_1] >> -qi::lit("*") >> qi::lit("i")
            [
                qi::_val = phx::construct<std::complex<long double> >(qi::_a, qi::_b)
            ];
    }
};

int main()
{
    // test real parsing
    std::cout << "Parsing '3'" << std::endl;
    std::string toParse = "3";
    Real<std::string::iterator> real_parser;
    long double real_val;
    std::string::iterator beginIt = toParse.begin();
    std::string::iterator endIt = toParse.end();
    bool r = qi::parse(beginIt, endIt, real_parser, real_val);
    if(r && beginIt == endIt)
        std::cout << "Successful parse: " << real_val << std::endl;
    else
        std::cout << "Could not parse" << std::endl;

    // test complex parsing
    std::cout << "Parsing '3+4i'" << std::endl;
    toParse = "3+4i";
    Complex<std::string::iterator> complex_parser;
    std::complex<long double> complex_val;
    beginIt = toParse.begin();
    endIt = toParse.end();
    r = qi::parse(beginIt, endIt, complex_parser, complex_val);
    if(r && beginIt == endIt)
        std::cout << "Successful parse: " << real_val << std::endl;
    else
        std::cout << "Could not parse" << std::endl;
} 
```

我可以使用 Spirit 文档中演示的短语解析方法来解析 Complex，但我希望能够轻松地将 Complex 语法集成到其他解析器（例如表达式解析器）中。有什么我遗漏的东西可以让我将 Real 和 Complex 对象解析为不同的实体，同时仍然能够在其他规则/语法中有效地使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:39:03.847

`qi::_a`并`qi::_b`表示规则的第一个和第二个局部变量。这些变量只有在您`qi::locals<long double, long double>`在规则声明中作为模板参数添加时才可用`r`（在这种情况下也是`qi::grammar...`因为传递给语法构造函数的开始规则需要与语法兼容，即具有相同的模板参数） .

您可以在下面看到另一个不需要局部变量的替代方案：

```
// grammar for complex numbers of the form a+bi
template <typename Iterator>
struct Complex : qi::grammar<Iterator, std::complex<long double>()>
{
    qi::rule<Iterator, std::complex<long double>()> r;
    Real<Iterator> real;
    Complex() : Complex::base_type(r)
    {
        r = (
                real  >> (qi::lit("+") | qi::lit("-"))
                >> real  >> -qi::lit("*") >> qi::lit("i")
            )
            [
                qi::_val = phx::construct<std::complex<long double> >(qi::_1, qi::_2)
            ];
    }
}; 
```

在这种情况下，语义动作附加到整个解析器序列，我们可以使用 _N 占位符获得我们需要的属性。这里，qi::_1 指的是第一个 Real 解析器匹配的属性，qi::_2 指的是第二个解析器匹配的属性。

使用任何替代方法，我们就可以正常使用这些语法：

```
//using complex_parser, real_parser, complex_val and real_val declared in your code
std::cout << "Parsing 'variable=3+4i-2'" << std::endl;
toParse = "variable=3+4i-2";
beginIt = toParse.begin();
endIt = toParse.end();
std::string identifier;
r = qi::parse(beginIt, endIt, *qi::char_("a-z") >> '=' >> complex_parser >> '-' >> real_parser, identifier, complex_val, real_val);
if(r && beginIt == endIt)
    std::cout << "Successful parse: " << identifier << complex_val.real() << " " << complex_val.imag() << " " << real_val << std::endl;
else
    std::cout << "Could not parse" << std::endl; 
```

# c# - 如何创建 .aspx 页面列表？

> ID：10062525
> 
> 赞同：2
> 
> 时间：2012-04-08T11:39:12.030
> 
> 标签：c#, .net, drop-down-menu, filesystems

我需要在 Web 用户控件（.NET 4.0、C#、Web 窗体）中创建一个下拉列表。

此列表应该是 MyPages 文件夹中的 .aspx 列表，进入我的 Web 应用程序。

我怎样才能创建它？我需要阅读文件夹->文件还是有更好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T11:43:33.523

像这样的东西应该工作：

```
DirectoryInfo directoryInfo = new DirectoryInfo(Server.MapPath("/MyPages"));
FileInfo[] fileinfo = directoryInfo.GetFiles("*.aspx");

// do data binding here 
```

# java - 运行 Java RMI

> ID：10062529
> 
> 赞同：-1
> 
> 时间：2012-04-08T11:40:05.850
> 
> 标签：java, compilation, rmi

我在以下链接中做教程：[Java RMI Tutorial](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html)

在我手动编译成功三个文件（接口、服务器和客户端）后，在同一个文件夹中出现了三个类。然后，我确实喜欢教程所说的：

1）启动RMI服务器：`start rmiregistry`出现一个新的空白dos屏幕（可能服务器正在运行，对吗？）

2) 启动服务器: `start java -classpath classDir example.hello.Server`: 出现一个闪现的dos屏幕（它太快了，我看不到他们说什么！！！）。但是，在那个站点，他们说，在命令提示符下会输出`Server ready`. 但是，我没有看到（有什么问题吗？）

3）启动客户端：：`java -classpath classDir example.hello.Client`一长串参数看起来好像我错过了一些东西，但它并没有说明我错过了什么。

请帮我运行这个例子。

谢谢 ：）

编辑：这里是通知（如果我在没有启动命令的情况下运行服务器和客户端）

![错误](../Images/6988bb736807aeadc03ad7ca55523040.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:11:17.867

当教程说你应该运行你的服务器时

```
start java -classpath classDir example.hello.Server 
```

它（在这种情况下是错误的）假设您知道应该`classDir`用实际的类路径替换。该命令应该看起来更像这样：

```
start java -classpath "." example.hello.Server 
```

假设您的所有类都相对于您运行命令的目录。实际上，您完全省略了类路径，这会导致 JVM 吞噬您的类名并将其解释为类路径：

```
java -classpath Server 
```

如果您不知道如何确定和设置类路径，那么我肯定会建议您从更基础的教程开始，而不是直接跳入 RMI。

# c++ - 在函数中使用模板模板参数没有匹配函数错误

> ID：10062532
> 
> 赞同：1
> 
> 时间：2012-04-08T11:40:42.960
> 
> 标签：c++, templates, metaprogramming

我正在尝试使用模板模板参数定义一个函数（我只想知道它是如何工作的）。我有以下内容：

```
template <typename T, template <typename> class Cont>
typename Cont<T>::iterator binary_search (typename Cont<T>::iterator first, typename Cont<T>::iterator last)
{
    typename Cont<T>::iterator it;
    // ...
    return it;
} 
```

然后在`main ()`函数中：

```
std::vector<int> data;

// ....

std::vector<int>::iterator it = binary_search (data.begin (),data.end ()); 
```

尝试编译代码时出现此错误：

```
binary_search.cpp: In function ‘int main(int, char**)’:
binary_search.cpp:43:83: error: no matching function for call to ‘binary_search(std::vector<int>::iterator, std::vector<int>::iterator)’ 
```

我找不到任何适当的响应来帮助我解决这个错误。任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:49:25.247

你所拥有的是一个非推断的上下文，以及一个模板模板参数不匹配，即使上下文是可推断的。`std::vector`接受第二个模板参数，分配器，默认为`std::allocator`.

对于非推导上下文，`T`永远不能推导并且总是必须指定，`typename`表明这一点。[有关血腥细节，请参阅此问题。](https://stackoverflow.com/q/610245/500104)

# javascript - 使用来自 URL 的数据填充文件输入

> ID：10062535
> 
> 赞同：0
> 
> 时间：2012-04-08T11:40:52.490
> 
> 标签：javascript, django, image, file-upload

在表单中，我有一个文件输入字段（用于图像），我想添加一种可选方式来通过 ajax API 获取数据来填充此字段，这将返回图像的 URL。

如何将字段输入的内容设置为 URL 图像，特别是是否可以不传递隐藏的隐藏文本字段来将此图像 URL 传递给服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:43:20.760

文件输入用于将文件*内容*从客户端上传到服务器。由于浏览器不允许您（作为页面作者）代表客户端下载文件，因此这是不可能的。

如果您的要求是可能的，我可以通过让您访问我的网页来让您下载数 GB 的文件。那可不是一个好境地。

如果您不希望用户下载并重新上传文件，那么您就不需要文件输入。您提到的另一个解决方案（仅包含 URL 的字段）听起来非常适合。

# css - 默认 Django 1.5 管理员 CSS 不起作用

> ID：10062538
> 
> 赞同：3
> 
> 时间：2012-04-08T11:42:05.443
> 
> 标签：css, django, amazon-ec2, admin

我刚刚在 ec2 上安装了我的 django 1.5 应用程序，现在该站点的 /admin 部分没有 css。有没有办法可以配置它？

只是添加到这个 css 文件位于以下文件夹中： `/usr/local/lib/python2.6/dist-packages/django/contrib/admin/static/admin/css$`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:18:15.860

你是怎么配置的？要让管理应用程序加载静态文件，您需要在应用程序`static`目录中创建一个符号链接。你做过吗？

`ls -l`应该给出类似的东西：

```
admin -> /usr/local/lib/python2.6/dist-packages/django/contrib/admin/media 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T17:08:40.397

我有完全相同的问题，我想我想出了如何解决它。其实这并不难。您需要修改的只是您的 settings.py（STATIC_ROOT 和 STATIC_URL）和服务器配置文件（url 别名）。我用 3 个步骤写了一篇简短的博客文章。[http://www.ycshao.com/?p=898](http://www.ycshao.com/?p=898)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T07:44:54.510

龙和ycshao有很好的答案。如果您正在运行 Apache 服务器 2.4+，只想添加它。代替

```
Allow from all 
```

你应该使用

```
Require all granted 
```

它解决了我的静态文件托管问题。

# php - 确定适当的类范围 PHP

> ID：10062539
> 
> 赞同：1
> 
> 时间：2012-04-08T11:42:20.823
> 
> 标签：php, scope

我有一个模型类 ModelHome ，它是 Model 的子类，即：

```
class ModelHome extends Model 
```

模型是控制器类的变量，即：

```
class Controller {

    public $model;

    public function __construct () {
        $this->model = new Model;
    }
} 
```

是否可以从 ModelHome 类中的方法中访问 Controller 类中的方法？

我已经尝试过 parent:: 并按名称调用类，即 Controller::method 但我似乎找不到合适的范围来访问我需要的方法。

谢谢。

-文斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:54:56.337

首先，你必须有一个`ModelHome`. 如果您创建 的实例，则不会因为存在`Model`而自动扩展。所以，我想你应该是：`ModelHome``ModelHome``Controller::__construct()`

```
public function __construct () {
    $this->model = new ModelHome;
} 
```

但是，您`ModelHome`不知道您的`Controller`类/实例。您可以制作一个带有指向控制器链接的参数的`__construct`in 。`ModelHome`像这样：

```
class ModelHome extends Model {

    public $controller;

    public function __construct ($controller) {
        $this->controller = $controller;
    }
}

class Controller {

    public $model;

    public function __construct () {
        $this->model = new ModelHome($this);
    }
} 
```

现在，您的 ModelHome 通过使用了解控制器`$this->controller`

# python - 在 Python 中管理用户输入的案例

> ID：10062541
> 
> 赞同：-1
> 
> 时间：2012-04-08T11:42:32.790
> 
> 标签：python, case-sensitive

我已经设置了一个脚本，当用户输入`Yes`. 但是，当用户说`Yes`. 我究竟做错了什么？

我正在使用 Python 2.7.2。
这是我的代码：

```
print 'Hi! Welcome!'
begin = raw_input ('Will you answer some questions for me? ')
if begin == 'yes':
    print 'Ok! Let\'s get started then!'
else:
    print 'Well then why did you open a script clearly entiled\'QUIZ\'?!' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T11:46:03.673

换行就好

```
if begin == 'yes': 
```

至

```
if begin.lower() == 'yes': 
```

因为字符串比较是区分大小写的，所以只有当用户以小写输入回复时才匹配

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T11:44:29.380

这里的问题是区分大小写。

```
>>> "yes" == "Yes"
False 
```

在比较之前尝试[`str.lower()`](http://docs.python.org/library/stdtypes.html#str.lower)在用户输入上使用以忽略大小写。例如：

```
print 'Hi! Welcome!'
begin = raw_input ('Will you answer some questions for me? ')
if begin.lower() == 'yes':
    print 'Ok! Let\'s get started then!'
else:
    print "Well then why did you open a script clearly entiled\'QUIZ\'?!" 
```

#如果在 print str 中使用了单个撇号，那么它必须被双撇号包围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T19:12:43.480

如果您只想从用户那里接受多个版本的字符串，Abhijit 的方法也适用。例如，我使用它来确认用户是否要退出：

```
confirm = input('Are you sure you would like to exit? N to re-run program')
  if confirm.lower() in ('n','no'): #.lower just forces the users input to be changed to lower case
    print("I'll take that as a no.")
    return confirm #this then just goes back to main()
  else:
    exit() 
```

这种方式要么是'n'要么是'N'；'no' 或 'NO' 或 'nO' 都是可接受的 'no' 情况。

# asp.net-mvc-3 - 无法使用 [] 将索引应用于“System.Data.Entity.DynamicProxies”类型的表达式

> ID：10062545
> 
> 赞同：0
> 
> 时间：2012-04-08T11:42:58.490
> 
> 标签：asp.net-mvc-3, frameworks, entity

使用 ASP .NET MVC3。

在我的控制器中，我有这部分代码

```
 MasterMindDnetEntities context = new MasterMindDnetEntities();
    List<MasterMindDnet.Games> Games = (from g in context.Games
                                        join u in context.Users on g.g_u_Id equals u.u_Id
                                        where u.u_Login == User.Identity.Name
                                        select g).ToList();
    @ViewBag.Games = Games;
    @ViewBag.GameCount = Games.Count;
    return View("Index"); 
```

在控件中，游戏可以作为列表正常工作。

在我看来，我有：

```
@for (int i = 0; i < ViewBag.GameCount; i++)
{
    ViewBag.Games = ViewBag.Games[i]; 
```

在行`ViewBag.Games = ViewBag.Games[i];`，我得到了例外：

> 无法将带有 [] 的索引应用于“System.Data.Entity.DynamicProxies”类型的表达式。

在以前的版本中，我使用了`i < ViewBag.Games.Count;`而不是，`i < ViewBag.GameCount;`它说`ViewBag.Games`没有定义`Count`.

我怎么能解决这个问题？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:47:30.960

动态代理的问题意味着您必须“静态地”声明 ViewBag 中的内容。

因此，在您的视图中，只需制作：

```
@{
    List<MasterMindDnetGames> games = ViewBag.Games;

    for (var i = 0; i < games.Count; i++) {
       var game = games[i];//declare it in the scope you need
       //bla bla bla
    }
} 
```

# ruby-on-rails - Spree 无法从部分访问数据库？

> ID：10062552
> 
> 赞同：0
> 
> 时间：2012-04-08T11:43:51.400
> 
> 标签：ruby-on-rails, spree

我确信这与 Spree 加载的复杂性有关。

但我的主要问题是 Spree 无法加载 Country。对我来说，是 Country.find(214)。如果我在远程控制台中检查它，我觉得不用担心。所有的国家，所有的州都在那里。

但是，如果我尝试在控制器中为 states_controller#index 设置 Country.find(214)，或者创建一个执行该操作的 before_load 方法，或者将它放在视图本身中，**它总是返回** `:Error (Couldn't find Country with ID=214)`.

疯了吧？我现在想不出该怎么办。如果我做 Country = Country.first。我可以通过加载 index.haml 的空模板来让它工作。所以这意味着它正在进入某种国家。

有人对为什么会发生这种情况有任何理论上的想法吗？以及我如何能够规避它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:11:00.143

抱歉，这有点晚了，但我偶然发现了你的帖子，并找出了导致问题的原因。

国家 214 是美国，出于某种原因，Spree 默认为该国家/地区。这意味着如果你没有加载美国，你会遇到这个问题。

要绕过它，您必须在初始化程序中手动设置默认国家/地区：

```
Spree.config do |config|
  Spree::Config.default_country_id = Spree::Country.find_by_name("Singapore").id
end 
```

我希望你现在已经解决了这个问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T11:51:49.793

```
Its Pretty much easy in Spree2.0.0 should work for every Spree version too.

Spree.config do |config| # Set Country name and Currency like this(Note: you will need to    run 'rake db:seed'        before this. Change country name in Spree::Country.find_by_name('United Kingdom') replace    united kingdom to your desire one)
config.currency = 'EUR'
country = Spree::Country.find_by_name('United Kingdom')
config.default_country_id = country.id if country.present? 
```

# 您也可以设置以下选项。

```
config.site_name = "Teamer Store"
config.override_actionmailer_config = true
config.enable_mail_delivery = true

end 
```

# cocoa-touch - 高度未知的 UITableViewCells 的平铺背景

> ID：10062554
> 
> 赞同：1
> 
> 时间：2012-04-08T11:44:24.050
> 
> 标签：cocoa-touch, uitableview

我的应用程序有一个分组的表格视图，单元格使用亚麻作为背景，没有分隔线。亚麻图案在平铺 150x150 时完美重复，但如果单元格 0 的高度为 100 像素，由于图案再次从单元格 1 中的像素 0 开始，它变得很明显，因为亚麻布中的线条不匹配。亚麻布在表格视图结束的地方结束，因此它也需要随之滚动。

关于如何让它更优雅地工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:45:34.033

如果您要`UIColor`设置图案背景，则可能需要切换到放入`UIImageView`. 适当设置`frame`，但调整 的原点`bounds`以滚动内部内容。

因此，第 0 行的单元格将与`origin.y = 0`. 第 n 行的单元格的边界为`origin.y = (n * [your cell height])%[your source texture height]`。为了处理环绕（例如，如果您的单元格打算在顶部包含源模式的最后一行，然后回滚到第一行），您可能需要创建一个修改过的纹理图像，它的`[cell height] + [source texture height] - 1`像素高并且有纹理的第一部分在底部重复。

# jquery - 如何执行javascript 支柱标签

> ID：10062557
> 
> 赞同：1
> 
> 时间：2012-04-08T11:44:29.763
> 
> 标签：jquery, struts2

我有`<s:property value="somevalue" id="someid">`场。我想执行一些 scipt 来格式化这个值，但不知道如何获取任何事件来执行我的脚本。我想做这个

```
jQuery("#someid").load(function(){
 formatecurrency(this);
});

function formatecurrency(amount){
    jQuery("amount").parseNumber({format:"#,###.00", locale:"us"});
    jQuery("amount").formatNumber({format:"#,###.00", locale:"us"});
    alert(jQuery("#someid").val());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:17:07.557

如果要操作 DOM，则需要将属性放在 DOM 元素中。属性标签只是呈现一个属性值。

```
<span id="someid"><s:property .../></span> 
```

# javascript - jQuery.parseJSON 不适用于给定的字符串

> ID：10062560
> 
> 赞同：0
> 
> 时间：2012-04-08T11:45:23.373
> 
> 标签：javascript, jquery, json, parsing

jQuery.parseJSON 不适用于以下字符串：

```
({"stat":"OK","code":400,"data":[{"title":"Development Convention","event_type":false,"dates_and_times":[{"date":"28\/03\/2012","start_time":"10:00 AM","end_time":"10:00 AM"},{"date":"29\/03\/2012","start_time":"10:00 AM","end_time":"10:00 AM"},{"date":"30\/03\/2012","start_time":"12:00 PM","end_time":"12:00 PM"}],"description":"<p>This event will discuss different trends in development.<\/p>\n","featured_image":"<img src=\"http:\/\/mysite.com\/pesticide-free-organic-meal.jpg\" class=\"attachment-full wp-post-image\" alt=\"bavarian food plates with chicken and wine\" title=\"bavarian food plates with chicken and wine\" \/>","image_gallery":[{"url":"http:\/\/mysite.com","alt":false}]}]}) 
```

这是我接收数据的地方：

```
$.get( 
    api_url, 
    { method: "list_events", venue_id: 73, event_date: 'null' }, 
    function( data ) {
        alert(data); // Shows the above string
        var response = jQuery.parseJSON( data );
        alert(1); // Doesn't appear
        alert(response.stat); // Doesn't appear             
    }
); 
```

任何人都可以提供任何关于为什么它可能不起作用的见解吗？我在 stackoverflow 上的其他地方读到反斜杠必须再次转义；`\`用`\\`using替换所有实例`data = data.replace(/\\/g,"\\\\");`并不能解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T11:50:55.990

您的字符串不是有效的 JSON，`(`并且`)`在那里无效。看起来该服务已设置为返回 JSONP。

如果您`?callback=?`在 URL 中包含并使用[`$.getJSON` *^([docs])*](http://api.jquery.com/jQuery.getJSON/)，那么 jQuery 将正确完成所有解析。

例子：

```
$.getJSON(
    api_url + '?callback=?', 
    { method: "list_events", venue_id: 73, event_date: 'null' }, 
    function( data ) {
        alert(data.stat);             
    }
); 
```

`callback`是表示回调函数名称的标准参数名称，但服务可能需要另一个名称。在这种情况下，请参阅其文档。

另请查看[`$.ajax` *^([docs])*](http://api.jquery.com/jQuery.ajax/)以获取更多信息。

* * *

另一个但不太干净的解决方案是从括号中修剪开头和结尾：

```
var response = $.parseJSON(data.replace(/^\(|\)$/g, '')); 
```

* * *

当然，如果服务在同一个域中并且您可以控制它，您可以简单地返回 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:52:10.190

如果你不确定你总是可以用[http://jsonlint.com/](http://jsonlint.com/)检查你的 json 。在您的情况下，圆括号 () 是不必要的（并且不正确）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:49:47.077

这不是 json 字符串！它是一个对象

json 可以以`{`or开头`[`

你是一个对象。

# sql-server - 使用无锁 SQL Server 的一般方法

> ID：10062566
> 
> 赞同：0
> 
> 时间：2012-04-08T11:46:55.870
> 
> 标签：sql-server, tsql, stored-procedures

当我更喜欢`WITH (NOLOCK)`在特定的大型存储过程中的所有 SQL 查询中使用时，是否有一种通用的方法可以将它用于所有特定的存储过程语句，或者我应该将`WITH (NOLOCK)`其用于每个单独的查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T12:09:05.870

您可以设置[事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITED 
```

但是，不要忘记 NOLOCK 意味着您的查询可能会返回脏数据或重复数据，或者完全丢失数据。如果它适合您，我建议您研究 READ_COMMITTED_SNAPSHOT 数据库选项，以允许您在返回具有一致结果的查询时避免锁定问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T12:16:35.357

您想使用以下语法：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
```

我通过查看位于此处的 NOLOCK 表提示找到了这一点：http: [//msdn.microsoft.com/en-us/library/ms187373.aspx](http://msdn.microsoft.com/en-us/library/ms187373.aspx)。WITH(NOLOCK) 表提示相当于将隔离级别设置为 READ UNCOMMITTED。[这是来自 MSDN ( http://msdn.microsoft.com/en-us/library/ms187373.aspx](http://msdn.microsoft.com/en-us/library/ms187373.aspx) )的片段：

NOLOCK 相当于 READUNCOMMITTED。有关详细信息，请参阅本主题后面的 READUNCOMMITTED。

# php - jQuery UI datepicker：虽然我使用 strtotime，但显示 1969

> ID：10062569
> 
> 赞同：6
> 
> 时间：2012-04-08T11:46:59.490
> 
> 标签：php, jquery, datepicker

我有 PHP+JQUERY 房间预订应用程序。我正在使用 datepicker 小部件来选择日期，但遇到了问题。我尝试将所选日期（以 dd/mm/yyyy 格式）转换为 YYYY-mm-dd 格式，以便将其插入到我的数据库中。当我选择第一个日期时，它转换得很好，但是当我选择其他日期时，我看到日期 1969-12-31。这是我的 JQUERY 代码：

```
 $(function() {
    $( "#datepicker" ).datepicker({ 
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,          
        minDate: 0, 
        maxDate: "+3W", 
        dateFormat: "dd/mm/yy",
        beforeShowDay: function (date) {
        var day = date.getDay();
        return [(day == 0 || day == 1 || day == 2 || day == 3 || day == 4), ''];
        },
        onSelect: function(dateText) {
            $("#registration").load("room.php #registration", {selectedDate: dateText}, function() { 
                $( "input:submit, a, button", ".registration" ).button();
                $( "a", ".registration" ).click(function() { return false; });
            });

        }

    });
    }); 
```

然后我回显测试结果：

```
 <?php if(isset($_POST['selectedDate']))
           { 
              $selectedDate=$_POST['selectedDate']; 
              echo date('Y-m-d',strtotime((string)$selectedDate)); 
           } 
    ?> 
```

这是我的应用程序中的图像：http: [//oi43.tinypic.com/29tv2c.jpg](https://i.stack.imgur.com/qOVQp.jpg)

[1](https://i.stack.imgur.com/qOVQp.jpg)： ![在此处输入图像描述](../Images/e0063b533fc088650e5e5796cea4f4df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:48:14.563

最终我通过了这个问题。我没有在 PHP 中转换它，而是在 JS 中转换它：

```
 onSelect: function(dateText) {

        //Converting the date format by spliting the date.
        var dt= dateText;
        var arrDt = dt.split('/');
        var newDt = arrDt[2] + "-" + arrDt[1] + "-" + arrDt[0];

        //Loading the rooms div acoording to the sent selected date in JSON format  
            $("#registration").load("room.php #registration", {selectedDate: newDt}, function() { 
                $( "input:submit, a, button", ".registration" ).button();
                $( "a", ".registration" ).click(function() { return false; });
            });

        } 
```

但是我还是不知道是什么导致了 date() 函数转换问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:00:15.353

您在 MySQL 中存储的选定日期的类型是什么？使用 DATE 数据类型，您只需将 'YYYY-MM-DD 格式传递给 INSERT 语句。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4466546/mysql-working-with-dates-before-1970)

还有[这个 http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

# visual-studio-2010 - 在 ironpython 中加载 c++ dll

> ID：10062570
> 
> 赞同：0
> 
> 时间：2012-04-08T11:47:00.403
> 
> 标签：visual-studio-2010, ironpython, dllimport, managed-c++, dll

我有一个使用 dll 的 ironpython 应用程序。一些 dll 是用 c# 编写的，一个是托管 c++ 的。该应用程序在我的主机上运行良好，在任何包含 Visual Studio (2010) 安装的主机上运行良好。

当我尝试在没有 vs 的主机上运行这个应用程序时，它失败了。经过一番检查，我发现 Ironpython 无法加载 c++ dll。安装 vs - 应用程序运行良好。

我缩小了范围：安装后可以上传dll： -Microsoft 应用程序错误报告 -VC 9.0 Runtime(x86) -VC 10.0 Runtime(x86) -Microsoft Visual Studio 宏工具

我尝试安装 Microsoft Visual C++ 2010 Redistributable Package [http://www.microsoft.com/download/en/details.aspx?id=5555](http://www.microsoft.com/download/en/details.aspx?id=5555) 但没有成功。

1.  为什么？安装 vs 时到底发生了什么，当我安装 Microsoft Visual C++ 2010 Redistributable Package 组件时不会发生这种情况？
2.  如何监控使用 ipy 加载 dll 时出现的错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:20:28.623

用托管 C++ 编写的 DLL 将 DLL 用于其标准库。您可以将其更改为静态库。跟着这些步骤

1.  在 Visual Studio 中打开项目属性（右键单击项目）
2.  单击您的方式到配置属性> C++ > 代码生成
3.  在右侧，找到 Runtime Library 并选择`Multi-Threaded Debug (/MTd)`
4.  对发布版本执行相同操作，但这次选择`Multi-Threaded (/MT)`
5.  全部重建

至于你的具体问题：

**1.**可再发行安装程序将复制系统路径中的 DLL。Visual Studio 也会做同样的事情。因此，如果它不起作用，请确保您拥有 32 位或 64 位二进制文​​件（与您的代码相同，而不是您正在运行的平台）。+如果您从控制台运行，请将其关闭并启动一个新的以获取更新的路径。

**2.**使用[Dependency Walker](http://www.dependencywalker.com/)。加载你的 DLL 会告诉你它在寻找什么，它应该足够了。要监视其运行时执行，请加载 IronPython。在“Profile”菜单中，选择“Start Profiling”并提供一个命令行来重现您的问题。

# ruby-on-rails-3 - Authlogic - 如何设置 password_confirmation 仅用于更新？

> ID：10062576
> 
> 赞同：1
> 
> 时间：2012-04-08T11:48:23.613
> 
> 标签：ruby-on-rails-3, passwords, authlogic, password-confirmation

我试图仅在用户更改密码的页面上设置密码确认。我的模型看起来是这样的：

```
class User < ActiveRecord::Base
  attr_accessor :password_confirmation

  acts_as_authentic do |c|
    c.validate_login_field = false
    c.validate_password_field = false
    c.require_password_confirmation = true
    c.logged_in_timeout(15.minutes)
  end

  validates :name, :presence => {:message => 'cannot be blank.'}, :allow_blank => true, :length => {:minimum => 3, :maximum => 40}, :on => :create
  validates :email, :presence => {:message => 'address cannot be blank.'}, :allow_blank => true, :format => {:with => /\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]+\z/, :message => 'address is not valid. Please, fix it.'}, :uniqueness => true
  validates :password, :presence => {:message => 'cannot be blank.'}, :allow_blank => true, :length => { :minimum => 6, :maximum => 40}, :on => :create
  validates :password_confirmation, :presence => {:message => 'cannot be blank.'}, :allow_blank => true, :length => { :minimum => 6, :maximum => 40 }, :on => :update
end 
```

以及我保存新密码的方法：

```
 def change_password
    @user = current_user
    if @user.valid_password?(params[:user][:old_password])
      if @user.update_attributes(params[:user].reject{|key, value| key == "old_password"})
        flash[:notice] = 'Your password was successfuly changed.'
        redirect_to :back
      else
        flash[:warning] = 'You did not fill twice your new password correctly. Please, fix it.'
        redirect_to :back
      end
    else
      flash[:warning] = 'Your old password is WRONG! What is your malfunction!?!'
      redirect_to :back
    end 
  end 
```

我的问题是，如果我将表单设置为旧密码，然后是新密码（例如**new_password**），然后是新密码的确认（例如**new_password1**），所以新密码被更改并保存到数据库中 - 但它不应该，因为**新密码**和新密码的**确认**不一样……

我应该如何设置验证规则，或者哪里可能出现问题？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:52:21.947

只有在更改密码时才需要验证密码。如果未更改，`password`则应跳过该字段的验证。

Railscasts.com[第 41 集](http://railscasts.com/episodes/41-conditional-validations)向您展示了如何做到这一点。

# php - 锂：如何从另一个内部调用一个验证过滤器

> ID：10062577
> 
> 赞同：3
> 
> 时间：2012-04-08T11:48:32.850
> 
> 标签：php, validation, filter, lithium

我有一个从中扩展的基本模型。在其中，我定义了两个验证过滤器。一个检查记录是否唯一，另一个检查记录是否存在。它们的工作方式完全相同，只是返回值与另一个相反。

因此，两次编写相同的代码只返回不同的值听起来是不对的。我想知道如何从另一个调用一个自定义验证器。

这是我的`unique`验证器代码：

```
<?php
Validator::add('unique', function($value, $rule, $options) {
    $model = $options['model'];
    $primary = $model::meta('key');

    foreach ($options['conditions'] as $field => $check) {
        if (!is_numeric($field)) {
            if (is_array($check)) {
                /**
                 * array(
                 *   'exists',
                 *   'message'    => 'You are too old.',
                 *   'conditions' => array(
                 *       
                 *       'Users.age' => array('>' => '18')
                 *   )
                 * )
                 */
                $conditions[$field] = $check;
            }
        } else {
            /**
             * Regular lithium conditions array:
             * array(
             *   'exists',
             *   'message'    => 'This email already exists.',
             *   'conditions' => array(
             *       'Users.email' //no key ($field) defined
             *   )
             * )
             */
            $conditions[$check] = $value;
        }
    }

    /**
     * Checking to see if the entity exists.
     * If it exists, record exists.
     * If record exists, we make sure the record is not checked
     * against itself by matching with the primary key.
     */
    if (isset($options['values'][$primary])) {
        //primary key value exists so it's probably an update
        $conditions[$primary] = array('!=' => $options['values'][$primary]);
    }

    $exists = $model::count($conditions);
    return ($exists) ? false : true;
});
?> 
```

`exists`应该像这样工作：

```
<?php
Validator::add('exists', function($value, $rule, $options) {
    $model = $options['model'];
    return !$model::unique($value, $rule, $options);
});
?> 
```

但显然，不能那样做。我是否必须将验证函数定义为匿名函数，将其分配给变量并将其传递而不是闭包？或者有什么方法可以`unique`从内部调用`exists`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:52:57.603

匿名函数方法可以工作。然后您可以在为“存在”验证器定义的另一个匿名函数中使用该变量。这是另一个将其合并到您的基本模型类中的想法：

```
<?php

namespace app\data\Model;

use lithium\util\Validator;

class Model extends \lithium\data\Model {

    public static function __init() {
        static::_isBase(__CLASS__, true);
        Validator::add('unique', function($value, $rule, $options) {
            $model = $options['model'];
            return $model::unique(compact('value') + $options);
        });
        Validator::add('exists', function($value, $rule, $options) {
            $model = $options['model'];
            return !$model::unique(compact('value') + $options);
        });
        parent::__init();
    }

    // ... code ...

    public static function unique($options) {
        $primary = static::meta('key');

        foreach ($options['conditions'] as $field => $check) {
            if (!is_numeric($field)) {
                if (is_array($check)) {
                    /**
                     * array(
                     *   'exists',
                     *   'message'  => 'You are too old.',
                     *   'conditions' => array(
                     *
                     *     'Users.age' => array('>' => '18')
                     *   )
                     * )
                     */
                    $conditions[$field] = $check;
                }
            } else {
                /**
                 * Regular lithium conditions array:
                 * array(
                 *   'exists',
                 *   'message'  => 'This email already exists.',
                 *   'conditions' => array(
                 *     'Users.email' //no key ($field) defined
                 *   )
                 * )
                 */
                $conditions[$check] = $options['value'];
            }
        }

        /**
         * Checking to see if the entity exists.
         * If it exists, record exists.
         * If record exists, we make sure the record is not checked
         * against itself by matching with the primary key.
         */
        if (isset($options['values'][$primary])) {
            //primary key value exists so it's probably an update
            $conditions[$primary] = array('!=' => $options['values'][$primary]);
        }

        $exists = $model::count($conditions);
        return ($exists) ? false : true;
    }

}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:16:13.787

我最终创建了一个包含我需要的功能的单独方法，然后从我的验证过滤器中调用它。我已经精简了我的基本模型，只保留其中的相关数据。希望它可以帮助有类似问题的人。

```
<?php
namespace app\extensions\data;
class Model extends \lithium\data\Model {

    public static function __init() {
        parent::__init();

        Validator::add('unique', function($value, $rule, $options) {
            $model  = $options['model'];
            return ($model::exists($value, $rule, $options, $model)) ? false : true;
        });

        Validator::add('exists', function($value, $rule, $options) {
            $model  = $options['model'];
            return ($model::exists($value, $rule, $options, $model)) ? true : false;
        });
    }

    public static function exists($value, $rule, $options, $model) {
        $field   = $options['field'];
        $primary = $model::meta('key');

        if (isset($options['conditions']) && !empty($options['conditions'])) {
            //go here only of `conditions` are given
            foreach ($options['conditions'] as $field => $check) {
                if (!is_numeric($field)) {
                    if (is_array($check)) {
                        /**
                         *   'conditions' => array(
                         *       'Users.age' => array('>' => 18) //condition with custom operator
                         *   )
                         */
                        $conditions[$field] = $check;
                    }
                } else {
                    /**
                     * Regular lithium conditions array:
                     *   'conditions' => array(
                     *       'Users.email' //no key ($field) defined
                     *   )
                     */
                    $conditions[$check] = $value;
                }
            }
        } else {
            //since `conditions` is not set, we assume
            $modelName = $model::meta('name');
            $conditions["$modelName.$field"] = $value;
        }

        /**
         * Checking to see if the entity exists.
         * If it exists, record exists.
         * If record exists, we make sure the record is not checked
         * against itself by matching with the primary key.
         */
        if (isset($options['values'][$primary])) {
            //primary key value exists so it's probably an update
            $conditions[$primary] = array('!=' => $options['values'][$primary]);
        }

        return $model::count($conditions);
    }
}
?> 
```

# cordova - 如何等待回调函数返回？

> ID：10062580
> 
> 赞同：4
> 
> 时间：2012-04-08T11:49:38.167
> 
> 标签：cordova, callback, storage

我正在使用phonegap制作一个android应用程序。我正在使用 phonegap 的 Storage api 来查询数据库。这是我的代码：

```
function directPath(src, dest)
{
    var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(queryDB, errorCB);
    return arrayroute;
}

function queryDB(tx)
{
    tx.executeSql(query, [], querySuccess, errorCB);
}

function querySuccess(tx,results) {
    //Write some code here.
}

function errorCB(err) {
    alert("Error in SQL: " + err);
} 
```

问题是我想等到回调方法 querySuccess 完成执行后再从 directPath 方法返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T12:18:03.663

不要试图与异步作斗争：您的应用程序可能最终看起来对用户没有响应。对之后必须执行的任何代码使用 querySuccess 回调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-19T13:42:46.200

我写了一个函数来解决类似的问题，你可以这样调用它：

```
database("SELECT * FROM USER", function(result){
    console.log(result);
});

//FUNCTION
function database(sql, callback) {

    if(!callback) { callback = function(r) { console.log(r); } }

    var database_name = "Database",
        database_version = "1.0",
        database_displayname = "DatabaseName",
        database_size = 1000000,
        result = {
            error: -1,
            message: "",
            len: 0,
            rows: {}
        },
        db = window.openDatabase(database_name, database_version, database_displayname, database_size);
        db.transaction(
                        function (tx) {
                            tx.executeSql(sql, [], querySuccess, errorCB);
                        }, function (tx, results) {
                            //SUCCESS
                        }, function (err) {
                            //ERROR
                        }
        );
        function querySuccess(tx, results) {
            if (results) {
                result.len = results.rows.length;
                result.message = "Success";
                for (var i=0; i<result.len; i++){
                    result.rows[i] = results.rows.item(i);
                }
            } else {
                result.len = 0;   
            }
            callback( result );
        }
        function errorCB(err) {
            result.error = err.code;
            result.message = err.message;
            callback( result );
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:48:52.403

您不必等待...只需在 querySuccess 中编写您的代码以在之后执行它...。

# javascript - Javascript 中的私有成员。它们可以是非静态的吗？

> ID：10062583
> 
> 赞同：2
> 
> 时间：2012-04-08T11:50:01.490
> 
> 标签：javascript, static, private, encapsulation, members

我在这里有这段代码：

```
var Person = (function() {
    var name;

    var PersonConstructor = function(n) {
        name = n;
    };

    PersonConstructor.prototype.getName = function() {
        return name;
    };

    return PersonConstructor;

})();

var people = [];
var person1 = new Person("Foo");
var person2 = new Person("Bar");
alert(person1.getName()); // I want it to be Foo
people.push(person1);
people.push(person2); 
```

我从[这里得到了模拟类的想法。](http://paintincode.blogspot.co.uk/2011/09/implement-private-variables-and.html). `var name;`但是当然，我忽略了私有变量也是静态变量的事实。由于这阻碍了我目前的努力，我想知道是否有办法在这个例子中保持私人行为但避免静态行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:54:57.743

使用`this`.

```
var Person = (function() {
  var PersonConstructor = function(n) {
    this.name = n;
  };

  PersonConstructor.prototype.getName = function() {
    return this.name;
  };

  return PersonConstructor;    
})(); 
```

不幸的是，这不会保留私有状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:13:51.387

这只是一个范围问题。

```
var Person = (function(){

    var PersonConstructor = function(n){ 
        // *************************************************************** 
        // PRIVATE VARIABLES AND FUNCTIONS 
        // ONLY PRIVELEGED METHODS MAY VIEW/EDIT/INVOKE 
        // *************************************************************** 

        var myName=n?n:"John Doe";

        // *************************************************************** 
        // PRIVILEGED METHODS 
        // MAY BE INVOKED PUBLICLY AND MAY ACCESS PRIVATE ITEMS 
        // MAY NOT BE CHANGED; MAY BE REPLACED WITH PUBLIC FLAVORS 
        // *************************************************************** 
        this.toString=this.getName=function(){ return myName } 
    } 
    return PersonConstructor;
})();

var person1 = new Person("foo");
var person2 = new Person("bar");

alert(person1.getName());
alert(person1.toString());
alert(person1.myName);

// alerts "foo", "foo", undefined 
```

**编辑 - 这是我原来的解决方案。**

```
var Person = function(n){ 
    // *************************************************************** 
    // PRIVATE VARIABLES AND FUNCTIONS 
    // ONLY PRIVELEGED METHODS MAY VIEW/EDIT/INVOKE 
    // *************************************************************** 

    var myName=n?n:"John Doe";

    // *************************************************************** 
    // PRIVILEGED METHODS 
    // MAY BE INVOKED PUBLICLY AND MAY ACCESS PRIVATE ITEMS 
    // MAY NOT BE CHANGED; MAY BE REPLACED WITH PUBLIC FLAVORS 
    // *************************************************************** 
    this.toString=this.getName=function(){ return myName } 

} 

var person1 = new Person("foo");
var person2 = new Person("bar");

alert(person1.getName());
alert(person1.toString());
alert(person1.myName);

// alerts "foo", "foo", undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T11:57:33.230

使用原型时没有“私人”。

需要注意的是，私有状态没有任何价值，像瘟疫一样避免它。闭包既丑陋又昂贵。

```
var o = {
    name: value
} 
```

但是，如果您坚持妄想并且非常想要私人状态，那么

您可以将状态存储在闭包中

```
function nameHolder(name) {
    return {
        get name() {
            return name
        },
        set name(n) {
            name = n
        }
    }
} 
```

请注意，这是非常低效的并且几乎没有什么好处。

或者，您可以将状态存储在弱图中

```
function privates() {
    var map = new WeakMap()

    return function (key) {
        var v = map.get(key)
        if (!v) {
            v = {}
            map.set(key, v)
        }
        return v
    }
}

var NameHolder = (function () {
    var state = privates()

    return {
        constructor: function (name) {
            state(this).name = name
        },
        getName: function () {
            return state(this).name
        }
    }
}()) 
```

`WeakMap`浏览器支持不存在，因此使用 [pd.Name模拟它](https://github.com/raynos/pd#pdName)

# css - 如何计算移动设备的宽度和高度

> ID：10062589
> 
> 赞同：0
> 
> 时间：2012-04-08T11:51:31.777
> 
> 标签：css, ios, html, android-layout, web-applications

我想在 document.body 下创建一个 div。该 div 的宽度和高度应该完全适合移动设备，现在该设备可以是 ipad 之类的平板电脑或 iPhone 之类的移动设备，或者桌面浏览器上的任何网页。我尝试使用 screen.width 和 screen.height，但这些值并不完全等于设备的宽度和高度！然后根据经验，我尝试从中减去一些数字，并得到 18，当该 div 的宽度和高度 = sreen.width 和 screen.height 时，它避免了 document.body 上的滚动。但即使是这个数字也不是在所有浏览器上都是一致的。

我还有一个问题，在iphone上，如果我们将视图从纵向更改为横向，为什么字体大小会发生变化？我在 html 页面上有这个元标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:28:59.400

您可以使用 jQuery：

```
var w = $(document).width();
var h = $(document).height();
//your div, for example with class 'loremIpsum', will get exactly that sizes with:
$('div.loremIpsum').width(w).height(h); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:13:25.830

尝试使用[PHP浏览器检测库](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/)

它提供了有关操作系统、浏览器等的大量信息。

# xpath - following-sibling::text() 仅当包含 needle

> ID：10062591
> 
> 赞同：6
> 
> 时间：2012-04-08T11:52:25.973
> 
> 标签：xpath

在 PHP-Xpath 我得到`<br />`标签之间的文本，如：

```
//*/br/following-sibling::text() 
```

*仅当包含“针”*时，我如何才能获得此文本？

像`br[contains(.,'needle')]`- 或 -`following-sibling::*contains(.,'needle')/text()`

感谢任何帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T18:49:46.853

**使用**：

```
following-sibling::text()[contains(., 'needle')] 
```

# c# - 使用基于画布的图标集

> ID：10062599
> 
> 赞同：0
> 
> 时间：2012-04-08T11:54:12.773
> 
> 标签：c#, wpf, xaml, icons

我刚刚在这里找到了一个图标集： [http ://www.archetype-in​​c.com/yard/fundamentals/icons/](http://www.archetype-inc.com/yard/fundamentals/icons/)

我一直在寻找类似的东西，但是这并没有提供很多 PNG 文件，而是一个 adobe illustrator 和 XAML 文件。

幸运的是我正在使用 WPF，所以希望我应该能够使用 XAML 文件。事实上，我更喜欢 PNG 的想法，因为它是可扩展的。

无论如何，我的问题是我*不*知道如何使用它。我对 XAML 比较陌生。

它是用画布组格式化的，例如，从一开始就有一点：

```
<Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="fundamental_icons" Width="1000" Height="1225" Clip="F1 M 0,0L 1000,0L 1000,1225L 0,1225L 0,0">
    <Canvas x:Name="Document" Width="1000" Height="1225" Canvas.Left="0" Canvas.Top="0">
        <Rectangle Width="1000" Height="1225" Canvas.Left="0" Canvas.Top="0" Stretch="Fill" Fill="#FFFFFFFF"/>
        <Rectangle Width="0.75" Height="7.85938" Canvas.Left="449.967" Canvas.Top="18.9948" Stretch="Fill" Fill="#FF000000"/>
        <Path Width="2.92188" Height="7.85938" Canvas.Left="451.573" Canvas.Top="18.9948" Stretch="Fill" Fill="#FF000000" Data="F1 M 454.354,21.1823L 453.245,21.1823L 453.245,20.6823C 453.245,20.0729 453.229,19.5885 453.995,19.5885C 454.167,19.5885 454.323,19.6041 454.495,19.6354L 454.495,19.0416C 454.276,19.0104 454.12,18.9948 453.917,18.9948C 452.807,18.9948 452.526,19.6823 452.542,20.6666L 452.542,21.1823L 451.573,21.1823L 451.573,21.7604L 452.542,21.7604L 452.542,26.8541L 453.245,26.8541L 453.245,21.7604L 454.354,21.7604L 454.354,21.1823 Z "/>
        <Path Width="5.0625" Height="7.76563" Canvas.Left="457.433" Canvas.Top="21.1823" Stretch="Fill" Fill="#FF000000" Data="F1 M 459.699,26.8385L 459.464,27.4791C 459.23,28.0104 459.089,28.3698 458.48,28.3698C 458.324,28.3698 458.168,28.3541 457.996,28.3229L 457.996,28.901C 458.105,28.9479 458.261,28.9479 458.527,28.9479C 459.402,28.9479 459.636,28.6823 460.027,27.7291L 462.496,21.1823L 461.793,21.1823L 460.043,26.0104L 458.183,21.1823L 457.433,21.1823L 459.699,26.8385 Z "/>
        <Path Width="5.35938" Height="6.01563" Canvas.Left="462.742" Canvas.Top="21.0104" Stretch="Fill" Fill="#FF000000" Data="F1 M 465.43,21.0104C 463.68,21.0104 462.742,22.3854 462.742,24.0104C 462.742,25.651 463.68,27.026 465.43,27.026C 467.164,27.026 468.102,25.651 468.102,24.0104C 468.102,22.3854 467.164,21.0104 465.43,21.0104 Z M 465.43,21.5885C 466.758,21.5885 467.414,22.8073 467.414,24.0104C 467.414,25.2291 466.758,26.4323 465.43,26.4323C 464.102,26.4323 463.43,25.2291 463.43,24.0104C 463.43,22.8073 464.102,21.5885 465.43,21.5885 Z "/>
        <Path Width="4.60938" Height="5.84375" Canvas.Left="469.151" Canvas.Top="21.1823" Stretch="Fill" Fill="#FF000000" Data="F1 M 473.76,21.1823L 473.057,21.1823L 473.057,24.1666C 473.057,25.3073 472.541,26.4323 471.354,26.4323C 470.26,26.4323 469.87,25.901 469.838,24.8698L 469.838,21.1823L 469.151,21.1823L 469.151,24.8698C 469.151,26.1823 469.698,27.026 471.135,27.026C 471.979,27.026 472.729,26.5885 473.088,25.8385L 473.12,25.8385L 473.12,26.8541L 473.76,26.8541L 473.76,21.1823 Z "/>
        <Rectangle Width="0.6875" Height="7.85938" Canvas.Left="478.131" Canvas.Top="18.9948" Stretch="Fill" Fill="#FF000000"/>
        <Path Width="0.6875" Height="7.85938" Canvas.Left="480.155" Canvas.Top="18.9948" Stretch="Fill" Fill="#FF000000" Data="F1 M 480.155,26.8541L 480.843,26.8541L 480.843,21.1823L 480.155,21.1823L 480.155,26.8541 Z M 480.155,20.1041L 480.843,20.1041L 480.843,18.9948L 480.155,18.9948L 480.155,20.1041 Z "/> 
```

我如何将这些图标放入常规的 WPF 应用程序中？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:09:58.187

WPF 中的每个控件都可以是其他控件的容器。所以在按钮中添加 xaml 图像真的很容易。复制一行图标集并将其放入按钮内容中。

```
<Button Width="30" Height="30">
    <Button.Content>
        <Path Width="4.60938" Height="5.84375" Canvas.Left="539.166" Canvas.Top="21.0104" Stretch="Fill" Fill="#FF000000" Data="F1 M 539.166,26.8541L 539.853,26.8541L 539.853,23.5416C 539.869,22.4323 540.541,21.5885 541.635,21.5885C 542.76,21.5885 543.072,22.3385 543.072,23.3073L 543.072,26.8541L 543.775,26.8541L 543.775,23.1979C 543.775,21.8541 543.291,21.0104 541.681,21.0104C 540.885,21.0104 540.119,21.4791 539.869,22.151L 539.853,22.151L 539.853,21.1823L 539.166,21.1823L 539.166,26.8541 Z "/>
    </Button.Content>
</Button> 
```

对于你的第二个问题。在您可以通过调用其键添加图标之后，可以使用不同的键映射资源中的每个几何图形。

```
<Window.Resources>
    <StreamGeometry x:Key="Geometry1">F1M539.166,26.8541L539.853,26.8541 539.853,23.5416C539.869,22.4323 540.541,21.5885 541.635,21.5885 542.76,21.5885 543.072,22.3385 543.072,23.3073L543.072,26.8541 543.775,26.8541 543.775,23.1979C543.775,21.8541 543.291,21.0104 541.681,21.0104 540.885,21.0104 540.119,21.4791 539.869,22.151L539.853,22.151 539.853,21.1823 539.166,21.1823 539.166,26.8541z</StreamGeometry>
</Window.Resources>

<Grid>
    <Button Width="30" Height="30">
        <Button.Content>
            <Path Width="9.2" Height="11.6" Stretch="Fill" Fill="#FF000000" Data="{DynamicResource Geometry1}"/>
        </Button.Content>
    </Button>
</Grid> 
```

# git - Git 在一个非常糟糕的地方 - 无法重置冲突的文件

> ID：10062604
> 
> 赞同：0
> 
> 时间：2012-04-08T11:55:06.370
> 
> 标签：git, conflict, infinite-loop

我有变化。我藏起来了。我更新了。我藏起来了。发生了冲突。我相信我又做到`git add style.css`了。然后我做到了`git commit -m "stuff" style.css`，它奏效了。我可以在日志中看到我的更改。

然而我现在在地狱

```
> git status
    #
    #   modified:   style.css
    #
    # Changed but not updated:
    #
    #   modified:   style.css
    #

> git checkout -- style.css 
    error: path 'style.css' is unmerged

> git reset HEAD style.css 
    Unstaged changes after reset:
    M   style.css
    U   style.css

> git ls-files -u 
    100644 cf84f92ca42b4a922eca50e18678450f8b37 3   style.css

> git reset --hard HEAD
    ... it hangs and locks up my computer, and have to force quit terminal ...

> git fsck
    dangling blob 1983b7e295f163ce1458ed1dfe57dca686a46
    dangling blob 8d922d3aeb3f9eed5a9469fd2de432d3fee9f
    dangling commit de0ea03d25293e353b0a7693d10ed24c9940f
    dangling blob a660abd6e159149d6475506e5d5f17fcd71d7
    dangling blob 42b0250d914fa2fa7e0d8194739cf99e47bdf 
```

看来 git reset --hard HEAD 开始占用我的磁盘空间。我可以看到活动监视器显示可用磁盘空间从几 GB 变为 200 MB，然后它告诉我必须关闭应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:42:48.943

因此，除非有人提出其他建议，否则我能够解决此问题的唯一方法`git checkout -f master`是`git checkout branchname`

# image - 意外的“数组”文本出现在我网站的供稿中

> ID：10062605
> 
> 赞同：0
> 
> 时间：2012-04-08T11:55:25.857
> 
> 标签：image, rss, feed

我一直在玩弄我网站的 function.php 以在我的提要中显示图像。图像看起来很好，但图像后面出现了这个“数组”文本。老实说，这超出了我的范围，因为我只是这个 php 代码的新手。希望这里有人对此有答案。

我的function.php代码是：

```
function featuredtoRSS($content) {
    global $post;
    $image = wp_get_attachment_image_src(get_field('image_1'));
    ?>
    <img class="entry-thumb wp-post-image" width="80px" style="float:left" src="<?php echo $image[0]; ?>" alt="<?php get_the_title(get_field('image_1')) ?>" />
    <?php { $content = '' . $image . '' . $content; }
    return $content;
}

add_filter('the_excerpt_rss', 'featuredtoRSS'); 
```

我使用 wordpress 3.3.1 这是我的提要的样子（请参阅图像和内容之间的“数组”文本） [http://autonewsmedia.com/feed](http://autonewsmedia.com/feed)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:48:55.297

明白了，把代码改成：

```
function featuredtoRSS($content) {
global $post;
$image = wp_get_attachment_image_src(get_field('image_1')); ?>
<img src="<?php echo $image[0]; ?>" alt="<?php get_the_title(get_field('image_1')) ?>" />
<?php return $content;
}
add_filter('the_excerpt_rss', 'featuredtoRSS'); 
```

希望它对其他人有帮助。

# javascript - HTML DOM 从哪里开始？窗户？文档？文档.defaultView？

> ID：10062607
> 
> 赞同：14
> 
> 时间：2012-04-08T11:55:59.847
> 
> 标签：javascript, window, document, dom

作为标题。

有没有介绍 HTML DOM 结构的图片？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-09T01:51:15.717

DOM（**文档**对象模型）从`document`节点开始。它被称为“根节点”。

观察以下树（`nodeType`括号中对应的 s）：

```
[HTMLDocument](9)
    [DocumentType](10)
    [HTMLHTMLElement](1)
        [HTMLHeadElement](1)
            [HTMLTitleElement](1)
                [Text]Title(3)
        [HTMLBodyElement](1) 
```

树¹将由以下标记形成：

```
<!DOCTYPE HTML><html><head><title>Title</title></head></body></html> 
```

请注意明显缺少空格。添加空格会将文本节点添加到文档树中，并且显然会使模拟变得更加困难。

该`window`对象不是 DOM 的一部分。它是作为“[全局对象](http://es5.github.com/#x15.1)”实现的宿主对象，以完成一个 ECMAScript 实现。它有[自己的标准](http://dev.w3.org/html5/spec/browsers.html#the-window-object)，可从 W3C 获得。尽管需要全局对象来完成 ECMAScript 实现，但 DOM 不是。这在 node.js 环境中得到了例证。

¹ 某些环境会忽略 doctype 节点。我观察到 Opera 5-9 和 Safari 3.1 是表现出这种行为的环境。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-04-08T12:13:05.343

窗口没有公共标准，但大多数浏览器都以 Window 为根支持它。我在以下网址找到了很多好东西：[http](http://www.w3schools.com) ://www.w3schools.com （我与该网站没有任何联系）。

一个简单的谷歌搜索“dom html”图像会得到你的图像。然后...

当一切都失败了 - 去源头：[http ://www.w3.org/TR/DOM-Level-2-HTML/html.html](http://www.w3.org/TR/DOM-Level-2-HTML/html.html)

# java - SimpleDateFormat - 无法解析的日期

> ID：10062608
> 
> 赞同：5
> 
> 时间：2012-04-08T11:56:19.537
> 
> 标签：java, android, simpledateformat

我尝试将字符串转换为日期。

这是我的代码：

```
 SimpleDateFormat format =  new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    Date date = format.parse("Sun Apr 08 16:37:00 CEST 2012"); 
```

我得到例外：

> 04-08 13:51:36.536：W/System.err(8005)：java.text.ParseException：无法解析的日期：“Sun Apr 08 16:37:00 CEST 2012”。

格式好像没问题。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T12:21:44.720

您发布的代码不是您的实际代码，或者您有语言环境问题。它在具有美国语言环境的~~Sun Oracle Java 1.6 上运行良好。~~

将您的代码更改为：

```
SimpleDateFormat format =  
    new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy", Locale.US); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T13:53:56.657

[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)是特定于[语言环境](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)的。至少模式`E`和`M`特定于区域设置，因为例如“Sun”或“Sunday”将不匹配 Locale.GERMAN 或 Locale.FRENCH 等。您最好指定使用的 Locale

```
SimpleDateFormat format =  new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy", Locale.US); 
```

或使用不特定于区域设置的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-04T09:47:34.080

其他答案在 2012 年是很好的答案。以下是如何使用现代（2014）Java 日期和时间类的示例：

```
 System.out.println("date de la requete est " + dateq);
    DateTimeFormatter dtf = DateTimeFormatter
            .ofPattern("EEE MMM dd HH:mm:ss xx uuuu", Locale.ROOT);
    OffsetDateTime dateTime1 = OffsetDateTime.parse(dateq, dtf);

    System.out.println("new date " + dateTime1); 
```

代码示例的灵感来自一个重复的问题（如我所见），[How to convert Xml String date to int in java](https://stackoverflow.com/questions/44351846/how-to-convert-xml-string-date-to-int-in-java)。使用该问题中的示例字符串，它会打印：

```
date de la requete est Tue Feb 08 12:30:27 +0000 2011
new date 2011-02-08T12:30:27Z 
```

问：我无法在 Android 上使用较新的类（？）

答：是的，你可以。对于 Android，请使用专门为 Android 定制的 backport，[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)。否则，对于 Java 6 和 7，请使用[ThreeTen Backport](http://www.threeten.org/threetenbp/)。

问：您的代码不适用*于此*问题中的日期时间字符串！

A: (1) 如果可以，请避免使用 CEST 等三个和四个字母的时区缩写。许多是模棱两可的，甚至可能会随着您的 JVM 当前时区设置而有所不同。CEST 只是一个时区的夏季半个时区，而不是一个完整的时区。（2）如果您无法获得没有`CEST`或类似的字符串，请尝试在问题中使用`ZonedDateTime`而不是`OffsetDateTime`和使用`zzz`格式模式。这在示例中有效并产生`2012-04-08T16:37+02:00[Europe/Paris]`.

问：如何使用较新的类？

[答： Oracle 教程](https://docs.oracle.com/javase/tutorial/datetime/index.html)是一个很好的起点。

问：`Locale.ROOT`？？

答：如果您的日期时间字符串来自世界上的特定地点并使用该地点的语言，当然请使用相应的语言环境。如果它只是英语，因为各地的计算机系统都倾向于输出英语，我更喜欢使用`Locale.ROOT`“语言环境中性语言环境”，比如说“不要在这里做任何特定于语言环境的事情”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T12:14:15.930

看起来“太阳”无法识别。尝试这个：

```
date = format.parse("Sunday Apr 08 16:37:00 CEST 2012"); 
```

为我工作。

# c++ - 来自二进制数据的 C++ HBITMAP

> ID：10062612
> 
> 赞同：-1
> 
> 时间：2012-04-08T11:56:55.307
> 
> 标签：c++, bitmap, load, buffer

我正在使用 Winapi，但我被卡住了。通常在我正在使用的对话框上将图像加载到 SS_BITMAP

```
HBITMAP hImage = ( HBITMAP ) LoadImage( hInstance, L"D:\\foo.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE );
HWND hFrame = GetDlgItem( hWnd, IDC_IMAGE );
SendMessage(hFrame, STM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hImage); 
```

但现在我有不同的任务。我需要从包含图像二进制数据的缓冲区中放入图像。我使用了一些代码，但我知道它是错误的`SetBitmapBits( hImage, sizeof(image),image);`。`image`是带有数据的字符数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:21:47.037

然后你可以使用

*   [`CreateDIBSection`](http://msdn.microsoft.com/en-us/library/dd183494%28v=vs.85%29.aspx)创建位图内存结构
*   [`SetDIBits`](http://msdn.microsoft.com/en-us/library/dd162973%28v=vs.85%29.aspx)用你的像素数据填充它

这个[SO 答案](https://stackoverflow.com/a/2901465/591064)对我来说看起来不错。

# php - 使用多复选框将具有相同 id 的各种项目添加到表中

> ID：10062613
> 
> 赞同：0
> 
> 时间：2012-04-08T11:57:07.520
> 
> 标签：php, mysql

我有一个包含主题列表的复选框。在我的用户注册后，他们可以选择一个主题列表，然后将其放入表格中。目前我有代码可以找到他们的 member_id 并将其添加到表中。但我不确定如何处理用户选择的主题，然后将其添加到用户 member_id 的兴趣表中。

我知道我需要使用 for 循环来处理 member_id 和 topic_id 并将每个选择的添加到表中。但我不知道该怎么做。这是我的代码。

这是我的表格

```
</form>
            <form method="post" action="topic.php">
            <input type="checkbox" name="topic[]" value="1"> artificial intelligance
            <input type="checkbox" name="topic[]" value="2"> computer graphics
            <input type="checkbox" name="topic[]" value="3"> computer animation
            <input type="submit" name="submit" value="submit topic">
</form> 
```

这两个找到 member_id 和 topic_id

// 查找成员id

```
$query = "SELECT member_id FROM member where username = '$un'";
$result = mysql_query($query) or die ("query failed: " . mysql_error());        
    $row = mysql_fetch_array($result, MYSQL_ASSOC);
    $username=$row['member_id'];

//find the topic id 
$query = "SELECT topic_id FROM topic WHERE topic_name ='$interest'";
    $result = mysql_query($query) or die ("query failed: " . mysql_error());        
    $row = mysql_fetch_array($result, MYSQL_ASSOC);
    $topic_id=$row['topic_id']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:06:04.677

你可以这样做

**假设**

A. Member ID 是整数

B. 表是这样创建的

```
CREATE TABLE IF NOT EXISTS `selectedtopic` (
  `selectedID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `memberID` int(11) NOT NULL,
  `topicID` int(11) NOT NULL,
  `selectedStatus` tinyint(4) NOT NULL,
  PRIMARY KEY (`selectedID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

示例代码

```
$sql = "INSERT INTO  `stackoverflow`.`selectedtopic` (
`selectedID` ,
`memberID` ,
`topicID` ,
`selectedStatus`
)
VALUES (
NULL ,  '%d',  '%d',  '%d');" ;

foreach($_POST['topic'] as $selected)
{
    mysql_query(sprintf($sql,$username,$selected,1)) ;
} 
```

如果您需要更多帮助，请告诉我

# iphone - Xcode - UIImageView 在边缘停止

> ID：10062617
> 
> 赞同：0
> 
> 时间：2012-04-08T11:57:45.773
> 
> 标签：iphone, ios, xcode, uiimageview

我有一个 UIImageView 被一个计时器移动到视图的边缘，但它继续进行，我不知道如何在 UIImageView 碰到他的边缘时立即停止它！请帮忙？这是我迄今为止在我的方法中尝试过的！

代码：

```
-(void)moveBack {
CGPoint manCenter = man.center;
if (manCenter.x > 480) {
    manCenter.x = 480;
}

man.center = CGPointMake(man.center.x +5, man.center.y);
[self ifCollided];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:15:56.467

当你这样做`man.center.x + 5`时，它将超出`UIImage`框架。当您将其设置为 480 时，它应该是合适的。

```
-(void)moveBack {
    man.center = CGPointMake(man.center.x + 5, man.center.y);
    [self ifCollided];

    if (man.center.x > 480) {
        man.center = CGPointMake(480 , man.center.y);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:41:38.800

```
-(void)moveBack {
    man.center = CGPointMake(man.center.x + 5, man.center.y);
    [self ifCollided];

    if (man.center.x > 480) {
        man.center = CGPointMake(480 , man.center.y);
    }
} 
```

# c - 为什么这段代码会导致分段错误？

> ID：10062619
> 
> 赞同：-1
> 
> 时间：2012-04-08T11:57:54.710
> 
> 标签：c, segmentation-fault

我正在编写一个返回字符串的前`n`( `n <= strlen(src)`) 个字符的函数。

```
char* substring(char *src, int n)
{
   char *substr;
   int i;
   for (i = 0; i < n; i++)
     *substr++ = *src++;
   src = src - n;
   *substr = '\0';
   return substr - n;
} 
```

此函数仅在调用一次时返回正确答案，但在多次调用时返回 Seg Fault。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T12:01:14.723

没有为其分配内存，`substr`因此该函数引用了一个未初始化的指针，并且正在写入不应该导致**未定义行为**的内存。它第一次起作用的事实是完全的机会。

为 分配内存`substr`：

```
char* substr = malloc(n + 1); /* Plus one for null teminator. */ 
```

请注意，调用者`substring()`必须`free()`返回缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:05:42.287

您需要在 substring 函数中为 char *substr 分配内存。您目前正在破坏内存，这导致了段错误。一个简单的： char *substr = (char *)malloc(sizeof(char)*n+1); 应该做的伎俩。

# c - 难以理解 C 中的可变长度数组

> ID：10062621
> 
> 赞同：3
> 
> 时间：2012-04-08T11:58:20.520
> 
> 标签：c, arrays, declaration

当我发现数组大小必须在声明时给出或在运行时使用 malloc 从堆中分配时，我正在读一本书。我用 C 编写了这个程序：

```
#include<stdio.h>

int main() {
  int n, i;
  scanf("%d", &n);
  int a[n];
  for (i=0; i<n; i++) {
    scanf("%d", &a[i]);
  }
  for (i=0; i<n; i++) {
    printf("%d ", a[i]);
  }
  return 0;
} 
```

这段代码工作正常。

我的问题是这段代码如何才能正常工作。数组大小必须在运行前声明或在运行时使用 malloc() 分配它是否违反了 C 的基本概念。这两件事我都没有做，那为什么它工作正常？

我的问题的解决方案是 C99 支持的可变长度数组，但是如果我玩弄我的代码并将语句 int a[n]; 以上 scanf("%d,&n); 然后它停止工作为什么会这样。如果 C 中支持可变长度数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T12:01:06.190

C99 标准支持[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)。这些数组的长度是在运行时确定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T12:01:41.967

从 C99 开始，您可以在块范围内声明可变长度数组。

例子：

```
void foo(int n)
{
    int array[n];

    // Initialize the array
    for (int i = 0; i < n; i++) {
        array[i] = 42;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T12:03:35.837

只要您在使用之前声明了数组并为其分配了内存，C 就会很高兴。C 的“特性”之一是它不验证数组索引，因此程序员有责任确保所有内存访问都是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-11T16:05:00.667

可变长度数组是 C99 中添加到 C 中的一项新功能。

这里的“可变长度”意味着数组的大小是在运行时决定的，而不是编译时。这并不意味着数组的大小在创建后可以更改。数组是在声明它的地方逻辑创建的。所以你的代码看起来像。

```
int n, i; 
```

创建两个变量 n 和 i。最初这些变量是未初始化的。

```
scanf("%d", &n); 
```

将一个值读入 n。

```
int a[n]; 
```

创建一个数组“a”，其大小是 n 的当前值。

如果您交换第二步和第三步，您将尝试创建一个大小由未初始化值确定的数组。这不太可能有好的结局。

C 标准并没有具体说明数组的存储方式，但实际上大多数编译器（我相信有一些例外）都会在堆栈上分配它。执行此操作的正常方法是将堆栈指针复制到“帧指针”作为函数前导码的一部分。然后，这允许函数动态修改堆栈指针，同时跟踪它自己的堆栈帧。

可变长度数组是一个应该谨慎使用的特性。编译器通常不会在堆栈分配上插入任何形式的溢出检查。操作系统通常在堆栈之后插入一个“保护页面”以检测堆栈溢出并引发错误或增加堆栈，但足够大的数组可以轻松跳过保护页面。

# php - 尝试将 php OpenID 与 Google 一起使用时出现 501 HTTP 错误

> ID：10062622
> 
> 赞同：0
> 
> 时间：2012-04-08T11:58:24.790
> 
> 标签：php, openid, janrain, http-error

我一直在尝试在我正在开发的项目中以消费者身份实现 openID 身份验证，但我还没有设法让示例按我的意愿工作。

尽管示例使用者非常适合 yahoo openid 身份验证，但在尝试使用 google openID 时，它在 try_auth.php 页面中失败并出现 501 HTTP 错误。

这是 try_auth.php 的代码（处理对实际 openID 提供程序的调用的页面）：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors','On');
require_once "common.php";
session_start();

function getOpenIDURL() {
    // Render a default page if we got a submission without an openid
    // value.
    if (empty($_GET['openid_identifier'])) {
        $error = "Expected an OpenID URL.";
        include 'index.php';
        exit(0);
    }

    return $_GET['openid_identifier'];
}

function run() {
    $openid = getOpenIDURL();
    $consumer = getConsumer();

    // Begin the OpenID authentication process.
    $auth_request = $consumer->begin($openid);

    // No auth request means we can't begin OpenID.
    if (!$auth_request) {
        displayError("Authentication error; not a valid OpenID.");
    }

    $sreg_request = Auth_OpenID_SRegRequest::build(
                                     // Required
                                     array('nickname'),
                                     // Optional
                                     array('fullname', 'email'));

    if ($sreg_request) {
        $auth_request->addExtension($sreg_request);
    }

    $policy_uris = null;
    if (isset($_GET['policies'])) {
        $policy_uris = $_GET['policies'];
    }

    $pape_request = new Auth_OpenID_PAPE_Request($policy_uris);
    if ($pape_request) {
        $auth_request->addExtension($pape_request);
    }

    // Redirect the user to the OpenID server for authentication.
    // Store the token for this authentication so we can verify the
    // response.

    // For OpenID 1, send a redirect.  For OpenID 2, use a Javascript
    // form to send a POST request to the server.
    if ($auth_request->shouldSendRedirect()) {
        $redirect_url = $auth_request->redirectURL(getTrustRoot(),
                                                   getReturnTo());

        // If the redirect URL can't be built, display an error
        // message.
        if (Auth_OpenID::isFailure($redirect_url)) {
            displayError("Could not redirect to server: " . $redirect_url->message);
        } else {
            // Send redirect.
            header("Location: ".$redirect_url);
        }
    } else {
        // Generate form markup and render it.
        $form_id = 'openid_message';
        $form_html = $auth_request->htmlMarkup(getTrustRoot(), getReturnTo(),
                                               false, array('id' => $form_id));

        // Display an error if the form markup couldn't be generated;
        // otherwise, render the HTML.
        if (Auth_OpenID::isFailure($form_html)) {
            displayError("Could not redirect to server: " . $form_html->message);
        } else {
            print $form_html;
        }
    }
}

run();

?> 
```

我注意到的另一个想法是，在我的 Windows 开发箱（独立的 Apache 2.2.6，不是 XAMPP，PHP 5.3.8）上，一切运行顺利，雅虎和谷歌都执行 openID 身份验证，没有任何问题。

有人知道可能出了什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:58:01.643

经过反复试验，我得出的结论是，由于 Google openID url 作为查询字符串（对于表单方法“get”）或作为 postdata（对于表单方法“post”）传递给页面，所以会发生 501 错误。特别是，我使用的网址是

> [https://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id)

最后一部分（“id”）触发了 501 错误。如果我使用

> [https://www.google.com/accounts/o8/id/](https://www.google.com/accounts/o8/id/)

错误没有被触发。好吧，由于这两个是等效的 url，我将使用第二个。我仍然很好奇为什么会发生这种情况。

# google-maps-api-3 - Google Map V3：只显示一些标记

> ID：10062624
> 
> 赞同：2
> 
> 时间：2012-04-08T11:58:51.777
> 
> 标签：google-maps-api-3, google-maps-markers

我有以下代码，它应该显示数组中位置的几个标记，单击时的每个标记都会显示一个信息窗口，一切正常，除了在 21 个位置中我只能显示 8 个标记。

```
// declare Variables
   var geocoder;
   var map;
   var tex;     
   var markersArray = [];
   // pids array 21 addreses
    var pids = [{ad:'251 Pantigo Road Hampton Bays NY 11946',pid:'9'},
    {ad:'Amagensett Quiogue NY 11978',pid:'10'},
    {ad:'789 Main Street Hampton Bays NY 11946',pid:'12'},
    {ad:'30 Abrahams Path Hampton Bays NY 11946',pid:'14'},
    {ad:'3 Winnebogue Ln Westhampton NY 11977',pid:'15'},
    {ad:'44 White Oak Lane Montauk NY 11954',pid:'16'},
    {ad:'107 stoney hill road Bridgehampton NY 11932',pid:'17'},
    {ad:'250 Pantigo Rd Hampton Bays NY 11946',pid:'19'},
    {ad:'250 Pantigo Rd Hampton Bays NY 11946',pid:'20'},
    {ad:'44 Woodruff Lane Wainscott NY 11975',pid:'21'},
    {ad:'Address East Hampton NY 11937',pid:'46'},
    {ad:'Address Amagansett NY 11930',pid:'49'},
    {ad:'Address Remsenburg NY 11960 ',pid:'50'},
    {ad:'Address Westhampton NY 11977',pid:'51'},
    {ad:'prop address Westhampton Dunes NY 11978',pid:'52'},
    {ad:'prop address East Hampton NY 11937',pid:'53'},
    {ad:'Address East Hampton NY 11937',pid:'58'},
    {ad:'Address Southampton NY 11968',pid:'59'},
    {ad:'Address Bridgehampton NY 11932',pid:'60'},
    {ad:'Address Sagaponack NY 11962',pid:'61'}];

    // create an MVCobject for creating Info window on marker
   var pin = new google.maps.MVCObject();
   // The content placeholder for the Info window. 
   var content = document.createElement("DIV");   
   var title = document.createElement("DIV");
   content.appendChild(title);
   // that is where you have the ajax result placed
   var streetview = document.createElement("DIV");
   streetview.style.width = "326px";
   streetview.style.height = "212px";
   content.appendChild(streetview);
   var infowindow = new google.maps.InfoWindow({
       content: content
   });
       // Initialize
   function initialize() {
       geocoder = new google.maps.Geocoder();
       var latlng = new google.maps.LatLng(40.8687097, -73.0014946);
       var myOptions = {
           zoom: 8,
           center: latlng,
           mapTypeId: google.maps.MapTypeId.ROADMAP
       }
       map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
       getAllPids();
   }
   // loop to create all markers
   function getAllPids() {
       var i;
      for (i = 0; i < pids.length; i++) {
           var test = pids[i];
           codeAddress(test);
       }        
   }
   // get latlng for each address , create marker  and add eventlistner to click open infowindow 
   function codeAddress(place) {
       geocoder.geocode({ 'address': place.ad }, function(results, status) {
           if (status == google.maps.GeocoderStatus.OK) {
               var marker = new google.maps.Marker({
                   map: map,
                   position: results[0].geometry.location,
                   title: place.pid
               });
               markersArray.push(marker);                  
               google.maps.event.addListener(marker, "click", function() {
                   openInfoWindow(marker);
               });
            } else {
               // alert("Geocode was not successful for the following reason: " + status);
           }
       });
   }
   // click event on marker calls this to show infowindow.
   function openInfoWindow(marker) {        
    getContent(marker.getTitle());          
       pin.set("position", marker.getPosition());
       infowindow.open(map, marker);
   }
   // Now ajax call to get the content for the current info window
   function getContent(pid) {          
      $.ajax({
                        type: "POST",
                        url: "mapSearchResult.aspx/get_map",                            
                        data: "{'pids':'"+pid +"'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function(msg) {

                         title.innerHTML =msg.d; 

                        }
                    });          
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T13:57:14.363

如果您取消注释此

```
// alert("Geocode was not successful for the following reason: " + status); 
```

你会发现[原因码](https://developers.google.com/maps/documentation/javascript/reference#GeocoderStatus)是`OVER_QUERY_LIMIT`（620）。

有一个速率限制：如果您对许多地址进行地理编码而不在它们之间引入延迟，您将打破该限制，因为您在太短的时间内完成了太多。

您的某些地址不会进行地理编码（或不会产生您想要的结果），因为地理编码器使用邮政地址。*Address East Hampton NY 11937*或*prop address Westhampton Dunes NY 11978*等地址不是邮政地址。

建议的策略是不要浪费您与他人共享的 Google 资源。在一次性操作中自己对地址进行地理编码，将这些位置存储在数据库中（或直接在代码中使用它们），然后使用坐标定位标记。每次加载页面时，不必费心查找您已经知道的位置。仅使用地理编码器查找您事先不知道的位置：用户输入的地址。

如果您确实必须一直颠覆该策略并对所有内容进行地理编码，那么您需要减慢请求速度。当您提交更多请求时，您可能不得不进一步减慢它们的速度以满足地理编码器的要求。我在[http://acleach.me.uk/gmaps/v3/plotaddresses.htm](http://acleach.me.uk/gmaps/v3/plotaddresses.htm)制作了一个版本 3 示例（来自一个著名的版本 2 示例） ——您可以看到它以请求之间的 100 毫秒延迟开始，但需要在 20 次迭代后减速到 150 毫秒左右。

# json - Play Framework：如何解决无法下载 JSON-LIB 依赖库的问题？

> ID：10062626
> 
> 赞同：1
> 
> 时间：2012-04-08T11:59:02.433
> 
> 标签：json, playframework, dependencies, json-lib

我正在使用 Play Framework 1.2.4，并使用 JSON-LIB 从 Java 代码中解析一些 JSON 数据。

最初，我只是将“json-lib-2.4-jdk15.jar”放入“lib”文件夹，应用程序运行良好。在某些时候，我知道这不是添加库的正确方法，“播放依赖项--sync”甚至会删除 JAR。

这就是我的“dependencies.yml”文件现在的样子：

```
# Application dependencies

transitiveDependencies: false 

require:
- play
- play -> crud
- play -> secure
- play -> cloudbees 0.2.2
- net.sf.flexjson -> flexjson 2.1
- net.sf.json-lib -> json-lib 2.4 
```

为什么我使用“flexjson”成功导入依赖项，但使用“json-lib”失败。

运行“play dependencies -- verbose”会出现以下错误：

```
:: problems summary ::
:::: WARNINGS
            [NOT FOUND  ] net.sf.json-lib#json-lib;2.4!json-lib.jar (347ms)

    ==== mavenCentral: tried

      http://repo1.maven.org/maven2/net/sf/json-lib/json-lib/2.4/json-lib-2.4.jar

            ::::::::::::::::::::::::::::::::::::::::::::::

            ::              FAILED DOWNLOADS            ::

            :: ^ see resolution messages for details  ^ ::

            ::::::::::::::::::::::::::::::::::::::::::::::

            :: net.sf.json-lib#json-lib;2.4!json-lib.jar

            :::::::::::::::::::::::::::::::::::::::::::::: 
```

不是在这里吗？ [http://mvnrepository.com/artifact/net.sf.json-lib/json-lib/2.4](http://mvnrepository.com/artifact/net.sf.json-lib/json-lib/2.4)

此外，该过程将其他 JAR 带入“lib”文件夹：xerces、xalan 等 - 即使在我要求忽略传递依赖项之后也是如此。

2 个问题： 1\. 我做错了什么？2\. 是否有一种“强制”Play 将某些 JAR 识别为“本地”库的好方法（因此不会从外部存储库下载它），但允许通过“依赖项”机制与其他模块和库一起工作

# architecture - 使用虚拟机分发软件的新方式？

> ID：10062629
> 
> 赞同：0
> 
> 时间：2012-04-08T11:59:52.480
> 
> 标签：architecture, virtual-machine, virtualbox, software-distribution

我在实习时遇到了这个想法。

那时我将我们的网络服务器从 nginx 转移到 node.js。我需要做很多修改和“肮脏的工作”，鉴于这种情况，我不确定我是否可以在不破坏现有系统（基于 nginx）的情况下做到这一点。因此，我制作了一个包含新的基于 nodejs 的服务器的 virtualbox 映像，并将该映像交付给其他人进行测试——人们只需使用他们的浏览器连接驻留在我的 virtualbox 映像中的应用程序的本地端口。

鉴于 HTML5、WebGL、Canvas 等前端技术的巨大改进，我认为这是分发普通桌面 GUI 应用程序的一种有吸引力的方式。

一个很大的优点是我可以摆脱不同操作系统中 GUI 框架的不同外观。（假设我们可以在不久的将来使用浏览器获得统一的外观）。

但是有一些问题我需要解决：

*   虚拟机映像的大小。我需要一个紧凑的 linux 发行版来构建一个小尺寸的图像。有什么建议么？LFS 是一个不错的选择吗？
*   我可以从基于虚拟机的应用程序中获得多少性能？也就是说，以这种方式部署计算密集型应用程序是否是个好主意？

任何建议表示赞赏。谢谢你。

PS我知道有一些类似的想法有不同的方法，比如chakra linux的捆绑系统（[捆绑系统](http://chakra-linux.org/bundles.html)）。你能给我一些比较它们的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:31:40.643

第一个问题：

我经常使用的系统是 Linux Live Distro（或构建您自己的）。使用以下工具非常简单

> debian-live

与“真正的”虚拟机相比，它们非常紧凑。让它真正最小化是一项艰巨的工作，但它确实有效。您必须决定这种方法是否毫无价值。还取决于您的客户及其对高达 300 MB 的下载大小的接受程度。

第二个问题：

如果您将带有 Intel-VT 或 AMD-V 的 CPU 与伪半虚拟化 linux 系统结合使用，您可以获得高达 99% 的 CPU 速度（计算）。通过使用 KVM 或 XEN 等真正的半虚拟化 Linux 系统，您可以获得更多。（所有这些通常需要 root/admin 权限，通常不适用于客户计算机）

# php - “where 子句”中的未知列“locals_id”

> ID：10062632
> 
> 赞同：0
> 
> 时间：2012-04-08T12:01:04.383
> 
> 标签：php, mysql

我正在一个食谱页面上工作，用户单击食谱链接，数据（完整食谱）显示在下一页上，但我似乎无法让它工作。当我尝试运行该页面时，我收到错误“'where 子句中的未知列'locals_id'”。到目前为止，这是我的代码。

```
?php 
    //connection variables
        $hostname = 'hostname';
        $username = 'username';
        $password = '********';
        $database = 'database';  

        //connect to the server
        $dbc = mysql_connect($hostname, $username, $password) or die("Unable to connect to mySQL server");

        //connect to the database
        mysql_select_db($database) or die("Unable to select database");

        $recipe_link = "-1";
        if (isset($_GET['locals_id'])) {
          $recipe_link = $_GET['locals_id'];
        }

        $query_recipeDetails = sprintf("SELECT * FROM recipe WHERE locals_id = %s", GetSQLValueString($recipe_link, "int"));
        $result = mysql_query($query_recipeDetails, $dbc) or die(mysql_error());
        $row_recipeDetails = mysql_fetch_assoc($result);

?> 
```

当谈到 php 时，我还很陌生，所以我真的一直在为这个而烦恼。我查看了一些与我类似的其他问题，但这些问题似乎也没有帮助。对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:22:12.443

查询和代码似乎是正确的。

仔细检查您的列名。可能有一些`typo`错误或检查`case sensitivity`。`locals_id` 可能`local_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:15:22.797

从 mysql 控制台运行：

显示创建表配方；

或运行

显示配方中的字段；

您将找到列的正确名称。无论如何，MySQL 列名不区分大小写，因此您的脚本中可能有一个错误类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T12:20:35.987

检查列名是否类似于数据库表中的“locals_id”并且这些是区分大小写的，否则在查询中的此符号 ` 之间给出列名。

例如。，

```
`locals_id` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T23:08:02.237

谢谢各位的帮助！我想到了。这确实与 locals_id 不是列名有关。正确的名称是 recipe_id。没看到我觉得很傻。

# android - 从 URL 下载会导致二进制响应

> ID：10062637
> 
> 赞同：0
> 
> 时间：2012-04-08T12:01:36.430
> 
> 标签：android

我尝试从此网址获取字符串：
[http ://autoc.finance.yahoo.com/autoc?query=google&callback=YAHOO.Finance.SymbolSuggest.ssCallback](http://autoc.finance.yahoo.com/autoc?query=google&callback=YAHOO.Finance.SymbolSuggest.ssCallback)

当我在 Chrome 中查看此内容时，我看到了正确的 JavaScript 响应，但是当从具有相同标头的应用程序下载它时，我得到了二进制响应。如何在应用程序中获得相同的正确响应？

**编辑：** 代码：

```
public RESTResponse<T> get(String url) {
    HttpGet get = new HttpGet(url);
    setHeaders(get);
    return execute(get);
}                                                         

private void setHeaders(HttpRequestBase request) {
    request.setHeader("Accept", "text/html,application/xhtml+xml,application/xml");
    request.setHeader("Accept-Encoding", "gzip,deflate,sdch");
    request.setHeader("Accept-Charset", "UTF-8");
}

private RESTResponse<T> execute(HttpRequestBase request) {
    DefaultHttpClient client = new DefaultHttpClient();
    try {
        HttpResponse response = client.execute(request);
        return responseFactory.create(response);
    } catch (IOException e) {
        throw new RuntimeException("Can't perform request.", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:06:46.297

很难在没有看到您的代码的情况下说出问题所在 - 但您可以使用该代码：

[https://github.com/ligi/LigiAndroidCommons/blob/master/src/org/ligi/android/common/net/NetHelper.java](https://github.com/ligi/LigiAndroidCommons/blob/master/src/org/ligi/android/common/net/NetHelper.java)

# zend-framework - Doctrine 全外连接

> ID：10062639
> 
> 赞同：2
> 
> 时间：2012-04-08T12:01:57.130
> 
> 标签：zend-framework, doctrine, doctrine-query

我想在 Doctrine ORM(PHP) 中做一个完整的外部连接

我目前的查询是：

```
$query = Doctrine_Query::create()
            ->from('Model_Contract_Payment p')
            ->innerJoin('p.Contract c')
            ->where(" c.modified_date IS NOT NULL AND (c.modified_date < '" . date(DATABASE_DATE_FORMAT, $lastShowableDate) . "' OR c.archive_status = 1 OR p.archive_status = 1)".$queryStr )
            ->orderBy($sortColumn . ' ' . $sortDirection); 
```

如果我这样做，我只会得到具有contract_id 的合同，并忽略payment_id 为NULL 的数据。

我更愿意使用 payment_id NULL 获取所有数据

所以，我想用`FULL OUTER JOIN`. 关于如何去做的任何想法？

我的 schema.yml 文件：

```
Contract:
  connection: doctrine
  tableName: Contract
  columns:
    contract_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    hash:
      type: string(32)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    sales_force_opportunity_id:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    sales_force_opp_owner:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    sales_force_opp_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    sales_force_account_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contact_first_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contact_last_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contract_companyname:
      type: string(80)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contact_email_address:
      type: string(256)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contact_alternate_email_address:
      type: string(256)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contact_phone_number:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contract_status_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contract_agreed_ip_address:
      type: string(72)
      fixed: true
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    agreed_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    agreement_start_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    agreement_end_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    seat_details:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    special_instructions:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    agreement_type_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    agreement_terms:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    additional_terms:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    additional_notes:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_terms:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    total_value:
      type: decimal(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_method_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    bank_name:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    bank_account:
      type: string(30)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    bank_routing:
      type: string(30)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_short:
      type: string(5)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_encrypt:
      type: string(255)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_exp:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_type:
      type: string(30)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_first_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_last_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_address1:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_address2:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_city:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_state:
      type: string(5)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_country:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_postal_code:
      type: string(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_phone:
      type: string(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_first_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_last_name:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_address1:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_address2:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_city:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_state:
      type: string(5)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_country:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_postal_code:
      type: string(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    shipping_phone:
      type: string(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    rejection_notes:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    rvp_status_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    rvp_comment:
      type: string(2147483647)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    rvp_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    created_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    created_admin_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    modified_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    isenabled:
      type: boolean(1)
      fixed: false
      unsigned: false
      notnull: true
      default: 1
      primary: false
      autoincrement: false
    archive_status:
      type: integer(1)
      fixed: false
      unsigned: false
      notnull: true
      default: 0
      primary: false
      autoincrement: false
  relations:
    Contract_Status:
      local: contract_status_id
      foreign: contract_status_id
      type: one
    Agreement_Type:
      local: agreement_type_id
      foreign: agreement_type_id
      type: one
    Payment_Method:
      local: payment_method_id
      foreign: payment_method_id
      type: one
    AdminUser:
      local: created_admin_id
      foreign: admin_id
      type: one
    Contract_Payment:
      local: contract_id
      foreign: contract_id
      type: many
      cascade: [delete]
    Contract_Product:
      local: contract_id
      foreign: contract_id
      type: many
      cascade: [delete]
    Contract_Venue:
      local: contract_id
      foreign: contract_id
      type: many
      cascade: [delete]
Contract_Payment:
  connection: doctrine
  tableName: Contract_Payment
  columns:
    payment_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    created_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    contract_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_status_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    amount:
      type: decimal(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_amount:
      type: decimal(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_amount1:
      type: decimal(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    check_amount:
      type: decimal(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    due_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    modified_date:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    modified_admin_id:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    notes:
      type: string(200)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_method_id:
      type: integer(1)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_status_id_credit_card1:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    payment_status_id_credit_card2:
      type: integer(4)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_holdername:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_short:
      type: string(5)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_encrypt:
      type: string(255)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_expiration:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_type:
      type: string(30)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    second_credit_card_enable:
      type: integer(1)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_holdername1:
      type: string(50)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_short1:
      type: string(5)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_num_encrypt1:
      type: string(255)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_expiration1:
      type: timestamp(16)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    credit_card_type1:
      type: string(30)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    auth_reference:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    auth_reference1:
      type: string(100)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    billing_postal_code:
      type: string(20)
      fixed: false
      unsigned: false
      notnull: false
      primary: false
      autoincrement: false
    archive_status:
      type: integer(1)
      fixed: false
      unsigned: false
      notnull: true
      default: 0
      primary: false
      autoincrement: false
  relations:
    Contract:
      local: contract_id
      foreign: contract_id
      type: one
    Payment_Status:
      local: payment_status_id
      foreign: payment_status_id
      type: one
    AdminUser:
      local: modified_admin_id
      foreign: admin_id
      type: one
    Contract_Payment_History:
      local: payment_id
      foreign: payment_id
      type: many
      cascade: [delete] 
```

我正在使用 SQL 服务器。任何想法将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:14:30.693

您的 SQL 缺少一些关键信息，如果您发布所需的 SQL 会更容易。但是从它的声音你想使用`leftJoin`而不是`innerJoin`（LEFT JOIN 与 LEFT OUTER JOIN 相同）。

有关更多信息，请参阅[编码恐怖：SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:49:03.740

我知道在 Doctrine ORM 中不可能完全外连接。因此，我更改了我的应用程序代码以使用 LEFT JOIN。

# xml - XML 到 TeX 或如何从类似 XHTML 的源代码中获得漂亮的 PDF

> ID：10062646
> 
> 赞同：9
> 
> 时间：2012-04-08T12:02:58.047
> 
> 标签：xml, xsl-fo, tex, docbook

从表面上看，一个简单的问题：我如何从我的 XML 文档中获得漂亮的 PDF？实际上，我的输入是 XHTML 的一个子集，添加了一些自定义属性（以保存有关引用来源等的一些信息）。我一直在探索一些路线，如果有人以前尝试过这些路线，我想得到一些反馈。

注意：我考虑过 XSL-FO 来生成 PDF，但听说开源工具的排版质量仍然落后于 TeX 很多。猜猜最先进的是[Apache FOP](http://xmlgraphics.apache.org/fop/)。但我真的对好看的 PDF 很感兴趣（否则我可以使用浏览器的打印对话框）。对此有何想法和更新？

所以我一直在考虑使用 XSLT 将我自定义的 XML/XHTML 方言转换为 DocBook 并从那里开始（[通过 XSLT 的 DocBook](http://sourceforge.net/projects/docbook/)到正确的 HTML 似乎工作得很好，所以我也可以使用它）。但是我如何从 DocBook 转到 TeX？我遇到了许多解决方案。

*   [dblatex](http://dblatex.sourceforge.net/)一组输出 LaTeX 的 XSLT 样式表。
*   [db2latex 最初](http://db2latex.sourceforge.net/)是 dblatex 的克隆，但现在提供了与 LaTex 包的更紧密集成，并提供了一个输出 PDF 的脚本，这非常好。
*   [PassiveTex](http://projects.oucs.ox.ac.uk/passivetex/)代替 XSLT，它使用一个用 TeX 编写的 XML 解析器。
*   [TeXML](http://getfo.org/texml)本质上是 LaTeX 语言的 XML 序列化，可用作中间格式，以及从 XML 格式转换为 LaTeX/ConTeXt 的随附 Python 工具。他们[声称](http://getfo.org/texml/thesis.html)这避免了现有解决方案的特殊符号问题，丢失了一些大括号或空格，并且仅支持 latin-1 编码。（现在还是这样吗？）

由于我的输入 XML 可能包含很多以 Unicode 表示的特殊字符，所以最后一点对我来说尤其重要。我也一直在考虑使用 XeTeX 而不是 pdfTeX 来解决这个问题。（虽然我可能会失去一些印刷质量，但可能仍然比当前的开源 XSL-FO 处理器更好？）所以 db2latex 和 TeXML 似乎是最受欢迎的。那么有人可以评论它们的稳健性吗？

或者，我可能会更幸运地直接使用 ConTeXt，因为似乎对[XML 中的 ConTeXt 社区很感兴趣](http://wiki.contextgarden.net/XML)。特别是，我可能会更深入地了解[“My Way: Getting Web Content and pdf-Output from One Source”](http://dl.contextgarden.net/myway/tas/xhtml.pdf)和[“Dealing with XML in ConTeXt MkIV”](http://pragma-ade.com/general/manuals/xml-mkiv.pdf)。两份文档都描述了一种结合使用 ConTeXt 和 LuaTeX 的方法。（[DocBook In ConTeXt](http://www.leverkruid.eu/context/)似乎做的差不多，但最新版本是 2003 年的。）第二个文档指出：

> 你可能想知道为什么我们在 TEX 中进行这些操作而不使用 xslt。集成方法的优势在于它简化了使用。不仅要处理文档，还要考虑在同一运行中使用 xml 来管理资源。xslt 方法同样冗长（毕竟，您仍然需要生成 TEX 代码）并且可能不太可读。在 MkIV 的情况下，集成方法也更快，让我们可以选择在运行时使用 Lua 操作内容。

你怎么看待这件事？请记住，我对 XSLT 和 TeX 都有一些经验，但从未深入了解其中任何一个。从未尝试过许多不同的 LaTeX 包或替代品，例如 ConTeXt（或 XeTeX/LuaTeX 而不是 pdfTeX），但我愿意学习一些新东西，最终得到我漂亮的 PDF；）

此外，我偶然发现了[Pandoc](https://pandoc.org/MANUAL.html#creating-a-pdf)，但找不到任何关于它与其他提到的方法相比的信息。[最后，链接到一些关于如何将 TeXML 与 ConTeXt 一起使用的](http://getfo.org/context_xml/contents.html)相当广泛的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:31:26.833

我过去做过类似的事情（也就是说，维护 XML 文档的主版本，并希望从中生成 LaTeX 输出）。

我过去使用过 PassiveTeX，但我发现创建样式表是一项艰苦的工作——通常同时编写两种语言的结果。我让它工作，结果看起来非常好，但它可能比它值得付出更多的努力。也就是说，如果您需要添加的样式数量*很少*，那么这可能是一条不错的路线，因为它是一个步骤。

最成功的途径（阅读、灵活和有吸引力）是使用 XSLT 将文档转换为结构化的 LaTeX，它与结果文档的预期结构相匹配，但除了最小的格式设置之外，它并没有尝试做更多的事情。根据您的文档，这可能是看起来很正常的 LaTeX，或者它可能具有定制的结构。然后编写或改编一个 LaTeX 样式表或类文件，将输出格式化为有吸引力的东西。这样，您就可以充分利用 XSLT 的优势（而不是超越它们，这很快就会变得非常令人沮丧），充分利用 LaTeX*的*优势，而不是让自己感到困惑。

也就是说，这或多或少与您的前两个替代方案的方法相匹配，无论您是使用它们，还是编写/自定义具有定制输出的 LaTeX 样式表，都取决于您对 LaTeX 样式表的感觉如何，以及如何您需要做的非常复杂或专门的格式化。

既然您说您需要处理输入中的 Unicode 字符，那么是的，XeLaTeX 将是管道中 LaTeX 部分的不错选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:17:36.400

您可能想[在 TeX.sx 上检查带有 XML 标记的问题](https://tex.stackexchange.com/questions/tagged/xml)，尤其是[这个](https://tex.stackexchange.com/questions/11260/is-there-some-typesetting-system-that-uses-xml-notation)问题。我建议你使用 ConTeXt；当前版本在使用 Unicode 方面没有问题，并且可以完美地处理 OpenType——而且它在 Lua 中是可编程的。LaTeX 最常用的替代方法是[XMLTeX](http://www.ctan.org/pkg/xmltex)，但这需要大量的 TeX foo。

如果您的文档可以由 pandoc 处理，请使用它：您将拥有多个输出选项，比任何基于 TeX 的系统都多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T20:07:31.577

最后，我决定使用[Pandoc](https://pandoc.org/MANUAL.html#creating-a-pdf)，它似乎是非常优美和可靠的代码库。一个潜在的缺点是您必须将自己限制在 Pandoc 的内部表示中可用的标记功能的数量，这些表示基本上一对一地映射到其[扩展的 markdown](http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown)。

因为我不认为从类似 XHTML 的源代码生成 markdown 是一个好主意，所以我成功地启动了一个[读取 DocBook 的 pandoc 组件，](https://github.com/jgm/pandoc/blob/master/src/Text/Pandoc/Readers/DocBook.hs)该组件目前位于 Pandoc 开发 repo 的 master 分支中。所以现在我有一个简单的 XSLT 样式表，可以从我的 XHTML 方言转换为 DocBook（也是 XML），然后我使用 Pandoc 导出到其他格式的提升，包括通过 ConTeXt 的 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-09T18:47:41.723

如果您想要更多关于如何自定义 TeX 输出的选项，我建议您使用：

[xml2tex](https://github.com/transpect/xml2tex)

它基于声明式配置，您可以在其中指定从 XML 到 TeX 的映射。MathML 和 XML 表（HTML 和 CALS）会自动转换为 TeX。因此，它是开源的，并为 DocBook 和 DITA 提供了现成的配置。

# jquery - 将当前选项卡重定向到新 URL

> ID：10062647
> 
> 赞同：1
> 
> 时间：2012-04-08T12:03:09.127
> 
> 标签：jquery, google-chrome-extension

我做了一个简单的扩展，我希望我当前的标签被重新定位到一个新的位置，但是这段代码对我不起作用：

```
function redirect() {
    console.log("HELLO"); 
    chrome.tabs.getSelected(null, function(tab) {
        var currentURL = tab.url;
        if(currentURL == "http://example.site/"){
            chrome.tabs.create("http://newlocation.site/",tab);
            alert("redirected");
        }
    });
}

chrome.browserAction.onClicked.addListener(redirect); 
```

无论如何，我无法通过谷歌搜索有关选定选项卡的属性的信息。有没有`tab.url`类似“命令”的？我的意思是，tab.reload() .. 等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:58:14.280

*修复当前代码后，当当前选项卡与给定 URL 匹配时，将创建一个新选项卡。*

1.  [`chrome.tabs.create(object createInfo, function callback)`](http://code.google.com/chrome/extensions/tabs.html#method-create)是正确的签名。
2.  注意：`chrome.tabs.getSelected` [不赞成](http://code.google.com/chrome/extensions/whats_new.html#16)使用`chrome.tabs.query`.

    ```
    chrome.tabs.create({url: "http://newlocation.site/"}); 
    ```

此代码按预期工作（后台脚本）：

```
function redirect() {
    console.log("Querying...");
    chrome.tabs.query({active: true}, function(tabArray) {
        var currentURL = tabArray[0].url;
        // For debugging purposes:
        console.log(currentURL);
        if (currentURL == "http://example.site/") {
            // The next line is the important change
            chrome.tabs.create({url: "http://newlocation.site/"});
            alert("redirected");
        }
    });
}
chrome.browserAction.onClicked.addListener(redirect); 
```

如果您不想创建新选项卡，但要更改当前选项卡的 URL，请使用`update`代替`create`：

```
chrome.tabs.update(tabArray[0].id, {url: "http://newlocation.site/"}); 
```

## 文档

*   [`chrome.tabs.create`](http://code.google.com/chrome/extensions/tabs.html#method-create)
*   [`chrome.tabs.query`](http://code.google.com/chrome/extensions/tabs.html#method-query)
*   [`chrome.tabs.update`](http://code.google.com/chrome/extensions/tabs.html#method-update)
*   [对象](http://code.google.com/chrome/extensions/tabs.html#type-Tab)_[`Tab`](http://code.google.com/chrome/extensions/tabs.html#type-Tab)

# android - 在webview中长按文本输入框时出现粘贴选项？

> ID：10062651
> 
> 赞同：0
> 
> 时间：2012-04-08T12:03:51.807
> 
> 标签：android, android-webview

我正在制作一个使用 webview 访问网站的 android 应用程序。我正在添加一项功能，以便有人可以按菜单中的一个选项，并将一些文本添加到 android 剪贴板。

不幸的是，没有办法粘贴，因为长按通常出现的文本输入框的对话框默认情况下不存在。

我将如何实现这一点？怎么做？

谢谢你的时间，利亚姆利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:19:50.510

如果您的粘贴文本框是 Android 文本框，您可以添加这样的代码；

```
textbox.setOnLongClickListener(new onLongClickListener(){
   //do whatever you want like displaying popup or paste the wanted text
}); 
```

如果没有，你不能这样做，因为你不能随心所欲地使用 Android 功能，而是 HTML 功能。

我希望我能理解并回答你的问题。

编辑：对于 webview，请查看 WebChromeClient。它可以捕获 JS 警报。因此，您将能够使用特定库在 JS 中引发事件，然后使用 Android 捕获它。使用此函数，onJsAlert(WebView view, String url, String message, JsResult result) 会在触摸时引发警报，然后在 Android 中捕获它。

# php - Yii CFormModel 规则是否处理数组

> ID：10062654
> 
> 赞同：0
> 
> 时间：2012-04-08T12:04:59.370
> 
> 标签：php, yii

我们可以用数组进行验证吗？

```
$x="123@ex.com"; 
```

它的验证规则是

```
array("x","email"); 
```

我们怎样才能做到以下几点：

```
$x=array("a1@ss.com","a2@ss.com","a3@ss.com");
//--------what the rule(s) should look like 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:05:48.300

我认为最好进行自己的回调，您将在其中检查数组中的每封电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:00:25.060

您实际上可以使用此验证器而不是自定义函数： [http ://www.yiiframework.com/doc/api/CRangeValidator](http://www.yiiframework.com/doc/api/CRangeValidator)

# c++ - 如何为二维数组分配内存？

> ID：10062655
> 
> 赞同：4
> 
> 时间：2012-04-08T12:05:12.553
> 
> 标签：c++, arrays, new-operator, dynamic-arrays

如何使用“新”运算符声明二维数组？我的书是这样说的：

```
int (*p)[4];
p=new[3][4]; 
```

但这对我来说没有意义。p 是一个指向 4 个整数数组的指针，那么如何让它指向一个二维数组呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T12:14:07.417

看来您需要指向指针的指针。编辑：好吧，更准确地说，以下示例创建*了一个指向数组的指针数组*。

首先做：

```
int **p = new int*[NUM]; 
```

在这里，您已经创建了指针数组。现在您需要为它们中的每一个创建另一个数组。你可以这样做：

```
for(int i = 0; i < NUM; i++)
{
    p[i] = new int[ANOTHER_NUM];
} 
```

对于解除分配，您执行类似的操作，但方式相反：

```
for(int i = 0; i < NUM; i++)
{
    delete[] p[i];
} 
```

最后：

```
delete[] p; 
```

现在您可以使用它了。这样您就可以创建 N 维数组，只需添加更多“*”。如果您有任何其他特殊问题，请在评论中提问。

但是，一般来说，为了获得更多信息，我建议您首先尝试谷歌，询问诸如“C++ 中的二维数组”或“二维数组 C++ 的动态分配”之类的问题，即[这个查询](http://www.google.cz/search?q=allocating%202d%20array%20c%2b%2b)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T12:17:09.147

其他答案包括为您的行提供一个指针`int`数组，每行都有一个指向数组的指针。另一种选择是简单地分配一个足够大的一维数组来容纳所有二维数组的元素：

```
int* p = new int [3 * 4]; 
```

然后不使用`p[r][c]`语法，而是使用`p[r * kNumCols + c]`. 在这个例子中，`kNumCols = 4`。这通常是在 LAPACK 风格的数字运算中所做的，因为它使内存中的内容保持连续，并且您不需要分配这么多内存块。

注意：这通常*不会*比实践中的替代方案慢，因为行偏移计算通过公共子表达式优化移出循环。此外，许多优化器都知道要寻找这种模式。此外，通过将数据保存在单个内存块中，数据更有可能保留在缓存中。

在 C++ 中，您可以`p[][]`使用帮助模板类来实现表示法：

```
template<class T>
class Array2DPtrRow
{public:
    Row(T* row_): row(row_) {}
    operator T*() { return row; }
    T& operator [](size_t c) { return row[c]; }
private:
    T* row;
};

template<class T, size_t NC>
class Array2DPtr
{public:
    Array2DPtr(T* buf_): buf(buf_) {}
    operator T*() { return buf; }
    Array2DPtrRow<T> operator [](size_t r)
        { return Array2DPtrRow<T>(buf + NC * r); }
private:
    T* buf;
}; 
```

这将优化为与上面相同的代码，但允许您使用`[][]`符号并*要求您在编译时知道您的数组维度*。使用示例：

```
Array2DPtr<int, 4> p(new int[3 * 4]);
p[1][2]; 
```

这可以转换为使 NC 成为类成员而不是模板参数，但最终对象不再只是一个指针：

```
template<class T>
class Array2DPtr
{public:
    Array2DPtr(T* buf_, size_t nc_): buf(buf_), nc(nc_) {}
    operator T*() { return buf; }
    Array2DPtrRow<T> operator [](size_t r)
        { return Array2DPtrRow<T>(buf + nc * r); }
private:
    T* buf;
    size_t nc;
};

Array2DPtr<int> p(new int[3 * 4], 4);
p[1][2]; 
```

请注意，这些类都不需要复制构造函数、赋值运算符或析构函数，因为它们不像常规指针那样拥有指向内存的所有权。所以要释放内存，你还需要做：

```
delete[] p; 
```

或者，如果您的编译器无法弄清楚：

```
delete[] (int*)p; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T21:37:08.787

要真正回答这个问题：

请记住，数组等效于指向数组第一个元素的指针，因此例如您可以编写：

```
char str[14] = "Hello, world!";
char *ptr = str; 
```

这也适用于二维数组。

```
int (*p)[4]; 
```

声明一个指向二维数组第一个元素的指针。`p`然后可以指向任何二维数组，只要它的第二维是 4，所以例如你可以写

```
int arr[3][4];
int (*p)[4] = arr; 
```

当然你也可以动态分配内存：

```
int (*p)[4] = new int[3][4]; 
```

同样，第二个维度必须为 4，但您可以更改第一个维度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T12:10:06.837

在 C 中声明多维数组有几种方法。

您可以`p`显式声明为二维数组：

```
int p[3][4];  // All of p resides on the stack. 
```

（请注意，`new`这里不需要基本类型，除非您使用 C++ 并希望在堆上分配它们。）

或者您可以将其声明为指针向量（一维数组），然后为每个向量分配内存：

```
int *p[3];                         // The vector addresses reside on the stack.
for (int i=0; i<3; i++) {
  p[i] = malloc(4 * sizeof(int));  // Each element resides on the heap.
}

// You can now access p as p[j][k] as if it were a 2D array.

for (int i=0; i<3; i++) {
  free p[i];
} 
```

或者，如果您不知道任一维度，则可以动态分配整个二维数组：

```
#define WIDTH 3
#define HEIGHT 4
int **p;                              // Base address resides on the stack.

p = malloc(WIDTH * sizeof(int *));    // Pointers to vectors reside on the heap.
for (int i=0; i<WIDTH; i++) {
  p[i] = malloc(HEIGHT * sizeof(int)); // Data values reside on the heap.
}

// You can now access p as p[j][k] as if it were a 2D array.

// Release the memory that was allocated to each vector.
for (int i=0; i<WIDTH; i++) {
  free(p[i]);
}
// Release the memory that was allocated to the initial pointer.
free(p); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T12:09:38.277

你需要这样的东西

```
int **array_ptr; //two * are needed because it is a pointer to a pointer

array_ptr=new int*[firstnumber]; //creates a new array of pointers to int objects

for(int i=0; i<firstnumber; ++i)
array_ptr[i]=new int[secondnumber]; 
```

# zend-framework - Zend Framework - 定义导航菜单的正确方法

> ID：10062656
> 
> 赞同：4
> 
> 时间：2012-04-08T12:05:19.900
> 
> 标签：zend-framework, zend-navigation

我正在使用一个模板，其中有两个不同的导航菜单。

> 1.  **主导航菜单**。（ 固定的 ）
>     
>     
> 2.  **动作导航菜单**，包含返回、保存、删除等元素。此导航元素根据被调用的控制器而变化。虽然它对于某些控制器可能存在，而对于某些控制器则不存在

我正在使用布局，并且我已将所有模板代码放在我的`default.phtml`布局文件中。我面临的问题是**动作导航菜单**。由于此菜单的 html 代码位于`default.phtml`我需要根据被调用的控制器更改它的内容。

我不确定这是否是正确的做法。但我`default.phtml`正在检查控制器名称并相应地显示菜单。这是我正在使用的代码。

```
<?php if(Zend_Controller_Front::getInstance()->getRequest()->getControllerName() == 'item'): ?>
    <!-- Action Navigation Menu -->
    <div class="statsRow">
        <div class="wrapper">
            <a href="#"><img src="/images/icons/dark/add.png" alt="" class="icon"><span>New item</span></a>
            <a href="#"><img src="/images/icons/dark/cd.png" alt="" class="icon"><span>Publish / Unpublish item</span></a>
            <a href="#"><img src="/images/icons/dark/trash.png" alt="" class="icon"><span>Delete item</span></a>
        </div>
    </div>
    <div class="line"></div>
<?php endif; ?> 
```

这样做可以吗？还是我有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:40:15.400

看起来您的*操作导航菜单*实际上就像一个子菜单，其中每个操作都是子页面的一部分。做这种事情的一个好方法是拥有两个 Zend_Navigation 实例，例如，您可以将它们存储在注册表中。然后，在您的控制器中，您可以在方法中调用**Action Helper**`preDispatch()` ，如下所示：

```
// in each controller where you want your "action navigation menu"
public function preDispatch()
{
    $this->_helper->navigation()->renderActionNavigation();
} 
```

当然，只有需要这个 Action 导航菜单的控制器才有这个方法。这个 Action Helper 基本上会获取当前视图对象，创建一个占位符并渲染一个部分，如下所示：

```
// in your library/My/Controller/Action/Helper
class My_Controller_Action_Helper_Navigation extends Zend_Controller_Action_Helper_Abstract
{
    private $_view = null;

    public function direct()
    {
        $this->_view = $view = Zend_Layout::getMvcInstance()->getView();
        $this->_view->placeholder('action-navigation');
        return $this;
    }

    public function renderActionNavigation()
    {
        $this->_view->render('partials/_action-navigation.phtml');
    }
} 
```

如果您不使用库，只需将此代码放入*/views/helpers/*并重命名类`Zend_View_Helper_Navigation`。

然后部分将负责使用占位符呈现您的子菜单：

```
// in /view/scripts/partials/_action-navigation.phtml
<?php $this->placeholder('action-navigation')->captureStart() ?>
<?php $options = array('onlyActiveBranch' => true); ?>
<?= $this->navigation()->menu()->renderMenu(Zend_Registry::get('nav.action-navigation'), $options);
// here I assume that you've stored your Navigation container in the registry ?>
<?php $this->placeholder('action-navigation')->captureEnd() ?> 
```

[此外，使用导航视图辅助方法`renderMenu()`](http://framework.zend.com/manual/fr/zend.view.helpers.html#zend.view.helpers.initial.navigation.menu)渲染菜单并`onlyActiveBranch`设置选项`true`将允许您**仅渲染活动分支**，其中每个分支都**对应于您的控制器**。

最后，在您的布局中，您将拥有以下内容：

```
 // in your layout file (usually named layout.phtml)
<?= $this->placeholder('action-navigation'); ?> 
```

如果您选择在注册表中注册 Zend_Navigation 容器，这可以在引导程序中以这种方式完成：

```
// in your bootstrap.php
protected function _initNavigation()
{
    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');
    $container = new Zend_Navigation($config);
    Zend_Registry::set('nav.action-navigation', $container);
} 
```

有关容器的更多信息，[请参阅此页面](http://framework.zend.com/manual/en/zend.navigation.containers.html#zend.navigation.containers.creating)。此外，如果您不熟悉占位符，[这里有一个](http://framework.zend.com/manual/en/learning.view.placeholders.basics.html)关于如何使用它们的很好的实际示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:08:22.760

我想没关系。我会在控制器中执行此操作并使用[Zend_Navigation](http://framework.zend.com/manual/en/zend.navigation.html)包含导航，然后您可以使用 ACL 等。

如果控制器刚刚设置：

```
$this->view->navigation()->setContainer($navigation); 
```

Zend_Navigation`$navigation`的实例在哪里。然后在您的布局中：

```
<?=$this->navigation()->menu()?> 
```

# datatable - ICE Faces - 从 ice:outputResource 向 bean 发送文件名参数

> ID：10062657
> 
> 赞同：1
> 
> 时间：2012-04-08T12:05:33.847
> 
> 标签：datatable, icefaces, param

我有一个带有文件名的 acefaces 数据表，一个在行上，我正在尝试使用 ice:outputResource 添加一个下载按钮，但是我无法将文件名发送到 outputResourceBean。

我的数据表如下所示：

```
<h:form id="exportedFiles">
       <ace:dataTable value="#{exportBean.allFiles}" var="upload" 

                    <ace:column>
                        <f:facet name="header" >
                            <h:outputText value="Název souboru"/>
                        </f:facet>    
                        <h:outputText value="#{upload.name}"/>
                    </ace:column>

                    <ace:column>
                        <f:facet name="header" >
                            <h:outputText value="Dowload file"/>
                        </f:facet>      
                        <ice:outputResource id="downLink" 
                                            resource="#{outputResource.pdfResource}"
                                            attachment="true"
                                            label="Download PDF"
                                            type="button">
                        </ice:outputResource>
                    </ace:column>
                </ace:dataTable>
            </h:form> 
```

我的豆子看起来像这样：

```
public static final String PDF_NAME = "Download_PDF.pdf";
public static final Resource PDF_RESOURCE = new MyResource(PDF_NAME);
public String getPdfName() { return PDF_NAME; }
public Resource getPdfResource() { return PDF_RESOURCE; } 
```

我可以使用 #{upload.name} 获取文件名，但我不知道如何在单击“下载”按钮时将其发送到 bean...

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:04:12.563

您可以将包含文件的列表包装到`ListDataModel`. 这允许您访问当前选定行索引的数据。

```
@ManagedBean
@ViewScoped
public class ExportBean {

    private ListDataModel<MyResource> allFiles;

    public ListDataModel<MyResource> getAllFiles() {
        if (allFiles == null) {
            List<MyResource> files = new ArrayList<MyResource>();
            files.add(new MyResource("doc1.pdf"));
            files.add(new MyResource("doc2.pdf"));
            files.add(new MyResource("doc3.pdf"));
            files.add(new MyResource("doc4.pdf"));
            files.add(new MyResource("doc5.pdf"));
            allFiles = new ListDataModel<MyResource>(files);
        }
        return allFiles;
    }

    public String getPdfName() {
        // add the getResourceName method to MyResource
        return allFiles.getRowData().getResourceName();
    }

    public Resource getPdfResource() {
        return allFiles.getRowData();
    }
} 
```

xhtml 页面看起来像这样：

```
<h:form id="exportedFiles">
    <ace:dataTable value="#{exportBean.allFiles}">
        <ace:column>
            <h:outputText value="#{exportBean.pdfName}" />
        </ace:column>
        <ace:column>
            <ice:outputResource resource="#{exportBean.pdfResource}" attachment="true" label="Download PDF" type="button" />
        </ace:column>
    </ace:dataTable>
</h:form> 
```

# iphone - 将 NSNumber 转换为 NSInteger

> ID：10062660
> 
> 赞同：17
> 
> 时间：2012-04-08T12:05:43.363
> 
> 标签：iphone, objective-c, cocoa-touch

我试图确定数组中的值是什么，然后在数组上实现更改，但我一开始就无法访问数组......

```
NSNumber *row = [NSNumber numberWithInt:recognizer.view.tag];
    NSInteger *newRow = [row integerValue];
    NSInteger *index = [selectedItems indexOfObject:row];//0=Not selected 1=selected;
    NSLog(@"%@ & ",row);
    if (index == 0) {
        [selectedItems removeObjectAtIndex:newRow];
        [selectedItems insertObject:@"1" atIndex: newRow];
        [(UITableViewCell *)(recognizer.view) setAccessoryType:UITableViewCellAccessoryCheckmark];
    } else {
        [selectedItems removeObjectAtIndex: newRow];
        [selectedItems insertObject:@"0" atIndex: newRow];;
        [(UITableViewCell *)(recognizer.view) setAccessoryType:UITableViewCellAccessoryNone];
    } 
```

如您所见，我正在尝试从行变量（一个 NSNumber）中获取信息，并使用索引变量查找数组的值。我也在我的 onload() 中声明了这一点...

```
selectedItems = [NSArray arrayWithObjects: 0, 0, 0, nil]; 
```

问题是我收到所有这些警告说......

```
Incompatible integer to pointer conversion initializing 'NSInteger *' (aka 'int *') with an expression of type 'NSUInteger' (aka 'unsigned int'); 
```

每当我使用变量行或 newRow 时。如您所见， newRow 只是作为整数的行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-08T12:12:30.237

NSInteger 只是一个`int`类型定义，所以它不是对象类型，它是一个标量，你不必将它声明为指针类型。利用

```
NSInteger newRow = [row integerValue]; 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:10:59.280

NSInteger 是原始类型，而不是对象类型。数组之类的集合只能包含对象，例如 NSNumber。

您可以使用 NSNumber 等方法从 NSNumber 获取原始值`-integerValue`。请注意，您通常不想创建一个 NSInteger 指针 (NSInteger*)，您只需要一个 NSInteger。

`recognizer.view.tag`从中获取 NSNumber 并调用该 NSNumber也是没有意义的`-integerValue`。直接用作`recognizer.view.tag`整数值即可。（您仍然可以将其分配给局部变量以便快速访问。）

# html - 如何使 youtube 嵌入代码 HTML 对 w3c 验证器有效？

> ID：10062661
> 
> 赞同：3
> 
> 时间：2012-04-08T12:05:56.357
> 
> 标签：html, youtube, w3c, w3c-validation

这是我的代码。

```
<div>
    <object>
        <param name="movie" value="http://www.youtube.com/v/Cbspv1ZKR8o?version=3&amp;hl=en_US" />
        <param name="allowFullScreen" value="true" />
        <param value="transparent" name="wmode" />
        <param name="allowscriptaccess" value="always" />
        <embed src="http://www.youtube.com/v/Cbspv1ZKR8o?version=3&amp;hl=en_US" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" class="cssVideo"></embed>
    </object>
</div> 
```

但上述代码未能通过[W3C Validator](http://validator.w3.org/)。我搜索并尝试遵循[这些](http://www.worthapost.com/articles/how-make-youtube-embed-code-xhtml-valid) [指南](http://xahlee.org/js/html_embed_video.html)，但我无法解决问题。

谁能帮我这个？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:25:51.333

如果您重新阅读您发布的文章，您会发现它们的正确版本不使用`embed`对象（*在 xhtml-1.0 中已弃用*）。

利用

```
<object type="application/x-shockwave-flash" data="http://www.youtube.com/v/Cbspv1ZKR8o?version=3&amp;hl=en_US" width="480" height="360">
    <param name="movie" value="http://www.youtube.com/v/Cbspv1ZKR8o?version=3&amp;hl=en_US" />
    <param name="allowFullScreen" value="true" />
    <param value="transparent" name="wmode" />
    <param name="allowscriptaccess" value="always" />
</object> 
```

[*工作演示*](http://jsfiddle.net/gaby/JkgRr/) 和 [*验证*](http://validator.w3.org/check?uri=http%3A%2F%2Ffiddle.jshell.net%2Fgaby%2FJkgRr%2Fshow%2Flight%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:42:31.827

实际上，您不需要总是使用 youtube 提供的嵌入代码。

以下是更改嵌入式版本`youtube`并对其进行验证的典型方法。

```
<object type="application/x-shockwave-flash" width="425" height="350" data="http://www.youtube.com/v/n">
     <param name="movie" value="http://www.youtube.com/v/n" />
     <a href="http://get.adobe.com/flashplayer/" target="blank"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get flash player to play to this file" width="88" height="31" /></a><br />
</object> 
```

`n`视频的`youtube`id在哪里。

查看演示[验证结果](http://validator.w3.org/check?uri=http%3A%2F%2Fjsfiddle.net%2FgqWKd%2Fshow%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

干杯帕布:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-30T14:43:54.377

这个问题我已经通过下面的代码解决了，它将起作用。

```
 <!----------Vimo vedio---------->
                    <object type="application/x-shockwave-flash" data="https://player.vimeo.com/video/355186746" width="480" height="360">
                        <param name="movie" value="https://player.vimeo.com/video/355186746" />
                        <param name="allowFullScreen" value="true" />
                        <param value="transparent" name="wmode" />
                        <param name="allowscriptaccess" value="always" />
                        <embed src="https://player.vimeo.com/video/355186746" width="640" height="361" frameborder="0" allow="autoplay; fullscreen; picture-in-picture">
                    </object> 
```

# windows - Windows 7 上的 DataSnapXE2 正常断开连接

> ID：10062662
> 
> 赞同：1
> 
> 时间：2012-04-08T12:06:36.453
> 
> 标签：windows, delphi, delphi-xe2, datasnap, c++builder-xe2

我在 windows7 上安装 datasnapxe2 tcp 服务器，在两个客户端连接到服务器后，其中一个连接在几秒钟后优雅断开，LifeCycle=Session，我在一些 windows7 虚拟机上测试它工作正常，在另一台有 windows7 相同问题的计算机上，

请注意，相同的客户端和相同的服务器，相同的运行时库安装和测试

是否需要配置 win7 和 TCP/IP 来保持连接？如何 ？

是否有一些win7服务正在运行并出现问题？

注意测试时运行的第 3 方应用程序：Teamviewer、Tightvnc、MS security essentials、skype、MS Messenger，...

我删除了这些（阻止了它们），问题仍然存在

我相信有些东西可以通过 tcp/ip 的配置优雅地关闭一个或多个连接，但是我搜索并没有发现任何东西，

你会回复吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:51:43.057

尝试将您的 RadStudio XE2 升级到更新 2 或更高版本，因为它是更新 1 上的一个错误。我也遇到了这个问题，然后在更新 2 上的错误修复中发现了这个问题...

尝试在 Ide 上运行您的服务器应用程序，然后运行并连接到已编译的可执行 datasnap 客户端，然后尝试执行服务器方法并等待，然后将显示 Invalid pointer /Access Violation ......这就是客户端提示“正常断开连接”的原因……

链接：[http](http://edn.embarcadero.com/article/41750) ://edn.embarcadero.com/article/41750 ...

文章：QC #：报告日期：区域：99616 10/4/2011 Database\DataSnap\Server 描述：步骤：[QC 简短说明] [FATAL] Datasnap 服务器异常 XE2 SP1

[QC 说明] 使用 XE2 SP1 构建的 Datasnap 服务器/客户端应用程序：在连接超过 1 个客户端后，服务器确实会引发 EInvalidPointer / 访问冲突异常。QC 条目 99616....

# php - 在实时页面上寻找 PHP 错误的建议

> ID：10062664
> 
> 赞同：0
> 
> 时间：2012-04-08T12:07:06.173
> 
> 标签：php, error-handling, live

**背景**
在实时环境中，您必须不时修复问题。发布代码后，一些错误或故障可能会溜走并在您的页面上生效。
用户通常不会报告错误，因此页面被破坏，直到您自己发现它。

**问题**
PHP 中是否有推荐的方法来检测除了 PHP 日志之外的 PHP 错误时出现的问题？

例如，您是否会建议放置一个代码，如果页面上出现错误，该代码会通过电子邮件发送给您？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:00:55.747

我认为您应该开始最大限度地使用`Exception` [http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)并创建自定义`set_error_handler` [http://php.net/manual/en/function.set-error-handler。 php](http://php.net/manual/en/function.set-error-handler.php)具有此功能，您可以开始对错误和不同格式进行分类以进行通知

例子

`GreenException`保存到 MongoDB 日志

`BlueException`送审

`WhiteException`给我发邮件

`UnknownException`给我发短信

您还应该尝试在开发过程中打开以下设置并且永远不要抑制任何错误

```
 error_reporting(E_ALL);
  ini_set('display_errors','On'); 
```

以验证和验证所有内容的方式开发您的应用程序

示例（文件上传），否则抛出异常

我可以上传吗

文件已更新

它是一个有效的文件

目标文件夹是否存在

是否可写

拷贝文件

文件是否已成功复制

ETC .....

这样可以最大限度地减少生产错误

最后总是......做`unit testing`......

# python - Python将元组转换为整数

> ID：10062673
> 
> 赞同：11
> 
> 时间：2012-04-08T12:09:14.403
> 
> 标签：python, integer, tuples

有没有可以将元组转换为整数的函数？

例子：

```
input = (1, 3, 7)

output = 137 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-08T12:15:42.943

```
>>> reduce(lambda rst, d: rst * 10 + d, (1, 2, 3))
123 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-08T12:10:40.963

```
>>> x = (1,3,7)
>>> int(''.join(map(str,x)))
137 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T12:16:49.460

虽然将其转换为字符串然后转换为 int 作品，但这是一种有点 hackish 的方法。我们拥有制作数字所需的所有信息，即：

*   位数。
*   数字的位置。

由于我们有这些信息，我们可以通过计算每个位置的每个单元的值，然后将其乘以所述位置的数字来计算数字。然后我们将结果加在一起，我们就有了我们的数字。这可以像这样在一行中完成：

```
test = (1, 2, 3)
sum((10**pos)*val for pos, val in enumerate(reversed(test))) 
```

让我们分解一下：

```
>>> list(enumerate(reversed(test)))
[(0, 3), (1, 2), (2, 1)] 
```

那么，如果我们将其相乘：

```
>>> list((10**pos)*val for pos, val in enumerate(reversed(test)))
[3, 20, 100] 
```

所以我们只是求和得到 123。

编辑：关于速度的说明：

```
python -m timeit "int(''.join(map(str,(1,2,3))))"
100000 loops, best of 3: 2.7 usec per loop

python -m timeit 'sum((10**pos)*val for pos, val in enumerate(reversed((1,2,3))))'
100000 loops, best of 3: 2.29 usec per loop

python -m timeit -s 'from functools import reduce' 'reduce(lambda rst, d: rst * 10 + d, (1, 2, 3))'
1000000 loops, best of 3: 0.598 usec per loop 
```

因此，如果您要加快速度，[安德烈·亚祖（Andrey Yazu）的答案](https://stackoverflow.com/a/10062711/722121)就可以了。我对我觉得更具可读性的东西感到很痛苦。我总是觉得 lambdas 很丑，但总的来说，我认为它仍然是更易读的方法。

编辑 2：使用非常大的元组：

长度 20:

```
python -m timeit -s "x=tuple(list(range(1,10))*2)" "int(''.join(map(str, x)))"
100000 loops, best of 3: 5.45 usec per loop

python -m timeit -s "x=tuple(list(range(1,10))*2)" "sum((10**pos)*val for pos, val in enumerate(reversed(x)))" 
100000 loops, best of 3: 11.7 usec per loop

python -m timeit -s "x=tuple(list(range(1,10))*2)" -s 'from functools import reduce' 'reduce(lambda rst, d: rst * 10 + d, x)'
100000 loops, best of 3: 4.18 usec per loop 
```

长度 100：

```
python -m timeit -s "x=tuple(list(range(1,10))*10)" "int(''.join(map(str, x)))"
100000 loops, best of 3: 18.6 usec per loop

python -m timeit -s "x=tuple(list(range(1,10))*10)" "sum((10**pos)*val for pos, val in enumerate(reversed(x)))"
10000 loops, best of 3: 72.9 usec per loop

python -m timeit -s "x=tuple(list(range(1,10))*10)" -s 'from functools import reduce' 'reduce(lambda rst, d: rst * 10 + d, x)'
10000 loops, best of 3: 25.6 usec per loop 
```

在这里，我们看到最快的方法实际上是字符串操作 - 然而，现实情况是您不太可能在例如 10 位数字范围之外使用它 - 该`reduce()`方法仍然在速度方面占主导地位。我还认为 string 方法对读者来说是hackish并且不太清楚，这通常是优先于速度的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T21:08:30.870

[*@Marcin*](https://stackoverflow.com/a/10063157/1132524) `bytearray`解决方案确实是 Python 2 中最快的解决方案。

遵循 Python 3 中的同一行，可以执行以下操作：

```
>>> plus = ord("0").__add__
>>> int(bytes(map(plus, x))) 
```

Python 3 处理字符串和字节的方式与 Python 2 不同，所以为了更好地理解情况，我做了一些计时。以下是我在我的机器上得到的结果。

使用 Python 2.7（[代码](http://ideone.com/raiFO)）：

```
int(str(bytearray(map(plus, x))))           8.40 usec/pass
int(bytearray(map(plus, x)).decode())       9.85 usec/pass
int(''.join(map(str, x)))                   11.97 usec/pass
reduce(lambda rst, d: rst * 10 + d, x)      22.34 usec/pass 
```

使用 Python 3.2（[代码](http://ideone.com/difhe)）时：

```
int(bytes(map(plus, x)))                    7.10 usec/pass
int(bytes(map(plus, x)).decode())           7.80 usec/pass
int(bytearray(map(plus,x)).decode())        7.99 usec/pass
int(''.join(map(str, x)))                   17.46 usec/pass
reduce(lambda rst, d: rst * 10 + d, x)      19.03 usec/pass 
```

自己判断:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T12:18:54.170

这不会将整数转换为字符串并将它们连接起来：

```
>>> sum([(10 ** i) * input[len(input)-i-1] for i in range(len(input))])
123 
```

这是一行中的for循环。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T13:28:34.243

怎么样：

```
In [19]: filter(set('0123456789').__contains__,str((1,2,3)))
Out[19]: '123' 
```

我相信这是最简单的解决方案。

一个非常快速的解决方案是：

```
plus=ord("0").__add__ # separate out for readability; bound functions are partially-applied functions
int(str(bytearray(map(plus,x)))) #str is necessary 
```

这如何与下一个最快的解决方案相提并论：

```
$ python -m timeit -s 'x=tuple(list(range(1,10))*10)' 'plus=ord("0").__add__;int(str(bytearray(map(plus,x))))'
10000 loops, best of 3: 47.7 usec per loop

$ python -m timeit -s "x=tuple(list(range(1,10))*10)" "int(''.join(map(str, x)))"
10000 loops, best of 3: 59 usec per loop 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-31T15:05:05.150

将元组更改为数字的最简单方法是使用字符串格式化。

```
input = (1, 3, 7)
output = int('{}{}{}'.format(input[0], input[1], input[2]))

# TEST
print(output) # 137
print(type(output)) # <class 'int'> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-08T12:11:06.517

只是另一种方法

```
>>> sum(n*10**i for (i,n) in enumerate(input[::-1]))
137 
```

还有一个

```
>>> int(str(input).translate(None,'(,) '))
137 
```

# svn - svn: 'trunk' 只是一个目录吗？

> ID：10062689
> 
> 赞同：0
> 
> 时间：2012-04-08T12:11:13.757
> 
> 标签：svn, trunk

许多 subversion 存储库`trunk`在存储库的根目录下都有一个子目录。

svn 中的`trunk`目录只是一个名称遵循约定的目录，还是该名称`trunk`具有硬编码到颠覆中的特殊含义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:13:04.980

是的，拥有一个`trunk`目录只是一种约定，并且与任何其他目录一样被对待。您可以拥有一个没有 . 的 Subversion 存储库`trunk`，并且您可以使用不同名称的目录进行日常开发工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T12:13:59.427

这只是一个约定。

然而，许多在 svn 和其他源代码控制系统或使用代码的工具（例如 GUI 界面）之间导入/导出导出数据的工具（例如 GUI 界面）假定此约定以正确处理含义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T12:15:58.000

就像 Artyom 和 Nick Meyer 已经写过的那样，这是一个惯例。查看 SVN Book 以获得更多详细信息；[http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html)

# android - FragmentTabPager 根本不工作

> ID：10062692
> 
> 赞同：1
> 
> 时间：2012-04-08T12:11:22.767
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

我正在尝试实现 FragmentTabPager Activity，但它根本没有运行。一旦我调用该活动，应用程序就会立即停止。我已经尝试过多种代码/教程来源，包括developers.android，但同样的问题发生在所有这些来源中。据我了解，没有人遇到过同样的问题（至少他们没有写过）。这让我相信我犯了一些愚蠢的错误。我在这上面花了 2 天多的时间。这是我的 fragmentTabPager 活动的代码：

```
package com.my.pack;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TabHost;
import android.widget.TabWidget;

import java.util.ArrayList;

public class FragmentTabsPager extends FragmentActivity {
    TabHost mTabHost;
    ViewPager mViewPager;
    TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tabs_viewpager_layout);
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mViewPager = (ViewPager) findViewById(R.id.pager);

        // Create our tab adapter
        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

        // add our tabs to the adapter
        mTabsAdapter.addTab(mTabHost.newTabSpec("forex").setIndicator("Forex"),
                Forex.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("stocks")
                .setIndicator("Stocks"), Stocks.class, null);
        mTabsAdapter.addTab(
                mTabHost.newTabSpec("commodities").setIndicator("Commodities"),
                Commodities.class, null);
        /*
         * mTabsAdapter.addTab(mTabHost.newTabSpec("throttle").setIndicator(
         * "Throttle"), LoaderThrottleSupport.ThrottledLoaderListFragment.class,
         * null);
         */

        if (savedInstanceState != null) {
            // restore the last selected tab if we can
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    public static class TabsAdapter extends FragmentPagerAdapter implements
            TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList mTabs = new ArrayList();

        static final class TabInfo {
            private final String tag;
            private final Class clss;
            private final Bundle args;

            TabInfo(String _tag, Class _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabsAdapter(FragmentActivity activity, TabHost tabHost,
                ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = (TabInfo) mTabs.get(position);
            // Create a new fragment if necessary.
            return Fragment.instantiate(mContext, info.clss.getName(),
                    info.args);
        }

        public void onTabChanged(String tabId) {
            // called when the user clicks on a tab.
            int position = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(position);
        }

        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {
        }

        public void onPageSelected(int position) {

            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        public void onPageScrollStateChanged(int state) {
        }
    }
} 
```

我的清单看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.pack"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".FragmentTabsPager"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.FRAGMENTTABSPAGER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Stocks"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.STOCKS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Commodities"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.COMMODITIES" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Forex"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.FOREX" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

tabs_viewpager_layout 文件的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="horizontal" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0" />

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

我希望从中调用我的 fragmentTab 活动的主要内容：

```
package com.my.pack;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;

    public class Main extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Button b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent myintent = new Intent(Main.this, FragmentTabsPager.class);
                startActivity(myintent);
            }
        });
    }

} 
```

我知道我的 3 个外汇、股票等寻呼机活动运行顺利。我通过将 main 中的意图更改为 Forex.class 进行了检查，并且所有 3 个都可以正常工作。我还认为该活动必须是 LAUNCHER 活动，但尝试了该活动却失败了。提前致谢。任何帮助将不胜感激。

我的日志猫是..

```
04-08 19:05:24.839: D/AndroidRuntime(1332): Shutting down VM
04-08 19:05:24.839: W/dalvikvm(1332): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-08 19:05:24.869: E/AndroidRuntime(1332): FATAL EXCEPTION: main
04-08 19:05:24.869: E/AndroidRuntime(1332): java.lang.ClassCastException: com.my.pack.Forex
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at com.my.pack.FragmentTabsPager$TabsAdapter.getItem(FragmentTabsPager.java:124)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:95)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.View.measure(View.java:8171)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.os.Looper.loop(Looper.java:123)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at java.lang.reflect.Method.invoke(Method.java:521)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-08 19:05:24.869: E/AndroidRuntime(1332):     at dalvik.system.NativeStart.main(Native Method)
04-08 19:05:27.898: I/Process(1332): Sending signal. PID: 1332 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:45:50.237

您`android:id tags`在这三个活动中是否有重复？我读过这种情况可能会导致问题。

啊，这是我读到的链接： [ClassCastException](https://stackoverflow.com/questions/2667133/classcastexception-occurs-randomly)

# c++ - 大端与小端

> ID：10062694
> 
> 赞同：0
> 
> 时间：2012-04-08T12:12:05.657
> 
> 标签：c++, endianness

我在 64 位英特尔处理器上工作...我正在学习大端和小端，我理解的是这些是一个字中的字节顺序，因此在 64 位数据中，msb 将具有大端形式的最低地址和小端形式的最高地址......现在我有一个问题：

我写了[这段代码](http://textuploader.com/?p=6&id=frFkl)
来确定我的处理器是小端还是大端......
我输入

```
0102030405060708 (this is in hex) 
```

并希望得到`08`and `07`and and `06`and...`01`作为答案

而是得到了`0`and `25`and `50`and and and and `-125`and `-13`and `501`and `-41`and `66`。
当我将's'作为2字节（短）编写相同的代码时，输​​出`0102`是`2`和`1`（与小端一致）......那么这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:18:44.467

您将输入值存储为 a `double`，它将值存储为[浮点](http://en.wikipedia.org/wiki/Double_precision)值。尝试使用 a`long long`代替，它是一个 64 位整数，并且应该按照您的预期存储该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:18:36.307

将十六进制数字带入 a`(double)`不太可能达到您的预期；它是一个浮点值，由以 2 为底的尾数和指数组成。您可能会找到`(long)`或`(long long)`更接近您的意图。

# php - cURL 通过 OpenVPN 或 PPTP

> ID：10062697
> 
> 赞同：11
> 
> 时间：2012-04-08T12:12:32.177
> 
> 标签：php, curl

有没有办法通过 OpenVPN 或 PPTP 等 VPN 执行 cURL 请求？

我知道我可以使用代理，但 VPN 不同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T22:09:03.687

**编辑：2013 年 7 月**

我收到了几封电子邮件，所以我把它全部打包成一篇博文： [http ://www.georgiecasey.com/2013/07/26/how-to-use-overplay-and-other-vpns-as-卷曲代理/](http://www.georgiecasey.com/2013/07/26/how-to-use-overplay-and-other-vpns-as-a-curl-proxy/)

* * *

是的，但首先您必须在单独的界面上设置 VPN，这样您的整个服务器就不会使用 VPN。我不是 OpenVPN 专家，但我使用`dev`开关来指定 TUN/TAP 虚拟网络设备：`dev proxy1`. 有关 OpenVPN 手册页的更多信息。

然后在您的脚本中使用这行 PHP 代码。

```
curl_setopt($ch, CURLOPT_INTERFACE, "proxy1"); 
```

我这样做是为了可以使用[overplay.net](http://www.overplay.net)的所有 IP来抓取我服务器上的内容。这些 IP 经常更改，所以我有一个 cronjob 来提取 IP 的 zip 文件，为每个 IP 创建一个 OpenVPN 配置文件，启动每个 VPN 并将所有 IP 和接口名称放在数据库表中。然后我的脚本只是从数据库中提取随机接口名称并在 curl 中使用它。工作了一个款待。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T12:45:56.027

cURL 仅使用操作系统的网络堆栈，本身不实现 TCP（或较低级别的协议）。

因此，当操作系统配置为通过虚拟适配器路由网络通信时，它可以正常工作，无论该适配器是如何实现的。

# php - PHP & MySQL：添加到数据库和检索的代码有什么问题

> ID：10062698
> 
> 赞同：-2
> 
> 时间：2012-04-08T12:12:53.733
> 
> 标签：php, mysql

它应该允许您向数据库添加个人链接，并且服务器正在运行带有 MySQL 和 Active Directory 的 Windows Server 2008 R2。

```
<?php 
$dbl = mysql_connect('localhost', 'USERNAME', 'PASSWORD') or die('failed to connect to mysql'); 
mysql_select_db('linksdatabase') or die('failed to select database'); 

if(isset($_POST['linkaddress']) && isset($_POST['linkname'])) 
$sql = "INSERT INTO userlinks (username, linkaddress, linkname) VALUES ('%s','%s','%s')";
mysql_query ( sprintf ( $sql, mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ), mysql_real_escape_string ( $_POST ['linkaddress'] ), mysql_real_escape_string ( $_POST ['linkname'] ) ) );

echo '<p>Links:</p><ul>'; 

$result = mysql_query ( sprintf ( "SELECT linkaddress, linkname FROM userlinks WHERE username = '%s'", mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ) ) );

while($row = mysql_fetch_array($result)) 
    echo '<li><a href="', htmlentities($row['linkaddress']), '">', htmlentities($row['linkname']), '</a></li>'; 

echo '</ul>'; 
?> 

<form action="" method="post"> 
 <fieldset> 
  <legend>Add a Link</legend> 
  Address: <input type="text" name="linkaddress" /><br /> 
  Name: <input type="text" name="linkname" /><br /> 
  <input type="submit" value="Add" /> 
 </fieldset> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:27:02.593

您遇到一些单引号`'`问题

代替

```
 mysql_query('INSERT INTO userlinks (username, linkaddress, linkname) VALUES (\'' . mysql_real_escape_string($_SERVER['AUTH_USER']) . '\', \'' . mysql_real_escape_string($_POST['linkaddress']) . '\', \'' . mysql_real_escape_string($_POST['linkname']) . '\''); 
```

和

```
$sql = "INSERT INTO userlinks (username, linkaddress, linkname) VALUES ('%s','%s','%s')";
mysql_query ( sprintf ( $sql, mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ), mysql_real_escape_string ( $_POST ['linkaddress'] ), mysql_real_escape_string ( $_POST ['linkname'] ) ) ); 
```

代替

```
$result = mysql_query('SELECT linkaddress, linkname FROM userlinks WHERE username = \'' . mysql_real_escape_string($_SERVER['AUTH_USER']) . '\''); 
```

和

```
$result = mysql_query ( sprintf ( "SELECT linkaddress, linkname FROM userlinks WHERE username = '%s'", mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ) ) ); 
```

**此代码可能会帮助您找到错误**

```
error_reporting(E_ALL);
ini_set('display_errors','On');

$dbl = mysql_connect ( 'localhost', 'USERNAME', 'PASSWORD' ) or die ( 'failed to connect to mysql' );
mysql_select_db ( 'linksdatabase' ) or die ( 'failed to select database' );

if (count ( $_POST ) < 1) {
    var_dump ( "Nothign was posted" );
} else {
    var_dump ( $_POST );
}

if (isset ( $_POST ['linkaddress'] ) && isset ( $_POST ['linkname'] )) {
    $sql = "INSERT INTO userlinks (username, linkaddress, linkname) VALUES ('%s','%s','%s')";
    mysql_query ( sprintf ( $sql, mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ), mysql_real_escape_string ( $_POST ['linkaddress'] ), mysql_real_escape_string ( $_POST ['linkname'] ) ) );

    if (mysql_errno ()) {
        var_dump ( "MySQL error " . mysql_errno () . ": " . mysql_error () );
    } else {
        var_dump ( "OK Insert" );
    }

}

echo '<p>Links:</p><ul>';

$result = mysql_query ( sprintf ( "SELECT linkaddress, linkname FROM userlinks WHERE username = '%s'", mysql_real_escape_string ( $_SERVER ['AUTH_USER'] ) ) );

if (mysql_errno ()) {
    var_dump ( "MySQL error " . mysql_errno () . ": " . mysql_error () );
} else {
    var_dump ( "OK Select" );
}

while ( $row = mysql_fetch_array ( $result ) )
    echo '<li><a href="', htmlentities ( $row ['linkaddress'] ), '">', htmlentities ( $row ['linkname'] ), '</a></li>';
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:32:53.910

`)`您在查询末尾缺少一个右括号。

```
mysql_query('INSERT INTO userlinks (username, linkaddress, linkname) VALUES (\'' . mysql_real_escape_string($_SERVER['AUTH_USER']) . '\', \'' . mysql_real_escape_string($_POST['linkaddress']) . '\', \'' . mysql_real_escape_string($_POST['linkname']) . '\')'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:39:55.053

不是一个完整的答案，但在开发时尝试换行 - 让您的生活更轻松（在 IDE 中）和我们的生活（在此处粘贴代码时）：

```
$sql = "
    INSERT INTO userlinks
    (username, linkaddress, linkname)
    VALUES ('%s','%s','%s')
";
mysql_query(
    sprintf(
        $sql,
        mysql_real_escape_string( $_SERVER ['AUTH_USER'] ),
        mysql_real_escape_string( $_POST ['linkaddress'] ),
        mysql_real_escape_string( $_POST ['linkname'] )
    )
); 
```

这使得无需水平滚动即可轻松阅读所有内容，并且也使检查括号匹配变得简单。

# mongodb - 计算 Redis 中产品的份额数

> ID：10062706
> 
> 赞同：0
> 
> 时间：2012-04-08T12:14:07.947
> 
> 标签：mongodb, redis, database, nosql

我想计算产品的共享数量以及谁共享它，

我应该使用什么类型来存储在 Redis 中？排序集？

我以前使用排序集，每个产品的共享信息存储在 ZADD('share','product id',0)

但是现在，我想存储谁共享它。

在mongodb中可以轻松完成，但是在redis中怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:12:54.013

如果顺序不重要，请对每个产品使用：

`SADD shares:<pdoruct_id> <user_id>`

如果顺序很重要，唯一性不是：

`LPUSH shares:<pdoruct_id> <user_id>`

如果顺序和唯一性都很重要：

`ZADD shares:<pdoruct_id> <current_unix_timestamp> <user_id>`

然后你就可以做

`ZREVRANGE shares:<product_id> 0 100`并按照用户共享项目的顺序获取用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:55:07.767

创建另一个排序集，或者更好 - 一个哈希，其中包含产品 ID 以及共享它们的人。那是如果最多 1 个用户能够共享一个产品。

# javascript - 比较多个字段值

> ID：10062708
> 
> 赞同：1
> 
> 时间：2012-04-08T12:14:28.120
> 
> 标签：javascript, jquery

如何使用 jQuery 比较多个输入字段值以及是否存在匹配警报“有相似值”？

```
<input value="111"> //similar
<input value="222">
<input value="111"> //similar
<input value="333"> 
```

上面的这段 html 代码应该提醒“有相似的值”，因为它有 2 个相同的值。用 jQuery 怎么做？

我试过（以下代码不起作用）：

**演示：http:** [//jsfiddle.net/HpWLQ/](http://jsfiddle.net/HpWLQ/)

```
$('input').each(function () {
    var $this = $(this);
    var val = $this.val();
    vals.push(val);
});
for (var i = 0; i < vals.length; i++) {
    for (var n = 0; n < vals.length; n++) {
        if (n !== i) {
            if (vals[i] === vals[n]) {
                alert('There are similar values');
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:31:45.207

**编辑：**为了满足@Raynos，这是一个纯 JS 解决方案。

```
var vals = {};
var flag = false;
var collection = document.getElementsByTagName('input');
collection = [].slice.call(collection);

collection.forEach(function(element, index, array) {
    if (flag === true) return;
    var i = element.value;
    if (vals[i])
    {
        flag = true;
        alert('There are duplicates!');
    }
    else
    { 
        vals[i] = 1;
    }
}); 
```

​</p>

* * *

*奖励：*我通过 jsperf 运行我的解决方案；最后一个[显然是迄今为止最快的](http://jsperf.com/discovering-duplicates)。

**编辑：**这可能是解决您的问题*的 jQuery 方法***（[在此工作小提琴](http://jsfiddle.net/pxp9n/3/)）**。我原来的答案仍然在下面。

```
var duplicatefound = false;
$('input').each(function(index, item){
    if (duplicatefound) return;
    val = $(item).val();
    if ($('input[value="' + val + '"]').length == 1) return;
    duplicatefound = true;
    alert('There are similar values');
}); 
```

​如果您需要捕获部分或全部重复值的替代解决方案**（[此处为工作小提琴](http://jsfiddle.net/pxp9n/2/)）**：

```
var collection = $('input');
var duplicates = $.map(collection, function(item){
    val = $(item).val();
    return ($('input[value="' + val + '"]').length > 1) ? val : null;
});

if(duplicates.length > 0) alert('There are similar values'); 
```

* * *

正如其他人所提到的，您缺少`vals`作为数组的声明，因此`.push()`失败了。

您可能会发现基于对象的解决方案更优雅：**[Working fiddle](http://jsfiddle.net/merua/)**

```
var vals = {};

$('input').each(function() {
    var index = $(this).val();
    if (vals[index])
    {
        vals[index]++
    }
    else
    { 
        vals[index] = 1;
    }
});

var duplicates = $.map(vals, function(val, key){
    return (val > 1) ? key : null;
});

if (duplicates.length > 0) alert('There are duplicates!'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:23:27.980

您尚未将 定义为`vals`数组。你可以像这样定义它

```
vals = []; 
```

### [演示](http://jsfiddle.net/Starx/HpWLQ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:25:47.370

```
EDITED 2:    

function findDuplicates()
{
    var dupCount = 0;
    $('input').each(function () {
         var $currentInput = $(this);
         $('input').each(function () {
              if($(this).val() == $currentInput.val() && $(this) != $currentInput)
                   dupCount++;
         });
     });
     if(dupCount > 0) alert("There are " + dupCount + "duplicates!");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T12:31:15.247

```
var inputs = $("input"), similar = [], i, j;

for (i = 0; i < inputs.length; i += 1) {
    for (j = i + 1; j < inputs.length; j += 1) {
        if (inputs[i].value === inputs[j].value) {
            similar.push([i,j]);
        }
    }
}

if (similar.length > 0) {
    alert('There are similar values');
}​ 
```

请注意，这仅按顺序比较唯一排列，并且它为您提供相似数组中的匹配索引数组，以防您对此感兴趣。

**示例：http:** [//jsfiddle.net/sjCGy/](http://jsfiddle.net/sjCGy/)

您可以使用 document.getElementsByTagName 而不是 jQuery 选择器轻松删除 jQuery 依赖项。

而且由于@Raynos 无法阅读，我会明确说明。

```
var inputs = document.getElementsByTagName("input"), similar = [], i, j;

for (i = 0; i < inputs.length; i += 1) {
    for (j = i + 1; j < inputs.length; j += 1) {
        if (inputs[i].value === inputs[j].value) {
            similar.push([i,j]);
        }
    }
}

if (similar.length > 0) {
    alert('There are similar values');
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T12:26:48.050

您的代码有效，您只是缺少`vals`数组的声明 -[请参阅更新的小提琴](http://jsfiddle.net/HpWLQ/1/)

# ios - 用 XIB 替换情节提要

> ID：10062716
> 
> 赞同：3
> 
> 时间：2012-04-08T12:16:10.123
> 
> 标签：ios, xcode, interface-builder, xcode4.3

如何用 XIB 替换情节提要？

在尝试创建动态视图及其控制器时，我失去了新故事板的所有优势。现在，当尝试从项目中删除它时，我创建了一个带有自己控制器的新 XIB 并在项目设置中替换它：
![在此处输入图像描述](../Images/6276cfa545bb0156294600cf37a3976a.png)
现在，当尝试运行应用程序时，它崩溃并且日志显示以下内容：

```
2012-04-08 14:50:16.567 Bazaart[11340:15203] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIApplication 0x8c15c20> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key view.' 
```

这是代码：UIRootWindow：

```
#import <UIKit/UIKit.h>
@interface UIRootWindow : UIViewController
@end 
```

及其对应的实现：

```
#import "UIRootWindow.h"
@implementation UIRootWindow

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    return self;
}
- (void)viewDidLoad {
    [super viewDidLoad];
}
- (void)viewDidUnload {
    [super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}
@end 
```

**编辑：**
我有菲利普建议的窗口（见下文）。但是……我的做法似乎不是最好的。我做对了吗？

```
UIRootWindow *wnd = [[UIRootWindow alloc] init];
[wnd view];
[self setWindow:wnd.window]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T13:12:14.443

不要在主界面字段中添加任何内容。相反，在应用程序委托的 didFinishLaunchingWithOptions: 方法中加载您的顶级控制器并在那里设置窗口的根控制器。

应用程序启动假定那里提到的 xib 有一个文件所有者，它是一个 UIApplication。（以前的旧模板和一些示例项目仍然这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:14:27.857

当您的应用程序启动时，您的 XIB 中的每个控制器都是根据您设置的类的名称创建的。然后，您以可视方式连接的每个属性都是使用 KVC 设置的。该错误告诉您在此过程中的某个地方，“视图”属性不正确。

我可以想到可能发生这种情况的两个原因：

*   您没有为您的 ViewController 或 XIB 中的其他对象设置正确的类（在“身份检查器”中）
*   您没有正确接线连接。（在“连接检查器”中）

无论哪种方式，您都可以快速浏览您的 XIB 中的设置，注意属性“视图”的连接位置。

# undefined - 致命错误：在第 1 行的 index.php 中调用未定义函数 get_header()

> ID：10062717
> 
> 赞同：19
> 
> 时间：2012-04-08T12:16:19.490
> 
> 标签：undefined, fatal-error

我有同样的问题。我对 PHP 完全陌生。我安装了[XAMPP](http://en.wikipedia.org/wiki/XAMPP)并从 WordPress 下载了孵化主题。当我运行 index.php 它给了我以下错误

> “致命错误：在第 1 行调用 C:\xampp\htdocs\hatch\index.php 中未定义的函数 get_header()”

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-08T12:22:50.337

您似乎正在尝试在 WordPress 安装之外运行 WordPress 主题。

您需要下载[WordPress](http://wordpress.org/download)的副本，将其解压缩到您的`htdocs`文件夹中（就像您对主题所做的那样），然后在浏览器中导航到它。

设置后（只需按照说明进行操作），您需要将该主题`wp-content/themes`放入 WordPress 安装中。

然后，您可以在 WordPress 管理员面板中将主题更改为新主题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-30T04:57:53.880

您只是在访问主题文件。这就是错误的原因。

首先，您需要将下载的主题文件包含在 WordPress 安装文件夹中：`wp-content/themes`

然后从管理员仪表板激活主题。现在您可以使用主题了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-24T09:20:00.380

You are trying to access the theme file directly from XAMPP'S `htdocs` folder.

Copy the theme file, and add it to `htdocs\wordpress\wp-content\themes`. Run WordPress and add the theme from the administrator dashboard.

# javascript - 什么 javascript 将模拟从谷歌地图 api 3 地点自动完成下拉列表中的选择？

> ID：10062725
> 
> 赞同：4
> 
> 时间：2012-04-08T12:17:46.107
> 
> 标签：javascript, jquery, google-maps-api-3, autocomplete, google-places

我正在尝试从 google maps api v3 places 库的自动完成下拉列表中自动选择项目（使用 jQuery）。**我无法确定从下拉列表中选择项目所需的 javascript**。

因此，例如，以下是完成部分字段并触发下拉菜单所需的步骤，例如[google](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)对此资源的演示：

**[编辑以下代码更新以显示解决方案...]**

```
$('input[name=address]').val("525 Bergen Street");
$('input[name=address]').trigger("focus");
$('input[name=address]').simulate("keydown", { keyCode: $.ui.keyCode.DOWN });
$('input[name=address]').simulate("keydown", { keyCode: $.ui.keyCode.ENTER }); 
```

**[编辑...见工程师参考模拟，下面。]**

任何建议将不胜感激，谢谢，

里尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:15:15.223

尝试使用[jquery.simulate.js](https://github.com/medihack/jquery-ui/blob/ticker/tests/jquery.simulate.js)：

```
$(elem).simulate(mouse_or_keyboard_event_type, options); 
```

支持的事件类型：

*   鼠标： **mouseover、mouseout、mousedown、mouseup、mousemove、click、dblclick**
*   键盘： **keyup、keydown、keypress**

# sqlite - 在 SQLite 中永久保存表

> ID：10062727
> 
> 赞同：2
> 
> 时间：2012-04-08T12:17:50.323
> 
> 标签：sqlite

我正在尝试在 SQLite 中创建一个联系人表。当我在插入 2-3 行数据后提交更改，并在关闭当前会话后尝试访问它时，我的记录不再存在..

这就是我所做的：-

1.创建一个目录`C:\Sites\databases>`来存储我所有的数据库相关数据。2.创建了一个名为contactlist_development的数据库，所以当我输入命令`dir`时 `C:\Sites\databases>`，我可以看到我的数据库。

这就是问题开始的地方：-

3.当我做（`C:\Sites\databases>sqlite3`）。我被带到 sqlite 提示符，当我创建一个表时，一旦我注销它的记录就不会被保存：-

```
sqlite>BEGIN TRANSACTION;
sqlite>CREATE TABLE contacts(Cid integer primary key autoincrement,first_name varchar(15),last_name varchar(15),address varchar(15),city varchar(15),state varchar(15),country varchar(15),phone double, email varchar(20));
sqlite>COMMIT; 
```

然后，

```
sqlite>BEGIN TRANSACTION;
sqlite>INSERT INTO contacts VALUES(1,'Chetan','Dahal','Bal','Kathmandu','Nepal','50060','cheta@gmail.com'));
sqlite>COMMIT;
sqlite> Ctrl-C 
```

然后当我再次登录时，我没有得到我的记录:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T12:27:40.610

看起来您在运行时正在打开一个内存数据库：

```
C:\Sites\databases>sqlite3 
```

您可以尝试运行它吗？

```
C:\Sites\databases>sqlite3 contactlist_development 
```

`contactlist_development`你的数据库文件在哪里。

# asterisk - 星号和记录来电和去电

> ID：10062729
> 
> 赞同：1
> 
> 时间：2012-04-08T12:18:29.460
> 
> 标签：asterisk, voice-recording

所以我一直在尝试学习星号，但取得了一些有限的成功。基本上我想做的是记录来电和去电。但是，我的理解似乎存在差距。

据我了解，一位星号大师能否确认我的理解是正确的或不正确的。

1.  sip.conf 和 iax.conf 用于注册“通道”。这些通道可以是软电话、模拟电话，甚至是连接到我的星号服务器的其他设备。

2.  extensions.conf 定义传入呼叫到星号的路由。因此，我可以说如果有人在我的星号框中呼叫分机 100，则将此呼叫连接到 sip 设备 100 或播放 hello-world 示例。

我怀疑我对扩展的理解可能有点缺陷。这是我想要做的。无论分机是什么，我都想将来电和去电记录到星号。据我所知，您可以在拨号计划中使用 monitor 和 mixmonitor 命令。所以我的理解是，你只能在拨号方案中指定来电会发生什么。

因此，例如，我可以通过将以下内容添加到我的 extension.conf 来记录对分机 600 的来电

```
exten => 600,1,Answer()
same => 600,2,Monitor(wav,,m) 
```

我怀疑我对拨号方案的工作方式做出了非常错误的假设。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-11T07:11:25.563

可以通过此拨号平面记录来电和去电

将此行添加到 extensions.conf

**

```
exten => _!,n,System(mkdir "/var/spool/asterisk/${CALLERID(number)}")
exten => _!,n,Set(FILENAME=CallingTime(${DATETIME})-Called(${EXTEN}))
exten => _!,n,Set(MONITOR_EXEC_ARGS=&& mv "/var/spool/asterisk/monitor/${FILENAME}.wav" "/var/spool/asterisk/${CALLERID(number)}/")
exten => _!,n,Monitor(wav,${FILENAME},mb)
exten => _!,n,Dial(SIP/100,,r)
exten => _!,n,Hangup() 
```

**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:08:27.940

Right做了更多的研究。拨号方案同时满足呼入和呼出的需求。例如，您可以通过 PSTN 卡连接您的外部提供商。此卡会将来自星号的呼叫连接到外部网络中继，从而将您连接到外部号码。

因此，在您的拨号计划中，您基本上会说，当拨打外部号码时，将呼叫传递到 PSTN 卡并让该卡拨打该号码。

例如在拨号计划中定义您的 PSTN 卡：

```
[globals]
LOCAL=DAHDI/G0           ; assuming you have a PSTN card in your system 
```

然后用拨号方案中的表达式定义外部号码范围

```
[external]
exten => _NXXNXXXXXX,1,Dial(${LOCAL}/${EXTEN})  ; 10-digit pattern match for NANP 
```

基本上，如果您拨打一个符合_NXXNXXXXXX 规则的号码，拨号方案将告诉PSTN 卡拨打您刚刚拨打的号码，方法是将其传递给变量${EXTEN}。这会将呼叫连接到外部世界。此时您可以在拨号计划中添加另一个步骤以开始录制。

事情就是这样。在查看拨号方案时，不要再考虑传入和传出，而是将其视为通道以及如何连接它们。

# php - 致命错误：在第 2 行的 index.php 中调用未定义函数 get_header()

> ID：10062734
> 
> 赞同：0
> 
> 时间：2012-04-08T12:18:56.513
> 
> 标签：php, wordpress, themes, xampp, wordpress-theming

有同样的问题，我是 php 的新手。我安装 XAMPP 然后从 wordpress 下载孵化主题。当我运行 index.php 时，它给了我以下错误

“致命错误：在第 1 行调用 C:\xampp\htdocs\hatch\index.php 中未定义的函数 get_header()”

任何人都可以帮助解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:23:15.133

您需要安装 wordpress，然后才能应用主题。据我所知，你不能自己运行 WP 主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T18:38:50.067

要解决此问题，您需要安装 wordpress，然后将文件移动到主题文件夹，如下所示：wp-content/themes/yourwebsitefiles

# android - 如何制作照片仪表板列表活动？

> ID：10062739
> 
> 赞同：0
> 
> 时间：2012-04-08T12:19:28.243
> 
> 标签：android, listview

我喜欢的一件事是新的 Android 收藏夹联系人屏幕：

![在此处输入图像描述](../Images/d31c0ccaad04d2508e9a42549dc595eb.png)

我想在我的应用程序中实现类似的东西，但我不知道如何让列表活动每行显示两个项目而不是一个。如果有人有任何代码来做类似的事情，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:24:04.907

在我看来，每行有两个项目的 listView 可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:46:48.480

我可能是错的，但我相信该屏幕的代码实际上在[AOSP](https://github.com/android/platform_packages_apps_contacts)中可用:)

您可能有兴趣研究的部分是[ContactTileListFragment](https://github.com/android/platform_packages_apps_contacts/blob/master/src/com/android/contacts/list/ContactTileListFragment.java) 和[ContactTileAdapter](https://github.com/android/platform_packages_apps_contacts/blob/master/src/com/android/contacts/list/ContactTileAdapter.java)代码。简而言之，其中的每一行`ListView`都由可配置数量的“图块”（基本上`FrameLayouts`包含从资源膨胀的视图）组成。

# c++ - 从 D 语言调用 C++(C)

> ID：10062750
> 
> 赞同：9
> 
> 时间：2012-04-08T12:21:11.113
> 
> 标签：c++, c, d

如何从 D 程序调用 C++ 函数？我仍然不明白该怎么做。我需要执行哪些命令？我在 Fedora 中使用 dmd。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T12:35:13.600

我能想到的最简单的例子，如果你正在调用 C 函数：

```
$ cat a.c
int f(int a, int b){
    return a + b + 42;
}
$ cat a.di
extern (C):
int f(int, int);
$ cat b.d
import std.stdio;
import a;
void main(){
    writeln( f( 100, 1000) );
}
$ gcc -c a.c
$ dmd b.d a.o
$ ./b
1142
$ 
```

如果你使用共享对象，你可以这样：

```
$ cat sdltest.di
module sdltest;

extern (C):

struct SDL_version{
    ubyte major;
    ubyte minor;
    ubyte patch;
}

SDL_version * SDL_Linked_Version();

$ cat a.d
import std.stdio;
import sdltest;

void main(){
    SDL_version *ver = SDL_Linked_Version();
    writefln("%d.%d.%d", ver.major, ver.minor, ver.patch);
}

$ dmd a.d -L-lSDL
$ ./a
1.2.14
$ 
```

在这个例子中，我链接了一个[SDL](http://www.libsdl.org/)函数。`-L`参数`dmd`允许您将参数传递给，[`ld`](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld)在这种情况下`-lSDL`是与 SDL 链接。

D 接口文件 ( `.di`) 在[这里](http://dlang.org/dmd-windows.html#interface_files)描述。

您还应该看看[htod](http://dlang.org/htod.html)。

# javascript - 如何在表中动态添加 2 行

> ID：10062755
> 
> 赞同：0
> 
> 时间：2012-04-08T12:22:07.303
> 
> 标签：javascript, jquery

我是 JS 和 jQuery 的初学者，当我单击链接（页面底部的灰色矩形）时，我想动态添加 2 行（橙色行和包含 cols 的行）。

这是一个屏幕截图：

![在此处输入图像描述](../Images/2d38b38df5a6481c54e67469896e3078.png) 这是我的 HTML 代码：

```
<div class="ajout_prest">
    <p class="txt_ajout">
        <a class="AddResults" href="#">Ajouter une nouvelle prestation</a>
    </p>
    <p class="plus_ajout">
        <a class="AddResults" href="#">+</a>
    </p>
</div> 
```

和JS代码：

```
<script>
    $('.AddResults').click(function(){
        var rowNumber = 3;

        // All the cols
        var jourVar = $('<td class="jr_td"><p><input type="text" class="datepicker" /></p><p class="ou">ou</p><p><input type="text" class="datepicker" /></p></td>') ;
        var creneauVar = $('<td class="cr_td"><select><option value="h1">10h30</option><option value="h2">11h30</option></select><select class="cr_td_s2"><option value="h3">10h30</option><option value="h4">11h30</option></select></td>') ;
        var repassageVar = $('<td class="rp_td"><select><option value="h5" SELECTED>2h00</option><option value="h6">3h00</option></select></td>') ;
        var menageVar = $('<td class="mn_td"><select><option value="h7" SELECTED>2h00</option><option value="h8">3h00</option></select></td>') ;
        var totalVar = $('<td class="tt_td"><strong>4h.</strong></td>') ;
        var pttcVar = $('<td class="pttc_td"><strong>88 &#8364;</strong></td>') ;
        var corVar = $('<td class="cor_td"><a href="#"><img src="img/ico/corbeille.png" alt="" width="13" height="13" /></a></td>') ;      

        //Create 2 new rows
        var newTitreRow = $('<tr><td class="bar_td" colspan=7><strong>PRESTATION ' + rowNumber + '</strong></td></tr>') ;
        var newContentRow = $('<tr>' + jourVar + '' + creneauVar + '' + repassageVar + '' + menageVar + '' + totalVar + '' + pttcVar + '' + corVar + ');

        //Append the new row to the body of the #table_prest table
        $('#table_prest tbody').append(newTitreRow);
        $('#table_prest tbody').append(newContentRow);

        //Iterate row number
        rowNumber++;
    });
</script> 
```

但当然什么也没有发生。你对这个问题有任何想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:38:03.820

您的 javascript 代码中至少有一个错误：

```
var newContentRow = $('<tr>' + jourVar + '' + creneauVar + '' + repassageVar + '' + menageVar + '' + totalVar + '' + pttcVar + '' + corVar + '); 
```

在连接的末尾有一个额外的 + '

它应该是：

```
var newContentRow = $('<tr>' + jourVar + '' + creneauVar + '' + repassageVar + '' + menageVar + '' + totalVar + '' + pttcVar + '' + corVar + '</tr>'); 
```

编辑：

另外我应该提到，您使用的 rowNumber 变量不会在您每次单击链接时向上迭代，因为每次单击时它都会重置。要么为此使用全局变量，要么在每次单击按钮时从表格中获取行数，而不是如果您想用行号更新标题行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:41:48.807

我认为问题是您忘记了下面一行中的最后一个单引号

```
 var newContentRow = $('<tr>' + jourVar + '' + creneauVar + '' + repassageVar + '' + menageVar + '' + totalVar + '' + pttcVar + '' + corVar ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T12:51:19.980

有很多问题。

正如所指出的，您`'`在连接行时缺少关闭。

而且，您正在尝试连接 jQuery 对象而不是字符串。您根本不需要 jQuery 对象。

此外，您不需要`+ '' +`变量串联之间的。

```
var rowNumber = 3;

$('.AddResults').click(function(){

    // Concatenate the cells into a single string
    var cells = 
      '<td class="jr_td"><p><input type="text" class="datepicker" /></p><p class="ou">ou</p><p><input type="text" class="datepicker" /></p></td>' +
      '<td class="cr_td"><select><option value="h1">10h30</option><option value="h2">11h30</option></select><select class="cr_td_s2"><option value="h3">10h30</option><option value="h4">11h30</option></select></td>' +
      '<td class="rp_td"><select><option value="h5" SELECTED>2h00</option><option value="h6">3h00</option></select></td>' +
      '<td class="mn_td"><select><option value="h7" SELECTED>2h00</option><option value="h8">3h00</option></select></td>' +
      '<td class="tt_td"><strong>4h.</strong></td>' +
      '<td class="pttc_td"><strong>88 &#8364;</strong></td>' +
      '<td class="cor_td"><a href="#"><img src="img/ico/corbeille.png" alt="" width="13" height="13" /></a></td>'

    // Create 2 new rows
    var newTitreRow = '<tr><td class="bar_td" colspan=7><strong>PRESTATION ' + rowNumber + '</strong></td></tr>'
    var newContentRow = '<tr>' + cells + '<tr>'

    //Append the new row to the body of the #table_prest table
    $('#table_prest tbody').append(newTitreRow + newContentRow);

    //Iterate row number
    rowNumber++;
}); 
```

# animation - 需要有关使用动画拖动精灵的帮助 (Cocos2d)

> ID：10062757
> 
> 赞同：0
> 
> 时间：2012-04-08T12:22:24.953
> 
> 标签：animation, cocos2d-iphone, drag

当有人将精灵从默认位置拖到另一个位置时，我想播放动画。同样，当拖动结束时，精灵将恢复到第一帧的默认位置。

我从几周开始学习 cocos2d，我知道如何制作动画，但我不知道如何做到这一点。如果有人可以给我任何想法或任何教程如何做到这一点，那对我来说将非常有帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:20:36.193

@Zishan，这是一个我认为会有所帮助的教程：[url]http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d[/url]

另一个非Cocos2d的教程是：[url]https://developer.apple.com/library/ios/#samplecode/MoveMe/Introduction/Intro.html[/url]

# javascript - 为什么我的javascript函数有时不起作用

> ID：10062761
> 
> 赞同：3
> 
> 时间：2012-04-08T12:22:52.643
> 
> 标签：javascript

我有一个大型 javascript 函数 init() 隐藏和显示大量 div。当页面加载时，javascript函数由下面的脚本触发。

```
<script type="text/javascript">
$(document).ready(function() {
init();
});
</script> 
```

大多数情况下，javascript 是由下面的脚本触发的。但是偶尔脚本 init() 似乎不会被触发。大约 20 次函数 init() 中的 1 次似乎没有被触发。所有其他 19 次页面和 javascript 工作正常，没有任何错误。出现此错误的情况似乎与正常情况没有什么不同，因为按 F5 20 次时会出现此错误。

我检查了 init() 似乎根本没有被调用，因为 init() 中的第一条语句 (alert("function called");) 没有被调用。在 javascript 工作正常的情况下，我收到了警报消息，并且页面加载正常，没有任何错误。

我尝试了不同的方法来触发 javascript，例如 window.onload 并将此脚本放在页面末尾：

```
<script type="text/javascript">init();</script> 
```

所有这些触发 init() 的不同方法似乎都没有任何区别。

这是 init() 函数：

```
function init(){
pauzereload__gl_var=1;
load2__gl_var=0;

//Hide bus options:
var boxbusnotshow = document.getElementById("boxDiv").getElementsByTagName("a");
boxbusnotshow[3].style.display="none";
boxbusnotshow[4].style.display="none";
boxbusnotshow[5].style.display="none";

document.getElementById("loadingdiv").style.display = "none";
document.getElementById("loadingdivdate").style.display = "none";
getvariables(); //Get variables generated by the php script, to get activetab

var a=1; b=1;
highlightboxinitiate(a,activetab__gl_var,load2__gl_var);
highlightlistinitiate(a,b);

pauzereload__gl_var=0;
} 
```

这是从 init() 函数调用的 highlightboxinitiate 函数：

```
function highlightboxinitiate(divnr,linenr,load2__gl_var) {

getvariables();

for (i = 1; i < 8; i++) {document.getElementById("nextnr" + i).style.display = "none";}
if(counttab__gl_var[linenr]>(9 + settab__gl_var[linenr]) && load2__gl_var==0){
document.getElementById("nextnr" + linenr).style.display = "block";}

for (i = 1; i < 8; i++) {document.getElementById("prevnr" + i).style.display = "none";}
if(settab__gl_var[linenr] >2 && load2__gl_var==0){
document.getElementById("prevnr" + linenr).style.display = "block";}

for (i = 1; i < 8; i++) {document.getElementById("pagenr" + i).style.display = "none";}
if(load2__gl_var==0 && counttab__gl_var[linenr]>9){
document.getElementById("pagenr" + linenr).style.display = "block";}

if(load2__gl_var==1){
for (i = 1; i < 8; i++) {document.getElementById("renextnr" + i).style.display = "none";}
if(counttab__gl_var[linenr]>(9 + settab__gl_var[linenr])){
document.getElementById("renextnr" + linenr).style.display = "block";}

for (i = 1; i < 8; i++) {document.getElementById("reprevnr" + i).style.display = "none";}
if(settab__gl_var[linenr] > 2){
document.getElementById("reprevnr" + linenr).style.display = "block";}

for (i = 1; i < 8; i++) {document.getElementById("repagenr" + i).style.display = "none";}
if(counttab__gl_var[linenr]>9){
document.getElementById("repagenr" + linenr).style.display = "block";}
}

var box = document.getElementById("boxDiv").getElementsByTagName("a");
current_tab__gl_var=linenr;
   for (i = 0; i < box.length; i++) {unselectboxinitiate(divnr,i);}

tabselnr = linenr-1;
if (tabselnr<=2){box[tabselnr].className="selected1";}
if (tabselnr>2 && tabselnr<=5){box[tabselnr].className="selected2";}
if (tabselnr==6){box[tabselnr].className="selected3";}

    for (j = 1; j < 10; j++) {
    for (i = 1; i < 8; i++) {
    document.getElementById("list"+j+"n"+i).style.display = "none";
    document.getElementById("it"+j+"n"+i).style.display = "none";}
    document.getElementById("list"+j+"n"+linenr).style.display = "block";
    document.getElementById("it"+1+"n"+linenr).style.display = "block";}

} 
```

这是从 init() 函数调用的 highlightlistinitiate 函数：

```
function highlightlistinitiate(divnr,linenr) {
   var box = document.getElementById("listmenu").getElementsByTagName("a");
current_list__gl_var=linenr;
   for (i = 0; i < box.length; i++) {
    box[i].className="unselected";}
    box[linenr-1].className="selected";
        for (j = 1; j < 10; j++) {
    for (i = 1; i < 8; i++) {
    document.getElementById("it"+j+"n"+i).style.display = "none";}}
    document.getElementById("it"+current_list__gl_var+"n"+current_tab__gl_var).style.display = "block";
    } 
```

这是从 highlightboxinitiate 函数调用的 getvariables 函数：

```
function getvariables(){
counttab__gl_var = new Array (7);
settab__gl_var = new Array (7);
counttab__gl_var [1] = 83; settab__gl_var [1] = 0; activetab__gl_var = 2; counttab__gl_var [2] = 111; settab__gl_var [2] = 0; activetab__gl_var = 2; counttab__gl_var [3] = 137; settab__gl_var [3] = 0; activetab__gl_var = 2; counttab__gl_var [4] = 1; settab__gl_var [4] = 0; activetab__gl_var = 2; counttab__gl_var [5] = 1; settab__gl_var [5] = 0; activetab__gl_var = 2; counttab__gl_var [6] = 1; settab__gl_var [6] = 0; activetab__gl_var = 2; counttab__gl_var [7] = 1; settab__gl_var [7] = 0; activetab__gl_var = 2; } 
```

我的印象是函数没问题，因为当页面没有正确启动时，init() 函数中的第一条语句没有执行。

我检查了跨浏览器没有影响这个问题。所有浏览器都会出现此问题。

发生错误时，我在 firebug 控制台中看不到任何错误消息。

我一直在搜索和调试很多，所以任何帮助都将受到欢迎和赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:33:07.320

你可以试试

```
<script type="text/javascript">
   $(window).load(function() {
      init();
   });
</script> 
```

代替

```
<script type="text/javascript">
   $(document).ready(function() {
      init();
   });
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T17:32:50.620

问题在于，不知何故，并非所有内容都加载到页面中，因此 javascript 崩溃了，因为它找不到所有对象。

页面末尾的以下语句有助于解决此问题：

```
<?php
print str_pad('',4096)."\n";
ob_flush();
flush();
set_time_limit(45);
?> 
```

以上将在该语句之前解析的所有内容发送到浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:40:02.170

您应该使用 $(document).ready 而不是 $(window).load。

这是因为 $(window).load 仅在整个页面完全加载时触发，包括（外部）图像/javascript/css/frames 等。 $(document).ready 在 DOM 完全加载时触发。这意味着您已经可以进行 DOM 操作，而无需等待加载图像等。

# c - 这两种说法有什么区别？

> ID：10062767
> 
> 赞同：1
> 
> 时间：2012-04-08T12:23:43.753
> 
> 标签：c, arrays, pointers

我有这两个陈述：

```
printf("%u",a+1); 
```

和

```
printf("%u",(int *)a+1); 
```

实际上，当我遇到这种困惑时，我正在编写此代码。

```
#include<stdio.h>

int main()
{
  int a[2][2]={1,2,3,4};
  int i,j;
  int *p[] = { (int*)a, (int*)a+1, (int*)a+2 };
  for(i=0; i<2; i++){
    for(j=0; j<2; j++){
      printf("%d %d %d %d",* (*(p+i)+j), *(*(j+p)+i), *(*(i+p)+j), *(*(p+j)+i));
    }
  }
  return 0; 
}

Output:

1 1 1 1
2 2 2 2
2 2 2 2
3 3 3 3 
```

为了理解上述程序的输出，我知道如果我知道上述两个语句之间的区别，那么产生这个输出的区别就可以解决。

我目前的理解： `(a+1)`会给我数组第二个元素的地址。在这种情况下，一个二维数组可以可视化为 2 个一维数组，每个数组有 2 个元素。所以`(a+1)`会给我地址`a[1][0]`，但是为什么`(int *)a+1`给我地址`a[0][1]`呢？

请解释程序的区别和输出。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:48:39.733

成语`(int*)a+1`被解释为`((int*)a) + 1)`。也就是说，演员阵容优先于加法。因此，它的计算结果为`(int*) a)`，它是数组的地址，为 ptr-to-int，偏移 1，返回数组中的第二个元素 ( `2`)。

编程的两个关键规则：

**规则 1：***编写*代码时，让布局反映功能。
**规则 2：***阅读*代码时，请阅读功能，而不是布局。（推论：调试*代码*，而不是*注释*。）

从概念上讲，当您声明

```
int a[2][2]={1,2,3,4}; 
```

你设想一个像这样的二维数组：

```
 1 2
  3 4 
```

但 C 实际上将数据存储在连续的内存块中，如下所示：

```
 1 2 3 4 
```

它在计算索引时“记住”数据代表一个 2×2 数组。但是当你`a`从它的原始类型转换为 时`int *`，你是在告诉编译器忘记它的原始声明，实际上失去了它的二维性并变成了一个简单的`int`s 向量。

以下是如何理解 的声明`p`：

```
int *p[] = { (int*) a,  (int*) a+1,     (int*) a+2 };     // As written
int *p[] = { (int*) a,  ((int*) a) + 1, ((int*) a) + 2 }; // As interpreted
int *p[] = { &a[0][0],  &a[0][1],       &a[1][0] };       // Resulting values 
```

从这里，您可以看到它`p`是一个一维向量数组：

```
p[0] = { 1, 2, 3 }
p[1] = { 2, 3 }
p[2] = { 3 } 
```

如果您认识到这一点`(p+i) == (i+p)`，那么最后两项与该行中的前两项相同

```
printf("%d %d %d %d\n",* (*(p+i)+j), *(*(j+p)+i), *(*(i+p)+j), *(*(p+j)+i)); 
```

这相当于：

```
printf("%d %d %d %d\n", p[i+j], p[j+i], p[i+j], p[j+i]); 
```

* * *

有趣的是，因为以下都是等价的：

```
a[i]
*(a+i)
*(i+a) 
```

那么写`i[a]`代表相同的值是完全合法的。换句话说，编译器允许您编写

```
printf("%d %d %d %d\n", p[i], i[p], p[1], 1[p]); 
```

当然，你的技术主管最好*不要*让你写那个。如果你在我的小组里写这个，你就会被解雇。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:30:54.863

无，两者都会产生未定义的行为。打印指针值的正确格式是`%p`. 将指针`void*`发送到`printf`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T12:31:37.597

多维 C 数组的行为类似于彼此相邻布置的一维数组。因此，如果您`a`（通常`(int **)`）`(int *)`将`a[0]`. 因此`(int *) a + 1`是`&a[0][1]`。否则你的理解是正确的，这就是为什么`a + 1`得到你`&a[1][0]`。

（此行为由标准指定；但这并不能使其成为良好的编程习惯。）

# javascript - 未捕获的类型错误：无法读取属性纬度

> ID：10062768
> 
> 赞同：1
> 
> 时间：2012-04-08T12:23:58.520
> 
> 标签：javascript, html, position

这是我编写的函数的一部分

```
 watchlocation: function() {
            console.log("watchlocation Started");
            if (watchProcess == null) {
                watchProcess = navigator.geolocation.watchPosition(locationcheck.handle_geolocation_query_success, locationcheck.handle_errors, {enableHighAccuracy:true});
            }                       
              if(position.coords.latitude == null) {
                  var Lat = '52.5960';
                  console.log("latitude Set Manually");
              }
              else {
                  var Lat = position.coords.latitude;
                  console.log("latitude Set Automatically");                         
              };

              if(position.coords.longitude == null) {
                  var lon = '-1.9110';
                  console.log("longitude Set Manually");
              }
              else {
                  var lon = position.coords.longitude;   
                  console.log("longitude Set Automatically");
              };
              locationcheck.handle_geolocation_query_successalt(position.coords.latitude,position.coords.longitude);
              console.log("watchlocation Position Passed");  
     }, 
```

每次我尝试访问 position.coords.latitude 或 position.coords.longitude 控制台都会说

> '未捕获的类型错误：无法读取未定义的属性'纬度''和'未捕获的类型错误：无法读取未定义的属性'经度'

我在这里尝试做的最终结果是通过 HTLM5 标准获取当前位置，如果这不起作用替换 lat lon 全局变量。

我怀疑这可能取决于我的方法，因为我仍在学习做事的最佳方法，因为我之前已经能够访问 position.coords.latitude,position.coords.longitude 作为警报框的一部分。

TIA

人族

编辑 Jörn Berkefelds 评论说我有 var postion = ""; 其他正确的地方-我将其删除并解决了问题。

吨

# c++ - 计算动画时间 Qt

> ID：10062771
> 
> 赞同：0
> 
> 时间：2012-04-08T12:24:27.043
> 
> 标签：c++, qt, animation

首先，我对 Qt 相当陌生。我确实在寻找答案，但没有找到与我的问题类似的任何东西。我正在使用每 50 毫秒超时的计时器和

```
connect(timer,SIGNAL(timeout()),scene,SLOT(advance())); 
```

动画一个圆形矩形（我自己的绘制矩形并每次都更改其坐标的类`advance`被调用），直到它在 a 上完成一个完整的圆`QGraphicsView`。

有没有办法测量动画完成所需的时间？基本上我按下按钮，动画开始，矩形完成圆圈，我需要输出它这样做所花费的时间。我知道我可以使用 QTime 来计算时间，但我不明白应该把它放在哪里，因为它使用了信号槽机制和计时器。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:45:31.100

如果我正确理解了您的问题，并且您只是想测量绘制动画所花费的时间，而不是绘制动画所花费的*实际*时间，那么您的任务非常简单。

如果计时器每 50 毫秒超时，那么如果您计算绘制动画所用的步数，并将其乘以 50 毫秒，您就有了完整的时间。

如果你的 advance() 函数每次都按固定的弧度步进，那么你不需要计算任何东西。你事先知道需要多少时间。它可以很容易地计算如下：

```
t = StepTime * (2 * pi) / StepAngle 
```

如果步距角以弧度为单位，或者

```
t = StepTime * (360)/StepAngle 
```

如果步距角以度为单位。

# qt - 从 QFile 的返回行中拆分 QString

> ID：10062772
> 
> 赞同：1
> 
> 时间：2012-04-08T12:24:50.943
> 
> 标签：qt, qt4, qstring, qfile

如何拆分从文件中获取的此类文本？

```
USA Florida
Russia Murmansk
Germany Bonn 
```

In USA,Florida,Russia,Murmansk ... 每个单词都应该保存在一个 QString 中。基本上我是这样做的：

```
QFile df("../MyData/visit.DAT");

    if (!df.open(QIODevice::ReadOnly | QIODevice::Text)) {

        qDebug()<<"Could not open file for reading";
        return;
    }

    QTextStream txStream(&df);
    while (!txStream.atEnd()) {

        QString text = txStream.readLine();
        QStringList splitD = text.split(" ");
        qDebug() << "-"<<splitD;
    }

    dataFile.close(); 
```

当我尝试从 QStringList 中获取价值时，`.value(index)`我得到的两个词都在同一行。如何以正确的方式拆分这些单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:05:59.523

您可以使用运算符 » 也可以拆分。运算符 » 也可以连接。因此，您可以执行以下操作：

```
QString country, city;
txStream » country » city; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:36:26.197

I figure it out , by passing tab character in split method, so in `QStringList` will be returned two words from line, accesing them without crashing app.

```
 QTextStream txStream(&df);
    while (!txStream.atEnd()) {

        QString text = txStream.readLine();
        QStringList splitD = text.split("\t");

        if (i%2==0) {

            qDebug() << "Country : "<<splitD.at(0);
            i++;

        } else {

           qDebug() << "City : "<<splitD.at(1);
            i++;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:32:14.577

您将整个列表“splitData”放到 qDebug 中。这包含两个项目“美国”和“佛罗里达”。您的代码很可能按照您希望的方式工作，但您误解了输出。尝试：

```
qDebug() << splitData.at(0);
qDebug() << splitData.at(1); 
```

这应该给你两行：

```
USA
Florida 
```

# ios - 从详细视图控制器访问主视图控制器中定义的数组

> ID：10062773
> 
> 赞同：0
> 
> 时间：2012-04-08T12:25:01.490
> 
> 标签：ios, xcode, ipad

我在 xCode 中有一个详细的应用程序。在主视图控制器中定义了一个数组。在详细视图控制器中，根据该数组中的一个条目，有详细信息。

是否可以从 Detail View Controller 访问数组并更新它们？

如何将数组的引用从主视图控制器传递到详细视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:04:24.793

在细节控制器中放置一个属性来保存数组。然后以您现在用于传递单个条目的任何方法传递数组引用，didSelectRowAtIndexPath: 用于基于 xib 的应用程序或 prepareForSegue: 如果您有情节提要。

# vb.net - 自定义控件中的属性组

> ID：10062778
> 
> 赞同：0
> 
> 时间：2012-04-08T12:25:49.897
> 
> 标签：vb.net, vb.net-2010

我想要的是一个类似于 Font 属性的属性，它具有“名称”、“大小”、“单位”、“粗体”和其他属性。我在帖子（http://stackoverflow.com/questions/755391/group-properties-in-a-custom-control）中尝试了解决方案，但它不起作用......

我尝试了这样的解决方案：

```
<TypeConverter(GetType(ExpandableObjectConverter))> _
Class TestingClass
'Some property here
End Class 
```

但它不起作用......代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:40:40.383

你的意思是一个对象的属性？例如：一个按钮有一个forecolor的属性，那么它可以写成：button.forecolor来访问它？所以你需要的是一个带有一些代码的类（我想是的）（我不能为你写......我在VB6中......）

请参阅此处的代码示例： http: [//developer.51cto.com/art/200910/156822.htm](http://developer.51cto.com/art/200910/156822.htm) 我认为这就是您所需要的...

# html-entities - 使用 libxml 保留 HTML 实体

> ID：10062780
> 
> 赞同：2
> 
> 时间：2012-04-08T12:25:59.693
> 
> 标签：html-entities, libxml2

我正在编写一种方法来解析 HTML 字符串，查询并获取一些节点，然后为这些节点输出 HTML。

我正在使用**libxml**，并设法加载和解析输入 HTML，并为我想要的节点输出 HTML 字符串，除了我想要保留任何 HTML 实体，并且 libxml 似乎将这些转换为它们关联的 UTF-8人物。

这是我到目前为止所得到的（代码是 Objective-C 项目的一部分）：

```
NSString *HTMLString = ...
NSData *documentData = [HTMLString dataUsingEncoding:NSUTF8StringEncoding];

//Create the document
xmlDocPtr doc = htmlReadMemory([documentData bytes],
                               [documentData length],
                               "",
                               NULL,
                               HTML_PARSE_NOWARNING | HTML_PARSE_NOERROR);

//Get the node I want to output
xmlNodePtr node = ...

//Create the node buffer and fill it with the node content
xmlBufferPtr nodeBuffer = xmlBufferCreate();
htmlNodeDump(nodeBuffer, doc, node);

... 
```

这可以很好地转储节点的 HTML 内容，除了字符实体被转换为 UTF-8 字符 - 输入 HTML 中唯一存在的实体是引号，例如`&rsquo;`和`&lsquo;`，当我写出节点的 HTML 时我希望保留它内容。

我查看了与 HTML 解析和 HTML 树函数相关的 libxml 文档，但似乎找不到任何有关 HTML 实体的信息。我也不确定这是否是在解析或输出期间完成的。我确实尝试使用简单地输出节点的内容，`xmlNodeGetContent()`并且实体也被相应的 UTF8 字符替换，这让我怀疑这是一个解析问题，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:42:54.203

事实证明，问题在于 libxml 在内部使用 UTF-8（在 xmlsoft 的 [编码支持](http://xmlsoft.org/encoding.html)中解释），它将所有 HTML 字符实体转换为 UTF-8 字符，因此在输出 HTML 时会将这些保留为转换后的 UTF-8人物。

该解决方案还在 xmlsoft 的“默认支持的编码”下的编码部分中提供：

> libxml2 有一组用于以下编码的默认转换器（位于 encoding.c 中）：
> 
> 1.  默认支持 UTF-8（空处理程序）
> 2.  UTF-16，小端和大端
> 3.  ISO-Latin-1 (ISO-8859-1) 涵盖大多数西方语言
> 4.  ASCII，主要用于保存
> 5.  **HTML，用于将 UTF-8 转换为 ASCII 的特定处理程序，其中包含 HTML 预定义实体，例如 © 版权标志。**

它还建议使用转换函数 'like `UTF8Toisolat1`' 将从 libxml 函数返回的值转换为另一种编码。

[`UTF8ToHtml()`](http://xmlsoft.org/html/libxml-HTMLparser.html#UTF8ToHtml)解决方案是使用将非 ASCII 字符替换为相关 HTML 实体（例如`&rsquo;`或`&lsquo;`）的函数转换 HTML 输出。这似乎使 HTML 标记`<`和`>`字符保持不变，这与我尝试用和`htmlEncodeEntities()`替换它们时不同。`&lt;``&gt;`

使用时我没有解决的一件事`UTF8ToHtml()`是如何确定为输出缓冲区分配多少内存，因为用实体替换单个字符会增加 HTML 字符串的长度，所以你不能只使用输入 HTML 的长度. 我只是分配了两倍大小的输入缓冲区（我想这对于我的所有用例来说应该足够了），然后使用了实际使用的长度（通过 in 中的指针参数返回`UTF8ToHtml()`），但我不确定是否有更好的方法来做到这一点。

# objective-c - 使用图像和透明度自定义 UITabBar

> ID：10062784
> 
> 赞同：0
> 
> 时间：2012-04-08T12:26:49.630
> 
> 标签：objective-c, ios, cocoa-touch, ios4

对于 iOS 4，我如何自定义 UITabBar 来构建这样的东西？

[http://prntscr.com/7vuvj](http://prntscr.com/7vuvj)

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T00:42:56.293

我最近做了一个教程，向您展示如何创建自己的侧标签栏，可以使用自定义 segue[在此处实现此效果。](http://www.scott-sherwood.com/?p=777)它相对简单，使这种效果非常容易实现。希望这有助于让我知道你的进展情况。

编辑：这是为 iOS 4.0 完成的教程的[演示代码，希望对您有所帮助。](http://www.scott-sherwood.com/wp-content/uploads/2012/04/DemoTabBar4.0.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:51:14.940

这主要是一些精美的 UI 图像，但对于凸起的中心选项卡，[RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)项目处理得非常好。

# objective-c - 当 XML 为空时，xcode 崩溃 - 可以插入虚拟对象吗？

> ID：10062786
> 
> 赞同：0
> 
> 时间：2012-04-08T12:27:06.090
> 
> 标签：objective-c, ios, xml

我得到了更多一般性的问题。我有一个带有按钮和标签的普通视图，而不是一个 tableview。每人三个。如果我的数据库中恰好有三个对象并将它们解析为 XML，VC 会向我显示它们。但是如果我在 XML 中只有两个对象，xcode 会崩溃，因为

```
'*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array' 
```

这是有道理的，因为一个标签/按钮虽然预期三个，但仍为空。我尝试通过告诉它仅在对象存在时填充按钮和标签来解决问题。

```
if ( object1 != nil) 
```

但这可能太容易了。我正在考虑将虚拟对象放入我的数据库中。然后，每次当真正的人进来时，我都必须删除它们，反之亦然。

那么也许也遇到了这个问题并且有解决方案或想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:46:03.727

你为什么要把问题复杂化？检查 nil 是一个完全可以接受的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:04:47.097

检查 nil 是一个很好的方法。如果您的数组已初始化且为空，那么您还需要检查计数。

像这样：

```
if( (array != nil) && ([array count] > 0) ) {
    //do something
} 
```

# python - 我将 djang1.3.1 更新为 djang1.4，错误：MOD_PYTHON ERROR

> ID：10062790
> 
> 赞同：2
> 
> 时间：2012-04-08T12:28:09.470
> 
> 标签：python, django, mod-python

我将 djang1.3.1 更新为 djang1.4。
在我当地的环境中，这很好。
但是当我将我的代码输入服务器时，发生了错误！
在我的服务器中，我可以使用'python manage.py shell'
并可以'import settings'，没关系，
但仍然有这个错误，谁能帮助我！

> 最后，我卸载了apache，安装了nginx + uwsgi，解决了这个问题......

```
Traceback (most recent call last):

File "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1537, in HandlerDispatch
default=default_handler, arg=req, silent=hlist.silent)

File "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1229, in _process_target
result = _execute_target(config, req, object, arg)

File "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1128, in _execute_target
result = object(arg)

File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/modpython.py", line 180, in handler
return ModPythonHandler()(req)

File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/modpython.py", line 142, in __call__
self.load_middleware()

File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
for middleware_path in settings.MIDDLEWARE_CLASSES:

File "/usr/local/lib/python2.6/dist-packages/django/utils/functional.py", line 184, in inner
self._setup()

File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 42, in _setup
self._wrapped = Settings(settings_module)

File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 95, in __init__
raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))

ImportError: Could not import settings 'guihuame.settings' (Is it on sys.path?): No module named guihuame.settings 
```

我的python版本

```
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> django.VERSION
(1, 4, 0, 'final', 0) 
```

使用管理.py

```
python manage.py shell
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> import settings
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named settings
>>> import guihuame.settings
>>> 
```

谢谢！

我的文档树是
guihuame
-- manage.py
-- guihuame (包含**init** .py wsgi.py settings.py urls.py)
-- 其他应用

我的 wsgi.py 、 wsgi.py 和 settings.py 在同一个文件夹中

```
import os
import sys
sys.path.insert(0, '/var/web/trunk/guihuame/')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "guihuame.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:41:51.723

您需要添加一行以`wsgi.py`将`guihuame`模块的位置添加到 PYTHONPATH：

```
import sys
sys.path.insert(0, 'Wherever guihuame is') 
```

更新：由您实际提供`guihame`. 但是，不要对路径进行字符串操作。Python 将选择正确的分隔符。如果有问题，请使用`normpath`.

另请注意，这`os.path.split(os.path.dirname(__file__))[0]`是选择您的文件系统根目录，或者更有可能只选择它的下一级。这可能不是你想要的。

# sparql - 查询的结果是一个资源 URI

> ID：10062792
> 
> 赞同：1
> 
> 时间：2012-04-08T12:28:32.933
> 
> 标签：sparql

我目前正在尝试学习如何使用**DBPedia**上的资源使用 SPARQL 查询 RDF 数据并尝试使用[Virtuoso SPARQL 查询编辑器](http://live.dbpedia.org/sparql)，但我似乎误解了一些东西。

例如，我试图找出低俗小说的导演姓名，使用这个资源 : `http://dbpedia.org/resource/Pulp_Fiction`，所以我的（简单）查询是：

```
SELECT ?dirName
FROM <http://dbpedia.org/resource/Pulp_Fiction>
WHERE 
{ 
     ?s <http://dbpedia.org/property/director> ?dirName.
} 
```

它可以工作，但结果是一个 URI 资源 : `http://dbpedia.org/resource/Quentin_Tarantino`。现在我想检索导演的出生名，所以我尝试了

```
SELECT ?dirRes ?dirName 
FROM <http://dbpedia.org/resource/Pulp_Fiction>
WHERE 
{ 
    ?s      <http://dbpedia.org/property/director>  ?dirRes. 
    ?dirRes <http://dbpedia.org/ontology/birthDate> ?dirName.
} 
```

没有成功，结果是一个空数组......

有人可以帮我弄这个吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T13:05:55.230

该`FROM`部分选择您要查询的数据库，而不是实体。

请记住，RDF 由具有主-谓-宾结构的三元组组成。您正在寻找：

```
Pulp_Fiction director ?director 
```

所以让我们查询一下：

```
SELECT * {
  <http://dbpedia.org/resource/Pulp_Fiction> <http://dbpedia.org/property/director> ?director.
} 
```

现在要获取`?director`资源的属性，请在查询中添加更多三元组：

```
SELECT * {
  <http://dbpedia.org/resource/Pulp_Fiction> <http://dbpedia.org/property/director> ?director.
  ?director <http://dbpedia.org/ontology/birthDate> ?birthdate.
} 
```

您可以使用预定义的前缀而不是完整的`<...>`URI 来缩短查询。您可以通过单击右上角的“命名空间前缀”来获取列表。如果您可以在使用`dbpprop`和之间进行选择`dbpedia-owl`，请始终使用后者，因为该命名空间中的类和属性得到了更好的管理。结果：

```
SELECT * {
  dbpedia:Pulp_Fiction dbpedia-owl:director ?director.
  ?director dbpedia-owl:birthDate ?birthdate.
} 
```

# algorithm - 词生成算法？

> ID：10062793
> 
> 赞同：3
> 
> 时间：2012-04-08T12:28:48.160
> 
> 标签：algorithm, word, generator

我是该网站的新手。如果可能的话，希望得到一些帮助。

我想要一种算法，在您输入可用字母和单词长度后计算单词列表。我正在向我的网站添加一个 Draw Something 解决方案部分。我是一名网络开发人员，对 XHTML、CSS 和一些 JS 有丰富的知识，但仅此而已，我认为如果不使用更强大的东西（如 python 或 C++）就无法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:51:03.957

在 javascript 中，可在浏览器中运行：

```
vocabulary = ['start', 'tarts', 'stars', 'rats', 'tears']  // ...etc. read from a file

function letters(word) {
    return word.split('');
}

function possibleWords(length, allowedLetters) {
    var isAllowedLetter = function(letter) {
        return allowedLetters.indexOf(letter) != -1;  // allowedLetters contains letter
    };
    return vocabulary.filter(function(word) {
        return word.length==length && letters(word).every(isAllowedLetter);
    })
} 
```

演示：

```
> possibleWords(5, ['s','t','a','r'])
["start", "tarts", "stars"] 
```

* * *

为了提高效率，您可以：

```
vocabulary = ['start', 'tarts', 'stars', 'rats', 'tears']  // ...etc. read from a file

function letters(word) {
    return word.split('');
}

function set(iterable) {
    var data = {};
    iterable.forEach(function(x) {
        data[x] = true;
    });
    return {
        contains: function(x) {
            return !(data[x]===undefined);
        }
    };
}

function possibleWords(length, allowedLetters) {
    var isAllowedLetter = allowedLetters.contains;
    return vocabulary.filter(function(word) {
        return word.length==length && letters(word).every(isAllowedLetter);
    })
} 
```

演示：

```
> possibleWords(5, set(['s','t','a','r']))
["start", "tarts", "stars"] 
```

# c++ - 错误：未在此范围内声明“wcsncasecmp”

> ID：10062794
> 
> 赞同：2
> 
> 时间：2012-04-08T12:28:55.260
> 
> 标签：c++, c, macos, g++

我在 c/c++ 应用程序中使用 wcsncasecmp。

编译有以下错误：

```
error: 'wcsncasecmp' was not declared in this scope 
```

GCC 4.2.1，macOS。

如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:33:17.800

`wcsncasecmp`是一个 GNU 特定的函数。它在 Mac OS X 上不可用。

# ruby-on-rails - Formtastic :country 产生错误

> ID：10062801
> 
> 赞同：0
> 
> 时间：2012-04-08T12:30:37.307
> 
> 标签：ruby-on-rails, formtastic

我在表单中使用了formastic，以下字段导致错误 * *Formtastic::UnknownInputError **：

```
<%= f.input :country %> 
```

当我覆盖 Formtastic 默认值并将该行显示为字符串时，它运行良好。

```
<%= f.input :country, :as => :string%> 
```

我安装了 formtastic-2.0.2 并包含了 country-select-1.1.0 gem。

我正在使用 Rails 3.1

谢谢你的帮助！

# objective-c - 使用 segue 将数据传递到另一个 DetailTableViewController 的问题

> ID：10062806
> 
> 赞同：1
> 
> 时间：2012-04-08T12:31:30.660
> 
> 标签：objective-c, ios, segue, drilldown

我想在 Storyboard 中使用 segue (ShowADVDetail) 将数据从 TableViewController 单元格传递到 DetailViewContoller (UITableViewController)。

我有一个 NSMutableArray 'stories' 包含一个解析的 RSS 提要。

我正在使用以下 prepareForSegue，它传递单元格的“标题”值：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
        { 
            if ([segue.identifier isEqualToString:@"ShowADVDetail"]) {

                NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow]; 
                int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
                NSString *theTitle = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
                [[segue destinationViewController] setDetailItem:theTitle];

            }
    } 
```

通过以下行，我可以传递特定单元格的“标题”值。

```
NSString *theTitle = [[stories objectAtIndex: storyIndex] objectForKey: @"title"]; 
```

我还可以像这样访问“描述”值和“链接”值：

```
NSString *theDescription = [[stories objectAtIndex: storyIndex] objectForKey: @"description"];
NSString *theLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"]; 
```

但是如何在我的 segue 中传递所有 3 个值？

到目前为止，我的 didSelectRowAtIndexPath 看起来像这样：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:NO]

        [self performSegueWithIdentifier:@"ShowADVDetail" sender:self];

} 
```

希望这有意义..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:11:13.927

我想我理解你的问题是对的。您可以通过在头文件（detailviewcontroller）中为要传递的属性创建属性来实现此目的。

因此，您的 detailViewController 标头将如下所示：

```
@interface DetailListViewController : UIViewController
  @property (strong, nonatomic) NSString *storyName;
  @property (strong, nonatomic) NSString *storyDescription;
  ...
@end 
```

然后在你的故事板中，你可以控制拖拽segue从你的tableview到detailViewController。

在您的 tableviewcontroller 中导入您的 detailViewController.h 文件并添加如下代码：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
  NSIndexPath *indexPath = self.tableView.indexPathForSelectedRow;
  [segue.destinationViewController setStoryName:###however you get name###;
  [segue.destinationViewController setStoryDescription:###however you get desc###;
} 
```

在此代码中，您可以添加检查“如果 segue.identifier...”

# c - 我无法在 C 中读取文件

> ID：10062808
> 
> 赞同：-1
> 
> 时间：2012-04-08T12:31:38.917
> 
> 标签：c, readfile

我是一名学生，现在我用 C 语言开发小型处理器模型。处理器必须执行的程序在文件中。现在我尝试编写一个程序，该程序将从文件中读取一些内容。这没用！我在 Ubuntu 10.04 中工作并在 GVIM 中编写代码。我的程序有一个档案：http: [//dl.dropbox.com/u/48293648/testfolder.tar.bz2](http://dl.dropbox.com/u/48293648/testfolder.tar.bz2) 错误：在控制台中我只看到“1”符号，而不是“hello world”代码

```
#include <stdio.h>
#define DEBUG 0

void main(void)
{
FILE *f;
int c;
f = fopen("text.txt", "r");
if(f == NULL)
    printf("ERROR opening file");
while( (c=getc(f) != EOF))
    {
        printf("%6x\n",c);
    };
fclose(f);
#if DEBUG
printf("DEBUG\n");
#endif
printf("ololo\n");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:35:56.813

`while( (c=getc(f) != EOF))`在错误的地方有括号；您分配`c`给`getc(f) != EOF`.

`(FILE *)`（另外，如果失败，为什么程序只是以无效继续`fopen()`？最可能的结果是核心转储。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:46:33.250

while( (c=getc(f)) != EOF) 会很好用，仅供参考

# c# - 带有文本和值的 C# 组合框

> ID：10062810
> 
> 赞同：22
> 
> 时间：2012-04-08T12:31:46.760
> 
> 标签：c#, winforms, combobox

> **可能重复：**
> [带有标签和值的 C# Winforms 组合框](https://stackoverflow.com/questions/2023316/c-sharp-winforms-combobox-with-label-and-value)

一种方法如何在 ComboBox 中存储显示值和实际值？

即，组合框显示：

*   毁灭世界
*   火弹弓
*   召唤克苏鲁

但检索到的值为：

*   dw
*   ss
*   sc

我希望能够以类似于以下方式检索所选项目的值：

```
string selectedValue = combobox1.SelectedValue 
```

### 更新代码以响应答案：

```
Dictionary<string, string> filterItems = new Dictionary<string, string>
{
    {"Destroy World", "dw"},
    {"Fire Slingshot", "fs"},
    {"Summon Cthulu", "sc"},
};
this.options_filterby.DataSource = new BindingSource(filterItems, null);
this.options_filterby.DisplayMember = "Key";
this.options_filterby.ValueMember = "Value"; 
```

现在由于某种原因，尽管 DisplayMembers 绝对没问题，但 ValueMembers 返回字典对象。更奇怪的是，一段时间后，ValueMembers 最终会按预期返回字符串。

```
private void options_filterby_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show(options_filterby.SelectedValue.ToString());
} 
```

这会在我更改 ComboBox 的选定项的前几次返回字典，但最终会根据需要返回字符串。

### 更新：已修复（无法添加为解决方案，因为问题已关闭）

针对上述问题，修复方法是在DataSource*之前设置DisplayMember和ValueMember属性。*我认为这是一个错误。代码应为：

```
this.options_filterby.DisplayMember = "Key";
this.options_filterby.ValueMember = "Value";
this.options_filterby.DataSource = new BindingSource(filterItems, null); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T13:04:58.350

您使用`DisplayMember`and`ValueMember`来确定 ComboBox 将显示什么，以及将从`SelectedValue`. 当您设置该`DataSource`属性时，ComboBox 将使用描述的属性`DisplayMember`向用户呈现一个字符串。

*   [数据源](http://msdn.microsoft.com/en-us/library/x8160f6f.aspx)
*   [显示成员](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)
*   [价值会员](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)

* * *

像这样的东西

```
public class Item {
  string Name { get; set; }
  string Value { get; set; }
}

ComboBox box = new ComboBox();
box.DisplayMember = "Name";
box.ValueMember = "Value";
box.DataSource = new [] { new Item() { "Test", "test" } }; 
```

如果您不设置`ValueMember`，则返回实际的 Item ，并且如果您不设置`DisplayMember`，则 items`ToString()`方法将用于获取呈现给用户的字符串。

* * *

我不确定这是否可行，或者它是否会改变你所拥有的，但你至少可以尝试一下:) 问题是，我不确定当 BindingSource 将字典作为其数据源时会做什么。我想它把它当作一个`IEnumerable<KeyValuePair<>>`虽然，所以你的代码应该可以工作，但是，它没有，所以也许这会......

```
BindingSource source = new BindingSource();
source.DataSource = typeof(KeyValuePair<string, string>);
foreach (KeyValuePair<string, string> pair in filterItems) {
    source.Add(pair);
}
options_filterby = source; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-08T12:50:46.297

ComboBox.Items 集合存储*对象*类型的值。所以它可以存储你想要的任何类型。它从对象的 ToString() 方法生成*显示值。*要获得*实际*值，只需将对象转换为您的类的类型。

# css - 我可以根据基于百分比的宽度设置 div 的高度吗？

> ID：10062811
> 
> 赞同：122
> 
> 时间：2012-04-08T12:31:49.840
> 
> 标签：css

假设我有一个宽度为身体 50% 的 div。如何使其高度等于该值？这样当浏览器窗口宽度为 1000px 时，div 的高度和宽度都是 500px。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-10-17T00:13:55.493

这实际上可以只用 CSS 完成，但 div 内的内容必须绝对定位。关键是使用填充百分比和`box-sizing: border-box`CSS 属性：

```
div {
  border: 1px solid red;
  width: 40%;
  padding: 40%;
  box-sizing: border-box;
  position: relative;
}
p {
  position: absolute;
  top: 0;
  left: 0;
}
```

```
<div>
  <p>Some unnecessary content.</p>
</div>
```

根据自己的喜好调整百分比。这是一个**[JSFiddle](http://jsfiddle.net/fadi/QzVF9/)**

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-08T12:41:10.530

这可以通过 CSS hack 来完成（请参阅其他答案），但也可以使用 JavaScript 轻松完成。

将 div 的宽度设置为（例如）50%，使用 JavaScript 检查其宽度，然后相应地设置高度。下面是一个使用 jQuery 的代码示例：

```
$(function() {
    var div = $('#dynamicheight');
    var width = div.width();

    div.css('height', width);
});
```

```
#dynamicheight
{
    width: 50%;

    /* Just for looks: */
    background-color: cornflowerblue;
    margin: 25px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div id="dynamicheight"></div>
```

如果您希望框在调整大小时随浏览器窗口缩放，请将代码移动到一个函数并在窗口调整大小事件上调用它。这也是一个演示（查看示例全屏并调整浏览器窗口大小）：

```
$(window).ready(updateHeight);
$(window).resize(updateHeight);

function updateHeight()
{
    var div = $('#dynamicheight');
    var width = div.width();

    div.css('height', width);
}
```

```
#dynamicheight
{
    width: 50%;

    /* Just for looks: */
    background-color: cornflowerblue;
    margin: 25px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div id="dynamicheight"></div>
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-13T08:39:42.140

```
<div><p>some unnecessary content</p></div>

div{
    border: 1px solid red;
    width: 40%;
    padding: 40%;
    box-sizing: border-box;
    position: relative;
}
p{
    position: absolute;
    top: 0;
    left: 0;
} 
```

为此，我认为您需要将填充定义为 ex。最佳？像这样：

```
<div><p>some unnecessary content</p></div>

div{
    border: 1px solid red;
    width: 40%;
    padding-top: 40%;
    box-sizing: border-box;
    position: relative;
}
p{
    position: absolute;
    top: 0;
    left: 0;
} 
```

无论如何，这就是我让它工作的方式，因为只是在周围填充它不会是一个正方形。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-11-05T14:23:32.423

我对此做了一个 CSS 方法，它由视口宽度调整大小，但在视口高度的 100% 处最大化。它不需要`box-sizing:border-box`. 如果无法使用伪元素，则可以将伪代码的 CSS 应用于子元素。[演示](http://jsfiddle.net/QzVF9/1209/)

```
.container {
  position: relative;
  max-width:100vh;
  max-height:100%;
  margin:0 auto;
  overflow: hidden;
}
.container:before {
  content: "";
  display: block;
  margin-top: 100%;
}
.child {
  position: absolute;
  top: 0;
  left: 0;
} 
```

[视口单位的支持表](http://caniuse.com/#search=viewport%20units)

[我在一篇关于缩放响应式动画](https://css-tricks.com/scaling-responsive-animations/)的 CSS-Tricks 文章中写了关于这种方法和其他方法的文章，你应该看看。

# algorithm - 偶数路径算法-DFS

> ID：10062814
> 
> 赞同：3
> 
> 时间：2012-04-08T12:32:02.703
> 
> 标签：algorithm, data-structures, graph

首先，我不会撒谎。这是我的作业。我试图解决这个问题太多小时，但我不知道。

我需要编写算法（高效）来找到从给定顶点到所有其他顶点的具有均匀长度路径的所有顶点。

我知道它可能与 DFS 用途有关...

请给我一些指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:49:33.243

由于是作业，我只提供一些提示：

1.  如果您在不维护集合的情况下执行 DFS 达到一定深度`visited`- 您“发现”的所有顶点都有来自源的路径，长度等于当前深度。
2.  如果你做一个 DFS 到 depth `2|V|`，那么所有从源头开始的路径长度相等的顶点都将在某个均匀的深度级别上被发现。[说服自己为什么：奇数周期会发生什么？偶数循环会发生什么？]

注意：运行时间是顶点数的指数[加倍]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:50:26.820

对于每个节点 i，创建 3 个布尔状态
(i,0)：未
达到 (i,1)：可以通过奇数长度达到
(i,2)：可以通过偶数长度达到，
最初它们都是零
，然后，您执行dfs，
如果您发现不会更改节点的状态，则可以在 dfs 内更改您访问的节点的状态，然后停止该线程。
因为总共有 3*n 个状态可以改变，所以你需要的最长时间是
O(m)，其中边的数量是多少~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:09:33.683

您是否担心运行时间？已经讨论过了吗？您是否讨论过有效的集合数据结构？如果不是，那么阿米特的提示应该对您有所帮助。

如果是，那么您可能应该更聪明。当您讨论 DFS 时，您谈到了维护一组先前访问过的顶点，是吗？

相反，您可以维护多个集合，每个集合的含义略有不同。您可能会设想您访问的集合是这些单独集合的并集，但至关重要的是，如果某个顶点出现在一个顶点中，然后稍后又出现在另一个顶点中，您可能需要重新访问它。

问问自己：我可以将顶点放入哪些集合中？如果一个顶点已经通过被访问加入了某个集合，我什么时候需要重新访问它？小心，你很容易在这里犯错。

# javascript - 过去几个月网络上发生了什么变化，破坏了 Firefox 3.5 与许多 javascript 重网站的兼容性？

> ID：10062815
> 
> 赞同：2
> 
> 时间：2012-04-08T12:32:12.323
> 
> 标签：javascript, firefox, cross-browser

它曾经是 Firefox 3.5 很好地呈现网站。现在，假设我去了 2shared.com，上传了一个文件，但从未重定向到带有下载链接的页面（尽管 IE8 仍然有效）。所以这个站点 2shared.com 曾经与 Firefox 3.5 一起使用，但现在不再使用了。同样，我在许多其他网站上看到用户体验下降。就好像在 javascript 重网站（或者可能特别是 asp.net javascript 重网站？其中一个被破坏的网站被称为 asp.net）中发生了一些广泛的技术变化，破坏了与它的兼容性。

还有人注意到这个吗？有任何想法吗？这已经讨论过了吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-08T12:44:48.367

Firefox 3.5 是旧版浏览器。

这相当于在 IE5.5 中运行您的网站并期望它们正常工作。

这不是现在互联网的运作方式。

网络正在朝着“只支持最新版本的主流浏览器”的方向发展。网站不支持旧版浏览器很遗憾，但这就是它的工作原理。

# c++ - C++ 标准库：使用标准输入初始化容器

> ID：10062819
> 
> 赞同：1
> 
> 时间：2012-04-08T12:32:57.550
> 
> 标签：c++, containers, std

我们可以使用如下标准输入来初始化容器双端队列：

```
deque<int> c((istream_iterator<int>(cin)),(istream_iterator<int>())); 
```

正如《C++ 标准库》所描述的，初始化参数周围的额外括号是必要的。没有它们，c 声明一个返回类型为 deque 的函数。它的第一个参数是名为 cin 的 istream_iterator 类型，第二个未命名参数的类型是“不带参数返回 istream_iterator 的函数”。看下面的代码

```
deque<int> c(istream_iterator<int>(cin),istream_iterator<int>()); 
```

但是额外的括号会强制初始化器与声明的语法不匹配。我不明白为什么额外的括号会使初始化程序与声明的语法不匹配。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:35:12.653

因为 C++ 标准中定义的语法不接受这种形式作为函数声明：

```
T name((U), (V)); 
```

# iphone - 核心数据：查找按属性过滤的具有唯一第二个属性的实体

> ID：10062824
> 
> 赞同：0
> 
> 时间：2012-04-08T12:33:47.873
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我有一个`Detail`具有两个属性的实体：`title`和`text`. 其中有很多，而且很多是重复的，因为它们作为关系被分配给另一个实体的许多实例。

`text`我需要给定的所有 unique `title`。所以首先我创建一个适当的谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
   @"title = %@", aTitle]; 
```

如何将结果数组减少到只有唯一`text`条目的数组？

我可以以某种方式仍然使用 my`fetchedResultsController`在表格视图中显示这些，还是必须创建一个单独的数组作为数据源？我担心我会遇到这样的记忆问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T01:25:34.623

像这样的东西可能适用于 valueForKeypath：

```
 NSDictionary * dict00 = [NSDictionary dictionaryWithObject:@"hat" forKey:@"key"];
    NSDictionary * dict01 = [NSDictionary dictionaryWithObject:@"bag" forKey:@"key"];
    NSDictionary * dict02 = [NSDictionary dictionaryWithObject:@"shirt" forKey:@"key"];
    NSDictionary * dict03 = [NSDictionary dictionaryWithObject:@"hat" forKey:@"key"];
    NSDictionary * dict04 = [NSDictionary dictionaryWithObject:@"hat" forKey:@"key"];

    NSMutableArray * array = [NSMutableArray arrayWithCapacity:5];
    [array addObject:dict00];
    [array addObject:dict01];
    [array addObject:dict02];
    [array addObject:dict03];
    [array addObject:dict04];

    NSArray * deDupedArray = [array valueForKeyPath:@"@distinctUnionOfObjects.key"];
    NSLog(@"%@",deDupedArray); 
```

# iphone - 在 5X 表中将 int 舍入到最接近的值？

> ID：10062825
> 
> 赞同：2
> 
> 时间：2012-04-08T12:34:02.733
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

在我的 iPhone 应用程序中，我需要将一个整数四舍五入到最接近的 5 的倍数。

例如，第 6 轮到 = 10 和第 23 轮到 = 25 等

## 编辑

我忘了说，我只想围观！在所有情况下，例如，22 将四舍五入为 25。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T12:42:49.077

如果你想总是四舍五入，你可以使用以下内容：

```
int a = 22;
int b = (a + 4) / 5 * 5; // b = 25; 
```

如果`a`可以是浮点数，则应按`int`如下方式添加强制转换：

```
int b = ((int)a + 4) / 5 * 5; // b = 25; 
```

请注意，您可以使用该函数`ceil`来完成相同的结果：

```
int a = 22;
int b = ceil((float)a / 5) * 5; // b = 25; 
```

* * *

**老答案：**

要四舍五入到 的最接近的倍数`5`，您可以执行以下操作：

```
int a = 23;
int b = (int)(a + 2.5) / 5 * 5; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T12:59:59.020

**采用 ：**

```
int rounded = (i%5==0) ? i : i+5-(i%5); 
```

* * *

**例子 ：**

```
 for (int i=1; i<25; i++)
    {
        int k= (i%5==0) ? i : i+5-(i%5);

        printf("i  : %d => rounded : %d\n",i,k);
    } 
```

**输出 ：**

```
i  : 1 => rounded : 5
i  : 2 => rounded : 5
i  : 3 => rounded : 5
i  : 4 => rounded : 5
i  : 5 => rounded : 5
i  : 6 => rounded : 10
i  : 7 => rounded : 10
i  : 8 => rounded : 10
i  : 9 => rounded : 10
i  : 10 => rounded : 10
i  : 11 => rounded : 15
i  : 12 => rounded : 15
i  : 13 => rounded : 15
i  : 14 => rounded : 15
i  : 15 => rounded : 15
i  : 16 => rounded : 20
i  : 17 => rounded : 20
i  : 18 => rounded : 20
i  : 19 => rounded : 20
i  : 20 => rounded : 20
i  : 21 => rounded : 25
i  : 22 => rounded : 25
i  : 23 => rounded : 25
i  : 24 => rounded : 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-09T08:55:13.233

斯威夫特 3

```
extension Int {
    func nearestFive() -> Int {
        return (self + 4) / 5 * 5
    }
} 
```

采用

```
let a = 23.nearestFive()
print(a) // 25 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T12:48:42.403

对于整数解决方案，使用以 4 为偏的 mod 5 进行舍入：

```
int i;
int i5;

i = 6;
i5 = i + 4 - ((i+4) % 5);
NSLog(@"i: %i, i5: %i", i, i5);

i = 22;
i5 = i + 4 - ((i+4) % 5);
NSLog(@"i: %i, i5: %i", i, i5);
NSLog output: 
```

> i: 6, i5: 10
> i: 22, i5: 25

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T12:55:24.183

对于四舍五入到下一个 5 的倍数，例如，可以使用以下命令：

```
(int) (5.0 * ceil((number/5.0))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T12:55:28.863

你可能不需要这个问题的另一个答案，但我个人认为这更整洁：

```
int ans = ceil(input / 5.0) * 5.0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T12:41:41.857

由于您只需要四舍五入的整数，`num+5-(num%5)`就足够了。

**旧答案**

我对objective-c知之甚少，但这还不够。

```
r = num%5
r > 2 ? num+5-r : n-r 
```

# android - 如何将序列化对象从 Android 客户端发送到 Google App Engine Servlet？

> ID：10062828
> 
> 赞同：0
> 
> 时间：2012-04-08T12:34:34.443
> 
> 标签：android, google-app-engine

如何将序列化对象从 Android 客户端发送到 Google App Engine Servlet。
我有这个代码：

```
private static HttpClient getHttpClient() 
{
if (mHttpClient == null) 
{
    mHttpClient = new DefaultHttpClient();
    final HttpParams params = mHttpClient.getParams();
    HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
    HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
    ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);
}
return mHttpClient;
}

public static String executeHttpPost(String url, Object obj) throws Exception
{    
  HttpClient client = getHttpClient();
  HttpPost request = new HttpPost(url);
  request.set( ????
} 
```

我如何从这里继续？
有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:54:00.767

干得好：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
ObjectOutput out = new ObjectOutputStream(bos);   
out.writeObject(obj);
byte[] yourObjectSerialized = bos.toByteArray();

HttpClient client = getHttpClient();
HttpPost request = new HttpPost(url);
request.setEntity(new ByteArrayEntity(yourObjectSerialized)); 
```

# php - 如何将会话限制为仅在 PHP 中的目录？

> ID：10062829
> 
> 赞同：0
> 
> 时间：2012-04-08T12:34:41.797
> 
> 标签：php, session, login, admin

我的网站上有一个管理系统和一个用户系统。用户系统上的某些数据不会更改，但管理员数据会更改。所以我想知道是否有办法将管理会话（当他们登录时）限制在管理目录（/admin），这样它就不会干扰我网站的其余部分？

谢谢，

卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:41:01.900

有很多方法可以处理这样的事情。可能最简单的方法是检查权限和`$_SERVER['REQUEST_URI']`，如果用户不在该`admin/`区域，则重定向到该区域。

```
// Assuming you've saved an admin flag in session
// and the user request URI doesn't contain admin/
if ($_SESSION['admin'] === TRUE && !preg_match('/admin\//' $_SERVER['REQUEST_URI'])) {
  // redirect into the admin/ area
  header("Location: http://example.com/admin");
  exit();
} 
```

### 更新：

根据普遍的要求，这是在 admin/ 目录中强制执行管理员登录的相反操作

```
if ((!isset($_SESSION['admin'] || $_SESSION['admin'] === FALSE)  && preg_match('/admin\//' $_SERVER['REQUEST_URI'])) {
  // redirect out of the admin/ area
  header("Location: http://example.com/");
  exit();
} 
```

实际上，假设管理页面是单独的脚本，您实际上并不需要`preg_match()`这部分中的 。但是，如果您有一个 MVC 模式，其中管理脚本实际上可能不是从 admin 目录中的文件提供的，请使用正则表达式匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:43:11.247

这不是一个解决方案，但它是一种解决方法。您也可以为此使用相同的会话。只需在路径名称处为每个路径创建会话标识符

```
$_SESSION['path/to/admin']['var1'] = 'value1';
$_SESSION['path/to/admin']['var2'] = 'value2'; 
```

这样，您可以检索与路径无关的会话变量的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:47:25.533

[`session_name`](http://php.net/manual/en/function.session-name.php)调用前使用[`session_start`](http://php.net/manual/en/function.session-start.php)。因为您可以区分用户和管理区域。

*   用户

    ```
    session_name("user");
    session_start(); 
    ```

*   行政

    ```
    session_name("admin");
    session_start(); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T12:40:03.397

不确定我是否完全理解了这个问题，但您始终可以检查用户是否是管理员，如果不是，只需将他们从管理员系统重定向到用户系统。

# wcf - Monotouch/WCF：为什么不能覆盖 wcf 绑定超时设置

> ID：10062830
> 
> 赞同：3
> 
> 时间：2012-04-08T12:34:59.483
> 
> 标签：wcf, xamarin.ios, timeout

Monotouch/WCF：为什么不能覆盖 wcf 绑定默认超时设置：

```
public class MyServiceClient : ClientBase<IMyContract>,IMyContract
{ ... }

public void test() {
        BasicHttpBinding basicHttpBinding = new BasicHttpBinding();
        basicHttpBinding.Name = "basicHttpBinding";
        basicHttpBinding.MaxBufferSize = int.MaxValue;
        basicHttpBinding.MaxReceivedMessageSize = int.MaxValue;
        basicHttpBinding.ReceiveTimeout = TimeSpan.FromSeconds(10.0);
        basicHttpBinding.SendTimeout = TimeSpan.FromSeconds(10.0);
        basicHttpBinding.CloseTimeout = TimeSpan.FromSeconds(5.0);
        basicHttpBinding.OpenTimeout = TimeSpan.FromSeconds(5.0);

       MyServiceClient client = New MyServiceClient(basicHttpBinding, new EndPointAddress(...));
       client.Test();
     } 
```

// 虽然我将 OpenTimeout 设置为 5 秒，但是当我关闭服务器服务（或关闭 iphone 的 wifi 和网络）时，它仍然尝试在后台连接服务，直到默认的 1 分钟超时，这很奇怪！为什么？谢谢。

顺便说一句，monotouch/iPhone 中的异常在 1 分钟后抛出，类型是 TimeoutException（消息：操作已超时。）而不是 FaultException 或 CommunicationException）。如果上面的代码在 windows .net 客户端中调用，应该会抛出 CommunicationException。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:43:12.850

xamarin 团队回复：serviceClient.innerchannel.operationtimeout = ... 谢谢。

# c# - 使用静态方法与对象方法

> ID：10062833
> 
> 赞同：7
> 
> 时间：2012-04-08T12:35:52.000
> 
> 标签：c#

我应该多久使用一次静态方法？如果我喜欢：

```
Class1 _class34 = new Class1(parameter);

Class1.DoSomething(_class34, parameter1, parameter2, parameter3, parameter4). 
```

或者

```
_class34.DoSomething(parameter1, parameter2, parameter3, parameter). 
```

我倾向于调用类的静态方法并像第一个示例中那样传递类的对象？

关于这两个例子的最佳实践是什么？有什么我应该注意的性能、设计和一般做法吗？在日常编码场景中，我应该一般使用哪一个，而你会选择哪一个。第一个示例似乎更易于阅读（您传递所有参数并执行某些操作），在第二个示例中您必须阅读两次您正在处理一个对象？

这不是什么大问题，只是想知道。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T12:37:38.983

一般来说，仅当您想做的事情独立于类的任何一个实例时，才应使用静态方法。如果您需要直接访问或影响特定实例的状态，通常可以采用非静态方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:42:41.950

没有“更频繁”的答案。
这完全取决于使用的类型。

底线是：如果指定类的对象受到影响/使用，则应始终使用非静态方法。但是，如果没有影响/使用的类的单个实例，则应始终使用静态方法。

在您的示例中，您正在做`Class1.DoSomething(_class34, parameter1, parameter2, parameter3, parameter4)`的不是一个好方法，因为它剥夺了面向对象编程为您提供的所有可能性（例如多态性等）。

需要静态函数的场景的一个很好的例子是工厂方法，例如 String.Parse - 它开始时没有任何特定的 String 实例，但连接到字符串类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T12:44:45.083

这是运行时已经做的，每个实例方法都有一个隐藏的第一个参数传递*this*。在扩展方法的语法中公开。

显式地完成运行时的工作并不是特别有用，语法只是变得更加冗长。考虑到你必须想出的那种名字，这很痛苦。考虑 _this 而不是 _class34 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T12:46:13.503

面向对象编程背后的整个想法是，您不必`somefunction(somestruct)`像过去那样编写，而是可以编写，`somestruct.somefunction()`这使得`somefunction` *属于*.`somestruct`

当然，您可以按照您想要的任何方式进行操作，但请记住，您的第二个示例是*方式*，也是发明成员函数的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T12:51:53.360

静态成员可能会使单元测试复杂化，因此您必须注意如何使用它们。

在大多数情况下，我最终会为包含静态成员的类添加非静态包装器，否则我将无法模拟它们。

[静态方法是可测试性的死亡](http://googletesting.blogspot.com.ar/2008/12/static-methods-are-death-to-testability.html)可能会让您对此有更好的了解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T13:55:18.153

但默认情况下，我使用实例方法。只有当静态方法比实例方法更有意义或没有其他方法时，我才倾向于使用静态方法。使用静态可能会使单元测试复杂化。也使用静态字段的静态方法是内存泄漏的潜在来源（是的，即使在 .NET 中也是如此）。

因此，例如，当我想要一个特殊的创建方法来更清楚地了解创建过程中发生的事情时，我使用静态，比如当我通过从文件反序列化对象来创建对象时：

```
MyClass myObject = MyClass.ReadFromFile("serialized.xml"); 
```

这比以下更具可读性：

```
MyClass myObject = new MyClass("serialized.xml"); 
```

当我想在所有实例之间共享一些类范围的状态信息时，我也会使用静态方法（和成员）。

当然，当您的整个班级都是静态的时，静态成员是必须的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T12:38:55.690

如果你需要这个对象，我认为你应该像“_class34.DoSomething（parameter1，parameter2，parameter3，parameter）”这样的调用。

当你读到它就像：在对象 _Class34 上，用这个参数做一些事情。

# java - 使用 JNI 调用第 3 方 .NET DLL

> ID：10062836
> 
> 赞同：4
> 
> 时间：2012-04-08T12:36:06.580
> 
> 标签：java, .net, dll, java-native-interface

我正在尝试从 JAVA 程序中调用第 3 方 .NET DLL（取自[此处）。](https://github.com/TheCodeKing/XDMessaging.Net)在看了[这里](http://www.codeproject.com/Articles/13093/C-method-calls-within-a-Java-program)和[这里](http://www.codeproject.com/Articles/2876/JNI-Basics-1/?fid=4729&df=90&mpp=50&noise=3&prof=False&sort=Position&view=Quick&fr=51#xx0xx)之后，我设法让整个东西编译和运行。但是在运行 .NET 代码时出现异常：

> Java 运行时环境检测到致命错误

这只发生在我尝试从 .NET DLL 中访问另一个 .net 对象和方法时：

```
JNIEXPORT void JNICALL Java_test_broadcast
(JNIEnv *, jobject)
{
   // Instantiate the MC++ class.
   IManagedWrapper* t = IManagedWrapper::CreateInstance();

   // The actual call is made. 
   t->Broadcast();
}

void ManagedWrapper::Broadcast(std::string message)
{
   //Uncommenting the following line will raise the error
   //IXDBroadcast^ broadcast = XDBroadcast::CreateBroadcast(XDTransportMode::WindowsMessaging);
} 
```

我设法创建了一个链接到上述代码并按需要工作的 .NET DLL。

如何从 Java 代码中调用 .NET 对象和方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:38:59.750

我最终在评论中关注了@“Hovercraft Full Of Eels”链接： [Calling .Net Dlls from Java code without using regasm.exe](http://codefry.blogspot.com/2012/01/calling-net-dlls-from-java-code-without.html)

我使用 C++\CLI 在本机代码和托管代码之间架起了一座桥梁，它运行良好。主要问题是我的桥 DLL 在 JVM 下运行，而我尝试加载的 DLL 不在 JRE\bin 目录中。为了克服这个问题，我从 C++/CLI 代码中动态加载了 .Net 程序集（基于[此](http://support.microsoft.com/kb/837908/en-us)）：

```
static Assembly^ MyResolveEventHandler( Object^ sender, ResolveEventArgs^ args )
{
    //Retrieve the list of referenced assemblies in an array of AssemblyName.
    Assembly^ MyAssembly;
    Assembly^ objExecutingAssemblies;
    String^ strTempAssmbPath = "";

    objExecutingAssemblies = Assembly::GetExecutingAssembly();
    array<AssemblyName ^>^ arrReferencedAssmbNames = objExecutingAssemblies->GetReferencedAssemblies();

    //Loop through the array of referenced assembly names.
    for each (AssemblyName^ strAssmbName in arrReferencedAssmbNames)
    {
        //Check for the assembly names that have raised the "AssemblyResolve" event.
        if (strAssmbName->FullName->Substring(0, strAssmbName->FullName->IndexOf(",")) == args->Name->Substring(0, args->Name->IndexOf(",")))
        {
            //Build the path of the assembly from where it has to be loaded.                
            strTempAssmbPath = pathBase + args->Name->Substring(0, args->Name->IndexOf(",")) + ".dll";
            break;
        }

    }
    //Load the assembly from the specified path.                    
    MyAssembly = Assembly::LoadFrom(strTempAssmbPath);

    //Return the loaded assembly.
    return MyAssembly;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T21:48:10.747

这正是原生 Java 到 .NET 桥在后台所做的事情。

根据您需要使用的 .NET 代码数量和 .NET 对象的复杂性（您有什么样的方法，如果您使用泛型，是否有数组等），您也可以考虑使用这种桥接器。当您更深入地研究这种情况时，如果您自己通过 C++/CLI 手动进行，则会出现一个又一个的限制。如果您需要快速可靠的生产环境解决方案，我建议您检查：

*   [雅沃内](http://www.javonet.com)
*   [江桥](http://www.jnbridge.com)
*   [JNI4NET](http://jni4net.sourceforge.net)

这些桥中的每一个都将为您提供所有本机通信，并提供非常简单的界面，以使用 .NET 加载任何 DLL，甚至在您的 JAVA 应用程序中使用整个 .NET Framework。

根据您的需求，我认为**Javonet**是最简单且非常轻巧的一种，具有强大的功能和灵活性，如果您正在寻找具有良好支持和简单 API 的可靠商业解决方案以在 5 分钟内完成工作（对于非商业和学术是自由）。**JNBridge**更具有强类型代理类生成器，也非常强大，也非常适合商业用途，特别是如果您需要它们的任何专用连接器（影响价格，但取决于您的需求）。**JNI4NET**不错的开源项目，我想说的是非关键、非商业应用，但值得一试。

有了这样的桥，你不需要关心任何额外的实现，只需复制 .NET dll 并在 JAVA 中使用它。你可以在这里看到它：[http ://www.youtube.com/watch?v=n6XfzrHTdK4](http://www.youtube.com/watch?v=n6XfzrHTdK4)

# wordpress - 在 wordpress 模板或小部件中使用插件的功能

> ID：10062837
> 
> 赞同：0
> 
> 时间：2012-04-08T12:37:04.137
> 
> 标签：wordpress, wordpress-theming

我使用插件在管理页面中显示随机引号。我想在模板的文本小部件中显示此引号。

我认为这是该插件的主要功能

```
function persian_quotes() {
    $chosen = persian_quotes_get_lyric();
    echo "<p id='quotes'>$chosen</p>";
}

add_action('admin_footer', 'persian_quotes'); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:30:34.470

您必须安装以下小部件之一：

[http://wordpress.org/extend/plugins/php-code-widget/](http://wordpress.org/extend/plugins/php-code-widget/)

[http://wordpress.org/extend/plugins/php-text-widget/](http://wordpress.org/extend/plugins/php-text-widget/)

并在将小部件拖放到侧边栏后将函数调用添加到小部件：

```
persian_quotes(); 
```

# algorithm - 从复杂文档进行 OCR 扫描

> ID：10062840
> 
> 赞同：1
> 
> 时间：2012-04-08T12:37:49.003
> 
> 标签：algorithm, image-processing, language-agnostic, ocr

我需要创建一个工具，该工具将使用高质量的相机来扫描文档中的特定文本块并对其进行 OCR。每个文档都匹配相同的模板，其中包含几个填满数据的表格。我需要从每个扫描文档的一个特定单元格中提取数据。

我需要考虑图像的旋转和微小变换。整个工作流程应如下所示：

1.  文档“显示”到相机。软件制作文件的图片。
2.  软件会考虑一些较小的旋转和其他转换（由于文档被握在手中，可能会发生较小的剪切、缩放、旋转）。
3.  软件识别正在显示的正确模板文档并从特定单元格中提取图像。
4.  然后对图像进行 OCR 处理。

基本上，我不需要最终的解决方案，而是需要一些关于从哪里开始寻找的方向。我知道如何对纯文本进行 OCRing，但我不知道如何实现第 2 步和第 3 步。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:21:40.573

基本上，纯文本的 OCR，尤其是对于非常好的扫描图像，是一项很好解决的任务。您所描述的更进一步 - 图像预处理和具有数据捕获的字段级识别。据我所知，开源引擎（甚至被认为是其中最好的 tesseract）不提供这样的功能。

同时，专有的 OCR 引擎多年来一直在解决您描述的任务（花费大量人力资源）并且进展非常顺利。所以如果你正在计划一个商业软件，我建议你看看[http://ocrsdk.com](http://ocrsdk.com)，它是一个带有 web API 的云 OCR SDK。它允许您上传图像并将 OCRed 数据发回给您。它已经内置了所有可能的图像预处理算法，因此您不必担心第 2 步。至于第 3 步 - 您可能需要参考其文档的[这一部分](http://ocrsdk.com/documentation/quick-start/text-fields/)。我是开发此服务前端的团队的一员，所以我可以多说一点。希望能帮助到你！

# java - 将 derby db 上传到 Web 服务器

> ID：10062841
> 
> 赞同：0
> 
> 时间：2012-04-08T12:37:50.673
> 
> 标签：java, derby, google-code

我有一个功能有限的动态 Web 项目（名称 DYN_WEB）和一个与我计算机上的 derby db 通信的项目（名称 DATA）。它可以在本地主机上正常工作，放置和检索一些数据。

但是我如何将所有这些（DYN_WEB 项目 + DATA 项目 + 数据库）上传到 google 代码，以便其他人可以下载使用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:31:37.833

您可以将您的数据库压缩成一个 zip 文件，然后上传该 zip 文件，然后您的用户将在他们自己的系统上下载并解压缩该数据库。

# ruby - Sinatra 中的链接速记应用程序

> ID：10062845
> 
> 赞同：0
> 
> 时间：2012-04-08T12:39:23.100
> 
> 标签：ruby, sinatra, datamapper

这是我的第一个 Sinatra 项目 - 链接缩短器，但我遇到了一些错误，老实说，sinatra 的内置调试器实际上什么也没告诉我。我希望你给我一个线索或提出解决问题的方法。

[http://min.us/mkBIVTh7p](http://min.us/mkBIVTh7p) - 屏幕截图，当我提交带有 url 的表单时发生这种情况：http: [//google.com](http://google.com)和 word google

```
require 'sinatra'
    require 'shotgun'
    require 'data_mapper'
    require 'dm-migrations'
    require 'dm-sqlite-adapter'

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/form.db")

class Url
    include DataMapper::Resource
    property :id, Serial
    property :url, String
    property :suggestion, String
end

get '/' do 
    erb :index 
end

post '/' do
    Url.create(:url => params[:url], :suggestion=> params[:suggestion])
end

get '/Url.suggestion' do
    query = request_path.slice!(0) 
    redirection = Url.first(:suggestion => query)
    redirect redirection.url
end 
```

索引.rb

```
<!doctype html>
<html>
<head>
    <title>Skracanie linków</title>
</head>
<body>

<form name="form" method="post" action="#">
    <fieldset>
        <legend>Wpisz co trzeba</legend>
        <p><label> <input type="text" name="post[url]"/>Url:</label></p>
        <p><label> <input type="text" name="post[suggestion]"/>Suggested name:</label></p>
    </fieldset>
    <p class="center">
        <input type="reset" value="Wyczyść formularz"/>
        <input type="submit" value="Wyślij"/>
    </p>  

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:59:05.763

这是因为您需要完成模型。请参阅“完成模型”标题下的[http://datamapper.org/getting-started.html 。](http://datamapper.org/getting-started.html)

在定义模型后添加 finalize 命令：

```
class Url
    include DataMapper::Resource
    property :id, Serial
    property :url, String
    property :suggestion, String
end

# add this line
DataMapper.finalize 
```

# ruby - RSpec中未描述的示例如何显示失败？

> ID：10062850
> 
> 赞同：0
> 
> 时间：2012-04-08T12:40:21.150
> 
> 标签：ruby, rspec

我在 RSpec 上描述课程

```
class Pupil
      def initialize(name, dateOfBirth)
            @name = name
            @dateOfBirth = dateOfBirth
      end

      def name
            @name
      end

      def ages
            #should calculate ages
      end
end

describe Pupil do
      context do
            pupil = Pupil.new("Stanislav Majewski", "1 april 1999")

            it "should returns name" do
                  pupil.name.should eq("Stanislav Majewski")
            end

            it "should calculates ages" do
                  #not described
            end
      end
end 
```

RSpec 返回：

```
..

Finished in 0.00203 seconds
2 examples, 0 failures 
```

是否有一种优雅的方式来显示未描述该方法的失败消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:39:34.120

如果您担心自己会创建一个测试并忘记将任何内容放入其中（有时我会创建三个我知道自己需要的测试，然后依次处理每个测试），那么您可以执行以下操作：

```
it "should calculates ages" do
  fail
end 
```

或者

```
it "should calculates ages" 
```

...这就是全部（无块）将自动将测试标记为待处理。换句话说，不要填写你的测试，直到他们有实际的测试代码。

此外，如果您不测试任何断言（即，如果您的规范不包含任何`should`在其中调用的行），您的规范似乎会通过。这发生在我身上好几次了，我写了一个新的测试，期望它会失败，但这并不是因为我忘记包含`should`实际测试断言的调用。

# javascript - html 5 画布文本

> ID：10062852
> 
> 赞同：0
> 
> 时间：2012-04-08T12:40:37.327
> 
> 标签：javascript, html, html5-canvas

我们可以在画布上以不同的角度书写吗？如果是，如何？我想在点击时写一些东西，所以需要坐标，但是当我使用`context.rotate()`它时，它不会停留在一个固定的位置。如果我单击屏幕右侧，文本非常接近指针，但如果我单击右侧，它会移开。那么解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:57:52.957

您的答案可以在这里找到：[HTML5 Text Canvas rotate in case text width is greater than maximum width allowed](https://stackoverflow.com/questions/7755050/html5-text-canvas-rotate-in-case-text-width-is-lager-than-maximum-width-allowed)

如果您查看 Simon 的示例代码[http://jsfiddle.net/5UKE3/](http://jsfiddle.net/5UKE3/) ，您会看到他在哪里保存上下文、转换画布然后恢复上下文。这是您要达到的目标的关键。

更多关于保存和恢复的信息：http: [//html5.litten.com/understanding-save-and-restore-for-the-canvas-context/](http://html5.litten.com/understanding-save-and-restore-for-the-canvas-context/)

# javascript - 使用键盘发布输入值

> ID：10062853
> 
> 赞同：3
> 
> 时间：2012-04-08T12:40:46.707
> 
> 标签：javascript, jquery, keyboard-shortcuts

我有这样的表格：

```
<form id="surveyForm" method="post" action="submit.php">
    <input type="text"  id="good"  value="0" />
    <input type="text" id="bad" value="1" />    
</form> 
```

我想用“g”和“b”键盘按钮发送值。如果按下“g”按钮，则表单以“0”值提交。如何用 jquery 做到这一点？我[在网站上搜索过，](https://stackoverflow.com/search?q=submit%20form%20with%20keyboard%20with%20jquery)但找不到任何特定主题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:47:04.063

尝试这个：

```
$(document).keypress(function(e) {
    if (e.which == 103) { // 'g' keypress
        $("#bad").attr("disabled", true);
        $("#good").attr("disabled", false);
        $("#surveyForm").submit();
    }
    else if (e.which == 98) { // 'b' keypress
        $("#bad").attr("disabled", false);
        $("#good").attr("disabled", true);
        $("#surveyForm").submit();
    }
}); 
```

或者，您可以有一个输入，您可以根据按下的键更改其值，然后提交您的表单。那将是更优雅的IMO。

# jquery - jquery中的双重调用'click'事件

> ID：10062856
> 
> 赞同：0
> 
> 时间：2012-04-08T12:41:22.350
> 
> 标签：jquery

我在输入对象中调用“点击”函数时遇到了一点问题。函数为输入分配一个事件：

```
function v_start() {
      $('#next').click(function(){
                    v_check();
      });
} 
```

现在在 javascript 文件 name.js 和 name2.js 我有： 复制代码

```
$(function(){
      v_start();
}); 
```

只是一个例子，但在这种情况下，函数 v_check 将在一次单击输入中被调用两次。是使事件只发生一次的条件或方式吗？为什么第二个事件不会覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:51:59.100

取消绑定并绑定以确保事件处理程序只添加一次：

```
$("#mySelector").unbind("click").bind("click",myFunction) 
```

如果有多个事件监听器：

```
var myFunction = function(e){ /// my code }

$("#mySelector").unbind("click",myFunction).bind("click",myFunction) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:44:22.713

每次在 jQuery 中处理事件时，它都会*将*处理程序添加到列表中。没有“覆盖”。

在这种情况下，避免事件被分配两次的简单解决方案是附加一个数据标志，指示事件已被附加，例如这样。

```
function v_start() {
    if (!$('#next').data('click-handled')) {
        $('#next').data('click-handled', true).click(function(){
            v_check();
        });
    }
} 
```

（您也可以手动获取事件列表并检查您的函数是否存在，但这要复杂得多。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:53:04.673

由于您`v_start`在每个文件中调用了两次，显然您将事件绑定了两次。您可以做一个简单的检查`click`事件是否已经像这样处理：

```
function v_start() {
    var $next = $('#next');
    $next.data('events').click || $next.click(v_check);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-04T05:17:04.940

利用：

```
$( ".mybutton" ).off('click').on('click', function() { 
// same code
}); 
```

这对我来说是最好的解决方案，或者也是

```
$(".mybutton").unbind("click",myFunction).bind("click",myFunction) 
```

# algorithm - 算法：按预期频率将符号压缩成位串？

> ID：10062857
> 
> 赞同：0
> 
> 时间：2012-04-08T12:41:25.660
> 
> 标签：algorithm, encoding, compression

我有一个包含 100 万个符号及其预期频率的表格。

我想通过为每个符号分配一个唯一（和前缀唯一）可变长度位字符串来压缩这些符号的序列，然后将它们连接在一起以表示序列。

我想分配这些位串，以使编码序列的预期位长度最小化。

例如，如果符号和预期频率是：

```
foo 0.5
bar 0.25
baz 0.25 
```

最好的编码之一是：

```
foo 0
bar 10
baz 11 
```

所以“foobarbazfoo”翻译成010110。

通过什么算法可以将预期频率表转换为最佳编码方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:43:13.447

您正在描述[*熵编码*](http://en.wikipedia.org/wiki/Entropy_encoding)。一种流行且易于实现的选项是[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)，但还有其他选项。

# java - 在java中维护一个计时器

> ID：10062872
> 
> 赞同：2
> 
> 时间：2012-04-08T12:43:56.223
> 
> 标签：java, timer

我有一个要求，即我的程序应该运行一段时间。我如何在 java 中维护一个计时器，以使程序仅从程序执行开始时间开始运行 30 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:49:17.183

您可以使用[`java.util.Timer`](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)来安排程序需要停止的时间。当那个时间发生时，您需要与您的主线程通信，程序应该停止运行（除非您只是想调用`System.exit`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:50:13.953

试试这个（可能在 main 方法中）：

```
Timer t = new Timer();
t.schedule(new TimerTask() {
  @Override
  public void run() {
    System.exit(0);
  }
}, 30*60000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T13:03:19.287

如果您使用的是 Java 1.5 或更高版本，我建议使用 Executors 框架。更具体地说，一个[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)，

```
Executors.newSingleThreadScheduledExecutor().schedule(new Runnable(){
    @Override
    public void run(){
        System.exit(0);
    }
}, 30, TimeUnit.MINUTES); 
```

另请参阅[Java Timer 与 ExecutorService？](https://stackoverflow.com/questions/409932/java-timer-vs-executorservice).

# android - 如何以编程方式检测 IllegalArgumentException：No configs match configSpec 之类的错误？

> ID：10062874
> 
> 赞同：0
> 
> 时间：2012-04-08T12:44:04.733
> 
> 标签：android, error-handling, opengl-es-2.0

我故意在模拟器上运行 OpenGL ES 2.0 应用程序。虽然我知道这应该会失败（确实如此），但我想了解如何以编程方式捕获错误。

我正在使用 HelloOpenGLES20 教程代码，所以我认为我不需要在这里重新发布它。我正在使用 Android 4.0.3（版本 15）代码库。

换句话说，我如何让我的应用程序更健壮，足够健壮以捕获这个错误？（例如，假设我疯狂到想要同时提供 OpenGL 2.0 和 1.0 支持，如果我无法运行 2.0，则回退到 1.0 代码 - 请不要告诉我检查 API 版本，因为那样不会解决如何检测此特定错误）

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:15:25.483

一般来说，我建议不要*检测错误*。相反，最好的做法是**测试您想要使用的特定功能**，以*防止*出现错误。

在这种特殊情况下，检查系统是否支持 OpenGL ES 2.0：

```
ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);    ConfigurationInfo configurationInfo = activityManager.getDeviceConfigurationInfo();    
boolean supportsEs2 = configurationInfo.reqGlEsVersion >= 0x20000; 
```

# c# - C#，用户定义的公式

> ID：10062875
> 
> 赞同：2
> 
> 时间：2012-04-08T12:44:07.003
> 
> 标签：c#, winforms, formula

我需要让用户可以在 datagridview 中编写自己的公式。类似于 Excel 中的函数。

公式定义示例：

[![X](../Images/22eb06160604f16d5000d86086a3180e.png)](https://i.stack.imgur.com/seFf3.jpg)

因此，用户在公式单元格中编写自己的公式，然后在其他表格中显示每个公式的结果。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:17:31.713

我会尝试[NCalc](http://ncalc.codeplex.com/)

> NCalc 是 .NET 中的数学表达式求值器。NCalc 可以解析任何表达式并评估结果，包括静态或动态参数和自定义函数。

```
Dictionary<string, int> dict = new Dictionary<string, int>() { { "Income", 1000 }, { "Tax", 5 } };

string expressionString = "Income * Tax";
NCalc.Expression expr = new NCalc.Expression(expressionString);
expr.EvaluateParameter += (name, args) =>
    {
        args.Result = dict[name];
    };

int result = (int)expr.Evaluate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:51:12.340

您的公式可以操作为 C# 并使用 SystemCodeCom.Compiler 动态编译，您可以在运行时运行它并输入您的变量值。
否则，您将不得不使用某种小型解析器/编译器 - 这是一项相当特殊的技能，并且可能很快变得复杂 - 特别是如果您的公式变得更加复杂（可能）。[这里](http://www.codeproject.com/Articles/12499/Run-Time-Code-Generation-I-Compile-C-Code-using-Mi)和[这里](http://www.codeproject.com/Articles/9019/Compiling-and-Executing-Code-at-Runtime)
有关于动态编译的代码项目文章。但是网上还有很多其他的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:14:48.857

有很多方法可以做到这一点，它们都围绕着将公式转换为可执行代码。您想编写自己的解析器还是想使用现有的解析器。C# 本身，IronPython，IronRuby，一些现成的组件。如果您使用完整的解析器，您可能想看看如何限制用户可以用它做的事情，无论是无意还是其他......

如果它们看起来很简单，那么某种表达式构建器（选择两个命名值和一个运算符）可能是要走的路，但是模块化，构建表达式和评估它，以便您以后可以加强.

但是考虑到它们看起来多么简单，我很想预定义表达式（从某种后备存储中作为元数据加载，并使其选择其中之一，而不是用户输入它。你可以轻松地花几个月的时间在这个设计方面，值得吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T15:43:03.220

我最近在我正在处理的一个项目中遇到了类似的要求（表达式的动态解析），最终使用了来自 WF（Windows Workflow Foundation）的 VB 表达式。这当然取决于此功能对您的重要性以及您愿意为此付出多少努力。就我而言，它比 NCalc 更好，原因如下：

*   它支持比 NCalc 更复杂的表达式
*   可以分析生成的表达式树以确定各个表达式的依赖关系
*   它与 WF 中的表达式语言相同（我已经在项目的其他地方使用过）

不管怎样，这是我写的关于这个主题[的一篇简短的博文。](http://www.damirscorner.com/UsingWorkflowInvokerToEvaluateCustomExpressions.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T03:57:07.620

几年前我创建了[信天翁表达式解析器。](https://www.nuget.org/packages/Albatross.Expression)它已经开源了一段时间，但我终于绕过并发布了 v2.02 并最近添加了文档。它正在积极维护中。它有几个不错的功能：

*   圆形参考检测
*   直接来自外部对象的源变量
*   表达式的反向生成
*   正确记录

# c++ - 错误 C2143：语法错误：缺少“；” 在“如果”之前

> ID：10062877
> 
> 赞同：0
> 
> 时间：2012-04-08T12:44:22.603
> 
> 标签：c++

```
 #include <iostream>
    using namespace std;

    int factor(int n);

    int main()
    { 
        int f,n;

    // Get user input

        cout << "Enter an integer: ";
        cin >> n;

    // Call factorial function

        f = factor(n);

    // Output results

        cout << n << "! = " << f << endl;

        int factor (int n)
            if(n <=1)
            {
             return 1;
            }
            else
            {
             int c = n * (n-1);
             return c;
            }
     }; 
```

我收到错误 C2143：语法错误：缺少 ';' 在“如果”之前，我很好奇我是否遗漏了一些简单的东西。我对 C++ 相当陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:45:41.410

您正在尝试在函数中定义`factor`函数`main`。这在 C++ 中是不允许的。此外，`factor`需要大括号的函数体：

```
int factor(int n)
{
    // function body
}

int main()
{
    // function body, factor visible
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T12:47:24.193

您需要从主函数中取出因子函数并将代码放入手镯中。

# html - 使用 CSS3 生成重复的六边形图案

> ID：10062887
> 
> 赞同：79
> 
> 时间：2012-04-08T12:45:45.503
> 
> 标签：html, css, css-shapes

所以，我需要使用 CSS 制作一个重复的六边形图案。如果需要图像，我可以去那里，但如果可能的话，我宁愿只使用 CSS。

这是我要创建的内容的想法：

![在此处输入图像描述](../Images/009a1d22d7bd7bfa935fd7333f9e199f.png)

基本上，我只需要一种方法来创建六边形，然后在它们上面覆盖文本/图像。我还没有太多代码，因为我不确定从哪里开始。问题是，我可以只使用`<div>`六边形形状的 s，如 ( [http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/) ) 所示，但它们不会连接。我可以使用重复的六边形图案，但是我无法指定特定形状中所需的文本或图像的确切位置。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-09T02:41:54.620

（虽然安娜的回答比我晚了几个月，可能以我的作为“思考”的基础，但她能够使用单曲提出一种方法这一事实`div`值得推广，所以[**也请查看她的回答**](https://stackoverflow.com/a/13069271/369707)——但是请注意，十六进制中的内容更加有限。）

这真是一个令人惊奇的问题。谢谢你问。很棒的事实是：

## [这个小提琴证明你可以做到！](http://jsfiddle.net/mqyCb/154/)

[使用的原始小提琴](http://jsfiddle.net/mqyCb/59/)（在稍后的编辑中修改为上面的小提琴链接）-它使用了 imgur.com 图像，这些图像在加载时似乎不是很可靠，所以新的小提琴正在使用 photobucket.com（*如果有持久性，请告诉我图片加载问题*）。我保留了原始链接，因为下面的解释代码随之而来（新小提琴中存在一些差异`background-size`）`position`。

阅读您的问题后，我几乎立即想到了这个想法，但需要一些时间来实施。我最初尝试使用单个伪元素获取单个“十六进制” `div`，但据我所知，没有办法只旋转`background-image`（我需要），所以我不得不添加一些额外的`div`元素来获得正确的/left 边，这样我就可以使用伪元素作为`background-image`旋转的手段。

我在 IE9、FF 和 Chrome 中进行了测试。理论上任何支持 CSS3 的浏览器`transform`都应该在其中工作。

**第一次主要更新（添加说明）**

我现在有一些时间来发布一些代码解释，所以这里是：

首先，六边形由 30/60 度关系和三角函数定义，因此这些将是涉及的关键角度。其次，我们从十六进制网格所在的“行”开始。HTML 定义为（额外的`div`元素有助于构建十六进制）：

```
<div class="hexrow">
    <div>
        <span>First Hex Text</span>
        <div></div>
        <div></div>
    </div>
    <div>
        <span>Second Hex Text</span>
        <div></div>
        <div></div>
    </div>
    <div>
        <span>Third Hex Text</span>
        <div></div>
        <div></div>
    </div>
</div> 
```

我们将使用`inline-block`hexagon `display`，但我们不希望它们意外地换到下一行并破坏网格，因此`white-space: nowrap`解决了这个问题。这一`margin`行将取决于您想要的十六进制之间有多少空间，并且可能需要一些实验来获得您想要的。

```
.hexrow {
    white-space: nowrap;
    /*right/left margin set at (( width of child div x sin(30) ) / 2) 
    makes a fairly tight fit; 
    a 3px bottom seems to match*/
    margin: 0 25px 3px;
} 
```

使用它们的直接子`.hexrow`元素`div`，我们形成了六边形的基础。将`width`驱动六边形顶部的水平方向，`height`因为在正六边形上所有边的长度都相等，所以从该数字得出。同样，边距将取决于间距，但这是各个六边形的“重叠”将发生的地方，以使网格看起来出现。`background-image`定义一次，就在这里。左移是为了至少容纳十六进制左侧的附加宽度。假设您想要居中的文本，`text-align`处理水平（当然）但`line-height`匹配的`height`将允许垂直居中。

```
.hexrow > div {
    width: 100px;
    height: 173.2px; /* ( width x cos(30) ) x 2 */
    /* For margin:
    right/left = ( width x sin(30) ) makes no overlap
    right/left = (( width x sin(30) ) / 2) leaves a narrow separation
    */
    margin: 0 25px;
    position: relative;
    background-image: url(http://i.imgur.com/w5tV4.jpg);
    background-position: -50px 0; /* -left position -1 x width x sin(30) */
    background-repeat: no-repeat;
    color: #ffffff;
    text-align: center;
    line-height: 173.2px; /*equals height*/
    display: inline-block;
} 
```

我们将相对于“行”向下移动每个*奇数十六进制数，每个**偶数*向上移动。移位计算 (width x cos(30) / 2 ) 也与 (height / 4) 相同。

```
.hexrow > div:nth-child(odd) {
    top: 43.3px; /* ( width x cos(30) / 2 ) */
}

.hexrow > div:nth-child(even) {
    top: -44.8px; /* -1 x( ( width x cos(30) / 2) + (hexrow bottom margin / 2)) */
} 
```

我们使用 2 个子`div`元素来创建十六进制的“翅膀”。它们的大小与主六角矩形相同，然后旋转并推到主六角“下方”。`Background-image`是继承的，因此图像是相同的（当然），因为“翅膀”中的图像将与主矩形中的图像“对齐”。伪元素用于生成图像，因为它们需要“重新旋转”回水平（因为我们旋转了`div`它们的父元素以创建“翅膀”）。

第`:before`一个将其背景转换为负数的宽度，等于十六进制的主要部分加上主十六进制的原始背景偏移。第二`:before`个将改变平移的原点，并在 x 轴上移动主宽度，在 y 轴上移动一半高度。

```
.hexrow > div > div:first-of-type {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -1;
    overflow: hidden;
    background-image: inherit;

    -ms-transform:rotate(60deg); /* IE 9 */
    -moz-transform:rotate(60deg); /* Firefox */
    -webkit-transform:rotate(60deg); /* Safari and Chrome */
    -o-transform:rotate(60deg); /* Opera */
    transform:rotate(60deg);
}

.hexrow > div > div:first-of-type:before {
    content: '';
    position: absolute;
    width: 200px; /* width of main + margin sizing */
    height: 100%;
    background-image: inherit;
    background-position: top left;
    background-repeat: no-repeat;
    bottom: 0;
    left: 0;
    z-index: 1;

    -ms-transform:rotate(-60deg) translate(-150px, 0); /* IE 9 */
    -moz-transform:rotate(-60deg) translate(-150px, 0); /* Firefox */
    -webkit-transform:rotate(-60deg) translate(-150px, 0); /* Safari and Chrome */
    -o-transform:rotate(-60deg) translate(-150px, 0); /* Opera */
    transform:rotate(-60deg) translate(-150px, 0);

    -ms-transform-origin: 0 0; /* IE 9 */
    -webkit-transform-origin: 0 0; /* Safari and Chrome */
    -moz-transform-origin: 0 0; /* Firefox */
    -o-transform-origin: 0 0; /* Opera */
    transform-origin: 0 0;
}

.hexrow > div > div:last-of-type {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -2;
    overflow: hidden;
    background-image: inherit;

    -ms-transform:rotate(-60deg); /* IE 9 */
    -moz-transform:rotate(-60deg); /* Firefox */
    -webkit-transform:rotate(-60deg); /* Safari and Chrome */
    -o-transform:rotate(-60deg); /* Opera */
    transform:rotate(-60deg);
}

.hexrow > div > div:last-of-type:before {
    content: '';
    position: absolute;
    width: 200px; /* starting width + margin sizing */
    height: 100%;
    background-image: inherit;
    background-position: top left;
    background-repeat: no-repeat;
    bottom: 0;
    left: 0;
    z-index: 1;

    /*translate properties are initial width (100px) and half height (173.2 / 2 = 86.6) */
    -ms-transform:rotate(60deg) translate(100px, 86.6px); /* IE 9 */
    -moz-transform:rotate(60deg) translate(100px, 86.6px); /* Firefox */
    -webkit-transform:rotate(60deg) translate(100px, 86.6px); /* Safari and Chrome */
    -o-transform:rotate(60deg) translate(100px, 86.6px); /* Opera */
    transform:rotate(60deg) translate(100px, 86.6px);

    -ms-transform-origin: 100% 0; /* IE 9 */
    -webkit-transform-origin: 100% 0; /* Safari and Chrome */
    -moz-transform-origin: 100% 0; /* Firefox */
    -o-transform-origin: 100% 0; /* Opera */
    transform-origin: 100% 0;
} 
```

这`span`包含您的文本。`line-height`重置以使文本行正常，但`vertical-align: middle`由于`line-height`父级较大，因此可以正常工作。被`white-space`重置，因此它允许再次包装。左/右边距可以设置为负数，以允许文本进入十六进制的“翅膀”。

```
.hexrow > div > span {
    display: inline-block;
    margin: 0 -30px;
    line-height: 1.1;
    vertical-align: middle;
    white-space: normal;
} 
```

您可以单独定位行和这些行中的单元格以更改图像、`span`文本设置或不透明度，或容纳更大的图像（将其移动到您想要的位置）等。这就是下面对第二行所做的事情。

```
.hexrow:nth-child(2) > div:nth-child(1) {
    background-image: url(http://i.imgur.com/7Un8Y.jpg);
}

.hexrow:nth-child(2) > div:nth-child(1) > span {
    /*change some other settings*/
    margin: 0 -20px;
    color: black;
    font-size: .8em;
    font-weight: bold;
}

.hexrow:nth-child(2) > div:nth-child(2) {
    background-image: url(http://i.imgur.com/jeSPg.jpg);
}

.hexrow:nth-child(2) > div:nth-child(3) {
    background-image: url(http://i.imgur.com/Jwmxm.jpg);
    /*you can shift a large background image, but it can get complicated
    best to keep the image as the total width (200px) and height (174px)
    that the hex would be.
    */
    background-position: -150px -120px;
    opacity: .3;
    color: black;
}

.hexrow:nth-child(2) > div:nth-child(3) > div:before {
    /*you can shift a large background image, but it can get complicated
    best to keep the image as the total width (200px) and height (174px)
    that the hex would be.
    */
    background-position: -100px -120px; /* the left shift is always less in the pseudo elements by the amount of the base shift */
}

.hexrow:nth-child(2) > div:nth-child(4) {
    background-image: url(http://i.imgur.com/90EkV.jpg);
    background-position: -350px -120px;
}

.hexrow:nth-child(2) > div:nth-child(4) > div:before {
    background-position: -300px -120px;
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-10-25T13:05:30.893

它实际上可以用每个六边形的一个元素和背景图像和文本的伪元素来完成。

# [*演示*](http://dabblet.com/gist/3952030)

基本**HTML**结构：

```
<div class='row'>
    <div class='hexagon'></div>
</div>
<div class='row'>
    <div class='hexagon content ribbon' data-content='This is a test!!! 
    9/10'></div><!--
    --><div class='hexagon content longtext' data-content='Some longer text here.
       Bla bla bla bla bla bla bla bla bla bla blaaaah...'></div>
</div> 
```

你可以有更多的行，你只需要`n`在奇数行上有六边形，在偶数行上有六边形`n+/-1`。

相关**CSS**：

```
* { box-sizing: border-box; margin: 0; padding: 0; }
.row { margin: -18.5% 0; text-align: center; }
.row:first-child { margin-top: 7%; }
.hexagon {
    position: relative;
    display: inline-block;
    overflow: hidden;
    margin: 0 8.5%;
    padding: 16%;
    transform: rotate(30deg) skewY(30deg) scaleX(.866); /* .866 = sqrt(3)/2 */
}
.hexagon:before, .content:after {
    display: block;
    position: absolute;
    /* 86.6% = (sqrt(3)/2)*100% = .866*100% */
    top: 6.7%; right: 0; bottom: 6.7%; left: 0; /* 6.7% = (100% -86.6%)/2 */
    transform: scaleX(1.155) /* 1.155 = 2/sqrt(3) */ 
               skewY(-30deg) rotate(-30deg);
    background-color: rgba(30,144,255,.56);
    background-size: cover;
    content: '';
}
.content:after { content: attr(data-content); }
/* add background images to :before pseudo-elements */
.row:nth-child(n) .hexagon:nth-child(m):before {
    background-image: 
        url(background-image-mxn.jpg); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T03:24:40.120

我将提供一个如何创建六边形的简单演示。

```
.hex {
  width: 40px;
  height: 70px;
  margin: 20px;
  overflow: hidden;
}

.hex:before {
  content: "";
  transform: rotate(45deg);
  background: #f00;
  width: 50px;
  height: 50px;
  display: inline-block;
  margin: 10px -5px 10px -5px;
}
```

```
<div class="hex">
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-21T06:54:30.893

您可以仅使用 CSS 创建一个完全响应的六边形网格。这个想法是使用 CSS2.1 overflow:hidden 创建一个父形状作为掩码，它与几乎所有浏览器兼容，甚至 Internet Explorer 6。

这是一种非常简单的技术，可用于创建各种形状的响应式网格，它只需要跳出框框思考即可解决问题。

我在这里有关于如何执行此技术的详细分步指南： [https ://www.codesmite.com/article/how-to-create-pure-css-hexagonal-grids](https://www.codesmite.com/article/how-to-create-pure-css-hexagonal-grids)

这是迄今为止我发现的最好的方法，不需要 javascript，并且既流畅又响应迅速。

我还在一个免费的 HTML 模板中使用了该技术，该模板包含六边形内的图像，您可以在此处演示和下载：[https ://www.codesmite.com/freebie/hexa-free-responsive-portfolio-template](https://www.codesmite.com/freebie/hexa-free-responsive-portfolio-template)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-03T10:59:47.953

这是使用 COMPASS/SCSS 的另一种方法，可以轻松设置六边形大小和布局：

[http://codepen.io/interdruper/pen/GrBEk](http://codepen.io/interdruper/pen/GrBEk)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T13:00:46.993

如果您能够实现 div 形状技巧，那么只需给每个 div 一个`position:relative`（您首先必须首先将它们一个一个地定位，同时设置`top`and `left`）

# xml - 使用 properties.xml 文件的 xsl 文件，以便将 xml 文件转换为带有 properties.xml 文件中定义的自定义标签的 xml 文件

> ID：10062888
> 
> 赞同：1
> 
> 时间：2012-04-08T12:45:48.033
> 
> 标签：xml, xslt, properties

例如，如果您以 XML 格式存储属性文件

```
<Properties>
    <Property value="abc">ABC1</Property>
    <Property value="...">...</Property>
</Properties> 
```

然后我们可以使用 xslt 处理两个（属性，输入）XML 文件，并将 abc 元素（输入 xml 文件）替换为 ABC1（自定义输出 xml 文件），等等。

例如考虑我下面的输入 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
       <Content>
          <abc>xxx
                 <def>zzz
                    <ghi>ccc</ghi>ttt
                     <dynamic val="hello" xmlns="http://abc.com" />
                      world
                     <dynamic val="hi" xmlns="http://abc.com" />
                       <dynAttr>
                         <dyn value=123 />
                         <dyn value=222 />
                       </dynAttr>
                         <lmn>data</lmn>

                   </def>
                </abc>
         </Content> 
```

属性文件由为输入 xml 文件的每个标记定义的属性组成，如果没有为该输入 xml 文件标记定义属性，则转换后的 xml 标记与输入 xml 文件标记具有相同的标记名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<Properties>
             <Property value="Content">CONTENT12</Property>
             <Property value="abc">ABC1</Property>
             <Property value="def">www</Property>
              <Property value="ghi">yyy</Property>
             <Property value="dynamic">Dynamic1</Property>
             <Property value="dynAttr">DynAttribute</Property>
</Properties> 
```

使用 xslt 并编写一个 xsl 文件，该文件引用属性 xml 文件，当应用于给定的输入 xml 文件并生成转换后的 xml 文件时，如图所示

```
<?xml version="1.0" encoding="UTF-8"?>

                <www>zzz
                    <yyy>ccc</yyy>ttt
                     <Dynamic1 val="hello" xmlns="http://abc.com>hello</Dynamic1>
                      world
                     <Dynamic1 val="hi" xmlns="http://abc.com>hi</Dynamic1>
                       <DynAttribute>
                         <dyn>123</dyn>
                         <dyn>222</dyn>
                       </DynAttribute>
                         <lmn>data</lmn>
                   </www>
if the above code is my requirement then what must be the relative xpath expression in your answer <xsl:template match=" "> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:20:57.047

您的示例文件格式不正确，但如果您修复它，并且您的属性文件是 prop.xml，这应该可以工作：

```
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="*">
 <xsl:variable name="n" select="name()"/>
 <xsl:variable name="new">
  <xsl:for-each select="document('prop.xml')">
   <xsl:choose>
    <xsl:when test="key('n',$n)">
     <xsl:value-of select="key('n',$n)"/>
    </xsl:when>
    <xsl:otherwise>
     <xsl:value-of select="$n"/>
    </xsl:otherwise>
   </xsl:choose>
  </xsl:for-each>
 </xsl:variable>
 <xsl:element name="{$new}">
  <xsl:copy-of select="@*"/>
  <xsl:apply-templates/>
 </xsl:element>
</xsl:template>

<xsl:key name="n" match="Property" use="@value"/>

</xsl:stylesheet> 
```

您的问题没有说明重命名的元素应该在哪个命名空间中。上面的代码总是将它们放在无命名空间中。如果您希望它们与原始名称位于同一名称空间中，请将 xsl:element 行更改为

```
 <xsl:element name="{$new}" namespace="{namespace-uri()}"> 
```

最灵活的替代方法可能是在属性文件中同时指定本地名称和命名空间 uri。

*更新*

如果如评论和更新的答案中所述，您希望保留命名空间并仅处理`def`元素，则进行如下小的修改：

```
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
 <xsl:apply-templates select="//def"/>
</xsl:template>

<xsl:template match="*">
 <xsl:variable name="n" select="name()"/>
 <xsl:variable name="new">
  <xsl:for-each select="document('prop.xml')">
   <xsl:choose>
    <xsl:when test="key('n',$n)">
     <xsl:value-of select="key('n',$n)"/>
    </xsl:when>
    <xsl:otherwise>
     <xsl:value-of select="$n"/>
    </xsl:otherwise>
   </xsl:choose>
  </xsl:for-each>
 </xsl:variable>
 <xsl:element name="{$new}" namespace="{namespace-uri()}">
  <xsl:copy-of select="@*"/>
  <xsl:apply-templates/>
 </xsl:element>
</xsl:template>

<xsl:key name="n" match="Property" use="@value"/>

</xsl:stylesheet> 
```

# php - PHP生成的javascript没有执行

> ID：10062896
> 
> 赞同：1
> 
> 时间：2012-04-08T12:46:39.637
> 
> 标签：php, javascript, ajax

以下下拉列表：

```
<select id='dropdown' name='dropdown' onchange='showChart(this.value)'>
<option value="1">Foo</value>
<option value="2">Bar</value>
</select> 
```

调用这个 javascript 函数 onchange：

```
<script type="text/javascript">
        function showChart(str1) {
            if (str1 == "") {
                document.getElementById("chartContainer").innerHTML = "";
                return;
            }
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    document.getElementById("chartContainer").innerHTML = xmlhttp.responseText;
                }
            };
            xmlhttp.open("GET", "../ajaxpage/chart.php?charttype=" + str1);
            xmlhttp.send();
        }
    </script> 
```

chart.php?charttype 看起来像这样：

```
<?php
$charttype = $_GET['charttype'];

if ($charttype == "1") {
    echo "<p>test1</p>";
    echo "<script type='text/javascript'>
        alert('test1');
    </script>";
} else {
    echo "<p>test2</p>";
    echo "<script type='text/javascript'>
        $(document).ready(function() {
          alert('test2');
        });
    </script>";
}

?> 
```

一切似乎都奏效了。段落标签中的 test1 和 test2 在下拉菜单的 graphContainer div onchange 中正确呈现。但是，javascript 没有执行。为什么生成的 javascript 不执行，我该如何解决这个问题？

谢谢。

**编辑**

这是非常犯规（但有效）的解决方法：

```
<img src="../images/loaded.gif" alt="" 
     onload="Code To Execute Here;this.parentNode.removeChild(this);" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:53:15.390

JavaScript 不使用 innerHTML 进行评估。

# java - 从 SQL 查询 Oracle 中检索一系列记录

> ID：10062901
> 
> 赞同：2
> 
> 时间：2012-04-08T12:47:11.307
> 
> 标签：java, sql, oracle, oracle10g, oracle11g

我有这个用于 JSF 分页的 Java 代码：

```
public List<ActiveSessionObj> list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws Exception {

        String SQL_LIST_BY_ORDER_AND_LIMIT = "SELECT * FROM ACTIVESESSIONSLOG ORDER BY ? ? LIMIT ?, ?";

        if (ds == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";
        String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection);
        Connection conn = ds.getConnection();
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            preparedStatement = conn.prepareStatement(sql);
            preparedStatement.setString(1, sortField);
            preparedStatement.setString(2, sortDirection);
            preparedStatement.setInt(3, firstRow);
            preparedStatement.setInt(4, rowCount);

            resultSet = preparedStatement.executeQuery();
            /* take the result from the SQL query and insert it into Array List collection */
            dataList = ActiveSessionsArrayList(resultSet);

        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            conn.close();
        }

        return dataList;
    } 
```

我使用这个 SQL 语句来生成 ArrayList：

```
SELECT * FROM ACTIVESESSIONSLOG ORDER BY ? ? LIMIT ?, ? 
```

这个 SQL 查询可以用于 Oracle 吗？或者这是特定于 MySQL 的？

最良好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:50:18.087

`LIMIT`是特定于 MySQL 的。但是在 Oracle 中，您可以`rownum`这样使用：

```
SELECT *
FROM (SELECT columnA, columnB, rownum as my_rownum
FROM ACTIVESESSIONSLOG
ORDER BY ? ?) 
WHERE my_rownum <= ? 
AND my_rownum >= ? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T13:42:51.780

```
Case1: If you want first `twenty Records` only then 

 select * from ( 
     select rn,a.*
     from Activesessionlogs a
     order by ??)
 where rn <=20
 order by rn

Case2:If you want the record between `5 to 10` then

select * from (
select rownum rn,e.* from Activesessionlogs e order by ??)
where rn >=5 and rn<=10 
order by rn 
```

**例如：** 让我们在下面找到一个示例

```
select * from (
select rownum rn,e.* from emp e order by hiredate)
where rn >=5 and rn<=10
order by rn asc 
```

![输出](../Images/1238d9a340de5ed8f0afd3435e3f9192.png)

**注意**：`Rownum> or rownum>=`不能在同一个查询中工作。一个很好的博客解释了这个[Oracle Rownum](http://blog.lishman.com/2008/03/rownum.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:52:23.380

不幸的是 LIMIT 不是 oracle 中的有效语句，它在 MySql 中使用。但是 oracle 有一个变量 ROWNUM 可以用来限制返回的行数：

```
select * from mytable where rownum <= 100 and rownum > 50 
```

从您的查询中返回后 50 条记录。

# java - 类图中的这些符号是什么？

> ID：10062909
> 
> 赞同：2
> 
> 时间：2012-04-08T12:49:06.543
> 
> 标签：java, uml

我使用类图了解 UML 和 java 的 OO 解释的基础知识。但是看了这堂课，我觉得很奇怪。什么是成员变量，它们在实际语言中代表什么？我猜到第一个是布尔类型（如果我是对的），但是其他成员变量是什么，尤其是那些带有一些参数的成员变量？任何帮助，将不胜感激。谢谢

[![](../Images/186351b4e9072e2d949dd1d3271edf1b.png "班级形象在这里")](https://imgur.com/WPzWh)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:56:17.937

您包含的此图不是*严格*的uml。据我所知，这意味着以下内容：

1.  你有一个名为 ElectricFan 的类
2.  您的类具有以下成员变量（功率、速度、最大速度、类型等）。在括号中，我猜作者已经包含了适用于每个成员变量的值。
3.  此外，作者还包括了适用于该类的方法（即 switchOnOff()、changeSpeed() 等）。

作者没有包含的一条重要信息是成员变量的可见性和类型以及方法参数和返回类型。

如果您有兴趣了解有关 UML 的更多信息，可以从阅读 Martining Fowler 的 UML 提炼开始 (http://www.amazon.com/UML-Distilled-Standard-Modeling-Language/dp/0321193687)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T12:51:20.650

括号中给出的值不是参数，而是看起来像枚举类型。就速度参数而言，它看起来像一个无符号整数。

# algorithm - 沿点的路径以均匀的速度移动

> ID：10062911
> 
> 赞同：0
> 
> 时间：2012-04-08T12:49:27.920
> 
> 标签：algorithm, path, geometry, pseudocode

我有一系列点，并且我有一个应该沿着这些点描述的路径移动的对象。

我知道我需要根据时间找到相应的段，但我不知道如何精确地做到这一点。

请注意，沿路径的速度应该是恒定的，因此您必须考虑路段的距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:56:48.617

像这样的东西？要在特定时间查找段，请遍历所有段，添加段的长度，直到到达目标时间。

```
public int findSegment(int [] segments, int time) {
   time_so_far = 0;
   int i = 0;
   while (time_so_far < time) {
     time_so_far += segments[i];
     i++;
   }
   return i-1;
} 
```

如果段长度是距离，并且您正在考虑的速度不是 1，那么您需要这样做`time_so_far += segments[i] / speed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:59:20.987

Beofre start 为每个点分配时间点：第一个点得到 time=0，每个下一个点得到 time[i+1]=time[i]+distance(i,i+1)/velocity。

然后对于每个时刻，您可以通过以下方式计算位置：

1.  找到第一个点，其中 time[i]<=current_time
2.  查找准确位置：point[i]+(current_time-time[i])*(point[i+1]-point[i])

# android - 检查捆绑包的一部分是否存在于 Android 中

> ID：10062916
> 
> 赞同：1
> 
> 时间：2012-04-08T12:50:23.967
> 
> 标签：android, if-statement, nullpointerexception, bundles

我正在开发一个应用程序，并从列表视图中创建一个包含所选项目和上一个项目的包。我需要确定的是前一个项目是否真的被捆绑在一起。如果它存在，我想要信息，但如果它不存在，那么我需要设置我的文本视图来反映这一点。但是如果在尝试加载接收活动时它不存在，我会得到一个空指针异常（捆绑活动不会导致崩溃，正如我在调试期间发现的那样 - 我到了我正在测试数据的地步在它崩溃之前捆绑）。所以我已经包含了接收活动的代码。

```
 Bundle evmBundle = this.getIntent().getExtras();
    final EVMData evm = (EVMData) evmBundle.getSerializable("evm");

    final Project project = (Project) evmBundle.getSerializable("project");

            if (!evmBundle.getSerializable("prvEVM").equals(null)){
        final EVMData prvEvm = (EVMData) evmBundle.getSerializable("prvEVM");
        edtPrvAC = (TextView) findViewById(R.id.edtPrvEVMAC);
        edtPrvAC.setText(prvEvm.getAc().toString());
    }
    else{
        edtPrvAC = (TextView) findViewById(R.id.edtPrvEVMAC);
        edtPrvAC.setText("0");
    } 
```

我知道在“prvEVM”的包中传递了一些东西，因为它在调试器中显示为包的一部分。

我还尝试先将其从捆绑包中取出，然后尝试进行比较。将其从捆绑包中拉出后，prvEvm 为空（查看调试器中的变量），所以我认为这样的事情可能会起作用：

```
 if (!prvEvm.equals(null)){
        edtPrvAC = (TextView) findViewById(R.id.edtPrvEVMAC);
        edtPrvAC.setText(prvEvm.getAc().toString());
    }else{
        edtPrvAC = (TextView) findViewById(R.id.edtPrvEVMAC);
        edtPrvAC.setText("0");
    } 
```

但我得到一个 NullPointerException 因为 prvEvm 是空的。所以我尝试翻转 if 测试，但得到了相同的结果。我应该注意，无论我如何设置它，如果 prvEvm 不为空，这里的所有配置都有效 - 请求的数据放在 TextView 中。基本上，我需要能够绕过这个空指针异常。我知道该对象为空，我想对其进行测试，如果是，则不使用该对象。它只会为空一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:52:34.463

不要`equals(null)`在空对象上调用方法（等于）时使用。相反，与 null 比较：

```
if (prvEvm != null){ 
```

此外，`equals(null)`总是返回 false。

# search - 如何使用 powershell 更改 Windows 搜索索引位置？

> ID：10062918
> 
> 赞同：1
> 
> 时间：2012-04-08T12:50:34.273
> 
> 标签：search, powershell, automation, indexing, windows-search

Windows 搜索索引的默认位置是`C:\ProgramData\Microsoft`. 就我而言，此位置位于空间有限的 SSD 上。因此，我想将索引缓存移动到具有更多空间的不同驱动器。我知道如何使用 GUI 来做到这一点。

我想了解如何使用 PowerShell 执行此操作？所以我可以自动化这个过程。

# devise - 我没有对 fb 用户的离线访问权限 - 我应该在会话中存储朋友列表吗？RoR、设计、Omniauth 和 FBGraph

> ID：10062921
> 
> 赞同：0
> 
> 时间：2012-04-08T12:51:00.927
> 
> 标签：devise, omniauth, facebook-access-token, fb-graph

我通过 facebook 在我的应用程序上对用户进行身份验证。执行此操作时，我获取访问令牌并执行验证。但是，在登录后不久，我将不得不向我的用户展示他们的朋友列表。问题是访问令牌到那时已经过期。

鉴于我正在使用 devise、omniauth 和 fbgraph gem，我该如何执行此操作？

想法：

*   获取新的访问令牌。我该怎么做呢？我是否必须修改我的omniauth_callbacks_controller？
*   我应该将朋友列表存储在会话变量中吗？

我的omniauth控制器：

```
def facebook
  @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)
  if @user.persisted?
    flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
    sign_in_and_redirect @user, :event => :authentication
  else
    session["devise.facebook_data"] = env["omniauth.auth"]
    redirect_to new_user_registration_url
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:43:57.717

看看这个.. [https://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

# java - 如何在多值 HashMap 中添加和删除项目？

> ID：10062924
> 
> 赞同：3
> 
> 时间：2012-04-08T12:51:04.223
> 
> 标签：java, collections, hashmap

我正在尝试将值添加到具有以下结构的多值 HashMap：

```
Map< Integer, List<Float> > map = new HashMap< Integer, List<Float> >(); 
```

我实际上想保存对特定项目的引用（例如，Android 中的 A View 信息），因此 s 的`Integer`值将包含唯一`HashMap`的项目，s 将包含项目 X 坐标值。用户在屏幕上可以有很多项目，他也可以有 100 个具有相同 ID 的项目，因此列表将包含每个项目 X 坐标值。`ID``List``Float`

为了更清楚，我的 HashMap 将包含以下数据

{1,{200, 400.5, 500.6 ...}}，其中 1 是键，其余是 ID 为 1 的项的浮点值。

现在我添加列表值如下...

```
List<Float> list = new ArrayList<Float>();

list.add(x_coord_1);
list.add(x_coord_2);
list.add(x_coord_3)
map.put(1, list); 
```

我现在面临的问题是弄清楚每次创建新 ID 时如何实例化一个新列表。

我将不得不为 100 个项目创建 100 个列表，这是不可行的，不知道 ID 的数量..

有没有更好的方法来解决这个问题...

我还想找到一种方法从`HashMap`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T13:58:16.500

这个怎么样 ：

```
public class multivalueHashmap {
    private Map< Integer, List<Float> > map = new HashMap< Integer, List<Float> >();

    public void add(Integer id, Float value){
        if(!map.containsKey(id)){
            map.put(id, new ArrayList<Float>());
        }
        map.get(id).add(value);
    }

    public void delete(Integer id, Float value){
        if(!map.containsKey(id)){
            return;
        }
        map.get(id).remove(value);
    }
} 
```

这样，您可以使用这些方法轻松添加和删除项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:51:54.483

您可以使用[Guava](http://code.google.com/p/guava-libraries/)的[Multimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)。

# wcf-routing - 基于内容的 WCF 路由器

> ID：10062926
> 
> 赞同：0
> 
> 时间：2012-04-08T12:51:13.043
> 
> 标签：wcf-routing

我正在寻找 WCF 路由器（基于内容和基于上下文）的示例，如果您有关于基于内容的 wcf 路由器的信息，请与我分享，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:52:12.783

[WCF路由服务](http://msdn.microsoft.com/en-us/library/ee517423.aspx)怎么样？

它：

1.  是 WCF![在此处输入图像描述](../Images/604db1b4b63ebc76047878f863faca8d.png)
2.  基于内容的路由![在此处输入图像描述](../Images/92cb0f32be72438748340cd0013340a8.png)

# excel - 在 Excel 中对银行交易进行分类

> ID：10062929
> 
> 赞同：4
> 
> 时间：2012-04-08T12:51:24.307
> 
> 标签：excel, array-formulas

我在 Excel 中有一个导出的银行交易列表，我想尽可能快速简单地对其进行分类。我怀疑这仅使用数组公式是可能的，但 VBA 函数同样有用。

**情景**

我的电子表格标题如下所示：

```
| A    | B           | C      | D        |
==========================================
| Date | Description | Amount | Category |
------------------------------------------ 
```

日期、描述和金额是从我的银行预先填充的。我在 D 列中填写每笔交易的类别。

这很好，但很耗时，因为每个类别都必须单独手动输入。

**需求**

我希望类别根据动态生成和应用的规则自动填充到我没有输入手动类别的行中。

我想要的输出如下所示：

```
| A        | B             | C       | D           | E         | F           |
==============================================================================
| Date     | Description   | Amount  | Manual cat. | Rule      | Auto cat.   |
------------------------------------------------------------------------------
| 04/08/12 | Starbucks NYC |  -$5.42 | Coffee      | starbucks | Coffee      |
| 04/09/12 | Wal-Mart 468  | -$54.32 | Supermarket | wal-mart  | Supermarket |
| 04/10/12 | Starbucks SF  |  -$3.68 |             |           | Starbucks   | 
```

如您所见，我在 D 列中输入了“手动”类别。无论我在哪里执行此操作，我都在 E 列中输入了一个分类“规则”。然后 Excel 使用我的条目来自动填充 F 列，

逻辑很简单：

*   在我输入手动类别的地方，Excel 做了两件事：

    1.  在 F 列中填充我的手动类别。
    2.  使用在 E 列中输入的文本创建规则。
*   当 Excel 遇到包含我的规则之一中使用的文本的描述时，它会填充 F 列中的相关类别。

**好处**

这将使快速浏览交易列表、添加类别和相关规则变得非常简单。没有类别的交易将在规则适用的地方自动填充，在规则不适用的地方留空。可以更正已应用规则给出错误类别的交易，并提供新规则。

**迄今为止我最好的尝试**

我创建了一种仅使用公式的方法，但它有三个缺点：

1.  它需要创建与事务一样多的列。
2.  没有方便的方式列出类别和相关规则。
3.  无法更改规则的应用顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-13T17:23:35.270

我也在寻找一个自动分类过程。上面的选项看起来非常强大，但比我想要的要复杂得多。

我的想法很简单：开发一套基于关键词的分类规则。如果在描述中找到关键字，则应用规则并设置类别。对使用 VBA 或 PowerShell 的想法不满意，继续四处寻找，发现以下帖子：

[John Bustos的 how-to-group-excel-items-based-on-custom-rules](https://stackoverflow.com/questions/21993727/how-to-group-excel-items-based-on-custom-rules)（请相信他）

John 的解决方案使用了一种非常简单的方法：

1.  规则在两列（关键字 - 类别）中定义 - 如果我们假设它们在列 F 和 G 中：

    ```
    Column F     Column G
    Keyword      Category
    Starbucks    Coffee shop
    Wal-Mart     Supermarket
    Safeway      Supermarket
    In-N-Out     Fast Food
    Comcast      Internet Service
    Verizon      Mobile Phone Service 
    ```

2.  然后将此 ARRAY 公式添加到要插入指向要检查规则的单元格的类别的单元格中（假设是单元格 A2）：

    ```
    =IFERROR(INDEX(G$2:G$7,MATCH(TRUE,ISNUMBER(SEARCH(F$2:F$7,A2)),0)),"Other") 
    ```

    请记住使用 CTRL+SHIFT+ENTER 确保它作为数组公式输入。如果您有更多规则，则需要更改范围高度。之后，您可以简单地将公式填充到您需要分类的所有行中。此外，分类使用第一条规则并坚持这一点，因此如果您在一个目标单元格中​​存在两个不同的关键字，则将应用第一个关键字分类规则。规则必须手动创建，当单元格显示“其他”时，表示没有找到关键字。

最后，这要归功于 John Bustos，[他是在这里提供解决方案的人](https://stackoverflow.com/questions/21993727/how-to-group-excel-items-based-on-custom-rules)。我发现他的解决方案简单且极易实现，因此我想将其包含在此处，因为通过“excel 中的自动分类”进行搜索并没有立即提出。我不得不尝试其他搜索词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:20:14.950

**介绍**

正如我之前指出的，以下解决方案针对您的即时需求进行了过度设计，因为

它是为我的需求而设计的，这些需求比您在问题中列出的更多样化：

*   我正在更换银行，所以我有两个活期（支票）账户和两个信用卡账户。我也有一些储蓄账户。我持有所有这些账户的电子报表，它们有不同的格式，跨越几个工作簿。
*   与我收到的相比，您的示例陈述非常简洁。这些是最近万事达卡声明中的一些描述，我将其整理为“组织名称，位置”的首选格式。

.

```
SAINSBURY'S S/MKT MONKS CROSS
Amazon *Mktplce EU-UK AMAZON.CO.UK LUX
WRAP LOUGHBOROUGH
SAINSBURYS PETROL MONKS CROSS 
```

*   像你一样，我对交易进行分类。
*   一些组织每年提前或每季度提前或拖欠账单。我的收入每个月都不一样。对于这些交易，我将金额分配到适当的月份，以便结果更好地反映我的真实财务状况。

我对这些多重要求的解决方案是为每个帐户设置一个控制例程，该例程知道它在哪里以及每列的用途。这些调用接受工作簿、工作表等作为参数并执行必要的转换和添加的常规例程。这些转换和添加的核心是一个我称之为“规则”的工作表，它包含三列：

```
RuleType       A code such as "OrgCat" 
In-keyword     A string, such as "Starbucks", to be found in a text column
Out-keyword    A string, such as "Coffee", to be returned if the In-keyword
               is found 
```

我使用的其他规则类型包括：

```
"OrgOrg"   Convert an organisation name used in the source statement to my
           preferred name for the organisation.
"CatPer"   Return a code identifying the apportioning rule for a category. For
           example, "Utility" returns "B3" (Back 3) because my utility bills
           are issued for three months in arrears. 
```

在您的问题中，您有帐户的“场景版本”和帐户的“需要版本”。我假设您已经手动创建了帐户的“需要版本”，这样您就可以看到它的样子。我提供了一个宏 CopyFromAcctToRule()，它可以处理您帐户的“需要版本”，验证和提取“OrgCat”类型的规则。如果没有发现错误，则将提取的规则输出到工作表“规则”，并将“需要版本”转换为“场景版本”。如果您尚未创建“需要版本”，我怀疑最简单的方法是创建部分“需要版本”，如下所示：

```
| A        | B             | C       | D           | E         |
================================================================
| Date     | Description   | Amount  | Category    | Rule      |
| 04/08/12 | Starbucks NYC |  -$5.42 | Coffee      | Starbucks |
| 04/09/12 | Wal-Mart 468  | -$54.32 | Supermarket | Wal-Mart  |
| 04/10/12 | Starbucks SF  |  -$3.68 |             |           |
| 04/11/12 | Wal-Mart 512  |-$123.45 |             |           | 
```

即找到第一家星巴克，填写其Category和Rule；找到第一家沃尔玛并填写其类别和规则；等等。运行 CopyFromAcctToRule()，它将在“G”列中显示您错过的不一致和组织的错误消息。对于一次性，填写类别但将规则留空。重复，修复错误并运行 CopyFromAcctToRule()，直到它没有发现错误并创建工作表“规则”。注意：缺少的类别在此阶段不会添加；这发生在下面。

我提供了一个宏 FillDerivedCol()，通过完成“场景版本”帐户的 Category 列来演示我如何使用它。如果您不想创建部分“需要版本”，FillDerivedCol() 提供了另一种方法。如果找不到描述的类别，它会将描述复制到工作表“规则”的底部。例如，假设您拼错了针对星巴克的规则，“规则”将被修改为：

```
| A        | B             | C            |
===========================================
| Type     | In keyword    | Out keyword  |
| OrgCat   | Sarbucks      | Coffee       |
| OrgCat   | Wal-Mart      | Supermarket  |
| OrgCat   | Starbucks NYC |              |
| OrgCat   | Starbucks SF  |              | 
```

也就是说，星巴克的每个分店都会有一个新的行。在这里，最简单的方法是更正 Sarbucks 行并删除新行。但是，如果是新组织，您可以编辑 In-keyword 以删除分支信息，然后在 Out-keyword 列中输入 Category。警告：我的答案超过了 30,000 个字符的限制。我不得不编辑这些例程以删除诊断代码。我希望我在执行此操作时没有引入任何错误。

我希望这很有用。祝你好运。

**全球的**

上述两个宏都使用这些全局常量和例程。我将它们放在自己的模块中，但这是您的选择。

```
Option Explicit
  ' I use constant for objects such as column numbers which are fixed
  ' for long periods but which might change. Any code using a column
  ' that has moved can be updated by changing the constant.
  Public Const ColRuleType As Long = 1
  Public Const ColRuleKeywordIn As Long = 2
  Public Const ColRuleKeywordOut As Long = 3
  Public Const ColRuleLast As Long = 3
  Public Const RowRuleDataFirst As Long = 2

  ' Rules are accumulated in this array by CopyFromAcctToRule
  ' Rules are loaded to this array by UpdateNewTransactions
  ' See GetRuleDetails() for a description of this array.
  Public RuleData() As Variant
Public Sub GetRuleDetails(ByVal RuleType As String, ByVal SrcText As String, _
                          ByRef KeywordIn As String, ByRef KeywordOut As String, _
                          Optional ByRef RowRuleSrc As Long)

  ' This routine performs a case-insensive search of a list of in-keywords for
  ' one that is present in SrcText.  If one is found, it returns the in-keyword
  ' and the matching out-keyword.

  ' This routine uses the previously prepared array RuleData.  Since RuleData
  ' is to be loaded to, or has been loaded from, a worksheet, the first
  ' dimension is for the rows and the second dimension is for the columns.

  ' RuleData has three columns:
  '  * RuleType: a code identifying a type of rule.  Only rows in RuleData for
  '    which this column matches the parameter RuleType will be considered.
  '  * KeywordIn: a string.  The first row in RuleData where the value of this
  '    column is contained within parameter SrcText is the selected Rule.
  '  * KeywordOut: a string.

  ' Input parameters
  '  * RuleType: Foe example, the rule type "OrgCat" will return a
  '    category for an organisation.
  '  * SrcText: The text field to be searched for the in keyword.

  ' Output parameters
  '  * KeywordIn: The value from the KeywordIn column of RuleData for the first
  '    row of RuleData of the required RuleType for which the KeywordIn value can
  '    be found in Desc.  The value in SrcText may be of any case although it is
  '    likely to be capitalised.  This value is the preferred display value.
  '  * KeywordOut: The value from the KeywordOut column of RuleData of the
  '    selected row.  For this routine, KeywordOut is a string with no
  '    significance.  It is the calling routine that understands the rule type.
  '  * RowRuleSrc: Only used during build of RuleData so the caller can access
  '    non-standard data held in RuleData during build.

  Dim LCSrcText As String
  Dim RowRuleCrnt As Long

  LCSrcText = LCase(SrcText)
  For RowRuleCrnt = RowRuleDataFirst To UBound(RuleData, 1)
    If RuleData(RowRuleCrnt, ColRuleKeywordIn) = "" Then
      ' Empty row.  This indicated end of table during build
      KeywordIn = ""
      KeywordOut = ""
      Exit Sub
    End If
    If RuleType = RuleData(RowRuleCrnt, ColRuleType) Then
      ' This row is for the required type of rule
      If InStr(1, LCSrcText, _
                  LCase(RuleData(RowRuleCrnt, ColRuleKeywordIn))) <> 0 Then
        ' Have found first rule with KeywordIn contained within SrcText
        KeywordIn = RuleData(RowRuleCrnt, ColRuleKeywordIn)
        KeywordOut = RuleData(RowRuleCrnt, ColRuleKeywordOut)
        If Not IsEmpty(RowRuleSrc) Then
          RowRuleSrc = RowRuleCrnt
        End If
        Exit Sub
      End If
    End If
  Next
  ' No rule found
  KeywordIn = ""
  KeywordOut = ""

End Sub 
```

**提取规则并将帐户从需要转换为 Scenerio 样式**

有关如何使用此例程的详细信息，请参阅简介。一旦您为现有交易建立了工作表“规则”，此代码可能没有进一步的价值。我会把它放在它自己的模块中，这样它就可以在使用后存档和删除。此代码假定工作表“Rule”和“Matt's Acct”在同一个工作簿中。我建议您复制您的帐户，创建工作表“规则”，然后在复制帐户上运行 CallCopyFromAcctRule() 并评估结果。警告：你在我使用“in-keyword”的地方使用“rule”；我试图在我的评论和错误消息中保持一致，但不能保证我有。

```
Option Explicit
Sub CallCopyFromAcctRule()

  ' This routine exists simply to make it easy to change the names of the
  ' worksheets accessed by CallCopyFromAcctRule.

  Call CopyFromAcctToRule("Rule", "Matt's Acct")

End Sub
Sub CopyFromAcctToRule(ByVal Rule As String, ByVal Acct As String)

  ' * This routine builds the worksheet Rule from worksheet Acct.
  ' * It works down worksheet Acct extracting rules from rows where
  '   there is both a Rule and a Category.  Note: this routine does not
  '   distinguish between Manual and Automatic Categories although, if both are
  '   present, they must be the same.
  ' * The routine checks for a variety of error and possible error conditions.
  '   Error and warning messages are placed in columns defined by ColAcctError
  '   and ColAcctWarn.
  ' * If any errors are found, the routine does not change either worksheet
  '   Acct, apart from adding error messages, or worksheet Rule.
  ' * If no errors are found, worksheet Rule is cleared and the contents of
  '   RuleData written to it.
  ' * If no errors are found, any warning added to worksheet Acct are discarded
  '   and the following additional changes made:
  '    * The values in the Automatic category column are merged into the Manual
  '      category column which is relabelled "Category".
  '    * The Rule and Automatic category columns are cleared.

  Dim ColAcctCatAuto As Long
  Dim ColAcctCatMan As Long
  Dim ColAcctCrnt As Long
  Dim ColAcctDesc As Long
  Dim ColAcctError As Long
  Dim ColAcctRule As Long
  Dim ColAcctWarn As Long
  Dim ColRuleRowSrc As Long
  Dim DescCrnt As String
  Dim ErrorFoundAll As Boolean
  Dim ErrorFoundCrnt As Boolean
  Dim KeywordInCrnt As String
  Dim KeywordInRetn As String
  Dim KeywordOutCrnt As String
  Dim KeywordOutRetn As String
  Dim RowAcctCrnt As Long
  Dim RowAcctDataFirst As Long
  Dim RowAcctLast As Long
  Dim RowRuleCrntMax As Long
  Dim RowRuleSrc As Long

  ' These column values must be changed if the true value do not match those
  ' in the example in the question.
  ColAcctDesc = 2
  ColAcctCatMan = 4
  ColAcctRule = 5
  ColAcctCatAuto = 6
  ColAcctError = 8
  ColAcctWarn = 9
  ColRuleRowSrc = ColRuleLast + 1
  RowAcctDataFirst = 2

  With Worksheets(Acct)
    RowAcctLast = .Cells.SpecialCells(xlCellTypeLastCell).Row

    ' Size the array for the output data ready to be loaded to worksheet
    ' Rule with rows as the first dimension.  Allow for the maximum number of
    ' rows because an array cannot be resized to change the number of
    ' elements in the first dimension.  Allow an extra column for use during
    ' the build process.
    ReDim RuleData(1 To RowAcctLast, 1 To ColRuleRowSrc)
    RuleData(1, ColRuleType) = "Type"
    RuleData(1, ColRuleKeywordIn) = "In keyword"
    RuleData(1, ColRuleKeywordOut) = "Out keyword"
    RowRuleCrntMax = 1      ' Last currently used row

    With .Cells(1, ColAcctError)
      .Value = "Error"
      .Font.Bold = True
    End With
    With .Cells(1, ColAcctWarn)
      .Value = "Warning"
      .Font.Bold = True
    End With

    ErrorFoundAll = False
    For RowAcctCrnt = RowAcctDataFirst To RowAcctLast
      .Cells(RowAcctCrnt, ColAcctError).Value = ""  ' Clear any error or warning
      .Cells(RowAcctCrnt, ColAcctWarn).Value = ""   ' from previous run
      ErrorFoundCrnt = False
      ' Determine Category, if any
      If .Cells(RowAcctCrnt, ColAcctCatMan).Value = "" Then
        ' There is no manual category.
        If .Cells(RowAcctCrnt, ColAcctCatAuto).Value <> "" Then
          KeywordOutCrnt = .Cells(RowAcctCrnt, ColAcctCatAuto).Value
        Else
          ' Neither manual nor automatic category
          KeywordOutCrnt = ""
        End If
      Else
        ' There is a manual category.  Is it consistent with automatic category?
        KeywordOutCrnt = .Cells(RowAcctCrnt, ColAcctCatMan).Value
        If .Cells(RowAcctCrnt, ColAcctCatAuto).Value <> "" Then
          ' Automatic category exists.  It must be the same
          ' as the manual category to be valid.
          If LCase(KeywordOutCrnt) <> _
                             LCase(.Cells(RowAcctCrnt, ColAcctCatAuto).Value) Then
            ErrorFoundCrnt = True
            .Cells(RowAcctCrnt, ColAcctError).Value = _
                                       "Manual and automatic categories different"
          End If
        End If
      End If
      If Not ErrorFoundCrnt Then
        ' Match Rule, if any, against Category, if any
        KeywordInCrnt = .Cells(RowAcctCrnt, ColAcctRule).Value
        If KeywordInCrnt <> "" Then
          ' This row has keyword
          If KeywordOutCrnt = "" Then
            ' Rule but no Category
            DescCrnt = .Cells(RowAcctCrnt, ColAcctDesc).Value
            Call GetRuleDetails("OrgCat", DescCrnt, KeywordInRetn, KeywordOutRetn)
            If KeywordInRetn <> "" Then
              ' Rule found that would generate a category for this Keyword.
              ' No warning necessary
            Else
              ' No rule found that would generate a category for this keyword
              ErrorFoundCrnt = True
              .Cells(RowAcctCrnt, ColAcctError).Value = _
                            "There is no existing rule that would " & _
                            "generate a Category from this Rule"
            End If
          Else
            ' Both Rule and Category found
            ' Is match already recorded?
            DescCrnt = .Cells(RowAcctCrnt, ColAcctDesc).Value
            Call GetRuleDetails("OrgCat", DescCrnt, KeywordInRetn, _
                                                   KeywordOutRetn, RowRuleSrc)
            If KeywordInRetn <> "" Then
              If KeywordInCrnt <> KeywordInRetn Then
                ' A different rule would be applied to this Description
                If InStr(1, LCase(DescCrnt), LCase(KeywordInCrnt)) = 0 Then
                  ' The current Rule is not within the Description
                  ErrorFoundCrnt = True
                  .Cells(RowAcctCrnt, ColAcctError).Value = _
                      "The Rule in column " & Chr(64 + ColAcctRule) & _
                      " is not within the Description.  The Rule " & _
                      "from row " & RowRuleSrc & " would generate " & _
                      "the required Category '" & KeywordOutRetn & _
                      "' from this Description"
                Else
                  ' The current Rule is within the Description
                  If LCase(KeywordOutRetn) = LCase(KeywordOutCrnt) Then
                    ' It would generate the same category
                    ErrorFoundCrnt = True
                    .Cells(RowAcctCrnt, ColAcctError).Value = _
                      "The Rule in column " & Chr(64 + ColAcctRule) & _
                      " is within the Description but the Rule from " & _
                      "row " & RowRuleSrc & " would be selected to " & _
                      "generate the required Category '" & _
                      KeywordOutRetn & "' from this Description"
                  Else
                    ' It would generate a different category
                    ErrorFoundCrnt = True
                    .Cells(RowAcctCrnt, ColAcctError).Value = _
                      "The Rule in column " & Chr(64 + ColAcctRule) & _
                      " is within the Description but the Rule from " & _
                      "row " & RowRuleSrc & " would be selected to " & _
                      "generate Category '" & KeywordOutRetn & _
                      "', not Category '" & KeywordOutCrnt & _
                      "', from this " & "Description"
                  End If
                End If
              Else
                ' Rule already recorded
                If LCase(KeywordOutRetn) = LCase(KeywordOutCrnt) Then
                  ' Rule already recorded for this category. No action required.
                Else
                  ' Rule already recorded but not for this category
                  ErrorFoundCrnt = True
                  .Cells(RowAcctCrnt, ColAcctError).Value = _
                                "The rule from row " & RowRuleSrc & _
                                " would generate category """ & _
                                KeywordOutRetn & """ for this Rule"
                End If
              End If
            Else
              ' New rule
              RowRuleCrntMax = RowRuleCrntMax + 1
              RuleData(RowRuleCrntMax, ColRuleType) = "OrgCat"
              RuleData(RowRuleCrntMax, ColRuleKeywordOut) = KeywordOutCrnt
              RuleData(RowRuleCrntMax, ColRuleKeywordIn) = KeywordInCrnt
              RuleData(RowRuleCrntMax, ColRuleRowSrc) = RowAcctCrnt
            End If
          End If  ' If CatCrnt = ""
        Else
          ' No keyword
          If KeywordOutCrnt = "" Then
            ' No Keyword and no Category
            DescCrnt = .Cells(RowAcctCrnt, ColAcctDesc).Value
            If DescCrnt = "" Then
              ' Probably a blank line.  Ignore
            Else
              ' Would an existing rule generate a Category for Description
              Call GetRuleDetails("OrgCat", DescCrnt, KeywordInRetn, KeywordOutRetn)
              If KeywordInRetn = "" Then
                ' No rule found that would generate a category
                ' for this description
                .Cells(RowAcctCrnt, ColAcctError).Value = _
                          "There is no rule that would generate " & _
                          "a Category from this Description"
              Else
                ' Rule found that would generate a category for
                ' this description.
              End If
            End If
          Else
            ' No Keyword but have Category
            ' Check for a rule that would give current category
            ' from current description
            DescCrnt = .Cells(RowAcctCrnt, ColAcctDesc).Value
            Call GetRuleDetails("OrgCat", DescCrnt, KeywordInRetn, _
                                                   KeywordOutRetn, RowRuleSrc)
            If KeywordInRetn <> "" Then
              ' Have found a rule for the description
              If LCase(KeywordOutRetn) = LCase(KeywordOutCrnt) Then
                ' Rule generates current category
              Else
                ' Rule does not generate current category
                ErrorFoundCrnt = True
                .Cells(RowAcctCrnt, ColAcctError).Value = _
                     "The rule from row " & RuleData(RowRuleSrc, ColRuleRowSrc) & _
                     " would generate Category '" & KeywordOutRetn & _
                     "' from this Description"
              End If
            Else
              ' There is no rule for this Description.  This is not necessarily
              ' an error.  The category may have to be set manually.
              .Cells(RowAcctCrnt, ColAcctWarn).Value = _
                            "There is no rule that would generate " & _
                            "this Category from this Description"
            End If
          End If    ' If KeywordOutCrnt = ""
        End If      ' KeywordInCrnt <> ""
      End If  ' If Not ErrorFoundCrnt
      If ErrorFoundCrnt Then
        ErrorFoundAll = True
      End If
    Next
  End With

  If ErrorFoundAll Then
     Exit Sub
  End If

  ' No errors found

  ' Clear existing contents from worksheet Rule and load with RuleData
  With Worksheets(Rule)
    .Cells.EntireRow.Delete
    .Range(.Cells(1, 1), .Cells(RowRuleCrntMax, _
                                        ColRuleKeywordOut)).Value = RuleData
    .Range("A1:C1").Font.Bold = True
    .Columns.AutoFit
  End With

  With Worksheets(Acct)
    ' Merge values from automatic category column into manual category column
    For RowAcctCrnt = 2 To RowAcctLast
      If .Cells(RowAcctCrnt, ColAcctCatMan).Value = "" Then
        ' There is no manual category so set to automatic category.
        .Cells(RowAcctCrnt, ColAcctCatMan).Value = _
                                    .Cells(RowAcctCrnt, ColAcctCatAuto).Value
      End If
    Next
    ' Clear automatic category
    .Columns(ColAcctCatAuto).ClearContents
    ' Change column heading
    With .Cells(1, ColAcctCatMan)
      .Value = "Category"
      .Font.Bold = True
    End With
    ' Clear Error and Warning columns
    .Columns(ColAcctError).ClearContents   ' Only heading to clear
    .Columns(ColAcctWarn).ClearContents
    ' Clear Rule column
    .Columns(ColAcctRule).ClearContents
  End With

End Sub 
```

**完成您的场景版本帐户的类别列**

这演示了我如何为新交易填写类别列。

```
Option Explicit
Sub CallFillDerivedCol()

  ' I use FillDerivedCol() on worksheets loaded with transactions for different
  ' accounts.  They are in different workbooks, different worksheets and have
  ' different columns.  This routine exists to call FillDerivedCol() for my
  ' test version of your account

  Call FillDerivedCol(ActiveWorkbook, "Rule", _
                      ActiveWorkbook, "Matt's Acct", "OrgCat", 2, 4)

  ' For this example, I had the rules and the account in same workbook.  To
  ' have them in different workbooks, as I normally do, you will need something
  ' like:

  '  Dim PathCrnt As String
  '  Dim WBookOrig As Workbook
  '  Dim WBookOther As Workbook

  '  Set WBookOrig = ActiveWorkbook
  '  PathCrnt = ActiveWorkbook.Path & "\"
  '  Set WBookOther = Workbooks.Open(PathCrnt & "xxxxxxx")

  '  Call FillDerivedCol(WBookOrig, "Rule", _
  '                      WBookOther, "Matt's Acct", "OrgCat", 2, 4)

  '  WBookOther.Close SaveChanges:=True

End Sub
Sub FillDerivedCol(ByVal WBookRule As Workbook, ByVal WSheetRule As String, _
                   ByVal WBookTrans As Workbook, ByVal WSheetTrans As String, _
                   ByVal RuleType As String, _
                   ByVal ColSrc As Long, ByVal ColDest As Long)

  ' Fill any gaps in WBookTrans.Worksheets(WSheetTrans).Columns(ColDest) based on
  ' rules in worksheet WBookRule.Worksheets(WSheetRule).

  ' WBook.Worksheets(WSheetTrans).Columns(ColSrc) is a text field which
  ' contains in-keywords.  Rules of type RuleType convert in-keywords to
  ' out-keywords which are the values required for .Columns(ColDest).

  Dim CellEmptyDest As Range
  Dim KeywordIn As String
  Dim KeywordOut As String
  Dim MissingRule() As Variant
  Dim RowAcctCrnt As Long
  Dim RowAcctPrev As Long
  Dim RowMissingCrntMax As Long
  Dim RowRuleLast As Long

  ' Load array RuleData from worksheet Rule
  With WBookRule.Worksheets(WSheetRule)
    RowRuleLast = .Cells(Rows.Count, 1).End(xlUp).Row
    RuleData = .Range(.Cells(1, 1), .Cells(RowRuleLast, ColRuleLast)).Value
  End With

  ' * Prepare MissingRule() in case any calls to GetRuleDetails() fails to
  '   find a known in-keyword in WBook.Worksheets(WSheetName).Columns(ColDest).
  ' * The number of occurrences of the first dimension cannot be changed. 500
  '   is intended to be more occurrences than could possible be needed. If
  '   more than 500 missing rules are found, only the first 500 will be added
  '   to worksheet "Rule"  This routine can be immediately run again to add
  '   another 500 missing rules.
  ReDim MissingRule(1 To 500, 1 To ColRuleLast)
  RowMissingCrntMax = 0

  With WBookTrans
    With .Worksheets(WSheetTrans)
      RowAcctPrev = 1
      ' Find the next empty cell in column ColDest for a transaction row
      Set CellEmptyDest = .Columns(ColDest).Find(What:="", _
                      After:=.Cells(RowAcctPrev, ColDest), LookIn:=xlFormulas, _
                      LookAt:=xlWhole, SearchOrder:=xlByRows, _
                      SearchDirection:=xlNext, MatchCase:=False, _
                      SearchFormat:=False)
      Do While True
        If CellEmptyDest Is Nothing Then
          ' No empty cell found in column.  This is not a realistic situation
          ' because it would require every row in the worksheet to have a value.
          Exit Do
        End If
        RowAcctCrnt = CellEmptyDest.Row
        If RowAcctCrnt < RowAcctPrev Then
          ' Have looped back to the top.  This is not a realistic situation
          ' because it would require every row in the worksheet to have a value.
          Exit Do
        End If
        If .Cells(RowAcctCrnt, ColSrc).Value = "" Then
          ' This row has no value in either the source or the destination
          ' columns.  Assume all transactions finished
          Exit Do
        End If
        Call GetRuleDetails(RuleType, .Cells(RowAcctCrnt, ColSrc).Value, _
                                                          KeywordIn, KeywordOut)
        If KeywordIn = "" Then
          ' No in-keyword found within source column.  Add source column value
          ' to MissingData for user to edit.
          If RowMissingCrntMax >= UBound(MissingRule, 1) Then
            ' All available rows in MissingRule already used
          Else
            RowMissingCrntMax = RowMissingCrntMax + 1
            MissingRule(RowMissingCrntMax, ColRuleType) = RuleType
            MissingRule(RowMissingCrntMax, ColRuleKeywordIn) = _
                                              .Cells(RowAcctCrnt, ColSrc).Value
          End If
        Else
          .Cells(RowAcctCrnt, ColDest).Value = KeywordOut
        End If
        RowAcctPrev = RowAcctCrnt
        Set CellEmptyDest = .Columns(ColDest).FindNext(CellEmptyDest)
      Loop
    End With
  End With

  If RowMissingCrntMax > 0 Then
    ' Transactions found for which no rule exists.  Add to worksheet "Rule"
    ' for attention by the user.
    With WBookRule.Worksheets(WSheetRule)
      RowRuleLast = .Cells(Rows.Count, 1).End(xlUp).Row
      .Range(.Cells(RowRuleLast + 1, 1), _
             .Cells(RowRuleLast + RowMissingCrntMax, ColRuleLast)).Value _
                                                                 = MissingRule
    End With
  End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T05:33:12.210

这似乎是一条死线，但是当我的银行要求我提供有关我每月支出的详细信息时，我也遇到了同样的问题。

我不想写 VBA，所以我写了一个 PowerShell 脚本来为我做这件事。它有一个名为的数组`$Rules`，您可以在其中定义模式及其类别。最后匹配的模式将是项目的类别。我在每个模式的末尾添加一个 * 并使用 -like 运算符。

这有点慢，因为 PowerShell 访问 Excel 单元格的速度很慢，而且我的银行对账单导出中的 1000 行需要几分钟时间。 `$DesColumn`是指存储银行对账单描述`$CatColumn`的列，是要保存类别的列。

应用脚本后，您可以使用 Excel PIVOT 功能创建汇总数据的饼图。记得备份你的文件！

 `````
 $xl = New-Object -comobject Excel.Application
 # Show Excel
 $xl.visible = $false
 $xl.DisplayAlerts = $False
 # Create a workbook
 $wb = $xl.Workbooks. open("C:\Accounting\Accounting_2013.xls" )
 # Get sheets
 $ws = $wb.WorkSheets.item( "Costs")
 $ws.activate()
 $DescColumn = 6
 $CatColumn = 7
 $Rng = $ws.UsedRange.Cells
 $intRowMax = $Rng.Rows.Count
 #$intRowMax = 50
 $Rules =@(
 @("*FOOD","GROCERY"),
 @("*Hotel","FUN"),
 @("*ADVENTURES","FUN"),
 @("CINEPLEX","FUN"),
  @("EVENT CINEMAS","FUN"),
 @("*Rent","RENT"),
 @("Wdl ATM","ATM"),
 @("IKEA","HOME"),
 @("FORM HOME","HOME"),
  @("KMART","HOME"),
  @("BIG W","HOME"),
  @("PILLOW TALK","HOME"),
  @("BUNNING","HOME")
 @("IGA","GROCERY"),
  @("COLES","GROCERY"),
  @("ALDI","GROCERY"),
   @("FRUITY CAPERS","GROCERY"),
 @("WOOLWORTHS","GROCERY"),
  @("MEGAFRESH","GROCERY"),
 @("CALTEX","CAR"),
 @("COLES EXP","CAR"),
 @("CTX WOW","CAR"),
 @("BP EXPRESS","CAR"),
 @("QLD TRANSPORT","CAR"),
 @("REPCO","CAR"),
 @("FREEDOM FUEL","CAR"),
 @("BP THE GAP","CAR"),
@("MCDONALDS","DINE"),
@("RED ROOSTER","DINE"),
@("*SIZZLER","DINE"),
@("DOMINO","DINE"),
  @("SUBWAY","DINE"),
 @("ROUTE 74","DINE"),
 @("KFC","DINE"),
 @("*PIZZA","DINE"),
 @("GUZMAN","DINE"),
 @("NANDOS","DINE"),
 @("*PIZZERI","DINE"),
 @("MISS INDIA","DINE"),
 @("INDIAN FEAST","DINE"),
 @("VIVIDWIRELESS","BILL"),
 @("TPG","BILL"),
 @("AGL","BILL"),
 @("EnergyAustralia","BILL"),
 @("TRANSLINK","PTRANSPORT")
 )
for ($intRow = 2 ; $intRow -le $intRowMax ; $intRow++) {
     $SvrName = $Rng.cells.item($intRow, $DescColumn).value2
    ""+$intRow+"/"+$intRowMax+" "+ $SvrName
        $Rules | ForEach-Object{
            $key = ($_[0])+"*"
            if($SvrName -like $key)
            {
                $Rng.cells.item($intRow, $CatColumn).value2 = $_[1]
            }
        }
     }
$wb.Save()
$wb.Close()
$xl.Quit()
[System.Runtime.Interopservices.Marshal]::ReleaseComObject($xl) 
````  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T13:22:52.237

我对我的信用卡账单做了类似的事情。我使用 VBA 是因为我发现描述不一致并且需要不同的技术来对它们进行分类。

我使用的方法是有一个我称之为规则的工作表，其中包含：

```
Organisation     Category
Starbucks NYC    Coffee shop
Starbucks SF     Coffee shop
Wal-Mart 468     Supermarket 
```

注意，我每个分支都有一行。如果您经常旅行，但如果没有一致性，那就别无选择了，这会很痛苦。

在声明的 D 列中，我键入`=VLOOKUP(B2,Rule!A:B,2,FALSE)`然后将其复制下来。

每个月都有新组织被归类为“#N/A”。我要么输入一次性分类，要么将组织添加到工作表规则。``

# matlab - MATLAB：使用 dsolve 确定精确解

> ID：10062930
> 
> 赞同：1
> 
> 时间：2012-04-08T12:51:24.790
> 
> 标签：matlab

我正在做一个项目，我在其中实施 Runge Kutta 2nd、3rd 和 4th order。项目中的最后一个要求是：“对于性能研究，您可以使用不同的微分方程，使用 dsolve 来确定精确解。”。
如果我有类似 dy/dx=-2*y+x+4
我应该如何使用 dsolve 来解决它并计算 y 的值在几个 x 值中？我用 RK 计算了它在 0.2、0.4、0.6、0.8、1 中的值。我想找到 RK 的结果和精确解之间的差异。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:00:50.173

我没有符号数学工具箱，所以我无法测试它，但它看起来像

```
S = dsolve('Dy = -2*y+x+4', 'x'); 
```

将为您提供 S 中的一系列解决方案。[http://www.mathworks.co.uk/help/toolbox/symbolic/dsolve.html](http://www.mathworks.co.uk/help/toolbox/symbolic/dsolve.html)

# asp.net-mvc-3 - 通过更改 mvc3 中的 URL 查询参数来避免对页面的未经授权的访问

> ID：10062931
> 
> 赞同：1
> 
> 时间：2012-04-08T12:51:36.443
> 
> 标签：asp.net-mvc-3, security, url

我是 mvc 的新手，我有一个问题：如果我有索引页面（带有某些对象列表的页面，这是 url [http://localhost:6384/admin/](http://localhost:6384/admin/)）并且我有 actionlink 按钮，当用户点击时他会得到该对象的详细信息是 url [http://localhost:6384/Admin/Apartman/details/1](http://localhost:6384/Admin/Apartman/details/1)。

对象的 ID 为 1，但如果用户将值 1 更改为其他值，他将获得其他可能他看不到的对象。

我可以做些什么来保护应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:59:51.377

我这样做的方式只是检查用户是否有权访问该对象。

```
public ActionResult EditProfile(int id)
{      
  ApartmentViewModel objVM=MyService.GetApartment(id);
  if(objVM.CreatedById==id)
  {
     return View(objVM);
  }
  else
  {
    return View("UnAuthorized");
  }
} 
```

# java - 如何在 Android WebView 中设置缩放

> ID：10062937
> 
> 赞同：1
> 
> 时间：2012-04-08T12:52:53.270
> 
> 标签：java, android, webkit, android-webview

我需要将 WebView 的比例设置为给定值。顺便说一句，我正在使用

```
if (targetScale<wv.getScale){
    while (wv.getScale>targetScale){
         wb.zoomIn();
    }
} else {
    while (wv.getScale<targetScale){
         wb.zoomOut();
    }
} 
```

但这是一个非常糟糕的方法（因为如果目标比例非常大或非常小，bucle 可以是无限的）。我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:42:37.110

不幸的是，到目前为止，android webiview 中没有可用的 setscale 方法。setInitialScale 在加载 webview 之前工作。但在运行时它不起作用。但是通过使用 setScalX 和 setScalY，您可以在水平和垂直方向上获得一些缩放结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T03:18:49.537

要在运行时完全缩小，这里有一个解决方法；

```
 while(viewMap.zoomOut()); 
```

# html - 使 li 完全覆盖 ul 没有固定宽度的 li

> ID：10062942
> 
> 赞同：2
> 
> 时间：2012-04-08T12:54:11.680
> 
> 标签：html, css, menu, html-lists

我有一个水平菜单导航。

![在此处输入图像描述](../Images/5201b1815547716501f0c60ff9ccf0a0.png)

代码是：

```
<div class="menu-holder">
    <ul class="menu"> 
        <li>
            <a href="#">Home</a> 
        </li>
        <li>
            <a href="#">Profile</a> 
        </li>
        <li>
            <a href="#">Billing</a> 
            <ul class="submenu"> 
                <li><a href="#">New</a></li> 
                <li><a href="#">Find</a></li>                         
            </ul>
        </li>
        <li>
            <a href="#">Workspaces</a> 
        </li>
        <li>
            <a href="#">Manage Leaves</a> 
        </li>
        <li>
            <a href="#">Blogs</a> 
        </li>
        <li>
            <a href="#">News</a> 
        </li>
        <li>
            <a href="#">Search</a> 
        </li>              
        <li>
            <a href="#">Albums</a> 
        </li> 
    </ul>         
</div> 
```

CSS：

```
ul.menu {
    list-style: none;
    padding: 0 20px;    
    margin: 0;
    float: left;
    width: 960px;
    background: #222;
    font-size: 1.2em;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    border-radius: 10px;    
    behavior: url(CSS3PIE);
}
ul.menu li {
    float: left;
    margin: 0;  
    padding: 0 15px 0 0;
    position: relative; 
}
ul.menu li a{
    padding: 10px 5px;
    color: #fff;
    display: block;
    text-decoration: none;
    float: left;
}
ul.menu li a:hover{
    background: url(Images/topnav_hover.gif) no-repeat center top;
}
ul.menu li span { 
    width: 17px;
    height: 35px;
    float: left;
    background: url(Images/subnav_btn.gif) no-repeat center top;
}
ul.menu li span.subhover {background-position: center bottom; cursor: pointer;} 
ul.menu li ul.submenu {
    list-style: none;
    position: absolute; 
    left: 0; top: 44px;
    background: #333;
    margin: 0; padding: 0;
    display: none;
    float: left;
    width: 170px;
    border-radius: 5px; 
    -webkit-border-radius: 5px;
    border: 1px solid #111;
    behavior: url(CSS3PIE);
}
ul.menu li ul.submenu li{
    margin: 0; padding: 0;
    border-top: 1px solid #252525; 
    border-bottom: 1px solid #444; 
    clear: both;
    width: 170px;
}
html ul.menu li ul.submenu li a {
    float: left;
    width: 145px;
    background: #333 url(Images/dropdown_linkbg.gif) no-repeat 10px center;
    padding-left: 20px;
}
html ul.menu li ul.submenu li a:hover { 
    background: #222 url(Images/dropdown_linkbg.gif) no-repeat 10px center; 
} 
```

也有 jQuery 被用来创建这个导航。

现在我想让 li 完全覆盖 ui。但没有对 li 应用固定宽度。因为根据登录用户的角色，还有另一个菜单项（图中未显示）。

是否可以？

* * *

![在此处输入图像描述](../Images/a293218da47c157ccd178c2f06c16eb6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:38:29.783

我相信解决这个问题的最好方法是使用`display: table/table-cell`而不是`float: left`. 这是一个小提琴：http: [//jsfiddle.net/nk7yY/](http://jsfiddle.net/nk7yY/)

基本上，您将在代码中更改的是：

```
ul.menu {
    display: table;
    width: 100%; /* Tables are not 100% width like block elements */
    /* Everything you already had except float: left; which I don't really get why you have to begin with */
}

ul.menu li {
    display: table-cell;
    /* Everything you already had except float: left; */
}

ul.menu li a {
    /* Just remove the float here as well */
} 
```

编辑：虽然这在旧 IE 中不起作用，但您可以为它们保留浮动（`*float`例如，使用 hack）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:18:42.267

你是说你有 9 个 ul.menu li 元素，有时会有第 10 个？并且您希望所有 9 个（或 10 个）一起填充 ul.menu 的宽度？

还是您在谈论 ul.submenu？

只是说“让 li 完全覆盖 ui”听起来也像是你想要一个 <li> 来覆盖导航 ui 的整个宽度（假设它是你的 <ul> 而不是你的 UI 的其他部分。

这是你想做的吗？还是您只希望所有 9 或 10 个 <li> 项目填充 <ul> 的空间？

如果是这样，您可能应该在 <ul class="menu"> 上放置一个类，该类会根据登录用户的角色而变化，以便您可以相应地调整样式。

提供更多关于您尝试做什么以及您想要支持哪些浏览器的信息，即 CSS3。

# generics - 在条件下加入两个列表

> ID：10062945
> 
> 赞同：1
> 
> 时间：2012-04-08T12:54:46.960
> 
> 标签：generics, .net-3.5, c#-3.0

我有以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestSomethingRelatedToLINQ
{
    class Person : IEqualityComparer<Person>
    {
        internal int personID;
        internal string PersonName;

        public bool Equals(Person x, Person y)
        {
            return x.personID == y.personID;
        }
        public int GetHashCode(Person obj)
        {
            return obj.personID.GetHashCode();
        }

    }
    class Program
    {
        static void Main(string[] args)
        {
            List<Person> list1 = new List<Person>{            
            new Person{personID = 1 , PersonName = "Ali"},
            new Person{personID = 2 , PersonName = "Ali1"},
            new Person{personID = 3 , PersonName = "Ali2"}            
            };

            List<Person> list2 = new List<Person>{            
            new Person{personID = 4 , PersonName = "Habib1"},
            new Person{personID = 2 , PersonName = "Habib2"},
            new Person{personID = 5 , PersonName = "Habib3"}            
            };           

        }
    }
} 
```

我需要选择 list1 中的所有元素，并且 list2 中没有 personID 的所有元素都存在于 List1 中，然后按 personID 对结果进行排序

新的输出应该像

```
1, Ali 
2, Ali1 
3, Ali2
4, Habib1
5, Habib3 
```

任何想法如何使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:08:34.677

首先调用 LINQ Concat，以便将列表 2 附加到列表 1。

然后调用 LINQ Distinct，它将删除重复的条目（前者或后者）。

[该站点](http://www.codeproject.com/Articles/94272/A-Generic-IEqualityComparer-for-Linq-Distinct)建议您使用的类，您只需实现 IEqualityComparer 接口。

# javascript - Firefox 首选项正在破坏 JSON

> ID：10062946
> 
> 赞同：3
> 
> 时间：2012-04-08T12:55:05.037
> 
> 标签：javascript, json, firefox-addon

我有以下 JSON： http: [//pastebin.com/Sh20StJY](http://pastebin.com/Sh20StJY)

^(所以删除了我帖子上的字符，所以看看真正的 JSON 的链接)

`JSON.stringify`它是使用Firefox prefs ( `pref.setCharPref(prefName, value);`)生成并保存在

问题是当我保存值时，Firefox 会做一些破坏 JSON 的事情。如果我尝试`JSON.parse`从配置中检索值，则会收到错误消息：

```
Error: JSON.parse: bad control character in string literal 
```

[如果我尝试验证上面的 JSON](http://jsonlint.com/)（从设置中检索），我在 处收到错误`line 20`，令牌值包含两个无效字符。

如果我在错误没有发生`JSON.parse`后立即尝试。`JSON.stringify`

我是否必须设置一些东西才能以不同的编码保存？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:17:07.783

`nsIPrefBranch.getCharPref()`仅适用于 ASCII 数据，但是您的 JSON 数据包含一些非 ASCII 字符。您可以将 Unicode 数据存储在首选项中，只是稍微复杂一点：

```
var str = Components.classes["@mozilla.org/supports-string;1"]
                    .createInstance(Components.interfaces.nsISupportsString);
str.data = value;
pref.setComplexValue(prefName, Components.interfaces.nsISupportsString, str); 
```

并阅读该偏好：

```
var str = pref.getComplexValue(prefName, Components.interfaces.nsISupportsString);
var value = str.data; 
```

供参考：[文档](https://developer.mozilla.org/en/Code_snippets/Preferences)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:44:50.620

您的 JSON 似乎包含非 ASCII 字符，例如`½`. 你能检查所有正在处理的编码是什么吗？

[`nsIPrefBranch.setCharPref()`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIPrefBranch#setCharPref%28%29)假设它的输入是 UTF-8 编码的，并且返回值[`nsIPrefBranch.getCharPref()`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIPrefBranch#getCharPref%28%29)始终是一个 UTF-8 字符串。如果您的输入是字节串或其他编码的字符，您将需要切换到 UTF-8，或者在与首选项交互时自行编码和解码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:18:19.237

我在一个地方做了这个来解决这个问题：

```
(function overrideJsonParse() {
    if (!window.JSON || !window.JSON.parse) { 
        window.setTimeout(overrideJsonParse, 1); 
        return;  //this code has executed before JSON2.js, try again in a moment
    }
    var oldParse = window.JSON.parse;
    window.JSON.parse = function (s) {
        var b = "", i, l = s.length, c;
        for (i = 0; i < l; ++i) {
            c = s[i];
            if (c.charCodeAt(0) >= 32) { b += c; }
        }
        return oldParse(b);
    };
}()); 
```

这适用于 IE8（使用 json2 或其他）、IE9、Firefox 和 Chrome。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:01:08.570

代码似乎正确。尝试使用单引号 '..': '...' 而不是双引号 "..":"..." 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T18:39:32.417

我仍然找不到解决方案，但我找到了解决方法：

```
var b = "";
[].forEach.call("{ JSON STRING }", function(c, i) {
    if (c.charCodeAt(0) >= 32)
        b += c;
}); 
```

现在`b`是新的 JSON，可能会工作......

# c# - 使用 JavaScript 在 asp.net 页面和 GA 服务器之间传递值

> ID：10062952
> 
> 赞同：0
> 
> 时间：2012-04-08T12:55:52.537
> 
> 标签：c#, javascript, asp.net

```
protected void Button_Click(object sender, CommandEventArgs e)
        {
            Response.Redirect("EnterSession.aspx?session=" + e.CommandArgument.ToString());
        } 
```

上面的代码将 session_id 作为查询字符串传递给 EnterSession.aspx

我有以下与 EnterSession.aspx 相关的 c# 代码

```
protected string _SessionName = null;
        public string SessionName;
        public string sessionId
        {
            get
            {
                if (null == _SessionName)
                {
                    SqlConnection thisConnection = new SqlConnection(@"data Source=sorce");
                    {
                        thisConnection.Open();
                        SqlCommand thisCommand = thisConnection.CreateCommand();
                        thisCommand.CommandText = " SELECT session_name FROM myapp_Session WHERE session_id = @SessionId;";
                        {
                            thisCommand.Parameters.AddWithValue("sessionId", sessionId);
                            SqlDataReader thisReader = thisCommand.ExecuteReader();

                            thisCommand.Parameters["@SessionId"].Value = Convert.ToInt32(Request.QueryString["session"]);

                            using (var reader = thisCommand.ExecuteReader())
                            {
                                if (reader.Read())
                                {
                                    _SessionName = reader.GetString(0);
                                }
                                else
                                {
                                    throw new ArgumentException("Invalid session id");
                                }
                            }
                        }
                    }
                }
                return _SessionName;
            }
        } 
```

现在在 EnterSession.aspx 中，我使用此代码将 session_name 传递给 GA

```
_gaq.push(['pageTrackerTime._trackEvent', document.getElementById('session_name').value, 'test', document.location.href, roundleaveSiteEnd]); 
```

我也将此代码包含在 EnterSession.aspx 页面中

```
 <input type="hidden" id="session_name" />
<script type="text/javascript">
    document.getElementById('session_name').value = '<%= this.SessionName %>';
</script> 
```

现在我找不到传递给 GA 服务器的 session_name。

有人可以告诉我我在哪里犯了错误..thanx

# python - ValueError：具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()

> ID：10062954
> 
> 赞同：319
> 
> 时间：2012-04-08T12:56:07.840
> 
> 标签：python, numpy

我刚刚在我的代码中发现了一个导致各种问题的逻辑错误。我无意中做了**按位 AND**而不是**逻辑 AND**。

我将代码更改为：

```
r = mlab.csv2rec(datafile, delimiter=',', names=COL_HEADERS)
mask = ((r["dt"] >= startdate) & (r["dt"] <= enddate))
selected = r[mask] 
```

到：

```
r = mlab.csv2rec(datafile, delimiter=',', names=COL_HEADERS)
mask = ((r["dt"] >= startdate) and (r["dt"] <= enddate))
selected = r[mask] 
```

令我惊讶的是，我收到了相当神秘的错误消息：

> ValueError：具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()

为什么当我使用按位运算时没有发出类似的错误 - 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-04-08T13:08:01.283

`r`是一个 numpy (rec) 数组。`r["dt"] >= startdate`（布尔）数组也是如此。对于 numpy 数组，该`&`操作返回两个布尔数组的元素与。

NumPy 开发人员认为没有一种普遍理解的方式来评估布尔上下文中的数组：它可能意味着`True`如果*任何*元素是 `True`，或者它可能意味着`True`如果*所有*元素都是`True`，或者`True`如果数组具有非零长度，仅举三例可能性。

由于不同的用户可能有不同的需求和不同的假设，NumPy 开发人员拒绝猜测，而是决定在尝试在布尔上下文中评估数组时引发 ValueError。应用于`and`两个 numpy 数组会导致在布尔上下文中评估两个数组（通过`__bool__`在 Python3 或`__nonzero__`Python2 中调用）。

您的原始代码

```
mask = ((r["dt"] >= startdate) & (r["dt"] <= enddate))
selected = r[mask] 
```

看起来正确。但是，如果您确实想要`and`，则不要`a and b`使用`(a-b).any()`or `(a-b).all()`。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-12-16T16:36:56.020

我遇到了同样的问题（即多条件索引，这里是在某个日期范围内查找数据）。`(a-b).any()`或似乎不起作用，`(a-b).all()`至少对我来说。

或者，我找到了另一种非常适合我所需功能的解决方案（[在尝试索引数组时，具有多个元素的数组的真值是模棱两可的](https://stackoverflow.com/questions/12647471/the-truth-value-of-an-array-with-more-than-one-element-is-ambigous-when-trying-t)）。

而不是使用上面建议的代码，只需使用 a`numpy.logical_and(a,b)`就可以了。在这里，您可能希望将代码重写为

```
selected  = r[numpy.logical_and(r["dt"] >= startdate, r["dt"] <= enddate)] 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2017-06-03T15:46:59.090

异常的原因是`and`隐式调用`bool`. 首先在左操作数和（如果左操作数是`True`）然后在右操作数上。所以`x and y`等价于`bool(x) and bool(y)`。

但是`bool`on a `numpy.ndarray`（如果它包含多个元素）将抛出您看到的异常：

```
>>> import numpy as np
>>> arr = np.array([1, 2, 3])
>>> bool(arr)
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

该`bool()`调用隐含在`and`, `if`,中`while`，`or`因此以下任何示例也将失败：

```
>>> arr and arr
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

>>> if arr: pass
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

>>> while arr: pass
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

>>> arr or arr
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

Python中有更多隐藏`bool`调用的函数和语句，例如`2 < x < 10`只是另一种编写方式`2 < x and x < 10`。并且`and`将调用`bool`：`bool(2 < x) and bool(x < 10)`。

**元素**等效的 for将`and`是[`np.logical_and`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_and.html)函数，类似地，您可以将[`np.logical_or`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_or.html#numpy.logical_or)其用作等效的 for `or`。

对于布尔数组 - 以及类似, , , 和`<`NumPy`<=`数组`==`上`!=`的比较返回布尔 NumPy 数组 - 您还可以使用**逐元素位**函数（和运算符）：（运算符）`>=``>`**[`np.bitwise_and`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_and.html)`&`**

 **```
>>> np.logical_and(arr > 1, arr < 3)
array([False,  True, False], dtype=bool)

>>> np.bitwise_and(arr > 1, arr < 3)
array([False,  True, False], dtype=bool)

>>> (arr > 1) & (arr < 3)
array([False,  True, False], dtype=bool) 
```

和[`bitwise_or`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_or.html#numpy.bitwise_or)（`|`运算符）：

```
>>> np.logical_or(arr <= 1, arr >= 3)
array([ True, False,  True], dtype=bool)

>>> np.bitwise_or(arr <= 1, arr >= 3)
array([ True, False,  True], dtype=bool)

>>> (arr <= 1) | (arr >= 3)
array([ True, False,  True], dtype=bool) 
```

完整的逻辑和二进制函数列表可以在 NumPy 文档中找到：

*   [“逻辑函数”](https://docs.scipy.org/doc/numpy/reference/routines.logic.html)
*   [“二元运算”](https://docs.scipy.org/doc/numpy/reference/routines.bitwise.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-03T18:57:07.230

如果您使用`pandas`为我解决问题的方法是当我有 NA 值时我正在尝试进行计算，则解决方案是运行：

`df = df.dropna()`

在那之后，计算失败了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-30T23:59:54.307

接受@ZF007 的回答，*这并不能作为一个整体来回答您的问题，但可以作为相同错误的解决方案。*我在这里发布它，因为我还没有在 Stack Overflow 的其他地方找到直接的解决方案来解决这个错误消息。

检查数组是否为空时会出现错误。

*   `if np.array([1,2]): print(1)`--> `ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()`。

*   `if np.array([1,2])[0]: print(1)`--> 没有 ValueError，但是：`if np.array([])[0]: print(1)`--> `IndexError: index 0 is out of bounds for axis 0 with size 0`。

*   `if np.array([1]): print(1)`--> 没有 ValueError，但对包含许多元素的数组也无济于事。

*   `if np.array([]): print(1)`-->`DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use 'array.size > 0' to check that an array is not empty.`

这样做：

*   `if np.array([]).size: print(1)`解决了错误。

*   [接受@loki](https://stackoverflow.com/users/3250126/loki)的评论，您还可以考虑更多的pythonic：

    `if np.array([]) is not None: print(1)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-13T13:55:44.203

此类型的错误消息还会显示`if-statement`在存在数组（例如 bool 或 int）的情况下进行比较时。参见例如：

```
... code snippet ...

if dataset == bool:
    ....

... code snippet ... 
```

该子句将数据集作为数组，并且 bool 是 euhm 的“开门”...`True`或`False`.

如果函数包含在 a 中`try-statement`，您将收到`except Exception as error:`不带错误类型的消息：

> 具有多个元素的数组的真值是不明确的。使用 a.any() 或 a.all()

* * *

## 回答 #7

> 赞同：-11
> 
> 时间：2019-02-12T07:37:33.963

尝试 this=> numpy.array(r) 或 numpy.array(yourvariable) 后跟命令以比较您想要的任何内容。**

# jquery - JQuery 过滤器（字符串选择器）不能与 find() 结合使用

> ID：10062955
> 
> 赞同：1
> 
> 时间：2012-04-08T12:56:12.723
> 
> 标签：jquery, filter, find, selector

## 起始情况

这两个命令应该是等价的。

```
jQuery('a').filter(':contains(about)'); 
```

和

```
jQuery.find('a').filter(':contains(about)'); 
```

## 问题

事实上，第一个命令执行得很好，而第二个则抛出以下异常：

```
TypeError: :contains(about) is not a function 
```

为什么会这样？不应该返回相同`jQuery('a')`的`jQuery.find('a')`对象吗？如果不是，有什么区别？

## 解释

我正在动态构建一个 JQuery 命令链（我的项目[Abmash](https://github.com/alp82/abmash)中使用的 JQuery Java Wrapper 的一部分）。因此，我更喜欢像`jQuery.find('a').filter(':contains(about)')`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:59:39.533

`jQuery.find('a')`返回一个数组（`Array.filter()`将函数作为参数。）

`jQuery('a')`返回一个 jQuery-array-like-Object

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:02:18.307

对 find ($.find()) 的静态调用返回一个数组而不是一个包装集。您正在寻找的是我认为的：

```
$('a:contains(about)'); 
```

# java - java.lang.reflect.Method.equals(Object obj) 中的名称比较

> ID：10062957
> 
> 赞同：11
> 
> 时间：2012-04-08T12:56:27.017
> 
> 标签：java, reflection

这是`java.lang.reflect.Method.equals(Object obj)`Java 7 的实现：

```
/**
 * Compares this {@code Method} against the specified object.  Returns
 * true if the objects are the same.  Two {@code Methods} are the same if
 * they were declared by the same class and have the same name
 * and formal parameter types and return type.
 */
public boolean equals(Object obj) {
    if (obj != null && obj instanceof Method) {
        Method other = (Method)obj;
        if ((getDeclaringClass() == other.getDeclaringClass())
            && (getName() == other.getName())) {
            if (!returnType.equals(other.getReturnType()))
                return false;
            /* Avoid unnecessary cloning */
            Class<?>[] params1 = parameterTypes;
            Class<?>[] params2 = other.parameterTypes;
            if (params1.length == params2.length) {
                for (int i = 0; i < params1.length; i++) {
                    if (params1[i] != params2[i])
                        return false;
                }
                return true;
            }
        }
    }
    return false;
} 
```

这里最有趣的部分是方法名称的比较：`getName() == other.getName()`. 这些返回`java.lang.String`，因此一个自然的问题是通过引用（）比较它们是否有效`==`。虽然这段代码显然有效，但问题是它是否会成为面向反射的框架中的错误来源。你怎么看？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T13:13:46.923

当您直接查看 Method 类的 name 属性时，会发生一件有趣的事情。

```
 // This is guaranteed to be interned by the VM in the 1.4
// reflection implementation
private String              name; 
```

所以通过实习字符串你可以直接比较参考。

更多关于[String.intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)

# android - 在 SurfaceView 中修改和打开选项菜单

> ID：10062958
> 
> 赞同：3
> 
> 时间：2012-04-08T12:56:30.230
> 
> 标签：android, menu, surfaceview

所以我为 Android 编写了我的第一个小游戏，使用了一个名为 Panel 的 SurfaceView，它是一个单独的类，而不是 GameActivity 的子类。游戏结束后，我想根据玩家的输赢来修改选项菜单，然后打开它。关于如何做到这一点的任何建议？

游戏活动：

```
public class GameActivity extends Activity {

private static final int MENU_PAUSE = 1;
private static final int MENU_RESUME = 2;
private static final int MENU_RESTART = 3;
private static final int MENU_QUIT = 4;

private Panel _panel;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    _panel = new Panel(this, 01);
    setContentView(_panel);
}

public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    menu.add(0, MENU_PAUSE, 0, "Pause");
    menu.add(0, MENU_RESUME, 0, "Resume");
    menu.add(0, MENU_RESTART, 0, "Restart");
    menu.add(0, MENU_QUIT, 0, "Quit");

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case MENU_PAUSE:
            _panel.pause();
            return true;
        case MENU_RESUME:
            _panel.resume();
            return true;
        case MENU_RESTART:
            _panel = new Panel(this, 01);
            setContentView(_panel);
        case MENU_QUIT:
            _panel.stop();
            return true;
    }

    return false;
}

public void openMenu(){
    openOptionsMenu();
}} 
```

面板（缩短）：

```
class Panel extends SurfaceView implements SurfaceHolder.Callback, SensorEventListener {
// Game Vars
    public Panel(Context context, int level) {
        super(context);
        _holder = getHolder();
        _holder.addCallback(this);
        _thread = new GameThread(getHolder(), this);
        _handler = new Handler();
        _context = context;
        setFocusable(true);
        start();
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    public void surfaceCreated(SurfaceHolder holder) {
        _thread.setRunning(true);
        _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // simply copied from sample application LunarLander:
        // we have to tell thread to shut down & wait for it to finish, or else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

    private void win(){
    }

    private void lose(){

    }

} 
```

# c# - 矩形不包含带 4 个参数的构造函数

> ID：10062962
> 
> 赞同：0
> 
> 时间：2012-04-08T12:57:19.783
> 
> 标签：c#

我有一个问题，我正在通过 PictureBox1_Paint() 事件在图片框中创建一个矩形，但是当我们调用 Rectangle 类的构造函数时它显示错误，因为 Rectangle 类不包含带 4 个参数的构造函数，我不知道如何解决这个问题以及我哪里出错了？请向我建议有关此问题的正确解决方案。

**代码：**

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    Rectangle ee = new Rectangle(10, 10, 30, 30);

    using (Pen pen = new Pen(Color.Red, 2))
    {
        e.Graphics.DrawRectangle(pen, ee);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T13:01:03.810

可能您包含了一个名称空间（通过.CS 文件开头的[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx)`Rectangle`），其中包含一个具有相同名称但与结构无关的类/[`Rectangle`结构](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.aspx)。

尝试绝对名称，例如：

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    System.Drawing.Rectangle ee = new System.Drawing.Rectangle(10, 10, 30, 30);

    using (Pen pen = new Pen(Color.Red, 2))
    {
        e.Graphics.DrawRectangle(pen, ee);
    }
} 
```

即使用`System.Drawing.Rectangle`而不仅仅是`Rectangle`.

# clojure - Clojure 等价于 Python 的 encode('hex') 和 decode('hex')

> ID：10062967
> 
> 赞同：14
> 
> 时间：2012-04-08T12:57:59.260
> 
> 标签：clojure, hex

是否有一种惯用的方式将 Clojure 中的字符串编码和解码为十六进制？来自 Python 的示例：

```
'Clojure'.encode('hex')
# ⇒ '436c6f6a757265'
'436c6f6a757265'.decode('hex')
# ⇒ 'Clojure' 
```

为了显示我的一些努力：

```
(defn hexify [s]
  (apply str
    (map #(format "%02x" (int %)) s)))

(defn unhexify [hex]
  (apply str
    (map 
      (fn [[x y]] (char (Integer/parseInt (str x y) 16))) 
      (partition 2 hex))))

(hexify "Clojure")
;; ⇒ "436c6f6a757265"

(unhexify "436c6f6a757265")
;; ⇒ "Clojure" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T23:58:02.507

由于所有发布的解决方案都有一些缺陷，我分享我自己的：

```
(defn hexify "Convert byte sequence to hex string" [coll]
  (let [hex [\0 \1 \2 \3 \4 \5 \6 \7 \8 \9 \a \b \c \d \e \f]]
      (letfn [(hexify-byte [b]
        (let [v (bit-and b 0xFF)]
          [(hex (bit-shift-right v 4)) (hex (bit-and v 0x0F))]))]
        (apply str (mapcat hexify-byte coll)))))

(defn hexify-str [s]
  (hexify (.getBytes s))) 
```

和

```
(defn unhexify "Convert hex string to byte sequence" [s] 
      (letfn [(unhexify-2 [c1 c2] 
                 (unchecked-byte 
                   (+ (bit-shift-left (Character/digit c1 16) 4)
                      (Character/digit c2 16))))]
     (map #(apply unhexify-2 %) (partition 2 s))))

(defn unhexify-str [s]
  (apply str (map char (unhexify s)))) 
```

优点：

*   高性能
*   通用字节流 <--> 带有专用包装器的字符串转换
*   处理十六进制结果中的前导零

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-10T11:19:43.120

您的实现不适用于非 ascii 字符，

```
(defn hexify [s]
  (apply str
    (map #(format "%02x" (int %)) s)))

(defn unhexify [hex]
  (apply str
    (map 
      (fn [[x y]] (char (Integer/parseInt (str x y) 16))) 
        (partition 2 hex))))

(= "\u2195" (unhexify(hexify "\u2195")))
false ; should be true 
```

为了克服这个问题，您需要使用所需的字符编码来序列化字符串的字节，每个字符可以是多字节。

这有一些“问题”。

*   请记住，所有数字类型都在 JVM 中签名。
*   没有无符号字节。

在惯用的 java 中，您将使用整数的低字节，并在使用它的任何地方都像这样屏蔽它。

```
 int intValue = 0x80;
    byte byteValue = (byte)(intValue & 0xff); -- use only low byte

    System.out.println("int:\t" + intValue);
    System.out.println("byte:\t" + byteValue);

    -- output:
    -- int:   128
    -- byte:  -128 
```

clojure 必须`(unchecked-byte)`有效地做同样的事情。

例如，使用 UTF-8 你可以这样做：

```
(defn hexify [s]
  (apply str (map #(format "%02x" %) (.getBytes s "UTF-8"))))

(defn unhexify [s]
  (let [bytes (into-array Byte/TYPE
                 (map (fn [[x y]]
                    (unchecked-byte (Integer/parseInt (str x y) 16)))
                       (partition 2 s)))]
    (String. bytes "UTF-8")))

; with the above implementation:

;=> (hexify "\u2195")
"e28695"
;=> (unhexify "e28695")
"↕"
;=> (= "\u2195" (unhexify (hexify "\u2195")))
true 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T17:54:53.007

我相信你的`unhexify`功能是惯用的。但是，`hexify`可以用更简单的方式编写：

```
(defn hexify [s]
  (format "%x" (new java.math.BigInteger (.getBytes s)))) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-16T15:03:23.067

可悲的是，“成语”似乎正在使用[Apache Commons Codec](http://commons.apache.org/proper/commons-codec/) [，`buddy`](https://github.com/funcool/buddy-core/blob/master/src/buddy/core/codecs.clj)例如：

```
(ns name-of-ns
  (:import org.apache.commons.codec.binary.Hex))

(defn str->bytes
  "Convert string to byte array."
  ([^String s]
   (str->bytes s "UTF-8"))
  ([^String s, ^String encoding]
   (.getBytes s encoding)))

(defn bytes->str
  "Convert byte array to String."
  ([^bytes data]
   (bytes->str data "UTF-8"))
  ([^bytes data, ^String encoding]
   (String. data encoding)))

(defn bytes->hex
  "Convert a byte array to hex encoded string."
  [^bytes data]
  (Hex/encodeHexString data))

(defn hex->bytes
  "Convert hexadecimal encoded string to bytes array."
  [^String data]
  (Hex/decodeHex (.toCharArray data))) 
```

# java - 调整标签、文本字段和按钮大小

> ID：10062968
> 
> 赞同：2
> 
> 时间：2012-04-08T12:58:14.160
> 
> 标签：java, swing, user-interface, layout

我已经在 Swing 中编写了代码，`AmortizationLoanSchedule`但外观并不好。如何调整标签、文本字段和按钮的大小？

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.TitledBorder;

public class AmortizationLoanSchedule extends JApplet implements ActionListener {

    private JLabel LoanAmount = new JLabel("Loan Amount");
    private JLabel NumberOfYears = new JLabel("Number Of Years");
    private JLabel InterestRate = new JLabel("Interest Rate (Annual)");

    private JTextField jtfLoanAmount = new JTextField(10);
    private JTextField jtfNumberOfYears = new JTextField(10);
    private JTextField jtfInterestRate = new JTextField(10);

    // Calculate button is also needed
    private JButton jbtCalculate = new JButton("Amortize Loan");

    // ...and a text area where the results will be displayed
    private JTextArea jtaResults = new JTextArea();

    public void init() {
        try {
            // Panel p1 will hold the input
            JPanel p1 = new JPanel();
            p1.setLayout(new GridLayout(3, 3));
            p1.add(LoanAmount);
            p1.add(jtfLoanAmount);
            p1.add(NumberOfYears);
            p1.add(jtfNumberOfYears);
            p1.add(InterestRate);
            p1.add(jtfInterestRate);

            // Panel p2 will hold panel p1 and the calculate button
            JPanel p2 = new JPanel();
            p2.setLayout(new BorderLayout());
            p2
                    .setBorder(new TitledBorder(
                            "Enter loan amount, Number of years and annual interest rate"));
            p2.add(p1, BorderLayout.BEFORE_FIRST_LINE);
            p2.add(jbtCalculate, BorderLayout.AFTER_LAST_LINE);

            // Action listener for the button
            jbtCalculate.addActionListener(this);

            // Make the text area scrollable and uneditable
            JScrollPane scrollPane = new JScrollPane(jtaResults);
            jtaResults.setRows(12);
            jtaResults.setEditable(false);

            // Place the two panels to the applet
            getContentPane().add(p2, BorderLayout.NORTH);
            getContentPane().add(scrollPane, BorderLayout.SOUTH);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == jbtCalculate)
            calculateLoan();
        else
            System.out.println("you will never see this text!");

    }

    public void calculateLoan() {
        if ((jtfNumberOfYears.getText().equals(""))
                || (jtfLoanAmount.getText().equals(""))
                || (jtfInterestRate.getText().equals(""))) {
            JOptionPane.showMessageDialog(null, "All fields are mandatory",
                    null, 1);
        } else {
            int numberOfYears = Integer.parseInt(jtfNumberOfYears.getText());
            double loanAmount = Double.parseDouble(jtfLoanAmount.getText());
            double annualInterestRate = (Double.parseDouble(jtfInterestRate
                    .getText())) / 100;

            double monthlyInterestRate = annualInterestRate / 12;
            double numberOfMonths = numberOfYears * 12;
            double monthlyPayment = loanAmount
                    * (monthlyInterestRate / (1 - Math.pow(
                            1 + monthlyInterestRate, -numberOfMonths)));
            double totalPayment = monthlyPayment * numberOfMonths;
            double balance = loanAmount;
            double interest;
            double principal;

            jtaResults.append("Payment#\t" + "Interest\t" + "Principal\t"
                    + "Balance\n\n");

            for (int i = 0; i < numberOfYears * 12; i++) {
                interest = (int) (monthlyInterestRate * balance * 100) / 100.0;
                principal = (int) ((monthlyPayment - interest) * 100) / 100.0;
                balance = (int) ((balance - principal) * 100) / 100.0;

                jtaResults.append(i + 1 + "\t" + interest + "\t" + principal
                        + "\t" + balance + "\n");
            }

            jtaResults.append("\n\nMonthly Payment: $"
                    + (int) (monthlyPayment * 100) / 100.0 + "\n");
            jtaResults.append("Total Payment: $" + (int) (totalPayment * 100)
                    / 100.0 + "\n\n");
        }
    }
} 
```

![摊销贷款时间表](../Images/081a2937050028ae757ec5f44a158c01.png)

## 更新

这是需要的。

![在此处输入图像描述](../Images/67e5d8bcc2d84dd09c906306c7cb7e19.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T13:29:14.860

![摊销布局](../Images/c864de5bed5ffdcdc800d0d6f8e36859.png)

```
import java.awt.*;
import javax.swing.*;

import javax.swing.border.TitledBorder;

class AmortizationLayout {

    AmortizationLayout() {
        JPanel gui = new JPanel(new BorderLayout(2,2));

        JPanel labelFields = new JPanel(new BorderLayout(2,2));
        labelFields.setBorder(new TitledBorder("BorderLayout"));

        JPanel labels = new JPanel(new GridLayout(0,1,1,1));
        labels.setBorder(new TitledBorder("GridLayout"));
        JPanel fields = new JPanel(new GridLayout(0,1,1,1));
        fields.setBorder(new TitledBorder("GridLayout"));

        for (int ii=1; ii<4; ii++) {
            labels.add(new JLabel("Label " + ii));
            // if these were of different size, it would be necessary to
            // constrain them using another panel
            fields.add(new JTextField(10));
        }

        labelFields.add(labels, BorderLayout.CENTER);
        labelFields.add(fields, BorderLayout.EAST);

        JPanel guiCenter = new JPanel(new BorderLayout(2,2));
        guiCenter.setBorder(new TitledBorder("BorderLayout"));
        JPanel buttonConstrain = new JPanel(new FlowLayout(FlowLayout.CENTER));
        buttonConstrain.setBorder(new TitledBorder("FlowLayout"));
        buttonConstrain.add( new JButton("Click Me") );
        guiCenter.add( buttonConstrain, BorderLayout.NORTH );

        guiCenter.add(new JScrollPane(new JTextArea(5,30)));

        gui.add(labelFields, BorderLayout.NORTH);
        gui.add(guiCenter, BorderLayout.CENTER);

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) throws Exception {
        //Create the GUI on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new AmortizationLayout();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T13:27:53.843

尺寸由[您选择的 LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)决定。您可以选择一个 LayoutManager 来按您想要的方式放置和调整大小，或者将空白元素（JPanels 应该可以工作）放在您希望空间出现的地方。

您还可以对组件使用方法，例如`setMaximumSize(Dimension)`更直接地控制各种组件的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T13:26:47.187

1）有什么问题

*   [使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)（包括教程底部使用的 LayoutManager）

或者

*   [将微调器](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)与[数字格式化程序一起使用](https://stackoverflow.com/a/9779203/714968)

2）避免输入`non_Digits`字符使用[DocumentFilter](https://stackoverflow.com/a/9996226/714968)普通[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

# javascript - 通过 javascript 动态创建 HTML5 Range

> ID：10062969
> 
> 赞同：1
> 
> 时间：2012-04-08T12:58:31.657
> 
> 标签：javascript, html, canvas, slider, range

我正在尝试创建[动态 HTML5 范围输入](http://webhole.net/2010/04/24/html-5-slider-input-tutorial/) 来控制游戏中的音量。

这个想法是把它放在我的画布上。

这是代码的样子：

```
 var slider = document.createElement('input');
    slider.id = "volume";
    slider.type = 'range';
    slider.min = 0;
    slider.max = 1;
    slider.value = 0.5;
    slider.step = 0.1;
    document.body.appendChild(slider); 
```

滑块出现，但不是好方法。在 chrome 上，只出现光标而不是整个滑块，我无法移动它。在检查器上，元素存在并且没问题。

```
 <input id="volume" type="range" min="0" max="1" step="0.1"> on chrome 
```

在Firefox上，它只是没有出现。

```
<input id="volume" type="range"> on firefox 
```

所以我只是想知道为什么我的滑块没有正确显示。有什么我做错了吗？

PS：我已经尝试过修改节点顺序或 zIndex 之类的东西。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:03:32.810

您的代码在 chrome 中正常工作。考虑这个例子：http:
[//jsfiddle.net/webdevel/Qmvam/](http://jsfiddle.net/webdevel/Qmvam/)

如果您在 DOM 准备好之前尝试动态创建元素，则可能会发生这种情况。

Firefox 还不支持它。

# matlab - 图像的 rgb

> ID：10062971
> 
> 赞同：3
> 
> 时间：2012-04-08T12:58:32.280
> 
> 标签：matlab

要获取 RGB 值：

```
RGB = imread('C:\Documents and Settings\student2\Desktop\Water lilies.jpg');
R = RGB(:, :, 1);
G = RGB(:, :, 2);
B = RGB(:, :, 3); 
```

谁能告诉我为什么我们分别使用 1、2 和 3 来获得红色、绿色和蓝色矩阵？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:10:58.297

如果您查看 RBG: 的大小`size(RGB)`，您会看到它是宽 X 高 X 3。每个像素由 3 个值表示 - 红色、绿色和蓝色；像素的实际颜色是这些原色的混合——[维基百科](http://en.wikipedia.org/wiki/RGB_color_model)。

如果你想知道为什么 R 为 1，G 为 2，B 为 3，而不是 R 为 3，B 为 1 什么的，这只是惯例。我假设因为红光是较低频率的光，蓝色较高，绿色介于两者之间 -[维基百科](http://en.wikipedia.org/wiki/Visible_spectrum)。

# playframework - Playframework 2 - 为任何动作设置会话变量

> ID：10062980
> 
> 赞同：2
> 
> 时间：2012-04-08T12:59:59.517
> 
> 标签：playframework, playframework-2.0

我需要所有请求的调用方法 - 我试过了

```
object Global extends GlobalSettings {

    override def onRouteRequest(request: RequestHeader): Option[Handler] = {
        var test: String = request.session.get("test").getOrElse {
            request.session + ("test" -> "123")
            "000"
        }

        println(test)

        super.onRouteRequest(request)
    }

} 
```

但我总是在控制台中看到“000”，并且在页面上没有域的 cookie

更新：ResponseHeader 添加了新的 cookie，但是如何在 RH 创建之前将新的 cookie 添加到 RH？是否存在类似事件监听器的东西？喜欢 postAction？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:50:20.633

要添加新的 Cookie，您必须将它们添加到 Session 的响应中，如[文档](http://www.playframework.org/documentation/2.0/ScalaSessionFlash)中所述。

例如：

```
Ok("Hello World!").withSession(
  session + ("saidHello" -> "yes")
) 
```

您尝试做的事情没有意义，因为您在收到来自浏览器的请求（其中包含浏览器拥有的 cookie）后尝试添加 Cookie。这意味着如果您的代码正常工作，您将始终在会话中拥有该值，因此无需检查会话，因为您会知道它存在。变得多余。

# c# - 后台工作人员报告繁忙，尽管已取消且不再存在

> ID：10062986
> 
> 赞同：2
> 
> 时间：2012-04-08T13:00:50.763
> 
> 标签：c#, wpf, multithreading, backgroundworker

当我取消并处置我的后台工作人员时，尽管它从 VS 线程列表中消失了，但它继续向等待它关闭的我的应用程序报告忙。我的 RunWorkerCompleted 事件也永远不会引发。

调试显示代码已退出，我看不到进一步的挂起执行。

如果我删除 .IsBusy 检查，VS 会报告“此 BackgroundWorker 当前很忙，无法同时运行多个任务”

我不明白为什么 VS 中不再列出的线程在关闭后继续运行。

```
 private void UpdateTimeLine()
        {

        txtb_timeline.Text = "Updating...";

        startTimelineUpdater.DoWork += new DoWorkEventHandler(startTimelineUpdater_DoWork);
        startTimelineUpdater.RunWorkerAsync("hometimeline");

        startTimelineUpdater.WorkerReportsProgress = true;
        startTimelineUpdater.ProgressChanged += new ProgressChangedEventHandler
                                             (startTimelineUpdater_ProgressChanged);
        startTimelineUpdater.WorkerSupportsCancellation = true;

    }

   void startTimelineUpdater_DoWork(object sender, DoWorkEventArgs e)
    {
        //begin the thread to maintain updates of SQL          
        beginRegUpdateTimeline.DoWork += new DoWorkEventHandler(beginRegUpdateTimeline_DoWork);
        beginRegUpdateTimeline.RunWorkerAsync();
        beginRegUpdateTimeline.WorkerSupportsCancellation = true;

        while (true)
        {
            List<string[]> sqlset;

            Xtweet getSQL = new Xtweet();

            if(e.Argument.ToString() == "hometimeline")
            {
                sqlset = getSQL.CollectLocalTimelineSql();
            }
            else
            {
                sqlset = getSQL.CollectLocalTimelineSql(Int64.Parse(e.Argument.ToString()));
            }

            int i = 0;
            while (i < 10)
            {
                foreach (var stringse in sqlset)
                {
                    StringBuilder sb = new StringBuilder();

                    sb.Append(stringse[0]);
                    sb.Append(": ");
                    sb.Append(stringse[1]);
                    sb.Append(" @ ");
                    sb.Append(stringse[2]);

                    sb.Append("\n");

                    BackgroundWorker bkgwk = sender as BackgroundWorker;
                    bkgwk.ReportProgress(0, sb.ToString());

                    Thread.Sleep(1000);

                    i++;

                    if(startTimelineUpdater.CancellationPending)
                    {
                        e.Cancel = true;
                        startTimelineUpdater.Dispose();
                        break;
                    }

                }
                if (e.Cancel == true)
                {
                    break;
                }

            }

            if (e.Cancel == true)
            {
                break;

            }

        }

    }

    /// <summary>
    /// Handles the DoWork event of the beginRegUpdateTimeline control.
    /// Updates the timeline sql on a regular basis
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.ComponentModel.DoWorkEventArgs"/> instance containing the event data.</param>
    void beginRegUpdateTimeline_DoWork(object sender, DoWorkEventArgs e)
    {

        while (true)
        {
            //update time in seconds
            int secs = 10;

            Xtweet.PreSqlDataCollection(null,null);
            Thread.Sleep(secs*1000);

            if(beginRegUpdateTimeline.CancellationPending)
            {
                e.Cancel = true;
                beginRegUpdateTimeline.Dispose();
                break;
            }

        }

    }

    private void startTimelineUpdater_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        txtb_timeline.Text = e.UserState.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:10:10.923

线程休眠后调用[Application.DoEvents 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)

[如此处](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/ad9a9a02-8a11-4bb8-b50a-613bcaa46886/)所述：

> 在 UI 线程获得控制权之前，BackgroundWorker 根本不会报告它已完成。

更新：

由于这是 WPF，您应该使用[Dispatcher](https://stackoverflow.com/a/4502200/884410)

# php - 在编程语言中使用“使用”或“使用”

> ID：10062987
> 
> 赞同：11
> 
> 时间：2012-04-08T13:00:51.207
> 
> 标签：php, namespaces

我一直认为命名空间的主要目标是防止名称冲突和歧义。

#1 由 php.net 的命名空间修复的问题：

> 您创建的代码与内部 PHP 类/函数/常量或第三方类/函数/常量之间的名称冲突。

但是，大多数语言以某种方式实现“use”关键字，以将其他名称空间别名或导入当前名称空间。我知道它是如何工作的，但我不明白为什么会使用这种功能。

使用“use”关键字不是有效地破坏了命名空间的目的吗？

```
namespace core\utils;

class User {
    public static function hello(){
        return "Hello from core!";
    }
}
//---------------------------------------------------

namespace core2\utils;

class User {
    public static function hello(){
        return "Hello from core2!";
    }
}
//---------------------------------------------------

namespace core2;

//causes name collision, we now have two different classes of type 'utils\User'
use core\utils; //without this line the result is 'Hello from core2'

class Main {
    public static function main(){
        echo utils\User::hello();
    }
}

Main::main();
//outputs Hello from core!
?> 
```

我是否遗漏了某些东西，或者真的不鼓励使用“使用”关键字？

无论哪种方式，在什么情况下牺牲封装实际上是一个好主意？

以前用use，现在不知道什么时候用use。

**编辑：**好吧，让我直截了当地说：如果我使用'use'来获取短名称，那比仅仅在全局命名空间中声明类有什么好处？见下文：

```
namespace core\utils\longname {    
    class User {} //declare our class in some namespace
}

//------------------Other File---------------------------
namespace { //in another file import our long name ns and use the class
    use core\utils\longname\User as User;
    new User();
} 
```

^ 这样的命名空间对这个声明有什么好处：

```
namespace {    
    class User {} //declare our class in global namespace
}

//------------------Other File---------------------------
namespace { //in another file just use the class
    new User();
} 
```

两者之间有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:20:16.403

+1 非常有趣的问题

我的意见

`use`这么多用途和功能的关键字想象这个

```
use core\utils\sms\gateway\clickatell\http\SmsSender  as SmsCSender 
use core\utils\sms\gateway\fastSMS\ftp\Smssender as SmsFSender 
```

现在比较

```
if(!SmsCSender::send($sms))
{
    SmsFSender::send($sms);
} 
```

至

```
if(!core\utils\sms\gateway\clickatell\http\SmsSender::send($sms))
{
    core\utils\sms\gateway\fastSMS\ftp\SmsSender::send($sms);
} 
```

结论

如果没有`namespace`，`use`我将无法实现如此干净可读的代码，所以我认为`namespace and use complement each other` 不是“使用”破坏命名空间的目的

# linux - 如何创建脚本以将 sed 命令添加到文件中（bash 脚本）

> ID：10062993
> 
> 赞同：1
> 
> 时间：2012-04-08T13:01:04.607
> 
> 标签：linux, bash, csv

我有 .csv 文件，其中包含 2 列用`,`.

### 文件.csv

```
word1,word2  
word3,word4  
word5,word6  
.  
.  
.  
.  
word1000,1001 
```

我想从 file.csv 创建一个新文件并插入 sed 命令，如下所示：

### 我的新文件

```
sed -e 's,word1,word2,gI' \  
   -e 's,word3,word4,gI' \  
   -e 's,word5,word6,gI' \  
    .... 
```

如何制作脚本来添加 sed 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:05:46.213

您可以使用`sed`来处理每一行：

```
echo -n 'sed ' ; sed -e "s/^\(.*\)/-e 's,\1,gl'\ \\\/" file.csv 
```

将按要求生产

```
sed -e 's,word1,word2,gl' \
-e 's,word3,word4,gl' \
-e 's,word5,word6,gl' \ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:37:51.610

您的目标接缝是从文件执行自定义替换。在这种情况下，我不会生成包含`bash`脚本的文件来完成这项工作，但我会生成一个`sed`脚本来完成这项工作：

```
sed -e 's/^/s,/' -e 's/$/,gI/' file.csv > sed_script
sed -f sed_script <<< "word1" 
```

我们甚至可以避免使用`sed_script`带有 bash 进程替换的文件：

```
sed -f <(sed -e 's/^/s,/' -e 's/$/,gI/' file.csv) <<< "word1" 
```

**更新：**

简化`sed`脚本生成，变成：

```
sed -e 's/.*/s,&,gI/' file.csv > sed_script
sed -f sed_script <<< "word1" 
```

和

```
sed -f <(sed -e 's/.*/s,&,gI/' file.csv) <<< "word1" 
```

# java - 从 xml 文件中提取信息作为 RDF 三元组

> ID：10062994
> 
> 赞同：2
> 
> 时间：2012-04-08T13:01:11.223
> 
> 标签：java, xml, rdf, ontology

任何人都可以推荐一个教程或告诉我如何构建一个 java 程序来从 xml 文件中提取信息并使用现有的本体将输出生成为 RDF 三元组。一个例子真的很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:39:59.550

有现成的工具可以解决这个问题，例如[XSPARQL](http://xsparql.deri.org/)。您可以编写一个 XSPARQL 查询来查询 XML 并生成 RDF 三元组作为输出。[这个示例](http://xsparql.deri.org/spec/usecases#fig%3axml2rdf-opensocial)应该非常接近您正在寻找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T13:20:30.333

您的问题实际上是*两个*问题：

*   解析 XML
*   编写 RDF

对于 Java XML 解析，网上有很多例子：

*   [Java 和 XML - 教程](http://www.vogella.de/articles/JavaXML/article.html)
*   [Java 示例简而言之，第 19 章，XML](http://oreilly.com/catalog/jenut2/chapter/ch19.html)
*   [使用 XML：Java/XML 教程](http://java.sun.com/xml/tutorial_intro.html)

对于 RDF，资源较少，它是一个更加专业的领域：

*   [有哪些好的 Java RDF 库？](https://stackoverflow.com/questions/73445/what-are-some-good-java-rdf-libraries)

过去我与[Jena](http://incubator.apache.org/jena/)合作过——它为语义 Web 堆栈提供了一个[友好的 API 。](http://incubator.apache.org/jena/tutorials/rdf_api.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T10:51:48.610

我会推荐[XmlToRdf](https://github.com/AcandoNorway/XmlToRdf) Java 库。

XmlToRdf 通过使用内置的 Java SAX 解析器将您的 XML 文件流式转换为 RDF，提供了令人难以置信的快速转换。大量的配置选择（具有合理的默认值）使您可以根据需要轻松调整转换，包括元素重命名和使用复合标识符的高级 IRI 生成。

转换的输出可以作为 RDF Turtle 直接写入文件，或添加到 Sesame Repository 或 Jena 数据集以进行进一步处理。使用 Sesame 和 Jena，可以进一步基于 SPARQL 对数据进行转换并输出为 RDF Turtle 和 JSON-LD 等格式。

# openlayers - http://openlayers.org/api/OpenLayers.js 和 http://openlayers.org/dev/OpenLayers.js 的区别？

> ID：10062996
> 
> 赞同：2
> 
> 时间：2012-04-08T13:01:30.330
> 
> 标签：openlayers

当我在我的 js 文件中使用[http://openlayers.org/api/OpenLayers.js](http://openlayers.org/api/OpenLayers.js)作为脚本标记时，地图没有显示并且站点无法正常工作，但是当我使用[http://openlayers.org/dev/OpenLayers 时。 js](http://openlayers.org/dev/OpenLayers.js)工作正常，

以前它在 [http://openlayers.org/api/OpenLayers.js](http://openlayers.org/api/OpenLayers.js)上运行良好。但现在它不起作用。为什么？

# python - 如何跨多个 celeryd 进程跟踪撤销的任务

> ID：10062999
> 
> 赞同：2
> 
> 时间：2012-04-08T13:01:53.703
> 
> 标签：python, celery, celeryd

我有一个提醒类型的应用程序，它使用“eta”参数在 celery 中安排任务。如果提醒对象中的参数发生变化（例如提醒时间），那么我会撤销之前发送的任务并将新任务排队。

我想知道是否有任何好的方法可以跟踪 celeryd 重新启动时撤销的任务。我希望能够动态地向上/向下扩展 celeryd 进程，并且似乎在发送 revoke 命令后启动的任何 celeryd 进程仍将执行该任务。

一种方法是保留已撤销任务 ID 的列表，但这种方法会导致列表任意增长。修剪这个列表需要保证任务不再在 RabbitMQ 队列中，这似乎是不可能的。

我还尝试为每个 celeryd 工人使用共享的 --statedb 文件，但似乎 stateb 文件仅在工人终止时更新，因此不适合我想要完成的任务。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:04:53.813

有趣的问题，我认为使用广播命令应该很容易解决。如果当一个新工作人员启动时，它要求所有其他工作人员将其撤销的任务转储给新工作人员。添加两个新的远程控制命令，您可以通过使用轻松添加新命令`@Panel.register`，

模块控制.py：

```
from celery.worker import state
from celery.worker.control import Panel

@Panel.register
def bulk_revoke(panel, ids):
    state.revoked.update(ids)

@Panel.register
def broadcast_revokes(panel, destination):
    panel.app.control.broadcast("bulk_revoke", arguments={
         "ids": list(state.revoked)},
         destination=destination) 
```

将其添加到 CELERY_IMPORTS：

```
CELERY_IMPORTS = ("control", ) 
```

现在唯一缺少的问题是连接它，以便新工作人员`broadcast_revokes`在启动时触发。我想你可以使用这个`worker_ready` 信号：

```
from celery import current_app as celery
from celery.signals import worker_ready

def request_revokes_at_startup(sender=None, **kwargs):
    celery.control.broadcast("broadcast_revokes",
                             destination=sender.hostname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:12:44.673

我必须在我的项目中做类似的事情并`celerycam`与[`django-admin-monitor`](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#django-admin-monitor). 监视器会拍摄任务快照并定期将它们保存在数据库中。并且有一个很好的用户界面来浏览和检查所有任务的状态。[即使您的项目不是基于 Django 的](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#monitoring-nodjango)，您甚至可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:12:58.283

前段时间我实现了类似的东西，我提出的解决方案与你的非常相似。

我解决这个问题的方法是让工作人员`Task`在作业运行时从数据库中获取对象（通过将主键传递给它，如文档建议的那样）。在您的情况下，在发送提醒之前，工作人员应执行检查以确保任务已“准备好”运行。如果不是，它应该简单地返回而不做任何工作（假设 ETA 已更改并且另一个工人将接手新工作）。