# StackOverflow 问答 10025000-10025999

# asp.net - 如何在 C# 中获取 2D int 数组的填充行长度

> ID：10025001
> 
> 赞同：0
> 
> 时间：2012-04-05T08:17:29.160
> 
> 标签：asp.net

我需要在 c# 中获取 2D int 数组的填充行的长度（填充行表示包含至少一个 1 的行）。例如..

```
1 1 1 0 1 
0 1 1 1 1
1 1 1 1 1
0 0 0 0 0 
```

现在填充的行长度=3 和列=4。这就是我需要的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:55:44.283

```
 int[][] intarray = { new int[] { 1, 2, 3 }, 
                         new int[] { 1, 2, 3 }, 
                         new int[] { 1, 2, 3 },
                         new int[] { 1, 2, 3 } };
    **int c = intarray.Count();**//for rows Length = 4
      int b = intarray[0].Count();//for columns length =3 
```

您还可以使用：

```
 int d = intarray.GetLength(0);//for rows length = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:02:15.110

我希望您将这些值存储在二维整数数组中，例如

```
int[][] a = {new int[] {1, 1, 0, 1}, new int[] {0, 1, 1, 1}, new int[] {1, 1, 1, 1}, new int[] {0, 0, 0, 0}}; 
```

以下是用于计算至少有一个 1 的行的 LINQ。

```
int filledRowsCount = a.Count(i => i.Any(ii => ii == 1)); 
```

# java - TreeMap 中的 java.util.ConcurrentModificationException

> ID：10025003
> 
> 赞同：0
> 
> 时间：2012-04-05T08:17:32.857
> 
> 标签：java, treemap

```
public class StoreMessage extends Thread implements Serializable{

    private static long start_nanotime=System.nanoTime();
    private static int timeToRun = 60000; 
    private static byte[] b=null;
    private static long startTime = System.currentTimeMillis();
    private static long runUntilMillis = System.currentTimeMillis() + timeToRun;
    public static Map <Long,Message> map1=new TreeMap<Long,Message>();

public static void store(Message message)throws Exception{
        while (true) {
            long now = System.currentTimeMillis();
            if (now >= runUntilMillis) {
               break;
            }
            long precise_time=TimeUnit.MILLISECONDS.toNanos(now)+(System.nanoTime()-start_nanotime);
            map1.put(precise_time, message);
           }
     }

public static byte[] returning()throws Exception
    { 

        b=serializer.serialize(map1);
        System.out.println(b);
        map1.clear();
        return b;

    }
} 
```

我要做的是，将 StoreMessage 类每隔一分钟收到的所有消息对象存储到 TreeMap，序列化该 TreeMap 并将其返回给调用它的类，并在下一分钟创建/清除 TreeMap 以存储其他消息对象。
消息类的消息对象是 jms 文本消息，作为命令行参数输入。该`store`方法在另一个类中调用，而该`returning()`方法在另一个类中调用。两个类，当实例化和运行时，有多个参数，给我一个例外

```
java.util.ConcurrentModificationException
at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1100)
at java.util.TreeMap$EntryIterator.next(TreeMap.java:1136)
at java.util.TreeMap$EntryIterator.next(TreeMap.java:1131)
at java.util.TreeMap.writeObject(TreeMap.java:2250) 
```

为什么？尤其是在我清理地图的时候。如果我只给出一个命令行参数，我不会得到这个例外。但是，如果一遍又一遍地遵守，我会得到同样的例外。
其次，我注意到，当收到消息对象时，它们被存储到 TreeMap 并序列化并返回。当我希望树形图将消息存储一分钟然后序列化整个消息时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T16:09:47.800

`java.util.concurrent.ConcurrentSkipListMap`是线程安全的实现，`TreeMap`它将保持自然顺序

```
Map<String, String> treeMap = new ConcurrentSkipListMap<String, String>(); 
```

我们也可以获得不可修改的（只读）版本，如下所示：

```
TreeMap tM = new TreeMap();
Map tM2 = Collections.unmodifiableMap(tm1); 
```

现在地图`tM2`是只读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:32:46.780

其他答案很接近，但我不相信它们是完整的。如果您查看被抛出的 CME，它位于 TreeMap 迭代器中，即使您将其设为同步映射，也不会使其成为线程安全的。您仍然必须在迭代期间在 TreeMap 上显式同步（在这种情况下，似乎是序列化）。

[解释使用迭代器时集合的同步？](https://stackoverflow.com/questions/1775717/explain-synchronization-of-collections-when-iterators-are-used)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:56:24.637

理论上，即使使用同步地图，您也可能会丢失一条消息。如果在执行过程中调用存储`System.out.println()`。那是在它被序列化之后但在它被清除之前。

所以我认为你可以在地图上同步（但我没有测试它）：

```
public static void store(Message message) throws Exception {
    while (true) {
        long now = System.currentTimeMillis();
        if (now >= runUntilMillis) {
            break;
        }
        long precise_time = TimeUnit.MILLISECONDS.toNanos(now)
                + (System.nanoTime() - start_nanotime);
        synchronized (map1) {
            map1.put(precise_time, message);
        }
    }
}

public static byte[] returning() throws Exception {

    synchronized (map1) {
        b = serializer.serialize(map1);
        System.out.println(b);
        map1.clear();
    }
    return b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T21:08:09.980

派对有点晚了，但正如@Flinbor 指出的那样，`ConcurrentSkipListMap`在这种情况下仍然是要走的路。它仍然是自然排序的或通过 Comparator 排序的，并且对于 the`ConcurrentSkipListMap`和-O `TreeMap`( *log(n))*的访问和修改时间是相同的。但是，由于同步，可能会慢一些。

虽然 TreeMap 的 Iterator 是*fail-fast*，这意味着在迭代创建后有一个结构修改，而不是他自己的**`remove()`**方法。虽然 ConcurrentSkipListMap 的 Iterator 是弱一致的，但返回的元素反映了在迭代器创建时或之后的某个时刻映射的状态。它们不会抛出 ConcurrentModificationException。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-05T08:20:54.240

尝试使用`Collections`：

```
 public static Map <Long,Message> map1 = 
Collections.synchronizedMap(new TreeMap<Long,Message>()); 
```

同步您的地图实例。

# sql - 树：计算 2 条路径的成本并确定哪个更昂贵

> ID：10025007
> 
> 赞同：4
> 
> 时间：2012-04-05T08:17:54.300
> 
> 标签：sql, postgresql, recursion, tree, common-table-expression

这是我在这个论坛上的第一个问题，所以我会尽量保持清楚。

我有 1 个`entity`包含以下数据的表：

```
ATTR1                ATTR2                 ATTR3                 ATTR4

A                    Level 1                null                   35
B                    Level 2                 A                     34
C                    Level 2                 A                     33
D                    Level 3                 B                     32
E                    Level 3                 B                     31
F                    Level 3                 C                     30
G                    Level 3                 C                     29
H                    Level 4                 D                     28
I                    Level 4                 D                     27
J                    Level 4                 E                     26
K                    Level 4                 E                     25
L                    Level 4                 F                     24
M                    Level 4                 F                     23
N                    Level 4                 G                     22
O                    Level 4                 G                     21
P                    Level 5                 H                     20
Q                    Level 5                 H                     19
R                    Level 5                 H                     18
S                    Level 5                 O                     17 
```

`ATTR1`节点名称在哪里。它也是主键。节点的级别在
哪里。节点的父节点的名称在 哪里。是根节点，它没有父节点，因此. 节点的成本在 哪里。`ATTR2`
`ATTR3``A``NULL`
`ATTR4`

现在的问题：

*   给定任何部分 X 和叶节点 Y（即 Y 是 X 的后代），从根到 X 或 X 到 Y 的直接后代的最昂贵路径是什么？

换句话说，假设 X 节点是`D`并且 Y 节点是`P`。从节点到根`D-B-A`的路径是 ，而从叶子到节点的路径是`P-H-D`。

如何计算每条路径的总成本并能够说出哪个更贵？

我的方法是做 2 个递归查询，每个路径 1 个查询以找到每个路径的 SUM。问题是我被迫创建了 2 个表并尝试将它们的所有数据放入 1 中。我觉得我已经走到了死胡同，它开始看起来有点长而且不可行。

任何帮助表示赞赏，最好是 PostgreSQL 语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:12:58.107

像这样创建表：

```
create table entity (attr1 text not null primary key,
                     attr2 text not null,
                     attr3 text,
                     attr4 int not null); 
```

...并用上面显示的数据填充它，你在寻找这样的东西吗？：

```
with recursive cst as (
with req as (
select 'A'::text as top, 'D'::text as bottom
union all
select 'D'::text, 'P'::text
)
select
    top,
    bottom,
    top as last,
    top as path,
    attr4 as cost
  from req
  join entity on (top = attr1)
union
select
    top,
    bottom,
    attr1,
    path || '-' || attr1,
    cost + attr4
  from cst
  join entity on (attr3 = last)
), res as (
select * from cst where bottom = last
)
select path from res
   where cost = (select max(cost) from res); 
```

诚然，将`req`CTE 作为指定请求的一种方式有点小技巧，但我相信您可以按照自己的意愿完善该部分。此外，这总是显示从“上”到“下”而不是“外”到“内”的路径，但我不确定这对你是否重要。无论如何，我认为这应该足够接近你想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:42:11.197

首先，将树的级别保存为`integer`not as (redundant and inappropriate) `text`。
该表如下所示：

```
CREATE TABLE entity (
  name   text NOT NULL PRIMARY KEY
 ,level  int  NOT NULL
 ,parent text
 ,cost   int  NOT NULL); 
```

询问：

```
WITH RECURSIVE val(root, leaf) AS (
    VALUES                          -- provide values here
     ('A'::text, 'D'::text)
    ,('D',       'P')
    ), x AS (
    SELECT v.root   AS name
          ,v.root   AS path
          ,r.cost   AS total
          ,1        AS path_len
          ,l.level - r.level AS len -- as break condition
    FROM   val    v
    JOIN   entity r ON r.name = root
    JOIN   entity l ON l.name = leaf

    UNION  ALL
    SELECT e.name                -- AS parent
          ,x.path || '-' || e.name -- AS path
          ,x.total + e.cost      -- AS total
          ,x.path_len + 1        -- AS path_len
          ,x.len                 -- AS len
    FROM   x
    JOIN   entity e ON e.parent = x.name
    WHERE  x.path_len <= x.len
    )
SELECT x.path, x.total
FROM   x
JOIN   val v ON x.name = v.leaf AND x.path_len > 1
ORDER  BY x.total DESC
LIMIT  1; 
```

结果：

```
path  | total
------+-------
A-B-D | 101 
```

[在 sqlfiddle 演示。](http://sqlfiddle.com/#!1/52e56/1)

### 要点

*   `VALUES`提供值更快/更简单/更直观。

*   使用`UNION ALL`代替`UNION`，否则递归联合必须检查（在这种情况下不存在）重复每次迭代。

*   不包括列`root`，`leaf`在递归 CTE 中，它们是自重的。

*   不需要嵌套`WITH`子句。您可以在`WITH RECURSIVE`子句中使用普通的 CTE。

*   对性能最重要的是：在您的模型中，您事先知道路径的长度。将其用作中断条件，并且不要计算所有通往苦尽头的路径——这对于大树来说可能*非常昂贵。*

*   final`SELECT`也可以大大简化，不需要聚合函数。加入您的价值观并选择正确的道路。这样，您可以根据需要轻松地在结果中显示任何或所有列。

# java - 已部署的 Web 应用程序中数据库更改的最佳实践

> ID：10025010
> 
> 赞同：2
> 
> 时间：2012-04-05T08:18:20.057
> 
> 标签：java, database, design-patterns, jakarta-ee, tomcat

我正在尝试找到解决以下问题的标准方法。
我在容器（特别是 Tomcat）中部署了一个 Web 应用程序，它使用数据库来实现其功能（在我的情况下，它是文件模式的 SQL 数据库，因此没有后端 SQL 服务器）。

我感兴趣的是，随着数据库架构的变化（新表/新列、删除列等），在我的 Web 应用程序的较新版本上处理我的数据库的各种更改的最佳方法是什么。
即，我如何处理某人升级到我的 Web 应用程序的较新版本的情况，并且仍然以最佳（自动？无缝？少手动？）方式保留旧数据库中的旧数据。

我认为这不是一个罕见的情况，所以我相信我可以在这里遵循一些最佳实践。
谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:48:18.150

最近我们发现了[Flyway——](http://flywaydb.org)它工作得很好，并且包含数据库模式更改的版本控制（纯 SQL 脚本）。

显然，这个话题要广泛得多。例如，当应用程序的旧版本和新版本都应该在更新的模式中完美运行时，您需要格外小心。您还应该考虑回滚策略（当升级效果不佳或您想降级应用程序时） - 有时就像删除添加的对象（表、列）一样简单，但是当您的脚本*删除*某些内容时，回滚应该恢复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:49:02.580

首先，您希望尽可能减少对数据库，尤其是对现有列的更改。

其次，如果您需要重命名列或更改某些约束（注意不要变得更严格，因为可能有些数据不匹配），请使用`ALTER TABLE`语句。这样，除非您删除列，否则列中的数据将被保留。:)

此外，为具有约束的新列（如非空）提供默认值，因为该表中可能已经存在需要更新的数据集，以免违反这些约束。（或者添加列，运行一些代码来填充列，然后添加约束。）

第三，由于您的应用程序似乎有多个用户并且他们可能有不同的版本，因此提供更新的最简单方法是提供对下一个更高版本的顺序更新。因此，如果有人想从版本 2 更新到 5，您首先要进行 2->3 更新，然后是 3->4，最后是 4->5。

这可能需要更长的时间才能运行，但应该会降低复杂性，因为您的机器人必须担心所有可能的组合（例如 2->4、2->5、3->5 等）

# xna-4.0 - 在 XNA 4.0 运行时加载文件

> ID：10025011
> 
> 赞同：0
> 
> 时间：2012-04-05T08:18:20.593
> 
> 标签：xna-4.0

我在 XNA 4.0 游戏中做了一个内容管道扩展（使用[本教程）。](http://rbwhitaker.wikidot.com/content-pipeline-extension-1)

我改变了一些方面，所以它更好地满足了我的需要，但基本的想法仍然适用。现在我想更进一步，让我的游戏可以在运行时进行更改。我通过内容管道扩展加载的文件非常简单，它只包含十进制数字，所以我想让用户能够随意更改该文件并在游戏运行时重新加载它（无需重新编译，因为我必须这样做远的）。该文件是一个非常简化的关卡编辑器版本，这意味着它包含如下行：

```
1 1,5 1,78 -3,6 
```

在这里，第一个数字确定将被绘制到场景中的对象，其他 3 个数字是放置该对象的坐标。

那么，如何更改包含这些数字的文件，以便游戏加载它并相应地重绘场景？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:20:53.933

考虑到您已经创建了一个自定义内容管道扩展，我想您知道如何使用 streamreader 加载数据？在哪里可以通过逐行读取文本文件来清空关卡数据并加载新数据？

我之所以提到这一点是因为据我所知，在运行时不可能通过内容管道加载数据，特别是因为 xna 重新分发不包含内容管道。

另一种选择可能是更改为使用 xml 作为关卡文件并使用我最近发现的 XElement，这是我目前的方法。

这是一个使用 StreamReader 从 .txt 文件加载简单关卡数据的注释示例。[http://pastebin.com/fFXnziKv](http://pastebin.com/fFXnziKv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:44:24.907

在 XNA 4 中，如果您使用 StorageContainer，您可以执行以下操作：

```
(...)
StorageContainer storageContainer = //get your container

Stream stream = storageContainer.OpenFile("Level.txt", FileMode.OpenOrCreate);
StreamReader sr = new StreamReader(stream);

while (!sr.EndOfStream)
{
    String line = sr.ReadLine();
    //use line to do something meaningful
}
stream.Close();
storageContainer.Dispose();
(...) 
```

根据个人经验，如果您使用原始 TextReader，唯一的问题是获取 Content 文件夹的路径，该路径相对容易检索**（仅在 Windows 中！）**

# c++ - 静态库中的外部变量链接失败

> ID：10025013
> 
> 赞同：4
> 
> 时间：2012-04-05T08:18:30.837
> 
> 标签：c++, c, static-linking

我必须在我的 c++ 应用程序中使用一个丑陋的 C 库。在下面的解释中，我将它称为 UglyLib。我成功地将 UglyLib 编译为静态链接库。在文件ugly.h 中，UglyLib 使用了一个外部变量：

*文件丑陋的.h：*

```
extern SomeStruct_type somestruct; 
```

该变量在另一个文件中定义（并且也使用）。我会称它为 anotherugly.c。

*文件另一个ugly.c：*

```
SomeStruct_type somestruct; 
```

我的 c++ 应用程序基于通用模板库 (TemplateLib)，应用程序本身由主窗口 GUI 代码和与主窗口代码静态链接的应用程序库组成。我将把这个静态链接库称为ApplicationLib。

TemplateLib 包含一个 templatelibfile.h，它使用 somestruct（UglyLib 公开的外部变量）导出函数 foo。

*文件模板libfile.h：*

```
#include<ugly.h>
...
void foo()
{
...
do something with somestruct
...
} 
```

foo 函数由静态链接的 ApplicationLib 中包含的 appllibfile.h 使用。

*文件 appllibfile.h：*

```
#include<templatelibfile.h>
...
void applfoo()
{
...
foo();
...
} 
```

主窗口应用程序包括 appllibfile.h

*文件 main.cpp：*

```
#include<appllibfile.h>
...
int main()
{
...
applfoo();
...
return 0;
} 
```

在VS2008中，当我尝试编译主窗口应用程序时，微软链接器给了我这个错误

> 错误 LNK2001：无法解析的外部符号“struct SomeStruct_type somestruct”（？somestruct@@3USomeStruct_type@@A）

如果我在 templatefile.ha 中添加 extern 变量的新定义，编译器就会停止抱怨。

*文件模板libfile.h：*

```
#include<ugly.h>
SomeStruct_type somestruct
...
void foo()
{
...
do something with somestruct;
...
} 
```

**但**我希望避免它，因为我不知道这是否是正确的做法（我不想冒险改变 UglyLib 重新定义 somestruct 变量的不同实例的语义）。您是否有一些建议可以避免链接问题而不重新定义 somestruct extern 变量？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:29:50.000

这可能是因为 C++ 编译器所做的名称修改。由于`anotherugly.c`是 C 源代码（可能是用 C 编译器编译的），因此符号`somestruct`将被暴露而不会被破坏。当您使用 C++ 编译器编译其余文件时，链接器会查找不存在的错误名称。

我认为围绕 in`ugly.h`中的声明`extern "C"`可能会解决问题。

# android - Android：将数据包转发到 IP 地址

> ID：10025015
> 
> 赞同：1
> 
> 时间：2012-04-05T08:18:37.613
> 
> 标签：android, networking, iptables

我有一个安卓设备。我需要将到达外部 IP 的数据包转发到 Android 连接到的内部 IP。

我想知道我是否可以编写一个应用程序来启用此转发。

此外，如果这不是传统的方法，那么这是完成的。如果我应该使用一些脚本，我应该把它们放在哪里？

哦，我可以用安卓模拟器测试吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:23:50.240

可以模拟端口转发等行为，但不能模拟非 root 设备的路由。

此外，如果您想将流量从移动网络转发到 wlan，到目前为止我知道这是不可能的。Android 在移动网络和 WLAN 之间切换连接。不可能同时使用两者。除了一些热点用例。

# javascript - 在javascript中将属性作为参数传递

> ID：10025019
> 
> 赞同：1
> 
> 时间：2012-04-05T08:18:50.167
> 
> 标签：javascript, html, document-body

我正在使用以下代码。我想将属性 bgcolor 作为参数传递

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script type="text/javascript">
  function myFunction(key,valu)
  {
    document.body.key=valu;
  }
</script>
</head>
<body onLoad="myFunction('bgColor','red');">

</body>
</html> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:22:18.823

你可以试试

```
document.body[key]=valu; 
```

在这种情况下，键是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:22:59.130

如果您将属性作为字符串传递，则必须使用方括号表示法而不是点表示法：

```
function myFunction(key,valu)
{
    document.body[key]=valu;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:24:56.470

永远都行不通

试试这个

```
function change(key , value)
    {
        document.body.setAttribute(key, value);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:30:19.813

我建议这样做，因为 bgColor 和 onload 属性是如此 90 年代

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script type="text/javascript">
function setStyle(key,valu) {
  document.body.style[key] = valu;
}
window.onload=function() {
  setStyle("backgroundColor","red")
}
</script>
</head>
<body>

</body>
</html> 
```

# php - 如何获得“每月第一个星期四”的 DatePeriod？

> ID：10025021
> 
> 赞同：4
> 
> 时间：2012-04-05T08:18:54.987
> 
> 标签：php, datetime, dateinterval

我有两个`DateTime`对象：

```
$start = new DateTime('first thursday of June 2012');
$end   = new DateTime('2012-12-31'); 
```

我需要一个`DatePeriod`包含这两个日期之间月份的所有第一个星期四的。使用时

```
$interval = new DateInterval('P1M');
$period = new DatePeriod($start, $interval, $end); 
```

这只会增加 1 个月而不尊重“第一个星期四”的条件。

像这样的东西也不起作用：

```
$interval = DateInterval::createFromDateString('1 month first thursday');
$period = new DatePeriod($start, $interval, $end); 
```

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:32:59.107

在过去的两个小时里，我一直在努力解决这个问题——我一在这里发布它，我就得到了解决方案。我只需要将 DateInterval 字符串更改为“下个月的第一个星期四”。

```
$start = new DateTime('first thursday of June 2012');
$end   = new DateTime('2012-12-31');

$interval = DateInterval::createFromDateString('first thursday of next month');
$period = new DatePeriod($start, $interval, $end); 
```

作品！日期时间摇滚 ;-)

# c# - 调用内置的配置错误输出对话框

> ID：10025023
> 
> 赞同：1
> 
> 时间：2012-04-05T08:19:03.087
> 
> 标签：c#, ssis

我有自定义 SSIS 组件：

*   它继承自 PipelineComponent
*   带有实现的自定义 UI
*   具有错误输出的 IDtsComponentUI（如此处建议：[在设计时使用数据流组件中的错误输出](http://msdn.microsoft.com/en-us/library/ms136009%28v=sql.105%29.aspx)）

我可以将错误输出（红色箭头）附加到管道中的下一个组件。但我无法在设计时设置列错误和截断行为（每列的 RD_NotUsed 已设置并禁用/灰色）。

我想为我的组件显示内置的配置错误输出对话框，以便用户可以使用他/她熟悉的对话框设置错误和截断行为。有可能吗？怎么做？

# linux-kernel - 如何访问 struct sk_buff 成员？

> ID：10025026
> 
> 赞同：4
> 
> 时间：2012-04-05T08:19:23.697
> 
> 标签：linux-kernel, kernel-module

我正在尝试将从机器传出的所有数据包的源 IP 修改为我在此内核模块中指定的内容，但是每次我尝试访问**nh.iph->saddr时，我都会在***编译*时收到一个错误，提示**Struct sk_buff 没有成员命名为 nh**
我在这里做错了什么？我错过了一些标题或什么？

```
#include <linux/module.h>       
#include <linux/kernel.h>       
#include <linux/init.h>         

#include <linux/netfilter.h>
#include <linux/netfilter_ipv4.h>

#include <linux/skbuff.h>
#include <linux/ip.h>                  /* For IP header */

#include <linux/inet.h> /* For in_aton(); htonl(); and other related Network utility functions */ 

static struct nf_hook_ops nfho;

unsigned int hook_func(unsigned int hooknum,
                       struct sk_buff **skb,
                       const struct net_device *in,
                       const struct net_device *out,
                       int (*okfn)(struct sk_buff *))
{
    struct sk_buff *sb = *skb;
    struct in_addr masterIP;

    masterIP.s_addr = htonl (in_aton("192.168.1.10")); 
    sb->nh.iph->saddr = masterIP.s_addr;
    return NF_ACCEPT;
} 
```

请注意，我正在运行 Ubuntu 10.04 LTS 64 位
内核 2.6.32-33

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T08:29:23.697

在您的内核版本中`struct sk_buff`已更改。它不再有那些成员。要访问 ip 标头，您应该尝试：

```
#include <linux/ip.h>

struct iphdr* iph = ip_hdr(skb); 
```

然后只需使用`iph`变量来更改地址，例如：

```
iph->saddr = ....
iph->daddr = .... 
```

此外，不要忘记您可能需要重新计算`ip`和可能的传输数据包校验和。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T08:30:13.410

您可以在 'include/linux/skbuff.h' 中找到命中 sk_buff 的定义。

它没有 nh 字段，它解释了您看到的编译错误。它确实有一个“network_header”字段，这可能是您正在寻找的。

# java - Spring框架中的DAO和Service层到底是什么？

> ID：10025028
> 
> 赞同：34
> 
> 时间：2012-04-05T08:19:25.553
> 
> 标签：java, spring, service, dao

Spring框架中的DAO和Service层到底是什么？

我正在寻找理论上的答案。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-05T09:07:32.867

就 Spring 而言，没有区别。按照惯例，您可以使用 . 标记 DAO 类`@Repository`和使用`@Service`. 前者也做了一些持久层异常翻译。

既然您在理论上问：DAO 应该执行原始数据库操作并将它们转换为一些更高级别的构造（对象、集合）。服务应该调用 DAO 并执行业务操作。通常，事务划分是在服务层上执行的，以跨越多个 DAO 调用。

最后，DAO 应该从持久性细节中抽象出业务逻辑，理想情况下允许在不更改业务逻辑（服务）的情况下切换持久层。*由于持久性提供者的抽象泄漏*（例如延迟加载），这几乎是不可能的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-05T08:36:58.983

DAO - 数据访问对象，是处理与数据存储（通常是数据库）的连接的对象。您在这里有您的查询，DAO 为您的服务提供数据。

服务应该包含你所有的逻辑。如果你有逻辑分离，理论上你可以改变你的 UI 层或 DAO 层而不影响它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-10-09T07:49:06.390

它提供了脱钩的好处。当数据源发生变化时，您在服务中为所有服务用户（移动客户端、Web 客户端）处理数据的方式不会改变。但是您需要改变从数据源中提取数据的方式。

[![在此处输入图像描述](../Images/751cf32ed1a70f5c77d001fb69cb8af3.png)](https://i.stack.imgur.com/EVuTN.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-05T08:48:09.267

DAO（数据访问对象）是一种设计模式，它包括为数据库上的每个表创建一个类，它提供了一种分离对象持久性和数据访问逻辑的技术

# sql - T-SQL 语句中的前缀 N 是什么意思，什么时候应该使用它？

> ID：10025032
> 
> 赞同：442
> 
> 时间：2012-04-05T08:19:53.520
> 
> 标签：sql, sql-server, tsql

我在一些插入 T-SQL 查询中看到了前缀 N。许多人`N`在向表中插入值之前使用过。

我进行了搜索，但我无法理解`N`在将任何字符串插入表之前包含的目的是什么。

```
INSERT INTO Personnel.Employees
VALUES(N'29730', N'Philippe', N'Horsford', 20.05, 1), 
```

这个“N”前缀有什么作用，应该在什么时候使用？

* * *

## 回答 #1

> 赞同：509
> 
> 时间：2012-04-05T08:20:45.043

它将字符串声明为`nvarchar`数据类型，而不是`varchar`

> 您可能已经看到使用 N 前缀传递字符串的 Transact-SQL 代码。这表示随后的字符串是 Unicode（N 实际上代表国家语言字符集）。这意味着您传递的是 NCHAR、NVARCHAR 或 NTEXT 值，而不是 CHAR、VARCHAR 或 TEXT。

引用[微软的](https://docs.microsoft.com/en-us/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql)话：

> 使用字母 N 为 Unicode 字符串常量添加前缀。如果没有 N 前缀，则字符串将转换为数据库的默认代码页。**此默认代码页可能无法识别某些字符**。

* * *

如果您想知道这两种数据类型之间的区别，请参阅此 SO 帖子：

[varchar 和 nvarchar 有什么区别？](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-10-24T09:54:35.497

让我告诉你前缀发生的一件烦人的事情`N'`- 我两天都无法修复它。

我的数据库排序规则是**SQL_Latin1_General_CP1_CI_AS**。

它有一个表，其中有一列名为**MyCol1**。这是一个**Nvarchar**

此查询**无法匹配**存在的确切值。

```
SELECT TOP 1 * FROM myTable1 WHERE  MyCol1 = 'ESKİ'  

// 0 result 
```

使用前缀 N'' 修复它

```
SELECT TOP 1 * FROM myTable1 WHERE  MyCol1 = N'ESKİ'  

// 1 result - found!!!! 
```

为什么？因为 latin1_general 没有**大的虚线 İ**，所以我想这就是它失败的原因。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-10-17T08:02:19.817

**1、性能：**

假设您的 where 子句是这样的：

```
WHERE NAME='JON' 
```

如果 NAME 列是 nvarchar 或 nchar 以外的任何类型，则不应指定 N 前缀。但是，如果 NAME 列的类型是 nvarchar 或 nchar，那么如果您不指定 N 前缀，则“JON”将被视为非 unicode。这意味着 NAME 列和字符串 'JON' 的数据类型不同，因此 SQL Server 隐式地将一个操作数的类型转换为另一种。如果 SQL Server 将文字的类型转换为列的类型，则没有问题，但如果以其他方式进行，则性能会受到影响，因为不会使用列的索引（如果可用）。

**2.字符集：**

如果列是 nvarchar 或 nchar 类型，则在 WHERE 条件/UPDATE/INSERT 子句中指定字符串时始终使用前缀 N。如果您不这样做并且字符串中的字符之一是 unicode（如国际字符 - 示例 - ā），那么它将失败或遭受数据损坏。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-19T11:31:31.760

假设值是 nvarchar 类型，因为只有我们使用 N''

# java - 在特定条件下无法停止递归

> ID：10025038
> 
> 赞同：1
> 
> 时间：2012-04-05T08:20:25.693
> 
> 标签：java, recursion

我正在`char array`使用递归进行字符串（即）处理。在我的`recursion tree`, 位于的字符串`child`长度小于 1 wrt`parent`并且相同高度的所有子项具有相同长度的字符串但不同的字符。`string`每当新长度大于或等于旧字符串长度时，我想停止递归，但我无法在递归之间插入此条件。使用`System.exit(0)`终止了我不想要的完整程序。下面是我的代码片段-

```
private static void getMinLen(char[] oldStr) {
    int len = oldStr.length;

    /*
     * This terminates the whole program, using break in place of
     * System.exit(0) is not effective
     */
    if (len < 2)
        System.exit(0);

    char[] newStr = new char[len - 1];

    for (int i = 0; i < len - 1; i++) {
        /*
         * Every character is matched with its next character and a new char
         * array is created having length (len-1)
         */
        getMinLen(newStr);
    }
} 
```

实际上，当我放入`System.out.println("length=" + len);`第 3 行时。首先它以递减顺序打印长度，但随后长度增加，由于递归而减少。我的意思是控制台显示以下内容-

```
length=6
length=5
length=4
length=3
length=2
length=1
length=3
length=3
length=2
length=1
length=4
length=3
length=2
length=1 
```

我只想在新长度大于或等于旧长度时停止递归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:43:50.947

在每次`getMinLen(oldStr)`不满足停止条件的调用中，您调用`getMinLen(newStr)`了几次（实际上与 中的元素一样多次`newStr`）。从您的问题或您的第一条评论中不清楚这是否是故意的。（事实上​​，您`newStr`的循环具有与迭代一样多的元素，这可能表明事实并非如此。）

如果这不是故意的，只需将递归调用向下移动一行，即在`}`循环结束之后。

如果是故意的，问题可能是你还没有理解递归是如何工作的。停止条件在某处得到满足的事实并未全局记录，并且仅与满足停止条件的单个调用相关。`getMinLen`递归调用的循环本身就达到了这一点`for`（除非您从一个非常短的字符串开始），并且该（外部）`for`循环继续执行所有后续调用 --`getMinLen`为什么要停止？为了让它停止，一个全局布尔变量会有所帮助，但非常不雅。或者，您可以使函数返回一个布尔值，并在每次递归调用之前检查前一个是否返回`true`。但是，您也可以重新考虑递归方法是否真的最适合该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:24:48.863

只需在您要退出方法的行替换`System.exit(0);`为`return;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:25:12.073

你应该使用`return`.

```
if (len < 2)
    return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:29:13.383

请注意，`break`它只会“中断”循环或 switch 语句。要离开一个方法，您必须到达方法的返回语句或结尾（如果返回类型为 ，则它充当隐式返回语句`void`）。

请注意，您的方法执行以下操作：

假设初始长度为 4：

```
1\. create a new array of length 3 (4-1)
2\. call the method recursively 3 times with an array of length 3
3\. each new call creates an array of length 2 (3-1)
4\. call the method recursively again, now 2 times and with an array of length 2
5\. each new call creates an array of length 1 (2-1)
6\. call the method recursively again, now once and with an array of length 1
7\. each new call creates an array of length 0 (1-1)
8\. those methods won't enter the loop since the condition now is `i < 0`, which is false with `i = 0` 
```

因此，在打印每个长度时，我希望得到以下输出

```
4   //initial call
3   //first iteration of step 2
2   //first iteration of step 4
1   //only iteration of step 6 
2   //second iteration of step 4
1
3   //second iteration of step 2
2   
1   
2   
1
3   //third iteration of step 2
2   
1   
2   
1 
```

如果你只想要一次迭代然后停止，你为什么要把循环放在那里？

# objective-c - 使用常量声明项目数组

> ID：10025039
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:20:29.653
> 
> 标签：objective-c, arrays, constants, c-preprocessor

是否可以在 Objective-C 中使用这样的东西：

```
#define number_of_items 10 
```

然后将其用作：

```
int arr[number_of_items]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:23:02.500

是的，假设您的意思是*Objective* C。它几乎是“正确”C 的超集，所以这完全没问题。在 C 和 C++ 中也可以。

您可以看到它在以下脚本中有效：

```
pax> cat qq.m
#import <objc/Object.h>

// First method.

#define number_of_items 10
int arr[number_of_items];

// Second method.

#define NUMBER_OF_ROWS 10
@interface test : Object{ int xyzzy[NUMBER_OF_ROWS]; }
@end;

pax> vi qq.m ; gcc -o qq.o -c qq.m -lobjc

pax> # no errors occurred 
```

* * *

而且，现在我们终于看到了您*实际*使用的内容：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define NUMBER_OF_ROWS_ (IS_IPAD? 18: 18) 
```

`NUMBER_OF_ROWS_`不是常数，*因为*它取决于函数的返回值`UI_USER_INTERFACE_IDIOM()`。

换句话说，它不能在编译时计算。这就是您收到错误的原因。您可以通过编译以下代码来看到这一点：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define NUMBER_OF_ROWS_ (IS_IPAD ? 18: 20)

int UI_USER_INTERFACE_IDIOM(void) {return 20;}
int UIUserInterfaceIdiomPad;

int main (void) {
    int arr[NUMBER_OF_ROWS_];
    return 0;
} 
```

在 下`gcc --pedantic`，你得到：

```
qq.m: In function ‘main’:
qq.m:8: warning: ISO C90 forbids variable length array ‘arr’ 
```

您要么需要使用动态可调整的集合，`NSMutableArray`要么使用所需的最大大小的数组，并且只使用您需要的。

# java - 替换或删除历史记录中的页面

> ID：10025046
> 
> 赞同：0
> 
> 时间：2012-04-05T08:20:58.737
> 
> 标签：java, jsf, jakarta-ee, netbeans

我目前正在开发一个具有登录名的应用程序，在此人登录后，我想从历史记录中删除登录页面，这样如果他们选择后退按钮（登录后），它就不会返回登录页面，而是之前的那个它。

在javascript中，代码是`location.replace('whatever_url_you_are_forwarding_to');`我想知道Java / JSF中的等价物

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:05:59.453

您可以通过以下方式解决此问题：

*   告诉浏览器不要缓存登录页面，这样它就会始终在其上发送一个完整的 GET 请求，而不是从浏览器缓存中加载。

*   当用户已经登录时请求登录页面时，发送重定向到所需页面（您在用户登录时在会话中记住的页面）。

这可以在一个相同的[过滤器](https://stackoverflow.com/tags/servlet-filters/info)中完成（尽管我个人更喜欢在所有对变化敏感的动态页面上禁用浏览器缓存，这样就可以在另一个过滤器中使用覆盖这些页面的更通用的 URL 模式来完成）。

这是一个启动示例，假设您正在使用容器管理的身份验证（对于您手动将用户置于会话中的本地身份验证，只需检查会话属性的存在）：

```
@WebFilter("/login.xhtml")
public class LoginPageFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession();

        // Tell browser to not cache this page.
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0); // Proxies.

        // Check if user is logged in.
        if (request.getRemoteUser() == null) {
            // Not logged in, so remember previous URL and continue request.
            session.setAttribute("referrer", request.getHeader("referer")); // Yes, the misspelling is "correct"!
            chain.doFilter(request, response);
        } 
        else {
            // Logged in, so redirect to initial referring URL, if any.
            String referrer = (String) session.getAttribute("referrer");

            if (referrer != null) {
                response.sendRedirect(referrer);
            }
            else {
                // There was no referring page. Just continue request?
                chain.doFilter(request, response);
            }
        }
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:57:18.467

服务器端 Java 代码无法修改客户端浏览器的历史记录。我不会弄乱浏览器历史记录：用户期望后退按钮具有一致且可预测的行为。如果他们想回到登录页面，让他们回到登录页面。

# iphone - UITableView 堆叠/阴影背景

> ID：10025049
> 
> 赞同：0
> 
> 时间：2012-04-05T08:21:15.777
> 
> 标签：iphone, ios, uitableview, uiview

我正在尝试使 UITableView 看起来好像它位于一堆文件之上。我通过覆盖使用 UIView 做了一个类似的版本`drawRect`，但是由于 UITableView 的复杂性，我相信它会比使用标准 UIView 更复杂。如果我使用可拉伸图像，则拉伸位不会对齐。实现这样的目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:30:53.110

对于 Shadow，您可以使用 CALayer，如下例所示。

```
tableView.layer.shadowRadius = 3.f;
tableView.layer.shadowColor = [UIColor blackColor].CGColor;
tableView.layer.shadowOffset = CGSizeMake(2, 2);
tableView.layer.shadowOpacity = .6f; 
```

对于堆栈印象，我会在表格视图下方添加一些具有相同阴影边框的视图。

# iphone - 裁剪 NSURL / NSString

> ID：10025050
> 
> 赞同：0
> 
> 时间：2012-04-05T08:21:22.660
> 
> 标签：iphone, xcode, nsstring, nsurl, crop

我得到了一些指向某些 mp3 的 URL，例如：

```
(1) localhost://blablabla/song1.mp3
(2) localhost://blablabla/songwithmorechars.mp3 
```

等等。

如何将 URL 裁剪为：

```
(1) song1.mp3
(2) songwithmorechars.mp3 
```

需要显示我`AVAudioPlayer`正在播放的当前歌曲`UILabel`。

谢谢

**解决方案：**

这是交易：

```
titleLabel.text = [[[self.audioPlayer.url absoluteString] lastPathComponent] stringByReplacingOccurrencesOfString:@".mp3" withString:@""]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:26:45.697

取最后一个 / 的子字符串（在 ObjC 中有一个方法！）

```
NSString *sub = [url lastPathComponent]; 
```

这是该方法的信息：

[NSString lastPathComponent 苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/lastPathComponent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:28:08.840

只需使用`[url lastPathComponent]`，您无需先将其转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:28:27.353

采用

```
 NSString *lastString = [yourStringName lastPathComponent]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:29:56.733

```
NSURL *firstURL = [NSURL URLWithString:@"localhost://blablabla/song1.mp3"];
NSString *firstString = [firstURL absoluteString];
NSLog(@"Name:%@",[firstString lastPathComponent]); 
```

来自文档：

[NSURL 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/relativePath)

[NSString 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/lastPathComponent)

# cocoa - Cocoa：Lion 中的全球捷径

> ID：10025051
> 
> 赞同：1
> 
> 时间：2012-04-05T08:21:22.937
> 
> 标签：cocoa, osx-lion, keyboard-shortcuts

我一直在寻找一种方法来为我的应用程序实现一个全局快捷方式，它就像快捷方式记录器一样工作。问题是我还没有找到一个适用于当前版本的 xcode，我发现的每一个都会在 xcode 中引发关于遗留内容的错误。我发现在 Lion 中唯一有用的是 DDHotKey，它完全符合我的要求，但它的缺点是用户不会在漂亮的智能文本字段之类的东西中记录快捷方式，它是预设的快捷方式.

谁能告诉我如何向 DDHotKet 添加智能文本字段，或修复 Lion 中的 SR？似乎对于 ShortcutRecorder 的具体问题与使用旧插件的 IB 中的实际文本字段有关，所以我不能使用文本字段（这是我真正想要的）。我查找了一大堆不同的框架，但它们都有过时的东西。老实说，即使我找到了运行 SR 的修复程序，我仍然不知道该怎么做，因为它似乎比我发现的所有其他方法都复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:48:14.070

ShortcutRecorder 的这个分支在 Xcode 4 中构建：

[https://github.com/youknowone/shortcutrecorder](https://github.com/youknowone/shortcutrecorder)

它还有一个很好的演示项目，展示了如何使用 API。

# html - CSS-3 'target-new' 和 html5 target='_blank' 用于在新选项卡中打开

> ID：10025053
> 
> 赞同：4
> 
> 时间：2012-04-05T08:21:32.477
> 
> 标签：html, css

我正在寻找在新选项卡中打开页面的解决方案，然后我登陆了 CSS-3 属性 [target-new](http://www.w3.org/TR/2004/WD-css3-hyperlinks-20040224/#target-new)

它指出：“如果用户希望在新选项卡中打开新窗口，她可以使用以下用户样式表来执行此操作：

*{ 目标新：制表符！重要的 }”

我有几个问题：

*   它在内部如何运作？
*   为什么我们在 html5 规范中没有像 target="_tab" 这样的属性，但是在新选项卡中打开链接时这个属性与 Presentation 没有任何直接关系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:29:48.053

> 它在内部如何运作？

还没有浏览器实现这一点。

> 为什么我们没有像`target="_tab"`html5 规范中那样的属性，但有这个属性，因为在新选项卡中打开链接与 Presentation 没有任何直接关系？

`target=_blank`由于向后兼容性，仍然允许。引入新的保留目标值，例如`_tab`，在浏览器中的工作方式不同。

恕我直言，决定应该留给用户，网络作者不应该强制`target=_blank`或`target-new: tab|window`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T10:11:04.877

每个人都完全忽略了使用 Target=_blank 的正当理由，那就是当网站被写成带有章节/页面的 BOOK 并且目录必须保持完整而不使用 BACK 按钮重新加载前一页时（目录）。这样，浏览者只需在阅读完毕后关闭目标页面，他们就会回到目录。幸运的是，HTML5 已经恢复了 Target="_blank" 代码，但不幸的是，必须取消选中“阻止弹出窗口”才能使其正常工作。

# django - Django 服务器结构和约定

> ID：10025056
> 
> 赞同：3
> 
> 时间：2012-04-05T08:21:44.663
> 
> 标签：django, deployment, fabric

我有兴趣找出在服务器上组织 Django 应用程序的最佳实践方式。

*   你在哪里放置 Django 代码？（现在旧的）年历说 /home/django/domains/somesitename.com/ 但我也看到了放在 /opt/apps/somesitename/ 中的东西。我认为 /opt/ 想法听起来更好，因为它不是全球性的，但我以前没有见过 opt，并且大概将应用程序放在特定于站点的部署程序用户主目录中可能会更好。

*   您是否建议让一个全局部署用户、每个站点一个用户或每个站点环境一个用户（例如，sitenamelive、sitenamestaging）。我在想每个站点一个。

*   您如何对配置文件进行版本控制？我目前将它们放在源代码控制顶层的 /etc/ 文件夹中。例如，/etc/nginc/somesite-live.conf。

*   您如何配置服务器并进行部署？多年来，我一直反对 Chef 和 Puppet，希望基于 Python 的东西。Silver Lining 似乎还没有准备好，我对 Patchwork 寄予厚望（https://github.com/fabric/patchwork/）。目前我们只是使用一些自定义 Fabric 脚本进行部署，但“服务器配置”由 bash 脚本和一些用于添加密钥和创建用户的手动步骤处理。我即将调查 Silk Deployment (https://bitbucket.org/btubbs/silk-deployment)，因为它似乎最接近我们的设置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:51:59.513

I think there would have to be more information on what kinds of sites you are deploying: there would be differences based on the relations between the sites, both programatically and 'legally' (as in a business relation):

*   Having an system account per 'site' can be handy if the sites are 'owned' by different people - if you are a web designer or programmer with a few clients, then you might benefit from separation.
*   If your sites are related, i.e. a forum site, a blog site etc, you might benefit from a single deployment system (like ours).
*   for libraries, if they're hosted on reputable sources (pypy, github etc), its probably ok to leave them there and deploy from them - if they're on dodgy hosts which are up or down, we take a copy and put them in a /thirdparty folder in our git repo.

**FABRIC** Fabric is amazing - if its setup and configured right for you:

*   We have a policy here which means nobody ever needs to log onto a server (which is *mostly* true - there are occasions where we want to look at the raw nginx log file, but its a rarity).
*   We've got fabric configured so that there are individual functional blocks (restart_nginx, restart_uwsgi etc), but also
*   higher level 'business' functions which run all the little blocks in the right order - for us to update all our servers we meerly type 'fab -i secretkey live deploy' - the live sets the settings for the live servers, and deploy ldeploys (*the -i is optional if you have your .ssh keys set up right*)
*   We even have a control flag that if the live setting is used, it will ask 'are you sure' before performing the deploy.

**Our code layout**

So our code base layout looks a bit like this:

```
/         <-- folder containing readme file etc
/bin/     <-- folder containing nginx & uwsgi binaries (!)
/config/  <-- folder containing nginx config and pip list but also things like pep8 and pylint configs 
/fabric/  <-- folder containing fabric deployment
/logs/    <-- holding folder that nginx logs get written into (but not committed)
/src/     <-- actual source is in here!
/thirdparty/ <-- third party libs that we didn't trust the hosting of for pip 
```

Possibly controversial because we load our binaries into our repo, but it means that if i upgrade nginx on the boxes, and want to roll back, i just do it by manipulation of git. I know what works against what build.

**How our deploy works:**

All our source code is hosted on a private bitbucket repo (we have a lot of repos and a few users, thats why bitbucket is better for us then github). We have a user account for the 'servers' with its own ssh key for bitbucket.

Deploy in fabric performs the following on each server:

*   irc bot announce beginning into the irc channel
*   git pull
*   pip deploy (from a pip list in our repo)
*   syncdb
*   south migrate
*   uwsgi restart
*   celery restart
*   irc bot announce completion into the irc channel
*   start availability testing
*   announce results of availability testing (and post report into private pastebin)

The 'availability test' (think unit test, but against live server) - hits all the webpages and API's on the 'test' account to make sure it gets back sane data without affecting live stats.

We also have a backup git service so if bitbucket is down, it falls over to that gracefully, and we even have jenkins integration that on a commit to the 'deploy' branch, it causes the deployment to go through

**The scary bit**

Because we use cloud computing and expect a high throughput, our boxes auto spawn. Theres a default image which contains a a copy of the git repo etc, but invariably it will be out of date, so theres a startup script which does a deployment to itself, meaning new boxes added to the cluster are automatically up-to-date.

# javascript - 价格的类似 Javascript preg_match 的示例

> ID：10025065
> 
> 赞同：0
> 
> 时间：2012-04-05T08:22:30.380
> 
> 标签：javascript, regex

我需要 javascript 正则表达式示例。我想只插入像 12.15 或 15,12 之类的值...（对我来说不需要完全是那个值，而是带点或逗号的十进制值） 如何为它格式化正则表达式？

可接受的值：12.15、15.15、13.14

禁止值：12,15, 15,15, 15,ads15

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:32:17.927

我认为这种事情不需要正则表达式，试试 parseFloat

```
var float = parseFloat("12.15"); 
```

如果参数不是有效数字，则`parseFloat()`返回`NaN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:06:03.583

如果您想要一个仅匹配具有 2 位美分值的正确格式价格的正则表达式，这将起作用：

```
/^-?[0-9]+\.[0-9][0-9]$/ 
```

向它传递一个字符串，如果字符串（整个字符串）是正确的价格，它会匹配，正好有 2 个小数位。

注意`/^...`和`...$/`。它们确保整个字符串匹配，或者根本不匹配。

还要注意`-?`. 这与负价格相匹配。

# html - CSS：如何制作包含“可提交”表单的列表项？

> ID：10025068
> 
> 赞同：0
> 
> 时间：2012-04-05T08:22:52.893
> 
> 标签：html, css

**寻找非 JS 解决方案。**说我有这样的事情：

```
<ul>
   <li>
      <form>
         <fieldset>
            ...
            <input type="submit" value="Submit"/>
         </fieldset>
      </form>
   </li>
   ...
</ul> 
```

有没有办法在**没有 JS**的情况下执行以下操作：

1.  使提交按钮不可见，并且
2.  使可点击的任何部分`<li>`（意思是，它将提交表单）

？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:27:35.970

您可以使用 JS 提交没有 sumbit 按钮的表单：

```
<li onClick="document.forms["myform"].submit();">my LI</li>
<form id="myform">
<!-- FORM -->
</form> 
```

这只是实现这一目标的快速方法。如果你也在使用 JS 来解决其他问题，你不应该直接实现它（内联）。

更新 - 没有 JS：

如果没有 JS，您肯定需要输入，但您可以根据需要使用 css 对其进行样式设置：

```
input.submit { border:none; background-color:transparent; display:block; width:200px;
height:200px; position:absolute; } 
```

通过`top`，`left`你可以把它放在里。`position:relative`可能会更好。这取决于你想如何定位它。

```
<input class="submit" type="submit" /> 
```

# facebook - 新的 FB Canvas (810px) 被切断

> ID：10025071
> 
> 赞同：1
> 
> 时间：2012-04-05T08:23:00.323
> 
> 标签：facebook, facebook-apps

我正在 facebook 上开发一个应用程序。从昨天开始，使用以下代码段调整大小工作正常： CSS：

```
body, html { overflow:hidden; width:810px;margin:0; padding:0; border:0; } 
```

在结束 body 标签之前：

```
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" charset="utf-8">
FB.Canvas.setAutoGrow(true,100);
</script> 
```

在 Facebook 上，我选择了固定的高度和宽度，但由于自动增长，这并不重要。

由于今天它刚刚被切断，我尝试了流体设置，但它没有改变任何东西。我可以删除 body 和 html 的 css 规则，但随后添加了滚动条。

简而言之：调整大小不再起作用。

重要的是要知道（也许）应用程序动态调整大小（通过 JS）而无需重新加载页面。

代码根本没有改变，所以我担心 Facebook 可能改变了什么？

此外，我还尝试了这个 js 片段，但没有任何效果（但它还是一样）：

```
<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function () {
window.setTimeout(function () {
    FB.Canvas.setAutoGrow()
}, 250)
};
(function () {
var e = document.createElement('script');
e.async = true;
e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
document.getElementById('fb-root').appendChild(e)
}());
</script> 
```

更新：

这个问题得到了正确的回答，但还有一件事需要注意：`overflow:hidden`仅适用于`body`，它在我`html`从规则中删除后起作用 - 与旧画布一起使用，至少我以前使用过它。

同样将代码放在标题中也没有改变任何东西，并且与将其放在正文区域的开头不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:32:30.030

试试这个

```
<div id="fb-root"></div>
    <script src="https://connect.facebook.net/en_US/all.js"></script>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId : 'YOUR APP ID', //Your facebook APP here
          cookie : true, // enable cookies to allow the server to access the session
        });
      }

      window.onload = function() {
        FB.Canvas.setAutoGrow(91);
      }
    </script> 
```

# python - open('output1.txt', 'w').write("Hello guy") 与 openvar.write("Hello guy")

> ID：10025072
> 
> 赞同：0
> 
> 时间：2012-04-05T08:23:02.243
> 
> 标签：python, file, variables

当我做

```
open('output1.txt', 'w').write("Hello guys") 
```

立即创建了一个名为 output1.txt 的文件，其中包含字符串“Hello guy”。但是当我这样做时

```
openvar = open('output2.txt', 'w')
openvar.write("Hello guys") 
```

然后只创建文件 output2.txt。当我这样做时，只会在 output2.txt 上看到文本“Hello guy” `openvar.close()`。为什么这种行为仅仅因为额外的变量分配而不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T08:26:24.090

Python 检测到在您的第一种情况下不再引用文件对象，因此垃圾收集器将收集它并调用其析构函数来关闭文件。

在第二种情况下，文件对象仍然存在，因此它不会自动关闭。

* * *

完成后，您应该**始终**关闭文件。该`with`声明使这很容易：

```
with open('output.txt', 'w') as f:
    f.write('Hello') 
```

一旦块离开，文件就会再次关闭 - 即使块内的代码引发异常。

* * *

如果您出于某种原因需要保持文件打开（例如，因为您要写入更多数据），您可以`.flush()`强制系统清空写入缓冲区并将其实际写入文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:27:32.073

在第一种情况下，垃圾收集器将为您关闭文件。没有对该文件的引用。在第二种情况下，您创建了对该文件的引用。您必须手动关闭它，否则当引用被销毁时它将被垃圾收集器关闭。

# hibernate - 休眠级联操作不起作用

> ID：10025074
> 
> 赞同：0
> 
> 时间：2012-04-05T08:23:33.260
> 
> 标签：hibernate, save

我在休眠中使用级联操作时遇到了一些问题。我有一个实体（TripleDBmodel），实体的主键是使用对三个对象（概念）的引用创建的。它工作完美，我还在这些对象上添加了级联操作，我认为 TripleDBModel 实体的保存操作也将保存数据库中不存在的概念。但是它不是那样工作的。

```
 @Entity
 @Table(name = "triple")
 public class TripleDBModel implements java.io.Serializable{

private Concept subject;
private Concept object;
private Concept predicate;
public TripleDBModel(){

}
@Id
@ManyToOne(targetEntity=Concept.class)
@Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
@JoinColumn(name="subject_uri")
public Concept getSubject() {
    return subject;
}
public void setSubject(Concept subject) {
    this.subject = subject;
}
@Id
@ManyToOne(targetEntity=Concept.class)
@Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
@JoinColumn(name="object_uri")
public Concept getObject() {
    return object;
}
public void setObject(Concept object) {
    this.object = object;
}
@Id
@ManyToOne(targetEntity=Concept.class)
@Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
@JoinColumn(name = "predicate_uri")
public Concept getPredicate() {
    return predicate;
}
public void setPredicate(Concept predicate) {
    this.predicate = predicate;
}

}

@Entity
@Table(name = "concept")
public class Concept implements java.io.Serializable {

private String uri;
private String label;

// private List<TripleDBModel> triple;

public Concept(String uri, String label) {
    this.uri = uri;
    this.label = label;
    this.ontologies = new ArrayList<Ontology>();
}

public Concept() {
    super();
}

@Id
@Column(name = "uri", length = 255, unique = true, nullable = false)
public String getUri() {
    return uri;
}

public void setUri(String uri) {
    this.uri = uri;
}
.... 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:05:41.260

级联选项仅适用于关系的 @OneToMany 一侧。

您应该知道何时需要创建一个新概念，因此单独坚持它应该不是问题吗？

# ios - 后台位置不起作用

> ID：10025076
> 
> 赞同：1
> 
> 时间：2012-04-05T08:23:49.410
> 
> 标签：ios

我已经添加

```
<key>UIBackgroundModes</key>
    <array>
        <string>location</string>
    </array> 
```

到 plist 文件以使后台位置正常工作，然后我开始了位置更新。但我注意到它不再工作了，虽然，它以前工作得很好。

这与升级到5.1有什么关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:37:56.087

我浪费了一些时间后修复它：

我删除了

```
<key>UIBackgroundModes</key>
    <array>
        <string>location</string>
</array> 
```

比我重新安装应用程序，而不是再次，我添加它并重新安装应用程序。有效。

# java - 仅使用 Android API 示例学习 Android SDK

> ID：10025078
> 
> 赞同：-2
> 
> 时间：2012-04-05T08:23:57.517
> 
> 标签：java

我一直在阅读，我必须学习 Java 才能制作 android 程序。但是当我读到 Java 时，它都不适用于 Android SDK 中的模块。我不是一个程序员，所以如果我必须花费数年时间尝试学习另一种语言并在 Android SDK 看起来可以完成之前与其他编译器混为一谈，我并不感兴趣。这应该是一个简单的要求，但是当我在 IRC 上询问时，他们非常粗鲁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:29:59.470

不了解 Java 就不可能对 Android 进行编程。我想你可以尝试同时学习两者，但这将是一个相当陡峭的学习曲线。如果您不了解 Java，那么 android-samples 对您没有任何意义。

抱歉，没有捷径可走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:36:27.100

我绝不是专家，但几年前我在大学学习了 Java 的基础知识，然后继续使用 Android 来完成我的学士论文项目（这是在最新的 Android 版本是 1.6 IIRC 时回来的）。以我有限的经验，Android SDK 模块确实与 Java 关系不大。无论如何，感觉就像我在学习一种全新的语言和 SDK。在我看来，你自己学习 Android 就可以了。我建议你试一试，如果你发现自己陷入了困境，你总是可以退后一步，买一本关于 Java 的书。

另外，既然你提到你不是一个程序化的人，谷歌去年有一个名为 App Inventor 的项目，非程序员可以用它来制作简单的 Android 应用程序。我从未使用过它，但我听说过关于它的好消息，因此根据您的项目，您可能想检查一下。谷歌已经放弃了对它的支持，但麻省理工学院似乎已经接受了它： http: [//www.appinventor.mit.edu/](http://www.appinventor.mit.edu/)。

编辑：固定链接。

# facebook - Linkedin/Facebook Api 让用户对网络更新的用户发表评论

> ID：10025080
> 
> 赞同：6
> 
> 时间：2012-04-05T08:24:02.757
> 
> 标签：facebook, facebook-graph-api, social-networking, linkedin

我`linkedin api`用于获取网络更新。而且我能够获取用户在`his update`或 上发表的评论`his 1st degree network updates`。

我的问题是：有什么方法可以让用户对`out of network`更新发表评论？谢谢。

更新：如果有人能引导我找到一种让用户了解朋友或非朋友的状态/在 Facebook 上分享的方法，`facebook api` 这也会很有帮助。`recent likes`这些显示在最近活动块中的 facebook 个人资料页面和/或`activity log page`facebook 上。尽管如果用户喜欢页面/粉丝页面，则可以获得。任何帮助表示赞赏。需要帮助..:-(请回答...感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:22:11.803

我将尝试回答您有关 Facebook API 的问题。

您可以使用此 FQL 查询获取当前用户对状态更新的点赞：

```
SELECT object_id FROM like WHERE user_id=me() AND object_type="status" 
```

这将为您提供用户喜欢的状态更新列表，按时间排序，最近的在前。这仅包括状态更新，不包括照片或视频共享或任何其他对象类型。您可以通过将查询末尾的类型（“状态”）更改为以下类型之一来将查询修改为不同的对象类型：

```
photo
album
event
group
note
link
video
application
check-in
review
comment
post 
```

你需要

```
read_stream
user_likes 
```

此查询的权限。

[您可以在此处](https://developers.facebook.com/docs/reference/fql/like/)阅读有关 FQL 'like' 表的更多信息。

# sql-server-2008 - 对 SQL Server 中的名称字段进行部分匹配

> ID：10025081
> 
> 赞同：6
> 
> 时间：2012-04-05T08:24:11.987
> 
> 标签：sql-server-2008, full-text-search

我需要在名称搜索中启用部分匹配。目前它可以使用，`Like '%@name%'`但还不够好。

我们需要启用输入名字和姓氏，并且两者都需要是部分的，所以我假设全文是要走的路。

问题是我无法让它对名称进行部分匹配。例如，搜索我的名字 (Fedor Hajdu) 将起作用，如果我输入全部而不是部分的任何部分（它应该匹配`'fe ha'`例如搜索。

我怎样才能做到这一点？可以将全文索引设置为执行音节匹配之类的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:38:03.547

哼哼三个可以帮助您的选项：

1.  屈折形式（[链接](http://msdn.microsoft.com/en-us/library/ms142566%28v=sql.100%29.aspx)）
2.  包含 NEAR（[链接](http://msdn.microsoft.com/en-us/library/ms187787.aspx)）
3.  包含加权值（[链接](http://technet.microsoft.com/en-us/library/cc879300.aspx#Weighted_Term)）

如果这没有帮助，请获取字符串 'fe ha' 并在每个空白处添加一个 '%' 并执行 Like：

```
Like '%fe%ha%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T22:02:49.367

使用 CONTAINS() 或 CONTAINSTABLE() 您需要做的就是在匹配字符串的末尾添加 * ：

包含（描述，'"top*"'）；

如果你有你的字符串作为参数，你可以像这样连接：

SET @SearchTerm = '"' + @NameParameter + '*"'

包含（描述，搜索词）；

[https://technet.microsoft.com/en-us/library/ms142492(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/ms142492(v=sql.105).aspx)

# java - FileOutputStream 的存在导致 InputStream.read 错误

> ID：10025091
> 
> 赞同：1
> 
> 时间：2012-04-05T08:24:58.073
> 
> 标签：java

我的 Java IO 有问题，下面这段代码不起作用，变量 count 直接返回 -1。

```
public void putFile(String name, InputStream is) {      

    try {

        OutputStream output = new FileOutputStream("D:\\TEMP\\" + name);

        byte[] buf = new byte[1024];
        int count = is.read(buf);
        while( count >0) {
            output.write(buf, 0, count);
            count = is.read(buf);
        }

    } catch (FileNotFoundException e) {

    } catch (IOException e) {

    }

} 
```

但是，如果我评论了 OutputStream，例如

```
 public void putFile(String name, InputStream is) {      

    try {

        //OutputStream output = new FileOutputStream("D:\\TEMP\\" + name);

        byte[] buf = new byte[1024];
        int count = is.read(buf);
        while( count >0) {
            //output.write(buf, 0, count);
            count = is.read(buf);
        }

    } catch (FileNotFoundException e) {

    } catch (IOException e) {

    }

} 
```

计数将返回正确的值 (>-1)。这怎么可能 ？这是一个错误吗？

我在 Eclipse 中使用 Jetty，在 Windows 7 中使用 Google 插件和 Java 6.21。 PS：我更改了原始代码，但它不影响问题

# ruby - 如何在 Ruby 编程中设计/找出所需的路径？

> ID：10025092
> 
> 赞同：1
> 
> 时间：2012-04-05T08:25:02.527
> 
> 标签：ruby, path

是否有一种设计良好的方法可以从任何地方运行我的 ruby​​ 程序？我已经搜索了几种使用相对路径从不同目录导入我的 ruby​​ 程序的方法。

IE

> File.expand_path(“我的路径”)

它有效，让我可以在任何地方运行它，但不知何故，它有点不可读，我认为它非常混乱。所以我认为当有很多文件路径需要导入时，可能会有解决方案或约定来处理这类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:35:32.847

我建议你看看[如何打包一个 gem](http://guides.rubygems.org/)并构建你自己的并安装它。或者你可以将你的二进制文件放在 中`$PATH`，但这有点混乱。

# java - 我想显示一个指标表，但无法这样做

> ID：10025100
> 
> 赞同：0
> 
> 时间：2012-04-05T08:25:43.450
> 
> 标签：java, eclipse, plugins

我正在开发一个插件来计算所选 java 文件的类指标。因此，m 使用 IWorkbenchWindowAction 委托添加插件按钮和菜单选项。

通过选择 java 文件，然后单击插件按钮，我获得了所选文件的路径名，现在我需要计算它的指标。

假设我已经计算了指标。现在，我想以表格形式显示它们。

需要做什么 ？？？我如何显示一个表格，并在按下插件按钮后立即显示它（在计算指标之后，当然）.. ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:16:53.867

您可能必须创建自己的视图，其中包含表（查看器）。更新查看器策略可能会有所不同。例如，您可以让视图监听一些事件，这些事件是在计算指标后生成的。或者，如果你想要一个单独的按钮来更新视图，那么你应该附加适当的动作/命令处理程序和必要的逻辑。这能回答你的问题，还是我错过了什么？

# android - 第一个 Listview 使用 notifyDataSetChanged() 更新第二个 ListView 不会更新

> ID：10025104
> 
> 赞同：1
> 
> 时间：2012-04-05T08:26:06.367
> 
> 标签：android, listview, baseadapter

我的（tabhost）Android 应用程序中有两个 ListView。两者都带有自定义 BaseAdapter。两个 ListView 都在请求 JSON 流。加载 JSON 流时，自定义 BaseAdapter 正在调用 notifyDataSetChanged。

当我使用 ListView 选择其中一个选项卡时，列表会完美加载，当我选择其中包含另一个列表的另一个选项卡时，列表不会加载。我选择标签的顺序无关紧要。当我选择 tab1 时，tab1 被加载，而 tab2 将无法加载列表。当我首先选择选项卡 2 时，将加载选项卡 2 的列表，当我选择选项卡 1 时，此列表将失败。

加载 JSON 流时，在自定义 BaseAdapter 中调用此方法：

```
@Override
public void jsonObjectLoaded(JSONObject a) {

        setItems((JSONArray) a.get("categories"));
        for(int c = 0; c<getItems().size(); c++)
            imgs.add(null);
    progressDialog.dismiss();
    notifyDataSetChanged();
} 
```

getView() 方法在第一个选定的选项卡上第一次调用，它不会在第二个选定的选项卡上调用。我究竟做错了什么？

提前致谢！

# javascript - 如何在数据库列中保存 HTML 元素 ID 及其层次结构？

> ID：10025107
> 
> 赞同：0
> 
> 时间：2012-04-05T08:26:28.180
> 
> 标签：javascript, html, database, dom

我想将元素的 ID 保存在数据库列中。我还需要将该元素的完整 DOM 层次结构保存在同一列中。稍后我将使用此列信息通过 JavaScript 解析和遍历来获取该元素的值。

我不确定使用哪种模式来保存这些信息。

例如：

我正在考虑以下模式：

```
elementLocation = "iframe[iframeName],iframe[iframeName2],element[elementID]"
elementLocation= "frame[frameName],frame[frameName2],element[elementID]"

elementLocation= "i[iframeName],i[iframeName2],e[elementID]"
elementLocation= "f[iframeName],f[iframeName2],e[elementID]" 
```

请提出一个更好的模式，可以用来表示任何类型的层次结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:32:26.320

您可以使用专为此目的设计的[XML Path 语言。](http://www.w3.org/TR/xpath/)

# iphone - 如何在 iOS 中将更多文本附加到 UILabel 中？

> ID：10025109
> 
> 赞同：3
> 
> 时间：2012-04-05T08:26:39.297
> 
> 标签：iphone, objective-c, ios, uilabel

我想在 iOS 中的 UILabel 后面附加更多文本。

在其他语言中，我们可以添加以下内容：

```
String s += textBox.text; 
```

我们可以在其他语言中使用 (+=) 符号。

在 Objective-C 中，我不知道如何添加到标签中。

请帮我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T08:35:34.587

试试这个：

```
label.text = [label.text stringByAppendingString:@"your text"]; 
```

这应该可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T08:33:20.987

```
label.text = [NSString stringWithFormat:@"%@%@", label.text, @"your text to append"]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T08:36:35.543

当你有一个会不断变化的字符串时，我建议你使用 NSMutableString

```
 `NSMutableString *str=[[NSMutableString alloc]initWithString:@"aaaaaa"];
    [str appendString:@"bbbbbb"];` 
```

* * *

 `## 回答 #4

> 赞同：2
> 
> 时间：2017-06-10T19:01:23.207

我像下面的行一样使用，

```
label.text = "My Text"
label.text = label.text! + " appended text" 
````

# javascript - JavaScript 解析器是如何工作的？

> ID：10025114
> 
> 赞同：4
> 
> 时间：2012-04-05T08:27:13.653
> 
> 标签：javascript, parsing

我试图了解 JS 是如何被实际解析的。但是我的搜索要么返回一些文档非常模糊的“解析器/生成器”项目（我什至不知道那是什么意思），或者如何使用 JS 引擎使用神奇的“解析”方法解析 JS。我不想扫描一堆代码并尝试一生去理解（虽然我可以，但这需要太长时间）。

我想知道 JS 代码的任意字符串实际上是如何变成对象、函数、变量等的。我还想知道将字符串变成东西、存储、引用、执行的过程和技术。

是否有任何文档/参考资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:27:27.723

解析器可能以各种方式工作，但从根本上说，它们首先经过一个标记化阶段，然后将结果提供给编译器，如果可以的话，编译器会将其转换为程序。例如，给定：

```
function foo(a) {
  alert(a);
} 
```

解析器将删除任何前导空格到第一个字符，字母“f”。它将收集字符，直到它得到不属于的东西，即表示令牌结束的空格。它再次从 "foo" 的 "f" 开始，直到到达 "("，所以它现在有标记 "function" 和 "foo"。它知道 "(" 本身就是一个标记，所以是 3令牌。然后它得到“a”，后跟“)”，这两个令牌组成 5，依此类推。

空格的唯一需要是在其他不明确的标记之间（例如，“function”和“foo”之间必须有空格或另一个标记）。

一旦标记化完成，它就会进入编译器，编译器将“function”视为标识符，并将其解释为关键字“function”。然后它得到“foo”，语言语法告诉它的标识符是函数名。然后“（”表示一个开放的分组运算符，因此是一个形式参数列表的开始，依此类推。

编译器可能一次处理一个令牌，或者可能会分块抓取它们，或者做各种奇怪的事情来使它们运行得更快。

您还可以阅读[C/C++ 解析器如何工作？](https://stackoverflow.com/questions/4754948/how-do-c-c-parsers-work)，这提供了更多线索。或者只是使用谷歌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:56:34.147

虽然它与真正的 JS 引擎的工作方式并不密切对应，但您可能有兴趣阅读 Douglas Crockford 的关于[Top Down Operator Precedence](http://javascript.crockford.com/tdop/tdop.html)的文章，其中包括使用它解析的 Javascript 子集编写的小型工作词法分析器和解析器的代码。它是非常易读且简洁的代码（附带很好的解释），它至少为您提供了实际实现如何工作的概要。

比 Crockford 的“Top Down Operator Precedence”更常用的技术是[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)解析，在[Narcissus](http://mxr.mozilla.org/mozilla/source/js/narcissus/)中使用，JS 中 JS 的完整实现。

# django-views - Django视图应该处理多少个动作？

> ID：10025115
> 
> 赞同：0
> 
> 时间：2012-04-05T08:27:14.197
> 
> 标签：django-views

我查看了 Django 内置的 Auth 应用程序，并注意到视图分为许多：

`password_reset`, `password_reset_confirm`, `password_reset_done`, `password_reset_complete`

在这里，每一个简单的动作都有不同的视角。所有的应用程序都应该这样写，还是一个视图可以管理更多的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:30:36.827

经验法则是不同的 URL 应该由不同的视图处理。

在 Django 1.3中引入[基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)之前，如果您的视图函数试图处理许多情况，这可能会导致混乱。但是现在您可以创建基于类的视图，允许您对现有视图进行子类化并重用这些视图的行为。

例如（对于有多个游戏的网站）。

```
class GameView(View):

    def game_method(self):
        # compute things here            
        return data

class PuzzleGameView(GameView):

    def get(self, request, *args, **kwargs):
        data = self.game_method()
        # do other things here
        return HttpResponse("")

class SudokuGameView(PuzzleGameView):
    pass

class ActionGameView(GameView):
    pass 
```

中定义的方法`GameView`可以在子类中调用和重用。

# xcode - 如何在 Xcode 中更改图像的背景颜色？

> ID：10025122
> 
> 赞同：0
> 
> 时间：2012-04-05T08:27:37.137
> 
> 标签：xcode

在我的程序中，我需要在 GUI 上添加一些图像。但是，图像的背景颜色与视图的背景颜色不同。我知道有一个用于更改图像背景的属性。但是，当我更改此项目的功能时，没有任何反应。在项目中添加图像之前，我是否错过了一些设置，以至于我无法更改图像的背景颜色？非常感谢您的紧急帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:15:16.150

可以更改*ImageView 的*背景，但不能更改 Image。

您可以通过指定所需的 ImageView 的颜色来做到这一点。

```
[imageViewName setBackgroundColor:[UIColor redColor]]; 
```

或者您可以指定 RGB 值。

```
[imageViewName setBackgroundColor:[UIColor colorWithRed:0.5 green:0.0 blue:1 alpha:1.0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:30:21.437

您无法更改图像的背景。但是您可以更改包含图像的 imageview 的背景颜色。

# vb.net - 如何将“类项目”中的 dll 嵌入到我在 vb.net 中的项目中

> ID：10025127
> 
> 赞同：7
> 
> 时间：2012-04-05T08:28:02.793
> 
> 标签：vb.net, dll

我有一个标准的“类库”项目，其中包含一组用于在几乎所有新项目中导入的类。

我的工作方式是用一个空项目创建一个新的解决方案，这是我的主项目，然后我将提到的类库项目添加到解决方案中，这样我可以在解决方案资源管理器中看到这两个项目，甚至可以看到库代码或根据需要进行更新。然后我在我的主项目中编写代码并进行编译。

这导致我在编译时有 2 个文件：文件`*.exe`和`stdlib.dll`

在某些情况下，我将 lib 用于非常小的工具，我想以简单明了的方式重新分发这些工具，因此我想将`stdlib.dll`生成的类库项目嵌入到我的`*.exe`文件中。

我很确定在我的 Microsoft Visual Basic 2010 Express 中必须有这样做的原因，但我不知道怎么做。

有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T20:39:34.307

[这是亚历克斯](https://stackoverflow.com/a/10025506/117870)嵌入程序集的更“分步”版本。

1.  将所需的程序集 (stdlib.dll) 添加到项目的资源中。
    转到项目属性的**资源选项卡，然后选择***添加资源 > 添加现有文件...*
2.  切换到**应用程序**选项卡并单击**查看应用程序事件**按钮。
3.  将此代码添加到打开的*ApplicationEvents.vb*代码中。

    ```
    Private Sub AppStart(ByVal sender As Object, 
      ByVal e As Microsoft.VisualBasic.ApplicationServices.StartupEventArgs) Handles Me.Startup
        AddHandler AppDomain.CurrentDomain.AssemblyResolve, AddressOf ResolveAssemblies
    End Sub

    Private Function ResolveAssemblies(sender As Object, e As System.ResolveEventArgs) As Reflection.Assembly
        Dim desiredAssembly = New Reflection.AssemblyName(e.Name)

        If desiredAssembly.Name = "the name of your assembly" Then
            Return Reflection.Assembly.Load(My.Resources.STDLIB) 'replace with your assembly's resource name
        Else
            Return Nothing
        End If
    End Function 
    ```

4.  现在编译您的项目，您将把依赖程序集作为单个文件合并到输出中。

请注意，有时您可能在输出文件夹中有依赖程序集。这是因为 VS 已预先配置为将所有依赖程序集复制到输出路径。您可以通过转到项目属性的**References**选项卡来覆盖它，然后将依赖程序集的**Copy Local属性设置为***False*。这将阻止程序集被复制到输出目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:52:41.247

您可以`Assembly`通过选择“添加现有文件”将您的（在您的情况下为 .dll）嵌入到您的项目中，然后将构建选项更改为“嵌入式资源”。

`Handler`然后，您为第一次访问代码中的库时立即触发的`AppDomain.CurrentDomain.AssemblyResolve`事件添加一个。

该处理程序代码如下所示：（注意完全限定的程序集路径包括正确的名称空间。我将其包装在一个函数中，该函数在您的应用程序启动时被调用。

```
 AddHandler AppDomain.CurrentDomain.AssemblyResolve,
            Function(sender As Object, args As System.ResolveEventArgs) As System.Reflection.Assembly
                Dim ressourceName = "YourNamespace.YourSubNamespace." + New AssemblyName(args.Name).Name + ".dll"
                Using stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(ressourceName)
                    Dim assemblyData(CInt(stream.Length)) As Byte
                    stream.Read(assemblyData, 0, assemblyData.Length)
                    Return Assembly.Load(assemblyData)
                End Using
            End Function 
```

然后，您无需任何其他文件即可部署您的工具。

# java - 一种调度算法

> ID：10025132
> 
> 赞同：4
> 
> 时间：2012-04-05T08:28:14.447
> 
> 标签：java, algorithm, ejb

我在为医疗审查委员会设计调度算法时寻求帮助：每天有数百名客户从 14 天后开始安排给专业医生。每位患者可能需要去看不止一位医生，在极端情况下可能多达 5 次。

有固定数量的房间，其中一些有专门的设备。对于某些会议，只能使用特定的房间。

每个医生都有特定的时间表，但通常在 14:00 到 19:00 之间。主要要求是尽量让每位患者只来一次。

许多约束，包括与同一位医生的第二次访问，避免利益冲突（患者和医生彼此认识）等。医院/居民问题不适合，主要是因为限制。我们正在尝试使用优先方案的解决方案，然后尝试重新安排异常。

目前我们正在尝试定义算法，这是管理医学审查委员会的整个系统的一部分。该系统基于 Java，FE 为 dojo，BE 为 EJB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:11:08.480

这是一个可以关闭的问题，因为它过于本地化。对其他人不会有太大帮助。但这是一个有趣的问题，所以我想我会抛出一些想法。

*   您将需要首先为最复杂的案例找到匹配项。
*   寻找“最合适”的解决方案。如果您可以在另一天填满，请不要在空闲的一天抽出时间。
*   您将不得不找出一种方法来迭代匹配，以便尝试各种可能性。以某种方式撤回，做出*不同*的选择，然后继续而不陷入无限循环。
*   您可能会进行（比方说）80％的装配，然后换人。用 2 和 1 或其他东西交换 3 小时的约会。目标是让时间表具有最大的“灵活性”。
*   您将需要确定您的交换规则。是什么让日程安排更好？

这里有一堆 SO 问题供您阅读：

*   [工人调度算法](https://stackoverflow.com/questions/3775706/worker-scheduling-algorithm)
*   [最佳拟合调度算法](https://stackoverflow.com/questions/2746309/best-fit-scheduling-algorithm)
*   [是否有针对“制造商的时间表”进行优化的调度算法？](https://stackoverflow.com/questions/2677223/is-there-a-scheduling-algorithm-that-optimizes-for-makers-schedules)

希望有些帮助。

# php - mysql_fetch_row() 函数显示警告

> ID：10025136
> 
> 赞同：-3
> 
> 时间：2012-04-05T08:28:25.807
> 
> 标签：php, mysql

嗨，我到`mysql_fetch_row(): supplied argument is not a valid MySQL result` 这里是我的代码

```
$query="select DISTINCT categories_memories.memory_id from categories_memories INNER JOIN categories ON categories.id=categories_memories.category_id";

$res=mysql_query($query);

while($row=mysql_fetch_row($res))
{

} 
```

请指导我

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:52:27.547

SQL 查询提供空结果集，因此 mysql_fetch_row 生成警告以避免尝试以下代码

```
if($res){
   while($row=mysql_fetch_row($res))
   {
      do something
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:30:08.533

您的查询失败，因此`mysql_query()`返回 false，这不是有效的 MySQL 结果。

您需要查看 SQL 错误来修复它，这是一种简单（但可怕）的方法来获取错误以防万一：

```
$res = mysql_query($query) or die(mysql_error()); 
```

# php - 使用 Jquery 从客户端的图像中去除红眼

> ID：10025141
> 
> 赞同：8
> 
> 时间：2012-04-05T08:28:43.433
> 
> 标签：php, jquery, image, image-processing, codeigniter-2

我在客户端的浏览器上呈现了以下 html 代码：

```
<div id="Div">
  <img src="myImage.jpg" id="myImage"/>
</div> 
```

此特定图像由用户上传，然后显示在此处。我需要允许我的用户从此图像中消除任何红眼。我想在没有任何回发的情况下做到这一点（我在后面使用 CodeIgniter）。在 JQuery（或纯 Javascript）中是否有任何可用的库？如果不是，那可能是一个好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:01:34.803

去除红眼有很多事情要做

A. 眼睛检测

B. 红眼区域映射

C. 填充颜色

D. 绒毛

E. 不透明

**我的建议**

如果不是 Jquery 的 JOB 甚至 PHP 都无法有效消除红眼

**可能的解决方案**

1.  获取一个 Jquery 区域选择脚本，用户可以在其中选择他们自己的红眼（有了这个，您将能够获得区域（X1，Y1，X2，Y2，高度，宽度）示例[http://odyniec.net/projects/图像选择/](http://odyniec.net/projects/imgareaselect/)

2.  有一个简单的颜色选择器，他们可以选择替换颜色？？？默认可以是黑色

3.  发送请求以在 PHP 中`imagemagick`使用`exec`以去除红眼

4.  你不能输出你的图像...

**编辑 1**

我能够帮助你为这个 JOB 准备一个命令行工具

[http://www.fmwconcepts.com/imagemagick/index.php](http://www.fmwconcepts.com/imagemagick/index.php) http://www.fmwconcepts.com/imagemagick/redeye/index.php

基本概念

A. 创建输入图像的去饱和副本

B. 执行模糊填充以创建蒙版图像

C. 使用蒙版图像将原始图像与去饱和图像合成

D. 应用形态学关闭操作填充蒙版中的镜面反射孔，然后创建差异操作以创建仅孔的新蒙版

E. 应用新蒙版将之前的结果与原始图像的全亮度、零饱和度版本合成

样品流程

```
convert -quiet -regard-warnings "$infile" +repage "$tmpA1"
convert $tmpA1 -modulate $light,$sat,100 $tmpA2
proc=""
for ((i=0; i<np; i++)); do
proc="$proc matte ${pairArray[i]} floodfill"
done
convert $tmpA5 -fuzz $fuzz% -fill none -draw "$proc" \
-fill "rgba(255,255,255,1)" +opaque "rgba(0,0,0,0)" \
-fill "rgba(0,0,0,1)" -opaque "rgba(0,0,0,0)" \
-alpha off -negate $tmpA3
if [ "$dilate" = 0 ]; then
dilation=""
else
dilation="-morphology dilate disk:$dilate"
fi
convert $tmpA1 $tmpA2 $tmpA3 -compose over -composite $tmpA2
convert $tmpA3 \( +clone -morphology close disk:$rad $dilation \) \
-compose difference -composite -auto-level \
-negate -threshold 0 -negate $tmpA4
convert $tmpA2 \( $tmpA1 -modulate 100,0,100 \) $tmpA4 \
-compose over -composite $outfile 
```

我希望这有帮助

谢谢

:)

# oracle - 通过从其他 Oracle 11g 表中获取值来更新记录的插入触发器后创建

> ID：10025145
> 
> 赞同：0
> 
> 时间：2012-04-05T08:29:10.313
> 
> 标签：oracle, triggers, insert

我有两张桌子

```
Parent(id, name, occupation)

Child(id, name, gender,parent_id, parent_name, parent_occupation) 
```

现在要在孩子中插入值，我将运行 chi 查询

```
insert into Child(id,name,gender,parent_id) values(10,'XYZ','Male',15); 
```

所以现在我的要求是，当执行这个插入查询时，触发器将运行并从父表中获取 id 15（子记录的 parent_id）的名称和职业，并将其分别添加到字段 parent_name 和 parent_occupation 中新插入的行中。

我使用 Oracle 11g 作为我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:49:13.793

您想要类似的东西（尽管您需要添加代码来处理异常）：

```
CREATE OR REPLACE
TRIGGER ai_child_tg
AFTER INSERT ON child
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
BEGIN
   SELECT name,
          occupation
     INTO :NEW.parent_name,
          :NEW.parent_occupation
     FROM parent
    WHERE id = :NEW.parent_id;
EXCEPTION
   WHEN no_data_found
   THEN
        <handle_your_exception_>
END ai_child_tg; 
```

但是，如果您的`CHILD`表确实是您的表的关系子`PARENT`表，并且存在 FK 关系（通过`CHILD.PARENT_ID`列），那么将`PARENT_NAME`and`PARENT_OCCUPATION`列存储在`CHILD`表中在逻辑上是多余的。

我会询问为什么您在`CHILD`表中有这两列。

希望能帮助到你...

# c# - 使用 umbraco.NodeFactory GetNodeByXpath 从 .net Usercontrol Response.Redirect 到下一个同级

> ID：10025149
> 
> 赞同：0
> 
> 时间：2012-04-05T08:29:19.387
> 
> 标签：c#, asp.net, xpath, umbraco

我想将客户从一个页面重定向到 .NET 用户控件中的第一个前同级。这是我的代码，但出现异常“$currentPage/preceding-siblings::* [@isDoc][1] **has an invalid token**。”

```
Node sibling = Node.GetNodeByXpath(@"$currentPage/preceding-siblings::* [@isDoc][1]");
if (sibling != null)
    Response.Redirect(umbraco.library.NiceUrl(sibling.Id)); 
```

当然 currentPage 不是 .net usercontrol 中定义的参数，我想删除它，所以，我写了这个

```
Node sibling = Node.GetNodeByXpath(@"/preceding-siblings::* [@isDoc][1]");
if (sibling != null)
    Response.Redirect(umbraco.library.NiceUrl(sibling.Id)); 
```

我尝试了更多方法，没有任何效果。我无法弄清楚我的代码有什么问题，任何想法！有没有其他方法可以做到这一点。请注意，我必须从 .net 用户控件而不是 xslt 中执行此操作。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:27:55.427

我认为您可以这样做，我不知道它是否正确。

获取根节点的子节点并将其 id 保存在整数列表中。然后你可以从列表中找到当前节点的前一个节点。

# c# - 在 C# 中捕获屏幕但不是当前形式？

> ID：10025151
> 
> 赞同：1
> 
> 时间：2012-04-05T08:29:24.403
> 
> 标签：c#, screen-capture

我想捕获屏幕但没有当前表单，我尝试最小化 -> 捕获 -> 最大化，但如果存在，我正在寻找更好的解决方案。这是我的代码::

```
 int w = this.Width;
    int h = this.Height;
    Size sz = this.Size;
    Point loc = this.Location;

    this.WindowState = FormWindowState.Minimized;

    System.Threading.Thread.Sleep(500);

    using (Bitmap b = new Bitmap(w, h))
    {
        using (Graphics g = Graphics.FromImage(b))
        {
            g.CopyFromScreen(loc, new Point(0, 0), sz);
        }

        b.Save(Environment.CurrentDirectory + "\\slides\\screen.jpeg");

        this.BackgroundImage = System.Drawing.Image.FromFile(@"slides\screen.jpeg");
    }

    this.WindowState = FormWindowState.Maximized; 
```

我问是否有直接的方法将捕获的图像作为表单背景，而不保存它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:33:16.283

1.  将表格设置[`Opacity`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.opacity.aspx)为 0。

    这将使表单完全透明，因此不可见。

2.  使表单不可见。将该[`Visible`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)属性设置为“假”。

    这将隐藏表单而不改变其状态，尽管在 XP 上这不会使窗口立即消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:00:38.870

试试看，虽然我确实注意到你和我的都被表单边框稍微抵消了。

```
 int w = this.Width; 
    int h = this.Height; 
    Size sz = this.Size; 
    Point loc = this.Location; 
    Hide();
    System.Threading.Thread.Sleep(500);
    using (Image b = new Bitmap(w, h)) 
    { using (Graphics g = Graphics.FromImage(b)) 
    { 
        g.CopyFromScreen(loc, new Point(0, 0), sz); }

        Image x = new Bitmap(b);
        this.BackgroundImage = x;
    } 
    Show(); 
```

# sql - Postgresql 复制树表内的数据

> ID：10025154
> 
> 赞同：6
> 
> 时间：2012-04-05T08:29:43.613
> 
> 标签：sql, function, postgresql, tree

我有树结构的表，列是`id`, `category`,`parent_id`

![](../Images/5ce84cd8970dd76903a68770caa00eeb.png)

现在我需要将一个节点及其子节点复制到另一个节点，在复制时，类别必须相同，但具有新的 id 和 parent_id..

我的输入将是`node to copy`&`destination node to copy`

我已经解释了图像文件中的树结构..

我需要一个功能来做到这一点..，

**PostgreSQL 版本 9.1.2**

```
 Column   |  Type   |                    Modifiers                    
-----------+---------+-------------------------------------------------
 id        | integer | not null default nextval('t1_id_seq'::regclass)
 category  | text    | 
 parent_id | integer | 
Indexes:
    "t1_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "fk_t1_1" FOREIGN KEY (parent_id) REFERENCES t1(id)
Referenced by:
    TABLE "t1" CONSTRAINT "fk_t1_1" FOREIGN KEY (parent_id) REFERENCES t1(id) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:09:55.797

*（在 PostgreSQL 8.4.3 下测试）*

以下查询将新 ID 分配给节点 4 下的子树（参见`nextval`），然后找到**父**节点的相应新 ID （参见`LEFT JOIN`）。

```
WITH RECURSIVE CTE AS (
    SELECT *, nextval('t1_id_seq') new_id FROM t1 WHERE id = 4
    UNION ALL
    SELECT t1.*, nextval('t1_id_seq') new_id FROM CTE JOIN t1 ON CTE.id = t1.parent_id
)
SELECT C1.new_id, C1.category, C2.new_id new_parent_id
FROM CTE C1 LEFT JOIN CTE C2 ON C1.parent_id = C2.id 
```

结果（在您的测试数据上）：

```
new_id  category    new_parent_id
------  --------    -------------
9       C4          
10      C5          9
11      C6          9
12      C7          10 
```

一旦你有了它，就很容易将它插入到表中，你只需要小心地将子树根重新连接到适当的父级（在这种情况下为 8，请参阅`COALESCE(new_parent_id, 8)`）：

```
INSERT INTO t1
SELECT new_id, category, COALESCE(new_parent_id, 8) FROM (
    WITH RECURSIVE CTE AS (
        SELECT *, nextval('t1_id_seq') new_id FROM t1 WHERE id = 4
        UNION ALL
        SELECT t1.*, nextval('t1_id_seq') new_id FROM CTE JOIN t1 ON CTE.id = t1.parent_id
    )
    SELECT C1.new_id, C1.category, C2.new_id new_parent_id
    FROM CTE C1 LEFT JOIN CTE C2 ON C1.parent_id = C2.id
) Q1 
```

之后，该表包含以下数据：

```
new_id  category    new_parent_id
------  --------    -------------
1       C1
2       C2          1
3       C3          1
4       C4          2
5       C5          4
6       C6          4
7       C7          5
8       C8          3
9       C4          8
10      C5          9
11      C6          9
12      C7          10 
```

# javascript - ajax show 2 data request with onclick

> ID：10025156
> 
> 赞同：0
> 
> 时间：2012-04-05T08:29:49.033
> 
> 标签：javascript, ajax

你好，我还是 ajax 的新手，我想在不同的地方显示 2 个数据。

这里的代码

```
 <li onclick="showPost(this.value);" value="*digit*" >lala</li> 
```

javascript

```
<script>
if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        function showPost(hal)
        {
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("gallekanan").innerHTML=xmlhttp.responseText;  
                }
            }       
            xmlhttp.open("GET","../wp-content/themes/koolfort/example.php?pal="+hal,true);
            xmlhttp.send();
            showJudul(hal);
        }

        function showJudul(hal)
        {
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("eventjudul").innerHTML=xmlhttp.responseText;  
                }
            }       
            xmlhttp.open("GET","../wp-content/themes/koolfort/example1.php?pal="+hal,true);
            xmlhttp.send();
        }
</script> 
```

当我运行代码时，只有 showJudul 正在运行并且 showPost 被中止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:33:36.130

移动 showJudul(hal); 就在 document.getElementById("gallekanan").innerHTML=xmlhttp.responseText; 之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:49:07.917

尝试对每个功能进行单独控制，而不是在另一个功能中调用它们..即..将其作为

```
<li onclick="showPost(this.value); showJudul(this.value);" value="*digit*" >lala</li> 
```

和

```
<script>

        function showPost(hal)
        {
if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("gallekanan").innerHTML=xmlhttp.responseText;  
                }
            }       
            xmlhttp.open("GET","../wp-content/themes/koolfort/example.php?pal="+hal,true);
            xmlhttp.send();

        }

        function showJudul(hal)
        {
if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("eventjudul").innerHTML=xmlhttp.responseText;  
                }
            }       
            xmlhttp.open("GET","../wp-content/themes/koolfort/example1.php?pal="+hal,true);
            xmlhttp.send();
        }
</script> 
```

还可以尝试在尝试初始化 xmlhttp 的地方使用 try{}catch{} - 如果没有可用的此类对象，该函数可能会出错...

# grails - 使用 Grails SPRING/LDAP 插件自定义 LDAP 搜索

> ID：10025163
> 
> 赞同：1
> 
> 时间：2012-04-05T08:30:13.317
> 
> 标签：grails, spring-security, ldap

我在我的 Grails 应用程序中使用这两个插件进行 LDAP 身份验证：

```
plugins.spring-security-core=1.2.7.2
plugins.spring-security-ldap=1.0.5 
```

但是，是否可以**在身份验证过程之外**使用 ldap 插件进行自定义 ldap 搜索？喜欢在不同的树中搜索等？还是我必须使用不同的插件？

谢谢

# junit4 - 如何对 smartfoxserver 进行单元测试

> ID：10025168
> 
> 赞同：6
> 
> 时间：2012-04-05T08:30:27.400
> 
> 标签：junit4, smartfoxserver

任何人都可以提出单元测试 smartfoxserver 扩展的有效策略吗？我对最新的 2x 版本感兴趣。

# android - 如何在片段中导航？

> ID：10025171
> 
> 赞同：9
> 
> 时间：2012-04-05T08:30:30.723
> 
> 标签：android, android-fragments, actionbarsherlock

所以我正在使用 Tabs 并寻求这种导航：

tab1 --> inside 1 --> inside2

tab2 --> inside 3 --> inside 4

tab3 --> 内 5

在里面我的意思是它应该打开一个新的布局和类。

我的项目主类是这样的：

```
public class TabsFragmentActivity extends SherlockFragmentActivity implements
        TabHost.OnTabChangeListener {

    private TabHost mTabHost;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabInfo>();
    private TabInfo mLastTab = null;
    private static Context mContext;

    private class TabInfo {
        private String tag;
        private Class clss;
        private Bundle args;
        private Fragment fragment;

        TabInfo(String tag, Class clazz, Bundle args) {
            this.tag = tag;
            this.clss = clazz;
            this.args = args;
        }
    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        public TabFactory(Context context) {
            mContext = context;
        }

        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Step 1: Inflate layout
        setContentView(R.layout.tabs_fragment_activity);

        mContext = this;

        // Step 2: Setup TabHost
        initialiseTabHost(savedInstanceState);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); 
        }

        addNavaigationBar();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //Add Action item with title
            menu.add("some")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return super.onCreateOptionsMenu(menu);
    }

    public void addNavaigationBar() {
        // Create Action Bar sherlock
        ActionBar navigation_bar = getSupportActionBar();

        // Setting standart navigation bar view
        navigation_bar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);

        navigation_bar.setDisplayShowTitleEnabled(true);
        navigation_bar.setTitle("Test");

        // Override Action items to navigation bar. Calls onCreateOptionsMenu
        // invalidateOptionsMenu();
    }

    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                // selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Step 2: Setup TabHost
     */
    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);

        mTabHost.setup();

        TabInfo tabInfo = null;

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab1").setIndicator("Tab 1"),
                (tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab2").setIndicator("Tab 2"),
                (tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab3").setIndicator("Tab 3"),
                (tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));

        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        // Default to first tab
        this.onTabChanged("Tab1");
        //
        mTabHost.setOnTabChangedListener(this);
    }

    private static void addTab(TabsFragmentActivity activity, TabHost tabHost,
            TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));

        String tag = tabSpec.getTag();
        //getTabWidget()

        View view = prepareTabView(activity, R.id.tab_bar_icon);
        tabSpec.setIndicator(view);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);

        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {

            FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();

            ft.detach(tabInfo.fragment);

            ft.commit();

            activity.getSupportFragmentManager().executePendingTransactions();
        }
        tabHost.addTab(tabSpec);
    }

    private static View prepareTabView(Context context, int drawable){
        //inflate(R.layout.tab_indicator, android.R.id.tabs, false)
        View tabIndicator = LayoutInflater.from(context).inflate(R.layout.tab_indicator, null);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.tab_bar_icon);
        icon.setImageResource(R.drawable.ic_launcher);
        return tabIndicator;

    }

    public void onTabChanged(String tag) {
        TabInfo newTab = this.mapTabInfo.get(tag);

        if (mLastTab != newTab) {
            FragmentTransaction ft = this.getSupportFragmentManager()
                    .beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    }

} 
```

这将创建 3 个包含内容的选项卡。下面是 Tab1 片段类的外观（其他看起来相似）：

```
public class Tab1Fragment extends SherlockFragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }
        LinearLayout theLayout = (LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, container, false);
        // Register for the Button.OnClick event
        Button b = (Button)theLayout.findViewById(R.id.frag1_button);
        b.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

**//Here i want open a new window but don't change pressed tab and when press back it should go back at this window**
            }
        });
        return theLayout;
    }
} 
```

我在按钮上写下我想要的。

我无法在此片段中打开新片段或活动？

我应该如何在片段内导航？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T22:58:43.927

我喜欢让我的主机`Activity`处理所有的转换，所以我在我的片段中做的是创建一个`interface`来处理导航。例如，您可以将其添加`interface`到您的`Tab1Fragment`：

```
public interface Callback {
    public void onButtonBClicked();
} 
```

然后在你的`TabsFragmentActivity`，实施`Tab1Fragment.Callback`，这将需要你实施`onButtonBClicked()`。以下是如何实现此方法的示例：

```
@Override
public void onButtonBClicked() {

    Fragment anotherFragment = Fragment.instantiate(this, AnotherFragment.class.getName());
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.add(R.id.realtabcontent, anotherFragment);
    ft.addToBackStack(null);
    ft.commit();
} 
```

快完成了。接下来，您需要做的是在片段中获取对此回调的引用。这通常在该`onAttached()`方法中实现。例如：

```
@Override
public void onAttach(Activity activity) {

    super.onAttach(activity);
    try {
        mCallback = (Callback) activity;
    }
    catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement " + Callback.class.getName());
    }
} 
```

最后，在您的`OnClickListener`, 电话`mCallback.onButtonBClicked()`中。

# android - 如何使用jQuery mobile在Android中实现分页

> ID：10025172
> 
> 赞同：0
> 
> 时间：2012-04-05T08:30:34.143
> 
> 标签：android, jquery-mobile

我在网站上看到了一些关于 jQuery 向导插件的演示。但所有这些都是基于网络的，并且在浏览器中运行。

我想在我的 Android 应用程序中使用这个功能，有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:14:51.093

查看[PhoneGap](http://phonegap.com/)以将 Web 应用程序转换为 Android 原生应用程序。另请参阅我们的一些[演示](http://www.mobiledevelopersolutions.com/home/start/included-demo-apps)、[视频](http://www.mobiledevelopersolutions.com/home/download/demos-and-tutorials)和[教程](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials)。其中许多演示了使用 jQuery Mobile 构建的原生 Android 应用程序。

# android - 如何分析 Android 上的堆转储？

> ID：10025174
> 
> 赞同：2
> 
> 时间：2012-04-05T08:30:39.657
> 
> 标签：android, eclipse, heap-dump

我在 logcat 中收到很多“dalvikvm: GC_CONCURRENT ...”消息，谷歌搜索导致我下载了 Eclipse 内存分析器...我已经知道如何使用它，但我不知道如何去理解它。我以前从未处理过内存泄漏，所以请耐心等待。

“泄漏嫌疑人”包括“系统类加载器”加载的“android.content.res.Resources”、“android.graphics.Bitmap”和“org.apache.harmony.xnet.provider.jsse.TrustManagerImpl”。我真的不知道这意味着什么，也不知道这对我有什么帮助；我什至不在我正在尝试制作的应用程序中使用位图。

这应该如何帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:43:41.087

> “泄漏嫌疑人”包括“系统类加载器”加载的“android.content.res.Resources”、“android.graphics.Bitmap”和“org.apache.harmony.xnet.provider.jsse.TrustManagerImpl”。

这些对于每个 Android 应用程序都存在，代表 Android 基类分配的内存。

> 这应该如何帮助我？

您可以首先从您自己的类中查找对您自己对象的引用，然后跟踪它们的根源以找出是什么将这些对象保留在内存中。

您可能希望观看[来自 Google I|O 2011 的演示文稿](http://www.youtube.com/watch?v=_CruQY55HOk)，其中涵盖了此过程。

# r - 表格中的日期：20120405

> ID：10025177
> 
> 赞同：5
> 
> 时间：2012-04-05T08:30:49.847
> 
> 标签：r, date

为这个简单的问题道歉，但我找不到此类日期的帮助。

2012 年 4 月 5 日保存为数字“20120405”

如何将这些值的向量转换为可用日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:36:01.137

你只需要这个`as.Date`功能：

```
R> x = "20120405"
R> as.Date(x, "%Y%m%d")
[1] "2012-04-05" 
```

查看帮助文件：`?as.Date`，但本质上

*   `%Y`表示 2012 形式的年份，`%y`用于`12`.
*   `%m`是月份。
*   `%d`那天。

如果您的日期有分隔符，例如 2012-04-05，则使用类似：`%Y-%m-%d`. 或者，您可以使用：

```
R> strptime(x, "%Y%m%d")
[1] "2012-04-05" 
```

特别是，您可以将日期向量传递给这些函数，因此：

```
R> y = c("20120405", "20121212")
R> as.Date(y, "%Y%m%d")
[1] "2012-04-05" "2012-12-12" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T08:36:29.717

像这样，

```
(foo <- as.Date("20120405", "%Y%m%d"))
# "2012-04-05" 
```

也许你想把`format`月份打印出来

```
format(foo, "%Y %b %d")
# "2012 Apr 05" 
```

你可以看看[这个页面](http://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T08:36:31.427

`strptime`您可以将其转换为类`POSIXlt`，并`as.Date`可以`Date`使用格式将其转换为类`"%Y%m%d"`：

```
strptime( "20120405",format="%Y%m%d")
[1] "2012-04-05"

as.Date( "20120405",format="%Y%m%d")
[1] "2012-04-05" 
```

# 编辑：

如果您有 character`"20120405"`或 numeric ，还不是很清楚`20120405`。在后一种情况下，您必须先转换为字符`as.character(20120405)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T09:13:54.850

你也可以使用这个`lubridate`包：

```
library(lubridate)  
ymd("20120405") 
```

# python - python调用外部程序而不打开控制台（dos提示符）

> ID：10025179
> 
> 赞同：2
> 
> 时间：2012-04-05T08:30:51.450
> 
> 标签：python, windows, subprocess

> **可能重复：**
> [在没有控制台的情况下使用 Popen 在 pythonw 中运行进程](https://stackoverflow.com/questions/1813872/running-a-process-in-pythonw-with-popen-without-a-console)
> [如何从 Python (2.7) 中生成的进程中消除 Windows 控制台？](https://stackoverflow.com/questions/3390762/how-do-i-eliminate-windows-consoles-from-spawned-processes-in-python-2-7)

我正在使用 Python 2.7 并从 IDLE 中运行 python 脚本。

我正在执行的命令是执行快速任务的简单 exe。我遇到的问题是每次从 Python 中调用外部命令时，都会创建一个*控制台*，它会在我的屏幕上闪烁并获得焦点，从而阻止我在执行各种脚本时使用我的 PC。

我如何从 Python 中调用它们的示例如下：

```
result = call(["Commands\Set.exe", str(i), ARG2])
check_output(["Commands\Read.exe", ARG2]) 
```

在寻找解决方案时，我遇到了添加以下内容

```
shell=True 
```

执行以下命令

```
check_output(["Commands\Read.exe", ARG2], shell=True) 
```

但是，每次调用外部命令时，我仍然会出现*控制台*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:00:37.467

这里可能有两个问题。首先，如果您的 python 脚本具有 .pyw 扩展名，那么它们将与不使用控制台*的 pythonw 相关联。但是，您有 shell=True，它会生成一个控制台*。您需要运行程序并隐藏控制台：

```
import subprocess
proc = subprocess.Popen('hello.py',  creationflags=subprocess.SW_HIDE, shell=True)
proc.wait() 
```

*迂腐，它不是dos提示符，它是一个控制台窗口。DOS - 磁盘操作系统 - 是 IBM 大型机操作系统。MS-DOS 或 PC-DOS 命令行功能由 cmd.exe（Windows shell）镜像（具有许多额外功能），它是一个控制台程序，因此使用控制台窗口。这是您需要隐藏的控制台窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:08:33.783

您需要使用类[构造函数](http://docs.python.org/library/subprocess.html#popen-constructor)`startupinfo`的参数。`subprocess.Popen()`

```
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW
startupinfo.wShowWindow = subprocess.SW_HIDE
subprocess.Popen(command, startupinfo=startupinfo) 
```

如果您只想隐藏控制台窗口，则**不需要；** `shell=True`看到[这个](https://stackoverflow.com/a/12964900/95735)答案。

# c# - 当表单内的任何孩子更改（被绘制）时触发事件？

> ID：10025186
> 
> 赞同：0
> 
> 时间：2012-04-05T08:31:38.470
> 
> 标签：c#, winforms, compact-framework

我对 C#、Winforms 和 Compact Framework 还很陌生，但我仍然没有完全理解它的事件系统。

我正在寻找一种将单个事件处理程序添加到我的最顶层表单的方法，无论它们是什么类型，当任何孩子被（重新）绘制（或者甚至更好，在它们被绘制之后）时都会调用它。同样重要的是我不需要为孩子们​​自己添加任何代码。

在伪代码中它可能看起来像这样

```
TopMostForm {
    anyChildWasReDrawn() {
      dostuff();
    }
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:48:34.633

研究处理您孩子的 Paint 处理程序。例如，在最顶层的表单中，您将执行以下操作：

```
// each child will call the same method when any of them are redrawn
myChild1.Paint += myChildren_Paint;
myChild2.Paint += myChildren_Paint;
mySomeOtherChild.Paint += myChildren_Paint 
```

实际的处理程序本身看起来像这样：

```
void myChildren_Paint(object sender, PaintEventArgs e)
{
    dostuff();
} 
```

请注意，每个孩子都指向这个处理程序。

# yii - 全球注册 ClientScript 的最佳方式？

> ID：10025189
> 
> 赞同：4
> 
> 时间：2012-04-05T08:31:53.457
> 
> 标签：yii

我想在全球范围内注册用户脚本，以便在整个站点上可用。现在我在我的控制器中插入每个动作：

```
Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl . '/js/script.js'); 
```

但我真的明白这不是好办法......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:17:41.653

如果您期待在项目中使用主题，我会将一些 css 和脚本放在布局文件（**views/layouts/my-layout-file.php**）中。因为如果您更改主题，您将使用另一个 css，有时可能还会使用另一个脚本，所以您不想将它们混合在一起。

但是一些主要的 css 和 scipts，并没有改变跨主题，我会放入主**控制器**（protected/components/Controller.php）和所有其他控制器（/protected/controllers/）将扩展这个类控制器

```
class PageController extends Controller { 
```

因此，如果您的所有控制器都在父类上使用，您可以只编辑父类并添加类似这样的内容

```
public function beforeRender( $view ) {
    ...
    Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl . '/js/script.js');
    ...
    return true;
} 
```

现在您的所有操作都将使用相同的脚本。

**编辑**：@realtebo（在评论中）指出使用' [beforeRender](http://www.yiiframework.com/doc/api/1.1/CController#beforeRender-detail) '而不是'beforeAction'。

查看更多：[了解视图渲染流程](http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:53:48.613

您可以这样做：在具有路径 protected/components/controller.php 的基本控制器类中启动 init 函数

```
public function init()
{
  Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl . '/js/script.js'); 
  parent::init();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T15:57:07.593

我认为注册全局 js 和 css 文件的最佳方法是在某些 BaseController 的 beforeRender() 方法中注册它们（而不是在 beforeAction() 中 - 因为如果你渲染 json 或 xml 这可能会破坏你的结构）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:24:24.300

你可以这样做： 1\. 创建私有属性 $_assetsUrl; 2.然后在模块或控制器中

```
public function getAssetsUrl()
{
    if ($this->_assetsUrl===null)
    {
        $assetsPath = $this->basePath.DIRECTORY_SEPARATOR.'assets';
        $this->_assetsUrl = Yii::app()->assetManager->publish($assetsPath,false,-1,YII_DEBUG);
        if (Yii::app()->theme!==null && is_dir($assetsPath.DIRECTORY_SEPARATOR.Yii::app()->theme->name))
            $this->_assetsUrl .= DIRECTORY_SEPARATOR.Yii::app()->theme->name;
    }
    return $this->_assetsUrl;
} 
```

希望这很有用，另请参阅此链接[http://www.yiiframework.com/wiki/148/understanding-assets/](http://www.yiiframework.com/wiki/148/understanding-assets/)

# android - 单击选项卡未显示家庭活动

> ID：10025190
> 
> 赞同：2
> 
> 时间：2012-04-05T08:31:53.650
> 
> 标签：android, android-tabhost

我的示例应用程序中有 3 个选项卡和活动组。第一个选项卡包含搜索活动，即 Home/Root 活动，并在另一个活动中显示搜索结果，但在同一选项卡下，即 Tab1。当我在结果活动中按下后退按钮时，它将搜索活动。直到这里一切正常。现在我想通过按 tab1 而不是按返回按钮来进行搜索活动。怎样才能做到这一点？我尝试过这样的事情

```
public class TabSample extends TabActivity {

    public TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        this.tabHost = getTabHost();

        tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("OPT")
                .setContent(new Intent(this, TabGroup1Activity.class)));

        tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("EDIT")
                .setContent(new Intent(this, TabGroup2Activity.class)));

        tabHost.setCurrentTab(1);

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {

            public void onTabChanged(String arg0) {

                if (tabHost.getCurrentTabTag().equals("tab1")) {
                         //What should I do to display search activity here
                } else {
                    tabHost.setCurrentTab(1);
                }

            }
        });

        tabHost.setFocusable(true);
        tabHost.requestFocus();

    }
} 
```

任何人都可以帮我知道按下选项卡时如何调用搜索活动吗？如果部分将进入什么？因为如果我使用 tabHost.setCurrentTab(index)，它将显示结果活动而不是搜索活动。

注意：我按照此[链接](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)中给出的教程进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:08:58.753

您的 ActivityGroup 中有一个 ArrayList，因此请覆盖 ActivityGroup 中的 onPause() 方法并从 ArrayList 中删除所有 id，但第一个必须是您的 SearchActivity 除外。因此，当您转到其他选项卡然后返回 SearchActivity（或在 Tab1 上）时，将显示主页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:03:37.427

I think what you want to do is this: when the 'tab1' tag is selected, go back to TabGroup1Activity if (and only if) the current activity is not that activity (basically you want to simulate a 'back' press).

如果是这样，你想要的是这样的：

```
if (getCurrentActivity().getClass() != TabGroup1Activity.class) 
    getCurrentActivity().finish() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:54:34.500

我不是 100% 确定我完全理解你，但让我们看看 :)

在您的 onTabChanged 侦听器中，您可以打开哪个选项卡已被标记，然后在活动组中正常打开活动：

```
public void onTabChanged(String tabId) {
    if (tabId.contentEquals("tab1")) {
        Intent intent = new Intent(tabHost.getContext(), TabGroup1Activity.class);
        View view = StartGroup.group.getLocalActivityManager().startActivity("tab1", intent).getDecorView();
        StartGroup.group.setContentView(view);
    }
} 
```

我刚刚查看了我的代码，并认为这里还有更多需要解释的地方。问题是您没有像往常一样堆叠活动。相反，解决方法是制作内容堆栈并更改这些内容。所以我所做的是创建一个扩展 ButtonHandlerActivityGroup 的类 StartGroup：

```
public class StartGroup extends ButtonHandlerActivityGroup {
// Keep this in a static variable to make it accessible for all the nested  activities, lets them manipulate the view
public static StartGroup group;

// Need to keep track of the history if you want the back-button to work properly, 
// don't use this if your activities requires a lot of memory.  
private ArrayList<View> history;

@Override
protected void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);

    this.history = new ArrayList<View>();
    group = this;

    // Start the root activity within the group and get its view
    View view = getLocalActivityManager().startActivity("UserList", new Intent(this, UserList.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();

    replaceView(view);
}
public void back() {
    if (history.size() > 0) {
        // pop the last view
        history.remove(history.size()-1);
        setContentView(history.get(history.size()-1));
    } else {
        finish();
    }
}
} 
```

然后从 TabMaster 类或您所称的类中，您可以使用 StartGroup 类来更改活动组的内容视图。

这是我写的在 2.2 的设备上工作的东西，所以可能有一种更简单和更 androidish 的方式来完成它，但这几乎适用于所有设备:)

这是另一个使用类似方法的线程： [Launching activities within a tab in Android](https://stackoverflow.com/questions/1306689/launching-activities-within-a-tab-in-android)

让我知道我是否可以提供更多帮助。

# clojure - 来自 Clojure 的 Redis 初始化

> ID：10025192
> 
> 赞同：0
> 
> 时间：2012-04-05T08:32:00.697
> 
> 标签：clojure, redis, init

我正在尝试连接到远程 Redis 服务器，但在弄清楚如何设置它时遇到了极大的麻烦。我可以很好地远程登录到 Redis 服务器。从 Redis-cli 我可以很好地连接到 Redis 服务器。

但是当我在下面设置 Redis 时，我得到了：

ConnectException 连接被拒绝 java.net.PlainSocketImpl.socketConnect (PlainSocketImpl.java:-2)

```
(require clj-redis.client :as redis)
(def db (redis/init :url "redis://0.0.0.0:6379)) 
```

我也尝试过不带“redis://”部分的 url，得到了相同的结果。

有没有人知道正在发生的事情或要尝试的事情？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:58:18.753

我不具体了解 redis，但`0.0.0.0`url 中的 ip 地址看起来很奇怪。`0.0.0.0`是一个[不可路由的元地址，用于指定无效、未知或不适用的目标。](http://en.wikipedia.org/wiki/0.0.0.0)当打开（服务器）套接字进行监听时，您会这样做以表明套接字应该绑定到机器上的所有 IP 地址，但作为客户端它没有意义。

```
;If your redis server is running locally you should do 

(require clj-redis.client :as redis)
(def db (redis/init :url "redis://127.0.0.1:6379"))

; better? probably leave out the default port...

(require clj-redis.client :as redis)
(def db (redis/init :url "redis://localhost"))

;if it's remote change ``127.0.0.1`` to the correct address. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:22:18.227

我正在使用[加入](https://github.com/abedra/accession)

(def c (accession.core/connection-map {})) ;; {} - 默认设置

然后 (with-connection c "... redis-cmd")

# android - Android 混合音频输入

> ID：10025194
> 
> 赞同：1
> 
> 时间：2012-04-05T08:32:07.513
> 
> 标签：android, audio, media

我在 stackoverflow 和其他页面上阅读了很多关于此主题的问题，但没有找到真正的最新解决方案：

在 Android 应用程序中，我有两个音频文件（本地文件系统），它们以 mp3、ogg 或 wav 编码。我只想完全同步地播放它们，寻找可能性并控制每首曲目的音量。由于 Android 中众所周知的延迟问题，因此无法使用 MediaPlayer。所以我认为拥有两个 Audio-Player-Instances （无论库）总是会导致糟糕的延迟，所以它似乎不是解决方案。

所以在我看来，唯一的解决方案是将音频输入混合在一起，形成一个可以由一个播放器播放的混合输入。我阅读了很多关于 Androids AudioTrack 和缓冲区以及 OpenSL ES 实现的内容，但总是以通知结束：缓冲区仅支持 PCM 原始音频数据。好的，所以我必须自己解码 mp3/ogg？

我现在的问题是：是否有任何库可以帮助我 a) 使用简单的 API 完成我想要的操作，或者 b) 将 mp3/ogg 解码到内存以使用 AudioTrack 或 OpenSL 的数据？

如果它是本机的或 Java 不重要，它只需要工作。最低 API 级别为 15+（Android 4.0.3，创建此问题时的最新版本）。

# c++ - 尝试从列表中删除元素时出现“列表迭代器不兼容”

> ID：10025195
> 
> 赞同：3
> 
> 时间：2012-04-05T08:32:10.477
> 
> 标签：c++, list, iterator

```
list<employee> remove_employees(const string& name,
                                const string& lastname) 
{
    list<employee> listOfRemoved; 
    list<employee>::iterator it; 

    for(it=employees.begin(); it != employees.end(); )
    {
        if(it->get_name() == name && it->get_lastname() ==lastname) 
        {
            listOfRemoved.push_back(*it); 
            employees.erase(it); 
        }
        else
            it++;
    }

    return listOfRemoved; 
} 
```

我试图从类实例变量employees 中删除一些员工，然后返回一个新列表，其中只有已删除的员工。当我尝试运行该程序时，它会从标题中给出一个错误。我知道这与擦除和 push_back 有关，但我就是想不通。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T08:53:10.817

改变：

```
employees.erase(it); 
```

到：

```
it = employees.erase(it); 
```

否则在循环的下一次迭代`it`中将引用一个无效元素。[`list::erase()`](http://en.cppreference.com/w/cpp/container/list/erase)返回最后一个移除元素之后的迭代器。

[*我将标题解释为编译器错误，而不是运行时错误。*]

# iphone - 如何使应用程序键盘与 iPhone 中的 Safari 键盘相同？

> ID：10025196
> 
> 赞同：4
> 
> 时间：2012-04-05T08:32:11.297
> 
> 标签：iphone, safari, keypad

我的客户要求我制作数字键盘的外观，就像它在 Safari 中可见一样。在 safari 中，可以看到键盘，顶部还有三个按钮，它们是 prev next 和 done。我想实现同样的目标。请告诉我实现这一目标的方法。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:40:08.593

这很简单，你只需要一个 UIToolBar 在你的键盘上！

[UIToolBar 苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html)

而且，如何做到这一点：

```
UIToolbar *myToolBar = [[UIToolbar alloc] init];
myToolBar.barStyle = UIBarStyleDefault;
[myToolBar sizeToFit];

UIBarButtonItem *leftBarButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(buttonClicked:)];
NSArray *array = [NSArray arrayWithObject:leftBarButton];
[leftBarButton release];
[myToolBar setItems:array];

myTextField.inputAccessoryView = myToolBar;
[myToolBar release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:44:16.150

UITextField 有一个keyboardType 属性：

```
typedef enum {
    UIKeyboardTypeDefault,                // Default type for the current input method.
    UIKeyboardTypeASCIICapable,           // Displays a keyboard which can enter ASCII     characters, non-ASCII keyboards remain active
    UIKeyboardTypeNumbersAndPunctuation,  // Numbers and assorted punctuation.
    UIKeyboardTypeURL,                    // A type optimized for URL entry (shows . /     .com prominently).
    UIKeyboardTypeNumberPad,              // A number pad (0-9). Suitable for PIN entry.
    UIKeyboardTypePhonePad,               // A phone pad (1-9, *, 0, #, with letters under the numbers).
    UIKeyboardTypeNamePhonePad,           // A type optimized for entering a person's name or phone number.
    UIKeyboardTypeEmailAddress,           // A type optimized for multiple email address entry (shows space @ . prominently).

    UIKeyboardTypeAlphabet = UIKeyboardTypeASCIICapable, // Deprecated

} UIKeyboardType; 
```

您的代码应阅读

```
if(user is prompted for numeric input only)
    [textField setKeyboardType:UIKeyboardTypeNumberPad];

if(user is prompted for alphanumeric input)
    [textField setKeyboardType:UIKeyboardTypeDefault]; 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html)

这可能有帮助..!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:54:58.430

`UITextField`有一个属性 ( `keyboardType`) 可用于设置您需要的键盘。

```
aTextField.keyboardType = UIKeyboardTypeDefault; 
```

键盘类型可以是以下之一：

```
UIKeyboardTypeDefault              
UIKeyboardTypeASCIICapable         
UIKeyboardTypeNumbersAndPunctuation
UIKeyboardTypeURL                   
UIKeyboardTypeNumberPad            
UIKeyboardTypePhonePad               
UIKeyboardTypeNamePhonePad          
UIKeyboardTypeEmailAddress 
```

你可以在这个地址找到截图：http: [//gprince.yolasite.com/index/uikeyboardtype](http://gprince.yolasite.com/index/uikeyboardtype)

无论如何，如果您不将键盘显示在`UIWebView`. 一种解决方法是在键盘顶部添加一个包含所需栏的 UIView，但您的应用可能会被拒绝。网上有很多关于这个问题的讨论。

我个人的解决方案是在 NIB 视图中添加一个 UIView 并在我的键盘出现的同时显示它，而不是直接将它添加到键盘上。

# c - 主要用于编写哪个 NoSQL 数据库

> ID：10025197
> 
> 赞同：1
> 
> 时间：2012-04-05T08:32:15.087
> 
> 标签：c, mongodb, cassandra, high-volume, nosql

我正在开发一个将生成大量数据并将其存储到磁盘的系统。该公司以前开发的系统使用普通文件来存储其数据，但由于多种原因，它变得非常难以管理。

我相信 NoSQL 数据库对我们来说是很好的解决方案。我们要存储的通常是带有一些元数据注释的文档（通常大约 100K，但有时可能更大或更小）。查询性能不是重中之重。优先级是以 I/O 变得尽可能少的方式编写。数据生成的速率约为 1Gbps，但我们可能会在未来达到 10Gbps（甚至更高）。

我的另一个要求是（最好是有据可查的）C API 的可用性。我目前正在测试 MongoDB。这是一个不错的选择吗？如果没有，我可以使用其他什么数据库系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:05:02.403

> 数据生成的速率大约是1Gbps，...我目前正在测试MongoDB。这是一个不错的选择吗？

好的，澄清一下，您的数据速率约为每 10 秒 1 gigaBYTE。所以你每 20 分钟左右填充一个 1TB 的硬盘？

MongoDB 具有相当稳定的写入速率，但它非常适合用于 RAM 与数据比率相当低的情况。您希望*至少*在内存中保留主索引以及一些数据。

根据我的经验，每 5-10GB 的数据需要大约 1GB 的 RAM。超过这个数字，读取性能会急剧下降。一旦你为 100GB 的数据使用 1GB 的 RAM，即使添加新数据也会很慢，因为索引不再适合 RAM。

这里的关键是：

**您计划运行哪些查询以及 MongoDB 如何使这些查询的运行更容易？**

您的数据很快就会占用足够的空间，基本上每个查询都会进入磁盘。除非您有一个非常具体的索引和分片策略，否则您最终只会进行磁盘扫描。

此外，MongoDB 不支持压缩。因此，您将使用大量磁盘空间。

> 如果没有，我可以使用其他什么数据库系统？

您是否考虑过压缩的平面文件？或者可能是像 Hadoop 这样的大数据 M​​ap/Reduce 系统（*我知道 Hadoop 是用 Java 编写的*）

如果 C 是关键要求，也许你想看看[东京/京都内阁](http://fallabs.com/tokyocabinet/)？

* * *

**编辑：更多细节**

MongoDB*不*支持全文搜索。您将不得不寻找其他工具（Sphinx/Solr）来解决这些问题。

> 大索引违背了使用索引的目的。

根据您的数字，您正在编写 10M 文档/20 分钟或大约 30M/小时。每个文档需要大约 16+ 字节的索引条目。12 字节用于 ObjectID + 4 字节用于指向 2GB 文件的指针 + 1 字节用于指向文件的指针 + 一些填充量。

假设每个索引条目需要大约 20 个字节，那么您的索引以 600MB/小时或 14.4GB/天的速度增长。这只是默认`_id`索引。

4 天后，您的主索引将不再适合 RAM，并且您的性能将开始急剧下降。（*这在 MongoDB 中有详细记录*）

因此，弄清楚要运行哪些查询将非常重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:46:26.610

看看[卡桑德拉](http://cassandra.apache.org/)。它执行写入比读取快得多。可能，这就是你要找的。

# javascript - chrome扩展：我正在做一个contextMenu。当我点击contextmenu时，如何将选择发送到background.html？

> ID：10025199
> 
> 赞同：0
> 
> 时间：2012-04-05T08:32:18.397
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想使用下面的脚本来获取选择的 HTML

```
 var range=window.getSelection().getRangeAt(0);
    var container = document.createElement('div');
    container.appendChild(range.cloneContents());
    return container.innerHTML; 
```

如果使用消息传递，我应该如何在 contentscript.js 和 backgroud.html 中编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:28:06.457

背景页面：

```
// Request handler
function onRequest(request, sender, callback) {
    doSomethingWith(request.data);    
}

// Request handler registration
chrome.extension.onRequest.addListener(onRequest); 
```

内容脚本（假设所选内容的 HTML 已存储在*selectedHTML*变量中）：

```
// Sends data to the background page
chrome.extension.sendRequest({data: selectedHTML}); 
```

# extjs4 - Ext.application 和 Ext.direct：数据不显示

> ID：10025205
> 
> 赞同：1
> 
> 时间：2012-04-05T08:32:49.733
> 
> 标签：extjs4, extjs-mvc

我是 ExtJS 的新手，并且使用 Ext.application 和 Ext.direct 编写了一个示例应用程序。我配置了我的模型，如下所示

```
Ext.define('AM.model.UserModel', {
    extend: 'Ext.data.Model',
    alias : 'widget.userModel',
    fields: ['SlNo','name']
    proxy: {
        type: 'direct',
        directfn: HelloWorld.getGridDetails
    }
}); 
```

我正在使用网格面板，如下所示

```
Ext.define('AM.view.user.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.userlist',    
    title : 'Users',        
    initComponent: function() {
        this.store = {
            model:'AM.model.UserModel',
            autoload:true,
        };
        this.columns = [
                        {
                            header: 'SlNo', 
                            dataIndex: 'SlNo', 
                            width:100,
                            disabled:false 
                        },
                        {
                            header: 'Name',  
                            dataIndex: 'name', 
                            width:150
                        }
        ];
       this.callParent(arguments);
    }
}); 
```

最后我的 index.js 看起来像这样

```
 Ext.require('Ext.direct.*', function() {
    Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);
  });   
    Ext.require([ 'AM.view.user.List','AM.model.UserModel']);
    Ext.application({
        name: 'AM',
        appFolder:'myApp',
        launch: function() {
            Ext.Direct.addProvider(Ext.app.DirectAPI);                                 
            Ext.create('Ext.container.Viewport', {
                items: {
                    xtype: 'userlist',
                    width: 552
                },
                renderTo: Ext.getBody()
            });
        }
    }); 
```

我打电话时收到的数据`HelloWorld.getGridDetails`如下`index.js`所示

```
 action: "HelloWorld",
    method: "getGridDetails",
    result: [
     {slNo:2, name:"patton"},
     {slNo:3, name:"Omar N Bradely"},
     {slNo:1, name:"Sam Manekshaw"}
   ],   
    tid: 1,
    type: "rpc" 
```

问题是我无法将数据加载到网格中，即`HelloWorld.getGridDetails`显示网格时根本不会调用直接方法。我错过了什么吗？你们中的任何人都可以帮忙吗？

谢谢库马尔
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:56:53.357

我实际上想出了解决方案。虽然现在没有意义，但迟到总比没有好。我需要在 index.html 中修改以下内容

```
 <script type="text/javascript" src="Api.js"></script>
 **<script type="text/javascript">Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);</script>**
 <script type="text/javascript" src="index.js"></script> 
```

添加后

```
<script type="text/javascript">Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);</script> 
```

在 index.js 之前。它开始工作了。

# java - 线程意外停止

> ID：10025217
> 
> 赞同：0
> 
> 时间：2012-04-05T08:33:23.463
> 
> 标签：java, multithreading

我有一个正在运行并重复执行任务的线程。我已经实现了一个计数器来向我展示线程执行的任务的迭代。我时不时地看到计数器卡在某个地方并且不再增加。我没有收到任何错误或异常。应用程序运行，但看起来线程在没有我询问的情况下就停止了。

我将添加一些代码来显示线程执行：

注意 int "c" - 那是迭代的计数器。

```
public void check() {
    Thread check = new Thread() {
        public void run() {

            for (;;) {
                EventQueue.invokeLater(new Runnable() {
                    public void run() {
                        // Update GUI here on EventQueue.

                        try {
                            Task.readTasks();
                        } catch (InvalidFormatException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        if (NoteInfo == null || NoteInfo == "") {
                            btnViewNote.setEnabled(false);
                        } else {

                            btnViewNote.setEnabled(true);
                        }

                        textField.setText(Task.printNextTask);
                        c++;
                        lblCycle.setText("Cycle: " + c);

                    }
                });

                try {
                    Thread.sleep(5000);
                    // Task.initializeIt();
                } catch (InterruptedException ie) {
                    break;
                }
                if (killcheck)
                    break;

            }
        }
    };
    check.start();
}

public static void stopChecking() {
    killcheck = true;
    progressBar.setValue(0);
    textArea.setText("");
    textField.setText("");
    c = 0;
    lblCycle.setText("Cycle: " + c);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:41:36.323

检查线程被另一个线程中断。在 catch 块中打印堆栈跟踪并验证它。

```
 try {     
       Thread.sleep(5000);
       // Task.initializeIt();
  } catch (InterruptedException ie) {    
          //   break;          // just ignore it
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:49:09.253

我没有看到 or 的定义，`killcheck`但`c`有可能这些没有被标记为`volatile`?

如果多个线程正在读取和写入共享值，那么必须有某种同步，否则它们可能会处理陈旧的值。您可以使用原子类之一，例如`AtomicBoolean`or `AtomicInteger`，使用`synchronized`关键字，或将变量标记为`volatile`。这三个都将允许主线程和内部线程看到彼此对共享字段的更改。

```
volatile int c;
volatile boolean killcheck; 
```

对于后代，这是您使用原子类的方式：

```
 final AtomicInteger c = new AtomicInteger();
 final AtomicBoolean killcheck = new AtomicBoolean();
 ...
         c.incrementAndGet();
 ...
         if (killcheck)
             break;
 ...
         killcheck.set(true);
 ...
         c.set(0); 
```

# xml - xpath 按索引获取元素

> ID：10025221
> 
> 赞同：22
> 
> 时间：2012-04-05T08:33:32.407
> 
> 标签：xml, xslt, xpath

我有下面的 xpath 表达式

```
//div[@class="post-content"]//img 
```

它在 html 页面上运行，扫描图像。上面的查询返回了很多图像，但我只想要列表中的第二个。

我试过这些没有运气：

```
//div[@class="post-content"]//img[1] and
//div[@class="post-content"]//img[position()=1] 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-05T08:37:05.387

在 XPath 中索引从 1 位置开始，因此

```
//div[@class="post-content"]//img[2] 
```

如果您必须`img`在`div[@class="post-content"]`. 如果您必须`img`从 中的所有图像中仅选择第二个`div[@class="post-content"]`，请使用：

```
(//div[@class="post-content"]//img)[2] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-05T08:37:16.393

XPath 中的索引是从 1 开始的，而不是从 0 开始的。尝试

```
(//div[@class="post-content"]//img)[position()=2] 
```

# android - 如何访问 Android 手机 DRAM 和其他内存而不是 sd

> ID：10025226
> 
> 赞同：0
> 
> 时间：2012-04-05T08:33:50.657
> 
> 标签：android, video, android-ndk, android-sdcard, android-video-player

我的 Android 视频应用程序获取一个媒体文件，提取一个帧，对其进行解码，然后以某个指定的速率播放。对于媒体文件存储，我有两种选择：

1-MicroSD 卡。但我想这会很慢。处理器将从远处获取帧，并且 Micro SD 也较慢（与芯片上的手机和其他存储器相比，例如 DRAM）。因此，许多时钟周期将被浪费在获取帧上，从而导致视频播放效果不佳。

2-将文件保存在靠近处理器的其他快速内存中（与 SD 相比）。这应该更快，我期待更好的回放。

问题：

a) 我的理解正确吗？

b）如果是，我如何将我的媒体文件放入其他内存而不是 SD，以及如何获取这个新位置的路径，因为我需要将此路径传递给我的应用程序，该应用程序解码帧并在屏幕上播放.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:25:25.120

我认为 SD 卡会比内部存储器大，因此您应该将媒体保留在 SD 卡上，以免空间不足。如果 SD 卡带宽足以播放您的媒体文件，那么您可以通过缓冲来隐藏延迟（尽可能多地读取内存中的文件）。你测试过吗？您是否尝试过播放媒体文件以查看 SD 卡的性能？

关于访问内存：如果您已将应用程序安装在内存中，则会有一个特殊的目录供它使用，例如/data/data/com.my.app。您的应用程序将有权访问它并可以在那里创建文件。

# magento - 如何在 magento 的 ajax 页面上获取文件数据？

> ID：10025228
> 
> 赞同：0
> 
> 时间：2012-04-05T08:33:59.507
> 
> 标签：magento

我在 magento 中制作了一个自定义模块。我在其中使用 ajax（prototype.js）。我可以在 ajax 页面上找到 post 变量。但我无法在 ajax 页面上找到文件数组。我为此使用以下代码。请让我知道我错在哪里？

```
//Ajax code on phtml page
new Ajax.Request(
    reloadurl,
    {
        method: 'post',
        parameters: $('use-credit-Form').serialize(),
        onComplete: function(data)
        {
             alert(data.responseText);
        }
    });
//Php code on ajaxpage
public function ajaxAction()
{
    $fileData   =   $_FILES;
    echo '<pre>';
    print_r($fileData);die;
} 
```

它总是打印空白。但是当我添加这一行“VarienForm.prototype.submit.bind(usecreditForm)();” 我可以得到文件数组的值。但现在退后页面开始刷新。

请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:09:20.310

尝试这个：

```
Event.observe('use-credit-Form', 'submit', function (event) {
    $('use-credit-Form').request({
        onFailure: function () {
            alert('fail.');
        },
        onSuccess: function (data) {
            alert(data.responseText);
        }
    });
    Event.stop(event); // stop the form from submitting
}); 
```

信用：[使用原型通过 Ajax 提交表单并更新结果 div](https://stackoverflow.com/questions/443276/submit-a-form-via-ajax-using-prototype-and-update-a-result-div)

# c# - 写入文件（？隔离存储 wp7）

> ID：10025235
> 
> 赞同：-2
> 
> 时间：2012-04-05T08:34:46.193
> 
> 标签：c#, windows-phone-7

此代码用于将文本框的值写入文件，但即使我使用现有文件它也不会创建文件它仍然是空的！

```
 private void button1_Click(object sender, RoutedEventArgs e)
 {
     string url =infooo.ur + txtb1.Text +  "/" + passtxx.Password + "/1/570322308ce1121cba1b93f5acc9ebd4733ef2bca90ef942a2cfa224f0aa08dc/1";
     client.DownloadStringAsync(new Uri(url));

     IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication();

     IsolatedStorageFileStream stream = iso.CreateFile("T11.txt");

     StreamWriter streamWrite = new StreamWriter(stream);

     streamWrite.Write(txtb1.Text);

     streamWrite.Close();

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:31:33.647

为确保您的文件未保存，请尝试列出您的隔离存储： [http ://wp7explorer.codeplex.com/](http://wp7explorer.codeplex.com/)

# c++ - Visual Studio 2010 速成版中的“无法打开包含文件：'ofstream'”错误？

> ID：10025236
> 
> 赞同：1
> 
> 时间：2012-04-05T08:34:46.253
> 
> 标签：c++, visual-studio, visual-studio-2010, ofstream

我对 C++ 还很陌生，当我尝试编译我的项目时，Visual Studio 2010 Express 遇到了一个致命错误，说“无法打开包含文件：'ofstream'：没有这样的文件或目录”我的一个实现的源代码文件（我遇到错误的地方）如下：

```
#include "Character.h"
#include <iostream>
#include <ofstream>

using namespace std;

ofstream characterSave;

// Sets the character's name to what the user inputted
void Character::setName(string name)
{
    // Set characterName to equal what user inputted
    characterName = name;
}

// Output the character's name when called
string Character::getName()
{
    // Return characterName
    return characterName;
}

// Save the user's data to save.dat
void Character::saveToFile()
{
    // Creates new save file
    characterSave.open("character.dat");

    // Writes character's name to first line of save file
    characterSave << characterName << endl;

    // Closes save file
    characterSave.close();
} 
```

我在网上四处搜索，我找不到其他人有这个问题。会不会是我本地的 Visual Studio Express 副本？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:35:56.357

你需要

```
#include <fstream> 
```

这`ofstream`就是声明的地方。

# rest - 仅针对应用程序中的特定捆绑调整捆绑配置

> ID：10025238
> 
> 赞同：2
> 
> 时间：2012-04-05T08:34:48.440
> 
> 标签：rest, symfony, configuration, bundle

我有使用 FOSRestBundle 的 Symfony 应用程序，并在 main config.yml 中配置了一些设置：

```
fos_rest: 
    service: 
        serializer: my.serializer 
        view_handler: my.viewHandler 
    view: 
        view_response_listener: false 
        failed_validation: 200 
```

现在我正在构建新的公共 API 包，我遇到了以下问题。当我从浏览器测试我的 API 时，我得到

```
Unable to find template "". 
500 Internal Server Error - InvalidArgumentException 
```

它适用于卷曲。我猜它失败了，因为浏览器要求 html 内容类型，我不需要任何模板，我只想像这样返回 xml/json：

```
return $this->get('fos_rest.view_handler')->handle(View::create(array('x' => 'y'))); 
```

我用更新的配置来解决这个问题：

```
fos_rest: 
    service: 
        serializer: my.serializer 
        view_handler: my.viewHandler 
    view: 
        view_response_listener: false 
        failed_validation: 200 
    format_listener: 
       default_priorities: [xml, json] 
       fallback_format: xml 
```

但后来我破坏了现有应用程序中的一些操作（其他使用 FOSRestBundle 的捆绑包）。有没有办法只为我的公共 APi 包调整 FOSRestBundle（或任何其他包）配置？我试过扩展：

```
$loader = new YmlFileLoader($container, new FileLocator(__DIR__.'/../ 
Resources/config')); 
        $loader->load('services.yml'); 
```

services.yml 是：

```
fos_rest: 
  service: 
    view_handler: my.public.api.view_handler 
  format_listener: 
    default_priorities: [xml, json] 
    fallback_format: xml 
```

但我得到了：

```
InvalidArgumentException: There is no extension able to load the 
configuration for "fos_rest". 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-08T18:26:59.287

当您通过 composer 安装包时，您需要手动将包添加到 app/AppKernel.php：

```
public function registerBundles()
{
    $bundles = array(
        // ...
        new FOS\RestBundle\FOSRestBundle(),
        new JMS\SerializerBundle\JMSSerializerBundle(),
        // ...
    );
} 
```

[这里有更多信息。](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/1-setting_up_the_bundle.md#c-enable-the-bundle)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-15T19:25:11.150

当我们在安装 rest api 包后使用 symfony4 + rest api 检查捆绑文件时，如果 fosrest bunfle 没有退出，则添加 FOS\RestBundle\FOSRestBundle::class => ['all' => true]

# java - Java 中的 $Include #include 等价物？

> ID：10025239
> 
> 赞同：1
> 
> 时间：2012-04-05T08:34:56.477
> 
> 标签：java

我有一个非常大且臃肿的类，我想将它拆分为单独的文件，但它应该对用户完全透明，并且与使用该类的现有项目兼容。

特别是我有自己的`ImageMatrix`类，它定义了大量的一元函数、大量带有标量的二进制函数、大量带有另一个图像的二进制函数等。为了保持类的清洁和可维护性，我希望将每个类运算符在一个单独的文件中。

有没有办法将这些方法剪切/粘贴到文件中并将它们包含在源代码中？

所以我希望我仍然可以这样做，但这些方法实际上驻留在不同的文件中：

```
 ImageMatrix img = new ImageMatrix(800, 600, 3);
    img.clear(0.5f, 0.0f, 0,0f);
    img.addSelf(anotherImg);
    img.normalize();
    img.abs();
    img.addSelf(0.5); 
```

每个方法大约有 15-30 行代码，因为这些实现对性能进行了极大的优化，而使用 Bufferedimage 甚至是普通的 int[] 都无法实现类似的效果。有很多代码重复，这是将类似方法组合在一起的主要原因。如果我添加一个函数或者我改变了全局行为（比如错误检查），我可以很容易地保持事情的连贯性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:36:48.603

不幸的是，不能将 Java 类定义拆分为多个文件。

尝试重构您的代码，以便不需要庞大的类定义。这通常意味着通过 getter 和 setter 方法公开一些状态，并编写使用这些方法向主类添加功能的支持类。

在您的情况下，您可能会考虑添加支持类，例如，如果您喜欢非常小的类`ImageFilters`，甚至可以考虑添加更窄的类。`ImageNormalizer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:39:49.310

您不能跨文件拆分 java 类。您可以做的是，如果您的每个方法都是自包含的，您可以使用静态方法创建类。所以在某种程度上，你需要做的就是剪切和粘贴代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:40:56.487

好吧，您可以创建一个更通用的类并在其中放置更多通用方法，然后`ImageMatrix`扩展该类。此外，如果您有很多矩阵操作函数，您最终可能会出现大量代码重复，即在不同的方法中重复相同的代码，而不是将公共代码移动到辅助方法中并从不同的地方调用它等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T08:47:11.647

您还可以使用委托方法。这意味着您的方法的定义仍在 中`ImageMatrix`，但它们在另一个类中实现。根据您方法的复杂性，这可能会减少`ImageMatrix`.

```
class ImageMatrix {

    MatrixHelperOne helperOne = new MatrixHelperOne();

    ...

    public void complexMethod1(Arg arg) {
        helperOne.complexMethod1(arg);
    }

    ...
} 
```

# java - WBXML 解析器/解码器

> ID：10025240
> 
> 赞同：0
> 
> 时间：2012-04-05T08:35:00.453
> 
> 标签：java, android, wbxml

正如标题所示，我正在寻找遵循 1.3 版的 Java(+Android) 的 WBXML 解析器/解码器。如果有必要，我什至可以考虑调用本机代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:14:24.833

我确实记得前段时间我使用 Java 库 kxml 或 kxml2 来解析 WBXML 文件。

# php - 带有 OOP 的 libxml 错误处理程序

> ID：10025247
> 
> 赞同：3
> 
> 时间：2012-04-05T08:35:39.897
> 
> 标签：php, oop, error-handling, libxml2

我需要捕获 libxml 错误。但我想为此使用我的课程。我知道`libxml_get_errors`和其他功能。但是我需要类似的东西，`libxml_set_erroc_class("myclass")`并且在任何情况下都会出现错误会打电话给我的班级。我不希望在每种情况下使用后`$dom->load(...)`创建一些结构，例如`foreach(libxml_get_errors as $error) {....}`. 你能帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T09:25:34.563

`libxml errors`由于已完成自动验证，因此主要在读取或写入`xml`文档时生成。

所以这是你应该集中注意力的地方，你不需要覆盖`set_error_handler`.. 这是一个概念证明

使用内部错误

```
libxml_use_internal_errors ( true ); 
```

示例 XML

```
$xmlstr = <<< XML
<?xml version='1.0' standalone='yes'?>
<movies>
 <movie>
  <titles>PHP: Behind the Parser</title>
 </movie>
</movies>
XML;

echo "<pre>" ; 
```

我想这是您想要实现的示例

```
try {
    $loader = new XmlLoader ( $xmlstr );
} catch ( XmlException $e ) {
    echo $e->getMessage();
} 
```

XMLLoader 类

```
class XmlLoader {
    private $xml;
    private $doc;
    function __construct($xmlstr) {
        $doc = simplexml_load_string ( $xmlstr );

        if (! $doc) {
            throw new XmlException ( libxml_get_errors () );
        }
    }
} 
```

XmlException 类

```
class XmlException extends Exception {

    private $errorMessage = "";
    function __construct(Array $errors) {

        $x = 0;
        foreach ( $errors as $error ) {
            if ($error instanceof LibXMLError) {
                $this->parseError ( $error );
                $x ++;
            }
        }
        if ($x > 0) {
            parent::__construct ( $this->errorMessage );
        } else {
            parent::__construct ( "Unknown Error XmlException" );
        }
    }

    function parseError(LibXMLError $error) {
        switch ($error->level) {
            case LIBXML_ERR_WARNING :
                $this->errorMessage .= "Warning $error->code: ";
                break;
            case LIBXML_ERR_ERROR :
                $this->errorMessage .= "Error $error->code: ";
                break;
            case LIBXML_ERR_FATAL :
                $this->errorMessage .= "Fatal Error $error->code: ";
                break;
        }

        $this->errorMessage .= trim ( $error->message ) . "\n  Line: $error->line" . "\n  Column: $error->column";

        if ($error->file) {
            $this->errorMessage .= "\n  File: $error->file";
        }
    }

} 
```

样本输出

```
Fatal Error 76: Opening and ending tag mismatch: titles line 4 and title
  Line: 4
  Column: 46 
```

我希望这有帮助

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:50:10.500

**编辑**（混淆异常与错误）：

1.  使用[set_exception_handler](http://ru.php.net/manual/en/function.set-exception-handler.php)捕获全局异常。
2.  让您的代码在`$dom->load()`. 因为`libxml`它本身似乎不会引发异常，所以您的另一个选择是围绕它创建一个包装器，在您的代码中使用包装器并让它检查`libxml`错误并在必要的情况下抛出它们。
3.  处理“myclass”中的异常。

请注意，这`set_exception_handler`将捕获您的**所有**异常。

这是您可以执行的操作的示例：

```
//inheritance example (composition, though, would be better)
class MyDOMWrapper extends DOMDocument{
    public function load($filename, $options = 0){
        $bool = parent::load($filename, $options);
        if (!$bool){
            throw new MyDOMException('Shit happens. Feeling lucky.', 777);
        }
    }
}
class MyDOMException extends DOMException{
    public $libxml;

    public function __construct($message, $code){
        parent::__construct($message, $code);
        $this->libxml = libxml_get_errors();
    }
}
class MyDOMExceptionHandler{
    public static function handle($e){
        //handle exception globally
    }
}
libxml_use_internal_errors(true);
set_exception_handler(array('MyDOMErrorHandler', 'handle'));

//global exception handler
$myDom = new MyDOMWrapper();
$myDom->load('main.xml');

//when special handling is necessary
try {
    $myDom = new MyDOMWrapper();
    $myDom->load('main.xml');
} catch (MyDOMException $e) {   
    //handle or
    throw $e; //rethrow
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:53:42.183

没有工具可以直接执行此操作。您的选择是：

1.  扩展使用 libxml 的 PHP 类并将您的自定义错误处理逻辑包装在股票实现周围（不是那么好），或者
2.  编写自己的类来聚合该 PHP 类的实例并围绕它创建自己的公共接口（更好，因为您可以控制公共接口，并且如果将来扩展 PHP 类，您不会冒问题的风险），或者
3.  在解析期间替换全局错误处理程序并在之后恢复它（没有那么强大，如果您的代码调用其他代码可能会出现问题，但更容易做到）

解决方案 1 和 2 的优点是它们无论如何都不会修改应用程序中任何其他代码的行为。

# c++ - 任何人都有确定麻将游戏是否获胜的算法？

> ID：10025248
> 
> 赞同：0
> 
> 时间：2012-04-05T08:35:42.213
> 
> 标签：c++, algorithm, mahjong

我正在阅读一些中国古代游戏麻将的介绍（有点像扑克，但要复杂得多）。我花了几天时间编写一个程序来确定给定的手牌是否是赢牌。有谁知道或知道我在哪里可以找到免费代码？我只需要确定输赢的部分，我不是在寻找整个项目。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:40:13.420

有一个[**很酷**](http://code.google.com/p/py-mcr/)的 Python 库，可用于在特定情况下对麻将手牌进行评分。我知道您正在使用 C++，但由于 python 具有高度可读性，即使对于非 python 编码人员，也许您将能够复制/粘贴和编辑相关部分，以便您能够使用它们。

希望能以某种方式帮助你。

# facebook - 如何调整出现在 iFrame 中的网站的大小？

> ID：10025249
> 
> 赞同：0
> 
> 时间：2012-04-05T08:35:45.447
> 
> 标签：facebook, iframe, web, resize, scrollbar

我们如何调整出现在 iFrame 中的网站的大小？如果网站比 Facebook 页面更宽，是否有可能让它看起来更小，以便我们可以看到所有内容？这是我用来至少避免滚动条的代码：

```
<html>
<head></head>
<body>
<iframe style="width:827px; height:1000px;" src="#"></iframe>
</body>
</html> 
```

提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:46:04.623

在您的开始标签之后使用此代码

```
<div id="fb-root"></div>
    <script src="https://connect.facebook.net/en_US/all.js"></script>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId : 'YOUR APP ID', //Your facebook APP here
          cookie : true, // enable cookies to allow the server to access the session
        });
      }

      window.onload = function() {
        FB.Canvas.setAutoGrow(91);
      }
    </script> 
```

还将此 css 语句添加到您的标题部分。

```
<style>
body {overflow:hidden;} /*This is handy for removing horizontal/vertical scrollbars as we won't need them if we autosize; */
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:39:29.297

例如为我的 facebook 更改高度和宽度，我将其更改为 `style="border:none; overflow:hidden; width:215px; height:290px;"` 只需确保添加溢出隐藏部分，以便隐藏任何额外的

# android - 为什么 Android 示例 SoftKeyboard 的布局是这样的？

> ID：10025251
> 
> 赞同：2
> 
> 时间：2012-04-05T08:35:51.157
> 
> 标签：android, android-layout, android-softkeyboard

我目前正在我的平板电脑（Android 3.2）上试验示例软键盘。当我打开 Google 邮件应用程序并将焦点设置到*收件人*字段时，文本字段会展开以填充键盘上方的可用空间。 ![使用示例软键盘进行布局](../Images/295efb89911402070296b88c0ef7f467.png)

这看起来很像文档中的[屏幕输入方法](http://developer.android.com/resources/articles/on-screen-inputs.html "屏幕输入法")中描述的*全屏*或*提取模式*。根据我在那里收集的信息，这是由使用 SoftKeyboard 的活动设置的。

让我烦恼的是

*   这对于收件人输入字段来说不是很方便（尽管这可能是个人喜好问题）
*   库存软键盘设法防止这种情况发生，如下所示： ![使用股票软键盘进行布局](../Images/47b5af86b61dc4318507f3e4069128a1.png)
*   有时输入框中的文本颜色设置为白色（可能是由于白天/夜间的一些调整？）。白底白字或多或少不可读。

所以我的问题是：我必须改变什么才能在示例软键盘中获得类似的行为？

谢谢，一切顺利

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:29:30.103

示例软键盘非常过时——它使用了自 Froyo/Eclair 以来从未见过的布局。

示例软键盘就是这样：一个示例，不要与成熟的 android 键盘混淆。如果您正在寻找 Android 键盘的完整实现，请查看 AnySoftKeyboard 的源代码或 AOSP 源代码。

为了摆脱全屏，我知道部分问题在于`onComputeInsets()`功能。就像我说的那样，我会将您的代码基于完整的 Android 键盘（即 AOSP 或 Cyanogenmod），而不是试图让示例工作。我尝试了几个月，但您会遇到太多问题（多点触控和主题，仅举几例）。

如果您有任何问题，请给我发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:33:27.613

您可以使用按钮设计您想要的软键盘布局，textview 任何您想在键盘上显示的内容。

并将 setOnclickListener 设置为键盘的所有按钮

像这样覆盖 onCreateInputView()

```
@Override 
public View onCreateInputView() {
     View   mInputView = getLayoutInflater().inflate(
                R.layout.yourkeyboardlayout, null);

            Button btn1 =   mInputView.findViewById(R.id.btn1);

            btn1 .setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                // append text in selected TextField

                String buttonLabel = ((Button)v).getText().toString();
                getCurrentInputConnection().commitText(buttonLabel, 1);

            }
        });

        return mInputView;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T15:36:17.107

我在创建自己的键盘时遇到了类似的问题，这篇博文几乎回答了我需要知道的内容：

[http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html](http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html)

也许它也会帮助你。

# android - Android如何发送命令

> ID：10025257
> 
> 赞同：0
> 
> 时间：2012-04-05T08:36:10.593
> 
> 标签：android

我想在 android 中发送字符串命令，就像在 vb 中一样，但我不知道喜欢翻译

这是一个例子

字符（&H1D）+“V”+字符（20）+字符（65）

如何在android中翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:46:43.577

这是ASCII码。Char(20)=¶,char(65)=A 在Android中，你可以试试：

```
String sMessage = "V" + (char)20 + (char)65; 
```

# matlab - 如何在matlab中将图形保存为带有汉字的eps文件

> ID：10025265
> 
> 赞同：2
> 
> 时间：2012-04-05T08:36:35.197
> 
> 标签：matlab, matlab-figure

我用的是Windows XP（简体中文版），matlab 2011b。

我可以使用matlab在标签、图例、标题等中使用中文字符成功绘制我的图形。它可以很好地保存到位图文件中。但是当我将图形保存到 eps 文件中时，字符变得乱码。

我知道我可以编辑保存的 eps 文件以使其正确，但是有没有办法成功保存诸如 eps 之类的数字？Linux 解决方案对我来说也可以。

# android - 制作清单 android

> ID：10025267
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:36:41.293
> 
> 标签：android

我想创建一些动态列表，比如哈希表

所以我可以放一个带有值的键或者我阅读列表

我想保存它并在大屠杀开始时能够阅读它。

是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:38:57.313

1.  好像你正在寻找[`HashMap`](http://developer.android.com/reference/java/util/HashMap.html)
2.  您将需要序列化/反序列化地图以保存/加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:40:44.503

问：有可能吗？答：是的，是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:48:05.657

您要求诸如哈希表之类的东西，您可以在其中保存可以使用的键值对，也可以为此使用共享首选项。

[http://as400samplecode.blogspot.in/2011/11/android-shared-preferences-example_12.html](http://as400samplecode.blogspot.in/2011/11/android-shared-preferences-example_12.html)

# matlab - 如何简化while循环的matlab编程

> ID：10025268
> 
> 赞同：0
> 
> 时间：2012-04-05T08:36:45.047
> 
> 标签：matlab, loops, while-loop

```
I have matlab programming below. It too long and repeated when I want to use while loops. So there have any ideas how to simplify this programming? 
```

*   有 4 个点用于创建 b 样条曲线
*   还有画圆曲线
*   交集函数用于识别b样条曲线和圆曲线之间是否有任何交集
*   如果发生，该程序将 P2 和 P3 的轴增加 0.01，以确保不发生相交

* * *

```
% CONTROL POINTS OF B-SPLINE CURVE
P1 = [0,0];
P2 = [40,25];
P3 = [60,25];
P4 = [100,0];

% ADDITIONAL CONTROL POINTS FOR COMPLETING THE SEGMENTS
P0x = (2*P1(1,1))-P2(1,1);
P0y = (2*P1(1,2))-P2(1,2);

Z1 = [P0x, P0y];

P5x = (2*P4(1,1))-P3(1,1);
P5y = (2*P4(1,2))-P3(1,2);

Z2 = [P5x, P5y];

global Vx1 Vy1 Vx2 Vy2 Vx3 Vy3

for cc = 0;

Vx1 = [Z1(1,1) P1(1,1) P2(1,1) P3(1,1)]';
Vy1 = [Z1(1,2) P1(1,2) P2(1,2) P3(1,2)]';

[C1 C2] = mybspline (Vx1, Vy1);

Vx2 = [P1(1,1) P2(1,1) P3(1,1) P4(1,1)]';
Vy2 = [P1(1,2) P2(1,2) P3(1,2) P4(1,2)]';

[C3 C4] = mybspline (Vx2, Vy2);

Vx3 = [P2(1,1) P3(1,1) P4(1,1) Z2(1,1)]';
Vy3 = [P2(1,2) P3(1,2) P4(1,2) Z2(1,2)]';

[C5 C6] = mybspline (Vx3, Vy3);                                 

end

% 
A=[C1',C2';C3',C4';C5',C6'];    %Red points  - curve segment   
B=[Vx1,Vy1;Vx2,Vy2;Vx3,Vy3];    %Blue points - control points

%--------------------------------------------------------------------------
%CIRCLE

Xc = 50;              %Center for x
Yc = 0;               %Center for y
R = 25;               %R, radius of circle
x = 0:0.01:1;         %x vector
y = 0:0.01:1;         %y vector
C = Xc+R*cos(pi*x)';
D = Yc+R*sin(pi*y)';
Point_circle = [C D];

E = A(:,1);  % x axis data of B-Spline curve
F = A(:,2);  % y axis data of B-Spline curve

%--------------------------------------------------------------------------
% FIND INTERSECTION BETWEEN CURVE

[intersect_x,intersect_y] = curveintersect(A(:,1),A(:,2),C,D); 
intersect = [intersect_x, intersect_y];
figure(101)
plot(A(:,1),A(:,2),'k',C,D,'b',intersect_x,intersect_y,'ro')

abc = isempty (intersect);

while abc == 0
    P2(1,2) = P2(1,2)+0.01; 
    P3(1,2) = P3(1,2)+0.01; 

    % ADDITIONAL CONTROL POINTS FOR COMPLETING THE SEGMENTS
P0x = (2*P1(1,1))-P2(1,1);
P0y = (2*P1(1,2))-P2(1,2);

Z1 = [P0x, P0y];

P5x = (2*P4(1,1))-P3(1,1);
P5y = (2*P4(1,2))-P3(1,2);

Z2 = [P5x, P5y];

global Vx1 Vy1 Vx2 Vy2 Vx3 Vy3

for cc = 0;

Vx1 = [Z1(1,1) P1(1,1) P2(1,1) P3(1,1)]';
Vy1 = [Z1(1,2) P1(1,2) P2(1,2) P3(1,2)]';

[C1 C2] = mybspline (Vx1, Vy1);

Vx2 = [P1(1,1) P2(1,1) P3(1,1) P4(1,1)]';
Vy2 = [P1(1,2) P2(1,2) P3(1,2) P4(1,2)]';

[C3 C4] = mybspline (Vx2, Vy2);

Vx3 = [P2(1,1) P3(1,1) P4(1,1) Z2(1,1)]';
Vy3 = [P2(1,2) P3(1,2) P4(1,2) Z2(1,2)]';

[C5 C6] = mybspline (Vx3, Vy3);                                 

end

% 
A=[C1',C2';C3',C4';C5',C6'];    %Red points  - curve segment   
B=[Vx1,Vy1;Vx2,Vy2;Vx3,Vy3];    %Blue points - control points

[intersect_x,intersect_y] = curveintersect(A(:,1),A(:,2),C,D); 
intersect = [intersect_x, intersect_y];
figure(101)
plot(A(:,1),A(:,2),'k',C,D,'b',intersect_x,intersect_y,'ro')

abc = isempty (intersect);

    if abc == 1;
        break
    end
end 
```

谢谢你的慷慨！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:43:34.403

我不明白你为什么写：

```
abc = isempty (intersect);

while abc == 0 
```

在循环开始时，并且：

```
 if abc == 1;
        break
    end

end 
```

接近尾声。写起来会更清楚

```
while isempty(intersect)
    <loop contents>
end 
```

不会吗？也就是说，我认为这不会导致您的循环运行太久。`curveintersect`如果曲线不相交，你的函数会返回什么？请记住，

```
isempty([0]) ~= isempty([]) 
```

如果这不是您的问题，请更具体地说明您的问题是什么。什么是“太长”？代码，还是运行代码所需的时间？

# jquery - 如何使用 jquery 为 html 标记变量绑定事件？

> ID：10025269
> 
> 赞同：0
> 
> 时间：2012-04-05T08:36:46.037
> 
> 标签：jquery, html, events, bind, markup

假设我有一个存储 html 标记的变量：

```
var $content=$("<div id='test'></div>") 
```

然后我想给它一个点击事件，并将其附加到正文元素

```
$content.click(function(){
    console.log('click!');
});

$content.appendTo($('body')) 
```

但是它不起作用，我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:39:09.600

`click`处理程序设置得很好。问题是，对于一个完全空的 div，它的高度为`0`（除非您在未显示的某处进行了样式设置），因此您无法找到它来单击它。[零高度示例](http://jsbin.com/imumaz)| [来源](http://jsbin.com/imumaz/edit)。

解决方案是将内容放在 div 中，或者赋予其样式以赋予其高度：

[内容示例](http://jsbin.com/imumaz/2)| [来源](http://jsbin.com/imumaz/2/edit)：

```
var $content=$("<div id='test'>I'm the div!</div>");
$content.click(function(){
    console.log('click!');
});
$content.appendTo($('body')); 
```

[样式示例](http://jsbin.com/imumaz/3)| [来源](http://jsbin.com/imumaz/3/edit)：

JavaScript：

```
var $content=$("<div id='test'></div>");
$content.click(function(){
    console.log('click!');
});
$content.appendTo($('body')); 
```

CSS：

```
#test {
    height: 20px;
    border: 1px solid black;
} 
```

* * *

边注：

> 假设我有一个存储 html 标记的变量：
> 
> `var $content=$("<div id='test'></div>");`

请注意，您没有存储 HTML 标记。通过使用 HTML 标记调用 jQuery，您是在告诉 jQuery 创建相关的 DOM 元素并将它们包装在一个 jQuery 实例中。

要将*标记*存储在变量中，您只需存储包含标记的字符串：

```
var content="<div id='test'></div>"; 
```

标记是文本；元素是对象。

* * *

**更新**：在下面回复您的评论：

> 我在 jquery 插件 js 文件中编写了这段代码......它有什么问题吗？

如果您的代码在有`body`要附加的元素之前运行，这很重要；如果没有元素，您的最后一行将失败`body`（例如，如果您的代码在加载时立即运行，并且它是从`head`元素加载的）。如果该`body`元素在您运行代码时存在，那应该没问题。

# android - Android：垂直 3d 列表视图

> ID：10025270
> 
> 赞同：2
> 
> 时间：2012-04-05T08:36:47.330
> 
> 标签：android, listview, 3d, imagebutton

我想制作[像这里](http://www.binpress.com/app/3d-listview-for-android/725)一样的垂直 3d 列表视图，但是对于 ImageButtons 并且是免费的。是否有任何库或示例代码？我是Android开发的新手，所以我不知道如何为这样的东西制作动画

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T09:01:52.420

它实际上很简单。您需要扩展 ListView 并覆盖 onDrawChild()。在那里你可以应用 3d 变换矩阵来获得你想要的效果。我在我的[github](https://github.com/renard314/ListView3d)上有一个工作示例， 或者你可以看看这个非常相似的[问题。](https://stackoverflow.com/questions/9942443/carousel-view-implementation-like-listview-scrolling/9942951#9942951)

为了您的方便，这是我对 3d ListView 的实现：

```
public class ListView3d extends ListView {

    /** Ambient light intensity */
    private static final int AMBIENT_LIGHT = 55;
    /** Diffuse light intensity */
    private static final int DIFFUSE_LIGHT = 200;
    /** Specular light intensity */
    private static final float SPECULAR_LIGHT = 70;
    /** Shininess constant */
    private static final float SHININESS = 200;
    /** The max intensity of the light */
    private static final int MAX_INTENSITY = 0xFF;

    private final Camera mCamera = new Camera();
    private final Matrix mMatrix = new Matrix();
    /** Paint object to draw with */
    private Paint mPaint;

    public ListView3d(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
        // get top left coordinates
        final int top = child.getTop();
        final int left = child.getLeft();
        Bitmap bitmap = child.getDrawingCache();
        if (bitmap == null) {
            child.setDrawingCacheEnabled(true);
            child.buildDrawingCache();
            bitmap = child.getDrawingCache();
        }

        final int centerY = child.getHeight() / 2;
        final int centerX = child.getWidth() / 2;
        final int radius = getHeight() / 2;
        final int absParentCenterY = getTop() + getHeight() / 2;
        final int absChildCenterY = child.getTop() + centerX;
        final int distanceY = absParentCenterY - absChildCenterY;
        final int absDistance = Math.min(radius, Math.abs(distanceY));

        final float translateZ = (float) Math.sqrt((radius * radius) - (absDistance * absDistance));

        double radians = Math.acos((float) absDistance / radius);
        double degree = 90 - (180 / Math.PI) * radians;

        mCamera.save();
        mCamera.translate(0, 0, radius - translateZ);
        mCamera.rotateX((float) degree); // remove this line..
        if (distanceY < 0) {
            degree = 360 - degree;
        }
        mCamera.rotateY((float) degree); // and change this to rotateX() to get a
                                            // wheel like effect
        mCamera.getMatrix(mMatrix);
        mCamera.restore();

        // create and initialize the paint object
        if (mPaint == null) {
            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setFilterBitmap(true);
        }
        //highlight elements in the middle
        mPaint.setColorFilter(calculateLight((float) degree));

        mMatrix.preTranslate(-centerX, -centerY);
        mMatrix.postTranslate(centerX, centerY);
        mMatrix.postTranslate(left, top);
        canvas.drawBitmap(bitmap, mMatrix, mPaint);
        return false;
    }

    private LightingColorFilter calculateLight(final float rotation) {
        final double cosRotation = Math.cos(Math.PI * rotation / 180);
        int intensity = AMBIENT_LIGHT + (int) (DIFFUSE_LIGHT * cosRotation);
        int highlightIntensity = (int) (SPECULAR_LIGHT * Math.pow(cosRotation, SHININESS));
        if (intensity > MAX_INTENSITY) {
            intensity = MAX_INTENSITY;
        }
        if (highlightIntensity > MAX_INTENSITY) {
            highlightIntensity = MAX_INTENSITY;
        }
        final int light = Color.rgb(intensity, intensity, intensity);
        final int highlight = Color.rgb(highlightIntensity, highlightIntensity, highlightIntensity);
        return new LightingColorFilter(light, highlight);
    }
} 
```

干杯

# php - Symfony2 捆绑包：我用对了吗？

> ID：10025278
> 
> 赞同：11
> 
> 时间：2012-04-05T08:37:18.233
> 
> 标签：php, symfony

我有一个在**Symfony2**中开发的应用程序。现在它的结构如下：

*   *FrontBundle* - 包括与应用程序的视图和 UI 相关的所有内容。
*   *PersistanceBundle* - 包括与应用程序的持久层相关的所有内容。
*   *DomainBundle* - 包括与应用程序实体和服务相关的所有内容。

这个结构好吗？或者像论坛功能一样使用捆绑包 - *ForumBundle* - 它包括与论坛相关的每一层（*控制器*、*服务*、*域逻辑*和*持久性*）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T09:01:43.380

关于如何使用 bundle 构建应用程序没有硬性规定，但这是我在 Symfony2 上开发近一年后得出的结论。

**使用一个特定于应用程序的捆绑包。**起初，我[从](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones/8016867#8016867)多个捆绑包开始，例如`CommonBundle`, `UserBundle`, `MainBundle`, `BlogBundle`,`ContactBundle`等。最终证明不是那么方便，所以我只切换到一个特定于应用程序的捆绑包 - `AppBundle`.

您可以使用子命名空间整齐地组织您的代码。例如，后端控制器将转到`AppBundle\Controller\Backend`子命名空间。

请注意，我说的是一个*特定于应用程序*的捆绑包——这些东西是具体应用程序所独有的，在其他地方重复使用是没有意义的。您仍然可以为可重用的东西开发单独的捆绑包，并将它们放入供应商的基础设施中。

**将非 Symfony 特定的东西放在包之外。**如果模型和服务层类不是 Symfony2 特定的，则不需要在包中包含模型和[服务层类。](http://martinfowler.com/eaaCatalog/serviceLayer.html)有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-on-symfony-2)和我的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-30T11:49:27.270

就像 Elnur 所说，使用一个 AppBundle 是一种很好的做法。

一个单独的包自己实现了 MVC 模式，所以我认为使用包来分离你的层不是一个好主意。

我认为使用捆绑软件的最佳方式是考虑“开源”。如果您正在开发的功能足够通用，可以为每个人发布，或者可以在未来的项目中重用，请将此功能放在一个捆绑包中。这种方式将迫使您在没有属于 AppBundle 的任何业务规则的情况下构建功能。

**捆绑是砖块**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T09:09:43.250

有多种方法可以为您的项目组织应用程序结构。但是如果你想分发你的 bundle 并遵循 symfony 的最佳实践，那么 bundle 是比 UI 分离更多的特性。阅读[文档](http://symfony.com/doc/current/book/page_creation.html#page-creation-bundles)中有关捆绑包的更多信息。

我有两个具有以下结构的项目，我认为都是有效的：

1.  为每个功能制作一个捆绑包：BlogBu​​ndle、StoreBundle 等，以及包含一般内容的 AppBundle。没有后端/前端分离。在大多数情况下，它是后端是前端的 SaaS。
2.  一个用于前端，一个用于后端。他们只共享实体和特定领域的东西。该应用程序有两个不同的目的。

# java - 使用 Spring 安全性处理远程身份验证

> ID：10025280
> 
> 赞同：2
> 
> 时间：2012-04-05T08:37:29.783
> 
> 标签：java, html, spring-security

我正在尝试从远程网页到我们的门户进行一些远程日志记录。来自远程网页的用户具有登录/密码字段，他将提交这些字段以在我们的门户中处理身份验证。如果一切正常，他将被记录。如果失败，他将被重定向到门户的标准登录页面，并出现匹配的验证错误（即“无效登录名/密码”）。

我试图通过一个 servlet 来实现，希望表单的安全字段将通过请求传输，直到它们到达门户的登录页面。

不幸的是，他们看起来好像没有达到它，因为我总是收到“无效密码/登录”错误。

由于我对 Spring 真的很陌生，我真的不确定如何实现它。我可能会考虑通过 BASE 64 编码数据传递信息，但我也不知道如何将这些信息传递给 Spring，也不确定这是一种安全的方法。

所以，如果你们中的任何人有任何想法，我会很高兴地阅读它！

**这是远程表单代码：**

```
<form id="connexion">
    <input id="j_username" name="j_username" type="text" value="Email" class="field"/>
    <input id="j_password" name="j_password" type="password" value="Mot de passe" class="field"/>
    <input type="button" class="btn" value="OK" onClick="javascript:register()"/>
</form>

function register(){

  urlSite=http://localhost:8080/monApp/DistantLogingServlet
this.document.location=urlSite

} 
```

**小服务程序部分：**

```
 /**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 * @param request 
 * @param response 
 * @throws IOException 
 * @throws ServletException 
 */
 protected final void doGet(final HttpServletRequest request, final HttpServletResponse response) throws ServletException, IOException {

    final ExternalContext context = FacesUtils.getFacesContext( request, response, servletContext).getExternalContext();

    final RequestDispatcher dispatcher = request.getRequestDispatcher("/j_spring_security_check");

    dispatcher.forward(request, (ServletResponse) context.getResponse());

    FacesContext.getCurrentInstance().responseComplete();
} 
```

**门户的标准登录页面 (jsp)：**

```
<h:inputSecret
  id="j_password"
  type="text"
  name="j_password"
  value="#{user.password}"/>

<h:selectBooleanCheckbox
  id="_spring_security_remember_me"
  name="_spring_security_remember_me"
  value="#{user.rememberme}"
  class="float-left" /> 

<h:commandButton
  action="#{user.doLogin}"/> 
```

**还有java认证部分：**

```
public final String doLogin() throws IOException, ServletException {

    final ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();

    final HttpServletRequest request = ((HttpServletRequest) context.getRequest());

    final RequestDispatcher dispatcher = request.getRequestDispatcher("/j_spring_security_check");

    dispatcher.forward(request, (ServletResponse) context.getResponse());

    FacesContext.getCurrentInstance().responseComplete();

    // It's OK to return null here because Faces is just going to exit.
    return null;

} 
```

提前感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:30:35.180

这看起来像是单点登录场景。

所以。

如果用户已经登录到您信任的应用程序，则您不需要门户网站上的登录表单。

执行此操作的一些标准方法是[CAS](http://www.jasig.org/cas)或[Open ID](http://openid.net/)，Spring Security 两者都支持。

第三种方法是在用户成功登录远程站点时在用户的浏览器上设置一个cookie，并使用spring过滤器查找该cookie。通常用于此的过滤器是[`AbstractPreAuthenticatedProcessingFilter`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)（它实际上是子类）。

我还将向您指出 Spring Security 文档的[Pre-Authentication 场景](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)部分。

# asp.net - 404 未找到 asp.net 网站

> ID：10025281
> 
> 赞同：0
> 
> 时间：2012-04-05T08:37:33.200
> 
> 标签：asp.net, iis, web-config

我的缩小的 javascripts 文件收到 404 not found 状态代码，并且还有一个错误 ASP.Net ajax 客户端框架无法加载。

我在下面的 web.config 中给出了我的配置设置，

```
 <httpModules>
      <!-- Component Art-->
      <add type="ComponentArt.Web.UI.UploadModule,ComponentArt.Web.UI" name="ComponentArtUploadModule"/>
      <!--Blog Engine-->
      <add name="WwwSubDomainModule" type="BlogEngine.Core.Web.HttpModules.WwwSubDomainModule, BlogEngine.Core"/>
      <add name="UrlRewrite" type="BlogEngine.Core.Web.HttpModules.UrlRewrite, BlogEngine.Core"/>
      <add name="CompressionModule" type="BlogEngine.Core.Web.HttpModules.CompressionModule, BlogEngine.Core"/>
      <add name="ReferrerModule" type="BlogEngine.Core.Web.HttpModules.ReferrerModule, BlogEngine.Core"/>
      <!--Remove the default ASP.NET modules we don't need-->
      <remove name="PassportAuthentication"/>
      <remove name="Profile"/>
      <remove name="AnonymousIdentification"/>
    </httpModules>
<system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>

        <modules>
            <add type="DevExpress.Web.ASPxClasses.ASPxHttpHandlerModule, DevExpress.Web.v10.2, Version=10.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" name="ASPxHttpHandlerModule"/>
        </modules>
        <handlers>
            <add name="ComponentArtScriptHandler" type="ComponentArt.Web.UI.ScriptHandler,ComponentArt.Web.UI" path="ComponentArtScript.axd" verb="*" />
        </handlers>
    </system.webServer> 
```

我不知道我是否缺少任何配置或添加了一些额外的东西。有人可以看看吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:07:35.170

类似于@walther

```
href="/js/my.js" 
```

由于第一个斜杠将采用 URL 根目录的路径，因此在不同环境之间移动时非常有用（前提是您的 dev 不在子文件夹中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:41:49.740

如果您收到“未找到”错误，则说明解析路径有问题。路径/文件不存在（例如因为它在其他地方），或者您在重写/路由引擎中有一些冲突的规则。

尝试使用绝对路径作为临时修复。这意味着而不是

```
href="../../my.js" 
```

你会写

```
href="http://mypage.com/js/my.js" 
```

# jquery - 如何使用jquery从链接中删除属性

> ID：10025283
> 
> 赞同：0
> 
> 时间：2012-04-05T08:37:37.127
> 
> 标签：jquery, attributes

我有一个看起来像这样的链接：

```
<a onclick="myLightbox" rel="lightbox" href="image.jpg" title=""> 
```

我正在尝试`$element.prop("onclick", null);`删除属性`onclick`and `rel`，但只是不知道如何使其工作

谁能帮帮我吗？a 标签没有 id，我不能让它有一个，因为该链接是由我无法控制的 CMS 生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:40:17.983

使用[removeAttr](http://api.jquery.com/removeAttr/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:50:40.880

采用[`removeAttr`](http://api.jquery.com/removeAttr/)

```
 $("a[href*='image.jpg']").removeAttr("rel"); 
```

**演示**：http: [//jsfiddle.net/eFqsG/3/](http://jsfiddle.net/eFqsG/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:40:47.330

*   `rel`不是属性而是属性。采用`.removeAttr('rel')`
*   对于 onclick，请参阅[`unbind`](http://api.jquery.com/unbind/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:44:31.483

为 jquery 选择放置一个 id 或类，或者您也可以使用这样的标签进行选择

```
$('a').prop("onclick",null); 
```

您必须提供选择器，因为此处无法识别 $element。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T08:44:35.520

```
$('a').each(function(index, a) {
    var a = $(a);
    if(a.attr('rel') == 'lightbox' && a.attr('onclick') == 'myLightbox') {
        a.attr('rel', null).attr('onclick', null);
    }
}); 
```

# label - JFreeChart：有没有办法在 XYPlot 的两行中绘制长刻度标签

> ID：10025284
> 
> 赞同：3
> 
> 时间：2012-04-05T08:37:42.310
> 
> 标签：label, jfreechart

我有使用 JFreeChart 和 XYPlot 的遗留代码示例。现在我正在为该代码制作 i18n，并且大多数非英文字符串都比英文字符串长得多。我搜索了一种包装字符串的方法。没有成功。请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T15:01:57.510

尝试使用`setMaximumCategoryLabelLines`from 的方法`CategoryAxis`，例如：

```
CategoryAxis domainAxis = plot.getDomainAxis();
domainAxis.setMaximumCategoryLabelLines(3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T19:41:58.100

[不支持](http://jfree.org/phpBB2/viewtopic.php?f=3&t=4558)多行。该`setVerticalTickLabels()`方法可以应用于域或范围轴。由于空间有限，口译员应该节俭。提供用户设置，如此处所示[，](https://stackoverflow.com/a/5522583/230513)可以减轻限制。

# c++ - 关于绘图算法的好书，最好用 C 或 C++

> ID：10025286
> 
> 赞同：3
> 
> 时间：2012-04-05T08:37:50.020
> 
> 标签：c++, c, algorithm, drawing, paint

我需要一个关于绘图算法的良好学习资源的推荐。我找到了很多关于算法的书籍，但主要是向量和矩阵线性代数，没有涵盖我感兴趣的主题：

```
efficient drawing of primitives and curves
efficient filling of primitives and paths
multi-sampling or similar techniques for smooth painting
sub-pixel painting
linear, radial, conical and other types of gradients
etc... 
```

我对一本关于某些 API 的书不感兴趣，这些 API 实现了像 Cairo、GDI、Qt 或类似的那些，但实现细节本身。我对大而复杂的数学公式不是特别感兴趣，我更喜欢带有示例代码的更直观、更直观的方法，伪代码也可以正常工作。

此外，在有人急于结束这个问题之前 - 我确实费心寻找类似的东西。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:43:12.123

我通常可以在这本书中找到我需要的东西

James D. Foley、Andries van Dam、Steven K. Feiner、John F. Hughes 的“计算机图形学：C 语言的原理和实践”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:47:56.043

我可以推荐两本书：

*   Windows 游戏编程大师的技巧 - 更多关于 2D 图形
*   3D 游戏编程大师的技巧 - 高级 3D 图形和光栅化 - 更多关于 3D

当然还有“计算机图形学：C 中的原则和实践”......如前面的答案中所述

# android - Android平板启动问题（三荣n80）

> ID：10025288
> 
> 赞同：0
> 
> 时间：2012-04-05T08:37:56.933
> 
> 标签：android

两个月前我买了 Sanei N80 android 平板电脑（android 2.3）。我尝试使用 z4root 应用程序 root。它卡在中间所以我关闭并打开平板电脑。现在平板电脑无法启动停留在启动画面中（请参阅所附的screenshot1.png）。我还尝试使用恢复模式重新启动它，它再次卡住并显示带有 android 图像的警告图标（请参阅附加的 screenshot2.png）。我正在粘贴日志以供参考。

请请请帮助。我不知道如何继续。

日志，同时正常启动。

> D/AndroidRuntime（1309）：>>>>>> AndroidRuntime START com.android.internal.os.ZygoteInit <<<<<< D/AndroidRuntime（1309）：CheckJNI 关闭 D/dalvikvm（1309）：创建 instr 宽度表 D/dalvikvm（1309）：DexOpt：不正确的 opt 幻数（0xff ff ff ff） D/dalvikvm（1309）：ODEX 文件过时或损坏；删除并重试（/data/dalvik-cache/system@framework@framework.jar@classes.dex）D/dalvikvm（1309）：Zip inflate：部分写入（将重试）：（4056 of 32768）E/dalvikvm（1309 ）：压缩膨胀：写入失败：设备上没有剩余空间 E​​/dalvikvm（1309）：无法从“/system/framework/framework.jar”中提取+优化 DEX D/dalvikvm（1309）：无法处理类路径元素“ /system/framework/framework.jar'E/JNIHelp（1309）：本地注册找不到类'

提前致谢

# templates - 使用 Go 的 html/模板免于转义的白名单标签

> ID：10025292
> 
> 赞同：1
> 
> 时间：2012-04-05T08:38:23.127
> 
> 标签：templates, go

将 []byte 传递到模板中，作为论坛风格 Web 应用程序上消息帖子的正文。在模板中，调用转换为字符串的方法，并在此过程中将所有换行符切换为换行符：

```
<p>{{.BodyString}}</p> 
```

...

```
func (p *Post) BodyString() string {
    nl := regexp.MustCompile(`\n`)
    return nl.ReplaceAllString(string(p.Body), `<br>`)
} 
```

你最终会得到什么：

```
paragraphs <br> <br>in <br> <br>this <br> <br>post 
```

我不想用 HTML(p.Body) 传递整个帖子，因为它代表来自潜在不可靠来源的第三方数据。有没有办法使用 vanilla Go1 模板包仅将一些标签列入白名单以进行格式化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:56:29.123

我确实认为您想解析 HTML。exp/html 中的 HTML 解析器被认为是不完整的，因此从 Go 1 中删除，尽管 exp 树仍在 Go 源代码树中并且可以通过例如每周标记访问。我不知道到底什么是不完整的。我曾经将它用于一个简单的任务，它满足了我的需求。

当然，还要检查[仪表板](http://godashboard.appspot.com/)并查看相关的 SO 帖子，[在 Go1 之后获取 exp/html 的任何智能方法？](https://stackoverflow.com/questions/9986329/any-smart-method-to-get-exp-html-back-after-go1/)，主要用于[http://code.google.com/p/go-html-transform/的推荐](http://code.google.com/p/go-html-transform/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:07:07.237

我害怕模板包无法解决这个问题。如果你想删除特定的（黑名单）标签（分别是由这些标签包围的子树）或只允许传递特定的标签（白名单），那么我认为可能无非就是解析和重写 html AST 可以是一个很好的解决方案。也就是说，人们可以到处看到一些疯狂的 RE 试图做同样的事情，但我不认为这是一个“好的解决方案”，我怀疑它们在符合 HTML 规范的一般情况下是否是一个“正确”的解决方案，包括几个法律违规行为，因为它可能被排除在常规语法类别问题之外。

# java - Android Facebook 不支持的发布请求错误

> ID：10025294
> 
> 赞同：0
> 
> 时间：2012-04-05T08:38:55.357
> 
> 标签：java, android, facebook, sdk

我正在开发 Facebook 应用程序，目前正在尝试让我的应用程序标记用户的朋友之一。我几乎让它 100% 工作，除非它应该标记这个人，而是收到如下错误消息：

{"error":{"message":"不支持的发布请求。","type":"GraphMethodException","code":100}}

用户和照片 ID 肯定是正确的，这不是问题。否则，我不确定还有什么可能导致此错误。代码如下供参考。非常感谢！

```
public void setTag() {
    String relativePath = Constants.photoID + "/tags/" + Constants.userID;
    Bundle params = new Bundle();
    params.putString("x", "5");
    params.putString("y", "5");
    Constants.mAsyncRunner.request(relativePath, params, "POST", new TagPhotoRequestListener(),
            null);
}

public class TagPhotoRequestListener extends BaseRequestListener {

@Override
public void onComplete(final String response, final Object state) {
    if (response.equals("true")) 
    {
        String message = "User tagged in photo at (5, 5)" + "\n";
        message += "Api Response: " + response;
        Log.i("TagPhotoRequestListener", message);
    } 
    else 
    {
        Log.w("TagPhotoRequestListener", "User could not be tagged.");
    }
}

public void onFacebookError(FacebookError e) {
    Log.w("TagPhotoRequestListener", "Facebook Error: " + e.getMessage());
} 
```

}

编辑：这是我发布图片和获取 photoID 的代码。出于测试目的，它只是我 SD 卡中的一张照片。

```
public void postPhoto() {
    byte[] data = null;

    Bitmap bi = BitmapFactory.decodeFile("/mnt/sdcard/Download/KathleenSchedule.jpg");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    data = baos.toByteArray();

    Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, Constants.mFacebook.getAccessToken());
    params.putString("method", "photos.upload");
    params.putByteArray("picture", data);

    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(Constants.mFacebook);
    mAsyncRunner.request(null, params, "POST", new PhotoUploadListener(), null);
}

public class PhotoUploadListener extends BaseRequestListener {

@Override
public void onComplete(final String response, final Object state) {
    try {
        // process the response here: (executed in background thread)
        Log.d("PhotoUploadListener", "Response: " + response.toString());
        JSONObject json = Util.parseJson(response);
        System.out.println(response);
        final String photo_id = json.getString("pid");
        Constants.photoID = photo_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:28:47.853

好的，现在你的问题很清楚了。

您正在使用不推荐使用的[photos.upload](http://developers.facebook.com/docs/reference/rest/photos.upload/)方法：

> 我们正在弃用 REST API，因此如果您正在构建新应用程序，则不应使用此功能。而是使用[Graph API](http://developers.facebook.com/docs/reference/api/)和 POST 到[用户对象的照片连接](http://developers.facebook.com/docs/reference/api/user/)

因为您使用的是旧方法，所以您正在获取旧响应类型。切换到使用图形 api 方式，您应该在响应中获取照片 id。

# c# - SQL Server 2005 中的更新表

> ID：10025298
> 
> 赞同：-3
> 
> 时间：2012-04-05T08:39:01.463
> 
> 标签：c#, asp.net, sql-server-2005

我有两张桌子：

```
stock (ItemName,Quantity) 
```

和

```
 WeeklyStock (ItemName,StartQuantity,EndQuantity,date). 
```

我想`WeeklyStock`在系统日期更改时在一周的开始和结束时更新表。

我应该使用触发器吗？如果是，那怎么办？.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:42:09.643

不，您不应该使用触发器来执行每周工作。

使用[SQLServerAgent 作业](http://msdn.microsoft.com/en-us/library/ms181153.aspx)或[维护任务](http://msdn.microsoft.com/en-us/library/ms139753.aspx)。或者，也许您的应用程序可以以某种方式刺激活动。

触发器用于执行活动以响应数据更改，通常是为了维护整个模式的完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:45:28.617

当您对数据库中的数据进行更改（即：插入、更新或删除）时会触发触发器。因此，这不适合您的目的。

要在 SQL Server 中以定期方式启动，您应该在 SQL Server 代理中创建一个计划任务，该任务将运行您的更新过程。

# objective-c - 将 UITableView 与其他元素结合——如何创建和使用视图？

> ID：10025301
> 
> 赞同：0
> 
> 时间：2012-04-05T08:39:10.063
> 
> 标签：objective-c, ios, uitableview

我有一个项目接近做我需要做的一切。它有一个主页，其中有四个按钮，可让您选择一个选项。然后从这些选项启动一个 tableview 页面，并显示来自网站的已解析 XML 提要。然后，您可以选择表中的选项之一来查看项目的详细视图、查询项目等。

我的问题是我需要向 TableViewController 页面添加更多元素，而不是 tableview 本身。我想要一个自定义的后退按钮（不是导航控制器标准）加上一些标签、图像等。

在 TableViewController xib 中，tableview 本身填充页面。我无法调整它的大小以在其上方添加更多元素。我可以在表格视图上方添加一个看似“视图”的窗口并将东西放入其中。但它似乎将视图添加到 tableview。这意味着当我滚动表格时，新的后退按钮等其他元素会作为表格的一部分滚动出去。

所以我想知道我是否需要这个页面不是tableviewcontroller，而是一个viewcontroller，里面有一个tableview，以及我的其他带有按钮的视图等。这是正确的方法吗？但如果是这样的话，那么我如何在代码中实例化 tableviewcontroller 呢？因为我的页面将不再属于那种类型 - 它只是一个视图控制器。但是在代码中，我正在制作一个 tableviewcontroller .. 有点被那条路线吓到了。

对此的任何启发都将不胜感激，因为各种搜索让我一点也不聪明。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:50:54.097

要自定义它，这是要走的路：

*   将您的类改为视图控制器，它实现了 TableViewDelegate 和 TableViewData Source 协议。
*   在您的控制器的视图 didLoad 中，创建表视图，设置其委托、数据源和您希望的任何其他属性，并将其作为子视图添加到您的视图中。

    ```
    tableView = [[[UITableView alloc] init] autorelease];
    tableView.delegate = self;
    tableView.dataSource = self;
    // .. Other customization
    [self.view addSubview:tableView]; 
    ```

我建议以编程方式而不是 IB 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:48:00.760

您需要一个具有 IBOutlet UITableView 的 UIViewController，而不是 UITableViewController。从 Storyboard 中拖放一个 UITableView 组件并将其连接起来，并根据需要将其放置在屏幕上。这个 UIViewController 应该实现 UITableViewDelegate 和 UITableViewDataSource 方法。

编辑：请记住 UITableViewController 只是 UIViewController 的子类，因此您实际上不必摆脱所有代码。:) 你只需要对你的头文件和主文件进行细微的调整，并将 Storyboard 更改为 UIViewController 而不是我上面提到的 UITableViewController。

# xcode - NSPredicate 性能，非常慢

> ID：10025303
> 
> 赞同：0
> 
> 时间：2012-04-05T08:39:17.617
> 
> 标签：xcode, core-data, nspredicate

我有一个 NSPredicate 看起来像

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"((strasse.checks CONTAINS [cd] YES) AND (raumattribute.schalter CONTAINS[cd] YES)) OR ((strasse.standort.ortcheck CONTAINS [cd] YES) AND (raumattribute.schalter CONTAINS[cd] YES)) OR ((strasse.standort.ortcheck CONTAINS [cd] YES) AND(raumattribute.schalter CONTAINS[cd] NO) OR (strasse.checks CONTAINS [cd] YES) AND (raumattribute.schalter CONTAINS[cd] NO)) OR (strasse.standort.ortcheck CONTAINS [cd] NO)"];`

但是性能非常非常慢。有没有办法让它更容易和更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:29:44.530

首先，您可以将谓词简化为如下所示：

```
NSPredicate *predicate =
[NSPredicate predicateWithFormat:
 @"(raumattribute.schalter CONTAINS YES OR raumattribute.schalter CONTAINS NO) AND \
 (strasse.checks CONTAINS YES OR strasse.standort.ortcheck CONTAINS YES) OR \
 strasse.standort.ortcheck CONTAINS NO"]; 
```

然后，如果我们假设`raumattribute.schalter`并`strasse.standort.ortcheck`只包含布尔值，我们可以再次简化谓词：

```
NSPredicate *predicate =
[NSPredicate predicateWithFormat:
 @"raumattribute.schalter.@count > 0 AND \
 (strasse.checks CONTAINS YES OR strasse.standort.ortcheck.@count > 0) OR \
 strasse.standort.ortcheck CONTAINS NO"]; 
```

# iphone - 如何将字符串获取到指定的url？

> ID：10025304
> 
> 赞同：0
> 
> 时间：2012-04-05T08:39:21.293
> 
> 标签：iphone, ios, xcode4, nsurlconnection

嗨朋友们，

我正在尝试从 url 获取字符串数据和图像数据。但是字符串数据

显示为空。有人告诉我如何将图像上传到指定的网址。

我在这里写这段代码

```
UIImage *image = [UIImage  imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.105:9966/PC/DisplayImage?id=2"]]];

myimages.image=image;
NSURL *url = [ NSURL URLWithString: [ NSString stringWithFormat:@"http://192.168.1.105:9966/PC/DisplayImage?id=2"] ]; 
NSData *imageData = UIImageJPEGRepresentation(image, 90);
NSString *encodedImage = [Base64 encode:imageData];
NSLog(@"my encoding image is %@",encodedImage);
NSURL *url = [ NSURL URLWithString: [ NSString stringWithFormat: @"http://192.168.1.105:9966/PC/DisplayImage?id=2"] ]; 
NSString *test = [NSString stringWithContentsOfURL:url];
NSLog(@"naveenkumar testing%@",test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:52:58.117

您可以使用 NSURLConnection 使用 post 方法上传图像 -

```
NSURL *postURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@submit.php",@"http://x.com/"]]; 

    NSMutableURLRequest *postRequest = [NSMutableURLRequest requestWithURL:postURL
                                                               cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                           timeoutInterval:30.0];

    // change type to POST (default is GET)
    [postRequest setHTTPMethod:@"POST"];

    NSMutableData *postBody = [NSMutableData data];

    // just some random text that will never occur in the body
    NSString *stringBoundary = @"0xKhTmLbOuNdArY---This_Is_ThE_BoUnDaRyy---pqo";
    // header value
    NSString *headerBoundary = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",
                                stringBoundary];
    // set header
    [postRequest addValue:headerBoundary forHTTPHeaderField:@"Content-Type"];
// image ------------

        [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[@"Content-Disposition: form-data; name=\"text\"; filename=\"frontimage.png\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[@"Content-Type: image/png\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[@"Content-Transfer-Encoding: binary\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        // add it to body

        [postBody appendData:UIImageJPEGRepresentation(image, 90)];
        [postBody appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
// final boundary

    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // add body to post
    [postRequest setHTTPBody:postBody];

    NSURLConnection *theConnection = [NSURLConnection connectionWithRequest:postRequest delegate:self];

    if (theConnection) 
        NSLog(@"%@",theConnection); 
```

# c - 为什么最后一个 read() 需要很长时间才能返回

> ID：10025309
> 
> 赞同：2
> 
> 时间：2012-04-05T08:39:46.837
> 
> 标签：c, network-programming

我编写了一个简单的程序，它使用 unix 套接字从服务器下载 html 文件。

我使用 write() 发送“Get /index.html Host: *** ”消息，然后使用 while 循环读取（）响应。一切顺利，但最后一个返回 0 的 read() 需要很长时间才能返回。有什么想法可以更正代码，这样我就不需要等待这个特殊的时间了吗？或者这怎么会发生？

```
 sprintf(cmdstr,"%s %s %s\r\nHOST:%s\r\n\r\n",METHOD,place,VERSION,host);
    cmdlen = strlen(cmdstr);
    if (write(sockfd,cmdstr,cmdlen) != cmdlen) {
       perror("write cmd error");
       return ;
    }

    while ((n = read(sockfd,read_data,BUFSIZE)) > 0) {
        read_data[n] = 0;
        p = read_data;

        if (filep == NULL) {
            if (filep = fopen(filename,"w")) == NULL) {
                perror("fopen ");
                return;
            }
            p = strstr(read_data,"\r\n\r\n");
            p += 4;
        }
        fputs(p,filep);
    }

    printf ("%s download completed.\n",filename); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:16:30.247

如果没有数据准备好，`recv`将阻塞或失败（取决于它是阻塞还是非阻塞）。*当套接字的另一端关闭连接时*
`recv`返回零。从来没有。

 *这通常不会发生在 HTTP/1.1（现在几乎所有现有服务器）中，至少不会立即发生，因为默认情况下连接应该保持活动状态。

向服务器发送一个`Connection: close`您不想要这种行为的信号。然后它应该尽快断开连接（当然，在向您发送所有内容之后）。

或者，您可以尝试调用`shutdown(sockfd, SHUT_WR);`，它执行连接的半关闭，并且服务器可能（应该，希望）做出适当的反应。

或者，最后，您只能阅读内容长度告诉您的内容，然后断开连接，但这对服务器来说有点反社会，而且并非完全没有风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:46:03.153

因为您要求套接字在`BUFSIZE`没有更多要读取的数据时读取数据。我假设调用`read`阻塞等待更多数据通过 TCP 连接，并且只会在连接断开一段时间后返回。

如果您知道文件有多大，那么您可以请求只读取该数量的数据。如果您不知道文件有多大，那么您将依靠服务器在文件传输时关闭连接。*

# wcf - 使用 Enterprise Library 时对象生成器异常

> ID：10025312
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:40:07.530
> 
> 标签：wcf, exception-handling, enterprise-library

我有一个 WCF 应用程序，它具有单独的客户端和服务器应用程序。当我运行应用程序时运行良好，但是当我尝试对应用程序方法进行单元测试时，会生成对象生成器异常。有人可以帮忙吗？

![这是错误信息](../Images/02906caaba5847a3e081ca8070be2b98.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:44:10.787

我认为你应该检查你的测试项目的测试设置。您必须提及部署所需的必要文件。还要检查 test.testsettings 文件是否包含在项目中并且配置正确。

# spring - Spring 3 Hibernate JPA 2.0 Maven 和值“2.0”错误

> ID：10025315
> 
> 赞同：0
> 
> 时间：2012-04-05T08:40:15.933
> 
> 标签：spring, hibernate, jpa, maven

我试图从头开始创建应用程序。在新的 maven 项目中，我添加了很多依赖项，创建 persistence.xml、application.xml 并修改 web.xml。还介绍了一些实体和控制器。接下来我尝试使用 mvn jetty:run 在码头上运行它，然后我得到了这个异常：

```
org.xml.sax.SAXParseException: cvc-complex-type.3.1: Value '2.0' of attribute 'version' of element 'persistence' is not valid with respect to the corresponding attribute use. Attribute 'version' has a fixed value of '1.0'. 
```

谷歌搜索后，我了解到这可能是因为我在类路径中有几个 JPA 实现，其中一个可能是 1.0。但我不明白它在哪里，因为我只使用最新版本的休眠实体管理器，并且明确地不添加任何其他实现。哪里可能有bug？可能是因为我添加了许多弹簧依赖项吗？

```
<dependencies>
        <!-- 1111111 -->
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- 2222222 -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.0.Final</version>
        </dependency>

        <!-- 33333333 -->
        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.0.0</version>
        </dependency>

        <!-- 4444444 -->
        <!--Core utilities used by other modules. Define this if you use Spring Utility APIs (org.springframework.core.*/org.springframework.util.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Expression Language (depends on spring-core) Define this if you use Spring Expression APIs (org.springframework.expression.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Bean Factory and JavaBeans utilities (depends on spring-core) Define this if you use Spring Bean APIs (org.springframework.beans.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Aspect Oriented Programming (AOP) Framework (depends on spring-core, spring-beans) Define this if you use Spring AOP APIs (org.springframework.aop.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Application Context (depends on spring-core, spring-expression, spring-aop, spring-beans) This is the central artifact for Spring's Dependency Injection Container and is generally always Defined-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Various Application Context utilities, including EhCache, JavaMail, Quartz, and Freemarker integration Define this if you need any of these integrations-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Transaction Management Abstraction (depends on spring-core, spring-beans, spring-aop, spring-context) Define this if you use Spring Transactions or DAO Exception Hierarchy(org.springframework.transaction.*/org.springframework.dao.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, spring-tx) Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, and iBatis.(depends on spring-core, spring-beans, spring-context, spring-tx) Define this if you need ORM (org.springframework.orm.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!-- Object-to-XML Mapping (OXM) abstraction and integration with JAXB, JiBX, Castor, XStream, and XML Beans.(depends on spring-core, spring-beans, spring-context) Define this if you need OXM (org.springframework.oxm.*)
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>   -->
        <!--Web application development utilities applicable to both Servlet and Portlet Environments(depends on spring-core, spring-beans, spring-context) Define this if you use Spring MVC, or wish to use Struts, JSF, or another web framework with Spring (org.springframework.web.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Spring MVC for Servlet Environments (depends on spring-core, spring-beans, spring-context, spring-web) Define this if you use Spring MVC with a Servlet Container such as Apache Tomcat (org.springframework.web.servlet.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Spring MVC for Portlet Environments (depends on spring-core, spring-beans, spring-context, spring-web) Define this if you use Spring MVC with a Portlet Container (org.springframework.web.portlet.*)-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc-portlet</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <!--Support for testing Spring applications with tools such as JUnit and TestNGThis artifact is generally always Defined with a 'test' scope for the integration testing framework and unit testing stubs-->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- 55555555 -->
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.6</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

    </dependencies> 
```

和我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
             xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="units" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:mem:."/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
        </properties>
    </persistence-unit>

</persistence> 
```

${org.springframework.version} = 3.0.0.RELEASE

如果需要其他东西 - 我可以提供

ps对不起英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:45:38.180

恕我直言，您的 POM、它的依赖项和`persistence.xml`文件看起来不错。我看不出为什么 JPA 1.0 以某种方式优先于 JPA 2.0，至少在您的应用程序方面。因此，您应该检查另一面，即您将应用程序部署到的 Jetty 实例。确保它的库（提供给应用程序类路径）不包含 JPA 1.0（它的实现，如旧的 Hibernate 版本），因为 JPA 1.0 具有优先权。除了类路径中的旧 JPA 实现之外，我真的没有看到任何其他原因。

或者，只需尝试下载 vanilla Tomcat，将其解压缩并按原样部署您的应用程序（WAR 文件）。这将确保您的应用程序正常，这是容器的问题。

# opengl - 如何在 Windows 7 中设置 OpenGL 环境？

> ID：10025319
> 
> 赞同：-3
> 
> 时间：2012-04-05T08:40:19.957
> 
> 标签：opengl

我是 OpenGL 的新手。我必须开发一个简单的 3D 应用程序。我从谷歌读到我必须安装 GLUT 和 OpenGL。是对的吗？你能告诉我到底应该安装什么吗？任何正确下载的链接表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:48:24.867

> 谷歌我必须安装 GLUT 和

您不一定需要 GLUT。不过，很多教程都使用它。

> OpenGL。是对的吗？

好吧，OpenGL 主要是驱动程序的 API。因此，您真正需要的是直接从供应商处获得的图形处理器驱动程序。Windows7 自动安装的驱动程序缺乏现代 OpenGL 支持。

因此，只需访问[http://intel.com](http://intel.com)或[http://amd.com](http://amd.com)或[http://nvidia.com](http://nvidia.com)，具体取决于您的 GPU，然后直接从他们的站点下载驱动程序并安装它们。

我强烈推荐的是获得 GLEW：[http](http://glew.sf.net) ://glew.sf.net - 从长远来看，它会让事情变得更容易。尤其是如果你想在 OpenGL-1.1 之外做任何事情，你将不得不使用所谓的*扩展系统*，直接使用它有点乏味。`glewInit()`一旦你有一个 OpenGL 上下文，GLEW 将这一切隐藏在对 的单个函数调用之后。

# hibernate - 在单个事务中将数据持久保存在多个表中

> ID：10025322
> 
> 赞同：0
> 
> 时间：2012-04-05T08:40:24.477
> 
> 标签：hibernate, hibernate-session

在下面的代码片段中，我试图保留两个实体——Account 和 AccountDetails。我希望这是原子的。这意味着，Account 和 AccountDetails 实体都应该保存在一个事务中。我无法实现它。

请注意，AccountDetails 表是指具有外键 (account.id) 的 Account 表。

如果我尝试将它们保持在同一个事务中，我会遇到死锁。否则，我需要两个具有不同会话的不同事务。

```
 Account instance = (Account) transientInstance;
        Set<AccountDetails> accountDetailses = instance.getAccountDetailses();
        AccountsHomeFactory factory = AccountsHomeFactory.getInstance();
        AccountDetailsHome accountDetailsDAO = (AccountDetailsHome) factory.getDAO("AccountDetails");

        transaction.begin();
        sessionFactory.getCurrentSession().persist(instance);

        transaction.commit();
                    // get new session ands start the transaction.
        transaction.begin();

        for (AccountDetails accountDetails : accountDetailses) {
            accountDetailsDAO.persist(accountDetails);
            log.debug("persist successful");
        }

        log.debug("transaction commit");
        transaction.commit(); 
```

问题：

1.  我怎样才能避免死锁？为什么这里会发生死锁？毕竟，从逻辑上讲， *AccountDetails*不需要对*Account*进行锁定来持久化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:13:44.287

我认为你想做的事情是可能的。解决方案是一个会话的多个事务。您可以阅读[此](https://community.jboss.org/wiki/OpenSessionInView)内容，希望对您有所帮助。

# sorting - 使用双向链表的插入排序的复杂性？

> ID：10025323
> 
> 赞同：0
> 
> 时间：2012-04-05T08:40:26.147
> 
> 标签：sorting, linked-list, complexity-theory, insertion-sort

> 插入排序需要通过在通过数组实现时移动已排序列表的元素来按排序顺序插入元素。如果我们不使用数组，而是使用双向链表，那么时间复杂度是多少？

时间复杂度是 O(n^2)？为什么？如果我们考虑插入 n 个元素，那么它将是 log(1) + log(2) + log(3) + ..... + log(n) - n 次 n 个元素，因此复杂度应该是 O(nlogn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:50:10.057

插入链表需要时间 O( *n* )，而不是 O(lgn *)*，因为您必须导航链接结构才能找到插入点。

# powershell - 在字符串中格式化 PowerShell Get-Date

> ID：10025333
> 
> 赞同：39
> 
> 时间：2012-04-05T08:41:01.263
> 
> 标签：powershell, formatting

我无法理解如何在 PowerShell 中格式化字符串中的日期时间变量。

```
$startTime = Get-Date
Write-Host "The script was started $startTime"

# ...Do stuff...

$endTime = Get-Date
Write-Host "Done at $endTime.  Time for the full run was: $( New-TimeSpan $startTime $endTime)." 
```

[在我想要ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)时给我美国日期格式。

我可以使用

```
$(Get-Date -Format u) 
```

但我想使用 $endTime 来正确计算时间跨度。

`$`我已经尝试了, `(`, `)`, `endTime`, `-format`, `u`,`.ToString(...)`和的所有排列`.ToShortDate()`，但是一个有效的排列。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-05T10:25:06.883

```
"This is my string with date in specified format $($theDate.ToString('u'))" 
```

或者

```
"This is my string with date in specified format $(Get-Date -format 'u')" 
```

子表达式 ( `$(...)`) 可以包含任意表达式调用。

Microsoft 记录[标准和自定义`DateTime`格式字符串](https://docs.microsoft.com/en-us/dotnet/standard/base-types/formatting-types)。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-05T09:43:58.603

您可以使用 -f 运算符

```
$a = "{0:D}" -f (get-date)
$a = "{0:dddd}" -f (get-date) 
```

* * *

```
Spécificator    Type                                Example (with [datetime]::now)
d   Short date                                        26/09/2002
D   Long date                                       jeudi 26 septembre 2002
t   Short Hour                                      16:49
T   Long Hour                                       16:49:31
f   Date and hour                                   jeudi 26 septembre 2002 16:50
F   Long Date and hour                              jeudi 26 septembre 2002 16:50:51
g   Default Date                                    26/09/2002 16:52
G   Long default Date and hour                      26/09/2009 16:52:12
M   Month Symbol                                    26 septembre
r   Date string RFC1123                             Sat, 26 Sep 2009 16:54:50 GMT
s   Sortable string date                            2009-09-26T16:55:58
u   Sortable string date universal local hour       2009-09-26 16:56:49Z
U   Sortable string date universal GMT hour         samedi 26 septembre 2009 14:57:22 (oups)
Y   Year symbol                                     septembre 2002 
```

* * *

```
Spécificator    Type                       Example      Output Example
dd              Jour                       {0:dd}       10
ddd             Name of the day            {0:ddd}      Jeu.
dddd            Complet name of the day    {0:dddd}     Jeudi
f, ff, …        Fractions of seconds       {0:fff}      932
gg, …           position                   {0:gg}       ap. J.-C.
hh              Hour two digits            {0:hh}       10
HH              Hour two digits (24 hours) {0:HH}       22
mm              Minuts 00-59               {0:mm}       38
MM              Month 01-12                {0:MM}       12
MMM             Month shortcut             {0:MMM}      Sep.
MMMM            complet name of the month  {0:MMMM}     Septembre
ss              Seconds 00-59              {0:ss}       46
tt              AM or PM                   {0:tt}       ““
yy              Years, 2 digits            {0:yy}       02
yyyy            Years                      {0:yyyy}     2002
zz              Time zone, 2 digits        {0:zz}       +02
zzz             Complete Time zone         {0:zzz}      +02:00
:               Separator                  {0:hh:mm:ss}     10:43:20
/               Separator                  {0:dd/MM/yyyy}   10/12/2002 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-05T09:00:46.537

您可以使用该方法简单地格式化[DateTime并将其与](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)*字符串*的其余部分连接，而不是使用[字符串插值：](http://en.wikipedia.org/wiki/String_interpolation)[`ToString("u")`](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#UniversalSortable)

 *```
$startTime = Get-Date
Write-Host "The script was started " + $startTime.ToString("u") 
```*

# javascript - 如何在网页中存储值（字符串）

> ID：10025337
> 
> 赞同：3
> 
> 时间：2012-04-05T08:41:48.897
> 
> 标签：javascript, jquery

我想将某些东西的值存储在我的网页上，以供某些 javascript 函数以后使用。我想过做这样的事情，我有一个 id 为 CategoryID 的 div，然后将值作为 HTML 放入其中。

```
 <div id="CategoryID"></div>

   $('#categories > li > a').click(function (e) {
      e.preventDefault();
      $('#CategoryID').html = $(this).attr('data-value')
      refreshGrid('Reference');
   }); 
```

然后稍后在诸如 refreshGrid （和其他一些函数）之类的函数中，我可以得到这样的值：

```
 var categoryID = $('#CategoryID').val(); 
```

这似乎是存储临时变量的好方法吗？使用 HTML5 怎么样，是否有某种方法可以存储值而不必将它们放在 div 或类似的东西中。我所需要的只是有一个以某种方式存储在页面上的值。

还有一个问题。如果我存储该值是正确的方法：

```
$('#CategoryID').html = $(this).attr('data-value') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:47:23.847

请使用如下`HiddenField`方式存储变量`jquery`：

```
var tempvalue= $(this).attr('data-value');

$('#my-hidden-field').val(tempvalue); 
```

希望这对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:47:24.420

使用网页上的隐藏字段。例如。

```
<INPUT TYPE=HIDDEN NAME="customerId" VALUE="1234567"> 
```

然后`.val`在 JQuery 中使用这些值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T08:49:13.503

我有时会根据具体情况使用隐藏输入。

```
<input type="hidden" name="CategoryID" id="CategoryID" /> 
```

然后像这样检索它：

```
var categoryID = $('#CategoryID').val(); 
```

我使用输入，因为我觉得不是页面标记的 html 不应该存在。

有时最简单的事情就是将变量从服务器输出到脚本中。

使用 ASP.NET 的示例：

```
<script type="text/javascript">
//<!--

var categoryID = <%= <output value from server goes here> %>;

//-->
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T08:49:02.387

该函数`val()`获取元素的值。但只有输入有值，因此您应该使用隐藏输入来存储数据：

```
<input id="CategoryId" type="hidden" /> 
```

但通常您可以访问任何属性，如下所述。请注意，它`attr()`是旧的，新的函数名称是`prop()`-> 请参阅评论以获取有关`attr()`和的正确解释`prop()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T08:51:27.370

如果您热衷于将其存储在隐藏字段中，您应该尝试使用 HTML5 中引入的 localStorage API。

```
var idForStorage = $('#CategoryID').val();
window.localStorage.setItem('keyToId', idForStorage); 
```

并从 localStorage 中获取

```
var fetchedId = window.localStorage.getItem('keyToId'); 
```

注意：localstorage 只将值存储为字符串，记住这一点！:)

此外，如果您想兼容旧版浏览器，请不要忘记检查 localStorage 是否存在并实施不同的解决方案。

类似的东西

```
if(typeof(window.localStorage) !== 'undefined'){
    //set item or do whatever
} else {
    //implement other solution or throw an exception
} 
```

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T08:57:38.987

只是一个想法，但您是否考虑过将值存储在 javascript 变量中？如果您只在 javascript 中使用它，为什么还要将它放在隐藏字段或元素中呢？

如果您不使用命名空间/模块，只需在全局范围内声明您的变量，但如果您是，您可以将其存储在使用它的模块的范围内。

这种方法的唯一考虑是该变量将在页面刷新时被重置，但如果您使用服务器上的值，只需在脚本中，那应该没问题。

一般来说，如果服务器需要能够读取它，我只会使用隐藏输入。

**编辑**

作为对评论的回应，如果您明智地使用您的 javascript，其中包括使用命名空间，那么这种方法与使用“变量持有者”混淆您的标记相比具有一定的优雅性

一个非常快速的命名空间脚手架......

在名为 MyProject.Global.js 的文件中

```
//This function is truly global
function namespace(namespaceString) {
   var parts = namespaceString.split('.'),
        parent = window,
        currentPart = '';

   for (var i = 0, length = parts.length; i < length; i++) {
      currentPart = parts[i];
      parent[currentPart] = parent[currentPart] || {};
      parent = parent[currentPart];
   }

   return parent;
} 
```

在名为 MyProject.MyPage.Ui.js 的文件中

```
namespace('MyProject.MyPage');

MyProject.MyPage.Ui = function () {

   var self = this;
   self.settings = {};

   function init(options) {
      $.extend(self.settings, options);
        //any init code goes here, eg bind elements
        setValue();
      };
   };

   //this is considered a "private" function
   function setValue(){

       $('#categories > li > a').click(function (e) {
          e.preventDefault();
          self.settings.myValue = $(this).attr('data-value');
          refreshGrid('Reference');
       });
   }

   function getValue(){
     return self.settings.myValue;
   }

   //any function within this return are considered "public"
   return {
      init: init,
      getValue: getValue
   };
}; 
```

终于在你的页面...

```
$(document).ready(function () {
    var ui = new MyProject.MyPage.Ui();
    ui.init();
} 
```

那么在任何时候你都可以使用......

```
MyProject.MyPage.getValue() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T08:53:36.433

有三种方法可以根据需要存储值：

*   饼干：好的老方法。它在任何地方都受支持，但更适合需要在不同页面上保存的值，并且它有其他限制（例如大小、条目数等）。
*   SessionStorage：并非所有地方都支持，但有 shims。它允许您存储一个仅持续一个会话的值。例子：

    `sessionStorage.setItem('key', 'value')`

    `sessionStorage.getItem('key', 'value')`

这仅接受字符串作为键和值。如果要存储对象，可以使用`JSON.stringify`来存储它们，稍后使用`JSON.parse`.

*   LocalStorage：sessionStorage的兄弟，但没有时间限制。它允许您使用与 sessionStorage 相同的 API 来存储数据，并且会随着时间的推移而保留。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-05T08:54:10.670

> 还有一个问题。如果我存储该值是正确的方法：

`Data-`在jQuery 中使用属性更简单的方法是使用[`.data()`](http://api.jquery.com/data/)方法。

```
<body id="CategoryData" data-value1="someone" data-value2="sometwo">

....

alert( $("#CategoryData").data('value1') ); // popup with text: someone
alert( $("#CategoryData").data('value2') ); // popup with text: sometwo 
```

就个人而言，我宁愿将与项目关联的所有数据存储在包装器`Div`或其他元素中，并使用 jquery.data。

```
<table data-locationid="1">
  <tr data-personid="1">
    <td>Jon</td>
    <td>Doe</td>
  </tr>
  <tr data-personid="2">
    <td>Jane</td>
    <td>Doe</td>
  </tr>
</table> 
```

> HTML5 数据-* 属性
> 
> 从 jQuery 1.4.3 开始，HTML 5 的数据属性将被自动拉入到 jQuery 的数据对象中。jQuery 1.6 更改了对嵌入破折号的属性的处理，以符合 W3C HTML5 规范。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-05T08:55:02.710

如果您想将值存储在 JavaScript 的一部分中以便从另一部分访问，我只需使用一个变量：

```
var categoryID = null;  // set some kind of default

$('#categories > li > a').click(function (e) {
  e.preventDefault();
  categoryID = $(this).attr('data-value');
  refreshGrid('Reference');
}); 
```

然后稍后当您需要该值时，只需`categoryID`直接访问即可。

***还有一个问题。如果我存储值是正确的方法吗***

如果您确实想将该值设置为 div 元素的内容，您可以使用 jQuery 的`.html()`方法或非 jQuery`.innerHTML`属性：

```
$('#CategoryID').html( $(this).attr('data-value') );
// or
$("#CategoryID")[0].innerHTML = $(this).attr('data-value'); 
```

但是，如果您不想使用变量，那么最好使用其他答案中提到的隐藏输入而不是 div。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-05T08:55:02.900

为了浏览器兼容性，使用其他人建议的隐藏字段更明智。但是出于探索的原因，如果您想使用 HTML5，它提供了 WebStorage。有关更多信息，请查看[http://sixrevisions.com/html/introduction-web-storage/](http://sixrevisions.com/html/introduction-web-storage/)

此外，还有一个名为[Lawnchair](http://westcoastlogic.com/lawnchair/)的框架，它为需要轻量级、自适应、简单和优雅的持久性解决方案的 html5 移动应用程序提供解决方案。

# android - 片段 popBackStack()（或返回）失败

> ID：10025342
> 
> 赞同：0
> 
> 时间：2012-04-05T08:41:58.530
> 
> 标签：android, fragment

向我解释为什么这会失败？- 情况是：1 个活动 + 1 个 FrameLayout 内容 + 片段 - 接收新意图并在以下位置提取数据：onNewIntent(Intent intent) - 从该方法需要对片段堆栈执行“返回” -> m_FragmentManager.popBackStack(); - 如果失败：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
... android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
.. 
```

任何人？

# php - 内联 PHP（命令行）

> ID：10025344
> 
> 赞同：10
> 
> 时间：2012-04-05T08:42:01.563
> 
> 标签：php, shell, terminal, command-line-interface, interpreter

我想做类似*tryruby.org*的东西。我从用户那里取了一行（例如，`echo __FILE__`），我想在 PHP 中执行它并将输出返回给客户端。

我试着做`exec('php -r ' . $command, $output)`，但`$output`总是包含 PHP 帮助部分。

如何实现此功能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T08:47:28.777

为了使`php -r`您必须将要执行的代码放在`'`..您的代码..`'`

例子：

```
php -r ' $var = 34; print_r($var); ' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T09:17:32.287

看起来您的问题是您没有包装要执行的代码`' '`。您还需要警惕`'`代码中的特殊字符、转义序列等。

事实上，如果你坚持使用`exec()`，这样做可能会更好（完全避免担心转义等）：

```
$command = base64_encode($command);
exec("php -r 'eval(base64_decode(\"$command\"));'", $output); 
```

您*可以*使用[`eval()`](http://php.net/manual/en/function.eval.php)而不是您在上面发布的内容。

这里的主要问题（包括代码`eval()`和您的`exec()`代码）是从用户输入中获取 PHP 代码**根本不安全**：

> eval() 语言结构***非常危险***，因为它允许执行任意 PHP 代码。***因此不鼓励使用它。***如果您已仔细验证除了使用此构造之外别无选择，请特别注意***不要将任何用户提供的数据***传入其中，而无需事先正确验证。

### 建议

由于您想返回 PHP 代码的结果，您可能会使用 Ajax 做一些很酷的事情，您可以将 PHP 代码作为参数传递给脚本（可能是[Base64编码）：](https://en.wikipedia.org/wiki/Base64)

```
$code = base64_decode($_GET['code']);
// Clean the user input here
eval($code); 
```

使用 jQuery 的 Ajax 示例：

```
// assuming `code` contains the PHP code
var encoded = base64_enc(code);

$.get('execute.php?code=' + encoded, function(data) {
    var result = new String(data);
    // do something with the result here, such as displaying it
}, dataType='text'); 
```

有关 JavaScript 中的 Base64 编码，[请参阅此](https://stackoverflow.com/a/246813/1166205)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:52:59.630

[http://tryruby.org](http://tryruby.org)似乎有一个交互式 Ruby shell。这似乎是一个很好的起点。

下面是两个为 PHP 提供这种外壳的项目：[php_repl](https://github.com/ieure/php_repl)和[phpsh](http://www.phpsh.org/)。

另一部分是交互式 shell 的 Web 界面。对于这部分，我建议您看一下[repl.it](http://repl.it/)，它为多种语言提供此服务（但遗憾的是不是 PHP）。[这是](https://github.com/replit/repl.it)它的源代码的链接。

通过这种组合，您应该能够完成我们的项目。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T08:45:20.890

查找“eval()”，更重要的是，为什么 eval() 以及您尝试做的事情很难以安全的方式实现。例如，对输入的用户进行成像：

```
echo file_get_contents('/etc/passwd'); 
```

您需要做很多工作才能确保安全，包括监视和过滤从 eval'd 进程进行的所有系统调用。

干杯

# eclipse - Eclipse 跳转到下一个/上一个标记的事件

> ID：10025347
> 
> 赞同：2
> 
> 时间：2012-04-05T08:42:26.113
> 
> 标签：eclipse

如前所述， [Eclipse](https://stackoverflow.com/q/4019818/1314743)有很好的“标记出现”特性，它显示所选变量或方法的所有出现。

但我不知道在编辑器中跳转到下一个/上一个事件的任何捷径。快捷键 ctrl+k 不起作用，它仅与“增量查找”（ctrl+j）结合使用。

我正在使用 Eclipse 靛蓝。有没有捷径或其他解决方案？

**编辑：** 我认为，上面链接的问题中的答案和评论现在非常详尽。似乎没有多合一的解决方案（至少对于 Java 代码编辑）：

*   我不能让`Ctrl`+`(period)`工作，至少在它发现下一个问题的 Java 代码中。即使将其重新绑定到不同的快捷方式也不起作用。
*   `Ctrl`+`K`仅进行基于文本的搜索。如果要查找变量的所有出现，它会在任何标识符和注释中`i`查找任何字母。`i`
*   `Alt`使用+ `Shift`+重命名模式`R`，然后使用`Tab`和`Shift`+浏览出现的情况`Tab`很接近，但仅适用于您实际上可以为该源文件重命名的标识符。它不适用于没有可编辑源代码的库代码（尤其是 JDK）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-16T13:20:02.730

尝试**Ctrl** +和**Ctrl** + **。****_**

 ****在此之前，请确保您已在小导航下拉列表中***选中出现次数：***[![在此处输入图像描述](../Images/3df0f5194b7e1ae4fa00bbfbb7b80ba3.png)](https://i.stack.imgur.com/LKSn5.png)

您可以从 Window -> Preferences -> keys 更改键：

[![在此处输入图像描述](../Images/337ef59d1bd7e977b178744f63d6063a.png)](https://i.stack.imgur.com/3tc3w.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:00:08.573

这个对我有用。`Window -> Preferences -> General -> Keys`您可以通过查看并查找命令来确定您的键绑定是否已更改`Find Next`。您将在列中看到绑定，还可以检查它是否与对话框右下角`Binding`标题列表中的其他内容冲突。`Conflicts:`****

# javascript - 谷歌地图 - 根据地图 div 大小将标记移动到位置？

> ID：10025348
> 
> 赞同：1
> 
> 时间：2012-04-05T08:42:32.857
> 
> 标签：javascript, google-maps, google-maps-api-3

假设我有一个地图 div：

```
____________________
|                   |
|                   |
|                   |
|             m     |
|                   |
|                   |
|   x               |
|___________________| 
```

m 是标记现在的位置（实际上我并不关心标记最初的位置）。我想将标记 5% div 高度、8% div 宽度从左下角移动到 x 位置（按像素移动也可以）。鉴于地图大小可以是任何大小，我将如何将标记从 m 移动到地图中的位置 x。

注意：为了澄清，我不希望标记的位置（lat，lng）改变，而是移动地图，使标记在地图 div 中移动到位置 x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:58:33.060

好的，我整理了一些可用于特写变焦（大约 9 或更高）的东西。在世界视图缩放中，您会很快注意到，当标记靠近两极或在地图上可见国际日期变更线时，它会严重损坏。

嗯，这是一个起点。[http://jsfiddle.net/TQ8YY/1/](http://jsfiddle.net/TQ8YY/1/)

将标记拖到您感兴趣的区域。

# android - 如何在android中读取整个sqlite数据库

> ID：10025354
> 
> 赞同：0
> 
> 时间：2012-04-05T08:43:14.630
> 
> 标签：android, sql

请帮助我，我有一个包含字符串的数据库（例如 fotonames ）。我想将整个 fotonames 列读入一个数组列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:57:22.243

```
public Cursor getfotoname() throws SQLException
{
 String getRT = "SELECT fotonames from "+ TABLE_NAME+";";
 Cursor mCur = sqldb.rawQuery(getRT, null);
 return mCur;
} 
```

现在当你打电话

```
Cursor mCursor=null;

mCursor= DatabaseObject.getfotoname();

ArrayList<WhateverTypeYouWant> mArrayList = new ArrayList<WhateverTypeYouWant>();
for(mCursor.moveToFirst(); mCursor.moveToNext(); mCursor.isAfterLast()) {
// The Cursor is now set to the right position
mArrayList.add(mCursor.getWhateverTypeYouWant(WHATEVER_COLUMN_INDEX_YOU_WANT));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:51:30.733

看看这个教程会帮助你 [http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/)

在这里您可以了解如何从一列中获取所有值 [http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/3/#getrowasarray](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/3/#getrowasarray)

或者其他方式是

像这样触发查询

```
 public Cursor columnValues() throws SQLException{
            // TODO Auto-generated method stub

            Cursor mCursor = db.query(Course_Info_Table,
                              new String[] {Column1 , column2 },
                                            null,null, null, null, null);

                    //Cursor mCursor = mDb.rawQuery("Select",null);
                    if (mCursor != null)
                    {
                    mCursor.moveToFirst();
                    }

                    return mCursor;

        } 
```

并像接收它一样接收它

```
 ArrayList<String> list1  = new ArrayList<String>();

    ArrayList<String> list12 = new ArrayList<String>();

cursor = dbm.columnValueofCourse();
        cursor.moveToFirst();
        startManagingCursor(cursor);

        for (int i = 0; i < cursor.getCount(); i++) {

        String  reciv = cursor.getString(cursor
                    .getColumnIndex("column1"));

String      reciv3 = cursor.getString(cursor
                    .getColumnIndex("column2"));

            list1.add(reciv);
            list2.add(reciv3);
            cursor.moveToNext();
        } 
```

# java - REST 框架的性能（Java vs PHP vs 其他）

> ID：10025355
> 
> 赞同：1
> 
> 时间：2012-04-05T08:43:15.383
> 
> 标签：java, php, performance, web-services, rest

我们需要创建一个 RESTful 服务。我们想知道选择哪个现有框架。我们知道 Java 和 PHP，所以我们主要考虑这两个框架，但其他选项也是可能的。

你们对不同 REST 框架的性能有任何经验吗？有什么巨大的差异吗？是否有任何框架非常重，如果我们非常关心性能，我们应该避免使用它们吗？

您的所有想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:45:05.190

我会试试[PlayFramework](http://www.playframework.org/)。在它的 1.x 版本中，它使用起来非常简单，而且它的服务器占用空间非常小。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-05T08:46:09.637

从个人经验来看，我觉得用 PHP 建立 REST 框架比用 Java 更容易。试试[CodeIgniter](http://codeigniter.com/)。

但是，我不认为 PHP 或 Java 是最好的语言。如果可能，请尝试研究 Node.js 或 Ruby。

# java - 客户端请求的协议 SSLv3 未启用或不受支持 (IBM JDK 6.0SR10)

> ID：10025357
> 
> 赞同：2
> 
> 时间：2012-04-05T08:43:29.597
> 
> 标签：java, ssl, sslhandshakeexception, ibm-jdk

从 IBM JDK 6.0SR9 更新到 6.0SR10 后，我不断得到（在服务器端）：

```
java.io.IOException: javax.net.ssl.SSLHandshakeException: Client requested protocol SSLv3 not enabled or not supported
                at com.ibm.jsse2.kb.z(kb.java:107)
                at com.ibm.jsse2.SSLEngineImpl.b(SSLEngineImpl.java:4)
                at com.ibm.jsse2.SSLEngineImpl.c(SSLEngineImpl.java:224)
                at com.ibm.jsse2.SSLEngineImpl.wrap(SSLEngineImpl.java:377)
                at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:6) 
```

没有修改任何安全设置。知道如何（重新）启用 SSLv3 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:24:49.737

在以后的版本中，出于安全原因，默认情况下禁用 SSLv3。

以下技术说明应详细说明如何启用此功能。

[http://www-01.ibm.com/support/docview.wss?uid=swg21318567](http://www-01.ibm.com/support/docview.wss?uid=swg21318567)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T23:38:49.837

当客户端和服务器 SSL 协议设置不匹配时会发生异常。

以下客户端示例代码适用于配置支持 TLSv1.2 协议的服务器端：

```
String response = "";

URL url = new URL("https://localhost:9043/myservlet);

final SSLContext ctx = SSLContext.getInstance("TLSv1.2");
ctx.init(null, null, null);
// final String protoccol = ctx.getProtocol();

HttpsURLConnection.setDefaultSSLSocketFactory(ctx.getSocketFactory());

final HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();

conn.setReadTimeout(15000);
conn.setConnectTimeout(15000);
conn.setRequestMethod("POST");
conn.setDoInput(true);
conn.setDoOutput(true);

final OutputStream os = conn.getOutputStream();
final BufferedWriter writer =
  new BufferedWriter(new OutputStreamWriter(os, "UTF-8"));

writer.write(......);

writer.flush();
writer.close();
os.close();

final int responseCode = conn.getResponseCode();

if (responseCode == HttpsURLConnection.HTTP_OK) {
  String line;
  final BufferedReader br =
    new BufferedReader(new InputStreamReader(conn.getInputStream()));
  while ((line = br.readLine()) != null) {
    response += line;
  }
}

System.out.println("response: " + response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:56:11.563

SSLEngine.setEnabledProtocols()，但 SSLv3 当然应该默认启用。我会仔细检查你的断言，它没有被禁用。

# java - 从 16 位创建 4 个字节

> ID：10025358
> 
> 赞同：3
> 
> 时间：2012-04-05T08:43:35.633
> 
> 标签：java, serial-port, type-conversion, byte

我有 16 位。在每个位中，我可以设置一些属性并发送到 COM 端口（财务打印机）。例如：如果选中 0 位，则在选中时显示徽标。

我需要将这 16 位转换为 4 字节并发送到 COM 端口。例如：如果选中 0 位，则 4 个字节将为 0x30、0x31、0x30、0x30。我使用 COM 端口监控 API 获得的字节结果。

我必须做什么，从 16 位中获取 4 个字节？

其他示例：

*   1 位检查 - 0x30、0x32、0x30、0x30
*   2 位检查 - 0x30、0x34、0x30、0x30
*   检查 0 和 2 位 - 0x30、0x35、0x30、0x30
*   检查 0 和 9 位 - 0x30、0x31、0x30、0x32
*   检查 0,1,2,3,4,5,9 位 - 0x33, 0x46, 0x30, 0x32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:19:23.480

请注意，ASCII 中的 0x30 = '0'。在我看来，您将 16 位作为两个字节的十六进制传输，首先是 0-7 位，然后是 8-15 秒，即您要传输

*   位 4-7 的十六进制数字
*   位 0-3 的十六进制数字
*   位 12-15 的十六进制数字
*   位 8-11 的十六进制数字

我们需要更多的数据点来确定，但这适合你上面的例子：

```
bit 0 set encodes to string "0100" = 0x30 0x31 0x30 0x30
bit 1 set                   "0200" = 0x30 0x32 0x30 0x30
bit 2 set                   "0400" = 0x30 0x34 0x30 0x30
0+2                         "0500" = 0x30 0x30 0x30 0x30
0+9                         "0102" = 0x30 0x31 0x30 0x32
0,1,2,3,4,5,9               "3F02" = 0x33 0x46 0x30 0x32 
```

`n`即在Java中，如果你有你可能想要的单个整数中的位

```
String output = Integer.toHexString((n >> 4) & 0xf)
              + Integer.toHexString(n & 0xf)
              + Integer.toHexString((n >> 12) & 0xf)
              + Integer.toHexString((n >> 8) & 0xf);
byte[] data = output.toUpperCase().getBytes("ASCII"); 
```

通过字符串，或

```
byte[] data = new byte[4];
data[0] = (byte)((n >> 4) & 0xf);
data[1] = (byte)(n & 0xf);
data[2] = (byte)((n >> 12) & 0xf);
data[3] = (byte)((n >> 8) & 0xf);
for(int i = 0; i < 4; ++i) {
    data[i] += (data[i] < 10) ? '0' : ('A' - 10);
} 
```

避免字符串。

要将四个字节解析回单个 int，您可以使用

```
int bits = (((data[0] & 0xf) + ((data[0] >= 'A') ? 9 : 0)) << 4)
           | ((data[1] & 0xf) + ((data[1] >= 'A') ? 9 : 0))
           | (((data[2] & 0xf) + ((data[2] >= 'A') ? 9 : 0)) << 12)
           | (((data[3] & 0xf) + ((data[3] >= 'A') ? 9 : 0)) << 8); 
```

显然这里没有输入检查——我假设我们得到了预期格式的输入。括号中的主要位应该只解析字符串中的一个十六进制数字 - 如果需要，您可以重构它或实现更健壮的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:57:40.663

嗯，16 位是 2 个字节。因此，如果您将这 2 个字节分成两半，您将得到 4 个字节。

基本上是

```
byte b = ...;

byte firstHalf = (byte)((b & 0x0F) >> 4);
byte secondHalf = (byte)(b & 0xF0); 
```

但是请注意，这基本上只是拆分，不会提供您在问题中描述的结果。正如已经指出的那样，尚不清楚应该检查什么“0”位以及如何获得那些 0x30 0x31 0x30 0x30 值（仅将 16 位拆分为 4 和将它们分别放入一个字节中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:00:19.913

不明白你的意思：

你有 16 位，只有 2 个字节，所以你可以将前 2 个字节保留为 0，并在最后 2 个字节中使用你的 16 位...

```
Byte1: 0000 0000
Byte2: 0000 0000
Byte3: first 8 bits of your 16 bits
Byte4: second 8 bits of your 16 bits 
```

**编辑：**我不明白你是如何得到 0x30、0x30、0x31、0x30

0x 代表十六进制

0x30 十六进制 = 0011 0000 二进制所以我不明白为什么你会使用 0x30 而不是 0x00 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:17:54.497

这个问题有点容易解释，我假设您的意思如下：

> 如果设置了 16 位数据类型，我必须检查它的每一位。如果已设置，则必须将数据发送到 COM 端口。我需要发送什么数据取决于设置的位。顺便说一句，我需要发送的数据总是 4 个字节长。

让我们假设需要检查的位以 Java 的形式出现`int`，即一个 32 位整数，其中高 16 位始终为 0。我建议使用 BitSet 来检查位，使用数组来定义如果发送的内容该位已设置：

private static final byte[][] BYTES_TO_SEND = new byte[][] { { 0x30, 0x31, 0x30, 0x30 }, // 如果 bit #0 被检查则要发送的数据 { 0x42 }, // 如果 bit # 则要发送的数据1 已检查 // ... 如果位 #2、#3、... 已检查，则要发送的数据 };

私人输出流 com；

```
private static final byte[][] BYTES_TO_SEND = new byte[][] {
    { 0x30, 0x31, 0x30, 0x30 }, // data to send if bit #0 is checked
    { 0x42 }, // data to send if bit #1 is checked
// ... data to send if bit #2, #3, ... is checked
};

private OutputStream com;

public void initializeCOMFromBits(int bits) throws IOException {
  for (byte[] toSendIfSet : BYTES_TO_SEND) {
    if ((bits & 0x1) == 0x1) { // check if the lowest bit is set
      com.write(toSendIfSet);
    }
    bits >>>= 1; // shift all bits by one to the left
    // now the lowest bit if the bit that was second-to-lowest previously
  }
  assert bits == 0 : "There should be at most " + BYTES_TO_SEND.length + " bits set in the incoming bit set";
} 
```

如果您的位在 BitSet 中，则将循环更改为带索引的 for 循环，并使用 - 检查第 i 位，`.get(i)`如果已设置，则发送`BYTES_TO_SEND[i]`到 COM 端口。

# apache-flex - Flex Mobile - TileLayout 性能问题

> ID：10025359
> 
> 赞同：1
> 
> 时间：2012-04-05T08:43:38.720
> 
> 标签：apache-flex, list, mobile, tiles, flex-mobile

我正在为平板设备构建移动应用程序。
我对具有平铺布局的 List 组件有很大的性能问题。
我在屏幕上显示大约 20-24 个项目的页面，用户可以滚动浏览页面。不幸的是，列表组件生成新页面的速度非常慢。
总的来说，我用平铺布局测试了独立的 List ，它在每种情况下的性能都非常慢（我已经在 iPad1 和 iPad2 上测试过）。
如果您知道问题的一些解决方案，请提供建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:53:04.170

通常，Tile 的弯曲速度非常慢。这是因为它允许每个项目渲染器的大小可变，并且 measure / updateDisplayList 需要大量时间。

1.  在这种情况下，我建议您使用自定义（自己制作的）平铺列表并删除 flex 组件。如果仅将其用于布局，则可以手动/以编程方式计算图块中每个项目的位置并将其移动到右侧 x/y 像素。

2.  还要注意效果！它们可能在 AIR 模拟器或桌面浏览器中运行良好，但会占用移动设备上的大量资源。

3.  如果您仍然想使用 flex tile 组件，而不是创建自己的 tile 控件，那么我建议您对在其中显示的所有项目使用带渲染器的 fixed，并在 TileList declalation 中指定 columnWidth 和 rowHeight。这可能会提高一点性能...... :)

还提出一些示例代码并没有什么坏处。也许你做错了什么……不要：额外的失效，糟糕的渲染等等……！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T21:08:52.933

时间有点久了，具体不记得了。这是我使用的代码，但请记住，我编写的组件是用于特定目的的，并且包含一些不良做法以在很短的时间内完成特定问题。不过我希望有用。

**分页列表**

```
package components.pagedList
{
    import components.pagedList.vo.PageItemVo;      
    import mx.collections.ArrayCollection;
    import mx.collections.IList;
    import mx.core.IFactory;
    import mx.core.UIComponentGlobals;
    import mx.events.CollectionEvent;
    import mx.events.CollectionEventKind;

    import spark.components.List;
    import spark.layouts.HorizontalLayout;

/**
 * 
 */
public class PagedList extends List
{

    //--------------------------------------------------------------------------
    //
    //  Constructor
    //
    //--------------------------------------------------------------------------        

    public function PagedList()
    {
        super();
    }

    //--------------------------------------------------------------------------
    //
    //  Variables
    //
    //--------------------------------------------------------------------------    

    /**
     * Dimentions for the inner items should be specifyed because 
     * this component needs to know how many items can be placed in 
     * one page, but don't have the ability to create this items.
     * Default value is 1 to avoid division by zero.
     */
    public var innerItemWidth:Number = 1;

    public var innerItemHeight:Number = 1;

    /**
     * When inner item dimentions are set the component calculates how many items 
     * (per row and col) can be shown on one scren and pass these data to the page 
     * trough the dataProvider for the page.
     */
    private var pageRowCount:int = 1;

    private var pageColCount:int = 1;   

    /**
     * Count of the items that can fit in one page.
     * This count is used to slice the data into picies
     * with the same length. 
     */
    private var itemsPerPage:int = 0;   

    /**
     * Original data provider is saved here so we can re-slice it when
     * size change occure and listen for data change event.
     * 
     * TODO: implement the data chage listener
     */
    private var _originalDataProvider:IList;

    /**
     * 
     */
    private var cachedUnscaledWidth:Number = 0;
    private var cachedUnscaledHeight:Number = 0;

    //----------------------------------
    //  Custom tiles data
    //----------------------------------

    private var _customTilesData:Array;

    private var customTilesDataChanged:Boolean;

    public function set customTilesData(value:Array):void
    {
        _customTilesData = value;
        customTilesDataChanged = true;
        invalidateProperties();
    }

    public function get customTilesData():Array
    {
        return _customTilesData;
    }

    //----------------------------------
    //  dataProvider
    //----------------------------------

    private var originalDataProviderChanged:Boolean;

    [Inspectable(category="Data")]  
    /**
     * 
     */
    override public function set dataProvider(value:IList):void
    {
        if (_originalDataProvider)
            _originalDataProvider.removeEventListener(CollectionEvent.COLLECTION_CHANGE, originalDataProvider_collectionChangeHandler);     

        originalDataProviderChanged = true;

        if (value)
            value.addEventListener(CollectionEvent.COLLECTION_CHANGE, originalDataProvider_collectionChangeHandler, false, 0, true);

        _originalDataProvider = value;
        updatePagedData();
    }   

    /**
     * 
     */
    private function originalDataProvider_collectionChangeHandler(event:CollectionEvent):void
    {
        //trace('data changed:', event.kind, 'location:', event.location);
        if (event.kind == CollectionEventKind.REPLACE)
        {
            updateReplacedItem(event.location);
        }

    }   

    /**
     * 
     */
    private function updateReplacedItem(index:int):void
    {
        if (dataProvider)
        {
            var pageNumber:int = int(index / itemsPerPage);
            var itemIndex:int = index - (pageNumber * itemsPerPage);
            if (dataProvider[pageNumber])
            {
                var pageData:PageItemVo = PageItemVo(dataProvider[pageNumber])
                pageData.data[itemIndex] = _originalDataProvider[index];
            }
        }
    }   

    //----------------------------------
    //  innerItemRenderer
    //----------------------------------

    private var _innerItemRenderer:IFactory;

    private var innerItemRendererChanged:Boolean;

    public function set innerItemRenderer(value:IFactory):void
    {
        _innerItemRenderer = value;
        innerItemRendererChanged = true;
        invalidateProperties();
    }

    public function get innerItemRenderer():IFactory
    {
        return _innerItemRenderer;
    }

    //----------------------------------
    //  gaps
    //----------------------------------    

    /**
     * 
     */
    public function set verticalGap(value:Number):void
    {
        _verticalGap = value;
        gapsChanged = true;
        invalidateProperties();
    }

    public function get verticalGap():Number
    {
        return _verticalGap;
    }

    /**
     * 
     */
    public function set horizontalGap(value:Number):void
    {
        _horizontalGap = value;
        gapsChanged = true;
        invalidateProperties();
    }

    public function get horizontalGap():Number
    {
        return _horizontalGap;
    }

    private var _verticalGap:Number;

    private var _horizontalGap:Number;

    private var gapsChanged:Boolean;

    //--------------------------------------------------------------------------
    //
    //  Overridden methods
    //
    //--------------------------------------------------------------------------

    protected function updatePagedData():void
    {
        if (_originalDataProvider)
        {
            var pagedData:IList = createPagedData(_originalDataProvider);
            super.dataProvider = pagedData;
            invalidateProperties();
        }
    }

    private function createPagedData(value:IList):IList
    {
        var nestedData:Array = [];
        var dataList:Array = value.toArray();
        var pageData:PageItemVo;
        if (itemsPerPage)
        {
            var customTilesCount:int = customTilesData ? customTilesData.length : 0;
            var normalItemsPerPage:int = itemsPerPage - customTilesCount;
            while (dataList.length)
            {
                pageData = new PageItemVo();
                var data:Array = dataList.splice(0, normalItemsPerPage);
                for (var i:int = 0 ; i < customTilesCount ; i++)
                {
                    data.push( customTilesData[i] );
                }
                pageData.data = new ArrayCollection( data );
                pageData.colsCount = pageColCount;
                pageData.rowsCount = pageRowCount;
                pageData.itemWidth = innerItemWidth
                pageData.itemHeight = innerItemHeight;
                pageData.horizontalGap = horizontalGap;
                pageData.verticalGap = verticalGap;
                pageData.innerItemRenderer = _innerItemRenderer;
                nestedData.push(pageData);
            }
        }
        return new ArrayCollection(nestedData);     
    }   

    //----------------------------------
    //  Component lifecycle
    //----------------------------------    

    override protected function commitProperties():void
    {
        if (gapsChanged || innerItemRendererChanged || customTilesDataChanged)
        {
            updatePagedData();
            gapsChanged = false;
            innerItemRendererChanged = false;
            customTilesDataChanged = false;
        }       
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
    {
        super.updateDisplayList(unscaledWidth, unscaledHeight);
        caluclateItemsPerPage(unscaledWidth, unscaledHeight);
        // We have to update the dataProvider so it can re-slice the pages 
        // in case of orientation rotation or some other resize
        if (_originalDataProvider)
            if ( cachedUnscaledWidth != unscaledWidth || cachedUnscaledHeight != unscaledHeight )
                dataProvider = _originalDataProvider;

        cachedUnscaledWidth = unscaledWidth;
        cachedUnscaledHeight = unscaledHeight;
    }

    protected function caluclateItemsPerPage(unscaledWidth:Number, unscaledHeight:Number):void
    {
        var myLayout:HorizontalLayout = HorizontalLayout(layout);
        var horizontalPaddings:Number = myLayout.paddingLeft + myLayout.paddingRight;
        var verticalPaddings:Number = myLayout.paddingTop + myLayout.paddingRight;
        pageRowCount = (unscaledHeight - verticalPaddings) / (innerItemHeight + verticalGap);
        pageColCount = (unscaledWidth - horizontalPaddings) / (innerItemWidth + horizontalGap);
        itemsPerPage = pageRowCount * pageColCount; 
    }   

}
} 
```

**页面项目渲染器**

```
package skins.pagedList
{
    import components.pagedList.vo.PageItemVo;

    import flash.display.DisplayObject;

    import mx.collections.ArrayCollection;
    import mx.core.IDataRenderer;
    import mx.core.IFactory;
    import mx.core.UIComponent;
    import mx.events.FlexEvent;

    import spark.components.IItemRenderer;

//--------------------------------------
//  Events
//--------------------------------------

/**
 *  Dispatched when the <code>data</code> property changes.
 *
 *  <p>When you use a component as an item renderer,
 *  the <code>data</code> property contains the data to display.
 *  You can listen for this event and update the component
 *  when the <code>data</code> property changes.</p>
 * 
 *  @eventType mx.events.FlexEvent.DATA_CHANGE
 */
[Event(name="dataChange", type="mx.events.FlexEvent")]  

/**
 * 
 * ASDoc comments for this item renderer class
 * 
 */
public class PageItemRenderer extends UIComponent
    implements IDataRenderer, IItemRenderer
{

    //--------------------------------------------------------------------------
    //
    //  Constructor
    //
    //--------------------------------------------------------------------------        

    public function PageItemRenderer()
    {
        super();
        cacheAsBitmap = true;
    }   

    //--------------------------------------------------------------------------
    //
    //  Variables 
    //
    //--------------------------------------------------------------------------

    //----------------------------------
    //  data
    //----------------------------------

    /**
     *  @private
     */
    private var _data:PageItemVo;

    private var dataChanged:Boolean;

    [Bindable("dataChange")]

    /**
     *  The implementation of the <code>data</code> property
     *  as defined by the IDataRenderer interface.
     *  When set, it stores the value and invalidates the component 
     *  to trigger a relayout of the component.
     */
    public function get data():Object
    {
        return _data;
    }

    /**
     *  @private
     */
    public function set data(value:Object):void
    {
        _data = PageItemVo(value);
        colCount = _data.colsCount;
        rowCount = _data.rowsCount;
        itemWidth = _data.itemWidth;
        itemHeight = _data.itemHeight;
        horizontalGap = _data.horizontalGap;
        verticalGap = _data.verticalGap;
        innerItemRenderer = _data.innerItemRenderer;
        _tilesData = ArrayCollection(_data.data);

        dataChanged = true;

        if (hasEventListener(FlexEvent.DATA_CHANGE))
            dispatchEvent(new FlexEvent(FlexEvent.DATA_CHANGE));

        invalidateProperties();
    }   

    //----------------------------------
    //  gaps
    //----------------------------------    

    /**
     * 
     */
    public function set verticalGap(value:Number):void
    {
        _verticalGap = value;
        gapsChanged = true;
        invalidateProperties();
    }

    public function get verticalGap():Number
    {
        return _verticalGap;
    }

    /**
     * 
     */
    public function set horizontalGap(value:Number):void
    {
        _horizontalGap = value;
        gapsChanged = true;
        invalidateProperties();
    }

    public function get horizontalGap():Number
    {
        return _horizontalGap;
    }   

    private var _verticalGap:Number = 5;    

    private var _horizontalGap:Number = 5;

    private var gapsChanged:Boolean;

    //----------------------------------
    //  itemIndex
    //----------------------------------

    private var _itemIndex:int;

    public function get itemIndex():int
    {
        return _itemIndex;
    }

    public function set itemIndex(value:int):void
    {
        if (value == _itemIndex)
            return;

        invalidateDisplayList();
        _itemIndex = value;
    }       

    //----------------------------------
    //  showsCaret
    //----------------------------------

    private var _showsCaret:Boolean = false;

    public function get showsCaret():Boolean
    {
        return _showsCaret;
    }

    /**
     *  @private
     */    
    public function set showsCaret(value:Boolean):void
    {
        if (value == _showsCaret)
            return;

        _showsCaret = value;
        invalidateDisplayList();
    }

    //----------------------------------
    //  selected
    //----------------------------------

    private var _selected:Boolean = false;

    public function get selected():Boolean
    {
        return _selected;
    }

    public function set selected(value:Boolean):void
    {
        if (value == _selected)
            return;

        _selected = value; 
    }

    //----------------------------------
    //  dragging
    //----------------------------------

    private var _dragging:Boolean = false;

    public function get dragging():Boolean
    {
        return _dragging;
    }

    public function set dragging(value:Boolean):void
    {
        _dragging = value;
    }   

    //----------------------------------
    //  label
    //----------------------------------

    private var _label:String;

    public function get label():String
    {
        return _label;
    }

    /**
     *  @private  
     */
    public function set label(value:String):void
    {
        _label = value;
    }       

    //----------------------------------
    //  item properties
    //----------------------------------

    /**
     * Dimentions for the inner items should be specifyed because 
     * this component needs to know how many items can be placed in 
     * one page, but don't have the ability to create this items.
     * Default value is 1 to avoid division by zero.
     */
    public var itemWidth:Number = 1;

    public var itemHeight:Number = 1;

    /**
     * When inner item dimentions are set the component calculates how many items 
     * (per row and col) can be shown on one scren and pass these data to the page 
     * trough the dataProvider for the page.
     */
    public var rowCount:int = 1;

    public var colCount:int = 1;        

    private var _tilesData:ArrayCollection;

    private var sizeChanged:Boolean;

    private var _tileContainer:UIComponent;

    /**
     * 
     */
    private var innerItemRenderer:IFactory;

    //--------------------------------------------------------------------------
    //
    //  Overridden methods
    //
    //--------------------------------------------------------------------------

    //----------------------------------
    //  Component lifecycle
    //----------------------------------        

    override protected function commitProperties():void
    {
        super.commitProperties();

        if (dataChanged)
        {
            dataChanged = false;
            createTiledContent();
        }
        if (gapsChanged)
        {
            createTiledContent();
        }
    }

    override protected function measure():void
    {
        super.measure();

        measuredMinHeight = measuredWidth =  parent.width;
        measuredMinHeight = measuredHeight = parent.height;
    }   

    override protected function updateDisplayList(unscaledWidth:Number,
                                                  unscaledHeight:Number):void
    {
        super.updateDisplayList(unscaledWidth, unscaledHeight);
        var tileCntWidth:Number = colCount * (itemWidth + horizontalGap);
        _tileContainer.x = 0.5 * (unscaledWidth - tileCntWidth);
    }

    //--------------------------------------------------------------------------
    //
    //  Methods
    //
    //--------------------------------------------------------------------------    

    protected function createTiledContent():void
    {
        clearChildren();
        _tileContainer = new UIComponent();
        var itemsCount:int = _tilesData.length;
        var row:int, col:int, item:DisplayObject;
        for (var i:int = 0 ; i < itemsCount ; i++ )
        {
            row = int( i / colCount );
            col = i - row * colCount;
            if (_tilesData[i].hasOwnProperty("itemFactory"))
            {
                item = IFactory(_tilesData[i].itemFactory).newInstance();
            }
            else
            {
                item =  innerItemRenderer.newInstance();
            }
            Object(item).data = _tilesData[i];
            item.x = col * (itemWidth + horizontalGap);
            item.y = row * (itemHeight + verticalGap);
            _tileContainer.addChild(item);
        }
        addChild(_tileContainer);
        invalidateSize();
        invalidateDisplayList();
    }

    //--------------------------------------------------------------------------
    //
    //  Helper methods
    //
    //--------------------------------------------------------------------------    

    private function clearChildren():void
    {
        var numChildren:int = this.numChildren;
        for (var i:int = 0 ; i < numChildren ; i++ )
        {
            this.removeChildAt(0);
        }
    }       

}
} 
```

**PagedItemVo**

```
package components.pagedList.vo
{
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;

    import mx.collections.IList;
    import mx.core.IFactory;

    [Bindable]
    public class PageItemVo extends EventDispatcher
    {

        public var data:IList;

        public var rowsCount:int;

        public var colsCount:int;

        public var itemWidth:Number;

        public var itemHeight:Number;

        public var verticalGap:Number;

        public var horizontalGap:Number;

        public var innerItemRenderer:IFactory;

        public function PageItemVo(target:IEventDispatcher=null)
        {
            super(target);
        }
    }
} 
```

**滚动列表皮肤**

```
package skins.pagedList
{
    import flash.display.Graphics;
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    import mx.core.DPIClassification;
    import mx.core.ScrollPolicy;
    import mx.events.FlexEvent;
    import mx.events.TouchInteractionEvent;

    import spark.events.IndexChangeEvent;
    import spark.events.RendererExistenceEvent;
    import spark.skins.mobile.ListSkin;
    import spark.skins.mobile.supportClasses.MobileSkin;

    public class ScrollingListSkin extends ListSkin
    {
        private var pageIndicator:Sprite;
        private var indicatorSize:uint;
        private var _isHorizontal:Boolean;
        private var _suspendPageIndicatorShortcut:Boolean;

        public function ScrollingListSkin()
        {
            super();

            switch (applicationDPI)
            {
                case DPIClassification.DPI_320:
                {
                    indicatorSize = 32;
                    break;
                }
                case DPIClassification.DPI_240:
                {
                    indicatorSize = 24;
                    break;
                }
                default:
                {
                    indicatorSize = 16;
                    break;
                }
            }
        }

        //--------------------------------------------------------------------------
        //
        //  Overridden methods
        //
        //--------------------------------------------------------------------------

        override protected function createChildren():void
        {
            super.createChildren();

            scroller.setStyle("skinClass", PagedListScrollerSkin);

            // page indicator
            pageIndicator = new Sprite();

            // TODO (jasonsj): extend pageIndicator hit area to use the entire 
            // width/height of the List as a shortcut. Currently this only works
            // in the tiny area where the indicators are.
            //pageIndicator.addEventListener(MouseEvent.MOUSE_DOWN, pageIndicaterMouseHandler);
            //pageIndicator.addEventListener(MouseEvent.MOUSE_UP, pageIndicaterMouseHandler);
            //pageIndicator.addEventListener(MouseEvent.MOUSE_MOVE, pageIndicaterMouseHandler);

            addChild(pageIndicator);

            // listen for changes to the list
            dataGroup.addEventListener(FlexEvent.UPDATE_COMPLETE, dataGroupUpdateComplete);
            scroller.addEventListener(TouchInteractionEvent.TOUCH_INTERACTION_START, touchInteractionStart);
            scroller.addEventListener(TouchInteractionEvent.TOUCH_INTERACTION_END, positionChanged);
        }

        override protected function commitProperties():void
        {
            super.commitProperties();

            // isHorizontal
            /*var hScrollPolicy:Boolean = getStyle("horizontalScrollPolicy") == ScrollPolicy.ON;
            var vScrollPolicy:Boolean = getStyle("verticalScrollPolicy") == ScrollPolicy.ON;
            _isHorizontal = hScrollPolicy && !vScrollPolicy;*/
            _isHorizontal = true;
        }

        override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.drawBackground(unscaledWidth, unscaledHeight);

            var pos:Number = (isHorizontal) ? scroller.viewport.horizontalScrollPosition :
                scroller.viewport.verticalScrollPosition;
            var viewportSize:Number = (isHorizontal) ? scroller.viewport.width :
                scroller.viewport.height;

            var selectedIndex:int = Math.round(pos / viewportSize);
            var numElements:int = dataGroup.numElements;

            var g:Graphics = pageIndicator.graphics;
            g.clear();

            // if we have only one page there shouldn't be any scrollbar visuals
            if (numElements == 1) return;

            var axisPos:Number = 0;
            var centerPos:Number = indicatorSize / 2;
            var radius:Number = indicatorSize / 4;
            //TODO: make so the color could be specifyed outisde 
            var selectionColor:Number = 0x000000; //getStyle("selectionColor");

            //var elementsPerPage:int = Math.floor(unscaledWidth/FileIconItemRenderer.ITEM_WIDTH) * Math.floor(unscaledHeight/FileIconItemRenderer.ITEM_HEIGHT);

            for (var i:uint = 0; i < numElements; i++)
            {
                if (i == selectedIndex)
                    g.beginFill(selectionColor, 1);
                else
                    g.beginFill(0, .25);

                if (isHorizontal)
                    g.drawCircle(axisPos + centerPos, centerPos, radius);
                else
                    g.drawCircle(centerPos, axisPos + centerPos, radius);

                g.endFill();

                axisPos += indicatorSize;
            }

            var pageIndicatorX:Number = (isHorizontal) ? (unscaledWidth - axisPos) / 2 :
                unscaledWidth - (indicatorSize * 1.5);
            var pageIndicatorY:Number = (isHorizontal) ? unscaledHeight - (indicatorSize * 1.5):
                (unscaledHeight - axisPos) / 2;

            setElementPosition(pageIndicator, Math.floor(pageIndicatorX), Math.floor(pageIndicatorY));
        }

        override public function styleChanged(styleProp:String):void
        {
            super.styleChanged(styleProp);

            var allStyles:Boolean = !styleProp || styleProp == "styleName";

            if (allStyles || styleProp == "horizontalScrollPolicy" ||
                styleProp == "verticalScrollPolicy")
            {
                invalidateProperties();
                invalidateDisplayList();
            }
        }

        private function get isHorizontal():Boolean
        {
            return _isHorizontal;
        }

        //--------------------------------------------------------------------------
        //
        //  Event Handlers
        //
        //--------------------------------------------------------------------------

        private function dataGroupUpdateComplete(event:FlexEvent):void
        {
            invalidateDisplayList();
        }

        private function touchInteractionStart(event:TouchInteractionEvent):void
        {
            _suspendPageIndicatorShortcut = true;
        }

        private function positionChanged(event:TouchInteractionEvent):void
        {
            invalidateDisplayList();
            _suspendPageIndicatorShortcut = false;
        }

        private function pageIndicaterMouseHandler(event:MouseEvent):void
        {
            event.preventDefault();

            if (_suspendPageIndicatorShortcut)
                return;

            // Mouse events on the pageIndicator sprite will jump to the selected page
            var pos:Number = (isHorizontal) ? event.localX : event.localY;
            var size:Number = (isHorizontal) ? pageIndicator.width : pageIndicator.height;

            pos = Math.min(Math.max(pos, 0), size) - (indicatorSize / 2);

            var viewportSize:Number = (isHorizontal) ? scroller.viewport.width : scroller.viewport.height;
            viewportSize = viewportSize * dataGroup.numElements;

            var viewportPosition:Number = (pos / size) * viewportSize;

            if (isHorizontal)
                scroller.viewport.horizontalScrollPosition = viewportPosition;
            else
                scroller.viewport.verticalScrollPosition = viewportPosition;
        }
    }
} 
```

**例子：**

```
<pagedList:PagedList id="displayList" 
                 width="100%" height="100%"
                 itemRenderer="skins.pagedList.PageItemRenderer"
                 innerItemRenderer="components.pagedList.tiles.FolderTileItem"
                 innerItemWidth="146" innerItemHeight="150"
                 skinClass="skins.pagedList.ScrollingListSkin"
                 verticalScrollPolicy="off"
                 horizontalScrollPolicy="on"
                 pageScrollingEnabled="true"
                 horizontalGap="15" verticalGap="20"
                 contentBackgroundAlpha="0"
                 selectionColor="0xFFFFFF">
<pagedList:layout>
    <s:HorizontalLayout columnWidth="{displayList.width}" 
                        variableColumnWidth="false" 
                        gap="0"
                        paddingTop="30"/>
</pagedList:layout> 
```

不幸的是，我无法与您共享 FolderTileItem 源，但它是一个扩展 Sprite 的简单组件。

# x86 - 支持 SSE 的 x86 处理器上有多少个 XMM 寄存器可用？

> ID：10025360
> 
> 赞同：7
> 
> 时间：2012-04-05T08:43:38.480
> 
> 标签：x86, sse, cpu-registers, processor

如何在支持 SSE 的处理器上找出 XMM 寄存器的数量？

例如，在英特尔 X5550 上。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T08:58:22.277

XMM 寄存器的数量在所有支持 SSE 的处理器中都是固定的。如果 CPU 处于 32 位模式，则可以使用 8 个寄存器，从`xmm0`到`xmm7`，而如果 CPU 处于 64 位模式，则可以寻址 16 个寄存器，从`xmm0`到开始`xmm15`。这要归功于使用`REX.W`前缀。

# ruby-on-rails - 页面标题不起作用

> ID：10025361
> 
> 赞同：1
> 
> 时间：2012-04-05T08:43:50.660
> 
> 标签：ruby-on-rails, ruby, haml

页面标题不起作用？我是编码新手，不知道我是否犯了任何愚蠢的错误

*application_helper.rb*

```
def title(page_title)
  content_for(:title) { page_title }
end 
```

*应用程序.html.haml*

```
%title
  The Project. | #{yield :title || ""} 
```

*编辑.html.haml*

```
%h2.title Edit Project Details 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:55:01.733

你需要

```
= title "Edit Project Details" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:12:12.023

有几件事，首先看起来您的代码确实与 yield 方法的间距和使用混淆了。另一件事是，您实际上不必执行 || “”。如果没有可显示的内容，它将不会显示任何内容。

我的项目中有一些非常相似的东西。我所做的是使用这段代码

```
%title
  = "#{yield(:title)} | Company Name" 
```

正如评论者指出的那样，这可以进一步简化为：

```
%title
  #{yield(:title)} | Company Name 
```

最后，从另一篇文章中，您确实需要确保它说

```
= title("title") 
```

在您的代码中的某处。

# windows - 在哪里可以找到 ipseccmd.exe？

> ID：10025362
> 
> 赞同：0
> 
> 时间：2012-04-05T08:43:54.043
> 
> 标签：windows, ipsec

阅读这篇文章[http://support.microsoft.com/kb/813878](http://support.microsoft.com/kb/813878)

我有一个问题：我在哪里可以获得 Windows Server 2003 的 ipseccmd.exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:46:29.667

从您链接到的文章中：

> IPSeccmd.exe 是 Windows XP Service Pack 2 (SP2) 支持工具的一部分。

快速搜索表明这是下载页面：

*   [Windows XP Service Pack 2 支持工具](http://www.microsoft.com/download/en/details.aspx?id=18546)

# xslt - xsl 文档测试在 IE8 和 9 中失败？

> ID：10025366
> 
> 赞同：0
> 
> 时间：2012-04-05T08:44:09.113
> 
> 标签：xslt, xslt-2.0

我在 XLST 文档中有以下内容

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:str="http://xsltsl.org/string" xmlns:dt="http://xsltsl.org/date-time" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2005/xpath-functions" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes">
<xsl:if test="document('../folder/somefile.xml')">
    <!-- do stuff -->
</xsl:if> 
```

在 IE8 和 IE9 中尝试处理此文件会导致 JavaScript 错误，“系统无法找到指定的对象” - 并且转换错误。

我已经阅读了 XLST2.0 中的“可用文档”功能，但尝试使用它只会给我一个错误，即该功能不可用。

我见过这个问题：[How check document is available in xsl?](https://stackoverflow.com/questions/9212594/how-check-document-is-available-in-xsl) - 但我不想添加依赖于处理器的代码，所以我希望我只是错过了“doc-available”的一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:16:31.403

我认为[XSLT 1.0 规范](http://www.w3.org/TR/xslt#document)`document()`（IE 使用的 MSXML 是 XSLT 1.0 处理器）允许 XSLT 处理器执行“发出错误信号”或在调用失败时通过返回空节点集来继续。因此，MSXML 报告错误是允许的，而不是错误。您需要确保在 XSLT 之外该文件存在。

# .net - 在显示“添加”按钮之前检查数据库中是否存在一行

> ID：10025367
> 
> 赞同：0
> 
> 时间：2012-04-05T08:44:13.013
> 
> 标签：.net, vb.net, asp.net-mvc-3, linq, razor

我有一个包含联系人的表格，一个包含事件的表格，以及一个将联系人链接到这些事件的表格。

因此，在我看来，我选择一个事件，我可以看到允许添加到该事件的联系人列表。

目前，可以将联系人多次添加到事件中。

我想在显示按钮之前检查联系人是否已添加到事件中。

这是我的观点：

```
 <td>
      @Code
      Dim flag1 As Integer = 0
      flag1 = (From a In Model.trans_Event
               Where a.FK_id_contact = item.idContact And a.FK_id_Event = idEvent
               Select a.idtrans).Count()
      End Code

      @If flag1 = 0 Then
      <input type="button" value="add" />
      Else
      <input type="button" value="delete" />
      End If
 </td> 
```

这样的代码不起作用，我真的不知道如何检查联系人是否已经添加。这是我得到的错误：

```
 Exception Details: System.ArgumentNullException: Value cannot be null.
    Parameter name: source 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:49:31.087

在此代码处（如果您没有犯复制/粘贴错误）

```
a.FK.id_Event = idEvent 
```

您正在尝试获取 -> FK -> id_event 并且由于您的模型中没有 FK 对象，因此它分解为空异常。

查看应该是“a.FK_id_Event”的代码

```
flag1 = (From a In Model.trans_Event
               Where a.FK_id_contact = item.idContact And a.FK_id_Event = idEvent
               Select a.idtrans).Count()
      End Code 
```

编辑：

在过滤模型中的集合时，我更喜欢；

```
Model.trans_Event.Where(a => a.FK_id_contact == item.idContact && 
                             a.FK_id_Event == idEvent) 
```

# java - Java 文本文件 I/O

> ID：10025368
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:44:15.403
> 
> 标签：java, java-io

用java编写文本文件的快速方法是什么？目前我用这种方式写一个文本文件：

```
FileOutputStream fos = new FileOutputStream('FileName');                            
DataOutputStream dos = new DataOutputStream(fos);
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(dos, Charset.forName(this.config.getCharset()))); 
```

我的文件大小将增加 3 GB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:49:20.147

在写入大量数据后刷新缓冲区。FileOutputStream 对于文本文件应该足够了。无需使用[DataOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:52:08.157

怎么样

```
FileOutputStream fos = new FileOutputStream('FileName');
BufferedOutputStream bof = new BufferedOutputStream(fos);
bof.write("some text".getBytes()); // or just byte array 
```

或者

```
FileWriter fstream = new FileWriter("out.txt");
  BufferedWriter out = new BufferedWriter(fstream);
  out.write("Some text"); 
```

您不需要在此处使用 DataOutputStream。

# ios - 按位置或地区进行本地化？

> ID：10025372
> 
> 赞同：0
> 
> 时间：2012-04-05T08:44:29.160
> 
> 标签：ios, cocoa-touch, localization, location, nslocale

如何使本地化独立于操作系统设置？例如，如果设备语言是 en-US，但我希望用户能够将应用程序设置为使用希伯来语本地化工作。
就我而言——我有一个应用程序，在紧急情况下，用户（以色列）需要拨打一个号码（101）。
我为该应用程序进行了希伯来语和英语的本地化，当用户切换到英语语言时，拨号号码和图片将更改为 911，但是如果以色列的用户想在他的 iPhone 上使用英语语言怎么办？他不需要 911，他需要 101。
我想也许可以创建包含所有号码而不是特定号码的表格视图，但由于有多个号码，因此访问号码列表不会快速方便地拨号。
是否可以按位置或任何其他方式进行本地化？

我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:21:40.983

查询. `NSLocale`_ `NSLocaleCountryCode`from 的值`[NSLocale currentLocale]`不取决于语言设置，它们取决于区域设置。

这些是我 currentLocale 的值。语言设置为英语，地区设置为德国。

```
NSLocaleIdentifier   : de_DE
NSLocaleLanguageCode : de
NSLocaleCountryCode  : DE

preferredLanguages are: 

en,
fr,
de,
ja,
[...] 
```

更多花哨：使用地理定位来确定设备的实际位置。您的用户可能会出国旅行；-)

# c# - 使用我们的设置安装其他应用程序 - vs2010 桌面应用程序部署

> ID：10025384
> 
> 赞同：1
> 
> 时间：2012-04-05T08:45:26.053
> 
> 标签：c#, .net, deployment, installation, setup-deployment

我需要在 vs 2010 中使用我的设置嵌入 powerpoint 查看器。当用户运行我创建的设置时，PowerPoint 查看器设置会在安装过程中自动启动。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:05:38.097

通常添加现有的包作为先决条件。Visual Studio 安装项目不支持自定义先决条件创建。但是，这可以通过手动生成所需的清单来完成。

您可以在此处找到清单结构：http: [//msdn.microsoft.com/en-us/library/ms229223 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms229223(VS.80).aspx)

这些清单可以使用[Bootstrapper Manifest Generator](http://archive.msdn.microsoft.com/Wiki/View.aspx?ProjectName=bmg)工具自动生成。

生成包清单后，您可以将所有这些文件（包括包）添加到 Visual Studio 必备文件夹中的单独文件夹中，例如：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\ 
```

然后，您可以在设置项目属性页面中选择先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:04:13.380

将安装程序类添加到您的开发中

```
namespace CLT
{
    [RunInstaller(true)]
    public partial class ClientInstall : Installer
    {
        public ClientInstall()
        {
            InitializeComponent();
        }

        public override void Install(IDictionary stateSaver)
        {
                base.Install(stateSaver);
                System.Diagnostics.Process.Start(@"\Powerpoint.exe");
        }
} 
```

并记住将自定义操作添加到您的设置中

![在此处输入图像描述](../Images/274142572e53b3652ee92125ac8abe60.png)

# c# - 如何检查电子邮件地址是有效的 Lync 用户？

> ID：10025395
> 
> 赞同：1
> 
> 时间：2012-04-05T08:46:23.203
> 
> 标签：c#, lync, lync-2010

我尝试通过以下方法确认电子邮件地址是否是有效的 Lync 用户，但没有给出正确的结果。

```
LyncClient client = LyncClient.GetClient();
Contact contact = client.ContactManager.GetContactByUri("xxx@xxx.com"); 
```

**方法1：**

```
if(contact.UnifiedCommunicationType == UnifiedCommunicationType.Enabled)
{
}
else if(contact.UnifiedCommunicationType == UnifiedCommunicationType.NotEnabled)
{
}
else if(contact.UnifiedCommunicationType == UnifiedCommunicationType.Unknown)
{
} 
```

在这种方法中，我得到随机电子邮件地址的未知和有效 Lync 用户的 NotEnabled。但是，我没有得到“无效”。

**方法2：**

```
ContactType contact_type =                            (ContactType)contact.GetContactInfomration(ContactInformationType.ContactType);

if(contact_type == ContactType.Person)
{
} 
else if(contact_type == ContactType.Invalid)
{
}
else if(contact_type == ContactType.Unknown)
{
} 
```

在这种方法中，无论电子邮件地址如何，我都会得到“人”。因此，我不这就是方式。

你能告诉我如何实现这一目标吗？

> 注意：我要做的就是检查 Outlook 中传入电子邮件的发件人是否是有效的 lync 用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:58:40.843

最后，我找到了从电子邮件地址了解 lync 联合域的方法。

诀窍是对**“_sipfederationtls._tcp.domainname”的 srv 记录进行 nslookup**

[请在此处](https://dotnettv.wordpress.com/2012/04/18/how-to-find-a-domain-address-is-valid-lync-or-not-programmatically-do-nslookup-c/)找到 C# 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:54:49.450

您是否尝试过使用“sip:xxx@xxx.com”格式作为电子邮件地址 - 因为它正在查找 SIP 地址，而不是电子邮件地址。

MSDN 在这里有一个示例：http: [//msdn.microsoft.com/en-us/library/hh378561.aspx](http://msdn.microsoft.com/en-us/library/hh378561.aspx)

# php - 当 POST'ing Dropdowns 值时，只有第一个值被发布，第二个为空（使用 JSCRIPT，PHP）

> ID：10025396
> 
> 赞同：1
> 
> 时间：2012-04-05T08:46:26.120
> 
> 标签：php, javascript, ajax, post, drop-down-menu

编辑：我的主要代码不再起作用，这个功能应该起作用吗？

```
<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script>
var second_choice = $('#second-choice').val();
$("#first-choice").change(function() {
$("$second-choice").load("findModel.php?choice=" + $("#first-choice").val());
});
</script> 
```

这是相关的 PHP 文件：

```
<?php
include 'dbc.php';
$choice = mysql_real_escape_string($_GET['choice']);

$query="SELECT * FROM `cars` WHERE `DVLAMake`='$choice'";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result)) {
    echo "<option>" . $row{'DVLAModel'} . "</option>";
}
?> 
```

数据库连接有效。

#

加载 PHP 文件时会填充我的第一个下拉列表：

```
<form name="indexSearch" action="searchResults.php" method="POST">

<select id="first-choice">
<option selected value="base">Please Select</option>
<option value="VAUXHALL">VAUXHALL</option>
<?php 
$sql="SELECT DISTINCT `DVLAMake` FROM `cars`";
$result = mysql_query($sql);
while ($data=mysql_fetch_assoc($result))
{
echo "<option value =\"{$data[DVLAMake]}\" >{$data[DVLAMake]}</option>\n";
} 
?>
</select>

<select id="second-choice">
<option>Please choose from above</option>
</select>
<br />

<input type="submit" style="font-size:14px; padding:3;"value="Submit" size="20" />
</form> 
```

这行得通，然后在选择值时它调用一个函数，然后用我可以选择的选项填充第二个函数。但是，当我发布表单时，它不会采用第二个下拉选择值，因为它只是空的，但它确实采用了第一个下拉值选择值。

有什么理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:10:13.907

问题是第二个选择标签没有名称属性。如果它位于表单中，则仅当属性具有名称时，您才会通过 post 获取请求。如果您使用的是 jquery，您可以简单地通过 id 获取值，然后通过 ajax 发布它。在 jquery 中选择这样的。

```
var second_choice = $('#second-choice').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:14:50.953

你写了

```
$("$second-choice").load("findModel.php?choice=" + $("#first-choice").val()); 
```

代替：

```
$("#second-choice").load("findModel.php?choice=" + $("#first-choice").val()); 
```

**$** -> **#**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:58:27.053

您如何更改所选值？使用例如ajax？你是如何发送数据的？使用 ajax 或简单的 POST 并重新加载页面？

如果您使用 ajax 更改某些内容，则需要通过 ajax 发送数据。因为没有它，您将不会发送由 JS 生成的数据，而是由您的 PHP 脚本生成的数据。

# asp.net-mvc-3 - 如何在视图中呈现所有 html 元素

> ID：10025399
> 
> 赞同：0
> 
> 时间：2012-04-05T08:46:40.863
> 
> 标签：asp.net-mvc-3, razor

我想渲染视图中的所有 html 元素以获取包含在其中的数据。（即在段落标签“早上好”和另一个段落标签“祝你有美好的一天”中，如果我渲染段落标签，我会得到“早上好有一个美好的一天”。）因此，如果有人对此有任何想法，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:01:38.247

如果你想用 html 标签显示输出，那么试试这个

* * *

```
&lt; for less-than
&gt; for greater-than
&amp; for & 
```

* * *

或 htmlencode

# javascript - 我的应用程序突然禁用了 Javascript

> ID：10025402
> 
> 赞同：0
> 
> 时间：2012-04-05T08:46:49.737
> 
> 标签：javascript, facebook, facebook-apps

我的 FB 应用程序一直运行良好，而且我有一段时间没有进行任何更改。突然之间，Javascript 停止工作，我不知道为什么。这是一个简单的例子，说明过去有效但现在无效；

```
<a href="#" onclick="unlink(); return false;">Unlink Account</a>

<script>

    function unlink() {
    var dialog = new Dialog();
    var url = "unlink_url";
    dialog.showChoice('Unlink Account', 'Are you sure you want to unlink this account from your myFlashStore account?' ,'Yes','No');

    dialog.onconfirm = function(){ document.setLocation(url); };
}

</script> 
```

过去可以工作的非常简单的代码。现在，当我检查页面的来源时，`<script>`标签中的所有内容都被注释掉了，我收到了这条消息；

> 使用从 MY_URL 检索到的以下 FBML 呈现页面 您看到这个是因为您是应用程序的开发人员，并且此信息可能对您在调试时有用。FBML 不会显示给访问此页面的其他用户。（破折号替换为下划线）：

我不明白为什么它停止工作了，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:31:32.160

好吧，原来我的应用程序不是 iFrame 应用程序，它是老式的 FMBL 应用程序。不得不将其更改为 iFrame 应用程序并重新编码相当多的东西，这一切都奏效了！

# fluent-nhibernate - 具有 StructureMap 和 Fluent NHibernate 的拦截器

> ID：10025403
> 
> 赞同：4
> 
> 时间：2012-04-05T08:46:54.020
> 
> 标签：fluent-nhibernate, structuremap, interceptor

我已成功配置 StrctureMap 和 FluentNHibernate 以与无参数构造函数一起工作。我现在需要做的是用参数设置拦截器。

以下代码在我的 MVC 应用程序中运行良好：

```
protected void Application_Start()
{ 
    //Code removed from here to save space...

    ObjectFactory.Initialize(x => {
        x.For<IInterceptor>().Singleton().Use(context => new MyInterceptor());

        x.For<ISessionFactory>().Singleton().Use(context => CreateSessionFactory(context.GetInstance<IInterceptor>()));
        x.For<ISession>().HttpContextScoped().Use(context => context.GetInstance<ISessionFactory>().OpenSession());

        x.For<IAuditDao>().Use<AuditDao>().Ctor<ISessionFactory>().Is(context => context.GetInstance<ISessionFactory>());
    });
}

public static ISessionFactory CreateSessionFactory(IInterceptor interceptor)
{
    return Fluently.Configure()
        .Database(MySQLConfiguration
        .Standard
        .ConnectionString(c => c.FromConnectionStringWithKey("MySqlConnectionString")))
        .Mappings(m => { m.FluentMappings.Add<AuditItemMap>(); })
        .ExposeConfiguration(config => new SchemaUpdate(config).Execute(true, true))
        .ExposeConfiguration(config => config.SetInterceptor(interceptor))
        .BuildSessionFactory();
} 
```

我现在需要做的是将 AuditDao 的一个实例传递给拦截器。目前从 NHibernate 'EmptyInterceptor' 继承的 'MyInterceptor' 有两个构造函数：

```
public class MyInterceptor : EmptyInterceptor
{
    private IAuditDao AuditDao;

    public MyInterceptor()
    {

    }

    public MyInterceptor(IAuditDao auditDao)
    {
        AuditDao = auditDao;
    }
} 
```

现在显然 AuditDao 的一个实例需要一个 SessionFactory 的实例，而 SessionFactory 将需要一个 AuditDao 的实例。

如何解决这个循环引用问题？

# ios - 执行命令，didRegisterForRemoteNotificationsWithDeviceToken vs didFinishLaunchingWithOptions

> ID：10025408
> 
> 赞同：1
> 
> 时间：2012-04-05T08:47:15.023
> 
> 标签：ios, cocoa, delegates

我的类与协议（UIApplicationDelegate）

```
@interface BangAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
}
@property (nonatomic, retain) IBOutlet UIWindow *window;
@end 
```

和 BangAppDelegate 有方法

```
didRegisterForRemoteNotificationsWithDeviceToken 
```

和

```
didFinishLaunchingWithOptions 
```

`didRegisterForRemoteNotificationsWithDeviceToken`是注册APNS的功能。
我想知道执行顺序。
首先调用哪个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:52:57.623

是否首先使用选项完成启动，然后调用 didRegister/FailedToRegister，具体取决于向 APNs 服务器注册是否成功。

# xml - 如何向 XML (XSD) 架构中的复杂类型添加限制？

> ID：10025419
> 
> 赞同：7
> 
> 时间：2012-04-05T08:47:53.347
> 
> 标签：xml, xsd, schema, restriction

谁能帮我为这个模式文件添加一个限制（对于 OwnerEnglishName）？我知道如何用 simpletype 来做，而在 complextype 中我不知道怎么做。任何人都可以帮忙吗？

非常感谢。

原始 XML：

```
<PACIDemoSignedDoc PaciSDocID="HouseOwnerSignedEndorsement">  
  <OwnerEnglishName OENID="Name"></OwnerEnglishName>
</PACIDemoSignedDoc> 
```

架构（无限制）：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="PACIDemoSignedDoc" type="PACIDemoSignedDocType" />
  <xs:complexType name="PACIDemoSignedDocType">
    <xs:sequence>
      <xs:element name="OwnerEnglishName" type="OwnerEnglishNameType" />
    </xs:sequence>
    <xs:attribute name="PaciSDocID" type="xs:string" />
  </xs:complexType>
  <xs:complexType name="OwnerEnglishNameType">
    <xs:attribute name="OENID" type="xs:string" />
  </xs:complexType>
</xs:schema> 
```

限制代码：

```
<xs:restriction base="xs:string">
  <xs:minLength value="5"/>
  <xs:maxLength value="100"/>
</xs:restriction> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:24:30.620

这将做到这一点： -

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="PACIDemoSignedDoc" type="PACIDemoSignedDocType" />
    <xs:complexType name="PACIDemoSignedDocType">
        <xs:sequence>
            <xs:element name="OwnerEnglishName" type="OwnerEnglishNameType" />
        </xs:sequence>
        <xs:attribute name="PaciSDocID" type="xs:string" />
    </xs:complexType>
    <xs:complexType name="OwnerEnglishNameType">
        <xs:simpleContent>
            <xs:restriction base="NameType">
                <xs:minLength value="5"/>
                <xs:maxLength value="10"/>
            </xs:restriction>
        </xs:simpleContent>
    </xs:complexType>
    <xs:complexType name="NameType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="OENID" type="xs:string" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
</xs:schema> 
```

这是具有此架构的可接受 XML 示例

```
<?xml version="1.0" encoding="UTF-8"?>
<PACIDemoSignedDoc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PaciSDocID="gggg">
    <OwnerEnglishName OENID="9999">GGGGG</OwnerEnglishName>
</PACIDemoSignedDoc> 
```

# python - 无法使用星号拨打手机

> ID：10025422
> 
> 赞同：2
> 
> 时间：2012-04-05T08:47:55.797
> 
> 标签：python, voip, asterisk

我目前正在研究“电子邮件到语音通话”项目。使用 python，我提取了电子邮件并将其转换为语音并保存在 WAV 文件中。现在使用星号（我在我的 ubuntu 10.10 操作系统上安装了 Asterisk 10.2.1）我想通过我的系统向用户的手机（比如 919833000000 印度号码）发出呼叫。

我已经编写了一个 python 代码来连接到星号管理器界面。我还配置了 sip.conf 和 extensions.conf 文件以及 manager.conf。我已在 voip 提供商**voiceall.com**注册并拥有它的用户名密码。

现在，当我执行 python 代码时，代码正在执行而没有任何错误，但什么也没有发生。没有调用生成。谁能帮我解决这个问题。python代码如下：

```
import sys, os, socket, random
# Asterisk Manager connection details
HOST = '127.0.0.1'
PORT = 5038
# Asterisk Manager username and password
USER = 'MYUSERNAME'
SECRET = 'MYPASSWORD'
# Set the name of the SIP trunk to use for outbound calls
TRUNK = 'voiceall'

OUTBOUND = '919833000000'

# Send the call details to the Asteirsk Manager Interface
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
sleep(3)
s.send('Action: login\r\n')
s.send('Username: ' + USER + '\r\n')
s.send('Secret: ' + SECRET + '\r\n\r\n')
sleep(3)
s.send('Action: status\r\n')
data = s.recv(1024)
print data + '\n'
s.send('Events: off\r\n\r\n')
sleep(3)
s.send('Action: originate\r\n')
s.send('Channel: Sip/' + TRUNK + '/' + OUTBOUND + '\r\n')
s.send('WaitTime: 30\r\n')
s.send('CallerId: VOICEALL_USERNAME\r\n')
s.send('Application: playback\r\n')
s.send('Data: /home/Documents/newdemo1' + '\r\n')  #newdemo1 is the wave file
s.send('Context: testing\r\n')
s.send('Async: true\r\n')
s.send('Priority: 1\r\n\r\n')
sleep(10)
s.send('Action: Logoff\r\n\r\n')
s.close() 
```

我的 sip.conf 文件如下：

```
[general]                
register => VOICEALL_USERNAME:VOICEALL_PASSWORD@sip.voiceall.net:5038

[voiceall]
canreinvite=no
context=mycontext
host=sip.voiceall.net
secret=VOICEALL_PASSWORD ;your password
type=peer
username=VOICEALL_USERNAME ;your account
disallow=all
allow=ulaw

fromuser=VOICEALL_USERNAME ;your account
trustrpid=yes
sendrpid=yes
insecure=invite
nat=yes 
```

extensions.conf 文件如下：

```
[mycontext]

include => voiceall-outbound

[voiceall-outbound]
exten => _1NXXNXXXXXX,1,Dial(SIP/${EXTEN}@voiceall)
exten => _1NXXNXXXXXX,n,Playback(/home/Documents/demonew1)
exten => _1NXXNXXXXXX,n,Hangup()
exten => _NXXNXXXXXX,1,Dial(SIP/1${EXTEN}@voiceall)
exten => _NXXNXXXXXX,n,Playback(/home/Documents/demonew1)
exten => _NXXNXXXXXX,n,Hangup()
exten => _011.,1,Dial(SIP/${EXTEN}@voiceall)
exten => _011.,n,Playback(/home/Documents/demonew1)
exten => _011.,n,Hangup() 
```

请帮帮我，因为我是星号的新手。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:03:55.123

在我评论您的 origin 命令之前，需要注意一些事项：

1.  AMI over TCP 的 python 包装库已经存在：[starpy](http://www.vrplumber.com/programming/starpy/)。您可能想检查一下，因为它会减少为了让自己启动和运行而需要做的重新发明轮子的数量。

2.  通常，您可能不应该为 AMI 操作中的每个参数使用单独的 TCP 发送。相反，您应该分别发送每条消息。一般来说，starpy 通过将每个 AMI 操作视为键/值对的字典来很好地处理这个问题，这显然很好地映射到 AMI 的语法。如果您决定不使用 starpy，您可能仍想了解它们如何将通用字典映射到 AMI 操作。

3.  您在 manager.conf 中是否为您的用户提供了适当的身份验证类别？为了发起呼叫，您的用户将需要写授权上的发起类

在您的起源中，您尝试拨打 SIP/voiceall/919833000000。这意味着 Asterisk 将创建一个 SIP 通道并在上下文 voiceall-outbound 启动它的 pbx_thread（因为它是您指定的对等方的默认上下文），在与您指定的扩展匹配的扩展名处。

首先，您尝试放置的扩展名是 919833000000。您没有与此匹配的扩展名 - 您拥有的最接近的是 _NXXNXXXXXX。这指定它的模式匹配，第一个字符必须是数字 [2-9]，接下来的两个字符是数字 [0-9]，第四个字符是数字 [2-9]，接下来的六个字符为数字 [0-9]，共 10 个字符。您指定的扩展名是 12 个字符。我预计起源会失败。

让我们假设 origin 确实成功了，并且您有一个与 _NXXNXXXXXX 具有相同应用程序的模式匹配扩展。您发起的通道将与其他内容相关联 - 另一个上下文、扩展、拨号计划中的优先级或应用程序。在您的情况下，您已经指定了两者：要连接的应用程序（播放），您传递给它的数据，以及上下文和优先级（但没有扩展名）。那是无效的。来自 Asterisk 的“manager show command origin”：

要使用的扩展扩展（需要“上下文”和“优先级”）上下文要使用的上下文（需要“扩展”和“优先级”）优先级使用优先级（需要“扩展”和“上下文”）

通常，您不会将 Application/Data 与 Context、Exten、Priority 结合使用。当您只想对所拨打的内容执行非常简单的操作时，应用程序/数据选项存在 - 在您的示例中，播放消息符合要求，但总的来说，我更喜欢将其连接到拨号计划中的其他内容，所以我有更多的控制。我假设您想使用 Context,Exten,Priority - 在这种情况下，您可以执行以下操作：

```
[testing]
exten => internal_playback,1,NoOp()
same => n,Playback(/home/Documents/demonew1)
same => n,Hangup()

[voiceall-outbound]
exten => _9XXXXX000000,1,NoOp()
same => n,Dial(SIP/${EXTEN}@voiceall)
same => n,Hangup() 
```

你的起源看起来像这样：

```
Action: Originate
Channel: local/internal_playback@testing
Context: voiceall-outbound
Exten: 919833000000
Priority: 1 
```

您会注意到我们不再使用 SIP 通道来调用拨号方案。您仍然可以在您的来源中使用 SIP 通道 - 这实际上只是个人偏好。Dial 应用程序已经为我们创建了一个 SIP 通道并将其桥接到我们发起的任何内容，因此我们只使用本地通道。对于我们的本地频道，我们将一端连接到我们用来向被叫方播放声音的内部播放扩展，另一端连接到我们的出站扩展。

# iphone - 如何延迟执行 Segue

> ID：10025423
> 
> 赞同：12
> 
> 时间：2012-04-05T08:47:58.873
> 
> 标签：iphone, objective-c, ios5, uistoryboard, uistoryboardsegue

在我的故事板中，我有一个作为初始屏幕的视图。在这个视图中，我已经有一个像“打开应用程序”这样的按钮，它使用模态 segue 打开菜单视图。但我也希望屏幕自动执行 segue，比如 2 秒后出现视图。

这里有一些代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    [self performSegueWithIdentifier:@"splashScreenSegue" sender:self];
} 
```

如您所见，我已经使用 performSegueWithIdentifier 但它会立即执行。有没有办法让它延迟？

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-05T08:53:38.813

您可以在视图出现 2 秒后使用 GCD`dispatch_after`执行您的 segue 代码，例如：

```
- (void)viewDidAppear:(BOOL)animated 
{
    [super viewDidAppear:animated];

    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self performSegueWithIdentifier:@"splashScreenSegue" sender:self];
    });
} 
```

此外，请确保在覆盖 UIViewController 的生命周期方法时记得调用超级实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-08T07:16:01.617

我认为有一种更好的方法可以让控制器本身处理调度问题。你可以这样实现它：
首先创建一个这样的方法，稍后你将使用它的选择器

```
- (void)showAnotherViewController{  
    [self performSegueWithIdentifier:@"yourSegueToAnotherViewController" sender:self];
} 
```

然后，当您想在延迟后显示另一个视图控制器时，请在当前视图控制器中使用这行代码：

```
[self performSelector:@selector(showAnotherViewController) withObject:nil afterDelay:yourDelayInSeconds]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-27T11:26:40.357

您可以通过调用来实现：

```
let delayInSeconds = 0.8
let segueIdentifier = "your segue id"
DispatchQueue.main.asyncAfter(deadline: .now() + delayInSeconds) { [unowned self] in
    self.performSegue(withIdentifier: segueIdentifier, sender: nil)
} 
```

# delphi - 获取 IHTMLElement.body.innerHTML 作为 ansi 字符串

> ID：10025435
> 
> 赞同：2
> 
> 时间：2012-04-05T08:48:26.090
> 
> 标签：delphi, unicode, character-encoding, innerhtml, twebbrowser

我有带有 unicode 符号的 html 标记：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns:o = "urn:schemas-microsoft-com:office:office"><HEAD>
<META content="text/html; charset=windows-1251" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 9.00.8112.16441"></HEAD>
<BODY>
<P>&#968;</P></BODY></HTML> 
```

`&#968;`我使用 IHTMLTxtRange.pasteHTML 插入的符号。当我使用 HTMLDocument2.body.innerHTML 时，我想得到`<P>&#968;</P>`，但不是 Unicode 字符串函数的字符串表示形式，而是返回 Unicode BSTR，其中`&#968;`(ψ) 是 Unicode 字符 $03C8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:18:08.533

另一种解决方法

```
function GetInnerHTMLFromBody(const ADocument: IHTMLDOCUMENT2): AnsiString;
var
  ms: TMemoryStream;
  startBody: integer;
  stopBody: integer;
const
  bodyTag = '<BODY>';
  closedBodyTag = '</BODY>';
begin
  Result := '';
  if ADocument <> nil then
  begin
    ms := TMemoryStream.Create;
    try
      Succeeded((ADocument as IPersistStreamInit).Save(
        TStreamAdapter.Create(ms, soReference) as IStream, true));
      ms.Seek(0, soFromBeginning);
      SetLength(Result, ms.size);
      ms.ReadBuffer(Result[1], ms.size);
      // better to use regexpr
      startBody := AnsiPos(bodyTag, Result) + Length(bodyTag);
      stopBody := AnsiPos(closedBodyTag, Result);
      Result := Copy(Result, startBody, stopBody - startBody);
    finally
      ms.Free;
    end;
  end;
end; 
```

但是，此方法仅适用于 ANSI 编码的 html 文档。如果 Unicode 编码你需要做一个额外的从 Unicode 到 AnsiString 的转换：

```
if SameText(Utf8ToAnsi(UTF8Encode(HTMLDocument2.charset)),'unicode') then
... 
```

# android - android - 在其他活动（选项卡）中更新 ListView

> ID：10025437
> 
> 赞同：0
> 
> 时间：2012-04-05T08:48:33.573
> 
> 标签：android, android-intent

我有一个带有标签的应用程序。每个选项卡都是一个单独的活动。首先，我有一个蓝牙通信（发现、连接、发送和接收）。其次，我有一个 ListView，其中包含进出消息（SPP 配置文件），类似于聊天 - 还有一个 EditText 和一个通过 BT 发送消息的按钮。在单击“发送”按钮后，我尝试从该编辑文本发送消息，并通过意图的附加功能将文本发送到执行所有 BT 通信的其他活动。它运行良好，但始终显示该选项卡。有没有办法在不将意图用于的选项卡放在前面的情况下发送意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:57:30.593

如果不将活动置于最前面，则无法使用意图系统，因为如果活动未显示，则它处于暂停状态，因此不会执行任何操作。您应该创建一个服务，用于在您的活动之间进行通信。

[这里](http://developerlife.com/tutorials/?p=356)有教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:58:55.870

创建用于设置列表视图的静态方法。如果用户打开该屏幕，则为屏幕维护一个标志使该标志为“真”。每当您想更新列表视图时，如果该标志为真，请检查该标志，直接调用静态方法以呈现列表视图否则通过 tab.setchecked(screen_position) 加载屏幕。

# tfs - 通过构建服务器将文件添加到位于 TFS 上另一个位置的部署区域中的 TFS

> ID：10025439
> 
> 赞同：0
> 
> 时间：2012-04-05T08:48:41.540
> 
> 标签：tfs, msbuild

我有一个可以在我们的 TFS 构建服务器上编译和运行的应用程序。

现在我需要将文件放在 TFS 中的部署区域中，作为构建服务器上构建过程的一部分，这不是构建正在使用的工作区。

我曾尝试使用 MSBuild.ExtensionPack.VisualStudio.TfsSource 和工作目录，但这不起作用，我需要一个替代方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:10:16.980

We've done something similar by adding an msbuild proj to our source control and then after building our solution, we build this proj which then calls a copy task which moves some files to another folder. Think you can do something similar by editing the default template too (which we didn't want to do)

# iphone - iOS 检查服务器连接并成功下载

> ID：10025440
> 
> 赞同：0
> 
> 时间：2012-04-05T08:48:46.263
> 
> 标签：iphone, ios5

我正在制作一个从 plist 下载数据并在 tableview 中使用该数据的应用程序。有没有办法检查与 url 的连接是否成功，然后下载是否成功？或者也许是一个实现类似这样的教程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:13:19.427

你必须实现这个 NSURLConnection 的委托

```
`//send the request
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];` 
```

 `在连接失败的情况下，将执行此方法
 ````
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
NSlog(@"no connection");
}

`````

# forms - 以 i18n 形式获取对象

> ID：10025441
> 
> 赞同：1
> 
> 时间：2012-04-05T08:48:47.510
> 
> 标签：forms, symfony1, internationalization, doctrine

在嵌入式 i18n 表单中，我需要获取对象。在这个例子中，我得到了`ArtistImageTranslation`对象，但我需要`ArtistImage`.

有人可以帮助我，如何得到这个？

```
class ArtistImageTranslationForm extends BaseArtistImageTranslationForm
{
  public function configure()
  {
    $this->getObject();
    ....
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:27:36.883

尝试 ：

```
$artistimage = $this->getObject()->artistImage; 
```

或者

```
$artistimage = $this->getObject()->artist_image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:03:40.620

您是否尝试过以下操作？

```
$artistimage = $this->getObject()->getArtistImage(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:14:02.147

我今天在同一个问题上花了半天时间，看起来我终于找到了一些东西；）

首先，如果您需要访问表格“翻译”部分中的字段，您可以直接从表单中包含的对象访问它们。只需在不使用 getter 的情况下访问属性（我知道这不是好方法，但它有效）。所以你可以使用类似的东西：

```
$this->getObject()->id;
$this->getObject()->translated_name; 
```

等等

如果你真的需要原始对象，你可以像这样访问它：

```
$this->getObject()->getTable()->getRelation('ArtistImage')
     ->fetchRelatedFor($this->getObject()); 
```

希望这可以帮助。

# jquery - 选择对象的子项

> ID：10025443
> 
> 赞同：0
> 
> 时间：2012-04-05T08:48:56.907
> 
> 标签：jquery

我有这个规则的 ul > li 结构

```
<ul class='compare'>
    <li>Level 1
        <ul>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
        </ul>
    </li>
    <li>Level 1
        <ul>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
        </ul>
    </li>
    <li>Level 1
        <ul>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
            <li>Level 2</li>
        </ul>
    </li>
</ul> 
```

我`$("ul.compare > li").live(...);`用来将鼠标事件分配给 ul 的孩子

但现在我需要得到一个对象的孩子。假设`obj`是我的`$("ul.compare")`

如果我喜欢这样，`$("li", obj).live(...)`这会将事件分配给所有 li 而不仅仅是孩子。

我可以这样做，但我不喜欢

```
obj.children("li").each(function () {
    $(this).live(...);
}); 
```

有没有办法选择对象的所有子对象并`live`直接应用而不使用`.each()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:50:27.517

谢谢@Matt，您似乎无意中用您的评论回答了我的问题。解决方案是`.on()`

虽然这不起作用，但我们必须使用`.each()`分配`mouseover`给每个匹配的元素

```
//obj.children("li").children("ul").children("li").live("mouseover", function () {...}); //Does not work
obj.children("li").children("ul").children("li").each(function () {
    $(this).live("mouseover", function () {...});
}); 
```

这行得通，没有必要`.each()`

```
obj.children("li").children("ul").children("li").on("mouseover", function () {...}); 
```

# dataset - 如何将数据集从存储库下载到 WEKA

> ID：10025444
> 
> 赞同：0
> 
> 时间：2012-04-05T08:48:56.957
> 
> 标签：dataset, weka

如何从[http://mlr.cs.umass.edu/ml/datasets/Iris](http://mlr.cs.umass.edu/ml/datasets/Iris)下载数据集到 WEKA？并将其打开为 arff 请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:52:38.997

首先，下载这个[http://mlr.cs.umass.edu/ml/machine-learning-databases/iris/iris.data](http://mlr.cs.umass.edu/ml/machine-learning-databases/iris/iris.data)

然后，在此数据的顶部添加以下内容-

```
@RELATION iris

@ATTRIBUTE sepallength  REAL
@ATTRIBUTE sepalwidth   REAL
@ATTRIBUTE petallength  REAL
@ATTRIBUTE petalwidth   REAL
@ATTRIBUTE class    {Iris-setosa,Iris-versicolor,Iris-virginica}

@DATA 
```

你已准备好出发。

# ffmpeg - 使用 ffmpeg 创建 dnxhd mov 给出错误

> ID：10025457
> 
> 赞同：2
> 
> 时间：2012-04-05T08:49:42.533
> 
> 标签：ffmpeg, png, flags, mov

我正在尝试使用 ffmpeg 创建一个 dnxhd mov，但似乎无法使编解码器正常工作。

我创建了一个 1920x1080 .png 以转换为 .mov 格式

### 我的代码：（蟒蛇）

```
ffmpeg = "C:\\Users\\jared.glass\\Desktop\\mov_test\\ffmpeg_2012_04_02.exe"
images = "C:\\Users\\jared.glass\\Desktop\\mov_test\\Untitled.png"
output = "C:\\Users\\jared.glass\\Desktop\\mov_test\\dnx_hd_test.mov"
os.system(ffmpeg + " -i " + images + " -r 24 -s 1920x1080 -vcodec dnxhd -b:v 120m -an -y " + output ) 
```

### 我收到以下错误：

编码解码器“dnxhd”的像素格式“rgb24”不兼容，自动选择格式“yuv4 22p10le”[buffer @ 0000000001D0D950] w:1920 h:1080 pixfmt:rgb24 tb:1/1000000 sar:0/1 sws_param:[buffersink @ 0000000001D0DB50] 自动插入过滤器 'auto-inserted scale 0' 介于过滤器 'src' 和过滤器 'out' [scale @ 0000000001D0DDE0] w:1920 h:1080 fmt:rgb24 sar:0/1 -> w:1920 h:1080 fmt: yuv422p10le sar:0/1 flags:0x4 [dnxhd @ 0000000001D14740] 视频参数与 DNxHD 输出 #0 不兼容，mov 到 'C:\Users\jared.glass\Desktop\mov_test\dnx_hd_test.mov'：流 #0:0：视频：dnxhd、yuv422p10le、1920x1080、q=2-1024、90k tbn、24 tbc

流映射：流 #0:0 -> #0:0 (png -> dnxhd) 为输出流 #0:0 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height

任何人有任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:38:28.787

DNxHD 编解码器仅支持少数属性（比特率、帧率、宽度、高度等）组合。对于您选择的 24fps 帧速率和 1080p 分辨率的组合，比特率应该是 115M 而不是 120M。

# c# - 多个会话由实时服务器中 Visual Studio 2008 中的 dotnet Web 应用程序在 oracle db 中创建

> ID：10025458
> 
> 赞同：1
> 
> 时间：2012-04-05T08:49:46.233
> 
> 标签：c#, .net, oracle, c#-3.0

我在 vs2008 和数据库 oracle 中有 web 应用程序。在我的应用程序建立连接以从数据库中获取数据的地方，oracle 数据库中不维护任何会话。

但是当我在生产中将我的应用程序部署在 Web 服务器 IIS 6.0 中时。每个请求，由应用程序发送到数据库以获取数据，在 oracle 数据库中创建会话。

它通过应用程序在数据库中创建多个会话。

任何人都可以帮助解决它并找出根本原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:26:14.037

检查是否正在关闭和处理您的连接和命令对象。还要检查配置文件中的连接池设置。默认情况下应该打开。最初打开的会话数取决于池大小。

# symfony-1.4 - 解析 URL 后的空模块和/或操作

> ID：10025460
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:49:57.400
> 
> 标签：symfony-1.4

我更改了我的在线站点，在在线服务器中，我在 schema.yml 文件中创建了新模块。但是上面的错误正在出现。我删除了捕获文件内容。在同样的错误出现之后。

解析 URL “/Planbook/planbook_new” (/) 后的空模块和/或操作

```
 #planbook  
                     planbook:
                     url:  /planbook
                     param: { module: planbook, action: index }
                      most_recent:
          url:  /planbook/most_recent
          param: { module: planbook,action: mostrecent }
        planbook_view:
        url: /planbook/planbook_view
        param: { module:planbook,action: view }
        plan_new:
        url:  /planbook/plan_new
        param: { module: planbook,action: new }
        planbook_edit:
        url:  /planbook/planbook_edit
        param: { module: planbook, action: edit }   
        highly_recommended:
        url:  /planbook/highly_recommended
        param: { module: planbook,action: recommended }
       mytrack:
       url:  /mytrack
       param :{ module: planbook,action: mytrack }
       plan_mate:
       url:  /planbook/plan_mate
       param: { module: planbook, action: plan_mate }

      #layer
      layer:
      url:   /layer
     param: { module: layer, action: index }
     layer_new:
     url:   /layer/new
      param: { module: layer, action: new }
     layer_edit:
     url:   /layer/edit
     param: { module: layer, action: edit }
     layer_delete:
     url:   /layer/delete
     param: { module: layer, action: delete }
     layer_view:
    url:   /layer/view
    param: { module: layer, action: view }

             <a href="<?php echo url_for('/Planbook/planbook_new') ?>"
             <a href="<?php echo url_for("@planbook_new") ?>" 
```

嗨，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:18:48.310

您必须记住的几件事

1.  通过使用确保没有缓存文件，`symfony cc`或者您可以手动删除缓存文件夹的内容。
2.  确保数据库连接配置正确，`databases.yml`因为登录页面可能不需要与数据库连接，而其他页面则不然。
3.  确保`rewrite_module`已启用（我希望您使用的是 wamp，这使得启用它变得简单）
4.  确保`cache`和`log`文件夹具有写入权限（我认为这在 Windows 机器中不会成为问题）
5.  您也可以考虑通过[http://www.symfony-project.org/gentle-introduction/1_4/en/05-Configuring-Symfony](http://www.symfony-project.org/gentle-introduction/1_4/en/05-Configuring-Symfony)

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T09:14:07.493

要执行的几件事：

*   检查你的错误日志
*   使用您的开发控制器（类似于 frontend_dev.php）查看错误
*   并向我们​​展示错误。

我认为它与 htaccess 无关，因为您可以显示登录页面。

# html - 将表格中的行元素居中

> ID：10025461
> 
> 赞同：0
> 
> 时间：2012-04-05T08:49:59.820
> 
> 标签：html

我有一个宽度为 222px 的 html 表格

在里面我有一个宽度定义为 160px 的单行。

在这一行内，有一列与该行的宽度相同。

我的问题是，如何将此行对齐到表格的中心。

我试过 align="center" 和 style="float:center;" 但这些仅适用于包含的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:07:15.493

但如果你真的，真的必须使用表格，这里是如何设置它的样式：

```
.resultset {
  width:222px; border:1px solid;
  border-collapse:separate; border-spacing:30px 2px;
}
.resultset td {
  border:1px solid;
} 
```

边框间距中的 30px 是表格宽度和单元格宽度之间水平差的一半。

请参阅[jsFiddle](http://jsfiddle.net/zj48R/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:56:43.313

你可以这样试试

```
 <table width="222px" align="center">
 <td width="31px"></td>
 <td width="160px">test</td>
 <td width="31px"></td>
 </table> 
```

在这里测试：[http ://www.webmasterorbit.com/wysiwyg-html-tester.html](http://www.webmasterorbit.com/wysiwyg-html-tester.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:58:07.783

同意昆汀的观点。有一个 1x1 的桌子是没有意义的。

尝试以下。

```
<div style="margin: 0px auto; position: relative; width: 222px;">
....your content
</div> 
```

您可能想为 div 创建一个 CSS 类。我个人不喜欢内联样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:13:17.400

你必须使用这个

```
<td align = 'center'>Blah blah</td> 
```

使用这个不会工作

```
<tr align = 'center'></tr> 
```

# php - 使用 JQuery.Ajax 更改其他文件中的内容

> ID：10025462
> 
> 赞同：3
> 
> 时间：2012-04-05T08:50:02.300
> 
> 标签：php, jquery, iframe

我在我的应用程序中使用了一个 iFrame，它允许用户上传一个 CSV 文件，其中包含有关要添加到数据库中的新国家/地区的信息。我想要的是，一旦 CSV 文件被处理到数据库中，显示数据库中当前国家/地区的现有选择框应该使用新添加的 CSV 文件条目进行更新。

我正在制作 ajax 调用，例如

```
 $(document).ready(function(){
    jQuery.ajax({
        type: "POST",
        url: "get_all_countries.php",
        data: '',
        cache: false,
        success: function(response)
        {
            $("#all_countries_select_box").html("<select name='all_countries' id='all_countries' MULTIPLE size='8' style='min-width:250px;'>"+response+"</select>");
        }
    });
}); 
```

我唯一的问题是 id 'all_countries_select_box' 在另一个名为 'manage_countries.php' 的 PHP 文件中。有没有办法从 iFrame (upload.php) 中的文件更改该文件的内容。如果没有，什么可能是最好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:53:29.617

如果你想从 iframe 内部访问父窗口，你应该使用 window.parent

```
 success: function(response)
    {
        var parentJQuery = window.parent.jQuery;
        parentJQuery("#all_countries_select_box").html("<select name='all_countries' id='all_countries' MULTIPLE size='8' style='min-width:250px;'>"+response+"</select>");
    } 
```

如果您要修改的文件位于 iframe 中，您应该这样做

```
 success: function(response)
    {

        $('#idoftheiframe').contains().find("#all_countries_select_box").html("<select name='all_countries' id='all_countries' MULTIPLE size='8' style='min-width:250px;'>"+response+"</select>");
    } 
```

# mysql - 存储大量列的最佳数据库设计？

> ID：10025466
> 
> 赞同：1
> 
> 时间：2012-04-05T08:50:11.993
> 
> 标签：mysql, database, performance

**情况：**我们正在开展一个项目，该项目将数据馈送读入我们公司的数据库。这些数据馈送可以包含大量字段。我们将这些字段与某些列匹配。

目前我们有大约 120 种类型的字段。这些都需要一个专栏。我们需要能够过滤和排序所有列。

问题是我不确定哪种数据库设计最适合这个。我正在使用 MySQL 来完成这项工作，但我愿意接受建议。目前我正计划制作一个包含所有 120 列的表格，因为这是最自然的做事方式。

**选项：**我的其他选项是存储键和值的元表。或者使用基于文档的数据库，这样我就可以访问变量模式并在需要时对其进行缩放。

**问题：** 存储所有这些数据的最佳方式是什么？行数可以达到 100k 行，我需要一个可以非常快速地选择、排序和过滤的存储。

**更新：** 有关使用的更多信息。XML 提要将从该表中实时生成。我们说的是每小时 100 - 500 个请求，但这会越来越多。这些字段不会定期更改，但可能每 6 个月更改一次。我们还将每天更新数据源。因此，检查项目是否已更新并删除旧项目并添加新项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:57:29.643

100k 行的 120 列是不够的信息，它只真正给出了一个指标：大小。另一个是交易。您在这里谈论每秒多少笔交易？

是经理每周运行一次报告的每晚更新，还是每小时一百万页请求？

在达到 10m 记录表或每秒数百个查询之前，我通常不需要开始寻找“聪明”的解决方案。

哦，*不要*使用键值对表。它们在关系数据库中不是很好，因此请坚持使用正确的类型字段。

我个人会建议坚持传统的每字段一列的方法，并且只有在测试表明它确实不正确时才偏离此方法。

关于检索，如果 INSERTS/UPDATES 只是每天发生，那么我认为在服务器端进行一些仔细的索引，以及在生成 XML 的地方进行良好的缓存，应该可以大大减少服务器命中。例如，您说“我们将每天更新数据馈送”，那么就不需要每次都查询数据库。虽然，每小时 1000 次只有每分钟 17 次。这可能会四舍五入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:45:22.100

我现在正在做一个类似的项目，从网上下载转储并将它们加载到数据库中，将更改合并到主表中并正确调整字典表。

首先，您知道您将使用的数据。因此有必要提前对其进行分析并选择最佳的表格/列布局。如果所有 120 列都包含文本数据，那么单行将占用几个 K 字节的磁盘空间。在这种情况下，您将希望使所有查询具有高度选择性，以便使用索引来最小化 IO。对于这样的设计，全面扫描可能需要大量时间。您没有说明您的 500/h 请求有多大，每个请求会提取一行、一小部分行还是大部分（最多整个表）？

其次，查看数据，您可能会勾勒出许多列，这些列将具有一组有限的值。我更喜欢对此类列进行以下转换：

*   建立一个字典表，为其制作一个整数PK；
*   用字典中的 PK 替换主表列中的实际值。

转换是由用 C 编写的触发器完成的，所以虽然它给了我上传惩罚，但我确实有一些好处：

*   减少数据库和主表的总大小；
*   数据库和操作系统缓存频繁访问的数据块的更好选择；
*   更好的查询性能。

第三，尝试根据您将要进行的提取来拆分数据。通常情况下，表中只有 30-40% 的字段通常被所有查询使用，其余 60-70% 均匀分布在所有查询中并部分使用。在这种情况下，我建议相应地拆分主表：将始终使用的字段提取到单个“主”表中，并为其余字段创建另一个。事实上，您可以有几个“另一个”，在单独的表中逻辑分组数据。

在我的实践中，我们有一个包含客户详细信息的表格：姓名详细信息、地址详细信息、状态详细信息、银行详细信息、账单详细信息、财务详细信息和一组自定义注释。对此类表的所有查询都是昂贵的，因为它在我们的大多数报告中都使用过（报告通常执行完整扫描）。将此表拆分为一组较小的表并在其上构建一个带有规则的视图（以使外部应用程序满意），我们已经设法获得了令人愉快的性能提升（抱歉，不再有数字了）。

总结一下：您知道您将使用的数据，并且您知道将用于访问您的数据库、分析和设计的查询。

# jquery - onselect 后刷新日期选择器

> ID：10025467
> 
> 赞同：1
> 
> 时间：2012-04-05T08:50:12.580
> 
> 标签：jquery, datepicker

我正在为我的应用程序使用 jquery datepicker。

我想突出显示用户选择的日期。用户将选择一个日期，该日期将作为假期添加到数据库中，并且该日期应突出显示。我已经在数据库中有一些日期，这些日期将在使用 beforeShowDay 事件之前突出显示，并且我还禁用了周末。

一切正常，只是在将其添加到数据库后我无法突出显示该日期。只有当我重新加载日历时它才会突出显示。

我在互联网上搜索但没有任何明确的想法，建议在很多地方使用 multidatepicker 但重点是一次我只选择一个日期将其添加到数据库然后选择其他日期。

请建议我哪里出错了。我的代码是——

```
var dates = [ <? php echo $holidays; ?> ];

$(document).ready(function () {
    $("#calendardisplay").datepicker({
        dateFormat: 'yy-mm-dd',
        beforeShowDay: highlightDays,
        onSelect: dateSelected
    });

    function dateSelected(dateText, inst) {
        $.post('/postChannelHoliday.php', {
            'date': dateText
        }, function (data) {
            alert('Successfully Added');
        });
    }
}

function holiday(date) {
    for (var i = 0; i < dates.length; i++) {
        if (new Date(dates[i]).toString().substr(0, 16) == date.toString().substr(0, 16)) {
            return [true, 'ui-state-highlight'];
        }
    }
    return [true, ''];
}

function highlightDays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
    if (noWeekend[0]) {
        return holiday(date);
    } else {
        return noWeekend;
    }
}
}); 
```

我包括一个 php 文件来获取存储在数据库中的日期以在日历中突出显示它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:38:38.690

而不是`alert`您需要更新假期列表（看起来像`dates`全局对象），而不是通过调用[刷新](http://jqueryui.com/demos/datepicker/#method-refresh)来强制更新日期选择器。

# cocos2d-iphone - CCLabelBMFont 内存使用情况

> ID：10025468
> 
> 赞同：0
> 
> 时间：2012-04-05T08:50:16.333
> 
> 标签：cocos2d-iphone

我是否正确理解 CCLabelBMFont 只加载一次字体纹理，无论您有多少标签，因此 10 个标签不会超过 1 个标签的内存需求，或者换句话说，任何和所有标签的实际内存使用量约为相当于字体纹理本身的内存使用？

我问是因为我更喜欢使用 CCLabel，但是当我将它与 UILable 进行比较时，UILabel 的分辨率要清晰得多；我不确定造成这种情况的原因，但 CCLabel 看起来并不那么好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:39:34.157

是的。

cocos2d 使用的每个纹理只缓存一次。CCTextureCache 会这样做，无论创建或加载纹理的类如何。内存方面，使用 1 个 CCLabelBMFont 和 1000 个之间的唯一区别只是 CCLabelBMFont 实例的内存。每个实例大约 500 字节。

# c++ - 链表中的线性搜索 [语言：C++ 编译器：Dev-Cpp 4.9.9.2]

> ID：10025469
> 
> 赞同：1
> 
> 时间：2012-04-05T08:50:18.940
> 
> 标签：c++

我遇到了问题，似乎找不到解决方案..

```
int linearSearch(nodeptr list,char search){
    int pos =0;
    if(list==NULL)
        return -1;
    while(list->info!=search && list!=NULL){
        pos++;
        list=list->next;
    }
    if(list==NULL)
        return -1;
    else
        return pos;
} 
```

我总是遇到运行时错误.. :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:52:14.820

```
while(list->info!=search && list!=NULL) 
```

应该：

```
while(list!=NULL && list->info!=search) 
```

这称为**[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。**
当您使用`&&`第一个表达式时，保证在第二个表达式之前执行**内置原始类型**^([#1])。

在您的情况下，取消引用发生在`NULL`检查之前，因此，当`list == NULL`您最终取消引用`NULL`并导致**未定义的行为**和崩溃时。

在 sugeested 解决方案中：
如果`list == NULL`则不会评估第二个条件。

* * *

参考：
^([#1]) **C++03 标准 1.9.18：**

> 在以下表达式的评估中
> 
> ```
> a && b
> a || b
> a ? b : c
> a , b 
> ```
> 
> 使用这些表达式中运算符的内置含义，在对第一个表达式 (12) 求值之后有一个序列点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:52:45.540

您没有检查`list`此处的有效性：

```
while(list->info!=search && list!=NULL) 
```

尝试检查`list!=NULL`之前`list->info`。

另外，不要使用 name `list`，它是标准库容器的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:53:54.960

`&&`条件按照指定的顺序进行评估，因此在下一次迭代期间何时`list`进入`NULL`循环时，您首先尝试执行`list->info != search`导致访问冲突的操作。您需要将条件反转为`list != NULL && list->info != search`。

# javascript - Jquery-Mobile：如果我指定 pageid，Changepage 不起作用我也无法将数据传递到另一个页面

> ID：10025470
> 
> 赞同：0
> 
> 时间：2012-04-05T08:50:33.613
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

我正在使用 jquery-1.6.4.js、jquery.mobile-1.0.1 和 phonegap。我无法使用目标页面的 pageid(#target) 使用 ChangePage 导航到另一个页面。如果我使用 targetpage.html 它可以正常工作，但目标页面仍然能够接收数据。

从 SourcePage.html 调用以下脚本

```
 $('#btnaddEntry').click(function(e){
                    e.preventDefault();
                    $('#hipage').jqmData('id',0);
                    $.mobile.changePage('#hipage');
               }); 
```

目标页面.html

```
 <body>
                <div data-role="page" id="hipage">
                    <div data-role="content">
                            Hi
                    </div>

                    <script type="text/javascript">
                        $('#hipage').live('pageshow' , function(event , ui){
                        var bookId = $('#hipage').jqmData('id');
                          if(bookId != null){
                           alert( bookId );
                          }
                          else{
                            alert( "No Data" );
                          }
                        });
                    </script>
                </div>
            </body> 
```

我尝试了各种事件和其他一些解析 window.location.href 但似乎没有任何帮助的解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:59:05.973

终于找到了答案 [http://blog.digitalbackcountry.com/2011/12/passing-data-between-pages-in-jquery-mobile/](http://blog.digitalbackcountry.com/2011/12/passing-data-between-pages-in-jquery-mobile/)

# java - 访问被拒绝 - 获取文件的属性？

> ID：10025482
> 
> 赞同：2
> 
> 时间：2012-04-05T08:51:08.663
> 
> 标签：java, file-io, properties, access-denied

我正在运行一个程序来列出存储在文件夹中的所有文件的信息。

我想获取文件的属性（对我来说最重要的是文件大小，但我还想获取其他属性，如修改日期等）。

我的问题是当我访问另一个程序实际使用的文件时，我无法获取`BasicFileAtrributtes`文件。我尝试使用`File`, `URL`, `RandomFileAcces`, 但所有这些都需要打开文件，并抛出异常，如：

`java.io.FileNotFoundException: C:\pagefile.sys (Access is denied)`

java中是否有任何选项来获取此属性？我不喜欢使用任何额外的库，以保持应用程序的小尺寸。

应用程序基于 java JRE7。

我`java.nio.file.SimpleFileVisitor`用来访问所有文件。这是我的代码片段，其中出现错误：

```
@Override
public FileVisitResult visitFileFailed(Path file, IOException exc){
    FileInfo temp=new FileInfo(new FileInfo().repairName(file.toString()));
    temp.isLeaf=true;
    temp.fName=temp.fName.replace(strIn, "");
    File fis=null;
    try {
            fis=new File(file.toAbsolutePath().toString());
            if(fis.exists())
                System.out.println("exists");
            if(fis.isFile())
                System.out.println("isFile");
            System.out.println(file.toAbsolutePath().toString());
            temp.fSize=new BigInteger(new Long(fis.length()).toString());     
    } catch(Exception e){
        e.printStackTrace();
    }

    node.add(temp, true);

    FileListCreator.jProgressBar.setValue(++count);
    return CONTINUE;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:57:17.423

这对我来说很好：

```
File temp = new File("c:\\pagefile.sys");
System.err.println(temp.length());
System.err.println(temp.lastModified()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:13:58.260

如果方法[java.io.File.exists()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#exists%28%29)返回 false，并且文件`C:\pagefile.sys`存在于您的文件系统中，那么您指定的文件路径不正确。

以下代码适用于我的机器：

```
package q10025482;

import java.io.File;

public class TestFile {
    public static void main(String[] args) {
        String fileName = "C:/System Volume Information";//"C:/pagefile.sys"
        File file = new File(fileName);
        System.out.println("\nFile " + file.getAbsolutePath() + " info:");
        System.out.println("Exists: " + file.exists());
        System.out.println("Is file: " + file.isFile());
        System.out.println("Is dir: " + file.isDirectory());
        System.out.println("Length: " + file.length());
        System.out.println();
    }
} 
```

这是结果输出：

```
File C:\System Volume Information info:
Exists: true
Is file: false
Is dir: true
Length: 24576 
```

# mapping - Automapper 复杂映射

> ID：10025483
> 
> 赞同：5
> 
> 时间：2012-04-05T08:51:11.590
> 
> 标签：mapping, automapper

如何映射以下内容：

```
public abstract class PersonBase
{
   public Address Address { get; set; }         
}

public class Address
{
  public string AddressHome { get; set; }
  public int PostalNumber { get; set; }
}

public class PersonEditVM : PersonBase
{ 
   public int PersonId { get; set; }
}

public PersonEntity
{
  public int PersonId { get; set; }
  public string AddressHome { get; set; }
  public int PostalNumber { get; set; }
} 
```

我想映射`PersonEntity`到`PersonEditVM`.

编辑：**喝杯咖啡后解决，但如果它是更清洁的解决方案会很好吗？**

```
Mapper.CreateMap<PersonEntity, PersonEditVM >()                
                .ForMember(d=>d.Address, s=>s.MapFrom(p=> new Address{
                    AddressHome = p.AddressHome,
                    PostalNumber = p.PostalNumber
                    })); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:23:38.143

这是一种方法，它将您的`Adress`（顺便说一句正确拼写`Address`）映射拆分为另一个`CreateMap`调用：

```
Mapper.CreateMap<PersonEntity, PersonEditVM>()
    .ForMember(dest => dest.Adress, opt => opt.MapFrom(src => src));

Mapper.CreateMap<PersonEntity, Adress>()
    .ForMember(dest => dest.AdressHome, opt => opt.MapFrom(src => src.AdressHome))
    .ForMember(dest => dest.PostalNumber, opt => opt.MapFrom(src => src.PostalNumber)); 
```

# php - 正则表达式获取两行之间的内容

> ID：10025484
> 
> 赞同：1
> 
> 时间：2012-04-05T08:51:18.763
> 
> 标签：php, regex

好吧，我有一个大文件，有一些内容需要分隔，内容位于 and 之间 `- - - - - - - - - - [ Ø¹Ù†ÙˆØ§Ù† ]`， `- - - - - - - - - - [ Ø§Ù†ØªÙ‡Ø§Ù‰ Ø¹Ù†ÙˆØ§Ù† ]` 有什么方法可以使用正则表达式和 php 来获取这些内容？

确切的格式是这样的：

```
- - - - - - - - - - [ عنوان ]
في حد اللواط
- - - - - - - - - - [ انتهاى عنوان ]

ومنها قوله سبحانه : ولوطا إذ قال لقومه : أتأتون الفاحشة وأنتم تبصرون أئنكم لتأتون
الرجال شهوة من دون النساء بل أنتم قوم تجهلون ، فما كان جواب قومه إلا أن قالوا أخرجوا

- - - - - - - - - - [ عنوان ]
في حرمة اللواط
- - - - - - - - - - [ انتهاى عنوان ]
في حرمة اللواط
ثم إنه لا شك في حرمة اللواط بل إن حرمته من ضروريات الدين ودل
عليها الكتاب المبين ( 1 ) وسنة سيد المرسلين وأهل بيته الطاهرين صلوات الله 
```

继续...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:58:24.630

使用此代码，

```
$lines = preg_split("/[\r\n]+/u", $str, -1, PREG_SPLIT_NO_EMPTY);
$data = array();
$start = '
    - - - - - - - - - - [ عنوان ]
    ';
$end = '
    - - - - - - - - - - [ انتهاى عنوان ]';
$start = trim($start);
$end = trim($end);
$process = false;
foreach($lines as $line){
    if(mb_strpos($line, $start, 0, "utf-8")!==false){
        $process=true;
    }elseif(mb_strpos($line, $end, 0, "utf-8")!==false){
        $process=false;
    }elseif($process){
        $data[] = $line;
    }
}
print_r($data); 
```

**笔记：**

1.  由于 LTR 方向，很难输入确切的短语。所以我使用修剪技术。

[**样本**](http://ideone.com/HGQCS)

# javascript - ThreeJs THREE.Mesh.position 问题

> ID：10025487
> 
> 赞同：1
> 
> 时间：2012-04-05T08:51:34.140
> 
> 标签：javascript, three.js

我对three.js 完全陌生，只是想掌握three.js 库。我有一个球体渲染到屏幕，但我不知道它是什么 .position 成员正在引用，它似乎不是屏幕坐标。它的 x0 点似乎在屏幕的一半左右（我可以处理和理解），但它的 y0 大约是屏幕底部的 1/3，如果我移动它说 300，它不会移动 300 像素。

我有点超出了我的深度，只是破解了某人的示例代码以试图抓住它，但这让我感到虚张声势。我试过查看 3js API，但没有找到任何答案。

我会发布相关代码以防万一那里出现问题。

```
 <script src="js/Three.js"></script>
    <script src="js/Stats.js"></script>
    <script src="js/mDetector.js"></script>
    <script src="moddShape.js"></script>
    <script language="javascript" type="text/javascript"></script>
    <script>
        var SCREEN_WIDTH = window.innerWidth;
        var SCREEN_HEIGHT = window.innerHeight;
        var container,stats;
        var camera, scene;
        var canvasRenderer, webglRenderer;
        var mesh, zmesh, geometry, pointLight, pmesh, sphere, sphereMaterial;
        var mouseX = 0, mouseY = 0;
        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;
        var render_canvas = 1; 
        var render_gl = 1;
        var has_gl = 0;
        var targetX = 0, targetY = 0;
        var CameraZPos = 240;

        document.addEventListener( 'mousemove', onDocumentMouseMove, false );
        document.addEventListener( 'mousedown', handleMouseEvent, false );

        init();
        animate();

        function init() 
        {
            container = document.createElement( 'div' );
            document.body.appendChild( container );
            camera = new THREE.PerspectiveCamera( 90, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 100000 );
            camera.position.z = CameraZPos;
            scene = new THREE.Scene();
            // RENDERER
            webglRenderer = new THREE.WebGLRenderer
            (
                {
                    antialias: true
                }
            );
                webglRenderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );
                webglRenderer.domElement.style.position = 'relative';
                container.appendChild( webglRenderer.domElement );
                has_gl = 1;

            // STATS - FPS
            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            stats.domElement.style.left = '0px';
            stats.domElement.style.zIndex = 0;
            container.appendChild( stats.domElement );

            { 
                createScene(0, 100, 5, 0 ) 
            };

            // LIGHT
            var pointLight = new THREE.PointLight( 0xFFFFFF );
            // set its position
            pointLight.position.x = 10;
            pointLight.position.y = 50;
            pointLight.position.z = 130;
            // add to the scene
            scene.add(pointLight);
        }

        function createScene(x, y, z, b ) 
        {
            // create the sphere's material
            sphereMaterial = new THREE.MeshLambertMaterial(
            {
                // red.
                color: 0xCC0000
            });
            // set up the sphere vars
            var radius = 50, segments = 16, rings = 16;
            // create a new mesh with sphere geometry -
            sphere = new THREE.Mesh( new THREE.SphereGeometry(radius, segments, rings), sphereMaterial);
            sphere.position.set( x, y, z ); 
            sphere.scale.set( 1, 1, 1 );
            sphere.overdraw = true;
            // add the sphere to the scene
            scene.add(sphere);
        }

        function onDocumentMouseMove(event) 
        {
            mouseX = ( event.clientX - windowHalfX );
            mouseY = ( event.clientY - windowHalfY );
        }

        function animate() 
        {
            requestAnimationFrame( animate );
            render();
            stats.update();//Update FPS
        }

        function handleMouseEvent(mouseEvent) 
        {
            targetX = mouseX;
            targetY = mouseY;
            //Text field printouts
            //Positions relevent to 0 0 midscreen
            document.myform.XY_Coords.value = "X Pos " + targetX + "\n" + "Y Pos " + targetY;
            //Positions relevent to 0 0 top left
            document.myform.XY_Coords.value += "\n\nX Pos 2 " + mouseEvent.clientX + "\n" + "Y Pos 2 " + mouseEvent.clientY;

        } 

        function render() 
        {
            if (sphere.position.x < targetX)
            {
                sphere.position.x += .1;
            }
            if (sphere.position.y < targetY)
            {
                sphere.position.y += .1;
            }
            if (sphere.position.x > targetX)
            {
                sphere.position.x -= .1;
            }
            if (sphere.position.y > targetY)
            {
                sphere.position.y -= .1;
            }               
            camera.lookAt( scene.position );
            document.myform.shipCoords.value = "ShipX " + sphere.position.x + "\nShipY " + sphere.position.y + "\nShipZ " + sphere.position.z;
            if ( render_gl && has_gl ) webglRenderer.render( scene, camera );
        }
    </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:54:28.013

坐标不使用像素表示。它们是更通用的“单位”类型。我认为您想阅读更多有关 WebGL（和 3D 基础知识）的内容，以更好地理解和使用 Three.js。

使用该透视相机，您可以使用以下方法使球体居中：

```
createScene(0, 0, 0, 0); 
```

您还需要更改 y 轴增量的符号（方向）。`sphere.position.y += .1;`必须是`sphere.position.y -= .1;`而且`...-= 1;`必须是`...+= 1;`

# javascript - JS/JQuery - 如果输入字段是第一个和/或最后一个字符，则从输入字段中删除空格

> ID：10025488
> 
> 赞同：0
> 
> 时间：2012-04-05T08:51:35.397
> 
> 标签：javascript, jquery, search

如果空格字符是搜索查询中的第一个或最后一个（或两者）字符，我有一个站点搜索（使用检查和剃刀）会中断。例如“hello”和“hello world”都可以正常工作，但“hello”和“hello”不能。在使用 JS/JQuery 提交输入字段之前，是否可以删除诸如此类的任何空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:55:42.463

我想你想要的是 JQuery.trim()

[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:17:32.167

尝试将此正则表达式用于您的搜索字符串：

```
// presume searchStr = '" hello"' or '"hello "' or '" hello world   "'
searchStr.replace(/(")\s+|\s+(")/g,'"'); //=> "hello" or "hello world" 
```

考虑到您选择的答案，引号 ( `"`) 不包括在内？在那种情况下`trim`就足够了。在非 jquery 脚本中：

```
searchStr.replace(/^\s+|\s+$/g,''); 
```

# mysql - Matlab 查询生成器：定义 ODBC 数据源

> ID：10025490
> 
> 赞同：1
> 
> 时间：2012-04-05T08:51:38.993
> 
> 标签：mysql, database, matlab, database-connection

我正在使用 matlab 数据库工具箱从服务器中提取数据。除了如何使用 sql 查询从 matlab 建立连接之外，我对 SQL 数据库并不熟悉。我如何检查 matlab 正在使用哪些驱动程序来访问数据库，因为我通过查询生成器中的“定义 ODBC 数据源”错误地将驱动程序更改为 MYSQL ODBC 5.1 驱动程序，因此

```
con_semilib = database('checkdatabase','root','*******')
e=exec(con_semilib,['SELECT *FROM movies WHERE movie_id=1 ']);
e=fetch(e);
e.Data %e.Data is giving me ans=0 
```

有什么建议，我对数据库工具箱不太熟悉。感谢添加它，在我弄乱这个定义的 ODBC 数据源之前它工作正常 ![在此处输入图像描述](../Images/64f6cc87fde6b721c62e4a1af9286484.png)

# java - 从石英作业读取/写入数据库 - 事务不工作

> ID：10025491
> 
> 赞同：0
> 
> 时间：2012-04-05T08:51:40.037
> 
> 标签：java, spring, oracle, transactions, quartz-scheduler

我有两个 Quartz (1.8.3) 作业，通过 Spring (2.5.6) 配置，其中一个写入（发送）到数据库，一个从中读取（检查）。

```
<bean id="scheduleFactory"
      class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="Check"/>
            <ref bean="Send"/>
        </list>
    </property>
</bean>

<bean id="Send" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail">
        <bean class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
            <property name="targetObject" ref="StatusMonitor" />
            <property name="targetMethod" value="sendMessage" />
        </bean>
    </property>
    <property name="cronExpression" value="0 0/1 * * * ?" />
</bean>

<bean id="Check" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail">
        <bean class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
            <property name="targetObject" ref="StatusMonitor" />
            <property name="targetMethod" value="checkAndUpdateStatus" />
        </bean>
    </property>
    <property name="cronExpression" value="30 0/1 * * * ?" />
</bean> 
```

事务管理器设置：

```
<tx:annotation-driven transaction-manager="TransactionManager"/> 
```

在这两个作业中，我明确地在事务中运行读/写操作，如下所示：

```
@Override
    public synchronized void sendMessage() {
        try {
            TransactionTemplate tt = new TransactionTemplate(ptm);
            tt.execute(new TransactionCallbackWithoutResult() {
                @Override
                protected void doInTransactionWithoutResult(TransactionStatus status) {
                    ...
                    statusDAO.update(status);
                    ...
                }
            });
            log.info("Status was updated");
        } catch (Exception e) {
            ...
        }
    } 
```

其中 ptm 是一个 TransactionManager bean，通过 Spring 注入。我在日志中看到“状态已更新”记录，但是当我从事务读取方法中读取此记录时，它有时已过时。此外，当我使用 SQL 编辑器读取此记录时，它也已过时。我不明白，为什么交易在这种情况下不起作用，你有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T09:37:06.443

对于任何可能感兴趣的人。这对我有用

```
<bean name="applicationDataCollectorControllerJobDetail" class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="org.mypckage.controller.jobs.ApplicationDataCollectorController" />
    <property name="jobDataAsMap">
        <map>
            <!--<entry key="timeout" value="1" />-->
            <entry key="genericService" value-ref="genericService" />

            <entry key="applicationDataCollectorService" value-ref="applicationDataCollectorService" />

            <entry key="transactionManager" value-ref="transactionManager" />

        </map>
    </property>

</bean> 
```

--- 在调度程序 bean 中---

```
@Override
protected void executeInternal(JobExecutionContext ctx) throws JobExecutionException {

getApplicationDataCollectorService().collectData(transactionManager);

} 
```

----在applicationDataCollectorService bean中-----

```
public void collectData( org.springframework.transaction.jta.JtaTransactionManager transactionManager) {

        try {
            this.transactionManager = transactionManager;
            testTransactionalSave();

        } catch (Exception e) {
            BUSY = false;
            e.printStackTrace();
        }

    }

}

private void testTransactionalSave() throws Exception {

    TransactionTemplate tt = new TransactionTemplate(transactionManager);
    tt.execute(new TransactionCallbackWithoutResult() {
        @Override
        protected void doInTransactionWithoutResult(TransactionStatus ts) {
            try {
                ApplicationParameter appPara = null;
                List<ApplicationParameter> appParaList = genericService.getListFromHQL("select o from ApplicationParameter as o order by o.id desc", false);
                if (appParaList != null) {
                    if (appParaList.size() > 0) {
                        appPara = (ApplicationParameter) appParaList.get(0);
                        appPara.setLastBankStatementMailNum(appPara.getLastBankStatementMailNum() + 10);

                        appPara = (ApplicationParameter) genericService.mergeObject(appPara);

                        System.out.println(" num is now = " + appPara.getLastBankStatementMailNum());
                    }
                }
            } catch (Exception ex) {
                ex.printStackTrace();

            }
        }
    });

} 
```

注意：不要忘记将 transactionManager 声明为两个带有公共 setter 和 getter 的 bean 中的私有属性，以便 spring 将其连接起来。任何问题？yemiosigbesan@gmail.com

# javascript - Javascript - 回调函数

> ID：10025492
> 
> 赞同：1
> 
> 时间：2012-04-05T08:51:43.773
> 
> 标签：javascript, callback

这在我的脑海中似乎应该起作用，但我不知道为什么它不起作用：

```
(function ($) {

$.fn.extend({

    facebook: function (opts, callbackFnk) {

        var $this = this;
        ...
        ...
        ...

        $this.fbGetFriends = function( clback ){
            jsonUrl = fbMe + '/friends?access_token=' + token + '&callback=?';
            $.getJSON( jsonUrl, function( json ){
                console.log(json.data[0].name);
                clback.call(json);
            }); 
        }
        ...
        ...
        ... 
```

在控制台日志中，名字出现

在我的另一个脚本中：

```
var facebook = $.fn.facebook(
    { 
        myClientId  : '###############', 
        mySecret    : '##############' 
    }
);

facebook.fbOnLogin = function(){
    user = facebook.userDetails();
    token = facebook.getToken();
    facebook.fbGetFriends(function( json ){
        for ( var i in json ) {
            console.log( 'friends: ' + i + ' ' + json[i] );
        }
    });
} 
```

在控制台日志中，我什么也没显示，在以前的测试中，它显示的错误数据未定义。

谁能告诉我我哪里出错了？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:53:56.043

你不需要`clback.call`，`clback(json)`就够了。

# sql - 不在同一张表的子句中在oracle中需要时间

> ID：10025498
> 
> 赞同：0
> 
> 时间：2012-04-05T08:52:15.670
> 
> 标签：sql, oracle11g

查询就像..

```
select deviceid,devicename,totalbytes,'Others' as protocolgroup from (
    select d.deviceid,d.name as devicename,sum(bytes) as totalbytes from tblmainallowedtraffic_5min  b,tbldevice d
    WHERE (  B.APPID IN ('C070100126-VW717U','C018600068-GEF3O6','C045701665-9B6S1A','C026100710-36NPQE','C016801597-V1Z8IM') ) 
    and proto_group not in (select proto_group from (select proto_group,sum(bytes) from
    TBLMAINALLOWEDTRAFFIC_5MIN B WHERE (  B.APPID IN ('C070100126-VW717U','C018600068-GEF3O6','C045701665-9B6S1A',
    'C026100710-36NPQE','C016801597-V1Z8IM') ) AND "5mintime" >='04-APR-12 12.00.00.000000 AM' AND
    "5mintime" <='04-APR-12 11.59.59.000000 PM' group by proto_group order by sum(bytes) desc ) WHERE ROWNUM <=5 )
    AND B.APPID=D.APPID AND "5mintime" >='04-APR-12 12.00.00.000000 AM' AND "5mintime" <='04-APR-12 11.59.59.000000 PM' 
    GROUP BY D.APPID,D.DEVICEID,D.NAME)
    order by protocolgroup desc, totalbytes desc 
```

在解释计划中它说..

3 - 过滤器（不存在（不可行））

如果我用静态内部查询结果更改上述查询，输出会更快：

```
 select deviceid,devicename,totalbytes,'Others' as protocolgroup from (
    select d.deviceid,d.name as devicename,sum(bytes) as totalbytes from tblmainallowedtraffic_5min  b,tbldevice d
    WHERE (  B.APPID IN ('C070100126-VW717U','C018600068-GEF3O6','C045701665-9B6S1A','C026100710-36NPQE','C016801597-V1Z8IM') ) 
    and proto_group not in ('POP3','HTTP Request Response','Web','GET HTTP DATA MORE THAN 976 KB','SMTP' )
    AND B.APPID=D.APPID AND "5mintime" >='04-APR-12 12.00.00.000000 AM' AND "5mintime" <='04-APR-12 11.59.59.000000 PM' 
    GROUP BY D.APPID,D.DEVICEID,D.NAME)
    order by protocolgroup desc, totalbytes desc 
```

所以在同一张表上应用不存在子句会产生问题..
你能对此给出一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:21:06.550

**编辑：**新答案：

尝试做一个反加入：

```
SELECT deviceid,
  devicename,
  totalbytes,
  'Others' AS protocolgroup
FROM
  (SELECT d.deviceid,
    d.name     AS devicename,
    SUM(bytes) AS totalbytes
  FROM tblmainallowedtraffic_5min b,
    tbldevice d
  LEFT OUTER JOIN 
    (SELECT proto_group
    FROM
      (SELECT proto_group,
        SUM(bytes)
       FROM TBLMAINALLOWEDTRAFFIC_5MIN B
       WHERE ( B.APPID IN ('C070100126-VW717U','C018600068-GEF3O6','C045701665-9B6S1A', 'C026100710-36NPQE','C016801597-V1Z8IM') )
         AND "5mintime"  >='04-APR-12 12.00.00.000000 AM'
         AND "5mintime"  <='04-APR-12 11.59.59.000000 PM'
       GROUP BY proto_group
       ORDER BY SUM(bytes) DESC
      )
    WHERE ROWNUM <=5
    ) e ON b.proto_group = e.proto_group
  WHERE ( B.APPID     IN ('C070100126-VW717U','C018600068-GEF3O6','C045701665-9B6S1A','C026100710-36NPQE','C016801597-V1Z8IM') )
  AND e.proto_group is null
  AND B.APPID     =D.APPID
  AND "5mintime" >='04-APR-12 12.00.00.000000 AM'
  AND "5mintime" <='04-APR-12 11.59.59.000000 PM'
  GROUP BY D.APPID,
    D.DEVICEID,
    D.NAME
  )
ORDER BY protocolgroup DESC,
  totalbytes DESC 
```

# c# - wpf根据值为DataGrid中的单元格着色

> ID：10025499
> 
> 赞同：1
> 
> 时间：2012-04-05T08:52:16.877
> 
> 标签：c#, wpf, ivalueconverter

我想根据单元格包含的值更改单元格的文本颜色我使用值转换器，但不知何故，传递给 Convert 函数的对象类型是 DataRowView，我想传递 Cell，因为我想突出显示一个根据其值一次计算单元格。希望这是有道理的。

谢谢！！

**如果我适用于 DataGrid 的样式的代码：**

```
<UserControl.Resources>
    <local:MyBkColorConverter x:Key="bkColorCvrt"/>
    <Style x:Key="GridStyle" TargetType="DataGrid">
        <Setter Property="ItemsSource" Value="{Binding}" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="RowBackground" Value="Transparent" />
        <Setter Property="HeadersVisibility" Value="None" />
        <Setter Property="GridLinesVisibility" Value="None" />
        <Setter Property="SelectionUnit" Value="Cell" />
        <Setter Property="SelectionMode" Value="Single" />
        <Setter Property="IsReadOnly" Value="True" />
        <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
        <Setter Property="CellStyle">
            <Setter.Value>
                <Style TargetType="{x:Type DataGridCell}">
                    <Setter Property="Foreground">
                        <Setter.Value>
                            <Binding Converter="{StaticResource bkColorCvrt}"/>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="Black">
                            </Setter>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Setter.Value>
        </Setter>
      </Style>
</UserControl.Resources> 
```

**而 c# 部分：**

公共类 MyBkColorConverter : IValueConverter { #region IValueConverter 成员

```
 public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //The type of value here is actually DataRowView
        //here i would like to have a cell passed. is that possible to archive?
        return Brushes.LightGray;
    }

    public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:23:16.657

如果您创建将应用于每个控件的样式匹配该类型。

只需使用 DataGridTemplateColumn 并创建您可以随心所欲的自定义模板。

```
 <DataGridTemplateColumn Header="Name">                       
      <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Foreground="{Binding Name,Converter={StaticResource colconverter}}" Text="{Binding Name}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
   </DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:38:46.580

如果您将 a 传递`Path`给需要在`Binding`.

```
<DataGridTextColumn Binding="{Binding Path=AgentUtilization, StringFormat=P}" Header="Agent Utilization">
    <DataGridTextColumn.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="Foreground" Value="{Binding Path=AgentUtilization, Converter={StaticResource UtilizationFormat}}" />
        </Style>
    </DataGridTextColumn.CellStyle>
</DataGridTextColumn> 
```

传递给转换器的类型就是绑定路径中的属性类型（当然，在转换之后）。

# c - 谁能解释一下C程序的输出？

> ID：10025502
> 
> 赞同：0
> 
> 时间：2012-04-05T08:52:34.217
> 
> 标签：c

我在一本书中发现了这个问题。

问题：

以下程序的输出是什么？

```
#include <stdio.h>
int fun(int,int);
typedef int(*pf) (int,int);
int proc(pf,int,int);

int main()
{
    printf("%d\n",proc(fun,6,6));
    return 0;
}

int fun(int a,int b){
    return (a==b);
}

int proc(pf p,int a,int b){
    return ((*p)(a,b));
} 
```

此代码在运行时打印出 1。

我试着理解它，但没有它没有用。这个程序发生了什么，为什么它输出 1？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:56:19.883

`proc``fun`通过函数指针间接调用。`fun`接收的参数又是`6`and `6`，并且相等运算符的计算结果是`int`带有值的 an，`1`因为它们是相等的。如果它们不相等，则`==`运算符将让`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:59:47.330

在主要的第一行

```
printf("%d\n",proc(fun,6,6)); 
```

正在调用 proc，它接受参数一个函数指针和两个整数值。函数指针 pf 定义为`typedef int(*pf) (int,int);` 此行将`printf("%d\n",proc(fun,6,6));`调用定义为的函数：

```
int proc(pf p,int a,int b){
return ((*p)(a,b));
} 
```

现在在这个函数中 pf 持有指向函数 fun 的指针。这将导致函数 fun 被调用，该函数返回 a 和 b 的值是否为真。由于您已将 6,6 作为参数传递，因此结果将是正确的，这就是您得到 1 作为答案的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:07:57.153

```
int fun(int,int); 
```

函数接受 2 个 int 参数并返回一个 int

```
typedef int(*pf) (int,int); 
```

pf 是一个函数指针，用于存储函数的地址地址，该函数以两个 int 作为其 agrs 并返回一个 int

```
int proc(pf,int,int); 
```

proc 是一个函数，它首先需要 3 个 args，它是一个指向上述函数的函数指针和两个整数 args。

```
proc(fun,6,6); 
```

上面的语句用两个参数 6 和 6 调用 fun，如果它们相等则返回 true，这就是结果为 1

# objective-c - Objective-C 中的 ARC

> ID：10025511
> 
> 赞同：1
> 
> 时间：2012-04-05T08:53:01.590
> 
> 标签：objective-c, c, macos, function, automatic-ref-counting

*嗨，大家好！* 目前，我正在阅读Stephen Kochan**的《Objective-C 编程》一书。**其实我已经读完了。但是现在我回到了第 13 章——“底层 C 语言特性”。读完本章后，我做了所有的练习，但我坚持了其中的一个。问题是现在我在我的项目中使用 ARC，而我编写的代码给了我一个错误。当我修复它时，我得到了不正确的输出。所以这是我的**Fraction Class**和**Main**的代码。

**分数.h**

```
#import <Foundation/Foundation.h>

@interface Fraction : NSObject {
    int numerator;
    int denominator;
}

@property int numerator, denominator;

-(void) print:(BOOL)reduceCheck;
-(void) setNumerator:(int)numerator andDenominator:(int)denominator;
-(double) convertToNum;
-(Fraction *) add:(Fraction *)fraction;
-(Fraction *) subtract:(Fraction *)fraction;
-(Fraction *) multiply:(Fraction *)fraction;
-(Fraction *) divide:(Fraction *)fraction;
-(void) reduce;
-(id)initWithNumerator:(int)numeratorValue andDenominator:(int)denominatorValue;
-(void)printOut;
-(id)init;
+(Fraction *)allocFraction;
+(int)objectCounter;
+(int)methodAddInvokedCounter;

@end 
```

**分数.m**

```
#import "Fraction.h"

static int gObjectCounter;

static int gMethodInvokedCounter;

static int greatestCommonDivisor(int u, int v) {
    int temp;

    while(v != 0) {
        temp = u % v;
        u = v;
        v = temp;
    }
    return u;
}

@implementation Fraction

@synthesize numerator, denominator;

-(void) print:(BOOL)reduceCheck {
    Fraction *resultFraction = [[Fraction alloc] init];
    [resultFraction setNumerator:numerator andDenominator:denominator];
    if(reduceCheck) {
        [resultFraction reduce];
        NSLog(@"The Fraction is %i/%i - It was reduced", resultFraction.numerator, resultFraction.denominator); 
    }
    else 
        NSLog(@"The Fraction is %i/%i - It was not reduced", resultFraction.numerator, resultFraction.denominator); 

    if(resultFraction.denominator != 1) {
        if(resultFraction.numerator > resultFraction.denominator) {
            Fraction *FractionObject = [[Fraction alloc] init];
            [FractionObject setNumerator:(resultFraction.numerator % resultFraction.denominator) andDenominator: resultFraction.denominator];
            int FractionNumber = resultFraction.numerator / resultFraction.denominator;
            NSLog(@"The Fraction is %i/%i. The whole number of fraction is %i", FractionObject.numerator, FractionObject.denominator, FractionNumber);
        }
        else 
            NSLog(@"The Fraction is %i/%i", resultFraction.numerator, resultFraction.denominator);
    }
    else
        NSLog(@"The whole number of the Fraction is %i", resultFraction.numerator);
}

-(void) setNumerator:(int)value andDenominator:(int)value2 {
    numerator = value;
    denominator = value2;
}

-(double) convertToNum {
    if(denominator != 0)
        return (double)numerator / denominator;
    else
        return NAN;
}

-(Fraction *) add:(Fraction *)fraction {
    //extern int gMethodInvokedCounter;
    Fraction *FractionResult = [[Fraction alloc] init];
    FractionResult.numerator = numerator * fraction.denominator + denominator * fraction.numerator;
    FractionResult.denominator = denominator * fraction.denominator;
    [FractionResult reduce];
    gMethodInvokedCounter++;
    return FractionResult;
}

-(Fraction *) subtract:(Fraction *)fraction {
    Fraction *FractionResult = [[Fraction alloc] init];
    FractionResult.numerator = numerator * fraction.denominator - denominator * fraction.numerator;
    FractionResult.denominator = denominator * fraction.denominator;
    [FractionResult reduce];
    return FractionResult;
}

-(Fraction *) multiply:(Fraction *)fraction {
    Fraction *FractionResult = [[Fraction alloc] init];
    FractionResult.numerator = numerator * fraction.numerator;
    FractionResult.denominator = denominator * fraction.denominator;
    [FractionResult reduce];
    return FractionResult;
}

-(Fraction *) divide:(Fraction *)fraction {
    Fraction *FractionResult = [[Fraction alloc] init];
    FractionResult.numerator = numerator * fraction.denominator;
    FractionResult.denominator = denominator * fraction.numerator;
    [FractionResult reduce];
    return FractionResult;
}

-(void) reduce {
    int u = numerator;
    int v = denominator;

    int greatestCommonDivisor(int u, int v);

    greatestCommonDivisor(u, v);

    numerator /= u;
    denominator /= u;
}

-(id)initWithNumerator:(int)numeratorValue andDenominator:(int)denominatorValue {
    self = [super init];

    if(self) 
        [self setNumerator:numeratorValue andDenominator:denominatorValue];

    return self;
}

-(void)printOut {
    printf("%i/%i", numerator, denominator);
}

-(id)init {
    return [self initWithNumerator:0 andDenominator:0];
}

+(Fraction *)allocFraction {
    //extern int gObjectCounter;
    gObjectCounter++;

    return [Fraction alloc];
}

+(int)objectCounter {
    //extern int gObjectCounter;

    return gObjectCounter;
}

+(int)methodAddInvokedCounter {
    return gMethodInvokedCounter;
}

@end 
```

**主程序**

```
#import <Foundation/Foundation.h>
#import "Fraction.h"

Fraction *calculateFractions (Fraction  **array, int numberOfElements) {
    Fraction *resultFraction = [[Fraction alloc] initWithNumerator:array[0].numerator andDenominator:array[0].denominator];
    Fraction *holder;

    for(int i = 1; i < numberOfElements; i++) {
        holder = [resultFraction add:array[i]];
        resultFraction = holder;
    }

    return resultFraction;
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        const int numberOfFractions = 5;

        Fraction *fractionArrayElementOne = [[Fraction alloc] initWithNumerator:5 andDenominator:10];
        Fraction *fractionArrayElementTwo = [[Fraction alloc] initWithNumerator:8 andDenominator:13];
        Fraction *fractionArrayElementThree = [[Fraction alloc] initWithNumerator:7 andDenominator:15];
        Fraction *fractionArrayElementFour = [[Fraction alloc] initWithNumerator:9 andDenominator:23];
        Fraction *fractionArrayElementFive = [[Fraction alloc] initWithNumerator:4 andDenominator:17];

        Fraction __autoreleasing *arrayOfFractions[numberOfFractions]= {fractionArrayElementOne, fractionArrayElementTwo, fractionArrayElementThree, fractionArrayElementFour, fractionArrayElementFive};

        printf("Fraction Expression: %i/%i + %i/%i + %i/%i + %i/%i + %i/%i = ", arrayOfFractions[0].numerator, arrayOfFractions[0].denominator, arrayOfFractions[1].numerator, arrayOfFractions[1].denominator, arrayOfFractions[2].numerator, arrayOfFractions[2].denominator, arrayOfFractions[3].numerator, arrayOfFractions[3].denominator, arrayOfFractions[4].numerator, arrayOfFractions[4].denominator);

        Fraction *calculateFractions (Fraction **array, int numberOfElements);

        Fraction *resultOfFractionArrayCalculation; 

        resultOfFractionArrayCalculation = calculateFractions(arrayOfFractions, 5);

        printf("%i/%i\n", resultOfFractionArrayCalculation.numerator, resultOfFractionArrayCalculation.denominator);

    }
    return 0;
} 
```

**输出**
*分数表达式：5/10 + 8/13 + 7/15 + 9/23 + 4/17 = **1/0***

问题：**我做错了什么？**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:01:03.240

reduce 方法中有一个错误。您丢弃 gcd 的结果，只需将分子和分母除以分子。一旦`numerator > denominator`你最终得到 1/0 作为你的分数。

顺便说一句，`init`应该真正将默认分母设置为 1，而不是零。

# video - 没有 jquery 的完整页面浏览器 html5 视频

> ID：10025515
> 
> 赞同：2
> 
> 时间：2012-04-05T08:53:15.903
> 
> 标签：video

试图创建一个完整的浏览器 html5 视频效果，与此 [http://css-tricks.com/perfect-full-page-background-image/相同](http://css-tricks.com/perfect-full-page-background-image/)

但是通过视频我阅读了这个线程 [Full-bleed background videos？](https://stackoverflow.com/questions/1227088/full-bleed-background-videos) 和这个 [Html5 全屏视频](https://stackoverflow.com/questions/6039909/html5-full-screen-video)

这似乎是最好的解决方案，但使用 jquery [http://syddev.com/jquery.videoBG/](http://syddev.com/jquery.videoBG/) 但是有没有 jquery 的万无一失的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:20:58.583

我知道这是一个老问题，但答案很简单。

只需使用此 html5 视频代码，或类似以下内容：

```
<video id="videobackground" preload autoplay muted>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video> 
```

然后应用这个css：

```
#video_background { 
  position: absolute;
  bottom: 0px; 
  right: 0px; 
  min-width: 100%; 
  min-height: 100%; 
  width: auto; 
  height: auto; 
  z-index: -1000; 
  overflow: hidden
} 
```

min-height 和 min-width 将允许视频保持视频的纵横比，这通常是任何普通浏览器在正常分辨率下的纵横比。任何多余的视频都会从页面一侧流出。

从我的网站阅读更多内容：HTML 视频背景教程 - 仅限 HTML5 和 CSS！[http://kesilconsulting.com/web-designer-magazine/html-video-background-tutorial/#ixzz2O3BPNZE6](http://kesilconsulting.com/web-designer-magazine/html-video-background-tutorial/#ixzz2O3BPNZE6)

# python - 如何为空列表、元组、字典分配内存？

> ID：10025521
> 
> 赞同：1
> 
> 时间：2012-04-05T08:53:47.850
> 
> 标签：python, list, python-3.x

我是 python 编程的新手，根据 OOps Concepts 内存将为每个对象分配，在 python 编程中，如何为`[ ]`没有`{ }`元素`( )`的对象分配内存？

谢谢穆克泰尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:58:00.777

如果你担心 Python 中空元素的内存分配，那你就错了。

Python 是一种具有自动内存管理功能的高级语言。除非您尝试在内存严重受限的环境中处理大量数据，否则您不应该考虑这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:38:08.687

正如其他答案所说，您不需要知道也不应该关心。一般来说，空列表和字典就像任何其他列表或字典一样：确实，因为你可以改变一个空列表/字典，它以后可能会变成非空的。

然而，空元组略有不同，因为至少在 Python 的某些实现中它是一个单例值。这对你来说是非常不可能的，但它确实存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:32:10.223

这取决于 python 解释器的实现。[而且，实际上，除了调整垃圾收集（参见gc 模块](http://docs.python.org/library/gc.html)）之外，您什么也做不了。不用在意，你的口译员会的。

# iphone - 同步 NSMutable 数组以进行线程化

> ID：10025522
> 
> 赞同：0
> 
> 时间：2012-04-05T08:53:47.877
> 
> 标签：iphone, ios, multithreading, cocoa-touch, ipad

我有一个线程应用程序。在其中我正在运行一个后台线程，我正在填充表格单元格，当我更改日期并单击“确定”按钮时，它会在同一个屏幕中调用一个方法，在该方法中它将删除数组中的所有对象（在用于显示表格单元格数据的后台线程）并且我的应用程序崩溃了。请在这方面帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:56:40.413

这里有两个选项：1) 为您的阵列使用@synchronized 指令 2) 您使用 NSLock 手动锁定阵列以手动进行多个踏板。

# c++ - 如何正确施法？（或者我什至应该这样做？）

> ID：10025527
> 
> 赞同：11
> 
> 时间：2012-04-05T08:54:18.097
> 
> 标签：c++, visual-c++, casting, integer

如果我有诸如

```
class CString { int GetLength(); };

bool smaller(CString s1, std::string s2) {
    return s2.size() > s1.GetLength();
} 
```

对我来说最好的事情是什么？

*   更改`s1.GetLength()`为`(size_t)c.GetLength()`?
    这将有助于摆脱有关“有符号-无符号不匹配”的编译器警告，并传达我的投射意图，并且是迄今为止最简单的途径。但这可能是不受欢迎的。:(

*   更改`s1.GetLength()`为`static_cast<size_t>(c.GetLength())`?
    这将有助于摆脱警告，使用“正确”类型的演员。

*   更改`s1.GetLength()`为`static_cast<std::string::size_type>(c.GetLength())`?
    它非常冗长......这种抽象有实际好处，还是我应该打破它？

*   保持原样？
    这将有助于使编译器使用**`/RTCc`开关**（我在这里主要关注）进行溢出检查，但会以警告为代价。

*   做点别的吗？
    我应该制作自己的铸造功能吗？使用宏？我应该在运行时和编译时检查吗？还有其他想法吗？

### 编辑：

似乎这个例子有点过于字面意思了......

我显然不是故意谈论*的*`CString::GetLength()`。这种特殊的方法当然不是我的大担心。:) 我担心的是更*一般*的情况，即当我得到一个不*应该*为负的整数时，但*理论上*可能是由于错误。

哎呀，我可能正在*编写*一个这样做的方法，以覆盖另一段代码——所以我不能更改签名。我的代码肯定有错误，即使我没想到。

在这种情况下，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T08:58:11.747

你能改变`GetLength()`吗？从根本上说，问题是长度永远不是负数，无符号类型反映了最好的情况。长度不应该用`int`.

但除此之外，您的所有三个解决方案都是相同的。`std::string::size_type`总是`std::size_t`，虽然我会使用 a `static_cast`，但在这种情况下，C 风格的演员表执行相同的演员表。因为你知道返回的长度永远不会是负数（顺便说一句，确保这一点；你永远不知道人们可能会做些什么奇怪的事情），你只需转换类型就完全安全了：

```
return s2.size() > static_cast<std::size_t>(s1.GetLength()); 
```

如果出于某种原因`CString::GetLength` *可能*是负数，那么由您决定如何将这种转换从负数转换为正数。截短？幅度（绝对值）？无论你需要什么。

* * *

如果您担心错误，请进行显式检查并抛出异常（取决于您的域，这可能成本太高），或者使用`assert`. 但是，通常，您应该信任文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:18:08.470

将演员表放在自己的函数中，并带有注释：

```
std::string::size_type size(const CString& mfcString)
{
    // CString::GetLength is always non-negative
    // http://msdn.microsoft.com/en-us/library/aa300471(v=vs.60).aspx

    return static_cast<std::string::size_type>(mfcString.GetLength());
} 
```

那么你的代码将是：

```
bool smaller(const CString& s1, const std::string& s2)
{
    return size(s1) < s2.size();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T09:06:41.100

我想说正确的解决方案是更改签名`CString::getLength()`以返回无符号类型。鉴于您正在按值传递参数，您可能需要考虑提供一个转换构造函数来`CString`获取 a `std::string`（否则您可能应该更改函数的签名以获取其参数`const&`）。

就我个人而言，我认为该操作是转换而不是强制转换并将其编写为：

```
return std::string::size_type(s1.getLength())
    < s2.size(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:33:10.223

更改方法 CString::getLength() 并返回无符号类型。

试试这个

返回 std::string::size_type(s1.getLength()) < s2.size();

# heroku - Heroku上的Django模板语法错误，而不是Dev

> ID：10025533
> 
> 赞同：0
> 
> 时间：2012-04-05T08:54:21.443
> 
> 标签：heroku, django-admin

花了几个小时试图解决这个问题，但我不能......让我发疯。任何提示都非常感谢。

在我部署我的应用程序后的 heroku 上，所有表在 django-admin 中似乎都可以正常工作 - 就在 syncdb 之后。但是在我使用 db:push sqlite://myapp.db 添加数据后，我在 admin/auth/user/ 上出现错误。其他表和应用程序仍然有效。我没有对身份验证/用户进行任何更改。

```
Environment:

Request Method: GET
Request URL: http://sharp-frost-3799.herokuapp.com/admin/auth/user/
Django Version: 1.3.1 Python Version: 2.7.2 Installed Applications: ['django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'django_nose', 'fftests', 'django.contrib.admin'] Installed Middleware: ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.middleware.csrf.CsrfResponseMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware')

Template error: In template /app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templates/admin/change_list.html, error at line 97 Caught KeyError while rendering: u'true' 87 : {% endif %}

88 : {% endblock %}

89 :

90 : {% csrf_token %}

91 : {% if cl.formset %}

92 : {{ cl.formset.management_form }}

93 : {% endif %}

94 :

95 : {% block result_list %}

96 : {% if action_form and actions_on_top and cl.full_result_count %}{% admin_actions %}{% endif %}

97 : {% result_list cl %}

98 : {% if action_form and actions_on_bottom and cl.full_result_count %}{% admin_actions %}{% endif %}

99 : {% endblock %}

100 : {% block pagination %}{% pagination cl %}{% endblock %}

101 :

102 :

103 :

104 : {% endblock %}

105 :

Traceback: File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response 111\. response = callback(request, *callback_args, **callback_kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/options.py" in wrapper 307\. return self.admin_site.admin_view(view)(*args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view 93\. response = view_func(request, *args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func 79\. response = view_func(request, *args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/sites.py" in inner 197\. return view(request, *args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapper 28\. return bound_func(*args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view 93\. response = view_func(request, *args, **kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/decorators.py" in bound_func 24\. return func(self, *args2, **kwargs2) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/options.py" in changelist_view 1179\. ], context, context_instance=context_instance) File "/app/.heroku/venv/lib/python2.7/site-packages/django/shortcuts/init.py" in render_to_response 20\. return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader.py" in render_to_string 188\. return t.render(context_instance) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 123\. return self._render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in _render 117\. return self.nodelist.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 744\. bits.append(self.render_node(node, context)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/debug.py" in render_node 73\. result = node.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader_tags.py" in render 127\. return compiled_parent._render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in _render 117\. return self.nodelist.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 744\. bits.append(self.render_node(node, context)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/debug.py" in render_node 73\. result = node.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader_tags.py" in render 127\. return compiled_parent._render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in _render 117\. return self.nodelist.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 744\. bits.append(self.render_node(node, context)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/debug.py" in render_node 73\. result = node.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader_tags.py" in render 64\. result = block.nodelist.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 744\. bits.append(self.render_node(node, context)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/debug.py" in render_node 73\. result = node.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader_tags.py" in render 64\. result = block.nodelist.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 744\. bits.append(self.render_node(node, context)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/debug.py" in render_node 73\. result = node.render(context) File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py" in render 921\. dict = func(*args) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templatetags/admin_list.py" in result_list 232\. 'results': list(results(cl))} File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templatetags/admin_list.py" in results 217\. yield ResultList(None, items_for_result(cl, res, None)) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templatetags/admin_list.py" in init 209\. super(ResultList, self).init(*items) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templatetags/admin_list.py" in items_for_result 165\. result_repr = display_for_field(value, f) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/util.py" in display_for_field 285\. return _boolean_icon(value) File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templatetags/admin_list.py" in _boolean_icon 126\. return mark_safe(u'' % (settings.ADMIN_MEDIA_PREFIX, BOOLEAN_MAPPING[field_val], field_val))

Exception Type: TemplateSyntaxError at /admin/auth/user/ Exception Value: Caught KeyError while rendering: u'true' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:53:10.683

仍然不清楚是什么导致了这个问题，但是一旦我从本地的 sqlite 转移到 postgres，它就消失了。现在通过 db:push 推送数据，一切正常。实际上 Heroku 建议也使用 postgres 进行开发。

# java - NullPointerException 进入 servlet 过滤器

> ID：10025534
> 
> 赞同：1
> 
> 时间：2012-04-05T08:54:21.683
> 
> 标签：java, nullpointerexception, servlet-filters

好吧，在我的老问题之后：

[在模板中插入一些检查是否有问题？](https://stackoverflow.com/questions/9062757/are-there-some-issue-at-inserting-some-check-into-template)

和

[在 JSF 模板中进行过滤是个好主意吗？](https://stackoverflow.com/questions/9975228/is-it-a-good-idea-to-filter-inside-a-jsf-template)

我正在编写过滤器，但有时（甚至不是在同一点）应用程序`NulPointerException`在此行返回：

```
 chain.doFilter(req, res); 
```

我不明白为什么......我的过滤器的完整代码是：

```
 @WebFilter(filterName = "RolesFilter", urlPatterns = {"/*"},
     initParams = {
      @WebInitParam(name = "param", value = "value")})

    public class RolesFilter implements Filter {

        @Override
        public void init(FilterConfig config) throws ServletException {
            // NOOP.
        }

        @Override
        public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
            HttpServletRequest request = (HttpServletRequest) req;
            HttpServletResponse response = (HttpServletResponse) res;
            HttpSession session = request.getSession(false);
            UserBean user = (session.getAttribute("userBean") != null) ? (UserBean) session.getAttribute("userBean") : null;
                String uri=request.getRequestURI();

    if(!uri.endsWith("index.xhtml") && !uri.endsWith(".css") && !uri.endsWith(".js")  && !uri.endsWith("template.xhtml"))
    {
            if (user == null || user.getCognome() == null) 
                response.sendRedirect("/cdg/faces/index.xhtml");
            else {
                String app=uri.substring(0,uri.lastIndexOf("/"));
                app=app.substring(app.lastIndexOf("/")+1,app.length());
                HashMap> privilegi= (HashMap)user.getPrivilegi();
                Long idAppl=((AbstractController)session.getAttribute(app+"Controller")).getIdApplicazione();
                Short[] privPoss=((AbstractController)session.getAttribute(app+"Controller")).getPrivilegiPossibili();
    //--- if privPoss has only 3 value the application is a classic application with 2 roles so I can use a generic check, if the number is different I must do a specific check.
                            if(privilegi.get(idAppl)!=null && privPoss.length==3)
                            {
         if((privilegi.get(idAppl)).get(privPoss[0])==null && (uri.endsWith("Edit.xhtml") || uri.endsWith("Create.xhtml")))
                response.sendRedirect("/cdg/faces/index.xhtml");
            } else {
                                if(idAppl==35)
                                {
                                    ProgettiController pc=(session.getAttribute("progettiController")!=null) ? (ProgettiController)session.getAttribute("progettiController") : null;
         if(privilegi.get(idAppl).get(privPoss[1])==null && uri.endsWith("progetti/Create.xhtml"))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
         else if(uri.endsWith("progetti/Edit.xhtml")
     && (!privilegi.get(idAppl).get(privPoss[5]).equals("0") && !UserBean.isInString(pc.getSelected().getIdAzienda().getId()+"",privilegi.get(idAppl).get(privPoss[5]),"#")))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
         else if((uri.endsWith("attivita/Create.xhtml") || uri.endsWith("attivita/Create.xhtml"))
     &&(!pc.getSelected().getIdResponsabile().equals(user.getUtente())) )
                response.sendRedirect"/cdg/faces/index.xhtml"); 
         else if(uri.endsWith("attivita/Edit.xhtml")
     && (!privilegi.get(idAppl).get(privPoss[2]).equals("0") && !UserBean.isInString(pc.getSelected().getIdAzienda().getId()+"",privilegi.get(idAppl).get(privPoss[2]),"#")))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
         else if((uri.endsWith("progettiQualifica/Create.xhtml") || uri.endsWith("progettiQualifica/Create.xhtml"))
     && (!pc.getSelected().getIdResponsabile().equals(user.getUtente())))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
         else if((uri.endsWith("progettiSchede/Create.xhtml") || uri.endsWith("attivita/Create.xhtml"))
     && (!pc.getSelected().getIdResponsabile().equals(user.getUtente())))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
    }
                                else if(idAppl==2)
                                {
                                    RisorseController rc=(session.getAttribute("risorseController")!=null) ? (RisorseController)session.getAttribute("risorseController") : null;
         if(privilegi.get(idAppl).get(privPoss[0])==null && (uri.endsWith("Create.xhtml") || uri.endsWith("Edit.xhtml")))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
         else if(uri.endsWith("Edit.xhtml")
     && (!rc.getSelected().equals(user.getUtente())))
                response.sendRedirect("/cdg/faces/index.xhtml"); 
                                }
                                }
                            }
        } 
                chain.doFilter(req, res);

    }

        @Override
        public void destroy() {
            // NOOP.
        }

    } 
```

问题可能出在哪里？

好吧，在这个答案之前，我从我的代码中删除了一行，现在过滤器似乎工作正常，这行会导致问题吗？

```
 System.out.println("The uri is:"+request.getRequestURI()); 
```

它是在 doFilter 方法中的第一个 if 之后...谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:58:39.873

您可能正在使用value 作为第三个参数调用该`doFilter(ServletRequest, ServletResponse, FilterChain)`方法。`null`

你检查了吗？

# java - Java 单进程多线程

> ID：10025535
> 
> 赞同：0
> 
> 时间：2012-04-05T08:54:23.250
> 
> 标签：java, multithreading, process

由于 JVM 最初只创建一个进程，如果您有多个 CPU 处理器，那么在此进程中创建多个线程是否会提高 CPU 性能？这是因为同一进程内的所有线程共享该进程的资源。那么，从技术上讲，执行是顺序的吗？

换句话说，除非您创建两个或更多进程并将线程关联到每个进程，否则您无法充分利用多个 CPU 处理器中并行执行的优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:59:17.090

是的，将工作负载分布在多个线程上可以提高程序的性能。它还增加了响应能力。

但是，由于通信和同步，开销会增加。此外，并非所有算法都能够并行化。

# c#-4.0 - 从没有 Team Explorer 的机器访问 TFS API

> ID：10025537
> 
> 赞同：0
> 
> 时间：2012-04-05T08:54:24.743
> 
> 标签：c#-4.0, tfs-sdk

我可以在我的代码中使用 TFS API 并将代码部署在没有 Visual Studio 或 Team Explorer 的机器上吗？

我发现[了这个](http://social.msdn.microsoft.com/Forums/en/tfsworkitemtracking/thread/a1f63cf9-b57d-4b58-ba8f-5e2747e3c614)，它说我不应该那样做。

对此有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:05:47.203

不，您不能，当您为 TFS 开发客户端应用程序时，这意味着您需要团队资源管理器中存在的此 API 的运行时文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:28:48.127

您可以使用[新的 OData API](http://blogs.msdn.com/b/briankel/archive/2011/10/26/odata-service-for-team-foundation-server-2010-v1.aspx)或[标准 WebService API](https://stackoverflow.com/a/5232780/736079)（[官方不支持](http://social.msdn.microsoft.com/Forums/en-US/vstsstart/thread/a388cdc5-2933-4b27-bc7f-ae5ac2bd695f/)）连接到 TFS，而无需机器上的 SDK 或 Team Explorer。

还有随[Team Explorer Everywhere 2010 SP1一起提供的](http://www.microsoft.com/download/en/details.aspx?id=25125)[Java API](http://blogs.msdn.com/b/bharry/archive/2011/05/16/announcing-a-java-sdk-for-tfs.aspx)，据说它比需要安装 Team Explorer 的 .NET API 更容易以独立方式使用。

请注意，为了遵守正确的许可条款，您通常需要[为每台连接到 TFS 的机器/用户拥有一个 TFS CAL](http://www.sanderstechnology.com/2011/visual-studio-2010-and-msdn-licensing-white-paper/10710/#.T32P16vVyAg)。

# bit-manipulation - 1+2+4 二进制位

> ID：10025548
> 
> 赞同：0
> 
> 时间：2012-04-05T08:55:39.350
> 
> 标签：bit-manipulation, bit

我有一封来自开发人员的电子邮件，他在其中说：

> 您可能知道 1110000000000000 表示 1+2+4

这几天我都联系不上他了。其他人可以解释这是怎么可能的吗？

数字似乎使用以下函数转换为二进制：

```
function toBinaryString(bitmask)
tvar2 = 0
tvar3 = 1
tvar1 = ""
do while tvar2 < 16 
    if (bitmask and tvar3) > 0 then
        tvar1 = tvar1 & "1"
    else
        tvar1 = tvar1 & "0"
    end if
    tvar3 = tvar3 * 2
    tvar2 = tvar2 + 1
loop
toBinaryString = tvar1
end function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:09:01.863

这是小端符号（[Wiki](http://en.wikipedia.org/wiki/Endianness)）。基本上最低有效位出现在左侧，这与大端表示法不同（这是大多数人在谈论二进制时所想到的）。

因此第一位表示 0^2，然后是 1^2、2^2 等（所以 1 + 2 + 4）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:02:23.120

准备一些有趣的阅读材料：[字节如何工作](http://computer.howstuffworks.com/bytes.htm)

实际上您的开发人员不正确，二进制表示法中的 1110000000000000 是十进制表示法中的 57344。

# c# - 如何通过 winforms 从 Windows 7 平板电脑召唤触摸键盘？

> ID：10025551
> 
> 赞同：0
> 
> 时间：2012-04-05T08:55:47.293
> 
> 标签：c#, winforms, windows-7, touch, tablet

基本上我只需要能够在用户触摸我的应用程序中的文本框时召唤键盘，而不是他们必须去任务栏并实际请求召唤键盘。

有谁知道如何做到这一点？是否有我可以接触到的特定触控 API？我的应用程序目前是用 winforms 和 c# 编写的。

非常感谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:10:14.330

Process.Start(@"C:\windows\system32\osk.exe");

# gdb - GDB 中的@符号是什么意思？

> ID：10025552
> 
> 赞同：2
> 
> 时间：2012-04-05T08:55:50.147
> 
> 标签：gdb

请参阅下面的回溯，我想我以前没有见过这个，我在文档中找不到任何信息：

```
(gdb) bt
#0  0x000000007b44042c in Driver::setRec (this=0x1, message=@0x50) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:55:11.330

我在文档中找不到它，但看起来这就是 gdb 显示对变量的引用的方式。根据回溯，您在类方法处停止，通过引用接受 1 个参数，并带有以下签名：`Driver::setRec(message&)`.

更新：在[C++ 表达式](http://sourceware.org/gdb/onlinedocs/gdb/C-Plus-Plus-Expressions.html#C-Plus-Plus-Expressions)文档中
没有明确说明。唯一声明的是：`@`

> 在gdb显示一帧时显示的参数列表中，不显示参考变量的值（与其他变量不同）；这避免了混乱，因为引用通常用于大型结构。引用变量的地址总是显示出来，除非你指定了`set print address off'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:15:09.317

我不知道这是否有帮助，但来自[http://sources.redhat.com/gdb/download/onlinedocs/gdb.html#index-g_t_0040_0040_0040r_007b_002c-referencing-memory-as-an-array_007d-525](http://sources.redhat.com/gdb/download/onlinedocs/gdb.html#index-g_t_0040_0040_0040r_007b_002c-referencing-memory-as-an-array_007d-525)

> 在内存中打印出多个相同类型的连续对象通常很有用；数组的一部分，或动态确定大小的数组，程序中只存在一个指针。
> 
> 您可以通过将连续的内存跨度称为人工数组来做到这一点，使用二元运算符`@'. The left operand of` @' 应该是所需数组的第一个元素并且是一个单独的对象。右操作数应该是所需的数组长度。结果是一个数组值，其元素都是左参数的类型。第一个元素实际上是左参数；第二个元素来自紧跟第一个元素的内存字节，依此类推。这是一个例子。如果一个程序说

对于我如何解释，0x50 是指向输出消息所在字符串开头的指针地址。如果我找到有关此的更多信息，我将更新该帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:02:34.033

它用于将连续的内存位置打印为类似输出的数组。

```
$gdb *memory@10
${1,2,3,4,5,6,7,8,9,10} 
```

它是一种功能较弱但易于使用的内存检查。如果您想要更多功能，您应该使用**x**（检查内存）命令。咨询

```
$info gdb 
```

# html - 为什么标签菜单图像必须大于菜单大小？

> ID：10025553
> 
> 赞同：0
> 
> 时间：2012-04-05T08:55:52.240
> 
> 标签：html, css, image

[请参阅本页](http://www.dynamicdrive.com/dynamicindex1/ddtabmenu.htm)中的示例 2

本例中使用的左右圆角图像最高为 83px 高度。我尝试使用高度为 25px 的左右圆角图像（选项卡菜单高度为 25px），但菜单会混乱。

我的问题是

1.  为什么图像必须比实际标签高度大得多？
2.  如何确定图像大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:00:29.920

如果您使用图像作为该元素的背景，那么您需要这个

```
.some_class
{
    height:100px; width:100px;
    background: url('close.png');
    background-repeat:no-repeat;
    background-size: 100% 100%;
    -webkit-background-size: 100% 100%; /*  Safari  */
    -khtml-background-size: 100% 100%; /*  Konqueror  */
    -moz-background-size: 100% 100%; /*  Firefox  */
} 
```

这将使图像保持元素的高度和宽度

如果您在 HTML 代码中使用元素内的图像，例如

```
<div class="example"><img tag="images/someimage.jpg"></div> 
```

然后在CSS中你需要：

```
.example
{
   height: 100px
   width:  100px
 }

.example img
{
  width:100%
  height:100%
  here you can set up rounded borders for it too
} 
```

# django - 在新窗口中打开回复

> ID：10025555
> 
> 赞同：7
> 
> 时间：2012-04-05T08:55:55.803
> 
> 标签：django

在 Django 中，如何从视图中获取要在新窗口中打开的响应？

如果我这样做，这将在原始窗口中打开 mynewpage.html

```
return HttpResponse('mynewpage') 
```

我想在新窗口中打开 mynewpage.html ，与原始窗口分开。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:30:13.910

您的服务器没有窗口的概念 - 它只是将文件发送回浏览器。[您需要通过 javascript 执行此操作：](http://www.pageresource.com/jscript/jwinopen.htm)

```
window.open('url to open','window name','attribute1,attribute2') 
```

因此，您可以创建一个自定义视图和模板，其工作是打开一个带有指定链接的新窗口，然后将主窗口返回到之前所在的页面，或者直接从原始窗口打开您想要的 url 而无需联系服务器

# html-parsing - 找出网站中使用的各种布局

> ID：10025556
> 
> 赞同：0
> 
> 时间：2012-04-05T08:55:57.010
> 
> 标签：html-parsing

是否可以找出网站中使用的布局（模板）的总数。例如：-假设我想知道 www.flipkart.com 使用了多少种布局类型。答案将是：-

1.  登陆页面或主页
2.  分类页面 例如[http://www.flipkart.com/mobiles?_l=GIuT6NCRsZbfL9ID9ZKHNQ--&_r=hCno5y6eFUI8C0iWzaQbAg--&ref=cef19a11-4ebc-4f8e-a0dc-401c2d55de3e&_pop=brdcrumb](http://www.flipkart.com/mobiles?_l=GIuT6NCRsZbfL9ID9ZKHNQ--&_r=hCno5y6eFUI8C0iWzaQbAg--&ref=cef19a11-4ebc-4f8e-a0dc-401c2d55de3e&_pop=brdcrumb) 这是一个分类页面。所有这些页面都将具有相同的布局，只是内部内容会有所不同。
3.  产品页面如[http://www.flipkart.com/htc-sensation-mobile-phone/p/itmczbrsnwphgbnw?pid=MOBCYW9HXBUDYJPH&_l=sXQjsX87GxqrvKzhjuOrkw--&_r=n_2yuAC4xgh0SZTuulvAtw--&ref=9305103f-6fc1-497c-103ca-f8307c-80ca-](http://www.flipkart.com/htc-sensation-mobile-phone/p/itmczbrsnwphgbnw?pid=MOBCYW9HXBUDYJPH&_l=sXQjsX87GxqrvKzhjuOrkw--&_r=n_2yuAC4xgh0SZTuulvAtw--&ref=9305103f-6fc1-497c-807a-8f30ee30c13c)产品页面。所有产品页面都将具有与立即购买选项相同的布局。会有多个图像。那么是否有任何现有的工具可以找出这一点。

我希望我的问题很清楚。我只想将网站页面分类到一些桶中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:31:54.903

好吧，据我所知，我认为现在不存在某种工具或算法，但是是的，您可以编写一些。尝试找出这些页面的一些属性并将它们设置为基准。现在，每当您遇到一个 url 并且想要识别它的类别时，只需再次找出属性并与基准设置进行比较。虽然它不是通用的，但适用于特定网站:)

# android - 安卓手机上的视频流

> ID：10025558
> 
> 赞同：0
> 
> 时间：2012-04-05T08:56:18.667
> 
> 标签：android, video-streaming, gstreamer, android-video-player, mpeg-2

Android 上最好的视频流 API 是什么？视频基本上是 MPEG 2，保存在服务器上，我想流式传输到我的 Android 手机，它有解码器和我们自己的播放器。（解码发生在手机本身）。 **要求是延迟应尽可能小，以便顺利解码和播放。**

Gstreamer 怎么样，它是最有效的方法吗？

有什么建议么？

Rgrds,

赫什舍姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:15:26.657

[http://code.google.com/p/html5webview/source/checkout](http://code.google.com/p/html5webview/source/checkout)上给出的示例可以帮助您

# scala - Scala web::lazy val 范围/生命周期

> ID：10025567
> 
> 赞同：0
> 
> 时间：2012-04-05T08:56:44.360
> 
> 标签：scala, servlets, scope, request, lazy-evaluation

在 Scala Web 应用程序中，lazy val 的范围是应用程序服务器的生命周期，还是请求范围？

我认为这是每个请求，但无法找到明确的答案，因此是这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:04:40.307

`lazy`是 Scala 的一项功能，与 Web 应用程序编程无关。这意味着：*在首次访问时只评估一次*。如果变量是每个请求创建的对象的一部分，则每个请求都会延迟评估一次。

如果它在应用程序范围的类（或`object`）中声明，一旦评估，只要类被加载（因此可能是 WAR 生命周期），它将保持其值。

# matlab - 查找最近邻簇的数量

> ID：10025568
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:56:53.417
> 
> 标签：matlab, cluster-analysis, nearest-neighbor

我使用模糊 c 均值对我的数据集进行聚类。现在，每当出现新数据集时，我想知道从每个集群到下一个点的最近邻域的数量。请给我 Matlab 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:09:11.007

模糊 c 均值聚类可以使用[Fuzzy Logic Toolbox](http://www.mathworks.com/products/fuzzy-logic/)提供的[fcm](http://www.mathworks.com/help/toolbox/fuzzy/fcm.html)完成。要查看代码，请输入：

```
edit fcm 
```

# sql - 提高大型表上的 SQL Server 查询性能

> ID：10025569
> 
> 赞同：89
> 
> 时间：2012-04-05T08:56:58.983
> 
> 标签：sql, sql-server, sql-server-2008

我有一个相对较大的表（目前有 200 万条记录），想知道是否可以提高临时查询的性能。**ad-hoc**这个词在这里很关键。添加索引不是一种选择（最常查询的列上已经有索引）。

运行一个简单的查询来返回最近更新的 100 条记录：

```
select top 100 * from ER101_ACCT_ORDER_DTL order by er101_upd_date_iso desc 
```

需要几分钟。请参阅下面的执行计划：

![在此处输入图像描述](../Images/e282e192ac1d4acfe028394582884611.png)

表扫描的其他详细信息：

![在此处输入图像描述](../Images/a8ecf1325d6920179d6cfb87441e7c7d.png)

```
SQL Server Execution Times:
  CPU time = 3945 ms,  elapsed time = 148524 ms. 
```

该服务器非常强大（内存 48GB 内存，24 核处理器）运行 sql server 2008 r2 x64。

**更新**

我发现这段代码可以创建一个包含 1,000,000 条记录的表。我想我可以`SELECT TOP 100 * FROM testEnvironment ORDER BY mailAddress DESC`在几台不同的服务器上运行，看看我的磁盘访问速度是否在服务器上很差。

```
WITH t1(N) AS (SELECT 1 UNION ALL SELECT 1),
t2(N) AS (SELECT 1 FROM t1 x, t1 y),
t3(N) AS (SELECT 1 FROM t2 x, t2 y),
Tally(N) AS (SELECT TOP 98 ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM t3 x, t3 y),
Tally2(N) AS (SELECT TOP 5 ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM t3 x, t3 y),
Combinations(N) AS (SELECT DISTINCT LTRIM(RTRIM(RTRIM(SUBSTRING(poss,a.N,2)) + SUBSTRING(vowels,b.N,1)))
                    FROM Tally a
                    CROSS JOIN Tally2 b
                    CROSS APPLY (SELECT 'B C D F G H J K L M N P R S T V W Z SCSKKNSNSPSTBLCLFLGLPLSLBRCRDRFRGRPRTRVRSHSMGHCHPHRHWHBWCWSWTW') d(poss)
                    CROSS APPLY (SELECT 'AEIOU') e(vowels))
SELECT IDENTITY(INT,1,1) AS ID, a.N + b.N AS N
INTO #testNames
FROM Combinations a 
CROSS JOIN Combinations b;

SELECT IDENTITY(INT,1,1) AS ID, firstName, secondName
INTO #testNames2
FROM (SELECT firstName, secondName
      FROM (SELECT TOP 1000 --1000 * 1000 = 1,000,000 rows
            N AS firstName
            FROM #testNames
            ORDER BY NEWID()) a
      CROSS JOIN (SELECT TOP 1000 --1000 * 1000 = 1,000,000 rows
                  N AS secondName
                  FROM #testNames
                  ORDER BY NEWID()) b) innerQ;

SELECT firstName, secondName,
firstName + '.' + secondName + '@fake.com' AS eMail,
CAST((ABS(CHECKSUM(NEWID())) % 250) + 1 AS VARCHAR(3)) + ' ' AS mailAddress,
(ABS(CHECKSUM(NEWID())) % 152100) + 1 AS jID,
IDENTITY(INT,1,1) AS ID
INTO #testNames3
FROM #testNames2

SELECT IDENTITY(INT,1,1) AS ID, firstName, secondName, eMail, 
mailAddress + b.N + b.N AS mailAddress
INTO testEnvironment
FROM #testNames3 a
INNER JOIN #testNames b ON a.jID = b.ID;

--CLEAN UP USELESS TABLES
DROP TABLE #testNames;
DROP TABLE #testNames2;
DROP TABLE #testNames3; 
```

但在三台测试服务器上，查询几乎是瞬间运行的。谁能解释一下？

![在此处输入图像描述](../Images/eee217ba9a29242c43b2343915e37f5c.png)

**更新 2**

感谢您的评论 - 请让他们继续来......他们让我尝试将主键索引从非集群更改为集群，结果相当有趣（和意外？）。

非集群：

![在此处输入图像描述](../Images/65bf3e17fc034da98a1eb21c55f39b0e.png)

```
SQL Server Execution Times:
  CPU time = 3634 ms,  elapsed time = 154179 ms. 
```

集群：

![在此处输入图像描述](../Images/5b6ab480c73b61f70c69ae0a5c6bad9b.png)

```
SQL Server Execution Times:
  CPU time = 2650 ms,  elapsed time = 52177 ms. 
```

这怎么可能？如果 er101_upd_date_iso 列上没有索引，如何使用聚集索引扫描？

**更新 3**

根据要求 - 这是创建表脚本：

```
CREATE TABLE [dbo].[ER101_ACCT_ORDER_DTL](
    [ER101_ORG_CODE] [varchar](2) NOT NULL,
    [ER101_ORD_NBR] [int] NOT NULL,
    [ER101_ORD_LINE] [int] NOT NULL,
    [ER101_EVT_ID] [int] NULL,
    [ER101_FUNC_ID] [int] NULL,
    [ER101_STATUS_CDE] [varchar](2) NULL,
    [ER101_SETUP_ID] [varchar](8) NULL,
    [ER101_DEPT] [varchar](6) NULL,
    [ER101_ORD_TYPE] [varchar](2) NULL,
    [ER101_STATUS] [char](1) NULL,
    [ER101_PRT_STS] [char](1) NULL,
    [ER101_STS_AT_PRT] [char](1) NULL,
    [ER101_CHG_COMMENT] [varchar](255) NULL,
    [ER101_ENT_DATE_ISO] [datetime] NULL,
    [ER101_ENT_USER_ID] [varchar](10) NULL,
    [ER101_UPD_DATE_ISO] [datetime] NULL,
    [ER101_UPD_USER_ID] [varchar](10) NULL,
    [ER101_LIN_NBR] [int] NULL,
    [ER101_PHASE] [char](1) NULL,
    [ER101_RES_CLASS] [char](1) NULL,
    [ER101_NEW_RES_TYPE] [varchar](6) NULL,
    [ER101_RES_CODE] [varchar](12) NULL,
    [ER101_RES_QTY] [numeric](11, 2) NULL,
    [ER101_UNIT_CHRG] [numeric](13, 4) NULL,
    [ER101_UNIT_COST] [numeric](13, 4) NULL,
    [ER101_EXT_COST] [numeric](11, 2) NULL,
    [ER101_EXT_CHRG] [numeric](11, 2) NULL,
    [ER101_UOM] [varchar](3) NULL,
    [ER101_MIN_CHRG] [numeric](11, 2) NULL,
    [ER101_PER_UOM] [varchar](3) NULL,
    [ER101_MAX_CHRG] [numeric](11, 2) NULL,
    [ER101_BILLABLE] [char](1) NULL,
    [ER101_OVERRIDE_FLAG] [char](1) NULL,
    [ER101_RES_TEXT_YN] [char](1) NULL,
    [ER101_DB_CR_FLAG] [char](1) NULL,
    [ER101_INTERNAL] [char](1) NULL,
    [ER101_REF_FIELD] [varchar](255) NULL,
    [ER101_SERIAL_NBR] [varchar](50) NULL,
    [ER101_RES_PER_UNITS] [int] NULL,
    [ER101_SETUP_BILLABLE] [char](1) NULL,
    [ER101_START_DATE_ISO] [datetime] NULL,
    [ER101_END_DATE_ISO] [datetime] NULL,
    [ER101_START_TIME_ISO] [datetime] NULL,
    [ER101_END_TIME_ISO] [datetime] NULL,
    [ER101_COMPL_STS] [char](1) NULL,
    [ER101_CANCEL_DATE_ISO] [datetime] NULL,
    [ER101_BLOCK_CODE] [varchar](6) NULL,
    [ER101_PROP_CODE] [varchar](8) NULL,
    [ER101_RM_TYPE] [varchar](12) NULL,
    [ER101_WO_COMPL_DATE] [datetime] NULL,
    [ER101_WO_BATCH_ID] [varchar](10) NULL,
    [ER101_WO_SCHED_DATE_ISO] [datetime] NULL,
    [ER101_GL_REF_TRANS] [char](1) NULL,
    [ER101_GL_COS_TRANS] [char](1) NULL,
    [ER101_INVOICE_NBR] [int] NULL,
    [ER101_RES_CLOSED] [char](1) NULL,
    [ER101_LEAD_DAYS] [int] NULL,
    [ER101_LEAD_HHMM] [int] NULL,
    [ER101_STRIKE_DAYS] [int] NULL,
    [ER101_STRIKE_HHMM] [int] NULL,
    [ER101_LEAD_FLAG] [char](1) NULL,
    [ER101_STRIKE_FLAG] [char](1) NULL,
    [ER101_RANGE_FLAG] [char](1) NULL,
    [ER101_REQ_LEAD_STDATE] [datetime] NULL,
    [ER101_REQ_LEAD_ENDATE] [datetime] NULL,
    [ER101_REQ_STRK_STDATE] [datetime] NULL,
    [ER101_REQ_STRK_ENDATE] [datetime] NULL,
    [ER101_LEAD_STDATE] [datetime] NULL,
    [ER101_LEAD_ENDATE] [datetime] NULL,
    [ER101_STRK_STDATE] [datetime] NULL,
    [ER101_STRK_ENDATE] [datetime] NULL,
    [ER101_DEL_MARK] [char](1) NULL,
    [ER101_USER_FLD1_02X] [varchar](2) NULL,
    [ER101_USER_FLD1_04X] [varchar](4) NULL,
    [ER101_USER_FLD1_06X] [varchar](6) NULL,
    [ER101_USER_NBR_060P] [int] NULL,
    [ER101_USER_NBR_092P] [numeric](9, 2) NULL,
    [ER101_PR_LIST_DTL] [numeric](11, 2) NULL,
    [ER101_EXT_ACCT_CODE] [varchar](8) NULL,
    [ER101_AO_STS_1] [char](1) NULL,
    [ER101_PLAN_PHASE] [char](1) NULL,
    [ER101_PLAN_SEQ] [int] NULL,
    [ER101_ACT_PHASE] [char](1) NULL,
    [ER101_ACT_SEQ] [int] NULL,
    [ER101_REV_PHASE] [char](1) NULL,
    [ER101_REV_SEQ] [int] NULL,
    [ER101_FORE_PHASE] [char](1) NULL,
    [ER101_FORE_SEQ] [int] NULL,
    [ER101_EXTRA1_PHASE] [char](1) NULL,
    [ER101_EXTRA1_SEQ] [int] NULL,
    [ER101_EXTRA2_PHASE] [char](1) NULL,
    [ER101_EXTRA2_SEQ] [int] NULL,
    [ER101_SETUP_MSTR_SEQ] [int] NULL,
    [ER101_SETUP_ALTERED] [char](1) NULL,
    [ER101_RES_LOCKED] [char](1) NULL,
    [ER101_PRICE_LIST] [varchar](10) NULL,
    [ER101_SO_SEARCH] [varchar](9) NULL,
    [ER101_SSB_NBR] [int] NULL,
    [ER101_MIN_QTY] [numeric](11, 2) NULL,
    [ER101_MAX_QTY] [numeric](11, 2) NULL,
    [ER101_START_SIGN] [char](1) NULL,
    [ER101_END_SIGN] [char](1) NULL,
    [ER101_START_DAYS] [int] NULL,
    [ER101_END_DAYS] [int] NULL,
    [ER101_TEMPLATE] [char](1) NULL,
    [ER101_TIME_OFFSET] [char](1) NULL,
    [ER101_ASSIGN_CODE] [varchar](10) NULL,
    [ER101_FC_UNIT_CHRG] [numeric](13, 4) NULL,
    [ER101_FC_EXT_CHRG] [numeric](11, 2) NULL,
    [ER101_CURRENCY] [varchar](3) NULL,
    [ER101_FC_RATE] [numeric](12, 5) NULL,
    [ER101_FC_DATE] [datetime] NULL,
    [ER101_FC_MIN_CHRG] [numeric](11, 2) NULL,
    [ER101_FC_MAX_CHRG] [numeric](11, 2) NULL,
    [ER101_FC_FOREIGN] [numeric](12, 5) NULL,
    [ER101_STAT_ORD_NBR] [int] NULL,
    [ER101_STAT_ORD_LINE] [int] NULL,
    [ER101_DESC] [varchar](255) NULL
) ON [PRIMARY]
SET ANSI_PADDING OFF
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PRT_SEQ_1] [varchar](12) NULL
SET ANSI_PADDING ON
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PRT_SEQ_2] [varchar](120) NULL
SET ANSI_PADDING OFF
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TAX_BASIS] [char](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_RES_CATEGORY] [char](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_DECIMALS] [char](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TAX_SEQ] [varchar](7) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MANUAL] [char](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_LC_RATE] [numeric](12, 5) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_FC_RATE] [numeric](12, 5) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_PL_RATE] [numeric](12, 5) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_DIFF] [char](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_UNIT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_EXT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_MIN_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TR_MAX_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_UNIT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_EXT_CHRG] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_MIN_CHRG] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_MAX_CHRG] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TAX_RATE_TYPE] [char](1) NULL
SET ANSI_PADDING ON
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ORDER_FORM] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_FACTOR] [int] NULL
SET ANSI_PADDING OFF
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MGMT_RPT_CODE] [varchar](6) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ROUND_CHRG] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_WHOLE_QTY] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SET_QTY] [numeric](15, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SET_UNITS] [numeric](15, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SET_ROUNDING] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SET_SUB] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TIME_QTY] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_GL_DISTR_PCT] [numeric](7, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_REG_SEQ] [int] NULL
SET ANSI_PADDING ON
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ALT_DESC] [varchar](255) NULL
SET ANSI_PADDING OFF
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_REG_ACCT] [varchar](8) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_DAILY] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_AVG_UNIT_CHRG] [varchar](1) NULL
SET ANSI_PADDING ON
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ALT_DESC2] [varchar](255) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_CONTRACT_SEQ] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ORIG_RATE] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_DISC_PCT] [decimal](17, 10) NULL
SET ANSI_PADDING OFF
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_DTL_EXIST] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ORDERED_ONLY] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_STDATE] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_STTIME] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_ENDATE] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_ENTIME] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_RATE] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_UNITS] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_BASE_RATE] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_COMMIT_QTY] [numeric](11, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MM_QTY_USED] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MM_CHRG_USED] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_TEXT_1] [varchar](50) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_1] [numeric](13, 3) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_2] [numeric](13, 3) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_3] [numeric](13, 3) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_BASE_RATE] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_REV_DIST] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_COVER] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_RATE_TYPE] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_USE_SEASONAL] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TAX_EI] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TAXES] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_FC_TAXES] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PL_TAXES] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_FC_QTY] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_LEAD_HRS] [numeric](6, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_STRIKE_HRS] [numeric](6, 2) NULL
SET ANSI_PADDING ON
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_CANCEL_USER_ID] [varchar](10) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ST_OFFSET_HRS] [numeric](7, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_EN_OFFSET_HRS] [numeric](7, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MEMO_FLAG] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MEMO_EXT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MEMO_EXT_CHRG_PL] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MEMO_EXT_CHRG_TR] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MEMO_EXT_CHRG_FC] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TIME_QTY_EDIT] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SURCHARGE_PCT] [decimal](17, 10) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_INCL_EXT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_INCL_EXT_CHRG_FC] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_CARRIER] [varchar](6) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SETUP_ID2] [varchar](8) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHIPPABLE] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_CHARGEABLE] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_ALLOW] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_START] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_NBR_END] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_SUPPLIER] [varchar](8) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_TRACK_ID] [varchar](40) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_REF_INV_NBR] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_NEW_ITEM_STS] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MSTR_REG_ACCT_CODE] [varchar](8) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ALT_DESC3] [varchar](255) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ALT_DESC4] [varchar](255) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ALT_DESC5] [varchar](255) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SETUP_ROLLUP] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MM_COST_USED] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_AUTO_SHIP_RCD] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_FIXED] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ITEM_EST_TBD] [varchar](3) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ROLLUP_PL_UNIT_CHRG] [numeric](13, 4) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ROLLUP_PL_EXT_CHRG] [numeric](13, 2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_GL_ORD_REV_TRANS] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_DISCOUNT_FLAG] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SETUP_RES_TYPE] [varchar](6) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SETUP_RES_CODE] [varchar](12) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PERS_SCHED_FLAG] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PRINT_STAMP] [datetime] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SHOW_EXT_CHRG] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PRINT_SEQ_NBR] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_PAY_LOCATION] [varchar](3) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_MAX_RM_NIGHTS] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_USE_TIER_COST] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_UNITS_SCHEME_CODE] [varchar](6) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_ROUND_TIME] [varchar](2) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_LEVEL] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_SETUP_PARENT_ORD_LINE] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_BADGE_PRT_STS] [varchar](1) NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_EVT_PROMO_SEQ] [int] NULL
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD [ER101_REG_TYPE] [varchar](12) NULL
/****** Object:  Index [PK__ER101_ACCT_ORDER]    Script Date: 04/15/2012 20:24:37 ******/
ALTER TABLE [dbo].[ER101_ACCT_ORDER_DTL] ADD  CONSTRAINT [PK__ER101_ACCT_ORDER] PRIMARY KEY CLUSTERED 
(
    [ER101_ORD_NBR] ASC,
    [ER101_ORD_LINE] ASC,
    [ER101_ORG_CODE] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 50) ON [PRIMARY] 
```

该表大小为 2.8 GB，索引大小为 3.9 GB。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-16T03:15:23.747

简单的回答：不。您无法帮助对 238 列的表进行临时查询，并且聚集索引上的填充因子为 50%。

详细答案：

正如我在有关该主题的其他答案中所述，索引设计既是艺术又是科学，需要考虑的因素太多，因此几乎没有硬性规定（如果有的话）。您需要考虑：DML 操作与 SELECT 的数量、磁盘子系统、表上的其他索引/触发器、表内的数据分布、使用 SARGable WHERE 条件的查询以及其他一些我什至记不清的事情现在。

我可以说，如果不了解表本身、它的索引、触发器等，就无法为关于这个主题的问题提供任何帮助。现在您已经发布了表定义（仍在等待索引，但表定义单独指向99% 的问题）我可以提供一些建议。

首先，如果表格定义准确（238 列，50% 填充因子），那么您几乎可以忽略此处的其余答案/建议；-)。很抱歉在这里没有政治色彩，但说真的，这是一场不知道具体情况的疯狂追逐。现在我们看到了表定义，对于为什么一个简单的查询会花费这么长时间，即使测试查询（更新＃1）运行得如此之快，也变得相当清楚了。

这里的主要问题（以及在许多性能不佳的情况下）是糟糕的数据建模。不禁止 238 列就像不禁止 999 索引一样，但通常也不是很明智。

建议：

1.  首先，这张桌子确实需要改造。如果这是一个数据仓库表，那么可能，但如果不是，那么这些字段确实需要分成几个表，它们都可以具有相同的 PK。您将拥有一个主记录表，子表只是基于共同关联属性的依赖信息，并且这些表的 PK 与主表的 PK 相同，因此也与主表的 FK 相同。主表和所有子表之间将存在一对一的关系。
2.  的使用`ANSI_PADDING OFF`令人不安，更不用说由于随着时间的推移添加的各种列而导致表内不一致。不知道你现在是否可以解决这个问题，但理想情况下你总是有`ANSI_PADDING ON`，或者至少在所有`ALTER TABLE`语句中都有相同的设置。
3.  考虑创建 2 个额外的文件组：表和索引。最好不要把你的东西放进去，`PRIMARY`因为那是 SQL SERVER 存储它的所有数据和关于你的对象的元数据的地方。您在上创建表和聚集索引（因为那是表的数据）`[Tables]`和所有非聚集索引`[Indexes]`
4.  将填充因子从 50% 增加。这个低数字可能是您的索引空间大于数据空间的原因。执行索引重建将重新创建用于数据的最大 4k 数据页（在总 8k 页大小中），因此您的表分布在广阔的区域。
5.  如果大多数或所有查询的条件中有“ER101_ORG_CODE” `WHERE`，则考虑将其移至聚集索引的前导列。假设它比“ER101_ORD_NBR”更常用。如果更频繁地使用“ER101_ORD_NBR”，请保留它。看起来，假设字段名称的意思是“OrganizationCode”和“OrderNumber”，“OrgCode”是一个更好的分组，其中可能有多个“OrderNumbers”。
6.  次要的一点，但如果“ER101_ORG_CODE”始终是 2 个字符，则使用`CHAR(2)`而不是，`VARCHAR(2)`因为它将在行标题中保存一个字节，该字节跟踪可变宽度大小并加起来超过数百万行。
7.  正如这里的其他人所提到的，使用`SELECT *`会损害性能。不仅因为它要求 SQL Server 返回所有列，因此无论您的其他索引如何，都更有可能进行聚集索引扫描，而且 SQL Server 还需要时间来访问表定义并转换`*`为所有列名. 在列表中指定所有 238 个列名应该会*稍微*`SELECT`快一些，但这对扫描问题没有帮助。但是，您是否真的同时需要所有 238 列？

祝你好运！

**更新**
为了完整起见“如何提高临时查询的大型表的性能”这个问题，应该注意，虽然它对这种特定情况没有帮助，但如果有人使用 SQL Server 2012（或更新版本）当那个时候）并且如果表没有被更新，那么使用列存储索引是一个选项。有关该新功能的更多详细信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/gg492088.aspx](http://msdn.microsoft.com/en-us/library/gg492088.aspx)（我相信这些是从 SQL Server 2014 开始可更新的）。

**更新 2**
其他注意事项是：

*   在聚集索引上启用压缩。此选项在 SQL Server 2008 中可用，但仅作为企业版功能。但是，从 SQL Server 2016 **SP1开始，**[所有版本](https://docs.microsoft.com/en-us/sql/sql-server/editions-and-components-of-sql-server-2016#RDBMSSP)都提供了数据压缩功能！有关行和页面压缩的详细信息，请参阅[数据压缩的 MSDN 页面。](https://docs.microsoft.com/en-us/sql/relational-databases/data-compression/data-compression)
*   如果您不能使用数据压缩，或者如果它不会为特定表提供太多好处，那么如果您有一个固定长度类型的列（`INT`, `BIGINT`, `TINYINT`, `SMALLINT`, `CHAR`, `NCHAR`, `BINARY`, `DATETIME`, `SMALLDATETIME`, `MONEY`, 等）并且超过 50 % 的行是`NULL`，然后考虑启用`SPARSE`在 SQL Server 2008 中可用的选项。有关详细信息，请参阅[使用稀疏列](https://docs.microsoft.com/en-us/sql/relational-databases/tables/use-sparse-columns)的 MSDN 页面。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-04-05T09:32:47.077

此查询存在一些问题（这适用于每个查询）。

# 缺乏索引

[正如Oded](https://stackoverflow.com/users/1583/oded)已经提到的，缺少`er101_upd_date_iso`列索引是最重要的。

如果没有匹配的索引（缺少可能会导致表扫描），就没有机会在大表上运行快速查询。

如果您无法添加索引（由于各种原因，包括*为一个临时查询创建索引没有意义*），我会建议一些解决方法（可用于临时查询）：

## 1.使用临时表

在您感兴趣的数据子集（行和列）上创建临时表。临时表应该比原始源表小得多，可以轻松索引（如果需要）并且可以*缓存*您感兴趣的数据子集。

要创建临时表，您可以使用代码（未经测试），例如：

```
-- copy records from last month to temporary table
INSERT INTO
   #my_temporary_table
SELECT
    *
FROM
    er101_acct_order_dtl WITH (NOLOCK)
WHERE 
    er101_upd_date_iso > DATEADD(month, -1, GETDATE())

-- you can add any index you need on temp table
CREATE INDEX idx_er101_upd_date_iso ON #my_temporary_table(er101_upd_date_iso)

-- run other queries on temporary table (which can be indexed)
SELECT TOP 100
    * 
FROM 
    #my_temporary_table 
ORDER BY 
    er101_upd_date_iso DESC 
```

优点：

*   轻松处理任何数据子集。
*   易于管理 - 它是*临时*的，它是*table*。
*   不影响整体系统性能，例如`view`.
*   临时表可以被索引。
*   你不必关心它——它是暂时的:)。

缺点：

*   它是数据的快照——但这对于大多数临时查询来说可能已经足够了。

## 2.公用表表达式——CTE

就我个人而言，我经常将[CTE](http://technet.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)用于临时查询——它对逐个构建（和测试）查询有很大帮助。

请参见下面的示例（以 开头的查询`WITH`）。

优点：

*   易于从*大视图*开始构建，然后选择和过滤您真正需要的内容。
*   易于测试。

缺点：

*   有些人不喜欢 CDE——CDE 查询似乎很长而且难以理解。

## 3\. 创建视图

与上面类似，但创建视图而不是临时表（如果您经常使用相同的查询并且您拥有支持索引视图的 MS SQL 版本。

您可以在您感兴趣的数据子集上创建视图或[索引视图](http://msdn.microsoft.com/en-us/library/dd171921(v=SQL.100).aspx)，并在视图上运行查询——它应该只包含比整个表小得多的有趣数据子集。

优点：

*   很容易做到。
*   它是最新的源数据。

缺点：

*   仅适用于已定义的数据子集。
*   对于具有高更新率的大型表可能效率低下。
*   没那么容易管理。
*   会影响整体系统性能。
*   我不确定每个版本的 MS SQL 都提供索引视图。

# 选择所有列

在大表上运行*星查询*（`SELECT * FROM`）不是好事......

如果您有大列（如长字符串），则需要花费大量时间从磁盘读取它们并通过网络传递。

我会尝试`*`用您真正需要的列名替换。

或者，如果您需要所有列，请尝试将查询重写为（使用*通用数据表达式*）：

```
;WITH recs AS (
    SELECT TOP 100 
        id as rec_id -- select primary key only
    FROM 
        er101_acct_order_dtl 
    ORDER BY 
        er101_upd_date_iso DESC
)
SELECT
    er101_acct_order_dtl.*
FROM
    recs
    JOIN
      er101_acct_order_dtl
    ON
      er101_acct_order_dtl.id = recs.rec_id
ORDER BY 
    er101_upd_date_iso DESC 
```

# 脏读

可以加快临时查询的最后一件事是允许带有[表提示的](http://msdn.microsoft.com/en-us/library/ms187373.aspx)*脏读*。[`WITH (NOLOCK)`](http://msdn.microsoft.com/en-us/library/ms187373.aspx)

[您可以将事务隔离级别设置](http://msdn.microsoft.com/en-us/library/ms173763.aspx)为未提交，而不是提示：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
```

或设置适当的 SQL Management Studio 设置。

我假设对于临时查询，*脏读*已经足够好了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-05T08:59:07.993

您正在那里进行**表扫描**，这意味着您**没有在**上定义索引`er101_upd_date_iso`，或者如果该列是现有索引的一部分，则无法使用该索引（可能它不是主索引器列）。

添加缺少的索引将无止境地帮助性能。

> 最常查询的列上已经有索引

这并不意味着在此查询中使用了它们（它们可能不是）。

我建议阅读 Gail Shaw 的《寻找 SQL Server 性能不佳的原因》，[第 1](http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-1/)部分和[第 2 部分](http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-2/)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-12T09:21:37.230

该问题特别指出需要改进**临时**查询的性能，并且不能添加索引。那么从表面上看，可以做些什么来提高任何桌子的性能呢？

由于我们正在考虑即席查询，因此 WHERE 子句和 ORDER BY 子句可以包含列的任意组合。这意味着几乎不管表上放置了哪些索引，都会有一些查询需要表扫描，如上面在性能不佳查询的查询计划中所见。

考虑到这一点，我们假设除了主键上的聚集索引之外，表上根本没有索引。现在让我们考虑一下我们必须使用哪些选项来最大化性能。

*   对表进行碎片整理

    只要我们有一个聚集索引，我们就可以使用[DBCC INDEXDEFRAG](http://msdn.microsoft.com/en-us/library/ms177571.aspx)（不推荐）或者最好是[ALTER INDEX](http://msdn.microsoft.com/en-us/library/ms188388.aspx)对表进行碎片整理。这将最大限度地减少扫描表所需的磁盘读取次数并提高速度。

*   尽可能使用最快的磁盘。你没有说你正在使用什么磁盘，但你是否可以使用 SSD。

*   优化 tempdb。将 tempdb 放在尽可能快的磁盘上，同样是 SSD。请参阅此[SO 文章](https://stackoverflow.com/questions/360088/sql-server-tempdb-optimization-tips-for-a-new-server)和此[RedGate 文章](http://bradmcgehee.com/wp-content/uploads/presentations/Optimizing%20tempdb%20Performance_SQLCONN.pdf)。

*   如其他答案所述，使用更具选择性的查询将返回更少的数据，因此应该更快。

现在让我们考虑一下如果允许添加索引我们可以做什么。

如果我们*不是*在谈论临时查询，那么我们将专门为针对表运行的有限查询集添加索引。既然我们正在讨论*临时查询，那么在**大多数*情况下可以做些什么来提高速度呢？

*   为每一列添加一个列索引。这应该至少为 SQL Server 提供一些可用于提高大多数查询速度的东西，但不会是最佳的。
*   为最常见的查询添加特定索引，以便优化它们。
*   通过监控性能不佳的查询，根据需要添加额外的特定索引。

**编辑**

我已经在 2200 万行的“大”表上运行了一些测试。我的表只有六列，但包含 4GB 的数据。我的机器是一台值得尊敬的台式机，配备 8Gb RAM 和四核 CPU，并且有一个 Agility 3 SSD。

我删除了除 Id 列上的主键之外的所有索引。

如果首先重新启动 SQL Server，则与问题中给出的问题类似的查询需要 5 秒，随后需要 3 秒。数据库调优顾问显然建议添加一个索引来改进这个查询，估计改进 > 99%。添加索引会导致查询时间实际上为零。

有趣的是，我的查询计划和你的一样（使用聚集索引扫描），但是索引扫描占查询成本的 9%，排序占剩余的 91%。我只能假设您的表包含大量数据和/或您的磁盘非常慢或位于非常慢的网络连接上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-09T06:24:16.597

即使您在某些查询中使用的某些列上有索引，您的“临时”查询会导致表扫描这一事实表明您没有足够的索引来允许此查询有效完成。

特别是对于日期范围，很难添加好的索引。

只需查看您的查询，数据库必须按所选列对所有记录进行排序，才能返回前 n 条记录。

数据库是否也在没有 order by 子句的情况下进行全表扫描？表是否有主键 - 没有 PK，数据库将不得不更加努力地执行排序？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-11T07:09:19.347

> > 这怎么可能？如果 er101_upd_date_iso 列上没有索引，如何使用聚集索引扫描？

索引是一个 B-Tree，其中每个叶节点都指向“一堆行”（在 SQL 内部术语中称为“页面”），即索引是非聚集索引。

聚集索引是一种特殊情况，其中叶节点具有“一堆行”（而不是指向它们）。这就是为什么...

1) 表上只能有一个聚集索引。

这也意味着整个表都存储为聚集索引，这就是为什么您开始看到索引扫描而不是表扫描的原因。

2）使用聚集索引的操作通常比非聚集索引快

[在http://msdn.microsoft.com/en-us/library/ms177443.aspx](http://msdn.microsoft.com/en-us/library/ms177443.aspx)阅读更多信息

对于您遇到的问题，您应该真正考虑将此列添加到索引中，正如您所说，添加新索引（或现有索引中的列）会增加 INSERT/UPDATE 成本。但是有可能删除一些未充分利用的索引（或现有索引中的列）以替换为“er101_upd_date_iso”。

如果无法更改索引，我建议在列上添加统计信息，当列与索引列有某种相关性时，它可以加快处理速度

[http://msdn.microsoft.com/en-us/library/ms188038.aspx](http://msdn.microsoft.com/en-us/library/ms188038.aspx)

顺便说一句，如果您可以发布 ER101_ACCT_ORDER_DTL 的表模式，您将获得更多帮助。以及现有的索引......，可能可以重写查询以使用其中的一些。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T23:26:56.067

One of the reasons your 1M test ran quicker is likely because the temp tables are entirely in memory and would only go to disk if your server experiences memory pressure. You can either re-craft your query to remove the order by, add a good clustered index and covering index(es) as previously mentioned, or query the DMV to check for IO pressure to see if hardware related.

```
-- From Glen Barry
-- Clear Wait Stats (consider clearing and running wait stats query again after a few minutes)
-- DBCC SQLPERF('sys.dm_os_wait_stats', CLEAR);

-- Check Task Counts to get an initial idea what the problem might be

-- Avg Current Tasks Count, Avg Runnable Tasks Count, Avg Pending Disk IO Count across all schedulers
-- Run several times in quick succession
SELECT AVG(current_tasks_count) AS [Avg Task Count], 
       AVG(runnable_tasks_count) AS [Avg Runnable Task Count],
       AVG(pending_disk_io_count) AS [Avg Pending DiskIO Count]
FROM sys.dm_os_schedulers WITH (NOLOCK)
WHERE scheduler_id < 255 OPTION (RECOMPILE);

-- Sustained values above 10 suggest further investigation in that area
-- High current_tasks_count is often an indication of locking/blocking problems
-- High runnable_tasks_count is a good indication of CPU pressure
-- High pending_disk_io_count is an indication of I/O pressure 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-12T16:05:26.473

我知道您说过添加索引不是一种选择，但那将是消除您拥有的表扫描的唯一选择。当您进行扫描时，SQL Server 会读取表上的所有 200 万行来完成您的查询。

[本文](http://blog.sqlauthority.com/2009/01/18/sql-server-difference-between-index-scan-and-index-seek/)提供了更多信息，但请记住：Seek = 好，Scan = 坏。

其次，你不能消除select *并只选择你需要的列吗？第三，没有“where”子句？即使您有索引，由于您正在阅读所有内容，因此您会得到最好的索引扫描（这比表扫描更好，但它不是查找，这是您应该瞄准的目标）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-16T20:57:54.280

我知道从一开始已经有很长一段时间了......所有这些答案都有很多智慧。尝试改进查询时，良好的索引是第一件事。嗯，几乎是第一个。最先（可以这么说）是对代码进行更改以使其高效。所以，说到底，如果一个查询没有 WHERE，或者当 WHERE 条件不够选择性时，只有一种方法可以获取数据：TABLE SCAN (INDEX SCAN)。如果需要表中的所有列，则将使用 TABLE SCAN - 毫无疑问。这可能是堆扫描或聚集索引扫描，具体取决于数据组织的类型。加快速度的唯一最后一种方法（如果可能的话）是确保使用尽可能多的内核来进行扫描：OPTION (MAXDOP 0)。当然，我忽略了存储的主题，

# php - symfony2 文件上传（致命错误：允许的内存大小已用尽）

> ID：10025571
> 
> 赞同：2
> 
> 时间：2012-04-05T08:57:06.443
> 
> 标签：php, symfony, doctrine

我面临一个非常奇怪的问题。

我尝试用 Symfony2 和 Doctrine 实现一个简单的附件上传器。

所以我按照这篇食谱文章[http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

一切看起来都很好，但是当我尝试上传一个 140KB 的文件时，PHP 会抛出一个致命错误。

这是我的验证：

```
/**
 * @Assert\File(
 *      maxSize="4M",
 *      maxSizeMessage="Allowed maximum size is {{ limit }}"
 * )
 */
public $file; 
```

这是我的 php.ini

```
memory_limit = 256M
max_input_time = 60
max_execution_time = 30
file_uploads = On
upload_max_filesize = 128M 
```

所以一切都应该没问题，脚本需要大约 500 毫秒才能得到错误：致命错误：允许的内存大小为 268435456 字节用尽（试图分配 122 字节）

当我增加 memory_limit 它不会改变任何东西时，内存大小会增加，但它仍然试图分配 122 个字节。其他一切都很好，只是文件上传中断。

任何猜测发生了什么？

**编辑：** 是的，我做了`{{ form_enctype(form) }}`，所以我会发布uploadAction。这很复杂，因为模型充满了外键，我会剪掉那些无关紧要的部分：

```
public function createAction(Request $request)
    {
        $em = $this->getDoctrine()->getEntityManager();

        $conference = new Conference();
        $conference->setArchived(false);
        $conference->setLastModification(new \DateTime());

        $form = $this->createForm(new ConferenceType(), $conference);

        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                $registrationForm = $conference->getRegistrationForm();

                $em->persist($conference->getLocation());

                $conference->getImage()->upload();
                $em->persist($conference->getImage());

                // lots of other stuff is going on (does not refer to the upload processs

                $em->flush();

                return $this->redirect($this->generateUrl('KnowHowERegistrationBackendBundle_registrationform_create'));
            }
        }

        return $this->render('KnowHowERegistrationBackendBundle:Conference:create.html.twig',
            array(
                'form' => $form->createView(),
                'conference' => $conference
            ));
    } 
```

我希望有人能够复制它或找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:55:11.157

什么都没有真正跳出来。这严格来说是一种排除故障的答案。

首先注释掉这些行：

```
 $conference->getImage()->upload();
            $em->persist($conference->getImage()); 
```

验证其他一切是否正常。并发布完整的错误消息。里面可能有线索。

# sql - 删除/更新数据库中 x+1 个重复行中的 x 个

> ID：10025572
> 
> 赞同：0
> 
> 时间：2012-04-05T08:57:08.470
> 
> 标签：sql, sql-server

注意：如果可能的话，我正在寻找一个纯 SQL 查询解决方案，以便我可以在 SQL Server Manager 中运行它。

我的脚本中有一个错误，这意味着一些本来应该输入一次的数据已经输入了多次，现在我需要一种方法来删除除 1 个条目之外的所有 PER`company_id`字段**或**更新`export`每个条目的 1 个条目的列`company_id`：

`short_desc`有不止一次出现**并且** `long_desc`有不止一次出现

我的数据结构如下：

```
 id  |  company_id  |  short_desc  |  long_desc  | export
    1       1234            word           text       0
    2       1234            word           text       0
    3       1234            word           text       0
    4       1234            word           text       0
    5       1234            word           text       0
    6       1234            word           text       0
    7       5678            another        foo        0
    8       5678            another        foo        0
    9       5678            another        foo        0
    10      5678            another        foo        0
    11      5678            another        foo        0
    12      5678            another        foo        0 
```

我不介意更新/删除哪些条目，只要每个条目只有 1 个，因此在上面的示例中，我将只剩下 2 个条目/标记为`export=-1`.

我尝试过使用子选择和分组来做各种事情，但我总是需要最终分组，`id`所以我永远不会得到重复项。我不知道是否刚刚度过了一个漫长的早晨，但我似乎想不出一种纯粹的 SQL 方式来做到这一点，我想尽量避免编写脚本来做到这一点。

如果`export`设置了标志，我将删除它等于 0 的位置。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:01:23.237

```
update table set export = -1
where table.id in 
(
  select min(id) from table group by company_id,short_desc,long_desc
  having count(1) > 1
) 
```

# android - 修改堆栈项计数并在堆栈视图中显示列表视图/网格视图

> ID：10025573
> 
> 赞同：1
> 
> 时间：2012-04-05T08:57:08.427
> 
> 标签：android, listview, gridview, count, stackview

我在这里有 2 个问题要问。我指的是[http://www.broculos.net/en/article/android-101-how-create-stackview-widget](http://www.broculos.net/en/article/android-101-how-create-stackview-widget)来创建一个 stackview 小部件。

1.  默认的 stackview 显示 4 个相互堆叠的项目。我们可以改变这个计数吗？例如，在附图[http://www.broculos.net/sites/default/files/resize/content/honeybuzz_widget_preview-200x125.png](http://www.broculos.net/sites/default/files/resize/content/honeybuzz_widget_preview-200x125.png)中，HoneyBuzz 小部件显示 4 个项目，但 Map 小部件显示 3。如何实现？

2.  我也想知道我们可以在 stackview 中添加 Listview 和 Gridview。意味着，我们可以在单个堆栈项中显示文本/图像，我们可以显示列表/网格并滚动它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:03:25.293

1.  不，你不能。

2.  我认为在堆栈列表视图中滚动会阻止用户更改堆栈中的“卡”，所以这是不可能的

来自android开发者网站：

> 如果您熟悉 XML 布局，那么创建 App Widget 布局很简单。但是，您必须知道 App Widget 布局基于 RemoteViews，它不支持所有类型的布局或视图小部件。
> 
> RemoteViews 对象（以及相应的 App Widget）可以支持以下布局类：
> 
> *   FrameLayout LinearLayout RelativeLayout 以及以下小部件类：
> *   模拟时钟
> *   按钮
> *   计时器
> *   图像按钮
> *   图像视图
> *   文本视图
> *   ViewFlipper
> *   列表显示
> *   网格视图
> *   堆栈视图
> *   AdapterViewFlipper
> 
> 不支持这些类的后代。

# listview - jqm 拇指列表未正确显示

> ID：10025574
> 
> 赞同：0
> 
> 时间：2012-04-05T08:57:08.713
> 
> 标签：listview, jquery-mobile

我在一个对话框中有两个列表 - 一个气泡计数列表和一个拇指列表。气泡计数列表看起来不错，但拇指列表显示为单独的列表项。

![在此处输入图像描述](../Images/324afd073ee55e8b2d165b13c180c879.png)

我不习惯以这种方式编写 html 输出，也许我缺少一些简单的东西。气泡计数列表的代码在“//将电影文件夹分配给孩子”下方，拇指列表的代码在“//显示图像计数，编码 url 路径”下方：

```
private function _makeoutput($folder_index) {

$html = '';

    $query = 'dir§'.$this->session->userdata('uid').'§'.$folder_index;

    //api query, create listview for images
    if($xml = $this->api->query($query)){
    $xml = simplexml_load_string($xml);
    $html .= '<ul data-role="listview" data-inset="true" text-align:center;>';

    //assign movie folders to child
    foreach($xml->COM->MOVIE_FOLDER as $child){
       $html .= '<li>';
       //count number of images in each root folder
       $bubble_count = $child->MOVIE->count();
       $html .= '<a href="'.$child->attributes()->indexI.'" data-rel="dialog" data-transition="slide">'.$child->attributes()->nameS.'<span class="ui-li-count">'.$bubble_count.'</span></a>';
       $html .= ' </li>';
    }
    $html .= '</ul>';

    //display image count, encode url/path
    for($i = 0, $c = $xml->COM->MOVIE->count(); $i < $c; $i++ ){
        $html .= '<ul data-role="listview" class="ui-listview" data-inset="true">';
        $html .= '<li>';
        $html .= '<a>
        <img src="https://[url]'.rawurlencode($this->_decode_path($xml->COM->MOVIE[$i]->attributes()->dbIcoFilename)).'" id="imgThumb" alt="'.$xml->COM->MOVIE[$i]->attributes()->nameS.'" />
        <h1>'.$xml->COM->MOVIE[$i]->attributes()->nameS.'</h1>
        </a>';
        $html .= ' </li>';
        $html .= '</ul>';
    }
    }
    else{
    $data['output'] = $this->_makeoutput($folder_index);
    }
return $html;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:06:26.833

首先.. 为什么是“私人”？

手头的问题是您需要在 for 循环之外使用 ul 标记，否则您会生成新列表（这就是您所看到的）：

```
$html .= '<ul data-role="listview" class="ui-listview" data-inset="true">';
for($i = 0, $c = $xml->COM->MOVIE->count(); $i < $c; $i++ ){

    $html .= '<li>';
    $html .= '<a>
    <img src="https://[url]'.rawurlencode($this->_decode_path($xml->COM->MOVIE[$i]->attributes()->dbIcoFilename)).'" id="imgThumb" alt="'.$xml->COM->MOVIE[$i]->attributes()->nameS.'" />
    <h1>'.$xml->COM->MOVIE[$i]->attributes()->nameS.'</h1>
    </a>';
    $html .= ' </li>';

}
$html .= '</ul>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:07:26.450

问题是您正在为每个图像创建新的 ul。在这个循环中：

```
 //display image count, encode url/path
for($i = 0, $c = $xml->COM->MOVIE->count(); $i < $c; $i++ ){
    $html .= '<ul data-role="listview" class="ui-listview" data-inset="true">';
    $html .= '<li>';
    $html .= '<a>
    <img  src="https://[url]'.rawurlencode($this->_decode_path($xml->COM->MOVIE[$i]->attributes()->dbIcoFilename)).'" id="imgThumb" alt="'.$xml->COM->MOVIE[$i]->attributes()->nameS.'" />
    <h1>'.$xml->COM->MOVIE[$i]->attributes()->nameS.'</h1>
    </a>';
    $html .= ' </li>';
    $html .= '</ul>';
} 
```

在循环外创建 ul，因此每个 li 都放在同一个无序列表中

# javascript - 如何在没有单击注销按钮的情况下识别用户未注销？

> ID：10025579
> 
> 赞同：1
> 
> 时间：2012-04-05T08:57:26.357
> 
> 标签：javascript, jquery, button, logout, stay-logged-in

如何使用 jQuery 或 javascript 在不单击注销按钮的情况下识别用户未注销。

在这里，当用户在浏览器中按下后退按钮返回上一页时未注销时，我需要出现注销按钮。

这是我的注销按钮：

`<a id="webviewbtn" href="#"><img src="img/logout.png" style="float:right;" /></a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:24:56.283

我更喜欢一种不需要异步调用服务器的方法来节省资源。

登录后，您的系统将设置一个带有会话 ID 的 cookie。您还可以通过您的后端设置一个 cookie，该 cookie 可用于确定客户是否登录。

```
//using php here
setcookie('customer',1); //customer is logged in

setcookie('customer',0); //customer is not logged in 
```

在您的前端，您可以使用 jquery/javascript 来检查该状态。我假设在这里你有 jquery cookie 插件包括[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
if ( $.cookie('customer') === 1 ){
    $('#webviewbtn').show(); //show logout button
}
else{
    $('#webviewbtn').hide(); //no logout button needed
} 
```

在那个场景中，“客户”cookie 与会话 cookie 具有相同的域和相同的持续时间，这一点非常重要。否则，回头客可能会将客户 cookie 设置为 1，但会话 cookie 已经过期。此外，从客户调用的所有操作都需要在后端进行验证，以验证状态 customer === 1 在那里仍然有效。否则你有一个很大的安全问题，因为每个人都可以将该 cookie 设置为 1 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:14:57.017

在您的网页上执行任何形式的操作时，请使用异步或同步的方法调用验证用户的 Web 服务。

如果服务器返回正常消息，则用户仍将登录。此操作可以在呈现注销按钮或用户执行任何其他“重要”操作时执行。

您还可以将信息存储在具有过期时间的 cookie 中。然后可以进行管理，如果您在浏览器中按下后退按钮，则 cookie 被清除并且用户被注销或您拥有什么。

这种实现有很多可能性，不幸的是，我这里没有“最佳实践”案例可以提供给您。

# c++ - 使用 STL 容器制作连续矩阵变量

> ID：10025580
> 
> 赞同：1
> 
> 时间：2012-04-05T08:57:27.430
> 
> 标签：c++, stl

我正在寻找一种使用 STL 容器（例如，std::vector）来获得在内存中连续的 Matrix 变量（即，一堆有序的列向量）的方法。一种选择是：

```
vector< vector<float> > mat;
mat.push_back (column1); // column1 is of type vector<float> 
mat.push_back (column2); // column2 is of type vector<float> 
```

`&mat[1][0]`这在不等于的意义上是不连续的`&mat[0][N-1] + 1`，其中`N`是 的长度`column1`。

另一种选择是：

```
vector< float > mat;
float f1[] = {1., 2., 3.};
float f2[] = {4., 5., 6.};
mat.insert (mat.end (), f1, f1 + 3);
mat.insert (mat.end (), f2, f2 + 3); 
```

这在内存中是连续的，但强制我使用浮点数组。

**编辑**

为了清楚起见，我更喜欢类似的选项`vector < vector<float> >`，因此我可以将给定的列作为 STL 向量访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:03:37.763

我会编写自己的矩阵类，它使用 a`std::vector<float>`作为存储的后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:10:39.500

据我所知，你不能用标准库简单地做到这一点，但你总是可以使用 Boost 的[多维数组](http://www.boost.org/doc/libs/1_49_0/libs/multi_array/doc/index.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T09:13:02.447

子类 a `vector<float>`。制作尺寸`rowSize*colSize`。内存是连续的，因为它是一个单一的向量。

对于将列作为向量访问的部分，请考虑使用两个迭代器访问列以标记列的范围。修改列上的算法以使用`RandomAccessIterator`符合标准的迭代器，或者使用一个`Column`类来包装两个迭代器，该类从`T& operator[](size_t)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T09:21:35.133

为了确保数据确实是连续的，我认为您需要将其基于单个数组类型对象，根据您的要求具有静态或动态大小，并负责所有簿记和访问。看看[提升矩阵](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/matrix.htm)。不久前，我研究了[静态大小的矩阵](http://project-mathlibs.web.cern.ch/project-mathlibs/sw/html/SMatrix.html)，尽管我不建议您使用这些东西，但它是一个（老式）如何完成的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T09:12:29.683

看看[这](https://msmvps.com/blogs/gdicanio/archive/2010/12/28/a-simple-2d-matrix-class.aspx)是否对您有帮助（如果您想要以列为主的存储，您可能必须修改源代码）。

# python - 查找不在集合中的数字

> ID：10025584
> 
> 赞同：0
> 
> 时间：2012-04-05T08:57:35.293
> 
> 标签：python, random, python-3.x, integer

我试图找到一种合理有效的方法来获取不在集合中的任何单个整数。因此，例如，如果我有`numbers={1, 4, 9}`，那么有效的结果将是`3`。我可以这样做：

```
n = random.randint(-100, 100)
if n not in numbers:
    return n 
```

但我不想被限制在任意范围内（例如 -100 -> 100），因为我不知道该集合有多大。另一种选择是遍历每个整数，但这将非常低效。

有没有人对这样做的更好方法有任何建议？

**编辑：**由于关于我正在尝试做什么的问题很多，我正在更新这个问题以解释一些背景。

我实际上想要实现的是这样的映射：where 和`{a: 1, b: 2, c: 1}`是`a`对象实例。这个值是一个组的唯一值，所以我可以告诉它，并且在第 1 组和第 2 组中。实际数字无关紧要，它只是组的唯一键，与此结构之外的任何内容都无关。实际结构是一个包含两个字段的数据库表，这两个字段都已编入索引，以便我可以快速找出，例如，与.`b``c``a``c``b``a`

现在我需要唯一的号码，是当我想添加一个组时。这不会经常发生，因此它不必非常高效，但由于数据量可能会变得非常大，我需要降低迭代次数。我意识到有一些简单的方法可以在可接受的限制下执行此操作，例如使用`randint`大范围（例如 1e6），或者甚至可能使用数据库函数。但是，由于我一直在考虑这一点，因此找到一个巧妙的解决方案来填充没有硬编码限制的值已成为一个有趣的问题。显然内存限制（例如整数的最大大小）仍然适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:03:12.217

怎么样`max(numbers)+1`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:30:41.970

> 不在集合中的任何单个整数

但是有无限个整数值，所以有无限个整数值不在有限集中。除非您在谈论有限范围内的整数（例如 16 位）。

最有效的解决方案将取决于整数集的完整性 - 如果它是稀疏的，那么随机选择一个数字可能会更频繁地返回一个不在集合中的数字。如果差距很少，那么优化的搜索将更有效。这两者都依赖于对集合的排序列表。

查看搜索方法，可以通过对数据进行分区来加快搜索速度：计算列表中数字的最低和最高索引的平均值 M，如果 dataset[M]<(M-dataset[0]) 那么有间隙，否则检查 dataset[last]<(dataset[0]+last) 在这种情况下，后半部分有间隙，对有间隙的一半数据重复该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:03:27.017

```
def numnotinset(myset):
  i = min(myset)
  while True:
    i += 1
    if not i in myset:
      return i 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:33:42.490

不完全确定您需要什么

```
>>> numbers = {1, 4, 9}
>>> from itertools import count
>>> next(x for x in count() if x not in numbers)
0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T11:27:53.217

*不，它可以是任何数字。我基本上是在尝试生成要在字典中使用的键。*

听起来像一个[XY 问题](http://mywiki.wooledge.org/XyProblem)。

为什么要用随机数键入字典？你甚至应该使用字典吗？

如果您需要数字索引，对于字典，最简单的方法是记录给出的最后一个键，然后当您需要另一个键时，增加这个数字并使用它。

您忽略了因删除和/或偶尔重新编号而导致索引丢失的问题。

# android - 从桌面应用程序向安卓手机发送自定义意图

> ID：10025595
> 
> 赞同：0
> 
> 时间：2012-04-05T08:58:25.317
> 
> 标签：android, sqlite, android-intent, desktop-application

我正在开发一个 android 应用程序，它将手机上的数据记录到 SQLite 数据库中。当手机通过 USB 连接到计算机时，我需要我的桌面应用程序向我的手机发送信号，它应该锁定所有表并开始复制数据库（复制到 SD 卡，然后复制到桌面）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:02:19.873

您应该使用网络通信，通过从您的应用程序向 Android 手机发送 tcp 或 udp 包。

[那样](http://www.helloandroid.com/tutorials/simple-udp-communication-example)或[那样](http://www.roman10.net/android-tcp-client-and-server-communication-programmingillustrated-with-example/)的东西。

[您将在此处](http://docs.oracle.com/javase/tutorial/networking/overview/networking.html)找到有关 Java 语言的说明。

# c# - C# WebBrowser 控制页面返回 Windows.Form 函数

> ID：10025598
> 
> 赞同：0
> 
> 时间：2012-04-05T08:58:28.770
> 
> 标签：c#, winforms

我正在编写一个将数据从 Windows 应用程序发送到网站的程序。在 windows 窗体中，我使用 WebBrowser 控件连接到网站并登录。登录后，我希望能够有一个按钮，当用户单击它时，它将在 windows.form 中调用一个函数，以便它可以在后台将数据发送到网站。我想不出办法做到这一点，这真的可能吗？任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:05:03.870

立即想到的机制是共享文件。您的 WinForms 应用程序将`FileSystemWatcher`在共享目录上设置一个。然后 ASPX 页面将更新文件，以便您的 WinForm 知道上传数据。

我不推荐这种方法，相信通过 ASPX 页面通知的 WindowsService 会更好，但是如果您过度受限于您描述的体系结构，上述方法应该是一种解决方法。

# eclipse - 如何在 Eclipse 下载站点上找出包含所需插件的功能

> ID：10025599
> 
> 赞同：28
> 
> 时间：2012-04-05T08:58:30.480
> 
> 标签：eclipse, plugins, eclipse-rcp, update-site, target-platform

在针对目标平台开发 RCP 应用程序时，我（[和其他人](https://stackoverflow.com/questions/10001143/eclipse-rcp-target-platform-bundle-org-eclipse-ui-views-properties-tabbed-can/10014934#comment12809771_10014934)）经常遇到需要从 Eclipse 发布软件站点添加的依赖项。每当我的 IDE 中包含插件但目标平台中未包含插件时，我尝试从产品定义中运行应用程序时，我会收到一个警告屏幕，通知我无法解析某个捆绑包。

“没问题，只需将包含插件的特性从Eclipse下载站点添加到目标平台，并将需要的插件添加到Plug-in Project/Feature Project，whathaveyou....”

但是，AFAIK，没有简单的方法（例如，网站）来找出哪个功能包含哪个插件。例如，为了添加`org.eclipse.ui.views.properties.tabbed`，我需要知道该插件包含在`Eclipse Platform SDK`功能中（以及其他）。

到目前为止，我还没有找到一种简单的方法来找出哪个功能包含哪个插件。我通常从谷歌搜索插件名称开始，然后尝试在搜索结果中查找教程或类似内容，这可能会告诉我要包含哪些功能才能找到插件。当然，这可能很乏味。

所以我的问题是：有没有更好的，甚至是官方（或官方）的方式来快速简单地找到这些信息？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-13T12:13:12.417

如果您启动 p2 控制台，您可以使用 p2 查询语言来查找依赖于包的所有功能。我的例子是在 Eclipse Juno (4.2) 中：

1.  在控制台视图中切换到 OSGi 控制台
2.  ss p2.console # 查找控制台捆绑包号
3.  felix:start -t **consoleBundleNumber**

现在您可以发出 p2 查询。要查找当前安装中的哪些功能包含**org.eclipse.jface**，您可以使用：

```
osgi> provlpquery this "select(parent | parent.properties['org.eclipse.equinox.p2.type.group'] == true && parent.requirements.exists(rc | everything.exists(iu | iu.id == 'org.eclipse.jface' && iu ~= rc)))" true
org.eclipse.e4.rcp.feature.group 1.1.0.v20120521-2329-8yFTIGF3GGduEYqkQB9M3DKn
org.eclipse.e4.tools.css.spy.feature.feature.group 0.12.0.v20111206-1509-17B-7w3123161302752 
```

要找出包含**org.eclipse.ui.views.properties.tabbed**的功能，您可以使用：

```
osgi> provlquery http://download.eclipse.org/releases/juno "select(parent | parent.properties['org.eclipse.equinox.p2.type.group'] == true && parent.requirements.exists(rc | everything.exists(iu | iu.id == 'org.eclipse.ui.views.properties.tabbed' && iu ~= rc)))" true
org.eclipse.amp.amf.feature.group 0.9.0.v20120528-0244
org.eclipse.bpel.feature.feature.group 1.0.1.v20120606-0845-CI
org.eclipse.jwt.feature.feature.group 1.2.0.v201205310546-7O7i-FK_Qj4QkVn3kW9q
org.eclipse.platform.feature.group 4.2.0.v20120528-1648-9JF7BHV8FyMteji0MoOeOuU6sAnxIeYtKNM1dK
org.eclipse.ptp.etfw.tau.feature.group 6.0.0.201206052145
org.eclipse.tcf.te.feature.feature.group 1.0.0.201206051725
org.eclipse.tcf.te.tcf.feature.feature.group 1.0.0.201206051725 
```

在这种情况下，**org.eclipse.platform.feature.group**是最正确的。

第一个示例是在运行的 eclipse 中查询配置文件，因此它使用**provlpquery this**。第二个示例是指定一个外部 p2 存储库，因此它使用**provlquery repo**。

有关 p2 控制台的更多信息，请参阅[http://wiki.eclipse.org/Equinox_p2_Console_Users_Guide](http://wiki.eclipse.org/Equinox_p2_Console_Users_Guide)。有很多黑魔法在发生:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-07T12:35:49.493

还有一个 GUI 实用程序可以回答这个问题，[p2browser](https://github.com/ifedorenko/p2-browser)：

*   添加相关的 P2 存储库
*   按 IU、功能或 (Java) 包过滤
*   右键单击相关 IU 并选择“打开包括功能”

该实用程序对于搜索提供特定 Java 包的插件/包也很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:46:10.867

尽管开发了很多 RCP 应用程序，但我还没有找到一个方便的解决方案来解决这个问题。Eclipse IDE 本身就是一个很好的插件来源。为了找出依赖关系，我发现**插件清单编辑器中的****依赖关系分析**功能非常有用。此外，可以通过**Product Configuration Editor**右上角的Validate *...按钮来***验证***产品*配置。如果缺少插件，则会将它们列为结果。

 ********到目前为止，我没有尝试过的一种可能性是通过指定一个或多个软件站点来定义**目标平台**，而不是依赖本地下载的功能和插件。

当然，这不是您要寻找的答案，但恕我直言，这个问题没有真正的解决方案。在构建RCP 应用程序的**目标平台**时，只有一些工具和工具（上面部分描述）有助于减轻痛苦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T23:57:21.400

基本思想：获取**所有**特征的定义，然后搜索它。

更详细的说明： [http ://divby0.blogspot.com/2010/10/howto-find-feature-that-c​​ontains-plugin.html](http://divby0.blogspot.com/2010/10/howto-find-feature-that-contains-plugin.html)

看起来不是一个有效的解决方案，但它仍然是一些东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T04:51:29.877

好的，经过很多谷歌和以上的回答，我做了以下

1.  在eclipse中创建新的通用项目
2.  在此项目中添加功能文件夹（作为链接文件夹）
3.  在这个项目中使用我的插件名称搜索所有 feature.xml

我希望这对其他人也有帮助********

# objective-c - 将触摸传递到 UIWebView 的一部分

> ID：10025600
> 
> 赞同：1
> 
> 时间：2012-04-05T08:58:31.200
> 
> 标签：objective-c, ios, uiwebview

我有一个 UIWebView。使用这样的东西：

[http://blog.evandavey.com/2009/02/how-to-make-uiwebview-transparent.html](http://blog.evandavey.com/2009/02/how-to-make-uiwebview-transparent.html)

.. 我已使 UIWebView 透明。我现在需要能够将 web 视图上的触摸传递到下面的视图，但只能传递到 web 视图的矩形部分。

所以，想象一下 webview 是一个正方形，它的中心有一个正方形区域，必须通过触摸到下面的视图。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:48:29.230

这是一种更具体的`hitTest`操纵形式。

首先，创建一个`UIView`. 我打电话给我`ViewWithHole`的。

在其标题中，为 a 定义一个属性，该属性`UIView`将是通过外部视图的孔。将其设为`IBOutlet`.

```
@property (retain) IBOutlet UIView *holeView; 
```

然后覆盖`hitTest`. 如果该点在洞内返回击球，则返回。否则返回它通常会。

```
- (UIView*) hitTest:(CGPoint)point withEvent:(UIEvent *)event;
{
    CGPoint pointInHole = [self convertPoint:point toView:self.holeView];
    UIView *viewInHole = [self.holeView hitTest:pointInHole withEvent:event];

    if (viewInHole)
        return viewInHole;
    else
        return [super hitTest:point withEvent:event];
} 
```

在 Interface Builder 中，或以编程方式，放置一个`ViewWithHole`. 按顺序将 a`UIView`和 a放入`UIWebView`其中。使. `UIView`_ `holeView`_`ViewWithHole`

![Interface Builder 配置 ViewWithHole](../Images/fab003adb70b6b5e1c06853f3a36e625.png)

它`holeView`本身可以是交互式的，或者您可以在其中放置任意数量的交互式视图。在这里，我放了一些标准视图以确保它们正常工作。孔内的任何点击都将发送到它及其子视图，而不是`UIWebView`顶部。外面的任何水龙头`holeView`都将`UIWebView`照常接收。

您可以在孔前显示任意数量和类型的视图；重要的`holeView`是正确连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:50:50.990

我有另一个想法：获得全局点击。当有人点击 iPhone 时，它​​会向 global 发送一条消息`sendEvent`。所以你听它并做你想做的任务。

为此，您需要将`UIApplication`. 首先，在 main.c 中使用这个函数

```
 int retVal = UIApplicationMain(argc, argv, @"myUIApplicationClass" ,nil); 
```

然后实现这个类：

```
@implementation BBAplicationDebug

- (void)sendEvent:(UIEvent *)event
{
    [super sendEvent:event];
    NSSet *touches = [event allTouches];
    UITouch *touch = touches.anyObject;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"userClick" object:touch];
}

@end 
```

现在你听这个 NSNotification 并做所有的检查：是否在正确的框架中，有正确的 UIView 等等……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:03:32.833

我认为您的问题有一个非常简单的解决方案...您没有指定它，但我推断您不希望用户与 webview HTML 交互。如果是这样，只需在 webview 上禁用 UserInteractionEnabled，触摸就会通过。

然后，您需要您提到的位于中心的活动视图。

希望对您有所帮助，如果您需要任何澄清，请发表评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T23:24:02.950

您可以创建一个子类`UIWebView`并覆盖它`hitTest:withEvent:`并`pointInside:withEvent:`忽略“洞” - 但[Apple说您不应该继承 UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

或者，您可以创建一个 UIView 子类并将 UIWebView 作为子视图放置在其中，然后使其`hitTest:withEvent:`方法返回 UIWebView 下方的视图。

这是子类的通用`hitTest`方法`UIView`，它优先考虑不是 UIWebView 的任何交互式子视图，即使它们位于 UIWebView 下方。它没有任何特定的“洞”检测，但`hitTest`也是您想要这样做的地方。`point`在忽略 UIWebView 之前先弄清楚是否在洞中。

```
// - (UIView*) hitTest:(CGPoint)point withEvent:(UIEvent *)event;
// This overrides the usual hitTest method to give priority to objects that are not in a chosen class.
// For this example, that class has been hard-coded to UIWebView.
// This allows the webview to be displayed over other interactive components.
// For the UIWebView case, it would be nice to look at its layout and only return views beneath it in locations where it is transparent, but that information is not obtainable.
- (UIView*) hitTest:(CGPoint)point withEvent:(UIEvent *)event;
{
    UIView *viewFound = nil;
    Class lowPriorityClass = [UIWebView class];
    NSMutableArray *lowPriorityViews = [NSMutableArray array];

    // Search the subviews from front to back.
    NSEnumerator *viewEnumerator = [[self subviews] reverseObjectEnumerator];
    UIView *subview;
    while ((subview = [viewEnumerator nextObject]) && (!viewFound))
    {
        // Save low-priority cases for later.
        if ([subview isKindOfClass:lowPriorityClass])
            [lowPriorityViews addObject:subview];
        else
        {
            CGPoint pointInSubview = [self convertPoint:point toView:subview];
            if ([subview pointInside:pointInSubview withEvent:event])
            {
                // Subviews may themselves have subviews to return.
                viewFound = [subview hitTest:pointInSubview withEvent:event];
                // However, if not, return the subview itself.
                if (!viewFound)
                    viewFound = subview;
            }
        }
    }

    if (!viewFound)
    {
        // At this point, no other interactive views were found, so search the low-priority cases previously stored to see if they apply.
        // Since the lowPriorityViews are already in front to back order, enumerate forward.
        viewEnumerator = [lowPriorityViews objectEnumerator];
        while ((subview = [viewEnumerator nextObject]) && (!viewFound))
        {
            CGPoint pointInSubview = [self convertPoint:point toView:subview];
            if ([subview pointInside:pointInSubview withEvent:event])
            {
                // Subviews may themselves have subviews to return.
                viewFound = [subview hitTest:pointInSubview withEvent:event];
                // However, if not, return the subview itself.
                if (!viewFound)
                    viewFound = subview;
            }
        }
    }

    // All cases dealt with, return whatever was found.  This will be nil if no views were under the point.
    return viewFound;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T19:08:53.653

我的第一个想法是这样的：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch * touch = (UITouch *)[touches anyObject];
CGPoint location = [touch locationInView:self];

//min_x,max_x,min_y,max_y are the min and max coord of your rect below

if (CGRectContainsPoint(CGRectMake(min_x,min_y,max_x,max_y),location))
{
     //send the touches to the view below
}

} 
```

如果下面的视图是静止的，但您没有提供有关下面视图的任何信息（如果有按钮，或者它是否移动......类似的东西），这应该可以工作，所以......是的......这样做

# ios - 构建失败错误：未定义的符号

> ID：10025601
> 
> 赞同：0
> 
> 时间：2012-04-05T08:58:34.590
> 
> 标签：ios, delegates, uikit

当我尝试构建我的项目时出现此错误。

```
Undefined symbols for architecture i386:
  "_OBJC_IVAR_$_UINavigationBar.images", referenced from:
      -[UINavigationBar(CustomImage) drawRect:] in AppDelegate.o
      -[UINavigationBar(CustomImage) setImagesNames:] in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:05:41.017

转到您的 AppDelegate 类并检查您的 UINavigationBar 类别的包含。您的类别要么在项目中丢失，要么是私有的。我最好的猜测是它丢失了，或者当你创建它时你没有选中目标复选框。他们将其删除并重新添加。重新添加时要小心，以检查活动目标是否有文件。

# php - 无法将 Facebook 上的图片贴在墙上

> ID：10025603
> 
> 赞同：0
> 
> 时间：2012-04-05T08:58:40.633
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用 PHP 构建一个 Facebook 画布应用程序，它应该将图像上传到粉丝专页的相册中，然后在其墙上发布一个提要，上面写着“我上传了一张显示如何...的图像。”下面的图片带有下面的链接（就像您上传图片时一样），而不是来自页面本身的名称，而是来自当前登录用户的名称。该应用程序有权在页面的墙上发布内容。我对这一切有几个问题：

*   我可以使用当前用户的名称发布帖子，但它们都出现在“其他人最近发布的帖子”部分下，并且在您打开帖子之前图像不可见。
*   我无法发布已托管在 Facebook 服务器上的图像，因此无法显示我刚刚上传的图像。我收到错误“流中不允许 FBCDN 图像”。代码如下所示：

    ```
    $this->facebook->api('/' . $page_id . '/feed', 'POST', array(
         'link' => 'http://www.facebook.com/photo.php?fbid=000000000000&set=a.000000000000.38358.000000000000',
         'picture' => 'http://a5.sphotos.ak.fbcdn.net/hphotos-ak-ash4/5041_000000000_00000000_1960517_6404612_n.jpg',
         'caption' => 'XXX uploaded this picture',
         'message' => 'some text',
         'access_token' => $access_token
         )
      ); 
    ```

    任何人？

# jquery - 如何使用任何 UI 工具包设置表单元素的样式？

> ID：10025604
> 
> 赞同：1
> 
> 时间：2012-04-05T08:58:44.600
> 
> 标签：jquery, html, css, forms, user-interface

我有一个类似于[此链接](http://graphicriver.net/item/styllus-ui-kit-10/1865716)的 UI 工具包。

我想将相同的样式分配给 HTML 表单元素，如单选按钮、选择框、复选框、文本框、文本区域等。将样式应用于这些表单元素的最佳方式是什么，以便它们看起来与 UI 工具包中的完全一样？另外，如果有任何基于 javascript 的插件可用，请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:35:54.813

形式化很棒。您可以轻松地操纵样式[http://formalize.me/](http://formalize.me/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:31:53.867

您必须更具体一些，您是想从下载的一些图形从头开始，还是有一些 css 开始？

作为一个起点，我可能会首先选择基本的表单元素，例如 input、textarea、select，然后将共享样式应用于这些元素，然后根据需要使用更具体的目标（例如“input [type = “文本”]、输入[type="submit"] 等...

# ios - Xcode 4.3.2 临时签名权利 (0xE8008016)

> ID：10025607
> 
> 赞同：0
> 
> 时间：2012-04-05T08:58:56.793
> 
> 标签：ios, xcode4, distribution, ad-hoc-distribution, code-signing-entitlements

我遇到了这个问题，我需要为 3 个应用程序中的每一个构建一个临时构建。我一直使用这个功能，从来没有遇到过问题。构建项目后，我使用管理器将其发送到设备，但不幸的是它向我显示了以下消息：

> 您的应用程序的代码签名权利文件中指定的权利与您的配置文件中指定的权利不匹配。
> 
> (0xE8008016)。

我进行了不同的搜索并应用了所有可能的解决方案，但它不起作用。
我试图恢复设备，重新创建证书，配置文件等......但没有办法。
只能安装其中一个应用程序，但构建设置似乎与其他应用程序没有任何不同。
配置文件中的权利似乎是正确的。

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
    <string>DCQ6Z436Z4.it.xxxxx.*</string>
    <key>get-task-allow</key>
    <false/>
    <key>keychain-access-groups</key>
    <array>
        <string>DCQ6Z436Z4.*</string>
    </array>
</dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:45:10.050

原来是Xcode的一种奇怪的错误。
这是解释。该项目是使用 xcode 3 制作的，在 xcode 3 中创建临时构建是创建另一个 buld 设置所必需的。自从 xcode 4 出来后，我再也没有使用过该方案，我曾经使用分发配置文件进行存档，然后使用临时 prov 配置文件进行分发/共享。如果您像我一样拥有另一个旧方案，并且该应用程序似乎仅通过最终分发配置文件进行了认证，则此方法似乎被破坏了。修复方法是设置“发布”版本以使用临时配置文件，现在一切似乎都工作正常。
希望这可以帮助。

# jquery - 获取多个（多个）选择框的选定值

> ID：10025613
> 
> 赞同：1
> 
> 时间：2012-04-05T08:59:38.797
> 
> 标签：jquery

看看这段代码，我写的：[http](http://pastebin.com/TZpUAWpA) ://pastebin.com/TZpUAWpA和这个 jQuery，基本上是从 jquery 文档复制粘贴的：http: [//pastebin.com/Ecu0T5Kv](http://pastebin.com/Ecu0T5Kv)

问题是，我想这样做，每个都`<p class="java"></p>`显示前一个选择框的选定值。

目前，它仅适用于底部的标签，底部选定的值适用于所有`<p>`标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:13:35.287

这确实有效，希望它是您正在寻找的：

[小提琴](http://jsfiddle.net/JMjKU/2/)

```
$(document).ready(function(){
     $('.parent').each(function(){
            var theVal = $(this).find('select option:selected').html();
            $(this).find('p').html(theVal);
        });
    $('.single').change(function(){
        $('.parent').each(function(){
            var theVal = $(this).find('select option:selected').html();
            $(this).find('p').html(theVal);
        });
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="inputArea">
    <div class="parent">
    <select class="single"><option selected value="uzbuve">Uzbūve</option>
        <option  value="paligteikuma-veids">Palīgteikuma Veids</option>
        <option  value="gramatiskais-centrs">Gramatiskais Centrs</option>
        <option  value="saistitajvarda-kategorija">Saistītājvārda kategorija</option>
        <option  value="saistitajvards">Saistītājvārds</option>
    </select>
    <input class="inpt" id="" type="text" name="">
    <p class="java">saistitajvards</p>
    </div>
    <div class="parent">
    <select class="single"><option  value="uzbuve">Uzbūve</option>
        <option selected value="paligteikuma-veids">Palīgteikuma Veids</option>
        <option  value="gramatiskais-centrs">Gramatiskais Centrs</option>
        <option  value="saistitajvarda-kategorija">Saistītājvārda kategorija</option>
        <option  value="saistitajvards">Saistītājvārds</option>
    </select>
    <input class="inpt" id="" type="text" name="">
    <p class="java">saistitajvards</p>
   </div>
    <div class="parent">
    <select class="single"><option  value="uzbuve">Uzbūve</option>
        <option  value="paligteikuma-veids">Palīgteikuma Veids</option>
        <option selected value="gramatiskais-centrs">Gramatiskais Centrs</option>
        <option  value="saistitajvarda-kategorija">Saistītājvārda kategorija</option>
        <option  value="saistitajvards">Saistītājvārds</option>
    </select>
    <input class="inpt" id="" type="text" name="">
    <p class="java">saistitajvards</p>
    </div>
    <div class="parent">
    <select class="single"><option  value="uzbuve">Uzbūve</option>
        <option  value="paligteikuma-veids">Palīgteikuma Veids</option>
        <option  value="gramatiskais-centrs">Gramatiskais Centrs</option>
        <option selected value="saistitajvarda-kategorija">Saistītājvārda kategorija</option>
        <option  value="saistitajvards">Saistītājvārds</option>
    </select>
    <input class="inpt" id="" type="text" name="">
    <p class="java">saistitajvards</p>
    </div>
    <div class="parent">
    <select class="single"><option  value="uzbuve">Uzbūve</option>
        <option  value="paligteikuma-veids">Palīgteikuma Veids</option>
        <option  value="gramatiskais-centrs">Gramatiskais Centrs</option>
        <option  value="saistitajvarda-kategorija">Saistītājvārda kategorija</option>
        <option selected value="saistitajvards">Saistītājvārds</option>
    </select><input class="inpt" id="" type="text" name="">
    <p class="java">saistitajvards</p>
    </div>

</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:30:50.463

你的代码：

```
 $(".inputArea").each(function(i){
        var singleValues = $("option:selected").val();
        $("p").html(singleValues);
    }); 
```

有几个问题：

*   `$(".inputArea").each(function(i){`说用“inputArea”类处理每个元素，但只有一个，你的容器 div。
*   `$("option:selected")`匹配*所有*选择的选项元素，但随后
*   `var singleValues = $("option:selected").val();`获取选择的第一个选项的值。
*   `$("p").html(singleValues);`设置*所有*段落元素的内容。

你可以尝试这样的事情：

```
$("select.single").each(function(i){
     var $this = $(this);
     $this.nextUntil("p").next().html($this.val());
}); 
```

演示：http: [//jsfiddle.net/mYNXF/](http://jsfiddle.net/mYNXF/)

其中说要处理“单个”类的所有选择元素。对于每一个，找到以下段落元素并设置其值。请注意，该[`.next()`方法](http://api.jquery.com/next/)选择紧随其后的元素或不选择任何内容，它不会继续搜索寻找匹配项，而[`.nextUntil()`](http://api.jquery.com/nextUntil/)搜索最多但不包括与选择器匹配的第一个元素。在您的 html 结构中，段落元素不会立即跟随 select 元素，所以这就是我同时使用`.nextUntil("p")`和的原因`.next()`。

或者，您可以执行以下操作：

```
var $inputArea = $(".inputArea"),
    $selects = $inputArea.find("select.single"),
    $ps = $inputArea.find("p.java");

function displayVals() {
    for (var i = 0; i < $selects.length; i++) {
        $ps.eq(i).html($selects.eq(i).val());
    }
} 
```

演示：http: [//jsfiddle.net/mYNXF/2/](http://jsfiddle.net/mYNXF/2/)

无论哪种方式都适用于您当前的 html 结构。

# algorithm - 调度，贪心算法

> ID：10025616
> 
> 赞同：4
> 
> 时间：2012-04-05T08:59:48.030
> 
> 标签：algorithm, language-agnostic, greedy

这是流行的 El Goog 问题的变体。

* * *

考虑以下调度问题：有 n 个作业，i = 1..n。有 1 台超级计算机和无限的 PC。每个作业都需要先经过超级计算机的预处理，然后再在 PC 上进行处理。超级计算机上作业 i 所需的时间为 si，i = 1..n。对于 PC，它是 pi，i = 1..n。PC 可以并行工作，但超级计算机一次只能完成一项工作。创建一个时间表 S，超级计算机将根据该时间表处理这些作业。计划 S 中的完成时间 Ti(S) 由 PC 上作业完成的时钟时间给出。我们想找到一个最小化 Maxi[Ti(s)] 的时间表*（可以理解为：我们需要找到一个最小化最高完成时间的时间表）*. 提出了以下贪心算法： 在 PC 上按处理时间的递减顺序排列作业。该算法的复杂度为 O(nlogn)。要么证明这个算法产生了一个最优解，要么提供一个反例来证明它没有。

* * *

我的解决方案（不确定这是否正确）：我认为我们如何订购工作并不重要。最高完成时间仍然相同。考虑这个在 PC 上处理作业列表的时间示例：<5、7、17、8、10>。这将产生 <5, 12, 29, 37, 47> 的完成时间。根据算法，我们将列表排序为 <17, 10, 8, 7, 5> 并将产生 <17, 27, 35, 42, 47> 的完成时间。因此，虽然从技术上讲，贪心算法确实给出了最佳排序，但它需要 nlogn 时间来做到这一点，而简单地遍历作业列表会给我们同样的结果。

如果有人认为贪心算法会更好，或者我的方法有缺陷，我会很感激你的想法。谢谢！

* * *

**更新**：我想我可能有答案。超级计算机花费的时间无关紧要。这里的关键是 PC*并行*运行。从 pi = <5, 7, 17, 8, 10> 的初始示例中，让我们添加 si = <8, 5, 1, 12, 9>。现在，在默认的未排序顺序中，我们的处理时间为 <13, 20, (8 + 5 + 1 + 17 = )31, 34, 45>。所以 45 是完成的时间。假设 pi 的排序顺序是递减的。输出为：<18、20、30、34、40>。[排序输入：pi = <17, 10, 8, 7, 5>, si = <1, 9, 12, 5, 8>]。

这里有一个例子可以说明一切：si = <17, 10>, pi = <10, 17>。未排序情况下的输出（也恰好按 si 的降序排序）将是 <27, 44>。根据 pi 排序，输入为：si = <10, 17>, pi = <17, 10>。输出为 <27, 37>。由于 PC 并行运行，因此您希望最后发送最短的作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:15:14.053

**对于数量有限的 PC：**

wlog 假设没有超级计算机，你的问题将转换为 Minmum Makespan [Scheduling](http://www.diku.dk/OLD/undervisning/2006-2007/2006-2007_b2_415/msappr.pdf)问题（或[ppt](http://www.authorstream.com/Presentation/amiri-862184-minimum-makespan-scheduling/)），即 NP-Hard。因此，您当前的算法不起作用或 P = NP。

但是贪心算法对于近似很有用，您也可以将[Bin Packing](http://en.wikipedia.org/wiki/Bin_packing_problem)转换为这个问题，并通过固定数量的近似误差找到好的结果，但运行时不会是好的多项式（例如 n^10）。

PS：您可以简单地假设没有超级计算机，为此假设 Max(s [i] ) < Min(P [i] ) 的实例。

P.S2：我一开始没有看到无限数量的PC，所以我写了这个，我会考虑无限数量的PC。

**无限案例：**

您当前的算法是错误的，假设以下条件：

```
For PCs: <5, 7, 17, 8, 10>
For super computer: <1000,800,500,600,700). 
```

您当前的解决方案将*失败*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-18T20:09:45.937

这些作业需要按照 PC 时间的降序排列。
来源 - [http://mypathtothe4.blogspot.in/2013/03/greedy-algorithm-example.html](http://mypathtothe4.blogspot.in/2013/03/greedy-algorithm-example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-21T11:33:23.817

在找到这个问题之前，我在[cs.stackexchange](https://cs.stackexchange.com/questions/127479/greedy-sequential-parallel-task-scheduling/127486#127486)提出了同样的问题。[Jaeyoon Kim](https://cs.stackexchange.com/users/122688/jaeyoon-kim)那里的答案证明了贪婪解决方案的最优性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T09:39:07.487

`S={a1,a2,...,an} of n`单位时间任务。一个单位时间的任务恰好需要 1 个单位的时间来完成最后期限的`d1,d2,...,dn, 1<=di<=n` 惩罚`w1,w2,...,wn`。`wi`如果任务`ai`没有按时完成，则会产生惩罚`di`，如果任务在截止日期前完成，则不会受到惩罚。

问题是为 S 找到一个时间表，以最大限度地减少错过最后期限所造成的总损失

我对此有疑问。如下

```
ai 1 2 3 4 5 6 7
di 4 2 4 3 1 4 6
wi 70 60 50 40 30 20 10 
```

这个问题的解决方案是

```
{a2,a4,a1,a3,a7,a5,a6}
penalty, w5+w6=50 
```

# php - 将 AsciiMathML 方程导出为 Excel 格式

> ID：10025620
> 
> 赞同：1
> 
> 时间：2012-04-05T09:00:19.933
> 
> 标签：php, excel, transform, mathml, spreadsheetml

我必须将具有 AsciiMathML 表示法的数学问题列表导出到 Excel 电子表格，并且我想正确显示方程式。我的代码是用 PHP 编写的，我想在服务器端创建 Excel 文件并使其可供下载。

我发现 JavaScript 中有许多库可以将 AsciiMathML 转换为图像，例如[http://dlippman.imathas.com/asciimathtex/AMT.html](http://dlippman.imathas.com/asciimathtex/AMT.html)

但我需要的是使用 PHP 将方程转换为图像，或者最好在服务器端转换为 Excel 方程。有没有人知道我可以使用的任何库？如果有人可以帮助我，我真的很感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:48:40.360

使用[spreadsheetML 样式表](http://ewbi.blogs.com/develops/2005/01/create_excels_s.html)将 MathML 转换为 Excel，使用如下`transformToXML`函数：

```
$xml = new DOMDocument;
$xml->load($file_name);

$xsl = new DOMDocument;
$xsl->load('convert.xsl');

$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl);

$result = $proc->transformToXML($xml) 
```

**参考**

*   [使用 XSLT 创建 Excel 的 SpreadsheetML](http://ewbi.blogs.com/develops/2005/01/create_excels_s.html)

# javascript - Javascript函数总是返回错误的值，尽管变量之前有正确的值

> ID：10025623
> 
> 赞同：2
> 
> 时间：2012-04-05T09:00:29.820
> 
> 标签：javascript

我有一个函数可以返回 xml 文件中属性的最大值

返回的Value总是0，所以我认为JQuery函数下的值不知道里面发生了什么。这是功能：

```
function findHighestValue(url,attr){
var highestValue = 0;
$.ajax({
    type: "GET",
    url: url,
    dataType: "xml",
    success: function(xml) {
        $(xml).find("achievement").each(function(){
             var value = $(this).find(attr).text();
             value = value*1;//typecast
             console.log("value: "+value);//shows correct value
             console.log("highestValue in ajax: "+highestValue);//shows correct value
             if (value >= highestValue){
                 highestValue = value;
                 console.log("Value higher highesValue detected!");//works as intended
             }

        });
    }
});
console.log("Highest Value: "+highestValue);// is 0 again
return highestValue;//always returns 0
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T09:03:00.970

因为它是一个 ajax 请求，所以最后两行在成功方法内的行之前被命中。

除非您设置，否则不能从 ajax 请求返回值`async: false`

您需要通过成功回调处理该值，而不是尝试返回它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:02:21.023

AJAX 是`asynchronous`，因此它不会在`$.ajax()`调用之前等待您的调用`console.log()`，因此是错误的值。所以你是对的`doesnt know what happens inside of it`

为了解决这个问题，您可以将函数的其余逻辑放在您的call 或 set的`success`属性中，尽管您的浏览器会在发生时“冻结”一点`$.ajax``async: false``$.ajax()`

# android - 如何使用 Android Phonegap 将图像设置为墙纸？

> ID：10025625
> 
> 赞同：1
> 
> 时间：2012-04-05T09:00:31.043
> 
> 标签：android, jquery-mobile, cordova

我正在使用`Phonegap`Android`Jquery Mobile`应用程序。我需要从 URL 保存图像并将其设置为墙纸。

我找到了可以处理下载部分的 Phonegap [Downloader插件。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader)是否有实现“设置为墙纸”功能的插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T02:45:35.107

您可以创建Phonegap插件包com.android.test；

```
import java.io.IOException;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;
import org.json.JSONArray;

import android.app.WallpaperManager;
import android.content.Context;

public class testPlugin extends Plugin {
    public final String ACTION_SET_WALLPAPER = "setWallPaper";
    @Override
    public PluginResult execute(String action, JSONArray arg1, String callbackId) {
        PluginResult result = new PluginResult(Status.INVALID_ACTION);
        if (action.equals(ACTION_SET_WALLPAPER)) {
            WallpaperManager wallpaperManager = WallpaperManager.getInstance((Context) this.ctx);
            try {
                wallpaperManager.setResource(R.drawable.ic_launcher);
                result = new PluginResult(Status.OK);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                result = new PluginResult(Status.ERROR, e.getMessage());
            }
        }
        return result;
    }
} 
```

这是 javascript 文件 test.js

```
var TestPlugin = function () {};

TestPlugin.prototype.set = function (ms, successCallback, failureCallback) {  
//  navigator.notification.alert("OMG");
    return cordova.exec(successCallback, failureCallback, 'testPlugin', "setWallPaper", [ms]);
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("test", new TestPlugin());
}) 
```

和主文件调用插件

```
window.plugins.test.set("kaka",
        function () { 
            navigator.notification.alert("Set Success");    
        },
        function (e) {
            navigator.notification.alert("Set Fail: " + e);
        }
    );

; 
```

具有安卓设备权限

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

和 plugin.xml

```
 <plugin name="testPlugin" value="com.android.test.testPlugin"/> 
```

当您使用下载器插件下载图像并使用位图保存时。你只要打电话

```
wallpaperManager.setBitmap(bitmap) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T22:22:16.660

这是我修复 testPlugin.java 的方法。更改在下面以粗体显示。

```
package com.wizeideas.ImageEvolverApp;
import java.io.IOException;
import java.io.InputStream;
import java.util.logging.Logger;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;
import org.json.JSONArray;
import org.json.JSONException;

import android.app.WallpaperManager;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;

public class testPlugin extends CordovaPlugin {
    public final String ACTION_SET_WALLPAPER = "setWallPaper";
    @Override
    public boolean execute(String action, JSONArray arg1, CallbackContext callbackContext) {
        PluginResult result = new PluginResult(Status.INVALID_ACTION);
        if (action.equals(ACTION_SET_WALLPAPER)) {
            Context ctx = this.cordova.getActivity().getApplicationContext();
            WallpaperManager wallpaperManager = WallpaperManager.getInstance(ctx);
            try {
                InputStream bitmap=null;
                try {
                    bitmap=this.cordova.getActivity().getAssets().open("www/img/" + arg1.getString(0));
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } //reference to image folder

                Bitmap bit=BitmapFactory.decodeStream(bitmap);
                wallpaperManager.setBitmap(bit);
                result = new PluginResult(Status.OK);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                result = new PluginResult(Status.ERROR, e.getMessage());
            }
        }
        callbackContext.sendPluginResult(result);
        return true;
    }
} 
```

您还需要更改 res/xml 下的 config.xml 文件以包括：

```
<feature name="testPlugin">
  <param name="android-package" value="com.companyname.yourappname.testPlugin"/>
</feature> 
```

# css - 仅使用 HTML 和 CSS 的弯曲帆形状？

> ID：10025627
> 
> 赞同：8
> 
> 时间：2012-04-05T09:00:35.183
> 
> 标签：css, shape, css-shapes

是否可以仅使用 HTML 和 CSS 创建下面的弯曲帆形状？

![帆形](../Images/54285cc666777a2fc24627404053509b.png)

我可以从[这个答案](https://stackoverflow.com/questions/7073484/how-does-this-css-triangle-shape-work)中看到，我可以使用以下方法创建一个直边帆：

```
#triangle {
    width: 0;
    height: 0;
    border-right: 50px solid transparent;
    border-bottom: 100px solid red;
} 
```

看起来像：

![直边帆](../Images/df2574bc8ec8dfb395a80ab41dc98066.png)

或者我可以更接近边界半径：

```
#sail {
    background: #ff0000;
    width: 50px;
    height: 100px;
    border-top-right-radius: 50px 100px;
    -moz-border-radius-topright: 50px 100px;
    -webkit-border-top-right-radius: 50px 100px;
    -khtml-border-radius-topright: 50px 100px;
} 
```

看起来像这样：

![弯曲的帆形](../Images/0fa3db3f64e87d65125b5bef8b3db2fc.png)

但并不像我想要的那样优雅。顶部的帆图像具有柔和优雅的曲线。

不使用图像我可以做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:19:46.333

我试试我自己可能是你想要的。

```
.sail{
    width: 50px;
    height: 100px;
    position:relative;
    overflow:hidden;
}
.sail:after{
    width:200px;
    height:200px;
    content:'';
    position:absolute;
    right:0;
    top:-5px;
    -moz-border-radius:100px;
    border-radius:100px;
    background: #ff0000;
} 
```

检查这个[http://jsfiddle.net/wtENa/](http://jsfiddle.net/wtENa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T15:24:23.427

我们可以[`radial-gradient()`](https://developer.mozilla.org/en-US/docs/Web/CSS/radial-gradient)用来绘制这个形状：

```
div {
  background: radial-gradient(200px at -50px 100%, red 50%, transparent 50%);
} 
```

```
div {
  background: radial-gradient(200px at -50px 100%, red 50%, transparent 50%);
  height: 100px;
  width: 50px;
}
```

```
<div>

</div>
```

# extjs - 如何隐藏 extjs 网格列名称？

> ID：10025628
> 
> 赞同：2
> 
> 时间：2012-04-05T09:00:36.380
> 
> 标签：extjs

我有这样的网格：

```
Ext.define('Exp.view.dashboard.Tv', {
    extend: 'Ext.grid.Panel',

    initComponent: function() {
        this.columns = [
            {header: 'Name',  dataIndex: 'name',  flex: 1},
            {
                header: 'Actions',
                xtype: 'actioncolumn',
                items: [
                    {
                        icon   : '/images/icons/star_off.png'
                    }
                ]
            }
        ];

        this.callParent(arguments);
    }
}); 
```

我想隐藏*Name*和*Actions*。也许有一些未记录的配置选项可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:13:11.050

在 extjs 4 中，有“hideHeaders”选项。将其设置为真。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Table-cfg-hideHeaders](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Table-cfg-hideHeaders)

网格面板扩展了表格面板，所以它有这个选项。

# php - 在 2 列中排序结果

> ID：10025639
> 
> 赞同：0
> 
> 时间：2012-04-05T09:01:31.467
> 
> 标签：php, css, foreach

我有一个（php）数组，有 1、2、3、4、5 或 6 个结果。我想在不同的情况下将它们显示如下：

1 个结果：

```
[result 1] 
```

2 个结果：

```
[result 1]  [result 2] 
```

3 个结果：

```
[result 1]  [result 3]
[result 2] 
```

4 个结果：

```
[result 1]  [result 3]
[result 2]  [result 4] 
```

5 个结果：

```
[result 1]  [result 4]
[result 2]  [result 5]
[result 3] 
```

6 个结果：

```
[result 1]  [result 4]
[result 2]  [result 5]
[result 3]  [result 6] 
```

如果我可以只使用 CSS（当然不能使用表格），那就太好了，所以正确的顺序保留在源中，但显示如上。否则我认为我需要一些奇怪的 PHP 循环才能在我的屏幕上以正确的顺序获得这些结果。有人知道怎么做吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:16:26.343

```
$array = array( 1, 2, 3, 4, 5, 6, 7 );

$number_of_columns = floatval(2.0); // float to make the below ceil work
$number_of_items = count( $array );
$items_per_column = ceil( $number_of_items / $number_of_columns );
$current_column = 0;

for ( $i = 0; $i < $number_of_items; $i++ ){

    if ( $i % items_per_column == 0 ){ 
        $current_column++;
    }

    echo $i, ' -> ', $current_column, '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:08:50.053

它猜测不可能只用 css 做某事。您必须将数组一分为二，并将前半部分显示到第一列，后半部分显示到第二列。应该不是很辛苦吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:11:26.407

就像是

```
$out = "<table><tbody>";
for ($i = 0; $i < count($array); $i++){
    $el = $array[$i];
    if(($i % 2) === 0){
        $out .= '<tr>';
    }
    $out .= "<td>$el</td>";
    //Handlethe case that this is the last iteration and 
    //the elements of the array are odd
    if((($i % 2) === 1) && (($i + 1) === count($array))){
        $out .= "<td></td></tr>";
    }elseif(($i % 2) === 1){
        $out .= "</tr>";
    }
}

$out .= "</tbody></table>"; 
```

# c# - 如何在 WPF 中与其他类型绑定？

> ID：10025643
> 
> 赞同：0
> 
> 时间：2012-04-05T09:01:40.513
> 
> 标签：c#, wpf, binding, mvvm

我正在玩WPF。这是无法按我想要的方式工作的代码。

```
<ListView Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" ItemsSource="{Binding FilesToUpload}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Filename" DisplayMemberBinding="{Binding FileName}">
                    </GridViewColumn>
                    <GridViewColumn Header="Uploaded" DisplayMemberBinding="{Binding Uploaded}">
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView> 
```

ListView 的 ItemsSource 绑定到返回此类集合的类的属性。

```
public class FileInformation
        {
            public String FileName { get; set; }
            public ProgressBar Uploaded { get; set; }

            public FileInformation(String file)
            {
                FileName = file;
                Uploaded = new ProgressBar();
                Uploaded.Value = 8;
                Uploaded.BorderThickness = new System.Windows.Thickness(5);
            }
        } 
```

上面 xaml 示例中的 GridView 有两列。一个绑定到 FileInformation 类的属性 FileName，另一个绑定到 Uploaded。

问题是。Uploaded 属性返回一个 ProgressBar，但绑定到 Uploaded 的列的内容是一个字符串（我猜是 ProgressBar 的 ToString() 方法的返回值。）。

有什么建议我可以显示 ProgressBar 而不是 String？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:37:21.453

尝试这个：

```
 <GridViewColumn Header="Progress">
                <GridViewColumn.CellTemplate>  
                    <DataTemplate>
                        <ProgressBar Maximum="100" Value="{Binding Uploaded.Value}"/>
                    </DataTemplate>
                 </GridViewColumn.CellTemplate>  
            </GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:38:48.777

将绑定中从 FrameworkElement 继承的对象作为源是一个非常糟糕的主意。

创建一个仅存储视图（xaml 文件）中定义的 ProgressBar 数据的类。

```
public class ProgressBarViewModel : INotifiedPropertyChanged
{
    //add INotifyPropertyChanged implementation

    //add Properties you want to bind to the ProgressBar
    ...

    //For example
    public double Value { //getter, setter methods. Raise PropertyChanged in setter if value changed}
   ...
} 
```

现在，您的 Uploaded 属性应该返回 ProgressBarViewModel 的一个实例，您可以通过多种方式将此实例绑定到 ProgressBar。

我向您展示一种方法：

```
 <GridViewColumn Header="Uploaded">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <ProgressBar Value="{Binding Path=Uploaded.Value}"/>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn> 
```

**注意**：绑定中上传的是您的 FileInformation 类的属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:33:03.283

wpf 不支持类型绑定，它只绑定 ti 属性。因此，如果您需要绑定进度条，则需要将progressbase 放置在普通列中。您还可以基于视图库创建自定义视图

请参阅以下链接中的示例。

[http://blogs.msdn.com/b/atc_avalon_team/archive/2006/04/28/585844.aspx](http://blogs.msdn.com/b/atc_avalon_team/archive/2006/04/28/585844.aspx)

# regex - 为什么 Regex Group 被退回？

> ID：10025649
> 
> 赞同：1
> 
> 时间：2012-04-05T09:02:03.567
> 
> 标签：regex

我刚在想...

当我写（js）

```
var t="1234ABC4321".match(/.*(ABC).*/) 
```

它返回：

```
["1234ABC4321", "ABC"] 
```

我可以`, "ABC"]`通过`(?:...)`

但是，组是用于 : 的`backreference`，所以我可以`\1`稍后参考它们....

问题 ：

为什么“ABC”作为匹配项的一部分返回？如果他自己需要它以供以后参考，`fine`！但**不要**把它放在我的收藏中！

有什么逻辑吗（我确定有）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:07:32.057

我不确定我是否理解您的问题，但是在分组时，您得到的第一组是与正则表达式匹配的整个字符串。如果您不想获得辅助组 (the `ABC`)，请删除括号 ( `(`and `)`)，因为这些表示正则表达式中的组，因此此 regex:`/.*ABC.*/`应该为您提供 1 个 group being `1234ABC4321`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:17:35.113

逻辑是 match() 方法检查您的字符串是否与正则表达式匹配。如果是这样，它会返回与正则表达式匹配的字符串部分。如果您使用 () 指定分组，它也会返回组。

如果您希望从字符串中删除 ABC，请使用：

```
var t="1234ABC4321".replace(/ABC/, ""); 
```

# php - android与MYSQL数据库连接返回空值

> ID：10025655
> 
> 赞同：4
> 
> 时间：2012-04-05T09:02:29.433
> 
> 标签：php, android, json

我正在尝试通过从 Android 传递参数的值来从我的 MySQL 数据库中检索特定数据，然后在查询的 PHP 脚本中读取该值以返回数据。

当我运行应用程序时，由于返回的结果值为空而发生解析数据异常的错误？

为什么结果为空？错误是来自 PHP 脚本还是来自我的 java 代码？

请帮我

提前致谢！

**城市.php：**

```
 <?php
     mysql_connect("localhost","username","password");
     mysql_select_db("Countries");
     $sql=mysql_query("select  City_Population  from City where Name= "'.$_REQUEST['Name']."'");
     while($row=mysql_fetch_assoc($sql))
     $output[]=$row;
      print(json_encode($output));
      mysql_close();
        ?> 
```

> 块引用

**java类：**

```
 public class ConnectActivity extends ListActivity {

           String add="http://10.0.2.2/city.php";
           public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);

            new Connect().execute();

         }

  private class Connect extends AsyncTask<Void,Void,String>
   {     
             private  String result = "";
             private  InputStream is=null;
            private  String city_name="London";
           protected String doInBackground(Void... params) {
            try
          {
                  ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                 nameValuePairs.add(new BasicNameValuePair("Name",city_name));
                 HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(add);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
               HttpResponse response = httpclient.execute(httppost);
               HttpEntity entity = response.getEntity();
              is = entity.getContent();
                 }
        catch(Exception e)
           {
               Log.e("log_tag", "Error in http connection "+e.toString());
                 }

           //convert response to string
    try{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
    StringBuilder sb = new StringBuilder();
     String line = null;
     while ((line = reader.readLine()) != null) {
      sb.append(line + "\n");
       }
        is.close();
        result=sb.toString();
           }
          catch(Exception e){
           Log.e("log_tag", "Error converting result "+e.toString());
               }

          return result;
          }
       protected  void onPostExecute(String  result){

        try{
            JSONArray jArray = new JSONArray( result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
                json_data = jArray.getJSONObject(i);
                int  population=json_data.getInt("City_Population");

              TextView City_Name =(TextView)findViewById(R.id.city_name);
                                                                           TextView  City_population=(TextView)findViewById(R.id.city_pop);
                            City_Name.setText(json_data.getString(city_name));
                                                                          City_population.setText(population+"  " );
            }
            }
            catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
            }

                     }
                                                                  }

                                                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:32:19.777

```
 <?php
         $name=$_POST['NAME'];               
         mysql_connect("localhost","username","password");
         mysql_select_db("Countries");
         $sql=mysql_query("select  City_Population as citypop  from City where Name='$name' ");
         while($row=mysql_fetch_assoc($sql))
          $output=$row['citypop'];
        print(json_encode($output));
         mysql_close();
         ?> 
```

你试试这个确定它会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:38:49.217

a) 您的脚本容易出现[sql 注入](http://php.net/manual/en/security.database.sql-injection.php)。在将 $_REQUEST[...] 参数放入 sql 查询字符串之前，您需要对其进行正确编码。
b）您需要一些错误处理。任何 mysql_* 函数都可能失败，您的脚本必须处理这些错误情况。由于客户端需要一些 json 数据，因此只需将错误消息/代码也作为 json 编码数组返回。
c) 您可能希望将`Content-type`标头设置为`application/json`，请参阅[RFC 4627](http://www.ietf.org/rfc/rfc4627.txt)和[http://docs.php.net/function.header](http://docs.php.net/function.header)

```
<?php
define('DEBUG_DETAILS', true);
function onError($msg, $details) {
    $msg = array(
        'status'=>'error',
        'message'=>$msg
    );
    if ( defined('DEBUG_DETAILS') && DEBUG_DETAILS ) {
        $msg['details'] = $details;
    }
    die(json_encode($msg));
}

$mysql = mysql_connect("localhost","username","password") or OnError('database connection failed', mysql_error());
mysql_select_db("Countries", $mysql) or OnError('database selection failed', mysql_error($mysql));

$query = "
    SELECT
        City_Population
    FROM
        City
    WHERE
        Name='%s'
";
$query = sprintf($query, mysql_real_escape_string($_REQUEST['Name'], $mysql));
$sql=mysql_query($query, $mysql) or OnError('query failed', array('query'=>$query, 'errstr'=>mysql_error($mysql)));

$output = array(
    'count'=>0,
    'records'=>array()
);
while( $row=mysql_fetch_assoc($sql) ) {
    $output['records'][]=$row;
    $output['count']+=1;
}
echo json_encode(array(
    'status'=>'ok',
    'result'=>$output
)); 
```

您的 android 客户端应该收到一个对象字面量，例如

```
{
  status:"ok",
  result: {
    'count': 2,
    'records': [ 10000, 15000]
  }
} 
```

或者

```
{
  status:"error",
  message: "database connection failed",
  setails: "...."
} 
```

# gwt - GWT - 它真的应该只用于动态部分吗？

> ID：10025656
> 
> 赞同：5
> 
> 时间：2012-04-05T09:02:32.977
> 
> 标签：gwt

关于 2009 年关于 GWT 优缺点的一些 StackOverflow 问题，有人[回答](https://stackoverflow.com/a/431537/138585)说：

> [...] 使用 gwt 仅填写应用程序的动态部分。因此，如果您有一些涉及大量字段的复杂用户交互。但是，请勿使用随附的面板。以您现有的库存设计师提供的页面为例。划出将包含应用程序控件的区域。在 onModuleLoad() 中将这些控件附加到页面。通过这种方式，您可以使用设计师的标准页面，也可以在 gwt 之外进行所有样式设置。

好吧，我正试图找出背后的原因。如果我理解正确，客户端会收到已编译的 HTML 和 JavaScript 文件。那么，从浏览器的角度来看，他不应该忘记 HTML 页面的创建方式（通过编辑 HTML 页面静态地或通过 GWT 代码动态地创建）吗？此外，GWT 面板似乎被翻译成编译页面上的简单 HTML 元素。那么这里的性能在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:53:14.237

试着想象你的应用有 5000 个不同的复杂的独特页面。如果你尝试全部使用 GWT 来实现，你在开发过程中会遇到很大的问题，因为编译时间会很长，devmode 也会很慢。有时最好在 GWT 中实现所有内容，有时最好将静态页面与 GWT 结合起来。

基本上，当它会给用户带来一些真正的好处时，你必须使用 GWT。如果用户看不到差异，如果页面是静态的或动态的，请使用最容易使用的技术。例如，如果您正在开发 Web 图像编辑器，GWT 是一个明显的选择。如果您正在创建一些 Wikipedia 克隆，您应该将 GWT 主要用于一些动态部分，例如管理、搜索和编辑。

# c# - 如何与框架 page.xaml 通信

> ID：10025657
> 
> 赞同：2
> 
> 时间：2012-04-05T09:02:34.330
> 
> 标签：c#, .net, wpf, xaml

*   我正在使用 WPF、XAML、C# 编写 Windows 窗体。
*   我在 MainWindow.xaml 中创建了一个 Frame 对象，并且该框架指向 Login.xaml。
*   Login.xaml 处理用户的登录操作，其逻辑存储在 Login.xaml.cs 中。

如何让 Login.xaml 与 MainWindow.xaml.cs 中的代码通信，以便在用户登录后更改框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:10:12.703

使用事件通过视图模型进行通信。或者寻找一些[事件聚合器](http://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator&referringTitle=Documentation)来消除视图模型之间的耦合。

`MainWindowViewModel`将实例化`LoginViewModel`、显示`Login`控件并注册一个事件 OnLoggedIn 并在成功登录后[切换到另一个框架/屏幕](http://www.mindscapehq.com/blog/index.php/2012/03/13/caliburn-micro-part-5-the-window-manager)。

# android - 覆盖主页和后退按钮是布尔值为真的情况

> ID：10025660
> 
> 赞同：10
> 
> 时间：2012-04-05T09:02:49.883
> 
> 标签：android, button, overriding, back-button

我想知道在某些情况下是否可以覆盖后退和主页按钮的操作。通常这些按钮应该像往常一样做出反应，但在某些设置为真的情况下，我想覆盖按钮并让它们调用我自己的方法。

我正在使用这两种方法来覆盖这些按钮：

```
 @Override
  public void onBackPressed() {    
  // call my backbutton pressed method when boolean==true
    }

  @Override
  public void onAttachedToWindow()    {                                                                                       this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);    
   super.onAttachedToWindow(); 
   // call my homebutton pressed method when boolean==true
   } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-05T09:18:38.207

> 我想知道在某些情况下是否可以覆盖后退和主页按钮的操作。

是的，你可以做覆盖`Home`按钮。

我开发了一个禁用硬按钮的应用程序，你可以看看。我采用了一个**切换按钮**，它可以锁定除**电源**按钮以外的所有硬按钮

```
public class DisableHardButton extends Activity {
    /** Called when the activity is first created. */
    TextView mTextView;
    ToggleButton mToggleButton;
    boolean isLock=false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mTextView=(TextView) findViewById(R.id.tvInfo);
        mToggleButton=(ToggleButton) findViewById(R.id.btnLock);

        mToggleButton.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            isLock=isChecked;
            onAttachedToWindow();
        }
    });
   }
@Override
    public boolean dispatchKeyEvent(KeyEvent event) {

        if ( (event.getKeyCode() == KeyEvent.KEYCODE_HOME) && isLock) {
            mTextView.setText("KEYCODE_HOME");
            return true;
        }
        else
            return super.dispatchKeyEvent(event);
    }
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub

        if( (keyCode==KeyEvent.KEYCODE_BACK) && isLock)
        {
            mTextView.setText("KEYCODE_BACK");
            return true;
        }
           else
             return super.onKeyDown(keyCode, event);
    }
@Override
    public void onAttachedToWindow()
    {  
        System.out.println("Onactivity attached :"+isLock);
        if(isLock)
        {   
            this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
            super.onAttachedToWindow();
        }
        else
        {
            this.getWindow().setType(WindowManager.LayoutParams.TYPE_APPLICATION);     
            super.onAttachedToWindow();
        }
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvInfo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ToggleButton
        android:id="@+id/btnLock"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textOff="UnLocked"
        android:textOn="Locked" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:09:50.427

你调用 super.onBackPressed() 来调用普通方法。例子：

```
@Override
public void onBackPressed() {    
    if (activated) {
       //doyourthing
    } else {
       super.onBackPressed()
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T09:07:35.733

你不能。您可以做的是覆盖该方法并管理其中的布尔值：

例如：

```
 public void onBackPressed() {    // call my backbutton pressed method when boolean==true

      if (myCondition) {
          // take care of my needs
       } else 
            // call super to let the back behavior be "normal"

  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T09:08:36.873

关于覆盖 Home Button 的行为，[您不走运](https://stackoverflow.com/q/2079691/593709)。

但是，如果您的应用程序是特定的并且目标受众有限，例如跨组织应用程序、医院信息亭、餐厅订购，您可以尝试将您的应用程序设为主页（启动器应用程序）。你可以在这里找到一个很好的例子：[How to Write Custom Launcher App in Android](http://arnab.ch/blog/2013/08/how-to-write-custom-launcher-app-in-android/)

为了覆盖后退键事件，有很多例子。

例如：

1.  [用android捕捉按键](https://stackoverflow.com/q/2261914/593709)
2.  [覆盖后退按钮以充当主页按钮](https://stackoverflow.com/q/2000102/593709)
3.  [Android - 如何覆盖“后退”按钮，使其不会完成（）我的活动？](https://stackoverflow.com/q/3141996/593709)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T09:08:18.563

使您的布尔变量成员变量

```
boolean temp;

@Override
        public void onBackPressed() {    // call my backbutton pressed method when boolean==true

if(temp)
//your methode
else
finish();
            } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T09:10:42.783

我用这个：

```
public void onBackPressed() {

        switch (screen) {
        case 1:
            screen = 99;
            setContentView(R.layout.menu);
            break;

        case 99:
            finish();
            break;

        }
        return;
    } 
```

当我在另一个屏幕（不是菜单屏幕）中时，我将变量屏幕设置为 1。当我按下后退按钮时，它返回到菜单屏幕（而不是杀死应用程序）。并给屏幕变量数字99，然后当你再次点击后退按钮时，它会杀死应用程序。

但是，您不能更改主页按钮。

# java - @Asynchronous 与 JMS

> ID：10025661
> 
> 赞同：1
> 
> 时间：2012-04-05T09:02:51.120
> 
> 标签：java, asynchronous, glassfish, jms

是否可以从 @Asynchroonous 方法发送 JMS 消息？如果是，如何？如果我调用发送消息一切正常，没有异常，但没有调用 MDB。但是，如果我调用另一个未标记为@Asynchronous 的方法，则会调用 MDB。那么可以从@Asynchronous 方法发送到JMS 吗？

```
@Singleton
class MessageProducer{

     @Resource (mappedName = "...")
     private ConnectionFactory qFactory;

     @Resource(mappedName = "...")
     private Topic topic;

     @Asynchronous
     public void sendMessage(){
            qConn = qFactory.createConnection();
            session = qConn.createSession(false, Session.AUTO_ACKNOWLEDGE);
            MessageProducer prod = session.createProducer(topic);
            prod.send(someObject);
            prod.close();
            session.close();
            qConn.close();
     }
} 
```

# javascript - 谷歌地图 v3 infowWindow 中的图像加载两次

> ID：10025664
> 
> 赞同：0
> 
> 时间：2012-04-05T09:02:58.403
> 
> 标签：javascript, google-maps, google-maps-api-3

我尝试在 infoWindow 中显示图像。没什么特别的，但是当 infoWindow 打开时，内容被加载了两次。当我`<img>`用一些文本替换标签时，一切都很好。在设置内容并显示之前，我通过 ajax 检索 infoWindow 的 html 内容。这个调用只进行一次（萤火虫告诉我）。但是 infoWindow 的“domready”事件被调用了两次。infoWindow 内的图像有什么问题？

这是 infoWindow 的 html：

```
<img class="content-image" src="./content/image/1.jpg" width="450" heigth="400"> 
```

`domready`在调用 infoWindow.open() 之后，除了我可以听的任何事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:59:24.957

遇到同样的问题并得出结论，当图像触发加载事件时，Google Maps API 会触发 domready 事件。

*还认为使用背景图像时 domready 不会被触发两次*

我的解决方案：我不再信任 infowindow domready 事件，我使用我的请求的成功回调来为我提供 infowindow 内容

注意

**信息窗口事件列表：**

*   closeclick ：单击关闭按钮时会触发此事件。
*   content_changed 当内容属性改变时触发此事件。
*   domready ：当包含 InfoWindow 的内容附加到 DOM 时会触发此事件。如果您正在动态构建信息窗口内容，您可能希望监视此事件。
*   position_changed ：当位置属性改变时触发此事件。
*   zindex_changed ：当 InfoWindow 的 zIndex 更改时触发此事件。

# javascript - 在 javascript/knockout.js 中创建 2dim 数组表

> ID：10025671
> 
> 赞同：2
> 
> 时间：2012-04-05T09:03:31.250
> 
> 标签：javascript, knockout.js, jquery-templates

我在javascript中有一个2dim数组，像这样

```
 for (var i = 0; i < tab.length; i++) {
            for (var j = 0; j < tab[i].length; j++) {
                tab[i][j] = ko.observable(tab[i][j]);
            }
            tab[i] = ko.observableArray(tab[i]);
        }
        this.TabValues = ko.observableArray(tab); 
```

现在我想创建一个没有固定列和行的表。

```
<script type="text/html" id="table">     
        <table data-bind="template: {name: 'rows', foreach: TabValues}">

        </table>
</script>
<script type="text/html" id="rows">
    <tr data-bind="template: {name: 'columns', foreach: TabValues()[i]}">
    </tr>
</script> 
```

为此，我创建了一个表格模板，并在其中创建了一个行模板。但现在我不知道如何为列创建模板，因为在 foreach 语句中我需要一个索引。但我没有。我怎样才能做到这一点。

也许你有另一种方法来解决这个问题。我的目标是创建一个没有固定行/列大小的可编辑表。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:05:46.930

在您的内部模板中，您可以使用`$data`来引用当前数据。这将是一个单元格数组，因此您可以执行`"template: {name: 'columns', foreach: $data }"`.

这是一个非常基本的示例：http: [//jsfiddle.net/rniemeyer/KcghG/](http://jsfiddle.net/rniemeyer/KcghG/)

# asp-classic - CDO 损坏的 PDF 附件

> ID：10025672
> 
> 赞同：0
> 
> 时间：2012-04-05T09:03:33.363
> 
> 标签：asp-classic, legacy-code, cdo.message

**使用Classic ASP** CDO导致 PDF 附件损坏的主要问题是什么？

这是尝试打开文档时的错误消息：

*处理页面时出错。阅读本文档时出现问题 (109)。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:13:35.923

你用什么发邮件？CDOSYS、CDONTS、第三方组件？

您是立即发送还是将邮件放在取件文件夹中？如果您使用拾取文件夹选项，则存在一个已知问题，即如果在行首删除句点字符，可能会导致损坏，请参阅[http://support.microsoft.com/?id=286358](http://support.microsoft.com/?id=286358)。

如果使用 CDOSYS，那么我已经阅读了编码问题的问题。我认为 CDOSYS 在某些系统中默认进行二进制编码。您可以尝试通过更改附件编码来更改为 Base64...

```
objAttachment.ContentTransferEncoding = "base64" 
```

如果这不起作用，您的问题可能可以通过使用不同的邮件组件来解决，例如[w3jmail](http://www.dimac.net/)（经典 ASP 版本免费）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T22:04:27.643

对于 CDONTS，默认情况下它是 UUEncoding，邮件客户端可能不再支持它。要使其成为 base64 编码，您需要按如下方式附加文件。

```
objCDO.AttachFile fullfilepath, attachmentfilename, 1 
```

1 是 Base 64 与 UUEncoding 的默认 0。

# apache - 推荐的服务器规格？

> ID：10025676
> 
> 赞同：-1
> 
> 时间：2012-04-05T09:03:47.197
> 
> 标签：apache, cloud, specs

我正在购买云服务器 - 我以前从未拥有过自己的服务器（虽然我知道如何设置服务器）

所以，我有这个网站，它根据用户输入生成书籍（有些书有 400 多页） - 这些生成为使用大量内存的 PDF 文件（大约 600M）

我在 Ubuntu 10.04 LTS 上运行 LAMPP。（XAMPP 的 Linux 替代方案）（Apache、mysql、php）

我需要多少内存、多大的处理器等才能让每天大约 400 个活跃用户正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:14:15.510

根据它的效率，我会购买两个小实例。

在其中之一上将安装 LAMP 堆栈。另一方面，你处理你的书生成。

在第二台服务器上，您可以运行一个工作队列服务（例如 beanstalkd 或 Amazon SQS）和一个脚本，该脚本从这个队列中获取一个作业并在之后处理它。

一旦用户喜欢生成一本书，您就可以将作业推送到第二台服务器。一旦书籍生成完成，您的网络服务器就会提供 PDF 文件。

资源：

*   [亚马逊 SQS](http://aws.amazon.com/sqs/)
*   [豆茎](http://kr.github.com/beanstalkd/)
*   [beantalkd 简介](http://abulman.co.uk/presentations/Beanstalkd-2010-05-06/)（一般层面）

# python - 如何表示未使用的函数参数？

> ID：10025680
> 
> 赞同：89
> 
> 时间：2012-04-05T09:04:05.233
> 
> 标签：python, python-2.x

当“解构”一个元组时，我可以`_`用来表示我不感兴趣的元组元素，例如

```
>>> a,_,_ = (1,2,3)
>>> a
1 
```

使用 Python 2.x，我如何用函数参数表达相同的意思？我尝试使用下划线：

```
>>> def f(a,_,_): return a
...
  File "<stdin>", line 1
SyntaxError: duplicate argument '_' in function definition 
```

我还试图完全省略这个论点：

```
>>> def f(a,,): return a
  File "<stdin>", line 1
    def f(a,,): return a
        ^
SyntaxError: invalid syntax 
```

有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-12T15:32:30.763

我刚刚想到的一个有趣的方法是删除变量：

```
def f(foo, unused1, unused2, unused3):
    del unused1, unused2, unused3
    return foo 
```

这有很多优点：

*   在调用函数时，仍然可以使用未使用的变量作为位置参数和关键字参数。
*   如果您稍后开始使用它，您将无法使用它，因为它已被删除，因此出错的风险较小。
*   这是标准的python语法。
*   PyCharm 做对了！（截至 2020 年，PyCharm 不再做正确的事 :( 在[https://youtrack.jetbrains.com/issue/PY-39889](https://youtrack.jetbrains.com/issue/PY-39889)跟踪此问题）
*   PyLint 不会抱怨，使用[PyLint 手册](http://pylint-messages.wikidot.com/messages:w0613)`del`中推荐的解决方案。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2016-03-20T21:56:59.010

下划线用于我们不关心的事情，*args 中的 * 表示参数列表。因此，我们可以使用 *_ 来表示我们不关心的事物的列表：

```
def foo(bar, *_):
    return bar 
```

它甚至通过了 PyCharm 的检查。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2018-04-02T11:28:28.260

您可以使用 '_' 作为前缀，这样 pylint 将忽略这些参数：

```
def f(a, _b, _c): 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-04-05T09:13:02.120

这是我对未使用的参数所做的事情：

```
def f(a, *unused):
    return a 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-29T11:05:44.807

为了避免未使用 *args 和/或 **kwargs 的“未使用变量”检查消息，我将`args`and替换`kwargs`为`_`and `__`：

```
def f(a, b, *_, **__):
    ... 
```

除了删除消息之外，它清楚地表明您不关心这些论点。

我不能说它是否是一个真正通用的解决方案，但它在我使用它的任何地方都有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T09:19:01.790

如果你有 args 和关键字 arg 你应该使用

```
def f(a, *args, **kwargs):
    return a 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-07T10:13:56.527

我认为接受的答案很糟糕，但它仍然可以工作，如果你使用我应该称之为“Perl 方式”来处理参数（我真的不知道 Perl，但我在看到`sub`语法后不再尝试学习它，手动参数解包）：

你的函数有 3 个参数 - 这是它被调用的（鸭子打字，还记得吗？）。所以你得到：

```
def funfun(a, b, c):
    return b * 2 
```

2个未使用的参数。但是现在，输入改进的 larsmans 方法：

```
def funfun(*args):
    return args[1] * 2 
```

还有警告...

但是，我仍然更喜欢盒装的方式：

```
def funfun(a, b, c):
    del a, c
    return b * 2 
```

它保持参数名称的自记录质量。它们是功能，而不是错误。

但是，语言本身并不会强迫你去那里——你也可以反过来，让你的所有函数都有签名`(*args, **kwargs)`，并且每次都手动解析参数。想象一下给您带来的控制水平。在更改“签名”（参数计数和含义）后以不推荐的方式调用时不再有例外。这是值得考虑的事情；）

# c - 如何重写 POSIX C 代码以使用数据报套接字而不是文件

> ID：10025683
> 
> 赞同：2
> 
> 时间：2012-04-05T09:04:14.737
> 
> 标签：c, sockets, udp, posix

我有将数据写入文件的第三方 C 代码。我想修改该代码，以便将完全相同的数据写入数据报套接字。

`FILE`指向第三方代码的指针被处理以确定要使用的文件。数据以独占方式写入文件`fwrite()`。

`write()`如果代码使用而不是`fwrite()`因为`write()`适用于套接字和文件，一切都会好起来的。它需要一个整数作为文件描述符，它既是数据类型又是`socket()`返回`open()`值。

但是，由于第三方代码使用了`fwrite()`，所以这个任务并不容易。我想知道完成这项任务的最佳方法是什么。

我应该编写一个与内部使用`fwrite()`的原始功能相同的函数吗？或者是否有将整数文件描述符“投射”到的技巧？`fwrite()``write()``FILE*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:08:00.403

`FILE *`您可以使用以下方法将套接字转换为`fdopen`：

```
FILE *fdopen(int fd, const char *mode); 
```

我希望您使用的是顺序数据报协议（即 Unix 数据报套接字，而不是 UDP 套接字），否则，您的数据将会变得混乱。

**如果您使用**的是 UDP：数据包可以任意丢弃或重新排序，并且由于使用 UDP 的代码`FILE *`假定它正在写入磁盘，因此当您尝试将所有内容放在另一边时，您会遇到很大的麻烦。

# facebook-graph-api - 是否可以从获取的 url 而不是规范 url 中提取元数据？

> ID：10025687
> 
> 赞同：2
> 
> 时间：2012-04-05T09:04:52.397
> 
> 标签：facebook-graph-api, metadata, facebook-opengraph, fetch, canonical-link

我有一个 Facebook 之类的链接到我无法完全控制的女巫页面：我可以修改页面`<body>`但不能修改`<head>`页面...所以我尝试在新页面上设置点赞按钮的链接我有完全的控制权，在这个页面上设置 opengraph 元标记，并设置一个链接到原始页面的 og:url。

但最终 Facebook 尝试从 og:url 中提取元数据并覆盖上一页的元标记......是否可以告诉我我想从第一个获取的 url 而不是从 og:url 中抓取元数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:16:56.363

没有办法指示 linter 从页面中提取 OpenGraph 元数据，该页面的 URL 不同于`og:url`.

`og:url`Linter 将始终从链末尾定义的 URL 中提取元标记...

有一种方法可以做其他事情（可能符合您的需求，也可能不符合您的需求）：

您可以创建包含所有必需 OpenGraph 的中间页面，包括`og:url`指向该页面（不是您无法控制的页面）。该页面将只有元数据和 JavaScript/Meta 重定向到最终页面，因此登陆此中间页面的用户将被重定向到正确的最终页面。

请注意，这会将所有喜欢的内容关联到“最终”页面而不是中间页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:03:10.367

我认为 Facebook Debug/linter 中存在一个错误，即哪个 URL 可以包含 OG 元数据。您的 OG:URL 应该是规范的，这意味着该 URL 在今天、明天和十年后都应该有效。由于共享的 url 是临时的，Web 开发人员无法保证“获取”url 将持续存在。您的规范 / og:url 可能会重定向到具有 og: 标签的最终目的地。

但是，FaceBook linter 中的错误是它没有跟踪通过 og:url 的重定向。即[http://example.com/persistant/123](http://example.com/persistant/123)，因为这可能只是重定向到友好的 URL，例如[http://example.com/year/month/title/persistant_123](http://example.com/year/month/title/persistant_123)。也许来自 FaceBook 的人可以澄清他们对“应遵循规范 URL 的重定向”的解释。

Google 的意见[Google 站长博客：指定您的 Canonical](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)

> rel="canonical" 可以是重定向吗？是的，您可以将重定向的 URL 指定为规范 URL。然后，Google 将照常处理重定向并尝试将其编入索引。

当前的 FaceBook 调试/Linter 做法是在到达 OG:URL 后停止，并且不遵循标准 HTTP 重定向来获取 OG 标签。我认为 Google 对 Canonical 的定义更符合 Web 开发人员的期望。

# macos - Mac 应用程序 SandBox:using NSOpenPanel has a error about NSRemoteOpenPanel

> ID：10025691
> 
> 赞同：1
> 
> 时间：2012-04-05T09:05:03.160
> 
> 标签：macos, sandbox, nsopenpanel

当我在 Mac 应用程序中使用沙盒时，我单击一个菜单项“导出”，它应该使用 NSOpenPanel 打开一个对话框，但它没有。这是我的代码：

```
[playExportPanel beginSheetModalForWindow:mainWindow
                        completionHandler: ^(NSInteger result) {
     if(result == NSFileHandlingPanelOKButton) {
             ....
     }
}] 
```

它抛出一个异常：`-[NSRemoteOpenPanel close]: unrecognized selector sent to instance`. 是什么`NSRemoteOpenPanel`？有没有人见过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:09:51.230

我刚刚在我自己的应用程序中解决了这个问题。我删除了`[sheet close];`. 然后我把它换成了`[sheet orderOut:self];`后来的。在您的情况下，后者可能不是必需的。在我的代码中，可能会在返回之前从块代码中显示错误表。这会导致堆叠的床单，我不喜欢在这个星座中拥有：它看起来很杂乱。

您可能从已弃用的 API 迁移到“-beginSheetModalForWindow:completionHandler:”并重用旧代码。即使删除了对 -close 的调用，面板也会在块返回后关闭。这可能是新 API 行为的一部分，但我还没有找到文档中描述的内容。

# hibernate - 休眠 JPA 错误

> ID：10025692
> 
> 赞同：0
> 
> 时间：2012-04-05T09:05:05.503
> 
> 标签：hibernate, jpa-2.0

我一直在尝试在 Spring 3.0 项目中使用 Hibernate+JPA 从数据库中获取数据。它给了我异常 java.lang.NoSuchFieldError: INSTANCE。在这里，我给出了完整的堆栈跟踪。

```
java.lang.NoSuchFieldError: INSTANCE
at org.hibernate.type.BasicTypeRegistry.<init>(BasicTypeRegistry.java:94)
at org.hibernate.type.TypeResolver.<init>(TypeResolver.java:59)
at org.hibernate.cfg.Configuration.<init>(Configuration.java:250)
at org.hibernate.cfg.Configuration.<init>(Configuration.java:302)
at org.hibernate.cfg.AnnotationConfiguration.<init>(AnnotationConfiguration.java:98)
at org.hibernate.ejb.Ejb3Configuration.<clinit>(Ejb3Configuration.java:133)
at   org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:55)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)
at com.mpm.login.service.UserAuthentication.authenticateUser(UserAuthentication.java:30)
at com.mpm.login.controller.LoginController.authenticate(LoginController.java:50)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:174)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

## 我的依赖树如下所示：

```
[INFO] -----------------------------------------------------------------------
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ Login ---
[INFO] Login:Login:war:0.0.1-SNAPSHOT
[INFO] +- org.springframework:spring-web:jar:3.0.0.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-context:jar:3.0.0.RELEASE:compile
[INFO] |  |  \- org.springframework:spring-expression:jar:3.0.0.RELEASE:compil
[INFO] |  \- org.springframework:spring-core:jar:3.0.0.RELEASE:compile
[INFO] +- log4j:log4j:jar:1.2.16:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.0.0.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.0.0.RELEASE:compile
[INFO] +- org.springframework:spring-orm:jar:3.0.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-jdbc:jar:3.0.3.RELEASE:compile
[INFO] |  \- org.springframework:spring-tx:jar:3.0.3.RELEASE:compile
[INFO] +- org.hibernate:hibernate-entitymanager:jar:3.6.9.Final:compile
[INFO] |  +- org.hibernate:hibernate-core:jar:3.6.9.Final:compile
[INFO] |  |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  |  +- commons-collections:commons-collections:jar:3.1:compile
[INFO] |  |  +- org.hibernate:hibernate-commons-annotations:jar:3.2.0.Final:co
ile 
[INFO] |  |  \- javax.transaction:jta:jar:1.1:compile
[INFO] |  \- javassist:javassist:jar:3.12.0.GA:compile
[INFO] +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Fina
compile
[INFO] +- junit:junit:jar:4.8.1:compile
[INFO] +- org.springframework:spring-test:jar:3.0.3.RELEASE:compile
[INFO] +- mysql:mysql-connector-java:jar:5.1.17:compile
[INFO] +- org.springframework.ws:spring-ws-core:jar:2.0.2.RELEASE:compile
[INFO] |  +- org.springframework.ws:spring-xml:jar:2.0.2.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile
[INFO] |  +- org.springframework:spring-oxm:jar:3.0.5.RELEASE:compile
[INFO] |  +- wsdl4j:wsdl4j:jar:1.6.1:compile
[INFO] |  +- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- jaxen:jaxen:jar:1.1:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- xml-apis:xml-apis:jar:1.3.02:compile
[INFO] |  +- xerces:xercesImpl:jar:2.6.2:compile
[INFO] |  \- xom:xom:jar:1.0:compile
[INFO] |     +- xerces:xmlParserAPIs:jar:2.6.2:compile
[INFO] |     +- xalan:xalan:jar:2.6.0:compile
[INFO] |     \- com.ibm.icu:icu4j:jar:2.6.1:compile
[INFO] +- javax.mail:mail:jar:1.4:compile
[INFO] |  \- javax.activation:activation:jar:1.1:compile
[INFO] +- javax.servlet:servlet-api:jar:2.4:provided
[INFO] +- javax.servlet.jsp:jsp-api:jar:2.0:provided
[INFO] +- org.slf4j:slf4j-api:jar:1.6.4:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.4:compile
[INFO] +- jdom:jdom:jar:1.0:compile
[INFO] \- javax.persistence:persistence-api:jar:1.0-rev-1:compile
[INFO] ---------------------------------------------------------------------- 
```

## LoginConroller.java

@Controller 公共类登录控制器 {

@RequestMapping(value = "login.action", method = RequestMethod.POST) public @ResponseBody HashMap authenticate(@RequestParam("username") String username, @RequestParam("password") String password, HttpServletRequest request) { HashMap loginMap =新的哈希映射（）；

```
 System.out.println("HomeController: Passing through...");
   System.out.println("uname "+ username + "pass "+password);

   Login userLogin = new Login();
   userLogin.setUsername(username);
   userLogin.setPassword(password);

   //Conectivity to JPA 
   System.out.println("IP Address:"+request.getRemoteAddr());
   System.out.println("HOST:"+request.getRemoteHost());
   System.out.println("Port:"+request.getRemotePort());
   System.out.println("User:"+request.getRemoteUser());
   System.out.println("Browser:"+request.getHeader("User-Agent"));

   /*
    * Write the code to audit the login detail in login audit table 
   */

   UserAuthentication userAuthentication = new UserAuthentication();
   boolean isUserAuthenticated=userAuthentication.authenticateUser(username, password);
   System.out.println("auth is "+isUserAuthenticated);
   userLogin.setIsUserAuthenticated(isUserAuthenticated?"true":"false");
  // req.setAttribute("status", isUserAuthenticated);
 //  loginMap.put("data", userLogin);
   loginMap.put("success", isUserAuthenticated);
   //request.setAttribute
   //System.out.println("----"+ login.u);
   System.out.println("----");
  // System.out.println("final result is... " + userAuthenticate);
   return loginMap;
   //return "redirect:success.jsp";
  // return "{success:true}"; 
```

}

}

## 用户认证.java

公共类用户身份验证{

```
/**
 * @param args
 * Authenticates User from database and returns true  
 * if user is authenticated
 */
public boolean authenticateUser(String uname, String password) {
    // TODO Auto-generated method stub
    System.out.println(" Inside authenticateUser");
    boolean userAuthenticate=false;
    List lst=null;
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("DBConnection");
    EntityManager em = emf.createEntityManager();
    System.out.println(" Before Try block");
    try{
        em.getTransaction().begin();
        //Select all the record from Login table
        Query query = em.createQuery("SELECT l FROM Login l where l.username = '"+uname+"' and l.password='"+password+"'");
        System.out.println("query = " + query);
        lst = query.getResultList();
        System.out.println("lst = "+lst.size());
        if(lst.size()>0)

            userAuthenticate=true;
            /*Login login = (Login) it.next();
            System.out.print("Id:"+login.getId());
            System.out.print(" Name:"+login.getUname());
            System.out.println(" Password:"+login.getPassword());*/

        em.getTransaction().commit();
    }
    catch(Exception e){
        System.out.println("in catch");
        System.out.println(e.getMessage());
        }
    finally{
        em.close();
    }
     return userAuthenticate;
} 
```

}

## 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence>
<persistence-unit name="DBConnection">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<class>com.mpm.login.model.Login</class>
<properties>
    <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/project"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
    <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
    <property name="hibernate.connection.password" value="root"/>
    <property name="hibernate.connection.username" value="root"/>
    <property name="hibernate.hbm2ddl.auto" value="update"/>
    <property name="hibernate.show_sql" value="true"/>
    <!--
    <property name="hibernate.format_sql" value="true"/>
    -->
</properties> 
```

## pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Login</groupId>
    <artifactId>Login</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>Login</name>
    <url>http://maven.apache.org</url>

    <build>
    <finalName>Login</finalName>
    <plugins>
    <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.1</version>
    </plugin>
    <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.1</version>
    </plugin>
    <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
    <testFailureIgnore>true</testFailureIgnore>
    </configuration>
    </plugin>

            <plugin>
                <inherited>true</inherited>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
          </plugin>
        </plugins>
    </build>

    <properties>
        <org.springframework.version>3.0.6.RELEASE</org.springframework.version>
        <org.hibernate.version>3.3.1.GA</org.hibernate.version>
        <org.springframework.test.version>2.5</org.springframework.test.version>
        <spring.version>3.0.0.RELEASE</spring.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

  <dependencies>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.9.Final</version>
            <exclusions>
                <exclusion>
                    <groupId>cglib</groupId>
                    <artifactId>cglib</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>dom4j</groupId>
                    <artifactId>dom4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.0.Final</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.0.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.17</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>2.0.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>jaxen</groupId>
            <artifactId>jaxen</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4</version>
        </dependency>

        <!--Adding the Servlet 2.4 Specification as a Dependency -->

         <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>

        <!-- Adding the JSP 2.0 Specification as a Dependency --> 
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Adding the logging Dependency --> 
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.4</version>
        </dependency>

         <dependency>
            <groupId>jdom</groupId>
            <artifactId>jdom</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0-rev-1</version>
        </dependency>

        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-common</artifactId>
            <version>4.0.2</version>
        </dependency>

        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-cache</artifactId>
            <version>1.4.1.GA</version>
        </dependency>
  </dependencies>
    <repositories>
    <repository>
    <id>JBoss</id>
    <name>JBoss repository</name>
    <url>https://repository.jboss.org/nexus/content/groups/public-jboss</url>
    </repository>  
    </repositories>
    </project> 
```

任何人都可以帮助解决这个问题吗？此错误的原因可能是什么以及如何解决？

谢谢卡皮尔

## 例外：

```
 java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.ejb.Ejb3Configuration
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:54)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at com.mpm.login.service.UserAuthentication.authenticateUser(UserAuthentication.java:30)
    at com.mpm.login.controller.LoginController.authenticate(LoginController.java:50) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:35:59.810

检查您的“com.mpm.login.model.Login”文件是否有任何变量声明为`INSTANCE`如果它存在则它无法将该变量与数据库列映射。

# user-controls - 墓碑wp7中的用户控件

> ID：10025693
> 
> 赞同：0
> 
> 时间：2012-04-05T09:05:11.287
> 
> 标签：user-controls, windows-phone-7.1, state, tombstone

我创建了一个圆形文本框用户控件并在所有页面上使用它。在调试 Tombstone 时，我只看到一行代替圆形文本框。我试图保存包含文本框/页面的文本框/网格的状态，但圆形文本框仍然折叠形成单行。这是我的圆形文本框代码

```
<Viewbox Width="420" >
    <Border CornerRadius="10" BorderThickness="1"   BorderBrush="Black" >
        <TextBox Name="textbox" MaxLength="255" Margin="-8" Width="420"  FontFamily="../fonts/DroidSans.ttf#Droid Sans" AcceptsReturn="True"  TextWrapping="Wrap" IsReadOnly="False" Background="White" BorderBrush="White" >
        </TextBox>
    </Border>
</Viewbox> 
```

谢谢和问候， 金谷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:29:51.637

明白了，对于任何面临同样问题的人。从文本框中删除字体系列，它会正常工作。谢谢，金谷

# java - 如何使用 Smack API 语音/视频聊天

> ID：10025694
> 
> 赞同：1
> 
> 时间：2012-04-05T09:05:13.597
> 
> 标签：java, smack

我正在尝试使用 SMACK API 在 java 中创建一个即时通讯程序。我的最终目标是使用 google(gmail) id 提供语音和视频聊天。API 无关紧要。只是有用的东西。

我用谷歌搜索了很多，但找不到任何好的文档。我找到了一个名为 libjingle 的库，但它只支持 c++。

以前有没有人在java中实现过这个，或者对如何让语音和视频聊天工作有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:16:37.700

您正在寻找的是 smackx-jingle，它是标准 smack 发行版的一部分。

您可能需要查看一些[测试用例，以帮助您了解如何使用它。](http://fisheye.igniterealtime.org/browse/smack/trunk/jingle/extension/test/org/jivesoftware/smackx/jingle)不幸的是，该扩展的作者没有提供 API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:32:27.053

smackx-jingle 已经过时并且不太可能工作。你可能想看看这些：

[https://code.google.com/p/jitsi-jingle/](https://code.google.com/p/jitsi-jingle/)

[https://code.google.com/p/minijingle/](https://code.google.com/p/minijingle/)

# javascript - Javascript安全，动作后调用函数

> ID：10025697
> 
> 赞同：0
> 
> 时间：2012-04-05T09:05:28.963
> 
> 标签：javascript, jquery, security

这比问题更“思考”。我在考虑如何保护 javacript 时遇到问题。

假设我有这个设置：

```
Main page with iframe in it
Iframe with content. 
```

现在，假设用户必须在 iframe 中玩游戏。在他完成游戏后，iframe 调用：

```
window.parent.givePrice(); 
```

父级将显示模态窗口：

```
function givePrice(){
  jQuery('.mask').show();
  jQuery('#won').show();
} 
```

在这个模态窗口中，他们将有类似的东西

```
Congratulations! you just won a brand new BMW! Click Here to get your price 
```

在他点击链接后，他的名字（通过 ajax - 不相关）被签名到数据库表“winners”中。

（请记住，这只是一个例子）。

现在这一切听起来都很棒，但我可以看到很多安全漏洞。例如，如果我使用 firebug 并编写“givePrice();” 它直接向我展示了我赢得的模式，即使我根本没有接触游戏。

有人可以讨论一下，保护这样的例子的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:13:01.050

防止某人作弊的唯一方法是让猜测（或任何让他们“获胜”的行为）成为服务器的往返：

1.  触发获胜的尝试（例如，用户点击某物，或猜测，或其他任何东西）。
2.  您的页面将信息（包括用户名）发送到服务器。
3.  服务器做了几件事：
    1.  检查与该帐户和 IP 地址相关的速率限制。（所以用户不能仅仅创建一个试图在一个月内每秒赢一次的脚本，等等。）
    2.  检查猜测或其他。
    3.  如果星星对齐，则记录该用户“获胜”。
4.  显示对用户的响应。

如果您想将获胜和接受获胜分开的步骤，您可以通过另一个往返来完成。在第一次旅行中，服务器会生成一个唯一的接受代码，并记录用户获胜的情况以及他们的接受代码在服务器上是什么。在第二次行程中，涉及发回代码的页面，检查代码（和其他几个欺诈检查）并记录用户接受。

仅在客户端执行此操作没有安全的方法。请记住，您不能信任从客户端发送的**任何内容。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:39:09.030

我会说不要通过纯 JavaScript 来做，并在服务器端使用一些检查。您可以随时使用 Firebug 或任何其他类似工具突破任何 Javascript 保护。甚至通过直接向服务器发出请求并发送虚假数据。

所以IMO所有检查都应该在服务器端完成：用户是否打开游戏，然后从游戏发送他实际玩过的数据等。

# php - 谷歌身份验证：OAuth2 不断返回“invalid_grant”

> ID：10025698
> 
> 赞同：20
> 
> 时间：2012-04-05T09:05:35.003
> 
> 标签：php, oauth-2.0, google-calendar-api

我开始在我的新应用程序上配置谷歌日历。[我几乎制作了谷歌开发人员（ https://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate) ）显示的身份验证代码的精确副本，但我不断收到以下错误：

获取 OAuth2 访问令牌时出错，消息：'invalid_grant'

我目前正在使用 Fork-CMS ( [http://www.fork-cms.com](http://www.fork-cms.com) )，一个年轻的轻量级 CMS。我正确配置了 google-api-php-client 的 config.php 文件。(client-id, client-secret, redirect-uri, development key,...) 并且重定向 uri 在 google api 的控制台上正确设置。我的代码如下所示：

```
<?php

/**
* This is a widget with a calendar implementation.
*
* @package       frontend
* @subpackage    events
*
* @author        Michiel Vlaminck <michielvlaminck@gmail.com>
*/
class FrontendEventsWidgetCalendar extends FrontendBaseWidget
{

    private $events = array();
    private $authUrl = array();

    /**
    * Execute the extra
    *
    * @return    void
    */
    public function execute()
    {      
        // call parent
        parent::execute();

        // load template
        $this->loadTemplate();

        // get data
        $this->getData();

        // parse
        $this->parse();
    }

    /**
    * Get the data from Google Calendar
    * This method is only executed if the template isn't cached
    *
    * @return    void
    */
    private function getData()
    {
        require_once PATH_LIBRARY . '/external/google-api-php-client/src/apiClient.php';
        require_once PATH_LIBRARY . '/external/google-api-php-client/src/contrib/apiCalendarService.php';

        $client = new apiClient();

        $service = new apiCalendarService($client);

        if (isset($_SESSION['oauth_access_token'])) {
            $client->setAccessToken($_SESSION['oauth_access_token']);
        } else {
            $token = $client->authenticate();
            $_SESSION['oauth_access_token'] = $token;
        }

        if ($client->getAccessToken()) {

            $calId = FrontendEventsModel::getCalendarId((int) $this->data['id']);
            $calId = $calId[0]['calendar_id'];

            $events = $service->events->listEvents($calId);
            $this->events = $events['items'];

            $_SESSION['oauth_access_token'] = $client->getAccessToken();

        } else {
            $this->authUrl = $client->createAuthUrl();
        }
    }

    /**
    * Parse
    *
    * @return    void
    */
    private function parse()
    {
        $this->tpl->assign('events', $this->events);
        $this->tpl->assign('authUrl', $this->authUrl);
    }
}

?> 
```

当我第一次打开这个小部件页面时，我被定向到谷歌来验证应用程序。当我同意时，我会被重定向到我的应用程序，这就是我得到的地方：

```
apiAuthException » Main

Message Error fetching OAuth2 access token, message: 'invalid_grant'
File    C:\wamp\www\Officevibes\library/external\google-api-php-client\src\auth\apiOAuth2.php
Line    105
Date    Thu, 05 Apr 2012 08:34:47 +0000
URL http://localhost/calendar?code=4/YPUpFklKvhEeTcMm4moRth3x49oe
Referring URL   (Unknown)
Request Method  GET
User-agent  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.142 Safari/535.19 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T07:22:35.153

您应该重用在第一次成功验证后获得的访问令牌。`invalid_grant`如果您之前的令牌尚未过期，您将收到错误消息。将其缓存在某处，以便您可以重复使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-25T16:45:37.293

由于我的服务器上的时间不正确，我遇到了类似的问题。确保您的系统时钟已同步。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-10T16:04:31.553

转到您的 Google API 控制台 ( [https://code.google.com/apis/console/ ) 并在](https://code.google.com/apis/console/)**已安装应用程序的客户端 ID**下撤销您的客户端密码。

请务必使用新的客户端密码更新您的代码

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-10T09:29:57.307

1.  访问 security.google.com
2.  撤消访问权限
3.  再次访问认证url
4.  您现在将获得一个新的刷新令牌

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-07T22:04:27.387

如果您错误地尝试验证您的**ID Token**而不是您的**Access Token** ，您也会收到此错误。

所以不要像我一样 - 确保你将正确的令牌传递到你的代码中！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-27T09:35:11.190

我有一个类似的问题。“invalid_grant”的问题在于它基本上是与令牌相关的任何错误的占位符。我发现[这篇](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35)文章真的很有帮助。

# vbscript - 文件复制开始时 HTA 值更新冻结

> ID：10025700
> 
> 赞同：0
> 
> 时间：2012-04-05T09:05:44.580
> 
> 标签：vbscript, hta

创建一个 HTA，它将自动安装几个应用程序，它首先检查某些文件是否存在，然后如果它不存在，则将一个大文件夹从闪存驱动器复制到本地，我有一个用于更新的文本框脚本的当前状态，但它似乎只是冻结并且从不更新，我也没有任何人工睡眠功能的运气。

这是片段

```
If Not objFSO.FileExists(Office10Dir) Then
MsgBox("Excel is missing")

BasicTextBox.Value = "Office14 Not Detected, Copying Source Files to Local"

Dim objFS, objFolder
Dim OfficeTemp
OfficeTemp = "C:\OfficeTemp"
Set objFS = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFS.CreateFolder(OfficeTemp)
objFS.CopyFolder "OfficeTemp", "C:\OfficeTemp"

BasicTextBox.Value = "Local Temp Directory Created"

ELSE
MsgBox("Excel is Installed")
END IF 
```

文件复制完成后，我看到的只是“已创建本地临时目录”消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:25:51.047

您可以创建目标文件夹，而不是“CopyFolder”，然后遍历文件对象。

```
<script>
Set objFS = CreateObject("Scripting.FileSystemObject")
objOfficeTemp = objFS.GetFolder("C:\OfficeTemp")

If Not objFS.FolderExists("C:\SomeDestination") Then
  objFS.CreateFolder("C:\SomeDestination")
End If

For Each objOfficeTempFile In objOfficeTemp.Files
  'copy the file
  'add some logic that updates your hta
  'if you have nested folders, you'll
  'have to copy them recursively...

  objOfficeTempFile.Copy "C:\SomeDestination"

  updatespan.innerhtml = "Copying file: " & objOfficeTempFile.Name
Next
</script>

<html>
<body>
<span id="updatespan">&nbsp;</span>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:36:19.473

感谢大家的回复，我能够使用“CopyHere”方法获得所需的结果，并声明一个常量来更新文件复制进度的进度条。

```
'copies files from current dir 'OfficeTemp' to local
Dim objFS, objFolder, oShell, oTarget
Dim OfficeTemp
OfficeTemp = "C:\OfficeTemp"
Set objFS = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFS.CreateFolder(OfficeTemp)

Const FOF_CREATEPROGRESSDLG = &H0&

strTargetFolder = "C:\OfficeTemp" 

Set oShell = CreateObject("Shell.Application")
Set objFolder = oShell.NameSpace(strTargetFolder) 

objFolder.CopyHere "OfficeTemp\*.*", FOF_CREATEPROGRESSDLG 
```

# html - 由于 Firefox 最新版本，css 代码无法正常工作

> ID：10025701
> 
> 赞同：0
> 
> 时间：2012-04-05T09:05:49.590
> 
> 标签：html, css

我的编码有问题，在旧版本的 Firefox 上运行良好。当我更新到 Firefox 3.6 时，我的垂直菜单的第一个列表比另一个列表大。

这是我的 CSS 代码；

```
#verti 
{
float:bottom;
width:300px;
margin-top:50px;
position:relative;
}

#verti ul li
{
position:relative;  
list-style:none;
} 

#verti ul
{
padding:0;
margin:0;
}

#verti li
{
height:2m;
width:9em;
background:#38ACEC;
margin-bottom:9px;
position:relative;
top:170px;
-moz-border-radius:80px;
border-radius:80px;
text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:25:33.343

看看[http://jsfiddle.net/wZABk/](http://jsfiddle.net/wZABk/)。我已经删除了 `top:170px;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:08:57.777

我想你忘记的属性 `#verti li height:2m;`是不正确的

正确的是

```
 #verti li
    {
    height:2em; 
```

检查你的CSS ...

# java - 使用 Java 的 WebServices 计算器示例

> ID：10025702
> 
> 赞同：1
> 
> 时间：2012-04-05T09:05:52.740
> 
> 标签：java, web-services, rest, jersey

我使用 Jersey 服务使用 Java 中的 Web 服务创建了一个计算器的示例应用程序，用于计算两个数字的总和。

我的代码是：Calculator.java

```
package p1;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.ws.rs.Path;

@WebService
@Path("/CalculatorService")
public class Calculator
{
    @WebMethod
    public String sum(int x,int y)
    {
        return ""+(x+y);
    }
} 
```

计算器.java：

```
package mypack;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.xml.ws.RequestWrapper;
import javax.xml.ws.ResponseWrapper;

/**
 * This class was generated by the JAXWS SI.
 * JAX-WS RI 2.0_02-b08-fcs
 * Generated source version: 2.0
 * 
 */
@WebService(name = "Calculator", targetNamespace = "http://p1/")
public interface Calculator {

    /**
     * 
     * @param arg1
     * @param arg0
     * @return
     *     returns java.lang.String
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "sum", targetNamespace = "http://p1/", className = "mypack.Sum")
    @ResponseWrapper(localName = "sumResponse", targetNamespace = "http://p1/", className = "mypack.SumResponse")
    public String sum(
        @WebParam(name = "arg0", targetNamespace = "")
        int arg0,
        @WebParam(name = "arg1", targetNamespace = "")
        int arg1);

} 
```

计算器服务.java：

```
package mypack;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;

/**
 * This class was generated by the JAXWS SI.
 * JAX-WS RI 2.0_02-b08-fcs
 * Generated source version: 2.0
 * 
 */
@WebServiceClient(name = "CalculatorService", targetNamespace = "http://p1/", wsdlLocation = "http://localhost:8081/MyCalculatorWs/CalculatorService?WSDL")
public class CalculatorService
    extends Service
{

    private final static URL CALCULATORSERVICE_WSDL_LOCATION;

    static {
        URL url = null;
        try {
            url = new URL("http://localhost:8081/MyCalculatorWs/CalculatorService?WSDL");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        CALCULATORSERVICE_WSDL_LOCATION = url;
    }

    public CalculatorService(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public CalculatorService() {
        super(CALCULATORSERVICE_WSDL_LOCATION, new QName("http://p1/", "CalculatorService"));
    }

    /**
     * 
     * @return
     *     returns Calculator
     */
    @WebEndpoint(name = "CalculatorPort")
    public Calculator getCalculatorPort() {
        return (Calculator)super.getPort(new QName("http://p1/", "CalculatorPort"), Calculator.class);
    }

} 
```

对象工厂.java：

```
package mypack;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the mypack package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    private final static QName _Sum_QNAME = new QName("http://p1/", "sum");
    private final static QName _SumResponse_QNAME = new QName("http://p1/", "sumResponse");

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: mypack
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link Sum }
     * 
     */
    public Sum createSum() {
        return new Sum();
    }

    /**
     * Create an instance of {@link SumResponse }
     * 
     */
    public SumResponse createSumResponse() {
        return new SumResponse();
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link Sum }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "http://p1/", name = "sum")
    public JAXBElement<Sum> createSum(Sum value) {
        return new JAXBElement<Sum>(_Sum_QNAME, Sum.class, null, value);
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link SumResponse }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "http://p1/", name = "sumResponse")
    public JAXBElement<SumResponse> createSumResponse(SumResponse value) {
        return new JAXBElement<SumResponse>(_SumResponse_QNAME, SumResponse.class, null, value);
    }

} 
```

包信息.java：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://p1/")
package mypack; 
```

和.java：

```
package mypack;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for sum complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="sum">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="arg0" type="{http://www.w3.org/2001/XMLSchema}int"/>
 *         &lt;element name="arg1" type="{http://www.w3.org/2001/XMLSchema}int"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sum", propOrder = {
    "arg0",
    "arg1"
})
public class Sum {

    protected int arg0;
    protected int arg1;

    /**
     * Gets the value of the arg0 property.
     * 
     */
    public int getArg0() {
        return arg0;
    }

    /**
     * Sets the value of the arg0 property.
     * 
     */
    public void setArg0(int value) {
        this.arg0 = value;
    }

    /**
     * Gets the value of the arg1 property.
     * 
     */
    public int getArg1() {
        return arg1;
    }

    /**
     * Sets the value of the arg1 property.
     * 
     */
    public void setArg1(int value) {
        this.arg1 = value;
    }

} 
```

SumResponse.java:

```
package mypack;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for sumResponse complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="sumResponse">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="return" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "sumResponse", propOrder = {
    "_return"
})
public class SumResponse {

    @XmlElement(name = "return")
    protected String _return;

    /**
     * Gets the value of the return property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getReturn() {
        return _return;
    }

    /**
     * Sets the value of the return property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setReturn(String value) {
        this._return = value;
    }

} 
```

我的 web.xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>CalculatorEx</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
 <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.restful.demo.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我正在使用以下方法执行我的应用程序： `http://localhost:8080/CalculatorEx/rest/CalculatorService`

我收到这样的错误：

```
exception:
javax.servlet.ServletException: Servlet.init() for servlet Jersey REST Service threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679)

root cause:
com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
    com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)
    com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1298)
    com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:169)
    com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:775)
    com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:771)
    com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
    com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
    com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
    com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
    com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
    com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:31:34.873

我看到的是使用 JAX-WS Web 服务和注册 Jersey servlet 的 web.xml 的代码。您的代码中没有一个 JAX-RS 资源。所以这就是你收到错误的原因。查看 JAX-RS 规范并了解如何编写 JAX-RS 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:59:17.467

这是因为：

```
<init-param>
     <param-name>com.sun.jersey.config.property.packages</param-name>
     <param-value>com.restful.demo.resources</param-value>
</init-param> 
```

将其更改为：

```
 <init-param>
     <param-name>com.sun.jersey.config.property.packages</param-name>
     <param-value>p1</param-value>
</init-param> 
```

# c# - JSON RPC 和 Windows 7 Phones (Mango)，我怎样才能让它工作？

> ID：10025704
> 
> 赞同：1
> 
> 时间：2012-04-05T09:05:56.177
> 
> 标签：c#, json, windows-phone-7, windows-7, json-rpc

因此，经过 2 天的研究和试验，我终于得出结论，目前没有适用于 windows 手机的 JSON RPC 客户端。Jayrock 和 AustinHarris 在尝试在我的应用程序中引用它们时给了我无数错误。

是否有人对如何处理此类请求有一些内部知识，因为这对我来说是新问题。我工作的公司给了我一些通过 JSON RPC 连接的网络服务，从一个简单的 Ping 网络服务开始：

```
{"transport":"POST","envelope":"JSON-RPC-2.0","contentType":"application\/json","SMDVersion":"2.0","services":{"ping":{"envelope":"JSON-RPC-2.0","transport":"POST","parameters":[{"type":"any","name":"mirror","optional":true}],"returns":["array","array","any","any"]}},"methods":{"ping":{"envelope":"JSON-RPC-2.0","transport":"POST","parameters":[{"type":"any","name":"mirror","optional":true}],"returns":["array","array","any","any"]}}} 
```

现在，在研究时，我确实发现了一些非常方便的客户端，但它们似乎都不适用于 Windows Phone 程序集... [http://code.google.com/p/jayrock/source/browse/src/Jayrock.Sandbox /JsonRpcClient.cs](http://code.google.com/p/jayrock/source/browse/src/Jayrock.Sandbox/JsonRpcClient.cs) 喜欢这个。

注意客户端需要从 Jayrock 引用的事实，但是获取源并自己构建它会导致过多的其他错误；（此版本的应用程序不支持解决方案文件夹和 www 文件夹（Visual Studio 2010 for Windows Phone）

任何有关如何通过 JSON RPC 访问此 Web 服务的帮助将不胜感激！

编辑 - -

终于找到了工作客户；NewtonSoft，仍然不知道如何实现ping服务......我对这件事的了解太有限了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:29:42.617

我刚刚更新了[JSON-RPC.NET](http://jsonrpc2.codeplex.com/)的源代码以包含客户端库的 Windows Phone 7 版本。Windows Phone 7 客户端仍处于测试阶段，还需要更多测试，但您可能会很幸运。我用它做了一些非常基本的测试，它似乎有效，但我需要几天时间才能有时间证明它。

这是[Windows Phone 7 类](http://jsonrpc2.codeplex.com/SourceControl/changeset/view/11943#282775)的源代码的直接链接以供参考，或者如果您想要实现不基于 Reactive Extensions 的客户端。

此 JSON-RPC 客户端确实依赖于 Newtonsoft JSON.NET 库进行序列化和反序列化。

我希望这有帮助。

# macros - SAS 宏：引号的奇怪行为

> ID：10025708
> 
> 赞同：1
> 
> 时间：2012-04-05T09:06:12.357
> 
> 标签：macros, sas, comma

我正在学习 SAS 并编写这个宏：

```
 %macro firstMacro(mvLO, OLO);
    %local Count;
    %local Wordy;
    %local Resty;
        %let Resty = '';
        %let Count = %sysfunc( count( &OLO, %str( ) ) );
        %let Wordy = %sysfunc( scan(&OLO, 1 ,%str( ) ) );
        %let Wordy = "&Wordy";
        %let Resty = &Wordy;
        %put &Resty;
        /*strange behavior here*/
    %DO I=2 %TO &Count+1;       
        %let Wordy = %sysfunc(scan(&OLO, &I ,%str( ) ));
        %let Wordy = "&Wordy";
        %put Wordy is;
        %put &Wordy;
        %let Resty = %sysfunc(cats(&Resty, %str(,), &Wordy));
        %put &Resty;
    %END;
        %put FINAL OUT;
        %put &Resty;        
  %mend firstMacro; 
```

并称它为：

```
 %firstMacro(mvLO=WORK, OLO=field_1 field_2 field_3); 
```

并查看此输出：

```
 FINAL OUT
  "field_1""field_2","field_3 
```

所以，我问SAS：你为什么在和`,`之间吃我的逗号（）？`field_1``field_2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:32:42.863

我想如果你更换这个

```
%let Resty = %sysfunc(cats(&Resty, %str(,), &Wordy)); 
```

有了这个

```
%Let RESTY=&resty %str(,) &wordy; 
```

它会起作用（至少在您的示例调用中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:30:23.083

由于您正在尝试学习 SAS。这是一个较短的宏来做同样的事情。

```
%macro firstMacro(mvLO, OLO);
    %local str1 str2 str3;
    %let str1=%sysfunc( strip(%sysfunc(compbl(&OLO))));
    %let str2=%sysfunc( transtrn(&str1,%str( ),%str(, ) )) ;
    %let str3=%sysfunc( catq(2csa, &str2));
    %put &str3;
 %mend firstMacro;
 %firstMacro(mvLO=WORK, OLO=field_1 field_2 field_3); 
```

登录

```
"field_1","field_2","field_3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:18:22.803

如果你喜欢循环（谁不喜欢）：

```
%macro firstMacro(mvLO=, OLO=);

   %* Note we dont need to make those macrovariables local in a macro - they;
   %* should be local to the macro unless you specifically make them global;

   %* Get a counter started ;
   %let i = 1;

   %* Initiate your new string to be empty;
   %let resty = ;

   %* Loop over your inputs until there are none left *;  
   %do %until(%scan(&OLO, &i) = );    

      %* Add the quotes and the comma;
      %let resty = &resty "%scan(&OLO, &i)", ;

      %* Update the counter;
      %let i = %eval(&i + 1);
   %end;

   %* Get rid of that trailing comma;
   %let resty = %substr(%nrbquote(&resty, 1, %eval(%length(&resty) - 1));

   %* Output to the log;
   %put &resty;
%mend; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T10:09:09.340

使用 qsysfunc 代替 sysfunc

# python - pylint 报告 _ 不可调用

> ID：10025710
> 
> 赞同：4
> 
> 时间：2012-04-05T09:06:18.917
> 
> 标签：python, pylint

## 问题

我已将 ugettext_lazy 导入为 _ 但 pylint 抱怨 _ 不可调用。有没有办法忽略这个错误信息？

```
from django.utils.translation import ugettext_lazy as _
...
class A(models.Model):
    name = models.CharField(max_length=255, verbose_name=_("Name")) 
```

## 回答

看来我已经找到了一半的答案。有一种方法可以忽略某些消息。

```
[MESSAGES CONTROL]
disable=E1102[,<msg id>]+ 
```

获取消息和 ID 列表：

```
shell> pylint --list-msgs 
```

为什么它只有一半的解决方案？好吧，不，它不会报告这样的情况：

```
asdf = 5
asdf() 
```

也许有一种方法可以指定错误原因，但那是另一天：|。

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:50:37.493

禁用 pylintrc 文件中的消息以避免误报绝对不是解决方案，因为它将完全停用此检查。

看看 django 的源代码，好像 pylint 不喜欢这些`lazy()`东西。Django 人可能应该阅读[http://www.logilab.org/blogentry/78354](http://www.logilab.org/blogentry/78354)并启动一个 django 特定插件，它可以轻松解决此类问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-09T19:05:30.253

在您的 pylintrc 文件中添加以下内容

```
[VARIABLES]
additional-builtins=_ 
```

这会将下划线符号添加到应该在内置函数中定义的附加名称列表中，并且 pylint 不会抱怨它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T09:44:03.923

`pylint --additional-builtins=_ ...`将在大多数情况下完成工作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-04-05T18:19:07.423

_ 指最后输出的值

所以，这可能是错误原因

```
>>> 1 + 1
2
>>> print _
2
>>> _("foo")
 TypeError: 'int' object is not callable 
```

# drupal - 在视图中显示与不同类型的任何其他节点相关的那些节点的方法

> ID：10025713
> 
> 赞同：0
> 
> 时间：2012-04-05T09:06:22.630
> 
> 标签：drupal, drupal-7, drupal-views

我有两种内容类型——“博客”和“新闻”。我正在使用参考字段将博客节点与新闻节点相关联。现在，对于新闻登录页面，我需要一个显示“相关博客”的块视图，即它列出与任何新闻节点相关的博客。

新闻登陆页面是一个面板页面，其主视图列出了所有新闻节点。“相关博客”块将放置在主块下方。

有没有办法使用视图来实现这个“相关博客”块？

我正在使用 Drupal7，我可以自由地使用任何模块来建立关系，除了引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:28:45.280

只需创建一个新视图，将引用字段添加为关系，并将 NID 作为上下文过滤器。还将上下文过滤器设置为提供默认值并从 URL 中选择内容 ID。将块添加到您的新闻页面。

# wcf - netTCP 绑定和自托管的问题

> ID：10025717
> 
> 赞同：1
> 
> 时间：2012-04-05T09:06:34.290
> 
> 标签：wcf, nettcpbinding, self-hosting

我在网上搜索过，但找不到解决问题的方法。

我使用 nettcpbinding 在 XP 上自行托管我的服务。配置文件如下：

```
<system.serviceModel>

    <diagnostics>
      <messageLogging logMalformedMessages="true" logMessagesAtServiceLevel="true"
        logMessagesAtTransportLevel="true" />
    </diagnostics>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="false" />

    <services>       
 <service behaviorConfiguration="behaviorconfig"
        name="myservice">
         <host>
          <baseAddresses>
            <add baseAddress="net.tcp://10.1.3.186:8001/myService" />
          </baseAddresses>
        </host>
        <endpoint address=""
               binding="netTcpBinding"
               bindingConfiguration="BindingConfiguration"
               contract="xxx.ISomeService" />

        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />       
      </service>
 </services>
    <bindings>
           <netTcpBinding>
        <binding name="BindingConfiguration" receiveTimeout="10:00:00"
          sendTimeout="10:00:00" maxBufferSize="65536" maxReceivedMessageSize="65536"
          transferMode="Streamed">
          <readerQuotas maxDepth="65536" maxStringContentLength="65536"
            maxArrayLength="65536" maxBytesPerRead="97108864" maxNameTableCharCount="65536" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="behaviorconfig">
          <serviceMetadata />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>

      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

并且 selfhost 代码是

```
Uri tcpUrl = new Uri("net.tcp://10.1.3.186:8001/myService");
            //Create ServiceHost
            ServiceHost host
            = new ServiceHost(typeof(xxx.SomeService), tcpUrl);
            //Add a service endpoint
            host.AddServiceEndpoint(typeof(xxx.ISomeService)
            , new NetTcpBinding(), "");
            //Enable metadata exchange

            ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
            smb.HttpGetEnabled = false;
            host.Description.Behaviors.Add(smb);
            //Start the Service
            host.Open(); 
```

当我尝试添加服务引用时，我收到错误错误：无法从 net.tcp://10.1.3.186:8001/myService/mex 获取元数据

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T16:53:20.157

看起来您缺少 mex 端点：

host.AddServiceEndpoint(typeof(IMetadataExchange),MetadataExchangeBindings.CreateMexTcpBinding(), "mex");

稍作修改以澄清：需要 mex 端点，以便可以交换有关服务上可用内容的信息。除了主 TCP 侦听器之外，您还可以添加它。使用基于 http 的服务（wsdl 等）时会自动添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:51:42.367

检查这些：

1.  非Http激活：http: [//msdn.microsoft.com/en-us/library/ms731053 (VS.100).aspx](http://msdn.microsoft.com/en-us/library/ms731053(VS.100).aspx)
2.  检查 Windows Service *Net.Tcp 侦听器适配器*是否正在运行

# google-maps - 谷歌地图奇怪的行为 - 标记信息窗口总是显示来自同一个标记的信息

> ID：10025721
> 
> 赞同：0
> 
> 时间：2012-04-05T09:06:42.200
> 
> 标签：google-maps, infowindow

我有带有多个不同颜色标记的地图和一些信息窗口。一切正常，除了当我单击某个标记（例如我有 5 个）时，它会打开我的光标，比如说，第 4 个标记并始终从该标记显示信息窗口。所以它总是显示相同的信息窗口。这是一个小的 html 文件，所以如果有人知道解决方案，我将不胜感激。我也尝试过，`google.maps.event.addDomListener`因为我认为存在问题，但行为相同。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
    <title>Google Maps Javascript API v3 Example: Loading the data from an XML</title> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript" src="downloadxml.js"></script>

<script type="text/javascript"> 
//<![CDATA[

     // global "map" variable
      var map = null;

function initialize() {

  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(43.907787,-79.359741),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
                                myOptions);

  google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });
      // Read the data from example.xml
      downloadUrl("example7.xml", function(doc) {
        var xmlDoc = xmlParse(doc);
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          // obtain the attribues of each marker
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"));
          var point = new google.maps.LatLng(lat,lng);
          var html = markers[i].getAttribute("html");

        var severity = parseFloat(markers[i].getAttribute("severity"));

        var color= "66FF33";

       if (severity == 0) color = "66FF33";
       else if (severity == 1) color = "990099";
        else if (severity == 2) color = "00CCFF";

        var pinImage = new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/" + color,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34));

      var marker = new google.maps.Marker({
                position: point,
                map: map,
                icon: pinImage,

            });

 google.maps.event.addListener(marker, 'click', function() {
        var alarmanchor1='<span class="url"><a href="' + html;
        var alarmanchor2='" title="www" target="_blank">Event List</a></span>';
        var contentString=alarmanchor1+alarmanchor2;
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });

        }

      });
    }

var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
  });

//]]>
</script> 

  </head> 
<body style="margin:0px; padding:0px;" onload="initialize()"> 

    <table border="1"> 
      <tr> 
        <td> 
           <div id="map_canvas" style="width: 1050px; height: 1200px"></div> 
        </td> 

      </tr> 
    </table> 

<script src="urchin.js" type="text/javascript"> 
</script> 

  </body> 
</html> 
```

我的 XML 是：

```
<markers>

 <marker lat="43.65654" lng="-79.90138" html="http://www.google.com"  label="Marker One" severity="0" />
 <marker lat="43.91892" lng="-78.89231" html="http://www.yahoo.com" label="Marker Two" severity="1" />
 <marker lat="43.82589" lng="-79.10040" html="http://www.sport.com"  label="Marker Three" severity="2" />
  <marker lat="43.72589" lng="-79.60040" html="http://www.stackoverflow.com"  label="Marker Fourth" severity="3" />
   <marker lat="43.52589" lng="-79.70040" html="http://www.stackoverflow.com"  label="Marker Five" severity="4" />
 </markers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:56:27.093

只需将您的代码更改为此，以便它为每个元素获取正确的 url。

```
<a href="' + html; 
```

到

```
<a href="' +markers[i].getAttribute("html"); 
```

所以你的问题的完整代码是：

```
google.maps.event.addListener(marker, 'click', (function(marker, i) { return function(){ var alarmanchor1='<span class="url"><a href="' +markers[i].getAttribute("html"); var alarmanchor2='" title="www" target="_blank">Event List</a></span>'; var contentString=alarmanchor1+alarmanchor2; infowindow.setContent(contentString); infowindow.open(map, marker); } }) (marker, i)); 
```

# iphone - NSFileManager 无法创建文件

> ID：10025724
> 
> 赞同：0
> 
> 时间：2012-04-05T09:07:11.053
> 
> 标签：iphone, objective-c, ios, nsfilemanager

我有这个代码。此代码不会在 Document 目录中创建文件，我不知道为什么。谁能看到我错过了什么。“数据”字典中有我需要的东西，但是当涉及到 writeToFile：它没有发生，因为没有创建文件。我拥有的其他应用程序中也可以使用相同的代码，我肯定会遗漏一些东西。

```
- (void)addBookmark{

NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
    {
        [self filePathOfBookmarks];
    }

    NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];

    if ([fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
    {
        data = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];
    }
    else
    {
        // If the file doesn’t exist, create an empty dictionary
        data = [[NSMutableDictionary alloc] init];
    }

    NSMutableDictionary *firstOne = [NSMutableDictionary dictionary];
    [firstOne setObject:@"one" forKey:@"name"];
    [firstOne setObject:@"two" forKey:@"call"];
    [firstOne setObject:@"twoandhalf" forKey:@"email"];
    [firstOne setObject:@"four" forKey:@"description"];

    [data setObject:firstOne forKey:@"ID"];

   [data writeToFile: [self filePathOfBookmarks] atomically:YES];

    NSMutableDictionary *savedStock = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];
    NSLog(@"file content %@",savedStock);
}

- (NSString *) filePathOfBookmarks {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirectory = [paths objectAtIndex:0];
    return [docDirectory stringByAppendingPathComponent:@"favourites"];
} 
```

* * *

```
NSLog(@"%@",[self filePathOfBookmarks]); 
```

这返回：

/Users/spire/Library/Application Support/iPhone Simulator/5.1/Applications/40CAA37F-6477-4101-A142-D4797748ABD9/Documents/favorites

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:42:57.150

请参阅下面的代码，它在我这边运行良好。您刚刚在 filePathOfBookmarks 方法中提到了目录而不是确切的文件名。我可以将数据保存在 favourites.txt 文件中。

您还可以参考以下链接以获取有关 iOS 中文件处理的更多信息

1)[文件保存-加载/使用文档目录存放文件](http://www.ios-developer.net/iphone-ipad-programmer/development/file-saving-and-loading/using-the-document-directory-to-store-files)

2) [iPhone 文件系统](http://iphonedevelopertips.com/data-file-management/iphone-file-system-creating-renaming-and-deleting-files.html)

```
- (void)addBookmark{

    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
    {
        [self filePathOfBookmarks];
    }

    NSMutableDictionary *data;// = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];

    if ([fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
    {
        data = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];
    }
    else
    {
        // If the file doesn’t exist, create an empty dictionary
        data = [[NSMutableDictionary alloc] init];
    }

    NSMutableDictionary *firstOne = [NSMutableDictionary dictionary];
    [firstOne setObject:@"one" forKey:@"name"];
    [firstOne setObject:@"two" forKey:@"call"];
    [firstOne setObject:@"twoandhalf" forKey:@"email"];
    [firstOne setObject:@"four" forKey:@"description"];

    [data setObject:firstOne forKey:@"ID"];

    [data writeToFile: [self filePathOfBookmarks] atomically:YES];

    NSMutableDictionary *savedStock = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];
    NSLog(@"file content %@",savedStock);
}

- (NSString *) filePathOfBookmarks {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirectory = [paths objectAtIndex:0];
    return [docDirectory stringByAppendingPathComponent:@"favourites.txt"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:51:08.750

你的一些代码没有意义（对我来说）。

这没有任何作用：

```
if (![fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
{
    [self filePathOfBookmarks];
} 
```

然后你用你的书签文件内容初始化你的数据对象——此时文件可能不存在：

```
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]]; 
```

您可以简单地省略上述两个代码块，因为您之后再次检查它：

```
if ([fileManager fileExistsAtPath: [self filePathOfBookmarks]]) 
{
    data = [[NSMutableDictionary alloc] initWithContentsOfFile: [self filePathOfBookmarks]];
}
else
{
    // If the file doesn’t exist, create an empty dictionary
    data = [[NSMutableDictionary alloc] init];
} 
```

这是有道理的。但是，当您省略前两个代码块时，请确保声明数据对象：

```
NSMutableData *data; 
```

然后将 firstOne 对象设置为数据字典。这似乎很好（尽管使用此代码，之前从现有书签文件加载的数据根本没有使用）。

编写数据字典似乎也不错：

```
[data writeToFile: [self filePathOfBookmarks] atomically:YES]; 
```

当然，您的方法 filePathOfBookmarks 返回一个有效的文件名。

然而，该方法返回一个目录，而不是一个文件。添加后缀，如下所示：

```
return [docDirectory stringByAppendingPathComponent:@"favorites.plist"]; 
```

使用检查文件路径的有效性

```
NSLog(@"%@",[self filePathOfBookmarks]); 
```

在写入文件之前。

也试试

```
NSLog(@"%@",data); 
```

在编写之前查看您的字典包含的内容。

如果还是不行，请重新发帖。

# jsonp - 带参数的jsonp

> ID：10025727
> 
> 赞同：0
> 
> 时间：2012-04-05T09:07:19.827
> 
> 标签：jsonp

此示例工作正常（不带参数）：
[Twitter 上的 JSONP 示例](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

```
<html><head><title>Twitter 2.0</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head><body>
<div id='tweet-list'></div>
<script type="text/javascript">
$(document).ready(function() {
    var url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
    $.getJSON(url + "?callback=?", null, function(tweets) {
        for(i in tweets) {
            tweet = tweets[i];
            $("#tweet-list").append(tweet.text + "<hr />");
        }
    });
});
</script>
</body></html> 
```

但它不适用于此网址：

```
var url = "https://thiswaschangedforsecurity/Rest/Authenticate/Login?username=jsm&password=a&ip=1"; 
```

粘贴到 url 栏时，此 url 返回 json 数据：

```
{"SessionID":"44e6f809-3b40-43fc-b425-069e9c52cbda","SourceIP":"1","UserID":313} 
```

但我不能让它与 JSONP 一起工作。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:05:39.843

要启用 jsonp（导致跨域访问），这应该放在 web.config 文件中

```
<bindings>
  <webHttpBinding>
    <binding crossDomainScriptAccessEnabled="true">
      ....
    </binding>
  </webHttpBinding>
</bindings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:07:03.523

这条线

```
$.getJSON(url + "?callback=?", null, function(tweets) { 
```

正在附加一个？在应该添加 & 时添加到您的 url，因为在问题情况下，您的 url 已经有一个 ?

# javascript - 通过 javascript 进行 XSLT 转换 仅适用于 IE

> ID：10025730
> 
> 赞同：0
> 
> 时间：2012-04-05T09:07:28.747
> 
> 标签：javascript, xml, xslt, dom, msxml

在 Microsoft Internet Explorer 中，我们可以使用 Msxml2.DOMDocument.6.0 activeX 组件

使用 transformNode() 方法进行基于 xslt 的转换。我们可以加载一个xml

或 xslt 通过以下方法：

```
var activeX = new ActiveXObject("Msxml2.DOMDocument.6.0");
activeX.load('webdirectories/xml/somefile.xml'); 
```

但是我们可以通过提供 xml 作为字符串变量而不是提供

xml文件的位置？像这样的东西-

```
var xmlFileContents = '<?xml version="1.0"?><books> .... </books>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:07:02.050

是的，`loadXML`您可以使用一种方法，例如

```
if (activeX.loadXML(xmlfileContents)) {
  // now you can access DOM here
}
else {
  // check activeX.parseError.reason and errorCode here
} 
```

# visual-studio - Visual Studio 2010：CopyDirectory 或 xcopy 复制整个目录

> ID：10025733
> 
> 赞同：0
> 
> 时间：2012-04-05T09:07:30.977
> 
> 标签：visual-studio, xcopy

我想将整个目录复制到另一个目录。xcopy 和 My.Computer.FileSystem.CopyDirectory 只复制目录的“内容”。

例如：如果源：C:\Users\Myfile555\ 和目标：C:\Dest\

我希望将文件复制到 C:\Dest\Myfile555

在我的 Visual Studio 应用程序中，我制作了源和目标文件夹按钮。所以我可以选择文件夹 \Myfile555 作为源。

无论我选择什么作为目标文件夹（例如：\Desktop），它都会变成 \Desktop\Myfile555。

有人对此有任何提示吗？任何帮助是极大的赞赏。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:55:53.843

我试过的源代码：

```
Dim sourcepath = TextBox1.Text
Dim destpath = TextBox2.Text 
```

按钮1：

```
Shell("cmd /k xcopy """ & sourcepath & """ """ & destpath & """ /D /E /C /I /R /H /K /Y") 
```

Btn2：

```
My.Computer.FileSystem.CopyDirectory(sourcepath, destpath, True) 
```

这两个命令都只复制文件夹的内容，但我想复制所有文件所在的 CONTENTS + ORIGINAL 文件夹。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:02:21.740

```
 string[] returnR = null;
        returnR = Directory.GetFiles(textBox3.Text + @"\", "*.xls"); ///get all excel files 
```

然后，您只需执行 foreach 循环即可将一个文件从 returnR 数组复制到您的文件夹

# python - PDF App Engine 转换

> ID：10025741
> 
> 赞同：0
> 
> 时间：2012-04-05T09:08:05.717
> 
> 标签：python, google-app-engine, pdf

这是我第二次尝试寻求帮助。我只是想用PNG转换PDF附件，没有成功。

这是我的代码：

```
class FAX(db.Expando):
    date = db.DateTimeProperty(auto_now_add=True)

class LogSenderHandler(InboundMailHandler):
    def receive(self, mail_message):
        for elemento in mail_message.attachments:
            asset = conversion.Asset("application/pdf", str(elemento[1]), "Fax.pdf")
            conversion_obj = conversion.Conversion(asset, "image/png")
            result = conversion.convert(conversion_obj)
            for elemento2 in result.assets:
                fax = FAX()
                fax.immagine = elemento2.data
                fax.put()

def main():
    application = webapp.WSGIApplication([LogSenderHandler.mapping()], debug=True)
    wsgiref.handlers.CGIHandler().run(application)

if __name__ == '__main__':
        main() 
```

这是日志：

```
0.1.0.20 - - [05/Apr/2012:02:04:33 -0700] "POST /_ah/mail/fax@faxmeraviglie.appspotmail.com HTTP/1.1" 200 124 - - "faxmeraviglie.appspot.com" ms=558 cpu_ms=163 api_cpu_ms=0 cpm_usd=0.010690 loading_request=1 instance=00c61b117c45eeb741ec2540095a8ba3862842 
```

# drupal - Drupal 在多语言站点上传路径

> ID：10025742
> 
> 赞同：1
> 
> 时间：2012-04-05T09:08:06.327
> 
> 标签：drupal, drupal-7, multilingual

在多语言站点中，我遇到了 Drupal 上传路径的问题。我制作了一种新语言，并且由于图像的源没有反斜杠，所以它不起作用。

我的函数使用以下代码。

```
variable_get('file_public_path', drupal_get_path('theme', $theme) . '/uploads').'/'; 
```

如果我使用以下一个，它可以工作。

```
 '/' . variable_get('file_public_path', drupal_get_path('theme', $theme) . '/uploads').'/'; 
```

这是一种丑陋的解决方案，我敢打赌有一些更优雅的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:46:14.537

您的代码的替代方法是获取保存在公共路径中的图像的 URL，如下所示。（用正确的文件名替换“image.png”。）

```
$image_url = file_create_url(variable_get('file_public_path', conf_path() . '/files') . '/image.png'); 
```

在您的代码中，您需要在开头使用斜杠，否则该路径不被认为是相对于服务器文档目录的。
假设您为 Drupal 站点启用了意大利语作为语言，页面的 URL 是[http://example.com/it/page](http://example.com/it/page)，并且图像保存在 sites/default/files/image.png 中。如果没有斜线，则浏览器中的图像 URL 将被视为[http://example.com/it/sites/default/files/image.png](http://example.com/it/sites/default/files/image.png)；使用斜线，图像 URL 被认为是来自浏览器的[http://example.com/sites/default/files/image.png](http://example.com/sites/default/files/image.png)。

作为旁注，“file_public_path”Drupal 变量的默认值应该是`variable_get('file_public_path', conf_path() . '/files'`. 这是[system_file_system_settings()](http://api.drupal.org/api/drupal/modules!system!system.admin.inc/function/system_file_system_settings/7)中使用的默认值。

```
 $form['file_public_path'] = array(
    '#type' => 'textfield', 
    '#title' => t('Public file system path'), 
    '#default_value' => variable_get('file_public_path', conf_path() . '/files'), 
    '#maxlength' => 255, 
    '#description' => t('A local file system path where public files will be stored. This directory must exist and be writable by Drupal. This directory must be relative to the Drupal installation directory and be accessible over the web.'), 
    '#after_build' => array('system_check_directory'),
  ); 
```

# ios - 需要一些建议来学习 OCR 相关技术

> ID：10025744
> 
> 赞同：2
> 
> 时间：2012-04-05T09:08:15.843
> 
> 标签：ios, ocr, tesseract

我正在使用 tesseract OCR 引擎为 iPhone 开发一个 OCR 项目。我打算编写以下模块：

*   从 iPhone 相机捕捉图像
*   对图像进行预处理以对其进行细化，以改善 OCR 输出。
*   将 OCR 输出划分为有意义的字段。
*   为 OCR 引擎定义一些规则以忽略任何未定义的字符。（例如，如果 OCR 输出是`0226s5242`我希望它忽略`s`字符）

我想开始学习与这些模块相关的主题，我不了解 OCR 相关技术，所以任何建议都会非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:28:03.443

然后开始为 iphone 编译 tesseract。

[此链接可能会对您有所帮助。](http://iphone.olipion.com/cross-compilation/tesseract-ocr)

也试试下面的问题：

[如何为iphone交叉编译tesseract ocr引擎？](https://stackoverflow.com/questions/9798626/how-to-cross-compile-tesseract-ocr-engine-for-iphone)

然后尝试一些 OCR 演示：[在这里尝试](https://github.com/nolanbrown/Tesseract-iPhone-Demo)

并在SOF中搜索，很多相关链接都在这里：

[在 iphone 中实现 tesseract OCR](https://stackoverflow.com/questions/9124197/implement-tesseract-ocr-in-iphone)

[iPhone：如何使用 Tesseract](https://stackoverflow.com/questions/8969699/iphone-how-to-use-tesseract)

[Iphone 的 Tesseract 示例](https://stackoverflow.com/questions/2335524/tesseract-example-for-iphone)

等等是其中的一些..

# variables - 找不到变量：FB？

> ID：10025747
> 
> 赞同：3
> 
> 时间：2012-04-05T09:08:31.643
> 
> 标签：variables

我正在尝试使用 加载页面`jquery.load`，并且在加载之后，我尝试在该页面中运行此代码：

```
FB.XFBML.parse(); 
```

然后我得到错误：`Can't find variable: FB`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:21:16.160

您必须先加载 Facebook Javascript SDK。有关执行此操作的多种方法，请参[见此链接](http://developers.facebook.com/docs/reference/javascript/)。

# eclipse - mac上的eclipse：替换对话框-替换所有操作的快捷方式

> ID：10025751
> 
> 赞同：8
> 
> 时间：2012-04-05T09:08:39.937
> 
> 标签：eclipse, macos, keyboard-shortcuts

来自 Windows，我习惯于通过键盘在对话框上触发操作（点击 alt，寻找带下划线的字符，按下那个）

一旦我的文本搜索对话框打开，我应该按什么来触发全部替换操作？百万谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:26:44.437

迄今为止对我来说最快的“快捷方式”：3x shift + tab，然后是空格（启用全键盘访问）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:34:33.507

尝试按 alt（位于 Ctrl 和 command 之间的键）+ a

# python - 在 Python 中导入 XML 字典

> ID：10025752
> 
> 赞同：1
> 
> 时间：2012-04-05T09:08:43.850
> 
> 标签：python, objective-c, xml, parsing, dictionary

我需要一些python帮助。我是python新手。我曾经在 Objective-C 中编写过很多程序。

## 在 Objective-C 中，我能够将 NSDictionary 保存为 xml 文件并使用简单的命令直接加载它。这是我保存的 xml 字典的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>1</key>
    <string>Object One</string>
    <key>2</key>
    <string>Object Two</string>
    <key>3</key>
    <string>Object Three</string>
</dict>
</plist> 
```

* * *

如果我在 Objective-C 中加载它，我可以直接将字典作为 NSDictionary 获取。

所以我的问题是：如何在 Python 中轻松做到这一点。我发现了一些使用解析器（例如 lxml）的东西。我设法加载了数据，但我无法获得只有键和值的字典。我在互联网上搜索了很多，但找不到合适的东西。有没有人有想法或建议？

我试过这个：[http](http://code.activestate.com/recipes/410469-xml-as-dictionary/) ://code.activestate.com/recipes/410469-xml-as-dictionary/ 但我没能成功。

提前，非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:23:23.497

使用 plistlib：[http ://docs.python.org/dev/library/plistlib.html](http://docs.python.org/dev/library/plistlib.html)

```
pl = readPlist(pathOrFile)
print(pl["1"]) 
```

# java - Jboss - java.net.SocketException：打开的文件太多

> ID：10025763
> 
> 赞同：3
> 
> 时间：2012-04-05T09:09:16.547
> 
> 标签：java, jboss

以下错误的正确解决方案，增加 ulimit 对我来说不是解决方案。

环境 - 红帽上的 java 7 和 Jboss 4.3.2.GA

```
22:30:08,913 ERROR [JIoEndpoint] Socket accept failed
java.net.SocketException: Too many open files
at java.net.PlainSocketImpl.socketAccept(Native Method)
at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:396)
at java.net.ServerSocket.implAccept(ServerSocket.java:522)
at java.net.ServerSocket.accept(ServerSocket.java:490)
at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:61)
at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:309)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:20:09.423

似乎某些代码使套接字保持打开状态。确保`Socket`在完成它们后关闭 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:27:13.283

在中等负载下，我们在 RHEL 5 上遇到了类似的错误。

似乎默认的最大打开文件限制仅为 1024，这太低了。

查看：`ulimit -n`

修复当前会话：`ulimit -n 102400`

持久修复：`echo yourusername - nofile 102400 >>/etc/security/limits.conf`并重新启动会话

另请参阅 [https://serverfault.com/questions/44182/is-there-a-way-to-set-ulimit-for-all-root-processes](https://serverfault.com/questions/44182/is-there-a-way-to-set-ulimit-for-all-root-processes)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T09:58:27.903

在您增加 ulimit 或启动更多进程之前，您无法对它做任何事情。我不知道如何运行服务器的多个实例 - 请查看手册。祝你好运！

# iphone - iPhone光传感器与相机测量光强度

> ID：10025764
> 
> 赞同：7
> 
> 时间：2012-04-05T09:09:33.273
> 
> 标签：iphone, objective-c, api

我需要创建一个测量光强度的应用程序，如下所示：

[http://itunes.apple.com/us/app/luxmeter-pro/id408369821?mt=8](http://itunes.apple.com/us/app/luxmeter-pro/id408369821?mt=8) [http://itunes.apple.com/us/app/megaman-luxmeter/id455660266?mt=8](http://itunes.apple.com/us/app/megaman-luxmeter/id455660266?mt=8)

我想知道哪个是解决问题的最佳方法。据我了解，不可能使用 Apple 私有的光传感器 API。我可以使用哪些类来捕获帧并获取像素颜色或稍后可以转换为 Lux 的某些输出等属性？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:50:30.153

您真正想要的是使用相机 api 拍摄图像并运行算法来确定亮度。您也可以即时执行此操作。见下文：

相机教程：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html)

亮度算法： [http ://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera](http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera)

# duplicates - 如何防止 HornetQ 中的重复交付

> ID：10025767
> 
> 赞同：0
> 
> 时间：2012-04-05T09:09:45.340
> 
> 标签：duplicates, hornetq

我们已经研究 HornetQ 几个星期了。

在我们的业务中，我们有许多“delta”消息，并且（不幸的是......）它们没有版本化（并且由于这是一个国际标准，它们*不会*被版本化）。这意味着两次发出相同的消息显然是不受欢迎的。尽管如此，该标准承认它确实无法避免，并指示发件人在这种情况下将消息标记为*可能重复。*

我翻阅了 HornetQ 的文档，它谈到了很多关于避免服务器*接收*到的重复，但我找不到任何关于避免*产生*重复的内容。

为了更清楚，假设以下情况：

*   1个总部服务器
*   1 消费者

在名义场景中，消费者在队列中获取一条消息，将其发送给第 3 方，并在收到确认后，向服务器确认消息，以便将其从队列中删除。

现在，这里的弱点是*ack*部分。第 3 方可能收到并处理了消息，但（由于某种原因）ack 失败并且消息*没有*出队。

我意识到总部不可能知道消息已完全传递，但是我希望它知道*已经尝试*传递，并且消息很可能是重复*的第三方有关*。

有没有办法让消费者知道这个*可能已经交付*的状态，以便它可以适当地标记消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:28:40.633

One way of doing this would be to send a NAC (or throw back an error to HornetQ if the message was not acknowledged by the third party in the specified time period). If the queue in HornetQ has been configured with max-delivery-attempts > 0, then this will result in the message being redelivered.

At that point, the header of the message can be introspected by the HornetQ client for the parameter "JMSXDeliveryCount" - this will indicate whether the message is being sent for the first time or it is being redelivered.

The methodology indicated here assumes that the HornetQ client uses the JMS API for consuming the messages. I'm sure there will also be something equivalent in the core API.

# c++ - 为什么这种单例模式不起作用？

> ID：10025769
> 
> 赞同：0
> 
> 时间：2012-04-05T09:09:50.590
> 
> 标签：c++, singleton

我有两个单例，第一个的标题看起来像这样（我省略了与单例模式无关的所有内容）：

```
#ifndef TEXTUREMANAGER_DEFINED_H
#define TEXTUREMANAGER_DEFINED_H
class FontManager;
class TextureManager
{
private:
    static TextureManager *instance;
    TextureManager();
public:
    FontManager *fontManager;
    static TextureManager* Instance();
};

#endif 
```

在实现中，这是 Instance() 方法（以及实例静态成员的初始化）：

```
#include "FontManager.h"
TextureManager * TextureManager::instance = 0;
TextureManager* TextureManager::Instance ()
{
    if (instance==0)
        instance=new TextureManager;
    return instance;
} 
```

这是构造函数：

```
TextureManager::TextureManager()
{
    fontManager=FontManager::Instance();
} 
```

第二个单例（FontManager）的设计完全相同，但不是 FontManager 指针有一个 TextureManager 指针，并且在它的构造函数中它使用 TextureManager::Instance() 初始化该指针。这应该像这样工作：TextureManager 首先被实例化（当程序启动时），并且在其构造函数中第一次实例化 FontManager 单例调用 FontManager::Instance()。FontManager 在其构造函数中将其指针分配给带有 TextureManager::Instance() 的 TextureManager，此方法返回已存在的 TextureManager 实例。正确的？

但是程序没有进入无限循环，因为（我不知道为什么）Instance() 方法总是创建一个新实例。我喜欢`if (instance==0)`总是评估为真。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T09:14:03.653

因为您编写了一个无限循环，其中的构造函数`TextureManager`调用其构造函数`FontManager`，然后调用`TextureManager`.... 的构造函数，依此类推。

因为构造函数必须在分配静态变量之前完成，所以你最终会进入这个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:19:35.370

对于单例，您不会将构造函数公开为公共接口。相反，您有一个单独的静态实例检索成员函数和一个私有构造函数：

```
class Foo
{
    Foo() { /* ... */ }
public:
    static Foo & get()
    {
        static Foo instance;   // uses private constructor
        return instance;
    }
}; 
```

作为静态成员的替代方法，您也可以使用指针技巧，但是您应该`static std::unique_ptr<Foo>`确保在程序结束时正确销毁。

# c# - FolderBrowserDialog C# SelectedPath 始终显示在底部

> ID：10025770
> 
> 赞同：3
> 
> 时间：2012-04-05T09:09:53.083
> 
> 标签：c#, folderbrowserdialog

我通过以下方式打开 FolderBrowserDialog：

```
 FolderBrowserDialog fbd = new FolderBrowserDialog();
        fbd.Description = desc;
        fbd.SelectedPath = defaultPath;
        fbd.ShowNewFolderButton = showNewFolderButton;
        DialogResult result = fbd.ShowDialog();

        if (result == System.Windows.Forms.DialogResult.OK)
            return fbd.SelectedPath + @"\";
        else
            return ""; 
```

这行得通。但是每次我在此对话框中选择一个新文件夹时，整个“文件夹树”都会向下滚动到底部，以便所选文件夹位于 FolderBrowserDialog 的底部。这很烦人，因为我总是必须再次向下滚动才能选择另一个文件夹...

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:52:26.623

我能够重现您在 Windows 7 中看到的内容。但这只是第一次发生。因此，如果您压缩展开的文件夹并再次尝试单击它，它不会将选定的文件夹向下移动，而是保持原位并展开其下的子文件夹。如果我们使用箭头光标展开文件夹，则不会发生这种情况。有时我看到所选文件夹甚至向上移动以显示所有内容。这可能是设计使然，也可能是一个小错误。

# android - 什么是 textViewResourceId？

> ID：10025773
> 
> 赞同：7
> 
> 时间：2012-04-05T09:10:09.350
> 
> 标签：android, android-arrayadapter

我一直试图弄清楚如何使用 ArrayAdapter 类，并且从文档： http: [//developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，我看到构造函数需要一个名为 textViewResourceId 的整数。

这究竟是什么？

编辑：从这里的更多研究和答案来看，它看起来一定是我在包含接口代码的 xml 文件中定义的 TextView 的 id。但我在这里看到了这个例子：

`ArrAdapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1,myArrayList)`

那么 android.R.layout.simple_list_item_1 怎么用在这里呢？这究竟意味着什么？我只熟悉使用 R.id.idOfMyViewHere

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:22:15.040

**android.R.layout.simple_list_item_1**是默认布局，如果你想使用你的布局，那么你也可以像这样使用它

**`new ArrayAdapter<String>(context, layout_id, textview_id, items);`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:15:16.180

`textview`它是适配器将在其中更新您将提供的信息的 id 。你可以使用`textview`android提供的：

```
android.R.id.text1 
```

例如。或者您可以提供自己`textView`的自定义 ID

编辑

改变：

```
ArrayAdapter(this,android.R.layout.simple_list_item_1,myArrayList) 
```

和

```
ArrayAdapter(this,android.R.id.text1,myArrayList) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:15:57.437

textViewResourceId 是特定布局的 ID。要引用该 id，请使用格式 R.layout.* 。

R.layout.* 是您在 res/layout 文件夹中创建的布局。因此，如果您的 res/layout/ 文件夹中有一个名为“my_list_item.xml”的 xml 布局文件，可以使用任何您想要的布局格式，那么您可以将其用作您的 textViewResourceId（不一定是 TextView）。

如果您不想创建自己的布局，可以使用 android-sdk 目录中的内置布局，（在我的情况下是 C:\Android\android-sdk\platforms\android-8\data \res\布局）。您通过 android.R.layout.* 引用这些内置布局（注意我以“android”开头）。因此，如果我想使用内置的 simple_list_item_1.xml，那么我可以使用 android.R.layout.simple_list_item_1 来引用它。

R.layout.* <---自己的布局
android.R.layout.* <---内置Android布局

一些流行的布局：
android.R.simple_list_item_1
simple_list_item_2.xml
等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:12:39.730

来自文档：

> 由任意对象数组支持的具体 BaseAdapter。默认情况下，此类期望提供的资源 id 引用单个 TextView。

简单来说，它默认是绑定到 textView 的，而 text view 是

> 要填充的布局资源中的 TextView 的 id

# android - 应用程序未从 ldpi mdpi hdpi 文件夹中获取图像

> ID：10025775
> 
> 赞同：1
> 
> 时间：2012-04-05T09:10:12.617
> 
> 标签：android

我不知道我哪里出错了，但我的应用程序没有从 drawable-ldpi、drawable-mdpi、drawable-hdpi、drawable 获取图像。

我为平板电脑开发了一个应用程序，然后尝试使该应用程序在手机上运行。我是否创建了[此处](http://developer.android.com/guide/practices/screens_support.html)引用的 layout-sw600dp 。但是，当我将图像放入可绘制文件夹和可绘制 ldpi 文件夹时调整大小后，每次拍摄更高分辨率的文件夹图像时，无论是手机还是平板电脑。

我不知道为什么它不从相应的文件夹中获取或我哪里出错了。请帮忙。提前致谢。

!!!!!!帮助帮助帮助!!!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:27:24.727

经过大量调查，我得出结论，每个仿真器都有不同的密度，即高、低、中。这可以在图像中检查。![在此处输入图像描述](../Images/072961fd405911775e1a5b9f8db14b3c.png)

这就是为什么我的图像是从 hdpi 文件夹中获取的。我发现的唯一解决方案是为不同的设备使用不同的分辨率图像，尽管并不完全正确。但将此用作补丁，仍然欢迎任何答案。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:12:54.240

我认为你还没有在你的清单中定义它把它添加到你的 mainifest

```
<supports-screens
        android:smallScreens="true"
        android:normalScreens="true"
        android:largeScreens="true"
        android:anyDensity="true" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T06:08:02.883

您可以定义可绘制文件夹，例如

*   资源
*   可绘制的
*   可绘制-sw360dp
*   可绘制-sw600dp
*   可绘制-sw720dp

对于移动设备，您可以将图像放在 sw360dp 文件夹中，对于 7 英寸标签 sw600dp 和 7 英寸以上的 sw720dp。

# java - 通过 Java 中的 GUI 进行对象实例化

> ID：10025788
> 
> 赞同：3
> 
> 时间：2012-04-05T09:11:02.883
> 
> 标签：java, swing

我有一些通过它们的构造函数参数化的类。我需要提供一个图形用户界面，让用户指定这些参数。关于这些类，我唯一​​可以假设的是有一个构造函数（默认或带参数）。

**[更新]** 我有三组类 Aimpl、Bimpl、Cimpl。集合 Aimple 中的类扩展类 A，Bimpl 中的类扩展类 B，Cimpl 中的类扩展类 C。A、B 和 C 的实例用于对数据进行计算。在编译时我不知道哪些子类可用，所以我扫描实现并将它们添加到适当的集合中。如果最终用户想要应用计算，他需要实例化它。为了实例化它，他需要为构造函数提供适当的参数。最终用户本身就是一名程序员，并且了解数组、抽象类和接口。他甚至知道什么是合理的论点。

起初只期望原始类型（或期望原始类型的类），所以我自己编写了一个运行良好的解决方案。但现在我必须处理数组、抽象类和接口。所以我正在寻找一个可以简化向用户提供输入字段、提取输入和创建对象的任务的库。

如果没有这样的图书馆，我自己该怎么做？对于数组，我可以使用 JTexFields 然后解析输入，对于抽象类和接口，我可以扫描扩展/实现类（使用[反射库](http://code.google.com/p/reflections/)）并提供一个 JComboBox 让用户选择。我是 GUI 编程新手，所以我无法可靠地估计我的方法是否可行，我不想浪费时间解决以前解决的问题。

如果信息缺失，请随时指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:48:43.157

SWoeste 是正确的反射是用于类似于你的任务的东西，但它使用起来不是很简单。

事实上，您的问题与摇摆（或 GUI）无关。您正在解决“如何从字符串创建对象”问题。（或者至少可以简化为它）。如果您的用户是您所写的程序员，我认为非常简单的解决方案是使用 JSON（我认为它使用非常简单易懂的格式），我的代码适用于[gson](http://code.google.com/p/google-gson/) 1.6。

如果我有一个对象，比如说 FullTimeWorker，它扩展了 Person：

### 人

```
package net.betlista.gson;

public class Person {

    private String name;
    private String surname; // no setter

    public String getName() {
        System.out.println( "Person#getName()" );
        return name;
    }

    public void setName( final String name ) {
        this.name = name;
    }

} 
```

### 全职工作者

```
package net.betlista.gson;

public class FullTimeWorker extends Person {

    private double salary;

} 
```

现在您可以将 FullTimeWorker 类创建为

```
package net.betlista.gson;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class DeserializationTest {

    public static void main( final String[] args ) {
        final GsonBuilder gb = new GsonBuilder();
        final Gson gson = gb.create();
        // {
        //    "salary": 1234.5,
        //    "name": "John",
        //    "surname": "Doe",
        // }
        final String in = "{\"salary\":1234.5,\"name\":\"John\",\"surname\":\"Doe\"}";
        final FullTimeWorker w = gson.fromJson( in, FullTimeWorker.class );
    }

} 
```

## 图形用户界面

您现在在 GUI 中只需要插入 JSON 字符串的 JTextField（或更好的 JTextArea）、用于类选择的 JComboBox 和 JButton，就这么简单。

很明显，您的 GUI 几乎可以完美 - 它只取决于您的想象力，但我不确定是否有比这更简单的东西 ;-)

# jsf - 排序参数未正确传递给延迟加载 Icefaces ace:dataTable

> ID：10025791
> 
> 赞同：2
> 
> 时间：2012-04-05T09:11:19.043
> 
> 标签：jsf, datatable, lazy-loading, facelets, icefaces

我正在尝试在 ace:dataTable 中实现延迟加载。我的 Web 应用程序有很多表，所以我尝试通过使用列模板来减少冗余。目前我的表格如下所示：

**我的 xhtml 页面中的数据表**

```
<ace:dataTable 
    id="produktdatenTabelle"
        value="#{produktdatenBean.lazyModel}"
        var="row"
        rows="20"
        paginator="true"
        paginatorPosition="bottom"
        paginatorAlwaysVisible="true"
        lazy="true">

    <ui:include src="/resources/aceDataTable/column.xhtml">
        <ui:param name="title" value="ID" />
        <ui:param name="value" value="#{row.id}" />
    </ui:include>

    <ui:include src="/resources/aceDataTable/column.xhtml">
        <ui:param name="title" value="Description" />
        <ui:param name="value" value="#{row.description}" />
    </ui:include>

</ace:dataTable> 
```

**列.xhtml**

```
<ui:composition>
    <ace:column headerText="#{title}" sortBy="#{value}" filterBy="#{value}" filterMatchMode="contains">
        <c:choose>
            <!-- Editable -->
            <c:when test="${editable == 'true'}">
                <ace:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{value}"/>
                    </f:facet>
                    <f:facet name="input">
                        <h:inputText value="#{value}" />
                    </f:facet>
                </ace:cellEditor>
            </c:when>
            <!-- Not editable -->
            <c:otherwise>
                <h:outputText value="#{value}"/>
            </c:otherwise>
        </c:choose>
    </ace:column>
</ui:composition> 
```

**produktdatenBean.lazyModel 的类**

```
public class LazyDataModelImpl<D> extends LazyDataModel<D>
{

    @Override
    public List<D> load(int first, int pageSize, SortCriteria[] sortCriteria, Map<String, String> filters)
    {
        ...
    }

} 
```

参数“first”和“pageSize”被正确传递，我可以使用它们从数据库加载我的对象。所以一切都在那里工作。但现在我正在尝试排序。

如果我按列 ID 排序，我会在数组“sortCriteria”中得到一个 SortCriteria 对象（如预期的那样）。不幸的是，它已将其 propertyName 设置为**'#{value'**而不是**'id'**。因此，模板内的参数在传递给 load() 方法时不会得到解析。

如果删除模板并将我的表格更改为

**删除了模板的数据表**

```
<ace:dataTable 
        id="produktdatenTabelle"
        value="#{produktdatenBean.lazyModel}"
        var="row"
        rows="20"
        paginator="true"
        paginatorPosition="bottom"
        paginatorAlwaysVisible="true"
        lazy="true">

    <ace:column headerText="ID" sortBy="#{row.id}" filterBy="#{row.id}" filterMatchMode="contains">
        <h:outputText value="#{row.id}"/>
    </ace:column>

    <ace:column headerText="Description" sortBy="#{row.description}" filterBy="#{row.description}" filterMatchMode="contains">
        <h:outputText value="#{row.description}"/>
    </ace:column>

</ace:dataTable> 
```

一切都按预期工作（SortCriteria 已将 propertyName 设置为**'id'**）。

所以我的问题是：我可以使用带有延迟加载 ace:dataTable 的模板还是这不应该工作？如果可能，我该怎么做才能正确传递参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:46:16.693

您需要一个 Facelets 标记文件而不是一个 Facelets 包含文件。

包含文件方法基本上只在视图构建期间构建一次包含文件，并将生成的 JSF 组件树插入该位置，然后在视图渲染期间对其进行处理。因为 JSTL 标记是在视图构建时执行的，这意味着此时所有 JSTL 标记都已被处理。但是，JSF 数据表不会在视图构建期间进行处理，而只是在视图呈现期间进行处理，因此它的`var`计算结果始终为`null`，因此`#{value}`始终`null`位于包含文件中。

标记文件方法将在视图渲染时间处理标记文件，因此您基本上是将 JSTL 作业从视图构建时间移动到视图渲染时间，然后数据表`var`的 EL 范围内将可用。

您可以保持`column.xhtml`代码不变（我只是将其放入`/WEB-INF`以便最终用户无法单独请求它）。您只需要创建一个`.taglib.xml`文件，例如`/WEB-INF/custom.taglib.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>
    <namespace>http://example.com/custom</namespace>

    <tag>
        <tag-name>column</tag-name>
        <source>/WEB-INF/tags/column.xhtml</source>
    </tag>
</facelet-taglib> 
```

如果您在 中按以下方式注册`/WEB-INF/web.xml`，

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/custom.taglib.xml</param-value>
</context-param> 
```

*（参数值可以引用多个标签库，你只需要用分号分隔它们）*

然后你就可以按如下方式使用它，

```
<html ... xmlns:my="http://example.com/custom">

...

<ace:dataTable 
    id="produktdatenTabelle"
        value="#{produktdatenBean.lazyModel}"
        var="row"
        rows="20"
        paginator="true"
        paginatorPosition="bottom"
        paginatorAlwaysVisible="true"
        lazy="true">

    <my:column title="ID" value="#{row.id}" />
    <my:column title="Description" value="#{row.description}" />
</ace:dataTable> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# sharepoint - 共享点书籍

> ID：10025793
> 
> 赞同：-1
> 
> 时间：2012-04-05T09:11:30.607
> 
> 标签：sharepoint

我是 SharePoint 的新手。我想学习sharepoint，但问题是我不是来自开发人员的背景。所以你能推荐一些帮助我从头开始学习sharepoint的书吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:36:30.103

您所说的“不是来自开发人员背景”到底是什么意思？以下是您可以考虑的

1.  第一次 SharePoint 开发人员/用户 没有以前的编程经验，但有 Web 或门户开发知识（包括 HTML 和 Javascript） 访问[http://www.pluralsight-training.net/microsoft/](http://www.pluralsight-training.net/microsoft/) 这里的东西不是免费的，但投资是值得的你获得的知识。

2.  编程新手 没有任何编程经验，也不知道 Web 或 Portal 开发。这将比任何事情都花费时间，并且考虑到您想学习 SharePoint，请三思而后行。我并不是要让您失望，但如果您愿意在接下来的 3 个月中每天至少投入 8 到 10 个小时（3 是一个变量！！！），那么从网站是什么开始了解并了解Web 开发的基础。这不是火箭科学，但也不是微不足道的，所以做好准备，这将是令人兴奋的。访问[http://tutsplus.com/](http://tutsplus.com/) 他们有一些关于 HTML 和 Web 开发的免费资料。最重要的是，您应该准备好在这两种情况下投入时间，因为 SharePoint 是一头不同的野兽，而且有时看起来工作量太大。要有耐心，让基本面渗透进来，你就会看到结果。是的，将书籍放在第三位，考虑订阅 Tuts+ 或 PluralSight。PS：我不为这两个网站工作，但相信我，您会看到书籍和基于视频的学习之间的区别。

祝一切顺利。

# c# - 如何从 ChartArea 中删除元素

> ID：10025797
> 
> 赞同：0
> 
> 时间：2012-04-05T09:11:49.340
> 
> 标签：c#, visual-studio-2010, mschart

我正在创建一个图表控件

```
chart1.ChartAreas.Add("area");
chart1.series.add("time");

//loop    
//get values of a and b from excel sheet    
chart1.Series["time"].Points.AddXY(a, b);
//endloop 
```

我必须在 A 和 B 之间绘制一个图表。现在，当第二次启动应用程序时，它显示 ChartControl 已经包含一个名为 area 的成员。

所以我想从图表控件中删除区域并从系列中删除时间。如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:25:20.617

我假设您的意思是说当您刷新`ChartArea`并`Series`再次添加时。

请检查它们是否在一个`if (! IsPostBack)`

否则你需要添加类似的东西

```
Chart1.ChartAreas.Clear();
Chart1.Series.Clear(); 
```

在添加`ChartArea`,`Series`之前

如果不是，请在您的问题中添加其他详细信息。

# ios - 将 UIImage 放在 CGPath 的百分比上以创建它的起点

> ID：10025800
> 
> 赞同：0
> 
> 时间：2012-04-05T09:12:00.827
> 
> 标签：ios, uiimage, calayer, cgpath

很抱歉，我无法发布任何代码，但 StackOverflow 登录在我的工作中被阻止。所以我不得不用我的手机。

我想创建一个 CGPath 并在该路径上为 UIImage 设置动画。更具体地说，我想把它放在我创建的预定义路径上，但放在我选择的位置上。所以不是起点，而是路径的百分比。

这可能吗？我该如何管理？

我知道如何从头到尾为 UIImage 设置动画，而不是从我选择的百分比到另一个百分比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:03:38.557

我注意到这是不可能的。我现在使用单独的 CGPaths。这要容易得多。只需制作一个包含多个 2 点 CGPath 的数组。

# objective-c - 如何在 iOS 中使用 UIButton 从 UITextField 中自定义删除文本？

> ID：10025802
> 
> 赞同：0
> 
> 时间：2012-04-05T09:12:18.180
> 
> 标签：objective-c, ios

我正在使用 UIButtons 创建子视图。我想从 UITextField 中删除文本，例如带有 UIButton 的键盘退格按钮。在键盘的退格按钮中，单击一次，它只是删除一个单词。像那样，我想用 UIButton 做。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T09:21:55.167

您可以将 UILongPressGestureRecognizer 事件用于按钮，在手势开始时我们可以清除文本并在手势结束时结束它。代码通过下面的链接

[http://iossubbu.blogspot.in/2013/12/ios-custom-backspace-button-to-clear.html](http://iossubbu.blogspot.in/2013/12/ios-custom-backspace-button-to-clear.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:15:22.820

获取`UITextField`'`text`属性，删除最后一个字符并将新字符串设置回`UITextField`.

```
- (void)someButtonPressed:(id)sender {
    NSString *text = [myTextField text];
    text = [text substringToIndex:[text length] - 1];
    [myTextField setText:text];
} 
```

# ios - 如何使 SecPKCS12Import 正确导入有效的 p12 文件

> ID：10025807
> 
> 赞同：11
> 
> 时间：2012-04-05T09:12:48.780
> 
> 标签：ios, openssl, rsa, pkcs#12

我已经解决了我之前将 XML RSA 私钥转换为 PEM 文件的问题，但是我遇到了另一个问题，即在导入 P12 私钥时我得到空数据。以下是我的步骤：

1.  将 PEM 文件转换为 P12 文件

    ```
    openssl> pkcs12 -export -in rsa.pem -inkey rsa.pem -out rsa.p12 -nocerts 
    ```

2.  将 P12 文件读取到 iOS 项目

    ```
    NSString *path = [[NSBundle bundleForClass:[self class]]    
                        pathForResource:@"MyPrivateKey" ofType:@"p12"];
    NSData *p12data = [NSData dataWithContentsOfFile:path];
    if (![self getPrivateKeyRef]) 
        RSAPrivateKey = getPrivateKeywithRawKey(p12data); 
    ```

3.  导入 P12 私钥

    ```
    SecKeyRef getPrivateKeywithRawKey(NSData *pfxkeydata)
    { 
        NSMutableDictionary * options = [[[NSMutableDictionary alloc] init] autorelease];

        // Set the public key query dictionary
        //change to your .pfx  password here 
        [options setObject:@"MyPassword" forKey:(id)kSecImportExportPassphrase];

        CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);

        OSStatus securityError = SecPKCS12Import((CFDataRef) pfxkeydata,
                                                 (CFDictionaryRef)options, &items);

        CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
        SecIdentityRef identityApp =
        (SecIdentityRef)CFDictionaryGetValue(identityDict,
                                             kSecImportItemIdentity);
        //NSLog(@"%@", securityError);

        assert(securityError == noErr);
        SecKeyRef privateKeyRef;
        SecIdentityCopyPrivateKey(identityApp, &privateKeyRef);

        return privateKeyRef;

    } 
    ```

以为没有错误（OSStatus 值为 0），但 items 数组没有得到任何身份数据。我想知道我是否由于错误的 OpenSSl 使用而没有得到正确的 p12 文件格式。有人成功导入p12文件吗？困扰这个问题好几天了，如果你有线索，请给我建议，谢谢！

休伯特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T03:10:27.017

我从互联网上得到了一些提示，以下是获取 iOS 可接受的 p12 密钥和认证文件的步骤：

1.  将 XML 转换为 PEM
    Shell> 编译 XMLSpec2PEM.java
    Shell> XMLSpec2PEM rsa.xml
    将输出结果保存到 rsa.pem （从[这里](http://www.platanus.cz/blog/converting-rsa-xml-key-to-pem)
    借用）

2.  将 PEM 转换为 RSA 私钥
    OpenSSL> rsa -in rsa.pem -out rsaPrivate.key

3.  生成认证请求
    OpenSSL> req -new -key rsaPrivate.key -out rsaCertReq.crt
    （输入一些基本的认证数据）

4.  请求
    OpenSSL的签名认证> x509 -req -days 3650 -in rsaCertReq.crt -signkey rsaPrivate.key -out rsaCert.crt

5.  将认证文件格式转换为 DER（iOS 可接受格式）
    OpenSSL> x509 -outform der -in rsaCert.crt -out rsaCert.der

6.  生成 PKCS12 私钥（iOS 可接受的格式）
    OpenSSL> pkcs12 -export -out rsaPrivate.pfx -inkey rsaPrivate.key -in rsaCert.crt

无需进一步步骤，步骤 5 和 6 中生成的文件现在可以在 iOS 中使用！

OpenSSL 说明参考：http:
[//blogs.yaclife.com/ ?tag=ios%E3%80%80seckeyref%E3%80%80raw%E3%80%80key%E3%80%80rsa%E3%80%803des](http://blogs.yaclife.com/?tag=ios%E3%80%80seckeyref%E3%80%80raw%E3%80%80key%E3%80%80rsa%E3%80%803des)

[http://devsec.org/info/ssl-cert.html](http://devsec.org/info/ssl-cert.html)

# scala - 如何定义具有未绑定类型参数的成员的案例类？

> ID：10025815
> 
> 赞同：6
> 
> 时间：2012-04-05T09:13:02.893
> 
> 标签：scala, generics, type-inference, case-class

给定具有绑定类型参数的类定义，`Animal[A <: String]`似乎 Scala 编译器不会`B <: String`从`Animal[B]`. 允许推理吗？如何帮助编译器进行推理？

下面是一个案例类的具体示例，其中缺少这种推理是一个问题。

考虑以下案例类层次结构：

```
sealed trait Person[+T <: Person[T]]
case class Student() extends Person[Student]
case class Professor() extends Person[Professor] 
```

例如，我需要定义一个案例类`University`，我可以用一个类型的变量`Person[_]`对其进行实例化`val p: Person[_] = Student()`。我认为这将适用于以下定义：

```
case class University(p: Person[_]) 
```

但这无法编译并出现错误：

```
type arguments [Any] do not conform to trait Person's type parameter bounds [+T <: Person[T]] 
```

`University`如果我绑定它编译的案例类的类型参数（如果我删除`case`关键字，它也会使用无界参数进行编译，但在我的情况下这不是一个选项）：

```
case class BoundUniversity[P <: Person[P]](p: Person[P]) 
```

但是这个参数化版本不能用类型的无界变量实例化`Person[_]`：

```
val p: Person[_] = Student()
BoundUniversity(p) 
```

编译失败：

```
inferred type arguments [_$1] do not conform to method apply's type parameter bounds [P <: Person[P]] 
```

具有绑定参数的方法会发生相同的错误，例如：

```
def general[P <: Person[P]](p: P) = println(p) 
```

所以这不是特定于类构造函数。

两个问题：

1.  该类型`Person`是用参数 bounds 定义的`Person[+T <: Person[T]]`，因此该类型的每个实例都可以确保遵守这些界限：`val p: Person[P]`暗示`P <: Person[P]`; 还是我错过了什么？那么我怎样才能让编译器明白这一点，这样它就不会抱怨呢？

2.  如何/我可以定义一个带有未绑定类型参数的成员的案例类，例如`case class University(p: Person[_])`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:49:26.560

类型`X[_]`几乎不是你想要的。当你`_`在一个类型上使用时，你基本上是在说你不关心那个参数是什么，因为你永远不需要使用它。

无论如何，这编译。它可能会在路上咬你一口，存在主义类型是它们的棘手问题，但是......

```
case class University(p: Person[t] forSome { type t <: Person[t] }) 
```

# asp.net - 更新Oracle 11g 存储过程时是否必须重新启动IIS WebApp？

> ID：10025816
> 
> 赞同：0
> 
> 时间：2012-04-05T09:13:08.783
> 
> 标签：asp.net, .net, oracle11g, odp.net, odac

我有一个 ASP.NET webapp，它通过 ODAC（Oracle .NET 数据提供程序）使用 Oracle 11g 存储过程

我意识到更新存储过程似乎经常会破坏网站，必须重新启动才能再次工作。

有没有人体验过 .NET 和 Oracle 之间的这种强耦合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:16:46.160

如果存储过程更改时代码不需要更改，则不必重新启动 IIS。

调用仍将照常通过 SP 接口进行。

# c# - 在 Windows phone 7 中使用套接字 - DNS 解析？

> ID：10025823
> 
> 赞同：1
> 
> 时间：2012-04-05T09:13:30.073
> 
> 标签：c#, windows-phone-7

我想使用套接字方法连接到 URL（[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket(v=VS.96).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket%28v=VS.96%29.aspx)）；

但我不连接。

我总是收到错误：HostNotFound，但是，我尝试使用“google.com”，用于 Url，端口为“80”。

[我尝试了很多网址（ http](http://www.google.fr) ://google.com、www.google.com、http: //www.google.fr ），但我没有连接。

我看过很多网络教程，我注意到它们不是 MSDN 教程中的 DNS Resolve，有问题吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:57:08.260

您应该将[SocketAsyncEventArgs.RemoteEndPoint设置为](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.remoteendpoint.aspx)[DnsEndPoint](http://msdn.microsoft.com/en-us/library/system.net.dnsendpoint%28v=vs.95%29.aspx)的实例；这是你目前正在做的吗？

你可以[在这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202858%28v=vs.105%29.aspx)查看样品！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T09:40:33.303

试试这个。

```
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
socket.SetNetworkRequirement(NetworkSelectionCharacteristics.NonCellular);
string serverName = "www.google.com";
int portNumber = 80;
DnsEndPoint hostEntry = new DnsEndPoint(serverName, portNumber);
SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
socketEventArg.RemoteEndPoint = hostEntry;
socketEventArg.UserToken = socket;
socketEventArg.Completed += socketEventArg_Completed;
// Make an asynchronous Connect request over the socket.
socket.ConnectAsync(socketEventArg);

    void socketEventArg_Completed(object sender, SocketAsyncEventArgs e)
    {
        Socket socket = e.UserToken as Socket;
        if (e.SocketError == SocketError.Success)
        {
        }
    } 
```

# android - 如何在android中连续录制后台音频/语音？

> ID：10025824
> 
> 赞同：15
> 
> 时间：2012-04-05T09:13:32.060
> 
> 标签：android

因为我想在后台录制音频，所以我使用服务..但我无法在服务中录制音频。

我在 Activity 中尝试了相同的代码，它对我有用。但是当输入语音/语音时如何在后台进行录音，这意味着如果有语音输入应该开始录音并且应该在后台......？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T10:37:03.510

在我的一个项目中，我需要从麦克风连续录制音频。我不能共享项目，但我可以共享特定的 AudioRecorder 类。

```
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import android.content.Context;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.util.Log;

    public class AudioRecorder {
        public enum State {
            INITIALIZING,
            READY,
            RECORDING,
            ERROR,
            STOPPED
        };
        private byte[] audioBuffer = null;
        private int source = MediaRecorder.AudioSource.MIC;
        private int sampleRate = 0;
        private int encoder = 0;
        private int nChannels = 0;
        private int bufferRead = 0;
        private int bufferSize = 0;
        private RandomAccessFile tempAudioFile = null;
        public AudioRecord audioRecorder = null;
        private State state;
        private short bSamples = 16;
        private int framePeriod;

        // The interval in which the recorded samples are output to the file
        // Used only in uncompressed mode
        private static final int TIMER_INTERVAL = 120;
        volatile Thread t = null;
        public int TimeStamp = 0, count = 0, preTimeStamp = 0;

        public AudioRecorder(Context c) {
            this.sampleRate = 11025;
            this.encoder = AudioFormat.ENCODING_PCM_16BIT;
            this.nChannels = AudioFormat.CHANNEL_CONFIGURATION_MONO;
            this.preTimeStamp = (int) System.currentTimeMillis();
            myApp = (MyApp) c.getApplicationContext();
            mQueue = myApp.getQueue();

            try {
                /*          
                    String fileName = "/sdcard/XYZ/11025.wav";
                    tempAudioFile = new RandomAccessFile(fileName,"rw");
                */

                framePeriod = sampleRate * TIMER_INTERVAL / 1000;
                bufferSize = framePeriod * 2 * bSamples * nChannels / 8;

                if (bufferSize < AudioRecord.getMinBufferSize(sampleRate, nChannels, encoder)) {
                    bufferSize = AudioRecord.getMinBufferSize(sampleRate, nChannels, encoder);

                    // Set frame period and timer interval accordingly
                    framePeriod = bufferSize / (2 * bSamples * nChannels / 8);
                    Log.w(AudioRecorder.class.getName(), "Increasing buffer size to " + Integer.toString(bufferSize));
                }

                audioRecorder = new AudioRecord(source, sampleRate, nChannels, encoder, bufferSize);
                audioBuffer = new byte[2048];
                audioRecorder.setRecordPositionUpdateListener(updateListener);
                audioRecorder.setPositionNotificationPeriod(framePeriod);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }

        private AudioRecord.OnRecordPositionUpdateListener updateListener = new AudioRecord.OnRecordPositionUpdateListener() {
            @Override
            public void onPeriodicNotification(AudioRecord recorder) {
                //          Log.d(Constant.APP_LOG,"Into Periodic Notification...");
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            */
        }

        @Override
        public void onMarkerReached(AudioRecord recorder) {
            // TODO Auto-generated method stub
        }
    };

    public void start() {
        if (state == State.INITIALIZING) {
            audioRecorder.startRecording();
            state = State.RECORDING;

            t = new Thread() {
                public void run() {
                    //Here You can read your Audio Buffers
                    audioRecorder.read(audioBuffer, 0, 2048);
                }
            };

            t.setPriority(Thread.MAX_PRIORITY);
            t.start();
        } else {
            Log.e(AudioRecorder.class.getName(), "start() called on illegal state");
            state = State.ERROR;
        }
    }

    public void stop() {
        if (state == State.RECORDING) {
            audioRecorder.stop();
            Thread t1 = t;
            t = null;
            t1.interrupt();
            count = 0;
            state = State.STOPPED;
        } else {
            Log.e(AudioRecorder.class.getName(), "stop() called on illegal state");
            state = State.ERROR;
        }
    }

    public void release() {
        if (state == State.RECORDING) {
            stop();
        }

        if (audioRecorder != null) {
            audioRecorder.release();
        }
    }

    public void reset() {
        try {
            if (state != State.ERROR) {
                release();
            }
        } catch (Exception e) {
            Log.e(AudioRecorder.class.getName(), e.getMessage());

            state = State.ERROR;
        }
    }

    public State getState() {
        return state;
    }
} 
```

现在，创建服务并调用 start() 方法并为您的目的操作录制的音频缓冲区。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:23:23.963

要在后台开始录制，您可以

*   创建一个[线程](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)并在线程内进行录制。

*   创建一个将在后台运行的[服务。](http://developer.android.com/reference/android/app/Service.html)

希望能帮助到你。

## 编辑 1

```
Thread recordInBackGround= new Thread(new Runnable() {
                    @Override
                    public void run() { 
//Your recording portion of the code goes here.
}
});

recordInBackGround.start(); 
```

# objective-c - 在 iOS 4.3 模拟器中视图无法正确显示

> ID：10025828
> 
> 赞同：1
> 
> 时间：2012-04-05T09:13:45.487
> 
> 标签：objective-c, ios, tabbar, ios4

我正在开发一个要求用户始终登录的应用程序。最初它有一个登录视图，当用户登录时，它被一个标签栏视图替换。如果我构建到我的设备（iOS 5.0）或 5.0 模拟器，它工作正常。但是，如果我构建到 4.3 模拟器，我会遇到奇怪的问题。

例如：它打开的第一个选项卡最初包含登录视图 - 我还没有来得及删除它，所以目前该选项卡打开它就会从登录视图淡入菜单屏幕（两者都是分开的第一个选项卡中的视图）。在 iOS4.3 构建中，第一个视图不会淡出。

我对其进行了重新编码以跳过第一个屏幕，并让第一个选项卡直接打开到包含用户 Facebook 好友列表的菜单屏幕中。我已将好友列表打印到控制台并正确接收 - 但列表在 iOS4.3 中显示为空，在 iOS 5.0 中运行良好。在我实现单独的登录视图（afaik）之前，这些东西都有效。我假设我没有正确实现视图之间的更改，但我不确定哪里错了，因为我没有在控制台上打印任何错误，而且我仍然可以在选项卡等之间进行更改。

到目前为止，这就是我所做的（我将只包括相关部分）：

```
appDelegate.h
@interface AppDelegate : UIResponder <UITabBarControllerDelegate,LoginViewControllerDelegate, otherDelegates>

 FirstViewController *viewController1;
SecondViewController *viewController2;
ThirdViewController *viewController3;
FourthViewController *viewController4;
FifthViewController *viewController5;
loginViewController *lvc;

@property (strong, nonatomic) UITabBarController *tabBarController; 
```

...

```
appDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
lvc = [[loginViewController alloc] initWithNibName:@"loginViewController" bundle:nil];
lvc.delegate = self;
[self.window addSubview:lvc.view];
self.window.rootViewController = lvc;
[self.window makeKeyAndVisible];
}

- (void)loginViewControllerDidFinish:(loginViewController *)loginViewController {

//load windows and tab bar controller
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil] autorelease];
viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil] autorelease];
viewController3 = [[[ThirdViewController alloc] initWithNibName:@"ThirdViewiPhone" bundle:nil] autorelease];
viewController4 = [[[FourthViewController alloc] initWithNibName:@"FourthViewiPhone" bundle:nil] autorelease];
viewController5 = [[[FifthViewController alloc] initWithNibName:@"FifthViewiPhone" bundle:nil] autorelease];
[viewController4 updateTabBar];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, viewController3, viewController4, viewController5, nil];
self.window.rootViewController = self.tabBarController;
[self.window addSubview:self.tabBarController.view];
[self.window makeKeyAndVisible];
}

//called when logout button is pressed
- (void)removeTabBarView
{
//[self.tabBarController.view removeFromSuperview];
[self.window addSubview:lvc.view];
self.window.rootViewController = lvc;
 [self.window makeKeyAndVisible];
} 
```

编辑：一旦收到所有登录数据，就会在 appDelegate 中调用它。

```
[self loginViewControllerDidFinish:lvc]; 
```

它在 iOS 5.0 中运行良好的事实让我感到非常震惊，我对应用程序开发还很陌生，所以我不知道如何以不同的方式做到这一点。如果有人有任何想法，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:48:42.030

像往常一样，我花了很长时间看着它，放弃并决定寻求帮助，然后在大约半小时后意识到了一种方法。

我只是在设置选项卡栏并将其设置为视图控制器（即，将登录视图放在顶部）之后放置它：

```
lvc = [[loginViewController alloc] initWithNibName:@"loginViewController" bundle:nil];
lvc.delegate = self;
[self.window addSubview:lvc.view]; 
```

然后我只使用：

```
[lvc.view removeFromSuperview]; 
```

登录后将其删除。仍然不知道为什么其他方式在 iOS 4.3 中不起作用，所以如果有人可以提供答案，我仍然会标记一个正确的答案 - 以防其他人将来有同样的问题。

# c# - UrlEncode 未对 + 符号进行编码，并且在解密 Format Exception 时出现

> ID：10025838
> 
> 赞同：1
> 
> 时间：2012-04-05T09:14:35.223
> 
> 标签：c#, asp.net, formatexception

让我解释一下情况。在我的代码中，我将用户标识加密为注册完成后生成的字符串。加密后的字符串作为 url 参数传递，如下所示。

```
 string ConfirmCode = string.Empty;
Common.Secure.Security mySec = new Common.Secure.Security();
ConfirmCode  = mySec.Encrypt(myMember.MemberID.ToString());

string EmailValidationLink = "<a  href=\'" + pageScheme + "://" + CurrentDomain.HostName + "/Contents/Common/" + "EN" + "/" + CurrentDomain.EmailValidationPage + "?ConfirmCode=" + **UrlEncode(ConfirmCode)** + "\'>Click here to validate your account.</a>"; 
```

和：

```
protected String UrlEncode(String text) 
{ 
  return HttpContext.Current.Server.UrlEncode(text); 
} 
```

我正在使用 UrlEncode 传递加密字符串，但问题是加密文本是否有一个 '+' 符号，而解密时我得到一个 Format Exception ，因为这个 '+' 符号被视为一个 ' ' 空间。

例如，如果加密文本在获取时类似于“S7+5tZzTm0k=”，则 + 符号被视为“S7 5tZzTm0k=”，这会导致格式异常。

我的加密和解密代码如下

```
public string Decrypt(string Text)
{
    if (!ENABLED) return Text;
    des.Key = hashmd5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(myKey));
    des.Mode = CipherMode.ECB;
    ICryptoTransform desdencrypt = des.CreateDecryptor();
    Byte[] buff = Convert.FromBase64String(Text);
    return ASCIIEncoding.ASCII.GetString(desdencrypt.TransformFinalBlock(buff, 0, buff.Length));
}

public string Encrypt(string Text)
{
    if (!ENABLED) return Text;
    des.Key = hashmd5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(myKey));
    des.Mode = CipherMode.ECB;
    ICryptoTransform desdencrypt = des.CreateEncryptor();
    ASCIIEncoding MyASCIIEncoding = new ASCIIEncoding();
    Byte[] buff = ASCIIEncoding.ASCII.GetBytes(Text);
    return Convert.ToBase64String(desdencrypt.TransformFinalBlock(buff, 0, buff.Length));
} 
```

我一直在谷歌上搜索这个，每个人都建议使用 UrlEncode 可以解决问题，但在我的情况下，即使使用它也没有解决问题。

请让我知道该怎么做？

```
if (Request.QueryString["ConfirmCode"] != null)
            { 
                bool isAccountSuspended;
                isAccountSuspended = AccountManagement.AcountManager.EmailValidationNote(HttpContext.Current.Server.UrlDecode(Request.QueryString["ConfirmCode"]));

                if (!isAccountSuspended)
                {
                    lblMessage.Text = "Your account is already suspended. Please contact customer service.";
                    lblMessage.ForeColor = System.Drawing.Color.Red;
                }
                else
                {
                    lblMessage.Text = "Thank you for verifying your email address. We hope you’ll enjoy playing with us.";
                }
            } 
```

问候斯里维迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T12:21:09.663

需要使用指令：使用 System.Security.Cryptography；

```
Way to encrypt: HttpUtility.UrlEncode(Encrypt(Value)); 
```

示例：字符串值=HttpUtility.UrlEncode(Encrypt(Value));

```
Way to decrypt: Decrypt(HttpUtility.UrlDecode(value);

private string Encrypt(string clearText)
{
    string EncryptionKey = "MAKV2SPBNsdsI99212";
    byte[] clearBytes = Encoding.Unicode.GetBytes(clearText);
    using (Aes encryptor = Aes.Create())
    {
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(EncryptionKey, new byte[] { 0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76 });
        encryptor.Key = pdb.GetBytes(32);
        encryptor.IV = pdb.GetBytes(16);
        using (MemoryStream ms = new MemoryStream())
        {
            using (CryptoStream cs = new CryptoStream(ms, encryptor.CreateEncryptor(), CryptoStreamMode.Write))
            {
                cs.Write(clearBytes, 0, clearBytes.Length);
                cs.Close();
            }
            clearText = Convert.ToBase64String(ms.ToArray());
        }
    }
    return clearText;
}
private string Decrypt(string cipherText)
{
    string EncryptionKey = "MAKV2SPBNsdsI99212";
    cipherText = cipherText.Replace(" ", "+");
    byte[] cipherBytes = Convert.FromBase64String(cipherText);
    using (Aes encryptor = Aes.Create())
    {
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(EncryptionKey, new byte[] { 0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76 });
        encryptor.Key = pdb.GetBytes(32);
        encryptor.IV = pdb.GetBytes(16);
        using (MemoryStream ms = new MemoryStream())
        {
            using (CryptoStream cs = new CryptoStream(ms, encryptor.CreateDecryptor(), CryptoStreamMode.Write))
            {
                cs.Write(cipherBytes, 0, cipherBytes.Length);
                cs.Close();
            }
            cipherText = Encoding.Unicode.GetString(ms.ToArray());
        }
    }
    return cipherText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:19:49.467

`+`您可以简单地用[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)替换所有出现的- `%2B`。

```
UrlEncode(ConfirmCode).Replace("+", "%2B") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:30:43.327

稍微看一下，我相信这`Request.QueryString`将为您提供查询字符串中内容的解码版本，从而为您提供带有 + 的版本，然后您再次有效地对其进行解码，这就是错误发生的地方。

将行更改为以下内容

```
isAccountSuspended = AccountManagement.AcountManager.EmailValidationNote(Request.QueryString["ConfirmCode"]); 
```

（即删除解码），它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:55:40.663

这是推测性的，但我怀疑您可能会`UrlDecode`两次调用同一字符串。

您指出 URL 中的值为`ConfirmCode=S7%2b5tZzTm0k%3d`，这是正确的（%2b 是 '+' 的正确编码）。

如果你解码这个字符串一次，你会得到`S7+b5tZTm0k=`，如预期的那样。

如果你解码*那个*字符串，你会得到`S7 b5tZTm0k=`，因为 '+' 被解码为 ' '。这就是你所看到的。

您可能需要查看您的解码逻辑以确保生成的字符串仅被解码一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T09:27:57.923

好的，根据您提供的所有数据以及其他评论和答案，我得出的只有一个可能的逻辑结论：**您的 url 编码字符串被解码两次**。第一次解码`S7%2B5tZzTm0k%3D`给你`S7+5tZzTm0k=`，第二次解码给你`S7 5tZzTm0k=`。只需仔细调试即可检测字符串被 url 解码两次的位置。

PS 作为验证的一种方式，*对值进行两次编码*，然后它将被正确解码。两次编码的 url 值应该是`S7%252B5tZzTm0k%253D`.

# html - ASP.NET Razor：路由，循环错误的表格

> ID：10025839
> 
> 赞同：0
> 
> 时间：2012-04-05T09:14:36.277
> 
> 标签：html, asp.net, razor, html-table

![在此处输入图像描述](../Images/d117d0e1ee64de1e5e42a73b88381328.png)

在上表中，第一个 (+) 选项路由到错误的路径。

它应该重定向到 Home\UpdateField。但是当我单击第一行时，它只会刷新当前页面。所有其他行工作正常。

```
@RedeemPage.Fields.Count
                    @foreach (var item in RedeemPage.Fields) {
                        using (Html.BeginForm("UpdateField", "Home", FormMethod.Post, new { id = @RedeemPage.Id }))
                        {
                            <tr>
                                <td><input type="text" name="field_name" id="field_name" value="@item.Name" /></td>
                                <td>
                                    <select name="field_type" id="field_type">
                                        <option value="Text" selected="selected">Text</option>
                                        <option value="TextArea">Text Area</option>
                                        <option value="Hidden">Hidden field</option>
                                        <option value="Checkbox">Checkbox</option>
                                    </select>
                                </td>
                                <td><input type="checkbox" name="field_required" id="field_required" checked="@item.Required"/> </td>
                                <td><input type="text" name="field_value" id="field_value" value="@item.Value" /></td>
                                <td><input type="submit" value="" style="width:26px;height:26px;background: transparent url(http://cdn1.iconfinder.com/data/icons/prettyoffice/24/add1-.png);background-position:center;border:none;"/>
                                <input type="submit" value="" style="width:26px;height:26px;background: transparent url(http://cdn1.iconfinder.com/data/icons/softwaredemo/PNG/24x24/Close_Box_Red.png);background-position:center;border:none;"/>
                            </tr>
                        }
                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:27:32.200

问题是因为表格在另一个表格内。修复。

# algorithm - 最大利润-记忆，DP，最优

> ID：10025840
> 
> 赞同：3
> 
> 时间：2012-04-05T09:14:36.557
> 
> 标签：algorithm

我在算法游戏上练习这个问题，我尝试了以下问题，但找不到有效的方法::

所以你能帮帮我吗。这是问题所在。

这是确切的链接： http: [//community.topcoder.com/tc?module =Static&d1=match_editorials&d2=srm228](http://community.topcoder.com/tc?module=Static&d1=match_editorials&d2=srm228)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:24:07.200

[您可以使用动态规划](http://www.algorithmist.com/index.php/Dynamic_Programming)来解决它。状态可以表示为：

```
set of available coins,
whos turn it is 
```

对于每个州，您应该计算该人反过来可以赢得的最大金额。

提示：这个游戏的规则允许描述`set of available coins`为间隔。

@编辑

```
for(int interval_size = 1; interval_size <= n; interval_size++) {
    for(int interval_start = 0; interval_start + interval_size <= n; interval_start++) {
         // result[interval_start][interval_start + interval_size] depends only on
         // -> result[interval_start][interval_start + interval_size - 1]
         // -> result[interval_start + 1][interval_start + interval_size]
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:33:26.507

让`dp[i, j] = maximum profit alice can make for the coints i, ... j`.

我们有：

```
dp[i, i] = input[i] for all 1 <= i <= N
dp[i, i + 1] = max(input[i], input[i + 1])
dp[i, j] = max(// take first coin, opponent will minimize your next move
               input[i] + min(dp[i + 2, j], dp[i + 1, j - 1]),
               // take last coin, opponent will still minimize your next move
               input[j] + min(dp[i, j - 2], dp[i - 1, j - 1])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T09:33:10.253

我假设你想自己解决这个问题，所以我给你一个提示：这个问题有[最优子结构](http://en.wikipedia.org/wiki/Optimal_substructure)。

想象一下，你有两种`N-1`硬币的解决方案（没有最左边的一个，也没有最右边的一个）。`N`那么计算硬币的解决方案会很容易吗？

您可以使用两种相关的技术来利用此属性 -[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)及其称为[memoization](http://en.wikipedia.org/wiki/Memoization)的子类型。这个想法是为每个子问题存储一个解决方案，`L`其中左侧`R`缺少硬币，右侧缺少硬币（使用`NxN`数组）。在解决子问题之前，请检查数组以查看您是否已经解决了它。您最多需要解决大多数`N^2/2`子问题才能得出解决方案。

这是一个记忆解决方案的伪代码：

```
// solved[L][R] array contains the highest value a player could get
// on a subproblem where L coins are missing from the left
// and R are missing from the right of the original sequence on his move
int solved[N][N] // initialize each element to -1.
int coins[N]     // initialize with coin values 

int solve(int L, int R) {
    if (L+R == N) return 0; // No coins remain
    if (solved[L][R] >= 0) return solved[L][R];
    int remaining = sum(coins from L to R)
    int takeLeft = remaining - solve(L+1, R);
    int takeRight = remaining - solve(L, R+1);
    int result = max(takeLeft, takeRight);
    solved[L][R] = result;
    return result;
}

main() {
    int alice = solve(0, 0);
    int bob = sum(coins) - alice;
} 
```

我记得 TopCoder 在 2005 年初或 2006 年的某个时候运行过这个问题，但我不记得足够的细节来搜索他们的问题档案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T20:14:33.473

```
//@ IVlad ::Implement your code ,its giving incorrect answer.Had I implemented it properly??
int coins[1000];
int dp[1000][1000];
int main()
 {
int T,N;//N=How many coins are there
cin>>T; //No of Test Cases.
while(T--)
{
    cin>>N;
    for(int i=1;i<=N;++i)
    {
        cin>>coins[i];
    }
    for(int i=1;i<=N;++i)
    {
        dp[i][i]=coins[i];
    }
    for(int i=1;i<=N;++i)
    {
        if(i+1<=N)
        dp[i][i + 1] = max(coins[i], coins[i + 1]);
    }
    for(int i=1;i<=N;++i)
    {
        for(int j=1;j<=N;++j)
        {
            if((i+2)<=N && (i+1)<=N && (j-2)>=1 && (i-1)>=1 && (j-1)>=1)
            dp[i][j]=max( (coins[i] + min(dp[i + 2] [j], dp[i + 1][ j - 1])),coins[j] + min(dp[i] [j - 2], dp[i - 1] [j - 1]));
        }
    }
    cout<<dp[1][N]<<endl;//Answer
}

return 0; 
```

}

# java - 与 DB2 后端的 JSP 连接

> ID：10025841
> 
> 赞同：0
> 
> 时间：2012-04-05T09:14:49.530
> 
> 标签：java, jsp, db2

```
public class Connect {  

    public static Connection getConnection(){
        Connection con=null;
        String db_source="databasesource";
        String db_username="username";
        String db_password="password";
        if(con==null)
        {
            try {
                Class.forName("com.ibm.db2.jcc.DB2Driver").newInstance();
                con=DriverManager.getConnection("jdbc:db2:http://localhost:50000/"+db_source,db_username,db_password);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }           
        }
        return con;
    }
} 
```

我的系统中安装了 db2。

我创建了两个应用程序，一个是 j2se，另一个是 jsp（在 tomcat 7 上运行）。

我对 j2se 和 jsp 网站使用相同的代码，但此代码仅适用于 j2se 应用程序，不适用于 jsp 网站。我不知道问题出在哪里。

jsp网站的错误是：`java.lang.ClassNotFoundException: com.ibm.db2.jcc.DB2Driver`

在线： `Class.forName("com.ibm.db2.jcc.DB2Driver").newInstance();`

我已经多次重启了tomcat，实际上多次重启了我的电脑。搜了谷歌，只找到上面的代码...

我的课程 Connect 位于 jsp 网站 src 的 admin 包中，我使用 Eclipse Indigo for EE。

任何人的帮助都会很棒...

提前致谢。

```
EDIT : I've also added the db2jcc.jar in the projects from build path > add external jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:18:37.030

似乎找不到那个类。您确定`*.jar`在您的 Web 应用程序中拥有所有必要的文件吗？您可以将`lib`J2SE 应用程序的目录与 Web 应用程序上的目录进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:19:00.263

如果此代码在您的 J2SE 中有效，则意味着您需要在某处包含`com.ibm.db2.jcc.DB2Driver`类（*所谓的*JDBC 驱动程序）的 JAR 文件。这个 JAR 需要在 Tomcat 中可见。将其添加到`/WEB-INF/lib`目录或`/lib`Tomcat 中的目录。

顺便说一句，您的代码需要一些审查：`if(con==null)`总是满足，另一方面，如果发生错误，您将返回`null`- 很少需要。另请阅读`DataSource`Java 中的 s 概念。Tomcat 开箱即用地提供了这项服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:11:07.960

```
 java.lang.ClassNotFoundException: com.ibm.db2.jcc.DB2Driver 
```

似乎找不到那个类。因此，我建议将`db2jcc.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中。然后使用`build path > add jar`

过去很多次，我都经历过`ClassNotFoundException`jar 是否不在物理位置。然后重新启动Tomcat应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:30:10.813

它似乎`DB2Driver`在您的`class path`. 您可以将其添加到您的工作应用程序目录中或将`DB2Driver into tomcat lib directory`.

# extjs - EXTJS 组合框工具提示

> ID：10025842
> 
> 赞同：0
> 
> 时间：2012-04-05T09:14:51.557
> 
> 标签：extjs, combobox

我有一个组合框，它的数据从 SQL 数据库填充，使用商店。我想显示组合框中每个项目的工具提示，这些工具提示也存储在数据库中。那么，我应该如何得到它们。

```
function loadGENEXTst(full) {

if(GENEXTst == null) {
    GENEXTst = Ext.create('Ext.data.Store', {
        model : 'SimpleModel',
        proxy : {
            type : 'ajax',
            url : 'data/Extensions.aspx',
            reader : {
                type : 'json',
                root : 'Rows',
                totalProperty : 'TotalRows'
            },
            actionMethods : {
                create : 'POST',
                read : 'POST'
            },
            extraParams : {
                mode : 'GENERICLIST',
                start : 0,
                limit : SYSTEM.listLimit
            }
        },
        autoLoad : false
    });
} else {
    delete GENEXTst.lastParams
}

if(full) {
    GENEXTst.proxy.extraParams.mode = 'FULLLIST';
} else {
    GENEXTst.proxy.extraParams.mode = 'GENERICLIST';
}

GENEXTst.proxy.extraParams.ProjDB = SYSTEM.iSecure;

GENEXTst.load(); 
```

}

aspx 文件又具有调用存储过程来填充组合框的函数。那么，如何为组合框中的每个项目填充工具提示？

我的模型如下：

```
Ext.define('SimpleModel', {
extend : 'Ext.data.Model',
fields : ['itemID', 'Title', 'Short', 'Type', 'isActive', 'TotalRows']
}); 
```

那么，下面的代码正确吗？

```
getInnerTpl:function(){
        return '<div data-qtip="{Short}">{Title}</div>';
    } 
```

短字段包含工具提示，字段标题包含组合框列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:42:16.873

尝试使用[Ext.XTemplate](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate)

参考[自定义TplCombo](http://dev.sencha.com/deploy/ext-4.0.0/examples/form/combos.html#customTplCombo)

# javascript - 在一个画布中放置超过 2 个图像时出错？

> ID：10025844
> 
> 赞同：-2
> 
> 时间：2012-04-05T09:14:56.440
> 
> 标签：javascript, html, canvas

场景：- 我正在尝试使用电话间隙框架制作 iPhone 应用程序，使用 HTML 5 Canvas 我试图将图像放在画布内，但它给出了一个奇怪的错误“绘制（匿名函数）加载”。请帮我解决一下情况。是否可以在一张画布上放置尽可能多的图像？请建议这背后的方法？

```
<!DOCTYPE HTML>
 <html>
<head>
    <title>TestingCanvas</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.5, minimum-                    scale=1.0, maximum-scale=1.6" />   
    <meta name="apple-mobile-web-app-capable" content="YES" />
    <link rel="stylesheet" href="main.css" />
    <!--<script type="text/javascript" src="phonegap-1.0.0.js"></script>-->
    <!--<script type="text/javascript" src="main.js"></script>-->
        <style type="text/css" media="screen">
        canvas,img { 
            display:block; 
            margin:0px auto; 
            border:1px solid black;
        }
        canvas { 
            background:url(Images/chooser-2x2-background.png);
        }
        </style>

    <script>
        function draw()
        {   
            var canvas = document.getElementById("mycanvas");
            var ctx=canvas.getContext("2d");

            var img1 = new Image();
            img1.src = "Images/Icon-Help.png";
            img1.onload = function(){
                ctx.drawImage(img1,15,10);
            }

            var img2 = new Image();
            img2.src = "Images/Icon-Route.png";
            img2.onload = function(){
                ctx.drawImage(img2,250,10);
            }   
            var img3= new Image();
            img3.src = "Image/Icon-Call.png";
            img3.onload = function(){
            alert('lolkyb');
                ctx.drawImage(img3,400,10);
            }

            var img4= new Image();
            img4.src = "Image/Icon-Weather.png";
            img4.onload = function(){
                ctx.drawImage(img4,600,10);
            }

        </script> 
</head>
<body onload="draw()">
    <div id="canvasArea">
        <canvas id="mycanvas" width="4096 " height="300" ></canvas>
        <!--<img style="display:none" src="Images/Icon-Assist.png" id="Assist"  />
         <img style="display:none" src="Images/Icon-Trip.png" id="Trip" />
         <img style="display:none" src="Images/Icon-Training.png" id="Training" />
         <img style="display:none" src="Images/Icon-Map.png" id="Map" />
         <!--<img style="display:none" src="Images/chooser-2x2-background" width="160" height="420" id="frame"> -->
    </div>
</body> 
```

它给出的错误：- 绘制（匿名函数）加载！请帮帮我..提前非常感谢:)*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:13:30.083

添加`}`关闭`draw`功能。

# python - 如何在服务器上为用户创建虚拟环境

> ID：10025849
> 
> 赞同：0
> 
> 时间：2012-04-05T09:15:12.617
> 
> 标签：python, linux, apache, deployment

我有一个 Web 应用程序，用户可以在其中自行注册，然后将 Java 和 C++ 程序保存在他们的帐户中。程序保存在 tmp 目录中，例如 /tmp -user1 --program1 --program2 -user2 --program1 --program2

所以所有用户文件夹都在同一个“tmp”目录中。我想知道如何通过不允许用户访问其他用户的文件来证明安全性。用户将在他的文件夹中执行一个 java 或 c++ 程序，该程序可用于读取服务器上的文件。如何防止这种情况？我对这件事很陌生，我不知道该怎么做。

服务器是Linux服务器，项目是使用Django的python。

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:25:59.953

你需要一些东西来区分每个进程对系统的看法。如果您使用的是 FreeBSD，他们的[Jails](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/jails.html)系统将是您的完美解决方案。

作为 Linux 的替代方案，您可以考虑使用[Linux 虚拟服务器](http://linux-vserver.org/Welcome_to_Linux-VServer.org)实例，或者硬着头皮设置像 Xen 这样的更重的虚拟化环境。

这两个都是虚拟化解决方案，基本上允许您运行使用特定目录作为其根目录的虚拟服务器实例。进程在与主机系统相同的内核中运行，但与系统的其余部分隔离。将它们想象成“chroot”，额外隔离了网络堆栈和进程树。建立和拆除新监狱或虚拟服务器所涉及的工作可能非常快。

如果可以，我建议你切换到 FreeBSD。与 Linux 中的（现在正在下降的）虚拟服务器解决方案相比，监狱享有更加活跃的开发和支持社区。

# clearcase - Clearcase：在您的快照视图中重新定位流是否会影响该流上的其他用户视图

> ID：10025850
> 
> 赞同：1
> 
> 时间：2012-04-05T09:15:13.780
> 
> 标签：clearcase

在您的快照视图中重新定位流是否会影响该流的其他用户。例如，假设我改变了我对 stream_x 的看法，然后做一个

```
ct rebase -reco
ct rebase -complete 
```

变基会影响 stream_x 还是仅影响我对该流的看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:24:12.833

注意：如果每个开发人员有一个流（遵循[开发流/视图模型](https://stackoverflow.com/questions/9880031/integration-stream-vs-integration-view-in-clearcase/9880266#9880266)），公共流的所有子流（已推荐基线），则使用所述推荐基线重新定位您的视图不会影响任何其他开发人员的看法。
它将影响（如下所述）与该 Stream 关​​联的视图，即在这种情况下您的视图（您可以拥有多个与您的 Stream 关​​联的视图）。

* * *

原答案：

是的，它会，但不会立即。
Stream 的配置（基线列表）将发生变化。
所有关联的 UCM 视图都基于该列表的配置规范。
但是，他们希望自动更新他们的配置规范。

*   其他拥有快照视图的用户将在下次更新时看到一个对话框，建议同步他们的视图视图和流。

*   其他具有动态视图的用户不会立即看到更改，但他们的视图属性将显示一个按钮“与流同步”

![动态视图与流同步](../Images/4744529eb052dd76552579f67723ce9f.png)

有关更多信息，请参阅“[与流清除案例集成视图同步](https://stackoverflow.com/questions/9948832/synchronize-with-stream-clear-case-integration-view/9949209#9949209)”。

# html - 什么是 x-tmpl？

> ID：10025856
> 
> 赞同：88
> 
> 时间：2012-04-05T09:15:20.200
> 
> 标签：html

在网上寻找答案，但找不到任何东西。这段代码真的让我很沮丧，因为我无法理解它。（它是插件的一部分，名为：jQuery File Upload）

```
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-download fade">
    {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
        {% } %}</td>
        <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
    {% } %}
    <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
            <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
    </td>
  </tr>
{% } %}
</script> 
```

*   那么，什么类型`text/x-tmpl`呢？
*   这些`{%`和`%}`标签是什么？
*   什么解析器执行这段代码？
*   ...

...但想知道这一切。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-05T09:19:34.397

x-tmpl 没有实际意义，它只是阻止浏览器将脚本解释为 javascript。

它主要与 jquery 模板或[knockoutjs 模板绑定](http://knockoutjs.com/documentation/template-binding.html)一起使用。

在某些时候，一个 javascript 数据对象将与模板一起使用来呈现一些 html。数据对象中的值将替换模板中标有 {%} 和类似内容的值，其中一些 {%} 部分反映了代码流，例如循环等。

我不确定哪个模板库使用 {%} 但是，它不是 jquery 模板、jsrender 或淘汰赛。您必须检查示例代码中引用了哪些库。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-05T09:17:00.930

> 那么，text/x-tmpl 是什么类型呢？

一个非标准的。虽然看起来像一个模板。

> 这些 {% 和 %} 标签是什么？

模板语言的一部分。

> 什么解析器执行这段代码？

可能是用 JavaScript 编写并导入`<script>`同一页面上的另一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-07T10:53:30.093

`jQuery-File-Upload`依赖于`JavaScript-Templates`使用非标准`text/x-tmpl`mime 类型

*   [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)
*   [https://github.com/blueimp/JavaScript-Templates](https://github.com/blueimp/JavaScript-Templates)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-05T16:26:03.387

上面的代码引用了这里的项目 Django Jquery File Upload [https://github.com/sigurdga/django-jquery-file-upload](https://github.com/sigurdga/django-jquery-file-upload)

{% %} 是 Django 模板标签。有关更多信息，请访问[https://docs.djangoproject.com/en/dev/ref/templates/](https://docs.djangoproject.com/en/dev/ref/templates/)

这些标签将被 django 模板系统解析

# javascript - 使用 jQuery 和下拉菜单的简单样式表切换器

> ID：10025860
> 
> 赞同：0
> 
> 时间：2012-04-05T09:15:42.227
> 
> 标签：javascript, jquery, function, stylesheet

目前我有一个样式表切换器，它使用 javascript 根据下拉菜单中的选择来加载新的样式表。

我想重新编写代码以使用 jQuery 而不是 javascript。谁能帮我？我查看了 jQuery 解决方案，虽然有很多，但没有使用下拉菜单。这是我的代码：

```
<head>

<link href="colour/light.css" rel="stylesheet" type="text/css">

<script type="text/javascript">
function changeScheme()
{ var _head = document.getElementsByTagName('head')[0];
  var _link = document.createElement('link');
_link.type = 'text/css';
_link.href = colour.colour.options[colour.colour.selectedIndex].value;
_link.rel = 'stylesheet';
_head.appendChild(_link);
}
</script>

</head>
<body>

<form action="#" name="colour" id="colour" onsubmit="return false;">
              <select name="colour" onchange="changeScheme();">
                <option value="colour/light.css">Light scheme</option>
                <option value="colour/dark.css">Dark scheme</option>
              </select>
            </form>

</body> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:43:01.677

让您的解决方案 100% 使用 jQuery（如建议的 Stefan）

```
<head>
<link href="colour/light.css" rel="stylesheet" type="text/css" id="stylelink">

<script type="text/javascript">
$('#colourselector').change(function(){ 
  $('#stylelink').attr('href',$(this).val());
});
</script>

</head>
<body>
    <form action="#" name="colour" id="colour" onsubmit="return false;">
          <select id="colourselector" name="colour">
            <option value="colour/light.css">Light scheme</option>
            <option value="colour/dark.css">Dark scheme</option>
          </select>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:21:14.507

```
<head>

<link href="colour/light.css" rel="stylesheet" type="text/css" id="stylelink">

<script type="text/javascript">
function changeScheme()
{ 
  $('#stylelink').attr('href',$('#colourselector').val());
}
</script>

</head>
<body>

    <form action="#" name="colour" id="colour" onsubmit="return false;">
          <select id="colourselector" name="colour" onchange="changeScheme();">
            <option value="colour/light.css">Light scheme</option>
            <option value="colour/dark.css">Dark scheme</option>
          </select>
    </form>
</body> 
```

# java - 向现有的 2D 阵列 + I/O 流添加新名称和分数？

> ID：10025862
> 
> 赞同：0
> 
> 时间：2012-04-05T09:15:57.563
> 
> 标签：java, arrays, stream, storage

所以我有一个数独游戏，我正在尝试根据玩家的时间为它实现一个高分系统**（记录前 5 名玩家） 。**时间越短，高分中的排名越高。我已经考虑过如何通过流来实现它。但是，我不知道如何将**新**的高分添加到我的二维数组 ( `nametime[5][2]`)。我可以添加一个名称和分数，但是当我再次玩我的游戏时，我无法添加一个新的。

变量：

```
 private String[][] nametime = new String[5][2];
    private String[] names = new String[5];
    private String[] times = new String[5]; 
```

这是我到目前为止所做的：

```
 //assigns values to names[] and times[]
    private void addNamesAndTimes(String name, String score){

        names[0] = name;
        times[0] = score;

        System.out.println("Player: " + name + " || " + "Time: " + score);
    } 
```

我只为他们的第一个索引分配了名称和分数，`names[0]`因为`times[0]`这是我的问题所在。我不知道如何继续将名称和分数添加到我的数组中。

```
 //merges names[] and times[] array into one 2D array nametime[][]
    private String[][] mergeArrays(String[] a, String[] b){

        for(int i = 0; i < nametime.length; i++){
            nametime[i][0] = a[i];
            nametime[i][1] = b[i];
        }

        return nametime;
    } 
```

我决定合并我的`names[]`和`times[]`数组，因为我`times[]`稍后会对数组做一些事情。（分数比较）

```
public void createScoreFile(String name, String score){
    addNamesAndTimes(name, score);

    File file = new File("Scores.txt");

    try {
        if(!file.exists()){
            System.out.println("Creating new file...");
            file.createNewFile();
        }

        FileOutputStream fo = new FileOutputStream(file, true);
        PrintStream ps = new PrintStream(fo);

        for(int i = 0; i < nametime.length; i++){
            for(int j = 0; j < nametime[0].length; j++){
                ps.print(mergeArrays(names, times)[i][j] + "\t");
            }
            ps.println();
        }

        ps.close();

    } catch(Exception ex) {
        ex.printStackTrace();
    }
} 
```

此方法用于创建存储我的`nametime[][]`数组的文件

```
//reads the contents of the text file and outputs it back to nametime[][]
    public String[][] loadScoreFile(){

    File file = new File("Scores.txt");

    try {
        Scanner scan = new Scanner(file);

        for(int i = 0; i < nametime.length; i++){
            for(int j = 0; j < nametime[i].length; j++){
                nametime[i][j] = scan.next();
            }  
        }

        System.out.println("Nametime Array:");
        for(int i = 0; i < nametime.length; i++){
            for(int j = 0; j < nametime[i].length; j++){
                System.out.print(nametime[i][j] + "\t");
            }  
            System.out.println();
        }

    } catch(Exception ex) {
        ex.printStackTrace();
    }

    return nametime;

} 
```

此方法用于读取我的 Score.txt 文件

```
//method for showing the table and frame
public void showFrame(){
        table = new JTable(loadScoreFile(), header);
        *other GUI stuff here*
} 
```

我会感谢任何可以帮助我的人！

编辑：这里再次重申我的问题。当我玩完游戏时，它应该在数组和 .txt 文件中记录玩家姓名和得分。然后我关闭游戏。当我打开游戏并再次完成游戏时，它必须再次将名称和分数存储到数组和 .txt 文件中。但就我而言，这不是正在发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:36:51.443

我建议创建一个包含玩家时间对的类。此外，也许使用一些 Collections 类来保持结果排序。

这是一个示例（使用 TreeSet 以时间升序保存结果）：

```
import java.util.Iterator;
import java.util.SortedSet;
import java.util.TreeSet;

public class Test {
   static class Result implements Comparable<Result> {

      String name;
      int time;

      public Result(String name, int time) {
         this.name = name;
         this.time = time;
      }

      public int compareTo(Result o) {
         return this.time - o.time;
      }

      @Override
      public String toString() {
         return "Result [name=" + name + ", time=" + time + "]";
      }
   }

   public static void main(String[] args) {
      SortedSet<Result> results = new TreeSet<Result>();
      results.add(new Result("a", 5));
      results.add(new Result("b", 3));
      results.add(new Result("c", 1));
      results.add(new Result("d", 15));
      results.add(new Result("e", 10));
      results.add(new Result("f", 8));
      results.add(new Result("g", 9));
      results.add(new Result("h", 11));
      results.add(new Result("i", 7));
      results.add(new Result("j", 20));

      Iterator<Result> it = results.iterator();
      int i = 0;
      while (it.hasNext()) {
         System.out.println(it.next());
         i++;
         if (i == 5) {
            break;
         }
      }
   }
} 
```

输出：

```
结果 [名称=c，时间=1]
结果 [名称=b，时间=3]
结果 [名称=a，时间=5]
结果 [名称=i，时间=7]
结果 [名称=f，时间=8]

```

# python - os.path.abspath('file1.txt') 没有返回正确的路径

> ID：10025863
> 
> 赞同：7
> 
> 时间：2012-04-05T09:16:00.620
> 
> 标签：python, path

说文件'file1.txt'的路径是`/home/bentley4/Desktop/sc/file1.txt` 说我当前的工作目录是`/home/bentley4`

```
import os
os.path.abspath('file1.txt') 
```

返回`/home/bentley4/file1.txt`

```
os.path.exists('file1.txt') 
```

返回`False`。如果我做

```
os.path.abspath('file_that_does_not_exist.txt') 
```

它返回`/home/bentley4/file_that_does_not_exist.txt` 但是同样，这是不正确的。该文件甚至在我的计算机上都不存在。有没有办法从我当前工作的任何目录中获取正确的绝对路径？（除了定义一个新功能）

因此，这仅在我与现有文件位于同一目录中或在距该文件目录路径一个目录或更远的目录中时才有效？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T09:19:59.503

`os.path.abspath(filename)`返回从当前工作目录中看到的绝对路径。它不检查文件是否实际存在。

如果您想要绝对路径`/home/bentley4/Desktop/sc/file1.txt`并且您在其中`/home/bentley4`，则必须使用`os.path.abspath("Desktop/sc/file1.txt")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:22:31.123

abspath 只是建立一个路径，它不检查任何关于现有文件的内容。

从文档：

> 在大多数平台上，这等价于 normpath(join(os.getcwd(), path))。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:25:07.670

你会得到路径`os.path.abspath(__file__)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T20:49:51.513

我正在处理同样的问题，我发现了这个，希望它可以帮助你：

os.path.join(root, f)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-03T13:06:46.960

问题应该是以前`cwd`使用 os.chdir(another_path) 更改了它，并且它仍然在当前执行的上下文中加载。所以修复应该是在另一个路径中的任务使用完成后恢复原始路径。
例子 ：

```
 original_path = os.getcwd()
  os.chdir(another_path) 
  # here perform some operation over another_path
  os.chdir(original_path ) # here is the restore of the original path 
```

# .net - 使用新版本程序集加载以前版本的工作流程

> ID：10025864
> 
> 赞同：10
> 
> 时间：2012-04-05T09:16:01.423
> 
> 标签：.net, workflow-foundation

我试图找出一种方法来升级我们的工作流运行时（*自定义活动*）使用的程序集，同时仍然能够加载（*反序列*化）旧实例。我的情况是这样的：

1.  使用`CustomActivities`v.1.0.0.0创建和持久化工作流实例
2.  部署新版本的产品女巫有`CustomActivities`v.2.0.0.0
3.  尝试在新的运行时加载以前的工作流

v.1 和 v.2 之间的区别在于我们在程序集中有一些额外的类。现有类型的结构没有改变，所以我认为二进制反序列化仍然可以工作。我们使用`AssemblyResolve`事件将所有类型从 v.1 重定向到 v.2

```
if (args.Name.Contains("CustomActivities"))
{
    Type someTypeFromCustomActivities = typeof(WorkflowType);
    return someTypeFromCustomActivities.Assembly;
} 
```

然而，在反序列化过程中的某个时刻，我们遇到了以下异常：

> SerializationException：ID 为 153 的对象实现了无法解析所有依赖项的 IObjectReference 接口。可能的原因是两个相互依赖的 IObjectReference 实例。

什么可能导致这种行为，我们如何解决它？此外，如果有人有升级不涉及并行运行程序集（*同一应用程序域中的旧版本和新版本）的*工作流的策略，他们将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:21:31.507

程序集解析事件对更改序列化类型程序集引用没有任何作用。您是否尝试过在机器级别从 v1 到 v2 的程序集绑定重定向。

更新：我确实找到了这个链接，它讨论了使用绑定重定向将旧工作流转发到使用 applyTo 属性的新版本。

[http://msdn.microsoft.com/en-us/library/aa349375.aspx](http://msdn.microsoft.com/en-us/library/aa349375.aspx)

# parallel-processing - 多核系统的并行线性代数

> ID：10025866
> 
> 赞同：12
> 
> 时间：2012-04-05T09:16:08.283
> 
> 标签：parallel-processing, linear-algebra, lapack

我正在开发一个需要进行大量线性代数计算的程序。

现在我正在使用**LAPACK/BLAS**例程，但我需要利用我的机器（24 核 Xeon X5690）。

我发现了像**pblas**和**scalapack**这样的项目，但它们似乎都专注于分布式计算和使用 MPI。

我没有可用的集群，所有计算都将在单个服务器上完成，使用 MPI 看起来有点矫枉过正。

有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T12:54:15.213

正如@larsmans（例如 MKL）所提到的，您仍然使用 LAPACK + BLAS 接口，但您只需为您的平台找到一个经过调整的多线程版本。MKL 很好，但是很贵。其他开源选项包括：

*   [OpenBLAS](https://github.com/xianyi/OpenBLAS) / [GotoBLAS](http://www.tacc.utexas.edu/tacc-projects/gotoblas2)，Nehalem 支持应该可以正常工作，但还没有对 westmere 的调整支持。多线程处理得很好。
*   [Atlas](http://math-atlas.sourceforge.net/)：在安装时自动调整到您的架构。对于“典型”矩阵（例如，方形 SGEMM）可能较慢，但对于奇数情况可能会更快，对于 westmere 甚至可能击败 OpenBLAS/GotoBLAS，我自己还没有测试过。主要针对串行情况进行了优化，但确实包括并行多线程例程。
*   [Plasma](http://icl.cs.utk.edu/plasma/) - 专为多核设计的 LAPACK 实现。

我也同意马克的评论；根据您使用的 LAPACK 例程，使用 MPI 的分布式内存实际上可能比多线程更快。BLAS 例程不太可能出现这种情况，但对于更复杂的事情（比如 LAPACK 中的特征值/向量例程），值得测试。虽然 MPI 函数调用确实是一种开销，但在分布式内存模式下执行操作意味着您不必担心错误共享、同步访问共享变量等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:19:04.770

考虑使用[英特尔 MKL](http://software.intel.com/en-us/articles/intel-mkl/)。[OpenBLAS](https://github.com/xianyi/OpenBLAS#readme)也可以很快，虽然我还没有在 > 四核机器上运行它。

# mysql - MySql 响应慢

> ID：10025867
> 
> 赞同：0
> 
> 时间：2012-04-05T09:16:14.120
> 
> 标签：mysql, innodb, semaphore

我发出了一个命令 SHOW ENGINE INNODB STATUS; 在 mysql 中用于检测响应缓慢，以下是 Semaphore 的堆栈跟踪，但由于我是新手，所以无法弄清楚统计数据，如果我们可以从中跟踪一些东西，请告诉我。

```
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 22124, signal count 103334
Mutex spin waits 2140674, rounds 1742014, OS waits 8304
RW-shared spins 24931, OS waits 4171; RW-excl spins 1775, OS waits 8282
Spin rounds per wait: 0.81 mutex, 10.20 RW-shared, 210.67 RW-excl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:42:16.043

[查看InnoDB Monitors](http://dev.mysql.com/doc/refman/5.0/en/innodb-monitors.html)的MySQL 文档。它说：

> 此 [SEMAPHORES] 部分报告等待信号量的线程以及线程需要自旋或等待互斥锁或 rw-lock 信号量的次数的统计信息。大量线程等待信号量可能是磁盘 I/O 或 InnoDB 内部争用问题的结果。争用可能是由于查询的严重并行性或操作系统线程调度中的问题。

# xml - Symfony2：如何在 xml 中重新分配路由文件

> ID：10025872
> 
> 赞同：0
> 
> 时间：2012-04-05T09:16:45.213
> 
> 标签：xml, symfony, routing, yaml

在 routing.yml 我可以重新获取其他路由配置：

```
AcmeTestBundle:
resource: "@AcmeTestBundle/Resources/config/routing.xml"
prefix:   / 
```

相同的配置在 XML 中的外观如何？

我试过：

```
<route id="AcmeTestBundle">
    <default key="_ressource">AcmeTestBundle/Resources/config/routing.xml</default>
</route> 
```

但这不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:18:44.773

看看官方手册

[http://symfony.com/doc/current/book/routing.html#include-external-routing-resources](http://symfony.com/doc/current/book/routing.html#including-external-routing-resources)

在那里您可以单击名为“XML”的选项卡

```
<!-- app/config/routing.xml -->
<?xml version="1.0" encoding="UTF-8" ?>

<routes xmlns="http://symfony.com/schema/routing"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd">

    <import resource="@AcmeHelloBundle/Resources/config/routing.xml" />
</routes> 
```

# java - 计算比率

> ID：10025876
> 
> 赞同：4
> 
> 时间：2012-04-05T09:16:52.617
> 
> 标签：java, libgdx

要将绘图对象渲染到屏幕上，我不知道如何计算屏幕的比率，并且还指定移动设备和 PC 的比率计算是不同的。

我想问这个问题，因为我对世界时间步长有疑问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T21:47:55.890

窗口、屏幕、图像或其他矩形对象的纵横比只是其宽度除以其高度。

因此，例如，在全高清屏幕（1920 像素宽 x 1080 像素高）上，纵横比为：

```
ratio = width / height = 1920 / 1080 = 1.7778 
```

请注意`1920/1080 == 16/9`：这就是为什么这通常被称为`16:9`纵横比。如果您将冒号视为一个分隔符，您将获得与测量屏幕本身相同的纵横比。

同样有趣的是：如果您知道纵横比（例如 16:9 或 1.7778）并且知道屏幕的高度（例如 1080 像素），您可以通过乘以得到屏幕的宽度：

```
width = height * ratio = 1080 * 1.7778 = 1920 // round result to nearest integer
// Or, if you remember that 16:9 means 16/9, then:
width = height * ratio = 1080 * (16 / 9) = 1920 
```

同样，您可以通过除以纵横比和宽度来获得屏幕的高度：

```
height = width / ratio = 1920 / 1.7778 = 1080 // Again, rounding to integer
// Or...
height = width / ratio = 1920 / (16 / 9) = 1080 
```

唯一真正棘手的事情是一些移动设备如何处理纵横比可能有点令人困惑。例如，当您将手机旋转到一侧时，很自然地认为长边已成为屏幕的宽度，而短边是它的高度 - 但是，IIRC，大多数手机操作系统实际上保持宽度和高度相同并由您来处理屏幕基本上只是倾斜的事实。

# python - 如何使用字典值在 Python 中进行正则表达式替换，其中键是来自同一字符串的另一个匹配对象

> ID：10025881
> 
> 赞同：3
> 
> 时间：2012-04-05T09:17:10.500
> 
> 标签：python, regex, search, dictionary, replace

我的正则表达式需要匹配一个句子中的两个单词，但只需要替换第二个单词。第一个词实际上是字典的键，其中获取第二个词的替代项。在 PERL 中，它看起来像：

```
$sentence = "Tom's boat is blue";
my %mydict = {}; # some key-pair values for name => color
$sentence =~ s/(\S+)'s boat is (\w+)/$1's boat is actually $mydict{$1}/;
print $sentence; 
```

这怎么能在python中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:23:22.133

像这样的东西：

```
>>> sentence = "Tom's boat is blue"
>>> mydict = { 'Tom': 'green' }
>>> import re
>>> re.sub("(\S+)'s boat is (\w+)", lambda m: "{}'s boat is actually {}".format(m.group(1), mydict[m.group(1)]), sentence)
"Tom's boat is actually green"
>>> 
```

尽管将 lambda 提取到命名函数中看起来会更好。

# c - C中基于事件的套接字编程

> ID：10025883
> 
> 赞同：1
> 
> 时间：2012-04-05T09:17:23.683
> 
> 标签：c, sockets, select

当调用 select 语句返回时，我们检查活动文件描述符以处理多个客户端的请求。

```
select(maxfd+1, &readfds, NULL, NULL, NULL); 
```

即 select 命令监视 readfds 集中的文件描述符。我的问题是，在处理客户端请求时，更多新连接到达侦听套接字，程序将如何捕获这些新连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:09:47.727

如果您在 select() 的 readfd 集中监视服务器套接字，您就会了解这一点。选择指示服务器套接字为可读，表示有连接等待，因此您可以接受（）它。

```
...
FD_SET(server_sock, &readfds);

select(maxfd + 1,&readfds,NULL,NULL,NULL); 
if(FD_ISSET(server_sock, &readfds)) {
    int new_client = accept(server_socket, ... );
    //add the new client to descriptors to monitor, etc.. 
```

（请注意，操作系统会进行初始 TCP 握手并建立连接，accept() 只是使连接可用于您的程序）

# php - 删除重复斜杠的正则表达式

> ID：10025887
> 
> 赞同：3
> 
> 时间：2012-04-05T09:17:37.833
> 
> 标签：php, regex

你好吗？我有下一个任务。我有很多可以包含重复斜杠的字符串。我需要将重复的斜杠替换为一个斜杠（任何数量的斜杠），但是当在斜杠之后找到下一个符号（引号、双引号、NUL（NULL 字节））时 - 所有斜杠都应该被删除。谢谢。我的语言 - PHP。一些测试：

```
$s1 = 'test\\\\string';
// test\string
$s2 = 'test\\\\\"\\\\\'\\\\string';
// test"'\string
$s3 = 'test\\string\\\\\"';
// test\string" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:25:24.523

采用

```
preg_replace("~\\\\+([\"\'\\x00\\\\])~", "$1", $string); 
```

`\`用一个替换任意数量的`\`。

该模式由任意初始反斜杠`\\\\+`和以下符号组成，该符号是`"`、`'`、`\x00`或之一`\`。替换将有效地删除任何前面的反斜杠。

您的正则表达式中需要 4 个反斜杠。两个反斜杠 ( `\\`) 将导致`\`正则表达式字符串中的一个反斜杠 ()，因为 PHP 解释器使用反斜杠来转义特殊字符，如`"`or `\`。出于同样的原因，您将需要在正则表达式中使用两个反斜杠。

或者反过来解释：要获得`\+`正则表达式，您必须添加一个反斜杠来告诉 PCRE 一个反斜杠不是用于转义`+`. 要获取`\\+`字符串，您还需要在每个反斜杠之前添加一个反斜杠，以告诉 PHP 解释器您不想用第一个反斜杠转义第二个反斜杠。

源代码：`\\\\+`

在正则表达式字符串中：`\\+`

模式匹配：`\+`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:25:30.033

将 2 个或多个连续斜杠替换为单个斜杠 `preg_replace('/\\\\+/','\\',$str);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T09:43:50.253

替代方式。

```
$s = 't\est\\\\\\\\\\\\stri\\\\\"\\\\\'\\\\0\\\\ng';
$s = preg_replace('~\\\\+~', '\\', $s);
$s = str_replace(array('\\"', '\\\'', '\\0'), array('"', '\'', "\0"), $s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T09:34:09.667

试试这些：

```
preg_replace("/\\+(['\"\0\\])/", "$1", $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T09:20:27.127

[stripslashes](http://nl.php.net/stripslashes)有什么问题？它解释了转义“特殊”字符的斜线并删除了“额外”斜线。

# c# - WPF 在运行时使用 C# 从资源中添加 png 图像

> ID：10025888
> 
> 赞同：2
> 
> 时间：2012-04-05T09:17:47.663
> 
> 标签：c#, wpf, image, resources, runtime

我正在尝试在运行时在堆栈面板中添加图像。我的图像在应用程序的资源中。这是我目前拥有的代码：

```
Image image = new Image();
ImageSourceConverter isc = new ImageSourceConverter();
image.Source = isc.ConvertFrom(Properties.Resources.entity16_10) as ImageSource;
image.Height = 16;
image.Width = 16;
panel.Children.Add(image); 
```

我在尝试使用转换器的行上有一个空指针，我不知道这是否是这样做的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:26:11.853

我是这样做的：

```
object imguri = new Uri("/MyAssembly;Component/MyImageFolder/MyImage.png", UriKind.Relative);
BitmapImage ni = new BitmapImage(imguri);
Image img = new Image();
img.Source = ni;
return img; 
```

# java - 在远程机器上启用端口 8443 以进行 https 访问

> ID：10025893
> 
> 赞同：0
> 
> 时间：2012-04-05T09:18:05.610
> 
> 标签：java, client-server, tomcat6, ubuntu-10.04, stunnel

有一个 tomcat6 服务器启用了端口 8443 上的 https 访问，并在`<connector>`server.xml 文件的标记上进行了设置。如下图所示：

```
<Connector port="8443" 
           SSLEnabled="true"
           maxThreads="150" 
           minSpareThreads="25" 
           maxSpareThreads="75"
           enableLookups="true" 
           disableUploadTimeout="true"
           acceptCount="100" 
           debug="0" 
           connectionTimeout="60000" 
           scheme="https" 
           secure="true"
           clientAuth="false" 
           sslProtocol="TLS"
           keystoreFile="/etc/tomcat6/.keystore"
           keystorePass="changeit"
/> 
```

我正在尝试通过 java 代码使用此服务器在远程计算机上使用 https 访问端口 8443。我正在进入`java.net.ConnectException: Connection refused`catalina.out 日志。此异常是`connection.getResponseCode();`在 java 代码行生成的。远程机器上的端口似乎未打开。我能够毫无例外地访问服务器本身的端口 8443。远程机器没有安装tomcat。

我想在远程机器上打开该端口以通过 java 代码进行 https 访问。我使用 ubuntu server 10.04 LTS 作为服务器和远程机器。我不能使用防火墙（由于限制，ufw 或 iptables）。我可以在两台机器上使用 stunnel4。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T08:06:56.120

首先，请使用：`sudo nmap -v -A localhost`检查远程机器上的8443端口是否打开。结果应该是这样的：

```
Starting Nmap 5.21 ( http://nmap.org ) at 2012-06-26 04:27 UTC
NSE: Loaded 36 scripts for scanning.
Initiating SYN Stealth Scan at 04:27
Scanning localhost (127.0.0.1) [1000 ports]
Discovered open port 22/tcp on 127.0.0.1
Completed SYN Stealth Scan at 04:27, 0.02s elapsed (1000 total ports)
Initiating Service scan at 04:27
Scanning 1 service on localhost (127.0.0.1)
Completed Service scan at 04:27, 0.01s elapsed (1 service on 1 host) 
```

如果未显示端口 8443 的信息，例如：

```
Discovered open port 8443/tcp on 127.0.0.1 
```

这意味着端口 8443 未启用，您需要为此做一些事情。

# c++ - 将空向量传递给对象的“正确”方法是什么？

> ID：10025895
> 
> 赞同：3
> 
> 时间：2012-04-05T09:18:07.860
> 
> 标签：c++, stl, stdvector, assignment-operator, pass-by-const-reference

我正在研究一个相当大的 C++ 项目，不幸的是它并没有真正充分利用 C++ 的潜力。大部分代码仍然是用可笑的 C++ 类包装的纯 C。

所以我尝试通过引入一些 C++ 和 STL 来使代码更具可读性和安全性。

但是，当我将向量分配给对象成员时，我会遇到奇怪的崩溃（确切地说是调试错误）。想象一下：

```
class A
{

public:

    // Default constructor
    A()
    {
        initialize(std::vector<unsigned long>());
    };

    A(const std::vector<unsigned long> &data)
    {
        initialize(data)
    };

    ~A() {};

    void initialize(const std::vector<unsigned long> &data)
    {
        m_data = data;
    };

private:

    std::vector<unsigned long> m_data;

}; 
```

然后在代码的其他地方，我调用：

```
a.initialize(std::vector<unsigned long>()); 
```

但是，程序因调试错误而终止：向量迭代器不兼容。它发生在这个任务上：

```
m_data = data; 
```

...应该制作一个副本，这是我打算做的。

但是，如果我将此行更改为：

```
m_data = std::vector<unsigned long>(data); 
```

...一切都按预期工作。

**我的问题是：为什么会这样？这是用空向量初始化对象的正确方法吗？**

请记住，现实中的类要大得多，传递的成员也多得多，这就是我使用初始化函数的原因。而且还有可能传递一个已经存在的数组，所以我确实需要能够将它初始化为空或使用现有数据。

**编辑：我找到了崩溃的原因。我发现我正在查看的代码实际上有点不同：**

```
A *pA = malloc(...); // Not really malloc but a wrapper for a WINAPI-Alloc
// Some stuff happens in between
pA->initialize(std::vector<unsigned long>()); 
```

所以实际上 A 的构造函数从未被调用过，因此向量成员 (m_data) 的构造函数也从未被执行过。这就是为什么在隐式调用复制函数崩溃时分配构造函数起作用的原因，因为尚未构造目标向量。好的经验教训和更可怕的代码需要改进:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:20:54.113

我不知道为什么您的代码会因该错误而崩溃，因为表面上看起来不错。也许您应该编辑您的问题以包含一个[最小的测试用例](http://sscce.org)。

但是，有更好的方法来进行初始化：

```
class A
{
public:

    // Default constructor.
    // Relies on the fact that the default constructor for std::vector is
    // an empty vector.
    A()
    {}

    // Use the initialisation list.
    A(const std::vector<unsigned long> &data)
    : m_data(data)
    {}

private:
    std::vector<unsigned long> m_data;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:22:01.513

`std::vector`构造函数已经初始化了一个空向量。如果你想从另一个 std::vector 分配数据，你可以使用复制构造函数。

```
class A
{

public:

    // Default constructor
    A()
    {
        // Not required:
        // initialize(std::vector<unsigned long>());
    }

    // Make it explicit
    explicit A(const std::vector<unsigned long> &data)
      : m_data(data) // vector copy ctor
    {
    }

    ~A() {}

private:

    std::vector<unsigned long> m_data;

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:22:13.930

是否调用：

`a.initialize(std::vector<unsigned long>());`

`A`在与 where定义不同的库中？在那种情况下，我猜想其中一个库是在启用调试迭代器的情况下构建的，而另一个则不是。

# xcode - 为什么我的代码泄漏以及如何正确使用自动释放..？[可可/xcode]

> ID：10025897
> 
> 赞同：0
> 
> 时间：2012-04-05T09:18:10.420
> 
> 标签：xcode, cocoa, memory-leaks, autorelease

我有一个小项目，我注意到我的代码中有很多漏洞。所以我开始使用自动释放。但有时，我只是无法摆脱泄漏或使用自动释放导致分析器告诉自动释放太多。这是一个返回类属性标题的函数，其中包含字体、阴影和与当前秒的对齐。我一直在玩它一段时间，试图意识到我做错了什么。有人可以看看它并告诉我哪里出错了吗？

```
- (NSAttributedString *)attributedTitle {
    NSMutableParagraphStyle *pStyle = [[[NSParagraphStyle defaultParagraphStyle] mutableCopy] autorelease];
    [pStyle setAlignment: NSCenterTextAlignment];

    NSShadow *pShadow = [[[NSShadow alloc] init] autorelease];  

    [pShadow setShadowColor: [NSColor colorWithSRGBRed:0.11 green: 0.11 blue:0.11 alpha: 0.67]];
    [pShadow setShadowBlurRadius: 1.0];
    [pShadow setShadowOffset: NSMakeSize(0,1)];
    [pShadow set];

    NSMutableDictionary *attributes = [[[[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                         [NSFont fontWithName: @"Arial Bold" size: 11], NSFontAttributeName,
                                         [NSColor colorWithDeviceWhite: 1.0 alpha: 0.83], NSForegroundColorAttributeName,
                                         pStyle, NSParagraphStyleAttributeName,
                                         pShadow, NSShadowAttributeName,
                                         nil] mutableCopy] autorelease];

    NSString *text = [[[NSString alloc] initWithFormat: @"%d", [[[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar]
                                                        components: NSSecondCalendarUnit fromDate: [[NSDate alloc] init]]second]] autorelease];

    NSAttributedString *result = [[[NSAttributedString alloc] initWithString: text attributes: attributes] autorelease];

    return result;

} 
```

起初，这被缩短了很多 - 如果我不能使用变量，我不会使用变量，但我添加了变量并且它变得更长 - 所以这实际上只是泄漏和自动释放的一个例子。

我很确定这也可以做得更简单，但是现在我担心正确使用自动释放以及如何消除泄漏。以及为什么我有泄漏（我还有更多的代码）如果我意识到出了什么问题，我可以修复..）

* * *

好的，我把它整理好了..没有泄漏 - 缩短了..

```
- (NSAttributedString *)attributedTitle {
    NSMutableParagraphStyle *pStyle = [[[NSParagraphStyle defaultParagraphStyle] mutableCopy] autorelease];
    [pStyle setAlignment: NSCenterTextAlignment];

    NSShadow *pShadow = [[[NSShadow alloc] init] autorelease];  

    [pShadow setShadowColor: [NSColor colorWithSRGBRed:0.11 green: 0.11 blue:0.11 alpha: 0.67]];
    [pShadow setShadowBlurRadius: 1.0];
    [pShadow setShadowOffset: NSMakeSize(0,1)];
    [pShadow set];

    NSDictionary *attributes = [[[NSDictionary alloc] initWithObjectsAndKeys:
                                [NSFont fontWithName: @"Arial Bold" size: 11], NSFontAttributeName,
                                [NSColor colorWithDeviceWhite: 1.0 alpha: 0.83], NSForegroundColorAttributeName,
                                pStyle, NSParagraphStyleAttributeName,
                                pShadow, NSShadowAttributeName,
                                nil] autorelease];

    NSDateComponents *dc = [[[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar] autorelease]
                            components: NSSecondCalendarUnit fromDate: [[[NSDate alloc] init] autorelease]];

    return [[[NSAttributedString alloc] initWithString: [[[NSString alloc] initWithFormat: @"%d", [dc second]] autorelease] attributes: attributes] autorelease];
} 
```

* * *

但是那又如何呢？

```
SInt32 CFWeeksInYear(NSUInteger year)
{
    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormat setDateFormat:@"dd.MM.YYYY"];
    NSDate *tempMonth = [[[NSDate alloc] initWithString: [[[NSString alloc] initWithFormat: @"31.12.%ld", year] autorelease]] autorelease];
    SInt32 result = CFAbsoluteTimeGetWeekOfYear([tempMonth timeIntervalSinceReferenceDate], CFTimeZoneCopyDefault());
    return result;
}

SInt32 CFWeekOfYear(CFGregorianDate tempMonth)
{
    CFAbsoluteTime tempDate = CFGregorianDateGetAbsoluteTime (tempMonth, CFTimeZoneCopyDefault());
    return CFAbsoluteTimeGetWeekOfYear(tempDate, CFTimeZoneCopyDefault());
} 
```

它泄漏在：

```
SInt32 result = CFAbsoluteTimeGetWeekOfYear([tempMonth timeIntervalSinceReferenceDate], CFTimeZoneCopyDefault()); 
```

和：

```
CFAbsoluteTime tempDate = CFGregorianDateGetAbsoluteTime (tempMonth, CFTimeZoneCopyDefault()); 
```

甚至在：

```
return CFAbsoluteTimeGetWeekOfYear(tempDate, CFTimeZoneCopyDefault()); 
```

几乎就像它与 CFTimeZoneCopyDefault() 有关但它不应该返回一个指针..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:24:07.143

您坚持认为`CFTimeZoneCopyDefault`“不应该返回指针......”但确实如此。

`CFTimeZoneCopyDefault`返回一个`CFTimeZoneRef`。让我们找出那是什么：

```
typedef const struct __CFTimeZone * CFTimeZoneRef; 
```

是的，它是一个指针。

这个指针不是对 Cocoa 对象的引用，但它仍然是对分配的内存的引用。我们从 Core Foundation 中的函数命名约定中知道，任何带有单词“copy”的 CF 函数都在分配内存。这意味着您可以确保在使用完内存后释放内存。

释放内存* 的一种方法是使用 Core Foundation 函数`CFRelease()`。考虑到这一点，让我们重新审视一下您的代码：

```
SInt32 CFWeekOfYear(CFGregorianDate tempMonth)
{
    CFAbsoluteTime tempDate = CFGregorianDateGetAbsoluteTime (tempMonth, CFTimeZoneCopyDefault());
    return CFAbsoluteTimeGetWeekOfYear(tempDate, CFTimeZoneCopyDefault());
} 
```

我们可以保留对 的引用`CFTimeZoneRef`，然后在完成后将其处理掉：

```
SInt32 CFWeekOfYear(CFGregorianDate tempMonth)
{
    CFTimeZoneRef tzRef = CFTimeZoneCopyDefault();
    CFAbsoluteTime tempDate = CFGregorianDateGetAbsoluteTime (tempMonth, tzRef);
    SInt32 result = CFAbsoluteTimeGetWeekOfYear(tempDate, tzRef);
    CFRelease(tzRef);
    return result;
} 
```

当然，实际应用程序会检查 NULL 响应（等等），但您明白了。

关于自动释放：它不是解决内存管理问题的灵丹妙药。在您的示例中，您做得很好，但是我看到设计不良的应用程序耗尽了物理 RAM，因为自动释放池变得如此之大。在循环和递归方法等地方小心依赖自动释放的对象；您可以明智地分配自己的自动释放池（并释放它们）以避免此类问题。在这个论坛里，我只能这么啰嗦，所以我推荐阅读：

[Apple 内存管理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

祝你在你的努力中好运。

*`CFTimeZone`与其对应的 Cocoa 是“免费桥接”的`NSTimeZone`，这意味着您也可以将`release`消息发送给它（强制转换为`NSTimeZone *`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:44:23.803

这就是你释放 CF 的方式。

```
CFTimeZoneRef tz = CFTimeZoneCopyDefault();

/* Do what you need to do with it */

CFRelease(tz); 
```

# javascript - Plupload - 在使用 Flash 运行时并且浏览器没有 Flash 时显示警告

> ID：10025899
> 
> 赞同：2
> 
> 时间：2012-04-05T09:18:16.300
> 
> 标签：javascript, plupload

当 Plupload 决定使用 Flash 但浏览器不支持它时，我需要显示一条信息消息。

目前，在 plupload.init() 之后没有任何反应（TM），即使 API 指定了一个“运行时”属性，它应该命名使用的运行时，我也找不到找到当前使用的运行时的方法。

这会导致上传按钮不起作用，并且用户不明白发生了什么。

我正在寻找的是这样的：

```
if(plupload.runtime == "flash" && !detect_flash()) {
    $("#flash_warning").show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:54:09.857

不幸的是，失败的运行时加载尝试似乎不会触发您可以订阅的任何事件。因此，除了修改 plupload 源之外，我看不到任何订阅失败的运行时加载尝试的方法。

打开 plupload.js 或 pluploadfull.js，查找 '.init(' 的第一个匹配项。您要订阅的是处理加载尝试的回调函数的 'else' 部分（就在调用 w() 之前下一行的结尾）

```
G.init(B,function(H){if(H&&H.success){B.features=F;B.runtime=G.name;B.trigger("Init",{runtime:G.name});B.trigger("PostInit");B.refresh()}else{w()}}) 
```

无论如何，在我看来，最好的办法是按照示例进行操作，并在应该容纳上传者的容器中添加免责声明消息。这样，如果所有运行时都无法加载，您将收到免责声明消息。

# php - linux 上 PHP 的真正 max_execution_time

> ID：10025902
> 
> 赞同：5
> 
> 时间：2012-04-05T09:18:30.050
> 
> 标签：php, mysql, apache, ubuntu, timeout

[根据文档：](http://php.net/manual/en/function.set-time-limit.php)

```
max_execution_time only affect the execution time of the script itself. 
Any time spent on activity that happens outside the execution of the script
such as system calls using system(), stream operations, database queries, etc.
is not included when determining the maximum time that the script has been running.
This is not true on Windows where the measured time is real. 
```

这通过测试得到证实：

**不会超时**

```
<?php
set_time_limit(5);
$sql = mysqli_connect('localhost','root','root','mysql');
$query = "SELECT SLEEP(10) FROM mysql.user;";
$sql->query($query) or die($query.'<br />'.$sql->error);
echo "You got the page"; 
```

**会超时**

```
<?php
set_time_limit(5);
while (true) {
  // do nothing
}
echo "You got the page"; 
```

我们的问题是，我们真的希望 PHP 超时，不管它在做什么，在给定的时间后（因为如果我们知道我们没有以可接受的数量交付页面，我们不想让资源保持忙碌）时间，比如 10 秒）。我们知道我们可以为 SQL 查询设置诸如[MySQL wait_timeout](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)之类的设置，但页面超时将取决于执行的查询数量。

有些人试图提出[解决方法](http://php.net/manual/en/function.set-time-limit.php#105569)，但似乎无法实施。

**问：有没有一种简单的方法可以`PHP max_execution_time`在 linux 上获得一个真实的，或者我们是否在其他地方更好地计时，例如`Apache`水平？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:59:30.493

这是一个相当棘手的建议，但如果您愿意修改和重新编译 PHP，它肯定会满足您的需求。

看看[https://github.com/php/php-src/blob/master/Zend/zend_execute_API.c](https://github.com/php/php-src/blob/master/Zend/zend_execute_API.c)的 PHP 源代码（文件是`Zend/zend_execute_API.c`），在 function `zend_set_timeout`。这是实现时间限制的功能。以下是它在不同平台上的工作方式：

*   在 Windows 上，创建一个新线程，在其上启动一个计时器，当它完成时，设置一个名为`timed_out`1 的全局变量，PHP 执行核心检查每个指令的这个变量，然后退出（非常简化）

*   在 Cygwin 上，将 itimer 与 ITIMER_REAL 一起使用，它测量*实时*，包括任何睡眠、等待等，然后发出一个*信号*，该信号将中断*任何*处理并停止处理

*   在其他 unix 系统上，将 itimer 与 ITIMER_PROF 一起使用，它仅测量当前进程花费的 CPU 时间（但在用户模式和内核模式下）。这意味着等待其他进程（如 MySQL）不计入其中。

现在您要做的是将Linux上的定时器从ITIMER_PROF更改为ITIMER_REAL，这当然需要手动进行，重新编译，安装等。这两者之间的另一个区别是它们在定时器运行时也使用不同的信号出去。所以我的建议是改变ifdef：

```
#   ifdef __CYGWIN__ 
```

进入

```
#   if 1 
```

这样您就可以将 ITIMER_REAL 和 PHP 等待的信号都设置为 SIGALRM。

无论如何，这整个想法是未经测试的（我将它用于一些非常特定的系统，其中 ITIMER_PROF 被破坏，并且它*似乎*工作），不受支持等。使用它需要您自担风险。它可能与 PHP 本身一起工作，但它可能会破坏 PHP*和*Apache 中的其他模块，如果它们出于某种原因使用 SIGALRM 信号或其他计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T10:44:22.857

这是一个古老且已回答的问题。但是为了帮助别人，我想指出`request_terminate_timeout`php-fpm 选项。如果您使用的是 PHP-FPM，那么它很可能是您所需要的。

如果设置，此选项允许您告诉 PHP-FPM 在 N 秒后终止请求，无论 PHP 做什么。

有关详细信息，请参阅[http://php.net/manual/en/install.fpm.configuration.php#request-terminate-timeout](http://php.net/manual/en/install.fpm.configuration.php#request-terminate-timeout)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T10:08:29.373

来自 httpd.conf：

**Timeout：接收和发送超时前的秒数**

超时 300

# java - 我怎样才能使这段代码更有效率？

> ID：10025905
> 
> 赞同：0
> 
> 时间：2012-04-05T09:18:39.420
> 
> 标签：java, android, arrays, imagebutton, android-videoview

我正在制作一个 Android 应用程序，它基本上只需按一下按钮就可以播放来自网站的视频。正如您在下面的代码中看到的那样，我有 8 个不同的按钮可以播放 8 个不同的视频。我是编程新手，这一切都很好，但我知道这不是最好的编写方式。

有没有办法用更少的代码行做同样的事情？

```
package biz.slwdesign.tvlocallysouthdevon;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.MediaController;
import android.widget.VideoView;

public class Watch extends Activity implements OnClickListener {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.watch); 

        //ImageButton1
        ImageButton video1 = (ImageButton) findViewById(R.id.ImageButton1);
        video1.setOnClickListener(this);

        //ImageButton2
        ImageButton video2 = (ImageButton) findViewById(R.id.ImageButton2);
        video2.setOnClickListener(this);

        //ImageButton3
        ImageButton video3 = (ImageButton) findViewById(R.id.ImageButton3);
        video3.setOnClickListener(this);

        //ImageButton4
        ImageButton video4 = (ImageButton) findViewById(R.id.ImageButton4);
        video4.setOnClickListener(this);

        //ImageButton5
        ImageButton video5 = (ImageButton) findViewById(R.id.ImageButton5);
        video5.setOnClickListener(this);

        //ImageButton6
        ImageButton video6 = (ImageButton) findViewById(R.id.ImageButton6);
        video6.setOnClickListener(this);

        //ImageButton7
        ImageButton video7 = (ImageButton) findViewById(R.id.ImageButton7);
        video7.setOnClickListener(this);

        //ImageButton7
        ImageButton video8 = (ImageButton) findViewById(R.id.ImageButton8);
        video8.setOnClickListener(this);

    }

    public void onClick(View v) {

        if(v.getId() == R.id.ImageButton1){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/austins.mp4");
            videoview1.start();
            videoview1.requestFocus();
            videoview1.setOnCompletionListener(new OnCompletionListener() {           
                public void onCompletion(MediaPlayer videoview) {
                }
            });
        }
        if (v.getId() == R.id.ImageButton2){ 
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/brownsWigs.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if (v.getId() == R.id.ImageButton3){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/frames&Boxes.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if (v.getId() == R.id.ImageButton4){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/hatMckool.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if(v.getId() == R.id.ImageButton5){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/gardenTime.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if (v.getId() == R.id.ImageButton6){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/paulBarclay.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if (v.getId() == R.id.ImageButton7){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/fishShed.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
        if(v.getId() == R.id.ImageButton8){
            setContentView(R.layout.watch);
            VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
            videoview1.setMediaController(new MediaController(this));
            videoview1.setVideoPath("http://slwdesign.biz/android/offBoutique.mp4");
            videoview1.start();
            videoview1.requestFocus();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:33:47.070

给点建议：

1.使用地图保存id和视频url。

```
 //init the video url map in onCreate method
videoMap = new HashMap<Integer, String>();
videoMap.put(R.id.ImageButton1, "http://slwdesign.biz/android/austins.mp4");
...

//then init the onClickListener

Set<Integer> idSets = videoMap.keySet();
for(int id:idSets){
    ImageButton button = (ImageButton)findViewById(id);
    button.setOnClickListener(this);
}

//only init once
videoview1 = (VideoView) findViewById(R.id.videoView1); 
```

另外，如果您在 xml 中设置，则可以取消`android:onClick="onClick"`循环初始化。`onClickListener`

2.onClick方法：

```
 //onclick 
String url = videoMap.get(v.getId());
if(url!=null){
    videoview1.setMediaController(new MediaController(this));
    videoview1.setVideoPath(url);
    videoview1.start();
    videoview1.requestFocus();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:28:14.027

在 xml 文件中，设置此属性 android:onClick="onClick" 而不是初始化 ImageButton 实例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T23:37:27.667

绝对最好的方法是`On Click`在布局 XML 中定义，你必须`On Click`为每个按钮编写一个方法，这种方式对我来说比很多条件更清楚，然后永远不要编写相同的代码行两次或更多次将它们组合在一个方法，然后从需要的地方调用该方法。

我宁愿为您的代码类型使用 switch, case 而不是 if 语句。问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:25:48.610

例如，您可以通过以下方式缩短代码：

创建一个`HashMap<Integer, String>`（可能`static`）将 链接`R.id.*`到`videoPath`. 然后将密钥集迭代到 `setOnClickListener`s 并`onClick`根据 ID 查找路径。

编辑：关于那种方式

```
private static final LinkedHashMap<Integer, String> ID_MAP = new LinkedHashMap<Integer, String>();
static {
    ID_MAP.put(R.id.button1, "http://video1.avi");
    ID_MAP.put(R.id.button2, "http://video2.avi");
    ID_MAP.put(R.id.button3, "http://video3.avi");
    ID_MAP.put(R.id.button4, "http://video4.avi");
    ID_MAP.put(R.id.button5, "http://video5.avi");
}

private final Button[] mButtons = new Button[ID_MAP.size()];
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    int i = 0;
    for (int id : ID_MAP.keySet()) {
        mButtons[i] = (Button) findViewById(id);
        mButtons[i].setOnClickListener(this);
        i++;
    }
}
@Override
public void onClick(View v) {
    int id = v.getId();
    String url = ID_MAP.get(id);
    // set url etc
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T09:26:23.027

您可以通过这种方式保存一些代码行。

```
package biz.slwdesign.tvlocallysouthdevon;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.MediaController;
import android.widget.VideoView;

public class Watch extends Activity implements OnClickListener {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
    setContentView(R.layout.watch);

    //ImageButton1
    ImageButton video1 = (ImageButton) findViewById(R.id.ImageButton1);
    video1.setOnClickListener(this);

    //ImageButton2
    ImageButton video2 = (ImageButton) findViewById(R.id.ImageButton2);
    video2.setOnClickListener(this);

    //ImageButton3
    ImageButton video3 = (ImageButton) findViewById(R.id.ImageButton3);
    video3.setOnClickListener(this);

    //ImageButton4
    ImageButton video4 = (ImageButton) findViewById(R.id.ImageButton4);
    video4.setOnClickListener(this);

    //ImageButton5
    ImageButton video5 = (ImageButton) findViewById(R.id.ImageButton5);
    video5.setOnClickListener(this);

    //ImageButton6
    ImageButton video6 = (ImageButton) findViewById(R.id.ImageButton6);
    video6.setOnClickListener(this);

    //ImageButton7
    ImageButton video7 = (ImageButton) findViewById(R.id.ImageButton7);
    video7.setOnClickListener(this);

    //ImageButton7
    ImageButton video8 = (ImageButton) findViewById(R.id.ImageButton8);
    video8.setOnClickListener(this);

}

public void onClick(View v) {

    setContentView(R.layout.watch);
    VideoView videoview1 = (VideoView) findViewById(R.id.videoView1);
    videoview1.setMediaController(new MediaController(this));
    if(v.getId() == R.id.ImageButton1){
    videoview1.setVideoPath("http://slwdesign.biz/android/austins.mp4");
    }
    if (v.getId() == R.id.ImageButton2){ 
    videoview1.setVideoPath("http://slwdesign.biz/android/brownsWigs.mp4");
    }
    if (v.getId() == R.id.ImageButton3){
    videoview1.setVideoPath("http://slwdesign.biz/android/frames&Boxes.mp4");
    }
    if (v.getId() == R.id.ImageButton4){
    videoview1.setVideoPath("http://slwdesign.biz/android/hatMckool.mp4");
    }
    if(v.getId() == R.id.ImageButton5){
    videoview1.setVideoPath("http://slwdesign.biz/android/gardenTime.mp4");
    }
    if (v.getId() == R.id.ImageButton6){
    videoview1.setVideoPath("http://slwdesign.biz/android/paulBarclay.mp4");
    }
    if (v.getId() == R.id.ImageButton7){
    videoview1.setVideoPath("http://slwdesign.biz/android/fishShed.mp4");
    }
    if(v.getId() == R.id.ImageButton8){
    videoview1.setVideoPath("http://slwdesign.biz/android/offBoutique.mp4");
    }
    videoview1.start();
    videoview1.requestFocus();
} 
```

希望我没有忽略什么。

# java - PAGE_CACHE_FILTER_STATE HTTP 标头

> ID：10025916
> 
> 赞同：1
> 
> 时间：2012-04-05T09:19:26.563
> 
> 标签：java, caching, http-headers

我在任何地方都找不到有关此 HTTP 标头的信息：`PAGE_CACHE_FILTER_STATE`。

当我尝试从浏览器访问我的 RSS 提要时，此标头的值为`NoCacheRequest`，但是当我从我的 Java 应用程序 ( `URL.openConnection()`) 访问它时，我注意到它被设置为`FromCacheRequest`并且我的 RSS 似乎没有更新。

所以我有两个问题：

1.  这个 HTTP 标头是什么？
2.  我怎样才能`PAGE_CACHE_FILTER_STATE: NoCacheRequest`满足所有要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:33:56.793

我以前也从未听说过或见过`PAGE_CACHE_FILTER_STATE`，所以我无法帮助您了解它的实际规格。它*看起来*像一个自定义标头，告诉您是否使用了内容的缓存版本。

为避免缓存，您可以尝试每次以编程方式向 URL 添加不同的内容。例如，您可以添加一个随机数：

`http://www.example.com/feed.rss?no_cache=564482`

`http://www.example.com/feed.rss?no_cache=984637`

当您请求 RSS 提要时，您还应该尝试发送`Pragma: no-cache`和`Cache-Control: no-cache`HTTP 标头。

# java - 诺基亚设备 S40 J2ME 中的数据库问题

> ID：10025919
> 
> 赞同：1
> 
> 时间：2012-04-05T09:19:31.120
> 
> 标签：java, jakarta-ee, java-me

我正在为诺基亚 s40 系列开发应用程序，我正在使用[Floggy 数据库](http://floggy.sourceforge.net/)。

在模拟器上，读写操作执行得非常好，并根据我的需要在列表中显示数据。

但是在设备上，数据不会从数据库中显示出来。

设备 c3 和 X3-02
模拟器 nokia sdk

# firefox - 导出 Firebug Net Tab 请求？

> ID：10025927
> 
> 赞同：5
> 
> 时间：2012-04-05T09:19:49.547
> 
> 标签：firefox, firebug-lite

我想保存网页上的事件序列和资源加载。有没有办法在 Firebug 上导出 net tab web 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T11:36:34.533

我找到了不同的方法来做到这一点：

1.  **Firebug**本身允许将网络面板上的内容复制为 HTML 表格。这`copy/paste functions work`像往常一样导出网络面板中显示的摘要就足够了。
2.  **HTTPFox**插件可以通过使用contex `Copy All Rows`-menu 选项来做同样的事情。这会产生一种制表符分隔格式，可以更好地与文本编辑器配合使用。
3.  **[NetExport](http://www.softwareishard.com/blog/netexport/)** Firebug 扩展在 Firebug 的网络面板中添加了导出功能。可以导出`HAR format`使用其他[工具](http://www.softwareishard.com/blog/har-adopters/)或作为`JSON`数据。`online HAR Viewer`允许查看在 Firebug 中捕获的导出数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:08:24.147

我发现 Firefox 有附加[HTTPFox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/)，这允许更多的功能来测试 HTTP 网络请求。

请让我们知道是否还有其他方法。

# xml - XSLT1.0+Schematron：翻译实例文本 XPath 值，以便在 XSLT 转换期间动态评估它们

> ID：10025928
> 
> 赞同：1
> 
> 时间：2012-04-05T09:19:52.730
> 
> 标签：xml, xslt, xpath, evaluate, schematron

我正在使用 Schematron 在自定义模式感知 XML 编辑器中验证实例 XML 文档（请注意，Schematron 验证只是一个 XSLT 转换）。该实例可能包含在其值中带有路径的元素（简化的 XPath 表达式）。这种路径的一个例子是：

```
/p:root/p:level-one/r:level-two/r:level-two-leaf 
```

其中两个前缀（p 和 r）都绑定到实例文档中定义的命名空间。我的 Schematron 通过确保路径指向的元素实际存在于实例文档中来验证此类路径。它依赖***EXSLT***来执行此操作（我被迫使用 XSLT1.0），更准确地说`dyn:evaluate()`是为了评估元素的文本值，如您所见，它基本上是一个 XPath 表达式。它就像一个魅力。

但有一个问题，实际上是一个巨大的问题。调用从 Schematron XSLT 执行，该 XSLT**在它自己的命名空间上下文中**`dyn:evaluate()`评估 XPath 表达式。这意味着为了使其正常工作，实例文档和 Schematron XSLT 必须使用完全相同的*前缀 → 命名空间****捆绑。我不能强制用户对我的架构中指定的相同命名空间使用相同的前缀......这将是一个愚蠢的要求（但确保至少在两者中使用相同的命名空间）。Schematron 总是在实例验证发生之前生成，但出于性能原因，这只执行一次。我唯一的选择是以某种方式预处理来自实例的路径，并进行某种从“实例路径”到“XSLT 路径”的转换。我是 XSLT 的新手，不知道如何实现这一点。***

 ***我如何将这些文本值转换为 XSLT 的名称空间上下文所需的内容？这甚至可能吗？我目前正在考虑在每次验证调用之前在内存中修复 XSLT（所有这些都在 Java 中完成）——重命名前缀以使其匹配实例绑定或注入新的命名空间属性——但这可能导致前缀名称冲突，我'不确定它将如何影响验证性能。我愿意接受任何建议，因为我假设这也是其他人必须遇到的事情（在使用 Schematron 或 时`dyn:evaluate()`）。

***编辑：从这里开始澄清我正在尝试做的事情。***

我有一个用户正在编辑器中编辑的 XML 实例文件。这种文件的一个例子是：

```
<?xml version="1.0" encoding="utf-8"?>
<config xmlns="http://example.com/ns/config"
         xmlns:cfg="http://example.com/ns/config"
         xmlns:ns1="http://example.com/ns/custom-01"
         xmlns:ns2="http://example.com/ns/custom-02">
  <ns1:some-element>/cfg:config/ns1:other-element/ns2:nested-element</ns1:some-element>
  <ns1:other-element>
    <ns2:nested-element>some value</ns2:nested-element>
  </ns1:other-element>
</config> 
```

然后，这样的文档会通过 schematron 验证，这基本上是一个 XSLT 转换。`ns1:some-element`只有当路径 in引用同一文档中的现有元素时，它才会被声明为有效（因此上面的示例是有效的）。

schematron XSLT 看起来像这样（注意它已经被大大简化了）：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!--This XSLT was automatically generated from a Schematron schema.-->
<xsl:stylesheet xmlns:iso="http://purl.oclc.org/dsdl/schematron"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dyn="http://exslt.org/dynamic"
                xmlns:exsl="http://exslt.org/common"
                xmlns:sch="http://www.ascc.net/xml/schematron"
                xmlns:cfg="http://example.com/ns/config"
                xmlns:cust1="http://example.com/ns/custom-01"
                xmlns:cust2="http://example.com/ns/custom-02"
                extension-element-prefixes="dyn exsl"
                version="1.0">

<!-- other templates -->

<xsl:template match="/cfg:config/cust1:some-element">
    <xsl:choose>
        <xsl:when test="dyn:evaluate(.)">
            <!-- do stuff -->
        <xsl:when>
    </xsl:choose>
</xsl:template>

<!-- other templates -->

</xsl:stylesheet> 
```

我确信这可以解释问题。调用`dyn:evaluate(.)`将尝试评估`/cfg:config/ns1:other-element/ns2:nested-element`XPath 表达式，该表达式使用来自转换的预定义的未绑定前缀（因此始终评估为 false）。

问题过去和现在仍然是：如何翻译这些 XPath 表达式，以便它们在转换中真正有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T19:26:33.543

XSLT 1 在 XSLT 2 十年之后是痛苦的:-)

我相信下面的样式表应该可以工作，但它不能在我可用的两个 xslt 1 处理器（xsltproc 和 saxon6）中的任何一个中工作，但也许它会在你拥有的那个处理器中工作，或者你可以将其用作基础。

这个想法只是用样式表中使用的前缀替换源表达式中的前缀。xsltproc 没有实现 exlt 的正则表达式模块，所以我使用了一个简单的字符串替换模板（它会覆盖作为彼此子字符串的前缀，或者看起来像字符串中出现的前缀的东西）但是它失败了，因为 xsltproc 没有似乎正确地将命名空间节点的字符串值设为命名空间：我明白了

```
$ xsltproc cfg.xsl cfg.xml
xml
here 1 http://www.w3.org/XML/1998/namespace
ns2
here 2
ns1
here 2
cfg
here 2

===
/cfg:config/ns1:other-element/ns2:nested-element
===
XPath error : Undefined namespace prefix 
```

所以除了预定义的 xml 命名空间之外，所有命名空间节点都有空字符串值。

```
saxon6 gets this right:
$ saxon cfg.xml cfg.xsl
xml
here 1 http://www.w3.org/XML/1998/namespace
cfg
here 1 http://example.com/ns/config
ns1
here 1 http://example.com/ns/custom-01
ns2
here 1 http://example.com/ns/custom-02

===
/cfg:config/cust1:other-element/cust2:nested-element
===

Error at xsl:choose on line 26 of file:/C:/tmp/cfg.xsl:
  The URI http://exslt.org/dynamic does not identify an external Java class
Transformation failed: Run-time errors were reported 
```

但没有实现 dyn:evaluate 函数。

无论如何，这是代码：

```
<xsl:stylesheet xmlns:iso="http://purl.oclc.org/dsdl/schematron"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:dyn="http://exslt.org/dynamic"
        xmlns:exsl="http://exslt.org/common"
        xmlns:sch="http://www.ascc.net/xml/schematron"
        xmlns:cfg="http://example.com/ns/config"
        xmlns:cust1="http://example.com/ns/custom-01"
        xmlns:cust2="http://example.com/ns/custom-02"
        extension-element-prefixes="dyn exsl"
        version="1.0">

 <!-- other templates -->

 <xsl:variable name="ns-catch"><x/></xsl:variable>
 <xsl:variable name="xsl-ns" select="exsl:node-set($ns-catch)/*/namespace::*[name()]"/>
 <xsl:template match="/cfg:config/cust1:some-element">
  <xsl:variable name="fix-source">
   <xsl:call-template name="nsprefix"/>
  </xsl:variable>
  <xsl:message>

   ===
   <xsl:value-of select="$fix-source"/>
   ===
  </xsl:message>
  <xsl:choose>
   <xsl:when test="dyn:evaluate($fix-source)">
    <!-- do stuff -->
   </xsl:when>
  </xsl:choose>
 </xsl:template>

 <xsl:template name="nsprefix">
  <xsl:param name="source-ns" select="namespace::*[name()]"/>
  <xsl:param name="string" select="."/>
  <xsl:choose>
   <xsl:when test="$source-ns">
    <xsl:message><xsl:value-of select="name($source-ns)"/></xsl:message>
    <xsl:choose>
     <xsl:when test="string($source-ns[1])=$xsl-ns">
      <xsl:message>here 1 <xsl:value-of  select="string($source-ns[1])"/></xsl:message>
      <xsl:variable name="newstring">
       <xsl:call-template name="replace">
    <xsl:with-param name="string" select="$string"/>
    <xsl:with-param name="from" select="concat(name($source-ns[1]),':')"/>
    <xsl:with-param name="to" select="concat(name($xsl-ns[.=$source-ns[1]][1]),':')"/>
       </xsl:call-template>
      </xsl:variable>
      <xsl:call-template name="nsprefix">
       <xsl:with-param name="source-ns" select="$source-ns[position()!=1]"/>
       <xsl:with-param name="string" select="$newstring"/>
      </xsl:call-template>
     </xsl:when>
     <xsl:otherwise>
      <xsl:message>here 2</xsl:message>
      <xsl:call-template name="nsprefix">
       <xsl:with-param name="source-ns" select="$source-ns[position()!=1]"/>
       <xsl:with-param name="string" select="$string"/>
      </xsl:call-template>
     </xsl:otherwise>
    </xsl:choose>
   </xsl:when>
   <xsl:otherwise>
    <xsl:value-of select="$string"/>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>
 <xsl:template name="replace">
  <xsl:param name="string"/>
  <xsl:param name="from"/>
  <xsl:param name="to"/>
  <xsl:choose>
   <xsl:when test="contains($string,$from)">
    <xsl:value-of select="substring-before($string,$from)"/>
    <xsl:value-of select="$to"/>
    <xsl:call-template name="replace">
     <xsl:with-param name="string" select="substring-after($string,$from)"/>
     <xsl:with-param name="from" select="$from"/>
     <xsl:with-param name="to" select="$to"/>
    </xsl:call-template>
   </xsl:when>
   <xsl:otherwise>
    <xsl:value-of select="$string"/>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>
 <!-- other templates -->

</xsl:stylesheet> 
```***

# sql - 如何在 SQL Server 中旋转文本列？

> ID：10025934
> 
> 赞同：25
> 
> 时间：2012-04-05T09:20:20.257
> 
> 标签：sql, sql-server-2008, pivot

我的数据库中有这样的表（SQL Server 2008）

```
ID      Type            Desc
--------------------------------
C-0 Assets          No damage
C-0 Environment     No impact
C-0 People          No injury or health effect
C-0 Reputation      No impact
C-1 Assets          Slight damage
C-1 Environment     Slight environmental damage
C-1 People          First Aid Case (FAC)
C-1 Reputation      Slight impact; Compaints from local community 
```

我必须将资产、人员、环境和声誉显示为列，并将匹配的 Desc 显示为值。但是当我运行数据透视查询时，我所有的值都是空的。

有人可以查看我的查询并告诉我我在哪里做错了吗？

```
Select severity_id,pt.[1] As People, [2] as Assets , [3] as Env, [4] as Rep
FROM 
(
    select * from COMM.Consequence
) As Temp
PIVOT
(
    max([DESCRIPTION]) 
    FOR [TYPE] In([1], [2], [3], [4])
) As pt 
```

这是我的输出

```
ID  People  Assets   Env     Rep
-----------------------------------
C-0 NULL    NULL    NULL    NULL
C-1 NULL    NULL    NULL    NULL
C-2 NULL    NULL    NULL    NULL
C-3 NULL    NULL    NULL    NULL
C-4 NULL    NULL    NULL    NULL
C-5 NULL    NULL    NULL    NULL 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-05T09:27:41.993

```
Select severity_id, pt.People, Assets, Environment, Reputation
FROM 
(
    select * from COMM.Consequence
) As Temp
PIVOT
(
    max([DESCRIPTION]) 
    FOR [TYPE] In([People], [Assets], [Environment], [Reputation])
) As pt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T18:06:00.777

我在 sql server 中重新创建了它，它工作得很好。

当人们不知道 TYPE 和 DESCRIPTION 列中的内容是什么时，我试图将其转换为工作。

我也以此为指导。（[在 SQL Server 中使用“Pivot”将行转换为列](https://stackoverflow.com/questions/15931607/convert-rows-to-columns-using-pivot-in-sql-server)）

编辑 - -

这是我对上述问题的解决方案，您不知道任一字段中的内容....

```
-- setup commands
        drop table #mytemp
        go

        create table #mytemp (
            id varchar(10),
            Metal_01 varchar(30),
            Metal_02 varchar(100)
        )

-- insert the data
        insert into #mytemp
        select 'C-0','Metal One','Metal_One' union all
        select 'C-0','Metal & Two','Metal_Two' union all
        select 'C-1','Metal One','Metal_One' union all
        select 'C-1','Metal (Four)','Metal_Four' union all
        select 'C-2','Metal (Four)','Metal_Four' union all
        select 'C-2','Metal / Six','Metal_Six' union all
        select 'C-3','Metal Seven','Metal_Seven' union all
        select 'C-3','Metal Eight','Metal_Eight' 

-- prepare the data for rotating:
        drop table #mytemp_ReadyForRotate
        select *,
                    replace(
                        replace(
                            replace(
                                replace(
                                    replace(
                                                mt.Metal_01,space(1),'_'
                                            ) 
                                        ,'(','_'
                                        )
                                    ,')','_'
                                    )
                                ,'/','_'
                                )
                            ,'&','_'
                            )
                    as Metal_No_Spaces
         into #mytemp_ReadyForRotate
         from #mytemp mt

    select 'This is the content of "#mytemp_ReadyForRotate"' as mynote, * from #mytemp_ReadyForRotate

-- this is for when you KNOW the content:
-- in this query I am able to put the content that has the punctuation in the cell under the appropriate column header

        Select id, pt.Metal_One, Metal_Two, Metal_Four, Metal_Six, Metal_Seven,Metal_Eight
        FROM 
        (
            select * from #mytemp
        ) As Temp
        PIVOT
        (
            max(Metal_01) 
            FOR Metal_02 In(
                                Metal_One,
                                Metal_Two,
                                Metal_Four,
                                Metal_Six,
                                Metal_Seven,
                                Metal_Eight
        )
        ) As pt

-- this is for when you DON'T KNOW the content:
-- in this query I am UNABLE to put the content that has the punctuation in the cell under the appropriate column header
-- unknown as to why it gives me so much grief - just can't get it to work like the above
-- it WORKS just fine but not with the punctuation field
        drop table ##csr_Metals_Rotated
        go

        DECLARE @cols AS NVARCHAR(MAX),
            @query  AS NVARCHAR(MAX),
            @InsertIntoTempTable as nvarchar(4000)

        select @cols = STUFF((SELECT ',' + QUOTENAME(Metal_No_Spaces) 
                            from #mytemp_ReadyForRotate
                            group by Metal_No_Spaces
                            order by Metal_No_Spaces
                    FOR XML PATH(''), TYPE
                    ).value('.', 'NVARCHAR(MAX)') 
                ,1,1,'')

        set @query = 'SELECT id,' + @cols + ' into ##csr_Metals_Rotated from 
                     (
                        select id as id, Metal_No_Spaces 
                        from #mytemp_ReadyForRotate
                    ) x
                    pivot 
                    (
                        max(Metal_No_Spaces)
                        for Metal_No_Spaces in (' + @cols + ')
                    ) p '
        execute(@query);

        select * from ##csr_Metals_Rotated 
```

# java - 有没有办法禁用/启用内联断言？

> ID：10025935
> 
> 赞同：0
> 
> 时间：2012-04-05T09:20:21.730
> 
> 标签：java, selenium, junit, assertions

你能告诉我是否有办法禁用和启用内联的 junit.framework.Assert 命令以忽略它们？

代码示例只是为了说明我的意思：

```
junitOff(); // first method I need help with
assertTrue(false); //would normally cause an AssertionError
junitOn(); // second method I need help with
System.out.println("Broke through asserTrue without Error") 
```

我知道可以使用 try/catch 但这不是我想要的，因为我无法在断言之后继续执行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:44:12.500

我看不出有什么方法可以做到这一点。查看您看到的junit代码：

```
static public void assertTrue(String message, boolean condition) {
    if (!condition)
        fail(message);
} 
```

并且`fail()`是：

```
static public void fail(String message) {
    throw new AssertionError(message == null ? "" : message);
} 
```

我看不到任何方法可以打开开关或以其他方式禁用它以抛出`AssertionError`.

作为记录，如果您正在谈论`assert`Java 原语，那么可以禁用它，但只能在编译时使用`-ea`开关。

# iphone - Facebook 赞按钮和页面图像未正确显示

> ID：10025938
> 
> 赞同：1
> 
> 时间：2012-04-05T09:20:37.693
> 
> 标签：iphone, fbconnect, facebook-likebox

我正在为在 Facebook 上创建的页面设置一个 Like 按钮。我遵循了本教程： [http ://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone -应用程序](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

我应用了代码：

```
 NSString *likeButtonIframe = @"<iframe src=\"http://www.facebook.com/plugins/likebox.php?id=122723294429312&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:282px; height:62px;\" allowTransparency=\"true\"></iframe>\"";
 NSString *likeButtonHtml = [NSString stringWithFormat:@"<HTML><BODY>%@</BODY></HTML>", likeButtonIframe];

 [(UIWebView *)[self.view viewWithTag:webViewLikeTag] setFrame:CGRectMake(30, 10.0, 220, 30.0)];
 [(UIWebView *)[self.view viewWithTag:webViewLikeTag] loadHTMLString:likeButtonHtml baseURL:[NSURL URLWithString:@""]]; 
```

它不显示我的 FB 页面图像或喜欢按钮。但是，如果我使用作者的代码，它会同时显示页面和点赞按钮。

问题是我不知道我必须为 ID 参数输入哪个 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:24:02.387

您必须`id`在 url 中使用要在类似框中显示[的页面的 id设置参数。](https://developers.facebook.com/docs/reference/api/)

# c# - 选项卡上的自动完成文本框

> ID：10025939
> 
> 赞同：1
> 
> 时间：2012-04-05T09:20:38.477
> 
> 标签：c#, .net, wpf, textbox

我有一个 WPF 文本框，我想在其中允许通过按 tab 键自动完成用户名。用户名保存在字符串列表中。

有没有比处理 TextBox 上的 KeyDown/Up/etc 事件更好的方法？这似乎效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:23:02.423

不要重新发明轮子！

您可以使用以下内容：

[http://gallery.expression.microsoft.com/WPFAutoCompleteBox/](http://gallery.expression.microsoft.com/WPFAutoCompleteBox/) -**推荐**！

[http://www.codeproject.com/Articles/44920/A-Reusable-WPF-Autocomplete-TextBox](http://www.codeproject.com/Articles/44920/A-Reusable-WPF-Autocomplete-TextBox)

[http://www.codeproject.com/Articles/26535/WPF-Autocomplete-Textbox-Control](http://www.codeproject.com/Articles/26535/WPF-Autocomplete-Textbox-Control)

[http://wpfactb.codeplex.com/](http://wpfactb.codeplex.com/)

# asp.net - 具有自动“服务”的 Web 应用程序 - 哪些选项？

> ID：10025940
> 
> 赞同：0
> 
> 时间：2012-04-05T09:20:50.047
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个 Web 应用程序 (MVC)，我需要一些“自动服务”来运行一些后台操作。该服务（可以在我的网络应用程序的源代码中）需要每 X 分钟/小时/天运行一次。

我需要确保即使网站没有收到任何 Web 请求并且即使主服务器重新启动，此代码也会运行。

在这一点上，我只看到“Windows 服务”作为一个选项。但就我而言，我不允许在此服务器（服务器＃1）上执行此操作，并且我不喜欢在其他机器（服务器＃2）上使用此服务来向服务器＃1执行“网络请求” .

`WinScheduler`也不是一个选择。

各位大佬有其他解决办法吗？

谢谢你。

**更新#1**

无论如何，IIS 7 是否可以在没有任何“Web 请求”的情况下“唤醒”我的应用程序？

**更新#2**

我无法使用“url 请求”来唤醒应用程序（以及我的自动服务）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:33:31.610

看看：http: [//quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)。这是一个很棒的自动化作业库。希望能帮助到你

# symfony1 - 学说 1.2 generate-migrations-diff 只生成外键迁移

> ID：10025945
> 
> 赞同：1
> 
> 时间：2012-04-05T09:21:09.543
> 
> 标签：symfony1, doctrine, symfony-1.4, doctrine-1.2

在 schema.yml 我添加两个表

```
Block:
  columns:
    name:
      type: string(255)
      notblank: true

BlockItem:
  columns:
    block_id:
      type: integer
      notnull: true
    name:
      type: string(255)
      notblank: true
  relations:
    Block:
      class: Block
      foreignAlias: BlockItems
      onDelete: CASCADE 
```

然后我跑`symfony doctrine:generate-migrations-diff`

这个任务只生成一个迁移文件

使用`createForeignKey`但不生成文件`createTable`

有人可以帮忙吗？

> 找到错误的解决方案

如果我删除所有其他迁移文件

一切正常

但这是一个丑陋的解决方案，因为在此之后我需要恢复已删除的迁移

然后重命名新文件和类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:35:56.777

您的迁移版本文件顺序很可能是混乱的，即缺少一个或多个文件。仔细检查文件数是否与 db 中的迁移版本匹配，如果每个文件名都是应该的，没有间隙。nnnnnn_version_1.php 之后是 nnnnn_version_2.php 之后是 ...3.php 等等。

# asp.net - 实体框架激活对其他数据库的触发器：错误

> ID：10025948
> 
> 赞同：0
> 
> 时间：2012-04-05T09:21:20.403
> 
> 标签：asp.net, entity-framework, triggers, sql-server-2008-r2

我有一个 ASP.NET Web 应用程序，它对 SQL Server 2008 R2 中的表进行了一些更改。在这个表上有一个触发器，它在同一数据库服务器上的另一个数据库中的另一个表上进行更新。

保存更改时出现以下错误： - 错误消息：底层提供程序在提交时失败。- InnerException：此 SqlTransaction 已完成；它不再可用。

还允许数据库用户连接到另一个数据库不起作用。

有人知道我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:39:16.370

触发器与实体框架无关。

当对表进行更改时触发器将触发，无论更改来自何处。

这可能是一个权限问题，系统正在尝试使用用于连接到第一个数据库的安全上下文对第二个数据库进行更改。如果由触发器引起的更改失败，那么同一事务中的所有内容都将失败。

由于您在事务中访问 2 个数据库，因此您使用的是 MSDTC，请确保它已启动并且您拥有它的权限。

# objective-c - Xcode 4.1 同时关闭两个 ModalViewController

> ID：10025950
> 
> 赞同：2
> 
> 时间：2012-04-05T09:21:29.653
> 
> 标签：objective-c, ios, modalviewcontroller, dismiss

我正在做一个 TabBarApplication，以及一个带有 ModalViewController 的登录屏幕。登录屏幕中是新的注册按钮，它引导我选择帐户类型，然后引导我填写个人信息表格。我在帐户类型屏幕和个人信息表单中也有返回按钮。

它是这样的： A - 登录屏幕。B - 帐户类型。C - 个人信息表。

用户这样走：A->B->C

如果用户在帐户类型 (B) 处按回，我只是将其关闭并完成。

如果用户在个人信息 (C) 处按回，我会关闭 C 并出现 B 视图。

但问题是，如果用户注册成功。我需要同时解雇 C 和 B 并转到 A（登录屏幕），但我做不到。

由于 B 是 C 的父母，我不能同时解雇他们。

这种方式我称之为新观点：

```
ScreenUpdateAccountOuter *registerscreen = [[ScreenUpdateAccountOuter alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:registerscreen animated:YES]; 
```

这样我就解雇了他们：

```
[self.parentViewController dismissModalViewControllerAnimated:YES]; 
```

感谢一些帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:39:10.380

您需要使用委托方法。

我希望你听说过 iOS 中的协议和委托。要了解更多信息，[请参阅此处](http://iphonedevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

[下载](http://cl.ly/1b330P0U370r1u1R1Q09)这个应用程序，看看我是如何实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:20:13.860

请注意，这是伪代码。

在 C 中：创建一个布尔值并将其设置为是。

在 B 中：

```
- (void)viewDidAppear
{
    if (myBool == YES)
    {
    [self.parentViewController dismissModalViewControllerAnimated:YES];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T19:28:38.127

当在 C 上，并且你想跳回 A 时，在 B 上调用dismissModalViewController，它将动画 C 出来，并在下面显示 A。这是多个模态像这样堆叠的行为。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T09:32:53.073

尝试使用这个：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

希望能帮助到你

**编辑**

可能是一个草率的解决方案，但尝试向`BOOL`第二个控制器添加一个属性。并`viewWillAppear`进行检查。如果是`YES`，那么只需解雇该控制器。在第三个视图中创建第二个视图的属性，然后在从第二个视图切换到第三个视图之前将该属性设置为 self。然后在完成注册后将`BOOL`第二个控制器中的设置为`YES`。之后`viewWillAppear`应该调用第二个视图的 the ，因为`BOOL`它`YES`应该自行关闭。

希望你能理解：）

# java - 带有嵌入式 DERBY DB 的 Java 应用程序

> ID：10025952
> 
> 赞同：0
> 
> 时间：2012-04-05T09:21:32.277
> 
> 标签：java, derby

我正在尝试制作具有嵌入式 DB（derby DB）的可执行 JAVA 应用程序，但面临一些问题，需要您的宝贵帮助。

即，我使用 Eclipse 作为环境。我将 Java 应用程序导出到 RUNNABLE JAR 文件，它在我的台式机上运行良好。

这个想法是制作EXE双击图标并将其发送到另一台没有JAVA背景/环境的机器......所以重点是将它发送给另一个只会获取exe文件的用户，双击它并使用它。

数据库不仅是可读的，因为应用程序正在表中插入数据。所以，它在我的机器上运行良好，但是当我将相同的 JAR 文件发送到另一台机器时，我收到错误：“Schema TEST 不存在”我可以看到应用程序但没有任何数据，就像与 DB 没有连接一样。所以，没用。

即使我使用 JSmooth、Install4j.... 将 JAR 转换为 exe 文件，我也会遇到同样的错误。所以，首先我必须让 JAR 文件在另一台机器上工作。

在我看来，我对数据库文件做错了。

请让我知道您需要更多来自我的信息，并让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:40:23.313

如果应用程序打算在运行时读取和写入数据，那么它不能完全包含在 JAR 文件中，因为您不能将可更新的 Derby 数据库放在 JAR 文件中。您将需要一些“安装过程”，也许是您在用户第一次双击应用程序时运行的一些逻辑，即 (a) 在用户机器上为 Derby 数据库找到合适的位置，(b ) 创建数据库并定义所有表、视图等，(c) 加载任何初始数据。

然后，在应用程序的后续运行中，它将能够重新打开数据库并继续使用它。

# model - 如何在 Sencha Touch 2 中加载单个模型？

> ID：10025955
> 
> 赞同：0
> 
> 时间：2012-04-05T09:21:40.607
> 
> 标签：model, sencha-touch-2

我正在尝试加载模型以将脏数据添加到商店，但似乎无法加载实际模型然后将 setData 加载到它...

这样做：

```
var model = Ext.ModelMgr.getModel("AT.model.Booking"); 
```

返回：

```
function () {
    return this.constructor.apply(this, arguments);
} 
```

这似乎根本不对。我找到了一个关于这个的线程； [http://www.sencha.com/forum/showthread.php?177658-How-to-get-a-single-model](http://www.sencha.com/forum/showthread.php?177658-How-to-get-a-single-model)

以下错误报告指出它应该在以下版本中修复，但它似乎不是......我不确定如何集成错误报告中提到的修复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:39:28.833

我不确定这是否是您想要完成的，但如果您想保存一条记录，请将模型从数据库中取出，然后调用 save()。

```
var model = Ext.ModelManager.getModel('AT.model.Booking');

model.load(id, {
  scope: this,

  success: function(record) {
    if (profile.dirty) {
      profile.save();
    }
  },

  failure: function() {
    console.log('Something went wrong.');
  },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:58:33.640

这是加载单个模型的方式。

```
var thing;
AT.model.Booking.load(thingId, {
  success: function(rec) { 
    thing = rec; 
  } 
}); 
```

一个问题是您必须在模型的“配置”部分中设置代理设置。这种语法比整个“getmodel”的东西更简单一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:43:53.483

如果我错了，请纠正我，但传递给该`getModel`方法的参数是`id`您想要获得的模型的参数。您似乎将模型的类名传递给它。

除非`AT.model.Booking`是`id`一个实际的模型实例。这对我来说似乎很奇怪，但那不关我的事：P

# linux - 什么代码不应该写成实时代码？

> ID：10025959
> 
> 赞同：1
> 
> 时间：2012-04-05T09:21:49.033
> 
> 标签：linux, api, real-time, xenomai

在[Xenomai 的 Posix skin API 中](http://www.xenomai.org/documentation/trunk/html/api/modules.html)，我发现以下内容：

> POSIX 皮肤。
> 时钟和计时器服务。
> 条件变量服务。
> 中断管理服务。
> 消息队列服务。
> 互斥服务。
> 信号量服务。
> 共享内存服务。
> 信号服务。
> 线程管理服务。
> 线程取消。
> 线程调度服务。
> 线程创建属性。
> 线程特定的数据。

我看不到有关**文件处理**和**套接字编程**的任何内容，所以我猜也许文件处理和套接字不是实时处理的？猜错了吗？

请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:29:19.293

Xenomai 及其起源 RTAI 都控制您的调度程序，将 linux 内核本身作为非实时线程处理。

他们提供了许多服务，如您所见，其中大部分与不调用 Linux API（在内核空间中）或系统调用（在用户空间中）的线程和同步有关。如您所知，实时就是“保证期限”，调用 Linux 违反了它（因为 Linux 不保证任何事情）。

由于驱动程序在实时系统中也很重要，因此他们实现了实时驱动程序模型或 RTDM，它有助于在实时上下文中实现和使用设备驱动程序。

内核中的文件处理被强烈反对。如果您谈论的是用户空间实时应用程序，那么您可以访问在 RTDM 中实现的任何驱动程序。如果您没有找到用于文件处理或套接字的工具，那么您就不能使用它们。请注意，即使 a`printf`使用 Linux 系统调用，也是被禁止的。

请注意，如果您确实使用它们，不会有任何中断，您只会失去实时性！我个人确实使用文件进行日志记录，但只有在出现错误时才调用它们，这意味着实时已经被破坏了。

我不知道 Xenomai，但至少在 RTAI 中，如果您调用 Linux 系统调用，那么您会在内核日志中收到类似“RTAI: LXRT changed mode: syscall ...”的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-18T09:17:19.863

实时性是整个系统的属性。为了在系统中实现实时特性，其所有组件（包括硬件、操作系统、驱动程序、库和应用程序）的设计都应考虑应用于实时系统的要求。此类组件（如 RTOS）可用于构建实时系统。但它们的使用并不自动意味着最终系统将是一个实时系统。实际上，如果您的系统中至少有一个组件不支持实时系统的要求，那么您的整个系统就不会是实时的！

实时系统的资源通常大大超过实时任务的平均需求。未消耗的资源可用于执行有用但非关键的后台任务，例如日志记录、系统状态监控、统计信息收集和分析等。将执行此任务的应用程序可以设计为在顶部运行的非实时组件实时组件。如果您确定参与实时任务的所有组件都支持实时要求，则此设计是安全的。由于对您的问题的直接回答：

> 它完全取决于应用程序。一般来说，所有不用于处理实时任务的代码都可以写成非实时的。所有用于处理实时任务的代码都必须是实时编写的。

Xenomai 所做的是隔离非实时 Linux 及其用于在特殊容器中处理非实时任务的活动，该容器在 RTOS 内核之上运行并与基于 RTOS 的实时任务并行. 要在 Xenomai 基础上构建实时系统，您的应用程序应该只依赖于 Xenomai API 以及其他已知并被证明是实时的库和 API。所有有用但完全不重要的后台活动都可以编写为有序的 Linux 应用程序。

存储和网络服务等系统和服务通常不用于实时任务，因为常用的硬件具有很大的不确定性，因此不太适合实时概念。很难说通过网络发送五个数据包或将文件写入硬盘需要多少时间。因此，此类系统的接口并不常见。但同样，应用程序决定了它需要什么实时服务。我可以想象实时任务，其中涉及存储和网络操作。在此类任务的情况下，设计师被迫寻找此类系统组件，这些组件将提供实时存储和网络服务。如您所见，Xenomai 不是候选人。

# java - 如何在 linux 上从命令行运行 java 类

> ID：10025962
> 
> 赞同：-5
> 
> 时间：2012-04-05T09:21:51.860
> 
> 标签：java, compilation, main

> **这个问题与以下内容完全相同：**
> [Running Java Program from Command Line Linux](https://stackoverflow.com/questions/3692229/running-java-program-from-command-line-linux)

我知道如何运行单个 java 类，但我在 Eclipse 上有一个特殊的目录架构：

```
+- root
   |
   +- folder-1
   |   |
   |   +- src
   |   |
   |   +- bin
   |
   +- folder-2
   |
   +- folder-3
   |   |
   |   +- src
   |       |
   |       +- package1
   |       |   |
   |       |   +- subpackage
   |       |       |
   |       |       |- Main.java
   |       |
   |       +- package2
   |       |
   |       +- package3
   |       |
   |       +- package4
   |
   +- folder-4 
```

我已经设法在其“bin”文件夹中编译每个文件夹的“src”文件夹。主“src”（特定文件夹之外）同样编译到主“bin”文件夹。

我的问题是如何从 Linux 命令行 Main.java 运行，它使用位于子包中的一些类，并且还使用主“src”文件夹中的辅助类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:24:09.313

转到 bin 文件夹并使用

```
java <this.is.your.main.class.package>.<ThisIsYourMainClass> 
```

但是您的 bin 文件夹必须与您的 src 文件夹处于同一级别并且具有相同的目录结构。

# java - 如何在java中获取本地网络上机器的MAC地址

> ID：10025965
> 
> 赞同：2
> 
> 时间：2012-04-05T09:22:06.537
> 
> 标签：java, android, macos, sockets, network-programming

我正在使用 NetworkInterface 类来获取 MAC 地址，但我的代码 NetworkInterface ni = NetworkInterface.getByInetAddress(inetAddr); .我在 ni 对象中得到空值，请建议我在局域网上获取设备的 mac 地址的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:58:11.227

试试这个代码，

```
import java.io.*;
import java.net.*;
import java.util.*;
import java.util.regex.*;

public class GetMac
{
public static void main(String[] args)
throws IOException
{
String address = new GetMac().getMacAddress();
System.out.println(address);
}

public String getMacAddress() throws IOException
{
String macAddress = null;
String command = "ipconfig /all";
Process pid = Runtime.getRuntime().exec(command);
BufferedReader in =
new BufferedReader(
new InputStreamReader(pid.getInputStream()));
while (true) {
String line = in.readLine();
if (line == null)
break;
Pattern p = Pattern.compile(".*Physical Address.*: (.*)");
Matcher m = p.matcher(line);
if (m.matches()) {
macAddress = m.group(1);
break;
}
}
in.close();
return macAddress;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:43:11.997

使用以下行获取主机

```
InetAddress address = socket.getInetAddress();
String hostIP = addresss.getHostAddress(); 
```

Ashish 使用这个 java 代码，如果找到任何运气，请告诉我。如果有帮助，请查看此链接， [如何获取 WiFi 网络接口的 MAC 地址？](https://stackoverflow.com/questions/2601124/how-to-obtain-mac-address-of-wifi-network-interface)

# objective-c - 在 UIWebview 中加载页面

> ID：10025969
> 
> 赞同：1
> 
> 时间：2012-04-05T09:22:25.490
> 
> 标签：objective-c, ios, xcode, uiwebview

我正在尝试在 iPad 上使用 UIwebview 显示网页。

我使用了以下代码：-

```
 NSString *urlAddress=@"http://google.com";
   NSURL *url = [NSURL URLWithString:urlAddress];
   NSLog(@"The value of url in screen 2 is %@",url);
   NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
   [web loadRequest:requestObj]; 
```

web 是 uiwebview 类型的对象。这适用于某些链接，但是当我尝试打开以下链接 [http://deverpids.ltisap.com:8000/sap(bD1lbiZjPTgwMA==)/bc/bsp/sap/zbbdashboard/demo.htm#infohttp://deverpids .ltisap.com:8000/sap(bD1lbiZjPTgwMA==)/bc/bsp/sap/zbbdashboard/demo.htm#info](http://deverpids.ltisap.com:8000/sap(bD1lbiZjPTgwMA==)/bc/bsp/sap/zbbdashboard/demo.htm#infohttp://deverpids.ltisap.com:8000/sap(bD1lbiZjPTgwMA==)/bc/bsp/sap/zbbdashboard/demo.htm#info) 它没有显示任何内容。阅读几篇文章并教授这可能与代理问题有关

[如何处理 UIWebView 中的代理设置？](https://stackoverflow.com/questions/5885169/how-to-deal-with-proxy-setting-in-uiwebview) 所以尝试使用它但没有成功。使用的代码如下：

```
NSURL *url = [NSURL URLWithString:@"http://google.com"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request startSynchronous];
    NSError *error = [request error];
    if (!error) {
        NSString *response = [request responseString];
        NSLog(@"error is %@",response);
    } 
```

但是现在 webview 中没有加载任何内容。我该如何解决这个问题。

# c++ - 如何使用 getline() 终止

> ID：10025972
> 
> 赞同：1
> 
> 时间：2012-04-05T09:22:42.617
> 
> 标签：c++, string, file-io, getline, stringtokenizer

我正在尝试将一些整数存储在一个文件中，并使用“，”作为分隔符来存储它。现在，当我读取文件时，我使用 getline() 读取该行并使用标记器来分隔文件，但是，我无法终止该行，我需要 getline 中的一些布尔条件来终止。

```
 while(getline(read,line)) {
         std::cout<<line<<std::endl;
         std::istringstream tokenizer(line);
         std::string token;
         int value;

         while(????CONDN???) {
                 getline(tokenizer,token,',');
                 std::istringstream int_value(token);
                 int_value>>value;
                 std::cout<<value<<std::endl;
         }
  } 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:28:30.477

`getline`在您的情况下，以与在外循环中相同的方式使用就足够了：

```
while(getline(tokenizer, token, ',')) 
```

虽然很可能我会做这样的事情：

```
while(std::getline(read,line)) { // read line by line
     std::replace(line.begin(), line.end(), ',', ' ' ); // get rid of commas
     std::istringstream tokenizer(line);
     int number;

     while(tokenizer >> number) // read the ints
         std::cout<<number<<std::endl;
} 
```

还有另外两种选择——使用 Boost。

[字符串算法](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)：

```
#include <boost/algorithm/string.hpp>
...
std::vector<std::string> strings;
boost::split(strings, "1,3,4,5,6,2", boost::is_any_of(",")); 
```

或[标记器](http://www.boost.org/doc/libs/1_49_0/libs/tokenizer/index.html)：

```
#include <boost/tokenizer.hpp>
typedef boost::char_separator<char> separator_t;
typedef boost::tokenizer<separator_t> tokenizer_t;
...
tokenizer_t tokens(line, sep);
for(tokenizer_t::iterator it = tokens.begin(); it != tokens.end(); ++it)
    std::cout << *it << std::endl; 
```

如果您希望遇到非`int`、非分隔符，例如`1 3 2 XXXX 4`. 然后你必须决定在这种情况下该怎么做。`tokenizer >> number`将停在不是 an 的地方`int`，并设置`istringstream`错误标志。[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)也是你的朋友：

```
#include <boost/lexical_cast.hpp>
...
try 
{
    int x = boost::lexical_cast<int>( "1a23" );
} 
catch(const boost::bad_lexical_cast &)
{
    std::cout << "Error: input string was not valid" << std::endl;
} 
```

最后，在 C++11 中，你有[stoi/stol/stoll](http://en.cppreference.com/w/cpp/string/basic_string/stol)函数：

```
#include <iostream>
#include <string>

int main()
{
    std::string test = "1234";
    std::cout << std::stoi(str) << std::endl;
} 
```

# javascript - 扩展 ContentFlow 插件：点击事件、自定义 css 并使用 Ul li 代替 div

> ID：10025974
> 
> 赞同：2
> 
> 时间：2012-04-05T09:22:59.887
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

有人使用过 contentFlow 插件吗？这似乎很有趣，我打算在我的应用程序中使用它。所以，我想准确地说出这些：

*   单击项目时会触发事件吗？如果是，如何使用此事件（订阅）。我想在其他 jQuery 插件中检索单击的项目对象。

*   是否可以使用 Ul 列表作为容器？

*   最后，如何自定义样式表？

# jquery - 更改链接上的 url 哈希值

> ID：10025976
> 
> 赞同：0
> 
> 时间：2012-04-05T09:23:02.573
> 
> 标签：jquery, ajax, jquery-bbq

我有一个 url 字符串，我想知道当我在页面上使用链接时如何将 order=desc 部分更改为 order=asc？

[http://localhost/en/search?city=Paris#order=desc](http://localhost/en/search?city=Paris#order=desc)

当我点击一个链接时，例如

```
<a href="#">Change order</a> 
```

网址会变成

[http://localhost/en/search?city=Paris#order=asc](http://localhost/en/search?city=Paris#order=asc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:27:13.553

只需`#`在链接（href 属性）中包含片段标识符（ 之后的部分）。

```
<a href="#order=asc">Change order</a> 
```

# android - 顶部自动启动

> ID：10025977
> 
> 赞同：0
> 
> 时间：2012-04-05T09:23:04.850
> 
> 标签：android, autostart

我正在尝试让我的应用程序在手机启动时自动启动，并且我正在使用以下代码：

```
public class BootUpReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
            Log.i("DEBUG", "BootUpReceiver.onReceive INICIO");
            Log.i("DEBUG", "BootUpReceiver.onReceive INICIO");
            Intent i = new Intent(context, AppPradoActivity.class);
            Log.i("DEBUG", "BootUpReceiver.onReceive 1");
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i); 
            Log.i("DEBUG", "BootUpReceiver.onReceive 2");
            Log.i("DEBUG", "BootUpReceiver.onReceive FINAL");
    }

} 
```

如果我在应用程序启动时使用手机，它不会出现在顶部。它从前台开始。

这个问题有什么解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:31:30.050

我不太明白你的问题，但也许你使用了错误的 FLAG ？

您可以尝试添加一些额外的标志：

FLAG_ACTIVITY_CLEAR_TOP

FLAG_ACTIVITY_REORDER_TO_FRONT

FLAG_ACTIVITY_SINGLE_TOP

# c# - WQL 语法：带有 LIKE 运算符的 DiskDriveToDiskPartition

> ID：10025984
> 
> 赞同：1
> 
> 时间：2012-04-05T09:23:26.803
> 
> 标签：c#, syntax, wql

所以我试图将物理驱动器与分区匹配到驱动器号，而 DiskDriveToDiskPartition 似乎是这样做的一个很好的候选者，但我正在努力让查询像我想要的那样工作：

我使用 WMI Query Builder 来创建查询的要点：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", 
    "SELECT * FROM Win32_DiskDriveToDiskPartition WHERE 
    Antecedent = \\\\localhost\\root\\cimv2:Win32_DiskDrive.DeviceID="\\\\\\\\.\\\\PHYSICALDRIVE3""); 
```

对于初学者，Visual Studio 告诉我这不是一个有效的查询，因为它有太多的 \ 字符，而且还有需要排序的非法引号。其次，我想简单地阅读 WHERE 子句

```
WHERE Antecedent LIKE \"%" + physicalDriveID + "%\" 
```

想法是将其传递给 PHYSICALDRIVE 变量，但我得到的只是 Invalid Query 错误。

任何指向正确方向的指针？

让 WMI 查询生成器运行或让我的 LIKE 子句运行将非常有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T21:50:54.063

答案可能需要很长时间，但为了任何仍然感兴趣的人的利益，这是我想出的解决方案。诀窍是利用 WMI 查询的*ASSOCIATORS OF*语法。这样我们就可以有效地将 DeviceID 加入到分区中。

```
using (ManagementObjectSearcher search = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive"))
{
    // extract model and interface information
    foreach (ManagementObject drive in search.Get())
    {
        string antecedent = drive["DeviceID"].ToString(); // the disk we're trying to find out about
        antecedent = antecedent.Replace(@"\", "\\"); // this is just to escape the slashes
        string query = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" + antecedent + "'} WHERE AssocClass = Win32_DiskDriveToDiskPartition";
        using (ManagementObjectSearcher partitionSearch = new ManagementObjectSearcher(query))
        {
            foreach (ManagementObject part in partitionSearch.Get())
            {
                //...pull out the partition information
            }
        }
    }
} 
```

# windows-phone-7 - wp7深色主题，白色背景，键盘导致闪烁黑色

> ID：10025985
> 
> 赞同：2
> 
> 时间：2012-04-05T09:23:28.470
> 
> 标签：windows-phone-7, windows-phone-7.1

我注意到奇怪的行为。在我的应用程序中设置白色背景（例如，用于 xaml 中的 Grid LayoutRoot），然后在页面上单击输入/文本框展开键盘。在 ApplicationBar 中的这个单击按钮之后，它重定向到另一个页面（不要关闭键盘！）并且有一会儿黑色背景显示在键盘所在的位置，然后我被重定向。

有没有人经历过这种行为？有什么解决办法吗？

PS我真的希望我的应用程序的每个主题都具有白色背景 - 深色/浅色。

PS2 appbar闪烁有一个解决方法：

[如何防止 WP7 白色主题上的 ApplicationBar 闪烁？](https://stackoverflow.com/questions/8748552/how-can-you-prevent-the-applicationbar-flickering-on-the-wp7-white-theme)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:26:56.840

我认为您正在使用模拟器来测试应用程序。在设备中尝试相同的操作。您仍然面临任何问题进行反馈。

# c# - 通过单一方法针对 XSD 验证 XML

> ID：10025986
> 
> 赞同：17
> 
> 时间：2012-04-05T09:23:38.160
> 
> 标签：c#, xml, validation, xsd, schema

我需要实现一个 C# 方法，该方法需要针对外部 XSD 验证 XML 并返回一个布尔结果，指示它是否格式正确。

```
public static bool IsValidXml(string xmlFilePath, string xsdFilePath); 
```

我知道如何[使用回调进行验证](http://msdn.microsoft.com/en-us/library/system.xml.schema.validationeventargs.severity.aspx)。我想知道它是否可以在一个方法中完成，而不使用回调。我需要这个纯粹是为了美观：我需要验证多达几十种类型的 XML 文档，所以我想做如下简单的事情。

```
if(!XmlManager.IsValidXml(
    @"ProjectTypes\ProjectType17.xml",
    @"Schemas\Project.xsd"))
{
     throw new XmlFormatException(
         string.Format(
             "Xml '{0}' is invalid.", 
             xmlFilePath));
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-11T15:51:33.597

根据您是否要对非异常事件使用异常，我可以想到几个选项。

如果传递 null 作为验证回调委托，如果 XML 格式错误，大多数内置验证方法都会抛出异常，因此您可以简单地捕获异常并根据情况返回`true`/ 。`false`

```
public static bool IsValidXml(string xmlFilePath, string xsdFilePath, XNamespace namespaceName)
{
    var xdoc = XDocument.Load(xmlFilePath);
    var schemas = new XmlSchemaSet();
    schemas.Add(namespaceName, xsdFilePath);

    try
    {
        xdoc.Validate(schemas, null);
    }
    catch (XmlSchemaValidationException)
    {
        return false;
    }

    return true;
} 
```

想到的另一个选项会突破您的`without using a callback`标准的限制。`true`您可以传递一个匿名方法并使用它来设置/`false`返回值，而不是传递一个预定义的回调方法。

```
public static bool IsValidXml(string xmlFilePath, string xsdFilePath, XNamespace namespaceName)
{
    var xdoc = XDocument.Load(xmlFilePath);
    var schemas = new XmlSchemaSet();
    schemas.Add(namespaceName, xsdFilePath);

    Boolean result = true;
    xdoc.Validate(schemas, (sender, e) =>
         {
             result = false;
         });

    return result;
} 
```

# javascript - Google Visulisation 散点图仅显示最后一系列工具提示

> ID：10025988
> 
> 赞同：1
> 
> 时间：2012-04-05T09:23:56.007
> 
> 标签：javascript, google-visualization

一个演示值一千字：http: [//jsfiddle.net/5YEDW/2/](http://jsfiddle.net/5YEDW/2/)

如您所见，只有第三个系列（黄色系列）显示了工具提示。我的理解是代码应该可以正常工作 - 如本演示所示：http: [//jsfiddle.net/ebyfc/](http://jsfiddle.net/ebyfc/)

任何想法为什么它只显示最后一个系列工具提示（在第一个演示中）？

需要明确的是，红色和蓝色标记应该显示设置的工具提示，而不是默认值。即 (00:15) 不是 10/2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:48:09.360

事实证明，每个系列都需要一个工具提示列。

[http://jsfiddle.net/4THAe/1/](http://jsfiddle.net/4THAe/1/)

# c# - 如何在 Linq 中获得左外连接？

> ID：10025995
> 
> 赞同：2
> 
> 时间：2012-04-05T09:24:12.097
> 
> 标签：c#, .net, linq, linq-to-sql

我的数据库中有两个表，如下所示：

顾客：

```
C_ID  city
--------------
1     Dhaka
2     New york
3     London 
```

个人信息：

```
P_ID  C_ID  Field       value
-------------------------------
1     1     First Name  Nasir
2     1     Last Name   Uddin
3     2     First Name  Jon
4     3     First Name  Lee 
```

我需要这样的选择结果：

**C_ID = '1'：**

```
C_ID  Name (First Name + Last Name)  City
------------------------------------------
1     Nasir Uddin                    Dhaka 
```

**C_ID = '2'：**

```
C_ID  Name (First Name + Last Name)  City
---------------------------------------------
2     Jon                            New york 
```

对应的 Linq 查询会是什么样子？

谢谢纳希德
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:01:39.887

按照先前的答案，例如[Linq to Sql: Multiple left outer joins](https://stackoverflow.com/questions/267488/linq-to-sql-multiple-left-outer-joins)，您可以看到解决此问题的结构，例如：

```
var result = from customer in customers  
                   from personalFirst in personal  
                       .Where(pf => pf.Field == "First Name" && pf.C_ID == customer.C_ID)  
                       .DefaultIfEmpty() 
                   from personalLast in personal  
                       .Where(pl => pl.Field == "Last Name" && pl.C_ID == customer.C_ID)  
                       .DefaultIfEmpty()  
                    where customer.C_ID == 2  
                    select new { customer.C_ID, Name = (personalFirst != null ? personalFirst.Value : "") + " " + (personalLast != null ? personalLast.Value : "") }; 
```

显然，如果您想要所有记录，则删除对 C_ID = 2 的限制

# sql - 根据关联的存在选择不同的条件？

> ID：10025996
> 
> 赞同：0
> 
> 时间：2012-04-05T09:24:12.330
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, union

我的折扣模型有一个 Period 关联。我正在尝试编写一个选择从今天开始的折扣的范围，其中包括：

1.  当它有一个时期时，选择从今天开始的那些时期。
2.  如果没有期间，则选择昨天和今天之间创建的那些折扣

我当前的查询可以满足第一个要求（实际上比这复杂一点）：

```
def self.begins_today
  joins(:event).where("begin = ?", today)
end 
```

但是，我怎样才能达到要求 2？

我正在考虑使用 SQL UNION 命令，但我认为它不能用作范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:42:29.130

我假设事件包含期间关联？

在任何情况下，您都希望在 discounts 表和 period 表之间进行左连接。这将为您提供执行`begin = today`where 子句的期间数据，如果没有期间，则为 null。因此选择数据的 SQL 将是

```
SELECT [columns]
FROM discounts_table
LEFT JOIN periods_table ON periods_table.discount_id = discounts_table.id
WHERE (periods_table.begin = [today]) OR (periods_table.begin IS NULL AND discounts_table.created_at BETWEEN [yesterday] AND [today]) 
```

在 Rails 中，您应该能够按如下方式实现：

```
Discount
  .joins("LEFT JOIN periods_table ON periods_table.discount_id = discounts_table.id")
  .where("(periods_table.begin = ?) OR (periods_table.begin IS NULL AND discounts_table.created_at BETWEEN ? AND ?)", today, today, 1.day.ago.to_date) 
```

不幸的是，您需要使用 SQL 语句，而不是让 rails 为您创建它：

1.  用符号连接只创建一个内部连接，而不是一个左连接
2.  where with symbols, hashes etc will combine conditions using AND, not OR

# machine-learning - svmlight 警告：在 KT 条件下放松 epsilon

> ID：10025998
> 
> 赞同：3
> 
> 时间：2012-04-05T09:24:18.173
> 
> 标签：machine-learning, svm

我正在尝试使用 Svmlight 学习数据集。在优化过程中，我总是看到以下警告。

```
WARNING: Relaxing epsilon on KT-Conditions (0.010000).
.....................................................
WARNING: Relaxing epsilon on KT-Conditions (0.100000).
.....................................................
WARNING: Relaxing epsilon on KT-Conditions (1.000000).
.....................................................
WARNING: Relaxing epsilon on KT-Conditions (10.00000).
.................................................... 
```

它重要吗？这意味着什么？目前培训不成功。它可能与此警告有关吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T13:08:02.640

KT 条件是 SVM 核心的优化问题的一部分。无需过多详细地讨论该理论，当您拥有最佳解决方案时，会有一系列条件成立。然而，经历足够多的迭代以使 KT 条件完全正确需要更长的时间，而不仅仅是使它们在 espilon（一个非常小的数字）范围内为真。本质上，我们不是说 A 必须等于 B，而是说 A 必须在 + 或 - epsilon 内等于 B。研究发现，这在实践中与花额外的时间使条件完全正确一样有效。

SVM Light 首先尝试使用一个非常小的 epsilon，当它无法解决该问题时，它会通过尝试找到一个更大的 epsilon 来放松 epsilon，但很明显，如果问题无法解决，它会在决定之前尝试几次是无法解决的。

所以我会说这些警告是因为你的问题无法解决，而不是相反。